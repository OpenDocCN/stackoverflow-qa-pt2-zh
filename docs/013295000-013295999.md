# StackOverflow 问答 13295000-13295999

# c# - 更改 ListBoxItem 的背景颜色

> ID：13295001
> 
> 赞同：1
> 
> 时间：2012-11-08T18:03:00.777
> 
> 标签：c#, windows-8, listboxitem, windows-store-apps

我正在用 C# 编写一个 Windows 应用商店应用程序，如何更改 ListBoxItem 的背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:12:36.607

是的。您需要修改 ListBox 的 ItemTemplate。右键单击 ListBox，选择 Edit Additional Templates -> ItemTemplate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:14:07.680

这是一个很好的例子，你应该在不提供代码的情况下提出小问题之前进行更多研究，但我希望这会有所帮助[检查这个例子](http://www.codeproject.com/Articles/8134/Coloring-items-in-a-ListBox)

# gridview - 带有网格面板的 Extjs 分页工具栏不起作用

> ID：13295005
> 
> 赞同：0
> 
> 时间：2012-11-08T18:03:04.193
> 
> 标签：gridview, extjs, paging

我在 extjs 中有以下分页代码...即使我将其设置为每页 5 条记录，它仍然显示 6...并且第 1 页（共 2 页）不显示“1”...我的数据有问题sql [Click here to go that Thread](https://stackoverflow.com/questions/13235286/how-to-page-data-according-to-pagingtoolbars-request) .... 所以我决定尝试使用内存存储...但我仍然没有正确分页....有什么帮助吗？

```
 constructor: function () {
    this.callParent(arguments);
    var store = Ext.create('Ext.data.Store', {
        pageSize: 5,
        storeId: 'simpsonsStore',
        fields: ['name', 'email', 'phone'],
        data: {
            'totalCount': "6",
            'items': [{
                'name': 'Lisa',
                "email": "lisa@simpsons.com",
                "phone": "555-111-1224"
            }, {
                'name': 'Bart',
                "email": "bart@simpsons.com",
                "phone": "555-222-1234"
            }, {
                'name': 'Homer',
                "email": "home@simpsons.com",
                "phone": "555-222-1244"
            }, {
                'name': 'Marge',
                "email": "marge@simpsons.com",
                "phone": "555-222-1254"
            }, {
                'name': '29',
                "email": "marge@simpsons.com",
                "phone": "555-222-1254"
            }, {
                'name': '30',
                "email": "marge@simpsons.com",
                "phone": "555-222-1254"
        }]
    },
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items',
            totalProperty: 'totalCount'
        }
    }
});

this.grid = Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    disableSelection: true,
    loadMask: true,
    stripeRows: true,
    trackover: true,
    renderTo: Ext.getBody(),

    store: store,
    columns: [{
        text: 'Name',
        dataIndex: 'name'
    }, {
        text: 'Email',
        dataIndex: 'email'
    }, {
        text: 'Phone',
        dataIndex: 'phone'
    }],

    bbar: Ext.create('Ext.PagingToolbar', {
        store: store,
        displayInfo: true,
        displayMsg: 'Displaying Surveys {0} - {1} of {2}',
        emptyMsg: "No Surveys to display"
    })

});
grid.loadPage(1);
} 
```

} });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:36:20.970

内存代理不适用于常规分页机制。您需要一个特殊的用户扩展类：[http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.toolbar.Paging) ://docs.sencha.com/ext-js/4-1/#! /api/Ext.toolbar.Paging 向下滚动到“使用本地数据分页”部分。

# android - 如何在清单中指定 Android < 9 中的景观和 Android >= 9 中的 sensorLanscape？

> ID：13295006
> 
> 赞同：1
> 
> 时间：2012-11-08T18:03:03.537
> 
> 标签：android, android-manifest, landscape

我有一个需要横向的应用程序。

所以我喜欢`android:screenOrientation="sensorLandscape"`在清单中使用。

但是对于不支持的 Android < 9，我需要使用`android:screenOrientation="landscape"`

只需将两者都放在清单中就会出错。

有没有办法在清单中解决这个问题，还是我真的需要在每个活动`onCreate`中以编程方式处理这个问题`android.os.Build.VERSION.SDK_INT` ？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:08:06.493

您需要以编程方式进行。这是一个例子：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0Ej-K4BpaEo](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0Ej-K4BpaEo)

# actionscript-3 - 在精灵 as3 上加载电影

> ID：13295007
> 
> 赞同：0
> 
> 时间：2012-11-08T18:03:08.123
> 
> 标签：actionscript-3, sprite, away3d

我正在 AS3 上使用 away3DLite 开展一个项目，并且我正在尝试将视频放入其中，我已经有了将要显示视频的正方形，但是为了将视频放在那里，我需要将其放置为一种材料，要创建一个包含视频的材料，设计人员要求在精灵中提供电影，这里是文档“ [http://away3d.com/livedocs/lite_1.0.2_lib/away3dlite/materials/MovieMaterial.html](http://away3d.com/livedocs/lite_1.0.2_lib/away3dlite/materials/MovieMaterial.html) ”。
我所需要的只是将视频加载到精灵上以创建材料。

但是如何在精灵上加载视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:31:23.070

聚会有点晚了，但是任何需要基于 Netstream 的 Away3D Lite 视频播放器的人都可以随意使用我的[VideoMaterial](https://github.com/wemakedotcoms/Away3D/blob/master/com/wemakedotcoms/away3DLite/VideoMaterial.as)

# mysql - MySQL 查询 - 连接和合并标签

> ID：13295009
> 
> 赞同：0
> 
> 时间：2012-11-08T18:03:15.643
> 
> 标签：mysql

我们的文章数据库有两个标签系统表：

1) 标签包含：
tag_id
文本（如政治）

2) tagmaps 包含：
tag_id
article_id

我想列出每篇文章的所有标签（例如：“politics Diplomacy al gore”）并将它们插入到我们搜索表的关键字字段中（使用 article_id 和关键字字段）。

我知道我可以在 phpmyadmin 中做到这一点，但不知道如何......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:08:36.400

If you want the data to be returned in the same field, then you can use `GROUP_CONCAT()`:

```
select m.article_id,
    group_concat(t.text) tags
from tags t
inner join tagmaps m
    on t.tag_id = m.tag_id
group by m.article_id 
```

Result from this would be:

```
article_id  | tags
1           | tag1, tag2, tag3 
```

Then if you want them inserted into you table:

```
insert into search (article_id, keywords)
select m.article_id,
    group_concat(t.text)
from tags t
inner join tagmaps m
    on t.tag_id = m.tag_id
group by m.article_id 
```

If you don't want the text values in the same field:

```
insert into search (article_id, keywords)
select m.article_id,
    t.text
from tags t
inner join tagmaps m
    on t.tag_id = m.tag_id 
```

If you are trying to `UPDATE` the search table, then you can use:

```
update search
set keywords = (select  group_concat(t.text separator ', ') tags
                from tags t
                inner join tagmaps m
                    on t.tag_id = m.tag_id
                where search.article_id = m.article_id
                group by m.article_id); 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/3db74/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:55:38.203

From a friend:

update engine4_core_search left join (select resource_id as tagid , group_concat(engine4_core_tags.text SEPARATOR ', ') as keywords from engine4_core_tagmaps left join engine4_core_tags on engine4_core_tagmaps.tag_id=engine4_core_tags.tag_id group by resource_id) keywordstable on engine4_core_search.id=keywordstable.tagid set engine4_core_search.keywords=keywordstable.keywords where engine4_core_search.type='artarticle' and engine4_core_search.id <10

That will update 10 rows....

# c++ - 从 C++ 中的函数更改数组

> ID：13295011
> 
> 赞同：16
> 
> 时间：2012-11-08T18:03:22.993
> 
> 标签：c++, arrays

我是 C++ 新手（每个新手 XD 的常规介绍），我发现了这种意外行为。我跟踪了程序中的变量和数组，直到确定了这种模式：

```
#include <iostream>

using namespace std;

void showArray(int arr[], int n)
{
    for(int i = 0; i < n; i++) cout << arr[i] << " ";
    cout << endl;
}
void someFunction(int x[], int n) // changes the original values
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
} 
void someFunction2(int * x, int n)
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
} // changes the original values
int someFunction3(int x[], int n)
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
    return 0;
} // changes the original values
int someFunction4(int x[], int n)
{
    x = new int[n];
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
    return 0;
} // does NOT change the original value

int main(void)
{
    int * y = new int[3];
    y[0] = 0;
    y[1] = 1;
    y[2] = 2;
    showArray(y, 3);
    someFunction4(y, 3);
    showArray(y, 3);
    return 0;
} 
```

为什么不`someFunction4()`改变`y`数组`main()`？当我改为调用另一个`someFunctionX()`时，成功地从 更改为。`main()``y``{0, 1, 2}``{2, 1, 0}`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T18:10:35.540

在`someFunction4`中，您分配`x`指向一个`new`整数数组，然后分配该数组。您传递给函数的变量指向的数组仍然指向旧数组。旧数组保持不变，因为`someFunction4`您已设置`x`引用不同的数组，即您在函数中通过`new`.

为了使原件`x`保持`someFunction4()`您分配的值，请执行以下两项操作之一：

1）摆脱`x = new int[n];`。这将使`someFunction4()`工作像以前的一样。

2) 将指针`x`作为参数传递给`someFunction4()`并`someFunction4()`获取指针。

```
int someFunction4(int *x[], int n)
{
    *x = new int[n];
    (*x)[0] = 2;
    (*x)[1] = 1;
    (*x)[2] = 0;
    return 0;
} // Makes x point to a new a new array 
```

在你的主要，做

```
someFunction4(&y,3); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T18:13:53.637

在每个`someFunction`、`someFunction2`和`someFunction3`中，您实际上是在传递一个[指针](http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29)，指向您为数组分配的内存`main()`。这意味着当您对数据进行操作时，此指针指向：

```
x[1] = 1; 
```

它实际上会影响`y`指向 back in的相同内存`main()`！

但是，在 中`someFunction4`，您使用以下语句*重新分配*指针`x`以指向新内存：

```
x = new int[n]; 
```

因此，它不再指向与 in 相同的内存，`y`之后`main()`您对其所做的任何更改（但仅在`someFunction4`! 的范围内）都不会影响`y`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:12:20.890

我做了一个测试用例。

[http://ideone.com/fyl6MX](http://ideone.com/fyl6MX)

结果

```
0 1 2 
0x943b008
0x943b018
0x943b008
0 1 2 
```

第二个是地址是新表的地址。如您所见，您的指针在本地指向其他地址。

```
#include <iostream>

using namespace std;

void showArray(int arr[], int n)
{
    for(int i = 0; i < n; i++) cout << arr[i] << " ";
    cout << endl;
}
void someFunction(int x[], int n) // changes the original values
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
} 
void someFunction2(int * x, int n)
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
} // changes the original values
int someFunction3(int x[], int n)
{
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
    return 0;
} // changes the original values
int someFunction4(int x[], int n)
{
    x = new int[n];
    std::cout << x << endl;
    x[0] = 2;
    x[1] = 1;
    x[2] = 0;
    return 0;
} // does NOT change the original value

int main(void)
{
    int * y = new int[3];
    y[0] = 0;
    y[1] = 1;
    y[2] = 2;
    showArray(y, 3);

    std::cout << y  << endl;

    someFunction4(y, 3) ;
    std::cout << y << endl;

    showArray(y, 3);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:10:37.740

您必须了解参数如何传递给函数

当您调用 SomeFunctionN(y,3) 时，在 SomeFunctionN 中，“x”变量是一个局部变量，初始化为指向 y 在 main 中指向的同一个数组。

然后在 SomeFunc4 中创建一个新数组并将本地指针 (x) 更改为指向新数组。您所做的所有更改都会命中新数组

在所有其他情况下，您不要理会 x

# matlab - 数据的选择性绘图和颜色条划分

> ID：13295012
> 
> 赞同：1
> 
> 时间：2012-11-08T18:03:28.780
> 
> 标签：matlab, plot, scatter

我只想在颜色条上绘制大于或等于 6 且小于或等于 12 的数据。我写了以下内容。但我无法包括其他限制：

```
scatter(x(log_gnd>=6), y(log_gnd>=6), 5, log_gnd(log_gnd>=6)); 
```

我还想将颜色条分成 4 段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:08:15.840

Plot data points greater than or equal to 6 and lower than or equal to 12 ([and function reference](http://www.mathworks.com/help/matlab/ref/and.html)).

```
indices = log_gnd>=6 & log_gnd<=12;    
scatter(x(indices), y(indices), 5, log_gnd(indices)); 
```

Concerning the division of colorbar into 4 segments, following code divides colorbar with labels. If you would like for numbers to be there remove `'YTickLabel', {'First', 'Second', 'Third'}` from the code.

```
colorbar('YTick', [7.5 9 10.5], 'YTickLabel', {'First', 'Second', 'Third'}); 
```

# javascript - HTML5 排序 DIV

> ID：13295013
> 
> 赞同：2
> 
> 时间：2012-11-08T18:03:29.217
> 
> 标签：javascript, jquery, html, web

我对 HTML5 拖放 API 有一点问题。让我们编写代码，以便每个人都能理解。

```
<div id="draggerContainer" droppable="true">
  <div class="draggableItem" draggable="true" data-id="001">[... Stuff inside like <img> and other <div> ...] </div>
  <div class="draggableItem" draggable="true" data-id="002">[... Stuff inside like <img> and other <div> ...] </div>
  <div class="draggableItem" draggable="true" data-id="003">[... Stuff inside like <img> and other <div> ...] </div>
  <div class="draggableItem" draggable="true" data-id="004">[... Stuff inside like <img> and other <div> ...] </div>
  <div class="draggableItem" draggable="true" data-id="005">[... Stuff inside like <img> and other <div> ...] </div>
  <div class="draggableItem" draggable="true" data-id="006">[... Stuff inside like <img> and other <div> ...] </div>
</div> 
```

好吧，这很尴尬，但我不知道如何使用拖放 api。我已经尝试过 html5rocks.com 上的教程，但没有。有人可以告诉我如何在 html5 和 Js 中启动和创建排序系统（如果可能的话，更好的 jQuery）？

这是教程的源代码。

```
function handleDragStart(e) {
  // Target (this) element is the source node.
  this.style.opacity = '0.4';
  dragSrcEl = this;
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/html', this.innerHTML);
}
function handleDragOver(e) {
  if (e.preventDefault) {
    e.preventDefault(); // Necessary. Allows us to drop.
  }
  e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.
  return false;
}
function handleDragEnter(e) {
  // this / e.target is the current hover target.
  this.classList.add('over');
}
function handleDragLeave(e) {
  this.classList.remove('over');  // this / e.target is previous target element.
}
function handleDrop(e) {
  // this / e.target is current target element.
  if (e.stopPropagation) {
    e.stopPropagation(); // stops the browser from redirecting.
  }
  // See the section on the DataTransfer object.
  return false;
}
function handleDragEnd(e) {
  // this/e.target is the source node.
  [].forEach.call(cols, function (col) {
    col.classList.remove('over');
  });
}
var cols = document.querySelectorAll('#draggerContainer .draggableItem');
[].forEach.call(cols, function(col) {
  col.addEventListener('dragstart', handleDragStart, false);
  col.addEventListener('dragenter', handleDragEnter, false)
  col.addEventListener('dragover', handleDragOver, false);
  col.addEventListener('dragleave', handleDragLeave, false);
  col.addEventListener('drop', handleDrop, false);
  col.addEventListener('dragend', handleDragEnd, false);
}); 
```

我使用了[HTML5Rocks](http://www.html5rocks.com/en/tutorials/dnd/basics/)教程中使用的 Javascript 脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:13:43.907

[http://jsfiddle.net/WxTqd/](http://jsfiddle.net/WxTqd/)

首先，当拖动开始时，将`data-id`属性作为拖动信息发送，以便您知道正在拖动哪个元素：

```
$("#draggerContainer")
    .on("dragstart", ".draggableItem", function(e) {
        e.dataTransfer.setData("id", $(this).data("id"));
    }) 
```

您必须继续`preventDefault()`进行`dragover`拖动工作：

```
.on("dragover", ".draggableItem", function(e) {
    e.preventDefault();
}) 
```

然后`drop`，您必须交换元素：

```
.on("drop", ".draggableItem", function(e) {
    // get the element being dragged according to drag information
    var id = e.dataTransfer.getData("id");

    var $draggingElem = $(".draggableItem").filter(function() {
        return $(this).data("id") === id;
    });

    // This is to make sure the element appears under the cursor
    var indexDrag = $draggingElem.index();
    var indexThis = $(this).index();

    if(indexDrag < indexThis) {
        $draggingElem.insertAfter(this);
    } else if(indexDrag > indexThis) {
        $draggingElem.insertBefore(this);
    }
}); 
```

这使用`e.dataTransfer`jQuery 默认不公开的。要启用此功能，请在每次页面加载时执行一次：

```
$.event.props.push("dataTransfer"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:06:36.687

查看[jquery ui 可排序](http://api.jqueryui.com/sortable)

这是一个非常简单的库

# c++ - 链接时未定义对部分专用模板类函数的引用

> ID：13295016
> 
> 赞同：0
> 
> 时间：2012-11-08T18:03:36.360
> 
> 标签：c++, templates, linker, specialization, partial-specialization

所以我对函数模板的部分专业化有疑问。我选择此处描述的解决方案：[问题](https://stackoverflow.com/questions/13291270/function-template-specialization-with-a-template-class/13291407#13291407)

现在我有这个：

```
#include <vector>
#include <iostream>

template <typename T> struct helper {
    static void print(T value) { std::cout << value; }
};
template <typename T> struct helper<std::vector<T>> {
    static void print(std::vector<T> const &value) { }
};

template <typename T>
void print (T const &value) {
    // Just delegate.
    helper<T>::print (value);
}

int main () {
    print (5);
    std::vector<int> v;
    print (v);
} 
```

但我想要这样的布局：

**助手.hpp**

```
#include <vector>
#include <iostream>

template <typename T> struct helper {
    static void print(T value) { std::cout << value; }
}; 
```

**vector_helper.cpp**

```
#include <vector>
#include <iostream>

template <typename T> struct helper<std::vector<T>> {
    static void print(std::vector<T> const &value) { }
}; 
```

**打印文件**

```
#include "helper.hpp"

template <typename T>
void print (T const &value) {
    // Just delegate.
    helper<T>::print (value);
} 
```

**主文件**

```
#include "print.hpp"

int main () {
    print (5);
    std::vector<int> v;
    print (v);
} 
```

编译如下：

```
g++ main.cpp vector_helper.cpp 
```

问题是MinGW正在产生链接时错误：未定义的参考`helper<vector<...>>::print(vector<...>)`

当我添加该行时：

```
#include "vector_helper.cpp" 
```

之前`int main() {...}`，它编译得很好并且也可以工作。我该如何解决它，因为我想在 g++ 命令链接的文件中添加类专业化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:23:09.643

这些模板类不能拆分为单独的目标文件，并且完全不专业。如果您查看像 之类的标准模板`vector`，您会发现所有内容都在一个单独的头文件中，因此。

如果您想像这样隐藏模板的实现，则必须强制将它们实例化为一种或多种特定类型。您可以通过粘贴类似的东西来做到这一点

```
template class helper<std::vector<int>>; 
```

最后`vector_helper.cpp`，如果我没记错的话。但是你最好将所有模板保存在标题中。

# groovy - 通过 Groovy 脚本计算表列值

> ID：13295020
> 
> 赞同：1
> 
> 时间：2012-11-08T18:03:50.620
> 
> 标签：groovy

首先，让我承认我是 Groovy Script 的新手，但之前有其他语言的脚本编写经验。

我正在尝试计算用户在基于 Oracle 表的 Web 表单中输入的字段值的总和。该表有大约 5 个部分，每个部分大约有 5 个问题。每个问题都有一个下拉列表，例如是、否和不适用。每个部分中的所有问题（阅读表格列）都命名为 SEC_1_Q1、SEC_1_Q2、.... SEC_2_Q1、SEC_2_Q2、....等。

根据值（是、否、N/A），用户选择一个分数（1、2、0）分配给相应的问题。每个部分都有自己的总计（成为整个表格的小计，因此将有 5 个小计）和总计 - 这是所有部分总计的总和。用户可以看到所有小计和总计，并针对任何问题更新 OnItemChange。

这就是我可视化为此创建脚本的方式

首先通过与表达式匹配的列名称并创建一个数组或某种列表并获取用户提供的 Values ，将它们汇总并更新小计和总计，以便用户可以看到它们。

这将避免对列名称进行硬编码，并且还将为将来包含/排除当前部分中的问题提供空间。

我在网上仔细查找和搜索，但没有遇到任何关于 Groovy 脚本的想法。

我确信通过 Java 和其他语言实现这一目标还有许多其他不错的选择，但我现在的选择仅限于 Groovy。

我想知道是否有任何/所有优秀的灵魂可以为我指明正确的方向。任何熟的、半熟的 Groovy 脚本示例将不胜感激。

# android - MapView坐标错误

> ID：13295021
> 
> 赞同：0
> 
> 时间：2012-11-08T18:04:07.113
> 
> 标签：android, google-maps, android-mapview, mapactivity

当我在我的 Android 2.2 手机上使用 ItemizedOverlay 在 MapView 中放置图钉时，放置是正确的，但是当我在 4.0 和 4.1 手机上这样做时，放置是错误的。大头针位于地图上的更下方，但具有相同的 x 坐标。

我发现 4.XX 设备上 MapView 左上角的像素值不是（0.0），因为它在我的 2.2 设备上。我可以看到区别在于操作栏的高度（就像图像上突出显示的那个），并找到了一些代码来获取它的高度。现在，在放置引脚时，我从 MapView 中的 y 坐标中减去操作栏的高度。我在我的 4.XX 设备上得到了正确的结果，但现在我的 2.2 设备上的位置是错误的。

我的屏幕顶部有一个添加，但它的高度在我所有的设备上几乎相同。

你知道我应该怎么做才能在所有设备上的 MapView 中获得正确的坐标吗？

*我使用的代码是：*

```
final WindowManager w = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
final Display d = w.getDefaultDisplay();
final DisplayMetrics m = new DisplayMetrics();
d.getMetrics(m);
int totalHeight =mapView.getLayoutParams().height;
int statusbarHeight = totalHeight - mapView.getMeasuredHeight(); 
```

![操作栏示例](../Images/1142ffaa39a71fcf92dc72687eb8214f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:47:03.653

不完全确定你要在这里做什么，但如果你想在地图上放置大头针，那么你应该使用[ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)，它需要地图的纬度/经度坐标，而不是屏幕坐标。

[这里](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/NooYawkTouch/)有一个使用示例。该代码显示了如何在地图上获取图钉、如何移动它们以及如何在屏幕像素和地图纬度/经度之间进行转换，所有这些都在大约 200 行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T12:48:06.143

我解决了这个问题，但这不是最漂亮的解决方案。

我检查操作栏的大小。如果存在，我运行问题中显示的代码。如果size返回null，表示action bar不存在，我就不运行代码了。

代码是：

```
// Check if an action bar exist (Android 4.XX) 
private void getActionBarHeight() {
    // TODO Auto-generated method stub
    final WindowManager w = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    final Display d = w.getDefaultDisplay();
    final DisplayMetrics m = new DisplayMetrics();
    d.getMetrics(m);
    actionBarHeight = m.heightPixels;

    try { // If the action bar exist
        TypedValue tv = new TypedValue();
        context.getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true);
        getResources().getDimensionPixelSize(tv.resourceId);
    } catch (Exception e) { // If it doesn't exist
        actionBarHeight = -1;
    }
} 
```

# php - MySQL：无法插入序列化值

> ID：13295028
> 
> 赞同：0
> 
> 时间：2012-11-08T18:04:36.797
> 
> 标签：php, mysql, serialization, insert

以前插入序列化值时从未遇到过这个问题。

我有一个名为`$prefs`：

```
$prefs=serialize(array( #logged-in preferences
                    'chatMsgs'=>10,
                    'forumThreads'=>10,
                    'forumReplies'=>10
                )); 
```

其中，当序列化时，变为

```
a:3:{s:8:\"chatMsgs\";i:10;s:12:\"forumThreads\";i:10;s:12:\"forumReplies\";i:10;} 
```

我的`INSERT`查询如下：

```
INSERT INTO `general_data`(`email`,`pw`,`name`,`adr`,`male`,`regged`,`conf`,`prefs`)
VALUES ('$email', '$pw', '$name', '$adr', $sex, NOW(), $conf, '$prefs'); 
```

（`male`/`sex`是一个`BIT(1)`，`conf`存在`int(9)`和`prefs`存在`text`）。

通常我的序列化查询会按预期插入，但在这种特殊情况下，由于某种原因，我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 ''a:3:{s:8:\"chatMsgs\"' 附近使用正确的语法。

谁能提供一些关于我如何解决这个问题的见解？

`EDIT`：我*可以*通过在base64中编码序列化字符串来解决这个问题，但是，这并不能解释这个错误的奇怪行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:10:08.843

Your number one problem is not [properly escaping the values in your SQL statement](http://bobby-tables.com/php). You should **NOT** be inserting user values directly into the query. Always use placeholders. A failure to escape means that you run into conflicting delimiters.

The statement should look like:

```
INSERT INTO `general_data`(`email`,`pw`,`name`,`adr`,`male`,`regged`,`conf`,`prefs`)
                    VALUES (:email, :pw, :name, :adr, :sex, NOW(), :conf, :prefs); 
```

Then using [PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/) you can bind against those placeholders. `mysqli` is an alternative that uses `?` instead.

If you insist on using the creaky, dangerous, deprecated `mysql_query` you will have to call `mysql_real_escape_string` on any and all values interpolated into your query string.

# java - 防止第 3 方警告使日志文件混乱

> ID：13295034
> 
> 赞同：4
> 
> 时间：2012-11-08T18:05:11.397
> 
> 标签：java, logging, slf4j

我们正在使用几个我们无法控制的第三方库。其中一个在我们的日志文件中抛出 org.xml.sax.SAXNotRecognizedException 作为警告。除了使我们的日志文件混乱之外，它不会影响任何事情。有没有办法从我们的日志文件中抑制这些警告？我们正在使用 sl4j 日志记录。提前致谢。

将第 3 方 jar 中的包的日志记录级别更改为 OFF 不起作用？我在某处读到需要更改 3rd 方 jar 中的日志记录级别。但我无法修改第 3 方 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:10:09.170

Follow the [documentation of Log4J](http://logging.apache.org/log4j/1.2/manual.html) and configure the logger to restrict the message of those packages to a higher logging level.

# javascript - 解析格式良好的 json 字符串

> ID：13295035
> 
> 赞同：0
> 
> 时间：2012-11-08T18:05:12.443
> 
> 标签：javascript, jquery, json

我有以下格式良好的 JSON 字符串

```
{"paymentType": 1, "payer": john doe, "currency": 1, "receiptId": 4, "amount": [{"invoiceFeeId": 12080, "amountPaid": 120},{"invoiceFeeId": 12079, "amountPaid": 200},{"invoiceFeeId": 12078, "amountPaid": 500}] } 
```

但是，在提交这样的表单之前，我似乎无法将其解析为 javascript 对象。

```
var paymentFormSearialized = '{"paymentType": '+$("#paymentForm #paymentType").val()+', "payer": '+$("#paymentForm #payer").val()+
                               ', "currency": '+$("#paymentForm #currency").val()+', "receiptId": '+$("#receiptId").val()+', "amount": ['+amountsasjson+'] }';

    $.post("<c:url value='/payments/create/${invoiceId}'/>", $.parseJSON(paymentFormSearialized ), function(data){
         alert(data);
    }); 
```

发布数据必须是 JSON 对象，出于绝望我什至尝试使用 eval()。

请帮忙，也许我在我的字符串中没有看到一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:09:21.893

这不是很好的格式，你有未引用的字符串。再说了，既然可以做一个对象，为什么还要做一个笨拙的字符串，然后解析成一个对象呢？

```
var data = {
    paymentType: +$("#paymentForm #paymentType").val(),
    payer: $("#paymentForm #payer").val(),
    currency: $("#paymentForm #currency").val(),
    receiptId: $("#receiptId").val(),
    amount: [{"invoiceFeeId": 12080, "amountPaid": 120},{"invoiceFeeId": 12079, "amountPaid": 200},{"invoiceFeeId": 12078, "amountPaid": 500}]
}; 
```

# php - 标头位置代码不起作用 - 建议？

> ID：13295042
> 
> 赞同：0
> 
> 时间：2012-11-08T18:05:32.600
> 
> 标签：php, login, location

PHP 不是我的菜，但我需要设置一个简单的登录区域——所以我来了。这是我发现的一些似乎可以工作但不会重定向的代码。

如果我将重定向更改为回声，它会起作用。如果我将位置更改为“包含”，它会起作用。我在“位置”代码中做错了什么？

我愿意接受有关交替编码的建议。我有一个网页，如果用户输入密码，网站上会出现一个附加部分。所以我在那个网站上有一个表单提交到这个代码，然后它应该重定向回来，新部分现在可见。

这是我的代码——

```
<?php

// error reporting
ini_set('display_errors',1); 
 error_reporting(E_ALL);

$host="localhost"; // Host name
$username="foo"; // Mysql username
$password="foo"; // Mysql password
$db_name="foo"; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
header("Location: http://www.google.com/"); 

// Register $myusername, $mypassword 
// success
//session_register("myusername");
//session_register("mypassword");
}
else {
echo "Wrong Username or Password";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:14:41.640

`session_register`已弃用。因此，输出已经发送，您可能会看到错误报告已打开。之前什么都不能输出`header`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:16:18.013

我猜您的标头已经发送，这会使您尝试使用的标头无效（尽管 PHP 通常会告诉您这是一个问题）。

可能导致您的标头自动发送的是您的 php 块之外的任何正常输出（例如，如果您的表单 html 存在于此块上方）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:02:36.360

事实证明，问题似乎是我的代码中的空格。一旦我删除了所有间距，问题就消失了。有点奇怪——但这就是发生的事情。感谢帮助！

# c# - 怎么做：AjaxControlToolkit AjaxFileUpload 抛出异常 OnUpdateComplete 事件

> ID：13295049
> 
> 赞同：0
> 
> 时间：2012-11-08T18:06:05.640
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我在我的项目中使用 AjaxFileUpload 控件。但是在 OnUploadComplete 事件中，我会保存文件并在数据库中做一些事情。

如果这两个操作抛出异常，我怎样才能使 AjaxFileUpload 失败？相反，它显示“已上传”，我如何在其中放置错误消息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:36:43.460

您可以处理异步文件上传的客户端事件。这是一个很好的例子 [http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=965](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=965)

# sql-server - 传递表值参数时如何组织或避免临时用户定义表类型

> ID：13295050
> 
> 赞同：3
> 
> 时间：2012-11-08T18:06:06.887
> 
> 标签：sql-server, sql-server-2008, stored-procedures, parameters, table-valued-parameters

正如这里所讨论的：将[List<> 传递给 SQL 存储过程](https://stackoverflow.com/questions/209686/passing-list-to-sql-stored-procedure)和许多其他地方，将表作为参数传递的一种方法是使用 SqlParameter。

这样做的问题是它需要在 TypeName 属性中指定用户定义的表类型。

我需要从 Excel 文件加载数据并将其作为参数传递给 SQL 语句，该语句会将这些数据与其他数据库表连接起来以获得结果。

为此，我需要为每个可能的 Excel 文件变体创建用户定义的表格类型。我不想用那些仅用于从每个 Excel 文件传递​​数据的类型污染 SQL 类型。我如何做到这一点？

您可能会问我如何加入我不知道类型的东西 - 答案是 - 我知道某些字段的名称和类型，但不是全部。此外，如果我想使用 select * 返回连接的数据，它将适用于任何字段列表，而无需我将所有字段都硬编码在类型中。

我不能使用 OPENROWSET 直接从 SQL 加入这个文件，因为我有 64 位 SQL Server，它不起作用给我一个奇怪的错误。

SQL Server中有临时表的概念，但是没有临时类型的概念，如何模拟临时类型或者在传表时避免使用它？

我可以将数据作为 XML 传递，但如果数据大小足够大且数据大小限制为 2Gb，则效率似乎较低。

组织它的一种方法是创建类型，然后执行语句，然后在之后删除类型或使用 TRY..CATCH 并在 catch 中删除类型。

另一个是制作特殊的模式，在该模式中生成唯一的类型名称，并使用垃圾收集 SQL 作业不时清理它。它可以与第一种方法结合使用，仅用于清理剩菜。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:32:08.120

您当然不应该构建一个 2GB 的表变量或用户定义的数据类型并传递它。相反，使用 SSIS 将文件传递到某种持久表或临时表中，然后使用存储过程对其进行操作。即使您设法将 2GB 的数据存储到存储过程中，该事务也会运行很长时间，以至于几乎肯定会阻塞其他事务。

在不提供有关您的方案的其他详细信息的情况下，这是您所希望的最佳答案。

# javascript - 如何更改谷歌可视化图表中单元格的颜色

> ID：13295058
> 
> 赞同：2
> 
> 时间：2012-11-08T18:06:23.297
> 
> 标签：javascript, google-visualization

我正在谷歌图表中建立一个表格。我想根据单元格的数值更改单元格的颜色。我假设我将执行类似遍历所有单元格并在此处调用文档中指定的 colorFormat 对象： [https ://developers.google.com/chart/interactive/docs/reference#colorformatter](https://developers.google.com/chart/interactive/docs/reference#colorformatter)

问题是没有关于如何实现此方法的示例。

有谁知道一个例子或如何实现 colorFormat 来改变单元格的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:12:36.637

[https://developers.google.com/chart/interactive/docs/reference#colorformatter](https://developers.google.com/chart/interactive/docs/reference#colorformatter) - 你向下滚动了吗？

```
var formatter = new google.visualization.ColorFormat();
formatter.addRange(-20000, 0, 'white', 'orange');
formatter.addRange(20000, null, 'red', '#33ff33');
formatter.format(data, 1); // Apply formatter to second column 
```

# php - php表单填写后不会发布结果

> ID：13295059
> 
> 赞同：0
> 
> 时间：2012-11-08T18:06:24.937
> 
> 标签：php, html, if-statement, refresh, calculator

首先，我不是编程专家，所以如果可以的话，请稍微解释一下，以便我更好地理解它们。我正在尝试制作一个计算器，该计算器将包含一些用户可以填写的字段，并显示最后的输出。基本上是这样的：

变量框 “Go”按钮 按下 Go 后在此处显示结果。

用户可以更改这些框并再次单击 go 以刷新新结果。

如果可能的话，我不想为此使用 Java。请帮助我提供 HTML/PHP 解决方案。

我有这个页面命名为“isset.php”

```
<?php 
session_start(); 
error_reporting(E_ALL);
ini_set('display_errors', '1');?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>

<?php
     if(isset($_POST['submit']))
        {
        $a = $_POST['a'];
        $b = $_POST['b']; 
        $sf = $a-(2*$b);
        echo "<br><br>Safety Factor is ";
        echo $sf;
        } 
     else {
        echo "Your results will display here after you use the calculator.";
          }
 ?>

 <br>Calculator
 <form name="submit" method="post" action="isset.php">
 <table width="450px">
     <td valign="center">
     <label for="a">a</label></td>
        <td valign="center">
        <input type="text" name="a" value="45"></td></tr>
     <td valign="center">
     <label for="b">b</label></td>
        <td valign="center">
        <input type="text" name="b" value="16"></td></tr>         
 <tr><td colspan="2" style="text-align:center">
 <input type="submit" value="Calculate!">
 </td></tr></table>
 </form>        

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:08:07.117

更改`<input type="submit" value="Calculate!">`为`<input name="submit" type="submit" value="Calculate!">`

您的代码不起作用的原因是您正在检查发布数据是否包含密钥`submit`，但您尚未在表单中定义它（您通过添加`name`属性来执行此操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:15:49.060

如果你只是改变这一行：

```
if(isset($_POST['submit'])) 
```

到：

```
if(isset($_POST['a'])) 
```

那应该看你的权利。

基本上，您正在寻找一个名为“提交”的值，但实际上并没有一个名为“提交”的字段。相反，您可以只检查您拥有的字段之一，“a”或“b”。

# python - 从字符串中提取随机字符，然后打印剩余部分。

> ID：13295064
> 
> 赞同：1
> 
> 时间：2012-11-08T18:06:42.300
> 
> 标签：python, list, random, python-3.x

作为我大学课程的一部分，我正在学习 python。我一直在尝试完成的一项任务是编写一个程序，该程序将打印出随机字母及其在“反建制主义”中的对应位置。然后它将在一行上打印剩余的字母。

我一直在尝试以一种疯狂怪异的迂回方式来做到这一点 - 用所选值填充列表并从原始值中删除这些字符。

我意识到我的程序可能都是错误的和损坏的；我今天才开始学习清单！

```
import random
word = "antidisestablishmentarianism"
wordList =["antidisestablishmentarianism"]

print("The Word is:",word,"\n")

lengthWord = len(word)
usedValues=[]
for i in range(5):
    position = random.randrange(0,lengthWord)
    print("word[",position, "]\t", word [position])
    usedValues=[position]
for ch in wordList:
    wordList.remove([usedValues])
print("The remaining letters are",WordList, sep='') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:51:07.910

I think part of the problem is that you're creating and manipulating your `worldList` and `usedValues` lists incorrectly.

To create a list of characters as `wordList` use `list(word)`. To add a used index to `usedValues` use `usedValues.append(position)`. There's also an issue with how you remove the used values from the word list.

Here's your code with those errors fixed:

```
import random
word = "antidisestablishmentarianism"
wordList = list(word)

print("The Word is:",word,"\n")

lengthWord = len(word)
usedValues=[]
for i in range(5):
    position = random.randrange(0,lengthWord)
    print("word[",position, "]\t", word[position])
    usedValues.append(position)

for index in usedValues:
    wordList.pop(index)

print("The remaining letters are",WordList, sep='') 
```

This will mostly work. However, there's still a logic error. If you get the same random position twice in the first loop, you'll report the same character each time. However, when you remove them from the list later, you'll end up popping two different letters. Similarly, if you remove an letter from near the start of the word, the indexes you remove later on will be incorrect. You can even get a `IndexError` if one of the last positions selected was near the end of the word.

One fix would be to remove the selected values from the list immediately, within the first loop. You'll need to explicitly call `len` each cycle then (since it changes each time through) but other than that everything should work correctly.

Or here's how I'd solve the problem. Instead of picking five specific indexes and removing them from the list, I'd `random.shuffle` a list of all the indexes and take the first five. The rest can then be either printed out in their random order, or sorted first to give the impression of the letters being removed from the original word.

```
import random
word = "antidisestablishmentarianism"

indexes = list(range(len(word)))
random.shuffle(indexes)

for i in indexes[:5]:
    print("word[%d] is '%s'" % (i, word[i]))

rest = sorted(indexes[5:]) # or just use indexes[5:] to keep random order
print("The remaining letters are '%s'" % "".join(word[i] for i in rest)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:15:39.660

There are a few problems with your code as it stands. Firstly, this line:

```
wordList =["antidisestablishmentarianism"] 
```

doesn't do what you think - it actually creates a list containing the single item `"antidisestablishmentarianism"`. To convert a string into a list of characters, you can use `list()` - and since you've already have the variable `word`, there's no need to type the word in again.

On a side note, `wordList` isn't a very good variable name. Apart from the fact that it uses camelCase rather than the more pythonic underscore_separated style, what you actually want here is a list of the *characters* in the word.

So, that line can be replaced with:

```
characters = list(word) 
```

Moving on ... this line:

```
lengthWord = len(word) 
```

is redundant - you only reference `lengthWord` once in your code, so you might as well just replace that reference with `len(word)` where you use it.

Your line:

```
 usedValues=[position] 
```

also isn't doing what you think: it's *replacing* `usedValues` entirely, with a list containing only the latest position in your loop. To append a value to a list, use `list.append()`:

```
 used_positions.append(position) 
```

(I've given the variable a more accurate name). Your next problem is this block:

```
for ch in wordList:
    wordList.remove([usedValues]) 
```

First of all, you really want to check each of the positions you've previously stored, not each of the characters in the word. Your use of `list.remove()` is also wrong: you can't give a list of values to remove like that, but anyway `list.remove()` will remove the first instance of a value from a list, and what you want to do is remove the item at a particular position, which is what `list.pop()` is for:

```
for position in sorted(used_positions, reverse=True):
    characters.pop(position) 
```

We're using a copy of `used_positions` sorted in reverse so that when we remove an item, the remaining positions in `used_positions` don't slide out of alignment with what's left of `characters`[*].

Your final problem is the last line:

```
print("The remaining letters are",WordList, sep='') 
```

If you want to print the contents of a list separated by `''`, this isn't the way to do it. Instead, you need `str.join()`:

```
print("The remaining letters are", "".join(characters)) 
```

Putting all of those changes into practice, and tidying up a little, we end up with:

```
import random
word = "antidisestablishmentarianism"
characters = list(word)

print("The Word is:", word, "\n")

used_positions = []

for i in range(5):
    position = random.randrange(0, len(word))
    print("word[",position, "]\t", word[position])
    used_positions.append(position)

for position in sorted(used_positions, reverse=True):
    characters.pop(position)

print("The remaining letters are", "".join(characters)) 
```

[*] In fact, this throws up another problem: what if your code chooses the same position twice? I'll leave you to think about that one.

# ruby - Heroku 上的主机文件

> ID：13295065
> 
> 赞同：1
> 
> 时间：2012-11-08T18:06:43.190
> 
> 标签：ruby, heroku, hosts, savon

我正在尝试使用 Ruby/Rack 应用程序和用于 SOAP 的 Savon gem 以及用于请求/响应的 HTTPI gem 连接到位于防火墙后面的 DMZ 中的 SOAP API。

SOAP API 定义了一个 wsdl 文件，该文件指向防火墙后面的内部域名（例如“http://randomhostname/path/to/wsdl”），当我在 /etc 中将 ip 定义为主机名时，它可以正常工作/hosts 文件在我的机器上本地（1.1.1.1 随机主机名）。

我遇到的问题是我的应用程序的生产环境在 Heroku 上运行。如何将我尝试连接的服务器的外部 ip 映射到 Heroku 或我的应用程序中的 wsdl 中定义的主机名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:56:07.807

不要使用 WSDL。直接调用函数。像这样：

```
＃！红宝石

需要'savon'

stock_handle = ARGV[0] || 'OTEX'

客户 = Savon::Client.new 做
  wsdl.endpoint = 'http://www.webservicex.net/stockquote.asmx'
  wsdl.namespace = 'http://www.webserviceX.NET/'
结尾

response = client.request :wsdl, 'GetQuote' 做
  http.headers["SOAPAction"] = '"http://www.webserviceX.NET/GetQuote"'
  soap.body = { "符号" => stock_handle }
结尾

打印响应

```

# gwt - 在 Firefox 16.0 上刷新开发模式时出现 IncompatibleRemoteServiceException（GWT 2.5 升级后）

> ID：13295066
> 
> 赞同：0
> 
> 时间：2012-11-08T18:06:51.973
> 
> 标签：gwt, intellij-idea, gwt-rpc, dev-mode, gwt-2.5

我们最近从 GWT 2.4 升级到了 2.5。一切似乎都在工作，直到我再次开始在开发模式下工作。

当我最初加载我的应用程序时，一切运行正常，但是当我尝试单击浏览器刷新按钮时，整个应用程序无法进行 RPC 调用。当我的应用程序在点击刷新按钮后尝试进行 GWT-RPC 调用时（无论是否进行了更改），我得到以下异常（或类似情况）

注意：这似乎只是 Firefox（版本 16）上的问题。不是铬。

```
java.lang.RuntimeException: com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: The response could not be deserialized
    at com.printlogix.rp.client.pages.sales.SalesPanel$22.onFailure(SalesPanel.java:260)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:237)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: The response could not be deserialized
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:221)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.google.gwt.user.client.rpc.SerializationException: java.lang.RuntimeException: Unable to find class com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:164)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Unable to find class com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer
    at com.google.gwt.user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:93)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:160)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: null
    at com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.findClass(CompilingClassLoader.java:368)
    at com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.loadClass(CompilingClassLoader.java:388)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at com.google.gwt.user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:91)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:160)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
ERROR: InvocationException occured
java.lang.RuntimeException: com.google.gwt.user.client.rpc.StatusCodeException: 0 
    at com.printlogix.rp.client.util.ClientSessionAndCodebaseDetector.onFailure(ClientSessionAndCodebaseDetector.java:71)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:237)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.google.gwt.user.client.rpc.StatusCodeException: 0 
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:209)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor74.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242)
    at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:722) 
```

更新：我开始认为这可能是 Intellij/GWT 配置的问题。Intellij 负责根据需要将类路径传递给开发模式。

更新：我已经确认如果我从命令行运行开发模式重新加载不是问题。只有当我运行 Intellij Idea 11 或 12 的 GWT 运行配置时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:50:44.487

是的，它是一个 IDE 刷新问题。当您更改代码时，IDE 会在项目上执行构建并将所需的更改推送到目标文件夹。不幸的是，并非每次都如此。有时它无法将更改推送到目标文件夹。一个例子是当你改变 DTO/Model 对象结构时。

解决方法很简单，删除项目中的目标文件夹，然后在项目上执行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:21:29.303

只是一个愚蠢的问题：您认为是 Intellij IDEA 问题。那么，您是否已经尝试过另一个 ide？只是为了确认这一点？

# php - PHP如何优雅地关闭本地套接字连接......？

> ID：13295067
> 
> 赞同：3
> 
> 时间：2012-11-08T18:06:58.240
> 
> 标签：php, linux, sockets, polling, unix-socket

我有一个 PHP 客户端通过纯文本 Unix 域套接字连接到本地 C 服务器程序。但是，我可以让它很好地关闭的唯一方法是如果我完成套接字会话：

```
stream_socket_shutdown($sock, 1); // shutdown socket writing
usleep(500 * 1000);           // wait for 0.5 seconds
fclose($sock);                // actually close the socket (finally) 
```

我想像我的 C 客户端一样优雅地关闭它：-

```
shutdown(connection_fd, SHUT_WR);     // tell server we've stopped sending queries
// Read from the socket until poll(connection_fd) yields POLLRDHUP / POLLHUP / POLLERR / POLLNVAL
shutdown(connection_fd, SHUT_RDWR);   // tell connection we've stopped listening
close(connection_fd);                 // close the whole connection (finally) 
```

但是，PHP 似乎没有直接的套接字 poll() 等效项。如何让 PHP 优雅地关闭我的本地套接字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:01:49.880

您是否尝试过**[stream_set_blocking()](http://php.net/manual/en/function.stream-set-blocking.php)**？如果您将流设置为非阻塞，您应该能够在关闭连接之前消耗所有待处理的数据：

```
socket_shutdown($sock, STREAM_SHUT_WR); 
stream_set_blocking($sock, 0);
while( fgets($sock) !== false ) { ; }
fclose($sock); 
```

**编辑：**使用常量，并修复了 set-blocking 命令以使用正确的值。

**解释：**通过将流设置为非阻塞，然后从中读取所有内容，我们消耗了输入缓冲区中已经存在的所有数据。通过向对等方发出我们的缓冲区已清除并且他可以向我们发送更多消息（如 FIN 数据包）的信号，这大大加快了关闭过程。

仍然有可能缓慢关闭，但可能性要小得多。

# video - 如何让屏幕录像机捕获基于 DirectShow 的视频？

> ID：13295068
> 
> 赞同：3
> 
> 时间：2012-11-08T18:07:10.787
> 
> 标签：video, directx, directshow, video-capture

我们软件的一项功能是使用 DirectShow 播放视频。一位用户和我们的内部 QA 发现屏幕捕获实用程序（包括 Captivate、Camstudio 和 AVS4U 的捕获实用程序）无法记录屏幕上播放的视频以及其他屏幕数据。带有视频的区域要么被捕获为黑色矩形，要么只显示第一帧。

**如何将 DirectShow 视频渲染到屏幕上，以便视频捕获实用程序可以捕获正在播放的视频**以及周围窗口上的所有其他屏幕（正常 GDI 绘制）数据？下面有很多关于这个问题的细节。

**笔记：**

*   我无法在我的开发计算机上重现该问题，这使得解决起来有点棘手。我在 OSX 上使用在 VMWare Fusion 3 中运行的 Windows 7，使用截图工具和通过 Print Screen 键捕获静止图像，并使用 CamStudio 和 AVS4U 捕获屏幕视频，一切正常。但是，一名客户和两名 QA 人员都可以在本机运行 Windows 7 时重现该问题。我的 VM 及其 PC 上的所有驱动程序等都是最新的。我没有受影响客户的确切硬件和驱动程序信息，但我可以为内部 QA 人员的计算机获取它。

*   我的工作理论是视频正在使用覆盖或其他基于视频硬件的机制完全绕过 GDI 进行渲染，因此捕获实用程序永远不会看到视频数据，并且由于某种原因，这不是使用的机制DirectShow 在我的机器上运行。我不确定如何检查。图形管理器不会发送`EC_VMR_RENDERDEVICE_SET`让我查看正在使用哪种机制（覆盖、视频内存或系统内存）的事件。

*   解决它的一个想法是侦听每帧发送的事件通知，然后用于[`IBasicVideo::GetCurrentImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389570%28v=vs.85%29.aspx)获取当前帧图像（和[position](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389571%28v=vs.85%29.aspx)）并使用 GDI 将其渲染到屏幕上。但是，似乎没有[每帧发送任何事件](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375625%28v=vs.85%29.aspx)。具体来说，我看到的唯一事件是：

    *   打开视频窗口并显示暂停的静止视频：`EC_VMR_RENDERDEVICE_SET`

    *   踩视频：`EC_PAUSED`和`EC_STEP_COMPLETE`

    *   播放视频：什么都没有 - 它播放时不会触发任何事件。

*   另一个想法是插入一个新的图形过滤器项，它捕获每一帧的帧，并使用 GDI 将其绘制到屏幕上。我不知道这是否是一个好方法，或者从哪里开始编写这样的项目。如果这是最好的解决方案，一个很好的答案将有一个简短的代码示例，展示如何编写一个来获取帧数据。（虽然我不知道这是否是最好的解决方案，虽然我想我只需要得到“一个”解决方案，而不是最好的。当然，如果可能的话，我更喜欢“正确的方式”，无论正确的方式是什么。 )

*   另一个想法是编写[替代视频渲染器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373423%28v=vs.85%29.aspx)，尽管 MSDN 在该页面上建议使用视频混合渲染器或增强型视频渲染器。VMR 似乎是基于 DirectX 的，所以如果我关于问题的理论是正确的，那么这样做可能无济于事，除非我使用 D3DX 之类的东西来获取表面数据作为图像（？），并且 EVR 仅适用于 Vista 及更高版本. 编写 AVR 似乎相当复杂，我不能 100% 确定它是否能帮助我实现我所需要的，我想在写之前做到这一点。

*   视频当前通过[IVideoWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377276%28v=vs.85%29.aspx)呈现，而不是`IVMRWindowlessControl`或`IVMRWindowlessControl9`。如果这些接口/实现之一有什么可以帮助它工作的话，我当然可以改变它。

*   代码是用原生 C++ 编写的，而不是 .Net，尽管任何语言的解决方案都很棒。支持的最低客户端是 Windows XP。

我将不胜感激有关该问题的任何建议，并且一个很好的答案将提供一个小代码示例（最好有一些已知的工作可以使用。）

*我还应该指出，抓取视频的屏幕截图是完全合法的。我们的软件是科学可视化和分析软件，我们的用户播放的视频是他们自己的录音。我们的软件可以显示此视频以及从其他来源记录的非视频数据。屏幕捕获工具用于录制演示、演示、有关研究的在线视频等 - 即捕获与屏幕上周围的内容结合播放的视频的正当理由。*

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:33:24.603

只是在渲染视频时避免使用叠加层。有几种方法：

*   使用自定义渲染器，尤其是。基于 GDI，可保证捕获能力 -旧 Windows SDK 和/或 DirectShow SDK 上的[`SampVid Filter`示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375468%28v=vs.85%29.aspx)
*   设置标志/设置以防止使用覆盖 - [`IVMRFilterConfig::SetRenderingPrefs`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377379%28v=vs.85%29.aspx),[`IDirectDrawVideo::SetSwitches`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd406828%28v=vs.85%29.aspx)
*   创建假图形或过滤器，以便在开始实际播放之前锁定所有可用的覆盖，以便您感兴趣的视频通过标准视频渲染器组件内的非覆盖代码路径显示 - 假实例直到[`IDirectDrawVideo::GetSurfaceType`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd406824%28v=vs.85%29.aspx)返回它必须下降的非覆盖类型回到

# php - php表单上传不为上传的文件分配任何权限

> ID：13295070
> 
> 赞同：1
> 
> 时间：2012-11-08T18:07:18.430
> 
> 标签：php, file-upload, joomla1.5, file-permissions, permission-denied

大家好，我在 joomla 1.5 中自定义了一个房地产组件，该组件的部分功能是站点管理员可以上传一个 pdf 文件以与单个房地产项目的描述并列，其方式与上传脚本的脚本完全相同该项目的图片作品。事情是虽然表单上传了脚本，但浏览该网站的人实际上看不到它。他们单击链接并收到 403 禁止错误。Web 服务器可以看到该文件，但没有人有权查看它。我检查了包含 pdf 的文件夹的权限，它们很好 (755)。我检查了上传的 pdf 的权限，有时它们在 Dreamweaver 中显示为根本没有权限，有时它们显示为 644 或 600。我确实想过尝试在某个地方合并 chmod 命令，但我正在使用 joomla 并且很多代码都是 joomla 特定的，这使得很难清楚地看到发生了什么。你们能帮我看看我哪里出错了。代码如下：

非常感谢

```
 <?php
/*------------------------------------------------------------------------
# com_properties
# ------------------------------------------------------------------------
# author Fabio Esteban Uzeltinger
# copyright Copyright (C) 2011 com-property.com. All Rights Reserved.
# @license - http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
# Websites:  www.com-property.com
# Technical Support: www.com-property.com/forum-v4
*/
// no direct access
defined('_JEXEC') or die('Restricted access'); 
$TableName = 'pdfs';
$component_name = 'properties';
JHTML::_('behavior.tooltip');
?>

<script language="javascript" type="text/javascript">
<!--
function submitbutton(pressbutton) {
    var form = document.adminForm;
    /*var type = form.type.value;*/

    if (pressbutton == 'cancel') {
        submitform( pressbutton );
        return;
    }
    if ( document.getElementById('name').value == "") {
        alert( "Item must have a Title" );
    }
                else if( document.getElementById('parent').value == 0 ){
        alert( "Please select a Product" );
    }           
 else {
        submitform( pressbutton );
    }
}
//-->

function jSelectProperty(id, title, object) {
            document.getElementById(object + '_id').value = id;
            document.getElementById(object + '_name').value = title;            
            document.getElementById('parent').value = id;           
            document.getElementById('sbox-window').close();
        }

</script>

<?php
require_once( JPATH_COMPONENT.DS.'helpers'.DS.'menu_left.php' );
?>
<table class="admintable" width="100%">
    <tr>
        <td align="left" width="200px" valign="top">
<?php echo MenuLeft::ShowMenuLeft();?>

        </td>
        <td align="left" valign="top" class="td_form">

<form action="index.php" method="post" name="adminForm" id="adminForm"  enctype="multipart/form-data">
<div class="col100">
    <fieldset class="adminform2">
        <legend><?php echo JText::_( 'Add Pdf' ); ?></legend>
            <table>
                <tr>        
                    <td width="50%" >
                        <table>

                        <tr>
    <td class="paramlist_key" width="40%">
        <span class="editlinktip">
            <label id="urlparamsid-lbl" for="urlparamsid" class="hasTip">
                <?php echo JText::_( 'Parent Product' ); ?>
            </label>
        </span>
    </td>

    <td class="paramlist_value">

<?php
require_once( JPATH_COMPONENT.DS.'elements'.DS.'property.php' );
$node=null;
$control_name='';
echo JElementProperty::fetchElement('parent', $this->datos->parent, &$node, $control_name);
?>
<input type="hidden" name="parent" id="parent" value="<?php echo $this->datos->parent;?>" />
    </td>
</tr>

                            <tr>
                                <td width="100" align="right" class="key">
                                <label for="name">
                                <?php echo JText::_( 'Nombre' ); ?>:
                                </label>
                                </td>
                                <td>
                                <input class="text_area" type="text" name="name" id="name" style="width:270px;" size="60" maxlength="250" value="<?php echo $this->datos->name;?>" />
                                </td>
                            </tr>

                            <tr>            
                                <td class="key">
                                <label for="name">
                                <?php echo JText::_( 'Published' ); ?>:
                                </label>
                                </td>
                                <td>
<?php $chequeado0 = $this->datos->published ? JText::_( '' ) : JText::_( 'checked="checked"' );?>
<?php $chequeado1 = $this->datos->published ? JText::_( 'checked="checked"' ) : JText::_( '' );?>

<?php if($this->datos->published==''){
$chequeado1=JText::_( 'checked="checked"' );$chequeado0=JText::_( '' );}?>   

    <input name="published" id="published1" value="1" <?php echo $chequeado1;?> type="radio">
    <label for="published1"><?php echo JText::_( 'Yes' ); ?></label>  
    <input name="published" id="published0" value="0" <?php echo $chequeado0;?> type="radio">
    <label for="published0"><?php echo JText::_( 'No' ); ?></label> 
                            </td>
                            </tr>       
                            <tr>
                                <td class="key">
                                <label for="name">
                                <?php echo JText::_( 'Ordering' ); ?>:
                                </label>
                                </td>
                                <td>
                                <input class="text_area" type="text" name="ordering" id="ordring"  style="width:72px;" size="20" maxlength="255" value="<?php echo $this->datos->ordering; ?>" />
                                </td>
                            </tr>                                          

                            <tr>
                                <td class="key">                
                                <?php echo JText::_( 'Archivo' ); ?>                        
                                </td>

                                <td>
                                <?php 
                                if($this->datos->archivo){ ?>
                            <a href="<?php echo JURI::root().'images/properties/pdfs/'.$this->datos->parent.'/'.$this->datos->archivo; ?>" target="_blank">
                            <?php echo $this->datos->archivo; 

                                }?>
                            </a>
                                </td>
                            </tr>                
                            <tr>
                                <td align="center">
                                <input type="file" size="20" name="archivo" value=""/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>    
            </table>
            <table class="admintable" width="100%">
                <tr>
                    <td>
                    <?php $editor = &JFactory::getEditor();     
                    echo $editor->display('text', $this->datos->text, '100%', '400', '60', '20');
                    ?>
                    </td>
                </tr>
            </table>
    </fieldset>
</div>

<div class="clr"></div>
<input type="hidden" name="option" value="<?php echo $option; ?>" />
<input type="hidden" name="table" value="<?php echo $TableName; ?>" />
<input type="hidden" name="id" value="<?php echo $this->datos->id; ?>" />
<input type="hidden" name="task" value="" />
<input type="hidden" name="view" value="<?php echo $TableName; ?>" />
<input type="hidden" name="controller" value="<?php echo $TableName; ?>" />
</form>
    </td>
        </tr>
            </table> 
```

表单处理脚本

```
<?php
/*------------------------------------------------------------------------
# com_properties
# ------------------------------------------------------------------------
# author Fabio Esteban Uzeltinger
# copyright Copyright (C) 2011 com-property.com. All Rights Reserved.
# @license - http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL
# Websites:  www.com-property.com
# Technical Support: www.com-property.com/forum-v4
*/
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

class PropertiesControllerPdfs extends PropertiesController
{
    function __construct()
    {
        parent::__construct();

        $this->registerTask( 'add'  ,   'edit' );
        $this->registerTask( 'apply',   'save' );
        $this->registerTask('save2new',     'save');
        $this->registerTask( 'unpublish',   'publish'); 
    }

    function display()
    {
        parent::display();
    }   

    function edit()
    {
        JRequest::setVar( 'view', 'pdfs' );
        JRequest::setVar( 'layout', 'form' );       
        parent::display();
    }

    function save()
    {
    jimport('joomla.filesystem.folder');
    jimport('joomla.filesystem.file');
    $this->TableName='pdfs';
    global $mainframe;
    $component_name = 'properties';
    $option = JRequest::getVar('option');
    $model = $this->getModel('pdfs');
    $post = JRequest::get( 'post' );
    $db     =& JFactory::getDBO();
    require_once(JPATH_SITE.DS.'configuration.php');
    $datos = new JConfig(); 
    $basedatos = $datos->db;
    $dbprefix = $datos->dbprefix;
    $query = "SHOW TABLE STATUS FROM `".$basedatos."` LIKE '".$dbprefix.$component_name."_".$this->TableName."';";
        $db->setQuery( $query );        
        $nextAutoIndex = $db->loadObject();

    if(JRequest::getVar('id')){ $id_archivo = JRequest::getVar('id');
    }else{$id_archivo = $nextAutoIndex->Auto_increment;}

    if($_FILES['archivo']['name']) {    

    // Set FTP credentials, if given
        jimport('joomla.client.helper');
        JClientHelper::setCredentialsFromRequest('ftp');

    $path = JPATH_SITE.DS.'images'.DS.'properties'.DS.'pdfs'.DS.$post['parent'].DS;

    if(!JFolder::exists($path))
        {
        JFolder::create($path,0755);
        }

        $ext =  JFile::getExt($_FILES['archivo']['name']);
        $filename = $post['name'].'.'.$ext;
        $move_to=$path.$filename;

if(JFolder::move($_FILES['archivo']['tmp_name'], $move_to)) 
    {       
    chmod ($filename,0755);
    $post['archivo'] = $filename;
    }
    }

    $text = JRequest::getVar( 'text', '', 'post', 'string', JREQUEST_ALLOWRAW );        
    $post['text'] = $text;

    $datenow =& JFactory::getDate();
    $post['date'] = $datenow->toFormat("%Y-%m-%d-%H-%M-%S");

    if ($model->store($post)) { 
    $msg =  JText::_( 'Saved').' ( '.$post['name'].' ) ';

    switch (JRequest::getCmd( 'task' ))
        {
            case 'apply':
    $this->setRedirect( 'index.php?option=com_properties&view=pdfs&layout=form&task=edit&cid[]='.$id_archivo);
                break;
            case 'save':
    $this->setRedirect( 'index.php?option=com_properties&view=pdfs');
                break;              
            case 'save2new':
    $this->setRedirect(JRoute::_('index.php?option=com_properties&view=pdfs&layout=form&task=edit', false));
    $msg.=JText::_('You can add new Product.');
                break;                  
        }       

        } else {
            $msg = JText::_( 'Error Saving Greeting' );
            $msg .=  'err'.$this->Err;
        }   
        $this->setMessage( JText::_( $msg ) );  
    }

    function remove()
    {
    //echo 'remove';
    $model = $this->getModel('pdfs');
        if(!$model->delete()) {
            $msg = JText::_( 'Error: One or More Greetings Could not be Deleted' );
        } else {
            $msg = JText::_( 'Deleted' ) ;
        }
    $this->setRedirect( 'index.php?option=com_properties&view=pdfs',$msg);  
    }

    function cancel()
    {
    $this->TableName = JRequest::getCmd('table');
        $msg = JText::_( 'Operation Cancelled' );
        //$this->setRedirect( 'index.php?option=com_properties&table='.$this->TableName, $msg );
        parent::display();
    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:14:55.677

`PropertiesControllerPdfs`更改您尝试更改文件权限的行（在 class 中）：

```
chmod ($filename,0755); 
```

包括完整路径以及文件名，即：

```
chmod ($path.$filename,0755); 
```

# jquery - html中的数据类型

> ID：13295071
> 
> 赞同：0
> 
> 时间：2012-11-08T18:07:23.313
> 
> 标签：jquery, html, jquery-ui, css, jquery-plugins

你能告诉我什么`data-carouselType`意思吗？

```
<div class="Carousel" data-carselType="magazine"> 
```

他们使用过（在 jQuery 代码中）：

```
if ($this.attr("data-carselType") === "magazine") {
                $(prevBtn).addClass("opaque");
                $(nextBtn).addClass("opaque");
                this.appendChild(prevBtn);
                this.appendChild(nextBtn);
                pagerWidth = $(prevBtn).width();
                childLength = $kids.children().length;
                $kids.css("left", pagerWidth + "px").children("div").addClass("grouping");
                childWidth = $kids.children("div").width();
                leftMagTitle = document.createElement("div");
                rightMagTitle = document.createElement("div");
                prevBtn.appendChild(leftMagTitle);
                nextBtn.appendChild(rightMagTitle);
                $kids.width(childLength * childWidth);
                $kids.children(":first-child").addClass("active");
                $kids.css("left", (pagerWidth - $this.find(".caroContainer").children("div").width()) + "px");

                forPrependingOne = $kids.children(":eq(" + (childLength - 1) + ")").clone();
                $kids.children(":eq(" + (childLength - 1) + ")").remove();
                $kids.prepend(forPrependingOne);

                $kids.click(function (e) {
                    link = $(e.target).parents(this).children("a").attr("href");
                    if ($(e.target).parents(this) && e.target.tagName !== "IMG" && e.target.tagName !== "INPUT" && e.target.tagName !== "A" && link !== undefined) {
                        e.preventDefault();
                        document.location = link;
                    }
                });

                lazyLoad(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:14:47.110

看起来像一个自定义属性。Inventor 希望以某种方式使用此属性注释某些 HTML 元素，以便可以引用它们（例如，通过您提供的代码）

# java - 检测并缩短字符串中的所有 url

> ID：13295076
> 
> 赞同：1
> 
> 时间：2012-11-08T18:07:42.920
> 
> 标签：java, regex, string, url

假设我有一条字符串消息：

“您应该将 file.zip 上传到[http://google.com/extremelylonglink.zip](http://google.com/extremelylonglink.zip)，而不是[https://stackoverflow.com/extremelylonglink.zip](https://stackoverflow.com/extremelylonglink.zip)。再试一次。”

我想要一个函数返回字符串新消息：

“您应该将 file.zip 上传到 [第一个链接的缩短版]，而不是 [第二个链接的缩短版]。再试一次。”

我已经有了 URL 缩短器的代码，这是我的 URL 检测代码，它替换了消息中的第一个 URL：

```
 if(message.contains("http://") || message.contains("https://")) {
            String regex = "(?i)\\b((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))";
            Matcher m = Pattern.compile(regex).matcher(message);
            if (m.find()) {
                String url = m.group();
                    String shorted = null;      
                        try {       
                             shorted = Shortener.GetShortedISGD(url);                                                                           
                        } catch (IOException e1) {
                            // TODO Auto-generated catch block
                        }
                    }
                    String intercepted = message.replace(url, shorted);
                    e.setMessage(intercepted);
        } 
```

我将如何更换所有这些？（我使用 Bukkit API 来做很多事情，所以很多函数都不是 Java 语言）。

我正在考虑将消息拆分成一个单词数组，然后评估每个单词是否都是一个 URL，除非这有点没有优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:15:51.887

使用`appendReplacement`和`appendTail`。请参阅Java 教程中的示例和[另一个](http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html)[更](http://www.coderanch.com/t/375438/java/java/appendReplacement-appendTail)接近您尝试做的示例。

# ios - Cocoa - 在 NSDictionary 中引用一个 KEY

> ID：13295079
> 
> 赞同：0
> 
> 时间：2012-11-08T18:07:57.697
> 
> 标签：ios, json, cocoa, key, nsdictionary

我想引用一个 ket 而不是它在 NSDictionary 中包含的内容，如下所示：

```
key {
    14819 =     {
        contactDetails =         {
            dictionary =             {
                interests =                 {
                    Movies =   
      ... 
```

我想做这样的事情：

```
if([key isEqualToString:@"14819"]){
 do something
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:13:01.067

您可以使用 nsdictionary 中的 allkeys 方法来获取键数组，而不是对其进行迭代进行比较！像这样：

```
NSArray*keys=[dict allKeys];
for(NSString *key in keys) {
    if ([key compare@"14819"] == NSOrderedSame) {
        do something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:17:26.827

应该可以使用 allKeys 查找它。写了一个简单的例子，希望对你有帮助。

```
NSMutableDictionary *testDictionary = [[NSMutableDictionary alloc]init];
[testDictionary setObject:@"value" forKey:@"testObject"];

BOOL containsKey = [[testDictionary allKeys] containsObject:@"testObject"];

NSLog(@"testing %d" ,containsKey); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T20:31:39.937

如果您只想测试字典中是否存在键，请使用`objectForKey:`并测试对象是否不存在`nil`。

获取`allKeys`和搜索密钥会起作用，但几乎可以肯定会更慢。字典是哈希表；`objectForKey:`使用这个事实，而`allKeys`没有。

# python - 使用 Python 解析多行数据文件

> ID：13295083
> 
> 赞同：8
> 
> 时间：2012-11-08T18:08:08.550
> 
> 标签：python

用 Python 解析以下多行数据文件的最佳方法是什么？

```
Police Response: 11/6/2012 1:34:06 AM   Incident Desc: Traffic Stop OFC:    Received: 11/6/2012 1:34:06 AM
Disp: PCHK  Location: CLEAR LAKE RD&GREEN HILL RD
Event Number: LLS121106060941   ID: 60941   Priority: 6 Case No:
Police Response:    Incident Desc: Theft    OFC:    Received: 11/6/2012 1:43:35 AM
Disp: CSR   Location: SCH BLACHLY
Event Number: LLS121106060943   ID: 60943   Priority: 4 Case No:
Police Response: 11/6/2012 1:47:47 AM   Incident Desc: Suspicious Vehicle(s)    OFC:        Received: 11/6/2012 1:47:47 AM
Disp: FI    Location: KIRK RD&CLEAR LAKE RD
Event Number: LLS121106060944   ID: 60944   Priority: 6 Case No: 
```

记录总是分成 3 行——以“Police Response”开头并以“Event Number”结尾的行。有些字段通常是空白的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T18:43:06.040

这应该可以解决问题。我将您拥有的数据拆分为一个案例列表，每个案例都包含您的数据行。然后我使用正则表达式 spiting 按字段名称进行拆分。之后，我将键值对列表放入字典中，这样您就可以轻松地遍历案例并使用字典访问任何字段值。我打印出行的内容只是为了显示数据结构。

**代码**

```
from pprint import pprint
from collections import OrderedDict
import re

data = """Police Response: 11/6/2012 1:34:06 AM   Incident Desc: Traffic Stop OFC:    Received: 11/6/2012 1:34:06 AM
Disp: PCHK  Location: CLEAR LAKE RD&GREEN HILL RD
Event Number: LLS121106060941   ID: 60941   Priority: 6 Case No:
Police Response:    Incident Desc: Theft    OFC:    Received: 11/6/2012 1:43:35 AM
Disp: CSR   Location: SCH BLACHLY
Event Number: LLS121106060943   ID: 60943   Priority: 4 Case No:
Police Response: 11/6/2012 1:47:47 AM   Incident Desc: Suspicious Vehicle(s)    OFC:        Received: 11/6/2012 1:47:47 AM
Disp: FI    Location: KIRK RD&CLEAR LAKE RD
Event Number: LLS121106060944   ID: 60944   Priority: 6 Case No: """

lines = data.splitlines()
cases = ['\n'.join(lines[i:i+3]) for i in range(0, len(lines), 3)]
pattern = '(Police Response|Incident Desc|OFC|Received|Disp|Location|Event Number|ID|Priority|Case No):'
rows = []
for case in cases:
    pairs =  re.split(pattern, case)[1:]
    rows.append(OrderedDict((pairs[i*2], pairs[i*2+1]) for i in range(10)))

for i, row in enumerate(rows):
    print '============== {} =============='.format(i)
    pprint(row.items()) 
```

**输出：**

```
============== 0 ==============
[('Police Response', ' 11/6/2012 1:34:06 AM   '),
 ('Incident Desc', ' Traffic Stop '),
 ('OFC', '    '),
 ('Received', ' 11/6/2012 1:34:06 AM\n'),
 ('Disp', ' PCHK  '),
 ('Location', ' CLEAR LAKE RD&GREEN HILL RD\n'),
 ('Event Number', ' LLS121106060941   '),
 ('ID', ' 60941   '),
 ('Priority', ' 6 '),
 ('Case No', '')]
============== 1 ==============
[('Police Response', '    '),
 ('Incident Desc', ' Theft    '),
 ('OFC', '    '),
 ('Received', ' 11/6/2012 1:43:35 AM\n'),
 ('Disp', ' CSR   '),
 ('Location', ' SCH BLACHLY\n'),
 ('Event Number', ' LLS121106060943   '),
 ('ID', ' 60943   '),
 ('Priority', ' 4 '),
 ('Case No', '')]
============== 2 ==============
[('Police Response', ' 11/6/2012 1:47:47 AM   '),
 ('Incident Desc', ' Suspicious Vehicle(s)    '),
 ('OFC', '        '),
 ('Received', ' 11/6/2012 1:47:47 AM\n'),
 ('Disp', ' FI    '),
 ('Location', ' KIRK RD&CLEAR LAKE RD\n'),
 ('Event Number', ' LLS121106060944   '),
 ('ID', ' 60944   '),
 ('Priority', ' 6 '),
 ('Case No', ' ')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T18:28:07.250

最大的问题：

什么是用来分隔条目的？如果条目之间有制表符，这很容易，只需按制表符分割每一行。如果总是至少有两个空格，你可以按那个来分割。如果有时只有一个空格，那会使事情复杂化。

否则，很容易使生成器/函数一次吐出三行，然后您可以将其放入解析三行的函数中。问题的“一次 3 行”部分是*简单*的部分。

```
def return_3(file):
    return [file.next() for i in range(3)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:07:07.077

这个正则表达式应该工作：

```
data = open('file.dat').read()

re.findall("""Police Response:(.*)Incident Desc:(.*)OFC:(.*)Received:(.*)
Disp:(.*)Location:(.*)
Event Number:(.*)Priority:(.*)Case No:(.*)""", data) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:06:52.193

假设输入数据格式是一致的，我可能会采用以下方法：

```
# List of fields. Corresponds to colums and rows in input data.
fields = (
  ("Police Response", "Incident Desc", "OFC", "Received"),
  ("Disp", "Location"),                                    
  ("Event Number", "ID", "Priority", "Case No")
)

# generate pattern based on fields
patterns = [re.compile(":(.*)".join(f) + ":(.*)") for f in fields] 
```

在这里，我们根据字段列表生成搜索模式。这使得查看和更新​​预期的数据格式变得容易。

使用生成的模式，我们可以将相应的字符串列表解析为以字段名称为键的字典。

```
def parse_record(lines):
  out = {}
  for f, p, s in zip(fields, patterns, lines):
     out.update(zip(f, [s.strip() for s in p.match(s).groups()]))
  return out 
```

为简洁起见，我省略了错误检查，但如果输入数据不符合预期，添加一些检查将允许我们打印更友好的错误消息。特别是，断言并捕获返回`len(lines) == len(fields)`时引发的异常。`p.match(s)``None`

最后一部分是按每条记录的数量或行对输入数据进行分组。这可以很容易地使用[`grouper()`配方](http://docs.python.org/2/library/itertools.html#recipes)完成。

这是一个例子：

```
for lines in grouper(len(fields), open("input_data.txt"):
  record = parse_record(lines)
  print record["ID"], record["Incident Desc"]  # do something with the dict 
```

# actionscript-2 - call a swiffy object function with javascript?

> ID：13295087
> 
> 赞同：1
> 
> 时间：2012-11-08T18:08:25.087
> 
> 标签：actionscript-2, google-swiffy

I'm pretty new to javascript... I have a swiffy object on my page and I need to load a given number of functions inside of it that I created in AS2.

```
setTimeout(function() { triggerP() },2000);
function triggerP()
{
    *what do I put here?*   
} 
```

I wanted to call this function two seconds after the trigger has been fired, just not sure how to do it.

# c++ - Why constexpr works for impure functions

> ID：13295089
> 
> 赞同：12
> 
> 时间：2012-11-08T18:08:29.877
> 
> 标签：c++, c++11, constexpr

while browsing one of my old questions on constexpr I stumbled onto a very(IMHO) important comment. Basically it boils down to : (this is legal C++11 :( )

```
 constexpr double f(bool b)
 {
 return b? 42:42/(rand()+1); // how pure is rand ;)
 } 
```

My question is what is the reason this is allowed by the standard. Since Im a big fan of referential transparency I hope they have a good reason :) and I would like to know it.

BTW there is related Q but most of the A even dont mention pure thing, or when they do they dont specify the reasoning why std allows this. [Relation between constexpr and pure functions](https://stackoverflow.com/questions/5462388/relation-betwean-constexpr-and-pure-functions)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T04:03:13.593

在标准中，相关要求隐藏在功能要求的主要列表之下`constexpr`。它在第 7.1.5/5 节中：

> 对于 constexpr 函数，如果不存在函数参数值使得函数调用替换会产生常量表达式 (5.19)，则程序是非良构的；无需诊断。

§5.19 定义了常量表达式的要求，这样你就不能调用`rand()`.

宽松的限制允许您拥有条件纯函数。您的示例`f(true)`是有效的模板参数，但`f(false)`不是。

当然，缺点是编译器不会验证`constexpr`函数是否可以实际用于其预期目的。您需要编写测试用例。

啊，litb的回答也是正确的。（但这个措辞更简单。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T18:18:08.960

函数定义中的关键字`constexpr`告诉编译器，如果所有参数和变量在编译时本身是已知的，则该函数*可以在编译时执行。*但是，没有这样的保证，例如，当某些值*只能*在运行时知道时，在这种情况下，函数将在运行时执行。

*但是，它与pure*或*impure*无关，因为这些术语意味着输出仅取决于输入，并且无论您使用相同的输入参数值调用函数多少次，每次输出都将相同，不管它是在编译时还是运行时计算的。

例子，

```
constexpr int add(int a, int b) { return a + b; } //pure!

const int a = 2, b = 3; //const
int c = 2, d = 3;       //non-const

//we may read update c and d here!

const int v1 = add(2,3);  //computed at compile-time
const int v2 = add(a,3);  //computed at compile-time
const int v3 = add(2,b);  //computed at compile-time
const int v4 = add(a,b);  //computed at compile-time

const int v3 = add(c,3);  //computed at runtime
const int v3 = add(c,b);  //computed at runtime
const int v3 = add(a,d);  //computed at runtime
const int v3 = add(c,d);  //computed at runtime 
```

请注意，这里`add`是一个纯函数，无论它是在编译时还是运行时计算的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-08T19:42:21.187

因为对于输入参数的某些域，永远不会采用不纯的路径。对于该域， constexpr 可以正常工作。

例如，您的函数可能有一个简单的分支和一个更复杂的分支。并且您可以指定要使您的函数在常量表达式中可用，函数参数必须满足这个和那个条件，从而产生函数中始终为纯的简单分支。

这样做的一个有用的副作用是，您可能会在持续计算期间导致错误。即，如果违反了简单分支中的先决条件，您可能会导致对不纯表达式的评估，从而引发编译时错误（断言或异常在这里是一个好主意，因为在调用函数时它会继续抱怨运行时上下文）。

# ruby-on-rails - Ruby on Rails：如何定义扩展并将其放入数据库？

> ID：13295090
> 
> 赞同：0
> 
> 时间：2012-11-08T18:08:29.207
> 
> 标签：ruby-on-rails

我想修改以下代码，以便能够仅将文件扩展名写入数据库。现在我阅读了file_content_type，但我只需要知道扩展名（扩展名可以更改对我来说并不重要）并将其放入数据库中。upload_file_name 已经有一个扩展名，但我需要提取它并将其作为新行放在同一个数据库表中。

```
ActiveRecord::Schema.define(:version => 20120731045929) do

  create_table "uploads", :force => true do |t|
    t.string   "upload_file_name"
    t.string   "upload_content_type"
    t.string   "user"
    t.integer  "upload_file_size"
    t.datetime "upload_updated_at"
    t.datetime "created_at",          :null => false
    t.datetime "updated_at",          :null => false
  end 
```

结尾

并且有可能以某种方式保存没有扩展名的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:52:54.997

好像是从`schema.rb`.

不要直接接触那个。

如果你往下看，`/db/migrations`你会看到文件名看起来很乱的 ruby​​ 文件。这些是允许您配置数据库表的 ruby​​ 文件。

*   首先在数据库中添加一列。

在终端中，运行`rails generate migration add_file_content_type_to_uploads file_content_type:string`

*   在 Upload.rb 模型文件中，添加`file_content_type`到 attr_accessible

`attr_accessible :file_content_type`

*   要查找扩展名，您可以使用`File.extname`.

所以也许在你`create`的上传控制器方法中

```
def create
  ...
  @upload.file_content_type = File.extname(params[:upload_file_name])
  ...
end 
```

# php - entering data into a mysql database using php in wordpress

> ID：13295092
> 
> 赞同：-1
> 
> 时间：2012-11-08T18:08:32.823
> 
> 标签：php, mysql, wordpress

I'm currently trying to enter data from a form in a wordpress web page into a mysql database.

here is the code from the html page on wordpress

```
<form action="<?php echo $_SERVER[PHP_SELF] ?>" method="post">
Firstname: <input type="text" name="firstname" />
Lastname: <input type="text" name="lastname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>

<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
 die('Could not connect: ' . mysql_error());
}

mysql_select_db("test", $con);

$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
 }
echo "1 record added";

mysql_close($con);
?> 
```

i have installed the phpexec plugin and that seems to be runing fine.

when i enter data in the form and i submit it doesnt appear in the database.

My primary key seems to auto increment telling me something happened but no data appears.

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:26:14.273

根据上面的评论，我会得到一本好书，并确保您正在学习如何正确安全地使用 MySQL 和 PHP。请参阅[学习 PHP 和 MySQL - O'Reilly 媒体](http://shop.oreilly.com/product/9780596101107.do)

# c - Not accessing pointers to struct as parameter in another function

> ID：13295094
> 
> 赞同：-2
> 
> 时间：2012-11-08T18:08:38.973
> 
> 标签：c, pointers

I have this example file

### example.c

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

typedef struct {
    char *name;
} player;

void
playercreation(player *p, int nr)
{
    p=malloc(sizeof(player));
    char stringtemp[10];
    printf("Create player %d:\nWrite your name (max 10 letters): ", nr);
    scanf("%s", stringtemp);
    p->name=malloc(sizeof(*(p->name))*11);
    strcpy(p->name, stringtemp);
    p->drawnlines=0;
    p->squares=0;
}

void
playercreationMenu(player *p1, player *p2)
{
    playercreation(p1, 1);
    playercreation(p2, 1);
}

void
confirmPlayer(player *p)
{
    printf("player %s created\n", p->name);
}

int
main(void)
{
    player p1, p2;
    playercreationMenu(&p1, &p2);
    confirmPlayer(&p1);
    confirmPlayer(&p2);
} 
```

In my real program this gives me a segmentation fault as im trying to access something in the player structure that does not exist as the player never is created, but in this example its shown by the fact that the players name is (null) although the name was given in the playercreationMenu function. Why is this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:11:45.080

`count`未初始化。垃圾进垃圾出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:13:21.160

你写

```
player p1, p2;
playercreationMenu(&p1, &p2); 
```

但是在构造函数中，你有

```
void playercreation(player *p, int nr)
{
    p = malloc(sizeof(player));

    ...
} 
```

因此，您正在`malloc()`为包含已分配（在堆栈上！）结构的地址的局部变量分配一个 ated 内存块......放下调用`malloc()`，你会没事的。

您还在`count`初始化变量或为其赋值之前使用该变量：

```
int count;
...
p->name = malloc(sizeof(char) * (count + 1)); 
```

因此，第一，这是未定义的行为，第二，您将获得相当随机的内存量（这使得写入超出其界限 -> 另一个未定义的行为成为可能），或者如果这会导致分配过多的内存，则为 NULL 指针（第三个未定义的行为）。

一行中的三个 UB -**确实希望它崩溃。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:15:52.617

您的代码在这两行中存在问题：

```
p=malloc(sizeof(player));
int count; 
```

malloc 不是必需的，因为当您在 main() 中声明它们时，您已经在堆栈上为播放器结构分配空间。

您没有初始化计数，这意味着它具有垃圾值。当您使用 count 调用 malloc 时，您可能会请求任意大量的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:21:56.790

一方面，`count`正如其他一些人所指出的那样，您永远不会初始化。这意味着它是一个任意值，因此您不知道要传递给`malloc`.

您也可能不应该使用`scanf`，因为如果有人键入超过 10 个字符，您将溢出缓冲区。我会推荐`fgets`。

此外，您首先在堆栈中声明您的玩家，并将指向他们的指针传递到`playercreationMenu`. 那也行。然后你将它们传递给`playercreation`，这也很好。在`playercreation`中，您然后用从 中返回的指针覆盖*指向*播放器的指针`malloc`。`player`因此，您实际上永远不会对您在堆栈中分配的原始 s 执行任何操作`main`。

正如 Basile 所建议的那样，编译`-Wall`以获得更多编译器警告并密切关注它们是一个好主意。其实，我更喜欢`-Wall -Wextra -Werror`; `-Wall`实际上并没有给你所有的警告，所以`-Wextra`打开一些更有用的警告，`-Werror`把警告变成错误，这样你就不能忽略它们。

# jquery - Error on refresh using multiselect.js

> ID：13295098
> 
> 赞同：0
> 
> 时间：2012-11-08T18:08:55.273
> 
> 标签：jquery, refresh, multi-select

I'm using the excellent multiselect jQuery plugin available at [http://loudev.com/](http://loudev.com/)

I have it working except that when I try to use the refresh method as in:

```
$('#FPCountry').multiSelect('refresh'); 
```

I get an error:

> Object doesn't support this property or method

I've initialized the multiselect box on the page load. Can anyone provide pointers as to why the refresh is failing? Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:41:38.850

你首先需要`$('#FPCountry').multiSelect();`

# csv - Magento CSV Import Errors Type Not Defined

> ID：13295100
> 
> 赞同：0
> 
> 时间：2012-11-08T18:09:17.627
> 
> 标签：csv, magento

I am trying to import products to Magento via a csv and i keep getting this error. ![enter image description here](../Images/bc64ccf1324727d92736f0d84edf8f2b.png)

Here is my setup in excel ![enter image description here](../Images/9f4ff6f412c1fc3e05c660b007b3ba22.png)

And lastly here is my mapping ![enter image description here](../Images/81d133219a39b02c35d7f42d200c32e5.png)

Any suggestions i cant seem to find an answer anywhere!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:08:55.010

并确保您的 CSV 文件以 UTF-8 编码保存。

# javascript - 如何使用 jquery 选择器找到某个类的表

> ID：13295101
> 
> 赞同：6
> 
> 时间：2012-11-08T18:09:19.327
> 
> 标签：javascript, jquery

如何使用 jquery 选择器仅选择具有 d 类的表。由于某种原因，此代码将无法正常工作...

```
var dTableTags = $(".d table"); 
```

示例表将是...

```
<table id="thetable" class="d">
  <thead>
    <tr><th>Column 1 header</th><th>Column 2 header</th></tr>
  </thead>
  <tbody>
    <tr><td>Column 1 data</td><td>Column 2 data</td></tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T18:10:23.913

您的选择器错误；试试吧`$("table.d")`。

[jQuery 文档](http://api.jquery.com/class-selector/)没有直接解释这一点，它遵循更全面的W3C CSS[选择器文档。](http://www.w3.org/TR/CSS2/selector.html#class-html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T18:12:53.447

您正在尝试搜索**d 类**内部的**表**， 这是错误的..

 **将您的选择器更改为此

```
$("table.d");   // Because the table has the class d 
```**

# html - Firefox 100% height div - scrollbar showing up

> ID：13295104
> 
> 赞同：2
> 
> 时间：2012-11-08T18:09:32.013
> 
> 标签：html, css, firefox

My Problem is described by this Code:

```
<div class="test"></div>
<div class="extra"></div> 
```

Stylesheet:

```
 html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}
div.test {
    width: 100%;
    background: #ccc;
    height: 100%;
}
div.extra {
    position:relative;
    height:50px;
    background:red;
    top:-50px;
} 
```

​or in this jsfiddle:

[http://jsfiddle.net/XnKmW/3/](http://jsfiddle.net/XnKmW/3/)

If you look at it, all things are in place - like they should be.

In Chrome and IE no scrollbar shows up. But in FF there is a scrollbar and you can scroll beyond that red div - this shouldn't be possible!

Making the any of the divs positon:absolute is not the answer I am searching for.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:16:23.760

你会因为这个而滚动

```
div.extra {
    position:relative;
    height:50px;
    background:red;
    top: -50px;
} 
```

您正在使用and 而不是从`position: relative;`中减去，而是取出相对值并使用`-50px;``top``margin-top: -50px;`

[**演示**](http://jsfiddle.net/XnKmW/6/)

```
div.extra {
    height:50px;
    background:red;
    margin-top:-50px;
} 
```

# css - Why does input-append class break the width of the input in fluid grids?

> ID：13295106
> 
> 赞同：1
> 
> 时间：2012-11-08T18:09:38.630
> 
> 标签：css, layout, twitter-bootstrap

I have the following html:

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span8">
        <form class="form-horizontal">
            <div class="control-group">
                <label class="control-label">Field 1</label>
            <div class="controls">
                <input type="text" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Field 2</label>
            <div class="controls">
                <div class="input-append">
                <input type="text" />
                    <span class="add-on">%</span>
                </div>
                </div>
            </div>
        </form>
    </div>
</div> 
```

​</p>

And the following style:

input { width: 100%; }​</p>

Field 1's input box works as expected. However, field 2 seems to get some fixed width. Why does this happen and is there a way to fix it? I would like the appended to input to be the same 100% width within the span to match the other text fields.

Example here: [http://jsfiddle.net/PilotBob/erT7d/](http://jsfiddle.net/PilotBob/erT7d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:17:43.677

那是因为在第二个输入中，您有**另一个容器**, `.input-append`，它比您想象的要小。

设置它`width:100%;`为好，**[解决了这个问题。](http://jsfiddle.net/erT7d/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:19:34.580

发生这种情况是因为引导程序更改了具有from到的默认`display`值。`div``class` `input-append``block``inline-block`

您可以将`width:100%`输入设置为与正常宽度相同，但`add-on`会溢出或将其设置`width:95%`为相同。

[第一个解决方案的宽度：100%](http://jsfiddle.net/erT7d/5/)

[第二种解决方案，宽度：95%](http://jsfiddle.net/erT7d/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:28:13.453

我已保存此文件并运行它。未发现任何问题

```
<style>
input{width: 100%;}
</style>
<div class="container-fluid">
<div class="row-fluid">
<div class="span8">
    <form class="form-horizontal">
        <div class="control-group">
            <label class="control-label">Field 1</label>
        <div class="controls">
            <input type="text" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Field 2</label>
        <div class="controls">
            <div class="input-append">
            <input type="text" />
                <span class="add-on">%</span>
            </div>
            </div>
        </div>
    </form>
    </div>
</div> 
```

但是在您提到的网址上它不起作用我不知道为什么？如果在其他地方造成问题，可能有一些原因

1.  容器宽度不足，省略父级或容器宽度即可解决问题
2.  您可能稍后在 css 中覆盖了宽度，请使用“input { width: 100% !importtant;}”

# c# - 在设计时将 NewLine 添加到标签的文本

> ID：13295116
> 
> 赞同：40
> 
> 时间：2012-11-08T18:10:27.147
> 
> 标签：c#, winforms, label, newline, windows-applications

如何在设计时向`Label`a添加换行符？`Text`Stack Overflow 上有一些关于如何在代码隐藏中执行此操作的帖子，但似乎还没有关于设计时的帖子，似乎？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-08T18:19:13.333

当您在标签的属性窗口中单击标签文本属性时，将出现一个下拉菜单，您可以在其中按 键`Enter`，转到新行。我刚刚试了一下，它在 Visual Studio 2010 中运行。

这是一个屏幕截图来澄清：

[![编辑多行标签](../Images/968580bfe5f8bd7326a1e9af3c812d84.png)](https://i.stack.imgur.com/lbUw4.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-08T18:20:21.187

设计时间 \r\n 会做的伎俩 -

```
 label1.Text = "Multi-line \r\nlabel" 
```

您也可以尝试在设计器生成的代码中设置 -

```
 this.label2.Location = new System.Drawing.Point(151, 120);
        this.label2.Name = "label2";
        this.label2.Size = new System.Drawing.Size(35, 13);
        this.label2.TabIndex = 1;
        this.label2.Text = "Multi-line \r\n label"; 
```

运行 -

```
 label1.Text = "Multi-line" + Environment.NewLine + "label"; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-09-14T07:43:27.810

您可以`<br />`在字符串中使用，例如：

```
MyLabel.Text = "This is my text" + "<br />" + "This is my new line text"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-21T17:14:12.417

当您让格式框下拉时，使用“Shift+Enter”转到新行。“输入”只会导致框关闭。至少，这是我在 VS2015 中的经验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-31T16:01:05.707

使用 Properties > Layout > Autosize 将 Autosize 设置为 False，然后使用 Properties > Layout > Size 根据您的文本大小设置 Width 和 Height 参数。这对我有用，宽度为 60，高度为 40，标签显示如下。
3：自动

H：首页

# c# - Error while creating an editable DataGrid

> ID：13295117
> 
> 赞同：0
> 
> 时间：2012-11-08T18:10:30.557
> 
> 标签：c#, wpf, linq, entity-framework, datagrid

I've managed to stump myself with LINQ. I am trying to create an editable datagrid in a WPF app using a subset gathered from a LINQ query:

```
var LookUpEvents = from d in ThisData.Events.Local
                   where d.StartDate.Value.Date <= DateTime.Now.Date &&
                   (d.EndDate.HasValue == false || d.EndDate.Value.Date >= DateTime.Now.Date)
                   select d;
RangeEventGrid.ItemsSource = LookUpEvents;
RangeEventGrid.Items.Refresh(); 
```

This query works, and the datagrid is populated however I am unable to edit the datagrid, when trying to this exception is thrown:

```
"'EditItem' is not allowed for this view."
   at System.Windows.Controls.ItemCollection.System.ComponentModel.IEditableCollectionView.EditItem(Object item)
   at System.Windows.Controls.DataGrid.EditRowItem(Object rowItem) 
```

When loading the full dataset using:

```
ThisData.Events.Load();
FullEventGrid.ItemsSource = ThisData.Events.Local; 
```

Everything works fine and the data is editable. The XAML used is identical (I have also tried swapping the bound datagrids and the full result remains editable and the query throws the exception still) and the only difference between these is the query. When I try to change the query I end up with a new exception:

```
The specified type member 'Date' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

The query used for that:

```
var LookUpEvents = from d in ThisData.Events
                   where d.StartDate.Value.Date <= DateTime.Now.Date &&
                   (d.EndDate.HasValue == false || d.EndDate.Value.Date >= DateTime.Now.Date)
                   select d;
LookUpEvents.Load(); //Exception thrown here.
RangeEventGrid.ItemsSource = LookUpEvents;
RangeEventGrid.Items.Refresh(); 
```

The really weird thing about that exception (weird to me at least) is that I use DateTime comparison in other queries that do not throw any exceptions, for example this query in another place works fine:

```
var LookUpSessions = from d in ThisData.Sessions
                     where d.EndTime.Hour >= (DateTime.Now.Hour - 1) && d.StartTime.Hour <= (DateTime.Now.Hour + 2)
                     && d.Event.IsActive == true
                     orderby d.StartTime.Hour, d.StartTime.Minute
                     select d; 
```

Is it not possible to bind a LINQ query result to a DataGrid to be editable? That seems like it'd be a huge oversight if that's the case. I feel like it's much more likely I'm just missing something basic since LINQ, WPF and EF are all brand new to me.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T22:06:10.170

要使在 GridView 中编辑数据成为可能[，您不能使用`IEnumerable<T>`或`IQueryable<T>`](https://stackoverflow.com/a/6509639/270591)作为项目源。`IList`您需要一个实现或`IEnumerable<T>`不实现的集合类型`IQueryable<T>`。

一个可能的解决方案是您从 LINQ 查询创建一个`ObservableCollection<T>`（确实实现）：`IList`

```
RangeEventGrid.ItemsSource = new ObservableCollection<Event>(LookUpEvents); 
```

这也是为什么

```
FullEventGrid.ItemsSource = ThisData.Events.Local; 
```

*确实*有效，因为`Local`已经是 type `ObservableCollection<Event>`。

您的第一个查询不会引发异常（尽管您正在使用`DateTime.Date`），因为它不是 LINQ-to-Entities/database 查询。它是在`Local`集合的内存中运行的 LINQ-to-Objects 查询。不涉及数据库查询。

如果删除`Local`，则运行 LINQ-to-Entities 和 LINQ-to-Entities 不支持 LINQ-to-Objects 支持的所有方法和属性，尤其是它不支持`DateTime.Date`（但显然确实支持`DateTime.Hour`）。

要在 LINQ-to-Entities 查询中执行比较，`Date`您可以使用[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)：

```
var today = DateTime.Now.Date;
var LookUpEvents = from d in ThisData.Events
                   where EntityFunction.TruncateTime(d.StartDate) <= today &&
                         (!d.EndDate.HasValue ||
                          EntityFunction.TruncateTime(d.EndDate) >= today)
                   select d; 
```

或者，该`EntityFunction.DiffDays`功能也是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T22:03:18.330

并且问题解决了！

添加`.ToList()`到绑定中并且可以正常工作！

完整的工作 LINQ 查询：

```
var LookUpEvents = from d in ThisData.Events.Local
                   where d.StartDate.Value.Date <= DateTime.Now.Date &&
                   (d.EndDate.HasValue == false || d.EndDate.Value.Date >= DateTime.Now.Date)
                   select d;

// Old binding: RangeEventGrid.ItemsSource = LookUpEvents;
// New binding:
RangeEventGrid.ItemsSource = LookUpEvents.ToList(); // .ToList() Fixes it!
RangeEventGrid.Items.Refresh(); 
```

自我回答以纪念[http://xkcd.com/979/](http://xkcd.com/979/)

# python - Opening a new tkinter window from another window

> ID：13295119
> 
> 赞同：1
> 
> 时间：2012-11-08T18:10:34.207
> 
> 标签：python, user-interface, tkinter

I'm trying to lay out a basic interface, but have run into some trouble.

Code:

ServerMainWindow.py

```
import Tkinter as tk

import ServerEditWindow as editWindow

class ServerMainWindow(tk.Toplevel):
    def __init__(self, parent, title = None):

        tk.Toplevel.__init__(self, parent)
        #associate this window with a parent window
        self.transient(parent)

        if title:
            self.title(title)

        self.parent = parent

        self.result = None

        body = tk.Frame(parent)
        self.initial_focus = self.listbox(body)
        body.pack(fill='both')

        self.buttons()

        self.grab_set()

        if not self.initial_focus:
            self.initial_focus = self

        self.protocol("WM_DELETE_WINDOW", self.cancel)

        self.initial_focus.focus_set()

        self.wait_window(self)

    def listbox(self, parent):
        """
        create the listbox that will hold the available job names.
        the Listbox widget will have initial focus when the dialog
        is created
        """

        self.listbox = tk.Listbox(parent)
        self.listbox.pack(fill='both')

        for item in [1, 2, 3, 4]:
            self.listbox.insert(tk.END, item)

        return self.listbox

    def buttons(self):
        """
        add a frame to hold the buttons
        Edit, Stop, and Stop all
        """

        box = tk.Frame(self)

        edit = tk.Button(box, text="Edit", width=10, command=self.edit)
        edit.pack(side=tk.LEFT, padx=5, pady=5)

        stop = tk.Button(box, text="Stop", width=10, command=self.stop)
        stop.pack(side=tk.LEFT, padx=5, pady=5)

        stopAll = tk.Button(box, text="Stop all", width=10, command=self.stopAll)
        stopAll.pack(side=tk.LEFT, padx=5, pady=5)

        box.pack()

    def edit(self):
        """
        callback function for the edit button

        will create a new dialog window with the access list
        for the selected job (from the Listbox in self.listbox)
        """

        d = editWindow.ServerEditWindow(self.parent, title="other window")

    def stop(self):
        """
        callback function for the stop button

        will stop the headless sds2 process for the selected job
        (from the Listbox in self.listbox)
        """

        pass

    def stopAll(self):
        """
        callback function for the stop all button

        will stop all running headless sds2 processes
        """

        pass

    def cancel(self, even=None):
        self.parent.focus_set()
        self.destroy() 
```

ServerEditWindow.py

```
import Tkinter as tk

class ServerEditWindow(tk.Toplevel):
    def __init__(self, parent, title = None):
        tk.Toplevel.__init__(self, parent)

        #associate this window with the parent
        self.transient(parent)

        if title:
            self.title(title)

        body = tk.Frame(parent)
        self.initial_focus = self.listbox(body)
        body.pack(padx=5, pady=5)

        self.parent = parent

        self.result = None

        self.newUser(body)
        self.buttons()

        self.grab_set()

        if not self.initial_focus:
            self.initial_focus = self

        self.protocol("WM_DELETE_WINDOW", self.cancel)

        self.initial_focus.focus_set()

        self.wait_window(self)

    def listbox(self, parent):
        """
        create a listbox to hold the users with access to the currently selected job
        """

        self.listbox = tk.Listbox(parent)
        self.listbox.pack()

        return self.listbox

    def newUser(self, parent):
        """
        a frame that holds an entry widget and a button to confirm the
        addition of a user to the list of users who canaccess the job info.
        """

        box = tk.Frame(parent)

        self.entry = tk.Entry(box)
        self.entry.pack(side = tk.TOP)

        button = tk.Button(box, text="Add user", callback = self.addUser)
        button.pack(side=tk.TOP)

        box.pack()

    def buttons(self):
        """
        create the delete button for the Listbox.
        """

        box = tk.Frame(self)

        delete = tk.Button(box, text = "Delete user", callback=self.deleteUser)
        delete.pack(side=tk.LEFT, padx=5, pady=5)

    def addUser(self):
        """
        add the user from self.entry to the list of users able to access
        the job information.
        """

        pass

    def deleteUser(self):
        """
        delete the user currently selected in the Listbox.
        """

        pass

    def cancel(self, even=None):
        self.parent.focus_set()
        self.destroy() 
```

and the script used to test:

```
#!/usr/bin/python

import ServerGUI as gui
import Tkinter as tk

root = tk.Tk()

d = gui.ServerMainWindow(root, title="main test")

root.mainloop() 
```

The problem: when Edit is clicked from the first dialog (created in ServerMainWindow) I want a second window to pop up with some other widgets. At the moment I get nothing, no window, no errors, nothing.

Any help would be greatly appreciated.

# perl - POE::Component::Server::NRPE，返回值

> ID：13295127
> 
> 赞同：0
> 
> 时间：2012-11-08T18:11:08.310
> 
> 标签：perl, nagios, poe, nrpe

我尝试使用您的 CPAN 模块 POE::Compoenten::Server::NRPE。我尝试了来自 CPAN 站点的示例，并针对 nagios-tool check_nrpe 进行了测试。

文本很好，但我无法获得正确的返回值。您在模块描述中描述了这个 return_result，但我不知道如何使用它。

非常好，如果你能给我一个非常简短的例子，如何返回值 <> 0。

多谢！

干杯，克里斯托夫

```
use POE;
use POE::Component::Server::NRPE;

# test with: check_nrpe -H localhost -c test; echo $?

my $nrped = POE::Component::Server::NRPE->spawn (port => 5666);
$nrped->add_command (command => "test", program =>
sub { print STDOUT "test CRITICAL\n";
return 2;    # always 0???
});

$poe_kernel->run ();
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:26:58.500

感谢您发布这个问题。我不知道这个模块，但它对我有很大帮助。

1.  尝试在您的代码中使用严格和警告，这对您有好处
2.  使用 POE::Component::Server::NRPE::Constants 提供的返回常量，而不是使用 0 表示 OK，1 表示 WARNING 等等
3.  我相信唯一的问题是您在测试子中使用`return 2`而不是`exit 2`或更好`exit NRPE_STATE_CRITICAL`

以下代码应产生所需的结果

```
use strict;
use warnings;
use POE;
use POE::Component::Server::NRPE;

# it's recommended to use the NRPE return states provided by the module
use POE::Component::Server::NRPE::Constants qw(NRPE_STATE_OK NRPE_STATE_CRITICAL);

my $nrped = POE::Component::Server::NRPE->spawn (
        port => 5666
);

$nrped->add_command (command => "test", program =>
        sub {
                print STDOUT "testing CRITICAL\n";
        # better to use NRPE_STATE_CRITICAL...
                exit NRPE_STATE_CRITICAL;
        # ... instead of the corresponding digital value
        # but it should work
        # exit 2;
        }
);

$poe_kernel->run ();
exit 0; 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:03:26.640

看起来像模块中的错误。作者在cpan上推送了一个新版本（0.16 -> 0.18）。

# r - Knitr 挂在 system() 调用上

> ID：13295130
> 
> 赞同：2
> 
> 时间：2012-11-08T18:11:22.600
> 
> 标签：r, latex, system, knitr

在一个块中运行系统调用后，如何让 knitr 解除挂起？例如：

```
\documentclass{article}

\begin{document}
Test 

<<>>=
system('"C:\\Program Files\\SASHome\\SASFoundation\\9.3\\sas.exe" "test.sas"')
@

\end{document} 
```

这段代码永远挂起。顺便说一句，上面的 R 代码运行良好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:30:50.937

默认情况下，代码块的工作目录是源文档的目录（在本例中为 Rnw doc），因此`test.sas`必须与 Rnw 文件位于同一目录下。

或者您可以使用`opts_knit$set(root.dir = '/path/to/desired/dir/')`.

SAS 支持`knitr`已添加到[开发版本](https://github.com/yihui/knitr)中，您可以执行以下操作：

```
<<engine='sas', engine.path="C:\\Program Files\\SASHome\\SASFoundation\\9.3\\sas.exe">>=
/* write the content of your test.sas here */
@ 
```

# java - 在命令行上编译 netbeans 程序

> ID：13295132
> 
> 赞同：1
> 
> 时间：2012-11-08T18:11:29.150
> 
> 标签：java, netbeans, command-line, import, compiler-errors

我在 Netbeans 中编写了一个程序供自己使用，但现在其他人想从命令行远程使用它并提供命令行参数。我将代码更改为接受命令行参数，但我似乎无法让代码正确运行。如果我输入这个（所有必需的命令行参数）：

```
 java -jar /home/Stephanie/NetBeansProjects/consistentBelow/dist/consistentBelow.jar
    -o /home/Stephanie/Data/out9.txt //where the output file should be
    -f /home/Stephanie/Data/  //what folder the files are located in
    -c /home/Stephanie/Data/48E_cov1.txt //file
    -l /home/Stephanie/Data/list.txt //file
    48.doc //sample
    48e.doc //sample 
```

它运行得很好，但从不产生输出文件。我试图从命令行重新编译（思考，也许它正在运行一个较旧的编译版本）但它没有识别我下载的用于制作命令行参数的包之一：

```
javac /home/Stephanie/NetBeansProjects/consistentBelow/src/consistentbelow/ConsistentBelow.java 
/home/Stephanie/NetBeansProjects/consistentBelow/src/consistentbelow/ConsistentBelow.java:9: package com.martiansoftware.jsap does not exist
import com.martiansoftware.jsap.*;
^ 
```

我试图弄乱类路径，但似乎无处可去：

```
javac -jar /home/Stephanie/NetBeansProjects/consistentBelow/src/consistentbelow/ConsistentBelow.jar -classpath /home/Stephanie/Downloads/JSAP-2.1.jar 
Unable to access jarfile /home/Stephanie/NetBeansProjects/consistentBelow/src/consistentbelow/ConsistentBelow.jar 
```

（另外，如果我尝试在 Netbeans 中运行该程序，似乎没问题。它只是抱怨没有参数，正如我所料）

```
Error: Parameter 'out' is required.
Error: Parameter 'folder' is required.
Error: Parameter 'coverage' is required.
Error: Parameter 'list' is required.
Error: Parameter 'samplefile' is required.
Usage: java consistentbelow.ConsistentBelow
                (-o|--outputlocation) <out> (-f|--folder) <folder> (-c|--coverage) <coverage> (-l|--list) <list> samplefile1 samplefile2 ... samplefileN

  (-o|--outputlocation) <out>
        Where would you like the resulting file to be put? Full path and desired
        file name

  (-f|--folder) <folder>
        What folder will we find the sample files in? Full path

  (-c|--coverage) <coverage>
        Where is the coverage file? Full path

  (-l|--list) <list>
        Where is the interval list file? Full path

  samplefile1 samplefile2 ... samplefileN
        Please write the full file name for each sample we will look at

Java Result: 1 
```

如果它真的有助于解决问题，我可以包含代码和输出，但如果它只是一个编译问题，我不想让这个问题变得巨大。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:42:56.997

我最终只使用 netbeans 来修复命令行运行。我确保我的程序被设置为主程序，然后我使用了小“清理和构建”锤子，我所有的问题都消失了。 `java -jar /home/Stephanie/NetBeansProjects/consistentBelow/dist/consistentBelow.jar -o /home/Stephanie/out9.txt -f /home/Stephanie/ -c /home/Stephanie/Data/48cov1.txt -l /home/Stephanie/Data/list.txt 48e.doc 48.doc` 在那之后工作得很好

# ruby-on-rails-3 - Carrierwave：从上传的文件中提取图像并丢弃原始文件

> ID：13295133
> 
> 赞同：0
> 
> 时间：2012-11-08T18:11:34.300
> 
> 标签：ruby-on-rails-3, carrierwave

我们正在使用 CarrierWave 在我正在处理的项目中上传文件。一个新的要求是解决上传 DICOM 文件的需要。[除了大量其他数据之外， DICOM](http://en.wikipedia.org/wiki/DICOM)文件还包含一个（或多个）图像。使用[Ruby DICOM](http://dicom.rubyforge.org/) gem，我可以轻松地从文件中提取图像。当我尝试使用 CarrierWave 上传它们时，我的问题就出现了。

我希望能够从上传的文件中提取 JPEG，并存储该文件而不是原始 DICOM 文件。我尝试创建一个`version`这样的上传文件：

```
version :jpeg, :if => :is_dicom? do
  process :create_jpeg
end

def is_dicom?(file)
  IO.binread(file.to_file, 4, OFFSET) == 'DICM'
end

def create_jpeg
  Rails.logger.debug "self is class #{self.class}"
  dcm = DICOM::DObject.read(file.path)
  image = dcm.image.normalize
end 
```

我的`create_jpeg`方法基于我发现的另一种`create_thumbnail`方法，如果没有异常处理，该方法将简化为：

```
def create_thumbnail(width, height, gravity = 'Center')
  self.resize_to_fill(width, height, gravity)
end 
```

我可以在调试控制台中看到 DICOM 已成功读取，但它实际上并没有保存将要提取的 JPEG。相反，我得到了我的原始 DICOM 和一个在文件名前面添加了“jpeg”的副本。如何告诉 CarrierWave 我要存储我提取的这个 JPEG，而不是存储我处理的原始文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:18:11.880

据我所知的版本，创建文件的不同版本以便稍后恢复。为防止这种情况，您必须使用 JPEG 覆盖文件。

如何`image_dicom`在模型中创建一个虚拟属性，提取 JPEG，然后将其分配给`image`附加的上传器？现在上传具有`image_dicom`属性名称的文件可以被解析但不会存储在数据库中。

您必须解析上传的文件，这是 Carrierwave 自动执行的操作，但我认为这不会是一个大问题。不确定它是如何在内部表示的，我知道它不是一个常规`File`对象，但不应该很难检测和提取原始数据和 JPEG。

编辑：显然，如果您需要解析 DICOM 文件和常规图像，这会变得有点复杂，因为您必须检测文件类型并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:28:20.383

除了手动提取之外，据我所知，您还可以使用该处理器而不使用版本。

这样，您可以在上传文件时操作文件本身，而无需创建版本。我从来没有这样做过，但它似乎就像这样做一样容易：

```
process :create_jpeg, :if => :is_dicom?

def is_dicom?(file)
  IO.binread(file.to_file, 4, OFFSET) == 'DICM'
end

def create_jpeg(image)
  directory = File.dirname(current_path)

  # not quite thread safe, generate something unique here
  tmpfile   = File.join(directory, "tmpfile")

  FileUtils.mv(current_path, tmpfile)

  dcm = DICOM::DObject.read(tmpfile)
  image = dcm.image.normalize.write(current_path)

  FileUtils.rm(tmpfile)
end

# replace the extension with jpg
def filename
  super.chomp(File.extname(super)) + '.jpg'
end 
```

复制并改编自：[http](http://www.freezzo.com/2010/12/23/create-ffmpeg-processor-for-carrierwave-in-rails-3/) : //www.freezzo.com/2010/12/23/create-ffmpeg-processor-for-carrierwave-in-rails-3/ 和 Carrierwave 文档。

# c# - ASP.NET MVC 操作上的名称属性

> ID：13295136
> 
> 赞同：0
> 
> 时间：2012-11-08T18:11:43.980
> 
> 标签：c#, asp.net-mvc, forms

我有这个动作：

```
[HttpPost]
public ActionResult Test(Test test) 
{
    ...
} 
```

有了这个类：

```
public class Test
{
    public string txtTest { get; set; }
} 
```

一个 html 表单有一个名为*txtTest*的文本字段，我可以成功调用上面的操作。什么属性名称可以让我这样做：

```
public class Test
{
    [SomeAttribute(Name = "txtTest")]
    public string MyTest { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:15:21.853

使用 ViewModel，不要使用用于其他用途的类。
仅为此特定视图创建 ViewModel。

**好处之一**是您不需要更改现有类的属性名称。

您可以使用[`automapper`](https://github.com/AutoMapper/AutoMapper)在 MVC 应用程序中高度使用的从 ViewModel 映射到 Entity。

一个很好的阅读资源可以在[这里找到](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:18:41.333

使用显示数据注解

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx)

# java - javax.naming.NamingException：无法创建 ActiveMQConnectionFactory 的资源实例

> ID：13295137
> 
> 赞同：1
> 
> 时间：2012-11-08T18:11:44.207
> 
> 标签：java, jakarta-ee, jms, jndi

我知道这个问题已经被问过很多次了，但是即使遵循了所有的答案，我仍然有一个例外。我的配置是：

上下文.xml

```
<Context>
     <Resource
      name="jms/ProdConnectionFactory"
      description="Prod JMS Connection Factory"
      auth="Container"
      userName="" 
      password=""
      type="org.apache.activemq.ActiveMQConnectionFactory"
      factory="org.apache.activemq.jndi.JNDIReferenceFactory"
      brokerURL="tcp://jmshost:61616"
      brokerName="ProdActiveMQBroker"
   />
</Context> 
```

web.xml

```
<web-app>
    <resource-ref>
        <description>Prod Connection Factory</description>
        <res-ref-name>jms/ProdConnectionFactory</res-ref-name>
        <res-type>org.apache.activemq.ActiveMQConnectionFactory</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</web-app> 
```

Java代码：

```
Context context = new InitialContext();
ActiveMQConnectionFactory factory = (ActiveMQConnectionFactory) context.lookup("java:comp/env/jms/ProdConnectionFactory"); 
```

我收到的例外是：

```
javax.naming.NamingException: Cannot create resource instance
        at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:793)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
        at org.apache.naming.SelectorContext.lookup(SelectorContext.java:137)
        at javax.naming.InitialContext.lookup(InitialContext.java:392) 
```

任何人都可以看看，让我知道我错在哪里。谢谢

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:39:06.453

原因在[这里](https://stackoverflow.com/questions/13419621/catalina-base-conf-catalina-localhost-appname-xml-is-different-from-applicatio)描述：appname.xml 与 context.xml 不同，即它包含更少的资源在 context.xml 中定义。每次重新部署应用程序时都应更新 appname.xml，但重新部署时会出现问题，导致 appname.xml 保持不变。更新 appname.xml 后问题已解决

大号

# android - Android ICS 虚拟按钮旋转

> ID：13295139
> 
> 赞同：0
> 
> 时间：2012-11-08T18:11:46.500
> 
> 标签：android, rotation, android-4.0-ice-cream-sandwich, screen-orientation, softkeys

是否可以以编程方式旋转虚拟按钮（软键）？

我知道如果我启用 android:screenOrientation 选项，我可以让这些按钮自动旋转。但有时我的活动太繁重，无法旋转所有内容。因此，我正在寻求解决方案，以在将虚拟按钮旋转到正确的显示方向时保持某些屏幕项目的完整性。

我找不到任何文档和/或提及相关 API/黑客。这是禁地吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:26:33.180

Android 在作为框架代码的一部分的 PhoneWindowManager 中检测方向/导航栏定位。所以不幸的是，不可能从应用程序中做到这一点。

# java - Android - 在 Chronometer 中计算经过的时间

> ID：13295140
> 
> 赞同：5
> 
> 时间：2012-11-08T18:11:47.730
> 
> 标签：java, android, time, timer, chronometer

在 Chronometer 中，我们如何提取经过的时间并将其单独存储在变量中。

例如，将经过的小时数、分钟数、秒数存储在单独的 int 变量中？

是否可以？如果是，如何？

除了 Chronometer 之外，使用其他概念可以更好地完成吗？如果是，那是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-08T19:36:51.087

您可以获得时间值（以毫秒为单位）：

```
long timeElapsed = SystemClock.elapsedRealtime() - chrono.getBase(); 
```

然后您可以简单地检索小时、分钟和秒，如下所示：

```
long timeElapsed = 7564000; //For example
int hours = (int) (timeElapsed / 3600000);
int minutes = (int) (timeElapsed - hours * 3600000) / 60000;
int seconds = (int) (timeElapsed - hours * 3600000 - minutes * 60000) / 1000;
//hours = 2
//minutes = 6
//seconds = 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T18:16:02.523

我突然想到了几个想法：

*   Chronometer 扩展了 TextView，因此使用`getText()`并解析每个时间`":"`（或任何本地时间分隔符）。
*   您还可以自己计算当前时间（以毫秒为单位），将其传递给 Java Calendar 对象并使用它的`get()`方法：

    ```
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
    calendar.setTimeInMillis(SystemClock.elapsedRealtime() - chronometer.getBase());
    int hour = calendar.get(Calendar.HOUR_OF_DAY);
    // etc 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T19:44:24.443

您也可以创建自己的 Chronometer，这是一个我用作倒数计时器的示例，但想法是相反的，您只需要更改 CountQueue CountDownTimer 以添加分钟和小时而不是减去它们，更改@Override onTick 将 iSec 存储为 60 减去当前值并将“void setTimeText()”更改为您想要显示的值。setTrainingCountdown() 也应该改变，所以它默认从 0 开始。

要使用它，您只需在创建新 SkillQCountdown 时绑定任何 TextView 并使用 setTrainingCountdown() 启动它，您可能想要创建一种暂停和重新启动计时器的方法（只需停止计时器并存储值，然后使用存储的值重新启动） . 如果您还想存储和显示毫秒，请更改此行“counter = new CountQueue(60000, 100);” 因此您可以每秒注册一次 onTick 而不是每 60 秒一次，第二个值是它尝试使用新值更新 TextView 的频率。

但是，如果您只想精确存储值，则可以在计数开始时以毫秒为单位获取当前时间，并且无论何时要获取值，然后减去该值并计算秒、分钟和小时，就像您可以看到它是在“public void setTrainingCountdown(long diffInMis)”中完成的

```
public class SkillQCountdown {

    int iDay,iHour,iMin,iSec;
    CountQueue counter;
    NumberFormat myFormat = NumberFormat.getInstance();

    Context mContext;
    private TextView text = null;

    public SkillQCountdown(Context context, TextView text){
        mContext = context;
        this.text = text;
    }

    public void setTrainingCountdown(long diffInMis) {
        myFormat.setMinimumIntegerDigits(2);

        try {
            if(diffInMis < 0) {
                Toast.makeText(mContext, "Skill Queue unsynchronized"
                        ,Toast.LENGTH_SHORT).show();

            }else {             
                long diff = TimeUnit.MILLISECONDS.toSeconds(diffInMis);
                iDay = (int) (diff/(60*60*24));

                long lday = (diff%(60*60*24));
                iHour = (int)(lday/3600);

                long lhour = (lday%(60*60));
                iMin = (int)(lhour/60);

                long lmin= (lhour%(60));
                iSec = (int)(lmin);

                setTimeText();

                counter = new CountQueue(iSec*1000, 100);
                counter.start();}

        } catch (ParseException e) {
            e.printStackTrace();
        }    
    }

    private void setTimeText() {
        StringBuilder sb = new StringBuilder();
        String strText = null;

        if (iDay > 0) {
            sb.append(myFormat.format(iDay));
            if (iDay == 1) {
                sb.append(" day ");
            }else {
                sb.append(" days ");
            }
        }

        if (iHour > 0 || iDay > 0) {
            sb.append(myFormat.format(iHour));
            if (iHour == 1) {
                sb.append(" hour ");
            }else {
                sb.append(" hours ");
            }
        }

        if (iMin > 0 || iHour > 0 || iDay > 0) {
            sb.append(myFormat.format(iMin));
            if (iMin == 1) {
                sb.append(" minute ");
            }else {
                sb.append(" minutes ");
            }
        }

        if (iSec > 0 || iMin > 0 || iHour > 0 || iDay > 0) {
            sb.append(myFormat.format(iSec));
            sb.append(" seconds");
            strText = sb.substring(0);
        }else {
            strText = mContext.getString(R.string.msg_skillQueueEmpty);
        }

        text.setText(strText);
    }

    private class CountQueue extends CountDownTimer{
        public CountQueue(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }
        @Override
        public void onFinish() {
            iSec = 0;
            setTimeText();

            counter = new CountQueue(60000, 100);
            counter.start();
            iMin-=1;

            if(iMin < 0 && (iHour > 0 || iDay > 0)) {
                iMin=59;
                iHour-=1;

                if(iHour < 0 && iDay > 0) {
                    iHour=23;
                    iDay-=1;
                }
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
            if (Math.floor((float)millisUntilFinished / 1000.0f) != iSec) {  
                iSec = (int) Math.floor((float)millisUntilFinished / 1000.0f);
                setTimeText();
             }
        }
    }

} 
```

# benchmarking - Quest Benchmark Factory 和 TPC-H：分析性能？

> ID：13295142
> 
> 赞同：1
> 
> 时间：2012-11-08T18:11:52.190
> 
> 标签：benchmarking, olap

是否可以使用 Quest Benchmark Factory 为 TPC-H 基准测试生成每秒事务与已用负载？这种测量是否可以很好地指示 OLAP 工作负载的性能？

[使用带有 RAID 存储的 Oracle 11g RAC 数据库]

# jquery - 使摇摆（或弹跳）效果减慢

> ID：13295143
> 
> 赞同：0
> 
> 时间：2012-11-08T18:11:55.147
> 
> 标签：jquery, css, css-animations

我想这适用于摆动或弹跳。关于如何在[另一篇文章](https://stackoverflow.com/questions/9910372/css3-swing-element-animation)中使对象摆动的示例，此代码已发布：http: [//jsfiddle.net/gVCWE/149/](http://jsfiddle.net/gVCWE/149/)

你如何让摆动减速停止？

```
.box{
    width:50px; height:50px;
    background: yellow;
    border: 1px solid black;
    margin:100px;
    position: relative;
    float: left;
    -moz-animation: 3s ease 0s normal none infinite swing;
    -moz-transform-origin: center top;
    -webkit-animation:swing 3s infinite ease-in-out;
    -webkit-transform-origin:top;
}

@-moz-keyframes swing{
    0%{-moz-transform:rotate(-3deg)}
    50%{-moz-transform:rotate(3deg)}
    100%{-moz-transform:rotate(-3deg)}
}
@-webkit-keyframes swing{
    0%{-webkit-transform:rotate(-3deg)}
    50%{-webkit-transform:rotate(3deg)}
    100%{-webkit-transform:rotate(-3deg)}
} 
```

我也想做其他的“惯性效应”。如果有必要，我不介意使用 JavaScript 或 JQuery。我觉得单独的 CSS 或关键帧不足以完成我想做的事情。

我可以使用 setInterval 并执行以下操作：

```
function prepareAnimation()
{
    setInterval(slowAnimation, 200)
}

function slowAnimation()
{
    speed=$(".box").getSpeed(); // how would I write getSpeed?
    if(speed<=0) return;
    speed = speed - .1;
    $(".box").setSpeed(speed); // how would I write setSpeed (degree would be set in here too)?
} 
```

我不知道通过脚本更改动画属性的最佳方法。尤其是在动画中间更改持续时间时，我完全不确定这是否可行。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:25:43.277

[http://jsfiddle.net/gVCWE/150/](http://jsfiddle.net/gVCWE/150/)

```
(function swing() {
    var ang  = 20,
        dAng = 1,
        dir  = 1,
        box = document.getElementById("box");

    (function setAng(ang){
        box.style.WebkitTransform =  'rotate('+ang+'deg)';
        box.style.MozTransform =  'rotate('+ang+'deg)';
        dir = -dir;
        if (Math.abs(ang) > 0)
            setTimeout(setAng, 1000, dir * (Math.abs(ang)-dAng));
    })(ang);
})();​ 
```

CSS

```
.box{
    width:50px; height:150px;
    background: yellow;
    border: 1px solid black;
    margin:100px;
    position: relative;
    float: left;
    -moz-transition:-moz-transform 1s ease-in-out;
    -moz-transform-origin: center top;
    -webkit-transition:-webkit-transform 1s ease-in-out;
    -webkit-transform-origin:top;
} 
```

`ang`您可以通过将和的初始值`dir`设为负来切换初始方向。您可以通过增加 的值来使“摆动”变慢得更快`dAng`，但它应该是 的一个因素`ang`。

# css - 如何在 Twitter Bootstrap 中禁用缩小/调整图像大小？

> ID：13295147
> 
> 赞同：0
> 
> 时间：2012-11-08T18:12:31.753
> 
> 标签：css, twitter-bootstrap, responsive-design

我有以下设置

*   引导程序 2.2.1
*   通过 AJAX 在层中加载的 HTML
*   桌面显示器上的图层宽度为 600 像素

我想显示小图像（32x32 像素）：

```
<img src="/img/icon_line.png" class="img-polaroid" width="32" height="32" /> 
```

发生的情况是它们通过 bootstrap.css 中的以下 css 规则缩小到很小的大小：

```
img {
  width: auto\9;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
} 
```

如何避免这种情况并在我的图层中以全尺寸显示图标？

**更新：** 我发现当图像在表格中并且表格行内部有很多文本并且所有内容都在图层中时，会发生这种情况。

这是我的用例的简化示例：

*   长文本，损坏：[http ://www.another-showroom.com/bootstrap/broken.html](http://www.another-showroom.com/bootstrap/broken.html)
*   短文本，好的：[http ://www.another-showroom.com/bootstrap/ok.html](http://www.another-showroom.com/bootstrap/ok.html)
*   zip 文件示例：[http ://www.another-showroom.com/bootstrap/bsbug.zip](http://www.another-showroom.com/bootstrap/bsbug.zip)

**固定版本：**

*   [http://www.another-showroom.com/bootstrap/fixed.html](http://www.another-showroom.com/bootstrap/fixed.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:17:50.390

用于带有图像下一个代码的表格单元格：

```
<td class="span1">
     <img src="img/icon_line.png" class="img-polaroid" alt="Ligne">
</td> 
```

# c# - 为什么 TypeConverter.CanConvertFrom 总是在“sourceType”中提供“字符串”？

> ID：13295151
> 
> 赞同：1
> 
> 时间：2012-11-08T18:12:37.167
> 
> 标签：c#, winforms, propertygrid, typeconverter

我有一个 PropertyGrid 用于一个类，该类具有我想使用现有的合适值列表填充的属性。

为了实现这一点，我像这样扩展 TypeConverter 以显示一个下拉列表：

```
public class BaseDefinitionTypeConverter : TypeConverter
{
    protected Dictionary<string, BaseDefinitionWrapper> mapping = new Dictionary<string, BaseDefinitionWrapper>();

    public override bool GetStandardValuesSupported(ITypeDescriptorContext context) {
        return true; // display drop
    }

    public override bool GetStandardValuesExclusive(ITypeDescriptorContext context) {
        return true; // drop-down vs combo
    }

    public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context) {
        mapping.Clear();

        //Since everything is passed in as string a conversion is needed. "mapping" provides for that
        foreach (BaseDefinitionWrapper baseDef in BaseDefinitionWrapper.allWrappers) {
            mapping.Add(baseDef.ToString(), baseDef);
        }

        return new StandardValuesCollection(BaseDefinitionWrapper.allWrappers);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType) {
        //sourceType is ALWAYS string
        return sourceType == typeof(string);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value) {
        //returns the actual selected object to the property grid. value is ALWAYS string.
        return mapping[value.ToString()];
    }
} 
```

像这样使用：

```
[TypeConverter(typeof(BaseDefinitionTypeConverter))]
public BaseDefinitionTypeWrapper XYZ {
  get; set;
} 
```

您可以看到我的后备列表是 BaseDefinitionWrapper.allWrappers。

问题 #1) 为什么尽管 StandardValuesCollection 的类型不同，但 CanConvertFrom 中的 sourceType 和 ConvertFrom 中的 value 始终是字符串？似乎 PropertyGrid 仅使用下拉列表中元素的 toString() 方法并将其传递。

我有一个问题，在“GetStandardValues”（baseDef.toString（））中创建“映射”字典和在“ConvertFrom”（value.ToString（））中调用“映射”之间的关键值是键（在参数“值”中）可以更改（！）因此导致异常，因为找不到键。然而后面的对象并没有改变！

问题 #2）如何从下拉列表中获取选定的对象，而不必将其从字符串转换为并非总是可能的（见上文）？有没有办法让这个下拉框的选定索引作为某种解决方法？

非常感谢！

# .net - 是否可以扩展 FluentApiMapper 设置默认值？

> ID：13295161
> 
> 赞同：2
> 
> 时间：2012-11-08T18:13:18.563
> 
> 标签：.net, entity-framework, c#-4.0, ef-code-first

我正在使用 EF 5 Code Fist 并使用 fluent API 指定一些自定义对象到表的映射。像这样：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
  {
   //Account Service
   modelBuilder.Entity<ACCOUNT>().ToTable("ACCOUNT", "T70_AccountService");
    ...
   modelBuilder.Entity<ACCOUNT>()
     .Property(p => p.Created).HasColumnType("DateTime")
     .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed); 
```

我想做的是添加一个允许添加的扩展

```
 .HasDefaultValue('(getdateutc()'); 
```

那可能吗 ？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:08:32.170

简短的回答是：不，没有 API（还没有？）用于在代码优先中设置默认值。

更长的答案是：不。第二好的（但远远落后）是使用数据库初始化程序向数据库发送 DDL 查询：

```
protected override void Seed(DbContext context)
{
    context.Database.ExecuteSqlCommand(
        "ALTER TABLE [T70_AccountService] ADD DEFAULT (getutcdate()) FOR [Created]");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T20:45:39.350

好消息，代码优先现在支持这一点。在生成的迁移的“Up()”方法中，使用以下语法指定默认值：

```
AddColumn("[table name]", "[column name]", c => c.Boolean(nullable: false, defaultValue: false)); 
```

# jquery-animate - jQuery animate - toggle between left and right values

> ID：13295168
> 
> 赞同：0
> 
> 时间：2012-11-08T18:14:04.957
> 
> 标签：jquery-animate, jquery

I'm looking to slide a div on and off screen, from the right hand side, on click of a link (.toggle-caption)

I had this working fine when both values were based on their position from the right, e.g.

```
$('.toggle-caption').toggle(
        function()
            {
            $('#caption-box').animate({right: "480px"}, 500);
            },
        function()
            {
            $('#caption-box').animate({right: "-2000px"}, 500);
            }
); 
```

However, when attempting to toggle between a left and a right value, it stops working:

```
$('.toggle-caption').toggle(
        function()
            {
            $('#caption-box').animate({left: "480px"}, 500);
            },
        function()
            {
            $('#caption-box').animate({right: "-2000px"}, 500);
            }
    ); 
```

#caption-box is 2000px wide, but only a portion of this will be displayed (depends on screen resolution). However, when sliding in, it must always land 480px away from the edge of its containing div. Hence I needed a 'left' value.

Any help appreciated!

RT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:16:44.940

I ended up using the following, which works fine:

```
$('.toggle-caption').toggle(
    function()
        {
        $('#caption-box').animate({left: "480px"}, 500);
        },
    function()
        {
        $('#caption-box').animate({left: "100%"}, 500);
        }
); 
```

Note that jQuery v 1.8.2 was used - Webkit browsers didn't seem to like toggling between px and percentage values in earlier versions!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:21:06.463

`toggle()` used that way is deprecated so you should probably use a flag instead, and the `data()` function would make that rather easy. Also, animating to 480px from the left can be done by just subtrackting that value from the window width to get the value you would need to use it with "right" instead:

```
$('.toggle-caption').data('state', true).on('click', function() {
    var state = $(this).data('state'),
        dist  = state ? $(window).width() - 480 : -2000;
    $('#caption-box').stop(true, true).animate({right: dist}, 500);
    $(this).data('state', !state);
}); 
```

# qt-creator - Qt Creator 缺少文件夹/文件结构

> ID：13295169
> 
> 赞同：4
> 
> 时间：2012-11-08T18:14:07.087
> 
> 标签：qt-creator, file-structure

Qt 似乎不像其他 IDE 通常那样在文件夹中构造文件，例如 netbeans 将头文件放在头文件夹中，将源文件放在源文件夹中等等。我已经看到这是在 Qt 中完成的，但我不知道为什么它不在我的计算机上。

我已经查看了选项，据我所知，没有选项。

有没有我错过的选项，或者是否有其他解决方案可以解决我的问题？

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T18:52:09.833

这实际上并没有改变文件夹结构，但它模拟了 Qt 将头文件和源文件保存在不同的文件夹中。

当我第一次下载它时，它关闭了这个设置，所以它看起来很乱，但是我想出了一个设置，它旁边是“项目”（最有可能在构建和调试下），每当点击它时，我都会看到一个单击“简化树”设置，我只是取消选中它。

**简而言之：确保未选中简化树选项。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:19:31.007

Qt 是一个库，而不是 IDE。所以我假设你实际上是在谈论 Qt Creator。

Creator 不会为您的文件强制执行任何结构，这是正确的。只需在您想要的地方创建它们:-) 我真的不明白这怎么可能是个问题。

在 C/C++ 项目中，文件结构的变化往往比在 Java 和其他项目中更广泛。因此，通过强制执行一种文件结构，您势必会破坏许多项目，并使其更难与 Creator 一起使用。

# android - 如何将两个 TextView 与 CheckBox 合并？

> ID：13295171
> 
> 赞同：0
> 
> 时间：2012-11-08T18:14:10.560
> 
> 标签：android, sqlite, listview, checkbox, textview

我想问我如何将我的两个 TextView 与复选框合并。场景是当我将值放在我的两个 EditText 上时，这些值将分别显示在两个 TextView 上，但我希望在我点击保存时自动添加复选框。我希望你能得到我的问题。这是我的代码：

**适配器**

```
public String getData(String columnIndex) {
    // TODO Auto-generated method stub

    String[] columns = new String[]{ KEY_ITEMID, KEY_ITEM, KEY_QTY};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String resultQty = "";

    int iQty = c.getColumnIndex(columnIndex);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            resultQty = resultQty + c.getString(iQty) + "\n";
        }

    return resultQty;
} 
```

**我的 onCreate 方法**

```
 TextView tv = (TextView) findViewById(R.id.tvSQLinfo);
        Grocery info = new Grocery(this);
        info.open();
        String data = info.getData(KEY_ITEM);
        info.close();
        tv.setText(data);

        TextView tvQty = (TextView) findViewById(R.id.tvItemQty);
        Grocery infoQty = new Grocery(this);
        infoQty.open();
        String dataQty = infoQty.getData(KEY_QTY);
        infoQty.close();
        tvQty.setText(dataQty);

        CheckBox android = (CheckBox) findViewById(R.id.chkStat);
        android.setChecked(false);
        onClick(tvQty); 
```

**我的 XML 代码**

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

        <TextView
            android:text="@string/tvSQLinfo"
            android:id="@+id/tvSQLinfo"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:paddingLeft="20dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <TextView
            android:text="itemQty"
            android:id="@+id/tvItemQty"
            android:paddingLeft="20dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
        </TextView>

        <CheckBox 
            android:id="@+id/chkStat"
            android:paddingLeft="30dp"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:text=""/>
   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:23:10.033

如果我理解正确，您可以添加`android:visibility ="gone" or "invisible"`到您的 XML，然后将其设置为在您的 onClick() 'nameOfCheckbox.setVisibility(Checkbox.VISIBLE)' 中可见

# arrays - Rust 中指向行的指针

> ID：13295173
> 
> 赞同：2
> 
> 时间：2012-11-08T18:14:19.053
> 
> 标签：arrays, pointers, multidimensional-array, rust

如何在 Rust 中获取指向二维数组第一行的指针？以及如何将指针传递给函数，以便可以更改行中的值？

这就是我制作数组的方式：

```
let state = [mut [mut 0u8, ..4], ..4]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T06:46:43.713

这应该这样做：

```
fn change_one_row(x: &[mut u8]) {
   x[0] = 5;
}

fn main() {
    let state = [mut [mut 0u8, ..4], ..4];
    change_one_row(state[2]);
    io::println(fmt!("%u", state[2][0] as uint))
} 
```

# hibernate - 休眠：渴望获取/帮助我度过我的休眠噩梦

> ID：13295178
> 
> 赞同：1
> 
> 时间：2012-11-08T18:14:40.463
> 
> 标签：hibernate, hql, fetch, lazy-evaluation, eager

我正在尝试使用以下 HQL 语句返回对象列表：

```
return getHibernateTemplate().findByNamedParam("Select distinct response.user
    from Survey survey
    inner join fetch survey.surveyDates surveyDate
    inner join fetch surveyDate.responses response
    where survey.id = :surveyId)", "surveyId", surveyId); 
```

以下错误让我发疯：

> HTTP 状态 500 - 查询指定连接提取，但提取关联的所有者不在选择列表中

所以我在我的代码中尝试了没有“fetch”这个词。然后我的返回列表是空的。

应用程序就像涂鸦，数据库看起来像这样：

调查有一个列表调查日期调查
日期有一个响应列表
响应有一个属性用户

我的任务是：该方法有一个参数surveyId 并返回所有响应它的用户。所以我们要一直往下走Survey-->surveyDates-->responses-->user

我想这对你来说很容易，我是 SQL 的新手，甚至是 Hibernate 的新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:59:47.227

您的查询似乎不正确：如果您期望用户列表，您应该从用户开始您的子句（但由于您没有提供任何映射，我只是希望您在用户和响应之间建立反比关系等等）

像这样的东西应该会更好：

```
from user u
inner join u.responses as response 
inner join response.surveydates as surveydates
inner join surveydates.survey as survey
where survey.id = :surveyId 
```

# java - 如何将每个子类的集合从同一层次结构映射到一个拥有类？

> ID：13295182
> 
> 赞同：2
> 
> 时间：2012-11-08T18:14:44.120
> 
> 标签：java, jpa-2.0, single-table-inheritance, class-table-inheritance

有谁知道如何使用由 Hibernate 4.0.0.Final 支持的 JPA 2.0 注释将同一层次结构中的每个子类的集合映射到一个拥有的类上？

有点复杂，所以这里有一个例子。层次结构类如下所示：

```
 @Entity
    @Cacheable(true)
    @Table(name = "hierarcicals")
    @Inheritance(strategy=InheritanceType.SINGLE_TABLE)
    @DiscriminatorColumn(name = "class", discriminatorType = DiscriminatorType.STRING)
    public abstract class MySuperClass {
    ... 
```

```
 @Entity
    @DiscriminatorValue("SubClassOne")
    public class SubClassOne extends MySuperClass {
    ...

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "owner")
    private Owner owner; 
```

```
 @Entity
    @DiscriminatorValue("SubClassTwo")
    public class SubClassTwo extends MySuperClass {
    ...

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "owner")
    private Owner owner; 
```

这一切看起来都很好，当我持久化对象时，我可以看到它们以正确的鉴别器和正确的所有者进入数据库。

这是我的“拥有”类——它的注释没什么特别的：

```
@Entity
@Cacheable(true)
@Table(name = "owner")
public class Owner  {
...
@OneToMany(mappedBy = "owner", fetch = FetchType.LAZY)
private List<SubClassOne> subClassOnes;

@OneToMany(mappedBy = "owner", fetch = FetchType.LAZY)
private List<SubClassTwo> subClassTwos;
... 
```

2 List 集合具有吸气剂。当我调用 getSubClassOnes() 时，我得到一袋所有关联实体，作为 SubClassOne 类型，即使是那些在数据库中具有 SubClassTwo 鉴别器的实体。当我调用 getSubClassTwos() 时，我得到似乎是一袋 SubClassTwos，但是当我在运行时迭代集合时，它会爆炸

> 初始化（AbstractPersistentCollection.java:379）[hibernate-c at org.hibernate.collection.internal.AbstractPersistentCollection.read（AbstractPersistentCollection.java:112）[hibernate-core-4。在 org.hibernate.collection.internal.PersistentBag.iterator(PersistentBag.java:266) [hibernate-core-4.0.0.Final.jar:4.0.0.Final]

我想要发生的是 getSubClassOnes() 返回一个集合，其中包含与具有类 SubClassOnes 的所有者相关联的集合，而 getSubClassTwos() 返回一个具有相关 SubClassTwos 的集合。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T08:36:16.677

对我们来说，这是通过将`targetEntity`属性添加到`@OneToMany`注释中来解决的，指向超类，如下所示：

```
@OneToMany(mappedBy = "owner", fetch = FetchType.LAZY, targetEntity = MySuperClass.class)
private List<SubClassOne> subClassOnes;

@OneToMany(mappedBy = "owner", fetch = FetchType.LAZY, targetEntity = MySuperClass.class)
private List<SubClassTwo> subClassTwos; 
```

# jquery - JQuery 文件上传插件、Internet Explorer 和 IFrame 传输

> ID：13295184
> 
> 赞同：2
> 
> 时间：2012-11-08T18:14:47.157
> 
> 标签：jquery, iframe, file-upload, knockout.js, internet-explorer-9

我正在使用[这个插件](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)（只是基本版本），并且正在利用所有简洁的功能进行进度更新，以使用我自己的 UI（使用 Knockout.js 和 Twitter Bootstrap）。这是上下文的一些代码片段：

```
 // The file is sent to an ASP.NET MVC Web Api service to do all the business logic/DB stuff
    uploadUrl = http://web.api.url/?apikey=key

    $("#fileUpload" + "@index").fileupload({
        headers: {
            'Authorization': "@Html.AccessToken()",
            'Accept': $.support.ajax ? "application/json" : "text/plain"
        },
        url: uploadUrl,
        add: function (e, data) {
            $.each(data.files, function (index, file) {
                // add to KO viewmodel
            });
            data.submit();
        },
        fail: function (e, data) {
            var error = data.errorThrown;
            var text = data.textStatus;
        },
        done: function (e, data) {
            // do some more viewmodel operations
        },
        progress: function (e, data) {
            var progressPercentage = parseInt(data.loaded / data.total * 100, 10);
            // update viewmodel
        }
    }); 
```

该`#fileUpload<Index>`元素是文件输入

这在 Chrome、FF 和 Safari 中效果很好，但在 IE 中却不行（出乎意料）。尝试从我的文件输入中选择一个文件时，我得到一个非常奇怪的响应 - 浏览器打开一个下载对话框？！

```
Do you want to open or save ?apikey=key (61 bytes) from webapiserver? 
```

我尝试在我的 fileupload 事件侦听器中使用带有断点的 IE 脚本调试器，但它甚至从来没有进入过它。我在我的研究中看到了各种帖子和文章，表明应用程序/json 的接受类型会搞砸 IE，所以我的代码中有一个条件来尝试处理它。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-13T09:40:24.083

您的问题出在服务器端。

IE 有点笨，他接受服务器提供的第一个内容类型，所以你总是需要记住首先尝试用`text/plain`or回答`text/html`。

然而[，jQuery 插件的常见问题解答中提到了](https://github.com/blueimp/jQuery-File-Upload/wiki/Frequently-Asked-Questions#why-does-internet-explorer-prompt-to-download-a-file-after-the-upload-completes)这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T14:08:27.493

这是对我有用的 C# 中修复的实现

```
 var result = Json(statuses, JsonRequestBehavior.AllowGet);

    if (HttpContext.Request.AcceptTypes.Contains("application/json")) 
    {
        result.ContentType = "application/json";
    } 
    else // Hack for IE9 
    {
        result.ContentType = "text/plain";
    }

    return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:11:42.187

这是因为返回的数据是application/json。您需要服务器指定内容类型 text/html 以防止 IE 将其解释为下载。

# php - 如何保护只能由 Codeigniter 或原始 PHP 中的某些用户下载的文件？

> ID：13295185
> 
> 赞同：0
> 
> 时间：2012-11-08T18:14:49.593
> 
> 标签：php, codeigniter

我编写了访问级别/组（未登录、工作人员、经理、管理员）很少的 Web 应用程序。

对于访问控制，我在这里使用了类似于最佳答案的东西：

[将特定页面限制为仅在 Codeigniter 中登录用户的最佳做法是什么？](https://stackoverflow.com/questions/3819275/what-is-the-best-practice-for-restricting-specific-pages-to-logged-in-users-only)

现在我必须创建下载页面，该页面只允许下载特定文件允许的组。现在我只为允许的用户显示链接，但我认为我必须以某种方式隐藏真实的文件位置，因为浏览器会记住文件 URL，任何人都可以在注销后毫无问题地下载文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:17:47.517

您没有链接到真实文件。您链接到使用访问令牌进行验证的脚本，然后传递文件。看到这个问题：

[PHP将文件句柄传递给用户，以便文件下载并保存到他们的机器上](https://stackoverflow.com/questions/539548/php-pass-file-handle-to-user-so-that-file-downloads-saves-to-their-machine)

下载后，您可以使令牌过期或仅记录用户下载的次数并在那里应用适当的限制。

此外，将您的文件嵌套在 Web 根目录下，或者确保您无法在选择存储它们的任何位置直接访问它们

是的，CI 确实有一个下载助手：

[https://www.codeigniter.com/userguide3/helpers/download_helper.html](https://www.codeigniter.com/userguide3/helpers/download_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:19:43.877

您可以将 sessionID 传递给下载脚本。下载脚本可以将该 sessionID 与当前 sessionID 进行比较，以确保它有效。如果有效，则允许下载。

# javascript - jQuery/JS：有没有办法只有一个 tag that will serve for multiple images?

> ID：13295186
> 
> 赞同：0
> 
> 时间：2012-11-08T18:14:50.597
> 
> 标签：javascript, jquery, html

我有几张图片

```
<img usemap="#slideMap_branches"  src="branches.png" width="890" height="270" alt="Slide 4">
<img usemap="#slideMap_order" src="order.png" width="890" height="270" alt="Slide 2">
<img usemap="#slideMap_contact"  src="contact.png" width="890" height="270" alt="Slide 6"> 
```

我也有几个`<map>`标签

```
<map name="slideMap_branches">
<area shape="poly" coords="500,233,378,231,378,278,-3,279,1,0,906,-1,905,281,499,277" href="javascript:alert('# branches');" target="_self" alt="slideMapPoly" />
</map>
<map name="slideMap_order">
    <area shape="poly" coords="500,233,378,231,378,278,-3,279,1,0,906,-1,905,281,499,277" href="javascript:alert('# order');" target="_self" alt="slideMapPoly" />
</map>
<map name="slideMap_contact">
    <area shape="poly" coords="500,233,378,231,378,278,-3,279,1,0,906,-1,905,281,499,277" href="javascript:alert('# contact');" target="_self" alt="slideMapPoly" />
</map> 
```

基本上，所有地图区域的坐标都相同，只是HREF属性不同，指向不同的链接，而不是同一个链接。

我想知道是否可以有一种 javascript/jquery 方式只有一个`<map>`和`<area>`标记，当用户单击图像时，浏览器会识别单击了哪个图像以及该做什么。

我尝试了几种方法，但始终无法获得图像 ID/名称/src。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:46:04.440

所以你想在 3 张不同的图片上拥有相同的可点击区域，并让每张图片链接到不同的东西？

看看我在下面做了什么。它完成了工作。也许有更好的方法？注意图像有一个点击事件，当点击地图区域时，会设置一个标志来识别点击了图像的正确部分。在我有警报（“点击”+ T.src）的地方，您将根据点击的图像（基于src，或者可能是自定义属性）来决定做什么。

```
<html>
    <body>
        <script type="text/javascript">
            var linkout = false;

            function LinkOut() {
                linkout = true;
            }

            function imgClick(T) {
                if (linkout) {
                    alert("clicked on " + T.src);

                }
                linkout = false;
            }
        </script>

        <map name="slideMap">
            <area shape="poly" coords="500,233,378,231,378,278,-3,279,1,0,906,-1,905,281,499,277" href="javascript:LinkOut();" target="_self" alt="slideMapPoly" />
        </map>
        <img usemap="#slideMap"  src="branches.png" width="890" height="270" alt="Slide 4" onclick="imgClick(this);">
        <img usemap="#slideMap" src="order.png" width="890" height="270" alt="Slide 2" onclick="imgClick(this);">
        <img usemap="#slideMap"  src="contact.png" width="890" height="270" alt="Slide 6" onclick="imgClick(this);">
    </body>
</html> 
```

# c - 通过打开和读取来检测可用设备

> ID：13295189
> 
> 赞同：3
> 
> 时间：2012-11-08T18:15:20.760
> 
> 标签：c, linux

假设我打开设备。

```
int fd,fd1;
fd_set readfds;
int maxfd;

fd = open("/dev/ttyUSB0");
if(fd<0) printf("device not available\n");//How can i Wait here until device becomes available?.. Also when it shows device not available it will just continue on doing select.
printf("device /dev/ttyUSB0 available\n"); 

fd1 = open("/dev/ttyUSB1");
if(fd<0) printf("device not available\n");//How can i Wait here until device becomes available?
printf("device /dev/ttyUSB1 available\n");

maxfd = MAX(fd,fd1)+1; 
```

现在我将它们添加到 fd_set；

```
while(1){

FD_SET(fd,&readfds);
FD_SET(fd1,&readfds);

select(maxfd, &readfds, NULL, NULL, NULL);

if(FD_ISSET(fd,&readfds){

// Read the device. If there is nothing to read then device has been removed or something happend.

}

if(FD_ISSET(fd1,&readfds){

// Read the device. If there is nothing to read then device has been removed or something happend.

}

} 
```

现在我如何检查设备现在可用时。说当我打开它时设备是否不可用。我如何监控它以检查它何时被插入？我不想使用 udev/libudev.h。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:35:33.217

常见的方法是尝试向设备写入一些数据并读取响应。如果预期响应，则表示设备已连接，否则未连接。

例如，当扫描连接调制解调器的 COM 端口时，应写入`"ATE0\r"`COM 端口并返回调制解调器响应`"OK"`。这意味着调制解调器连接到该 COM 端口。

同样的想法也适用于 USB 设备。只有协议更复杂，请求/响应数据在设备之间可能更复杂。

# cocos2d-iphone - 应用内购买 cos2d

> ID：13295194
> 
> 赞同：1
> 
> 时间：2012-11-08T18:15:41.400
> 
> 标签：cocos2d-iphone, in-app-purchase

我正在尝试让 InApp 购买页面与 cocos2d 一起使用。我正在尝试找出一种在我的应用程序委托中注册 rootviewcontroller 的方法。但是，我看到 NavigationRootcontroller 已经存在，如果我用新的 RootViewcontroller 对象替换它，我的游戏控件将停止工作。

我想我无法弄清楚如何在不弄乱现有 NavigationRootcontroller 的情况下让 RootViewcontroller 与 cocos2d 一起工作。

我已经扔掉了 Ray Wendelrich 的教程——但是仍然无法连接 cocos2d 和 RootViewcontroller 之间的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:26:20.420

您可以在 cocos2d 2.0 中将您的 inAp 购买按钮添加到导航控件中

```
 AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
  [app.navController.view addSubview:mIndicator]; 
```

就我个人而言，我不建议在基于 OpenGL 的应用程序中使用 UIKit 中的任何 UI 元素。使用图形按钮。

![在此处输入图像描述](../Images/21414c66ef2b070002af4810462ce0ed.png)

# java - 如何在原生 android 应用程序中播放 rtmp 视频流？

> ID：13295199
> 
> 赞同：2
> 
> 时间：2012-11-08T18:15:56.833
> 
> 标签：java, android

我在一个项目中，我必须从链接播放电视频道的视频流。但问题是我必须在本机应用程序中播放视频，而不是在 web 视图中。据我所知，它只是实现了一个调用的 API `VITAMIO`，它对播放 http、mms 等协议有很大帮助，但无法播放 RTMP 视频。我还研究并发现基本的android`videoview`也无法播放RTMP，所以我只想知道有没有可用的API或者有什么方法可以在支持RTSP、RTMP、MMS、HTTP的原生android应用程序中播放视频ETC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:20:15.997

您可以使用 vitamio，这是插件本机应用程序播放流 rmpt，http，...非常好。它对我来说很好用。我想你通过 VLC 检查链接频道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:26:24.197

RTMP 只是闪存。VITAMIO 播放器可能会在某些设备上运行，而在其他设备上则根本无法运行。我不确定您使用的是插件版本还是他们播放器的许可版本。我与它的互动很小，因为我并没有给我留下深刻的印象（当时......我会在今年晚些时候回去再试一次）

你可以做什么：

1.  创建/使用您自己的 Flash 播放器
2.  创建一个包含 webview 的活动
3.  在android上添加对flash插件的检测。
4.  让 webview 加载你的 flash swf 文件

这里有一些代码来检测 flash 并加载一个 url（如果有）：

```
 String url = "http://www.example.com/movie.swf";

    try {
        PackageManager pm = getPackageManager();
        ApplicationInfo flash_ai = pm.getApplicationInfo("com.adobe.flashplayer", 0);
        int flash_version = pm.getPackageInfo("com.adobe.flashplayer", 0).versionCode;
        if (flash_ai != null && flash_version != 0 && flash_version >= 103000000) {
            flashInstalled = true;
        }
    } catch (NameNotFoundException ex) {
        flashInstalled = false;
    }
    if (!flashInstalled) {
        displayNeedFlashDialog();

    } else {
        WebView wvBrowser = new WebView(this);
        wvBrowser.requestFocus();
        wvBrowser.setClickable(true);
        wvBrowser.clearCache(true);
        wvBrowser.setVerticalScrollBarEnabled(false);
        wvBrowser.setHorizontalScrollBarEnabled(false);
        wvBrowser.getSettings().setPluginsEnabled(true);
        wvBrowser.getSettings().setJavaScriptEnabled(true);
        wvBrowser.setWebChromeClient(new WebChromeClient() {
            @Override
            public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result) {
                result.confirm();
                return true;
            }

            ;
        });
        setContentView(wvBrowser, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        wvBrowser.loadUrl(url);
    } 
```

# python - 如何从现有的“正常” rss 创建新的 pubsubhub rss？

> ID：13295205
> 
> 赞同：0
> 
> 时间：2012-11-08T18:16:41.743
> 
> 标签：python, rss, pypi, websub

我想通过处理我无法轻易更改的现有 RSS 提要，使用 pubsubhubbub 创建一个新的实时 RSS 提要。有没有一种工具或方法可以让这变得简单？我要处理的 RSS 提要不提供 pubsubhubbub 链接，我假设我必须每 N 秒轮询一次。是否有现成的解决方案或示例，最好是在 Python 中？（如果您有兴趣，我想获得 pypi.python.org 更新的实时提要，可由任意其他服务器使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:02:15.150

我知道的唯一选择（不包括自己编写）是[http://superfeedr.com/](http://superfeedr.com/)，但似乎他们也在向订阅者收费，至少在他们不托管的平台上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:49:03.140

根据[MvL 在 Zope Tagung 2010 上演讲的幻灯片](http://www.zope.de/tagung/Dresden_2010/shop-apis_mvl.pdf)（第 19 页），PyPI在[http://pubsubhubbub.appspot.com上发布了最后一](http://pubsubhubbub.appspot.com)[小时](http://pypi.python.org/pypi?%3aaction=lasthour)的更改的提要。

另见[http://mail.python.org/pipermail/catalog-sig/2012-July/004551.html](http://mail.python.org/pipermail/catalog-sig/2012-July/004551.html)

# saml - 如何使用元数据文件 (saml2)

> ID：13295206
> 
> 赞同：8
> 
> 时间：2012-11-08T18:16:45.673
> 
> 标签：saml

我正在开发一个需要集成 SAML2.0 的项目。我突然被投入到这个项目中，我需要让它发挥作用。这是背景：我们创建了文件并希望客户公司使用 SAML2 进行集成以访问我们的网站。我们已经向他们发送了元数据文件。

现在客户公司已经发送了他们的元数据文件。我不知道如何以及如何处理该文件。任何帮助将不胜感激。

ASP.NET，框架 4.0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T18:41:22.750

元数据文件基本上为您提供客户的信息。如 entityID、credential 等。如果它是 IdP，那么它还包含几个 URL，以便您知道在哪里发送不同的请求，例如登录请求、属性查询请求。您需要将此元数据提供给您的 SAML 组件，以便它知道应该与哪个客户端通信。

另一个主要目的是在 SP 和 IdP 之间建立信任关系。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-09T16:31:16.117

这是一个老问题，但我想为.NET 添加一些额外的信息和资源。

SAML 元数据用于在服务提供者和身份提供者之间交换配置信息，反之亦然。这些信息可以包括：

*   绑定位置
*   机构名称
*   联系人
*   单点登录网址
*   单一登出网址

可以对元数据进行签名和加密，以便安全地发送信息。对方可能需要相应的公钥对其进行验证和解密，然后可以用来理解和建立与SP或IdP的连接。

您可以在以下博客文章中看到更多信息：

*   [http://samlcomponent.net/constructing-saml-metadata-xml-for-single-sign-on-idp/](http://samlcomponent.net/constructing-saml-metadata-xml-for-single-sign-on-idp/)
*   [http://samlcomponent.net/how-to-create-saml-metadata-xml-for-service-provider/](http://samlcomponent.net/how-to-create-saml-metadata-xml-for-service-provider/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-17T04:59:04.383

安全断言标记语言 (SAML) 是一种标准，用于根据用户在另一个上下文中的会话将用户登录到应用程序。与使用用户名/密码登录相比，此单点登录 (SSO) 登录标准具有显着优势：

1.无需输入凭证

2.无需记住和更新密码

3.没有弱密码

使用 SAML SSO 登录可以轻松管理一棵树中的所有应用程序。

```
 How actually SAML works: 
```

用户使用 Intranet 上的链接、书签或类似的链接访问远程应用程序，然后加载应用程序。

应用程序识别用户的来源（通过应用程序子域、用户 IP 地址或类似地址）并将用户重定向回身份提供者，要求进行身份验证。这是身份验证请求。

用户要么与身份提供者有一个现有的活动浏览器会话，要么通过登录身份提供者建立一个。

身份提供者以包含用户用户名或电子邮件地址的 XML 文档的形式构建身份验证响应，使用 X.509 证书对其进行签名，并将此信息发布给服务提供者。

已经知道身份提供者并具有证书指纹的服务提供者检索身份验证响应并使用证书指纹对其进行验证。

建立用户的身份并为用户提供应用程序访问权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T13:20:37.130

查看[元数据 SAML 2.0 规范](http://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf)以检查您的实现必须读取哪些元素。

如果您正在寻找 SAML2 .Net Tookit，请查看[stackoverflow 的这个线程](https://stackoverflow.com/questions/1337495/saml-library-component-for-net)

还可以查看 SAML 开源实现，了解其他人之前是如何解决此问题的：

*   [SimpleSAMLphp](http://simplesamlphp.googlecode.com/svn/trunk/)（PHP 实现 Idp/SP）。（[元数据解析器](http://simplesamlphp.googlecode.com/svn/trunk/lib/SimpleSAML/Metadata/SAMLParser.php)）
*   Shibboleth [IdP](http://svn.shibboleth.net/view/java-shib-idp2/trunk/) (Java) ( [opensaml2](http://svn.shibboleth.net/view/java-shib-idp2/trunk/) ) / [SP](http://svn.shibboleth.net/view/cpp-opensaml/trunk/) (C)
*   spring-security-saml：[SP](https://github.com/SpringSource/spring-security-saml)（Java）（[元数据文件](https://github.com/SpringSource/spring-security-saml/tree/master/saml2-core/src/main/java/org/springframework/security/saml/metadata)）
*   [Jboss](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.picketlink/picketlink-fed/2.0.1.final/org/picketlink/identity/federation/core/parsers/saml/metadata/SAMLEntitiesDescriptorParser.java) (Java)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T21:22:25.107

元数据只不过是包含 SAML 实现与主机通信所需的所有信息的 xml 文件。您可以从此元中提取信息以获得所需的所需信息。像公钥/私钥一样。我希望您也使用证书以安全的方式与主机交谈。与未知主机系统握手时需要此密钥。

# solr - 我从 Solr Admin UI 错误地卸载了默认的 Solr Collection

> ID：13295208
> 
> 赞同：5
> 
> 时间：2012-11-08T18:16:58.340
> 
> 标签：solr, full-text-search, search-engine, lucene

如何再次将其重新加载到 Solr 中？如果我尝试启动 Solr Admin UI，我会收到以下消息：

没有运行 SolrCore。目前使用 Solr Admin UI 至少需要一个 SolrCore。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T18:54:26.770

您将需要修改`<cores>`solr.xml 文件中的条目，该文件位于运行 Solr 实例的根目录中，并添加至少一个`<core>`条目。下面是 Solr 发行版附带的示例。

```
 <cores adminPath="/admin/cores" defaultCoreName="collection1">
         <core name="collection1" instanceDir="." />
       </cores> 
```

您需要根据本地设置进行修改。[您可以在CoreAdmin Solr Wiki](http://wiki.apache.org/solr/CoreAdmin)页面中参考有关核心及其设置的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T10:40:26.130

您可以运行：`http://127.0.0.1:8080/solr/admin/cores?action=RELOAD&core=collection1` 请注意您的 solr 服务器的路径和端口是正确的。

# objective-c - 在类方法中调用实例变量

> ID：13295212
> 
> 赞同：0
> 
> 时间：2012-11-08T18:17:06.857
> 
> 标签：objective-c, class

```
//SecondPage.h
@property (nonatomic, copy) NSString *secondLabelText;
+(SecondPage *) newAlloc;
+(id) totalOpen;
+(void)setSecondLabelText;

//SecondPage.h
@synthesize secondLabelText;   //DOESNT WORK.
NSString* secondLabelText;   //DOES WORK. 

+(void) setSecondLabelText
{
    secondLabelText = @"TEST";
}

+(id) totalOpen
{
    [self setSecondLabelText];
    return secondLabelText;
} 
```

我希望能够使用类方法将一个类的变量“复制”到另一个类中。在这种情况下，我使用了 [SecondPage totalOpen]，但唯一的问题是我只能在类方法 setSecondLabelText 中设置 secondLabelText，如果它已经设置，我将无法调用它。有没有一种方法可以为一个类返回一个已经设定的值，或者一种不同的方法来实现我想要实现的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:23:09.713

我不清楚您要实现什么，但类方法没有您似乎相信的意义上的实例。将变量从一个实例复制到另一个实例的类方法必须将两个实例作为参数。在您的代码中，您可以访问`NSString *secondLabelText`，因为您已将其声明为**全局**变量。它与类的每个实例所具有的属性完全无关，除了您混淆地给它赋予了相同的名称。

# jquery - JQuery Mobile 在新标签页中自动打开 URL

> ID：13295213
> 
> 赞同：0
> 
> 时间：2012-11-08T18:17:09.697
> 
> 标签：jquery, html, mobile, jquery-mobile

我正在尝试创建一个函数以在几秒钟后自动打开 URL。到目前为止我尝试过的（现在在我的 android 浏览器和 chrome 中工作）是下面的代码：

```
 $(document).ready(function() {

      setTimeout(function() { 
       'window.open("http://google.com")', 2000); 
  });
}); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:21:25.920

一方面，您的 setTimeout 调用已损坏：

```
$(document).ready(function() {

    setTimeout(function() { 
       window.open("http://google.com"); 
    }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:25:45.193

你的`setTimeout`电话不太正确——你实际上只是声明了一个字符串和一个数字，然后什么都不做。更改如下：

```
$(document).ready(function() {
    setTimeout(function() { 
        window.open("http://google.com");
    }, 2000);
}); 
```

其次，请参阅[window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)的文档：它接受第二个参数，该参数确定要打开的窗口的名称。如果将其设置为`_blank`，则您是在告诉浏览器打开一个新窗口（或选项卡）而不是替换当前页面。

```
$(document).ready(function() {
    setTimeout(function() { 
        window.open("http://google.com", "_blank");
    }, 2000);
}); 
```

但是，您*可能会*遇到浏览器的弹出窗口阻止程序的问题。通常，应在`click`事件之后启动打开新窗口或选项卡。

# facebook - 贴在墙上的图片消失了

> ID：13295217
> 
> 赞同：1
> 
> 时间：2012-11-08T18:17:26.923
> 
> 标签：facebook, image

我正在使用以下命令发布一些图像：

```
 $url_facebook  = "https://api.facebook.com/method/stream.publish?message=".$messaggio."&attachment={\"name\":\"".$title."\",\"href\":\"".$action_link."\",\"caption\":\"".$caption."\",\"description\":\"".$description."\",\"media\":[{\"type\":\"image\",\"src\":\"".$image."\",\"href\":\"".$action_link."\"}]}&action_links=[{\"text\":\"".$link_name."\",\"href\":\"".$action_link."\"}]&target_id=".$target_uid."&uid=".$source_uid."&".$site_token."";
    simplexml_load_file("".$url_facebook.""); 
```

我在墙上（一组）发布的图像是从 PHP 动态生成的。

这就是发生的事情：

*   我生成图像并将其保存到文件夹
*   我将其与代码一起发布
*   我退出脚本
*   下次运行脚本（每小时）时，我会删除所有旧创建的图像，而不是重复 wath sayid

我注意到刚刚发布的图像在 FB 墙上存在并存在

但

下次我启动脚本时（因此图像从我的网站中删除）它们也会从 facebook 中消失

我知道图片上传到 Facebook，所以我的空间不再需要它们了....

不是吗？

我也有这个疑问，因为如果我在 facebook 上看到红色 x（代替图片）

我右键单击“属性”，我可以阅读：

```
"https://s-platform.ak.fbcdn.net/www/app_full_proxy.php?app=164286063695472&v=1&size=z&cksum=17f253305254403324260843c7a6989a&src=http%3A%2F%2Fwww.graficisismici.it%2FV6_00%2Ffacebook%2Ffacebook_link_285790.jpg%3F285790" 
```

所以看起来它真的是原始图像的链接你能解决我的疑问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:44:44.323

同时我修改了脚本以使用新的 Graph Api

```
<?php

    $user = null;

    $facebook = new Facebook(array(
        'appId' => FACEBOOK_APP_ID,
        'secret' => FACEBOOK_SECRET,
        'cookie' => true
    ));

    $user = $facebook->getUser(); // Get the UID of the connected user, or 0 if the Facebook user is not connected.

    if($user == 0) {

            /**
             * Get a Login URL for use with redirects. By default, full page redirect is
             * assumed. If you are using the generated URL with a window.open() call in
             * JavaScript, you can pass in display=popup as part of the $params.
             * 
             * The parameters:
             * - redirect_uri: the url to go to after a successful login
             * - scope: comma separated list of requested extended perms
             */

            $login_url = $facebook->getLoginUrl($params = array('scope' => "publish_stream"));

            echo ("<script> top.location.href='".$login_url."'</script>");
    } else {
        $user_message = "Message";
        $titolo = "Titolo";
        $caption = "Caption";
        $link_name = "Link Name";
        $action_link = "Action Link";
        $testo = "Text";
        $image = "Image Link";

        $target_uid = "XXXXXXXX"; // ID where to publish    

        //HTTP POST request to PAGE_ID/feed with the publish_stream
        $post_url = '/'.$target_uid.'/feed';

            try {
                    $params = array(
                        'message' => $user_message,
                        'name' => $titolo,
                        'caption' => $caption,
                        'link' => $action_link,
                        'description' => $link_name,
                        'picture' => $image,
                        'actions' => array(
                                            array(
                                                'name' => $testo,
                                                'link' => $action_link
                                            )
                                        )  
                    );

                    $post = $facebook->api($post_url,"POST",$params);
                }
                catch (FacebookApiException $e) {
                   $result = $e->getResult();
                }

    }

?> 
```

我只是想澄清一下图像问题。图像必须仍然存在吗？或者一旦发布，我可以删除它们，因为它们仍然存在于 Fb 上？

我的问题源于我在我网站的错误日志上看到（在使用这篇文章顶部的旧脚本时）一行 404 错误（与从 Fb 搜索的丢失图像有关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T08:06:05.247

> 我知道图片上传到 Facebook，所以我的空间不再需要它们了....

不是这种情况。Facebook 只是将您的内容缓存在他们的 CDN 中。如果您删除源照片，当内容从缓存中掉出时，他们刷新/重新填充缓存的尝试将失败，您的用户将获得一个损坏的图像图标。

> 图像必须仍然存在吗？或者一旦发布，我可以删除它们，因为它们仍然存在于 Fb 上？

你不应该删除它们。

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：org/bouncycastle/crypto/PBEParametersGenerator

> ID：13295218
> 
> 赞同：0
> 
> 时间：2012-11-08T18:17:27.000
> 
> 标签：java

我正在使用sevenzipjbinding api和crypto api，当我运行课程时，我有这个：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：org/bouncycastle/crypto/PBEParametersGenerator

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:22:10.480

[从http://www.bouncycastle.org/latest_releases.html](http://www.bouncycastle.org/latest_releases.html)下载包后复制 jars并将它们放在你的类路径中。

# windows - Windows 8：使用后台任务激活应用程序

> ID：13295220
> 
> 赞同：1
> 
> 时间：2012-11-08T18:17:35.843
> 
> 标签：windows, winapi

我正在使用 c# 做一个 Windows 8 应用程序。如果应用程序处于非活动状态，则应用程序将进入挂起状态，我正在尝试根据外部事件将应用程序置于最前面。所以我在这个应用程序中使用了一个后台任务来监控外部事件。事件发生后，我可以将更新发送到应用程序，但无法将其带到前面。任何指针都会有所帮助。

# sql - 组合两个 SELECT 语句时遇到问题

> ID：13295221
> 
> 赞同：1
> 
> 时间：2012-11-08T18:17:41.083
> 
> 标签：sql, select

我相信有一些简单的解决方法。我基本上没有编写 SQL 语句的经验，所以我不知道所有命令、技巧或语法来获得我需要的东西。

`SELECT`我需要合并 以下两个 SQL语句：

**1：**

```
SELECT 
    h.jhhold, h.jhjob, h.jhrev, o.jadesc, o.jaoqty, o.jacqty, o.japo, o.javend  
FROM 
    Jhead AS h  
LEFT JOIN 
    jjops AS o ON h.jhjob = o.jajob  
WHERE 
    h.jhpcmp = 0 
    AND o.jatype = 2 
    AND o.jacqty < o.jaoqty 
    AND o.japcmp = 0 
    AND o.japo = 0 
```

**2：**

```
SELECT 
    h.jhhold, h.jhjob, h.jhrev, o.jadesc, o.jaoqty, o.jacqty, o.japo, o.javend, 
    p.hdprcd, p.hdrecd, p.hdseq  
FROM 
    Jhead AS h 
LEFT JOIN 
    jjops AS o ON h.jhjob = o.jajob   
LEFT JOIN 
    hpodt AS p ON h.jhjob = p.hdjob   
WHERE 
    h.jhpcmp = 0 
    AND o.jatype = 2 
    AND o.jacqty < o.jaoqty 
    AND o.japcmp = 0 
    AND p.hdjob = h.jhjob 
    AND p.hdpo = o.japo 
    AND p.hdseq = o.jaseq 
```

这两个语句都返回了我需要的结果。第一条语句基本上返回 o.japo = 0 的结果（它永远不会为空）。第二个返回 o.japo 不为零的结果，然后我尝试将另一个表加入数据。我确实尝试在两者之间粘贴一个 UNION ALL，但我查找的所有联合示例都没有每个 select 语句的 unqiue WHERE 语句。

.
我最初尝试了以下语句（如下），但是当 o.japo = 0 时得到多行数据，我无法弄清楚为什么它会拾取额外的行，但我怀疑这是第二个左连接加入不正确/不需要数据。当 o.japo = 0 时，所有 hpodt (p.) 字段都应该为空，而是填充了来自某个地方的数据。

```
SELECT h.jhhold, h.jhjob, h.jhrev, o.jadesc, o.jaoqty, o.jacqty, o.japo, o.javend, p.hdprcd, p.hdrecd, p.hdseq 
FROM Jhead AS h 
LEFT JOIN jjops AS o ON h.jhjob = o.jajob 
LEFT JOIN hpodt AS p ON h.jhjob = p.hdjob 
WHERE (h.jhpcmp = 0 AND o.jatype = 2 AND o.jacqty < o.jaoqty AND o.japcmp = 0 AND p.hdjob = h.jhjob AND o.japo != 0 AND p.hdpo = o.japo AND p.hdseq = o.jaseq AND o.jaopr != 'PT') OR (h.jhpcmp = 0 AND o.jatype = 2 AND o.jacqty < o.jaoqty AND o.japcmp = 0 AND o.japo = 0 AND o.jaopr != 'PT')
ORDER BY h.jhjob, o.jaseq, p.hdrecd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:27:39.117

`UNION`在两个语句之间放一个。

UNION 需要具有相同数量的列，因此您需要做一些额外的工作。

在第一个 select 语句中添加一些空值以覆盖不存在的列。

```
SELECT 
   -- Common to both tables
   h.jhhold, h.jhjob, h.jhrev, 
   o.jadesc, o.jaoqty, o.jacqty, 
   o.japo, o.javend, 
   -- These columns don't exist here.
   -- include them anyway as NULL
   NULL as hdprcd,
   NULL AS hdrecd, 
   NULL AS hdseq  
FROM Jhead AS h  
LEFT JOIN 
  jjops AS o ON h.jhjob = o.jajob  
WHERE 
    h.jhpcmp = 0 
AND o.jatype = 2 
AND o.jacqty < o.jaoqty 
AND o.japcmp = 0 
AND o.japo = 0
-- The big boy, combining the results of two queries
---
UNION
SELECT 
   h.jhhold, h.jhjob, h.jhrev, 
   o.jadesc, o.jaoqty, o.jacqty, 
   o.japo, o.javend, p.hdprcd, 
   p.hdrecd, p.hdseq  
FROM Jhead AS h 
LEFT JOIN 
   jjops AS o 
ON h.jhjob = o.jajob   
LEFT JOIN 
   hpodt AS p 
ON h.jhjob = p.hdjob   
WHERE 
    h.jhpcmp = 0 
AND o.jatype = 2 
AND o.jacqty < o.jaoqty 
AND o.japcmp = 0 
AND p.hdjob = h.jhjob 
AND p.hdpo = o.japo 
AND p.hdseq = o.jaseq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:42:35.510

使用不同的别名再次加入`jjops`，然后从该别名加入`hpodt`：

```
SELECT 
    h.jhhold, h.jhjob, h.jhrev, 
    o.jadesc, o.jaoqty, o.jacqty, o.japo, o.javend,
    o2.jadesc, o2.jaoqty, o2.jacqty, o2.japo, o2.javend, 
    p.hdprcd, p.hdrecd, p.hdseq
FROM Jhead AS h  
LEFT JOIN
    jjops AS o ON h.jhjob = o.jajob  
LEFT JOIN
    jjops AS o2 ON h.jhjob = o2.jajob   
LEFT JOIN
    hpodt AS p ON h.jhjob = p.hdjob
    AND p.hdpo = o2.japo
    AND p.hdseq = o2.jaseq
    AND p.hdjob = h.jhjob
WHERE 
    h.jhpcmp = 0 
    AND o.jatype = 2 
    AND o.jacqty < o.jaoqty 
    AND o.japcmp = 0 
    AND o.japo = 0; 
```

另请注意，我已将一些条件移到`ON`子句中。如果需要，您可以随时将它们移回 where 子句：

```
...
LEFT JOIN
    hpodt AS p ON h.jhjob = p.hdjob
WHERE 
    h.jhpcmp = 0 
    AND o.jatype = 2 
    AND o.jacqty < o.jaoqty 
    AND o.japcmp = 0 
    AND o.japo = 0
    AND p.hdpo = o2.japo
    AND p.hdseq = o2.jaseq
    AND p.hdjob = h.jhjob; 
```

但是它可能会产生不同的结果 - 最后一个版本将不允许`LEFT JOIN`从.`o2``p`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:53:25.580

您也可以尝试调整原始语句中的 Where 子句。

如果您没有，最好避免对同一个表进行多次选择。

```
SELECT h.jhhold, h.jhjob, h.jhrev, o.jadesc, o.jaoqty, o.jacqty, o.japo, o.javend, p.hdprcd, p.hdrecd, p.hdseq 
FROM Jhead AS h 
LEFT JOIN jjops AS o ON h.jhjob = o.jajob   
LEFT JOIN hpodt AS p ON h.jhjob = p.hdjob   
WHERE h.jhpcmp = 0 
    AND o.jatype = 2 
    AND o.jacqty < o.jaoqty
    AND o.japcmp = 0
    AND (o.japo = 0 
        OR (p.hdjob = h.jhjob AND p.hdpo = o.japo AND p.hdseq = o.jaseq 
                  AND o.japo <> 0)) 
```

# delphi - 将代理 GET/POST 发送到 WebBrowser

> ID：13295225
> 
> 赞同：0
> 
> 时间：2012-11-08T18:17:58.447
> 
> 标签：delphi, delphi-xe2, indy, indy10

我试图拦截从 IdHTTPProxyServer 获取的 GET/POST 并将其发送到 IdHTTP，以便我可以复制 GET/POST 并最终获取 cookie，以便我可以登录到任何网站。

如何改进？如果我尝试执行此代码，它会崩溃。

```
procedure TForm1.IdHTTPProxyServer1HTTPDocument(
  AContext: TIdHTTPProxyServerContext; var VStream: TStream);
begin

if AContext.Command='POST' then begin
EmbeddedWB1.LoadFromString(IdHTTP1.Post(AContext.Target,AContext.Headers.Text)); << CRASH
end;

if AContext.Command='GET' then begin
EmbeddedWB1.LoadFromString(IdHTTP1.Get(AContext.Target)); << CRASH
end;

end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:47:47.340

使用该`OnHTTPDocument`事件时，您需要查看该`TIdHTTPProxyServerContext.TransferSource`属性以了解该事件是针对包含正文数据的客户端请求触发的，还是针对目标服务器对客户端请求的响应而触发的。发送您自己的`GET`/`POST`请求仅在处理客户端请求时才有意义，但是由于没有要捕获的正文数据，`OnHTTPDocument`因此不太可能为请求触发事件。`GET`

您无需使用`TIdHTTP`即可获取服务器的 cookie。让它`TIdHTTPProxyServer`正常工作，然后您可以从事件中的`TIdHTTPProxyServerContext.Headers`属性中提取cookie `OnHTTPResponse`，例如：

```
procedure TForm1.IdHTTPProxyServer1HTTPResponse(AContext: TIdHTTPProxyServerContext);
var
  Cookies: TStringList;
begin
  Cookies := TStringList.Create;
  try
    AContext.Headers.Extract('Set-Cookie', Cookies);
    // use Cookies as needed, such as:
    // URI := TIdURI.Create(AContext.Target);
    // try
    //   CookieManager1.AddServerCookies(Cookies, URI);
    // finally
    //   URI.Free;
    // end;
  finally
    Cookies.Free;
  end;
end; 
```

# php - Zend Framework 2 - 从控制器插件内重定向而不返回

> ID：13295226
> 
> 赞同：1
> 
> 时间：2012-11-08T18:18:02.660
> 
> 标签：php, zend-framework2

是否可以从控制器插件中将用户重定向到新的 URL，而不必向控制器返回响应对象？

具体来说，我想将用户重定向到当前 URL 的安全版本。所以在 ZF2 我有这个：

```
$url = 'https://'.$this->getURL();

$response = $this->getController()->redirect()->toUrl( $url );

return $response; 
```

然而，在 Zend Framework 1 中，我能够做到：

```
$redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');

$url = 'https://'.$this->getURL();

$redirector->gotoUrlAndExit($url); 
```

是否可以在 ZF2 中基本上“重定向然后退出”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:42:53.747

假设你正在扩展 Zend\Mvc\Controller\Plugin\AbstractPlugin 那么你应该能够像这样重定向：

```
$this->getController()->plugin('redirect')->toUrl($url);
return FALSE; 
```

如果您查看 Zend\Mvc\Controller\Plugin\Redirect 中的 toUrl 方法，它看起来像这样：

```
/**
 * Redirect to the given URL
 *
 * @param  string $url
 * @return Response
 */
public function toUrl($url)
{
    $response = $this->getResponse();
    $response->getHeaders()->addHeaderLine('Location', $url);
    $response->setStatusCode(302);
    return $response;
} 
```

所以很明显它*正在*返回响应对象，但它也已经向它添加了标头，并且您不必从控制器显式返回响应，所以从您的插件中您也不应该。我认为这通常是为了维护一个流畅的界面，但既然你知道你不需要它来做其他事情，你就不需要把它传回去。

注意：我没有在插件中对此进行测试，但我在控制器中执行此操作并且效果很好：

```
$this->plugin('redirect')->toUrl($url);
return FALSE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T19:42:05.890

在您的插件中只需返回操作：

```
return $this->getController()->getAction(); 
```

# silverlight - 可以在 Silverlight 中创建“新 MouseButtonEventArgs”吗？

> ID：13295231
> 
> 赞同：3
> 
> 时间：2012-11-08T18:18:31.727
> 
> 标签：silverlight, silverlight-4.0, contextmenu, mouseevent, right-click

我是 Silverlight 的新手，我需要`MouseRightButtonDown(object sender, MouseButtonEventArgs e)`从我的应用程序中的另一个事件处理程序激活。

我发现，在 WPF 中可以这样做：

```
public void OnContextMenuOpened(object sender, RoutedEventArgs e) {            
    MouseButtonEventArgs args = new  MouseButtonEventArgs(
        InputManager.Current.PrimaryMouseDevice, 
        0,
        MouseButton.Right);
     MouseRightButtonDown(sender, args);
} 
```

但是我在 Silverlight 中既没有 InputManager-Class 也没有 MouseButton-Class ...通常可以实现这样的事情吗？

我想这样做，因为我尝试在鼠标右键的帮助下选择一个 DataGridRow（在自定义控件内）。没有上下文菜单很容易，但是当我打开上下文菜单时，上下文菜单会打开并且不会触发事件......

我的代码片段：

```
public override void OnApplyTemplate() {
    DataGrid = (DataGrid)GetTemplateChild("DataGrid");
    DataGrid.MouseRightButtonDown += DataGridMouseRightButtonDown;

    ContextMenu = (ContextMenu)GetTemplateChild("ContextMenu");
    ContextMenu.Opened += OnContextMenuOpened;
}

private void DataGridMouseRightButtonDown(object sender, MouseButtonEventArgs e) {
    //My code to select an DataGridRow
}

public void OnContextMenuOpened(object sender, RoutedEventArgs e) {  
    //This event-handler now will be always activated if I do 
    //right-mouse-button-click
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T09:28:54.400

我的研究结果表明，在 Silverlight 中这是不可能的 -.-

# sql-server - Sql 从另一个表中选择（循环？）

> ID：13295236
> 
> 赞同：2
> 
> 时间：2012-11-08T18:19:01.550
> 
> 标签：sql-server

我的 SQL 技能不是很好，因此发表了这篇文章。

我正在尝试获取基于公司的所有联系人姓名。

例如我有两个陈述：

```
Select Id, CompanyName, Address From Clients
Select ClientId, ContactName From Contacts 
```

您可能与一个客户有很多联系人

结果：（我需要在一个列中的所有联系人姓名）

```
ContactName         Company    Address
----------------------------------------
Johh, Steve         123 Comp   12345 Address
David,Mike, Sarah   44 Comp    111 Address 
```

一个工作示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:57:47.697

```
SELECT DISTINCT (
SELECT ISNULL(ct.ContactName, '') + ', '
FROM dbo.Clients cl JOIN dbo.Contacts ct ON cl.Id = ct.ClientId
WHERE cl.ID = cl2.Id
FOR XML PATH('')) AS ContactName, CAST(cl2.Id AS nvarchar(7)) + ' ' + cl2.CompanyName AS Company, Address
FROM dbo.Clients cl2
ORDER BY 2 
```

Demo on [**SQLFiddle**](http://sqlfiddle.com/#!3/3c3e4/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:04:51.373

你没有指定你的 DBMS，所以我假设 PostgreSQL：

```
select string_agg(ct.contactName, ', '), cl.companyname, cl.address
from contacts ct
  join clients cl on cl.id = ct.clientId
group by cl.companyname, cl.address 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:05:49.063

首先将公司的所有联系人姓名构建到单个列中。假设数据库是 SQL Server，我使用公用表表达式来存储单列联系人列表。构建 CTE 后，将其与 Clients 表连接以获取 ContactNames。FOR XML 用于连接行。

```
WITH CTEContactList(ClientID,ContactNames) 
AS
(

 SELECT c1.ClientID,
        Names = SUBSTRING(( SELECT ', ' + c2.ContactName
                            FROM Contacts c2
                            WHERE c1.ClientID = c2.ClientID
                            FOR XML PATH ('')),3,8000 ))
 FROM Contacts c1
 GROUP BY c1.ClientID

 )

SELECT 
       cl.ID,
       cl.CompanyName,
       cl.Address,
       ctelist.ContactNames

FROM Clients cl
INNER JOIN CTEContactList ctelist
ON cl.ID = cteList.ClientID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:24:15.073

听起来你需要做一个表连接。

示例：这里有两个表

```
1\. Person
2\. Orders 
```

询问：

```
SELECT 
    Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
INNER JOIN Orders ON Persons.P_Id = Orders.P_Id
ORDER BY Persons.LastName 
```

# redirect - 从 seo 的角度来看，页面重定向到最新的文章是否不好？

> ID：13295239
> 
> 赞同：0
> 
> 时间：2012-11-08T18:19:13.737
> 
> 标签：redirect, seo

我的网站顶部有导航链接到`news/`

新闻总是分页的，每页一篇文章，可以导航到下一篇或上一篇文章。

我希望默认文章是倒数第二个最新文章。因此，如果有 10 篇文章，当用户点击 时`news/`，它们会被重定向到`news/9`302 重定向代码。

从 SEO 的角度来看，像这样不断重定向是不是很糟糕？将顶部导航中的链接更改为直接链接到`news/9`并在每次有新文章时不断更改会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:38:55.553

搜索引擎期望给定的内容具有规范的 URL。一个页面可以有任意数量的 URL，但使用规范 URL。

Sop 不管你有什么重定向，添加一个规范的 URL，搜索引擎会处理任何混乱。

302 重定向就是为了这个。用它。

# neural-network - NEAT中不相交和多余基因之间的区别？

> ID：13295240
> 
> 赞同：3
> 
> 时间：2012-11-08T18:19:20.820
> 
> 标签：neural-network, genetic-programming, neat

我正在阅读 Stanley 的论文，但我无法弄清楚 NEAT 中的 Disjoint 和 Excess 基因到底是什么。我知道它们似乎以某种特定的方式与它们都包含与父母双方无关的创新数字这一事实相关。但是它们有什么区别呢？

任何人都可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:54:22.673

当通过基因ID（创新号）比对两个基因组时，末端的错配称为过量基因，所有其他错配称为不相交基因。据我所知，没有任何 NEAT 实施曾经以不同的方式对待不相交和多余的基因。在早期的 NEAT 论文中做出了这种区分，很可能是因为建议以不同的方式处理不匹配的类型作为未来可能的研究课题。

（仅供参考 - 作为 SharpNEAT 的作者发言）。

# git - 如何将 svn 获取的分支重新定位到 Git 上的 master 上？

> ID：13295241
> 
> 赞同：0
> 
> 时间：2012-11-08T18:19:27.123
> 
> 标签：git, svn, git-svn, rebase, branching-and-merging

我从现有的 SVN 存储库创建了一个 git 存储库。在 SVN 结构中，我有主干和一个分支（例如，branch_01）。主干在修订版 8 中，分支代码尽管发生了变化，但一直更新到修订版 4。

在我将 SVN 存储库提取到 git 后，我​​的 git 存储库中得到了以下结构：

```
trunk      A(4)------B(6)---------C(8)

branch_01       D(5)--------E(7)---------F(9) 
```

我的问题是，我如何为 git repo 结构变基 branch_01 是这样的？

```
trunk      A(4)------B(6)---------C(8)
              \
branch_01       D(5)--------E(7)---------F(9) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:11:11.130

鉴于上图，其中 A(4) 是当前主干 C(8) 之前的 2 次提交：

```
git rebase --onto trunk~2 branch_01 
```

如果提供的图表被简化，可能更容易找到修订版 4 提交的显式哈希，然后`trunk~2`在上面的命令中使用它来代替。

**注意 Dmitry 的警告**：仅当您放弃 SVN 存储库时才这样做。如果你打算继续使用 git-svn，你不想这样做。

# java - 替换 tc 服务器中的 jars

> ID：13295247
> 
> 赞同：2
> 
> 时间：2012-11-08T18:19:43.037
> 
> 标签：java, tcserver

我在 STS 中创建了两个项目一个是常见的，它将在 Maven 中捆绑为 jar 文件。我有另一个项目 EntWeb，它依赖于 common.jar。EntWeb 将生成为 war 文件，并将部署在 tc 服务器中。

现在的问题是每次我在公共项目中更改一些 java 文件时，我都需要在 EntWeb 项目中安装 Maven。这需要更多时间。

有没有办法在 tc 服务器中直接替换普通 jar 而无需在 EntWeb 中再次安装。任何帮助将不胜感激。

阿南德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:44:49.613

假设您没有使用[WTC](http://www.eclipse.org/webtools/)启动服务器，并且您正在使用“爆炸战争”配置（TC 服务器，您可以简单地替换您在“爆炸”战争目录中创建的 jar。之后您可能需要重新启动但 TC 服务器会识别出 WAR 比展开后的目录更旧，并且不会再次提取 WAR 的内容。

```
TC Server
 - Instance #1
   - bin
   - conf
   - webapps
     - my_app.war
     - my_app // This is the exploded dir - put the new JAR here under WEB-INF/lib 
```

# ado.net - 在 LINQ to Dataset 中计算组序数

> ID：13295249
> 
> 赞同：0
> 
> 时间：2012-11-08T18:19:45.077
> 
> 标签：ado.net, linq-to-dataset

我有一个旧的 FoxPro 程序，它执行 SQL 查询，其中包括以下内容：

```
 SELECT  Region,                        
                    Year AS yr_qtr,                  
                    SUM(Stock) AS inventory 
```

**...

```
 COUNT(Rent) AS rent_ct     
            FROM 
```

**...

```
 GROUP   BY Region, Year           
            ORDER   BY Region, Year
            INTO    CURSOR tmpCrsr 
```

该查询针对 .DBF 表文件，并包含 Excel 文件中的数据。我已经使用这两种方法在我的 C# 程序中填充用户定义对象的枚举。（不确定是否需要 .AsEnumerable。）然后我尝试使用 LINQ to Dataset 来查询用户对象列表并创建相同的结果集：

```
var rslt1 = from rec in recs_list //.AsEnumerable()
            group rec by new {rec.Region, rec.Year} into grp
            select new
{
    RegName = grp.Key.Region,
    yr_qtr = grp.Key.Year,
    inventory = grp.Sum(s => s.Stock),
    // ...
    rent_count = grp.Count(r => r.Rent != null)
}; 
```

这给了我一个警告，“*表达式的结果总是'true'，因为'decimal'类型的值永远不等于'decimal'类型的'null'* ”对于Rent列的Count（）。

这是有道理的，但是我该如何计算不包括值为 .NULL 的行。FoxPro 表中的该列（或任何 SQL 数据库表中的 NULL，就此而言）？我不能对十进制值进行空测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:49:07.347

如果租金基于一个**不可**为空值的列，那么检查空值是没有意义的，我相信编译器准确地显示了这一点。将行更改为

```
rent_count = grp.Count(r => r.Rent != 0) 
```

反而。

如果代码实际上可以为空，例如：

```
Decimal? rent; 
```

这将使检查租金与空值有效。如果是这种情况，那么该行将是：

```
rent_count = grp.Count(r => (r.Rent ?? 0) != 0) 
```

[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)在哪里？可以使用。如果 r.rent 为空，请使用值 0（或技术上您想要的任何值）作为 r.Rent。在接下来的过程中。

# c# - 需要 Razor 中的堆栈视图，允许我隐藏视图或字段

> ID：13295259
> 
> 赞同：0
> 
> 时间：2012-11-08T18:20:44.280
> 
> 标签：c#, html, asp.net-mvc, razor

我有几个部分视图需要将它们堆叠在我的网页上。

pv1 pv2

pv3 pv4

pv5 pv6

我还需要能够在每个视图中隐藏它们中的任何一个，甚至是标签。

我尝试使用一张桌子，但我无法让它们正确显示。

这是我所做的一个例子：

```
<h2>AccountScreen</h2>

  <table>
    <tr>
      @Html.Partial("CustomerInfoPartialView")
    </tr>
    <tr>
      @Html.Partial("BalancePartialView")
    </tr>
  </table> 
```

结果并没有像我希望的那样，一团糟。

我应该用什么来堆叠我的部分视图并能够以编程方式隐藏/显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:32:31.550

正如人们所说，你应该使用`<div>`元素。您还应该为它们提供唯一标识符并根据需要使用 jQuery 隐藏/显示。如果您在渲染模型时有可用的标准，则根据需要为每个元素添加可见/隐藏样式可能会更简单。

```
@
{
    Html.Partial("CustomerInfoPartialView")
    ...
    Html.Partial("CustomerInfoPartialView")
} 
```

然后在每个部分：

```
@{
    var classToUse = (myVisibleCriteriaBool) ? "visibleClass" : "hiddenClass";
}
<div id="UniqueNamePartialView" class="stackableDivs @classToUse">
    Your html stuff here
</div> 
```

只要类`stackableDivs`（我刚刚编造的）包含浮动样式，它们就应该适当地堆叠。这可能需要根据您希望它们堆叠的方式进行调整，但这仍然应该是 css 的问题。如果您在呈现视图时不知道，您可以使用 jQuery 隐藏各个元素：

```
$($('#UniqueNamePartialView").hide()); 
```

或者

```
$($('#UniqueNamePartialView").show()); 
```

我会远离它，`toggle()`因为它[已被弃用](http://bugs.jquery.com/ticket/11786)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:25:43.260

如果您想在视图中以 C# 隐藏/显示它们，您所要做的就是渲染或不渲染它们。

如果您想在 JavaScript 中隐藏/显示它们，只需将它们放在 a 中`div`并使用`$("your_div").toggle();`

# c# - 使用 IIS Express 进行调试时获取文件的完整路径

> ID：13295260
> 
> 赞同：7
> 
> 时间：2012-11-08T18:20:47.617
> 
> 标签：c#, .net, iis, iis-express, directoryinfo

我有一个正在尝试调试的 .NET 应用程序，并且我的应用程序的一部分从我的项目中加载了一个文件。该文件位于

```
C:\Users\USER_FOLDER\Documents\Visual Studio 2012\Projects\MY_PROJECT\_templates\myFile.html 
```

在我的代码中，我指定了文件的相对路径并使用 DirectoryInfo 类获取文件的完整目录路径：

```
string myFile = (new DirectoryInfo("_templates/myFile.html")).FullName; 
```

但是，这将返回以下路径（额外的 \'s 作为转义字符）：

```
"C:\\Program Files\\IIS Express\\_templates\\myFile.html" 
```

我期待在 IIS Express 中调试时返回的路径与我列出的第一个路径匹配，而不是第三个。为什么是这样？我还需要在我的项目中设置其他东西以使其正确导出路径吗？我假设如果我将代码部署到 IIS7 站点就不会发生这种情况，但我还没有达到那个测试级别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T18:23:56.520

使用[Server.MapPath](https://msdn.microsoft.com/en-us/library/ms524632)：

```
Server.MapPath("~/_templates/myFile.html") 
```

或[HttpServerUtility.MapPath](https://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)：

```
HttpServerUtility.MapPath("~/_templates/myFile.html") 
```

# c++ - 通过套接字修改数据包大小

> ID：13295261
> 
> 赞同：0
> 
> 时间：2012-11-08T18:20:49.443
> 
> 标签：c++, qt, sockets, network-programming, network-protocols

我在 QT 中进行套接字编程，我必须设计一个协议来通过 TCP/IP 传输数据。

现在我的协议设计很简单。它以一种方式发送命令，每次写入时写入套接字的数据的第一个字节将是命令。因此，每当我使用 socket->write("CDATA") 第一个字节写入套接字时，在这种情况下，“C”将意味着服务器执行某项操作的命令。

我只想知道一件事，写入是否会在服务器上分解为多次读取？我知道服务器上会有一个缓冲区大小供读取。但是当写入在服务器的缓冲区限制内时，客户端上的 socket->write() 是否可以在服务器上的多次读取中接收？

为了解决这个问题，我将举一个例子假设服务器上套接字的缓冲区读取大小为 4096 字节。客户端将 socket->write("CDATA") 写入服务器。现在服务器是否有可能在不止一次读取中收到此消息？因为我在服务器上有一个 while 循环：

```
while{
 char str[] = socket->read();
 // What is the coomand in the first byte 
 if(str[0] == "C"){
  // Do something
 }
} 
```

如果客户端发送的数据在一次以上读取中被接收（即使客户端在一次写入中发送它），我的协议设计将失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:37:07.770

> 现在服务器是否有可能在不止一次读取中收到此消息？

是的，TCP/IP 可以按照它喜欢的任何方式对消息进行分段。TCP 是一种有状态的流协议：可以保证您在一端输入的字节将以相同的顺序从另一端输出。IP是无连接和基于数据报的。由于通过 IP 承载 TCP 的性质，可能会出现数据包在传输过程中被拆分、合并或以其他方式处理的情况。

你应该找到一种方法来清理你的程序以适应网络通信的复杂性。你可以：

*   使用像UDP这样的数据报协议（你失去了按发送顺序获取数据的保证，丢包也成为可能。今天的网络相当健壮；这通常不是问题）。

    ```
    [DATAGRAM (size specified in datagram header)] 
    ```

*   总是从网络中读取固定大小的块

    ```
    [DATA - block of data of some fixed size] 
    ```

*   包括传入数据的大小作为附加到前面的标题

    ```
    [LENGTH - 4 byte integer][DATA - block of data of size LENGTH] 
    ```

*   使用某种分隔符来指示数据结束并继续阅读直到你得到它

    ```
    [DATA - indeterminately sized data][DELIMITER - end-of-data control sequence] 
    ```

您可能可以使用库方法来执行此行为，因为您只需要很少的代码。

# javascript - 如何在仍然使用 .js 扩展名的同时从 struts 2 操作创建 javascript 文件？

> ID：13295264
> 
> 赞同：1
> 
> 时间：2012-11-08T18:21:06.043
> 
> 标签：javascript, struts2, convention-over-configur

我有一些需要动态生成的 javascript 文件。它纯粹是 i18n 的东西，我使用 struts 2 约定插件。当我从 URL 和源文件中省略 .js 扩展名时，我可以成功地做到这一点，如下所示：

Convention Plugin 将命中这个 JSP：

```
WEB-INF/content/dynamic-javascript-file.jsp 
```

使用此页面中的 URL：

```
<html>
<head>
<script type="text/javascript" src="dynamic-javascript-file"></script>
</head>
<body>
    blah blah blah
</body>
</html> 
```

但是，我想做的是：

```
WEB-INF/content/dynamic-javascript-file.js 
```

和

```
<html>
<head>
<script type="text/javascript" src="dynamic-javascript-file.js"></script>
</head>
<body>
    blah blah blah
</body>
</html> 
```

请注意，唯一的区别是 url 和文件本身都有其原生 .js 扩展名。这样做的动机是避免混淆开发人员和工具。另请注意，另一个要求是其他 javascript 文件应作为静态资源提供。

# jsp - 创建 JSP 关系图

> ID：13295267
> 
> 赞同：1
> 
> 时间：2012-11-08T18:21:14.657
> 
> 标签：jsp

我在一个相当大的 Java EE 代码库中工作，该代码库使用 Struts 和 JSP 来实现大多数控制器和视图功能。我们的很多 JSP 和标记文件都有嵌套引用，例如：

```
outerFile.jsp includes innerFile1.jsp includes someTag.tag includes target.tag
someOtherFile.jsp includes innerFile2.jsp includes someTag.tag includes target.tag 
```

当 target.tag 嵌套在许多文件中时，可能会出现这种情况，因此它可能位于 10 个或更多文件中。因此，编辑该文件的内容可能会对任意数量的父文件产生不利影响。我可以搜索所有父文件，直到找到“最外层”JSP，但是当我要进行大量重构时，这可能会很耗时。是否有可用于从已知起点（例如 target.tag）查找这些引用的工具？我已经搜索过谷歌，但我可能没有在这里使用正确的术语，所以任何关于这种工具的名称的建议也会有所帮助。

本质上，我试图通过 <%@include %> 调用对 JSP 关系进行逆向工程，类似于为类创建实体关系图，但使用具有“父级”和“子级”的 JSP 文件和标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:01:05.850

我建议您尝试使用[IntelliJ IDEA IDE](http://www.jetbrains.com/idea/)，它比 Eclipse 具有很多 JSP 功能。

[http://www.jetbrains.com/idea/features/jsp_editor.html](http://www.jetbrains.com/idea/features/jsp_editor.html)

我的 2 美分，

希望有帮助

PS：我不羡慕你... :(

# layout - 自定义 Logback Appender - 前置文件头并使其翻转

> ID：13295268
> 
> 赞同：8
> 
> 时间：2012-11-08T18:21:20.393
> 
> 标签：layout, logback, appender, rollingfileappender

我需要的功能是在配置的日志文件的开头**写一个标题行。**此外，日志文件应该根据时间模式**翻转**（我说的是 logback 1.0.7）。

所以，我正在考虑编写一个**Appender——**尽管我不确定它是否不是我真正需要的自定义**布局。**

*1) 附加器*

根据 logback 的文档，正确的方法是扩展`AppenderSkeleton`，但是我将如何将它与`RollingFileAppender`(使文件翻转？)

另一方面，如果我扩展`RollingFileAppender`了，我应该重写什么方法来装饰现有的功能？我如何告诉它只在文件的开头写入特定的字符串？

*2) 布局*

类似地，该方法似乎正在扩展`LayoutBase`，并为`doLayout(ILoggingEvent event)`. 但同样，我不知道如何装饰行为 - 只是在文件中添加一个新行，而不是破坏它的功能（因为我仍然希望其余的日志正确显示）。

`getFileHeader()`in看起来很有希望，但我该`LayoutBase`如何使用它呢？它甚至打算被自定义布局覆盖吗？（可能是的，因为它是 Layout 界面的一部分，但那又如何呢？）

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T00:08:57.953

在这里，我正在回答我自己的问题，以防万一其他人遇到同样的问题。这就是我最终做到的方式（但不知道这是否是正统方式）：

我没有扩展 AppenderSkeleton，而是扩展了 RollingFileAppender（以保持翻转功能），并覆盖了它的 openFile() 方法。在这里，我可以操作日志文件并将标题写入其中，然后让它执行默认情况下需要执行的任何操作。像这样：

```
 public void openFile(String fileName) throws IOException {
        super.openFile(fileName);
        File activeFile = new File(getFile());
        if (activeFile.exists() && activeFile.isFile() && activeFile.length() == 0) {
            FileUtils.writeStringToFile(activeFile, header);
        }
  } 
```

我在 logback.xml 中配置了 header，就这么简单：`<header> value </header>`. 这会将它注入我的新附加程序的标头字段中。

似乎可以正常工作，但是如果您知道更好的方法，请发布！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-19T20:10:59.747

您的解决方案有一个问题：它删除了每个新文件的第一行日志。我认为这是因为您编写了标题，而文件是由 logback 打开的。我找到了另一个没有这个问题的解决方案：

```
public void openFile(String fileName) throws IOException
{
    super.openFile(fileName);
    File activeFile = new File(getFile());
    if (activeFile.exists() && activeFile.isFile() && activeFile.length() == 0)
    {
        lock.lock();
        try
        {
            new PrintWriter(new OutputStreamWriter(getOutputStream(), StandardCharsets.UTF_8), true).println("your header");
        }
        finally
        {
            lock.unlock();
        }
    }
} 
```

# ruby-on-rails - Accessing Variables in Rails 3 before_save Method

> ID：13295270
> 
> 赞同：1
> 
> 时间：2012-11-08T18:21:35.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, before-save

I have the following `before_save` method:

```
def get_data
  url = "http://www.api-fetching-url.com/where_my_data_input_is=#{self.my_data}&output=json"
  new_data = HTTParty.get(url)
  @field_to_update = new_data['one']['two']['here']
  self.field_to_update = @field_to_update
end 
```

Unfortunately, the `self.my_data` doesn't appear to be working, because the JSON url doesn't produce any result. But, when I substitute `my_data` in the hardcoded way, it works just fine. Moreover, I can do a `find` in the Rails console and get the `my_data` field just fine. So, it's not an issue with that field not saving or something on the form side.

Is there an issue inserting data this way in a `before_save` method? If not, is there a different way of doing this that I'm missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:29:45.430

Some remarks:

*   You don't have to (and actually can't) always call methods with the `self` receiver. Private methods for example can only be called without an explicit receiver, so no `self.` for private methods...
*   Why don't you inspect the url and check whether it is correct? Just add `puts url` after the line where you assign the url, run your program and check the output. Is the url correct?
*   You probably use HTTParty not correctly: `HTTParty.get('...')` returns a response object and you probably have to parse the response's body properly.

An example for a JSON service:

```
url      = 'http://service.com/path/to/resource.json'
response = HTTParty.get url

data = JSON.parse(response.body)
# now you can use the data, e.g.
# bla = data['one']['foo'] 
```

# iphone - 具有多个应用程序 ID 的多人游戏

> ID：13295272
> 
> 赞同：1
> 
> 时间：2012-11-08T18:21:39.270
> 
> 标签：iphone, ipad, game-center, multiplayer, app-id

我有兴趣制作具有 2 人多人游戏方面的 iOS 游戏。我想`Game Centre`用来发送数据，这似乎适用于 1 个应用程序。我想要的是游戏的付费和免费版本，能够在付费和免费版本***之间***玩多人游戏。

我遇到的问题是：

**是否可以`Game Centre`在游戏的付费版本和免费版本之间发送数据，即使它们具有不同的应用程序 ID？**

从我在网上看到的情况来看，我认为这是不可能的，而且我很可能必须拥有自己的服务器来处理数据传输。任何见解都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:22:34.307

iTunes-connect 中有这样的选项。

这是它的指南 [https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html](https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html)

这是您应该寻找的两个选项

**组**：允许您在应用程序之间共享您的排行榜和成就数据。组中的应用程序不需要与多人游戏兼容。

**多人游戏兼容性**：允许您指定哪些应用程序与特定应用程序兼容，因此允许应用程序之间的多人游戏。应用程序无需位于同一平台或组中即可与多人游戏兼容。

# java - 在 Eclipse 中编程 Java 8

> ID：13295275
> 
> 赞同：22
> 
> 时间：2012-11-08T18:21:48.663
> 
> 标签：java, eclipse, eclipse-jdt

Eclipse 支持 Java 8 的开发正在一个分支 ( [http://wiki.eclipse.org/JDT_Core/Java8](http://wiki.eclipse.org/JDT_Core/Java8) ) 中进行。

为了尝试当前 Eclipse 对 Java 8 的支持，我做了以下工作：

1.  我安装了 JDK 8 的构建（此步骤是可选的）。
2.  我检查`BETA_JAVA8`了`git://git.eclipse.org/gitroot/jdt/eclipse.jdt.core.git`.
3.  我在 Eclipse Juno SR1 实例（内部版本 ID：20120920-0800）中导入了签出的项目。
4.  我从正在运行的 Eclipse 中运行了一个新的 Eclipse 实例。

为了使用 Java 8 中可用的新语法，Eclipse 说我必须将代码的合规级别设置为 1.8。要设置合规级别，我必须将执行环境设置为`JavaSE-1.8`. 此执行环境在 不可用`Windows -> Preferences -> Java -> Installed JREs -> Execution Environments`。

如何将执行环境设置为`JavaSE-1.8`？

下面总结一下我安装执行环境的一些尝试：

1.  我按照[wiki 说明](http://wiki.eclipse.org/Execution_Environments#Installing_Execution_Environment_Descriptions)`JavaSE-1.8`在更新站点[http://download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)上查找描述。但是，执行环境的定义并不存在。
2.  我在[rt.equinox.framework 的 git 存储库中](https://github.com/eclipse/rt.equinox.framework/tree/master/bundles/org.eclipse.osgi)`JavaSE-1.8`查找了配置文件，但是它不存在。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-02T19:51:57.493

我刚刚从 Eclipse（Help/Eclipse Marketplace...）内部进入 Eclipse Marketplace 并安装了“Java 8 support for Eclipse Kepler SR2”，新的“JavaSE-1.8”执行环境自动出现了。我之前安装了 Java 8 并将其添加为“已安装的 JRE”条目。无需弄乱属性文件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-08T19:34:21.007

认为您只需要直接在“首选项文件”中更改“设置”： `org.eclipse.jdt.core.prefs`。

例如`org.eclipse.jdt.core.compiler.compliance=1.8`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-07T13:11:33.210

如果您有 Kepler，您可以使用此页面上包含安装说明的补丁来获取它：

[https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler](https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler)

> 从 I20140318-0830 开始，我们下载页面上的所有 Luna (4.4) 构建都包含对 Java™ 8 的 Eclipse 支持。对于 Kepler SR2 (4.3.2)，需要安装功能补丁。此页面描述了如何执行此操作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-13T15:29:46.933

Eclipse 版本 >=Luna（这是 Kepler 之后的版本）与 java 8 一起运行顺利。

# joomla - Joomla 中的强制语言

> ID：13295276
> 
> 赞同：0
> 
> 时间：2012-11-08T18:21:50.987
> 
> 标签：joomla

我有一个使用 Joomla 2.5.7 的多语言网站（西班牙语和英语）。`force`无论访问者计算机上的默认浏览器语言如何，我都希望默认语言为西班牙语。

我已经检查`Extensions -> Language Manager`并将西班牙语标记为默认值。但即使我清除了浏览器缓存，它仍然以英文显示。

我还检查了`Extensions -> Language Manager`内容选项卡，并`spanish`没有运气就把它放在第一位。

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:42:25.793

好的，解决方案是： `Extensions -> Plug In Manager`然后搜索`System - Language Filter`并相应`Basic Options`更改`Language Selection for new Visitors`

希望这对其他人有帮助

# winapi - 使用 wmi win32 类检查可用端口？

> ID：13295277
> 
> 赞同：1
> 
> 时间：2012-11-08T18:21:53.310
> 
> 标签：winapi, networking, wmi, inno-setup, wmi-query

我正在使用 inno setup 制作安装文件。它需要提取本地 IP 地址（我可以通过查询 Win32_NetworkAdapterConfiguration 来完成）并检查是否打开了特定端口以供软件运行（我目前正在寻找答案）。

我意识到 WMI Win32 类包含很多有用的信息。所以我想知道如果有可能的话，我应该使用哪个 Win32 类来检查这个端口？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:02:38.833

AFAIK 检查给定端口是否打开的唯一 WMI 类是[`NetDiagnostics`](http://www.scriptinternals.com/new/us/support/Internal/WMI_NetDiagnostics.htm)WMI 类和[`ConnectToPort`](http://www.scriptinternals.com/new/us/support/Internal/WMI_NetDiagnostics_ConnectToPort.htm)方法，但此类仅存在于 Windows XP 中。因此，如果您想要一个适用于其他 Windows 版本的选项，您可以尝试导入（或编写您自己的应用程序并从 inno 调用）类似 Winsock[`connect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737625%28v=vs.85%29.aspx)函数的东西，就像在这个问题上显示的那样[`How to check if a TCP port is available with Delphi?`](https://stackoverflow.com/questions/2156151/how-to-check-if-a-tcp-port-is-available-with-delphi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:17:53.930

只需尝试将套接字绑定到它。如果成功，则可用。

# vb.net - 定时器停止一次后不重新启动

> ID：13295284
> 
> 赞同：2
> 
> 时间：2012-11-08T18:22:29.333
> 
> 标签：vb.net, timer

我正在通过 COM 端口发送数据，并以 4000 的间隔启动我的计时器，如果我在 4 秒之前没有收到任何消息，我会发回我的消息。

{加载}

```
Private Sub MainForm_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    [...]    
    SendCard(0)
    [...]
End Sub 
```

{SendCard Sub} 我通过设置通过端口发送数据的属性“LastCommand”来通过此 Sub 发送所需信息。

```
Private Sub SendCard(ByVal cardIndex As Integer)
    If cardIndex < Setting.Machine.Cards.Length Then

        'Calling LastCommand's Set()
        LastCommand = "*" & Setting.Machine.Cards(cardIndex) & ": STRQ" & ControlChars.CrLf
    Else
        'Blah blah...
    End If

End Sub 
```

该属性发送数据并启动计时器。

```
Public Property LastCommand() As String
    Get
        Return lastCommandString
    End Get
    Set(ByVal value As String)
        lastCommandString = value
        MainCOMSerialPort.Write(value)
        ResponseTimer.Start()
    End Set
End Property 
```

当我收到答案时，我会停止计时器，然后询问下一张卡片的信息。

```
Private Sub MainCOMSerialPort_DataReceived(...)
   [...]
   ResponseTimer.Stop() 'After this stop it does not trigger the Tick event any longer.
   SendCard(Array.IndexOf(Setting.Machine.Cards, CardString) + 1) 'Sending the next card
   [...]
End Sub 
```

滴答事件适用于第一张卡片

```
Private Sub ResponseTimer_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ResponseTimer.Tick
    'MessageBox.Show("No Respone Yet")
    LastCommand = LastCommand
End Sub 
```

所以它每 4 秒询问一次我的第一个命令，直到我得到一些回报，但是当我从第二个命令重新开始时，计时器不会打勾。

我正在使用 .NET 4.0 和 {Windows.Forms.Timer}，我尝试使用 Timers.Timer 并且没有工作我不明白为什么它不会重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:41:05.560

在属性 'LastCommand' 检查值不等于 lastCommandString 并且如果 ResponseTimer 未启用，也许它会有所帮助：

```
Public Property LastCommand() As String
    Get
        Return lastCommandString
    End Get
    Set(ByVal value As String)
        if value = lastCommandString then exit property
        lastCommandString = value
        MainCOMSerialPort.Write(value)
        if Not ResponseTimer.Enabled Then ResponseTimer.Start()
    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:56:06.380

看起来 System.Timers.Timer 是我每次发送命令后每 4 秒触发一次 elapse 事件的最佳选择。

# atk4 - 敏捷工具包本地化

> ID：13295286
> 
> 赞同：1
> 
> 时间：2012-11-08T18:22:36.837
> 
> 标签：atk4

我在这里阅读了有关双语 atk 的问题的答案，但我想知道该框架是否适合国际使用？

我测试了 CRUD 功能（v 4.2）并且看不到例如按钮的标签（添加、编辑、删除）是通过 _() 函数运行的。

有什么计划吗？如果需要并且 ATK 是正确的路径，我可以提供帮助吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T00:50:13.250

这是最新的本地化分支。

[https://github.com/atk4/atk4/tree/locale](https://github.com/atk4/atk4/tree/locale)

他们调用 $this->api->_() 您可以覆盖它并使其调用 _() 或任何其他方式。

```
$this->add('translation/Controller_Basic')
    ->setLocale('de')                      // default language
    ->setModel('translation/Translation'); // use your model if you wish

$this->routePages('translation');          // adds translation/admin page

$this->add('Button')->setLabel('Localization Test'); 
```

如果您使用带有调试参数的翻译控制器，它将为所有非本地化字符串添加笑脸：

```
$this->add('translation/Controller_Basic',array('debug'=>true)) 
```

没有翻译的记录将通过模型自动添加。

# html - 如何防止元素在表格单元格中分成不同的行

> ID：13295289
> 
> 赞同：0
> 
> 时间：2012-11-08T18:22:54.260
> 
> 标签：html, resize

我有这样的结构：

```
<table>
  <tr>
    <td>
      <div>
         <input type="text" placeholder="Enter your name""/>
         <input type="button" value ="save"/>
      </div>
    </td>
  </tr>
</table> 
```

我的问题是，无论窗口大小如何调整，我都希望始终将这两个输入保持在同一行。AND 这两个输入占用了表格单元格的所有空间。按钮是固定大小的，而如果表格单元格增长，文本输入会变长。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:24:18.970

尝试

```
div { white-space: nowrap; } 
```

[**演示**](http://jsfiddle.net/juXWD/)

# permissions - 如果从浏览器调用php exec不执行

> ID：13295292
> 
> 赞同：3
> 
> 时间：2012-11-08T18:23:03.713
> 
> 标签：permissions, exec, php

这是stackoverflow中反复出现的话题，但最后我找不到任何明确的解决方案。

**我在本地 XAMPP (OS X) 上有这个 PHP 脚本**

**测试.php**

```
<?php exec('lpr -MyPrinter photos/image.jpg'); ?> 
```

**如果我从终端调用它就可以了**

```
kurt$ php test.php 
```

**但是如果我从浏览器调用它就不起作用**

```
http://localhost/mysite/test.php 
```

考虑到我的安全要求非常低，因为我将仅出于个人目的在本地使用此脚本。你能告诉我正确的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:36:16.427

可能有多种原因，但我建议查看错误消息。该`exec()`函数不会返回它，但您可以将错误输出重定向到临时文件：

```
<?php exec('lpr -MyPrinter photos/image.jpg 2> /tmp/error.txt'); ?> 
```

在浏览器中调用脚本后查看 /tmp/error.txt。

# javascript - 有没有办法以这种方式调用这个javascript函数？

> ID：13295293
> 
> 赞同：1
> 
> 时间：2012-11-08T18:23:07.387
> 
> 标签：javascript

我希望能够调用像 item_edit.say hello 这样的函数，作为窗口对象上的字符串传递（如下面的最后一行）：

```
var arc={ view: { item_edit: {} } };

arc.view.item_edit={
  say_hello: function(){
    alert('hello there');
  }

}

var f_name='say_hello';
var g_name='item_edit.say_hello';

var str=window.arc.view.item_edit[f_name]();  // <- this works
var str2=window.arc.view[g_name]();  // <- this is what I'm interested in; curently doesn't work 
```

关于如何让它发挥作用的任何想法？

提前谢谢

**编辑＃1** 我想我应该补充一点，尽管我看的越多，这可能就是不想做 eval ，这可能是有道理的（实际上这就是 eval 要做的事情）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:34:33.730

当然。`goog.provide`当编译器未优化时，Google 闭包库会在其函数中执行类似的操作。

```
function callDotted(obj, path, args) {
  var parts = path ? path.split('.') : [];
  var i, n = parts.length;
  for (i = 0; i < n - 1; ++i) {
    obj = obj[parts[i]];
  }
  var fn = i < n ? obj[parts[i]] : obj;
  return fn.apply(obj, args);
} 
```

然后在`Date.now`返回当前时间戳的浏览器上，

```
callDotted(window, 'Date.now', []) 
```

返回当前时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:29:55.227

这是使用`.reduce()`.

```
var str2 = g_name.split('.').reduce(function(obj, key) {
    return obj[key];
}, window.arc.view); 
```

您需要为较旧的浏览器填充它，并根据需要引入安全检查。

* * *

如果您经常这样做，我会将该功能添加到您的库中，以便您可以重复使用它。

```
function keyToObj(obj, key) {
    return obj[key];
} 
```

然后像这样使用它：

```
var str2 = g_name.split('.').reduce(keyToObj, window.arc.view); 
```

* * *

正如[@MikeSamuel](https://stackoverflow.com/users/20394/mike-samuel)指出的那样，`this`使用这种方法时执行函数的值存在问题。

为了解决这个问题，我们可以制作另一个特别适合*方法*调用的版本。

```
function keyToMethod(obj, key, i, arr) {
    return i === arr.length - 1 && typeof obj[key] === "function"
                              ? function() {
                                    return obj[key].apply(obj, arguments);
                                }
                              : obj[key];
} 
```

现在我们的函数返回一个从正确对象调用方法的函数。

```
var str2 = g_name.split('.').reduce(keyToMethod, window.arc.view)(); 
```

我们可以进一步增强返回的函数来检查该`this`值是否是默认值，如果不是，则使用提供的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T18:26:12.963

这个怎么样：

```
var str2 = eval('window.arc.view.' + g_name + '()'); 
```

# php - 刷新没有ajax的div的内容

> ID：13295299
> 
> 赞同：0
> 
> 时间：2012-11-08T18:23:11.710
> 
> 标签：php, jquery, ajax

我有一个 div，`id=mydiv`在这个 div 里面我有一些内容，我会在一段时间内从数据库中动态抓取它。

有什么方法可以在不使用`.load()`ajax 方法的情况下使用按钮刷新或重新加载我的 div 的内容？

```
$("#mydiv").load("index.html") 
```

例子：

```
<div id="mydiv">
<?php
$trtyb = mysql_query ("SELECT * FROM xxx WHERE xxx= '$getcat'");
while($fina = mysql_fetch_assoc($trtyb)) {
  echo $fina['name'];
  echo "<br>";
}
?>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:27:29.297

您需要获取新鲜的内容。唯一的方法是使用 http 请求。发出 http 请求的唯一方法是：

1）重新加载整个页面。

2) 使用 ajax - 如果您不想要延迟，这就是您不想使用 ajax 的原因，您可以设置一个 javascript 计时器，它会定期调用 ajax 并将数据不断更新到变量中。然后当用户单击按钮刷新数据时，您可以从存储的变量中提取数据。

3) 将所有内容放在 iframe 中，这需要刷新（我认为使用它没有任何好处）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-24T15:12:34.117

`div`是的，您可以在不刷新任何页面且不调用 ajax 的情况下加载任何内容

**这是工作示例**

```
// your code $("#mydiv").load("index.html") 
```

工作代码在这里：

```
// $("#mydiv").load("'your url here + #your div name'")

$("#mydiv").load(url + "#mydiv") 
```

不要忘记在程序中添加空间，`div`如果您不腾出空间，`div`程序将不再工作。

# java - 使 Spring/Tomcat 与 HTML5 pushState 兼容

> ID：13295300
> 
> 赞同：1
> 
> 时间：2012-11-08T18:23:19.213
> 
> 标签：java, html, spring, tomcat, backbone.js

我有一个使用 Backbone.js 客户端路由和 pushState 的单页 Web 应用程序。为了让它工作，我必须告诉我的服务器（Java、Spring 3、Tomcat）哪些 URL 应该在服务器上解析（实际的 JSP 视图、API 请求），哪些应该简单地发送到索引页面由客户处理。目前，我正在使用 InternalResourceViewResolver 来简单地提供与 URL 请求名称匹配的 JSP 视图。由于客户端 URL 在服务器上没有视图，因此服务器返回 404。

向 Spring（或 Tomcat）指定一些特定 URL（我的客户端路由）应该全部解析为 index.jsp，而其他任何东西都应该通过 InternalResourceViewResolver 指定的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:18:56.050

我发现 Spring MVC 3 添加了一个标签，它正是我需要的`mvc:view-controller`标签。这为我完成了：

```
<mvc:view-controller path="/" view-name="index" />
<mvc:view-controller path="/admin" view-name="index" />
<mvc:view-controller path="/volume" view-name="index" /> 
```

[http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T21:38:55.853

理论上，要通过 history.pushState 处理导航，您需要返回 index.html 以获取未处理的资源。如果您查看现代 Web 框架的官方文档，它通常是基于 404 状态来实现的。

在春季，您应该按顺序处理资源：

*   路径映射的 REST 控制器
*   应用静态资源
*   其他人的 index.html

为此，您至少有 4 种可能的解决方案。

### 使用 EmbeddedServletContainerCustomizer 和自定义 404 处理程序

```
@Controller
static class SpaController {
    @RequestMapping("resourceNotFound")
    public String handle() {
        return "forward:/index.html";
    }
}

@Bean
public EmbeddedServletContainerCustomizer containerCustomizer() {
    return container -> container.addErrorPages(new ErrorPage(HttpStatus.NOT_FOUND, "/resourceNotFound"));
} 
```

### 使用自定义默认请求映射处理程序

```
@Autowired
private RequestMappingHandlerMapping requestMappingHandlerMapping;

static class SpaWithHistoryPushStateHandler {

}

static class SpaWithHistoryPushStateHandlerAdapter implements HandlerAdapter {

    @Override
    public boolean supports(final Object handler) {
        return handler instanceof SpaWithHistoryPushStateHandler;
    }

    @Override
    public ModelAndView handle(final HttpServletRequest request, final HttpServletResponse response, final Object handler) throws Exception {
        response.getOutputStream().println("default index.html");
        return null;
    }

    @Override
    public long getLastModified(final HttpServletRequest request, final Object handler) {
        return -1;
    }
}

@Bean
public SpaWithHistoryPushStateHandlerAdapter spaWithHistoryPushStateHandlerAdapter() {
    return new SpaWithHistoryPushStateHandlerAdapter();
}

@PostConstruct
public void setupDefaultHandler() {
    requestMappingHandlerMapping.setDefaultHandler(new SpaWithHistoryPushStateHandler());
} 
```

### 使用自定义 ResourceResolver

```
@Autowired
private ResourceProperties resourceProperties;

@Override
public void addResourceHandlers(final ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/**")
            .addResourceLocations(resourceProperties.getStaticLocations())
            .setCachePeriod(resourceProperties.getCachePeriod())
            .resourceChain(resourceProperties.getChain().isCache())
            .addResolver(new PathResourceResolver() {
                @Override
                public Resource resolveResource(final HttpServletRequest request, final String requestPath, final List<? extends Resource> locations, final ResourceResolverChain chain) {
                    final Resource resource = super.resolveResource(request, requestPath, locations, chain);
                    if (resource != null) {
                        return resource;
                    } else {
                        return super.resolveResource(request, "/index.html", locations, chain);
                    }
                }
            });
} 
```

### 使用自定义 ErrorViewResolver

```
@Bean
public ErrorViewResolver customErrorViewResolver() {
    final ModelAndView redirectToIndexHtml = new ModelAndView("forward:/index.html", Collections.emptyMap(), HttpStatus.OK);
    return (request, status, model) -> status == HttpStatus.NOT_FOUND ? redirectToIndexHtml : null;
} 
```

### 概括

第四个选项看起来最简单，但一如既往地取决于您的需要。您可能还希望仅在请求需要 text/html 时才限制返回 index.html（BasicErrorController 已经基于“生成”标头执行此操作）。

我希望其中一个选项对您的情况有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T00:17:36.530

我会给我的网址一个明确的方案，并将前端与后端分开。

一些建议：

*   将所有请求路由`/server`到后端，将所有其他请求路由到前端。
*   设置两个不同的域，一个用于后端，一个用于前端。

# sql - 在 PIVOT 中选择

> ID：13295301
> 
> 赞同：-1
> 
> 时间：2012-11-08T18:23:19.930
> 
> 标签：sql, sql-server, pivot, case

有没有办法在 PIVOTED 列中有一个 CASE SELECT 语句。我的代码如下

```
SELECT PName, [RN], [HA], [LVN], [MSW], [SC] 
FROM 
(
   Query

 ) src 

  pivot
    (
     max(Visits)
    for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
    ) piv 
```

我得到的输出如下

```
 Pname        RN         HA          LVN        MSW        SC
    AA        AG-2/W    LO-1/W       NA-1/W     SK-2/W     NO-2/MON
    AA        JL-2/W     NULL         NULL        NULL       NULL 
```

因为已经有 2 个 RN 分配给 1 个 PN，所以我想仅在 1 Row 中汇总结果，并仅选择 1 个值显示在 RN 列中，因此根据我的情况，结果仅如下所示。

```
 Pname        RN         HA          LVN        MSW        SC
    AA        JL-2/W    LO-1/W       NA-1/W     SK-2/W     NO-2/MON 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:35:15.857

在没有看到完整查询的情况下，您应该能够将 row_number 应用于内部查询，然后使用`WHERE`类似于以下的子句：

```
SELECT PName, [RN], [HA], [LVN], [MSW], [SC] 
FROM 
(
   <yourQuery>, row_number() over(order by somefield) rn -- add a rownumber here
 ) src 
pivot
(
    max(Visits)
    for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
) piv
where rn = 1 
```

如果您发布完整的查询，可能还有其他方法可以做到这一点。

编辑，使用上一个问题中的信息，您的查询将如下所示：

```
select patname, [HA], [MSW], [RN]
from 
(
  select patName, Disc,
    sname+' '+schedule new_value,
    row_number() over(partition by patname, disc order by disc) rowNum
  from yourquery
) src
pivot
(
  max(new_value)
  for disc in ([HA], [MSW], [RN])
) piv
where rownum = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/91612/6)

或者您可以使用：

```
select *
from 
(
    SELECT PName, [RN], [HA], [LVN], [MSW], [SC] , row_number() over(partition by PName order by PName) rn
    FROM 
    (
       <yourQuery>
     ) src 
    pivot
    (
        max(Visits)
        for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
    ) piv
) x
where rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:46:24.347

您必须在透视后删除数据，因为 [RN] 本身受制于 MAX 条件，即它本身就是一个透视列。将其包装在 CTE 中，应用 RowNumber() 函数并正确分区，然后将其过滤为每个分区仅 1 行。

```
;WITH CTE AS (
    SELECT PName, [RN], [HA], [LVN], [MSW], [SC],
           ROW_NUMBER() OVER (partition by PName order by [RN] ASC) RowNum
    FROM 
    (
       Query

     ) src 

      pivot
        (
         max(Visits)
        for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
        ) piv
)
SELECT *
  FROM CTE
 WHERE RowNum = 1; 
```

# php - 使用PHP删除文件onclick

> ID：13295307
> 
> 赞同：4
> 
> 时间：2012-11-08T18:23:38.080
> 
> 标签：php, unlink

当用户单击删除链接时，我想删除文件。但是当我转到我的页面时，文件被删除了，我不知道为什么：

```
echo '<h3><a onclick="'.unlink(__FILE__).'">Delete Now!</a></h3>'; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T18:26:59.013

当用户单击链接时，此代码将删除当前文件：

```
<h3><a href="?delete=1">Delete Now!</a></h3>

<?php
    if(isset($_GET['delete']))
    {
        unlink(__FILE__);
    }
?> 
```

如果您更喜欢使用 POST 而不是 GET 方法，请使用以下代码：

```
<form method="post">
   <input name="delete" type="submit" value="Delete Now!">
</form>    

<?php
    if(isset($_POST['delete']))
    {
        unlink(__FILE__);
    }
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T18:37:35.380

您需要通过 Javascript 加载此操作。如果你使用 jQuery，你不能尝试这样的事情

你的 Javascript

```
<script type="text/javascript">

$('.delete').live('click',function(){ 
  deleteFile( $(this).attr('id') );
});

function deleteFile(id){
    $.ajax({
        url: 'deletefile.php?fileid='+id,
        success: function() {
            alert('File deleted.');
        }
    });
}
</script> 
```

你的 deletefile.php 看起来像这样。

```
<?php
    $fileid = $_GET['fileid'];
    //HERE IS THE LOGIC TO FIND THE PATH OF YOUR FILE
    unlink($file); //You can add more validations or full paths
?> 
```

并且您的链接必须具有以下结构

```
printf("<a id='%s' class='delete'>Delete</a>",$youridfile); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T18:27:08.780

您不了解客户端和服务器代码之间的分离。Javascript 不能像那样调用 PHP。当页面在服务器上构建时，PHP 将立即运行，而不是存储以供以后使用。

您需要发出 AJAX 请求来删除 onClick，或者创建一个像 /delete/$ID/ 这样的新页面，该页面将为您删除，或者，正如 Jocelyn 刚刚击败我的那样，使同一页面能够删除，如果GET / POST 参数已设置。

虽然，值得注意的`__FILE__`是代码所在的文件，所以它会自杀。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T18:28:43.397

这是 PHP 吗？您不能从 javascript 中运行 PHP 函数。相反，您需要加载/重定向/发布到 php 文件。

```
echo '<h3><a href="deleteScript.php" >Delete Now!</a></h3>'; 
```

编辑：

```
function table_exists($tablename, $database = false) {

if(!$database) {
    $res = mysql_query("SELECT DATABASE()");
    $database = mysql_result($res, 0);
}

$res = mysql_query("
    SELECT COUNT(*) AS count 
    FROM information_schema.tables 
    WHERE table_schema = '$database' 
    AND table_name = '$tablename'
");

return mysql_result($res, 0) == 1;

}

if(table_exists('my_table_name')) {
    // do something
}
else {
// do something else
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T18:29:41.023

您不能将 PHP 函数作为 onclick、javascript 事件运行。您需要以如下方式运行该功能：

```
<?php
    if (isset($_GET['delete'])) {
        unlink($_GET['delete']);
    }
?>
<html>
   <a href="?delete=/PATH/TO/FILE">Delete Now</a>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-08T18:29:23.580

您需要一个 php 处理的发布请求...或运行 php 脚本的 ajax/javascript 函数...

这是一个带有 ajax 的示例[http://www.website-php.com/de/tutorials/treeview/treeview-04.html](http://www.website-php.com/de/tutorials/treeview/treeview-04.html)

# asp.net - 文件上传和结果池会杀死 ASP.NET Web 应用程序

> ID：13295313
> 
> 赞同：3
> 
> 时间：2012-11-08T18:24:09.380
> 
> 标签：asp.net, asp.net-mvc-3, performance, iis-7.5

我们已经创建`ASP.NET MVC app`了接受`file upload`（最大 80mb）并拥有`result pooling implemented by AsincController`. 托管在 Windows 2008 R2 IIS7.5 .NET 4 上。服务器 2 核 2.6GHZ，2GB 内存，快速硬盘。

该网站有许多用户和性能监视器显示`ASP.NET Requests/Sec ~15`和`Request Current ~270`

几分钟后 ASP.NET 启动`queuing request`，`ASP.NET Request Queued`计数器开始增长，应用程序变得非常缓慢。我正在寻找这个问题将近一个月，试图分析代码，没有性能问题，也没有内存泄漏。增加`maxWorkerThreads to 400`和`maxIoThreads to 400`。设置`maxConcurrentRequestsPerCPU to 5000`，`MaxConcurrentThreadsPerCPU to 0`但这也无济于事。

似乎有帮助的一件事是将应用程序池的最大工作进程增加到两个或三个进程并制作应用程序池网络花园。之后 Request Current 跳转到 ~350 并且没有请求排队。但是网园引入了几个新的问题，这里就不多说了。

请发布任何建议我们如何提高应用程序性能而不使我们的应用程序在 IIS 池网络花园中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:37:26.363

我会告诉你仔细检查需要很长时间才能进行工作的页面，或者下载或上传文件的页面，并禁用此页面上的会话。如果这是不可能的，那么您可能需要编写一个完全自定义的方式来处理会话。

为什么，因为会话会锁定所有内容，直到页面完全返回。

您可以阅读与会话相关的内容和此问题：
[调用 aspx 页面以随机返回图像缓慢的](https://stackoverflow.com/questions/9694117/call-aspx-page-to-return-an-image-randomly-slow)
[ASP.NET 服务器不会异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)
[Web 应用程序在处理共享同一会话的另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)  
[什么性能计数器对识别 ASP.NET 瓶颈有用吗？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)  
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

# iframe - iframe 中的自动高度内容（CORS？）

> ID：13295314
> 
> 赞同：3
> 
> 时间：2012-11-08T18:24:12.953
> 
> 标签：iframe, height, cors

我正在和一个客户一起工作。他们的网页正在使用这个 DOCTYPE

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我需要向他们网站上的页面提供内容。我的内容看起来像这样

```
 <div style="height:1000px">
    <iframe frameborder="0" src="..." width="550" height="220"></iframe>
    <br/>
    <br/>
    <iframe frameborder="0" src="..." width="550" height="220"></iframe>
    </div> 
```

我可以通过给他们几行 css 和当前的 iframe 来将内容放在客户页面上：

```
<style>
.iframecontent
{
    background-color:blue;
    position: relative;
height: 100%;
width: 100%
}
</style>

<iframe class="iframecontent" frameborder="0" src="..." width="100%" scrolling="no"> </iframe> 
```

因为内容的高度是动态的，所以我无法为客户提供特定的高度——相反，我需要它来拉伸。

我已经阅读了很多帖子，但仍然不确定最好的方法。可能是CORS？还有什么？

这是提供的一种解决方案：http: [//sly777.github.com/Iframe-Height-Jquery-Plugin/](http://sly777.github.com/Iframe-Height-Jquery-Plugin/) - 它适用于同一个域，但对于跨域对话，它依赖于 PostMessage，这是一个 HTML 5 的东西。

我试过[http://blog.johnmckerrell.com/2006/10/22/resizing-iframes-across-domains/](http://blog.johnmckerrell.com/2006/10/22/resizing-iframes-across-domains/)但无法让它工作。

我可能只是让客户将框架设置为 1500 像素，以便它适合我选择在内容中的任何内容并完成它，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:18:12.097

我更新了您尝试过的插件（[http://sly777.github.com/Iframe-Height-Jquery-Plugin/](http://sly777.github.com/Iframe-Height-Jquery-Plugin/)），并添加了如何使用此插件进行跨域修复的教程。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:16:02.147

您可以使用 postMessage 插件[http://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

它使您能够将消息从 iframe 内部发布到父元素。结合*setInterval* javascript 函数，您可以将当前需要的大小发送到父元素。

**在 iframe 内部**

```
var currentIframeSize = 0; 
window.setInterval(function() {
    var size = $('body').outerHeight(true);
    //just post, if the size has changed
    if ( currentIframeSize != size ){
        currentIframeSize = size;
        $.postMessage({if_height : size}, source_url, parent);
    }
}, 1000); //do that every second 
```

**在父元素的头部**

```
id = "theIdOfYourIframe";
$.receiveMessage(function(e){
    var rec_height = Number( e.data.replace( /.*if_height=(\d+)(?:&|$)/, '$1' ) );
    if ( !isNaN( rec_height ) && rec_height > 0 && rec_height !== current_height ) {  
        current_height = rec_height;
        $('#' + id).height(rec_height);
    }
}); 
```

基于这两个片段，您应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:42:02.293

你能设置`html,body{height:100%;}`然后你的`iframe{height:100%}`吗？

百分比高度直接取决于它的父级高度（块元素的）。即：iframe 是什么的 100%？在这种情况下，它的父母是身体。

# azure - Azure Web 角色通过 Autoscaler 不断回收

> ID：13295317
> 
> 赞同：2
> 
> 时间：2012-11-08T18:24:27.193
> 
> 标签：azure, autoscaling, wasabi

我有一个托管在 azure 上的 wcf 服务。当我部署它并启动自动缩放器对象时，Web 服务角色不断被回收并处于不健康状态。如果我不启动自动缩放器，我没有问题，但是我想使用 WASABi。

这是我的 WebRole.cs

```
ublic class WebRole : RoleEntryPoint
{
    private Autoscaler autoscaler;
    public override bool OnStart()
    {

        // To enable the AzureLocalStorageTraceListner, uncomment relevent section in the web.config  
        DiagnosticMonitorConfiguration diagnosticConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
        diagnosticConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
        diagnosticConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());

        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

            autoscaler = EnterpriseLibraryContainer.Current.GetInstance<Autoscaler>();
            autoscaler.Start();

        return base.OnStart();
    }

    public override void OnStop()
    {
        autoscaler.Stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:52:06.247

您是否尝试过使用 IntelliTrace 来诊断回收的原因？这是一篇很好的[文章](http://blogs.msdn.com/b/jnak/archive/2010/06/07/using-intellitrace-to-debug-windows-azure-cloud-services.aspx)，介绍了如何使用 IntelliTrace 进行设置和故障排除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T12:18:18.027

你的 Run 方法是什么样的？它需要保持角色活着，所以它应该是这样的：

```
 public override void Run()
    {         
        Trace.TraceInformation("ScalerRole entry point called", "Information");

        while (true)
        {
            Thread.Sleep(100000);
            Trace.TraceInformation("Working", "Information");
        }
    } 
```

# c - 在 C 中分配一个固定一维的二维数组

> ID：13295318
> 
> 赞同：3
> 
> 时间：2012-11-08T18:24:34.807
> 
> 标签：c, arrays, 2d, malloc

我想动态分配 2D 数组的 1 个维度（给定另一个维度）。这是否有效：

```
int NCOLS = 20;

// nrows = user input...

double *arr[NCOLS];

arr = (double *)malloc(sizeof(double)*nrows); 
```

并释放它：

```
free(arr) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T18:28:53.287

不完全——你声明的是一个指针数组。你想要一个指向数组的指针，它的声明如下：

```
double (*arr)[NCOLS]; 
```

然后，你会像这样分配它：

```
arr = malloc(nrows * sizeof(double[NCOLS])); 
```

然后可以将其视为二维数组的法线`nrows`。`NCOLS`要释放它，只需将它传递给`free`任何其他指针。

在 C 中，没有必要强制转换 的返回值`malloc`，因为`void*`任何指针类型都有隐式转换（这在 C++ 中不成立）。事实上，`#include <stdlib.h>`由于隐式声明的存在，这样做可以掩盖错误，例如 failed to ，因此不鼓励这样做。

数据类型`double[20]`为“数组 20 of ” `double`，类型`double (*)[20]`为“指向数组 20 的指针`double`”。该程序在破译复杂的 C 声明（[示例](http://cdecl.ridiculousfish.com/?q=double+%28%2aarr%29%5B20%5D)）`cdecl(1)`方面非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:35:29.800

一个例子：

```
#include <stdio.h>
#include <stdlib.h>

#define COLS 2

void func(int (**arr)[COLS], int rows)
{
    int i, j;

    *arr = malloc(sizeof(int[COLS]) * rows);
    printf("Insert number: \n"); 
    for(i = 0; i < rows; i++) 
        for(j = 0; j < COLS; j++) 
            scanf("%d", &(*arr)[i][j]);
    for(i = 0; i < rows; i++) 
        for(j = 0; j < COLS; j++) 
            printf("%d\n", (*arr)[i][j]);
}

int main(void)
{ 
    int (*arr)[COLS];

    func(&arr, 2);
    free(arr);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:28:53.397

您必须为第一个维度上的每个元素（每个元素都是指向数组的指针）分配一个新数组。您可以为此使用循环：

```
for(i = 0; i < NCOLS; i++)
   arr[i] = (double *)malloc(sizeof(double)*nrows); 
```

做同样的事情来释放。

# sql - sql查询将两列与一列连接起来

> ID：13295323
> 
> 赞同：1
> 
> 时间：2012-11-08T18:24:43.883
> 
> 标签：sql, ms-access

我在 ms access 2010 中有 2 个表，如下所示

```
USERS (u_id, u_name)
LOAN (l_id, l_from[ref users.u_id], l_to[ref users.u_id], l_amount)

Users
+------+--------+
| u_id | u_name |
+------+--------+ 
| 1    | abc    |
| 2    | def    |
+------+--------+

Loan
+-----+--------+------+----------+
|l_id | l_from | l_to | l_amount |
+-----+--------+------+----------+
| 1   | 2      | 1    | 100      |
| 2   | 2      | 1    | 100      |
| 3   | 1      | 1    | 50       |
+-----+--------+------+----------+ 
```

我想从贷款表中选择名称而不是数字（l_from & l_to）

```
select
  loan.l_id,
  loan.l_from,
  users.u_name user_from,
  loan.l_to,
  users.u_name as user_to,
  loan.l_amount
from loan, users
where ??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:27:02.527

`JOIN`表`users`两次像这样：

```
SELECT
  l.l_id,
  fromusers.u_name AS user_from,
  tousers.u_name AS user_to,
  l.l_amount
FROM loan l
INNER JOIN users fromusers ON l.l_from = fromusers.u_id
INNER JOIN users tousers ON l.l_to = tousers.u_id 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!3/bf1f0a/3)（它是 SQL Server 2008，但我认为 ms-access 的语法应该相同）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:27:03.883

只需在用户表上加入两次，对于 from 和 to 各一次。

```
SELECT l.l_id, uFrom.u_name AS user_from,
    uTo.u_name AS user_to, l.l_amount
FROM LOAN l
INNER JOIN Users uFrom ON l.l_from = uFrom.u_id
INNER JOIN Users uTo ON l.l_to = uTo.u_id 
```

# oracle - 如果满足某些条件，则显示最后一条记录

> ID：13295324
> 
> 赞同：0
> 
> 时间：2012-11-08T18:24:48.953
> 
> 标签：oracle, plsql

我有两个表，例如 USER 和 AUDIT，其中连接是`user.id = audit.record`：

用户：

```
 ID,  USER,  NAME,  LAST_NAME

 205, USER1, PEDRO, PEREZ

 206, USER2, JUAN,  PEREZ 
```

审计：

```
 ID, ACTION, RECORD, FIELD,     DATE

 1, MODIFY,  205,    LAST_NAME, 08/11/12

 2, MODIFY,  205,    NAME,      25/09/12

 3, MODIFY,  206,    NAME,      08/11/12 
```

我需要一个查询，结果显示所有用户他的最后一个注册表项的名称有修改。在示例中，结果将是`USER2`

我正在使用 Oracle 8，我可以使用简单的查询还是需要创建一个函数？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:19:00.013

这是我的解决方案...`MAX (FIELD_NAME) KEEP (DENSE_RANK FIRST ORDER BY OPERATION_DT)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:11:08.913

也许这会做到：

```
select id from user u,
               audit a
 where  u.id=a.record
 and a.action='MODIFY'
 and a.field='NAME'
 and a.id = (select max(id) 
             from audit a2
             where a2.record=u.id) 
```

# facebook - Facebook喜欢下载

> ID：13295329
> 
> 赞同：0
> 
> 时间：2012-11-08T18:25:07.787
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试开发一个应用程序，让人们只有在喜欢我的粉丝页面时才可以下载免费赠品。现在我正在使用此代码来触发点赞按钮点击事件

```
 FB.Event.subscribe('edge.create',function(response) {

      download();// this makes a aaax call to get the download file
}); 
```

但是对于已经喜欢我的facebook页面的人来说，如何检测并赠送免费赠品？是否有任何可能的 fql 查询来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:38:42.793

```
FB.api("me/likes/page", function(response) 
{
          if ( response.data.length == 1 ) 
         { 
            //has liked

         } else 
         {

             //Not liked
}}); 
```

源和下载脚本 - [http://www.webtuts.info/webdevelopment/facebook-download-script-2/225/](http://www.webtuts.info/webdevelopment/facebook-download-script-2/225/)

# python - 如何将谷歌地图嵌入到我的 Python 程序中？

> ID：13295331
> 
> 赞同：5
> 
> 时间：2012-11-08T18:25:13.027
> 
> 标签：python, google-maps, tkinter

我正在使用 tkinter 在 Python 中开发一个项目，该项目将允许 IP 地址的地理定位。我有原始转换，我可以获取一个 IP 地址并知道城市、州、国家、经度、纬度等。我想知道是否有任何方法可以将谷歌地图或类似的东西嵌入到我的程序中以提供视觉效果表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:25:03.487

大多数 GUI 框架都有嵌入 Web 浏览器框架的方法，以及从 python 代码执行 javascript 的方法。如果您可以使用此功能，您可以使用 Google Maps JavaScript API v3 来显示地图。

如果您让我们知道您正在使用哪个 GUI 框架，我们可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:25:46.123

如果您不需要交互性，[静态地图 API](https://developers.google.com/maps/documentation/imageapis/)应该很容易集成到您的应用程序中。只需为地图建立一个 URL，然后下载图像并显示它。

请注意，[API 条款](https://developers.google.com/maps/terms#section_10_1)对非基于 Web 的应用程序有特殊规定。

# jquery - jsTree 未在 IE 中填充，带有 JSON 数据的 Google chrome

> ID：13295333
> 
> 赞同：2
> 
> 时间：2012-11-08T18:25:26.693
> 
> 标签：jquery, tree, jstree

我在 IE 和 chrome 中检查了许多关于 jsTree 问题的线程，但没有一个解决方案对我有帮助。

我在我的文件中放置了正确的文档类型。我采用了纠正“”错误的最后一个版本。

但在 IE 和 chrome 中仍然没有任何内容（甚至没有“正在加载...”消息），但在 Firefox 中运行良好（无论 3 个浏览器的版本如何）。

**您可以使用以下地址在不同的浏览器中直接生成和观察此错误：http: [//lbgi.igbmc.fr/orthoinspector/dbquery/ ?stype=text](http://lbgi.igbmc.fr/orthoinspector/dbquery/?stype=text)**

这是我的树初始化代码（在 jquery 脚本中）：

```
var compressedTreeSkeleton = generateCompressedJSONData(organismTreeSkeleton);

// Generate the tree. Data provided is JSON (JavaScript Object Notation).
$(function(){
    $("#treeview").jstree({
        "json_data" : { "data" : compressedTreeSkeleton },
        "types" : {
            "types" : {
                "inner_node" : {
                    "icon" : {
                        "image" : "images/node_icon_closed.png"
                    }
                },
                "leaf_node" : {
                    "icon" : {
                        "image" : "images/leaf_icon_1.png"
                    }
                }
            }
        },
        "search" : {
            "case_insensitive" : true
        },
        "plugins" : ["themes", "ui", "json_data", "checkbox", "types", "search"]

    });
});
} 
```

这是这段代码第一行生成的对象的概述（变量compressedTreeSkeleton），从chrome控制台输出中提取（您也可以在网站上直接在线查看）。它是一个“对象”表，每个表都包含树的一个节点的信息。此信息（对象）是在创建树之前通过 postgresql 数据库查询生成的。

```
[ Object {
    date: "2029-05-01"
    genus: "Oryza"
    identifier: "LOC"
    phylo_order: "59"
    phylum: "Eukaryota;Viridiplantae;Streptophyta;Streptophytina;Embryophyta;Tracheophyta;Euphyllophyta;Spermatop…"
    pk_bank: "1"
    pk_organism: "1"
    species: "sativa"
    taxid: "39947"
    __proto__: Object } ,

 Object, Object, Object, Object, (...) ] 
```

在 chrome 控制台中启动以下错误：

```
 Uncaught TypeError: Object [object Object] has no method 'jstree' 
```

而这个在 IE 中：

```
 Object doesn't support this property or method 
```

在 Firefox 中运行良好...

我迷失了这一切。知道我应该在哪里看吗？感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:55:54.427

问题是您的 HTML 中的这个标签：

```
<script type="text/javascript" src="js/jtree/\\_lib/jquery.js"></script> 
```

Chrome 和 IE 解决了这个拙劣的路径，并将这个版本的 jQuery 加载到 jquery.tools.min.js 中加载的另一个版本的 jQuery 之上。由于 jstree 在非工具版本之前加载，它会将其方法添加到工具版本中，而工具版本会被非工具版本覆盖。在 Firefox 中，工具版本永远不会被覆盖，因为找不到路径，`jstree()`并且所有相关方法都可用。

底线：删除那个拙劣的脚本标签和/或使用 jquery.tools 解决版本问题。

# jquery - $('input[type="submit"]') 在 IE 6 上不起作用，如何让它知道元素？

> ID：13295336
> 
> 赞同：0
> 
> 时间：2012-11-08T18:25:37.890
> 
> 标签：jquery, jquery-selectors, internet-explorer-6

当用户单击按钮时，我正在使用 jQuery 选择并弹出警报。以下代码适用于“标准”浏览器（Chrome、Firefox 等），但 IE 6 失败。

```
$('input[type="submit"]').click(function(event) {event.preventDefault();});
$('input[type="submit"]').click(function() {alert('hi')}); 
```

看起来这种输入的 jQuery 选择器在 IE 6 中不起作用。如何使它也与 IE 6 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:28:13.630

您可以为您的按钮分配一个类，然后引用它。

```
<input type="submit" class="runthis" />

$(".runthis").click(function() { }); 
```

编辑：此代码在 IE6 中适用于我：

```
<!doctype html>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {

            $("input[type='submit']").click(function() {

                alert("HI");
            });
        });
    </script>
</head>
<body>
    <form>
        <input type="submit" />
    </form>
</body>
</html> 
```

# android - 允许应用程序从 Gmail 打开自定义 Zip 文件

> ID：13295341
> 
> 赞同：0
> 
> 时间：2012-11-08T18:26:03.600
> 
> 标签：android, android-file

**我的问题**

我有一个带有扩展名的自定义 zip 文件`.trap`，我通过电子邮件发送给自己并在我的 Android 手机上的 Gmail 帐户中接收。

我需要能够说我的应用程序可以打开这个文件并相应地处理它。我已经看过了，那里有很多变化，但似乎没有一个对我有用。我也确实看到 Android 不允许打开`.zip`文件。

这是我添加到我的 android 清单中的意图过滤器。

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.trap" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="http" />
            <data android:host="*" />
            <data android:mimeType="application/trap" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.trap" />
        </intent-filter> 
```

**注意：**对于 MIME 类型，我也尝试过`*/*`哪些不起作用，只是`/`阻止应用程序启动。

**我的问题**

1.  android可以从电子邮件中打开zip文件吗？
2.  如何指定我的应用程序能够处理此文件类型的打开。

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:06:02.580

其他答案都是很好的答案，可能对某人有用。他们肯定帮助我更多地理解它，所以向他们竖起大拇指。

然而，对我有用的方法如下所示。

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
            <data android:pathPattern=".*\\.trap" />
            <data android:pathPattern=".*..*..*..*..*..*.trap" />
            <data android:pathPattern=".*..*..*..*..*.trap" />
            <data android:pathPattern=".*..*..*..*.trap" />
            <data android:pathPattern=".*..*..*.trap" />
            <data android:pathPattern=".*..*.trap" />
            <data android:pathPattern=".*.trap" /> 
     </intent-filter> 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:00:28.007

因为 GMail 充当内容提供者，所以您需要添加`content`方案，如下所示：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/*" 
          host="*" 
          android:pathPattern=".*.trap" 
          android:scheme="content" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:58:41.823

> android可以从电子邮件中打开zip文件吗？

只有在应用程序的帮助下。

> 如何指定我的应用程序能够处理此文件类型的打开。

这可能有效：

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="application/trap" />
    </intent-filter> 
```

这假定发送此消息的电子邮件客户端使用您的自定义 MIME 类型（顺便说一句，它可能应该在`vnd.`命名空间中）。

您现有的过滤器假定附件是文件或 HTTP 请求，而 Gmail 附件通过 ContentProvider（content:// 方案）呈现给您。

`BROWSABLE`如果您愿意，也可以在其中使用`DEFAULT`，如果您认为您还将`application/trap`通过 Web 浏览器下载文件。

# javascript - 集成的 JavaScript 检查器和压缩器/混淆器？

> ID：13295347
> 
> 赞同：0
> 
> 时间：2012-11-08T18:26:19.733
> 
> 标签：javascript, compiler-construction, minify, lint, error-checking

我知道有 JavaScript 混淆器/缩小器和检查器（如 Lint）。但是有没有一个集成的并且有项目支持的？

基本上，我有一堆作为项目一部分的 JavaScript 文件，我希望能够有一个工具自动检查所有这些文件是否存在各种错误（就像编译器一样）并为每个文件生成混淆/缩小的代码作为输出。

您使用了哪些可以推荐的集成工具（我不是要求最好的，只是您个人使用并可以推荐的工具）。如果没有工具可以满足上述所有要求，那么执行各个部分的工具（例如检查）又如何呢？再说一遍，您已经使用过并且可以推荐的东西。

# jquery - jQuery ajax 立即使用 keyup() 更新值

> ID：13295349
> 
> 赞同：0
> 
> 时间：2012-11-08T18:26:18.810
> 
> 标签：jquery, ajax

我有一个小的 jQuery 函数，我用它来捕获文本字段的输入作为邮政编码，然后从数据库中获取一些相关数据（降雪和风速）。

功能：

```
$(document).ready(function(){
    var zip = $('#id_zipcode');
    zip.change(function() {
      function updateEvnFactors(){
        var selected = zip.val();
        if (selected) {
            $.getJSON(get_zip_factors_url, {zipcode: selected}, function(env_data, jqXHR){
                $('#snow_fall').html(env_data[0].snow);
                $('#wind_speed').html(env_data[0].wind);
            });
        }
      }
      updateEvnFactors();
      $('#id_zipcode').keyup(updateEvnFactors);
   });
}); 
```

其中元素`#id_zipcode`是文本输入。这以一种基本的方式工作，但 html 元素`#snow_fall`仅`#wind_speed`在用户切换到另一个表单字段或单击`#zip_code`输入之外的某个位置时才会更新。

一旦从 ajax 调用返回了有效值（即传递了有效的邮政编码），我缺少什么来更新 html 元素。

作为一个额外的问题 - 我如何将我的 ajax 限制为仅在输入字段中有 >=5 位时才被激活？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:29:22.383

> 作为一个额外的问题 - 我如何将我的 ajax 限制为仅在输入字段中有 >=5 位时才被激活？

```
if (selected.length >= 5) 
```

现在关于主要问题，您订阅了该`onchange`事件，它仅在更改 + 模糊（失去焦点）时触发。这就是规范所说的。

您可以更改为：

```
$('#id_zipcode').keyup(function() {
    var selected = this.value;
    if (selected.length >= 5) {
        $.getJSON(get_zip_factors_url, {
            zipcode: selected
        }, function(env_data, jqXHR) {
            $('#snow_fall').html(env_data[0].snow);
            $('#wind_speed').html(env_data[0].wind);
        });
    }
}).keyup();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:32:25.613

我相信`onchange`只有在该领域失去焦点时才会触发该事件。我认为您的代码应该看起来更像这样：

```
$(document).ready(function() {
    $('#id_zipcode').keyup(function() {
        if ($(this).val().length >= 5) {
            $.getJSON(get_zip_factors_url, {zipcode: selected}, function(env_data, jqXHR) {
                $('#snow_fall').html(env_data[0].snow);
                $('#wind_speed').html(env_data[0].wind);
            });
        }
    });
}); 
```

# javascript - 谷歌地图 API 搜索

> ID：13295358
> 
> 赞同：0
> 
> 时间：2012-11-08T18:26:37.800
> 
> 标签：javascript, arrays, google-maps, google-api

我目前正在开发一个使用 google maps API 的 Javascript 程序。它需要做什么：

1.  允许用户输入位置。
2.  一旦用户单击“查找”按钮，它将用户输入的位置转换为经度和纬度坐标。
3.  然后它运行一个算法来计算用户输入的位置和 20 个硬编码的 lng 和 lat 坐标之间的距离。
4.  它将以公里为单位输出距离。
5.  然后它必须循环并找到最短距离并获取 lng 和 lat id，这样我就知道哪个位置是最短距离。

我已经完成了第 1 步和第 2 步，但我找不到存储位置索引（识别它的方法）以及 lng 和 lat 点的方法，以便我可以遍历它们并将它们与用户输入的位置。我也想不出一种方法来找到最短距离的所有点都可以找到最近的 lng 和 lat。

任何帮助，将不胜感激，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:19:25.670

我认为您应该能够根据您的目的调整此答案。

```
//forumla for calculating distances between points
var getDistance = function(p1, p2) {
  var rad = function(x) {return x*Math.PI/180;}
  var R = 6371; // earth's mean radius in km
  var dLat  = rad(p2.lat() - p1.lat());
  var dLong = rad(p2.lng() - p1.lng());

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) * Math.sin(dLong/2) * Math.sin(dLong/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;

  return d.toFixed(3);
}

// LatLng object with your current coordinates
var yourLocation = new google.maps.LatLng(yourlat, yourlng);

// populate an array of hard coded LatLng objects 
var twentypoints = {};
twentypoints['hardcodedName1'] = new google.maps.LatLng(lat1, lng1);
twentypoints['hardcodedName2'] = new google.maps.LatLng(lat2, lng2);
twentypoints['hardcodedName3'] = new google.maps.LatLng(lat3, lng3);
  ...

// calculate the minimum distance
var closestLocName, minDist;
for (var hardcodedName in twentypoints) {
  tempMinDist = getDistance(twentypoints[hardcodedName], yourLocation));
  if (minDist === undefined || tempMinDist < minDist) {
    minDist = tempMinDist;
    closestLocName = hardcodedName;
  }
}

console.log('Closest location is called ' + closestLocName + '.');
console.log('Closest location is ' + minDist + 'km away.'); 
```

# javascript - 为什么 Array.prototype.slice.call(nodeList) 用于 DOM 元素？

> ID：13295361
> 
> 赞同：2
> 
> 时间：2012-11-08T18:26:45.020
> 
> 标签：javascript, arrays, nodelist

许多 JavaScript 库（jQuery、Zepto）似乎在 querySelectorAll()、getElementsByTag 或 ClassName 结果上调用 Array.prototype.slice.call...

通过阅读 StackOverflow 上许多类似的问题/答案，我确实明白它会将 NodeList 结果转换为真正的 Array，以便您可以对 NodeLists 上不可用的结果调用 Array 方法（切片、弹出） - 但我没有'不明白是为什么？您通常不需要在 DOM 节点列表上进行切片/弹出 + NodeLists 已经具有长度属性，因此无论如何它们都是可遍历的。

一些答案似乎暗示这是因为 NodeList 指向活动的 DOM 对象。但是如果你把它转换成一个数组，引用仍然指向活动的 DOM 节点——那么有什么区别呢？

还是我完全想念的其他东西？它是否有助于 Zepto/jQuery 以某种方式缓存 DOM 元素的多个属性调用？（虽然我真的不明白，因为这些仍然是实时的 DOM 引用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:39:09.717

> 您通常不需要在 DOM 节点列表上进行切片/弹出

实际上，你这样做了，这正是它有必要的原因。

例如， , 等如何`.eq()`工作`.first()`。jQuery 对象包含一个数组中的*副本*，`NodeList`然后各个方法获取该数组的切片。同样，您不能将`.add()`节点连接到`NodeList`.

此外，即使其中的元素随后从 DOM 中删除，这些数组也需要保持有效。数组中的引用仍然有效，可用于将这些元素重新插入 DOM。

如果你只有一个 live`NodeList`元素，当它们从 DOM 中删除时，它们会自动从列表中消失，并且会永远丢失，除非你对它们有单独的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T20:40:48.070

> ...因为 NodeList 指向活动的 DOM 对象...

不，这是个误会。关键不是列表中的每个节点都是“活”的 DOM 对象（真实但不相关），而是**列表本身**是“活的”。换句话说，只要 DOM 发生更改，列表的内容就可能随时更改（甚至增长或缩小）。

如果您对列表中的项目执行更改 DOM 的操作，则列表本身可能会在您使用它时即时更改。这意味着您的代码在幕后可能会遇到非常奇怪的递归和/或性能问题，而您却没有意识到这一点，而且源代码中几乎没有任何迹象。

将 NodeList 转换为常规的 Javascript 数组会消除列表本身的这种“活跃性”，从而消除了自取其辱的机会。

# matlab - 无法绘制数据

> ID：13295362
> 
> 赞同：0
> 
> 时间：2012-11-08T18:26:50.793
> 
> 标签：matlab, plot

我写了以下matlab函数

```
function [t x] = MSD(xo, z, fo, c)
T = 1/fo; t = 0:T/10:10*T; fd = fo * sqrt(1-z*z);
wo = 2*pi*fo; w1 = wo * z; wd = 2*pi * fd;
x = xo * exp(-w1*t) .* cos(wd*t);
grid on;
plot(t,x,c); 

xlabel('time [s]'); 
ylabel('displacement');
s = sprintf('unforced Mass-Spring Damper [damped freq: %.3f Hz]', fd); title(s);
end 
```

当我运行它时，命令窗口中出现以下错误：

```
MSD(.1, .7,.4, .2)
??? Error using ==> plot
Data must be a single matrix Y or a list of pairs X,Y

Error in ==> MSD at 13
plot(t,x,c); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:44:20.740

Acorbe 的回答是正确的，但它没有解释*为什么*。

简而言之，您可以使用该[`plot`](http://www.mathworks.com/help/matlab/ref/plot.html)命令绘制一个向量`x`与一个向量`y`，如下所示：

```
plot(x, y) 
```

或在相同的轴上绘制多个图形（向量`x1`对`y1`、向量`x2`对`y2`等...），例如：

```
plot(x1, y1, x2, y2, x3, y3, ...) 
```

后一种语法要求输入向量的数量是**偶数**，因为它**成对**地绘制它们。

我相信您希望显示为与图表`c`相交的线。`x(t)`为此，您需要创建一个新函数`y(t) = c`以便绘制它：

```
y = c * ones(size(t));  % # Or c * ones(1, length(t)) like Acorbe has shown 
```

这只是创建了一个与 t 大小相同的向量，其中每个元素等于`c`。只有这样，您才能将它绘制在与 相同的轴上`x(t)`，如下所示：

```
plot(t, x, t, y) 
```

或更短的形式：

```
plot(t, x, t, c * ones(size(t))) 
```

希望这能说明问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:33:35.370

因此你的电话应该是

```
 plot(t,x,t,c*ones(1,length(t))); 
```

简化后，等效于：

```
 plot(t,x);
 hold on

 c_vect = c * ones(1, length(t));  //you need a vector (constant in this case) 
                                   //to be plotted against t!!
                                   //ones(1, length(t)) will give you
                                   //[1111 ... 1] (as many ones as 
                                   //the entries of t)
 plot(t,c_vect); 
```

# unit-testing - 如何对 Ember 路由器进行单元测试？

> ID：13295363
> 
> 赞同：3
> 
> 时间：2012-11-08T18:26:50.040
> 
> 标签：unit-testing, ember.js

我查看了 Ember.Router 的单元测试，并注意到它没有在其路由上定义任何 connectOutlets()。

但是，我想了解我应该如何在我的应用程序中对我自己的路由器扩展进行单元测试。显然我不希望所有 dom 元素都为单元测试实例化。有没有办法单独对路由器进行单元测试？某种“无头”或“测试”标志？

还是我应该只专注于集成测试并将我的路由器测试放在那里？

```
 App.Router = Ember.Router.extend({}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:57:19.360

在相对较新的 Ember 版本中，进行了更改以在 DOM 就绪时自动初始化应用程序。如您所见，这可能会在测试期间引起问题。选择退出该自动初始化的方法是`autoinit: false`在您的`Ember.Application`.

```
App = Ember.Application.create({
    autoinit: false
});

/* ... */

App.initialize(); 
```

# excel - 使 X 和 Y 轴使用相同的比例

> ID：13295366
> 
> 赞同：1
> 
> 时间：2012-11-08T18:26:57.533
> 
> 标签：excel, charts

我在 Excel 2007 2D 图表中创建以说明在不同行星上的重力投掷物体。一切正常，但我希望轴具有相同的比例，因为现在图表与现实不符。

轴上的值取自工作表中的数据。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:25:00.840

右键单击垂直轴编号（如 8），然后单击“设置轴格式”。在“轴选项”下，将最大值从“自动”更改为“固定”，然后输入 25。

我使用 Excel 2010 做到了这一点，但我相信这个过程在 2007 年是相同的（或相似的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:15:30.750

可以从灰色区域的边缘或从绘图的边缘拖动绘图。如果将灰色区域向右拖动，则 25 米距离标记也会向右移动。或者，如果您想用高度压缩比例：从上边缘向下拖动绘图。由于另一个轴保持不变，比例在某个时刻应该是 1:1。我什至会用尺子来确保:-)

如果想要在绘图上方或旁边获得更多空间：右键单击 y 轴或 x 轴（可能很难做到正确），设置轴格式，选项卡比例，根据需要设置最大值并重复拖动。

# c - 在 C 中声明 main 的不同方法

> ID：13295368
> 
> 赞同：0
> 
> 时间：2012-11-08T18:27:00.623
> 
> 标签：c

> **可能重复：**
> [函数声明用例的替代 C 语法](https://stackoverflow.com/questions/1630631/alternate-c-syntax-for-function-declaration-use-cases)

`main()`我在一个旧的 C 程序中看到了这个非常不同的定义。（它使用 gcc**编译**）

```
main(argc, argv)
   int argc;
   char *argv[]; 
   {
   ...
   ...

   } 
```

声明了什么样的变量，为什么要在函数大括号开始之前完成它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:29:18.497

这是 C 中函数定义的旧风格。这种非原型风格在 C 标准中被标记为过时，不应使用。

`int`并且在 C 中不再允许省略返回类型（隐式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:29:11.167

它根据 C 规范隐式返回`int`（尽管根据 this 中的其他答案和链接的问题 this 在 C99 中已过时？），与具有未声明返回类型的函数一样。

这是一种老式的声明方式，它来自 Fortran。

```
main(argc, argv)
   int argc;
   char *argv[]; 
```

准确地告诉您您的期望 - argc 是一个`int`并且`argv`是`char *`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:29:29.440

这称为 K&R 风格的定义。您基本上只是列出参数并在结束参数括号和开始大括号之间声明它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:29:29.573

那是 1989 C 之前的旧 KnR C 风格（非标准）。这是一种将参数传递给函数的方法.. 不仅与 main() 一样，其他所有函数也是如此。

例如：

```
void non_main(argx, argy)
int argx,argy;
{
   /*do something here*/
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T18:29:33.627

这只是指定参数类型的另一种方法`main`。它完全等同于`main(int argc, char *argv[])`。这被称为 K&R 风格，因为它是原始 C 编译器和 K&R 书籍中使用的原始风格。它被认为是过时的；它与 C++ 不兼容。有一个 GCC 选项可以警告它，`-Wold-style-definition`但是您仍然会在一些旧代码中看到它。

# mysql - MySql Vs PHP 星期几的数字表示

> ID：13295374
> 
> 赞同：2
> 
> 时间：2012-11-08T18:27:12.367
> 
> 标签：mysql, iso8601, date-format, php

在我的 PHP 代码中，我使用 date("N") ISO-8601 数字表示一周中的第 1 天（周一）到 7（周日）。

现在，当我想进行查询以搜索特定日期时。

我在 MySQL 中发现：

*   使用**%w**的**date_format**将返回 (0=Sunday..6=Saturday)

***   **DAYOFWEEK(date)**将返回 (1 = Sunday .. 7=Saturday)** 

 **有没有一种快速的方法来解决这个问题**而不做一些 PHP**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T10:25:19.423

```
SELECT (DAYOFWEEK(column)+6)%7 as phpdaten FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:39:28.073

正如[评论中所说](https://stackoverflow.com/questions/13295374/numeric-representation-of-the-day-of-the-week-mysql-vs-php/13295564#comment18129180_13295374)：

减去或添加一个（对 PHP 或对您的 MySQL 查询）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T18:46:18.540

试图匹配...

```
PHP日期（'N'）：

周一 周二 周三 周四 周五 周六 周日
1 2 3 4 5 6 7
```

对于其中之一...

```
MySQL DATE_FORMAT(col, '%w'):

周一 周二 周三 周四 周五 周六 周日
1 2 3 4 5 6 0

MySQL DAYOFWEEK(col):

周一 周二 周三 周四 周五 周六 周日
2 3 4 5 6 7 1

```

我会使用一个`CASE`声明，`DATE_FORMAT`因为你只需要担心星期天。

```
SELECT
    CASE
        WHEN DATE_FORMAT(col, '%w') = 0
            THEN 7
        ELSE DATE_FORMAT(col, '%w')
   END AS dayofweek
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-22T09:41:50.440

令我惊讶的是没有人使用 mysql `WEEKDAY`。在[ISO -8601](https://en.wikipedia.org/wiki/ISO_week_date)中，一周从星期一开始。

> 平日（日期）
> 
> 返回日期的工作日索引（0 = 星期一，1 = 星期二，... 6 = 星期日）。
> 
> DAYOFWEEK（日期）
> 
> 返回日期的工作日索引（1 = 星期日，2 = 星期一，...，7 = 星期六）。

```
mysql                   PHP                          result
WEEKDAY(date)       ==  date('N' , timestamp) - 1    0: Monday, 1: Tuesday, … 6: Sunday 
WEEKDAY(date)  + 1  ==  date('N' , timestamp)        1: Monday, 2: Tuesday, … 7: Sunday

DAYOFWEEK(date) -1  ==  date('w' , timestamp)        0: Sunday, 1: Monday, … 6: Saturday
DAYOFWEEK(date)     ==  date('w' , timestamp) + 1    1: Sunday, 2: Monday, … 7: Saturday 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T15:09:15.780

例如，对于当前日期，您可以选择一周的第一天，如下所示：

```
SELECT  DATE_SUB(now(), INTERVAL
            IF (DATE_FORMAT(now(), '%w') -1  = -1,
                DATE_FORMAT(now(), '%w') + 6,
                DATE_FORMAT(now(), '%w') -1) DAY) FIRST_DAY,
        now(); 
```**

# android - TransactionTooLargeException

> ID：13295375
> 
> 赞同：2
> 
> 时间：2012-11-08T18:27:13.320
> 
> 标签：android

这些简单的代码行让我获得了`TransactionTooLargeException`. 在同一个函数中，在另一个条件分支中，我有另一个对话框，效果很好。我完全不知所措。你能提出什么建议吗？

谢谢

```
AlertDialog.Builder b = new AlertDialog.Builder(this);              
b.setTitle(R.string.choose_winner);
AlertDialog dialog = b.create();
dialog.show(); 
```

这是日志，抱歉我第一次忽略了它。

> 11-08 19:20:12.455：E/AndroidRuntime(1431)：致命异常：主要
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): java.lang.RuntimeException: 添加窗口失败
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.setView(ViewRootImpl.java:491)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.Window$LocalWindowManager.addView(Window.java:537)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.app.Dialog.show(Dialog.java:278)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.sebmag.acquiroid.GameActivity.play(GameActivity.java:442)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.sebmag.acquiroid.GameActivity$PlayView.onTouch(GameActivity.java:126)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.View.dispatchTouchEvent(View.java:5536)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.app.Activity.dispatchTouchEvent(Activity.java:2364)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.View.dispatchPointerEvent(View.java:5721)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.os.Looper.loop(Looper.java:137)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.app.ActivityThread.main(ActivityThread.java:4575)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
> 
> 11-08 19:20:12.455：E/AndroidRuntime（1431）：在 dalvik.system.NativeStart.main（本机方法）
> 
> 11-08 19:20:12.455：E/AndroidRuntime(1431)：由：android.os.TransactionTooLargeException 引起
> 
> 11-08 19:20:12.455：E/AndroidRuntime（1431）：在 android.os.BinderProxy.transact（本机方法）
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.IWindowSession$Stub$Proxy.add(IWindowSession.java:516)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): 在 android.view.ViewRootImpl.setView(ViewRootImpl.java:481)
> 
> 11-08 19:20:12.455: E/AndroidRuntime(1431): ... 33 更多
> 
> 11-08 19:20:12.650：E/AndroidRuntime(1431)：错误报告崩溃
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): android.os.DeadObjectException
> 
> 11-08 19:20:12.650：E/AndroidRuntime（1431）：在 android.os.BinderProxy.transact（本机方法）
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): 在 android.app.ActivityManagerProxy.handleApplicationCrash(ActivityManagerNative.java:2867)
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): 在 com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException(RuntimeInit.java:72)
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): 在 java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:693)
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): 在 java.lang.ThreadGroup.uncaughtException(ThreadGroup.java:690)
> 
> 11-08 19:20:12.650: E/AndroidRuntime(1431): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:22:58.310

问题不是我想的那样。即我陷入了无限的while循环。问题结束，耻辱+1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T01:21:17.390

我可以看到你解决了你的问题 :) 但是让我为其他有这个问题的迷失灵魂写几行我几天前也有这个问题。

事实证明，我的问题是试图在活动之间移动大量对象图。传输的数据有 1MB 的限制，现实生活中的限制甚至更小。我通过恢复到良好的旧 java 序列化而不是通过 Parceler 库使用 Parcelable 解决了这个问题。[此博客文章](https://medium.com/nemanja-kovacevic/yet-another-post-on-serializable-vs-parcelable-1e829e98472)中的更多信息。

# sql - 如何在 SSMS（SQL Server Management Studio）中自动设置 BEGIN_TRANSACTION？

> ID：13295376
> 
> 赞同：0
> 
> 时间：2012-11-08T18:27:17.933
> 
> 标签：sql, ssms

使用`Options > Query Execution > ANSI > SET IMPLICIT_TRANSACTIONS`，每个批次都不会自动提交。

即便如此，我必须`begin transaction`明确地批量运行，即如果我只是在`update table_name set col_name = 'something'`没有 的情况下运行`begin trans`，更新会自动提交，我真的可以要求设置 SSMS 以便在我执行`update\insert\delete`批处理时自动创建事务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:32:51.707

我认为 IMPLICIT_TRANSACTIONS 设置的工作方式与您希望的一样。除非我不正确地理解你的问题。

你看过[MSDN](http://msdn.microsoft.com/en-us/library/ms187807.aspx)吗？

将 IMPLICIT_TRANSACTIONS 设置为在 SSMS 中检查

然后打开一个新的查询窗口

```
USE TempDb
CREATE TABLE tmp (f INT)
INSERT tmp VALUES (1)
print @@trancount 
```

是 1\. 这不是你要找的吗？如果您尝试关闭该窗口，则会提示您有未提交的事务。

# ruby-on-rails-3 - Rails 3.2 资产：预编译权限被拒绝 123

> ID：13295377
> 
> 赞同：0
> 
> 时间：2012-11-08T18:27:19.560
> 
> 标签：ruby-on-rails-3, asset-pipeline, assets, precompile

我正在尝试预编译我的 Rails 应用程序，但遇到了这个我不知道如何处理的奇怪错误？

rake 资产：预编译 --trace

```
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Permission denied - /123
/Users/philip/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb:247:in `mkdir' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:29:47.780

您正在创建`/123/`可能是受保护目录的应用程序。你真的应该在你的主文件夹中创建你的应用程序。

但是，如果您想强制，`/123`那么您可以运行`sudo rake assets:precompile`并且它会起作用。

# azure - 用于定期分布数据的 Azure 表存储分区

> ID：13295382
> 
> 赞同：3
> 
> 时间：2012-11-08T18:27:48.967
> 
> 标签：azure, database-design, storage, partitioning

我一直在阅读如何对 Azure 表存储进行分区以确保高性能。我想知道我提出的策略是否能够为数据存储提供高效且可扩展的插入和简单查询。

我有 1000 个不同的进程每 30 秒将一小包数据（约 50 字节）上传到 AZT。我的查询几乎总是按流程和时间进行简单查询。例如，我想查询给定日期从晚上 7 点到晚上 9 点的所有进程 A 的日志。

我提出的策略是为每个进程创建一个表（1000 个表），然后对行进行分区，使每个分区包含 6 小时的数据（每天 4 个新分区，每个分区 720 行）。从 11 月 8 日午夜到早上 6 点，分区键“NOV82012-0”将包含 720 行。'NOV82012-1' 将包含 6AM-Noon 等...

这应该确保我在任何分区中的行数始终少于 1000 行，这样我就不必担心延续令牌。我也可以轻松地按进程“过滤”，因为每个进程的数据都有自己的表。

这是这种情况下的理想策略吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:48:12.793

实际上，如果您使用的是 .NET SDK，则无需担心延续令牌。通过对查询调用[AsTableServiceQuery()](http://msdn.microsoft.com/en-us/library/ee741713.aspx)，您将获得一个自动处理延续令牌的对象。

根据您所说的，您想根据一些条件进行过滤：

*   过程
*   日期
*   时间

我真的认为不需要为每个进程创建 1 个表。您可以使用组合键对其进行分区：Process+Date。一个例子：

*   A_20121108
*   A_20121109
*   B_20121108

通过将流程名称与日期结合起来，您可以坚持使用单个表格，只是为了让事情变得更容易。现在关于行，每个分区有 1000 多个项目是可以的。将给定日期的所有行都放在同一个分区中的好处是，您可以根据行键轻松选择该分区中的范围（这是半伪代码，没有测试它 - 您可能想要改进行键）。

```
from item in context.CreateQuery<XXX>("XXX") 
where item.PartitionKey == "A_20121108" && item.RowKey.CompareTo("20121108120000") >= 0 && item.RowKey.CompareTo("20121108193000") <= 0
select item; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:17:21.650

我同意 Sandrino 的建议，即为所有流程使用一张表。

ATS 做得不太好的一件事是支持删除。考虑到这一点，我建议在表级别按时间范围进行分区。这样，您可以在不需要该时间范围内的数据时删除该表。

一个键控结构可以是

表名 = 前缀 + YYYYMM（年和月）
示例 Process201211

PKey = Process + DDHHMM（日期、小时和分钟）
示例 A081834、B122359 等

RKey = 秒或亚秒。
如果您不能保证亚秒级的唯一性，请考虑附加 GUID

# php - class_parents()：类不存在

> ID：13295383
> 
> 赞同：1
> 
> 时间：2012-11-08T18:27:50.433
> 
> 标签：php, doctrine, doctrine-orm

我设置了以下层次结构：

```
/src
    /application
        /models
            User.php, Item.php, etc.
   /config
        /mappings
            /yaml
                application.models.User.dcm.yml 
```

这些模型的命名空间为“application\models”。他们都“使用 Doctrine\ORM\Mapping AS ORM”；我在引导程序中使用 Doctrine 的 ClassLoader。这些似乎都有效。

每当我运行该应用程序时，都会出现以下错误：

```
Warning: class_parents(): Class User does not exist and could not be loaded in /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 40

Warning: array_reverse() expects parameter 1 to be array, boolean given in /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php on line 257

Warning: Invalid argument supplied for foreach() in /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php on line 257

Fatal error: Uncaught exception 'ReflectionException' with message 'Class User does not exist' in /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php:73
Stack trace:
#0 /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php(73): ReflectionClass->__construct('User')
#1 /Library/WebServer/Documents/goodsam/library/Doctrine/ORM/Mapping/ClassMetadataInfo.php(867): Doctrine\Common\Persistence\Mapping\RuntimeReflectionService->getClass('User')
#2 /Library/WebServer/Documents/goodsam/library/Doctrine/ORM/Mapping/ClassMetadataFactory.php(511): Doctrine\ORM\Mapping\ClassMetadataInfo->initializeReflection(Object(Doctrine\Common\Persistence\Mapping\RuntimeReflectionService))
#3 /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/AbstractClassMetadataFactory.php(300): Doctrine\ORM\Mapping\ClassMetadataFactory->initializeReflection(Object(Doctrine\ORM\Mapping\ClassMetadata), Object(Doctrine\Comm in /Library/WebServer/Documents/goodsam/library/Doctrine/Common/Persistence/Mapping/RuntimeReflectionService.php on line 73 
```

* * *

首先，Doctrine 说 yaml 映射文件必须是完全限定的类名。因此，我将它命名为它指向 application\models 目录的位置。但是在示例文档中，它似乎想要完全限定映射文件本身？这应该是哪一个？

这是我的映射文件的顶部：

```
# application.models.User.dcm.yml
application\models\User: 
```

如果这看起来是对的，还有其他关于可能被破坏的线索吗？

# php - 列出字段值为 '1' 且 id=$id 的字段名称

> ID：13295390
> 
> 赞同：0
> 
> 时间：2012-11-08T18:28:07.360
> 
> 标签：php, mysql, arrays, list, field-names

我有一个表 'jobs' 的字段 id、p1、p2、p3，其中 p1、p2、p3 下的一些条目的值为 '1'。我如何获得一个简单的字段列表（p1、p2 或 3），这些字段在 id=$id 的表作业行中的值为“1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:30:15.853

就像是：

```
SELECT ... WHERE (p1=1 OR p2 =1 OR p3=1)  AND id =$id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:30:30.143

```
SELECT * FROM jobs WHERE id=$id AND (p1 = 1 OR p2 = 1 OR p3 = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:31:23.557

尝试：

```
SELECT p1, p2, p3 FROM jobs WHERE id=$id AND (p1 = 1 OR p2 = 1 OR p3 = 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:32:06.690

```
$row = mysqli_fetch_assoc($query_result);
$list = '';//or array
foreach ($row as $key=>$val) {
    if ($key != 'id' and $val == 1) { //or if substr($key, 0, 1) == 'p' and $val == 1)
        $list .= $key.', ';
    }
} 
```

# c# - LINQPad 对比 .NET 正则表达式性能不匹配

> ID：13295394
> 
> 赞同：0
> 
> 时间：2012-11-08T18:28:15.217
> 
> 标签：c#, regex, linqpad

总而言之，我有一系列`string`由“GO”分隔的 SQL 语句（不区分大小写，因此“Go”、“go”等也是有效的）。如果我有这样的声明

```
string str = "INSERT INTO People \r\n" + 
                "VALUES (3, 'Gandalf', 'The Gray'); \r\nGO\r\n" + 
             "INSERT INTO People \r\n" + 
                "VALUES (4, 'Legolas', 'Camus'); \r\nGO"; 
```

我想避免在“Legolas”中的“go”中匹配。为此，我在 LINQPad 中设计了一个正则表达式，具有*负前瞻*和*正后瞻*，并且有

```
string str = "INSERT INTO People \r\n" + 
                "VALUES (3, 'Gandalf', 'The Gray'); \r\nGO\r\n" + 
             "INSERT INTO People \r\n" + 
                "VALUES (4, 'Legolas', 'Camus'); \r\nGO";
Regex regGo = new Regex(@"(?<=\b)(?i)GO(?!\w+)");
MatchCollection matches = regGo.Matches(str);
foreach (Match m in matches)
{
    m.Dump();
} 
```

哪个可以满足我的要求，即它仅在它是新的“GO”且不跟随任何东西时才匹配“GO”（无论如何）。这适用于 LINQPad - 即返回所需的结果；但**不在**我的 C# 应用程序中。

为什么会出现差异，我做错了什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:01:55.153

我能够让您的示例同时在 LinqPad 和控制台应用程序中工作。

简化正则表达式并避免使用向后看和向前看的建议是使用这样的单词边界：

> `\b(?i)GO\b`

这将实现相同的结果并且更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:38:16.643

只是一个小建议：

请改用以下正则表达式：

```
^GO$ 
```

`GO`仅当它是一行中的第一个和最后一个字符串时才匹配。

# jquery - 在页面启动时使用 JQuery .load() 和 .hide() 和 .show()

> ID：13295396
> 
> 赞同：5
> 
> 时间：2012-11-08T18:28:21.743
> 
> 标签：jquery

我正在使用以下代码来显示`div`页面启动：

```
$("#mydiv").hide().show("slow"); 
```

这将使`div`页面启动时出现缓慢的动画（页面加载/刷新）

但是，如果在页面启动时（页面加载/刷新），我想在动画开始之前将另一个文件中的 HTML 插入到这个文件中`div`，我会尝试这样做：

```
$("#mydiv").load("myPage.html");
$("#mydiv").hide().show("slow"); 
```

当我这样做时，动画在启动时不再起作用（页面加载/刷新）。如何从另一个文件加载 html 并且仍然在页面启动时动画工作（页面加载/刷新）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T18:33:47.913

```
$(document).ready(function(){  
  $('#mydiv').load('myPage.html', function() {
      $(this).show();
    });
}); 
```

在你的 CSS 添加

```
#mydiv { 
   display: none; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T18:34:08.130

最好使用 CSS 进行初始隐藏`div`

```
#mydiv { display: none } 
```

然后你可以展示它

```
$("#mydiv").load("myPage.html", function() {
    $(this).show(600);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:33:08.553

将 show 部分作为回调添加到负载：

```
$("#mydiv").hide().load("myPage.html", function(){
    $(this).show('slow');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T18:34:39.630

我建议隐藏页面，加载内容然后显示 div。您可以简单地使用以下的第二个参数 ( `complete`) [`.load(url[, data][, complete])`](http://api.jquery.com/load/)：

```
$('#myDiv').load('...', function() {
    // gets executed when the content is loaded
    $(this).show('slow');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T18:47:31.657

我想出了一个办法。

你可以使用 ajax 做这样的事情：

```
$.ajax({
        url: "myPage.html",
        cache: false
    }).done(function (html) {
        $("#myDiv").append(html);
        $("#myDiv").hide().show("slow");
    }); 
```

这确保页面在动画开始之前被调用！

# ubuntu - Postfix 和外部邮件服务器在同一个域上

> ID：13295399
> 
> 赞同：-2
> 
> 时间：2012-11-08T18:28:29.043
> 
> 标签：ubuntu, smtp, exchange-server, sendmail, postfix-mta

这有点奇怪......让我给你一些背景。

我们有一个由 GoDaddy 托管的专用服务器，我们还有一个在我们办公室本地托管的 Exchange 服务器。Web 服务器已设置 DNS 记录以使用 Exchange 作为默认邮件服务器。

我遇到的问题是使用交换服务器从网站（PHP SendMail 脚本）发送电子邮件，所以我选择设置本地 SMTP 服务器来发送电子邮件。

我以前从未设置过 Postfix，想知道这是否可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:12:54.987

Go Daddy 的专用服务器必须使用我们的中继服务器来发送电子邮件。您无法通过本地交换服务器中继这些消息。您可以单独保留 MX 记录，以便通过交换服务器接收域的电子邮件。在 Postfix 中，您只需要指定正确的 Go Daddy 中继服务器。为此，您需要编辑文件 /etc/postfix/main.cf。在此文件中，“relayhost”选项应等于您服务器的中继服务器。您可以在您的帐户中找到它。

1.  登录您的客户经理。
2.  单击服务器。
3.  单击要查看其邮件服务器的 VPS 或专用服务器帐户旁边的启动。
4.  在帐户摘要区域中，SMTP 服务旁边会显示您的邮件服务器名称。

如果您的服务器上有 Plesk 控制面板并通过控制面板设置域，您将需要禁用服务器上域的电子邮件服务。这不会阻止发送电子邮件，但只会强制从服务器发送到服务器上托管的域的任何电子邮件不在本地发送，而是检查 MX 记录并发送到您的交换服务器。

# javascript - 扩展 JavaScript 对象函数

> ID：13295400
> 
> 赞同：1
> 
> 时间：2012-11-08T18:28:38.373
> 
> 标签：javascript, tinymce, wordpress

我需要`tinymce.plugins.WordPress`从我的`tinymce.plugins.XYZ`对象扩展一个函数。我需要`_hideButtons`在这个核心对象中扩展：

```
(function() {
    var DOM = tinymce.DOM;

    tinymce.create('tinymce.plugins.WordPress', {
        mceTout : 0,

        _hideButtons : function() {
            if ( !this.mceTout )    
                return;

            if ( document.getElementById('wp_editbtns') )
                tinymce.DOM.hide('wp_editbtns');

            if ( document.getElementById('wp_gallerybtns') )
                tinymce.DOM.hide('wp_gallerybtns');

            clearTimeout(this.mceTout);

            this.mceTout = 0;
        };

    }); 

    tinymce.PluginManager.add('wordpress', tinymce.plugins.WordPress);

})(); 
```

这是需要进行扩展的对象：

```
(function() {  

    tinymce.create('tinymce.plugins.XYZ', {  
         /* here */
    });  

    tinymce.PluginManager.add('youtube', tinymce.plugins.XYZ);  

})(); 
```

感谢您的帮助！

**供参考：**我正在向自定义简码元素（如 wp 库）添加`edit`和按钮`delete`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:13:59.663

你不想扩展它。你只需要重写有问题的函数。

# jquery - 如何直接从 LocalStorage 创建和运行 html 页面？

> ID：13295402
> 
> 赞同：1
> 
> 时间：2012-11-08T18:28:43.317
> 
> 标签：jquery, html, css, local-storage, offline

使用 JavaScript、HTML 和 CSS，也许还有 PhoneGap（可选），你如何直接从 LocalStorage 创建和运行一个简单的 html 页面？我基本上想要一个自定义 HTML 页面，我可以第一次通过我的 ipod 在线查看，当我通过触摸离线时，我仍然可以访问相同的源并与页面交互，就好像我仍然有互联网一样。我找不到任何关于如何构建这个项目的指南。

感谢您对教导这一点的资源的任何指示或方向！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:31:14.960

`localStorage`非常有限，尤其是在尺寸上，并且不专门用于此。

要使您的站点可以离线使用，您需要使用新的 HTML5 应用程序缓存。

这是一个非常好的教程：[http ://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/)

简介摘录：

> 离线访问基于 Web 的应用程序变得越来越重要。是的，所有浏览器都有缓存机制，但它们并不可靠，并且并不总是像您预期的那样工作。HTML5 通过 ApplicationCache 接口解决了离线的一些烦恼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:34:01.257

您实际上可能正在寻找[ApplicationCache](http://www.html5rocks.com/en/tutorials/appcache/beginner/)。AppCache 允许您向操作系统指定它应该在内存中保存哪些文件。将 localStorage 和 sessionStorage 视为各种离线变量，而 AppCache 是告诉设备在本地内存中保存哪些资源以供以后离线浏览的控制器。

# svg - 旋转 with one line of XML

> ID：13295405
> 
> 赞同：3
> 
> 时间：2012-11-08T18:28:58.183
> 
> 标签：svg

有没有办法只用一行代码来旋转 SVG 图形？为所有元素制作组或图层是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T20:32:00.707

由于`transform`文档元素上不允许使用该属性，因此您需要一个`<g>`包含要旋转的所有内容的元素。

但如果 SVG 嵌入在 HTML 中，您可以使用 CSS 转换：

```
<svg xmlns="http://www.w3.org/2000/svg" style="transform:rotate(45deg)" width="10" height="10">
  <rect width="10" height="10"/>
</svg> 
```

不幸的是，现在您仍然需要供应商前缀，例如`-webkit-transform`. 在 Firefox 中，它已经可以在没有前缀的情况下使用。

# sql-server - 通过配置更改事务隔离级别

> ID：13295406
> 
> 赞同：2
> 
> 时间：2012-11-08T18:29:09.190
> 
> 标签：sql-server

我们有一些阻塞问题，因为工作流基础创建了许多可序列化的事务。

您知道将 sql server 中的每个事务从可序列化更改为已提交的方法吗？

可以通过配置实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:34:05.047

否（AFAIK），如果未指定隔离级别，则可以配置使用的默认隔离级别，但如果在事务中指定隔离级别（这会覆盖配置的默认值），则不能。即使可以，这也是**危险**的，因为事务的行为可能需要指定的隔离级别才能正常运行。

# php - 将php变得非常严格

> ID：13295407
> 
> 赞同：1
> 
> 时间：2012-11-08T18:29:09.370
> 
> 标签：php, apache, appfog

我想将我的环境（php.ini 和 apache）配置为尽可能严格。例如：

给定路径中的类`c:\xampp\htdocs\test\classes\My.Class.php`

我想要那个

```
include('\classes\my.class.php'); 
```

**失败。** *（即使在窗户上）*

我想要那个

```
include('./classes/My.Class.php'); 
```

**高兴。** *区分大小写*

主要原因是 appfog 对路径非常严格，不允许在其中使用反斜杠并且区分大小写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:31:57.323

而不是使用包含，也许制作一个使用所有规则的自动加载器。

然后您可以控制文件的包含方式。

# spring - Hibernate+Spring访问Websphere数据源

> ID：13295412
> 
> 赞同：5
> 
> 时间：2012-11-08T18:29:23.730
> 
> 标签：spring, hibernate, websphere, portlet, jta

我正在处理一个门户项目，我被迫使用 WebSphere Portal、Spring portlet MVC 和 Hibernate。我在配置 Spring 和 Hibernate 方面都没有太多经验，因此非常感谢各种帮助。
我在 WebSphere 7.0.0.25（安装了 Portal 6.1）上创建了一个 JNDI 名称为 jdbc/eshop 的 JDBC 数据源。然后我指定了 JAAS 身份验证别名并将其设置为容器管理的身份验证别名。测试连接尝试成功，所以我猜数据源的配置是合适的。我的下一步是在 web.xml 中进行资源引用：

```
<resource-ref>    
    <description>DB Connection</description>    
    <res-ref-name>eshop</res-ref-name>   
    <res-type>javax.sql.DataSource</res-type>    
    <res-auth>Container</res-auth>   
</resource-ref> 
```

为了将 res-ref-name 绑定到 ibm-web-bnd 中的实际 JNDI 名称，我添加了这一行：

```
<resource-ref name="eshop" binding-name="java:comp/env/jdbc/eshop" /> 
```

现在我的休眠实体：

```
@Entity
@Table(name = "HIBERNATE_TEST", schema = "SCHEME_NAME")
public class HibernateTest implements java.io.Serializable {

private short id;
private String text;

public HibernateTest() {
}

public HibernateTest(String text) {
    this.text = text;
}

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name = "ID")
public short getId() {
    return this.id;
}

public void setId(short id) {
    this.id = id;
}

@Column(name = "TEXT", nullable = false, length = 10)
public String getText() {
    return this.text;
}

public void setText(String text) {
    this.text = text;
} 
```

休眠测试DAO：

```
@Repository("hibernateTestDAO")
@Transactional
public class HibernateTestDAO  implements GenericDAO<HibernateTest> {
@Autowired
private SessionFactory sessionFactory;

private Session sess;

public HibernateTestDAO ()  {

}

public SessionFactory getSessionFactory() {
    return sessionFactory;
}

public void setSessionFactory(SessionFactory sf) {
    sessionFactory = sf;
}

public boolean add(HibernateTest item) {
    boolean isAdded = false;
    try {
        sess = sessionFactory.getCurrentSession();
        sess.persist(item);
        isAdded =  true;
    } catch (Exception e) {
        e.printStackTrace();
    } 
    return isAdded;
}

public boolean edit(HibernateTest item) {
    boolean isEdited = false;
    try {
        sess = sessionFactory.getCurrentSession();
        item = (HibernateTest)sess.merge(item);
        sess.update(item);
        isEdited =  true;
    } catch (Exception e) {
        e.printStackTrace();
    } 
    return isEdited;
}

public boolean delete(HibernateTest item) {
    boolean isDeleted = false;
    try {
        sess = sessionFactory.getCurrentSession();
        item = (HibernateTest)sess.merge(item);
        sess.delete(item);
        isDeleted =  true;
    } catch (Exception e) {
        e.printStackTrace();
    } 
    return isDeleted;
}

@SuppressWarnings("unchecked")
@Override
@Transactional(readOnly = true)
public List<HibernateTest> getAll() {
    List<HibernateTest> l = new ArrayList<HibernateTest>(0);
    try {
        sess = sessionFactory.getCurrentSession();
        Query q = sess.createQuery("FROM HibernateTest");
        l = (List<HibernateTest>) q.list();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return l;
}

@Override
@Transactional(readOnly = true)
public HibernateTest getByID(long id) {
    try {
        sess = sessionFactory.getCurrentSession();
        return (HibernateTest)sess.get(HibernateTest.class, new Short((short)id));
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}
} 
```

如您所见，我不想使用程序管理的事务。我了解到，Spring 有 WebSphereUowTransactionManager 类来管理 WebSphere 数据源的事务。我试过这个配置（applicationContext.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd    
    http://www.springframework.org/schema/jee
    http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:annotation-config /> 
    <context:component-scan base-package="test.dao,test.entities,test.portlet.controller" />

        <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/eshop"/>
    <property name="lookupOnStartup" value="false"/>
    <property name="cache" value="true" />
    <property name="proxyInterface"  value="javax.sql.DataSource" />
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory"     class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="annotatedClasses">
        <list>
            <value>test.entities.HibernateTest</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
          <prop key="hibernate.dialect">org.hibernate.dialect.DB2Dialect</prop>
          <prop key="hibernate.show_sql">true</prop>
          <!--           IBM WAS SPECIFIC             -->          
          <prop key="hibernate.connection.datasource">jdbc/eshop</prop>
          <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.CMTTransactionFactory</prop>
          <prop key="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</prop>
          <prop key="hibernate.transaction.jta.platform">org.hibernate.service.jta.platform.internal.WebSphereExtendedJtaPlatform</prop> 
          <!--           /END IBM WAS SPECIFIC        -->
        </props>
    </property>
    </bean>

    <bean id="transactionManager"
    class="org.springframework.transaction.jta.WebSphereUowTransactionManager">
        <property name="userTransactionName" value="java:comp/UserTransaction" />
    </bean>  

    <bean id="hibernateTestDAO" class="test.dao.HibernateTestDAO" /> 

    </beans> 
```

，但它会导致这个异常链：

> 错误 500：org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义名称为“transactionManager”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.springframework.transaction.TransactionSystemException：JTA UserTransaction 在 JNDI 位置 [java:comp/UserTransaction] 不可用；嵌套异常是 org.springframework.jndi.TypeMismatchNamingException：JNDI 位置 [java:comp/UserTransaction] 上可用的类型 [class com.ibm.ws.tx.jta.UserTransactionImpl] 的对象不可分配给 [javax.transaction.UserTransaction]

我知道这种情况下的典型解决方案是从类路径中删除 jta.jar，但我的类路径中没有这个 jar！我只是不明白 IBM 如何使用一些特定于供应商的库来创建 UserTransaction 类，但我应该让它工作，所以我需要你的帮助来配置我的应用程序。

另外我想补充一点，我在这个问题上工作了大约 3 天，尝试了不同的配置，但遗憾的是没有成功。所以我决定使用来自[这个来源](http://devblog.x-sphere.com/2008/01/23/websphere-jndi-spring-framework-hibernate/)的工作（如作者所说）配置作为在这里提出问题的起点。我已经没有办法解决这个问题了，所以我需要帮助。

**更新**

我可以通过 Hibernate 对当前事务的抱怨来解决问题：没有`<tx:annotation-driven transaction-manager="transactionManager" />`指定元素，所以我想 UOWManager 不知道我希望何时开始事务。但事实证明，这并不是我困难的结束。portlet 控制器的代码如下：

```
public class TestDIController extends AbstractController implements ApplicationContextAware{

private ApplicationContext appCtx;

@Override
public ModelAndView handleRenderRequest(RenderRequest request,
        RenderResponse response) throws Exception {
    appCtx = getApplicationContext();
    System.out.println(UserTransaction.class.getClassLoader());
    @SuppressWarnings("rawtypes")
    GenericDAO cd = (GenericDAO)appCtx.getBean("hibernateTestDAO");
    ModelAndView m = new ModelAndView("test").addObject("list", cd.getAll());
    return m;
}
} 
```

当 ModelAndView 实例尝试向自己添加新对象时，HibernateTestDAO 的代码行`l = (List<HibernateTest>) q.list();`抛出以下异常

> org.hibernate.exception.SQLGrammarException：无法打开连接
> 
> ...一些堆栈跟踪...
> 
> 原因：java.sql.SQLException: [jcc][t4][10205][11234][3.58.81] 不支持空用户标识。ERRORCODE=-4461，SQLSTATE=42815DSRA0010E: SQL 状态 = 42815，错误代码 = -4 461

而且这个错误比较混乱，因为我已经指定了Container-managed authentication alias，见下图

![在此处输入图像描述](../Images/9c6b6926db0b8a18ddb3f248041e43a4.png) 其中 'auth' 是我的 JAAS-J2C 身份验证别名。当我从管理控制台测试到数据源的连接时，它总是成功的！我尽我所能寻找这个问题的答案，但在这一点上没有结果。例如，[这里描述的问题](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=452219)与我的非常相似，但解决方案不适合我，因为该元素`<lookup-name>`在我的 web.xml 中未定义。可能是我应该在 WebSphere 上配置一些 J2C 选项、资源适配器，可能是 applicationContext 中缺少一些配置行，谁能帮忙？这次我真的很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:55:32.513

`com.ibm.ws.tx.jta.UserTransactionImpl`实现`javax.transaction.UserTransaction`。你的代码很好。很可能您正在使用 parent-last ClassLoader 策略并且`javax.transaction.UserTransaction`在您的应用程序中的一个 jar 中。

`javax.transaction.UserTransaction`尝试从您的应用程序中摆脱它。

# vb.net - 使用 LINQ 计算折旧

> ID：13295416
> 
> 赞同：1
> 
> 时间：2012-11-08T18:29:32.287
> 
> 标签：vb.net, linq

我正在尝试使用数据库中的值计算折旧值并显示在网格中。

该表有 3 列。ID、折旧率、折旧日期。为了获得开盘价，我从另一个表中提取成本。我的问题是如何仅使用费率计算和显示每次折旧。我们将存储新值，但可以在不同日期删除或添加折旧。

前任。我们有一个成本为 10 美元的项目，并加上 10% 的折旧。新价值为 9 美元。我们再增加 2 个折旧，每个 5%，使价值 8.12 美元。然后我们删除 5% 折旧的其中之一，因此该值现在应显示为 8.55 美元。

网格中的一列将显示折旧前的值。

无论如何要计算LINQ中的新值吗？也许聚合？

我正在使用带有 LINQ to SQL 的 VB.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:37:37.193

如果我得到您的漂移，请尝试以下操作：

```
Dim result = db.InitialCosts _
               .GroupJoin( _
                   db.Depreciations, _
                   cost => cost.ProductID, _
                   depr => depr.ProductID, _
                   (cost,g) => New With { _
                                          .OriginalCost = cost.Cost, _
                                          .DepreciatedCost = g.Aggregate( _
                                                               cost.Cost, _
                                                               (cost,rate) => cost * (1- rate.DepreciationRate)) _
                                        }) 
```

或者，如果这需要很长时间，可以尝试在本地内存中进行连接：

```
Dim rawGroups = db.Depreciations _
                  .ToLookup(depr => depr.ProductID, depr => depr.DepreciationRate)
Dim result = db.InitialCosts _
               .Select( _
                  cost => New With { _
                                    .OriginalCost = cost.Cost, _
                                    .DepreciatedCost = rawGroups.Contains(cost.ProductID) ? _
                                       rawGroups[cost.ProductID].Aggregate( _
                                                                  cost.Cost, _
                                                                  (cost,rate) => cost * (1- rate)) _
                                       : cost.Cost _
                                   }) 
```

# xpages - xpage ssjs onpage 加载或查找

> ID：13295425
> 
> 赞同：2
> 
> 时间：2012-11-08T18:29:59.307
> 
> 标签：xpages

我是 xpage 的新手。我有一个绑定到数据库中文档的 xpage。我需要从其他几个数据库中预填充 xpage 中的几个字段。一些预填充的字段被保存到文档中，而一些仅显示。

我的问题是应该在页面加载时编写 ssjs 以提取此信息或创建数据源并将 xpage 字段绑定到此 dsn（特别是对于显示字段）。哪个是最佳实践并且对性能有好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:24:12.900

我建议使用数据源。特别是如果您可以轻松地初始化它们（手头有它的 UNID）。不要忘记将侧数据源的“忽略请求参数”设置为 true。

# javascript - 在 PhoneGap Build 应用程序中使用正确的库和 scandit

> ID：13295436
> 
> 赞同：5
> 
> 时间：2012-11-08T18:31:07.510
> 
> 标签：javascript, cordova, phonegap-plugins

我需要帮助才能在我的 PhoneGap BUILD 应用程序中使用正确的库。我找到了 Scandit，但我需要一个指南，因为我使用 build.phonegap.com 来构建我的应用程序。那么我应该在 www 项目文件夹中包含哪些文件？还请向我推荐一个“如何开始指南”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:02:02.343

我为 Scandit 工作。您可以在此处访问“如何”指南以开始使用我们适用于 iOS 或 Android 的 PhoneGap 插件：

[http://www.scandit.com/support/documentation/](http://www.scandit.com/support/documentation/)

如果您需要任何其他信息，请告诉我们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:34:24.157

不确定这是否适用于您的特定实现，但 phonegap build 现在提供了条形码扫描仪插件。

[https://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)

我已经构建了默认项目，它非常易于设置和使用。

这是该项目的 READ.ME：

[https://github.com/wildabeast/BarcodeScanner/blob/master/README.md](https://github.com/wildabeast/BarcodeScanner/blob/master/README.md)

# mysql - Rvm 与 Mysql

> ID：13295437
> 
> 赞同：1
> 
> 时间：2012-11-08T18:31:08.650
> 
> 标签：mysql, path, console, rvm, profile

将 rvm 路径添加到 .profile 的事实是否禁用了从命令行启动 Mysql。我问它是因为我最近安装了 rmv，从那以后我无法通过`$ mysql`. 感谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:35:36.493

如果您按照安装说明进行操作，那么不，RVM 不应该破坏 mysql。RVM 将自身附加到您的 $PATH 变量中。它不会取代它。（否则，所有系统命令都会失败）

# .net - n 个打印项目后的重复分页符

> ID：13295440
> 
> 赞同：1
> 
> 时间：2012-11-08T18:31:14.210
> 
> 标签：.net, html, css, printing, repeater

打印包含项目列表的网页有时会导致项目在第二页上出现乱码。

在页面上插入这么多项目后，有没有办法插入 css 类定义？

相关的 css 将与分页符定义相关联：

```
.page-break  { page-break-before: always; } 
```

中继器的相关页面代码：

```
<asp:Repeater ID="SearchResultsRepeater" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li>
            [content]
        </li>
    </ItemTemplate>
    <AlternatingItemTemplate>
        <li class="SystemShaded">
            [content]
        </li>
    </AlternatingItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:07:59.417

```
<ItemTemplate>
    <li class='<%# (Container.ItemIndex + 1) % 10 == 0? "page-break" : "" %>'>
        <!-- [content]  -->
    </li>
</ItemTemplate> 
```

# html - 拖放 *FROM* 浏览器？

> ID：13295442
> 
> 赞同：28
> 
> 时间：2012-11-08T18:31:20.897
> 
> 标签：html, drag-and-drop

将项目**拖入**浏览器的文档非常完善，而 HTML5 使这变得更容易。

但是，我想知道是否以及如何将 'n' drop**拖出**浏览器。

在这种情况下，您将拥有一个网页元素（例如，锚点），用户将单击该网页元素并将其拖出浏览器并将其拖到放置目标上，并且浏览器将发送链接的对象（例如，href'd 文件*）*直接到放置目标，而不是开始通常的下载。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T19:05:39.410

您正在尝试做的事情可以在这里找到：[https](https://ryanseddon.com/html5/gmail-dragout/) ://ryanseddon.com/html5/gmail-dragout/ 。

这是关于如何将锚标记拖到桌面的说明，文件将在那里下载。（或者将锚标签拖到另一个应用程序上，操作系统会对其进行适当的处​​理。）

我还没有想出的是如何通过 HTML5 拖放多个链接（而不是一次只有一个），而不必求助于像 jquery 这样的外部资源库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T23:07:33.933

从概念上讲是的，这是可能的。但这将是操作系统/应用程序处理下降来决定如何处理它。实际上，您可以完全按照您使用 chrome 的描述进行操作。打开一个新的 chrome 窗口并拖动一个链接到它。它在那里导航。将链接拖到您的桌面。在 Win7 中，它会创建一个指向该页面的快捷方式/链接。

您所说的不是 HTML 拖放，而是实际上在操作系统/应用程序级别。并且必须使用应用程序语言而不是浏览器 HTML 来处理。

# facebook - 为什么我无法使用我的 Facebook 帐户创建应用程序？

> ID：13295444
> 
> 赞同：1
> 
> 时间：2012-11-08T18:31:39.673
> 
> 标签：facebook, api, login, key

> **可能重复：**
> [从企业帐户创建和管理 Facebook 应用程序](http://facebook.stackoverflow.com/questions/10805745/creating-and-managing-a-facebook-app-from-a-business-account)

当我尝试访问 developers.facebook.com/apps 时，我只是被定向到我的 facebook 管理面板。

我正在尝试获取 api 密钥和秘密，以便用户可以使用他们的 facebook 帐户登录我的网站。

当我单击此页面上的“应用程序”时，我只是被带到管理面板，没有创建应用程序的选项。

# iphone - 重新定位 iOS 应用启动图像

> ID：13295445
> 
> 赞同：2
> 
> 时间：2012-11-08T18:31:44.270
> 
> 标签：iphone, ios, xcode, ipad, xcode4

当我通过将文件拖入 xcode 来添加启动图像时（此文件暂时不在项目中） - xcode 将其复制到应用程序的根文件夹并用作启动图像。(1)

这很好。但问题 - 我希望我的图像位于 root/images/launch/Default.png 中。

如果我们尝试将图像放入此路径，则将此图像作为资源添加到项目中。现在尝试选择这个添加的图像作为启动图像：从 xcode 文件列表中拖动或单击启动图像位置上的选择文件 - 结果 xcode 无法使用它，因为它不在根目录中。(2)

我找到的解决方案 - 添加图像accroding方式（1）。然后在finder的帮助下重新定位硬盘上的文件。然后 xcode 将文件标记为丢失。单击文件并为他们选择新位置。结果 - 一切正常。

或者

添加使用方式（2），然后添加图像以复制捆绑资源构建阶段。在这种情况下，xcode 会自动将此图像用作启动

那么，我如何在没有这个 hack 的情况下将图像放在不同的文件夹中？

ps：对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:35:44.870

1.  在项目文件夹中添加图像
2.  单击项目摘要选项卡上的图标框

![图标](../Images/04886ec4b2537df0a3c501620944d6a6.png)

3.  将弹出一个包含 3 个选项的弹出窗口（在查找器中显示、删除、添加）
4.  选择添加选项
5.  在finder中找到文件
6.  按添加按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:52:18.190

如我所见 - 这是正常的 xcode 行为。当我们将图像添加到不同的文件夹并将此文件夹添加到项目时 - xcode 自动使用图像作为启动图像。如果我尝试更改此图像，则在启动图像视图更改器中构建 - 我只能使用顶部文件夹中的图像。我们也可以使用构建阶段 -> 复制资源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T09:57:47.670

一直在扯我的头发。

为了完整起见，在 XCode 4.6 中，您需要执行以下操作：

1.  清理项目
2.  右键单击每个启动图像并选择“删除”
3.  使用根据 XCode 的要求命名的启动图像创建文件夹（即 Default.png、Default@2x.png、Default-Portrait~ipad.png、Default-Portrait@2x~ipad.png 等。
4.  将文件夹拖到您的项目中并将其放在您需要的位置。

然后 XCode 会找到命名的图像并将它们插入，而不需要坚持将启动图像移动到项目的根目录。

如果您有多个目标并且每个目标需要不同的图像，这将特别有用。此外，如果您使用“复制”来创建重复项目。

我花了 5 天时间才找到这个。

注意 - 这仅适用于 XCode 4.6 - 我还没有在 XCode 5 上解决这个问题。

# html - 网页底部出现滚动条

> ID：13295448
> 
> 赞同：2
> 
> 时间：2012-11-08T18:32:05.280
> 
> 标签：html, scrollbar, document-body

我有一个页面，无法理解为什么会出现底部导航滚动条。 [咖啡市场](http://thecoffeelocator.com/market/) 似乎有些元素不在屏幕上，但我不明白是什么！欢迎解决！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:41:01.613

在第 269 行的 global.css 中找到这个，我想

```
 width: 1050px; 
```

省略此行或设置

```
 width: auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:53:00.493

从 '#categories_block_left' div 中删除 'width' css 属性会删除水平滚动条，并且似乎不会影响页面的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:54:04.120

问题出在顶部菜单中。

在元素#categories_block_left 中有一个未正确定位的UL，因为它将容器推出布局。

用浮动定位怎么样？

你可以使用：

`#categories_block_left ul.trees { float: right; position: relative; width: 75%;}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:36:47.910

在您`<div id='page'>`的 CSS for margin 中设置为`margin: 0 auto;`

将其设置为`margin: 0 0;`（或完全删除边距属性）并且滚动条消失。

**编辑：**使用开发工具在 Chrome 中测试，不确定其他浏览器。

# jquery - 如何在 Jquery Mobile 中水平滚动？

> ID：13295451
> 
> 赞同：6
> 
> 时间：2012-11-08T18:32:17.090
> 
> 标签：jquery, jquery-mobile, horizontal-scrolling

我有一个基本的表格布局，在移动设备中查看时会被剪掉。水平滚动似乎不起作用。桌子基本上被卡住并被切断。只有垂直滚动有效。是否可以在 Jquery Mobile 中启用水平滚动？

桌面浏览器截图：

![在此处输入图像描述](../Images/3e13cc6295f7f462bd3eb677cbe01fde.png)

手机截图：

![在此处输入图像描述](../Images/b683d4a4fc46b3f0dd86e114b82f1a64.png)

调整大小的桌面浏览器上的屏幕截图（水平滚动也不起作用）：

![在此处输入图像描述](../Images/8225674d285329f802dd910909f08c55.png)

示例代码：

```
<div style="overflow-x:auto">
<table> 
        <tr>
            <td>foo</td>
            <td>foo</td>
            <td>foo</td>        
        </tr>
</table>            
</div> 
```

顺便说一句，如果我删除`<meta name="viewport" content="width=device-width, initial-scale=1">`了水平滚动作品，但手机的宽度变大了，移动视图的目的就被彻底打败了。任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:34:38.527

我相信您可以将元标记设置为与您的内容相匹配`viewport`的特定标记。`width`这样您就可以限制页面的宽度。

```
<meta name="viewport" content="width=600px, initial-scale=1"> 
```

一般来说，这是不受欢迎的，因为它不像`width=device-width`是响应式的，但在这种情况下，它听起来像你需要的。

**注意：**这是未经测试的，我以前从未在标签中使用像素值进行`width`声明。`viewport`我的理解是，这应该使所有内容默认显示，然后用户可以放大/缩小以使文本更易于阅读。

得到很好支持的替代方法是在 JavaScript 中使用人造滚动。有像 iScroll 4 这样的预制解决方案（其他的也有，但他们现在正在逃避我）。

如果您有兴趣，这里是`viewport`元标记的 Apple 文档：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)（Apple 之前开始使用其他浏览器制造商）

# java - 使用 JDBC 在 Oracle 中检索最后插入的 id

> ID：13295453
> 
> 赞同：4
> 
> 时间：2012-11-08T18:32:25.093
> 
> 标签：java, oracle, jdbc, oracle10g

我正在尝试使用此[问题](https://stackoverflow.com/q/4952256/1037210)中提到的方法（尽管我使用的是 Oracle 10g）来检索 JSP 中最后生成的自动增量 ID，例如 PHP[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php)函数或 MySQL[`last_insert_id()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)函数。[`getGeneratedKeys()`](http://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#getGeneratedKeys--)

我`TRANSPORTER`在 Oracle 数据库中有一个表，它有一个名为`TRANSPORTER_ID`type的列，`NUMBER(35, 0)`它映射到`BigDecimal`Java 中的一个类型，它是一个序列生成的主键。

```
Connection con;
ResultSet rs;
PreparedStatement ps;
String url = "jdbc:oracle:thin:@localhost:1521:xe";
String user = "root";
String pwd = "root";

Class.forName("oracle.jdbc.OracleDriver").newInstance();
con = DriverManager.getConnection(url, user, pwd);

ps = con.prepareStatement("INSERT INTO transporter(transporter_name, transporter_website)VALUES(?, ?)");
ps.setString(1, "New");
ps.setString(2, "New Website");
ps.executeUpdate();

BigDecimal id = new BigDecimal(0);
rs = ps.getGeneratedKeys();

while (rs.next()) {
    id = rs.getBigDecimal("transporter_id");
}

out.println("The generated id is : " + id); 
```

执行插入操作后，代码尝试`rs = ps.getGeneratedKeys();`在前面的`while`循环上方调用此方法，但失败并出现以下异常。

> javax.servlet.ServletException：java.sql.SQLException：不允许操作

我已经尝试过`Oracle JDBC Driver version - 10.2.0.5.0`，当它失败时，我下载了更高版本，`11.2.0.3.0`但无济于事。可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T19:57:49.070

I found [some documentation](http://docs.oracle.com/cd/B28359_01/java.111/b31224/jdbcvers.htm#autoId15) about this. It's for 11g, but the situation probably won't be better for 10g.

The proximal cause of your error is probably the limitation that:

> You need to access the ResultSet object returned from getGeneratedKeys method by position only

It seems the Oracle driver also requires you to identify the key column in order for it to retrieve the key column instead of just the `ROWID`. Sample code for this is included in the linked documentation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T18:21:35.483

ps = con.prepareStatement("INSERT INTO transporter(transporter_name, transporter_website)VALUES(?, ?)", new String[] {"transporter_id"});

# jquery - 设置选择值对键盘使用没有影响

> ID：13295456
> 
> 赞同：7
> 
> 时间：2012-11-08T18:32:39.410
> 
> 标签：jquery

我有 fe 10 个选项（“一”、“二”、“三”、...）的选择。加载页面时，第一个选项“一个”被选中。

在我设置为第五个选项的函数中

```
$("myselect").val('five'); 
```

事实上，现在第五个选项显示在选择中，并且值也设置正确。

但是现在我在我的表单中进行选项卡，直到我达到这个选择。如果我现在使用键盘向下键，则选择会跳转到选项“二”而不是“六”。

如何设置也适用于以后键盘使用的选定选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:42:02.087

尝试设置`selectedIndex`属性。见下文，

```
$('#myselect').val("5").prop('selectedIndex', 4); 
```

**演示：http:** [//jsfiddle.net/kLZ7z/](http://jsfiddle.net/kLZ7z/)

另一种更好的清洁方法是

```
var nValue = "5";
$('option', '#myselect').filter(function () {        
    return this.value == nValue;
}).prop('selected', true); 
```

**演示：http:** [//jsfiddle.net/kLZ7z/2/](http://jsfiddle.net/kLZ7z/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:57:37.727

这是一个 Firefox 错误。我发现的一种解决方案是`.prop('selected', true)`在选项上使用，而不是`.val`在选择上使用。

```
$('#myselect').children('option[value="five"]').prop('selected', true); 
```

演示：http: [//jsfiddle.net/JM2dZ/1/](http://jsfiddle.net/JM2dZ/1/)

注意：您不需要先取消设置`selected`其他选项，这样做实际上会导致问题继续发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:38:06.380

猜测了一下，但试试这个：

```
$('#myselect option').each(function(){
    $(this).removeAttr('selected'));
});
$('#myselect option').eq(4).attr('selected', 'selected'); 
```

这是一些未经测试的伪代码，只是为了让您了解要尝试的内容。

# email - PhoneGap iPhone 无法发送电子邮件

> ID：13295461
> 
> 赞同：0
> 
> 时间：2012-11-08T18:33:01.727
> 
> 标签：email, cordova, phonegap-plugins

我尝试将[EmailComposer](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/EmailComposer)插件添加到我的 iPhone 应用程序，但总是给我错误：

`Failed to load webpage with error: The requested URL was not found on this server.`

我曾经尝试修改`shouldStartLoadWithRequest`为：

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];

    if ( [ [url scheme] isEqualToString:@"mailto"] ) 
    { 
        return YES; 
    } else { 
    return [self.viewController webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
    } 
} 
```

但它仍然给我同样的错误。是否有人使用 PhoneGap 在任何 iPhone 应用程序中集成了电子邮件功能。

我正在使用 PhoneGap 1.4.1。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:29:40.707

如果使用 phonegap，您可以使用此 JavaScript 代码

```
window.location = 'mailto:test@example.com?body=Hello World Message'; 
```

或直接 html 链接

```
<a href="mailto:test@example.com?body=Hello World Message">send to friend</a> 
```

我希望这对你有帮助。

# python - 在python中将山区标准时间转换为东部标准时间

> ID：13295462
> 
> 赞同：5
> 
> 时间：2012-11-08T18:33:01.673
> 
> 标签：python, datetime, timezone

我有一个时间日期时间对象..它有日期和时间..

所以例如

```
 d = (2011,11,1,8,11,22)  (24 hour time time format) 
```

但是这个时间戳是山区标准时间..（亚利桑那州凤凰城）

现在我想在 EST 中转换这个时间......

现在这只是时间增量调整..

但是还有这个夏令时问题。

我想知道是否有一种内置的方法来处理夏令时以调整时区..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:48:42.390

使用[pytz](http://pytz.sourceforge.net/)进行时区转换。pytz 考虑到夏令时检查[这个](http://artofsoftware.org/2012/04/17/dealing-with-daylight-savings-time-using-pytz/)。你需要一个辅助函数，如：

```
def convert(dte, fromZone, toZone):
    fromZone, toZone = pytz.timezone(fromZone), pytz.timezone(toZone)
    return fromZone.localize(dte, is_dst=True).astimezone(toZone) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T18:48:02.000

您要查找的库是[pytz](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)，特别是 localize() 方法。

Pytz 不在标准库中，但您可以通过 pip 或 easy_install 获得它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T19:27:02.163

基于将天真的日期时间对象从一个时区转换为另一个时区的[`pytz`文档中的示例：](http://pytz.sf.net)

```
from datetime import datetime
import pytz

def convert(naive_dt, from_tz, to_tz, is_dst=None):
    """Convert naive_dt from from_tz timezone to to_tz timezone.

    if is_dst is None then it raises an exception for ambiguous times
    e.g., 2002-10-27 01:30:00 in US/Eastern
    """
    from_dt = from_tz.localize(naive_dt, is_dst=is_dst)
    return to_tz.normalize(from_dt.astimezone(to_tz))

ph_tz = pytz.timezone('America/Phoenix')
east_tz = pytz.timezone('US/Eastern')
from_naive_dt = datetime(2011, 11, 1, 8, 11, 22)
east_dt = convert(from_naive_dt, ph_tz, east_tz)

def p(dt):
    print(dt.strftime('%Y-%m-%d %H:%M:%S %Z%z'))

p(east_dt)  # -> 2011-11-01 11:11:22 EDT-0400 
```

这是来自 pytz 文档的模棱两可的时间示例：

```
ambiguous_dt = datetime(2002, 10, 27, 1, 30)
p(convert(ambiguous_dt, east_tz, pytz.utc, is_dst=True))
p(convert(ambiguous_dt, east_tz, pytz.utc, is_dst=False))
p(convert(ambiguous_dt, east_tz, pytz.utc, is_dst=None)) # raise exception
assert 0 # unreachable 
```

输出：

```
2002-10-27 05:30:00 UTC+0000 # ambiguous_dt is interpreted as EDT-0400
2002-10-27 06:30:00 UTC+0000 # ambiguous_dt is interpreted as EST-0500
pytz.exceptions.AmbiguousTimeError: 2002-10-27 01:30:00 
```

# apache-flex - Flex - Spark - 如何仅对容器的一部分进行蒙皮？

> ID：13295465
> 
> 赞同：0
> 
> 时间：2012-11-08T18:33:23.017
> 
> 标签：apache-flex, adobe, arcgis, flex-spark, skinning

开发人员如何只为 Flex 组件的一个部分设置皮肤，而不必重新编写该组件的整个渲染？

ESRI 的 ArcGIS Flex Viewer (3.0) 有一个 WidgetTemplate 容器，我想只对其中的一个部分进行蒙皮，而不必负责整个容器的渲染。例如，我只想对这个容器的皮肤部分进行皮肤处理：

```
[SkinPart(required="false")]
public var header:Group; 
```

这样我就可以将标题嵌入标签的颜色设置为我想要的任何颜色。

因此，我创建了以下名为**PrintWidgetSkin.mxml**的皮肤：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx">
   <!-- host component -->
   <fx:Metadata>
       [HostComponent("com.esri.viewer.WidgetTemplate")]
   </fx:Metadata>

   <!-- states -->
   <s:states>
       <s:State name="open" />
       <s:State name="minimized" />
       <s:State name="closed" />
       <s:State name="disabled" />
       <s:State name="normal" />
   </s:states>

   <s:Group id="header">
       <s:Label color="0x000000" />
   </s:Group>
</s:Skin> 
```

并将WidgetTemplate 实例的*skinClass属性分配给这个皮肤：*

```
<viewer:WidgetTemplate id="wTemplate"
                       width="345" height="285"
                       minWidth="345"
                       minHeight="285"
                       styleName="fontstyle"
                       accentColor="0x33FF66"
                       color="0x33FF66"
                       skinClass="widgets.Print.PrintWidgetSkin">
</viewer:WidgetTemplate> 
```

然而，当这个 skinClass 被分配给它时，容器根本不显示。

为了澄清，是否可以只对一个皮肤部分进行蒙皮，而将其他皮肤部分和容器的其余部分渲染为正常？

我的主要来源是 Adob​​e 的皮肤页面：[关于 Spark Skins](http://help.adobe.com/en_US/flex/using/WSC8DB0C28-F7A6-48ff-9899-7957415A0A49.html#WSB7D13DF7-BD31-49bb-9207-701787684186 "关于 Spark 蒙皮")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:22:14.533

它不会显示，因为 com.esri.viewer.WidgetTemplate.as 的多个**皮肤**部分未在您创建的皮肤中考虑。

如果您只想更改单个小部件中标题的标签颜色，我建议更改打印小部件的 creationComplete 处理程序中的颜色，而不是创建全新的皮肤。

此外，查看**com.esri.viewer.skins.WidgetTemplateSkin.mxml**以获得更多想法和/或修改全局小部件样式。

# visual-studio-2010 - VS2010基础web应用和扩展应用及版本控制

> ID：13295467
> 
> 赞同：2
> 
> 时间：2012-11-08T18:33:34.797
> 
> 标签：visual-studio-2010, svn, c#-4.0, version-control, projects-and-solutions

目前我有一个基本的 web 应用程序，我们称之为“Framework.Presentation”。此应用程序包含 Web 应用程序的所有基本项（默认代码和一些默认模板）。对于多个客户，我想使用客户特定的代码和模板来扩展这个基础应用程序。基本应用程序是一个 subversion 存储库，对于每个客户端，我们都需要一个不同的 subversion 存储库。

我想到了以下结构：

```
ClientProject
  - Framework
    - Framework.Presentation
  - ClientProject.Presentation 
```

“ClientProject”是一个独立的存储库，具有我的框架存储库的外部。在我的 ClientProject.Presentation 项目中，我将链接到 Framework.Presentation 项目。

但是，这不是问题：

在 Framework.Presentation 中，我在 App_Data 文件夹中有一些模板，可以说：

```
App_Data
  - Templates
    - Default
      - All the files here 
```

在我的 ClientProject.Presentation 中，我可以添加相同的内容，但没有文件夹“默认”。应用程序将首先直接在 中查找`App_Data/Templates`，然后在 中查找`App_Data/Templates/Default`。

此外，Framework.Presentation 有一个“/Admin”文件夹，用户应该能够在其中执行 Web 应用程序的一些管理工作。

如果我发布 ClientProject.Presentation，所有文件都会到位。但是，如果我想在VS2010中调试应用程序，Framework.Presentation的文件并没有复制到ClientProject.Presentation项目的根文件夹，所以我不能调试所有的功能。应用程序也找不到他的默认模板。

我可以通过什么方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:05:47.103

您可能会创建一个项目`Framework.Presentation`引用的 DLL `ClientProject.Presentation`。您需要将框架文件配置为嵌入式资源。我还没有尝试过，所以我不确定它的效果如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:02:05.193

好的，一个潜在的解决方案是......

使用您的文件结构，您可以将项目添加`ClientProject.Presentation`到解决方案中。

您*不*添加`Framework.Presentation`项目。相反，您将每个文件单独添加到您`ClientProject.Presentation`的**链接文件**中。( `Add`-> `Existing Item`，选择文件，单击添加按钮上的向下箭头，然后选择`Add As Link`)。

这将确保文件仍保存在文件系统中的适当位置，但 IDE 将知道它们在解决方案中的位置。

唯一的缺点是这将相当乏味，具体取决于`Framework.Presentation`项目的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:13:02.887

您可以按照建议使用 pre-build 事件将文件`Framework.Presentation`夹中的所有文件复制到`ClientProject.Presentation`. 但是我怀疑这可能会变得混乱。例如：

*   你如何处理文件名冲突？
*   您是否需要排除`Framework.Presentation`文件`ClientProject.Presentation`夹中的文件，以免意外将它们提交给颠覆。
*   您是否还需要自动更新`ClientProject.Presentation`项目以引用这些文件？如果没有，它们将如何构建和调试？如果是这样，您如何处理项目重新加载？
*   您将如何处理用于干净构建、构建服务器集成、部署包等的额外文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T06:39:42.010

创建一个包装解决方案。在这你应该有你所有的项目。添加一个后期构建步骤来完成所有的复制等。你不会为你的问题找到一个简单或干净的解决方案。如果您对 MSBuild 不太熟悉，那么您很快就会熟悉。它当然有能力做你想做的一切，只是很乏味。

# ruby - 来自rails 3中therubyracer / v8的javascript错误的堆栈跟踪

> ID：13295473
> 
> 赞同：7
> 
> 时间：2012-11-08T18:33:50.900
> 
> 标签：ruby, ruby-on-rails-3, v8, therubyracer

我正在使用 therubyracer 和 v8 在 rails 3 应用程序中运行一些 javascript

如果出现任何问题，错误消息会通过通常的 rails 3 异常通知过程通过电子邮件发送给我。

但是，我得到的错误消息非常模糊，堆栈跟踪不会进入 javascript 文件本身。这是可以理解的，但是很难调试。这是一个例子：

```
V8::JSError: Cannot read property '0' of undefined
backtrace:

lib/libraryname.rb:32:in `function_that_calls_v8'
lib/libraryname.rb:18:in `fetch_and_update'
app/models/listing.rb:34:in `fetch' 
```

有没有一种方法可以公开 javascript 堆栈跟踪，以便在引发异常时可以判断 javascript 中的哪一行正在运行？（至少，获取行号）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T11:29:45.070

我认为您可以使用 V8 错误类，尝试这样做

```
begin
  #normal V8 code

rescue V8::Error => error
  error.value #the JavaScript value passed to the `throw` statement
  error.cause #the underlying error (if any) that triggered this error to be raised
  error.javascript_backtrace #the complete JavaScript stack at the point this error was thrown
  #use these values and send them to the exception system (however that happenS)
end 
```

老实说，我不认为这会奏效，但试一试

# objective-c - 通过用户交互使用 nib 加载 UIView

> ID：13295476
> 
> 赞同：1
> 
> 时间：2012-11-08T18:34:03.020
> 
> 标签：objective-c, ios, uiview

关于从 Nib 文件加载 UIView 有很多问题，所以这不是问题。我从 Nib 文件加载 UIView 就好了，问题是，根据我设置视图的方式，我要么没有用户交互，要么 IBActions 导致崩溃。

场景 0：

```
- (id) init {
self = [super init];

if (self) {
    [[NSBundle mainBundle] loadNibNamed:@"MyView" owner:self options:nil];
    [self addSubview:self.view];
}

return self; 
```

}

结果：这会从 Nib 加载视图，但 UIButtons 不可点击。我还注意到它背后的视图控制器的主视图仍然是交互式的，即使这个视图应该阻止它。

场景 1：更改此行

```
[self addSubview:self.view] 
```

到

```
self = (MyView*)self.view; 
```

导致视图阻止其后面的主视图控制器视图，并且按钮子视图变为可点击，但是......当我将按钮的选择器连接到 IBAction 时，它会导致崩溃并出现错误：

```
-[MyView performSelector:withObject:withObject:]: message sent to deallocated instance 0x12f1cff0 
```

为什么在这种情况下我的视图被解除分配？在有人问之前，我只是像这样添加子视图：

```
MyView *myView = [[MyView alloc] init];
[self.view addSubview:myView]; 
```

编辑：有趣的是，我还注意到 awakeFromNib 从未被调用（在任何一种情况下）。应该是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:55:05.827

指定的初始化器是 initWithFrame

除此之外 :: IBOutlet 的视图如何？

# ios - Banner VC 不会从 plist 数组加载

> ID：13295478
> 
> 赞同：0
> 
> 时间：2012-11-08T18:34:05.733
> 
> 标签：ios, xcode, iad

我有一个 plist，它填充了选项卡栏上的所有内容，包括 tableview：选项卡名称、选项卡图标、标题、详细信息，并将 VC 放入 viewControllers 数组。“带有内容视图控制器的横幅 VC 分配：viewControllers” - 不接受数组，仅接受单个 VC，或多个 VC（如果它们已知）。选项卡是可变的，它们可以移动和更改，所以我不能单独对它们进行编程。如何将未知的选项卡数组传递给横幅视图控制器？

下面非常接近，但横幅 vc 只会显示 plist 中的最后一组，而不是整个组......如果我尝试将 viewControllers 数组传递给它，它只会崩溃。

我要问的是...你如何用一个内置 5 个标签的 plist 加载横幅 vc？

提前谢谢。如果我偏离了路线，有人可以试着欺负我。我真的不想将自己限制在只有 5 个标签上。

我只是在 plist 中添加一个键，它会自动将一个选项卡添加到更多部分......我如何通过 bannew VC 传递这个？

```
_tabBarController.viewControllers = viewControllers; //Loads the array viewControllers fine with 5 tabs and icons, but no banner container

_tabBarController.viewControllers = @[[[BannerViewController alloc] initWithContentViewController:viewControllers]] // Crashes on launch

_tabBarController.viewControllers = @[[[BannerViewController alloc] initWithContentViewController:newsNavigationController]] // Loads only the last key in plist and with no icons

     @implementation AppDelegate {
    UITabBarController *_tabBarController;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGRect bounds = [[UIScreen mainScreen] bounds];
    self.window = [[UIWindow alloc] initWithFrame:bounds];
    self.window.backgroundColor = [UIColor whiteColor];    

    NSMutableArray * viewControllers = [[NSMutableArray alloc] init];

    NSString * subscriptionListFile = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"My_Subscription.plist"];
    NSDictionary * subscriptionList = [[NSDictionary alloc] initWithContentsOfFile:subscriptionListFile];
    NSArray * subscriptionFolders = subscriptionList[@"Folders"];

    NewsListViewController * newsController = nil;
    UINavigationController * newsNavigationController = nil;

    for (NSDictionary * folderDetails in subscriptionFolders) {

        NSArray * newsItems = folderDetails[@"Items"];
        NSString * folderTitle = folderDetails[@"FolderName"];
        NSString * folderIcon = folderDetails[@"FolderIcon"];
        UIImage * folderIconImage = [UIImage imageNamed:folderIcon];

        newsController = [[NewsListViewController alloc] initWithNewsSourceList:newsItems];
        [newsController setTitle:folderTitle];
        newsNavigationController = [[UINavigationController alloc] initWithRootViewController:newsController];
        [newsNavigationController setTitle:folderTitle];
        [newsNavigationController.tabBarItem setImage:folderIconImage];
        [viewControllers addObject:newsNavigationController];

    }

    _tabBarController = [[UITabBarController alloc] init];

//  _tabBarController.viewControllers = viewControllers;   <--- this line works, below doesnt load the array...

    _tabBarController.viewControllers = @[[[BannerViewController alloc] initWithContentViewController:viewControllers]]

         self.window.rootViewController = _tabBarController;
        [self.window makeKeyAndVisible];
        return YES;
    }
@end        //The above crashes, but works fine if I SKIP "BannerViewController alloc..." 
            //and go right to "_tabBarController.viewControllers = viewControllers"  

            //perfect but no adbanner :( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:55:37.093

这个方法，initWithContentViewController:，从它的名字可以看出（控制器不是控制器），它只接受一个视图控制器作为它的参数。不太清楚您要做什么，因为该方法是 UIPopoverController 的一种方法，并且您通常不会将弹出框控制器作为 tabBar 控制器的 viewControllers 中的控制器之一。

# php - PHP MySQL while循环作为变量

> ID：13295479
> 
> 赞同：-1
> 
> 时间：2012-11-08T18:34:06.857
> 
> 标签：php, mysql, arrays, variables, while-loop

**实现这一目标的最佳方法是什么？**

我有一个输出 MySQL while 循环的 PHP 函数。它工作正常，按预期显示每一行。但是，我不需要**回**显结果，而是将它们作为**变量**与预先存在的代码一起使用。改变这一点显然将其限制为目前只有一个结果。

我认为它必须作为一个数组插入。考虑循环循环让我头疼哈哈。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T18:36:51.937

就这样做，

```
 $result_rows = array();
 while ($row = mysql_fetch_assoc($result)) {
  $result_rows[] = $row; //or $row['fieldname'] if you're looking for something specific
 } 
```

**注意：**不推荐使用 MYSQL 扩展，如果可能，请使用 MySQLi 或 PDO_MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:40:23.347

你可以使用这样的东西

```
$resultsArray = Array();

$statement = $db->query("SELECT * FROM table");

while ($row = $statement->fetch(PDO::FETCH_ASSOC)) {

    $resultsArray [] = array(
        'field1' => $row["column1"],
        'field2' => $row["column2"],
        'field3' => $row["column3"]);
} 
```

# c# - 使用 Google Maps API 进行批量地理编码查找的最佳方式

> ID：13295482
> 
> 赞同：1
> 
> 时间：2012-11-08T18:34:21.833
> 
> 标签：c#, .net, geocoding

我们公司经常收到大量地址列表，我们需要对其进行地理编码并放入我们的数据库中的地址超过 6000 个。我们已经拥有 Google Maps API for Business License 来完成这项工作。

在我解析并分离列表的相关部分以使 URL 发送给 Google 之后，我正在创建一个应用程序来进行批量地理编码查找。解析器已经为我完成了。我尝试为每个地址创建一个单独的线程，并在单个线程中向 Google 发送请求，这适用于少量地址（大约 10 到 100），但不适用于大量地址（超过 500）。我收到很多 403 错误。所以这可能不是解决这个问题的好方法。我对网络编程也不太了解，所以我在这里边走边学。

所以我想知道最好的方法是什么。我可以使用 VB.NET 或 C# 来完成这项工作；没关系。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:07:25.063

看起来您可能会遇到 Google 的使用限制。您可以使用的另一种选择是使用不施加此类限制的商业服务。[Smartystreets 的LiveAddress API](http://smartystreets.com/products/liveaddress-api)就是这样一项服务。此 API 允许您发送批量地址（一次最多 100 个）以进行验证和地理编码。此 API 是地理分布的，将在收到请求后尽快处理请求。[github 上](https://github.com/smartystreets/LiveAddressSamples/tree/master/c-sharp/SmartystreetsLiveAddressTest)有大量示例代码，您可以注册免费订阅（每月免费查找 250 次）。SmartyStreets 还有一个[批处理服务](http://smartystreets.com/products/liveaddress-lists)，允许文件上传（如果你不想做任何编程）。

**更新**：SmartyStreets 现在提供[国际地址验证](https://smartystreets.com/docs/international)。

全面披露：我是 SmartyStreets 的一名软件开发人员。

# php - 在 CakePHP 视图中查找未使用的变量

> ID：13295488
> 
> 赞同：5
> 
> 时间：2012-11-08T18:34:40.973
> 
> 标签：php, cakephp, netbeans

目前，我正在使用 NetBeans IDE，它有一个非常好的功能，可以显示变量是否已定义但未在其范围内使用。如果您有一堆旧代码，并且您正试图从中删除死位，这将非常有效。

是否有工具/服务/任何东西，它会做同样的事情，但是会找到在控制器中设置但在视图中未使用的变量。它不必是全自动的。

例如，如果您的控制器中有以下内容：

```
$this->set(array(
     'variable1' => $variable1,
     'variable2' => $variable2
)); 
```

视图如下所示：

```
<p>Peter ate <?php echo $variable1; ?> apples. 
```

它会突出显示或以任何其他方式标识`variable2`（假设它也未用于布局）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T18:48:51.347

尝试在您的代码库上运行[PHP Mess Detector](http://phpmd.org/)。

甚至还有一个 Netbeans[插件](http://plugins.netbeans.org/plugin/40282/phpmd-php-codesniffer-plugin)。只是不要在 CakePHP 源代码本身上运行它，否则你会清楚地了解它实际上是多么糟糕。

可能会适得其反。并导致你对宗教性质的认知失调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T03:37:54.000

我只能想到一种方法来做到这一点 - 如果每次都这样做，它只会让你跟踪通过模式传递给视图的参数。

创建一个实现 ArrayAccess 的类。然后使用 offsetGet() 方法，这将允许您跟踪数组中哪些变量已被访问（在这种情况下，哪些变量已被“使用”）。然后使用 __destruct() 魔术方法来触发任何未使用变量的通知：D

这样做会告诉您从模态传入的确切变量尚未使用但只有在您执行以下操作时才能这样做：

*   使用类的实例将模式中的所有视图参数添加到视图（具有数组访问权限，因此您仍然可以执行 $vars['name'] = 'scott' 等）。
*   视图需要像这样直接从对象访问变量： $params['name'] 而不是使用 extract 或 $$ 之类的东西重新创建变量

抱歉，这不是一个更清洁的解决方案，但这是我现在能想到的（现在是凌晨 3:30）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T02:10:09.707

我有一段时间没有使用 cakePHP 但我记得能够通过在视图中使用以下内容来输出所有视图变量

```
<?php pr($this->_viewVars); ?> 
```

对于想要构建一个工具来检测 cakePHP 视图中未使用的视图变量的人来说，如果可能是一个很好的起点。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-08T18:36:21.590

只需打印出来`$GLOBAL`，这将向您显示所有可用的变量。

# ruby-on-rails-3 - rails3缓存：带有扩展名的过期片段

> ID：13295489
> 
> 赞同：4
> 
> 时间：2012-11-08T18:34:42.143
> 
> 标签：ruby-on-rails-3, caching, fragment-caching

**如何使用来自另一个控制器的文件扩展名 (.json) 使缓存中的片段过期？**

我正在使用 Rails 3.2.8。

我有两个相同型号的控制器：/admin/books_controller 和 /api/books_controller。管理控制器用于创建/更新/删除书籍并需要提升访问权限。api/books_controller 用于搜索/列出用户关于一本书的详细信息。我试图缓存 api/books_controller

```
class Api::BooksController < ApiController
  caches_action :show

  def show    
    @book = Book.find(params[:id])
  end
end 
```

这很好用。第一个请求很慢，第二个请求很快

```
Rendered api/books/show.json.rabl (119.7ms)
Write fragment views/localhost:3000/api/books/4.json (1.7ms)
Completed 200 OK in 568ms (Views: 124.2ms | ActiveRecord: 9.5ms)

Read fragment views/localhost:3000/api/books/4.json (0.2ms)
Completed 200 OK in 16ms (ActiveRecord: 2.6ms) 
```

现在，当书被更新或销毁时，我需要使碎片过期。我有这个：

```
class Admin::BooksController < AdminController

  def update
    @book.attributes = params[:book]
    if (@book.save)
      expire_action(:controller => 'api/books', :action => 'show', :id => @book.id, :format => 'json')
    end
  end

end 
```

但是，**这不会解析到相同的片段**（请求现在是 HTML 请求，发送到不同的控制器）：

```
Started PUT "/admin/books/4" for 127.0.0.1 at 2012-11-08 12:27:11 -0600
Processing by Admin::BooksController#update as HTML
...
Expire fragment views/localhost:3000/api/books/4 (0.1ms) 
```

我的带有 JSON 请求的 API 控制器读取和写入此片段：

```
views/localhost:3000/api/books/4.json 
```

我的管理控制器试图使这个片段过期：

```
views/localhost:3000/api/books/4 
```

**如何使用不同的请求格式从另一个控制器过期 views/localhost:3000/api/books/4.json？**

这个问题：[rails 3 caching: expire action for named route](https://stackoverflow.com/questions/7076721/rails-3-caching-expire-action-for-named-route)表示我可以使用正则表达式使多个片段过期，但这需要缓存中的键是可枚举的（[http://api.rubyonrails.org/classes/ActionController/Caching /Fragments.html#method-i-expire_fragment](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:21:19.057

看来问题出在路由设置默认参数上。在 API 控制器中，params[:format] 为 'json'，而在 Admin 控制器中为 nil。

当我将此添加到我的管理控制器时：

```
params[:format] = 'json'
expire_action(:controller => 'api/books', :action => 'show', :id => @book.id, :format => 'json') 
```

然后，两个控制器中的片段匹配。

这让我回到了我的路线：

在我的路线中，我有这个：

```
namespace :api, :defaults => {:format => 'json'} do
  resources :books, :only => [:show]
end 
```

这导致 params[:format] 在我的 api 命名空间中设置。我的管理命名空间中没有任何内容，显然 actionpack/ActionCachePath 对这两者的看法不同。删除路由中的默认值解决了这个问题。

# c# - Tridion 2011：在发布页面时更改页面的文件名

> ID：13295492
> 
> 赞同：10
> 
> 时间：2012-11-08T18:34:58.317
> 
> 标签：c#, tridion, tridion-2011

再会！

我允许我的内容编辑器将 CSS 存储为非常基本的组件（通常包含他们粘贴到的称为“代码”的单个多行字段），然后将这些作为组件演示文稿添加到具有 .css 文件扩展名的页面中。创建页面时，用户可以设置一些配置值：缩小输出（布尔）、文件名前缀和文件名后缀。最后两个的目的是，如果用户在出门时选择了缩小 CSS，则文件名在演示服务器上可能会有所不同。

除了修改文件名之外，我已经完成了所有工作。我不想更改 CM 中的文件名；只是因为它驻留在演示服务器上。我假设这可以在放置在 CSS 页面模板中的 TBB 中完成。我试了一下，但想确定我没有遗漏什么。以下示例只是为简洁起见硬编码一些可配置值的简写。

```
// Create a reference to the Page object in the package.
Page page = this.GetPage();

// Retrieve a reference to the page's file name.
string currentFileName = Utilities.GetFilename(page.FileName);

// Set the published file name on its way out the door.
page.FileName = currentFileName + "_min";

// ???
// Profit. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:05:26.150

我假设您只进行静态发布，即不使用 Tridion Content Broker。

您应该能够使用新的基于 TOM.NET 的 Tridion 事件系统来执行此操作，并在 Initiated 阶段订阅 Publishing 事件。这意味着就在页面开始发布之前，您将捕获事件并修改页面文件名。但是，这将使页面在 CME 中具有新名称。同样，在发布事务完成后使用另一个事件阶段，TransactionCommitted 阶段，您可以将页面的名称更改回来。

您还可以编写自定义部署程序扩展来执行此操作，这将重命名页面。但是，您还需要有代码来管理重命名页面的“取消发布”。请参阅 Jaime 的博客文章，了解如何编写 Deployer 扩展：[http ://sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx](http://sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T23:44:42.297

阅读您对@Dylan 回复的回答后，您可能会考虑在发布时创建一个包含最小化代码输出的二进制变体。

在最简单的形式中，您将使用页面的输出创建一个文本文件，然后调用`.AddBinary()`指定文件的内容、文件名、变体名称（我建议为此使用 Page URI）、当前 StructureGroup 的 URI以及用于绑定它的组件的 URI（可能是页面上的组件）。

[***您可以在 Mihai 的博客上看到***](http://yatb.mitza.net/2012/03/publishing-images-as-variants.html)一些二进制变体示例[](http://yatb.mitza.net/2012/03/publishing-images-as-variants.html)

 *```
Binary binary = m_Engine.PublishingContext.RenderedItem.AddBinary(
    resizedStream, newFilename, variantId, mmc,
    binaryContent.MultimediaType.MimeType); 
```

除了实际页面之外，这将发布一个包含页面输出的文件。当您取消发布页面时，您也将取消发布额外文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T20:02:41.533

如果不理解不更改 CM 中的文件名而是在外部更改文件名的上下文/原因，很难提供最合适的答案……我通常建议只管理两个页面？

您还可以调查其他选项...

内容部署程序扩展。

尼克建议的事件系统。

以上两者都需要考虑对取消发布的影响。

您可以让服务器端简单的应用程序监视要发布的文件并将其复制（它是 Tridion 发布的文件）到文件的 {renamed} 版本上（Chris 讨论了类似的内容[Can we customize Deployer using .NET?](https://stackoverflow.com/questions/10672582/can-we-customize-deployer-using-net)） ) - 如果您想避免对内容部署者进行 Java 编码，则更是如此。*

# gcc - 如何防止 Qt Creator 为同一个库生成多个 .so 文件？

> ID：13295495
> 
> 赞同：3
> 
> 时间：2012-11-08T18:35:05.867
> 
> 标签：gcc, qmake

我正在使用 Qt Creator 生成一个库，虽然它确实有效，但它会生成四个版本的文件，据我所知，它们彼此相同，只是它们链接在一起。这些文件的标签如下：libFile.so、libFile.so.1、libFile.so.1.0 和 libFile.so.1.0.0。我只想保留 libFile.so 文件。如何防止生成其他文件并自动链接在一起？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T22:12:27.397

qmake 为共享库配置生成三个目标。避免创建符号链接的一种选择是将插件配置设置到您的 .pro 文件中：

```
CONFIG += plugin 
```

或者您可以在 destdir 文件夹中放置用于删除符号链接的构建后脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T20:21:36.533

只有一个共享对象，其余的只是指向它的[符号链接](http://en.wikipedia.org/wiki/Symlink)。这就是共享对象命名在类 Unix 系统中的工作方式，以支持向后兼容。在 Wikipedia 上阅读有关[soname的更多信息。](http://en.wikipedia.org/wiki/Soname)

# c# - 相互交换图片框

> ID：13295501
> 
> 赞同：0
> 
> 时间：2012-11-08T18:35:30.517
> 
> 标签：c#, image, picturebox

我正在制作一个 Bejeweled 游戏，我得到了一些 isseus。我现在正在处理的问题是，当我选择了 2 颗钻石时，它们需要交换位置。

我正在制作图片框，其中包含随机图像（1 到 7 种颜色）。当我知道颜色时，我正在为它制作图片框

```
switch (diamant)
{
  case "1":
    dia = new Diamant(this, "Rood", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "2":
    dia = new Diamant(this, "Groen", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "3":
    dia = new Diamant(this, "Geel", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "4":
    dia = new Diamant(this, "Paars", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "5":
    dia = new Diamant(this, "Wit", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "6":
    dia = new Diamant(this, "Oranje", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
  case "7":
    dia = new Diamant(this, "Blauw", XWaarde, YWaarde, new Point(XWaarde, YWaarde));
    break;
} 
```

我将它们保存在一个列表中，然后我想从我知道它们都具有哪个 x 和 y 位置的位置更改它们。但不知道我需要如何开始这个交换。

有人可以给我一个交换它们的想法。

还是制作 64 (8 X 8) 个图片框比用颜色填充它们更好？

亲切的问候，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:40:32.463

```
Diamant tmp = firstDiamant;
firstDiamant = secondDiamnt;
secondDiamnt = tmp; 
```

或者我不明白你的问题。

好的..

```
 Bitmap tmp = new Bitmap(pictureBox1.Image);
        pictureBox1.Image = pictureBox2.Image;
        pictureBox2.Image = tmp; 
```

# maven - 如何强制手动执行 Maven 插件？

> ID：13295507
> 
> 赞同：3
> 
> 时间：2012-11-08T18:35:45.183
> 
> 标签：maven, maven-3

maven 中是否有办法强制插件仅手动执行。例如，我有一个将创建一些表的 sql 插件，我不希望这个插件在每次构建时一直运行，我希望它只在我告诉 maven 运行该插件时运行。如何将插件配置为手动运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T18:47:33.840

大多数插件不会自动执行，除非它们[绑定到构建阶段](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)。你应该会发现你的插件不会执行，除非你在命令行中指定它：`mvn plugin:goal`.

如果插件已经自动绑定到某个阶段，您可以通过将其绑定到不存在的阶段来撤消此操作（这`none`是传统选择）。有关此示例，请参阅[此问题。](https://stackoverflow.com/a/4103159/474189)

# cvs - cvs check out 警告，“cvs checkout: Skipping `$Log$'关键字由于过多的评论领导。”

> ID：13295510
> 
> 赞同：3
> 
> 时间：2012-11-08T18:36:02.187
> 
> 标签：cvs

当我从 cvs 签出我的代码时，我遇到了这个错误/警告

```
"cvs checkout: Skipping `$Log$' keyword due to excessive comment leader." 
```

如何解决？或者有没有关于这个错误的材料？

# ipad - glGetRenderbufferParameterivOES 上的非零大小错误

> ID：13295512
> 
> 赞同：2
> 
> 时间：2012-11-08T18:36:11.700
> 
> 标签：ipad, ios5, opengl-es, framebuffer, layoutsubviews

这类似于 stackoverflow 上的另一个问题，但存在大小，`0,0`在这里我弄错了奇怪的非零大小。所以看起来这可能是一个不同的问题。

当我在 layoutSubviews 中配置帧缓冲区时会出现问题。

```
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight); 
```

当这个调用返回我得到的尺寸是`1139`（`backingHeight`）x `841`（`backingWidth`）。

这些尺寸看起来很奇怪，因为它们不符合我所知道的任何标准尺寸。

ipad 面向纵向模式。堆栈以`layoutSubviews`. 我阅读了一些较早的线程并决定将调用推迟到`layoutSubviews`可能已经完成稳定视图的稍后时间。但即使我将帧缓冲区创建延迟到显示链接回调，值也没有改善，仍然是`1139`(h) x `841`(w)。

此外，如果我在调试器中检查 UIScreen 上的边界大小，`mainScreen`我会得到 1024x768。

```
(lldb) print ((CGRect)[[ UIScreen mainScreen ] bounds ]).size.height
(CGFloat) $0 = 1024
(lldb) print ((CGRect)[[ UIScreen mainScreen ] bounds ]).size.width
(CGFloat) $1 = 768 
```

所以不知何故，这些界限似乎并没有延续到 OpenGL EAGLayer 的`backingWidth`和`backingHeight`。仍然会创建帧缓冲区，但我的内容基于错误（更大）的大小并离开了屏幕。

我在 xcode 4.5.2 上，而 ipad 在 iOS 5.1.1 上。我将继续追踪这一点，但没有太多可做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:10:35.070

所以，我做了一些更多的研究，发现如果 frame.layer 携带错误的尺寸，那么我猜这可能不是 frame 和 opengl 之间的尺寸转移问题。

问题出在 xib 文件中。

我拉开 xib，转到窗口，=> 视图并拉开尺寸检查器。那里的尺寸是错误的，所以鼠标可能无意中拖动了 xib 中的视图。这是一个微不足道的错误，但这是问题的根源 - 我更正了 xib，现在它工作正常。这花了几个多小时来诊断实际上是一个简单的修复，但我一直在诊断代码而不是 xib。窗口在 xib (1024, 768) 中具有正确的大小，并且它是灰色的，因此 xcode 不允许您修改它，但是可以修改视图大小并且视图的大小被错误地设置为大于窗口。所以我手动将视图大小与窗口大小匹配。

感谢任何可能试图弄清楚这一点的人。

# android - 当文件不在目录 res/layout/ 中时，Robolectric 1.1 无法加载布局文件

> ID：13295514
> 
> 赞同：3
> 
> 时间：2012-11-08T18:36:15.323
> 
> 标签：android, android-layout, robolectric, android-testing

当我在 robolectric 1.1 中运行测试时，在扩展布局文件时会发生以下错误：

```
 java.lang.RuntimeException: Could not find layout layout/home_layout
       at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:92)
       at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
       at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86) 
```

有谁知道为什么会发生这个错误？据我所见，在 robolectric 1.1 版中，加载布局文件的方式没有改变，它搜索文件夹 layout/：

```
 private ViewNode getViewNodeByLayoutName(String layoutName) {
        if (layoutName.startsWith("layout/") && !qualifierSearchPath.isEmpty()) {
            String rawLayoutName = layoutName.substring("layout/".length());
            for (String location : qualifierSearchPath) {
                ViewNode foundNode = viewNodesByLayoutName.get("layout-" + location + "/" + rawLayoutName);
                if (foundNode != null) {
                    return foundNode;
                }
            }
        }
        return viewNodesByLayoutName.get(layoutName);
    } 
```

但是如果布局文件在另一个目录中（例如layout-normal-hdpi），就会出现这个错误..

有谁知道任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T19:51:18.527

## 合格资源

在上述场景中，在 RoboElectric 2.4（可能是早期版本；我没有检查过）中，可以为资源指定限定符。[请参阅合格资源](http://robolectric.org/using-qualifiers/)上的 RoboElectric 页面。

例如，如果有资源：

```
 layout/settings_config.xml
 layout-normal/settings_config.xml
 layout-normal-hdpi/settings_config.xml 
```

...那么该属性`@Config(qualifiers="normal-hdpi")`将确保使用该`layout-normal-hdpi/settings_config.xml`资源。

## 使用不同的 RobolectricTestRunner 更改资源路径

另一种方法（可能不用于这种情况，但如果资源路径已在 build.gradle 中更改则很好）是加载不同的资源作为`RobolectricTestRunner`. 这里有一个很好的例子来说明如何做到这一点：

[https://stackoverflow.com/a/29223625/3063884](https://stackoverflow.com/a/29223625/3063884)

# objective-c - 属性列表支持的 ObjC 类型

> ID：13295517
> 
> 赞同：0
> 
> 时间：2012-11-08T18:36:28.377
> 
> 标签：objective-c, types, plist

说属性列表文件 (.plist) 仅处理`NSString`, `NSNumber`,`NSDate`和`NSData`(允许存储符合`NSCoder`) + `NSArray`/`NSDictionary`的任何其他类型是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:39:45.643

是的，这几乎就是属性列表的确切定义。Wikipedia 有一个[小表格](http://en.wikipedia.org/wiki/Property_list)，解释了每个类将如何存储在生成的 XML 文件中：

```
Foundation class    XML Tag                  Storage format
NSString            <string>                 UTF-8 encoded string
NSNumber            <real>, <integer>        Decimal string
NSNumber            <true />, or <false />   No data (tag only)
NSDate              <date>                   ISO 8601 formatted string
NSData              <data>                   Base64 encoded data
NSArray             <array>                  Can contain any number of child elements
NSDictionary        <dict>                   Alternating <key> tags and plist element tags 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:45:08.377

属性列表只能包含以下类型的数据：

NSString NSNumber NSNumber NSDate NSData NSArray NSDictionary

有关更多信息，请访问：[属性列表格式](http://en.wikipedia.org/wiki/Property_list)或访问[Apple Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW5)

您还可以通过序列化其他对象将它们保存为 NSData

# javascript - 获取对象文字字符串的 JavaScript 函数

> ID：13295519
> 
> 赞同：0
> 
> 时间：2012-11-08T18:36:40.203
> 
> 标签：javascript

我正在尝试从对象生成对象文字字符串。我知道我可以自己创建一个函数来执行此操作，例如：

```
//pseudocode
function getOL(object){
  for(var prop in object){
    if(!object.hasOwnProperty(prop)){return;}
    else if (typeof var === object){/*recur*/}
    //case function
    //case string
  }
} 
```

但是，这种方法似乎非常低效。即使没有本机函数（看起来就是这种情况），是否有一些替代方法可以比递归循环遍历对象及其子对象的每个属性更有效？

# sql - Oracle SQL - 如何对结果进行分组和聚合？

> ID：13295520
> 
> 赞同：2
> 
> 时间：2012-11-08T18:36:41.000
> 
> 标签：sql, oracle, group-by

我正在尝试查询 Oracle 中的审计表，以提取文档在给定时间范围内的受欢迎程度（唯一命中数）的列表。

到目前为止，我开发的 SQL 是：

```
select distinct dt.name "Document name", ku.name "User name", count(*) "Number of hits" 
  from dauditnew da, 
       kuaf ku, 
       dtree dt 
 where ku.id=da.performerid 
   and (da.auditstr='Fetch') 
   and dt.dataid = ANY(DOCID1,DOCID2) 
   and da.dataid = ANY(DOCID1,DOCID2) 
   and da.auditdate between TO_DATE('01-JAN-12') and TO_DATE('31-OCT-12') 
 group by dt.name, ku.name 
```

它会吐出类似于以下内容的数据：

```
Document name       User name           Hit count
document1.pdf   rimnet\user1    1
document1.pdf   rimnet\user2    1
document1.pdf   rimnet\user3    17
document1.pdf   rimnet\user4    1
document2.pdf   rimnet\user5    1
document1.pdf   rimnet\user6    1
document3.pdf   rimnet\user7    1 
```

但我真正需要的是对结果进行分组并对每个唯一用户进行一次计数：

```
Document name       User name           Hit count
document1.pdf       n/a                 5
document2.pdf       n/a                 1
document3.pdf       n/a                 1 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:42:57.733

根据您想要的结果，听起来您只想要用户计数而不是点击次数（否则，聚合 17 次点击 + 1 次点击 + 1 次点击 + 1 次点击 + 1 次点击是没有意义的并以 5 次命中结束）。如果是这样的话

```
select dt.name "Document name", count(distinct ku.name) "Distinct users" 
  from dauditnew da, 
       kuaf ku, 
       dtree dt 
 where ku.id=da.performerid 
   and (da.auditstr='Fetch') 
   and dt.dataid = ANY(DOCID1,DOCID2) 
   and da.dataid = ANY(DOCID1,DOCID2) 
   and da.auditdate between TO_DATE('01-JAN-12') and TO_DATE('31-OCT-12') 
 group by dt.name 
```

# controller - JavaFX 中的新弹出窗口，位于包含多个 .fxml 文件和多个控制器的主窗口上

> ID：13295525
> 
> 赞同：1
> 
> 时间：2012-11-08T18:36:59.000
> 
> 标签：controller, window, javafx-2, fxml

我读了这篇文章[JavaFX 2.0 子窗口](https://stackoverflow.com/questions/9997851/javafx-2-0-subwindow)

但我需要一种方法来做同样的事情，但需要使用多个 .fxml 文件和 java 控制器。

基本上按下按钮会弹出一个弹出窗口，用户可以在其中修改设置。主窗口和弹出窗口的布局都在它们自己的 .fxml 文件中，并有自己的 Java 控制器文件。

该按钮将创建一个类的实例，该实例将读取在弹出窗口中设置的属性。这就是我的目标。

现在我有我的主窗口。它的 .fxml 文件和它的控制器。我也有我的辅助 .fxml 文件及其 java 控制器。但我正在努力打开这个新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:09:54.863

11 月/12 月的[Java 杂志](http://mailings1.texterity.com/portal/wts/cemciSid2C-LeemveLDrs76ize4Da4l1HG_2QHNT10Nc)有一篇关于具有多个窗口的 JavaFX 项目的好文章，使用 Spring 框架为您注入依赖项。

# javascript - 创建 img 元素并附加到 dom 没有终止

> ID：13295528
> 
> 赞同：1
> 
> 时间：2012-11-08T18:37:08.157
> 
> 标签：javascript, element, image, termination, createelement

我已经有了一个非常复杂的 DOM 结构，我想消除未终止的图像元素导致问题的可能性。

看最简单的情况：

```
var prettyPicture = document.createElement("img");
//Add properties...
container.appendChild(prettyPicture ); 
```

工作正常，但是当我检查 dom 时，我看到 img 元素没有终止斜杠，例如`<img/>`

```
<img id="iamge-6816177" src="_site/images/detail/6816177.png"> 
```

简单布局视图中没有问题，但是当我查看包含大量这些元素的视图时，随机元素，甚至相同父节点中的相似图像都不会呈现，尽管它们的节点位于 dom 检查器中。缺少终止会导致树出现任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:39:06.300

元素的结束标记`img`完全是可选的——这不会在任何浏览器中给您带来问题。事实上，在 HTML5 中，您现在根本不应该包含`/>`in`img`元素。

此外，您在检查 DOM 时看到的只是检查员如何选择显示没有结束标记的元素 - 您可以确定`createElement()`并`appendChild()`生成有效的 HTML，因为您直接使用 DOM 而不是为浏览器解析为 DOM 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:39:46.157

如果您担心

```
<img id="iamge-6816177" src="_site/images/detail/6816177.png"> 
```

代替

```
<img id="iamge-6816177" src="_site/images/detail/6816177.png"/> 
```

那么就不用担心了：痛苦的 XHTML 时代已经结束，HTML5 确认您不应该编写 XML 样式的自闭合标签。

从[规格](http://dev.w3.org/html5/spec/single-page.html#syntax-end-tag)：

> void 元素只有一个开始标签；不得为 void 元素指定结束标记。
> 
> [...]
> 
> **虚空元素**
> 
> area, base, br, col, command, embed, hr, img, input, keygen, link, meta, param, source, track, wbr

用结束标签使代码混乱是不好的做法。HTML 不是 XHTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:40:04.053

来自[http://www.w3schools.com/tags/tag_IMG.asp](http://www.w3schools.com/tags/tag_IMG.asp)

> 在 HTML 中，`<img`> 标签没有结束标签。
> 
> 在 XHTML 中，`<img>`标签必须正确关闭。

在所有情况下，浏览器都不会关心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:42:44.103

不，这不应该引起任何问题。我会忽略它，因为这不会损害 w3.org 的合规性，因为 DOM 元素是动态生成的。

# ms-access - 在查询中按日期条件运行求和（重复日期）

> ID：13295529
> 
> 赞同：2
> 
> 时间：2012-11-08T18:37:13.620
> 
> 标签：ms-access

我想在查询中获得一个运行总和。我正在使用以下运行总和公式

```
RunningSum: CCur(Nz(DSum("[Debit]","[Debit]","[CustomerID] =" & [CustomerID] & " AND [vDate] < " & [vDate] & ""))) 
```

但它不起作用。我的目的是获取`Debit`所有小于当前日期字段的总和，如下所示，

[http://i.stack.imgur.com/0qoO7.jpg](http://i.stack.imgur.com/0qoO7.jpg)

经过不同的线程后，我找不到任何解决我的问题的方法。如果日期重复，我不知道如何获得旧借方金额的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:55:21.723

我认为最简单的方法是仅参考您要添加的所有控件的运行总和。例如，“31 到 60 天”是您报告中的 text29。创建一个名为 R31to60 的隐藏控件并将其设置为 Running sum over group，然后在页脚中放置一个文本框并将控件源设置为：

```
=[R31to60] 
```

它将显示运行总和的最后一个值，即总数。

在设计视图中，高亮显示运行总和控制和总计。控件可以缩小和隐藏。

![运行总和设计](../Images/c02bbc5fa3fc64038feecf04a73305ff.png)

在报告视图中，您可以看到“总计”字段显示运行总和的最后一个值。

![运行总和报告](../Images/18bccc4230bb1d6613b8302583dccdea.png)

# c++ - 错误：在先前规范之后为参数提供了默认参数

> ID：13295530
> 
> 赞同：6
> 
> 时间：2012-11-08T18:37:15.353
> 
> 标签：c++, default-arguments

在这里对我来说非常简单的任务，我不确定为什么这会给我带来问题，我只是让两个模型类尝试在它们的方法中没有任何逻辑的情况下使用已经给我的标题和声明进行编译。老实说，这只是一个剪切和粘贴的工作，但我仍然遇到了这个金块般的爱情——

```
cbutton.cpp:11:44: error: default argument given for parameter 4 of ‘cio::CButton::CButton(const char*, int, int, bool, const char*)’ [-fpermissive]
cbutton.h:7:5: error: after previous specification in ‘cio::CButton::CButton(const char*, int, int, bool, const char*)’ [-fpermissive]
cbutton.cpp:11:44: error: default argument given for parameter 5 of ‘cio::CButton::CButton(const char*, int, int, bool, const char*)’ [-fpermissive]
cbutton.h:7:5: error: after previous specification in ‘cio::CButton::CButton(const char*, int, int, bool, const char*)’ [-fpermissive]
cbutton.cpp:19:41: error: default argument given for parameter 1 of ‘void cio::CButton::draw(int)’ [-fpermissive]
cbutton.h:11:10: error: after previous specification in ‘virtual void cio::CButton::draw(int)’ [-fpermissive]
cbutton.cpp:53:29: error: ‘virtual’ outside class declaration 
```

这是我正在使用的文件。谢谢大家，一如既往！

```
#include "cfield.h"

namespace cio{
  class  CButton: public CField{

  public:
    CButton(const char *Str, int Row, int Col, 
            bool Bordered = true,
            const char* Border=C_BORDER_CHARS);
    virtual ~CButton();
    void draw(int rn=C_FULL_FRAME);
    int edit();
    bool editable()const;
    void set(const void* str);
  };
}    

#include "cbutton.h"

namespace cio {  

  CButton::CButton(const char *Str, int Row, int Col, 
          bool Bordered = true,
          const char* Border=C_BORDER_CHARS){

  }

  void CButton::draw(int rn=C_FULL_FRAME){

  }

  int CButton::edit(){

    return 0;
  }

  bool CButton::editable()const {

  return false;
  }

  void CButton::set(const void* str){

  }

  virtual CButton::~CButton(){

  }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T18:39:48.123

您在函数的定义中指定了一个默认参数，而它们在类声明中已经有一个默认参数。**您可以在类声明或函数定义中声明默认参数，但不能同时在两者中声明。**

**编辑：**错过了你的错误的结尾：`error: ‘virtual’ outside class declaration`。这是一个相当明显的编译器错误：`virtual`关键字属于类声明，而不是函数定义。只需将其从析构函数的定义中删除即可。

更正来源：

```
namespace cio {  

  CButton::CButton(const char *Str, int Row, int Col, 
          bool Bordered, // No default parameter here,
          const char* Border){ // here,

  }

  void CButton::draw(int rn){ // and here

  }

  CButton::~CButton(){ // No virtual keyword here

  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T18:39:45.567

定义函数时不允许重复默认参数。它们只属于声明。（实际的规则并不那么简单，因为定义也可以是定义，但你明白了......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T18:39:57.530

您没有在函数定义中包含默认参数，原型是唯一需要包含默认值的参数。

```
#include "cbutton.h"

namespace cio {  

  CButton::CButton(const char *Str, int Row, int Col, 
          bool Bordered,
          const char* Border){ //remove in def

  }

  void CButton::draw(int rn){

  } 
```

# python - 如何在 py2exe 中包含 Yapsy？

> ID：13295535
> 
> 赞同：3
> 
> 时间：2012-11-08T18:37:25.243
> 
> 标签：python, plugins, py2exe

我正在使用 Python。我的文件`GUI.py`使用 Yapsy 将新插件包含到我的软件中。我已经完成了所有的工作，现在我想使用 py2exe 来生成一个可执行文件。我不知道如何订购 py2exe 以包含 Yapsy 及其所有模块。我已经尝试过了，但它不起作用：

```
opts = {
    'py2exe': { "includes" : ["yapsy.PluginManager","sip", "matplotlib.backends",  "matplotlib.backends.backend_qt4agg",
                               "matplotlib.figure","pylab", "numpy","matplotlib.backends.backend_tkagg"]}

...

setup(
      name='PImageQT',
      version='1.0',
      author='Jaime',
      package={'images/*', 'Windows6S/*', 'modulos6S/*', 'OperacionesPlugins/*'},
      scripts=['GUI.py'],
      console=["GUI.py"],
      options=opts,
      data_files=data_files,
      zipfile=None
      ) 
```

我在这个链接[http://notinthestars.blogspot.com.es/2011/04/using-python-plugin-scripts-with-py2exe.html](http://notinthestars.blogspot.com.es/2011/04/using-python-plugin-scripts-with-py2exe.html)中找到了一些东西，但它并没有解决我的问题。

在每个插件的 Gui.py 文件中，我将一个操作添加到菜单中。可执行文件中的此菜单不会出现。

有谁知道我必须怎么做？

非常感谢你。

编辑：

我使用了断点并且 yapsy 工作正常，但它没有找到我的插件目录。目录的名称是相同的。

编辑2：

路径没问题，目录在路径中。不知道为什么用py2exe打包后找不到plugins目录。我设置目录的代码行与其他网页相同：`self.manager.setPluginPlaces(["plugins"])`

编辑3：

我尝试使用相对路径来搜索插件，但它不起作用。

```
self.manager.setPluginPlaces([os.getcwd() + os.sep + "plugins"]) 
```

编辑4：

今天，我试图列出目录是我和我的目录“插件”在其中。我什么都不明白，但问题仍在继续。

```
print(os.listdir('.')) 
```

编辑5：

这是永无止境的故事。我已经使用 PYInstaller 制作了一个可执行文件来检查问题是否是 py2exe。它不起作用。现在我认为问题出在 Yapsy 上。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:34:42.163

从您的编辑看来，问题与访问某些打包插件（而不是 yapsy 模块本身）有关。

为此，您可能需要检查以下两点：

*   当您打电话时，请`self.manager.setPluginPlaces(["plugins"])`注意路径“插件”可能与您认为的目录无关。您应该使用更具体的路径，使用 py2exe 的“我在哪里”常见问题解答中的提示：http: [//www.py2exe.org/index.cgi/WhereAmI](http://www.py2exe.org/index.cgi/WhereAmI)

*   您也可以尝试将插件打包为 data_files（例如在您链接到的网页中），我不确定 py2exe 究竟如何处理“包”参数（在您的代码示例中）。

编辑：对于以后可能会来的人，答案在下面的评论中，基本上发生的事情是其中**一个插件有一个导入错误**（py2exe 未打包的依赖项），并且这个导入错误只能在 python 的标准中看到日志记录正确配置/激活：

```
import logging
logging.basicConfig(level=logging.DEBUG) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:42:27.810

你可能需要包括所有的 yapsy

```
opts = {
    'py2exe': { "includes" : ["yapsy","sip", "matplotlib.backends",  "matplotlib.backends.backend_qt4agg",
                               "matplotlib.figure","pylab", "numpy","matplotlib.backends.backend_tkagg"]}

...

setup(
      name='PImageQT',
      version='1.0',
      author='Jaime',
      package={'images/*', 'Windows6S/*', 'modulos6S/*', 'OperacionesPlugins/*'},
      scripts=['GUI.py'],
      console=["GUI.py"],
      options=opts,
      data_files=data_files,
      zipfile=None
      ) 
```

然而只是一个疯狂的猜测

# javascript - 表单文件验证扩展名和大小 jquery 或 jscript

> ID：13295536
> 
> 赞同：2
> 
> 时间：2012-11-08T18:37:25.663
> 
> 标签：javascript, jquery, xhtml

嗨，我的问题是我有一个动态扩展的表单。我将使用它将文件上传到电子商务网站以上传产品图片，我想在上传之前限制大小并过滤扩展名，但我是一个 javascript 和/或 jQuery 的菜鸟......

我需要帮助来验证这些，因为我认为我可以处理 PHP 方面的事情:) 这是我的实验代码：

 ````
<script language="Javascript" type="text/javascript">
var counter = 1;
var limit = 10;
function addInput(divName){
     if (counter == limit)  {
          alert("You have reached the maximum of " + counter + " fotos");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Foto " + (counter + 1) + " <br><input type='file' name='myInputs[]'>";
      document.getElementById(divName).appendChild(newdiv);
      counter++;
 }
}
</script>

<form method="POST" enctype="multipart/form-data"> 
     <div id="dynamicInput">
          Foto 1<br><input type="file" name="myInputs[]">
 </div>
 <input type="button" value="Add more fotos" onClick="addInput('dynamicInput');">
</form> 
```

先感谢您

编辑：

好的，我可以验证提交的文件类型，但我无法遍历不同的文件字段...

我在小提琴[http://jsfiddle.net/Glink/sGCeK/上有这个代码](http://jsfiddle.net/Glink/sGCeK/)

它可以帮助你帮助我...

还有一个问题，如果我在 xHTML 中有我的代码，是否很难更新到 HTML5？

再次提前谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:54:35.023

您走在正确的轨道上，但是您应该尝试将 jQuery 与您的 javascript 一起使用。我想你会发现事情容易多了。我写了一个简单的例子来说明我认为你想要完成的事情。如果您需要进一步的解释，请随时询问。

[例子](http://jsfiddle.net/pPafR/)

HTML：

```
<form method="POST" enctype="multipart/form-data" id="theForm"> 
 <label class="dynamicInput">
      Foto 0<input type="file" name="myInputs1">
 </label>
<br/>
</form> 
```

JS：

```
var counter = 1;
var limit = 10;

$("#addButton").click(function(){
htmlString = '<label class="dynamicInput">Foto'+ counter +'<input type="file" name="myInputs '+ counter + '"></label><br/>'

 if(limit > counter)
$("#theForm").append(htmlString);
counter++;
});
​ 
```

更新：小姐阅读了这个问题，我以为您只是想在框中添加新字段。对于上传的文件大小，您可以使用以下方法获取该数字：

```
this.files[0].fileSize 
```

示例：[更新示例](http://jsfiddle.net/pPafR/1/)

至于检查扩展，我发现没有一种简单的方法可以做到这一点。您可能需要使用某种正则表达式。像这样的东西：

[文件扩展名示例](https://stackoverflow.com/questions/190852/how-can-i-get-file-extensions-with-javascript)

这应该让你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:35:10.410

嗨，最终回答我自己的问题很尴尬，但这里是：

验证文件类型和循环在这个小提琴上：http: [//jsfiddle.net/Glink/sGCeK/](http://jsfiddle.net/Glink/sGCeK/)

```
$(document).ready(function() {

    var counter = 1;
    var limit = 5;
    $("#btn2").click(function() {

        if (counter == limit) {
            alert("You have reached the limit of " + counter + " fotos");
        } else {
            $("#dynamicInput").append("<br>Foto <br><input class='test' type='file' name='myInputs[]'>");
        }
        counter++;
    });

    $("form").submit(function() {

        $('.test').each(function(i, obj) {

            var file = $(this).val();
            var ext = $(this).val().substr(($(this).val().lastIndexOf('.') + 1));
            //alert(file);
            if (ext == "jpg" || ext == "png" || ext == "JPG" || ext == "jpeg") {
                alert("File: " + file + " Valid");
                //return true;
            } else {
                alert("Invalid file only files with extension. Jpeg,. Jpg or. Png are accepted.");
                return false;
            }
        });
    });
}); 
```

我在编辑第一篇文章时无法循环，因为我忘记将类添加到添加字段按钮，并且由于我不习惯该语言，所以我错过了，在查看代码时发现了问题.. .

所以这是我的最终编辑，我的实现的最终代码在这里：http: [//jsfiddle.net/Glink/Ak2QA/](http://jsfiddle.net/Glink/Ak2QA/)

我不知道我是否使用了好的做法，但它现在正在工作，当这个项目结束时，我将学习更多 jQuery 和 js ......

由于我使用的是 xHTML，所以文件大小是什么，使用 JavaScript 是不可能的，我必须使用 Flash 或 SilverLight，我不想，所以我不会使用...

如果我使用的是 HTML5，则可以使用此处发布的内容： [如何使用 jQuery 检查文件输入大小？](https://stackoverflow.com/questions/1601455/check-file-input-size-with-jquery)

它仍然有一个我不明白的错误，当它找到一个无效文件时它仍然发送表单，即使它返回一个错误......如果我找出为什么我会在这里发布......`

# apache-flex - flex air httpservice 流错误和超时

> ID：13295537
> 
> 赞同：0
> 
> 时间：2012-11-08T18:37:28.143
> 
> 标签：apache-flex, air, timeout, httpservice

我们有一个 AIR 客户端向 Tomcat 发送 HTTPService Post 请求。自文件传输操作以来，该操作在服务器中花费了 30 多秒。

到服务器返回响应的时候，Flex 正在抛出一个错误，2032，流错误（网上查了很多）看起来它在 30 秒后超时，等待 Http 响应。

我尝试设置 ht.requestTimeout，它不起作用。设置 URLRequestDefaults.idleTimeout 也不起作用。看起来我在这方面遇到了死胡同。

解决办法请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:31:16.123

您需要使用属性[requestTimeout增加](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#requestTimeout)[HTTPService](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#requestTimeout)超时

> 以秒为单位提供对已发送消息的请求超时的访问。小于或等于零的值可防止请求超时。

您还可以使用其[故障](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#event%3afault)事件来捕获超时，并相应地继续。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T06:37:47.333

我也一直在与这个问题作斗争。在您发送（）您的请求之前添加此代码段：

```
URLRequestDefaults.idleTimeout = 120000;  // in millis so this setting would timeout after 120 seconds. 
```

似乎 AIR 的 Flash Player 中存在一个错误（Flex 使用不同的），它忽略了 HTTPRequest 对象上的 responseTimeout。这会正确设置超时。

# wcf - 用于了解后端服务调用基于 wcf 的服务的实用程序

> ID：13295540
> 
> 赞同：0
> 
> 时间：2012-11-08T18:37:47.457
> 
> 标签：wcf

我正在研究通过服务包装器（wcf 服务）调用哪些后端服务合同的要求。

这是一个企业级服务平台，我们在其中创建了一个基于 WCF 的服务，该服务调用不同的后端服务合同。

要求是知道哪个 WCF 合同调用了哪个后端服务合同。

# macos - 此证书由未知权威钥匙串签名

> ID：13295542
> 
> 赞同：3
> 
> 时间：2012-11-08T18:37:52.013
> 
> 标签：macos, keychain

我在不知不觉中删除了我的钥匙串系统证书，这些证书通常命名如下

```
Software Signing
com.apple.systemdefault
com.apple.kerberos.kdc
Apple Worldwide Developer Relations Certification Authority
Apple Code Signing Certification Authority 
```

现在，当我尝试为 iOS 开发创建开发人员证书并安装证书时，它给了我一个错误，提示**“此证书由未知机构签名”**

我不知道如何恢复它们。

我经历[过](https://stackoverflow.com/questions/12487223/import-ios-certification-error-this-certificate-was-signed-by-an-unknown-autho)

如果有人有工作请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T09:09:53.440

如果您的证书无效，它将有一个红色的“x”并说明原因。通常原因是“此证书已过期”或“此证书由未知机构签名。要解决此问题，您需要执行以下步骤：

1.  如果您的证书已过期，请在 iPhone 门户上进行更新、下载并双击它以将其添加到您的钥匙串中。

2.  如果它是“由未知机构签署的”，请从 iPhone 开发者门户的“证书”部分下载“Apple Worldwide Developer Relations”证书，然后双击它以将其添加到您的钥匙串中。

3.  如果您的证书已被吊销，请从您的钥匙串中删除该证书，然后按照 iPhone Developer Program Portal 用户指南中的“获取您的 iPhone 开发证书”或“获取您的 iPhone 分发证书”部分生成新证书。

4.  确保创建私钥的备份。执行此操作的步骤在 iPhone Developer Program Portal 用户指南中的“保存您的私钥并转移到其他系统”下进行了描述。

5.  如果您拥有 iPhone 开发者（或 iPhone 分发版）证书及其关联的私钥、Apple WWDR 中间证书已安装且您的证书有效，请确认已设置在线证书状态协议 (OCSP) 和证书吊销列表 (CRL)在钥匙串访问>首选项>证书中“关闭”。

6.  如果您仍然遇到问题，请联系支持苹果社区。

# java - 比较两个字符串数组

> ID：13295549
> 
> 赞同：1
> 
> 时间：2012-11-08T18:38:32.317
> 
> 标签：java

我正在制作一个程序来比较两个文本文件并返回它们的相似性（基于给定的算法）。对于第一个文件中的每个唯一单词，我想找到它们在第二个文件中出现的概率。但是每当我运行我的程序时，返回的相似度总是 0.0。这就是我现在所拥有的：

```
public static double nestedLoop(String[] doc1, String[] doc2) {
    // nested loop: sort doc1, for each unique word in doc1, find all
    // occurences in doc2 using a sequential search

    java.util.Arrays.sort(doc1);

    double similarity = 0.0;

    for (int i = 0; i < doc1.length - 1; i++) {
        if (doc1[i] != doc1[i + 1]) {
        String unique = doc1[i];
        double count = 0.0;
            for (int j = 0; j < doc2.length; j++) {
                if (unique == doc2[j]) {
                    count++;
                    similarity += count / doc2.length;
                }
            }
        }
    }
    return similarity;
} 
```

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T18:39:19.843

```
if (unique == doc2[j]) { 
```

应该

```
if (unique.equals(doc2[j])) { 
```

相同的 `if (doc1[i] != doc1[i + 1]) {`

应该：

```
 if (!(doc1[i].equals(doc1[i + 1]))) { 
```

`String`比较应始终使用`equals()`代替`==` （字符串文字比较的情况除外）

请阅读[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

# jquery - Telerik ScriptRegistrar 围绕脚本加载顺序移动，导致错误

> ID：13295554
> 
> 赞同：1
> 
> 时间：2012-11-08T18:38:42.557
> 
> 标签：jquery, asp.net-mvc, telerik

这是 ScriptRegistrar 代码：

```
@(Html.Telerik().ScriptRegistrar().jQuery(false).jQueryValidation(true)
    .DefaultGroup(group => group
        .Combined(false)
        .Compress(false)
    )
    .Scripts(s => s.AddGroup("myGroup", group => group
            .Add("~/Scripts/jquery-1.8.2.min.js")
            .Add("~/Scripts/2012.3.1017/telerik.common.min.js")
            .Add("~/Scripts/2012.3.1017/telerik.upload.min.js")
            .Add("~/Scripts/modernizr-2.6.2.min.js")
            .Add("~/Scripts/jquery-ui.min.js")
            .Add("~/Scripts/jquery.maskedinput.min.js")
            .Add("~/Scripts/hiring.js")
        )
    )
) 
```

它在页面上的外观。

```
<script type="text/javascript" src="/Scripts/2012.3.1017/telerik.common.min.js"></script>
<script type="text/javascript" src="/Scripts/2012.3.1017/telerik.upload.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/Scripts/modernizr-2.6.2.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery-ui.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery.maskedinput.min.js"></script>
<script type="text/javascript" src="/Scripts/hiring.js"></script> 
```

它改变了我的顺序，在 jQuery 之前加载依赖于 jQuery 的脚本。

# c++ - 私有继承和函数重载错误

> ID：13295555
> 
> 赞同：3
> 
> 时间：2012-11-08T18:38:42.550
> 
> 标签：c++

我有一个问题，我缩小到以下代码：

```
class A
{
};

class B : private A
{
};

void f(A*)
{
}

void f(void*)
{
}

int main()
{
  B b;
  f(&b);
} 
```

这在 gcc 4.7 中出现以下错误：

```
error: ‘A’ is an inaccessible base of ‘B’ 
```

我知道 A 不可访问，但我希望编译器调用 f(void*)。这种行为是正常的还是我做错了什么？或者也许它是一个编译器错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:45:01.393

在访问检查**之前**解决了重载问题。因此编译器选择`f(A*)`适当的重载，然后确定`&b`不能转换`A*`并给出错误信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:47:15.260

您需要确保它`b`作为 a 传入`void *`，这不是默认情况，因为`b`它实际上是`A`. 只需通过强制转换明确地`f()`告诉`b`它`void *`：

```
class A {
};

class B : private A {
};

void f(A*) {
}

void f(void*) {
}

int main() {
  B b;
  f((void*)&b);
} 
```

# xml - 如何使用 Powershell 从 csproj (xml) 中删除 Private 元素（复制本地）

> ID：13295577
> 
> 赞同：0
> 
> 时间：2012-11-08T18:40:06.190
> 
> 标签：xml, powershell-2.0, csproj

我正在尝试从 csproj xml 中删除 Project/ItemGroup/Reference/Private 元素。

```
 $csproj = [xml] ( Get-Content $fullProjectPath )

    $csproj.Project.ItemGroup | 
        ForEach-Object { $_.Reference } | 
        where { $_.Include -match "^(Some).+"} | 
        ForEach-Object { 
            if( $_.Private -ne $null ) { 
                $_.RemoveChild($_.SelectSingleNode("Private"))                                        
            } 
        } 
```

我收到错误 $_.SelectSingleNode("Private")。为什么它可以找到子节点Private？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:30:45.337

在向@Richard question 提供错误信息后，我意识到 XPath 一定有问题。简单的 XPath 有什么问题？我试图获取直接子节点。然后尝试了经典的调试技术，将输出写入控制台，输出父节点的InnerXml。在输出中，我注意到 xml 输出具有命名空间。所以在stackoverflow上进一步搜索发现了如何解析xml命名空间。

这是解析命名空间的[链接](https://stackoverflow.com/questions/5277587/using-powershell-how-do-i-add-multiple-namespaces-one-of-which-is-the-default)。和固定的脚本。

```
 $csproj = [xml] ( Get-Content $fullProjectPath )

    [System.Xml.XmlNamespaceManager] $nsmgr = $xml.NameTable;
    $nsmgr.AddNamespace('msbuild','http://schemas.microsoft.com/developer/msbuild/2003');

    $csproj.Project.ItemGroup | 
        ForEach-Object { $_.Reference } | 
        where { $_.Include -match "^(Some).+"} |  
        ForEach-Object { 
            if( $_.Private -ne $null ) { 
                $_.RemoveChild($_.SelectSingleNode("msbuild:Private", $nsmgr)) 
            }
        } 
```

# powerbuilder - DataWindow 在 Debug 中显示内容，但在 RunTime 中不显示

> ID：13295580
> 
> 赞同：2
> 
> 时间：2012-11-08T18:40:12.400
> 
> 标签：powerbuilder, datawindow

我继承了这个 Powerbuilder 12.0 项目。我们需要添加另一个数据窗口（它或多或少是另一个数据窗口的副本，但绑定了不同的 sql 表）。

在调试模式下测试数据窗口时，“报告”显示得很好，数据和格式。然后在部署应用程序之后，运行可执行文件只显示同一数据窗口的空白白页——没有数据，也没有格式。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:25:00.233

[正如Slapout](https://stackoverflow.com/users/19072/slapout "拍打")所暗示的，第一个猜测是数据窗口没有被部署。将所有内容编译为 PBD 或在 PBR 文件中包含对数据窗口的引用。

第二个猜测：检索错误？

# javascript - 获取未跨用户、迭代和项目获取的缺陷

> ID：13295581
> 
> 赞同：1
> 
> 时间：2012-11-08T18:40:15.997
> 
> 标签：javascript, rally

我已经研究并尝试了所有我能想到的方法来尝试检索迭代、项目和用户列的实际值，但我永远无法获取列数据来填充迭代名称、项目名称等内容，以及用户提交的名称。我已经读过，按照我的方式进行获取应该没问题，其他人说你必须用这样的东西指定类型

```
types : ['defect','user','iteration','project'], 
```

当我这样做时，我永远不会加载我的网格。我已经按照某些人的建议尝试过这样的事情

```
defect.Iteration.Name 
```

或者

```
Iteration.Name 
```

我真的可以在这里使用一些帮助。我还阅读了一篇文章，说 WSAPI 不再支持这种请求，必须在多个查询/获取中进行处理。任何人，这是我正在使用的代码......

```
function onLoad() {
var rallyDataSource = new rally.sdk.data.RallyDataSource(
                '__WORKSPACE_OID__',
                '__PROJECT_OID__',
                '__PROJECT_SCOPING_UP__',
                '__PROJECT_SCOPING_DOWN__');
var config = {
              type : 'defect',
              key  : 'defects',       
              columnKeys : ["FormattedID", "Name", "Priority125", "Iteration", "Project", "SubmittedBy", "CreationDate", "ScheduleState", "State"],
              fetch : 'FormattedID,Name,Priority125,Iteration,Project,SubmittedBy,CreationDate,ScheduleState,State',
              query : '((State != "Closed") OR (ScheduleState != "Accepted"))',
              order : 'Priority125'
              };
var table = new rally.sdk.ui.Table(config, rallyDataSource);
table.display("tableDiv");
}
rally.addOnLoad(onLoad); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:56:45.180

为了使它按您的要求工作，需要做几件事：

1.  您可以递归地获取最高一级的深度。因此，如果您想获取缺陷名称、格式化 ID 和项目名称，您的获取将如下所示：
2.  获取：“名称，格式化ID，项目，名称”
3.  通过 rallyDataSource.findAll() 获取数据
4.  对数据进行后处理，以便为表提供所有字符串数据。即破坏对象引用字段，如项目，而不是项目名称。
5.  最后，填充并显示表格。

这是一个工作示例，说明了我认为您想要做的事情（减去您定义的“优先级 125”自定义字段）。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- Copyright (c) 2011  Rally Software Development Corp.  All rights reserved -->
<html>
<head>
    <title>Defect Information</title>
    <meta name="Name"    content="Defect Information" />
    <meta name="Version" content="1.32" />
    <meta name="Vendor"  content="Rally Software" />

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.32/sdk.js?debug=True"></script>
    <script type="text/javascript">

        var rallyDataSource = null;
        var table = null;

        function showTable(results) {

            if (table) {
                table.destroy();
            }

            var tableConfig = {
                columnKeys   : ["FormattedID", "Name", "Iteration", "Project", "SubmittedBy", "CreationDate", "ScheduleState", "State"],
                columnWidths : ["85px",        "350px", "90px",      "100px",  "100px",       "120px",         "100px",         "100px" ]
            };

           table = new rally.sdk.ui.Table(tableConfig);

            // Loop through the rows and clobber object attributes of the results collection with
            // string values
            for(var i = 0; i < results.defects.length; i++){

                thisDefect = results.defects[i];

                var iterationName = "";
                // Grab value fields
                if (thisDefect.Iteration != null) {
                    iterationName = results.defects[i].Iteration.Name;
                } else {
                    iterationName = "Un-scheduled";
                }
                var projectName = thisDefect.Project.Name;

                // Re-map SubmittedBy object to SubmittedBy string
                submittedByDisplayName = thisDefect.SubmittedBy === null ? "": thisDefect.SubmittedBy._refObjectName;                

                // Clober objects with values
                results.defects[i].Iteration = iterationName;
                results.defects[i].Project = projectName;
                results.defects[i].SubmittedBy = submittedByDisplayName;
            }

            table.addRows(results.defects);
            table.display(document.getElementById('defectsDiv'));
        }

        function onLoad() {
            rallyDataSource = new rally.sdk.data.RallyDataSource(
                    '__WORKSPACE_OID__',
                    '__PROJECT_OID__',
                    '__PROJECT_SCOPING_UP__',
                    '__PROJECT_SCOPING_DOWN__');

            var config = {
              type : 'defect',
              key  : 'defects',       
              fetch: 'FormattedID,Name,SubmittedBy,Iteration,Name,Project,Name,CreationDate,ScheduleState,State',
              query : '((State != "Closed") OR (ScheduleState != "Accepted"))',
            };
            rallyDataSource.findAll(config, showTable);
            rallyDataSource.setApiVersion("1.38");
        }

        rally.addOnLoad(onLoad);

    </script>

</head>
<body>
<div id="aDiv"></div>
<div style="font-weight: bold;"><p>Defects</p></div>
<div id="defectsDiv"></div>
</body>
</html> 
```

# openssl - Linux 上的 openSSL 证书验证

> ID：13295585
> 
> 赞同：8
> 
> 时间：2012-11-08T18:40:35.817
> 
> 标签：openssl

JKJS

我有这个证书链： rcert.pem(self-signed) -->scert.pem -->ccert.pem

所有三个证书都是我生成的。任何地方都没有使用互联网连接。这是完美的离线工作。现在，以下是一些命令及其输出：

```
hari@harikrishna:~/hari$ openssl verify rcert.pem
rcert.pem: C = IN, ST = OM, L = OM, O = HARI, OU = HARI, CN = OM, emailAddress = OM
error 18 at 0 depth lookup:self signed certificate
OK
hari@harikrishna:~/hari$ openssl verify -CAfile rcert.pem scert.pem
scert.pem: OK
hari@harikrishna:~/hari$ openssl verify -CAfile rcert.pem rcert.pem
rcert.pem: OK
hari@harikrishna:~/hari$ openssl verify -CAfile rcert.pem -untrusted scert.pem ccert.pem
ccert.pem: C = IN, ST = HARI, L = HARI, O = HARI, OU = HARI, CN = HARI, emailAddress = HARI
error 24 at 1 depth lookup:invalid CA certificate
OK 
```

为什么会创建错误 24。如何删除它？它是受信任的还是不受信任的？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-09T11:12:24.003

JKJS

得到了我自己的问题的答案：

1）通过这些命令创建根 CA 证书：

```
openssl req -newkey rsa:1024 -sha1 -keyout rootkey.pem -out rootreq.pem

openssl x509 -req -in rootreq.pem -sha1 -signkey rootkey.pem -out rootcert.pem 
```

2）通过以下命令将CA证书安装为可信证书：

```
sudo mkdir /usr/share/ca-certificates/extra

sudo cp rootcert.pem /usr/share/ca-certificates/extra/rootcert.crt

sudo dpkg-reconfigure ca-certificates

sudo update-ca-certificates 
```

3）通过以下命令创建由根 CA 签名的中间证书：

```
openssl req -newkey rsa:1024 -sha1 -keyout skey.pem -out sreq.pem

sudo openssl x509 -req -in sreq.pem -sha1 -CA /etc/ssl/certs/rootcert.pem -CAkey rootkey.pem -CAcreateserial -out scert.pem 
```

4）通过以下命令创建由中间CA签名的客户端证书：

```
openssl req -newkey rsa:1024 -sha1 -keyout ckey.pem -out creq.pem

openssl x509 -req -in creq.pem -sha1 -CA scert.pem -CAkey skey.pem -CAcreateserial -out ccert.pem 
```

现在，信任链运行良好：

1）根CA的验证

```
openssl verify rootcert.pem 
rootcert.pem: OK 
```

2）中间CA的验证

```
openssl verify scert.pem 
scert.pem: OK 
```

3）验证客户证书

```
openssl verify -CAfile scert.pem ccert.pem
ccert.pem: OK 
```

# asp.net-mvc - 带有 VM 的 Asp Net MVC 是这种好习惯吗？（代码示例）

> ID：13295586
> 
> 赞同：3
> 
> 时间：2012-11-08T18:40:44.990
> 
> 标签：asp.net-mvc, viewmodel

我想知道我在这里是否是好的做法。将实体框架代码优先与 MVC 和视图模型一起使用。下面我有用于列表、创建、编辑和删除的代码。模型名称 Page 和 2 个 ViewModel 名称为 ContentViewModel 和 ContentListViewModel。

```
 private readonly IUserService _userService;
    //private readonly MembershipProvider _members;

    public ContentController()
    {
        // _members = Membership.Provider;
        _userService = new AspNetMembershipProviderWrapper();
    }

    //
    // GET: /Profile/Content/

    public ActionResult Index()
    {
        using (var db = new BlogContext())
        {
            IEnumerable<Page> pages;
            pages = db.ArticlePages.ToList();
            List<ContentListViewModel> model = new List<ContentListViewModel>();
            foreach (Page pg in pages)
            {
                MembershipUser user = _userService.Get(pg.authorId);
                model.Add(new ContentListViewModel()
                {
                    PageID = pg.pageID,
                    UserName = user.UserName,
                    UserID = (Guid)user.ProviderUserKey,
                    IsFrontPage = pg.frontpage,
                    isPublished = pg.published,
                    PageTitle = pg.titleHeading,
                    PageUrlName = pg.idName,
                    PublishedDate = pg.datentime
                });
            }

            return View(model);
        }
    }

    //
    // GET: /Profile/Content/Create

    public ActionResult Create()
    {
        return View();
    }

    //
    // POST: /Profile/Content/Create

    [HttpPost]
    public ActionResult Create(ContentViewModel page)
    {
        if (ModelState.IsValid)
        {
            using (var db = new BlogContext())
            {
                db.ArticlePages.Add(new Page()
                {
                    authorId = (Guid)Membership.GetUser().ProviderUserKey,
                    datentime = DateTime.Now,
                    frontpage = page.FrontPage,
                    published = page.Published,
                    titleHeading = page.TitleHeading,
                    pageContent = page.Content,
                    idName = page.IdName
                });
                db.SaveChanges();
                return RedirectToAction("Index").Success("Page added Successfully.");
            }
        }

        return View(page);
    }

    //
    // GET: /Profile/Content/Edit/5

    public ActionResult Edit(int id = 0)
    {
        if (id == 0)
        {
            return RedirectToAction("Index").Error("Page Not found.");
        }
        Page pg = new Page();
        using (var db = new BlogContext())
        {
            pg = (from m in db.ArticlePages where m.pageID == id select m).SingleOrDefault();
        }
        if (pg == null)
        {
            return RedirectToAction("Index").Error("Page Not found..");
        }
        return View(new ContentViewModel()
        {
            id = pg.pageID,
            Content = pg.pageContent,
            FrontPage = pg.frontpage,
            Published = pg.published,
            TitleHeading = pg.titleHeading,
            IdName = pg.idName
        });
    }

    // POST: /Profile/Content/Edit/5

    [HttpPost]
    public ActionResult Edit(ContentViewModel page)
    {
        if (ModelState.IsValid)
        {
            using (var db = new BlogContext())
            {
                var oPage = db.ArticlePages.Single(p => p.pageID == page.id);
                oPage.frontpage = page.FrontPage;
                oPage.idName = page.IdName;
                oPage.pageContent = page.Content;
                oPage.published = page.Published;
                oPage.titleHeading = page.TitleHeading;
                db.SaveChanges();
                return RedirectToAction("Index").Success("Page updated");
            }
        }
        return View(page);
    }

    //
    // POST: /Profile/Content/Delete/5

    [HttpPost]
    public ActionResult Delete(int id)
    {
        using (var db = new BlogContext())
        {
            Page page = db.ArticlePages.Find(id);
            db.ArticlePages.Remove(page);
            db.SaveChanges();
            return RedirectToAction("Index").Success("Page deleted");
        }
    } 
```

我想知道有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:55:05.833

虽然该方法肯定比将实体直接传递给视图要好，但我建议进行一些改进。

首先，我将创建一个新的业务层，然后创建一个外观类来检索您的数据。然后将所有数据库访问移至该层。因此，您最终会调用服务层，而不是像上面那样直接访问数据库。

其次，您应该考虑使用 AutoMapper 之类的东西在数据实体和视图模型之间进行映射。

# javascript - 创建元素后执行 jQuery 函数

> ID：13295590
> 
> 赞同：0
> 
> 时间：2012-11-08T18:40:58.133
> 
> 标签：javascript, jquery, events, click

对不起，我的英语不好。
我做了一个 jQuery 函数，当用户调用该函数时，它会在页面上创建一个元素。对于那个元素，我做了一个 jQuery click 事件，它工作正常，
但是如果用户像这样调用函数 3 次：

```
$.someFunction();
$.someFunction();
$.someFunction(); 
```

如果用户点击第一个元素，它将在点击事件回调函数中执行3次，如果用户点击第二个元素，它将在点击事件回调函数中执行2次，如果用户在最后一个，它会做一次。
我希望当用户单击每个元素时，回调函数只会发生一次。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:47:09.693

将事件绑定到创建的元素而不是所有现有元素。

```
$.somefunction = function() {
    $("<div />").text("click me!").bind("click",function(){
        alert("Hello World!");
    }).appendTo("body");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:43:23.603

尝试做类似的事情：

```
$(".element").unbind("click").bind("click", function(){
    alert('a');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:49:15.553

更简单：使用 jquery.on

```
$('.some-selector').on('click', function()

{
// do your work here
}); 
```

使用 jquery（在旧版本中为“live”），它将绑定到与该选择器匹配的任何元素，无论何时将其添加到 DOM。

# windows-phone - Windows Phone 7 中的二进制到图像

> ID：13295591
> 
> 赞同：0
> 
> 时间：2012-11-08T18:41:00.993
> 
> 标签：windows-phone

我的应用程序从远程服务器检索文件内容。文件可以是图像或文本。当文件是图像时，它会返回一些类似这样的字符串： **????\bNExif\0\0MM\0*\0\0\0\b\0\a\0....**等等。据我了解，这是一个图像，但采用其他格式（二进制？）。

那么如何将该字符串转换为图像并将其设置为控制源？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:13:48.180

我认为你可以这样做：

```
MemoryStream ms = new MemoryStream(bytes);
BitmapImage bi = new BitmapImage();
bi.SetSource(ms); 
```

然后，如果您在 XAML 中有一个 Image 元素，请说 XamlImage：

```
XamlImage.Source = bi; 
```

# php - 如何从 joomla 1.5 模块中的另一个表中获取数据？

> ID：13295595
> 
> 赞同：1
> 
> 时间：2012-11-08T18:41:07.000
> 
> 标签：php, mysql, joomla1.5, helper, joomla-module

目前我有组件模块，我想从另一个表中添加一些数据。

这是我当前的 helper.php 代码：

```
<?php

defined('_JEXEC') or die('Direct Access to this location is not allowed.'); 

class Modprop_lastHelper

{

function getItems($ShowFeatured,$OrderBy,$Order,$amountShow,$ShowPropertyID)

{        
switch($OrderBy) {
case 0 :
$OrderBy = 'p.id';
break;
case 1 :
$OrderBy = 'p.name';
break;
case 2 :
$OrderBy = 'p.price';
break;
case 3 :
$OrderBy = 'p.hits';
break;
case 4 :
$OrderBy = 'p.refresh_time';
break;
}
switch($Order) {
case 0 :
$Order = 'ASC';
break;
case 1 :
$Order = 'DESC';
break;
}   
if($ShowPropertyID){$where= 'WHERE p.id IN ('.$ShowPropertyID.')';}else{$where=    'WHERE p.published = 1 ';}
    if($ShowFeatured){$sqlFeatured= ' AND p.featured = 1';}
    $db = &JFactory::getDBO();     
    $query = 'SELECT p.*, i.name as imagename,c.name as name_category,t.name as name_type,cy.name as name_country,s.name as name_state,l.name as name_locality,'
            . ' CASE WHEN CHAR_LENGTH(p.alias) THEN CONCAT_WS(":", p.id, p.alias) ELSE p.id END as Pslug,'
    . ' CASE WHEN CHAR_LENGTH(c.alias) THEN CONCAT_WS(":", c.id, c.alias) ELSE c.id END as Cslug,'
    . ' CASE WHEN CHAR_LENGTH(cy.alias) THEN CONCAT_WS(":", cy.id, cy.alias) ELSE cy.id END as CYslug,'
    . ' CASE WHEN CHAR_LENGTH(s.alias) THEN CONCAT_WS(":", s.id, s.alias) ELSE s.id END as Sslug,'      
    . ' CASE WHEN CHAR_LENGTH(l.alias) THEN CONCAT_WS(":", l.id, l.alias) ELSE l.id END as Lslug, ' 
    . ' CASE WHEN CHAR_LENGTH(t.alias) THEN CONCAT_WS(":", t.id, t.alias) ELSE t.id END as Tslug '
            . ' FROM #__properties_products AS p '
            . ' LEFT JOIN #__properties_country AS cy ON cy.id = p.cyid '               
            . ' LEFT JOIN #__properties_state AS s ON s.id = p.sid '
            . ' LEFT JOIN #__properties_locality AS l ON l.id = p.lid '
            . ' LEFT JOIN #__properties_category AS c ON c.id = p.cid '
            . ' LEFT JOIN #__properties_type AS t ON t.id = p.type '
            . ' LEFT JOIN #__properties_images AS i ON i.parent = p.id '
            . $where                
            . $sqlFeatured
            . ' GROUP BY p.id ' 
            . ' ORDER BY '.$OrderBy.' '.$Order
            . ' LIMIT '.$amountShow;

    $db->setQuery($query);  
    $items = $db->loadObjectList();

   // $items = ($items = $db->loadObjectList())?$items:array(); 
//echo str_replace('#_','jos',$query);

    return $items;

}  
function NameCategory()

{   
$db     =& JFactory::getDBO();  
$query = 'SELECT * FROM #__properties_category WHERE published = 1 ORDER BY id';        
    $db->setQuery($query);        
    $Categories = $db->loadObjectList();

foreach ($Categories as $row) :
$Category[$row->id] = $row->name;
endforeach; 

return $Category;
}

function NameType()
{   
$db     =& JFactory::getDBO();  
$query = 'SELECT * FROM #__properties_type WHERE published = 1 ORDER BY name';      
    $db->setQuery($query);        
    $Types = $db->loadObjectList();

foreach ($Types as $row) :
$Type[$row->id] = $row->name;
endforeach; 

    return $Type;
}

function NameLocality()
{   
$db     =& JFactory::getDBO();  
$query = 'SELECT * FROM #__properties_locality WHERE published = 1 ORDER BY name';      
    $db->setQuery($query);        
    $Localities = $db->loadObjectList();

foreach ($Localities as $row) :
$Locality[$row->id] = $row->name;
endforeach; 

    return $Locality;
}

function getItemid( $TableName )
{
    $db =& JFactory::getDBO();  
    $query = 'SELECT id FROM #__menu' .
            ' WHERE LOWER( link ) = "index.php? option=com_properties&view='.$TableName.'&id=0"';               
    $db->setQuery( $query );
    $output = $db->loadResult();

    if(!$output){
    $query = 'SELECT id FROM #__menu' .
            ' WHERE LOWER( link ) = "index.php? option=com_properties&view=properties"';                
    $db->setQuery( $query );
    $output = $db->loadResult();
    }

    if(!$output){
    $query = 'SELECT id FROM #__menu' .
            ' WHERE LOWER( link ) = "index.php?option=com_properties&view=properties&cid=0&tid=0"';             
    $db->setQuery( $query );
    $output = $db->loadResult();
    }

    return $output;
}
} 

?> 
```

我在 helper.php 中添加了额外的函数来从另一个表 properties_users 中获取数据：

```
 function Units()
{   

$db     =& JFactory::getDBO();  
$query = ' SELECT u.* '         
        . ' FROM #__properties_units as u '                 
        . ' WHERE u.published = 1 AND u.productid = p.id'           
        . ' order by u.ordering ';      
    $db->setQuery($query);   
    $Units = $db->loadObjectList();

return $Units;
} 
```

当我尝试从 Units 表中显示某些内容时，什么也没有出现。我在我的 tmp 视图中使用以下代码：

```
<?php echo $Units->title;?> 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:24:49.127

这是你必须做的：

*   在***函数 getUnits()***中重命名***函数 Units( )***
**   重命名***$Units = $db->loadObjectList();*** 在*$output = $db->loadObjectList();**   重命名***返回 $Units;*** 作为***回报 $output;****

 *上面的 3 处更改只是为了使您的代码保持一致。

现在，在您的模块 php 文件中，您可以**像这样调用您的助手：**

`$units = Modprop_lastHelper::getUnits();`

`var_dump($units);`

**确保包含帮助文件**（例如）：

`require_once(dirname(__FILE__).DS.'helper.php');`

* * *

1.  我也强烈建议你学习 Joomla！有关[**创建简单模块的文档。**](http://docs.joomla.org/Creating_a_simple_module)

2.  使用[var_dump()](http://php.net/manual/en/function.var-dump.php)调试您的代码。更多，做一些关于“[你如何调试 PHP 脚本](http://www.google.com/search?q=How%20do%20you%20debug%20PHP%20scripts)”的研究。你不会在任何地方找到帮助，你只是说“它不工作......”。*

# java - 多个一对多关系ResultSetExtractor

> ID：13295600
> 
> 赞同：8
> 
> 时间：2012-11-08T18:41:44.767
> 
> 标签：java, spring, jdbc, jdbctemplate, spring-jdbc

假设我有一个具有两个不同的一对多关系的对象。很像：

`Customer 1<->M Brands`和`Customer 1<->M Orders`

假设我的对象`Customer`有两个与这两个对象相关的列表。

我读过这个例子： http: [//forum.springsource.org/showthread.php?50617](http://forum.springsource.org/showthread.php?50617-rowmapper-with-one-to-many-query) -rowmapper-with-one-to-many-query 它解释了如何用一个一对多的关系来做到这一点。为了您的方便，这里是`ResultSetExtractor`覆盖：

```
private class MyObjectExtractor implements ResultSetExtractor{

    public Object extractData(ResultSet rs) throws SQLException, DataAccessException {
        Map<Integer, MyObject> map = new HashMap<Integer, MyObject>();
        MyObject myObject = null;
        while (rs.next()) {
            Integer id = rs.getInt("ID);
            myObject = map.get(id);
          if(myObject == null){
              String description = rs,getString("Description");
              myObject = new MyObject(id, description);
              map.put(id, myObject);
          }
      MyFoo foo = new MyFoo(rs.getString("Foo"), rs.getString("Bar"));
      myObject.add(myFoo);
        }
        return new ArrayList<MyObject>(map.values());;
    }
} 
```

我不认为它涵盖了如何与两者一起工作。什么是最干净的方法？有没有比条件迭代更简单的方法？在这种情况下，集合会比列表更好吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-27T12:04:52.453

根据您的问题，我假设您有三张桌子；客户、品牌、订单。如果您想将 Customer 的 Brands 和 Orders 属性获取到您的客户对象，而 Brands 和 Orders 之间没有关系，我建议使用 UNION 查询。像这样的东西：

```
TBL_CUSTOMER
------------
CUSTOMER_ID
CUSTOMER_ACCOUNT_NO
CUSTOMER_NAME

TBL_CUSTOMER_BRANDS
-------------------
CUSTOMER_BRAND_ID            - UK
BRAND_NAME
CUSTOMER_ID                  - FK

TBL_ORDERS
-------------------
ORDER_ID                     - UK
CUSTOMER_ID                  - FK 
```

询问：

```
SELECT CUS.*, BRANDS.CUSTOMER_BRAND_ID COL_A, BRANDS.BRAND_NAME COL_B, 1 IS_BRAND FROM TBL_CUSTOMER CUS JOIN TBL_CUSTOMER_BRANDS BRANDS ON (CUS.CUSTOMER_ID = BRANDS.CUSTOMER_ID)
UNION ALL
SELECT CUS.*, ORDERS.ORDER_ID, '', 0 IS_BRAND FROM TBL_CUSTOMER CUS JOIN TBL_ORDERS ORDERS ON (CUS.CUSTOMER_ID = ORDERS.CUSTOMER_ID) 
```

您的 ResultSetExtractor 将变为：

```
private class MyObjectExtractor implements ResultSetExtractor{

    public Object extractData(ResultSet rs) throws SQLException, DataAccessException {
            Map<Long, Customer> map = new HashMap<Long, Customer>();

        while (rs.next()) {
            Long id = rs.getLong("CUSTOMER_ID");
            Customer customer = map.get(id);
            if(customer == null){
                customer = new Customer();
                customer.setId(id);
                customer.setName(rs.getString("CUSTOMER_NAME"));
                customer.setAccountNumber(rs.getLong("CUSTOMER_ACCOUNT_NO"));
                map.put(id, customer);
                    }

            int type = rs.getInt("IS_BRAND");
            if(type == 1) {
                List brandList = customer.getBrands();
                if(brandsList == null) {
                    brandsList = new ArrayList<Brand>();
                    customer.setBrands(brandsList);
                }
                Brand brand = new Brand();
                brand.setId(rs.getLong("COL_A"));
                brand.setName(rs.getString("COL_B"));
                brandsList.add(brand);
            } else if(type == 0) {
                List ordersList = customer.getOrders();
                if(ordersList == null) {
                    ordersList = new ArrayList<Order>();
                    customer.setOrders(ordersList);
                }
                Order order = new Order();
                order.setId(rs.getLong("COL_A"));
                ordersList.add(order);
            }
        }
        return new ArrayList<Customer>(map.values());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T11:41:02.287

我认为没有比遍历所有行、提取两个不同的对象并将其添加到Customer 对象中的`List<Brand>`和中更好的方法了。`List<Order>`

所以你最终会得到一个客户对象：

```
public class Customer {
     private List<Brand> brands;
     private List<Order> orders;
....
} 
```

SpringSource 上有一个关于多个行映射器的问题：[https ://jira.springsource.org/browse/SPR-7698](https://jira.springsource.org/browse/SPR-7698)

但只有一条评论链接到一对多结果集提取器： [https ://github.com/SpringSource/spring-data-jdbc-ext/blob/master/spring-data-jdbc-core/src/main/ java/org/springframework/data/jdbc/core/OneToManyResultSetExtractor.java](https://github.com/SpringSource/spring-data-jdbc-ext/blob/master/spring-data-jdbc-core/src/main/java/org/springframework/data/jdbc/core/OneToManyResultSetExtractor.java)

如果您真的需要急切的获取，我认为您做对了。如果您需要延迟获取，您可以在运行时加载相应的订单和品牌。这就是 Hibernate 和其他 ORM 框架的做法。这取决于您的场景以及您对对象的处理方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T06:56:19.773

我假设 James Jithin 在他的回答中描述的模型：

```
TBL_CUSTOMER
------------
CUSTOMER_ID
CUSTOMER_ACCOUNT_NO
CUSTOMER_NAME

TBL_CUSTOMER_BRANDS
-------------------
CUSTOMER_BRAND_ID            - UK
BRAND_NAME
CUSTOMER_ID                  - FK

TBL_ORDERS
-------------------
ORDER_ID                     - UK
CUSTOMER_ID                  - FK 
```

我建议不要使用一个查询，而是建议以下三个：

```
SELECT CUS.* FROM TBL_CUSTOMER CUS 

SELECT BRANDS.CUSTOMER_ID, BRANDS.CUSTOMER_BRAND_ID, BRANDS.BRAND_NAME FROM TBL_CUSTOMER_BRANDS BRANDS

SELECT ORDERS.CUSTOMER_ID, ORDERS.ORDER_ID FROM TBL_ORDERS ORDERS 
```

您的 RowCallbackHandlers 将变为：

```
private class CustomerRowCallbackHandler  implements RowCallbackHandler {

    private final Map<Long, Customer> customerMap;

    public BrandRowCallbackHandler(Map<Long, Customer> customerMap) { this.customerMap = customerMap}

    public void processRow(ResultSet rs) throws SQLException {
            Long id = rs.getLong("CUSTOMER_ID");
            Customer customer = map.get(id);
            if(customer == null){
                customer = new Customer();
                customer.setId(id);
                customer.setName(rs.getString("CUSTOMER_NAME"));
                customer.setAccountNumber(rs.getLong("CUSTOMER_ACCOUNT_NO"));
                map.put(id, customer);
                    }
    }
}

private class BrandRowCallbackHandler implements RowCallbackHandler {

    private final Map<Long, Customer> customerMap;

    public BrandRowCallbackHandler(Map<Long, Customer> customerMap) { this.customerMap = customerMap}

    public void processRow(ResultSet rs) throws SQLException {
            Long id = rs.getLong("CUSTOMER_ID");
            Customer customer = map.get(id);
            if(customer != null){
                List brandList = customer.getBrands();
                if(brandsList == null) {
                    brandsList = new ArrayList<Brand>();
                    customer.setBrands(brandsList);
                }
                Brand brand = new Brand();
                brand.setId(rs.getLong("CUSTOMER_BRAND_ID"));
                brand.setName(rs.getString("CUSTOMER_BRAND_NAME"));
                brandsList.add(brand);
            } 
    }
}

private class OrderRowCallbackHandler implements RowCallbackHandler {

    private final Map<Long, Customer> customerMap;

    public OrderRowCallbackHandler(Map<Long, Customer> customerMap) { this.customerMap = customerMap}

    public void processRow(ResultSet rs) throws SQLException {
            Long id = rs.getLong("CUSTOMER_ID");
            Customer customer = map.get(id);
            if(customer != null){
                List ordersList = customer.getOrders();
                if(ordersList == null) {
                    ordersList = new ArrayList<Order>();
                    customer.setOrders(ordersList);
                }
                Order order = new Order();
                order.setId(rs.getLong("ORDER_ID"));
                ordersList.add(order);
            }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T15:46:27.817

如果我*真的*必须这样做，我更喜欢*RowCallbackHandler*而不是*ResultSetExtractor*。请参阅[RowCallbackHandler api](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/RowCallbackHandler.html)和[JDBCTemplate api](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#query%28java.lang.String,%20org.springframework.jdbc.core.PreparedStatementSetter,%20org.springframework.jdbc.core.RowCallbackHandler%29)。

在这种情况下，您需要自己在处理程序中收集生成的客户集合。 *集合*可以帮助过滤掉重复项。

# c# - RestSharp POST 不工作

> ID：13295602
> 
> 赞同：1
> 
> 时间：2012-11-08T18:41:46.480
> 
> 标签：c#, json, winforms, desktop, restsharp

我正在用 C# 构建一个客户端-服务器桌面应用程序，而 RestSharp 似乎在某个地方绊倒了我的程序。最奇怪的是，其他 POST 正在同一个 Node.js 服务器应用程序上工作。

这是我使用 RestSharp 的代码：

```
RestClient client = new RestClient("http://"+Configuration.server);
RestRequest request = new RestRequest("sync", Method.POST);

request.AddParameter("added", Indexer.getAddedJson());
request.AddParameter("removed", Indexer.getRemovedJson());

RestResponse<StatusResponse> response = (RestResponse<StatusResponse>)client.Execute<StatusResponse>(request);
e.Result = response.Data; 
```

这不起作用 - 我的意思是它根本不会调用服务器。我也使用 Fiddler 验证了这一点。

但这确实有效：

```
using (var wb = new WebClient())
{
    var data = new NameValueCollection();
    data["added"] = Indexer.getAddedJson();
    data["removed"] = Indexer.getRemovedJson();

    var resp = wb.UploadValues("http://" + Configuration.server + "/sync", "POST", data);

} 
```

我无法弄清楚我的生活发生了什么。我不想仅仅为这个请求停止使用 RestSharp，其他 POST 请求工作得很好！

这不是反序列化问题，因为 response.Content 为空。我在其他电话中也收到了 StatusResponse，所以这可能不是问题。

# django - 与 django-allauth 联系后决定去哪里

> ID：13295603
> 
> 赞同：5
> 
> 时间：2012-11-08T18:41:47.163
> 
> 标签：django, django-authentication, django-allauth

使用 django-allauth 将帐户与社交应用程序连接后，用户将被重定向到`accounts/social/connections`. 我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T13:26:03.247

如果用户正在向其现有（本地）帐户添加更多社交帐户，那么最合乎逻辑的默认设置确实是重定向到社交帐户连接管理屏幕。

但是，您可以通过传递下一个参数轻松覆盖默认值。看看这里：

[https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/helpers.py#L125](https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/helpers.py#L125)

您将看到该`next`参数已被选中，并返回到默认值（连接）。

因此，要更改默认行为，只需传递下一个参数：

```
<a href="{% provider_login_url "openid" openid="https://www.google.com/accounts/o8/id" next="/success/url/" %}">Google</a> 
```

如果您使用的是默认模板，则必须在此处添加下一个 url：

[https://github.com/pennersr/django-allauth/blob/master/allauth/templates/socialaccount/connections.html#L53](https://github.com/pennersr/django-allauth/blob/master/allauth/templates/socialaccount/connections.html#L53)

# entity-framework-4 - 根据条件加载 EDMX

> ID：13295606
> 
> 赞同：1
> 
> 时间：2012-11-08T18:41:54.737
> 
> 标签：entity-framework-4

我有多个使用实体框架 (EDMX) 创建的数据模型，并希望根据特定条件（类似于工厂模型）进行加载，如下所示：

```
demoEntity obj
if(condtion1)
{ 
  obj= new firstmodel();
}
else if
{
  obj= new secondmodel();
} 
```

有什么办法可以做到这一点？

# node.js - 如何生成nodejs express依赖package.json

> ID：13295609
> 
> 赞同：4
> 
> 时间：2012-11-08T18:42:02.820
> 
> 标签：node.js, dependencies, express

当我开始开发我的第一个 nodejs express 应用程序时，我添加了许多带有 npm 的包。

我想知道是否有办法生成`package.json`包含所有当前依赖项的文件或目录下当前包的列表`nodes_modules`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-24T19:12:58.480

只需`npm init`在与您的项目相同的目录中运行。

您将被询问一系列问题（名称、版本、描述等），一旦完成，它将生成一个`package.json`文件，其中包含当前安装在`node_modules`目录中的所有依赖项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T18:54:55.600

运行`npm list`以查看已安装的内容。运行`npm shrinkwrap`以构建一个`npm-shrinkwrap.json`文件，您可以将其用作构建适当的`package.json`. 我的工作流程总是更新 package.json 然后运行`npm install`​​. 我从不跑去`npm install foo`获取一些包，因为它会产生忘记添加它`package.json`然后让您的应用程序无法在部署时启动的风险。

**更新到添加**：这些天我*确实*运行了`npm install --save foo`，或者`npm install --save-dev foo`因为我现在已经确定`~0.4.3`它添加的版本号`package.json`比我以前的偏好更好，`0.4.x`因为它`~`为您提供了更精确的最小版本号。

# wcf - 在云计算中通知 WCF 订阅者

> ID：13295611
> 
> 赞同：1
> 
> 时间：2012-11-08T18:42:16.583
> 
> 标签：wcf, azure, cloud

我最近阅读了很多关于 WCF 的内容，每当出现实现订阅者广播机制的主题时（如在即时消息系统中），解决方案总是使用静态字典来保存订阅者频道。

可以在以下问题的答案中找到一个示例，但这是一种常见做法。 [使订阅者列表在对服务的调用中可用](https://stackoverflow.com/questions/9089980/making-a-list-of-subscribers-available-across-calls-to-a-service)

对于“传统”网络编程来说，这似乎是一个非常好的解决方案，但是在云中是如何处理的呢？具体来说，我们如何绕过网格中的每台计算机都有不同的“静态”变量这一事实？

我对不同的云平台知之甚少。Azure、Amazon Web Services 和 VMWare 是否有不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:24:45.150

对于广播/推送类型的通知，请查看 SignalR (http://signalr.net/)。Microsoft 正在将其作为 ASP.NET 平台的一部分： http: [//channel9.msdn.com/Events/Build/2012/3-034](http://channel9.msdn.com/Events/Build/2012/3-034)

它有一些非常好的功能，比如优雅，如果服务器/客户端不支持 WebSockets 等高级功能，则可以使用多种机制。虽然它是可行的，但您必须在 WCF 中编写所有这些代码。

云供应商平台之间存在很大差异。我可以向您发布多个链接，但您提到的云供应商正在迅速改变**他们**提供的内容。您对特定云供应商的承诺是长期的……不要认为供应商 A 拥有供应商 B 所没有的东西。顺便说一句，有一些差异……例如，亚马逊有专门的虚拟机：高 I/O、高内存、高 CPU。同时，例如 Azure 有一个设计得更好的 VM 层。

我是这样想的（mu 意见）......微软是一家拥有：.NET、ASP.NET、服务器平台：SQL Server、Windows Server、SharePoint、Office Services 等的公司。他们非常适合像这样的人没有像这样丰富的产品组合的亚马逊或 VMWare。此外，微软可以将这些服务器定价到云中，亚马逊/RackSpace/VMWare 必须为此向微软支付溢价。您似乎在谈论 WCF/.NET，这将有利于 Microsoft Azure 平台。

在 Azure 上，您可以运行 Linux VM；python、Java 等中的代码，但它有利于 Microsoft 堆栈。相反，对于 AWS，您可以运行 .NET/Microsoft 等，但它有利于 Linux/开源堆栈。从长远来看……因为在 2 年内，两家主要的云供应商都将在这些领域做出承诺。例如，RackSpace 正在全力投入他们的 OpenStack 平台……他们别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:41:18.433

Windows Azure 服务总线有几个选项可用于广播 WCF 事件。

Realy 服务有一个 netEventRelayBinding，它允许订阅服务实例在客户端调用端点时接收单向服务调用。如果客户端断开连接，他们将不会收到任何消息。

[http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_eventingonservicebusvs2010_topic2.aspx](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_eventingonservicebusvs2010_topic2.aspx)

Brokered Messaging 具有提示和订阅，其中一条消息可以传播给多达 2,000 个订阅者。消息被持久存储，因此如果客户端断开连接，他们将在重新连接时收到所有消息。

[http://www.cloudcasts.net/devguide/Default.aspx?id=12044](http://www.cloudcasts.net/devguide/Default.aspx?id=12044)

问候，

艾伦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T20:41:36.303

可能值得您在[AppHarbor上研究类似](https://appharbor.com/addons)[RabbitMQ](http://www.rabbitmq.com/)的东西。这是我一直想看但找不到时间的东西。我只提到它是因为没有其他人有；）

# android - Android - 如何写入 /mnt/local/

> ID：13295620
> 
> 赞同：0
> 
> 时间：2012-11-08T18:42:58.573
> 
> 标签：android, file-io

我对我的应用程序要做的是下载一些文件并写入/mnt/local/。

这是我尝试的：

```
String baseDir = Environment.getRootDirectory().getAbsolutePath()+"/mnt/local/mydir" //mydir exists.
FileOutputStream fOut = new FileOutputStream(baseDir); 
```

我得到的是：

```
11-08 18:40:29.799: W/System.err(26464): java.io.FileNotFoundException: /system/mnt/local/htdocs: open failed: ENOENT (No such file or directory)
11-08 18:40:29.800: W/System.err(26464):    at libcore.io.IoBridge.open(IoBridge.java:409)
11-08 18:40:29.801: W/System.err(26464):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
11-08 18:40:29.802: W/System.err(26464):    at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
11-08 18:40:29.803: W/System.err(26464):    at java.io.FileOutputStream.<init>(FileOutputStream.java:117)
11-08 18:40:29.803: W/System.err(26464):    at support.Support.downloadFile(Support.java:45)
11-08 18:40:29.804: W/System.err(26464):    at task.OfflineUpdate.updateFromArchive(OfflineUpdate.java:84)
11-08 18:40:29.805: W/System.err(26464):    at task.OfflineUpdate.update(OfflineUpdate.java:77)
11-08 18:40:29.805: W/System.err(26464):    at task.OfflineUpdate.access$3(OfflineUpdate.java:74)
11-08 18:40:29.805: W/System.err(26464):    at task.OfflineUpdate$1.run(OfflineUpdate.java:59)
11-08 18:40:29.806: W/System.err(26464):    at java.lang.Thread.run(Thread.java:856)
11-08 18:40:29.807: W/System.err(26464): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
11-08 18:40:29.808: W/System.err(26464):    at libcore.io.Posix.open(Native Method)
11-08 18:40:29.810: W/System.err(26464):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
11-08 18:40:29.810: W/System.err(26464):    at libcore.io.IoBridge.open(IoBridge.java:393)
11-08 18:40:29.812: W/System.err(26464):    ... 9 more 
```

我不知道如何访问该目录..有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:54:01.617

这是不可能的，除非在以超级用户身份运行应用程序的根设备上，否则您在那里没有读取或写入权限。

要摆脱`/system/`前缀，`Environment.getRootDirectory().getAbsolutePath()+`请从您的代码中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:50:09.057

似乎（从名称）`mydir`是目录（不是文件），所以你不能写它。

# java - 递归 XML 解析器

> ID：13295621
> 
> 赞同：3
> 
> 时间：2012-11-08T18:43:03.043
> 
> 标签：java, xml, recursion, xml-parsing

我有以下 xml 文件：

```
<?xml version="1.0"?>
<CONFIG>
    <FUNCTION>
        <NAME>FUNCT0</NAME>
        <CALLS>
            <FUNCTION>
            <NAME>FUNCT0_0</NAME>
            </FUNCTION>
        </CALLS>
        <CALLS>
            <FUNCTION>
            <NAME>FUNCT0_1</NAME>
            </FUNCTION>
        </CALLS>
    </FUNCTION>
    <FUNCTION>
        <NAME>FUNCT1</NAME>
    </FUNCTION>
</CONFIG> 
```

我有一个名为 FunctionInfo 的类，它既存储函数的名称，也包含一个 ArrayList 以包含函数调用的子函数。

我想最终得到一个 ArrayList ，其中包含顶级函数，然后将它们的子函数递归地存储在对象中。

我需要它来实现无限深度的递归。

我的问题是编写可以执行此任务的递归 XML 解析器的最简单方法是什么？

编辑：我在 Java 中工作。

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:09:35.187

除非您的文件很大，否则您可以使用 java DOM 解析器（DOM 解析器将文件保存在内存中）

给定一个节点（从根开始），您可以枚举它的子节点，然后递归地在每个子节点上调用相同的函数。

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class RecursiveDOM {
    public static void main(final String[] args) throws SAXException, IOException, ParserConfigurationException {
        new RecursiveDOM("file.xml");
    }

    public RecursiveDOM(final String file) throws SAXException, IOException, ParserConfigurationException {
        final DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
        final DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
        final Document doc = docBuilder.parse(this.getClass().getResourceAsStream(file));
        final List<String> l = new ArrayList<String>();
        parse(doc, l, doc.getDocumentElement());
        System.out.println(l);
    }

    private void parse(final Document doc, final List<String> list, final Element e) {
        final NodeList children = e.getChildNodes();
        for (int i = 0; i < children.getLength(); i++) {
            final Node n = children.item(i);
            if (n.getNodeType() == Node.ELEMENT_NODE) {
                list.add(n.getNodeName());
                parse(doc, list, (Element) n);
            }
        }
    }

} 
```

结果：

```
[FUNCTION, NAME, CALLS, FUNCTION, NAME, CALLS, FUNCTION, NAME, FUNCTION, NAME] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:20:56.783

此外，您可以考虑使用 JAXB（将类映射到 XML），这将产生一个 java 类树，如果实施得当，每个类都可以实现特定类型的函数，因此可以递归地“计算”树。

这是一个基本的 JAXB 实现，使用 Config.unmarshal 从 InputStream 重建它：

```
import java.io.OutputStream;
import java.io.Reader;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

public class TestJAXB {

    public static void main(final String[] args) throws JAXBException {
        final Function e5 = new Function("N5", null);
        final Function e6 = new Function("N6", null);
        final Function e4 = new Function("N4", null);
        final Function e2 = new Function("N2", ((new Call[] { new Call(e4) })));
        final Function e3 = new Function("N3", ((new Call[] { new Call(e5) })));
        final Function e1 = new Function("N1", ((new Call[] { new Call(e2), new Call(e3) })));
        new Config(new Function[] { e1, e6 }).marshall(System.out);
    }

    @XmlRootElement(name = "CONFIG")
    static class Config {
        @XmlElement(name = "FUNCTION")
        private Function[] functions;

        public Config(final Function[] f) {
            this.functions = f;
        }

        protected Config() {
        }

        public void marshall(final OutputStream out) throws JAXBException {
            final JAXBContext jaxbContext = JAXBContext.newInstance(this.getClass());
            final Marshaller marshaller = jaxbContext.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
            marshaller.marshal(this, out);
        }

        public final static Config unmarshall(final Reader r) throws JAXBException {
            final JAXBContext jaxbContext = JAXBContext.newInstance(Config.class);
            final Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
            return (Config) unmarshaller.unmarshal(r);
        }

    }

    @XmlRootElement(name = "FUNCTION")
    static class Function {
        @XmlElement(name = "NAME")
        String name;

        @XmlElement(name = "CALLS")
        Call[] calls;

        public Function(final String name, final Call[] calls) {
            this.name = name;
            this.calls = calls;
        }

        protected Function() {
        }

    }

    @XmlRootElement(name = "CALL")
    static class Call {
        @XmlElement(name = "FUNCTION")
        Function f;

        protected Call() {
        }

        public Call(final Function f) {
            this.f = f;
        }

    }
} 
```

# iphone - UIView 过渡导致崩溃

> ID：13295626
> 
> 赞同：0
> 
> 时间：2012-11-08T18:43:17.607
> 
> 标签：iphone, objective-c, ios, cocoa-touch

```
- (IBAction)StartGame:(id)sender
{
    MainGameDisplay *secondPage = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];

    [self.view addSubview:secondPage.view];
    secondPage.view.frame = CGRectMake(568, 0, 568, 320);//(N = horizontal, N = vertical)
    [UIView animateWithDuration:1.0f
                     animations:^{
                         //actual frame needed with an animation.
                         secondPage.view.frame = CGRectMake(0, 0, 568, 320);
                     }
                     completion:^(BOOL finished) {
                         //ENTER HERE ANYTHING TO RUN AFTER ANIMATION IS COMPLETED:
                         [self presentViewController: secondPage animated:NO completion:NULL];
                         //This will make the next page load correctly after the transition, otherwise you cannot. interact with anything.
                     }];
} 
```

这非常适合进入视图。没有`[self presentViewController: secondPage animated:NO completion:NULL];`，您将无法与新页面进行交互，您单击的任何按钮都会导致它崩溃。

如果我返回第一页，正常执行，那很好，但如果我再次单击 StartGame，程序会更改视图，然后简单地崩溃。问题在于行`[self.view addSubview:secondPage.view];`，如果我将其注释掉，程序不会崩溃，但是当它更改视图时它不会转换并立即出现。

横向模式下的过渡也非常滞后/故障，但纵向完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:20:42.773

在这里，您正在将`secondPage`currentView 添加为子视图。并再次介绍它。我认为它导致一些与内存相关的事情可能是其他事情（如果你`crash log`在你的问题中放一些东西会很清楚）。但我建议您无需`secondPage`再次展示。这是您的代码，我在此处进行了单行更改。

```
 - (IBAction)StartGame:(id)sender
      {
      MainGameDisplay *secondPage = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];

    [self.view addSubview:secondPage.view];
    secondPage.view.frame = CGRectMake(568, 0, 568, 320);//(N = horizontal, N = vertical)
    [UIView animateWithDuration:1.0f
                 animations:^{
                     //actual frame needed with an animation.
                     secondPage.view.frame = CGRectMake(0, 0, 568, 320);
                 }
                 completion:^(BOOL finished) {

                     //ENTER HERE ANYTHING TO RUN AFTER ANIMATION IS COMPLETED: 
```

**您应该在下面发表评论，因为您已经将 secondPage 添加为 currentView 上的子视图。因此无需再次显示它。**

```
 //  [self presentViewController: secondPage animated:NO completion:NULL];
                     //This will make the next page load correctly after the transition, otherwise you cannot. interact with anything.
                 }]; 
```

}

编辑：对于横向模式，您应该在设置 frame `secondPage`view 时更改坐标。我认为您正在为 4 英寸设备创建此视图。在这里你可以通过设置一些检查来做到这一点

```
 if(checkIfDeviceIsInlandscae)
    {
       secondPage.view.frame = CGRectMake(568, 0, 568, 320);

    } 

   else 
    {
      secondPage.view.frame = CGRectMake(320, 0, 320, 568);
    } 
```

在`animation`块内根据方向改变框架，就像我在拖曳线上所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:28:52.713

一个问题是同时调用两者`presentViewController:`，并且`addSubview:`您要添加两次视图。我怀疑您发现有必要调用，`presentViewController:`因为它会调用`viewDidAppear:`并且您正在使用它来连接 secondPage 中的 UI。我会在 MainGameDisplay 的`viewDidAppear:`方法中添加一个日志语句，看看它何时被调用。

一种解决方法可能是仅替换`[self presentViewController: secondPage animated:NO completion:NULL]`为`[secondPage viewDidAppear:NO]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T19:51:28.930

您的问题是内存分配/释放之一。您不会`secondPage`在任何地方保留，因此它将在`StartGame`方法逻辑完成后被释放。这种解除分配反过来也会解除分配`MainGameDisplay`的 ivars/属性，包括`MainGameDisplay.view`. 这一切都将在您开始与显示的视图交互之前发生，因此当您尝试更改值或与不再存在的视图交互时，您将因`EXC_BAD_ACCESS`错误而崩溃。

如果您真的想`MainGameDisplay.view`在视图控制器之外进行管理，则需要将 secondPage 保留在父类的 ivar 或成员变量中：

**父类.m：**

```
@interface ParentClass ()
{
    MainGameDisplay *_secondPage;
}

@end

...

- (IBAction)StartGame:(id)sender
{
    _secondPage = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];
    [self.view addSubview:_secondPage.view];

    ...

} 
```

但是，这通常不是推荐的设计模式。视图控制器有责任管理其视图，尤其是可能进行的布局更改、显示方式的动画等。您违反了`MainGameDisplay`. 您应该考虑在 MainGameDisplay 中执行您需要执行的任何视图管理。

我建议通读[iOS 的 View Controller Programming Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)。它将解释您正在尝试做的事情的基本原理，以及做这件事的最佳实践。

# pytest - py.test 可以支持多个 -k 选项吗？

> ID：13295627
> 
> 赞同：6
> 
> 时间：2012-11-08T18:43:20.420
> 
> 标签：pytest

py.test 可以支持多个 -k 选项吗？每个测试用例都属于一个特定的组，例如 _eventnotification 或 _interface 等。是否可以同时运行属于其中一个或两个的测试用例？即，同时运行名称中包含 _eventnotification 或 _interface 的测试用例。我尝试了以下方法，只执行了带有 _interface 的测试用例。如果不支持，还有其他方法吗？

py.test -k "_eventnotification" -k "_interface"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T11:46:46.837

坏消息：pytest-2.3.3 不支持它。

好消息：我将您的问题作为最终增强“-k”行为的机会，以便您可以使用“not”、“or”、“end”等，请参阅 [extended -k example][1]。它现在像“-m”一样工作，只是它匹配测试名称的（子字符串），而不是标记。您可以将此开发中的 pytest 版本与“pip install -i [http://pypi.testrun.org](http://pypi.testrun.org) -U pytest”一起使用。

# c++ - 共享对象和dll之间的区别

> ID：13295628
> 
> 赞同：5
> 
> 时间：2012-11-08T18:43:21.413
> 
> 标签：c++, c, dll, shared-libraries

我有一个库，它在编译时正在构建一个名为 libEXAMPLE.so（在 so.le 文件夹中）的共享对象，以及一个名为EXAMPLE.so 的dll（在dll 文件夹中）。这两个共享对象的大小非常相似，看起来完全一样。搜索互联网发现，程序使用 dll 进行符号解析的方式与使用共享对象的方式可能有所不同。

你们能帮我理解这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T18:52:49.463

“DLL”是windows喜欢命名它们的动态库的方式

“SO”是linux喜欢给他们的动态库命名的方式

两者都有相同的目的：动态加载。

Windows 使用 PE 二进制格式，Linux 使用 ELF。

体育： [http ://en.wikipedia.org/wiki/Portable_Executable](http://en.wikipedia.org/wiki/Portable_Executable)

精灵： [http ://en.wikipedia.org/wiki/Executable_and_Linkable_Format](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T08:09:10.163

我想是Linux操作系统。

在 Linux 中，静态库（.a，也称为档案）用于在编译时进行链接，而共享对象 (.so) 用于在加载时和运行时进行链接。

在您的情况下，似乎由于某种原因，库区分了加载时链接的文件（libEXAMPLE.so）和运行时链接（EXAMPLE.so），即使这两个文件完全相同。

# silverlight - 动态设置超出浏览器的高度和宽度

> ID：13295633
> 
> 赞同：0
> 
> 时间：2012-11-08T18:43:50.310
> 
> 标签：silverlight

我有一个 Silverlight 5 应用程序，我们用完了浏览器。我想知道是否有某种方法可以在代码中动态设置浏览器窗口外的高度和宽度。

每个人都有不同尺寸的显示器。我不希望拥有较大显示器的人被限制在最小尺寸显示器的屏幕上。

我会根据用户 ID 或如果可能的话检测显示器尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:47:51.080

这可能会有所帮助，

```
private void Application_Startup(object sender, StartupEventArgs e) { MyForm = new MyForm();

this.RootVisual = startupWindow;

this.MainWindow.Width = startupWindow.Width; this.MainWindow.Height = startupWindow.Height; } 
```

# php - 通过 PHP 脚本将值发送到 Google Analytics

> ID：13295634
> 
> 赞同：1
> 
> 时间：2012-11-08T18:43:53.447
> 
> 标签：php, google-analytics

我正在使用以下脚本将数据从表单发送到谷歌分析：

```
if ($result){
        $var_utmac = 'UA-0000000-0';
        $var_utmhn = 'my-site.com'; // domain
        $var_utmn = rand(1000000000,9999999999); // random number
        $var_cookie = rand(10000000,99999999); //random cookie number
        $var_random = rand(1000000000,2147483647); //number under 2147483647
        $var_today = time();
        $var_referer = $_SERVER['HTTP_REFERER']; //referer url
        if ($var_referer == '') { $var_referer = '-'; }
        $var_uservar='-'; // no user-defined
        $var_utmp= $_POST['REQUEST_URI'].'data_'.  htmlentities($_POST['dataone']).'_'.htmlentities($_POST['datatwo']); // folder called no_jstracker to segment nojavascript visitors
        $urchinUrl='http://www.google-analytics.com/__utm.gif?utmwv=3&utmn=' . $var_utmn . '&utme=&utmcs=-&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn=' . $var_utmhn . '&utmhid=' . $var_utmn . '&utmr=' . $var_referer . '&utmp=' . $var_utmp . '&utmac=' . $var_utmac . '&utmcc=__utma%3D' . $var_cookie . '.' . $var_random . '.' . $var_today . '.' . $var_today . '.' . $var_today . '.2%3B%2B__utmz%3D' . $var_cookie . '.' . $var_today . '.2.2.utmcsr%3D_SOURCE_%7Cutmccn%3D_CAMPAIGN_%7Cutmcmd%3D_MEDIUM_%7Cutmctr%3D_KEYWORD_%7Cutmcct%3D_CONTENT_%3B%2B__utmv%3D' . $var_cookie . '.' . $var_uservar . '%3B';
        echo ' <img src="' . $urchinUrl . '" border="0" />';
    } 
```

虽然数据被成功发送，但存在一个问题，那就是分析没有正确显示某些数据，即对于活动数据，它只是为关键字提供“ *CAMPAIGN ”，它显示“* *KEYWORD* ”。很清楚这在脚本中发生的位置，但不知道如何修复它。理想情况下，当然分析应该用自己的数据填充它。

任何建议这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:10:49.000

我认为这是因为您硬编码了“CAMPAIGN”值。而不是为广告系列分配价值。

```
$CAMPAIGN='facebook';
$KEYWORD='testing';
$urchinUrl='http://www.google-analytics.com/__utm.gif?utmwv=3&utmn=' . $var_utmn . '&utme=&utmcs=-&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn=' . $var_utmhn . '&utmhid=' . $var_utmn . '&utmr=' . $var_referer . '&utmp=' . $var_utmp . '&utmac=' . $var_utmac . '&utmcc=__utma%3D' . $var_cookie . '.' . $var_random . '.' . $var_today . '.' . $var_today . '.' . $var_today . '.2%3B%2B__utmz%3D' . $var_cookie . '.' . $var_today . '.2.2.utmcsr%3D_SOURCE_%7Cutmccn%3D'.$CAMPAIGN.'%7Cutmcmd%3D_MEDIUM_%7Cutmctr%3D'.$KEYWORD.'%7Cutmcct%3D_CONTENT_%3B%2B__utmv%3D' . $var_cookie . '.' . $var_uservar . '%3B'; 
```

有关[Google Analytics Cookie的更多详细信息](http://www.tutkiun.com/2011/04/a-google-analytics-cookie-explained.html)

# javascript - 代码的第二部分比第一部分更早工作

> ID：13295635
> 
> 赞同：0
> 
> 时间：2012-11-08T18:43:54.193
> 
> 标签：javascript

我有一个保存在对象中的标签列表。我希望它在标签列表为空时给出错误消息。尽管代码的检查部分是代码的结尾，但它以前可以工作。

```
 $("#Save").click(function(e){
    var size = 0;
    tagArray = new Array;
    for (key in tagObjectList )
    {
        tagArray.push(tagObjectList[key].toString());
        console.log(key);
        ++size;
        alert(size); //it's displayed after below alert. diplays  1,2,...,tag count
    }

    alert(size); // displays 0\. ???
    if (size == 0) {
        alert("There is no tag!");
        return false;
}
    $("#tagData").val('[' + tagArray.toString() + ']');
}); 
```

这里有什么问题？请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:50:51.600

您的代码看起来不错，因此请确保您没有多个具有相同`#Save`id 的元素，因为这会导致您的点击处理程序被执行两次，因此`alerts()`从两次执行中混合。

这可能是对您所看到的问题的解释。

# sql - 过滤掉子查询中返回的行

> ID：13295636
> 
> 赞同：2
> 
> 时间：2012-11-08T18:43:54.007
> 
> 标签：sql, subquery

我有一个存储汇总数据的临时表，并且想创建一个查询以查看是否可以稍微清理一下数据。我以为这很容易，但事实证明要困难得多。也许这很容易，而我只是错误地接近它。

我要做的只是删除 Item = 'TOTALS' 但名称只出现两次的行。因此，在下表中，应删除第 7 行和第 9 行。只是让你知道，没有钥匙。

姓名 。项目 ......Dlvrd
--------------------------
Bob 。102 .... 18
鲍勃。106 .... 32
鲍勃。108 .... 34
鲍勃。999 .... 184
鲍勃.. 总数。第702
章 64 ...... 86
约翰。总计。86
吉姆 .. 112 .... 131
吉姆 .. 总计 .. 131
简 . 10 .... 720
简。12 ........ 217
简.
第999章………… 867 总计 1848

我的第一次尝试包括添加一个包含 name 列计数的列，然后使用 where 子句，例如： where name != '2' 和 Item != 'TOTALS'。没有用，甚至在它们周围加上括号。它只是删除任何带有 2 或 Item = 'TOTALS' 的行。它完全忽略了“与”。这是我的sql：

```
select t.count, tr.*
From #TempRollup tr
join (
    select 
      Name
    , COUNT(Name) count
    from #TempRollup
    Group by Name
    ) as t on t.Name = tr.Name
where (
t.count != 2
and Item != 'TOTALS'
) 
```

然后我尝试了这种方法，该方法涉及创建一个子查询来查找我想忽略的行，然后不选择它们。我的子查询抓取了正确的行，但是当整个事情运行时，什么都没有返回。：

```
Select *
FROM #TempRollup
WHERE NOT EXISTS(  
    select tr.*
    From #TempRollup tr
    join (
            select 
              Name
            , COUNT(Name) count
            from #TempRollup
            Group by Name
            ) as t on t.Name = tr.Name
    where t.count = 2
    and Item = 'TOTALS'
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:48:15.493

试试这个：

```
SELECT t.*
FROM #TempRollup t
INNER JOIN
(
    SELECT Name, COUNT(*) cnt
    FROM #TempRollup
    GROUP BY Name
) counts ON t.Name = counts.Name
WHERE t.Item <> 'TOTALS' OR counts.cnt <> 2 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/2d907/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:04:45.247

这对我有用：

```
select * from #TempRollup t
where 2 <> (select count(Name) from #TempRollup where Name = t.Name)
and Item <> ' TOTALS'; 
```

# pdf-generation - 带有报告标题的 dompdf，然后是页眉和页脚

> ID：13295640
> 
> 赞同：1
> 
> 时间：2012-11-08T18:44:14.063
> 
> 标签：pdf-generation, dompdf

我正在尝试使用 dompdf 创建一个 pdf 报告。报告需要在第一页的顶部有公司徽标，并且在每一页上都有页眉和页脚。我[在](https://stackoverflow.com/questions/9130083/dompdf-div-tag-as-header-and-footer)[stackoverflow的](https://stackoverflow.com/questions/12776668/adding-header-and-footer-with-page-number-in-dompdf)[其他地方](https://stackoverflow.com/questions/7484318/header-in-pdf-page-using-dompdf-in-php) 找到了向 dompdf 文档添加页眉和页脚的解决方案。我遇到的问题是公司徽标需要在第一页的页眉上方，而不是在其他页面上显示

像这样的东西

```
Company Logo
 - header
 - content here
 - footer
 ------
 - header
 - content here 
 - footer 
```

有没有办法使用 dompdf 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:45:43.553

这是kludgey，但它的工作原理。您基本上可以通过使用固定定位创建普通标题和使用绝对定位创建特殊第 1 页标题来伪造不同的标题。如果您以正确的顺序进行设置，则第 1 页的标题将呈现在标准标题的顶部，从而使其模糊。

```
<html>
  <head>
    <style>
      @page {
        margin: 0px;
      }
      @page :first {
        margin-top: 100px;
      }
      body {
        margin: 100px 20px 50px 20px;
      }
      #headerA {
        position: fixed;
        left: 0px; right: 0px; top: 0px;
        text-align: center;
        background-color: orange;
        height: 90px;
      }
      #headerB {
        position: absolute;
        left: -20px; right: -20px; top: -200px;
        text-align: center;
        background-color: orange;
        height: 190px;
      }
      #footer {
        position: fixed;
        left: 0px; right: 0px; bottom: 0px;
        text-align: center;
        background-color: orange;
        height: 40px;
      }
    </style>
  </head>
  <body>
    <div id="headerA">
      <h1>Widgets Express</h1>
    </div>
    <div id="headerB">
      <img class="logo" src="http://eclecticgeek.com/images/macro/ants.jpg" height="100" width="500">
      <h1>Widgets Express</h1>
    </div>

    <div id="footer">
      <p>Copyright, all rights reserved, yadda yadda</p>
    </div>

    <div id="content">
      ...
    </div>
  </body>
</html> 
```

# php - 如何在php中解码以[{开头的json

> ID：13295643
> 
> 赞同：0
> 
> 时间：2012-11-08T18:44:25.617
> 
> 标签：php, json

所以我一直在寻找一段时间，但我没有发现任何有用的东西。我有兴趣解码这样的 json 代码：

```
[
{"server":"1","available":true},
{"server":"2","available":false},
{"server":"3","available":true},
{"server":"4","available":true}
] 
```

我想在 php 中使用 json_decode 对其进行解码。我怎样才能做到这一点？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:48:32.030

作为对象数组：

```
$data = json_decode($rawData); 
```

作为 assoc 数组的数组：

```
$data = json_decode($rawData, true); 
```

[http://php.net/json_decode](http://php.net/json_decode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:04:13.563

使用 php 本机函数`json_decode`，您将获得与 json 结构匹配的结构。

像这样使用函数：

```
$myobject = json_decode('[
                            {"server":"1","available":true},
                            {"server":"2","available":false},
                            {"server":"3","available":true},
                            {"server":"4","available":true}
                         ]'); 
```

使用此代码，您将在 $myobject 中拥有以下结构：

```
array(4) {
  [0] =>
  array(2) {
    'server' => string(1) "1"
    'available' => bool(true)
  }
  [1] =>
  array(2) {
    'server' => string(1) "2"
    'available' => bool(false)
  }
  [2] =>
  array(2) {
    'server' => string(1) "3"
    'available' => bool(true)
  }
  [3] =>
  array(2) {
    'server' => string(1) "4"
    'available' => bool(true)
  }
} 
```

# hadoop - Hadoop dfs 错误：INFO ipc.Client：重试连接到服务器：localhost

> ID：13295646
> 
> 赞同：7
> 
> 时间：2012-11-08T18:44:41.930
> 
> 标签：hadoop, localhost, cluster-computing

我已经成功设置了一个有 6 个节点的 Hadoop 集群（master、salve<1-5>）

*   格式化namenode -> 完成
*   启动和关闭集群 -> 工作正常
*   执行“hadoop dfs -ls /”会出现此错误 ->**错误：INFO ipc.Client: Retrying connect to server: localhost**

我试图查看正在运行的服务：

```
sudo netstat -plten | grep java
hduser@ubuntu:~$ sudo netstat -plten | grep java 
```

tcp 0 0 0.0.0.0:50070 0.0.0.0:* LISTEN 1000 93307 11384/java
tcp 0 0 0.0.0.0:44440 0.0.0.0:* LISTEN 1000 92491 11571/java
tcp 0 0 0.0.0.0:406.3\. * LISTEN 1000 92909 11758/java
tcp 0 0 0.0.0.0:50010 0.0.0.0:* LISTEN 1000 93449 11571/java
tcp 0 0 0.0.0.0:50075 0.0.0.0:* LISTEN 1000 93673 10t0.1.0.cp
10t0.7 0.0:50020 0.0.0.0:* 听 1000 93692 11571/java
tcp 0 0 127.0.0.1:40485 0.0.0.0:* LISTEN 1000 93666 12039/java
tcp 0 0 0.0.0.0:44582 0.0.0.0:* LISTEN 1000 93013 11852/java
tcp 0 0 **145.42.43.0.0** :4310.42.0.0.0 : * 听 1000 92471 11384/java
tcp 0 0 **10.42.43.1:54311** 0.0.0.0:* 听 1000 93290 11852/java
tcp 0 0 0.0.0.0:50090 0.0.0.0:* 听1000 93460 7
tcp 70011 0.0:34154 0.0.0.0:* 听 1000 92179 11384/java
tcp 0 0 0.0.0.0:50060 0.0.0.0:* LISTEN 1000 94200 12039/java
tcp 0 0 0.0.0.0:50030 0.0.0.0:* LISTEN 1000 93550 11852/java

它的主 IP 绑定到端口 54310 和 54311，而不是本地主机（环回）。

conf-site.xml 已正确配置：

```
<configuration>
<property>
<name>hadoop.tmp.dir</name>
<value>/home/hduser/hadoop/tmp</value>
</property>
<property>
<name>fs.default.name</name>
<value>hdfs://master:54310</value>
</property>
</configuration> 
```

为什么期望 localhost 绑定到 54310 而不是我在此处配置的 master hich。帮助表示赞赏。我该如何解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:17:05.963

显然，在我添加新的 hadoop(1.0.4) bin 目录之前，有人将旧的 hadoop(1.0.3) bin 目录添加到了路径变量中。因此，每当我从 CLI 运行“hadoop”时，它都会执行旧 hadoop 的二进制文件，而不是新的。

解决方案：

*   删除旧 hadoop 的整个 bin 路径

*   关闭集群 - 退出终端

*   登录新的终端会话

*   启动节点

*   试过`hadoop dfs -ls /`-> 工作正常！！！！很好的教训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T18:38:13.880

看来很多人都遇到过这个问题。

可能不需要更改 /etc/hosts，并确保您可以相互访问主从，并且您的 core-site.xml 指向正确的主节点和端口号是相同的。

然后仅在主节点上运行 $HADOOP/bin/stop-all.sh、$HADOOP/bin/start-all.sh。（如果在 slave 上运行可能会导致问题）。使用JPS检查是否所有服务如下。

在主节点上：4353 DataNode 4640 JobTracker 4498 SecondaryNameNode 4788 TaskTracker 4989 Jps 4216 NameNode

从节点上：3143 Jps 2827 DataNode 2960 TaskTracker

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T17:33:10.950

另外，检查namenode和datanode之间的防火墙规则

# django - 多数据库 Django

> ID：13295649
> 
> 赞同：1
> 
> 时间：2012-11-08T18:44:55.067
> 
> 标签：django

我需要将我的应用程序连接到多个数据库，但我没有任何成功。

在 settings.py 中定义了我的数据库后，我需要做什么？我不知道我是否做对了，但我创建了一个 routers.py 并添加了以下代码：

```
class DBRouter(object):
     """A router to control all database operations on models in
     the contrib.auth application"""

     def db_for_read(self, model, **hints):
         if hasattr(model,'teste'):
            return model.connection_name
         return None

     def db_for_write(self, model, **hints):
        if hasattr(model,'teste'):
            return model.connection_name
        return None

     def allow_syncdb(self, db, model):
        if hasattr(model,'teste'):
            return model.connection_name == db
        return db == 'default' 
```

我必须做一个syncdb吗？我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:58:17.030

你配置`DATABASE_ROUTERS`设置了吗？

确保您还仔细阅读了此处的文档：[https](https://docs.djangoproject.com/en/dev/topics/db/multi-db/) ://docs.djangoproject.com/en/dev/topics/db/multi-db/ ，尤其是描述来自使用多个数据库的潜在缺点/限制的部分（例如. 你将*无法*进行跨数据库连接）

# email - Multistore magento 电子邮件徽标未从正确的主题文件夹中显示

> ID：13295655
> 
> 赞同：5
> 
> 时间：2012-11-08T18:45:28.680
> 
> 标签：email, magento, graphical-logo

我一直在研究 magento 的多商店设置（大约 20 个商店视图），并且运行良好。现在网站上线了，我注意到我的电子邮件没有为每家商店提供正确的徽标。有没有人遇到同样的问题？我该如何解决？

即，来自商店 A（带有 Theme-A）`skin/frontend/THEME-A/default/images/logo_email.gif`的电子邮件将获得来自 的徽标，而来自商店 B（带有 Theme-B）的电子邮件将使用`skin/frontend/base/default/images/logo_email.gif`.

所以有些商店可以正常工作，但有些不能。我检查了我的文件夹，并且 logo_email 正确且存在。Magento 缓存目前处于关闭状态。我一直在发送多个电子邮件地址。

电子邮件的代码是：

```
 <td valign="top"><a href="{{store url=""}}"><img src="{{skin url="images/logo_email.gif" _area='frontend'}}" alt="{{var store.getFrontendName()}}"  style="margin-bottom:10px;" border="0"/></a></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:29:31.020

当您将电子邮件徽标设置为 images/logo_email.gif 时，它将按如下方式使用它：

1.  徽标是否存在于商店的主题文件夹中？如果是，它将被使用。
2.  如果没有，它将在默认文件夹中查找徽标
3.  最后，如果默认文件夹中不存在徽标（例如默认/默认），它将回退到基本/默认文件夹。

所以我建议你在 skin/frontend/default/default/images 中放入一个默认使用的 logo_email.gif。此外，如果您想为某些主题使用不同的徽标，只需确保您的主题的图像文件夹（即 skin/frontend/default/{MYTHEME}/images）包含一个 logo_email.gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T11:46:36.763

在我的情况下，有助于加倍“并清除缓存

{{skin url="images/logo_email.gif" _area="frontend" _package="swpackage" _theme="base"}}

# javascript - raphaelJS 2.1 沿路径动画

> ID：13295656
> 
> 赞同：1
> 
> 时间：2012-11-08T18:45:44.343
> 
> 标签：javascript, animation, path, raphael, vector-graphics

我想沿着弯曲的路径为路径（实际上是一组路径，但我会谈到）设置动画。

RaphaelJS 2 删除了该`animateAlong`方法，原因我无法辨别。深入研究由[Zevan](http://zreference.com/raphael-animation-along-a-path/)抽象的 Raphael 文档的[gears 演示](http://raphaeljs.com/gear.html)，我已经做到了这一点：

```
//adding a custom attribute to Raphael
(function() {
  Raphael.fn.addGuides = function() {
    this.ca.guide = function(g) {
      return {
        guide: g
      };
    };
    this.ca.along = function(percent) {
      var g = this.attr("guide");
      var len = g.getTotalLength();
      var point = g.getPointAtLength(percent * len);
      var t = {
        transform: "t" + [point.x, point.y]
      };
      return t;
    };
  };
})();

var paper = Raphael("container", 600, 600);

paper.addGuides();

// the paths
var circ1 = paper.circle(50, 150, 40);
var circ2 = paper.circle(150, 150, 40);
var circ3 = paper.circle(250, 150, 40);
var circ4 = paper.circle(350, 150, 40);

var arc1 = paper.path("M179,204c22.667-7,37,5,38,9").attr({'stroke-width': '2', 'stroke': 'red'});

// the animation

// works but not at the right place
circ3.attr({guide : arc1, along : 1})
         .animate({along : 0}, 2000, "linear"); 
```

[http://jsfiddle.net/hKKLG/4/](http://jsfiddle.net/hKGLG/4/)

我希望第三个圆圈沿红色路径设置动画。*它现在正在制作动画*，但距离红色路径的距离等于第三个圆圈的原始坐标。奇怪的是，无论对象中的变换是相对的（小写的“t”）还是绝对的（大写的“T”），都会发生这种`translate`情况`along`。它也总是在同一个位置进行动画处理，即使我在`animate`调用之前用变换平移来轻推它。

非常感谢任何帮助。我刚在矢量陆地下船。指针很有帮助——一个工作小提琴更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T21:59:59.357

您只是一跳、跳过和跳离您想要的功能。这里的混淆涉及转换和对象属性之间的交互 ​​- 具体来说，转换不会修改原始对象属性。翻译只是添加而不是替换圆圈的原始坐标。

解决方案非常简单。在你的方法中：

```
this.ca.along = function(percent) {
  var box = this.getBBox( false );  // determine the fundamental location of the object before transformation occurs
  var g = this.attr("guide");
  var len = g.getTotalLength();
  var point = g.getPointAtLength(percent * len);
  var t = {
    transform: "...T" + [point.x - ( box.x + ( box.width / 2 ) ), point.y - ( box.y + ( box.height / 2 ) )]  // subtract the center coordinates of the object from the translation offset at this point in the guide.
  };
  return t; 
```

显然，这里有一些优化空间（即，在 0,0 创建所有圆，然后将它们转换为所需的显示坐标，避免大量迭代数学可能是有意义的）。但它的功能...... [见这里](http://jsfiddle.net/kevindivdbyzero/N8VEk/)。

One other caveat: the ...T translation won't effect any other transforms that have already been applied to a given circle. This implementation is *not* guaranteed to play nicely with other transforms.

# c - 如何从重复中获得布尔值

> ID：13295658
> 
> 赞同：-2
> 
> 时间：2012-11-08T18:45:58.850
> 
> 标签：c

我使用重复进行了这个二进制搜索，但是，当我得到答案（布尔值）时，我似乎在重复的过程中跌跌撞撞，无法从函数中得到正确的答案。有人可以帮忙吗？请评论代码。

```
// binary search
bool 
search(int value, int array[], int n)
{

    // the array has more than 1 item
    if (n > 1)
    {
        int m = (n/2);

        // compares the middle point to the value
        if (value == array [m])
            return true;

        // if the value given is lower than the middle point of the array
        if (value < array [m])
        {
            int *new_array = malloc (m * sizeof(int));

            // creating a new array with the lower half of the original one
            memcpy(new_array, array, m * sizeof(int));

            // recalling the function
            search (value, new_array, m);
        }

        // if the value given is greater than the middle point of the array
        else
        {
            int *new_array = malloc (m * sizeof(int));

            // creating a new array with the upper half of the original one
            memcpy(new_array, array + (m + 1), (m  * sizeof(int)));

            // recalling the function
            search (value, new_array, m);
        }
    }

    else if (n==1)
    {

        // comparing the one item array with the value
        if (array[0] == value)
            return true;

        else
            return false;

    }

    if (true)
        return true;

    else 
        return false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:02:07.983

正如 amint 所提到的，复制数组完全违背了进行二进制搜索的目的。其次，我相信您的意思是递归，而不是重复。

需要考虑的事情：与其复制数组，不如考虑如何通过将一组索引传递给数组（如开头和结尾）来获得相同的结果。

至于您的实际问题，如何通过递归返回布尔值。从递归函数返回值的问题是每次迭代都必须传递值。你可以把它想象成一个责任链委托。第一个电话就像公司的负责人。他没有做所有的工作，所以他把它委托给他的助手，但他先做一件工作。然后助手有助手等。一路乌龟；）

但是，为了取回价值，链中的每个人都必须将其还给他们之前的人。回到编程，这意味着每次递归调用搜索时，都需要返回该值。

最后，一旦你有了这些东西，你就需要更好地定义你的基本案例。我假设这就是你想要做的事情 if (true) return true; 否则返回假；但是，正如 H2CO3 所指出的，这没有多大意义。事实上，你之前的 if 语句`if (n == 1) ...`应该确保之后的代码永远不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:52:12.057

您应该`return search(...);`，而不仅仅是调用该`search()`方法 - 否则返回值不会冒泡。

此外，请注意，此算法是`O(n)`（与数组大小成线性关系）并且会泄漏内存并且效率非常低，因为您在每次迭代中复制了一半的数组。
实际上，它可能使算法比简单的线性搜索元素慢得多。

一个好的二分搜索不需要复制数组的一半——它只是“看”它的一半。可以通过`array+m`作为数组发送（对于上半部分）来实现，对于下半部分，只有递减`n`就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:51:55.270

您需要返回递归搜索的值。

```
return search (value, new_array, m); 
```

否则，当您调用搜索时，您只是丢掉了答案

# ruby - 为什么我的救援块不起作用？

> ID：13295659
> 
> 赞同：1
> 
> 时间：2012-11-08T18:46:03.847
> 
> 标签：ruby, selenium-webdriver, rescue, pageobjects

我正在使用 selenium webdriver 并尝试让页面对象在报告测试失败之前多次查看页面。我的问题是我遇到了一个错误，我的开始救援块没有捕获到该错误。
这是错误

Selenium::WebDriver::Error::NoSuchElementError: 无法定位元素：{"method":"id","selector":"does not exist"}

```
class ManageMembers < Nav

  def initialize
    super
    ready = false # Used to indicate if all elements expected are present 
    tryCount = 0# A counter to track the number of attempts to 
    while(ready == false)
      puts "initalizing managemembers"
      #things on the side menue 
      begin
        $driver.find_element(:id, "does not exist")
        $driver.find_element(:id, "sidebar")
        $driver.find_element(:id, "sidebar").find_element(:link, "Manage Members")
        $driver.find_element(:id, "sidebar").find_element(:link, "Create Member")
        @sidebar = true
      rescue @sidebar = false
      end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:57:34.077

将此添加为答案，以便我们可以将此问题标记为已回答。

```
class ManageMembers < Nav
  def initialize
    super
    ready = false # Used to indicate if all elements expected are present 
    tryCount = 0# A counter to track the number of attempts to 
    while(ready == false)
      puts "initalizing managemembers"
      #things on the side menue 
      begin
        $driver.find_element(:id, "does not exist")
        $driver.find_element(:id, "sidebar")
        $driver.find_element(:id, "sidebar").find_element(:link, "Manage Members")
        $driver.find_element(:id, "sidebar").find_element(:link, "Create Member")
        @sidebar = true
      rescue Exception => e 
        @sidebar = false
      end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:10:33.043

当您使用块语法 ( `begin ... rescue ... end`) 而不是内联语法 ( `do_something rescue recover_from_something`) 时，您需要将救援语句放在下一行。现在你正在混合两种语法风格。

```
begin
  $driver.find_element(:id, "does not exist")
  $driver.find_element(:id, "sidebar")
  $driver.find_element(:id, "sidebar").find_element(:link, "Manage Members")
  $driver.find_element(:id, "sidebar").find_element(:link, "Create Member")
  @sidebar = true
rescue
  @sidebar = false
end 
```

`begin ... end`如果您完全拯救一个块（使其成为一个完整的语句），这并不适用，但这看起来**很糟糕**，我建议使用完整的块语法：

```
begin
  $driver.find_element(:id, "does not exist")
  $driver.find_element(:id, "sidebar")
  $driver.find_element(:id, "sidebar").find_element(:link, "Manage Members")
  $driver.find_element(:id, "sidebar").find_element(:link, "Create Member")
  @sidebar = true
end rescue @sidebar = false 
```

再一次，不要做这最后一点；）

# ajax - 如果有另一个 Ajax 请求，如何停止一个 Ajax 请求

> ID：13295661
> 
> 赞同：0
> 
> 时间：2012-11-08T18:46:04.517
> 
> 标签：ajax, xmlhttprequest

我的整个网站几乎都是基于 Ajax。

第 1 页 = 在我的第 1 页中，有 5 个 div 当第一个 div 呈现时，我在响应之后将 Ajax 请求放在第二个 div 上，我将 Ajax 请求放在第三个上，其他 div 也一样。我还有其他通过 Ajax 提供的页面。假设用户单击第 1 页，并且在第一次单击用户单击第 2 页之后，现在**我要做的是我想停止第 1 页上的所有 ajax 请求并处理第 2 页，如果用户在页面后单击第 2 页1** .

# perl - Find::File 搜索文件列表的目录

> ID：13295665
> 
> 赞同：1
> 
> 时间：2012-11-08T18:46:21.753
> 
> 标签：perl

我正在编写一个 Perl 脚本，而且我是 Perl 的新手——我有一个包含文件列表的文件。对于列表中的每个项目，我想搜索给定目录及其子目录以查找文件返回完整路径。到目前为止，我一直没有成功尝试使用 File::Find。这是我得到的：

```
use strict;
use warnings;
use File::Find;

my $directory = '/home/directory/';
my $input_file = '/home/directory/file_list'; 
my @file_list;

find(\&wanted, $directory);

sub wanted {
    open (FILE, $input_file);

    foreach my $file (<FILE>) {
        chomp($file);

        push ( @file_list, $file );
    }   

    close (FILE);

    return @file_list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:11:15.980

我发现 File::Find::Rule 使用起来更容易、更优雅。

```
use File::Find::Rule;

my $path = '/some/path';
# Find all directories under $path
my @paths = File::Find::Rule->directory->in( $path );
# Find all files in $path
my @files = File::Find::Rule->file->in( $path ); 
```

数组包含 File::Find::Rule 找到的对象的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:54:06.873

File::Find 用于遍历文件系统中的目录结构。而不是做你想做的事，即在文件中读取想要的子例程，你应该按如下方式读取文件：

```
use strict;
use warnings;
use vars qw/@file_list/;

my $directory = '/home/directory/';
my $input_file = '/home/directory/file_list'; 
open FILE, "$input_file" or die "$!\n";
foreach my $file (<FILE>) {
    chomp($file);

    push ( @file_list, $file );
} 
# do what you need to here with the @file_list array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:52:14.263

好的，重新阅读文档，我误解了`wanted`子程序。这`wanted`是一个对找到的每个文件和目录调用的子例程。所以这是我的代码来考虑这一点

```
use strict;
use warnings;
use File::Find;

my $directory = '/home/directory/';
my $input_file = '/home/directory/file_list';
my @file_list;

open (FILE, $input_file);

foreach my $file (<FILE>) {
    chomp($file);

    push ( @file_list, $file );
}   

close (FILE);

find(\&wanted, $directory);

sub wanted {
    if ( $_ ~~ @file_list ) { 
        print "$File::Find::name\n";
    }   
    return;
} 
```

# c# - DirectShow 库 - 如何使用 directshow 库捕获图像而不在 PictureBox 或 Panel 上显示网络摄像头实时图像

> ID：13295667
> 
> 赞同：2
> 
> 时间：2012-11-08T18:46:28.430
> 
> 标签：c#, wpf, winforms, directshow, directshow.net

我正在使用使用 DirectShow 库的 WPF 应用程序，它可以很好地抓取图像或记录实时提要，但我希望最终用户不应该看到任何网络摄像头正在拍摄他们的照片，即我想要图片框或用户不应该看到正在渲染来自网络摄像头的提要的面板，我应该能够捕获图像或记录实时提要。

请为我提供任何链接或建议，因为我是 DirectShow 库的初学者。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T00:29:22.923

DirectShow 不需要任何视觉组件来抓取快照或视频。它只是现场显示视频并从视频演示者那里获取快照的流行方法之一。

继续阅读使用 Sample Grabber 捕获帧，`DxSnap`DirectShow.NET 中的示例将向您展示如何操作。

> 使用 DirectShow 从捕获设备的 Still 引脚拍摄快照。请注意，MS 鼓励您为此使用 WIA，但如果您想使用 DirectShow 和 C#，请参考以下方法。
> 
> 请注意，此示例仅适用于将未压缩视频输出为 RBG24 的设备。这将包括大多数网络摄像头，但可能是零电视调谐器。

另请参阅：[从网络摄像头预览中捕获图像的最佳 DirectShow 方式？SampleGrabber 已弃用](https://stackoverflow.com/questions/11398758/best-directshow-way-to-capture-image-from-web-cam-preview-samplegrabber-is-dep)

# windows - 关闭 Windows 2000/3 Server

> ID：13295669
> 
> 赞同：2
> 
> 时间：2012-11-08T18:46:34.967
> 
> 标签：windows, registry, shutdown

我们有一个 C# VS2010 应用程序在 Windows 2000 Server 机器（还有一个 Windows 2003 Server 机器）上运行，几乎是唯一运行的应用程序。

我们从盒子中移除电源。有一个持续时间很短的电池（可能需要 3 分钟的电量），然后等待 10 秒，然后确定事情正在下降并通知 Windows 它需要关闭。

Windows 向应用程序发送一个 CTRL_SHUTDOWN_EVENT 事件，并尝试阻止 Windows 关闭一段时间以让另一台与之通信的计算机在第一台计算机上执行一些文件工作。它通过一个定时循环来做到这一点，在循环结束后，它会优雅地退出并关闭计算机。

不错的计划，但它不起作用。该应用程序可能达到 20 秒，并且该应用程序被 Windows 强行杀死，Windows 关闭。在 90 秒时，运行电池的硬件固件会关闭计算机的电源。

我试图找出如何推迟 Windows 一段时间。我尝试创建（它不存在）HKEY_LOCAL_MACHINE 子树：\SYSTEM\CurrentControlSet\Control\WaitToKillAppTimeout 注册表项为 60000，但尽管它似乎阻止了弹出窗口的发生，但 Windows 本身在大约相同的时间死亡——我们在没有机会优雅地关闭自己的情况下思考。也许注册表项有效但还不够。

基本上，我有一个“不礼貌”的应用程序，它拒绝关闭（出于最好的原因）并且没有注册表项，Windows 最终还是将其关闭，然后自行关闭。

随着注册表的更改，我们认为正在发生的事情是 Windows 没有关闭应用程序，但 Windows 本身在没有关闭的情况下突然被杀死，但电源仍然没有拉动大约一分钟，然后电源被拉动。

所以也许我们在这里有层次。首先是应用程序尝试保持打开状态的时间。然后是 Windows 准备允许它保持打开多长时间。然后是......一些东西......它杀死了窗户。然后是功率损耗。

任何人都知道我们如何让窗户保持打开状态并运行到 70 秒而不是大约 20 秒？我们的注册表项是否正确，但还不够？我们是否需要设置一些额外的键来确定 Windows 在收到关闭通知后多长时间才会自行杀死？

提前致谢。

# html - 用 ZigFu 和 Three.Js 追踪手指的可能性？

> ID：13295675
> 
> 赞同：2
> 
> 时间：2012-11-08T18:46:58.227
> 
> 标签：html, three.js, kinect

我目前正在使用 Kinect for Windows 和`zigfu.js/three.js`库来尝试在浏览器中跟踪手。

理想情况下，我想在手指上创建点以找出它们的位置。我环顾四周，似乎找不到任何暗示这是否肯定有效。

我希望这里有人可以指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:38:17.120

简短的回答：Kinect SDK 中没有工具可以告诉您手指的位置。

长答案：SDK 是为进行全身追踪而设置的，在全身追踪效果最好的范围内，相机的分辨率非常低，以至于追踪单个手指确实非常困难。太多的噪音，太少的信号等等。你可以通过自己查看原始深度数据来看到这一点。

没有什么特别的原因不能近距离追踪手指，只是还没有人做过（至少没有公开可用的 SDK 形式！）

# python - pexpect.spawn.interact 返回输入/输出错误

> ID：13295690
> 
> 赞同：1
> 
> 时间：2012-11-08T18:47:42.500
> 
> 标签：python, pexpect

我使用 python 脚本为我编译和运行学生 fortran 代码。只要他们遵循我给他们的输入约定，这就会很好地工作。以下是对我有用的示例：

```
child = pexpect.spawn(os.path.join(os.path.dirname(file),name))
child.expect('')
child.sendline(input)
child.expect(pexpect.EOF)
self.r_output.append(child.before)
child.close() 
```

当他们不遵循我的输入约定时，expect 命令不起作用。出于这个原因，我使用`child.interact()`. 但是每当文件最终终止时，我都会得到：

```
Traceback (most recent call last):
  File "./project.py", line 263, in <module>
    main()
  File "./project.py", line 45, in main
    stud.tohtml(f)
  File "./project.py", line 173, in tohtml
    self.run("<br/>")
  File "./project.py", line 140, in run
    child.interact(chr(27))
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1492, in interact
    self.__interact_copy(escape_character, input_filter, output_filter)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1520, in __interact_copy
    data = self.__interact_read(self.child_fd)
  File "/usr/lib/python2.7/dist-packages/pexpect.py", line 1510, in __interact_read
    return os.read(fd, 1000)
OSError: [Errno 5] Input/output error 
```

如果我足够快地在它结束之前按 ascii 29，一切都会很好。有什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:44:43.490

这可能意味着孩子退出了。您可以将呼叫包装在 try/except 中并检查 `child.isalive()`以确保。

# java - 使用 Spring XML 配置实现观察者模式？

> ID：13295692
> 
> 赞同：2
> 
> 时间：2012-11-08T18:47:49.830
> 
> 标签：java, spring, configuration, event-handling, observer-pattern

假设 bean`A`是事件发布者（可观察）和 bean `B1`，`B2`并且`B3`是事件侦听器（观察者）。

所有 B 都实现了一些`BEvenListener`接口。

如何编写可观察接口`A`？我希望编写类似于通常 Java 的`addEventListener(BEventListener listener)`.

如何`A`在 Spring config 中设置所有 B 监听？通常的“二传手”只允许一次注射，对吧？那么，如何在 Spring 中配置“adder”呢？

Spring 提供`ApplicationListener`并`ApplicationEventPublisherAware`允许编写侦听事件的 bean，并发布到上下文中。但这种机制无需配置即可工作，即 XML 文件没有说明哪个 bean 听哪个。只有类型很重要，所有被编码为监听某个事件的 bean 都会在上下文中监听它。即事件是上下文范围的。

是否可以在发布者和侦听器之间使用 XML 配置定向事件“通道”？

**更新**

我得到的唯一想法是注入 observable 来过滤事件。

所以，课程将是

```
public class Observable implements ApplicationEventPublisherAware {

public static class Event extends ApplicationEvent {

    public Event(Object source) {
        super(source);
    }

}

private ApplicationEventPublisher applicationEventPublisher;

@Override
public void setApplicationEventPublisher(ApplicationEventPublisher value) {
    this.applicationEventPublisher = value;
}

public void somecode() {
    applicationEventPublisher.publishEvent(new Event(this));
}

} 
```

和

```
public class Observer implements ApplicationListener<Observable.Event> {

private Observable observable;

public void setObservable(Observable value) {
    this.observable = value;
}

@Override
public void onApplicationEvent(Event event) {
    if( event.getSource() == observable ) {
        // process event
    }
}

} 
```

配置将是

```
<bean id="observable" class="tests.observer.Observable"/>

<bean id="observer" class="tests.observer.Observer">
    <property name="observable" ref="observable"/>
</bean> 
```

这将允许显式设置发布者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T17:19:24.817

这是我希望 Spring 将其添加到他们的 XML 配置中的内容，但就目前而言，`MethodInvokingFactoryBean`如果您想避免将代码绑定到 Spring，则必须使用。

出于本示例的目的，假设您的`tests.observer.Observable`类中添加了以下方法

`void addObserver(Observer observer);`

```
<bean id="observable" class="tests.observer.Observable"/>

<bean id="observer" class="tests.observer.Observer">
    <property name="observable" ref="observable"/>
</bean>

<bean id="addObserver" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="observable" />
    <property name="targetMethod" value="addObserver"/>
    <property name="arguments">
       <list>
          <ref bean="observer" />
       </list>
    </property>
</bean> 
```

# wpf - 按钮的统一输入

> ID：13295694
> 
> 赞同：1
> 
> 时间：2012-11-08T18:47:54.870
> 
> 标签：wpf, input

我是 WPF 的新手，我只是想在按下按钮时运行一些代码（使用任何类型的输入设备）。

然而，当我查看 Button 事件时，我看到了很多匹配的事件：

*   鼠标按下
*   按键
*   触控笔向下
*   接地
*   预览鼠标按下
*   PreviewKeyDown
*   预览StylusDown
*   PreviewTouchDown

我认为 Click 不适合我，因为我需要知道按钮何时释放。那么，我是否必须为每个事件编写一个事件处理程序，或者是否有一种简单的方法来包含所有输入类型？

此外，“预览”事件和常规事件有什么区别（在 MSDN 上找不到）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:04:15.910

我希望您确实想要 Click 事件。

请注意，WPF 按钮有一个 ClickMode 属性，用于控制何时引发 Click 事件。

[ButtonBase.ClickMode 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.clickmode.aspx)

ClickMode 属性的默认值是 Release`Specifies that the Click event should be raised when a button is pressed and released.`

[ClickMode 枚举](http://msdn.microsoft.com/en-us/library/system.windows.controls.clickmode.aspx)

就像 Rachel 所说，预览事件发生在实际事件发生之前。

Click 事件将不起作用，因为您希望在按下和释放按钮时都发生事件。您也许可以绑定到[IsPressed](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.ispressed.aspx)属性。

```
<Style x:Key="Triggers" TargetType="Button">
  <Style.Triggers>
    <Trigger Property="IsPressed" Value="true">
      <Setter Property = "Foreground" Value="Green"/>
    </Trigger>
  </Style.Triggers>
</Style> 
```

如果您需要引发事件，您可以在触发器中使用[EventSetter](http://msdn.microsoft.com/en-us/library/system.windows.eventsetter.aspx)而不是 Setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:14:47.583

您可以对所有事件使用一个事件处理程序，这有帮助吗？

```
 <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="86,84,0,0" Name="button1" VerticalAlignment="Top" Width="75" 
                        MouseDown="button1_generalInput"
                        KeyDown="button1_generalInput"
                        StylusDown="button1_generalInput"
                        TouchDown="button1_generalInput"/>

private void button1_generalInput(object sender, EventArgs e)
        {

        } 
```

# css - 对齐 DIV 元素的尝试失败

> ID：13295696
> 
> 赞同：0
> 
> 时间：2012-11-08T18:48:02.550
> 
> 标签：css, html, alignment

我试图以`<div>`这样的方式对齐 3 个元素，使两个元素彼此相邻，第三个元素在它们下方，从一个延伸到另一个。[这](http://jsfiddle.net/yotamoo/cr8s8/)是我的小提琴给你看。这也是我的CSS：

```
<style type="text/css">
body {
    background-image: url(https://www.dropbox.com/s/ri903jtb93a5168/background.jpg);
    background-attachment:fixed;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    background-repeat:no-repeat;
    background-position:center;
    padding-right: 20%;
    padding-left: 20%;
    padding-top: 19%;
}
#left {
    float: left;
    width: 25%;
    text-align: center;
}
#right {
    float: right;
    width: 25%;
    text-align: center;
}

#bottom {
    position:relative
}

.lists {
    background: transparent;
    width: 268px;
    padding: 5px;
    font-size: 16px;
    border: none;
    height: 34px;
    -webkit-appearance: none;
}
</style>​ 
```

有任何想法吗？我是新手，正在尝试掌握 css。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:25:04.273

我有点改变了你的代码，我在左右 div 之后添加了 clear:float。

请看[演示](http://jsbin.com/ubatof/1/edit)，如果那是你想要的，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:54:21.077

请更正

```
#right {
    /*  omit float: right  
    float: right; */
    width: 25%;
    text-align: center;
}

#bottom {
   /* omit position: relative  
   position:relative */
} 
```

用上面的代码替换你的代码，让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:53:12.593

将样式添加 `clear: both;`到 id 为“底部”的 div

# r - 重塑/融化散点图的数据框

> ID：13295697
> 
> 赞同：1
> 
> 时间：2012-11-08T18:48:09.160
> 
> 标签：r, ggplot2, reshape2

我有一个如下所示的数据文件：

```
x   ys --------------------->
1   20   25   30   12   22   12
2   12    9   12   32   12 
3   33   12   11    6    1
4    5   10   41   12    3
5    7   81   12   31    8   3   4   11 
```

我想制作一个带有一个 x 值和多个 y 值（ys）的散点图。我试图将 reshape 与熔化一起使用，但我无法创建正确的数据结构来制作此图。如何在 R 中执行此操作并使用 ggplot 绘图？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:59:57.823

那么什么不起作用`melt`呢？你有什么问题`geom_point()`？很难说这是否是您想要的：

```
library( "reshape2" )
library( "ggplot2" )

df <- data.frame( x = rnorm(20), ya = rnorm(20), yb = rnorm(20), yc = rnorm(20) )
df <- melt(df, id.vars="x", variable.name="class", value.name="y")

ggplot( df, aes( x = x, y = y) ) +
  geom_point( aes(colour = class) )

ggplot( df, aes( x = x, y = y) ) +
  geom_point() +
  facet_wrap( "class" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:21:51.410

您可以使用该`matplot`功能。

假设您的数据在一个名为的对象`myDat`中，并且`x`值在列中`1`并且`y`值在其他列中，

```
matplot(x = myDat[, 1], y = myDat[, -1], type = "p", pch = 21) 
```

会产生类似的东西

![在此处输入图像描述](../Images/13b50a86a34b62394d92c909b82c16ae.png)

或使用主题`latticeExtra`包`ggplot2like`：

```
library(latticeExtra)

xyplot(as.formula(paste(paste0(names(myDat)[-1], collapse = "+"), "~",
  names(myDat[1]))),
  data = myDat, par.settings = ggplot2like(), grid = TRUE) 
```

![在此处输入图像描述](../Images/04731fe452812c70604630fb8c2713d7.png)

# c# - DependencyProperty 的值不会从 XAML 传播到后面的代码

> ID：13295700
> 
> 赞同：0
> 
> 时间：2012-11-08T18:48:15.057
> 
> 标签：c#, wpf, xaml

问题是 DependencyProperty 没有被分配给 XAML 中指定的值：

我有两个不同的用户控件，比如说 UserControl1 和 UserControl2，它们定义了两个控件共有的另一个用户控件：

用户控件1.xaml：

```
<modulename:MyUserControl ....somecode... DataOrientation="Horizontal"> 
</modulename:MyUserControl> 
```

用户控件2.xaml

```
<modulename:MyUserControl ....somecode... DataOrientation="Vertical"> 
</modulename:MyUserControl> 
```

两个 UserControl 之间的区别在于 UserControl1 必须使用水平方向显示数据，而 UserControl2 必须使用垂直方向显示数据。

在 MyUserControl 后面的代码中，我定义了一个依赖属性，如下所示：

```
public static readonly DependencyProperty DataOrientationProperty = 
DependencyProperty.Register ("DataOrientation",typeof(String),typeof(MyUserControl));

public String DataOrientation 
{
   get {return (String)GetValue(DataOrientationProperty);}
   set { SetValue(DataOrientationProperty, value); }
} 
```

这些是 MyUserControl.xaml 中的代码片段：

```
...
<StockPanel>
  <Grid Name="MyGrid" SizeChanged="MyGrid_SizeChanged">
    <Grid.ColumnDefinitions>
      <ColumnDefinitions Width="*"/>
      <ColumnDefinitions Width="100"/>
    </Grid.ColumnDefinitions>

    <ScrollViewer Name="MySV" Grid.Column="0" ....>
      <Grid Name="DetailGrid"/>
    </ScrollViewer>

    <Grid Grid.Column="1" .........>
    ......Some Option Data....
   </Grid>
  </Grid>
 </StockPanel> 
```

这个想法是根据方向标志将 ColumnDefinitions 更改为 RowDefinitions 并将 Grid.Column 更改为 Grid.Rows ：

如果标志为“Horizo​​ntal”，则 UserControl 并排显示“DetailsGrid”和“Option Data”网格，这意味着“DetailGrid”在 Column 0 中，“Option Data”Grid 在 Column 1 中。

如果标志为“垂直”，则用户控件在第 1 行显示“DetailGrid”，在第 0 行显示“选项数据”。

在这个问题上需要一些帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:01:41.757

两件事，使依赖属性具有更改的处理程序，并在调试器中验证该值实际上是使其进入用户控件。还要为用户控件设置一个默认值（下面使用“水平”），但您决定如何处理。

```
public string DataOrientation
   {
       get { return (string)GetValue(DataOrientationProperty); }
       set { SetValue(DataOrientationProperty, value); }
   }

   /// <summary>
   /// Identifies the DataOrientation dependency property.
   /// </summary>
   public static readonly DependencyProperty DataOrientationProperty =
       DependencyProperty.Register(
           "DataOrientation",
           typeof(string),
           typeof(MyClass),
           new PropertyMetadata("Horizontal",  // Default to Horizontal; Can use string.Empty
                                 OnDataOrientationPropertyChanged));

   /// <summary>
   /// DataOrientationProperty property changed handler.
   /// </summary>
   /// <param name="d">MyClass that changed its DataOrientation.</param>
   /// <param name="e">Event arguments.</param>
   private static void OnDataOrientationPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
   {
       MyClass source = d as MyClass;  // Put breakpoint here.
       string value = (string)e.NewValue;
   } 
```

# redirect - Box API 文件下载在任意文件上失败

> ID：13295702
> 
> 赞同：0
> 
> 时间：2012-11-08T18:48:27.053
> 
> 标签：redirect, authorization, box-api

我正在努力调试我目前在使用 Box-API 时遇到的问题。鉴于几千个用户文件，我能够始终如一地成功下载大部分文件，但其他文件始终失败并出现以下响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<Error><Code>InvalidArgument</Code><Message>Either the Signature query string parameter or the Authorization header should be specified, not both</Message><ArgumentValue>BoxAuth api_key=<removed>&amp;auth_token=<removed></ArgumentValue><ArgumentName>Authorization</ArgumentName><RequestId>83572B6EE6CCAF05</RequestId><HostId>MDk4PiUtdr/RS4vqd7p5Qw1MwohBHkhs35dLf6KWZx+11VBQtbTurwq0wVF9QTPC</HostId></Error> 
```

[这是从https://api.box.com/2.0/files/$ID/content](https://api.box.com/2.0/files/)端点返回的 302 重定向的位置返回的。对于大多数文件，这可以正常工作，但由于某些原因，对于某些文件，它始终不能正常工作。在通过和失败的情况下，我都捕获了对重定向 url 的请求的标头，并且看不到任何区别：

通过案例：

```
GET /bc/1/91652da319a59980c374f9059718080e/JolueqOGpciD6dgYhecNBoVpYxkvmYe1ZLheZor6BF4DUBIelMQTkFwYIys3nIibNIIEHUp447tBZLaXDzIbNQ,,/98713569dfe691813e006a1651c7c3e6/ HTTP/1.1
Host: dl.boxcloud.com
Accept: */*
Authorization: BoxAuth     api_key=<removed>&auth_token=<removed> 
```

失败案例：

```
GET /bc/1/44d67f0a3e406676711cbd18cc657696/JolueqOGpciD6dgYhecNBoVpYxkvmYe1ZLheZor6BF4DUBIelMQTkFwYIys3nIibNIIEHUp447tBZLaXDzIbNQ,,/405f32a3d6d6e1240832ab14a08e6d99/ HTTP/1.1
Host: dl.boxcloud.com
Accept: */*
Authorization: BoxAuth     api_key=<removed>&auth_token=<removed> 
```

我在调试想法方面碰壁了，所以我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:34:56.853

事实证明，这是 Curl 如何跨重定向维护标头的问题，再加上 dl.boxcloud.com 上的重定向 url 对 box 的授权标头的不容忍。我通过将 curl 的 FOLLOWLOCATION 设置为 false 解决了这个问题，而是在清除我的请求中的所有标头后手动跟踪重定向。

目前尚不清楚为什么这只发生在某些请求上，而不是其他请求。我也不清楚为什么后端会对这种行为如此敏感。

# ruby-on-rails - 在 Rails 上，随时随地编辑具有嵌套资源的对象集合

> ID：13295703
> 
> 赞同：0
> 
> 时间：2012-11-08T18:48:28.160
> 
> 标签：ruby-on-rails

我正在尝试为内容管理做一个后端。

有一组具有嵌套关联的对象，目前仅显示它们。`form_for`尚未对此进行任何限制。

我想将可编辑字段显示为输入，并能够随时编辑和更新（无需单击保存按钮或重新加载页面）。

我对如何在 Rails 上进行这样的实现有点迷茫。是否有一个宝石可以简化这个或任何想法我应该从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:17:44.557

您可以尝试使用[最好的](https://github.com/bernat/best_in_place)宝石。

[https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

# c - 扩展 C 代码以动态分配 3D 数组

> ID：13295711
> 
> 赞同：0
> 
> 时间：2012-11-08T18:48:45.027
> 
> 标签：c, arrays, 3d, malloc

我想根据以下创建 2D 数组的代码动态分配 3D 数组，任何建议都会非常有帮助：

```
void** malloc_2d (size_t nrows, size_t ncols, int elementsize) {
size_t i;
void ** ptr;

if ( (ptr = (void**)malloc(nrows * sizeof(void *))) == NULL ) {

  fprintf(stderr, "malloc_2d: out of memory\n");

  exit(1);

}

 if ( (ptr[0] = malloc(nrows * ncols * elementsize)) == NULL ) {

  fprintf(stderr, "malloc_2d: out of memory\n");

  exit(1);

 }

for (i=1; i<nrows; i++) 

  ptr[i] = (char*)ptr[0] + i * ncols * elementsize;

 return ptr;
 } 
```

谢谢

# javascript - 使用 ajax 请求在客户端 javascript 模板中填充图像源 url

> ID：13295714
> 
> 赞同：0
> 
> 时间：2012-11-08T18:49:01.907
> 
> 标签：javascript, http, jquery, dust.js, client-side-templating

我正在尝试使用客户端模板库dust.js。我想使用使用 Ajax（Json 格式）从服务器检索到的值来填充“img”标签（代码中的 {profile.picUrl}）的“src”属性。

问题是在进行 Ajax 调用之前，浏览器会尝试加载图像，从而导致 HTTP 404 响应（“src”包含模板占位符）。有没有办法在不向服务器发出 404 请求的情况下做到这一点？

这是一个复制问题的示例：

```
<body>
    <div class="template">
    hi {profile.user}
    <img src="{profile.picUrl}" />
    <div id="actions">
        {#actions}
        <a href="{url}">{text}</a><br /><br />
        {/actions}
    </div>
    </div>
    <script>
       function fillTemplates(responsedat, status, xhr) {
            if (status === "success") {
                template = $('.template').html();
                dust.compileFn(template,"t");
                dust.render("t", responsedat, function (err,out) {
                    if (err) {
                        console.log(err);
                        return;
                    }
                    else {
                        $('.template').html(out);
                    }

                });
                $('.template').show();
            }
        }
        $.get('landing.jsp', {}, fillTemplates);
        $.ready(function () {
            $('.template').hide();
        });
    </script>
</body> 
```

PS：大括号（{profile.user}）中的名称用于在dust.js语法中填充模板中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:58:59.707

通常，当我看到正在使用客户端模板时，模板本身并不是“活动”DOM 的一部分。它通常在脚本块中，例如来自主干的示例： http: [//coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/](http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/)

示例：http: [//jsfiddle.net/Rj2Hd/1/](http://jsfiddle.net/Rj2Hd/1/)

```
<html>

<body>
    <script type="text/template" id="template">
    hi {profile.user}
    <img src="{profile.picUrl}" />
    <div id="actions">
        {#actions}
        <a href="{url}">{text}</a><br /><br />
        {/actions}
    </div>
    </script>
    <script>
       function fillTemplates(responsedat, status, xhr) {
            if (status === "success") {
                template = $('#template').html();

alert(template);
        // your stuff here
            }
        }

        $(function () {
            fillTemplates(null, 'success', null);
        });
    </script>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:57:14.847

如果您可以更改源的占位符值，那么它应该像给它一个真实地址一样简单，或者在您收到 AJAX 的回复之前不提供一个。

# c# - 在按下按钮之前设置一个值

> ID：13295717
> 
> 赞同：0
> 
> 时间：2012-11-08T18:49:07.130
> 
> 标签：c#, silverlight, xaml, binding

我正在使用 Silverlight 4、C# 和 XAML。我有一个外部控件来过滤我的日期和时间，尽管它没有按计划工作。

它仅在您退出/失去焦点或两次点击搜索按钮时更新我的​​ DateTime 值。当您点击搜索按钮时，我怎么能做到这一点，值会立即更新？

这是我正在使用的 XAML 代码，

```
<toolkit:NumericUpDown Grid.Column="2" Margin="10" Value="{Binding ElementName=DateTimeframeElement, Path=DateTimeframe.TimeFrameMeasure, Mode=TwoWay}"/> 
```

任何帮助将不胜感激，谢谢，杰森

哦，抱歉，智能感知不适用于 UpdateSourceTrigger，因为我没有正确使用它，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:53:34.987

我相信你只需要添加`UpdateSourceTrigger=PropertyChanged`到你的绑定。

# flash - 如何重新定位 mc 的孩子以对齐并指向同一方向？

> ID：13295719
> 
> 赞同：0
> 
> 时间：2012-11-08T18:49:41.667
> 
> 标签：flash, actionscript-2

我正在使用 AS2，并且我有一个人可以动态构建的火车。用户单击舞台上的对象并创建副本。当用户单击并将该副本拖动到另一个对象中时，它会捕捉到目标对象的右侧，现在创建或添加数组。所以用户基本上可以用多少辆汽车（如果你愿意，也可以用孩子）来建造一列火车。

我添加的一项功能是，当用户单击并释放父项时，整个火车的坐标没有变化，`_x`整个`_y`火车将知道排队并指向新的方向。因此，如果他们都排成一列并指向 3 点钟位置，并且用户单击父级，则父级将指向 6 点钟位置，子级将全部排成 12 点钟位置并且所有指向到六人。如果他的用户继续点击整个火车将继续旋转。

这是我正在使用的代码（希望它足够了）：

```
function rotate(_index,_angle):Void
{
    for(var _i in _linkArray[_index])
    {
        var _mcy:Number    = this[_linkArray[_index][_i]]._y;
        var _mcx:Number    = this[_linkArray[_index][_i]]._x;
        var _degree:Number = Math.atan2(_mcy,_mcx)*(180/Math.PI) + _angle;
        /* if not the first element line up and rotate */ 
        if(_i != 0)
        {
            this[_linkArra[_index][_i]._rotation += _degree;
        }
    }
} 
```

希望有足够的信息。

**编辑**

我想尝试澄清我想要实现的目标。我没有例子，但为了更好地解释。库中有一个名为“railcar”的影片剪辑。当 SWF 启动时，“railcar”被附加到舞台上，该对象现在将成为创建无限数量副本的主对象。此处的最终目标是用户将使用这些副本来构建训练辅助工具。因此，如果用户想要开始构建该火车，他们将复制一个并将其拖放到另一个对象的顶部，这两个对象现在链接在一起。用户可以这样做并构建他们想要的火车。

建造火车时，所有车厢将堆叠在每个父对象的右侧，如下所示：（箭头表示方向，每个 o 表示火车的单个车厢）

```
ooo-> 
```

当用户单击第一节车厢时，整个火车应该旋转以指向另一个方向，这是一个示例：

```
^
o
o
o 
```

当再次点击前车时，它将再次旋转：

```
<-oooo 
```

因此，如果您有一列全部排好并指向 3 点钟位置的火车，并且您希望它指向 9 点钟位置，您将单击两次前车（因为每次旋转都是 90 度）并且整列火车将朝那个方向旋转，将指向前车。

我希望我有一个例子，但我没有，所以希望这会有所帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:20:52.957

因此，如果您将角度基于项目“0”，那么您就不会保留它。当您通过循环时，您会不断使用当前项目“i”。将角度计算移出循环并将它们分配为 0。您还必须调整汽车的 x 和 y 点，但这取决于方向。

```
function rotate(_index,_angle):Void {
    var _mcy:Number    = this[_linkArray[_index][0]]._y;
    var _mcx:Number    = this[_linkArray[_index][0]]._x;
    var _degree:Number = Math.atan2(_mcy,_mcx)*(180/Math.PI) + _angle;

    for(var _i in _linkArray[_index]) {
         /* if not the first element line up and rotate */ 
         if(_i != 0) {
            this[_linkArra[_index][_i]._rotation += _degree;
            // hypothetical hook code for a sprite attached to the car
            this[_linkArra[_index][_i]._x = this[_linkArra[_index][_i-1].hook._x;
            this[_linkArra[_index][_i]._y = this[_linkArra[_index][_i-1].hook._y;
         }
    }
 } 
```

# python - 2D ndarray：逐行操作

> ID：13295720
> 
> 赞同：1
> 
> 时间：2012-11-08T18:49:43.827
> 
> 标签：python, numpy

我有 2D numpy 数组，具有示例形状：

```
>>> a.shape
(48, 160) 
```

我想在元素或每一行之间做简单的操作，就像`a[0] - a[1]`每一行对所有其他行一样。

我知道如何简单地通过使用`for`循环和迭代行来做到这一点，但我想知道是否有一些 numpy 切片特定指令，可以在不使用`for`循环的情况下做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:02:41.683

你可以使用广播魔法来做到这一点。

```
import numpy as np
a = np.arange(12).reshape((4, 3))
b = np.arange(15).reshape((5, 3))
diff = a[np.newaxis, :, :] - b[:, np.newaxis, :]
diff.shape
# (5, 4, 3) 
```

[这](http://www.scipy.org/EricsBroadcastingDoc)是一个很好的广播教程。在这种情况下，我制作 a (1, 4, 3) 和 b (5, 1, 3)，得到的结果是 (5, 4, 3)，即 a 和 b 中每一行对的差异。

# foreach - 坐标列表的简单 NetLogo setxy

> ID：13295724
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:01.950
> 
> 标签：foreach, netlogo

出于某种原因，我在要求海龟转到列表中的 xy 坐标方面非常失败。我尝试了几种方法，虽然我可以看出为什么其中一些是错误的，但我无法确定什么是正确的。

（foreach [ 1 2 3 4] [-16 -16 -16 -16] [12 11 10 9] [问海龟 ?1 [setxy ?2 ?3 ]]）

*在此之后，我可以为每个命令设置一个命令列表，例如 setxy 但这似乎是一种浪费。另外，我想通过一些变量而不是列表中的项目来调用海龟。

理想情况下，我想将列表设置为变量，例如 set mylist [[0 1] [0 2]...] 但我不确定如何遍历这些项目。

[http://ccl.northwestern.edu/netlogo/docs/dictionary.html#foreach](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#foreach)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T01:48:03.367

好吧，首先，*如果*海龟 1、2、3 和 4 存在，您的示例代码应该可以工作。NetLogo 中的海龟是从 索引的`0`，所以我怀疑你可能正在做类似的事情：

```
create-turtles 4
(foreach [1 2 3 4] [-16 -16 -16 -16] [12 11 10 9] [ask turtle ?1 [setxy ?2 ?3]]) 
```

并得到类似的东西：

```
ASK expected input to be an agent or agentset but got NOBODY instead. 
```

...因为您的代码正在尝试`ask`一个`turtle 4`不存在的。将您的第一个列表更改为`[0 1 2 3]`可以解决此问题。

现在这是做你想做的最好的方法吗？我没有足够的信息来确定，但我怀疑你想要更接近的东西：

```
clear-all
let coordinates [[-16 12] [-16 11] [-16 10] [-16 9]]
create-turtles length coordinates
(foreach (sort turtles) coordinates [
  ask ?1 [ setxy item 0 ?2 item 1 ?2 ]
]) 
```

`sort turtles`如果您知道将`turtles`代理集转换为列表并`item`允许您获取列表中的特定项目，您应该能够弄清楚它是如何工作的。

**编辑：**

做`create-turtles length coordinates`而不是类似的事情`create-turtles 4`将确保您拥有与您定义的坐标数量相同的海龟数量，但这可能适用于您的情况，也可能不适用于您的情况。

**编辑2：**

一个更简单的方法是：

```
clear-all
let coordinates [[-16 12] [-16 11] [-16 10] [-16 9]]
foreach coordinates [
  create-turtles 1 [ setxy item 0 ? item 1 ? ]
] 
```

# javascript - 验证错误后刷新主干表单（包括事件）而不重新加载页面

> ID：13295725
> 
> 赞同：0
> 
> 时间：2012-11-08T18:50:08.237
> 
> 标签：javascript, backbone.js, coffeescript, backbone-views, backbone-events

我有一个带有表单的主干视图。当用户提交表单时，可能会出现验证错误，由后端处理。显示错误后，我希望表单再次可用。我以为我应该只做 this.delegateEvents()，但由于某种原因它不起作用......

这是代码：

```
class App.Views.PlotsCreate extends Backbone.View
  template: JST['plots/create']

    events:
        'submit #new_plot': 'createPlot'

    createPlot: (event) ->
      event.preventDefault()
      @attributes = plot: {name: $('#new_plot_name').val(), docreate: "true", code: code }
      @collection.create @attributes,
        wait: true
        success: (plot) => 
          document.body.style.cursor = 'default'
            @showProgress(plot)
        error: @handleError
      )

    handleError: (entry, response) =>
      if response.status == 422
        errors = $.parseJSON(response.responseText).errors
        for attribute, messages of errors
          $('#new_plot_name').val("#{message}" for message in messages)

    <form class="new_plot" name="create_form" id ="new_plot"  data-remote="true" enctype="multipart/form-data">
      <textarea class="input" id="new_plot_name" name="name" rows="5" maxlength = '140'></textarea> 
      <input class="blue_button btn_generate" name="commit" type="submit" value="create" id ="plot_subm"/>
    </form> 
```

如何使表单再次起作用（即在显示错误后再次提交事件触发）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:55:07.063

验证失败通常不会对事件绑定做任何事情；事实上，从技术上讲，视图甚至没有验证方法，只有模型有（并且该方法所做的只是触发“错误”事件并返回 false）。你确定你没有破坏视图的代码吗？

# jquery - Jquery 对话框布局

> ID：13295727
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:19.190
> 
> 标签：jquery, html, jquery-ui

我有一个由按钮触发的简单 jquery UI 对话框。

```
function OpenGeneratePINsDialog() {
$("#generatePinsDialog").dialog('open'); 
```

}

我想要的是在标签旁边显示数字。现在它不在块内显示。

```
<div id="generateDialog" title="Generate New">
<label style="display:inline-block; width:200px;">The number generated: </label><div id="numberGenerated">1</div>
<br />
<label style="display:inline-block; width:200px;">ID+PIN</label><div id="combinationIDPIN">2</div>
<br />
<label style="display:inline-block; width:200px;">Same as ID</label><div id="SameWithID">3</div> 
```

图片： ![图片](../Images/51a6f5af02f77a91d9cfa0ffe44004be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:52:21.290

对数字使用内联元素，例如“span”。

```
<span id="numberGenerated">1</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:53:58.940

如果你想使用 div，div 默认设置为`display:block;`

将其设置为 inline-block 就可以了。

```
<div id="numberGenerated" style="display:inline-block;">1</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:57:49.190

**HTML**：

```
<div id="generateDialog" title="Generate New" class="mystyle">
<label>The number generated: </label><div id="numberGenerated">1</div>
<br />
<label>ID+PIN</label><div id="combinationIDPIN">2</div>
<br />
<label>Same as ID</label><div id="SameWithID">3</div> 
```

**CSS**：

```
.mystyle label, .mystyle div {
  display:inline-block;
}

.mystyle label {
  width:200px; /* or whatever size you want them */
} 
```

# windows - 如何确定文件夹是否有自定义图标？

> ID：13295728
> 
> 赞同：0
> 
> 时间：2012-11-08T18:50:20.713
> 
> 标签：windows, winapi, icons, directory

如何确定给定路径的文件夹是否具有用户设置的通用文件夹图标，或者更确切地说是自定义图标？我只想使用 Win32 API 调用。

我知道，我可以检查，如果里面有一个 desktop.ini 文件，但这种方法并不总是可用（程序可能没有列出文件夹内容的权限）并且速度很慢，因为每次都需要解析 ini 文件（图标可能不可更改）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:43:35.543

您不需要“列出文件夹内容”。该文件始终命名为`desktop.ini`. 如果您有文件夹路径，只需将该文件名附加到它并尝试打开该文件。如果失败，`GetLastError()`会告诉您原因，可能是因为该文件不存在或您无权访问它。

# ruby-on-rails - 用 hidden_ field 更新 ruby 对象？

> ID：13295729
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:24.107
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用结合隐藏字段的按钮来更新对象。但是下面的代码将对象更新为“不知道”（结果 [4]）。我究竟做错了什么？

```
<%= form_for(@ask) do |f| %>
<% outcomes = [ "Advice", "Introduction", "Support", "Money", "Don't know" ] %>
<ul>
<% outcomes.each do |o| %>
    <li>
        <%= f.hidden_field :category, value: o %>
        <%= f.submit o, class: "btn btn-success" %>
    </li>
<% end %>
</ul>
<% end %> 
```

每个按钮的 HTML 是：

```
<input id="ask_category" name="ask[category]" type="hidden" value="Introduction" /> #value is equal to each object in the array
<input class="btn btn-success" name="commit" type="submit" value="Introduction" /> 
```

这看起来也不错...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:17:41.007

您可以尝试创建几个小表单而不是一个大表单：

```
<% outcomes = [ "Advice", "Introduction", "Support", "Money", "Don't know" ] %>
<ul>
<% outcomes.each do |o| %>
  <li>
    <%= form_for(@ask) do |f| %>
      <%= f.hidden_field :category, value: o %>
      <%= f.submit o, class: "btn btn-success" %>
    <% end %>
  </li>
<% end %>
</ul> 
```

# php - 在 ImageMagick alpha 图像中查找边界区域

> ID：13295730
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:36.167
> 
> 标签：php, imagemagick

我正在拍摄一些图像，并通过 PHP 脚本使用 ImageMagick，尽我所能删除它们的背景。很多图像都有纯色背景，所以效果很好。唯一的问题是输出图像保留了原始尺寸，充满了空白空间。ImageMagick 中有没有办法确定非透明内容的边界并相应地调整画布？

![问题的表示](../Images/2f2b4f1522605063816bdbd0773e4e7c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:42:37.940

ImageMagick 处理选项是[-trim](http://www.imagemagick.org/script/command-line-options.php#trim)；其中，评估每个角落的像素，并裁剪出相似的像素。PHP 的[Imagick::trimImage](http://www.php.net/manual/en/imagick.trimimage.php)方法应该可以工作。其他示例可以在 ImageMagick 的“ [Auto-Crop”](http://www.imagemagick.org/Usage/crop/#trim)文章中找到。

![有绿地](../Images/c7e32b4bc60d17a13dd10bd3fdc830d7.png)来源

`convert -trim source.png desired.png`

![修剪后的图像](../Images/17d93541e28550609ebb1d1ae1621589.png)想要的

# sql - 保存 Sql 视图错误，运行良好但无法保存“关键字声明附近的语法不正确”

> ID：13295731
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:36.207
> 
> 标签：sql

```
Declare @DaysLeft as INT

;With MyCTE AS
(
    SELECT number + 1 as 'CurrentDay'
    FROM   master..spt_values
    WHERE  type='p'
    AND    number < datepart(dd, DateAdd(day,-1,DateAdd(Month,1,DateAdd(Month,
                                          DateDiff(Month, 0, GETDATE()),0))))
    AND    datename(WEEKDAY,DateAdd(Month, DateDiff(Month, 0, GETDATE()),
                                         number) ) not in ('Saturday','Sunday')
)

Select @DaysLeft = (Select COUNT(*) As MyTotal from MyCTE
WHERE CurrentDay >= DATEPART(DD, GETDATE()))

Select @DaysLeft 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:49:20.123

您不能在视图中声明变量。删除变量并重新表述最终的 select 语句。

```
With MyCTE AS
(
    SELECT number + 1 as 'CurrentDay'
    FROM   .spt_values
    WHERE  type='p'
    AND    number < datepart(dd, DateAdd(day,-1,DateAdd(Month,1,DateAdd(Month,
                                          DateDiff(Month, 0, GETDATE()),0))))
    AND    datename(WEEKDAY,DateAdd(Month, DateDiff(Month, 0, GETDATE()),
                                         number) ) not in ('Saturday','Sunday')
)

Select COUNT(*) As DaysLeft from MyCTE
WHERE CurrentDay >= DATEPART(DD, GETDATE()) 
```

[在SQL Fiddle](http://sqlfiddle.com/#!3/4a507/2/0)中运行修改。

# python - 如何在 Pandas 数据框的列中用零替换 NaN 值？

> ID：13295735
> 
> 赞同：573
> 
> 时间：2012-11-08T18:50:39.703
> 
> 标签：python, pandas, dataframe, nan

我有一个熊猫数据框如下：

```
 itm Date                  Amount 
67    420 2012-09-30 00:00:00   65211
68    421 2012-09-09 00:00:00   29424
69    421 2012-09-16 00:00:00   29877
70    421 2012-09-23 00:00:00   30990
71    421 2012-09-30 00:00:00   61303
72    485 2012-09-09 00:00:00   71781
73    485 2012-09-16 00:00:00     NaN
74    485 2012-09-23 00:00:00   11072
75    485 2012-09-30 00:00:00  113702
76    489 2012-09-09 00:00:00   64731
77    489 2012-09-16 00:00:00     NaN 
```

当我尝试将函数应用于 Amount 列时，出现以下错误：

```
ValueError: cannot convert float NaN to integer 
```

我尝试使用数学模块中的 .isnan 应用函数 我尝试过 pandas .replace 属性 我尝试过 pandas 0.9 中的 .sparse 数据属性 我也尝试过 if NaN == NaN 函数中的语句。我还看过这篇文章[如何在 R 数据框中用零替换 NA 值？](https://stackoverflow.com/questions/8161836/how-do-i-replace-na-values-with-zeros-in-r)在看其他一些文章的时候。我尝试过的所有方法都不起作用或无法识别 NaN。任何提示或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：906
> 
> 时间：2012-11-08T18:54:27.467

我相信`DataFrame.fillna()`会为你做到这一点。

链接到 Docs 以获取[dataframe](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.fillna.html)和[Series](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.fillna.html)。

例子：

```
In [7]: df
Out[7]: 
          0         1
0       NaN       NaN
1 -0.494375  0.570994
2       NaN       NaN
3  1.876360 -0.229738
4       NaN       NaN

In [8]: df.fillna(0)
Out[8]: 
          0         1
0  0.000000  0.000000
1 -0.494375  0.570994
2  0.000000  0.000000
3  1.876360 -0.229738
4  0.000000  0.000000 
```

要仅将 NaN 填充在一列中，请仅选择该列。在这种情况下，我使用 inplace=True 来实际更改 df 的内容。

```
In [12]: df[1].fillna(0, inplace=True)
Out[12]: 
0    0.000000
1    0.570994
2    0.000000
3   -0.229738
4    0.000000
Name: 1

In [13]: df
Out[13]: 
          0         1
0       NaN  0.000000
1 -0.494375  0.570994
2       NaN  0.000000
3  1.876360 -0.229738
4       NaN  0.000000 
```

**编辑：**

为避免出现`SettingWithCopyWarning`，请使用内置的特定于列的功能：

```
df.fillna({1:0}, inplace=True) 
```

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2016-10-06T09:10:08.180

不能保证切片返回视图或副本。你可以做

```
df['column'] = df['column'].fillna(value) 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2017-06-15T05:11:20.373

您可以使用[`replace`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.replace.html)更改`NaN`为`0`：

```
import pandas as pd
import numpy as np

# for column
df['column'] = df['column'].replace(np.nan, 0)

# for whole dataframe
df = df.replace(np.nan, 0)

# inplace
df.replace(np.nan, 0, inplace=True) 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-09-13T20:59:31.637

下面的代码对我有用。

```
import pandas

df = pandas.read_csv('somefile.txt')

df = df.fillna(0) 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2015-06-02T05:13:34.193

我只是想提供一些更新/特殊情况，因为看起来人们仍然来到这里。如果您使用多索引或以其他方式使用索引切片器，则 inplace=True 选项可能不足以更新您选择的切片。例如，在 2x2 级别的多索引中，这不会更改任何值（从 pandas 0.15 开始）：

```
idx = pd.IndexSlice
df.loc[idx[:,mask_1],idx[mask_2,:]].fillna(value=0,inplace=True) 
```

“问题”是链接破坏了 fillna 更新原始数据帧的能力。我将“问题”放在引号中，因为设计决策有充分的理由导致在某些情况下不通过这些链进行解释。此外，这是一个复杂的示例（尽管我确实遇到过），但根据您的切片方式，这可能适用于较少级别的索引。

解决方案是 DataFrame.update：

```
df.update(df.loc[idx[:,mask_1],idx[[mask_2],:]].fillna(value=0)) 
```

这是一行，读起来相当好（有点），并消除了中间变量或循环的任何不必要的混乱，同时允许您将 fillna 应用于您喜欢的任何多级切片！

如果有人能找到这不起作用的地方，请在评论中发布，我一直在搞乱它并查看源代码，它似乎至少解决了我的多索引切片问题。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-07-16T20:02:37.390

您还可以使用字典来填充 DataFrame 中特定列的 NaN 值，而不是用一些 oneValue 填充所有 DF。

```
import pandas as pd

df = pd.read_excel('example.xlsx')
df.fillna( {
        'column1': 'Write your values here',
        'column2': 'Write your values here',
        'column3': 'Write your values here',
        'column4': 'Write your values here',
        .
        .
        .
        'column-n': 'Write your values here'} , inplace=True) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-07-07T18:31:36.867

**填充缺失值的简单方法：-**

**填充** **字符串列：**当字符串列有缺失值和 NaN 值时。

```
df['string column name'].fillna(df['string column name'].mode().values[0], inplace = True) 
```

**填充** **数字列：**当数字列有缺失值和 NaN 值时。

```
df['numeric column name'].fillna(df['numeric column name'].mean(), inplace = True) 
```

**用零填充 NaN：**

```
df['column name'].fillna(0, inplace = True) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-03-29T19:46:45.553

替换 pandas 中的 na 值

```
df['column_name'].fillna(value_to_be_replaced,inplace=True) 
```

如果`inplace = False`，而不是更新 df （数据框），它将返回修改后的值。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-02-26T11:21:03.500

[![在此处输入图像描述](../Images/e4f725f888a921c7142061702c479e99.png)](https://i.stack.imgur.com/TDvJx.png)

考虑到上表中的特定列`Amount`是整数类型。以下将是一个解决方案：

```
df['Amount'] = df.Amount.fillna(0).astype(int) 
```

同样，您可以用各种数据类型填充它，例如`float`等`str`。

特别是，我会考虑数据类型来比较同一列的各种值。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-03-24T23:38:37.450

**用不同的方式替换不同列中的 nan：**

```
 replacement= {'column_A': 0, 'column_B': -999, 'column_C': -99999}
   df.fillna(value=replacement) 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-03-01T14:22:54.940

***将所有 nan 替换为 0***

```
df = df.fillna(0) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-07-23T13:36:14.570

主要有两种选择；如果仅用数字替换（跨列）填充或填充缺失值*NaN / np.nan ：*

`df['Amount'].fillna(value=None, method= ,axis=1,)`足够了：

从文档：

value : 标量、dict、Series 或 DataFrame 用于填充孔的值（例如 0），或者指定用于每个索引（对于 Series）或列（对于 DataFrame）的值的 dict/Series/DataFrame . （不在 dict/Series/DataFrame 中的值将不会被填充）。此值不能是列表。

这意味着不再允许估算“字符串”或“常量”。

对于更专业的估算，请使用**SimpleImputer()**：

```
from sklearn.impute import SimpleImputer
si = SimpleImputer(strategy='constant', missing_values=np.nan, fill_value='Replacement_Value')
df[['Col-1', 'Col-2']] = si.fit_transform(X=df[['C-1', 'C-2']]) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-03-31T03:24:29.867

这对我有用，但没有人提到它。会不会有什么问题？

```
df.loc[df['column_name'].isnull(), 'column_name'] = 0 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-05-15T18:20:57.580

如果要将其转换为 pandas 数据框，也可以使用`fillna`.

```
import numpy as np
df=np.array([[1,2,3, np.nan]])

import pandas as pd
df=pd.DataFrame(df)
df.fillna(0) 
```

这将返回以下内容：

```
 0    1    2   3
0  1.0  2.0  3.0 NaN
>>> df.fillna(0)
     0    1    2    3
0  1.0  2.0  3.0  0.0 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-07T19:03:05.147

如果要为特定列填充 NaN，可以使用 loc：

```
d1 = {"Col1" : ['A', 'B', 'C'],
     "fruits": ['Avocado', 'Banana', 'NaN']}
d1= pd.DataFrame(d1)

output:

Col1    fruits
0   A   Avocado
1   B   Banana
2   C   NaN

d1.loc[ d1.Col1=='C', 'fruits' ] =  'Carrot'

output:

Col1    fruits
0   A   Avocado
1   B   Banana
2   C   Carrot 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2022-01-11T06:59:25.553

已经有很多贡献了，但由于我是新来的，我仍然会提供意见。

`NaN`在 Pandas DataFrame 中有两种方法可以用零替换值：

1.  fillna()：函数使用指定的方法填充 NA/NaN 值。
2.  replace(): df.replace() 一个简单的方法，用于替换字符串、正则表达式、列表、字典

例子：

```
#NaN with zero on all columns
df2 = df.fillna(0)

#Using the inplace=True keyword in a pandas method changes the default behaviour.
    df.fillna(0, inplace = True)

# multiple columns appraoch
df[["Student", "ID"]] = df[["Student", "ID"]].fillna(0) 
```

最后是 replace() 方法：

```
df["Student"] = df["Student"].replace(np.nan, 0) 
```

# asp.net - Microsoft.VisualBasic.dll 中出现了“System.InvalidCastException”类型的第一次机会异常

> ID：13295737
> 
> 赞同：1
> 
> 时间：2012-11-08T18:50:58.407
> 
> 标签：asp.net, vb.net, exception, casting

我正在将 Dynamics CRM SDK 2011 的 Microsoft 示例中的一些控制台代码转换为 ASP.NET Web 应用程序。它在控制台模式下运行良好，但在转换为在 ASP.NET 中运行后出现错误：

> Microsoft.VisualBasic.dll 中出现了“System.InvalidCastException”类型的第一次机会异常

这是我的源代码：

```
 Public Sub Run(ByVal connectionString As String, ByVal promptforDelete As Boolean)
    Try
        Dim connection As Microsoft.Xrm.Client.CrmConnection =
            CrmConnection.Parse(connectionString)
        _orgService = New OrganizationService(connection)
        Using _orgService
            Dim account_Renamed As Account = New Account With {.Name = "Fourth Coffee"}
            _accountId = _orgService.Create(account_Renamed)
            Response.Write(CType("{0} {1}", Char()), account_Renamed.LogicalName, account_Renamed.Name)
            Dim cols As New ColumnSet(New String() {"name",
                                                   "address1_postalcode",
                                                    "lastusedincampaign"})
            Dim retrievedAccount As Account = _orgService.Retrieve("account", _accountId, cols).ToEntity(Of Account)()
            Response.Write("Retrieved record.")
            retrievedAccount.Address1_PostalCode = "98052"
            Response.Write("Updated Account Postal Code.")

        End Using
    Catch ex As Exception

    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:10:01.187

所以，我想通了。在基于 Web 的应用程序中，无需使用 {0} {1}：

```
Response.Write(CType("{0} {1}", Char()), account_Renamed.LogicalName, account_Renamed.Name) 
```

相反，它看起来像这样：

```
Response.Write(account_Renamed.LogicalName & " " & account_Renamed.Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:22:00.063

失败的原因与您的应用程序基于 Web 无关。这与您使用`CType()`. 您正在使用它来连接两个不是它的用途的字符串。

该`CType()`方法用于将对象转换为特定类型。使用这段代码：

```
CType("{0} {1}", Char()) 
```

您告诉`CType()`将字符串文字转换`"{0} {1}"`为字符数组。这实际上有效！现在您将一个字符数组`Reponse.Write()`以及两个附加参数传递给我，这些参数对我来说似乎是字符串值。

有一个`Reponse.Write()`接受三个参数的重载，第一个是字符数组，但其他值是整数（索引和计数）。

老实说，我很惊讶这甚至是建造的，更不用说跑了。对于未来的代码，最好像这样完成字符串连接（恕我直言）：

```
String.Format("{0} {1}", account_Renamed.LogicalName, account_Renamed.Name) 
```

而不是与`&`运算符连接。如果您以这种方式连接字符串，您的代码将更改为此。

```
Response.Write(String.Format("{0} {1}", account_Renamed.LogicalName, account_Renamed.Name)) 
```

Using`String.Format()`实际上是使用 StringBuilder 类的一种快捷方式，它在字符串处理方面非常有效。当您使用连接运算符时，`&`每次将一个片段附加到字符串时，您都会在内存中创建一个全新的字符串对象。StringBuilder 以可变的方式创建/改变字符串，并且在执行大量字符串工作时要快得多。这就是为什么我认为使用快捷方式是最佳实践。

# ios - 如何判断核心数据托管对象何时具有设置 toMany 关系的动态方法？

> ID：13295738
> 
> 赞同：0
> 
> 时间：2012-11-08T18:50:57.933
> 
> 标签：ios, ruby, rubymotion

我有一个使用核心数据的 iOS 应用程序。我创建了一个与另一个对象有 toMany 关系的托管对象。该应用程序是用 RubyMotion 编写的。

在将“组”NSManagedObject 对象的“toMany”关系设置为 person 对象时，我调用：

```
group.addPersonObject( person ) 
```

但我想在调用它之前确保“addPersonObject”存在。我试过了

```
if group.respondsToSelector( "addPersonObject" ) 
```

但这似乎不起作用。我认为这是因为它是由核心数据动态创建的。

在我调用它之前判断它是否存在的好方法是什么？

从 stackoverflow 上的其他问题来看，respondsToSelect 似乎应该可以工作，因为我正在使用该类的一个实例，但情况似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:37:45.350

尝试：

```
if group.respond_to?("addPersonObject:") 
```

这应该有效。: 是必需的，因为 addPersonObject 需要一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:10:37.133

我最终使用定义我的模型的关系的代码来查找它是否是 toMany 关系。该代码特定于我的数据结构，但它看起来像：

```
 # is this a toMany relationship on this class?
   def toMany?(relationship)

      result = false
      relationship = relationship.to_s # in case it was a symbol
      entities = Kernel.const_get( self.class.name ).entityDescription
      entities.each do |e|
        if e.class == NSRelationshipDescription and e.name == relationship and e.maxCount == -1
          result = true 
        end
      end
      result
    end 
```

# c++ - c++ sqlite3插入或替换查询我认为是错误的

> ID：13295739
> 
> 赞同：0
> 
> 时间：2012-11-08T18:50:58.687
> 
> 标签：c++, sql, database, sqlite

我已更正我的数据库，但是当我启动命令时，我得到一个错误。

我的桌子：

```
a{ id int primary key not null, name varchar not null, and order int not null } 
```

我的声明：

```
string query = "insert or replace into a (id,name,order) values (5,'hi',10)"
int rc;
rc = sqlite3_exec(db, query.c_str(), 0,0,&errMsg);
if(rc != SQLITE_OK){
    cout << "Error Code: " << rc << " SQLError: " << errMsg<<endl;
} 
```

我不确定这应该如何工作。正在尝试插入。它会看到PK匹配......然后，它会替换，它会尝试用自己替换PK吗？我不确定。RC 给出的 Returned ErrorCode 是：

```
1   /* SQL error or missing database */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:09:04.370

The table was not created in the DB. One of the dev team changed the schema, dropped old tables, and added new ones without documenting, or giving me any sort of notification.

Should have it resolved though now.

# php - 将数组中值的位置存储到数据库表列

> ID：13295742
> 
> 赞同：0
> 
> 时间：2012-11-08T18:51:03.870
> 
> 标签：php, mysql

我是一个完整的 PHP/MySQL 新手，非常感谢一些帮助将数组中每个值的位置存储到适当的数据库表列。数组中的值本身对应于 DB 表中的一列。

在我的 php 表单处理页面中，我有数组 $rankArray，其中每个值对应于我的数据库表中的一列。我想要做的是将每个值的位置保存到其对应的列中。例如，如果

```
$rankArray = [2,5,3,4,1] 
```

它应该在第 2 列中存储“1”，在第 5 列中存储“2”，在第 3 列中存储“3”，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:58:34.873

我会做类似的事情：

```
$rankArray = [2,5,3,4,1];
$flipped = array_flip($rankArray);
ksort($flipped); 
```

现在翻转应该是这个顺序的数组：[5,1,3,4,2] 并且您的值可以插入到正确的列中。

这是有效的，因为 array_flip 返回一个键和值被翻转的数组，然后 ksort 确保对数组键进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:12:01.527

尝试：

```
$query = "INSERT INTO TABLENAME VALUES (";
$rankArray = array(2,5,3,4,1);
sort($rankArray);
foreach($rankArray as $k => $v) {
$query .= "'" . $v . "'";
if(isset($rankArray[$k+1]))
  $query .= ",";
}
 $query .= ")";
 print_r($query); 
```

[演示](http://codepad.org/QBlX2dpc)

**注意：**不推荐使用 Mysql 扩展，如果可能，请使用 Mysqli 或 PDO_Mysql。

# icu - 为什么从乌尔都语到拉丁语的音译在 icu4c 中不能正常工作？

> ID：13295743
> 
> 赞同：0
> 
> 时间：2012-11-08T18:51:10.187
> 
> 标签：icu, transliteration, latin

我正在尝试将这行乌尔都语转换为拉丁语，然后将拉丁字符转换为 ASCII（通过删除重音等），但它似乎缺少一些字符。

为什么还有非拉丁字符（“ہ”、“ے”等）？

```
$ uconv -x 'Any-Latin'
دفعہ 1: تمام انسان آزاد اور حقوق و عزت کے اعتبار سے برابر پیدا ہوۓ ہیں۔ انہیں ضمیر اور عقل ودیعت ہوئی ہے۔ اس لئے انہیں ایک دوسرے کے ساتھ بھائی چارے کا سلوک کرنا چاہئے

dfʿہ 1: tmạm ạnsạn ậzạd ạwr ḥqwq w ʿzt ḵے ạʿtbạr sے brạbr py̰dạ ہwے̉ ہy̰ں۔ ạnہy̰ں ḍmy̰r ạwr ʿql wdy̰ʿt ہwỷy̰ ہے۔ ạs lỷے ạnہy̰ں ạy̰ḵ dwsrے ḵے sạtھ bھạỷy̰ cẖạrے ḵạ slwḵ ḵrnạ cẖạہỷے 
```

为什么音译`Any-ASCII`不转换为 ASCII？

```
$ uconv -x 'Any-Latin; Latin-ASCII'
دفعہ 1: تمام انسان آزاد اور حقوق و عزت کے اعتبار سے برابر پیدا ہوۓ ہیں۔ انہیں ضمیر اور عقل ودیعت ہوئی ہے۔ اس لئے انہیں ایک دوسرے کے ساتھ بھائی چارے کا سلوک کرنا چاہئے

dfʿہ 1: tmam ansan azad awr hqwq w ʿzt kے aʿtbar sے brabr pyda ہwے̉ ہyں۔ anہyں dmyr awr ʿql wdyʿt ہwyy ہے۔ as lyے anہyں ayk dwsrے kے satھ bھayy charے ka slwk krna chaہyے
$ uconv -x 'Any-Latin; Latin-ASCII' -t latin1
دفعہ 1: تمام انسان آزاد اور حقوق و عزت کے اعتبار سے برابر پیدا ہوۓ ہیں۔ انہیں ضمیر اور عقل ودیعت ہوئی ہے۔ اس لئے انہیں ایک دوسرے کے ساتھ بھائی چارے کا سلوک کرنا چاہئے

Conversion from Unicode to codepage failed at output byte position 2\. Unicode: 02bf Error: Invalid character found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:44:06.167

您可以使用以下命令查看这些字符是什么：

`uconv -x 'Any-Latin; Latin-ASCII' --to-callback escape-c -t ascii`

*   `-t ascii` ：将输出转换为实际的 ASCII。不仅仅是拉丁语1。
*   `--to-callback escape-c`: 任何不可转换的东西，都会通过 'escape' 回调

这给了我们这个结果：

`df\u02BF\u06C1 1: tmam ansan azad awr hqwq w \u02BFzt k\u06D2 a\u02BFtbar s\u06D2 brabr pyda \u06C1w\u06D2\u0309 \u06C1y\u06BA\u06D4 an\u06C1y\u06BA dmyr awr \u02BFql wdy\u02BFt \u06C1wyy \u06C1\u06D2\u06D4 as ly\u06D2 an\u06C1y\u06BA ayk dwsr\u06D2 k\u06D2 sat\u06BE b\u06BEayy char\u06D2 ka slwk krna cha\u06C1y\u06D2`

因此，`U+06C1 HEH GOAL`例如不音译。您可以提交 CLDR 票证。

实际上，已经有这个了： [http ://unicode.org/cldr/trac/ticket/4387](http://unicode.org/cldr/trac/ticket/4387)

一旦有了乌尔都语-拉丁语音译，您就可以使用.`ur-Latin`而不是`Any-Latin`. 这样就使用了乌尔都语特定的规则，而不仅仅是阿拉伯文字规则。

如果我是你，我会跟进 4387 票。

# php - PHP Cookie 与会话变量

> ID：13295746
> 
> 赞同：3
> 
> 时间：2012-11-08T18:51:24.460
> 
> 标签：php, session, cookies, session-variables

我正在从 php-login.net 修改登录脚本并试图使其更安全。这个特定的登录脚本有一个登录类，它在用户登录时设置 cookie 和会话变量。

```
/**
 *  write user data into PHP SESSION [a file on your server]
 */
   $_SESSION['user_name'] = $result_row->user_name;
   $_SESSION['user_email'] = $result_row->user_email;
   $_SESSION['user_logged_in'] = 1;

/**
 *  write user data into COOKIE [a file in user's browser]
 */
   setcookie("user_name", $result_row->user_name, time() + (3600*24*100));
   setcookie("user_email", $result_row->user_email, time() + (3600*24*100));
   $this->user_is_logged_in = true; 
```

不幸的是，在用户可以访问的页面上，没有人写检查以确保用户在访问该页面时已登录。因此，如果一个人只是直接输入 URL，他们就不必登录。

我想知道验证用户是否登录的最佳方法。目前我正在使用这个，但我不知道它是否是多余的（意思是：cookie变量总是等于会话变量，所以检查没有意义两者都有？）任何输入都会有所帮助。

```
session_start();
if(!(isset($_COOKIE['user_email']) && 
    isset($_SESSION['user_email']) &&
    ($_COOKIE['user_email']===$_SESSION['user_email']) &&
    isset($_COOKIE['user_name']) && 
    isset($_SESSION['user_name']) && 
    ($_COOKIE['user_name']===$_SESSION['user_name']) && 
    isset($login) && 
    $login->isUserLoggedIn())){
        header("location:../../index.php");
        exit;
     } 
```

（抱歉，代码格式不正确，我仍在尝试找出本网站上文本格式的细微差别）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T12:29:04.350

使用会话时，已经存在一个带有会话 ID 的 cookie，它映射到服务器端 php 会话。您在那里注册的所有数据都将在全局 $_SESSION 数组中可用。将数据存储在 cookie 和服务器上通常是没有意义的。

您将数据存储在 cookie 中的唯一原因是，如果您在同一个域名上有更多站点需要共享 cookie 数据。

# sql - sql如何插入一个列，就像它是一个标识列

> ID：13295748
> 
> 赞同：0
> 
> 时间：2012-11-08T18:51:28.927
> 
> 标签：sql, sql-server-2008

我有一个三列的表

```
密钥ID | nvarchar(10)  
A 栏 | nvarchar（最大值）  
B栏| Nvarchar(最大值)
```

我想要做的是选择插入，但是使用 keyID 我需要将它视为一个缩进列。

例如，如果我有 3 行我想插入它将是：

```
1001 | 苹果 | 梨  
1002 | 梨 | 芒果  
1003 | 菠萝 | 松树

```

但我正在尝试使用插入选择来执行此操作，例如：

```
insert into myTable(KeyId,ColumnA,ColumnB) select 'x',OrigColA,OrigColB from myTableB 
```

显然'x'是我遇到问题的地方。

提前致谢！

这不是位于 myTableB 中的 KeyId

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:54:07.250

由于 varchar，这有点难看，但您可以尝试：

```
;WITH x AS
(
  SELECT ROW_NUMBER() OVER(ORDER BY OrigColA, OrigColB) AS n, OrigColA, OrigColB
  FROM myTableB
)
INSERT INTO myTable(KeyId, ColumnA, ColumnB)
SELECT (SELECT CAST(CAST(MAX(KeyId) AS INT) + n AS NVARCHAR(10)) FROM myTable),
    OrigColA, OrigColB
FROM x; 
```

这当然假设已经有一行`myTable`可以从中获取当前最大值。

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/5718f/9)

如果情况并非总是如此，请`MAX(KeyId)`使用 a`COALESCE`和比您的起始默认值小一的常数进行包装。例如：

```
;WITH x AS
(
  SELECT ROW_NUMBER() OVER(ORDER BY OrigColA, OrigColB) AS n, OrigColA, OrigColB
  FROM myTableB
)
INSERT INTO myTable(KeyId, ColumnA, ColumnB)
SELECT (SELECT CAST(CAST(COALESCE(MAX(KeyId),1000) AS INT) + n AS NVARCHAR(10)) FROM myTable),
    OrigColA, OrigColB
FROM x; 
```

或者，如果您*知道*没有一行，而您只想从一个常量开始，只需执行以下操作：

```
INSERT INTO myTable(KeyId, ColumnA, ColumnB)
SELECT ROW_NUMBER() OVER(ORDER BY OrigColA, OrigColB) + 1000, OrigColA, OrigColB
FROM myTableB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:02:01.453

你需要一个带有序列的数据库。这是 sql server 的解决方法

[http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server](http://www.sqlteam.com/article/custom-auto-generated-sequences-with-sql-server)

# c++ - 从 C 结构继承的可能的兼容性问题

> ID：13295750
> 
> 赞同：0
> 
> 时间：2012-11-08T18:51:36.730
> 
> 标签：c++, c, language-interoperability

背景：我们正在用 C++ 实现一个动态库，它扩展了 C 程序的功能。对于 C 程序中使用的主要结构之一，我们想添加我们自己的库特定字段。目前，当我们需要一个新字段时，我们很好地要求 C 程序的开发人员为我们添加一个字段，但最终我们会遇到大量的铸造混乱。我想知道我们是否可以改为执行以下操作：

主程序头文件：

```
#ifdef __cplusplus
extern "C" {
#endif
/* ... */
typedef struct ImportantStruct {
/* Definitions */
} ImportantStruct
/* ... */
#ifdef __cplusplus
}
#endif 
```

我们的头文件：

```
//...
class ObjectType : public ImportantStruct {
// Our extra fields
}
//... 
```

我想我有两个问题：

1）这甚至合法吗？

2) 当 C 程序尝试使用对象的结构部分时，这会产生什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:05:35.047

由于它`ImportantStruct`是一个 POD 结构（它自动具有标准布局），并且由于 ObjectType 没有其他基本类型，并且如果它没有虚拟方法，它也具有标准布局。因此，它可以用作 C 中的结构。

> 1）这甚至合法吗？

是的。

> 2) 当 C 程序尝试使用对象的结构部分时，这会产生什么问题？

如果您的 c 函数不尝试覆盖它，那么您是安全的。你可以像这样覆盖它：

```
void foo( struct ImportantStruct *s )
{
 memset( s,0, sizeof(*s) );
} 
```

如果是，则取决于重要结构中的内容以及是否有填充字节。

像这样的结构：

```
typedef struct {
  int a;
  char b;
} ImportantStruct; 
```

制作基类时可能会删除填充字节。

无论如何，我会使用组合，并避免任何类型的问题。但是您必须确保它是第一个成员，并且 ObjectType 具有标准布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:42:03.213

派生的方法应该有效，只需注意结果对齐。我不会对“扩展”POD 中的结果大小/偏移量做出假设。一些编译器可能会删除基类的填充。因此派生的 C++ POD 可能与 resp 的大小不同。扩展平面 C 结构。

有关派生对象布局的更多详细信息：[c-data-alignment-member-order-inheritance](https://stackoverflow.com/questions/2006504/c-data-alignment-member-order-inheritance)

此外，出于扩展 POD 的目的，您可以使用`struct`关键字 over `class`。差别不大，只是结构成员默认是公共的。它也表达了你的 POD 意图（尽管它没有被强制执行）。

# content-management-system - 没有 PHP 或许可 CMS 的动态内容

> ID：13295753
> 
> 赞同：0
> 
> 时间：2012-11-08T18:52:01.487
> 
> 标签：content-management-system

我正在为我们的内部团队建立一个设计库。我可以手动编写所有代码，甚至引入一些客户端包含来处理导航菜单之类的东西，但在某些时候，我认为能够动态地提供一些内容会更容易。

我不想实现 Drupal 或任何类似的东西，因为我只是不想 (a) 引入管理带来的噩梦，并且 (b) 必须符合他们关于如何构建我想要的东西的定义/结构建造。

以下是我想要做的一些示例......在某处有一个列出一组小部件的数组，并在页面上显示该数组。单击其中一个将带您进入有关该小部件的库页面。单独的页面可以很容易地手写——我只想获取一些需要出现在多个页面上的列表和数据（但总是相同的），并呈现这些内容。

我想要的另一个元素是协作——允许人们在页面上添加评论。

所以我很想知道我是否只需要接受它并使用 CMS，或者这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:21:23.503

到目前为止，答案是 javascript 和 json 文件，尽管我也在考虑使用类似 mustache 的东西。

# javascript - jQuery从ajax加载表并自动更新

> ID：13295756
> 
> 赞同：0
> 
> 时间：2012-11-08T18:52:08.770
> 
> 标签：javascript, jquery, ajax, html-table

我一直在谷歌上寻找这个问题的解决方案，但我要么在寻找错误的东西，要么找不到满足我需求的东西。

我需要一个 jQuery 表格插件或可以完成以下任务的相应功能：

*   通过 AJAX 加载表格内容
*   自动分页
*   列排序
*   自动更新超时（每隔一段时间，与 AJAX 交谈并仅更新已更改或需要添加的行）**<-- 这是最重要的。**

我假设它的实现类似于：

```
<table class="autoTable">
    <thead>
        <tr>
            <th>Custom Row Name 1</th>
            <th>Custom Row Name 2</th>
            <th>Custom Row Name 3</th>
            <th>Custom Row Name 4</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

和类似的东西：

```
$('.autoTable').each(function() {
    $(this).autoTable({
        timeout: 500
        url:     "ajax/test.json"
    });
}); 
```

它使用 JSON 值，例如：

```
[
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    },
    {
        "row1": "Lorem",
        "row2": "Ipsum",
        "row3": "Dolor",
        "row4": "Sit"
    }

] 
```

希望你知道一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:59:15.827

你应该看看这里，我知道的 jquery 中最好的数据网格：[http ://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:01:04.450

有**[DataTables](http://datatables.net/)** *，它* 可以满足您的前三个要求，但我非常怀疑您的最后一个要求是否有现成的解决方案。虽然相当复杂，但我（个人）发现 DataTables 的自定义开发文档杂乱无章且难以理解。

# jquery - Jquery Tooltip onShow 函数

> ID：13295758
> 
> 赞同：1
> 
> 时间：2012-11-08T18:52:19.833
> 
> 标签：jquery, jquery-tools, jquery-tooltip

我正在尝试在工具提示 onShow 事件中使用一个函数。我确信它简单明了，但我就是无法让它工作。我在这里想念什么？

```
$("input[title]").tooltip({
    onShow: function() {
        $('.tooltip').css({'cursor':'crosshair', 'border-style':'dashed'}).click(function () {
            alert();
        });
    },
    offset: [120, 0]
}); 
```

[http://jsfiddle.net/aya3C/1/](http://jsfiddle.net/aya3C/1/)

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:07:23.483

`click()`事件被工具提示插件覆盖。尝试`mousedown()`改用。

见那里：http: [//jsfiddle.net/aya3C/2/](http://jsfiddle.net/aya3C/2/)

# javascript - 无法执行 jQuery 函数，因为在页面加载后加载了表格

> ID：13295760
> 
> 赞同：0
> 
> 时间：2012-11-08T18:52:21.760
> 
> 标签：javascript, jquery, html-table

我的搜索被证明是徒劳的，我希望有人能给我一些帮助。我对javascripting也很陌生。

我已经建立了一个由几个 DIV 标签组成的网站，中间有一个 iFRAME。我已经设置了一个 Javascript，它在 iframe 的 HTML 页面中加载一个表格。每行的第一个单元格包含一个名称。

我希望能够单击每一行并返回第一个单元格中的名称。现在我一直在使用警报功能来确定我的代码是否正常工作。

这是我的 iframe 源代码：

```
<script type="text/javascript" src="./cgi-bin/jquery-1.8.2.min.js"></script>
<script language="Javascript">
function xmlhttpGetVMList(strURL) {
   var xmlHttpReqVMList = false;
   var self = this;
   // Mozilla/Safari/Chrome
   if (window.XMLHttpRequest) {
    self.xmlHttpReqVMList = new XMLHttpRequest();
   }
   //IE
   else if (window.ActiveXObject) {
    self.xmlHttpReqVMList = new ActiveXObject("Microsoft.XMLHTTP");
   }
   self.xmlHttpReqVMList.open('GET', strURL, true);
   self.xmlHttpReqVMList.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
   self.xmlHttpReqVMList.onreadystatechange = function() {
    if (self.xmlHttpReqVMList.readyState == 4) {
       updatepage(self.xmlHttpReqVMList.responseText);
    }
   }
   self.xmlHttpReqVMList.send(null);
}

function updatepage(str) {
   document.getElementById("result").innerHTML = str;
}

$("#result").ready(function() {
JavaScript:xmlhttpGetVMList("./cgi-bin/db_list_vm.cgi");

//alert('Script DIV loaded');  // <-- useful to confirm the event has completed.
});

$("#result").ready(function () {
var table = document.getElementById('VMList'),
    cells = table.getElementByTagName('td');

for (var i=0,len=cells.length; i<len; i++){
   cells[i].onclick = function() {
    alert(this.innerText);
    }
}
});

</script>

<html>
<head>
<link href="./styles/default.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="countleft"></div>
<div id="countright"> <b>VM Count: </b></div>
<br>
<br>
<form name="f1">
<div id="result">Loading ......<img src="./images/loading.gif" alt="loading"></img></div>
</form>

</body>
</html> 
```

上面的代码运行并使用以下内容填充DIV ID结果的innerText：

```
<table id="VMList">
<thead>
<tr>
<th class="vmname">VMName</th>
<th class="ipaddr">IP Address</th>
<th class="FQDN">FQDN</th>
<th class="Team">Team Name</th>
<th class="Owner">Owner</th>
</tr>
</thead>
<tbody>
<tr id="vmname">
<td class="vmname">SomeName</td>
<td class="ipaddr">PlaceHolder</td>
<td class="FQDN">PlaceHolder</td>
<td class="Team">PlaceHolder</td>
<td class="Owner">PlaceHolder</td>
</tr></tbody></table></div> 
```

使每一行可点击的我的脚本部分似乎不起作用。我相信这是因为代码在 Javascript 完成创建表之前运行。

在创建表后，我正在寻求帮助让此代码工作：

```
$("#result").ready(function () {
var table = document.getElementById('VMList'),
    cells = table.getElementByTagName('td');

for (var i=0,len=cells.length; i<len; i++){
   cells[i].onclick = function() {
    alert(this.innerText);
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:50:08.547

如何使用 $(document).ready 代替？此外，我们使用点击进行 Ajax 调用（或触发器）。

# ios - glTexImage2D 导致 GL_INVALID_OPERATION

> ID：13295761
> 
> 赞同：6
> 
> 时间：2012-11-08T18:52:24.410
> 
> 标签：ios, opengl-es

这是我的（包装的）OpenGL调用，它导致`GL_INVALID_OPERATION`：

```
GLTextures.TexImage2D(TexImage2DTarget.TEXTURE_2D, 0, TexImageInternalFormat.LUMINANCE_ALPHA, Width, Height, TexImageFormat.LUMINANCE_ALPHA, TexImagePixelType.UNSIGNED_BYTE, source.GetData()); 
```

此调用适用于 Windows 但不适用于 iOS，在 Windows 中一切正常并显示纹理。我在 iOS 和 Windows 上使用相同的枚举值，甚至着色器也是相同的（在 iOS 上有一些精确提示）。大多数纹理也适用于 iOS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:13:34.287

亮度 alpha 纹理使用*LATC*纹理压缩。

而且因为 iPhone 不支持`EXT_texture_compression_latc`扩展，所以你不能在 iPhone 上使用*LATC*纹理。

更多信息：

[http://www.opengl.org/registry/specs/EXT/texture_compression_latc.txt](http://www.opengl.org/registry/specs/EXT/texture_compression_latc.txt)

[http://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro25&D=Apple+iPhone+5&testgroup=gl](http://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro25&D=Apple+iPhone+5&testgroup=gl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T13:43:04.867

我通过考虑它在桌面上运行但不在 iOS 上的事实发现了这个问题。当格式不同但 Apple 的 OpenGL ES 2.0 实现不支持这一点时，使用 a`format`和和 的OpenGL 纹理被 AFAIK 从一种格式转换为另一种格式。`internal format`

我想到这可能是不工作的纹理和`GL_INVALID_OPERATION`. 我检查了我的枚举，发现`LUMINANCE_ALPHA`in one enum 的定义没有分配任何值，只是使用了 + 1 之前的定义编号。OpenGL 在桌面上忽略了这一点，因为该数字一直是有效的纹理格式，在 iOS 上它失败了。

# ios - 检测 UIWebView 的滚动视图 contentSize 的变化

> ID：13295762
> 
> 赞同：16
> 
> 时间：2012-11-08T18:52:25.407
> 
> 标签：ios, user-interface, uiscrollview, contentsize

我试图在 UIScrollView 的内容底部设置一个 UIView，这样做我将视图的位置设置为滚动视图的 contentsize 高度。但是我的滚动视图是 UIWebView 的子视图，因此当加载图像时，内容大小的高度会发生变化，而我应该位于滚动视图底部的视图最终会出现在中间......

所以我正在寻找一种在滚动视图的内容大小发生变化时得到通知的方法。我尝试将其子类化并更改 contentsize 的设置器以发送 NSNotification：

```
@implementation UIScrollView (Height)

-(void)setContentSize:(CGSize)contentSize
{
    _contentSize=contentSize;
    [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"scrollViewContentSizeChanged" object:nil]];
}

@end 
```

但是在编译时我得到并错误地说：

> “_OBJC_IVAR_$_UIScrollView._contentSize”，引用自：-[UIScrollView(Heigth) setContentSize:] in MyClass.old：未找到架构 armv7 的符号

知道 setter 应该如何被子类化吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-08T19:04:56.770

也许您可以使用键值观察 (KVO) 来检测内容大小的变化。我没试过，但代码应该是这样的：

```
static int kObservingContentSizeChangesContext;

- (void)startObservingContentSizeChangesInWebView:(UIWebView *)webView {
    [webView.scrollView addObserver:self forKeyPath:@"contentSize" options:0 context:&kObservingContentSizeChangesContext];
}

- (void)stopObservingContentSizeChangesInWebView:(UIWebView *)webView {
    [webView.scrollView removeObserver:self forKeyPath:@"contentSize" context:&kObservingContentSizeChangesContext];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if (context == &kObservingContentSizeChangesContext) {
        UIScrollView *scrollView = object;
        NSLog(@"%@ contentSize changed to %@", scrollView, NSStringFromCGSize(scrollView.contentSize));
    } else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

如果这不起作用，您可能需要调整`setContentSize:`方法。方法调配让您的替换方法调用原始方法，这是您将新内容大小传递给滚动视图所需要做的事情。

您可以在此处阅读有关方法调配的更多信息：http: [//www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html](http://www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html)

我认为这是最流行的调酒代码：[https ://github.com/rentzsch/jrswizzle](https://github.com/rentzsch/jrswizzle)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:12:23.063

你的方法对了一半。您当然可以通过类别覆盖现有方法，但您不能做的是访问该类的 ivar。

在这种情况下，您需要的是方法调配：您在覆盖`setContentSize`的同时保留对该方法的原始实现的引用，因此您可以调用它来设置`_contentSize`值。

这是您可以使用的代码，带有注释：

```
@implementation UIScrollView (Height)

// -- this method is a generic swizzling workhorse
// -- it will swap one method impl with another and keep the old one
// under your own impl name
+ (void)swizzleMethod:(SEL)originalSel andMethod:(SEL)swizzledSel {

  Method original = class_getInstanceMethod(self, originalSel);
  Method swizzled = class_getInstanceMethod(self, swizzledSel);
  if (original && swizzled)
     method_exchangeImplementations(original, swizzled);
  else
    NSLog(@"Swizzling Fault: methods not found.");

}    

//-- this is called on the very moment when the categoty is loaded
//-- and it will ensure the swizzling is done; as you see, I am swapping
//-- setContentSize and setContentSizeSwizzled;
+ (void)load {
  [self swizzleMethod:@selector(setContentSize:) andMethod:@selector(setContentSizeSwizzled:)];
}

//-- this is my setContentSizeSwizzled implementation;
//-- I can still call the original implementation of the method
//-- which will be avaiable (*after swizzling*) as setContentSizeSwizzled
//-- this is a bit counterintuitive, but correct!
- (void)setContentSizeSwizzled:(CGSize)contentSize
{
  [self setContentSizeSwizzled:contentSize];
  [[NSNotificationCenter defaultCenter] postNotification:[NSNotification    notificationWithName:@"scrollViewContentSizeChanged" object:nil]];
}

@end 
```

希望能帮助到你。

# java - 从 web 下载的图像在列表视图中的行更小，因为它应该是

> ID：13295763
> 
> 赞同：1
> 
> 时间：2012-11-08T18:52:30.800
> 
> 标签：java, android, listview, android-imageview, universal-image-loader

我有一个 lisview，每一行都在自己的 xml 文件中定义：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="120dip"
android:padding="6dip" >

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:duplicateParentState="true"
    android:scaleType="fitCenter" />

<TextView
    android:id="@+id/ime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/icon"
    android:layout_below="@+id/icon"
    android:layout_marginTop="19dp"
    android:text="TextView" />

<TextView
    android:id="@+id/cena1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/icon"
    android:layout_marginLeft="56dp"
    android:layout_toRightOf="@+id/ime"
    android:text="TextView" />

<Button
    android:id="@+id/gumb_klic"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/ime"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="25dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="10dip"
    android:background="@drawable/call_button"
    android:focusable="false"
    android:focusableInTouchMode="false" />

<TextView
    android:id="@+id/razdalja"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/ime"
    android:layout_alignBottom="@+id/ime"
    android:layout_alignLeft="@+id/cena1"
    android:layout_marginTop="10dip"
    android:text="TextView" />

<TextView
    android:id="@+id/cena2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/cena1"
    android:layout_centerVertical="true"
    android:text="TextView" />

  </RelativeLayout> 
```

在 Eclipse 布局编辑器中，它看起来像这样（好的）：

![在此处输入图像描述](../Images/e4ed7f1e127b57a28ce7e7a9a1c1ab79.png)

要在每一行中下载 imageview (@+id/icon) 的图像，我使用通用图像加载器库 ( [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) )。问题是当图像被下载时，它应该更小，而且行也更小。如果我放置与从资源下载的相同图像，则在下载完成之前一切都很好，然后图像变小并且行也变小。

我的布局有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:00:50.787

乍一看，我认为这是因为您已将 scaleType 设置为“fitCenter”并为您的布局高度定义了一个绝对值。您的图像正在缩放以适合 120dip 减去填充。

```
<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_above="@+id/icon"
    android:scaleType="centerInside" />

<TextView
    android:id="@+id/ime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/icon"
    android:layout_alignParentBottom="true"
    android:layout_marginTop="19dp"
    android:text="TextView" /> 
```

# c# - 同一列上的多个多对一连接错误地导致执行 SELECT

> ID：13295765
> 
> 赞同：7
> 
> 时间：2012-11-08T18:52:36.080
> 
> 标签：c#, nhibernate

我有一个看起来像这样的类：

```
[Class(Table = "SessionReportSummaries", Mutable = false)]
public class SessionReportSummaries
{        
    [ManyToOne(Column = "ClientId", Fetch = FetchMode.Join)]
    public Client Client { get; private set; }

    [ManyToOne(Column = "ClientId", Fetch = FetchMode.Join)]
    public ClientReportSummary ClientReportSummary { get; private set; }
} 
```

SessionReportSummaries 视图有一个 ClientId 列，我正在尝试使用此列加入一个 Client 对象和一个 ClientReportSummary 对象。

不幸的是，NHibernate 只想加入类中定义的第一个，并且总是为第二个执行 SELECT。所以在这种情况下，NHibernate 首先查询数据库：

```
SELECT {stuff} FROM SessionReportSummaries ... left outer join Clients on this.ClientId=Clients.Id ... 
```

（有很多其他连接），然后是其中的 N 个：

```
SELECT {stuff} FROM ClientReportSummary WHERE ClientReportSummary.ClientId = '{id goes here}' 
```

有问题的 N 个客户中的每一个都有一个。这会导致糟糕的性能。

如果我交换 Client 和 ClientReportSummary 对象的位置，则 NHibernate 将 ClientReportSummary 加入 SessionReportSummaries 对象，并为每个 Client 对象执行选择。

有谁知道我怎样才能让 NHibernate 为这两者执行连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:40:23.113

NHibernate 将在单个查询中仅采用一个**相同的列映射。**所以，因为有两个不同的实体通过列属性映射到值“ClientId”：

*   [ManyToOne(Column = "ClientId", Fetch = FetchMode.Join)]
*   [ManyToOne(Column = "ClientId", Fetch = FetchMode.Join)]

在这种情况下，不授予列映射​​的唯一性。当插入或更新两个实体时，它可能会造成损坏。但是我们可以使用一个技巧：`FORMULA`映射

```
[Class(Table = "SessionReportSummaries", Mutable = false)]
public class SessionReportSummaries
{        
    [ManyToOne(Column = "ClientId", Fetch = FetchMode.Join)]
    public Client Client { get; private set; }

    [ManyToOne(Formula = "ClientId", Fetch = FetchMode.Join)]
    public ClientReportSummary ClientReportSummary { get; private set; }
} 
```

现在 NHibernate 将把一个列映射作为真正的关系，并将第二个（定义在 中`formula`）作为不同的关系。现在将使用单个选择语句

无论何时`formula`用于映射（而不是`column`），都应标记为`insert="false"`和`update="false"`。我们只需要它来进行 SELECT。（否则我们可以将具有不同 ClientId 的 Client 和 ClientReportSummary 附加到 SessionReportSummaries 实体 - 这将违反异常......

*第二种方法可能是一对一映射，其中“ClientId”预计在所有三个表中都是相同的......但这是另一个主题*

# wordpress - Woocommerce：从类别添加产品后自动重定向到购物车

> ID：13295766
> 
> 赞同：21
> 
> 时间：2012-11-08T18:52:36.923
> 
> 标签：wordpress, woocommerce

[http://www.passgotutoring.com/shop/product-category/ucla/ucla-14a/](http://www.passgotutoring.com/shop/product-category/ucla/ucla-14a/)

我试图在客户端“添加到购物车”我们位于左侧的一个类后立即自动重定向到 WP_Cart。

我的大多数客户购买产品，立即付款，所以我不需要真正让他们继续购物或其他任何事情。

当我希望他们直接去结账时，我尝试将此代码输入到我的主题的 function.php 中，但没有成功。

```
add_action('init','woocommerce_go_to_checkout_action',30);
function woocommerce_go_to_checkout_action(){
if ( empty( $_REQUEST['add-to-cart'] ) || sizeof($woocommerce->cart->get_cart())==0) )
    return; wp_safe_redirect( $woocommerce->cart->get_checkout_url() );
} 
```

关于如何让它工作的任何想法？1\. 我希望它去购物车而不是结帐。2\. 试了`checkbox`目录页的方法，还是不行。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-02-11T08:20:46.190

在 WooCommerce`3.x`中，您将在以下位置找到此设置：

**WooCommerce > 设置 > 产品 > 常规 > 添加到购物车行为 > [✓] 成功添加后重定向到购物车页面**

* * *

在 WooCommerce`2.3`中，您将在以下位置找到此设置：

**WooCommerce > 设置 > 产品 > 显示 > [✓] 成功添加后重定向到购物车页面**

* * *

在 WooCommerce`2.1`中，您将在以下位置找到此设置：

**WooCommerce > 设置 > 产品 > [✓] 添加成功后重定向到购物车页面**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T06:47:58.190

尝试取消选中此..

WooCommerce > 设置 > 常规 > 脚本 > [✓] 在产品档案中启用 AJAX 添加到购物车按钮

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T10:04:42.670

WooCommerce 设置 | 目录 | 目录选项 | 加入购物车 | 请勾选“添加成功后添加到购物车重定向到购物车页面”选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T20:52:24.907

在 WooCommerce 2.1.8 中，您会在... WooCommerce 设置 | 下找到此设置。产品 | 在档案上启用 AJAX 添加到购物车按钮

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-26T12:48:01.300

在 WooCommerce 2.3.11 中，您会在...下找到此设置

**WooCommerce > 设置 > 产品 > 显示 > 添加到购物车行为 > [✓] 成功添加后重定向到购物车页面**

[文档](http://docs.woothemes.com/document/configuring-woocommerce-settings/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-24T11:48:52.657

使用过滤器挂钩，您可以使用以下代码段。

```
add_filter('woocommerce_add_to_cart_redirect', 'change_woocommerce_add_to_cart_redirect_url');
function change_woocommerce_add_to_cart_redirect_url($url){
    $url = wc_get_cart_url();
    return $url;
} 
```

代码进入您的子主题或活动主题的 functions.php 文件。测试和工作。

# c - 使用 Netbeans/gdb 调试 C 会立即以 SIGSEGV 终止？

> ID：13295767
> 
> 赞同：2
> 
> 时间：2012-11-08T18:52:37.250
> 
> 标签：c, debugging, netbeans, gdb, segmentation-fault

在 Ubuntu 上的 Netbeans 中使用 C 语言进行开发时，在开发的某个阶段，在 Netbeans 调试器（使用 gdb）中启动程序变得不可能。启动调试过程甚至未能执行`main`函数的第一行。即使是第一行的断点也无济于事。进程在断点被命中之前崩溃。

状态栏中显示的消息：

**程序由信号 SIGSEGV 终止**

该程序在调试器之外运行得很好，并且直接使用 gdb 调试程序（没有 Netbeans 包装它）也可以正常工作。

我已经想出了如何解决这个问题（见下文），但无论如何我都会发布这个问题，以便其他人在遇到同样的问题时会找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:52:37.250

原来我设置的“手表”是罪魁祸首。当我将它们全部删除时，调试正常进行。

我不确定哪个手表是导致问题的手表。至少有一个函数调用在错误的时间调用时可能会出现段错误。这是我最怀疑的一个。

我想条件断点的不幸条件会导致类似的行为。

希望这可以帮助！

# wordpress - WP the_content() 未显示在自定义帖子类型的单个模板中

> ID：13295769
> 
> 赞同：2
> 
> 时间：2012-11-08T18:52:42.243
> 
> 标签：wordpress, wysiwyg, custom-post-type

`single-posttype.php`我的 Word Press模板有这个非常奇怪的错误。模板呈现除 WYSIWYG 类型以外的任何字段。

所以首先它没有呈现`the_content()`，所以我创建了自定义字段来测试，如果它只是一个文本区域、文本字段、布尔值或其他什么，模板就会呈现它。但只要该字段是所见即所得并包含段落，该字段就不会显示。

基本上我`single-posttype.php`有

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
  <?php the_content(); ?>
<?php endwhile; endif; ?> 
```

此帖子类型支持编辑器。

`single-post.php`和其他模板正确显示所有内容。有任何想法吗？

**更新（解决方法）：**

所以我没有找到任何合适的解决方案来解决这个问题，这就是为什么我不得不想出一个解决方法。由于`the_content()`函数和过滤器都不会在我的模板中呈现内容文本，因此我使用原始内容`get_the_content()`（仍然包含 html 标签，如`<h1>`）并应用于`str_replace()`添加`<br />`而不是换行符。在 CSS 中，我以与段落相同的方式设置此内容 div 的样式，并在模板中获得相同的最终外观。这是内容的代码（基于 php.net 的示例）：

```
 $str = get_the_content();
 $order   = array("\r\n", "\n", "\r");
 $replace = '<br />';

 $newstr = str_replace($order, $replace, $str);
 echo $newstr; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:24:15.437

尝试在您的帖子类型循环之前放置一个`<?php wp_reset_query(); ?>`，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T04:50:57.490

Try to specify in the arguments of WP Query your custom post type name. Because custom post type posts are not posts.

```
$my_query->query(array('post_type' => 'CPT_name', 'post__in' => array($p))); 
```

[the_content is displaying nothing for a costum post type](https://stackoverflow.com/questions/16228846/the-content-is-displaying-nothing-for-a-costum-post-type)

# delphi - 如何计算“左”属性以使 DBGrid 单元格中的文本居中？

> ID：13295770
> 
> 赞同：4
> 
> 时间：2012-11-08T18:52:41.960
> 
> 标签：delphi, delphi-2006

继续项目开始于：

[如何根据其内容自动调整/缩放 DBGrid 的（或其他类似的）列宽？](https://stackoverflow.com/questions/13292937/how-to-auto-fit-dbgrid-or-other-similar-columns-with-its-contents)

**如何计算“左”属性以使 DBGrid 单元格中的文本居中？**

当我们调用 OnDrawColumnCell 并使用 Canvas 写一个文本来代替网格的默认绘制时，我们要如何计算文本在单元格上居中的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T19:02:33.917

不。[`DrawText`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498(v=vs.85).aspx)用/绘制文本并在格式参数中[`DrawTextEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162499(v=vs.85).aspx)指定。`DT_CENTER`另请参阅[在 rect 的中心绘制多行文本](https://stackoverflow.com/questions/7007280/delphi-draw-text-multiline-in-the-centre-of-a-rect)。

或者，如果您想或需要自己计算：

```
procedure DrawCenteredText(Canvas: TCanvas; const S: String; R: TRect);
var
  Left: Integer;
begin
  Left := R.Left + (R.Right - R.Left - Canvas.TextWidth(S)) div 2; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T19:14:16.237

具有更多可能性的更简单方法是：

```
Canvas.TextRect(Rect,s,[tfCenter,tfVerticalCenter,tfSingleLine]); 
```

# build - 在 Jenkins（MacOSX 服务器）上构建 iOS 应用程序时出错

> ID：13295773
> 
> 赞同：1
> 
> 时间：2012-11-08T18:52:51.913
> 
> 标签：build, jenkins, provisioning-profile

我的 Jenkins 构建工作失败并显示以下消息

```
=== BUILD NATIVE TARGET MyTarget OF PROJECT MyProject WITH CONFIGURATION Debug ===
Check dependencies
Code Sign error: A valid provisioning profile matching the application's Identifier 'MyCompany.MyProjet' could not be found 
```

现在，如果我尝试使用选定的方案以 jenkins 用户身份运行 xcodebuild 命令：

```
/usr/bin/xcodebuild -target MyTarget -configuration Debug clean build 
```

或这个

```
/usr/bin/xcodebuild -scheme MyAwesomeScheme clean build 
```

我得到了同样的错误，但是如果我作为另一个用户（我的系统主用户）执行它，构建成功完成！！！它也适用于 Xcode。

在我修复了在登录和系统钥匙串组中复制我的证书的另一个代码签名错误后，此错误开始出现。

**看起来*jenkins*用户无法访问配置文件。知道如何解决吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T04:56:32.663

您需要`~/Library/MobileDevice/Provisioning Profiles/`为 Jenkins 用户创建目录。

接下来，将 .mobileprovision 文件复制到该目录中。

最后，在 Target 构建设置中设置配置文件。“自动配置文件选择器”不适用于 xcodebuild。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:40:59.210

在这里找到了一个可能的解决方案[http://code-dojo.blogspot.co.uk/2012/09/fix-ios-code-signing-issue-when-using.html](http://code-dojo.blogspot.co.uk/2012/09/fix-ios-code-signing-issue-when-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T14:53:42.740

@Luke 你的回答帮助我更进一步。

`Code Signing Identity`我必须使用整个配置文件设置字段（例如 iPhoneDeveloper: NameSurname (XXXXXXXXX) ）+ 在`Embedded Profile`字段中设置 .mobileprovision 文件的完整路径（/Users/username/Library/MobileDevice/Provisioning Profiles/test.mobileprovision）

我当前的 Jenkins 版本是 1.549

# ruby - Ruby Koans #75 test_constants_become_symbols，正确答案？

> ID：13295776
> 
> 赞同：12
> 
> 时间：2012-11-08T18:52:55.917
> 
> 标签：ruby, symbols

我的问题建立在这个问题之上：[Ruby Koan: Constants become symbols](https://stackoverflow.com/questions/5358727/ruby-koan-constants-become-symbols)。我有以下代码：

```
in_ruby_version("mri") do
  RubyConstant = "What is the sound of one hand clapping?"
  def test_constants_become_symbols
    all_symbols = Symbol.all_symbols

    assert_equal __, all_symbols.include?(__)
  end
end 
```

正确答案应该是以下吗？

```
 assert_equal true, all_symbols.include?("RubyConstant".to_sym) 
```

我知道我不应该这样做：

```
 assert_equal true, all_symbols.include?(:RubyConstant) 
```

因为那时我可以把任何东西放在那里，它仍然是真的

```
 assert_equal true, all_symbols.include?(:DoesNotMatter) 
```

提前为简单的“是或否”问题道歉。我很想知道“正确”的答案是什么。我宁愿在我上面提到的上一篇文章的评论中问这个问题，但我不能不单独发帖。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-13T09:11:20.090

这是我得到的：

```
in_ruby_version("mri") do
  RubyConstant = "What is the sound of one hand clapping?"
  def test_constants_become_symbols
    all_symbols_as_strings = Symbol.all_symbols.map { |x| x.to_s }

    assert_equal true, all_symbols_as_strings.include?("RubyConstant")
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T19:02:57.777

`Symbol.all_symbols`包含被引用的每个符号——变量名、类名、常量名、实际符号。这个变量实际上包含的是实现定义的，但是在 Ruby MRI 中，许多符号已经在这个列表中。

```
irb(main):001:0> Constant = 42
=> 42
irb(main):002:0> Symbol.all_symbols
=> [:"", :"<IFUNC>", :"<CFUNC>", :respond_to?,  ..., :irb_exit_org, :Constant] 
```

但现在，有一个问题。

```
Symbol.all_symbols.include?(:DoesNotMatter) 
```

在您运行此代码之前，`:DoesNotMatter`它不存在于 中`all_symbols`，但它仍然存在。好吧，实际上当您使用符号文字时，它被插入到`Symbol.all_symbols`（除非它已经存在）。所以，在你调用之前，符号就已经在这里了`.include?`。

编辑：Gregory Brown 建议采用以下解决方法。它之所以有效，是因为在 Ruby 中`Symbol.all_symbols`出于某种原因分配了副本变量，而不是复制对变量的引用。

```
irb(main):001:0> symbols = Symbol.all_symbols; 1
=> 1
irb(main):002:0> symbols.include? :something
=> false
irb(main):003:0> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T23:48:58.400

*注意：以下答案仅适用于 irb 等环境，其中 Ruby 代码逐行执行。在文件中执行代码时，Ruby 在执行任何操作之前都会扫描整个文件中的符号，因此以下详细信息并不准确。我没有删除这个答案，因为它暴露了一个有趣的边缘案例，但请参阅[@GlichMr](https://stackoverflow.com/a/13295929/289274)的答案以获得对问题的更好解释。*

您可以安全地执行以下操作，因为`Symbol.all_symbols`返回符号数组的副本，而不是引用。

```
assert_equal true, all_symbols.include?(:RubyConstant) 
```

我认为这是对公案的预期答案，这就是为什么`all_symbols`定义而不是`Symbol.all_symbols`直接调用的原因。有关一些证据，请参见以下内容：

```
>> X = 1
=> 1
>> all_symbols = Symbol.all_symbols; nil
=> nil
>> Y = 2
=> 2
>> all_symbols.include?(:X)
=> true
>> all_symbols.include?(:Y)
=> false 
```

使用`String#to_sym`可以`Symbol.all_symbols`直接进行这些调用，但不是解决这个公案所必需的。

# selenium-ide - Firefox，Selenium IDE - 在自动关闭之前等待弹出窗口加载

> ID：13295780
> 
> 赞同：1
> 
> 时间：2012-11-08T18:53:01.820
> 
> 标签：selenium-ide

我有一个弹出窗口，在提交后加载然后自动关闭，然后加载父窗口。我的问题是确保 Selenium 等到弹出窗口完成加载、关闭并且父窗口完成加载。

在慢速下，以下代码可以确保我们等到弹出窗口加载：

```
<!--OK button.-->
<tr>
    <td>click</td>
    <td>name=_action</td>
    <td></td>
</tr>
<tr>
    <td>waitForFrameToLoad</td>
    <td>null</td>
    <td></td>
</tr>
<!--Pop up closes. Back to parent window.--> 
```

在快速运行时，以下代码有效，因为它转到下一个命令，因此需要告诉它等待弹出窗口完成加载：

```
<!--OK button.-->
<tr>
    <td>click</td>
    <td>name=_action</td>
    <td></td>
</tr>
<tr>
    <td>waitForElementNotPresent</td>
    <td>id=head_check</td>
    <td></td>
</tr>
<tr>
    <td>waitForFrameToLoad</td>
    <td>null</td>
    <td></td>
</tr>
<!--Pop up closes. Back to parent window.--> 
```

我的问题是我无法控制用户是以慢速还是快速运行脚本，如果我尝试 waitForElementNotPresent，慢速会导致错误：

```
[error] modifyWindow: Window was closed! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:48:02.330

由于慢速有效，我们可以通过添加暂停在它中断的唯一一步“减慢”快速速度：

```
<tr>
    <td>pause</td>
    <td>5000</td>
    <td></td>
</tr> 
```

# mdi - 获取活动的 MDI 子窗口

> ID：13295787
> 
> 赞同：0
> 
> 时间：2012-11-08T18:53:42.280
> 
> 标签：mdi, wtl

如何从主框架获取活动子框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:34:11.840

`MDIGetActive`方法让你得到`HWND`你需要的。

# c - 二叉树递归函数

> ID：13295794
> 
> 赞同：1
> 
> 时间：2012-11-08T18:54:07.093
> 
> 标签：c, recursion, binary-tree

我需要打印出一个看起来像这样的二叉树：

```
--------x-------
----x-------x---
--x---x---x---x-
-x-x-x-x-x-x-x-x 
xxxxxxxxxxxxxxxx 
```

使用递归打印除第一行外的行的左侧和行的右侧。所以该函数会调用一个带有左起点和右终点参数的显示函数。然后它会调用自己两次，一次调用左侧，一次调用右侧。

```
 #include <stdio.h>

#define LENGTH 16

void makeBranches(int, int);
void display(int, int);

int main(){

  makeBranches(0, LENGTH-1);
}

void makeBranches(int left, int right){

  if(left >= right){
    return;
  } else{
    display(left, right);
      makeBranches(left, (right+left)/2);
      makeBranches((right+left)/2+1, right);  
  }
}

void display(int left, int right){
  int mid = (left+right)/2;
  int i;

  for(i = left; i <= right; i++){
    if(i == mid)
      printf("X");
    else
      printf("-");
  }

  if(right == LENGTH-1)
    printf("\n");

} 
```

这就是我的代码目前的样子，尽管它已经改变了很多次。

我不知道如何让 makeBranches 的第一次调用执行然后第二次调用。现在它只做左边的调用，看起来像这样：

```
-------X--------
---X-----X--X- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:03:11.407

您将需要进行[广度优先遍历](http://en.wikipedia.org/wiki/Breadth-first_search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:19:33.190

如您所见，您的问题在于调用递归函数的结构树。为了防止这种类型的行为，您需要实现一个设计，在打印任何内容之前扫描整个树。

您现在的调用结构如下所示：

```
makeBranches(left,right) -> 
  makeBranches(left, (right+left)/2) ->
    makeBranches(left, ((right+left)/2+left)/2) ->
      makeBranches(left, (((right+left)/2+left)/2+left)/2) -> etc.
  makeBranches((right+left)/2+1,right) ->
    makeBranches((right+(right+left)/2+1)/2+1,right) ->
      makeBranches((right+(right+(right+(right+left)/2+1)/2+1)/2+1)/2+1,right) -> etc. 
```

为了解决这个问题，您应该做的是在打印之前捕获每个级别。为此，您需要某种形式的集合，例如为每一侧添加链接列表，然后一旦扫描整个树，您就可以重建绘图。

在您的`display`函数中，您已经创建了一个检查以了解这是行的左侧还是右侧：

```
if(right == LENGTH-1)
    printf("\n"); 
```

所以让我们修改显示调用。

```
void display(int left, int right){
  int mid = (left+right)/2;
  int i;
  string thisLine = "";

  for(i = left; i <= right; i++){
    if(i == mid)
      thisLine += "X";
    else
      thisLine += "-";
  }

  if(right == LENGTH-1) {
    rightList.add(thisLine);
  } else {
    leftList.add(thisLine);
  }
} 
```

现在，`main()`在构建整个树之后，打印出每个列表的每个节点`left->right->"\n"`（重复直到为空）。

您可以注意的一些警告，但可以设计的是，您第一次调用`display`创建整行，所以如果您使用我的代码，它会将它放在`right`列表中，这意味着您必须像这样绘制它`right->(left->right->"\n")repeat`

这有意义吗？我希望我没有跳过任何东西，因为我在概念上做了这一切：\

# asp.net-mvc - ASP MVC 4 - 缓存动作过滤器

> ID：13295804
> 
> 赞同：2
> 
> 时间：2012-11-08T18:54:35.657
> 
> 标签：asp.net-mvc, caching, action-filter

我有一个简单的操作过滤器属性来检查用户当前是否在线：

```
public class CheckForOnlineAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
         Membership.GetUser();
         base.OnActionExecuting(filterContext);
     }
} 
```

现在，我想将此动作缓存 12 分钟，我尝试在其上放置一个`[OutputCache(Duration=XXX)]`，但这不起作用。如何缓存此操作过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:56:20.453

请注意，持续时间以秒为单位，因此您的持续时间不是 12 而是 1200（我看到您现在已将其更改为 XXX，但我将其视为 12）

您还希望此操作包含用户参数，并因输出缓存的参数而异。

# arraylist - 如何让多个球弹起来？

> ID：13295813
> 
> 赞同：1
> 
> 时间：2012-11-08T18:55:08.067
> 
> 标签：arraylist, bounce

我需要更改 BallDemo 类中的“bounce”方法，以允许用户通过参数选择有多少弹跳球。我需要使用一个集合来存储球，并且球应该沿着默认画布的顶部排成一排。此外，当最后一个球到达画布末端时，球应该被擦除。我知道我需要对绘制、移动和擦除方法使用数组列表和 for 循环，但除此之外我被卡住了。这是我到目前为止所拥有的：

```
/**
* Simulates a chosen number of specific balls bouncing.
*/
public void bounce(int amount)
{
int ground = 400;   // position of the ground line

myCanvas.setVisible(true);

// draw the ground
myCanvas.drawLine(50, ground, 550, ground);

***ArrayList<BouncingBall> balls = new ArrayList<BouncingBall>();
for(int index; index < amount; index++)
{
  BouncingBall ball = new BouncingBall(0, 0,*** 

// make them bounce
boolean finished =  false;
while(!finished)
{
  myCanvas.wait(50);           // small delay
  ball.move();
  ball2.move();
  // stop once ball has travelled a certain distance on x axis
  if(ball.getXPosition() >= 550 && ball2.getXPosition() >= 550)
    finished = true;
}
ball.erase();
ball2.erase();
}
} 
```

现在的程序设置为让两个球弹跳，因为它一开始没有参数，它被编程为让两个弹跳球。ArrayList 和 for 循环的行是我添加的，但我被困在那里。此外，默认画布的宽度为 600，高度为 500。

# javascript - 溢出：隐藏；图像滚动

> ID：13295814
> 
> 赞同：0
> 
> 时间：2012-11-08T18:55:24.953
> 
> 标签：javascript, button, html, scroll, overflow

我有一个想法，将公共汽车窗口作为一个固定框架，大约 800 像素宽，一个视差城市，广告牌上的内容隔开，所以当你在它们之间滚动时，它可以让视差看起来像公共汽车在移动。内容将比窗口大得多，就像精灵一样，我将提出滚动的前进和后退按钮（x 数量，0）。我有一个工作视差脚本和一个粗略的 3 层城市景观，它们都可以正常工作。

我撞到了一堵墙。我试图在滚动 1000 像素后清除 scrollBy 动画。然后你再次点击它，它又是 1000 像素。这是我的功能。

```
function scrollForward() {
    window.scrollBy(5,0);
    scrollLoop = setInterval('scrollForward()',10);
} 
```

到目前为止，我只能在达到 1000 时清除它。我尝试过 1000 || 2000 等，但在第一个之后它真的很快而且不会清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:42:06.650

Excelsior [https://stackoverflow.com/users/66580/majid-fouladpour](https://stackoverflow.com/users/66580/majid-fouladpour)为其他有不同问题的人写了一段很棒的代码。这对另一个人想要的不太合适，但对我来说是完美的。

```
function scrollForward() {
    var scrolledSoFar = 0;
    var scrollStep = 75;
    var scrollEnd  = 1000;
    var timerID = setInterval(function() {
        window.scrollBy(scrollStep, 0);
        scrolledSoFar += scrollStep;
        if( scrolledSoFar >= scrollEnd ) clearInterval(timerID);
    }, 10);
}

function scrollBack() {
    var scrolledSoFar = 0;
    var scrollStep = -75;
    var scrollEnd  = -1000;
    var timerID = setInterval(function() {
        window.scrollBy(scrollStep, 0);
        scrolledSoFar += scrollStep;
        if( scrolledSoFar <= scrollEnd ) clearInterval(timerID);
    }, 10);
} 
```

现在进行第二步，弄清楚如何将此内容动画放在框架后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:48:35.060

不太清楚你在这里问什么。也许您可以提供更相关的代码？

我确实看到您的代码存在潜在问题。您调用`setInterval('scrollForward()', 10)`这将导致`scrollForward`每 10 毫秒调用一次。然而，这些调用中的每一个`scrollForward`都会创建*更多*的间隔来`scrollForward`创建一种递归的爆炸式增长。您可能希望`setTimeout`在此功能之外使用或创建间隔。

另外，顺便说一句，您可以将代码更改为简单的：`setInterval(scrollForward, 10)`. 删除引号和括号使其更易于阅读和管理。您甚至可以放置复杂的 lambda 函数，例如：

```
setInterval(function() {
   scrollForward();
   // do something else
 }, 10); 
```

**编辑：** 因此，如果您知道 scrollForward 将项目移动 10px，并且您希望它在将项目移动 1000px 后停止，那么您只需要停止它已经移动了那么多。我仍然不知道您的代码的实际结构，但它可能类似于以下内容：

```
(function() {
  var moved_by = 0;
  var interval = null;

  var scrollForward = function() {
     // move by 10px
     moved_by += 10;
     if (moved_by === 1000 && interval !== null) {
        clearInterval(interval);
     }
  };

  var interval = setInterval(scrollForward, 10);
})(); 
```

如果您想在 1000 或 2000 之后清除它，您只需`if`相应地调整语句。我希望这会有所帮助。

# window - 如何在smalltalk中创建一个窗口

> ID：13295815
> 
> 赞同：2
> 
> 时间：2012-11-08T18:55:25.847
> 
> 标签：window, smalltalk, visualworks

我正在尝试显示一个窗口，但我不断收到一条消息不理解错误。片段：

```
Window new
  label: 'Hello';
  open 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:15:59.313

你可以使用这个：

```
ScheduledWindow new
    label: 'Hello';
    open 
```

或打开更大：

```
ScheduledWindow new
    label: 'Hello';
    openIn: (20@20 extent: 300@300) 
```

但是，我怀疑这不是您真正想要做的，因为很难使用以这种方式构建的窗口。你能解释一下你想做什么吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T22:55:02.447

好的，对于这样的游戏，您想使用自定义控件。您首先为您的游戏创建 View 的子类并覆盖 displayOn: 方法来显示视图。您可以使用 ViewHolder 将视图添加到 UIPainter 画布。将 View: 属性设置为返回自定义视图的方法的名称。

要拦截鼠标点击，您需要有一个用于视图的自定义控制器。您将继承 Controller 或其子类之一来创建 Controller。View 中名为 defaultControllerClass 的方法返回控制器类的名称。在控制器中，可以拦截鼠标事件。

我建议您加载一个示例游戏以帮助您入门。打开包裹管理器，然后从列表中选择玩具。您应该在那里看到 SpiderSolitaire。这是一个为 VisualWorks 编写的游戏，它显示一个自定义视图，在该视图上做一些简单的动画，并拦截鼠标事件。这应该作为一个很好的例子来使用。

# printing - Android WiFi 协议和蓝牙堆栈版本榨汁机。

> ID：13295816
> 
> 赞同：0
> 
> 时间：2012-11-08T18:55:28.563
> 
> 标签：printing, bluetooth, stack, wifi, protocols

我正在开发一个应用程序，该应用程序将从 Android 设备打印到蓝牙和/或 Wifi 打印机（下面的设备链接），我想知道 Android 2.2 中的蓝牙堆栈和 Wifi 协议是否与 4.1-4.2 相同，或者如果它被改变了。任何相关信息都会有所帮助！

先感谢您。

[兄弟 Ruggedjet 4030](http://www.brother-usa.com/Mobile/ModelDetail.aspx?ProductID=RJ4030-K&PG=26) [兄弟 Ruggedjet 4040](http://www.brother-usa.com/Mobile/ModelDetail.aspx?ProductID=RJ4040-K&PG=26)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:23:54.127

正如您从下面的链接中看到的那样，Android 的基于 Bluez (http://www.bluez.org) 的蓝牙堆栈在 4.2 版中已被 Broadcom 的堆栈取代（因此从 Android API17 开始）。

我不知道此更改将如何影响现有 API。

链接：

[http://www.broadcom.com/press/release.php?id=s721534](http://www.broadcom.com/press/release.php?id=s721534)

[http://developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

# javascript - mongoose 使用 nodeJS 查询前 5 个查看项目（排序）

> ID：13295820
> 
> 赞同：2
> 
> 时间：2012-11-08T18:55:36.490
> 
> 标签：javascript, mysql, sql, mongodb, mongoose

我有一个包含多个项目的网站。每个项目都有不同的观看次数。我想要做的是**按此顺序检索前 5 个查看项目的数组`[max, max-1, max-2, max-3, max-4].`**

这是架构：

```
var mongoose = require('mongoose');

// defines the database schema for this object
var schema = mongoose.Schema({
  projectName : String,
  authorName : String,
  viewCount : Number

   comment : [{
      id : String,                                  
      authorName : String,
      authorEmailAddress : { type : String, index : true }  
    }]
  }); 
```

`})`

```
// Sets the schema for model
var ProjectModel = mongoose.model('Project', schema);

// Create a project
exports.create = function (projectJSON) {

  var project = new ProjectModel({

    projectName : projectJSON.projectName ,
    authorName : projectJSON.authorName,    
    viewCount :  projectJSON.viewCount,    

    comment : [{
      id : projectJSON.comments.id,                                         
      authorName : projectJSON.comments.authorName,                         
      authorEmailAddress : projectJSON.authorEmailAddress
    });

  project.save(function(err) {
    if (err) {
      console.log(err);
    }
    else{
      console.log("success");
    }
  });

} 
```

下面是我尝试按此顺序检索前 5 篇查看文章的数组`[max, max-1, max-2, max-3, max-4]`。请记住，文章会实时查看排名变化。

`// because i am familiar with SQL, i start with a SQL query and convert it later to mongoose`

SQL 版本：

`SELECT MAX(viewCount) FROM project where projectName=1 --this only give the MAX when i want the top 5`

猫鼬版：

```
exports.getTopViewedProject = function(rank, callback)
   ProjectModel.findOne({ projectName: 1 }).sort(viewCount, -1).run( 
       function(err, viewCOunt) {
         var max = viewCount;
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T19:39:03.283

要通过以下方式获取项目“名称”的前 5 篇文章`viewCount`：

```
ProjectModel.find({projectName: 'name'}).sort({viewCount: -1}).limit(5).exec( 
    function(err, projects) {
        ...
    }
); 
```

# .net - 在 vb.net 中使用 SOAP 响应

> ID：13295822
> 
> 赞同：0
> 
> 时间：2012-11-08T18:55:44.100
> 
> 标签：.net, vb.net, soap

我在从肥皂响应中获取数据时遇到问题。该请求工作正常，但我无法获取数据。这是肥皂响应（来自soapui）：

```
 <SOAP:Envelope xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/">
       <SOAP:Header/>
       <SOAP:Body>
      <createOrderResponse>
         <SAP_ORDER_NR/>
         <ORDER_STATUS>E</ORDER_STATUS>
         <TOTAL_GOODS_VALUE>0</TOTAL_GOODS_VALUE>
         <TOTAL_FREIGHT_VALUE>0</TOTAL_FREIGHT_VALUE>
         <TOTAL_VAT_VALUE>0</TOTAL_VAT_VALUE>
         <CASH_DISCOUNT>0</CASH_DISCOUNT>
         <ERROR_DESCR>multiple issues found</ERROR_DESCR>
         <MIN_ORDER_VALUE/>
         <ORDER_SCHEDULES_OUT/>
         <RETURN>
            <item>
               <TYPE>E</TYPE>
               <ID>VP</ID>
               <NUMBER>200</NUMBER>
               <MESSAGE></MESSAGE>
               <MESSAGE_V1></MESSAGE_V1>
            </item>
            <item>
               <TYPE>E</TYPE>
               <ID>V4</ID>
               <NUMBER></NUMBER>
               <MESSAGE></MESSAGE>
               <MESSAGE_V1/>
            </item>
         </RETURN>
      </createOrderResponse>
   </SOAP:Body>
</SOAP:Envelope> 
```

例如，我需要 SAP_ORDER_NR 值。已经尝试过：

```
Convert.ToString(Response_1Run.SAP_ORDER_NR)
Response_1Run.SAP_ORDER_NR.tostring() 
```

他们都将“System.Object”作为字符串给出。

更新：截图 ![](../Images/ff86ea5b7af9e29c5b26faf306384ad0.png)

![在此处输入图像描述](../Images/7ded207385542c7f2a008a179515ce4f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:12:08.813

您是否尝试过使用（您甚至可以访问）Response_1Run.SAP_ORDER_NR.Value？我不确定这个字段是如何被序列化的，我可以回忆起 .NET 中的一些实例（我相信是值类型），其中实际数据点存储在单独的属性中（而不是直接在字段上访问）。如果是这种情况，您还会有一个相关字段（例如 Response_1Run.SAP_ORDER_NR.IsNull），以便您可以检查上面示例中节点为空的实例。

# node.js - 您如何使用 UDP/Dgram 上的 Socket IO 向房间发出信号？

> ID：13295824
> 
> 赞同：0
> 
> 时间：2012-11-08T18:55:51.357
> 
> 标签：node.js, udp, socket.io

发射到房间非常简单。您如何使用 UDP/Dgram 上的 Socket IO 向房间发出信号？或者这目前是不可能的。**不谈论浏览器的使用。仅限服务器。**

**Socket IO Room 发射** [https://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)

**NodeJS Dgram UDP 示例** [http://nodejs.org/api/dgram.html](http://nodejs.org/api/dgram.html)

他们可以一起工作吗？或者有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:20:12.560

嗯，我很确定 socket.io 是基于 TCP 的，这意味着您不能发送 UDP 数据报并期望它们被 socket.io 服务器接收。

来自[WebSocket 协议](https://www.rfc-editor.org/rfc/rfc6455)：

> WebSocket 协议支持在受控环境中运行不受信任的代码的客户端与已选择加入来自该代码的通信的远程主机之间的双向通信。用于此的安全模型是 Web 浏览器常用的基于源的安全模型。该协议包括一个开放的握手，然后是基本的消息帧，在 TCP 上分层。

# web-services - HTTP 简单身份验证与 POST 表单身份验证

> ID：13295828
> 
> 赞同：1
> 
> 时间：2012-11-08T18:56:11.990
> 
> 标签：web-services, node.js, web-applications

我正在阅读[RESTful Web 服务](http://shop.oreilly.com/product/9780596529260.do)，在第一章中，他们谈到了利用 HTTP 已经提供的服务。

`del.icio.us`他们介绍了对使用进行身份验证的示例`HTTP Basic Authentication`。

到目前为止，我用 NodeJS 编写的应用程序通过`POST`从包含`user`和`password`字段的表单发送请求来实现身份验证。

你们如何实现这一点？网页是否通过 auth 实现身份验证`http basic auth`？推荐哪一个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:01:49.450

您可能会[在 Node.JS 中找到基本 HTTP 身份验证？](https://stackoverflow.com/questions/5951552/basic-http-authentication-in-node-js/5957629#5957629)很有用，因为它描述了如何在 NodeJS 中进行基本身份验证。

至于它在 Web 服务中的使用，嗯……有很多方法可以通过使用共享密钥（如 API 密钥）、cookie（如基本身份验证）或添加到请求字符串的用户凭据来授权请求​​。都有自己的优点和缺点。

对于我的大部分编码，我依靠公钥/私钥对来确保客户的身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T10:47:44.803

[http-auth](https://github.com/http-auth/http-auth)模块应该可以完成这项工作

```
// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd" // gevorg:gpass, Sarah:testpass ...
});

// Creating new HTTP server.
http.createServer(basic, function(req, res) {
    res.end("Welcome to private area - " + req.user + "!");
}).listen(1337); 
```

# c++ - C++ 二维数组函数

> ID：13295829
> 
> 赞同：2
> 
> 时间：2012-11-08T18:56:12.800
> 
> 标签：c++, arrays, double

基本上我有，

```
 double marks [STUDENTS][ASSIGNMENTS] = {    (0.1,0.2,0.3,0.4,0.5,0.6,0.7),
                                            (1,0.9,0.8,0.7,0.6,0.5,0.5),
                                            (0.8,0.8,0.8,0.8,0.8,0.8,0.8),
                                            (0.8,0.9,0.7,0.8,0.9,0.7,0.8),
                                            (0.5,0.6,0.7,0.8,0.9,0.5,0.9)}; 
```

我想得到：`double studentAverages [STUDENTS]`从`studentAverages=calculateStudentAverages(marks);`

使用：

```
 double calculateStudentAverages (double marks[STUDENTS][ASSIGNMENTS]){
    double averages[STUDENTS];
    double average;
    for (int i = 0; i < STUDENTS; i++) {
            for (int j = 0; j < ASSIGNMENTS; j++) {
                average = average + marks[i][j];

            }
            averages[i]=average/ASSIGNMENTS;

    }    
    return averages;
} 
```

但我得到“无法从'double [5]'转换为'double'”和“无法从'double'转换为'double [5]'”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T18:59:10.210

您的错误之一是您的函数被声明为返回一个`double`，但您试图返回一个`doubles`. 因此，您要么需要更改函数标题以适应它，要么只返回一个`double`

与错误无关，但您绝对应该在开始时初始化`average`，`0.0`否则您在计算中会出现未定义的行为

# seo - Facebook like 按钮和 Google +1 按钮如何处理重定向的 url？

> ID：13295831
> 
> 赞同：0
> 
> 时间：2012-11-08T18:56:20.137
> 
> 标签：seo, facebook-like, http-status-code-301, friendly-url, google-plus-one

我当前的 url 格式是这样的： [http](http://www.wunderwedding.com/weddingvenues/venues/343/venue-name) ://www.wunderwedding.com/weddingvenues/venues/343/venue-name 我想将我的 url 重写为更友好的格式： [http ://www.wunderwedding.com/weddingvenues /地点名称-343](http://www.wunderwedding.com/weddingvenues/venue-name-343)

当然，我将不得不 301 将旧网址重定向到新网址。但是用户已经给旧网址的 Facebook 点赞和 Google+1 会发生什么？那些会被维护吗？

# c++ - 没有得到正确的字符数组输出

> ID：13295834
> 
> 赞同：1
> 
> 时间：2012-11-08T18:56:27.487
> 
> 标签：c++, arrays, char-pointer

> **可能重复：**
> [指向局部变量的指针](https://stackoverflow.com/questions/4570366/pointer-to-local-variable)

```
#include <iostream>
using namespace std;

char* func();

int main() {
    char* str;
    str = func();
    cout<<str;
    return 0;
}

char*  func() {
    char * str;
    char p[] = "priyanka is a good girl";
    str = p;
    cout<<str<<"\n";
    return str;
} 
```

给出输出，

> 普里扬卡是个好女孩
> 
> 偷窥

我不明白这里刚刚发生了什么，为什么给出一个不完整的数组作为输出。我对此有点陌生。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:58:09.293

您的函数`func()`返回一个指向局部变量的指针，该指针稍后会在您尝试访问它时导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:05:38.880

In`func2()` `char p[]`是在堆栈上初始化的局部变量。返回指向堆栈变量的指针是一个坏主意（并且也是未定义的行为），我认为您的字符串“priyanka is a good girl”在函数返回时被覆盖。

# axapta - Infolog 是 Dynamics AX 中 Info 类的别名吗？

> ID：13295835
> 
> 赞同：0
> 
> 时间：2012-11-08T18:56:28.760
> 
> 标签：axapta, dynamics-ax-2012

我试图了解*Infolog*在 Dynamics AX 中的工作方式。我了解以下代码将在信息日志窗口中显示文本。

> info("你好世界！");

我知道**info**是**Global**类的静态方法，因此可以通过简单地调用名称来调用该方法，而无需实际指定*`Global::`*

在查看*Global*类中的方法*信息*时，我注意到它调用了. 右键单击并选择该选项将我带到类**Info中的方法****添加**。*`infolog.add``add``Lookup Definition`*

 *****如果*add*方法所在的类被命名为*Info*，它是如何从`Global::info()`名为**Infolog**的内部调用的？

我能得出的唯一合乎逻辑的结论是*Infolog*是类*Info*的别名。如果这是正确的，这个别名在 AOT（*应用程序对象树*）中定义在哪里？

我搜索了 AOT，但发现了多个对*Infolog*一词的引用，但我找不到任何与*应用程序*或*系统*类直接相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:03:20.613

对我在 Microsoft Dynamics 社区论坛上发布的同一问题的回答帮助我更好地理解了代码。

[Infolog 是 Info 类的别名吗？- Microsoft Dynamics 社区论坛上的回复](https://community.dynamics.com/product/ax/f/33/t/93579.aspx)

下面显示的代码来自静态方法`Global::info()`。我没有注意到**`add`**使用对象调用方法**`infolog`**实际上是一个实例方法而不是静态的。

```
client server static Exception info(
    SysInfoLogStr txt, 
    URL helpUrl = '', 
    SysInfoAction _sysInfoAction = null)
{
    return infolog.add(Exception::Info, 
        getPrefix()+txt, 
        helpUrl, 
        _sysInfoAction, false);
} 
```

换句话说，`infolog`是类的一个实例`Info`。在查看类*Info*之后，我找到了该`startup`方法。我保留了一个断点来调试代码，发现每次打开 AX 客户端时都会调用此方法。该方法又调用另一个名为 的方法`initBrowser`。在*initBrowser*中，以下代码似乎使用 Windows 句柄初始化 Infolog 的全局实例。

```
this.initializeInfolog(this.browser().hWnd()); 
```

上面的方法`initializeInfolog`存在于 System 类`xInfo`中，它是 Info 的父类。由于我无法查看类*xInfo*，我假设这是创建`Info`具有名称的类实例的位置**`infolog`**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:09:21.593

我不认为这是一个别名。我认为这是在内核级别定义的全局变量。

编辑：当我回答时你回答了你的问题......*****

# jboss - 从另一个客户端访问部署在 JBoss 7.0.1 中的 ejb

> ID：13295837
> 
> 赞同：6
> 
> 时间：2012-11-08T18:56:48.750
> 
> 标签：jboss, ejb

在 JBoss 7.0.1 中部署了 EJB 模块后，我试图从在另一个 JVM 上执行的客户端访问它。但是，我无法弄清楚添加到客户端类路径所需的客户端 jar。

我尝试了以下方法：-

1.  jboss-ejb-api_3.1_spec-1.0.1.Final.jar
2.  jboss-ejb-client-1.0.0.Beta11.jar 3.jboss-logging-3.1.0.CR2.jar
3.  jboss-marshalling-1.3.4.GA.jar 5.jboss-marshalling-river-1.3.4.GA.jar
4.  jboss-remoting-3.2.0.CR8.jar 7.jboss-sasl-1.0.0.Beta9.jar
5.  jboss-transaction-api_1.1_spec-1.0.0.Final.jar
6.  xnio-api-3.0.0.CR7.jar

这个设置似乎有些不一致，我得到了这个例外：-

> 信息：JBoss EJB 客户端版本 1.0.0.Beta11 2012 年 11 月 9 日上午 12:01:04 org.xnio.Xnio 信息：XNIO 版本 3.0.0.CR7 2012 年 11 月 9 日上午 12:01:04 org.jboss.ejb .client.ConfigBasedEJBClientContextSelector createConnections 错误：无法为名为默认 java.lang.IllegalArgumentException 的连接创建连接：在 org.xnio.Xnio.doGetInstance(Xnio.java:192) 的 org.xnio.Xnio.getInstance( Xnio.java:146) 在 org.jboss.remoting3.Remoting.createEndpoint(Remoting.java:73)
> 
> ...

在让客户端访问部署在 JBoss 7.1.0 Final、JBoss 6.1.0 Final 或 Glassfish 服务器中的 ejb 时，我没有遇到任何问题。客户端战争所需的罐子可用。

顺便说一句，我是 Java EE 和应用程序服务器的新手，我正在尝试在此过程中学习。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T06:06:42.730

请在您的类路径中添加 xnio-nio-3.0.3.GA.jar

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-25T12:49:14.593

除了 Ramkumar 的回答之外，我还在为这个 jar 添加 maven 依赖项。遵循 jar 的 Maven 依赖项：

```
<dependency>
    <groupId>org.jboss.xnio</groupId>
    <artifactId>xnio-nio</artifactId>
    <version>3.0.3.GA</version>
</dependency> 
```

# intersystems-cache - Cache Studio 不反映自定义 %Projection.AbstractProjection 类所做的更改

> ID：13295838
> 
> 赞同：1
> 
> 时间：2012-11-08T18:56:53.477
> 
> 标签：intersystems-cache

我有时会使用投影类（%Projection.AbstractProjection 的子类）来生成各种东西，我发现如果我使用 %Dictionary 类从 CreateProjection 方法中修改其他类，这些更改会变成 ^oddDEF正确地，更改的类可以正确编译和运行，但 Cache Studio 看不到更改，并继续以修改前的方式显示它们。如果我随后从 Cache Studio 编译，它会覆盖投影类所做的更改。

它相当“粘”——如果我关闭更改的类，将它们从我的项目中删除，然后将它们添加回来并打开它们，缓存工作室中仍然存在未更改的缓存版本。

我在更改的类上调用 QueueClass，但这似乎无关紧要。我在 2008.2，以防万一。

如何以编程方式让 Cache Studio 更新其缓存，或者以其他合理的方式解决此问题（例如，每次关闭 Cache Studio 并不合理）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:48:19.590

尝试重置 %Dictionary.ClassDefinition 的 TimeChanged 属性

# asp.net - 在 Asp.Net 中单击 GridView 上的更新时获取下拉列表的实例

> ID：13295841
> 
> 赞同：0
> 
> 时间：2012-11-08T18:57:01.620
> 
> 标签：asp.net, gridview

我有一个超过 30 列的 GridView。大多数是普通控件，但对于一些我添加了模板控件（DropDownList、Calendar 和 CheckBox 控件）。这是相关控件的 aspx 代码

```
 <asp:TemplateField HeaderText="Field1 Caption" SortExpression="Field1">
         <ItemTemplate>
            <asp:Label ID="lblConstructionArea" runat="server" Text='<%# Eval("Field1") %>'></asp:Label>
         </ItemTemplate>
         <EditItemTemplate>
              <asp:DropDownList ID="ddlField1" EnableViewState="true" runat="server"></asp:DropDownList>
          </EditItemTemplate>
      </asp:TemplateField> 
```

当用户单击编辑时，我希望在列上显示一个下拉列表。所以我添加了这段代码（和上面的EditItemTemplate）

```
 protected void gvData_RowEditing(object sender, GridViewEditEventArgs e)
    {
        string fieldOne = CommonUtils.ExtractControlValue(e,"lblField1",gvData);

        gvData.SelectedIndex = e.NewEditIndex;
        gvData.EditIndex = e.NewEditIndex;
        gvData.DataBind();

        BindGridDropDownData(e, CommonUtils.GetConstructionAreas() ,"ddlConstructionArea", constructionArea, "Field1", fieldOne);
    } 
```

在上面的代码中，我获取了当前可用并将其传递给另一个方法，以便在显示下拉列表时可以准确显示所选索引。在此之后，我对下拉列表进行更改并单击 GridView 上的“更新按钮”并触发以下事件

```
 protected void gvData_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        int rowEditIndex = e.RowIndex;
        GridViewRow gRow = gvData.Rows[rowEditIndex];

        DropDownList ddlConstructionArea = (DropDownList) gvData.Rows[rowEditIndex].FindControl("ddlConstructionArea"); //This does not work

        ddlConstructionArea = (DropDownList)gRow.FindControl("ddlConstructionArea");//This does not work 

        ddlConstructionArea = (DropDownList)gvData.Rows[rowEditIndex].Cells[7].FindControl("ddlConstructionArea");//this does not work either
        gvData.EditIndex = -1;//this works and the text boxes disappear
        gvData.DataBind();//this works and the old data shows up on the gridview
    } 
```

我很好奇如何在我拥有绑定是运行时的网格上进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:06:54.733

实际上，在标记中，您将下拉列表的 ID 指定为 ddlField1，而在代码隐藏中，您将其引用为 ddlConstructionArea。这是导致更新不起作用的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:55:55.557

问题在于网格的绑定方式。我已经编写了代码来在页面加载时刷新网格，并且每当我单击“编辑”按钮时，页面都会被刷新，并且会触发网格绑定而不是更新事件。我删除了在页面加载时刷新网格的代码，并将其放在需要它的地方，并且事件的顺序以我想要的方式触发，并且更新完美地工作而没有问题。

# mysql - 基于 AND 的标签数据库返回不同的 SQL 查询

> ID：13295843
> 
> 赞同：0
> 
> 时间：2012-11-08T18:57:22.190
> 
> 标签：mysql

我仍在尝试学习更复杂的 SQL 查询，并且发现很难返回我想要的结果。

用户将输入一个或多个关键字，查询将根据通过关键字设置的限制返回主题：

示例数据库：表：

```
keywords
-------
keyword_id
keyword  

topics
-------
topic_id
topic_other_stuff  

topics_keywords
-------
tk_id
topic_id
keyword_id 
```

每个 topic_id 可以附加多个关键字。

如果用户输入 2 个或更多关键字，我将尝试获取一个查询，该查询仅返回通过 topic_keywords 表附加两个关键字的主题。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:02:18.503

```
select t.topic_id
from topics_keywords t
inner join keywords k on t.keyword_id = k.keyword_id
where k.keyword in ('keyword1', 'keyword2')
group by t.topic_id
having count(distinct k.keyword_id) = 2 
```

# http - 在 mime 标头字段名称和 ':' 分隔符之间是否允许空格

> ID：13295845
> 
> 赞同：7
> 
> 时间：2012-11-08T18:57:23.567
> 
> 标签：http, header, whitespace, mime

在 mime 标头中，标头字段名称和“：”分隔符之间是否允许空白？例如，有：

```
Content-Type: <value> 
```

和

```
Content-Type  : <value> 
```

相等的？

另外，您能否提供一个指向描述此内容的 mime 标准的指针？我检查了一些但没有找到。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-02T16:10:12.197

取决于您所说的“允许”是什么意思。RFC [2822](https://www.rfc-editor.org/rfc/rfc2822)（废弃 1982 RFC822）和[5322](https://www.rfc-editor.org/rfc/rfc5322)（废弃 2822）明确禁止在字段名称和冒号之间插入 WS（这些不是“MIME”标准，顺便说一句）。请注意，这`:`不是标记，仅作为字段名称的一部分引用，例如：

```
from = "From:" mailbox-list CRLF 
```

然而，古老的 RFC822*确实*允许在这里留出空间，而较新的 RFC 声明过时的语法“必须由符合要求的接收者接受和解析”。例如，过时的`From:`标头定义是

```
obs-from = "From" *WSP ":" mailbox-list CRLF 
```

第 4 节介绍了过时的语法。我实际上不允许在我自己的接收器中使用过时的语法，而且我从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:01:34.387

根据标准，它是否允许并不完全清楚。但是，实现在处理标头字段名称和冒号之间的空格的方式上有所不同。如果可以的话，我强烈建议您避免使用空格。

[RFC 供](http://www.ietf.org/rfc/rfc0822.txt)参考。[这篇有点老的文章讨论了 HTTP headers 的问题](http://www.ietf.org/rfc/rfc0822.txt)，一个类似的标准。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T09:18:44.930

如果问题是关于 HTTP 的，那么答案是“不，不允许”。见[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-21.html#rfc.section.3.2](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-21.html#rfc.section.3.2)

# ms-access - 使用表格中计算的金额访问 2010 年报表计算

> ID：13295848
> 
> 赞同：1
> 
> 时间：2012-11-08T18:57:28.270
> 
> 标签：ms-access, report

我有成员、贡献、付款和家庭表。我有一份付款表格，当人们在俱乐部中有多个家庭成员时，我可以在其中计算折扣。我需要我的报告中的计算数字旁边的一些信息，例如位于我的表格中的 First_Name、Last_name、Account_number，但不是计算数字。我需要知道如何获得我在报告中的付款表格中计算的数字。

我不是英语，希望你能理解。

提前致谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:09:43.910

如果您打开了表格，您可以参考报告中的表格：

```
 =MyForm!txtDiscount 
```

在更高版本的 MS Access 中，您可以拥有 OpenArgs。假设您从表单打开报告：

```
 DoCmd.OpenReport "MyReport", acViewPreview, , , , Me.txtDiscount 
```

然后，您可以参考报告中的 Me.OpenArgs。

# graphicsmagick - 为什么用 --with-modules 编译 GraphicsMagick

> ID：13295852
> 
> 赞同：0
> 
> 时间：2012-11-08T18:57:37.980
> 
> 标签：graphicsmagick

根据[文档](http://www.graphicsmagick.org/INSTALL-unix.html)， GraphicMagick 可以使用`--with-modules`“启用构建动态可加载模块”的选项进行编译。简而言之，为什么要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T02:28:37.037

使用模块将 GraphicsMagick 与许多附加库分离。它提供了在不修改 GraphicsMagick 本身的情况下向 GraphicsMagick 添加新格式的机会。由于加载到正在运行的应用程序中的代码（共享库和编码器）要少得多，因此在某些系统上执行“gm”实用程序时的开销要少得多。性能改进取决于操作系统，在某些系统上它实际上更慢。

# r - 使用 R 绘制多个图

> ID：13295855
> 
> 赞同：2
> 
> 时间：2012-11-08T18:58:01.720
> 
> 标签：r, graph

我目前有一个数据集，其格式为：(x, y, type)

我使用了在[通过 R 使用 Postgres 进行绘图的示例中找到的代码。](http://www.varlena.com/GeneralBits/Tidbits/bernier/art_66/graphingWithR.html)

我的问题是：如何让 R 为每个唯一的“类型”列生成多个图表？

我是 R 新手，所以如果这是非常简单的事情，我很抱歉，我只是缺乏对 R 循环的理解。

所以假设我们有这些数据：

```
(1,1,T), (1,2,T), (1,3,T), (1,4,T), (1,5,T), (1,6,T), 
(1,1,A), (1,2,B), (1,3,B), (1,4,B), (1,5,A), (1,6,A), 
(1,1,B), (1,2,B), (1,3,C), (1,4,C), (1,5,C), (1,6,C), 
```

它将在页面上绘制 4 个单独的图表。T、A、B 和 C 类型各有一个。[绘制 x,y]

当传入的数据可能看起来像上面的数据时，我将如何使用 R 执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T21:52:24.963

虽然另一篇文章有​​一些很好的信息，但有一种更快的方法可以做到这一点。因此，假设您的数据框或矩阵被调用`DF`并且采用上面的形式（其中每个`(1,2,B)`或任何内容都是一行），那么：

```
by(DF, DF[,3], function(x) plot(x[,1], x[,2], main=unique(x[,3]))) 
```

就是这样。

如果您希望所有四个图都在同一页面上，您可以首先更改绘图`par`amter 选项：

```
par(mfrow=c(2,2)) 
```

完成后恢复默认值`par(mfrow=c(1,1)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T21:57:55.957

我非常喜欢这个`ggplot2`包，它与 user1717913 建议的功能相同，但语法略有不同（它可以很好地完成许多其他事情，这就是我喜欢它的原因。）

```
test <- data.frame(x=rep(1,18),y=rep(1:6,3),type=c("T","T","T","T","T","T","A","B","B","B","A","A","B","B","C","C","C","C"))

require(ggplot2)
ggplot(test, aes(x=x, y=y)) + #define the data that the plot will use, and which variables go where
  geom_point() + #plot it with points
  facet_wrap(~type) #facet it by the type variable 
```

![在此处输入图像描述](../Images/3230f131fc040adae44e40cf809be8b0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T21:00:44.500

`R`真的很酷，因为有很多（这是一个技术术语）不同的方式来做大多数事情。我会做的是将数据沿组拆分，然后按组绘制。
为此，该`split`命令就是您想要的（我假设您的数据在一个名为 的对象中`data`）：

```
data.splitted <- split(data, data$type) 
```

现在数据将具有这种形式（假设您有 3 种类型，A、B 和 C）：

```
data.splitted  
 L A
 | L x y type
 |   1 4  A
 |   3 6  A
 L B
 | L x y type
 |   3 3  B
 |   2 1  B
 L C
   L x y type
     4 5  C
     5 2  C 
```

等等。您将在 A 组的 y 列中引用“4”，如下所示：

`data.splitted$A$y[1]`或者`data.splitted[[1]][[2]][1]`希望看到他们俩在一起就足够有意义了。

现在我们有了数据拆分，我们越来越接近了。
我们仍然需要告诉`R`我们想要在同一个窗口中绘制一堆图表。现在，这只是解决问题的一种方法。您还可以告诉它将每个图形写入图像文件、pdf 或任何您想要的文件。
`groups <- names(data.splitted)`将您的不同类型放入变量中以供以后参考。

```
par(mfcol=c(length(groups),1)) 
```

使用 mfcol 垂直填充图形。mfrow 选项水平填充。`c()`只是结合输入。返回组的`length(groups)`总数。
现在我们可以处理for循环了。

```
for(i in 1:length(data.splitted)){   #  This tells it what i is iterating from and to.
                                     #    It can start and stop wherever, or be a 
                                     #    sequence, ascending or descending,
                                     #    the sky is the limit.
tempx <- data.splitted[[i]][[x]]     #  This just saves us
tempy <- data.splitted[[i]][[y]]     #    a bunch of typing.
plot(tempx, tempy, main=groups[i])   #  Plot it and make the title the type.
rm(tempx, tempy)                     #  Remove our temporary variables for the next run through.    
} 
```

所以你看，当你把它分解成它的组件时，它并不算太糟糕。你几乎可以用这种方式做任何事情。我现在正在处理一个项目，我正在为 18 个激光雷达指标执行此操作，这些指标是我使用*另一个*for 循环计算的。要阅读的命令：

```
split, plot, data.frame, "[", 
par(mfrow=___) and par(mfcol=___) 
```

[这里](http://www.statmethods.net/advgraphs/layout.html)有[一些](http://gallery.r-enthusiasts.com/)有用的[链接](http://www.personality-project.org/R/r.commands.html) 可以帮助您入门。最有用的一个是内置的`R`。a`?`后跟命令将在浏览器中显示该命令的 html 帮助。
祝你好运！

# git - 版本控制 rpm 规范文件

> ID：13295860
> 
> 赞同：4
> 
> 时间：2012-11-08T18:58:30.397
> 
> 标签：git, rpm-spec

我正在配置一个构建机器来为大量非常相似的项目生成 rpm。每个项目的规范文件都略有不同，无论是名称还是依赖项和其他属性。每个项目都有自己的 git 存储库，其中包含项目文件。

这些规范文件只存在并且真实地只对构建系统本身有用；每个项目都可以手动安装，但我打包成 rpms 以便于自动部署。

构建系统本身也有自己的 git 存储库。

规范文件应该版本化吗？如果是这样，在哪里？每个规范文件是否应该在与其关联的项目的存储库中进行版本控制？还是应该将它们都与构建系统在同一个存储库中进行版本控制？而且，最重要的是，为什么？

我担心对项目存储库中的规范进行版本控制会导致文件彼此不同步，因为我对安装过程进行了逐步改进。我还担心对构建存储库中的规范进行版本控制会导致在更改依赖项时忘记文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:59:53.847

我正在一个项目中，我们在与库或项目相同的目录树中对 RPM 规范文件进行版本控制。为什么？这使所有东西都整齐地放在一起。当我们更新库中的源文件时，spec 文件就在那里，以将适当的条目添加到 %changelog，详细说明为错误修复或增强所做的工作。

对于您的情况，这是一个艰难的决定。但我认为您的构建/安装系统最终会达到一个稳定点，而您的所有项目无疑都需要在修复错误时的某个时间点进行更新。是的，在您调整构建/安装过程时，短期内可能会很痛苦，但是一旦稳定下来，从长远来看会更容易。

# testing - 测试工具：有没有比预期更好的选择？

> ID：13295864
> 
> 赞同：2
> 
> 时间：2012-11-08T18:58:52.873
> 
> 标签：testing

我们当前的测试是一个简单的内部工具，它运行指定的目标，记录其输出并将其与预期输出进行比较。预期输出和实际输出都是文本文件。

这有一个明显的缺点，如果某些行号更改没有功能影响，则视为失败。

我们正在考虑使用像期望这样的工具来执行此操作，但我们想知道是否还有其他替代方法。谷歌搜索不会立即返回任何答案。

我们的平台是linux；该工具的用户不需要编写测试代码，基本上他们目前只是提供一个预期结果的纯文本文件，我们不应该要求他们编写代码或一些复杂的形式。

感谢您的投入。

# asp.net-mvc - 使用 .where 扩展方法会导致重复（MVC-LINQ）

> ID：13295865
> 
> 赞同：3
> 
> 时间：2012-11-08T18:58:55.333
> 
> 标签：asp.net-mvc, linq

我正在尝试创建一个局部视图来显示一些数据。我的控制器接受`string itemID`并基于它执行查询。调用局部视图时，它会一遍又一遍地显示相同的记录。

注意：出于安全目的，我更改了对象的名称。

```
[ChildActionOnly]
public ActionResult someAction(string itemID = "")
{
    //Empty itemID
    if(string.IsNullOrEmpty(itemID))
    {
        return RedirectToAction("Index", "Search");
    }

    var model = _db.someTable
            .Where(r => r.itemID == itemID)
            .OrderBy(r => r.col1)
            .ThenBy(r => r.col2)
            .Take(20);
    return PartialView("_myView", model);
} 
```

我尝试删除`OrderBy`and`ThenBy`方法，但结果保持不变，（顺序无关紧要，因为它们是重复的......）。当我删除该`.Where`方法时，它按预期工作并显示 20 条不同的记录（尽管没有以任何方式过滤）。

我的视图是由 Visual Studio 使用 List 模板创建的。`.Where`通过从 LINQ 语句中删除该方法已证明该视图有效。以下是视图的重要部分：

```
@model IEnumerable<MyApp.Models.OperationData>
.
.
.
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.some column)
    </td>
.
.
. 
```

关于这个查询有什么问题的任何想法？

编辑：尝试了其他 LINQ 语法并得到了相同的结果：

```
var model = from r in _db.someTable where r.itemID == itemID select r; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:36:28.360

优胜者鸡肉晚餐！

原来问题在于模型到表的映射。我正在处理的表有一个复合键，我不知道......在阅读了 mipe34 关于主键的一些内容后，我决定对表结构进行一些调查。发现复合键后，我添加了第二个键的映射，一切正常。

这个问题非常令人困惑，因为 LINQ 生成的 SQL 在 SQL Management Studio 中运行时运行良好。

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:48:13.670

在模型变量之后点击断点，看看 LINQ 生成了什么 SQL 查询 - VS 应该为您显示它。您也可以尝试执行查询（在查询末尾添加.ToList()）查看实际结果，集合中有什么以区分查询或视图是否有问题。

# c# - 程序安装后找不到文件

> ID：13295866
> 
> 赞同：1
> 
> 时间：2012-11-08T18:58:57.713
> 
> 标签：c#, windows, winforms, text-files

我制作了一个程序，该程序使用包含站点列表的预制文本文件。现在在某些计算机上该程序可以正常工作，但在我朋友的计算机上却不行。

我检查了我的 2 台 Windows 7 计算机和 1 台 XP 上的程序，我没有任何错误。这个程序在XP上用了一段时间，现在我朋友想把它安装在他家的windows 7电脑上，但是安装后程序找不到文件。

这是他得到的错误：

```
System.IO.FileNotFoundException: file not found 'C:\Users\eli\AppData\Roaming\fourmlinks.txt'.
file name: 'C:\Users\eli\AppData\Roaming\fourmlinks.txt' 
```

问题是我将这个文件放在主程序文件夹（应用程序文件）中，但它仍然找不到它。

这是我在程序启动时用来查找文件的代码：

```
sring path = "";
path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\fourmlinks.txt";
            System.OperatingSystem osInfo = System.Environment.OSVersion;
            if (osInfo.Platform == PlatformID.Win32NT)
            {
                if (osInfo.Version.Major == 5 && osInfo.Version.Minor != 0)
                {
                    //running XP
                    //path = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) + "\\fourmlinks.txt";
                    path = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\fourmlinks.txt";
                }
            } 
```

你可以看到，我试图确保它可以在 Windows 7 和 Windows XP 上运行。

注意：我不介意改变我使用此文件的方式，甚至以这种方式丢失并尝试在操作系统（win 7 和 XP）上工作的完全不同的方式。如果你建议我新的方式，我会很高兴尝试一下。

我的问题：

1.  该程序怎么可能在某些计算机上运行而在某些计算机上却不行？
2.  您会将文件放在程序文件夹以外的其他位置吗？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:01:39.867

> 该程序怎么可能在某些计算机上工作而在某些计算机上却不行？

因为程序依赖于特定于计算机的某些东西，而这两台计算机之间的某些东西是不同的。例如，您的错误消息说：

> 找不到文件'C:\Users\eli\AppData\Roaming\fourmlinks.txt'

该程序正在用户文件夹中寻找一个文件；这是特定于每台机器上的每个用户的，不同的用户和不同的机器会有不同的文件。

> 你会把文件放在程序文件夹以外的其他地方吗

我会吗？不，我不能，因为我不是那台机器上的那个用户。如果您的意思是“我的程序可以将文件放在不同的位置......”那么是的，它可以。

```
string path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "fourmlinks.txt"); 
```

这将获得登录用户的私有应用程序数据的路径。如果您的计算机上的此文件夹中有“fourmlinks.txt”文件，但其他人的计算机上没有此文件，那么这将在您的计算机上运行，​​但在其他人的计算机上不起作用，正如您所要求的那样。

```
string path = Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location),
    "fourmlinks.txt"); 
```

这将获得已安装文件的路径。如果您和其他人都安装了该程序，那么您和其他人都将拥有该文件。如果你们中的任何一个更改了文件，那么另一个会得到更改。

所以你应该总是使用`GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)`吗？嗯，这取决于。`GetExecutingAssembly().Location`通常是标准用户无法写入，只能读取的地方。如果您希望用户只读取而不写入您的数据，那么这是放置数据的好地方。如果你不这样做，那就不是。

如果要创建一个新文件供用户写入和读取，请写入`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`. 如果您想在您的应用程序中安装一些起始数据但允许用户更改它，那么您应该在您的应用程序中包含起始数据文件。它将安装到`System.Reflection.Assembly.GetExecutingAssembly().Location`. 然后您的应用程序应该执行以下操作：

```
string fileName = "fourmlinks.txt";
string target = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), fileName);
if (!File.Exists(target))
{
    string source = Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location), fileName);
    File.Copy(source, target);
} 
```

`GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location)`和之间的另一个重要区别`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`是前者是安装程序包的一部分；如果用户卸载或更新您的应用程序，他们的所有运行时更改都将被删除。

如果您希望每个用户都有自己的私有数据，并且在修改应用程序时不会被删除，那么您希望使用`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)`.

# c - 重定向输入输出的代码块

> ID：13295869
> 
> 赞同：7
> 
> 时间：2012-11-08T18:59:02.423
> 
> 标签：c, redirect, input, codeblocks, output

我是代码块的新手，我似乎无法让它与 < input > 输出的命令行参数一起工作。有谁知道怎么做？

我目前能够读取从 argv[1] 传递的文件，但是程序不会自动从给定文件读取输入，也不会将输出正确地输出到文件输出。

我知道它在设置程序的参数上，我的参数行是：list.txt < input > output

经过一番研究，我看到一个人这样做：< ./input > ./output，似乎运行一个程序来提供输入和输出，无论如何，我也试过无济于事。我需要使用文件处理程序与之交互吗？它没有意义，简单的 getchar() 应该从传递的输入文件中读取。

我在这里想念什么？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-10T18:35:14.890

我在 CB 13.12 中找到了一种方法

```
Tools -> Configure Tools -> Add:

Name: whatever
Executable: C:\Windows\System32\cmd.exe
Parameters: /C ${TARGET_OUTPUT_BASENAME} exampleArg1 <inputFileRedirect.txt
Working Directory: ${TARGET_OUTPUT_DIR} 
```

它基本上启动 Windows 控制台并将*参数*传递给它。您还可以为这些工具分配键盘快捷键。我能看到的唯一缺点是这些工具不是特定于项目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-13T13:09:03.370

我已经使用 Code::Blocks 一段时间了，最​​近我注意到至少在 Windows 中的 Code::Blocks 12.11 也是如此。重定向**>**和**<**在项目中不起作用**-> 设置程序**参数...

一个骇人听闻的解决方案是在构建后步骤中执行。

右键点击`project name -> Build options... -> Pre/post build steps -> Post-build steps:`

```
cmd /C cd /D "bin\$(TARGET_NAME)\" & YourApplicationNameHere.exe >output.txt 2>errors.txt 
```

并选中复选框始终执行，即使目标是最新的。现在**按 Ctrl+F9**，程序将作为构建过程的最后一步执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-20T18:14:17.020

通过在项目菜单中设置程序参数，我能够将输入重定向到我的 c 程序。

导航到`Top Menu>Project>Set programs' arguments`并在 start 中放置`</absolute/path/to/yourinputfile`通知`<`，它会将代码块欺骗到重定向文件而不是传递参数。

[![在此处输入图像描述](../Images/12dee463adb99326b4c22dbdde76b183.png)](https://i.stack.imgur.com/7HEmF.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-30T23:02:01.763

我知道这是一个老话题，但没有一个解决方案足够好。对于 Windows，我可能会在全局范围内使用以下宏定义（因为您可能还需要它来进行调试打印或类似操作）

```
#include <cstdio>
#ifdef DEBUG
    #define D(X) X
#else
    #define D(X)
#endif 
```

然后作为第一行或第二行（如果您需要 std::ios::sync_with_stdio(false); ）主要使用它作为

```
int main() {
   D(freopen("input.txt","r",stdin);)
   D(freopen("ouput.txt","w",stdout);)
   ... 
```

并在 Projects > Build Options... > (Debug, Compiler Settings, #defines) 下的 Code::Blocks 中定义

> 调试

期望“input.txt”是其余 .c 或 .cpp 文件所在文件夹中的文本输入文件，而“output.txt”将是在同一文件夹中生成的输出文件（或者它们可以同时添加到项目作为这样的文件，以便于编辑/查看）。

此解决方案适用于 cin/cout 和 scanf/printf。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-16T20:10:47.453

我认为这是在**IDE**`cb_console_runner.exe`中启动程序的问题。 无法解释重定向符号。因此，我在代码块 13.12 的原始代码中添加了一些代码。请将链接文件复制到 [cb 文件夹]。（别忘了备份原件。）**`ConsoleRunner`**

 **二进制： http: [//limity.tistory.com/attachment/cfile30.uf@241A8D485621595131B28F.exe](http://limity.tistory.com/attachment/cfile30.uf@241A8D485621595131B28F.exe)

源代码： http: [//limity.tistory.com/attachment/cfile23.uf@231AF3485621595232A632.cpp](http://limity.tistory.com/attachment/cfile23.uf@231AF3485621595232A632.cpp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-26T04:56:50.263

我尝试了几乎所有的选项，但都没有成功：P 在厌倦了这一切之后，我基本上使用文件处理来完成我的工作（唷）

这是我在代码中所做的

在全球范围内，我写道：

```
#define DEBUG

#ifdef DEBUG
#include<fstream>

ifstream Inputfile;
ofstream Outputfile;

#define cin     Inputfile
#define cout    Outputfile

#endif  //#ifdef DEBUG 
```

& 主要我在做任何其他事情之前写了以下内容：

```
int main(){
#ifdef DEBUG

    Inputfile.open("Input.txt");
    Outputfile.open("Output.txt");;

#endif // #ifdef DEBUG 
```

最后在关闭主进程之前这样做：

```
#ifdef DEBUG

    Inputfile.close();
    Outputfile.close();

#endif // #ifdef DEBUG 
```

在此之后添加了两个文件

> 输入.txt

&

> 输出.txt

到项目

这按预期工作**

# php - 与管理插件的脚本冲突

> ID：13295870
> 
> 赞同：1
> 
> 时间：2012-11-08T18:59:05.760
> 
> 标签：php, wordpress

考虑过询问 wordpress 的答案，但他们会告诉我这是一个“插件”。如果您不同意，请随时将其传递给他们。

我在我的 functions.php 中使用此代码，当用户单击新发布按钮时，它会提供可用类别的下拉菜单。这迫使他们在创建新的空白帖子之前选择一个类别。

问题是我收到“无效的帖子类型”错误，并将其追溯到一个名为“adminimizer”的插件。

新帖子永远不会被创建，地址栏卡在 mysite.com/wp-admin/post-new.php?category_id%5B%5D=4&continue=Continue&post_type= （它应该在 type=..我收到一个错误框，上面写着“无效的帖子类型”。

我很想听听为什么我的剧本可能没有完成的任何想法。这是我正在使用的代码：

```
//ADD DROPDOWN MENU TO CHOOSE NEW POST CATEGORY (CHOOSE THE CAT ID’S YOU WANT TO APPEAR)
add_filter( 'load-post-new.php', 'wpse14403_load_post_new' );
function wpse14403_load_post_new()
{
$post_type = 'post';
if ( isset( $_REQUEST['post_type'] ) ) {
    $post_type = $_REQUEST['post_type'];
}

// Only do this for posts
if ( 'post' != $post_type ) {
    return;
}

if ( array_key_exists( 'category_id', $_REQUEST ) ) {
    add_action( 'wp_insert_post', 'wpse14403_wp_insert_post' );
    return;
}

// Show intermediate screen
extract( $GLOBALS );
$post_type_object = get_post_type_object( $post_type );
$title = $post_type_object->labels->add_new_item;

include( ABSPATH . 'wp-admin/admin-header.php' );

$dropdown = wp_dropdown_categories( array(

'orderby'            => 'name',
'include' => '3, 4',
    'name' => 'category_id[]',
    'hide_empty' => false,
    'echo' => false,
) );

$category_label = __( 'Create New' );
$continue_label = __( 'Continue' );
echo <<<HTML
<div class="wrap">

<h2>{$title}</h2>

<form method="get">
    <table class="orange">
        <tbody>
            <tr valign="top">
                <th scope="row">{$category_label}</th>
                <td>{$dropdown}</td>
            </tr>
            <tr>
                <td></td>
                <th><input name="continue" type="submit" class="button-primary" value="  {$continue_label}" /></th>
        </tbody>
    </table>
    <input type="hidden" name="post_type" value="{$post_type}" />
   </form>
</div>
HTML;
include( ABSPATH . 'wp-admin/admin-footer.php' );
exit();
}

// This function will only be called when creating an empty post,
// via `get_default_post_to_edit()`, called in post-new.php
function wpse14403_wp_insert_post( $post_id )
{
wp_set_post_categories( $post_id, $_REQUEST['category_id'] );
} 
```

更新/更多信息。在进一步调查中，我将我的一些代码从隐藏更改为文本。这会显示一个输入字段，该字段通常会自动填充帖子类型“post”。adminimize 插件似乎可以防止这种情况发生，即使我没有将它设置为隐藏任何东西？

```
<input type="text" name="post_type" value="{$post_type}" /> 
```

我想简单的解决方案就是不要使用管理器插件，但是对于新网站所有者来说，保持简单是非常有用的。我已经向插件作者询问过这个问题，但不要指望很快就会得到答案 - 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:27:20.363

事实证明，插件作者（Frank）提供了很大的支持。他发现这条线有问题，并简单地将其注释掉。现在一切都按预期工作:)

```
//extract( $GLOBALS ); 
```

# c - ISO C 禁止 C 中的空初始化器大括号

> ID：13295872
> 
> 赞同：6
> 
> 时间：2012-11-08T18:59:15.117
> 
> 标签：c, arrays, struct, initialization

我有一个这样的结构：

```
typedef struct
{
   int a;
   int b;
   int c;
   int d;
} Hello; 
```

然后我以这种方式声明它：

```
Hello hello[6] = {}; 
```

然后我收到了这个警告：ISO C 禁止空初始化大括号，无论如何我认为我需要初始化它，如何以正确的方式进行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T19:02:34.510

这不是有效的 C。C 中的通用零初始值设定项是`{0}`，而不是`{}`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T19:03:09.533

```
Hello hello[6] = {{0}}; 
```

将每个结构的所有成员初始化为 0。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T19:02:51.467

尝试这样的事情： -

```
 Hello hello[6] = {{0}}; 
```

这会将 struct 的所有成员初始化为 0。

# android - 在 doInBackground 方法中启动活动

> ID：13295875
> 
> 赞同：0
> 
> 时间：2012-11-08T18:59:27.113
> 
> 标签：android, android-asynctask

在下面的代码中，我从 Internet 下载 json 并希望显示在列表中。如果列表为空，则转到另一个活动，但其他活动未开始。没有错误，但没有开始活动。感谢您的帮助

```
package ir.mohammadi.android.nightly;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class AllNotes extends ListActivity {

    ProgressDialog pDialog;

    ArrayList<HashMap<String, String>> noteList;

    JSONArray notes = null;

    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR_MSG = "error_message";
    private static String KEY_NOTE_ID = "note_id";
    private static String KEY_NOTE_SUBJECT = "note_subject";
    private static String KEY_NOTE_DATE = "note_date";

    private static String EXECUTE_RESULT = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.note_list);

        noteList = new ArrayList<HashMap<String, String>>();
        new LoadAllNotes().execute();
        ListView lv = getListView();
    }

    public class LoadAllNotes extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllNotes.this);
            pDialog.setMessage("لطفا صبر کنید...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        protected String doInBackground(String... args) {

            UserFunctions userFunctions = new UserFunctions();

            JSONObject jSon = userFunctions.getAllNotes("1");

            Log.i("AllNotes >> jSon >>", jSon.toString());
            try {
                String success = jSon.getString(KEY_SUCCESS);
                if (success == "1") {
                    notes = jSon.getJSONArray("notes");

                    for (int i = 0; i < notes.length(); i++) {
                        JSONObject c = notes.getJSONObject(i);

                        String id = c.getString(KEY_NOTE_ID);
                        String subject = c.getString(KEY_NOTE_SUBJECT);
                        String date = c.getString(KEY_NOTE_DATE);

                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(KEY_NOTE_ID, id);
                        map.put(KEY_NOTE_SUBJECT, subject);
                        map.put(KEY_NOTE_DATE, date);

                        noteList.add(map);
                    }

                } else {

                    finish();
                    Toast.makeText(getApplicationContext(),
                            jSon.getString(KEY_ERROR_MSG), Toast.LENGTH_SHORT).show();

                    Log.i("AllNotes >> No nightly >>", "...");

                    Intent i = new Intent(getApplicationContext(), login.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(String file_url) {
            pDialog.dismiss();

            runOnUiThread(new Runnable() {

                public void run() {
                    ListAdapter adapter = new SimpleAdapter(AllNotes.this,
                            noteList, R.layout.list_item, new String[] {
                                    KEY_NOTE_ID, KEY_NOTE_SUBJECT,
                                    KEY_NOTE_DATE }, new int[] {
                                    R.id.list_lbl_id, R.id.list_lbl_subject,
                                    R.id.list_lbl_date });
                    setListAdapter(adapter);
                }
            });
        }
    }
} 
```

日志猫 json ：

```
11-08 22:17:44.467: I/getAllNotes params before getting from net >>(599): [tag=getNotesList, user_id=1]
11-08 22:17:47.647: I/Input stream >>(599): org.apache.http.conn.EofSensorInputStream@44ededd8
11-08 22:17:47.767: I/JSON string builder >>(599): a{"error":"1","error_message":"\u0634\u0645\u0627 \u0647\u0646\u0648\u0632 \u0634\u0628\u0627\u0646\u0647 \u0627\u06cc \u0646\u0646\u0648\u0634\u062a\u0647 \u0627\u06cc\u062f."}
11-08 22:17:47.797: I/getAllNotes params after getting from net >>(599): {"error":"1","error_message":"dont have any note"}
11-08 22:17:47.797: I/AllNotes >> jSon >>(599): {"error":"1","error_message":"dont have any note"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:16:09.827

您的问题最可能的原因是这一行：

```
String success = jSon.getString(KEY_SUCCESS); 
```

你没有发布它，但我敢打赌最后一行下面有一个 JSONException 堆栈跟踪。 `getString()`如果找不到密钥，将抛出异常，并且在您注销的 JSON 数据中，没有“成功”密钥。该异常导致您在事后编写的所有代码根本没有被调用，这就是您看不到任何事情发生的原因。

其他需要注意的事项：

1.  `success == "1"`不是进行字符串相等的正确方法。运算符检查对象是否相等（相同的`==`对象），如果要检查两个字符串是否相同，请使用我们`success.equals("1")`。
2.  `onPostExecute()`总是在主线程上为您调用。您不必`runOnUiThread()`从该方法中调用...它是多余的。
3.  从技术上讲，像您所做的那样从后台线程启动 Activity 是可以的，但是您不能以这种方式显示 Toast。当您修复异常时，该`Toast.makeText()`行最终会失败，因为您无法从主线程以外的线程显示 Toast。

一般来说，最好在主线程上执行所有 UI 操作，并且作为设计点，您应该将任何操作或更改屏幕的代码移入`onPostExecute()`，以便可以在正确的时间调用它。这就是它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:11:42.610

这变得很棘手。需要注意的一些事项：

```
 Intent i = new Intent(getApplicationContext(), login.class); 
```

确保登录类的类型在清单中。通常您通过类的名称引用该类，而不是实例化的变量。老实说，它不应该有所作为，但值得一试。

有时，使用不同的上下文会产生奇怪的副作用。我认为 startActivity 对此非常敏感。您可以尝试 AllNotes.this 来获取正在运行的活动的上下文。这需要在 UI 线程上运行的可能性很小，因此如果这不起作用，您可以尝试 runOnUiThread()。

# cognos - cognos error: The request was cancelled by the user.....如何在不重启服务器的情况下解决

> ID：13295887
> 
> 赞同：0
> 
> 时间：2012-11-08T19:00:51.260
> 
> 标签：cognos

当我尝试在 cognos 10.1 中运行报告时，我总是收到错误：遇到 XQE 错误：用户取消了请求。

当我们重新启动 cognos 服务器时，错误消失了。有没有其他方法可以解决这个问题，因为重启这么多次是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:02:05.213

如果我运行报告，取消它，然后再次运行相同的报告，就会发生这种情况。这是由于“高亲和力”感到困惑并试图重用已取消的进程。

当我第三次运行报告时，它很好。

它只发生在单个报告、所有报告、一些报告中吗？你究竟是如何重现这个问题的？

如果重新启动服务器是一个问题，您可以只安装两个应用程序服务器并一次重新启动它们，您的用户将完全不会遇到停机时间。

我认为您无法在这里解决它，但我们至少可以让您考虑更清楚地说明您的问题。

# linq-to-entities - Firebird POSITION 意外行为？

> ID：13295894
> 
> 赞同：2
> 
> 时间：2012-11-08T19:01:21.570
> 
> 标签：linq-to-entities, firebird

我在 Firebird 2.5.2 中有一张桌子：

```
create table SearchTest ( val varchar(20) ) 
```

其中有两行：

```
insert into SearchTest ( val ) values ('one')
insert into SearchTest ( val ) values ('three') 
```

我想选择列“val”包含“one”或“hre”的所有行。使用 linq 我可以将其表示为：

```
var a = from b in TestEntities.SEARCHTESTs
        from c in new []{ "one", "hre" }
        where b.VAL.Contains(c)
        select b; 
```

这会生成如下查询：

```
SELECT
"C"."VAL" AS "VAL"
FROM  "SEARCHTEST" AS "C"
CROSS JOIN  (SELECT
        _UTF8 X'4F4E45' AS "C1"
        FROM  ( SELECT 1 AS X FROM RDB$DATABASE) AS "D"
UNION ALL
        SELECT
        _UTF8 X'485245' AS "C1"
        FROM  ( SELECT 1 AS X FROM RDB$DATABASE) AS "E") AS "F"
WHERE ((POSITION("F"."C1", "C"."VAL")) > 0) 
```

不过，为了便于检查，这也是同样的事情：

```
SELECT
  val,
  substr,
  POSITION(Substr, Val) as pos
FROM
  SearchTest
CROSS JOIN
(
  SELECT 'one' AS substr FROM RDB$DATABASE
  UNION ALL
  SELECT 'hre' AS substr FROM RDB$DATABASE
) 
```

使用搜索词“one”和“hre”，结果如您所料：

```
val   substr pos
---   ------ ---
one   one    1
three one    0
one   hre    0
three hre    2 
```

但是，如果搜索词的长度不匹配：

```
SELECT
  val,
  substr,
  POSITION(Substr, Val) as pos
FROM
  SearchTest
CROSS JOIN
(
  SELECT 'one' AS substr FROM RDB$DATABASE
  UNION ALL
  SELECT 'hree' AS substr FROM RDB$DATABASE
) 
```

匹配失败：

```
val   substr pos
---   ------ ---
one   one    1
three one    0
one   hree   0
three hree   0 
```

如果我转换搜索词（转换类型不必匹配，如此处所示）：

```
SELECT
  val,
  substr,
  POSITION(Substr, Val) as pos
FROM
  SearchTest
CROSS JOIN
(
  SELECT cast('one' as varchar(3)) AS substr FROM RDB$DATABASE
  UNION ALL
  SELECT cast('hree' as char(5)) AS substr FROM RDB$DATABASE
) 
```

比赛再次进行：

```
val   substr pos
---   ------ ---
one   one    1
three one    0
one   hree   0
three hree   2 
```

为什么会这样，有没有办法解决它？

**编辑：**

Jiri Cincura 已经注意到这个错误会在下一个版本中修复；字符串常量现在显式地转换为 varchars。Firebird 跟踪器问题：[http ://tracker.firebirdsql.org/browse/DNET-466](http://tracker.firebirdsql.org/browse/DNET-466)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:22:40.840

Firebird 将文字视为，因此当您在此处 (和)`CHAR`有两个不同长度的文字时，它会将它们描述为.`'one'``'hree'``CHAR(4)`

为了说明这一点，在 ISQL with `SQLDA_DISPLAY ON`is 中，类似查询的输出是：

```
SQL> SET SQLDA_DISPLAY ON;
SQL> SELECT 'one' as X FROM RDB$DATABASE
CON> UNION ALL
CON> SELECT 'hree' as x FROM RDB$DATABASE;

INPUT  SQLDA version: 1 sqln: 10 sqld: 0

OUTPUT SQLDA version: 1 sqln: 20 sqld: 1
01: sqltype: 452 TEXT                    sqlscale: 0 sqlsubtype: 0 sqllen: 4
  :  name: (0)  alias: (1)X
  : table: (0)  owner: (0)

X
======
one
hree 
```

类型 452 TEXT 是用于`CHAR`列的 Firebird 类型。`sqllen`表示它的长度为 4。因为这`'one'`意味着它实际上是`'one '`（注意额外的空间）。因此，当它被馈送到 时`POSITION`，它不匹配，因为您的原始值为“一”（作为 VARCHAR）。

我不确定这是否是一个错误`POSITION`（ 的行为`CHAR`是 SQL 标准的一个令人讨厌的特性），或者 Firebird`CHAR`用于文字的方式是否需要更改为`VARCHAR`. 虽然这确实令人困惑，所以我建议将其报告为[http://tracker.firebirdsql.org/browse/CORE上的错误](http://tracker.firebirdsql.org/browse/CORE)

现在，如果您正在编写直接查询，则解决方案与上一个示例中一样。由于您将文字之一转换为`VARCHAR`，联合将自动将所有值转换为`VARCHAR`：

```
SQL> SELECT CAST('one' AS VARCHAR(3)) as X FROM RDB$DATABASE
CON> UNION ALL
CON> SELECT 'hree' as x FROM RDB$DATABASE;

INPUT  SQLDA version: 1 sqln: 10 sqld: 0

OUTPUT SQLDA version: 1 sqln: 20 sqld: 1
01: sqltype: 448 VARYING                 sqlscale: 0 sqlsubtype: 21 sqllen: 4
  :  name: (0)  alias: (1)X
  : table: (0)  owner: (0)

X
======
one
hree 
```

448 VARYING 类型是`VARCHAR`. 请注意，长度为 4 而不是演员表中的 3，因为 Firebird 会将其扩展到找到的最大尺寸（在 的第二部分中`UNION`）。

由于您不是直接编写 SQL，因此我不确定这里的解决方案是什么。您可以为 Firebird .NET 提供程序添加改进请求，以便`VARCHAR`为这些类型的转换转换值（在[http://tracker.firebirdsql.org/browse/DNET](http://tracker.firebirdsql.org/browse/DNET)的跟踪器中）

# facebook - Facebook Open Graph - 发出 HTTP DELETE 请求

> ID：13295896
> 
> 赞同：0
> 
> 时间：2012-11-08T19:01:31.010
> 
> 标签：facebook, facebook-graph-api, jquery, facebook-javascript-sdk, facebook-opengraph

我正在尝试通过 Ajax HTTP DELETE 请求删除权限，但我得到的响应不是图形 api 文档所说的我应该得到的。它说我应该得到一个布尔响应（“如果删除成功则为真，否则出错。”）。但相反，我得到了权限列表的整个对象：

```
var revokePermission = function(permName) {

    var revoke_perm_url = "https://graph.facebook.com/me/permissions" +
                          "?access_token=" + access_token + "&callback=?";

    $.ajax({
        type: "DELETE",
        dataType: "jsonp",
        url: revoke_perm_url,
        data: {'permission': permName},
        success: function(response){
            console.log(response);
        }
    });
}

revokePermission(permission_name); 
```

这是我回来的：

```
data: Array[1]
    0: Object
        bookmarked: 1
        create_note: 1
        email: 1
        installed: 1
        photo_upload: 1
        publish_actions: 1
        publish_stream: 1
        read_stream: 1
        share_item: 1
        status_update: 1
        user_interests: 1
        user_likes: 1
        user_status: 1
        video_upload: 1 
```

请注意，api 文档说：

> 您可以完全取消对应用程序的授权，或者通过分别向 PROFILE_ID/permissions 或 PROFILE_ID/permissions/PERMISSION_NAME 发出 HTTP DELETE 来代表用户撤销特定权限。此请求必须使用当前应用程序的值 user access_token 进行。

我理解这一切，所以当我向特定权限 url（即“/permissions/user_likes/”）或使用通过 ajax 数据参数发送的权限的基本权限 url 发出请求时，它们都只返回一个对象我当前的所有权限，以及我请求删除的权限保持不变。

但是，当我在 url 和正在发送的数据中设置权限时，它返回一个带有错误的对象：

```
Object
    error: Object
    code: 2500
    message: "Cannot specify permission in both the path and query parameter."
    type: "OAuthException" 
```

有谁知道发生了什么？请注意，auth.revokeExtendedPermission 的 LEGACY REST 方法确实可以按 (http://developers.facebook.com/docs/reference/rest/auth.revokeExtendedPermission/) 工作。它返回一个布尔响应并删除相应的权限。

解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:56:24.917

完整的代码，经过测试，返回“真”：

```
var revokePermission = function(permName) {
    var revoke_perm_url = "https://graph.facebook.com/me/permissions";
    $.ajax({
        type: "POST",
        dataType: "jsonp",
        url: revoke_perm_url,
        data: {
           'access_token' : 'access_token_here',
           'permission': permName,
           'method' : 'delete'
        },
        success: function(response){
            alert(JSON.stringify(response, null, 4));
        }
    });
}
revokePermission("email"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:05:40.467

“type: DELETE”真的可以发送 HTTP DELETE 请求吗？您得到的响应是对 GET 请求的响应`/<USER>/permissions`

您可以通过添加另一个参数“方法”来伪造删除请求，并`delete`在发出 GET 请求时将其设置为，即

```
data: {
'permission': permName
'method' : 'delete'
}, 
```

# sql-server - 从日期派生文本字符串

> ID：13295900
> 
> 赞同：1
> 
> 时间：2012-11-08T19:01:39.033
> 
> 标签：sql-server, tsql

我可以使用一些帮助从代表日期的文本字符串中推导出一年的季度。我有一个字符串，比如“20121230”，代表 2012 年 12 月 30 日。不知何故，我需要将此值转换为“4Q12”。将 20121230 转换为日期后我卡住了：

```
CONVERT(date,datestringfield,111) 
```

我需要帮助从该日期推导出季度和年份，然后将季度和年份转换为字符串格式 4Q12。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:07:07.130

如果您使用的是 SQL Server，那么 的特定格式`datestringfield`可以明确地用作日期。所以，你可以这样做：

```
SELECT  DATENAME(QUARTER,datestringfield) + 'Q' + 
        RIGHT('00'+DATENAME(YEAR,datestringfield),2) 
```

# c# - 列表框单元格仅在滚动后更新

> ID：13295903
> 
> 赞同：1
> 
> 时间：2012-11-08T19:01:49.277
> 
> 标签：c#, wpf, xaml, listview

我有一个简单的列表视图，带有一个网格控件。我已经使用 observablecollection 将对象绑定到网格。inotifyPropertyChanged 在 setter 上实现。

网格有三列。在一个按钮上单击我加载了两列中包含一些数据行的网格。然后用户单击另一个按钮，我也在网格的第三列中添加了一些文本。问题是这个新文本只显示在网格中当前不在屏幕上的那些行上。如果我向下和向上滚动，其余的也会在它们离开滚动区域之外的屏幕区域时立即加载。

这可能是一个入门问题，但我已经尝试了我的代码的各种排列，并且搜索和阅读了文章但没有任何帮助。

XAML

```
<Window x:Class="MediaFolderCleanupTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="392" Width="582">
    <Grid Height="340" Width="550">
        <Button Content="Search" Height="23" HorizontalAlignment="Left" Margin="12,38,0,0" Name="btnSearch" VerticalAlignment="Top" Width="75" Click="button1_Click" />
        <ListView ItemTemplate="{Binding FileItem}" Height="198" HorizontalAlignment="Left" Margin="14,67,0,0" Name="lstTargetFiles" VerticalAlignment="Top" Width="524" >
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="" Width="40">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding IsSelected}" Name="Select" IsThreeState="False"  Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="File"
                      Width="350"
               DisplayMemberBinding="{Binding Path=Name}" />
                    <GridViewColumn Header="Status"
                      Width="100"
               DisplayMemberBinding="{Binding Path=Status}" />
                </GridView>
            </ListView.View>
        </ListView>
        <Button Content="Delete" Height="23" HorizontalAlignment="Left" IsEnabled="False" Margin="13,306,0,0" Name="btnDelete" VerticalAlignment="Top" Width="75" Click="btnDelete_Click_1" />
        <Label Height="28" HorizontalAlignment="Left" Margin="16,271,0,0" Name="lblCount" VerticalAlignment="Top" Width="371" />
    </Grid>
</Window> 
```

在屏幕上单击按钮，调用以下内容

```
private void DelFiles(ObservableCollection<FileItem> files)
        {

            foreach (FileItem fi in files)
            {
                try
                {
                    fi.Status = "Deleted";
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.InnerException);
                    fi.Status = "Error Deleting";
                }
            }
        } 
```

这是 FileItem 类

```
class FileItem : INotifyPropertyChanged
    {

        public const string NamePropertyName = "CheckBoxState";

        private bool _checkboxstate = true;

        public string Name { get; set; }
        public string Status { get; set; }
        public bool IsSelected
        {
            get
            {
                return _checkboxstate;
            }
            set
            {
                if (_checkboxstate == value)
                {
                    return;
                }
                _checkboxstate = value;
                OnPropertyChanged(NamePropertyName);
            }

        }
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:36:20.777

试试这个：

```
class FileItem : INotifyPropertyChanged
    {

        public const string NamePropertyName = "CheckBoxState";

        private bool _checkboxstate = true;

        public string Name { get; set; }

        string _status;     
        public string Status 
        { 
            get { return _status; } 
            set { _status = value; OnPropertyChanged("Status"); } 
        }

        public bool IsSelected
        {
            get
            {
                return _checkboxstate;
            }
            set
            {
                if (_checkboxstate == value)
                {
                    return;
                }
                _checkboxstate = value;
                OnPropertyChanged(NamePropertyName);
            }

        }
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

# php - 回声会话问题

> ID：13295904
> 
> 赞同：-2
> 
> 时间：2012-11-08T19:01:57.390
> 
> 标签：php, session-variables

并感谢他们以前帮助过我的人。我有一个小错误，我尝试了一些东西但没有用，

```
$rows = ( "SELECT `adminid`, `notes` FROM `admin` WHERE `adminid` = '".$_SESSION['adminid']."' LIMIT 1" );
$result1 = ( "SELECT * FROM `log` ORDER BY `logid` DESC LIMIT 15" );
include( "./templates/".TEMPLATE."/header.php" ); 
```

这条线：

```
echo ( $_SESSION['msg1'],$_SESSION['msg2'] ); 
```

有问题。我有“，”它让我遇到问题，也许有人可以解释我或帮助我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:07:41.263

`echo $_SESSION['msg1'], $_SESSION['msg2'];`

去除那个`()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:04:07.233

要在 PHP 中连接，您需要使用句点：

```
echo $_SESSION['msg1'] . $_SESSION['msg2']; 
```

或者

```
echo $_SESSION['msg1'] . ' and ' . $_SESSION['msg2']; 
```

如果您想查看所有会话变量以了解某些可能无法正常工作的原因，您可以尝试将它们转储为：

```
var_dump($_SESSION); 
```

这将为您提供其中所有内容的列表。可能会发现您的变量尚未设置。

# php - AS3 URLRequest 在本地工作，而不是在服务器上

> ID：13295909
> 
> 赞同：0
> 
> 时间：2012-11-08T19:02:12.130
> 
> 标签：php, json, actionscript-3, cross-domain, flashdevelop

所以我有一个 URL 请求我正在向一个站点发出.. 并且在本地一切正常，但在服务器上却没有。

我尝试过使用跨域文件，但不确定我是否正确执行此操作。这是我的请求（出于安全目的更改了 URL）。

```
var ureq:URLRequest = new URLRequest("https://this.that.site.com/Live/V6/this.svc/GetUserProfile");
ureq.method = URLRequestMethod.POST;
ureq.data = JSON.encode(uvars);

ureq.contentType = "application/json; charset=utf-8";

var uload:URLLoader = new URLLoader();
uload.addEventListener(Event.COMPLETE, responseJSONCaches);
uload.load(ureq); 
```

响应只是对萤火虫的简单跟踪。

我的 crossdomain.xml 看起来像这样：

```
<?xml version="1.0"?>
<cross-domain-policy>
    <allow-access-from domain="*" secure="false"/>
</cross-domain-policy> 
```

目前仅用于测试目的，直到我弄清楚我将限制其他域的问题。

有人可以给我一些见解。我很少访问这些问题，所以我有点不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:35:11.773

解决了。

对我来说不是问题。客户端从未正确设置 crossdomain.xml -_-

# ruby-on-rails - 如何使用 rspec 和 capybara 在 RoR 中运行集成测试

> ID：13295910
> 
> 赞同：0
> 
> 时间：2012-11-08T19:02:12.053
> 
> 标签：ruby-on-rails, rspec, integration

从理论上讲，我对 RoR 中单元测试和集成测试之间的区别有很好的理解。我正在使用 rspec 和 capybara 在我的网站上进行大量测试。我不明白的是你如何运行不同的测试？如果我做

```
bundle exec rspec 
```

它将在我的所有规范文件夹（模型、控制器、视图、集成等）中运行我的所有规范。如果我想运行集成测试，它是否简单？

```
bundle exec rspec spec/integration 
```

我知道这些类型的幕后测试之间存在一些差异。具体来说，这个问题（我也有）让我思考单元与集成：[如何使用 Rspec 和 Capybara 测试重定向](https://stackoverflow.com/questions/10955474/how-to-test-for-a-redirect-with-rspec-and-capybara)

Rails 在运行集成测试时有什么不同？上述问题中发布的解决方案是

> rspec-rails 请求规范不支持检查重定向，但在 Rails 集成测试中支持。

那么如何使我的一项测试成为集成测试呢？只是将它放在正确的规范文件夹中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:22:00.767

据我了解，rspec 专为单元测试目的而设计，因此您需要使用其他东西进行集成测试。该消息似乎暗示 Rails 也可以进行集成测试。我没有任何单独在 Rails 中进行测试的经验或知识，但我确实知道为集成测试而构建的黄瓜 gem。

它有自己的领域特定语言和您需要习惯的其他怪癖，但它应该具有您正在寻找的功能。

# d - 实例化 redBlackTree 模板时出错

> ID：13295912
> 
> 赞同：5
> 
> 时间：2012-11-08T19:02:15.300
> 
> 标签：d, template-meta-programming, dmd

我在用字符实例化 RedBlackTree 容器时遇到问题，但它适用于整数：

```
import std.stdio;
import std.container;

void main()
{
        auto r1 = redBlackTree!(int)();   // works
        auto r2 = redBlackTree!(char)();  // error instantiating
} 
```

我正在使用 DMD32 D 编译器 v2.060。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:22:20.670

您需要使用可比较的类型（即可以使用 < 运算符或提供您自己的比较器作为第二个模板参数

`char`（和 wchar）仅可用于数组，因为它`char`不一定与 unicode（UTF8 版本）中的实际字母相关，这有其他陷阱会绊倒 D 中的新编码器

`dchar`另一方面，总是对应于一个字母，因此可以与另一个字母相比较，

D 中的经验法则始终使用`dchar`，除非它用于字符串类型（甚至考虑使用 dstring）

# php - 我可以更改 PHP 的开始和结束标记吗？

> ID：13295915
> 
> 赞同：2
> 
> 时间：2012-11-08T19:02:18.160
> 
> 标签：php, customization

我可以更改 PHP 的开始和结束标记吗？

就像我修改核心库文件并拥有类似的东西

```
<!J 
```

或者

```
!#RR 
```

代替

```
<? ?>  or <?php ?> 
```

# 更新

对于那些投票结束的人。相信我，总会有人问这个问题。对于那些想知道为什么？*叹息*

是的，我知道 Nginx 重写、Apache 处理程序、隐藏代码、删除扩展等。就我个人而言。我喜欢我希望在未来创建自己的编程语言的想法。因此，在使用 C 类型库的现有模板类型语言上重写标签将是一个开始。每次我开始为我写徒劳的文章时，我都会感到兴奋

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:24:51.037

正如所评论的，PHP 是一个开源项目。因此，您可以对其进行[修改](http://php.net/manual/en/internals2.ze1.zendapi.php)以供个人使用。

最终，这将涉及更新语言语法。通过快速浏览[Github 上的 PHP 项目](https://github.com/php/php-src/)，我找到了[语言扫描器](https://github.com/php/php-src/blob/master/Zend/zend_language_scanner.l)。[将适当的定义](https://github.com/php/php-src/blob/master/Zend/zend_language_scanner.l#L1726)从更改为`php`您想要的任何内容都应该允许您自定义打开/关闭标签。

**注意：**我不提倡这样做。因此还没有测试过这样的解决方案。虽然理论上应该可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:23:07.930

听起来很疯狂，但如果您需要，似乎可以破解 php 核心代码的引擎盖并对其进行修改：

[http://php.net/manual/en/internals2.ze1.zendapi.php](http://php.net/manual/en/internals2.ze1.zendapi.php)

# ssis - SSIS将数据导出到不同服务器上具有类似方案的数据库

> ID：13295917
> 
> 赞同：0
> 
> 时间：2012-11-08T19:02:32.670
> 
> 标签：ssis

我必须在不同实例上使用类似的数据库。我需要将所有表中的所有数据从一个实例导出到另一个实例。

我遇到的问题是我需要保留我插入身份的列中的所有唯一 ID。例子：

(Instance1-->Table1-->Id(Identity Column)) 的值需要与：(Instance2-->Table1-->Id(Identity Column)) 的值相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:15:23.800

在您的 OLEDB 目标上，有一个名为“`KeepIdentity`选择此选项”的选项。这是等价的`SET IDENTITY_INSERT ON`

# c++ - 是否可以专门化一个模板化函数，该函数根据 lambda 采用的参数数量接受 lambda 表达式？

> ID：13295935
> 
> 赞同：1
> 
> 时间：2012-11-08T19:03:32.230
> 
> 标签：c++, templates, c++11, lambda

如果我有一个采用 lambda 表达式的模板化函数，我该如何对其进行专门化，以便它可以与采用不同数量参数的 lambda 表达式一起使用？以下代码有效：

```
template<typename Lambda>
void doSomething(Lambda callback)
{
    callback();
}

doSomething([] () { /* some code here */ } ); 
```

但如果我也想这样称呼它：

```
doSomething([&foo] (int x)        { /* some code here */ } );
doSomething([&foo] (int x, int y) { /* some code here */ } ); 
```

我使用什么语法来提供 doSomething() 的专用版本？这个语法：

```
template<>
void doSomething<[] (int)>([] (int) callback)
{
    callback(3);
} 
```

不能在 Visual Studio 2012 下编译，而且我找不到任何关于有效语法的参考。可能吗 ？或者，是否可以从 doSomething() 内部判断提供的回调需要多少个参数，以便我可以执行以下操作：

```
template<typename Lambda>
void doSomething(Lambda callback)
{
    int numArgs = ???
    switch (numArgs) {
        case 0: callback();    break;
        case 1: callback(1);   break;
        case 2: callback(1,2); break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:25:36.507

lambda 有两种情况：何时捕获，何时不捕获。

对于第一种情况，您需要提取 lambda 的返回类型和参数类型（来自`operator()`lambda 的），这在[这个问题](https://stackoverflow.com/questions/11893141/inferring-the-call-signature-of-a-lambda-or-arbitrary-callable-for-make-functio)中有所涉及。

对于最后一种情况，您可以使用函数指针特化，因为非捕获 lambda 具有函数指针转换运算符。

关于您的`doSomething()`函数，不可能根据推导出的参数数量直接调用函子，就像您在此处所做的那样：

```
template<typename Lambda>
void doSomething(Lambda callback)
{
    int numArgs = ???
    switch (numArgs)
    {
        case 0: callback();    break;
        case 1: callback(1);   break;
        case 2: callback(1,2); break;
    }
} 
```

*`static if`（下一个 C++ 标准已经提出了所需的功能，请参阅[n3322](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3322.pdf)和[n3329](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3329.pdf)）*

您需要使用专门具有特定函数签名的辅助函数或结构。就像是：

```
template<typename T> struct helper {};
template<typename R, typename P1>
struct helper<R(P1)>
{
    static R call(R (*lambda)(P1)) { return lambda(magic_param); }
};
template<typename R, typename P1, typename P2>
struct helper<R(P1,P2)>
{
    static R call(R(*lambda)(P1,P2)) { return lambda(magic_param_1,magic_param_2); }
};
// ...
template<typename R, typename... A>
void doSomething(R (*callback)(A...))
{
    helper<R(A...)>::call(callback);
} 
```

这带来了一个重要的问题：您将如何生成参数 ( `magic_param...`) ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:44:13.057

使用 Synxis 提供的指向 ecatmur 答案的链接，我设法编写了一些我想要的东西。我重写了模板以使用 typedef，而不是使用 using 关键字的新模板别名，因此代码可以在较旧的编译器上运行。如果其他人想做类似的事情，我已经包含了下面的代码来展示它是如何完成的：

```
template<typename T> struct remove_class { };

template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...)> { typedef R(*type)(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const> { typedef R(*type)(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) volatile> { typedef R(*type)(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const volatile> { typedef R(*type)(A...); };

template<typename T>
struct get_function_signature {
    typedef typename remove_class<decltype(&std::remove_reference<T>::type::operator())>::type type;
};

template<typename R, typename... A>
struct get_function_signature<R(A...)> { typedef R(*type)(A...); };
template<typename R, typename... A>
struct get_function_signature<R(&)(A...)> { typedef R(*type)(A...); };
template<typename R, typename... A>
struct get_function_signature<R(*)(A...)> { typedef R(*type)(A...); };

// ***************************************************************************

template<typename T> struct num_args {};

template<typename R, typename... A>
struct num_args<R(*)(A...)> { static const int value = sizeof...(A); };

template<typename C, typename R, typename... A>
struct num_args<R(C::*)(A...)> { static const int value = sizeof...(A); };

// ***************************************************************************

template<typename Lambda, int> struct callWithArgsImpl {};

template<typename Lambda>
struct callWithArgsImpl<Lambda, 1> {
    static void doIt(Lambda callback, Object* pObj, int arg) { callback(pObj); }
};

template<typename Lambda>
struct callWithArgsImpl<Lambda, 2> {
    static void doIt(Lambda callback, Object* pObj, int arg) { callback(pObj, arg); }
};

template<typename Lambda, int N>
void callWithArgs(Lambda callback, Object* pObj, int arg)
{
    callWithArgsImpl<Lambda, N>::doIt(callback, pObj, arg);
}

// ***************************************************************************

template<typename Lambda>
void doSomething(int x, Lambda callback)
{
    // some code here which gets a pointer to an Object (pObj) and an
    // extra piece of information about where the object came from (arg1)

    const int numArgs = num_args<typename get_function_signature<Lambda>::type>::value;

    callWithArgs<Lambda, numArgs>(callback, pObj, arg1);
} 
```

这允许代码调用 doSomething() 函数，传入一个始终需要 Object* 参数的兰巴表达式，但如果不需要，可以省略第二个参数。所以以下两行都有效：

```
doSomething(5, [] (Object* pObj)           { printf("lambda called with no arg1\n"); } );
doSomething(2, [] (Object* pObj, int arg1) { printf("lambda called with arg1=%d\n", arg); } ); 
```

它有效，但我不禁觉得它有效，尽管有语言规范，而不是因为它。使用 lambda 表达式作为回调函数似乎是一件很自然的事情。而且我绝对可以看到我想要指定具有不同签名的回调的情况。这应该比这更容易做到......

# c# - 保留 DropDownList 设置

> ID：13295937
> 
> 赞同：1
> 
> 时间：2012-11-08T19:03:38.377
> 
> 标签：c#, asp.net

我有一个网页：**Menu.aspx**，其中我有以下相关控件：

*   带有一些值的 DropDownList
*   一个按钮，它将我重定向到一个名为 Edit.aspx 的页面。

在我的**Edit.aspx**页面中，我有一个取消按钮，它使用以下 C# 方法将用户重定向回菜单页面

```
protected void btnCancel_click(object sender, EventArgs e)
{
    Response.Redirect("Menu.aspx");
} 
```

我想做的是，当我将用户重定向回 Menu.aspx 时，我会保留他们选择的 DropDownList 的值。

提前致谢！

编辑：理想情况下，我想在没有 QueryString 的情况下实现这一点（如果可能）

EDIT2：我在想一些涉及视图状态或回发的东西，但我不熟悉这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:20:15.033

不是最优雅的解决方案，但您可以创建一个包含所选值的会话变量。

例如：

```
dropDown_SelectedIndex(object sender, EventArgs e)
{
   Session["SelectedItem"] = dropDown.SelectedValue;
} 
```

当您执行重定向时，在 Menu.aspx 的页面加载上，在填充 DropDown 后，检查此会话变量是否存在，然后选择该项目并将其从应用程序中删除。

```
void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
         //populate drop down here

         if(Session["SelectedItem"] != null)
         {
              dropDown.SelectedValue = Session["SelectedItem"].ToString();
              Session["SelectedItem"] = null;
         }
   }
} 
```

或者你可以通过查询字符串传递它，但是这样你可以保留你的 url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:21:04.917

当您打电话时，`Response.Redirect("Menu.aspx");`您已经提出了一个新的请求，而前一页不是其中的一部分。这就像重新调用页面。

您可以在进入 Edit.aspx 之前将值放入会话中，或者通过查询字符串将值传回

```
 Response.Redirect("Menu.aspx?dropdownvalue=123"); 
```

On `Menu.aspx`，您将检查是否`?dropdownvalue=123`存在并将所选项目设置为该值

# java - 如何从 DataStore 切换（迁移）到 Google Cloud SQL？

> ID：13295939
> 
> 赞同：0
> 
> 时间：2012-11-08T19:03:52.863
> 
> 标签：java, google-app-engine, google-cloud-datastore, google-cloud-sql

我有一个 Google App Engine Java 应用程序，它使用 Appengine 数据存储来实现其持久性（使用 JPA 和 Datanucleus）。现在我想将我的后端（数据库）迁移到 Google Cloud SQL。我已经创建了云 sql 帐户和实例。我还授予我的 GAE 应用程序使用此实例的权限。

现在，我该如何重写我的应用程序或者我应该对我的应用程序进行哪些更改，以便迁移到云 sql。

有什么好的教程吗？非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:41:23.527

我建议遵循[Using Google Cloud SQL with App Engine Java SDK](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide)。配置示例数据库后，为数据存储中的实体创建新表。

对于实际的数据迁移，您有一些可能的路线：

*   [在本地下载您的数据存储](https://developers.google.com/appengine/docs/python/tools/uploadingdata)，将条目操作到 SQL`INSERT`语句中，然后将它们上传到 Cloud SQL
*   编写一个脚本，读取数据存储并将行写入 SQL 数据存储（很可能使用任务队列和数据存储游标）
*   忽略应用程序中的旧数据并从头开始

# regex - 异常中异常的正则表达式

> ID：13295940
> 
> 赞同：0
> 
> 时间：2012-11-08T19:03:54.837
> 
> 标签：regex, exception

这里的这个问题帮助我如何做一个例外：[Regex with exception of specific words](https://stackoverflow.com/questions/1826059/regex-with-exception-of-particular-words)

基本上，`rx = /^(?!apple$|orange$|banana$)/`除了苹果、橙子和香蕉之外的所有东西都可以匹配。但是现在我需要知道如何为异常做一个异常。

```
rx = /^(?!.*$)/ 
```

我相信这会忽略所有内容，但是我应该添加什么以使其与某些预定义的单词（例如香蕉和苹果）不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:09:58.803

与相反的相反`x`是简单的`x`：

```
/^(apple|orange|banana)$/ 
```

上面的正则表达式只接受与、或*完全*匹配的输入。`apple``orange``banana`

# java - 分析堆转储，Map#size() 不是函数？

> ID：13295941
> 
> 赞同：7
> 
> 时间：2012-11-08T19:03:55.427
> 
> 标签：java, heap-memory, visualvm, oql

得到这个奇怪的错误：

`javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: size is not a function, it is null. (#1)`

在 VisualVM 上分析堆转储并运行此 OQL 查询时：

```
select { map: x } 
from java.util.concurrent.ConcurrentHashMap x 
where x.size() < 10 
```

问题出在该子句上，尽管显然有一个 size 方法`where`，但它以某种方式不起作用。`Map`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:54:00.667

@ruakh 的回答很好，除了一件小事。一个段有时可能是空的，这搞砸了`sum(x.segments, 'it.count')`。将其替换为

```
sum(x.segments, 'it != null ? it.count : 0') 
```

它会正常工作。经我的话考验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:39:04.280

翻阅[VisualVM OQL 文档](http://visualvm.java.net/oqlhelp.html)，我没有得到它支持 Java 方法调用的印象，只支持 Java 字段。（他们的一些示例包括`.toString()`，但这显然是 JavaScript`.toString()`而不是 Java 的，因为他们使用它来将 Java`String`对象转换为 JavaScript 字符串。）因此，例如，他们的字符串长度示例都使用私有字段`count`而不是公共方法`length()`，并且他们的向量长度示例使用私有字段`elementCount`而不是公共方法`size()`。

所以你得到的错误是因为`ConcurrentHashMap`没有名为`size`.

不幸的是，对于您的查询，`ConcurrentHashMap`它不会将其大小存储在字段中 - 这会损害其避免阻塞的能力 - 所以我认为您必须编写如下内容：

```
select { map: x }
from java.util.concurrent.ConcurrentHashMap x
where sum(x.segments, 'it.count') < 10 
```

自己总结所有段大小。（免责声明：100% 完全未经测试。）

# python - 如何在无需输入密码的情况下运行 Fabric 任意 sudo 命令？

> ID：13295942
> 
> 赞同：7
> 
> 时间：2012-11-08T19:03:56.457
> 
> 标签：python, fabric

使用 Fabric，根据[此文档](http://docs.fabfile.org/en/1.5/usage/fab.html#arbitrary-remote-shell-commands)，您可以运行任意 shell 命令，而无需`fabfile`像这样：

```
fab -H host1,host2 -- echo 'hello, world!' 
```

您也可以`sudo`以相同的方式运行命令，但系统会提示您输入`sudo`列表中每个主机的密码。

有没有办法避免`sudo`必须为每个主机输入密码，必须像 Fabric 功能一样`sudo()`工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:10:14.437

只需将以下行添加到 etc/sudoers，其中 myusername 应该是将运行 sudo 的预期用户。您应该了解执行以下操作的安全隐患。您可能还想限制以下选项以限制用户可以在没有密码的情况下执行 sudo 的命令。

```
myusername    ALL=(ALL) NOPASSWD: ALL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T12:39:31.797

您可以设置`env.password`让织物发挥作用或...

...您还可以为多台机器使用密码：

```
from fabric import env
env.hosts = ['user1@host1:port1', 'user2@host2.port2']
env.passwords = {'user1@host1:port1': 'password1', 'user2@host2.port2': 'password2'} 
```

看到这个答案：[https ://stackoverflow.com/a/5568219/552671](https://stackoverflow.com/a/5568219/552671)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:42:00.100

您还可以考虑针对 ssh 密钥文件进行 pam-authentication。这篇博文是一个不错的入门[读物](http://www.drhevans.com/blog/posts/195-using-ssh-agent-for-sudo-authentication/)。这样您就不必牺牲安全性。假设您确实有一个合格的帐户，您甚至可以在 sudo 操作之前将密钥文件复制到您的远程帐户中。:-)

# javascript - 字符串是 html 还是选择器？javascript

> ID：13295943
> 
> 赞同：0
> 
> 时间：2012-11-08T19:04:03.370
> 
> 标签：javascript, html, regex, string, selector

我从这里获取了一些代码： -[如何区分 jQuery 选择器字符串和其他字符串](https://stackoverflow.com/questions/6007821/how-do-i-distinguish-jquery-selector-strings-from-other-strings)- 并对其进行了一些修改。但是，我无法让匹配正常工作。我都试过了`.test`和`.exec`。

```
var htmlExpr = /^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/;
if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 || htmlExpr.test( selector )) {
    return true;
} else {
    return false;
} 
```

我正在使用`#mydiv`和`<div class='gallery'>gallery</div>blah`作为`selector`

两者都返回真。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:22:19.047

`#mydiv`正在返回 true ，因为您已经在这部分的正则表达式中专门检查了它`|#([\w\-]+)$`，您应该消除该部分以便`#mydiv`不匹配，如下所示：

```
var htmlExpr = /^[^<]*(<[\w\W]+>)[^>]*$/;
if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 || htmlExpr.test( selector )) {
    return true;
} else {
    return false;
} 
```

查看工作[**演示**](http://refiddle.com/gcd)

# php - Sonata 管理员捆绑电子邮件验证

> ID：13295956
> 
> 赞同：0
> 
> 时间：2012-11-08T19:04:40.373
> 
> 标签：php, symfony, sonata-admin

在 Sonata Admin 中添加电子邮件验证的最佳方法是什么？

我在 Google 群组中看到了一个关于它的讨论，它说：

“为什么要强制开发人员重复所有验证约束两次？”

[https://groups.google.com/forum/?fromgroups=#!topic/sonata-users/xO64f_haMks](https://groups.google.com/forum/?fromgroups=#!topic/sonata-users/xO64f_haMks)

真的吗？或者有没有办法同时使用 Symfony2 验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:26:37.627

最后它是这样工作的：

```
public function configureFormFields(FormMapper $formMapper)
{
    $formMapper
            ->add('email', 'email') 
```

# ruby-on-rails - 使用 f.select，未定义的方法 `map' 用于 nil:NilClass

> ID：13295957
> 
> 赞同：0
> 
> 时间：2012-11-08T19:04:44.657
> 
> 标签：ruby-on-rails, ruby

好的，所以我想在 f.select 表单中列出我的流派，但我收到了一个错误。我到处看，我只是不明白我在做什么不同。当我输入 rails c 并键入`g = Genre.all`时，它会列出所有类型，然后`g.map`输出`=> #<Enumerator: ...>`

错误：

```
undefined method `map' for nil:NilClass 
```

查看页面：

```
<%= f.fields_for :genres do |g| %>
  <div class="field">
    <%= g.label :genre %>
    <%= g.select :genres, @genres.map {|g| g.name} %>
  </div>
<% end %> 
```

控制器：

```
def create
  @song = Song.new(params[:song])
  @genres = Genre.all
  if @song.save
    redirect_to player_path
  else
    render :new
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:08:19.320

您还需要`@genres`在操作中分配变量`new`：

```
def new
  @genres = Genre.all
end 
```

# android - Android 和 MongoDB 上的 SQLite 同步

> ID：13295960
> 
> 赞同：4
> 
> 时间：2012-11-08T19:04:57.917
> 
> 标签：android, mongodb, sqlite, synchronization, nosql

是否可以在 Android 上使用 SQLite 并在服务器上使用像 MongoDB 这样的 NoSQL 数据库，两者之间有 2 路数据复制/同步？或者最好是两端都使用SQL，或者两端都使用NoSQL，但不能混合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:27:43.393

有几种不同的方法需要考虑：

1）使用实现多主机或MVCC（多版本并发控制）*并*在Android +您的服务器上运行的数据库产品。[MVCC 维基百科页面](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)上有一些示例，其中 CouchDB 是一种常见的解决方案。有一个[TouchDB-Android](https://github.com/couchbaselabs/TouchDB-Android)端口经过优化，可在 Android 上运行并支持复制到 CouchDB。

2）您的要求可能很简单（或独特），足以保证推出您自己的解决方案。一个常见的解决方案是在 Android 上使用 SQLite，并通过（可能是 RESTful）API 将信息同步到远程服务器。

在移动设备和服务器上使用相同的数据库解决方案并不是必需的，但使用类似的架构和查询语言可能会让你更清醒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T14:17:23.497

你可能想看看[SymmetricDS](http://www.jumpmind.com/)，我自己没有用过，但我正在考虑。

它目前允许 Android 上的 SQLite DB 同步到 mongoDB 后端，但目前还没有相反的方向。显然，您可以将必要的同步数据创建到中间同步数据库中，以便它返回到您的 SQLite 数据库。

还有一个 iOS 版本正在筹备中。

它具有 GPL 许可证，因此如果您将其用于商业用途，则需要付费（除非您的应用程序是开源的）。

# ruby-on-rails - 在 Rails 2 中覆盖资源路由

> ID：13295962
> 
> 赞同：1
> 
> 时间：2012-11-08T19:05:00.567
> 
> 标签：ruby-on-rails, ruby, http, http-headers, url-routing

我试图仅针对选项请求覆盖资源的路由。我需要这个来正确获取跨域照片上传请求。

路线.rb

```
map.resources :photos
map.connect '/photos', :controller => 'photos',
   :action => 'options_stuff', :conditions => {:method => :options } 
```

照片控制器.rb

```
def options_stuff
    puts "got to options@!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"
    set_access_control_headers
    head :ok
    render :nothing => true, :status => 200
end

def set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Max-Age'] = '1000'
    headers['Access-Control-Allow-Headers'] = '*,x-requested-with'
    puts "headers are #{headers}"
end 
```

但是它永远不会到达我需要的控制器。我究竟做错了什么？

顺便说一句，我正在关注以下两篇关于如何做到这一点的文章：http: [//www.codeodor.com/index.cfm/2011/7/26/Responding-to-the-OPTIONS-HTTP-method-request-in -Rails-Getting-around-the-Same-Origin-Policy/3387](http://www.codeodor.com/index.cfm/2011/7/26/Responding-to-the-OPTIONS-HTTP-method-request-in-Rails-Getting-around-the-Same-Origin-Policy/3387)

[https://gist.github.com/832700](https://gist.github.com/832700)

**更新** 在经历了很多痛苦和痛苦之后，我放弃了控制器的想法，尽管它确实像答案所暗示的那样工作。相反，有人建议使用 before 过滤器，如下所示：

设置前

```
before_filter :set_access_control_headers, :only => [:index]

def set_access_control_headers
  if !request.put? && !request.post? && !request.delete? && !request.get?
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Max-Age'] = '1000'
    headers['Access-Control-Allow-Headers'] = '*,x-requested-with'
    puts "headers are #{headers}"

    render :nothing => true, :status => 200
    return false
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:46:20.843

我相信路线的优先级从上到下，最高的优先级最高，最低的优先级最低。所以考虑像这样切换你的路线：

```
map.connect '/photos', :controller => 'photos',
 :action => 'options_stuff', :conditions => {:method => :options }
map.resources :photos 
```

# php - PHP：删除不在大列表中的行

> ID：13295964
> 
> 赞同：0
> 
> 时间：2012-11-08T19:05:06.697
> 
> 标签：php, mysql, xml, api, temp-tables

**如果表中的值不在**通过 XML API 传入的非常大的集合（20,000 项）中，我的应用程序需要更改它。显然，很容易创建一个非常慢的解决方案。

我想知道你会如何推荐这样做？我正在考虑将 XML 中项目的唯一 ID 添加到临时表中，然后执行单个查询：

```
UPDATE item SET status = "deleted" WHERE id NOT IN (SELECT id FROM keep_items); 
```

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:10:37.233

我最终使用了我提出的解决方案，即在读取数据时创建并填充一个临时表，然后运行：

```
DELETE FROM item WHERE item.id NOT IN (SELECT temp_item.id FROM temp_item); 
```

结果非常快。

# c# - 如何在 vs2012 C# 中向控制台发送信息

> ID：13295967
> 
> 赞同：0
> 
> 时间：2012-11-08T19:05:22.493
> 
> 标签：c#, visual-studio-2012

我想在 for 循环中记录一些数据。如何将数据发送到 VS2012 控制台以便稍后查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:08:37.600

~~你到底什么意思？会`Console.WriteLine(...)`吗？您是否考虑过阅读文档？~~

更新：如果在实际的 VS 控制台/shell 中用于调试目的的输出，可以在断点上设置操作（至少在 VS2017 中）：

设置一个动作（右键单击）： [![在断点上设置动作](../Images/c566213f214025ef4384835c5e9c83e8.png)](https://i.stack.imgur.com/o87MQ.png) 在 VS2013 中它被称为`When hit`

输出动作： [![添加和输出动作](../Images/bdbf723bc8c1fe175739dcd4c83042f3.png)](https://i.stack.imgur.com/oF4Cg.png)

输出控制台中的格式化输出 [![格式化输出](../Images/3800f5b78fcdd5f640f8af0798f1fe12.png)](https://i.stack.imgur.com/37ZSp.png)

# sql-server-2008 - 功能 SQL Server 2008

> ID：13295969
> 
> 赞同：0
> 
> 时间：2012-11-08T19:05:33.183
> 
> 标签：sql-server-2008

我昨天创建了以下函数，现在我遇到了一个错误：

> *传递给左侧或子字符串函数的长度参数无效*

你们能看看我的功能吗？我真的很感激。

```
Create function nowFunctionNewadd
      (@fladd varchar(255))
returns  @tbl table(addr varchar(100), city varchar(100),
                    state varchar(100), Zip varchar(5)) 
as
begin
   declare @str varchar(100)
      ,@i int
      ,@j int
      ,@str2 varchar(100)
      ,@address varchar(100)
      ,@city varchar(100)
      ,@lastcomma int
      ,@lastPart varchar(100)
      ,@zipstart int
      ,@zip varchar(5) = ''

   select @str=rtrim(ltrim(@fladd))

   set @i = charindex(',', @str)
   set @str2=rtrim(ltrim(substring(@str, @i+1, 999)))
   set @j=CHARINDEX(',',@str2)

   set @lastcomma = len(@str) - charindex(',', reverse(@str)+',')
   set @lastPart = substring(@str, @lastcomma+2, 100)
   set @address = REPLACE(rtrim(ltrim(substring(@str,1,@i-1))),',','')
   set @zipstart = patindex('%[0-9]%', @lastpart)
   set @city=LTRIM(RTRIM(substring(@str, @i+1, @j-1)))

   If @zipstart > 0 
      select @zip = substring(@lastpart, @zipstart, 5), 
             @lastPart = rtrim(substring(@lastpart, 1, @zipstart-1))

   insert into @tbl(addr, city, state, Zip)
   values(@address, @city, @lastpart, @zip)

   return
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:01:32.400

我可以从您的函数中看到的问题从这一行开始：

```
set @j=CHARINDEX(',',@str2) 
```

然后我猜测这条线正在引发错误：

```
set @city=LTRIM(RTRIM(substring(@str, @i+1, @j-1))) 
```

您的函数在您传递的字符串值中存在多个逗号的假设下工作。但是，如果您没有多个逗号，则 for 的值`@j`将为零，然后您尝试使用 a`-1`作为城市的长度，这将无法抛出您得到的错误。

我创建了一个带有演示的 SQL Fiddle。使用地址`'1234 S.Alameda way,LA,CA12345'`您的功能将起作用。

但是，如果您将值更改为 `'1234 S.Alameda way,LACA12345'`它将失败

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!3/d41d8/5983)

你知道你需要传递给函数的所有值的格式是什么吗？如果此格式要从 1 变为 2 甚至 3 逗号，我认为您需要重新考虑如何编写此函数，因为它不会按预期工作。

# c# - SQL Server 内置更改跟踪与同步框架的 C#/VB 库

> ID：13295971
> 
> 赞同：0
> 
> 时间：2012-11-08T19:05:35.107
> 
> 标签：c#, sql-server-2008, microsoft-sync-framework

我遇到了一个问题，在 Windows XP 32 位/SQL Server Express 2008（x86 ）。它确实适用于我的其他客户端，即 Windows 7 64 位/SQL Server Express 2008 (x86)：

SqlSyncStoreRestore databaseRestore = new SqlSyncStoreRestore(clientConn); databaseRestore.PerformPostRestoreFixup();

SUB QUESTION 1：它不起作用但也不会抛出任何异常，这使得故障排除变得更加困难。它是从我在我的 x64 计算机（使用 Visual Studio x86）上构建的一个小型控制台应用程序（目标 x86）执行的。我想知道 32/64 位的东西是否是罪魁祸首。有什么线索吗？？但是后来，这让我想知道：

SUB QUESTION 2：“是否有相当于使用 Sync Framework 的 C# 的 PerformPostRestoreFixup() 的 SQL 查询？”

我对 Sync Framework 还很陌生，还没有完全了解 Microsoft SQL Server 数据库同步的全貌。我注意到 SyncOrchestrator/SqlSyncProvider 组合不使用内置的 SQL 更改跟踪内容。令我难以置信的惊喜！它现在让我被一个更折磨人的问题困扰着：

SUB QUESTION 3: 内置的 SQL Server Change Tracking 和 Sync Framework 是两个完全独立的平台来构建我们的同步方案吗？我希望我在英语中使用了正确的单词。换句话说，他们每个人都完全不知道对方吗？

在此先感谢您的帮助！我迷路了，哈哈！

亲切的问候，

关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:58:59.583

好的，感谢 JuneT 将我指向 Sync Fx 2.1 SDK 的文档（在这里或者我在另一个讨论线程上阅读它？），我意识到我有一个我还没有尝试过的属性。在线阅读 Sync Fx 2.0（和其他？）在非 dbo 模式和多范围数据库方面存在问题，我想我会尝试一下。只需在我的控制台应用程序中添加以下 C# 行即可解决！

databaseRestore.ObjectSchema = "syncSchemaName";

最终，许多 JuneT 向我指出了一些好的阅读材料，因此我将其标记为答案。非常感谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:42:47.837

更新：为什么它没有改变值但也没有抛出异常？以下是最有可能的解释。它并没有完全回答为什么 scope_id 没有得到更新的问题，但它确实提供了额外的提示：

PerformPostRestoreFixup() 适用于数据库中的所有范围。我在数据库中定义了另一个（有效）范围，该范围已成功更改其 scope_id 值。但是，我的第二个范围（我无法更改 scope_id 的范围）存储在另一个模式中（不是默认的 .dbo）。我猜它只是没有看到范围，或者认为它无效，因此没有通知我。我试图取消配置第二个范围并收到以下错误：

* * *

## 在表“[scope_info]”中找不到名称为“syncScope”的有效范围。确保此范围存在并且在配置表“[scope_config]”中具有相应的有效配置。

因此，这两个问题可能具有相同的根本原因。

第二个范围确实存在，我可以使用 select 语句查看那个该死的 scope_id。现在我怎么知道配置是否有效？为什么恢复成功后会突然失效？我认为它缩小了范围，但对我来说还不够，呵呵 ;-) 我会继续发布我的发现和解决方案，以防有人大笑！开个玩笑，但有一天谁知道它可能会帮助（或混淆）谁，这取决于我猜当天的心情；-) 干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:06:45.603

问题 1 - 您是否尝试过启用同步 fx 跟踪？

VS Project Properties->Build Tab 下的 Platform Target 应该与安装的 Sync Fx 平台匹配。例如，x86 Platform Target 应该有 Sync Fx x86

如果 x86/x64 不匹配，通常会引发 COM 异常。

问题 2 - 您可以运行 SQL Profiler 来查看 PerformPostRestoreFixup 是什么。但我会坚持使用框架来执行此操作，因为其中涉及一些同步元数据处理。

问题 3 - SQL 更改跟踪只是更改跟踪。您仍然需要一个同步应用程序才能使用它。

SQL CT 跟踪已更改的内容并允许您查询已更改的内容。它本身并不是一个同步平台。

您需要一个同步应用程序来查询它，就像 Sync Fx 一样。或者您可以手动编写自己的 SQL 查询来查询更改。

Sync Fx 较旧的 SQLCeClientSyncProvider/DBServerSyncProvider/Sync Agent（本地数据库缓存项目项中使用的那个）可以使用 SQL CT。

# activerecord - Rails 和 Padrino ActiveRecord 忽略 .select 中的 GROUP_CONCAT

> ID：13295974
> 
> 赞同：1
> 
> 时间：2012-11-08T19:05:39.063
> 
> 标签：activerecord, ruby-on-rails-3.2, padrino

Rails 3 或 Padrino 中的 ActiveRecord 忽略`GROUP_CONCAT`了`.select`.

我试图弄清楚为什么 AcitveRecord 忽略了这个查询：

```
Dvd.includes(:dvd_director, :dvd_producer).
      select(" 
      GROUP_CONCAT(DISTINCT dvd_director.director SEPARATOR ', ') AS director
      , GROUP_CONCAT(DISTINCT dvd_producer.producer SEPARATOR ', ') AS producer
      ...
      .where("id = 4") 
```

查询被执行，但所有`GROUP_CONCAT`s 都被忽略并且信息不在结果中。这是[此问题](https://stackoverflow.com/questions/12745302/rails-activerecord-way-to-write-this-sql-to-send-it-as-a-json-string)的简化版本，尚未得到解答。

我在某个地方读到了你应该使用`.cacluate`的地方，但这给了我一个错误。

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-30T08:29:32.587

我想我后来读到这不受支持，因为 AR 无法知道您正在使用哪种数据库技术，因此某些功能不可用，而且显然`GROUP_CONCAT`并非所有 SQL 技术都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T18:24:55.410

导轨 4

我的查询遇到了类似的问题：

```
@project
.fields_numbers_projects
.select("*, GROUP_CONCAT(fields_numbers_projects.dates_project_id) AS dpid")
.group(:group_id)
.each do |fpn| 
```

ActiveRecord 的结果是：

```
<#FieldsNumbersProject 
id: 1, group_id: 1, project_id: 1, dates_project_id: 1, fields_project_id: 1, employee_id: nil>
<#FieldsNumbersProject 
id: 1, group_id: 2, project_id: 1, dates_project_id: 1, fields_project_id: 1, employee_id: nil> 
```

它在 ActiveRecord 结果中没有“dpid”或只有 GROUP_CONCAT(dates_project_id) 的迹象，而您可以将其用作**fpn.dpid**。

我被 ActiveRecord 结果愚弄了十分钟而没有尝试打印。

# c++ - (*it)->method() 与 (**it).method

> ID：13295978
> 
> 赞同：7
> 
> 时间：2012-11-08T19:05:55.130
> 
> 标签：c++, vector, iterator, dot-operator

当迭代指针的向量（或其他容器）时，使用：

```
for (it = v.begin(); it != v.end(); ++it) {
    (*it)->method();
} 
```

或者

```
for (it = v.begin(); it != v.end(); ++it) {
    (**it).method();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T19:08:45.553

在 C 语言中，没有区别。但是，在 C++ 中，`->`运算符可以重载，而成员选择`.`运算符不能。

因此 in`(*foo)->bar` `*foo`可以指定一个充当智能指针的类对象，尽管如果`foo`它是标准 C++ 指针容器上的迭代器，则不会发生这种情况，这意味着`*foo`计算结果为指针。

并且 in必须是一个类对象，其中包含一个名为`(**foo).bar`（可访问）的成员。`**foo``bar`

一元`*`也可以被重载（这就是迭代器`foo`，一个类对象，返回它引用的对象的方式）。

换句话说，表达式*可以*在含义上有所不同，但如果`*foo`是指向类/结构的指针，则从 C 语言继承的等价适用：`(*ptr).member`等价于`ptr->member`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:35:52.080

它们是等价的：定义的标准（用于指针）

> 5.2.5 类成员访问[expr.ref]
> 2：对于第一个选项（点），第一个表达式应具有完整的类类型。对于第二个选项（箭头），第一个表达式应具有指向完整类类型的指针。**表达式 E1->E2 被转换为等价形式(*(E1)).E2**；5.2.5 的其余部分将只处理第一个选项（点）。65 在任何一种情况下，id 表达式都应命名类的成员或其基类之一。

类和覆盖 -> 和 * 运算符在此处不相关，因为容器包含指针。

因此：

```
(*it)->method();

// Is equivelent to:

(*((*it))).method();

// This is equivelent too:

(**it).method(); // thus both expressions are identical in this context. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T19:08:17.380

不`->`，只是说将结构作为指针访问。`.`就像它只是一个结构一样。它是句法的 - 在功能方面没有区别。

编辑：你可以重载`->`让它做一些不同的事情，尽管假设你不这样做是一样的。不知道你为什么要这样做，但如果你这样做了，那么你必须使用额外的`*`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T19:28:38.230

在 Ubuntu 12.04 上，列表迭代器以下列方式实现：

```
template<typename _Tp>
struct _List_iterator
{

  // ...
  reference
  operator*() const
  { return static_cast<_Node*>(_M_node)->_M_data; }

  pointer
  operator->() const
  { return std::__addressof(static_cast<_Node*>(_M_node)->_M_data); }

  // ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T19:08:10.453

他们是一样的。例如，您可以根据使用的编码约定使用其中一种。

`->`和`*`运算符可以重载，而`.`运算符不能。

# api - Spotify API：专辑名称在单个查询中出现多次

> ID：13295979
> 
> 赞同：0
> 
> 时间：2012-11-08T19:06:05.147
> 
> 标签：api, uri, spotify

我从下面列出的查询中收到了多个专辑名称。我想知道是否有一种方法可以只接收专辑名称的一个实例。

[http://ws.spotify.com/lookup/1/?uri=spotify:artist:3TVXtAsR1Inumwj472S9r4&extras=album](http://ws.spotify.com/lookup/1/?uri=spotify:artist:3TVXtAsR1Inumwj472S9r4&extras=album)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:25:11.170

抱歉不行。

出于各种原因，艺术家经常会发行同一张专辑的多个版本。通常，世界不同地区的专辑版本略有不同 - 实际上，在示例中，您提供的`territories`密钥对于每个副本都有不同的值。

根据您的用例，您需要正确处理此问题。如果您建议用户收听专辑，则需要确保该专辑在用户所在的地区可用。

如果您只是在静态页面上列出专辑而不链接到它们，那么将名称列表放在一组以减少重复项就足够了。

# php - 验证电子邮件地址

> ID：13295981
> 
> 赞同：0
> 
> 时间：2012-11-08T19:07:02.507
> 
> 标签：php, validation

我要回顾一个项目并整理一些验证位，通常我会使用正则表达式检查来验证电子邮件是否正确，然后我遇到了： http: [//de2.php.net/manual/en /function.filter-var.php](http://de2.php.net/manual/en/function.filter-var.php)

现在我已经尝试了几个测试，但我没有得到我预期的结果。

```
$email_b = 'bog^us@gmail.com';
var_dump(filter_var($email_b, FILTER_SANITIZE_EMAIL)); 
```

返回：

```
string(16) "bog^us@gmail.com" 
```

但对我来说，那没有经过消毒，然后当我尝试

```
if (filter_var($email_b, FILTER_VALIDATE_EMAIL)) {
    echo "This (email_b) email address is considered valid.";
} 
```

我再说一遍，这不是一个有效的电子邮件地址。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:12:39.163

是的，你错过了一些东西。`bog^us@gmail.com`是一个有效的电子邮件地址，因此您的测试将返回正确的结果。请参阅本文以快速了解电子邮件地址中的有效字符。

[http://en.wikipedia.org/wiki/Email_address](http://en.wikipedia.org/wiki/Email_address)

在电子邮件地址的本地部分（@ 之前的位）中，以下字符是合法的：-

*   大写和小写英文字母 (a–z, A–Z) (ASCII: 65–90, 97–122)
*   数字 0 到 9（ASCII：48–57）
*   字符 !#$%&'*+-/=?^_`{|}~ (ASCII: 33, 35–39, 42, 43, 45, 47, 61, 63, 94–96, 123–126)

加上链接文章中详述的其他一些限制。

本文提供了一些无效地址示例，供您在测试中使用。如：-

*   Abc.example.com（@ 字符必须分隔本地和域部分）
*   Abc.@example.com（字符点（。）在本地部分最后）
*   Abc..123@example.com（字符点（。）是双）

# jquery - 点击时 Jquery addclass/removeclass

> ID：13295982
> 
> 赞同：9
> 
> 时间：2012-11-08T19:07:04.230
> 
> 标签：jquery, html

当我单击菜单中的元素时，我正在尝试添加一个类 [active]。然后，当我单击菜单中的新项目并将 [active] 类添加到其中时，删除该类 [active]。

我试过了 `$(this).removeClass("active").addClass("active");`

```
$(this).toggleClass("active"); 
```

基本上我正在尝试制作 hover() 功能，但点击均匀。

编辑：固定 HTML

```
<ul class="menu">
    <li><span>Three</li>
    <li><span>Two</li>
    <li><span>One</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-08T19:09:29.130

假设一次只有一个`active`元素，并且没有进一步了解您的 DOM 层次结构。

```
$('.active').removeClass('active');
$(this).addClass('active'); 
```

如果 DOM 层次结构已知，则可以使用更有效的选项。

例如，如果他们都是兄弟姐妹，则可以使用：

```
$(this).addClass('active').siblings('.active').removeClass('active'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T19:09:36.950

**[演示](http://jsfiddle.net/x7xqb/1/)**- 工作示例。

更正了您的标记：

```
<ul class="menu">
  <li><span>Three</span></li>
  <li><span>Two</span></li>
  <li><span>One</span></li>
</ul> 
```

假设您希望`LI`标签具有`active`类。

```
<script>
$('.menu li').on('click', function(){
    $(this).addClass('active').siblings().removeClass('active');
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-10T08:31:37.153

试试[这个小库](https://github.com/Natteke/SmokinSexySoftware/tree/master/packages/Elemental)，你可以用原生js切换类吗？它会像

```
var menu = document.querySelector('.menu');
menu.addEventListener('click', function () {
  Elemental.toggleClass(this, 'active');
}) 
```

它将根据其存在添加或删除类。

# scala - 清除 Scala 工作表的输出

> ID：13295983
> 
> 赞同：7
> 
> 时间：2012-11-08T19:07:04.317
> 
> 标签：scala, scala-ide

每次在 Scala IDE 中保存 Scala 工作表时，每个表达式的输出都会作为注释打印在编辑器的右侧。有没有办法从 Scala 工作表中清除此输出，以便您可以剪切和粘贴代码？

目前，我的解决方案是保存有错误的工作表，这样输出就会消失。一定有更好的方法......键盘快捷键或其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:59:29.490

在等待票证被解决时，可以在查找/替换 (Ctrl/Cmd+F) 中使用此正则表达式来删除评论。

```
 *//[>|].*$
```

***更新：*** 已修复： [#132](https://github.com/scala-ide/scala-worksheet/issues/132)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T21:23:30.437

目前还没有这样的功能。有一张相关的票：[格式操作应该删除评论。](https://github.com/scala-ide/scala-worksheet/issues/92)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T04:15:51.830

它是杰瑞操纵的，但可以完成工作。

1.  进行小编辑（例如删除无关紧要的空间）以提示保存。
2.  节省。
3.  立即按 Esc 终止工作表进程。

你现在有一个干净的工作表！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-02T14:05:06.367

**Ctrl+Shift+C**在 Scala IDE 4.7.0 中完成这项工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-23T22:22:32.317

Alt+Shift+A 启用**块选择模式**。您将只能选择屏幕的左侧（带有代码的列）。块模式还可以仅选择具有输出的列。

[更多关于块选择模式](https://stackoverflow.com/questions/1053725/how-do-i-enable-the-column-selection-mode-in-eclipse)

# .net - 没有配置文件时 System.Configuration.ConfigurationManager 指向哪里？

> ID：13295985
> 
> 赞同：4
> 
> 时间：2012-11-08T19:07:05.103
> 
> 标签：.net, vb.net, visual-studio-2010

我有一个包含许多 Windows 服务项目和一个用于访问 MySql 数据库的类库项目的解决方案。在这个类库项目中，有一个类可以检索连接字符串（我没有编写此代码，我不确定它是否有效）：

```
Dim strConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("MySQLConnection").ToString() 
```

执行此行时，出现空引用异常。调试时我意识到它找到了另外两个连接字符串，但没有找到`MySQLConnection`. 我可以把我想要的连接字符串放在配置文件中，对吧。但是问题是这个项目里面没有配置文件，不知道这两个连接是从哪里来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:50:19.567

有一个 machine.config 文件位于配置合并层次结构的顶部。接下来是 web.config（与 machine.config 位于同一位置）。web.config 文件（如果存在）将是您的 Web 应用程序找到的第三个文件。有关更多信息，请阅读[这篇文章](http://msdn.microsoft.com/en-us/library/ms178685%28v=vs.100%29.aspx#configuration_inheritance)。

# cpython - PyPy cpyext：任何文档？如何使用？PyThreadState_Get 错误？

> ID：13295987
> 
> 赞同：10
> 
> 时间：2012-11-08T19:07:06.063
> 
> 标签：cpython, pypy

我已经阅读（[此处](http://morepypy.blogspot.de/2010/04/using-cpython-extension-modules-with.html)）PyPy 通过 cpyext 支持 CPython 扩展模块。

我还没有找到任何 cpyext 文档。有没有？

我该如何使用它？

从源代码（例如[这里](https://bitbucket.org/pypy/pypy/src/default/pypy/module/cpyext/api.py?at=default)），我发现要加载我的`leveldb.so`模块，我可能必须这样做：

```
import cpyext
cpyext.load_module("leveldb.so","leveldb") 
```

但是，这会因以下错误而崩溃：

```
Fatal Python error: PyThreadState_Get: no current thread 
```

我在回溯中注意到它从我的 CPython 调用函数，而不是从 PyPy：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff8b3e4d46 __kill + 10
1   libsystem_c.dylib               0x00007fff927a9df0 abort + 177
2   org.python.python               0x0000000104692eaa Py_FatalError + 49
3   org.python.python               0x0000000104691370 PyThreadState_Get + 28
4   org.python.python               0x000000010468cf16 Py_InitModule4_64 + 58
5   leveldb.so                      0x00000001027e0881 initleveldb + 49 (leveldb_ext.cc:59)
6   pypy                            0x0000000100f59bb3 PyLong_CheckExact + 55379
7   pypy                            0x0000000100f6e7c7 PyLong_CheckExact + 140391
.... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T19:52:09.347

我想到了。

需要重新编译模块。我必须使用 PyPy 的头文件。对于链接，我不能链接到 libpython。我必须告诉链接器忽略未解析的符号。

这是我在 MacOSX 上构建[py-leveldb的命令：](http://code.google.com/p/py-leveldb/)

```
cc -I /usr/local/Cellar/pypy/1.9/include -g -c leveldb_ext.cc leveldb_object.cc
libtool -dynamic -o leveldb.so leveldb_ext.o leveldb_object.o -lleveldb -lsnappy -lc -lstdc++ -undefined dynamic_lookup 
```

那行得通。我刚做了`cpyext.load_module("leveldb.so","leveldb")`。

我还在他们的 wiki 中找到了更多关于 CPyExt 的[注释](https://bitbucket.org/pypy/compatibility/wiki/c-api)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T23:53:56.260

Plyvel 是 LevelDB 的快速且功能丰富的 Python 接口，当在带有 cpyext 的 PyPy 下运行时，它也通过了几乎所有的单元测试。（一个例外与线程有关。）安装就像“pip install plyvel”一样简单；无需摆弄编译器标志。

有关更多信息，请参阅[https://github.com/wbolster/plyvel](https://github.com/wbolster/plyvel)和[https://plyvel.readthedocs.org/](https://plyvel.readthedocs.org/)。

（免责声明：我写了 Plyvel。）

# android - 修改按钮中的文本 - if 语句

> ID：13295992
> 
> 赞同：3
> 
> 时间：2012-11-08T19:07:26.687
> 
> 标签：android, button, sdk

我目前正在创建一个具有不同选项的 android 应用程序。一种选择是有一个按钮，默认显示“激活”。当应用程序正在运行时，单击它会将其更改为“禁用”，然后再次单击将其更改为“激活”。我相信我所要做的就是使用字符串变量 .getText 然后在 if 语句中使用这个变量，但它似乎对我的任何条件都没有反应......

```
 final Button button = (Button) findViewById(R.id.bSensor);

    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click

            String buttonText = button.getText().toString();    
            if (buttonText == "@string/Disable") {
                button.setText(R.string.Enable);
            }
            else if (buttonText == "@string/Enable"){
                button.setText(R.string.Disable);
            }

        }
    }); 
```

感谢帮助

菲齐克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:46:54.893

在 Java 中比较字符串时不应使用 == 运算符。 [来源](https://stackoverflow.com/questions/767372/java-string-equals-versus)

您应该使用字符串的 .equals() 方法，或者您可以保留一个全局布尔状态标志来确定设置了哪个值。这样您就不需要每次需要确定它是活动的还是禁用的时都进行字符串比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:51:34.093

用于`.equals`比较字符串。您不需要`@String/`前缀，因为这不是按钮显示的一部分。

```
final Button button = (Button) findViewById(R.id.bSensor);

button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // Perform action on click

        String buttonText = button.getText().toString(); 

        if (buttonText.equals(getResources().getText(R.string.Disable)) {
            button.setText(R.string.Enable);
        }
        else if (buttonText.equals(getResources().getText(R.string.Enable)){
            button.setText(R.string.Disable);
      }

    }
}); 
```

# mysql - MySQL 使用索引的慢查询，当我通过分析器运行它时并不慢

> ID：13295996
> 
> 赞同：5
> 
> 时间：2012-11-08T19:07:36.957
> 
> 标签：mysql, query-optimization, innodb, database-performance, mysql-slow-query-log

在我的慢查询日志中，我看到慢查询，例如

```
# 时间：121107 16:34:02
# 用户@主机：web_node[web_node]@localhost [127.0.0.1]
# Thread_id: 34436186 架构: test_db Last_errno: 0 Killed: 0
# Query_time: 1.413751 Lock_time: 0.000222 Rows_sent: 203 Rows_examined: 203 Rows_affected: 0 Rows_read: 203
# Bytes_sent: 7553 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 9B04384
设置时间戳=1352334842；
SELECT ID，电子邮件，TEST_DATA WHERE ID IN（13089576,3002681,3117763,1622233,2941590,12305279,1732672,2446772,3189510,13084725,4943929,5855071,6572137,2266261,3003496,2024860,3336832,13758671,6477694,1796684， 13001771,4690025,1071744,1017876,5175795,795988,1619821,2481819,2941090,4770802,13438250,3254708,2323402,526303,13219855,3313573,3190479,1733761,3300577,2941758,6474118,1733379,11523598,4205064,6521805， 249290311111111198055050580588055805580558058805588055805585055850558505850558058505880558505850558805585058505850585055805850558058505880558055880585055 1338572,7272410,1860386,2567550,5434143,1918035,5329411,1683235,3254119,5175784,1855380,3336834,2102567,4749746,37269,3207031,6464336,2227907,2713471,3937600,2940442,2233821,5619141,5204711,5988803， 5050821,10109926,5226877,5050275,1874115,13677832,5338699,2423773,6432937,6443660,1990611,6090667,6527411,6568731,3254846,3414049,2011907,5180984,12178711,8558260,3130655,5864745,2059318,3480233,2104948,2387703,1939395,5356002,2681209,1184622， 1184456,10390165,510854,7983305,795991,2622393,4490187,9436477,5356051,2423464,5205318,1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496， 7260091,12191702,2492899,2630691,13047691,1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291， 5592740,5233428,5204830,1574452,3188956,13693326,2102349,3704111,1748303,790889,9323280,4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123， 6487778,2677582,2377195);6443660,1990611,6090667,6527411,6568731,3254846,3414049,2011907,5180984,12178711,8558260,3130655,5864745,2059318,3480233,2104948,2387703,1939395,5356002,2681209,1184622,1184456,10390165,510854,7983305， 795991,2622393,4490187,9436477,5356051,2423464,5205318,1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091,12191702,2492899,2630691， 13047691,1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452， 3188956,13693326,2102349,3704111,1748303,790889,9323280,4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487778,2677582,2377195）;6443660,1990611,6090667,6527411,6568731,3254846,3414049,2011907,5180984,12178711,8558260,3130655,5864745,2059318,3480233,2104948,2387703,1939395,5356002,2681209,1184622,1184456,10390165,510854,7983305， 795991,2622393,4490187,9436477,5356051,2423464,5205318,1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091,12191702,2492899,2630691， 13047691,1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452， 3188956,13693326,2102349,3704111,1748303,790889,9323280,4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487778,2677582,2377195）;2011907,5180984,12178711,8558260,3130655,5864745,2059318,3480233,2104948,2387703,1939395,5356002,2681209,1184622,1184456,10390165,510854,7983305,795991,2622393,4490187,9436477,5356051,2423464,5205318， 1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091,12191702,2492899,2630691,13047691,1684470,9382108,2233737,13117701,1796698,2535914， 4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452,3188956,13693326,2102349,3704111,1748303,790889,9323280， 4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487378,26757521);2011907,5180984,12178711,8558260,3130655,5864745,2059318,3480233,2104948,2387703,1939395,5356002,2681209,1184622,1184456,10390165,510854,7983305,795991,2622393,4490187,9436477,5356051,2423464,5205318， 1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091,12191702,2492899,2630691,13047691,1684470,9382108,2233737,13117701,1796698,2535914， 4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452,3188956,13693326,2102349,3704111,1748303,790889,9323280， 4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487378,26757521);10390165,510854,7983305,795991,2622393,4490187,9436477,5356051,2423464,5205318,1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091， 12191702,2492899,2630691,13047691,1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740， 5233428,5204830,1574452,3188956,13693326,2102349,3704111,1748303,790889,9323280,4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487778， 2677582,2377195);10390165,510854,7983305,795991,2622393,4490187,9436477,5356051,2423464,5205318,1600499,13623229,3255205,12200483,6477706,3445661,5226284,1176639,13760962,2101681,6022818,12909371,1732457,2377496,7260091， 12191702,2492899,2630691,13047691,1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740， 5233428,5204830,1574452,3188956,13693326,2102349,3704111,1748303,790889,9323280,4741494,2387900,5338213,3583795,2283942,3189482,3002296,4490123,3585020,962926,3481423,1600920,1682364,4693123,6487778， 2677582,2377195);1684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452,3188956， 136908011801118011801188011880118888888888888888885888888858888585888588885885885858858888885858588858858888588858888858858858588858585885885885858588588588585888858588858588885885885858888588588588588588858888585885885888588585888858588858588588585851684470,9382108,2233737,13117701,1796698,2535914,4941741,4565958,1100410,2321180,13080467,813342,4563877,4689365,2104756,1102802,2714488,3188947,1599770,1558291,5592740,5233428,5204830,1574452,3188956， 13690801180111801180118801188011888888888888888888588888885888858588858888588588585885888888585858885885888858885888885885885858885858588588588585858858858858588885858885858888588588585888858858858858858885888858588588588858858588885858885858858858585
```

当我使用 SQL_NO_CACHE 通过探查器运行慢查询时，它看起来说

```
一组 203 行（0.03 秒）

显示查询 33 的配置文件；
+----------+----------+
| 状态 | 持续时间 |
+----------+----------+
| 出发| 0.000187 |
| 检查权限 | 0.000012 |
| 开桌 | 0.000034 |
| 系统锁 | 0.000016 |
| 初始化 | 0.000087 |
| 优化 | 0.000024 |
| 统计 | 0.028694 |
| 准备| 0.000074 |
| 执行 | 0.000005 |
| 发送数据 | 0.001596 |
| 结束 | 0.000009 |
| 查询结束 | 0.000008 |
| 关闭表| 0.000014 |
| 释放物品 | 0.001600 |
| 记录慢查询 | 0.000007 |
| 清理| 0.000011 |
+----------+----------+

```

当我用解释运行查询时，它说

```
+----+-------------+------------------+--------+--- ---------------+----------+----------+------+------ +----------------------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------------+--------+--- ---------------+----------+----------+------+------ +----------------------------+
| 1 | 简单 | 测试数据 | 范围 | 主要，id_email | id_email | 4 | 空 | 203 | 使用哪里；使用索引 |
+----+-------------+------------------+--------+--- ---------------+----------+----------+------+------ +----------------------------+

```

创建表看起来像

```
创建表`test_data`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(254) 默认为空，
  `domain` varchar(254) 默认为空，
  `age` smallint(6) 默认为空，
  `gender` tinyint(1) 默认为空，
  `location_id` int(11) 无符号默认 NULL，
  `created` 时间戳 NOT NULL DEFAULT '0000-00-00 00:00:00',
  `unistall_date` 时间戳 NOT NULL DEFAULT '0000-00-00 00:00:00',
  `subscription_date` 时间戳 NOT NULL DEFAULT '0000-00-00 00:00:00',
  `active` tinyint(1) 默认 '1',
  主键（`id`），
  唯一键`email`（`email`），
  KEY `domain` (`domain`),
  KEY `id_email` (`id`,`email`),
  KEY `email_id` (`email`,`id`)
) 引擎=InnoDB AUTO_INCREMENT=13848530 默认字符集=utf8

```

还有另一个查询会定期运行，从电子邮件地址列表中选择 ID 和电子邮件，因此电子邮件、ID 键、电子邮件地址必须是唯一的，因此为什么这是唯一键。该表只有约 14M 行

我想也许索引在内存和交换方面变得很大，但盒子有 8 gigs 的内存。

```
SELECT table_schema "数据库名称", SUM(data_length + index_length) / 1024 / 1024 "数据库大小 (MB)", SUM( index_length) / 1024 / 1024 "索引大小 (MB)" FROM information_schema.TABLES GROUP BY table_schema;
+--------------------+----------+------ -------------+
| 数据库名称 | 以 MB 为单位的数据库大小 | 以 MB 为单位的索引大小 |
+--------------------+----------+------ -------------+
| 指标 | 3192.50000000 | 1594.42187500 |
| 数据 | 8096.48437500 | 5639.51562500 |
| 原始数据 | 6000.35937500 | 745.07812500 |
| 信息架构 | 0.00878906 | 0.00878906 |
| mysql | 0.04319191 | 0.04101563 |
| 性能模式 | 0.00000000 | 0.00000000 |
+--------------------+----------+------ -------------+

```

在 my.cnf 文件中设置 innodb_file_per_table=1 似乎已经解决了这个问题。

这提高了执行时间，我的理解是每个表有一个文件意味着磁盘针不需要移动这么大的距离。

**问题**

1.  如果可以使用索引评估查询，为什么设置 innodb_file_per_table=1 会提高性能
2.  为什么在不使用缓存的情况下为探查器运行查询时查询不慢？
3.  我的主键应该是 (id, email) 吗？

**更新**

最初没有 /etc/my.cnf 文件，然后我用以下内容创建了一个

```
[mysqld]
服务器 ID=1
最大连接数=1500
key_buffer_size=50M
query_cache_limit=16M
query_cache_size=256M
线程缓存=16
table_open_cache=4096
sort_buffer_size=512K
join_buffer_size=8M
read_buffer_size=8M
skip_name_resolve=1
线程缓存大小=256
innodb_buffer_pool_size=6G
innodb_buffer_pool_instances=1
innodb_thread_concurrency=96
innodb_additional_mem_pool_size=32M
innodb_log_buffer_size=8M
innodb_flush_log_at_trx_commit=0
innodb_log_file_size=256M
innodb_flush_method=O_DIRECT
innodb_file_per_table=1
net_read_timeout=15
net_write_timeout=30
日志-bin=mysql-bin
sync_binlog=0
数据目录=/var/lib/mysql

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:21:57.807

您的 innodb_log_buffer 数据过多。

什么是值：

```
innodb_buffer_pool_size 
innodb_log_file_size 
```

所有 InnoDB 都必须在内存中运行。当您拆分文件时，它会更有效地运行，因为它正在交换内存和交换内存，磁盘读取和写入更少，因为一个较大的文件需要更长的时间来扫描数据。

它没有交换，因为您的 innodb_buffer_pool_size 限制了 MySQL 加载到内存中的内存量。

解决问题的唯一方法是获取更多内存并为所有 innodb 表和索引分配足够的 innodb_buffer_pool_size。

# c# - 在asp.net中的Response.End（）之后隐藏模式窗口

> ID：13295997
> 
> 赞同：0
> 
> 时间：2012-11-08T19:07:39.323
> 
> 标签：c#, asp.net

我有一个执行以下操作的按钮：

```
Response.Clear();
Response.Buffer = true;
Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.csv");
Response.Charset = "";
Response.ContentType = "application/text";
//my content is created
Response.Output.Write(sb.ToString());
Response.Flush();
Response.End(); 
```

这是我的按钮定义：

```
<asp:Button ID="Button1" runat="server" onclick="Excel_Click" Text="Export to Csv" onclientclick="ShowModal();"/> 
```

如您所见，我调用了一个 javascript 函数，该函数执行以下操作：

```
function ShowModal() {
        var divmodal = document.getElementById("divModal");

        divmodal.style.display = '';
    } 
```

即显示带有“正在加载”标签的模态窗口我的问题是当我下载文件时我生成了 csv 但之后我的模态窗口仍然出现，那是因为页面没有被刷新

有什么我可以做的吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:18:06.167

简短的回答是你不能那样做。

在您使用按钮回帖后，您所在的页面正在等待加载新内容。此时，您无法从后面的代码对当前页面 dom 进行任何控制，例如向它们发送 javascript 代码以执行。

即使您确实发送了一整页，那么它也是一个新的整页。

您可以使用一些其他技巧，例如使用处理程序下载文件和链接，或使用 ajax 发送命令，然后再次返回处理程序的链接 - 但是这样，通过完整的回发，您不能去做。

# android - 如何在 Android NDK 中比较两个 jbyte 数组

> ID：13295999
> 
> 赞同：2
> 
> 时间：2012-11-08T19:07:45.427
> 
> 标签：android, arrays, android-ndk, java-native-interface, byte

我是 NDK 和学习的新手。

我设法从 java 代码调用本机方法，但不知道如何比较两个`jbyte`数组

这是我所拥有的：

```
 jbyte bytes1[] = {48, -126, 1,4};
 jbyte bytes2[] = {48, -126, 1,4};

 jclass cls = (*env)->GetObjectClass(env, bytes1);
 jmethodID   mid = (*env)->GetMethodID(env, cls, "equals", "([B)Z");
 jboolean isEqual = (*env)->CallBooleanMethod(env, bytes1, mid, bytes2); 
```

我知道上面的代码是错误的，但是有没有比较字节数组的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:23:55.220

如果需要比较两个 jbyte 数组，请使用 memcmp。

```
#include <string.h>
int memcmp(const void *s1, const void *s2, size_t n); 
```

在你的例子中，

```
jboolean isEqual = (memcmp(bytes1, bytes2, 4) == 0); 
```