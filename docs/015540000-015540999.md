# StackOverflow 问答 15540000-15540999

# .net - 由于缺少存在的 dll 引用，MVC 应用程序崩溃

> ID：15540004
> 
> 赞同：0
> 
> 时间：2013-03-21T05:13:23.423
> 
> 标签：.net, asp.net-mvc-4, configuration

尽管我将其发布到 Windows Server 2008 x64 SP2，但与[此](https://stackoverflow.com/questions/11071392/the-type-or-namespace-name-does-not-exist-in-the-namespace-system-web-mvc)问题类似的问题发布在 stackoverflow 上。

我最近在工作中从 x86 机器升级到 x64（开发）。对我的 MVC 应用程序进行了一些更改，将其重新上传到上面提到的服务器，并得到了下面提到的错误。我没有以任何方式更改配置文件，实际上我所做的只是更改了一些 HTML 和 JavaScript，重新编译并上传了它。我会怀疑与我在新的开发机器上重新编译它有关吗？知道我如何能够解决这个问题。

注意：有问题的程序集确实存在于**bin**文件夹中，并且还明确设置为“复制本地”。

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS0234: The type or namespace name 'Html' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?)

Source Error:

Line 40:         <add namespace="System.Web.Mvc" />
Line 41:         <add namespace="System.Web.Mvc.Ajax" />
Line 42:         <add namespace="System.Web.Mvc.Html" />
Line 43:         <add namespace="System.Web.Optimization" />
Line 44:         <add namespace="System.Web.Routing" />

Source File: c:\inetpub\wwwroot\Heliosphere\Web.config    Line: 42 

Show Detailed Compiler Output:

C:\Windows\SysWOW64\inetsrv> "C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.exe" /t:library /utf8output /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Data.DataSetExtensions\v4.0_4.0.0.0__b77a5c561934e089\System.Data.DataSetExtensions.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\e93e1c9f\b98b1573_f50ece01\System.Web.WebPages.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\b748353d\837d0a72_f50ece01\Microsoft.Web.Infrastructure.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_32\System.Web\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Extensions\v4.0_4.0.0.0__31bf3856ad364e35\System.Web.Extensions.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Activities\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Activities.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Services\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.Services.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\45f37046\60cecf72_f50ece01\System.Web.Helpers.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.ApplicationServices\v4.0_4.0.0.0__31bf3856ad364e35\System.Web.ApplicationServices.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\a622ef58\e3226374_f50ece01\System.Web.Http.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\8400f0b1\ff3e4e72_f50ece01\Newtonsoft.Json.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Activities\v4.0_4.0.0.0__31bf3856ad364e35\System.Activities.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\97b97546\ab470067_f50ece01\EntityFramework.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\09c804a0\24ca3407_6eb1cd01\System.Threading.Tasks.Dataflow.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\3745d18d\1addb99b_d025ce01\Heliosphere.Web.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.Serialization\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.Serialization.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\06f8d1b0\c362ac74_f50ece01\System.Web.Http.WebHost.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel\v4.0_4.0.0.0__b77a5c561934e089\System.ServiceModel.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Activation\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Activation.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\9194cd87\76c6aa75_f50ece01\System.Web.Optimization.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\c795b16a\9b58f275_f50ece01\Antlr3.Runtime.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Web\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Web.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_32\System.EnterpriseServices\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\3b840423\32024717_ce25ce01\Heliosphere.AccessService.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ComponentModel.DataAnnotations\v4.0_4.0.0.0__31bf3856ad364e35\System.ComponentModel.DataAnnotations.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\2305b33a\5efdfdaf_0825ce01\Telstra.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.WorkflowServices\v4.0_4.0.0.0__31bf3856ad364e35\System.WorkflowServices.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.IdentityModel\v4.0_4.0.0.0__b77a5c561934e089\System.IdentityModel.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\01bfab33\0c260176_f50ece01\WebGrease.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\4c5a83e9\0d88f172_f50ece01\System.Web.WebPages.Deployment.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\02c0255b\aefdca73_f50ece01\System.Net.Http.Formatting.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml.Linq\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.Linq.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\8516d5c4\5cd48a72_f50ece01\System.Web.Razor.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\47ee1890\6fab2273_f50ece01\System.Web.WebPages.Razor.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.CSharp\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.CSharp.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\5bbddb12\00677eaa_9e8ecd01\Microsoft.Exchange.WebServices.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.DynamicData\v4.0_4.0.0.0__31bf3856ad364e35\System.Web.DynamicData.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\b69a7fa8\0e2c1275_f50ece01\System.Web.Providers.dll" /R:"C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll" /R:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\assembly\dl3\3c0808a8\1c17df16_ce25ce01\Heliosphere.Model.dll" /out:"C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\App_global.asax.ilahar0n.dll" /debug- /optimize+ /w:4 /nowarn:1659;1699;1701;612;618 /warnaserror-  "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\App_global.asax.ilahar0n.0.cs" "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\904c6749\773dc9\App_global.asax.ilahar0n.1.cs"

Microsoft (R) Visual C# Compiler version 4.0.30319.17929

for Microsoft (R) .NET Framework 4.5
Copyright (C) Microsoft Corporation. All rights reserved.

c:\inetpub\wwwroot\Heliosphere\Web.config(42,26): error CS0234: The type or namespace name 'Html' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?)
c:\inetpub\wwwroot\Heliosphere\Web.config(41,26): error CS0234: The type or namespace name 'Ajax' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T09:17:07.203

我有同样的问题，只需将 System.Web.Mvc.dll 的属性设置为 Copy Local = true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:36:42.667

通过重新创建应用程序并重建它解决了这个问题。

我想它是应用程序构建配置中的一个参考。我没有足够的时间去挖掘。

# android - Android 检查呼叫转移是否已激活

> ID：15540005
> 
> 赞同：4
> 
> 时间：2013-03-21T05:13:29.830
> 
> 标签：android

我正在构建一个呼叫转移应用程序，并已使用 **21*xxxxxx# ussd 代码通过 ACTION_CALL Intent 激活呼叫转移。但是我还没有找到检查呼叫转移是否处于活动状态的解决方案。

如果呼叫转移处于活动状态，是否有任何解决方案可以从 android 系统检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T08:55:17.820

```
 TelephonyManager manager = (TelephonyManager)    
 this.getSystemService(TELEPHONY_SERVICE);     
 manager.listen(new MyPhoneStateListener(), 
 PhoneStateListener.LISTEN_CALL_FORWARDING_INDICATOR ); 

 class MyPhoneStateListener extends PhoneStateListener{  

  @Override
    public void onCallForwardingIndicatorChanged(boolean cfi) {
      Log.i(TAG,"onCallForwardingIndicatorChanged  CFI ="+cfi);

         preferences.edit().putBoolean("CALL_FORWARD_ACTIVE", cfi).commit();
        super.onCallForwardingIndicatorChanged(cfi);
    }

} 
```

如果 cfi 返回 true 表示设置呼叫转发成功

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:02:02.670

**注意事项：** 以下答案是建议。我没有亲自尝试过，所以您最好尝试一下以检查结果。

从您的 gsm 号码中，您可以通过拨打 *#21# 检查您的呼叫转移选项。因此，您可以尝试从应用程序中拨打此号码并阅读 ussd 响应。

**第 1 部分：拨打号码**

```
Intent intentCallForward = new Intent(Intent.ACTION_CALL);                               
Uri uri = Uri.fromParts("tel", "*#21#", "#"); 
intentCallForward.setData(uri);                                
startActivity(intentCallForward); 
```

**第 2 部分：阅读 ussd 响应**

没有 API 可以做到这一点。但是[在](https://stackoverflow.com/a/9689258/931982)this SO answer中，它建议了一些您可以尝试的方法。

祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:05:49.073

你可以让 Brodcast 类注册它，你可以像

```
public class CallBroadcastReceiver extends BroadcastReceiver
{
    public static String numberToCall;
    public void onReceive(Context context, Intent intent) {
        Log.d("CallRecorder", "CallBroadcastReceiver::onReceive got Intent: " + intent.toString());
        if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
            numberToCall = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
            Log.d("CallRecorder", "CallBroadcastReceiver intent has EXTRA_PHONE_NUMBER: " + numberToCall);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T02:12:20.853

是的，您可以使用 *#21# 以与使用 **21*xxxxxx# 激活 CF 相同的方式检查 CF。顺便说一句，这些是 MMI 代码，而不是 USSD 代码。

# javascript - 使用相同的 y 值绘制线条，在底部绘制线条

> ID：15540007
> 
> 赞同：6
> 
> 时间：2013-03-21T05:13:48.887
> 
> 标签：javascript, d3.js

我有同样的[问题](https://stackoverflow.com/questions/12701607/d3-line-graph-using-all-the-same-y-values-plots-line-at-the-bottom)

当在 中使用相同的值时`yAxis`，曲线在底部

这是我的代码：

```
var data = [
  {
    creat_time: "2013-03-19 10:28:30",
    roundTripTime: "32"
  },
  {
    creat_time: "2013-03-19 09:07:12",
    roundTripTime: "45"
  },
  {
    creat_time: "2013-03-19 08:57:09",
    roundTripTime: "26"
  },
  {
    creat_time: "2013-03-19 08:47:10",
    roundTripTime: "90"
  },
  {
    creat_time: "2013-03-19 08:37:12",
    roundTripTime: "80"
  },
  {
    creat_time: "2013-03-19 08:27:08",
    roundTripTime: "36"
  }
];
var data1 = [
  {
    creat_time: "2013-03-19 10:28:30",
    roundTripTime: "100"
  },
  {
    creat_time: "2013-03-19 09:07:12",
    roundTripTime: "100"
  },
  {
    creat_time: "2013-03-19 08:57:09",
    roundTripTime: "100"
  },
  {
    creat_time: "2013-03-19 08:47:10",
    roundTripTime: "100"
  },
  {
    creat_time: "2013-03-19 08:37:12",
    roundTripTime: "100"
  },
  {
    creat_time: "2013-03-19 08:27:08",
    roundTripTime: "100"
  }
];
function draw(data) {
  var margin = {
    top: 20,
    right: 20,
    bottom: 30,
    left: 50
  };
  var width = 960 - margin.left - margin.right;
  var height = 500 - margin.top - margin.bottom;
  var parseDate = d3.time.format("%Y-%m-%d %H:%M:%S").parse;
  var x = d3.time.scale().range([0, width]);

  var y = d3.scale.linear().range([height, 0]);

  var xAxis = d3.svg
    .axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%H:%M"));

  var yAxis = d3.svg
    .axis()
    .scale(y)
    .orient("left");

  var line = d3.svg
    .line()
    .x(function(d) {
      return x(d.creat_time);
    })
    .y(function(d) {
      return y(d.roundTripTime);
    });

  var svg = d3
    .select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  data.forEach(function(d) {
    d.creat_time = parseDate(d.creat_time);
    d.roundTripTime = +d.roundTripTime;
  });

  data = sortByReturnTime(data);

  x.domain(
    d3.extent(data, function(d) {
      return d.creat_time;
    })
  );
  y.domain(
    d3.extent(data, function(d) {
      return d.roundTripTime;
    })
  );

  svg
    .append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

  svg
    .append("g")
    .attr("class", "y axis")
    .call(yAxis);

  svg
    .append("path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line);
}
draw(data); 
```

调用时

```
绘制（数据）
```

这是正确的。

SVG是：

![在此处输入图像描述](../Images/79ddc69250f82ba80297f5956ab654c8.png)

并叫

```
draw(data1) //y 值相同
```

在 SVG 中，在底部绘制线，但如果没有错误，它应该在顶部。

SVG是：

![在此处输入图像描述](../Images/be1887bed6c0e15bfcd14a1280f8579c.png)

知道这里出了什么问题吗？我能做些什么使情节线在顶部？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T09:55:41.567

问题是您正在使用`d3.extent`. 如果所有值都相同，则所有内容都将映射到 0 y 坐标。要从 0 开始 y 刻度，请替换

```
y.domain(d3.extent(data, function (d) {
  return d.roundTripTime;
})); 
```

和

```
y.domain([0, d3.max(data, function (d) {
  return d.roundTripTime;
})]); 
```

# javascript - 测量画布边距的准确方法

> ID：15540008
> 
> 赞同：0
> 
> 时间：2013-03-21T05:13:44.463
> 
> 标签：javascript, scroll, border, margins

由于画布使用自己的局部坐标系，我尝试了几种方法来确定鼠标单击的全局 X、Y 并将它们转换为坐标系。我通过 jQuery 从画布本身减去左边距和上边距来做到这一点

```
.offset() 
```

或通过使用

```
getBoundingClientRect() 
```

在 Javascript 中。

遗憾的是，这两者都会受到浏览器滚动的影响。我可能只是缺少一个属性（我使用 e.clientX 和 e.clientY，因为我知道它们具有跨浏览器的能力）会给我一个更明确的价值……我一直在仔细研究 DOM 元素的所有属性他们似乎都没有给我我需要的东西......

我需要一种独立于滚动的方式来确定我离文档顶部有多远，以便将鼠标点击与坐标系相关联。

...或者我是个白痴，并且有一种跨浏览器的方法来检测相对于对象的鼠标点击？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:27:14.433

我能找到的最佳方法是使用 jQuery 方法，例如 $('#').offset() 然后考虑滚动。或者，可以使用 Object.getBoundingClientRect()，但我不确定跨浏览器的兼容性。

没有其他人喜欢插话，哈哈。

# java - Java Servlet ResultSet 找出表是否已经存在

> ID：15540011
> 
> 赞同：-4
> 
> 时间：2013-03-21T05:14:05.630
> 
> 标签：java, mysql, servlets, resultset

我编写了一个与 MySQL 数据库通信的小程序。它的工作方式是用户在他们输入表名的索引页面上。表名被传递给一个 servlet，该 servlet 显示表中的内容或告诉用户该表不存在。我已经编写了代码来显示表（如果它存在）但是我想检查表是否不存在并创建该表。有哪些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:19:20.867

您可以运行

```
show tables like "table_name"; 
```

或者

```
SELECT COUNT(*)
FROM information_schema.tables 
WHERE table_schema = '[database name]' 
AND table_name = '[table name]'; 
```

这将返回一个类似于运行 SELECT 查询时的结果集。

# android - SQLite 条件插入或替换

> ID：15540019
> 
> 赞同：2
> 
> 时间：2013-03-21T05:14:50.477
> 
> 标签：android, sqlite

我正在尝试将记录插入或更新到 sqlite 数据库中，并且仅在新值大于旧值时才更新值。

架构是：

```
 CREATE table IF NOT EXISTS SearchTable
   (Owner INTEGER PRIMARY KEY, Generations INTEGER DEFAULT 0) 
```

我试过这样的命令：

```
INSERT OR REPLACE INTO SearchTable(Owner, Generations)
 VALUES (?, MAX((SELECT Generations FROM SearchTable WHERE Owner = ?), ?)) 
```

但它给了我世代的空值。

我可以使用一些帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T05:21:21.357

尝试

```
INSERT OR REPLACE INTO SearchTable(Owner, Generations)
SELECT ?, MAX(Generations) FROM SearchTable WHERE Owner = ? 
```

# c - 无法从重定向的 io 读取数据

> ID：15540023
> 
> 赞同：0
> 
> 时间：2013-03-21T05:15:01.987
> 
> 标签：c, linux, fork, pipe, stdout

我编写了一段相对简单的代码来轮询在子进程中被重定向为标准输出的管道。但是当 poll 函数返回并说数据准备好时， read 函数总是返回零。

有什么原因可以说明为什么这不起作用？当我直接写入从子进程到父进程的管道时，它工作正常。我想我只是错误地重定向了io。

这是父进程代码：

注意：所有宏都说明错误并将它们打印到错误日志中。

```
pollData.fd = out.fd[ READ_INDEX ];
pollData.events = POLL_IN;
pollData.revents = 0;

printf( "Polling pipe for data...\n" );

if( poll( &pollData, 1, 5000 ) > 0 )
{
        int bytesRead = 0, trys = TRYS;
        printf( "Data has been received: " );

        Read:

        bytesRead = read( out.fd[ READ_INDEX ] , out.buf, BUF_SIZE );

             if( bytesRead > 0 ) printf( "%s" , out.buf );
        else if( bytesRead < 0 ) printf( "Error receiving data.\n" );
        else
        {
                trys--;
                printf( "No data was read.\n" );
                sleep( SLEEP );
                if( trys > 0 ) goto Read;
        }
}
else LOG( ERR_POLLING, 0 ); 
```

这是子进程代码： 注意：FD_REPLACE 使用 dup2 并关闭旧句柄。

```
FD_CLOSE_PACK(  out.fd[  READ_INDEX ],
                err.fd[  READ_INDEX ],
                 in.fd[ WRITE_INDEX ] );

FD_REPLACE( fileno( stdout ) , out.fd[ WRITE_INDEX ] , Child_Fail );
FD_REPLACE( fileno( stderr ) , err.fd[ WRITE_INDEX ] , Child_Fail );
FD_REPLACE( fileno( stdin  ) ,  in.fd[  READ_INDEX ] , Child_Fail );

printf( "This is a message from the test program!\n Hope it works!\n" );

sleep( 10 );

Child_Fail:

FD_CLOSE_PACK(  out.fd[ WRITE_INDEX  ],
                err.fd[ WRITE_INDEX  ],
                 in.fd[  READ_INDEX  ] );
return -1; 
```

这是其中一个宏：

```
#define FD_REPLACE( old_fd, fd , addr )        
if( dup2( old_fd, fd ) < 0 )                                          
{ 
        LOG( ERR_DUP2, #old_fd " with " #fd );                 
        goto addr;           
} 
```

这是终端的输出：

```
Polling pipe for data...
Data has been received: No data was read.
No data was read.
No data was read.
No data was read.
No data was read.

Now closing... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:26:08.807

我让它工作了。我错误地替换了文件描述符。我替换了错误的描述符，并且在关闭旧描述符之前就这样做了。我上面发布的代码显示了旧的宏。新宏是（没有错误检查）：

```
#define FD_REPLACE( old_fd, fd, addr )
close( old_fd );
dup2( fd, old_fd ); 
```

# java - Java：在生成的文件中查找连续数字

> ID：15540027
> 
> 赞同：-3
> 
> 时间：2013-03-21T05:15:10.663
> 
> 标签：java, file

因此，我创建了一个分两部分运行的程序。首先，我生成一个包含 500 个随机数的列表并将它们存储在一个文本文件中。其次，我需要找到最大值、最小值、平均值等。但是，我还应该找出出现了多少个连续数字。这就是我的问题所在。我不知道如何处理它。

寻找一个开始的地方。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:25:49.493

当您沿着数组前进时，您将保留以下内容的列表：当前看到的最大元素、当前看到的最小元素、到目前为止看到的所有元素的总数、...、最后看到的元素和连续数字的总数。如果当前数字 == 看到的最后一个元素 + 1，则增加连续计数。连续序列中的第一个元素还应该有一个标志，例如，`{1, 2}`计算 2 次而不是 1 次

```
last_seen = -1
previous_consecutive = false
for(x in numbers_list):
    if x == last_seen + 1:
        if not previous_consecutive:
            number_of_consecutive_elements += 1
        number_of_consecutive_elements += 1
        previous_consecutive = true
    else:
        previous_consecutive = false
    last_seen = x 
```

# struts2 - 处理 Struts2 动作中的 URL 结尾斜杠

> ID：15540028
> 
> 赞同：1
> 
> 时间：2013-03-21T05:15:17.073
> 
> 标签：struts2

`myhost.com/admin`在我的 struts.xml 中，我配置了以下内容以`myhost.com/admin/`正确处理重定向：

```
<constant name="struts.enable.SlashesInActionNames" value="true"/>

<action name="admin">
    <result type="redirectAction">admin/home</result>
</action>
<action name="admin/">
    <result type="redirectAction">admin/home</result>
</action> 
```

在 Struts2 中是否有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:28:03.367

你混合了两件事：动作和命名空间。您可以使用以下配置：

```
<action name="admin">
    <result type="redirectAction">admin/</result>
</action>
<action name="" namespace="admin">
    <result>/admin/index.jsp</result>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:18:18.580

正如你自己评论的那样，你有没有试过这样的通配符

**行政/****

希望这可以帮助

# jqgrid - jqGrid在保存模式下获取下拉选择的文本值

> ID：15540029
> 
> 赞同：0
> 
> 时间：2013-03-21T05:15:20.497
> 
> 标签：jqgrid

我在 jqGrid 中有一个下拉列表。在编辑模式下，我们可以使用 $("#"+gridId+"_dicountType option:selected").text(); 但在保存模式下，我们如何获得下拉选择的文本值。

非常感谢，王子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:28:34.900

`jqGrid`保存一行后，单元格将恢复为**文本**格式而不是**下拉**格式。因此，您所要做的就是使用`rowId`来从单元格中获取数据。 **编辑：**

```
var dataFromRow = jQuery('#list').jqGrid ('getRowData', rowId);
var dataFromCellByColumnIndex = jQuery('#list').jqGrid ('getCell', rowId, 7);
var dataFromCellByColumnName = jQuery('#list').jqGrid ('getCell', rowId, 'column_index'); 
```

# c#-4.0 - 在事务范围内使用 C# 中的 SqlServer SMO 复制架构和数据

> ID：15540031
> 
> 赞同：1
> 
> 时间：2013-03-21T05:15:26.297
> 
> 标签：c#-4.0, smo

我需要在 C# 代码中复制数据库。为此，我使用了 Sql Server SMO 对象并最初在单独的一段代码中对其进行了测试。那工作得很好。但是，当我将代码与已经包含在事务范围内的现有功能集成时，我无法在现有事务范围内执行代码。

因此，我刚刚创建了一个内部事务范围，它的事务范围选项为抑制，这样这个内部事务范围就不会成为外部范围的一部分。当我再次尝试时，我得到了事务中止异常。

请建议或推荐我在事务范围内使用数据库复制功能。

# itextsharp - 使用 itextsharp 的 pdf 高度

> ID：15540033
> 
> 赞同：0
> 
> 时间：2013-03-21T05:15:34.157
> 
> 标签：itextsharp

如何使用 iTextsharp 获取 pdf 的页面大小？我正在使用 Pdf 阅读器来获取 PDF 的页数。请提供计算pdf大小的代码

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:58:28.790

查看与[iText in Action — 第 2 版](http://itextpdf.com/book/)[第 6 章中的](http://www.manning.com/lowagie2/samplechapter6.pdf)[PageInformation.java](http://itextpdf.com/examples/iia.php?id=107)对应的[网络化 iTextSharp 示例](http://kuujinbo.info/iTextInAction2Ed/index.aspx) [PageInformation.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=PageInformation)，该示例使用 iTextSharp 输出有关文档的多位信息。中心方法是这样的：

```
public static void Inspect(StringBuilder sb, byte[] pdf, string fileName) {
  PdfReader reader = new PdfReader(pdf);
  sb.Append(fileName);
  sb.Append(Environment.NewLine);
  sb.Append("Number of pages: ");
  sb.Append(reader.NumberOfPages);
  sb.Append(Environment.NewLine);
  Rectangle mediabox = reader.GetPageSize(1);
  sb.Append("Size of page 1: [");
  sb.Append(mediabox.Left);
  sb.Append(',');
  sb.Append(mediabox.Bottom);
  sb.Append(',');
  sb.Append(mediabox.Right);
  sb.Append(',');
  sb.Append(mediabox.Top);
  sb.Append("]");
  sb.Append(Environment.NewLine);
  sb.Append("Rotation of page 1: ");
  sb.Append(reader.GetPageRotation(1));
  sb.Append(Environment.NewLine);
  sb.Append("Page size with rotation of page 1: ");
  sb.Append(reader.GetPageSizeWithRotation(1));
  sb.Append(Environment.NewLine);
  sb.Append("Is rebuilt? ");
  sb.Append(reader.IsRebuilt().ToString());
  sb.Append(Environment.NewLine);
  sb.Append("Is encrypted? ");
  sb.Append(reader.IsEncrypted().ToString());
  sb.Append(Environment.NewLine);
  sb.Append(Environment.NewLine);
} 
```

# java - jsf中用于图像上传的NullPointer异常

> ID：15540046
> 
> 赞同：0
> 
> 时间：2013-03-21T05:16:29.263
> 
> 标签：java, jsf, file-upload

我在 jsf 中上传文件时遇到问题。我已经完成了以下代码 ih jsf 。

index.xhtml(查看)

```
<h:panelGrid columns="2">

            <h:outputLabel for="userId">User Id</h:outputLabel>
            <h:inputText id="userId" value="#{controller.user.userName}" required="true">                
            </h:inputText>

            <h:outputLabel for="username">Username</h:outputLabel>
            <h:inputText id="username" value="#{controller.user.userId}" required="true">               
            </h:inputText>

            <h:outputLabel for="photo">Profile Picture</h:outputLabel>
            <t:inputFileUpload value="#{controller.user.photo}"  required="true">                
            </t:inputFileUpload>

       </h:panelGrid> 
```

用户.java（模型）

```
package com.profileapp.models;

import java.io.Serializable;
import org.apache.myfaces.custom.fileupload.UploadedFile;

public class User implements Serializable
{
    private String userId;
    private String userName;
    private UploadedFile photo;

    public User()
    {        
    }
    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public UploadedFile getPhoto() {
        return photo;
    }

    public void setPhoto(UploadedFile photo) {
        this.photo = photo;
    }    
} 
```

UserController.java(控制器)

```
package com.profileapp.controllers;

import com.profileapp.models.User;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.Serializable;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import org.apache.commons.io.FilenameUtils;

@ManagedBean(name="controller")
@RequestScoped

public class UserController implements Serializable
{
    private User user=new User();   

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String submit() throws IOException ,SQLException ,ClassNotFoundException, InstantiationException, IllegalAccessException
    {
        String fileName = FilenameUtils.getName(user.getPhoto().getName());
        byte[] bytes = user.getPhoto().getBytes();
        int index=fileName.indexOf('.');
        String extension=fileName.substring(index);
        File file;
        String path;
        path = "C:/Users/Manohar/Documents/NetBeansProjects/ProfileApplication/build/web/uploads/"+user.getUserName()+(float)Math.random()+"/";
        if(extension.equalsIgnoreCase(".jpg")||extension.equalsIgnoreCase(".jpeg")||extension.equalsIgnoreCase(".png")||extension.equalsIgnoreCase(".gif")||extension.equalsIgnoreCase(".tif"))
        {
            file=new File(path);      
            if(!file.exists())
            {
                file.mkdir();                
            }
            path=file+"/"+fileName;
            FileOutputStream outfile=new FileOutputStream(path);           
            outfile.write(bytes);
            outfile.close();  
            PreparedStatement stmt;            
            Connection connection;
            String url="jdbc:mysql://localhost:3306/userprofile";
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            connection = DriverManager.getConnection(url, "root", "mysql"); 
            stmt = connection.prepareStatement("insert into table_profile values('"+user.getUserName()+"','"+user.getUserId()+"','"+path+"')");                                 
            stmt.executeUpdate();
            connection.close(); 
            return "SUCCESS";
        }
        else
        {
            return "FAIL";
        }              
    }

} 
```

当我运行此代码时，我得到字段 inputFileUpolid 元素的空指针执行，即当我调试时，我观察到 User.photo 字段的 setter 方法没有被调用

我收到以下错误（组件树）

```
<UIViewRoot id="j_id1" inView="true" locale="en_US" renderKitId="HTML_BASIC" rendered="true" transient="false" viewId="/index.xhtml">

    <?xml version='1.0' encoding='UTF-8' ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">

    <UIOutput id="j_idt4" inView="true" rendered="true" transient="false">

        <title>Facelet Title</title>

    </UIOutput>

    <UIOutput id="j_idt6" inView="true" rendered="true" transient="false">

        <HtmlForm enctype="application/x-www-form-urlencoded" id="j_idt7" inView="true" prependId="true" rendered="true" submitted="true" transient="false">

            <HtmlPanelGrid border="-2147483648" columns="2" id="j_idt8" inView="true" rendered="true" transient="false">

                <HtmlOutputLabel escape="true" for="userId" id="j_idt9" inView="true" rendered="true" transient="false">

                    User Id

                </HtmlOutputLabel>

                <HtmlInputText disabled="false" id="userId" immediate="false" inView="true" localValueSet="false" maxlength="-2147483648" readonly="false" rendered="true" required="true" size="-2147483648" transient="false" valid="true" value="manu"/>

                <HtmlOutputLabel escape="true" for="username" id="j_idt11" inView="true" rendered="true" transient="false">

                    Username

                </HtmlOutputLabel>

                <HtmlInputText disabled="false" id="username" immediate="false" inView="true" localValueSet="false" maxlength="-2147483648" readonly="false" rendered="true" required="true" size="-2147483648" transient="false" valid="true" value="manu"/>

                <HtmlOutputLabel escape="true" for="photo" id="j_idt13" inView="true" rendered="true" transient="false">

                    Profile Picture

                </HtmlOutputLabel>

                <HtmlInputFileUpload disabled="false" id="j_idt15" immediate="false" inView="true" localValueSet="false" maxlength="-2147483648" readonly="false" rendered="true" required="true" size="-2147483648" transient="false" valid="true"/>

            </HtmlPanelGrid>

            <HtmlCommandButton action="#{controller.submit()}" actionExpression="#{controller.submit()}" disabled="false" id="j_idt16" immediate="false" inView="true" readonly="false" rendered="true" transient="false" type="submit" value="Register"/>

        </HtmlForm>

    </UIOutput>

    </html>

</UIViewRoot> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:43:43.373

您忘记将表单编码正确设置为`multipart/form-data`. JSF 组件树显示它使用默认的`application/x-www-form-urlencoded`.

相应地修复它：

```
<h:form enctype="multipart/form-data"> 
```

默认的表单 enctype 不支持文件上传。不要忘记`web.xml`按照[手册](http://myfaces.apache.org/tomahawk/extensionsFilter.html)注册扩展过滤器。否则 JSF 将无法正确执行应用请求值阶段。

### 也可以看看：

*   [JSF 2.0 文件上传](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload/5424229#5424229)

# asp.net - 回发仅在页面加载中有效吗？

> ID：15540048
> 
> 赞同：0
> 
> 时间：2013-03-21T05:16:33.043
> 
> 标签：asp.net, autopostback

可能是这个问题似乎不合逻辑，但我想探索它。我有 if 语句，我想在该语句中回发页面，但不在页面加载中。我的代码是

```
if (Request.QueryString["HotelID"] != null)
            {
                //here i want to set autopostback true
            } 
```

所以当我的页面有查询字符串时会发回。

# ubuntu - 无法在 Ubuntu 上的 GVim 中获取 NeoComplCache

> ID：15540050
> 
> 赞同：0
> 
> 时间：2013-03-21T05:16:37.217
> 
> 标签：ubuntu, vim

我已经在我的 Ubuntu 计算机上安装了 GVim，在将 necomplcache 文件添加到我的 vimfiles 然后将 let g:neocomplcache_enable_at_startup = 1 添加到我的 .vimrc 之后，我仍然没有在 gvim 中获得弹出自动完成功能。我还尝试执行 :NeoComplCacheEnable 并获得“不是编辑器命令”。

我是在 ubuntu 上使用 gvim 的新手，我在 Windows 中做了完全相同的事情，它在 Windows 上运行良好。我也尝试过 AutoCompPop，但也无法在 Ubuntu 中使用。

这些插件可以在 Ubuntu GVim 中使用吗？

在 Ubuntu 的 GVim 中是否有其他自动完成选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:38:32.893

我将插件目录从 vimfiles 更改为 .vim ，它似乎解决了这个问题。

# paypal - Paypal Sandbox 显示不正确的电子邮件

> ID：15540051
> 
> 赞同：5
> 
> 时间：2013-03-21T05:16:37.733
> 
> 标签：paypal, paypal-sandbox

我正在进行快速结帐交易，当我登录到我的沙盒帐户时，它给了我一个错误：

> 此沙盒电子邮件地址不可用。请输入另一个电子邮件地址

![1) 第一个屏幕显示贝宝的登录页面](../Images/04a37b6bc7ace0f0a183643ae611c850.png) ![2）其次是重定向有错误的页面](../Images/d66f6b57b6638600075a2980cfcaff3f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:27:23.980

目前Paypal 已经推出了新的API。也只有 SDK 的 beta 版本可用。目前沙盒帐户已关闭，因此您无法访问或测试使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:34:27.823

我认为贝宝正在给您正确的错误消息，沙盒将只允许您使用与您的沙盒凭据电子邮件相关的电子邮件地址登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:34:26.170

确保地址栏中的地址反映的是沙盒 URL，而不是实时站点 URL。您也可以在打开浏览器并登录 developer.paypal.com 之前尝试清除 cookie 和缓存。有一些问题会导致登录问题，清除 cookie 和缓存已经解决了其中一些问题。

# r - 如何创建新的 R 工作区

> ID：15540055
> 
> 赞同：-1
> 
> 时间：2013-03-21T05:16:54.790
> 
> 标签：r

我尝试使用 rm 命令重置我的 R，但现在它无法识别 csv 导入代码。我知道代码是正确的，因为我放弃并开始使用我的笔记本电脑。但是，现在我桌面上的 R 完全没用，我不希望这样。我已经多次删除并重新安装了 R，但它仍然拒绝工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:25:37.427

默认保存的工作区文件（名为`.Rdata`. 在 Windows 和 MacOS 中，默认情况下此文件是不可见的（也称为点文件或系统文件）。默认的历史文件，`.Rhistory`也容易损坏。如果这是您的问题，您需要使用命令行中的系统功能删除损坏的文件，然后重新启动 R。

# cocos2d-x - 平铺地图图层上的视差效果

> ID：15540056
> 
> 赞同：0
> 
> 时间：2013-03-21T05:17:02.230
> 
> 标签：cocos2d-x, parallax

我正在使用三层平铺地图，我想在这些层上提供视差效果。我的代码是：

```
 CCTMXTiledMap *city = CCTMXTiledMap::create("City.tmx");

     CCTMXLayer* ForegroundLayer = city->layerNamed("ForeGround");
 CCTMXLayer* BackgroundLayer1 = city->layerNamed("Background1");
 CCTMXLayer* BackgroundLayer2 = city->layerNamed("Background2");

     CCParallaxNode* voidNode = CCParallaxNode::create();

    // NOW add the 3 layers to the 'void' node

     voidNode->addChild(BackgroundLayer2, -1, ccp(0.4f,0.5f), CCPointZero);
     voidNode->addChild(BackgroundLayer1, 1, ccp(2.2f,1.0f), ccp(0,-200) );
     voidNode->addChild(ForegroundLayer, 2, ccp(3.0f,2.5f), ccp(200,800) );

voidNode->runAction(temp); //some action temp

    addChild(voidNode); 
```

它给出了断言失败：child->m_pParent==0 如果我们使用精灵而不是 TMXLayers，则相同的代码可以工作。我在这段代码中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:20:05.497

这些图层已经是 CCTMXTiledMap 的子节点。一个节点只能有一个父节点。

您可以尝试先从其父层中删除每个层，然后将它们添加到 voidnode。然而，这可能不起作用，因为图层可能取决于它们的 tilemap 父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T01:06:48.310

试试这个代码

```
backgroundLayer->retain();
backgroundLayer->removeFromParentAndCleanup(false);
parallaxNode->addChild(backroundLayer, 0, Vec2(0, 0), Vec2(0, 0));//some points
backgroundLayer->release(); 
```

# sql - 行乘以结果数

> ID：15540057
> 
> 赞同：0
> 
> 时间：2013-03-21T05:17:04.860
> 
> 标签：sql, tsql, sql-server-2008-r2, ssrs-2008

```
SELECT  s.SR_Service_RecID    -- will have 1 result
     ,  p.Description         -- will have 8 results 
     ,  t.notes               -- will have 5 results

FROM SR_Service s
     LEFT JOIN IV_Product p
            ON p.SR_Service_RecID = s.SR_Service_RecID
     LEFT JOIN Time_Entry t
            ON t.SR_Service_RecID = s.SR_Service_RecID 
```

此查询将 p.Description 乘以 t.Notes 以获得总行数。每个 p.Description 针对每个单独的 t.notes 显示 5 次。

结果集：

```
SR_RecID    Description    Notes
12345       Product 1      Note 1
12345       Product 1      Note 2
12345       Product 1      Note 3
12345       Product 1      Note 4
12345       Product 1      Note 5
12345       Product 2      Note 1
12345       Product 2      Note 2
12345       Product 2      Note 3
12345       Product 2      Note 4
12345       Product 2      Note 5
Etc.. 
```

我不确定如何解决这个问题......任何帮助将不胜感激。

[编辑]：由于结果是正确的，您如何将其放入 SSRS 报告中以仅显示正确数量的结果，因为它将显示所有重复的行？

```
SR_RecID
12345

Description
Product 1
Product 2
Product 3
Product 4
Product 5
Product 6
Product 7
Product 8

Notes 1
Notes 2
Notes 3
Notes 4
Notes 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:20:40.740

如果通过“解决”您的意思是如何每个音符只有 1 个`SR_RecID`，`Description`那么您需要`Notes`使用聚合函数（`MAX`、`MIN`等）为每个音符仅选择 1 个。

否则，正如多次评论的那样，您的结果是预期的。

# asp.net - 控制事件未从更新面板中触发

> ID：15540058
> 
> 赞同：0
> 
> 时间：2013-03-21T05:17:08.483
> 
> 标签：asp.net, ajax

我有一个通过计时器更新的列表框，并在 UpdatePanel 中按预期工作。

但是我无法触发 selectedindexchanged 事件。我认为这与部分回发有关。有人知道我能做些什么来完成这项工作吗？

当我将它移出 UpdatePanel 时，它工作正常。但是显然我不能做部分回发。

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" UpdateMode="Conditional">
<ContentTemplate>
    <asp:Timer ID="Timer1" runat="server" OnTick="Timer1_Tick" Interval="500"></asp:Timer>
    <asp:ListBox ID="ListBox_JobPositions" OnSelectedIndexChanged="ListBox_JobPositions_SelectedIndexChanged"  runat="server" Height="750px" Width="300px" DataSourceID="sqlDataSource" DataTextField="Company" DataValueField="Pid"></asp:ListBox>
</ContentTemplate>
</asp:UpdatePanel> 
```

更新：

现在尝试了以下更改，计时器事件仍在工作，但 selectedindexchanged 事件没有。我迷路了。

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
<ContentTemplate>
    <asp:Timer ID="Timer1" runat="server" OnTick="Timer1_Tick" Interval="500"></asp:Timer>
    <asp:ListBox ID="ListBox_JobPositions" runat="server" Height="750px" Width="300px" DataSourceID="sqlDataSource" DataTextField="Company" DataValueField="Pid" OnSelectedIndexChanged="ListBox_JobPositions_SelectedIndexChanged" AutoPostBack="True"></asp:ListBox>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="Timer1" />
</Triggers> 
```

这是当列表框在 UpdatePanel 内时不会触发的事件，但在不在时会起作用。

```
protected void ListBox_JobPositions_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Write("test");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:26:04.620

您没有收到事件的原因是，您的更改事件不会导致回发。您的回发是由计时器引起的。

asp.net 接收到的事件是计时器事件，而不是 ListBox 事件。

要解决此问题，您应该设置`AutoPostBack`为 true。这将导致 ListBox 在数据更改并且您的事件应该触发时立即执行 PostBack。

```
<asp:ListBox ID="ListBox_JobPositions" AutoPostBack="True"  
     OnSelectedIndexChanged="ListBox_JobPositions_SelectedIndexChanged"  
     runat="server" Height="750px" Width="300px" 
     DataSourceID="sqlDataSource" 
     DataTextField="Company" 
     DataValueField="Pid">
</asp:ListBox> 
```

由于您已将 设置`UpdateMode`为`Conditional`，因此您还应该将 设置`ChildrenAsTriggers`为 true。这样，List 会导致 PostBack，这也将是部分更新。

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" 
                 UpdateMode="Conditional" 
                 ChildrenAsTriggers="True"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:30:53.800

现在可以工作，必须手动指定异步和完整回发触发器。谢谢你的帮助。

```
<asp:UpdatePanel ID="UpdatePanel" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
<ContentTemplate>
    <asp:Timer ID="Timer1" runat="server" OnTick="Timer1_Tick" Interval="500"></asp:Timer>
    <asp:ListBox ID="ListBox_JobPositions" runat="server" Height="750px" Width="300px" DataSourceID="sqlDataSource" DataTextField="Company" DataValueField="Pid" OnSelectedIndexChanged="ListBox_JobPositions_SelectedIndexChanged" AutoPostBack="True"></asp:ListBox>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="Timer1" />
    <asp:PostBackTrigger ControlID="ListBox_JobPositions" /> 
</Triggers>
</asp:UpdatePanel> 
```

# string - 对 KMP 中的预处理表感到困惑

> ID：15540062
> 
> 赞同：1
> 
> 时间：2013-03-21T05:17:30.150
> 
> 标签：string, algorithm

查看 KMP 算法，并对 KMP 中计算后缀-前缀计数表的特定行感到困惑。

algorithm kmp_table：输入：一个字符数组，W（要分析的单词）一个整数数组，T（要填充的表格）输出：什么都没有（但在操作期间，它填充表格）

```
define variables:
    an integer, pos ← 2 (the current position we are computing in T)
    an integer, cnd ← 0 (the zero-based index in W of the next 
    character of the current candidate substring)

(the first few values are fixed but different from what the algorithm 
might suggest)
let T[0] ← -1, T[1] ← 0

while pos is less than the length of W, do:
    (first case: the substring continues)
    if W[pos - 1] = W[cnd], 
      let cnd ← cnd + 1, T[pos] ← cnd, pos ← pos + 1

    (second case: it doesn't, but we can fall back)
    otherwise, if cnd > 0, let cnd ← T[cnd]

    (third case: we have run out of candidates.  Note cnd = 0)
    otherwise, let T[pos] ← 0, pos ← pos + 1 
```

以上直接取自维基百科。`cnd > 0`如果为什么 set ，我有点困惑`cnd := T[cnd]`，不应该将 cnd 重置回 0 就好像我们重新开始一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:32:47.530

显然，`T[0] = -1`因此设置`cnd`为`T[cnd = 0] = -1`将相当于`W[cnd = -1]`在下一次迭代中读取，这在字符串之外。至少出于这个原因，您需要对`cnd > 0`vs进行特殊处理`cnd == 0`。

`cnd`我们与0进行比较的真正原因`T[cnd]`是，`W[]`当`W[cnd]`. `T[0]`但是，不能用于此目的，因为 . 的左侧没有任何内容`W[0]`。

> 为什么设置 cnd := T[cnd]，不应该将 cnd 重置回 0，就好像我们重新开始一样？

您错过了算法的全部要点。如果您在部分匹配后从位置 0 重新开始，您将回到原始算法。`T[]`包含倒带位置，正如您从下面的示例表中看到的`W[]`那样`T[]`，它并不总是 0。因此，您有时会转到其他位置并从那里继续匹配，而不是一直回到位置 0。这就是使算法比简单算法更具可扩展性的原因。

# box-api - 无法获取 box api 的访问令牌 > “无效的 grant_type 参数或缺少参数”

> ID：15540063
> 
> 赞同：1
> 
> 时间：2013-03-21T05:17:31.367
> 
> 标签：box-api

无论我是否使用：

```
https://www.box.com/api/oauth2/token?grant_type=authorization_code&code=OS9wgZP1NkP9e7R7cLbpfnTlMJLCwyIn&client_id=*******&client_secret=********* 
```

或者如果我使用：

```
curl -k https://www.box.com/api/oauth2/token -d 'grant_type=authorization_code&code=OS9wgZP1NkP9e7R7cLbpfnTlMJLCwyIn&client_id=**********&client_secret=******' -X POST 
```

我总是得到：

> {"error":"invalid_request","error_description":"无效的 grant_type 参数或缺少参数"}

任何帮助表示赞赏。

# google-app-engine - SSL 谷歌应用引擎

> ID：15540065
> 
> 赞同：0
> 
> 时间：2013-03-21T05:17:34.750
> 
> 标签：google-app-engine, ssl, google-apps

为了在 Appengine 中启用 SSL。我尝试为我的自定义域启用 SSL

到目前为止，我找到了这篇文章：

[在 AppEngine 上设置 SSL...分配的 URL“空”](https://stackoverflow.com/questions/11245876/setup-ssl-on-appengine-assigned-urls-empty)

```
openssl genrsa -out rsaprivkey.pem 1024
openssl req -new -x509 -key rsaprivkey.pem -out dsacert.pem 
```

然后我将生成的内容上传`.pem`到`google app`SSL 设置页面

```
dsacert.pem > PEM encoded X.509 certificate 
rsaprivkey.pem > Unencrypted PEM encoded RSA private key 
```

但是，上传后我收到此错误消息。接下来我该怎么办？

> 证书中的域名只能包含允许的字符 (RFC 1034)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:54:08.593

解决！

本文 [在 AppEngine 上设置 SSL...分配的 URL“空”](https://stackoverflow.com/questions/11245876/setup-ssl-on-appengine-assigned-urls-empty)

> 当 open ssl 向您询问有关您的应用程序名称的问题时，请确保在您的答案中包含整个 url，www.abc.com 以保护 [https://www.abc.com](https://www.abc.com)

但我一开始在 openssl pem 生成期间没有找到任何地方输入我的应用程序名称。

最后我发现域应该填写组织和通用名称字段。 [http://www.rackspace.com/knowledge_center/article/generate-a-csr-with-openssl](http://www.rackspace.com/knowledge_center/article/generate-a-csr-with-openssl)

```
Organization Name (eg, company) [Internet Widgits Pty Ltd]: > example.com
Common Name (eg, YOUR name) > *.example.com 
```

# javascript - Parse 的 API 说要使用 curl 请求。我想使用 AJAX

> ID：15540071
> 
> 赞同：1
> 
> 时间：2013-03-21T05:17:59.167
> 
> 标签：javascript, ajax, api

我正在使用 Parse 的 API 创建一个对象，并且对在我的 Javascript 代码中如何以及在何处使用它感到困惑。

**解析 API：** [https ://www.parse.com/docs/rest#objects-creating](https://www.parse.com/docs/rest#objects-creating)

这是如何创建 Parse 的 API 中所述的对象的*示例：*

```
 curl -X POST \
 -H "X-Parse-Application-Id: bLAj1fl7B77TZYo1zv9vIAiUgC19RXgpzsFZeVgM" \
 -H "X-Parse-REST-API-Key: PPrIdiqZXMHT1JwveI2AdhsAhGpx7WjXfvYTSYXh" \
 -H "Content-Type: application/json" \
 -d '{"score":1337,"playerName":"Sean Plott","cheatMode":false}' \
 https://api.parse.com/1/classes/GameScore 
```

我正在尝试使用 AJAX 发送一个 POST 请求，该请求将一些文本附加到列表项。

**我的Javascript代码：**

```
 button.click(function(){      // Submitting text from a textbox       
    $.ajax({
      url : 'https://api.parse.com/1/classes/<className>',  // What is className?
      type: 'POST',
      data:  text.val(),        // Text the user inputted in a textbox
      error: function (data) { 
       console.log('error');
      }, 
      success: function (data) {
           $('ul').append('<li>' + data + '</li>');
      }
    });
  }); 
```

我将如何以及在哪里使用 curl 请求，就像我的代码中的示例一样？另外，我不知道 url 键中的“className”是什么意思。如果我希望文本出现在其中的 ul 类名被称为“消息”，那么我的 AJAX 请求中的 url 键是否会是“ [https://api.parse.com/1/classes/Messages](https://api.parse.com/1/classes/Messages) ”？

任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:25:28.867

你需要使用类似的东西

```
$.ajax({
    url : 'https://api.parse.com/1/classes/TestObject',
    type : 'POST',
    contentType : 'application/json',
    headers : {
        'X-Parse-Application-Id' : 'bLAj1fl7B77TZYo1zv9vIAiUgC19RXgpzsFZeVgM',
        'X-Parse-REST-API-Key' : 'PPrIdiqZXMHT1JwveI2AdhsAhGpx7WjXfvYTSYXh'
    },
    data : JSON.stringify({
                key : 'value: ' + new Date().getTime()
            }),
    error : function(data) {
        console.log('error');
    },
    success : function(data) {
        console.log('success', data)
        $('ul').append('<li>' + JSON.stringify(data) + '</li>');
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/U4d72/1/)

# ios - 包括 .pch 文件中的通用头文件

> ID：15540075
> 
> 赞同：3
> 
> 时间：2013-03-21T05:18:16.933
> 
> 标签：ios, objective-c

我只是想知道，在 .pch 文件中包含常用/最常用的头文件是一种好习惯吗？

例如标题下面需要的大多数文件

```
 #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h> 
```

因此，不是每个文件都应该有，而是将它们添加到 .pch 文件中是一种好习惯吗？

.pch 文件

```
 #ifdef __OBJC__
     #import <UIKit/UIKit.h>
     #import <Foundation/Foundation.h>
     #import <MostlyUsed.h>
     #endif 
```

我发现了一些缺点，1）依赖关系被隐藏了。2) 源文件不能直接复制。

如果你们对此提供一些意见，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T05:22:19.487

是的，你可以做到。

即使它减少了编译时间。

摘自[在 Objective-C 中，在每个类中导入相同的头文件会使编译时间更长？](https://stackoverflow.com/questions/10910065/in-objective-c-importing-same-headers-in-every-class-make-compile-time-longer)

> 一般来说，新生成的 iOS 项目都带有这个功能，称为预编译头或前缀头，是一个扩展名为 .pch 的文件。
> 
> 你可以把所有你想要的头文件放在那里，Xcode 会在它构建其他任何东西之前预编译它，并使用它来编译你项目中的其他编译单元（例如 .m 文件）。
> 
> 使用预编译头文件可能会也可能不会增加编译时间；一般来说，只要你有很多通用的头文件和/或很多源文件，它就会减少编译时间。
> 
> 但是，将预编译的头文件视为大垃圾场并不一定是好的做法，因为当您可能想要强制组件之间的松散耦合时，您的编译单元可以对各种东西形成隐式依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:23:13.323

这当然是一个很好的做法，因为它减少了编译时间，并且这样做代码更易于管理。

# java - 删除连续行后动态更新 JTable 行

> ID：15540082
> 
> 赞同：1
> 
> 时间：2013-03-21T05:19:10.100
> 
> 标签：java, multithreading, swing, concurrency, jtable

我有一个 JTable，我正在动态地向该 JTable 插入行。在一些用户干预之后，将插入一个新行。然后我将调用一个函数，其参数为选定的行号，在该函数内部，我有一些代码将相应地更新同一行。每个行插入和行值更新代码将在单独的线程中运行。

```
public void updateRow(int row,JTable myTable)
{
  String text = "";
 //After lot of processing, setting the table cell value at the 'row' on the 4th column
  myTable.setValueAt(text, row, 4);
} 
```

我面临的问题如下，

如果用户删除任何行，那么行的位置将会改变，此时如果函数`updateRow()`试图更新其他行，那么它将由于行数的变化而失败。

假设我一次有 3 行，并且每行的 updateRow 正在进行中。

```
updateRow(0,userTable);//For the 1st row
updateRow(1,userTable);//For the 2nd row
updateRow(2,userTable);//For the 3rd row 
```

并假设第二行的 updateRow() 已完成。这将导致第三行的 updateRow() 函数出现问题。因为，它的行值为 '2' 。由于第 3 行被删除，因此没有第 3 行，这反过来又导致以下代码失败

```
myTable.setValueAt(text, row, 4);//Currently, row has the value as '2' 
```

任何人都可以建议我如何使用行值相应地跟踪行更新，即使行的位置动态更改？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:32:07.453

正如@mKorbel 在评论中所建议的那样，直接对模型进行操作，而不是依赖于视图的行号；如果您更改模型，视图将跟随。[正如这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)所讨论的，“`JTable`提供从模型坐标转换为视图坐标的方法——`convertColumnIndexToView`并且`convertRowIndexToView`——以及从视图坐标转换为模型坐标的方法——`convertColumnIndexToModel`和`convertRowIndexToModel`.

# objective-c - 从字符串数组制作 ccsprites

> ID：15540091
> 
> 赞同：0
> 
> 时间：2013-03-21T05:20:19.667
> 
> 标签：objective-c, cocos2d-iphone, nsarray

我制作了一个方法，将字符串对象与数组中枚举的每个成员匹配。我想将精灵添加到 bArray 的每个成员中，并与它们各自的字符串匹配作为精灵图像。我怎样才能做到这一点？

```
+ (NSArray *)names
{
    static NSMutableArray * _names = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _names = [NSMutableArray arrayWithCapacity:20];
        [_names insertObject:@"image1.png" atIndex:image1];
        [_names insertObject:@"image2.png" atIndex:image2];
        [_names insertObject:@"image3.png" atIndex:image3];
        [_names insertObject:@"image4.png" atIndex:image4];
        [_names insertObject:@"image5.png" atIndex:image5];
        [_names insertObject:@"image6.png" atIndex:image6];
                            .
                            .
                            .
                            .
    });

    return _names;
}

-(void)spriteGroups    {
    NSArray* sgArray;
    sgArray = [[spManager names] objectsAtIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 3)]];
    CCSprite* groupSprite = [CCSprite spriteWithFile:[sgArray[0]]];// this gives me an expected identifier error. I guess this is not the right way
    for (int i = 1; i > [sgArray count]; i++) {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:22:24.300

删除多余的方括号`sgArray`

```
CCSprite* groupSprite = [CCSprite spriteWithFile:sgArray[0]]; 
```

# ios - 当我的应用邮件有多个收件人时出现问题 - 目标 c

> ID：15540093
> 
> 赞同：0
> 
> 时间：2013-03-21T05:20:41.117
> 
> 标签：ios, ios5, mfmailcomposeviewcontroller

当我的邮件有多个收件人时，我遇到了一个问题，默认情况下我有两个附件。当我向多个收件人发送邮件时，除了下面的代码之外，我还有什么需要做的吗？（我必须从 UI 中选择或输入收件人 ID）

```
 if ([MFMailComposeViewController canSendMail])
            {
            [self printPdfAndCsv];// code to generate pdf & csv

            MFMailComposeViewController* mailComposer = [[MFMailComposeViewController alloc] init];
            mailComposer.mailComposeDelegate = self;

            // attaching PDF File.
            [mailComposer addAttachmentData:[NSData dataWithContentsOfFile:self.pdfFilePath]
                                   mimeType:@"Application/pdf" fileName:[NSString stringWithFormat:@"pdfName-%@.pdf", selectedProjectName ]];
            // attaching CSV File.
            [mailComposer addAttachmentData:[NSData dataWithContentsOfFile:self.csvFilePath]
                                   mimeType:@"text/csv" fileName:[NSString stringWithFormat:@"csvName-%@.csv", selectedProjectName ]];
            [self presentViewController:mailComposer animated:YES completion:nil];
           } 
```

我是 iPhone 开发的初学者，所以我需要您的宝贵帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:23:27.997

如果您想向多个用户发送邮件，那么您可以使用：

```
[mailController setToRecipients:[NSArray arrayWithObject:@"email@address.com",@"email1@address.com",@"email@address.com",nil]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:27:41.640

试试这个

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
NSArray *toRecipients = [NSArray arrayWithObjects:@"abc@gmail.com",@"xyz@gmail.com",nil]; 
[picker setToRecipients:toRecipients]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:38:27.163

我从[rmaddy](https://stackoverflow.com/users/1226963/rmaddy)那里得到了关于他的评论的解决方案，

*   我们测试的其中一个电子邮件地址可能存在问题。

*   也许电子邮件最终显示为垃圾邮件（垃圾邮件）。

    一旦用户点击发送，它就不受我们的控制。（就我而言；我发现我发送的邮件在垃圾邮件箱中）

# javascript - Javascript - 用新数据填充组合框

> ID：15540094
> 
> 赞同：0
> 
> 时间：2013-03-21T05:21:08.277
> 
> 标签：javascript, ajax, select, input, combobox

我正在尝试用来自 AJAX 的数据填充组合框（输入）。这是为了获取选定州的每个城市，该州在另一个选择控件（州控件）上被选中。

**我试过的：**

I'm using the "change" event on the state comboBox, when a state is selected i search for it cities and populate the city control.

```
 $("#state").on("change", function () {

            getCities($(this), $("#city"));
        }); 
```

这实际上是可行的，但我真正的问题是：当我将此数据带到控件时，我必须单击它来重新填充它（以前的状态数据仍然存在），我希望在我完成选择时完成状态选择输入上的状态。与这个问题相处的另一个问题是，每次状态选择输入改变它的城市时，选择第一个选项（--- SELECT CITY ---）。这是功能代码：

```
function getCities(stateControl, cityControl) {

    if (stateControl.val()) {
        var options = '<option value="0" selected="selected">--- CHOOSE CITY --- </option>';
        cityControl.html(options);
        var dataString = "state="+stateControl.val();
        $.ajax({
            type: "POST",
            url: "cities.php",
            data: dataString,
            dataType: "json",
            success: function (resposta) { 

                    for(var i=0; i < resposta.length; i++){    
                        options += '<option value="' + city[i].cod_cidade + '">' + cities[i].nome + '</option>';                                                      
                    };
                    controleCidades.html(options);
            }
        });
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:26:52.733

jQuery：

```
 $("#city").find('option').remove(); 
```

javascript:

```
document.getElementById('city').options.length = 0; 
```

在添加之前使用它，然后它将删除所有以前的选项。

[看这里](http://www.somacon.com/p542.php)

# c++ - 向量迭代器 C++

> ID：15540095
> 
> 赞同：1
> 
> 时间：2013-03-21T05:21:15.033
> 
> 标签：c++, pointers, vector, iterator

我对开始和结束工作的方式感到有点困惑，他们在我看来是不一致的。当前进和后退时，他们有不同的行为。

```
vector<Actor *> a;
a.push_back(new Actor(11));
a.push_back(new Actor(22));
a.push_back(new Actor(33));
vector<Actor *>::iterator it = a.begin();

int x  =0;
while(a.begin()+x != a.end()){
cout << (*(a.begin()+x)) << "\n";
x++;
}

cout << "\n";

int y = 1; // if this is set to 0 then its a seg fault =/ when I access 
while(a.end()-y != a.begin()){
cout << (*(a.end()-y)) << "\n";
y++;
} 
```

输出

```
0x979a008
0x979a028
0x979a018

0
0x979a018
0x979a028 
```

我怎样才能得到预期的模式

```
0x979a008
0x979a028
0x979a018

0x979a018
0x979a028
0x979a008 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:23:21.037

您应该使用[反向迭代器](http://www.cplusplus.com/reference/iterator/reverse_iterator/)：

```
int y = 0;
while(a.rbegin() +y != a.rend()){
    cout << (*(a.rbegin()+y)) << "\n";
    y++;
} 
```

或者更好的是使用`++`迭代器本身的重载运算符：

```
auto iter = a.rbegin();
while(iter != a.rend()){
    cout << *(iter++) << "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:36:55.957

请注意，它`begin()`指向向量的第一个元素，但`end()`指向*最后一个元素*。取消引用永远不安全`end()`，但您可以将迭代器与它进行比较。

如果向量为空，则`begin() == end()`，并且您不能取消引用任何一个。

循环遍历向量元素的一种更惯用的方法是：

```
for (vector<Actor*>::iterator i = a.begin(); i != a.end(); ++i) {
   // do something here
} 
```

要反向迭代，使用`rbegin()`and更简单`rend()`，它的工作方式与 and `begin()`/大致相同`end()`，但以相反的顺序迭代：

```
for (vector<Actor*>::reverse_iterator i = a.rbegin(); i != a.rend(); ++i) {
   // do something here
} 
```

此外，如果您不打算修改元素，则应使用 a `const_iterator`(or`const_reverse_iterator`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:31:11.080

实现这一目标的一种非常简单的方法是遵循

```
// first element to the last
auto it = a.begin()
while (it != a.end())
{
cout<<*it<<"\n";
++it;
}
cout<<"\n"
// Last element to first
auto rit = a.rbegin()
while(rit != a.rend())
{
cout<<*rit<<"\n";
++rit;
} 
```

注意：不要试图取消引用 a.end() 及以后。在`y = 0`您的程序中， a.end() 在该行中被取消引用，`cout << (*(a.end()-y)) << "\n";`这会导致段错误。vector 的元素包含在可以从 访问 的序列`begin()`中`end()-1`。.end() 指向“过去”容器的最后一个元素，不应取消引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:47:31.697

```
std::for_each(a.begin(), a.end(), [](const Actor *& a){ std::cout << a; });
std::for_each(a.rbegin(), a.rend(), [](const Actor *& a){ std::cout << a; });

auto print_actor = [](const Actor *& a){ std::cout << a; };
std::for_each(a.begin(), a.end(), print_actor);
std::for_each(a.rbegin(), a.rend(), print_actor); 
```

# android - 获取相对于父 ScrollView 的视图坐标

> ID：15540099
> 
> 赞同：6
> 
> 时间：2013-03-21T05:21:29.100
> 
> 标签：android

以前，我有以下`ScrollView`和布局。它的*滚动直到选定的视图可见*代码有效。

```
<ScrollView>
    <LinearLayout>
        <Info View 1/>
        <Info View 2/>
        <Info View 3/>
    </LinearLayout>
</ScrollView>

private void initScrollView() {
    if (this.selectedInfoView == null) {
        // Nothing to scroll.
        return;
    }

    ScrollView scrollView = (ScrollView)this.getView().findViewById(R.id.scrollView);

    Rect rect = new Rect();
    Rect scrollViewRect = new Rect();
    selectedInfoView.getHitRect(rect);
    scrollView.getDrawingRect(scrollViewRect);
    int dy = rect.bottom - scrollViewRect.bottom;
    if (dy > 0) {
        scrollView.scrollBy(0, dy);
    }
} 
```

注意，`getHitRect`将坐标返回到上一级父级。因此，上面的代码将起作用。

但是，当涉及到稍微复杂的情况时。上面的代码不再起作用。

```
<ScrollView>
    <LinearLayout 0>
        <TextView/>
        <LinearLayout 1>
            <Info View 1/>
            <Info View 2/>
            <Info View 3/>
        </LinearLayout>

        <TextView/>
        <LinearLayout 2>
            <Info View 4/>
            <Info View 5/>
            <Info View 6/>
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

在我的代码中，如果遇到*Info View 1 - 3*，我需要考虑*LinearLayout 0*和*LinearLayout 1*。`getHitRect`谈到*Info View 4-6*，我需要考虑*LinearLayout 0*和*LinearLayout 2*。`getHitRect`

事情看起来很麻烦。有什么方法可以让我获得视图的坐标，相对于 top most `ScrollView`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T07:50:43.467

这是当前可用的代码。很麻烦。但它在这一刻有效。我有几点意见。

```
private void initScrollView() {
    if (this.selectedInfoView == null) {
        // Nothing to scroll.
        return;
    }

    ScrollView scrollView = (ScrollView)this.getView().findViewById(R.id.scrollView);
    LinearLayout linearLayout = null;

    if (this.selectedInfo instanceof Info0) {
        linearLayout = (LinearLayout)this.getView().findViewById(R.id.linearLayout0);
    } else {
        assert(this.selectedInfo instanceof Info1);
        linearLayout = (LinearLayout)this.getView().findViewById(R.id.linearLayout1);
    }

    Rect rect = new Rect();
    Rect linearLayoutRect = new Rect();
    Rect scrollViewRect = new Rect();
    selectedInfoView.getHitRect(rect);
    linearLayout.getHitRect(linearLayoutRect);
    scrollView.getDrawingRect(scrollViewRect);

    // Get coordinate relative to linear layout. See the note below.
    int correct_expected_bottom_y = linearLayoutRect.top + rect.bottom;

    int dy = correct_expected_bottom_y  - scrollViewRect.bottom;
    if (dy > 0) {
        scrollView.scrollBy(0, dy);
    }
} 
```

我还用`getLocationInWindow`,`getLocationOnScreen`和进行了测试`getLocalVisibleRect`。他们都不是万无一失的。

(x, y - 宽度, 高度)

```
--------------------
|                  | (?, 120) <-- correct expected bottom y
|                  | (0, 146) <-- from getLocationInWindow/ getLocationOnScreen
|                  | (0, 0 - 360, 72) <-- from getLocalVisibleRect
--------------------
|                  | (?, 193) <-- correct expected bottom y
|                  | (0, 219) <-- from getLocationInWindow/ getLocationOnScreen
|                  | (0, 0 - 360, 72) <-- from getLocalVisibleRect
--------------------
|                  | (?, 266) <-- correct expected bottom y
|                  | (0, 292) <-- from getLocationInWindow/ getLocationOnScreen
|                  | (0, 0 - 360, 72) <-- from getLocalVisibleRect
--------------------
|                  | (?, 339) <-- correct expected bottom y
|                  | (0, 365) <-- from getLocationInWindow/ getLocationOnScreen
|                  | (0, 0 - 360, 72) <-- from getLocalVisibleRect
--------------------
|                  | (?, 485) <-- correct expected bottom y
| [not visible]    | (0, 511) <-- from getLocationInWindow/ getLocationOnScreen
|                  | (0, 413 - 360, 485) <-- from getLocalVisibleRect
-------------------- 
```

## getLocationInWindow

它总是比预期值多 26 个像素。例如，取第一行*26 = 146 - 120*。我认为这可能是由`ActionBar`或`StatusBar`高度贡献的。

## getLocationOnScreen

相同的行为`getLocationInWindow`

## 获取LocalVisibleRect

当行在屏幕上完全不可见时，它只会获得与预期值相同的值。不知道为什么。查看最后一行，它的底部 y 值 (485) 与预期的底部 y 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-12T06:48:14.373

不确定这是否在 2013 年可用，您现在可以这样做：

```
val bounds = Rect()
childView.getDrawingRect(bounds) // now bounds has the visible drawing coordinates of the view
parentViewGroup.offsetDescendantRectToMyCoords(childView, bounds) // now bounds has the view's coordinates according to the parentViewGroup 
```

`parentViewGroup``childView`是层次结构中任何级别的父级。

# debian - 清除通过 pdebuild 传递的环境变量

> ID：15540100
> 
> 赞同：1
> 
> 时间：2013-03-21T05:21:34.323
> 
> 标签：debian, environment-variables, pbuilder, pdebuild

我`pdebuild`用来在旧版本的 Ubuntu 上测试我的包。但是，环境变量`GOROOT`正在从我的环境泄漏到构建中。

```
debian/tmp/usr/lib/gocode/src/code.brandscreen.net/cortex/go/util/http.go:4:2: cannot find package "io" in any of:
    /home/mjoiner/src/go/src/pkg/io (from $GOROOT)
    /tmp/buildd/golang-brandscreen-0.0/debian/tmp/usr/lib/gocode/src/io (from $GOPATH)
    /usr/lib/gocode/src/io 
```

调用时如何清除这个（和其他环境变量）`pdebuild`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:06:15.360

放

```
GOROOT="" 
```

或者

```
unset GOROOT 
```

在**~/.pbuilderrc**有什么作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:15:25.310

通常，通过`pdebuild`运行，所以最简单的事情就是让你清理环境。来自几个不同地方的一般建议，包括[Debian pbuilder 技巧页面](http://wiki.debian.org/PbuilderTricks)，是使用：`pbuilder``sudo``sudo`

```
Defaults        env_reset,env_keep="DIST ARCH DEB_* BUILD* PATH" 
```

在您的`sudo`配置中，以便您仍然可以传递一些控制`pbuilder`操作或由`debhelper`.

# java - Pax 跑步者出错

> ID：15540104
> 
> 赞同：1
> 
> 时间：2013-03-21T05:22:07.730
> 
> 标签：java, maven, osgi, equinox, pax-runner

我正在使用 Maven pax 插件来启动 Equinox 容器，我的 osgi 包应该在其中部署。作为 pax runner 默认启动 felix 容器，我已明确给出启动 Equinox 容器的说明。这是我在 POM 文件中的 pax 插件配置

```
<plugin>
                <groupId>org.ops4j</groupId>
                <artifactId>maven-pax-plugin</artifactId>
                <version>1.4</version>
                <configuration>
                    <runnner>1.4.0</runnner>
                    <framework>equinox</framework>
                    <provision>
                        <param>--log=debug</param> 
                            <param>--definitionURL=file:C:\Users\661447\Desktop\Prime Workspace\OSGiDmHelloWorldProvider\platform.xml</param>               

                    </provision>
                </configuration>
            </plugin> 
```

我也明确给出了平台定义。这是我的 platform.xml 文件

```
<platform>
    <name>Equinox 3.7.0</name>
    <system>
        http://mirror.netcologne.de/eclipse/equinox/drops/R-3.7-201106131736/org.eclipse.osgi_3.7.0.v20110613.jar
    </system>
    <profile name="minimal" default="true">
        <bundle>
            <name>OSGi Services</name>
            <url>
                http://mirror.netcologne.de/eclipse/equinox/drops/R-3.7-201106131736/org.eclipse.osgi.services_3.3.0.v20110513.jar
            </url>
        </bundle>
    </profile>
</platform> 
```

现在，当我尝试通过命令**"mvn install pax:provision"**安装我的包时，我收到以下错误

```
 -> Preparing framework [Equinox 3.8.1]
 -> loading definition from url file:C:/Users/661447/Desktop/Prime Workspace/OSG
iDmHelloWorldProvider/platform.xml
 -> Using platform definition [org.ops4j.pax.runner.platform.internal.PlatformDe
finitionImpl@a10ea2]
 -> Using working directory [runner]
 -> Downloading bundles...
 -> Download system package
 -> Downloading [http://mirror.netcologne.de/eclipse/equinox/drops/R-3.7-2011061
31736/org.eclipse.osgi_3.7.0.v20110613.jar]
 -> Creating new file at destination: C:\Users\661447\Desktop\Prime Workspace\OS
GiDmHelloWorldProvider\runner\bundles\-31806645.jar
 -> Equinox 3.7.0 : connecting...
         ___
        /  /
       /  / Oops, there has been a problem!
      /  /
     /__/   org.ops4j.pax.runner.platform.PlatformException: [http://mirror.netc
ologne.de/eclipse/equinox/drops/R-3.7-201106131736/org.eclipse.osgi_3.7.0.v20110
613.jar] could not be downloaded
    ___
   /__/

 -> Exception caught during execution:
java.lang.RuntimeException: org.ops4j.pax.runner.platform.PlatformException: [ht
tp://mirror.netcologne.de/eclipse/equinox/drops/R-3.7-201106131736/org.eclipse.o
sgi_3.7.0.v20110613.jar] could not be downloaded 
```

有人可以帮帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:42:27.803

如果您使用代理，则必须为 pax-runner 定义代理系统属性：**http.proxyHost**和**http.proxyPort**。Pax-Runner 使用代理属性来解析/下载使用 http(s) url 描述的工件。

# clojure - 如何检查地图中是否存在嵌套键

> ID：15540105
> 
> 赞同：3
> 
> 时间：2013-03-21T05:22:08.983
> 
> 标签：clojure

我想检查向量中给出的每个键是否`[:e [:a :b] [:c :d]]`存在于地图中。

`{:e 2 :a {:b 3} :c {:d 5}}`

我可以写以下内容来检查 -

```
(def kvs {:e 2 :a {:b 3} :c {:d 5}})    
(every? #(contains? kvs %) [[:e] [:a :b] [:c :d]]) 
```

但是，上面的操作会失败，因为 contains 不会像 update-in 那样检查关键的一层。我该如何完成上述工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:19:44.763

对 murtaza 基本方法的改进，当地图具有 nil 或 false 值时也适用：

```
(defn contains-every? [m keyseqs]
  (let [not-found (Object.)]
    (not-any? #{not-found}
              (for [ks keyseqs]
                (get-in m ks not-found)))))

user> (contains-every? {:e 2 :a {:b 3} :c {:d 5}}
                       [[:e] [:a :b] [:c :d]])
true
user> (contains-every? {:e 2 :a {:b 3} :c {:d 5}}
                       [[:e] [:a :b] [:c :d :e]])
false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:38:58.713

这个怎么样：

```
(every? #(if (vector? %)
           (contains? (get-in  kvs (drop-last %)) (last %))
           (contains? kvs %)) [:e [:a :b] [:c :d]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T05:33:48.400

以下是这样做的 -

```
(every? #(get-in kvs %) [[:e] [:a :b] [:c :d]]) 
```

任何其他答案也欢迎！

# c# - 使用 people.list 进行 Google plus 语言编程

> ID：15540107
> 
> 赞同：0
> 
> 时间：2013-03-21T05:22:18.727
> 
> 标签：c#, list, oauth, geometry

作为一名新研究人员，我正在尝试获取有关 G+ 上人们之间关系的信息。我想获取其他人的圈子列表以用于某些研究目的。似乎 G+ API 提供了一个网络版本来使用 people.list 和 OAuth2 令牌。我的问题是，people.list 是否支持 c#、java 等编程语言？我尝试使用 c#，但它似乎被服务器阻止了。

有没有办法在 c#、java 等中应用 people.list？如果有，有样品吗？或者有人提供一些开放代码来完成类似的功能？

非常感谢。

以下是我的相关c#代码：

```
var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description)
                {
                    ClientIdentifier = credentials.ClientId,
                    ClientSecret = credentials.ClientSecret
                };
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

        var servicelist = new PlusService(new BaseClientService.Initializer()
        {
            Authenticator = auth
        });

        string userId = "********************";
        PeopleResource.ListRequest circle = servicelist.People.List(userId, new PeopleResource.Collection());
        circle.MaxResults = 5;
        PeopleFeed danielfeed = circle.Fetch(); 
```

* * *

```
 private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
    {
        IAuthorizationState state = new AuthorizationState(new[] { TasksService.Scopes.Tasks.GetStringValue() });
        state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
        Uri authUri = arg.RequestUserAuthorization(state);

        Process.Start(authUri.ToString());
        Console.Write("  Authorization Code: ");
        string authCode = Console.ReadLine();
        Console.WriteLine();

        return arg.ProcessUserAuthorization(authCode, state);
    }
} 
```

程序在“PeopleFeed danielfeed = circle.Fetch();”处出错 我想我已经通过变量“auth”将 OAuth 令牌传递给 people.list 函数。你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:11:38.343

Google 的[People:list API 的文档在这里](https://developers.google.com/+/api/latest/people/list)。整个 API 是[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)的，并且不阻塞任何语言。

您可以使用 C#，并且只需要学习如何在 C# 中使用 REST API。您将要使用的 C# 类是 HttpClient 类。[这里](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)有很好的文档记录，并且有很多在线教程，以及这里的 SO。

# php - 单击ajax php jquery时将链接加载到滑块中

> ID：15540112
> 
> 赞同：0
> 
> 时间：2013-03-21T05:22:53.333
> 
> 标签：php, jquery, hyperlink, load

如果任何人可以帮助我，我对此代码有疑问请帮助:(我在数据库中有 2 个类别，所有 2 个类别都有图像（图片）我想在用户单击任何类别代码时在图像滑块中加载图像：

```
$("#test).load('test.php?name='+categoryname,function(){
$('#slider').nivoSlider({
effect:'random', 
animSpeed:500, 
pauseTime:3000,
});
}); 
```

* * *

html代码：

```
<div id="slider" class="nivoSlider">
            <span id="test"></span>
        </div> 
```

* * *

test.php 代码

```
echo "<img src='$return' alt='$des_return' title='$des_return'>"."<br>"; 
```

* * *

如果有人可以帮忙，请回答谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:55:42.120

只要快速查看您的代码，我就可以在您的 JS 中看到 2 个错误：

1）第1行。`$("#test)`应该是`$('#test')`

2) 第 5 行。去掉逗号 ie `pauseTime:3000,`->`pauseTime:3000`

PHP应该是：

```
echo "<img src='" . $return . "' alt='" . $des_return . "' title='" . $des_return . "' /><br />"; 
```

# php - 使用 PHP 获取不自动解码的 http url 参数

> ID：15540117
> 
> 赞同：8
> 
> 时间：2013-03-21T05:23:16.197
> 
> 标签：php, http, get

我有一个像

```
test.php?x=hello+world&y=%00h%00e%00l%00l%00o 
```

当我将它写入文件时

```
file_put_contents('x.txt', $_GET['x']); // -->hello world
file_put_contents('y.txt', $_GET['y']); // -->\0h\0e\0l\0l\0o 
```

但我需要在不编码的情况下将其写入

```
file_put_contents('x.txt', ????); // -->hello+world
file_put_contents('y.txt', ????); // -->%00h%00e%00l%00l%00o 
```

我能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-18T13:03:37.513

您可以从 $_SERVER["QUERY_STRING"] 变量中获取未编码的值。

```
function getNonDecodedParameters() {
  $a = array();
  foreach (explode ("&", $_SERVER["QUERY_STRING"]) as $q) {
    $p = explode ('=', $q, 2);
    $a[$p[0]] = isset ($p[1]) ? $p[1] : '';
  }
  return $a;
}

$input = getNonDecodedParameters();
file_put_contents('x.txt', $input['x']); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T05:26:28.417

因为 The`$_GET`和`$_REQUEST`superglobals 会自动通过解码函数（相当于`urldecode()`）运行，所以您只需重新`urlencode()`数据以使其与 URL 字符串中传递的字符匹配：

```
file_put_contents('x.txt', urlencode($_GET['x'])); // -->hello+world
file_put_contents('y.txt', urlencode($_GET['y'])); // -->%00h%00e%00l%00l%00o 
```

我已经在本地对此进行了测试，并且运行良好。但是，根据您的评论，您可能还想查看您的编码设置。如果结果`urlencode($_GET['y'])`是，那么您传入的 ( )`%5C0h%5C0e%5C0l%5C0l%5C0o`似乎被解释为文字字符串（如连接到字符的字符），而不是正确地解释为单个空字符。`null character``%00``"\0"``\``0``\0`

您应该查看[有关字符串编码和 ASCII 设备控制字符的 PHP 文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.details)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:28:00.680

我认为您可以使用`urlencode()`在 URL 中传递值并`urldecode()`获取值。

# iphone - 将数据传递给容器视图

> ID：15540120
> 
> 赞同：1
> 
> 时间：2013-03-21T05:23:19.570
> 
> 标签：iphone, ios

我正在使用 Storyboard 来构建我的应用程序： ![在此处输入图像描述](../Images/abb114ebcb7e7cab4b940177b6d119aa.png)

而且我知道我可以使用以下方法将数据从“第一个视图控制器”传递到下一个控制器：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"some_segue"]) {
        vc = segue.destinationViewController;
        vc.data = @"data_i_want_to_pass";
    }
} 
```

但是现在，数据正在传递给“Tab Bar Controller”，而不是“Discover Table View Controller”。有什么方法可以将数据从“第一个视图控制器”传递到“发现视图控制器”？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:48:08.230

```
use it :

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"PushToProdct"]) {
        DiscoverViewController *discoverViewController   =   segue.destinationViewController;

        discoverViewController.data=@"Data you want to pass";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:12:14.393

如果可以在应用程序启动时传递数据（因为那时所有这些控制器都将被实例化，并且嵌入 segue 将被调用），那么您可以将数据传递给标签栏控制器，而该控制器将不得不传递它到你想要的那个。因此，您必须对标签栏控制器进行子类化，并像您在问题中显示的那样传递数据。然后在标签栏控制器中，您可以在 viewDidLoad 中放入类似这样的内容：

```
DiscoverViewController *dvc = [(UINavigationController *)self.viewControllers[0] topViewController];
dvc.propIWantToSet =  self.propThatGotSet; 
```

不过，您想要传递的数据似乎不太可能在启动时立即可用——如果是，那么您可以首先将其硬编码到 DiscoverViewController 中。在这种情况下，在 FirstViewController 中，您可以使用 self.childViewControllers[0] 访问标签栏控制器。一旦你有了那个引用，你就可以像我上面展示的那样获得对 DiscoverViewController 的引用。

# eclipse - eclipse不会覆盖保存位置的文件

> ID：15540123
> 
> 赞同：0
> 
> 时间：2013-03-21T05:23:32.097
> 
> 标签：eclipse, save

有一个任务到期，

尝试保存我刚刚在原始骨架文件上编码的文件，然后将它们移动到我的桌面，每次我保存全部或另存为时，然后单击是覆盖它们在我保存项目的地方，我把它们从我的电脑上拿下来，放到桌面上，它们只是骨架，没有我在里面放的任何工作，就像我们在最初的任务中得到的一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:32:58.213

这是因为你是个傻瓜，正在寻找错误的工作空间。

# javascript - 存储值生成 [object HTMLInputElement]

> ID：15540127
> 
> 赞同：0
> 
> 时间：2013-03-21T05:23:55.233
> 
> 标签：javascript, html, object, indexeddb

我有一个 indexedDB 并将其用于登录功能。我正在尝试在用户登录时使用用户信息填充表单。但是该表单使用 [object HTMLInputElement] 而不是用户信息填充。

这是我带用户（db key）访问对象（用户）的地方

[编辑这是我正在运行的站点： http](http://www3.carleton.ca/clubs/sissa/html5/admin.html) ://www3.carleton.ca/clubs/sissa/html5/admin.html 我的 站点编辑器在我保存时对其进行更新，因此当我尝试新的时站点脚本可能会发生变化事物。

这是我带用户（db key）访问对象（用户）的地方

```
function loginCheck(user,pass){    db.transaction("users").objectStore("users").get(user).onsuccess = function(event) {
    var loggedUser = event.target.result;
        if(!loggedUser){
            alert('Sorry, Username does not exist. Please try again.');
        }else if(pass !== loggedUser.pw ){
            alert('Incorrect log in combination. Please try again.');
            }else{loggedIn(loggedUser);}        
    }    
}
function loggedIn(loggedUser){
    var u=loggedUser;
    alert('Welcome '+u.fn+' '+u.ln+' to Macroplay');

    //function to populate fields 
    alert('get values called'); 
    getValues(u);

    //session store     
    var signedin = 'user';
    var username = u.userName;
    newLocal(signedin,username);
    alert('local storage set'); 
} 
```

我使用这个函数 getValues 来存储我想要的对象的各种字段。

**编辑：我将变量 test 声明为全局并存储了用户的名字 (fn)。警报显示正确的名称，但填充仍然给我未定义。**

```
 var test;
function getValues(loggedUser){
    var u = loggedUser;
    alert('storing first name');
    test = u.fn;
    alert('First name = '+test);
    lName = u.ln; 
    users = u.userName;
    pass = u.pw;
    email = u.em;
    dob = u.dob;
    tel = u.tel;
    bio = u.bio;
    school = u.scl; 
    alert('user values stored');  
    if(u.gender == 'M'){
        gender[0].checked= true ;
    }else{gender[1].checked= true ;}        
} 
```

这是我用来填充给我的表单的函数 [object HTMLInputElement]

```
function populateFields(){
    alert('Name of populated field: '+test);
    fName.value = test;
    lName.value = lName;
    users.value = users;
    pass.value = pass;
    email.value = email;
    dob.value = dob;
    tel.value = tel; 
    bio.value = bio;
    terms.disabled = true;
    school.value = school;  
    alert('populate fields done');

    save.value = 'Update';
    signin.innerHTML = 'Log Out';
    registerLabel.innerHTML = 'Account Information';

     //open user info form
    var accountInfo = document.getElementsByTagName('details');
    accountInfo[1].open = open;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:19:47.923

只看一行：

```
fName.value = fName 
```

您正在将`value`属性设置`fName`为`fName`自身。

无需创建大量全局变量，只需`loggedUser`直接使用 in `populateFields()`：

```
fName.value = loggedUser.fn; 
```

**编辑：**查看[您的网站](http://www3.carleton.ca/clubs/sissa/html5/admin.html)，我看到了您遗漏的重要部分。 页面重新加载*后被*`populateFields()`调用。因此，**无法访问在页面重新加载之前创建的任何变量**。***`populateFields()`***

 *既然我是在帮你做作业，我不想只是把答案放在银盘上。诀窍是用户数据必须从数据库中检索出来，并`populateFields()`在它被调用之前或在函数内部可用。您*可以*将用户对象作为全局变量提供，但最好将其作为参数传入。

您可能还想取消表单提交：

```
document.getElementById("loginForm").onsubmit = function (e) {
    e.preventDefault();
} 
```

然后直接调用`populateFields()`from`loggedIn()`而不是`getValues()`.*

# android - Android：使用位置管理器计算距离时出现问题

> ID：15540129
> 
> 赞同：2
> 
> 时间：2013-03-21T05:24:02.663
> 
> 标签：android, locationmanager

目前我正在开发一个应用程序，我想计算车辆行驶的距离。我的要求是在开车时，我的 Android 设备应该计算我行驶的总距离并将此信息发送到服务器。为了做到这一点，我使用了 Android 的位置管理器 API，设置了标准并使用了 getBestProvider。这样我们就可以使用 GPS 或网络来获取纬度和经度。下面是这个的代码片段：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_HIGH);
provider = locationManager.getBestProvider(criteria, false);

locationManager.requestLocationUpdates(provider,30000,5, this); 
```

onLocationChanged() 回调方法每次都提供纬度和经度。我们总是存储以前的坐标，当我们得到新的坐标时，我们使用 distanceBetween() api 找到两者之间的距离。下面是这个的代码片段：

```
public void onLocationChanged(Location location) {
                                    findLatLongDistance(location);
}

private void findLatLongDistance(Location location) {
            // TODO Auto-generated method stub
            try{
                  Date date = new Date();
                  TimeStamp2 = sdf.format(date);

                              getSavedLatLong();//get lat and long from preference
                          Location locationB = new Location("point B"); 

                          locationB.setLatitude(location.getLatitude()); 
                          locationB.setLongitude(location.getLongitude()); 

                          Location locationA = new Location("point A"); 

locationA.setLatitude(prelat_val);  //lat from pref                       locationA.setLongitude(prelong_val);  //long from pref

                          if(prelat_val>0.0 && prelong_val>0.0){
                              Toast.makeText(LocationService.this,"Location Odometer Sum "+odometer_sum, Toast.LENGTH_LONG).show();

                                  float distance2 = getDistance(prelat_val,prelong_val,location.getLatitude(),location.getLongitude());
                                  odometer_sum = odometer_sum + (distance2/1000);
                                  Toast.makeText(LocationService.this,"Lat "+prelat_val+"Long "+prelong_val+"Sum "+odometer_sum, Toast.LENGTH_LONG).show();

                          }

                        saveData(lat,lng,odometer_sum);
            }catch(Exception e){
                  e.printStackTrace();
            }
      }

public float getDistance(double d, double e, double f, double g) {

            float [] dist = new float[2];

            Location.distanceBetween(d,e,f, g, dist);
          return dist[0] ;
      } 
```

这是我们在这里面临的问题列表：

1.  它提供的位置不准确。当我们在 5 公里的距离内测试这个应用程序时，大约有 300-400 米的差异
2.  当手机长时间处于同一位置时，它总是提供不同的纬度和经度。如果您检查上面的代码片段，在 requestLocationUpdates() 中，我们设置了 30 秒的时间间隔和 5m 的距离。这里我们的想法是，如果我的移动设备移动 5m 距离并且如果它跨越 30 秒的间隔，它将提供新的纬度和经度。但真正发生的是，它每 30 秒提供一次坐标，与设备移动无关。我不知道如何解决这个问题。
3.  设备在移动时，如何获得准确的值。我需要在代码中做更多的事情吗？

我真的花了很多时间尝试各种选择。但我觉得我在这里遗漏了一些东西。请帮助我。提前致谢..

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:40:45.603

requestLocationUpdates() 中的 minTime 值为 30 秒。对于试图计算准确距离的应用程序来说，这太长了。我已经`locationManager.requestLocationUpdates(provider, 0, 5, locationListener);` 在我的代码中使用了很长时间，并且得到了准确的更新。虽然这会很快耗尽电池。因此，您必须尝试不同的值以在准确性和电池寿命之间取得平衡，并查看适合您的应用程序的值

# php - 由 url 调用时使函数未定义

> ID：15540136
> 
> 赞同：2
> 
> 时间：2013-03-21T05:24:57.337
> 
> 标签：php, codeigniter, codeigniter-2

使用 Codeigniter，我从 url 调用一个公共函数[我的控制器]，这基本上是框架的正常行为。我`$a, $b, $c`在函数执行时传递了 3 个参数，它会检查参数并根据它执行。现在，问题是我不希望从 url 调用我的函数，当它被调用时，它应该转到 404 页面。我知道这可以通过添加`private`or来实现`protected`，但真正的问题是它只能通过我自己的其他功能之一访问，而不是通过直接 url。欢迎任何解决方案。

HTTP 路由块有效。但是当我传递参数时，函数会被执行，这是一个安全问题。知道如何阻止访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:45:04.330

您可以使用路由来阻止任何到该控制器/方法的 http 流量并重定向到 404 页面。

在`routes.php`config 文件夹中的文件中，添加以下内容

```
$route['controller/private_method'] = '{your 404 controller}';
$route['controller/private_method/(:any)'] = '{404 controller}'; 
```

第二条规则适用于任意数量的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:29:32.993

你为什么不把 a 传递`hidden secret variable`给`identify`你是的`calling this function`并且它没有被调用 from `URL`。

# batch-file - xcopy 的批处理脚本

> ID：15540137
> 
> 赞同：0
> 
> 时间：2013-03-21T05:25:01.353
> 
> 标签：batch-file, cmd

我正在尝试创建一个简单的批处理脚本来将一个文件夹复制到另一个文件夹。

```
@ECHO OFF
IF %1.==. GOTO INFORM
XCOPY  %1 D:\CopyLoc /D /E /C /R /I /K /Y
ECHO Copied
GOTO EXT
:INFORM
ECHO USAGE: CUSTCP <SOURCE DIRECTORY>
:EXT 
```

我已将此文件保存在名称下`custcp.cmd`。

当我说

```
C:\>custcp 
```

我收到消息`The syntax of the command is incorrect.`但我想要的是显示`USAGE: CUSTCP <SOURCE DIRECTORY>`消息。有没有其他新颖的方法可以做到这一点？另外我想知道这个命令是否适用于映射网络驱动器中的文件夹？

PS：这是我第一次尝试创建批处理文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:29:16.557

由于`<`和`>`是重定向字符，因此批处理想知道您要将文本重定向到哪里。

直接在重定向字符之前使用插入符号 ( `^`) 来关闭它们的特殊含义，因此：

```
ECHO USAGE: CUSTCP ^<SOURCE DIRECTORY^> 
```

# ios - MPMoviePlayerViewController 不播放 MP4 流

> ID：15540140
> 
> 赞同：0
> 
> 时间：2013-03-21T05:25:12.947
> 
> 标签：ios, mpmovieplayercontroller

我不确定问题是什么，但是当我尝试播放托管在 akamai 服务器上的 MP4 视频时，`MPMoviePlayerViewController`无法播放。我添加了用于监视播放状态的通知，它可以快速从播放切换到停止。如果我打印错误，那么我会得到以下信息：

```
MPMoviePlayerPlaybackDidFinishReasonUserInfoKey = 1;
        error = "Error Domain=MediaPlayerErrorDomain Code=-11850 \"Operation Stopped\" UserInfo=0x1e5a6750 {NSLocalizedDescription=Operation Stopped}"; 
```

上面的消息对于理解实际问题可能不是很有帮助。请务必注意，我可以在 Safari 中播放相同的 URL，并且我的应用程序可以毫无问题地播放 youtube 视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:59:30.047

这个问题很简单——我传入了一个不正确的流式 URL :(。谢谢。

# model-view-controller - 关于 MVC 的领域、模型和实体之间的区别

> ID：15540147
> 
> 赞同：67
> 
> 时间：2013-03-21T05:25:50.180
> 
> 标签：model-view-controller, design-patterns, model, entity, domain-object

有人可以通过示例解释这三个概念以及它们之间在 MVC 框架方面的区别。对我来说，这些看起来几乎是等价的，而且似乎它们在某些文章中可以互换使用，而在其他文章中却没有。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-21T08:22:59.253

您感到困惑的术语是：“[域对象](http://c2.com/cgi/wiki?DomainObject)”、“域实体”和“模型对象”。虽然通常可以互换使用，但域实体和模型对象也可以是[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)模式的实例（基本上：添加了存储逻辑的域对象）。

在普通域对象中没有存储逻辑。它由[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)处理。

术语“模型对象”来自 Fowler 的书籍（有关详细信息，请阅读[PoEAA](https://rads.stackoverflow.com/amzn/click/com/0321127420)），恕我直言，它是混淆 MVC 的一部分，因为整个模型是一个应用层（MVC 由它和表示层组成），其中包含那些“模型对象”，通常由[服务](http://martinfowler.com/eaaCatalog/serviceLayer.html)处理（在该图像中，模型层是所有三个同心圆在一起）。

我更喜欢使用“域对象”术语。

当作者暗示对象是存储结构（更常见的是数据库表）的直接表示时，通常使用术语“域实体”（或“实体对象”）。这些也几乎总是活动记录的实现。

> [**PS：**在某些文章中，您还会看到术语“模型”（复数）。它通常与 MVC 设计模式没有直接关系，因为它讨论了类似 Rails 的架构，其中“模型”只是活动记录，直接暴露给控制器/由控制器创建。]

..不确定这是否让你更困惑

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-21T05:36:53.027

我同意这些条款有点模糊。我会使用*域*来指代您正在处理的业务领域。比如银行或保险之类的。然后你有域模型。这些是您在该业务领域中处理的事情，例如您拥有帐户、客户、转账等的银行*领域*。我将使用术语*实体*来引用类/POJO 或模型的持久/具体版本。

这里可能让您感到困惑的是，在术语*MVC*中，*模型*是一个具体的东西，但它引用了用于表示 Web GUI 中的某些表示的数据模型，因此不要将其与上述解释混为一谈。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-20T15:28:58.223

作为记录。实际上，域和模型是相同的，而实体也是用于存储在数据库中的域/对象。

有些人试图重新解释这些话题，但没有一个是经典。

不同之处在于，在 Java 的世界中，Domain 被更多地使用，而在 C# 的世界中，Model 被使用（MS 鼓励他使用），但它只是惯例，你可以同时使用。

同样，Java 的人使用值对象（VO）的概念，而 C# 的人使用 DTO，即使两者实际上是相同的。还有 POJO (Java) vs POCO (C#), Packages (Java) vs NameSpace (C#), Setter and Getter (Java) vs Encapsulation (C#)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-20T00:13:33.543

域和模型都是类。类的使用方式区分它是否应该分类并放入域或模型文件夹中。如果该类仅在视图中使用，请将其放在模型文件夹中。如果该类映射到数据库对象，则将其放在域文件夹中。

# php - PHP：跨重定向保留表单数据

> ID：15540151
> 
> 赞同：0
> 
> 时间：2013-03-21T05:26:12.437
> 
> 标签：php, forms, http, redirect, persist

我有一个现有的网站，上面有大量对[http://domain.com](http://domain.com)的引用。我们想在页面上强制执行 https，所以我添加了一个简单的代码片段：

```
 if($_SERVER["HTTPS"] != "on") {
        die(header("Location: https://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]));
        exit(); // to ensure the script stops here, just in case
    } 
```

这是可行的，除了许多文件在操作中都有带有 http 的自引用表单。例如，在 page.php 上可能有：

```
<form action="http://domain.com/page.php" method="post">
<input type="text" name="sample" />
<input type="submit" value="Next" />
</form> 
```

**我有什么办法可以在不破坏所有这些形式的情况下从上面强制执行这个重定向片段？** 目标是避免手动更新 100 个文件中的每一个，为“http/https”执行繁琐的查找/替换步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:33:44.720

不，您不能只是重定向，因为无论如何您都在提交不安全的内容，重定向到 https 将毫无意义，因为请求已经可见。

您应该使用相对网址。哪里`/`和刚才的域名一样

`/`=`domain.com`

`/page`=`domain.com/page`

没有前导`/`的 url 是相对于当前 uri 的（减去查询变量）：所以，从`http://domain.com/page`-

行动：`foo`=`http://domain.com/page/foo`

行动：`/foo`=`http://domain.com/foo`

http 或 https 将以这种方式保留。

另一种方法是用 2 个斜杠动作引导域：`//domain.com`虽然我认为旧 IE 版本不明白。

# c# - 如何限制情节提要在 Windows 8 商店应用程序中自动开始？

> ID：15540158
> 
> 赞同：0
> 
> 时间：2013-03-21T05:26:37.813
> 
> 标签：c#, windows-8, storyboard, winrt-xaml

我正在使用两个故事板向左和向右移动球（图像），在左键的点击事件中我想向左移动球，在右键的点击事件中，球应该向右移动。它在点击左右按钮时可以正常工作，但在加载应用程序故事板时会自动开始，并且球会在不点击按钮的情况下移动一步。如何限制情节提要自动开始？

这是我第一个将球向左移动 40 像素的故事板：

```
<EventTrigger>
<BeginStoryboard>
<Storyboard x:Name="ballstoryleft">
<DoubleAnimation  Storyboard.TargetName="balltrans" Storyboard.TargetProperty="TranslateX"
Duration="0:0:0.5" By="-40" FillBehavior="HoldEnd">
<DoubleAnimation.EasingFunction>
<ElasticEase Oscillations="0" Springiness="1" />
</DoubleAnimation.EasingFunction>
</DoubleAnimation>
</Storyboard>
</BeginStoryboard>
</EventTrigger> 
```

这是我的第二个故事板，将球向右移动 40 像素：

```
<EventTrigger>
<BeginStoryboard>
<Storyboard x:Name="ballstoryright">
<DoubleAnimation  Storyboard.TargetName="balltrans" Storyboard.TargetProperty="TranslateX"
         Duration="0:0:0.5" By="40"    FillBehavior="HoldEnd">
<DoubleAnimation.EasingFunction>
<ElasticEase Oscillations="0" Springiness="1" />
</DoubleAnimation.EasingFunction>
</DoubleAnimation>
</Storyboard>
</BeginStoryboard>
</EventTrigger> 
```

我在后面的代码中编写了这段代码：

```
private void imgleft_Tapped(object sender, TappedRoutedEventArgs e)
{
ballstoryleft.Begin();
}
private void imgright_Tapped(object sender, TappedRoutedEventArgs e)
{
ballstoryright.Begin();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:53:50.743

你把你的放在哪里了`Storyboards`？我看到他们在里面`EventTriggers`。它们可能是在应用程序加载时触发情节提要的那些。

你应该把两者都`Storyboards`放在一个`Resources`集合中：

```
<Page.Resources>
    <Storyboard x:Name="ballstoryleft">
        <DoubleAnimation Storyboard.TargetName="balltrans" Storyboard.TargetProperty="TranslateX" 
                         Duration="0:0:0.5" By="-40" FillBehavior="HoldEnd">
            <DoubleAnimation.EasingFunction>
                <ElasticEase Oscillations="0" Springiness="1" />
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>
    <Storyboard x:Name="ballstoryright">
        <DoubleAnimation Storyboard.TargetName="balltrans" Storyboard.TargetProperty="TranslateX" 
                         Duration="0:0:0.5" By="40" FillBehavior="HoldEnd">
            <DoubleAnimation.EasingFunction>
                <ElasticEase Oscillations="0" Springiness="1" />
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>
</Page.Resources> 
```

现在应该没有理由让它们自动触发，而您在点击时触发它们的代码应该仍然像现在一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:57:48.507

您也可以从后面的代码中定义整个故事板

试试这个例子：

```
void OnButtonClick(object sender, RoutedEventArgs args) 
{ 
  DoubleAnimation anima = new DoubleAnimation
   { 
     EnableDependentAnimation = true,
     To = 96, 
     Duration = new Duration(new TimeSpan(0, 0, 1)), 
     AutoReverse = true, 
     RepeatBehavior = new RepeatBehavior(3) };
     Storyboard.SetTarget(anima, sender as Button);
     Storyboard.SetTargetProperty(anima, "FontSize");
     Storyboard storyboard = new Storyboard();
     storyboard.Children.Add(anima); 
     storyboard.Begin();
  } 
```

# java - 如何在android中创建csv文件时处理换行符

> ID：15540159
> 
> 赞同：-2
> 
> 时间：2013-03-21T05:26:42.890
> 
> 标签：java, android, csv

我在 android 中创建 CSV 文件。文件已成功创建，但如果内容中有换行符，则内容格式会受到干扰。请建议如何处理换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:44:45.627

如果可以提供有关如何接收和处理数据的更多详细信息，则可以提供一个更详细的示例，说明如何将替代项适合您的方法。

* * *

您应该用 CSV 文件中更易于处理的内容替换新行字符。我建议使用 2 个字符的字符串“\n”，但您也可以将其替换为空白、破折号或完全删除该字符。

当您使用它时，您可能还想处理换行符“\r”和制表符“\t”。请务必转义反斜杠字符。

示例（伪代码）：

```
StringBuffer s = new StringBuffer();
char c;
loop-through-characters {
    if(c == '\n') {
        // Replace new-line with "\n".
        s.append("\\n");
    } else if(c == '\r') {
        // Replace line-feed with "\r".
        s.append("\\r");
    } else if(c == '\t') {
        // Replace tab with space " ".
        s.append(" ");
    } else {
        // Otherwise, append the character as-is.
        s.append(c);
    }
}

// Process the bytes[] in StringBuffer s as you would have 
// previously processed the raw bytes[]. 
```

# javascript - 使用 jquery 防止复制粘贴

> ID：15540162
> 
> 赞同：5
> 
> 时间：2013-03-21T05:26:58.783
> 
> 标签：javascript, jquery

需要防止使用 jquery 在文本框中复制粘贴。如何实施？

```
<table>
   <tr>
     <h:inputlabel value="Actual"></h:inputlabel>
      <td>
        <h:inputtext id="Actual" styleClass="input-tex" value="#bean.customer"></h:inputtext>
      <td>
   </tr>
<table> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T05:28:50.293

继续：[使用 jQuery 禁用文本框的剪切、复制和粘贴功能](http://jquerybyexample.blogspot.com/2010/12/disable-cut-copy-and-paste-function-for.html)

```
$(document).ready(function(){
  $('#Actual').bind("cut copy paste",function(e) {
      e.preventDefault();
  });
}); 
```

注意：*Opera 12.10 之前不支持剪切、复制和粘贴事件*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-06T03:16:25.027

这是用 Jquery 做的最“官方”的方式。

```
$(document).ready(function () {
    var ambit = $(document);

    // Disable Cut + Copy + Paste (input)
    ambit.on('copy paste cut', function (e) {
        e.preventDefault(); //disable cut,copy,paste
        return false;
    });
}); 
```

但是，它仅适用于某些 Opera 版本，并且据我所知不支持。允许复制输入之外的所有内容。

如果你想完全禁用`paranoic mode: on`，你可以使用这个方法：

```
$(document).ready(function () {
    var ambit = $(document);

    // Disable Cut + Copy + Paste (input)
    ambit.on('copy paste cut', function (e) {
        e.preventDefault(); //disable cut,copy,paste
        return false;
    });

    // Disable Cut + Copy + Paste and Browser Admin Tools (all document)
    ambit.keydown(function (e) {
        var forbiddenCtrlKeys = new Array('c', 'x', 'v', 'ins', 'u');
        var forbiddenShiftKeys = new Array('del', 'ins', 'f2', 'f4', 'f7');
        var forbiddenCtrlShiftKeys = new Array('k', 'i', 'm', 's', 'j');
        var keyCode = (e.keyCode) ? e.keyCode : e.which;

        var isCtrl, isShift;
        isCtrl = e.ctrlKey;
        isShift = e.ctrlShift;

        string = getKeyCodeString(keyCode);

        if (string == 'f12')
        {
            e.preventDefault();
            return false;
        }

        if (isCtrl && !isShift) {
            for (i = 0; i < forbiddenCtrlKeys.length; i++) {
                if (forbiddenCtrlKeys[i] == string) {
                    e.preventDefault();
                    return false;
                }
            }
        }

        if (!isCtrl && isShift) {
            for (i = 0; i < forbiddenShiftKeys.length; i++) {
                if (forbiddenShiftKeys[i] == string) {
                    e.preventDefault();
                    return false;
                }
            }
        }

        if (isCtrl && isShift) {
            for (i = 0; i < forbiddenCtrlShiftKeys.length; i++) {
                if (forbiddenCtrlShiftKeys[i] == string) {
                    e.preventDefault();
                    return false;
                }
            }
        }

        return true;
    });

    var getKeyCodeString = function(keyCode)
    {
        var string;
        switch (keyCode) {
            case 45:
                string = 'ins'; break;
            case 46:
                string = 'del'; break;
            case 113:
                string = 'f2'; break;
            case 115:
                string = 'f4'; break;
            case 118:
                string = 'f7'; break;
            case 123:
                string = 'f12'; break;
            default:
                string = String.fromCharCode(keyCode);
                break;
        }
        return string.toLowerCase();
    }
}); 
```

那么上下文菜单呢？

```
$(document).ready(function () {
    var ambit = $(document);

    // Disable Contextual Menu
    ambit.on('contextmenu', function (e) {
        e.preventDefault();
        return false;
    }); 
```

那么手机呢？

```
$(document).ready(function () {
    var ambit = $(document);

    // Disable Tap and Hold (jQuery Mobile)
    ambit.on('taphold', function (e) {
        e.preventDefault();
        return false;
    });
}); 
```

希望能帮助到你！欢迎更正和改进！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T10:24:30.420

由于不支持 Jquery 1.9 以后的实时事件，我们可以将“on”用于相同目的。

```
 $('#Actual').on("cut copy paste", function (e) {
      e.preventDefault();
  }); 
```

# javascript - 动态加载的 javascript 在第二次加载时不起作用

> ID：15540163
> 
> 赞同：0
> 
> 时间：2013-03-21T05:27:08.853
> 
> 标签：javascript, jquery, ajax, django, jquery-ui

我正在开发一个网页，该网页使用 JQuery UI 对话框（模式模式）来显示使用 Django 动态生成的表单。基本流程是：

*   用户点击一个按钮
*   jquery（使用 AJAX）发出一个 get 请求，该请求返回表单的 html，然后用于填充对话框
    *   html 包含一个脚本标签，用于处理表单上的一些 UI，这些 UI 可以正常加载并按预期工作
*   用户然后填写表格并单击“完成”并提交表格。

当用户在表单上出错时，问题就出现了。服务器响应 post 请求（提交表单），修改了原始表单（包括脚本）以显示错误。第二次加载脚本时，它得到一个“ **Uncaught ReferenceError: $ is not defined (anonymous function)** ” 脚本在正常工作时与以前完全相同。在整个过程中要清楚，页面永远不会刷新。

以下是处理模态的 javascript 的要点：

```
var add_container = $("#add_container");

add_container.dialog({...})

function show_form(form,response_func) {
    add_container.html(form);
    add_container.dialog("open");
    $("#add_form").submit(function (event) {
        return submit_form($(this),response_func);
    });
}

function submit_form(form,response_func) {
    add_container.append('<p>Adding...</p>');
    //this is a trick to upload a file without reloading the page
    form.attr('target','upload_target');
    $('#upload_target').load(function() {
        var response = $('#upload_target').contents().find('body').html();
        add_container.dialog("close");

        resp_obj = $(response)
        if (resp_obj.is('form')) {
            //***this is what reloads the form when there is an error
            show_form(response,response_func);
        } else {
            response_func(resp_obj);
        }

    });
}

$('#add_link').click(add_link);
function add_link() {
    $.get('/add_link', function(data) {
        function add_response(response) {
            //handle successful submission
        }
        show_form(data,add_response);
    });
}

//...more stuff that is not important 
```

这是从 /add_link 返回的 html 的要点

```
<script type="text/javascript" src="/scripts/add_form.js" ></script>
<form id="add_form" enctype="multipart/form-data" action="/add_link/" method="post">
<!-- Dynamically generated form here !-->
</form> 
```

add_form.js 是一个非常标准的使用 jQuery 的 javascript 文件。它以 $(document).ready(function () {...} ) 开头，第一个 $ 是发生 ReferenceError 的地方

表单需要根据点击的内容动态生成，所以我不能将所有内容都静态地放在页面上。该脚本不是动态生成的，因此不一定需要动态加载，但我不确定如何将其保存在自己的文件中，并且仅在加载表单时运行。我愿意接受有关实现相同效果的替代方法的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:56:47.853

您的表单操作指向与包含 jQuery 框架脚本等的路径不同的相对路径。

```
<script type="text/javascript" src="/scripts/add_form.js" ></script>
<!-- src="/scripts" -->

<form id="add_form" enctype="multipart/form-data" action="/add_link/" method="post">
<!-- action="/add_link" --> 
```

为确保它在表单提交后加载框架，只需使用浏览器上的开发人员工具之类的工具并检查 jQuery 脚本 src 的 head 标签。它还在吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:03:44.720

感谢 MelanciaUK，我意识到当我将表单提交到 iFrame 时，响应首先被发送到脚本将运行并出错的地方，因为 iFrame 被视为自己的页面并且无法访问主页面上加载的 jQuery页。

我决定通过消除 add_form 脚本的动态加载来解决这个问题，并像我的所有其他脚本一样在页面加载时简单地加载它。我创建了一个自定义 jQuery 事件（使用[.trigger](http://api.jquery.com/trigger/)），以便仅在打开添加表单时运行脚本。这正是我想要的方式。

希望这可以帮助任何有类似问题的人。如果您有任何问题随时问！

# php - 将 joomla SEF 翻译模块或组件添加到 php、html 网站

> ID：15540168
> 
> 赞同：0
> 
> 时间：2013-03-21T05:27:48.567
> 
> 标签：php, html, joomla-component, joomla-module, language-translation

我想将 Joomla SEF 翻译模块或组件添加到我的 php、html 网站页面。我如何包含这个模块以及如何运行它。请告诉任何人

谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T15:48:25.197

要在 Joomla 中安装组件，请转到管理界面（后端）并打开扩展管理器（在扩展菜单下）。在 Extension Manager 中，默认页面应该是 Installation Manager。使用上传、从目录安装或从 URL 方法安装组件。

如果安装正确，您应该会看到现在列在“组件”菜单下的 SEF 组件。根据需要进行配置（可以在组件提供商的网站上找到说明。

然后打开模块管理器（在扩展菜单下）并创建一个新模块（如果它不存在）。从列表中选择 SEF，创建标题，填写所有公共信息等，并在“菜单分配”选项卡下指定正确的值。保存并关闭它。

您的 SEF 模块现在应该在您的网站上（以及您在菜单​​分配下指定的页面上）可见。

要自定义 SEF 模块，请参阅 SEF 翻译网站。

# perl - 将命令行参数传递给应用程序

> ID：15540175
> 
> 赞同：1
> 
> 时间：2013-03-21T05:28:28.440
> 
> 标签：perl, command

我想从 Perl 脚本执行应用程序。

Perl 脚本以变量作为参数调用应用程序，该变量的值是一个包含大量空格的长字符串。

应用程序将这些解释为单独的字符串，但我希望将它们全部作为一个字符串。

这是 Perl 脚本中的代码：

```
$command = "Hello world here i come. Hope this works" 
```

当 Perl 脚本尝试调用应用程序时

```
./a.out $command 
```

在我尝试访问的应用程序中`argv[1]`，我只得到了字符串`Hello`。`argv[2]`包含`world`但我想`argv[1]`包含`$command`. 我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:01:21.013

使用多参数形式的 exec

```
exec "./a.out", $command 
```

这样shell就不会参与进来

# php - 具有条件值枚举的 CActiveDataProvider

> ID：15540182
> 
> 赞同：0
> 
> 时间：2013-03-21T05:28:52.980
> 
> 标签：php, yii

我有带有枚举（'0'，'1'）的数据库字段用户类型，默认为1 当使用带有条件值枚举的CActiveDataProvider（）时，它会产生反向行。$dataProvider = new CActiveDataProvider('ClubMember',array('criteria'=>array('condition'=>'usertype=1', ), ));

这将产生除usertype=1 之外的所有行，即产生所有usertype=0 的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:50:52.347

尝试使用这个

```
$dataProvider = new CActiveDataProvider('ClubMember', array( 
    'criteria'=>  array(
       'condition'=>'usertype = "1"'
 ))); 
```

这意味着您应该在 ENUM 中使用字符串作为值，而不是 int

# jquery - jQuery UI 可排序更新数据库

> ID：15540188
> 
> 赞同：0
> 
> 时间：2013-03-21T05:29:25.890
> 
> 标签：jquery, mysql, ajax, jquery-ui, jquery-ui-sortable

嘿，我正在为我正在构建的网站开发 CMS，在 CMS 中，我的所有字段都包含数据，并且我正在使用 jQuery UI Sortable，因此我可以对它们进行排序，我想知道的是什么删除元素时更新数据库中订单字段的最佳方法？我会使用 Ajax 吗？如果是这样，我应该搜索什么来执行此功能（我从未使用过 Ajax）。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:31:22.863

Ajax 是一个很好的替代方案。

jQuery 内置了对 Ajax 的支持。我将从[API Docs](http://api.jquery.com/jQuery.ajax/)中的简单示例开始，然后从那里开始工作。

您可以使用`change`Sortable 的事件来知道何时需要再次保存排序顺序：

[http://api.jqueryui.com/sortable/#event-change](http://api.jqueryui.com/sortable/#event-change)

# c# - 动态div创建asp.net

> ID：15540189
> 
> 赞同：5
> 
> 时间：2013-03-21T05:29:30.537
> 
> 标签：c#, javascript, asp.net

我试图在按下按钮时动态创建 Div。

为此我参考了这个链接>> [http://forums.asp.net/t/1349244.aspx](http://forums.asp.net/t/1349244.aspx)

并在服务器端（.cs页面）编写代码如下>>

```
public static int i = 0;
    protected void Button1_Click(object sender, EventArgs e)
    {
        i++;
        HtmlGenericControl newControl = new HtmlGenericControl("div");

        newControl.ID = "NEWControl"+i;
        newControl.InnerHtml = "This is a dynamically created HTML server control.";

        PlaceHolder1.Controls.Add(newControl);
    } 
```

每次按下按钮时，这段代码只给了我一个 div。我想添加 div。

在客户端使用 javascript 我也试过>>

```
<body>
    <form id="form1" runat="server">
    <div>

        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" OnClientClick="addDiv();" />

    </div>
    <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
    </form>
</body>
</html>
<script type="text/javascript">
    function addDiv() {
        alert("Control comming in function");
        var r = document.createElement('Div');
        r.style.height = "20px";
        r.style.width = "25px";
        r.appendChild("div");
        alert("Control going out of function");
    }
</script> 
```

这两个都不起作用。

我犯了什么错误？

有什么不对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:11:06.520

用这个

```
 public int Index
    {
       get
       {
          if(ViewState["Index"]==null)
          {
             ViewState["Index"]=0;
          }
          else
          {
             ViewState["Index"]=int.Parse(ViewState["Index"].ToString())+1;
          }

          return int.Parse(ViewState["Index"].ToString());    
       }
   }

    protected void Button1_Click(object sender, EventArgs e)
    {
        HtmlGenericControl newControl = new HtmlGenericControl("div");
        newControl.ID = "NEWControl"+Index;
        newControl.InnerHtml = "This is a dynamically created HTML server control.";

        PlaceHolder1.Controls.Add(newControl);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:43:38.403

它给你一个 div，因为你正在添加一个 div。
请记住，asp.net 之后需要您在非常 PostBack 上创建所有动态添加的控件。

如果您想要两个控件，则必须将两个添加到 PlaceHolder。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:38:29.730

只需使用一个带有一些 ID 的父 div（比如预定义`id="dvDynamic"`）和`runat="server"`

然后使用它`dvDynamic.innerHTML = "<div> /* dynamic div contents */ </div>"`

它是最简单的方法，就像您在 ASP.net 中使用 html 元素一样，使用 dom 控件来更好地生成。控件的动态创建将需要处理、接口和许多与该控件协调的东西。因为它不是由系统预定义的。你必须创建它。

所以选择 DOM 元素选项。那更快更好:)

我希望这个能帮上忙 ：）

# java - 是什么让文件进入文件夹？

> ID：15540191
> 
> 赞同：0
> 
> 时间：2013-03-21T05:29:40.027
> 
> 标签：java, file, filesystems, directory

文件和文件夹之间的（文件系统特定的）区别是什么？

为什么需要不同的方法`java.nio.file.Files`来创建一个或另一个？`createDirectory(..)`和`createFile(..)`。两者都`Path`用作文件系统对象的句柄/标识符。

在创建一个或另一个失败案例时，我是否应该考虑一些特别的事情（除了使用不同的方法来创建一个或另一个）？

对于文件或文件夹的创建，如果已经存在同名的文件或文件夹，则属于失败情况。如果它将是一个 r/w 文件或文件夹，在文件夹情况下可写意味着可以在其中创建文件，而在文件情况下意味着向其写入字节 - 如何检查有区别吗？

如果实际上失败案例没有区别，我想抽象出一个习惯`FileSystemObject`并将它们一视同仁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:49:08.040

好问题。

在最常见的操作系统（Windows、Linux 等）中，文件夹可以包含东西。那些东西是有名字的。每个事物都可以是文件或目录。

因此，您可能有一些包含以下内容的文件夹：

```
 a
  b
d c
d d 
```

`a`并且`b`是文件。`c`并且`d`是文件夹。`a`并且`b`只能包含二进制数据。但是`c`并且`d`可以包含其他文件/文件夹。

例如`c`可能看起来像这样：

```
 afile
  anotherfile
d morestuff
d stuff 
```

这使您可以根据需要创建尽可能深的层次结构，并根据需要进行结构化。[这是递归](https://en.wikipedia.org/wiki/Recursion_%28computer_science%29)数据结构的一个非常基本的例子。选择是创建文件还是文件夹很有用，因为文件和文件夹是不同类型的事物。文件系统可以包含同时也是文件夹的文件，但我从未见过这样的文件系统。例如，在 Windows/Linux 中，如果您创建文件，则不能将其用作文件夹，您只能更改文件的内容（这只是任意二进制数据）。

# python - Python - 如何通知线程已完成另一个类？

> ID：15540194
> 
> 赞同：1
> 
> 时间：2013-03-21T05:29:59.637
> 
> 标签：python, multithreading, pygtk

我正在使用线程进行定时计数（并在 PyGTK 窗口中刷新内容）。它在一个可以改变其范围的循环内。在每次迭代结束时，计数器增加并打印数据。我想要做的是在每个滴答声结束时在另一个类中接收一个爆炸及其数据。

可能解决方案与套接字有关，但到目前为止我试图避免这种情况，那么实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T05:40:18.410

在线程之间传递对象的最常见解决方案是使用[Queue](http://docs.python.org/2/library/queue.html)模块：

```
import threading
import Queue
import time

def Worker(queue, n):
    for i in range(n):
        time.sleep(i / 10.0)
        queue.put([i] * i)

q = Queue.Queue()
thread = threading.Thread(target=Worker, args=(q, 10))
thread.start()

results = 10
while results > 0:
    print q.get()
    results -= 1 
```

为了获得更好的答案，您需要发布更多细节。

# ios - NSNotification 警报正文问题

> ID：15540199
> 
> 赞同：0
> 
> 时间：2013-03-21T05:30:45.350
> 
> 标签：ios

我想在通知正文中打印，比如今天是简的生日

为此我使用如下逻辑

```
notification.alertBody = [NSString stringWithFormat:@"Today is %@'s Birthday",  [_combinedNameArray objectAtIndex:i]]; 
```

但在通知中它只显示名字是简而不显示今天是生日

请告诉我我做错了什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:34:52.447

尝试：

```
notification.alertBody = [NSString stringWithFormat:@"Today is %@\'s Birthday",  [_combinedNameArray objectAtIndex:i]]; 
```

(' 字符需要转义字符)

# asp.net-mvc-3 - 必需的验证错误消息未以 jquery 弹出模式形式显示

> ID：15540201
> 
> 赞同：0
> 
> 时间：2013-03-21T05:30:58.877
> 
> 标签：asp.net-mvc-3, validation, jquery-post

我已将`ComponentModel.DataAnnotations`[Required] 属性用于验证消息。该消息未显示在我的表单中。但是，正则表达式验证和范围验证工作正常。

在我的一个领域中，我同时使用了 [Required] 和 [RegualarExpression]。当我在文本框中输入错误时，会出现 RegualarExpression 验证消息，在删除输入后，只有必需的验证消息。否则，不会出现必需的验证消息。

这是我的代码：

--模型类

```
 public class Email
    {
    [Required(ErrorMessage = "Email Address is required!")]
    [RegularExpression("^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]            {1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$", ErrorMessage = "Invalid Email Address.")]
    public virtual string EmailAddress { get; set; }

    [Required(AllowEmptyStrings = false, ErrorMessage = "First Name is Required")]
    public virtual string FirstName { get; set; }

    public virtual string MiddleName { get; set; }
    [Required(ErrorMessage = "Last Name is required!")]
    public virtual string LastName { get; set; }

    public virtual string Status { get; set; }
    } 
```

- 看法

```
 @{Html.EnableClientValidation();}

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">        </script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"     type="text/javascript"></script>
    @using (Html.BeginForm("CreateEmail", "LeaderBoard", FormMethod.Post, new { enctype =   "multipart/form-data", id = "create-email-dialog" }))
    {
    @Html.ValidationSummary(true)
    {
    <form>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="popTable">
    <tr>
        <td width="38%">
            First Name:
        </td>
        <td width="62%">
            <div class="editor-field">
                @Html.EditorFor(model => model.FirstName)
                @Html.ValidationMessageFor(model => model.FirstName)
            </div>
        </td>
    </tr>
    <tr>
        <td width="38%">
            Middle Name:
        </td>
        <td width="62%">
            <div class="editor-field">
                @Html.EditorFor(model => model.MiddleName)
                @Html.ValidationMessageFor(model => model.MiddleName)
            </div>
        </td>
    </tr>
    <tr>
        <td width="38%">
           Last Name:
        </td>
        <td width="62%">
            <div class="editor-field">
                @Html.EditorFor(model => model.LastName)
                @Html.ValidationMessageFor(model => model.LastName)
            </div>
        </td>
    </tr>
    <tr>
        <td width="38%">
            Email Address:
        </td>
        <td width="62%">
            <div class="errorMessage">
                @Html.EditorFor(model => model.EmailAddress)
                @Html.ValidationMessageFor(model => model.EmailAddress)
            </div>
        </td>
    </tr>
     <tr>
        <td width="38%">
             Status:
        </td>
        <td width="62%">
            <div class="editor-field">
                @Html.DropDownList("Status", ViewData["Status"] as SelectList)
            </div>
        </td>
    </tr>
    </table>    
    <input type="button" id="btnCreateEmail" value="Save" name="submit" class="btn" />
    <input type="button" value="Cancel" name="cancel" class="closeDialog" />
    </form>

    }
    } 
```

- 控制器

```
 [HttpGet]
    public ActionResult CreateEmail()
    {
        if (Request.IsAjaxRequest())
        {
                var list = new SelectList(new[]
                {
                    new{Id = "Active", Name = "Active"},
                    new{Id = "Inactive", Name = "Inactive"}
                },
                "Id", "Name", 1);

            ViewData["Status"] = list;
            return PartialView("_CreateEmail");
        }
        return RedirectToAction("Index");
    }

    [HttpPost]
    public ActionResult CreateEmail(Email model)
    {
        using (_emailRepository)
        {
            if (ModelState.IsValid)
            {
                _emailRepository.Create(model);
                return Json(new { success = true });
            }
            return RedirectToAction("Index");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:15:08.703

在文档就绪函数中验证这些字段

```
 $( document ).ready( function ( e )
        {

$( "form" ).validate().element( "#FirstName" );

$( "form" ).validate().element( "#LastName" );
}); 
```

# asp.net - 使用更新查询时“，”附近的语法不正确

> ID：15540210
> 
> 赞同：0
> 
> 时间：2013-03-21T05:31:44.630
> 
> 标签：asp.net

以下是我的代码。我在我的网站中使用了类。但是我收到错误，因为“',' 附近的语法不正确”......谁能告诉我代码中有什么问题..

```
protected void btnadd_Click(object sender, EventArgs e)
    {
        s1 = "Update tckt_tbl Set class='" + ddlclass.Text + "',dist=" + lbldist.Text + ",no_of_adults=" + ddladults.Text + ",no_of_senior=" + ddlsenior.Text + ",n1='" + txtn1.Text + "',";
        s1 += "n2='" + txtn2.Text + "',n3='" + txtn3.Text + "',n4='" + txtn4.Text + "',n5='" + txtn5.Text + "',n6='" + txtn6.Text + "',";
        s1 += "ag1=" + txtag1.Text + ",ag2=" + txtag2.Text + ",ag3=" + txtag3.Text + ",ag4=" + txtag4.Text + ",ag5=" + txtag5.Text + ",ag6=" + txtag6.Text + ",";
        s1 += "gen1='" + txtgen1.Text + "',gen2='" + txtgen2.Text + "',gen3='" + txtgen3.Text + "',gen4='" + txtgen4.Text + "',gen5='" + txtgen5.Text + "',gen6='" + txtgen6.Text + "',";
        s1 += "cn1='" + txtchn1.Text + "',cn2='" + txtchn2.Text + "',cag1=" + txtcag1.Text + ",cag2=" + txtcag2.Text + ",cgen1='" + txtcgen1.Text + "',cgen2='" + txtcgen2.Text + "' Where userid=" + Session["suser"].ToString() + "";
        con.ExecQuery(s1);
        Response.Redirect("tcktbook_itckt.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:36:59.767

第三行有问题。

```
s1 += "ag1=" + txtag1.Text + ",ag2=" + txtag2.Text + ",ag3=" + txtag3.Text + ",ag4=" + txtag4.Text + ",ag5=" + txtag5.Text + ",ag6=" + txtag6.Text + ","; 
```

我认为这里没有正确给出逗号和分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:06:39.950

我建议您使用参数查询，而不是连接所有内容。但在那之前，你确定你已经付出了所有的价值吗？因为如果您没有为数字字段提供任何值，它应该会显示错误，因为查询变为：

```
..cag1=,cag2.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:35:55.457

首先，[从用户输入](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)构建查询是一个*[非常糟糕的主意](http://xkcd.com/327/)*。我建议您改用[参数化查询](http://blog.divergencehosting.com/2009/04/09/using-parameters-parameterized-queries-database-interactions-cshar-vbnet/)。

尝试输出`s1`以查看查询的样子。

很有可能您的报价不平衡。

# javascript - 根据另一个数组的顺序对数组进行排序

> ID：15540211
> 
> 赞同：6
> 
> 时间：2013-03-21T05:31:47.397
> 
> 标签：javascript, sorting

我有一个大小如下的数组：

```
var arr = [
  'small',
  'small',
  'small',
  'small',
  ...
  'medium',
  'medium',
  'medium',
  'medium',
  ...
  'big',
  'big',
  ...
]; 
```

我需要按照这个顺序重新组织这个数组：

```
var order = ['small', 'small', 'medium', 'medium', 'big']; 
```

所以结果最终是这样的：

```
var arr = [
  'small',
  'small',
  'medium',
  'medium',
  'big',

  'small',
  'small',
  'medium',
  'medium',
  'big'

  ...
]; 
```

我知道 SO 中的其他类似问题，但到目前为止我找不到任何东西。我不确定如何处理这个问题。我在想`sort`应该怎么做，但我要测试什么？这似乎很简单，但我被卡住了，不知道从哪里开始。有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T05:42:05.263

只需为您的排序方法定义一个记分器。这是你的代码。尝试一下

```
var init_arr = ['small', 'big', 'big', 'medium'];

var scorer = {
   small: 0,
   medium: 1,
   big: 2
}

// You can use the same array too. I am creating new one.
var final_arr = init_arr.sort(function(a,b) {
   return scorer[a]-scorer[b];
});

alert(final_arr); //small, medium, big, big 
```

[工作小提琴](http://jsfiddle.net/blunderboy/XbWFd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:14:12.350

此答案仅适用于您描述的确切情况，即数组的长度是 5 的偶数倍，并且值按小、中和大分类，每个小和中的数量是大的两倍。

它可能适用于任何排序的值数组 where `length % 5 == 0`，但结果可能不是你想要的：

```
function reOrder(array) {
  var result = [];
  var f = array.length/5; // this must be an integer
  var t;

  for (var i=0; i<f; i++) {
    t = i*2;
    result.push.call(result, array.slice(t, t+2));
    t = f*2 + i*2;
    result.push.call(result, array.slice(t, t+2));
    t = f*4 + i;
    result.push.call(result, array.slice(t, t+1));
  }
  return result; 
} 

var a = ['s','s','s','s','s','s','m','m','m','m','m','m','b','b','b'];
alert(reOrder(a)); // s,s,m,m,b,s,s,m,m,b,s,s,m,m,b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:14:59.813

好吧，我终于得到了这个可行的解决方案：

```
function orderBy(arr, order) {
  var result = [],
      i = 0, len = arr.length,
      index;

  while (result.length < len) {
    index = arr.indexOf(order[i]);
    result.push(arr[index]);
    arr.splice(index, 1);
    i = i >= order.length-1 ? 0 : ++i;
  }

  return result;
} 
```

它修改了原始数组，但没关系。

演示：http: [//jsbin.com/umizat/1/edit](http://jsbin.com/umizat/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:50:45.457

为什么不创建 3 个数组并根据大小拆分数据，然后您可以按给定顺序检索数据。

像;

```
SMALL[];
MEDIUM[];
BIG[];

for(i,j,k : upto array lengths : i++,j++,k++){

   nwArray.add(SMALL[i]);
   nwArray.add(SMALL[++i]);
   nwArray.add(MEDIUM[j]);
   nwArray.add(MEDIUM[++j]);
   nwArray.add(BIG[k]);

}

return newArray; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T05:57:09.433

我的方法是遍历 order 数组并拉出元素，直到数组为空或没有所需的元素。

```
var sorted = [];
var arr = [
  'small',
  'small',
  'small',
  'small',
  ...
  'medium',
  'medium',
  'medium',
  'medium',
  ...
  'big',
  'big',
  ...
];
var order = ['small', 'small', 'medium', 'medium', 'big'];

out:
while (true) {
  for (var i = 0; i < order.length; i++) {
    var index = arr.indexOf(order[i]);
    if ((index === -1) or (arr.length === 0)) {
      break out;
    } else {
      var elem = arr.splice(index, 1);
      sorted.append(elem[0]);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T09:36:32.603

我知道这个问题很老，并且您有一个您当前正在使用的答案，但我想提供这个示例和[JSFiddle](http://jsfiddle.net/jlawrence/NjJDZ/)以获得一个解决方案，该解决方案适用于您可能要进行的任何类型的修改。

**请注意**，原始数组中剩余的任何内容都会添加到新数组的末尾，并且不会被排除在外。如果数组中没有足够的项目来满足 的要求`order`，则从订单中跳过缺失的元素。

现在，到函数：

```
function mySort(arr, order) {
    var newAr = [];
    var orIndex = 0;
    while(arr.length != 0) {
        var type = order[orIndex];
        var ind = arr.indexOf(type);
        if(ind != -1) {
            newAr.push(type);
            arr.splice(ind, 1);
        }
        orIndex++;
        if(orIndex >= order.length) {
            orIndex = 0;
        }
    }
    return newAr;
} 
```

这是做什么的，它需要您的示例数组：

```
var arrTest = [
  'small',
  'small',
  'small',
  'small',
  'small',
  'small',
  'small',
  'small',
  'medium',
  'medium',
  'medium',
  'medium',
  'medium',
  'medium',
  'medium',
  'medium',
  'big',
  'big',
  'big',
  'big',
];
var orderTest = ['small', 'small', 'medium', 'medium', 'big']; 
```

现在，您可以随心所欲地更改这些，但它会对它们进行文本搜索，因此如果您想要对其进行排序，请确保它在完整数组和顺序数组中都相同。现在，要使用该功能，您可以：

```
var sortedArray = mySort(arrTest, orderTest); 
```

或者，对于我在小提琴中的演示方式：

```
alert(mySort(arrTest, orderTest).join('\n')); 
```

这应该适用于涉及两者的任何情况，并且可以轻松修改顺序。

希望有帮助！

# ruby - 拆分数组并获取所需的元素

> ID：15540213
> 
> 赞同：-9
> 
> 时间：2013-03-21T05:31:51.977
> 
> 标签：ruby

如果我有这个数组：

`["1","2","3,a","4,b"]`

我怎样才能从中得到这个数组？

```
["1","2","3","4"]. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T06:01:26.633

假设你有所有整数，（如果没有，我猜你明白了:)）

```
["1","2","3,a","4,b"].collect {|i| i.to_i} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:34:01.620

使用如下数组：

```
ary = ["1","2","3,a","4,b"] 
```

我会使用：

```
ary.map{ |s| s[/\A(\d+)/, 1] } 
```

结果是：

```
[
    [0] "1",
    [1] “2”，
    [2] “3”，
    [3] “4”
]

```

它只是在字符串的开头找到数字并将它们返回到一个新数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:39:46.953

尝试：

```
["1","2","3,a","4,b"].map(&:to_i)
=> [1, 2, 3, 4] 
```

获取字符串数组

```
["1","2","3,a","4,b"].map(&:to_i).map(&:to_s)
=> ["1", "2", "3", "4"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:59:17.910

这也应该有效......

```
array=["1","2","3,a","4,b"]
  for i in 0..array.length()-1
    if array[i].include?(",")
      ab=array[i].split(",")
      array[i]=ab[0]
    end

  end
print array #["1","2","3","4"] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-21T05:53:15.950

试试这个删除选项：

```
irb(main):014:0> a = ["101","2zd","3,a","10,ab"]
=> ["101", "2zd", "3,a", "10,ab"]
irb(main):015:0> count = a.count
irb(main):016:0> for i in 0..count 
irb(main):017:1> puts a[i].delete("^0-9")
irb(main):018:1> end
101
2
3
10 
```

**更新的代码**（每个循环的使用 - 感谢 Tin Man）

```
irb(main):005:0>  a = ["101","2zd","3,a","10,ab"]
=> ["101", "2zd", "3,a", "10,ab"]
irb(main):006:0> b = []
=> []
irb(main):007:0> a.each do |t|
irb(main):008:1* b << t.delete("^0-9")
irb(main):009:1> end
=> ["101", "2zd", "3,a", "10,ab"]
irb(main):010:0> puts b
101
2
3
10
=> nil 
```

# git - 有没有类似 .gitonlytrackfiles 的东西？

> ID：15540215
> 
> 赞同：0
> 
> 时间：2013-03-21T05:32:04.810
> 
> 标签：git

你好，有没有类似`.gitignore`但相反的东西？

问题是我总是添加文件`git add file1.png` `git add file2.php`，等等。

类似的东西`.gittrack`会有很大帮助

```
file1.png
file2.php
folder/etc.etc 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T05:52:59.310

您可以通过创建一个`.gitignore`默认情况下忽略所有文件（使用通配符`*`）但包含您想要跟踪的路径的例外（使用例外`!`字符）的文件来做到这一点。例如，`.gitignore`您可能有：

```
*
!file1.png
!file2.png
!folder/etc.etc 
```

# android - 谷歌地图相机位置在多个标记上

> ID：15540220
> 
> 赞同：3
> 
> 时间：2013-03-21T05:32:23.787
> 
> 标签：android, google-maps

我正在使用 google map API 2 并在其上显示多个标记。我的问题是我希望我的相机定位在我所有的标记上。我已经为单个标记完成了它

```
 myMap.moveCamera(CameraUpdateFactory.newLatLngZoom(MyLocation, 22)); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T05:50:03.997

我已经使用了下面的方式来查看视图中的所有标记。它将绑定您的 Mapview，包括您在数组列表中拥有的所有经纬度位置。

```
 // Pan to see all markers in view.
 // Cannot zoom to bounds until the map has a size.
    final View mapView = getSupportFragmentManager().findFragmentById(R.id.map).getView();
    if (mapView.getViewTreeObserver().isAlive()) {
        mapView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @SuppressLint("NewApi")
            @Override
            public void onGlobalLayout() {
                LatLngBounds.Builder bld = new LatLngBounds.Builder();
    for (int i = 0; i < YOUR_ARRAYLIST.size(); i++) {           
            LatLng ll = new LatLng(YOUR_ARRAYLIST.get(i).getPos().getLat(), YOUR_ARRAYLIST.get(i).getPos().getLon());
            bld.include(ll);            
    }
    LatLngBounds bounds = bld.build();          
    mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 70));
                mapView.getViewTreeObserver().removeGlobalOnLayoutListener(this);

            }
        });
    } 
```

希望它会有所帮助。

# attachment - 发送带有 doc 文件附件的邮件

> ID：15540222
> 
> 赞同：1
> 
> 时间：2013-03-21T05:32:30.543
> 
> 标签：attachment, php

我正在发送带有 doc 文件附件的电子邮件。我正在收到邮件，但没有任何附件。

**PHP**

```
$file_resume = '';
if (!empty($_FILES['attachment_file_name']['tmp_name'])) {
$file = $_FILES['attachment_file_name']['name'];
$attachment= file_get_contents($file);
$attachment= chunk_split(base64_encode($attachment));

}

$uid = md5(uniqid(time()));

$headers= "From: no-reply@edu.in"."\r\n";
$headers.= "Reply-To: no-reply@edu.in"."\r\n";
$headers.= "X-Mailer: PHP/" . phpversion()."\r\n Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$uid."\"\r\n";
$headers.= "MIME-Version: 1.0" . "\r\n";
$headers.= "Content-type: text/html; charset=utf-8"."\r\n Content-Disposition: attachment; filename=\"".$attachment."\"\r\n";

$message = $_POST['person_name'];

mail($to,$subject,$message,$headers); 
```

**html**

```
 <form id="attachment" action='mailer.php' method='POST' name="attachment" enctype="multipart/form-data">

    person name: <input type="text" name="person_name" >
<br />
   Attachment : <input id="attachment_file" class="field" style="height: 25px;" type="file" name="attachment_file_name" />

    <input id="submit_button"  type="submit" value="Send" />
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:45:09.837

您需要将附件添加到电子邮件正文中。尝试这样的事情：

```
$random_hash = md5(time());

$headers .= "\r\nContent-Type: multipart/alternative; boundary=\"PHP-alt-".$random_hash."\"";

$headers .= "\r\nMIME-Version 1.0";

$attachment = chunk_split(base64_encode(file_get_contents($filename)));

$message = 
"--PHP-alt-$random_hash
Content-Type: text/plain

Dear Same,

We would like to thank you for your registration to be held on Saturday August 25, 2012 at the....

--PHP-alt-$random_hash
Content-Type: application/pdf; name=$filename
Content-Transfer-Encoding: base64
Content-Disposition: attachment

$attachment
--PHP-alt-$random_hash--";

@mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:54:03.323

如果您要尝试手动发送带有附件的电子邮件，您需要了解底层邮件文本数据包，该数据包实际上代表您使用`mail()`参数构建的内容。除非您*理解*并*理解*这里发生了什么，否则您将很难收到带有附件的电子邮件以发送。锋利的边缘太多了。

Gmail 有一个非常棒的电子邮件功能，可以以纯文本形式查看*原始消息包*。它被称为**Show Original**。在测试您的电子邮件脚本时，如果可以，请使用 Gmail 帐户，以便检查实际的电子邮件明文数据包。要显示原始内容，请转到由电子邮件回复箭头旁边的向下箭头触发的顶部左侧下拉菜单。

因此，向自己发送一封附有图片的测试电子邮件，我们有以下内容。本质上，您的邮件呼叫必须转换为或多或少类似于此示例的内容。

特别注意标题是如何开始的（下面的前五个标题你不会处理，除了可能`MIME-Version`）。在该块的末尾，您有：

```
Content-Type: multipart/mixed; boundary=089e0118416874703004d86a5106 
```

后面的部分`=`是*消息部分边界*，它允许您添加多部分消息块，包括已编码的*附件文件内容并提供适当的子部分标头。*

所以有：

```
--089e0118416874703004d86a5106

... message block(s) ...

--089e0118416874703004d86a5106-- 
```

实际上声明了另一个边界，其中：

```
Content-Type: multipart/alternative; boundary=089e0118416874702b04d86a5104 
```

其中涉及到`text/plain`和`text/html`双重消息格式。这不是必需的，但许多邮件客户端天生就是这样做的。您可以选择`text/plain`或`text/html`，这取决于您和您的评论的格式。

接下来我们看到：

```
--089e0118416874703004d86a5106
Content-Type: image/jpeg; name="opinion (2).jpg"
Content-Disposition: attachment; filename="opinion (2).jpg"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_hejlmnuz0

/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAIEBAYIBggICAgICAgICAgKCgoKCgoKCgoKCgoKCgoK
... lots of lines for the encoded file block ...
W5R3W8ajLwrgUJEDGKWN2kWvO5iB7qdKwB6MwwfqVrQKcObveZxZBtQNCp0vc//Z
--089e0118416874703004d86a5106-- 
```

请注意，边界`--`在其块（不是每个块）的*末尾都有一个尾随。*

看看下面，并将其与 luk3thomas 在他的答案中的代码进行比较。尝试向自己发送一封非常简单的电子邮件，并将其与附件格式的电子邮件进行比较：

```
mail('your@email.com', 'Simple mail test', 'Test message body content.');` 
```

您应该开始了解发送包含附件的电子邮件需要什么。问题是，格式化发送的电子邮件数据包非常特殊，很少有事情会导致它失败。所以你必须注意。

```
MIME-Version: 1.0
Received: by 10.50.40.164 with HTTP; Thu, 21 Mar 2013 00:30:51 -0700 (PDT)
Date: Thu, 21 Mar 2013 02:30:51 -0500
Delivered-To: [redacted]@gmail.com
Message-ID: <CAKJE7RAH3+ZgN+86xykJrrzVaHK3waPD-a-OXbSDe3FGgcQrMw@mail.gmail.com>
Subject: Test of email with attachment for plaintext
From: Jared Farrish <[redacted]@gmail.com>
To: Jared Farrish <[redacted]@gmail.com>
Content-Type: multipart/mixed; boundary=089e0118416874703004d86a5106

--089e0118416874703004d86a5106
Content-Type: multipart/alternative; boundary=089e0118416874702b04d86a5104

--089e0118416874702b04d86a5104
Content-Type: text/plain; charset=UTF-8

This is the body of the email message.

--089e0118416874702b04d86a5104
Content-Type: text/html; charset=UTF-8

<div dir="ltr">This is the body of the email message.<br></div>

--089e0118416874702b04d86a5104--
--089e0118416874703004d86a5106
Content-Type: image/jpeg; name="opinion (2).jpg"
Content-Disposition: attachment; filename="opinion (2).jpg"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_hejlmnuz0

/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAIEBAYIBggICAgICAgICAgKCgoKCgoKCgoKCgoKCgoK
CgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/2wBDAQIICBAQEBAQEBAgICAgIEBAQEBA
QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQED/wgARCAEsASwDASIA
AhEBAxEB/8QAHQAAAgIDAQEBAAAAAAAAAAAABgcFCAIDBAkAAf/EABsBAAMBAQEBAQAAAAAAAAAA
[-- snip many lines of base64 file contents --]
yGrjmAV5jlw7j5RFebDQu8RG2rLa/up9x/xHOU5eppGo7lm3uDTz6w5XxBYgB7ruYJFwW/2PiD9q
XjDEturp55IeLGM36+Tlz8JY6v8AXGhta9/4Ih62UvuWHuP3DfOg/wAGFg/g0mNKnahdifSKKua+
h0likOlp+yFa2FgP0rtOReVitRTIiUuJSjw6JpN4thVyhRdZ8EE/aYzn523NZeJYu7judhllHo0g
W5R3W8ajLwrgUJEDGKWN2kWvO5iB7qdKwB6MwwfqVrQKcObveZxZBtQNCp0vc//Z
--089e0118416874703004d86a5106-- 
```

# windows - 适用于 Windows 的 Emacs 24.3，Tramp 字节码：找不到合适的“ls”命令

> ID：15540223
> 
> 赞同：18
> 
> 时间：2013-03-21T05:32:33.410
> 
> 标签：windows, emacs, tramp

24.2 运行良好，但 24.3 bounded tramp 在打开远程 Linux 系统文件或目录时出现以下错误：

```
"byte-code: Couldn't find a proper `ls' command" 
```

我打开tramp trace，发现所有远程搜索路径和文件路径都扩展了一些东西，在开头添加了一个额外的“c：”。结果是tramp找不到我想打开的命令和文件。

```
16:04:51.768000 tramp-get-connection-property (7) # process-buffer nil
16:04:51.769000 tramp-set-file-property (8) # c:/bin file-directory-p nil 
16:04:51.770000 tramp-get-file-property (8) # c:/usr/bin file-directory-p undef 
... 
16:04:59.531000 tramp-sh-handle-file-truename (5) # Check /c: 
16:04:59.532000 tramp-get-file-property (8) # c:/c: file-attributes-integer undef 
... 
16:04:51.773000 tramp-get-connection-property (7) # process-name nil 
16:04:51.773000 tramp-get-connection-property (7) # chunksize 0 
16:04:51.773000 tramp-set-connection-property (7) # last-cmd-time (20809 28067 773000 0) 
16:04:51.774000 tramp-send-string (10) # test -d c\:/usr/bin 2>/dev/null; echo tramp_exit_status $? 
```

有人知道吗？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-12T12:57:00.053

合并@AlanThird 的[答案](https://stackoverflow.com/a/16441606/282729)和@uscjeremy 的评论，这对我有用*（GNU Emacs 24.3.1 (i386-mingw-nt5.1.2600) of 2013-03-17 on MARVIN，Windows XP/SP3/32） ：*

1.  字节编译`tramp-sh.el`（相应地调整路径）：

    ```
    (byte-compile-file "C:/Program Files (X86)/emacs/lisp/net/tramp-sh.el") 
    ```

2.  退出 Emacs。

3.  删除 Tramp 缓存：`~/.emacs.d/tramp`

4.  启动 Emacs。

另请参阅gnu.org 上的[错误报告 #14030](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=14030)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T13:09:18.970

这似乎是 tramp 中的一个错误，但您不需要升级 tramp，您所要做的就是在 Windows 机器上重新编译 tramp-sh.el。[请参阅此处](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=14030)的错误报告以获取更多信息。

在暂存缓冲区中输入：

```
(byte-compile-file "C:/Program Files/emacs/lisp/net/tramp-sh.el") 
```

调整路径以匹配您的安装，然后键入`Ctrl-Meta-x`以重新编译文件。如果它抱怨权限，您可能需要使用 Windows 中的“以管理员身份运行”选项重新启动 emacs。

重新编译文件后，键入`M-x` *tramp-cleanup-all-connections*以重置 tramp 连接缓存。这将关闭您打开的任何流浪者连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T17:15:09.167

切换到 Emacs 24.3 后我遇到了同样的问题。解决方案是升级到最新的 Tramp 2.2.7。这是我所做的：

1.  下载[http://ftp.gnu.org/gnu/tramp/tramp-2.2.7.ta​​r.gz](http://ftp.gnu.org/gnu/tramp/tramp-2.2.7.tar.gz)
2.  将存档解压缩到我的 ~/.emacs.d/src。我正在使用 emacs-starter-kit 将此目录及其所有子目录添加到加载路径。否则按照 Tramp 的 INSTALL 文件中的说明进行操作。
3.  使用 Cygwin bash 配置和编译文件。我通常不使用 Cygwin 的 Emacs，但在这种情况下使用它很方便。
4.  为了安全起见，删除了我的 emacs/lisp/net 中旧流浪汉的 el 和 elc 文件。
5.  当然重新启动了 Emacs。

执行 Mx tramp-version 以确保它已正确安装。现在流浪汉无处不在（dired、eshell、shell 等）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-16T13:28:12.540

使用`eval-expression`with`(byte-compile-file ..)`对我不起作用，但以下操作：

1.  以管理员身份打开 emacs（右键单击任务栏上的 emacs 按钮，右键单击弹出窗口中的 emacs 图标，单击“以管理员身份运行”）
2.  使用 Alt-X 进行编译而不是 eval-expression: `M-x byte-compile-file`: c:/Program Files/emacs-24.3/lisp/net/tramp-sh.el
3.  进入`tramp-cleanup-all-connections`原始 emacs 窗口，然后尝试再次打开您的远程文件。

# php - 在干净和专业的表格报告中显示 mysql 返回

> ID：15540225
> 
> 赞同：1
> 
> 时间：2013-03-21T05:32:44.460
> 
> 标签：php, grouping, tabular-form

这是我本周的第二个问题（到目前为止）。我的第一个实现了成功的解决方案，所以我认为这个也可以很幸运。我想布局/设计我的查询以这种方式输出的返回：

```
date 1    |    id       |     time     |     updated by    |     Status Update
          |     1       |     04:06    |       user1       |   this is a remark
          |     2       |     05:05    |       user2       |   this is again a remark
          |     3       |     05:08    |       user1       |   this is another remark
          |     4       |     07:09    |       user3       |   and this one also
date 2    |    id       |     time     |     updated by    |     Status Update
          |     5       |     04:06    |       user3       |   this is a remark for day 2
          |     6       |     05:05    |       user3       |   this is again a remark for day 2
date 3    |    id       |     time     |     updated by    |     Status Update
          |     7       |     04:06    |       user1       |   this is a remark
          |     8       |     05:05    |       user2       |   this is again a remark
          |     9       |     05:08    |       user2       |   this is another remark
          |     10      |     07:09    |       user3       |   and this one also 
```

这是我的php代码...

```
mysql declaration here
{
echo "<table border='0' align=center class='tablefont'>
<tr class='colheadbg'>
<th>Date</th>
<th>ID</th>
<th>Time</th>
<th>Updated by</th>
<th>Status Update</th>
</tr>";

while($info = mysql_fetch_array( $data ))
{
$id_num=$id_num + 1;
echo "<tr>
<td>".$info['date']."</td>
<td>$id_num</td>
<td>".$info['time']."</td>
<td>".$info['user']."</td>
<td>".$info['remarks']."</td>";
echo "</tr>";
}
echo "</table>";
}
?> 
```

到目前为止，这会输出一个表格形式的报告，这不是我真正想要的。我听说过这个“团体”，但我真的需要有一个好的入门想法才能让它继续下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:44:40.750

在您的函数中创建一个`$date`变量，然后在每次迭代时将其与当前行的日期进行比较，如下所示：

```
var $date = "";

while($info = mysql_fetch_array( $data )) {
    $id_num=$id_num + 1;
    echo "<tr>";
    if ($date==$info['date']) {
        echo "<td>".$info['date']."</td>
        <td>$id_num</td>
        <td>".$info['time']."</td>
        <td>".$info['user']."</td>
        <td>".$info['remarks']."</td>";
    }
    else {
         $date=$info['date']; //set it for the new date first
        //do your row magic
    }
    echo "</tr>";
} 
```

### 从 OP 截图更新

```
var $date = "";

while ($info = mysql_fetch_array( $data )) {
    $id_num++;

    echo "<tr>";

    if ($date == $info['date']) {
        echo "<td>"./**nothing**/."</td>";
        echo "<td>$id_num</td>
        <td>{$info['time']}</td>
        <td>{$info['user']}</td>
        <td>{$info['remarks']}</td>";
    }
    else {
        $date = $info['date']; //set it for the new date first
        echo "<td>$date</td>
        <td>$id_num</td>
        <td>{$info['time']}</td>
        <td>{$info['user']}</td>
        <td>{$info['remarks']}</td>";
    }

    echo "</tr>";
} 
```

根据您在屏幕截图中显示的内容，看起来这可能会解决它。

# java - Mahout Java 编译问题

> ID：15540235
> 
> 赞同：0
> 
> 时间：2013-03-21T05:33:21.180
> 
> 标签：java, classpath, javac, mahout, cloudera

我正在阅读 Mahout in Action 并完成第 2 章中[的第一个示例](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/recommender/ch02/RecommenderIntro.java)。

```
$ javac RecommenderIntro.java 
RecommenderIntro.java:2: error: package org.apache.mahout.cf.taste.impl.model.file does not exist
import org.apache.mahout.cf.taste.impl.model.file.*;
^
RecommenderIntro.java:3: error: package org.apache.mahout.cf.taste.impl.neighborhood does not exist
import org.apache.mahout.cf.taste.impl.neighborhood.*;
^
RecommenderIntro.java:4: error: package org.apache.mahout.cf.taste.impl.recommender does not exist
import org.apache.mahout.cf.taste.impl.recommender.*; 
```

我通过 yum 安装了 Mahout：

```
$ sudo yum install mahout
...
Downloading Packages:
mahout-0.7+12-1.cdh4.2.0.p0.9.el6.noarch.rpm                      |  94 MB     05:17     
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
Updating   : mahout-0.7+12-1.cdh4.2.0.p0.9.el6.noarch              1/2 
Cleanup    : mahout-0.7+8-1.cdh4.1.2.p0.12.el6.noarch              2/2 
Verifying  : mahout-0.7+12-1.cdh4.2.0.p0.9.el6.noarch              1/2 
Verifying  : mahout-0.7+8-1.cdh4.1.2.p0.12.el6.noarch              2/2 

Updated:
mahout.noarch 0:0.7+12-1.cdh4.2.0.p0.9.el6                                                             

Complete! 
```

我对 Java 也完全陌生。

我编译不正确吗？

我是否需要在调用 javac 的命令行上指定一些包含路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:26:23.813

所以事实证明这很简单，只要你知道你需要的罐子在哪里。在 cloudera mahout 发行版中，它们位于 /usr/lib/mahout 和 /usr/lib/mahout/lib 中。

```
$ javac -cp "/usr/lib/mahout/*:/usr/lib/mahout/lib/*:." RecommenderIntro.java 
$ java -cp "/usr/lib/mahout/*:/usr/lib/mahout/lib/*:." RecommenderIntro 

RecommendedItem[item:104, value:4.257081] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:30:53.747

这是一个简单的 Java 问题。安装软件包本身不会影响您的`javac`命令。您始终需要在其`-cp`参数中包含编译所需的所有类。

使用构建系统（如 IDE 或 Maven）要容易得多，您可以在其中导入依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T22:02:43.637

我们可以使用`mahout`command 来获取它`classpath`，但有时它会提供额外的信息。您可以更改文件`$MAHOUT_HOME/bin/mahout`以使其正常工作。

```
javac -cp `mahout classpath` File.java -d classes 
```

# windows-runtime - Windows 8 中带有 NetworkCredential 的 Windows 运行时组件

> ID：15540238
> 
> 赞同：0
> 
> 时间：2013-03-21T05:33:39.513
> 
> 标签：windows-runtime

我在 Windows 8 中创建了示例 WindowsRunTimeComponent 应用程序，其中一个属性我的类看起来像..

```
namespace WindowsRunTimeComponentTest
{
public sealed class Class1
{
 public NetworkCredential Credentials {get; set;}
}
} 
```

当我尝试构建它时，它给出了错误：

方法“WindowsRunTimeComponentTest.class1.Credentials.get()”返回 System.Net.Credentials，它不是有效的 Windows 运行时类型。向 Windows 运行时公开的方法必须仅返回 Windows 运行时类型。

我有vs2012。请知道我必须改变什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:34:15.460

我最好的猜测是，当您创建 Windows 运行时组件时，您的组件可以被非托管语言使用，例如 Javascript 或 C++。这些语言不知道如何创建特定的 .NET 类型，例如 NetworkCredentials。

有关详细信息，请参阅[此处的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx#DeclaringTypes)和此[stackoverflow 帖子](https://stackoverflow.com/questions/13778724/system-datetime-is-not-a-valid-windows-runtime-parameter-type)。

# django-models - NameError：名称“u1”未定义

> ID：15540247
> 
> 赞同：1
> 
> 时间：2013-03-21T05:34:38.140
> 
> 标签：django-models, python-2.7

我正在尝试遵循 django 教程，但有自己的任务。

Models.py 文件看起来像

```
from django.db import models

class User(models.Model):
    nickname = models.CharField(max_length=30)
    password = models.CharField(max_length=30)
    email = models.EmailField()
    reg_date = models.DateField()
class Question(models.Model):
    head = models.CharField(max_length=50)
    content = models.TextField()
    author = models.ForeignKey(User)
    date = models.DateField()
class Answer(models.Model):
    content = models.TextField()
    question = models.ForeignKey(Question)
    author = models.ForeignKey(User)
    date = models.DateField()
    validity = models.BooleanField() 
```

我制作了“python manage.py shell”并写了如下内容：

```
>>> u1 = User(nickname='Alex', password='123', email='alex@mail.ru', reg_date='2013-01-07')
>>> u1.save()
>>> u2 = User(nickname='Kate', password='abcde', email='kitten@mail.ru', reg_date='2012-12-15')
>>> u2.save() 
```

user_list 给了我

```
[<User: User object>, <User: User object>] 
```

但后来我退出并在代码中做了一些更改。在此之后，我无法创建 u1.delete() 或 u2.delete()，因为它告诉 NameError: name 'u1' is not defined，但仍然向我显示那里的两个用户列表。我还可以创建新的 u1 和 u2 并删除它们。我现在如何向那些以前的用户申请清除数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:35:21.173

如果要删除**所有**用户行：

```
User.objects.all().delete() 
```

如果您想查找并删除您创建的两个代码：

```
User.objects.get(nickname='Alex').delete()
User.objects.get(nickname='Kate').delete() 
```

# c++ - 在 C++ 中，使用 std::min 或 if 分支来限制值是否更好？

> ID：15540250
> 
> 赞同：22
> 
> 时间：2013-03-21T05:34:56.967
> 
> 标签：c++, cpu, minimum, instruction-set

编程中一种非常常见的模式是在某种更新后将值设置为最大值。我想知道的是，以下两段代码之间是否有区别，是否应该首选：

```
value += increment;
value = std::min(value, valueMax); 
```

对比

```
value += increment;

if (value > valueMax)
    value = valueMax; 
```

我的想法是，这归结为 CPU 是否具有获取两个值并产生最小值的指令。如果是这样，对 std::min 的调用应该导致该指令并避免不必要的分支。如果不是，则第二个版本在 value <= valueMax 时避免不必要的赋值。

我不太擅长这种事情，但我敢肯定有老派的组装黑客会知道这一点。我问他们：哪个更好？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T05:44:49.207

现代编译器足够聪明，可以在两种情况下生成相同的代码。例如，32 位 GCC 生成：

```
addl    %esi, %edi
cmpl    %edx, %edi
movl    %edi, %eax
cmovgl  %edx, %eax 
```

64 位 Clang：

```
%1 = add nsw i32 %increment, %value
%2 = icmp sgt i32 %1, %valueMax
%value = select i1 %2, i32 %valueMax, i32 %1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T05:45:26.120

在以下代码的 VC10 上，我们有以下程序集：

```
int main(int argc, char *argv[])
{ 
  int dummyValue = 0, valueMax = 3000, value = valueMax + 1;

  cin >> valueMax;
  cin >> value;

  dummyValue = std::min(value, valueMax);

  cout << dummyValue;
  cin >> valueMax;
  cin >> value;

  if (value > valueMax)
    dummyValue = valueMax;

  cout << dummyValue;
  return 0;
} 
```

生成：

```
 24:   dummyValue = std::min(value, valueMax);
00E112AF  mov         eax,dword ptr [valueMax]  
00E112B2  cmp         eax,dword ptr [value]  
00E112B5  lea         edx,[value]  
00E112B8  lea         ecx,[valueMax]  
00E112BB  cmovge      ecx,edx     // <-- this is our conditional assignment
00E112BE  mov         esi,dword ptr [ecx] 
```

和

```
if (value > valueMax)
  dummyValue = valueMax
00E112ED  mov         eax,dword ptr [valueMax]  
00E112F0  cmp         dword ptr [value],eax  
00E112F3  mov         ecx,dword ptr ds:[0E13038h]  
00E112F9  cmovg       esi,eax 
```

因此，这两种情况都针对任一[`cmovge`](http://msdn.microsoft.com/en-us/library/aa226718%28v=vs.60%29.aspx)或[`cmovg`](http://www.asmpedia.org/index.php?title=CMOVG)指令进行了优化。

我仍然会选择，`std::min`因为它比`if`陈述更能显示意图。它经过优化，更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:24:52.540

答案取决于值的类型。如果所有操作对代码优化器完全透明，则可以有效地优化代码，如果 value 是纯整数，情况就是如此。但是如果 value 是 std::string，您的代码也会编译，然后第二个版本可能会更快，因为赋值是有条件的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-03-14T06:30:30.423

这通常应该比分支快得多：

```
int max(int x, int y) 
    { 
        return x ^ ((x ^ y) & -(x < y));  
    } 
}; 
```

# hibernate - 从表中选择记录并将所选记录插入另一个表中时，HQL 插入失败？

> ID：15540252
> 
> 赞同：0
> 
> 时间：2013-03-21T05:35:11.787
> 
> 标签：hibernate, struts2, jpa-2.0

从表中选择记录并将所选记录插入另一个表时，我的 HQL 插入查询失败。我在控制台中收到所有调试消息“列表内”和迭代列表，但无法在公司表中插入记录。

DAO 类代码：-

```
public void approveCompany(int companyId, String varifier){
    session.beginTransaction();
    Query query=session.createQuery("from Provisional where companyID=?");
    query.setInteger(0, companyId);
    @SuppressWarnings("unchecked")
    List<Provisional> list=query.list();        
    session.getTransaction().commit();
if(list.size()>0)
    {
        System.out.println("inside list");
        for(Provisional p:list){
            System.out.println("iterating list");
Query approveQuery=session.createQuery("insert into Company(companyID" +
                    ",annualValueOfTotalExport,annualValueOfTotalSale,cityID,companyAddress" +
                    "companyEmail,companyName,companyType,contactPersionPosition,contactPersonEmail," +
                    "contactPersonFaxNo,contactPersonName,contactPersonPhoneNo,countryID,faxNo," +
                    "licenceNo,loginID,oldPassword,password,phoneNo,stateID,texID,updated_At," +
                    "verifierID,website,zipCode) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?," +
                    "?,?,?,?,?,?,?,?,?,?,?,?)");
            approveQuery.setParameter(1, p.getCompanyID());
            approveQuery.setParameter(2, p.getAnnualValueOfTotalExport());
            approveQuery.setParameter(3, p.getAnnualValueOfTotalSale());
            approveQuery.setParameter(4, p.getCityID());
            approveQuery.setParameter(5, p.getCompanyAddress());
            approveQuery.setParameter(6, p.getCompanyEmail());
            approveQuery.setParameter(7, p.getCompanyName());
            approveQuery.setParameter(8, p.getCompanyType());
            approveQuery.setParameter(9, p.getContactPersonPosition());
            approveQuery.setParameter(10, p.getContactPersonEmail());
            approveQuery.setParameter(11, p.getContactPersonFaxNo());
            approveQuery.setParameter(12, p.getContactPersonName());
            approveQuery.setParameter(13, p.getContactPersonPhoneNo());
            approveQuery.setParameter(14, p.getCountryID());
            approveQuery.setParameter(15, p.getFaxNo());
            approveQuery.setParameter(16, p.getLicenceNo());
            approveQuery.setParameter(17, p.getLoginID());
            approveQuery.setParameter(18, p.getPassword());
            approveQuery.setParameter(19, p.getPassword());
            approveQuery.setParameter(20, p.getPhoneNo());
            approveQuery.setParameter(21, p.getStateID());
            approveQuery.setParameter(22, p.getTaxID());
            approveQuery.setParameter(23, p.getCreated_On());
            approveQuery.setParameter(24, varifier);
            approveQuery.setParameter(25, p.getWebsite());
                      approveQuery.setParameter(26,p.getZipCode());         
           approveQuery.executeUpdate();
            session.getTransaction.commit();
        }
    }
    session.close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:21:18.350

为什么要使用 insert into....

尝试创建`Company company = new Company();`

然后将所有值设置为此对象，然后使用保存`.save();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:04:58.513

像这样使用批量插入。

hibernate.jdbc.batch_size 20

```
 Session session = sessionFactory.openSession();
     Transaction tx = session.beginTransaction();
     for ( int i=0; i<100000; i++ ) 
         {
             Customer customer = new Customer(.....);
             session.save(customer);
         if ( i % 20 == 0 ) { //20, same as the JDBC batch size
           //flush a batch of inserts and release memory:
           session.flush();
           session.clear();
         }
     }

     tx.commit();
     session.close(); 
```

# javascript - 使用 GPS 坐标在谷歌地图中绘制线路径

> ID：15540255
> 
> 赞同：4
> 
> 时间：2013-03-21T05:35:28.080
> 
> 标签：javascript, jsp, google-maps, gps

谁能告诉我如何使用我从数据库中检索到的 GPS 坐标在**[Google-Map中绘制一条线路径](https://maps.google.co.in/maps?hl=en&tab=wl)**

我得到的 GPS 坐标示例如下所示

```
10.013566,76.331549
10.013566,76.331463
10.013503,76.331313
10.013482,76.331205
10.013419,76.330926
10.013334,76.330712
10.013313,76.330411
10.013292,76.330175
10.013228,76.329854
10.013144,76.329553
10.013059,76.329296
10.012996,76.329017
10.012869,76.328802
10.012785,76.328545
10.012700,76.328223
10.012679,76.328030
10.012658,76.327837
10.012637,76.327600
10.012573,76.327322
10.012552,76.327043
10.012552,76.326807
10.012510,76.326613
10.012447,76.326399
10.012404,76.326227 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T05:43:30.340

试试这个

**[演示](http://jsfiddle.net/pintu31/EPM6A/2/)**

```
function initialize(){
   var center= new google.maps.LatLng(10.012869,76.328802);
   var myOptions = {
            zoom: 18,
            center: center,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.HYBRID
   }     
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var polylineCoordinates = [
        new google.maps.LatLng(10.013566,76.331549),
        new google.maps.LatLng(10.013566,76.331463),
        new google.maps.LatLng(10.013503,76.331313),
        new google.maps.LatLng(10.013482,76.331205),
        new google.maps.LatLng(10.013419,76.330926),
        new google.maps.LatLng(10.013334,76.330712),
        new google.maps.LatLng(10.013313,76.330411),
        new google.maps.LatLng(10.013292,76.330175),
        new google.maps.LatLng(10.013228,76.329854),
        new google.maps.LatLng(10.013144,76.329553),
        new google.maps.LatLng(10.013059,76.329296),
        new google.maps.LatLng(10.012996,76.329017),
        new google.maps.LatLng(10.012869,76.328802),
        new google.maps.LatLng(10.012785,76.328545),
        new google.maps.LatLng(10.012700,76.328223),
        new google.maps.LatLng(10.012679,76.328030),
        new google.maps.LatLng(10.012658,76.327837),
        new google.maps.LatLng(10.012637,76.327600),
        new google.maps.LatLng(10.012573,76.327322),
        new google.maps.LatLng(10.012552,76.327043),
        new google.maps.LatLng(10.012552,76.326807),
        new google.maps.LatLng(10.012510,76.326613),
        new google.maps.LatLng(10.012447,76.326399),
        new google.maps.LatLng(10.012404,76.326227),
  ];
  var polyline = new google.maps.Polyline({
      path: polylineCoordinates,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2,
      editable: true
  });

  polyline.setMap(map);    

}

initialize(); 
```

# batch-file - 快到了...需要找到并更换。使用 for 循环

> ID：15540258
> 
> 赞同：0
> 
> 时间：2013-03-21T05:35:48.673
> 
> 标签：batch-file, cmd, batch-processing

我正在尝试查找和替换。我正在使用 for 循环。我正在学习，但我快到了。我试图找到答案，但来源对我来说有点太混乱了。

delim 是一个空格，正如您所知道的，我正在跳过 4 行并执行第二个标记。

我需要在那个地方找到的东西被**var5a**替换。我把它倒过来，因为我需要**%%F**等于**var5a**，而不是相反（就像我现在写的那样）。但是不知道怎么写。请解释如何做到这一点。我试过使用 <<= 但没有运气。

```
for /f "skip=4 tokens=2 delims= " %%F in (script.vbs) do (
set var5a=!var5a!%%F
) 
```

我正在学习，所以请善待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:49:39.347

如果你有`Henri`%%F 并且你想将 的值设置为then`Henri`的当前值`var5a`

```
set %%F=!var5a! 
```

（**!var5a!**如果您想要 RUN-TIME 值`var5a`（前提是您已调用 ENABLEDELAYEDEXPANSION 模式）或**%var5a%**如果您想要 PARSE-TIME 值）

* * *

证明答案确实有效的程序：

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION

::: WARNING! This will overwrite SCRIPT.VBS

DEL script.vbs 2>nul
FOR /l %%i IN (1,1,4) DO >>script.vbs ECHO ignore this line %%i
>>script.vbs ECHO Oh Henri - it does work
>>script.vbs ECHO Now try again

ECHO ===== here is script.vbs

TYPE script.vbs

ECHO ===== script.vbs ends

SET var5a=this is the value

SET henri
SET var5a

ECHO ===== now run the FOR loop...

for /f "skip=4 tokens=2 delims= " %%F in (script.vbs) do (
 set %%F=!var5a!
)

SET henri

GOTO :eof 
```

结果：

```
===== here is script.vbs
ignore this line 1
ignore this line 2
ignore this line 3
ignore this line 4
Oh Henri - it does work
Now try again
===== script.vbs ends
Environment variable henri not defined
var5a=this is the value
===== now run the FOR loop...
Henri=this is the value 
```

现在 - 你是什么意思`"it doesn't work"`？确实如此。如果它没有按照您希望的方式执行，请说明您提出该声明的原因，否则我们只能猜测。

例如，上面也将设置`try`为该值，因为`Henri`它不是唯一的数字 2 标记，在源文件的 4 行之后用空格分隔。这很容易解决（但我不是读心术 - 只是一个不起眼的程序员）

```
(set notsetyet=Y)
for /f "skip=4 tokens=2 delims= " %%F in (script.vbs) do (
 IF DEFINED NOTSETYET set %%F=!var5a!&(set notsetyet=)
) 
```

但也许`"it didn't work"`是因为它`Henri`被设置为错误的值。或者它可能崩溃了。我们无法从您的回复中看出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:01:16.103

```
@ECHO OFF
SETLOCAL
:: Replace token 2 (space-separated) in line 5 of a file with REPLACEMENT
:: Assumed the file exists, etc. and no line begins ":"
SET replacement=THIS IS THE REPLACEMENT TEXT
DEL newfile.txt 2>nul
FOR /f "tokens=1*delims=:" %%i IN ('findstr /n /r "$" ^<oldfile.txt') DO (
IF %%i==5 (
FOR /f "tokens=1,2* delims= " %%L IN ("%%j") DO >>newfile.txt ECHO %%L %replacement% %%N
) ELSE (>>newfile.txt ECHO.%%j)
)

TYPE oldfile.txt
ECHO ==== separator =======
FC oldfile.txt newfile.txt 
```

结果：

```
Line one should not be changed
Line two should not be changed
Line three should not be changed
Line four should not be changed
changeme iwillbereplaced but only on this line
and notbereplaced on subsequent lines

including the previous line which was empty
==== separator =======
Comparing files oldfile.txt and NEWFILE.TXT
***** oldfile.txt
Line four should not be changed
changeme iwillbereplaced but only on this line
and notbereplaced on subsequent lines
***** NEWFILE.TXT
Line four should not be changed
changeme THIS IS THE REPLACEMENT TEXT but only on this line
and notbereplaced on subsequent lines
***** 
```

有困难 - 特别是如果文件中的行以冒号开头或包含带引号的字符串或任何常见的批处理陷阱，例如`%`

* * *

所以 - 终于我弄清楚了你在做什么。您省略了字符串`%%F`不仅被引用，而且还包含空格的关键信息。

如果你一开始就这么说，那么你的项目就会多几个小时，而我会因为少量的阿司匹林而变得更富有。

为了用带引号的字符串加载 %%F，我从文件中读取了字符串。

```
@ECHO OFF
SETLOCAL enabledelayedexpansion
:: Replace token 2 (space-separated) in line 5 of a file with REPLACEMENT
:: Assumed the file exists, etc. and no line begins ":"
SET replacement="THIS IS THE REPLACEMENT TEXT"
DEL newfile.txt 2>NUL

:: iwbr.txt just contains
:: "i will be replaced"
:: on a single line for loading into %%F as that is the target to be replaced

FOR /f "delims=" %%F IN (iwbr.txt) DO (
FOR /f "tokens=1*delims=:" %%i IN (
  'findstr /n /r "$" ^<oldfile.txt'
 ) DO >>newfile.txt (
  IF %%i==5 (
   SET newline=%%j
   CALL SET newline=%%newline:%%F=%replacement%%%
    ECHO.!newline!
  ) ELSE (ECHO.%%j)
  )
)
TYPE oldfile.txt
ECHO ==== separator =======
FC oldfile.txt newfile.txt 
```

结果：

```
Line one should not be changed
Line two should not be changed
Line three "should" not be changed
Line four should not be changed
changeme "i will bereplaced" but only on this line
and notbereplaced on subsequent lines

including the "previous" line which was empty
including this "unbalanced-quote line...
==== separator =======
Comparing files oldfile.txt and NEWFILE.TXT
***** oldfile.txt
Line four should not be changed
changeme "i will bereplaced" but only on this line
and notbereplaced on subsequent lines
***** NEWFILE.TXT
Line four should not be changed
changeme "THIS IS THE REPLACEMENT TEXT" but only on this line
and notbereplaced on subsequent lines
***** 
```

# android - 膨胀 Google Maps v2 片段导致 ClassNotFoundException / 应用程序 LBS 已意外停止

> ID：15540263
> 
> 赞同：1
> 
> 时间：2013-03-21T05:36:08.990
> 
> 标签：android, google-maps-android-api-2, classnotfoundexception, android-maps-v2

我对 Android Dev 还很陌生。只是尝试使用 Google Android Map API v2 显示一个简单的地图。我并不想在这里做任何特别的事情……我原以为我会在 30 分钟或更短的时间内完成这项工作……令人尴尬和沮丧的是，两天后我仍然卡住了。精氨酸！我花了很多时间尝试不同的东西，阅读文档，甚至尝试回退到 v1 Map API ......但没有成功。

该应用程序在我的真实手机上立即崩溃，并显示以下消息：“应用程序 LBS 已意外停止”。

我查看了多个帖子，但仍然无法找到我的问题，所以我希望有人能发现问题。

[我按照Google 的说明](https://developers.google.com/maps/documentation/android/intro)创建了一个密钥，并认为我成功完成了本页列出的其他步骤。

我正在运行 Android v2.2.1 的手机上运行该应用程序。据我了解，v2 API 不会在模拟器上运行……您必须使用真实设备。希望谷歌能在不久的将来某个时候纠正这个问题。

这是 LogCat ......它似乎因片段膨胀而窒息。

```
java.lang.RuntimeException: Unable to start activity \
       ComponentInfo{com.example.lbs/com.example.lbs.MainActivity}: \
       android.view.InflateException: Binary XML file line #2: \
       Error inflating class fragment
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:893)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:651)
    at dalvik.system.NativeStart.main(Native Method)

Caused by: android.view.InflateException: Binary XML file line #2: \
       Error inflating class fragment
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200)
    at android.app.Activity.setContentView(Activity.java:1647)
    at com.example.lbs.MainActivity.onCreate(MainActivity.java:11)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    ... 11 more

Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader 
       dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:\
       /data/app/com.example.lbs-2.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    at android.view.LayoutInflater.createView(LayoutInflater.java:466)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
    ... 19 more 
```

这是 MainActivity 代码：

```
package com.example.lbs;
import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
    }
} 
```

这是清单。请注意，这里有一些不需要的额外内容。我一直在尝试各种方法来尝试让这个简单的应用程序正常工作。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.lbs"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.lbs.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.lbs.permission.MAPS_RECEIVE" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission `enter code here`android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <!--
     The following two permissions are not required to use
     Google Maps Android API v2, but are recommended.
    -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="com.example.lbs.MainActivity"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCC-v65frsK6-VZjHrEMqr0wyjorLuDXXX
            " />
</application>
<uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
</manifest> 
```

这是布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.MapFragment"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:44:25.583

好的，所以在花了几天时间尝试完成这项工作后，我终于在今天下午放弃了，几乎重新开始......我终于按照本教程（[http://mobisys）在我的 Android v2.2.1 手机上完成了这项工作.in/blog/2012/12/google-rolls-out-android-maps-api-v2/](http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/)）。

谷歌地图是一个很棒的实用程序，但它不应该这么难使用……只是获取 API 密钥的过程很繁琐。

与 Google 的材料不同，本教程非常清晰、简洁和准确。在我查阅本教程后，我确实花了 30 分钟才让它工作。那是在 2-3 天后试图用谷歌材料弄清楚。谷歌文档的人应该看看这个教程并效仿它。哇……多么令人耳目一新。不知道他们的其他 Android 教程是否同样清晰，但如果是这样，这将是我阅读所有 Android 文档的第一站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T03:46:00.273

你`MainActivity`应该扩展`FragmentActivity`而不是活动

如果您使用的是支持库，您应该使用

```
import android.support.v4.app.FragmentActivity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:41:07.643

直到 Android 3.0 才引入 Fragment。但是，您可以使用支持库在早期版本中获得对它的支持。请[在此处](http://developer.android.com/training/basics/fragments/support-lib.html)查看更多信息。

# java - 在 Hazelcast 中使用链表

> ID：15540264
> 
> 赞同：4
> 
> 时间：2013-03-21T05:36:14.397
> 
> 标签：java, in-memory-database, hazelcast

我只是想知道是否可以在 Hazelcast 中使用 Linked List 作为数据结构，因为我的要求需要这样做。目前只有 Distributed Map 、 Distributed Queue 、 Distributed Set 和 Distributed List 。如果可能的话，我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T11:10:14.570

链接列表“只是”表单的一些对象

```
class Entry
{
    Entry next;
    Object value;
} 
```

和一个管理这些的对象“列表”。

双向链表当然添加

```
class Entry
{
    Entry next;
    Entry previous;
    Object value;
} 
```

因此，如果您使用“分布式集”并放入 Entry 类型的对象，则可以在任何 Collection 实现之上“添加”链表功能，这当然也需要您实现管理“列表”。

但我不知道这样的事情在你的情况下是否有意义。

# android - 如何在android程序中限制WebView

> ID：15540265
> 
> 赞同：0
> 
> 时间：2013-03-21T05:36:25.517
> 
> 标签：android, android-webview

我想限制在初始化时声明的`webView's` `limit`一些内容。`pixels``webView`

```
View insertPoint = findViewById(R.id.layout);

WebView web = new WebView(this) ;
web.setBackgroundColor(Color.GRAY);
int lHeight = 200 ;
int lWidth = 200 ;

( (ViewGroup) insertPoint ).addView(web, lWidth, lHeight) ;

web.loadUrl("http://www.google.com"); 
```

编辑：

Full Screen 是由那个取的`WebView`，它不在里面`200px*200px`。

编辑：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity"
    android:id="@+id/layout" >

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:20:28.173

如果您还添加以下行，您的代码应该可以工作：

```
web.setWebViewClient(new WebViewClient()); 
```

否则，您的代码将启动浏览器（全屏）。例如，如果您单击“返回”，您应该会看到您的灰色框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:44:42.570

您可以尝试使用此代码设置高度宽度：

```
 WebView w =new WebView(this);
            LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            w.setLayoutParams(lp);
            w.getLayoutParams().width = 200;
            w.getLayoutParams().height = 200;
            ( (ViewGroup) insertPoint ).addView(w) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:07:55.927

是的，您的代码正在运行检查`layout xml`您已声明的文件天气`layout_width`，`layout_height` `match_parent`或者`fill_parent`如果是这样，则将其更改为`wrap_content`它会起作用。

把这个布局而不是你的布局如果它工作，那么你的代码没有任何问题，否则你的 xml 有问题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/layout"   >

</LinearLayout> 
```

活动课

```
 public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        loadView();

    }
    public void loadView(){
        View insertPoint = findViewById(R.id.layout);

        WebView web = new WebView(this) ;
        web.setWebViewClient(new WebViewClient());
        web.setBackgroundColor(Color.GRAY);
        int lHeight = 200 ;
        int lWidth = 200 ;

        ((ViewGroup) insertPoint) .addView(web, lWidth, lHeight) ;

        web.loadUrl("http://www.google.com");

    } 
```

# ios - UIscrollview中的自定义UIButton

> ID：15540275
> 
> 赞同：0
> 
> 时间：2013-03-21T05:37:19.753
> 
> 标签：ios, objective-c, xcode, uiscrollview, uibutton

我正在使用`xcode 4.6`开发应用程序。在这里，我想以编程方式将 UIButton 添加到 UIscrollview。这是我遵循的代码。

```
UIButton *bt =[[UIButton alloc]initWithFrame:frame];
bt=[UIButton buttonWithType:UIButtonTypeCustom];
[bt setTitle:@"Custom Button" forState:UIControlStateNormal];
[bt addTarget:self action:@selector(userTappedOnLink:) forControlEvents:UIControlEventTouchUpInside];
bt.backgroundColor = [UIColor grayColor];
bt.titleLabel.textColor=[UIColor blueColor];
[self.mainscrollview addSubview:bt];
[self.mainscrollview bringSubviewToFront:bt]; 
```

现在的问题是 Button 在单击时消失了（从技术上讲，它的文本颜色变为白色）。我检查了保持 UIscrollview 颜色为红色，该按钮仍在视图中，但我无法了解其文本颜色更改的原因以及如何撤消 dis。基本上我想使用 UIbutton 创建一个可点击的链接。我知道 uitextview 方法（datadetectortype），但它没有用，因为我想在链接和实际链接的标签中显示不同的文本。

注意：文本颜色不会变回蓝色，仅保持白色。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:43:54.337

使用下面的代码，你会得到你的解决方案

```
UIButton *bt =[[UIButton alloc]initWithFrame:frame];
bt=[UIButton buttonWithType:UIButtonTypeCustom];
[bt setTitle:@"Custom Button" forState:UIControlStateNormal];
[bt addTarget:self action:@selector(userTappedOnLink:) forControlEvents:UIControlEventTouchUpInside];
[bt setBackgroundColor:[UIColor grayColor]];
[bt setTitleColor:[UIColor blueColor] forState:UIControlStateNormal];
[self.mainscrollview addSubview:bt];
[self.mainscrollview bringSubviewToFront:bt]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:59:08.223

试试下面的代码

```
UIButton *bt =[UIButton buttonWithType:UIButtonTypeCustom];
bt.frame = CGRectMake(50.0, 50.0, 100.0, 50.0);
[bt setTitle:@"Custom Button" forState:UIControlStateNormal];
[bt addTarget:self action:@selector(userTappedOnLink:) forControlEvents:UIControlEventTouchUpInside];
bt.backgroundColor = [UIColor grayColor];
bt.titleLabel.textColor=[UIColor blueColor];
[self.scrollTest addSubview:bt];

-(void)userTappedOnLink:(UIButton*)sender
{
     NSLog(@"Test  ..");

    [self performSelector:@selector(changeBtnTextColor:) withObject:sender afterDelay:1.0];
}

-(void)changeBtnTextColor:(UIButton*)btn
{
  btn.titleLabel.textColor=[UIColor blueColor];
} 
```

希望它对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:41:39.773

使用以下代码：

```
[bt setTitleColor:[UIColor blueColor] forState:UIControlStateNormal]; 
```

问题是您将 Title 设置为 titleLabel 并且您正在更改 buttonTitle 颜色的 textColor。

祝一切顺利 ！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:43:27.820

检查按钮的框架..它是否有效？`bt=[UIButton buttonWithType:UIButtonTypeCustom];`并从您的代码中删除行。

# machine-learning - mahout 分类器训练数据的预处理

> ID：15540276
> 
> 赞同：0
> 
> 时间：2013-03-21T05:37:40.633
> 
> 标签：machine-learning, mahout

我正在训练 mahout 分类器。我是否需要对我的训练数据进行词干提取、小写和停止词删除，否则 mahout 会在训练过程中处理这些问题。下面的命令我用于培训。

```
$MAHOUT_HOME/bin/mahout trainclassifier -i category-training-data -o category-bayes-model -type bayes -ng 1 -source hdfs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:01:39.650

它没有那种预处理，不。

# asp.net - 组织 ASP MVC 站点

> ID：15540283
> 
> 赞同：0
> 
> 时间：2013-03-21T05:38:38.463
> 
> 标签：asp.net, asp.net-mvc

我是 ASP MVC 的新手。

我试图建立一个带有页眉、页脚、菜单和主要内容位置的网站。

最好的方法是什么？部分观点，领域？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:40:31.820

使用 layout.chtml 文件，这将作为您网站的母版页，并可用于您的所有视图。

对于 MVC3，您可能会看到：[ASP.NET MVC 3: Layouts and Sections with Razor](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

> **什么是布局？**
> 您通常希望在您的网站/应用程序中的所有页面上保持一致的外观和感觉。ASP.NET 2.0 引入了“母版页”的概念，这有助于在使用基于 .aspx 的页面或模板时实现这一点。Razor 还通过称为“布局”的功能支持此概念——**它允许您定义一个通用站点模板**，然后在您站点上的所有视图/页面上继承其外观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:44:06.347

您可以对页眉和页脚使用部分视图。对于我的大多数 Asp.Net MVC 项目，我在母版页中使用部分视图。您可以在标题部分视图中添加菜单。

```
<body>   
<div class="contentdiv">
<% Html.RenderPartial("Header"); %>
<div class="row-fluid">
<div class="container containerbg" >
    <asp:ContentPlaceHolder ID="MainContent" runat="server" />
</div>
</div>
<% Html.RenderPartial("Footer"); %>
<asp:ContentPlaceHolder ID="ScriptsSection" runat="server" />
</div> 
</body> 
```

# iphone - 转发地理编码和缩放以适应多个位置

> ID：15540287
> 
> 赞同：0
> 
> 时间：2013-03-21T05:38:56.057
> 
> 标签：iphone, ios, mkmapview, mapkit, clgeocoder

以下是我用来加载地图视图的代码。

```
- (void)getLatLongCoordinates:(NSString*) addressStr firstNameTitle:(NSString*) firstNamesTitle lastNameTitle:(NSString*) lastNamesTitle       { 
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
[geocoder geocodeAddressString:addressStr completionHandler:^(NSArray *placemarks, NSError *error) {
    self.placemarksArray = placemarks;
    CLPlacemark *placeInfo = [placemarks objectAtIndex:0];

    mapCenter.latitude = placeInfo.location.coordinate.latitude;
    mapCenter.longitude = placeInfo.location.coordinate.latitude;
    [annotationPoint setCoordinate:mapCenter];

    [annotationPointsArray addObject:annotationPoint];

    addAnnotation = [[[MyAddressAnnotation alloc] initWithCoordinate:mapCenter title:firstNamesTitle SubTitle:lastNamesTitle ]autorelease];
    addAnnotation.firstNameTitle = firstNamesTitle;
    addAnnotation.lastNameTitle = lastNamesTitle;

[mapView addAnnotation:addAnnotation];
}]; 
```

}

我需要调用该方法`[self zoomToFitMapAnnotations:mapView withArray:annotationPointsArray];` 以最大缩放级别适合地图视图中的所有联系人。直到之前的实现我已经成功地使用了下面的代码。但是由于我现在使用块，所以我对何时调用此方法有点困惑。在调用此方法并将数组传递给它之前，我需要获取所有位置坐标。

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapViews withArray:(NSArray*)anAnnotationArray
{
if([mapViews.annotations count] == 0) return;

CLLocationCoordinate2D topLeftCoord;
topLeftCoord.latitude = -90;
topLeftCoord.longitude = 180;

CLLocationCoordinate2D bottomRightCoord;
bottomRightCoord.latitude = 90;
bottomRightCoord.longitude = -180;

for(MKPointAnnotation* annotation in anAnnotationArray)
{
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;     
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; 

region = [mapViews regionThatFits:region];
[mapView setRegion:region animated:NO];
} 
```

上面这段代码中调用上述方法的正确位置在哪里，或者我是否需要找到其他方法来执行此操作。

编辑：我避免使用并直接从方法中`mapCenter`访问坐标，我做对了，问题就解决了。但是我仍然很困惑，为什么第一种方法不起作用。`placeInfo``getLatLongCoordinates`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:49:14.633

我在我的情况下使用这种方法

通常我在我的mapview中添加注释后调用这个方法。所以最好的方法是在将annotationView添加到mapview之后调用这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:55:17.040

使用此代码 `zoomToFitMapAnnotations`

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapView_
{
    if([mapView_.annotations count] == 0)
        return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(CKMapAnnotationView* annotation in mapView_.annotations)
    {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
    }
    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

    region = [mapView_ regionThatFits:region];

    [mapView_ setRegion:[self validRegion:region] animated:YES];
} 
```

**编辑：**加载注释后调用此函数

```
[self zoomToFitMapAnnotations:mapView]; 
```

# shell - Unix Shell 脚本：如何相应地修改输出文件名

> ID：15540289
> 
> 赞同：0
> 
> 时间：2013-03-21T05:39:07.043
> 
> 标签：shell, unix, scripting

所以我目前的shell脚本是：

```
for j in *.jpg
do
  tesseract $j $j
done 
```

其中 tesseract 将 jpg 文件转换为文本文件。使用此脚本，如果有文件 HAHA.jpg，则输出文件名变为 HAHA.jpg.txt 但我希望它只是 HAHA.txt

有没有办法将输出文件名设为 HAHA.txt 而不是 HAHA.jpg.txt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:43:21.683

如果你有一个 shell 变量`j`，你可以去掉一个匹配给定模式的后缀，如下所示

```
${j%%.jpg} 
```

where`%%`表示最长的匹配后缀应该被移除，并且`.jpg`是模式（“一个点，后跟三个字母：j、p 和 g”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:49:01.123

在你的 tesseract 命令之后添加这一行：

```
for j in *.jpg
do
  tesseract $j $j
  mv ${j}.txt  ${j/jpg/txt}
done 
```

即使 tesseract 已重命名您的文件，该变量`$j`仍将包含 HAHA.jpg。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:52:03.220

使用基本名称：

```
for j in *.jpg
do
  tesseract $j $(basename -s .jpg $j)
done 
```

# django - 异常类型：TemplateDoesNotExist

> ID：15540290
> 
> 赞同：1
> 
> 时间：2013-03-21T05:39:10.200
> 
> 标签：django

```
Environment:

Request Method: GET

Django Version: 1.5

Python Version: 2.7.3

Installed Applications:('django.contrib.auth',

 'django.contrib.contenttypes',

 'django.contrib.sessions',

 'django.contrib.sites',

 'django.contrib.messages',

 'django.contrib.staticfiles',

 'allauth',

 'allauth.account',

 'allauth.socialaccount',

 'allauth.socialaccount.providers.facebook',

 'allauth.socialaccount.providers.google',

 'allauth.socialaccount.providers.linkedin',

 'django.contrib.admin')

Template Loader Error:

Django tried loading these templates, in this order:

Using loader django.template.loaders.filesystem.Loader:

/var/www/testapp/templates/account/login.html (File does not exist)

Using loader django.template.loaders.app_directories.Loader:
/usr/local/lib/python2.7/dist-packages/django/contrib/auth/templates/account/login.html 
(File does not exist)

/var/www/testapp/allauth/templates/account/login.html (File does not exist)

/var/www/testapp/allauth/socialaccount/providers/facebook/templates/account/login.html 
(File does not exist)

/usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/account/login.html 
(File does not exist)

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  140\.                     response = response.render()

File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in render
  105\.             self.content = self.rendered_content

File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in rendered_content
  80\.         template = self.resolve_template(self.template_name)

File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in resolve_template
  56\.             return loader.select_template(template)

File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in select_template
  194\.     raise TemplateDoesNotExist(', '.join(not_found))

Exception Type: TemplateDoesNotExist at /accounts/login/
Exception Value: account/login.html 
```

* * *

任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:28:40.247

在您的文件夹中创建`/var/www/testapp/`一个名为`templates`. 在此目录中创建另一个名为的目录`account`，最后创建一个名为`login.html`.

所以这条路径存在：`/var/www/testapp/templates/account/login.html`

你完成了。现在您可以将 a`{{ form }}`或您的请求传递给该模板的任何其他内容。

# codeigniter - CodeIgniter 控制器方法参数问题

> ID：15540291
> 
> 赞同：6
> 
> 时间：2013-03-21T05:39:10.580
> 
> 标签：codeigniter, url, parameters, codeigniter-2

我正在使用 codeigniter 2.1，我定义了一个函数，如下所示。

```
public function reset($email, $hash) {

} 
```

根据`MVC architecture`和概念，`OOPS`如果我没有通过`parameters`. `url`但是在codeigniter这个函数得到执行，那么我该如何克服呢？请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T11:46:09.080

只需要像这样定义空参数：

```
public function reset($email = null, $hash = null) {

} 
```

如果你调用函数

```
(controller name)/reset/mail@mail.com/dsadasda 
```

比`$email = mail@mail.com`&`$hash = dsadasda`

如果你发挥作用

```
(controller name)/reset 
```

比`$email`并且`$hash`将为空。

您也可以像这样声明默认参数。

```
public function reset($email = mail@mail.com, $hash = dsadasdas) {

} 
```

希望我是清楚的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:30:59.043

如果要执行带或不带参数的函数，可以为其设置默认值。

```
public function reset($email = '', $hash = '') {

} 
```

这样在没有参数的情况下函数仍然可以执行。您可以对代码使用条件

```
public function reset($email = '', $hash = '') {

    if(!empty($email) AND !empty($hash)){
        //your code here
    }
} 
```

# xml - 在 XSL 转换过程中，一份副本如何记录特定的 DTD？

> ID：15540293
> 
> 赞同：1
> 
> 时间：2013-03-21T05:39:28.417
> 
> 标签：xml, xslt, dtd, dtd-parsing

我在由我们的编辑软件创建的 XML 文件的顶部有以下特定于文档的 DTD：

```
<!DOCTYPE front SYSTEM "file:///M:/Library/AMH-Paed.dtd" [
<!NOTATION cgm PUBLIC "" >
<!-- Begin Document Specific Declarations --><!ENTITY fm.tcont " (Continued)">
<!ENTITY equation1 SYSTEM "equation11.cgm" NDATA cgm>
<!ENTITY equation2 SYSTEM "equation26.cgm" NDATA cgm>
<!ENTITY equation3 SYSTEM "equation32.cgm" NDATA cgm>
<!ENTITY equation4 SYSTEM "equation41.cgm" NDATA cgm>
<!ENTITY equation5 SYSTEM "equation51.cgm" NDATA cgm>
<!ENTITY equation6 SYSTEM "equation62.cgm" NDATA cgm>
<!-- End Document Specific Declarations -->]> 
```

我们正在更新我们内容的通用文档类型，因此通过 XSLT 转换当前的 XML 文件。

我们有几百个文档，但其中只有少数有任何特定的声明（数量、名称和值各不相同），我们必须通过转换来维护这些声明。

但是，我找不到通过转换来维护上述实体声明的方法。

有可能吗，你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:12:37.267

DTD 声明不是呈现给 XSLT 处理器的数据模型的一部分，因此不能直接完成。

一种解决方法是使用 Andrew Welch 的 Lexev 工具。这会将 DTD 转换为 XML 表示形式作为预处理步骤，然后将反向作为后处理步骤。

# asp.net - 谷歌地图上的指针

> ID：15540294
> 
> 赞同：0
> 
> 时间：2013-03-21T05:39:35.440
> 
> 标签：asp.net, visual-studio-2010, google-maps, c#-4.0, google-maps-api-3

我需要通过单击按钮来显示地址，为此我获得了所需位置的纬度和经度，

在 URl 中映射时 `https://maps.google.com/?ll=28.64036031970850,77.24250191970849`

像这样。我没有得到谷歌地图上的欲望指针，就像我们得到红色指针的 A 一样。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:48:43.963

试试这个。根据您的需要更改纬度/经度。 [https://maps.google.com/?q=22.917923,72.773438](https://maps.google.com/?q=22.917923,72.773438)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:48:04.593

您可以为此使用自定义标记。这是一个让您入门的片段：

```
// Create the map
var map = new google.maps.Map($("#map-result"), mapOptions);

// Create the marker on the map
var marker = new CustomMarker(new google.maps.LatLng(pinLatitude, pinLongitude), map, searchResults[i], markerNumber);

// Add listener to react to click of marker
google.maps.event.addListener(marker, 'click', (function (marker, i) {
    return function () {
        // Call some function to do something
        showSelectedMarker();
    }
})(marker, i)); 
```

一个很好的例子在这里：

[Google Maps JS API v3 - 简单的多标记示例](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

# c++ - C ++类中的char数组成员

> ID：15540295
> 
> 赞同：3
> 
> 时间：2013-03-21T05:39:53.613
> 
> 标签：c++, class, member

我在我的 c++ 类成员中有：

```
char array[24]; 
```

在析构函数中如何处理这个成员或者可能什么都没有？谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T05:40:28.277

没有什么。你不手动为数组分配空间，所以你不应该手动释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:50:27.733

分配/解除分配适用于在自由存储（使用 malloc/new 等）上构造的对象。类中的数组将具有与类对象相同的生命周期。所以你应该关心处理对象的分配/释放，而不是它们的成员（当成员不是指针时）。

当成员变量是指针并且它指向动态分配的内存/对象时，您需要释放它（最好在析构函数中）。

例如：

```
class A { };

class B {

    A* a;

    B() { 
        a = new A;
    }

    ~B() { 
        delete a; 
    }
}; 
```

# php - 获取多个条件的计数

> ID：15540297
> 
> 赞同：-2
> 
> 时间：2013-03-21T05:40:09.637
> 
> 标签：php, mysql

我的问题是我想在单个查询中获得三个条件的计数。我知道我可以通过运行多个查询来做到这一点，但问题是我在一个查询中需要它

我尝试过的查询是

```
SELECT COUNT( IF( da <3, da, 0 ) ) AS da1, 
       COUNT( IF( da <2, da, 0 ) ) AS da2, 
       COUNT( IF( da <1, da, 0 ) ) AS da3
FROM tv 
```

它的结果是

```
4 4 4 
```

但预期的结果是

```
2 1 0 
```

列表中存在的数据`da`是

```
3 2 1 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:47:31.747

```
SELECT SUM( IF( rr <3, 1, 0 ) ) AS da1, 
       SUM( IF( rr <2, 1, 0 ) ) AS da2, 
       SUM( IF( rr <1, 1, 0 ) ) AS da3
FROM tv; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:49:25.017

`COUNT()`需要与`GROUP BY`- 我认为这可能是您的问题，请尝试按“da”分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:53:40.550

我刚刚为我的问题找到了解决方案，但**PSR 的**解决方案也是正确的

```
SELECT * 
FROM (

    SELECT COUNT( da ) AS da1
    FROM tv
    WHERE da <3
    ) AS da1, (

    SELECT COUNT( da ) AS da2
    FROM tv
    WHERE da <2
    ) AS da2, (

    SELECT COUNT( da ) AS da3
    FROM tv
    WHERE da <1
    ) AS da3 
```

# java - 面板控件未根据窗口屏幕分辨率调整大小

> ID：15540302
> 
> 赞同：0
> 
> 时间：2013-03-21T05:40:44.777
> 
> 标签：java, swing, netbeans, jpanel

我正在尝试在 JFrame 上添加 JPanel 。JPanel 是在 netbeans 中设计的。JPanel 正在使用 FreeDesign 布局。窗口屏幕的当前分辨率是 1024*768，但是当我将分辨率更改为 800*600 时，面板上的控件不会根据窗口屏幕的新分辨率自动调整大小。

> 这怎么可能使面板控件根据新的分辨率窗口

# ruby-on-rails - 如何将参数添加到在rails中动态的给定url

> ID：15540305
> 
> 赞同：0
> 
> 时间：2013-03-21T05:40:56.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, parameters, link-to

我的页面有 url

```
http://localhost:3000/athletes/list 
```

当用户在此页面上搜索时，它会变为类似

```
http://localhost:3000/athletes/list?first_name=sachin&last_name=tendulkar 
```

where`first_name`和`last_name`是用户搜索时的搜索参数。

`for ex.` 我想要一个在 url 中为第一个 URL添加参数 view_type=something 的链接

```
http://localhost:3000/athletes/list?view_type=something 
```

对于第二个网址

```
http://localhost:3000/athletes/list?first_name=sachin&last_name=tendulkar&view_type=something 
```

我试过以下

```
<%= link_to "Something ", :view_type => 'something' %> 
```

但是对于这两个网址，它都会提供以下网址

```
http://localhost:3000/athletes/list?view_type=something 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T05:49:26.123

```
<%= link_to "Something ", params.merge(:view_type => 'something')  %> 
```

尽管出于某种原因，上面的代码在大多数情况下都有效，但它对某些 url 给出错误可能是因为我正在使用friendly_url`for ex.`

网址

```
http://localhost:3000/athlete/sachin_ramesh_tendulkar_1 
```

给我错误的网址

```
http://localhost:3000/athlete/1?view_type=something 
```

为了解决这个问题，我使用`javascript`如下方法

```
function something(){
    var par =""
    var link =window.location.href
    if (link.indexOf('view_type=something') == -1)
        par = link.indexOf('?') != -1 ? "&view_type=something" : "?view_type=something"
    window.location.href = link+par
} 
```

和导轨代码

```
<%= link_to "Something ", "javascript:void(0)", :onclick => "something();"  %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:09:42.100

这也可能有用（来自 API）

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to#343-link-to-some-url-with-current-params](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to#343-link-to-some-url-with-current-params)

# java - android中的Asyntask并行运行错误

> ID：15540306
> 
> 赞同：0
> 
> 时间：2013-03-21T05:41:03.973
> 
> 标签：java, android, android-asynctask, android-service

我在一个 android 服务中有一些代码，一个每 3 秒运行一次 Asyntasks 的计时器。但有时我会收到此错误：

```
03-21 08:56:48.928: E/AndroidRuntime(26870): FATAL EXCEPTION: AsyncTask #3
03-21 08:56:48.928: E/AndroidRuntime(26870): java.lang.RuntimeException: An error occured while executing doInBackground()
03-21 08:56:48.928: E/AndroidRuntime(26870):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.lang.Thread.run(Thread.java:856)
03-21 08:56:48.928: E/AndroidRuntime(26870): Caused by: java.lang.NullPointerException
03-21 08:56:48.928: E/AndroidRuntime(26870):    at Dic.proj.pkg.notifService$check_last_asyn.doInBackground(notifService.java:251)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at Dic.proj.pkg.notifService$check_last_asyn.doInBackground(notifService.java:1)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-21 08:56:48.928: E/AndroidRuntime(26870):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-21 08:56:48.928: E/AndroidRuntime(26870):    ... 4 more 
```

我不知道为什么。但我有一个猜测。我的服务通过以下代码从主要活动开始：

```
 Intent service = new Intent(DictionaryActivity.this, notifService.class);
  DictionaryActivity.this.startService(service); 
```

我想我第一次通过打开主要活动来开始我的服务。然后第二次当我进入主要活动时，服务再次启动并且我的 Asyntasks 并行运行，这导致了这个错误......

有什么方法可以检查服务是否已经启动，然后不要再次启动它？我怎样才能解决我的问题？

# iphone - 希望日历成为 UITextView 的响应者

> ID：15540314
> 
> 赞同：0
> 
> 时间：2013-03-21T05:41:44.040
> 
> 标签：iphone, ios, calendar

我正在该应用程序中创建一个应用程序，其中我在 UITextView 中显示日期。并且应该从 UIDatepicker 中选择该文本，但是我想在用户开始编辑 textview 并从日历中选择日期时显示日历而不是 UIDatepicker，并且该日期将显示在 textview 中。我怎样才能做到这一点？苹果允许吗？代码会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:48:56.820

使用以下两个委托方法

```
 -(void)textViewDidBeginEditing:(UITextView *)textView 
 //type required code here to start date picket.

 -(void)textViewDidEndEditing:(UITextView *)textView
 //type required code here when user done with editing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:57:25.823

在委托方法中

```
 -(void)textViewDidBeginEditing:(UITextView *)textView {
     //show the calendar
} 
```

在日历的操作方法中，将日期设置`textView.text`为选定日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:58:27.477

你可以这样做：

```
NSString *stringDate=[self.textField text];
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];
NSDate *dateFromText=[dateFormatter dateFromString:stringDate];

[self.datePicker setDate:dateFromText]; 
```

**注意：您需要验证用户输入的日期应为特定格式。** 从按钮操作或委托中调用上述代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:20:37.767

对于显示弹出日历，您可以使用[PMCalendar](https://github.com/kovpas/PMCalendar)和[OCCalendar](https://github.com/ocrickard/OCCalendar)链接。这将像这样显示日历：

![在此处输入图像描述](../Images/bb477a359105d3c513111f0d7141caba.png)

还有这个 ：

![在此处输入图像描述](../Images/991af81f4abfc2ac1ad110e9aab03333.png)

# java - JFrame 在连续运行代码时冻结

> ID：15540319
> 
> 赞同：0
> 
> 时间：2013-03-21T05:42:10.210
> 
> 标签：java, multithreading, swing, event-dispatch-thread

我在使用 时遇到问题，`JFrame`在连续运行代码时会冻结。下面是我的代码：

1.  单击时`btnRun`，我调用了该函数`MainLoop()`：

    ```
    ActionListener btnRun_Click = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            MainLoop();
        }
    }; 
    ```

2.  实施`MainLoop()`：

    ```
    void MainLoop()
    {
        Hopper = new CHopper(this);
        System.out.println(Hopper);
        btnRun.setEnabled(false);
        textBox1.setText("");
        Hopper.getM_cmd().ComPort = helpers.Global.ComPort;
        Hopper.getM_cmd().SSPAddress = helpers.Global.SSPAddress;
        Hopper.getM_cmd().Timeout = 2000;
        Hopper.getM_cmd().RetryLevel = 3;

        System.out.println("In MainLoop: " + Hopper);

        // First connect to the validator
        if (ConnectToValidator(10, 3))
        {
            btnHalt.setEnabled(true);
            Running = true;

            textBox1.append("\r\nPoll Loop\r\n"
                    + "*********************************\r\n");
        }

        // This loop won't run until the validator is connected
        while (Running)
        {
            // poll the validator
            if (!Hopper.DoPoll(textBox1))
            {
                // If the poll fails, try to reconnect
                textBox1.append("Attempting to reconnect...\r\n");
                if (!ConnectToValidator(10, 3))
                {
                    // If it fails after 5 attempts, exit the loop
                    Running = false;
                }
            }
            // tick the timer
                    // timer1.start();
            // update form
            UpdateUI();
            // setup dynamic elements of win form once
            if (!bFormSetup)
            {
                SetupFormLayout();
                bFormSetup = true;
            }

        }

        //close com port
        Hopper.getM_eSSP().CloseComPort();

        btnRun.setEnabled(true);
        btnHalt.setEnabled(false);
    } 
    ```

3.  在`MainLoop()`函数中，while 循环一直在运行，直到 Running 为 true 问题是，如果我想停止该 while 循环，我必须将 Running 设置为 false，这是在另一个按钮上完成的`btnHalt`：

    ```
    ActionListener btnHalt_Click = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            textBox1.append("Poll loop stopped\r\n");
            System.out.println("Hoper Stopped");
            Running = false;
        }
    }; 
    ```

但`btnHalt`没有响应，整个框架被冻结，也没有显示任何日志`textarea`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:47:19.260

Swing 是一个单线程框架。也就是说，有一个线程负责将所有事件分派给所有组件，包括重绘请求。

任何停止/阻止此线程的操作都会导致您的 UI “挂起”。

Swing 的第一条规则，**永远不要**在 Event Dispatching Thread 上运行任何阻塞或耗时的任务，而应该使用后台线程。

这会让你陷入 Swing 的第二条规则。切勿在 EDT 之外创建、修改或与任何 UI 组件交互。

有多种方法可以解决此问题。您可以使用`SwingUtilities.invokeLater`或`SwingWorker`.

`SwingWorker`通常更容易，因为它提供了许多简单易用的方法，可以自动重新同步对 EDT 的调用。

阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

**更新**

只是让你明白;）

您的`MainLoop`方法不应该在 EDT 的上下文中执行，这非常糟糕。

此外，您不应与除 EDT 之外的任何线程中的任何 UI 组件进行交互。

# r - 预处理或后处理 roxygen 片段

> ID：15540321
> 
> 赞同：68
> 
> 时间：2013-03-21T05:42:14.930
> 
> 标签：r, roxygen2

是否有某种机制可以让我转换 roxygen 看到的评论，最好是在它进行 roxygen->rd 转换之前？

例如，假设我有：

```
#' My function. Does stuff with numbers.
#'
#' This takes an input `x` and does something with it.
#' @param x a number.
myFunction <- function (x) {
} 
```

现在，假设我想在 roxygen 解析注释之前对注释进行一些转换，例如将反引号中的所有实例替换为`\code{}`. IE：

```
preprocess <- function (txt) {
    gsub('`([^ ]+)`', '\\\\code{\\1}', txt)
}
# cat(preprocess('Takes an input `x` and does something with it'.))
# Takes an input \code{x} and does something with it. 
```

我可以`preprocess`以某种方式输入 roxygen，以便它在 doclet 之前（或在这种情况下可以工作）roxygen 生成文档之前在 doclet 上运行它？

我不想在我的`.r`文件中进行永久查找替换。正如您可能从我的示例中猜到的那样，我的目标是在我的 roxygen 注释中提供一些基本的降价支持，因此希望保持我的`.r`文件原样以保持可读性（并以`\code{..}`编程方式插入内容）。

我是否应该编写自己的版本，在我的文件中所有检测到的 roxygen 样式注释上`roxygenise`运行`preprocess`，将它们临时保存在某个地方，然后在这些上运行*实际* `roxygenise`版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T00:16:26.350

几年后重新审视这一点，看起来 Roxygen 具有`register.preref.parsers`一个可以用来将自己的解析器注入 roxygen 的功能。一个这样的用途是有前途的[maxygen 包](https://github.com/gaborcsardi/maxygen)（markdown + roxygen = maxygen），它是 roxygen 注释的降价处理的一个非常巧妙的实现（尽管仅适用于 CommonMark 规范），您可以看到它是如何在该包的[macument中使用的功能](https://github.com/gaborcsardi/maxygen/blob/master/R/package.R)。我热切地等待“pandoc + roxygen = pandoxygen”...... :)

# javascript - 将内部 var 的范围扩展到另一个函数

> ID：15540325
> 
> 赞同：2
> 
> 时间：2013-03-21T05:42:59.937
> 
> 标签：javascript, scope

我敢肯定你已经经历过很多次了，但我想不出一个真正适合我需要的线女巫。

如何让 var inner 在outertwo 中工作？

```
function outerOne(){

/* do something*/

    var inner = function(){
            return true 
    }; inner();

};
outerOne()

function outerTwo(){
    if (inner==true)
/* do something*/
};
outerTwo(); 
```

请注意，我知道可以在外部声明 var x 以使其全局化。但我想要实现的是从函数内部将 var 移出范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:49:04.577

你有没有尝试过：

```
var x;
function outerOne(){

    /* do something*/

    var inner = function(){
        x = 5
        console.log(x + "  Works in inner()");       
    }; 
    inner();

    console.log(x + "  Works in outerOne()");
};
outerOne();

function outerTwo(){
    console.log(x + "  Works in outerTwo()");
};
outerTwo(); 
```

函数只与在其父作用域中声明的变量共享作用域。

**编辑**

为了完整起见，我可能会补充一点，没有什么能阻止您从函数中返回值：

```
function outerOne(){

    /* do something*/

    var inner = function(){
        var x = 5
        console.log(x + "  Works in inner()");
        return x;       
    }; 
    var x1 = inner();

    console.log(x1 + "  Works in outerOne()");
    return x1;
};
var x2 = outerOne();

function outerTwo(){
    console.log(x2 + "  Works in outerTwo()");
};
outerTwo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:47:45.063

也许您可以将代码重组为这样的

```
var obj = 
    {
        outerOne : function(){return true;//or whatever logic you need here
                          },

        outerTwo : function(){  
           if(this.outerOne() === true){
               //do something
           }
        }
    }

    obj.outerTwo(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T05:58:23.390

将您的代码包装在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中。并将内部设置为顶部的未定义变量。

```
(function(){
var inner;

  function outerOne(){
  /* do something*/

      inner = function(){
         return true 
      }; inner();
  };
  outerOne()

  function outerTwo(){
      if (inner==true){
        //inner has been set to true, do something
      }
      else{
        //Inner has not been set to true, do something else
      }
  };
  outerTwo();

})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T05:50:26.300

使变量“x”成为全局外部函数。

```
var x = 0; 
function outerOne(){   
 //code block

var inner = function(){
        x = 5
       console.log(x + "  Works in inner()");       
}; inner();
console.log(x + "  Works in outerOne()");
};
outerOne()

function outerTwo(){
console.log(x + "  Works in outerTwo()");
};
outerTwo(); 
```

# javascript - Javascript select() 值

> ID：15540333
> 
> 赞同：0
> 
> 时间：2013-03-21T05:43:58.223
> 
> 标签：javascript, forms, select, focus, numeric

我相信这非常容易，但由于某种原因，我无法弄清楚这一点。

我需要在页面上创建一个包含以下字段和规则的表单。如果用户提交了表单但任何字段的规则都被破坏，则必须执行列出的行为以告知用户。我不允许使用 jQuery。Field01 & Field02 是一个盒子。Field03 & Field04 是一个盒子。

*   Field01：“用户名”- Rule01：不能为空，Behavior01：使用 focus() 将焦点放在它上面。
*   Field02：“用户名”- Rule02：不能为空，Behavior02：提醒用户“需要用户名”。
*   Field03：“Birthyear” - Rule03：必须是数字，Behavior03：使用 select() 选择值。
*   Field04：“Birthyear” - Rule04：必须在 1900 - 2012 之间，Behaviour04：将 Birthyear 文本框背景颜色变为黄色。

到目前为止，这就是我所拥有的……在 Field03 和 Field04 中挣扎。

有谁知道如何解决这个问题？

HTML：

```
<!DOCTYPE html>

<html>
    <head>
        <script defer="defer" type="text/javascript" src="dawid_spamer_Assign01.js"></script>

    </head>
    <body>

        <div id="div1">
            <form name="myForm" action="demo_form.php" onsubmit="return validateForm()" method="post">
            Username: <input type="text" id="username" name="username"><br>       
            Birth Year: <input type="select" id="birthYear" name="birthYear"><br><br>
             <input type="submit"  value="Submit">

            </form></div>

        <div id="div2">
            <img src="cat.jpg"    id="im1" name="image1"/>
            <img src="dog.jpg"    id="im2" name="image2"/>
            <img src="fish.jpg"   id="im3" name="image3" class='double'/>
        </div></body></html> 
```

JS 在单独的文件中：

```
document.getElementById("username").focus(); // focus on text box 

function validateForm(){
var x=document.forms["myForm"]["username"].value;
if (x==""){
    alert("Username Required!");
            // focus on text box
    document.getElementById("username").focus();  
    return false; // validation failed
}else{
    return true; // validation success  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:54:09.153

如果提供的值不是数字，我假设必须突出显示 BirthYear 字段。这可以使用JavaScript 提供的[select() 方法来完成。](http://www.w3schools.com/jsref/met_text_select.asp)

使用[isNaN() 方法](http://www.w3schools.com/jsref/jsref_isnan.asp)检查提供的值是否为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:58:31.873

尝试

```
document.getElementById("username").focus(); // focus on text box

function validateForm() {
    var x = document.forms["myForm"]["username"].value;
    if (x == "") {
        alert("Username Required!");
        // focus on text box
        document.getElementById("username").focus();
        return false; // validation failed
    }

    var dob = document.forms["myForm"]["birthYear"];
    var y = dob.value;
    if(!(/^\d+$/.test(y))){
        alert('must be numert');
        dob.select();
        return false;
    }

    return true;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/g7ntQ/)

# node.js - npm 安装不工作

> ID：15540338
> 
> 赞同：1
> 
> 时间：2013-03-21T05:44:56.743
> 
> 标签：node.js, npm

我刚开始学习 node.js，我已经安装了 node.js 和 npm 模块管理器。我创建了一个 package.json 文件，并从根目录 iam 尝试执行 npm install 命令，而不是创建 npm_modules 文件夹，它会引发如下错误：

```
C:\Users\username\Desktop\nodetest>npm install
npm WARN package.json backbone-library@0.0.1 No README.md file found!
npm http GET https://registry.npmjs.org/mongoose
npm http GET https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/path
npm http GET https://registry.npmjs.org/path
npm http GET https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/mongoose
npm http GET https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/path
npm http GET https://registry.npmjs.org/mongoose
npm ERR! Error: connect ETIMEDOUT
npm ERR!     at errnoException (net.js:863:11)
npm ERR!     at Object.afterConnect [as oncomplete] (net.js:854:19)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "D:\\Program Files\\nodejs\\\\node.exe" "D:\\Program Files\\no
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install"
npm ERR! cwd C:\Users\username\Desktop\nodetest
npm ERR! node -v v0.10.0
npm ERR! npm -v 1.2.14
npm ERR! syscall connect
npm ERR! code ETIMEDOUT
npm ERR! errno ETIMEDOUT
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\username\Desktop\nodetest\npm-debug.log
npm ERR! not ok code 0 
```

我正在使用 Windows 7 操作系统。

有任何想法吗 ？

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T06:33:24.277

这可能会解决您的问题：

```
npm config set proxy proxy-url:port (http:\\proxy-name:port)

npm config set https-proxy proxy-url:port 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-13T15:13:53.850

这是我身边的一个卡住的步骤，

以下语法对我有用：

npm config**设置代理**http://myproxyserver:port

最好的祝福 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T21:56:11.030

您可能需要使用 Windows 的“运行方式”命令（相当于 *nix 的“sudo”命令）才能在您的机器上拥有正确的权限。

此链接应该会有所帮助：[https ://superuser.com/questions/42537/is-there-any-sudo-command-for-windows](https://superuser.com/questions/42537/is-there-any-sudo-command-for-windows)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T11:08:47.683

最后我才知道我公司的笔记本电脑有代理限制。一旦我获得了代理删除的批准，它就起作用了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-23T14:43:22.923

但是，在 npm install 中遇到代理问题的人仍然可以尝试以下方法。

转到 C:\Users\YourUserName
创建一个名为 .npmrc 的文件（不需要任何前缀名，只需 .npmrc）
在该文件中键入以下内容

proxy = username:password@ip:port（在用户名前添加 http://）

就是这样。它对我来说非常有用....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-19T00:12:16.450

traceroute 命令通常会告诉您*连接*失败的位置，并且在这种情况下会直接引导您访问公司代理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-03T12:09:35.217

添加到所选答案

a) "npm config set proxy proxy-url:port (http:\proxy-name:port)

b) npm config set https-proxy proxy-url:port"

确保将“http:\\”添加到您的代理名称中，并且从 npm 下载的软件包使用 ssl，因此请务必尝试第二个选项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-21T20:22:43.880

1.  如果您在代理后面工作，请配置它：

> npm config 设置代理[http://login:pass@host:port](http://login:pass@host:port)

2.  检查代理配置的值：

> npm 配置获取 http-proxy

3.  再次尝试获取您的包裹...

# javascript - 点击jquery插入一行

> ID：15540344
> 
> 赞同：1
> 
> 时间：2013-03-21T05:46:11.367
> 
> 标签：javascript, jquery

我正在努力弄清楚为什么我的代码不起作用。我有一个表格，其中包含一个文本字段、2 个复选框和一个连续添加按钮。我有 4 行加载，单击时我有一个超链接应该在表的末尾添加一个新行。我的代码是从第一行开始交替添加行。我的最后一行是我正在克隆的 4。单击链接1、4、2、4、3、4、4、4时我得到的序列

我不明白我在哪里犯了错误，在过去的 4-5 个小时里我一直在为此努力

```
<table id="setting">
<tr><td><input name="name_1" type="text" /></td>
<td><input type="checkbox" /> </td>
<td><input type="checkbox" /> </td>
<td><input type="button" /></td></tr>
<tr><td><input name="name_2" type="text" /></td>
<td><input type="checkbox" /> </td>
<td><input type="checkbox" /> </td>
<td><input type="button" /></td></tr>
<tr><td><input name="name_3" type="text" /></td>
<td><input type="checkbox" /> </td>
<td><input type="checkbox" /> </td>
<td><input type="button" /></td></tr>
<tr><td><input name="name_4" type="text" /></td>
<td><input type="checkbox" /> </td>
<td><input type="checkbox" /> </td>
<td><input type="button" /></td></tr>
</table>

$('#add').on("click", function(e) {
     e.preventDefault();
     e.stopPropagation();
     $clone = $('#settings tbody tr').filter(":last").clone(true).insertAfter('#settings tbody tr').filter(":last").val(''); 
```

我从stackoverflow中的一个问题尝试了下面的代码。这个对我不起作用，我不知道为什么

```
$('#settings tbody tr:last').clone(true).insertAfter('#settings tbody>tr:last');
$('#settings tbody tr:last').val(''); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:55:28.990

看到你`tbody`在标记中没有，但你在 jQuery 中使用：

```
<table id="setting">
   //<-----------------------missing tbody here
  <tr>
     <td><input name="name_1" type="text" /></td>
     .................

$('#<portlet:namespace />settings tbody tr:last')
      //--------------------------^^^^^------------its not there 
```

相反，你可以试试这个：

```
$('#<portlet:namespace />settings tr:last') 
```

* * *

## 更新：

```
 $('#settings tbody tr')
 //---------^-----------------this makes the mess 
```

选择了错误的 id`setting`来代替`settings`：

```
 $('#setting tr:last-child').clone().insertAfter('#setting tr:last'); 
```

### [检查这个小提琴](http://jsfiddle.net/GwTtD/1/)

## 另一个更新：

```
 $('#add').click(function (e) {
      var $cln = $('#setting tr:last-child').clone();
      $cln.find(':text').attr('id', 'textbox' + $('#setting tr:last-child').index()).val('');
      $cln.find(':checkbox').each(function (i, v) {
          $(this).attr('id', 'check' + $('#setting tr:last-child').index() + i).prop('checked', false);
      });
      $cln.find(':button').attr('id', 'btn' + $('#setting tr:last-child').index());
      $cln.insertAfter('#setting tr:last');
      console.log($cln.find(':text').attr('id') + '<===>' + $cln.find(':checkbox:eq(0)').attr('id') + '<===>' + $cln.find(':checkbox:eq(1)').attr('id'));
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:49:03.643

```
$('#setting tr:last-child').insertAfter('<tr><td><input type="button" /></td></tr>'); 
```

或者

```
$('#setting tr:last-child').after('<tr><td><input type="button" /></td></tr>'); 
```

.after() 描述：在匹配元素集中的每个元素之后插入由参数指定的内容。

检查这个小提琴：[jsfiddle](http://jsfiddle.net/BectZ/3/)和[更新的小提琴](http://jsfiddle.net/BectZ/4/)

```
$('#add').on("click", function (e) {
    e.preventDefault();
    e.stopPropagation();
    $('#setting tr:last-child').after('<tr><td><input name="name_4" type="text" /></td>td><input type="checkbox" /> </td><td><input type="checkbox" /> </td><td><input type="button" /></td></tr>');
    return false;
}); 
```

# c++ - C/C++ 中的指针和数组

> ID：15540345
> 
> 赞同：0
> 
> 时间：2013-03-21T05:46:18.567
> 
> 标签：c++, c, arrays, pointers

嘿伙计们，我正在尝试了解指针和数组的一些理论知识。我希望有人能重申我对指针和数组概念的一些怀疑。

假设我有这样的事情

```
int ia[] = {0,1,2,3,4,5};
ia[2];  // =2

int* ip = &ia[0]; // pointer ip gets the address of element 0 in array ia
ip[2]; // ??
ip[2] = 42; // 
```

大部分代码显然是理论上的，但我对最后两行有点不确定。首先是说 ip[2] 与说 ip 现在指向数组中的第二个元素一样吗？是否相当于说 *ip = ia[2] ？

我也对最后一行感到困惑。ip[2] = 42；所以ip指向的对象的第二个元素，那个地址的值是42？或者这是一种解除引用的数组表示法？我只是对发生的事情有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:05:35.150

`ia[n]`是不同的写法`*(ia+n)`，所以`int* ip = &ia[0]`是一样的`int *ip = ia`。

您分配`ia`给`ip`. 这当然也`ip[n] == ia[n]`适用于 的所有值`n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:04:11.270

当你写`a[i]`它时，它被翻译为`*(a+i)`基地址（基本上是一个指针）

同样对于数组，基地址与第一个元素的地址`a[0]`相同，因此地址与`a`[ie `a = &a[0]`]相同

因此，`ip[2] = 42;`转换为`*(ip+2) = 42` 另外，* 在该地址给出值`ip[2] = 42`意味着`*(ip+2) = 42`即在该位置的值`(ip+2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T06:06:57.470

下面创建一个名为 ia 的数组，并将大括号中的数字存储在数组中：

```
int ia[] = {0,1,2,3,4,5}; 
```

以下内容实际上什么都不做：

```
ia[2]; 
```

但是，如果我采用上述语句并进行如下更改，它会将值 2 分配给整数 t。这是因为 2 是 ia 中的第三个元素，而 ia[2] 引用了 ia 中的第三个元素。

```
t = ia[2]; 
```

如果您最初的 ia 声明是

```
int ia[] = {0,1,15,3,4,5}; 
```

那么你会将 t 分配给 15。

下面将 ia 中索引 2 处的值更改为 42：

```
ip[2] = 42; 
```

现在，ia 由 {0,1,42,3,4,5} 组成。

这是因为 ia[2] 就像说 *(ia + 2)。如果将 ip 分配给 ia，则 ip 指向 ia 的第一个元素。

类似地，ip[2] 就像说 *(ip + 2)。因此，更改 ip[2] 将更改 ia[2]，它们引用相同的内存块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T09:20:14.777

`a[b]`与 完全相同`*(a + b)`。总是。So`ia[2]`等价于`*(ia + 2)`，并且`ip[2]`等价于`*(ip + 2)`。

然而，它比这更微妙，因为`ia`它`ip`有非常不同的类型。`ia`是数组类型；而是`ip`指针类型。所以它们不是“相同的”——它们甚至不是同一类型的东西。这就像苹果和橘子。

在某些上下文中使用的数组表达式可以隐式转换为指向其第一个元素的指针。如果你写了 ,`int *ip = ia;`那将是一个隐式转换——`ip`现在指向 . 的第一个元素`ia`。和你写的一模一样`int *ip = &ia[0];`

同样，当您编写类似`*(ia + 2)`的内容时，在这种情况下，数组也被隐式转换为指向其第一个元素的指针，有点像`*(&ia[0] + 2)`。由于我们知道它`ip`指向 的第一个元素`ia`，因此当您`ia`在任何将其转换为指针的上下文中使用时，它与使用 的值相同`ip`。这就是为什么`ia[2]`和`ip[2]`工作一样。

# ios - 阻止执行iOS并分配变量

> ID：15540348
> 
> 赞同：0
> 
> 时间：2013-03-21T05:47:00.790
> 
> 标签：ios, objective-c-blocks

我正在使用 drupal-ios-sdk（基于 AFNetworking），我的应用程序有一个使用情节提要创建的选项卡栏控制器。加载其中一个视图控制器时，我正在`initWithCoder`使用 drupal-ios-sdk 创建一个请求，并在`success block`. 稍后`viewDidLoad`我尝试打印此变量，并且我对为什么必须在成功块中保留实例变量感兴趣，即使我使用自动释放定义了变量。

这不是ARC！

# 在成功块中不使用保留

## 我的 VC.h

```
@interface AboutViewController : UIViewController {
    @private
    NSDictionary *response;
    NSString *aboutPageHTML;

}
@end 
```

## 我的VC.m

```
-(id) initWithCoder:(NSCoder *)aDecoder {
if ((self = [super initWithCoder:aDecoder])) {
    NSDictionary *viewData = [NSMutableDictionary new];

    [viewData setValue:@"aboutse" forKey:@"view_name"];

    aboutPageHTML = [[[NSString alloc]init] autorelease];

    void(^successBlock)(AFHTTPRequestOperation*, id) =
    ^(AFHTTPRequestOperation *operation, id responseObject) {
        response = [responseObject copy];
        aboutPageHTML = [response valueForKey:@"body"];
        NSLog(@"%s - %@", __PRETTY_FUNCTION__, aboutPageHTML);

        [aboutPageHTML retain]; // critical!

    };

    [DIOSView viewGet:viewData success:successBlock
              failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                  NSLog(@"%s, %@", __PRETTY_FUNCTION__, error);            
    }];

}
return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    NSLog(@"%s - %@", __PRETTY_FUNCTION__, aboutPageHTML);
    NSLog(@"%s - %f %f", __PRETTY_FUNCTION__, self.view.bounds.size.width, self.view.bounds.size.height);  
} 
```

## 编辑：

声明变量`__block`似乎没有什么区别。怎么会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:06:14.010

这段代码有很多问题。`aboutPageHTML`是一个您想要强引用的实例变量（即应该保留）。在`aboutPageHTML = [[[NSString alloc]init] autorelease];`你没有保持对它的强烈引用。这是不正确的。

稍后，在您的成功块中（它是一个块无关紧要；它只是稍后运行的任何代码），您`aboutPageHTML = [response valueForKey:@"body"]; [aboutPageHTML retain];`会保留存储在该实例变量中的对象。因此，您在两个地方与同一实例变量的内存管理不一致。

此外，当您将另一个值分配给强引用变量时，您应该确保释放以前的值，您没有这样做。这适用于`aboutPageHTML`和`response`。

最后， 指向的对象`viewData`被泄露，因为你对它有一个强引用（你使用`new`）但不释放它。

此外，您应该使用`setObject:forKey:`和`objectForKey:`作为字典。当你想要一个可以更改的字典时，你需要声明一个可变字典。（这可能是您（错误地）决定使用的原因`setValue:forKey:`）

所以总而言之，这更像是：

```
-(id) initWithCoder:(NSCoder *)aDecoder {
if ((self = [super initWithCoder:aDecoder])) {
    NSMutableDictionary *viewData = [NSMutableDictionary new];

    [viewData setObject:@"aboutse" forKey:@"view_name"];

    aboutPageHTML = [[NSString alloc] init];

    void(^successBlock)(AFHTTPRequestOperation*, id) =
    ^(AFHTTPRequestOperation *operation, id responseObject) {
        [response release];
        response = [responseObject copy];
        [aboutPageHTML release];
        aboutPageHTML = [[response objectForKey:@"body"] retain];
    };

    [DIOSView viewGet:viewData success:successBlock
              failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                  NSLog(@"%s, %@", __PRETTY_FUNCTION__, error);            
    }];
    [viewData release];
}
return self;
} 
```

# python - Python 3.3：使用定时器捕获 HTTPError

> ID：15540349
> 
> 赞同：1
> 
> 时间：2013-03-21T05:47:04.017
> 
> 标签：python

我一直在尝试研究python，我想尝试捕捉服务器超时错误（以防我的互联网连接中断或其他情况）并添加一个计时器，使进程停止X秒（在我下面的代码中是2 秒）然后尝试再次继续该过程。尽管我相信我的逻辑是正确的（如果我错了，请纠正我），但我收到一个错误消息

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "C:\Python33\lib\threading.py", line 639, in _bootstrap_inner
    self.run()
  File "C:\Python33\lib\threading.py", line 825, in run
    self.function(*self.args, **self.kwargs)
TypeError: 'NoneType' object is not callable 
```

我不太明白为什么我的计时器似乎触发和错误。这是我的代码：

```
import urllib.request
from threading import Timer

req = urllib.request.Request('http://www.nowebsitecontainsthisaddress.com')

def ServerTimeOut(e):
    timer_rest = Timer(2.0, print('Time Out Error:'))
    timer_rest.start()
    print (e.reason)

    while timer_rest.is_alive():
        pass

while True:

    try:
        url = urllib.request.urlopen(req)
        break
    except urllib.error.HTTPError as e:
        ServerTimeOut(e)
        req = urllib.request.Request('http://www.google.com')
    except urllib.error.URLError as e:
        ServerTimeOut(e)
        req = urllib.request.Request('http://www.google.com') 
```

使用的操作系统是windows7

更新：嗨，伙计们，我尝试将我的代码调整为这个，并且不再返回错误。我确实希望有人可以让我了解为什么会引发错误。谢谢^^，

```
import urllib.request
from threading import Timer

req = urllib.request.Request('http://www.nowebsitecontainsthisaddress.com')

def printMessage():
    print('Time Out Error:')

def ServerTimeOut(e):
    timer_rest = Timer(2.0, printMessage)
    timer_rest.start()

    print (e.reason)

    while timer_rest.is_alive():
        pass

while True:

    try:
        url = urllib.request.urlopen(req)
        break
    except urllib.error.HTTPError as e:
        ServerTimeOut(e)
        req = urllib.request.Request('http://www.google.com')
    except urllib.error.URLError as e:
        ServerTimeOut(e)
        req = urllib.request.Request('http://www.google.com') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:20:14.437

您在构造 Timer 时调用 print 函数。构建 Timer 的正确方法是`Timer(2.0, print, 'Time Out Error')`.

# python - 应用程序应如何向现有授权添加/删除范围？

> ID：15540360
> 
> 赞同：1
> 
> 时间：2013-03-21T05:48:06.293
> 
> 标签：python, google-app-engine, google-drive-api, google-oauth, oauth2client

尝试通过 scopes 参数使用 oauth2client 的 OAuth2DecoratorFromClientSecrets 添加其他范围。

我相信应用程序的用户更愿意逐步扩展权限；根据需要和信任形式...

当应用程序具有现有授权时，添加/扩展/删除范围的最佳方法是什么？撤销并重新授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:44:06.393

对不起，你不能那样做。您将需要重新授权用户。我同意增量添加范围会很好，但是您仍然需要显示授权页面，所以我认为这样做不会有太多收获。

# php - 如何在 codeigniter 中发布动态输入标签

> ID：15540362
> 
> 赞同：1
> 
> 时间：2013-03-21T05:48:18.257
> 
> 标签：php, javascript, html, codeigniter

我正面临一个严重的困境，想知道这怎么可能。我有一个内置在 codeigniter 框架中的表单。在表单的末尾是一个输入标签，它接受一个数字并附加一个新表单，其中包含精确的输入标签行作为最后一个输入标签的值。我已经使用javascript完成了这个，代码是

```
$('#formName9').on('change', function() {
       var selected = $(this).val();
       $('#subForm').empty();
       $("#subForm").append('<table border="" style="border:none; background:#f2f2f1; margin-bottom:10px; border-collapse: collapse; margin-top: 25px; box-shadow: 9px 4px 8px rgba(50, 50, 50, 0.75);" cellspacing="0" cellpadding="0">            <tr>              <td style="text-align: center; width: 30px; border-width: 0px;"><img src="<?php echo  base_url(); ?>assets/img/icon_house.png" ></td>              <td style="text-align: center; border-width: 0px;"><img src="<?php echo  base_url(); ?>assets/img/table_divider.png" /></td>              <td style="text-align: center; width: 200px; border-width: 0px;"><strong>Unit Name</strong></td>              <td style="text-align: center; border-width: 0px;"><img src="<?php echo  base_url(); ?>assets/img/table_divider.png" /></td>              <td style="text-align: center; width: 250px; border-width: 0px;" ><strong>Owner Name</strong></td>              <td style="text-align: center; border-width: 0px;"><img src="<?php echo  base_url(); ?>assets/img/table_divider.png" /></td>              <td style="text-align: center;width: 150px; border-width: 0px;"><strong>Owner Salutation</strong></td> </tr> </table>');
       for (var i=1; i<=selected; i++) {
           $('#subForm').append('<div style="float: left; padding-left: 13px; padding-right: 12px; padding-top: 7px; margin-top: 0px;">'+i+'</div><input type="text" name="unitName" id="unitName'+i+'" style="width:189px;" required /><input type="text" name="ownerName'+i+'" id="ownerName'+i+'" style="width:241px;" /><input type="text" name="salutation'+i+'" id="salutation'+i+'" style="width:137px;" /><br />');
       }
    }); 
```

你可以看到我根据循环对所有附加的标签使用了不同的命名约定。

现在需要发布这些值以便 PHP[SERVER] 进行进一步的工作，但是我将如何发布这些动态值？我尝试了以下操作，但这只是挂起我的本地服务器并且没有进一步

```
$ownerName = array();
                    for ($i=0; $i<=$blockUnits ; $i+1) { 
                        $ownerName[$i] = "ownerName".$i;
                        $this->input->post('ownerName[$i]');
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:25:43.513

我认为如果你在数组中发布你的值应该会更容易......

例子..

```
 <input type="text" name="ownerName[]" id="ownerName'+i+'" style="width:241px;" /> 
```

并在控制器中循环...

```
foreach($this->input->post('ownerName') as test){
.....
} 
```

对其他人类似

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:30:46.040

在添加新的输入文本框时，为这些字段命名，如下所示。

例如，如果用户想要添加 5 个字段，那么输出将变成类似

```
<input type="text" name="ownerName[]" />
<input type="text" name="ownerName[]" />
<input type="text" name="ownerName[]" />
<input type="text" name="ownerName[]" />
<input type="text" name="ownerName[]" /> 
```

然后在 PHP 中，您可以获取这些字段的值，例如

```
$ownerNames = $_POST['ownerName'];

foreach( $ownerNames as $ownerName ) {
    echo "Owner Name is : " . $ownerName;
} 
```

当您在 CodeIgniter 中尝试时，代码将如下所示（获取 post 变量）

```
$ownerNames = $this->input->post('ownerName');

foreach( $ownerNames as $ownerName ) {
    echo "Owner Name is : " . $ownerName;
} 
```

# bash - 如何将 ls 的输出发送到将参数分配给 case 语句的 for 循环？

> ID：15540365
> 
> 赞同：-1
> 
> 时间：2013-03-21T05:48:27.293
> 
> 标签：bash, for-loop

伪代码将是

```
for OUTPUT in $(ls -d */)
do
case $OUTPUT in
1 ) $OUTPUT ;;
esac
done
*) echo -e "Oops!!! Please select a valid number"; 
```

不确定这是否可能，或者这是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:53:48.510

首先，不要解析`ls`. 只需使用 glob：

```
for OUTPUT in */ 
```

其次，阅读文档中有关`select`命令的部分。`bash`

# json - 如何在 JSON 对象中转换 JSON 数组

> ID：15540366
> 
> 赞同：0
> 
> 时间：2013-03-21T05:48:32.053
> 
> 标签：json

我有一个以下格式的 JSON 数组，我想将其转换为（键，值）对中的 JSON 对象。由于我是 JSON 新手，我不知道如何实现这一点。

```
{
    "id": [
        "100",
        "101",
        "102"
    ],
    "Name": [
        "ajit",
        "amol",
        "kiran"
    ],
    "sex": [
        "Male",
        "Male",
        "Male"
    ]
} 
```

我想在上面转换成这样的格式

```
[
    {
        "id": "100",
        "Name": "ajit",
        "Sex": "Male"
    },
    {
        "id": "101",
        "Name": "amol",
        "Sex": "Male"
    },
    {
        "id": "102",
        "Name": "kiran",
        "Sex": "Male"
    }
] 
```

你们能分享你对如何做到这一点的宝贵想法吗？

阿吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:13:59.683

假设很多事情都适用于这个例子， var arrayOfObjects = [] ;

```
/**
 * @params Object obj formated like the first one
 */
var i = 0,
    arrayOfObjects = [] ;

for( prop in obj ) {
    if ( prop instanceof Array ) {
         for( i = 0 ; i < obj[prop].length ; ++i ) {
              if ( typeof arrayOfObjects[i] !== undefined ) {
                 arrayOfObjects[i][prop] = obj[prop][i] ;
              } else {
                 var newObj = {} ;
                 newObj[prop] = obj[prop][i] ;
                 arrayOfObjects.push(newObj) ;
              }
         }
    }
} 
```

# php - 尝试从数据库中获取值时，Android 应用程序因 WindowManager 错误而崩溃

> ID：15540369
> 
> 赞同：0
> 
> 时间：2013-03-21T05:48:54.800
> 
> 标签：php, android, mysql

基本上，我有一个 Android 应用程序和一个 MySQL 数据库，我正在使用 PHP 尝试使用其中的条目填充 ListView。现在由于某种原因，以下代码似乎崩溃了，Logcat 说 WindowManager 有问题

代码是：

**AllComediansActivity.java：**

```
package com.example.connecttest;

public class AllComediansActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String,String>> comedianList;

    // url to get all comedian names
    private static String url_all_comedians = "http://localhost/connect/get_all_comedians.php";

    //JSON Node Names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_COMEDIAN = "comedian";
    private static final String TAG_PID = "id";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray comedians = null;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_comedians);

        //Hashmap for ListView
        comedianList = new ArrayList<HashMap<String, String>>();

        //Loading comedians in background thread
        new LoadAllComedians().execute();

        // Get Listview
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener(){

            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                // getting values from selected ListItem
                String pid = ((TextView) view.findViewById(R.id.id)).getText().toString();

                //
            }

        });
    }

    class LoadAllComedians extends AsyncTask<String, String, String>{

        // Before Starting background thread show Progress Dialog
        protected void onPreExecute(){
            super.onPreExecute();
            pDialog = new ProgressDialog(AllComediansActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        @Override
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // Getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_comedians, "GET", params);

            //Check log cat for JSON response
            Log.d("All Comedians: ", json.toString());

            try{
                //Checking for SUCCESS TAG in JSON
                int success = json.getInt(TAG_SUCCESS);

                if(success == 1){
                    // Comedians found
                    // Getting Array of Comedians
                    comedians = json.getJSONArray(TAG_COMEDIAN);

                    // Looping through All Comedians
                    for(int i = 0; i < comedians.length(); i++){
                        JSONObject c = comedians.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);

                        // Creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // Adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME,name);

                        // adding HashList to ArrayList
                        comedianList.add(map);                      
                    }
                } else {
                    // no products found
                    // Launch Add New Comedian Activity
                    Intent i = new Intent(getApplicationContext(), NewComedianActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e){
                e.printStackTrace();
            }

            return null;
        }

        // After Completing background task Dismiss the progress dialog

        protected void onPostExecute(String file_url){
            // dismiss the dialog after getting all comedians
            pDialog.dismiss();
            // Updating UI from Background Thread
            runOnUiThread(new Runnable(){
                public void run(){
                    // Updating JSON data into ListView
                    ListAdapter adapter = new SimpleAdapter(AllComediansActivity.this, comedianList, R.layout.list_item, new String[] {TAG_PID, TAG_NAME}, new int[] {R.id.id,R.id.name});
                    setListAdapter(adapter);
                }
            });
        }

    }

} 
```

为了简洁起见，我刚刚删除了正确的导入。

它引用的 JSONParser 是：

**JSONParser.java：**

```
package com.example.connecttest;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

当我在浏览器中导航到 PHP 文件时，它会返回以下信息：

```
{"comedian":[{"id":"1","name":"Mike Coombes","address":"Test","email":"test@test.com","tel":"xxxxxxxx"},{"id":"2","name":"Test","address":"Test","email":"Tester@test.com","tel":"xxxxxxx"}],"success":1} 
```

所以我的 PHP 正在正确查询数据库并使用 JSON 返回它。

现在调试程序表明它似乎达到了以下行：

```
 JSONObject json = jParser.makeHttpRequest(url_all_comedians, "GET", params); 
```

在它解开之前，我已经把头发拉了几个小时试图让它也能正常工作，但无济于事，我想知道人们是否可以帮助我解决这里的问题！

当问到我的 Logcat 错误是：

```
03-21 05:57:10.319: E/Buffer Error(3500): Error converting result java.lang.NullPointerException: lock == null
03-21 05:57:10.319: E/JSON Parser(3500): Error parsing data org.json.JSONException: End of input at character 0 of 
03-21 05:57:10.329: E/AndroidRuntime(3500): FATAL EXCEPTION: AsyncTask #1
03-21 05:57:10.329: E/AndroidRuntime(3500): java.lang.RuntimeException: An error occured while executing doInBackground()
03-21 05:57:10.329: E/AndroidRuntime(3500):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.lang.Thread.run(Thread.java:856)
03-21 05:57:10.329: E/AndroidRuntime(3500): Caused by: java.lang.NullPointerException
03-21 05:57:10.329: E/AndroidRuntime(3500):     at com.example.connecttest.AllComediansActivity$LoadAllComedians.doInBackground(AllComediansActivity.java:93)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at com.example.connecttest.AllComediansActivity$LoadAllComedians.doInBackground(AllComediansActivity.java:1)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-21 05:57:10.329: E/AndroidRuntime(3500):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-21 05:57:10.329: E/AndroidRuntime(3500):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:22:19.040

我设法让它工作最终有两个问题

将 localhost 切换到 10.0.2.2 并且必须向 URL 添加协议

权限也有错字，必须将其从用户权限更改为使用权限，现在一切正常

# java - 为 Java 代码创建 UML

> ID：15540371
> 
> 赞同：-4
> 
> 时间：2013-03-21T05:48:58.210
> 
> 标签：java, interface, uml, extends, interface-implementation

我必须为下面编写的两个 Java 程序/代码创建 UML 图。我的查询是：

*   接口的子类也是接口吗？
*   实现可运行接口的类也是接口吗？
*   方法/函数不能称为类的操作吗？
*   全局变量是类的唯一属性还是函数中的局部变量也可以这样调用？
*   在第二个程序中，作者正在向 Thread 构造函数发送一个对象。这是正确的吗？

旁白：有人可以为这两个程序绘制 UML 吗？我很难理解线程、接口和相关关键字，如扩展、实现。

***JAVA代码#1***

```
public class RunThreads
  {
    public static void main(String[] args)
      {
        SomeThread p1=new new SomeThread(1);
        p1.start();
        SomeThread p2=new new SomeThread(2);
        p2.start();
        SomeThread p3=new new SomeThread(3);
        p3.start();
      }
  } // end class RunThreads

public class SomeThread extends Thread {
  {
    int myID;
    SomeThread(int id) {
      this.myID=id;
    }
    public void run() {
      int i;
      for(i = 1; i < 11; i++)
        System.out.println("Thread" + myID + ": " + i);
    }
  } // end class SomeThread 
```

***JAVA代码#2***

```
public class RunThreads2
  {
    public static void main(String[] args)
      {
        Thread p1 = new Thread(new SomeThread2(1));
        p1.start();
        Thread p2 = new Thread(new SomeThread2(2));
        p2.start();
        Thread p1 = new Thread(new SomeThread2(3));
        p3.start();
      }
  } // end class RunThread2

class SomeThread2 implements Runnable {
  int myID;
  SomeThread2(int id) {
    this.myID = id;
  }
  public void run() {
    int i;
    for(i=1; i<11; i++)
      System.out.println("Thread " + myID + ": " + i);
    }
  } // end class SomeThread2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:13:26.100

> 接口的子类也是接口吗？

没有接口的子类之类的东西。您可以`extend`一个接口与另一个接口，也可以`implement`一个接口与一个类。

> 实现可运行接口的类也是接口吗？

不——这是一堂课。接口是用 定义的`interface`，而不是`class`。

> 方法/函数不能称为类的操作吗？

当然-方法/功能/操作-对我来说听起来像是合理的同义词。在内部，Java 将它们称为方法（参见[反射相关的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)）

> 全局变量是类的唯一属性还是函数中的局部变量也可以这样调用？

我假设您将类属性称为类实例拥有的对象/基元 - 在您的第一个示例中，这将`myID`在`SomeThread`类中。方法中的局部变量只能在该方法中访问（例如，`i`在`run`同一类中的方法中），而不是类属性。

> 在第二个程序中，作者正在向 Thread 构造函数发送一个对象。这是正确的吗？

是的; `new SomeThread2(3)`返回 的实例`SomeThread`，它也是一个对象。

> 有人可以为这两个程序绘制 UML 吗？

不见得。这听起来太像家庭作业了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T06:17:20.680

您可以使用 IBM 理性玫瑰软件为您的程序获取 UML 图（它不是免费版本）

或者如果你开发了编码，那么你应该知道逻辑，你可以使用[亿](http://www.edrawsoft.com/)图绘制 UML 图。

线程只能以两种方式使用

通过实现 Runnable 接口或扩展 Thread 类。

简单：如果你使用关键字 extends 那么你使用一个类

如果您使用关键字实现，那么您将使用接口。

# highcharts - HighStock 图表无法通过 SSL 即 https

> ID：15540372
> 
> 赞同：8
> 
> 时间：2013-03-21T05:48:58.530
> 
> 标签：highcharts, highstock

我有一个站点，它是一个安全站点，它是使用**https://**协议访问的。这个网站上有highchart。

当协议为**http://**时，highchart 运行良好。但是在安装安全证书后，它无法在任何浏览器中加载。

我已经导入了 HighStock 图表 js，如下所示。

然后我想到了将获取js的协议从**http://**改为**https://**如下图

在此之后，图表开始在 Internet Explorer 中正确呈现。

但图表仍然无法在谷歌 Chrome、Firefox 和 Safari 等中加载。

谁能告诉我在使用**https://**协议访问的站点上呈现/显示 HighStock 图表的正确方法。

导出和打印功能也应该可以工作。

这是一个非常紧迫的要求，因此我们将不胜感激。

提前致谢。

问候

索哈姆帕特尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:42:33.597

我遇到了同样的问题，我通过这样做删除了协议（http:）来解决它：

```
<script src="//www.myserver.com/js/HighStock/js/highstock.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:41:40.233

没有任何代码可看，很难判断，但一种选择是您使用 http 加载一些内容，而使用 https 加载其他内容。确保页面中的所有内容都使用 https，例如所有加载的脚本等。

# java - 错误-dalvik.system.PathClassLoader [data/app/com.my.appname-2.apk]

> ID：15540378
> 
> 赞同：3
> 
> 时间：2013-03-21T05:49:16.180
> 
> 标签：java, android

我搜索了很多类似的错误，但我没有得到解决方案。我一启动应用程序就收到此错误

```
03-21 10:33:08.100: E/AndroidRuntime(13098): FATAL EXCEPTION: main
03-21 10:33:08.100: E/AndroidRuntime(13098): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.airlife/com.example.airlife.MainActivity}: java.lang.ClassNotFoundException: com.example.airlife.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.airlife-2.apk]
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.os.Looper.loop(Looper.java:150)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread.main(ActivityThread.java:4389)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at java.lang.reflect.Method.invokeNative(Native Method)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at java.lang.reflect.Method.invoke(Method.java:507)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at dalvik.system.NativeStart.main(Native Method)
03-21 10:33:08.100: E/AndroidRuntime(13098): Caused by: java.lang.ClassNotFoundException: com.example.airlife.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.airlife-2.apk]
03-21 10:33:08.100: E/AndroidRuntime(13098):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
03-21 10:33:08.100: E/AndroidRuntime(13098):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1777)
03-21 10:33:08.100: E/AndroidRuntime(13098):    ... 11 more 
```

MainActivity.java 是这样的

```
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import android.os.Bundle;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Toast;

public class MainActivity extends MapActivity implements OnClickListener{

    private ImageButton mVid,mAgebtn,mWeightbtn,mPicbtn,mMsgbtn,mReqbtn,mHelibtn,mDocbtn,mContextbtn;

    private MapView mapView;

    private MyLocationOverlay myLocationOverlay;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
          mapView = (MapView)findViewById(R.id.webview);

          mapView.setBuiltInZoomControls(true);
          myLocationOverlay = new MyLocationOverlay(this, mapView);

          mapView.getOverlays().add(myLocationOverlay);
            mapView.postInvalidate();
            // call convenience method that zooms map on our location
            zoomToMyLocation();

        mAgebtn = (ImageButton) findViewById(R.id.imageView36);
        mWeightbtn = (ImageButton) findViewById(R.id.imageView4);
        mPicbtn = (ImageButton) findViewById(R.id.imageView5);
        mMsgbtn = (ImageButton) findViewById(R.id.imageView6);
        mReqbtn = (ImageButton) findViewById(R.id.imageView32);
        mHelibtn = (ImageButton) findViewById(R.id.btnsearch);
        mDocbtn = (ImageButton) findViewById(R.id.btnprovide);
        mVid = (ImageButton) findViewById(R.id.btnpost);
        mContextbtn = (ImageButton) findViewById(R.id.btnsettings);

         mAgebtn.setOnClickListener(this);
         mWeightbtn.setOnClickListener(this);
         mPicbtn.setOnClickListener(this);
         mMsgbtn.setOnClickListener(this);
         mReqbtn.setOnClickListener(this);
         mHelibtn.setOnClickListener(this);
         mDocbtn.setOnClickListener(this);
         mVid.setOnClickListener(this);
         mContextbtn.setOnClickListener(this);

    }

     @Override
        protected void onResume() {
            super.onResume();
            // when our activity resumes, we want to register for location updates
            myLocationOverlay.enableMyLocation();
        }

        @Override
        protected void onPause() {
            super.onPause();
            // when our activity pauses, we want to remove listening for location updates
            myLocationOverlay.disableMyLocation();
        }

        /**
         * This method zooms to the user's location with a zoom level of 10.
         */
        private void zoomToMyLocation() {
            GeoPoint myLocationGeoPoint = myLocationOverlay.getMyLocation();
            if(myLocationGeoPoint != null) {
                mapView.getController().animateTo(myLocationGeoPoint);
                mapView.getController().setZoom(10);
            }
            else {
                Toast.makeText(this, "Cannot determine location", Toast.LENGTH_SHORT).show();
            }
        }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    } 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.airlife"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

       <uses-permission android:name="android.permission.WRITE_SETTINGS" />
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher" 
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.airlife.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
          <activity android:name=".playvid" />
          <activity android:name=".Display" />
          <activity android:name=".Video" />
           <activity android:name=".Documents" />
                 <activity android:name=".Contact" />
                 <activity android:name=".FixedMyLocationOverlay" />

    </application>

</manifest> 
```

请告诉我为什么会收到此错误，以及如何解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:22:08.530

得到了解决方案。我在清单文件中错过了这段代码

```
 <uses-library android:name="com.google.android.maps"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:57:45.727

在 MainActivity 中找不到类异常。

我认为您使用了错误的包，或者您的 APK 没有您认为的内容。这是您的包名称。

```
com.example.airlife 
```

Maku 确保它在所有活动中都是进口的。

```
package com.example.airlife; 
```

并且不要忘记在清单文件中为每个新活动添加条目。

如果是这样，则在清单文件中进行此更改。无需提及您的软件包名称并删除 allowBackUp

```
<activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:20:35.553

如果不是，请尝试添加您正在使用的任何库文件。缺少库文件也可能导致此异常。看到这个链接

[java.lang.RuntimeException：SDK 更新后无法实例化活动 ComponentInfo](https://stackoverflow.com/questions/10624520/java-lang-runtimeexception-unable-to-instantiate-activity-componentinfo-after-s)

# linux - 以编程方式在 linux 中启动 GPSD 守护进程

> ID：15540385
> 
> 赞同：2
> 
> 时间：2013-03-21T05:49:47.877
> 
> 标签：linux, debian, daemon, startup, gpsd

我正在做一个项目，读取 GPS 加密狗输出的 GPS 值，需要以编程方式启动 gpsd 守护进程。

即我需要自动化以下命令；sudo gpsd /dev/ttyUSB0 -F /var/run/gpsd.sock

如上所述手动启动守护程序后，我能够通过代码读取坐标。但不知道如何通过他的代码启动守护进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-17T10:49:22.157

由于 gpsd 是一个守护进程，您只需将守护进程设置为在启动时自动运行。如何执行此操作取决于您拥有的启动系统。例如，如果你有 systemd，你必须写一个*gpsd.service*文件，像这样

```
[Unit]
Description=GPSd daemon service file

[Service]
Type=forking
User=root
Group=dialout
TimeoutStartSec=0
ExecStart=/usr/local/sbin/gpsd /dev/ttyUSB0 -F /var/run/gpsd.sock

[Install]
# Grouping mechanism that let systemd start groups of processes up at the same time
WantedBy=multi-user.target 
```

然后安装它，`/lib/systemd/system`最后使用以下命令

```
$ sudo systemctl enable gpsd
$ sudo systemctl start gpsd 
```

start 命令只是将 gpsd 作为 systemd 守护进程运行，而无需重新启动系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:29:59.033

for debian its just

```
dpkg-reconfigure gps 
```

# java - 如何在 mahout 中矢量化文本文件？

> ID：15540387
> 
> 赞同：5
> 
> 时间：2013-03-21T05:49:58.143
> 
> 标签：java, vectorization, mahout, bigdata

我有一个带有标签和推文的文本文件。

> ```
>  positive,I love this car
>     negative,I hate this book
>     positive,Good product. 
> ```

我需要将每一行转换为向量值。如果我使用`seq2sparse`命令意味着整个文档被转换为向量，但我需要将每一行转换为向量而不是整个文档。ex : key : positive value : vectorvalue(tweet) 我们如何在 mahout 中实现这一点？

* * *

/* 这是我所做的 */

```
 StringTokenizer str= new StringTokenizer(line,",");
            String label=str.nextToken();
            while (str.hasMoreTokens())
            {
            tweetline =str.nextToken();
            System.out.println("Tweetline"+tweetline);
            StringTokenizer words = new StringTokenizer(tweetline," ");
            while(words.hasMoreTokens()){
            featureList.add(words.nextToken());}
            }
            Vector unclassifiedInstanceVector = new RandomAccessSparseVector(tweetline.split(" ").length);
 FeatureVectorEncoder vectorEncoder = new AdaptiveWordValueEncoder(label);
            vectorEncoder.setProbes(1);
            System.out.println("Feature List: "+featureList);
            for (Object feature: featureList) {
                vectorEncoder.addToVector((String) feature, unclassifiedInstanceVector);
            }
            context.write(new Text("/"+label), new VectorWritable(unclassifiedInstanceVector)); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:23:16.067

您可以使用 SequenceFile.Writer 将其写入应用程序 hdfs 路径

```
 FS = FileSystem.get(HBaseConfiguration.create());
           String newPath =   "/foo/mahouttest/part-r-00000";
           Path newPathFile = new Path(newPath);
           Text key = new Text();
           VectorWritable value = new VectorWritable();
           SequenceFile.Writer writer = SequenceFile.createWriter(FS, conf, newPathFile,
                key.getClass(), value.getClass());
                 .....
           key.set("c/"+label);
           value.set(unclassifiedInstanceVector );
           writer.append(key,value); 
```

# java - 如何在我的简单记录保存应用程序中存储 TimePicker 数据？

> ID：15540395
> 
> 赞同：0
> 
> 时间：2013-03-21T05:50:42.417
> 
> 标签：java, android, eclipse, timepicker

我使用互联网上的各种资源创建了一个简单的记录保存应用程序。我能够成功存储文本数据 - 但是当我尝试合并 TimePicker 时，我最终导致整个应用程序崩溃。

任何关于如何实现的输入（以及任何代码示例）都非常感谢！

**数据输入 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<TimePicker
    android:id="@+id/timePicker1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

<EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
</LinearLayout>
</ScrollView> 
```

**数据输入JAVA：**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new  AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString());
      }
   }
} 
```

数据输出 XML：

```
<?xml version="1.0" encoding="utf-8"?>

 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
  android:layout_margin="5dp">

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/name_lbl"/>
     <TextView 
        android:id="@+id/nameText" 
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/cap_lbl"/>         
     <TextView 
        android:id="@+id/capText"
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/code_lbl"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>
  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Linked Users"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>
   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="Time Limit"/>         
     <TextView 
        android:id="@+id/timeText"
        style="@style/StyleText"/>         
  </TableRow>
</TableLayout> 
```

**数据输出JAVA：**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

**数据库连接器 JAVA：**

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

    public void open() throws SQLException 
    {
        //open database in reading/writing mode
        database = dbOpenHelper.getWritableDatabase();
    } 

    public void close() 
    {
        if (database != null)
        database.close();
    }      

    public void insertContact(String name, String cap, String code) {
        ContentValues newCon = new ContentValues();
        newCon.put("name", name);
        newCon.put("cap", cap);
        newCon.put("code", code);

        open();
        database.insert("country", null, newCon);
        close();
    }

    public void updateContact(long id, String name, String cap,String code) 
    {
        ContentValues editCon = new ContentValues();
        editCon.put("name", name);
        editCon.put("cap", cap);
        editCon.put("code", code);

        pen();
        database.update("country", editCon, "_id=" + id, null);
        close();
    }

    public Cursor getAllContacts() 
    {
        return database.query("country", new String[] {"_id",  "name"}, 
             null, null, null, null, "name");
    }

    public Cursor getOneContact(long id) 
    {
        return database.query("country", null, "_id=" + id, null, null, null, null);
    }

    public void deleteContact(long id) 
    {
        open(); 
        database.delete("country", "_id=" + id, null);
        close();
    }
} 
```

**数据库助手 Java：**

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseOpenHelper extends SQLiteOpenHelper {

    public DatabaseOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createQuery = "CREATE TABLE country (_id integer primary key autoincrement,name, cap, code);";                 
        db.execSQL(createQuery);        
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:18:45.203

在你创建表语句中定义一个类型

```
CREATE TABLE ...... dtField date, tmpName Text..... 
```

使用以下将日期保存为文本

```
//sample date format - 2013-03-21 13:12:00
android.text.format.DateFormat.format("yyyy-MM-dd hh:mm:ss", dtDate.getTime()) 
```

# android - 如何有效地处理设备主页按钮点击？

> ID：15540396
> 
> 赞同：0
> 
> 时间：2013-03-21T05:50:43.360
> 
> 标签：android, button, event-handling, click

我想在我的android应用程序中处理设备主页按钮点击。当谷歌搜索时，据说这个 [链接](http://nisha113a5.blogspot.in/2012/01/intercept-home-key-android.html#comment-form)有效。但我有一些疑问。

1.  所有的安卓版本都支持吗？如果不支持，哪些是支持的？

2.  使用 onAttachedToWindow() 方法是否存在任何后果？

3.  有没有办法处理主页按钮点击（除了这个）？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:02:24.007

这仅适用于以前的版本。但是从 os 版本 4.0 开始它不起作用（尽管在我的模拟器中这在 api 级别 11 之后不起作用，但我根据许多其他链接指向 ics）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T07:18:51.130

在其他帖子上找到了这个。

在较旧的 Android 版本上，这是有效的。但 Android 改变了这一点，因为他们说“Home Button 应该保留 Home Button”并且他们不希望任何人覆盖 Home 按钮。由于这个原因，您的代码不再工作。

如果您想在按下主页按钮时执行某些操作，请在 onPause 方法中执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T06:04:53.823

是的，它的工作请试试这个代码

```
@Override
public void onAttachedToWindow() {
super.onAttachedToWindow();
this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);           
} 
```

现在像这样处理关键事件，

```
@Override

public boolean onKeyDown(int keyCode, KeyEvent event) {

if(keyCode == KeyEvent.KEYCODE_HOME)
{
 Log.i("Home Button","Clicked");
}
if(keyCode==KeyEvent.KEYCODE_BACK)
{

    finish();
 }
   return false;
}; 
```

# wcf - 从单个自定义 WCF 服务主机工厂中的两个不同程序集使用 Unity 解析相同的接口

> ID：15540397
> 
> 赞同：0
> 
> 时间：2013-03-21T05:50:45.333
> 
> 标签：wcf, dependency-injection, unity-container

我正在构建一个 POC，旨在演示如何使用 Unity 从 WCF 服务中构建依赖层次结构，并使应用程序中的所有程序集完全松散耦合。

我所做的是创建以下类库：

数据访问层：
- 一个带有存储库接口的程序集。
- 一个实现了这个接口的程序集，它假装访问一个数据库。
- 一个实现了这个接口的程序集，它假装访问 XML 文档。

业务层：
- 一个带有业务对象接口的程序集。
- 一个实现了此接口的程序集，它在其构造函数中接收存储库接口。

服务层：
- 一个带有服务接口的组件。
- 一个实现了此接口的程序集，它在其构造函数上接收业务对象接口。

最后，我创建了一个包含服务主机工厂、服务主机和实例提供程序的程序集，它将负责创建依赖关系层次结构。代码如下所示：

```
public class UnityServiceHostFactory : ServiceHostFactory
{
    private readonly UnityContainer _container;

    public UnityServiceHostFactory()
    {
        _container = new UnityContainer();

        new ContainerConfigurator().Configure(_container);
    }

    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        return new UnityServiceHost(_container, serviceType, baseAddresses);
    }
}

public class ContainerConfigurator
{
    public void Configure(UnityContainer container)
    {
        container.RegisterType<IInvoiceRepository, InvoiceRepository>("dbInvoiceRepository");
        container.RegisterType<IInvoiceRepository, XmlInvoice>("xmlInvoiceRepository");
        container.RegisterType<IInvoiceFinder, InvoiceFinder>();
    }
}

public class UnityServiceHost : ServiceHost
{
    public UnityServiceHost(UnityContainer container, Type serviceType, params Uri[] baseAddresses)
        : base(serviceType, baseAddresses)
    {
        if(container == null) throw new ArgumentNullException("container");

        var contracts = ImplementedContracts.Values;

        foreach (var c in contracts)
        {
            var instanceProvider = new UnityInstanceProvider(container, serviceType);

            c.Behaviors.Add(instanceProvider);
        }
    }
}

public class UnityInstanceProvider : IInstanceProvider, IContractBehavior
{
    private readonly UnityContainer _container;
    private readonly Type _serviceType;

    public UnityInstanceProvider(UnityContainer container, Type serviceType)
    {
        if (container == null) throw new ArgumentNullException("container");
        if (serviceType == null) throw new ArgumentNullException("serviceType");

        _container = container;
        _serviceType = serviceType;
    }

    public object GetInstance(InstanceContext instanceContext)
    {
        return GetInstance(instanceContext, null);
    }

    public object GetInstance(InstanceContext instanceContext, Message message)
    {
        return _container.Resolve(_serviceType);
    }

    public void ReleaseInstance(InstanceContext instanceContext, object instance)
    {
        _container.Teardown(instance);
    }

    public void Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)
    {
    }

    public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)
    {
        dispatchRuntime.InstanceProvider = this;
    }

    public void ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    public void AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {
    }
} 
```

我正在使用控制台应用程序对此进行测试，我实例化了服务代理并调用了它的方法，但是由于两个注册都被命名为 Unity 不知道要实例化哪一个。如果我从其中任何一个中删除名称，它将成功解决。

基本上我希望能够做这样的事情：

```
static void Main(string[] args)
    {
        //First call, want it to resolve to the InvoiceRepository concrete type
        //new InvoiceService(new InvoiceFinder(new InvoiceRepository))
        var invoiceService1 = new InvoiceProxy();
        var response1 = invoiceService1.GetSumarizedInvoiceBy(new InvoiceRequest(1));

        //Second call, want it to resolve to the XmlInvoice concrete type
        //new InvoiceService(new InvoiceFinder(new XmlInvoice))
        var invoiceService2 = new InvoiceProxy();
        var response2 = invoiceService2.GetSumarizedInvoiceBy(new InvoiceRequest(2));
    } 
```

请注意 invoiceService1 和 invoiceService2 如何是同一服务的两个不同实例，但其自身依赖项中的依赖项对两者的解析方式不同。

当我实例化服务代理或调用其方法时，我必须做什么才能告诉 Unity 要实例化哪个存储库？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:17:49.937

将您在 RegisterType<>() 调用中为 Unity 提供的名称传递给 Resolve<>()。

从[通过类型和注册名称解析对象](http://msdn.microsoft.com/en-us/library/ff660853%28v=pandp.20%29.aspx)

```
// Create container and register types
IUnityContainer myContainer = new UnityContainer();
myContainer.RegisterType(typeof(MyServiceBase), typeof(DataService), "Data");
myContainer.RegisterType(typeof(MyServiceBase), typeof(LoggingService), "Logging");

// Retrieve an instance of each type
MyServiceBase myDataService = (MyServiceBase)myContainer.Resolve(typeof(MyServiceBase), "Data"); 
```

您正在使用与此示例等效的通用扩展方法。

# php - 如何与 MySQL 表进行比较并显示差异？

> ID：15540400
> 
> 赞同：2
> 
> 时间：2013-03-21T05:51:01.030
> 
> 标签：php, mysql

我们得到用于填充 MySQL 数据库的每日提要。我想将新的提要与前一个提要进行比较，看看有什么变化、添加甚至删除。我正在使用 MySQL 和 PHP。如何在 MySQL 中最好地实现这一点？我认为它应该采用以前的提要，即 MySQL 表，并将其与也存储为 MySQL 表的新提要进行比较。但是我该怎么做才能检索那些在新 MySQL 表中找不到的行呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:54:21.067

我会选择一个完整的外部连接解决方​​案，在左侧显示“旧”值（添加时为 null），在右侧显示新值（删除时为 null）。如果两边都被填充，则意味着 le 行要么未更改，要么值已更改。

```
select key, o.value1, o.value2, m.value1, m.value2
from original o full outer join modifications m using(key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:08:42.790

这可能会帮助您：

```
SELECT  a.*
FROM    `OLD_TABLE_NAME` a
WHERE   ROW(a.col1, a.col2, …) NOT IN
    (
    SELECT  *
    FROM    NEW_TABLE_NAME
    )
UNION ALL
SELECT  b.*
FROM    `NEW_TABLE_NAME` b
WHERE   ROW(b.col1, b.col2, …) NOT IN
    (
    SELECT  *
    FROM    OLD_TABLE_NAME
    ) 
```

享受！

# ios - 将多个图像合并为 1

> ID：15540401
> 
> 赞同：3
> 
> 时间：2013-03-21T05:51:03.397
> 
> 标签：ios

我正在尝试用其他一些预设图像覆盖从相机拍摄的照片。问题是，来自相机的图片可能是 8MP，这在内存使用方面是巨大的。一些叠加层可能会尝试覆盖整个图像。

我尝试了多种方法将它们全部合并到一个图像中。

```
UIGraphicsBeginImageContextWithOptions(_imageView.image.size, NO, 1.0f);
[_containerView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

或者

```
CGContextDrawImage(UIGraphicsGetCurrentContext(), (CGRect){CGPointZero, _imageView.image.size}, _imageView.image.CGImage);
CGContextDrawImage(UIGraphicsGetCurrentContext(), (CGRect){CGPointZero, _imageView.image.size}, *other image views*); 
```

或者

```
UIImage* image = _imageView.image;
CGImageRef imageRef = image.CGImage;

size_t imageWidth = (size_t)image.size.width;
size_t imageHeight = (size_t)image.size.height;

CGContextRef context = CGBitmapContextCreate(NULL, CGImageGetWidth(imageRef), CGImageGetHeight(imageRef), CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), CGImageGetColorSpace(imageRef), CGImageGetBitmapInfo(imageRef));

CGRect rect = (CGRect){CGPointZero, {imageWidth, imageHeight}};
CGContextDrawImage(context, rect, imageRef);
CGContextDrawImage(context, rect, **other images**);
CGImageRef newImageRef = CGBitmapContextCreateImage(context);
CGContextRelease(context);

UIImage* resultImage = nil;

NSURL* url  = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:@"x.jpg"]];
CFURLRef URLRef = CFBridgingRetain(url);
CGImageDestinationRef destination = CGImageDestinationCreateWithURL(URLRef, kUTTypeJPEG, 1, NULL);
if (destination != NULL)
{
    CGImageDestinationAddImage(destination, newImageRef, NULL);
    if (CGImageDestinationFinalize(destination))
    {
        resultImage = [[UIImage alloc] initWithContentsOfFile:url.path];
    }
    CFRelease(destination);
}
CGImageRelease(newImageRef); 
```

所有这些工作，但本质上，使当前的内存使用量翻了一番。

无论如何都可以将它们组合在一起而无需创建新的上下文？也许将所有图像保存在文件系统中并在那里进行合并而不实际消耗大量内存？或者甚至可能渲染到每个图块的文件系统图块？

有什么建议或指示我该去哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:07:50.660

查看以下代码。您可以将多个图像发送到以下方法，但是由于您面临内存问题，我建议您重复调用相同的方法来合并多个图像。不过，此过程可能需要更多时间。

```
-(CGImageRef )mergedImageFromImageOne:(UIImage *)imageOne andImageTwo:(UIImage *)imageTwo
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    CGSize imageSize = imageOne.size;

    UIGraphicsBeginImageContext(sizeVideo);

    [imageOne drawInRect:CGRectMake(0,0,imageSize.width,imageSize.height)];

    [imageTwo drawInRect:CGRectMake(0,0,imageSize.width,imageSize.height) alpha:1];

    CGImageRef imageRefNew =  CGImageCreateWithImageInRect(UIGraphicsGetImageFromCurrentImageContext().CGImage, CGRectMake(0,0,imageOne.width,imageOne.height));

    UIGraphicsEndImageContext();

    [pool release];

    return imageRefNew;
} 
```

希望这可以帮助。

# javascript - 将一个对象分配给另一个对象并返回对象并将其分配给javascript中的另一个对象有什么区别？

> ID：15540403
> 
> 赞同：0
> 
> 时间：2013-03-21T05:51:12.003
> 
> 标签：javascript, object

所以如果我们创建两个对象

```
var dog = {
var name:"dog",
    makeSound: function(){
    alert("wow");
    }

}

var cate = {
var name:"cate",
    makeSound: function(){
    alert("meow");
    }

}

cate = dog; 
```

现在两者都`cate`指向`dog`同一个对象。

如果我们这样做

```
cate = object.create(dog); 
```

两者的区别是什么，`cate`现在`dog`指向同一个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:54:02.227

**对象.create**

> 使用指定的原型对象和属性创建一个新对象。

[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

不具有相同的**值**！

虽然`cate = dog;`只是告诉`cate`指向与`dog`.

# curl - 无法卷曲远程文件

> ID：15540405
> 
> 赞同：5
> 
> 时间：2013-03-21T05:51:38.087
> 
> 标签：curl

我有一段代码旨在接收任何 URL 并将其从网络上删除。到目前为止，它一直运行良好，直到有人给它这个 URL：

[http://www.aspensurgical.com/static/images/aspen_hill-rom_logo.png](http://www.aspensurgical.com/static/images/aspen_hill-rom_logo.png)

如果我从浏览器中点击它，它显示得很好。但是当我尝试将它卷曲时，我得到：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /static/images/aspen_hill-rom_logo.png
on this server.</p>
<hr>
<address>  Server at www.aspensurgical.com Port 80</address>
</body></html> 
```

我正在使用的 CURL 代码是：

```
$ch = curl_init(str_replace(' ', '%20', $url));
$fh = fopen($local_file, "w");
curl_setopt($ch, CURLOPT_FILE, $fh);
curl_exec($ch);
curl_close($ch); 
```

他们的服务器是否以某种方式意识到我不是普通的浏览器并引导我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T06:03:45.893

他们有 useragent 检查你是谁。添加普通浏览器的用户代理，你应该没问题。

```
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0"); 
```

[这是codepad](http://codepad.viper-7.com/CEA1bg)中的工作示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-18T09:39:03.557

一些服务器为了阻止不必要的流量，只允许从浏览器下载。所以，为了欺骗这样的服务器，curl 有一个额外的选项 --user-agent ，它可以解决问题！

我在我的 windows7 PC 上使用 curl，已经安装了 gow。

例子

```
curl --user-agent "Mozilla/4.0" http://www.example.com/archives/abc.txt --output pqr.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T13:12:35.623

我有同样的问题修复

```
<form action="gc.php" method="post" enctype="multipart/form-data">
<input type="file" name="f">
<input type="submit" value="Post">
</form>

    <?php
    if(isset($_FILES['f']['tmp_name'])) {
    $ch = curl_init();

    $cfile = new CURLFile($_FILES['f']['tmp_name'], $_FILES['f']['type'], 
    $_FILES['f']['name']);
    $data = array("myfile" =>$cfile);

    curl_setopt($ch, CURLOPT_URL, "http://your-url/accept.php");
    curl_setopt($ch, CURLOPT_HEADER, true);
            curl_setopt($ch, CURLOPT_NOBODY, true);
            curl_setopt($ch, CURLOPT_REFERER, $url);
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
            curl_setopt($ch, CURLOPT_MAXREDIRS, 15);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);
            curl_setopt($ch, CURLOPT_FAILONERROR, true);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    $response = curl_exec($ch);

    if($response == true) {
        echo "File posted";
    } else { 
        echo "Error" . curl_error($ch);
    }
    }
    ?> 
```

并接受.php

```
 <?php
     if(isset($_FILES['myfile']['tmp_name'])) {
     $path = "myfiles/" . $_FILES['myfile']['name'];
     move_uploaded_file($_FILES['myfile']['tmp_name'], $path);
     }

     ?> 
```

# ruby-on-rails - 显示没有路由匹配的路由错误 [POST] "/admin/locations/1"

> ID：15540407
> 
> 赞同：0
> 
> 时间：2013-03-21T05:51:55.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我编辑我的位置时，我是 ROR 的新手，它会给我以下错误 `No route matches [POST] "/admin/locations/1"`

这里我使用的是 rails 3.2.12

这是我的位置控制器

```
class Admin::LocationsController < ApplicationController

def index
    @location= Location.order("location desc")
end

def new
    @location=Location.new
end

def create
    @location = Location.new(params[:location])
    if @location.save
     # flash[:notice] = 'Location is successfully added in to list.'
      redirect_to :action => 'index'
    else
      render :action => 'new'
    end
end

def edit
   @location = Location.find(params[:id])
end

def update
    @location = Location.find(params[:id])
    if @location.update_attributes(params[:location])
      #flash[:notice] = 'Category is successfully updated.'
      redirect_to :action => 'index'
    else
      render :action => 'index'
    end
end

end 
```

这是我的 edit.html.erb

```
<h2>Edit Location</h2>
<%= simple_form_for(:location, :url => {:action => 'update', :id => @location.id}) do |f| %>
    <%= render(:partial => 'form', :locals => {:f => f}) %>  
    <%= submit_tag("Update",) %> <%= link_to("cancle", {:action => 'index'} )%>

<%end%> 
```

这是我的 route.rb

```
GuestHouse::Application.routes.draw do
  devise_for :customers

  namespace :admin do
    resources :locations
  end 
```

在我的 index.html.erb 中作为 <%= link_to("Edit", {:action => 'edit', :id => location.id}, :class => 'btn btn-info')%>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:00:45.227

对于编辑表单，您可能希望使用该`PUT`方法而不是`POST`. 不过，您似乎正在使用 [SimpleForm][1]，它通常会为您处理为给定模型构建路径。您是否有任何理由没有`Location`在您的调用中传递您的实例`simple_form_for`？我会期待类似以下的内容：

```
<%= simple_form_for @location do |f| %>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:03:42.670

```
<%= simple_form_for(:location, 
  :url => {:action => 'update', :id => @location.id},
  :method => 'put' ) do |f| %> 
```

传入方法`simple_form_for`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:07:54.317

在这里，您的管理员/位置路线如下所示。

```
      admin_locations GET /admin/locations(.:format) admin/locations#index
                      POST /admin/locations(.:format) admin/locations#create
   new_admin_location GET /admin/locations/new(.:format) admin/locations#new
  edit_admin_location GET /admin/locations/:id/edit(.:format) admin/locations#edit
       admin_location GET /admin/locations/:id(.:format) admin/locations#show
                      PUT /admin/locations/:id(.:format) admin/locations#update
                      删除 /admin/locations/:id(.:format) admin/locations#destroy

```

因此，如果您想将表单发送到**“更新”**操作，您应该提及如下路径。

```
<%= simple_form_for @location, :url => admin_location_path(@location),:html => { :method => "post"} do |f| %> 
```

# python - 在 pyhook pumpmessages 中使用自己的代码

> ID：15540410
> 
> 赞同：1
> 
> 时间：2013-03-21T05:52:05.850
> 
> 标签：python, file, keylogger, pyhook

我想检查我正在编写密钥的文件是否超过 2Kb。如果它超过 2KB，那么我需要制作另一个文件并停止写入这个文件。我是python的初学者，请帮帮我。请指出我在哪里可以使用代码来检查文件是否超过 2kb。

```
import win32api , win32console , win32gui , pythoncom , pyHook , sys, time ,os
import datetime 
now = datetime.datetime.now()
p = now.strftime("%Y-%m-%d %H-%M")
temp_path =  p
fil = temp_path + '.txt'
sys.stdout = open(fil,'w')
lastWindow = None
lastWindow=win32gui.GetWindowText (win32gui.GetForegroundWindow())
while True:
    def OnKeyboardEvent(event):
        global lastWindow
        window = event.WindowName
        key = chr(event.Ascii)
        if window != lastWindow:
            print window 
            lastWindow = window
        print key
    hm = pyHook.HookManager()

    hm.KeyDown = OnKeyboardEvent

    hm.HookKeyboard()
    pythoncom.PumpMessages() 
```

希望你能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T04:18:46.553

你可以使用`.getsize`.

```
>>> import os
>>> b = os.path.getsize("/path/isa_005.mp3")
>>> b
2071611L 
```

# java - 更改操作栏菜单颜色

> ID：15540413
> 
> 赞同：0
> 
> 时间：2013-03-21T05:52:34.233
> 
> 标签：java, android

```
ActionBar bar = getActionBar();
bar.setBackgroundDrawable(new ColorDrawable("COLOR")); 
```

如何更改操作栏菜单颜色。

```
<item android:id="@+id/about" android:title="@string/about"
    android:showAsAction="never" />

<item android:id="@+id/help" android:title="@string/help"
    android:showAsAction="never" />

<item android:id="@+id/signout" android:title="@string/signout"
    android:showAsAction="never" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:07:31.447

为了保持主题的一致性，您可能希望使用它来创建新的 ActionBar 样式：

[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

# python - cx 冻结不起作用

> ID：15540414
> 
> 赞同：1
> 
> 时间：2013-03-21T05:52:49.560
> 
> 标签：python, wxpython, cx-freeze

我是 python 新手，我在 linux 机器上使用 python 和 wxpython 编写了脚本。现在我想将 .py 转换为 .exe ，为此我使用了 cxfreeze。创建exe的步骤

```
 $ python setup.py build
        $ python setup.py install
        $ python pip cxfreeze
        $ cxfreeze script.py 
```

但是当我在其他系统中执行“./script(exe)”时，我得到了这个错误：

```
 File "/usr/local/lib/python2.7/dist-packages/cx_Freeze/initscripts/Console.py", line 27, in <module>
 File "script.py", line 3, in <module>
 File "/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode/wx/__init__.py", line 45, in <module>
 File "/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode/wx/_core.py", line 4, in <module>
 File "ExtensionLoader_wx__core_.py", line 18, in <module>
 ImportError: No module named None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:09:21.973

我只是尝试使用以下简单的 wxPython 应用程序在 CentOS 上使用 cxfreeze：

```
import wx

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Test EXE", size=(1024, 768))
        panel = wx.Panel(self)

        lbl = wx.StaticText(panel, label="This is a binary program!")

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    frame.Show()
    app.MainLoop() 
```

复制到 Windows 7 框时的输出根本不起作用。它是为 CentOS 而不是 Windows 创建文件！毫不奇怪，因为我在 Linux 机器上运行脚本。如果你在 Windows 上运行 cxfreeze，你最终会在你的输出中得到一些 DLL 文件。无论哪种方式，当您运行它在 Windows 上生成的 exe 时，它​​都可以工作。当您在 CentOS 上运行它创建的文件时，它可以工作。但是，如果您尝试将针对该操作系统生成的文件复制到不同的操作系统，它就不起作用。

# android - 持久的 Toast 消息：执行后 Toast 不会消失

> ID：15540416
> 
> 赞同：6
> 
> 时间：2013-03-21T05:52:55.950
> 
> 标签：android, toast

我有一条执行后不会消失的敬酒消息。我猜这与它在循环中有关，但我不确定。有人可以帮我弄清楚为什么吐司消息没有区别吗？

```
 @Override
public void onClick(View v) {
    int index = 0;
    for(int i= 0; i<userArray.length; i++){
        if(email.getText().toString().equals(userArray[i])){
            index = i;
        }
        if(passArray[index].equals(password.getText().toString())){
            Toast.makeText(getBaseContext(), "SUCCESS!", Toast.LENGTH_SHORT).show();

        } else {
            Toast.makeText(getBaseContext(), "INVALID LOGIN", Toast.LENGTH_SHORT).show();
        }
    }
    Intent mainIntent = new Intent(LoginActivity.this, MainActivity.class);
    startActivityForResult(mainIntent, 0);
} 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-30T23:15:30.460

如果您从服务线程调用 Toast 消息并且该线程在 Toast 设置为消失之前完成它的工作，则该消息可能会卡住。然后，您会被屏幕上的 Toast 消息卡住，直到您终止应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T05:54:25.527

`Toast`总是消失。总是。

因此，您将显示多条 Toast 消息。保证。通过使用某种计数器更改消息或在显示初始消息后禁用来测试这一点。

请注意，相当多的 Toast 可以堆叠起来，并且需要很长时间才能完成背靠背的显示。等待，只要您的应用程序没有无限循环，它们最终会消失。

编辑：我一直纠正。显然，`Toast`如果从 Thread、Service 或 IntentService 启动，消息可能会卡住并保持显示。谢谢@Johnathan 和@zapotec。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-09T07:57:13.810

A`Toast`并不总是消失。

“如果您从服务线程调用它，并且该线程在 Toast 设置为消失之前完成了它的工作，那么您将被屏幕上的 Toast 消息卡住，直到您终止应用程序。”

[（从Jonathan Cole](https://stackoverflow.com/users/2592155/jonathan-cole)的原始答案中复制，不幸的是被删除了）

* * *

这是一个示例堆栈跟踪，解释了这种情况是如何发生的：

```
 java.lang.IllegalStateException: Handler (android.os.Handler) {123f93ea} sending message to a Handler on a dead thread
      at android.os.MessageQueue.enqueueMessage(MessageQueue.java:325)
      at android.os.Handler.enqueueMessage(Handler.java:631)
      at android.os.Handler.sendMessageAtTime(Handler.java:600)
      at android.os.Handler.sendMessageDelayed(Handler.java:570)
      at android.os.Handler.post(Handler.java:326)
      at android.widget.Toast$TN.hide(Toast.java:387)
      at android.widget.Toast.cancel(Toast.java:133) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-27T23:36:28.177

我有这个问题。我发现我实例化了 10 多个 toast。每个都等到下一个消失后再显示下一个，屏幕上总共有 20 秒。

我发现将所有 toast 存储在一个数组列表中，然后将它们全部取消可以解决我的问题。

```
private ArrayList<Toast> toasts;
public void sendToast(final String message) {
    if (null == toasts) {
        toasts = new ArrayList<Toast>();
    }
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            try {
                Toast toast = Toast.makeText(NJActivity.this, message, Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.TOP|Gravity.CENTER, 0, 300);
                toast.show();
                toasts.add(toast);
            } catch(Exception e) {/* do nothing, just means that the activity doesn't exist anymore*/}
        }
    });
}

public void removeToast() {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            if (null != toasts) {
                for(Toast toast:toasts) {
                    toast.cancel();
                }
                toasts = null;
            }
        }
    });     
} 
```

然后在停止销毁时我调用了 removeToast() 方法

```
@Override
public void onDestroy() {
    super.onDestroy();
    removeToast();
}

@Override
protected void onStop () {
    super.onStop();
    removeToast();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-13T15:25:16.007

有一些奇怪的情况，吐司不会消失。为了处理这个，只需使用处理程序。创建一个作为字段，并使用“post(Runnable)”并在此处显示 toast。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-28T22:31:47.390

这是我使用自定义吐司处理程序的解决方案。在 m 应用程序中完美运行。

```
public class CustomToast {

    private LayoutInflater inflater;
    private Toast toast;
    private View customToastLayout;
    private TextView LblCustomToast;

    public CustomToast() {}

    public void showCustomToast(String toastMessage, int toastLength, AppCompatActivity context) {

        if(inflater == null) {inflater = context.getLayoutInflater();}
        if(customToastLayout == null) {customToastLayout = inflater.inflate(R.layout.toast_layout, (ViewGroup) context.findViewById(R.id.toast_layout_root));}
        if(LblCustomToast == null) {LblCustomToast = (TextView) customToastLayout.findViewById(R.id.LblCustomToast);}
        LblCustomToast.setText(toastMessage);
        if(toast == null) {toast = new Toast(context);}
        toast.setGravity(Gravity.CENTER_VERTICAL| Gravity.BOTTOM, 0, DPDensity.getPxFromDP(160, context.getResources()));
        toast.setDuration(toastLength);
        toast.setView(customToastLayout);
        if(toast.getView().isShown()) {toast.cancel();}//Toast is cancelled here if currently showing
        toast.show();

    }

} 
```

这是 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_layout_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="15dp"
    android:paddingTop="5dp"
    android:paddingRight="15dp"
    android:paddingBottom="5dp"
    android:orientation="vertical"
    android:background="@drawable/custom_toast_bg"
    android:gravity="bottom|center"
    android:layout_marginBottom="50dp">

    <TextView android:id="@+id/LblCustomToast"
        android:text="Test"
        android:textSize="16dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@color/lightLime"
        android:layout_gravity="center"
        android:gravity="center"/>

</LinearLayout> 
```

这是用法：

```
customToast = new CustomToast();
customToast.showCustomToast(getString(R.string.your_message), Toast.LENGTH_SHORT, (AppCompatActivity) mainActivityContext); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-07T13:13:42.450

我以前遇到过同样的问题，这对我有帮助。我在 onCreate 中创建了我的 Toast，就像这样

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sample);

    Context context = getApplicationContext();
    CharSequence text = "~I'm a toast that will dissapear~!";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, text, duration);
    toast.setGravity(Gravity.TOP, 0, 0);} 
```

然后我只是从在不同线程上运行的方法中调用它

```
toast.show(); 
```

我希望它可以帮助！

PS我认为问题在于您的吐司是在一个线程上创建并从另一个线程（uithread）调用的

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-21T05:57:04.290

```
 I m guessing it has something to do with it being in the loop but I'm not sure. 
```

是的，你是对的，它的出现是因为你已经将它保持在`for`循环中，所以循环将执行多次，它会出现很多次`Toast`。

您在代码中多次显示 Toast。

如果您不想多次烤面包，我会更好，然后您可以将其写在 for 循环之外。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-21T06:02:21.060

我认为问题是吐司一次又一次地出现在屏幕上，并且需要时间来消除。将 toast 置于循环之外，检查您的代码，并多次检查条件是否为真。总之就是`DEBUG`你的代码。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-21T06:04:03.410

吐司停留的时间更长一些。它一旦生成就会永远消失。在循环中，它们不断地相互生成，所以它给你一种永远在那里的错觉。如果您保持耐心并等待一段时间，所有这些都会在一段时间后消失。

如果要显示成功消息。

尝试制作`alert dialogue`并继续更新有关`Text View`您希望在成功和失败时显示的成功消息的消息。

`Toast`或仅在登录失败时尝试提高。

或者检查`Infintie Loop`您是否要坚持相同的方法

# android - ImageButton大小奇怪的问题

> ID：15540426
> 
> 赞同：0
> 
> 时间：2013-03-21T05:54:01.770
> 
> 标签：android, imagebutton

我有一个`LinearLayout`包含一组按钮：第一个是简单的`ImageButton`，其他的是 ImageButton 子类，它们只包含一些自定义逻辑（演示文稿没有被覆盖）。所有图像都有相同的尺寸 ( `50dp`)，但第一个画得比原来大。有人遇到过这样的麻烦吗？

**PS：**这种布局也用于平板电脑，一切都很好。我真的很失望。

**UPD：**如果其他人会面临这样的麻烦，我会把它留在这里。我在可绘制名称中犯了一个愚蠢的错字。请注意文件名。

[布局代码](http://pastebin.com/RiRdqZ3k)

![在此处输入图像描述](../Images/cfeab039908434c5659f45d4afa7dfb4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:00:58.733

当我遇到这个问题时，我在一个 drawables 文件夹中有一个错误命名的文件。

# java - 为什么这个带有 Salt 的 MD5 结果在结果字符串的末尾有“==”？

> ID：15540433
> 
> 赞同：0
> 
> 时间：2013-03-21T05:54:42.283
> 
> 标签：java, hash, md5, salt, jasypt

我有使用 jasypt（Java 简化加密）库的 java 代码：

```
 StandardStringDigester digester = new StandardStringDigester();
    digester.setAlgorithm("MD5");
    digester.setIterations(1);

    FixedStringSaltGenerator saltGenerator = new FixedStringSaltGenerator();
    saltGenerator.setSalt("justAnotherSalt");

    digester.setSaltGenerator(saltGenerator);
    digester.setSaltSizeBytes(5);

    String digest = digester.digest("my_password");

    System.out.println(digest); 
```

你可以看到我使用了带盐的 MD5 算法。

控制台中的结果是：

```
I9uMOxDiImtxMXKXkt2EUw== 
```

我想知道为什么结果字符串末尾有“==”字符？只有当我使用 Salt 时它才存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:59:36.480

StandardStringDigester.digest API 表示*结果以 BASE64（默认）或 HEXADECIMAL 编码并以 ASCII String 形式返回*。在您的情况下，这是 BASE64

# jquery - 使用 jQuery 的随机图像幻灯片

> ID：15540434
> 
> 赞同：1
> 
> 时间：2013-03-21T05:54:51.317
> 
> 标签：jquery, html, slideshow, fadein, fadeout

我有这些代码的图像幻灯片：-

jQuery：-

```
$(function() {
var current = 0,

    $imgs = jQuery('#header .abc71');
    imgAmount = $imgs.length;

$($imgs.css('position', 'absolute').hide().get(0)).show();

window.setInterval(swapImages, 4000);

function swapImages() {
    var $currentImg = $($imgs[current]);
    if(current == imgAmount-1) current = -1;
    var $nextImg = $($imgs[++current]),
        speed = 1500;
    // animation speed should be the same for both images so we have a smooth change
    $currentImg.fadeOut(speed);
    $nextImg.fadeIn(speed);
    }
}); 
```

html:-

```
<div id="header">
   <img class="abc71" src="img1.png"/>
   <img class="abc71" src="img2.png" />
   <img class="abc71" src="img3.png"/>
 </div> 
```

这些脚本运行良好。但我想以随机顺序显示图像。我如何为此修改我的脚本。还是我应该使用任何其他脚本？请帮助我...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:22:52.693

知道了。我更新了您的一些代码以使其更清洁。使用有趣的选择器，例如 :hidden 和 :visible。他们真的很棒。

这是小提琴：

[JSFiddle](http://jsfiddle.net/mQ2Zu/1/)

```
$(function () {
var current = 0,

$imgs = jQuery('#header .abc71');
imgAmount = $imgs.length;

$($imgs.css('position', 'absolute').hide().get(0)).show();

window.setInterval(swapImages, 1000);

function swapImages() {

    var $currentImg = $('.abc71:visible');

    var $nextImg = $('.abc71:hidden').eq(Math.floor(Math.random() * $('.abc71:hidden').length));
        speed = 500;
    // animation speed should be the same for both images so we have a smooth change
    $currentImg.fadeOut(speed);
    $nextImg.fadeIn(speed);
}
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:59:58.943

如果随机数大于长度，则可以使用[random()](http://www.w3schools.com/jsref/jsref_random.asp)为图像数组生成随机索引，然后将其设置为图像数组`length-1`。

```
$(function() {
    var current = 0,      
    $imgs = jQuery('#header .abc71');
    imgAmount = $imgs.length;    
    $($imgs.css('position', 'absolute').hide().get(0)).show();
    window.setInterval(swapImages, 4000);

    function swapImages() {
        current = Math.floor((Math.random()*imgAmount)+1);
    if(current > imgAmount-1) current = imgAmount -2;
    var $currentImg = $($imgs[current]);       
    var $nextImg = $($imgs[current+1]),
        speed = 1500;
    // animation speed should be the same for both images so we have a smooth change
    $currentImg.fadeOut(speed);
    $nextImg.fadeIn(speed);

    }
}); 
```

# ruby-on-rails-3 - 如何在 S3 上使用 Carrierwave、Fog 和在 Heroku 上托管？

> ID：15540438
> 
> 赞同：1
> 
> 时间：2013-03-21T05:55:39.213
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, carrierwave

我正在使用**Carrierwave**将图像上传到我的应用程序并将其存储在**S3**上。那部分工作正常，我的问题是当我创建图片的缩略图时它做得很好，但将缩略图存储在**Heroku**而不是**S3**中。

**如何指定将拇指存储在我的 S3 存储桶上？**

**这是我的代码：**

```
class FileUploader < CarrierWave::Uploader::Base

  include CarrierWave::RMagick

  storage :fog

  include CarrierWave::MimeTypes
  process :set_content_type

  def extension_white_list
     %w(jpg jpeg gif png pdf)
  end

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

   version :thumb do
     process :resize_to_limit => [100, 100]
   end 
```

**看法：**

```
<%= image_tag doctor.doctor_img_url(:thumb).to_s if doctor.doctor_img? %> 
```

# titanium - Tiatnium base 64 模块，用于图像编码解码

> ID：15540439
> 
> 赞同：1
> 
> 时间：2013-03-21T05:55:47.373
> 
> 标签：titanium, titanium-modules

嗨，我试图从 blob/图像文件中编码 base64 字符串。当我知道“Ti.Utils.base64encode()”方法仅适用于 android 但不会在 IOS 中给出相同的字符串时，我感到震惊。所以在搜索后通过获取解决方案的博客，我发现[http://www.clearlyinnovative.com/blog/post/9546524557/titanium-appcelerator-quickie-base64encode-ios-module#.UUqY2VuPg4U](http://www.clearlyinnovative.com/blog/post/9546524557/titanium-appcelerator-quickie-base64encode-ios-module#.UUqY2VuPg4U)

当我尝试通过将这个模块包含在项目中来运行项目时，它在为 ios 构建项目时会出现错误日志。在帮助上可以得到任何帮助。谢谢。

```
 [ERROR] :  ** BUILD FAILED ** 
    [ERROR] :  The following build commands failed:
    [ERROR] :   Ld build/Debug-iphonesimulator/postfile.app/postfile normal i386 
    [ERROR] :  (1 failure) 
```

# c# - 在gridview的每一行文件上传

> ID：15540440
> 
> 赞同：1
> 
> 时间：2013-03-21T05:55:53.803
> 
> 标签：c#, asp.net

我在 gridview 项目模板中有一个文件上传控件，例如

```
 <ItemTemplate>
       <asp:FileUpload ID="flUpload"  runat="server" />
     </ItemTemplate> 
```

我在网格视图外有一个按钮，上面写着上传，我想一一上传网格视图中的所有文件。但我的问题是，当我在文件上传控件中选择某个文件时，上传按钮不会触发点击事件。让我知道点击是否可以通过某种方式起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:30:20.287

每列的gridview 中有三个模板。您已将 FU 放置在静态或显示“项目”模板中。将其移至编辑或另一个（不在计算机上查看名称）。如果您的网格位于“更新面板”内，则 FU 控件也不兼容。

您还应该考虑创建一个详细信息视图并将其放置在其中，以便当用户选择该行时，他们可以编辑上传您需要的任何内容。忘记我的更新面板的事情我看到你已经回答了。

# java - 在 Aspectj 中为测试套件中的每个 Junit 测试创建一个切入点

> ID：15540441
> 
> 赞同：4
> 
> 时间：2013-03-21T05:55:59.567
> 
> 标签：java, junit, aop, aspectj

您好，我在将 AspectJ 与 Junit 测试集成时遇到了麻烦。

我需要为测试套件中的每个测试获取不同的日志。所以我需要知道什么时候运行一个新的测试用例，什么时候完成。我如何定义这样的切入点？

以下切入点对我不起作用，它只输入一次。

```
pointcut testIsAboutToBegin()
: execution (* *.test(..)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T14:24:38.997

您好，您应该为此使用 before() 和 after()，试试这个：

```
before () : testIsAboutToBegin() {
    System.out.println("starting test ... ");
}

after () : testIsAboutToBegin() {
    System.out.println("ending test ... ");
}

//for GetJUnit 4.x
pointcut testJUnit4xIsAboutToBegin() : execution(@Test * *(..))

pointcut testIsAboutToBegin() : execution (* *.test*(..)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T12:27:54.860

使用周围的建议怎么样？

```
pointcut aroundTest(): 
    execution(public void test*(..));

  void around() throws Exception: aroundTest() {
     LOG.info("start");
     proceed();
     LOG.info("stop");
  } 
```

# sql - 如何在 PostgreSQL 中的函数上创建索引？

> ID：15540442
> 
> 赞同：2
> 
> 时间：2013-03-21T05:56:05.363
> 
> 标签：sql, postgresql

我对 postgre sql 非常陌生，现在在我的公司中，我处于一个开发游戏查询并告诉我调整它的位置。

```
SELECT room_type_name, 
       Max(total), 
       Max(d1), 
       Max(d2), 
       Max(d3), 
       Max(d4), 
       Max(d5), 
       Max(d6), 
       Max(d7) 
FROM   (SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        Sum(avail_count) 
                        || ' '           AS D1, 
                        '0'              AS D2, 
                        '0'              AS D3, 
                        '0'              AS D4, 
                        '0'              AS D5, 
                        '0'              AS D6, 
                        '0'              AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char(To_date('20-03-     2013', 
        'DD-MM-YYYY'), 
           'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        '0'              AS D1, 
                        Sum(avail_count) 
                        || ' '           AS D2, 
                        '0'              AS D3, 
                        '0'              AS D4, 
                        '0'              AS D5, 
                        '0'              AS D6, 
                        '0'              AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char( 
                      To_date('20-03-2013', 'DD-MM-YYYY') + 1, 'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        '0'              AS D1, 
                        '0'              AS D2, 
                        Sum(avail_count) 
                        || ' '           AS D3, 
                        '0'              AS D4, 
                        '0'              AS D5, 
                        '0'              AS D6, 
                        '0'              AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char( 
                      To_date('20-03-2013', 'DD-MM-YYYY') + 2, 'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA0     0010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        '0'              AS D1, 
                        '0'              AS D2, 
                        '0'              AS D3, 
                        Sum(avail_count) 
                        || ' '           AS D4, 
                        '0'              AS D5, 
                        '0'              AS D6, 
                        '0'              AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-     YYYY') = To_char(To_date('20-03-2013', 
                             'DD-MM-YYYY') + 3, 
                            'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum (total_count) AS total, 
                        '0'               AS D1, 
                        '0'               AS D2, 
                        '0'               AS D3, 
                        '0'               AS D4, 
                        Sum(avail_count) 
                        || ' '            AS D5, 
                        '0'               AS D6, 
                        '0'               AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char( 
                      To_date('20-03-2013', 'DD-MM-YYYY') + 4, 'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        '0'              AS D1, 
                        '0'              AS D2, 
                        '0'              AS D3, 
                        '0'              AS D4, 
                        '0'              AS D5, 
                        Sum(avail_count) 
                        || ' '           AS D6, 
                        '0'              AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char( 
                      To_date('20-03-2013', 'DD-MM-YYYY') + 5, 'DD-MON-     YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name 
        UNION 
        SELECT DISTINCT room_type_name, 
                        Sum(total_count) AS total, 
                        '0'              AS D1, 
                        '0'              AS D2, 
                        '0'              AS D3, 
                        '0'              AS D4, 
                        '0'              AS D5, 
                        '0'              AS D6, 
                        Sum(avail_count) 
                        || ' '           AS D7 
        FROM   tmp_avail_count_dtls 
        WHERE  To_char(week_date, 'DD-MON-YYYY') = To_char( 
                      To_date('20-03-2013', 'DD-MM-YYYY') + 6, 'DD-MON-YYYY') 
               AND user_id = 'APHYDRSA00010' 
        GROUP  BY room_type_name) AS a 
GROUP  BY room_type_name 
```

现在我从上述查询的解释计划中观察到，上述查询没有使用索引。所以我想在函数上创建和索引

```
to_char(week_date,'DD-MON-YYYY') 
```

但是当我下达命令时

```
create index week_date_index 
on TMP_AVAIL_COUNT_DTLS(TO_CHAR(week_date,'DD-MON-YYYY')) 
```

它说

> 错误：索引表达式中的函数必须标记为 IMMUTABLE

我也很不擅长 sql 。所以请帮助我如何为上述查询创建基于函数的索引。请帮我保住我的工作。给我查询，以便我可以直接在我的数据库中点击它们。问我你是否还需要什么。

```
table definition :  week_date date,
  division_code character varying(3),
  unit_code character varying(5),
  status_month character varying(2),
  status_year character varying(4),
  room_type_name character varying(30),
  avail_count numeric(3,0),
  total_count numeric(3,0),
  user_id character varying(30),
  status character(1) DEFAULT 'A'::bpchar
) 
```

解释分析如下

```
**"HashAggregate  (cost=293807.83..293808.04 rows=7 width=288) (actual time=20762.133..20762.133 rows=0 loops=1)"
"  ->  Unique  (cost=293807.42..293807.60 rows=7 width=35) (actual time=20762.129..20762.129 rows=0 loops=1)"
"        ->  Sort  (cost=293807.42..293807.44 rows=7 width=35) (actual time=20762.127..20762.127 rows=0 loops=1)"
"              Sort Key: room_type_name, total, d1, d2, d3, d4, d5, d6, d7"
"              ->  Append  (cost=41972.44..293807.33 rows=7 width=35) (actual time=20762.066..20762.066 rows=0 loops=1)"
"                    ->  Subquery Scan "*SELECT* 1"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2985.603..2985.603 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2985.601..2985.601 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2985.599..2985.599 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), ((sum(avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2985.579..2985.579 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2985.576..2985.576 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-20'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"                    ->  Subquery Scan "*SELECT* 2"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2944.060..2944.060 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2944.056..2944.056 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2944.054..2944.054 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, ((sum(avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2944.019..2944.019 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2944.015..2944.015 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-21'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"                    ->  Subquery Scan "*SELECT* 3"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2954.656..2954.656 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2954.653..2954.653 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2954.651..2954.651 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, '0'::text, ((sum(avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2954.617..2954.617 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2954.614..2954.614 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-22'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = E'APHYDRSA0\015\0120010'::text))"
"                    ->  Subquery Scan "*SELECT* 4"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2998.072..2998.072 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2998.070..2998.070 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2998.068..2998.068 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, '0'::text, '0'::text, ((sum(avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2998.034..2998.034 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2998.031..2998.031 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, E'DD-MON-\015\012YYYY'::text) = to_char(('2013-03-23'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"                    ->  Subquery Scan "*SELECT* 5"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2933.656..2933.656 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2933.653..2933.653 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2933.651..2933.651 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, '0'::text, '0'::text, '0'::text, ((sum(avail_count))::text || ' '::text), '0'::text, '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2933.616..2933.616 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2933.613..2933.613 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-24'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"                    ->  Subquery Scan "*SELECT* 6"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=3003.702..3003.702 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=3003.698..3003.698 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=3003.696..3003.696 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, ((sum(avail_count))::text || ' '::text), '0'::text"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=3003.663..3003.663 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=3003.658..3003.658 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-25'::date)::timestamp with time zone, E'DD-MON-\015\012YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"                    ->  Subquery Scan "*SELECT* 7"  (cost=41972.44..41972.47 rows=1 width=35) (actual time=2942.304..2942.304 rows=0 loops=1)"
"                          ->  Unique  (cost=41972.44..41972.46 rows=1 width=35) (actual time=2942.300..2942.300 rows=0 loops=1)"
"                                ->  Sort  (cost=41972.44..41972.44 rows=1 width=35) (actual time=2942.299..2942.299 rows=0 loops=1)"
"                                      Sort Key: room_type_name, sum(total_count), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, ((sum(avail_count))::text || ' '::text)"
"                                      ->  HashAggregate  (cost=41972.41..41972.43 rows=1 width=35) (actual time=2942.264..2942.264 rows=0 loops=1)"
"                                            ->  Seq Scan on tmp_avail_count_dtls  (cost=0.00..41972.40 rows=1 width=35) (actual time=2942.260..2942.260 rows=0 loops=1)"
"                                                  Filter: ((to_char((week_date)::timestamp with time zone, 'DD-MON-YYYY'::text) = to_char(('2013-03-26'::date)::timestamp with time zone, 'DD-MON-YYYY'::text)) AND ((user_id)::text = 'APHYDRSA00010'::text))"
"Total runtime: 20762.843 ms"** 
```

修改后查询

```
SELECT a.room_type_name,MAX(total),MAX(D1),MAX(D2),MAX(D3),MAX(D4),MAX(D5),MAX(D6),MAX(D7) FROM 
(SELECT DISTINCT room_type_name,SUM(total_count) as total,SUM(avail_count)||
' ' as D1,'0' as D2,'0' as D3,'0' as D4,'0' as D5,'0' as D6,'0' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY') AND user_id='APHYDRSA00010' GROUP BY room_type_name 
UNION all
SELECT DISTINCT room_type_name,SUM(total_count) as total,'0' as
D1,SUM(avail_count)||' ' as D2,'0' as D3,'0' as D4,'0' as D5,'0' as D6,'0' as D7
FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+1 AND user_id='APHYDRSA00010' GROUP BY room_type_name
UNION all
SELECT DISTINCT room_type_name,SUM(total_count) as total,'0' as D1,'0' as D2,SUM(avail_count)||' ' as D3,'0' as D4,'0' as D5,'0' as D6
,'0' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+2 AND user_id='APHYDRSA0
0010' GROUP BY room_type_name
UNION all
SELECT DISTINCT room_type_name,SUM(total_count) as total,'0' as D1,'0' as D2,'0' as D3,SUM(avail_count)||' ' as D4,'0' as D5
,'0' as D6,'0' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+3 AND user_id=
'APHYDRSA00010' GROUP BY room_type_name 
UNION all
SELECT DISTINCT room_type_name,SUM
(total_count) as total,'0' as D1,'0' as D2,'0' as D3,'0' as D4,SUM(avail_count)||' ' as D5,'0' as D6,'0' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+4 AND
user_id='APHYDRSA00010' GROUP BY room_type_name
UNION all
SELECT DISTINCT room_type_name,SUM(total_count) as total,'0' as D1,'0' as D2,'0' as D3,'0' as D4,'0' as
D5,SUM(avail_count)||' ' as D6,'0' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+5
AND user_id='APHYDRSA00010' GROUP BY room_type_name
UNION all
SELECT DISTINCT room_type_name,SUM(total_count) as total,'0' as D1,'0' as D2,'0' as D3,'0' as
D4,'0' as D5,'0' as D6,SUM(avail_count)||' ' as D7 FROM TMP_AVAIL_COUNT_DTLS WHERE week_date=TO_DATE('20-03-2013','DD-MM-YYYY')+
6 AND user_id='APHYDRSA00010' GROUP BY room_type_name) as a GROUP BY room_type_name 
```

上面的查询给出的输出只有 20 毫秒，但不知道它是否会给应用程序前端提供正确的输出？我可以将它发送给开发人员并要求他保留在应用程序中吗？请帮助我没有时间..解释新查询的计划..

```
"HashAggregate  (cost=4288.08..4288.11 rows=1 width=334) (actual time=0.641..0.641 rows=0 loops=1)"
"  ->  Append  (cost=612.52..4287.93 rows=7 width=334) (actual time=0.638..0.638 rows=0 loops=1)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.104..0.104 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.102..0.102 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.090..0.090 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.48 rows=1 width=35) (actual time=0.088..0.088 rows=0 loops=1)"
"                                Index Cond: (week_date = to_date('20-03-2013'::text, 'DD-MM-YYYY'::text))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.069..0.069 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.067..0.067 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.056..0.056 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.054..0.054 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 1))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.071..0.071 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.069..0.069 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text, '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.059..0.059 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.057..0.057 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 2))"
"                                Filter: ((user_id)::text = 'APHYDRSA0
"
"0010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.108..0.108 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.106..0.106 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, '0'::text, '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text, '0'::text, '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.071..0.071 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.069..0.069 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 3))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.093..0.093 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.091..0.091 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, '0'::text, '0'::text, '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text, '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.080..0.080 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.078..0.078 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 4))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.084..0.084 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.082..0.082 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text), '0'::text"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.070..0.070 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.068..0.068 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 5))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"        ->  Unique  (cost=612.52..612.55 rows=1 width=35) (actual time=0.099..0.099 rows=0 loops=1)"
"              ->  Sort  (cost=612.52..612.53 rows=1 width=35) (actual time=0.097..0.097 rows=0 loops=1)"
"                    Sort Key: public.tmp_avail_count_dtls.room_type_name, sum(public.tmp_avail_count_dtls.total_count), '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, '0'::text, ((sum(public.tmp_avail_count_dtls.avail_count))::text || ' '::text)"
"                    ->  HashAggregate  (cost=612.49..612.51 rows=1 width=35) (actual time=0.084..0.084 rows=0 loops=1)"
"                          ->  Index Scan using week_date_index on tmp_avail_count_dtls  (cost=0.00..612.49 rows=1 width=35) (actual time=0.082..0.082 rows=0 loops=1)"
"                                Index Cond: (week_date = (to_date('20-03-2013'::text, 'DD-MM-YYYY'::text) + 6))"
"                                Filter: ((user_id)::text = 'APHYDRSA00010'::text)"
"Total runtime: 0.935 ms"** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T06:11:45.097

首先，这是一个怪物查询，功能索引真的不是开始的地方。首先要做的是摆脱不必要的函数调用，以便您可以使用普通索引。

首先要做的是摆脱那些 to_char 调用。它们只会使索引变得更加困难并使用 CPU 周期。

要做的第二件事是摆脱使用 CASE 语句的单个查询替换这些 UNION。

如果这些不能解决您的性能问题，请发布解释分析结果，以便我们查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:40:17.083

要在表达式上创建索引，表达式应始终为相同的输入提供相同的输出。据 PostgreSQL 所知，只有标记为不可变的函数才能这样做。to_char 不是不可变的，因为它的输出取决于当前会话中的设置。

话虽如此，我强烈建议您遵循 Chris Travers 的建议。

# c++ - cv::Mat 内存分配和释放内存

> ID：15540444
> 
> 赞同：0
> 
> 时间：2013-03-21T05:56:15.570
> 
> 标签：c++, opencv

我访问`cv::Mat data`using的行`float* dataptr = data.ptr<float>(0);` 循环之后，我应该释放`float* dataptr`using delete dataptr 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:18:22.970

该指针位置属于 Mat 结构，而 Mat 是真正的所有者。

# java - 编写一个切换按钮来设置小部件更新时间

> ID：15540445
> 
> 赞同：0
> 
> 时间：2013-03-21T05:56:16.910
> 
> 标签：java, android, widget, android-appwidget, togglebutton

```
@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    if(Tb.isChecked()){
        android.appwidget.AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals("120000");
    }else{
        android.appwidget.AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals("300000");
    }
} 
```

我正在开发一个小部件，它可以选择每 2 分钟和 30 分钟获取一次更新。所以我做了一个切换按钮来切换时间。我使用上面的代码块来启用称为 Tb 的切换按钮。该应用程序未显示错误，但似乎无法正常工作。有人可以检查我的代码是否有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:04:25.240

这段代码没有设置任何东西。

您正在测试`ACTION_APPWIDGET_UPDATE`它是否等于“120000”或“300000”。`ACTION_APPWIDGET_UPDATE`是一个始终等于["android.appwidget.action.APPWIDGET_UPDATE"](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_UPDATE)的字符串常量。

因此，这些行中的每一行都不做任何事情，并且`equals()`未评估的测试总是返回`false`。

好消息是以下代码行可能会被正确触发，它们只是不是设置间隔值的正确方法：

```
android.appwidget.AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals("120000");
android.appwidget.AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals("300000"); 
```

要解决此问题，请找到另一种设置 2 分钟和 30 分钟间隔值的方法。

# c# - 从文本文件中检索数据

> ID：15540446
> 
> 赞同：0
> 
> 时间：2013-03-21T05:56:22.327
> 
> 标签：c#, algorithm

我的问题是关于从文本文件中获取持续数据。这是问题的描述：

我的要求是将每一行保存在一个文本文件中。此文本文件由外部来源以未知的时间间隔提供。此外，最重要的是 - 当文件达到 100 行（例如）时，它会将这些行存档在无法访问的源中并清除其内容。

考虑一个监听器查看文件并看到它包含 10 行的情况，监听器将获取这些行并保存它们。然后在增量时间（例如 1 秒）之后，它再次查看并看到 93 行。它还保存了未录制的 83 个。现在，当听众第三次偷看时，它会看到 3 行。它显然会保存它们，但请注意有 7 行（索引为 94-100）没有被听众记录下来。

看起来偷看恒定的增量并不能确保不会发生失误。

您如何建议实现这一要求的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:16:31.583

您可以将行保存在某种形式的集合中，例如并使用 while 或 if 语句`List<string>`验证集合的容量（例如 100），`List1.Add(line)``while(count < capactity)`

如果您对文件具有读/写访问权限，则可以在将这些行添加到集合后删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:05:56.933

这是从文件中逐行获取数据并将其保存到数据库的代码>>

```
 string line;
            string[] subLine;
            DialogResult result = openFileDialog1.ShowDialog();
            try
            {
                if (result == DialogResult.OK)
                {
                    string file = openFileDialog1.FileName;
                    StreamReader inputData = new StreamReader(file);
                    const int maxRecords = 500;
                    int actualRecords = 0;
                    while ((line = inputData.ReadLine()) != null)
                    {
                        subLine = line.Split(',');

                        try
                        {

                            string unknown = "unknown Fileld";
                            con.Open();
                            // int j=subLine.Length;
                            //for(int i=0;i<subLine.Length;i++)
                            if (actualRecords < maxRecords)
                            {
                                int i = 0;
                                //int j=subLine.Length;
                                //int index=subLine.Length-j;

                               // SQL= "insert into tradeFile values('" + ID + "','" + subLine[i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + unknown + "')";

                                cmd = new SqlCommand("insert into tradeFile values('" + subLine[i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + unknown + "')", con);
                                // cmd = new OleDbCommand("insert into tradeFile values('" + subLine[i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + unknown + "')", con);
                                cmd.ExecuteNonQuery();
                                actualRecords++;
                                //  j--;

                            }
                            else
                            {
                                int i = 0;
                                //int j=subLine.Length;
                                //int index=subLine.Length-j;
                                cmd = new SqlCommand("insert into tradeFile values('" + subLine[i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + unknown + "')", con);
                                //cmd = new OleDbCommand("insert into tradeFile values('" + subLine[i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + subLine[++i].ToString() + "','" + unknown + "')", con);
                                cmd.ExecuteNonQuery();
                                actualRecords = 0;
                            }

                        }
                        catch (Exception ex)
                        {
                            MessageBox.Show(ex.Message);
                        }
                        finally
                        {
                            con.Close();
                        }
                        //counter++;
                    }
                    inputData.Close();
                }
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            } 
```

希望您能应用进一步的逻辑，这将对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:10:38.110

更多不同文件操作详情点击这里

[C#中的文件操作](http://niharstechnicalfunda.blogspot.in/2013/03/file-operations-in-c-net.html)

# c++ - Poco::Net 库挂在 Poco::Net::SocketStream 的输出上

> ID：15540448
> 
> 赞同：0
> 
> 时间：2013-03-21T05:56:35.573
> 
> 标签：c++, networking, tcp, port, poco-libraries

通过[POCO 网站](http://pocoproject.org/documentation/index.html)上的幻灯片，我编写了一个与他们的第一个 NET 示例几乎相同的程序。

```
#include <iostream>
#include <cstdlib>

#include <Poco/Net/SocketAddress.h>
#include <Poco/Net/StreamSocket.h>
#include <Poco/Net/SocketStream.h>
#include <Poco/StreamCopier.h>

int main(int argc, char** argv){

    Poco::Net::SocketAddress socket_address("www.google.com",80);
    Poco::Net::StreamSocket stream_socket(socket_address);
    Poco::Net::SocketStream socket_stream(stream_socket);

    socket_stream << "GET / HTTP/1.1\r\n"
           "Host: www.google.com\r\n"
           "\r\n";
    socket_stream.flush();

    Poco::StreamCopier::copyStream(socket_stream,std::cout);

    return EXIT_SUCCESS;
} 
```

CopyStream 函数输出一些数据，然后挂起。如何获取其余数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T07:39:39.347

改用 Poco::Net::DialogSocket。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T01:53:46.503

似乎答案是在调用`shutdownSend()`后立即调用套接字`flush()`。

请参阅 poco 问题 2384 [https://github.com/pocoproject/poco/issues/2384](https://github.com/pocoproject/poco/issues/2384)

所以它会是：

socket_stream.flush(); stream_socket.shutdownSend();

Poco::StreamCopier::copyStream(socket_stream,std::cout);

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T16:21:21.447

使用我自己的 TCP 服务器进行测试，如果无法连接到远程服务器，我看到您的代码挂起。

如果有一个正在运行的 TCP 服务器，在向远程服务器发送和接收一些数据之后，如果我关闭远程服务器连接（关闭我的服务器），服务器响应将转到标准输出控制台。

您是否尝试通过代理与谷歌连接？

另一个线索......来自 Poco::Net::SocketStream 描述：

> 当使用来自 SocketStream 的格式化输入时，请始终确保为套接字设置了接收超时。否则您的程序可能会意外挂起。

尝试在代码中使用 try-catch 块来测试它是否正在启动一些异常。

祝你好运

# java - 验证具有 int 值的文本字段

> ID：15540449
> 
> 赞同：-1
> 
> 时间：2013-03-21T05:56:42.120
> 
> 标签：java, swing, integer, jtextfield

我正在使用 Netbeans IDE 我想验证用于输入折扣百分比的文本字段。所以我想停止在 keytyped 事件中输入超过 100 的数字。

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:58:12.750

不要使用`KeyListener`s 来尝试过滤文本组件。

反而...

*   使用`DocumentFilter`. 这将允许您在将字段内容应用于文档之前对其进行过滤。查看[实现 DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)和[示例](http://www.jroller.com/dpmihai/entry/documentfilter)以获取更多信息
*   使用`JSpinner`. 查看[如何使用微调器](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)

**更新了示例**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestSpinner02 {

    public static void main(String[] args) {
        new TestSpinner02();
    }

    public TestSpinner02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JSpinner spinner = new JSpinner();
                spinner.setModel(new javax.swing.SpinnerNumberModel(0, 0, 100, 1));

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(spinner);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

# assembly - 如何在 x86 汇编中将 8 位地址移动到 16 位寄存器中？

> ID：15540450
> 
> 赞同：1
> 
> 时间：2013-03-21T05:56:45.110
> 
> 标签：assembly, x86

在这里，我试图将变量 X（它是一个 8 位变量）移动到寄存器 bx（它是一个 16 位寄存器）中。在这种情况下，如何将 X 的值移动到寄存器 bx 中？

```
.686p
.model flat,stdcall
.stack 2048

.data
X byte 5
ExitProcess proto, exitcode:dword
.code

start:
invoke  ExitProcess, 0

mov bx, X; 1>p4.asm(13): error A2022: instruction operands must be the same size

end start ;what does the end statement do? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T06:07:06.037

除了 Rahul 的回答之外，如果您还需要归零`bh`并且正在处理任何 80386 或更新版本（如 所示`.686p`）是：

```
movzx bx, X 
```

如果您使用 X 作为有符号值并且需要符号扩展`bx`：

```
movsx bx, X 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T05:58:16.563

BX 的低 8 位可寻址为 BL。

所以，你需要做的就是： `mov bl, X`

# windows-phone-7 - wp7：我的位置更改时是否可以自动触发？

> ID：15540452
> 
> 赞同：1
> 
> 时间：2013-03-21T05:56:59.253
> 
> 标签：windows-phone-7, bing-maps

我正在尝试创建跟踪应用程序。在此应用程序中，我正在使用位置标签。

那么是否可以在位置更改时自动获取特定事件的触​​发器或消息？即：我想知道用户是否搬到了新位置。如果用户移动了，我想从我的应用程序中触发特定事件。它是一个特定的 WP7 服务，它可以通知我的应用程序用户已更改其位置并从我的应用程序触发事件吗？

我担心的是，如果用户当时更改位置，我想调用一个 Web 服务并将此位置数据发送到我的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:22:33.263

您询问的功能称为“地理围栏”。Windows Phone API 不支持这种开箱即用的方法，但您自己很容易实现它。谷歌“geofencing windows phone”，你会发现很多这样的文章：

[http://blogs.msdn.com/b/dragoman/archive/2010/10/13/wp7-code-geofencing-with-the-geolocation-api-and-rx.aspx](http://blogs.msdn.com/b/dragoman/archive/2010/10/13/wp7-code-geofencing-with-the-geolocation-api-and-rx.aspx)

# c# - 在 C# 中访问上下文会话变量

> ID：15540455
> 
> 赞同：0
> 
> 时间：2013-03-21T05:57:22.683
> 
> 标签：c#, session, ihttphandler, ihttpmodule

我有一个 ASP.NET 应用程序和扩展 IHttpModule 的 dll。我已经使用以下方法将会话变量保存在 httpcontext 通过

```
public class Handler : IHttpModule,IRequiresSessionState
  {

 public void Init(HttpApplication httpApp)
 {
    httpApp.PreRequestHandlerExecute += new EventHandler(PreRequestHandlerExecute);
}

 public void PreRequestHandlerExecute(object sender, EventArgs e)
        {
                var context = ((HttpApplication)sender).Context;
                context.Session["myvariable"] = "Gowtham";
        }
} 
```

在我的 asp.net Default.aspx 页面中，我使用代码来检索值

```
 public partial class _Default : System.Web.UI.Page, IRequiresSessionState
    {
    protected void Page_Load(object sender, EventArgs e)
        {
      String token = Context.Session["myvariable"].ToString();
    }
} 
```

我收到错误响应

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

为了确保变量是否存储在会话中，我在将会话中的值存储为之后，通过类处理程序中的以下方法进行了交叉检查

```
 string ss = context.Session["myvariable"].ToString(); 
```

它执行得很好并从会话中检索了值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:16:05.487

为什么需要直接使用 Context 而不是 Session？从代码中我只能假设您要在 Session 中设置一个值，然后在页面加载时读取该值。而不是你做这样的事情，你可以这样做：

1.  添加一个全局应用程序类，右键单击您的项目，添加 > 新项目，选择全局应用程序类，然后在该文件上，插入以下代码以初始化值

    ```
    protected void Session_Start(object sender, EventArgs e)
    {
        Session["myvariable"] = "Gowtham";
    } 
    ```

2.  在 Page_Load 上，您可以通过以下方式访问：

    ```
    if ( Session["myvariable"] != null ) {
        String token = Context.Session["myvariable"].ToString();
    } 
    ```

希望这有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:15:49.100

用于`System.Web.HttpContext.Current.Session["myvariable"]`两个部分

# iphone - UIAlertView：在警报框外单击时关闭 UIAlertView

> ID：15540458
> 
> 赞同：2
> 
> 时间：2013-03-21T05:57:38.867
> 
> 标签：iphone, objective-c, xcode, uialertview

嗨，我是 Xcode n Objective-C 的新手，在这方面需要帮助。我有一个无按钮 UIAlertView，它会在点击自身时被关闭。但我只想在点击警报框外部而不是里面时关闭它。谢谢

```
 //generating the alertview with no button

 +(void) showAlertNoButtons:(NSString*)title text:(NSString*)text{

    UIAlertView* alertView = [[UIAlertView alloc]
                          initWithTitle:title message:text
                          delegate:self cancelButtonTitle:nil
                          otherButtonTitles:nil];

   UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
                                    initWithTarget:self
                                    action:@selector(dismissAlert:)];

   alertView.delegate=self;
   [alertView addGestureRecognizer:singleTap];
   [alertView setMultipleTouchEnabled:YES];
   [alertView setUserInteractionEnabled:YES];

  [alertView show];
 }
   //
  +(void)dismissAlert:(UITapGestureRecognizer *)gesture
    {
      UIAlertView* alertView =(UIAlertView *)gesture.view;
      [alertView dismissWithClickedButtonIndex:0 animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:00:23.193

你需要打电话`- (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated`

当您点击其他任何地方时

这段代码将处理你的水龙头

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [self dismissWithClickedButtonIndex:index animated:YES];
} 
```

# java - 将日期前 12 天显示为当前日期

> ID：15540460
> 
> 赞同：1
> 
> 时间：2013-03-21T05:57:59.497
> 
> 标签：java, calendar

我制作了一个自定义日历。它将设备的日期显示为当前日期。但我的要求是将日期前 12 天显示为当前日期。例如，今天是 21，但我希望我的日历显示 9。我也想对年份做同样的事情。我知道如何获取当前日期。我正在使用此代码。

```
_calendar = Calendar.getInstance(Locale.getDefault());
month = _calendar.get(Calendar.MONTH) + 1;
year = _calendar.get(Calendar.YEAR);
Log.d(tag, "Calendar Instance:= " + "Month: " + month + " " + "Year: " + year); 
```

我的新代码是

```
_calendar = Calendar.getInstance(Locale.getDefault());
month = _calendar.get(Calendar.MONTH) + 1;
year = _calendar.get(Calendar.YEAR);
Log.d(tag, "Calendar Instance:= " + "Month: " + month + " " + "Year: " + year);
/*_calendar.add(Calendar.DAY_OF_YEAR, -12);*/
_calendar.roll(Calendar.DAY_OF_MONTH, -12);
_calendar.roll(Calendar.MONTH, -12);
Calendar _calendar=Calendar.getInstance(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:06:24.933

尝试：

```
_calendar.roll(Calendar.DAY_OF_YEAR, -12);
_calendar.roll(Calendar.YEAR, -12); 
```

这会将天数[回滚](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#roll%28int,%20int%29)12 天，然后将年份回滚 12 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:06:13.940

在许多语言`NOW`中，有一个函数`DateTime`在调用时返回 a 。你可以`add`给它负 (-) 天数，它会返回你需要的。我总是忘记这一点，以为你只能添加一个积极的，但这是不正确的。;-)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:07:23.937

试试看。

```
_calendar = Calendar.getInstance(Locale.getDefault());
_calendar.setTime(new Date());
_calendar.add(Calendar.DATE, -12);
Date twelveDaysAgo = _calendar.getTime(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:10:08.900

这会将日期向后移动 12 天，如果需要，也会更改月份/年份。

```
_calendar.add(Calendar.DAY_OF_YEAR, -12); 
```

# c - 如何在 IBM i 系列 (AS/400) 上找到与 CHGJOB INQMSGRPY(*DFT) 对应的 ILE C 函数

> ID：15540468
> 
> 赞同：0
> 
> 时间：2013-03-21T05:58:29.477
> 
> 标签：c, command, ibm-midrange

我知道 C ILE 中有很多 CL 命令可用，但通常很难找到与 CL 命令对应的 C 函数名称。

您知道引用所有这些 ILE C 函数的网站吗？你知道CL命令对应的ILE C函数：CHGJOB INQMSGRPY(*DFT)

当然，我曾尝试在 IBM 公共巨石网站上搜索...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:16:15.173

我没有从 C 调用 API 的经验，但我认为您正在寻找 QWTCHGJB API。

[这是 IBM 的 V5R4 的 QWTCHGJB API 文档](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/apis/qwtchgjb.htm)。

[这是一个演示对此 API 的调用的代码示例](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzam3/rzam3kickoff.htm)。

[您可以使用 API 查找器来搜索此类信息。](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/apifinder/finder.htm)

（请注意，您应该为您的特定操作系统版本寻找适当的文档和资源。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:18:58.620

我认为@dmc 有您正在寻找的答案。通常，CL 命令在 C 中不可用，但有可用的 API 执行许多与 CL 命令相同的功能。

如果您确实想运行操作系统命令，请使用 system()。

```
#include <stdlib.h>

   int main(void)
   {
     int result;

     result = system("CHGJOB INQMSGRPY(*DFT)"); 
```

# bash - 在 Bash 编程中。遇到'\ n'时如何读取确切的字节数而不返回？

> ID：15540474
> 
> 赞同：1
> 
> 时间：2013-03-21T05:59:00.423
> 
> 标签：bash

在 Bash 编程中，我想准确读取 10 个字节，但在遇到 '\n' 时不返回
我知道在 Bash 4.x 中，有 -N 选项可以实现此功能：

```
#!/bin/bash
exec 6<>/dev/tcp/localhost/6666
read -r -N 10 -u 6 
```

但是当没有提供 -N 选项时这是如何实现的：比如 Bash 3.x 版本？
首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:05:36.037

这可能会奏效：

```
dd ibs=10 count=1 <&6 2>/dev/null 
```

因为`head -c 10 <&6`在 Solaris 上不受支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:20:59.530

以 Bash 3.2 为例：

```
$ echo $BASH_VERSION
3.2.25(1)-release
$ cat file
0123
4567
89ab
cdef
$ read -r -n 8 -d $'\0' var < file
$ echo "$var"
0123
456
$ 
```

# ios - corebluetooth 读取 RSSI 错误：操作被取消

> ID：15540481
> 
> 赞同：8
> 
> 时间：2013-03-21T05:59:15.617
> 
> 标签：ios, xcode4.5, core-bluetooth, bluetooth-lowenergy, rssi

我正在使用 Corebluetooth 框架开发应用程序，

并连接到 BLE 设备以获取 RSSI 值。

我设置了一个定期读取RSSI的功能，定时器代码如下

```
NSTimer *timer;
timer = [NSTimer scheduledTimerWithTimeInterval:1.2f target:self selector:@selector(detectRSSI) userInfo:nil repeats:YES]; 
```

并且detectRSSI代码如下

```
- (void)detectRSSI
{
    [self.peripheral readRSSI];
} 
```

所以问题是，

该功能工作正常，但是当我设置的时间间隔小于 1.2 秒时，

peripheralDidUpdateRSSI 会随机报如下错误信息：

```
The operation was cancelled. 
```

如果速率超过 1.2 秒，则不会发生这种情况。

有谁知道更频繁地读取 RSSI 值（0.5 秒或更短）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T13:54:28.040

我也遇到同样的问题。对我来说，当我简单地添加`sleep(2)`inside时它就可以工作`peripheralDidUpdateRSSI`。只是不要忘记在初始化 CBCentralManager 时使用后台队列。

```
- (void)peripheralDidUpdateRSSI:(CBPeripheral *)peripheral error:(NSError *)error
{
    NSLog(@"RSSI = %@", peripheral.RSSI);
    sleep(2);
    [self.connectedPeripheral readRSSI];
} 
```

# apache - 安装 mod_jk.so 后配置 http 未运行

> ID：15540482
> 
> 赞同：0
> 
> 时间：2013-03-21T05:59:15.850
> 
> 标签：apache, tomcat, web-applications

我安装了：`mod_jk-1.2.31-httpd-2.2.x.so`

`httpd`更新后重启时`mod_jk`

```
/sbin/service http stop 
```

错误：

> httpd：/usr/local/apache/conf/httpd.conf 第 30 行的语法错误：/usr/local/apache/conf.d/mod_jk.conf 第 2 行的语法错误：无法加载 /usr/local/apache /modules/mod_jk.so 进入服务器：/usr/local/apache/modules/mod_jk.so：错误的 ELF 类：ELFCLASS32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:14:45.603

找到了 64 位系统的正确编译版本。

# hadoop - 如何在 java 中的 Storm Bolt 中使用 Hadoop FS API

> ID：15540486
> 
> 赞同：0
> 
> 时间：2013-03-21T05:59:54.687
> 
> 标签：hadoop, apache-storm

我想将数据存储在 Storm Spout 发出的 hdfs 中。我在 Bolt 类中添加了 hadoop FS API 代码，但它会引发编译错误。

以下是**Storm 螺栓**类：

```
package bolts;
import java.io.*;
import java.util.*;
import java.net.*;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;
import backtype.storm.topology.BasicOutputCollector;
import backtype.storm.topology.OutputFieldsDeclarer;
import backtype.storm.topology.base.BaseBasicBolt;
import backtype.storm.tuple.Fields;
import backtype.storm.tuple.Tuple;
import backtype.storm.tuple.Values;

public class DataNormalizer extends BaseBasicBolt {

  public void execute(Tuple input, BasicOutputCollector collector) {
    String sentence = input.getString(0);
    String[] process = sentence.split(" ");
    int n = 1;
    String rec = "";
    try {
        String filepath = "/root/data/top_output.csv";
        String dest = "hdfs://localhost:9000/user/root/nishu/top_output/top_output_1.csv";

        Configuration conf = new Configuration();
        FileSystem fileSystem = FileSystem.get(conf);
        System.out.println(fileSystem);
        Path srcPath = new Path(source);
        Path dstPath = new Path(dest);
        String filename = source.substring(source.lastIndexOf('/') + 1,
                source.length());
        try {
            if (!(fileSystem.exists(dstPath))) {
                FSDataOutputStream out = fileSystem.create(dstPath, true);
                InputStream in = new BufferedInputStream(
                        new FileInputStream(new File(source)));
                byte[] b = new byte[1024];
                int numBytes = 0;
                while ((numBytes = in.read(b)) > 0) {
                    out.write(b, 0, numBytes);
                }
                in.close();
                out.close();

            } else {
                fileSystem.copyFromLocalFile(srcPath, dstPath);
            }
        } catch (Exception e) {
            System.err.println("Exception caught! :" + e);
            System.exit(1);
        } finally {
            fileSystem.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

我还在 CLASSPATH 中添加了 hadoop jars。以下是 classpath 的值：

```
$STORM_HOME/storm-0.8.1.jar:$JAVA_HOME/lib/:$HADOOP_HOME/hadoop-core-1.0.4.jar:$HADOOP_HOME/lib/:$STORM_HOME/lib/ 
```

还复制了 hadoop 库：在**Storm/lib**目录中**的 hadoop-cor-1.0.4.jar、commons-collection-3.2.1.jar**和**commons-cli-1.2.jar 。**

 **当我构建这个项目时，它会抛出以下错误：

```
3006 [Thread-16] ERROR backtype.storm.daemon.executor  -
java.lang.NoClassDefFoundError: org/apache/commons/configuration/Configuration
        at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.<init>(DefaultMetricsSystem.java:37)
        at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.<clinit>(DefaultMetricsSystem.java:34)
        at org.apache.hadoop.security.UgiInstrumentation.create(UgiInstrumentation.java:51)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:216)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:184)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:236)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:466)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:452)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:1494)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1395)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123)
        at bolts.DataNormalizer.execute(DataNormalizer.java:67)
        at backtype.storm.topology.BasicBoltExecutor.execute(BasicBoltExecutor.java:32)
       ...................... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:21:03.340

错误消息告诉您缺少 Apache 公共配置。您必须将其添加到类路径中。

更一般地说，您应该将所有 Hadoop 依赖项添加到您的类路径中。您可以使用依赖管理器（Maven、Ivy、Gradle 等）找到它们，或者查看`/usr/lib/hadoop/lib`安装了 Hadoop 的机器。**

# ios - 如何检测 UILabel 中的省略号？

> ID：15540494
> 
> 赞同：0
> 
> 时间：2013-03-21T06:00:37.987
> 
> 标签：ios, objective-c, uilabel, detection

我正在编程`Objective C`。我有一个`UITableView`with`UILabel`的。如何检测 a 中的省略号`UILabel`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T06:17:06.270

首先，我们可以获得将在标签中呈现的文本的宽度。然后我们可以将该宽度与标签的宽度进行比较。如果该宽度超过，则字符串将被截断，否则不会。

**更新**

如果标签有行，则计算行数并检查 lablewidth*numofLines

```
UILabel *lblAppTitle = (UILabel*)[self.view viewWithTag:777];    
CGSize stringSize = [lblAppTitle.text sizeWithFont:lblAppTitle.font];

//Count Number of lines
[lblAppTitle sizeToFit];
int numLines = (int)(lblAppTitle.frame.size.height/lblAppTitle.font.leading);

if (stringSize.width > (lblAppTitle.frame.size.width)*numLines)
    NSLog(@"truncated string");
else
    NSLog(@"did not truncate string"); 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T06:03:45.683

```
NSString *str = @"Hello this is the ...";
NSRange range = [str rangeOfString:@"..."];
if (range.location>0 && range.length == 3) {
    //Found
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T06:14:41.517

```
 UILabel *lbl ;
 lbl.text = @"Hello..World.";
 NSString * charToCount = @".";
 NSArray * array = [lbl.text componentsSeparatedByString:charToCount];
 if([array count] >= 3)
    NSLog(@"Found");
 else 
    NSLog(@"Not Found"); 
```

希望对你有帮助...

# php - 将 MathJax 加载到加载的 div 中

> ID：15540496
> 
> 赞同：0
> 
> 时间：2013-03-21T06:00:42.560
> 
> 标签：php, html, mathjax

不完全确定如何表达这个问题。

我有一个涉及使用 MathJax 来显示数学问题的网站。页面上的文本是根据某人搜索的内容从单独的文件中加载的。因此，例如，搜索“apple”会打开“apple”页面。该文本存储在第二个 php 文件中的一个类中，并且在其中也输入了数学方程。但是，一旦我将方程加载到页面中，它就不会排版它：

```
<script type="text/javascript" 
src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">

function compendium()
{
    document.getElementById('title').innerHTML = '<?php echo $pageTitle ?>';
    document.getElementById('body').innerHTML = '<?php links($pageBody, $new_classes) ?>';
    document.getElementById('nav').innerHTML = '<?php echo $pageNav ?>';
}
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
    displayMath: [['[math]','[math]']]}
});
</script> 
```

我不完全确定该怎么做，但我希望它在加载后排版 euqation。有人知道我能做些什么吗？方程作为变量存储在辅助文件的一个类中，并打印出来。它会做什么，但它不会排版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:22:01.620

每次加载新内容后调用此 javascript 函数

```
function update_mathjax(){
    MathJax.Hub.Queue(['Typeset',MathJax.Hub,'body']);
} 
```

这里`'body'`可以替换为您想要更新的任何 div 的 id，这样您就可以执行类似的操作

```
function update_mathjax(id){
    MathJax.Hub.Queue(['Typeset',MathJax.Hub,id]);
} 
```

然后调用`update_mathjax('body')`或`update_mathjax('title')`。这些是 div id 的记住，而不是 html 元素。我不确定使用元素名称本身是否有效，但我不这么认为......

# machine-learning - 在 mahout 分类器中支持其他语言

> ID：15540504
> 
> 赞同：0
> 
> 时间：2013-03-21T06:01:28.650
> 
> 标签：machine-learning, mahout

我正在训练 mahout naive-bayes 分类器。我的训练数据具有以下性质：

```
 Sports --> "text from different languages but related to sports"
 Health --> "text from different languages but related to health" 
```

在这种情况下，mahout 会支持英语以外的数据吗？或其他语言文本将被忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:02:44.050

是和不是。分类器很乐意对任何字符串进行操作，并且不会为它们分配意义。语言无关紧要。但是，它绝不会理解“体育”和“驱逐出境”在不同语言中是同一个词。

# c# - 使用 C# 将文件添加到 solr

> ID：15540508
> 
> 赞同：0
> 
> 时间：2013-03-21T06:01:45.730
> 
> 标签：c#, solr

我有想要索引到 solr 的 XML 文件。是否有 C# 代码可以在不将整个文档重新构建为 .net 类的情况下执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:04:32.417

您可以使用[SolrNet](https://code.google.com/p/solrnet)并遵循[映射详细信息中概述的](https://code.google.com/p/solrnet/wiki/Mapping)*完全松散的映射*步骤。这将允许您仅使用 a代替映射到索引文档的类来创建文档。 `Dictionary<string, object>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:38:49.573

如果您足够灵活，您可以检查 Solr [DataImportHandler](http://wiki.apache.org/solr/DataImportHandler) (DIH)，这将允许您直接[索引 xml 文件](http://wiki.apache.org/solr/DataImportHandler#Usage_with_XML.2BAC8-HTTP_Datasource)，而无需与 C# 代码进行任何交互。

# php - 地址中使用逗号时将 CSV 文件导入 MySQL 的问题

> ID：15540517
> 
> 赞同：0
> 
> 时间：2013-03-21T06:02:10.830
> 
> 标签：php, mysql, csv

我正在使用我在网上找到的脚本将 CSV 文件导入 MySQL： [http](http://www.johnboy.com/blog/tutorial-import-a-csv-file-using-php-and-mysql) ://www.johnboy.com/blog/tutorial-import-a-csv-file-using-php-and-mysql但是当脚本在单元格中检测到这样的地址中的逗号`My address, CO 80113`，它也会在那里拆分。

我见过一个解决方案，您可以在其中将 excel 保存到制表符分隔的 txt 文件中。然后你进入记事本并用分号替换选项卡。

这是“修复地址中的逗号”问题的最佳做法吗？

我的最终目标是从 Highrise 获取一个包含数百个客户端的 CSV 文件到我们的 MySQL 数据库中，然后每隔几个月更新一次，所以这似乎是一个不错的脚本，但我是不是走错了路？

**编辑：看来拆分单元格的PHP代码部分是这样的**

```
while ($data = fgetcsv($handle,1000,",","'")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:16:36.240

如果您使用逗号作为列分隔符，那么您应该引用所有字符串字段值，例如 -

```
1,'My address, CO 80113'
2,'His address, CO 80114'
4,'Her address, CO 80115'
and so on 
```

尝试使用带有 FIELDS **ENCLOSED BY** '\'' 选项的[LOAD DATA INFILE语句。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:08:39.507

逗号 (',') 是 CSV 文件的 hart，因此当您生成 csv 文件时，它会在找到逗号时划分单元格。

所以我认为你应该用空格或任何其他分隔符替换逗号。当您为 CSV 生成最终代码时，您可以使用 PHP 的默认函数**str_replace() 。****

# java - Java内部消息队列/JMS

> ID：15540518
> 
> 赞同：2
> 
> 时间：2013-03-21T06:02:13.123
> 
> 标签：java, spring, jms, message-queue

我有一个我正在重写的 Web 应用程序，它当前执行大量的审计数据 sql 写入。用户交互的每一步都会导致执行一个将一些信息写入数据库的方法。这可能会因数据库问题导致交互停止，从而影响用户。

理想情况下，我想移动这是一种基于消息的方法，如果需要写入数据，它也会被触发一个队列，消费者在其中选择这些并将它们写入数据库。它不是必要的数据，如果服务器出现故障，丢失是可以接受的。

如果我应该尝试使用嵌入式 JMS 队列和代理或 Java 队列，我只是有点困惑。或者我不熟悉的东西（建议？）

最好的方法是什么？

更多信息：该应用程序使用 spring 并在 websphere 6 上运行。所有消息通信都是本地的，它不会与另一台服务器通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:10:44.560

根据您对问题的描述，一个简单的队列就足够了。你可以有一个固定大小的队列，如果它填得太快，你可以丢弃消息，因为你说它们并不重要。

需要考虑的事项：

*   其他应用程序现在或将来是否也需要此功能。
*   产生消息的速度是否如此之大，以至于当大量用户登录时它会开始消耗大量堆内存。如果消息不应该丢失，这很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T06:28:01.650

但是，我不确定这是否是 Java EE 容器中的最佳实践。

由于您已经在 WebSphere 机器上运行，因此您确实有一个 JMS 代理（SIBus）在运行。启动异步操作的最简单方法是发送 JMS 消息并让 MDB 读取它们 - 并进行数据库插入。您可能会遇到一些问题，在 WebSphere 中生成自己的线程仍然可以利用 JNDI 资源的初始上下文。

在非 Java EE 的情况下，我会使用类似普通的 LinkedBlockingQueue 或任何阻塞队列的东西，并且只有一个线程轮询该队列以将新消息插入数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T06:48:11.393

我认为使用 JMS 进行日志记录是多余的，尤其是如果 loggin 是使用 JMS 的唯一原因。

看看[DBAppender](http://logback.qos.ch/apidocs/ch/qos/logback/classic/db/DBAppender.html)，你可以直接登录到数据库。如果您关心性能，您可以使用 Logback 异步记录。

如果您仍想采用 JMS 方式，那么 Logback 具有 JMS[队列](http://logback.qos.ch/apidocs/ch/qos/logback/classic/net/JMSQueueAppender.html)和[主题](http://logback.qos.ch/apidocs/ch/qos/logback/classic/net/JMSTopicAppender.html)附加程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:08:52.040

仅当涉及不同的服务器时，我才会使用 JMS 队列。因此，在您的情况下，我将使用带有一些 Java 队列的简单纯 Java 来执行此操作。

# c# - ipaddress 字符串返回 ::1。如何从 localhost 获取用户测试的完整 ipadrress

> ID：15540521
> 
> 赞同：3
> 
> 时间：2013-03-21T06:02:39.407
> 
> 标签：c#, asp.net, asp.net-mvc

我想检索使用 c# 登录的用户的 ip 地址。

我写了以下代码

```
 var ipaddress = System.Web.HttpContext.Current.Request.UserHostAddress; 
```

但`ipaddress`包含`::1`. 我怎样才能得到完整的地址。我只是测试本地主机中的代码。我已经安装了 iis7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:06:55.387

`::1`根据规范实际上是指向环回的有效地址。如果您想获取计算机的公共 IP 地址，则必须使用域名（DNS 指向您的本地计算机）或在 url 中使用您的公共 IP 代替`localhost`

## 编辑

你的代码很好（没有什么可以改变的）但是如果你想获得你的公共 IP 地址（不是 ::1 或 127.0.0.1），你必须从另一个接口进行 http 调用（这意味着它必须出去把 DNS 翻译成 ip 并查询回来）。您将无法离线执行此操作。

我希望这会有所帮助，对不起，我再清楚不过了。这更像是一个网络问题，而不是编程。

# java - 具有 3 列键的 Java Map

> ID：15540522
> 
> 赞同：7
> 
> 时间：2013-03-21T06:02:42.507
> 
> 标签：java, algorithm, data-structures

我需要一张地图，其中我的密钥应该基于 3 列，比如`C1, C2, C3`. `C1`具有最高优先级。`C2`小于 1`C1`且`C3`小于 1 `C2`。

我如何在地图中创建键，以便如果有人要求提供有关 的信息`C1`，我应该能够提供所有具有的值`C1`。如果要求，我也应该能够返回所有值`C1 & C2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:05:31.493

使用三张地图。

```
One Map<C1, V> and one Map<C2, V> and one Map<C3, V>. 
```

您可以将三个映射包装到一个类中并实现您的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:13:20.243

您可以使用与数据库中的多列索引相同的策略，如果您的键列可以排序（即，在 Java 中，它们必须是`Comparable`）并且可以轻松地为除第一个之外的所有列定义最大值和最小值。

整数列的示例：

```
public class Key implements Comparable<Key> {
    int c1, c2, c3;

    private static final int c2_min = Integer.MIN_VALUE;
    private static final int c2_max = Integer.MAX_VALUE;
    private static final int c3_min = Integer.MIN_VALUE;
    private static final int c3_max = Integer.MAX_VALUE;

    @Override
    public int compareTo(Key o) {
        if (c1!=o.c1) return Integer.compare(c1, o.c1);
        if (c2!=o.c2) return Integer.compare(c2, o.c2);
        return Integer.compare(c3, o.c3);
    }

    // constructor, equals, ...

} 
```

然后您可以像这样获取某些值`k1`的所有条目`c1`：

```
map.subMap(new Key(k1, Key.c2_min, 0), new Key(k1, Key.c2_max, 0)); 
```

同样，使用前两列：

```
map.subMap(new Key(k1, k2, Key.c3_min), new Key(k1, k2, Key.c3_max)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:05:16.570

我认为“优先级”是指通常称为主键、辅助键和第三键的内容。

如果它们都是字符串字段，请将它们连接成一个字符串并将其用作键。在您的情况下，键是 C1+C2+C3 （其中“+”指的是字符串连接）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:08:13.367

Map 总是只返回一个键的值。您不能让它根据您的关键类内容返回多个值。

简单的方法是为每种键类型保留一个单独的映射，并根据传递的键返回适当的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:24:32.847

可以使用更高级别的键来访问所有较低级别的键和对象的三级索引将需要三级映射。

```
class ThreeLevelMap<K1,K2,K3,V>
{
    private Map<K1,Map<K2,Map<K3,V>>> store = new HashMap<K,Map<K2,Map<K3,V>>>();
    ...
    public V put(K1 key1, K2 key2, K3 key3, V value) { ... }
    public V get(K1 key1, K2 key2, K3 key3) { ... }

    public static class TLMEntry<K1,K2,K3,V>
    {
    ...
    }
    public Collection<TLMEntry<K1,K2,K3,V>> get(K1 key1, K2 key2) { ... }
    public Collection<TLMEntry<K1,K2,K3,V>> get(K1 key1) { ... }
} 
```

这是一个基本的骨架，但应该让你朝着正确的方向前进。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T06:34:00.297

这似乎更像是一个数据库问题。如果您的数据库具有如下结构的表：

```
CREATE TABLE MyMap (
    id IDENTITY PRIMARY KEY,
    c1 int, -- Change data types as needed.
    c2 int,
    c3 int,
    v  int); 
```

那么您只需针对它发出 SELECT 语句。您可能想要使用任何内存中的 Java 数据库。

如果您不想这样做，您可以通过编写容器类值类来纯粹在 Java 中完成等效功能：

```
class Cdata {
    private int c1;
    private int c2;
    private int c3;
    private int v;
    // Constructors and getters elided.
    public boolean match(int c1) {
        return this.c1 == c1;
    }
    public boolean match(int c1, int c2) {
        return match(c1) && this.c2 == c2;
    }
    public boolean match(int c1, int c2, int c3) {
        return match(c1, c2) && this.c3 == c3;
    }
} 
```

然后创建一个 List 并使用带有过滤器方法的函数式编程库。或者，等待 Java 8 lambda。使用 a`Map<Integer, Map<Integer, Map<Integer, Integer>>>>`太混乱了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T07:55:32.270

您可以使用 TreeMap 来实现您的用例。我假设以下内容：您的三列映射到 3 个递增的整数值，即

> C1 = 1, C2 = 2, C3 =3

其中 C1 = 1 是最高优先级，C2 = 2 是下一个，依此类推。

注意：您的键不必总是整数，如果您为`Comparator`您的`TreeMap`.

有了这个，您可以执行以下操作：

```
TreeMap<Integer, String> treeMap = new TreeMap<Integer, String>();
treeMap.put(1, "One");
treeMap.put(2, "two");
treeMap.put(3, "three");

List<String> list = getMappedValues(treeMap, 1);// returns One, Two, Three
//List<String> list = getMappedValues(treeMap, 2);// returns Two, Three
//List<String> list = getMappedValues(treeMap, 3);// returns Three
//List<String> list = getMappedValues(treeMap, 4);// returns null
if(list != null){
    //do something with the list of values
}

private static List<String> getMappedValues(TreeMap<Integer, String> map, Integer key) {
    Entry<Integer, String> e = map.ceilingEntry(key);
    if(e == null){
        return null;
    }
    List<String> list = new ArrayList<String>();
    while(e != null){
        list.add(e.getValue());
        key = e.getKey();
        e = map.higherEntry(key);
    }
    return list;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-29T08:54:53.753

```
private class C {

    public C() {
        Map <Object ,String> ObjectC =new HashMap<Object, String>();
    }
}

private class B {

    public B() {
        Map <Object ,C> ObjectB =new HashMap<Object, C>();
    }
}

private class A {

    public A() {
        Map <Object ,B> ObjectA =new HashMap<Object, B>();
    }
} 
```

所以这可以向你保证一个漂亮的结构，你不需要做更多的工作，因为你可以获得 A 的所有内容

```
MapVar.ObjectA.get(C1); 
```

如果同时给出 C1, C2 你可以调用

```
MapVar.ObjectA.get(C1).ObjectB.get(C2); 
```

如果同时给出 C1, C2 , C3 你可以调用

```
MapVar.ObjectA.get(C1).ObjectB.get(C2).ObjectC.get(C3);; 
```

然后您可以简单地遍历地图并获取值。

# facebook-graph-api - 使用 WP8 的 HttpWebRequest 无需登录即可获取 Facebook 的 AccessToken

> ID：15540524
> 
> 赞同：0
> 
> 时间：2013-03-21T06:03:00.827
> 
> 标签：facebook-graph-api, windows-phone-8

我正在尝试像这样获取访问令牌，

```
 string uri = "https://graph.facebook.com/oauth/access_token?client_id=" +
                       APP_ID +
                       "&redirect_uri=&client_secret=" + APP_SECRET + "&grant_type=client_credentials";
            var access_token = GetMyData(uri);
public async Task<string> GetMyData(string urlToCall)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlToCall);
            request.Method = "GET";
            HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();
            using (var sr = new StreamReader(response.GetResponseStream()))
            {
                return sr.ReadToEnd();
            }
        }
        public static Task<HttpWebResponse> GetResponseAsync(this HttpWebRequest request)
        {
            var taskComplete = new TaskCompletionSource<HttpWebResponse>();
            request.BeginGetResponse(asyncResponse =>
            {
                try
                {
                    HttpWebRequest responseRequest = (HttpWebRequest)asyncResponse.AsyncState;
                    HttpWebResponse someResponse = (HttpWebResponse)responseRequest.EndGetResponse(asyncResponse);
                    taskComplete.TrySetResult(someResponse);
                }
                catch (WebException webExc)
                {
                    HttpWebResponse failedResponse = (HttpWebResponse)webExc.Response;
                    taskComplete.TrySetResult(failedResponse);
                }
            }, request);
            return taskComplete.Task;
        } 
```

它卡在 var taskComplete = new TaskCompletionSource(); 并且花费了很多时间并且也没有获得访问令牌。出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:24:58.347

您可以使用以下代码实现此目的

```
public void GetMyData(string urlToCall)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(urlToCall);
    request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);
}

private static void ReadWebRequestCallback(IAsyncResult callbackResult)
{
    HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
    HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

    using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
    {
        // Here you get the result
        string results = httpwebStreamReader.ReadToEnd();               
    }
    myResponse.Close();
} 
```

# sql - 用于完整、差异和日志备份的备份存储过程

> ID：15540525
> 
> 赞同：1
> 
> 时间：2013-03-21T06:03:06.037
> 
> 标签：sql, sql-server, tsql, backup, sql-server-2012

我写了一个简单的存储过程来备份 FULL、Differential 和 LOG 备份。这是我的存储过程：

```
Alter PROCEDURE BackupDB
(   
    @BaseLocation   varchar(1024),
    @BackupType     varchar(32)

)
AS
BEGIN

    Declare @DBName     varchar(255) = db_name()

    Declare @FileName   varchar(256)

    Declare @Date datetime = getdate()
    Set @BackupType = UPPER(@BackupType)

    Set @FileName = @DBName + '_'  + Cast(Year(@Date) as varchar(4)) + '_' + 
                    Right('00' + Cast(Month(@Date) as varchar(2)),2) + '_' +
                    Right('00' + Cast(Day(@Date) as varchar(2)),2) + '_' + 
                    Right('00' + Cast(DatePart(hh,@Date) as varchar(2)),2) + '_' + 
                    Right('00' + Cast(DatePart(mi,@Date) as varchar(2)),2) + '_' +
                    Right('00' + Cast(DatePart(ss,@Date) as varchar(2)),2) + '_' + 
                    Right('000' + Cast(DatePart(ms,@Date) as varchar(3)),3) + '_' + UPPER(@BackupType) +                    
                    (Case When @BackupType = 'FULL' Or @BackupType = 'DIFFERENTIAL' Then '.BAK' Else '.TRN' End)

    Declare @FullPath varchar(1280) = ''

    If Right(@BaseLocation,1) <> '\'
    Begin
        Set @BaseLocation = @BaseLocation + '\'
    End
    Set @FullPath = @BaseLocation + @FileName
    Print @FullPath

    If @BackupType = 'FULL'
    Begin
        Backup database @DBName To Disk = @FullPath
    End
    Else If @BackupType = 'DIFFERENTIAL'
    Begin
        Backup database @DBName To Disk = @FullPath WITH DIFFERENTIAL
    End
    Else If @BackupType = 'LOG'
    Begin
        BACKUP LOG @DBName
             TO Disk = @FullPath
    End

END
GO 
```

我运行了我的存储过程，它似乎可以完美地处理传入的参数。现在下一步是为此创建一个 SQL JOB。但是在我这样做之前，我想知道这是正确的程序吗？我读过很多文章，它们似乎都指出了“测试备份策略”这一行。

现在我将每周、每天和每 5 分钟创建一个 SQL JOB，即每周完整备份、每日差异和每 5 分钟的日志备份。

你认为这个存储过程写得不正确还是你认为它应该适合我的场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:08:44.260

对我来说看起来不错，如果这是一个编程练习，很好。（您需要包括错误捕获和报告）。但是，如果您不使用 SQL express，那么如上所述，维护计划将通过错误报告来完成所有这些工作。如果您使用的是 SQL Express，那么免费的 SQLBackupAndFTP [http://sqlbackupandftp.com/](http://sqlbackupandftp.com/)是我多年来一直使用和推荐的好程序。当 msdb 损坏时，它具有我最近遇到的出色错误报告。它还将备份到 Amazon S3 帐户（付费版本但不多）。全文在这里：[http ://ava.co.uk/blog/2013/3/21/a-backup-problem-and-the-solution.aspx](http://ava.co.uk/blog/2013/3/21/a-backup-problem-and-the-solution.aspx)

# google-drive-api - Google Drive API 中的comment.Patch 和comment.Update 之间的区别

> ID：15540526
> 
> 赞同：0
> 
> 时间：2013-03-21T06:03:06.907
> 
> 标签：google-drive-api

[我浏览了补丁](https://developers.google.com/drive/v2/reference/comments/patch)和[更新](https://developers.google.com/drive/v2/reference/comments/update)的方法文档，看起来它们都在做同样的事情。

而且我还注意到[补丁](https://developers.google.com/drive/v2/reference/comments/patch)不需要`content`修补注释，即使它需要调用该`patch()`方法。

那么，和Google Drive API 中`comment.patch()`的方法有什么区别吗？`comment.update()`

PS：我正在使用 Google-Drive Java SDK 来实现。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:26:20.470

补丁用于执行部分更新并节省一些带宽，例如，当您只想更新资源中的单个字段时。

有关补丁如何工作以及其他性能提示的更多详细信息，请查看 Google Drive SDK 文档：

[https://developers.google.com/drive/performance#patch](https://developers.google.com/drive/performance#patch)

# razor - 捆绑脚本未呈现

> ID：15540528
> 
> 赞同：7
> 
> 时间：2013-03-21T06:03:18.487
> 
> 标签：razor, asp.net-mvc-4, bundling-and-minification

我在使用 ASP .NET 进行脚本捆绑和缩小时遇到问题我已经尝试了在互联网上找到的所有流行的解决方案，但仍然遇到同样的问题。

我的`BundleConfig.cs`样子

```
namespace MYPROJ{
public class BundleConfig
{
    public static void AddDefaultIgnorePatterns(IgnoreList ignoreList)
    {
        if (ignoreList == null)
            return;
        ignoreList.Ignore("*.intellisense.js");
        ignoreList.Ignore("*-vsdoc.js");
        ignoreList.Ignore("*.debug.js", OptimizationMode.WhenEnabled);
        ignoreList.Ignore("*.min.js", OptimizationMode.WhenDisabled);
        ignoreList.Ignore("*.min.css", OptimizationMode.WhenDisabled);
    }

    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.IgnoreList.Clear();
        AddDefaultIgnorePatterns(bundles.IgnoreList);

        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

…
…

        //bundles.Add(new ScriptBundle("~/Scripts").Include("~/Scripts/jquery.unobtrusive-ajax.min.js", "~/Scripts/kendoui/kendo.all.min.js", "~/Scripts/kendoui/kendo.combobox.min.js", "~/Scripts/kendoui/kendo.grid.min.js"));
        //bundles.Add(new ScriptBundle("~/Scripts").Include("~/Scripts/kendoui/kendo.all.min"));
        //bundles.Add(new ScriptBundle("~/Scripts").Include("~/Scripts/kendoui/kendo.combobox.min"));
        //bundles.Add(new ScriptBundle("~/Scripts").Include("~/Scripts/kendoui/kendo.grid.min.js"));            
        bundles.Add(new ScriptBundle("~/Scripts").IncludeDirectory("~/Scripts", "*.js").IncludeDirectory("~/Scripts/kendoui", "*.js"));

        ……
        BundleTable.EnableOptimizations = true;
    }
}
} 
```

在主视图中：

```
@Scripts.Render("~/Scripts") 
```

现在，当我运行所有这些之后，我得到了这个标签：

```
<script src="/Scripts?v=ZnxC8dcoc3fJ-hfKQHLiTe19PjJFHwPhwHPUncuBtzE1"></script> 
```

在使用 chrome 代码检查器后，我发现上述资源的状态代码是`Status Code: 302 Found`And 因为`Scripts/`它是`Status Code: 404 Not Found`

而且我也无法通过在视图源中单击来访问脚本文件，因此看起来没有加载任何内容，但是所有文件和目录都已正确放置。仅供参考，我的 styleSheets 捆绑工作正常。

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T18:21:26.197

您不能为您的包指定一个同时也是现有目录名称的名称。重命名捆绑包或添加一个`/js`以使其正常工作：

```
bundles.Add(new ScriptBundle("~/Scripts/js").IncludeDirectory("~/Scripts", "*.js").IncludeDirectory("~/Scripts/kendoui", "*.js")); 
```

和

```
@Scripts.Render("~/Scripts/js") 
```

任何其他不存在的名称也可以使用，例如

```
 bundles.Add(new ScriptBundle("~/ScriptMonkey").IncludeDirectory("~/Scripts", "*.js").IncludeDirectory("~/Scripts/kendoui", "*.js")); 
```

...假设您没有`/ScriptMonkey`目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T22:18:01.177

接受的答案对我不起作用。我在 Visual Studio 2010 SP1 上使用 MVC 4.0。我有一个名为“jquery-ui.min.js”的 js 文件，但没有被加载。我的 Bundle.config 代码是：

```
bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(                        
                            "~/Scripts/jquery-ui.min.js")); 
```

我将文件重命名为 jquery-ui.js 并将我的代码更新为

```
bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(                        
                        "~/Scripts/jquery-ui.js")); 
```

我从[这里](https://stackoverflow.com/a/12005272/740756)得到了这个信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:07:54.280

您是否尝试过在 Bundle 的虚拟路径中使用不存在的目录？喜欢

```
...new ScriptBundle("~/bundle/Scripts")... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T16:54:56.907

决定是否处理请求的捆绑模块逻辑不会接管对现有文件或目录的请求。这就是为什么当您的捆绑请求与现有目录（或文件）位于相同的虚拟路径时不起作用的原因。

# cygwin - gitolite 推送时无法将密钥添加到授权密钥

> ID：15540529
> 
> 赞同：1
> 
> 时间：2013-03-21T06:03:23.447
> 
> 标签：cygwin, gitolite

将 gitolite-admin 克隆到我的工作站并管理用户和 repo，但是在推送时，我遇到了一些如下错误：

```
remote: Initialized empty Git repository in /home/git/repositories/fmame.git/
remote: /bin/find: paths must precede expression
remote: Usage: /bin/find [path...] [expression]
remote: /bin/find: paths must precede expression
remote: Usage: /bin/find [path...] [expression]
remote: /bin/find: paths must precede expression
remote: Usage: /bin/find [path...] [expression]
remote: /bin/find: paths must precede expression
remote: Usage: /bin/find [path...] [expression]
remote: /bin/find: paths must precede expression
remote: Usage: /bin/find [path...] [expression]

To git@localhost:gitolite-admin 
```

这是我的步骤：

1/ 编辑gitolite.conf：</p>

```
repo gitolite-admin
    RW+     =   gitoliteadm

repo testing
    RW+     =   @all

repo mfame
    RW+ = ryoma 
```

2/ 放入`ryoma.pub`目录`keydir`。

我的工作在 cygwin 的 Windows 7 上运行。

您将如何修改此设置以允许我克隆 gitolite-admin 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:16:41.000

在“ [Gitolite hook 不起作用](https://stackoverflow.com/q/9401080/6309)”之后，确保您的 sshd（在您的 gitolite 服务器上运行的 ssh 守护程序）具有正确的`PATH`.

那（不正确`PATH`的）可能会导致“ `remote: /bin/find: paths must precede expression`”错误消息，因为可能会选择错误的外壳。

# php - 日期时间差异错误

> ID：15540530
> 
> 赞同：2
> 
> 时间：2013-03-21T06:03:30.977
> 
> 标签：php, datetime, diff

当我使用日期时间的差异时，我遇到了问题。

这是php代码

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->days; 
```

正确的结果应该是 2。但不幸的是它的结果`6015`。即使我更改日期，它仍然是`6015`。各位有遇到这个问题吗？我试图从其他计算机运行脚本，但它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:23:11.663

是的，你需要指定时区

试试这个代码我为印度设置的

```
$MNTTZ = new DateTimeZone('Asia/Kolkata');
$datetime1 = new DateTime('2009-10-11',$MNTTZ);
$datetime2 = new DateTime('2009-10-13',$MNTTZ);
$interval = $datetime1->diff($datetime2);
echo $interval->days; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:21:34.163

尝试这个，

```
$start_date = new DateTime("2009-10-11");
$end_date = new DateTime("2009-10-13");
$interval = $start_date->diff($end_date);
echo "Result " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days "; 
```

你用`$interval->days`替换`$interval->d." days "`

您可以在日期差异上查看我的答案[https://stackoverflow.com/a/14938421/718224以获取更多信息。](https://stackoverflow.com/a/14938421/718224)

这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:20:40.700

确保设置格式（）

```
 <?php
    $datetime1 = date_create('2009-10-11');
    $datetime2 = date_create('2009-10-13');
    $interval = date_diff($datetime1, $datetime2);
    echo $interval->format('%R%a days');
    ?> 
```

[看这里...](http://php.net/manual/en/datetime.diff.php)

# mongodb - 如何在 mongoDB C 驱动程序上执行 mapreduce？

> ID：15540550
> 
> 赞同：3
> 
> 时间：2013-03-21T06:04:33.453
> 
> 标签：mongodb, mongo-c-driver

我想在 C 驱动程序中对 mongoDB 执行 mapreduce。

但是，只有一种方法可以成功实现目标。

那是，

```
 mongo_simple_str_command( conn, "db", "$eval",legalCommand, &b ) 
```

因为 $eval 可能会阻塞读写过程，直到它完成。

我听说“mongo_run_command”也可以做到这一点。

**无论我尝试了多么简单的示例，我都无法使 mapreduce 在 mongo C 驱动程序上工作。**

此外， conn->lasterrstr 和 conn->errstr 什么都没有了。

这是代码：

```
 bson_init( &cmd );

    bson_append_string( &cmd, "mapreduce", "country2" );

    bson_append_string( &cmd, "map"   , "function()      {emit(this.city, this.pop);}" );

    bson_append_string( &cmd, "reduce", "function(keyCustId, value) {return value;  }" );

    bson_append_string( &cmd, "out", "c" );

    bson_finish( &cmd );

    mongo_run_command( conn, "country2", &cmd, &output );//the return value is always -1 
```

----数据库----

db.country2.insert({city:'tai',pop:100,land:3})

db.country2.insert({city:'pei',pop:120,land:4})

db.country2.insert({city:'kao',pop:10,land:30})

----数据库----

**有人可以让它工作或给我另一种方式来实现mapreduce吗？**

谢谢。

# php - PHP 通过 SQL 搜索

> ID：15540552
> 
> 赞同：0
> 
> 时间：2013-03-21T06:04:41.140
> 
> 标签：php, mysql

我试图将它组织成一个有自己列的表格，但每次我尝试时，我都会得到一些非常混乱或完全错误的东西。如果我能从 SQL 中获得一些帮助，那就太好了。例如看这张图片：

[http://bfast.elementfx.com/design/table.JPG](http://bfast.elementfx.com/design/table.JPG)

这是代码

```
$dbHost = 'localhost'; // localhost will be used in most cases
$dbUser = 'root'; 
$dbPass = 'root';
$dbDatabase = 'root'; // the database you put the table into.
$con = mysql_connect($dbHost, $dbUser, $dbPass) or trigger_error("Failed to connect to MySQL Server. Error: " . mysql_error());

mysql_select_db($dbDatabase) or trigger_error("Failed to connect to database {$dbDatabase}. Error: " . mysql_error());

$error = array();
$results = array();

if (isset($_GET['search'])) {
   $searchTerms = trim($_GET['search']);
   $searchTerms = strip_tags($searchTerms); // remove any html/javascript.

   if (strlen($searchTerms) < 2) {
      $error[] = "Search terms must be longer than 2 characters.";
   }else {
      $searchTermDB = mysql_real_escape_string($searchTerms); // prevent sql injection.
   }

   // If there are no errors, lets get the search going.
   if (count($error) < 1) {
      $searchSQL = "SELECT brandname, manufacturer, distributor, modelnumber, date, expirey FROM productlist WHERE ";

      // grab the search types.
      $types = array();
      $types[] = isset($_GET['Brand Name'])?"`brandname` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['Manufacturer'])?"`manufacturer` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['distributor'])?"`distributor` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['modelnumber'])?"`modelnumber` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['E'])?"`E` LIKE '%{$searchTermDB}%'":'';
      $types[] = isset($_GET['F'])?"`F` LIKE '%{$searchTermDB}%'":'';

      $types = array_filter($types, "removeEmpty"); // removes any item that was empty (not checked)

      if (count($types) < 1)
         $types[] = "`brandname` LIKE '%{$searchTermDB}%'"; // use the body as a default search if none are checked

          $andOr = isset($_GET['matchall'])?'AND':'OR';
      $searchSQL .= implode(" {$andOr} ", $types) . " ORDER BY `brandname`"; // order by title.

      $searchResult = mysql_query($searchSQL) or trigger_error("There was an error.<br/>" . mysql_error() . "<br />SQL Was: {$searchSQL}");

      if (mysql_num_rows($searchResult) < 1) {
         $error[] = "The search term provided {$searchTerms} yielded no results.";
      }else {
         $results = array(); // the result array
         $i = 1;
         while ($row = mysql_fetch_assoc($searchResult)) {
            $results[] = "{$i}: <b>Brand Name:</b>  {$row['brandname']}<br /><b>Distributor:</b>  {$row['distributor']}<br /><b>Manufacturer:</b>  {$row['manufacturer']} <br /><b>Model Number:</b>  {$row['modelnumber']}<br /><b>Certifying Agency:</b>  {$row['E']} {$row['F']}<br /><br /><br />";
            $i++;
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:23:06.063

你应该更具体，我真的不明白你在问什么。但作为一个起点，从您的代码中可以看出，在您的最后一个“else”语句中缺少一个结尾大括号“}”，这可能会造成问题。你说：“我试图把它组织成一个有自己的列的表格，但每次我尝试都会得到一些非常混乱或完全错误的东西”，但是“这个”是什么，如果你不这样做，我们应该如何提供帮助' t描述您所说的“完全错误的混乱”是什么意思？这可能意味着什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:38:54.610

错误在于在`$andOr`变量处提供空间，请参阅

```
$andOr = isset($_GET['matchall'])?'AND':'OR'; // You cannot implode them without giving space
$searchSQL .= implode(" {$andOr} ", $types) . " ORDER BY `brandname`"; 
```

固定代码是：

```
$andOr = isset($_GET['matchall'])?' AND ':' OR '; // I give space to them
$searchSQL .= implode($andOr, $types) . " ORDER BY `brandname`"; // I call $andOr variable directly without `{}` 
```

那么，是否仍然发现任何错误？

# sql - 根据postgresql中的另一个表更正列中的拼写错误

> ID：15540557
> 
> 赞同：0
> 
> 时间：2013-03-21T06:05:00.837
> 
> 标签：sql, postgresql-9.2

我的 postgresql 表有一个 (cityname) 列。(cityname) 列中的值有一些拼写错误。需要更正列（城市名称）的每条记录。另一个表有一列包含所有正确的城市名称。根据此表，需要更正第一个表的拼写错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:14:39.040

您需要一列可以将表 A 中的行（有错误）与表 B 中的正确数据相关联。让我们假设您有完成这项工作的 city_id 列。

```
update table_A  
set add1 = table_b.correct_add1  
from table_A as j_table_A  
join table_B on table_B.city_id = table_A.city_id  
where j_table_A.primary_key_column = table_A.primary_key_column 
```

你基本上引用了 table_A 两次。这样做没有充分的理由，但我发现如果您需要从联接中提取数据，那么在更新期间这是最简单的方法。

评论后编辑：由于您没有将正确数据与需要修复的数据（如 city_id）相关联的好方法，因此您需要处理您的连接条件并可能引入正则表达式。[这里](https://stackoverflow.com/questions/8679079/how-to-join-tables-on-regex)有一个链接可能有用

# android - ArrayList 不显示到 ListView

> ID：15540558
> 
> 赞同：0
> 
> 时间：2013-03-21T06:05:03.103
> 
> 标签：android, sqlite, listview, arraylist

所以我有一个`SQLite` `database`，和一个`ArrayList`，我正在使用下面的代码来提取值并将它们存储到另一个`ArrayList`

`NPE` `Null Pointer Exception`当我尝试将它显示到我的列表视图时，我得到的错误是这种方法

它应该显示以下内容：

```
Home: 24
Work: 2
School: 0 
```

等等等等

getLocationsArray 方法返回所有位置，my`query`返回每个位置被抽吸的次数。我已经检查了这两个`Log.v`，它们显示了正确的值。

那么为什么不显示给我`ListView`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:47:21.930

我不知道您是否在数据库中的其他任何地方使用模型，因此我在构造函数上实例化它。

```
public MySmokinDatabase (Context context) {
smokinDBOpenHelper = new SmokinDBOpenHelper(context, SmokinDBOpenHelper.DATABASE_NAME, 
        null, SmokinDBOpenHelper.DATABASE_VERSION);
model = new Model();
} 
```

# c++ - 杰尼不工作

> ID：15540559
> 
> 赞同：1
> 
> 时间：2013-03-21T06:05:04.470
> 
> 标签：c++, string, java-native-interface, unsatisfiedlinkerror, java.library.path

这是我的 Java 代码。

```
class NativePrompt {
    private native String getInput(String prompt);  //native method
    static   //static initializer code
    {
        System.loadLibrary("NativePrompt");
    } 

    public static void main(String[] args)
    {
        NativePrompt NP = new NativePrompt();
        String sName = NP.getInput("Enter your name: ");
        System.out.println("Hello " + sName);
    }
} 
```

我正在使用 jdk1.7.0_17 。这是我的 C++ 代码

```
#include "NativePrompt.h" 
#include "jni.h"
#include "string"
#include "iostream"
#include "vector"

using namespace std;
/*
 * Class:     NativePrompt
 * Method:    getInput
 * Signature: (Ljava/lang/String;)Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_NativePrompt_getInput
    (JNIEnv *env, jobject obj, jstring prompt){

    string sEntry;
    const char *str;
    str = env->GetStringUTFChars(prompt, NULL);
    if (str == NULL) {
        return env->NewStringUTF("");
    }
    else{
    cout << str;
        //Frees native string resources
        env->ReleaseStringUTFChars(prompt, str);

        //reads n-consecutive words from the 
        //keyboard and store them in string
        getline(cin, sEntry);

        return env->NewStringUTF(sEntry.c_str());
    }
} 
```

我使用以下注释运行该程序。

> javac NativePrompt.java
> 
> javah NativePrompt
> 
> g++ -o NativePrompt.so -shared -I /usr/lib/jvm/jdk1.7.0_17/include -I /usr/lib/jvm/jdk1.7.0_17/include/linux NativePrompt.cpp
> 
> 导出 LD_LIBRARY_PATH='/home/user/jniwork/'
> 
> java NativePrompt

现在我收到以下错误。我不知道如何解决它。

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.lang.ClassLoader.loadLibrary(ClassLoader.java:1860) 处 java.lang.Runtime.loadLibrary0(Runtime.java:845) 处的 java.library.path 中没有 NativePrompt在 java.lang.System.loadLibrary(System.java:1084) 在 NativePrompt.(NativePrompt.java:5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:40:45.510

尝试像这样启动您的应用程序：

```
java -Djava.library.path=/home/user/jniwork/ NativePrompt 
```

以及之前，将您的库从 NativePrompt.so 重命名为**libNativePrompt.so**

希望这可以帮助你。

# php - mysql group_concat 里面 while

> ID：15540561
> 
> 赞同：2
> 
> 时间：2013-03-21T06:05:09.727
> 
> 标签：php, mysql, group-concat

我有这个乘客表日期：

![在此处输入图像描述](../Images/dbe1a703c21d8b65a8ae26ef2a234764.png)

这意味着在 Reservation`000004`中，有两个行程，即 Itinerary`0000010 (AAC Hangar - Anvaya Cove)`和`0000011 (Anvaya Cove - AAC Hangar)`，并且在每个行程中，有两名乘客（`0000007 (taiga)`并且`0000011 riyuuji`是`0000010 AAC Hangar - Anvaya Cove while`0000008 minori `and`0000012 ami `are passengers of`0000011 Anvaya Cove - AAC Hangar 的乘客）。

我正在尝试使用它们来连接它们，`group_concat`但我只能这样做：

```
 $a=mysql_query("select group_concat(pass_name separator ', ') as 'pass' from passengers where reservno = '0000004' order by id asc") or die(mysql_error());
    $b=mysql_fetch_array($a);
    $c=$b['pass']; 
```

结果：`taiga, minori, riyuuji, ami`。

**但我希望它看起来像这样：** `taiga, riyuuji / minori, ami`

这可以使用`group_concat`吗？我知道这将涉及`while`语句，但到目前为止我仍然无法获得所需的输出。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:07:28.040

您需要使用`GROUP BY`子句

```
select group_concat(pass_name separator ', ') as 'pass' 
from passengers 
where reservno = '0000004' 
GROUP BY reservno, id
order by id asc 
```

**更新 1**

```
SELECT  group_concat(`pass` separator ' / ') `pass` 
FROM    ( 
            select group_concat(pass_name separator ', ') as 'pass' 
            from passengers 
            where reservno = '0000004' 
            GROUP BY reservno, id order by id asc 
        ) s 
```

# c# - C# MVC 4 Json 请求

> ID：15540563
> 
> 赞同：0
> 
> 时间：2013-03-21T06:05:14.867
> 
> 标签：c#, asp.net-mvc, json

我将 JSON 对象发布到控制器操作：

```
 $.ajax({
                url: "/path/to/action",
                type: "POST",
                dataType: "json",
                data: {
                        name: "John Doe",
                        phone: "2323454543",
                        skills: {
                            code: "php",
                            design: "photoshop"
                            }
                        }
            }); 
```

如何将此数据映射到某种键值对对象？在 PHP 中，这些被映射到一个不可见的关联数组。我希望能够访问这样的属性：

```
SomeDynamicType data = ...//something here to prepare json data
string codeSkills = data.skills.code; //codeSkills should = "php" 
```

我对模型绑定不感兴趣，因为这些值与模型不对应——它们是任意的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:17:53.573

尝试使用[JSON.NET](http://json.codeplex.com/)，该库将 JSON 解析为类似字典的结构。它的用法如下：

```
JObject rss = JObject.Parse(json);
string codeSkills = (string)rss["skills"]["code"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:13:31.187

在您的 .ajax 调用中字符串化 Json：

```
data: {
                json:
                    JSON.stringify({
                        name: "John Doe",
                        phone: "2323454543",
                        skills: {
                            code: "php",
                            design: "photoshop"
                        }
                    })
            } 
```

并在控制器中以您想要的方式访问属性：

```
 [HttpPost]
        public JsonResult Action(string json)
        {
            dynamic data = Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(json);
            string codeSkills = data.skills.code;
... 
```

codeSkills 是“php”字符串。

如果我没记错的话，Newtonsoft Json 库从 .NET 4 开始就可用了。

# android - 带有自定义单选按钮的android自定义列表视图

> ID：15540566
> 
> 赞同：2
> 
> 时间：2013-03-21T06:05:20.727
> 
> 标签：android

我想使用自定义单选按钮（单选项目选项）进行自定义列表视图（每个项目一个图像和一个文本）。

我的代码：

```
listview.setAdapter(new myAdapter(getApplicationContext(),
                    R.layout.mycontent, text)); 
```

我的适配器类：

```
 public class myMessageAdapter extends ArrayAdapter<String> {
private LayoutInflater mInflater;

private String[] mText = null;

long id;
private int mViewResourceId;

public myMessageAdapter(Context ctx, int viewResourceId,
        ArrayList<String> textList) {

    super(ctx, viewResourceId);

    mInflater = (LayoutInflater) ctx
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    String[] message = textList.toArray(new String[textList.size()]);

    mText = message;

    mViewResourceId = viewResourceId;
}

@Override
public int getCount() {
    return mText .length;
}

@Override
public String getItem(int position) {
    return mText [position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    convertView = mInflater.inflate(mViewResourceId, null);

    TextView MESSAGE = (TextView) convertView.findViewById(R.id.message);

    id = getItemId(position);

    MESSAGE.setText(mText [position]);
    return convertView;
}
 } 
```

我的输出列表项应该是：

```
 <radioButton> <Text> <Image>.Single choice selection.How could i do that? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:14:41.090

**试试这个解决方案**

```
package com.example.demo;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.TextView;

public class ListViewDemo extends Activity {
    ListView LSOne;
    int[] _intRadio = new int[20];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview_radio);

        LSOne = (ListView) findViewById(R.id.LSOne);

        LSOne.setAdapter(new LsAdapter());

    }

    public class LsAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            return 20;
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        @Override
        public int getViewTypeCount() {
            // TODO Auto-generated method stub
            return 20;
        }

        @Override
        public int getItemViewType(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder = null;
            Log.v("ConvertView", String.valueOf(position));
            int _intPosition = getItemViewType(position);
            if (convertView == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = vi.inflate(R.layout.listview_radio_raw, null);
                holder = new ViewHolder();
                holder.code = (TextView) convertView
                        .findViewById(R.id.textView1);
                holder.name = (RadioButton) convertView
                        .findViewById(R.id.radioButton1);
                convertView.setTag(holder);

                holder.name.setId(_intPosition);
                holder.name.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        for (int i = 0; i < _intRadio.length; i++) {
                            if (i == v.getId()) {
                                _intRadio[i] = 1;
                            } else {
                                _intRadio[i] = 0;
                            }
                        }
                        notifyDataSetChanged();
                    }
                });
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            if (_intRadio[_intPosition] == 1) {
                holder.name.setChecked(true);
            } else {
                holder.name.setChecked(false);
            }

            return convertView;

        }

        private class ViewHolder {
            TextView code;
            RadioButton name;
            Button btn;
        }
    }
} 
```

**listview_radio_raw.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="60dip"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:button="@drawable/button_radio"
            android:paddingLeft="60dip"
            android:text="RadioButton" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

</LinearLayout> 
```

**button_radio.xml**

//这个xml添加到你的drawable文件夹中。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/radio_on" android:state_checked="true" android:state_pressed="false"/>
    <item android:drawable="@drawable/radio_off" android:state_checked="false" android:state_pressed="false"/>
    <item android:drawable="@drawable/radio_on_pressed" android:state_checked="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/radio_off_pressed" android:state_checked="false" android:state_pressed="true"/>

</selector> 
```

**下载此[链接的所有图片](http://code.devminded.com/custom-radiobutton/src/3c688768f281292357a5c0ad383a0a63201851a0/res/drawable?at=default)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:19:02.003

在您的 getview 中膨胀自定义布局

```
 public View getView(int arg0, View arg1, ViewGroup arg2) {
    ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
     {
        arg1=mInflater.inflate(R.layout.customlistview, arg2,false);
        vh.iv1= (ImageView)arg1.findViewById(R.id.ivs);
        vh.rb= (RadioButton) arg1.findViewById(R.id.radioButton1);
        vh.tv= (TextView)arg1.findViewById(R.id.textView1);

     }
    else
    {
     arg1.setTag(vh);
    }
           //set data to textview, radiobutton and imageview.
    return arg1;
}

   static class ViewHolder
   {
   TextView tv;
   RadioButton rb;
   ImageView iv1;
   } 
```

自定义列表视图.xml。每行的自定义布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:cacheColorHint="#000000"
>
<RadioButton
    android:id="@+id/radioButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="RadioButton" />
   <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

 <ImageView
    android:id="@+id/ivs"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     />
</LinearLayout> 
```

# php - 用于提取没有空格的哈希标签的正则表达式

> ID：15540567
> 
> 赞同：3
> 
> 时间：2013-03-21T06:05:24.900
> 
> 标签：php, regex, preg-match, preg-match-all

我正在使用这个：

```
$t = "#hashtag #goodhash_tag united states #l33t this";
$queryVariable = "";
if(preg_match_all('/(^|\s)(#\w+)/', $t, $arrHashTags) > 0){
    array_filter($arrHashTags);
    array_unique($arrHashTags);
    $count = count($arrHashTags[2]);
    if($count > 1){
        $counter = 1;
        foreach ($arrHashTags[2] as $strHashTag) {
            if (preg_match('/#\d*[a-z_]+/i', $strHashTag)) {
                if($counter == $count){
                    $queryVariable .= $strHashTag;              
                } else{
                    $queryVariable .= $strHashTag." and ";
                }
                $newTest = str_replace($arrHashTags[2],"", $t);                 
            }
            $counter = $counter + 1;
        }
    }
}
echo $queryVariable."<br>"; // this is list of tags
echo $newTest;   // this is the remaining text 
```

基于`$t`以上的输出是：

```
#hashtag and #goodhash_tag and #l33t
united states this 
```

第一个问题：

如果`$t = '#hashtag#goodhash_tag united states #l33t this';`即两个标签之间没有空格，则输出变为：

```
#hashtag and #l33t
#goodhash_tag united states this 
```

第二个问题：

如果`$t = '#hashtag #goodhash_tag united states #l33t this #123';`即带有无效标签`#123`，它会以某种方式干扰我提取的标签列表，`$queryVariable`就像输出一样

```
#hashtag and #goodhash_tag and #l33t and // note the extra 'and'
united states this 
```

如果有人请帮助这两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T06:36:14.370

而不是为您的正则表达式使用如此多的比较等。您可以简单地拥有以下内容：

```
$t = "#hashtag #goodhash_tag united states #l33t this #123#tte#anothertag sth";
$queryVariable = "";
preg_match_all('/(#[A-z_]\w+)/', $t, $arrHashTags);
print_r( $arrHashTags[1] ); 
```

* * *

要将它们作为字符串`and`加入它们，您可以使用 implode。

```
$queryVariable = implode( $arrHashTags[1], " and " ); 
```

对于剩余的文本，您可以使用`preg_replace`或`str_replace`（无论您喜欢哪个）。

* * *

这是[键盘链接](http://codepad.viper-7.com/qTYhUX)。

# html - html页面中的HTML标签放置对齐问题

> ID：15540568
> 
> 赞同：0
> 
> 时间：2013-03-21T06:05:27.447
> 
> 标签：html, css

我遇到了这个最奇怪的问题。我有一个包含两个列表项的无序列表

```
<ul>
<li><a href="#"><p>1</p></a>
</li>
<li><a href="#"><p>2</p></a>
</li>
</ul> 
```

（第一个列表项的结束标记和第二个列表项的开始标记在不同的行中）此 html 代码工作正常。但是当我将上面的代码更改为

```
<ul>
<li><a href="#"><p>1</p></a>
</li><li>
<a href="#"><p>2</p></a>
</li>
</ul> 
```

（第一个列表项的结束标记和第二个列表项的开始标记在同一行，并且它们之间也没有空格），对齐中断。你可以在这里看到问题

[http://jsfiddle.net/Venugopal/AawU2/2/](http://jsfiddle.net/Venugopal/AawU2/2/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T10:50:08.213

At last found some workaround

[click here](http://css-tricks.com/fighting-the-space-between-inline-block-elements)

# java - 最短路径的 Floyd Warshall 算法

> ID：15540569
> 
> 赞同：1
> 
> 时间：2013-03-21T06:05:28.377
> 
> 标签：java, floyd-warshall

我正在查看一些旧的竞赛问题，我发现了这个，它看起来很有趣，[http](http://dwite.ca/old/Problem5Jan2006.pdf) ://dwite.ca/old/Problem5Jan2006.pdf，我尝试使用 floyd warshall 算法来获得从任何节点到任何节点的最短路径其他节点，你们能看到我做错了什么吗？它没有给出竞赛问题页面上列出的所需输出

```
import java.io.*;
import java.util.*;

public class DistanceBetween {

public static void main(String[] args) throws FileNotFoundException {
    Scanner s = new Scanner(new File("DATA5.txt"));
    int n = Integer.parseInt(s.nextLine());
    int[][] dist = new int[60][60];
    for(int y=0;y<60;++y)for(int x=0;x<60;++x)dist[y][x]=10000000;
    Map<Character, Integer> map = new TreeMap<Character, Integer>();
    for (int i = 0; i < n; ++i) {
        String text[] = s.nextLine().split(" ");
        int c = 0;
        if (!map.containsKey(text[0].charAt(0))) {
            map.put(text[0].charAt(0), c);
            c++;
        }
        if (!map.containsKey(text[0].charAt(1))) {
            map.put(text[0].charAt(1), c);
            c++;
        }
        dist[map.get(text[0].charAt(0))][map.get(text[0].charAt(1))] = Integer.parseInt(text[1]);
    }
    for (int k = 0; k < map.size(); ++k) {
        for (int i = 0; i < map.size(); ++i) {
            for (int j = 0; j < map.size(); ++j) {
                dist[i][j] = Math.min(dist[i][j], dist[i][k] + dist[k][j]);
            }
        }
    }
    for (int i = 0; i < 5; ++i) {
        String text = s.nextLine();
        System.out.println(dist[map.get(text.charAt(0))][map.get(text.charAt(1))]);
    }
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:51:07.840

您的代码中有几个问题：

## 覆盖映射

您`int c`是`for`循环的局部变量，这意味着使用的最高映射索引不会在下一次迭代中存活，因此下一次迭代中的读数会覆盖前一次。所以数据加载后距离矩阵没有正确填充。

**解决方案：**将`int c = 0;`外部从`for`循环中移开。

## 单向道路

说明中的道路是双向的，但您只能将它们注册为单向。因此，城镇之间不存在联系的情况会更高。

**解决方案：**`dist[map.get(text[0].charAt(1))][map.get(text[0].charAt(0))] = Integer.parseInt(text[1]);`在类似的后面添加。

* * *

除了这些难题之外，我还为您提供了一些提示。您没有关注它们，但如果您想提高您的编程技能，那么您应该考虑它们。

## 乱码

您的代码难以阅读，有多个重述信息，例如索引，解决过程是单一方法等。这样的代码不仅难以阅读，而且极难**调试**和**修复**。为了您自己的利益，我建议您将其写得更干净。

## 算法效率

Floyd-Warshall 的算法具有`O(n^3)`复杂性。问题的大小（城镇数量）是 AM = 13。在这种复杂性中，它会进行`13^3 = 2197`迭代。我知道，这似乎不是很多，但请考虑在给定时间限制内要解决的任务数量。

我建议您使用具有复杂性[的 Dijkstra 算法](https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)`O(|E| + |V|log|V|)`。在这个任务中，经过一些简化的最坏情况是`|E| = (|V|^2)/2, |V|=13`。这意味着，最终的迭代次数是`5 (|V|^2 / 2 + |V|log|V|) = 5 (13^2 / 2 + 13 * log13) ~ 5 * 132 = 660`。如果我没有错并且犯了任何错误，那么这要少得多，尤其是当我们考虑任务总量时。

## 输入读数

我可能错了，但我参加了多个编程竞赛和竞赛，它从未强迫与会者处理文件。输入总是从文件重定向到标准输入。我想，这样做的主要原因是安全性，但简化可能也非常有益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:08:02.480

好吧，我得到了这个问题，我现在开始做 SPOJ，我得承认以后很难，但我遇到了同样的问题[http://www.spoj.com/problems/SHPATH/](http://www.spoj.com/problems/SHPATH/)，我也使用了弗洛伊德·沃歇尔

```
 import java.util.*;

    public class Floydwarshall {

public static void main(String[] args) {
    Scanner s = new Scanner(System.in);
    String q = s.nextLine();
    for(int t=0;t<Integer.parseInt(q);++t){
        int n = Integer.parseInt(s.nextLine());
        int[][] cost = new int[n][n];
        for (int y = 0; y < n; ++y) {
            for (int x = 0; x < n; ++x) {
                cost[x][y] = 10000;
            }
        }
        Map<String, Integer> map = new TreeMap<String, Integer>();
        int c = 0;
        for (int i = 0; i < n; ++i) {
            String a = s.nextLine();
            if (!map.containsKey(a)) {
                map.put(a, c);
                c++;
            }
            int f = Integer.parseInt(s.nextLine());
            for (int j = 0; j < f; ++j) {
                String text[] = s.nextLine().split(" ");
                cost[map.get(a)][Integer.parseInt(text[0]) - 1] =
                        cost[Integer.parseInt(text[0]) - 1][map.get(a)] = Integer.parseInt(text[1]);
            }
        }
        for (int k = 0; k < map.size(); ++k) {
            for (int i = 0; i < map.size(); ++i) {
                for (int j = 0; j < map.size(); ++j) {
                    cost[i][j] = Math.min(cost[i][j], cost[i][k] + cost[k][j]);
                }
            }
        }
        int num = Integer.parseInt(s.nextLine());
        for (int i = 0; i < num; ++i) {
            String text[] = s.nextLine().split(" ");
            System.out.println(cost[map.get(text[0])][map.get(text[1])]);
        }
    }
}} 
```

现在它对于示例输入运行正常，但是当我提交它时，它给了我这个

NZEC（非零退出代码） - 此消息意味着程序退出，返回一个不同于 0 的值到 shell。对于 C 等语言，这可能意味着您忘记在程序末尾添加“return 0”。对于解释型语言（包括 JAVA），NZEC 通常意味着您的程序崩溃或引发未捕获的异常。问题是我无法确定它在哪里崩溃或引发未捕获的异常，因为它
适用于示例输入

# ios - tableview 在 connectionDidFinishLoading 中重新加载数据时出错（由 json 解析）

> ID：15540574
> 
> 赞同：1
> 
> 时间：2013-03-21T06:05:36.193
> 
> 标签：ios, uitableview, ios5, ios6

我有一个带有自定义表格视图单元格的表格视图控制器和之后

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{} 
```

它给出了这个错误：使用下面的代码后，在**“ViewController2 *”类型的对象上找不到属性“tableview”**，没有它，数据不会显示在tableview中。

```
[self.tableview reloadData]; 
```

我无法弄清楚如何解决它。请帮助我。我将非常感谢您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:34:29.917

上述错误的可能性

```
 1) Your Xib would not have been connected with your ViewController2
     2) You would have not connected your tableView IBOutlet to your xib
     3) In case if you have not @synthesize it if you have declared it as a property
     4) If all the above you did correctly just clean your Xcode and run 
```

# android - adb push 失败，参数无效

> ID：15540575
> 
> 赞同：0
> 
> 时间：2013-03-21T06:05:38.573
> 
> 标签：android, adb

嗨，我要什么将 APK 扩展文件推送到我的手机，所以我正在执行：

`C:\Users\dogface\AppData\Local\Android\android-sdk\platform-tools>adb.exe push c :\main.1.com.redcricket.Audiobook.obb /mnt/sdcard/Android/obb/com.redcricket.Audiobook\main.1.com.redcricket.Audiobook.obb`

但这失败并出现此错误：

`failed to copy 'c:\main.1.com.redcricket.Audiobook.obb' to '/mnt/ sdcard/Android/obb/com.redcricket.Audiobook\main.1.com.redcricket .Audiobook.obb': Invalid argument`

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:11:41.173

请试试

在 C 盘创建任何文件夹，然后将 apk 放入其中并尝试。不要创建main.1。请更改软件包名称，然后重试。

例如：

```
 adb push foo.txt /sdcard/foo.txt 
```

# iphone - Apple 拒绝 App 的元数据：“Cant locate In App Purchase in my App”。？

> ID：15540576
> 
> 赞同：1
> 
> 时间：2013-03-21T06:05:43.823
> 
> 标签：iphone, ios, ipad, in-app-purchase

今天我的应用程序元数据被 Apple 拒绝了，他们是这样说的：

> 我们已开始审核您的应用，但无法继续，因为我们无法在您的应用中找到应用内购买。
> 
> 请尽早回复此消息，提供在您的应用中查找应用内购买的步骤。
> 
> 虽然您的 iTunes Connect 应用程序状态显示为已拒绝，但没有必要上传新的二进制文件。回复此消息后，我们可以继续进行审核。

我无法理解，他们怎么找不到我的 In App Purchase，因为这是同一个 App，Apple 拒绝了，因为我没有在我的 In App Purchase 中包含“恢复”按钮。

现在他们说：“找不到应用内购买”.. ? :O

这里到底有什么问题？他们让我回复他们，我不明白该对他们说什么。

另外，我是否必须提交新的元数据..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:16:07.577

您尚未提交应用内购买。上传二进制文件时必须选择应用内购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:09:51.177

如果您已实施 InApp 购买，则您已在 AppPurchase 中提交所有内容。要查找 inApp 购买：

**iTunesConnect -> 管理您的应用程序 -> 选择应用程序 -> 管理应用内购买。**

如果inApp购买未提交，请提交。

# php - INSERT INTO 调用一次但运行两次（不是循环）

> ID：15540577
> 
> 赞同：1
> 
> 时间：2013-03-21T06:05:43.963
> 
> 标签：php, mysql, sql, pdo

我有一个查询，每次遇到它都会运行两次，这不是故意的。我在文件前后添加了日志记录，并在运行脚本之前清除了文件。

我认为我不需要发布其他代码，因为我相信我的日志记录证明这个查询只被调用了一次。

编码：

```
file_put_contents(
    $_SERVER['DOCUMENT_ROOT'].'/PDOErrors.txt',
    "\n\nImmediately before ban query 1\. ".date('r ')." (1)",
    FILE_APPEND);

$sth=$Mdbh->query("
    INSERT INTO
        banned_IP
    SET
        ip_add      = '$ip',
        proxy_ip    = '$proxy_ip'
");
$sth->execute();

file_put_contents(
    $_SERVER['DOCUMENT_ROOT'].'/PDOErrors.txt',
    "\n\nBanned the user using query1\. ".date('r ')." (2)",
    FILE_APPEND);

return 999; 
```

请注意，`return`在它运行之后也会立即出现，即使它被调用了两次，我的`PDOErrors.txt`文件也会显示每次运行的诊断数据，但它不会。

第一个诊断数据`PDOErrors.txt`运行，但第二个永远不会运行！

这是 PDOErrors.txt 的副本

```
Immediately before ban query 1\. Thu, 21 Mar 2013 13:38:56 +0800  (1)

exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '127.0.0.1' for key 'ip_add'' in /home/peter/Documents/websites/Our_websites/bookkeeper/books.bookkeeper/public/includes/classes/loginAttempt.class.php:137
Stack trace:
#0 /home/peter/Documents/websites/Our_websites/bookkeeper/books.bookkeeper.ph/public/includes/classes/loginAttempt.class.php(137): PDOStatement->execute()
#1 /home/peter/Documents/websites/Our_websites/bookkeeper/books.bookkeeper.ph/public/includes/classes/login.class.php(980): loginAttempt->recordLoginAttempt(Array)
#2 /home/peter/Documents/websites/Our_websites/bookkeeper/books.bookkeeper.ph/public/ajax/login.user.php(25): Login->doLogin(Array)
#3 {main} 
```

我应该提到，我`banned_IP`在每次运行之前完全清空了数据库表。

我还记录了所有查询，因为这是一个开发环境，查询日志如下所示：

```
708 Query     INSERT INTO
                        banned_IP
              SET
                        ip_add          = '127.0.0.1',
                        proxy_ip        = ''

708 Query     INSERT INTO
                        banned_IP
              SET
                        ip_add          = '127.0.0.1',
                        proxy_ip        = ''
708 Quit 
```

我想我很满意该查询只被调用一次，因为如果没有，PDOErrors.txt 将包含两组诊断数据。错误消息似乎是在第一次对空数据库表运行查询时生成的。请问这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:57:38.163

PDO->query 将执行查询并返回 PDOStatement 对象，现在您再次执行返回的 PDOStatement 导致此错误。

使用返回 PDOStatement 对象的 PDO->prepare 然后执行语句或者只使用 PDO->query 并且不执行 PDOStatement

# python - 直接在windows上使用GDAL

> ID：15540579
> 
> 赞同：2
> 
> 时间：2013-03-21T06:05:46.543
> 
> 标签：python, windows, gdal

是否有可能通过 MS_DOS 直接使用 GDAL？我见过的大多数说明都需要安装 Python 及其绑定。

安装自可执行安装 msi 后是否可以使用 GDAL？还需要其他配置步骤吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:58:57.550

是的，Microsoft Windows 支持 GDAL。但是，有几种不同的安装方式；[请参阅https://gis.stackexchange.com/questions/2276/how-to-install-gdal-with-python-on-windows](https://gis.stackexchange.com/questions/2276/how-to-install-gdal-with-python-on-windows)上的选项

最简单的方法是使用[OSGeo4w](http://trac.osgeo.org/osgeo4w/)。要安装最小的 GDAL 命令行设置，请使用安装程序的高级模式选择一个包：`gdal`. 由于一些 GDAL 命令行实用程序是 Python 脚本，因此它将安装自己的 Python 版本作为依赖项。安装后，使用“开始”菜单中的 OSGeo Shell 作为命令提示符。

# javascript - jquery each() 不会遍历新添加的表行

> ID：15540581
> 
> 赞同：3
> 
> 时间：2013-03-21T06:05:49.250
> 
> 标签：javascript, jquery, html

我有一张非常简单的桌子

```
<table>
<tr><td>1</td></tr>
<tr><td>2</td></tr>
<tr><td>3</td></tr>
</table> 
```

当我在 td jquery each() 中使用文本 5 将另一行附加到上表时，它不会循环遍历新添加的行，它只返回预定义的元素，而不是动态添加的元素

```
$("table > tbody").append("<td>5</td>");
$("table tr td").each(function(){
  alert($(this).text());
}); 
```

请在此处查看[JS FIDDLE 链接](http://jsfiddle.net/v7znh/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T06:07:15.997

在`tbody`您不能附加`td`直接将它们*包装*在`tr`.

**[现场演示](http://jsfiddle.net/JcvtG/)**

```
$("table > tbody").append("<tr><td>5</td></tr>");
$("table tr td").each(function(){
  alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T06:07:24.843

你的推理不正确。它找不到元素的原因是您的选择器与您要附加的元素的嵌套不匹配。

将元素包裹`td`在一个`tr`元素中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T06:11:33.320

你需要这样做：

```
$("table > tbody").append("<tr><td>5</td></tr>");
$("table tr td").each(function(){
  alert($(this).text());
}); 
```

原因很简单，您的原始代码将生成新行，因为`<tbody><td>5</td></tbody>`没有您在每个函数中寻找的 tr 标记。

# persistence - 如何在g-wan中的http请求之间共享内存？

> ID：15540588
> 
> 赞同：3
> 
> 时间：2013-03-21T06:06:42.387
> 
> 标签：persistence, g-wan

假设我有一个带有 c 脚本的 g-wan 服务器，如果一个 http 请求进来，然后是另一个 http 请求，我希望这两个正在运行的脚本能够从 ram 的同一部分读取和写入。

换句话说，我希望有一个简单的 RAM 数据库，一个数据数组和任何 http 请求都可以从这个 RAM 数据库中读取。

我的意思是对于这个服务器的任何 HTTP 请求，它可能来自任何客户端。我只想能够读取或写入 RAM 中的相同数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:03:46.343

您可以使用`US_SERVER_DATA`：

```
US_SERVER_DATA,      // global pointer (for maintenance script) 
```

# html - 预加载字体 HTML5、JS、Kinetic.js？

> ID：15540591
> 
> 赞同：2
> 
> 时间：2013-03-21T06:07:02.127
> 
> 标签：html, canvas, fonts, kineticjs

我有一个自定义字体 ( `*.ttf`)，用于使用 Kinetic.js 在 HTML 画布上编写文本。

不幸的是，在第一次加载页面时，它没有使用我的自定义字体，重新加载页面时一切都很好。

我可以以某种方式预加载字体吗？

我已经尝试过了，但仍然无法正常工作：

```
<link rel="prefetch" href="resource/font/IDAutomationHC39M.ttf"> 
```

我可以告诉 Kinetic.js 以某种方式预加载它吗？

字体在我的 CSS 中定义如下：

```
@font-face {
    font-family: "Barcode";
    src: url(../font/IDAutomationHC39M.ttf);
} 
```

提前感谢您的支持！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-03T18:32:47.080

我今天遇到了同样的问题..我最终使用了这个

```
<style>
@font-face {
    font-family: 'ArchivoBlack-Regular';
    src: url('../fonts/ArchivoBlack-Regular.ttf');
}
</style>

<div style="font-family:'ArchivoBlack-Regular'">&nbsp;</div> 
```

之后你就可以做你正常的 KineticJS 东西了..！实际上它需要在使用之前先加载字体..！我英语不好，但我希望你明白我的意思。也看看那个链接：[Github Link](https://github.com/ericdrowell/KineticJS/issues/165)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-23T15:24:32.293

回答可能为时已晚，但值得一提的是一个完整的例子。

请注意，[KonvaJS](https://konvajs.github.io/)派生自 KeneticJS 并受到支持，但不再支持 Keneticjs。

```
window.onload = function () {
var stage = new Konva.Stage({
      container: 'container',
      width: 1000,
      height: 1000
    });

    var layer = new Konva.Layer();

    var simpleText = new Konva.Text({
      x: stage.getWidth() / 10,
      y: 15,
      text: "\uf21c",
      fontSize: 300,
      fontFamily: 'FontAwesome',
      fill: 'green'
    });
  layer.add(simpleText);
  stage.add(layer);

}
```

```
 @font-face {
    font-family: 'FontAwesome';
    src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/fonts/fontawesome-webfont.ttf');
    font-weight: normal;
    font-style: normal;
}
```

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
   <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"/>
  <script src="https://cdn.rawgit.com/konvajs/konva/0.11.1/konva.min.js"></script>
  <title>JS Bin</title>
</head>
<body>
  <div id="container" style="font-family:'FontAwesome'">dummyText</div>
</body>
</html>
```

非常感谢@luschn 的出色回答，因为正如他所说：“超时是不好的解决方案”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T14:25:45.780

它通常适用于所有浏览器，您只需要正确使用字体。只需使用这样的生成器：[http ://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

它创建一个包含 4 个字体文件（eot、svg、ttf、woff）的 zip 文件，并且有一个包含必要代码的 css 文件：

```
@font-face {
    font-family: 'myfont';
    src: url('myfont.eot');
    src: url('myfont.eot?#iefix') format('embedded-opentype'),
         url('myfont.woff') format('woff'),
         url('myfont.ttf') format('truetype'),
         url('myfont.svg#myfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我正在使用 KineticJS，当我在页面加载后创建舞台时，它使用正确的字体：

```
window.onload = function () {
    var stage = new Kinetic.Stage({
            container: 'container',
            width: 800,
            height: 600
    });
    //code for creating a layer, text and whatnot with kinetic
} 
```

当然，如果您不使用 Kinetic，也应该没问题。

如果它在某些浏览器中不起作用，则字体可能无法正确加载。恕我直言，使用超时将是一个不好的解决方法，您可以尝试在开始的正文标记之后添加一个隐藏的 div：

```
<div class="font-hack" style="font-family:'your-font';">nothing to see here, move along</div> 
```

你在那里写什么并不重要（但它不能为空）。

我不再使用 Kinetic，但这对 Phaser Engine 非常有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T21:32:22.800

您可以使用这个旧的 css hack 来强制字体可用：

向指定 Barcode 字体的页面添加隐藏元素

```
<span id="mustLoadMe"> 
```

然后在 CSS 中：

```
#mustLoadMe
{
    visibility: hidden;
    position: absolute;
    font-family: Barcode, Arial, Sans-serif;
} 
```

最后，在画布中绘制文本之前，使用 jQuery 等待字体加载。

```
$("#mustLoadMe").load(function() {
       // do your canvas stuff here because the font should be loaded now...
}); 
```

注意：您可能不得不在上面的步骤#3 中使用 $(window).load() 来解决某些浏览器异步加载字体的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-03T12:36:38.870

I had the same problem with FontAwesome. Here is my solution:

```
//wait for fontawsome to load
setTimeout(function(){
   kineticStuff();
}, 500); 
```

No need to add an element to your page.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-24T04:10:01.597

通过谷歌的 webfontloader [https://github.com/typekit/webfontloader](https://github.com/typekit/webfontloader)

***需要使用testStrings***来确定是否已加载带有字形的字体。如果您的字体没有字形或自定义子集，则不需要使用***testStrings***

```
 WebFont.load({
     custom: {
         families: ['fontFamily1'],
         testStrings: {
             'fontFamily1': '\uE600'
         },
     },
     timeout: 5000 // Set the timeout to five seconds
         ,
     fontactive: function(familyName, fvd) {
        // the font have been loaded and now you can do what you want
     },
     fontinactive: function(familyName, fvd) {
         // the font could not be loaded  
     },
 }); 
```

# regex - if 语句中的 BASH 正则表达式匹配

> ID：15540592
> 
> 赞同：0
> 
> 时间：2013-03-21T06:07:02.487
> 
> 标签：regex, arrays, bash, if-statement

我现在想提一下，我对 RegEx 或 BASH 都不太流利，因此非常感谢深入的解释，这样我可以学习。谢谢。

我已经大大简化了这个文件，但基本上我想要做的是获取一个数组`$sqldatabases`并检查哪些变量包含 @ 符号，然后更新该特定变量以不包含 @ 符号，最后`mysqldump`为该数据库运行. 基本上，我目前看到的代码中缺少`if`语句过滤论坛@。

```
source config.sh
sqldatabases=(bans forum@ users donators)
for (( sqlcount = 0; sqlcount < ${#sqldatabases[@]}; sqlcount++ ))
    do
        if [[ "$sqldatabases[sqlcount]" =~ *[@]* ]] ; then
            sqldatabases[sqlcount]=${sqldatabases[sqlcount]//[@]/}
            echo "$sqldatabases[sqlcount]"
            mysqldump -u"$sqluser" -p"$sqlpass" -h"$sqlhost" ${sqldatabases[sqlcount]} > .backups/$timedate/MySQL/${sqldatabases[sqlcount]}.sql;
        fi
    done 
```

再次感谢您的帮助，并尝试深入解释每个修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:18:22.227

实际上，您不需要任何循环来删除@：

```
sqldatabases=(bans forum@ users donators)
sqldatabases=(${sqldatabases[@]/@/})
echo ${sqldatabases[*]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:21:13.143

您需要使用`${array[index]}`语法。而且您不需要`*`s 来匹配`@`（或`.*@.*`改用）：

```
if [[ "${sqldatabases[sqlcount]}" =~ @ ]] ; then
            sqldatabases[sqlcount]=${sqldatabases[sqlcount]//[@]/}
            echo "${sqldatabases[sqlcount]}"
            mysqldump # ...
fi 
```

# 3d - 使用深度缓冲使水边变软

> ID：15540595
> 
> 赞同：7
> 
> 时间：2013-03-21T06:07:09.287
> 
> 标签：3d, directx, game-engine

我想做软水。所以我制作了一个渲染目标来保持场景的深度，然后我渲染水几何。

并让水`alpha = ( SceneDepth - WaterDepth ) * Scale`

看着下面这张图的结果，水的边缘变软了，但看起来很奇怪，就像梯子一样。

那么怎么处理呢？

非常感谢！

![水阿尔法](../Images/df3e7334bbf7d08333d26754cce75649.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T03:21:23.657

我最近一直在研究类似的问题。

我使用透明度来软化水的边缘。

为了利用水的深度来确定 alpha 值，我使用 HLSL[平滑步长](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509658%28v=vs.85%29.aspx)和[钳位](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204824%28v=vs.85%29.aspx)函数返回介于 0.75f 和 1.0f 之间的不透明度值：

```
// colour can be whatever your lighting equations compute
float3 colour = (r, g, b); 

if ( SeaDepth <= 0.2f )
    discard;

float opacity = clamp( 
    smoothstep( 0.f, 12.f, SeaDepth  ), 
    .75f, 1.f
);

return float4(colour.xyz, opacity); 
```

# iphone - 使用 NSURLConnection 时出现连接丢失错误

> ID：15540602
> 
> 赞同：0
> 
> 时间：2013-03-21T06:07:52.843
> 
> 标签：iphone, nsurlconnection

我在使用 NSURLConnection 时遇到连接丢失问题。我正在使用 NSURLConnection 进行异步下载。我正在下载大小约为 80MB 的大文件。我每次都通过适当的文件处理将接收到的数据写入文件中。一段时间后，我在名为 didFailWithError 的 NSURLConnection 委托的方法中收到连接“连接丢失”错误。如果我在 Mac 上的模拟器中执行，则需要很长时间，但文件会成功下载，而不会出现连接丢失错误。任何建议如何避免此错误？或者这个错误背后的原因是什么？

让我知道是否需要任何细节。请注意，我读过类似的帖子，但对我没有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T12:36:24.110

找到下面的代码片段，如果需要更多信息，请告诉我：

```
-(void) startDownloadFromURL:(NSString*)URLString
{
    if(URLString == nil)
    {
        [delegate DownloadFailed:-1];
        return;
    }
    //self.pstrBaseFilePath = filePath;
    URLString = [URLString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    NSMutableURLRequest* pRequest = [[NSMutableURLRequest alloc] init];
    [pRequest setURL:[NSURL URLWithString:URLString]];

    if(gpUserDataManager.pstrSessionID == nil)
        return;

    [pRequest addValue:[@"ASessionID=" stringByAppendingString:gpUserDataManager.pstrSessionID]  forHTTPHeaderField:@"Cookie"];

    [pRequest setHTTPMethod:@"GET"];
    [pRequest setTimeoutInterval:180];

    self.urlConnection = [[NSURLConnection alloc] initWithRequest:pRequest delegate:self];

    [urlConnection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;

    if([httpResponse statusCode] == 200)
    {

    }
    else
    {
        //Start.NOODLE-13304
        /* NSInteger iResponseCode = [httpResponse statusCode];
         NSString* pstrStr = [NSString stringWithFormat:@"%d", iResponseCode];

         //pTheConnection = nil;

         [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Response Error", @"")
         message:pstrStr
         delegate:nil
         cancelButtonTitle:NSLocalizedString(@"OK", @"")
         otherButtonTitles:nil]  show];
         */
        [AUserDataManager ProcessResponseCode:httpResponse.statusCode];
        [self.urlConnection cancel];
        [delegate DownloadFailed:httpResponse.statusCode];
        //End.NOODLE-13304
    }

    //[self.pRecvdata setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if(self.recvdData == nil)
    {
        self.recvdData = [[NSMutableData alloc] init];
    }

    [self.recvdData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    //    bIsResponseOK = FALSE;
    //
    //    [NSThread detachNewThreadSelector: @selector(SpinEnd) toTarget:self withObject:nil];
    //
    //    pTheConnection = nil;

    [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Connection Error", @"")
                                message:[error localizedDescription]
                               delegate:nil
                      cancelButtonTitle:NSLocalizedString(@"OK", @"")
                      otherButtonTitles:nil]  show];
    [self.urlConnection cancel];
    [delegate DownloadFailed:-1];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [connection cancel];
    [delegate DownloadCompleted:self.recvdData];
}

DownloadRequest *request = [[DownloadRequest alloc] init];
request.delegate = self;
[request startDownloadFromURL:strURL]; 
```

# django - Django 1.5 - 使用 TemplateView 时找不到定义的视图

> ID：15540608
> 
> 赞同：0
> 
> 时间：2013-03-21T06:08:10.933
> 
> 标签：django, django-1.5

我创建 index.html 并使用 TemplateView。当我尝试访问我的索引时，我收到一个错误，即我的索引视图未定义。我不知道为什么，我只是遵循这种模式 [https://docs.djangoproject.com/en/dev/topics/class-based-views/#subclassing-generic-views](https://docs.djangoproject.com/en/dev/topics/class-based-views/#subclassing-generic-views)

这是我的代码：

**网址.py**

```
from django.conf.urls import patterns, url

from . import views

urlpatterns = patterns('',
    url(
        r'^$', 
        views.IndexView.as_view(),
        name='index'
    ),
) 
```

**视图.py**

```
from django.views.generic import TemplateView

def IndexView(TemplateView):
    template_name = 'index.html' 
```

**追溯（更新）**

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'accounts',
 'front')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  103\.                     resolver_match = resolver.resolve(request.path_info)
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  319\.             for pattern in self.url_patterns:
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  347\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  342\.             self._urlconf_module = import_module(self.urlconf_name)
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/cath/src/autovine/autovine/urls.py" in <module>
  33\.         include('front.urls', namespace="front")
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/conf/urls/__init__.py" in include
  25\.         urlconf_module = import_module(urlconf_module)
File "/home/cath/virtualenvs/autovine_env/local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/cath/src/autovine/autovine/apps/front/urls.py" in <module>
  8\.         IndexView.as_view(),

Exception Type: NameError at /
Exception Value: name 'IndexView' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:43:26.563

您收到错误是因为您尚未导入`IndexView`当前命名空间。您已导入`views`. `IndexView`只能在`views`命名空间内访问 - 即`views.IndexView`.

你应该重写你的导入语句 -

```
from yourapp.views import IndexView 
```

或者重新编写你的 urlconf -

```
urlpatterns = patterns(' ',
   url(r'^$', views.IndexView.as_view(), name='index'), 
) 
```

也许阅读 python 的命名空间 - 这就是导致您的`NameError`异常的原因。

最重要的是，您还将视图定义为一个函数，而不是它应该是的类 -

`class IndexView(TemplateView):`而不是`def IndexView(TemplateView):`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:57:50.860

只要弄清楚我的错误。我把`def`而不是`class`.

```
def IndexView(TemplateView): //wrong

class IndexView(TemplateView): //correct 
```

# android - 如何通过android代码在通话期间更改对方的声音

> ID：15540612
> 
> 赞同：4
> 
> 时间：2013-03-21T06:08:29.820
> 
> 标签：android, call, voice-recognition, voice-recording

是否可以通过 android 代码在通话期间更改该人的声音？

是否允许开发人员在 android 应用程序中执行此类功能？

如果您对此有任何想法，请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:43:25.180

AFAIK，

您可能可以使用录制的语音进行播放，Play商店中有许多应用程序都在这样做，甚至可以根据用户的语音输入创建歌曲，所以..这很可能将普通用户的语音输入转换为一些不同的音调和节奏以及那些如果开发得当，应用程序真的很有趣。

要将它与 Call 一起使用，我想这是不可能的，Android 应该/永远不会为开发人员提供这样的能力。“一切为了用户安全约束”

* * *

*您可以通过不接受此答案*来保持问题开放，并从其他用户那里获得更多建议和演示链接。

# android - 如何使用打印机（通过蓝牙打印）从 android 设备打印图像和一些数据？

> ID：15540614
> 
> 赞同：6
> 
> 时间：2013-03-21T06:08:40.413
> 
> 标签：android, printing, bluetooth

我正在开发一个应用程序，我必须在其中打印一张收据，收据有一个徽标（静态）图像视图，我如何将它打印到蓝牙打印机？而且我已经使用 GestureOverlayView 进行了签名，现在我必须打印该手势以及徽标和一些有关收据的数据。![在此处输入图像描述](../Images/8a40e957771951f4b9964c0a9256a034.png)

我还需要打印一个阿拉伯字符串。这显示在文本视图中。为了显示签名，我在我的布局中使用图像视图。请检查图像，我附上我必须打印的图像，请给我一些关于打印它的想法。

我可以更改打印格式，这意味着我不必以矩形打印数据，但图像对齐是主要问题，我将如何了解对齐？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-04T10:47:31.287

试试用这个....

```
public class BluetoothPrinterActivity extends Activity {

BluetoothAdapter mBTAdapter;
BluetoothSocket mBTSocket = null;
Dialog dialogProgress;
String BILL, TRANS_ID;
String PRINTER_MAC_ID = "00:1F:B7:02:8F:44";
final String ERROR_MESSAGE = "There has been an error in printing the bill.";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {

        BILL = "\nSale Slip No: 12345678" + " " + "04-08-2011\n";
        BILL = BILL + "----------------------------------------";
        BILL = BILL + "\n\n";
        BILL = BILL + "Total Qty:" + " " + "2.0\n";
        BILL = BILL + "Total Value:" + " " + "17625.0\n";
        BILL = BILL + "-----------------------------------------";

        mBTAdapter = BluetoothAdapter.getDefaultAdapter();

        if (mBTAdapter == null) {
            Toast.makeText(this, "Device has no bluetooth capability",Toast.LENGTH_LONG).show();
            finish();
        } else {
            if (!mBTAdapter.isEnabled()) {
                Intent i = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(i, 0);
            }

            // Register the BroadcastReceiver
            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
            registerReceiver(mReceiver, filter); // Don't forget to unregister during onDestroy

            dialogProgress = new Dialog(BluetoothPrinterActivity.this);
            dialogProgress.setTitle("Finding printer...");
            dialogProgress.setOnDismissListener(new DialogInterface.OnDismissListener() {
                        public void onDismiss(DialogInterface dialog) {
                            dialog.dismiss();
                            setResult(RESULT_CANCELED);
                            finish();
                        }
                    });
            dialogProgress.show();

        }

        if (mBTAdapter.isDiscovering())
            mBTAdapter.cancelDiscovery();
        else
            mBTAdapter.startDiscovery();

        System.out.println("BT Searching status :" + mBTAdapter.isDiscovering());

    } catch (Exception e) {
        Log.e("Class ", "My Exe ", e);
    }
}

private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        try {
            String action = intent.getAction();
            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                System.out.println("***" + device.getName() + " : "+ device.getAddress());

                if (device.getAddress().equalsIgnoreCase(PRINTER_MAC_ID)) {
                    mBTAdapter.cancelDiscovery();
                    dialogProgress.dismiss();
                    Toast.makeText(BluetoothPrinterActivity.this,device.getName() + " Printing data",Toast.LENGTH_LONG).show();
                    printBillToDevice(PRINTER_MAC_ID);
                    Toast.makeText(BluetoothPrinterActivity.this,device.getName() + " found", Toast.LENGTH_LONG).show();
                }
            }
        } catch (Exception e) {
            Log.e("Class ", "My Exe ", e);
        }
    }
};

@Override
protected void onDestroy() {
    super.onDestroy();
    try {
        if (dialogProgress != null)
            dialogProgress.dismiss();
        if (mBTAdapter != null)
            mBTAdapter.cancelDiscovery();
        this.unregisterReceiver(mReceiver);
    } catch (Exception e) {
        Log.e("Class ", "My Exe ", e);
    }
}

@Override
public void onBackPressed() {
    try {
        if (mBTAdapter != null)
            mBTAdapter.cancelDiscovery();
            this.unregisterReceiver(mReceiver);
    } catch (Exception e) {
        Log.e("Class ", "My Exe ", e);
    }
    setResult(RESULT_CANCELED);
    finish();
}

public void printBillToDevice(final String address) {
    new Thread(new Runnable() {
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {
                    dialogProgress.setTitle("Connecting...");
                    dialogProgress.show();
                }

            });

            mBTAdapter.cancelDiscovery();

            try {
                System.out.println("**************************#****connecting");
                BluetoothDevice mdevice = mBTAdapter.getRemoteDevice(address);
                Method m = mdevice.getClass().getMethod("createRfcommSocket", new Class[] { int.class });
                mBTSocket = (BluetoothSocket) m.invoke(mdevice, 1);

                mBTSocket.connect();
                OutputStream os = mBTSocket.getOutputStream();
                os.flush();

                os.write(BILL.getBytes());
                System.out.println(BILL);

                setResult(RESULT_OK);
                finish();
            } catch (Exception e) {
                Log.e("Class ", "My Exe ", e);
                e.printStackTrace();
                setResult(RESULT_CANCELED);
                finish();

            }

            runOnUiThread(new Runnable() {
                public void run() {
                    try {
                        dialogProgress.dismiss();
                    } catch (Exception e) {
                        Log.e("Class ", "My Exe ", e);
                    }
                }

            });

        }

    }).start();
  }
} 
```

从这个链接[蓝牙打印机问题在android](https://stackoverflow.com/questions/7145787/bluetooth-printer-issue-in-android)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:14:56.870

[在您可以从已经提出的问题](https://stackoverflow.com/questions/9838822/android-bluetooth-printing)中获得解决方案之前，我会尽力给出答案

您有 3 个从 android 应用程序打印的选项

1> **SDKs/Libraries：（**如starmicronics，仅限于少数设备）

2> **Google Play Apps：（直接调用第三方**[应用](https://play.google.com/store/search?q=print%20app)的intent ）

3>**谷歌云打印：（**推荐。它易于使用并集成到应用程序中）通过这个我们连接任何打印机，如经典打印机、云打印打印机。

使用谷歌打印作为用户视角用户应该激活谷歌打印服务到gmail帐户，[谷歌云打印在许多地方使用！](http://arstechnica.com/business/2012/04/google-cloud-print-can-now-print-to-an-android-device-or-local-fedex-store/)

**设置谷歌打印服务**：

[博客](http://lifehacker.com/5882060/google-cloud-print-its-actually-awesome-and-heres-how-to-set-it-up)

[https://stackoverflow.com/questions/11323805/how-to-setup-network-printer-to-google-cloud-print/14911180#14911180](https://stackoverflow.com/questions/11323805/how-to-setup-network-printer-to-google-cloud-print/14911180#14911180)

[谷歌云打印设置1](http://www.google.com/landing/cloudprint/)

[谷歌云打印设置2](http://support.google.com/cloudprint/answer/1686197?hl=en)

[通过 gchrome 打印](https://stackoverflow.com/questions/9911848/eclipse-printing-via-google-cloud-print/9912135#9912135)

[谷歌云打印机](http://www.google.co.in/cloudprint/learn/printers.html)

**将云打印机集成到应用程序：**

在 Android 中，没有像其他平台一样的[Airprint](https://stackoverflow.com/questions/4293975/printing-to-an-airprint-printer-from-android)选项，但谷歌为此提供了很棒的云打印选项，这样任何打印机都可以使用移动设备上的打印选项。

示例代码：

[函数代码](http://fun2code-blog.blogspot.de/2011/10/cloud-x-sharing-files-through-cloud.html)

[谷歌云打印代码](https://developers.google.com/cloud-print/docs/android)

# php - json 解析消息时出错（德语）

> ID：15540617
> 
> 赞同：0
> 
> 时间：2013-03-21T06:08:51.737
> 
> 标签：php, jquery, json

我确实使用 ajaxsubmit 实现了提交。我的 php 代码（动作函数），

```
$printArr['succ'] = '1';
$printArr['msg'] = 'Ihr Passwort wurde erfolgreich geändert';
echo json_encode($printArr);
exit; 
```

当我在 js 函数中得到响应时，它给了我错误。我的js代码，

```
submitHandler: function(form) {
            var options = {
                url:$('#persdata2').attr('action'),
                success:function(response){
                    data = $.parseJSON(response);
                    $('#password_err_content').html(data.msg);
                    $('#password_err_blk').slideDown();
                }
            };
            $("form#persdata2").ajaxSubmit(options);
            return false;
        } 
```

**错误**：

```
SyntaxError: JSON.parse: expected ',' or '}' after property value in object 
```

如果我像这样传递简单的消息

`$printArr['msg'] = 'Password change successfully';`

那么一切都很好。

帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:16:04.283

可能你想试​​试`json_encode($printArr, JSON_UNESCAPED_UNICODE)`

[CodeViper 演示](http://codepad.viper-7.com/VcJANw)。

[JSON_UNESCAPED_UNICODE](http://php.net/manual/en/json.constants.php#constant.json-unescaped-unicode)： *按字面编码多字节 Unicode 字符（默认转义为 \uXXXX）。自 PHP 5.4.0 起可用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:14:41.600

请尝试在 slideDown(); 之后删除 \ \

```
 submitHandler: function(form) {
        var options = {
            url:$('#persdata2').attr('action'),
            success:function(response){
                data = $.parseJSON(response);
                $('#password_err_content').html(data.msg);
                $('#password_err_blk').slideDown(); // here the / is given 
            }
        };
        $("form#persdata2").ajaxSubmit(options);
        return false;
    } 
```

希望它会有所帮助！

# asp.net - 显示 ” " 作为 ASP.NET RadioButton 中的文本

> ID：15540624
> 
> 赞同：0
> 
> 时间：2013-03-21T06:09:24.910
> 
> 标签：asp.net, webforms

我想要一个 RadioButton 来显示像“<hello world>”这样的文本（注意我想要显示“<”和“>”字符，而不是被解释为 HTML 标记字符）。

尝试过这样的事情：

```
<asp:RadioButton ID="RadioButton1" runat="server"  Text="&lt;hello world&gt;" AutoPostBack="True"   /> 
```

但这在浏览器上不显示任何文本，并在客户端呈现为：

```
<span class="radiobutton"><input id="ctl00_mainCopy_wizard_RadioButton1" type="radio" 
... />
<label for="ctl00_mainCopy_wizard_RadioButton1"><hello world></label></span> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:12:44.597

尝试双重转义它。

```
&amp;lt;hello world&amp;gt; 
```

# python-2.7 - 在 python 中播放在线 mp3 音乐

> ID：15540625
> 
> 赞同：0
> 
> 时间：2013-03-21T06:09:25.037
> 
> 标签：python-2.7, module, audio-player

我正在用 python 编写一个应用程序，其中包括播放在线 mp3 资源，mp3 文件由[http://xxxxx.mp3 之](http://xxxxx.mp3)类的 url 表示，有没有合适的模块可以处理这个？
我正在使用 Ubuntu 系统和 python 2.7.2。

# linux - pci_iomap：查询

> ID：15540627
> 
> 赞同：1
> 
> 时间：2013-03-21T06:09:27.723
> 
> 标签：linux, linux-kernel, memory-mapping

所以我目前正在使用 ioremap_no_cache() 映射我卡中的 DoorBell 区域，并且只有 4K 大小。但是（无意中）我现在意识到我也可以在这个 4K 区域之后按门铃/写入位置，奇怪的是它似乎有效。我想知道它是如何/为什么工作的，如果可能的话，通过这个深入了解 ioremap_no_cache() 是如何在幕后工作的？代码阅读和手册页只提供了这么多帮助。请注意，默认情况下，第一个 4k 区域之外的额外 4K 区域不存在

# haskell - 缩短/使功能更简洁

> ID：15540632
> 
> 赞同：1
> 
> 时间：2013-03-21T06:10:01.027
> 
> 标签：haskell, functional-programming, where-clause

```
flushPoints :: [Card] -> Integer
flushPoints cs@(c1:hd)  = 
    if flushPointsCalc True (suitCount hd) > 
        flushPointsCalc False (suitCount cs)
    then flushPointsCalc True (suitCount hd)
    else flushPointsCalc False (suitCount cs) 
```

假设我有一个如上所述的功能，我将如何缩短它？

我正在考虑做一个`where hdFlush = flushPointsCalc True (suitCount hd)`，但我不能，因为 hd 在上面声明了。

考虑到它的懒惰程度，我觉得在 Haskell 中会有一种适当的方法，但我不确定在哪里看。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T06:18:52.660

这正是标准`max`函数所做的：它选择更大的值。因此，您可以将代码重写为：

```
flushPoints cs@(c1:hd) = max (flushPointsCalc True  (suitCount hd)) 
                             (flushPointsCalc False (suitCount cs)) 
```

如果您只是想知道如何为 指定本地名称`flshPointsCalc True (suitCound hd)`，您确实*可以*使用`where`子句：

```
flushPoints :: [Card] -> Integer
flushPoints cs@(c1:hd)  = 
    if hdFlush > csFlush then hdFlush else csFlush
  where hdFlush = flushPointsCalc True (suitCount hd)
        csFlush = flushPointsCalc False (suitCount cs) 
```

该`cs@(c1:hd)`模式在函数`where`下方的块的范围内`flushPoints`，因此您可以`hd`在其中访问。

# yaml - YAML 中管道符号的用途是什么？

> ID：15540635
> 
> 赞同：191
> 
> 时间：2013-03-21T06:10:25.857
> 
> 标签：yaml

我是 yaml 新手，我对用于多行的管道符号 (|) 有疑问。YAML 是否有类似下面的语法？

> 测试：***|6+***

在下面的两个 YAML 文件中，第一个有效，第二个无效。我不知道是什么原因造成的。

**第一个文件**

```
Name :
  -
   testing:
     val1
  -
   second:
     val2
  -
   third:
     val3
  -
   then
  - 
    final: |
     a
     aa
     aaa
     aaaa : 'test:' 
```

**第二个文件**

```
Name :
  -
   testing:
     val1
  -
   second:
     val2
  -
   third:
     val3
  -
   then
  - 
    final: |6+
      a
      aa
      aaa
      aaaa : 'test:' 
```

第二个文件是客户的。

我正在使用 XMLBeans，但出现此错误：

> **com.esotericsoftware.yamlbeans.parser.Parser$ParserException：第 17 行，第 12 列：应为“块结束”，但发现：块映射开始”**。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2013-09-09T22:37:58.740

YAML 中行尾的管道符号表示后面的任何缩进文本都应解释为多行标量值。请参阅[YAML 规范](http://www.yaml.org/spec/1.2/spec.html#id2795688)。

具体来说，管道表示（除了缩进）标量值应该以保留换行符的方式逐字解释。相反，该`>`字符表示后面是多行“折叠”标量，这意味着换行符被转换为空格。例如：

```
>>> import yaml
>>> yaml.load("""
... |
...  This is a multi-line
...  literal style scalar.
... """)
'This is a multi-line\nliteral style scalar.\n'
>>> yaml.load("""
... >
...  This is a multi-line
...  folded scalar; new lines are folded into
...  spaces.
... """)
'This is a multi-line folded scalar; new lines are folded into spaces.\n' 
```

该`6+`部分是缩进指示符（明确说明应该使用多少个缩进空格）和“chomping 指示符” `+`，它控制应如何处理标量文字末尾的额外空格。

您得到的错误是一个棘手的错误：这是因为缩进应该与当前的块级元素相关。所以在这种情况下，它应该是`2+`，而不是`6+`因为最后一个块级元素是映射`final:`并且文字从它缩进 2。更新了来自@bramvi 的更正。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2020-05-07T15:03:45.430

当您希望将换行符保留为换行符时，将使用管道。

欲了解更多信息：[https ://yaml-multiline.info/](https://yaml-multiline.info/)

# css - 如何让输入框的背景图片固定

> ID：15540636
> 
> 赞同：0
> 
> 时间：2013-03-21T06:10:32.153
> 
> 标签：css, background-image

如下图所示，输入框的最右侧有一个小图标，当用户在输入框中不断输入时，图标开始移动，有没有办法让它保持在当前状态位置？

```
input.fillHoverIndicator{
   background-image:url('../../images/msg_info_grey.png');
   background-repeat:no-repeat;
   padding-right:16px;
   background-position:right;
} 
```

![在此处输入图像描述](../Images/74ba8d370271bf44e7584d792db560b8.png)

HTML

```
<input name="instance/logical.name"  class="fillHoverIndicator" id="X26" style="width:     100%; height: 19px;" onkeydown="cfKeyDown(event, 'X26');
    " onkeyup="cfKeyUp(event, 'X26');" onclick="handleOnClick(this, event);" onfocus="cbOnFocus(this, event);" onblur="cbOnBlur(this, event);
applyToSameControl(this);
  " onchange="handleOnChange(this, event);" type="text" maxLength="2147483647"     ButtonId="" dvdVar="" datachangeevent="" scripttype="comfill" getValue="function      getComboValue()
{
....
  return this.value
}" 
for="X26" idFill="9" PopupSubformWidth="333" PopupSubformEnabled="1"          PopupSubformInput="logical.name" PopupSubformFormat="popup.ci.info" tooltipHeight="209" tooltipWidth="333" tooltipUrl="popupsubform?hfformat=popup.ci.info&hfinput=logical.name&xScale=4.5&thread=1" value="1111111111111111111111111111111111111111111111"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:14:54.770

**现在定义**为**根据** `width`, `height`, `line-height`, 和`padding`

**像这样**

```
input.fillHoverIndicator{
width:xxx; // according to your design
height:xxx; // according to your design
line-heiht:xxx; // according to your design
padding-right:xxx; // according to your design
background:url ('../../images/msg_info_grey.png')  no-repeat right top; // according to your design
} 
```

# java - 通过通知从一个 twilio 号码接收消息到另一个 twilio 号码

> ID：15540637
> 
> 赞同：1
> 
> 时间：2013-03-21T06:10:38.337
> 
> 标签：java, android, twilio

我在接收来自 twilio number 的消息通知方面做了很多研发。

场景是从一个 twilio 应用程序，一个发送消息到另一个 twilio 号码，然后应用程序中的另一个 twilio 号码，必须接收该特定应用程序的通知。

我曾尝试发送通知，但没有找到任何东西来解决这个问题。

建议我做什么，当有人将消息发送到特定的 twilio 号码时，在应用程序中接收消息作为通知。

```
Log.i("sendNotificationMethod","sendNotificationMethod");
        /* Instantiate a new Twilio Rest Client */
        TwilioRestClient client = new TwilioRestClient(sub_sid, sub_auth_token);

        // Get the account and call factory class
        Account acct = client.getAccount();
        SmsFactory smsFactory = acct.getSmsFactory();

        //build map of server admins
        Map<String,String> admins = new HashMap<String,String>();
        admins.put("12056108304", "Johnny");
        admins.put("12053405623", "Helen");
        admins.put("4158675311", "Virgil");

        String fromNumber = sms_fromm;

        Log.i("fromNumber", fromNumber);

        // Iterate over all our server admins
        for (String toNumber : admins.keySet()) {

            //build map of post parameters 
            Map<String,String> params = new HashMap<String,String>();
            params.put("From", fromNumber);
            params.put("To", toNumber);
            params.put("Body", "Bad news1111 " + admins.get(toNumber) + ", the server is down and it needs your help");

            try {
                // send an sms a call  
                // ( This makes a POST request to the SMS/Messages resource)
                Sms sms = smsFactory.create(params);
                Log.i("sms.getStatus()", sms.getStatus().toString());
                Log.i("Success sending SMS: ","" + sms.getSid());
            }
            catch (TwilioRestException e) {
                e.printStackTrace();
            }
        } 
```

我使用上面的代码发送通知并使用 lib 文件 twilio-java. 我收到没有此类方法错误的错误。意味着它没有找到 TwilioRestClient 方法

```
03-21 13:19:11.223: E/AndroidRuntime(296): FATAL EXCEPTION: main
03-21 13:19:11.223: E/AndroidRuntime(296): java.lang.NoSuchMethodError: org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.twilio.sdk.TwilioRestClient.<init>(TwilioRestClient.java:137)
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.twilio.sdk.TwilioRestClient.<init>(TwilioRestClient.java:108)
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.zoemultiline.sms.SMS_In_Out.initializeView(SMS_In_Out.java:200)
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.zoemultiline.sms.SMS_In_Out.onCreate(SMS_In_Out.java:185)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.widget.TabHost.setCurrentTab(TabHost.java:323)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.view.View.performClick(View.java:2408)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.view.View$PerformClick.run(View.java:8816)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.os.Handler.handleCallback(Handler.java:587)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.os.Looper.loop(Looper.java:123)
03-21 13:19:11.223: E/AndroidRuntime(296):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-21 13:19:11.223: E/AndroidRuntime(296):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 13:19:11.223: E/AndroidRuntime(296):  at java.lang.reflect.Method.invoke(Method.java:521)
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-21 13:19:11.223: E/AndroidRuntime(296):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-21 13:19:11.223: E/AndroidRuntime(296):  at dalvik.system.NativeStart.main(Native Method) 
```

# python-2.7 - 将 virtualenv 用于科学 python 和机器学习有什么缺点吗？

> ID：15540640
> 
> 赞同：5
> 
> 时间：2013-03-21T06:10:51.150
> 
> 标签：python-2.7, virtualenv, scientific-computing

我收到了一些使用 virtualenv 清理我的 python 模块的建议。我很担心，因为它看起来好得令人难以置信。在使用多核设置、starcluster、numpy、scikit-learn、pandas 或 iPython 笔记本时，是否有人发现与性能或内存问题相关的不利因素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:23:52.917

当涉及到依赖关系时，Virtualenv 是保持某种秩序的最好和最简单的方法。在处理模块的安装和跟踪方面，Python 确实落后于 Ruby（捆绑程序！）。您拥有的最好的工具是 virtualenv。

因此，我建议您为每个应用程序创建一个 virtualenv 目录，将一个文件放在一个文件中，其中列出了构建环境所需的所有“pip install”命令，并确保您有一个干净的、可重复的过程来创建这个环境。

我认为应用程序的性质几乎没有什么区别。不应该有任何性能问题，因为 virtualenv 所做的只是从特定路径加载库，而不是从默认保存它们的目录加载它们。

无论如何（这可能完全无关紧要），但是如果性能是一个问题，那么也许您应该研究一种编译语言。不过，最有可能的是，任何性能瓶颈都可以通过更好的编码得到改善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:23:16.260

使用 virtualenv 没有性能开销。它所做的只是使用文件系统中的不同位置。

唯一的“开销”是设置它所需的时间。你需要在你的 virtualenv 中安装每个包（numpy、pandas 等）

# android - Android模拟器错误：缺少内核文件

> ID：15540642
> 
> 赞同：12
> 
> 时间：2013-03-21T06:11:07.770
> 
> 标签：android, android-emulator

```
emulator: ERROR: This AVD's configuration is missing a kernel file!! 
```

*   我已经更新了 sdk 和 adt 的版本。
*   我还安装了“ *ARM EABI v7a System Image* ”。
*   我只是构建了 Android ActionBarSherlock 和 SlidingMenu 库。
*   我也更新了我的日食。

知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T06:44:47.597

更新您的 SDK。请再次检查**ARM EZBI v&a 系统映像**是否安装正确。如果没有安装。您将在 Android SDK 管理器中看到它。还要检查您的 SDK 路径和 java 路径是否设置正确。很可能是找不到文件的情况。检查此[链接](https://stackoverflow.com/a/10775330/2021499) 它可能会有所帮助。

# linux - Linux Cronjob 调度问题

> ID：15540653
> 
> 赞同：1
> 
> 时间：2013-03-21T06:12:16.907
> 
> 标签：linux, oracle, crontab, suse, rman

我有一个计划如下的 cron 作业。它会在 Oracle 中调用 RMAN，然后清除 oracle 数据库中 1 天前的所有 achivelog。但问题是它没有通过 cron 作业执行。但是如果我从提示符执行相同的脚本，它会很好地通过 RMAN 删除日志。请帮我安排这个脚本......

```
05 07 * * * /x01/rman_backup/mahesh/logde.sh 
```

脚本内容如下

```
#!/bin/bash
 /x01/oracle/app/oracle/product/11.2.0/db_1/bin/rman cmdfile=/x01/rman_backup/mahesh /logdelete.rcv 
```

logdelete.rcv 的内容如下

```
connect target /
 run
  {
  delete archivelog all completed before 'trunc(sysdate)';
  crosscheck archivelog all;

   }
 exit; 
```

请有人帮我安排这个。我在 SUSE Linux 版本 11 中使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:11:58.060

您必须进行一些初始化，这些初始化是为您的控制台完成的，但不是在 cron 执行中完成的。在您的 cron 行中手动初始化变量或手动源配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:40:05.653

通常，使用 cronjob 的输出重定向来收集文件中的错误，例如

`06 12 * * * /x01/rman_backup/mahesh/logde.sh > /x01/rman_backup/mahesh/output.txt 2>&1`

具体来说，您的问题可能是无法从 cron 中找到 logdelete.rcv，因为该作业将在 $HOME 中执行，因此该文件需要在那里。如果不是，请指定它的完整路径。

# android - 即使我已显着移动，也会在后台更新相同的位置

> ID：15540657
> 
> 赞同：1
> 
> 时间：2013-03-21T06:12:57.057
> 
> 标签：android, geolocation, android-service, android-location

我有一项服务，它在 onCreateMethod 中请求网络位置更新。我已经使用 LocationListener 来接收新的位置、提供者的状态和提供者中的 statusChange。

当设备处于低功耗状态（手机屏幕关闭）时，我得到了与手机屏幕处于活动状态（屏幕打开）时网络提供商相同的位置修复。

```
public class LocationRegisterService extends Service implements LocationListener{

private String TAG = LocationRegisterService.class.getName();

private LocationManager lm;

public void onCreate()
{
    Log.d(TAG,"Entering LocationRegisterService::onCreate()");
    //Register for network location updates
    lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    Log.i(TAG,"Regsitering for Network Location Updates");
    Log.i(TAG,"minTime = 0,minDistance = 0");
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
            Log.d(TAG,"Exiting LocationRegisterSerivce::onCreate()");
}

public int onStartCommand(Intent intent, int flags, int startId)
{
    Log.d(TAG,"Entering LocationRegisterService::onStartCommand()");
    Log.d(TAG,"Exiting LocationRegisterService::onStartCommand()");
    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onDestroy() 
{
    super.onDestroy();
    Log.d(TAG,"Entering LocationRegisterService::onDestroy()");
    lm.removeUpdates(this);
    Log.d(TAG,"Exiting LocationRegisterService::onDestroy()");
}

@Override
public void onLocationChanged(Location location) {
    Helpers.logScreenStatus(this);
    double latitude = location.getLatitude();
    double longitude = location.getLongitude();
    double accuracy = location.getAccuracy();
    String location_timestamp = formatTime(location.getTime());
    String log = latitude + "," + longitude +","+accuracy+","+location_timestamp;
    Log.i(TAG,log);
}

@Override
public void onProviderDisabled(String provider) {
    String log = "Network Provider Disabled";
}

@Override
public void onProviderEnabled(String provider) {
    String log = "Network Provider Enabled";
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    String log = "";
    switch(status){
        case LocationProvider.AVAILABLE:
            log = "Network Available";
            break;
        case LocationProvider.OUT_OF_SERVICE:
            log = "Network Out Of Service";
            break;
        case LocationProvider.TEMPORARILY_UNAVAILABLE:
            log = "Network Temporarily Unavailable";
            break;
    }
    setServiceWakeUpTime();
    stopSelf();
}

private void setServiceWakeUpTime()
{
    AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(this,AlarmReceiver.class);
    PendingIntent operation = PendingIntent.getBroadcast(this,0,intent,PendingIntent.FLAG_UPDATE_CURRENT);
    long wakeAt = System.currentTimeMillis() + (60 * 1000);
    am.set(AlarmManager.RTC_WAKEUP, wakeAt , operation);
    FileLogger.log(this, "Service will wake up after one minute");
}

private String formatTime(long epoch)
{
    Date date = new Date(epoch);
    String pattern = "y/M/d H:m:s.S";
    SimpleDateFormat dateFormat = new SimpleDateFormat(pattern);
    return dateFormat.format(date);
}

} 
```

我从一项活动开始这项服务，并在关闭设备屏幕的情况下行驶了近 50 公里。我附上旅行的日志。

```
2013/3/21 0:29:58.743  Entering Broadcast Receiver
2013/3/21 0:29:58.756  Screen is off
2013/3/21 0:29:58.778  Exiting Broadcast Receiver
2013/3/21 0:29:58.783  Registering for network location updates
2013/3/21 0:30:53.571  Screen is off
2013/3/21 0:30:53.587  13.07383585,80.22151335000001,50.0,2013/3/21 0:30:8.551
2013/3/21 0:30:53.593  Screen is off
2013/3/21 0:30:53.595  Network Temporarily Unavailable
2013/3/21 0:30:53.613  Service will wake up after one minute
2013/3/21 0:30:53.619  UnRegistering listener for location updates
2013/3/21 0:31:53.676  Entering Broadcast Receiver
2013/3/21 0:31:53.689  Screen is off
2013/3/21 0:31:53.710  Exiting Broadcast Receiver
2013/3/21 0:31:58.516  Registering for network location updates
2013/3/21 0:32:17.583  Screen is off
2013/3/21 0:32:17.594  13.07383585,80.22151335000001,50.0,2013/3/21 0:32:3.544 
```

相同的日志重复了将近一个小时。此代码在 HTC Explorer 中运行 Android 2.3.3。有人对这种行为有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:52:25.967

获取相同位置更新的问题仅发生在 HTC 手机中。我不知道这是否发生在所有 HTC Android 手机上。但它肯定会出现在我的 HTC Explorer 上。

在后台获取相同位置更新的原因是，一旦手机处于非活动状态超过 15 分钟，HTC 将禁用添加活动互联网连接（WIFI 或移动数据连接）。为了交叉检查这一点，我编写了以下代码。

*   安排一分钟后调用 AlarmReceiver 的活动。
*   警报接收器检查是否有任何可以建立互联网连接的连接。
*   警报接收器会在一分钟后注册警报以调用自己

我编写了代码以运行整个晚上。

```
public class AlarmReceiver extends BroadcastReceiver {

private static String TAG = AlarmReceiver.class.getName();

@Override
public void onReceive(Context context, Intent intent) 
{
    Log.i(TAG, "Entering Broadcast Receiver onReceive");
    FileLogger.log(context, "Entering Broadcast Receiver");
    logActiveNetworkInfo(context);
    setAlarm(context);
    FileLogger.log(context, "Exiting Broadcast Receiver");
    Log.i(TAG, "Exiting Broadcast Receiver onReceive");
}

private void logActiveNetworkInfo(Context context)
{
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    if(networkInfo == null)
    {
        FileLogger.log(context, "No network connectivity");
        return;
    }
    String networkTypeName = networkInfo.getTypeName();
    boolean isConnected = networkInfo.isConnected();
    String log = "";
    if(isConnected == true)
    {
        log = "Internet available through " + networkTypeName;
    }
    else
        log = "Internet not available through "+ networkTypeName;
    FileLogger.log(context, log);
    Log.i(TAG,log);
    return;
}

private void setAlarm(Context context)
{
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    long wakeUpAt = System.currentTimeMillis() + (60 * 1000);
    Intent intent = new Intent(context, AlarmReceiver.class);
    PendingIntent operation = PendingIntent.getBroadcast(context,
                                                         0,
                                                         intent,
                                                         PendingIntent.FLAG_UPDATE_CURRENT);
    alarmManager.set(AlarmManager.RTC_WAKEUP, wakeUpAt , operation);
    Log.i(TAG,"Alarm set to ring after "+wakeUpAt + " milliseconds");
} 
```

}

**所以应用开发者要小心，如果你想在 HTC 手机的后台进行 HTTP 调用，如果手机处于非活动状态超过 15 分钟就会失败。**

[HTC Deep Sleep](http://www.androidpolice.com/tags/fix-smartsync/ "HTC 深度睡眠")已报告此问题

# google-drive-api - 了解 Google Drive 和 Google Play Services 的授权流程

> ID：15540659
> 
> 赞同：1
> 
> 时间：2013-03-21T06:13:08.717
> 
> 标签：google-drive-api, google-play-services

我已经完成了 Google Drive 的快速入门，并且还使用了 Google Play 服务。Google Drive 的文档概述了授权流程的工作流程。文档还指出，开发人员不应使用 Drive 启动的授权，尽管 Quickstart 示例应用程序似乎正是这样做的。我留下的印象是 Google 更喜欢开发人员处理授权的所有细节。

然而，在尝试了使用 Google Play 服务（但不是用于 Google Drive）的示例代码之后，我留下的印象是 Google 希望开发人员使用 Google Play 服务来处理所有授权。Google Play 服务似乎大大简化了授权过程。尽管文档没有这样说，但我在网上的其他地方发现 GoogleAuthUtil.getToken 管理如何检索访问和刷新令牌，尤其是在它们过期之后。

基本上，我正在努力理解的问题是 API 的 Google Drive 文档是否已过时，而 Google 希望我们依赖 Google Play 服务。Google Play 服务已经消除了 Google Drive 授权过程的复杂性。同时，Google Drive API 的文档已经发布了半年多，所以这让我质疑为什么 Google 没有更新这些文档以反映 Google Play Services 是如何与它一起使用的。

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:06:58.207

Google Drive 文档已过时，Google 应该真正更新它们。检索令牌和验证用户应使用 Google Play 服务完成。您唯一应该使用 Google Drive API 的就是访问 Google Drive 服务。Google Play 服务处理用户身份验证、检索访问和刷新令牌以及处理所有可能出现的错误的所有细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:23:48.757

推荐的 Android 授权方法是使用 Google Play 服务。Google Drive SDK 文档中的 Android 快速入门指南涵盖了以下内容：

[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

# hibernate - Hibernate 使用连接表属性访问异常的一对多映射

> ID：15540666
> 
> 赞同：0
> 
> 时间：2013-03-21T06:13:41.537
> 
> 标签：hibernate, join, one-to-many

我有一个带有连接表的一对多映射。

```
class service{private Long service_id}
class codes{private Long code_id} 
```

服务和代码类被设置为休眠实体，并且它们的 id 具有修改器。

连接表

```
table servicecodes
(serviceid,
codeid); 
```

我的服务类映射：

```
<class name="path.to.Service" table="SERVICE"
lazy="false">

 <set name="sc" table="ServiceCodes">
    <key column="serviceid"/>
    <many-to-many column="codeid" unique="true"
        class="path.to.Codes"/>
 </set>
</class> 
```

在我的应用层中，我有：

```
serviceobj.set(Set<Codes>);
...
session.save(serviceobj); 
```

在 session.save 行，抛出以下错误：

```
org.hibernate.PropertyAccessException: could not get a field value by reflection    getter of path.to.Codes.code_id
....
Caused by: java.lang.IllegalArgumentException: Can not set java.lang.Long field path.to.Codes.code_id to java.lang.String 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:27:24.557

我自己想通了。'codes' 类是使用 JPA 注释设置的，并且注释是在属性声明上设置的。在实体属性的 getter 方法上设置注释解决了这个问题。

# html - 哪种是编写 CSS 代码的最佳方式

> ID：15540669
> 
> 赞同：4
> 
> 时间：2013-03-21T06:13:47.737
> 
> 标签：html, css

我有很多具有不同大小、填充和边距值的块。所以我想创建支持CSS类并组合如下；

**CSS**

```
.m-t-5 { margin-top: 5px; }
.m-t-10 { margin-top: 10px; }
.m-t-15 { margin-top: 15px; }

p-10 { padding: 10px; }
p-15 { padding: 15px; }

.f-left { float: left; }
.f-right { float: left; } 
```

**HTML**

```
<div class="m-t-5 p-20 f-left lined"></div>
<div class="p-10 m-0 f-right"></div> 
```

通过使用这个，我所有的类名都变得很大（我的意思是长度）。那么这是一个好习惯吗？请建议我是继续这种方式还是创建多个具有自己属性的 CSS 类。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:18:15.600

这里有一些建议建议的方法：

*   [块、元素、修改器](http://bem.info/)
*   [CSS 的可扩展和模块化架构](http://smacss.com/book/)
*   [面向对象的 CSS](http://oocss.org/)

还有Google 自己的开发人员所遵循的[HTML/CSS 样式指南。](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:18:26.403

现在习惯了这种方式

像这样

```
.marginT10{margin-top:10px;}
.marginT20{margin-top:20px;}
.marginT30{margin-top:30px;}
.marginT40{margin-top:40px;}
.pull-left{float:left;}
.pull-right{float:right;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T06:22:31.020

两件事情：

这很好，很常见。它实际上有助于保持[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则。

第二：编码css的唯一“最佳实践”是避免内联css，但即使这样也有例外。因此，如果它对您有用，请继续使用它。（但你所做的再次被认为是好的做法。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T06:56:04.180

我同意@ryan，但您还需要根据您的布局巧妙地移动，以尽可能减少代码。并且还要避免使用 (-)&(_) 等...并制定非常简单和干净的命名约定。请看下面的例子：

CSS

```
.mt5 {margin-top: 5px;}
.pd5 {padding: 5px;}
/* Margin Top 5 and Padding 5 */
.mt5pd5 {margin-top: 5px; padding: 5px;}

.fl {float: left;}
.fr {float: right;} 
```

HTML 标记

```
<div class="fl mt5 pd5">Welcome</div>
<div class="fl mt5pd5">Hello</div> 
```

# jquery - BxSlider Carousel 中垂直居中对齐 div

> ID：15540673
> 
> 赞同：10
> 
> 时间：2013-03-21T06:14:04.487
> 
> 标签：jquery, css, carousel, bxslider

我正在使用[bxslider](http://bxslider.com)脚本来构建轮播。我可以做得很好，我只是在尝试对齐以垂直居中幻灯片时遇到问题，因为它们的高度不同。我尝试了许多对齐技术，但是当 bxslider 运行时似乎都失败了。这是一个[jsfiddle 示例](http://jsfiddle.net/cmoreira/sSqAx/)。

目前在示例中，我设置了一个非常简单的 CSS 规则，该规则在未设置轮播时有效：

```
.bxslider-inner {
   vertical-align: middle;
    display: inline-block;
} 
```

但是，正如您在 jsfiddle 中看到的那样，当轮播处于活动状态时，垂直对齐不再起作用。

我开始怀疑我可能必须更改脚本的核心代码才能实现这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-24T04:10:51.253

像这样更新你的 CSS。关键不`float`在于元素，因为你总是在制造它`inline-block`

```
.bxslider-inner {
    vertical-align: middle;
    display: inline-block;
    float: none !important;
} 
```

还有一件事...为了使其与您的示例相匹配，请在完成后更改`slideMargin:20`为`slideMargin:10``float: none !important;`

**小提琴：http:** [//jsfiddle.net/sSqAx/9/](http://jsfiddle.net/sSqAx/9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T03:19:43.767

**CSS 表格**

通常，只要不需要对 IE7 或更早版本的支持，我建议添加`display: table-cell;`（按照上面链接的[问题](https://stackoverflow.com/a/3932177/1306809)@darthmaim）：

```
.bxslider-inner {
    display: table-cell;
    vertical-align: middle;
}
...
<div class="bxslider-inner"><div>Content goes here</div></div> 
```

但是，`display: table-cell;`不适用于浮动元素（在 IE8/9/10、Firefox、Safari、Chrome、Opera 中测试），如此[JSFiddle Demo](http://jsfiddle.net/Matt_Coughlin/kLnkG/)中所示。在@darthmaim 链接到的[问题](https://stackoverflow.com/a/3932177/1306809)中，元素的父元素是浮动的；效果很好。这里子元素是浮动的；那是行不通的。

**解决方法**

如果编辑 HTML 源代码是一个选项，您可以在 each 中添加一个 div 包装器`.bxslider-inner`，以便可以将使用`display: table-cell;`移至非浮动元素：[更新 demo](http://jsfiddle.net/Matt_Coughlin/sxpVw/1/)。

```
.bxslider-inner > div {
    display: table-cell;
    vertical-align: middle;
    height: 90px;
}
...
<div class="bxslider-inner"><div><div>Content goes here</div></div></div> 
```

这假设轮播容器的固定高度为`90px`. 支持可变高度容器（根据最高轮播元素的高度而变化）需要额外的工作。

**JavaScript**

如果无法编辑 HTML 源代码，则有两种使用 JavaScript 或 jQuery 的解决方案：

1.  动态注入上述类型的 div 包装器，而不是将它们添加到静态 HTML：[更新的演示](http://jsfiddle.net/Matt_Coughlin/XZ2uv/2/)
2.  根据计算的每个元素的高度，为每个元素动态添加适当数量的顶部间距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T12:43:29.100

我们可以通过在 css 中添加“vertical-align:middle”并为外部 div 提供固定高度来将 div 垂直对齐到中心。**或者**我们可以通过**margin-top**设置或者也可以在 css 中使用**top属性**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:13:55.783

设置值 slideMargin:0 和 slideWidth: 100

有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:34:02.803

您可以通过添加来做到这一点`top:30px`

这里`vertical-align`没有用，因为`bxslider-inner div`它添加了额外的`style`，所以它不适用于`vertical-align`这里。因此，在这种情况下，您可以`top`使用`element`.

**小提琴** [http://jsfiddle.net/sSqAx/3/](http://jsfiddle.net/sSqAx/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T13:37:34.163

这应该可以解决您的问题：

[JSfiddle](http://jsfiddle.net/sSqAx/88/)

还有一个高度不同的：[JSfiddle](http://jsfiddle.net/sSqAx/91/)

**HTML**

```
<div class="bxslider">
    <div class="bxslider-inner"><div style="width:80px; height:80px; background:#CCC; padding:5px;"></div></div>
    <div class="bxslider-inner"><div style="width:80px; height:80px; background:#F5F5F5; padding:5px;"></div></div>
    <div class="bxslider-inner"><div style="width:80px; height:10px; background:#6699cc; padding:5px;"></div></div>
    <div class="bxslider-inner"><div style="width:80px; height:80px; background:#F5F5F5; padding:5px;"></div></div>
</div> 
```

**CSS**

```
body {
    background: orange;
    margin-top: 50px;
}

.bxslider-inner {
   vertical-align: middle;
    display: inline-block;
    height: 80px;
} 
```

**JavaScript**

```
'use strict';

jQuery(document).ready(function(){
    jQuery('.bxslider').bxSlider({
        mode: 'horizontal',
        speed: 500,
        slideMargin:20,
        infiniteLoop: true,
        pager: false,
        controls: true,
        slideWidth: 80,
        minSlides: 1,
        maxSlides: 5,
        moveSlides: 1
        }
    });

    // Initial
    $('.bxslider-inner').each(function(){
        var height_parent = $(this).css('height').replace('px', '') * 1;
        var height_child = $('div', $(this)).css('height').replace('px', '') * 1;
        var padding_top_child = $('div', $(this)).css('padding-top').replace('px', '') * 1;
        var padding_bottom_child = $('div', $(this)).css('padding-bottom').replace('px', '') * 1;
        var top_margin = (height_parent - (height_child + padding_top_child + padding_bottom_child)) / 2;

        $(this).html('<div style="height: ' + top_margin + 'px; width: 100%;"></div>' + $(this).html());
    });
}); 
```

请记住，计算出的中间值非常依赖于其他高度变量，例如填充、边距和边框。如果您添加这样的样式，请记住您需要将这些样式添加到计算中。另一种选择是使用`box-sizing: border-box;`，因此所有这些都折叠到 div 的内部。

`bxslider-inner`必须有一个高度，或者您需要以某种方式获取计算出的 DOM 高度以避免它。如果你真的想要，请留言，我会调查的。

祝你好运！

**更新**

*   JSfiddle 更新了，现在不应该陷入循环。
*   用太高的高度测试，代码似乎没有中断，但可能溢出到隐藏
*   查看[http://bxslider.com/options](http://bxslider.com/options) (> Callbacks > onSlideAfter)。如果需要，您也可以在每个周期后进行修改。如果肤色需要，您可以在此处再次修改代码

# java - 使 StringTemplate 限制字符串长度的最佳方法？

> ID：15540674
> 
> 赞同：1
> 
> 时间：2013-03-21T06:14:05.247
> 
> 标签：java, jsp, stringtemplate

使用代码示例最容易解释这一点。在某些场景中，我们的列表项有很多文本，但是显示超过前几个单词并没有用，这就是我们在 JSP 中的处理方式：

```
<% for(Item item : items) { %>
<li><%=StringHelper.shorten(item.getValue(),30))%></a></li>
<% } %> 
```

过滤器有一些逻辑可以避免切割单词，并包括一个“...”来表示截断，等等。IE：

```
<li>Some text</li>
<li>Some other text that is longer...</li> 
```

有没有一种巧妙的方法可以使用格式化程序来做到这一点。我知道我可能可以做这样的事情，但它似乎有点 hacky，因为我们在不同的位置使用不同的数字：

```
$items:{i|<li>$i.value;format="max30"$</li>}$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:22:20.677

最简单的方法是自定义标签，例如

```
public class ShortenTag extends TagSupport{

  private static final int MAX_LENGTH = 30; 

  public int doStartTag(){

    // shorten string here
  }

} 
```

# ruby - Ruby 中的正则表达式来捕获 Unicode 标点符号？

> ID：15540676
> 
> 赞同：4
> 
> 时间：2013-03-21T06:14:18.820
> 
> 标签：ruby, regex

Ruby 中是否有一个正则表达式可以识别 Unicode 标点符号（例如，“,-）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T06:31:15.627

你可以使用这个：

```
/[[:punct:]]/ 
```

有关更多信息，请查看[Regexp 类](http://www.ruby-doc.org/core-1.9.3/Regexp.html)。您也可以在此[Rubular 永久链接上对其进行测试](http://rubular.com/r/DHt8RHjWYH)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:34:13.310

```
\p{P} 
```

- 不仅仅是在 Ruby 中。见[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

# android - 两个 Edittext 验证

> ID：15540677
> 
> 赞同：-3
> 
> 时间：2013-03-21T06:14:28.307
> 
> 标签：android

我在单个屏幕上有两个编辑文本，一个最大长度为 11，另一个为 12。

现在我想对这两个编辑文本进行以下验证。

1.只有1个edittext的值应该传递到下一个屏幕。这是强制性的..只有一个的值必须传递到下一个屏幕。2.如果用户开始输入任何编辑文本，那么他应该被迫在各自的编辑文本中输入最少 11 或 12 位数字。

此验证将在屏幕上单击按钮时完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:25:55.543

`EditText onChangeListener`每次用户输入任何文本时，您都应该使用重新计算字符数。每次`onChangeListener`为您的任何一个 EditText 小部件触发时，计算字符数并根据字符数启用或禁用移动到下一个屏幕的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T11:23:33.683

检查以下内容：xml：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="43dp"
    android:maxLength="11"
    android:ems="10" >

</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="44dp"
    android:maxLength="12"
    android:ems="10" />

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="130dp"
    android:text="Button" />

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/editText1"
android:layout_below="@+id/editText1"
android:text=""
android:visibility="invisible"
android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
android:id="@+id/textView2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/editText2"
android:layout_below="@+id/editText2"
android:text=""
android:visibility="invisible"
android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
android:id="@+id/editText3"
android:layout_width="0dp"
android:layout_height="0dp"
android:layout_alignLeft="@+id/editText1"
android:layout_alignParentTop="true"
android:ems="10" /> 
```

和类：

```
public class MainActivity extends Activity {
EditText et1,et2,et3;
Button btn;
TextView tv1,tv2;

@Override
protected void onStart() {
    et3.requestFocus();
    super.onStart();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    et1=(EditText)findViewById(R.id.editText1);
    et2=(EditText)findViewById(R.id.editText2);
    et3=(EditText)findViewById(R.id.editText3);
    btn=(Button)findViewById(R.id.button);
    tv1=(TextView)findViewById(R.id.textView1);
    tv2=(TextView)findViewById(R.id.textView2);
    addListenerOnTextChangeEt1Text();
    addListenerOnTextChangeEt2Text();
    et1.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean hasFocus) {            
            if(!hasFocus){
                tv1.setVisibility(View.INVISIBLE);
                tv1.setVisibility(View.GONE);
            }
            else{
                tv1.setVisibility(View.VISIBLE);
            }
        }
    });
    et2.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View arg0, boolean hasFocus) {            
            if(!hasFocus){
                tv2.setVisibility(View.INVISIBLE);
                tv2.setVisibility(View.GONE);
            }
            else{
                tv2.setVisibility(View.VISIBLE);
            }
        }
    });
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
                    if(et1.getText().toString().length()<11 || et2.getText().toString().length()<12 ){
                        Toast.makeText(getBaseContext(), "check both edittext data", Toast.LENGTH_SHORT).show();
                    }
                    else if(et1.getText().toString().length()==11 && et2.getText().toString().length()==12){
                        Toast.makeText(getBaseContext(), "Show next Page", Toast.LENGTH_SHORT).show();
                    }
                    else{
                        Log.v("Error","");
                    }
        }
    });
}
private void addListenerOnTextChangeEt1Text(){
    et1.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            int et1StringLength=et1.getText().toString().length();          
            Log.v("et1StringLength","--->"+et1StringLength);
            int num=11-(et1StringLength);
            if(et1StringLength<11){
                tv1.setText("Enter"+num+"Characters more");                 
            }
            else if(et1StringLength==11){
                tv1.setText("Correct");                 
            }
            else{
                Log.v("Error","");
            }

        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
    });

}   
private void addListenerOnTextChangeEt2Text(){
    et2.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            int et2StringLength=et2.getText().toString().length();          
            Log.v("et2StringLength","--->"+et2StringLength);
            int num=12-(et2StringLength);
            if(et2StringLength<12){
                tv2.setText("Enter"+num+"Characters more");                 
            }
            else if(et2StringLength==12){
                tv2.setText("Correct");                 
            }
            else{
                Log.v("Error","");
            }

        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub

        }
    });

} 
```

并按照此链接将值传递给下一个意图：[这里](https://stackoverflow.com/questions/16811030/how-to-pass-edittext-value-to-another-activitys-edittext)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:23:28.430

您可以使用

```
android:maxLength="11" 
```

和

```
android:maxLength="12" 
```

在相应的edittext字段的xml文件中。

并将值传递给下一个活动。您可以使用意图。

在第一个活动中：

```
String s = myEdtxt.getText().toString();
Intent i = new Intent(this, NextAct.class);
i.putStringArrayListExtra("My Value", s);
startActivity(i); 
```

您可以在第二个活动中检索它：

```
String s= getIntent().getStringExtra("My Value"); 
```

希望它清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:32:38.370

您可以使用`setError`EditBox 的属性 进行验证**mUserNameView**是我的编辑文本，而 **mUserName**是一个字符串，我在其中使用 editText 值来执行验证

```
 mUserNameView.setError(null);

    // Store values at the time of the login attempt.
    mUserName = mUserNameView.getText().toString();

    // Check for a valid email address.
    if (TextUtils.isEmpty(mUserName)) {
        mUserNameView.setError(getString(R.string.error_field_required));

    } 
if (mUserName.length() > 13)
{

mUserNameView.setError(getString(R.string.error_field_notValid));
}

R.string.error_field_required
R.string.error_field_notValid 
```

在资源的 values 文件夹中的字符串中定义

根据您的需要调整登录。我已经给出了代码示例如何在代码中进行验证。并且错误消息（无论您在字符串文件中指定什么）在特定的编辑框上以非常漂亮的方式生成，

# java - 在选项卡外调用的活动

> ID：15540684
> 
> 赞同：1
> 
> 时间：2013-03-21T06:15:04.237
> 
> 标签：java, android, android-tabhost

我正在开发一个有 5 个选项卡的应用程序，我的最后一个选项卡显示菜单列表。当我单击菜单选项卡时出现问题，菜单活动很好地显示在我的选项卡下方，但是当我单击任何菜单（它将调用 LoginActivity）时，新活动将全屏显示，而不是在选项卡下。我该如何处理？下面是我的代码。

**选项卡活动**

```
package com.smartag.smarttreasure;
public class NfcSurveyActivity extends TabActivity {

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters,
                mTechLists);

        int profileCount = db.getContactsCount();
        if (profileCount <= 0) {
            Intent intent = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(intent);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        int profileCount = db.getContactsCount();
        if (profileCount <= 0) {
            Intent intent1 = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(intent1);
        }

        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            tabToDisplay = extras.getString("tab");
            if (tabToDisplay.equals("CAMERA")) {
                barcodeData = extras.getString("barcodeData");
            }
            extras.clear();
        }

        TabHost tabHost = getTabHost();

        // Home
        TabSpec tbspecHome = tabHost.newTabSpec("Home");
        tbspecHome.setIndicator("",
                getResources().getDrawable(R.drawable.tab_account_style));

        Intent iHome = new Intent(this, HomeActivity.class);
        tbspecHome.setContent(iHome);
        tabHost.addTab(tbspecHome);

        // History
        tabHost.addTab(tabHost
                .newTabSpec("Fun")
                .setIndicator("",
                        getResources().getDrawable(R.drawable.tab_fun_style))
                .setContent(
                        new Intent(this, NfcSurveyActivity.class)
                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

        if (tabToDisplay != null && tabToDisplay.equals("REDEEM")) {
            if (barcodeData != null && barcodeData.length() > 0) {

                tabHost.addTab(tabHost
                        .newTabSpec("Camera")
                        .setIndicator(
                                "",
                                getResources().getDrawable(
                                        R.drawable.tab_redeem_style))
                        .setContent(
                                new Intent(this, NfcSurveyActivity.class)
                                        .addFlags(
                                                Intent.FLAG_ACTIVITY_CLEAR_TOP)
                                        .putExtra("autoLoadBarcodeData",
                                                barcodeData)));

            }

            else {
                tabHost.addTab(tabHost
                        .newTabSpec("Camera")
                        .setIndicator(
                                "",
                                getResources().getDrawable(
                                        R.drawable.tab_redeem_style))
                        .setContent(
                                new Intent(this, NfcSurveyActivity.class)
                                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));

            }

        } else {
            tabHost.addTab(tabHost
                    .newTabSpec("Camera")
                    .setIndicator(
                            "",
                            getResources().getDrawable(
                                    R.drawable.tab_redeem_style))
                    .setContent(
                            new Intent(this, NfcSurveyActivity.class)
                                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));
        }

        // tabHost.setCurrentTab(2);

        tabHost.getTabWidget().getChildAt(2).getLayoutParams().height = tabHost
                .getTabWidget().getChildAt(2).getLayoutParams().height + 19;

        // Search
        TabSpec tbspecSearch = tabHost.newTabSpec("Finder");
        tbspecSearch.setIndicator("",
                getResources().getDrawable(R.drawable.tab_finder_style));

        Intent iSearch = new Intent(this, NfcSurveyActivity.class);
        tbspecSearch.setContent(iSearch);
        tabHost.addTab(tbspecSearch);

        // Profile
        TabSpec tbspecProfile = tabHost.newTabSpec("Quit");
        tbspecProfile.setIndicator("",
                getResources().getDrawable(R.drawable.tab_quit_style));

        Intent iProfile = new Intent(this, NfcSurveyActivity.class);
        tbspecProfile.setContent(iProfile);

        tabHost.addTab(tbspecProfile);

        for (int i = 0; i <= 4; i++) {
            tabHost.getTabWidget()
                    .getChildTabViewAt(i)
                    .setBackgroundColor(
                            getResources()
                                    .getColor(android.R.color.transparent));

            if (i == 2) {
                tabHost.getTabWidget()
                        .getChildTabViewAt(i)
                        .setPadding(
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingLeft(),
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingTop(),
                                tabHost.getTabWidget().getChildTabViewAt(i)
                                        .getPaddingRight(), 20);
            }

        }

        if (tabToDisplay != null && tabToDisplay.length() > 0) {
            if (tabToDisplay.equals("CAMERA")) {
                tabHost.setCurrentTab(2);

            } else if (tabToDisplay.equals("HISTORY")) {
                tabHost.setCurrentTab(1);

            }

        }

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            public void onTabChanged(String tabId) {
                NfcSurveyConfiguration.SelectedTab = tabId;
            }
        });
    }

} 
```

**菜单活动**

```
public class HomeActivity extends ListActivity {

    static final String[] Account = new String[] { "Point History", "Scan History",
            "Reward/Coupon History", "Share/Transfer History", "Personalise" };
    String tabToDisplay = "";
    String barcodeData = "";
    SharedPreferences nfcSurveyConfiguration;
    String profileId;

    String pleaseWait = "";
    protected boolean _taken;
    protected File _directory;
    protected String _filename;
    protected String _fileExtension;

    String profileName = "";
    String profileEmail = "";
    String profileStatus = "";
    String profileLanguage = "";
    String profileType = "";
    DatabaseHandler db = new DatabaseHandler(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,
                R.layout.listview_item_row, Account));

        ListView listView = getListView();

        listView.setTextFilterEnabled(true);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text
                //Toast.makeText(getApplicationContext(),
                    //  ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
                Intent intent1 = new Intent(getApplicationContext(),
                        LoginActivity.class);
                startActivity(intent1); // This activity appears not in the tab             
            }
        });

    }

    @Override
    public void onPause() {
        super.onPause();
        NfcSurveyConfiguration.CurrentActiveTab = 0;
    }

} 
```

任何建议或建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:59.050

setOnItemClickListener 中的这段代码帮助我解决了这个问题。

```
View view1 = getLocalActivityManager().startActivity(
                            "ReferenceName",
                            new Intent(getApplicationContext(),
                                    YourActivityClass.class)
                                    .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                            .getDecorView();
                    setContentView(view1); 
```

# memory - 是否需要将操作系统分配给设备的内存映射到虚拟内存空间？

> ID：15540685
> 
> 赞同：0
> 
> 时间：2013-03-21T06:15:05.360
> 
> 标签：memory, virtual, device, drivers

例如，在编写驱动程序时，我们执行以下操作

```
res = platform_get_resource(pdev, IORESOURCE_MEM, 0); 
```

我们获得有关分配给设备的内存的信息。

那么我有必要使用虚拟地址来使用这个内存吗

```
virt_base = ioremap(res->start, resource_size(res)); 
```

*我们不能使用物理地址本身来寻址内存吗？*

如果可以，那么使用虚拟内存是否有任何特定优势，或者这就是内核希望我们做的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:19:42.267

是的，这是绝对必要的。（在 x86 上）一旦在 CPU 中启用分页，*所有*对操作系统可见的地址（所以你，驱动程序开发人员）都是虚拟地址。换句话说，您读取或写入的任何地址都将被 CPU 解释为虚拟地址。然后它将通过页表层次结构最终到达要放在总线上的物理地址。

你不能使用物理地址——它们不会被映射，或者映射到你想要的东西之外。这就是为什么`ioremap`必须存在和被使用的原因。

# ember.js - ember.js 中的 buttonClass 指令是如何工作的？

> ID：15540690
> 
> 赞同：0
> 
> 时间：2013-03-21T06:15:37.683
> 
> 标签：ember.js

此代码：{{bindAttr class="buttonClass:hidden"}}

[在这条线上](https://github.com/addyosmani/todomvc/blob/gh-pages/architecture-examples/emberjs/index.html#L48)

该 bindAttr 代码似乎没有做任何事情。我可以完全删除它，待办事项应用程序的工作方式与以前相同。

buttonClass 指令到底在做什么？todos 控制器上没有 buttonClass 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:55:29.320

你是对的，它不需要。如果没有完成的任务，它可能会隐藏按钮。但是因为它现在被包裹在：

```
{{#if hasCompleted}} 
```

它可能应该被删除。

# sencha-touch - extjs4.1 应用是否支持 iPad Browser 和 Android Tablet Browser

> ID：15540723
> 
> 赞同：0
> 
> 时间：2013-03-21T06:18:25.730
> 
> 标签：sencha-touch, extjs4.1, sencha-architect

谁能告诉 extjs4.1 应用程序是否支持 iPad 浏览器和 Android 平板电脑浏览器，例如（无论是设计和监听器）如果它支持，那么为什么他们会使用 sencha 移动频道？

# c++ - 读-处理-写的最佳缓冲区大小

> ID：15540725
> 
> 赞同：16
> 
> 时间：2013-03-21T06:18:27.090
> 
> 标签：c++, c, performance, optimization, memory-management

在我的函数中，我需要将文件中的一些数据读入缓冲区，操作数据并将其写回另一个文件。该文件大小未知，可能非常大。

如果我使用一个小的缓冲区，将会有一个很长的读/写周期，并且会花费很多时间。相反，长缓冲区意味着我需要消耗更多内存。我应该使用的最佳缓冲区大小是多少？这种情况有依赖性吗？

我在 Windows 中看到了一些像“Tera copy”这样的应用程序，可以有效地管理大文件。还有其他我应该注意的技术或机制吗？

注意：此程序将在 Windows 下运行。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-21T06:22:32.920

看看微软对 IO 大小的看法：[http](http://technet.microsoft.com/en-us/library/cc938632.aspx) ://technet.microsoft.com/en-us/library/cc938632.aspx 。基本上，他们说您可能应该在 64K 块中执行 IO。

在 *NIX 平台上，`struct stat`有一个`st_blksize`成员说应该是最小 IO 块大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T06:21:33.110

实际上，它高度依赖于大小写，您可能应该只编写程序以能够处理灵活的缓冲区大小，然后尝试最佳大小。

如果您从小处开始然后增加缓冲区大小，您可能会达到某个大小，之后您将看不到性能提升或性能提升非常小，因为 CPU 大部分时间都在运行您的代码，而 I /O 变得可以忽略不计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:52:53.460

这些事情的第一条规则是进行基准测试。我的猜测是你过早地优化。如果您正在执行真正的文件 IO，则磁盘（或其他）的带宽通常会成为瓶颈。只要您将数据分块写入几页，性能就不会发生太大变化。

您可能希望在写入操作的同时对部分数据进行计算。为此，您必须保留两个缓冲区，一个是当前写入的，另一个是您进行处理的。然后，您将使用异步 IO 函数（`aio_write`在 POSIX 系统上，Windows 也可能存在类似的东西）并为每次迭代切换缓冲区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T06:30:24.323

内存管理始终取决于大小写，尤其是与文件 I/O 结合使用时。

我这边有两个可能的建议。

1) 使用固定的 I/O 缓冲区大小，例如 64K、256K、512KB 或 1MB。但在这种情况下，当 I/O 超过此固定缓冲区大小时，您必须考虑偏移量以在多次迭代中完成 I/O。

2) 使用 malloc() 使用可变 I/O 缓冲区大小，但这也取决于某些因素。例如系统中的可用 RAM 和操作系统中进程的最大动态内存分配限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:43:50.693

我会建议你使用页面大小的缓冲区大小。例如，页面大小为 4K，那么您可以使用 4K 字节缓冲区大小来最小化上下文切换。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-21T06:22:02.003

虽然我不能代表算法...内存使用与处理器使用是编程中的一个典型难题，您可能应该根据具体情况进行选择...因此，如果系统有 4GB 可用 RAM，您显然可以消耗相当多的内存，而如果你只有 512MB，你应该以消耗 CPU 为代价消耗很少。最好的方法是用程序检查和改变你的大小:)

# iphone - iOS MPMoviePlayerController 在后台播放音频

> ID：15540726
> 
> 赞同：4
> 
> 时间：2013-03-21T06:18:39.133
> 
> 标签：iphone, ios, mpmovieplayercontroller, multitasking, background-audio

我有 MPMoviePlayerController 应该在后台播放视频的音频，并且应该由多任务播放/暂停控件控制。

更新 .plist 文件`Required background modes`并调用以下命令后：

```
- (void)startBackgroundStreaming
{
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];

    NSError *activationError = nil;
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:&activationError];
    [audioSession setActive:YES error:&activationError]; 
```

}

应用程序图标出现在多任务播放/暂停栏中，但这些按钮没有响应。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T14:43:05.290

缺少的一块拼图是处理您收到的远程控制事件。`-(void)remoteControlReceivedWithEvent:(UIEvent *)event`您可以通过在应用程序委托中实现该方法来做到这一点。在最简单的形式中，它看起来像：

```
-(void)remoteControlReceivedWithEvent:(UIEvent *)event{
    if (event.type == UIEventTypeRemoteControl){
        switch (event.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                // Toggle play pause
                break;
            default:
                break;
        }
    }
} 
```

然而，这个方法是在应用程序委托上调用的，但您始终可以将事件作为对象发布通知，以便拥有电影播放器​​控制器的视图控制器可以获取该事件，如下所示：

```
-(void)remoteControlReceivedWithEvent:(UIEvent *)event{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"RemoteControlEventReceived" object:event];
} 
```

然后在分配给通知的侦听器方法中获取事件对象。

```
-(void)remoteControlEventNotification:(NSNotification *)note{
    UIEvent *event = note.object;
    if (event.type == UIEventTypeRemoteControl){
        switch (event.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                if (_moviePlayerController.playbackState == MPMoviePlaybackStatePlaying){
                    [_moviePlayerController pause];
                } else {
                    [_moviePlayerController play];
                }
                break;
                // You get the idea.
            default:
                break;
        }
    }
} 
```

# android - 当点击前台布局Android时，后台布局会被吸引

> ID：15540740
> 
> 赞同：0
> 
> 时间：2013-03-21T06:20:29.943
> 
> 标签：android, background, android-edittext, fragment, android-virtual-keyboard

我正在设计一个基于 Tab 的 Android 应用程序并使用 Fragment。我的第一个片段布局几乎没有 Edittexts，并且在导航到没有任何 EditTexts 的其他片段时，点击时会出现虚拟键盘。经过几个小时的测试，我发现它是由上一个片段中的 EditText 引起的。如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:41:29.233

在您不想要虚拟键盘的活动中使用它

```
activity=this.getActivity();
    InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
    inputMethodManager.hideSoftkey(activity.getCurrentFocus().getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:42:33.183

@Joseph，尝试提及您到目前为止所做的努力和实施，这有助于指出错误或错误。对于您的问题，请尝试设置您要与之交互的布局的焦点。这可以帮助你有一个[requestCall()](http://developer.android.com/reference/android/view/View.html)

还要检查这个：

```
 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

以下是在 XML 中设置焦点的方法。将此代码放在您希望在启动应用程序时关注的控件的标记中。

```
 <requestFocus
            android:duplicateParentState="true"
            android:focusable="true"
            android:focusableInTouchMode="true" /> 
```

# iphone - 如何在 iOS 中向左或向右滑动以推送或弹出 ViewContrller

> ID：15540741
> 
> 赞同：1
> 
> 时间：2013-03-21T06:20:31.487
> 
> 标签：iphone, ios, objective-c

我想在我的应用程序中滑动以推送或弹出 ViewControllers ，我知道我可以向其中添加滑动手势。但是当我滑动屏幕时，我希望当前的 ViewController 跟随我的滑动手势，而下一个 ViewController 只需滑动即可。我该怎么做，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:31:47.780

不可能用`UINavigationController`; 您必须构建自己的导航控制器（应该很容易），其中包含`UIPanGestureRecognizer`.

iOS 7 的编辑：您可能想要使用`UIScreenEdgePanGestureRecognizer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:27:40.310

手势识别器具有动作方法，就像按钮一样。只需将其放在 action 方法中：

```
NextViewController *next = [[NextViewController alloc] init ....];
[self.navigationController pushViewController:next animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:42:20.997

阅读手势识别器。您可以创建它们并将其添加到对象上。例如

```
UILongPressGestureRecognizer *longTap = [[UILongPressGestureRecognizer alloc] 
                                         initWithTarget:self 
                                         action:@selector(longPress:)];
longTap.minimumPressDuration = 1.0;
[cell addGestureRecognizer:longTap]; 
```

在这里，我创建了 LongPress 识别器并将其添加到我的单元格中。如果我在我的单元格上长按（1.0 秒），它将调用选择器（长按：）。长按我可以编写任何代码。

```
-(void)longPress : (UILongPressGestureRecognizer *)rec {
   if (rec.state == UIGestureRecognizerStateBegan) {
   NSLog (@"I've longPressed");
   }
} 
```

您可以通过相同的方式使用不同的识别器。

关于推送和弹出。它们是导航控制器的方法。Push - 在您向他展示的控制器上前进；

```
NextController *goNext = [[NextViewController alloc] init];
[self.navigationController pushViewController:goNext animated:YES]; 
```

它将转到 NextController。Pop - 返回上一个控制器。

在这里您不需要显示以前的控制器。只是对 navController 说回来

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

# android - 从 mainActivity 向片段添加视图

> ID：15540742
> 
> 赞同：0
> 
> 时间：2013-03-21T06:20:33.037
> 
> 标签：android, fragment, android-view

我想从这个 mainActivity 动态添加一个视图到片段。
因为， Fragment 类没有`addView()`API，我还有其他可用的选项。
我在第 1 行尝试过`fragment.getView()`，但它给出了空指针异常。我不太了解 Fragment api，也没有时间去投资。任何人都可以请提供解决该问题的方法。

**MainActivity.java**

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tabA = bar.newTab().setText("A Tab");
    ActionBar.Tab tabB = bar.newTab().setText("B Tab");
    ActionBar.Tab tabC = bar.newTab().setText("C Tab");

    Fragment fragmentA = new AFragmentTab();
    Fragment fragmentB = new BFragmentTab();
    Fragment fragmentC = new CFragmentTab();

    tabA.setTabListener(new MyTabsListener(fragmentA));
    tabB.setTabListener(new MyTabsListener(fragmentB));
    tabC.setTabListener(new MyTabsListener(fragmentC));

    bar.addTab(tabA);
    bar.addTab(tabB);
    bar.addTab(tabC);

        //Line 1
        //How to add a view from here to any of these fragment
        //Or how can i modify the content of that fragment

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

protected class MyTabsListener implements ActionBar.TabListener {

    private Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(R.id.fragment_container, fragment, null);
        // Or should the modification/addition of views be done here.           
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // some people needed this line as well to make it work: 
        ft.remove(fragment);
    }
}
} 
```

**BFagmentTab.java**

```
public class BFragmentTab extends Fragment
{
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_b, container, false);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:07:41.593

尝试调用`fragment.getView()`活动的`onResume()`or`onStart()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:11:22.033

请看这个：[一](http://dj-android.blogspot.in/2013/02/android-adding-actionbar-navigation-tabs.html)和[二](http://dj-android.blogspot.in/2013/02/android-adding-actionbar-navigation.html)

# git - git 在提交前提示我

> ID：15540749
> 
> 赞同：5
> 
> 时间：2013-03-21T06:20:53.593
> 
> 标签：git

git 有没有办法提示我“你正试图在生产分支中进行提交。你确定（y/N）吗？” 每次提交之前的消息。从消息中可以明显看出，我只希望它在特定分支（比如生产分支）上，以避免任何虚假提交。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:37:41.993

您可以使用预提交挂钩来检查您是否在生产分支上，但挂钩脚本无法从用户那里收集信息。一种可能的替代方法是声明应该使用`--no-verify`(or `-n`) 选项`git commit`来真正执行提交。

这可以通过以下内容来完成`.git/hooks/pre-commit`：

```
#/bin/sh
case "$(git rev-parse --symbolic-full-name HEAD)" in
    refs/heads/production)
        echo 'Use `git commit --no-verify` to commit to production branch'
        exit 1
        ;;
esac 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T06:24:35.933

适当设置您的提示并查看您始终所在的分支 - [https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh](https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh)

如果您想要更好的工具，例如更好的 git 提示符、ruby 版本提示符、python virtualenv 提示符等，请尝试`bash-it`- [https://github.com/revans/bash-it](https://github.com/revans/bash-it)

如果您想要您在此处描述的确切解决方案，请为 git commit 设置一些别名脚本，设置一个`pre-commit`挂钩等，它将查看您当前的分支并根据需要提示您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:27:42.070

听起来你可以使用[Git Hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。这些是位于 .git/hooks 中的脚本，当某些事件发生时，git 可以运行这些脚本，例如在提交过程的各个阶段。
一个这样的钩子是“预提交”钩子。来自 git 书：

> 预提交挂钩首先运行，甚至在您输入提交消息之前。它用于检查即将提交的快照、查看您是否忘记了某些内容、确保测试运行或检查您需要在代码中检查的任何内容。从这个钩子中退出非零会中止提交 [...]

所以，你可以这样做：

*   将 .git/hooks/pre-commit.sample 重命名为 .git/hooks/pre-commit （启用钩子）
*   在获取当前分支名称的脚本中添加一些代码。也许是这样的：（`git status -sb | awk '{print $2}'`尽管可能有更好的方法）。
*   检查您是否在生产分支上，如果是，则使用 y/n 提示用户。
*   如果用户选择“否”，只需使用非零代码退出即可中止提交。

# android - native_start 在 startNavigating android GPS 中失败

> ID：15540755
> 
> 赞同：0
> 
> 时间：2013-03-21T06:21:16.603
> 
> 标签：android, gps

我是android开发的新手。我正在尝试在 android 中使用 GPS 获取位置。我采用了两个类：一个用于 GPSTracker，另一个用于 Activity。该位置每次都设置为空，当我签入 LogCat 时，我收到以下错误：

```
native_start failed in startNavigating 
```

我也在清单中为 GPS 数据设置了权限。我什至试图通过使用模拟器控件传递假的纬度和经度，但没有效果。可能是什么原因？我正在为 Android 2.3 编写代码

我的代码是：//GPSTracker.java

```
public class GPSTracker extends Service implements LocationListener {

    private final Context mcontext;
    boolean isGPSEnabled = false;
    boolean canGetLocation = false;
    double latitude,longitude;
    Location location;

    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1;

    protected LocationManager locationManager;
    protected LocationListener listener;

    public GPSTracker(Context context){
        this.mcontext = context;
        getLocation();
    }

    public Location getLocation() {
        try{
            locationManager = (LocationManager) mcontext.getSystemService(LOCATION_SERVICE);

            listener = new LocationListener() {

                @Override
                public void onStatusChanged(String provider, int status, Bundle extras) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderEnabled(String provider) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderDisabled(String provider) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onLocationChanged(Location location1) {
                    // TODO Auto-generated method stub
                    location = location1;
                }
            };

            isGPSEnabled = locationManager.isProviderEnabled(locationManager.GPS_PROVIDER);
            if(isGPSEnabled){
                this.canGetLocation = true;
                locationManager.requestLocationUpdates(locationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, listener);
                Log.d("GPS", "Enabled");
                if(locationManager!=null){
                    location = locationManager.getLastKnownLocation(locationManager.GPS_PROVIDER);
                    if(location!=null){
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                        //Log.d("Latitude", latitude.toString());
                        //Log.d("Longitude", longitude.toString());
                    }
                    else{
                        Log.d("Location","Null");
                    }
                }
            }
        }catch(Exception e){
            e.printStackTrace();
        }

        return location;
        // TODO Auto-generated method stub

    }

    public boolean canGetLocation(){
        return this.canGetLocation;
    }

    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mcontext);
        alertDialog.setTitle("GPS Settings");
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mcontext.startActivity(intent);
            }
        });
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub

    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    public double getLatitude() {
        // TODO Auto-generated method stub
        if(location!=null){
            Log.d("Location",location.toString());
            latitude = location.getLatitude();
        }
        return latitude;
    }

    public double getLongitude() {
        // TODO Auto-generated method stub
        if(location!=null){
            Log.d("Location",location.toString());
            longitude = location.getLongitude();
        }
        return longitude;
    }
    } 
```

//LocationActivity.java

```
public class LocationActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_location);

        Button button = (Button) findViewById(R.id.button1); 
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                  GPSTracker gps = new GPSTracker(LocationActivity.this);
                    if(gps.canGetLocation() == false){
                        Log.d("GPSLogFromActivity","False");
                        gps.showSettingsAlert();
                    }
                    else{
                        double latitude = gps.getLatitude();
                        System.out.println("Latitude: "+latitude);
                        double longitude = gps.getLongitude();
                        System.out.println("Longitud: e"+longitude);

                        Log.d("GPSLogFromActivity","True");
                        Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
                    }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:25:43.140

嘿朋友看看这个

[我当前的位置总是返回 null。我怎样才能解决这个问题？](https://stackoverflow.com/questions/9873190/my-current-location-always-returns-null-how-can-i-fix-this/15540692#15540692)

# c++ - 在 C++ 中的缓冲区/变量中传递串行端口数据数据

> ID：15540757
> 
> 赞同：0
> 
> 时间：2013-03-21T06:21:21.157
> 
> 标签：c++, windows, serial-port

我有来自我发送格式的 3 个传感器的串行端口的数据

```
sensor0,sensor1,sensor2 
```

我使用这个程序：

```
 #include <iostream>
 #include <string>
 #include <sstream>
 #include <Windows.h>
 #include "SerialClass.h"

 char buffer[25];
 using namespace std;

 int i;
 int main()
   {
  Serial oSerial("COM8:");

  oSerial.WriteData("1",1);
       Sleep(100);
       oSerial.ReadData(buffer,25);
string str = buffer;
string word;
stringstream stream(str);

while( getline(stream, word, ',') ) 
    cout <<word << "\n";

Sleep (10000);
   } 
```

结果是：

```
 sensor0
 sensor1
 sensor2 
```

我希望数据的结果在缓冲区/变量中，所以结果看起来像

```
y1=sensor0
y2=sensor1
y3=sensor2 
```

我怎样才能改变代码，所以结果就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:26:19.530

在代码片段中：

```
int count = 1;
while( getline(stream, word, ',') ) 
{
   cout<<"y"<<count<<"="<<word<< "\n";
   count++;
} 
```

# plugins - 轻量级 JRE

> ID：15540758
> 
> 赞同：0
> 
> 时间：2013-03-21T06:21:26.790
> 
> 标签：plugins, applet, java

我正在创建一个包含小程序的网站。但我们知道，要在浏览器中运行小程序，我们需要 Java 插件（JRE）。所以我的问题是：我们是否可以直接提供轻量级 JRE 而无需访问 oracle 站点。请注意，JRE 必须是小尺寸，仅要求运行一个小程序。

问候， 阿伦李 MJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:25:38.047

没有这样的事情，您所要做的就是去oracle站点并安装JRE。需要安装 JRE 的是在服务器端使用这个小程序的客户端。

# java - Java中通配符泛型的实际使用

> ID：15540759
> 
> 赞同：6
> 
> 时间：2013-03-21T06:21:33.093
> 
> 标签：java, generics, wildcard

我最近参加了一次 Java 考试，其中有很多关于 Java 通配符泛型的部分。然而，关于它们在实践中的用法却很少提及。我们什么时候应该使用它们？我们来看一个典型的用法：

```
void check(Collection<? extends Animal> list) {
  // Do something
} 
```

文档所说的，这个集合不允许向列表中添加任何元素。所以基本上通配符可用于使集合成为只读。这是他们唯一的用途吗？有实际需要吗？在过去的四年里，我参与了很多 Java 编程项目，但我还没有看到任何项目会广泛使用通配符这样的特性。

那么，从实践的角度来看，是否存在通配符泛型是不可避免和必要的情况呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:04:44.817

> 那么，从实践的角度来看，是否存在通配符泛型是不可避免和必要的情况呢？

我不认为它们是“不可避免和必要的”，因为 Java 编译器无论如何都会删除它们。但是，使用它们时，您可以在编译时获得更严格的类型检查，并且可以避免类型转换。无论如何，谁想打字？:)

[通配符使用指南](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)

[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:33:10.120

```
void check(Collection<? extends Animal> list) {
  list.add(new Animal()); // compile time error
  list.add(new Dog()); // compile time error. Dog is subclass of Animal class. 
} 
```

Java 开发了这样的泛型，因为不允许程序编写任何他们想要的代码，否则如果允许，那么稍后他们会在运行时环境中发现一团糟。

有时在编程中，您会遇到一种情况，即您的方法`check`不想在列表中添加元素但想读取这些元素。

您只能添加`null`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:35:43.777

简而言之，你说的是错误的。

它与“使集合成为只读”无关。

我们仍然可以向输入列表添加元素，因为 Collection 确实声明了一个`add(E)`方法。

我认为通配符很简单：您实际上想要限制输入类型，因为您的逻辑仅对某些类型是合理的。

对于您的示例，您的支票可能使用某种动物方法

```
void check(Collection<? extends Animal> list) {
  // Do something
  for (Animal a : list) {
    a.checkAge();  // checkAge() is method of Animal
  }
} 
```

没有`? extends Animal`，上面的代码将不起作用，因为传入的列表可以是任何东西的集合（不是动物）。

因此，我们要确保传入集合到 Collection 或 Collection 等，以便我们的代码在我们从列表中检索元素并将元素视为 Animal 时真正有意义。

# iphone - 如何在 ios 的单一视图中显示饼图、条形图和折线图

> ID：15540765
> 
> 赞同：0
> 
> 时间：2013-03-21T06:21:41.837
> 
> 标签：iphone, ios, bar-chart, pie-chart, linechart

我想在 iPad 上显示图表，如下图所示。请建议我一些想法如何做到这一点？

我参考了教程[How To Draw Graphs with Core Plot, Part 1 & 2](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)。

在这里我可以看到它使用不同的视图控制器来执行所有三个图形。我只希望它在单个视图控制器中。

![在此处输入图像描述](../Images/27f8b57105cd49d9eaeb453353272d31.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:30:55.170

创建 SingleView 应用程序的新项目，拖放使用核心绘图所需的内容，并将这三个视图控制器拖放到您的项目中。

你有三个视图控制器

```
1\. CPDPieChartViewController
2\. CPDBarGraphViewController
3\. CPDScatterPlotViewConntroller 
```

使它们成为 UIView 的子类，就像它们的 .h 中一样，而不是`<UIViewController>`使用`<UIView>`

```
1\. CPDPieChartView
2\. CPDBarGraphView
3\. CPDScatterPlotView 
```

并在他们的实现文件中删除与 UIViewController 相关的代码，例如方法 -(void)viewDidAppear 和不需要的合成对象，并添加 initwithframe 方法。

现在在你的项目主视图控制器中导入这三个视图类。

```
-(void)viewDidLoad
{
  CPDPieChartView *CPDPieChartViewObj=[[CPDPieChartView alloc]initWithFrame:CGRectmake(give proper frame)];
[CPDPieChartViewObj initPlot];

CPDBarGraphView *CPDBarGraphViewObj=[[CPDBarGraphView alloc]initWithFrame:CGRectmake(give proper frame)];
[CPDBarGraphViewObj initPlot];

CPDScatterPlotView *CPDScatterPlotViewObj=[[CPDScatterPlotView alloc]initWithFrame:CGRectmake(give proper frame)];
[CPDScatterPlotViewObj initPlot];

[self.view addSubview:CPDPieChartViewObj];
[self.view addSubview:CPDBarGraphViewObj];
[self.view addSubview:CPDScatterPlotViewObj];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:03:19.750

这是一个示例： [CorePlotGallary](https://code.google.com/p/core-plot/source/browse/examples/CorePlotGallery/?r=f0dd7863fd8e068802eb7ae259e21dd94f4787be)中的[CompositePlot](https://code.google.com/p/core-plot/source/browse/examples/CorePlotGallery/src/plots/CompositePlot.m?spec=svnf0dd7863fd8e068802eb7ae259e21dd94f4787be&r=f0dd7863fd8e068802eb7ae259e21dd94f4787be)

# django - 使用 django sweetpie 访问模型子类属性

> ID：15540768
> 
> 赞同：0
> 
> 时间：2013-03-21T06:22:11.883
> 
> 标签：django, subclass, tastypie

我有一个被分包的模型

```
class Foo(models.Model):
    name = models.CharField(max_length=255)
    child_model = models.CharField(max_length=255)

class Bar(Foo):
    woots = models.ManyToManyField(Woot)

class Woot(models.Model):
    color = models.CharField(max_length=255) 
```

还有一些美味的资源：

```
class FooResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()

class BarResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()

class WootResource(ModelResource):
    class Meta:
        queryset = Woot.objects.all() 
```

访问 FooResource 时，如果 child_model 属性 == bar，我理想地希望它“重新路由”并返回 BarResource。

如果我不能这样做，那么我可以通过任何方式将一系列 woots 序列化并放入包中（当 child_model 属性 == bar 时）我都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:25:39.390

尝试这个：

```
class FooResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()  

    def dehydrate(self, bundle):
        if bundle.data['child_model']=="bar":
            return json.loads(BarResource().dispatch_list(bundle.request).content)
        return bundle 
```

# sql - sql查询获得ID明智的平衡

> ID：15540769
> 
> 赞同：1
> 
> 时间：2013-03-21T06:22:28.167
> 
> 标签：sql, oracle, oracle10g

我有以下 SQL 查询：（**Oracle 10**）

```
SELECT
     A.ID,
     SUM(A.AMT_CR) - SUM(A.AMT_DR) AS balAmt,
     P.NAME
FROM TABLE1 A, TABLE2 P
WHERE P.ID BETWEEN 'C0100' AND 'C0200'
    AND P.ID = A.ID
    AND A.TRANS_DATE < '01-FEB-2013'
GROUP BY A.ID, P.NAME
ORDER BY A.ID 
```

上面的查询执行得很好，但是这个查询有一个条件`AND A.TRANS_DATE < '01-FEB-2013'`。这个条件是为了`balAmt`在`TRANS_DATE`. 但是这个查询的问题是它只得到`IDs`相对于`AND A.TRANS_DATE < '01-FEB-2013'`条件的。如果 a`ID`不`TRANS_DATE`小于，`'01-FEB-2013'`则不会显示 that 的记录`ID`。

所以我想`IDs`从数据库中获取所有。但我想得到`balAmt`条件`AND A.TRANS_DATE < '01-FEB-2013'`..

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:39:21.197

```
 SELECT Q.ID, W.balmt, W.NAME
FROM TABLE1 Q
LEFT JOIN (
SELECT
     A.ID,
     SUM(A.AMT_CR) - SUM(A.AMT_DR) AS balAmt,
     P.NAME
FROM TABLE1 A, TABLE2 P
WHERE P.ID BETWEEN 'C0100' AND 'C0200'
    AND P.ID = A.ID
    AND A.TRANS_DATE < '01-FEB-2013'
GROUP BY A.ID, P.NAME
) W
ON Q.ID = W.ID
ORDER BY A.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:02:13.557

```
SELECT
     A.ID,
     SUM(case when A.TRANS_DATE < '01-FEB-2013' 
         then nvl(A.AMT_CR,0) - nvl(A.AMT_DR,0)
         else 0
         end) AS balAmt,
     P.NAME
FROM TABLE1 A, TABLE2 P
WHERE P.ID BETWEEN 'C0100' AND 'C0200'
    AND P.ID = A.ID
GROUP BY A.ID, P.NAME
ORDER BY A.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:04:59.840

这应该这样做：

```
SELECT
     A.ID,
     SUM(A.AMT_CR) - SUM(A.AMT_DR) AS balAmt,
     P.NAME
FROM TABLE1 A
LEFT JOIN TABLE2 P ON P.ID = A.ID
                   AND A.TRANS_DATE < '01-FEB-2013'
                   AND P.ID BETWEEN 'C0100' AND 'C0200'
GROUP BY A.ID, P.NAME
ORDER BY A.ID 
```

# iphone - 在 iOS 中的 Orientation 上加载不同的 xib 文件

> ID：15540771
> 
> 赞同：1
> 
> 时间：2013-03-21T06:22:30.157
> 
> 标签：iphone, ios, ipad, orientation, xib

我创建了两个`.xib`文件，一个用于纵向模式，另一个用于横向模式，

在每次旋转时，我都想加载相应的`.xib`文件，

这是我的代码片段，

**ViewAppDelegate.m 类**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if ([UIApplication sharedApplication].statusBarOrientation==UIInterfaceOrientationPortrait | [UIApplication sharedApplication].statusBarOrientation==UIInterfaceOrientationPortraitUpsideDown)
    {
        self.viewController = [[OrientationViewController alloc] initWithNibName:@"PortraitController" bundle:nil];
        UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:self.viewController];
        self.window.rootViewController = navigationController;
    }
    else{
        self.viewController = [[OrientationViewController alloc] initWithNibName:@"LandscapeController" bundle:nil];
        UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:self.viewController];
        self.window.rootViewController = navigationController;
    }

    [self.window makeKeyAndVisible];
    return YES;
} 
```

**ViewController.m 类**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return YES;
}

-(void)viewWillLayoutSubviews{

    if ([UIApplication sharedApplication].statusBarOrientation==UIInterfaceOrientationPortrait | [UIApplication sharedApplication].statusBarOrientation==UIInterfaceOrientationPortraitUpsideDown) 
    {
        [[NSBundle mainBundle] loadNibNamed:@"PortraitController" owner:self options:nil];
    }
    else{
        [[NSBundle mainBundle] loadNibNamed:@"LandscapeController" owner:self options:nil];
    }

} 
```

写了这么多代码后，我的应用程序什么也没显示……它只显示黑屏。

***请提出一些解决方案。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:41:48.550

一旦这样尝试

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeOrientation) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

将此方法添加到应用程序视图控制器中以获取通知。

```
-(void)changeOrientation {
    UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
    if (orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown) {
        [[NSBundle mainBundle] loadNibNamed:@"Portrait" owner:self options:nil];
    }
    else {
        [[NSBundle mainBundle] loadNibNamed:@"Landscape" owner:self options:nil];
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:05:47.780

你可以`willRotateToInterfaceOrientation`在 viewController.m 中使用来实现这个目标

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation  duration:(NSTimeInterval)duration
{
    if( UIInterfaceOrientationIsLandscape(toInterfaceOrientation) )
    {
        [[NSBundle mainBundle] loadNibNamed: [NSString stringWithFormat:@"%@-landscape", NSStringFromClass([self class])]
                                      owner: self
                                    options: nil];
        [self viewDidLoad];
    }
    else
    {
        [[NSBundle mainBundle] loadNibNamed: [NSString stringWithFormat:@"%@", NSStringFromClass([self class])]
                                      owner: self
                                    options: nil];
        [self viewDidLoad];
    }
} 
```

您可以检查您的`viewwillAppear`方法的方向，如下所示并分别加载 xib：

```
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:YES];

    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)){
        [[NSBundle mainBundle] loadNibNamed: [NSString stringWithFormat:@"%@", NSStringFromClass([self class])]
                                      owner: self
                                    options: nil];
        [self viewDidLoad];
    }
    else
    {
        [[NSBundle mainBundle] loadNibNamed: [NSString stringWithFormat:@"%@-landscape", NSStringFromClass([self class])]
                                      owner: self
                                    options: nil];
        [self viewDidLoad];
    }
} 
```

在这里，我有名称 xib，例如
Portrait: viewControllerName
Landscape: viewControllerName-landscape

我再次调用 viewDidload 方法再次加载新的 xib。

实现此目的的另一种方法是： [GPorientationKit](http://logisian.blogspot.in/2012/08/support-landscape-and-portrait-using.html "GPOrientationKit")
它也是一个不错的方法！

或者，

您可以通过创建 2 个具有相同标签名称的控件来创建旋转时控件的更改框架，并制作一个`LayoutManager class`来映射标签并获取框架并分配相应的横向/纵向框架（通过从 xibs 获取）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:26:06.577

```
-(void)setFramesForPotrait
{

// set frames here

}

-(void)setFramesForLandscaeMode
{

// set frames here

}

-(bool)shouldAutorotate.....
{
return Yes
}

-()willAutoRotate......
{
if(orientation = uiinterfaceOrientationPotrait)
{
[self setFramesForPotrait];
}
else
{
[self setFramesForLandscape];
} 
```

为什么不在单视图控制器中为横向和纵向设置框架

# iphone - 可以为runloop分配给rununtildate的最大值是多少？

> ID：15540775
> 
> 赞同：0
> 
> 时间：2013-03-21T06:22:33.470
> 
> 标签：iphone, ios, objective-c, nsrunloop

我试图让这个runloop永远运行（如果不是永远至少一天）我正在使用以下函数进行runloop`[self.runLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:100000]];`

问题是应用程序在 3 小时后崩溃。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:36:19.870

如果您希望它永久运行（并假设您已附加计时器和/或输入源），您可以使用

```
[self.runLoop run]; 
```

如果您想保留当前的构造，可以使用：

```
[self.runLoop runUntilDate:[NSDate distantFuture]]; 
```

我已经看到 Apple 使用了以下模式（例如[Threading Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-131281)的清单 3-14 ；我还看到`NSOperation`对象在调用它们想要等待完成的异步操作时使用此构造）：

```
// Let the run loop process things.
do
{
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate distantFuture]];
}
while ( ... ); // in here you have whatever condition you want to check for 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:36:54.693

试试`[NSDate distantFuture]`。来自文档：“一个 NSDate 对象，表示遥远未来的日期（以世纪为单位）。”

# matlab - MATLAB包含错误：致命错误C1083：无法打开包含文件：'cblas.h'

> ID：15540776
> 
> 赞同：0
> 
> 时间：2013-03-21T06:22:39.570
> 
> 标签：matlab, include-path

我正在使用优化工具箱来解决稀疏估计问题。我已经从[SPAMS 主页](http://spams-devel.gforge.inria.fr/index.html)下载了该软件， 并想从 mexLasso.m 为我的应用程序创建一个 mex 文件。

我将所有错误调用的包含文件传输到 MATLAB 外部/包含文件夹。在 MATLAB 中，一旦我输入：

```
>> mex mexLasso.cpp 
```

我收到此错误：

> C:\Program Files\MATLAB\R2012b\extern\include\utils.h(28)
> 致命错误 C1083：无法打开包含文件：'cblas.h'

我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:29:19.600

对于 mex-ing：您是否设置了编译器？

```
>> mex -setup 
```

选择 Visual Studio 编译器而不是 Matlab 的`lcc`.

你有头文件`cblas.h`吗？它在哪里？

使用以下标志编译

```
>> mex -O -largeArrayDims -v mexLasso.cpp 
```

该`-v`标志应该为您提供详细的输出 - 查看编译器在哪些包含目录中搜索头文件。您可以使用标志将文件夹添加到搜索路径`-I <folder name>`

# javascript - Javascript函数中的错误

> ID：15540778
> 
> 赞同：0
> 
> 时间：2013-03-21T06:22:44.133
> 
> 标签：javascript, jquery, coldfusion

```
<cffunction name="getBackgrounds" access="public" returntype="query">
    <cfargument name="dsn" type="string" required="true" />
    <cfargument name="page" type="string" required="false" />
    <cfset var getBackground="" />
    <cfquery name="getBackground" datasource="#arguments.dsn#">
     SELECT page_id , photo 
     FROM page_photos 
     WHERE page_id = <cfqueryparam cfsqltype="cf_sql_integer" value="#Trim( arguments.page )#" />
    </cfquery>
    <cfreturn getBackground>
</cffunction> 
```

* * *

```
jQuery(function ($) {
    $.supersized({
        slide_interval: 6000,
        transition: 1,
        transition_speed: 1000,
        slide_links: 'false',
        slides: [ < cfoutput query = "getBackground" > {
                image: '#getBackground.photo#'
            } < cfif getBackground.CurrentRow lt getBackground.RecordCount > , < /cfif> 
               </cfoutput >
        ]

    });
}); 
```

但我得到一个错误。我之前尝试过类似的东西并且它正在工作，但我找不到那个例子。有谁看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:56:32.583

你没有提到错误......它说什么？你能包括生成的javascript吗？

此外，填充数组的另一种方法是：

```
<script>
 var arr = [];
 <cfoutput query="getBackground">
  var img = {};
 img.image = '#getBackground.photo#';
 arr.push(img);
 </cfoutput> 
  </script> 
```

# java - Drools 规则引擎 Usage-Handling Huge data

> ID：15540782
> 
> 赞同：0
> 
> 时间：2013-03-21T06:23:02.680
> 
> 标签：java, jboss, drools, rule-engine

我有一个案例，我从设备获取数据包并将该数据插入 MySQL 表中。有 4000 个设备，我每两分钟从每个设备获取数据包。每个数据包数据需要监控并执行一些数据库操作。所以我打算使用 drools 来监控数据包并应用不同的规则。我怀疑 drools 是否能够处理如此庞大的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:26:03.183

我建议你可以使用[jpcap](http://jpcap.sourceforge.net/)来捕获数据包。

JpCap 用于捕获网络数据包。你必须解压它，它是一个 DLL 文件，你应该把它粘贴到 windows/system32.

# r - 如何在绘图点标签的文本中包含下标

> ID：15540788
> 
> 赞同：7
> 
> 时间：2013-03-21T06:23:22.607
> 
> 标签：r, text, plot, subscript

嗨，我是 R 新手，所以如果这是一个非常基本的问题，我深表歉意。我正在尝试在 x 轴上的点 11 和 y 轴上的点 900 处将文本添加到绘图中，该点将以`t0= -4.0280`0 作为下标读取。在哪里`t0 <- -4.0280` 做这个我试过：

```
text(11,900,paste("t[0]=",t0),cex=0.8) 
# which gives 
't[0]= -4.0280'

text(11,900,expression(paste("t[0]=",t0)),cex=0.8) 
# which gives 
't[0]=t0'

# the closest I've gotten is:    
text(11,900,expression(paste(t[0]==t0)),cex=0.8) 
```

它将使用下标但返回`t0`而不是我的值 -4.0280。

谁能告诉我我哪里出错了？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:33:11.803

您可以替换`expression`为`substitute`. 没有必要`paste`。该参数`list(t0 = t0)`告诉用对象的值`substitute`替换字符串：`t0``t0`

```
plot(1,1)

t0 <- 1.3

text(1, 0.8, substitute(t[0]==t0, list(t0 = t0)), cex = 0.8) 
```

![在此处输入图像描述](../Images/fe769ae95b1c6e2e574d14b9b15c06da.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T07:43:17.317

`substitute`比is with略短`bquote`：

```
plot(1,1)
t0 <- -4.0280
text(1, 0.8, bquote("t"[0] ~ "=" ~ .(t0))) 
```

如果你想`paste`在那里使用：

```
text(1, 0.8, (bquote("t"[0]~.(paste0('=',t0))))) 
```

![在此处输入图像描述](../Images/6c0f82152ada6d1effe460e36c214d68.png)

这种Q之前就出现过：

[在 R 的轴标题中同时使用下标和变量值](https://stackoverflow.com/questions/7024849/using-subscript-and-variable-values-at-the-same-time-in-axis-titles-in-r)

[连接绘图标题中的字符串和表达式](https://stackoverflow.com/questions/4302367/concatenate-strings-and-expressions-in-a-plots-title)

# delphi - Delphi TChromium CEF3 运行时创建的浏览器加载页面不正确

> ID：15540792
> 
> 赞同：2
> 
> 时间：2013-03-21T06:23:44.230
> 
> 标签：delphi, runtime, tchromium

我正在使用 TChromium 进行授权。我有变量`Chromium1: TChromium;`。我需要在表单隐藏上销毁铬并在表单显示上显示。（因为 chromium 有时会引发异常“模块 libcef.dll 中的 EExternal Exception”并使我的应用程序崩溃，我认为在不使用 Chromium 时销毁它会有所帮助）。我有：

```
procedure TAuthForm.FormShow(Sender: TObject);
begin
  Chromium1 := TChromium.Create(self);
  Chromium1.Align := alClient;
  Chromium1.OnJsdialog := Chromium1Jsdialog;
  Chromium1.OnBeforePopup := Chromium1BeforePopup;
  Chromium1.DefaultUrl := 'about:blank';
  Chromium1.Parent := Self;
  Chromium1.Load(AUTH_URL);
end;

procedure TAuthForm.FormHide(Sender: TObject);
begin
  Chromium1.Free;
end; 
```

问题是，当`TAuthForm.FormShow`第一次调用时，页面加载正确，但是当我隐藏表单并再次显示时，浏览器显示页面不正确，现在不要如何解释这里是一个示例`http://google.com/`：

```
Google(function(){ window.google={kEI:"oKRKUZ2iHafP4QTXwYCwDw",getEI:function(a)    {for(var b;a&&(!a.getAttribute||!(b=a.getAttribute("eid")));)a=a.parentNode;return b||google.kEI},https:function(){return"https:"==window.location.protocol},kEXPI:"17259,39523,4000116,4001076,4001568,4001948,4001959,4001975,4002562,4002734,4002855,4003178,4003387,4003495,4003917,4004181,4004213,4004257,4004334,4004340,4004479,4004652,4004653,4004697,4004730,4004755,4004759,4004766,4004898,4004905,4004949,4004953,4005154",kCSI:{e:"17259,39523,4000116,4001076,4001568,4001948,4001959,4001975,4002562,4002734,4002855,4003178,4003387,4003495,4003917,4004181,4004213,4004257,4004334,4004340,4004479,4004652,4004653,4004697,4004730,4004755,4004759,4004766,4004898,4004905,4004949,4004953,4005154",ei:"oKRKUZ2iHafP4QTXwYCwDw"},authuser:0,ml:function(){},pageState:"#",kHL:"ru",time:function(){return(new Date).getTime()},log:function(a, b,c,h){var d=new Image,f=google.lc,e=google.li,g="";d.onerror=d.onload=d.onabort=function(){delete f[e]};f[e]=d;!c&&-1==b.search("&ei=")&&(g="&ei="+google.getEI(h));c=c||"/gen_204?........ 
```

它显示了所有块的内容，包括`<title>`和`<script>`你可以在这里看到的......

我试图找到解决方案，但只发现相同的错误（我的意思是没有解决方案的 libcef.dll 异常），这里：[https ://stackoverflow.com/questions/13784792/cef3-application-crash-fault-module- kernelbase-dll](https://stackoverflow.com/questions/13784792/cef3-application-crash-fault-module-kernelbase-dll)在评论中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T11:12:19.270

铬1.免费；是 pbm 它会破坏你的 chrom 实例吗，儿子，你再也看不到它了

做就是了 ：

Chromium1.visible := 假；// 如果你想隐藏它

# python - 计算给定整数中的个数

> ID：15540798
> 
> 赞同：11
> 
> 时间：2013-03-21T06:24:04.617
> 
> 标签：python, python-2.7

你如何计算给定整数的二进制表示中的个数。

假设给你一个数字`20`，它是`10100`二进制的，所以个数是 2。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T06:31:03.500

您正在寻找的东西称为[Hamming weight](http://en.wikipedia.org/wiki/Hamming_weight)，并且有很多算法可以做到这一点。这是另一个简单的：

```
def ones(n):
    w = 0
    while (n):
        w += 1
        n &= n - 1
    return w 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T06:27:16.990

使用很棒的[`collections`](http://docs.python.org/library/collections.html)模块。

```
>>> from collections import Counter
>>> binary = bin(20)[2:]
>>> Counter(binary)
Counter({'0': 3, '1': 2}) 
```

或者您可以使用内置函数`count()`：

```
>>> binary = bin(20)[2:]
>>> binary.count('1')
2 
```

甚至：

```
>>> sum(1 for i in bin(20)[2:] if i == '1')
2 
```

但是最后一个解决方案比使用慢`count()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T06:28:36.267

```
>>> num = 20
>>> bin(num)[2:].count('1')
2 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-21T06:37:53.323

使这种致盲快速的常用方法是使用查找表：

```
table = [bin(i)[2:].count('1') for i in range(256)]

def pop_count(n):
   cnt = 0
   while n > 0:
     cnt += table[n & 256]
     n >>= 8
   return cnt 
```

在 Python 中，任何使用`bin`和的解决方案`list.count`都会更快，但如果你想用汇编程序编写它，这很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T06:29:42.937

str.count方法和[*bin函数可以*](http://docs.python.org/3/library/functions.html#bin)[*轻松*](http://docs.python.org/3/library/stdtypes.html#str.count)解决这个小挑战：[](http://docs.python.org/3/library/functions.html#bin)

 *```
>>> def ones(x):
        "Count the number of ones in an integer's binary representation"
        return bin(x).count('1')

>>> ones(20)
2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-29T16:00:11.927

您可以使用位移`>>`和按位来执行此操作，并`&`检查最低有效位，如下所示：

```
def count_ones(x):
    result = 0
    while x > 0:
        result += x & 1
        x = x >> 1
    return result 
```

这是通过将位向右移动直到值变为零来实现的，同时计算最低有效位为 1 的次数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-19T19:04:32.070

该`int`类型从 python 3.10a 开始有一个新方法[`int.bit_count()`](https://docs.python.org/3.10/library/stdtypes.html#int.bit_count)，返回给定整数的二进制扩展中的个数，也称为人口计数，如下所示：

```
n = 20
bin(n)
'0b10100' 
```

`n.bit_count()`返回`2`，因为它在二进制表示中有 2 个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-24T13:22:31.813

我是一名新编码员，我发现这个逻辑很简单。新手可能更容易理解。

```
def onesInDecimal(n):
  count = 0
  while(n!=0):
    if (n%2!=0):
        count = count+1
        n = n-1
        n = n/2
    else:
        n = n/2
  return count 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-27T23:35:25.820

对于需要快速检查整数的二进制形式是否`x`只有一个 1（因此是 2 的幂）的特殊情况，可以使用以下检查：

```
if x == -(x | (-x)):
    ... 
```

该表达式`-(x | (-x))`是将二进制表示中除最后一个（最低有效位）之外的所有 1 替换为`x`0 时得到的数字。

例子：

12 = 1100 二进制

-12 = ...110100 二进制（具有无限数量的前导 1）

12 | (-12) = ...111100 二进制（有无限数量的前导 1）

-(12 | (-12)) = 100 二进制

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-21T06:24:04.617

如果输入数字是“数字”

```
number =20
len(bin(number)[2:].replace('0','')) 
```

另一种解决方案是

```
from collections import Counter

Counter(list(bin(number))[2:])['1'] 
```*

# java - 时差计划

> ID：15540801
> 
> 赞同：-5
> 
> 时间：2013-03-21T06:24:15.510
> 
> 标签：java, datetime

我正在使用以下函数来计算时差。它没有显示正确的输出。1个月的时差后显示2分钟的差异。

我的程序有什么问题？

```
public String TimestampDiff(Timestamp t) {
    long t1 = t.getTime();
    String st = null;
    long diff;
    java.util.Date date = new java.util.Date();
    long currT = date.getTime();
    System.out.println();
    System.out.println(" current timesstamp is  " + currT);

    diff = (currT - t1) / 60;
    int years = (int) Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
    double remainder = Math.floor(diff % (1000 * 60 * 60 * 24 * 365));
    int days = (int) Math.floor(remainder / (1000 * 60 * 60 * 24));
    remainder = Math.floor(remainder % (1000 * 60 * 60 * 24));
    int hours = (int) Math.floor(remainder / (1000 * 60 * 60));
    remainder = Math.floor(remainder % (1000 * 60 * 60));
    int minutes = (int) Math.floor(remainder / (1000 * 60));
    remainder = Math.floor(remainder % (1000 * 60));
    int seconds = (int) Math.floor(remainder / (1000));
    System.out.println("\nyr:Ds:hh:mm:ss " + years + ":" + days + ":"
            + hours + ":" + minutes + ":" + seconds);

    if (years == 0 && days == 0 && hours == 0 && minutes == 0) {
        st = "few seconds ago";
    } else if (years == 0 && days == 0 && hours == 0) {
        st = minutes + " minuts ago";
    } else if (years == 0 && days == 0) {
        st = hours + " hours ago";
    } else if (years == 0 && days == 1) {
        st = new SimpleDateFormat("'yesterday at' hh:mm a").format(t1);

    } else if (years == 0 && days > 1) {
        st = new SimpleDateFormat(" MMM d 'at' hh:mm a").format(t1);

    } else if (years > 0) {
        st = new SimpleDateFormat("MMM d ''yy 'at' hh:mm a").format(t1);

    }
    st = st.replace("AM", "am").replace("PM", "pm");
    return st;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T07:02:00.400

我建议看一下[Joda Time](http://www.joda.org/joda-time/)，并指出：

> Joda-Time 是 Java SE 8 之前 Java 的事实上的标准日期和时间库。现在要求用户迁移到 java.time (JSR-310)。

## 安装

*   对于基于 Debian 的系统：`libjoda-time-java`. 罐子将`/usr/share/java`在`joda-time.jar`
*   对于其他人：[下载](https://sourceforge.net/projects/joda-time/files/joda-time/)最新的 jar，例如 joda-time-2.2-dist.zip，其中包括 joda-time-2.2.jar

使用 Eclipse 时，将其添加到 Java 构建路径（项目 > 属性 > Java 构建路径 > 添加外部 Jar）

## 相关JavaDoc

*   [约会时间](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)
*   [时期](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)
*   [周期格式化程序](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatter.html)
*   [PeriodFormatterBuilder](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatterBuilder.html)

## 示例代码

```
import java.sql.Timestamp;
import java.util.Date;
import org.joda.time.DateTime;
import org.joda.time.Period;
import org.joda.time.format.PeriodFormatter;
import org.joda.time.format.PeriodFormatterBuilder;

public class MinimalWorkingExample {
    static Date date = new Date(1990, 4, 28, 12, 59);

    public static String getTimestampDiff(Timestamp t) {
        final DateTime start = new DateTime(date.getTime());
        final DateTime end = new DateTime(t);
        Period p = new Period(start, end);
        PeriodFormatter formatter = new PeriodFormatterBuilder()
                .printZeroAlways().minimumPrintedDigits(2).appendYears()
                .appendSuffix(" year", " years").appendSeparator(", ")
                .appendMonths().appendSuffix(" month", " months")
                .appendSeparator(", ").appendDays()
                .appendSuffix(" day", " days").appendSeparator(" and ")
                .appendHours().appendLiteral(":").appendMinutes()
                .appendLiteral(":").appendSeconds().toFormatter();
        return p.toString(formatter);
    }

    public static void main(String[] args) {
        String diff = getTimestampDiff(new Timestamp(2013, 3, 20, 7, 51, 0, 0));
        System.out.println(diff);
    }
} 
```

输出：

```
22 years, 10 months, 01 day and 18:52:00 
```

## 为什么我推荐一个新的解决方案

*   它更短（726 个字符/14 行，而您的 1665 个字符/41 行）
*   更容易理解
*   更容易调整
*   代码和表示分离更清晰
*   我不想修复你的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:55:17.057

```
import org.apache.commons.lang.time.DateUtils;
import java.text.SimpleDateFormat;

@Test
public void testDate() throws Exception {

    long t1 = new SimpleDateFormat("dd.MM.yyyy").parse("20.03.2013").getTime();
    long now = System.currentTimeMillis();
    String result = null;
    long diff = Math.abs(t1-now);

    if(diff < DateUtils.MILLIS_PER_MINUTE){
         result =  "few seconds ago";
    }else if(diff < DateUtils.MILLIS_PER_HOUR){
         result = (int)(diff/DateUtils.MILLIS_PER_MINUTE) + " minuts ago";
    }else if(diff < DateUtils.MILLIS_PER_DAY){
        result =  (int)(diff/DateUtils.MILLIS_PER_HOUR) + " hours ago";
    }else if(diff < DateUtils.MILLIS_PER_DAY * 2){
        result = new SimpleDateFormat("'yesterday at' hh:mm a").format(t1);
    }else if(diff < DateUtils.MILLIS_PER_DAY * 365){
        result = new SimpleDateFormat(" MMM d 'at' hh:mm a").format(t1);
    } else{
        result = new SimpleDateFormat("MMM d ''yy 'at' hh:mm a").format(t1);
    }
    result = result.replace("AM", "am").replace("PM", "pm");
    System.out.println(result);

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T06:30:36.467

不要`long`转换为`int`，因为它会失去精度。全部改成`int`，`long`看看有什么不同。

希望这有帮助

# iphone - iOS 6 中的“请勿打扰”功能如何实现？

> ID：15540802
> 
> 赞同：2
> 
> 时间：2013-03-21T06:24:16.807
> 
> 标签：iphone, ios, objective-c, ios6

我想在 iOS 6 中实现“请勿打扰”功能。

第一个问题：是否有任何框架或api苹果暴露来通过代码控制它们？

经过大量谷歌搜索后，我在应用商店“Call Bliss”上找到了一个应用程序，它提供了此功能并完全控制了通话、短信和彩信。谁能解释这个应用程序是如何工作的？或任何其他解决方法来学习和在 iOS 中实现此功能？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:51:31.840

通过阅读 Call Bliss 的描述，它的工作原理实际上听起来很简单。

1) 请勿打扰必须始终启用。不是预定的，不是关闭的，而是始终开启的。

2）它需要您将例外的联系人组设置为“请勿打扰”为“幸福例外”。这意味着应用程序需要访问您的通讯录。

从那里开始，假设它根据您在应用程序中设置的任何参数来管理“Bliss Exceptions”联系人组中的联系人可能是明智的。它根据所述参数添加和删除该组中的人员。

所以要回答你的问题，不，没有框架可以做到这一点。他们这样做的方式可能是目前唯一没有用于管理请勿打扰状态的公共 API 的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:51:06.800

甚至没有公共 API 可以访问请勿打扰功能。

我认为这就是应用程序的作用：

1.  该应用程序创建和管理自己的联系人列表（称为 Bliss 例外）

2.  用户必须在请勿打扰首选项中选择它。

3.  该应用程序可以在后台运行，因为它使用位置跟踪（可能仅对节省电池寿命很重要），因此当用户更改位置时，它可以更新例外列表。

4.  当接到电话时，请勿打扰系统功能会检查 Bliss 例外列表并将来自列表中联系人的所有呼叫静音。

请注意，评论者抱怨缺乏基于时间的呼叫阻止。这是不可能的，因为应用程序只能在位置更改时执行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:26:44.950

据我所知，没有办法通过代码实现它。没有提供用于限制调用的公共 api。

但是有一个用于检测调用的 API：[**CTCallCenter**](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCallCenter/Reference/Reference.html#//apple_ref/doc/uid/TP40009604)和一个名为[**CoreTelephonyFramework的框架**](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html#//apple_ref/doc/uid/TP40009603)

# php - PHP-MySQL 将多个查询合并为一个查询以快速执行

> ID：15540805
> 
> 赞同：0
> 
> 时间：2013-03-21T06:24:39.000
> 
> 标签：php, mysql, sql

我有 PHP 脚本来添加新记录并在 中检查此记录`table1`，如果记录不存在`table2`，`table3`则将其添加到`table3`else 将记录更新到`table1`or `table2`（存在的地方）。

我有大量数据要检查。因此可以使用单个 MySQL 查询来执行此任务。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:25:21.793

请记住，连接两个大表可能比使用 2 或 3 个单独的查询逐个从中获取数据要慢得多。主要问题是你认为什么是巨大的。如果您有大行，在 MySQL AFAIK 中加入数百万行绝不是一个好主意。

因此，虽然在一个查询中完成它绝对是可能的，但它可能不是经济的做法。

我们还需要一些关于行大小、索引、基本查询语法之类的信息。

# c# - 从 web.config 文件中获取 sql 连接字符串

> ID：15540806
> 
> 赞同：12
> 
> 时间：2013-03-21T06:25:06.067
> 
> 标签：c#, asp.net, sql-server, web-config, connection-string

我正在学习通过单击按钮从文本框中写入数据库。`web.config`我已经在我的文件中指定了我的 NorthWind 数据库的连接字符串。但是我无法访问后面代码中的连接字符串。

这是我尝试过的。

```
protected void buttontb_click(object sender, EventArgs e)
{
    System.Configuration.Configuration rootwebconfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/Mohtisham");
    System.Configuration.ConnectionStringSettings constring;
    constring = rootwebconfig.ConnectionStrings.ConnectionStrings["northwindconnect"];
    SqlConnection sql = new SqlConnection(constring);

    sql.Open();
    SqlCommand comm = new SqlCommand("Insert into categories (categoryName) values ('" + tb_database.Text + "')", sql);
    comm.ExecuteNonQuery();
    sql.Close();
} 
```

我收到一个工具提示错误

```
SqlConnection sql = new SqlConnection(constring); 
```

作为

> *System.data.SqlClient.Sqlconnection.Sqlconnection(string) 有一些无效参数。*

我想从`web.config`in加载连接字符串`constring`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T06:39:20.283

您可以简单地给`Name`您的`ConnectionString`in`web.config`文件并执行以下操作：

网络配置：

```
<add name="ConnectionStringName"  connectionString=YourServer"; Initial Catalog=YourDB; Integrated Security=True"/> 
```

代码背后：

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionStringName"].ToString()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T06:27:44.630

那是因为[`ConnectionStrings`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettingscollection.aspx)集合是[`ConnectionStringSettings`](http://msdn.microsoft.com/en-us/library/system.configuration.connectionstringsettings.aspx)对象的集合，但[`SqlConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)构造函数需要一个`string`参数。所以你不能自己进去`constring`。

试试这个。

```
SqlConnection sql = new SqlConnection(constring.ConnectionString); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T06:31:16.720

试试这个

```
readonly SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["northwindconnect"].ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:36:56.543

我会建议你创建一个函数而不是直接访问 web.config 文件，如下所示

```
 public static string GetConfigurationValue(string pstrKey)
    {
        var configurationValue = ConfigurationManager.AppSettings[pstrKey];
        if (!string.IsNullOrWhiteSpace(configurationValue))
            return configurationValue;

        throw (new ApplicationException(
            "Configuration Tag is missing web.config. It should contain   <add key=\"" + pstrKey + "\" value=\"?\"/>"));

    } 
```

并在您的应用程序中使用此功能

# c# - 网格视图的摘要

> ID：15540818
> 
> 赞同：0
> 
> 时间：2013-03-21T06:25:38.213
> 
> 标签：c#, asp.net

我需要页脚的gridview摘要...

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
 {
        decimal totalPrice = 0M;
        int totalItems = 0;
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Label lblPrice = (Label)e.Row.FindControl("lblPrice");
            decimal price = Decimal.Parse(lblPrice.Text); 
            totalPrice += price;
            totalItems += 1; 
        }
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            Label lblTotalPrice = (Label)e.Row.FindControl("lblTotalPrice");
            lblTotalPrice.Text = totalPrice.ToString(); 
        }
 } 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:30:20.857

像这样将 totalPrice 和 totalItems 声明为全局变量

```
decimal totalPrice = 0M;
int totalItems = 0;
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
  {
    ...

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:30:29.410

在您的方法`totalPrice`中声明在方法范围内，因此每一行都将从零开始。当涉及到页脚行时，它将再次为零。至少有两种选择：

1.  在您的 SQL 语句中包含`total = sum(price)`列并将其绑定到您的页脚；
2.  从您的方法移至`totalPrice`页面的私有字段。在这种情况下，您的代码应该可以工作

# windows-phone-7 - 在 WP7 中的 Microsoft Office 中保存隔离的存储文件

> ID：15540823
> 
> 赞同：1
> 
> 时间：2013-03-21T06:25:50.280
> 
> 标签：windows-phone-7, isolatedstorage

我正在我的应用程序的隔离存储区域中创建文件。在 Windows 手机上的任何电子邮件应用程序中，例如 Gmail 电子邮件应用程序，当我们从电子邮件下载任何文档时，默认情况下它会保存在“Microsoft Office”应用程序中，就像我想将隔离存储文件保存到 Microsoft Office 应用程序一样。请帮助。 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:49:44.103

我认为这是不可能的，因为无法访问其他应用程序的隔离存储。但是您可以使用“Medialibrary”类将图像和音乐保存到画廊。office 应用程序没有提供 api 来存储其他应用程序的文档。

# android - 在android中静默卸载应用程序？

> ID：15540826
> 
> 赞同：0
> 
> 时间：2013-03-21T06:26:03.573
> 
> 标签：android, uninstallation

我想从设备中静默删除应用程序。我正在尝试此代码，但给出异常“用户 10051 和当前进程都没有 android.permission.DELETE_PACKAGES。”

```
 class PackageInstallObserver extends IPackageInstallObserver.Stub {
    public void packageInstalled(String packageName, int returnCode) throws RemoteException {
        if (onInstalledPackaged != null) {
            onInstalledPackaged.packageInstalled(packageName, returnCode);
        }
    }
}

class PackageDeleteObserver extends IPackageDeleteObserver.Stub { 

    public void packageDeleted(String packageName, int returnCode) throws RemoteException {
        /*if (onInstalledPackaged != null) {
            onInstalledPackaged.packageInstalled(packageName, returnCode);
        }*/
    }
}

public ApplicationManager(Context context) throws SecurityException, NoSuchMethodException {

    observer = new PackageInstallObserver();
    observerdelete = new PackageDeleteObserver(); 
    pm = context.getPackageManager();

    Class<?>[] types = new Class[] {Uri.class, IPackageInstallObserver.class, int.class, String.class};
    Class<?>[] uninstalltypes = new Class[] {String.class, IPackageDeleteObserver.class, int.class};

    method = pm.getClass().getMethod("installPackage", types);
      uninstallmethod = pm.getClass().getMethod("deletePackage", uninstalltypes);
}

public void setOnInstalledPackaged(OnInstalledPackaged onInstalledPackaged) {
    this.onInstalledPackaged = onInstalledPackaged; 
}

public void uninstallPackage(String packagename) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {

    uninstallmethod.invoke(pm, new Object[] {packagename, observerdelete, 0});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:32:53.730

**以编程方式静默删除 Android 应用程序是不可能的**。

您可以做的最好的事情是要求用户在对话框中删除应用程序。当他按下“OK”然后重定向到指向该应用程序的卸载程序应用程序。如果要完成删除操作，仍然是用户的选择。

有一种方法可以坚持用户完成删除操作，但比较看好。在他关闭卸载程序应用程序后，他将返回到您的 Activity 中`onActivityResult()`。您可以检查该应用程序是否被删除。如果尚未删除，您可以返回同一个对话框并再次要求他删除该应用程序。如果您选择直到用户最终删除应用程序或停止使用您的主应用程序（即您告诉用户在他删除另一个应用程序之前他不能使用您的应用程序），您可以继续这个无限循环。

**如何检查是否安装了应用程序**：

```
final String packageName = "com.company.other-app-name";
android.content.pm.PackageManager pm = getPackageManager();
PackageInfo info = pm.getPackageInfo(packageName, 0); 
```

如果抛出`info==null`or `NameNotFoundException`，则未安装该应用程序。

**如何启动指向应用程序的卸载程序**：

```
Uri uri = Uri.parse("package:com.company.other-app-name");
Intent intent = new Intent(Intent.ACTION_DELETE, uri);
startActivityForResult(intent, REQUEST_CODE_UNINSTALL_FREE_APP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:29:02.490

SDK 应用程序不能拥有`DELETE_PACKAGES`权限，除非它们是固件的一部分。这意味着未使用固件编译的应用程序没有/获取静默删除应用程序的权利..

查看[这篇文章](https://stackoverflow.com/questions/7531724/android-permissions-categories-and-delete-packages-and-install-packages-permissi)了解更多信息..

# objective-c - 使用 NSSortDescriptor 对数组进行排序

> ID：15540829
> 
> 赞同：6
> 
> 时间：2013-03-21T06:26:15.053
> 
> 标签：objective-c, nsarray, nssortdescriptor

我有一个 A 类对象的数组，让它成为 detailsArray。

A 类具有日期、名称作为属性。

任何人都可以建议一种根据日期对该数组进行排序的好方法吗？

我怎样才能使用`NSSortDescriptor`这个数组排序？`NSSortDescriptor`我知道使用...排序字典数组

任何帮助是极大的赞赏.....

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T06:34:40.467

```
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO];
NSArray *sortedArray = [detailsArray sortedArrayUsingDescriptors:@[sortDescriptor]]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T06:33:32.003

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:NO];
NSArray *descriptors = [NSArray arrayWithObject: descriptor];

NSArray *reverseOrder = [dateArray sortedArrayUsingDescriptors:descriptors]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T06:31:30.877

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"date"
                                              ascending:YES] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray;
sortedArray = [yourArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

或者你也可以使用块

```
NSArray *sortedArray;
sortedArray = [yourArray sortedArrayUsingComparator:^NSComparisonResult(A *a, A *b) {
    NSDate *first = a.date;
    NSDate *second = b.date;
    return [first compare:second];
}]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T06:37:32.870

您需要通过其类名提供密钥转发，例如

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"ClassA.date" ascending:YES]; 
```

并在提出任何问题之前搜索**您**的查询，查看谷歌爬虫[**结果。**](https://www.google.co.in/search?q=sort+NSArray+contains+custom+class+objects&aq=f&oq=sort+NSArray+contains+custom+class+objects&aqs=chrome.0.57j62l3.9997&sourceid=chrome&ie=UTF-8)

# jquery - jQuery.browser 脚本或 shim 用于向后兼容 1.9.1 的插件

> ID：15540835
> 
> 赞同：3
> 
> 时间：2013-03-21T06:26:47.233
> 
> 标签：jquery, internet-explorer, quicksand

我正在尝试使用流沙和 jquery 插件，但 jquery 1.9.1 出现此错误。

> “未捕获的类型错误：无法读取未定义的属性 'msie'”

我知道 msie 是 jQuery.browser 属性上的标志 jQuery.browser 自 1.3 版以来已被弃用，并在 jQuery 1.9.0 中被删除

这就是导致错误的原因。但是有没有办法让流沙再次起作用？

任何帮助或建议都会很棒！

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T06:36:50.770

# 给 Intrepid 开发人员的注意事项

`jQuery.browser`和上的（几个）强制性词`jQuery.support`：

> ***`jQuery.browser`**包含用户代理的标志，从[navigator.userAgent](http://api.jquery.com/jQuery.browser/)读取。**我们建议不要使用此属性**；请尝试改用特征检测（请参阅 参考资料**`jQuery.support`**）。`jQuery.browser`可能会在 jQuery 的未来版本中移动到插件中。*
> 
> *`$.browser`与其使用检测当前用户代理并根据正在运行的浏览器更改页面呈现，不如**使用特征检测**。为了使这个过程更简单，jQuery 执行了许多这样的测试并设置[**`jQuery.support`**](http://api.jquery.com/jQuery.support/)对象的属性。*

故事的寓意：更新您的项目，消除对`jQuery.browser`. 要测试和查找您的项目过度依赖已弃用或删除的方法或属性的区域，请参阅[`jQuery-migrate`](https://github.com/jquery/jquery-migrate).

另请参阅[Modernizr.js](http://modernizr.com/)和[YepNope.js](http://yepnopejs.com/)以了解 jQUery 特征检测的替代方法。

* * *

一个要替换的 jQuery shim 文件`$.browser`，由 fancyBox-rails 项目提供：

```
// jQuery 1.9 has removed the `$.browser` property, fancybox relies on
// it, so we patch it here if it's missing.
// This has been copied from jQuery migrate 1.1.1.
if ( !jQuery.browser ) {
  var uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
      /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
      /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
      /(msie) ([\w.]+)/.exec( ua ) ||
      ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
      [];

    return {
      browser: match[ 1 ] || "",
      version: match[ 2 ] || "0"
    };
  };

  matched = uaMatch( navigator.userAgent );
  browser = {};

  if ( matched.browser ) {
    browser[ matched.browser ] = true;
    browser.version = matched.version;
  }

  // Chrome is Webkit, but Webkit is also Safari.
  if ( browser.chrome ) {
    browser.webkit = true;
  } else if ( browser.webkit ) {
    browser.safari = true;
  }

  jQuery.browser = browser;
} 
```

[https://github.com/hecticjeff/fancybox-rails/blob/master/vendor/assets/javascripts/jquery.browser.js](https://github.com/hecticjeff/fancybox-rails/blob/master/vendor/assets/javascripts/jquery.browser.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:29:46.153

您正在使用`quicksand`包含`code` `(i.e $.browser)`从`jQuery`version 开始删除的插件`1.9`。

# c - 函数调用后指针会发生什么

> ID：15540838
> 
> 赞同：1
> 
> 时间：2013-03-21T06:27:04.013
> 
> 标签：c, pointers, linked-list, function-pointers

当您有一个从一个指针结构指向另一个已分配内存的结构的指针时，函数调用后会发生什么？我之前问过一个关于结构的问题，导致我提出这个问题： [函数中结构指针的范围](https://stackoverflow.com/questions/15537890/scope-of-struct-pointers-in-functions?noredirect=1#comment22017504_15537890)

例如：

```
struct example{
//variables and pointers
struct clip *next;
}*Head 
```

然后我在函数中有一个数据类型结构的指针：

```
struct example *newNode=malloc(sizeof(struct example)); 
```

在同一个函数中，我将第一个节点（头）链接到第二个节点（新节点）：

```
Head->next=newNode; 
```

函数退出后链接/指向是否仍然存在？我不确定这是否有意义，但是当您在链表的末尾添加一个新节点时，您必须首先通过链表查看它的结束位置（下一个指针 = NULL）。

例如：

```
void insert_at_end(){
//We have a pointer cp that goes through the linked list, initially cp->next points to `null so we create a newnode right away`
//struct example cp and newnode gets malloc'd here

if(Head != NULL){
cp=Head;
while(cp->next !=NULL){
cp=cp->next;
}
cp->next=newNode;
else{

//We link the head to the newNode `because we don't want to change the head for each new node added.`
head=newNode;
}
} 
```

但是在列表末尾添加了每个 newNode 之后，我们退出了函数，那么当我们重新进入函数并通过链表查看它在哪里结束时会发生什么？它怎么知道 cp->next 指向什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:32:36.823

> 在列表末尾添加的每个 newNode 我们退出函数，那么当我们重新进入函数并通过链表查看它在哪里结束时会发生什么？

您`newnode`被添加到列表的末尾。此指针是列表的一部分，并且不是您的函数的本地指针。因此，当您重新输入该函数时，之前添加的节点仍然存在。

> 它怎么知道 cp->next 指向什么？

它知道该指向的位置，因为该位置存储在您的列表中。

* * *

在动态分配中，分配的内存保持分配状态，直到它被显式删除。因此，您的数据的存在与指针或函数无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:37:30.700

你应该记住的一件事是指针总是通过引用而不是通过值传递。因此，只要您不释放指针所持有的内存，它们就会保持不变（请注意这一点）。所以当你重新进入函数时，你总是可以参考你已经添加到链表中的节点。

但是，当您的程序退出或不需要它们时，您应该释放所有分配的指针。

# websphere - 带有 websphere 的 Spring sts

> ID：15540839
> 
> 赞同：0
> 
> 时间：2013-03-21T06:27:07.977
> 
> 标签：websphere

我正在尝试从 IBM 理性应用程序开发人员切换到 Spring STS。

我注意到的第一件事是，当我尝试定义 websphere 服务器运行时库时，它没有列出 websphere 应用程序服务器，因此我无法导入 websphere 库。我还注意到它不接受 websphere（在我的例子中是 websphere 5.1）作为目标运行时。

在 Spring STS 中可以做这两件事吗？

此外，如果在春季 STS 中不可能，是否有人推荐可能更适合这项工作的替代 IDE？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:36:35.397

一般的解决方案是安装[IBM WebSphere Application Server Developer Tools](http://marketplace.eclipse.org/content/ibm-websphere-application-server-v80-developer-tools#.UUtDyVckRtM) eclipse 插件。

另一种方法是使用[MyEclipse Blue](http://www.myeclipseide.com/blue/)，它仍然支持一些旧的 WAS 版本。

但是，对于 WebSphere 5.1，您就不走运了。没有人支持这个有 8 年历史的软件了。您真的应该认真考虑升级您的 WebSphere 安装或迁移到不同的较新的应用程序服务器。

**更新**

唔。只是想他们仍然列出 WAS5x 支持。但是我不会指望它。

# magento - 过滤过程完成后 Magento 显示属性选项

> ID：15540840
> 
> 赞同：2
> 
> 时间：2013-03-21T06:27:13.860
> 
> 标签：magento

我面临一个问题，我想在过滤过程完成后显示属性选项。

假设商店里有 3 种颜色

```
1 Read(5)
2 Blue(6)
3 Green(10) 
```

现在假设我从商店点击绿色（10）链接，它将显示所有包含绿色的产品，这是正确的，但是在获得过滤结果颜色选项后没有再次显示，但是当我点击清除所有链接时它会显示所有属性选项，但我不是这个！

而不是这个所有颜色选项应该在过滤过程完成后显示出来！

就像一旦我在过滤过程完成后单击绿色（10）链接，我想再次显示所有颜色选项！

与过滤前相同

像这样

```
1 Read(5)
2 Blue(6)
3 Green(10) 
```

有没有人知道如何做到这一点！

我很高兴等待您的宝贵回复。

提前致谢......

# python - 正确的库用法：请求 w/ bs4.BeautifulSoup？

> ID：15540841
> 
> 赞同：2
> 
> 时间：2013-03-21T06:27:15.020
> 
> 标签：python, tags, request, beautifulsoup, urllib2

我刚刚从`urllib2`用作我的 HTTP 访问库切换到使用该`request`库。在 urllib 中，您使用`BeautifulSoup`该函数来拉取 html 元素`findAll(tag='element')`，我是继续以相同的方式使用 BeautifulSoup 还是 request 具有简化此过程的函数？

* * *

使用 urllib2 拉取标签

* * *

```
import urllib2
from bs4 import BeautifulSoup as BS

response = urllib2.urlopen('http://stackoverflow.com/')
soup = BS(response)

for a in soup.findAll('a'):
    print a['href] 
```

* * *

使用请求拉取标签

* * *

```
import response

response = request.get('http://stackoverflow.com/')

for a in response.findAll('a'):
    print a['href] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:30:20.943

[request](https://pypi.python.org/pypi/requests)仅使从 URL 获取数据变得更容易，尤其是在存在重定向等情况下。它不会`HTML`为您解析正文，您仍然应该这样做`BeautifulSoup`并将其导入添加到您的第二个代码片段, 和类似的东西：

```
soup = BS(response.text) 
```

# mysql - SQL 函数 2 位数字格式

> ID：15540843
> 
> 赞同：2
> 
> 时间：2013-03-21T06:27:37.377
> 
> 标签：mysql, sql

是否有任何**SQL**函数可以将数字转换为两位数，所以我可以得到 01 为 1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T06:29:17.770

您需要将值转换为字符串。你可以用`LPAD()`这个，

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/9286)
*   [LPAD()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lpad)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T06:32:41.440

这将是：

```
SELECT LPAD(1, 2, '0'); 
```

## [现场演示](http://www.sqlfiddle.com/#!8/d41d8/42)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:33:44.610

有一种方法可以按照您的要求进行。这是一篇解释它的帖子，假设您使用的是 SQL Server

[通过在 SQL Server 中使用前导零填充来格式化数字](https://stackoverflow.com/questions/9520661/formatting-numbers-by-padding-with-leading-zeros-in-sql-server)

# android - 在android中的视图上呈现pdf的最佳方法

> ID：15540851
> 
> 赞同：2
> 
> 时间：2013-03-21T06:27:57.707
> 
> 标签：android, pdf, android-droidtext

我知道有很多图书馆不适合像 mupdf 这样的商业用途。我的公司是一家初创公司，没有能力花很多钱。我正在开发一个杂志应用程序。任何人都可以推荐一个好的开源库用于渲染单个 pdf，或者如果不可能的话，我应该更喜欢付费的哪一个？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:34:22.570

您可以将 webview 与 google 文档一起使用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<WebView
android:id="@+id/wv"
android:layout_width="fill_parent"
android:layout_height="fill_parent"/> 
```

```
 WebView wv= (WebView) findViewById(R.id.wv);
 wv.setVerticalScrollBarEnabled(true);
 wv.setHorizontalScrollBarEnabled(true);
 wv.getSettings().setBuiltInZoomControls(true);
 wv.getSettings().setJavaScriptEnabled(true);
 wv.setWebViewClient(new WebViewClient());
 wv.loadUrl("https://docs.google.com/file/d/0B8ZDVNCvRWK8c3YzQVFaWjg1bEU/edit")//pdf uploaded to google docs. Some cases requires users to login and requires permission of the owner of the doc. 
```

您可以使用意图。您的手机必须有 pdf 阅读器应用程序。

```
 File file = new File("/sdcard/example.pdf");
            if (file.exists()) {
                Uri path = Uri.fromFile(file);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(path, "application/pdf");
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                try {
                    startActivity(intent);
                } 
                catch (ActivityNotFoundException e) {
                    Toast.makeText(OpenPdf.this, 
                        "No Application Available to View PDF", 
                        Toast.LENGTH_SHORT).show();
                } 
```

[http://code.google.com/p/apv/source/checkout](http://code.google.com/p/apv/source/checkout)。APV PDF 查看器

[http://code.google.com/p/apdfviewer/](http://code.google.com/p/apdfviewer/)。APDF 查看器。

# spring-data - 不使用 jUnit 通过主类的服务层运行存储库方法

> ID：15540852
> 
> 赞同：0
> 
> 时间：2013-03-21T06:28:10.937
> 
> 标签：spring-data, spring-data-jpa

我想运行使用spring数据的存储库方法的服务层方法。在我的服务层主类中不使用junit我想测试服务层方法是否成功执行，但我无法在xml文件中给出正确的映射可以你请检查xml文件并告诉我错误，运行现有配置时出现以下错误

```
 21 Mar, 2013 11:44:23 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@2be9cb75: startup date [Thu Mar 21 11:44:23 IST 2013]; root of context hierarchy
21 Mar, 2013 11:44:23 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [application-context.xml]
21 Mar, 2013 11:44:24 AM org.springframework.jdbc.datasource.DriverManagerDataSource setDriverClassName
INFO: Loaded JDBC driver: com.mysql.jdbc.Driver
21 Mar, 2013 11:44:24 AM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'datasource' of type [class org.springframework.jdbc.datasource.DriverManagerDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
21 Mar, 2013 11:44:24 AM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@49bdc9d8: defining beans [datasource,entityManagerFactory,transactionManager,org.springframework.data.repository.core.support.RepositoryInterfaceAwareBeanPostProcessor#0,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,departmentService]; root of factory hierarchy
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [application-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No PersistenceProvider specified in EntityManagerFactory configuration, and chosen PersistenceUnitInfo does not specify a provider class name either
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:733)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:454)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.nousinfo.test.Testjava.main(Testjava.java:14)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [application-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No PersistenceProvider specified in EntityManagerFactory configuration, and chosen PersistenceUnitInfo does not specify a provider class name either
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:424)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:102)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 10 more
Caused by: java.lang.IllegalArgumentException: No PersistenceProvider specified in EntityManagerFactory configuration, and chosen PersistenceUnitInfo does not specify a provider class name either
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:250)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 25 more 
```

这是我的服务层

```
@Service
@Transactional
public class DepartmentServiceImpl implements DepartmentService {
    @Autowired
    DepartmentRepository departmentRepository;

    @Override
    public boolean createDepartment(DepartmentBO departmentBO) {
        boolean isCreate = false;
        Department department = departmentRepository
                .save(convertDepartmentBO2Department(departmentBO));
        if (department != null) {
            isCreate = true;
        }
        return isCreate;
    } 
```

这就是我尝试与主类一起运行的方式

```
 ApplicationContext applicationContext=new ClassPathXmlApplicationContext("application-context.xml");
         DepartmentServiceImpl departmentService = (DepartmentServiceImpl)applicationContext .getBean("departmentService");

         DepartmentBO departmentBO = new DepartmentBO();
         departmentBO.setDepartmentId("A1");
         departmentBO.setDepartmentName("ankur");
         departmentBO.setDepartmentLocation("nigeria");
         System.out.println(departmentService.createDepartment(departmentBO)); 
```

这是 application-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.2.xsd">

    <!-- Database -->
    <bean id="datasource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://192.168.25.30:3306/employee" />
        <property name="username" value="hr" />
        <property name="password" value="hr123" />
    </bean>

    <!-- Entity Manager -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource" />
        <property name="persistenceUnitName" value="EmployeeSpringdata" />
    </bean>

    <!-- Transaction Manager -->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <!-- Jpa Repositories -->
    <jpa:repositories base-package="com.nousinfo.tutorial.repository"></jpa:repositories>
    <bean id="departmentService"
        class="com.nousinfo.tutorial.repository.service.impl.DepartmentServiceImpl">
    </bean>
</beans> 
```

这是persistence.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="EmployeeSpringdata"
        transaction-type="RESOURCE_LOCAL">
        <class>com.nousinfo.tutorial.model.Department</class>
        <class>com.nousinfo.tutorial.model.Employee</class>
        <class>com.nousinfo.tutorial.model.EmployeeProject</class>
        <class>com.nousinfo.tutorial.model.EmployeeProjectPK</class>
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://192.168.25.30:3306/employee" />
            <property name="javax.persistence.jdbc.user" value="hr" />
            <property name="javax.persistence.jdbc.password" value="hr123" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="validate" />
            <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider" />
            <property name="jadira.usertype.autoRegisterUserTypes"
                value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:33:44.250

例外的原因很清楚：您定义了要使用的持久性提供程序。最简单的方法是将`HibernateJpaVendorAdapter`bean配置`jpaVendorAdapter`为`LocalContainerEntityManagerFactoryBean`.

# javascript - 我有几个与 call() 和 apply() 的使用有关的问题，或者在这个示例中如何调用这两种类型 Array() 和 Math

> ID：15540853
> 
> 赞同：3
> 
> 时间：2013-03-21T06:28:18.067
> 
> 标签：javascript, prototype

```
function multiMax(multi){
// Make an array of all but the first argument
var allButFirst = Array().slice.call( arguments, 1 );

// Find the largest number in that array of arguments
var largestAllButFirst = Math.max.apply( Math, allButFirst );

// Return the multiplied result
return multi * largestAllButFirst;
}
assert( multiMax(3, 1, 2, 3) == 9, "3*3=9 (First arg, by largest.)" ); 
```

来自[http://ejohn.org/apps/learn/#47](http://ejohn.org/apps/learn/#47)

我有两个问题要问任何人。

1.  为什么我们需要使用 Array().slice，而不是 Math().max。
2.  为什么我们使用 Array().slice，而不是 Array.prototype.slice（我注意到 Array.prototype.slice 会起作用，但我试图理解为什么我会使用一个而不是另一个，而不仅仅是在这种情况下，但在任何情况下）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:46:39.387

## 为什么我们需要使用 Array().slice，而不是 Math().max？

`Array()`用于代替的原因`Array.prototype`是因为在此特定情况下，一个是另一个的简写。

首先：与它们`Array().slice.call(arguments, 1);`具有相同的效果`[].slice.call(arguments, 1);`：

*   [是否合法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)
*   [正在创建一个 Array 的新实例，然后利用该新实例的 slice 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)
*   可以用作“速记”`Array.prototype.slice.call(arguments, 1);`

因此，要回答您的第一个问题，他们“不需要”在那里使用它。它只是由于偏好而在那里使用。`Array.prototype.slice.call(arguments, 1);`or`[].slice.call(arguments, 1);`可以被替换，并且该功能仍然按预期工作。

至于`Math.max.apply(Math, allButFirst);`,`Math`不是一个“类” `Array`，因为`Math`它不能实例化对象（试试看）。由于它不能被实例化，它的语法访问或操作方式与`Array()`/不同`[]`。

那也应该回答你的第二个问题。

正如 bmceldowney 所说，通常不会调用没有`new`关键字的构造函数。虽然合法，但我（个人）看到这让我很恼火，而且我也不认为这是现实生活中的好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:46:06.387

我最好的镜头：

1.  Array() 将返回一个空数组实例，而 Array 只是一个构造函数。Array.slice 不起作用，因为 .slice 方法仅存在于数组实例上，通过它们的原型。Math 不是构造函数，它是一个具有许多实用方法的对象，其中一个是 max。

2.  除了简洁之外，我不确定 Array().slice 和 Array.prototype.slice 之间是否存在很大差异，您发布的代码似乎对此非常重视。

您通常不会看到故意在没有“new”关键字的情况下调用构造函数，我认为这不是很好的做法。这绝对是聪明的代码，这通常意味着不太可维护。

# command-line - 创建无头远程桌面连接

> ID：15540856
> 
> 赞同：3
> 
> 时间：2013-03-21T06:28:31.677
> 
> 标签：command-line, rdp, headless

我希望通过 RDP 自动部署内容。当前设置涉及手动 RDP 到机器，将文件复制到它，并将其移动到位。一旦在远程机器上，我可以轻松地编写将内容按摩到位的脚本，但是如何编写建立 RDP 会话并启动远程脚本的脚本呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T19:30:59.840

看来远程桌面只能交互使用。不过，Powershell Remoting 似乎实现了目标。

# git - Git重置不起作用

> ID：15540862
> 
> 赞同：8
> 
> 时间：2013-03-21T06:28:50.950
> 
> 标签：git, git-reset

我进行了一次提交，提取并合并了一些更改，然后进行了第二次提交。当我想回到第一个提交时，我运行了命令

```
git reset --hard <sha hash> 
```

虽然响应是“HEAD 现在位于 <sha hash>”，但我的代码看起来与运行该命令之前一样。通常，它会更改为我以前的内容，但看起来有些东西无法正常工作。在重置头部之前，我是否需要运行不同的命令来取消合并？

* * *

### 额外信息

当我运行`git status`它说：

> app/assets/images/.DS_Store.orig 未追踪

我可以添加它。

根据`git reflog`，我在提交 hash1 之前拉了（我认为是“在合并之前”）。拉动有一个 sha hash2（`git log`未显示）。当我挖掘 hash1 和 hash2 时，我看到了我所做的更改，并且可以从中重建我的原始代码。不过，这似乎很奇怪。如果我尝试`git reset`使用其中任何一个，我将无法从合并之前获取我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-29T15:56:10.743

这：

```
git reset --hard <sha-hash> 
```

在以下情况下不起作用：

*   您正在尝试重置未跟踪的文件（它们不是您的 git 存储库的一部分），
*   某些属性被您的 git 规范化文件 ( [`.gitattributes`](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)) 覆盖，
*   您使用了错误的哈希或哈希在您的更改之后。

也许解决方案是通过以下方式返回远程分支上的内容：

```
git reset origin/master --hard 
```

并`rebase`在它之上或`git cherry-pick`你真正需要的提交上散列。

如果以上没有帮助，您还应该：

*   确保在正确的分支 ( `git branch -a`) 上测试它，而不是在分离的分支上，
*   检查`git reflog`有关您的历史记录的更多详细信息，
*   运行`git blame some/file`以显示您的代码行在哪个版本被修改，这可以帮助您跟踪提交代码时出现的问题，就像您不期望的那样，
*   如果您不喜欢之前做出的特定提交，您可以`revert`这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T06:37:13.217

我不使用命令行进行重置，因为 gitk（分支查看器）可以做到这一点。有时重置不起作用。然后我删除所有目录，只留下 .git 文件夹。经常发生某些工作文件无法删除的情况。这就是 git 无法重置的问题。您必须关闭保留文件的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T05:48:09.897

I am sure the sha1 value you put in 'git reset --hard ' is the HEAD. If you want to reset the HEAD to the first commit,you should run command like this:

```
git reset --hard <first commit's sha1 value> 
```

or:

```
git reset --hard <HEAD~1> 
```

this site maybe help you to know how 'git reset' work:[git-reset](http://git-scm.com/blog/2011/07/11/reset.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T04:44:39.950

我认为您应该输入第二次提交的 SHA 的前 7 个字符，而不是第一个。例如，您有 2 个提交：

提交 212323b232g2h3jj232j323kkk23 作者： 日期： ...11:40 PM ...

提交 abcdefb232g2h3kk239j183kkk24 作者： 日期： ...10:00 PM ...

如果你想重置你应该输入的第一个提交： git reset abcdefb

# java - ActivityNotFoundException 由于错误的命名空间？

> ID：15540867
> 
> 赞同：0
> 
> 时间：2013-03-21T06:29:17.833
> 
> 标签：java, android, exception, android-activity

我想开始这样的活动：

```
Intent intent = new Intent(this, FeedbackActivity.class);
activity.startActivity(intent); 
```

在我的清单中，我宣布了这项活动：

```
<activity
        android:name=".FeedbackActivity"
        android:parentActivityName="de.fun4mobile.jumba.GameActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="de.fun4mobile.jumba.GameActivitry" />
    </activity> 
```

我仍然得到上面提到的 ActivityNotFoundException：

> 找不到明确的活动类 {de.fun4mobile.jumba/de.fun4mobile.jumba.FeedbackActivity}；您是否在 AndroidManifest.xml 中声明了此活动？

很明显，活动的路径/命名空间在某种程度上是错误的（重复）。但为什么会这样呢？我的清单中有错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:35:57.807

需要检查您的 src 包名是否与清单中提到的包名相同。只有这样`.FeedbackActivity`才能奏效。否则你必须写整个路径`src_package.filename`

例如

如果你的 src 包名是 com.example 并且你的文件名是 A 并且你的清单包名也是 com.example 那么`android:name=.A`就可以了。

但是说你的清单包是 com.example2 那么你必须写

```
android:name=com.example.A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:19:45.797

```
android:value="de.fun4mobile.jumba.GameActivitry" 
```

那里没有`GameActivitry`错字吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:32:21.507

```
<activity android:name=".FeedbackActivity">
    <!-- ... -->
</activity> 
```

只需在清单中尝试这么多，然后我想我们就可以知道这是否有任何问题。

# r - R tcltk：更改 tkmessage 的图标

> ID：15540868
> 
> 赞同：0
> 
> 时间：2013-03-21T06:29:36.483
> 
> 标签：r

有谁知道是否有办法更改 tkmessage 的图片图标？我知道有一种方法可以使用 tcl 更改整个面板的图标，但是消息框呢？例如，我可以将“Tk”图标更改为其他内容吗？

![在此处输入图像描述](../Images/c2e28530c26ba060c6aa230c95bc8276.png)

谢谢！DD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:56:29.167

我没有看到任何用于更改消息框中图标的选项。消息框功能是一个非常简单的，用于快速消息的选项工具。如果您想要比它提供的更多功能（即更改该图标的选项），那么您可以创建自己的带有标签和按钮的对话框来完成这项工作，并以常规窗口的方式更改图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T17:13:36.703

kico = 'myicon.ico' # 在哪里我们有一个我们更喜欢使用的图标而不是 tkinter icon 哪个图标文件

# 我下载了位图图标（可能是 ibm）

# ...在建立根窗口的地方我可能有这个

from Tkinter import * root = Tk() root.wm_iconbitmap(kico) # 这似乎覆盖在主应用程序和所有子窗口 tkinter 对话框等中

# ...覆盖例如 tkMessageBox.askokcancel 对话框中的 tkinter 图标

# sql - 从 2008 年切换到 vb.net 2003 时不是 windows.forms.datagrid 的成员

> ID：15540877
> 
> 赞同：0
> 
> 时间：2013-03-21T06:30:05.027
> 
> 标签：sql, vb.net, datagrid, visual-studio-2003

```
Dim sqlsyntax As String
        Dim result As String

        sqlsyntax = "INSERT INTO tblOfficeEquipmentProfile(OE_ID, OE_Category,OE_SubCategory, OE_Name, OE_User, OE_Brand, OE_Model, OE_Specs, OE_SerialNo, OE_PropertyNo, OE_Static_IP, OE_Vendor, OE_PurchaseDate, OE_WarrantyInclusiveYear, OE_WarrantyStatus, OE_Status, OE_Dept_Code,OE_Location_Code,OE_Remarks)" _
                 & "VALUES(@OE_ID,@OE_Category,@OE_SubCategory,@OE_Name,@OE_User,@OE_Brand,@OE_Model,@OE_Specs,@OE_SerialNo,@OE_PropertyNo,@OE_Static_IP,@OE_Vendor,@OE_PurchaseDate,@OE_WarrantyInclusiveYear,@OE_WarrantyStatus,@OE_Status,@OE_Dept_Code,@OE_Location_Code,@OE_Remarks)"
        Dim adapter As SqlDataAdapter

        adapter.InsertCommand = New SqlCommand(sqlsyntax, sqlconn)

        adapter.InsertCommand.Parameters.Add("@OE_ID", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Category", SqlDbType.Char)
        adapter.InsertCommand.Parameters.Add("@OE_SubCategory", SqlDbType.Char)
        adapter.InsertCommand.Parameters.Add("@OE_Name", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_User", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Brand", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Model", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Specs", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_SerialNo", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_PropertyNo", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Static_IP", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Vendor", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_PurchaseDate", SqlDbType.SmallDateTime)
        adapter.InsertCommand.Parameters.Add("@OE_WarrantyInclusiveYear", SqlDbType.Int)
        adapter.InsertCommand.Parameters.Add("@OE_WarrantyStatus", SqlDbType.Char)
        adapter.InsertCommand.Parameters.Add("@OE_Status", SqlDbType.VarChar)
        adapter.InsertCommand.Parameters.Add("@OE_Dept_Code", SqlDbType.Char)
        adapter.InsertCommand.Parameters.Add("@OE_Location_Code", SqlDbType.Char)
        adapter.InsertCommand.Parameters.Add("@OE_Remarks", SqlDbType.VarChar)

        For i As Integer = 0 To DataGrid1.VisibleRowCount - 1
            'adapter.InsertCommand.Parameters(0).Value = Convert.ToInt32(txtEmpID.Text.Trim)
            adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).GetType
            adapter.InsertCommand.Parameters(1).Value = DataGrid1(i, 1).GetType
            adapter.InsertCommand.Parameters(2).Value = DataGrid1(i, 2).GetType
            adapter.InsertCommand.Parameters(3).Value = DataGrid1(i, 3).GetType
            adapter.InsertCommand.Parameters(4).Value = DataGrid1(i, 4).GetType
            adapter.InsertCommand.Parameters(5).Value = DataGrid1(i, 5).GetType
            adapter.InsertCommand.Parameters(6).Value = DataGrid1(i, 6).GetType
            adapter.InsertCommand.Parameters(7).Value = DataGrid1(i, 7).GetType
            adapter.InsertCommand.Parameters(8).Value = DataGrid1(i, 8).GetType
            adapter.InsertCommand.Parameters(9).Value = DataGrid1(i, 9).GetType
            adapter.InsertCommand.Parameters(10).Value = DataGrid1(i, 10).GetType
            adapter.InsertCommand.Parameters(11).Value = DataGrid1(i, 11).GetType
            adapter.InsertCommand.Parameters(12).Value = DataGrid1(i, 12).GetType
            adapter.InsertCommand.Parameters(13).Value = DataGrid1(i, 13).GetType
            adapter.InsertCommand.Parameters(14).Value = DataGrid1(i, 14).GetType
            adapter.InsertCommand.Parameters(15).Value = DataGrid1(i, 15).GetType
            adapter.InsertCommand.Parameters(16).Value = DataGrid1(i, 16).GetType
            adapter.InsertCommand.Parameters(17).Value = DataGrid1(i, 17).GetType
            adapter.InsertCommand.Parameters(18).Value = DataGrid1(i, 18).GetType

            result = adapter.InsertCommand.ExecuteNonQuery()
            MsgBox("success fully added")
            adapter.InsertCommand.Parameters.Clear()
        Next 
```

先生，我将代码修改为以下 sql 数据，

但在这里返回错误

---->adapter.InsertCommand = New SqlCommand(sqlsyntax, sqlconn)

错误：EOEHR.exe 中出现“System.NullReferenceException”类型的未处理异常

附加信息：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:42:24.757

据我所知， a`DataGrid`通过 indexing 访问单元格`MyDataGrid(RowIndex, ColumnIndex)`，就像数组一样。这允许您获取或设置指定单元格的值作为对象，然后您可能必须或可能不必将其转换为适当的类型。

`.Row(Index)`不适用于此控件，也不适用`.Column(Index)`，因为似乎没有为这些对象中的任何一个公开一个集合。

您可以尝试将代码更改为：

```
For i As Integer = 0 To 'Get the table from the data source here and loop through that instead of just looping through the datagrid.
     adapter.InsertCommand.Parameters(0).Value = Convert.ToInt32(txtEmpID.Text.Trim)
     adapter.InsertCommand.Parameters(1).Value = grdFamily(i, 0).ToString()
     adapter.InsertCommand.Parameters(2).Value = grdFamily(i, 1).ToString()
     adapter.InsertCommand.Parameters(3).Value = grdFamily(i, 2).ToString()
     adapter.InsertCommand.Parameters(4).Value = grdFamily(i, 3).ToString()

     result = adapter.InsertCommand.ExecuteNonQuery()
     adapter.InsertCommand.Parameters.Clear() 
```

注意我不知道你的数据类型是什么，所以我不能在这个示例中转换为适当的类型。

更新：

刚刚意识到您的代码是在 C# 中，而我的答案是在 VB.Net 中，我更新为我认为正确的 C# 语法。

更新2：

不确定您使用的是 C# 还是 VB.NET，您似乎同时使用了两者，因此再次更新对 VB.Net 的回答以反映您的问题标签。

更新 3：

好的，在做了一些研究之后，你试图通过数据网格做的事情似乎很复杂。正如@Dai 在对您的问题的评论中建议的那样，您真的应该得到 VS2012 Express。

在任何情况下，如果您打算在 .NET 1.1 中执行 ti，那么您应该真正掌握`DataTable`用于填充数据网格并循环遍历它的方法，因为它更简单。您可以在互联网上找到许多资源，它们会告诉您如何做到这一点。

我真的无法为您提供比这更多的帮助。老实说，我认为这是一个很好的答案，除非这里有人手头有一些遗留代码或仍然记得 .Net 1.1 并愿意为您重写代码。

# wifi - WIFI直连和WIFI站可以同时工作吗？

> ID：15540884
> 
> 赞同：19
> 
> 时间：2013-03-21T06:30:46.873
> 
> 标签：wifi, wifi-direct

据我所知，基本上 WIFI 直连是由软 AP 启用的。我的问题：底层WIFI模块可以同时作为一个WIFI站和一个WIFI直连端点工作吗？也就是说，我们希望 WIFI 模块可以通过 WIFI 直接与手机通信，同时作为 WIFI 站连接到路由器。是否可以？以及这种情况在技术上的支持程度如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T10:17:11.983

如果您的 wifi 驱动程序支持*多角色*，则可以。此功能在某些 wifi 芯片（例如 TI 的*wl1271*）中可用，允许您将一个 wifi 芯片用于不同的角色。

我们在我们的一个产品中使用此功能来维护一个接入点，同时仍然能够同时连接到另一个 wifi 站。该产品在带有 OMAP 3.0 Linux 内核的 Android 4.0.4 上运行。

有关这方面的更多信息，您可以检查您的芯片是否存在这样的驱动程序，并查看我在 Stackoverflow 上创建的[这篇文章](https://stackoverflow.com/questions/12499456/multiplexed-hotspot-in-android)，其中我提供了使用我们的无线芯片实现的详细信息。

# c# - 过滤 Linq 除了属性

> ID：15540891
> 
> 赞同：57
> 
> 时间：2013-03-21T06:31:14.597
> 
> 标签：c#, linq

这可能看起来很傻，但是我发现`Except`在 linq 中使用的所有示例都使用两个列表或数组，它们只有字符串或整数，并根据匹配项过滤它们，例如：

```
var excludes = users.Except(matches); 
```

我想使用 exclude 来保持我的代码简短，但似乎无法找到如何执行以下操作：

```
class AppMeta
{
    public int Id { get; set; }
}

var excludedAppIds = new List<int> {2, 3, 5, 6};
var unfilteredApps = new List<AppMeta>
                         {
                           new AppMeta {Id = 1},
                           new AppMeta {Id = 2},
                           new AppMeta {Id = 3},
                           new AppMeta {Id = 4},
                           new AppMeta {Id = 5}
                         } 
```

如何获得`AppMeta`筛选后的列表`excludedAppIds`？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-21T06:33:46.773

尝试一个简单的 where 查询

```
var filtered = unfilteredApps.Where(i => !excludedAppIds.Contains(i.Id)); 
```

except 方法使用相等，您的列表包含不同类型的对象，因此它们包含的所有项目都不会相等！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-21T06:39:30.457

ColinE 的回答简单而优雅。如果您的列表较大并且如果排除的应用程序列表已排序，`BinarySearch<T>`则可能会比`Contains`.

**例子：**

```
unfilteredApps.Where(i => excludedAppIds.BinarySearch(i.Id) < 0); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-04T00:29:12.773

我使用了Except 的扩展方法，它允许您将Apples 与Oranges 进行比较，只要它们都具有可用于比较它们的共同点，例如Id 或Key。

```
public static class ExtensionMethods
{
    public static IEnumerable<TA> Except<TA, TB, TK>(
        this IEnumerable<TA> a,
        IEnumerable<TB> b,
        Func<TA, TK> selectKeyA,
        Func<TB, TK> selectKeyB, 
        IEqualityComparer<TK> comparer = null)
    {
        return a.Where(aItem => !b.Select(bItem => selectKeyB(bItem)).Contains(selectKeyA(aItem), comparer));
    }
} 
```

然后像这样使用它：

```
var filteredApps = unfilteredApps.Except(excludedAppIds, a => a.Id, b => b); 
```

该扩展与 ColinE 的答案非常相似，它只是打包成一个整洁的扩展，可以重复使用而无需太多的精神开销。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-04-17T12:14:29.783

这就是 LINQ 需要的

```
public static IEnumerable<T> Except<T, TKey>(this IEnumerable<T> items, IEnumerable<T> other, Func<T, TKey> getKey) 
{
    return from item in items
            join otherItem in other on getKey(item)
            equals getKey(otherItem) into tempItems
            from temp in tempItems.DefaultIfEmpty()
            where ReferenceEquals(null, temp) || temp.Equals(default(T))
            select item; 
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-21T06:36:56.287

从排除列表构造 a`List<AppMeta>`并使用 except Linq 运算符。

```
var ex = excludedAppIds.Select(x => new AppMeta{Id = x}).ToList();                           
var result = ex.Except(unfilteredApps).ToList(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-01T23:30:59.240

我喜欢 except 扩展方法，但原始问题没有对称密钥访问，我更喜欢包含（或任何变体）加入，因此完全归功于[azuneca 的回答](https://stackoverflow.com/a/29698933/2557128)：

```
public static IEnumerable<T> Except<T, TKey>(this IEnumerable<TKey> items,
    IEnumerable<T> other, Func<T, TKey> getKey) {

    return from item in items
        where !other.Contains(getKey(item))
        select item;
} 
```

然后可以像这样使用：

```
var filteredApps = unfilteredApps.Except(excludedAppIds, ua => ua.Id); 
```

此外，此版本允许使用 Select 为异常 IEnumerable 进行映射：

```
var filteredApps = unfilteredApps.Except(excludedApps.Select(a => a.Id), ua => ua.Id); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-13T19:51:45.733

MoreLinq 有一些对这个 MoreLinq.Source.MoreEnumerable.ExceptBy 有用的东西

[https://github.com/gsscoder/morelinq/blob/master/MoreLinq/ExceptBy.cs](https://github.com/gsscoder/morelinq/blob/master/MoreLinq/ExceptBy.cs)

```
namespace MoreLinq
{
    using System;
    using System.Collections.Generic;
    using System.Linq;

    static partial class MoreEnumerable
    {
        /// <summary>
        /// Returns the set of elements in the first sequence which aren't
        /// in the second sequence, according to a given key selector.
        /// </summary>
        /// <remarks>
        /// This is a set operation; if multiple elements in <paramref name="first"/> have
        /// equal keys, only the first such element is returned.
        /// This operator uses deferred execution and streams the results, although
        /// a set of keys from <paramref name="second"/> is immediately selected and retained.
        /// </remarks>
        /// <typeparam name="TSource">The type of the elements in the input sequences.</typeparam>
        /// <typeparam name="TKey">The type of the key returned by <paramref name="keySelector"/>.</typeparam>
        /// <param name="first">The sequence of potentially included elements.</param>
        /// <param name="second">The sequence of elements whose keys may prevent elements in
        /// <paramref name="first"/> from being returned.</param>
        /// <param name="keySelector">The mapping from source element to key.</param>
        /// <returns>A sequence of elements from <paramref name="first"/> whose key was not also a key for
        /// any element in <paramref name="second"/>.</returns>

        public static IEnumerable<TSource> ExceptBy<TSource, TKey>(this IEnumerable<TSource> first,
            IEnumerable<TSource> second,
            Func<TSource, TKey> keySelector)
        {
            return ExceptBy(first, second, keySelector, null);
        }

        /// <summary>
        /// Returns the set of elements in the first sequence which aren't
        /// in the second sequence, according to a given key selector.
        /// </summary>
        /// <remarks>
        /// This is a set operation; if multiple elements in <paramref name="first"/> have
        /// equal keys, only the first such element is returned.
        /// This operator uses deferred execution and streams the results, although
        /// a set of keys from <paramref name="second"/> is immediately selected and retained.
        /// </remarks>
        /// <typeparam name="TSource">The type of the elements in the input sequences.</typeparam>
        /// <typeparam name="TKey">The type of the key returned by <paramref name="keySelector"/>.</typeparam>
        /// <param name="first">The sequence of potentially included elements.</param>
        /// <param name="second">The sequence of elements whose keys may prevent elements in
        /// <paramref name="first"/> from being returned.</param>
        /// <param name="keySelector">The mapping from source element to key.</param>
        /// <param name="keyComparer">The equality comparer to use to determine whether or not keys are equal.
        /// If null, the default equality comparer for <c>TSource</c> is used.</param>
        /// <returns>A sequence of elements from <paramref name="first"/> whose key was not also a key for
        /// any element in <paramref name="second"/>.</returns>

        public static IEnumerable<TSource> ExceptBy<TSource, TKey>(this IEnumerable<TSource> first,
            IEnumerable<TSource> second,
            Func<TSource, TKey> keySelector,
            IEqualityComparer<TKey> keyComparer)
        {
            if (first == null) throw new ArgumentNullException("first");
            if (second == null) throw new ArgumentNullException("second");
            if (keySelector == null) throw new ArgumentNullException("keySelector");
            return ExceptByImpl(first, second, keySelector, keyComparer);
        }

        private static IEnumerable<TSource> ExceptByImpl<TSource, TKey>(this IEnumerable<TSource> first,
            IEnumerable<TSource> second,
            Func<TSource, TKey> keySelector,
            IEqualityComparer<TKey> keyComparer)
        {
            var keys = new HashSet<TKey>(second.Select(keySelector), keyComparer);
            foreach (var element in first)
            {
                var key = keySelector(element);
                if (keys.Contains(key))
                {
                    continue;
                }
                yield return element;
                keys.Add(key);
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2015-10-25T16:18:21.067

```
public static class ExceptByProperty
{
    public static List<T> ExceptBYProperty<T, TProperty>(this List<T> list, List<T> list2, Expression<Func<T, TProperty>> propertyLambda)
    {
        Type type = typeof(T);

        MemberExpression member = propertyLambda.Body as MemberExpression;

        if (member == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a method, not a property.",
                propertyLambda.ToString()));

        PropertyInfo propInfo = member.Member as PropertyInfo;
        if (propInfo == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a field, not a property.",
                propertyLambda.ToString()));

        if (type != propInfo.ReflectedType &&
            !type.IsSubclassOf(propInfo.ReflectedType))
            throw new ArgumentException(string.Format(
                "Expresion '{0}' refers to a property that is not from type {1}.",
                propertyLambda.ToString(),
                type));
        Func<T, TProperty> func = propertyLambda.Compile();
        var ids = list2.Select<T, TProperty>(x => func(x)).ToArray();
        return list.Where(i => !ids.Contains(((TProperty)propInfo.GetValue(i, null)))).ToList();
    }
}

public class testClass
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

为了测试这个：

```
 List<testClass> a = new List<testClass>();
        List<testClass> b = new List<testClass>();
        a.Add(new testClass() { ID = 1 });
        a.Add(new testClass() { ID = 2 });
        a.Add(new testClass() { ID = 3 });
        a.Add(new testClass() { ID = 4 });
        a.Add(new testClass() { ID = 5 });

        b.Add(new testClass() { ID = 3 });
        b.Add(new testClass() { ID = 5 });
        a.Select<testClass, int>(x => x.ID);

        var items = a.ExceptBYProperty(b, u => u.ID); 
```

# c++ - C++ exe加密？

> ID：15540901
> 
> 赞同：7
> 
> 时间：2013-03-21T06:31:42.817
> 
> 标签：c++, encryption

我是否需要加密 Microsoft Visual C++ 编译器为我制作的 exe 文件？我有一个用几个库制作的游戏，我已经加密了所有资源，但我担心有人闯入 exe 并更改代码，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T06:37:07.687

没有办法制作无法破解的软件。如果它在用户机器上，理论上用户可以完全控制它。

你可以尝试做的是让人们更难破解。您要查找的内容称为[“可执行压缩”](http://en.wikipedia.org/wiki/Executable_compression)。犰狳做这样的事情，UPX 也是如此。

可以在[此处](http://en.wikipedia.org/wiki/Executable_compression#Portable_Executable)找到 PE 格式打包程序的完整列表。

要加密压缩资源，您可以使用具有支持加密的存档格式的[LZMA SDK 。](http://www.7-zip.org/sdk.html)请注意您尝试隐藏该加密密钥的位置。正如他们所说，“你可以跑，但你不能隐藏”:)

欢迎来到丑陋的 DRM 世界。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:45:32.837

无论您将使用哪种技术，如果您将可执行文件和资源都发送给最终用户，并且如果值得，它们最终**将**被破解，您对此无能为力。您可能只会使解密过程更加困难，但提高安全性只会影响合法用户，并且您会浪费时间，您可以将这些时间花在改进软件上。

苹果程序员肯定比你我好，但他们所有的 iPhone 最终都被越狱了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:38:54.043

这没有多大意义。为了执行程序，它必须在内存中解密，因此解密的代码将在内存中，可以从中转储。

但是，您可以对可执行文件进行签名（有关详细信息，您可以阅读[本文](http://msdn.microsoft.com/en-us/library/ms537361%28v=vs.85%29.aspx)）。当可执行文件被签名时，它受到完整性保护，最好的部分是大多数操作系统都支持这一点，包括 Windows。如果可执行文件被修改，操作系统可以检测到篡改并且不会启动它（或至少警告用户）。

# javascript - 如何从json中仅获取数字键值对

> ID：15540904
> 
> 赞同：2
> 
> 时间：2013-03-21T06:31:49.417
> 
> 标签：javascript, jquery, regex, json

我有这样的 Json 数据

```
{
   "info":[
      {
         "Name":"Noob Here",
         "Major":"Language",
         "Sex":"Male",
         "English":"15",
         "Japanese":"5",
         "Calculus":"0",
         "Geometry":"20"
      },
      {
         "Name":"Noob Here",
         "Major":"Calculus",
         "Sex":"Female",
         "English":"0.5",
         "Japanese":"40",
         "Calculus":"20",
         "Geometry":"05"
      }
   ]
} 
```

我只需要获取值为数值数据的键值对。

预期产出

```
{
"English":"15",
"Japanese":"5",
"Calculus":"0",
 "Geometry":"20"
},
{
 "English":"0.5",
"Japanese":"40",
"Calculus":"20",
"Geometry":"05"
} 
```

是否有任何插件或者我应该使用正则表达式为它编写长 jquery 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:04:32.340

使用 jquery`isNumeric`来查找是否为数字..然后使用对象和数组..您需要两个循环来获取对象...

干得好..

```
var finalObj={};  //this is final output object
var info = [];  //array to push to finalObj
$.each(data.info,function(i,v){
  var object={};
  $.each(v,function(i1,val1){
    if($.isNumeric(val1)){

        object[i1]=val1
    }
  });
  info.push(object);
});
finalObj['info']=info;
console.log(finalObj); 
```

[在这里摆弄](http://jsfiddle.net/bipen/en843/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:43:51.703

您可以解析该值，`parseInt`如果它是整数，则选择它。

test 等于要发布的 json 对象。

```
var obj = test.info[0];
for (var key in obj) {
if(!isNaN(parseInt(obj[key]))){
    alert(JSON.stringify(key));
         }
} 
```

[http://jsfiddle.net/btevfik/gQfAN/](http://jsfiddle.net/btevfik/gQfAN/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:57:11.470

您可以编写一个辅助函数。只需传入您的 Json 对象并遍历每个字段。正则表达式是直截了当的。

```
var regex = new RegExp("\d*\.?\d"); 
var result = regex.test("yourvalue"); 
```

如果结果为真，则为数字。编译你的结果并返回一个 Json 对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T07:06:17.133

试试这个：

```
var data={
    "info":[
          {
             "Name":"Noob Here",
             "Major":"Language",
             "Sex":"Male",
             "English":"15",
             "Japanese":"5",
             "Calculus":"0",
             "Geometry":"20"
          },
          {
             "Name":"Noob Here",
             "Major":"Calculus",
             "Sex":"Female",
             "English":"0.5",
             "Japanese":"40",
             "Calculus":"20",
             "Geometry":"05"
          }
       ]
};
var newarr=[];

$(data.info).each(function(index,value){
    arr=new Object();
    $(Object.keys(value)).each(function(ind,val){
        if($.isNumeric(value[val]))
        {
            arr[val]=value[val];
        }
    });
    newarr.push(arr);

});
console.log(newarr); 
```

**小提琴** [http://jsfiddle.net/RyVds/2/](http://jsfiddle.net/RyVds/2/)

检查`Object.keys()`阅读[http://msdn.microsoft.com/en-us/library/ie/ff688127%28v=vs.94%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ff688127%28v=vs.94%29.aspx)和[https://developer.mozilla.org/en-US/docs/JavaScript /参考/Global_Objects/对象/键](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T07:03:02.557

您可以遍历每个对象上的键并尝试 parseInt 值。如果它是一个字符串，它将返回 NaN。

```
for (var i = 0; i < obj.info.length; i++) {
  var tmp = {};
  keys = Object.keys(obj.info[i]);
  console.log(keys);
  for (var j = 0; j < keys.length; j++) {
    if (parseInt(obj.info[i][keys[j]])) {
      tmp[keys[j]] = obj.info[i][keys[j]];
    }
  } 
```

完整代码在 jsfiddle 上：

[http://jsfiddle.net/wXBKd/1/](http://jsfiddle.net/wXBKd/1/)

# php - 在关联数组列表php中向上或向下移动项目

> ID：15540906
> 
> 赞同：0
> 
> 时间：2013-03-21T06:32:08.317
> 
> 标签：php, arrays

嗨，我想知道**我可以做些什么来将关联数组中的项目“向上或向下”移动一个，例如对于这个数组：**

```
 Array ( [list] => 
      Array ( [Name1] => 1, 
              [Name2] => 1, 
              [Name3] => 1, 
              [Name4] => 1, 
              [Name5] => 1,  )
 ) 
```

我知道如何以`non-associative array`这种方式做到这一点：

```
 $a = array('a','b','c','d','e');

   function down($a,$x) {
     if( count($a)-1 > $x ) {
    $b = array_slice($a,0,$x,true);
    $b[] = $a[$x+1];
    $b[] = $a[$x];
    $b += array_slice($a,$x+2,count($a),true);
    return($b);
     } else { 
            return $a; 
         }
   }

 function up($a,$x) {
   if( $x > 0 and $x < count($a) ) {
    $b = array_slice($a,0,($x-1),true);
    $b[] = $a[$x];
    $b[] = $a[$x-1];
    $b += array_slice($a,($x+1),count($a),true);
    return($b);
   } else { 
            return $a; 
       }
 }

  //Use 

  // Move item 4 up
  print_r(up($a,4)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:44:34.943

试试这个代码

```
$array=array(0=>'name1', 1=>'name2', 2=>'name3', 3=>'name4', 4=>'name5');

function moveElement(&$array, $a, $b) {
    $out = array_splice($array, $a, 1);
    array_splice($array, $b, 0, $out);
}
moveElement($array, 3, 1);

print_r($array);

Result :

Array ( [0] => name1 [1] => name4 [2] => name2 [3] => name3 [4] => name5 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:49:09.890

根据您的查询，您想在关联数组中输入值，如下所示在关联数组中，每个值都使用一个键，它就像一个值的数字。

```
$key => $value 
```

假设`key`is`1`和 value 就是`'Mohit'` 这样`1 => Mohit` ，你的查询需要一个变量`$key=0`；然后`$value`是一个值数组，例如

```
$value = { 'Mohit','Nick','John' }

$key=0;
foreach($value as $val)
{
    $key => $val;
    $key++;
} 
```

像这样我们可以创建一个新的关联数组。

# grails - 更改 Grails 默认 index.gsp 页面？

> ID：15540915
> 
> 赞同：0
> 
> 时间：2013-03-21T06:32:43.187
> 
> 标签：grails, gsp

我想用我设计的 1 更改 grails 默认索引页面。在我新创建的包含 CSS 的 gsp 文件中，还有没有写在 .gsp 文件中的 CSS，它在它的外面。当我试图放我在应用程序视图文件夹中的 css 文件和索引文件，当我运行应用程序时，它没有正确显示，显示错误

![在此处输入图像描述](../Images/53d36ee72bc8b0502bb7520fcd6b5e80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:42:29.453

1.  您应该将`.css`文件放入`web-app/css`目录
2.  使用[`<g:resource`标签](http://grails.org/doc/latest/ref/Tags/resource.html)为此类资源创建有效的 url（正确的 url 将是`/prqapp/css/base.css`，而不仅仅是 a `/css/base.css`）。

因此，您的代码应如下所示：

```
<link type="text/css" href="${resource(dir: 'css', file: 'base.css')}" />
<link type="text/css" href="${resource(dir: 'css', file: 'layout.css')}" />
<link type="text/css" href="${resource(dir: 'css', file: 'skeleton.css')}" /> 
```

请参阅文档

*   g:资源标签[http://grails.org/doc/latest/ref/Tags/resource.html](http://grails.org/doc/latest/ref/Tags/resource.html)
*   静态资源： http: [//grails.org/doc/latest/guide/theWebLayer.html#resources](http://grails.org/doc/latest/guide/theWebLayer.html#resources)
*   看看*资源插件* [http://grails.org/plugin/resources](http://grails.org/plugin/resources)

# c# - 如何使用 C# 返回标有自定义属性的枚举值

> ID：15540916
> 
> 赞同：1
> 
> 时间：2013-03-21T06:32:48.947
> 
> 标签：c#, enums, custom-attributes

我有一个枚举，其中一些成员由自定义属性标记，例如：

```
public enum VideoClipTypeEnum : int
{
    Exhibitions = 1,

    TV = 2,

    [ClipTypeDisplayAttribute(false)]
    Content = 3
} 
```

我的属性是：

```
public class ClipTypeDisplayAttribute : DescriptionAttribute
    {
        #region Private Variables

        private bool _treatAsPublicType;

        #endregion

        #region Ctor

        public ClipTypeDisplayAttribute(bool treatAsPublicType)
        {
            _treatAsPublicType = treatAsPublicType;
        }

        #endregion

        #region Public Props

        public bool TreatAsPublicType
        {
            get
            {
                return _treatAsPublicType;
            }
            set
            {
                _treatAsPublicType = value;
            }
        }

        #endregion
    } 
```

将标记有我的自定义属性的成员值放入列表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:36:43.260

试试这个

```
var values = 
    from f in typeof(VideoClipTypeEnum).GetFields()
    let attr = f.GetCustomAttributes(typeof(ClipTypeDisplayAttribute))
                .Cast<ClipTypeDisplayAttribute>()
                .FirstOrDefault()
    where attr != null
    select f; 
```

这实际上将返回`FieldInfo`枚举值。要获取原始值，请尝试此操作。

```
var values = 
    ... // same as above
    select (VideoClipTypeEnum)f.GetValue(null); 
```

如果您还想按属性的某些属性进行过滤，您也可以这样做。像这样

```
var values = 
    ... // same as above
    where attr != null && attr.TreatAsPublicType
    ... // same as above 
```

*注意*：这是有效的，因为枚举值（例如`VideoClipTypeEnum.TV`）实际上是作为`VideoClipTypeEnum`内部的静态常量字段实现的。

要`List<int>`使用这个

```
var values = 
    (from f in typeof(VideoClipTypeEnum).GetFields()
     let attr = f.GetCustomAttributes(typeof(ClipTypeDisplayAttribute))
                 .Cast<ClipTypeDisplayAttribute>()
                 .FirstOrDefault()
     where attr != null
     select (int)f.GetValue(null))
    .ToList(); 
```

# mysql - MySQL：使用嵌套子查询的非常慢的查询

> ID：15540920
> 
> 赞同：0
> 
> 时间：2013-03-21T06:33:05.443
> 
> 标签：mysql, mysql-dependent-subquery

**询问：**

```
 SELECT 
    (
        SELECT COUNT(cleanpoi.ID) FROM cleanpoi
        WHERE cleanpoi.EstablishmentID=parent.ID
    ) AS POIs,
    (
        SELECT COUNT(ID) FROM cleanamenitymappings WHERE CleanPOIID IN 
        (
            SELECT cleanpoi.ID FROM cleanpoi
            WHERE cleanpoi.EstablishmentID=parent.ID
        )
    ) AS Amenities,
    (
        SELECT COUNT(ID) FROM cleanamenityvalues WHERE CleanPOIID IN 
        (
            SELECT cleanpoi.ID FROM cleanpoi
            WHERE cleanpoi.EstablishmentID=parent.ID
        )
    ) AS AmenityValues
    FROM establishment parent
    WHERE parent.ID=3 
```

**解释结果：**

```
 id  select_type         table                 type             possible_keys                              key              key_len  ref       rows  Extra                     
------  ------------------  --------------------  ---------------  -----------------------------------------  ---------------  -------  ------  ------  --------------------------
     1  PRIMARY             parent                const            PRIMARY                                    PRIMARY          4        const        1  Using index               
     5  DEPENDENT SUBQUERY  cleanamenityvalues    ALL              (NULL)                                     (NULL)           (NULL)   (NULL)   31778  Using where               
     6  DEPENDENT SUBQUERY  cleanpoi              unique_subquery  PRIMARY,EstablishmentID_2,EstablishmentID  PRIMARY          4        func         1  Using where               
     3  DEPENDENT SUBQUERY  cleanamenitymappings  index            (NULL)                                     CleanPOIID       4        (NULL)  673591  Using where; Using index  
     4  DEPENDENT SUBQUERY  cleanpoi              unique_subquery  PRIMARY,EstablishmentID_2,EstablishmentID  PRIMARY          4        func         1  Using where               
     2  DEPENDENT SUBQUERY  cleanpoi              ref              EstablishmentID_2,EstablishmentID          EstablishmentID  4        const      181 
```

对这个查询有什么建议吗？非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:38:18.300

您的查询确实扫描了 700k 行，所有这些都需要从磁盘读取。我猜测磁盘性能不佳（带宽和/或寻道时间）。

如果您经常运行此查询，请考虑创建一个物化视图，它是一个保存整个查询答案的表，当基础数据发生更改时，您可以使用触发器对其进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:45:58.100

我会用中间结果创建临时表，然后从这个临时表中进行选择。

创建一个存储过程来做到这一点可能很有用：

```
delimiter ;;
create procedure MyLongProcedure()
begin
    -- Just in case, drop the temporary tables before creating them
    drop table if exists temp_step01;
    -- Make a temporary table for each subquery
    create temporary table temp_step01
         select ... ;
    -- Be sure to create the appropriate indexes for each temporary table
    alter table temp_step01
         add index .... ;
    -- Create as much tables as you need
    -- Finally, execute your final query using all the tables you just created
    select ... ;
end;;
delimiter ; 
```

请记住：临时表*只能*由创建它们的连接读取。在可能有用的多用户环境中......或没有，取决于您的特定需求。

这只是一个想法。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:31:26.430

感谢所有答案，但这解决了我的问题。

```
SELECT 
    (
        SELECT COUNT(cleanpoi.ID) FROM cleanpoi
        WHERE cleanpoi.EstablishmentID=parent.ID
    ) AS POIs,
    (
        SELECT COUNT(a.ID) 
        FROM cleanamenitymappings a LEFT JOIN cleanpoi b ON a.CleanPOIID=b.ID
        WHERE b.EstablishmentID=parent.ID
    ) AS Amenities,
    (
        SELECT COUNT(a.ID) 
        FROM cleanamenityvalues a LEFT JOIN cleanpoi b ON a.CleanPOIID=b.ID
        WHERE b.EstablishmentID=parent.ID
    ) AS AmenityValues
    FROM establishment parent
    WHERE parent.ID=3 
```

# svn - Subversion 使用 Tortoise SVN 连接失败，但使用 IE

> ID：15540923
> 
> 赞同：0
> 
> 时间：2013-03-21T06:33:19.513
> 
> 标签：svn, tortoisesvn

我无法使用 Tortoise SVN 连接到我们的 Subversion URL，但我可以使用 Internet Explorer 连接相同的 URL。

在我的 Internet Explorer 中，我配置了代理设置，同样适用于 Tortoise SVN 网络设置。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:31:31.727

最好获取工作和非工作请求的请求的 Wireshark / 网络捕获。

你用的是http协议吗？

服务器 URL 是什么样的？

通常浏览器可以处理 HTTP 重定向，但其他 svn 客户端（如 Tortoise）不能。

# c++ - boost asio的链接器问题

> ID：15540926
> 
> 赞同：1
> 
> 时间：2013-03-21T06:33:37.290
> 
> 标签：c++, visual-studio-2010, boost, boost-asio

我正在尝试在 VS2010 - 64bit 上为 Boost Asio 运行以下代码示例。取自[链接](http://en.highscore.de/cpp/boost/asio.html)

```
#include <boost/asio.hpp> 
#include <boost/array.hpp> 
#include <iostream> 
#include <string> 

boost::asio::io_service io_service; 
boost::asio::ip::tcp::resolver resolver(io_service); 
boost::asio::ip::tcp::socket sock(io_service); 
boost::array<char, 4096> buffer; 

void read_handler(const boost::system::error_code &ec, std::size_t bytes_transferred) 
{ 
    if (!ec) 
    { 
        std::cout << std::string(buffer.data(), bytes_transferred) << std::endl; 
        sock.async_read_some(boost::asio::buffer(buffer), read_handler); 
    } 
} 

void connect_handler(const boost::system::error_code &ec) 
{ 
    if (!ec) 
    { 
        boost::asio::write(sock, boost::asio::buffer("GET / HTTP 1.1\r\nHost: highscore.de\r\n\r\n")); 
        sock.async_read_some(boost::asio::buffer(buffer), read_handler); 
    } 
} 

void resolve_handler(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator it) 
{ 
    if (!ec) 
    { 
        sock.async_connect(*it, connect_handler); 
    } 
} 

int main() 
{ 
    boost::asio::ip::tcp::resolver::query query("www.highscore.de", "80"); 
    resolver.async_resolve(query, resolve_handler); 
    io_service.run(); 
} 
```

然后我开始收到以下错误

```
cannot open file 'libboost_system-vc100-mt-sgd-1_47.lib'
cannot open file 'libboost_date_time-vc100-mt-sgd-1_47.lib'
cannot open file 'libboost_regex-vc100-mt-sgd-1_47.lib' 
```

为了解决这些问题，我从[Link下载了这些文件](http://sourceforge.net/projects/boost/files/boost-binaries/1.47.0/)

所以我开始收到以下错误：

```
Error   12  error LNK1169: one or more multiply defined symbols found   
Error   8   error LNK2005: "void * __cdecl operator new(unsigned int)" (??2@YAPAXI@Z) already defined in LIBCMTD.lib(new.obj)   
Error   10  error LNK2005: "void * __cdecl operator new[](unsigned int)" (??_U@YAPAXI@Z) already defined in libcpmtd.lib(newaop.obj)    
Error   9   error LNK2005: "void __cdecl operator delete(void *)" (??3@YAXPAX@Z) already defined in LIBCMTD.lib(dbgdel.obj) 
Error   11  error LNK2005: "void __cdecl operator delete[](void *)" (??_V@YAXPAX@Z) already defined in LIBCMTD.lib(delete2.obj) 
```

关于可能出现问题的任何建议。我需要在其他依赖项中设置一些输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:03:43.280

您可能不需要重新安装 Visual Studio。我认为您看到的错误与一种版本控制问题有关。您收到的错误表明某些组件是使用一组库构建的，而其他组件是使用另一组库构建的。在错误中：

```
error LNK2005: "void * __cdecl operator new(unsigned int)" (??2@YAPAXI@Z) already defined in LIBCMTD.lib(new.obj) 
```

文件名 LIBCMTD (MTD) 的最后 3 个字符代表多线程库。如果您正在构建将此代码与不同类型的库一起使用的其他组件，例如 MT（多线程 - 无调试）或 MDd（dll 的多线程调试），那么您将收到此错误。如果您链接到错误的 Boost 库集，您也可能会收到此错误。事实上，从它试图使用的库上面的错误来看：

'libboost_system-vc100-mt-sgd-1_47.lib'

我相信这是发布版本。您需要使用您在自己的代码中使用的相同类型的库进行构建。如果您使用的是 MTD，那么也可以使用 MTD 版本的 Boost 库进行构建。

要查看您的项目正在使用哪些库，请右键单击解决方案资源管理器窗口中的项目并选择属性。也可以从项目菜单中选择属性，但在执行此操作之前，请确保该项目中有一个文件作为当前文件在编辑窗口中打开。在运行时库下，您将看到您正在使用的库类型。如果项目类型是 dll，那么这个值真的应该设置为 MDd。要查看它是什么类型的项目，请单击属性下的链接器（或图书管理员）选项，如果输出文件是 dll，则项目类型是 dll。如果它说 library 或 exe，则项目分别是 library 或 exe。给定类型的所有项目都应该以相同的方式构建。例如，您不应该尝试混合和匹配发布和调试版本。如果您有正在构建的 exe，则使用用于构建项目库类型的任何库。要设置库，请在属性下选择配置属性/C/C++/代码生成/运行时库，然后从下拉框中选择一种类型。

如果所有项目的配置看起来都正确，请尝试从头开始重建。这可以通过右键单击项目并选择清理，然后选择重建来完成。

# java - java Facebook 集成

> ID：15540928
> 
> 赞同：0
> 
> 时间：2013-03-21T06:33:43.780
> 
> 标签：java, facebook-graph-api

在使用restfb.somewhere集成的java facebook中写到restfb已被弃用。那么在这种情况下使用什么。我不想使用第三方。是否有任何指南可以跟进在java应用程序中使用facebook open graph。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:46:00.323

将此添加到您的 pom.xml 中，很容易与 facebook 和其他人集成：

```
 <!-- Spring Social -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-core</artifactId>
        <version>${spring-social.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-web</artifactId>
        <version>${spring-social.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-test</artifactId>
        <version>${spring-social.version}</version>
    </dependency>

    <!-- Facebook API -->
    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-facebook</artifactId>
        <version>${org.springframework.social-facebook-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.social</groupId>
        <artifactId>spring-social-facebook-web</artifactId>
        <version>${org.springframework.social-facebook-version}</version>
    </dependency> 
```

查看[Spring Social](http://www.springsource.org/spring-social)了解更多信息

# jquery - 如何在extjs4中集成jquery代码

> ID：15540931
> 
> 赞同：0
> 
> 时间：2013-03-21T06:33:49.823
> 
> 标签：jquery, extjs4, weather

我在 extjs 工作。我想查找特定城市的天气。我从“ [http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json](http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json) ”得到参考。通过在 html 文件中编写以下代码，它以 json 格式提供与给定城市相关的所有信息-

```
 <script
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js">

</script>

<script>
    jQuery(document).ready(function($) {
                        $.ajax({
                                    url : "http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/Pune.json",
                                    dataType : "jsonp",
                                    success : function(parsed_json) {
                                        var location = parsed_json['location']['city'];
                                        var temp_c = parsed_json['current_observation']['temperature_string'];
                                        alert("Current temperature in "
                                                + location + " is: " + temp_c);
                                    }
                                });
                    });
</script> 
```

它工作正常。现在我想将此 jquery 代码集成到 extjs 的控制器中。那么有人可以指导我如何在 extjs 中集成上面的 jquery 代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:01:15.483

以下 extjs 代码与您的代码相同，因此您可以在控制器内部使用它。

```
Ext.data.JsonP.request({
    url:"http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/Pune.json",
    success : function(parsed_json) {
        var location = parsed_json['location']['city'];
        var temp_c = parsed_json['current_observation']['temperature_string'];
        alert("Current temperature in " + location + " is: " + temp_c);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:58:40.630

ExtJS 和 jQuery 之间没有冲突（都有自己的命名空间）。只要在 app.js 之前加载 jQuery，就可以在 ExtJS 控制器中使用 jQuery。我从 ExtJS 4.x 开始使用 jQuery 和 ExtJS，从来没有遇到过任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T19:21:56.300

在 sencha touch 和 extjs 中，您的所有 javascript 代码都将放在您的 app.js 文件或其他类 js 文件中。您永远不会将这样的代码放在 html 的脚本标记中。如果您想在您的应用程序加载或第一件事之前调用该位置，您可以将它放在您的应用程序启动功能中或直接放在上面。

```
//DO YOUR AJAX CALL HERE BEFORE YOUR APPLICATION LAUNCHES

    Ext.application({
        name: 'MyApp',
        launch: function() {

            //OR INSIDE THE LAUNCH FUNCTION
        }
    }); 
```

# c# - 如何将默认值传递给存储过程中的日期参数 - Sqlserver 2008？

> ID：15540932
> 
> 赞同：0
> 
> 时间：2013-03-21T06:33:50.430
> 
> 标签：c#, stored-procedures, ado.net, sql-server-2008-r2, default-value

这是我的存储过程：

```
ALTER proc [dbo].[allrecp]
    @peid int=0,
    @pename varchar(20)='',
    @pdes varchar(20)='',
    @pdoj date='1111-1-1',
    @sal money=0,
    @dept int=0,
    @loc int=0,@i int=0
    as begin
    if(@i=1)
    begin
    insert into Employee values(@pename,@pdes,@pdoj,@sal,@dept,@loc)
    end
    if(@i=2)
    begin
    update Employee set ENAME=@pename,DESEGNATION=@pdes,DOJ=@pdoj,SALARY=@sal,DEPTID=@dept,LOCATIONID=@loc WHERE EMPID=@peid
    end
    if(@i=3)
    delete EMPLOYEE where EMPID=@peid
end 
```

我的 C# 代码是：

```
private void btndelete_Click(object sender, EventArgs e)
{
    parameteres(3);
}

private void btnupdate_Click(object sender, EventArgs e)
{
    parameteres(2);
}

private void BTNINSERT_Click(object sender, EventArgs e)
{
    parameteres(1);
}

public void parameteres(int i)
{
    cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandText = "allrecp";
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@peid", SqlDbType.Int)).Value = txtempid.Text;
    cmd.Parameters.Add(new SqlParameter("@pename", SqlDbType.VarChar, 20)).Value = txtename.Text;
    cmd.Parameters.Add(new SqlParameter("@pdes", SqlDbType.VarChar, 20)).Value = txtdesg.Text;
    cmd.Parameters.Add(new SqlParameter("@pdoj", SqlDbType.Date)).Value = txtdoj.Text; 
```

我在这里面临问题：

> 无法将参数值从字符串转换为日期时间

代码：

```
cmd.Parameters.Add(new SqlParameter("@dept", SqlDbType.Int)).Value = txtdept.Text;
cmd.Parameters.Add(new SqlParameter("@sal", SqlDbType.Money)).Value = txtsal.Text;
cmd.Parameters.Add(new SqlParameter("@loc", SqlDbType.Int)).Value = txtlocation.Text;
cmd.Parameters.Add(new SqlParameter("@i", SqlDbType.Int)).Value = i;
con.Open();
int x = cmd.ExecuteNonQuery();
con.Close();
MessageBox.Show(x + " rows effected"); 
```

我在这里面临问题：

```
cmd.Parameters.Add(new SqlParameter("@dept", SqlDbType.Int)).Value = txtdept.Text; 
```

如何将默认值传递给存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:23:03.803

您可以设置日期类型的默认参数如下：

```
@Date Date = 'october 10, 2012' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:46:17.680

除了 sachin 的回答，我还建议您使用 datepicker 控件或验证文本框以仅使用验证器接受日期值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:56:00.387

1-如何传递默认日期值：

SP 中带有默认值的参数使其成为可选参数。您可以在 SP 中为参数设置默认值，并且在从代码调用 SP 时根本不传递参数，这样它将考虑您的默认值。

在你的 SP

```
@pdoj date='1111-1-1' -- Make sure to use a valid date. The min valid date for SQL server is `1753-1-1` 
```

是一个可选参数，当你在 UI 上没有任何可用的值时，那么在调用 SP 时不要传递该参数，因此它会考虑默认值。

2-确保不要传递空字符串/无效日期，只需在用户未输入日期时绕过添加日期参数或根据您的业务规则对其进行验证

因此，应有条件地添加日期参数，如下所示：

```
if(  IsValidDate(txtdoj.Text) )
{
cmd.Parameters.Add(new SqlParameter("@pdoj", SqlDbType.Date)).Value = Convert.ToDateTime(txtdoj.Text);
} 
```

// *** IsValidDate 只是提示您需要根据业务规则验证日期.. 将空日期视为无效或允许考虑默认日期。

# symfony - Symfony2 捆绑特定的 Twig 配置/变量

> ID：15540936
> 
> 赞同：3
> 
> 时间：2013-03-21T06:34:08.053
> 
> 标签：symfony

我知道我可以在我的 中设置 Twig 变量`app/config/config.yml`，但是我想在每个包级别上设置变量（例如：）`Bundle/Resources/config/??.yml`。

例如，我想在页面的页脚中包含捆绑版本标识符。我尝试将 twig 配置放入我的包中，`services.yml`但是 Symfony 无法解析配置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:10:03.127

我不确定您如何为您的示例实现捆绑特定的配置。捆绑包中的配置倾向于导入到主配置文件中，这些文件现在是特定于环境的，而不是特定于捆绑包的。

但是，对于您的示例，我将只创建一个 twig 扩展，它返回您正在使用的包的名称。这样您就可以在模板中的任何位置使用它。您可以从请求中获取控制器的全名路由，然后只需使用 preg 匹配来获取 Bundle 名称。像下面这样的东西应该可以工作：

```
public function getBundleName()
{
    $pattern = "#([a-zA-Z]*)Bundle#";
    $matches = array();
    preg_match($pattern, $this->container->get('request')->get('_controller'), $matches);
    return $matches[1];
} 
```

在此示例`$this->container`中，已在构造函数中将其设置为容器的实例。如果您使用另一种方法来获取控制器，则相应地替换。

# android - 如何实现应用程序以从适当的文件夹中获取图像？

> ID：15540939
> 
> 赞同：0
> 
> 时间：2013-03-21T06:34:20.450
> 
> 标签：android, screen, android-screen-support

我正在开发一个安卓应用程序。因为这应该支持所有屏幕尺寸。但它不能正常工作。我可以将其设置为 480*800 大小，它将从 drawable-hdpi 文件夹中获取图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:39:10.540

屏幕尺寸和dpi不是一回事。DPI 是每英寸的像素数。480x800 屏幕仍然可以是任何 dpi 级别 - 它只是具有更高 dpi 的较小屏幕。

您可以尝试使用 drawable-swNdp 进行大小覆盖，其中 N 是像素值。这适用于布局，我相信它也适用于可绘制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:41:42.773

为了支持所有分辨率设备，请将不同分辨率的图像放在 drawable 的不同文件夹中，drawable-ldpi - 240 * 380 drawable-mdpi - 320 * 480 drawable-hdpi - 480 * 800 drawable-xhdpi - 720 * 960 有关分辨率的更多信息参考这个链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c++ - 如何在linux中正确清除文件

> ID：15540941
> 
> 赞同：-1
> 
> 时间：2013-03-21T06:34:27.177
> 
> 标签：c++, linux, file-descriptor

美好的一天，我打开文件写入一些内容。代码如下：

```
class file_worker
{
public:
    file_worker(const std::string &path):path_(path),stop_(false)
    {
        umask(0);
        file_descriptor_ = open(path_.c_str(),O_WRONLY|O_CREAT, 0666);
    }
    void operator()()
    {
        if(file_descriptor_!=-1)
        {
             clear_file();
            //write something
        }
    }
    void clear_file()
    {

    }
    ~file_worker()
    {
        if(file_descriptor_!=-1)
        {
            close(file_descriptor_);
        }
    }
private:
    const std::string path_;
    int file_descriptor_;
    bool stop_;
}; 
```

如何实现 clear_file(); 可以在不关闭文件描述符的情况下清除（删除所有文件内容）的功能？哪种方式可以更快地写入文件？是否可以在文件的不同部分同时写入某些线程的文件（可能使用 lseek）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:36:04.997

您没有定义清除文件对您意味着什么。

您可以将文件缩小到 0 大小，为此使用[ftruncate(2)](http://man7.org/linux/man-pages/man2/ftruncate.2.html)。

您可以将文件中的所有字节归零。然后，使用lseek [(2)](http://man7.org/linux/man-pages/man2/lseek.2.html)`write(2)`或[pwrite(2)](http://man7.org/linux/man-pages/man2/pwrite.2.html)

如果其他进程同时写入文件，则可能会出现问题（这是不好的做法）。

我不确定使用多线程是否真的会加速所有字节的归零。（这样做是磁盘密集型的，除非系统文件缓存被命中，并且多线程不会加速磁盘），所以我会先进行基准测试。

# bison - lex中“<*>”的含义

> ID：15540944
> 
> 赞同：1
> 
> 时间：2013-03-21T06:34:36.200
> 
> 标签：bison, yacc, lex, flex-lexer

我知道，我们可以在lex中定义一些条件，匹配：</p>

```
1.<DIRECTIVE>{STRING} {printf("Matching the DIRECTIVE state!");}
2.<REFERENCE>{INTEGER} {printf("Matching the REFERNCE state!");}
3.[\n] {printf("Matching the INITIAL state?");}

4.<*>{DOBULE} {printf("Matching all state include INITIAL? Seem not!");} 
```

如何以正确的方式使用状态？第 3 行和第 4 行的条件有什么不同？

整个.l文件，我剪的，现在只是为了实现一个参考。当我运行它时，它可以很好地工作，但最后总是说“line：4：error：syntax error”，我不知道为什么！我的 test.vm 只有 2 行文本。

```
%{
/**支持了所有的token,不支持转义和多行注释*/
#include<stdio.h>
#include<string.h>
#include "context.h"
#include "bool.h"
#include "vtl4.tab.h"

extern int yylex();
/**bracket标志*/
int bracket_flag = 0;
/**引用标志*/
int ref_flag = 0;
/**多行注释标记*/
int mul_comment_flag = 0;
%}
%option stack
%option noyywrap yylineno

%x REF
VAR_NAME ([_a-zA-Z]+[a-zA-Z0-9_\-]*)
%%
/**这里去除$#\n防止覆盖状态REF和DIRECTIVE*/
[^$\n#]*? {printf("text:%s\n",yytext);yylval.string = yytext; return CONTENT;}
/**换行单独取出来，还没清楚为什么*/
\n {printf("newLine:%s\n",yytext);yylval.string = yytext; return CONTENT;}

/**添加^$防止只匹配最后一个变量
 例如：&lt;p class="$b">$a $b</p> 只匹配了最后一个$b
 */
[^#$]*?/"$" {BEGIN REF;printf("begin ref text:%s\n",yytext);yylval.string = yytext; return       CONTENT;}

<REF>"$"|"$!"/"{"?{VAR_NAME} {ref_flag++;printf("$:%s\n",yytext);return DOLLAR;}
<REF>"{" {printf("{:%s\n",yytext);return BRACE;}
<DIRECTIVE>"}" {printf("}:%s\n",yytext);return BRACE_CLOSE;}
<REF>{VAR_NAME}/[^0-9A-Za-z_\-] {
    printf("ref name:%s\n",yytext);
    ref_flag--;
    yylval.sym = find_symbol(yytext);
    return ID;
}
<REF>[ /t"="\n] {BEGIN INITIAL; printf("ref end:%s\n",yytext);}
<REF>[}] {printf("}:%s\n",yytext);return BRACE_CLOSE;}

<<EOF>> {printf("lex end:%s\n",yytext);return LEX_EOF;}
%% 
```

整个 .y 文件：

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "bool.h"
#include "parser.h"
#include "context.h"
#include "vtl4.tab.h"

extern FILE * yyin;
extern FILE * yyout;
int yylex();
#define YYDEBUG 1
%}
/*priority level*/
%union {
struct simpleNode *ast;
double d;
int i;
bool b;
char* string;
struct symbol *sym;
}

%token ADD SUB MUL DIV MOD EQUAL PARENTHESIS CLOSE_PARENTHESIS BRACE BRACE_CLOSE  LOGICAL_AND LOGICAL_OR LOGIC_EQUAL LOGICAL_LT LOGICAL_LE LOGICAL_GT LOGICAL_GE LOGICAL_NOT_EQUALS

%token  LEX_EOF

%token <string> CONTENT STRING_LITERAL SINGLE_LINE_COMMENT MULTI_LINE_COMMENT
%token <b> BOOL

%token INTEGER_LITERAL

%token <d> DOUBLE_LITERAL

%token DOLLAR

%token <sym> ID

%token HASH SET PARSE IF ELSE ELSEIF FOREACH IN END

%type <ast> root statements statement reference content

%start root

%%
/*JJTPROCESS*/
root:statements LEX_EOF {printf("yacc root\n");$$ = process($1);}
;

statements
: statement {printf("yacc statements:statement\n"); $$ = $1; }
| statements statement {printf("yacc statements:statements statement\n"); $$ =     add_ybrother($1,$2);}
;

statement
 : reference {printf("yacc statement:ref\n"); $$ = $1;}
| content
;

reference
: DOLLAR ID {printf("yacc ref\n");$$ = reference($2);}
 ;

content
: CONTENT {$$ = text(NULL);}
;

%%
int main(){
printf("BEGIN:\n");
FILE *src;
src = fopen("test.vm","r");
yyin = src;
int result = yyparse();
fclose(src);
return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T02:02:05.153

首先，开始条件不是 Lex 的一个特性。它们是 GNU Flex 的一个特性。

该语法`<*>`确实被记录为“此规则将在任何状态下无条件触发”的意思。

您可能知道，条件可以是独占的（用 定义`%x`）或包含的（用 定义`%s`）。

如果您编写一个没有任何条件的规则，那么它在该`INITIAL`状态下是活动的，并且在任何包含在内的状态下也是有效的：包含的意思是“没有指定条件的规则将在该状态下是活动的”。

如果当前状态是独占状态，则没有任何条件的规则是不活动的：它排除了没有条件的规则。

语法意味着该`<*>`规则将在所有状态下激活，包括排他性状态。

如果规则没有`<...>`条件语法，则意味着该规则将仅在`INITIAL`状态或包含的状态中激活。

你的解析器仍然有很多错误。请记住，最长匹配规则是在输入中的任何点触发的规则，并且可能会被误解为开始条件不起作用。如果输入是`catalog`并且某些符合条件的规则想要匹配，那么匹配的规则是否具有 属性`cat`并不重要。这不是最长的比赛。`c``<*>`

# matlab - 在matlab中裁剪图像

> ID：15540948
> 
> 赞同：0
> 
> 时间：2013-03-21T06:34:59.217
> 
> 标签：matlab, image-processing, crop, biometrics

是否可以沿特定曲线裁剪图像。例如。我想从这个图像中裁剪出手指图像，但我不想沿着矩形裁剪它。![在此处输入图像描述](../Images/e752e98af59df6769e8222baac4f72bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:16:08.240

您需要一个二进制掩码并将该掩码应用为 alpha 映射，这是通常的完成方式

```
s = 100;
h = imagesc(rand(s));%show some garbage

%prepare a circular mask
dummy = meshgrid(-s/2:s/2-1).^2;%squared distances from the center
mask =  sqrt(dummy+dummy') < 20;%20 is the radius of your mask

%here you go, mask the image in a curved manner
set(h,'alphaData',mask); 
```

将其导出为 png 就可以完成这项工作。

因此，在您的情况下，您需要制作自己的蒙版，这意味着要么对位图图像设置阈值，要么对空间进行参数化（就像我在上面的圆圈中所做的那样）。

# android - 初始化一个 jsonArray java

> ID：15540949
> 
> 赞同：2
> 
> 时间：2013-03-21T06:35:09.520
> 
> 标签：android, json

我正在尝试将 json 初始化为 jsonArray，但我迷失了。

我在哪里错了，我们如何初始化一个 json 数组

```
JSONArray template = 
            {
                  "header": "Colors",
                  "items": [
                      {"name": "red", "first": true, "url": "#Red"},
                      {"name": "green", "link": true, "url": "#Green"},
                      {"name": "blue", "link": true, "url": "#Blue"}
                  ],
                  "empty": false
                }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:50:51.687

您需要创建一个`JSONObject`提到的模板，它将自动初始化`items`.

```
try {
    String template = "{\"header\": \"Colors\", " +
        "\"items\": [ " +
        "{\"name\": \"red\", \"first\": true, \"url\": \"#Red\"}, " +
        "{\"name\": \"green\", \"link\": true, \"url\": \"#Green\"}, " +
        "{\"name\": \"blue\", \"link\": true, \"url\": \"#Blue\"}" +
        " ], \"empty\": false }";

    JSONObject jsonWithArrayInIt = new JSONObject(template); //JSONObject created for the template.
    JSONArray items = jsonWithArrayInIt.getJSONArray("items"); //JSONArray of items present inside the JSONObject.
    System.out.println(items.toString());
} catch (JSONException je) {
    //Error while creating JSON.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:48:32.340

以下是初始化的正确方法`JSONArray`

```
public class TestJSON {

public static void main(String[] args) {
    JSONArray template = new JSONArray("[ {\"name\": \"red\", \"first\": true, \"url\": \"#Red\"}," +
            " {\"name\": \"green\", \"link\": true, \"url\": \"#Green\"}," +
            "{\"name\": \"blue\", \"link\": true, \"url\": \"#Blue\"} ]");

    System.out.println(template.toString());

    }
} 
```

以下是输出：

```
[
    {
        "name": "red",
        "first": true,
        "url": "#Red"
    },
    {
        "link": true,
        "name": "green",
        "url": "#Green"
    },
    {
        "link": true,
        "name": "blue",
        "url": "#Blue"
    }
] 
```

编辑1：

您可以使用以下代码创建完整的 JSON 对象。

```
 public static void main(String[] args) {
        JSONArray template = new JSONArray(
            "[ {\"name\": \"red\", \"first\": true, \"url\": \"#Red\"},"
                + " {\"name\": \"green\", \"link\": true, \"url\": \"#Green\"},"
                + "{\"name\": \"blue\", \"link\": true, \"url\": \"#Blue\"} ]");

        JSONObject object = new JSONObject();
        object.put("header", "Colors");
        object.put("empty", false);
        object.put("items", template);

        System.out.println(object.toString());
        } 
```

以下是输出：

```
{
    "items": [
        {
            "name": "red",
            "first": true,
            "url": "#Red"
        },
        {
            "link": true,
            "name": "green",
            "url": "#Green"
        },
        {
            "link": true,
            "name": "blue",
            "url": "#Blue"
        }
    ],
    "empty": false,
    "header": "Colors"
} 
```

编辑2：

以下代码可用于生成完整的 JSON 对象，而无需使用包含 JSON 数据的字符串：

```
 public static void main(String[] args) {
    JSONArray template = new JSONArray();

    JSONObject obj = new JSONObject();
    obj.put("name", "red");
    obj.put("first", true);
    obj.put("url", "#Red");
    template.put(obj);

    JSONObject obj1 = new JSONObject();
    obj1.put("name", "green");
    obj1.put("link", true);
    obj1.put("url", "#Green");
    template.put(obj1);

    JSONObject obj2 = new JSONObject();
    obj2.put("name", "blue");
    obj2.put("link", true);
    obj2.put("url", "#Blue");
    template.put(obj2);

    JSONObject object = new JSONObject();
    object.put("header", "Colors");
    object.put("empty", false);
    object.put("items", template);

    System.out.println(object.toString());
    } 
```

以下是该程序的输出：

```
{
    "items": [
        {
            "name": "red",
            "first": true,
            "url": "#Red"
        },
        {
            "link": true,
            "name": "green",
            "url": "#Green"
        },
        {
            "link": true,
            "name": "blue",
            "url": "#Blue"
        }
    ],
    "empty": false,
    "header": "Colors"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:52:35.103

而不是自我格式化，我一直在按照以下方式进行操作，它对我有用。

```
 function fillPolicydetails()
    {
    var clsPolicyDetails={}
      clsPolicyDetails.name="Sangeeta"
      clsPolicyDetails.technology=".net"
    return clsPolicyDetails;
    }

     $.ajax({
                type: "POST",
                url: url,
                data:  "{'policydetail':" + JSON.stringify(fillPolicydetails())+"}",    //finally here's the magic:
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (Result) {
                    successFunction(Result);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    failureFunction(jqXHR, textStatus, errorThrown);
                }
            }); 
```

上面的代码将为您生成 json 格式并将其作为对象而不是原始字符串发送

如果有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:58:04.687

如果模板是您的 json 数组，则意味着保存多个值，然后像这样初始化：

```
JSONArray template = new JSONArray("
        [{
              "header": "Colors",
              "items": [
                  {"name": "red", "first": true, "url": "#Red"},
                  {"name": "green", "link": true, "url": "#Green"},
                  {"name": "blue", "link": true, "url": "#Blue"}
              ],
              "empty": false
            }]"); 
```

如果 items 是 json 数组并且 template 是一个 json 对象，那么就这样做

```
JSONArray items=new JSONArray ("[
                      {"name": "red", "first": true, "url": "#Red"},
                      {"name": "green", "link": true, "url": "#Green"},
                      {"name": "blue", "link": true, "url": "#Blue"}
                  ]");

JSONObject template = new JSONObject();
template .put("sessionId",
                    new JSONString("Colors"));
template .put("items",
                    items);
template .put("empty",
                    new JSONBoolean(false)); 
```

逻辑是正确的，有时它的函数名或类名会根据不同的包而改变。我在用`com.google.gwt.json.client`

# c#-4.0 - 从 SQL 查询中将标签格式化为 ###,###,###.##

> ID：15540956
> 
> 赞同：1
> 
> 时间：2013-03-21T06:35:33.660
> 
> 标签：c#-4.0

这是我的代码

```
SqlConnection sqlConn = new SqlConnection(MyClass.GlobalConn());
sqlConn.Open();

try
{

    string cmdStr = "Select CONVERT (char(12), CONVERT(money,sum(ProductAmt))),CONVERT (char(12), CONVERT(money,sum(ServiceAmt))) from MyTable";
    SqlCommand cmd = new SqlCommand(cmdStr, sqlConn);

    SqlDataReader dR;
    dR = cmd.ExecuteReader();

    while (dR.Read())
    {
        label1.Text = (dR[0].ToString()); 
        label1.Text = (dR[1].ToString()); 
    }

} 
```

我的`Label1`和`label2`输出格式是`########.##` 我希望它是`###,###,###.##`格式，我怎样才能使它成为那种格式？

我尝试时出错`label1.Text = (dR[0].ToString("N2"))`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:55:31.327

这是一个可行的方法：

```
public static string GetCurrencyString(string currString)
{
    decimal moneyvalue;
    if (Decimal.TryParse(currString, out moneyvalue))
    {
        return String.Format("{0:C}", moneyvalue);
    }
    else
    {
        return null;
    }
} 
```

像这样称呼它：

```
label1.Text = GetCurrencyString(dR[0].ToString()) 
```

# objective-c - 由于未捕获的异常“NSRangeException”而终止应用程序。[__NSArrayM objectAtIndex:]: 索引 33 超出范围 [0 .. 32]'

> ID：15540958
> 
> 赞同：0
> 
> 时间：2013-03-21T06:35:41.420
> 
> 标签：objective-c, nsarray, nsrangeexception

我有这个 ImportViewController.m

我正在从服务器的 xml 中提取和加载名称。元素总数为 33。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"IMPORT";
    NSLog(@"User id = %@",currentUserId);

    //some code to send http request.............
    NSString *str=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"str response:%@",str);
    NSURL *fileURL= [[NSURL alloc] initWithString:[str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSData *xmlData = [[NSMutableData alloc] initWithContentsOfURL:fileURL];
    GDataXMLDocument *doc =[[GDataXMLDocument alloc] initWithData:xmlData options:0 error:nil];

    NSArray * names = [doc nodesForXPath:@"//contacts/contact/name/firstname" error:nil];

    for (GDataXMLElement *element in names) {
        // NSLog(@"name: %@ ",element.stringValue);
        [Option addObject:element.stringValue];
    }

    [Option addObject:@"nil"];
    NSLog(@"count: %u ",[Option count]);

    for (CFIndex i=0; i<=[Option count]; i++) {
        NSLog(@"options item %lu: %@\n",i,Option[i]);
    }
} 
```

错误：由于未捕获的异常 'NSRangeException' 导致应用程序终止，原因：' *** -[__NSArrayM objectAtIndex:]：索引 33 超出范围 [0 .. 32]' ***第一次抛出调用堆栈：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T06:38:14.060

你的线

```
for (CFIndex i=0; i<=[Option count]; i++) 
```

应该读

```
for (CFIndex i=0; i<[Option count]; i++) 
```

# hibernate - JPA Spring Hibernate App中的事务需要异常

> ID：15540959
> 
> 赞同：0
> 
> 时间：2013-03-21T06:35:42.583
> 
> 标签：hibernate, jpa, spring-mvc, transactions

我在这个论坛上看到了很多关于 Transaction required Exception 的帖子。但他们都没有解决这个问题。我的问题是：在我的场景中，我的应用程序在某些功能上运行良好，但有些抛出异常。

`entityManager.flush()`Spring+Hibernate+JPA抛出Transaction Required Exception是什么情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:53:38.133

尝试放在`@Transactional`方法级别

# wordpress - 如何添加从插件主题标题？如何在主题标题（前端）中添加下拉选项（<select>）。就像在具有多语言支持的网站上的可用语言中选择语言的选项一样。但是，除了更改主题之外，是否可以通过一些钩子从插件中添加它？我想添加一个函数，并注册它的短代码以添加到主题中，但是有没有更好的方法来做到这一点？1> 注册一个在 wp_head 动作触发时要执行的函数： add_action('wp_head', 'my_function'); 2> 使函数 echo 在标 题中随心所欲： ID：15540962 赞同：0 时间：2013-03-21T06:35:51.850 标签：wordpress 回答 #1 赞同：1 时间：2013-03-21T07:18:24.497 1> 注册一个在 wp_head 动作触发时要执行的函数： add_action('wp_head', 'my_function'); 2> 使函数在标题中回显您想要的任何内容： function my_function() { echo '<select> <option>1</option> </select>'; }</select>

# android - +1 点击不适用于 Android 与 Google+ 的集成

> ID：15540965
> 
> 赞同：2
> 
> 时间：2013-03-21T06:36:03.423
> 
> 标签：android, api, google-plus, rate

我按照[此链接](https://developers.google.com/+/mobile/android/recommend)使用我的 Android 应用程序中的 +1 按钮来 +1 链接或网站，但不幸的是它没有按预期工作，当我点击它时它没有响应。我尝试使用以下内容：

```
 mPlusOneButton.setOnPlusOneClickListener(new OnPlusOneClickListener() {

        @Override
        public void onPlusOneClick(Intent arg0) {
            // TODO Auto-generated method stub
            startActivityForResult(arg0, 0);
        }
    }); 
```

但也没有任何反应。例如，我尝试使用以下代码行：

```
 mPlusOneButton.initialize(plusClient, "http://www.googleplustoday.net", PLUS_ONE_REQUEST_CODE); 
```

+1 标签上的我的 Google+ 个人资料没有任何影响。

谁能帮忙？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T09:45:55.970

确保已连接到 Google Plus：

```
mPlusOneButton.setOnPlusOneClickListener(new OnPlusOneClickListener() {

    @Override
    public void onPlusOneClick(Intent intent) {
        if(!plusClient.isConnected()) {
            plusClient.connect();
        } else {
            startActivityForResult(intent, 0);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:27:24.993

确保`mPlusOneButton`在处理点击之前初始化您的方法，例如在`onResume`方法中。当我通过在点击之前不初始化进行测试时，我可能会失败。

其中`androidsdk/extras/google/google_play_services/samples/plus/src/com/google/android/gms/samples/plus/PlusOneActivity.java`包含一个用于使 PlusOne 按钮工作的骨架活动。

如果您可以从 logcat 发布完整的活动代码和任何适用的错误，这将有助于进一步识别问题。

# api - wt.vc.VersionControlServiceEvent.NEW_VERSION

> ID：15540969
> 
> 赞同：0
> 
> 时间：2013-03-21T06:36:21.427
> 
> 标签：api, service, ptc-windchill

我有一个 Windchill 服务，我正在从中捕获修订事件。我正在使用 API`VersionControlServiceEvent.NEW_VERSION`

但是这个事件正在捕获结帐和修订事件。我只需要捕获修订事件。如何修改它以单独捕获修订事件或是否有任何其他 API 可以做到这一点。我需要一些帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:58:31.677

从我之前的回答（[这里](https://stackoverflow.com/questions/15429038/how-to-capture-revision-event-of-wtobject/15430056#15430056)）开始，你只需要测试目标对象的状态：

```
public class VersionEventListenerAdapter extends ServiceEventListenerAdapter {

public VersionEventListenerAdapter(String serviceId) {
   super(serviceId);
}

public void notifyVetoableEvent(Object event) throws WTException, WTPropertyVetoException {
    if (!(event instanceof KeyedEvent)) {
        return;
    }

    Object target = ((KeyedEvent) event).getEventTarget();
    Object eventType = ((KeyedEvent) event).getEventType();

    if (eventType.equals(VersionControlServiceEvent.NEW_VERSION))
    {
        //Check if the object is checkedOut
        if (target instanceof Workable && WorkInProgressHelper.isCheckedOut((Workable)target) {
             return;
        }

        /** Call your business code here 
            example : yourMethod(target);
         **/
    }
} 
```

# android - Android：限制应用程序不在平板电脑上运行

> ID：15540979
> 
> 赞同：5
> 
> 时间：2013-03-21T06:36:56.757
> 
> 标签：android, android-manifest, android-screen-support, android-screen, android-permissions

我开发了一个应用程序。现在我希望我的应用程序只能在手机上运行，​​而不是在平板电脑上运行。我搜索并尝试如下：

```
<supports-screens 
    android:smallScreens="true"
    android:normalScreens="false" 
    android:largeScreens="false"
    android:xlargeScreens="false"
    android:resizeable="false" /> 
```

我把它写在 androidmenifest.xml 文件中。但这没有用。我的应用程序现在也在平板电脑上运行。

我是不是宣布错了，或者我应该包括其他任何内容。

请建议我应该怎么做才能限制我的应用程序在平板电脑上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:53:23.410

我认为最好的方法是使用：

```
<uses-feature android:name="android.hardware.telephony" /> 
```

这样你就可以确保设备不支持电话，我知道的所有平板电脑都是什么情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T06:42:09.627

为什么你希望它只在非平板电脑上运行？是否有您需要的功能（如短信）？如果是这样，请在清单中添加 uses-feature 标签。如果它基于屏幕尺寸，为什么不扩大规模并获得更多用户？

此外，屏幕尺寸对手机和平板电脑没有任何意义。我的手机是 Note 2，它的像素比第一代平板电脑多。您可以禁用 Play 商店中不需要的所有设备，但这会很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T06:58:03.113

支持屏幕不会限制从google play下载的应用程序，如果要限制，只需使用兼容的屏幕

```
<compatible-screens>
<screen android:screenSize=["small" | "normal" | "large" | "xlarge"]
        android:screenDensity=["ldpi" | "mdpi" | "hdpi" | "xhdpi"] />
...
</compatible-screens> 
```

读[这个](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T06:39:58.080

支持屏幕将在您将您的 apk 文件上传到 Google Playstore 后生效，直到您不会影响此功能。

另请参阅[Google Play 上的过滤器](http://developer.android.com/google/play/filters.html)文档了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:54:17.487

看看这个关于如何检查 SMS（或电话）功能的[答案。](https://stackoverflow.com/a/5707822/2190341)当然，最合适的解决方案是在 Google Play 上进行过滤。但是如果你错过了一些东西并想在运行时检查，我认为这会有所帮助。

# jquery - 停止所有 jwplayers

> ID：15540980
> 
> 赞同：1
> 
> 时间：2013-03-21T06:37:02.050
> 
> 标签：jquery, jwplayer

```
$('.gallery li:not(.current) a').click(function () {
    jwplayer().stop();
}); 
```

...有效，但仅适用于一个玩家，如果有多个玩家在单独的选项卡中运行，它不会阻止所有玩家。

如何停止所有正在运行的玩家？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:41:52.517

这篇文章可能会解决您的问题：

[http://www.longtailvideo.com/support/forums/jw-player/javascript-interaction/24499/jwplayerstop-how-to-use-this-code-for-multiple-players/](http://www.longtailvideo.com/support/forums/jw-player/javascript-interaction/24499/jwplayerstop-how-to-use-this-code-for-multiple-players/)

# c# - WriteableBitmapEx 的性能

> ID：15540996
> 
> 赞同：3
> 
> 时间：2013-03-21T06:37:57.657
> 
> 标签：c#, performance, writeablebitmapex

我正在生成带有 37000 个左右标记的全屏图像。为此，我使用以下代码

```
 private void DrawMarkers(WriteableBitmap bitmap)
    {

            WriteableBitmap marker = BitmapFactory.New(5, 5);
            var sourceRect = new Rect(0, 0, 5, 5);
            marker.DrawEllipseCentered(3, 3, 2, 2, Colors.Blue);
            var s = Stopwatch.StartNew();
            foreach (var point in TransformedPoints)
            {
                bitmap.Blit(new Rect((int)point.X, (int)point.Y, 5, 5), marker, sourceRect);
            }
            s.Stop();
            Console.WriteLine("Blitting " + 
                 TransformedPoints.Count + 
                 " Points took " + 
                 s.ElapsedMilliseconds + " ms");

    } 
```

在我的 EliteBook 8770w Windows7 上，要传输这 37000 个点大约需要 203 毫秒。我已经从使用标准 WPF 框架元素到 drawVisuals，现在到可写位图。我需要实时缩放这组标记，所以标记需要重绘。我会说我需要大约 50 毫秒才能重绘它。

从我读到的 WriteableBitmap 是我能达到的最低级别。性能改进的下一步是什么？看来这需要委托给 GPU。我怎么能在 C# 中做到这一点，或者我应该使用哪些库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:21:50.720

一项重大改进是利用 BitmapContext 概念，这样您就不会一直锁定和解锁，并避免过多的像素副本。

```
using (marker.GetBitmapContext(ReadWriteMode.ReadOnly))
{
    using(bitmap.GetContext())
    {    
        foreach (var point in TransformedPoints)
        {
            bitmap.Blit(new Rect((int)point.X, (int)point.Y, 5, 5), marker, sourceRect);
        }
    }
} 
```

如果您不需要 alpha 混合，您应该提供 BlendMode.None：

```
bitmap.Blit(new Rect((int)point.X, (int)point.Y, 5, 5), marker, sourceRect, BlendMode.None); 
```

*   雷内

# javascript - Javascript iFrame 添加到 IE7 和 IE8 中的下载文件

> ID：15540997
> 
> 赞同：0
> 
> 时间：2013-03-21T06:38:04.357
> 
> 标签：javascript, jquery, iframe, download

我需要在 ajax 请求后下载文件。因此，我将 iframe 添加到将一些数据发布到 webmethod 并获取文件的页面中。这是位于按钮单击处理程序中的 javascript 代码：

```
var iframe = $("<iframe id='PDFIframe' style='display:none'></iframe>");
var iForm = $("<form id='PDFForm' action='App/Billing.asmx/GetPDF' target='PDFIframe' method='post' target='_parent'></form>")
            .html('<input type="hidden" name="HtmlContent64" value="' + htmlContent64 + '"/><input type="hidden" name="billNum" value="' + this.billId + '"/>');

iframe.append(iForm);
tempCmp.append(iframe);
iForm.submit(); 
```

但是我`iframe.append(iForm)`在 IE 7 和 8 上遇到了问题。在 IE 9 上，这个工作完美！我的代码有什么问题？

**编辑：**我更多地了解了这个问题，也许这个问题导致我在 IE9 中测试了不同的 IE 版本，改变了图片中的值。模式更改会导致此问题吗？也许它在真正的 7 和 8 IE 浏览器中工作正常。你怎么想？ ![在此处输入图像描述](../Images/21bba15f009c0b6ac3a7ea6d39dcc3ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:22:34.763

花了很多时间后，我没有找到我的问题的解决方案，但我找到了一些解决方法，帮助我在没有任何 iframe 的情况下下载 IE7、IE8、IE9 中的文件、打开新页面等。这是代码：

```
jQuery.download = function(url, data, method){
//url and data options required
if( url && data ){ 
    //data can be string of parameters or array/object
    data = typeof data == 'string' ? data : jQuery.param(data);
    //split params into form inputs
    var inputs = '';
    jQuery.each(data.split('&'), function(){ 
        var pair = this.split('=');
        inputs+='<input type="hidden" name="'+ pair[0] +'" value="'+ pair[1] +'" />'; 
    });
    //send request
    jQuery('<form action="'+ url +'" method="'+ (method||'post') +'">'+inputs+'</form>')
    .appendTo('body').submit().remove();
};
};
$.download('/export.php','filename=mySpreadsheet&format=xls&content=' + spreadsheetData ); 
```

也许这会对某人有用并节省时间；）这里是[用于请求类似 Ajax 的文件下载的完整详细信息 jQuery 插件](http://filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)

# python - 错误：RELAXNGV：RELAXNG_ERR_EXTRACONTENT：元素表单有额外内容：工作表

> ID：15540998
> 
> 赞同：0
> 
> 时间：2013-03-21T06:38:05.097
> 
> 标签：python, xml, module, openerp

我要去开发者工作offer模块。在那个模块中，如果我们选择了相关部门，我们可以选择工人为他们提供工作机会（在种植园行业）。尝试比较午餐模块（午餐订单），但出现此错误。（OpenERP 版本 7）

这是我的 view.xml

```
 <record model="ir.ui.view" id="bpl_work_offer_form">
        <field name="name">bpl.work.offer.form</field>
        <field name="model">bpl.work.offer</field>
        <field name="arch" type="xml">
            <form string='bpl_work_offer'>
                <sheet>
                    <group>
                        <group>
                            <field name='user_id' />
                        </group>
                        <group>
                            <field name='date_of_offer' />
                        </group>
                    </group>
                    <div name="Worker Selection"></div>
                    <separator string='Select workers' />
                    <field name='selected_workers_line_ids' nolabel='1'>
                        <tree string='List' editable='bottom'>
                            <field name='worker_id' />
                            <field name='is_selected' />
                        </tree>
                    </field>
                    <group class='oe_subtotal_footer oe_right'>
                        <field name='total_workers' />
                    </group>
                    <br />
                    <br />
                </sheet>
            </form>
        </field>
    </record> 
```

这是我的模型课

```
class bpl_work_offer(osv.osv):
    _name = "bpl.work.offer"
    _description = "BPL Work Offer"
    _columns = {
        'user_id': fields.many2one('res.users', 'User Name'),
        'date_of_offer': fields.date('Date'),
        'bpl_company_id':fields.many2one('bpl.company.registration', 'Company', help='Company'),
        'bpl_estate_id':fields.many2one('bpl.estate.registration', 'Estate', help='Estate'),
        'bpl_division_id':fields.many2one('bpl.division.registration', 'Division', help='Division'),
        'payment_type': fields.selection([('normal_work', 'Normal Work'), ('cash_work', 'Cash Work'), ('contract_work', 'Contract Work')], 'Payment Type'),
        'select_by': fields.selection([('by_name', 'By Names'), ('by_count', 'By Count')], 'Select  By'),
        'work_type': fields.selection([('tea', 'Tea'), ('rubber', 'Rubber'), ('sundry', 'Sundry')], 'Work Type'),
        'total_workers': fields.integer('Total Workers'),
        'selected_workers_line_ids': fields.one2many('selected.workers.line', 'worker_id', 'Workers', ondelete="cascade"),
    }

bpl_work_offer()

class selected_workers_line_ids(osv.osv):
    _name = 'selected.workers.line'
    _description = 'lunch order line'
    _columns = {
        'worker_id':fields.many2one('bpl.worker', 'Worker', help='Worker'),
        'is_selected': fields.boolean('Select', help="Selected or not"),
        }

selected_workers_line_ids() 
```

我的错误是这样的

```
2013-03-21 06:31:50,137 7539 ERROR bpl openerp.addons.base.ir.ir_ui_view: <string>:2:0:ERROR:RELAXNGV:RELAXNG_ERR_EXTRACONTENT: Element form has extra content: sheet
2013-03-21 06:31:50,164 7539 ERROR bpl openerp.tools.convert: Parse error in /home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/bpl/bpl_view.xml:276: 
<record model="ir.ui.view" id="bpl_work_offer_form">
            <field name="name">bpl.work.offer.form</field>
            <field name="model">bpl.work.offer</field>
            <field name="arch" type="xml">
                <form string="bpl_work_offer">
........
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/osv/orm.py", line 1544, in _validate
    raise except_orm('ValidateError', '\n'.join(error_msgs))
except_orm: ('ValidateError', u'Error occurred while validating the field(s) arch: Invalid XML for View Architecture!')
2013-03-21 06:31:50,185 7539 INFO bpl werkzeug: 127.0.0.1 - - [21/Mar/2013 06:31:50] "POST /web/session/authenticate HTTP/1.1" 200 - 
```

保存时发生错误。请检查我的表映射问题在哪里

```
Traceback (most recent call last):
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/sql_db.py", line 226, in execute
    res = self._obj.execute(query, params)
IntegrityError: insert or update on table "selected_workers_line" violates foreign key constraint "selected_workers_line_worker_id_fkey"
DETAIL:  Key (worker_id)=(1) is not present in table "bpl_worker".

2013-03-21 07:17:25,125 8275 ERROR bpl openerp.netsvc: Integrity Error
The operation cannot be completed, probably due to the following:
- deletion: you may be trying to delete a record while other records still reference it
- creation/update: a mandatory field is not correctly set 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:00:49.950

你应该是这样的：

```
<form string='bpl_work_offer' version="7.0"> 
```

然后它工作