# StackOverflow 问答 14644000-14644999

# c# - 如何知道该字符串包含一些字符？

> ID：14644003
> 
> 赞同：1
> 
> 时间：2013-02-01T10:14:36.680
> 
> 标签：c#, string, path, split

你好我想用这个字符串做，

```
D:\Bank Pelapor\BNI\Repository\201209\Instance\123456789-2012-09-30-BSMS1-1.xbrl 
```

路径与带有版本控制的文件一致，在文件扩展名之前是-1，我想做点什么，

现在我已经使用了这段代码，我拆分了路径：

```
string[] filefile = dr["Path_XBRL"].ToString().Split('\\', '-');

   if( filefile.length >11)
    {

      do.something();

    }

    else
    {
      do.somethingelse();
    } 
```

但我担心有一天路径会改变或修改，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:19:43.400

我假设`path`将具有以下格式：`"{DirectoryName}\{FileName}-{VersionNumber}.{Extension}"`.

要在不带扩展名的路径中获取文件名：`Path.GetFileNameWithoutExtension(myPath)`在`System.IO`.

```
string fileName = Path.GetFileNameWithoutExtension(path);  // Gets the file name without extension
string versionString = fileName.Split('-').LastOrDefault();  // Gets the string after the last "-"
int version;
if(int.TryParse(versionString, out version))  // If "versionString" can be converted into an integer
    // TODO : If there is a version number (stored in "version")
else
    // TODO : If there is no version number 
```

# memory-management - 如何将此逻辑地址转换为物理地址？

> ID：14644005
> 
> 赞同：2
> 
> 时间：2013-02-01T10:14:47.087
> 
> 标签：memory-management, operating-system

鉴于：

```
Logical addresss space=16
bits Physical address space=16 
bits Page size=2K 
```

逻辑地址 1027 将如何映射到以下页表的物理地址？

```
pf
0 9
1 7
2 3

```

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:28:58.507

地址`1027`映射到`p 0`因为`1027 % 2048(2K)=1027 floor(1027/2048)=0`。所以 1027 映射到`1027th byte of page 0`虚拟地址。

第 0 页虚拟地址根据页表映射到第 9 帧。

第 9 帧的基地址为`9 * 2048 = 18432`. 第 9 帧在物理内存中的基地址为 18342。

现在`1027th byte of frame 9 is at 18342 + 1027 = 19369`是物理内存的地址。

将数字更改为二进制，您就有了答案。
请参阅此[答案](https://stackoverflow.com/questions/11655087/convert-logical-virtual-address-to-physical-address/11662516#11662516)并按照那里提供的链接了解该概念。

干杯...

# ganglia - Ganglia - 从节点通过 TCP（xml 格式）轮询指标时的安全性

> ID：14644012
> 
> 赞同：1
> 
> 时间：2013-02-01T10:15:19.547
> 
> 标签：ganglia

![神经节架构](../Images/7628b753456abfdb6ea2b00847dad543.png)

背景：我是一名学生，我正在尝试为快速网络监控准备概念验证。

我们想象的上下文是我们有多个位于不同子网上的集群。我已经阅读了许多关于神经节的文档，我真正想知道的是在节点轮询期间，假设 gmetad 与节点也在不同的子网上，是否有任何安全措施用于保护通过 TCP 发送 XML 数据.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:47:51.457

尚不完全清楚您是要在这里询问 TCP 还是 UDP 传输，但我假设是 TCP，因为这就是 gmetad-gmetad 和 gmetad-gmond 通信的完成方式。

唯一的安全措施是`trusted_hosts`gmetad 的配置属性和可以为 gmond 的配置指定的[访问控制列表](http://sourceforge.net/apps/trac/ganglia/wiki/Gmond%203.1.x%20General%20Configuration#access_control)`tcp_accept_channel`。

如果您想避免窃听，您也许可以考虑在主机之间建立一条安全的隧道路由？

# python - 有没有用类实例替换模块的有效用例？

> ID：14644014
> 
> 赞同：0
> 
> 时间：2013-02-01T10:15:20.643
> 
> 标签：python

## 问题

ol' 模块 switcheroo是否有任何*有效*的用例，您将模块替换为类实例？我所说的*有效*用例是指普遍认为使用此技巧是解决问题的*最佳方法的情况。*例如，模块：

```
VERSION = (1, 2, 8)
VERSION_NAME = '1.2.8' 
```

可以转换成这样：

```
import sys

class ConstantsModule(object):
    def __init__(self):
        self.VERSION = (1, 2, 8)

    @property
    def VERSION_NAME(self):
        return u'{}.{}.{}'.format(*self.VERSION)

sys.modules[__name__] = ConstantsModule() 
```

现在`VERSION_NAME`是一个有逻辑的属性。

我已经用谷歌搜索了这个，但没有找到任何相关的东西。我在一段时间前阅读的 SO 答案中了解到了这个技巧，我知道这被称为“黑魔法”并且应该避免，但我对有效的用例很好奇。

* * *

## 我的具体用例

我的一个模块有一个小问题，如果该模块是类实例，则可以轻松解决。我有一个名为 的“常量” `VERSION_NAME`，它是 的字符串版本`VERSION`，它又是一个包含我的应用程序版本信息的元组。在我的`VERSION_NAME`整个项目和基于这个的其他几个项目中都使用了它。现在我想`VERSION_NAME`包含一些逻辑 - 我希望它基于`VERSION`这样我不必一直手动编辑它，并且我希望它的格式根据几个环境情况略有不同。在我看来，我有两个选择：

*   `VERSION_NAME`查找我的项目及其所有子项目中的每个用例，并将其更改为函数调用，例如`get_version_name`.
*   如上所示调用黑魔法。

这个问题与我的用例无关，这只是我认为它*可以*用于什么的一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:21:47.087

由于 Python 中的一切都是对象，所以它没有什么黑魔法。这只是鸭子打字；如果你创建一个像模块一样走路和说话的对象，那么 Python 的其余部分就不会更明智了。

但是，对于您的特定用例，您无需诉诸这种程度的欺骗。只需在导入时计算版本名称：

```
VERSION_NAME = u'{}.{}.{}'.format(*VERSION) 
```

没有任何地方说模块全局变量只能是字面值；只需为它们使用 Python 表达式。

毕竟，你的`VERSION_NAME`变量在程序的生命周期内不会改变，你只需要生成*一次*。仅当您需要每次访问时都需要重新计算的属性时才使用属性。

# xcode - Xcode 命令行工具看不到 .dylib 文件

> ID：14644017
> 
> 赞同：2
> 
> 时间：2013-02-01T10:15:24.747
> 
> 标签：xcode, opencv, xcode4.2, dylib

在终端中，我已经安装了 cmake 并构建了 OpenCV。当我输入时`ls /usr/local/lib`，我有很多文件 .dylib 我必须将 OpenCV 提供的 .dylib 文件链接到项目中，我需要在我的项目中链接框架。我打开命令行工具（通过将文件添加到“...”）和`/usr/local/lib`. 并且没有 .dylib 告诉我有什么问题谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:19:23.983

您的 Xcode 项目配置为针对 SDK 构建。OpenCV 库不是 SDK 的一部分，它们安装在您的系统上。将您的 Xcode 项目切换为使用“当前 OS X”的“基础 SDK”，问题应该会消失。

# c# - 具有简单 SSL 支持的嵌入式 C# Web 服务器

> ID：14644018
> 
> 赞同：5
> 
> 时间：2013-02-01T10:15:25.953
> 
> 标签：c#, http, mono

我正在寻找具有开箱即用 SSL 支持的嵌入式 Web 服务器，最好从命令行或一些简单的配置进行配置，而无需更改系统范围的配置（如注册表）。它也应该适用于单声道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:16:46.757

你试过我的旧服务器[http://webserver.codeplex.com](http://webserver.codeplex.com)吗？它支持 SSL 并且至少用于在 MONO 上运行。

我也在（慢慢地）构建一个新的，它还没有 SSL 支持（但你自己实现并不难）：http: [//github.com/jgauffin/griffin.webserver](http://github.com/jgauffin/griffin.webserver)

**编辑**

Griffin.Framework 中的 HttpListener 现在支持 SSL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-25T20:49:09.160

我最近遇到了两个这样的包。

ceenhttpd - [https://github.com/kenkendk/ceenhttpd](https://github.com/kenkendk/ceenhttpd)

和

uHttpSharp - [https://github.com/Code-Sharp/uHttpSharp](https://github.com/Code-Sharp/uHttpSharp)

我喜欢这些的部分是它们都允许您从磁盘加载证书文件。如果您使用原始的 HttpListener，那会很痛苦。

如果您愿意使用 .NET Core，您还可以自托管 Kesterel。我计划在将项目转换为 .NET 5 后立即使用它。[这里有一个小示例](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel?view=aspnetcore-5.0#get-started)代码。

# javascript - 在 Javascript 中链接，为什么它在这段代码中很有用？

> ID：14644020
> 
> 赞同：1
> 
> 时间：2013-02-01T10:15:29.813
> 
> 标签：javascript, oop, chaining

一直在阅读我最喜欢的程序员之一 Douglas Crockford，尤其是“方法”方法。

JavaScript：

```
Function.prototype.method = function (name, func) { 
    this.prototype[name] = func; 
    return this; 
}; 
function myfunc(value) { 
this.value=value; 
} 

myfunc.method('toString', function () { 
    return this.value; 
}); 

var testvar = new myfunc('myself').toString(); 
alert(testvar); 
```

我对`return this`.
这里是什么`return this`意思？
在我读过的内容中，该方法在没有它的情况下有效，称为链接，但我如何使用此“方法”函数使用链接，为什么它有用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:16:49.317

据我了解。
当您想向您正在扩展的函数（您正在使用的对象）添加多个原型时，更改机制非常有用。
请参阅下面的示例扩展：

```
Function.prototype.method = function(name, func)
{
    this.prototype[name] = func;
    return this;
};
function myfunc(value)
{
    this.value = value;
}

myfunc
    .method('toString',     function() {return this.value;})
    .method('toStringMore', function() {return this.value + ' more';})
    .method('bothFuncs',    function() {return this.toString() + ' ' + this.toStringMore();});

var testvar = new myfunc('myself');

alert(testvar.toString());
alert(testvar.toStringMore());
alert(testvar.bothFuncs()); 
```

如果排除了上述情况`return this`，则结果是对“方法”函数的第二次和第三次调用将失败。
另外请注意，直到链的末尾没有分号。

希望有帮助

# sql - Sql 选择查询中的动态位置

> ID：14644023
> 
> 赞同：1
> 
> 时间：2013-02-01T10:15:36.653
> 
> 标签：sql, sql-server, where

我想创建一个这样的 sql 查询：

```
Select* from Table where 
(if picod=1)
{
  dvdt= "xxxx" 
}
(if picod=2)
{
  cddt= "xxxx" 
}
(if picod=3)
{
  bldt= "xxxx" 
}
(if picod=3)
{
  fadt= "xxxx" 
} 
```

我不知道如何在 SQL 中执行此操作。

任何人都可以帮助我吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:19:06.137

```
Select* from Table 
where (picod=1 and dvdt= 'xxxx') or  (picod=2 and cddt= 'xxxx') or ....... (XXXX) or.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:19:55.443

只需使用`OR`

```
SELECT  *
FROM    Table
WHERE   (Picod = 1 AND dvdt = 'xxxx')
OR      (Picod = 2 AND cddt = 'xxxx')
OR      (Picod = 3 AND bldt = 'xxxx')
OR      (Picod = 3 AND fadt = 'xxxx'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:21:30.773

```
 SELECT  *
    FROM    Table
    WHERE  'xxxx' = case Picod  
     when 1 then dvdt
     when 2 then cddt
     when 3 then bldt 
     when 4 then fadt 
    end 
```

# javascript - Ember.js ember-data 和跨域 ajax 请求

> ID：14644027
> 
> 赞同：0
> 
> 时间：2013-02-01T10:16:05.293
> 
> 标签：javascript, ajax, ember.js, ember-data

伙计们！使用 ember-data 存储从远程服务器获取的跨域 ajax 请求的数据的任何示例？现在我有了这个，但是...

```
TravelClient.Tour = Ember.Object.extend({
});

TravelClient.Tour.reopenClass({
  allTours: [],
  find: function(){
    $.ajax({
      url: 'http://someIP:somePORT/tours.json',
      dataType: 'jsonp',
      context: this,
      success: function(data){
        data.forEach(function(tour){
          this.allTours.addObject(TravelClient.Tour.create(tour))
        }, this)
      }
    })
    return this.allTours;
  }
}); 
```

**更新：** 现在我这样做：

```
TravelClient.Tour.reopenClass({
  allTours: [],
  find: function(){
    $.ajax({
      url: 'http://someIP:somePORT/tours.json',
      dataType: 'jsonp',
      context: this,
      success: function(response){
        response.data.forEach(function(tour){
          this.allTours.addObject(TravelClient.Tour.create(tour))
        }, this)
      }
    })
    return this.allTours;
  }
}); 
```

但是得到这个错误：

```
Uncaught TypeError: Cannot call method 'forEach' of undefined 
```

**快照：**

有了这个：

```
$.ajax({
  dataType: 'jsonp',
  url:"http://192.168.1.39:3000/tours.json",
  success:function(response){
    return response.data;
  }
}); 
```

我明白了：

```
Object
abort: function (e){var t=e||S;return r&&r.abort(t),N(0,t),this}
always: function (){return i.done(arguments).fail(arguments),this}
complete: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
done: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
error: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
fail: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
getAllResponseHeaders: function (){return E===2?s:null}
getResponseHeader: function (e){var t;if(E===2){if(!o){o={};while(t=wn.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return t==null?null:t}
overrideMimeType: function (e){return E||(c.mimeType=e),this}
pipe: function (){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,s){var o=s[0],u=y.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()}
progress: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
promise: function (e){return e!=null?y.extend(e,r):r}
readyState: 4
setRequestHeader: function (e,t){var n=e.toLowerCase();return E||(e=b[n]=b[n]||e,g[e]=t),this}
state: function (){return n}
status: 200
statusCode: function (e){var t;if(e)if(E<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this}
statusText: "success"
success: function (){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this}
then: function (){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,s){var o=s[0],u=y.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()}
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:54:39.657

这更多的是关于服务器应该如何向客户端返回数据而不是关于 ember-data，您需要做的是，将对 ajax 调用的响应包装在一个回调中，该回调的值作为参数发送给服务器。一旦你这样做了，对于 ember-data 来说，它就像往常一样，即对它非常透明

这是在 Rails 上使用 ruby​​ 的示例

在客户端

```
$.ajax({
    dataType: 'jsonp',
    success: function(response) {
       // loop through your objects
       response.accounts.forEach(function(account){
          console.info(account.id)
       })
    }
}); 
```

在服务器端，您应该执行类似于

```
params[:callback] + '("' + response + '");'; 
```

例如，产生类似于以下内容的响应：

```
callbackValue00923411(
    {
        "accounts":
        [
            {
                "id": 123,
                "name": "Personal",
            },
            {
                "id": 234,
                "name": "Corporate",
            }
        ]
    }
); 
```

然后在您的成功功能中，您可以通过这种方式访问​​帐户列表，如上所述

```
success: function(response) {
   // loop through your objects
   response.accounts.forEach(function(account){
      console.info(account.id)
   })
} 
```

这是一个关于如何使用/处理 jsonp ajax 请求的[示例](http://www.jquery4u.com/json/jsonp-examples/)

如果您可以访问服务器，则可以考虑将其配置为使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)并避免使用 jsonp

# unit-testing - 在单元测试中比较文本

> ID：14644030
> 
> 赞同：4
> 
> 时间：2013-02-01T10:16:14.530
> 
> 标签：unit-testing, mstest

我需要比较两个文本块是否有任何差异，以确定我的单元测试是否通过。不幸的是，文本大约有 500 个字符长，如果只有一个字符不同，就很难发现问题出在哪里。MSTest 没有告诉我哪些个别字符不同，它只是告诉我有区别。

单元测试时比较这样的文本的最佳方法是什么？

*（我正在使用 MSTest（我会考虑迁移到 NUnit，但我不想因为我所有的测试都已经用 MSTest 编写过）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:57:12.587

有一个专门为此类场景设计的库[Approval Tests 。](http://approvaltests.sourceforge.net/)它同时支持[mstest](/questions/tagged/mstest "显示标记为“mstest”的问题")和[nunit](/questions/tagged/nunit "显示标记为“nunit”的问题")。

库是围绕“黄金副本”测试方法构建的——主数据集的可信副本，您只需准备和验证一次

```
[TestClass]
public Tests
{
    [TestMethod]
    public void LongTextTest()
    {
        // act: get long-long text
        string longText = GetLongText();

        //assert: will compare longText variable with file 
        //    Tests.LongTextTest.approved.txt
        // if there is some differences, 
        // it will start default diff tool to show actual differences
        Approvals.Verify(longText);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:44:52.487

您可以使用 MSTest`CollectionAssert`类。

```
[TestMethod]
public void TestTest()
{
    string strA = "Hello World";
    string strB = "Hello World";

    // OK
    CollectionAssert.AreEqual(strA.ToCharArray(), strB.ToCharArray(), "Not equal!");

    //Uncomment that assert to see what error msg is when elements number differ
     //strA = "Hello Worl";
    //strB = "Hello World";
    //// Microsoft.VisualStudio.TestTools.UnitTesting.AssertFailedException: CollectionAssert.AreEqual failed. Not equal!(Different number of elements.)
    //CollectionAssert.AreEqual(strA.ToCharArray(), strB.ToCharArray(), "Not equal!");

    //Uncomment that assert to see what error msg is when elements are actually different
    //strA = "Hello World";
    //strB = "Hello Vorld";
    //// Microsoft.VisualStudio.TestTools.UnitTesting.AssertFailedException: CollectionAssert.AreEqual failed. Not equal!(Element at index 6 do not match.)
    //CollectionAssert.AreEqual(strA.ToCharArray(), strB.ToCharArray(), "Not equal!");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:26:32.530

写一个助手来做比较。

```
if(!String.Equals(textA, textB, StringComparison.OrdinalIgnoreCase))
{
  int variesAtIndex = Utilities.DoByteComparison(textA,textB); // can be multiple, return -1 if all good
} // now assert on variesAtIndex` 
```

# ada - 请求使用 ada APQ 的示例/教程

> ID：14644035
> 
> 赞同：2
> 
> 时间：2013-02-01T10:16:30.413
> 
> 标签：ada

我在谷歌上看了很多，但似乎找不到任何关于如何将[APQ](http://sourceforge.net/projects/apq/)用于 ada95 的示例。如果有人有使用这个库的经验，我将不胜感激任何小例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:35:27.787

该[手册](http://apq.cvs.sourceforge.net/viewvc/apq/apq/apq-manual.pdf?view=log)相当全面，[源代码](http://apq.cvs.sourceforge.net/viewvc/apq/apq/)包括几个示例目录：`eg*`.

# java - 使用 Hibernate Transient Set 抛出空异常

> ID：14644039
> 
> 赞同：0
> 
> 时间：2013-02-01T10:16:43.073
> 
> 标签：java, hibernate, set

我正在尝试设置带有下拉儿童的菜单。我为菜单项创建了一个常规表，以及一个集合/数组/列表（每个都尝试过），子项将被移动到其中以便更容易通过 JSP 呈现。但是，当我尝试使用 .add() 将项目添加到子列表中时，我收到一个 java.lang.NullPointerException 并且它没有进一步。

我的系统是使用 Spring / Hibernate 设置的，除此之外一切正常。

模型（不包括不相关的字段和 getter/setter）：

```
public class Menu {
  @Transient
  private Set<Menu> pageChildren;

  @Column(name = "pageParent")
  private Integer pageParent;

  @Column(name = "pageId")
  private Integer pageId;

  ... 
```

以及来自控制器的必要片段：

```
List<Menu> menuItems = new ArrayList<Menu>();
menuItems = menuService.getAll();
for (Menu item: menuItems) {
  if (item.getPageType() == 1 && item.getPageParent() > 0) {
    menuItems.get(item.getPageParent() - 1).getPageChildren().add(item);
    menuItems.remove(item);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:04:11.407

瞬态变量需要初始化，for 循环配置错误。

模型（不包括不相关的字段和 getter/setter）：

```
public class Menu {
  @Transient
  private Set<Menu> pageChildren = new HashSet<Menu>();       //CHANGED

  @Column(name = "pageParent")
  private Integer pageParent;

  @Column(name = "pageId")
  private Integer pageId;

  ... 
```

以及来自控制器的必要片段：

```
List<Menu> menuItems = new ArrayList<Menu>();
menuItems = menuService.getAll();
for(int i=0; i<menuItems.size(); i++){                        //CHANGED
  Menu item = menuItems.get(i);                               //CHANGED
  if (item.getPageType() == 1 && item.getPageParent() > 0) {
    menuItems.get(item.getPageParent() - 1).getPageChildren().add(item);
    menuItems.remove(item);
  }
} 
```

# netbeans - 使用 NetBeans 7.2.1 生成 API

> ID：14644044
> 
> 赞同：3
> 
> 时间：2013-02-01T10:16:50.880
> 
> 标签：netbeans, documentation-generation, apigen

我无法生成我的项目的文档。在 NetBeans 下得到错误消息“'”php.exe“'不是内部或外部命令、可运行程序或批处理文件。”。ApiGen 2.8.0 独立版已解压缩到一个单独的文件夹中，其参考在 Tools->Options->apigen 下给出。任何人的任何建议？提前Thks。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T02:19:13.987

问题是您的 Netbeans 安装默认情况下不知道您的 PHP 可执行文件在哪里。您需要按照以下步骤将 PHP 路径添加到您的 Windows 环境；

1.  根据个人喜好将 APIGen 解压到合适的位置
2.  转到您的 PHP 可执行目录（对于 C 上的 XAMPP，它看起来像 C:\xampp\php
3.  复制顶部窗口路径中的位置地址
4.  打开开始菜单并右键单击“计算机”
5.  选择左侧的“高级系统设置”，然后在新窗口中单击“环境变量”。
6.  在第二个列表视图中，标记“路径”条目并单击“编辑”
7.  将光标定位在值字段的最后。
8.  在第 3 步中键入分号并粘贴复制的路径，确保路径以反斜杠结尾。
9.  单击确定，然后确保重新启动 Netbeans。
10.  转到选项 - > PHP，然后单击“搜索”，Netbeans 现在应该能够找到您的 PHP 可执行文件。

在 netbeans 中设置 APIGen；

1.  转到选项 -> PHP -> APIGen
2.  浏览到您提取的 APIGen 位置并选择 apigen.bat 文件。
3.  您还可以在 apigen.bat 之后添加“--debug”，以便在出现故障时获得详细的错误报告。

您的系统现在应该可以生成文档了。第一次生成文档时，系统会要求您选择输出文件夹以及文档应涵盖的内容。

# iphone - 在 JSON 中 POST 用户名和密码

> ID：14644045
> 
> 赞同：0
> 
> 时间：2013-02-01T10:16:58.193
> 
> 标签：iphone, ios, json, web-services, url

我有一个网络服务，我正在使用一个网址，例如

```
//myurl/index.jsp?user_name=bob&user_pwd=new 
```

如您所见，用户名已设置为“bob”，密码设置为“new”。该站点在输入时会提供此 json 文件，

```
[{"success":"1"}] 
```

你如何在 xcode 上实现它，当用户输入`"bob"`用户名和`"new"`密码时，它应该引导到下一个控制器。我怎样才能做到这一点？

我按照本[教程](http://dipinkrishna.com/blog/2012/03/iphoneios-programming-login-screen-post-data-url-parses-json-response/5/)进行了操作，尽管它并不完全相同，您是如何做到的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:20:55.337

使用导航控制器并将视图控制器设置为 rootViewController。然后在用户输入凭据后，将新的视图控制器推送到导航堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:35:32.137

发布登录数据

```
 NSString *soapMsg = [NSString stringWithFormat:@"&data={\"LoginUser\":[{\"UserName\":\"%@\",\"Password\":\"%@\"}]}",firstname.text, password.text];

    NSHTTPURLResponse *response;
    NSData *myRequestData = [ NSData dataWithBytes: [ soapMsg UTF8String ] length: [ soapMsg length ] ];
    NSString *postLength = [NSString stringWithFormat:@"%d", [myRequestData length]];
    NSMutableURLRequest *request = [ [ NSMutableURLRequest alloc ] initWithURL: [ NSURL URLWithString:@"http://myurl/index.jsp"]];

    [request setHTTPMethod: @"POST" ];
    [request setHTTPBody: myRequestData ];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: myRequestData];

    NSURLConnection *myConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

接收并有效的json数据

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
        NSString *responseString = [[NSString alloc] initWithData:WebXmlData encoding:NSUTF8StringEncoding];
        NSDictionary *results = [responseString JSONValue];
        BOOL success = [[results objectForKey:@"success"] boolValue];

        if (success) {
             ViewController *viewController =[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
             [self.navigationController pushViewController:viewController animated:YES];    
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:30:45.907

在以下代码中，您可以通过任 一`GET`或`POST`方法传递数据……使用任何一个（***如您所愿***）

```
-(void) sendRequest
{
  //////////////////////////// GET METHOD  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

   NSString *strURL=[NSString stringWithFormat:@"http://myurl/index.jsp?user_name=bob&user_pwd=new"];
    self.request=[NSURLRequest requestWithURL:[NSURL URLWithString:strURL]];
    self.nsCon=[[NSURLConnection alloc] initWithRequest:request delegate:self];

 //////////////////////////// POST METHOD  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    NSString *postString = [NSString stringWithFormat:@"&user_name=bob&user_pwd=new"];
    NSString *url = [NSString stringWithFormat:@"http://myurl/index.jsp/"];

    self.request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
    [self.request setHTTPMethod:@"POST"];

    [self.request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];

 //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    if(self.nsCon)
    {
        self.receivedData=[[NSMutableData alloc] init];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Not Connected !!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
}

#pragma mark -
#pragma mark - Connection Delegate Methods

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [GeneralClass stopHUD];
    NSLog(@"Connection failed.");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"") message:NSLocalizedString(@"Connection failed!",@"") delegate:nil cancelButtonTitle:NSLocalizedString(@"OK",@"") otherButtonTitles:nil];
    [alert show]; alert = nil;
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        NSString *responseString = [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding];
        NSMutableDictionary *receivedData = [responseString JSONValue];

        if([[receivedData objectForKey:@"success"]  isEqualToString:@"1"])
        {
            MainDetailViewController *mdController = [[MainDetailViewController alloc] init];
            [self.navigationController pushViewController:mdController animated:YES];
        }
        else
        {
            NSLog(@"%@",receivedData);
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:28:35.510

从 json 响应中获取成功的值。如果它等于 1，则推送到下一个控制器，否则什么也不做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:25:26.030

不完全是您正在寻找的答案，但这更像是您应该使用什么的建议。我使用[github 链接](https://github.com/AFNetworking/AFNetworking)进行网络相关活动。他们有很好的文档并且非常易于使用（使用块）

```
NSDictionary *paramsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"user",@"client_id",@"password",@"new", nil];

    [[YourAFHttpClientExtenstion sharedInstance] postPath:LOGIN_PATH parameters:paramsDictionary success:^(AFHTTPRequestOperation *operation, id responseObject) {
        //handle success

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
       // handle error.
    }]; 
```

YourAFHttpClientExtenstion 是对 AFHttpClient 的扩展，增加了共享实例的调用方法，并实现了 initWithBaseUr：

# php - 将嵌套数组转换为 mysql 查询

> ID：14644046
> 
> 赞同：0
> 
> 时间：2013-02-01T10:17:00.180
> 
> 标签：php, mysql, arrays, multidimensional-array

我需要用这个数组生成一个mysql插入查询，其中列名是field_name，值是field_values。我尝试使用 implode，这里是它的嵌套数组，让我很困扰。

```
 Array
    (
        [0] => Array
            (
                [field_name] => Date
                [field_value] => 01/02/2013
            )

        [1] => Array
            (
                [field_name] => Time
                [field_value] => 03:20 PM
            )

        [2] => Array
            (
                [field_name] => submitted_lat
                [field_value] => 13.06114
            )

        [3] => Array
            (
                [field_name] => submitted_long
                [field_value] => 80.2371547
            )

        [4] => Array
            (
                [field_name] => submitted_on
                [field_value] => 2013-02-01 15:20:10
            )

        [5] => Array
            (
                [field_name] => submitted_by
                [field_value] => superadmin@gmail.com
            )

        [6] => Array
            (
                [field_name] => pdf
                [field_value] =>
            )

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:28:22.297

尝试这个

```
$sql = "INSERT INTO `table_name` SET ";
$sql_fields='';

foreach($array_name as $k=>$v){
    $sql_fields .= "`".$v['field_name']."`='".$v['field_value']."', ";
}

$sql_fields = substr($sql_fields,0,-2);
$sql .= $sql_fields;
echo $sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:37:15.370

一个非常简单的方法是这样的：

```
$query = 'insert into table ';
foreach($inputs as $input) {
  $query .= ' '.$input['field_name'].' = '.$input['field_value']; 
}
echo $query; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T10:23:16.483

```
$fields=array();
$values=array();
for($i=0;$i<count($array);$i++)
{
   $fields[]=$array[$i]['field_name'];
   $values[]=$array[$i]['field_value'];
}

if(count($array) > 0)
{
   $query="Insert into tablename (".implode(",", $fields).") values (".implode(",", $values).")";
   mysql_query($query);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T10:26:20.267

您需要确保您的值是正确的并受到保护以避免 SQL 注入。动态构建您自己的 SQL 查询并直接插入您的数据库是不安全的。

无论如何，您可以使用[array_map()](http://php.net/manual/en/function.array-map.php)执行以下操作：

```
$arr = array(array("name" => "column1", "value" => "value1"),
             array("name" => "column2", "value" => "value2"),
             array("name" => "column3", "value" => "value3"));

$columns = array_map(function($item) { return $item['name'];}, $arr);
$values = array_map(function($item) { return "'". $item['value'] . "'";}, $arr);

$columnsList = implode(',', $columns);
$valuesList = implode(',', $values);

$sql = "INSERT INTO mytable($columnsList) VALUES ($valuesList)"; 
```

编辑：正如介绍中所说，这不安全，最好使用[MySQLi](http://www.php.net/manual/en/class.mysqli.php)或[PDO](http://php.net/manual/en/class.pdo.php)。但是您还需要知道要插入的列的类型。

# python - 在 python 中给出命令/shell 类型的交互

> ID：14644061
> 
> 赞同：2
> 
> 时间：2013-02-01T10:18:02.217
> 
> 标签：python

所以说我有这张图

```
class Graph:
    def __init__(self):
        self.nodes =[]
        self.edges = {}

    def add_node(self,value):
        self.nodes.append(value)

    def is_node_present(self,node):
        return True if node in self.nodes else False 
```

现在我想做的是让用户与这个类进行交互。比如：

```
> g = Graph()
 query executed
> g.add_node(2)
  query executed
>g.is_node_present(2)
  True 
```

你知道这样的事情......（直到用户按下一些秘密按钮退出）

我如何在python中做到这一点谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:25:57.900

您想查看[http://docs.python.org/2/library/cmd.html](http://docs.python.org/2/library/cmd.html)因为它处理处理循环等。

Dough Hellman [http://www.doughellmann.com/PyMOTW/cmd/](http://www.doughellmann.com/PyMOTW/cmd/)总是一个很好的例子资源。

从面团

```
import cmd

class HelloWorld(cmd.Cmd):
    """Simple command processor example."""

    def do_greet(self, person):
        """greet [person]
        Greet the named person"""
        if person:
            print "hi,", person
        else:
            print 'hi'

    def do_EOF(self, line):
        return True

    def postloop(self):
        print

if __name__ == '__main__':
    HelloWorld().cmdloop() 
```

例子

```
$ python cmd_arguments.py
(Cmd) help

Documented commands (type help ):
========================================
greet

Undocumented commands:
======================
EOF  help

(Cmd) help greet
greet [person]
        Greet the named person 
```

再次全部来自 Dough Hellman：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:22:35.580

非常简单的类似 python shell 的环境，使用`exec`：

```
cmd = raw_input("> ")
while cmd:
    try:
        exec(cmd)
    except Exception, e:
        print str(e)
    cmd = raw_input("> ") 
```

作为旁注，使用`exec`是危险的，只能由受信任的用户执行。这允许用户在您的系统上运行他们希望的任何命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:24:06.517

您可以使用 raw_input() 执行此操作要退出，您必须按 Crtl+C

一个小示例脚本：

```
import readline # allows use of arrow keys (up/down) in raw_input()

# Main function
def main():
  # endless command loop
  while True:
    try:
      command = raw_input('$ ')
    except KeyboardInterrupt:
      print   # end programm with new line
      exit()

    parseCommand(command)

def parseCommand(command):
  print 'not implemented yet'

if (__name__ == '__main__'):
  main() 
```

# automapper - AutoMapper如何展平嵌套列表

> ID：14644065
> 
> 赞同：2
> 
> 时间：2013-02-01T10:18:08.943
> 
> 标签：automapper

我正在尝试使用 automapper 将一些嵌套列表映射到扁平结构列表中。目前，我能够用名称映射正确数量的学分，但我无法获得要映射的角色和角色描述。

我正在尝试获得这样的扁平列表。

约翰史密斯，演员，邪恶博士

约翰史密斯，作家，空

弗兰克·布朗，董事，空

乔·格林，演员，追随者

这是我的域模型、视图模型和映射的缩减版本。我在使用 Domain.Credit 到 ViewModel.Credit 映射时做错了什么？

```
//Domain Model
public class Talent
{
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual IList<Credit> Credits { get; set; }
}

public class Credit
{
    public virtual Role Role { get; set; }
    public virtual string Subtitle { get; set; }
}

public class Role
{
    public virtual string Title { get; set; }        
}

//View Model
public class EpisodeViewModel
{
    public IList<Credit> Credits { get; set; }

    public class Credit
    {
        public string Name { get; set; }
        public string Role { get; set; }
        public string RoleDescription { get; set; }
    }
}

//Mappings
Mapper.CreateMap<Episode, EpisodeViewModel>()
    .ForMember(destination => destination.Credits, options => options.MapFrom(source => source.Talent));

Mapper.CreateMap<Talent, Credit>()
    .ForMember(destination => destination.Name, options => options.MapFrom(source => string.Format("{0} {1}", source.FirstName, source.LastName)));

Mapper.CreateMap<Domain.Credit, Credit>()
    .ForMember(destination => destination.Role, options => options.MapFrom(source => source.Role.Title))
    .ForMember(destination => destination.RoleDescription, options => options.MapFrom(source => source.Subtitle)); 
```

# c# - C# - 调用此泛型方法的两种方法。有什么区别吗？

> ID：14644070
> 
> 赞同：-2
> 
> 时间：2013-02-01T10:18:28.297
> 
> 标签：c#, generics

我使用此代码从另一个 MDIchild 表单中加载 MDIchild 表单。我仍在学习如何在我的方法中使用泛型，所以当我在这里的人们的帮助下最终让我的方法工作时，我会用两个稍微不同的代码结束你，在我的情况下，它们的工作方式相同。所以我的问题是——这两种变体做同样的工作是巧合，还是两种方法之间没有区别。

所以这里是版本 1：

```
protected void LoadAForm<T>(ref T sendTo) where T : Form
{
    MainForm frm = this.MdiParent as MainForm;
    if (frm != null)
    {
        sendTo = SingletonFormProvider.GetInstance<T>(frm, true);
        sendTo.MdiParent = frm;
        sendTo.Dock = DockStyle.Fill;
        sendTo.Show();
    }
} 
```

这是第 2 版：

```
protected void LoadAForm<T>(ref T sendTo) where T : Form
{
    MainForm frm = this.MdiParent as MainForm;
    T temp;
    if (frm != null)
    {
        temp= SingletonFormProvider.GetInstance<T>(frm, true);
        temp.MdiParent = frm;
        temp.Dock = DockStyle.Fill;
        temp.Show();
    }
} 
```

那么使用实例化是否有（如果有任何区别）`T temp`或者它只是同一件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:27:36.887

这与泛型无关。这是关于`ref`参数的（错误）使用。

> 那么使用 T temp 实例化是否有（如果有任何区别）或者它只是同一件事？

在这种方法内部没有区别。但是在调用之后，传递给 'sendTo' 的参数将被版本 1 更改，并且在使用版本 2 时保持不变。

从这段代码中无法猜出哪个是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:27:58.490

主要区别在于，在第二种情况下，您新创建和显示的表单在您的 sendTo 参数中的 LoadAForm 之外将不可用。第一种方法似乎工作正常，通过将引用参数传递给它来完成它的预期目的。

另一种自然的方法是将新创建的作为函数返回值形式返回，而不是通过引用参数返回它。

后期编辑：坦率地说，正如 Henk Holterman 所说，您在滥用 ref 用法。

顺便说一句，如果您仍想将参数传递给该方法，请使用**out**而不是**ref**！

好的，这就是我的意思：像这样声明你的方法：

```
protected T LoadAForm<T>() where T : Form 
```

并返回您刚刚实例化的表单。简单的。

# java - 通过一点 JAR 手术修复 Java 类路径问题

> ID：14644072
> 
> 赞同：1
> 
> 时间：2013-02-01T10:18:30.920
> 
> 标签：java, jar, classloader, slf4j, dll

我刚刚尝试测试一个使用 Apache Camel 2.10.3 的应用程序，并且在`DefaultCamelContext`实例化后立即得到以下异常：

```
java.lang.NoSuchMethodError: org.slf4j.Logger.trace(Ljava/lang/String;Ljava/lang/Object;)V
    at org.apache.camel.impl.DefaultPackageScanClassResolver.<init>(DefaultPackageScanClassResolver.java:70)
    at org.apache.camel.impl.DefaultCamelContext.<init>(DefaultCamelContext.java:222) 
```

我确保`slf4j-api-1.6.6`（这是 Camel 2.10.3 附带的）在运行时类路径上。接下来，我怀疑我可能有其他也使用 SLF4J 的依赖项，但依赖于它的不同版本。所以我打开 Eclipse，然后运行类型搜索`org.slf4j.Logger`，果然，我看到该类在 2 个不同的 JAR 中列出：（`slf4j-api-1.6.6.jar`如预期的那样！），以及另一个 3rd 方 jar `widget-lib-3.0.jar`，.

所以我打开了`widget-lib3.0.jar`，看到 SLF4J 像这样打包在里面：

```
widget-lib-3.0/
    com/
        <Widget Lib's compiled classes>
    org/
        slf4j/
            spi/
                ...
            impl/
                ...
            <A bunch of SLF4J classes, like LoggerFactory.class, etc.> 
```

没有办法知道它在这里使用的是什么版本的 SLF4J，但我敢打赌它是早于 1.6.x 的版本，这正是 Camel 2.10.3 想要的。

所以我最好的，稍微受过教育的猜测是，在运行时，JRE 类加载器`widget-lib-3.0.jar#org/slf4j/Logger`首先找到并加载它，*然后*它们去加载 Camel JAR 及其依赖项。然后，当`DefaultPackageScanClassResolver`调用 SLF4J`trace(String,Object)`方法时，它没有找到 SLF4J 的 1.6.6 版本，而是找到了附带的任何版本`widget-lib-3.0.jar`，并且该方法/重载不存在。

我在离开基地的路上吗？如果我不在基地，这对你意味着什么，所以？如果我走上正轨，那么我提出的解决方案将是在`widget-lib-3.0.jar`没有`org/slf4j`包的情况下重新 JAR（不存在其他更现代的版本）。我的理论是`slf4j-api-1.6.6`，它是向后兼容的，它将是唯一被加载的 SLF4J 版本，然后适用于两个 JAR。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:00:38.083

> “没有办法知道它在这里使用的是什么版本的 SLF4J，但我敢打赌它是早于 1.6.x 的版本，这正是 Camel 2.10.3 想要的”......

为什么不从 widget-lib-3.0.jar 中反编译类文件，看看是否存在所需的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:27:06.190

你的方法是正确的。SLF4J 1.x 在版本之间是 API 兼容的。（顺便说一句，你在使用 Maven 吗？它旨在防止这种问题）。

是什么`widget-lib`？是否有不包含其依赖项的版本？如果有，你应该使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:34:10.377

> 我在离开基地的路上吗？

不，看起来你在这里走上了正轨。

`org.sfl4j.Logger`确认它的方法是在小部件库JAR中获取副本，并使用`javah`它来查看它是否具有该`void trace(String, Object)`方法。

确认后，有多种解决方案：

*   最干净的解决方案是获取小部件库的源代码，针对您需要的 sfl4j 版本重新编译它，然后构建一个新版本的 JAR，而不在其中嵌入 sfl4j。（您可能需要修改小部件库的源代码，但不太可能）。

*   一个更简单的解决方案可能是确保您将更新的（并且应该是向后兼容的）slf4 API JAR 放在类路径上的小部件库 JAR 之前。这样，小部件 JAR 中旧版本的 slf4j 将被新版本“遮蔽”，并使用 Camel 需要的额外方法。

# regex - Perl - 正则表达式替换负数

> ID：14644074
> 
> 赞同：1
> 
> 时间：2013-02-01T10:18:33.703
> 
> 标签：regex, perl

如果找不到，我想替换一个完整的字符串，使用正则表达式。如果找到，我将使用它来替换：

```
my $var = "This apple is white";
$var =~ s/(.*)pple(.*)/No apples for you!/i; 
```

现在我想反转它，所以如果找不到 pple，那么它应该用“No apples for you！”替换所有内容。

我试图用这个反转

```
my $var = "This apple is white";
$var =~ s/(.*)^pple(.*)/No apples for you!/i; 
```

但我可以找出如何让它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:22:16.650

“替换所有内容”完全等于“分配新值”。因此，当简单匹配就足够了时，您不需要替换运算符 ('s///')：

```
my $var = 'This apple is white';
if ($var !~ /\bapple\b/i) {
  $var = 'No apples for you!';
} 
```

我稍微更改了一个正则表达式：添加了`/i`修饰符，使模式不区分大小写（以捕获“Apple”和“apple”；我想这就是为什么在原始帖子中它是“pple”），并用`\b`（以防止匹配 'Applegate' 和 'pineapple'）。

更新：我认为这是最清晰的解决方案，但从技术上讲，它仍然可以做到`if`：

```
$var =~ s/^(?!.*\bapple\b.*).*$/No apples for you/i; 
```

这是一个简单的测试：

```
use 5.010;
use warnings;
use strict;

my @fruit_strings = (
    'This apple is white',
    'This pineapple is violet',
    'This Apple is a company',
    'This pear is green');

for (@fruit_strings) {
     s/^(?!.*\bapple\b.*).*$/No apples for you/i;
     say;
} 
```

请注意，如果您的字符串是多行的，则必须向`/m`正则表达式添加修饰符。

另外我建议阅读这两个教程 - [Perl 正则表达式快速入门](http://perldoc.perl.org/perlrequick.html)和[Perl 正则表达式](http://perldoc.perl.org/perlre.html)。

# heroku - 为什么 Heroku DB 总是报告至少 3 个打开的连接？

> ID：14644078
> 
> 赞同：1
> 
> 时间：2013-02-01T10:18:41.260
> 
> 标签：heroku

我的 Heroku 生产数据库总是报告至少 3 个打开的连接：

```
$ heroku pg:info
Plan:        Crane
[...]
Connections: 3
[...] 
```

即使我将 web dynos 缩放到 0（我不使用 worker dynos），也存在 3 个连接。

这些联系的来源是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:33:57.730

我在 Heroku Postgres 上工作。这些连接被各种监控系统使用，帮助我们保持您的数据库处于活动状态。

您可以`heroku pg:psql`进入并运行`SELECT * from pg_stat_activity`以查看当前建立了哪些连接。

# logic - 使用 Coq Proof Assistant 证明 (p->q)->(~q->~p)

> ID：14644086
> 
> 赞同：2
> 
> 时间：2013-02-01T10:19:12.167
> 
> 标签：logic, coq, theorem-proving

我对 Coq 还很陌生，正在尝试来自 Ruth 和 Ryan 的示例引理。使用自然演绎的证明非常简单，这就是我想用 Coq 证明的。

```
assume p -> q.
  assume ~q.
    assume p.
      q.
      False.
    therefore ~p.
  therefore ~q -> ~p.
therefore (p -> q) => ~q => ~p. 
```

我被困在第 3 行`assume p`。

有人可以告诉我从自然演绎到 Coq 关键字是否存在一对一的映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T00:45:18.920

`NNPP`没用！

```
Theorem easy : forall p q:Prop, (p->q)->(~q->~p).
Proof. intros. intro. apply H0\. apply H. exact H1\. Qed. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:16:12.500

你可以像这样开始你的证明：

```
Section CONTRA.
Variables P Q : Prop.

Hypothesis PimpQ : P -> Q.
Hypothesis notQ  : ~Q.
Hypothesis Ptrue : P.

Theorem contra : False.
Proof. 
```

这是当时的环境：

```
1 subgoal

  P : Prop
  Q : Prop
  PimpQ : P -> Q
  notQ : ~ Q
  Ptrue : P
  ============================
   False 
```

您应该能够继续证明。它会比你的证明更冗长（在第 4 行你刚刚写了 q，在这里你必须通过结合`PimpQ`和来证明它`Ptrue`。它应该是公平的`trivial`...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T05:45:43.837

其实没那么难。

只是玩了一下，引入了双重否定，事情就自然而然地平息了。这就是证明的样子。

```
Theorem T1 : (~q->~p)->(p->q).
Proof.
intros.
apply NNPP.
intro.
apply H in H1.
contradiction.
Qed. 
```

呸呸呸！

# c# - 在c#中将制表符分隔文件转换为CSV文件

> ID：14644088
> 
> 赞同：-3
> 
> 时间：2013-02-01T10:19:15.040
> 
> 标签：c#

> **可能重复：**
> [如何将制表符分隔的文件转换为 CSV 文件](https://stackoverflow.com/questions/13605451/how-to-covert-tab-separated-file-to-csv-file)

我有一个制表符分隔的文本文件，我必须将其转换为 CSV 文件，所有这些都必须通过 C# 代码完成。我的 txt 文件非常大（1.5 GB），因此我想快速转换它。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:48:12.123

如果您的输入制表符分隔的文本文件没有任何逗号是数据的一部分，那么它是一个非常简单的查找和替换，类似于此处的其他答案：

```
var lines = File.ReadAllLines(path);
var csv= lines.Select(row => string.Join(",", row.Split('\t')));
File.WriteAllLines(path, csv); 
```

但是如果你的数据有逗号，这样做会破坏你的列，因为你现在有额外的逗号，它们不应该是分隔符，但会被解释为这样。如何处理它在很大程度上取决于您将用于读取 CSV 的应用程序。

与 Microsoft Excel 兼容的 CSV 将在带有逗号的字段周围加上双引号，以确保它们被解释为数据而不是分隔符。这也意味着包含双引号作为数据的字段将需要特殊处理。

我会推荐使用扩展方法的类似方法。

```
var input = File.ReadAllLines(path);
var lines = input.Select(row => row.Split('\t'));
lines = lines.Select(row => row.Select(field => field.EscapeCsvField(',', '"')).ToArray());
var csv = lines.Select(row => string.Join(",", row));
File.WriteAllLines(path, csv.ToArray()); 
```

这是 EscapeCsvField 扩展方法：

```
static class Extension
{
    public static String EscapeCsvField(this String source, Char delimiter, Char escapeChar)
    {
        if (source.Contains(delimiter) || source.Contains(escapeChar))
            return String.Format("{0}{1}{0}", escapeChar, source);

        return source;
    }
} 
```

此外，如果文件很大，最好不要将整个文件读入内存。在这种情况下，我建议将 CSV 输出写入不同的文件，然后您可以使用`StreamReader`并且`StreamWriter`一次只能使用 1 行。

```
var tabPath = path;
var csvPath = Path.Combine(
                Path.GetDirectoryName(path), 
                String.Format("{0}.{1}", Path.GetFileNameWithoutExtension(path), "csv"));

using (var sr = new StreamReader(tabPath))
using (var sw = new StreamWriter(csvPath, false))
{
    while (!sr.EndOfStream)
    {
        var line = sr.ReadLine().Split('\t').Select(field => field.EscapeCsvField(',', '"')).ToArray();
        var csv = String.Join(",", line);
        sw.WriteLine(csv);
    }
}

File.Delete(tabPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:21:23.657

如果您的文件格式很严格，您可以使用`string.Split`and `string.Join`：

```
var lines = File.ReadAllLines(path);
var newLines = lines.Select(l => string.Join(",", l.Split('\t')));
File.WriteAllLines(path, newLines); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:22:08.793

```
var csv = File.ReadAllLines("Path").Select(line => line.Replace("\t", ",")); 
```

你可以简单地打电话

```
public void ConvertToCSV(string strPath, string strOutput)
{
  File.WriteAllLines(strOutput, File.ReadAllLines("Path").Select(line => line.Replace("\t", ",")));
} 
```

SO 上已经有很多用于处理 .CSV 文件的内容，请先搜索或尝试一下。

# javascript - Jquery foreach 循环设置值

> ID：14644090
> 
> 赞同：1
> 
> 时间：2013-02-01T10:19:18.177
> 
> 标签：javascript, jquery

```
<span name="abc">ashgs</span>
<span name="abc">ashdf</span>
<span name="abc">asdxdx</span>
<span name="abc">mnnkfvdj</span>
<span name="abc">bsbdb</span> 
```

我想使用 jquery foreach 循环在所有这些跨度中设置一个特定值请帮助，因为我很穷我 jquery 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:49:58.107

不明白你想要实现什么，这是我对你的问题理解的努力：

* * *

```
$('span[name="abc"]').each(function (i, v) {
  var valArr = ['Now!', 'This', 'is', 'placed', 'better'];
  $(this).text(valArr[i]);
}); 
```

在小提琴中找到这个：http: [//jsfiddle.net/hWExC/](http://jsfiddle.net/hWExC/)

* * *

或者一个更好的：

```
$('span[name="abc"]').text(function () {
    var valArr = ['Now!', 'This', 'is', 'placed', 'better', 'wow!!!'];
    return valArr[$(this).index()];
});
```

```
span{border:solid 1px red; padding:5px; margin:10px 0 0 0; display:block;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<span name="abc">ashgs</span>
<span name="abc">ashdf</span>
<span name="abc">asdxdx</span>
<span name="abc">mnnkfvdj</span>
<span name="abc">bsbdb</span>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:20:25.437

这就是你如何`.abc`用另一个替换所有类的值

```
$('.abc').each(function(){
    $(this).html('hello');
}); 
```

或以下方式获取值，正如@Sudhir 所说

```
$("span[name='abc']") 
```

工作演示：http: [//jsfiddle.net/hb9LN/](http://jsfiddle.net/hb9LN/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:21:13.783

做：

```
$("span[name='abc']").each(function() {
   //set what you want, like rel
   $(this).attr("rel", "some_value");
}); 
```

看这里; [jQuery的每个（）](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:23:26.477

如果您的意思是设置跨度的 html 内容，那么

```
$("span[name='abc']").html('the content'); 
```

没必要使用`.each()`。

# java - 如何在查询 DSL 中编写复杂的 SQL 查询

> ID：14644091
> 
> 赞同：1
> 
> 时间：2013-02-01T10:19:21.360
> 
> 标签：java, querydsl

我尝试计算特定产品占产品总数量的百分比。我写了一个运行良好的 SQL 查询。但是当我尝试用 Query DSL 编写时，我遇到了一个问题，我真的很难编写这种查询。

```
SELECT ROUND((c.v2/f.v1)*100,2) , MONTH AS RESULTt
FROM
(SELECT SUM(Quantite)as v1,MONTH  FROM Total_sold_view WHERE id_company='379' AND
year=2009 GROUP BY MONTH ORDER BY MONTH ASC) f,
(SELECT Quantite as v2,MONTH FROM Total_sold_view  WHERE id_company='379' AND year=2009
AND product_type=13 ORDER BY MONTH ASC) c
WHERE c.MONTH=f.MONTH 
```

# php - 时区 Datetime 与 php 中的偏移量，让它变得容易

> ID：14644093
> 
> 赞同：0
> 
> 时间：2013-02-01T10:19:24.887
> 
> 标签：php, date, timezone

我有来自特定时区（牙买加）的时间戳，我想获得它的 GMT 时间戳。有没有比这个更优雅的解决方案：

```
$start = DateTime::createFromFormat('U', 1330560000);
        $start->setTimezone(new DateTimeZone('America/Jamaica'));
        $start->format('Y-m-d H:i:s');//2012-02-29 19:00:00 NO NO NO

        $tz = new DateTimeZone( 'America/Jamaica' );
        $transition = $tz->getTransitions($start->getTimestamp(),$start->getTimestamp());

        $offset = $transition[0]['offset'];

        $start = DateTime::createFromFormat('U', $params['start'] - 2*$transition[0]['offset']);
        $start->setTimezone(new DateTimeZone('America/Jamaica'));
        $start->format('Y-m-d H:i:s'); // "2012-03-01 05:00:00" YESSSS!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:26:43.063

Unix 时间或 POSIX 时间是用于描述时间实例的系统，定义为自1970 年 1 月 1 日**协调世界时 (UTC)**午夜以来经过的秒数。

来源[维基百科](http://en.wikipedia.org/wiki/Unix_time)

UNIX 时间戳的想法是它始终采用 UTC（世界各地 xD ）。如果它不代表 UTC 时间，则不再是 UNIX 时间戳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:26:21.503

这是我的类的一部分，它创建了一个格式良好的时间戳，正如我在函数的注释中所写的那样，它非常易于使用，只需传递日期、时区和标识符的字符串。

希望对你有帮助

```
/**
* Default timestamp format for formatted_time
* @var  string
*/
public static $timestamp_format = 'Y-m-d H:i:s';
/**
* Returns a date/time string with the specified timestamp format
* @example $time = Date::formatted_time('5 minutes ago');
* @link    http://www.php.net/manual/datetime.construct
* @param   string  $datetime_str       datetime string
* @param   string  $timestamp_format   timestamp format
* @param   string  $timezone           timezone identifier
* @return  string
*/
public static function formatted_time($datetime_str = 'now', $timestamp_format = NULL, $timezone = NULL){
            $timestamp_format = ($timestamp_format == NULL) ? Date::$timestamp_format : $timestamp_format;
            $timezone         = ($timezone === NULL) ? Date::$timezone : $timezone;
            $tz   = new DateTimeZone($timezone ? $timezone : date_default_timezone_get());
            $time = new DateTime($datetime_str, $tz);
            if ($time->getTimeZone()->getName() !== $tz->getName()){
                $time->setTimeZone($tz);
            }
            return $time->format($timestamp_format);
        } 
```

# solr - solr-client-php

> ID：14644098
> 
> 赞同：0
> 
> 时间：2013-02-01T10:19:26.753
> 
> 标签：solr, lucene

任何人都可以指导我完成 solr lucene 与 Zend 的集成。我有一个使用 Zend 框架构建的 PHP 应用程序。我已经安装了 solr lucene 并索引了 mysql 数据库。现在我想将 solr 与 zend 集成。任何帮助表示赞赏？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:13:26.407

我会参考 Solr Wiki 上的[SolPHP](http://wiki.apache.org/solr/SolPHP)页面。它详细介绍了对 Solr 的 PHP 支持，并包含一些指向有关如何使用不同的 PHP 客户端连接到 Solr 的详细信息的链接。

# unit-testing - 如何对命令行界面进行单元测试

> ID：14644100
> 
> 赞同：5
> 
> 时间：2013-02-01T10:19:34.167
> 
> 标签：unit-testing, language-agnostic, command-line-interface

我编写了一个我想测试的命令行工具（我不想从命令行运行单元测试）。我想将一组特定的输入选项映射到特定的输出。我还没有找到任何现有的工具。该应用程序只是一个二进制文件，可以用任何语言编写，但它接受 POSIX 选项并写入标准输出。

类似于以下内容：

*   对于每组已知的输入选项：
    1.  使用指定的输入启动应用程序。
    2.  管道输出到文件。
    3.  将输出与存储的（期望的）输出进行比较。
    4.  如果 diff 不为空，则记录错误。

（顺便说一句，这就是你所说的*集成测试*而不是*单元测试*吗？）

**编辑：**我知道我将如何为此编写自己的工具，我不需要代码帮助。我想知道的是如果这已经完成了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:27:19.333

[DejaGnu](https://www.gnu.org/software/dejagnu/)是一个成熟且有点标准的框架，用于为 CLI 程序编写测试套件。

这是从本[教程](http://www.delorie.com/gnu/docs/dejagnu/dejagnu_1.html)中获取的示例测试：

```
# send a string to the running program being tested:
send "echo Hello world!\n"

# inspect the output and determine whether the test passes or fails:
expect {
    -re "Hello world.*$prompt $" {
        pass "Echo test"
    }
    -re "$prompt $" {
        fail "Echo test"
    }
    timeout {
        fail "(timeout) Echo test"
    }
} 
```

从长远来看，使用这样一个完善的框架可能比你自己想出的任何东西都要好，除非你的需求非常简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-29T01:50:14.980

您正在寻找 BATS（Bash 自动测试系统）： [https ://github.com/bats-core/bats-core](https://github.com/bats-core/bats-core)

从文档：

```
example.bats contains
#!/usr/bin/env bats

@test "addition using bc" {
  result="$(echo 2+2 | bc)"
  [ "$result" -eq 4 ]
}  

@test "addition using dc" {
  result="$(echo 2 2+p | dc)"
  [ "$result" -eq 4 ]
}

$ bats example.bats

 ✓ addition using bc
 ✓ addition using dc

2 tests, 0 failures 
```

[蝙蝠核心](/questions/tagged/bats-core "显示标记为“bats-core”的问题")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:30:37.693

好吧，我认为每种语言都应该有一种执行外部进程的方法。

在 C# 中，您可以执行以下操作：

```
var p = new Process();
p.StartInfo = new ProcessStartInfo(@"C:\file-to-execute.exe");
... //You can set parameters here, etc.
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.UseShellExecute = false;
p.Start();

//To read the standard output:
var output = p.StandardOutput.ReadToEnd(); 
```

我从来不用写标准输入，但我相信也可以通过访问来完成`p.StandardInput`。这个想法是将两个输入都视为`Stream`对象，因为它们就是这样。

在 Python 中有`subprocess`模块。根据其文档：

> subprocess 模块允许您生成新进程，连接到它们的输入/输出/错误管道，并获取它们的返回码。

在为几个月前编写的编译器的代码生成部分编写单元测试时，我必须这样做：[在我的编译器中编写单元测试（生成 IL）](https://stackoverflow.com/questions/9561972/writing-unit-tests-in-my-compiler-which-generates-il)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-09T23:09:09.830

We wrote [should](http://should-test.net/), a single-file Python program to test any CLI tool. The default usage is to check that a line of the output contains some pattern. From the docs:

```
# A .should file launches any command it encounters.
echo "hello, world"

# Lines containing a `:` are test lines.
# The `test expression` is what is found at the right of the `:`.
# Here 'world' should be found on stdout, at least in one line.
:world

# What is at the left of the `:` are modifiers.
# One can specify the exact number of lines where the test expression has to appear.
# 'moon' should not be found on stdout.
0:moon 
```

Should can check occurrences counts, look for regular expressions, use variables, filter tests, parse json data, and check exit codes.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-03T16:44:13.557

当然，它已经完成了数千次。但是编写一个工具来运行简单的 shell 脚本或批处理文件就像你建议的那样是一项微不足道的任务，几乎不值得尝试变成一个通用工具。

# mysql - MySQL触发器删除传递用户ID

> ID：14644109
> 
> 赞同：4
> 
> 时间：2013-02-01T10:19:56.613
> 
> 标签：mysql, triggers, pdo

我需要创建 MySQL 触发器，该触发器将在删除表行语句上记录用户 ID，该语句必须适合一个查询，因为我使用的是 PHP PDO。这是我到目前为止提出的：

我需要在删除查询中传递用户 ID 的方法，即使它与要执行的删除操作无关：

通常，查询将如下所示：

```
DELETE FROM mytable WHERE mytable.RowID = :rowID 
```

如果我可以在我的语句中使用多个查询，我会这样做：

```
SET @userID := :userID;
DELETE FROM mytable WHERE mytable.RowID = :rowID; 
```

这样，变量@userID 将在触发事件触发之前设置并且它可以使用它。但是，由于我需要在一个查询中压缩我的删除语句，所以我想出了这个：

```
DELETE FROM mytable 
WHERE  CASE
           WHEN @userID := :userID
           THEN mytable.RowID = :rowID
           ELSE mytable.RowID IS NULL
       END 
```

请注意：RowID 永远不会为空，因为它是主键。现在我必须创建一个删除触发器来将用户 ID 记录到审计表中，但是我想在这种情况下触发器将在删除查询本身之前触发，这意味着不会创建 @userID 变量？这是我将其作为值传递给触发器的想法。

我觉得我已经接近解决方案了，但这个问题是一个障碍。如何在语句中没有多个查询的情况下将用户 ID 值传递给触发器？有什么想法、建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T10:35:23.717

您可以使用 NEW / OLD mysql 触发器扩展。参考：[http ://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

这是一个示例代码：

```
drop table `project`;
drop table `projectDEL`;

CREATE TABLE `project` (
  `proj_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_name` varchar(30) NOT NULL,
  `Proj_Type` varchar(30) NOT NULL,
  PRIMARY KEY (`proj_id`)
);

CREATE TABLE `projectDEL` (
  `proj_id` int(11) NOT NULL AUTO_INCREMENT,
  `proj_name` varchar(30) NOT NULL,
  `Proj_Type` varchar(30) NOT NULL,
  PRIMARY KEY (`proj_id`)
);

INSERT INTO `project` (`proj_id`, `proj_name`, `Proj_Type`) VALUES
(1, 'admin1', 'admin1'),
(2, 'admin2', 'admin2');

delimiter $
CREATE TRIGGER `uProjectDelete` BEFORE DELETE ON project
FOR EACH ROW BEGIN

  INSERT INTO projectDEL SELECT * FROM project WHERE proj_id = OLD.proj_id;

END;$
delimiter ;

DELETE FROM project WHERE proj_id = 1;

SELECT * FROM project;
SELECT * FROM projectDEL; 
```

# security - 保护 Codeigniter 文件上传控制器

> ID：14644111
> 
> 赞同：0
> 
> 时间：2013-02-01T10:19:59.507
> 
> 标签：security, codeigniter, authentication, upload, token

我有一个名为“File_upload”的控制器，它通过文件上传器表单中的 ajax 调用。作为安全强化的一部分，我想确保 File_upload 控制器不能通过浏览器或任何其他“黑客”调用，并且只能通过表单调用。

有没有人对如何做到这一点有任何建议>它会通过某种令牌来完成吗？如果有人有任何想法或代码片段可以让我朝着正确的方向前进，我将不胜感激。

我假设文件上传表单必须将某种信息传递给控制器​​，并且控制器会在继续之前检查它的存在。该应用程序将在下周对文件上传器进行一些严格的安全测试，因此我想抢先确保上传器不会被恶意黑客覆盖。

感谢期待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:42:43.170

“不能通过浏览器或任何其他“黑客”调用，只能通过表单调用。”

这实际上并没有多大意义——您无法控制从何处调用它，只能控制将哪些信息传递给服务器的函数。

你可以控制一些事情，比如它是否是一个 ajax 请求：

[http://ellislab.com/codeigniter/user-guide/libraries/input.html](http://ellislab.com/codeigniter/user-guide/libraries/input.html) $this->input->is_ajax_request()

所以是的，您可以设置某种令牌系统来检查请求是否具有所需的信息。通常，只需检查发出请求的用户是否已登录就足够了；让您的登录身份验证系统处理安全性

如果您不清楚我在第一行中关于不控制从何处调用它的意思，请阅读以下内容：

[http://codebyjeff.com/blog/2012/12/web-form-security-avoiding-common-mistakes](http://codebyjeff.com/blog/2012/12/web-form-security-avoiding-common-mistakes)

# php - Google Maps API javascript（多个标记）中的 WordPress query_posts

> ID：14644116
> 
> 赞同：2
> 
> 时间：2013-02-01T10:20:19.253
> 
> 标签：php, javascript, wordpress, google-maps, google-maps-api-3

是否可以在 Google Maps javascript API 中查询所有 WordPress 帖子以获取其存储为自定义字段的纬度和经度位置，以在同一张地图上显示所有标记？

```
var locations = [
<?php query_posts('post_type=property&showposts=9999999');?>
<?php if (have_posts()) : ?><?php while (have_posts()) : the_post(); ?>
['<?php the_title(); ?>', <?php echo get_post_meta( $post->ID, 'latitude', true ); ?>, <?php echo get_post_meta( $post->ID, 'longitude', true ); ?>, <?php the_ID(); ?>],
<?php endwhile; else: ?>
<?php endif; ?>
]; 
```

`[`我试过这个，但它在加载时在初始支架后切断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:53:05.670

[我在这里](http://www.fep-photo.org/exhibitions/map-of-exhibitions/)做过类似的事情。我的方法是使用 WordPress [wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)函数来生成参数，我认为这将是您的最佳选择。

我现在没有时间提取代码，但是如果您需要更多，我可以稍后再查看。

**编辑**

好的，给你。这一切都基于上面的链接，所以它的代码可能比你需要的多一点，但它应该可以解决问题。

首先，我创建了一个自定义帖子类型，调用`property`它来匹配您的代码，并创建了几个属性，为每个属性指定了纬度和经度。

接下来我创建了一个名为 的文件`so.maps.js`，其中包含以下内容（`bounds`代码只是为了确保地图显示我的所有标记；您可能不需要它）：

```
(function($) {
    function initialise_map() {
        var locations_str = php_args.locations.replace(/&quot;/g, '"');
        var locations = $.parseJSON(locations_str);

        var latlng = new google.maps.LatLng(48.856667, 2.350833);
        var myOptions = {
            zoom: 2,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var bounds = new google.maps.LatLngBounds();
        for (var i = 0; i < locations.length; i++) {
            addMarker(locations[i], map, bounds);
        }

        if (locations.length > 1) {
            map.fitBounds(bounds);
        }
    }

    function addMarker(location, map, bounds) {
        var locationLatLng = new google.maps.LatLng(location.latitude,location.longitude);
        bounds.extend(locationLatLng);
        var marker = new google.maps.Marker({
            position: locationLatLng,
            map: map,
            title:location.title
        });
    }

    $(function() {
        initialise_map();
    });

})(jQuery); 
```

重要的部分是变量——这就是我前面提到`php_args`的调用所填充的内容。`wp_localize_script`

然后我创建了一个页面来显示地图，填充我想要传递给 JavaScript 的数组并使用`wp_localize_script`：

```
<?php
 /*
  Template Name: Test Page
 */

define('GOOGLE_MAPS_V3_API_KEY', 'xxxxx');

add_action('wp_enqueue_scripts', 'so_exhibitions_map_scripts');
function so_exhibitions_map_scripts() {
    wp_register_script('googlemaps', 'http://maps.googleapis.com/maps/api/js?hl=en&key=' . GOOGLE_MAPS_V3_API_KEY . '&sensor=false', false, '3');
    wp_enqueue_script('googlemaps');

    wp_register_script( 'so.maps', get_bloginfo('stylesheet_directory') . "/js/so.maps.js", array('jquery', 'googlemaps'), false, false );
    wp_enqueue_script('so.maps');

    $locations = array();

    $location_query = new WP_Query( array(
        'post_type' => 'property',
        'posts_per_page' => -1
    ) );

    while ( $location_query->have_posts() ) {
        $location_query->the_post();
        $locations[] = array(
            'title' => get_the_title(),
            'latitude' => get_post_meta( get_the_ID(), 'latitude', true ),
            'longitude' => get_post_meta( get_the_ID(), 'longitude', true ),
            'id' => get_the_ID()
        );
    }

    wp_reset_postdata();

    wp_localize_script('so.maps', 'php_args', array(
        'locations' => json_encode($locations)
    ));
}

get_header();
?>
        <div id="container">
            <div id="content">
                <div id="map_canvas"></div>
            </div><!-- #content -->
        </div><!-- #container -->
<?php
get_footer();
?> 
```

最后，我通过在 CSS 中设置它的大小来确保地图是可见的：

```
#map_canvas {
    width: 100%;
    height: 452px;
} 
```

希望有帮助。我不是 Google Maps API 方面的专家，但这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:19:49.663

感谢您一直以来的帮助！我们将您的代码与我们之前的代码组合在一起，下面是我们最终用来使其正常工作的代码。但是，如果您将帖子查询提高到超过 200 个标记的数量，它似乎会超时。我不确定如何避免这种情况发生，因为根据谷歌的说法，他们没有限制。PHP/Apache 限制已提高，但没有帮助。一位朋友建议它可能是一个javascript问题。如果有人对允许更大的查询有进一步的建议，请发表评论。:)

```
<div id="map" style="width:960px;height:1200px;"></div>

<script type="text/javascript">
<?php
$locations = array();
$location_query = new WP_Query( array(
'post_type' => 'property',
'posts_per_page' => 100
 ) );
echo "//markers: 100\n";
echo "var locations = [";
$comma = "";
while ( $location_query->have_posts() ) {
$location_query->the_post();
$title = str_replace("'", "\'", get_the_title());
echo $comma . "['" . $title . "', '" . get_post_meta( get_the_ID(), 'latitude', true ) . "', '" . get_post_meta( get_the_ID(), 'longitude', true ) . "', " . get_the_id() . "]";  
$comma = ", ";
}
echo "];\n\n";
?>

var map = new google.maps.Map(document.getElementById('map'), {
zoom: 7,
center: new google.maps.LatLng(X.XXX, X.XXX),
mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
marker = new google.maps.Marker({
position: new google.maps.LatLng(locations[i][1], locations[i][2]),
map: map
});

google.maps.event.addListener(marker, 'click', (function(marker, i) {
return function() {
infowindow.setContent(locations[i][0]);
infowindow.open(map, marker);
}
})(marker, i));
}
</script> 
```

# html - 通过带有 JSON 的 yahoo 邮件 api 发送 html 邮件

> ID：14644121
> 
> 赞同：0
> 
> 时间：2013-02-01T10:20:25.787
> 
> 标签：html, yahoo-api

我正在使用JSON 格式发送[yahoo 邮件 api来发送邮件。](http://developer.yahoo.com/mail/docs/user_guide/SendMessage.html)但是，即使我使用`\r\n`为要发送的消息块创建新行，当收件人将其作为邮件接收时也没有效果。

由于如果有特殊字符在制作 JSON 时会出现一些问题，我正在使用`StringEscapeUtils.escapeJavaScript`方法使我的消息字符串有效，例如。你好朋友。\r\n 使用特殊字符进行测试 ~`!@#$%^&*() \n{}[]|?/.>,< .

[示例 JSON](https://github.com/ramiyer/YahooMailApiSample)

```
{
  "method": "SendMessage",
  "params": [
    {
      "savecopy": true,
      "message": {
        "to": {
          "email": "test@yahoo.com",
          "name": "SendMessage Test User"
        },
        "from": {
          "email": "ctest@yahoo.com",
          "name": "SendMessage Test User"
        },
        "replyto": {
          "email": "test@yahoo.com",
          "name": "SendMessage Test User"
        },
        "inreplyto": "SendMessage InReplyTo Value",
        "mailer": "YahooMailRC",
        "subject": "Message with Stationery",
        "simplebody": {
          "text": "hello friend.\r\n testing with special characters ~`!@#$%^&*() \n{}[]|?/.>,<",
          "html": "hello friend.\r\n testing with special characters ~`!@#$%^&*() \n{}[]|?/.>,<"
        }
      }
    }
  ]
} 
```

`\`当我创建一个有效的字符串来制作 JSON 对象时，我使用转义。

注意：如果我只在 text 中设置数据，而不是在 html 中。收到的邮件中没有任何内容。

如何格式化要通过 Yahoo 邮件 api 发送的文本以保留所有新行（HTML 格式样式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:17:19.283

我通过添加`<PRE>`标签来使用我的字符串的 html 格式解决了这个问题。

# xcode - 无法在 Xcode 上存档：CocoaPods 链接错误

> ID：14644122
> 
> 赞同：6
> 
> 时间：2013-02-01T10:20:28.350
> 
> 标签：xcode, cocoapods

在 iOS 项目上，当我编译我的项目以运行它时，它工作正常。
但是如果我存档它，它会失败并出现以下错误：

```
ld: file not found: /Users/xxxxx/Work/xxxxx/codes/xxxxx/DerivedData/xxxxx/Build/Intermediates/ArchiveIntermediates/xxxxx/InstallationBuildProductsLocation/Applications/libPods.a
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在使用 Xcode 4.6 和 iOS 5.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-05T01:55:24.457

我搜索了很长时间，终于得到了一些东西并为我解决了同样的问题。对于仍然需要的任何人：

在*Build Setting* > *Other Linker Flag*中：

Debug 和其他人的标志可能不同。
尝试改变任何`$(TARGET_BUILD_DIR)`地方`$(BUILT_PRODUCTS_DIR)`。

对我来说，我改为`$(TARGET_BUILD_DIR)/libPods.a`，`$(BUILT_PRODUCTS_DIR)/libPods.a`问题解决了。

# windows - CUDA NSight 没有在 Windows 8 上安装 CUDA 5.0 安装文件？

> ID：14644127
> 
> 赞同：2
> 
> 时间：2013-02-01T10:20:40.613
> 
> 标签：windows, cuda, installation

正如我所见，Nvidia 站点上没有 Nsight Eclipse 的下载链接，它说它将由 CUDA 5 安装本机安装。但它没有随 CUDA 安装一起安装。有没有人也遇到过这个问题，还有其他外部链接可以单独安装 Nsight Eclipse 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:05:59.860

没有适用于 Windows 的 Nsight Eclipse 版本。

在 Windows 平台上，Nsight 与 Visual Studio 集成（并且需要 Microsoft 编译器）。对于 Linux 和 OS X，Nvidia 将 Nsight Eclipse 版本作为独立的 IDE 提供，运行在基于 gcc 的原生工具链之上。

# c# - mvc javascript多次

> ID：14644130
> 
> 赞同：2
> 
> 时间：2013-02-01T10:20:50.607
> 
> 标签：c#, javascript, asp.net-mvc, razor

如果有某些字段使用 htmleditor 的要求。因此，对于使用 htmleditor 的每个字段，我创建了一个编辑器模板，该模板使用 jquery 呈现 htmleditor，为此我使用 UIHint。

```
@model System.String

<script type="text/javascript" src="~/Scripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript" language="javascript">
    tinyMCE.init({
        mode: "textareas",
        theme: "advanced",
        editor_selector: "htmlmarker",
        theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,         justifyright,justifyfull,|,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,    |,bullist,numlist,|,outdent,indent,     blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,    |,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3: "hr,removeformat,visualaid,|,sub,sup",

        theme_advanced_toolbar_location: "top",
        theme_advanced_toolbar_align: "left"

    });

</script>
@Html.TextAreaFor(model => model, new {@class="htmlmarker" }) 
```

现在 evreything 工作正常，但是在执行时，当我查看源代码时，我发现 jquery 脚本被引用并为使用 UIHint 的每个字段多次调用。是否有任何机制来防止 javascript 代码的重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:23:27.233

不要将您的 Javascript 放在编辑器模板中，它将**为使用该模板的每个项目**执行。

相反，将它放在一个单独的 JS 文件中，在您的布局上调用该 JS 文件，然后在页面加载时，它将执行一次并包含您在编辑器模板中分配的**所有**项目。`htmlmarker`

# windows - 客户端 PC 未连接到域网络时忽略 WSUS 批准

> ID：14644131
> 
> 赞同：1
> 
> 时间：2013-02-01T10:20:50.427
> 
> 标签：windows, updates

这是一个奇怪的，

我们将 WSUS 服务器配置为通过 GPO 告诉客户端签入 Windows 更新并从 Microsoft Update 下载它们（因此我们不必让 WSUS 存储库占用空间）。以前我们确实有一个 WSUS 存储库，并且发生了同样的问题。

虽然在域中客户端笔记本电脑的表现非常好，但只有在 WSUS 更新被批准用于 WSUS 中的计算机组时才会更新。

但是...如果我在域中拥有那台笔记本电脑 7 天，重启了几次并且没有应用 WSUS 更新，当它被用户带回家时，它会进入“睡眠”状态，当它重新启动时以域用户身份登录，如果用户连接到互联网以通过 VPN 登录到我们的网络，它会开始下载它没有的、未经 WSUS 批准的 Windows 更新。

为什么会这样，当它“关闭”域网络但连接到互联网时，我如何阻止它更新？

有没有人经历过类似的事情？因此，回顾一下，Windows 更新在域网络上的行为与预期一样，当笔记本电脑在任何非域网络连接上安装不应该的更新时

谢谢

道吉

（服务器是 Windows Server 2003 SP2，安装了 WSUS 3.0 SP2，笔记本电脑是 x64 Windows 7）

# javascript - 更改按钮单击时的表单操作

> ID：14644133
> 
> 赞同：0
> 
> 时间：2013-02-01T10:21:02.603
> 
> 标签：javascript, forms, button, action

> **可能重复：**
> [如何从一个表单调用多个操作？](https://stackoverflow.com/questions/3929685/how-can-i-invoke-multiple-actions-from-a-single-form)

我在一个表单中有两个按钮。一个用于计算，另一个用于在电子邮件中发送计算数据。所以我已经`"action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>"`在表格中计算了整个事情。现在我想让另一个按钮将操作更改为“mail.php”，所以我做了这个：

`<input type="submit" name="senden" value="Senden" onClick="document.form.action.value="mailer.php"">`

但我们都知道，这是行不通的。那么我该如何让它发挥作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:29:49.560

做这样的事情。

```
<input type="button" name="senden1" value="Send" onClick="sendMailer()">
<input type="button" name="senden2" value="Calculate" onClick="caclculate()"> 
```

然后在`calculate`函数中只计算数据，当用户单击时`Send`只需设置操作并在`sendMailer()`.DON'T 中提交它。不要在calculate() 中提交。

```
 document.<Form_Name>.action = 'mailer.php';
 document.<Form_Name>.submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:42:38.123

```
<form action="xxx.php" name="frm1" id="frm1">
    <input type="button" name="senden1" value="Send" onClick="sendMailer()" id="senden1">
</from>
<form action="yyy.php" name="frm2" id="frm2">
<input type="button" name="senden2" value="Calculate" onClick="caclculate()">
</from>
<script>
    $(document).ready(function($){
        var form1 =  $("#frm1");
        var form2 =  $("#frm2");
        $("#senden1").click(function(){
               form1.submit(); 
        });
        $("#senden2").click(function(){
                form2.submit(); 
        });

    });
</script> 
```

# css - Wordpress 中的自定义 CSS 不起作用

> ID：14644138
> 
> 赞同：0
> 
> 时间：2013-02-01T10:21:13.983
> 
> 标签：css

我已经为这个问题苦苦挣扎了一段时间，但仍然找不到解决方案。我在 wordpress 中为我的帖子创建了自定义 CSS 框，但问题是，它不起作用。无论我做什么，盒子都不会出现。

希望有人能看到我做错了什么。

谢谢

风格：

```
.square880x165 {
margin: 10px auto;
display: block;
width: 880px;
height: 165px;
padding: 20px;
position: relative;
float:left;
background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #aaaeaf), color-stop(100%, #689ecd));
background-image: -webkit-linear-gradient(#aaaeaf, #689ecd);
background-image: -moz-linear-gradient(#aaaeaf, #689ecd);
background-image: -o-linear-gradient(#aaaeaf, #689ecd);
background-image: -ms-linear-gradient(#aaaeaf, #689ecd);
background-image: linear-gradient(#aaaeaf, #689ecd);
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
-ms-border-radius: 4px;
-o-border-radius: 4px;
border-radius: 4px;
-webkit-box-shadow: 0 1px 3px rgba(0,0,0,.35);
-moz-box-shadow: 0 1 3px rgba(0, 0, .35);
box-shadow: 0 1 3px rgba(0, 0, .35);
background: white;
-webkit-border-radius: 2px;
-moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
border-radius: 2px;
bottom: 1px;
content: '';
left: 1px;
right: 1px;
top: 1px; 
```

}

和 HTML：

```
<div class="square880x165"><p>test</p></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:26:41.767

HTML 和 CSS 看起来应该可以工作（CSS 中有重复但不会停止工作）。您是否将它们都放在您的 Wordpress 主题中的正确位置？

CSS 通常放在 style.css 中，并确保带有 HTML 的页面引用了该样式表。

您有我们可以查看的实时页面吗？

* * *

好的，根据您的测试代码，这个问题与您嵌入样式的方式有关。我看起来你刚刚将它们粘贴到帖子中，所以 Wordpress 自动在 CSS 之间添加了段落标签，这打破了它。这是一个片段：

```
<style>
<p>body{
    background: #fff;
    color: #4A4A4A ;
}</p>
<p>.square880x165 {
    margin: 10px auto;
    display: block;

    position: relative;}</p>
</style> 
```

您需要将 CSS 直接粘贴到 style.css 中，因此在您的 WP 仪表板中单击**Appearance**然后**Editor**，将 CSS 直接粘贴到样式表中，然后单击**Update File**。

# java - 通过 Rest 调用在我的 Java 类中获取 JSON 结果

> ID：14644142
> 
> 赞同：0
> 
> 时间：2013-02-01T10:21:26.703
> 
> 标签：java, json, rest, jira-rest-java-api

我有一个javascript，我通过它调用一个rest api并获得一个JSON结果，我需要一个java类中的这个结果。

下面是脚本

```
<script type="text/javascript">
function getCurrentTime()
{
var time;
     AJS.$.ajax({
        url: "/rest/vertygosla/1.0/compute/issue/TST-30",
        type: 'get',
        dataType: 'json',
        async: false,
        success: function(data) {
            time = data.sla;
        } 
     });
     return time[0].remainingTime;
}

alert(""+getCurrentTime())
</script> 
```

json 由服务器提供 {"issueKey":"TST-30","issueId":11600,"created":"2013-01-31T11:38:38.765+0530","sla":[{"agreementName": "确认时间","re​​mainingTime":5860985,"endDate":"2013-01-31T12:00:57.796+0530","startDate":"2013-01-31T11:38:38.781+0530","consumedTime" :1339015,"name":"Ack time","id":11000,"delayed":false,"close":true,"frozen":false}]}

有人可以在 JAVA 中给我一个类似的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:07:33.047

如果您想要 Java 中的 json 结果，那么您应该使用`JRJC`专门为`JIRA REST API`使用`Java`. 否则，您可以发送`HTTP`请求`Java`以从 url 获取 JSON。

编辑：您可以使用或任何其他语言发送`HTTP`请求。`Java`我更喜欢`jquery`或`javascript`因为您不必实现登录过程。如果您已登录，则无需执行登录`jira`即可直接获取结果。客户端真的很慢。`JSON``JRJC`

以下是`JSON`从`JIRA`in获取的一种方式`jquery`：

```
$.getJSON('https://jira.atlassian.com/rest/api/latest/search?jql=assignee=xyz&expand&jsonp-callback=?', function(data) {
    console.log(data);
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:34:02.403

您可以在 java 中使用 RestTemplate 进行 Rest 调用，然后使用 JSONObject 将 JSON 结果检索为 java 对象。

下面是一个例子：

```
RestTemplate restTemplate = new RestTemplate();
try {
    String jsonResult = restTemplate.getForObject(url, String.class);
    JSONObject jsonObject = (JSONObject)new JSONParser().parse(jsonResult);
} catch (Exception e) {
    e.printStackTrace();
} 
```

# android - 在android的上下文中，人们所说的ROM和固件是什么意思？

> ID：14644149
> 
> 赞同：11
> 
> 时间：2013-02-01T10:21:52.193
> 
> 标签：android, firmware, rom

我在互联网上阅读了“自定义 ROM”和“自定义固件”。

据我了解，ROM 代表只读存储器。尽管我看到了指向文件的链接，但我认为这些链接是文件系统映像，其中包含带有预安装库和应用程序的操作系统。这些究竟是什么？为什么人们将这些称为 ROM？

另外：cyanogen-mod 的官方描述说：“[...] 是 [...] 固件分发 [...] 比基于 Android 的 ROM [...] 这些版本的 Android [. ..]”。所以他们似乎可以互换使用固件、存储固件的硬件组件和操作系统。我看对了吗？这是为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T10:30:47.207

好吧，他们将手机的固件称为ROM，因为理论上您作为普通用户无法更改固件所在的区域（它位于只读存储器中）。在较旧的手机上，这是真的，在没有特殊设备的情况下更改手机软件并不容易。

现在，固件不是存储在真实ROM中，而是存储在手机内部的闪存中，不是只读的，所以你可以刷另一个固件。正如法莫尔所说，这两个术语是可以互换的。

通常，人们将修改后的固件称为 ROM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T10:37:28.920

Farmor 的答案几乎就在那里，解释是手机上的 ROM*包含*手机的固件（同样，Cristi 的解释几乎是完整的 - 您*可以*写入 ROM，但这就是为什么您需要 root 访问权限来重新刷新手机。如果它完全ROM，一开始你怎么会在那里得到任何东西？=P）

通过更换固件，手机的 ROM 被擦除，新固件可以完全控制它，这就是为什么这两个术语被视为同义词的原因。

**但是**，您提到的其他术语*不是*同义词：

固件 - 确定设备如何运行的特定*软件*子集，通常是指嵌入式代码，例如微控制器上的代码。在我们的例子中，固件被加载到 ROM（硬件组件）上

硬件组件 - 这是物理设备，或手机/类似设备中的 ROM 的物理位。当固件被加载到 ROM 上时，人们可以互换使用它们，这并不完全正确（想想编码一个微控制器 - 如果你在上面放一些新软件，那么功能就会完全改变，所以它*就像*一个新的微控制器，但是它仍然是同一块硬件）

操作系统 - 这是 Android。CyanogenMod（作为您的示例）是*基于*Android 的，而不是全新的操作系统。它不是一个新的操作系统，而是它的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:37:12.137

术语“ROM”是过时的，指的是电子设备中的固件确实是不可修改的（例如，制造为掩模编程的 ROM）的时间。但这个名字还是很贴切的：写入非易失性闪存更像是对 EEPROM 进行编程，而不是在触发器中设置值。此外，在运行时，设备通常几乎没有修改固件映像的能力：它必须在设备外组装并一次全部加载。所以交替使用“ROM”和“固件”是合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:24:44.637

ROM代表只读存储器是正确的。

> 当人们说他们正在刷新 ROM 时，这意味着他们正在将新版本的固件刷到手机上——这两个术语是可以互换的。

[什么是只读存储器？](http://androidforums.com/ascend-all-things-root/339633-what-rom.html)

# javascript - Chrome 扩展页面 popup.html 不会调整大小

> ID：14644152
> 
> 赞同：4
> 
> 时间：2013-02-01T10:22:03.803
> 
> 标签：javascript, google-chrome-extension

所以我有这个 Chrome 扩展程序可以从互联网上加载一些内容。基本上，用户单击弹出图标，然后后台页面中的一些 JavaScript 加载一些页面，从中解析图像并将其放入 popup.html 页面。问题是 popup.html 没有调整大小以适应内容的实际大小。我在 StackOverflow 上看到了几个类似的问题，每个问题的回答都是“放在`<!DOCTYPE html>`popup.html 页面的顶部”，在我的情况下这不起作用。弹出窗口的大小仍然非常小（约 1 平方厘米）。

以前我有一些固定宽度和高度的 CSS 样式，但我注意到我的内容并不总是相同的大小，所以我希望 popup.html 页面自动调整大小以适应内容。

我知道在最坏的情况下，我可以解析图像的宽度和高度并将其设置为 CSS，但我觉得有一个更优雅的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-08T18:29:13.967

我能够用一点 jQuery 动态调整弹出窗口的大小。

`$('html').height($('#menu').height());`

#menu 只是一个包含所有内容的 div。`body`没有正确调整大小，所以我不能使用它。

显然只改变高度`html`就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T12:59:16.920

我设法解决了这个问题。显然，如果我将内容加载到 popup.html 中，弹出窗口将不会自动调整大小。没有办法。因此，我尝试在加载要显示的内容后修改页面的 CSS，但这也不起作用。然后我发现动态调整大小时页面中应该没有隐藏内容。当我从 Web 加载内容时，我将整个页面隐藏在一个隐藏的 div 中，然后通过 JavaScript 访问我感兴趣的页面元素，将其抓取并放入弹出页面的可见容器中。为了解决这个问题，我只需要“删除”`document.getElementById('myHiddenDiv').innerHTML = ""`隐藏 div 的内容，然后神奇地调整弹出窗口的大小:-)。

# macos - OS X 服务界面

> ID：14644153
> 
> 赞同：0
> 
> 时间：2013-02-01T10:22:03.820
> 
> 标签：macos, service

我想为 Mac OS X 开发一个像 Popclip（[https://itunes.apple.com/us/app/popclip/id445189367?mt=12](https://itunes.apple.com/us/app/popclip/id445189367?mt=12)）这样的应用程序。我做了一些研究，我最好的猜测是我会需要使用服务（[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/introduction.html)）。 **但是我怎样才能为服务制作用户界面呢？**谷歌搜索没有帮助，只建议安卓...

感谢所有的帮助。

# c# - 果园联系表

> ID：14644156
> 
> 赞同：10
> 
> 时间：2013-02-01T10:22:13.373
> 
> 标签：c#, asp.net-mvc-4, content-management-system, orchardcms

我一直在尝试通过 Orchard CMS v1.6 设置联系表格，但我不确定该怎么做。

我尝试安装[自定义表单](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.CustomForms/1.6)模块，但我认为这与我正在使用的最新版本不兼容。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T14:30:02.900

自定义表单模块非常强大和灵活，但如何使用它制作联系表单一开始并不明显。一旦你弄清楚了，虽然你可以用它做更多的事情。

**第 1 步 - 为您要收集的联系信息创建内容类型**

在 /Admin/ContentTypes 单击“创建新类型”以创建一个包含您希望用户填写的所有信息的类型。

**第 2 步 - 创建联系人自定义表单页面**

在 /Admin/Orchard.Customforms 创建一个新表单。在内容类型的下拉列表中，选择您在步骤 1 中创建的新内容类型。您可能还想勾选“提交表单后保存内容项”框。您不需要，因为第 3 步将显示如何通过电子邮件发送给您，但我喜欢这样做，以防电子邮件出现问题。

**第 3 步 - 创建规则以向您发送电子邮件（在 Orchard > 1.7 中使用工作流）**

在 /Admin/Rules 中创建一个新规则。

在事件部分中，为提交类型的自定义表单（您的新内容类型）时选择一个事件。

在操作部分添加发送电子邮件的操作。如果您选择发送给管理员，请确保您已向管理员用户发送了一封电子邮件（或者它只是静默失败）。

您可以在电子邮件的主题和正文中使用标记。我的看起来像这样：

```
**Subject:** Orchard Contact Form - {Request.Form:Contact information.Name.Text}

**Body:** Name: {Request.Form:Contact information.Name.Text}
Email: {Request.Form:Contact information.Email.Value}

{Request.Form:Contact information.Yourmessage.Text} 
```

Name、Email 和 Yourmessage 是我的“联系信息”类型中的所有字段名称。对您来说，这些需要是您的内容类型的名称以及您添加到其中的字段。

就是这样。

**更新：**在 Orchard 1.7 中，工作流已经替换了规则。这篇[博客文章](http://sebastienros.com/creating-a-contact-form-workflow)更详细地介绍了如何使用它们来制作联系表格。

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.NoClassDefFoundError: com/sun/image/codec/jpeg/JPEGCodec

> ID：14644160
> 
> 赞同：0
> 
> 时间：2013-02-01T10:22:21.697
> 
> 标签：java, noclassdeffounderror

所以我正在开发一个众所周知的**Cooja Simulator**的 java 插件。当我点击一个按钮时，我得到了你在标题中看到的异常。
我已经阅读了许多与同一问题相关的帖子，并且我以这种方式将发布类放在类路径环境变量中（我正在使用 Ubuntu）：

**“com/sun/image/codec/jpeg/JPEGCodec”**中包含的类位于此处：

**"/home/user/contiki-2.6/jar_files/lib"**，所以完整路径是**"/home/user/contiki-2.6/jar_files/lib/com/sun/image/codec/jpeg/JPEGCodec"**。

我编辑了 bashrc 文件并插入了以下行：

**导出 CLASSPATH=.:/path1:/path2:/path3:/home/user/contiki-2.6/jar_files/lib**

后者是我有问题的类所在的路径..在源代码中，类是通过这种方式导入的：

```
import com.sun.image.codec.jpeg.JPEGImageEncoder;  
import com.sun.image.codec.jpeg.JPEGCodec;  
import com.sun.image.codec.jpeg.JPEGEncodeParam; 
```

我让 Cooja Simulator 使用以下命令启动：
**ant run**

我还尝试通过发出以下命令来强制执行所需的 jar/类：

**ant -lib /home/user/contiki-2.6/jar_files/lib/com/sun/image/codec/jpeg run_bigmem**

但我遇到了同样的错误。有谁能帮我解决这个问题吗？多谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T10:25:28.920

Cooja 有自己的类加载器。要添加其他 jar `lib`，请在插件中添加一个 -folder 并将 jar 复制到该文件夹​​中。然后加

se.sics.cooja.GUI.JARFILES = + file1.jar file2.jar

到`cooja.config`. 以[https://github.com/contiki-os/contiki/tree/master/tools/cooja/apps/mspsim](https://github.com/contiki-os/contiki/tree/master/tools/cooja/apps/mspsim)为例 - 这里所需的 jar 文件由 Ant 复制。

# security - 在 Sitecore 中设置语言版本的安全权限

> ID：14644163
> 
> 赞同：1
> 
> 时间：2013-02-01T10:22:33.367
> 
> 标签：security, sitecore, versions

有点疑问。

我正在开发一个多语言网站，目前只有 5 种语言：英语、法语、德语、意大利语和美国英语。

我正在为每种语言设置角色，这意味着法语用户只能编辑项目的法语版本，但他们可以阅读该项目的其他语言版本。这是使用语言读取和语言写入访问权限设置的，并且工作正常。

问题是，当法国用户浏览到只有英文版本的项目（没有法语版本、没有德语版本、没有意大利语版本）时，法国用户就能够创建该项目的德语版本- 尽管在德语上没有正确的语言书写。因此，法语用户能够创建该项目的德语版本，但无法输入任何数据（这是正确的，因为他们没有使用该语言编写语言）。

问题是......我如何阻止法国用户创建德语版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:53:56.753

您是否否认了法语角色对其他语言的“创造”权利？如果这不起作用，您可以创建一个自定义事件，当用户尝试创建项目的新版本时处理该事件：

```
<event name="item:versionAdding"/> 
```

在这种情况下，您可以检查用户的语言权限并拒绝他们创建另一种语言的版本。

# ipad - Flash Builder Flex Sqlite 数据库恢复

> ID：14644165
> 
> 赞同：1
> 
> 时间：2013-02-01T10:22:36.407
> 
> 标签：ipad, flash, apache-flex, sqlite, builder

有一个问题，我似乎可以找到答案。我正在创建一个使用简单 sqlite 数据库的简单移动应用程序（目前仅限 iPad）。我在本地使用 sqlite，因为我真的不想在应用程序中强制使用 Wireless。

我的问题是，有什么办法可以恢复应用程序中插入的数据？Sqlite 作为 txt 文件的转储，我可以用它来恢复数据吗？我可以将 sqlite 文件上传到网站或发送到电子邮件吗？

这可以通过任何方法完成吗？

提前 Ty :)

# jquery - jQuery 请求

> ID：14644179
> 
> 赞同：1
> 
> 时间：2013-02-01T10:23:26.870
> 
> 标签：jquery

我有这个 jquery 代码

```
$.post('data.php'{"request":"data_"+$(this).attr("data")},function(data){
  $("div").text(data);
}); 
```

但是如果其他人可以像这样调用我的网站

```
$.ajax({
    url: 'http://www.website.com/data.php',
    data: { request: "data_1" },
    success: function(data) {
   alert(data);
    } 
```

他可以轻松获取我的数据。如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:42:54.457

浏览器不会让跨域请求发生。关于服务器端抓取，您无能为力，您可以检查以仅允许浏览器的用户代理，但最终可以使用正确的工具伪造任何东西（这只是一天结束时的 http 请求）。当然，如果您注意到某些主机的流量激增，您可以禁用这些主机的访问。如果你想防止框架，你可以添加

```
Header append X-FRAME-OPTIONS "SAMEORIGIN" 
```

到 htaccess

# php - 在标头中访问数据库信息 - cakePHP

> ID：14644181
> 
> 赞同：1
> 
> 时间：2013-02-01T10:23:38.927
> 
> 标签：php, mysql, cakephp-2.0

我的应用程序中有一个已修复的标头（保存在 中`View/Elements/header.ctp`）。唯一改变的是对用户的问候。它根据谁登录加载“嗨，皮特”或“嗨，戴夫”等。

此问候语位于标题中，因为它显示在每一页上。

我想知道的是，我是否可以从数据库中获取用户名？

**这是我的数据库设置**

用户名存储在名为 的表中`HrEmployees`。用户的登录详细信息存储在`Users`. `Users`有一个字段 ，`employee_id`它与 中的员工 id 相关联`HrEmployees`。所以我需要获取用户的 id 并检索他的名字。

**问题**

这可以在标题中执行吗？如果是这样，我该怎么做？如果需要任何其他信息，请告诉我，我会发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:42:50.437

是的，这是可能的。这取决于您的 Auth 设置的细节，但基本上，您首先必须确保 Cake 的 Auth 组件获取已登录用户的链接 HrEmployees 记录，然后只需在 beforeFilter 中的视图变量中设置登录用户名您的 AppController 的方法，因此它在您的所有视图中都可用。

第一部分，确保 Auth 包含链接的 HrEmployee 可能看起来像这样：

```
$this->Auth->authenticate = array(
    'Form' => array(
        'userModel' => 'User',
        'contain' => array(
            'HrEmployee'=>array(
                'fields' => array( 'id', 'name' )
            )
        )
    )
); 
```

有关身份验证的更多信息：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

下一部分，设置视图变量，应该在 AppController.php 的 beforeFilter() 方法中完成，可能看起来像这样：

```
$this->set('loggedInUsersName', $this->Auth->user('HrEmployee.name')); 
```

然后，您可以在任何视图文件中引用 $loggedInUsersName，它应该包含正确的值。

# php - Codeigniter - 使用单独的模板进行模板化

> ID：14644183
> 
> 赞同：0
> 
> 时间：2013-02-01T10:23:43.893
> 
> 标签：php, codeigniter, templates

我希望有一个带有 3 个模板的 codeigniter 应用程序。

1.  用于显示登录视图或错误视图的模板。

2.  带有标题正文导航的模板

3.  带有标题正文侧边栏页脚的模板

现在我可以构建 codeigniter 应用程序，但是我找不到一个简单的模板系统来完成这个任务。有很多关于可用库的建议，但它们缺乏实现细节。

建议和指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:14:23.680

您可以使用 CodeIgniter 模板。 [http://williamsconcepts.com/ci/codeigniter/libraries/template/index.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/index.html) 在此处下载库，您还可以获得完整的文档。

使用此库，您可以使用多个模板，并且可以轻松管理并分组管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:27:57.237

一旦你了解它，这很简单。

您需要为上面列出的每个内容创建一个视图文件，因此您需要这样的内容（文件夹/文件明智）：

```
views/page-login.php
views/page-error.php
views/header.php
views/footer.php 
```

然后从您的控制器中，您将加载其中一个页面视图。然后，您可以在页面视图中加载所需的元素，因此页眉和页脚以及它们之间的页面特定代码。

例如，您的登录页面可能是：

```
<?php $this->load->view('header'); ?>

    <h1>Login</h1>
    <p>Please login to my website.</p>

<?php $this->load->view('footer'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:28:42.413

这相当简单。

一个简单的例子：

在您的控制器中，您可以放置

```
//a test variable
$data["foo"] = 'bar';
$data["page"] = 'a_page'; // this will make sure it loads the views/pages/a_page.php in your template
$this->load->view('templates/login',$data); 
```

在你的`views/template/login.php`你可以放：

```
<!-- your login template html  -->
<html>
    ...
    <!-- include the view you want inside your login template -->
    <?php $this->load->view('pages/'.$page);?><!-- As you can see it loads /views/pages/a_page.php -->
    <?php echo $foo;?> //This will echo Bar
</html> 
```

或者：

```
<?php $this->load->view('template/login_header');?>
<?php $this->load->view('pages/'.$page);?>
<?php $this->load->view('template/login_footer');?> 
```

`views/pages/a_page.php`也会知道`$foo`。

这会在您的模板中加载另一个视图 (views/pages/a_page.php)。

通过这种方式，您可以创建所需的所有模板，并将您的视图包含在这些模板中。

提示：以这种方式处理页眉和页脚很快就会变得难以管理。而且还是用模板库比较好。试试[Phil sturgeon 的图书馆](http://getsparks.org/packages/template/show)

# unit-testing - java.lang.ClassCastException：com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl 无法转换为 DocumentBuilderFactory

> ID：14644187
> 
> 赞同：9
> 
> 时间：2013-02-01T10:24:04.993
> 
> 标签：unit-testing, junit, mocking, easymock, powermock

我正在使用 powermock 和**powermock-easymock-1.5-full.jar**。发生以下异常。

这些是我的类路径中的所有 jar。并从[http://code.google.com/p/powermock/downloads/detail?name=powermock-easymock-testng-1.5.zip&can=2&q=下载为 powermock 包](http://code.google.com/p/powermock/downloads/detail?name=powermock-easymock-testng-1.5.zip&can=2&q=)

1.  easymock-3.1.jar
2.  javassist-3.17.1-GA.jar
3.  jcommander-1.27.jar
4.  objenesis-1.2.jar
5.  snakeyaml-1.6.jar
6.  testng-6.8.jar
7.  bsh-2.0b4.jar
8.  cglib-nodep-2.2.2.jar
9.  powermock-easymock-1.5-full.jar

```
 java.lang.ClassCastException: com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl cannot be cast to javax.xml.parsers.DocumentBuilderFactory
    at javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)
    at com.eibus.localization.message.MessageSet._tryGetMessageText(MessageSet.java:268)
    at com.eibus.localization.message.Message._tryGetMessage(Message.java:135)
    at com.eibus.localization.message.Message.getMessage(Message.java:110)
    at com.eibus.localization.message.Message.getMessageWithLocaleFallBack(Message.java:155)
    at com.eibus.localization.StringFormatter.getMessageWithFallBack(StringFormatter.java:141)
    at com.eibus.localization.StringFormatter.format(StringFormatter.java:43)
    at com.eibus.localization.LocalizableComposite.getMessage(LocalizableComposite.java:42)
    at com.eibus.localization.exception.LocalizableException.getMessage(LocalizableException.java:168)
    at com.eibus.localization.exception.LocalizableException.getLocalizedMessage(LocalizableException.java:130)
    at java.lang.Throwable.toString(Throwable.java:479)
    at java.lang.String.valueOf(Unknown Source)
    at java.io.PrintWriter.println(Unknown Source)
    at java.lang.Throwable$WrappedPrintWriter.println(Unknown Source)
    at java.lang.Throwable.printStackTrace(Throwable.java:654)
    at java.lang.Throwable.printStackTrace(Throwable.java:720)
    at org.junit.runner.notification.Failure.getTrace(Failure.java:67)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestListener.testFailure(JUnit4TestListener.java:68)
    at org.junit.runner.notification.RunNotifier$4.notifyListener(RunNotifier.java:100)
    at org.junit.runner.notification.RunNotifier$SafeNotifier.run(RunNotifier.java:41)
    at org.junit.runner.notification.RunNotifier.fireTestFailure(RunNotifier.java:97)
    at org.junit.internal.runners.MethodRoadie.addFailure(MethodRoadie.java:154)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.handleException(PowerMockJUnit44RunnerDelegateImpl.java:359)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit49RunnerDelegateImpl$PowerMockJUnit49MethodRunner.executeTest(PowerMockJUnit49RunnerDelegateImpl.java:93)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:101)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:53)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
```

请帮我

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-05-18T08:52:44.527

这是对我有用的东西：

```
@PowerMockIgnore({"javax.xml.*", "org.xml.sax.*", "org.w3c.dom.*",  "org.springframework.context.*", "org.apache.log4j.*"}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T19:28:26.803

如果这是与 PowerMock 相关的问题，那么您可以尝试使用以下命令注释您的测试类：

```
@PowerMockIgnore({"javax.xml.parsers.*", "com.sun.org.apache.xerces.internal.jaxp.*"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T09:08:31.273

这是一个 PowerMock 问题，我有这个错误：

```
java.lang.ClassCastException: class sun.security.provider.ConfigFile 
```

您可以使用此注释解决，请尝试使用以下方法注释您的测试类：

```
@PowerMockIgnore({"javax.management.*", "java.lang.*", "javax.security.*" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-19T03:02:41.673

您可以忽略 log4j。*. 我对 jptool 记录器有同样的问题。我已经通过忽略它解决了这是我的代码@PowerMockIgnore({"jptools.* "})

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-05T13:42:20.950

您可以创建一个包含内容的`configuration.properties`文件`test/resources/org/powermock/extensions/`：

```
powermock.global-ignore=org.apache.xerces.*,javax.xml.parsers.*,org.xml.sax.* 
```

注意：属性值中逗号分隔，不能有空格，否则无效！包列表取决于项目的依赖项。

PowerMock 配置[在这里](https://github.com/powermock/powermock/wiki/PowerMock-Configuration)。

# ruby-on-rails - Rails：为嵌套控制器提供参数

> ID：14644190
> 
> 赞同：1
> 
> 时间：2013-02-01T10:24:10.450
> 
> 标签：ruby-on-rails, params, jquery-file-upload

他

我的 Rails 应用程序中有两个模型（帖子、图片），它们的关联如下：

```
#Post model
has_many :pictures, :dependent => :destroy 
accepts_nested_attributes_for :pictures, :allow_destroy => true 

#Picture model
belongs_to :post 
```

在我的帖子编辑视图中，我有两个表单，因此我可以编辑帖子内容以及将图片添加到帖子中。我使用 jquery 文件上传插件和carrierwave 来处理上传过程。这看起来与这里的设置非常相似[http://tinyurl.com/aun7bl5](http://tinyurl.com/aun7bl5)

当我进入后期编辑视图时，jquery 文件上传总是向我显示所有图片，因为它使用图片控制器的索引操作来获取所有图像并将它们呈现为 json，因此 jquery 文件上传可以处理它们。索引操作看起来像这样。

```
def index
  @pictures = Picture.all 
  render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
end 
```

当我编辑帖子时，帖子控制器可以使用帖子参数（：id）。我可以用记录器看到它。但它不适用于嵌套在帖子编辑表单中的索引操作。

现在我的问题是，如何在 post 控制器中为 index 操作提供我喜欢编辑的帖子的 id，以便我可以在那里执行类似的操作来过滤它获得的图片：

```
def index
  @pictures = Picture.where(:post_id => params[:id])
  render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
end 
```

编辑：

```
#Post#edit view
<div class=post-well>
  <div class="page-header">
    <h1>Reisebericht editieren</h2>
  </div>

  <%= simple_form_for @post do |f| %>
    <%= f.error_notification %>
    <div class="form-inputs">
      <%= f.input :title, :label => "Titel", :input_html => { :class => 'new-post-inputfields' } %>
      <%= f.input :body, :label => "Artikel", :input_html => { :class => 'new-post-inputfields' } %>
      <%= f.hidden_field :picture_ids, :input_html => { :id => 'post_picture_ids' } %> 
      <%= f.button :submit, :label => "Speichern" %>
    </div> 
  <% end %>

  <h4>Bilder verwalten</h4>
  <%= simple_form_for Picture.new, :html => { :multipart => true, :id => "fileupload"  } do |f| %>
    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
    <div class="row fileupload-buttonbar">
      <div class="span7">
        <!-- The fileinput-button span is used to style the file input field as button -->
        <span class="btn btn-success fileinput-button">
          <i class="icon-plus icon-white"></i>
          <span>Hinzufügen</span>
          <%= f.file_field :path, multiple: true, name: "picture[path]" %>
        </span>
        <button type="submit" class="btn btn-primary start">
          <i class="icon-upload icon-white"></i>
          <span>Upload</span>
        </button>
        <button type="reset" class="btn btn-warning cancel">
          <i class="icon-ban-circle icon-white"></i>
          <span>Abbrechen</span>
        </button>
        <button type="button" class="btn btn-danger delete">
          <i class="icon-trash icon-white"></i>
          <span>Delete</span>
        </button>
        <input type="checkbox" class="toggle">
      </div>
      <div class="span5">
        <!-- The global progress bar -->
        <div class="progress progress-success progress-striped active fade">
          <div class="bar" style="width:0%;"></div>
        </div>
      </div>
    </div>
    <!-- The loading indicator is shown during image processing -->
    <div class="fileupload-loading"></div>
    <br>
    <!-- The table listing the files available for upload/download -->
    <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody>
    </table>
  <% end %>
</div> 

<script>
  var fileUploadErrors = {
    maxFileSize: 'File is too big',
    minFileSize: 'File is too small',
    acceptFileTypes: 'Filetype not allowed',
    maxNumberOfFiles: 'Max number of files exceeded',
    uploadedBytes: 'Uploaded bytes exceed file size',
    emptyResult: 'Empty file upload result'
  };
</script>

<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
      <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
          <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
          <td>
            <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
              <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                  <span>{%=locale.fileupload.start%}</span>
                </button>
            {% } %}</td>
        {% } else { %}
          <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
          <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
              <span>{%=locale.fileupload.cancel%}</span>
            </button>
        {% } %}</td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-download fade">
    {% if (file.error) { %}
      <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
          <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
          <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
              <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
          <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
              <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script> 
```

和javascript：

```
$(function () {  
  // Initialize the jQuery File Upload widget:
  $('#fileupload').fileupload({
  completed: function(e, data) {
     console.log(data.result[0].picture_id); 
     $("#post_picture_ids").val(function(i,val) { 
          return val + (val ? ', ' : '') + data.result[0].picture_id;
     });
   }
 });

 // Load existing files:
 $.getJSON($('#fileupload').prop('action'), function (files) {
  var fu = $('#fileupload').data('fileupload'), 
  template;
  fu._adjustMaxNumberOfFiles(-files.length);
  template = fu._renderDownload(files)
  .appendTo($('#fileupload .files'));
  // Force reflow:
  fu._reflow = fu._transition && template.length &&
  template[0].offsetWidth;
  template.addClass('in');
 $('#loading').remove();
 });
}); 
```

对此的任何帮助将不胜感激。

EDIT2：对于一种解决方案，请参见下面的@SybariteManoj 答案。另一种解决方案是使用：

```
$.getJSON($('#fileupload').prop('action') + '/' + $('#current_post_id').val(), function (files) { 
```

在 get 函数的开头，然后为图片控制器添加一个路由，如下所示：

```
get 'pictures/:id', to: 'pictures#index' 
```

然后，图片控制器中的索引操作将过滤此解决方案中的 id 参数，如下所示：

```
def index
  @pictures = Picture.where(:post_id => params[:id])
  render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
end 
```

我想我更喜欢@SybariteManoj 的完整解决方案，因此不需要路线，索引操作现在看起来像这样。

```
def index
  @pictures = Picture.where(:post_id => params[:post_id])
  render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:39:41.170

由于您正在编辑帖子，因此帖子`params[:id]`可用于帖子控制器的`update`操作，而不是其他人可用，这是在 rails 中编辑表单后的默认操作调用。

如果您想要`params[:id]`在`index`操作中，那么您需要在调用更新操作后重定向到索引操作，或者您需要将显示所选图片的逻辑仅放在更新操作中。

您还可以创建自定义操作方法来处理显示属于帖子的图片的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:43:09.893

我想您`Picture`有一个名为 foreign_key 的名称`post_id`，您可以在`index`操作中简单地使用它来仅获取属于`Post`.

尝试这样的事情：

```
def index
  @pictures = @post.pictures 
  render :json => @pictures.collect { |p| p.to_jq_upload }.to_json
end 
```

**编辑**

由于您的图片`belong_to`是您的帖子，您还需要修改`new`和`create`操作，以便为您的帖子创建图片。

一种方法是`find_post`在您的`Picture`控制器中创建一个方法，并进行`before_filter`如下回调：

```
class PicturesController < ApplicationController
  before_filter :find_post, :only => [:index, :new, :create]

  def find_post
    @post = Post.find(params[:post_id]) unless params[:post_id].nil?
  end

  def new
    @picture = @post.pictures.new
  end

  ## Same thing for the create action
end 
```

在您看来，在创建表单时也这样做：

```
<%= simple_form_for @post.pictures.new 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:58:07.007

我想我找到了罪魁祸首。在您的 javascript 中，`$.getJSON($('#fileupload').prop('action')`这是传递图像上传表单的 action 属性的值。

尝试在编辑视图文件中的某处添加此行

```
<%= hidden_field_tag :current_post_id, @post.id, :id => 'current_post_id' %> 
```

并替换此行

```
$.getJSON($('#fileupload').prop('action'), function (files) { 
```

和

```
$.getJSON($('#fileupload').prop('action') + '?post_id=' + $('#current_post_id').val(), function (files) { 
```

我尚未对其进行测试，但我很确定这应该可以解决您的问题。

# visual-studio-2012 - OpenNI 2 和 Visual Studio 2012

> ID：14644191
> 
> 赞同：9
> 
> 时间：2013-02-01T10:24:14.680
> 
> 标签：visual-studio-2012, openni

我刚刚下载了 OpenNI 2 SDK ( [www.openni.org](http://www.openni.org) )，我正在尝试在 Visual Studio 2012 中设置一个项目。我做了什么：

1.  创建一个新的 C++ Win32 控制台应用程序项目
2.  转到*项目>MyProject 属性*，然后在*配置属性>VC++ 目录*中...
3.  添加**C:\Program Files (x86)\OpenNI2\Redist\；**到*可执行目录*
4.  添加**C:\Program Files (x86)\OpenNI2\Include\;** 包括*目录*
5.  添加**C:\Program Files (x86)\OpenNI2\Redist\；**参考*目录*
6.  添加**C:\Program Files (x86)\OpenNI2\Lib\；**到*图书馆目录*

但是当我尝试构建时，出现以下未解决的符号错误（其中 ConsoleApplication1 是我的项目名称）

```
Error   1   error LNK2019: unresolved external symbol
__imp__oniInitialize referenced in function
"public: static enum openni::Status __cdecl openni::OpenNI::initialize(void)"
(?initialize@OpenNI@openni@@SA?AW4Status@2@XZ)
c:\Users\MyPC\documents\visual studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.obj
ConsoleApplication1 
```

我知道这个链接错误是说链接器找不到一些库，但我认为我刚刚做的就足够了。

我也尝试了64位版本，创建了一个64位项目，但我有同样的错误。

我找不到关于这个主题的令人满意的文档。

我确定我错过了一些愚蠢的东西。您能对此提出一些建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T23:22:24.060

您还应该执行以下步骤：

0-在 C/C++ 部分的“常规”节点下，选择

```
"Additional Include Directories" 
```

并添加

```
"$(OPENNI2_INCLUDE)" (if you use the 32-bit version) or 
"$(OPENNI2_INCLUDE64)" (if you use the 64-bit version). 
```

这些是指向 OpenNI Include 目录位置的环境变量。（默认值为：

```
C:\Program Files\OpenNI2\Include or 
C:\Program Files (x86)\OpenNI2\Include) 
```

1-在链接器部分的“常规”节点下，选择

```
"Additional Library Directories" 
```

并添加

```
"$(OPENNI2_LIB)" (if you use the 32-bit version) or 
"$(OPENNI2_LIB64)" (if you use the 64-bit version). 
```

这些是指向 OpenNI Lib 目录位置的环境变量。（默认值为：

```
C:\Program Files\OpenNI2\Lib or 
C:\Program Files (x86)\OpenNI2\Lib) 
```

2-在链接器部分的输入节点下，选择

```
"Additional Dependencies" 
```

并添加

```
OpenNI2.lib or OpenNI2.lib 
```

3-确保将 Additional Include 和 Library 目录添加到**Release**和**Debug**配置中。

4-将 OpenNI 的 redist 目录中的所有文件（请参阅环境变量“$(OPENNI2_REDIST)”或“$(OPENNI2_REDIST64)”）复制到您的工作目录。（默认为

```
C:\Program Files\OpenNI2\Redist or 
C:\Program Files (x86)\OpenNI2\Redist). 
```

请注意，从命令行运行时，工作目录是可以找到可执行文件的目录，而从 Visual Studio 运行的默认目录是可以找到项目文件（.vcproj、.vcxproj）的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:07:51.447

您还需要指向实际的库文件：`openni2.lib`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T12:43:47.937

If you add all of options (Include, Lib, ...) to your project setting and again get this error, maybe your project platform is Win32 and you want to use OpenNI x64

In this case, you must change the platform to x64 (Project properties at the top of the page)

*   If you don't have x64 option, make a new one ;)

# javascript - 是我还是我不能总结这些？

> ID：14644194
> 
> 赞同：2
> 
> 时间：2013-02-01T10:24:21.550
> 
> 标签：javascript, sum

早上好/下午/晚上:)。

我有两个整数，我想把它们变成浮点数，用 4 个十进制数字在 GPS 坐标上使用它们：

```
var z = y.toFixed(4);
var p = x.toFixed(4); 
```

但是有一种情况困扰着我，那就是这些 'z' 和 'p' 之间的总和：

```
var t = z + p; 
```

完成此指令后，我想使用一些常用功能在屏幕上打印结果，例如：

```
document.write(z);  document.write("<br />");
document.write(t);
document.write("<br />");   
document.write("<br />"); 
```

我得到的结果是：

```
0.0000
0.0000300.0000

1.0000
1.0000300.0000

2.0000
2.0000300.0000 
```

但我真正想要的是：

```
300.0000
301.0000
302.0000 
```

毕竟，我怎样才能对“z”和“p”求和？:S

菜鸟问题，我知道：S。

亲切的问候，山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:29:16.297

那是因为`.toFixed()`返回一个`String`对象而不是 a `Number`，所以`+`运算符执行连接。

相反，您应该先执行实际数字的相加，*然后*执行`.toFixed()`“四舍五入”结果以进行显示。

```
var t = (x + y).toFixed(4);
document.write(t); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:28:41.877

我想你想要的是：

```
var t = x + y;
var p = t.toFixed(4);
document.write(p); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T10:29:04.153

试试这个

```
var t = (x + y).toFixed(4); 
```

[在这里摆弄](http://jsfiddle.net/bipen/cFSa6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T10:30:19.270

JavaScript 方法`toFixed`将您的号码转换为字符串。因此，当您执行操作时`z + p`，它实际上是字符串连接而不是数字相加。您可以先添加您的号码，然后再申请`toFixed`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T10:30:32.443

`toFixed()`返回一个字符串，这意味着您在使用`var t = z + p`. 您需要先对坐标求和，然后调用`toFixed()`.

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-01T10:26:24.077

多少钱`p`？你在连接字符串吗？

尝试`var t = parseFloat(z) + parseFloat(p);`

# html - Windows 8 磁贴标签被忽略

> ID：14644197
> 
> 赞同：4
> 
> 时间：2013-02-01T10:24:33.920
> 
> 标签：html, windows-8, microsoft-metro, xampp

我正在尝试`Windows 8`使用以下代码为我的网站制作磁贴：

```
<meta name="application-name" content="Home | <?php echo bloginfo('name'); ?>" />
<meta name="msapplication-starturl" content="<?php echo bloginfo('url'); ?>" />
<meta name="msapplication-navbutton-color" content="#349ed5" />
<meta name="msapplication-tooltip" content="Tooltip Test" />
<meta name="msapplication-TileColor" content="#349ed5" />
<meta name="msapplication-TileImage" content="/logo_w144px.png" /> 
```

,和属性工作正常`application-name`，只需刷新页面即可更新 - 无需重新固定 - 但,和被完全忽略。`msapplication-starturl``msapplication-navbutton-color``msapplication-tootlip``msapplication-TileColor``msapplication-TileImage`

笔记：

*   这是一个 WordPress 网站
*   IE 也忽略了该站点的图标
*   重启机器没有拉入镜像
*   我从另一台计算机上的 XAMPP 服务器运行此站点，通过 IP 和端口号访问它
*   对于另一个本地站点，选择了 favicon，但`msapplication`忽略了相同的三个元标记，并将 favicon 用作平铺图像

有谁知道出了什么问题以及我如何解决它？

[编辑]

我尝试通过 Microsoft 的[buildmypinnedsite.com](http://www.buildmypinnedsite.com/)代码生成器放置图像和设置，并使用它吐出的图像和代码，但这没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-31T07:56:16.350

该网站需要可以通过公共地址访问 - 它是 IP 还是域，它不能是本地 IP 地址，例如 localhost 或 127.0.0.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:06:22.287

我刚刚用类似的设置遇到了这个问题。它最终是由`.wrap()`在`<iframe>`. 就我而言，这是因为我使用 FitVids.js。

[在这里报告错误](https://connect.microsoft.com/IE/feedback/details/780880/using-appendchild-on-iframe-breaks-windows-8-tile-tags)

平铺标签在任何页面上都可以正常工作，而无需`<iframe>`在 JS 中使用 appendChild 进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:28:27.657

你确定你`msapplication-TileImage`是`144x144 px .png image`吗？

您可以看到（来源“社区添加”部分）这是必须的，当我将 .png 大小更改`72x72 px`为`144x144 px`问题已解决时，我也遇到了同样的问题。

资源 ; [自定义站点图标 (Windows)](http://msdn.microsoft.com/en-us/library/ie/gg491740%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:08:03.377

我今天一直在尝试这样做，并且发现如果您的网站在 HTTPS 下运行，图像将不会显示。

HTTP 工作正常...

我不敢相信我是唯一发现这一点的人，但还没有在网上找到任何关于它的信息。

- 编辑 -

HTTPS 确实有效，但前提是您拥有完全受信任的证书 - 而不是自行生成的证书！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:22:43.307

这可能是问题所在： content="/logo_w144px.png" 。

它很可能找不到图像。尝试更改路径或向 jpg 添加回退。

*   内容="logo_w144px.png"
*   内容="../logo_w144px.png"
*   内容="../img/logo_w144px.png"

...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-21T14:55:48.797

您如何确保使用平铺图像代替网站图标？

```
 <title>{$pageTitle}</title>

{* Favicon and Apple touch icon *}
<link rel="shortcut icon" href="{$THEME_URL}/favicon.ico" />
<link rel="apple-touch-icon" href="{$THEME_URL}/apple-touch-icon.png" />

{* Windows 8 tile *}
<meta name="application-name" content="{$siteTitle}"/> 
<meta name="msapplication-TileColor" content="#3380aa"/> 
<meta name="msapplication-TileImage" content="{$THEME_URL}/tile.png"/> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-01T13:33:15.353

我已经对这些东西做了一些实验，尽管是使用客户预览版，但发现它非常不可靠。几个关键点：

*   如果您有一个网站图标[，它将始终被选为图像](http://ericnelson.wordpress.com/2012/06/10/pinning-sites-in-windows-8-add-two-meta-tags-to-make-it-high-quality/#comment-790)
*   用于切片的任何缓存都与浏览器缓存分开，并且似乎无法强制刷新，因此无论您是否看到可能在配置中进行的任何更新，都非常容易受到影响

# jquery - 多个 jQuery UI 滑块更新错误的值

> ID：14644199
> 
> 赞同：0
> 
> 时间：2013-02-01T10:24:56.167
> 
> 标签：jquery, jquery-ui, uislider, meta-boxes

我正在使用 Wordpress Meta Box 插件 ( [https://github.com/rilwis/meta-box](https://github.com/rilwis/meta-box) ) 在帖子页面上放置六个 jQuery UI 滑块。

问题是处理我找不到的滑块的 jQuery 中一定存在错误：每次我放置多个滑块时，它都会更新页面中最后一个滑块的值，而不是正确的值。只有在页面中有 1 个滑块时才能正常工作，或者如果我重复代码六次（每个班级一次），显然我不想这样做。

例子：

我移动**pm_slider_c1** > 更新**pm_rating_c6-label** span

这是JS代码：

```
jQuery( document ).ready( function( $ )
{
    var
        id = null
        , el = null
        , input = null
        , label = null
        , format = null
        , value = null
        , update = null
        ;
    $( '.rwmb-slider' ).each( function( i, val )
    {
        id = $( val ).attr( 'id' );
        el = $( '#' + id );
        input = $( '[name=' + id + ']' );
        label = $( '[for=' + id + ']' );
        format = $( el ).attr( 'rel' );

        $( label ).append( ': <span id="' + id + '-label"></span>' );
        update = $( '#' + id + '-label' );

        if (
            !$( input ).val()
                || 'undefined' === $( input ).val()
                || null === typeof $( input ).val()
            )
        {
            $( input ).val( $( el ).slider( "values", 0 ) );
            $( update ).text( "0" );
        }
        else
        {
            value = $( input ).val();
            $( update ).text( value );
        }
        if ( 0 < format.length )
            $( update ).append( ' ' + format );

        el.slider(
            {
                value: value,
                slide: function( event, ui )
                {
                    $( input ).val( ui.value );
                    $( update ).text( ui.value + ' ' + format );
                }
            } );
    } );
} ); 
```

单个滑块的 HTML：

```
<div class="rwmb-field rwmb-slider-wrapper">
    <div class="rwmb-label">
        <label for="pm_rating_c1">Rating: 
            <span id="pm_rating_c1-label">0</span><!-- GENERATED FROM JS -->
        </label>
    </div>

    <div class="rwmb-input">
        <div class="clearfix">
            <div class="rwmb-slider" id="pm_rating_c1"></div>
            <input type="hidden" name="pm_rating_c1" value="0">
        </div>
    </div>
</div> 
```

我为此头疼了四天（我不是 jQuery 专家），所以任何帮助都将不胜感激。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T07:02:08.917

偶然发现了这个问题，试图解决类似的问题。

供任何人参考：问题是每次创建滑块时都会重置输入和更新值（对于 each() 循环的每次迭代）。

因此，当任何 ui 滑块对象检测到滑动事件时，它会使用您为“输入”和“更新”设置的最后一个值调用以下逻辑

```
$( input ).val( ui.value );
$( update ).text( ui.value + ' ' + format ); 
```

解决方案是使用 jquery this 对象**$(this)**作为选择器的根。

例如

```
el.slider(
            {
                value: value,
                slide: function( event, ui )
                {
                    $(this).find("input").val( ui.value );
                    $(this).closest("label").text( ui.value + ' ' + format );
                }
            } ); 
```

可能有一种更有效的方式来编写此代码，但它解决了您的问题的根源。

# javascript - 是否可以从表单中获取值并与之建立链接？

> ID：14644202
> 
> 赞同：0
> 
> 时间：2013-02-01T10:24:59.473
> 
> 标签：javascript

如果可能的话，请帮我做这件事。

我有一个由 Wapka.mobi 提供支持的移动社区网站

网站上有一个功能，成员可以互相发送消息。是这样的形式；

```
<form method="get" action="messages_site.xhtml">   
<input type="text" name="username" value=" "/>   
<input type="text" name="subject" value=" "/>   
<input type="text" name="message" value=" "/>   
<input type="hidden" name="d_token" value="tokencode"/>   
</form> 
```

但无法编辑此表单。它使用标签显示

我想知道我是否可以从输入字段中获取隐藏的值并创建一个链接，用户可以在该链接中向管理员（我）发出嗡嗡声，而无需让他们输入自己的消息。像这样;

```
<a href="message_site.xhtml?username=admin&subject=user+userid+buzzed+you&message=nothing&d_token=tokencode&submit">Send a buzz to the Admin</a> 
```

但我不知道如何将令牌代码放入链接。请让我知道是否可以使用 Javascript。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:41:35.433

```
<form name="buzzerform" method="get" action="messages_site.xhtml">   
    <input type="text" name="username" value=" "/>   
    <input type="text" name="subject" value=" "/>   
    <input type="text" name="message" value=" "/>   
    <input type="hidden" name="d_token" value="tokencode"/>   
</form>

<a id="buzzer" href="#">Send a buzz to the Admin</a>

<script type="text/javascript">
    document.getElementById('buzzer').addEventListener("click", function() {
        var newUrl = 'message_site.xhtml?username=' + document.buzzerform.username.value + ...;
        document.location.search = newUrl;
    });
</script> 
```

# oracle - 在 TSQLConnection 中使用 Oracle 驱动程序

> ID：14644206
> 
> 赞同：1
> 
> 时间：2013-02-01T10:25:16.393
> 
> 标签：oracle, delphi, delphi-xe2, dbexpress

我在我的应用程序中使用 Delphi XE2 和 dbExpress。在开发过程中，我知道我需要安装 SQL Native 客户端才能在 dbExpress 连接设置中使用 MSSQL 作为驱动程序（因为客户端机器上没有安装 SQL）

如果我想在 dbExpress 中使用 Oracle 作为驱动程序（因为客户端机器没有安装任何 Oracle 组件），您能否告诉我需要安装哪个客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:20:26.327

您需要与应用程序位数相对应的 Oracle 客户端。

对于 XE2，如果您的应用程序是 64 位，则需要 x64 客户端。

如果您的应用程序是 32 位的，则需要 x86 客户端。

安装*Oracle 客户端*是一个巨大的过程——`win32_11gR2_client.zip`大约 700 MB——对于客户端来说还不错！在安装期间，要使 DBExpress 工作，您只需要选择 OCI 库，而不是 ODBC 或 OleDB 提供程序，也不是 JDBC（除非其他 Java 或 .Net 客户端期望它们）。

您可以在此处安装[Oracle Instant Client](http://www.oracle.com/technetwork/topics/winsoft-085727.html)，它是一组 OCI 库文件。获取最新版本，即使您的服务器较旧。但是没有安装程序：您必须在路径或可执行文件夹中解压缩它们。如果将其放在路径中，请注意它可能会破坏其他“完整客户端”的任何安装。*Instant Client Package - Basic Lite*：最小 (20 MB)，运行良好，但仅支持英文错误消息和 Unicode、ASCII 和西欧字符集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:58:39.850

Oracle Instantclient 就足够了。

# php - wordpress 将值传递给另一个页面/文件

> ID：14644207
> 
> 赞同：0
> 
> 时间：2013-02-01T10:25:17.167
> 
> 标签：php, wordpress

老实说，我正在做 wordpress 插件，因为我是新手。

我在 main.php 中有这段代码

```
<?php
$url = admin_url();    
?>
<a href="<?php echo $url;?>edit.php">
    <img src="<?php echo plugins_url( 'images/edit-file-icon.png', __FILE__ ); ?>" />
</a>
?> 
```

然后`edit.php` 当我单击此链接时，它不会进入我的 edit.php 文件，然后 wordpress 只是将我重定向到管理面板的仪表板。

我如何为我正在处理的插件的同一页面调用我的 edit.php 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:12:11.897

你不能那样称呼它，你必须做的是创建一个钩子。URL 将与您想象的有所不同。看看[http://codex.wordpress.org](http://codex.wordpress.org)中的一个创建插件应该会有所帮助。

# ios - XCode自定义框架中的头文件的只读权限

> ID：14644208
> 
> 赞同：0
> 
> 时间：2013-02-01T10:25:18.033
> 
> 标签：ios, objective-c, xcode

我正在 Xcode 中创建自己的自定义框架。我已成功创建 .framework 并将其包含在我的示例应用程序中。但是当我在“MySampleApp”中查看我的公共头文件（来自.framework）时，它们不是只读的。我想让他们只读文件。

如果我们看到 Apple 提供的任何框架，所有头文件都被锁定。我想要同样的实现。

我知道这可能通过脚本实现，但无法成功。有没有人做过同样的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:47:15.933

我通过使用 chmod 命令解决了这个问题

```
 find "MyFramework/" -type f -name "*\.h" | xargs chmod 444 
```

首先，我从 .framework 中搜索了所有在 MyFramework 文件夹中创建的 .h 文件，然后通过 chmod 命令更改了权限。

# jquery - 删除 facebook likebox 滚动条

> ID：14644209
> 
> 赞同：2
> 
> 时间：2013-02-01T10:25:18.603
> 
> 标签：jquery, html, css, facebook-like, facebook-social-plugins

我想删除 facebook likebox 滚动条并且遇到问题，因为它们似乎加载了 likebox 的样式，因为调查表明样式是在页面加载后加载的。

我已将“pluginLikeboxStream”标识为我想要覆盖或添加“溢出：隐藏”的类，但不知道如何添加或覆盖来自 facebook 的默认样式。

我尝试了本地 css 文件，并且 jquery 没有成功。

有任何想法吗

```
 (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=445282282200701";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));' 
```

html:

```
<div class="fb-like-box" data-href="https://www.facebook.com/mypage" data-width="355" data-height="400" data-show-faces="false"
                data-stream="true" data-border-color="#FFFFFF" data-header="false">
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:46:02.333

Facebook likebox 在您声明的 div 中作为 IFrame 加载。

您无法控制来自其他来源的 IFrame 的样式。

Facebook 让您可以控制点赞框的显示方式，但除此之外您无能为力。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T11:14:03.353

试试这个CSS：

```
.pluginLikeboxStream{
overflow:hidden !important;
} 
```

# git - Git 打包文件错误

> ID：14644213
> 
> 赞同：4
> 
> 时间：2013-02-01T10:25:26.363
> 
> 标签：git

我有一台在 Windows 8 和 Ubuntu 12.04 之间双启动的机器。

在共享文件系统上有一个 Git 存储库/工作区。它是使用 Windows 中的 msysgit 创建的。

当我尝试在 Linux 下使用这个 repo（使用 Git 1.7.9.5）时，我看到这些错误消息：

> 错误：packfile .git/objects/pack/pack-31c385e8e4f1c105da16758ee98043a4b4ea1e50.pack 签名不可用
> 
> 警告：packfile .git/objects/pack/pack-31c385e8e4f1c105da16758ee98043a4b4ea1e50.pack 无法访问
> 
> 错误：packfile .git/objects/pack/pack-31c385e8e4f1c105da16758ee98043a4b4ea1e50.pack 签名不可用
> 
> 警告：packfile .git/objects/pack/pack-31c385e8e4f1c105da16758ee98043a4b4ea1e50.pack 无法访问
> 
> 致命：无法读取对象 190cb002f6257e33efe88a91b37943be29cf9412：对于定义的数据类型，值太大

首先，这些是什么意思？

其次，这是否表明`.git`文件夹的内容取决于分发，无论是操作系统还是 git 的版本/实现？

我可以通过对 repo 进行另一个克隆来解决这个问题，但如果可能的话，我更愿意使用两个操作系统中的相同版本。

# c# - 单声道框架中是否提供“System.Speech.Recognition”命名空间？

> ID：14644214
> 
> 赞同：2
> 
> 时间：2013-02-01T10:25:28.640
> 
> 标签：c#, .net, mono, speech-to-text

我正在使用 .net 框架中可用的类构建一个语音识别应用程序。我的客户想使用单声道框架在 Linux 中运行这个应用程序。

我试图搜索这个特定的命名空间及其相关类是否可用并且是否也在单声道框架中工作，但找不到 100% 正确的答案。

所以我有两个问题：

1.  这个`System.Speech.Recognition`命名空间是否在单声道中可用？

2.  如何检查 .net 中存在的特定命名空间/功能/类是否在单声道中可用？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:26:51.940

根据您的 mono 版本，请参阅此链接，了解 Mono 与 .NET 框架的比较：[http ://go-mono.com/status/status.aspx?reference=4.0&profile=4.5&assembly=System.Speech](http://go-mono.com/status/status.aspx?reference=4.0&profile=4.5&assembly=System.Speech)

所以，是的，Mono 框架中似乎有一个可用的 System.Speech.Recognition 命名空间，而且它实际上看起来很完整。不过我从来没用过。

# android - Android中的标签，如何创建内容

> ID：14644217
> 
> 赞同：2
> 
> 时间：2013-02-01T10:25:40.497
> 
> 标签：android, eclipse, tabs, fragment

嘿，我对创建 android 应用程序很陌生。我想在操作栏中创建三个选项卡。我已经通过使用 New->Android Activity-> Navigation with Swipe and Tabs 创建它们来完成此操作。

这就是我的 MainActivity 代码（使用了 android.com 的教程之一）：

```
 public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Create a new TextView and set its text to the fragment's section
            // number argument value.
            int current_section = getArguments().getInt(ARG_SECTION_NUMBER);

            switch(current_section){
            case 1:
            {

                EditText element1 = new EditText(getActivity());
                element1.setHint(R.string.edit_text_hint);
                element1.setGravity(Gravity.TOP);
                element1.setPadding(40,40,40,0);
                element1.setSingleLine();

                TextView textView = new TextView(getActivity());
                textView.setGravity(Gravity.CENTER);
                textView.setText("Search");

                return element1;
            }
            case 2:
            {
                TextView textView = new TextView(getActivity());
                textView.setGravity(Gravity.CENTER);
                textView.setText("User Account");
                return textView;
            }
            case 3:
            {
                TextView textView = new TextView(getActivity());
                textView.setGravity(Gravity.CENTER);
                textView.setText("Last Updated");
                return textView;
            }
            }
            TextView textView1 = new TextView(getActivity());
            textView1.setGravity(Gravity.CENTER);
//          textView.setText(Integer.toString(getArguments().getInt(
//                  ARG_SECTION_NUMBER)));
            return textView1;
        }
    } 
```

所以在三个选项卡中的每一个都有一个不同的项目显示，不幸的是只能显示一个 - 而不是更多。我认为这是一个很简单的问题，但我只是不知道这是如何工作的。希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:30:33.503

在本教程中，您将返回一个**textview**。尝试将 textview 添加到布局，并返回布局。

我认为您想要的是为不同的选项卡使用不同的片段。然后，您可以在片段本身中指定布局和其他代码，而不是使用开关盒构建一个 BIG 片段。

为每个**Fragment**创建一个新类。可以将此**Fragment**添加到**TabBarListener**。

在**Fragment的****onCreateView**中，您可以通过将对象添加到**view**参数来以编程方式创建布局。您还可以使用充气机来充气您的 XML 布局。

 ****我创建了一个示例项目，其中 1 个**Fragment**视图被夸大，另一个是以编程方式创建的：

[这里](http://www.mor-it.nl/code/stackoverflow/ActionBarFragment.zip)

如果您阅读android文档，它将更加清晰。我认为他们甚至有一个示例代码项目。

[Actiobar，选项卡部分](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

[有关片段的更多信息](http://developer.android.com/guide/components/fragments.html#Example)****

# c - 向量的长度，初学者

> ID：14644219
> 
> 赞同：2
> 
> 时间：2013-02-01T10:25:55.293
> 
> 标签：c, function, vector

我有一个小问题：我可以计算向量的长度，但前提是向量是在同一个函数中定义的。当我尝试将向量传递给另一个函数时，它返回错误的输出，我不明白为什么。

```
#include <stdio.h>

int len(int vec[]);

main()
{
    int a[6];

    printf("%d\n", sizeof(a)/sizeof(int));
    printf("%d\n", len(a));

    return 0;
}

len(int vec[])
{
    return sizeof(vec)/sizeof(int);
} 
```

输出是：

```
6
1 
```

为什么该功能`len()`不起作用？它应该返回 6 而不是 1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:27:56.090

这是因为数组在传递给函数时会*衰减*为指向其第一个元素的指针。

没有与数组关联的长度的运行时存储，所以这不起作用。基本上，对于函数参数，类型`int a[]`等价于`int *a`，即它只是一个指针。

当您需要将数组传递给函数时，最好总是简单地传递一个长度，并且您永远不能拥有像您的`len()`. 当然，如果您自己将长度存储在指向的数据中，则例外情况，就像字符串对终止符所做的那样。

作为一个风格点，这段代码在`main()`：

```
printf("%d\n", sizeof(a)/sizeof(int)); 
```

在我看来，最好写成：

```
printf("%zu\n", sizeof a / sizeof *a); 
```

具有以下值得注意的变化：

*   `sizeof`has 类型的结果`size_t`，它不是`int`. 它由格式说明符正确打印`%zu`。
*   请注意，这`sizeof`不是函数，因此在大多数情况下不需要括号。
*   更喜欢引用变量，而不是重复可能与变量关联或不关联的类型名称。意思是“指向`sizeof *a`的值的大小”。`a`
*   另请注意，根据[C 的运算符优先级规则](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)，`sizeof`绑定比 更紧密`/`，因此表达式的真正含义是`(sizeof a) / (sizeof *a)`，这是期望的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:28:29.900

您的`len`函数将一个未指定大小的数组作为参数，在这种情况下，它被视为只是一个指针类型（在您的情况下为`int`指针）。在您的特定平台上，指针的大小与 a 的大小相同， 1 也是`int`如此`sizeof(vec)/sizeof(int)`。

如果您明确指定数组参数的长度，那么您的大小计算将按预期运行——但您的函数将只采用该长度的数组参数。

另请参阅：[作为函数参数的 C++ 数组](https://stackoverflow.com/questions/2867783/c-arrays-as-function-arguments)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:32:59.863

因为`int len(int vec[])`实际上是一个`int len(int *vec)`. `len`变量内部`vec`被视为一个指针，因此`sizeof vec`返回保存地址所需的字节数。

请注意，这`sizeof`是一个运算符，而不是一个函数。这意味着返回的值`sizeof`是在编译时计算的。

# ssh - 主机密钥验证失败 [rsync: 连接意外关闭]

> ID：14644221
> 
> 赞同：2
> 
> 时间：2013-02-01T10:26:06.323
> 
> 标签：ssh, cron, rsync

我遇到了一个特殊的问题，即 rsync 命令在通过 crontab 执行时没有运行。
下面是代码：

```
#!/bin/sh -x
PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/mysql/bin:/opt/android-sdk-linux/tools:/opt/android-sdk-linux/platform-tools:~/usr/lib/jvm/jdk-6/bin
/bin/sh /etc/profile
MyUSER="root"       # USERNAME
MyPASS="password"         # PASSWORD
MyHOST="localhost"  # Hostname
Password="" #Linux Password

MYSQL="$(which mysql)"
if [ -z "$MYSQL" ]; then
echo "Error: MYSQL not found"
exit 1
fi
MYSQLADMIN="$(which mysqladmin)"
if [ -z "$MYSQLADMIN" ]; then
    echo "Error: MYSQLADMIN not found"
    exit 1
fi
CHOWN="$(which chown)"
if [ -z "$CHOWN" ]; then
    echo "Error: CHOWN not found"
    exit 1
fi
CHMOD="$(which chmod)"
if [ -z "$CHMOD" ]; then
    echo "Error: CHMOD not found"
    exit 1
fi

GZIP="$(which gzip)"
if [ -z "$GZIP" ]; then
    echo "Error: GZIP not found"
    exit 1
fi
CP="$(which cp)"
if [ -z "$CP" ]; then
    echo "Error: CP not found"
    exit 1
fi
MV="$(which mv)"
if [ -z "$MV" ]; then
    echo "Error: MV not found"
    exit 1
fi
RM="$(which rm)"
if [ -z "$RM" ]; then
    echo "Error: RM not found"
    exit 1
fi
RSYNC="$(which rsync)"
if [ -z "$RSYNC" ]; then
    echo "Error: RSYNC not found"
    exit 1
fi

MYSQLBINLOG="$(which mysqlbinlog)"
if [ -z "$MYSQLBINLOG" ]; then
    echo "Error: MYSQLBINLOG not found"
    exit 1
fi
# Get data in dd-mm-yyyy format
NOW="$(date +"%d-%m-%Y-%T")"

DEST="/home/db-backup"
mkdir $DEST/Increment_backup.$NOW
LATEST=$DEST/Increment_backup.$NOW
$MYSQLADMIN -u$MyUSER -p$MyPASS flush-logs
newestlog=`ls -d /usr/local/mysql/data/mysql-bin.?????? | sed 's/^.*\.//' | sort -g | tail -n 1`
echo $newestlog
for file in `ls /usr/local/mysql/data/mysql-bin.??????`
do
        if [ "/usr/local/mysql/data/mysql-bin.$newestlog" != "$file" ]; then
     echo $file
     echo $Password | sudo -S $CHMOD 0777 $file
         #sudo $MYSQLBINLOG $file>$file.$NOW.sql
     $CP "$file" $LATEST
     #$RM "$file.$NOW.sql"
     #$MV $file.sql.gz /$LATEST
        fi
done
for file1 in `ls $LATEST/mysql-bin.??????`
do
 $MYSQLBINLOG $file1>$file1.$NOW.sql 
 $GZIP -9 "$file1.$NOW.sql"     
 $RM "$file1"
done
 $RSYNC -v -e ssh $LATEST abc@192.168.1.9:/home/rsync-backup/
#FILE=$LATEST/"mysql-bin.??????"
#$MYSQLBINLOG $FILE>$FILE.$NOW.sql
#$GZIP -f "$FILE.$NOW.sql"
pwd 
```

手动运行代码时会发生 Rsync，但通过 crontab 运行时会失败。其余命令工作正常。从日志中我得到了这些信息：

```
Host key verification failed.^M
rsync: connection unexpectedly closed (0 bytes received so far) [sender]
rsync error: unexplained error (code 255) at io.c(600) [sender=3.0.6] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T07:10:29.613

这基本上是由于 ssh 的第一次身份验证问题。如果您要确保手动将主机添加到 known_hosts 或期望脚本中的提示，它应该可以工作。

```
The authenticity of host '[IP]:20022 ([IP]:22)' can't be established.
RSA key fingerprint is bc:87:52:cf:ac:3e:67:74:1b:e1:0b:e3:e2:06:d8:21.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '[IP]:22' (RSA) to the list of known hosts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:13:37.653

这种错误通常是由于环境的差异造成的。一个好的故障排除步骤是在程序开始时运行“env”并比较 cron 和非 cron 版本。

您还应该将命令作为“sh -x”运行，这将显示所有扩展，这将有助于确定哪个变量设置不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T17:06:45.070

这可能是您的 HOME 目录已加密。

如果您的用户已登录，则它可以工作，但是当它是 cron 时，即使它正在执行同一用户，它也无权访问您的`$HOME/.ssh`目录

# java - Google Apps Marketplace JAR 和 GAE

> ID：14644226
> 
> 赞同：3
> 
> 时间：2013-02-01T10:26:28.840
> 
> 标签：java, google-app-engine, jar, google-eclipse-plugin, google-apps-marketplace

当您使用 Google-Eclipse 插件创建新的**Web 应用程序项目**并选择“*添加对在 Google Apps Marketplace 上列出的支持*”选项时，插件会自动`apps-marketplace.jar`在您的类路径中添加一个文件。

这 - 在*任何*时间点，出于*任何*原因 - 是否需要与您的 WAR 捆绑在一起？我问是因为它包含 SLF4J 的捆绑版本，这会导致使用不同版本 SLF4J 的其他依赖项出现 JAR 地狱问题。

我将它捆绑到我的 WAR 中，因为我认为它是必要的，但如果它只是被插件使用的东西，或者当 GAE 应用程序在生产中运行时可能作为某种服务提供给 GAE 应用程序，那么我不需要它并希望将其作为依赖项删除。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:38:42.953

不需要这个罐子。您可以将其从构建路径和 WAR 目录中删除。我们需要修复插件，以便它摆脱这个 jar。

我有一种感觉，首先添加它是为了让您可以轻松地从您的 Marketplace 应用程序访问某些 Google API。它包括一堆用于处理 OAuth 的类。但是，我认为这里的所有类基本上都已弃用，现在有更好的方法来进行这些 Api 调用。

# php - PHP MySQL查询返回NULL

> ID：14644231
> 
> 赞同：4
> 
> 时间：2013-02-01T10:26:42.200
> 
> 标签：php, mysql

我有一个如下所示的 MySQL 表：

```
index  |  tag  |  posts
-------------------------
  1    | cats  |   9,10
  2    | a cat |   9,10
  3    | kitty |   9,10
  4    | meow  |   9,10 
```

我试图只返回与搜索查询匹配的行。我使用简单的`?search=cats`. 这是我正在使用的 PHP：

```
$search = $_GET['search'];
$query  = mysql_query("SELECT * FROM tags WHERE tag = '$search'");
echo(mysql_num_rows($query));
$result = mysql_fetch_array($query);
$print  = $result['posts'];
echo($print); 
```

但是`mysql_num_rows($query)`打印 0 并`$print`返回 NULL。我可以用 来检查它`($print == "")`，它的计算结果为 TRUE 并`mysql_num_rows($query)`返回 4。我尝试将搜索查询设置为表中没有的内容，它按预期重新调整了 FALSE。我还尝试删除`WHERE tag = '$search'`它，它会按原样返回表格。

有什么我忽略的吗？

**编辑**

听取了大家的建议，我现在使用的代码是：

```
$search = mysql_real_escape_string($_GET['search']);
var_dump($search); //prints   string(4) "cats"   just like it should
$queryText = "SELECT * FROM tags WHERE tag = '%".$search."%'";
echo($queryText); //SELECT * FROM tags WHERE tag = '%cats%'
$query  = mysql_query($queryText) or die(mysql_error()); //no error
$rows   = mysql_num_rows($query); //this returns 0 and I know it should match 1 row
echo('rows: '.$rows);
$result = mysql_fetch_array($query);
$print  = $result['posts'];
echo($print); //empty 
```

仍然有同样的问题。`mysql_query`如果不匹配，则重新调整 NULL 而不是行或 FALSE 。

*（将来我会使用`mysqli`API，但我想在. 中完成这个项目`mysql`。感谢您的建议和建议）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:30:07.063

现在试试这个代码。

**请记住**，当您想在 PHP 中调试某些东西时，更快的方法是**var_dump**而不是*echo*。此外，您应该避免使用 mysql_api，因为它们已被弃用，[在 PHP.net 上使用 PDO 代替 PDO](http://php.net/manual/en/book.pdo.php)

```
var_dump($_GET); // Just for debuggin if as something

$search = $_GET['search'];
$query  = mysql_query("SELECT * FROM tags WHERE tag = '".mysql_real_escape_string($search)."'");
// echo(mysql_num_rows($query));
$result = mysql_fetch_array($query);
var_dump($result);
//$print  = $result['posts'];
//echo($print); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:32:54.420

```
$search = $_GET['search'];
echo $select_query="SELECT * FROM tags WHERE tag = '".mysql_real_escape_string($search)."'";
$query  = mysql_query($select_query);
echo(mysql_num_rows($query));
while($result = mysql_fetch_array($query))
{
  print_r($result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:36:52.373

笔记：

```
$search = $_GET['search'];
$query  = mysql_query("SELECT * FROM tags WHERE tag = '$search'"); 
```

这是非常危险的：它允许将 sql 插入代码到您的数据库中。你必须永远逃避你从客户那里得到的一切。

```
$search = mysql_real_escape_string($_GET['search']); //It require open database connection. 
```

注意 2：mysql_query 已过时，请改用 mysqli ;-)

回答：

如果你没有回答，你可能在其他部分有错误。尝试

```
//1) Look if your search has a correct value
var_dump($search);
//2) Replace the query with (just for debugging):
$query  = mysql_query("SELECT * FROM tags WHERE tag = 'cats';"); 
```

如果您想要更灵活的搜索，也可以使用“tag like '%cats%'”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:37:56.680

好的，在参考您所做的上述编辑后，这是解决方案

使用通配符“%”时使用“LIKE”而不是“=”

所以你现在的查询应该是

```
$queryText = "SELECT * FROM tags WHERE tag LIKE '%" . $search . "%'"; 
```

[我在本地系统上创建了完全相同的数据库并运行了您提供的相同代码，在进行上述更改后，它按预期运行]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T10:43:32.140

如果你删除 WHERE 标记 = '$search'，它不能像它应该的那样返回表，因为你的 mysql_fetch_array 不在 while 循环中......但除此之外......

```
// make sure before you execute the code to check that $_GET['search'] is not empty

// start with escaping the search-value (for mysql-injection)
$search = msyql_real_escape_string($_GET['search']);

// changed the query so it searches for tags containing the search value.
// if you would have records with tags "blue cat" and "red cat" it shows them both
// when searching for "cat"
$query  = mysql_query("SELECT * FROM tags WHERE tag LIKE '%".$search."%'");

// put the number of rows in a var
$num = mysql_num_rows($query);

// check this var if it's not 0
if ($num != '0'){
    while ($row = mysql_fetch_array($query){
        echo $row['posts'];
        // etc...
    }
} else {
    // 0 rows found
    echo "nothing found";
} 
```

# if-statement - 检查 在 Windows 命令提示符中的 if 语句中

> ID：14644233
> 
> 赞同：0
> 
> 时间：2013-02-01T10:26:52.940
> 
> 标签：if-statement, for-loop, windows-xp, cmd, carriage-return

根据[我对另一个问题的更正回答](https://stackoverflow.com/a/14642856/1126551)，Windows XP 似乎没有从输出中删除`<cr>`'s 。`for /f`

如何测试`<cr>`输出中是否存在 's？

我目前拥有的是：

```
for /f "tokens=1,2,3* %%a in ('ping -n 1 example.com') do (
   if not "x%%a"=="¶" ( echo %%a ) else ( echo.>null )
) 
```

但无论我做什么：

 2) 分隔符= ¶

 3) 如果不是 "x%%a"==""

 4) 如果不是 "x%%a"==""

 5) 如果不是 "x%%a"==""

...我似乎无法让 if 将 var 中的 var 与上述任何组合相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:18:20.450

使用该`FOR`语句，我确实没有办法始终如一地检查空行。

该`FOR`语句实际上跳过了空白行，这只是回车符，只是一个空白行。

如果它能够检查，您只需要检查一个空字符串。喜欢`if "%%x"=="" echo Yes!`

但是在命令行试试这个：

```
for /f "tokens=*" %x in ('for /?') do @echo %x 
```

然后将其与以下输出进行比较：

```
for /? 
```

你会看到（通常*）`FOR`不包括空行。

*我偶尔**会**看到它发生（通常是在疼痛时），但我从未能够始终如一地重现它。

**编辑后的答案**

# python - alembic：在迁移中使用子查询进行更新语句

> ID：14644238
> 
> 赞同：3
> 
> 时间：2013-02-01T10:27:03.503
> 
> 标签：python, sqlalchemy, database-migration, alembic

我正在使用 alembic 来管理我的数据库迁移。在我当前的迁移中，我还需要根据 SELECT 语句填充一列（基本上是从不同的表中复制一列）。

使用简单的 SQL，我可以做到：

```
UPDATE foo_table
SET bar_id=
    (SELECT bar_table.id FROM bar_table
        WHERE bar_table.foo_id = foo_table.id); 
```

但是无法弄清楚如何用 alembic 做到这一点：

```
execute(
    foo_table.update().\
        values({
            u'bar_id': ???
        })
) 
```

我尝试对'???'使用普通的 SQLAlchemy 表达式：

```
select([bar_table.columns['id']], 
       bar_table.columns[u'foo_id'] == foo_table.columns[u'id']) 
```

但这只会在执行期间产生错误的 SQL 和 ProgrammingError：

```
'UPDATE foo_table SET ' {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:56:20.760

实际上它的工作原理与我上面描述的完全一样。

我的问题是我的alembic脚本中'foo_table'的表定义不包括'bar_id'列，因此SQLALchemy没有使用它来生成SQL ...

# axapta - 从 AX 获取表名的查询耗时过长

> ID：14644239
> 
> 赞同：0
> 
> 时间：2013-02-01T10:27:04.240
> 
> 标签：axapta, x++

我在 X++ 中使用以下代码来获取表名：

```
client server public static container tableNames()
{
tableId         tableId;
int             tablecounter;
Dictionary      dict = new Dictionary();
container       tableNamesList;

for (tablecounter=1; tablecounter<=dict.tableCnt(); tablecounter++)
{
    tableId = dict.tableCnt2Id(tablecounter);
    tableNamesList = conIns(tableNamesList,1,dict.tableName(tableId));
}

return tableNamesList;
} 
```

业务连接器代码：

```
tablesList = (AxaptaContainer)Global.ax.
                CallStaticClassMethod("Code_Generator", "tableNames");

for (int i = 1; i <= tablesList.Count; i++)
{
    tableName = tablesList.get_Item(i).ToString();
    tables.Add(tableName);
} 
```

应用程序在获取数据时挂起 2 到 3 分钟。可能是什么原因？有什么优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:27:00.187

而不是使用ConIns，使用+=，会更快

```
tableNamesList += dict.tableName(tableId); 
```

ConIns 必须确定在容器中放置插件的位置。+= 只是将其添加到末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:55:06.697

如前所述，在将元素附加到容器时避免使用 conIns()，因为它会生成容器的新副本。使用 += 代替追加。

此外，您可能希望检查权限并忽略临时表、表映射和其他特殊情况。标准 Ax 有一种方法来构建表名查找表单，该表单将这些事情考虑在内。检查方法 Global::pickTable() 了解详细信息。

You could avoid some calls through the business connector as well and build the entire list in Ax in a similar way and return that in a single function call.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T21:24:27.330

If you are using Dynamics Ax 2012, you could skip the treeNode stuff and use the SysModelElement table to fetch the data and return it immediately as a .Net Array to easy up things on the other side.

```
public static System.Collections.ArrayList FetchTableNames_ModelElementTables()
{
    SysModelElement                 element;
    SysModelElementType             elementType;
    System.Collections.ArrayList    tableNames = new System.Collections.ArrayList();
    ;  

    // The SysModelElementType table contains the element types 
    // and we need the recId for the next selection
    select firstonly RecId
    from  elementType
    where elementType.Name == 'Table';

    // With the recId of the table element type, 
    // select all of the elements with that type (hence, select all of the tables)
    while select Name
        from element
        where element.ElementType == elementType.RecId
    {
        tableNames.Add(element.Name);
    }

    return tableNames;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:24:18.997

Alright, I have tried a lot of things and in the end, I decided to create a table consisting of all table names. This table will have a Job populating it. I am fetching records from this table.

# javascript - 原型 setAttribute() 不适用于 $$() 选择器

> ID：14644240
> 
> 赞同：4
> 
> 时间：2013-02-01T10:27:06.937
> 
> 标签：javascript, prototypejs

我想更改 div 内的按钮 onclick 功能。HTML代码如下

```
<div class="buttons-set" id="payment-buttons-container">
    <button type="button" class="button" onclick="payment.save()" id="payment_button"></button>
</div> 
```

我正在使用以下原型将 onlick 函数 payment.save() 更改为其他内容。

```
if(payment_method=='gate') {
   var e = $$('div#payment-buttons-container button.button');
   e.setAttribute('onclick','return false;'); // not working
} else {
    var e = $$('div#payment-buttons-container button.button');
    e.setAttribute('onclick','payment.save();'); // not working
} 
```

哪个不起作用并说“未捕获的类型错误：对象 [object HTMLButtonElement] 没有方法'setAttribute'”但是当我通过静态获取按钮的 id 来使用此代码时，它的工作

```
if(payment_method=='gate') {
    $('payment_button').setAttribute('onclick','return false;');// Works
}
else {
    $('payment_button').setAttribute('onclick','payment.save();');// Works
} 
```

其中“payment_button”是我使用的按钮的 ID。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T20:05:49.840

问题是`$$()`返回与 CSS 选择器匹配的元素列表

如果您只想要与选择器匹配的第一个元素，请尝试此操作

```
if(payment_method=='gate') {
   var e = $$('div#payment-buttons-container button.button')[0];
   e.setAttribute('onclick','return false;'); // not working
} else {
   var e = $$('div#payment-buttons-container button.button')[0];
   e.setAttribute('onclick','payment.save();'); // not working
} 
```

如果您想将其应用于 CSS 选择器匹配的所有元素，请使用该`invoke()`方法以这种方式进行

```
if(payment_method=='gate') {
   $$('div#payment-buttons-container button.button').invoke('writeAttribute','onclick','return false;');
} else {
    $$('div#payment-buttons-container button.button').invoke('writeAttribute','onclick','payment.save();'); // not working
} 
```

我使用的原因`writeAttribute()`是`setAttribute()`PrototypeJS`writeAttribute()`方法，并且可以在 PrototypeJS 支持的所有浏览器上工作，`setAttbribute()`是标准方法并不总是可用。

# bash - 启动 xterm 时自动运行 tmux：最优雅/正确的解决方案是什么？

> ID：14644246
> 
> 赞同：1
> 
> 时间：2013-02-01T10:27:39.430
> 
> 标签：bash, shell, terminal, tmux, xterm

我正在尝试以[`tmux`](http://tmux.sourceforge.net/)针对启动的每个终端（，，...）运行`xterm`的`gnome-terminal`方式设置我的工作站。我正在考虑添加`tmux`到`.bashrc`; 问题是，如果我`bash`出于某种原因启动两次，它会`tmux`在当前的`tmux`.

所以：

*   有没有办法检测，也许从`.bashrc`，当前的 bash 是“第一个”而不是在同一个终端中启动的第二个？
*   还有其他好的想法/最佳实践/ bash 设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:49:36.670

您可以将以下内容添加到您的`.bash_profile`：

```
SHELL=tmux 
```

如果在命令行上没有给出任何命令，这是第一个`xterm`检查命令运行的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T16:46:03.873

结合前面的两个答案：

```
alias xterm='SHELL=tmux xterm' 
```

刚开始时您会获得所需的行为`xterm`，但您仍然可以将 xterm 用于其他操作，例如`xterm top`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:33:38.300

别名`xterm`到`xterm tmux`呢？

只需将以下行添加到您的`.bashrc`：

```
alias xterm='xterm tmux' 
```

# python - 如何保存运行 python 程序的状态以便以后恢复？

> ID：14644251
> 
> 赞同：1
> 
> 时间：2013-02-01T10:27:59.183
> 
> 标签：python, linux

我正在开发机器学习分析程序，它必须在 linux 中处理 27GB 的文本文件。虽然我的生产系统不会经常重启，但我需要在我的家用计算机或开发环境中进行测试。

现在我经常停电，所以我几乎无法连续运行 3 周。

我的程序读取文件，应用一些解析，将过滤后的数据保存在字典中的新文件中，然后我将算法应用于这些文件，然后将结果保存在 mysqlDB 中。

我无法找到如何保存算法状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:36:15.293

我关于算法状态的所有内容都保存在一个类中，您可以序列化该类并将其保存到磁盘：[http ://docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-13T14:13:31.967

由于整个算法状态可以保存在一个类中，您可能想要使用`pickle`（如上所述），[但`pickle`它有自己的重载和风险](http://www.benfrederickson.com/dont-pickle-your-data/)。

为了更好的方法来做同样的事情，你可能想看看[这篇文章](https://eev.ee/blog/2015/10/15/dont-use-pickle-use-camel/)，它解释了为什么你应该使用这个`camel`库而不是`pickle`.

# ios6 - iOS5、iOS6从纵向模式到横向模式

> ID：14644253
> 
> 赞同：2
> 
> 时间：2013-02-01T10:28:14.987
> 
> 标签：ios6, xcode4.5, autorotate, landscape-portrait

我只想将我的应用程序中的一个视图转为横向。我所有的其他视图都处于纵向模式。上一个视图处于纵向模式。我将横向视图推到纵向视图。我怎样才能正确地做到这一点？

![这个头像(rootviewcontroller)](../Images/09659be49d2400583aa4b33548ffb4ec.png)

![这风景](../Images/772d0b817922a3297f1091dec4cbca67.png)

在我的横向视图控制器中：

```
//Orientation
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
}
// New Autorotation support
-(BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:32:25.850

您可以在视图控制器中使用它

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

这将确保方向是正确的横向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:45:59.007

要更改设备中的方向，您可以像这样进行 sum thng ..

```
-(void)viewDidLoad
{
    orientation = [[UIDevice currentDevice] orientation];
    if(intOrientation == UIInterfaceOrientationLandscapeRight)
                orientation = UIDeviceOrientationLandscapeRight;

} 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:18:20.923

我已经解决了。谢谢桑。我用[了这个例子：](https://github.com/sunilpandey/DifferentOrientation)

也看到[这个](https://stackoverflow.com/questions/12772749/support-different-orientation-for-only-one-view-ios-6)

或者[这个](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6)

# c# - 如何让 AutoIt 参考在 C# 中工作？

> ID：14644258
> 
> 赞同：2
> 
> 时间：2013-02-01T10:28:31.973
> 
> 标签：c#, com, autoit-c#-wrapper

我正在为这个拔头发...

我有一个几年前使用 AutoItX 构建的遗留应用程序 - 一切正常。

是时候尝试更新应用程序了，所以我已将其升级到 VS2012/.NET4，但我根本无法获得对 AutoItX 库的引用来工作。

我已经安装了应用程序，使用 regsvr32 注册了 dll，尝试了引用本身的属性设置的每种组合（嵌入互操作类型/隔离），但没有任何乐趣。

每当我尝试创建 AutoItX3 对象时，我不断收到的错误是：

> 由于以下错误，检索具有 CLSID {1A671297-FA74-4422-80FA-6C5D8CE4DE04} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

是我在 64 位机器上的问题吗？我不想使用 64 位 DLL 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:46:57.157

好的，解决方案是：

1.  打开 regedit*32 (c:\windows\syswow64\regedit)
2.  在 HKEY_CLASSES_ROOT\AppID 中搜索 AutoItX
3.  我在 HKEY_CLASSES_ROOT\AppID{6E8109C4-F369-415D-AF9A-2AEEFF313234} 中找到它
4.  创建一个名为 DllSurrogate 的空白 REG_SZ（字符串）条目

由于某种原因，这完全解决了这个问题。

参考：[如何在 Windows Server 2008 上使用 32 位 COM 对象（适用于 2008 R2 但非 2008）](https://stackoverflow.com/questions/4043954/how-to-use-a-32-bit-com-object-on-windows-server-2008-works-on-2008-r2-but-non)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:44:28.770

海尼斯，

你使用 x64-Windows 吗？当我开始查看 COM 时，我遇到了同样的问题。如果是这样，您应该尝试在 HKEY_LOCAL_MACHINE\SOFTWARE\WoW6432Node\Classes 中注册您的课程...

试试看！

问候

# c# - 在方法中从 Windows 窗体读取和存储值

> ID：14644265
> 
> 赞同：0
> 
> 时间：2013-02-01T10:28:45.170
> 
> 标签：c#, winforms

我在 VB 中编写了一个程序来计算热交换器的效率，其中温度和其他变量作为用户输入的窗口形式。在 VB 中非常简单，您只需键入：

```
Tcin = Val(Form1.Tempcin.Text);
Thin = Val(Form1.Temphotin.Text); 
```

并且这些值存储在 Tcin 和 Thin 中。

但是我必须将整个代码翻译成 C#，而且我面临很多问题，只是为了从 windows 窗体中的文本框中获取值（所有数字）。我还必须在几种方法中使用它们，而不仅仅是在主要形式中。RadioButtons 和 CheckBoxes 也是如此。

如何调用命名空间中按钮和复选框的变量或“检查状态”以及几种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:30:18.287

在 Form1.cs 类中，您可以调用：

**复选框：**

```
bool checked = this.checkBox1.Checked; 
```

**单选按钮：**

```
bool checked = this.radioButton1.Checked; 
```

**文本框：**

```
string text = this.textBox1.Text; // For text 
```

- 或者 -

```
int number = this.Int32.Parse(textBox1.Text); // For numbers
// If the textbox contains letters, there will be an error thrown (an exception) 
```

相应地更新控件名称。您可能已将文本框命名`myTextBox`为`textBox1`.

本主题与C# 中的*控件有关。*一个按钮、一个文本框、一个复选框、一个单选按钮、一个进度条，甚至是一个表单……这些都是*控件*。如果您想进一步使用 Google，这应该可以帮助您了解术语。

# android - ActivityUnitTestCase 和谷歌地图 Android API v2

> ID：14644269
> 
> 赞同：1
> 
> 时间：2013-02-01T10:29:05.307
> 
> 标签：android, unit-testing, google-maps-android-api-2

`google-play-services_lib`我有一个使用 Google Maps Android API v2 ( )的外部库项目的 Android 项目。

我也有测试项目，它首先测试我的项目形式。

```
package third.task.android.test;

import third.task.android.CompassActivity;
import third.task.android.R;
import android.app.Activity;
import android.content.Intent;
import android.test.ActivityUnitTestCase;

public class CompassActivityTest extends ActivityUnitTestCase<CompassActivity> {

    public CompassActivityTest() {
        super(CompassActivity.class);
    }

    public void testTruth() {
        assertTrue(true);
    }

    public void testPreConditions() {
        startActivity(new Intent(getInstrumentation().getTargetContext(), CompassActivity.class), null, null);
        Activity activity = getActivity();
        assertNull(activity.findViewById(R.id.compasRadar));
    }
} 
```

这是我的失败跟踪，实际上显示了有关加载的错误`class="com.google.android.gms.maps.MapFragment"`

```
android.view.InflateException: Binary XML file line #8: Error inflating class fragment
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)
at android.app.Activity.setContentView(Activity.java:1924)
at third.task.android.CompassActivity.onCreate(CompassActivity.java:55)
at android.app.Activity.performCreate(Activity.java:5206)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
at android.test.ActivityUnitTestCase.startActivity(ActivityUnitTestCase.java:158)
at third.task.android.test.CompassActivityTest.testPreConditions(CompassActivityTest.java:19)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:192)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:177)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1608)
Caused by: java.lang.IllegalStateException: Not on the main thread
at maps.am.r.b(Unknown Source)
at maps.ar.d.b(Unknown Source)
at maps.y.ae.setCompassEnabled(Unknown Source)
at maps.y.ae.a(Unknown Source)
at maps.y.ae.a(Unknown Source)
at maps.y.bu.a(Unknown Source)
at maps.y.p.onCreateView(Unknown Source)
at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
at android.os.Binder.transact(Binder.java:326)
at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
at com.google.android.gms.maps.MapFragment$b.onCreateView(Unknown Source)
at com.google.android.gms.internal.d$4.a(Unknown Source)
at com.google.android.gms.internal.d.a(Unknown Source)
at com.google.android.gms.internal.d.onCreateView(Unknown Source)
at com.google.android.gms.maps.MapFragment.onCreateView(Unknown Source)
at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:807)
at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1013)
at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1112)
at android.app.Activity.onCreateView(Activity.java:4857)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
... 24 more 
```

当我删除负责在布局中显示地图的代码以及与地图相关的代码片段时，一切正常，但我必须使用包括地图在内的全部功能测试我的应用程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:02:19.750

怎么样`ActivityInstrumentationTestCase2`？无需启动activity，即可简单使用`getActivity()`。如果您需要使用自定义启动意图，您可以使用`setActivityIntent(i)`in指定它`setUp()`。我已经测试了它的工作：

```
package com.grt_team.airplanemode.test;

import android.app.Activity;
import android.test.ActivityInstrumentationTestCase2;

import com.grt_team.airplanemode.MainActivity;
import com.grt_team.airplanemode.R;

public class Test extends ActivityInstrumentationTestCase2<MainActivity> {

    public Test() {
        super(MainActivity.class);
    }

    public void testTruth() {
        assertTrue(true);
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        //setActivityIntent(i);
    }

    public void testPreConditions() {
        Activity activity = getActivity();

        assertNotNull(activity);
        assertNull(activity.findViewById(0));
        assertNotNull(activity.findViewById(R.id.map_fragment));
    }

} 
```

# vim - 同一个 vim-server 实例的多个 x-windows

> ID：14644271
> 
> 赞同：2
> 
> 时间：2013-02-01T10:29:14.613
> 
> 标签：vim

我在不同的 vim 窗口中打开了几个不同的项目，这样我就可以在我的两个监视器中的每一个中打开项目，但是我需要打开大量项目并且在这么多 gvim 实例之间导航很尴尬。

我想要一个系统，我可以在同一个 vim 服务器上打开两个 x-windows，共享相同的缓冲区和寄存器等。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:38:27.430

不，这在 Vim 中是不可能的。我认为*Emacs*有这种分离，您可以将多个客户端连接到单个服务器。

我建议为每个项目使用一个 Vim 实例。

# php - 抑制php上的mysql错误

> ID：14644274
> 
> 赞同：2
> 
> 时间：2013-02-01T10:29:18.510
> 
> 标签：php, mysql, error-handling

我知道通常可以使用 error_reporting(0) 或“@”来抑制 php 错误。我在工作的某个部分触发了许多 sql 查询，我想知道添加 error_reporting(0) 是否会抑制由 mysql 查询引起的错误的出现？

我在网上阅读了不同的答案。一些人说它会有所帮助，而另一些人则说它不会那样工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T10:34:13.370

尝试将其放在代码的顶部：

```
ini_set("display_errors", "off"); 
```

是的，`@`在函数等的开头添加，例如：

```
$query = @mysql_query("text.."); 
```

应该抑制错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:11:51.573

如果你有 htaccess 文件，那么你可以通过这个来控制所有的错误。试试[这个](https://stackoverflow.com/questions/1645661/turn-off-warnings-and-errors-on-php-mysql)

# php - php中某个日期范围内每个月的最后一天

> ID：14644282
> 
> 赞同：0
> 
> 时间：2013-02-01T10:29:33.353
> 
> 标签：php

如何在PHP的日期范围内获取每个月的最后一天？

输入：

> $startdate = '2013-01-15'
> $enddate = '2013-03-15'

我想要的输出是：

> **2013-01-31** *1 月结束日期*
> **2013-02-28** *2 月结束日期*
> **2013-03-15** *3 月结束日期为“2013-03-31”，但结束日期为“2013-03-15”。

所以我想要`2013-03-15`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:52:04.227

以后尽量自己写代码。如果您遇到特定部分，您可以请求帮助。这一次例外：

```
<?php

$startdate  = new DateTime('2013-01-15'); 
$enddate    = new DateTime('2013-04-15');

$year = $startdate->format('Y');

$start_month    = (int)$startdate->format('m');
$end_month      = (int)$enddate->format('m');

for ( $i=$start_month; $i<$end_month; $i++) {
    $date = new DateTime($year.'-'.$i);
    echo $date->format('Y-m-t').' End date of '.$date->format('F');
}

echo $enddate->format('Y-m-d'); 
```

将输出：

```
2013-01-31 End date of January
2013-02-28 End date of February
2013-03-31 End date of March
2013-04-15 
```

请注意，如果开始日期和结束日期的年份不同，这将不起作用。我把这个作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:53:09.403

```
function get_months($date1, $date2) {

    $time1 = strtotime($date1);
    $time2 = strtotime($date2);

    $my = date('mY', $time2);
    $months = array(date('Y-m-t', $time1));
    $f = '';

    while($time1 < $time2) {
        $time1 = strtotime((date('Y-m-d', $time1).' +15days'));

        if(date('F', $time1) != $f) {
            $f = date('F', $time1);

            if(date('mY', $time1) != $my && ($time1 < $time2))
                $months[] = date('Y-m-t', $time1);
        }

    }

    $months[] = date('Y-m-d', $time2);
    return $months;
}

$myDates = get_months('2005-01-20', '2005-11-25'); 
```

$myDates 将具有您想要的输出。即使年份不同，它也会起作用。逻辑来自这个[URL](http://www.dbforums.com/php/1617949-months-between-two-dates.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T13:16:47.913

我几乎没有改变功能：

```
function get_months($date1, $date2) {

    $time1 = strtotime($date1);
    $time2 = strtotime($date2);

    $my = date('mY', $time2);

    $f = '';

    while($time1 < $time2) {
        $time1 = strtotime((date('Y-m-d', $time1).' +15days'));

        if(date('F', $time1) != $f) {
            $f = date('F', $time1);

            if(date('mY', $time1) != $my && ($time1 < $time2))
                $months[] = array(date('Y-m-01', $time1),date('Y-m-t', $time1));
        }

    }

    $months[] = array(date('Y-m-01', $time2),date('Y-m-d', $time2));
    return $months;
} 
```

# json - smartGWT ListGrid JSON 问题

> ID：14644283
> 
> 赞同：0
> 
> 时间：2013-02-01T10:29:36.203
> 
> 标签：json, datasource, smartgwt, listgrid

我在 URL: 创建了一个 REST API，并`http://localhost:8888/rest/contacts`带有这个 JSON 输出：

```
{
    "contact": {
        "address": [
            {
                "city":"Shanghai",
                "street":"Long Hua Street"
            },
            {
                "city":"Shanghai",
                "street":"Dong Quan Street"
            }
        ],
        "id": "huangyim",
        "name": "Huang Yi Ming"
   }
} 
```

我只想打印 smartGWT ListGrid 中的 id 值。

```
public class ExampleEntry implements EntryPoint {
    #Override
    public void onModuleLoad() {
        DataSource dataSource = new DataSource();  
        dataSource.setDataFormat(DSDataFormat.JSON);  
        dataSource.setDataURL("http://localhost:8888/rest/contacts");
        dataSource.setRecordXPath("/contact");

        DataSourceTextField field = new DataSourceTextField("id", "id");
        dataSource.addField(field);        

        final ListGrid grid = new ListGrid();  
        grid.setDataSource(dataSource);
        grid.setAutoFetchData(true);  
        grid.draw();
    }
} 
```

但它抛出了以下异常：

```
15:33:12.766 [ERROR] [jerseyexample] 15:33:12.747:XRP2:WARN:RPCManager:xmlHttpRequest.getAllResponseHeaders() returned null
com.smartgwt.client.core.JsObject$SGWT_WARN: 15:33:12.747:XRP2:WARN:RPCManager:xmlHttpRequest.getAllResponseHeaders() returned null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:105)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Unknown Source) 
```

我尝试搜索谷歌以找到修复程序，但没有帮助。如果有人知道此问题的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:24:43.630

您只需要更改数据 url，而不是使用绝对路径使用相对路径。

改变

```
dataSource.setDataURL("http://localhost:8888/rest/contacts"); 
```

至

```
dataSource.setDataURL("rest/contacts"); 
```

当您必须将其部署到远程服务器时，这也是必要的。

我建议您使用[RestDataSource](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/RestDataSource.html)而不是普通的 DataSource，它专为 REST 服务而设计，正如您所说的那样。

使用 RestDataSource 就像使用 DataSource 一样简单。

```
@Override
public void onModuleLoad() {
    RestDataSource dataSource = new RestDataSource();  
    dataSource.setDataFormat(DSDataFormat.JSON);  
    dataSource.setDataURL("rest/contacts");
    dataSource.setRecordXPath("/contact");

    DataSourceTextField field = new DataSourceTextField("id", "id");
    dataSource.addField(field);        

    OperationBinding get=new OperationBinding();
    get.setOperationType(DSOperationType.FETCH);
    dataSource.setOperationBindings(get);

    final ListGrid grid = new ListGrid();  
    grid.setDataSource(dataSource);
    grid.setAutoFetchData(true);  
    grid.draw();
} 
```

您可以将每个 OperationBinding 映射到每个 http 方法（GET、POST PUT、DELETE）或任何适合您的 REST API 的方法。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T17:33:32.970

你可以直接把Xpath放到你要映射**的字段里**

可以直接在 DataSource 上指定 RecordXPath，以获得仅能够“获取”操作的简单**只读DataSource。**

```
field.setRecordXPath("contact") 
```

# c++ - HeapAlloc 簿记

> ID：14644284
> 
> 赞同：2
> 
> 时间：2013-02-01T10:29:36.027
> 
> 标签：c++, windows, memory-management, heap-memory

我读过（[http://www.nobugs.org/developer/win32/debug_crt_heap.html](http://www.nobugs.org/developer/win32/debug_crt_heap.html)），除了请求的内存块之外，HeapAlloc 还为簿记分配了一些内存。bookkeeping info 的大小应为 40 字节（块前 8 字节，块后 32 字节）。

但是，当我用我的 VS2010 运行测试时，实际消耗的内存会明显减少。例如，我将 1M 个整数插入到一个集合中。我为 malloc 编写了一个钩子函数，以确保每次插入都会触发一个单独的动态内存分配请求来构造一个新节点。根据 hook，一个节点占用 20 个字节。如果我们增加 80 字节的开销，一个节点的总内存应该是 100 字节。也就是说，这套设备应该消耗大约 100 兆，而根据 TaskManager，它只需要 32 兆。

因此，我有以下问题：

开销真的是 40 字节吗？开销是否适用于每个 HeapAlloc 的块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:37:38.823

这似乎是一个混乱的问题。我不确定任务管理器是显示物理内存还是虚拟内存。

如果您的分配要交换文件，它们可能不会反映在任务管理器中。您应该尝试更高级的性能监控工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:44:26.070

我相当肯定`malloc`不会为每个分配调用 HeapAlloc，我希望如此。当然，在 glibc 的情况下，仅调用 OS 以提供更大的内存块，并且将其拆分 - 开销小于 OS 分配开销。

您可以通过为一小块内存（例如 20 字节）花时间调用`malloc`与调用一百万次来测试这一点。`HeapAlloc`哪个需要更长的时间？如果 HeapAlloc 更快，那么`HeapAlloc`每次都调用它是合理的`malloc`- 但我希望这`malloc`会快得多。

# ruby-on-rails - 为什么我不能捆绑更新最新的“已发布”rails 3.2.16 gem？

> ID：14644285
> 
> 赞同：0
> 
> 时间：2013-02-01T10:29:41.823
> 
> 标签：ruby-on-rails

在所有安全修复之后更新 Rails 很重要，但是当我尝试它时它说 gem 不存在，即使 rails 博客说它已经发布。

博客说要升级：[http ://weblog.rubyonrails.org/2013/1/28/Rails-3-0-20-and-2-3-16-have-been-released/](http://weblog.rubyonrails.org/2013/1/28/Rails-3-0-20-and-2-3-16-have-been-released/)

但是当我将以下内容添加到 Gemfile 时：

```
gem 'rails', '3.2.16' 
```

当我更新时，我得到：

```
➜ bundle update rails                                                                                                                                                                                   (ruby-1.9.3-p374@usertesting-orders) 
Fetching gem metadata from http://rubygems.org/......
Fetching gem metadata from http://rubygems.org/..
Could not find gem 'rails (= 3.2.16) ruby' in the gems available on this machine. 
```

有小费吗？

更新：没有这样的宝石。它应该是 3.2.11 而不是 3.2.16。.16 适用于 2.3 Rails 而不是 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:35:42.090

尝试`gem 'rails', '3.2.11'`，根据[GitHub 中的 stable 分支](https://github.com/rails/rails/blob/3-2-stable/RAILS_VERSION)。

# javascript - 如何在 google org 聊天中显示任何非 id 列

> ID：14644289
> 
> 赞同：0
> 
> 时间：2013-02-01T10:29:52.890
> 
> 标签：javascript

您好，我是 Google 组织结构图的新手。

我的数据表中有 3 列

```
[node, parent-node, tool-tip] 
```

由于某些原因，我的节点列中的值重复。

因此，我希望将“工具提示”列视为“id”列，将“节点”列视为可查看列。

有可能吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:36:03.580

自己做的。。

[ { v :**工具提示**, f :**节点**},**父节点**]

# php - 为什么 Composer 使用包文件安装 .git 或 .hg 目录？

> ID：14644290
> 
> 赞同：10
> 
> 时间：2013-02-01T10:30:00.183
> 
> 标签：php, composer-php

我正在尝试发布作曲家包。我保存`composer.json`在我的包目录中：

```
{
    "name": "vendor_name/my_bundle",
    "type": "symfony-bundle",
    "autoload": {
        "psr-0": {
            "VendorName\\MyBundle": ""
        }
    },
    "target-dir": "VendorName/MyBundle"
} 
```

但是当我安装它（作曲家更新）时，包文件将添加 .hg 目录。

在这个包中可以看到类似的行为：[https](https://packagist.org/packages/tom32i/file-bundle) ://packagist.org/packages/tom32i/file-bundle （包文件将添加.git目录：http: [//joxi.ru/uploads/prod/20130201/560/ 53a/136c5290b3c0f4c6f6318445f358d1d8cf30fe13.png](http://joxi.ru/uploads/prod/20130201/560/53a/136c5290b3c0f4c6f6318445f358d1d8cf30fe13.png) )

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T14:55:42.213

[从文档中引用](http://getcomposer.org/doc/03-cli.md#install)：

> 下载包有两种方式：source 和 dist。对于稳定版本，composer 默认使用 dist。源是版本控制存储库。

你提到的包没有稳定版本，所以composer从git下载源码。`--prefer-dist`如果您希望 composer 下载包文件，请使用（仅在可能的情况下发生）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-28T04:39:25.947

[Jakub 的回答](https://stackoverflow.com/a/14648973/3467557)很棒，并且完全确定了解决方案......

为了**更永久地**指定`dist`版本，只需在`preferred-install`您的 composer.json 文件中添加一个：

```
{
    "config": {
        "preferred-install": "dist"
    }
} 
```

# sql - SQL Server 查询多对多关系

> ID：14644293
> 
> 赞同：8
> 
> 时间：2013-02-01T10:30:11.687
> 
> 标签：sql, sql-server, many-to-many

我的 SQL 服务器中有以下多对多关系（见下图）。

![多对多关系](../Images/123581d1154149f7e47c5eeb6d57bcf5.png)

在大多数情况下，表 tblWavelengths 中有 2 行与表 tblSensors 相关，（在某些情况下只有 1 行，在极端情况下可能有 20 行）

我进行了以下简单查询以从这 3 个表中检索数据：

```
select W.DateTimeID,S.SensorName,S.SensorType,W.Channel,W.PeakNr,W.Wavelength
from tblWavelengths as W
    Left Join tblSensorWavelengths as SW on W.tblWavelengthID = SW.WavelengthID
    Left Join tblSensors as S on SW.SensorID = S.SensorID
order by W.DateTimeID 
```

运行此查询后，我得到以下结果：

![结果](../Images/3e8e39c118b8261d2d77cd20d38b8360.png)

我的问题来了。我想编写一个查询，仅过滤那些在给定时刻（DateTimeID）在 tblWavelengths 表中有两行（两个不同波长）的传感器（SensorName）。因此，例如，我希望在没有 77902/001 传感器的情况下获得结果 - 因为它在给定时刻只有一行（一个波长）与 tblSensors 相关

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T10:41:42.390

您可以使用窗口函数来找出每个传感器名称/日期时间ID组合的波长数：

```
WITH Data AS
(   SELECT  W.DateTimeID,
            S.SensorName,
            S.SensorType,
            W.Channel,
            W.PeakNr,
            W.Wavelength,
            [Wcount] = COUNT(*) OVER(PARTITION BY s.SensorName, d.DateTimeID)
    from    tblWavelengths as W
            LEFT JOIN tblSensorWavelengths as SW 
                ON W.tblWavelengthID = SW.WavelengthID
            LEFT JOIN tblSensors as S 
                ON SW.SensorID = S.SensorID
)
SELECT  DateTimeID, SensorName, SensorType, Channel, PeakNr, WaveLength
FROM    Data
WHERE   Wcount = 2
ORDER BY DateTimeID; 
```

**附录**

事后想到，我意识到您可能会同时为一个具有相同波长的传感器获得两个结果，这将返回 2 条记录，但没有两个不同的波长。由于窗口函数不支持使用`DISTINCT`下面的替代方法

```
WITH Data AS
(   SELECT  W.DateTimeID,
            S.SensorName,
            S.SensorType,
            W.Channel,
            W.PeakNr,
            W.Wavelength,
            W.tblWaveLengthID
    from    tblWavelengths as W
            LEFT JOIN tblSensorWavelengths as SW 
                ON W.tblWavelengthID = SW.WavelengthID
            LEFT JOIN tblSensors as S 
                ON SW.SensorID = S.SensorID

)
SELECT  d.DateTimeID, d.SensorName, d.SensorType, d.Channel, d.PeakNr, d.WaveLength
FROM    Data d
        INNER JOIN
        (   SELECT  DateTimeID, SensorName
            FROM    Data
            GROUP BY DateTimeID, SensorName
            HAVING  COUNT(DISTINCT tblWaveLengthID) = 2
        ) t
            ON t.DateTimeID = d.DateTimeID
            AND t.SensorName = d.SensorName
ORDER BY d.DateTimeID; 
```

# c# - 用于进程管理的 C# 模式

> ID：14644300
> 
> 赞同：0
> 
> 时间：2013-02-01T10:30:29.783
> 
> 标签：c#, state

我希望这个问题不要太开放，但基本上我需要创建一个可以管理流程的程序。将完成的处理将包含许多需要很长时间才能完成的步骤（生成报告，并通过电子邮件发送等）。

用于管理流程的方法签名如下所示：

```
 int StartProcess(string inputData)
    {
        return Process.Start();
    }

    bool Pause(int processId)
    {
        return false;
    }

    bool ResumeProcess(int processId)
    {
        return false;
    }

    string GetProcessStatus(int processId)
    {
        return "running";
    } 
```

我不能完全理解的部分是我将如何管理进程的状态（多个进程需要 top 能够同时运行）。

最好的方法是将状态信息存储在数据库中，然后在流程中的每个步骤完成时更新状态字段？是否需要数据库表？

是否有任何免费的 3rd 方库可以让我实现这样的东西？我认为这是一个相当普遍的问题。

像 K2 blackpearl 或其他没有花哨用户界面的工作流应用程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:36:30.827

这一切都取决于您的要求。

如果您需要管理长时间运行的进程，或者可以在计算机重新启动后仍然存在的进程，那么显然您需要将进程和状态信息存储在数据库中。

您还需要定义进程暂停时会发生什么。它是立即暂停，还是先完成当前步骤？如果它立即停止，它是否存储它的状态，以便如果它仅在重新启动后恢复，它可以从它停止的地方继续？ETC....

基本上，您可以说每个进程都将在自己的线程上运行，因此您的进程管理器应该管理这些线程，并为进程提供一种统一的方式来存储它们的状态。

总而言之，如果我们不了解您的要求，我们就不能多说。

# locking - Artifactory：避免覆盖已经存在的发布包？

> ID：14644301
> 
> 赞同：5
> 
> 时间：2013-02-01T10:30:30.837
> 
> 标签：locking, package, release, overwrite, artifactory

是否可以避免覆盖（锁定）Artifactory 中现有的发布包？我们已经有备份，但是要恢复属于特定发布版本的所有发布包很复杂。我们希望避免发布替换。

谢谢

# github - Zend Studio 和 GitHub 可以从存储库中拉取但不能推送

> ID：14644315
> 
> 赞同：0
> 
> 时间：2013-02-01T10:30:50.707
> 
> 标签：github, zend-studio

我按照[此](http://www.thomasweidner.com/flatpress/2011/04/03/using-git-with-zend-studio/)页面的指示进行操作。一切似乎都有效。所以简而言之，我做了什么。

在 GitHub 中创建了一个名为“myrepository”的存储库 将存储库成功导入 Zend 框架。在 Zend Studio 中，转到`preferences`-> `general`-> `network connections`-> `ssh2`-> `key management`-> `Generate SSH key`。然后我将密钥复制并粘贴到我在 github 上的帐户中。

如果我在 GitHub 中创建一个文件并返回 Zend Framework 将其拉入，它实际上可以工作。如果我通过在 ZF 中创建一个文件然后尝试推送它来做相反的事情，它不会显示在我的 GitHub 存储库中。想不通为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:00:07.350

我没有意识到我需要先创建一个本地存储库才能使用 EGit 正确设置 ZS。

我按照[EGit 入门页面](http://wiki.eclipse.org/EGit/User_Guide/Getting_Started)上的教程进行操作，然后[使用 GitHub 说明返回 EGit 上的说明](http://wiki.eclipse.org/EGit/User_Guide#GitHub_Tutorial)。这使得 Nils Werner 的评论很有意义，您只需在 GitHub 帐户上选择连接方法并相应地配置 EGit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:35:22.297

好吧，`https`当您尝试设置方法时，这些说明会使用该`ssh`方法...

您要么不需要设置 ssh 密钥，要么需要使用`git@github.com...`URL。

# c# - 如何更新实体框架中的主键值？

> ID：14644317
> 
> 赞同：3
> 
> 时间：2013-02-01T10:30:59.923
> 
> 标签：c#, entity-framework

我有以下字段的表（以及实体数据模型中的实体）`Person`：

```
Name              Type
SocialID          String      
FirstName         String
LastName          String 
```

这`SocialID`是主键。我想更新`SocialID`每条记录的值。但是，当我尝试在实体框架中更新此字段时，出现以下错误：

```
The property 'SocialID' is part of the object's key information and cannot 
be modified. 
```

我得到上述错误的代码是：

```
foreach (var p in Entity.Persons)
{
   p.SocialID= p.SocialID + "00";
   Entity.SaveChanges();
} 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:41:01.750

正如其他人所提到的，你不能在代码中做到这一点。您必须在 SQL 中进行更新。在迁移中或直接在 SQL Server Management Studio 中（或者如果您使用不同的数据库，则等效）。

```
UPDATE Person -- Or 'Persons' if that's what your table is called
SET SocialID = SocialID + '00' 
```

如果您有其他表将此列用作外键，则需要做更多的工作（您必须首先删除约束——在所有引用主键的表上——然后修复数据并重新创建约束）。或者正如 Moe 在评论中所说，您可以将外键设置为更新时级联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:35:26.643

据我所知，主键一旦生成就不能以编程方式更新，这违背了主键的目的。如果您使用新的主键再次插入所有数据并删除旧数据会更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T10:35:35.073

为什么要更改主键？实体框架将使用该字段来识别对象，当它是主键时您不能更改它的值。

根据第一个答案，我建议您将表 Person 更改为拥有自己的主键，假设 PersonID 并将 SocialID 作为 Social 表的外键。如果您需要一个人有多个社交记录，您可能需要创建其他表以将 PersonId 对应到多个 SocialId，从人员表中删除 SocialId。

# ios - iOS：以十进制表示法打印 unicode 字符

> ID：14644318
> 
> 赞同：0
> 
> 时间：2013-02-01T10:31:02.810
> 
> 标签：ios, unicode, char

如何以十进制形式打印带有 1 个字母的字符串？
我需要获取一个字符的唯一整数并将其转换为字符串。

```
NSString* letter = @"a"; // ---> to @"97" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:32:17.163

```
unichar c = [letter characterAtIndex:0];
NSString *charAsNum = [NSString stringWithFormat:@"%d",c]; 
```

# jquery - easySlider 在 IE7 中不起作用

> ID：14644321
> 
> 赞同：1
> 
> 时间：2013-02-01T10:31:08.847
> 
> 标签：jquery, css, jquery-plugins

我尝试在一个站点中使用 easyslider 1.7，我注意到在 IE7 中无法正常工作，它显示所有图像并且滑块不起作用。在所有其他更高版本的 IE 和其他主要浏览器中，一切正常。IE6版本也不考虑。

网址是：

```
http://www.esteticasilvia.it/php/chisiamo.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:35:35.333

这似乎是一个众所周知的错误。你试过这个吗？

[http://clicknathan.com/2011/04/04/easy-slider-1-7-with-internet-explorer-7-bug-fix/](http://clicknathan.com/2011/04/04/easy-slider-1-7-with-internet-explorer-7-bug-fix/)

# iphone - NSString 比较抛出异常 SIGABT

> ID：14644329
> 
> 赞同：0
> 
> 时间：2013-02-01T10:31:46.780
> 
> 标签：iphone, ios, objective-c, nsstring, nsdate

我有以下代码，我正在比较两个字符串，但它抛出异常。

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d {
NSLog(@"calendarMonthView didSelectDate %@",d);
//[self papulateTable];
//[table reloadData];
 //[self performSelector:@selector(papulateTable) withObject:nil afterDelay:1.0];
NSString *tempDate = (NSString*)d;
NSString *selectedDate = @"2013-02-04 00:00:00 +0000";
if([tempDate isEqualToString:selectedDate])
{
  flagtoCheckSelectedCalendarDate = 1;
}
if(flagtoCheckSelectedCalendarDate == 1)
{
    [self viewDidLoad];
}
if(flagtoCheckSelectedCalendarDate == 2)
{
    [self viewDidLoad];
}
//[table reloadData]; 
```

}

任何人都可以请建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:37:42.903

将`NSDate`对象转换为`NSString`不会使其成为字符串。要比较日期，您必须将 转换`NSString`为`NSDate`using `NSDateFormatter`。之后，您可以使用 NSDate 的实例方法`isEqualToDate:`进行比较。

```
NSString *selectedDate = @"2013-02-04 00:00:00 +0000";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
[dateFormatter setDateFormat:@"yyyy-MM-DD hh:mm:ss ZZZZ"];
NSDate *actualDate = [dateFormatter dateFromString:selectedDate];

if ([actualDate isEqualToDate:d]) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:37:11.627

`d`是 type`NSDate`而不是`NSString`，因此`-isEqualToString:`会导致崩溃。
您不应该在这里比较字符串，而是比较日期。使用 NSDate 的`-compare:`方法并改变

```
NSString *selectedDate = @"2013-02-04 00:00:00 +0000"; 
```

到

```
NSDate *selectedDate = [NSDate ...]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:35:29.720

您正在比较`NSDate`和`NSString`。您需要先`NSDate`使用日期格式化程序更改为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:36:49.860

您正在将 NSDate 对象转换为 NSString 而不转换它。您必须将 NSDate 作为字符串格式化为您的预期日期格式，然后才能将其与您的 selectedDate 进行比较。有关示例，请参[见此先前的答案](https://stackoverflow.com/questions/3917250/converting-nsstring-to-nsdate-and-back-again)或[此答案](https://stackoverflow.com/questions/576265/convert-nsdate-to-nsstring)

# flash - 使用 Selenium 的 Automatin Flash 文件上传器

> ID：14644331
> 
> 赞同：2
> 
> 时间：2013-02-01T10:32:00.087
> 
> 标签：flash, button, selenium, webdriver, uploading

在我的测试网页中，我必须上传一个文件，**上传器是基于 flash 的**。我使用 AutoIT 上传文件，但我的问题是我无法单击添加按钮，以便显示上传对话框和 autoIT 可以完成它的工作..

driver.findElement(By.xpath("html/body/div[3]/div[2]/div/div/table/tbody/tr[2]/td/div/form/div/div[6]/div] [1]/div[2]/object")).click();

我得到的错误是找不到元素错误..你们可以帮我如何点击那个闪光按钮。我什至使用过 Firepath、Css，但我不知道该怎么做。请帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-21T14:35:31.800

虽然这个答案与 Selenium 无关，但我认为它可能会帮助其他人寻找这个问题的答案。

我以前遇到过这种情况，虽然不可能使用 Selenium 来“点击”一个 flash 按钮，但点击那个按钮并继续做你需要做的事情并不容易。

网页上的任何 Flash 电影都与任何其他窗口一样，只是不像任何其他元素那样易于访问，但如果您“足够低”，则可以枚举属于该浏览器实例的窗口并找到 Flash 窗口。

所以思路如下：

1.  查找活动的浏览器实例（IE、FF、Chrome 等在本例中为 IE）

    ```
    var ps = Process.GetProcessesByName("iexplore").Select(p => p.Id);
    foreach (var handle in ps.SelectMany(EnumerateProcessWindowHandles))
    {
        GetChildWindows(handle);
        if (_macromediaFound != false){break;}
    } 
    ```

2.  列出它的所有子窗口（使用 Windows API 枚举 WindowsEx）

    ```
    public static List<IntPtr> GetChildWindows(IntPtr parent)
    {
       List<IntPtr> result = new List<IntPtr>();
       GCHandle listHandle = GCHandle.Alloc(result);
       try
       {
           EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
           EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
       }
       finally
       {
           if (listHandle.IsAllocated)
           listHandle.Free();
       }
       return result;
    } 
    ```

3.  找到具有名为 MacromediaFlashPlayerActiveX 的 Window 的窗口（在 IE 中）

每次在步骤 1 列出的每个进程上找到子窗口时，前面的代码都会调用函数（方法）EnumWindow

```
 private static bool EnumWindow(IntPtr handle, IntPtr pointer)
    {
        StringBuilder message = new StringBuilder(1000);
        SendMessage(handle, WmGettext, message.Capacity, message);
        StringBuilder classN = new StringBuilder(1000);
        GetClassName(handle, classN, classN.Capacity);
        if (classN.ToString().Contains("MacromediaFlashPlayerActiveX"))
        { // continues below.... 
```

4.  有了这些信息，您将获得窗口的 XY 位置，并且您需要找到正确的 XY 以单击屏幕上的按钮。

    ```
     Thread.Sleep(2000); // this will allow any needed time to actually draw the flash on screen
        Rectangle rect = new Rectangle();
        GetWindowRect(handle, ref rect);
        var oldPos = Cursor.Position;
        Point clientPoint = new Point(rect.X + 20, rect.Y + 10); // In this particular Flash Movie the Upload File button is 20 points from x and 10 points from Y)
        if (rect.X != 0 && rect.Y != 0)
        {
            Cursor.Position = new Point(clientPoint.X, clientPoint.Y);
        } 
    ```

5.  向这些坐标发送点击事件

    ```
     mouse_event(MouseEventfLeftdown, 0, 0, 0, UIntPtr.Zero);
        mouse_event(MouseEventfLeftup, 0, 0, 0, UIntPtr.Zero);
        Thread.Sleep(2000);
        // Options but "clean" return the mouse to it's original position
        Cursor.Position = oldPos; 
    ```

6.  发送点击后，查找 ClassName #32770 的窗口（至少在 IE 中）

    ```
    hwndTmp = (IntPtr)FindWindow("#32770", "Text of the upload window"); 
    ```

从这里开始，继续该过程应该非常简单。

我知道这不是最干净的解决方案（您需要一个登录用户，并且还有一个屏幕可以从中获取坐标），但我知道有一个事实是，在某些情况下没有其他选择，您需要找到一个解决方案。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:53:22.677

您不能使用 Selenium 自动化 Flash 对象，这超出了 Selenium 可以做的范围*。*

您需要编辑 AutoIT 脚本来为您单击添加按钮，Selenium 将无法为您执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T08:58:06.670

可以使用 FlashSelenium 完成

[https://code.google.com/p/flash-selenium/](https://code.google.com/p/flash-selenium/)

# c# - 从汇编中修剪无法访问的代码

> ID：14644332
> 
> 赞同：0
> 
> 时间：2013-02-01T10:32:03.657
> 
> 标签：c#, .net, .net-assembly, il

> **可能重复：**
> [程序集中的类数量如何影响性能？](https://stackoverflow.com/questions/13418108/how-does-the-number-of-classes-in-an-assembly-impact-performance)

我有一个相当大的 .Net 程序集，其中包含常用控件和组件。这个 VS 项目文件用于几个不同的 VS 解决方案。任何给定的应用程序可能只需要公共程序集中的一小部分代码。有没有办法为每个应用程序自定义构建以排除不需要的代码以减少程序集大小。我看过 ILMerge 但不知道它是否能够合并然后修剪无法访问的 IL？

# java - 将 FormFile 转换为 Java.io.File

> ID：14644333
> 
> 赞同：2
> 
> 时间：2013-02-01T10:32:04.487
> 
> 标签：java, forms, file, struts

我有一个`FormFile`通过 Struts Form 恢复的对象。我必须`Java`在我该`java.io.File` 怎么做？以这种方式进行的强制转换是例外：

```
File myFile = (File) fileFormFile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:36:35.087

在这里，我发现了一些你可能会用到的东西：

[http://www.coderanch.com/t/54902/Struts/Struts-FormFile-java-io-File](http://www.coderanch.com/t/54902/Struts/Struts-FormFile-java-io-File)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:43:57.050

[阅读FromFile](http://struts.apache.org/1.2.4/api/org/apache/struts/upload/FormFile.html)类的 API 文档，它都提供了哪些方法。使用[getInputStream()](http://struts.apache.org/1.2.4/api/org/apache/struts/upload/FormFile.html#getInputStream%28%29)方法。

# css - 良好的老式 ie7 宽度和清晰的问题（过去的爆炸）与演示

> ID：14644335
> 
> 赞同：0
> 
> 时间：2013-02-01T10:32:12.783
> 
> 标签：css, internet-explorer-7

我正在创建一个高度灵活的 sass/grid 框架，我遇到了一些奇怪的 IE7 浏览器问题，我不完全理解它们为什么会发生。

**小提琴在这里：http:** [//jsfiddle.net/adrianjacob/mbvw5/](http://jsfiddle.net/adrianjacob/mbvw5/)

（对大多数人来说，最简单的测试方法是在 IE9/IE10 中使用 IE 开发栏运行 IE7 模式）

**ref 的代码**（和 cos 堆栈溢出不会仅通过小提琴链接发布此 q）：

```
<div id="container1">
    <div class="row clearfix">
        <div class="col1">col1</div>
        <div class="col2">row width == 398</div>
        <div class="col3">col3</div>
    </div>
</div>
<br>
<div id="container2">
    <div class="row clearfix">
        <div class="col1">col1</div>
        <div class="col2">row width == 400</div>
        <div class="col3">col3</div>
    </div>
    <br>
    <div class="row">
        <div class="col1">col1</div>
        <div class="col2">row width == 400</div>
        <div class="col3">col3</div>
        <div class="clear"></div>
    </div>
</div>

#container1 { margin:0 auto; width:398px; }
#container2 { margin:0 auto; width:400px; }
.row { background:red; width:100%; }
.col1 { float:left; width:13%; margin:1%; background:pink; }
.col2 { float:left; width:63%; margin:1%; background:yellow; }
.col3 { float:left; width:18%; margin:1%; background:cyan; }

.clear { clear:both; }
.clearfix { zoom:1; }
.clearfix:before, .clearfix:after { display:table; content:""; }
.clearfix:after { clear:both; } 
```

这里发生了两件非常不同的事情，我希望人们对此发表意见：

1.  为什么新的 micro clearfix 不能工作/显示边距/显示红色背景，就像在小提琴底部发现的旧时尚一样清除两个 div？

2.  为什么当容器为 400 像素时，列很好，但使用 398 像素的容器会向下推第三列并将其换行？

请注意，在 IE8+ 和所有其他优秀的浏览器上，这不是问题。我确定 IE6 也受到影响，但我无法测试。

广告。

# ruby - capistrano 可以用于非 Web 应用程序吗

> ID：14644339
> 
> 赞同：0
> 
> 时间：2013-02-01T10:32:34.060
> 
> 标签：ruby, capistrano

我想将我的非 Web 应用程序部署到服务器。当我通过这个网站“ [http://theme.fm/2011/08/tutorial-deploying-wordpress-with-capistrano-2082/](http://theme.fm/2011/08/tutorial-deploying-wordpress-with-capistrano-2082/) ”时，第一行说 capitrano 用于部署 Web 应用程序。我是否应该继续使用 capistrano 感到困惑..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:11:03.353

Capistrano 是一个远程编排库，基本上它是一个很好的 API，用于在远程服务器上通过 ssh 运行命令。

例如，它可用于在远程服务器上运行配置/设置脚本。有关此示例，请参阅[Rubygems AWS存储库。](https://github.com/rubygems/rubygems-aws)

# ruby - Ruby 中可定制的、可逆的 XML 序列化

> ID：14644341
> 
> 赞同：0
> 
> 时间：2013-02-01T10:32:42.557
> 
> 标签：ruby, xml, serialization, xml-serialization

[Ox](https://github.com/ohler55/ox)和类似的库提供了 ruby​​ 对象到 XML 的序列化，但是是否有任何库允许您定义序列化采用的形式？

本质上，是否有一个类似于 (haml|slim|mustache) 的库，它允许您定义哈希（比如说）到 XML 文档的映射，但它也*可以*解析 XML 文档并生成原始哈希？

（假设哈希的所有元素都已映射）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T12:41:50.127

如果映射不是太奇特，您也许可以使用 可[表示](https://github.com/apotonick/representable)的 。顺便说一句，它还支持 JSON。

# c# - 使用 WCFFacility 为托管服务提供 WS/Rest 端点

> ID：14644342
> 
> 赞同：0
> 
> 时间：2013-02-01T10:32:46.710
> 
> 标签：c#, wcf, castle-windsor, wcffacility

我们正在使用 WCFFacility 从托管 (IIS 7.5) 环境中设置服务。我们需要为每个服务提供两个端点，为 .NET 客户端提供 WSHttp，为其他所有人提供 WebHttp。这可能吗？

我们使用的代码：

```
_container.Register(
    Component
        .For<ISomeService>()
        .ImplementedBy<SomeService>()
        .AsWcfService(new DefaultServiceModel()
        .Hosted()
        .PublishMetadata(mex => mex.EnableHttpGet())
        .AddEndpoints(
            WcfEndpoint.BoundTo(new WSHttpBinding()).At("v1/ws"),
            WcfEndpoint.BoundTo(new WebHttpBinding()).At("v1/rest")
        ))
    ); 
```

进而：

```
RouteTable.Routes.Add(new ServiceRoute("", new DefaultServiceHostFactory(_container.Kernel), typeof(ISomeService))); 
```

我认为我们不能真正混合 ws/web 端点，但这可以通过其他方式实现吗？我们不想回退到 xml 配置，但我们需要配置端点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:03:52.970

经过一整天的挖掘和尝试，我找到了解决方案。除了最终获得帮助/wsdl 页面外，未以任何方式进行测试。所以我暂时搁置这个问题。

```
_container.Register(
    Component
    .For<ISomeService>()
    .ImplementedBy<SomeService>()
    .AsWcfService(new RestServiceModel().Hosted())
    .AsWcfService(new DefaultServiceModel().Hosted()
        .PublishMetadata(mex => mex.EnableHttpGet())
        .AddEndpoints(
            WcfEndpoint.ForContract<ISomeService>().BoundTo(new WSHttpBinding())
        )
    )
);

RouteTable.Routes.Add(new ServiceRoute("v1/rest", new WindsorServiceHostFactory<RestServiceModel>(_container.Kernel), typeof(ISomeService)));
RouteTable.Routes.Add(new ServiceRoute("v1/ws", new WindsorServiceHostFactory<DefaultServiceModel>(_container.Kernel), typeof(ISomeService))); 
```

# java - 带有tomcat的泽西岛给出404错误

> ID：14644350
> 
> 赞同：0
> 
> 时间：2013-02-01T10:33:04.667
> 
> 标签：java, eclipse, tomcat, jersey

我正在使用带有 tomacat 6 和 eclipse Juno 的 Jersey。

我的文件名是 HelloWorldService ：

```
package com.mkyong.rest;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.Response;

@Path("/hello")
public class HelloWorldService {

@GET
@Path("/{param}")
public Response getMsg(@PathParam("param") String msg) {

    String output = "Jersey say : " + msg;

    return Response.status(200).entity(output).build();

  }

} 
```

Web.xml：

```
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee  http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Restful Web Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
                 com.sun.jersey.spi.container.servlet.ServletContainer
            </servlet-class>
    <init-param>
         <param-name>com.sun.jersey.config.property.packages</param-name>
         <param-value>com.mkyong.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

当我使用 Apache 作为服务器运行我的项目时，它会转到这个 url：

```
http://localhost:8080/Test/WEB-INF/classes/com/mkyong/rest/HelloWorldService.java 
```

我收到 404 错误。

我也尝试使用 version="3.0" 但它没有用。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:47:04.120

你应该给你的网址如下；

```
http://localhost:8080/<your-war-name>/rest/hello/<your-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:13:37.880

您的示例的地址是：

```
http://localhost:8080/Test/rest/hello/stranger 
```

这将输出：

```
Jersey say : stranger 
```

PS 我猜你的 WAR 名称是 Test.war，因为你的部署路径是 localhost:8080/Test

# c++ - 将 std::unique_ptr 传递给辅助函数

> ID：14644351
> 
> 赞同：4
> 
> 时间：2013-02-01T10:33:07.600
> 
> 标签：c++, c++11, stl, smart-pointers, unique-ptr

这是正确的方法吗？

```
void helperFunc(MyClass *ptr)
{
    // do something with ptr,
}

unique_ptr<MyClass> p(new MyClass());
helperFunc(p.get()); 
```

还是应该使用 shared_ptr 进行此类操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:01:00.987

除非你想获得内存的所有权（在这种情况下你应该传递 a`shared_ptr`或 a `unique_ptr`），你为什么要使用指针呢？

通过参考。

```
void helperFunc(MyClass& obj)
{
    // do something with ptr,
}

unique_ptr<MyClass> p(new MyClass());
helperFunc(*p); 
```

当您不想获得所有权时使用原始指针通常很好，但在这里没有必要，除非您明确希望允许`nullptr`s （在这种情况下，是的，使用原始指针）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T10:34:36.053

如果 helpFunc 取得所有权，则您传递 std::shared_ptr 或 std::unique_ptr 否则只需通过引用传递：

```
 void helperFunc(MyClass& my_class)
  {
  } 
```

称呼：

```
 helperFunc(*p); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T10:35:50.210

当您使用这些`get()`函数时，您会得到一个原始指针并丢失您使用`unique_ptr`该类首先拥有的分配跟踪。

我会避免使用`get()`, 除非`helperFunc`真的如此微不足道以至于它不拥有指针的所有权，并且可以保证不会泄漏它或在其他状态下留下悬空引用。

如果您真的打算将`unique_ptr`自身传递给函数，请查看：[如何将 unique_ptr 参数传递给构造函数或函数？](https://stackoverflow.com/questions/8114276/how-do-i-pass-a-unique-ptr-argument-to-a-constructor-or-a-function)

# wordpress - 当条件为假时获取 PHP 警告

> ID：14644352
> 
> 赞同：0
> 
> 时间：2013-02-01T10:33:12.717
> 
> 标签：wordpress

我已经使用[WPAlchemy 类](http://www.farinspace.com/wpalchemy-metabox/)创建了自定义元框来为相关帖子添加选项。

以下代码是 WP-Admin 中的工作文件，并且只有当我将相关帖子添加到使用元框创建的自定义表单时才在前端。

但是，如果我将其留空，我会收到以下警告消息

> 警告：第 37 行 /homepages/9/d416241127/htdocs/tw/u2me/wp-content/themes/u2me/single.php 中的非法字符串偏移“主题”

这里第 37 行是`if ($my_meta['topics']) {`

换句话说，当此条件返回 false 时，我会收到警告消息。

* * *

我使用以下代码创建自定义元：

```
<?php while($mb->have_fields_and_multi('topics')): ?>
<?php $mb->the_group_open(); ?>

    <?php $mb->the_field('title'); ?>
    <label>Title</label>
    <p style="margin-top:0px;"><input type="text" name="<?php $mb->the_name(); ?>" value="<?php $mb->the_value(); ?>"/></p>

    <?php $mb->the_field('link'); ?>
    <label>URL</label>
    <p style="margin-top:0px;"><input type="text" name="<?php $mb->the_name(); ?>" value="<?php $mb->the_value(); ?>"/></p>

    <p><a href="#" class="dodelete button">Remove Topic</a></p>

    <br/>

<?php $mb->the_group_close(); ?>
<?php endwhile; ?> 
```

* * *

并在 single.php 中使用以下代码来显示使用上述代码存储的值：

```
<?php
$my_meta = get_post_meta($post->ID,'_related_topics_meta',TRUE);
if ($my_meta['topics']) {
    echo '<ul class="hero-subtitle">';
    foreach ($my_meta['topics'] as $topic) {
 ?>
       <li><a href="<?php echo $topic['link']; ?>"><?php echo $topic['title']; ?></a></li>
  <?php     } 
     echo '</ul>';
  } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:37:08.617

采用

```
if ($my_meta['topics']) { 
```

作为

```
if (!empty($my_meta['topics'])) { 
```

可能这会帮助你

# php - 获取 PDF 文档的页数

> ID：14644353
> 
> 赞同：71
> 
> 时间：2013-02-01T10:33:13.213
> 
> 标签：php, pdf

### *这个问题是为了参考和比较。解决方案是[以下公认的答案](https://stackoverflow.com/a/14644354/1062281)。*

我花了好几个小时寻找一种快速简单但大部分*准确*的方法来获取 PDF 文档中的页数。由于我在一家经常使用 PDF 的图形印刷和复制公司工作，因此在处理文档之前必须准确知道文档的页数。PDF 文档来自许多不同的客户端，因此它们不是使用相同的应用程序生成的和/或不使用相同的压缩方法。

以下是我发现***不足***或根本***不起作用***的一些答案：

## 使用[Imagick](http://php.net/manual/en/book.imagick.php)（一个 PHP 扩展）

Imagick 需要大量安装，apache 需要重新启动，当我终于让它工作时，处理时间非常长（每个文档 2-3 分钟）并且它总是`1`在每个文档中返回页面（还没有看到工作副本到目前为止的Imagick），所以我把它扔掉了。那是使用`getNumberImages()`和`identifyImage()`方法。

## 使用[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/about/)（一个 PHP 库）

FPDI 易于使用和安装（只需提取文件并调用 PHP 脚本），**但**FPDI 不支持许多压缩技术。然后它返回一个错误：

> FPDF 错误：本文档 (test_1.pdf) 可能使用了 FPDI 附带的免费解析器不支持的压缩技术。

## 打开流并使用正则表达式进行搜索：

这将在流中打开 PDF 文件并搜索某种字符串，其中包含页数或类似内容。

```
$f = "test1.pdf";
$stream = fopen($f, "r");
$content = fread ($stream, filesize($f));

if(!$stream || !$content)
    return 0;

$count = 0;
// Regular Expressions found by Googling (all linked to SO answers):
$regex  = "/\/Count\s+(\d+)/";
$regex2 = "/\/Page\W*(\d+)/";
$regex3 = "/\/N\s+(\d+)/";

if(preg_match_all($regex, $content, $matches))
    $count = max($matches);

return $count; 
```

*   `/\/Count\s+(\d+)/`（查找`/Count <number>`）不起作用，因为只有少数文档`/Count`内部有参数，所以大多数时候它不会返回任何内容。[来源。](https://stackoverflow.com/a/2314086/1062281)
*   `/\/Page\W*(\d+)/`（查找`/Page<number>`）没有得到页数，主要包含一些其他数据。[来源。](https://stackoverflow.com/a/1536494/1062281)
*   `/\/N\s+(\d+)/`（查找`/N <number>`）也不起作用，因为文档可以包含多个`/N` ; 大多数（如果不是全部）**不**包含页数。[来源。](https://stackoverflow.com/a/7462664/1062281)

* * *

> ### 那么，什么工作可靠和准确呢？
> 
> [请看下面的答案](https://stackoverflow.com/a/14644354/1062281)

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-02-01T10:33:13.213

## 一个简单的命令行可执行文件名为：*pdfinfo*。

它[可用于 Linux 和 Windows 下载](http://www.foolabs.com/xpdf/download.html)。您下载了一个压缩文件，其中包含几个与 PDF 相关的小程序。在某处提取它。

其中一个文件是**pdfinfo**（或Windows 的**pdfinfo.exe**）。在 PDF 文档上运行它返回的数据示例：

```
Title:          test1.pdf
Author:         John Smith
Creator:        PScript5.dll Version 5.2.2
Producer:       Acrobat Distiller 9.2.0 (Windows)
CreationDate:   01/09/13 19:46:57
ModDate:        01/09/13 19:46:57
Tagged:         yes
Form:           none
Pages:          13    <-- This is what we need
Encrypted:      no
Page size:      2384 x 3370 pts (A0)
File size:      17569259 bytes
Optimized:      yes
PDF version:    1.6 
```

我还没有看到返回错误页数的 PDF 文档（还）。它也非常快，即使是 200+ MB 的大文档，响应时间也只有几秒钟或更短。

有一种从输出中提取 pagecount 的简单方法，在 PHP 中：

```
// Make a function for convenience 
function getPDFPages($document)
{
    $cmd = "/path/to/pdfinfo";           // Linux
    $cmd = "C:\\path\\to\\pdfinfo.exe";  // Windows

    // Parse entire output
    // Surround with double quotes if file name has spaces
    exec("$cmd \"$document\"", $output);

    // Iterate through lines
    $pagecount = 0;
    foreach($output as $op)
    {
        // Extract the number
        if(preg_match("/Pages:\s*(\d+)/i", $op, $matches) === 1)
        {
            $pagecount = intval($matches[1]);
            break;
        }
    }

    return $pagecount;
}

// Use the function
echo getPDFPages("test 1.pdf");  // Output: 13 
```

当然，这个命令行工具可以用在其他可以解析外部程序输出的语言中，但我在 PHP 中使用它。

**我知道它不是纯 PHP**，但外部程序在 PDF 处理*方面*要好得多（如问题所示）。

我希望这可以帮助人们，因为我花了很多时间试图找到解决方案，并且我看到了很多关于 PDF pagecount 的问题，但我没有找到我想要的答案。这就是我提出这个问题并自己回答的原因。

安全注意事项：如果文档名称来自用户输入或文件上传，则使用`escapeshellarg`on 。`$document`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-12-30T15:29:17.180

最简单的是使用**ImageMagick**

这是一个示例代码

```
$image = new Imagick();
$image->pingImage('myPdfFile.pdf');
echo $image->getNumberImages(); 
```

否则你也可以使用`PDF`类似`MPDF`或`TCPDF`for 的库`PHP`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-08-19T19:26:33.530

你可以`qpdf`像下面这样使用。如果文件 file_name.pdf 有 100 页，

```
$ qpdf --show-npages file_name.pdf
100 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-25T05:10:56.153

如果你不能安装任何额外的包，你可以使用这个简单的单行：

```
foundPages=$(strings < $PDF_FILE | sed -n 's|.*Count -\{0,1\}\([0-9]\{1,\}\).*|\1|p' | sort -rn | head -n 1) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-19T02:06:43.793

由于您可以使用命令行实用程序，因此您可以使用 [cpdf](https://github.com/coherentgraphics/cpdflib-binary) (Microsoft Windows/Linux/Mac OS X)。要获取一个 PDF 中的页数：

```
cpdf.exe -pages "my file.pdf" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-06T09:30:52.320

根据理查德的回答@，我为 pdfinfo 创建了一个包装类，以防它对任何人都有用

```
/**
 * Wrapper for pdfinfo program, part of xpdf bundle
 * http://www.xpdfreader.com/about.html
 * 
 * this will put all pdfinfo output into keyed array, then make them accessible via getValue
 */
class PDFInfoWrapper {

    const PDFINFO_CMD = 'pdfinfo';

    /**
     * keyed array to hold all the info
     */
    protected $info = array();

    /**
     * raw output in case we need it
     */
    public $raw = "";

    /**
     * Constructor
     * @param string $filePath - path to file
     */
    public function __construct($filePath) {
        exec(self::PDFINFO_CMD . ' "' . $filePath . '"', $output);

        //loop each line and split into key and value
        foreach($output as $line) {
            $colon = strpos($line, ':');
            if($colon) {
                $key = trim(substr($line, 0, $colon));
                $val = trim(substr($line, $colon + 1));

                //use strtolower to make case insensitive
                $this->info[strtolower($key)] = $val;
            }
        }

        //store the raw output
        $this->raw = implode("\n", $output);

    }

    /**
     * get a value
     * @param string $key - key name, case insensitive
     * @returns string value
     */
    public function getValue($key) {
        return @$this->info[strtolower($key)];
    }

    /**
     * list all the keys
     * @returns array of key names
     */
    public function getAllKeys() {
        return array_keys($this->info);
    }

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-27T13:38:47.820

这是一个使用 PHP 获取 PDF 中页数的简单示例。

```
<?php

function count_pdf_pages($pdfname) {
  $pdftext = file_get_contents($pdfname);
  $num = preg_match_all("/\/Page\W/", $pdftext, $dummy);

  return $num;
}

$pdfname = 'example.pdf'; // Put your PDF path
$pages = count_pdf_pages($pdfname);

echo $pages;

?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-01T21:40:58.943

这似乎工作得很好，不需要特殊的包或解析命令输出。

```
<?php                                                                               

$target_pdf = "multi-page-test.pdf";                                                
$cmd = sprintf("identify %s", $target_pdf);                                         
exec($cmd, $output);                                                                
$pages = count($output); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-22T21:45:42.283

这个简单的 1 班轮似乎做得很好：

`strings $path_to_pdf | grep Kids | grep -o R | wc -l`

PDF 文件中有一个块详细说明了这个时髦字符串中的页数：

`/Kids [3 0 R 4 0 R 5 0 R 6 0 R 7 0 R 8 0 R 9 0 R 10 0 R 11 0 R 12 0 R 13 0 R 14 0 R 15 0 R 16 0 R 17 0 R 18 0 R 19 0 R 20 0 R 21 0 R 22 0 R 23 0 R 24 0 R 25 0 R 26 0 R 27 0 R 28 0 R 29 0 R 30 0 R 31 0 R 32 0 R 33 0 R 34 0 R 35 0 R 36 0 R 37 0 R 38 0 R 39 0 R 40 0 R 41 0 R]`

'R' 字符的数量是页数

[显示字符串输出的终端屏幕截图](https://i.stack.imgur.com/JcLKc.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-10-11T08:17:20.760

您可以使用`mutool`.

```
mutool show FILE.pdf trailer/Root/Pages/Count 
```

`mutool`是[MuPDF](https://mupdf.com/)软件包的一部分。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-13T19:41:54.570

这是一个`R`使用命令报告 PDF 文件页码的函数`pdfinfo`。

```
pdf.file.page.number <- function(fname) {
    a <- pipe(paste("pdfinfo", fname, "| grep Pages | cut -d: -f2"))
    page.number <- as.numeric(readLines(a))
    close(a)
    page.number
}
if (F) {
    pdf.file.page.number("a.pdf")
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-03T00:17:06.233

这是一个使用 gsscript 报告 PDF 文件页码的 Windows 命令脚本

```
@echo off
echo.
rem
rem this file: getlastpagenumber.cmd
rem version 0.1 from commander 2015-11-03
rem need Ghostscript e.g. download and install from http://www.ghostscript.com/download/
rem Install path "C:\prg\ghostscript" for using the script without changes \\ and have less problems with UAC
rem

:vars
  set __gs__="C:\prg\ghostscript\bin\gswin64c.exe"
  set __lastpagenumber__=1
  set __pdffile__="%~1"
  set __pdffilename__="%~n1"
  set __datetime__=%date%%time%
  set __datetime__=%__datetime__:.=%
  set __datetime__=%__datetime__::=%
  set __datetime__=%__datetime__:,=%
  set __datetime__=%__datetime__:/=% 
  set __datetime__=%__datetime__: =% 
  set __tmpfile__="%tmp%\%~n0_%__datetime__%.tmp"

:check
  if %__pdffile__%=="" goto error1
  if not exist %__pdffile__% goto error2
  if not exist %__gs__% goto error3

:main
  %__gs__% -dBATCH -dFirstPage=9999999 -dQUIET -dNODISPLAY -dNOPAUSE  -sstdout=%__tmpfile__%  %__pdffile__%
  FOR /F " tokens=2,3* usebackq delims=:" %%A IN (`findstr /i "number" test.txt`) DO set __lastpagenumber__=%%A 
  set __lastpagenumber__=%__lastpagenumber__: =%
  if exist %__tmpfile__% del %__tmpfile__%

:output
  echo The PDF-File: %__pdffilename__% contains %__lastpagenumber__% pages
  goto end

:error1
  echo no pdf file selected
  echo usage: %~n0 PDFFILE
  goto end

:error2
  echo no pdf file found
  echo usage: %~n0 PDFFILE
  goto end

:error3
  echo.can not find the ghostscript bin file
  echo.   %__gs__%
  echo.please download it from:
  echo.   http://www.ghostscript.com/download/
  echo.and install to "C:\prg\ghostscript"
  goto end

:end
  exit /b 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-18T22:03:31.223

R 包[pdftools](https://cran.r-project.org/web/packages/pdftools/pdftools.pdf)和函数`pdf_info()`提供有关 pdf 中页数的信息。

```
library(pdftools)
pdf_file <- file.path(R.home("doc"), "NEWS.pdf")
info <- pdf_info(pdf_file)
nbpages <- info[2]
nbpages

$pages
[1] 65 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-21T15:57:13.907

如果您可以访问 shell，最简单（但不能在 100% 的 PDF 上使用）的方法是使用`grep`.

这应该只返回页数：

```
grep -m 1 -aoP '(?<=\/N )\d+(?=\/)' file.pdf 
```

示例：[https ://regex101.com/r/BrUTKn/1](https://regex101.com/r/BrUTKn/1)

开关说明：

*   `-m 1`是必要的，因为某些文件可以有多个匹配的正则表达式模式*（志愿者需要用仅匹配的正则表达式解决方案扩展替换它）*
*   `-a`必须将二进制文件视为文本
*   `-o`只显示匹配
*   `-P`使用 Perl 正则表达式

正则表达式解释：

*   开始“分隔符”：`(?<=\/N )`向后看`/N`（nb。此处未显示空格字符）
*   实际结果：`\d+`任意位数
*   结束“分隔符”：`(?=\/)`前瞻`/`

注意事项：如果在某些情况下未找到匹配项，则可以安全地假设仅存在 1 页。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-12-31T09:09:17.097

您经常阅读正则表达式`/\/Page\W/`，但它不适用于我的几个 pdf 文件。所以这是另一个对我有用的正则表达式。

```
$pdf = file_get_contents($path_pdf);
return preg_match_all("/[<|>][\r\n|\r|\n]*\/Type\s*\/Page\W/", $path_pdf, $dummy); 
```

# ireport - 在 Ubuntu 上运行 iReport 4.0.2 时出现“filename.settings 无法锁定，因为它是只读的”错误

> ID：14644356
> 
> 赞同：2
> 
> 时间：2013-02-01T10:33:22.327
> 
> 标签：ireport, jasperserver

我昨天刚刚安装了 iReport，它工作正常。但是当我今天尝试运行它时，它无法正常工作。

这是我所做的；

1.  已下载 iReport-4.0.2

2.  在我的下载文件夹中提取它

3.  尝试通过终端运行

    1.  `adm@linux:~/Downloads/iReport-4.0.2/bin$ sudo ./ireport`

        这会在终端中给出 No protocol specified 错误。

    2.  `adm@linux:~/Downloads/iReport-4.0.2/bin$ ./ireport`

        没有`sudo`，这会在终端中显示许多错误消息并启动 iReport。但再次显示弹出几个错误。我仍然无法创建或编辑报告。

这是错误。如果需要，我可以在终端中发布输出。但它相当冗长。 ![在此处输入图像描述](../Images/911e3c3088bf342a2b2af4e339cb099a.png)

我还尝试将 iReport-4.0.2 移动到该`/opt/`文件夹​​。即便如此，结果也是一样的。我的 JasperServer 也已启动并正在运行。但是当我运行报告时，它会返回以下错误；

```
com.jaspersoft.jasperserver.api.JSException: java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.engine.util.JRStyledTextParser 
```

不知道这两个问题之间是否有任何联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-06T11:46:47.043

您必须在终端中以 root 用户身份登录

$须藤苏

输入密码

之后运行 ireport

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T03:39:09.930

$ sudo chmod 775 -R iReport-4.0.2/

如果不起作用，您应该使用“sudo”打开 iReport

$ sudo ./ireport

问候

优素福菲尔道斯

# django - django 向导，在同一步骤中使用表单和表单集

> ID：14644357
> 
> 赞同：7
> 
> 时间：2013-02-01T10:33:22.950
> 
> 标签：django, django-forms, django-formwizard

我有一个场景，我正试图计划开始编码并且我正在考虑使用`django wizard`.

我的计划是用两个步骤构建一个 django 向导，第一个简单但第二个有点复杂。第二步将包含一个表单，该表单将根据从第一步中选择的值进行重塑，我可以看到自己正在这样做。我已经探索了所有现有的功能，我认为它可以很容易地完成。

不过，我面临的挑战是第二步本身。我有一个表单和一个表单集，表单集是一对多的表单（文章->图像），因此当到达第二步时，用户将能够将一个或多个图像上传到同一篇文章。

我试图在 google 邮件列表和 stackoverflow 上到处搜索以将表单集传递给 django 向导类，但似乎您不能在同一步骤中传递两个表单。

```
NewItemWizard.as_view([
    ('category',    CategorySelectionForm),
    ('article',        ArticleForm)
]) 
```

正如所见，在上面的示例代码中，我希望能够将 ArticleForm 和 ImageFormset 都传递给第二步。有没有办法做到这一点？

根据我正在阅读的内容，我相信使用像 get_context_data 这样的函数可能会有所帮助，但它会非常hacky。

```
def get_context_data(self, form, **kwargs):
    context = super(NewItemWizard, self).get_context_data(form=form, **kwargs)
    if self.steps.current == 'article':
        context.update({
            'image_formset': ImageFormset()
        })
    return context 
```

任何人都可以建议更好的方法吗？

干杯，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:53:59.903

目前还没有直接的 API 可以做到这一点，但是有一个干净的解决方案，就像这里提到的那样：

[https://code.djangoproject.com/ticket/18830](https://code.djangoproject.com/ticket/18830)

# java - 隐藏 JSplitPane 的左/右组件（或不同的布局）

> ID：14644362
> 
> 赞同：2
> 
> 时间：2013-02-01T10:33:44.443
> 
> 标签：java, swing, layout, jsplitpane

目前我写了一个小客户端应用程序。我有一个带有 JTextArea（服务器输出的显示区域）和一个用户列表的窗口。

我的计划是在菜单项上显示/隐藏此用户列表，但我不知道如何。我的想法：

*   使用 BorderLayout：列表没有 JScrollPane。它有效，但我无法更改用户列表的宽度（因为 BorderLayout.WEST 和 BorderLayout.EAST 忽略宽度）

*   对用户列表使用带有 JScrollPane 的 BorderLayout 并显示/隐藏 JScrollPane -> 不起作用，不要问我为什么......无论如何，这种方式不是一个好的解决方案

*   使用 JSplitPane，将调整大小的权重设置为 0.9。当用户列表应该消失时，我最小化正确的组件（也就是用户列表）-> 如何？

我目前的代码：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTextArea;

public class SplitPaneTest extends JFrame implements ActionListener
{
    private JSplitPane splitPane;
    private JTextArea textDisplay;
    private JList<String> listUser;
    private JScrollPane scrollTextDisplay;
    private JScrollPane scrollListUser;
    private JCheckBox itemShowUser;

    public static void main(String[] args)
    {
        new SplitPaneTest();
    }

    public SplitPaneTest()
    {
        setTitle("Chat Client");
        setMinimumSize(new Dimension(800, 500));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        textDisplay = new JTextArea();
        listUser = new JList<>();

        DefaultListModel<String> modelUser = new DefaultListModel<>();
        listUser.setModel(modelUser);

        modelUser.addElement(new String("User 1"));
        modelUser.addElement(new String("User 2"));
        modelUser.addElement(new String("User 3"));

        scrollTextDisplay = new JScrollPane(textDisplay);
        scrollListUser = new JScrollPane(listUser);

        splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        splitPane.setLeftComponent(scrollTextDisplay);
        splitPane.setRightComponent(scrollListUser);
        splitPane.setResizeWeight(0.9);
        setContentPane(splitPane);

        JMenuBar menubar = new JMenuBar();
        JMenu menuWindow = new JMenu("Window");

        itemShowUser = new JCheckBox("Show user list");
        itemShowUser.addActionListener(this);
        itemShowUser.setSelected(true);

        menuWindow.add(itemShowUser);
        menubar.add(menuWindow);
        setJMenuBar(menubar);

        setVisible(true);
    }

    public boolean isUserListEnabled()
    {
        return itemShowUser.isSelected();
    }

    public void setUserListEnabled(boolean status)
    {
        scrollListUser.setVisible(status);
    }

    @Override
    public void actionPerformed(ActionEvent ae)
    {
        if(ae.getSource() == itemShowUser)
        {
            boolean status = isUserListEnabled();
            setUserListEnabled(status);
        }
    }
} 
```

结果是：

![在此处输入图像描述](../Images/2c32f06e4e6dc9016b230ddb351bffd1.png)

并使用隐藏的 JScrollPane 滚动列表用户：

![在此处输入图像描述](../Images/3a5bd0a0c4ad482bf283474e62079e69.png)

有人可以给我小费吗？用户列表仍然可见（我认为 JSplitPane 会重新绘制..）。我来自 Qt（C++），在 Qt 中我可以使用停靠小部件 - 但 Swing 没有一个并使用第三个库....我不知道 - 也许有一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:00:29.013

看起来 splitPane 不能很好地处理不可见的组件 - 一种出路是根据需要添加/删除 scrollPane：

```
public void setUserListEnabled(boolean status)
{
    splitPane.setRightComponent(status ? scrollListUser : null);
    splitPane.revalidate();
} 
```

# javascript - 在 openerp 版本 7 POS 前端视图中添加客户搜索

> ID：14644370
> 
> 赞同：2
> 
> 时间：2013-02-01T10:34:28.860
> 
> 标签：javascript, jquery, python, openerp

我想在 POS 中单击按钮时显示 openerp 合作伙伴搜索弹出窗口。我将按钮放入`pos.xml`如下所示

```
<div id="rightheader">
    <div id="order-selector">
        <button class="neworder-button">+</button>
        <ol id="orders"></ol>
    </div>
    <!-- here goes header buttons -->
    <button class="order-selector-button">Select Customer</button>
</div> 
```

我开始知道我需要为此编写一个 JS 代码，但我不知道如何从 JS 调用 res_partner 搜索视图？我想要实现的内容显示在附图中 ![在此处输入图像描述](../Images/361d982c972f9994988725f749f5ec6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T19:20:44.560

搜索此模块：
lp:~mmakonnen/openobject-addons/point_of_sale_enhanced-70

它对 POS 模块进行了多项增强，例如键盘和您正在寻找的模块：POS 中的客户搜索。

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:22:45.570

您应该遵循本教程：[http](http://thierry-godin.developpez.com/openerp/tutorial-module-creation-pos-modification-english-version/) ://thierry-godin.developpez.com/openerp/tutorial-module-creation-pos-modification-english-version/ 希望这能解决您的问题。

# static-members - 在中间添加新的静态成员会破坏 C++ 库的二进制兼容性吗？

> ID：14644371
> 
> 赞同：1
> 
> 时间：2013-02-01T10:34:32.313
> 
> 标签：static-members, binary-compatibility

我有一个有很多静态成员的类，但是我在头文件的中间添加了新函数。

这会破坏二进制兼容性吗？客户端需要重新编译吗？

**编辑（1）**：类只有静态函数，没有其他函数和数据成员

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:30:35.043

你的类没有*虚函数*，所以你的新中间函数不会改变*v-table*。类中的其他静态成员（函数和全局变量/数据）在 Linux、Unix 或 Mac 上由适当的*符号名称*调用，并且您的更改是向后兼容的。

但这是 Windows 上的一个重大更改，因为所有函数都由*序号*而不是名称调用（除非您使用*def*文件为函数定义自定义序号）。

尝试使用[abi-cc](http://lvc.github.io/abi-compliance-checker/)工具来自动检查库的向后二进制兼容性。

# java - org/eclipse/jdt/internal/compiler 包是干什么用的？

> ID：14644373
> 
> 赞同：1
> 
> 时间：2013-02-01T10:34:39.563
> 
> 标签：java, eclipse, compiler-construction, eclipse-jdt

我正在分析一个基于 Java 的 Web 应用程序（来自 OWASP 的 InsecureWebApp），并遇到了来自 org/eclipse/jdt/internal/compiler 包的方法。我用谷歌搜索知道它们的用途。我看了这里（[http://www.cs.utep.edu/cheon/download/jml4c/javadocs/org/eclipse/jdt/internal/compiler/package-summary .html](http://www.cs.utep.edu/cheon/download/jml4c/javadocs/org/eclipse/jdt/internal/compiler/package-summary.html) ) 但不明白它的一般用途是什么。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:43:36.617

我猜那是 Eclipse Java 编译器。

Eclipse 不使用标准编译器，但有自己的编译器在键入时增量编译您的代码。

# ios - 从 UITableView 删除行的问题

> ID：14644374
> 
> 赞同：0
> 
> 时间：2013-02-01T10:34:46.447
> 
> 标签：ios, objective-c, uitableview

我有一个 UITableView，它显示了用户保存的 pdf 文件列表（来自 Documents 文件夹）。

当我尝试删除表中唯一的行时，它工作正常。

但是当行多于一时，我尝试删除第三行，例如，我得到..

`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\. The number of rows contained in an existing section after the update (2) must be equal to the number of rows contained in that section before the update (2), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).'`

现在，我尝试检查我的数组计数是否 > 0，在这种情况下，我删除了行，否则删除了 indexSet，但没有任何运气。

这是我正在使用的代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [tableView beginUpdates];

        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        NSError *error;
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectory
                               stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",[self.pdfArray objectAtIndex:indexPath.row]]];
        if ([fileMgr removeItemAtPath:filePath error:&error] != YES)
        {   UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:NSLocalizedString(@"UnableToDeleteFile", @"Unable to delete file: %@"),[error localizedDescription]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] autorelease];
            [alert show];
        }
        [self.pdfArray removeObjectAtIndex:indexPath.row];

        [self refreshTable];

        [tableView endUpdates];

    }
    [self.tableView reloadData];
} 
```

其中 [self refreshTable] 显示带有标签的视图，表明没有保存 PDF：

```
- (void) refreshTable {
    [self fillArray];
    [self.tableView reloadData];

    if (self.pdfArray.count == 0)
    {
        [UIView animateWithDuration:1.0f animations:^{
            noPDF.view.alpha = 1;
        }];
        self.navigationItem.rightBarButtonItem = nil;
        self.tableView.userInteractionEnabled = NO;
    }
    else
    {
        noPDF.view.alpha = 0;
        self.navigationItem.rightBarButtonItem = self.editButtonItem;
        self.tableView.userInteractionEnabled = YES;
    }

} 
```

现在，我实际上无法解决这个问题，所以，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:40:37.133

这里的问题是您应该在调用 deleteRowsAtIndexPaths: 之前从 pdfArray 中删除对象。所以添加这个::

```
[self.pdfArray removeObjectAtIndex:indexPath.row]; 
```

在调用 deleteRowsAtIndexPaths 之前，因为 deleteRowsAtIndexPaths 会从 tableView 中删除一行并且根本不会修改您的模型。你必须自己做。单元格被删除，但如果您在从模型中删除行之前调用 reloadData。单元格将重新出现。所以它希望你更新你的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:46:16.787

哇，完美的时机。在我写完这个答案后不久，我对方法进行了一些调整`[self refreshTable]`，将 [self fillArray] 方法移动到`viewDidLoad`[self refreshTable] 到`viewDidAppear` 所以现在我有了

```
-(void)viewDidLoad{
    [self fillArray];
}

-(void)viewDidAppear:(BOOL)animated{
   [self refreshTable]; 
```

}

并且行删除工作完美。

不过，谢谢你的时间。

# javascript - Sencha Touch - 视图内的调用函数不会被调用

> ID：14644380
> 
> 赞同：1
> 
> 时间：2013-02-01T10:35:05.460
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我刚刚开始探索煎茶。坚持这一点。帮助赞赏:)

这是我的 java 脚本代码，在下面的行处理程序函数中，我正在调用以下方法，该方法位于 items 和 parent xtype form-panel 下。

```
 {
     xtype:'panel',
     defaults:{
        xtype:'button',
        style:'margin: 0.1em',
        flex:1
     },
     layout:{
        type:'hbox',
        align:'center'
     },
     items:[
        {
           text:'Submit',
           handler:this.makeReq,
           scope:this
        },
        {
           text:'Terms & Conditions',

        }
     ]
  } 
```

这是在上述函数中调用的方法，但似乎没有发生任何事情。

```
makeReq: function() {
    alert("Hey There");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:36:58.833

在这种情况下，我真的建议您遵循 Sencha Touch 2 MVC 模型。你可以给你的按钮一个这样的动作：

```
{
    text:'Submit',
    action: 'submit'
} 
```

然后您可以参考此按钮并在应用程序的控制器中为其设置功能：

```
config: {
    refs: {
        submitButton: 'button[action=submit]',
    },

    control: {
        submitButton: {
            tap: 'makeReq'
        },
    },

    makeReq: function() {
        alert("Hey There");
    }
} 
```

# javascript - 在javascript中拆分字符串的有效方法

> ID：14644382
> 
> 赞同：0
> 
> 时间：2013-02-01T10:35:10.280
> 
> 标签：javascript, regex, split

> **可能重复：**
> [用于解析 CSV 数据的 Javascript 代码](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)
> [Javascript：用逗号分割字符串但忽略引号中的逗号](https://stackoverflow.com/questions/10617400/javascript-splitting-a-string-by-comma-but-ignoring-commas-in-quotes)

我有一个逗号分隔的字符串，如下所示：

```
car,jeep,,"ute,van",suv,truck 
```

我需要拆分它并将其添加到数组中，如下所示：

```
car
jeep

ute,van
suv 
truck 
```

我目前首先用 " 拆分字符串，然后在具有 的部分中用其他字符替换 ，仅在中间但不在两端。

我还检查了拆分数组的长度是否大于 1，因为如果我得到根本没有 " 的字符串，我想跳过替换 , 部分。

然后最后我使用 "" 加入数组以获得最终结果。

有人可以建议使用正则表达式的任何更好的方法和有效的方法吗？

# android - 获取 ListView 中的 EditText 内容

> ID：14644383
> 
> 赞同：-3
> 
> 时间：2013-02-01T10:35:12.013
> 
> 标签：android, android-listview, baseadapter

我正在使用 BaseAdapter 显示一个自定义 ListView。它有一个原始的 EditText 和 Button。像这样 ：![在此处输入图像描述](../Images/026d7faba01c0e2b988311ec768b32b7.png)

现在我想在单击第一个按钮时获取第一个 EditText 的文本，单击第二个按钮时获取第二个 EditText 的文本，依此类推。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:38:24.563

你需要实施 `onListItemClick`. onListItemClick 在您单击`ListView`. 此回调的第二个参数是一个`View`实例 - 在 ListView 中单击的视图。您可以使用它来查找您的`EditText`（通过 view.findViewById）并调用`getText()`返回的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:41:50.113

适配器必须实现 onClickListener-

```
public class YOURADAPTER extends ArrayAdapter<String> implements OnClickListener 
```

然后在**getView**方法中设置你**的点击监听器**

# sql - 如何将 Sql 数据库值获取到 MVC Razor 组合框

> ID：14644387
> 
> 赞同：2
> 
> 时间：2013-02-01T10:35:18.627
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-3, sql-server-2008, c#-4.0

我是 .net MVC3 Razor 的初学者。我有一些关于将 Sql 数据库表字段中的值检索到 MVC Razor 模型页面的查询。现在考虑我在我的应用程序中使用一个组合框，因为我想将确切的表字段值获取到我在数据库中创建的组合框。

例如：

我`Employee`在我的数据库中使用表。现在我需要`Employees`从数据库中的表中获取名称，并且需要`Employees`在我在模型页面中创建的组合框或列表框中显示名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:57:26.760

```
 public List<gridview>  getrecord(gridview record)
    {

        List<gridview> gridview1 = new List<gridview>();
        using (SqlConnection conn = new SqlConnection(@"Data Source=AGIDNET114\sqlexpress;Initial Catalog=Telerik;User ID=sa;Password=agiline123"))
        {
            SqlCommand cmd = new SqlCommand("getdemotable", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            conn.Open();

            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds);
            conn.Close();
                for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                {
                    var model = new gridview();
                    model.Address = ds.Tables[0].Rows[i]["Address"].ToString();
                    model.Name = ds.Tables[0].Rows[i]["Name"].ToString();
                    model.PhoneNo = ds.Tables[0].Rows[i]["PhoneNo"].ToString();
                    model.Id = ds.Tables[0].Rows[i]["Id"].ToString();
                    gridview1.Add(model);
                }
            }
         return gridview1;

        } 
```

使用您可以执行的列表在模型类中遵循这段代码，然后为您的视图添加代码

```
 public ActionResult getdata(gridview data)
    {
        var x = data.getrecord(data);
        return View(x);
    } 
```

# jenkins - 詹金斯项目在图中的坐标轴实验室是模糊的

> ID：14644392
> 
> 赞同：0
> 
> 时间：2013-02-01T10:35:26.660
> 
> 标签：jenkins, jenkins-plugins

![在此处输入图像描述](../Images/9b7e66b325a853dd30d63bbb24103d12.png)

![在此处输入图像描述](../Images/2b2051fac0243895bc0bc12ea7e2366f.png)

几天前我刚开始在我的项目中使用jenkins，我刚刚发现项目主页中的图表轴都模糊了（所有其他图表，包括findbugs和checkstyle警告）。

当我只有两个或三个构建时没关系，那么在 jenkins 或任何其他相关库中为图形渲染字符是否存在问题？

我能做什么？

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:04:32.713

请参阅[这篇](https://stackoverflow.com/questions/5653888/jenkins-formerly-hudson-plot-plugin-illegible-font)文章，这可能会更多地解释您的问题。简短的回答是您可能在服务器端缺少一些字体。

[这](https://stackoverflow.com/questions/11762928/jfreechart-strange-rendering-headless-redhat)是另一个要查看的线程。

# php - MySQL 会返回 API 的最新信息吗？

> ID：14644393
> 
> 赞同：1
> 
> 时间：2013-02-01T10:35:26.250
> 
> 标签：php, mysql, api

我正在为使用 PHP 和 MySQL 创建的网站构建 API。该 API 将主要用于移动应用程序。该应用程序将向 API 端点发送一个请求，该端点将回复一个响应，以便移动设备可以解析它。

用户可以通过网站/手机登录他们的帐户并执行一些操作，例如发布优惠、删除优惠、更新优惠和浏览其他用户的优惠。

现在我想知道，如果事情同时运行，数据库是否能够将最新的数据/信息返回给 API 请求？我遇到了`MySQL push`但不明白这是否解决了我的问题。

我很迷茫，所以请放轻松我的问题。也许我的问题质量低于平均水平，由于我的知识有限，它提出了这个问题。

# shell - 安装jitterbit客户端安装时出错

> ID：14644400
> 
> 赞同：0
> 
> 时间：2013-02-01T10:35:38.687
> 
> 标签：shell, ubuntu

我必须安装jitterbit客户端。我已经下载了jitterbit-client-4.0.7.14-enterprise-trial-linux-rpm。II试过了。

```
sudo rpm -Uvh jitterbit-client-4.0.7-14.e.i386.rpm 
```

它给：

```
 rpm: RPM should not be used directly install RPM packages, use Alien instead!
  rpm: However assuming you know what you are doing...
  error: Failed dependencies:
  /bin/sh is needed by jitterbit-client-4.0.7-14.e.i386 
```

我也安装了 32 位 java 版本。我试图将它转换为 .deb 也使用外星人但它没有转换。那么解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:17:00.860

这不是在 Ubuntu 中安装它的正确方法。Ubuntu 数据包管理器是`apt-get`并使用这些`deb`包，而不是`rpm`像其他发行版。

因此，如果您没有`deb`软件包，`jitterbit-client`则应手动安装。首先安装`Alien`：

```
sudo apt-get install alien rpm debhelper fakeroot binutils 
```

然后按照这些[说明](http://www.tonybibbs.com/2008/05/Jitterbit-Client-On-Kubuntu/)进行操作，这些说明适用于旧版本，但也适用于您。

# ruby-on-rails - 如何在生产环境中运行db迁移脚本

> ID：14644409
> 
> 赞同：1
> 
> 时间：2013-02-01T10:36:03.750
> 
> 标签：ruby-on-rails

我使用`RAILS_ENV=production`and `rake db:migrate`，有没有办法将参数作为命令行参数传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:40:31.437

试试这个，

```
 rake db:migrate:status RAILS_ENV=production    # Display status of migrations

rake db:migrate:redo VERSION=my_version
Or you can go up or down from a specific version:

db:migrate:up VERSION=my_version
db:migrate:down VERSION=my_version 
```

这只是示例，您需要说明您需要传递哪种类型的参数。

# javascript - OnclientClick 执行，然后 Page 是 Postback

> ID：14644422
> 
> 赞同：2
> 
> 时间：2013-02-01T10:36:44.257
> 
> 标签：javascript

我正在使用用户控件中的 RadButton...

```
<telerik:RadButton ID="tbnCancel"
                   runat="server"
                   Text="Cancel"
                   OnClientClicked="CloseEditFormTodoList" >
</telerik:RadButton> 
```

我正在调用 javascript 函数来关闭用户控制

```
function CloseEditFormTodoList(sender, eventArgs) {

    var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
    masterTable.cancelAll();
    return false;
} 
```

我的用户控件已关闭，但页面已回发。

如何避免回发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:43:00.987

订阅`OnClientClicking`事件而不是`OnClientClicked`调用 args 参数的 set_Cancel 方法：

```
function CloseEditFormTodoList(sender, eventArgs) {

    var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
    masterTable.cancelAll();
    eventArgs.set_cancel(true);
} 
```

检查此文档：[OnClientClicking](http://www.telerik.com/help/aspnet-ajax/button-onclientclicking.html)

# ravendb - 如何让 RavenDB 将定期备份保存到 Amazon Glacier？

> ID：14644426
> 
> 赞同：0
> 
> 时间：2013-02-01T10:37:11.387
> 
> 标签：ravendb, amazon-glacier

我想使用 RavenDB 的定期备份功能。具体来说，我想保存到我的 Amazon Glacier 保险库。

我当前的设置如下所示。Raven 未记录任何警报或异常，但保管库中未出现任何文件。我已经等了 24 小时，以防需要一段时间才能出现。

**亚马逊设置** ![在此处输入图像描述](../Images/205e1706657ee2dc14cd1e099b7ab764.png)

**RavenDB 设置** ![在此处输入图像描述](../Images/f315343275dfee7b413645897c3957f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:30:58.967

工作室的 2.0 版本中存在一个错误，无法正确设置定期备份。这将在下一个版本中解决，预计本周。

# android - 如何在没有选择器的情况下打开 android 原生图库应用来选择图像

> ID：14644433
> 
> 赞同：1
> 
> 时间：2013-02-01T10:37:30.563
> 
> 标签：android, gallery, default, native

我想通过设备“图库”的默认（本机应用程序）应用程序从 SD 卡中选择图像，而不显示进一步的选择器选项来选择第三方应用程序。

目前做同样的事情，我正在实现下面的代码

```
 Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(intent, requestCode); 
```

但是，使用这个会弹出一个屏幕说**“使用完成操作”**（选择器）。如果安装在设备上（例如文件资源管理器），可以选择第三方应用程序。

我的问题是，如何直接打开本机图库而不给用户任何选项来选择他们可以选择图像的应用程序。

打开本机画廊的类名是什么？

# javascript - 将 ASP.NET 客户端脚本连接到实例

> ID：14644434
> 
> 赞同：0
> 
> 时间：2013-02-01T10:37:30.300
> 
> 标签：javascript, asp.net

考虑这个简化的例子：

服务器端 ASP.NET 代码：

```
TextBox theTextBox = ...
theTextBox.Attributes.Add("onchange", "HandleOnChangeEvent"); 
```

客户端javascript：

```
var numberOfChanges;

function HandleOnChangeEvent() {
   numberOfChanges++;
   alert(numberOfChanges);
} 
```

现在，这是可行的，即每次用户更改文本框中的值时，都会弹出一个对话框，显示自页面加载以来文本框中的值更改的次数。

但是，如果同一页面上有多个 texbox 实例怎么办？numberOfChanges 是全局的，因此它将跟踪页面上所有文本框的更改总数。对于每个单独的文本框，我希望它是特定于实例的。

解决此问题的首选方法是什么？不知道这是否重要，但我应该提一下，我的真实场景要复杂得多，状态变量比本例中的一个要多。

谢谢！/弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:03:19.917

利用 JavaScript 的原型特性并在使用时扩展文本框，如下所示：

```
function HandleOnChangeEvent(e) {

    // `e` contains the DOM element that was clicked
    if( !e.numberOfChanges ) e.numberOfChanges = 0; // dynamically set the property
    e.numberOfChanges++;
    alert( e.numberOfChanges );
} 
```

您需要将`onchange`属性更改为：

```
onchange="HandleOnChangeEvent(this);" 
```

# c# - 对象引用未设置为对象的实例，从 web 控件返回的错误消息

> ID：14644437
> 
> 赞同：0
> 
> 时间：2013-02-01T10:37:37.007
> 
> 标签：c#, asp.net

请有人给我一个解释。我有一个显示表格和分页的网络表单。表格和分页由 Web 表单中包含的 Web 控制器执行。当我将项目从 Web 表单传递到 Web 控件时，一切都很好，但是当我修改 Web 控件中的值并尝试将它们绑定到转发器时，我得到了错误。

我已经初始化并且传递的值不为空，我从调试中知道。

```
public class Table : System.Web.UI.UserControl, IPageableControl
{
    // PagedDataSource encapsulates the properties needed to enable paging for the control
    PagedDataSource page = new PagedDataSource();

    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            object o = Object;
            Session["o"] = o;
        }
    }

    public object Target
    {
        get { return m_ItemsRepeater.DataSource; }
        set
        {
            if (value == null)
                return;

            // display the table of items
            m_ItemsRepeater.DataSource = value;  // here I get the error after clicking
            m_ItemsRepeater.DataBind();
        }
    }

    // when I click on next or prev another controller is called which passes a value to Page
    public void Page(int i)
    {

        // if i == 1 go to next page if -1 to prev page
        if (i == 1)
            CurrentPage += CurrentPage;
        else
        {
            CurrentPage -= CurrentPage;                
        }

        SetPage();
    }

    public void SetPage()
    {
        object oo = (object)System.Web.HttpContext.Current.Session["o"];

        List<USER> u = (List<USER>)oo;

        // number of items per page
        int iPageSize = 5;
        // total items (=> total number of items)
        int total_number_items = u.Count;

        // current page ranges from 0 to max_number_pages-1
        int iTotalPages = (int)Math.Ceiling(((double)total_number_items) / iPageSize);

        // Indicate that the data should be paged              
        page.AllowPaging = true;
        // Set the number of items you wish to display per page
        page.PageSize = iPageSize;

        // number of already displayed items
        int index = CurrentPage * iPageSize;

        // select items to display in the current page. Check if out of range
        if (index + iPageSize < total_number_items)
            page.DataSource = u.GetRange(index, iPageSize).ToList();
        else
            page.DataSource = u.GetRange(index, total_number_items - index).ToList();

        // display items in the pages
        Target = page;

    }

    object s;
    public object Object
    {
        get { return s; }
        set { s = value; }
    }

    public int CurrentPage
    {
        get
        {
            object obj = this.ViewState["CurrentPage"];

            if (obj == null)
            {
                return 0;
            }
            else
            {
                return (int)obj;
            }
        }
        set
        {
            this.ViewState["CurrentPage"] = value;
        }
    }

}

// Web form

public class Items
{
    PagedDataSource page = new PagedDataSource();
    // number of items per page
    int iPageSize = 5;
    int total_number_items;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            // Load the items
            LoadItems();
        }
        else
        {
            // load session using paging from webcontrol
            List<USER> items = db.Get();
            m_Table.Object = items;
        }
    }

    /// <summary>
    /// Load items and display in table.
    /// </summary>
    private void LoadItems()
    {
        // get list items
        List<USER> items = db.Get();

        DataBind(items, CurrentPage);
    }

    /// <summary>
    /// Enable paging.
    /// </summary>
    private void DataBind(List<USER> items, int current_page)
    {
        // Indicate that the data should be paged
        page.AllowPaging = true;
        // Set the number of items you wish to display per page
        page.PageSize = iPageSize;

        // number of total pages
        int iTotalPages = ((items.Count + iPageSize - 1) / iPageSize);
        // number of already displayed items
        int index = CurrentPage * iPageSize;

        // select items to display in the current page. Check if out of range
        if (index + iPageSize < items.Count)
            page.DataSource = items.GetRange(index, iPageSize).ToList();
        else
            page.DataSource = items.GetRange(index, items.Count - index).ToList();

        // display items in the pages
        m_Table.Target = page;

    }

    // Called when cursor Previous is clicked.
    protected void lnkPrevious_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the previous page
        CurrentPage -= 1;
        LoadSupporters();
    }

    // Called when cursor Next is clicked.
    protected void lnkNext_Click(object sender, EventArgs e)
    {
        // Set viewstate variable to the next page
        CurrentPage += 1;
        LoadSupporters();
    }
    public int CurrentPage
    {
        get
        {
            object obj = this.ViewState["CurrentPage"];

            if (obj == null)
            {
                return 0;
            }
            else
            {
                return (int)obj;
            }
        }
        set
        {
            this.ViewState["CurrentPage"] = value;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:45:57.083

检查这`object s`没有分配并像这样改变

```
object s;
public object Object
{
    get { return s == null ? new object() : s; }
    set { s = value; }
} 
```

# excel - 名称与 _FilterDatabase 冲突

> ID：14644441
> 
> 赞同：2
> 
> 时间：2013-02-01T10:37:50.017
> 
> 标签：excel, powershell, autofilter

在我尝试在同一个文件上第二次运行我的 Powershell 脚本后，我得到一个“名称冲突”对话框。我知道这个错误与我自动过滤文件有关。如果我从不使用 autofiter，则不会显示对话框。我究竟做错了什么？这是代码：

```
$excel = new-object -comobject excel.application
$excel.DisplayAlerts = $false

$workbook = $excel.Workbooks.open("testtabelle1.xlsx")
Trap {"Worksheet problems..."} $workbook.Worksheets.Item(1) | Out-Null

$from = ">0"
$to = "<2"

$workbook.ActiveSheet.Range("D:D").AutoFilter(1, $from, 1, $to) > $null

#Reset Selection and close file
#$workbook.ActiveSheet.Range("A1").Select() | Out-Null
$workbook.Save()
$excel.Quit()
[System.Runtime.Interopservices.Marshal]::ReleaseComObject($excel) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:47:18.400

您必须删除名称“_FilterDatabase”，因为该名称只允许使用一次。

Names 对象是一个 hastable。因此，您需要像这样删除密钥：

`$workbook.Names.Item("_FilterDatabase").Delete()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T09:57:25.857

之后做这样的事情也可能有用`$workbook.Names.Item("_FilterDatabase").Delete()`：

```
$Items_FD = $workbook.Names | ?{ $_.Name -match "_FilterDatabase" }
$Items_FD | %{
  try{
    $_.Delete() | Out-Null
  }
  catch{}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-31T14:35:51.893

```
Sub IdentifyNames()

Dim defName As Name

With ThisWorkbook 'Entire workbook
  For Each defName In .Names
  If Right(defName.Name, 14) = "FilterDatabase" Then defName.delete
  'Debug.Print defName.Name
  Next
End With

End Sub 
```

注释部分列出定义的名称

# java - 实例化（子）类时，您将对象声明为什么“类型”有什么区别吗？

> ID：14644442
> 
> 赞同：2
> 
> 时间：2013-02-01T10:37:50.217
> 
> 标签：java, inheritance, subclass, instantiation

假设我有一个班级`ParentClass`和一个班级`ChildClass`

它`ParentClass`是抽象的，并且`ChildClass`扩展了`ParentClass`每个 Java 术语。此外，`ParentClass`还有一个以 a`int`作为参数的构造函数。现在在另一个类中，我想实例化`ChildClass`. 我尝试了以下两种方法：

1.  `ChildClass obj1 = new ChildClass(5)`
2.  `ParentClass obj2 = new ChildClass(5)`

Java 允许我使用上述两种方式中的任何一种。我的问题是，实际上有什么区别吗？如果我愿意，我可以使用这两者吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:39:45.863

两者都有效，并且都在内存中创建相同的对象。但只有第一个允许您使用 ChildClass 其他特定属性或 ParentClass 不知道的方法。

例子 ：

```
abstract class ParentClass{
   ...
}

class ChildClass extends ParentClass {

   public void SomeChildMethod(){ ... }
   ...
}

...

ChildClass obj1 = new ChildClass(5);
ParentClass obj2 = new ChildClass(5);

obj1.SomeChildMethod(); // ok
obj2.SomeChildMethod(); // compilation error 
((ChildClass)obj2).SomeChildMethod(); // ok 
```

因此，仅当您确定永远不需要特定的子方法或属性（如果有）时，才使用第二种实例化方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:44:11.903

创建的对象实际上是相同的。

第一种方法允许您使用在 中`ChildClass`而不是在 中定义的方法`ParentClass`。所以

```
 obj1.aMethodNotInParentClass(); 
```

编译同时

```
 obj2.aMethodNotInParentClass(); 
```

才不是。

或者，使用第二种形式可以让您更轻松地用其他实现替换内部类。如果你想使用`AnotherChildClass`而不是`ChildClass`，

```
 ParentClass obj2 = new AnotherChildClass(5); 
```

是您需要做的所有更改（假设类已正确定义）；使用第一种方法可能需要在代码的其他地方进行一些更改。

根据经验，将变量定义为更通用的类，该类定义（*）您需要的对象的所有方法。因此，如果您使用`ChildClass`未定义的任何方法`ParentClass`，请使用第一种方式，否则，请使用第二种方式。

(*) 请注意，我提到的是**定义**，而不是**实现**。如果您覆盖 中的方法`ChildClass`，您将使用该实现，因为创建的对象属于该类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T10:44:59.370

在内存中，将使用完全相同的对象。但是，您只能`obj2`像包含`ParentClass`对象一样使用该变量，而不会理所当然地认为您的`ChildClass`类的所有不错的功能。如果`ChildClass`声明了一个方法`f()`，但`ParentClass`没有声明，则调用`obj2.f()`将不起作用——尽管内存中的对象可以很好地运行该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T10:42:11.750

*   如果它们具有相同的方法，只是孩子实现了抽象方法，那么就没有任何区别。
*   如果您添加了其他方法，那么如果您将其声明为父级，则子级将无法访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T10:45:42.850

第二种选择只允许使用在 ParentClass 中声明的方法。例如：

```
public class ParentClass {
    public void doX() {}
}

public class ChildClass {
    public void doY() {}

    public static void main() {
        ParentClass p = new ChildClass();
        ChildClass c = new ChildClass();
        p.doX(); //works
        c.doX(); //works

        p.doY(); //not allowed
        c.doY(); //works

        ((ChildClass) p).doY(); //this way you cast the object to ChilClass and can use its methods.

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T17:20:25.760

Yes there is a difference. The first way uses dynamic binding to give you a child instance as a parent object. This only gives you the functionality of the parent object onto the child instance. The second way will give you an instance of the child object as the child object, allowing you to use all of its methods and its parent objects methods rather than being limited to the methods of the parent class.

# ios - 如何在 Objective-C 中使用 for 循环替换 HTML 值？

> ID：14644445
> 
> 赞同：0
> 
> 时间：2013-02-01T10:38:01.207
> 
> 标签：ios, objective-c, uiwebview

我创建了 html 文件并替换了 html 文件中的一些值。没事。但我想使用 for 循环并替换值。但我的问题是它只替换最终值。

我的html代码：

```
<body bgcolor="#F5DA81">
<h1><center>Simple Report</center></h1>
<p> This report contais about comapny details according to contact details.</p>
<center><b><u><h3>Company Details</h3></u></b></center>
    <table>
        <tr><td>Company Name:</td><td><!--company--> </td></tr>
        <tr><td>Company Id  :</td><td><!--companyId--></td></tr>
    </table>
<center><b><u><h3>Contact Details</h3></u></b></center>
    <table>
        <tr><td>Contact Name:</td><td><!--contact--></td></tr>
        <tr><td>Contact Id  :</td><td><!--contactId--></td></tr>
    </table>
</body> 
```

我的 for 循环数组替换值。

```
NSMutableArray *valueArray = [[NSMutableArray alloc]init];
NSString *va = @"NU";
NSString *va1 = @"My Name";
NSString *va2 = @"WEB";
NSString *va3 = @"My Web System";

[valueArray addObject:va];
[valueArray addObject:va1];
[valueArray addObject:va2];
[valueArray addObject:va3];

NSMutableArray *myValue = [[NSMutableArray alloc]init];
NSString *val = @"<!--company-->";
NSString *val1 = @"<!--companyId-->";
NSString *val2 = @"<!--contact-->";
NSString *val3 = @"<!--contactId-->";

[myValue addObject:val];
[myValue addObject:val1];
[myValue addObject:val2];
[myValue addObject:val3];

NSMutableString *html1=[[NSMutableString alloc]init];

    for(int i = 0 ; i < 4; i++) {

        NSString *myFinalString = [myValue objectAtIndex:i];
        NSString *myVal = [valueArray objectAtIndex:i];
        html1 =[self HtmlReportName:@"myFirst" withReplaceId:myFinalString withValue:myVal];
        i = i + 1;
    }    

    [webView loadHTMLString:html1 baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

Html替换方法。

```
-(NSMutableString *) HtmlReportName:(NSString *)reportName withReplaceId:(NSString *)replaceId withValue:(NSString *)value {
NSMutableString *html;
html = [NSMutableString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:reportName ofType:@"html"] encoding:NSUTF8StringEncoding error:nil];
[html replaceOccurrencesOfString:replaceId withString:value options:0 range:NSMakeRange(0, [html length])];
return html;

} 
```

在我的网络视图中只显示最后一个值。我想在 Web 视图中显示所有替换值。

我编辑的代码::

```
NSMutableString *html12 = [NSMutableString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"myFirst" ofType:@"html"]                                                           encoding:NSUTF8StringEncoding error:nil];

for (NSUInteger i = 0; i < [valueArray count]; i++) {

    NSString *myFinalString = [myValue objectAtIndex:i];
    NSString *myVal= [valueArray objectAtIndex:i];
    [html12 replaceOccurrencesOfString:myVal
                          withString:myFinalString
                          options:0
                          range:NSMakeRange(0, [html12 length])];
}

 [webView loadHTMLString:html12 baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:47:50.883

问题是您没有将修改后的 HTML 传递回下一个替换，而是每次都重新加载原始 HTML，因此丢失了上一个替换。

试试这个：

```
NSMutableString *html = [NSMutableString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:reportName ofType:@"html"]
                                                         encoding:NSUTF8StringEncoding
                                                            error:nil];
NSAssert([myValue count] == [valueArray count], @"Doh!");
for (NSUInteger i = 0; i < [valueArray count]; i++)
{
    NSString *myFinalString = [valueArray objectAtIndex:i];
    NSString *myVal= [myValue objectAtIndex:i];
    [html replaceOccurrencesOfString:myVal
                          withString:myFinalString
                             options:0
                               range:NSMakeRange(0, [html length])];
    // Remove i=i+1 !!!
} 
```

并转储无意义的`HtmlReportName`方法。

**注意**你使用了`valueArray`和`myValue`数组从后到前，*请*给他们更好的名字！

# mysql - 有什么方法可以根据表格列中的内容搜索表格名称吗？

> ID：14644449
> 
> 赞同：1
> 
> 时间：2013-02-01T10:38:14.000
> 
> 标签：mysql, oracle

> **可能重复：**
> [在所有表中的所有字段中搜索特定值 (Oracle)](https://stackoverflow.com/questions/208493/search-all-fields-in-all-tables-for-a-specific-value-oracle)

就像我们可以使用命令在 unix 中通过文件中的内容来搜索文件和目录的名称一样，是否有任何查询可以根据 ORACLE 或 mysql 中的列中的内容来搜索表的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:18:37.720

直接从数据库中，可能无法从特定列中的值中找到表名。但是，如果您有列名，则可以找到包含该列的表，`user_tab_cols`以缩小手动搜索范围。

# postgresql - VS2012：构建 postgresql - LNK1120、2001 - 手动添加依赖项？

> ID：14644451
> 
> 赞同：0
> 
> 时间：2013-02-01T10:38:16.790
> 
> 标签：postgresql, build, compilation, visual-studio-2012

我正在尝试从 Visual Studio 2012 中在我的 Windows 机器上构建 postgresql。当我这样做时，我会遇到很多错误，所有这些错误都是：

*   LNK1120：*n 个*未解决的外部因素
*   LNK2001：未解析的外部符号

我在很多地方读到有这些错误应该指定它是控制台应用程序而不是 win32 应用程序，但是：我没有自己创建 sln 和 vcxproj，但是构建程序首先创建了这个。所以，我在那里什么都做不了，对吧？

我查看了其他类似的问题，有人建议将 dll 添加为附加依赖项（属性> 配置属性> 链接器> 输入> 附加依赖项）。这**确实有效**，但这真的是解决方案吗？我是否必须在每个项目上手动添加依赖项？或者有捷径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:05:02.780

Visual Studio 2012 不受支持，并且不适用于 PostgreSQL 9.2 及更低版本。即使您可以解决即时链接器错误，您也会遇到本地和字符集支持等问题。

对于 Pg 9.2 使用 Visual Studio 2010 或更早版本，或者对于 9.0 及更低版本使用 Visual Studio 2008 或更早版本。Express 版本运行良好，Windows SDK 7.1 也是如此。

即将推出的 PostgreSQL 9.3 将包括 Visual Studio 2012 支持。它不会被修补到旧版本中。

有关VS 2012 支持，请参阅[https://commitfest.postgresql.org/action/patch_view?id=1023](https://commitfest.postgresql.org/action/patch_view?id=1023)和[http://www.postgresql.org/message-id/20130101025421.GA17763@tornado.leadboat.com 。](http://www.postgresql.org/message-id/20130101025421.GA17763@tornado.leadboat.com)

有关 Windows 上的构建说明，请参阅[http://www.postgresql.org/docs/current/static/install-windows.html](http://www.postgresql.org/docs/current/static/install-windows.html)。阅读当前版本，但请注意，如果您正在构建旧版本的服务器，您可能还需要旧工具，因此也要阅读旧版本的文档版本。

我编写了一些工具和说明来帮助简化构建；他们在这里发布：

[https://github.com/2ndQuadrant/pg_build_win](https://github.com/2ndQuadrant/pg_build_win)

您的反馈将不胜感激。

# php - 如何从所见即所得的内容中删除整个 iframe 标签（谷歌地图）？

> ID：14644456
> 
> 赞同：0
> 
> 时间：2013-02-01T10:38:31.173
> 
> 标签：php, html, regex, tags, strip-tags

我想从服务器端 (php) 中删除嵌入式 Google 地图的 iframe 标记。

这是一个 symfony 1.4 项目，我想在将 html 提供给响应之前从操作中删除它。

标签看起来像这样。乍一看，这似乎是一项需要使用正则表达式来解决的任务。

```
<p>
<iframe width="425" height="350" src="http://maps.google.com/maps/ms?hl=en&amp;mpa=0&amp;ctz=-60&amp;mpf=0&amp;ie=UTF8&amp;msa=0&amp;t=m&amp;vpsrc=6&amp;msid=207463975658802969656.0004b1369c88b98702faa&amp;ll=44.705998,8.068085&amp;spn=0.085403,0.145912&amp;z=12&amp;iwloc=0004b136a142301cefe0c&amp;output=embed"></iframe>
<br><small>View <a href="http://maps.google.com/maps/ms?hl=en&amp;mpa=0&amp;ctz=-60&amp;mpf=0&amp;ie=UTF8&amp;msa=0&amp;t=m&amp;vpsrc=6&amp;msid=207463975658802969656.0004b1369c88b98702faa&amp;ll=44.705998,8.068085&amp;spn=0.085403,0.145912&amp;z=12&amp;iwloc=0004b136a142301cefe0c&amp;source=embed">Test</a>
in a larger map</small>
</p> 
```

是否有任何其他解决方案或有效的正则表达式可以做到这一点？

如果可能，我只想`<iframe>`删除标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:45:50.643

您可以使用[preg_replace()](http://php.net/preg_replace)：

```
echo preg_replace("#<p>(.*)<iframe(.*?)maps.google.com(.*?)</iframe>(.*)</p>#is", '', $string); 
```

[键盘示例](http://codepad.org/YVjjxOGt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T12:01:12.607

试试这个：

```
preg_replace('/<iframe.*?\/iframe>/i','', $this->product->description); 
```

# quartz.net - Quartz.Net GetNextValidTimeAfter() 为 DST 抛出异常

> ID：14644457
> 
> 赞同：0
> 
> 时间：2013-02-01T10:38:33.243
> 
> 标签：quartz.net

目前我正在使用 Quartz.Net Scheduler 来安排不同的作业。在 UI 中，用户可以配置频率，即每周和星期几和时间，以触发作业。一旦用户可以配置这些属性，我当前正在显示下一个触发时间。

示例：每周日凌晨 2 点 CronString: 0 0 2 ? * SUN * 当前日期：2013 年 3 月 8 日星期五时区：EST UTC-5.30 下一个触发时间：2013 年 3 月 10 日星期日凌晨 2:00

这个工作正常。但如果 DST 将在 2 月 10 日开始，那么那一天就不会是凌晨 2:00。所以 CronExpression 抛出以下错误：

```
CronExpression exp = new CronExpression(cronStr);
var dt = exp.GetNextValidTimeAfter(DateTime.Now.ToUniversalTime()).Value.ToLocalTime();
return String.Format("{0:dddd, MMMM d, yyyy}", dt); 
```

异常：引发 ArgumentException。消息：“提供的 DateTime 表示无效时间。”

由于日历中不存在这样的日期时间，我想跳过那一天并显示下一个有效日期，即 2013 年 3 月 17 日星期日凌晨 2:00

帮助我如何解决这个问题，因为它是由 .Net CLR 在 Quartz 代码中内部抛出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:00:07.357

您可以使用 TimeZoneInfo.Local.IsInvalidTime 查看时间是否有效，这将在 3 月 2 日凌晨 2:00 到 3:00 之间的时间返回 true（美国和加拿大大部分地区的 DST 开始日） .

此处提供了更多信息 [http://blogs.msdn.com/b/bclteam/archive/2007/06/11/system-timezoneinfo-working-with-ambiguous-and-invalid-points-in-time-josh-free .aspx](http://blogs.msdn.com/b/bclteam/archive/2007/06/11/system-timezoneinfo-working-with-ambiguous-and-invalid-points-in-time-josh-free.aspx)

# android - SQLite DB 的版本号

> ID：14644458
> 
> 赞同：11
> 
> 时间：2013-02-01T10:38:39.913
> 
> 标签：android, sqlite

我正在我的 android 应用程序中使用 sqlite。

我正在 `db.getVersion()`获取我的数据库的当前版本。

它显示 `3`在 logcat 中。

即使在构造函数中，我也将其设置`4`为版本号。

```
public Helper(Context context)
    {
        super(context, DATABASE_NAME, null,4);
    } 
```

我给`4`它应该`4`作为版本号。

但它的行为不是这样的。它显示`3`为版本号。

请任何建议。

更新：-

```
 public class Helper extends SQLiteOpenHelper {
        public static final String  DATABASE_NAME = "helper.db";

        public static final String TITLE = "title";
        public static final String AUTHOR = "author";
        public static final String ISBN = "isbn";

        public Helper(Context context)
        {
            super(context, DATABASE_NAME, null,4);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

                db.execSQL( "CREATE TABLE book1(_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, author TEXT,isbn INTEGER);");
                Log.v("Create Table", "CREATE TABLE book1(_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, author TEXT,isbn INTEGER);");

Log.v("version ", "Version number is "+db.getVersion());

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T23:46:05.850

您正在检查 onCreate 函数中的版本号，为什么？OnCreate 函数应该只在第一次从头开始创建数据库时调用，在这种情况下，它应该构建数据库，因为您需要适合您正在使用的版本。

您可以在创建数据库后尝试检查数据库版本并要求获取它的可读或可写实例吗？

```
SQLiteDatabase db = new Helper(context).getWritableDatabase();
db.getVersion(); // what value do you get here? 
```

查看android 4.1.1 SQLiteOpenHelper的源代码，这里似乎onCreate函数中的db版本应该为0，我想它可能会在您正在测试的版本上以另一种方式实现。 [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/database/sqlite/SQLiteOpenHelper.java#242](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/database/sqlite/SQLiteOpenHelper.java#242)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T13:20:25.053

似乎数据库已经由您的代码的先前版本创建，请尝试从您正在测试的设备上卸载该应用程序，然后重新安装。这应该给你版本= 4

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T02:00:52.647

您必须删除 oldversion 数据库中的表，覆盖此功能

```
 @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS book1");
        onCreate(db);
    } 
```

应该是这样。

为避免数据丢失，请参阅本教程

[http://denverdroid.blogspot.com/2010/04/how-to-non-destructibly-upgrade-your.html](http://denverdroid.blogspot.com/2010/04/how-to-non-destructibly-upgrade-your.html)

或这个

[如何更新 SQLite 数据库而不丢失所有现有数据？](https://stackoverflow.com/questions/5188839/how-to-update-an-sqlite-database-and-not-lose-all-existing-data)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:00:12.377

我认为您为 Helper 类提供了错误的构造函数。试试这个：

```
 public Helper(Context context, String name, CursorFactory factory, int version) {
     super(context, name, factory, version);
  } 
```

您当前的构造函数告诉 Android 它已经是第 4 版，不需要升级它。

此外，您还需要提供一个 onUpgrade 方法。

```
 @Override
  public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
    // upgrade code
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-20T04:28:49.443

## 一劳永逸地澄清这个问题：

```
 private SQLiteDatabase getDatabaseLocked(boolean writable) {
  ...
            db.beginTransaction();
            try {
                if (version == 0) {
   -------->      onCreate(db);      <---- YOUR QUERY ON VERSION IS HERE !!!
                } else {
                    if (version > mNewVersion) {
                        onDowngrade(db, version, mNewVersion);
                    } else {
                        onUpgrade(db, version, mNewVersion);
                    }
                }
   -------->    db.setVersion(mNewVersion);      <----   NEW VERSION IS SET HERE !!!
                db.setTransactionSuccessful();
            } finally {
                db.endTransaction();
            }
        }
...
} 
```

来源： [公共最终类 SQLiteDatabase](https://android.googlesource.com/platform/frameworks/base.git/+/master/core/java/android/database/sqlite/SQLiteDatabase.java)

# c# - ListBox 下一行在 Windows Phone 8 中自动

> ID：14644463
> 
> 赞同：3
> 
> 时间：2013-02-01T10:38:53.810
> 
> 标签：c#, xaml, windows-phone-8

当第一行被占用时，如何让图片转到下一行？

以下是我当前的代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <TextBlock Text="Picture" Style="{StaticResource PhoneTextNormalStyle}"/>
    <ListBox x:Name="picList" ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <Image Source="{Binding Picture}" Height="80" Width="80"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:41:40.517

使用 a`WrapPanel`而不是`StackPanel`. 由于 Windows Phone 8 不提供`WrapPanel`控件，因此您需要使用**[Windows Phone Toolkit](https://phone.codeplex.com/)**。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <TextBlock Text="Picture" Style="{StaticResource PhoneTextNormalStyle}"/>
    <ListBox x:Name="picList" ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal"
                           Width="300"
                           HorizontalAlignment="Left"
                           />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <Image Source="{Binding Picture}" Height="80" Width="80"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

# sharepoint - Sharepoint Online - 分发自定义 Web 模板

> ID：14644465
> 
> 赞同：1
> 
> 时间：2013-02-01T10:39:24.590
> 
> 标签：sharepoint, ms-office, office365

我需要为**Sharepoint Online / Office 365**创建一个 Web 模板并将其作为 WSP 文件分发。

我的机器上还有一个**用于开发的本地 SharePoint Server 2010**。我创建了一些 webpart，它们在**SPS2010**和 SharePoint Online 上工作，但现在我想创建 web 模板，因为我需要按需创建自定义**团队站点。**

到目前为止，我得到的是以下内容：

*   看来我**无法**从 SPS2010 为 SPO 创建模板，某些功能在**SPO**上不可用，我无法在`Onet.xml`不破坏文件和生成的页面 (HTTP 404) 的情况下从其中删除这些功能。有什么办法吗？

*   出于某种原因，我无法从我在 SharePoint Online 实例上创建的网站创建 Web 模板，我可以访问该实例。我收到一条错误`Error exporting the list named "Master Page Gallery" at the URL: _catalogs/masterpage"`消息并且构建失败。

但是，除此之外，是否可以创建一个 Web 模板，然后作为 WSP 分发，以便其他人可以在其他 SPO 实例上使用它？似乎会出现问题，因为已安装功能的 FeatureID 不匹配，或者它们在 SPO 中的任何实例上是否相等？

非常感谢您的努力。

bash.d

# visual-studio - VS2012 代码中随机不存在的错误

> ID：14644466
> 
> 赞同：1
> 
> 时间：2013-02-01T10:39:26.350
> 
> 标签：visual-studio, visual-studio-2012

我的 VS2012 偶尔会抱怨代码中甚至不存在的错误。例如：

![在此处输入图像描述](../Images/bf4167020e9485d4f636b07beb3572cc.png)

即使函数以 开头`Private Function MyFunction()`，但似乎 VS 忽略了它并且不让构建，从而导致错误，例如：

```
'End' statement cannot be used in class library projects. 
```

任何想法为什么它可能会这样做或如何解决？

# html - 在锚点内垂直对齐文本

> ID：14644467
> 
> 赞同：18
> 
> 时间：2013-02-01T10:39:29.023
> 
> 标签：html, css

我有这段 HTML：

```
<a href="href" class="my-a-class>
    <img alt="alt" src="/path/to/image.jpg" class="my-img-class" />&nbsp;My text
</a> 
```

我需要垂直对齐“我的文本”而不​​影响锚中的图像。我无法添加任何 HTML 标记，我只需要使用 CSS 即可。有什么建议吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T10:43:28.600

您可以使用`.my-a-class { line-height: value }`. 替换`value`为图像的高度。

## 编辑 - -

现在最好使用 flexbox 来做这件事：

```
.my-a-class {
   display: flex;
   align-items: center;
   justify-content: space-between;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:44:15.540

将图像与文本对齐：

```
.my-a-class img { vertical-align: middle; } 
```

演示：http: [//jsfiddle.net/Guffa/hz6AV/](http://jsfiddle.net/Guffa/hz6AV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:42:00.433

设置`a img{vertical-align:middle;}`或`.my-img-class{vertical-align:middle;}`它应该工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T10:45:36.313

试试这个代码：

```
a {
    position:relative;
    height:11em;
}
a img{
    position: absolute:
    top:0;
    bottom:0;
    margin-top:auto;
    margin-bottom:auto;
} 
```

或者

```
.my-a-class {
    position:relative;
    height:11em;
}
.my-a-class .my-img-class{
    position: absolute:
    top:0;
    bottom:0;
    margin-top:auto;
    margin-bottom:auto;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T14:43:01.990

将图像和图标与锚标记对齐的正确方法是

在你的 CSS

```
a {
   background: transparent url(/images/your_image) scroll no-repeat left center;
   padding: 2px 0px 2px 20px; //fit as you need
} 
```

在您的 HTML 中

```
<a href="url">Text</a> 
```

# java - com.google.gwt.cell.client.EditTextCell.ViewData 类型不可见

> ID：14644470
> 
> 赞同：2
> 
> 时间：2013-02-01T10:39:45.880
> 
> 标签：java, gwt

我遇到了以下问题：我有一个 CellTable，我想包含一个 EditTextCell 来编辑我的表格行的显示数据。为了做到这一点，我的 EditTextCell 需要一个 ViewData 对象，我无法初始化它，因为我收到以下错误：*com.google.gwt.cell.client.EditTextCell.ViewData 类型不可见*

```
EditTextCell editTextCell = new EditTextCell();
String key = "foo";
com.google.gwt.cell.client.EditTextCell.ViewData viewData;
editTextCell.setViewData(key, viewData); 
```

有谁知道这个问题以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:56:25.113

它可能是私有的，因此您不要修改内部结构。我相信您必须反过来考虑这个问题，将您的编辑器添加到视图并让它在内部传递数据，而不是尝试自己提取数据并将其传递给编辑器。

# c# - 从 exe 程序集中合并应用程序配置

> ID：14644471
> 
> 赞同：1
> 
> 时间：2013-02-01T10:39:50.297
> 
> 标签：c#, .net, visual-studio, visual-studio-2012

有没有办法`Properties.Settings`在我的可执行文件的 postbuild 中自动将所有不同的程序集合并到`app.config`我的可执行文件中。

所以我的应用程序配置中有所有配置部分用于不同的程序集。

实际上，对于每个程序集，一个配置部分都需要自动附加到我的 exe.config 中，包括所有可用的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:12:00.877

如果所有程序集都是通过 Visual Studio 项目添加的，则可以在启动应用程序项目中使用部分分组来包含所有依赖项中的所有设置。

```
<configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Model.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
            <section name="Shop.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections> 
```

并像这样添加这些设置：

```
<applicationSettings>
        <Model.Properties.Settings>
            <setting name="SiteUrl" serializeAs="String">
                <value>http://www.mysite.com</value>
            </setting>
        </Model.Properties.Settings>
        <Shop.Properties.Settings>
            <setting name="SynchronisationLoggingEnabled" serializeAs="String">
                <value>False</value>
            </setting>
        </Shop.Properties.Settings>
    </applicationSettings>
</configuration> 
```

# parameters - Struts2：xwork没有转换发送的参数

> ID：14644475
> 
> 赞同：0
> 
> 时间：2013-02-01T10:40:07.457
> 
> 标签：parameters, struts2, xwork

我尝试用 Struts2 制作一个基本的应用程序。

我的问题是我的参数没有被 Xworks 转换。我的操作属性（idParticipant）是一个字符串，但参数是一个数组²。如果我没记错的话，XWork 应该在动作执行之前转换基本参数，对吧？

我的jsp：

```
<s:form action="afficher_participant">
  <s:hidden name="idParticipant" value="4"></s:hidden>
  <s:submit>bob</s:submit>
</s:form> 
```

我的行动：

```
package action;

import java.util.List;

import model.Participant;
import service.ParticipantService;
import service.ParticipantServiceImpl;

public class ParticipantAction extends BaseAction {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private String idParticiPant;
    private List<Participant> listeParticipant;
    private Participant participant;

    private ParticipantService participantService = new ParticipantServiceImpl();

    public String getIdParticiPant() {
        return idParticiPant;
    }

    public void setIdParticiPant(String idParticiPant) {
        this.idParticiPant = idParticiPant;
    }

    public List<Participant> getListeParticipant() {
        return listeParticipant;
    }

    public void setListeParticipant(List<Participant> listeParticipant) {
        this.listeParticipant = listeParticipant;
    }

    public Participant getParticipant() {
        return participant;
    }

    public void setParticipant(Participant participant) {
        this.participant = participant;
    }

    /* Actions */

    public String lister() {
        participantService = new ParticipantServiceImpl();
        this.listeParticipant = participantService.lister();
        return "listerParticipant";
    }

    public String afficher() {
        if (idParticiPant == null) {
            return ERROR;
        }
        participantService = new ParticipantServiceImpl();
        participant = participantService.get(Integer.valueOf(idParticiPant));
        return "afficherParticipant";
    }
} 
```

我的 struts.xml ：

```
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="true" />
    <constant name="struts.devMode" value="true" />
    <constant name="struts.custom.i18n.resources" value="package" />
    <constant name="struts.i18n.encoding" value="UTF-8" />

    <package name="frontoffice" namespace="/" extends="struts-default">

        <default-interceptor-ref name="defaultStack"></default-interceptor-ref>

        <!-- Action de l'action de réference -->
        <default-action-ref name="index" />

        <!-- Navigation rules -->
        <action name="*_participant" class="action.ParticipantAction" method="{1}">
            <result name="success">jsp/listerParticipant.jsp</result>
            <result name="listerParticipant">jsp/listerParticipant.jsp</result>
            <result name="afficherParticipant">jsp/afficherParticipant.jsp</result>
            <result name="error">/index.jsp</result>
        </action>

    </package>
</struts> 
```

最后，我提交时遇到的异常：

```
 Unexpected Exception caught setting 'idParticipant' on 'class action.ParticipantAction: Error setting 
expression 'idParticipant' with value ['4', ] 
```

我知道这可能只是一个配置问题，但我找不到我的错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:01:11.663

有两件事：

1.  改成这个`<s:hidden name="idParticipant" value="%{'4'}"></s:hidden>`
2.  参数的名称应该是`idParticipant`，而不是`idParticiPant`。

# c# - windows phone 是否有编码器/解码器可用于将 Wav 转换为 Mp3 和 Mp3 转换为 Wav？

> ID：14644483
> 
> 赞同：3
> 
> 时间：2013-02-01T10:40:33.483
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8

即使花了很多时间搜索音频编码器/解码器，我也找不到一个可以用于 windows phone 应用程序的。

我见过很多像 lame、naudio、nspeex 等。

有人请告诉我；是否有用于 Windows Phone 应用程序的音频编码器/解码器，能够将 Mp3 转换为 Wav 或 Wav 转换为 Mp3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:05:09.237

答案是：不，没有适用于 windows phone 的免费 mp3 编码器/解码器。

# c# - 在网格视图中更改复选框的状态

> ID：14644494
> 
> 赞同：-1
> 
> 时间：2013-02-01T10:41:28.643
> 
> 标签：c#, asp.net, gridview

我有一个包含 4 列复选框的网格视图。默认情况下，无法选中或取消选中它们。

我怎样才能只使复选框的一列可编辑...iow不是只读的，以便我可以选中或取消选中将更新数据库的复选框的一个特定列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:45:19.887

您可以使用[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件在使用网格视图的行实例以及绑定数据的复选框上应用启用/禁用条件。

```
void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
       CheckBox chk = (CheckBox)e.Row.FindControl("chkBoxID");
       if(DataBinder.Eval(e.Row.DataItem, "datasourceColumnName").ToString() == "someval")
             chk.Enabled = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:48:55.293

您可以转到它的工具提示和 itemtemplate 并使复选框 Checked=true 这可能会解决您的问题

# android - 如何使用带有 android 的 facebook SDK 发布音频

> ID：14644497
> 
> 赞同：0
> 
> 时间：2013-02-01T10:41:35.147
> 
> 标签：android, facebook

如何使用带有 android 的 facebook SDK 发布音频？而不是将它们上传到第三方服务器并共享链接。或使用第三方应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:50:19.433

我不相信目前有办法做到这一点。[您必须将其上传到SoundCloud](https://soundcloud.com/)等第三方服务，然后发布链接。如果第 3 方服务支持嵌入 Facebook（SoundCloud 支持），那么您的用户将能够在他们的新闻提要上收听音频。

另一种选择可能是使用[“饲料游戏”](https://developers.facebook.com/docs/feed-gaming/) -

> 开发人员可以利用信息流游戏为用户创建引人入胜的故事。这涉及代表用户发布故事，该用户附加了 Flash 对象。当用户的朋友看到​​这些附件时，他们将能够单击以内联播放它们。这为您的游戏的小型可嵌入版本打开了一些有趣的场景，以显示给用户的朋友，最后您可以鼓励他们点击进入您的画布应用程序。

此方法适用于游戏，但如果您开发自己的音频播放器，您将能够让您的用户将音频文件上传到您的服务器，并通过内联 swf 流式传输它们。

# php - PHP 正则表达式说明

> ID：14644498
> 
> 赞同：0
> 
> 时间：2013-02-01T10:41:39.187
> 
> 标签：php, regex

我正在使用这个`preg_match`值来验证服务器的输入是否没有各种恶意字符。

```
preg_match('/^[a-zA-Z)(\!@&,0-9\?_\-\.\s\*&\$\r\n]{0,'. $str_length.'}$/',$_POST['text']) 
```

如果没有匹配，我返回 false，服务器不会接受它。我想添加指向该输入的链接。这样我就可以得到：

```
"hello there, this is my picture: http://myserver.com/imgs/user-images/user222.jpg 
and this is my dog http://myserver.com/imgs/user-images/user222-dog.jpg" 
```

如何将链接添加到我的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:51:27.170

我认为您应该使用类似的东西`htmlentities`和您的 RDBMS 库工具来避免恶意字符，而不是实现自己的正则表达式。你的似乎非常严格：没有`+`符号，没有冒号，没有分号，没有百分比......我不知道你的应用程序是什么，但用户可能不喜欢那个。

# symfony - 如果当前路由属于特定 Symfony2 捆绑包，则签入 Twig 模板

> ID：14644501
> 
> 赞同：6
> 
> 时间：2013-02-01T10:41:42.947
> 
> 标签：symfony, routes, bundle, twig

Symfony2 应用程序通常围绕捆绑包进行组织。每个捆绑包都包含（许多）控制器。每个控制器都应该映射一个路由。

实际上，路由通常存储在`config`包文件夹下的特定文件中，或者最终在每个控制器内部进行注释。

我正在寻找的是*在 Twig 中识别当前路由是否属于特定 Symfony bundle 的一种方法*。是否可以？

作为最后一点，请考虑路由名称应该遵循控制器的名称空间，在我看来，但它也可以是一个随机但唯一的名称，例如`qwer_XX`而不是`ACME_HomeBundle_home`. 因此，我们不能诉诸*命名空间到路由名称的*关联来做我要求的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:09:30.030

查看[Request](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html)对象，我找到了一个可能的解决方案。

控制器附加到`Request`对象上，因此可以在 Twig 中从字符串中提取它：

```
app.request.attributes.get('_controller') 
```

并检索捆绑名称。例如，可以通过[TwigExtension](http://symfony.com/doc/2.0/cookbook/templating/twig_extension.html)定义这样的过滤功能，例如

```
public function getFilters() {
    return array(
        ...//other filters
        'bundleName'=>new \Twig_Filter_Method($this, 'bundleNameFilter'),
    );
}

public static function bundleNameFilter($string){
  return strstr(substr(strstr($string, '\\'), 1), '\\', true);
} 
```

然后，在 twig 中按如下方式使用它：

```
{{  app.request.attributes.get('_controller') | bundleName }} 
```

希望能帮助到你。

# android - 当我使用平板电脑时，xml背景不会改变

> ID：14644517
> 
> 赞同：8
> 
> 时间：2013-02-01T10:42:39.643
> 
> 标签：android, xml, background, tablet

我有一个声明按钮背景的 xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/selector_pressed" />
    <item android:state_focused="true" android:drawable="@color/selector_focused" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

在我的手机三星 Nexus S (android 4.0.3) 上，这个 xml 工作得很好，当我按下视图时，背景颜色会发生变化。但是我在平板电脑上遇到了问题（三星 Galaxy 选项卡，Android 3.2），单击了按钮，但我没有看到背景有任何变化。平板电脑的背景颜色永远不会改变。

任何人都知道为什么这只发生在平板电脑上？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T09:42:29.897

我遇到了同样的问题，但我设法解决了这个问题：实际问题在于 android 3.2 中关于硬件加速的缺陷，所以如果你在 AndroidManifest 中输入你的应用程序是 hardwareAccelerated="true" 你的问题将得到解决.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T01:53:01.790

我建议您调整每个布局文件夹的布局

*   布局
*   布局-800x480
*   布局土地
*   等参考这里 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

并在每个布局上调用您的 xml。可能是在平板上点击的时候显示不正常，我也遇到过这个问题，因为尺寸或者分辨率不匹配，所以颜色也显示不正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T17:17:13.517

尝试摆脱

```
<item android:state_focused="true" android:drawable="@color/selector_focused" /> 
```

可能只是该版本的操作系统拦截按下和聚焦的方式。只是猜测，并没有真正测试它。

尝试将您的 .xml 更改为：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>         
            <solid
                android:color="#11223344" />
        </shape>
    </item>
    <item>
        <shape>
           <solid
               android:color="#AABBCCDD" />
        </shape>
    </item>
</selector> 
```

当然，您可以将颜色设置为您想要的任何颜色。也就是说，如果您使用的是静态颜色。您也可以为此添加渐变和圆角边缘以及边框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-24T12:50:28.897

我用了 ：

```
android:hardwareAccelerated="false"  in AndroidManifest.xml <application> tag 
```

它工作得很好

# android - Android 位置为空

> ID：14644520
> 
> 赞同：0
> 
> 时间：2013-02-01T10:42:52.243
> 
> 标签：android

我想检索设备的位置。我在我的模拟器上做。我的模拟器是 Google Api 的（Google Inc.）。我正在使用 LocationManager 类和 GPS 提供程序来获取当前位置，但我的位置始终为空。我给了我的模拟器虚拟坐标并在清单中添加了所有权限。

```
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LocationManager lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    Location l = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (l!= null) {
        Toast.makeText(this, "Location is null", 300).show();
    }else{
        Toast.makeText(this,"Location is not null",300).show();
    }
}

} 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gotya"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="6"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.gotya.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".CodeReceiver">
        <intent-filter >
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
    </receiver>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:50:42.000

Android SDK 文档内容如下：

> `getLastKnownlocation`返回提供者的最后一个已知位置。如果提供程序当前被禁用，`null`则返回。

此外，模拟器只能模拟 GPS。

底线：确保您的程序使用此位置提供程序。

# c++ - 何时在 C++ 应用程序中使用虚拟析构函数

> ID：14644525
> 
> 赞同：1
> 
> 时间：2013-02-01T10:43:06.260
> 
> 标签：c++

> **可能重复：**
> [何时使用虚拟析构函数？](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)

> [何时使用虚拟析构函数](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)可能重复 ？

我想知道是否有人可以帮助我了解虚拟析构函数的需求。

我已经编写了一个带有主对话框的应用程序，并且从这个主对话框中将产生其他派生对话框。

因此，所有这些派生对话框都需要虚拟析构函数吗？还是只是主对话框？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:48:59.003

一般来说，如果一个类被设计为用作基类，它应该有一个虚拟析构函数。唯一的例外是提供类似`typedef`（参见示例`std::exception`）的便利类。最安全的解决方案是使析构函数受到保护，但实际上，它们的语义使得无论如何都没有人创建指向它们的指针，因此在实践中不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:47:14.040

当您要以多态方式使用这些对象时，需要虚拟析构函数。基类析构函数就足够了`virtual`；派生的析构函数也将是隐式`virtual`的。

在您的情况下，您似乎不会以多态方式使用对话框，因此您可能根本不需要虚拟析构函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T10:47:00.303

如果您希望在链中调用所有析构函数，则必须始终创建一个虚拟析构函数。哪怕一个是空的。

如果您错过了在某些时候创建虚拟析构函数，C++ 将创建一个非虚拟析构函数，因此会破坏所有析构函数链。

对于非虚拟析构函数，它们将在您显式删除的类指针上调用。如果您使用虚拟 - 将始终调用所有链。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T10:47:10.297

简单的规则是“只要类中有虚函数，就需要一个虚析构函数”。

一旦你在基类中创建了一个函数，它对于所有派生类都将变为虚拟，无论你是否将其标记为虚拟。因此，如果您将主对话框析构函数设为虚拟，那么您已经为所有其他人完成了这项工作[尽管我发现在查看类声明时立即看到一个函数是虚拟的很有用，而不必遍历几层类弄清楚它是否存在]。

# android - 在活动中使用 touchListener 时，我们如何从侦听器将信息返回给活动？

> ID：14644531
> 
> 赞同：0
> 
> 时间：2013-02-01T10:43:18.363
> 
> 标签：android, android-activity, listener, ontouchlistener, touch-event

我有一个活动，其中有一个 ImageView 和一个 SeekBar。我为 ImageView 注册了一个带有 imageview1.setOnTouchListener(mylistener) 的侦听器（mylistner 是一个类）。我在侦听器的 onTouch 方法中获取运动事件。我希望程序在我触摸图像视图时隐藏 SeekBar。我看过的所有教程都展示了侦听器如何从源中获取事件。但我正在寻找的是将数据发送回源，以便它可以隐藏 SeekBar。

主要问题是在活动的触摸事件处理中，我们如何将结果从侦听器类返回到调用类（源）？有没有更好的方法来做我想做的事？

我应该进行另一个需要 SeekBar 的事件吗？如果是怎么办？

```
public class A extends Activity {
//.....
final SeekBar sb=(SeekBar) findViewById(R.id.seekBar1);
Mylistener mylistener;
mylisetner=new MyListener(getApplicationContext());

ImageView.setOnTouchListener(mylistener);
//.....

}

public class MyListener implements View.OnTouchListener {
//.....

public boolean onTouch(View v, MotionEvent event) {
final int action = event.getAction() & MotionEvent.ACTION_MASK; 
switch (action) {
        case MotionEvent.ACTION_DOWN:          
       // here how can you get access to the seek bar? or how you inform it to hide?
}
//....

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:54:27.343

根据我从您的问题中了解到的情况，您想在触摸 imageview 时隐藏搜索栏。对吗？

在您的 ontouchlistener 中尝试以下代码....

```
public boolean onTouch(View v, MotionEvent event) {  
 if (event.getAction() == MotionEvent.ACTION_UP){
     seekbar.setVisibility(View.VISIBLE);
 } else if (event.getAction() == MotionEvent.ACTION_DOWN) {
     seekbar.setVisibility(View.GONE);
 }
} 
```

其中 seekbar 是您的 SEEKBAR :)，在 oncreate 中保留它的引用.....

# html - perl 模块 web::scraper

> ID：14644544
> 
> 赞同：-1
> 
> 时间：2013-02-01T10:44:12.780
> 
> 标签：html, perl, web-scraping, perl-module

我只想从网页中提取标题节点对象方法的文本。具体html部分如下：

```
<h2>Node Object Properties</h2>
<p>The &quot;DOM&quot; column indicates in which DOM Level the property was introduced.</p>

<table class="reference">
<tr>
<th width="23%" align="left">Property</th>
<th width="71%" align="left">Description</th>
<th style="text-align:center;">DOM</th>
</tr>
<tr>
    <td><a href="prop_node_attributes.asp">attributes</a></td>
    <td>Returns a collection of a node's attributes</td>
    <td style="text-align:center;">1</td>
</tr>

<tr>
    <td><a href="prop_node_baseuri.asp">baseURI</a></td>
    <td>Returns the absolute base URI of a node</td>
    <td style="text-align:center;">3</td>
</tr>
<tr>
    <td><a href="prop_node_childnodes.asp">childNodes</a></td>
    <td>Returns a NodeList of child nodes for a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_firstchild.asp">firstChild</a></td>
    <td>Returns the first child of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_lastchild.asp">lastChild</a></td>
    <td>Returns the last child of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_localname.asp">localName</a></td>
    <td>Returns the local part of the name of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_namespaceuri.asp">namespaceURI</a></td>
    <td>Returns the namespace URI of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_nextsibling.asp">nextSibling</a></td>
    <td>Returns the next node at the same node tree level</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodename.asp">nodeName</a></td>
    <td>Returns the name of a node, depending on its type</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodetype.asp">nodeType</a></td>
    <td>Returns the type of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodevalue.asp">nodeValue</a></td>
    <td>Sets or returns the value of a node, depending on its 
    type</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_ownerdocument.asp">ownerDocument</a></td>
    <td>Returns the root element (document object) for a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_parentnode.asp">parentNode</a></td>
    <td>Returns the parent node of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_prefix.asp">prefix</a></td>
    <td>Sets or returns the namespace prefix of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_previoussibling.asp">previousSibling</a></td>
    <td>Returns the previous node at the same node tree level</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_textcontent.asp">textContent</a></td>
    <td>Sets or returns the textual content of a node and its 
    descendants</td>
    <td style="text-align:center;">3</td>
</tr>
</table>

<h2>Node Object Methods</h2>
<p>The &quot;DOM&quot; column indicates in which DOM Level the method was introduced.</p>
<table class="reference">
<tr>
<th width="33%" align="left">Method</th>
<th width="61%" align="left">Description</th>
<th style="text-align:center;">DOM</th>
</tr>
<tr>
    <td><a href="met_node_appendchild.asp">appendChild()</a></td>
    <td>Adds a new child node, to the specified node, as the last child node</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_clonenode.asp">cloneNode()</a></td>
    <td>Clones a node</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_comparedocumentposition.asp">compareDocumentPosition()</a></td>
    <td>Compares the document position of two nodes</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td>getFeature(<span class="parameter">feature</span>,<span class="parameter">version</span>)</td>
    <td>Returns a DOM object which implements the specialized APIs 
    of the specified feature and version</td>
    <td style="text-align:center;">3 </td>
</tr>
<tr>
    <td>getUserData(<span class="parameter">key</span>)</td>
    <td>Returns the object associated to a key on a this node. The 
    object must first have been set to this node by calling setUserData with the 
    same key</td>
    <td style="text-align:center;">3 </td>
</tr>
<tr>
    <td><a href="met_node_hasattributes.asp">hasAttributes()</a></td>
    <td>Returns true if a node has any attributes, otherwise it 
    returns false</td>
    <td style="text-align:center;">2 </td>
</tr>
<tr>
    <td><a href="met_node_haschildnodes.asp">hasChildNodes()</a></td>
    <td>Returns true if a node has any child nodes, otherwise it 
    returns false</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_insertbefore.asp">insertBefore()</a></td>
    <td>Inserts a new child node before a specified, existing, child node</td>
    <td style="text-align:center;">1 </td>
</tr>
</table> 
```

在 perl 中，如果我写以下内容：

```
 my $data = scraper {
 process "table.reference > tr > td > a", 'renners[]' => 'TEXT';
}

for my $i (0 .. $#{$res2->{renners}}) {
  print $res2->{renners}[$i];
print "\n";
} 
```

我得到所有标签的文本，即

```
attributes
baseURI
.
.
.
.
insertBefore() 
```

当我只需要节点对象方法的标签文本时，即：

```
appendChild()
.
.
.
insertBefore() 
```

我应该在代码中修改什么？请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:22:18.673

`process "table.reference > tr > td > a[contains(text(),'()')]"` should do it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:42:29.440

也许尝试从提取的文本中匹配函数括号。

```
if ($res2->{renners}[$i] =~ m!\(\)$! ){
    print $res2->{renners}[$i],"\n"
} 
```

这仅适用于节点对象函数附加有括号的情况，即进程调用不会将它们删除，并且所有函数（您需要）都附加有括号。

# javascript - Mongoose 集合中的随机文档

> ID：14644545
> 
> 赞同：27
> 
> 时间：2013-02-01T10:44:13.257
> 
> 标签：javascript, node.js, mongoose

我想创建一个`Schema.statics.random`从集合中获取随机元素的函数。我知道本地 MongoDB 驱动程序有一个示例，但我无法让它在 Mongoose 中工作。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-01T11:05:08.017

我在 GitHub Gist 中找到了这个 Mongoose Schema 静态函数，它应该可以实现你所追求的。它计算集合中的文档数，然后在跳过随机数量后返回一个文档。

```
QuoteSchema.statics.random = function(callback) {
  this.count(function(err, count) {
    if (err) {
      return callback(err);
    }
    var rand = Math.floor(Math.random() * count);
    this.findOne().skip(rand).exec(callback);
  }.bind(this));
}; 
```

来源：[https ://gist.github.com/3453567](https://gist.github.com/3453567)

***注意****我稍微修改了代码以使其更具可读性。*

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-02-04T20:59:31.133

如果您不想在架构中添加“类似测试”的代码，则使用 Mongoose 查询。

```
Model.count().exec(function(err, count){

  var random = Math.floor(Math.random() * count);

  Model.findOne().skip(random).exec(
    function (err, result) {

      // result is random 

  });

}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-07-10T13:55:53.120

一个更短且*可能*更高效
的解决方案（我们不会遍历集合一次来计数，第二次遍历元素来跳过元素，但 mongoose 可能会在幕后这样做）：

使用[聚合和 $sample](https://docs.mongodb.com/manual/reference/operator/aggregation/sample/#pipe._S_sample)：

```
Model.aggregate([{ $sample: { size: 1 } }]) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-07-31T10:31:57.747

您可以使用聚合：

```
User.aggregate([
    {$match: {gender: "male"}},
    {$sample: {size: 10}}
], function(err, docs) {
    console.log(docs);
}); 
```

或者你可以使用 npm 包[https://www.npmjs.com/package/mongoose-simple-random](https://www.npmjs.com/package/mongoose-simple-random)

```
User.findRandom({gender: "male"}, {}, {limit: 10}, function(err, results) { 
    console.log(results); // 10 elements
}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-03T20:50:49.790

我已经为猫鼬实现了一个插件，它以非常有效的方式使用 $near 查询使用 2dsphere 索引对两个随机生成的坐标进行查询。在这里查看：[https](https://github.com/matomesc/mongoose-random) ://github.com/matomesc/mongoose-random 。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-10T21:21:23.317

对于在 async/await、promise 等时查看此内容的人：

```
MySchema.statics.random = async function() {
  const count = await this.count();
  const rand = Math.floor(Math.random() * count);
  const randomDoc = await this.findOne().skip(rand);
  return randomDoc;
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-03T09:58:15.633

现在推荐使用[Model.estimatedDocumentCount()](https://mongoosejs.com/docs/api.html#model_Model.estimatedDocumentCount)。对于称为`Item`函数大纲的模型将是：

```
const Item = require('../your/path/to/Model/Item')

async function getRandomItem() {
   const numItems = await Item.estimatedDocumentCount()
   const rand = Math.floor(Math.random() * numItems)
   const randomItem = await Item.findOne().skip(rand)
   return randomItem
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-05T00:36:18.083

```
// Getting estimated document count.
yourModel.estimatedDocumentCount().then((count) => {
  //Random number between 0 and count.
  const rand = Math.floor(Math.random() * count);

  // Finding ONE random document.
  yourModel
    .findOne()
    .skip(rand)
    .then((randomDocument) => {
      console.log(randomDocument);
    });
}); 
```

您也可以使用 countDocuments()，但建议使用 estimateDocumentCount() 来提高性能。

由于获取一个文档而不是数组，我更喜欢这种方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-15T19:03:17.007

1.  获取集合中的文档总数。
2.  定义一个介于 1 和文档总数之间的随机数。
3.  获取文档并跳过该随机数。

```
const total = await model.countDocuments();
const skip = Math.floor(Math.random() * total) + 1;
const randomDoc = await model.findOne({}).skip(skip).exec(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-05T20:16:32.700

给出 3 个随机文档的命令：

```
db.collection.aggregate([{$sample:{limit: 3}}]) 
```

快递线随机获取4份文件。我认为它适用于最新版本的 mongo。

```
db.aggregate([{$sample:{limit: 4}}]) 
```

请参阅[此链接](https://docs.mongodb.com/manual/reference/operator/aggregation/sample/)以获取更多信息

# c# - FindOneByIdAs 与 ObjectId 的字符串表示

> ID：14644553
> 
> 赞同：0
> 
> 时间：2013-02-01T10:44:36.237
> 
> 标签：c#, mongodb

我对 ObjectId 表示有一个小问题。这是示例代码：

```
public class EntityWithObjectIdRepresentation
{
    public string Id { get; set; }

    public string Name { get; set; }
}

[Test]
public void ObjectIdRepresentationTest()
{
    BsonClassMap.RegisterClassMap<EntityWithObjectIdRepresentation>(cm =>
    {
        cm.AutoMap();
        cm.GetMemberMap(x => x.Id).SetRepresentation(BsonType.ObjectId);
    });

    var col = db.GetCollection("test");
    var entity = new EntityWithObjectIdRepresentation();
    col.Insert(entity);

    Assert.IsNotNullOrEmpty(entity.Id); // Ok, Id is generated automatically

    var res = col.FindOneByIdAs<EntityWithObjectIdRepresentation>(entity.Id);
    Assert.IsNotNull(res); // Fails here
} 
```

上面的代码适用于

```
var res = col.FindOneByIdAs<EntityWithObjectIdRepresentation>(ObjectId.Parse(entity.Id)); 
```

但是我想要的是在通用存储库类中抽象这些东西，所以一般我不知道这个Id是否必须转换为ObjectId。我可以从 BsonClassMap 中检索此类信息吗？

以下代码也可以工作，但由于 LINQ 表达式转换，根据基准，它几乎慢了 15 倍：

```
var res = col.AsQueryable().FirstOrDefault(x => x.Id.Equals(id)); 
```

好的，我将包含项目中的实际代码：

```
 public class MongoDbRepository<T, T2> : IRepository<T, T2>
    where T : IEntity<T2> // T - Type of entity, T2 - Type of Id field
{        
    protected readonly MongoCollection<T> Collection;

    public MongoDbRepository(MongoDatabase db, string collectionName = null)
    {
        MongoDbRepositoryConfigurator.EnsureConfigured(db);   // Calls BsonClassMap.RegisterClassMap, creates indexes if needed  

        if (string.IsNullOrEmpty(collectionName))
        {
            collectionName = typeof(T).Name;
        }

        Collection = db.GetCollection<T>(collectionName);
    }

    public T GetById(T2 id)
    {
        using (Profiler.StepFormat("MongoDB: {0}.GetById", Collection.Name))
        {
            // TODO Use FindOneByIdAs<T>
            return Collection.AsQueryable().FirstOrDefault(x => x.Id.Equals(id));
        }
    }

    // some more methods here ...
}

// ...
var repo = new MongoDbRepository<SomeEntity,string>(); // Actually it's injected via DI container
string id = "510a9fe8c87067106c1979de";

// ...
var entity = repo.GetById(id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:46:06.953

给定一张地图：

```
var classmap = BsonClassMap.LookupClassMap(typeof(T));
// // This is an indexed array of all members, so, you'd need to find the Id
var member = map.AllMemberMaps[0]; 
var serOpts = ((RepresentationSerializationOptions).SerializationOptions);
if (serOpts.Representation == BsonType.ObjectId) { ... } 
```

使用上面的基本逻辑，您可以确定成员的序列化类型。

# php - PHP - mysql_query 返回 0 行

> ID：14644556
> 
> 赞同：4
> 
> 时间：2013-02-01T10:44:44.457
> 
> 标签：php, mysql

我正在使用`mysql_query()`函数在 php 中运行查询，但它返回零行，而当我在 phpMyAdmin 中运行相同的查询时，我得到一行。不知道是什么弄错了。我在 sqlfiddle 上使用查询创建了相同的表结构

`SELECT * FROM cart_discount WHERE email_counter < 1 AND cart_time BETWEEN '2013-01-31 00:00:00' AND '2013-02-01 23:59:59'`

[http://sqlfiddle.com/#!2/cceb7/4](http://sqlfiddle.com/#!2/cceb7/4)

请指导php在哪里制造麻烦..

这就是查询的生成和执行方式。

```
$date1 = date('Y-m-d 00:00:00', strtotime(' -1 day')); 
$date2 = date("Y-m-d 23:59:59");

$query = "SELECT *
            FROM cart_discount
            WHERE email_counter < 1
            AND cart_time >= '$date1'
            AND cart_time <= '$date2'";

$ssql = mysql_query($query, $con) or die('Problem running query: ' . mysql_error());

if (mysql_num_rows($ssql) > 0) {
//do something
} else {
echo 'No rows found';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:31:09.913

作为来自[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)的参考， mysql_fetch_array 返回一个与获取的行相对应的数组，并将内部数据指针向前移动。所以请确保你没有在 mysql_num-rows 之前使用它。

如果使用 mysql_unbuffered_query()，mysql_num_rows() 将不会返回正确的值，直到检索到结果集中的所有行。

* * *

* * *

警告 :: mysql_num_rows()

此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

```
mysqli_stmt_num_rows()
PDOStatement::rowCount() 
```

* * *

* * *

使用 SQL_CALC_FOUND_ROWS 和 FOUND_ROWS( ) 不会在 MySQL 上触发竞争条件，因为这几乎违背了它们的全部目的。

它们的使用结果实际上是每个连接会话唯一的，因为进程不可能在 PHP 中共享任何内容。就 PHP 而言，每个请求都代表一个与 MySQL 的新连接，因为每个请求都与自己的进程隔离。

要对此进行模拟，请创建以下脚本：

```
<?php

$Handle = mysql_connect( "localhost" , "root" , "" );
mysql_select_db( "lls" );

if( isset( $_GET[ 'Sleep' ] ) ) {
    mysql_query( "SELECT SQL_CALC_FOUND_ROWS `bid` From `blocks` Limit 1" );
} else {
    mysql_query( "SELECT SQL_CALC_FOUND_ROWS `aid` From `access` Limit 1" );
}

if( isset( $_GET[ 'Sleep' ] ) ) {
    sleep( 10 ); // Simulate another HTTP request coming in.
    $Result = mysql_query( "SELECT FOUND_ROWS( )" );
    print_r( mysql_fetch_array( $Result ) );
}

mysql_close( );

?> 
```

为与您的环境匹配的内容设置连接和查询信息。

使用 Sleep 查询字符串运行脚本一次，不使用它再运行一次。同时运行它们很重要。使用 Apache ab 或类似的东西，甚至更简单，只需打开两个浏览器选项卡。例如：

```
http://localhost/Script.php?Sleep=10
http://localhost/Script.php 
```

如果存在竞争条件，则脚本的第一个实例的结果将等于脚本的第二个实例的结果。

例如，脚本的第二个实例将执行以下 SQL 查询：

```
<?php

mysql_query( "SELECT SQL_CALC_FOUND_ROWS `aid` From `access` Limit 1" );

?> 
```

这发生在脚本的第一个实例处于休眠状态时。如果存在竞争条件，当脚本的第一个实例唤醒时，它执行的 FOUND_ROWS( ) 的结果应该是第二个脚本实例执行的 SQL 查询中的行数。

但是当你运行它们时，情况并非如此。脚本的第一个实例返回其 OWN 查询的行数，即：

```
<?php

mysql_query( "SELECT SQL_CALC_FOUND_ROWS `bid` From `blocks` Limit 1" );

?> 
```

所以事实证明不存在竞争条件，并且几乎不需要为解决这个“问题”而提出的每个解决方案。

祝你好运，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:00:57.783

尝试先打印这些变量`$date1`，`$date2`然后再使用`mysql_query`. 如果与数据库存在某种格式不匹配，请查看它正在打印什么，然后更改它。也许这可能是唯一的原因。除了这个**建议：** 你可以做很多事情来调试你的问题。打印您正在执行的实际查询。复制它并在 phpmyadmin 中执行它。比较差异。

# javascript - 加载脚本后调用javascript函数

> ID：14644558
> 
> 赞同：93
> 
> 时间：2013-02-01T10:44:51.483
> 
> 标签：javascript, jquery, html

我有一个 html 页面，我通过如下所示的 javascript 动态附加 html

```
<script type="text/javascript" src="/myapp/htmlCode"></script> 
```

我想调用一个js函数，例如loadedContent(); 一旦上面的脚本添加了动态 html。

有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-02-01T10:53:10.770

您可以在不使用 head.js javascript 的情况下实现此目的。

```
function loadScript( url, callback ) {
  var script = document.createElement( "script" )
  script.type = "text/javascript";
  if(script.readyState) {  // only required for IE <9
    script.onreadystatechange = function() {
      if ( script.readyState === "loaded" || script.readyState === "complete" ) {
        script.onreadystatechange = null;
        callback();
      }
    };
  } else {  //Others
    script.onload = function() {
      callback();
    };
  }

  script.src = url;
  document.getElementsByTagName( "head" )[0].appendChild( script );
}

// call the function...
loadScript(pathtoscript, function() {
  alert('script ready!'); 
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-03-02T13:26:33.113

我有同样的问题......我的解决方案（没有 jQuery）：

```
<script onload="loadedContent();" src ="/myapp/myCode.js"  ></script> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-12-12T13:39:09.320

如果你在 2021 年阅读这篇文章，可能你更习惯 Promises。如果您的所有目标浏览器都支持 ES6 或者您正在使用 polyfill，则更适合使用更现代的方法。

该解决方案与*@JaykeshPatel*答案类似，但它基于`Promise`s：

```
// definition
function loadScript(scriptUrl) {
  const script = document.createElement('script');
  script.src = scriptUrl;
  document.body.appendChild(script);

  return new Promise((res, rej) => {
    script.onload = function() {
      res();
    }
    script.onerror = function () {
      rej();
    }
  });
}

// use
loadScript('http://your-cdn/jquery.js')
  .then(() => {
    console.log('Script loaded!');
  })
  .catch(() => {
    console.error('Script loading failed! Handle this error');
  }); 
```

您可以在回调的参数中传递一些上下文变量`res`，或者如果您的库导入了一些全局符号，您可以在那里引用它。

例如，由于 jQuery 引入了`$`全局符号，您可以为其调用`res($)`并创建一个本地范围（如果您使用 TypeScript 并且不想在每个文件中声明模块变量，则可以这样编写`const $ = await loadScript(..)`）。

如果您不想传递任何参数，则可以像这样缩短代码：

```
script.onload = res;
script.onerror = rej; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-01T10:51:15.290

尝试这样的事情

```
var script = document.createElement('script');

if(script.readyState) {  //IE
script.onreadystatechange = function() {
  if ( script.readyState === "loaded" || script.readyState === "complete" ) {
    script.onreadystatechange = null;
    alert(jQuery);
  }
};
 } else{//others
script.onload = function() {
  alert(jQuery); 
}
}
script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"
document.documentElement.appendChild(script); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-01T10:49:51.370

实际上你可以把它`loadedContent()`作为你正在加载的脚本的最后一行（这是 JSONP 背后的一种概念）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-31T11:39:41.893

我的答案是[Jaykesh Patel 答案](https://stackoverflow.com/a/14644704/162049)的延伸。我已经实现了这段代码以加载**多个 javascript**。希望这可以帮助某人：

```
// RECURSIVE LOAD SCRIPTS
function load_scripts( urls, final_callback, index=0 )
{
    if( typeof urls[index+1] === "undefined" )
    {
        load_script( urls[index], final_callback );
    }
    else
    {
        load_script( urls[index], function() {
            load_scripts( urls, final_callback, index+1 );
        } );
    }
}

// LOAD SCRIPT
function load_script( url, callback )
{
    var script = document.createElement( "script" );
    script.type = "text/javascript";
    if(script.readyState) // IE
    {
        script.onreadystatechange = function()
        {
            if ( script.readyState === "loaded" || script.readyState === "complete" )
            {
                script.onreadystatechange = null;
                callback();
            }
        };
    }
    else // Others
    {  
        script.onload = function() { callback(); };
    }
    script.src = url;
    document.getElementsByTagName( "head" )[0].appendChild( script );
    debug("javascript included: "+url);
}

// EXAMPLE  
var main = function()
{
    console.log("main function executed");
}
var js = [ "path/to/script-1", "path/to/script-2", "path/to/script-3" ];
load_scripts( js, main ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-10T15:00:44.963

这就是你所需要的

```
await new Promise((resolve) => {
    let script = document.createElement("script");

    script.onload = () => {
        resolve();
    };

    script.src = "https://example.net/app.js";

    document.head.appendChild(script);
}); 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2019-11-30T21:20:28.923

```
 $.getScript("your script",function () {
      "your action";
  }); 
```

# javascript - 链接阅读更多关于时事通讯 HTML

> ID：14644559
> 
> 赞同：0
> 
> 时间：2013-02-01T10:44:51.230
> 
> 标签：javascript, html, gmail, newsletter, mhtml

我想在我的时事通讯 (HTML) 上插入一个典型链接“阅读更多...”，该链接在我的电子邮件中展开/隐藏我的新闻，并提供更多信息（更多文本）。对于邮件平台（gmail，outlook ..？

我知道如何使用这样的 javascript 在网页上执行此操作，但在电子邮件上这不起作用。

```
< html>
...

< script type='text/JavaScript'>
function verocultar(cual) {
var c=cual.nextSibling;

if(c.style.display=='none') {
c.style.display='block';
} else {
c.style.display='none'; }
return false;
}

</ script>

...

< p>Fusce tempor ....< / p>

< a  onclick="return verocultar(this);" href="javascript:void(0);">< img src="images/read-more-btn.gif" alt="Read More" width="102" height="27" border="0">< / a> < p>As you look out on that coupon- and candy-trimmed future, we're sure you're reflecting on all that has gone by this year: All the milestones and memories. All the mistakes and monstrosities.
     Cloth.< / p>

....

< / html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:09:58.247

Javascript 在大多数（如果不是全部）电子邮件客户端中不起作用。

编辑：来自 Campaign Monitor 的 Ros 有一种[适用于 mac 客户端](http://mobile.smashingmagazine.com/2011/08/18/from-monitor-to-mobile-optimizing-email-newsletters-with-css/)的 css 驱动技术（大约是页面下方的三分之一）

# php - 电子邮件确认自动发票

> ID：14644562
> 
> 赞同：0
> 
> 时间：2013-02-01T10:44:57.897
> 
> 标签：php, magento, checkout, observers

成功下订单后，我需要在 Magento 中以编程方式对某些产品类型的订单开具发票。这是针对虚拟礼品卡的，为了将礼品卡号码通过电子邮件发送出去，订单必须在管理后端开具发票。

我认为“虚拟商品”已经有了这样的功能，但我的产品有“礼品卡”类型，而不是“虚拟”类型，因此我必须自己做。

到目前为止，我已经设法确保该产品只能单独订购，因此订单中不会混入任何实物产品。此外，我还能够在结账时检测到礼品卡，以隐藏任何非直接或不可靠的付款方式。

现在我所要做的就是添加一个观察者来检查订单状态更改为“已收到付款（保留在帐户中）”或只是从任何先前的订单状态中“收到付款”，例如“付款待处理”。只是 Magento 中没有这样的事件 - 至少据我通过搜索得知。

所以我想我会将自动发票代码连接到 Magento 发送订单确认电子邮件的位置 - 但我根本找不到那个位置。

关于我可以在哪里插入代码以自动为订单开票的任何建议？最好在收到付款方面尽可能“安全” - 但我会解决任何问题，并且总是可以手动返回并阻止与可疑欺诈和订单相关的礼品卡，而这些礼品卡以某种方式未收到付款。

提前感谢您提供有关如何完成此操作的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:27:55.007

我认为最好的选择是观察事件`sales_order_place_after`, `sales_order_payment_place_end`，它在下订单付款时被触发（[见这里](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Sales/Model/Order.php#L1092)）。要 100% 确保向您的观察者添加代码以检查到期订单是否为零`$order->getTotalDue() == 0`

# asp.net - 在 asp.net 中的 jqgrid 中没有出现总页数

> ID：14644569
> 
> 赞同：0
> 
> 时间：2013-02-01T10:45:36.943
> 
> 标签：asp.net, jqgrid

我做了一个`jqGrid`，但它没有显示网格中的总页数。结果，网格不会移动到下一页（因为它保持为零）。但是，我注意到它可以正确计算记录数。

我在下面附上了我的代码。

```
public struct JQGridResults
{
    public int page;
    public int total;
    public int records;
    public JQGridRow[] rows;
}
public struct JQGridRow
{
    public string id;
    public string[] cell;
}
[Serializable]
public class User
{
    public string id { get; set; }
    public string username { get; set; }
    public string ordinal { get; set; }
    public string authcode { get; set; }
}

public class ModCust : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        HttpRequest request = context.Request;
        HttpResponse response = context.Response;

        string _search = request["_search"];
        string numberOfRows = request["rows"];
        string pageIndex = request["page"];
        string sortColumnName = request["sidx"];
        string sortOrderBy = request["sord"];

        int totalRecords;
        //Collection<User> users = GetDummyUsers(numberOfRows, pageIndex, sortColumnName, sortOrderBy, out totalRecords);
        Collection<User> users = GetUsers(numberOfRows, pageIndex, sortColumnName, sortOrderBy, out totalRecords);
        string output = BuildJQGridResults(users, Convert.ToInt32(numberOfRows), Convert.ToInt32(pageIndex), Convert.ToInt32(totalRecords));
        response.Write(output);
    }
    private string BuildJQGridResults(Collection<User> users, int numberOfRows, int pageIndex, int totalRecords)
    {

        JQGridResults result = new JQGridResults();
        List<JQGridRow> rows = new List<JQGridRow>();
        foreach (User user in users)
        {
            JQGridRow row = new JQGridRow();
            row.id = user.id;
            row.cell = new string[4];
            row.cell[0] = user.id;
            row.cell[1] = user.username;
            row.cell[2] = user.ordinal;
            row.cell[3] = user.authcode;
            rows.Add(row);
        }
        result.rows = rows.ToArray();
        result.page = pageIndex;
        result.total = (totalRecords + numberOfRows - 1) / numberOfRows;
        result.records = totalRecords;
        JavaScriptSerializer serializer = new JavaScriptSerializer() { MaxJsonLength = Int32.MaxValue, RecursionLimit = 100 };
       // return new JavaScriptSerializer().Serialize(result);
        return serializer.Serialize(result);
    }

    private Collection<User> GetDummyUsers(string numberOfRows, string pageIndex, string sortColumnName, string sortOrderBy, out int totalRecords)
    {
        var data = new Collection<User> {
                new User(){ username = "Bill", authcode = "Gates", id= "1", ordinal = "Bill Gates"}
            };
        totalRecords = data.Count;
        return data;
    }
    private Collection<User> GetUsers(string numberOfRows, string pageIndex, string sortColumnName, string sortOrderBy, out int totalRecords)
    {
        Collection<User> users = new Collection<User>();
        string connectionString = "Server=localhost;Port=3306;Database=projecttt;UID=root;Pwd=techsoft;pooling=false";

        using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            using (MySqlCommand command = new MySqlCommand())
            {
                command.Connection = connection;
                command.CommandText = "select id,username,ordinal,authcode from processeddata_table ";
                command.CommandType = CommandType.Text; // StoredProcedure;

                MySqlParameter paramPageIndex = new MySqlParameter("@PageIndex", MySqlDbType.Int32);
                paramPageIndex.Value = Convert.ToInt32(pageIndex);
                command.Parameters.Add(paramPageIndex);

                MySqlParameter paramColumnName = new MySqlParameter("@SortColumnName", MySqlDbType.VarChar, 50);
                paramColumnName.Value = sortColumnName;
                command.Parameters.Add(paramColumnName);

                MySqlParameter paramSortorderBy = new MySqlParameter("@SortOrderBy", MySqlDbType.VarChar, 4);
                paramSortorderBy.Value = sortOrderBy;
                command.Parameters.Add(paramSortorderBy);

                MySqlParameter paramNumberOfRows = new MySqlParameter("@NumberOfRows", MySqlDbType.Int32);
                paramNumberOfRows.Value = Convert.ToInt32(numberOfRows);
                command.Parameters.Add(paramNumberOfRows);

                MySqlParameter paramTotalRecords = new MySqlParameter("@TotalRecords", MySqlDbType.Int32);
                totalRecords = 0;
                paramTotalRecords.Value = totalRecords;
                paramTotalRecords.Direction = ParameterDirection.Output;
                command.Parameters.Add(paramTotalRecords);

                connection.Open();

                using (MySqlDataReader dataReader = command.ExecuteReader())
                {
                    User user;
                    while (dataReader.Read())
                    {
                        user = new User();
                        user.id = Convert.ToString(dataReader["id"]);
                        user.username = Convert.ToString(dataReader["username"]);
                        user.ordinal = Convert.ToString(dataReader["ordinal"]);
                        user.authcode = Convert.ToString(dataReader["authcode"]);
                        users.Add(user);
                    }
                }
               // totalRecords =(int)(paramTotalRecords.Value);
                 //totalRecords = 0; 

            }

            return users;
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:51:07.887

我想你不小心评论了这一行

```
// totalRecords =(int)(paramTotalRecords.Value); 
```

请更改为

```
totalRecords =(int)(paramTotalRecords.Value); 
```

**编辑**版

改变

```
totalRecords =(int)(paramTotalRecords.Value); 
```

到

```
totalRecords = users.Count; 
```

# java - 骆驼路线不在 Google App Engine 上运行吗？

> ID：14644570
> 
> 赞同：1
> 
> 时间：2013-02-01T10:45:37.990
> 
> 标签：java, google-app-engine, apache-camel, noclassdeffounderror

我应该先说我正在使用 Camel 2.10.3 和 GAE SDK 1.7.1。

我刚刚将以下代码打包到我的`CamelServlet`中，并将 WAR 部署到我的本地开发应用程序服务器实例以用于 GAE：

```
public class CamelServlet extends HttpServlet {
    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws IOException {
        RouteBuilder routeBuilder = new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from("direct:start").process(new Processor() {
                    @Override
                    public void process(Exchange arg0) throws Exception {
                        logger.warning("I am inside a Camel route!");
                    }
                }).to("direct:end");
            }
        };

        CamelContext camelContext = new DefaultCamelContext();

        try {
            camelContext.addRoutes(routeBuilder);
            camelContext.start();
            Thread.sleep(10000);
            camelContext.stop();
        }
        catch(Exception e) {
            logger.warning("Error: " + e.getMessage());
        }
    }
} 
```

当我去`http://localhost:8888/camel`（这是我有`CamelServlet`映射的地方）时，我得到一个堆栈跟踪：

```
java.lang.NoClassDefFoundError: java.lang.management.ManagementFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.camel.management.DefaultManagementAgent.findOrCreateMBeanServer(DefaultManagementAgent.java:364)
    at org.apache.camel.management.DefaultManagementAgent.createMBeanServer(DefaultManagementAgent.java:348)
    at org.apache.camel.management.DefaultManagementAgent.doStart(DefaultManagementAgent.java:253)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.management.DefaultManagementStrategy.start(DefaultManagementStrategy.java:209)
    at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:62)
    at org.apache.camel.management.ManagementStrategyFactory.create(ManagementStrategyFactory.java:40)
    at org.apache.camel.impl.DefaultCamelContext.createManagementStrategy(DefaultCamelContext.java:2490)
    at org.apache.camel.impl.DefaultCamelContext.getManagementStrategy(DefaultCamelContext.java:2310)
    at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1499)
    at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1444)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1412)
    at com.myapp.server.servlets.CamelServlet.doGet(Unknown Source)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

*限制*？！？！骆驼路线/公共汽车不应该在 GAE 上运行吗？！？Camel 有一个 GAE 组件 (Camel-GAE)，我*认为*这是一种验证形式，您实际上可以在 GAE 上运行 Camel。但现在我担心它只是为了从 GAE 端点消费，而不是实际上要在 GAE 上运行......

因此，要么不可能在 GAE 上运行/启动 Camel 路由，要么我需要一种特殊的方式来配置路由对象（`DefaultCamelContext`等）以不违反 GAE 限制类。或者，正在发生完全不同的事情。有什么想法吗？提前致谢！

**更新**

通过禁用 JMX 后，`camelContext.disableJMX();`我得到一个新的（非常相似的）异常：

```
java.lang.NoClassDefFoundError: javax.naming.InitialContext is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.camel.impl.JndiRegistry.createContext(JndiRegistry.java:103)
    at org.apache.camel.impl.JndiRegistry.getContext(JndiRegistry.java:92)
    at org.apache.camel.impl.JndiRegistry.lookup(JndiRegistry.java:65)
    at org.apache.camel.impl.JndiRegistry.lookup(JndiRegistry.java:47)
    at org.apache.camel.impl.PropertyPlaceholderDelegateRegistry.lookup(PropertyPlaceholderDelegateRegistry.java:62)
    at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1557)
    at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1444)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1412)
    at com.myapp.server.servlets.CamelServlet.doGet(Unknown Source)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:23:45.163

关闭 JMX，你应该没问题。

```
// spring xml
<camel:camelContext id="camelContext">
   <!-- JMX is not supported in GAE -->
   <camel:jmxAgent id="agent" disabled="true"/>
   ...

// or in your case, java DSL
CamelContext camelContext = new DefaultCamelContext(new SimpleRegistry());
camelContext.disableJMX(); 
```

**更新：** 如果您使用的是 DefaultCamelContext，您可能希望避免使用默认的 JNDI 注册表。而是在创建上下文时创建一个 SimpleRegistry（参见上面的代码）。spring config camel context 默认没有这个，因为它使用 spring 注册表。

有效的证明： [http ://camelcloud.appspot.com/](http://camelcloud.appspot.com/)

# android - Android Listview 包含布局点击列表项

> ID：14644574
> 
> 赞同：2
> 
> 时间：2013-02-01T10:45:45.777
> 
> 标签：android, android-listview

这是一个非常奇怪的问题。我在列表视图中有一个用于一行的 XML 布局，我使用包含添加了另一个布局。

如果没有这个包含的布局，列表项点击工作。有了它，不要。这只是一个布局。

一些代码：

```
<!--
<include
    layout="@layout/card_loyalty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
-->

<ImageView
    android:id="@+id/pocketImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="58dp"
    android:scaleType="matrix"
    android:src="@drawable/holder_pocket" /> 
```

这很好用，如果我删除评论部分，不会检测到列表项点击

卡忠诚度 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="206dp">

  <TextView
    android:id="@+id/cardName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/card_details_card_name"
    android:textSize="15sp" />

  <TextView
    android:id="@+id/cardNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/card_details_card_number"
    android:textSize="18sp" />

  <ImageButton
    android:id="@+id/btnCardImage"
    android:layout_width="wrap_content"
    android:src="@drawable/card_add" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:19:39.297

我解决了。出于某种原因，ImageButton 造成了问题。我将其更改为 ImageView，现在我可以再次单击列表项。

# mobile - 更改连接时，Web 会话如何保持一致？

> ID：14644581
> 
> 赞同：0
> 
> 时间：2013-02-01T10:46:11.377
> 
> 标签：mobile, web, wifi, 3g

在移动设备上浏览时，可能会在 3G 和 WiFi 连接之间多次切换，以及相关的 IP 地址更改。

当连接发生变化时，网站如何维护用户的会话，因为它似乎是与服务器的新连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:47:57.123

用户会话基于随机代码。

该代码由浏览器作为标识符发送到网站。

[维基百科](http://en.wikipedia.org/wiki/Session_ID)

# android - 在片段中访问对话框内的元素

> ID：14644582
> 
> 赞同：1
> 
> 时间：2013-02-01T10:46:13.427
> 
> 标签：android, nullpointerexception, android-alertdialog

我想访问我在我的片段中放置在对话框中的微调器元素。但是，只要单击按钮，应用程序就会崩溃并导致空指针异常。我想在按钮的 onclick 侦听器中访问对话框视图

```
public class Plan extends Fragment {

Button add;
Button can;
Spinner spin;
View view;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    view = inflater.inflate(R.layout.plan, container, false);

    add = (Button)view.findViewById(R.id.bAddPlan);

    //addItemsOnSpinner(view);

    add.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(getActivity());

            alertDialogBuilder.setTitle("Add Materials ");

            LayoutInflater inflater = getActivity().getLayoutInflater();

            alertDialogBuilder
                .setView(inflater.inflate(R.layout.dialog, null))
                .setPositiveButton("Add",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                    }
                  })

                .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        // if this button is clicked, just close the dialog box and do nothing
                        dialog.cancel();
                    }
                });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();
                spin = (Spinner)alertDialog.findViewById(R.id.spinner1);

                alertDialog.show();

        }
    });

    return view;

}

@Override
public void onStart() {
    super.onStart();

} 
```

}

# android - android中有没有类似于Cal/CardDAV的东西

> ID：14644585
> 
> 赞同：0
> 
> 时间：2013-02-01T10:46:31.547
> 
> 标签：android, ios, sync, caldav, carddav

我有一个专为 iOS 设计的应用程序。我有 CalDAV 和 CardDAV 功能作为它的一部分，用于将事件和联系人从我的应用程序同步到设备。我现在正在创建一个 android 应用程序，想知道是否有类似的东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:53:50.643

我想我可以使用 CalendarProvider 和 ContactProvider 但如果有人能对此有所了解会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T21:27:26.377

有适用于 Android 的免费应用程序，称为 CalDAV-Sync 和 CardDAV-Sync。他们安装了它的提供程序，因此默认的 Android UI 用于日历和联系人管理。

# c# - Windows Phone 中的 XML 解析

> ID：14644587
> 
> 赞同：0
> 
> 时间：2013-02-01T10:46:32.710
> 
> 标签：c#, windows-phone-7, xml-parsing, linq-to-xml

我必须解析 XML，因为它使用了一些有效的代码，但问题不是我们嵌套了 XML，这个代码无法解析所有数据。所以请建议我如何分割它。

**XML**

```
<Author>
  <Book id="101" name="Computer" subcategories="2">
    <Book id="600" name="java" subcategories="0" contents="10 books"/>
    <Book id="601" name="php" subcategories="0" contents="5 books"/>
  </Book>
  <Book id="201" name="Language" subcategories="2">
    <Book id="700" name="Hindi" subcategories="0" contents="6 books"/>
    <Book id="701" name="English" subcategories="0" contents="4 books"/>
  </Book>
  <Book id="301" name="Music" subcategories="2">
    <Book id="800" name="life" subcategories="0" contents="10 books"/>
    <Book id="801" name="Wild" subcategories="0" contents="5 books"/>
  </Book>
  <Book id="401" name="Story" subcategories="2">
    <Book id="900" name="My Life" subcategories="0" contents="1 books"/>
    <Book id="901" name="One Day" subcategories="0" contents="1 books"/>
  </Book>
</Author> 
```

**解析器方法：**

```
public void parser()
        {
            XElement nodes = XElement.Load("file.xml");

            var node = from nd in nodes.DescendantNodes() select nd;

            foreach (XElement nds in node)
            {
                string name = nds.Attribute("name").Value;
                int id=Convert.ToInt32(nds.Attribute("id").Value);
                MessageBox.Show("" + name);
                MessageBox.Show("" + id);
                if (nds.HasElements)
                {
                     getChild(nds.DescendantNodes(),id);
                }

            }
 public void getChild(IEnumerable<XNode> node,int id)
        {

            foreach (XElement nds in node)
            {

                IEnumerable<XNode> nd=from list in nds.DescendantNodes() select list;
                int temp = Convert.ToInt32(ids);

                    foreach (XElement ss in nd)
                    {
                        string name = ss.Attribute("name").Value;
                        MessageBox.Show("" + name);
                    }

                if (nds.HasElements)
                {
                    getChild(nds.DescendantNodes(),id);
                }
            }
        } 
```

我有上面的 XML 并使用上面的代码进行解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:07:03.870

**也许你正在寻找这个：**

```
XElement doc = XElement.Parse(@"<Author>
                                  <Book id=""101"" name=""Computer"" subcategories=""2"">
                                    <Book id=""600"" name=""java"" subcategories=""0"" contents=""10 books""/>
                                    <Book id=""601"" name=""php"" subcategories=""0"" contents=""5 books""/>
                                  </Book>
                                  <Book id=""201"" name=""Language"" subcategories=""2"">
                                    <Book id=""700"" name=""Hindi"" subcategories=""0"" contents=""6 books""/>
                                    <Book id=""701"" name=""English"" subcategories=""0"" contents=""4 books""/>
                                  </Book>
                                  <Book id=""301"" name=""Music"" subcategories=""2"">
                                    <Book id=""800"" name=""life"" subcategories=""0"" contents=""10 books""/>
                                    <Book id=""801"" name=""Wild"" subcategories=""0"" contents=""5 books""/>
                                  </Book>
                                  <Book id=""401"" name=""Story"" subcategories=""2"">
                                    <Book id=""900"" name=""My Life"" subcategories=""0"" contents=""1 books""/>
                                    <Book id=""901"" name=""One Day"" subcategories=""0"" contents=""1 books""/>
                                  </Book>
                                </Author>");
var query = doc.Descendants();
foreach(XElement ele in query){
    Console.WriteLine(string.Format("Name: {0}\nValue: {1}\n",ele.Name.LocalName.ToString(),ele));
    if (ele.HasAttributes){
        var query1 = ele.Attributes();
        foreach (XAttribute att in query1)
        {
            Console.WriteLine(string.Format("Attribute: {0}\nValue: {1}\n", att.Name.LocalName.ToString(), att.Value));
        };
    };
}; 
```

# python - 如何在 Python 中找到预期的文件传输持续时间？

> ID：14644595
> 
> 赞同：0
> 
> 时间：2013-02-01T10:47:05.977
> 
> 标签：python

我正在使用 rsync`rsync`在 Python 中传输文件。我有基本的用户界面，用户可以在其中选择文件并启动传输。我想显示预期的持续时间来传输他们选择的所有文件。我知道所有文件的总大小（以字节为单位）。向他们展示预期的文件传输持续时间的聪明方法是什么？它不必非常精确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:09:39.250

要计算任何事情的估计完成时间，您只需要跟踪传输当前完成的数据所花费的时间量，并将您对其余数据的估计基于过去的速度。一旦你掌握了这个基本方法，你可以通过各种方式调整你的估计，以考虑加速、拥塞和其他影响——例如，将过去 100 秒内传输的数据量分解为 20 秒增量并计算加权平均速度。

我不熟悉在 Python 中使用 rsync。您`os.exec*()`是使用 pysync ( [http://freecode.com/projects/pysync](http://freecode.com/projects/pysync) ) 之类的东西来调用它吗？如果您正在生成 rsync 进程，您将很难获得细粒度数据（尤其是在传输大文件时）。我想您可以`rsync --progress`以某种偷偷摸摸的方式生成并获取/解析进度线，但这似乎非常尴尬。

# java - Cassandra + Hector，在测试中强制压缩以检查空行是否被删除

> ID：14644596
> 
> 赞同：3
> 
> 时间：2013-02-01T10:47:05.960
> 
> 标签：java, cassandra, integration-testing, hector

我们想要测试如果一个列具有 TTL（生存时间）属性，它最终将与包含它的空行一起从 cassandra 中完全删除。

据我了解，测试这种行为的算法是

*   保存对象时，为列设置TTL
*   等待TTL时间过去，检查返回值是否为null
*   等待 GC_GRACE_SECONDS perion 通过
*   检查该行是否也被删除

我没有检查最后一项。

正如我发现的那样（例如，[这里](http://cassandra-user-incubator-apache-org.3065146.n2.nabble.com/will-compaction-delete-empty-rows-after-all-columns-expired-td7130847.html)或[这里](http://comments.gmane.org/gmane.comp.db.cassandra.user/23298)以及其他地方），我需要运行压缩。已经提出了类似的问题（例如[Hector (Cassandra) Delete Anomaly](https://stackoverflow.com/questions/7341439/hector-cassandra-delete-anomaly)），但我没有找到任何帮助，谷歌搜索也没有太大帮助。

所以问题是，我如何从我的集成测试中强制压缩（使用 hector）以确保它的行为符合预期？还是有其他方法可以做到这一点？

PS 截断列族不是一种选择。

* * *

这是详细信息。

我的测试：

```
private static final String KEYSPACE = "KEYSPACE";
private static final String COLUMN_FAMILY = "COLUMN_FAMILY";

private static final int GC_CRACE_SECONDS = 5;

// sut
private CassandraService cassandraService;

// dependencies
private Cluster cluster = HFactory.getOrCreateCluster("tstCltr", 
    "localhost:9160");

private Keyspace keyspace;

@BeforeClass
public static void setupBeforeClass() {
    EmbeddedCassandraDaemon.getEmbeddedCassandraDaemon();
}

@Before
public void setUp() throws Exception {
    keyspace = createKeyspace(KEYSPACE, cluster, 
        new QuorumAllConsistencyLevelPolicy());
    cassandraService = new CassandraService(cluster, KEYSPACE, 
        COLUMN_FAMILY, GC_CRACE_SECONDS);
}

@Test
public void rowGetsRemovedAfterGCGraceSeconds() throws Exception {
    Object obj = "OBJECT";
    String rowKey = "key";
    String columnName = "columnName";
    logger.info("before persisting rows count is {}" + countRows());

    cassandraService.persistObjectWithTtl(rowKey, columnName, obj, 5);

    logger.info("after persisting rows count is {}" + countRows());

    Object value = retrieve(rowKey, columnName);
    assertNotNull(value);

    logger.info("before TTL passes rows count is {}" + countRows());

    TimeUnit.SECONDS.sleep(6);

    Object nullValue = retrieve(rowKey, columnName);
    assertNull(nullValue);

    logger.info("after TTL passes rows count is {}" + countRows());

    TimeUnit.SECONDS.sleep(10);

    logger.info("wait 10 more seconds... rows count is {}" + countRows());
    System.out.println("================================" + countRows());

    TimeUnit.SECONDS.sleep(120);

    int countRows = countRows();
    logger.info("wait 2 more minutes... rows count is {}" + countRows);
    assertEquals(0, countRows);
} 
```

持久化代码：

```
public void persistObjectWithTtl(Object rowKey, Object columnName, 
        Object obj, int ttl) {
    LOGGER.debug("Persist {} / {}", rowKey, columnName);
    HColumn<Object, Object> column = createColumn(columnName, obj, 
            SERIALIZER, SERIALIZER);
    column.setTtl(ttl);
    executeInsertion(rowKey, column);
}

private void executeInsertion(Object rowKey, HColumn<Object, Object> column) {
    Mutator<Object> mutator = createMutator(keyspace, SERIALIZER);
    mutator.addInsertion(rowKey, this.columnFamilyName, column);
    mutator.execute();
} 
```

为列族设置 GcGraceSeconds：

```
private void addColumnFamily(String keySpaceName, String columnFamilyName, 
            int gcGraceSeconds) {
    ColumnFamilyDefinition columnFamilyDefinition = 
        createColumnFamilyDefinition(keySpaceName, columnFamilyName);

    ThriftCfDef columnFamilyWithGCGraceSeconds = 
        new ThriftCfDef(columnFamilyDefinition);
    columnFamilyWithGCGraceSeconds.setGcGraceSeconds(gcGraceSeconds);

    cluster.addColumnFamily(columnFamilyWithGCGraceSeconds);
} 
```

[以及在 SO 上找到](https://stackoverflow.com/questions/8418448)的用于计算行数的代码：

```
public int countRows() {
    int rowCount = 100;

    ObjectSerializer serializer = ObjectSerializer.get();
    RangeSlicesQuery<Object, Object, Object> rangeSlicesQuery =
            HFactory.createRangeSlicesQuery(keyspace, serializer, 
                serializer, serializer)
                    .setColumnFamily(COLUMN_FAMILY)
                    .setRange(null, null, false, 10)
                    .setRowCount(rowCount);

    Object lastKey = null;

    int i = 0;
    while (true) {
        rangeSlicesQuery.setKeys(lastKey, null);

        QueryResult<OrderedRows<Object, Object, Object>> result = 
            rangeSlicesQuery.execute();
        OrderedRows<Object, Object, Object> rows = result.get();
        Iterator<Row<Object, Object, Object>> rowsIterator = rows.iterator();

        if (lastKey != null && rowsIterator != null) {
            rowsIterator.next();
        }

        while (rowsIterator.hasNext()) {
            Row<Object, Object, Object> row = rowsIterator.next();
            lastKey = row.getKey();
            i++;

            if (row.getColumnSlice().getColumns().isEmpty()) {
                continue;
            }
        }

        if (rows.getCount() < rowCount) {
            break;
        }

    }

    return i;
} 
```

谢谢。

* * *

更新：

原因是数据量不足以运行压缩，所以我需要放入更多数据，并更频繁地将表刷新到磁盘。所以我最终得到了以下测试用例：

```
@Test
public void rowGetsRemovedAfterGCGraceSeconds() throws Exception {
    final int expectedAmount = 50000;

    logger.info("before persisting rows count is {}", countRows());

    for (int i = 0; i < expectedAmount; i++) {
        String rowKey = RandomStringUtils.randomAlphanumeric(128);
        Object obj = RandomStringUtils.randomAlphanumeric(1000);
        cassandraService.persistObjectWithTtl(rowKey, COLUMN_NAME, obj, 20);

        if (i % 100 == 0) {
            StorageService.instance.forceTableFlush(KEYSPACE, COLUMN_FAMILY);
        }
    }

    logger.info("causing major compaction...");
    StorageService.instance.forceTableCompaction(KEYSPACE, COLUMN_FAMILY);
    logger.info("after major compaction rows count is {}", countRows());

    waitAtMost(Duration.TWO_MINUTES)
        .pollDelay(Duration.TWO_SECONDS)
        .pollInterval(Duration.ONE_HUNDRED_MILLISECONDS)
        .until(new Callable<Boolean>() {
            @Override
            public Boolean call() throws Exception {
                int countRows = countRows();
                logger.info("the rows count is {}", countRows);
                return countRows < expectedAmount;
            }
        });
} 
```

完整代码：[测试类和 sut](https://gist.github.com/alexeygrigorev/5353822)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:04:22.780

由于您使用的是 Java，因此您可以使用MBean的`forceTableCompaction(keyspace, columnFamily)`方法轻松地通过 JMX 强制压缩。`org.apache.cassandra.db.StorageService`

# java - 如何在 GXT 中设置 FormPanel 的宽度？（setWidth 方法使应用程序崩溃）。以及如何启用滚动？

> ID：14644601
> 
> 赞同：0
> 
> 时间：2013-02-01T10:47:16.267
> 
> 标签：java, gxt

我正在使用 GXT 2.2.4。

我尝试设置自定义的宽度，但 setWidth 方法使我的应用程序崩溃。

这是表单代码：

```
public class CustomForm extends FormPanel {

public CustomForm () {
    setHeading("My custom form"); 
}

@Override
protected void onRender(Element parent, int pos) {
    super.onRender(parent, pos);

        setFrame(true);  
        setCollapsible(true); 

        setWidth("350");  //This crashes the application
        setScrollMode(Scroll.AUTOY); //Not work

        final TextField<String> firstName = new TextField<String>();  
        firstName.setFieldLabel("First Name *");  
        firstName.setAllowBlank(false);  
        firstName.setValue("Peter");
        add(firstName);  

        final TextField<String> lastName = new TextField<String>();  
        lastName.setFieldLabel("Last Name *");
        lastName.setAllowBlank(false);  
        lastName.setValue("Jones");
        add(lastName);  

        Radio radio1 = new Radio();  
        radio1.setBoxLabel("Male");  
        radio1.setValue(true);  

        Radio radio2 = new Radio();  
        radio2.setBoxLabel("Female");

        final RadioGroup rgGender = new RadioGroup();  
        rgGender.setFieldLabel("Gender *");  
        rgGender.add(radio1);  
        rgGender.add(radio2);  
        rgGender.setSelectionRequired(true);
        add(rgGender);  

        final DateField dateOfBirth = new DateField();  
        dateOfBirth.setFieldLabel("Date of Birth");  
        add(dateOfBirth);  

        final TextField<String> phone = new TextField<String>();  
        phone.setFieldLabel("Phone");  
        add(phone);  

        Button btnClear = new Button("Clear");

        btnClear.addSelectionListener(new
                SelectionListener<ButtonEvent>() {
                    public void componentSelected(ButtonEvent ce) {
                        reset();

                    }
            });

        addButton(btnClear);  
} 
```

这是入口点代码：

```
private final VerticalPanel formPanel = new VerticalPanel();
@Override
public void onModuleLoad() {    

    Viewport viewport = new Viewport();
    viewport.setLayout(new RowLayout(Orientation.HORIZONTAL));

    formPanel.add(new CustomForm());

    formPanel.setSpacing(10); 
    viewport.add(formPanel);

    RootPanel.get("gwtcontent").add(viewport);
} 
```

出现此异常（使用 mvn gwt:run -Dgwt.noserver=true）：

```
onModuleLoad() threw an exception
Exception while loading module com.apenimed.rls.demo.client.DemoEntryPoint. See Development Mode for details.
java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396) at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:193) at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:510) at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:352) at java.lang.Thread.run(Thread.java:722) Caused by: java.lang.AssertionError: The element may not be null at com.extjs.gxt.ui.client.core.El.(El.java:219) at com.extjs.gxt.ui.client.core.El.subChild(El.java:3027) at com.extjs.gxt.ui.client.widget.ContentPanel.getFrameSize(ContentPanel.java:882) at com.extjs.gxt.ui.client.widget.ContentPanel.onResize(ContentPanel.java:1164) at com.extjs.gxt.ui.client.widget.BoxComponent.setSize(BoxComponent.java:509) at com.extjs.gxt.ui.client.widget.BoxComponent.setSize(BoxComponent.java:559) at com.extjs.gxt.ui.client.widget.BoxComponent.afterRender(BoxComponent.java:685) at com.extjs.gxt.ui.client.widget.ScrollContainer.afterRender(ScrollContainer.java:199) at com.extjs.gxt.ui.client.widget.Component.render(Component.java:1111) at com.extjs.gxt.ui.client.widget.Component.render(Component.java:986) at com.extjs.gxt.ui.client.widget.layout.TableLayout.renderComponent(TableLayout.java:411) at com.extjs.gxt.ui.client.widget.Layout.renderAll(Layout.java:352) at com.extjs.gxt.ui.client.widget.layout.TableLayout.onLayout(TableLayout.java:402) at com.extjs.gxt.ui.client.widget.Layout.layout(Layout.java:114) at com.extjs.gxt.ui.client.widget.Container.doLayout(Container.java:351) at com.extjs.gxt.ui.client.widget.Container.layout(Container.java:443) at com.extjs.gxt.ui.client.widget.LayoutContainer.layout(LayoutContainer.java:246) at com.extjs.gxt.ui.client.widget.Container.layout(Container.java:426) at com.extjs.gxt.ui.client.widget.LayoutContainer.layout(LayoutContainer.java:241) at com.extjs.gxt.ui.client.widget.VerticalPanel.onRender(VerticalPanel.java:158) at com.extjs.gxt.ui.client.widget.Component.render(Component.java:1023) at com.extjs.gxt.ui.client.widget.Layout.renderComponent(Layout.java:361) at com.extjs.gxt.ui.client.widget.Layout.renderAll(Layout.java:352) at com.extjs.gxt.ui.client.widget.Layout.onLayout(Layout.java:318) at com.extjs.gxt.ui.client.widget.layout.RowLayout.onLayout(RowLayout.java:258) at com.extjs.gxt.ui.client.widget.Layout.layout(Layout.java:114) at com.extjs.gxt.ui.client.widget.Layout$3.handleEvent(Layout.java:170) at com.extjs.gxt.ui.client.util.DelayedTask$1.run(DelayedTask.java:30) at com.extjs.gxt.ui.client.util.DelayedTask.delay(DelayedTask.java:52) at com.extjs.gxt.ui.client.widget.Layout.onResize(Layout.java:344) at com.extjs.gxt.ui.client.widget.Layout$2.handleEvent(Layout.java:135) at com.extjs.gxt.ui.client.widget.Layout$2.handleEvent(Layout.java:1) at com.extjs.gxt.ui.client.event.BaseObservable.callListener(BaseObservable.java:178) at com.extjs.gxt.ui.client.event.BaseObservable.fireEvent(BaseObservable.java:86) at com.extjs.gxt.ui.client.widget.Component.fireEvent(Component.java:456) at com.extjs.gxt.ui.client.widget.BoxComponent.setSize(BoxComponent.java:522) at com.extjs.gxt.ui.client.widget.BoxComponent.setSize(BoxComponent.java:559) at com.extjs.gxt.ui.client.widget.BoxComponent.afterRender(BoxComponent.java:685) at com.extjs.gxt.ui.client.widget.ScrollContainer.afterRender(ScrollContainer.java:199) at com.extjs.gxt.ui.client.widget.Component.render(Component.java:1111) at com.extjs.gxt.ui.client.widget.Component.onAttach(Component.java:1637) at com.extjs.gxt.ui.client.widget.Container.onAttach(Container.java:470) at com.extjs.gxt.ui.client.widget.Viewport.onAttach(Viewport.java:91) at com.google.gwt.user.client.ui.Widget.setParent(Widget.java:470) at com.google.gwt.user.client.ui.Panel.adopt(Panel.java:127) at com.google.gwt.user.client.ui.ComplexPanel.add(ComplexPanel.java:97) at com.google.gwt.user.client.ui.AbsolutePanel.add(AbsolutePanel.java:97) at com.apenimed.rls.demo.client.DemoEntryPoint.onModuleLoad(DemoEntryPoint.java:117) ... 9 more 
```

那么如何解决这个问题呢？

我还有一个问题，当表单面板不适合屏幕时，如何启用垂直滚动？setScrollMode(Scroll.AUTOY) 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:30:51.620

我只是在渲染后尝试设置宽度。

```
CustomForm c =new CustomForm();
c.setWidth("350");
formPanel.add(c); 
```

如果从 onRender() 中取出 setWidth 不起作用，我会为 onModuleLoad() 中的所有内容执行此操作。事实上，我在你的 onRender() 方法中没有看到任何需要在那里而不是在 onModuleLoad(); 中的东西。

# ruby - 如何在 Ruby (Rails/Sinatra) 中实现客户端-服务器 API 和授权？

> ID：14644606
> 
> 赞同：5
> 
> 时间：2013-02-01T10:47:35.173
> 
> 标签：ruby, api, authentication, sinatra

我需要关于如何在 ruby​​ 中实现“客户端-服务器”网络应用程序的建议。任何指南和最佳实践都受到高度赞赏。我对 Ruby 方式和所需的 gem 感兴趣，因为它是一个理想的平台，以及实现这些东西的一般方式和逻辑。

遗憾的是，我不是一个优秀的 ruby​​ 程序员，也不是一个有多年经验的熟练系统设计师，所以我真的需要你的帮助，因为我仍然希望这件事最终会大放异彩。

应用程序的当前外观应该是这样的：

DB + Auth DB <-> API 应用程序 <-> 其他应用程序：

*   DB - 一个数据库或一组数据库，其中一个数据库用于一组用户（区域）。
*   Auth DB - 一个包含个人用户数据和登录信息的数据库，即使主数据库将在区域之间拆分，也可能是单个数据库。
*   API 应用程序——这个东西维护了所有关于数据、访问控制和翻译的逻辑，可能为所有应用程序提供一个翻译库。
*   其他应用程序 - 一堆不同的应用程序，与 API 相关联，这可能是数据提供者，它们使用有关某些用户的一些数据和不同类型的 UI 来戳 API。所有应用程序都无法拥有自己的用户相关信息存储空间，并且只能通过 API 处理数据。

**API App：**看起来最好的工具是 Sinatra。问题是：

1.  如何以清晰的方式组织 API？Rails 为模型和控制器提供了很好的 REST 路径设置和文件夹结构。有什么技巧可以提高 API 构建的经验吗？
2.  如何维护访问权限？Warden 看起来不是一个好的选择，因为 API 客户端本身就是 Web 应用程序。所以我需要某种身份验证令牌。怎么可能做到？某种自定义 OAuth 提供程序？问题是，我不喜欢通过 API 存储和传递会话 cookie 的想法，每个请求都传递某种访问令牌。这也是

**其他应用程序：**主要是基于 Web 的 UI。这部分的逻辑选择是 Rails。主要问题是如何实现客户端身份验证检查。设计很酷，但是是否可以使其与令牌一起使用，还是更合适的工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:45:25.573

好的，这会有点长：

如果您已经熟悉 Rails，可以查看[Rails API gem](https://github.com/rails-api/rails-api)。该项目致力于从 Rails 中删除基于 JSON 的 RESTful API 不需要的额外内容。

这听起来可能很顺利，但它也有它的缺点。首先，您已经阅读了基本 Rails 功能所需的所有内容，您可能已经习惯了，例如`respond_to`. 这可能有点棘手，但是当您发现哪个 rails 模块最初提供了通常捆绑在 Rails 中的`ActionController::Base`.

话虽如此，让我举一个例子，说明我上周出于好奇为一个小型 API 项目做了什么：

## 初始情况

我们有一个主要完成的 Rails 应用程序。一切正常，但它基本上是单片的。一切都由 Rails 框架提供服务。对我们来说幸运的是，所有模型逻辑都捆绑在一个名为`core`. 该应用程序本质上允许登录的客户创建可通过最终用户视图搜索的产品。

目标是为此提供一个 RESTful API，它可以更有效地处理并发和更大的数据文件（即 CSV、XLS）。

## 介绍 Rails API

设计目标让我想到了 Rails API gem。基本安装的工作方式与 Rails 类似，只是调用了脚本`rails-api`，即：

```
rails-api new jsonapi 
```

对我来说，这里的优势是我可以使用`core`来自其他应用程序的模型，但没有什么能阻止我将自己的模型引入`jsonapi`应用程序。

话虽如此，你可以做所有标准的 Rails 好东西，比如路由等。它遵循相同的约定。话又说回来，标准路由最初只对 JSON 做出反应，这有时会有点令人困惑。

让我举一个处理产品的 API Controller 的例子：

```
class ProductsController < ApplicationController
  include ActionController::HttpAuthentication::Token
  before_filter :find_product, :except => [:create, :index]

  def index
    render :json => @products
  end

  def create
    @product = product.new params[:product]

    if @product.save
      render :json => @product, :status => :created
    else
      render :json => @product.errors, :status => :unprocessable_entity
    end
  end

  def show
    render :json => @product
  end

  def update
    if @product.update_attributes params[:product]
      render :json => @product, :status => :ok
    else
      render :json => @product.errors
    end
  end

  def destroy
    if @product.destroy
      render :json => @product, :status => :ok
    else
      render :json => {:note => I18n.t("messages.deletion_impossible")}, :status => :unprocessable_entity
    end
  end

protected
  def find_product
    @product = Product.find params[:id]
  end
end 
```

这没什么特别的。唯一需要注意的是`ActionController::HttpAuthentication::Token`明确包含的第二行。这是为了让您的 API 可以通过 HTTP 令牌得到保护。如果您想了解有关保护 API 的更多信息，我建议您阅读 Ryan Bates 的[Railscasts 指南](http://railscasts.com/episodes/352-securing-an-api?view=asciicast)。

本质上，您可以`ApplicationController`像这样提供一个前置过滤器：

```
class ApplicationController < ActionController::API  
  include ActionController::HttpAuthentication::Token::ControllerMethods
  [...]
  before_filter :restrict_access
  [...]
  def restrict_access
    authenticate_or_request_with_http_token do |token, options|
      # see if key is valid.
    end
  end
end 
```

同样，请注意第二行，您必须`ControllerMethods`手动包含，否则没有控制器会知道`authenticate_or_request_with_http_token`.

## 延期

您可能知道基于 Rails 约定扩展 API。它的工作方式完全相同，只是默认情况下故意丢失了一些东西。如果您需要更多的 JSON 模板灵活性，我建议添加[JBuilder](https://github.com/rails/jbuilder) ( [Railscast )。](http://railscasts.com/episodes/320-jbuilder?view=asciicast)

## 很好，但是客户呢？

就个人而言，当涉及到客户时，有很多选择。最终我发现它归结为你最喜欢什么。我个人可以在 Rails API 之上推荐一个小的[node.js](http://nodejs.org/)层，然后在它前面获得一个基于[主干.js 的单页应用程序。](http://backbonejs.org/)如果你愿意，你也可以试试[AngularJS 。](http://angularjs.org/)您还可以围绕它构建另一个 Rails 应用程序，并从控制器操作中调用 API。

它还取决于您想要定位的平台 - 想到 iOS/Android 的本机应用程序。

我做出的选择是 node.js + 主干。它目前对我当时和该项目最有意义。节点层本质上持有与 API 通信所需的 Token，主干应用程序有一个小库来与节点层通信。然而，它可能是一把双刃剑，这取决于你的 API 有多复杂。对于一个小例子，这似乎很好，但是为了将主干应用程序的调用传递给 Rails API，可能会有很多代码重复。

## 验证

对于身份验证，您可以制作基于客户的 API 密钥（令牌），然后将控制器逻辑限制为仅接受该密钥允许的数据操作。您可以通过节点层管理会话。编辑：这是授权，而不是身份验证。没有什么能真正阻止您将 Authlogic 与 Rails API 一起使用——我还没有测试过它，但它应该可以工作。

我承认我还没有完成这部分 - 我希望其他人可以回答这个架构问题:-)

我希望我能提供一些见解。

PS：如果你想测试你的 API，我强烈推荐[httpie](https://github.com/jkbr/httpie)（太棒了！）

# vb.net - 从 VB.net 导出报告

> ID：14644608
> 
> 赞同：0
> 
> 时间：2013-02-01T10:47:46.150
> 
> 标签：vb.net, forms, csv, export

有没有办法导出已填充到由选项卡拆分的 VB.net 表单应用程序中的数据？我有一个连接到 SQL 数据库并运行许多查询以在应用程序中填充标签的大型程序。

我想将数据导出到表单应用程序中每个表格页面的不同选项卡上的 Excel 工作表中。如果这是不可能的，那么通用的 .csv 导出就可以了。

我正在运行我的 SQL 查询并将其导入到这样的标签中 -

```
Dim myCmd23 As New SqlCommand("MySQL Query", myconn)
    Dim myDataA23 As New SqlDataAdapter(myCmd23)
    Dim myDataT23 As New DataTable()
    Dim myDataS23 As New DataSet()

    myDataA23.Fill(myDataT23)

    DataGridView1.DataSource = myDataT23

    Dim result23(2) As String

    result23(1) = DataGridView1.Rows(0).Cells(0).Value.ToString
    result23(2) = DataGridView1.Rows(0).Cells(1).Value.ToString

    Label1.Text = result23(1)
    Label2.Text = result23(2) 
```

执行了许多这样的SqlCommands。表单应用程序看起来像这样 -

![表格申请](../Images/e31a02ec01724c70c2d48b89a5a94510.png)

上面显示了单独的选项卡，我想尝试在导出中分离这些数据？

在每个单独的 SQL 查询中都考虑了日期和过滤器，因此它们不会被打扰。

如果有人有可能的解决方案，那就太好了。

谢谢

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:24:56.197

[这里](http://www.dreamincode.net/forums/blog/1693-cache-cow/)有几个关于在 VB.NET 中将数据表导出到 Excel 的博客

# session - 如何将实体与数据库链接？

> ID：14644609
> 
> 赞同：0
> 
> 时间：2013-02-01T10:47:45.477
> 
> 标签：session, symfony, entity-relationship, entitymanager, flush

我有一个具有许多关系的复杂实体，因此我需要在许多页面中创建多个表单来创建一个。因此，我使用会话来保留我的实体。一切正常，但是到了刷新的时候，实体管理器返回“通过关系的实体未配置为级联持久化”，认为某些实体是新的，但它们实际上存储在 db 中！

例如，我使用 $u->setGroup(Group $group); 创建了一个具有多对一组的用户；（$group 是数据库中的现有组）。当我将它放入会话中，然后将其放回另一个页面然后刷新它时，实体管理器会尝试创建一个全新的组，但不知道它是 db 中的现有组。

我用一个小技巧来克服这个：

```
$u = $this->get('session')->get('userToAdd');
$group = $em->getRepository('MyBundle\Entity\Group')->find($u->getGroup()->getId());
$u->setGroup($group); 
```

这样，EM 将识别存储在 db 中的组，并且刷新会正常进行，但是由于我的实体具有如此多的关系，因此对每个实体都执行此操作非常方便。

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:30:12.830

在查找组之前尝试刷新 $u 对象。

```
$em->refresh($u) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T11:24:10.987

你所要做的：

```
$em->merge($u); 
```

# tfs - 为什么代码分析不适用于 TFS 2012 构建？

> ID：14644611
> 
> 赞同：3
> 
> 时间：2013-02-01T10:47:54.467
> 
> 标签：tfs, visual-studio-2012, code-analysis

正如您需要在 TFS 2012 构建服务器上安装 VS 2012 以在构建过程中运行代码分析的相关问题之一中所建议的那样。

由于某种原因，它仍然无法正常工作，也没有给出任何错误。

代码分析的构建设置设置为始终，但它仍然不运行。

但是，我在 VS 2012 的 TFS 构建服务器上打开了相同的项目并尝试运行代码分析，它运行成功。

我需要让它工作。

任何人都可以建议我是否在这里遗漏任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:27:35.610

您的项目配置将需要一个代码分析规则集来运行。

您可以在项目选项中设置每个配置： ![在此处输入图像描述](../Images/ec8fc2e53b5c4ac435eceaaefd516226.png)

# java - 为什么java simpledateformat解析方法不支持时区id

> ID：14644614
> 
> 赞同：2
> 
> 时间：2013-02-01T10:48:05.303
> 
> 标签：java, parsing, simpledateformat

java的`SimpleDateFormat` `parse`方法支持时区短名、长名和偏移量。为什么不支持时区 ID？

例如。

```
SimpleDateFormat sdf = new SimpleDateFormat("z");
sdf.parse("IST");                       //works fine

SimpleDateFormat sdf = new SimpleDateFormat("z");
sdf.parse("Indian Standard Time");      //Also works fine 
```

为什么java不支持这个：

```
SimpleDateFormat sdf = new SimpleDateFormat("z");
sdf.parse("Asia/Kolkata");              //does not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:40:27.833

我们应该询问 JDK 开发人员为什么他们决定 SimpleDateFormat 不应该支持时区 ID。SimpleDateFormat API 也不清楚它对“z”的期望是什么时区格式。但我知道它支持什么。它根据 DateFormatSymbols.getZoneStrings() 返回的数据检查时区。它是一个时区数组，每个时区是一个字符串数组

```
 •[0] - time zone ID
    •[1] - long name of zone in standard time
    •[2] - short name of zone in standard time
    •[3] - long name of zone in daylight saving time
    •[4] - short name of zone in daylight saving time 
```

区域 ID 未本地化；其他是本地化名称。有关详细信息，请参阅 API。

我们可以得到所有可用的时区

```
 DateFormatSymbols dfs = DateFormatSymbols.getInstance();
    for(String[] s : dfs.getZoneStrings()) {
        System.out.println(Arrays.toString(s));
    } 
```

结果（取决于语言环境）

```
...
[Asia/Calcutta, India Standard Time, IST, India Daylight Time, IDT]
... 
```

所以 SimpleDateFormat（在我的语言环境中）允许印度标准时间、IST、印度夏令时间或 IDT 用于“z”，但它不允许亚洲/加尔各答（时区 ID）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-23T08:04:05.160

如果您使用 Java 8，则可以使用新的日期和时间 API。“VV”表示时区 ID。

请参阅[https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)

例子：

```
DateTimeFormatter formatter = DateTimeFormatter.ofPattern("MM/dd/yyyy HH:mm VV");
ZonedDateTime zonedDateTime = ZonedDateTime.parse("06/23/2015 21:00 US/Pacific", formatter); 
```

# android - 在完成应用程序任务后在启动时强制关闭

> ID：14644616
> 
> 赞同：0
> 
> 时间：2013-02-01T10:48:08.503
> 
> 标签：android, performance, nullpointerexception, taskkill

一位客户在使用任务杀手杀死应用程序后向我发送了关于我的应用程序强制在启动时关闭的反馈。我告诉他任务杀手是危险的，对手机性能没有任何好处，因为 Android 不会像 Windows 那样管理 RAM，但他不会卸载 Task Killer。

强制关闭是这样的：

A) 用户正常使用我的应用

B）用户任务杀死我的应用程序

C）用户再次启动我的应用程序

D) 启动时强制关闭

E) 用户再次启动我的应用程序

F）一切都按预期工作

我发现问题是我的静态对象变为空，因为它们从 RAM 中清除，导致 NullPointerExceptions 强制关闭应用程序。但是，我有很多地方可以访问这些静态对象（如果不是这种情况，我什至不会使用静态对象），因此 NullPointerExceptions 可能会在很多地方发生。

此行为仅在 Android 2.3.7 或更低版本中发生。Android 4.0 自己的任务杀手（你可以通过长按 Home 访问的那个）正确地杀死应用程序，然后在没有任何强制关闭的情况下启动它。

我该如何规避这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:37:41.693

我解决了。

该解决方案不是最佳的，但它有效：

我创建了一个这样的界面：

```
public interface StaticAccessTo<T>{
    public void returnStatic(T object);
} 
```

我没有为我的静态对象使用吸气剂，而是：

```
public void getWhatever(StaticAccessTo<Whatever> callback){
    if (whatever == null){
        loadWhateverFromServer(callback);
    } else {
        callback.returnStatic(whatever);
    }
}

private void loadWhateverFromServer(StaticAccessTo<Whatever> callback){
    new AsyncTask<Void,Void,Void>(){

    public Void doInBackground(Void... params){
        whatever = loadWhatever();
        return null;
    }

    public void onPostExecute(Void result){
        callback.returnStatic(whatever);
    }

    }.execute();
} 
```

因此，如果`whatever`不为 null，它将`returnStatic(whatever)`立即调用并可以`whatever`在主线程中访问。否则，它将自动从网络加载它并 `returnStatic(whatever)`在加载时从主线程调用。

# java - 杀死对象创建的线程

> ID：14644618
> 
> 赞同：2
> 
> 时间：2013-02-01T10:48:14.917
> 
> 标签：java, multithreading, web-crawler, crawler4j

我使用 crawler4j 创建了一个自定义爬虫。在我的应用程序中，我创建了很多控制器，一段时间后，系统中的线程数将达到最大值，JVM 将抛出异常。即使我调用`ShutDown()`控制器并将其设置为`null`and call `System.gc()`，我的应用程序中的线程仍保持打开状态并且应用程序将崩溃。

我使用了`jvisualvm.exe`（Java VisualVM）并看到我的应用程序在某一时刻达到了**931**个线程。

有没有办法可以立即杀死由`CrawlController`crawler4j 项目的对象创建的所有线程？（或与此相关的任何其他对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-25T20:19:15.760

我刚刚花了 2 个小时来解决完全相同的问题。我终于找到了错误的来源。如果创建一个控制器，但不启动它，`shutdown()`不会杀死任何创建的线程。相反，您必须使用以下内容：

```
controller.shutdown();
controller.getPageFetcher().shutdown(); 
```

`controller`您的 CrawlController 实例在哪里。
我也在 crawler4j 项目页面上提出了这个问题，看起来这将在 3.6 版的发布中得到修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T13:17:05.050

以法莲是对的。Crawler4j 有两个问题：

1.  未在 CrawlController 中关闭 Environment 对象。
2.  未在 CrawlController 中关闭 PageFetcher 对象。

[https://code.google.com/r/yonid-crawler4j/](https://code.google.com/r/yonid-crawler4j/)

我已经尽力创建了一个在启动后正确关闭的版本（startunblocking）以及在创建控制器但不运行启动功能的情况下使用 forceShutdown。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:57:21.040

`ShutDown()`好心地要求线程完成他们的工作，然后会击落，但是如果线程有无穷无尽的任务，他们永远不会完成呢？你试过用`shutdownNow()`吗？这将在完成之前中断正在运行的任务并立即关闭线程。

# linq - 对对象类型的 raven 查询引发异常

> ID：14644619
> 
> 赞同：0
> 
> 时间：2013-02-01T10:48:16.540
> 
> 标签：linq, ravendb

文件结构：

```
class UserAccountInfo
{
       public String Id { get; set; }
       public AccountType AccountType { get; set; }Servicetax
       public String MainAccountMobileNo { get; set; }
       public UserStatus Status { get; set; }
       public String EmailId { get; set; }
       public String DisplayName { get; set; }
       **public Object User { get; set; }**
} 
```

对象存储帐户类型中提到的任何类型的实例。可以使用 Accountype for ex 找到存储在对象中的类型；如果 Accountype 是客户，那么存储在对象中的实例将是 AccountinfoCustomer 等等。因此，我尝试使用它进行查询，但从 raven 获得以下异常。

```
var Result = sess.Query<UserAccountInfo>().Where(x => x.AccountType == usertype && ((AccountInfoCustomer)x.User).Customerstatus == CustomerStatus.Pending); 
```

{"Url: \"/indexes/dynamic/UserAccountInfos?query=AccountType%253ADistributor%2520AND%2520User).Customerstatus%253APending&start=0&pageSize=128&aggregation=None\"\r\n\r\nSystem.ArgumentException: 字段 ') _Customerstatus' 未编入索引，无法在 Raven.Database.Indexing.Index.IndexQueryOperation.AssertQueryDoesNotContainFieldsThatAreNotIndexes() 处查询未编入索引的字段\r\n

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:27:00.607

这应该有效。在当前稳定的 RavenDB 2.0.2230 中测试。

在这里进行测试：[https ://gist.github.com/4692351](https://gist.github.com/4692351)

你用的是旧版本吗？

# java - 您如何使用talk.google.com 执行OAUTH2.0 Smack XMPP 身份验证

> ID：14644621
> 
> 赞同：1
> 
> 时间：2013-02-01T10:48:17.590
> 
> 标签：java, oauth, xmpp, smack

我无法找到有关如何使用 Smack API 使用访问令牌实现 OAuth2.0 身份验证的文档。我能找到的唯一示例是 Facebook 示例，看起来它们的实现与 Google 的 open auth 有很大不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:11:03.173

好的，我发现解决方案及其遵循与 SASLPlainAuthentication 相同的模式，但将机制更改为 x-oauth2 和 base64 编码从谷歌的所有重定向链获取的访问令牌。

# java - 实例化内部类时出现 java.lang.ClassNotFoundException

> ID：14644622
> 
> 赞同：2
> 
> 时间：2013-02-01T10:48:17.740
> 
> 标签：java, classnotfoundexception

我的内部课程有以下问题。这是代码：

```
 public class PGZUserManagerBean {

            // joomla login as separate thread
            private class JoomlaLogin extends Thread {

                private AuthJoomla authJoomla;

                public JoomlaLogin(AuthJoomla authJoomla){
                    this.authJoomla = authJoomla;
                }

                @Override
                public void run(){
                    this.authJoomla.authJoomla();
                }
            }

        public void validateuser(){

            AuthJoomla authJoomla = new AuthJoomla();

            JoomlaLogin joomlaLogin = new JoomlaLogin(authJoomla);
            joomlaLogin.start();

        }

    } 
```

我正在`java.lang.ClassNotFoundException: PGZUserManagerBean$JoomlaLogin`运行时。我正在使用 Java 1.6。

提前感谢您的帮助。人

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:52:45.323

我强烈怀疑您已将类文件从一个地方复制到另一个地方（或将它们放入 jar 文件中），但您未能复制/包含`PGZUserManagerBean$JoomlaLogin.class`。

检查您在哪里运行代码，并查找 JVM 找不到的类文件。它肯定会出现在您的*编译*输出中。

# database - 我想将我的 adminhtml 表单数据保存到数据库中的多个表中

> ID：14644624
> 
> 赞同：0
> 
> 时间：2013-02-01T10:48:20.270
> 
> 标签：database, forms, magento, adminhtml

我在管理面板中创建了一个包含各种字段的表单。现在这里的字段不属于一个表。在保存时，我希望一些值进入一个特定的表，而其他值进入另一个表。我可以使用联接显示数据，但不知道如何将它们保存回来。

可以说，我有一个 tblUser 字段：

**tbl用户**

```
- user_id        INT(11)         Auto Increment
- username       VARCHAR(15)
- store_id       SMALLINT(5)
- bank_id        INT(11) 
```

**在这里，store_id 和 bank_id 分别对tblcore_store** (id, store_name) 和**tblBanks** (id, bank_name, bank_acc)的自增 id 具有外键约束。现在表单中的字段是：

*   用户名
*   商店编号
*   店铺名称
*   银行名称
*   银行账户

当管理员单击保存时，我希望表单的数据进入各自的表中，并且在 store_id 和 bank_id 中也有它们的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:59:19.947

首先，您必须将数据插入 tblcore_store 和 tblbanks 然后您可以通过表状态查找 id 或从两个表中获取最后一条记录。

现在获得两个 id 后，您可以将数据插入 tblUser

您可以在任何框架中执行以下步骤

1.  开始新的交易
2.  将数据插入第一个表
3.  获取最后一个插入 id
4.  使用上面点的最后一个插入 ID 将数据插入到第二个表中
5.  关闭交易
6.  从此模型函数返回交易状态或您可能需要的任何内容

不要忘记使用能够使用事务的数据库，否则这将无济于事。

# javascript - 无法使用“data-bind=source:”将 Kendo Mobile ListView 绑定到数据

> ID：14644626
> 
> 赞同：4
> 
> 时间：2013-02-01T10:48:27.467
> 
> 标签：javascript, mobile, mvvm, kendo-ui

我正在尝试将列表视图绑定到 ViewModel。我在代码中放置了一些硬编码数据，以确保它不是 Web 服务的问题。我没有看到任何控制台错误，所以我不知道如何解决这个问题。

理想情况下，我希望拥有尽可能多的代码来处理在 ViewModel 中获取数据，并且我希望尽可能接近您应该使用 KendoUI Mobile 框架的方式。

html

```
<div data-role="view" id="contactView" data-model="ContactViewModel" data-init="dataInit">
    <h1 id="ContactHallo">Contact Screen</h1>
    <ul id="contactDetailList" 
        data-role="listview" 
        data-style="inset" 
        data-template="contactDetailtemplate" 
        data-bind="source: rdata">
    </ul>
</div> 
```

JavaScript

```
 var ContactViewModel = kendo.observable({
         rdata: null,

         loadData: function () {
             var testData = [
                                {
                                    AssociatedContactType: "n\/a",
                                    AssociatedProperties: [],
                                    EmailAddress: "n\/a",
                                    FName: "User1",
                                    HomeNumber: "n\/a",
                                    LName: "LastName",
                                    MobileNumber: "+27 21 0823219213",
                                    WorkNumber: "n\/a"
                                }];
             var loadedData = new kendo.data.DataSource.create({ data: testData });
             loadedData.read();

             this.rdata = loadedData;
         }
     });

     function dataInit() {
         ContactViewModel.loadData();
     }

     var app = new kendo.mobile.Application($(document.body)); 
```

模板

```
<div>
    <h4>Added Record</h4>
    <a href="tel:#:data.MobileNumber#">#:data.MobileNumber#</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T02:19:50.780

知道为什么有人对原始问题投了反对票会很有趣。

我在这里的一篇博文中对此进行了介绍：[Kendo Mobile Gotchas, Tips, and Tricks](http://codingwithspike.wordpress.com/2012/12/31/kendo-mobile-gotchas-tips-tricks/)。

MVVM 数据绑定实际上发生*在*事件之前，`init`所以当绑定发生时你`ContactViewModel.rdata`仍然是。`null`但是，我认为如果您`.set()`在设置 rdata 时正确调用，它可能会解决您的问题：

```
loadData: function () {
    ...
    this.set('rdata', loadedData);
} 
```

该集合应触发 ListView 更新，因为`rdata`正在设置。

* * *

如果这不起作用，那么您可能会变得非常棘手并将 MVVM 数据绑定延迟到`init`事件发生，方法是自己执行而不是使用`data-model`声明方式。

为此，您将从视图*中删除* `data-model=`属性，而是在函数`kendo.bind()`末尾手动调用，如下所示：`init`

```
<div data-role="view" id="contactView" data-init="dataInit">

function dataInit(initEvt) {
    ContactViewModel.loadData();
    kendo.bind($(initEvt.view.element), ContactViewModel, kendo.mobile.ui);
} 
```

# glassfish - 在 Java EE 7 的 Websocket API 中获取远程对等点的 IP 地址

> ID：14644629
> 
> 赞同：1
> 
> 时间：2013-02-01T10:48:37.627
> 
> 标签：glassfish, websocket, ip-address

如何在 Websocket API for Java Glassfish 中获取远程对等点的 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-04T01:59:35.610

See [getRemoteAddr()](https://github.com/eclipse-ee4j/tyrus/blob/422e0d06889b42d5cd7c2c8123acd803945f821a/core/src/main/java/org/glassfish/tyrus/core/TyrusSession.java#L748)

You will need to cast your socket Session instance to a TyrusSession, which implements the standard JSR-356 Session interface.

You might need to upgrade Tyrus, as I am not sure if the version you have supports this method. I am using [Tyrus 1.7](https://tyrus.java.net/) and it works fine for me. Here is [how to upgrade](https://blogs.oracle.com/PavelBucek/entry/updating_tyrus_in_glassfish).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-18T10:30:42.010

基于[this answer](https://stackoverflow.com/questions/17936440/accessing-httpsession-from-httpservletrequest-in-a-web-socket-socketendpoint/17994303#17994303) to another question的另一种方法是获取HandshakeRequest的标头。您要查找的标头是以下任一标头。

```
origin: [IP Address]
x-forwarded-for: [Possibly a separate IP] 
```

为清楚起见，这是我的设置，以及我是如何发现这一点的：

*   MyMachine 上的 Wamp 2.5：6060。这承载了一个客户端 HTML 页面。
*   LabMachine:6060（正常连接）和 LabMachine:6443（安全连接）上的 Wamp 2.5。这充当代理。
*   MyMachine:8080（正常）和 MyMachine:8181 (SSL) 上的 GlassFish 4.0。这是终点。

我通过自己的机器、实验室机器和同事的机器连接到客户端页面。在每种情况下，WebSocket 请求的原始标头都是

> [http://MyMachine:6060](http://MyMachine:6060)

但是，在每种情况下，*x-forwarded-host*标头都不同，与实际客户端的 IP 地址相匹配。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T11:50:58.040

`WebSockets`基于 HTTP 请求。因此，您可能正在扩展某个`HttpServlet`或`WebSocketServlet`某个地方，因此从该获取 IP 的常用方法`HttpServletRequest`应该有效：

例子：

```
public class WebSocketsServlet extends HttpServlet {

    private final WebSocketApplication app = new WebSocketApplication();

    @Override
    public void init(ServletConfig config) throws ServletException {
        WebSocketEngine.getEngine().register(
            config.getServletContext().getContextPath() + "/context", app);
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        System.out.println("IP: " + req.getRemoteAddr());
        super.doGet(req, resp);
    }

} 
```

# php - 在两个 PHP 函数之间获取 HTML

> ID：14644632
> 
> 赞同：-4
> 
> 时间：2013-02-01T10:48:54.563
> 
> 标签：php, templates

```
<html> 
<body>

<?php startblock("content"); ?>

<p> Page content </p>

<?php endblock("content"); ?>

</body>
</html> 
```

我想获取两个 php 函数之间的内容。如果您查看上面的示例，我想`<p> page content <p>`在字符串中获取“”。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:51:48.800

您可以使用[输出缓冲](http://www.php.net/manual/en/ref.outcontrol.php)

```
<html> 
<body>

<?php ob_start(); ?>

<p> Page content </p>

<?php $html = ob_get_clean(); ?>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:51:42.153

像这样声明函数：

```
function startblock()
{
  ob_start();
}

function endblock()
{
  $content = ob_get_flush();
  return '+++' . $content . '+++';
} 
```

请注意，您不能嵌套它。据我所知，您不能拥有多个具有名称的输出缓冲区。因此，您添加的参数没有用。

# ios5 - 图像遮罩到黑色区域+iphone sdk

> ID：14644634
> 
> 赞同：2
> 
> 时间：2013-02-01T10:48:57.863
> 
> 标签：ios5, cgimage

有没有办法将某些图像掩蔽到另一个图像的特定部分。我有这样的图像：-

[图像 1](http://pixabay.com/en/old-black-triangle-historic-letter-39437/) ，我想将另一个[图像 2](http://www.highresolutionpics.info/wp-content/uploads/images/Flower-Wallpaper-flowers-249402_1024_768.jpg)遮盖到图像1 的黑色区域。

有可能吗？如果是，请告诉我这怎么可能。

我知道我可以像这样屏蔽图像：-[这](https://stackoverflow.com/questions/1136195/why-does-my-image-mask-make-my-image-black-where-the-mask-is-white) 但是我将允许我屏蔽整个图像。我想将图像屏蔽到图像的特定部分。

提前致谢

# wpf - 显示两个列表交集的 DataGridCheckBoxColumn 复选框

> ID：14644637
> 
> 赞同：2
> 
> 时间：2013-02-01T10:49:02.913
> 
> 标签：wpf, datagrid

我有两个`ObservableCollection<T>`，我们称它们为 List1 和 List2。List1 包含 List2 中的一些项目。我想做的是让`DataGrid`CheckBoxColumn 勾选 List1 和 List2 中的项目。其他列显示项目的 viewVode 信息。

实现这一目标的最佳方法是什么？顺便说一句`DataGrid`，在模板中定义，我正在使用 MVVM 方式。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:19:12.663

您可以使用转换器，例如

```
public class ItemToBooleanConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            // Here value is the item from List 1
            List<T> list2 = (List<T>)parameter;
            return list2.Contains(value as T);

        }

    } 
```

然后声明一个 CheckBoxColumn

```
<DataGrid ...>    
 <DataGrid.Columns>
  <DataGridCheckBoxColumn Binding="{Binding myItemfromList1, Converter={StaticResource ItemToBooleanConverter1}, ConverterParameter={StaticResource List2}}" />
 </DataGrid.Columns>
</DataGrid> 
```

您不能直接将 List2 绑定到转换器参数，但您可以声明一个 StaticResource 或以编程方式创建将 List2 作为参数传递的转换器。

# php - Phalcon\Session\Bag.. 如何使用它们？

> ID：14644640
> 
> 赞同：0
> 
> 时间：2013-02-01T10:49:24.650
> 
> 标签：php, phalcon

在我的项目中，我使用以下代码通过服务中的会话包访问会话变量：

```
public function __construct()
{
    // Create session bag
    $className = get_class($this);
    $this->storage = new Phalcon\Session\Bag($className);    
} 
```

但这给出了一个例外“访问'会话'服务需要依赖注入对象”。

好的，看来我们需要在这里设置一个DI。最简单的方法 - 在 DI 中定义不共享的 sessionBag 服务（然后将自动设置 $di）。但是我怎么能理解我应该以这种方式为会话包设置哪个名称？例子：

```
$di->set('sessionBag', function() use ($config) {
    $name = ''; // ???
    $bag = new \Phalcon\Session\Bag($name);
    return $bag;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:54:33.903

您可以让您的类继承自 Phalcon\DI\Injectable，当您访问持久性属性时，会隐式创建会话包：

```
class MyComponent extends Phalcon\DI\Injectable
{

    public function someMethod()
    {
        $this->persistent->someName = "peter";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T04:00:42.497

```
//Start the session the first time when some component request
// the session service
$di->setShared('session', function() {
    $session = new Phalcon\Session\Adapter\Files();
    $session->start();
    return $session;
}); 
```

例子：

auth.php：

```
public function __construct(){
    $this->_di = \Phalcon\DI::getDefault ();
    $this->user       = new \Phalcon\Session\Bag(get_class());
    $this->user->setDI($this->_di);
}

/**
 *
 * @param int
 *
 * @return bool
 */
public function authenticate($identity){
    $this->user->identity=$identity;
}
/**
 * @return boolean
 */
public function isAuthenticate(){
    return $this->user->identity?true:false;
} 
```

# iphone - NavigationBar setShadowImage 并不总是有效

> ID：14644641
> 
> 赞同：5
> 
> 时间：2013-02-01T10:49:27.913
> 
> 标签：iphone, ios6, uiimage, uinavigationbar

我正在尝试在我的表格视图中为导航栏设置自定义阴影图像，但它只显示在某些视图中。我创建了一个超类来为我的表格视图设置样式。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Set navigation bar background
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navigationbarbackground.png"] forBarMetrics:UIBarMetricsDefault];

    // Set navigation bar shadow imag
    [self.navigationController.navigationBar setShadowImage:[UIImage imageNamed:@"navigationbarshadow.png"]]; 
```

在我启动应用程序时看到的视图中，没有显示阴影。但是当我触摸导航栏中的 [+] 按钮以打开我的“*添加新项目*”表视图时，它确实显示了一个阴影。

有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-03T08:59:05.707

you need to set custom `backgroudImage` for UINavigationBar, then the `shadowImage` can work.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T12:57:25.913

外观代理应该可以工作。

只需在启动时在某个地方（例如在您的 AppDelegate 中）调用它。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
    [self customizeAppearance];
    return YES;
}

- (void) customizeAppearance 
{
    // Set the background image for *all* UINavigationBars
    [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigationbarbackground"] forBarMetrics:UIBarMetricsDefault];

    // Set the shadow image for *all* UINavigationBars
    [[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"navigationbarshadow.png"]];  

    //add other appearance stuff here...
} 
```

但是，如果您创建一个包含多个 UINavigationController 的故事板和一堆 segue 的推送导航控制器，您可能会得到一个损坏的视图控制器结构，这可能是这里的问题。

Another possible issue might be the `Clip Subviews` option of a Navigation Bar somewhere in your nib file or you storyboard. Make sure it is turned off if you want the shadow (image)!

![ClipSubviews](../Images/db4b8d56a86e9d3fa3e9c49ecbcf4913.png)

By the way, if you use imageNamed you don't need to include the file extension.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:12:40.343

试试这个 ！

```
[[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"navbar-iphone.png"]]; 
```

# perl - perl 中的调度函数，如何包含我们的列表

> ID：14644642
> 
> 赞同：0
> 
> 时间：2013-02-01T10:49:33.703
> 
> 标签：perl

我发现在 perl 中调度许多函数的最快方法是使用函数引用。剩下的问题是，我必须在调度程序和函数模块中的 ($func1, $func2, ...) 列表中包含函数名称。我找不到任何方法来包含它们，就像 C include 会做的那样。这是我的代码：主模块：

```
use strict;
our ($base);

$base = '/home/en/dtest/perl/forditas/utf8/forditas/test1';
require("$base/disph1.pl");
require("$base/fut1h1.pl");

for (my $j = 0; $j < 5; $j++){
   dispatch($j);
} 
```

调度模块：

```
use strict;
our ($base);
require("$base/fut1h1.pl");

our ($sref1, $sref2, $sref3, $sref4, $sref5);  # This is what I'd like to include

my %shash = (
   '0' => $sref1,
   '1' => $sref2,
   '2' => $sref3,
   '3' => $sref4,
   '4' => $sref5,
);

sub dispatch($){
  my ($ix) = @_;
  my ($a, $b, $c);
  $a = 1; $b = 2; $c = 3;
  my $ref = $shash{$ix};
  &$ref($a,$b, $c);
}

1; 
```

功能模块：

```
use strict;

our ($sref1, $sref2, $sref3, $sref4, $sref5);   # This is what I'd like to include

$sref1 = sub($$$) { 
   my ($a,$b,$c) = @_;
   print "sub1 $a,$b,$c\n"; 
};
$sref2 = sub($$$) { my ($a,$b,$c) = @_; print "sub2 $a, $b, $c\n"; };
$sref3 = sub {  print "sub3\n"; };
$sref4 = sub {  print "sub4\n"; };
$sref5 = sub {  print "sub5\n"; };

1; 
```

这是运行的结果：

```
$ perl enhufh1.pl
sub1 1,2,3
sub2 1, 2, 3
sub3
sub4
sub5 
```

提前感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:50:00.670

您确实应该使用 Perl 模块 -`*.pm`文件 - 并将它们包含在需要它们的地方`use`。使这些模块成为的子类[`Exporter`](https://metacpan.org/module/Exporter)允许它们将变量和子程序名称导出到调用包中。

看看这组三个来源，它们还为您的原始代码添加了一些改进。

请注意，您可以使用`@EXPORT`数组代替`@EXPORT_OK`，在这种情况下，相应的`use`语句不必列出要导入的符号。但是，最好在使用时列出符号，否则必须检查模块的代码以准确发现正在导入的内容。

**主文件**

```
use strict;
use warnings;

use lib '/home/en/dtest/perl/forditas/utf8/forditas/test1';

use Dispatcher qw/ dispatch /;

dispatch($_) for 0 .. 4; 
```

**/home/en/dtest/perl/forditas/utf8/forditas/test1/Dispatcher.pm**

```
package Dispatcher;

use strict;
use warnings;

require Exporter;
our @ISA = qw/ Exporter /;
our @EXPORT_OK = qw/ dispatch /;

use Utils qw/ sub1 sub2 sub3 sub4 sub5 /;

my @dtable = ( \&sub1, \&sub2, \&sub3, \&sub4, \&sub5 );

sub dispatch {
  my ($i) = @_;
  my ($a, $b, $c) = (1, 2, 3);
  $dtable[$i]($a, $b, $c);
}

1; 
```

**/home/en/dtest/perl/forditas/utf8/forditas/test1/Utils.pm**

```
package Utils;

use strict;
use warnings;

require Exporter;
our @ISA = qw/ Exporter /;
our @EXPORT_OK = qw/ sub1 sub2 sub3 sub4 sub5 /;

sub sub1 { 
   my ($a, $b, $c) = @_;
   print "sub1 $a,$b,$c\n"; 
}

sub sub2 {
  my ($a, $b, $c) = @_;
  print "sub2 $a, $b, $c\n";
}

sub sub3 {
  print "sub3\n";
}

sub sub4 {
  print "sub4\n";
}

sub sub5 { 
  print "sub5\n";
}

1; 
```

**输出**

```
sub1 1,2,3
sub2 1, 2, 3
sub3
sub4
sub5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:13:47.683

*   首先，将整数映射到元素是对哈希的滥用。你也可以使用数组。

*   其次，您似乎想将算法与实现隔离，将它们加入主脚本中。虽然这是令人钦佩的，但很明显，functions 模块*知道*它的用途。因此，在导出一种知识图谱时，最简单的情况是您的功能模块*知道*diapatch 模块。

您可以为此目的创建一个辅助函数：

```
use strict;
use warnings;

our @EXPORT_OK = qw<setup_dispatch dispatch>;
use parent 'Exporter';

my @dispatch_subs;
sub setup_dispatch { @dispatch_subs = @_; }

sub dispatch { 
    my ($a, $b, $c) = ( 1, 2, 3 );
    return $dispatch_subs[shift()]->( $a, $b, $c );
} 
```

现在您的功能模块可以调用设置功能：

```
use strict;
use warnings;
use Dispatch ();

Dispatch::setup_dispatch( 
  # I echo the caution about using prototypes
  sub ($$$) {   
     my ($a,$b,$c) = @_;
     print "sub1 $a,$b,$c\n"; 
  }
, sub ($$$) { my ($a,$b,$c) = @_; print "sub2 $a, $b, $c\n"; }
, sub {  print "sub3\n"; }
, sub {  print "sub4\n"; }
, sub {  print "sub5\n"; }
); 
```

您只需在主模块中使用它们，如下所示：

```
use strict;
use warnings;
require 'plugin_functions.pl';

use Dispatch qw<dispatch>;

... 
```

如果您只想使用“索引”通用名称，您真的不需要“名称”。只需将它们放在一个列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:23:13.100

你需要的是[`Exporter`](http://perldoc.perl.org/Exporter.html).

在您的模块中：

```
require Exporter;

@EXPORT = qw($sref1 $sref2 $sref3); 
```

*但是，可能值得考虑不同的设计：*

脚本：

```
set_dispatch(0,sub{ .... }); 
```

调度模块：

```
my @dispatch;  #If just indexing to numbers, use an array instead of a hash.

sub set_dispatch {
    $dispatch[$_[0]] = $_[1];
} 
```

主要模块：

```
for (0..4)    #equivalent to before, but more Perlish.
{
   dispatch($_);
} 
```

在我看来，使用函数调用来设置调度函数比导出一堆变量要好。

# formatting - 从 SQL Server Management Studio 导入 Excel 2007

> ID：14644647
> 
> 赞同：0
> 
> 时间：2013-02-01T10:49:49.633
> 
> 标签：formatting, excel-2007, ssms

我正在尝试将 SQL 查询中的一些结果导入到 excel 中，忽略换行符。

结果在 SQL Server 中看起来不错

典型记录具有从 HTML 地址中提取的以下列

```
<b>F1 Gran Premio de España Santander<sup style="font-size: 8px">TM</sup> 2013</b><br><span class="smallText">3 Day Entry<br>Grandstand F<br><strong>10% off race day prices!  Book now!</strong></span> 
```

当它被导入到excel中时，所有的换行符都会破坏格式......

我已经尝试过使用网格、文本以及导出到 .rpt 文件和导入。任何想法如何忽略换行符，谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T21:42:32.580

可以使用“XML 电子表格”格式以“狡猾”的形式导出 excel 数据。说明可以在这里找到：http: [//msdn.microsoft.com/en-us/library/office/aa140066 (v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx)

如果您只需要从 SSMS 导出数据，那么您可能会发现适用于 SSMS 的[SSMSBoost](http://www.ssmsboost.com)插件对您的情况很有用。我是这个插件的开发人员，我已经实现了“将 ResultsGrid 导出到 Excel”功能，它只是将 ResultsGrid 内容编写为XML 电子表格格式。（右键单击网格-> 脚本为-> XML 电子表格）。希望能帮助到你。（插件可以免费使用。）

SSMSBoost 的 PS 脚本引擎非常灵活，您可以创建自己的脚本模板。我已经创建了其中的几个，并且它们与插件一起安装：脚本为“插入”、“选择”、“属性：值”、“XML”、“XML 电子表格”、“HTML”。

# h.264 - 重构分段的 H.264 流

> ID：14644650
> 
> 赞同：1
> 
> 时间：2013-02-01T10:50:03.870
> 
> 标签：h.264

我将 H.264 流存储为文件。我正在尝试通过将此流添加到 MDAT BOX 来创建 MPEG4 文件。我创建了 MPEG-4 标准所需的其他标头。但我无法读取 MPEG-4 文件。

我解析了 H.264 流，发现文件中有多个 I 帧。在我看来，这是零散的 H.264 流。

有什么方法可以将这个分段的 H.264 流组合成一个 I 帧？

我已经浏览了链接[Problem to Decode H264 video over RTP with ffmpeg (libavcodec)](https://stackoverflow.com/questions/3493742/problem-to-decode-h264-video-over-rtp-with-ffmpeg-libavcodec)。

我实现了链接中提到的内容，但我仍然无法运行由此创建的 MPEG-4。

使用上述技术，我得到了 fragmentType = 5。我得到了以下 nalTypes (8, 2, 1, 0, 0, ...)。我得到指定的 startBit，对于其他片段，我得到 00（对于 StartBit|endBit）。我没有得到 endBit。

当我尝试使用 FFMPEG 重新转换创建的 MPEG-4 文件时，我收到以下错误：“标头损坏”。看起来 IDR 帧的重建工作不正常。

如果我遵循的方法有任何问题，请告诉我。

H.264 流文件大约 100KB。当使用 FFMPEG 将此文件转换为 MP4 时，我得到大约 38KB。这是否意味着 FFMPEG 再次重新编码文件以重新创建 MP4 文件？

使用链接中提到的上述技术，我创建的 MP4 本身约为 100KB。

请让我知道我在做什么这是错误的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:22:47.177

听起来您想将 H.264 基本流包装在 mp4 容器中，以便您可以播放它。像 mp4box ( [http://gpac.wp.mines-telecom.fr/mp4box/](http://gpac.wp.mines-telecom.fr/mp4box/) ) 这样的工具将使您能够将基本流包装成 mp4 文件。例如：

mp4box -add MySourcFile.h264 MyDestFile.mp4

# jquery - Grails 和 jQuery Datepicker 搞乱 CSS

> ID：14644653
> 
> 赞同：0
> 
> 时间：2013-02-01T10:50:07.957
> 
> 标签：jquery, css, grails, datepicker

我在我的 Grails 应用程序中添加了一个 jQuery Datepicker，但它似乎弄乱了 CSS，因为 datepicker 的 TH 和 TR 被突出显示。但我找不到导致此问题的确切 CSS 行（请参阅快照）：

有任何想法吗？

谢谢！

[http://dl.dropbox.com/u/1631432/datapiker.jpg](http://dl.dropbox.com/u/1631432/datapiker.jpg)

# android - 如何在 android tablelayout 中动态设置列的宽度？

> ID：14644656
> 
> 赞同：0
> 
> 时间：2013-02-01T10:50:12.187
> 
> 标签：android, android-layout

我有一个表格布局，其中列是动态添加的。我无法动态设置列/TextView 的宽度。

这是我的代码：

```
TableLayout employeeTable = (TableLayout) findViewById(R.id.main_table);

    TableRow header = new TableRow(this);
    header.setId(100);
    header.setBackgroundColor(Color.rgb(255, 165, 0));
    //header.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    TextView empCodeHeader = new TextView(this);
    empCodeHeader.setId(200);
    empCodeHeader.setText("Employee Code");
    empCodeHeader.setTextSize(16);
    empCodeHeader.setPadding(2,2,2,2);
    //empCodeHeader.setWidth(200);
    header.addView(empCodeHeader);

    TextView empNameHeader = new TextView(this);
    empNameHeader.setId(201);
    empNameHeader.setText("Employee Name");
    empNameHeader.setTextSize(16);
    empNameHeader.setPadding(2,2,2,2);
    //empNameHeader.setWidth(300);
    header.addView(empNameHeader); 
```

我可以使用 setWidth 进行设置，但我想动态设置它，例如 column1 为 30%，column2 为 70%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:55:32.380

使用[LayoutParams](http://developer.android.com/reference/android/widget/TableRow.LayoutParams.html)动态设置高度和宽度。

# hdfs - 如何强制 Apache Mahout 应用程序直接从 HDFS 读取

> ID：14644659
> 
> 赞同：0
> 
> 时间：2013-02-01T10:50:23.087
> 
> 标签：hdfs, mahout

我已经实现了一个 Apache Mahout 应用程序（附在下面），它执行一些基本的计算。为此，需要从我的本地计算机加载数据集。此应用程序以 jar 文件的形式出现，但随后在 hadoop 伪分布式集群中执行。终端命令是： $ hadoop jar /home/eualin/ApacheMahout/tdunning-MiA-5b8956f/target/mia-0.1-jar-with-dependencies.jar mia.recommender.ch03.IREvaluatorBooleanPrefIntro2 "/home/eualin/Desktop /链接-最终“

现在，我的问题是如何做同样的事情，但这次是通过从 HDFS 读取数据集（当然，我们假设数据集已经存储在 HDFS 中，例如在 /user/eualin/output/links-final 中） . 在这种情况下应该改变什么？这可能会有所帮助：hdfs://localhost:50010/user/eualin/output/links-final

```
package mia.recommender.ch03;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.mahout.cf.taste.common.TasteException;
import org.apache.mahout.cf.taste.eval.DataModelBuilder;
import org.apache.mahout.cf.taste.eval.IRStatistics;
import org.apache.mahout.cf.taste.eval.RecommenderBuilder;
import org.apache.mahout.cf.taste.eval.RecommenderIRStatsEvaluator;
import org.apache.mahout.cf.taste.impl.common.FastByIDMap;
import org.apache.mahout.cf.taste.impl.eval.GenericRecommenderIRStatsEvaluator;
import org.apache.mahout.cf.taste.impl.model.GenericBooleanPrefDataModel;
import org.apache.mahout.cf.taste.impl.model.file.FileDataModel;
import org.apache.mahout.cf.taste.impl.neighborhood.NearestNUserNeighborhood;
import org.apache.mahout.cf.taste.impl.recommender.GenericBooleanPrefUserBasedRecommender;
import org.apache.mahout.cf.taste.impl.similarity.LogLikelihoodSimilarity;
import org.apache.mahout.cf.taste.model.DataModel;
import org.apache.mahout.cf.taste.model.PreferenceArray;
import org.apache.mahout.cf.taste.neighborhood.UserNeighborhood;
import org.apache.mahout.cf.taste.recommender.Recommender;
import org.apache.mahout.cf.taste.similarity.UserSimilarity;

import java.io.File;

public class IREvaluatorBooleanPrefIntro2 {
    private IREvaluatorBooleanPrefIntro2() {
    }
    public static void main(String[] args) throws Exception {
        if (args.length != 1)                 {
            System.out.println("give file's HDFS path");
            System.exit(1);
        }
        DataModel model = new GenericBooleanPrefDataModel(
                GenericBooleanPrefDataModel.toDataMap(
                        new GenericBooleanPrefDataModel(new FileDataModel(new File(args[0])))));
        RecommenderIRStatsEvaluator evaluator =
                new GenericRecommenderIRStatsEvaluator();
        RecommenderBuilder recommenderBuilder = new RecommenderBuilder() {
            @Override
            public Recommender buildRecommender(DataModel model) throws TasteException {
                UserSimilarity similarity = new LogLikelihoodSimilarity(model);
                UserNeighborhood neighborhood =
                        new NearestNUserNeighborhood(10, similarity, model);
                return new GenericBooleanPrefUserBasedRecommender(model, neighborhood, similarity);
            }
        };
        DataModelBuilder modelBuilder = new DataModelBuilder() {
            @Override
            public DataModel buildDataModel(FastByIDMap<PreferenceArray> trainingData) {
                return new GenericBooleanPrefDataModel(
                        GenericBooleanPrefDataModel.toDataMap(trainingData));
            }
        };
        IRStatistics stats = evaluator.evaluate(
                recommenderBuilder, modelBuilder, model, null, 10,
                GenericRecommenderIRStatsEvaluator.CHOOSE_THRESHOLD,
                1.0);
        System.out.println(stats.getPrecision());
        System.out.println(stats.getRecall());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:55:43.217

您不能直接，因为非分布式代码不了解 HDFS。相反，将文件复制到本地位置，`setup()`然后从本地文件中读取它。

# networking - 这个wireshark信息指的是什么

> ID：14644660
> 
> 赞同：6
> 
> 时间：2013-02-01T10:50:29.673
> 
> 标签：networking, tcp, wireshark

我是wireshark和一般网络的新手，但我正在监视我的应用程序的流量，我可以对其进行过滤，以便我可以看到它何时主动传输它应该与服务器传输的数据，但wireshark显示了这一点：

```
protocol = TCP
length = 54
info = 56705 > ms-wbt-server [ACK] Seq=1 Ack=61 Win=252 Len=0 
```

每秒从我的应用程序发送到我的应用程序服务器。为什么我的应用程序每秒都在发送这些数据包？

如果有任何帮助，它是 ac# .net 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:54:49.073

这是一个 TCP keepalive 数据包，不包含任何数据，但设置了 ACK 标志。只是告诉另一端你还在那里，并保持连接打开。

这里有一个很好的概述：http: [//tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html](http://tldp.org/HOWTO/TCP-Keepalive-HOWTO/overview.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-17T12:58:02.573

ms-wbt-server 是 3389 端口，用于远程桌面协议 (RDP)，您是否有打开服务器的远程桌面连接？

# image-processing - 从浅色背景自动裁剪对象的正确方法是什么？

> ID：14644662
> 
> 赞同：3
> 
> 时间：2013-02-01T10:50:35.640
> 
> 标签：image-processing, opencv, computer-vision, image-segmentation

我正在尝试从扫描的图像中提取对象。白色背景上可能有一些文档，我需要自动裁剪和旋转它们。这似乎是一项相当简单的任务，但我在某些时候遇到了困难并且一直得到不好的结果。

我试图：

1.  通过执行形态学操作对图像进行二值化并获得连通分量。

2.  通过使用膨胀和侵蚀的二进制图像作为掩码组件执行分水岭分割。

3.  应用 Canny 检测器并填充轮廓。

这些都没有给我带来好的结果。如果对象没有对比边缘（即白色背景上的一张纸），它会分裂成许多单独的组件。如果我通过过度膨胀来连接这些组件，背景噪音也会扩大，一切都会变得一团糟。

例如，我有一个图像：

![](../Images/6d688715281545d45e46169b5efb47d9.png)

应用 Canny 检测器并填充轮廓后，我得到如下结果：

![](../Images/5425b0bdfd99baa19e0923254ce577a5.png)

如您所见，组件未连接。它们彼此相距太远，无法通过合理的膨胀量连接起来。当我将分水岭与一些背景点结合使用时，会产生非常糟糕的结果。

有些图像很嘈杂：

![](../Images/e73a6ef29c04b2301b758257504a72a7.png)

在这种特殊情况下，我能够通过 Canny 检测器获得整个护照的轮廓，因为它具有对比边缘。但是阈值方法在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:11:10.593

这可能看起来有点空想，但请耐心等待：

对于仅涉及边缘检测、形态学操作和分割的图像处理方案，这看起来是一个相当具有挑战性的案例。

您在这里没有利用的是您（我相信）*知道*您的文档应该是什么样子。您目前正在寻找不考虑这些先验知识的完全通用的解决方案。如果您可以获得一些训练数据，那么您可以从简单的基于模板/补丁的匹配（SSD，归一化互相关）到[更复杂的](http://en.wikipedia.org/wiki/Constellation_model)对象[检测](http://en.wikipedia.org/wiki/Outline_of_object_recognition)技术来查找文档的位置和旋转。

我的猜测是，如果您的对象总是或多或少相同且具有相同的比例（例如以固定分辨率/类似机器扫描的护照），那么您可以采用相当粗略的方法。不会有任何一种正确的方法。在您完成大量参数调整之前，您最终使用的技术也可能无法工作，因此不要太快放弃任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:13:31.453

如果图像始终位于非常浅的背景上，则可以使用接近最大可能值的阈值进行二值化。之后就是校正二值图像以获取对象的问题，但此步骤将根据您的其他图像的外观而有所不同。

例如，左下图是我们在对输入进行高斯滤波后，阈值为最大值的 99% 时得到的结果。去除连接到边框的组件和其他小组件后，再结合一些基本的形态学工具，我们得到了右图。

![在此处输入图像描述](../Images/9aafe10d51e5255250cf288e9f55a809.png) ![在此处输入图像描述](../Images/c292d706496e74bb84ab17c9d11ed1bd.png)

# javascript - 双向滚动轮播

> ID：14644667
> 
> 赞同：1
> 
> 时间：2013-02-01T10:51:00.017
> 
> 标签：javascript, jquery

*   在我的 html 应用程序中，我想要一个 *n 网格并随时只显示其中的一部分。
*   每个磁贴显示 html 内容而不是图像。
*   用户可以水平或垂直滚动​​一行或一列。
*   当在地图上加载新图块时，它应该通过 ajax 加载内容。

我浏览了许多不同类别的 js 库轮播、图块引擎、地图渲染库和......

每个类别的图书馆都缺少一件事或另一件事。

*   Carousels - 双向滚动和网格不存在
*   瓦片引擎 - 瓦片的异步加载不可用。
*   地图渲染器 - 仅支持图层/图像。

建议我一个最适合这个要求的合适的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:42:33.917

尝试使用 iScroll.js 它会工作

```
<script src="http://lab.cubiq.org/iscroll/src/iscroll.js"></script>
<div id="vertical">
    <div id="vert_scroller">

    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        var HTML = "";
        for(i=0;i < 10;i++){
            HTML += '<div id="sc'+i+'" class="innerWrap"><div class="innerSc"><span>'+(Math.random()*64654).toString()+'</span></div></div>';
        }
        $("#vert_scroller").html(HTML);
        myScroll = new iScroll('vertical');
        for(i=0;i<10;i++){
            innerScroll_1 = new iScroll('sc'+i);
        }
    })
</script>

    #vertical{
    top:0px;
    left:0px;
    position:relative;
    height:300px;
    width:300px;
    z-index:1;
    letter-spacing: 1em;
}

#vert_scroller{
    width:100%;
    display:inline-block;
}
.innerWrap{
    height:40px;
    width:100%;
    position:relative;
    z-index:1;
    top:0px;
    left:0px;
}
.innerSc{
    padding:10px;
    width:450px;
    display:inline-block;
    border-bottom:1px solid black;
} 
```

# facebook-graph-api - Facebook 游戏必须是画布应用吗？

> ID：14644669
> 
> 赞同：1
> 
> 时间：2013-02-01T10:51:01.600
> 
> 标签：facebook-graph-api, web, facebook-canvas

我想建立一个小型网站，其中包含使用 FB 登录和 Open Graph 的游戏元素。

如果我希望使用仅为游戏保留的成就 API、分数 API 和时间线聚合，我的“网站”是否必须在 FB 画布中运行？

我可以将 FB 应用程序声明为“使用 facebook 登录的网站”，但将其放在“游戏”应用程序类别中吗？

理想情况下，我想在 FB 画布之外使用我自己的域。阅读开发人员文档尚不清楚。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:09:57.740

Facebook 应用程序只是一个网站！您可以设计网站/应用程序并将其部署在您的域中。然后创建一个新的 facebook 应用程序并在 CANVAS URL 中填写您的域的详细信息。而已。当您在 facebook 中创建新应用程序时，您可以选择自己独特的 facebook 应用程序 URL。

它的工作原理是，当用户在 facebook Ex-apps.YOUR_APP_NAME.facebook.com 中访问您的应用程序时，facebook 只会将应用程序的 CANVAS 区域重定向到您的域。

# ruby - 严格的正则表达式路由

> ID：14644671
> 
> 赞同：3
> 
> 时间：2013-02-01T10:51:07.537
> 
> 标签：ruby, sinatra

我最近一直在尝试使用 Sinatra，并且在基于正则表达式的路由方面遇到了一些“问题”......例如，

```
get "/something/" do
  status 400
end 
```

匹配`/something`但不匹配`/something/`也不匹配`/somethingelse`。然而，

```
get %r{/something/([0-9]{3})} do |number|
  status number
end 
```

匹配`/something/201`但也`/something/201/`和`something/201-and-somethingelse`。也许我应该重写正则表达式来阅读`%r{/something/([0-9]+)$}`，但包含美元符号对我来说没有意义，因为这种捕获应该是严格的，对吧？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:25:24.217

Sinata 遵循 Ruby 的常规正则表达式规则。从 IRB 会话：

```
pattern = %r{/something/([0-9]{3})}
=> something[0-9]{3}
pattern.match "/something/201"
=> #<MatchData "/something/201" 1:"201">
pattern.match "/something/201/"
=> #<MatchData "/something/201" 1:"201">
pattern.match "something/201-and-somethingelse"
=> nil
pattern.match "/something/201-and-somethingelse"
=> #<MatchData "/something/201" 1:"201"> 
```

（这考虑到我上面指出的错字）。

您的另一个示例`get "/something/" do`是字符串，而不是正则表达式，但可以包含某些模式以方便使用，例如`?`. 所以：

```
get "/something/" do # will match "/something/" but not "/something"
get "/something" do # will match "/something" but not "/something/"
get "/something/?" do # will match "/something" and "/something/" 
```

# jquery - 如何在更新面板中保留 JQuery Accordion 菜单（在回发时）的状态

> ID：14644672
> 
> 赞同：1
> 
> 时间：2013-02-01T10:51:09.993
> 
> 标签：jquery, asp.net, updatepanel, postback, jquery-ui-accordion

我想在更新面板中**保留 jquery 手风琴菜单** **的***状态* 。

 **我已经尝试了下面的代码，但默认情况下，在菜单内发生的所有回发上，它总是打开第一个菜单。

```
<asp:HiddenField ID="hfaccordion" runat="server" />

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
        <asp:Menu ID="mnuTest" runat="server" Orientation="Horizontal" 
            onmenuitemclick="mnuTest_MenuItemClick">
            <Items>
                <asp:MenuItem Text="View 1" Value="0" Selected="True"></asp:MenuItem>
                <asp:MenuItem Text="View 2" Value="1" ></asp:MenuItem>
                <asp:MenuItem Text="View 3" Value="2"></asp:MenuItem>
            </Items>
        </asp:Menu>

        <asp:MultiView ID="mvwTest" runat="server" ActiveViewIndex="0">
        <asp:View ID="vwOne" runat="server">

            <div id="accordion">
                <h3><a href="#">Menu 1</a></h3>
                <div>
                    Test 1
                    <asp:Button ID="Button1" runat="server" Text="Post" />
                </div>

                <h3><a href="#">Menu 2</a></h3>
                <div>
                    Test 2
                    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true" 
                        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
                        <asp:ListItem>1</asp:ListItem>
                        <asp:ListItem>2</asp:ListItem>
                        <asp:ListItem>3</asp:ListItem>
                        <asp:ListItem>4</asp:ListItem>
                    </asp:DropDownList>
                </div>
            </div>
            <script type="text/javascript">
            $(document).ready(function() {
                var active = $('#<%= hfaccordion.ClientID %>').val();
                var currentindex= 0;
                    if (active != '') {
                        currentindex = active;
                    }

                $("#accordion").accordion(
                {
                    change: function(event, ui) {
                        var i = $("#accordion").accordion("option", "active");
                            $('#<%= hfaccordion.ClientID %>').val(i);
                        }
                    }
                );

                $("#accordion").accordion("activate", parseInt(currentindex));
            });

            function pageLoad(){
                $("#accordion").accordion(
                {
                    change: function(event, ui) {
                        var i = $("#accordion").accordion("option", "active");
                            $('#<%= hfaccordion.ClientID %>').val(i);
                        }
                    }
                );

                //$("#accordion").accordion();
                //var activeMenu = localStorage.getItem('am');
                //$("#accordion").accordion( "activate" , parseInt(activeMenu));
            }
            </script>
        </asp:View>
        <asp:View ID="vwTwo" runat="server">
            <div>
                <p>view 2</p>
                <asp:Button ID="Button2" runat="server" Text="Button" />
            </div>
        </asp:View>
        <asp:View ID="vwThree" runat="server">
            <div>
                <p>view 3</p>
                <asp:Button ID="Button3" runat="server" Text="Button" />
            </div>
        </asp:View>
    </asp:MultiView>
</ContentTemplate>
</asp:UpdatePanel> 
```

这很紧急。提前致谢...**

# c++ - C++ Allegro 5.0.8 - al_load_bitmap() 在 Linux 上返回 NULL

> ID：14644674
> 
> 赞同：0
> 
> 时间：2013-02-01T10:51:15.227
> 
> 标签：c++, linux, allegro

我正在 Allegro 5.0.8 中开发游戏，一切进展顺利，直到我尝试在 Linux（Mint 14）上编译并运行它……所以我做了 sime 测试；

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_image.h>
#include <iostream>

int main(void)
{
    al_init();
    ALLEGRO_DISPLAY *screen = al_create_display(800, 600);
    al_init_image_addon();

    ALLEGRO_PATH *path = al_get_standard_path(ALLEGRO_RESOURCES_PATH);
    al_set_path_filename(path, "players.png");
    ALLEGRO_BITMAP *img = al_load_bitmap(al_path_cstr(path, '/'));

    if (img == NULL)
        std::cout << al_path_cstr(path, '/') << std::endl;

    al_draw_bitmap(img, 0, 0, 0);
    al_flip_display();

    while (true){}
    return 0;
} 
```

这个例子编译得很好，但是这一行

```
ALLEGRO_BITMAP *img = al_load_bitmap(al_path_cstr(path, '/')); 
```

返回**NULL**。另一方面，线

```
std::cout << al_path_cstr(path, '/') << std::endl; 
```

打印图像的确切绝对路径。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:17:50.930

> 我有libpng12-0 ..但没有libpng12-dev ......我也应该安装它吗？

安装 libpng12-dev 后，您需要重建 Allegro。cmake 的输出会告诉您是否支持 PNG。

一旦您使用 PNG 支持重建 Allegro，假设您的 PNG 文件不会太大而无法加载到您的视频卡上，它将起作用。

# c# - 从 WCF 中的异步回调返回值

> ID：14644678
> 
> 赞同：0
> 
> 时间：2013-02-01T10:51:30.687
> 
> 标签：c#, wcf, mvvm, asynchronous

我的带有 MVVM 模式的 WPF 应用程序基本上应该执行以下操作：

*   按钮视图绑定到视图模型中的命令。--> 检查！
*   视图模型中的命令异步查询 Web 服务以获取`CProject`对象列表以将其放入`ProjectList`属性中。--> 检查！

这看起来像这样...

**视图模型中的命令：**

```
proxy = new SomeService();
proxy.GetProjectList(GetProjectListCallback, username, password); 
```

**视图模型中的回调：**

```
private void GetProjectListCallback(object sender, GetProjectListCompletedEventArgs e) {
  this.ProjectList = e.Result;
} 
```

`SomeService`实现一个接口`ISomeService`。

```
public void GetProjectList(EventHandler<GetProjectListCompletedEventArgs> callback, string username, string password) {
  service.GetProjectListCompleted += callback;
  service.GetProjectListAsync(username, password);
} 
```

到目前为止，这工作正常。但是我觉得我想将此回调移动到服务本身，以便视图模型只调用如下内容：

```
proxy = new SomeService();
this.ProjectList = proxy.GetProjectList(username, password); 
```

但是当将回调移动到服务时，它如何返回`e.Result`到调用视图模型呢？还是会使用`Task`更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:13:10.200

不幸的是，您不能从这样的异步操作中返回值 - 您必须阻止该线程等待它完成，这反而会破坏您正在做的事情的对象。当结果可用时，您总是需要某种回调或继续运行。在 C# 5 中，`async`/`await`语法为你做了很多工作，但最终它仍然在幕后做这件事，使用`Task.ContinueWith`.

在不涉及 TPL 且没有可用的 C# 5 编译器的情况下，如果您对 WCF 提供的异步操作感到满意，那么您目前使用的模式对我来说似乎是一个不错的模式。

在我自己的代码中，我以前构建的东西有点不同 - 使用从线程池上的线程调用的同步 WCF 操作，并发和回调由 Reactive Extensions 管理。不过效果大同小异，全看你想要什么样的语法和概念模型。使用 Rx 非常适合已经使用大量 Rx 工具包构建的应用程序，因为它使我们始终处于`IObservable`数据移动方式的同一领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:24:14.737

最简单的方法是使用 VS2012 重新创建 WCF 服务代理。这[会将](http://blogs.msdn.com/b/endpoint/archive/2010/11/13/simplified-asynchronous-programming-model-in-wcf-with-async-await.aspx)您的异步方法签名更改为：

```
Task<MyProjectList> GetProjectListAsync(string username, string password); 
```

你的命令变成：

```
proxy = new SomeService();
this.ProjectList = await proxy.GetProjectListAsync(username, password); 
```

* * *

如果您不想重新创建 WCF 服务代理（它将更新您的*所有*方法签名），那么您[可以像这样包装](http://msdn.microsoft.com/en-us/library/hh873178.aspx)[`Begin*`/`End*`方法](http://msdn.microsoft.com/en-us/library/ms228963.aspx)：

```
public static Task<MyProjectList> GetProjectListTaskAsync(this SomeService @this, string username, string password)
{
  return Task<MyProjectList>.Factory.FromAsync(@this.BeginGetProjectList, @this.EndProjectList, username, password, null);
} 
```

[我的博客上](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)有这种包装的完整示例。

或现有的[`*Async`/`*Completed`成员](http://msdn.microsoft.com/en-us/library/ms228969.aspx)：

```
public static Task<MyProjectList> GetProjectListTaskAsync(this SomeService @this, string username, string password)
{
  var tcs = new TaskCompletionSource<MyProjectList>();
  EventHandler<GetProjectListCompletedEventArgs> callback = null;
  callback = args =>
  {
    @this.GetProjectListCompleted -= callback;
    if (args.Cancelled) tcs.TrySetCanceled();
    else if (args.Error != null) tcs.TrySetException(args.Error);
    else tcs.TrySetResult(args.Result);
  };
  @this.GetProjectListCompleted += callback;
  @this.GetProjectListAsync(username, password);
} 
```

# c#-4.0 - ASP.NET MVC 用户具有所有角色

> ID：14644687
> 
> 赞同：3
> 
> 时间：2013-02-01T10:52:17.457
> 
> 标签：c#-4.0, asp.net-mvc-4, authorize

在 ASP.NET 中，您可以这样装饰方法

```
[Authorize(Roles="Moderator,Tester")]
Function ActionResult Foo()
{
   return View();
} 
```

这将限制对指定角色之一的用户的访问。

我有一个要求，用户必须是所有指定的角色。我可以为此创建一个新角色；但我想知道是否可以装饰该方法，使用户必须是所有指定角色的一部分？

这可以使用该`Authorise`属性还是我需要创建自己的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:54:40.913

只需`[Authorize]`多次使用该属性：

```
[Authorize(Roles="Moderator")]
[Authorize(Roles="Tester")]
Function ActionResult Foo()
{
   return View();
} 
```

这将要求用户同时担任两个（或多个）角色。

# debugging - 无法在带有 glassfish 服务器的 ubuntu 上使用 IntelliJ 在调试模式下运行 Web 应用程序

> ID：14644690
> 
> 赞同：6
> 
> 时间：2013-02-01T10:52:29.170
> 
> 标签：debugging, intellij-idea, port, glassfish-3, ubuntu-12.04

在带有 glassfish 3.1.2.2 的 ubuntu 12.04 上的 intelliJ 12.0 中，我正在尝试以调试模式启动我的 Web 应用程序，但我收到了以下错误消息：

```
Error starting domain domain1.
The server exited prematurely with exit code 134.
Before it died, it produced the following output:

FATAL ERROR in native method: JDWP No transports initialized, jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197)
ERROR: transport error 202: bind failed: Address already in use
ERROR: JDWP Transport dt_socket failed to initialize, TRANSPORT_INIT(510)
JDWP exit error AGENT_ERROR_TRANSPORT_INIT(197): No transports initialized [../../../src/share/back/debugInit.c:741] 
```

我尝试将 domain.xml 中的端口 9009 更改为另一个，但没有成功。你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-03T04:24:18.443

几周前我也遇到了同样的问题。我不记得 100% 我更改了什么，但我知道它与文件有关`$GLASSFISH_HOME/glassfish/domains/domain1/config/domain.xml`。如果我记得我想我改变了以下行：

```
<java-config debug-options="-Xdebug -Xrunjdwp:transport=dt_socket,server=n,suspend=y,address=9009" system-classpath="" classpath-suffix=""> 
```

特别是服务器和挂起标志。当我这样设置它们时，您上面描述的错误就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T11:48:53.977

我遇到了同样的问题，因为调试端口 9009 已被 DbVisualizer 应用程序占用。DbVisualizer 使用了一些随机端口，此时它选择了 9009。在我的情况下，我只需要关闭 DbVisualizer，GlassFish 就可以在调试模式下正常启动。

因此，请检查没有进程占用您的 Glassfish 调试端口。

另一种可能的解决方案是更改此端口，或使用共享内存。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T20:08:26.180

在最新版本的 IntelliJ 中，应用程序知道调试模式的无效设置。如果是这种情况，当您打开 Java EE 服务器的运行/调试配置时，您将在底部看到一条警告消息：

[![IntelliJ 中的警告消息](../Images/c9f891667f799de7cfd5a18ea7a53fcf.png)](https://i.stack.imgur.com/hj3cw.png)

只需按下修复按钮，您将修复您的“domain.xml”配置文件。

本教程中也对此进行了说明：[https ://www.jetbrains.com/help/idea/2016.1/developing-a-java-ee-application.html](https://www.jetbrains.com/help/idea/2016.1/developing-a-java-ee-application.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-13T08:30:21.890

对于与我有同样问题的未来可怜的灵魂：

技嘉主板附带的工具之一（我相信是 gCloud）在端口 9009 上注册了一个 Windows 服务。然后这个端口在 netstat -ano 中显示为 PID 4（Windows 系统的东西）正在使用。

# meteor - 如何使用 WebStorm 在客户端调试 Meteor 应用程序？

> ID：14644691
> 
> 赞同：2
> 
> 时间：2013-02-01T10:52:31.403
> 
> 标签：meteor, webstorm

WebStorm 调试器连接到 Chrome，控制台输出显示在 WebStorm 中，但没有触发断点，也没有监视工作。

我很确定这是因为 Meteor 将哈希添加到所有 JavaScript 文件的末尾（例如 .../workflow.js?ae719ebc9f74248a8099499f8cb3b751ac3ad098）。如果我在 WebStorm 中将带有哈希的 URL 指定为我的 JavaScript 文件的“远程 URL”，则断点和监视工作，但在 WebStorm 中打开 JavaScript 文件的一个新的只读副本。

我可以以某种方式禁用这些哈希，还是 WebStorm 中有一些设置可以忽略它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:39:47.523

试试 WebStorm 6 EAP — [http://confluence.jetbrains.com/display/WI/WebStorm+6+EAP](http://confluence.jetbrains.com/display/WI/WebStorm+6+EAP)看来这个问题已经解决了。

# javascript - 数组查找，本机还是通过 jQuery？

> ID：14644693
> 
> 赞同：2
> 
> 时间：2013-02-01T10:52:33.540
> 
> 标签：javascript, jquery, performance

你会做这种事吗？

```
 var getBoard1 = function(id) {
        return $.grep(me.boards, function (board) {
            return board.Id == id;
        });
    }; 
```

还是这种东西？

```
 var getBoard2 = function(id) {
        for (var i = 0; i < me.boards.length; i++) {
            var board = me.boards[i];
            if (board.Id == id)
                return board;
        }
        return null;
    }; 
```

为什么，在正确性、可读性和性能方面，您更喜欢这种方式？如果您更愿意以第三种方式进行操作，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:04:27.963

这是`grep`函数的样子（jQuery v1.8.2）：

```
grep: function( elems, callback, inv ) {
    var retVal,
        ret = [],
        i = 0,
        length = elems.length;
    inv = !!inv;

    // Go through the array, only saving the items
    // that pass the validator function
    for ( ; i < length; i++ ) {
        retVal = !!callback( elems[ i ], i );
        if ( inv !== retVal ) {
            ret.push( elems[ i ] );
        }
    }

    return ret;
} 
```

本质上，您正在做同样的事情，因此在性能方面不会有太大区别。当我查看 jQuery 代码时，它们总是返回一个数组，您在其中返回`null`. 如果你已经在使用 jQuery，我会选择 jQuery 版本，因为它可读性更好，否则使用*本机*代码。

*** - 编辑 - ***

在查看代码时，这让我意识到它*确实*有所作为。您的代码在找到第一个项目（只期望一个结果）时已经返回（并完成循环），其中 jQuery 循环遍历*所有*项目。因此，如果您只期望一个结果，您的版本会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:55:26.913

jQuery 提供了方便的方法，在后台它可能会做类似的事情。如果您已经在使用 jQuery，那么您可以利用这一点，但是我不会仅仅为这样的一点代码包含 jQuery。这完全取决于你的情况。

至于性能，试试吧，看看你的结果是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:56:54.473

如果您已经对 jQuery 有依赖，那么请使用第一种方式，因为它更短且更易于阅读。在极不可能的情况下，此功能是您的瓶颈并且性能不可接受，那么您可以开始考虑替代实现。

如果您还没有依赖 jQuery，那么第二个版本更可取，因为权衡（包括 jQuery 与编写更多代码行）是不值得的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:00:00.557

[`Array.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)如果您不关心 Browsersupport，我会使用本机，这可能是最快的（IE8- 会死在这上面）。

```
a.filter(function(e){return e.id == id}); 
```

这将返回，就像 jQuerys grep 一个数组一样，您必须在其中获取第一个值。

# android - GCM 服务查询

> ID：14644695
> 
> 赞同：0
> 
> 时间：2013-02-01T10:52:34.880
> 
> 标签：android, android-intent, google-cloud-messaging

我正在为我的应用程序使用 GCM 服务来从云中接收数据。

不幸的是，如果 GOOGLE 播放未在设备上登录，GCM 没有响应或设备没有收到来自 GCM 的任何命令？

是否必须注册 GOOGLE PLAY 才能收到 GCM？

另外，如果通过我的应用程序我需要查找设备是否已登录 GOOGLE PLAY
是否可用？

任何帮助都会被接受>>提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:25:59.720

[GCM 架构概述](http://developer.android.com/google/gcm/gcm.html)中对此进行了解释，这里有两点很重要：

> 它要求运行 Android 2.2 或更高版本的设备也安装了 Google Play Store 应用程序，或者运行 Android 2.2 和 Google API 的模拟器。但是，您不仅限于通过 Google Play 商店部署您的 Android 应用程序。
> 
> 它使用现有的 Google 服务连接。对于 3.0 之前的设备，这要求用户在其移动设备上设置其 Google 帐户。运行 Android 4.0.4 或更高版本的设备不需要 Google 帐户。

因此，如果设备运行的是 4.0.4 或更高版本，则不需要 Google 帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:42:28.247

没有 Google play 注册不是接收 GCM 的强制要求。但请记住，如果您在模拟器上进行测试，请确保它是 GOOGLE API 而不是 android。[您可以在此处](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)找到使用模拟器和 PHP 实现 GCM 的分步指南

# javascript - 当淘汰赛可观察值发生变化时如何刷新线索提示

> ID：14644697
> 
> 赞同：0
> 
> 时间：2013-02-01T10:52:47.220
> 
> 标签：javascript, jquery-ui, knockout.js, datepicker, cluetip

如何更改线索提示中的内容。

```
 $('a.cal_box').cluetip({local:true, hideLocal: true ,onShow: function(ct, ci){ this.calendar = $('<div>').datepicker({ beforeShowDay: daysToMark,onSelect: function(dateText, inst) { 
  var date = $(this).datepicker( 'getDate' ); 
  //var c = ko.contextFor($("#KnockOutCalendar")[0]);
    calendarObject.$data.Date(date.getFullYear()+'-'+date.getMonth()+'-'+date.getDate());   
    calendarObject.$data.Time(date.getHours());
    //$('a.cal_box').cluetip({local:true,activation:'hover', hideLocal: true, sticky: true, arrows: true, cursor: 'pointer',width:970, height:530}); 
  } }).appendTo(ci); }, onHide: function(ct, ci){ this.calendar.datepicker( "destroy" ).remove(); }, sticky: true, arrows: true, cursor: 'pointer',width:970, height:530}); 
```

当线索提示点击 cal_box 时。

当我单击日历时，我会在其中显示日历和待办事项列表，我会更改`ko.observable()`

我只希望当 ko.observable 的值发生变化时，它应该刷新提示框，但应该保留单击它的日历，只是待办事项列表应该根据该日期刷新。

```
<div id="KnockOutCalendar" data-bind="foreach: {data:Calendar,afterRender: myPostProcessingLogic}">
             <!-- ko if: $parent.ChangeDate(dstart) == $parent.Date() -->
            <div class="timeline_row">

              <div class="timeline_row_heading" ><span data-bind="text: $parent.ChangeTime(dstart)"></span>:00</div>
              <div class="timeline_row_content showcalen_entry"><span data-bind="text: dstart"></span> - <span data-bind="text: subject"></span></div>

            </div>
            <!-- /ko -->
            </div> 
```

在这个foreach中，我显示有事件数据的日期，如果它在那里显示，`timeline_row`否则它应该是空白的

我想要的是当我单击一个日期并且当它更改`self.Date(clickedDate)`运行时的值更改为具有新数据的函数警报但线索提示保持与我单击 cal_box 时的初始化相同时我希望它重新初始化或者你说再次点击 cal_box 但我没有这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:17:49.000

最好的方法是使用更新函数创建自定义绑定，您将可以访问元素和可观察对象，以便您可以从那里更新线索提示。每次值发生变化时都会触发更新函数。

# zend-framework2 - Zendframework2中单个模块下的多个控制器

> ID：14644700
> 
> 赞同：1
> 
> 时间：2013-02-01T10:52:54.603
> 
> 标签：zend-framework2

我通过 ZF 教程创建专辑。结构如下：-

```
module/
    Album/
         config/
             module.config.php
         src/
            Album/
                Controller/
                         AlbumController.php
        view/
            album/ ....             
        Module.php 
```

我需要在 src/Album/Controller/ 下再创建一个名为 UserController.php 的控制器这可能吗？这是在 Zendframework2 中做的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:59:25.880

您需要在`module.config.php`

```
'controllers'  => array(
    'invokables' => array(

        [... some other controller defined here too ...]

        'Album\Controller\User' => 'Album\Controller\UserController',
    )
) 
```

然后在其中创建新的控制器`Album/src/Album/Controller/`并将其命名为 UserController.php。该文件成为命名空间和类名：

`namespace Album\Controller;`

`class UserController extends \Zend\Mvc\Controller\AbstractActionController`

一些`indexAction`方法女巫返回一个`new \Zend\View\Model\ViewModel();`

然后你可以创建你的视图文件

`Album/view/Album/user/index.phtml`

是的，这是向模块添加新控制器的正常程序。

# android - 将应用程序上传到 google play 时，您需要在 APK 中添加一个图标

> ID：14644711
> 
> 赞同：12
> 
> 时间：2013-02-01T10:53:32.087
> 
> 标签：android, google-play

我不知道我哪里出错了。我需要将 APK 上传到 google play，每当我尝试上传它时，它都会显示一条错误消息，如所附屏幕截图所示。错误是“您需要向 APK 添加一个图标”，但可以肯定的是，我已经在清单文件中向我的 APK 添加了一个图标。我不知道它是因为图标分辨率而导致错误还是我缺少某些东西。请帮忙。![在此处输入图像描述](../Images/ec600878af9beb08557470beebe135b7.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T21:09:15.203

我遇到了同样的问题，请确保您的应用程序名称中没有 \n

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T20:45:59.257

您的清单中可能没有定义图标或引用不存在的图像。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-12T00:34:01.010

同样的问题，但在我的情况下，我在应用程序元素中缺少“android：icon”属性，注意我只在活动中拥有它。

```
<application ... android:icon="@drawable/ic_launcher">
    <activity ... android:icon="@drawable/ic_launcher"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-12T17:09:44.317

经过漫长而痛苦的搜索，发现Manifest文件中的ApplicationAttributes是空的，尽管在AndroidManifest.xml中提到了android:icon="@drawable/app_icon"。

填写 ApplicationAttributes 解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T09:01:14.443

从您的应用程序名称中删除 \n

# c# - 鼠标点击添加图片框 WinForm

> ID：14644712
> 
> 赞同：0
> 
> 时间：2013-02-01T10:53:41.650
> 
> 标签：c#, winforms, picturebox

目前，我正在尝试创建一个黑色图像框，当我按下鼠标左键时会出现该框。但是，当我单击时，什么也没有发生。

有人可以看看我做错了什么吗？

在我的图像类中：

```
 PictureBox _pictureBoxTag = new PictureBox();

    private List<PictureBox> _displayedImage = new List<PictureBox>();

    public void AddPictureBox()
    {
        try
        {
            PictureBox _picBox = new PictureBox();
            _picBox.Size = new Size(100, 100);
            _picBox.SizeMode = PictureBoxSizeMode.StretchImage;
            _picBox.BackColor = Color.Black;
            _picBox.Location = new Point(100, 100);
            _displayedImage.Add(_picBox);

        }
        catch (Exception e)
        {
            Trace.WriteLine(e.Message);
        }
    } 
```

然后在我的 Form1.cs 类中

```
 HV_Image _testImage;
_testImage = new HV_Image();
  private void MouseDown( object sender, MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                _testImage.AddPictureBox();
                Trace.WriteLine("Picture box added");
            }

            Trace.WriteLine("Mouse Click");
        } 
```

我的想法是我的图像类应该包含一个图片框列表，这些图片框填写了创建图片所需的信息。例如大小、颜色、位置等。然后在我的 Form1.cs 类中，我只需调用该函数，它就会绘制。

如果我的方法很糟糕，或者不起作用，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:59:01.763

您不会将新的 PictureBox 添加到表单的控件集合中。

您应该从 AddPictureBox 返回新创建的图片框，然后添加到表单的集合中

```
public PictureBox AddPictureBox()
{
    try
    {
        PictureBox _picBox = new PictureBox();
        ......
        return _picBox;
    }
    catch (Exception e)
    {
        Trace.WriteLine(e.Message);
        return null;
    }
}

private void MouseDown( object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        PictureBox pic = _testImage.AddPictureBox();
        if(pic != null)
        {
            this.Controls.Add(pic);
            Trace.WriteLine("Picture box added");
    }
} 
```

或者，将表单实例传递给 AddPictureBox 方法

```
public void AddPictureBox(Form f)
{
    try
    {
        PictureBox _picBox = new PictureBox();
        ......
        f.Controls.Add(_picBox);
    }
    catch (Exception e)
    {
        Trace.WriteLine(e.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:02:36.377

您需要更改图像的 x 和 y 位置，否则每次都会将其添加到同一位置。

```
public void AddPictureBox(int x, int y)
    {
        try
        {
            PictureBox _picBox = new PictureBox();
            _picBox.Size = new Size(100, 100);
            _picBox.SizeMode = PictureBoxSizeMode.StretchImage;
            _picBox.BackColor = Color.Black;
            _picBox.Location = new Point(x, y);
            _displayedImage.Add(_picBox);

            return _picBox;

        }
        catch (Exception e)
        {
            Trace.WriteLine(e.Message); return null;
        }
    }

private void MouseDown( object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            PictureBox pic = _testImage.AddPictureBox(e.X, e.Y);
            if(pic != null)
            {
                this.Controls.Add(pic);
                Trace.WriteLine("Picture box added");
            }
        }

        Trace.WriteLine("Mouse Click");
    } 
```

# java - 在 Struts 2 中附加一个带有操作的查询字符串

> ID：14644713
> 
> 赞同：3
> 
> 时间：2013-02-01T10:53:45.790
> 
> 标签：java, jsp, parameters, struts2, ognl

我正在为参数附加操作，但在我的 Struts 2 页面上出现异常。

```
PWC6212: equal symbol expected 
```

以下是我要提交的附加参数代码的操作。

```
action="MyAction.action?id=<%=request.getParameter("id")%>&name=<%=request.getParameter("name")%>&age=<%=request.getParameter("age")%>&num=<%=request.getParameter("num")%>" 
```

难道上面是语法问题？如果不是，那么我们如何将参数设置为带有操作的查询字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:19:10.717

你*不应该*使用 Scriptlet ( `<%= %>`)

而且，如果`action`是 Struts 标记的属性（如`<s:form>`），**则不能**使用 scriptlet，而应使用`OGNL`.

请参考这个问题：[Struts 2 s:select tag dynamic id](https://stackoverflow.com/questions/14639898/struts-2-sselect-tag-dynamic-id)了解更多详情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:18:29.787

假设`action`属性与`<form`标签一起使用。然后施工

```
<form name="MyAction.action" action="upload?id=<%=request.getParameter("id")%>&name=<%=request.getParameter("name")%>&age=<%=request.getParameter("age")%>&num=<%=request.getParameter("num")%>" method="POST"> 
```

应该与当前上下文一起工作。`Exception Name: org.apache.jasper.JasperException: equal symbol expected`但是在您的情况下，使用标签时会出现错误消息 ( `<s:form`。因此，您不能在 action 属性中使用此 url。此属性应包含用于查找您的操作的纯操作名称。

> “我们如何将参数设置为查询字符串？”

实际上我们是用`<s:param`标签来做的。例如，当使用超链接时

```
<s:a action="MyAction">
   <s:param name="id" value="%{id}"/>
   <s:param name="name" value="%{name}"/>
</s:a> 
```

但是这种结构不适用于标签，除非您应用[此](https://stackoverflow.com/questions/13373760/how-to-pass-a-parameter-in-url-on-a-form-submit-in-struts2/13380998#13380998)`<s:form`答案中描述的特殊语法，并且如果您在操作中这样做，您肯定希望获取这些参数

```
String quesyString = request.getQueryString(); 
```

并且此字符串不应为空。

但是，这种用例很少应用，如果您没有理由以这种方式获取参数，那么作为替代方案，您始终可以使用`<s:hidden`字段来包含参数的值。例如

```
<s:form action="MyAction" method="POST">
    <s:hidden name="id" value="%{id}"/>
    <s:hidden name="name" value="%{name}"/>
</s:form> 
```

这些值作为参数传递并在`params`拦截器工作后初始化动作属性。您也可以直接从请求中获取此参数

```
Map<String, String[]> params = (Map<String, String[]>)request.getParameterMap(); 
```

但是，在您的操作中执行此操作的更方便的方法是实现`ParameterAware`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T13:17:56.457

就像@AndreaLigios 提到的那样，您应该使用 Struts2 指定的 EL，在此处查看[文档](http://struts.apache.org/2.0.14/docs/jsp.html)。

如果您正在使用`<s:url/>`，请查看[文档](http://struts.apache.org/2.x/docs/url.html)以获取更多信息。

您的代码应如下所示：

```
<s:url value="MyAction.action">
    <s:param name="id" value="%{#parameters.id}" />
    <s:param name="name" value="%{#parameters.name}" />
    <s:param name="age" value="%{#parameters.age}" />
    <s:param name="num" value="%{#parameters.num}" />
</s:url> 
```

# c#-4.0 - 通过 https 上传文件

> ID：14644714
> 
> 赞同：1
> 
> 时间：2013-02-01T10:53:46.870
> 
> 标签：c#-4.0

谁能给我一个用于这种文件上传的 C# 代码片段：

```
POST <BASE-URL>/documents
Content-Type: multipart/form-data; boundary=<BOUNDARY>
Transfer-Encoding: chunked
--<BOUNDARY>
Content-Disposition: form-data; name=“metadata”
Content-Type: application/json
{
“metadata” : {
“document” : {
“filename” : <filename>,
“size” : <filesize>,
“title” : <title>,
“author” : <author>
}
}
}
--<BOUNDARY>
Content-Disposition: form-data; name=“document”; filename=“&lt;filename>”
Content-Type: <mime-type>
<File contents>
--<BOUNDARY>-- 
```

目前我正在使用下面显示的方法，我得到状态 400：Bad Request：

```
 public static void HttpUploadFile(string url, string file, string paramName, string contentType, NameValueCollection nvc,string accessToken)
    {

        string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");
        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");

        HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(url);
        wr.ContentType = "multipart/form-data; boundary=" + boundary;
        wr.Method = "POST";
        wr.KeepAlive = false;
        wr.SendChunked = true;
        wr.Headers.Add("Authorization", "Bearer " + accessToken);
        wr.Credentials = System.Net.CredentialCache.DefaultCredentials;

        Stream rs = wr.GetRequestStream();

        string formdataTemplate = "Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";

        foreach (string key in nvc.Keys)
        {
            rs.Write(boundarybytes, 0, boundarybytes.Length);
            string formitem = string.Format(formdataTemplate, key, nvc[key]);
            byte[] formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
            rs.Write(formitembytes, 0, formitembytes.Length);
        }
        rs.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";
        string header = string.Format(headerTemplate, paramName, file, contentType);
        byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);
        rs.Write(headerbytes, 0, headerbytes.Length);

        FileStream fileStream = new FileStream(file, FileMode.Open, FileAccess.Read);
        byte[] buffer = new byte[256000];
        int bytesRead = 0;
        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
        {
            rs.Write(buffer, 0, bytesRead);
        }
        fileStream.Close();

        byte[] trailer = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "--\r\n");
        rs.Write(trailer, 0, trailer.Length);
        rs.Close();

        WebResponse wresp = null;
        try
        {
            wresp = wr.GetResponse();
            Stream stream2 = wresp.GetResponseStream();
            StreamReader reader2 = new StreamReader(stream2);
            //log.Debug(string.Format("File uploaded, server response is: {0}", reader2.ReadToEnd()));
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
            if (wresp != null)
            {
                wresp.Close();
                wresp = null;
            }
        }
        finally
        {
            wr = null;
        }
    } 
```

我猜是帖子标题表单数据的json字符串部分给我带来了麻烦......这里它使用namevaluecollection......

谢谢！

# c++ - 如何通过cout将字符输出为整数？

> ID：14644716
> 
> 赞同：68
> 
> 时间：2013-02-01T10:53:51.650
> 
> 标签：c++, io, type-conversion, iostream, outputstream

```
#include <iostream>

using namespace std;

int main()
{  
    char          c1 = 0xab;
    signed char   c2 = 0xcd;
    unsigned char c3 = 0xef;

    cout << hex;
    cout << c1 << endl;
    cout << c2 << endl;
    cout << c3 << endl;
} 
```

我预计输出如下：

```
ab
cd
ef 
```

然而，我一无所获。

我猜这是因为 cout 总是将 'char'、'signed char' 和 'unsigned char' 视为字符而不是 8 位整数。但是，“char”、“signed char”和“unsigned char”都是整数类型。

所以我的问题是：如何通过 cout 将字符输出为整数？

PS： static_cast(...) 很丑陋，需要更多的工作来修剪额外的位。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2015-02-09T16:42:46.093

```
char a = 0xab;
cout << +a; // promotes a to a type printable as a number, regardless of type. 
```

只要该类型提供`+`具有普通语义的一元运算符，它就可以工作。如果您要定义一个表示数字的类，要提供具有规范语义的一元 + 运算符，请创建一个简单地按值或通过引用到 const`operator+()`返回的运算符。`*this`

来源：[Parashift.com - 如何将字符打印为数字？如何打印 char* 以便输出显示指针的数值？](http://www.parashift.com/c++-faq/print-char-or-ptr-as-number.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T10:55:49.470

将它们转换为整数类型，（以及适当的位掩码！）即：

```
#include <iostream>

using namespace std;

int main()
{  
    char          c1 = 0xab;
    signed char   c2 = 0xcd;
    unsigned char c3 = 0xef;

    cout << hex;
    cout << (static_cast<int>(c1) & 0xFF) << endl;
    cout << (static_cast<int>(c2) & 0xFF) << endl;
    cout << (static_cast<unsigned int>(c3) & 0xFF) << endl;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-01T10:59:12.420

也许是这样：

```
char c = 0xab;
std::cout << (int)c; 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-16T18:22:57.490

关于什么：

```
char c1 = 0xab;
std::cout << int{ c1 } << std::endl; 
```

它简洁且安全，并[产生](https://godbolt.org/z/p3jrzL)与其他方法相同的机器代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-15T12:43:02.940

另一种方法是重载`<<`运算符：

```
#include <iostream>

using namespace std;
typedef basic_ostream<char, char_traits<char>> basicOstream;

/*inline*/ basicOstream &operator<<(basicOstream &stream, char c) {
    return stream.operator<<(+c);
}
/*inline*/ basicOstream &operator<<(basicOstream &stream, signed char c) {
    return stream.operator<<(+c);
}
/*inline*/ basicOstream &operator<<(basicOstream &stream, unsigned char c) {
    return stream.operator<<(+c);
}

int main() {
    char          var1 = 10;
    signed char   var2 = 11;
    unsigned char var3 = 12;

    cout << var1 << endl;
    cout << var2 << endl;
    cout << var3 << endl;

    return 0;
} 
```

打印以下输出：

```
10
11
12

Process finished with exit code 0 
```

我认为它非常整洁和有用。希望它有帮助！

* * *

而且，如果你想让它打印一个`hex`值，你可以这样做：

```
basicOstream &operator<<(basicOstream &stream, char c) {
    return stream.operator<<(hex).operator<<(c);
} // and so on... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-25T07:40:29.717

另一种方法是使用**std::hex**除了**强制转换 (int)**：

```
std::cout << std::hex << (int)myVar << std::endl; 
```

我希望它有所帮助。

# xml - XML - 在 NEWSML 上添加媒体的到期时间

> ID：14644718
> 
> 赞同：0
> 
> 时间：2013-02-01T10:54:07.767
> 
> 标签：xml, xsd, feed

我正在使用 NEWSML，它基本上是用于分发新闻和媒体的 XML（我很陌生）......

我正在寻找如何添加标签以使媒体项目（例如 xml 文件上的视频）过期。

目前我已经找到`<enddate>`过期事件的标签，但这似乎不适用于视频。

有人可以让我朝着正确的方向前进。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-06T14:08:38.787

请查看[IPTC](https://iptc.org/)的[NewsML-G2](https://iptc.org/standards/newsml-g2/)；这有一个特定的元素：`expires`

# mysql - 如何从最后一条记录 = x 中选择？

> ID：14644726
> 
> 赞同：2
> 
> 时间：2013-02-01T10:54:41.473
> 
> 标签：mysql, sql, database

我有 2 个不同的表：
dossiers (id, name, disp)
dossiers_etat (id, id_dossier, open, incharge, date)

dossiers 很简单，就是一个名字列表和他们的id

dossiers_etat 以 1-N 的关系链接到档案：1 个档案可以链接到 N 个档案-etat，这要归功于一个连接：dossiers.id = dossiers_etat.id_dossier

我使用 dossiers_etat 作为时间线来记录我的档案状态的每一次变化：今天可以打开 1 个档案=“Y”，但昨天可以打开=“N”
由于 dossiers_etat.date 或 dossiers_etat，我可以找到有关档案的最后一条记录.id（最后一个日期和最后一个 id 显示最近的记录）

如何完成此查询以获取其 LAST 记录中 open="Y" 和 incharge="-" 的档案列表？

```
SELECT *
FROM dossiers
JOIN dossiers_etat
ON dossiers.id = dossiers_etat.id_dossier
WHERE dossiers.disp = "Y" AND dossiers_etat.open = "Y" AND dossiers_etat.incharge = "-"
ORDER BY dossiers.id DESC 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:07:50.777

试试这个

```
SELECT *
FROM dossiers
JOIN dossiers_etat
ON dossiers.id = dossiers_etat.id_dossier
WHERE dossiers.disp = "Y" AND dossiers_etat.open = "Y" AND dossiers_etat.incharge = "-"
ORDER BY dossiers.id DESC
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:12:00.077

试试这个：

```
SELECT *
FROM dossiers B
JOIN dossiers_etat as C
ON B.id = C.id_dossier
WHERE B.disp = "Y" AND C.open = "Y" AND C.incharge = "-"
AND C.date = (SELECT max(date) from dossiers_etat WHERE id_dossier = C.id_dossier)
ORDER BY B.id DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:18:08.317

试试这个：

```
 SELECT 
    *
FROM
    dossiers
        JOIN
    dossiers_etat ON dossiers.id = dossiers_etat.id_dossier
WHERE
    dossiers.disp = 'Y'
        AND dossiers_etat.open = 'Y'
        AND dossiers_etat.incharge = '-'
        AND dossiers_etat.id = (SELECT 
            *
        FROM
            dossiers_etat
        GROUP BY id_dossiers
        ORDER BY date DESC)
ORDER BY dossiers.id DESC; 
```

使用子选择，您将从档案表中的最后一个条目中获取 id。使用外部 SELECT 您将获得所有行，这些行打开正确的条目并且也在最后的记录中。

# asp.net - Gridview PageIndexChanging 事件未触发

> ID：14644731
> 
> 赞同：3
> 
> 时间：2013-02-01T10:55:00.953
> 
> 标签：asp.net, gridview, user-controls, page-index-changed

我在用户控件中有一个 gridview

```
 <asp:GridView ID="grdMissingFilterData" runat="server"   AllowPaging="True" Width="100%"
                        AllowSorting="True" AutoGenerateColumns="False" GridLines="None"
                        PageSize="30" OnPageIndexChanging="grdMissingFilterData_PageIndexChanging">
                        <Columns>
                            <asp:BoundField DataField="Varenummer" HeaderText="Varenummer"   ItemStyle-Width="25%" >
                            <ItemStyle Width="25%" />
                            </asp:BoundField>
                            <asp:BoundField DataField="Varenavn" HeaderText="Varenavn"  ItemStyle-Width="15%" >
                            <ItemStyle Width="15%" />
                            </asp:BoundField>
                            <asp:BoundField DataField="Producentvarenummer" HeaderText="Producent varenummer"  ItemStyle-Width="15%" >
                            <ItemStyle Width="15%" />
                            </asp:BoundField>
                        </Columns>
                        <AlternatingRowStyle CssClass="altrow" />
                        <PagerSettings FirstPageText="First" LastPageText="Last" PageButtonCount="50" />
                        <EmptyDataTemplate>
                            There is no data available to display!
                        </EmptyDataTemplate>
   <PagerStyle CssClass="pager" />
    </asp:GridView> 
```

和回发代码

```
if (!Page.IsPostBack)
    {  
        BindData(); 
    } 
```

然后我有一个 PageIndexChanging 事件，当我点击分页时它永远不会触发。

```
 protected void grdMissingFilterData_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    grdMissingFilterData.PageIndex = e.NewPageIndex;
    BindData();
} 
```

谁能给我任何可能的理由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:28:51.123

这可能是您的用户控件与gridview 无关的问题。专注于那部分

# sql - 如何将 LastDayOfMonth 添加到仓库日期视图

> ID：14644732
> 
> 赞同：1
> 
> 时间：2013-02-01T10:55:08.407
> 
> 标签：sql, sql-server-2008-r2

我们目前在仓库中有这个日期视图：

```
ALTER VIEW [dbo].[vw_DimDate] AS
SELECT
    D.DateKey
    , D.DayMarker AS DayMarker
    , D.Year_YYYY as CalendarYear
    , D.Quarter_QQ as QuarterName
    , D.Quarter_QQ + ' - ' + D.Year_YYYY AS CalendarQuarterName
    , D.Month_MMM as MonthShortName
    , D.Month_MMMM as MonthName
    , D.Month_MMMM + ' ' + D.Year_YYYY AS CalendarMonthName
    , D.Week_WW as WeekName
    , D.Week_WW + ' - ' + D.Year_YYYY AS CalendarWeekName
    , D.Day_DD + ' ' + D.Month_MMMM + ' ' + D.Year_YYYY AS CalendarDayName
    , D.DayOfWeekName
    ,convert(datetime,'01 ' + Month_MMM + ' ' + D.Year_YYYY) as FirstDayOfMonth
    --<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<as LastDayOfMonth 
    , W.WeekYear_YYYY as Week_Year
    , W.Week_WW + ' ' + W.WeekYear_YYYY as Week_YearWeekName
FROM
    WHData..TB_DimDate D
JOIN
    WHData..tb_DimDateWeek W
    on D.DateKey = W.DateKey
where
    D.DateKey < convert(char(8),getdate(),112) 
```

我想添加一个字段`LastDayOfMonth`- 这个的标准实现是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:59:03.153

最简单的方法是添加 1 个月，然后在 FirstDayOfMonth 中添加“-1”天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:00:26.557

要获取本月的最后一天，您可以使用：

```
DATEADD(s, -1, DATEADD(mm, DATEDIFF(m, 0, GETDATE())+1, 0)) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d41d8/7821)。

如果您的表中有日期列，那么您将替换`GetDate()`为您的列。从您当前的查询来看，它看起来是`DateKey`，所以您可以使用：

```
DATEADD(s, -1, DATEADD(mm, DATEDIFF(m, 0, D.DateKey)+1, 0)) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/87e30/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:32:06.073

假设`D.Year_YYYY`&`Month_MMM`是字符串类型

```
dateadd(day,-1,dateadd(month, 1, D.Year_YYYY + right('0'+ Month_MMM,2) + '01'))
                                                             as LastDayOfMonth 
```

此外，最好在转换为之前更改`FirstDayOfMonth`为`ISO format`；

```
convert(datetime,D.Year_YYYY + right('0'+ Month_MMM,2) + '01') as FirstDayOfMonth 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T16:27:53.707

另一种选择

```
DATEADD(dd , - DAY([Date]), DATEADD(MONTH , 1, [Date])) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c3930/1/0)上的演示[](http://sqlfiddle.com/#!3/c3930/1/0)

# python - 定义 ModelForm 元类的正确方法

> ID：14644734
> 
> 赞同：1
> 
> 时间：2013-02-01T10:55:12.817
> 
> 标签：python, django, metaclass, modelform

我想要做的是创建一个动态的 ModelForm，它会根据它的一个类属性生成额外的字段，以在 ModelAdmin 中使用。就像是：

```
class MyModelForm(forms.ModelForm):
    config_fields = ('book_type', 'is_featured', 'current_price__is_sale')

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm 
```

在这种情况下，MyModelForm 将通过执行一些自省来基于 config_fields 属性生成字段。到目前为止，我的方法看起来像这样（基于这个答案[https://stackoverflow.com/a/6581949/677985](https://stackoverflow.com/a/6581949/677985)）：

```
class ConfigForm(type):
    def __new__(cls, name, bases, attrs):
        if 'config_fields' in attrs:
            for config_field in attrs['config_fields']:

                # ... (removed for clarity)

                attrs.update(fields)
        return type(name, bases, attrs)

class MyModelForm(forms.ModelForm):
    __metaclass__ = ConfigForm
    config_fields = ('book_type', 'is_featured', 'current_price__is_sale') 
```

这种方法效果很好，但我对它不太满意，原因如下：

1.  验证似乎不起作用，但目前这是一个小问题
2.  我不太确定为什么需要“if config_field in attrs:”-condition，但它是
3.  我希望 MyModelForm 继承而不是设置 __metaclass__ 属性，然后可以轻松重用基类，并允许我轻松覆盖 clean- 和 __init__- 方法。

我尝试实现第三项，结果是额外字段没有出现在管理表单中。如果有人可以帮助我解决这个问题，或者至少为我指出正确的方向，我将不胜感激。

我知道为此使用元类可能有点矫枉过正，并且猜测问题的一部分是 ModelForm 在其继承链中已经有一个或两个元类。因此，如果有人有替代解决方案来完成相同的任务，那会让我同样高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:31:34.313

我相信`ModelForm`已经有一个元类，但是你通过设置你自己的来覆盖它。这就是为什么您没有得到验证或任何其他内置的模型形式的优点。

相反，您应该能够`type`直接使用来创建您的`ModelForm`，它将描述您想要的类型，但仍然会导致 ModelForms 元类做它的事情。

例子：

```
 config_fields = ('book_type', 'is_featured', 'current_price__is_sale')
    # the below is an example, you need more work to construct the proper attrs
    attrs = dict((f, forms.SomeField) for f in config_fields)
    ConfigModelForm = type('DynamicModelForm', (forms.ModelForm,), attrs)

    class MyModelAdmin(admin.ModelAdmin):
        form = ConfigModelForm 
```

如果需要，您可以将第一部分包装在一个函数中，并在 ModelAdmin 中为您的表单属性调用它。

有关使用类型的链接和讨论，请参见[我的答案。](https://stackoverflow.com/a/14134574/10583)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T15:56:19.463

这个怎么样，

基本上，任何扩展您的 StepForm 的表单也将具有您想要的**元类**，在下面的情况下它是 StepFormMetaclass，请注意，如果您在某个 form.py 文件中定义了表单，您将需要导入表单，`___init___.py`以便它将在 django 启动序列期间执行它。

```
from django.forms.forms import DeclarativeFieldsMetaclass

class StepFormMetaclass(DeclarativeFieldsMetaclass):
    .......
    def __new__(meta_class, name, bases, attributes):
        .....
        return DeclarativeFieldsMetaclass.__new__(meta_class, name, bases, attributes)

class StepForm(six.with_metaclass(StepFormMetaclass, forms.Form, StepFormMixin)):
    def __init__(self, *args, **kwargs):

        super(StepForm, self).__init__(*args, **kwargs)

    def as_p(self):
        return ...... 
```

# ios - 如何在 iOS 中执行撤消操作以存储 UIGraphicsContext？

> ID：14644740
> 
> 赞同：5
> 
> 时间：2013-02-01T10:55:35.353
> 
> 标签：ios, objective-c, xcode, nsundomanager

我想在我的绘图应用程序中对图形上下文执行撤消操作。当按下撤消时，我想移动到包含旧绘图的上一个上下文。

例如：

我在上下文中有一个矩形。在拖动时，我将矩形移动到一个新位置并重新绘制它。现在，当我按下撤消按钮时，我想将矩形移动到上一个位置。我怎样才能做到这一点？

我只是对`NSUndoManager`.

请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:35:58.633

您推断的功能实际上并不存在。换一种说法，“图形上下文不能以这种方式工作（免费）。” 您可能已经看过函数`UIGraphicsPushContext`和`UIGraphicsPopContext`，但它们并没有执行您在此处所说的操作。它们代表的“push”和“pop”操作对图形上下文的尚未渲染的方面进行操作：例如，当前的填充和描边颜色、剪辑矩形和变换矩阵。一旦某些东西被渲染到上下文中——即路径/矩形/等。已经被描边或填充，或者图像已被合成到上下文中——它被永久渲染。“返回”的唯一方法是以某种方式重新创建以前的状态。不幸的是，没有内置的魔法`UIGraphicsContext`可以为您实现这一目标。

有几种方法可以解决这个问题。正如另一位用户提到的，您可以在每个用户操作后捕获上下文的状态。简而言之，这意味着您的文档“模型”是一个位图堆栈。这将很快占用大量内存——位图占用大量内存。当然，您可以对这种方法进行优化，以从中获得更多收益，例如仅保存在每帧之间发生变化的区域、压缩位图、将它们交换到磁盘等。使用这种方法工作的 App Store，但这种方法本质上是有限的，您最终将花费不小的努力来优化和管理已保存的撤消状态堆栈。

当然，还有其他值得考虑的方法。最简单的方法是让您的实际文档模型是一堆小的（即非位图）数据结构，这些数据结构描述了重新创建上下文状态所需的操作。当用户撤消时，您只需删除堆栈顶部的操作并通过回放剩余的堆栈来重新创建图形上下文。对于“附加”类型的应用程序（想想“画笔”）来说，这是一种不错的方法，但即使在您描述的在画布上移动形状的简单场景中也开始下降。它最终也会遇到与位图堆栈方法相同的一些问题——你拥有的操作越多，重新创建状态所需的时间就越长，所以你不可避免地最终会定期制作位图快照，等等。

对于像您描述的画布上的对象场景（“移动形状”操作），也有多种方法。一个经典的方法是让您的文档模型成为一组更小、更具体的数据结构，这些数据结构描述了画布的当前状态。想想一个`Shape`类，等等。在最简单的情况下，当用户向画布添加一个矩形时，一个`Shape`实例被添加到一个 z 排序的形状数组中。每当形状列表发生变化时，都会通过按 Z 顺序绘制每个形状来重新生成上下文。为了实现撤消功能，每次更改形状数组时，您还使用`NSUndoManager`来记录一个调用，在回放时会导致发生反向操作。

如果您的形状添加操作如下所示：

```
[shapeArray insertObject: newShape atIndex: 5]; 
```

然后，您将同时使用以下命令执行此操作`NSUndoManager`：

```
[[undoManager prepareInvocationWithTarget: shapeArray] removeObjectAtIndex: 5]; 
```

当用户单击撤消时，`NSUndoManager`播放该调用，并`shapeArray`返回其先前状态。这是经典的`NSUndoManager`模式。它运作良好，但也有一些缺点。例如，在应用程序终止时保留撤消堆栈并不一定很简单。由于应用程序终止在 iOS 上司空见惯，并且用户通常希望应用程序在终止时无缝恢复状态，因此根据您的要求，撤消堆栈无法在应用程序终止后继续存在的方法可能是行不通的。还有其他更复杂的方法，但它们大多只是这些主题之一的变体。值得一读的经典著作是《四人帮》中的命令[模式，设计](http://en.wikipedia.org/wiki/Design_Patterns)[模式](http://en.wikipedia.org/wiki/Command_pattern)。

无论您选择哪种方法，这种应用程序的开发都将是一个挑战。这种图形撤消功能根本不是`UIGraphicsContext`“免费”内置的。您在评论中多次询问示例。很抱歉，这是一个足够复杂的概念，在 StackOverflow 答案的限制范围内，有人提供一个工作示例不太可能。希望这些想法和建议对您有所帮助。当然，还有许多开源绘图应用程序可供您寻找灵感（尽管我个人不知道任何适用于 iOS 的开源绘图应用程序。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:24:32.623

`UIGraphicsContext`没有它自己的撤消堆栈。您需要将正在绘制的每个元素存储在堆栈中，并从该堆栈中删除和添加项目以撤消和重做。NSUndoManager[类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html)可以帮助您管理撤消和重做操作本身的逻辑，但您有责任编写将绘图操作保存到堆栈中的代码，然后从堆栈中读取以重新创建绘图`-drawRect:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:17:15.050

首先设置 undomanager 对象并对其进行初始化以供使用。

```
NSUndoManager *undoObject;
undoObject =[[NSUndoManager alloc] init]; 
```

每次更改上下文时，将撤消对象注册到目标函数以保存 uigraphics 上下文。

```
[[undoObject prepareWithInvocationTarget:self] performUndoWithObject:currentContext withLastpoint:lastPoint andFirstPoint:firstPoint]; 
```

编写 userDefined 函数定义

```
-(void)performUndoWithObject:(CGContextRef )context withLastpoint:(CGPoint)previousLastPoint andFirstPoint:(CGPoint)previousFirstPoint
{
    // necessary steps for undoing operation
} 
```

指定单击撤消按钮时的操作。

```
-(void)undoButtonClicked
{
    if([undoObject canUndo])
    {
        [undoObject undo];
    }   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-01T04:27:30.730

如何在目标 c 中执行撤消和重做操作以在 iOS 中存储值数组。我已经在 Undo 和 Redo Button 中创建了小演示，以替换字符串值。在 ViewController.h 文件中创建两个 NSMutableArray

```
@interface ViewController : UIViewController<UITextFieldDelegate>
{
     NSMutableArray *arrUndo, *arrRedo;
}
@property (weak, nonatomic) IBOutlet UIButton *btnUndo;
@property (weak, nonatomic) IBOutlet UIButton *btnRedo;
@property (weak, nonatomic) IBOutlet UITextField *txtEnterValue;
@property (weak, nonatomic) IBOutlet UILabel *lblShowUndoOrRedoValue;
@property (weak, nonatomic) IBOutlet UIButton *btnOK;
- (IBAction)btnUndo:(id)sender;
- (IBAction)btnRedo:(id)sender;
- (IBAction)btnOK:(id)sender;
@end 
```

实现 ViewController.m 文件以在 undo 或 redo 中添加两个按钮操作方法。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.txtEnterValue.delegate = self;
    arrUndo = [[NSMutableArray alloc] init];
    arrRedo = [[NSMutableArray alloc] init];
}
-(BOOL)canBecomeFirstResponder {
    return YES;
}
- (IBAction)btnOK:(id)sender {

    NSString *str = [NSString stringWithFormat:@"%@",    [self.txtEnterValue.text description]];
    self.txtEnterValue.text = nil;
    self.lblShowUndoOrRedoValue.text = str;
    [arrUndo addObject:str];
    NSLog(@"Text Value : %@", [arrUndo description]);
}
- (IBAction)btnUndo:(id)sender {

    if ([arrUndo lastObject] == nil) {
        NSLog(@"EMPTY");
    }
    else
    {
    [arrRedo addObject:[arrUndo lastObject]];
    NSLog(@"ArrAdd %@", [arrUndo description]);

    [arrUndo removeLastObject];
    for (NSObject *obj in arrUndo) {
        if ([arrUndo lastObject] == obj) {

            self.lblShowUndoOrRedoValue.text = obj;
        }
    }
    NSLog(@"ArrText %@", [arrUndo description]);
    }
}
- (IBAction)btnRedo:(id)sender {

    if ([arrRedo lastObject] == nil) {
        NSLog(@"EMPTY");
    }
    else
    {
    [arrUndo addObject:[arrRedo lastObject]];
    for (NSObject *obj in arrRedo) {
        if ([arrRedo lastObject] == obj) {

            self.lblShowUndoOrRedoValue.text = obj;

        }
    }
    }
    [arrRedo removeLastObject];
} 
```

# node.js - 猫鼬模型测试需要模型

> ID：14644742
> 
> 赞同：7
> 
> 时间：2013-02-01T10:55:40.817
> 
> 标签：node.js, mongoose, mocha.js

我在测试我的猫鼬模型时遇到问题

我有一个像

*   应用程序
    *   楷模
        *   地址
        *   用户
        *   组织
    *   测试

模型用户和组织都需要知道模型地址。我的模型结构如下：

```
module.exports = function (mongoose, config) {

    var organizationSchema = new mongoose.Schema({

        name : {
            type : String
        },
        addresses : {
            type : [mongoose.model('Address')]
        }

    });

    var Organization = mongoose.model('Organization', organizationSchema);

    return Organization;
}; 
```

在我的普通应用程序中，我在需要用户和组织之前需要地址，一切都很好。我现在为用户和组织编写测试。为了注册地址模型，我调用`require('../models/Address.js')`如果我运行一个测试，这工作正常。但是，如果我批量运行所有测试，我会收到一个错误，因为我尝试注册地址两次。

`OverwriteModelError: Cannot overwrite Address model once compiled.`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T11:15:58.813

问题是你不能设置猫鼬模型两次。解决问题的最简单方法是利用 node.js`require`功能。

Node.js 缓存所有调用以`require`防止您的模型初始化两次。但是你用函数包装你的模型。打开它们将解决您的问题：

```
var mongoose = require('mongoose');
var config = require('./config');

var organizationSchema = new mongoose.Schema({
    name : {
        type : String
    },
    addresses : {
        type : [mongoose.model('Address')]
    }
});

module.exports = mongoose.model('Organization', organizationSchema); 
```

另一种解决方案是确保每个模型只初始化一次。例如，您可以在运行测试之前初始化所有模块：

```
Address = require('../models/Address.js');
User = require('../models/User.js');
Organization = require('../models/Organization.js');

// run your tests using Address, User and Organization 
```

或者您可以`try catch`在模型中添加语句来处理这种特殊情况：

```
module.exports = function (mongoose, config) {

    var organizationSchema = new mongoose.Schema({

        name : {
            type : String
        },
        addresses : {
            type : [mongoose.model('Address')]
        }

    });

    try {
        mongoose.model('Organization', organizationSchema);
    } catch (error) {}

    return mongoose.model('Organization');
}; 
```

* * *

**更新：**在我们的项目中，我们有`/models/index.js`文件来处理所有事情。首先，它调用`mongoose.connect`建立连接。然后它需要`models`目录中的每个模型并创建它的字典。因此，当我们需要一些模型（例如`user`）时，我们通过调用`require('/models').user`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-01T13:24:26.000

最佳解决方案（IMO）：

```
try {
  mongoose.model('config')
} catch (_) {
  mongoose.model('config', schema)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T02:13:20.840

这个问题已经有了答案，但要以独特的方式完成此任务，请查看[https://github.com/fbeshears/register_models](https://github.com/fbeshears/register_models)。此示例项目使用一个 register_models.js，其中包括来自文件名数组的所有模型。它工作得非常好，你几乎可以在任何需要它们的地方得到你所有的模型。请记住，node.js 的缓存将在项目运行时缓存项目中的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T11:55:40.423

我使用 try/catch 来解决这个问题，它工作正常。但我认为这不是最好的方法。

```
try{
    var blog = mongoose.model('blog', Article);
} catch (error) {} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-27T05:23:50.343

我通过修补 r.js 并确保我的所有模块都使用 localRequire 调用来解决此问题。

在这里检查线程

[https://github.com/jrburke/requirejs/issues/726](https://github.com/jrburke/requirejs/issues/726)

# c# - “X 不是优先级属性的有效值”BizTalk 2006 R2 通过 EMS 适配器到 EMS

> ID：14644746
> 
> 赞同：1
> 
> 时间：2013-02-01T10:55:52.923
> 
> 标签：c#, .net, biztalk, tibco, tibco-ems

我一直在使用 BizTalk 2006 R2 向 TIBCO EMS 队列发送/接收消息。我正在使用“用于企业 TIBCO EMS 适配器的 Biztalk 适配器”从 BizTalk 到 EMS 进行通信，并且我拥有最新的服务包。

我的编排通过将消息放入 EMS 队列以供第三方应用程序检索而结束，不幸的是，这不起作用。应用程序事件日志显示来自“Microsoft Biztalk 适配器”的错误，说明：

`4 is not a valid value for the Priority property`

以及来自“BizTalk Server 2006”的警告：

`The adapter failed to transmit message going to send port "SendToEMSPort" with URL "TibcoEMS://localhost_7222_e73cb46d-2c01-4055-b4ec-73e9364489a9". It will be retransmitted after the retry interval specified for this Send Port. Details:"1 is not a valid value for the Priority property".`

消息永远不会通过。我已经尝试了所有允许的“优先级”值（0 到 9），但没有成功。有任何想法吗？

# xsd - 是否可以定义具有任意名称但具有特定属性的 XSD 元素

> ID：14644747
> 
> 赞同：1
> 
> 时间：2013-02-01T10:55:53.467
> 
> 标签：xsd, schema, complextype

我想根据模式验证自定义 XML 文档。该文档将包括具有任意数量元素的结构，每个元素都有特定的属性。像这样的东西：

```
<Root xmlns="http://tns">
  <Records>
    <FirstRecord attr='whatever'>content for first record</FirstRecord>
    <SecondRecord attr='whatever'>content for first record</SecondRecord>
    ...
    <LastRecord attr='whatever'>content for first record</LastRecord>
  </Records>
</Root> 
```

XML 文档的作者可以包含任意数量的记录，每条记录都有他或她选择的任意名称。这怎么可能根据 XML Schema 来验证呢？

我试图在架构中指定适当的结构类型，但我不知道如何在适当的位置引用它：

```
<xs:schema xmlns="http://tns" targetNamespace="http://tns" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:complexType name="RecordType"> <!-- This is my record type -->
        <xs:simpleContent>
            <xs:extension base="xs:string">
            <xs:attribute name="attr" type="xs:string" use="required" /> 
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:element name="Root">
        <xs:complexType>
            <xs:sequence>
                <xs:element minOccurs="1" maxOccurs="1" name="Records">
                    <!-- This is where records should go -->
                    <xs:complexType /> 
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:19:53.940

您所描述的在 XSD 1.1 中是可能的，在 XSD 1.0 中也可能有非常相似的东西，这并不是说这是一个可取的设计。

在 XML 词汇表中，元素类型通常传达有关信息类型的相关信息，它是元素类型的名称，用于驱动大多数 XML 模式语言中的验证；您描述的设计（有些人会说）有点像问我是否可以在 Java 中定义一个对象类，或者在 C 中定义一个结构，它遵守成员可以具有任意名称的约束，只要其中一个是一个值为 42 的整数。这或类似的东西很可能是可能的，但大多数有经验的设计师会强烈认为这几乎肯定不是解决任何正常问题的正确方法。

另一方面，用系统做不寻常和尴尬的事情有时可以帮助学习如何有效地使用系统。（你永远不会很好地了解一个系统，我的一个朋友曾经说过，直到你彻底滥用它。）所以我的回答有两个部分：如何尽可能接近你在 XSD 中指定的设计，以及你可能考虑的替代方案反而。

在 XSD 1.1 中指定您似乎想要的语言的最简单方法是在 Records 元素上定义一个断言，它表示 (1) Records 的每个子项都有一个“attr”属性，并且 (2) Records 的子项没有任何属性孩子们。你会有这样的东西：

```
...
<xs:element minOccurs="1" maxOccurs="1" name="Records">
  <xs:complexType>
    <xs:sequence>
      <xs:any/>
    </xs:sequence>
    <xs:assert 
      test="every $child in * satisfies $child/@attr"/>
    <xs:assert 
      test="not(*/*)"/>       
  </xs:complexType> 
</xs:element>
... 
```

如您所见，这与 InfantPro'Aravind' 所描述的非常相似；它通过使用断言而不是类型分配来施加您施加的约束，从而避免了 InfantPro'Aravind' 确定的问题。

在 XSD 1.0 中，断言不可用，我能想到的接近您描述的设计的唯一方法是定义一个抽象元素，我将其称为 Record，作为 Records 的子元素，并要求元素实际上作为 Records 的子级出现的，被声明为可以替代这个抽象类型（这反过来又要求它们的类型派生自 RecordType 类型）。您的架构可能会这样说：

```
<xs:element name="Root">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Records">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Record"/>
          </xs:sequence>
        </xs:complexType> 
      </xs:element>        
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:complexType name="RecordType"> 
  <xs:simpleContent>
    <xs:extension base="xs:string">
      <xs:attribute name="attr" 
                    type="xs:string" 
                    use="required" /> 
    </xs:extension>
  </xs:simpleContent>
</xs:complexType>

<xs:element name="Record" 
            type="RecordType" 
            abstract="true"/> 
```

在架构的其他地方（可能在单独的架构文档中），您将需要声明 FirstRecord 等，并指定它们可替代 Record，因此：

```
<xs:element name="FirstRecord" substitutionGroup="Record"/>
<xs:element name="SecondRecord" substitutionGroup="Record"/>
<xs:element name="ThirdRecord" substitutionGroup="Record"/>
... 
```

在某种程度上，这符合您的描述，尽管我怀疑您不想声明 FirstRecord、SecondRecord 等。

在描述了 XSD 可以执行您所描述的方式之后，我还应该说我不会推荐这两种方法中的任何一种。相反，我会以不同的方式设计 XML 词汇表，以便更自然地使用 XSD。

在您指定的设计中，每条记录似乎都具有相同的类型，但除了元素的内容之外，它们还可以通过具有不同的名称（FirstRecord、SecondRecord 等）来传达一定数量的额外信息。 . 这些附加信息可以很容易地在属性中传达，这将允许您将 Record 指定为具体元素，而不是抽象元素，从而为其提供额外的“替代名称”属性。然后，您的示例数据将采用如下形式：

```
<Root xmlns="http://tns">
  <Records>
    <Record 
      alternate-name="FirstRecord"
      attr='whatever'>content for first record</Record>
    <Record
      alternate-name="SecondRecord"
      attr='whatever'>content for first record</Record>
    ...
    <Record 
      alternate-name="LastRecord"
      attr='whatever'>content for first record</Record>
  </Records>
</Root> 
```

这将或多或少可以接受，具体取决于您或您的数据提供者或工具链中的工具是否将字符串“FirstRecord”作为元素类型名称而不是属性值附加了一些神秘或其他意义。

或者，可以说设计的重点是允许 Records 包含任意结构的任意元素序列（因此，限制`xs:string`只是您的示例的工件，实际上并不真正需要）正如我们所拥有的，对于每条记录，“attr”属性中记录的信息。很容易指定这一点：将“记录”定义为具有“属性”属性的具体元素，接受一个可以是任何 XML 元素的子元素：

```
<xs:element name="Record">
  <xs:complexType>
    <xs:sequence>
      <xs:any processContents="lax"/>
    </xs:sequence>
    <xs:attribute name="attr" 
                  use="required" 
                  type="xs:string"/>
  </xs:complexType>
</xs:element> 
```

'processContents' 属性的值可以更改为'strict' 或'skip' 或保持在'lax'，这取决于您是否想要验证（和声明）FirstRecord、SecondRecord 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:35:18.423

我想这仅靠 XSD 是不可能的！

当你说

> 任意数量的记录，每个记录都有他或她选择的任意名称。

这迫使我们使用`<xs:any/>`元素但是！将元素声明为`any`不允许您验证其下的属性..

所以..答案是否定的！

# java - 从 byte[] 转换为字符串时保留 \n

> ID：14644749
> 
> 赞同：-1
> 
> 时间：2013-02-01T10:56:00.083
> 
> 标签：java, android, string, bytearray

我有字节数组，我希望将它们转换为字符串，直到收到 \n，然后我想创建一个新字符串。就像是：

```
if (dataReceived.charAt(i) != '\n') {
    parseCommand = parseCommand + dataReceived.charAt(i);

} else if (dataReceived.charAt(i) == '\n') {
    parseCommand = "";
} 
```

但是当我从 byte[] 转换为字符串时，没有 \n 来测试字符串。我怎样才能保存它们？做这个的最好方式是什么？

缓冲传入的字节数组/块直到我有一个完整的行（例如，当收到换行符时）然后从这些字节数组中创建字符串，或者我可以将它们保存在一个字符串中，是不是更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:02:07.607

也许你应该试试[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)。

```
String data = ...;
Scanner s = new Scanner(data);
while (s.hasNextLine()) {
     String next = s.nextLine();
     // do something with next
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T11:21:47.350

尝试这样做：

```
char c = dataReceived.charAt(i);

if (c != '\n' && c != '\r')
    parseCommand = parseCommand + c;
else
    parseCommand = ""; 
```

# php - 特殊的php正则表达式？

> ID：14644753
> 
> 赞同：-1
> 
> 时间：2013-02-01T10:56:11.293
> 
> 标签：php, regex, preg-match

以下正则表达式对我的字符串有效，

```
$t = "('Blah.blahh', 'blahh')";
$pattern = "/\((?:[^{}]+|(?R))*\)/"; 
```

但我需要修改这个正则表达式以匹配 "_t('Blah.blahh', 'blahh')" 。

有谁知道如何为“_t('Blah.blahh', 'blahh')”写一个表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:08:46.263

像这样的东西？

```
$pattern = "_t\((?:[^{}]+|(?R))*\)"; 
```

# c# - 将数据从视图传递到控制器和控制器以查看

> ID：14644754
> 
> 赞同：1
> 
> 时间：2013-02-01T10:56:13.070
> 
> 标签：c#, asp.net-mvc, ienumerable

我将视图中的日期传递给控制器​​，然后我将从控制器获取这两个日期之间的记录数以查看。由于将获取多个记录，因此我使用 IEnumerable 以便显示记录列表。但是在使用 IEnumerable 时，它​​无法从视图中传递选定的日期并传递给控制器​​。任何人都可以解释我为什么？

这是我的代码：

**查看：Index.aspx**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>>" %>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
 <link rel="stylesheet" href="../../jquery-ui-1.8.17.custom/development-bundle/themes/base/jquery.ui.all.css">

<script src="../../jquery-ui-1.8.17.custom/development-bundle/jquery-1.7.1.js"></script>

<script src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.core.js"></script>

<script src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.widget.js"></script>

<script src="../../jquery-ui-1.8.17.custom/development-bundle/ui/jquery.ui.datepicker.js"></script>

<link rel="stylesheet" href="../../jquery-ui-1.8.17.custom/development-bundle/demos/demos.css">

<script>

    function PassValue() {
        var todate = document.getElementById("Date_Modified");
        var fromdate = document.getElementById("Date_Created");
        todate.value = document.getElementById("txtToDate").value;
        fromdate.value = document.getElementById("txtFromDate").value;
    }

    $(function () {

        $("#txtToDate").datepicker({
            altField: "#alternate",
            altFormat: "DD, d MM, yy"
        });

        $("#txtFromDate").datepicker({
            altField: "#alternate",
            altFormat: "DD, d MM, yy"
        });
    });

</script>

<div>
<h2>Search by Date</h2>
     <% using (Html.BeginForm())
        { %>
        <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>

         <%= Html.HiddenFor(model=>model.Date_Created) %>
         <%= Html.HiddenFor(model=>model.Date_Modified) %>
         <table>
            <tr>
             <td>Enter From Date</td>
            <td><input type="text" id="txtFromDate"></td>
            <td>Enter To Date</td>
            <td><input type="text" id="txtToDate"></td>

            <td><input type="submit" name="btnSearchDate" value="Search" onclick="PassValue()" /></td>
            </tr>
        </table>
    <% } %>
</div>
<div id="showtable">
<table>
    <tr>
        <th>
            Request_For_Id
        </th>
        <th>
            Territory
        </th>
        <th>
            Estimated_Amount
        </th>
        <th>
            Actual_Amount
        </th>
        <th>
            Date_Created
        </th>
        <th>
            Compute_CRM_State
        </th>
        <th>
            Compute_Event_Type
        </th>
    </tr>
    <% foreach (var item in Model)
       { %>
     <tr>
        <td>
            <%: Html.DisplayFor(modelItem => item.Request_For_Id)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Territory)%>
        </td>

        <td>
            <%: Html.DisplayFor(modelItem => item.Estimated_Amount)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Actual_Amount)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Date_Created)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_CRM_State)%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_Event_Type)%>
        </td> 
    </tr>
    <%} %>
</table>
</div>
</asp:Content> 
```

**控制器**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ApricaCRMEvent.Models.CRM.DatabaseEntities;
using ApricaCRMEvent.Models.CRM.DataLayer;

namespace ApricaCRMEvent.Controllers.CRM
{
    public class SearchDateWiseController : Controller
    {
        //
        // GET: /SearchDateWise/
        CRM_Doctor_Request dateObj = new CRM_Doctor_Request();

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(CRM_Doctor_Request model)
        {

    return View(SearchMDLNoDL.getDateWiseDetails(model.Date_Created,model.Date_Modified).ToList());
        }

    }
} 
```

使用 IEnumerable 时显示编译错误

```
Line 49:         <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>
Line 50: 
Line 51:          **<%= Html.HiddenFor(model=>model.Date_Created) %>
Line 52:          <%= Html.HiddenFor(model=>model.Date_Modified) %>**
Line 53:          <table> 
```

编译器错误消息：CS1061：“System.Collections.Generic.IEnumerable”不包含“Date_Created”的定义，并且无法找到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“Date_Created”（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:35:15.027

试试这样：

```
 <% foreach (var date in Model) { %>
        <%= Html.HiddenFor(date=>date.Date_Created) %>
        <%= Html.HiddenFor(date=>date.Date_Modified) %>
    <% } %> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T11:33:40.730

在这种情况下，您的视图模型是 IEnumurable。它只包含在枚举数上定义的方法。你有两个选择。

选项一：定义如下视图模型

```
public class MyViewModel {
    public CRM_Doctor_Request ReportRequests { get; set;}
    public DateTime Date_Created { get; set;}
    public DateTime Date_Modified { get; set;}
} 
```

您现在可以使用此视图模型将数据传递给视图。

第二种选择：使用 ViewBag 将日期传递给视图。在您的控制器中

```
ViewBag.Date_Created = dateCreated;
ViewBag.Date_Modified = dateModified; 
```

现在可以从视图中访问这些值

我个人会选择选项一，因为它很干净

# css - 如何在响应式网站的中心对齐 div

> ID：14644760
> 
> 赞同：-2
> 
> 时间：2013-02-01T10:56:30.453
> 
> 标签：css

我的网站有一个问题，即我网站的一个 div 是左对齐的，但无论屏幕大小如何，我都必须让它出现在网页中间。这是实时链接：

```
 http://m.greatofficiants.com 
```

我需要在页面中间对齐标题内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:03:16.350

你需要用

```
margin: 0 auto; 
```

或者

```
margin-left: auto;
margin-right: auto; 
```

此[链接](http://css-tricks.com/centering-in-the-unknown/)将深入向您解释如何正确执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:09:00.160

首先，您对响应式网站的基础是完全错误的......

您需要 100% 构建而不是 px

因此，如果您有填充和宽度

就像

```
padding:2%;
width:96%; 
```

在您的站点足够好之前，应该在这个庄园中建造洞站点 - 然后您开始将项目居中

**编辑***

请注意，您的网站内可以有具有宽度的对象...但是您网站的**主框架**应该严格按照**百分比**构建...

如果您想将宽度为 320px fx 的 div 居中。这是电话的最低宽度所以说明对象的宽度，然后添加边距：0 auto;

**编辑****

所以在你的情况下你想添加

```
width:100%; 
```

对于正文和包装器，那么您的所有文本换行都应该与之前解释过的庄园相同（填充可能会有所不同），具体取决于您的网站，但我发现 2% 是一个很好的边距

```
padding:2%;
width:96%; 
```

**编辑** ***

最后，我刚刚发现您有 IE 样式表，在为制作移动网站而进行开发时，您不需要这些样式表，它只需 3 个额外的调用，从长远来看，这会使您的网站变慢

按照这个[链接](http://html5boilerplate.com/)有一个很好的板来工作。它是一个样板，它使 yoru 网站更快，并有所有正确的脚本和 css 文件可以输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:00:50.690

试试这个：

```
.header {
  width:1000px; /* what ever size you want*/
  margin-left:auto;
  margin-right:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:02:58.057

```
<div class="social">
  <p style="text-align: center;">
    <a href="http://m.greatofficiants.com"><img src="http://m.greatofficiants.com/wp-content/themes/twentyeleven/images/logo3.png"/></a>
    <div class="im2"><p style="font-size:12px; font-weight:bold;">Toll Free (855) Wed-Vows</p></div><br />
    <div class="im1"><p style="font-size:12px; font-weight:bold;"> Local (562) 435-4000</p></div>
  </p>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:45:37.147

您必须删除您的`float:left`for .social 并放置 a`margin:0 auto;`和 a width:x% 并`text-align:center`为该课程加分。我认为您可能还需要重新调整 .social 的一些子元素。

# mysql - 使用 select、group by 和 count 时如何获得非空结果集？

> ID：14644761
> 
> 赞同：3
> 
> 时间：2013-02-01T10:56:38.837
> 
> 标签：mysql, select, count, group-by

这是当前查询：

```
SELECT status.ct_reconcile_status, 
       IFNULL(COUNT(status.ct_reconcile_status), 0) AS sch_change_status_num 
FROM   db_crewops_cm_action status 
WHERE  status.ct_reconcile_status IN ( 'SUCCESS', 'FAILED' ) 
       AND status.updated_ts > UTC_TIMESTAMP() - INTERVAL 60 minute 
GROUP  BY status.ct_reconcile_status; 
```

我想要得到的结果是这样的：

```
SUCCESS   5
FAILED    9 
```

没关系。问题是我可能会遇到两种状态的结果数都是 0 的情况，在这种情况下我想要这个：

```
SUCCESS   0
FAILED    0 
```

而不是一个空的结果集（我现在得到的）。我有一个一般的想法，我应该自己加入表或使用 WITH 子句，但我不知道如何开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:08:16.723

尝试类似：

```
SELECT a.status AS ct_reconcile_status,
       (IFNULL(b.sch_change_status_num,0) + a.num) AS sch_change_status_num
FROM
  (SELECT 'SUCCESS' AS status, 0 AS num
   UNION
   SELECT 'FAILED', 0) a
LEFT JOIN
  (SELECT status.ct_reconcile_status, 
          COUNT(status.ct_reconcile_status) AS sch_change_status_num 
   FROM   db_crewops_cm_action status 
   WHERE  status.ct_reconcile_status IN ( 'SUCCESS', 'FAILED' ) 
          AND status.updated_ts > UTC_TIMESTAMP() - INTERVAL 60 minute 
   GROUP  BY status.ct_reconcile_status) b
ON a.status = b.ct_reconcile_status 
```

您可以删除`status.ct_reconcile_status IN ( 'SUCCESS', 'FAILED' ) AND`，但这可能会更慢。

# android - Rhomobile，BLE112 蓝牙设备 - iOS 和 android 应用程序

> ID：14644768
> 
> 赞同：2
> 
> 时间：2013-02-01T10:57:04.000
> 
> 标签：android, ios, rhomobile, bluetooth-lowenergy

我已经搜索了一段时间，并决定在这里发布一个问题，看看是否有人已经走过这条特定的道路。

*   我正在使用 Bluegiga BLE112 芯片开发支持蓝牙的设备。他们宣布这款芯片可轻松用于 iOS 设备（这是我们选择它的主要原因）
*   该设备需要与我们需要为 iOS、Android、Windows Phone 和 Blackberry 开发的应用程序进行通信。由于这个需要，我决定使用 Rhomobile，因为它似乎是唯一支持为 iOS 开发 BT 应用程序而无需开发更多插件的应用程序。
*   我只需要向设备的内部存储器发送小消息（如命令、小字符串），有时还需要发送更大的文件。
*   在 Rhomobile 的 BT 文档中，他们指出对于 iOS，只能在 iOS 设备之间进行通信（我认为他们这样说是因为 Apple 施加的 MiFi 限制，但使用 Bluegigas 芯片不是问题......）

我的问题是：

由于 Bluegiga 的文档中有使用其芯片与 iOS 通信的设备示例，因此我应该能够使用 Rhomobile 进行开发，而不受上述限制的影响。在让我的公司花钱订购芯片和开发板之前，我想尽可能确定。有没有人尝试过这个，我的想法是否遗漏了什么？

谢谢大家的时间。

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:25:58.897

好问题，我想我能理解你困惑的原因。主要原因是许多人/产品/框架没有明确提及他们是在谈论蓝牙经典还是蓝牙低功耗 (BLE)。这些都是两个不同的东西，即使它们被称为“蓝牙”，它们也不能与另一个对话。（有些设备既可以是经典设备，也可以是低功耗蓝牙，这允许它连接到任何一种类型）

好的，现在来回答你的问题：

1.  bluegiga 加密狗是 BLE

2.  Rhomobile 指的是 API 的蓝牙经典版本。

在 iOS 上，BLE API 对应用程序开放，但 Classic 在 iOS 上受到限制，应用程序在 iOS 上使用 Classic 蓝牙的一种方式是通过 Gamekit API，但这只有在与 iOS 设备通信时才有可能，因此它不会连接到另一个 Android或同样是经典的 Win 设备。不用说，BLE API 无论如何都无法连接到 calssic。

bluegiga 示例是 BLE 示例，Apple 也有关于如何使用 BLE 的很好的文档和示例/示例，所以是的，在 iOS 上使用 BLE 构建设备和应用程序很容易。除了您可以使用任何 BLE 芯片的任何特定芯片之外，没有什么特别之处 - 今天有很多供应商。

但是 Android（我猜 Windows 也是如此）还没有可供应用程序使用的 BLE API :(（我认为它即将推出 :)）

所以我希望这能把事情弄清楚一点。

# android - Android 应用强调拼写错误的单词

> ID：14644769
> 
> 赞同：1
> 
> 时间：2013-02-01T10:57:10.813
> 
> 标签：android, textview, spell-checking, underline, misspelling

> **可能重复：**
> [如何在android中以编程方式禁用拼写校正](https://stackoverflow.com/questions/7330234/how-to-disable-spell-correction-programmatically-in-android)

我创建了一个在屏幕上显示俚语的应用程序，例如 wassup 和 yessir。这些词显示在文本视图中，并在我的设备上运行应用程序时显示为下划线，因为它们显然不在字典中。我不想要这个。

在下面的代码中，question[i] 是一个包含俚语的字符串数组：

```
 LayoutInflater li=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = li.inflate(R.layout.answersrow, null);

        TextView tv=(TextView)v.findViewById(R.id.answer);
        Qname=question[i];
        tv.setText(Qname); 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:59:43.653

答案是在editText的xml中设置：

```
android:inputType="textNoSuggestions" 
```

# bash - 用于递归删除特定图像文件的 Shell 脚本

> ID：14644774
> 
> 赞同：1
> 
> 时间：2013-02-01T10:57:18.070
> 
> 标签：bash, shell, ubuntu

我确实有一个第三方程序，可以将文件上传到网络服务器。这些文件是图像，位于不同的文件夹中并具有不同的名称。这些文件获取到数据库的引用。该程序会导入新图像并将其上传到这些文件夹。如果有一个现有文件，它只需要名称并添加一个特殊的计数器，在数据库中创建一个新的引用，旧的将被删除。但它并没有删除文件，而是保留了一份副本。

可以说，我们有一个图像文件名“109101.jpg”。该文件有一个新版本，它将以文件名上传：“109101_1.jpg”。例如，这会更进一步，直到“109101_103.jpg”。现在，在此之前的所有 103 个文件都已过时，可以删除。

由于该程序不可编辑且第三方，我无法更改该行为。相反，我需要一个 Shell 脚本，它遍历这些文件夹并删除最新图像之前的所有图像。所以只有“109101_103.jpg”会存活下来，这个数字之前的所有其他人都会被删除。作为副作用，还有图像，带有双下划线名称（只有这些，没有三倍左右）。例如：“109013_35_1.jpg”是原始的，下一个是“109013_35_1_1.jpg”，现在是“109013_35_1_24.jpg”。所以只有“109013_35_1_24.jpg”必须生存。

现在我什至没有想法，如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:12:40.577

这是一条单线管道，因为我喜欢它。显示插入换行符，因为我不是邪恶的。

```
for F in $(find . -iname '*.jpg' -exec basename {} .jpg \;
             | sed -r -e 's/^([^_]+|[^_]+_[^_]+_[^_]+)_[0-9]+$/\1/'
             | sort -u); do
    find -regex ".*${F}_[0-9]*.jpg" 
       | sort -t _ -k 2 -n | sort -n -t _ -k 4 -s | head -n -1;
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:24:05.373

以下脚本删除给定目录中的文件：

```
#! /bin/bash
cd $1
shopt -s extglob                                       # Turn on extended patterns.
shopt -s nullglob                                      # Non matched pattern expands to null.
delete=()
for file in               +([^_])_+([0-9]).jpg \
        +([^_])_+([0-9])_+([0-9])_+([0-9]).jpg ; do    # Only loop over non original files.
    [[ $file ]] || continue                            # No files in the directory.
    base=${file%_*}                                    # Delete everything after the last _.
    num=${file##*_}                                    # Delete everything before the last _.
    num=${num%.jpg}                                    # Delete the extension.
    [[ -f $base.jpg ]] && rm $base.jpg                 # Delete the original file.
    [[ -f "$base"_$((num+1)).jpg ]] && delete+=($file) # The file itself is scheduled for deletion.
done
(( ${#delete[@]} )) && rm "${delete[@]}" 
```

编号的文件不会立即删除，因为这可能会删除另一个文件的“后续”文件。它们只是在一个数组中被记住并在最后被删除。

要递归应用脚本，您可以运行

```
find /top/directory -type d -exec script.sh {} \; 
```

# c# - 禁用WPF应用程序中10个文本框的样式

> ID：14644778
> 
> 赞同：0
> 
> 时间：2013-02-01T10:57:22.930
> 
> 标签：c#, wpf, xaml, styles, app.xaml

我`TextBox`在我的应用程序中使用了 10，并且在同一个应用程序中我定义了它的样式，`App.xaml`它适用于我的应用程序中的所有文本框。如何禁用申请单的样式`TextBox`。

任何人都可以帮助我解决这个问题。

我使用下面的代码来设置样式

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Border Background="White" 
                    x:Name="Bd" BorderBrush="#FF50729f" CornerRadius="3"
                    BorderThickness="1"
                >
                    <ScrollViewer x:Name="PART_ContentHost"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Background" TargetName="Bd" Value="#FFe0dfe3"/>
                        <Setter Property="BorderBrush" TargetName="Bd" Value="#FF9da3ab"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <Border BorderBrush="#FFd22c2c" BorderThickness="1" 
                                Background="#FFfce8e8" CornerRadius="3" >
                    <AdornedElementPlaceholder></AdornedElementPlaceholder>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Background"  Value="#FFe0dfe3"/>
            <Setter Property="BorderBrush" Value="#FF9da3ab"/>
        </Trigger>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
            Value="{Binding RelativeSource={RelativeSource Self},
            Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:19:23.270

如果您只想要默认样式，那么

```
<TextBox Style="{x:Null}"/> 
```

否则**Cédric Bignon**定义目标类型的答案（如下所示）将完成这项工作。您的应用程序 TextBoxStyle 不会继承任何属性

```
 <TextBox>
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}">
               <!-- your setters-->
            </Style>
        </TextBox.Style>
    </TextBox> 
```

如果您想稍微更改默认应用程序样式，请使用以下技术，您可以在您的样式中重新定义您希望与默认不同的属性或定义其他属性

```
 <TextBox>
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
             <!-- your setters-->
            </Style>
        </TextBox.Style>
    </TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:00:56.687

只需使用空样式：

```
<TextBox>
    <TextBox.Style>
        <Style>

        </Style>
    </TextBox.Style>
</TextBox> 
```

# opencl - 将结构传递给 openCL 内核

> ID：14644782
> 
> 赞同：0
> 
> 时间：2013-02-01T10:57:35.653
> 
> 标签：opencl, pyopencl, opencl.net

我想将一个结构传递给opencl内核，结构是

```
struct test
{
    int *x;
    float *y;
    char *z;
}; 
```

内存分配和初始化就像

```
 struct test t;
t.x = (int*)malloc(sizeof(int)*100);
t.y = (float*) malloc (sizeof(float)*50);
t.z = (char*) malloc (sizeof(char) *25);
  for(i = 0;i<100;i++)
  {
      t.x[i] = i;
      if(i<50)
          {
              t.y[i] = i;
          if(i<25)
              t.z[i] = 'a';
          }
  } 
```

我可以将这样的结构传递给opencl内核吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:40:22.987

您*可以*传递这样的结构，但它没有意义，因为`x`,`y`和`z`指向不同的内存区域。这些内存缓冲区中的每一个都必须单独传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:16:41.527

最好在主机端分配内存并将它们作为内核参数发送给内核，而不是结构。

# php - JSON 执行问题

> ID：14644783
> 
> 赞同：1
> 
> 时间：2013-02-01T10:57:38.803
> 
> 标签：php, ajax, windows, json

我确定这可能是我很愚蠢，但我想确认这个问题。我正在构建一个 Windows 8 应用程序并从 mysql 服务器加载数据，但我似乎无法解决这个问题。从一些阅读中我猜问题是代码在 json 请求正确之前正在执行，有没有办法解决它。return 在那里，因为它在一个函数中，该函数返回数据然后显示它。“SampleItems[0]”显示完美，但 json 中的内容不会，但控制台日志显示它正在从服务器获取数据。提前感谢您的帮助！

```
 var sampleItems = [];
    sampleItems[0] = { group: sampleGroups[count], title: "New Image", subtitle: "", description: "", content: "", backgroundImage: "/images/add.png" };

        //this code calls to our cloud based service which gets the data which is needed and returns it in a JSON object back for this to handle
        $.getJSON('http://pumpstationstudios.com/tumapics/services/getimages.php', function (data) {
            var service_url = 'http://pumpstationstudios.com/tumapics/';
            var count = 1;

            images = data.items;
            $.each(images, function (index, image) {
                image.image = service_url + image.image;
                sampleItems[count] = { group: sampleGroups[count], title: "Hello", subtitle: "", description: "", content: "", backgroundImage: image.image };
                count++;
            });
        });

    return sampleItems; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:09:07.487

碰巧的是，几个小时前我[回答](https://stackoverflow.com/a/14638365/1741542)了一个类似的问题[javascript code execution and ajax async](https://stackoverflow.com/q/14638158/1741542)

本质上，发生的事情是

```
$.getJSON('http://.../getimages.php', function(data) {
// process data
});

// this runs *before* "process data"
return sampleItems; 
```

`sampleItems`这意味着，在它被`getJSON`回调函数填充之前，你 return 。

要解决这个问题，你必须在回调函数中做你的处理。

# jquery-ui - jquery中的嵌套对象

> ID：14644785
> 
> 赞同：1
> 
> 时间：2013-02-01T10:57:46.650
> 
> 标签：jquery-ui, function, object, jquery

我有以下代码

```
(function($) {
       $.object1=function(){
         $.method=function(){
       }
     };

      $.object2 = function(){

     };

 })(jquery); 
```

我想从object2访问object1的方法。可能吗？？我试过`$.object1.method();`但没有用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:02:00.717

更好的方法，

```
var object1 = function(){}
object.prototype = {
method:function(){}
};

var object2 = function(){
var obj1 = new object1();
obj1.method();
}

$(function(){
object2();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:15:41.130

另一种看待它的方式：[小提琴](http://jsfiddle.net/5MMAF/4/)

```
$.object1 =  {
    method: function () {
        alert("hi from o1.method");
    }
};

$.object2 = {
    method: function () {
         $.object1.method();
    }
};  

$( function() {
       $.object2.method();
}); 
```

# javascript - 从给定字符串中提取所有匹配项

> ID：14644788
> 
> 赞同：0
> 
> 时间：2013-02-01T10:57:52.060
> 
> 标签：javascript, regex, split, match, trim

我有字符串：

> =?windows-1256?B?IObH4cPM5dLJIA==?= =?windows-1256?B?x+HYyO3JIC4uLg==?= =?windows-1256?B?LiDH4djj5s3Hyg==?= =?windows-1256?B?Rlc6IOTP5skgKA ==?=

我需要提取 和 之间的所有匹配`?B?`项`==?=`。

结果我需要：

> IObH4cPM5dLJIA
> 
> x+HYyO3JIC4uLg
> 
> LiDH4djj5s3Hyg
> 
> Rlc6IOTP5skgKA

PS 此字符串取自 textarea，在函数执行后，脚本应将当前 textarea 值替换为结果。我什么都试过了

```
var result = str.substring(str.indexOf('?B?')+3,str.indexOf('==?=')); 
```

几乎按照我需要的方式工作，但它只找到第一个匹配项。这不起作用：

```
function Doit(){
    var str = $('#test').text();
    var pattern = /(?B?)([\s\S]*?)(==?=)/g;
    var result = str.match(pattern);

    for (var i = 0; i < result.length; i++) {
        $('#test').html(result);
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:08:27.050

`?`在正则表达式中具有特殊含义，它匹配前面的字符 0 或 1 次。

所以，`?`应该用`\?`

* * *

所以正则表达式应该是

```
(?:\?B\?)(.*?)(?:==\?=) 
```

`[\s\S]`没有效果，类似于`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:47:32.983

元字符`?`需要转义，即`\?`它被视为文字`?`。

`[\s\S]`很重要，因为它匹配所有字符，*包括*换行符。

```
var m,
    pattern = /\?B\?([\s\S]*?)==\?=/g;

while ( m = pattern.exec( str ) ) {
    console.log( m[1] );
}

// IObH4cPM5dLJIA
// x+HYyO3JIC4uLg
// LiDH4djj5s3Hyg
// Rlc6IOTP5skgKA 
```

或者用更长但可能更清晰的方式来编写上述循环：

```
m = pattern.exec( str );

while ( m != null ) {
    console.log( m[1] );
    m = pattern.exec( str );
} 
```

使用全局标志时， String`match`方法不返回捕获组，而只返回完整匹配本身。

`exec`相反，可以从对 RegExp方法的多次调用中收集全局匹配的捕获组匹配。匹配的索引`0`是完整匹配，并且进一步的索引对应于每个捕获组匹配。请参阅[MDN 执行](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)。

# php - 将表单提交延迟 5 秒并显示 jquery 对话框？

> ID：14644790
> 
> 赞同：1
> 
> 时间：2013-02-01T10:57:55.960
> 
> 标签：php, javascript, html, login

我需要一些帮助。我试图将表单的提交延迟 5 秒，以便在提交登录表单之前出现一个 jquery 对话框加载框。

目前，我使用的代码确实会延迟提交，但它会阻止表单提交数据并且不会让用户登录。

我很确定这是因为我在我的 javascript 中使用了 e.preventDefault 但是没有它它就无法工作，谁能告诉我如何延迟表单提交并成功提交数据，以便它确实登录用户。

谢谢。

```
<div id="login">
      <?php
        if (!logged_in()) {
            ?>

      <form id="myform" form action="login.php" rel="shadowbox" method="post" class="loginform">

    Email
      <input type="text" name="email" maxlength="30" />

    Password
    <input type="password" name="password" maxlength="30" />

    <input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" name="submit" class="loginbutton" value="Login" />

                </form>

               <?php
        }
        if (logged_in()) {
            ?>

                 Logged in as, <?php echo $_SESSION['email'] ?>. <a href="dashboard.php">Dashboard</a>, <a href="logout.php">Logout</a> |&nbsp;&nbsp;&nbsp;&nbsp;<a href="dashboard.php"><div class="login_settings" id="login_settings"></div></a>
    <?php
        }

        ?></div>

        <script>
        $('#myform').submit(function (e) {
        var form = this;
        e.preventDefault();
        setTimeout(function () {
            form.submit();
        }, 3000); // in milliseconds
    });
    </script>

        <script>
        $(document).ready(function() {
        $('#myform').submit(function() {Shadowbox.open({
            content:    '<iframe src="login.php" width="500" height="300" scrolling="no" style="overflow:hidden; border:none;"></iframe>',
            player:     "html",
            height:     300,
            width:      500
        });

             });

        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:15:54.540

使用单个提交处理程序。我在我的本地系统上试过这个并且它有效。

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('#myform').submit(function(e) {
                var form = this;
                e.preventDefault();

                Shadowbox.open({
                    content:    '<iframe src="login.php" width="500" height="300" scrolling="no" style="overflow:hidden; border:none;"></iframe>',
                    player:     "html",
                    height:     300,
                    width:      500
                });

                setTimeout(function () {
                    form.submit();
                }, 3000); // in milliseconds
            });
        });
    </script> 
```

# android - android服务（继续在后台运行语句让我很困惑）

> ID：14644792
> 
> 赞同：1
> 
> 时间：2013-02-01T10:58:10.860
> 
> 标签：android, android-service

我对 android 服务有些困惑根据文档，它将继续在主线程的后台运行。它不在不同的线程中运行。

我的疑问是继续在后台运行是什么意思。它会一次又一次地执行 onStartCommand() 吗？我对这条线真的很困惑（继续在后台运行）

如果它不会一次又一次地执行onStartCommand，那么继续运行有什么好处，如果它一次又一次地执行onStartCommand，那么它会越来越多地使用cpu

让我感到困惑的线在图像中突出显示，请看一下 [![在此处输入图像描述](../Images/e9457abb6f310afe1d0670e13399b405.png)](https://i.stack.imgur.com/Q4QDT.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:33:15.373

正如评论中已经指出的那样，对于您的特定目的（监控设置，此处：音量），您可以遵循此处描述的非轮询方法：[是否有针对音量更改的广播操作？](https://stackoverflow.com/questions/6896746/android-is-there-a-broadcast-action-for-volume-changes)

一般来说，在像 Android 这样的现代（虽然不完美）环境中，几乎*没有*理由主动*投票*，因为没有人能承受浪费这么多资源，而且，你总是有错过事件的风险，所以你会想要更频繁地进行轮询——这是一场你的实现总是会失败的竞赛。

再一次，以下陈述是完全*错误*的：

*   A`Service`在您的应用程序的主/UI 线程上运行。如果您认为是这种情况，那么您需要阅读[`android:process`](http://developer.android.com/guide/topics/manifest/activity-element.html#proc)清单`activity`标签的属性。还。即使您不让服务在单独的进程中运行，*服务在应用程序的主/UI 线程上运行*的短语也表明您的主/UI 线程被您的服务阻塞。当然，希望没有人离开 iot 艺术；在应用程序的主/UI 线程上处理服务事件并将任务委托给工作线程很容易，这是每个理智的实现都应该做的。

*   使用`START_STICKY`，您可以确保您的服务在启动后始终运行。当然，这是幼稚的，并且意味着无论谁声称这都没有完全理解这个标志的含义以及[Android Services 的进程生命周期](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)的描述。引用：如果您阅读该部分，您将知道如果 Android 需要内存用于另一个具有更高优先级的任务并且*您的服务与用户的应用程序无关*`Note this means that most of the time your service is running, it may be killed by the system if it is under heavy memory pressure.`，Android 将随时终止您正在运行的服务的进程，恕不另行通知*目前看*。换句话说，如果系统内存不足并且用户打开了一个需要大部分系统内存的电子表格，那么后台网络广播媒体播放器和所有花​​哨的东西*很可能会被杀死*，期间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:33:45.710

服务在您的应用程序的线程上运行，并在启动后一直运行，直到它调用 finish() 或 android 需要内存。

但是运行并不一定意味着它正在处理某些东西。仅当有人在您的服务上调用 startService() 时才会调用 onStartCommand()。

因此，服务不是一直运行，而是始终在内存中准备好在需要时运行。服务的主要用途是做一些处理，即使你改变了活动，它也会继续运行，比如一个音乐播放器，当你改变活动寻找下一个要播放的音乐时，它会继续播放。

编辑：关于文档“服务不是一个单独的进程......服务不是一个线程。它本身不是一种从主线程中完成工作的手段”。服务是“应用程序告诉系统它想要在后台执行的操作的工具”

“一个服务既可以启动，也可以绑定连接。在这种情况下，只要服务启动或者有一个或多个使用 Context.BIND_AUTO_CREATE 标志的连接，系统就会保持服务运行。一旦这些情况都不成立，服务的 onDestroy() 方法被调用并且服务被有效地终止。”

[服务文档](http://developer.android.com/reference/android/app/Service.html#WhatIsAService)

# android - 从主屏幕启动应用程序图标进入主 Activity 而不是恢复当前状态

> ID：14644796
> 
> 赞同：0
> 
> 时间：2013-02-01T10:58:36.150
> 
> 标签：android

在我的应用程序中，我正在开始另一个活动而没有完成第一个活动，因为我正在处理已启动活动的活动结果。

现在我在这种情况下面临的问题是，当点击主屏幕上的图标时，我再次进入主 Activity，并且启动的 Activity 也出现在背景中。

如果我通过长按主页按钮启动应用程序，我将进入应用程序的当前状态，但它也应该在主屏幕图标单击的情况下出现。

我不明白问题是什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:01:39.720

我发现这是一个设备问题，而不是应用程序问题，因为它可以与具有相同型号的其他设备以及 OS 一起正常工作。该设备中包含 2.3.6，我还在其他设备中对其进行了测试，在这种情况下也可以按预期工作，所以我认为这只是设备问题。

# wordpress - Disqus 和 WP 不工作

> ID：14644802
> 
> 赞同：0
> 
> 时间：2013-02-01T10:58:57.617
> 
> 标签：wordpress, disqus

我正在尝试在我的 WP 站点上安装 Disqus，但我得到“无法连接到 Disqus API 服务器”并且无法安装它。

有没有办法解决这个问题？

我试图联系他们的支持，但没有得到任何答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:15:37.343

此错误意味着某些东西阻止了您的 Wordpress 站点和 Disqus 之间的连接。如果有人托管您的网站，您应该询问他们是否阻止了端口 80 上的连接，并确保他们可以通过该端口联系“disqus.com”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:23:26.320

在实现自动安装功能之前，我通过安装早期版本的插件（2.69）解决了这个问题。手动填写所有信息，然后将其升级到最新版本。

# javascript - 验证 url 并检查 url 是域还是子域

> ID：14644805
> 
> 赞同：4
> 
> 时间：2013-02-01T10:59:04.190
> 
> 标签：javascript, validation, url

我需要验证 URL 并检查输入的 URL 是域还是子域。
我尝试了一个解决方案，它可以工作，但在某些情况下它失败了。

```
function subDomain(url) 
{

    // IF THERE, REMOVE WHITE SPACE FROM BOTH ENDS
    url = url.replace(new RegExp(/^\s+/),""); // START
    url = url.replace(new RegExp(/\s+$/),""); // END

    // IF FOUND, CONVERT BACK SLASHES TO FORWARD SLASHES
    url = url.replace(new RegExp(/\\/g),"/");

    // IF THERE, REMOVES 'http://', 'https://' or 'ftp://' FROM THE START
    //url = url.replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"");

    // IF THERE, REMOVES 'www.' FROM THE START OF THE STRING
    url = url.replace(new RegExp(/^www\./i),"");

    // REMOVE COMPLETE STRING FROM FIRST FORWARD SLASH ON
    url = url.replace(new RegExp(/\/(.*)/),"");

    // REMOVES '.??.??' OR '.???.??' FROM END - e.g. '.CO.UK', '.COM.AU'
    if (url.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))) {
        url = url.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),"");

    // REMOVES '.??' or '.???' or '.????' FROM END - e.g. '.US', '.COM', '.INFO'
    } else if (url.match(new RegExp(/\.[a-z]{2,4}$/i))) {
        url = url.replace(new RegExp(/\.[a-z]{2,4}$/i),"");
    }

    // CHECK TO SEE IF THERE IS A DOT '.' LEFT IN THE STRING
    var subDomain = (url.match(new RegExp(/\./g))) ? true : false;
    return(subDomain);
} 
```

结果：

```

mydomain.com -> 假

subdomain.mydomain.com -> 真

mydomain.com。-> 真的

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:20:53.227

您实际上可以在一个正则表达式中对此进行测试，例如：

```
var isSubdomain = function(url) {
    url = url || 'http://www.test-domain.com'; // just for the example
    var regex = new RegExp(/^([a-z]+\:\/{2})?([\w-]+\.[\w-]+\.\w+)$/);

    return !!url.match(regex); // make sure it returns boolean
}

console.log(isSubdomain("example.com"));
console.log(isSubdomain("http://example.com:4000"));
console.log(isSubdomain("www.example.com:4000"));
console.log(isSubdomain("https://www.example.com"));
console.log(isSubdomain("sub.example.com"));
console.log(isSubdomain("example.co.uk")); //it doesn't work on these very specific cases
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-29T08:45:49.530

您可以只使用 URI 来执行此操作。 [https://medialize.github.io/URI.js/docs.html](https://medialize.github.io/URI.js/docs.html)

```
const subdomain = new URI('https://stackoverflow.com/questions/14644805/validate-url-and-check-if-url-is-domain-or-subdomain').subdomain()

subdomain // Will be an empty string if no subdomain exists 
```

然后在函数中使用它

```
function isSubdomain(url) {
  return Boolean(new URI(url).subdomain())
} 
```

# sql - 内连接与笛卡尔积的性能

> ID：14644807
> 
> 赞同：16
> 
> 时间：2013-02-01T10:59:09.950
> 
> 标签：sql, join, db2

> **可能重复：**
> [显式与隐式 SQL 连接](https://stackoverflow.com/questions/44917/explicit-vs-implicit-sql-joins)

我想知道性能的差异

```
select * from A,B,C where A.x = B.y and B.y = C.z 
```

和

```
select * from A INNER JOIN B on A.x = B.y INNER JOIN C on B.y = C.z 
```

基本上我想知道内部连接是否比笛卡尔积表现更好？另外，在内部连接中，笛卡尔积是在内部进行的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:15:45.577

首先，这两个操作有两个不同的目的，而笛卡尔积为您提供了通过将一个表中的每一行连接到另一个表中的每一行而产生的结果。而内连接（有时称为简单连接）是两个或多个表的连接，它只返回满足连接条件的那些行。
现在来看看你在这里写的内容：
如果是笛卡尔积，首先创建一个由 A、B、C 组成的表，然后根据给定的条件，我们得到结果。但正如你所见，这是一个繁重的过程。
另一方面，内连接只选择那些真正满足给定条件的结果。因此，它是实现最终结果的更好解决方案。
第一个是滥用SQL语言。

# css - CSS :after 不适用于图像？

> ID：14644814
> 
> 赞同：0
> 
> 时间：2013-02-01T10:59:20.340
> 
> 标签：css

我想我什么都试过了，`:after`只是不想使用图像。是否有任何我不知道的 CSS 限制？还是我做错了什么？

这是示例：http: [//jsfiddle.net/vHMRk/](http://jsfiddle.net/vHMRk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:01:19.270

`:after`大多数浏览器不支持`:before`img 标签： http: [//lildude.co.uk/after-css-property-for-img-tag](http://lildude.co.uk/after-css-property-for-img-tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:12:17.070

`:after`on的效果`img`定义模糊。[规范](http://www.w3.org/TR/CSS21/generate.html#before-after-content)是这样说的：“<strong>注意：注意。该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。” 在实践中，它是未指定的，并且在 CSS3 草案中似乎没有任何进展。

# android - 如何通过 Alfresco Mobile SDK for Android 在 Alfresco 上复制文档？

> ID：14644818
> 
> 赞同：0
> 
> 时间：2013-02-01T10:59:29.890
> 
> 标签：android, copy, alfresco

我正在尝试**复制整个 Folder**。

为此，我正在创建一个新文件夹并将所有内容再次放入其中：文件夹和文档。

但是我在尝试创建文档时遇到了 Alfresco 服务异常：

> *新创建的对象不是文档！*

我的代码如下：

```
List<Document> documentsChildren = documentFolderService.getDocuments(folderToCopy);
for (Document document:documentsChildren){
ContentFile contentFileToCopy = documentFolderService.getContent(document);
String nameFileToCopy = document.getName();

// problem there
documentFolderService.createDocument(folderCopied, nameFileToCopy, properties, contentFileToCopy);
} 
```

奇怪的是，我还以相同的方式在存储库中实现了一个简单文档的副本，并且运行良好：

```
Document documentToCopy = (Document) documentFolderService.getNodeByIdentifier(fileToCopy.getIdentifier());
ContentFile contentFileToCopy = documentFolderService.getContent(documentToCopy);
String nameFileToCopy = fileToCopy.getName();
documentFolderService.createDocument(folderParent, nameFileToCopy, properties, contentFileToCopy); 
```

唯一改变的是获取文档的方式：获取文件夹的子文档或获取带有其标识符的文档。

## 问题更新：

错误的确切消息是：

```
Caused by: org.alfresco.mobile.android.api.exceptions.AlfrescoServiceException: Newly created object is not a document! New id: workspace://SpacesStore/85753128-1ac9-4b5e-b909-91dcb7d5ff5d
at org.alfresco.mobile.android.api.services.impl.AbstractDocumentFolderServiceImpl.createDocument(AbstractDocumentFolderServiceImpl.java:482) 
```

*   属性是空地图：

    地图属性 = new HashMap();

*   我测试 .ppt 文件，当你问这个问题时，我也测试 .docx 和 .jpg

*   引发异常时节点的类型是文件夹

您建议的快速修复不起作用。也许我在某个地方犯了一个愚蠢的错误，但我没能找到它。

## 完整代码：

```
List<Folder> foldersChildren = null;
List<Document> documentsChildren = null;
try {
        ServiceRegistry serviceRegistry = Login.session.getServiceRegistry();
        DocumentFolderService documentFolderService = serviceRegistry.getDocumentFolderService();
        Folder folderParent = (Folder) documentFolderService.getNodeByIdentifier(repositoryParent.getIdentifier());

        // create the folder
        Map<String,Serializable> properties = new HashMap<String,Serializable>();   
        Folder folderToCopy = (Folder) documentFolderService.getNodeByIdentifier(repositoryToCopy.getIdentifier());
        String nameRepositoryToCopy = repositoryToCopy.getName();
        Folder folderCopied = documentFolderService.createFolder(folderParent, nameRepositoryToCopy, properties);

        foldersChildren = documentFolderService.getFolders(folderToCopy);
        documentsChildren = documentFolderService.getDocuments(folderToCopy);

        // create the files inside the folder
        ContentFile contentFileToCopy = null;
        String nameFileToCopy = null;
        for (Document document : documentsChildren){
            contentFileToCopy = documentFolderService.getContent(document);
            nameFileToCopy = document.getName();

            // this operation doesn't work
            documentFolderService.createDocument(folderCopied, nameFileToCopy, properties, contentFileToCopy);
        }
    } catch (Exception e){
        this.cancel(true);
        UIAlertDialog.runOnUIThreadOperationFailed(activity, context);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:50:01.813

正如错误信息所解释的：***新创建的对象不是文档***！此错误发生在创建文档后，该方法检查当前节点是否正确创建并具有正确的属性。

我需要更多信息（堆栈跟踪、节点类型...）来了解它是 SDK 端的错误还是方法未涵盖的特定问题。你能提供信息吗

*   属性值：是空地图吗？和复制的地图一样吗？
*   它发生在每个文档还是仅针对某些类型的文档？
*   引发异常时节点的类型是什么？

但是，如果第二种方法有效，则可以快速解决：

```
List<Document> documentsChildren = documentFolderService.getDocuments(folderToCopy);
Document documentToCopy = null;
ContentFile contentFileToCopy = null;
String nameFileToCopy = null;
for (Document document : documentsChildren){
   documentToCopy = (Document) documentFolderService.getNodeByIdentifier(document .getIdentifier());
   contentFileToCopy = documentFolderService.getContent(documentToCopy);
   nameFileToCopy = fileToCopy.getName();
   documentFolderService.createDocument(folderParent, nameFileToCopy, properties, contentFileToCopy);
} 
```

**编辑 06.02**

显然，documentFolderService.createFolder() 中的属性对象存在问题参考。此方法后映射不为空，并且包含干扰代码下一部分的信息。所以要更正它（如果你的属性在复制操作期间并不重要），请找到解决方案

```
List<Folder> foldersChildren = null; 
List<Document> documentsChildren = null; 
try {
        ServiceRegistry serviceRegistry = Login.session.getServiceRegistry();
        DocumentFolderService documentFolderService = serviceRegistry.getDocumentFolderService();
        Folder folderParent = (Folder) documentFolderService.getNodeByIdentifier(repositoryParent.getIdentifier());

        // create the folder
        Folder folderToCopy = (Folder) documentFolderService.getNodeByIdentifier(repositoryToCopy.getIdentifier());
        String nameRepositoryToCopy = repositoryToCopy.getName();
        Folder folderCopied = documentFolderService.createFolder(folderParent, nameRepositoryToCopy, null);

        foldersChildren = documentFolderService.getFolders(folderToCopy);
        documentsChildren = documentFolderService.getDocuments(folderToCopy);

        // create the files inside the folder
        ContentFile contentFileToCopy = null;
        String nameFileToCopy = null;
        for (Document document : documentsChildren){
            contentFileToCopy = documentFolderService.getContent(document);
            nameFileToCopy = document.getName();

            // this operation doesn't work
            documentFolderService.createDocument(folderCopied, nameFileToCopy, null, contentFileToCopy);
        }
    } catch (Exception e){
        this.cancel(true);
        UIAlertDialog.runOnUIThreadOperationFailed(activity, context);
    } 
```

注意：属性是一个可选参数，因此它可以为空。

# android - Android - 打开会话不适用于上一个 Facebook 应用程序版本

> ID：14644819
> 
> 赞同：0
> 
> 时间：2013-02-01T10:59:35.253
> 
> 标签：android, facebook

我正在使用 facebook 的最后一个 SDK 发布带有一些文本的图像，直到昨天还不错，无论是否在设备上安装了 Facebook 应用程序，它都可以正常工作。但我更新了 Facebook 应用程序，现在它不适用于新版本的 Facebook 应用程序。我做错了什么？

这是我打开当前会话的代码：

```
Session session = Session.getActiveSession();
            if(session == null || session.isClosed()){
                //session = new Session(activity);
                session = new Session.Builder(activity).setApplicationId(ConstantsSoccerWay.FACEBOOK_API_KEY).build();
                Session.OpenRequest openRequest = new Session.OpenRequest(activity);
                openRequest.setPermissions(PERMISSIONS);
                openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
                session.openForPublish(openRequest);
                Session.setActiveSession(session);
                posting = true;
            } 
```

当会话打开时，它会显示一个弹出窗口，询问用户是否允许我的应用程序在他的墙上发布，但是当他按下 OK 按钮时，在回调“onSessionStateChange”时我的会话仍然关闭。

有人可以帮助我吗？

PS：我添加了 publish_actions 权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:50:34.730

就像李明所说，在我请求发布权限之前，我必须先请求 basic_info 权限（安装了 Facebook 应用程序）。这个请求必须单独完成，并且按照我说的顺序（首先阅读 basic_info 然后发布）。

# java - 计算从 mysql 数据库中检索到的行数

> ID：14644821
> 
> 赞同：0
> 
> 时间：2013-02-01T10:59:42.690
> 
> 标签：java, mysql, database, row

```
public int countBookings() throws SQLException{

    ResultSet rs=null;
    PMDBController db=new PMDBController();
    int rowCount=0;

    db.getConnection();

    String dbQuery="SELECT COUNT(User) AS UserCount FROM INSTRUCTORBOOKING WHERE USER ='"+instructorId+"'";

    rs=db.readRequest(dbQuery);

    try{
        if(rs.next()){
            instructorId=rs.getString("UserCount");
        }
    }catch(Exception e){
        e.printStackTrace();
    }

    rs.last();
    rowCount=rs.getRow();
    db.terminate();

    return rowCount;
} 
```

基本上这个方法应该做的是计算从数据库中获取的行数。但是，无论里面有什么，它总是返回 1。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:07:19.127

您的查询似乎有问题。由于您只选择 1 个用户，因此您将始终获得 1 个计数。

```
"SELECT COUNT(User) AS UserCount FROM INSTRUCTORBOOKING WHERE USER ='"+instructorId+"'" 
```

尝试删除您的 WHERE 子句？也许这不是您想要的，但我们无法仅从一个查询中看到您的数据模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:08:58.753

`rowCount = rs.getInt("UserCount");`而不是`instructorId = rs.getString("UserCount");`会做的伎俩。或者换句话说——你读到了行数，但读到了变量instructorId。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:20:46.453

行数将始终为 1。这是计数，即您需要查看的该行的值，因为您的查询旨在返回行数而不是实际行数。

```
SELECT COUNT(User) AS UserCount FROM INSTRUCTORBOOKING WHERE USER ='"+instructorId+"'" 
```

您错误地将行数解释为您要查找的计数。

# python - python运行时错误，而原始输入多行字符串

> ID：14644823
> 
> 赞同：2
> 
> 时间：2013-02-01T10:59:47.040
> 
> 标签：python, input

我想读取多行输入。输入格式是第一行包含 int 为 no。行数，后跟字符串行。我试过了

```
while True:
    line = (raw_input().strip())
    if not line: break

    elif line.isdigit(): continue

    else:
        print line 
```

它打印字符串行但显示运行时错误消息

```
Traceback (most recent call last):
  File "prog.py", line 2, in <module>
    line = (raw_input().strip())
EOFError: EOF when reading a line 
```

这是读取输入的正确方法吗？
为什么运行时错误？
我是python新手请帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:06:42.030

如果您使用 EOF 终止程序（`Ctrl-d`在 Linux 中，`Ctrl-z`在 Windows 中），您可能会收到 EOFError。您可以使用以下方法捕获错误：

```
while True:
    try:
        line = (raw_input().strip())
    except EOFError:
        break
    if not line: break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:09:58.867

您可以执行以下操作：

```
while True:
    try:
        number_of_lines = int(raw_input("Enter Number of lines: ").strip())
    except ValueError, ex:
        print "Integer value for number of line" 
        continue
    except EOFError, ex:
        print "Integer value for number of line" 
        continue

    lines = []
    for x in range(number_of_lines):
        lines.append(raw_input("Line: ").strip())

    break

print lines 
```

这将处理正确的输入

# testng - 如何在TestNG中显式将值'0'设置为stackTraceOutputMethod

> ID：14644826
> 
> 赞同：0
> 
> 时间：2013-02-01T11:00:03.850
> 
> 标签：testng

当我的硒测试失败时，我不希望显示完整的 Stacktrace。因此我想将“stackTraceOutputMethod”设置为“0”，以便它只显示异常类和消息，而不是完整的堆栈跟踪。
我读到它可以通过命令行完成。但我想通过 testng.xml 或在我的脚本中配置它。我正在使用 TestNG 框架上的 Java 开发 Selenium。所以请帮助我将“stackTraceOutputMethod”的值设置为“0”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:34:28.840

我发现如果您使用的是 Eclipse，您可以按照以下步骤将值设置为“0”：

```
1\. Right click on testng.xml > Run Configurations
2\. Under "Test" tab, you can see "Run Time" label > Log level (0-10) dropdown.
3\. Select 0 from dropdown. 
```

就是这样 :)......您将获得如下输出：TC001 java.lang.AssertionError: at testscripts.F_TS001_.java:50) ... Removed 27 stack frames

# perl - 在 perl 中执行命令时使用管道

> ID：14644829
> 
> 赞同：2
> 
> 时间：2013-02-01T11:00:13.453
> 
> 标签：perl, pipe

我正在尝试在 perl 中使用以下命令，但它给了我错误

```
system("zcat myfile.gz | wc > abc.txt"); 
```

但是当我运行它时，我在意外标记 `|' 附近收到错误语法错误

即使我删除`>abc.txt`我仍然收到错误。

我们可以将管道与系统命令一起使用吗？

以下是错误详情：

```
sh: -c: line 1: syntax error near unexpected token `|'
sh: -c: line 1: ` | wc ' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:05:08.483

下一次，测试您的演示程序以确保它确实表现出您所说的行为。你实际上跑了一些更接近的东西

```
while (my $file_name = <>) {
   system("zcat $file_name | wc > abc.txt");
} 
```

其中有两个错误：

*   您没有删除尾随换行符，因此 shell 试图执行

    ```
    zcat def.gz
     | wc >abc.txt 
    ```

    代替

    ```
    zcat def.gz | wc >abc.txt 
    ```

*   在将文件名嵌入命令之前，您没有将文件名转换为 shell 文字。

    考虑如果文件名包含空格会发生什么。你会执行

    ```
    zcat def ghi.gz | wc >abc.txt 
    ```

    代替

    ```
    zcat 'def ghi.gz' | wc >abc.txt 
    ```

解决方案：

```
use String::ShellQuote qw( shell_quote );

while (my $file_name = <>) {
   chomp($file_name);
   system("zcat -- ".shell_quote($file_name)." | wc > abc.txt");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:20:21.237

它按预期工作：

```
perl -lne 'system("cat *.java|wc");' 
```

也许你的文件名有些奇怪。

你可以像这样检查你的shell的插值：

```
my @file = `ls -1 myfile*.gz`;chomp(@files);
print join("\n",@files); 
```

在 perl 中还有其他可能执行的操作，例如反引号、用 | 打开、qx。

如果您对文件名有疑问，您可以自己获取文件名并以特定方式调用系统以避免执行shell：[http ://docstore.mik.ua/orelly/perl/cookbook/ch19_07.htm](http://docstore.mik.ua/orelly/perl/cookbook/ch19_07.htm)

> 如果只有一个标量参数，则检查该参数是否有 shell 元字符，如果有，则将整个参数传递给系统的命令 shell 进行解析（在 Unix 平台上是 /bin/sh -c，但在其他平台）。如果参数中没有 shell 元字符，则将其拆分为单词并直接传递给 execvp ，这样效率更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T13:17:33.343

尝试使用反引号执行包含`cut -d \|`命令的管道时收到此错误消息。原来我不得不双重转义管道字符，例如`cut -d \\|`

# haskell - 拥有一个惰性/严格版本的 Writer 有什么意义？

> ID：14644830
> 
> 赞同：15
> 
> 时间：2013-02-01T11:00:14.467
> 
> 标签：haskell, monads, monad-transformers, writer

为什么 Haskell 中有两种不同的 Writer 类型的 monad？对我来说，直觉上，阅读“严格的作家单子”意味着`<>`严格，所以日志中没有 thunk 积累。但是，查看源代码，事实证明并非如此：

```
-- Lazy Writer
instance (Monoid w, Monad m) => Monad (WriterT w m) where
-- ...
m >>= k  = WriterT $ do
    ~(a, w)  <- runWriterT m
    ~(b, w') <- runWriterT (k a)
    return (b, w <> w') 
```

在严格的版本中，模式不是无可辩驳的，即`~`缺失的。所以上面发生的事情是，`m`并且`k a`没有被评估，而是存储为 thunk。在严格的版本中，它们被评估以检查它们是否匹配元组模式，结果被馈送到`<>`. 在这两种情况下，`>>=`直到某些东西实际需要结果值时才会评估。所以我理解它的方式是惰性和严格版本都做同样的事情，除了它们在定义内的不同位置有 thunk `>>=`：lazy 产生`runWriterT`thunk，strict 产生`<>`thunk。

这给我留下了两个问题：

1.  以上是对的，还是我误解了这里的评价？
2.  我可以`<>`在不编写自己的包装器和实例的情况下完成严格吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T14:37:41.120

您的第一个观察结果是正确的，但是创建的 thunk 之间的区别很重要。

`Lazy`并且`Strict`不是关于日志类型的严格性，而是关于对中的严格性。

这些出现是因为 Haskell 中的一对有两种可能的方式来更新它。

```
bimap f g (a,b) = (f a, g b) 
```

或者

```
bimap f g ~(a,b) = (f a, g b) 
```

后者与

```
bimap f g p = (f (fst p), g (snd p)) 
```

这两者之间的区别在于，`bimap`在第一种情况下，当您将 args 传递给时，该对立即被强制执行。

在后一种情况下，这对不会立即被强制，而是我给你一个`(,)`充满两个非严格计算的背。

这意味着

```
fmap f _|_ = _|_ 
```

在第一种情况下，但是

```
fmap f _|_ = (_|_, _|_) 
```

在第二个懒惰的情况下！

在对一对概念的不同解释下，两者都是正确的。通过假装一对是绝对意义上的一对来强迫你，它本身没有任何有趣`_|_`的 's 。另一方面，将域解释为非严格的。尽可能让尽可能多的程序终止，从而引导您进入该`Lazy`版本。

`(,) e`是一个完全可接受的`Writer`，所以这就是问题的特征。

区分的原因是它对于终止许多通过 monad 采用固定点的奇异程序很重要。您可以回答有关涉及州或作家的某些循环计划的问题，只要它们是懒惰的。

请注意，在这两种情况下，'log' 参数都不是严格的。一旦受到严格限制，您就会失去适当的关联性，并且在技术上不再是`Monad`. =/

因为这不是 monad，所以我们不在`mtl`!

有了这个，我们可以解决你的第二个问题：

不过有一些解决方法。您可以`Writer`在`State`. 基本上假装你没有收到状态论据。并像您一样将其映射到状态中`tell`。现在您可以严格执行此操作，因为它不会作为每次绑定的一部分在您背后发生。`State`只是通过动作之间未修改的状态。

```
shout :: Monoid s => s -> Strict.StateT s m ()
shout s' = do
   s <- get
   put $! s <> s' 
```

然而，这确实意味着你强制你的整个`State`monad 得到输出，并且不能产生部分`Monoid`lazily，但你得到的东西在操作上更接近于严格的程序员所期望的。有趣的是，这对 just也有效`Semigroup`，因为唯一的使用`mempty`是在你开始时有效`runState`。

# email - PEAR 已安装但无法正常工作。PEAR.php 在哪里？

> ID：14644845
> 
> 赞同：2
> 
> 时间：2013-02-01T11:00:59.583
> 
> 标签：email, pear, php, pyrus

我已经在 IIS7 上使用`pyrus.phar`in `C:\PEAR`for PHP 安装了 PEAR。`require_once`当我得到文件时`Mail.php`，我还下载了 PEAR Mail 包`HTTP Error 500.0 - Internal Server Error`。

这是我的代码：

```
<?php
    set_include_path('C:/PEAR/php');
    require_once 'Mail.php'; //should give me a blank page but is giving me an error
?> 
```

我检查了 Mail.php 有一行`require_once 'PEAR.php';`

现在我从哪里得到这个 PEAR.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:19:49.320

您还需要安装旧的 pear 安装程序：

```
$ pyrus install pear/pear 
```

它提供`PEAR.php`.

# c# - 从 MVC 3 控制器将 JavaScript 注入 PDF

> ID：14644852
> 
> 赞同：0
> 
> 时间：2013-02-01T11:01:24.787
> 
> 标签：c#, javascript, asp.net-mvc-3, pdf-generation, acrobat-sdk

在我的`ASP.NET MVC3(Razor)`应用程序中，我正在努力解决`print utility`. 我想`auto print a PDF file which is converted from rdlc`。

我使用以下代码将 rdlc 转换为 pdf：

```
 LocalReport localReport = new LocalReport();

        localReport.ReportPath = @"Reports/OP/Rdlc/ClinicInvoiceReceipt.rdlc";

        iClinicInvoiceReceipt = new RmtOPInvoice.ClinicInvoiceReceipt();
        DataTable dt = iClinicInvoiceReceipt.SelectReceiptDtlForPrint(1);

        ReportDataSource reportDataSource = new ReportDataSource();
        reportDataSource.Value = dt;
        reportDataSource.Name = "DataSet1";
        localReport.DataSources.Add(reportDataSource);

        string reportType = "PDF";
        string mimeType;
        string encoding;
        string fileNameExtension;

        string deviceInfo =
         @"<DeviceInfo>
            <OutputFormat>PDF</OutputFormat>
            <PageWidth>5.83in</PageWidth>
            <PageHeight>8.27in</PageHeight>
            <MarginTop>0in</MarginTop>
            <MarginLeft>0.in</MarginLeft>
            <MarginRight>0in</MarginRight>
            <MarginBottom>in</MarginBottom>
        </DeviceInfo>";
        Warning[] warnings;

        string[] streams;

        byte[] renderedBytes;

        renderedBytes = localReport.Render(
           reportType,
           deviceInfo,
           out mimeType,
           out encoding,
           out fileNameExtension,
           out streams,
           out warnings);

        return File(renderedBytes, "application/pdf"); 
```

我想同时在视图上显示这个`open the print dialog of pdf viewer automaticaly`

[我只是在这里](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)将 javscript 转换为 pdf 。但是我对在我上面的代码中实现这一点感到困惑。如果有人经历过这个，请分享。这对我真的很有帮助。

我刚刚发现在 PHP 中完成了相同的场景。[在这里](http://www.fpdf.org/en/script/script36.php)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:34:57.940

也许我找到的这个答案很有帮助

1.  它是 ASP.NET MVC
2.  它直接流式传输 RDLC 响应

[http://weblogs.asp.net/rajbk/archive/2009/11/25/rendering-an-rdlc-directly-to-the-response-stream-in-asp-net-mvc.aspx](http://weblogs.asp.net/rajbk/archive/2009/11/25/rendering-an-rdlc-directly-to-the-response-stream-in-asp-net-mvc.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T12:01:05.493

我实现了这个使用`iTextSharp`

[这](http://www.codeproject.com/Tips/569335/Automatically-Printing-an-RDLC-file-in-ASP-NET-MVC)是我做的示例项目。

# java - Spring 3.2 DeferredResult - 如何设置错误响应的状态码？

> ID：14644858
> 
> 赞同：7
> 
> 时间：2013-02-01T11:01:40.367
> 
> 标签：java, spring, spring-mvc, asynchronous

Spring Web 3.2 带有一个`DeferredResult`用于异步请求处理的类。如果出现问题，它`setErrorResult`可以提供替代响应，但没有提供 http 错误代码的选项。

当然，必须可以控制失败请求的 http 响应代码。我如何使用新的 Spring api 来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:15:01.573

方法的[文档](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/)说明`setErrorResult`了以下内容：

> 为 DeferredResult 设置一个错误值并处理它。该值可能是 Exception 或 Throwable 在这种情况下，它将被处理，就好像处理程序引发了异常一样。

我想通过设置一个`Exception`，您可能会触发一个异常处理程序，该处理程序返回您想要的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-03T07:27:37.163

```
deferredResult.setErrorResult(new Exception()); 
```

这将始终将 HTTP 响应代码设置为 500。为了更好地控制 HttpServletResponse.setStatus 似乎有效。

这将适用于[user411180 的客户端](https://stackoverflow.com/questions/5252573/how-to-return-java-exception-info-to-jquery-ajax-rest-call)。

```
public DeferredResult<List<Point>> getMessages(@RequestParam int reqestedIndex, 
            final HttpServletResponse response) {

    final DeferredResult<List<Point>> deferredResult = new DeferredResult<>();
    deferredResult.onCompletion(...);
    deferredResult.onTimeout(new Runnable() {
        @Override
        public void run() {
            deferredResult.setErrorResult("Explanation goes here.");
            response.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT); //or SC_NO_CONTENT
        }
    });

    longPollRequests.put(deferredResult, reqestedIndex);
    return deferredResult;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T09:21:47.260

作为参数传递给的异常`setErrorResult`可以用`@ResponseStatus`. 例如创建自己的异常类：

```
 @ResponseStatus(HttpStatus.NOT_FOUND)
  class NotFoundException extends RuntimeException {
     // add your own constructors to set the error message
     // and/or cause. See RuntimeException for valid ctors 
  } 
```

然后在您的代码中将它与您创建的构造函数一起使用，例如：

```
 deferredResult.setErrorResult(new NotFoundException(reason, cause)); 
```

# java - 为什么不使用 google.gson.GsonBuilder JSON 解析器序列化静态字段？

> ID：14644860
> 
> 赞同：7
> 
> 时间：2013-02-01T11:01:48.787
> 
> 标签：java, android, json, serialization, static

我尝试使用**google.gson.GsonBuilder***序列化*对象，如下所示：

 **```
public class JsonHelper
{
    public static String ToJson(Object o, Type oType)
    {
        Gson gson = new().setPrettyPrinting().setDateFormat("yyyy-MM-dd'T'HH:mm:ss").create();
        gson.toJson(o, oType);
    }
}

public class JsonTest
{
   public static String staticField;

   public static String ToJson()
   {
       JsonTest newJsonTest = new JsonTest();
       newJsonTest.staticField = TelephoneStatus.GetPhoneIMEI(); // let's say we use static field to keep IMEI

       Type oType = new TypeToken<JsonTest>(){}.getType();
       return JsonHelper.ToJson(newJsonTest, oType);
   }
} 
```

*`JsonTest`类方法的*返回值为*空`ToJson()`。如果我将`staticField`字段声明更改**为非静态**，它会按预期工作。考虑到为什么不序列化静态字段，是否应该将其视为**错误**？还是认为没有必要？*

 *如果我有一个*列表*，`JsonTest`我不会期望静态字段被*多次*解析和写入，而是*一次*。然而，这不比完全错过更好吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-11-12T07:23:38.277

但是如果有人想**包含 static**，请将构建器更改为忽略瞬态，因为您会将瞬态和静态的默认值覆盖为仅瞬态。

```
GsonBuilder gsonBuilder  = new GsonBuilder();
// Allowing the serialization of static fields    

gsonBuilder.excludeFieldsWithModifiers(java.lang.reflect.Modifier.TRANSIENT);
    // Creates a Gson instance based on the current configuration
    Gson gson = gsonBuilder.create();
    String json = gson.toJson(objectToSerialize);
    System.out.println(json); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-01T11:11:21.270

Java 序列化仅序列化对象的非静态和非瞬态字段，因为，

> defaultReadObject 方法使用流中的信息将保存在流中的对象的字段分配给当前对象中相应命名的字段。这可以处理类已经演变为添加新字段的情况。该方法不需要关注属于其超类或子类的状态。通过使用 writeObject 方法或使用 DataOutput 支持的原始数据类型的方法将各个字段写入 ObjectOutputStream 来保存状态。

[参考](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html)

在静态字段状态的情况下，它不仅属于任何特定对象，它还将属于所有类。

因此，静态字段将处于任何特定对象的状态。***

# asp.net - 在将 InsertCommand 发送到 SQL 之前读取它

> ID：14644861
> 
> 赞同：0
> 
> 时间：2013-02-01T11:01:55.867
> 
> 标签：asp.net, sqldatasource

早上好，

我有一个带有 UpdatePanel 的 ASPX 页面，其中包含一个 Gridview 和 SqlDataSource 控件。在 SqlDataSource 控件中，我指定了一个 InsertCommand。我希望能够读取我的页面将发送到 SQL 数据库的 InsertCommand。阅读以下内容

```
mySqlDataSource.InsertCommand 
```

在代码隐藏中为我提供了带有 @parameters 的 InsertCommand，而不是将发送到 SQL 的每个参数的实际值。

有没有办法读取实际发送到数据库执行的最终 InsertCommand？

编辑：请注意，我的问题可能适用于选择、更新、插入或从我的 ASPX 页面发送到 SQL 的任何命令。该命令必须转换为 SQL 可以解释和执行的语言，这就是我要阅读的命令的版本。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:11:17.493

我想您应该订阅 DataSource 的 Inserting 事件。

然后，在 Inserting_Handler 中，您可以浏览 DataSource.InsertParameters 集合

```
private void On_Inserting(Object sender, SqlDataSourceCommandEventArgs e)
{

    var txt = e.Command.CommandText;
    //the parameters names and values are in e.Command.Parameters
} 
```

希望这会有所帮助

# php - 带有php函数的下拉菜单

> ID：14644863
> 
> 赞同：1
> 
> 时间：2013-02-01T11:01:57.430
> 
> 标签：php, function

我已经使用包含 5 个选项的下拉列表菜单创建了我的 html 表单

我希望从下拉列表中选择一个选项来调用 php 函数，该函数会将所选选项回显到屏幕上

```
<label>Fruits</label>
<select name="Fruits">
<option value="Ap">Apple</option>
<option value="BN">Banana</option>
<option value="OR">Orange</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:19:32.563

例如，这是您的 html 代码

```
<html>
 <head></head>
 <title>Static Dropdown List</title>
 <body bgcolor="pink">
 Employee List :
 <select>
  <option value="Select">Select</option>}
   <option value="Moyed">Moyed Ansari</option>
   <option value="Asad">Asadullah</option>
   <option value="Usman">Usman Ali</option>
 </select> 
 </body>
</html> 
```

现在，您将使用以下代码在下拉列表中使用上表。

```
 <html>
<head>
<title>Dynamic Drop Down List</title>
</head>
<BODY bgcolor ="pink">
    <form id="form1" name="form1" method="post" action="<?php echo $PHP_SELF; ?>">
        Employee List :
        <select Emp Name='NEW'>
        <option value="">--- Select ---</option>
        <?
            mysql_connect ("localhost","root","");
            mysql_select_db ("company");
            $select="company";
            if (isset ($select)&&$select!=""){
            $select=$_POST ['NEW'];
        }
        ?>
        <?
            $list=mysql_query("select * from employee order by emp_id asc");
        while($row_list=mysql_fetch_assoc($list)){
            ?>
                <option value="<? echo $row_list['emp_id']; ?>"<? if($row_list['emp_id']==$select){ echo "selected"; } ?>>
                                     <?echo $row_list['emp_name'];?>
                </option>
            <?
            }
            ?>
        </select>
        <input type="submit" name="Submit" value="Select" />
    </form>
  </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T14:26:10.647

php 位于服务器端，而所有 html 都位于用户端。如果要回显所选选项，则必须使用 Ajax 请求或使用其他技术（如 POST a）将所选选项发送到服务器端形式。

```
// using jquery you can get your selected value
  <script>
     var selected_value = $("#idOfTheSelectTag").val();
     // or you can also do
     var selected_value = $("#idOfTheSelectTag :selected").text();
     // now you can post it to the php page using AJAX where you can echo it
     $.post('page_name.php', {SELECTED_VALUE : selected_value}, function(data){
                         // on the server side in page_name.php file if you echo the value then it will be returned in the data object in the function
                  });
  </script> 
```

# android - 在android中是否可以同时读取、写入然后再次读取NFC标签？

> ID：14644867
> 
> 赞同：2
> 
> 时间：2013-02-01T11:02:11.100
> 
> 标签：android, nfc

是否可以读取然后写入，然后再次读取我们之前在 NFC 标签上写入的相同数据，而无需将其从 Android 中的字段（移动设备）中删除？如果有人做过，请在这里分享....

```
public class MainActivity extends Activity
{
    NfcAdapter adapter;
    PendingIntent pendingIntent;
    IntentFilter writeTagFilters[];
    Tag mytag;
    private TextView mTextViewData;
    Context ctx;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ctx=this;

        mTextViewData = (TextView)findViewById(R.id.mtextView);

        Button btnWrite = (Button) findViewById(R.id.write_button);
        final EditText mEditText = (EditText)findViewById(R.id.edit_message);

        adapter = NfcAdapter.getDefaultAdapter(this);

        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

        IntentFilter tagDetected1 = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);

        try 
        {
            tagDetected1.addDataType("text/nfc-service-tag");
        } 
        catch (MalformedMimeTypeException e) 
        {
            throw new RuntimeException("Could not add MIME type.", e);
        }
        writeTagFilters = new IntentFilter[] { tagDetected1 };

        btnWrite.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v) 
            {

                    if(mytag==null)
                    {
                        Toast.makeText(ctx, ctx.getString(R.string.error_detected), Toast.LENGTH_LONG ).show();
                    }
                    else
                    {
                        writeTag(mEditText.getText().toString(),mytag);

                    }

            }
        });

    }

    private void writeTag(String text,Tag tag) 
    {
        // record to launch Play Store if app is not installed
        // record that contains our custom "retro console" game data, using custom MIME_TYPE
        String mimeType = "text/nfc-service-tag";
        byte[] payload = text.getBytes(Charset.forName("US-ASCII"));
        byte[] mimeBytes = mimeType.getBytes(Charset.forName("US-ASCII"));
        NdefRecord record = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, mimeBytes, new byte[0], payload);
        NdefMessage message = new NdefMessage(new NdefRecord[] { record });
        try 
        {
            // see if tag is already NDEF formatted
            Ndef ndef = Ndef.get(tag);
            if (ndef != null) 
            {
                ndef.connect();
                if (!ndef.isWritable())
                {
                    Toast.makeText(ctx, "Read-only tag.", Toast.LENGTH_LONG ).show();
                }
                // work out how much space we need for the data
                int size = message.toByteArray().length;
                if (ndef.getMaxSize() < size) 
                {
                    Toast.makeText(ctx, "Tag doesn't have enough free space.", Toast.LENGTH_LONG).show();
                }
                ndef.writeNdefMessage(message);
                Toast.makeText(ctx, ctx.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();
                ndef.close();
            } 
            else 
            {
                // attempt to format tag
                NdefFormatable format = NdefFormatable.get(tag);
                if (format != null) 
                {
                    try 
                    {
                        format.connect();
                        format.format(message);
                        Toast.makeText(ctx, ctx.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();
                    } 
                    catch (IOException e) 
                    {
                        Toast.makeText(ctx,"Unable to format tag to NDEF.", Toast.LENGTH_LONG).show();
                    }
                }
                else 
                {
                    Toast.makeText(ctx,"Tag doesn't appear to support NDEF format.", Toast.LENGTH_LONG).show();
                }
            }
        }
        catch(Exception e)
        {

        }
    }

    @Override
    protected void onNewIntent(Intent intent)
    {
        String action = intent.getAction();
        if (action.equals(NfcAdapter.ACTION_NDEF_DISCOVERED))
        {
            NdefMessage[] msgs = getNdefMessagesFromIntent(intent);
            final NdefMessage msg = (NdefMessage)msgs[0];
            String payload = new String(msg.getRecords()[0].getPayload());
            mTextViewData.setText(payload);

            mytag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);    

            Toast.makeText(this, "In onNewIntent()", Toast.LENGTH_LONG ).show();
        }

        else if (intent.getAction().equals(NfcAdapter.ACTION_TAG_DISCOVERED)) 
        {
            Toast.makeText(this, "This NFC tag has no NDEF data.", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onResume()
    {
        super.onResume();
        if (getIntent().getAction() != null) 
        {
            // tag received when app is not running and not in the foreground:
            if (getIntent().getAction().equals(NfcAdapter.ACTION_NDEF_DISCOVERED)) 
            {
                NdefMessage[] msgs = getNdefMessagesFromIntent(getIntent());
                NdefRecord record = msgs[0].getRecords()[0];
                byte[] payload = record.getPayload();

                String payloadString = new String(payload);
                mTextViewData.setText(payloadString);

                Toast.makeText(this, "In onResume()", Toast.LENGTH_LONG ).show();

            }
        }
        adapter.enableForegroundDispatch(this, pendingIntent, writeTagFilters, null);
    }

    @Override
    public void onPause()
    {
        super.onPause();
        adapter.disableForegroundDispatch(this);
    }

    NdefMessage[] getNdefMessagesFromIntent(Intent intent) 
    {
        // Parse the intent
        NdefMessage[] msgs = null;
        String action = intent.getAction();
        if (action.equals(NfcAdapter.ACTION_NDEF_DISCOVERED)) 
        {
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
            if (rawMsgs != null){
                msgs = new NdefMessage[rawMsgs.length];
                for (int i = 0; i < rawMsgs.length; i++) 
                {
                    msgs[i] = (NdefMessage) rawMsgs[i];
                }

            } 
            else 
            {
                // Unknown tag type
                byte[] empty = new byte[] {};
                NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
                NdefMessage msg = new NdefMessage(new NdefRecord[] { record });
                msgs = new NdefMessage[] { msg };
            }
        } 
        else 
        {
            //Log.e(TAG, "Unknown intent.");
            finish();
        }
        return msgs;
    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:30:00.333

您可以`ndef.getNdefMessage()`在完成后立即致电`ndef.writeNdefMessage(message)`检查结果。它实际上会从标签中读回 NDEF 消息。但是，一般情况下，当`ndef.writeNdefMessage(message)`不抛出异常时，可以安全地假设消息写入成功。

# javascript - 使用 Jquery 切换 div 后使其保持可见

> ID：14644868
> 
> 赞同：1
> 
> 时间：2013-02-01T11:02:12.897
> 
> 标签：javascript, hover, jquery

我有这个 jquery 代码：

[http://jsfiddle.net/y8wPw/60/](http://jsfiddle.net/y8wPw/60/)

我想要的是，在带有内容的 DIV 打开后，它必须保持可见，以便我可以查看它并将这个 div 用作表单（或其他用途）。但是现在，如果我从 Content div 制作一个 MOUSEOUT ，它就会消失。

jQuery代码：

```
$(document).ready(function() {
    $(".body").hover(function () {
        $(".desc").toggle();
    })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:06:34.150

```
$(document).ready(function() {
$(".body").hover(function () {
    $(".desc").show();
}) 
```

})

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:05:41.453

为什么不试试：

```
$(document).ready(function() {
    $(".body").hover(function () {
        $(".desc").show();
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:13:14.503

我通过添加包装器并将事件分配给它来编辑您的 js 小提琴代码。我想这可以解决你的问题:)

将 html 更新为

```
<div id="wrap">
<div class="body">Hellp</div>
<div class="desc">Any content here!</div>
</div>
<div class="clear"></div> 
```

更新了CSS

```
#wrap{overflow:hidden} 
```

更新了js

```
$(document).ready(function() {
    $("#wrap").hover(function () {
        $(".desc").toggle();
    })
}) 
```

链接[http://jsfiddle.net/RUtgE/1/](http://jsfiddle.net/RUtgE/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:05:27.447

使用`.css('display', 'block')`代替`.toggle()`

[JSFiddle](http://jsfiddle.net/sohelkhalifa/y8wPw/61/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:08:21.200

您可以使用 mouseenter 代替悬停。在这种情况下，它会在您第一次点击“帮助”按钮时显示，下次它会再次关闭。

查看[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)了解更多可玩的鼠标事件！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T11:15:10.577

```
$(document).ready(function() {
    $(".body").hover(function () {
        $(".desc").show();
    })
    $(".close").click(function () {
        $(".desc").hide();
    })
    $(".wrap").mouseleave(function () {
        $(".desc").hide();
    })
}) 
```

[http://jsfiddle.net/y8wPw/74/](http://jsfiddle.net/y8wPw/74/)

这就是我要找的！在你的帮助下，我成功了！

谢谢大家！

# c# - 无法获取一天中的小时和分钟

> ID：14644870
> 
> 赞同：4
> 
> 时间：2013-02-01T11:02:15.473
> 
> 标签：c#, datetime

我正在尝试获取当前时间：

```
date = "(" + DateTime.Today.Year.ToString() + "-" + 
DateTime.Today.Month.ToString() + "-" + DateTime.Today.Day.ToString() + " " + 
"(" + DateTime.Today.Hour.ToString() + ":" + DateTime.Today.Minute.ToString() 
+")" + ")"; 
```

这应该得到一个日期，如：

(2013-2-1 (13:01))

但它给了我：

(2013-2-1 (0:0))

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T11:03:52.667

您正在使用[`DateTime.Today`](http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx)记录为：

> 设置为今天日期的对象，时间组件设置为 00:00:00。

所以是的，如果你找到`Hour`和`Minute`组件，它们*将*是 0 ...

如果您想要一天中的当前时间，请[`DateTime.Now`](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)改用。请注意，两者都`Today`使用`Now`系统本地时区 - 您需要确保这确实是您想要使用的。（对于本地客户端应用程序可能没问题，但对于 Web 应用程序则不行。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T11:08:23.993

代替您目前使用的所有串联，使用 DateTime 对象的 ToString() 方法...

```
string date = DateTime.Now.ToString("(yyyy-M-d (hh:mm))"); 
```

此外，正如许多其他人所指出的，请注意使用`DateTime.Now`代替`DateTime.Today`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T11:06:09.483

如果它是一个 Web 应用程序，请使用[NodaTime 。](http://code.google.com/p/noda-time/)用于`DateTime.Now`本地日期和时间。

所以应该是：

```
date = "(" + DateTime.Now.Year.ToString() + "-" + DateTime.Now.Month.ToString() + "-" + DateTime.Now.Day.ToString() + " " + "(" + DateTime.Now.Hour.ToString() + ":" + DateTime.Now.Minute.ToString() +")" + ")"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T11:03:37.463

使用 DateTime.Now 而不是 DateTime.Today

[DateTime.Today](http://msdn.microsoft.com/en-US/library/system.datetime.today%28v=VS.80%29.aspx)的时间部分设置为 00:00:00 [DateTime.Now](http://msdn.microsoft.com/en-us/library/system.datetime.now%28v=VS.80%29.aspx)获取本地计算机
的当前日期和**时间**

 *** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T11:04:01.817

你有`DateTime.Today`它截断了时间元素。

改用`DateTime.Now`它可以为您提供完整的日期和时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-01T11:11:59.643

请根据您的格式为当前日期和时间尝试这个较短的代码

`var date = DateTime.Now.ToString("(yyyy-MM-dd(HH:mm))");`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-01T11:05:05.300

使用`DateTime.Now`而不是`DateTime.Today`. `DateTime.Today`不包括时间，只包括日期。另请参阅：[System.DateTime.Now 和 System.DateTime.Today 之间的区别](https://stackoverflow.com/questions/6545254/difference-between-system-datetime-now-and-system-datetime-today)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-01T11:15:18.550

使用以下代码而不是串联。它比您所做的串联工作更优化。

```
string date = DateTime.Now.ToString("(yyyy-M-d (hh:mm))"); 
```

也`DateTime.Today`没有时间元素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-01T12:06:22.863

`DateTime.Today`将返回`2013-2-1 00:00:00`.. 它确实给出了时间，但时间戳设置为`00:00:00.`. 这就是为什么你没有得到异常 n 仍然得到的原因`00:00:00`。用于`DateTime.Now`当前时间戳。**

# c# - 如何删除 ISO 编码的 XML 文件中存在的损坏字符

> ID：14644875
> 
> 赞同：0
> 
> 时间：2013-02-01T11:02:36.990
> 
> 标签：c#, xml, encoding, utf-16, iso-8859-1

当我尝试将使用 UTF-16 编码的 xml 文件转换为 ISO-8859-1 时，我看到像`Â`.

您能否建议一些解决方案来删除损坏的字符？我想要 ISO 编码格式的 XML。

这是我的代码，

```
using (SqlConnection sqlConnection = new SqlConnection(ConfigurationManager.AppSettings.Get("SqlConn")))
{
    sqlConnection.Open();

    using (SqlCommand sqlCommand = new SqlCommand())
    {
        sqlCommand.CommandTimeout = 0;
        sqlCommand.CommandText = commandText;
        sqlCommand.Connection = sqlConnection;

        // the data from database data is UTF encoded
        using (StreamWriter textwriterISO = new StreamWriter(path + "_out.XML", false, Encoding.GetEncoding("ISO-8859-1")))
        {                                  
            SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();
            Console.WriteLine("Writing results.This could take a very long time.");
            while (sqlDataReader.Read())
            {
                for (int i = 0; i < sqlDataReader.FieldCount; i++)
                {
                    byte[] arr = System.Text.Encoding.GetEncoding(28591).GetBytes(sqlDataReader[i].ToString());
                    string ascii = Encoding.GetEncoding("UTF-8").GetString(arr);
                    textwriter.WriteLine(sqlDataReader.GetName(i),ascii));
                }

                textwriter.Flush();
            }
        }
    }                         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:20:14.233

您的代码滥用了`StreamWriter`该类并对数据库数据进行了错误的手动编码。您正在将源 UTF-16 DB 数据转换为 CP28591，将 CP28591 字节解释为 UTF-8 以便将它们转换回 UTF-16，然后`StreamWriter`在写入时将现在格式错误的 UTF-16 转换为 ISO-8859-1到文件。这是完全错误的做法，更不用说所有这些转换所浪费的开销了。让我们`StreamWriter`直接处理源 UTF-16 DB 数据的编码，摆脱其他一切，例如：

```
using (StreamWriter textwriterISO = new StreamWriter(path + "_out.XML", false, Encoding.GetEncoding("ISO-8859-1")))
{                                  
    SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();
    Console.WriteLine("Writing results.This could take a very long time.");
    while (sqlDataReader.Read())
    {
        for (int i = 0; i < sqlDataReader.FieldCount; i++)
        {
            // you were originally calling the WriteLine(String, Object) overload.
            // Are you sure you want to call that? It interprets the first parameter
            // as a pattern to format the value of the second parameter. A DB column
            // name is not a formatting pattern!
            textwriterISO.WriteLine(sqlDataReader.GetName(i), sqlDataReader[i].ToString());

            // perhaps you meant to write the DB column name and field value separately?
            //
            // textwriterISO.WriteLine(sqlDataReader.GetName(i));
            // textwriterISO.WriteLine(sqlDataReader[i].ToString());
        }
        textwriterISO.Flush();
    }
} 
```

话虽如此，您提到您希望以 XML 格式输出。 `StreamWriter`它本身不会为您输出 XML。改用`XmlSerializer`or`XmlTextWriter`类将您的 DataReader 数据转换为 XML，然后将其写入您的`StreamWriter`.

# ios - 使用 Core Graphics 绘制元素或提供图像？

> ID：14644877
> 
> 赞同：1
> 
> 时间：2013-02-01T11:02:57.513
> 
> 标签：ios, resources, core-graphics

我不太确定使用 Core Graphics 绘制我的应用程序的视觉元素而不是提供图像是否有益。在内存保存和运行速度方面哪种方式更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:28:48.007

> 在内存保存和运行速度方面，哪种方式更好？

`+UIImage:imageNamed:`是最有效的。它缓存图像，即内存中只有一个图像副本，并且在需要时对图像进行解码（从其 PNG、JPEG、TIFF 等数据）并保留以供将来重用。如果您担心内存使用，`UIImage`如果您运行不足或进入后台，iOS 将清除缓存。

使用 Core Graphics 绘制图像不会为您进行任何缓存，除非您编写代码将图像绘制到上下文中，将上下文保存为位图，缓存位图，然后稍后再使用它。因此，每次需要时，您最终都会一遍又一遍地绘制相同的东西。例如，如果您覆盖 UIView`-drawRect:`来绘制图像，那么在动画期间，它将为每一帧调用（每秒 60 次）。这会不必要地消耗 CPU 周期和电池寿命。

底线是它取决于您的应用程序是什么和做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:10:12.360

如果您不需要对图像进行太多更改或动画处理，那么您应该直接使用图像。除非您在单个视图控制器中有 100 个图像，否则不要太担心性能。

如果 iPhone 可以处理像极品飞车这样的游戏，那么运行一个带有各种图像的应用程序是一件容易的事。希望这可以帮助。

# python - 如何猜测图像 mime 类型？

> ID：14644880
> 
> 赞同：5
> 
> 时间：2013-02-01T11:03:07.183
> 
> 标签：python, image, cross-platform, mime

如何在没有任何外部库的情况下以跨平台方式猜测图像的 mime 类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T12:28:10.303

如果您事先知道您只需要处理有限数量的文件格式，您可以使用[imghdr.what](http://docs.python.org/3/library/imghdr.html#imghdr.what)函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T11:03:07.183

我检查了维基百科上流行的图像类型的格式，并尝试签名：

```
def guess_image_mime_type(f):
    '''
    Function guesses an image mime type.
    Supported filetypes are JPG, BMP, PNG.
    '''
    with open(f, 'rb') as f:
        data = f.read(11)
    if data[:4] == '\xff\xd8\xff\xe0' and data[6:] == 'JFIF\0':
        return 'image/jpeg'
    elif data[1:4] == "PNG":
        return 'image/png'
    elif data[:2] == "BM":
        return 'image/x-ms-bmp'
    else:
        return 'image/unknown-type' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:19:39.070

如果您可以依赖文件扩展名，则可以使用[mimetypes.guess_type](http://docs.python.org/2/library/mimetypes.html#mimetypes.guess_type)函数。请注意，您可能会在不同平台上得到不同的结果，但我仍将其称为跨平台。

# c# - 奇怪的篮子会话状态问题

> ID：14644882
> 
> 赞同：-1
> 
> 时间：2013-02-01T11:03:13.983
> 
> 标签：c#, asp.net, ajax, session

我们的结帐流程遇到了一个奇怪的问题。可以这么说：-

*   用户在他们的购物篮中添加了一些产品
*   单击以查看购物篮，然后删除这些产品 然后使用浏览器 <- 后退按钮导航到上一个产品页面
*   然后他们将另一个产品添加到购物篮中，这会导致整个网站的布局崩溃，就好像加载菜单或产品列表的代码都没有被触发，例如

![在此处输入图像描述](../Images/564f15a95f327341350d6a5d0982a528.png)

我认为这可能与我们在篮子上使用 AJAX 有关，所以我尝试了在[此处](https://stackoverflow.com/questions/829046/how-do-i-detect-if-a-user-has-got-to-a-page-using-the-back-button)发布的建议，向页面添加了一个隐藏的表单元素，这实际上解决了 chrome 中的问题，但在 Firefox 中，页面陷入了无限循环，

有没有人遇到过用户导航回以前状态的类似问题？我完全不知道接下来要尝试什么

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:05:10.773

好吧，我设法解决了这个问题。问题是，当用户通过历史导航回到以前的产品页面时，它被视为回发，因此没有任何用于填充页面控件的代码被触发，因为它位于`!Page.IsPostBack`块内......

由于我找不到更好的方法来确定页面何时损坏，我只是在导航选项卡中阅读并检查它们是否为空，这表明页面未正确加载，然后我们刷新，例如

```
 <script type="text/javascript">
    $(function() {
        $("#tabs-nav ul li").each(function() {
            if (!$(this).children().text() || /^\s*$/.test($(this).children().text())) {
                location.reload();
            }
        });
    });
</script> 
```

它不漂亮，但它完成了工作

谢谢

# search - 在 Android 设备上检测 Google 语音搜索安装的最有效方法

> ID：14644886
> 
> 赞同：1
> 
> 时间：2013-02-01T11:03:37.583
> 
> 标签：search, voice

我想问一下，... 在 Android 设备上检测[Google 语音搜索](https://play.google.com/store/apps/details?id=com.google.android.voicesearch&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC52b2ljZXNlYXJjaCJd)（应用程序 ID：com.google.android.voicesearch）安装的最有效方法是什么？是否有任何方法可以在不将用户带到 Play Market 并返回应用程序的情况下随后安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:53:13.240

您可以使用以下方法

```
private boolean voiceSearchExists() {
    final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
    List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
    final List<ResolveInfo> pkgAppsList = getPackageManager().queryIntentActivities( mainIntent, 0);
    boolean packageExists = false;
    boolean activityExists = false;
    for(PackageInfo r:packs){
        String pkg = r.applicationInfo.packageName;
        if(pkg != null && pkg.equals("com.google.android.googlequicksearchbox")){
            packageExists = true;
            break;
        }
    }
    if(packageExists == false)
        return false;

    for(ResolveInfo r:pkgAppsList){ 
        ActivityInfo info = r.activityInfo;
        if(info!=null && info.name!=null && info.name.equals("com.google.android.googlequicksearchbox.VoiceSearchActivity")){
            activityExists = true;
            break;
        }
    }
    return activityExists;
} 
```

# python - 在并行 Python 中返回一个对象（类）

> ID：14644889
> 
> 赞同：0
> 
> 时间：2013-02-01T11:03:54.623
> 
> 标签：python, parallel-processing

我创建了一个函数，它接受一个值，进行一些计算并将不同的答案作为一个对象返回。但是，当我尝试使用 pp 并行化代码时，出现以下错误。

文件“trmm.py”，第 8 行，在**getattr** 返回 self.header_array[name] RuntimeError：调用 Python 对象时超出最大递归深度

这是我正在尝试做的一个简单版本。

```
class DataObject(object):
    """
    Class to handle data objects with several arrays.

    """
    def __getattr__(self, name):
        try:
            return self.header_array[name]
        except KeyError:
            try:
                return self.line[name]
            except KeyError:
                raise AttributeError("%s instance has no attribute '%s'" %(self.__class__.__name__, name))

    def __setattr__(self, name, value):
        if name in ('header_array', 'line'):
            object.__setattr__(self, name, value)
        elif name in self.line:
            self.line[name] = value
        else:
            self.header_array[name] = value

class TrmmObject(DataObject):
    def __init__(self):
        DataObject.__init__(self)                            
        self.header_array = {
            'header': None
            }
        self.line = {
            'longitude': None,
            'latitude': None
            }

if __name__ == '__main__':
    import pp
    ppservers = ()
    job_server = pp.Server(2, ppservers=ppservers)
    def get_monthly_values(value):                
        tplObj = TrmmObject()
        tplObj.longitude = value
        tplObj.latitude = value * 2
        return tplObj
    job1 = job_server.submit(get_monthly_values, (5,), (DataObject,TrmmObject,),("numpy",))
    result = job1() 
```

如果我将 return tplObj 更改为 return [tplObj.longitude, tplObj.latitude] 就没有问题。但是，正如我之前所说，这是一个简单的版本，实际上这种更改会使程序复杂化很多。

我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:12:01.700

您几乎从不需要使用 getattr 和 setattr，而且它几乎总是会导致某些事情发生爆炸，而无限递归就是这种情况的典型效果。我也看不出有任何理由在这里使用它们。明确并直接使用 line 和 header_array 字典。

如果您想要一个在所有数组中查找值的函数，请为此创建一个函数并显式调用它。调用函数`__getitem__`并使用 [] 是明确的。:-)

（并且请不要将字典称为“header_array **”**，这会令人困惑）。

# java - 在 Swing 中使用 JDesktopPane 滚动控件

> ID：14644892
> 
> 赞同：-1
> 
> 时间：2013-02-01T11:04:02.853
> 
> 标签：java, swing, scroll, jscrollpane, jdesktoppane

我已经使用 netbeans 在 JPanel 上设计了摆动控件，现在我希望控件应该通过单击 Jscrollbar 或 JSlider 来滚动

```
Suppose i have four buttons on the jpanel from then they should appear one by one from  
right to left while clicking on the jscrollbar or jslider. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:33:38.953

您正在寻找[JComponent.scrollRectToVisible](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#scrollRectToVisible%28java.awt.Rectangle%29)。

# android - Android SQLiteDatabase 语法错误，代码 1

> ID：14644894
> 
> 赞同：1
> 
> 时间：2013-02-01T11:04:15.867
> 
> 标签：android, syntax-error, sqlite

我正在根据[这个来源](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)制作一个 SQLiteDatabase ，但我遇到了一个我无法弄清楚的语法错误。我在 StackOverflow 上看到过其他关于此的帖子，但它们似乎没有帮助。在这些情况下，它们在某处包含额外的空格或保留字，但我尝试了不同的间距组合并确保没有保留任何字。

我唯一能想到的是我在一个数据库中制作了两个表，这是不可接受的吗？这是导致问题的代码的要点：

```
//table name
private static final String TABLE_INGREDIENTS = "table_ingredients";
private static final String TABLE_UNITS = "table_units";

//column names
private static final String ING_KEY_ID = "ing_id";
private static final String ING_KEY_NAME = "ing_name";
private static final String ING_KEY_DENSITY = "ing_density";    
private static final String UNIT_KEY_ID = "unit_id";
private static final String UNIT_KEY_NAME = "unit_name";
private static final String UNIT_KEY_BASE_VALUE = "unit_base_value";
private static final String UNIT_KEY_FINAL_VALUE = "unit_final_value";
private static final String UNIT_KEY_IS_WEIGHT = "unit_is_weight";

// Create Tables
@Override
public void onCreate(SQLiteDatabase db) 
{
    String CREATE_ING_TABLE = "CREATE INGREDIENTS TABLE IF NOT EXISTS " + TABLE_INGREDIENTS + "("
            + ING_KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + ING_KEY_NAME + " TEXT,"
            + ING_KEY_DENSITY + " REAL" + ")";
    db.execSQL(CREATE_ING_TABLE);

    String CREATE_UNIT_TABLE = "CREATE UNITS TABLE IF NOT EXISTS " + TABLE_UNITS + "("
            + UNIT_KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + UNIT_KEY_NAME + " TEXT,"
            + UNIT_KEY_BASE_VALUE + " REAL," + UNIT_KEY_FINAL_VALUE + " REAL,"
            + UNIT_KEY_IS_WEIGHT + " INTEGER" + ")";        
    db.execSQL(CREATE_UNIT_TABLE);
} 
```

这是我的日志输出，以防我的解释有误：

```
02-01 12:48:43.855: D/QBCPro:::(7186): LoadAllTask doInBackground called...
02-01 12:48:43.855: D/QBCPro:::(7186): Entering onResume()...
02-01 12:48:43.875: E/SQLiteLog(7186): (1) near "INGREDIENTS": syntax error
02-01 12:48:43.875: W/dalvikvm(7186): threadid=11: thread exiting with uncaught exception (group=0x41eb8300)
02-01 12:48:43.895: E/AndroidRuntime(7186): FATAL EXCEPTION: AsyncTask #1
02-01 12:48:43.895: E/AndroidRuntime(7186): java.lang.RuntimeException: An error occured while executing doInBackground()
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.lang.Thread.run(Thread.java:856)
02-01 12:48:43.895: E/AndroidRuntime(7186): Caused by: android.database.sqlite.SQLiteException: near "INGREDIENTS": syntax error (code 1): , while compiling: CREATE INGREDIENTS TABLE IF NOT EXISTS table_ingredients(ing_id INTEGER PRIMARY KEY AUTOINCREMENT,ing_name TEXT,ing_density REAL)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1663)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1594)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at com.sfware.quickbakeconverterpro.DatabaseHelper.onCreate(DatabaseHelper.java:49)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:252)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at com.sfware.quickbakeconverterpro.DatabaseHelper.open(DatabaseHelper.java:72)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at com.sfware.quickbakeconverterpro.QuickBakeConverterPro$LoadAllTask.doInBackground(QuickBakeConverterPro.java:690)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at com.sfware.quickbakeconverterpro.QuickBakeConverterPro$LoadAllTask.doInBackground(QuickBakeConverterPro.java:1)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-01 12:48:43.895: E/AndroidRuntime(7186):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-01 12:48:43.895: E/AndroidRuntime(7186):     ... 5 more
02-01 12:48:44.045: D/libEGL(7186): loaded /system/lib/egl/libEGL_mali.so
02-01 12:48:44.135: D/libEGL(7186): loaded /system/lib/egl/libGLESv1_CM_mali.so
02-01 12:48:44.145: D/libEGL(7186): loaded /system/lib/egl/libGLESv2_mali.so
02-01 12:48:44.215: D/OpenGLRenderer(7186): Enabling debug mode 0
02-01 12:48:44.400: D/QBCPro:::(7186): Entering onPause()...
02-01 12:48:44.405: D/QBCPro:::(7186): Leaving onPause()...
02-01 12:48:44.545: D/QBCPro:::(7186): Entering onStop()...
02-01 12:48:44.545: D/QBCPro:::(7186): About to save data in new SaveAllTask
02-01 12:48:44.545: D/QBCPro:::(7186): Leaving onStop()...
02-01 12:48:44.545: D/QBCPro:::(7186): SaveAllTask doInBackground called...
02-01 12:48:44.560: E/SQLiteLog(7186): (1) near "INGREDIENTS": syntax error 
```

谁能帮我发现它？不幸的是，我对 SQLiteDatabase 语法仍然生疏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:05:46.410

### 快速解决：

改成

```
 String CREATE_ING_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_INGREDIENTS + "("
            + ING_KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + ING_KEY_NAME + " TEXT,"
            + ING_KEY_DENSITY + " REAL" + ")"; 
```

### 解释：

该`execSQL()`方法需要一个 SQL 字符串，该字符串必须按照指南以特定方式构造。原始问题有`CREATE`**INGREDIENTS**`TABLE IF NOT EXISTS`，该方法不支持`execSQL()`。当它被替换时`CREATE TABLE IF NOT EXISTS`，它会正常工作。

有关更多信息，请查看developer.android.com上的[SQLiteDatabase 页面](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String))`execSQL()`，特别是这两种方法。

# c - 在 C++ 中将文件的位置作为字符串获取

> ID：14644895
> 
> 赞同：0
> 
> 时间：2013-02-01T11:04:16.510
> 
> 标签：c

我试图获取文件的位置让我们说： **D\stuff.tif** 在我的程序中的字符串如下：

```
 filename = 'D:\stuff.tif' 
```

我需要它的形式，所以我一直在尝试：

```
 char text[50];// = "filename = ";
   char filep [50];
   printf("get file name ") ;
   scanf("%s",&filep);
   sprintf(text," filename = \' %s \'",filep); 
```

它没有任何想法？? 在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:20:45.363

您确实意识到您编写的是 C 而不是 C++？在 C++ 中，你会做这样的事情：

```
#include <iostream>
#include <string>

int main()
{
    std::string text, filep;
    std::cout << "get file name ";
    std::cin >> filep;
    text = " filename = '" + filep + "'";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:08:06.863

试试这个

```
char text[255];// = "filename = ";
char filep [50];
printf("get file name ") ;
scanf("%s",filep);
sprintf(text," filename = \'%s\'",filep); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:10:15.383

`scanf`应该以 a`char *`作为参数；您`char (*)[50]`通过获取`filep`. 尝试：

```
 char text[50];// = "filename = ";
   char filep [50];
   printf("get file name ") ;
   scanf("%s",filep);  // <- removed address-of here
   sprintf(text," filename = \' %s \'",filep); 
```

# c# - WF4 的 WorkflowServiceHost 的替代方案？

> ID：14644897
> 
> 赞同：3
> 
> 时间：2013-02-01T11:04:26.430
> 
> 标签：c#, .net, workflow-foundation-4

我们希望用 WF4 工作流替换我们的大部分业务逻辑。
它们都是非常典型的工作流程：用户操作创建实例、数据库工作、下一个用户确认等。

我们对工作流主机的要求是：

1.  从存储在数据库中的 XAML 定义创建工作流 (DynamicActivity)
2.  支持不同版本的工作流
3.  支持基于长时间的事件（我们目前知道 5 天后通知并在 30 天后回滚工作流）
4.  支持许多工作流的许多实例（我们已经确定了 10 个工作流，其中大约有 4000 个正在进行中，其中只有少数在任何时候都在处理）
5.  服务重启后保留所有状态（包括基于时间的事件）
6.  对调用用户进行身份验证（WindowsAuthentication，如果可能）

作为迁移工作的一部分，我使用“WCF 工作流服务应用程序”项目构建了一些 POC，但据我所知，这些并不是立即可行的。

我知道 #2 是通过 WCF 路由完成的，我的理解是 WSH 将为我们处理 #3（这是真的，给定 #5 吗？），但我看不出 #1 在默认情况下如何工作项目结构。
我已经使用 WorkflowApplication 实例解决了 #1，但这依赖于使用书签来恢复每个输入事件，而且我不相信 WorkflowApplication 会在不卸载空闲工作流的情况下扩展以满足我们的需求，这会破坏延迟活动。

所以，如果你一直坚持我这么远：

*   有没有办法使用 WSH 来实现所有这些，无论是在默认项目中还是通过我们自己实现其中一些？
*   考虑到较长的持续时间以及卸载和重新加载工作流的潜在需求，我们是否最好编写自己的“DurableDelay”活动来记录真正的唤醒时间并卸载要由主机进程恢复的工作流？
*   如果 WSH 不打算这样做，是否有现有的替代方案？

我不反对编写我们自己的主机服务来处理工作流生命周期，我们甚至制定了提议的设计，但如果事实证明有现成的解决方案，我不想开始这条路线.

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:18:19.767

您可以通过使用 a从数据库而不是文件系统加载工作流来实现**#1 。**有关这方面的更多信息，[`VirtualPathProvider`](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)请参阅[如何使用数据库存储库构建工作流服务。](http://channel9.msdn.com/Shows/Workflow-TV/AppFabrictv-How-To-Build-Workflow-Services-with-a-Database-Respository)

.NET 4.0 不支持工作流版本控制 ( **#2 )，但在 .NET 4.5 中，您可以更好地支持实际版本控制。**请参阅[Windows Workflow Foundation 4.5 中的新增功能](http://msdn.microsoft.com/en-us/magazine/hh781025.aspx)。但是，如果您不需要在工作流启动后更改工作流，而只需要新实例从新版本开始，而已经执行的实例可以使用以前的工作流定义完成，那么您可以在数据库级别实现版本控制并只处理每个工作流定义版本具有不同的工作流服务。

然后，您可以将 IIS ( [AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx) ) 中托管的工作流服务与 SQL Server 实例存储一起使用，几乎免费获得**#3**、**#4**和**#5 。**

最后对于**#6**，假设您坚持使用 .NET 4.0，您可以查看[WF Security Pack CTP 1](http://wf.codeplex.com/releases/view/48114)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:42:29.850

我正在开发相同类型的工作流程。

我也首先介绍了工作流服务，但由于我们的工作流完全集成在业务层中，我不想使用 WCF 来访问工作流。
所以我现在使用 WorkflowApplication 作为主机，所以我可以实例化和操作主机。
最大的问题是恢复使用延迟活动的工作流程（您需要在数据库中检查自己）

# javascript - QUnit 数据提供者

> ID：14644901
> 
> 赞同：4
> 
> 时间：2013-02-01T11:04:33.997
> 
> 标签：javascript, phpunit, qunit

我们在 PHPUnit 中有数据提供者的概念。数据提供者方法提供任意参数。像下面

```
<code>

<?php
class DataTest extends PHPUnit_Framework_TestCase
{
/**
* @dataProvider provider
*/
public function testAdd($a, $b, $c)
{
   $this->assertEquals($c, $a + $b);
}

public function provider()
{
    return array(
      array(0, 0, 0),
      array(0, 1, 1),
      array(1, 0, 1),
      array(1, 1, 3)
   );
}
}
?>
</code> 
```

现在我的问题是我如何为 Qunit 做到这一点？？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T06:18:33.840

有 QUnit 插件来运行参数化测试：[https ://github.com/AStepaniuk/qunit-parameterize](https://github.com/AStepaniuk/qunit-parameterize)

我认为这就是你要找的。

# android - Android SDK - 文件下载速度很慢

> ID：14644902
> 
> 赞同：0
> 
> 时间：2013-02-01T11:04:37.337
> 
> 标签：android, http, download

我构建/复制了一个下载功能，该功能通过 URL 获取图像和视频并将它们下载到 Android 设备。

下载小图像时没问题。但是，当尝试获取超过`2MB`（通过 WLAN！）的文件时，它确实需要很长时间！一个 25MB 的视频大约需要 5 分钟，依此类推。

有什么想法可能会出错吗？

这是我的代码：

```
 /* Open a connection to that URL. */
        URLConnection ucon = url.openConnection();

        /*
         * Define InputStreams to read from the URLConnection.
         */
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */
        ByteArrayBuffer baf = new ByteArrayBuffer(50);
        int current = 0;
        while ((current = bis.read()) != -1) {
                baf.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(baf.toByteArray());
        fos.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:35:17.987

使用 DownloadManager 下载文件

```
 private long enqueue;
private DownloadManager dm;

 BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                long downloadId = intent.getLongExtra(
                        DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                Query query = new Query();
                query.setFilterById(enqueue);
                Cursor c = dm.query(query);
                if (c.moveToFirst()) {
                    int columnIndex = c.getColumnIndex(DownloadManager.COLUMN_STATUS);
                    if (DownloadManager.STATUS_SUCCESSFUL == c.getInt(columnIndex)) {

                        Log.e("Download completed","HERE DOWNLOAD COMPLETED");
                        try
                        {
                                                        }
                        catch (Exception e) {
                            // TODO: handle exception
                        }

                    }
}
            }
}}; 
```

要开始此下载，请使用：

```
 dm = (DownloadManager)activityContext.getSystemService(activityContext.DOWNLOAD_SERVICE);
    Request request = new Request(Uri.parse("URL")).setDestinationInExternalPublicDir("DIRECTORY","FILENAME");
    enqueue = dm.enqueue(request); 
```

# javascript - 计算元素尺寸以适合容器内部

> ID：14644903
> 
> 赞同：1
> 
> 时间：2013-02-01T11:04:40.577
> 
> 标签：javascript, html, css

我有一个固定宽度 235 像素和高度 200 像素的 ul。此 ul 由 n 个 li 填充，具体取决于查询结果。如何计算 li 的尺寸，以便它们填充 ul 内的所有可用空间。

我尝试计算容器的周长并将其与每个元素的周长的总和进行比较，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:10:04.720

根据 li 的数量使 ul 高度动态并应用 css display:inline-block 和 overflow: hidden 到 ul

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:11:55.600

`li`根本不提宽度

**HTML**

```
<div class="wrap">
    <ul>
        <li><a href="#">link1</a></li>
        <li><a href="#">link2</a></li>
            <li><a href="#">link3</a></li>
    </ul>
</div> 
```

**CSS**

```
.wrap{
    width:235px;
    height:200px;
    background:grey
}
ul{background:red; margin:0; padding:0; width:100%;}
li{
    display:inline-block;  
    margin-right:2px;
    background:red;
    border-right:solid black green; 
} 
```

**[演示](http://jsfiddle.net/hfQhv/2/)**

* * *

**案例二**

添加`height:100%`到 li （它强制 li 覆盖整个可用高度）并为两者提供相同的 bg 颜色，`ul & li`以便看起来它已经占据了可用宽度

```
html,body{height:100%}
ul{
   background:red; 
   margin:0; padding:0; 
   width:235px;
   height:200px;
}
li{
    display:inline-block;   height:100%;
    margin-right:2px;
    background:green;
    border-right:solid black green; 
} 
```

**[演示 2](http://jsfiddle.net/hfQhv/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:43:09.197

如果你愿意，你可以用 jQuery 来做这件事。

就像是：

```
$(document).ready(function(){
   var liCount = parseInt($('ul li').length());
   var height = parseInt($('ul').height();
   var liHeight = height / liCount;
   $('ul li').css('height', liHeight);
}); 
```

当然，不要忘记给出 ul 和 ID 并将其传递给 jQuery 而不是 'ul li'，否则页面中的所有 li 对象都会受到影响

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:21:21.147

好的，这是我对代码的尝试，该代码将计算出相当高的覆盖率`ul`（不确定它是否实际上是最大的），考虑到`li`s 不需要是正方形的约束，但对于任何给定数量的项目，它们的大小必须相同.

第一部分给出了一个函数`getSquare(n)`，它将记住正方形的生成，这样如果你需要在一个页面上多次使用它，它就不会继续重新计算。

第二部分是进行计算的函数。将项目数以及容器的宽度和高度传递给它，它将返回一个具有项目宽度和高度属性的对象。它不能确保整数结果。

带有 throw 的线只是为了测试目的，可以删除。

```
var getSquare = (function()
{
    var squares = [];
    return function(n)
    {
        if (!squares[n])
        {
            squares[n] = Math.pow(n, 2);
        }
        return squares[n];
    };
})();

function calcItemDimensions(itemCount, areaWidth, areaHeight)
{
    var x, y, slots,
        n = 0,
        sq = 0;

    while (itemCount > sq)
    {
        n += 1;
        sq = getSquare(n);
    }

    x = y = n;
    slots = sq;

    while (slots - itemCount >= x)
    {
        if (x === y) { y -= 1; }
        else { x = y; }
        slots = x * y;
        if (slots < itemCount) { throw new Error('slots < itemCount: ' + slots + ' < ' + itemCount); }
    }

    return { width: areaWidth / x, height: areaHeight / y };
} 
```

# linux - 致命：模块 kvm_intel 正在使用中

> ID：14644904
> 
> 赞同：4
> 
> 时间：2013-02-01T11:04:52.233
> 
> 标签：linux, module, debian

我正在尝试删除一个模块，但它不断失败：

```
$ sudo modprobe -r kvm_intel
FATAL: Module kvm_intel is in use. 
```

尽管：

```
$ lsmod | grep kvm
kvm_intel             120858  4 
kvm                   296583  1 kvm_intel 
```

我应该如何删除 kvm_intel ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:10:52.113

为了后代，我尝试过：

```
$ sudo rmmod -f kvm_intel 
```

突然我的电脑开始发出哔哔声，并切换到一个充满内核信息的虚拟屏幕。

重新启动后，我只是尝试：

```
$ sudo apt-get remove libvirt-bin 
```

然后：**_**

```
$ sudo modprobe -r kvm_intel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T11:21:51.460

您可以从找出使用 kvm 的内容开始`lsof`：

```
# sudo lsof | grep kvm 
```

相关进程通常是 qemu 实例，因此`pgrep -a qemu`也可能派上用场。

然后在确保您不需要它们之后尝试杀死您找到的进程。

# php - Windows 批处理文件执行 PHP 访问 mySQLi 数据库

> ID：14644905
> 
> 赞同：0
> 
> 时间：2013-02-01T11:04:58.080
> 
> 标签：php, batch-file

我正在编写一个 Windows 批处理文件，该文件需要执行一个 PHP 文件，该文件从后端获取数据并插入到 mysql 数据库中。

下面是我使用的代码，它正在工作，但它会打开浏览器。

```
@ECHO OFF
START http://localhost/test.php 
```

如何确保执行 START 时不调用浏览器？我试图将 /B 放在后面，但它不起作用。

我也尝试了以下方法，但它根本不起作用，并且没有插入任何内容。

```
@ECHO OFF
php.exe -f "C:\wamp\www\test.php" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:11:22.853

简单的答案是 php 文件设置为使用您的默认浏览器打开，当您打开 php 文件时，它将使用该浏览器打开。

如果你想在 cmd 中查看文件的内容，你可以使用

```
type test.php 
```

# jquery - 仍然使用同源策略 为什么 JSON 响应在 https 链接上使用 jquery ajax 是空白的？

> ID：14644913
> 
> 赞同：-1
> 
> 时间：2013-02-01T11:05:11.717
> 
> 标签：jquery, autocomplete, https, jsonp, same-origin-policy

我有一个 HTTPS 页面，在那个安全页面上，我正在尝试实现 jquery 自动完成插件。

我的代码如下：

```
function stateAutoComplete(id, widthParam){

widthParam = typeof widthParam !== 'undefined' ? widthParam : '188px';

jQuery( "#"+id).autocomplete({
    source: function( request, response ) {
        jQuery.ajax({
            url: base_url+"/stateSearchJSON",
            dataType: "jsonp",
            data: {                 
                maxRows: 10,
                startsWith: request.term
            },
            success: function( data ) {                                 

            response( jQuery.map( data.states, function( item ) {
                    return {
                        value: item.stateName,
                        label: item.stateName
                    }
                }));
                jQuery('.ui-autocomplete').css('width', widthParam);

            }
        });
    }, 
```

我正在使用相同的来源策略使用 jquery ajax 调用获取 json 响应，但是当我在 firebug net 选项卡中看到响应时，我得到空响应并且响应 url 变为红色。

我不知道为什么会发生这种情况，因为我在 http 页面上使用了相同的代码并且它在 http 页面上工作得非常好，那么为什么这个问题会出现在 https 页面上？

谁能帮帮我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T21:50:31.050

您必须确保请求来自：
[http](http://example.com/requestingpage.html) ://example.com/requestingpage.html到[http://example.com/stateSearchJSON](http://example.com/stateSearchJSON)

而不是：
[http](http://example.com/requestingpage.html) ://example.com/requestingpage.html到[https://example.com/stateSearchJSON](https://example.com/stateSearchJSON)
或
[http://example.com/requestingpage.html](http://example.com/requestingpage.html)到[https://differenturl.com/stateSearchJSON](https://differenturl.com/stateSearchJSON)

否则，您将不得不添加一个回调并使用 jsonp （看起来您正在使用它）。如果您不需要它，您可能需要删除“json

# php - PHP 安全地接收用户输入

> ID：14644919
> 
> 赞同：1
> 
> 时间：2013-02-01T11:05:29.370
> 
> 标签：php, validation

我想对我的用户好一点，但不想错误地获取恶意代码。看了这么多问题，我决定加入白名单，所以我只得到我认可的角色。

怎么可能对用户友善，所以我让他们输入许多字符并仍然保持我的输入免受恶意代码的影响？
我正在使用 Apache 和 PHP 5.3.8，我还没有合并 PDO，因为当我听说它时，我已经深入到项目中，担心它可能会发生太大的变化。

任何想法都会有所帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:04:27.107

如果它可以输出给用户，则必须防止潜在的恶意用户在其代码中包含 HTML 标记。例如，如果在那篇文章中，我可以包含一个`script`标签，这对于阅读我的文章的任何用户来说都是非常危险的。为了防止这种情况，你想使用[`htmlentities`](https://www.php.net/manual/en/function.htmlentities.php)：

```
$clean_data = htmlentities($_POST['data']); 
```

这样，我的`<script>`标签将被翻译，`&lt;script&gt;`因此在浏览器显示时不会伤害用户。

现在，如果你想将我的帖子保存在你的数据库中，你必须小心 SQL 注入。假设您正在使用该查询保存我的帖子（是的，您不应该使用`mysql_*`已弃用的函数，但这只是为了解释这个想法）：

```
mysql_query($db, "INSERT INTO posts(data) values('$clean_data');"); 
```

听起来不错 ？好吧，如果我很讨厌，我会尝试包含该帖子：

```
test'); DELETE FROM posts; SELECT * FROM posts WHERE data = ' 
```

那么你的 MySQL 得到的是

```
INSERT INTO posts(data) values('test'); DELETE FROM posts; SELECT * FROM posts WHERE data = ''); 
```

哎哟。因此，您必须基本上防止您的用户在他的帖子中包含引号和双引号，或者更准确地说，您应该转义它们。这实际上取决于您使用的库，但在我使用的过时的库中，会这样写：

```
$really_clean_data = mysql_real_escape_string($db, $clean_data);
mysql_query($db, "INSERT INTO posts(data) values('$really_clean_data');"); 
```

所以，有了上面的恶意帖子，MySQL 现在会收到

```
INSERT INTO posts(data) values('test\'); DELETE FROM posts; SELECT * FROM posts WHERE data = \''); 
```

现在，对于 MySQL，整个`INSERT INTO posts(data) values('test'); DELETE FROM posts; SELECT * FROM posts WHERE data = '');`部分都是正确的字符串，所以发生的事情就是你想要发生的事情。

基本上，在几乎所有情况下，这就是您所需要的。请记住，当您将用户数据提供给解释器（它可以是 Web 浏览器、SQL 引擎或许多其他东西）时，您应该清理该数据，最好的方法是使用应该随您使用的库一起提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:23:21.597

只是为了补充 Fabien 已经给出的答案，文本数据类型并不是您需要关注的唯一项目。数字同样重要。类型转换你的变量是处理它的一种方法。例如，

```
$really_clean_data = mysql_real_escape_string($db, $clean_data);
$query = "UPDATE posts SET post = '".$really_clean_data."' WHERE id = '".(int)$_POST['id']."'"; 
```

提交的所有数据，包括您要更新的帖子的 ID 号，都与文本区域或文本输入条目一样可疑，并且同样容易受到恶意修改。当你知道它应该是一个整数（数字）时，你可以这样转换它。如果它不是数字，则 (int) 会将其转换为 0。您无法更新第 0 行，因此 SQL 查询将失败。

要在执行查询之前检查该故障，您可以使用 is_numeric() 函数检查发布的数据以查看它是否为数字。

```
if(!is_numeric($_POST['id'])){
    die("Post id is not a number.");
} 
```

对于输入字段，尤其是用户名和密码字段，您可以设置最大长度并检查。例如，

```
if(strlen($_POST['username']) > 24){
    $error = "username is too long";
} 
```

如果您可以对此有所创意，那么防止 SQl 注入实际上很有趣！请记住，从现在起一年后，此页面上的所有内容都可能完全过时且无关紧要。安全是一个过程，而不是一个步骤，所以要时刻关注它。

# wpf - 何时解析 WPF 中的 x:Reference 以及为什么 XAML 元素顺序会影响它？

> ID：14644924
> 
> 赞同：11
> 
> 时间：2013-02-01T11:05:39.547
> 
> 标签：wpf, binding, reference, xamlparseexception

x：我在 XAML 中重新排列元素后无法解析引用。

在这里，我提供了一个工作代码。只需移动 DataGrid 元素，使其位于按钮元素之后，并且 ContextMenu 中的 MenuItem 和 Button.IsEnabled 中的 MultiBinding 的绑定被破坏。在 Button.IsEnabled 中，只有 MultiBinding 被破坏。它可以替换为注释块，并且 x:Reference 在该单个绑定中起作用。

两者都抛出 XamlParseException。

*   MenuItem 给出 System.Xaml.XamlObjectWriterException 和消息谈论未解决的引用。
*   MultiBinding 将 System.Collections.Generic.KeyNotFoundException 作为内部异常。

那么 x:Reference 什么时候真正解决了，为什么当被引用的元素出现在引用它的元素之后时，只有一些绑定会中断？

这是我的 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xxx="clr-namespace:WpfApplication1"
        Title="MainWindow" SizeToContent="WidthAndHeight">
    <Window.Resources>
        <xxx:BoolToVisibleConverter x:Key="boolToVisibleConv"></xxx:BoolToVisibleConverter>
        <xxx:NullToFalseConverter x:Key="nullToFalseConv"></xxx:NullToFalseConverter>
        <xxx:NullsOrToFalseConverter x:Key="nullsOrToFalseConv"></xxx:NullsOrToFalseConverter>
        <ContextMenu x:Key="MyMenu">
            <MenuItem 
                Header="Menuitem enabled when row selected" 
                IsEnabled="{Binding 
                    Path=SelectedItem, 
                    Source={x:Reference dataGridElement}, 
                    Converter={StaticResource nullToFalseConv}}" />
        </ContextMenu>
    </Window.Resources>
    <StackPanel>
        <DataGrid 
            Name="dataGridElement" 
            IsReadOnly="True" />
        <Button 
            Content="Button" 
            ContextMenu="{StaticResource MyMenu}" 
            Visibility="{Binding 
                Path=IsReadOnly, 
                Source={x:Reference dataGridElement},
                Converter={StaticResource boolToVisibleConv}}">
            <Button.IsEnabled>
                <!--<Binding 
                    Path="SelectedItem" 
                    Source="{x:Reference dataGridElement}" 
                    Converter="{StaticResource nullToFalseConv}"/>-->
                <MultiBinding 
                    Converter="{StaticResource nullsOrToFalseConv}">
                    <Binding 
                        Path="SelectedItem" 
                        Source="{x:Reference dataGridElement}"/>
                    <Binding 
                        Path="SelectedItem" 
                        Source="{x:Reference dataGridElement}"/>
                </MultiBinding>
            </Button.IsEnabled>
        </Button>
    </StackPanel>
</Window> 
```

这是我背后的代码（没有使用）：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
    public class BoolToVisibleConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null || (bool)value == false)
                return System.Windows.Visibility.Hidden;
            else
                return System.Windows.Visibility.Visible;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
    public class NullsOrToFalseConverter : IMultiValueConverter
    {
        public object Convert(object[] value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            foreach (object val in value)
            {
                if (val == null)
                    return false;
            }
            return true;
        }

        public object[] ConvertBack(object value, Type[] targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
    public class NullToFalseConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return (value != null);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-21T08:19:21.777

我想这是因为您的资源（Window.Resources）将在引用实例存在之前首先创建。我会尝试通过 DataContext (ViewModel) 解决这个问题。

```
<Window.DataContext>
        <yourNameSpace:YourViewModel x:Name="VieModName" />
    </Window.DataContext>
<MenuItem Header="HeadrTxt" Command="{Binding CommandInViewModelCmd}" DataContext="{x:Reference Name=VieModName}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T01:52:56.760

摘自 MSDN（[http://msdn.microsoft.com/en-us/library/ee795380.aspx](http://msdn.microsoft.com/en-us/library/ee795380.aspx)）。

> x:Reference 是在 XAML 2009 中定义的构造。在 WPF 中，您可以使用 XAML 2009 功能，但仅适用于非 WPF 标记编译的 XAML。标记编译的 XAML 和 XAML 的 BAML 形式目前不支持 XAML 2009 语言关键字和功能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T11:11:19.427

`x:Reference`在 WPF 中必须避免。因为这个标记扩展是最近添加到 XAML 语言 (2009) 的。WPF 并不完全支持它。在`ElementName`你的`Binding`而不是`x:Reference`.

```
<Binding Path="SelectedItem" 
         ElementName="dataGridElement"/> 
```

在[MSDN](http://msdn.microsoft.com/en-us/library/ee795380.aspx)上。

# c# - 在 .NET 中使用 PEM 编码的 RSA 私钥

> ID：14644926
> 
> 赞同：4
> 
> 时间：2013-02-01T11:05:46.007
> 
> 标签：c#, .net, cryptography, rsa, private-key

我有一个看起来像这样的私钥：

> -----BEGIN RSA PRIVATE KEY----- **一些私钥数据** -----END RSA PRIVA

我需要在我的 C# 项目中使用此密钥，但我找不到任何示例如何以这种格式使用密钥。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-21T23:10:17.610

1.  第 1 步获取“一些私钥数据”内容。删除 -----BEGIN RSA PRIVATE KEY----- 和 -----END RSA PRIVATE KEY-----，删除所有行符号（“\n ");
2.  步骤 2\. 将密钥解析为 RSA。

```
private RSACryptoServiceProvider CreateRsaProviderFromPrivateKey(string privateKey)
{
    var privateKeyBits = System.Convert.FromBase64String(privateKey);

    var RSA = new RSACryptoServiceProvider();
    var RSAparams = new RSAParameters();

    using (BinaryReader binr = new BinaryReader(new MemoryStream(privateKeyBits)))
    {
        byte bt = 0;
        ushort twobytes = 0;
        twobytes = binr.ReadUInt16();
        if (twobytes == 0x8130)
            binr.ReadByte();
        else if (twobytes == 0x8230)
            binr.ReadInt16();
        else
            throw new Exception("Unexpected value read binr.ReadUInt16()");

        twobytes = binr.ReadUInt16();
        if (twobytes != 0x0102)
            throw new Exception("Unexpected version");

        bt = binr.ReadByte();
        if (bt != 0x00)
            throw new Exception("Unexpected value read binr.ReadByte()");

        RSAparams.Modulus = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.Exponent = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.D = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.P = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.Q = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.DP = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.DQ = binr.ReadBytes(GetIntegerSize(binr));
        RSAparams.InverseQ = binr.ReadBytes(GetIntegerSize(binr));
    }

    RSA.ImportParameters(RSAparams);
    return RSA;
}

private int GetIntegerSize(BinaryReader binr)
{
    byte bt = 0;
    byte lowbyte = 0x00;
    byte highbyte = 0x00;
    int count = 0;
    bt = binr.ReadByte();
    if (bt != 0x02)
        return 0;
    bt = binr.ReadByte();

    if (bt == 0x81)
        count = binr.ReadByte();
    else
        if (bt == 0x82)
        {
            highbyte = binr.ReadByte();
            lowbyte = binr.ReadByte();
            byte[] modint = { lowbyte, highbyte, 0x00, 0x00 };
            count = BitConverter.ToInt32(modint, 0);
        }
        else
        {
            count = bt;
        }

    while (binr.ReadByte() == 0x00)
    {
        count -= 1;
    }
    binr.BaseStream.Seek(-1, SeekOrigin.Current);
    return count;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:08:29.263

所有主要的 .NET/C# 加密库（如 BouncyCastle 或 SecureBlackbox [商业]）都应支持这种格式，以及加载密钥的操作（加密/解密/签名/验证）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-31T13:15:10.570

虽然在较早的帖子中，当我在今年早些时候遇到同样的挑战时，我还是会用我自己的答案来回答这个问题。我编写了一个用于处理 PEM 密钥、加密、解密、签名和签名验证的库。它附带了一个完整的示例解决方案（Load-Encrypt-Decrypt-Save），因此您应该能够立即开始运行。

[https://github.com/jrnker/CSharp-easy-RSA-PEM](https://github.com/jrnker/CSharp-easy-RSA-PEM)

干杯，克里斯托弗

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T12:01:58.827

下面我写的关于数字签名的文章在 c# 中给出了一个解决方案（不需要额外的库）。该代码显示了如何将 PEM 格式的 RSA 私钥转换为 .NET RSACryptoServiceProvider 类使用的 XML 格式。

使用 Atlando 加密货币地理服务，您的身份将在注册后存储在您的浏览器中。在每次请求时，与我们签订的合同都会通过此身份使用您的私钥进行签名和加密。这篇文章解释了它是如何工作的。

下面的代码通过比较原始版本和签名版本在 C#（RSACryptoServiceProvider 类）中提供了身份验证过程的实现。模数来自 PEM 格式的 RSA 公钥（指数 AQAB）。

```
 private static bool Verify(string original, string signature, string modulus)
  {
    SHA256Managed sha = new SHA256Managed();

    byte[] bytes = Encoding.UTF8.GetBytes(original);
    byte[] hash = sha.ComputeHash(bytes);

    sha.Clear();

    byte[] signed = new byte[signature.Length/2];

    for (int i = 0; i < signature.Length; i += 2)
    {
      signed[i/2] = Convert.ToByte(Convert.ToInt32(signature.Substring(i, 2), 16));
    }

    string key = "<RSAKeyValue><Modulus>" + modulus + "</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>";

    using (RSACryptoServiceProvider rsa = new RSACryptoServiceProvider())
    {
      rsa.FromXmlString(key);

      RSAPKCS1SignatureDeformatter RSADeformatter = new RSAPKCS1SignatureDeformatter(rsa);

      RSADeformatter.SetHashAlgorithm("SHA256");

      return RSADeformatter.VerifySignature(hash, signed);
    }
  }

  public static string Modulus(string pem)
  {
    byte[] x509der = Convert.FromBase64String(pem.Replace("-----BEGIN PUBLIC KEY-----", "").Replace("-----END PUBLIC KEY-----", ""));

    byte[] seqOID = { 0x2A, 0x86, 0x48, 0x86, 0xF7, 0x0D, 0x01, 0x01, 0x01 };

    MemoryStream ms = new MemoryStream(x509der);
    BinaryReader reader = new BinaryReader(ms);

    if (reader.ReadByte() == 0x30) ReadASNLength(reader); //skip the size
    else return null;

    int identifierSize = 0; //total length of Object Identifier section

    if (reader.ReadByte() == 0x30) identifierSize = ReadASNLength(reader);
    else return null;

    if (reader.ReadByte() == 0x06) //is the next element an object identifier?
    {
      int oidLength = ReadASNLength(reader);
      byte[] oidBytes = new byte[oidLength];
      reader.Read(oidBytes, 0, oidBytes.Length);

      if (oidBytes.SequenceEqual(seqOID) == false) return null; //is the object identifier rsaEncryption PKCS#1?

      int remainingBytes = identifierSize - 2 - oidBytes.Length;
      reader.ReadBytes(remainingBytes);
    }

    if (reader.ReadByte() == 0x03) //is the next element a bit string?
    {
      ReadASNLength(reader); //skip the size
      reader.ReadByte(); //skip unused bits indicator
      if (reader.ReadByte() == 0x30)
      {
        ReadASNLength(reader); //skip the size
        if (reader.ReadByte() == 0x02) //is it an integer?
        {
          int modulusSize = ReadASNLength(reader);
          byte[] modulus = new byte[modulusSize];
          reader.Read(modulus, 0, modulus.Length);
          if (modulus[0] == 0x00) //strip off the first byte if it's 0
          {
            byte[] tempModulus = new byte[modulus.Length - 1];
            Array.Copy(modulus, 1, tempModulus, 0, modulus.Length - 1);
            modulus = tempModulus;
          }

          if (reader.ReadByte() == 0x02) //is it an integer?
          {
            int exponentSize = ReadASNLength(reader);
            byte[] exponent = new byte[exponentSize];
            reader.Read(exponent, 0, exponent.Length);

            RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
            RSAParameters RSAKeyInfo = new RSAParameters();
            RSAKeyInfo.Modulus = modulus;
            RSAKeyInfo.Exponent = exponent;
            rsa.ImportParameters(RSAKeyInfo);
            return rsa.ToXmlString(false).Replace("<RSAKeyValue><Modulus>", "").Replace("</Modulus><Exponent>AQAB</Exponent></RSAKeyValue>", "");
          }
        }
      }
    }

    return null;
  }

  public static int ReadASNLength(BinaryReader reader)
  {//Note: this method only reads lengths up to 4 bytes long as this is satisfactory for the majority of situations.
    int length = reader.ReadByte();
    if ((length & 0x00000080) == 0x00000080) //is the length greater than 1 byte
    {
      int count = length & 0x0000000f;
      byte[] lengthBytes = new byte[4];
      reader.Read(lengthBytes, 4 - count, count);
      Array.Reverse(lengthBytes); //
      length = BitConverter.ToInt32(lengthBytes, 0);
    }
    return length;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-22T04:02:16.813

[首先，您需要使用Bouncy Castle](https://www.nuget.org/packages/BouncyCastle/)库将私钥转换为 RSA 参数的形式。然后您需要将 RSA 参数作为私钥传递给 RSA 算法。最后，您使用[JWT](https://github.com/jwt-dotnet/jwt)库对令牌进行编码和签名。

```
 public string GenerateJWTToken(string rsaPrivateKey)
    {
        var rsaParams = GetRsaParameters(rsaPrivateKey);
        var encoder = GetRS256JWTEncoder(rsaParams);

        // create the payload according to your need
        var payload = new Dictionary<string, object>
        {
            { "iss", ""},
            { "sub", "" },
            // and other key-values 
        };

        var token = encoder.Encode(payload, new byte[0]);

        return token;
    }

    private static IJwtEncoder GetRS256JWTEncoder(RSAParameters rsaParams)
    {
        var csp = new RSACryptoServiceProvider();
        csp.ImportParameters(rsaParams);

        var algorithm = new RS256Algorithm(csp, csp);
        var serializer = new JsonNetSerializer();
        var urlEncoder = new JwtBase64UrlEncoder();
        var encoder = new JwtEncoder(algorithm, serializer, urlEncoder);

        return encoder;
    }

    private static RSAParameters GetRsaParameters(string rsaPrivateKey)
    {
        var byteArray = Encoding.ASCII.GetBytes(rsaPrivateKey);
        using (var ms = new MemoryStream(byteArray))
        {
            using (var sr = new StreamReader(ms))
            {
                // use Bouncy Castle to convert the private key to RSA parameters
                var pemReader = new PemReader(sr);
                var keyPair = pemReader.ReadObject() as AsymmetricCipherKeyPair;
                return DotNetUtilities.ToRSAParameters(keyPair.Private as RsaPrivateCrtKeyParameters);
            }
        }
    } 
```

ps：RSA 私钥的格式如下：

-----开始 RSA 私钥-----

{base64 格式值}

-----结束 RSA 私钥-----

# jquery - 如何跳转到 Bootstrap 的 Carousel 中的特定项目？

> ID：14644929
> 
> 赞同：16
> 
> 时间：2013-02-01T11:05:49.190
> 
> 标签：jquery, twitter-bootstrap, carousel

使用 Bootstrap 的 Carousel，我希望能够单击链接并跳转到轮播中的特定幻灯片。我怎么做？我必须添加什么jquery？

这是我的 html（它不起作用，但让您了解我想要做什么）：

```
<a href="#panel">Panel</a>

<div id="myCarousel" class="carousel slide">
 <div class="carousel-inner">
  <div id="panel" class="item">
...
  </div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T11:09:31.097

如果您的链接与面板的顺序相同，您可以执行以下操作：

```
$('.link').on('click', function() {
    $('#carousel').carousel($(this).index());
}); 
```

如果您只有一个链接，只需对其进行硬编码：

```
var i = 2; //index of the panel    
$('#link').on('click', function() {
    $('#carousel').carousel(i);
}); 
```

来自文档：

```
Methods:

carousel(options)

Initializes the carousel with an optional options object and starts cycling through items.

$('.carousel').carousel({
  interval: 2000
})
.carousel('cycle')

Cycles through the carousel items from left to right.

.carousel('pause')

Stops the carousel from cycling through items.

.carousel(number)

Cycles the carousel to a particular frame (0 based, similar to an array).

.carousel('prev')

Cycles to the previous item.

.carousel('next')

Cycles to the next item. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-09T16:20:33.227

对我来说，指定的脚本方法不起作用，但是基于另一个示例，我能够使用数据标签使其工作

```
<a data-target="#myCarousel" data-slide-to="0" href="#">First</a> 
```

请注意，`data-slide-to`索引基于 0，并且在 Bootstrap 4 上进行了测试

# ruby-on-rails-3 - 为所有 rspec 控制器测试调用 FactoryGirl.create？

> ID：14644936
> 
> 赞同：2
> 
> 时间：2013-02-01T11:06:10.123
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

有什么方法可以为所有控制器测试加载一些工厂吗？我有一些对于所有控制器测试（菜单项）都是必需的，我不喜欢将它们都单独放在控制器中。不是很干:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:09:35.320

也许你可以看看 rspec 的共享上下文，在这里突出显示：[https ://www.relishapp.com/rspec/rspec-core/v/2-11/docs/example-groups/shared-context](https://www.relishapp.com/rspec/rspec-core/v/2-11/docs/example-groups/shared-context)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T14:25:04.180

创建一个[RSpec 宏](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/helper-methods/define-helper-methods-in-a-module!)。

`user`用作您要使用的工厂，这是您要放入的示例`spec/support/controller_macros.rb`：

```
module ControllerMacros
  let!(:user) { FactoryGirl.create :user }
end 
```

在您`spec/spec_helper.rb`包含控制器的宏中：

```
RSpec.configure do |config|
  config.extend ControllerMacros, :type => :controller
end 
```

`let!`就像`let`在`before`块中引用它一样。

这`ControllerMacros`也是添加`sign_in`方法等内容的便捷位置。

您也可以将[共享示例](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/example-groups/shared-examples!)放入其中`spec/support`。

# iphone - 使用 App ID 在 Facebook 上分享图片

> ID：14644937
> 
> 赞同：0
> 
> 时间：2013-02-01T11:06:10.397
> 
> 标签：iphone, facebook, ios6, acaccount, slrequest

我想使用我的 AppID 在 facebook 上分享我的图像。所以我可以在 facebook 上看到它`via App`。它工作正常，直到 iOS 5。但不是在 iOS 6。

如果我使用的是`SLComposeViewController`，那么我可以共享图像，但显示的是“通过 iOS”而不是“通过应用程序”。所以我已经查看了它的代码并应用了它，但它没有共享图像。请检查代码是否有任何问题并进行更正。

```
facebookaccount = [[ACAccountStore alloc] init];
ACAccountType *facebookaccountType = [facebookaccount accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierFacebook];

// Specify App ID and permissions
NSDictionary *options = @{ ACFacebookAppIdKey: @"xxxxxxxxxxxxx", ACFacebookPermissionsKey: @[@"publish_stream"], ACFacebookAudienceKey: ACFacebookAudienceFriends };
[facebookaccount requestAccessToAccountsWithType:facebookaccountType options:options completion:^(BOOL granted, NSError *error) {
    if (granted) {
        NSArray *accountsArray = [facebookaccount accountsWithAccountType:facebookaccountType];
        facebookAccount = [[accountsArray lastObject] retain];
        NSLog(@" Account :::: %@", facebookAccount);
    } else {
        NSLog(@" Error :::: %@", error.description);
    }}];
NSDictionary *parameters = @{@"message" : @""};
NSString *link = [NSString stringWithFormat:@"%simages/%@",ServerPath,[images objectAtIndex:imageNO]];
NSURL *url = [NSURL URLWithString:link];
NSData *data = [NSData dataWithContentsOfURL:url];

CGFloat compression = 1.0f;
CGFloat maxCompression = 0.0f;
int maxFileSize = 150*224;
UIImage *img1  = [[UIImage alloc] initWithData:data];
NSData *imageData = UIImageJPEGRepresentation(img1, compression);

while ([imageData length] > maxFileSize && compression > maxCompression){
    compression -= 0.1;
    imageData = UIImageJPEGRepresentation(img1, compression);
}

UIImage *img  = [[UIImage alloc] initWithData:imageData];
NSLog(@"Image ::: %@", img);
NSData *myImageData = UIImagePNGRepresentation(img);
NSLog(@" Image Data ::: %@", myImageData);
NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];
SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:requestURL parameters:parameters];

[facebookRequest addMultipartData:myImageData withName:@"source" type:@"multipart/form-data" filename:nil];
NSLog(@"Request Account :::: %@", facebookAccount);
facebookRequest.account = facebookAccount;
[facebookRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    NSLog(@"Done with Facebook.......");
    if (!error) {
        NSDictionary *list = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        NSLog(@" Dictionary ::: %@", list);
    } else {
        NSLog(@" Error :::: %@", error.description);
    }}]; 
```

我在字典日志中得到空值。

可能是什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T07:25:54.913

使用下面的代码而不是 SLComposeViewController 使用 SLRequest

```
NSDictionary *parameters = @{@"message": sendmessage};

SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodPOST
                                                  URL:[NSURL    URLWithString:@"https://graph.facebook.com/me/photos"]
                                                       parameters:parameters];

[facebookRequest addMultipartData: myImageData
                                 withName:@"source"
                                     type:@"multipart/form-data"
                                 filename:@"TestImage"];

facebookRequest.account = facebookAccount;

[facebookRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
{
 // Log the result
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:38:48.450

我希望这也能帮助你

```
-(void)facebookPost:(NSString *)text{
     ACAccountStore *facebookaccount1 = [[ACAccountStore alloc] init];
     ACAccountType *facebookaccountType = [facebookaccount1 accountTypeWithAccountTypeIdentifier: ACAccountTypeIdentifierFacebook];
    // Specify App ID and permissions
    NSDictionary *options = @{ ACFacebookAppIdKey: @"xxxxxxxxxxxxxxx", ACFacebookPermissionsKey: @[@"publish_stream"], ACFacebookAudienceKey: ACFacebookAudienceFriends };
    [facebookaccount1 requestAccessToAccountsWithType:facebookaccountType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {
        NSArray *accountsArray = [facebookaccount1 accountsWithAccountType:facebookaccountType];
        if ([accountsArray count] > 0)
        {
            NSDictionary *parameters = @{@"message": text};

            SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                            requestMethod:SLRequestMethodPOST
                                                                      URL:[NSURL URLWithString:@"https://graph.facebook.com/me/photos"]
                                                               parameters:parameters];

            NSString *link = [NSString stringWithFormat:@"%simages/%@",ServerPath,[images objectAtIndex:imageNO]];  // image link
            NSURL *url = [NSURL URLWithString:link];
            NSData *data = [NSData dataWithContentsOfURL:url];

            // code for compress image you can delete this code if you dont want to compress image 
            CGFloat compression = 1.0f;
            CGFloat maxCompression = 0.0f;
            int maxFileSize = 150*224;
            UIImage *img1  = [[UIImage alloc] initWithData:data];
            NSData *imageData = UIImageJPEGRepresentation(img1, compression);

            while ([imageData length] > maxFileSize && compression > maxCompression)
            {
                compression -= 0.1;
                imageData = UIImageJPEGRepresentation(img1, compression);
            }

            // imageData is your image
            [facebookRequest addMultipartData: imageData
                                     withName:@"source"
                                         type:@"multipart/form-data"
                                     filename:@"TestImage"];
            ACAccount *facebookAccount1 = [accountsArray objectAtIndex:0];
            [facebookRequest setAccount:facebookAccount1];

            [facebookRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
             {
                 // Log the result
             }];
        }
    }
}];

} 
```

# php - Wordpress 不断向永久链接添加 -2

> ID：14644939
> 
> 赞同：0
> 
> 时间：2013-02-01T11:06:13.617
> 
> 标签：php, xml, wordpress, custom-post-type

我目前正在为房地产经纪人构建一个对象列表，我们将所有对象本地缓存在一个名为“objekt”的自定义帖子类型中，并且它具有永久链接重写“objekt”。

我们在服务器的根目录中有一个名为的文件，`wp-fetch-items.php`房地产经纪人应用程序会在系统中出现新对象时对其进行 ping 操作。这会导致“objekt”类型的所有帖子被删除，然后它会通过一个 XML 文件并将所有对象再次添加到系统中。

一切工作正常，但帖子在 URL 中不断得到 -2，即使这是第一次创建帖子，并且没有任何名称甚至远程相似。

例如，我使用`wp_insert_post`名称插入的对象`152912`获取`152912-2`.

我使用以下代码创建对象：

```
$insertedPost = wp_insert_post(array(
    'post_author' => 1,
    'post_type' => 'objekt',
    'ping_status' => 'closed',
    'post_status' => 'publish',
    'post_name' => $objectData['title'],
    'post_title' => $objectData['title']
), false); 
```

在创建它们之前，我遍历每个类型为“objekt”的帖子并使用以下代码删除它们：

```
wp_delete_post(get_the_ID(), true); 
```

我特别添加了 true 作为第二个参数，以从数据库中永久删除对象，并且我所做的所有搜索都证明它没有任何剩余。

我还尝试使用此代码在删除后刷新永久链接，但它无助于解决这种情况：

```
global $wp_rewrite;
$wp_rewrite->flush_rules(); 
```

你有没有遇到过这个问题，你知道如何解决吗？如果您知道可能导致此问题的原因，请回复！

在此先感谢，乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:15:56.997

Wordpress 对数字帖子名称有特殊处理。这是故意的，因为它假定 URL 中的数字 ID 是帖子的实际 ID。添加`-2`确保它被解释为字符串，例如帖子的名称。`http://yoursite/?p=152912`否则，如果此帖子 ID 不存在，它将尝试显示并导致 404。

到目前为止我发现的唯一解决方案：避免使用数字名称。

（我写帖子是因为内部一切都是帖子，甚至是页面和图像）

**编辑：**

我找到了[引入这种行为的票](http://core.trac.wordpress.org/ticket/11917)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:12:14.513

检查您是否还没有包含该固定链接的帖子。如果该帖子中已存在永久链接，WordPress 将附加`-2`到该永久链接。也检查你的垃圾。

# xcode - 在 Xcode 中：从 System/Library/PrivateFrameworks 添加框架需要哪些操作？

> ID：14644940
> 
> 赞同：0
> 
> 时间：2013-02-01T11:06:16.347
> 
> 标签：xcode, xcode4, frameworks, xcode4.5

我需要将`.framework`发现的内容`/System/Library/PrivateFrameworks/`导入我的 iOS 应用程序。我该如何做到这一点？我有最新的 Xcode 4.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:41:23.613

在 XCode 4.6 中，

在左侧窗格中选择 Project（在 Project Navigator 中）并选择 TARGETS 并单击“Build Phases”选项卡。将其添加到“将二进制文件与库链接”下。

如果 XCode 找不到框架的路径，那么...单击“构建设置”选项卡（靠近“构建阶段”）并在“搜索路径”下将框架路径设置为“框架搜索路径”。

# php - 从 cron 发送 Google Analytics 事件

> ID：14644941
> 
> 赞同：0
> 
> 时间：2013-02-01T11:06:19.127
> 
> 标签：php, cron, google-analytics

我有一个向 Google 发送事件的 php 脚本，它是 google 提供的一个通用代码块，但它确实有一些我添加到其中的 php echo 语句。

当我在浏览器中运行页面时它工作正常，但当我从 cron 运行它时它不起作用：

```
/usr/bin/lynx -dump (path to script) 
```

该脚本从 cron 运行（我已记录到一个文件），但在从 cron 运行它的情况下，该事件不会出现在分析中。

跟回声有关系吗？

# scala - SBT 抱怨弃用

> ID：14644942
> 
> 赞同：5
> 
> 时间：2013-02-01T11:06:20.210
> 
> 标签：scala, sbt

我制作了一个 sbt 项目框架，我用它作为我开发的程序的起点。

有一段时间，当我用这个骨架开始一个新项目时，我收到了 2 个弃用警告。骨架不包含任何源文件，即使是这样，我的 build.sbt 也包含 scalac 选项“-deprecation”，在项目源代码中编写不推荐使用的代码时可以正常工作。

警告本身如下所示：

> [信息] 将 1 个 Scala 源编译到 /xxx/.../xxx/.sbt/staging/xxx/target/scala-2.9.2/sbt-0.12/classes...
> [警告] 有 1 个弃用警告；使用 -deprecation 重新运行以获取详细信息
> [警告] 发现一个警告
> [信息] 将 1 个 Scala 源编译到 /xxx/.../xxx/project/target/scala-2.9.2/sbt-0.12/classes...
> [ warn] 有 1 个弃用警告；使用 -deprecation 重新运行以获取详细信息
> [警告] 发现一个警告

虽然第一个警告的原因似乎是已弃用的 .sbt-folder 问题（所以，这个警告本身在我的框架内似乎不是一个大问题）我对第二个警告有点困惑，我想询问是否有人知道如何使用“-deprecation”选项启动 sbt 本身。

只是为了澄清和强调这**不是**korefn 建议的重复：

> scalacOptions ++= Seq( "-unchecked", "-deprecation" )

已经在里面了，只有当第一次在骨架上应用 sbt 时才会出现警告。之后 sbt 保持沉默。

也没有错误，此选项适用于我存储在骨架中的任何源文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T12:32:24.687

好的，我通过 sbt-group 收到了 2 个可能的解决方案，我想分享这些解决方案，因为其他人可能会对此感兴趣。

解决方案 1：通过 sbt 控制台...

*   重新加载插件
*   设置 scalacOptions ++= Seq( "-unchecked", "-deprecation" )
*   会话保存
*   重新加载返回

解决方案 2：在项目目录下的 .sbt 文件中再次放置行“scalacOptions ++= Seq(“-unchecked”，“-deprecation”)”。默认为 project/plugins.sbt

备注： build.sbt 中的 "scalacOptions ++= Seq( "-unchecked", "-deprecation" )" 会捕获项目源的警告，但不会捕获我原来的问题中提到的 sbt 插件等的警告。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T11:30:30.770

这是重复的。检查解决方案[scala-sbt-how-to-re-run-with-deprecation](https://stackoverflow.com/questions/9578521/scala-sbt-how-to-re-run-with-deprecation) 或[how-to-see-all-the-warnings-in-sbt-0-11](https://stackoverflow.com/questions/9415962/how-to-see-all-the-warnings-in-sbt-0-11)

基本上添加到 build.sbt：

```
scalacOptions ++= Seq("-unchecked", "-deprecation","-feature") //any other option
//you like 
```

# java - 在 java hibernate 中搜索列表包含列表中任何值的实体

> ID：14644944
> 
> 赞同：5
> 
> 时间：2013-02-01T11:06:30.170
> 
> 标签：java, hibernate, entity

让我们想象一下，我有一些带有 java.List 标签的 Product 实体，如下所示：

```
@Entity
public class Product impements Serializable{
   ...
   private List<String> tags;
} 
```

我有一个用户，他想搜索被任何标签（例如）标记的产品：汽车、摩托车、飞机。

所以当涉及到搜索时，我的实体中有标签列表和搜索标签列表，我需要的只是在我的产品标签列表中至少有一个。我不知道如何编写这样的查询。谢谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:35:17.993

在 beny23 发布他的解决方案之前，我通过添加来修复它

```
SELECT p FROM Product p, IN (p.tags) t where t in (:searchList) 
```

但他的回答也是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T12:19:45.167

您可以使用以下 HQL 查询来执行此操作：

```
session.createQuery("from Product p join p.tags t where t = :tag")
       .setString("tag", tagToSearchFor) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:03:57.570

尝试这样的事情：

```
@Entity
public class Product implements Serializable{
   ...
   private List<String> tags;

   public boolean contains(List<String> inputTags) {
        for (String tag : inputTags) {
            if(tags.contains(tag)){
                return true;                
            }
        }
        return false;
    }
} 
```

或者你可以做 2 个 foreach，然后使用

```
if(inputTag.equals(productTag)) return true; 
```

# c++ - CComboBox::GetLBText 返回垃圾

> ID：14644947
> 
> 赞同：3
> 
> 时间：2013-02-01T11:06:36.820
> 
> 标签：c++, mfc

我正在填写一个组合框：

```
 while((pHPSet = pHPTable->GetNext()) != NULL)
    {       
      CString str = pHPSet->GetName();
          // I am normally using str but to proove that this is 
          // not the problem I am using "a"
      m_comboBaseHP.AddString(_T("a"));
    } 
```

现在我正在尝试阅读组合框：

```
if(m_comboBaseHP.GetCount() > 0)
{
    CString csHPName = _T("");
    m_comboBaseHP.GetLBText(0, csHPName);
    // This is the ms way but ReleaseBuffer causes a crash
    //CString str = _T("");
    //int n = m_comboBaseHP.GetLBTextLen( 0 );
    //m_comboBaseHP.GetLBText( 0, str.GetBuffer(n) );
    //str.ReleaseBuffer();

    // Do whatever with csHPName
} 
```

问题是 csHPName 在调试器中显示了一些中文标志。我假设这是内存垃圾。这发生在相同的方法中。这发生在抽奖前。后画同样的问题。这发生在调试和发布中。我不明白这是怎么发生的，因为我实际上并没有使用指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:33:08.917

显然有必要将组合框的属性 Has Strings 设置为 True。

# spring-data-jpa - spring data jpa not working and class not found 错误

> ID：14644948
> 
> 赞同：2
> 
> 时间：2013-02-01T11:06:38.300
> 
> 标签：spring-data-jpa

我已经用我的 spring 应用程序配置了 spring data jpa

我正在使用 Spring 3.2 和 spring data jpa 1.1.0

xml配置

回购类

```
public class TestRepo extends JpaRepository <Test, Long>{} 
```

找不到 JpaRepository 所需的错误子类 PagingAndSortingRepository

我在 spring data jpa jar 中没有看到任何这样的类。我错过了任何罐子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:08:24.070

您是否包含了 spring-data-commons 库

# php - 在模型视图或控制器中将代码放在哪里来管理 cakephp 中的用户权限和 url 操作保护？

> ID：14644951
> 
> 赞同：1
> 
> 时间：2013-02-01T11:06:55.617
> 
> 标签：php, cakephp, security

抱歉，如果以前有人问过这个问题，我已经进行了搜索，但没有找到任何具体的内容。这很有帮助[http://bakery.cakephp.org/articles/Auzigog/2008/12/29/where-should-my-code-go](http://bakery.cakephp.org/articles/Auzigog/2008/12/29/where-should-my-code-go)

我正在尝试修复我继承的一些代码，我发现您可以更改任何人的密码，只需更改 URL：

/site/user/changepassword/（插入 id）

然后我放置在用户控制器中，请原谅我的伪代码：

```
if(session.user_id == id_from_link)
   view changepasswordform(id_from_link)
else
   warn_and_redirect(); 
```

我认为这是在正确的地方做正确的事吗？

现在在视图中我找到这样的代码：

```
if(user_type is admin)
 echo admin options
if(user_type is user)
 echo user options 
```

现在理想情况下不应该是 View 只是具有：

```
echo options 
```

然后控制器有：

```
switch(user_type)
  case: admin
     options = admin stuff
  case: user
     options = user stuff 
```

等等？还是应该在用户模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:08:43.750

只需从 url 中删除 id 参数...并在控制器操作的顶部添加以下内容：

```
function changepassword(){
   $id = $this->Auth->user('id');
   ....
} 
```

现在密码只会在当前登录的用户上更改。请务必进行常规检查以确保 $id 不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:47:06.763

视图应该有效地打印语句：

```
<title><?=$this->data['title']?></title>
...
<h1><?=$this->data['main_menu']?></h1> 
```

控制器应该准备视图/处理请求：

```
if(loggedInUser) {
    $this->data['title'] = model->getTitle(userID);
    $this->redirect(/somepage);
}
else {
    $this->redirect(/loginpage);
} 
```

模型应该有：

```
function getTitle($userID) {
   this->doStuff($userID);
   $title = this->talkToDB($userID);
   return $title;
} 
```

# android - Android 4+ 浏览器上固定标题上方的间隙

> ID：14644957
> 
> 赞同：5
> 
> 时间：2013-02-01T11:07:19.477
> 
> 标签：android, css, browser

任何想法如何消除滚动过程中出现的间隙（在屏幕上）？标头已固定位置，并且间隙仅出现在 Androd 上（在 Android 4.0.4 上测试）。

![差距](../Images/264023d0c32282ba750b36a9b191c2a2.png)

负责头部的部分代码：

**HTML：**

> ```
> <div data-role="page" id="settings">
>     <div class="holo-action-bar">
>         <h1><span>Settings</span></h1>
>     </div>
>     <div class="content content-inner"></div>
> </div> 
> ```

**CSS：**

> ```
> .holo-action-bar {
>   background-color: #333;
>   color: #fff;
>   display: block;
>   position: fixed;
>   top: 0; right: 0; left: 0;
>   width: 100%;
>   z-index: 1000;
> } 
> ```

您还可以在[jquery mobile docs中查看示例](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)

**更新：**

在 iOS 上不会出现该问题（在 iOS 5+ 上测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T05:49:39.157

我找到了解决方案：

这是 phonegap 上的 CSS 问题。

```
body {
   << height : 100%; don't use it >>
   width: 100%;
   margin:0;
   padding:0;
   top: -1px;
} 
```

硬件加速：真

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T00:08:53.460

我遇到了同样的问题，当我在我的 activity.java 中添加这一行时意外地解决了它：

```
mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

并`android:hardwareAccelerated="true"`在`<application>`标签下的清单中。这试图禁用软件渲染器以支持硬件渲染器，并且它在我的 4.0.1 设备上运行。

如果您使用带有固定页眉和页脚的 webview，您可能还需要添加以下内容，以便页眉/页脚上的闪烁动画消失：

```
mWebView.setOverScrollMode(View.OVER_SCROLL_NEVER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:35:34.723

但删除你的 data-position="fixed"

上课

```
<div id="header"><h1>Fixed header!</h1></div> 
```

CSS：

```
#header{
 position:fixed;
 top:0;
} 
```

**编辑***

您是否尝试过检查内部对象的边距？如果它的 ap 标签或 h1 左右它们有标准边距

如果我查看您提供的链接，顺便说一句，我不喜欢 jquery mobile，因为它带来的问题多于它对 tbh 的帮助。但无论如何，它似乎有一个 1px 左右的边框，您有指向您网站的链接吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T07:29:05.913

当使用带有 Cordova 3.0.0 的 Intel App Framework 2 时，我在 Android 4 pad 的固定标题上方有 1px 的间隙。目标 Android 版本设置为 4.3。

当我在之前的项目中将目标 Android 版本设置为 2.3.3 时，问题不存在。

最后我发现当我在 AndroidManifest.xml 中设置 hardwareAccelerated="false" （在两个地方）时，1 px 的差距消失了。

# java - Java从结果集中删除重复值

> ID：14644958
> 
> 赞同：-4
> 
> 时间：2013-02-01T11:07:22.207
> 
> 标签：java

我需要根据某些唯一标识符从结果集中删除重复值。

我需要从结果集中删除重复项。

```
 while(resultSet.next())
  {     
   int seqNo = resultSet.getInt("SEQUENCE_NO");

   String tableName = resultSet.getString("TABLE_NAME");

   String columnName = resultSet.getString("COLUMN_NAME");

  String filter = resultSet.getString("FILTER");

 } 
```

从上面的迭代中，我从结果集中得到 2 行。有相同的序列号，相同的表名，不同的列名，相同的过滤器。

```
1 PRODUCTFEES CHARGETYPE PRODUCTID

1 PRODUCTFEES PRODUCTCODE PRODUCTID 
```

我的要求是删除重复的表名、重复的序列号、重复的过滤器。

我想在下面输出一些东西，

```
1 PRODUCTFEES CHARGETYPE PRODUCTCODE PRODUCTID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:11:09.127

通过您提供的示例，您似乎想要单独输出每列的所有不同值（表中有 4 列，但您输出 5 个值）。

作为标记的问题`java`，您可以采取的一种方法是`Set`对每一列使用实现，这样重复就不会通过。然后输出每个 的所有元素`Set`。

```
LinkedHashSet[] sets = new LinkedHashSet[]{
    new LinkedHashSet(), 
    new LinkedHashSet(),
    new LinkedHashSet(),
    new LinkedHashSet() };

while(resultSet.next()) {     
    sets[0].add(resultSet.getInt("SEQUENCE_NO"));
    sets[1].add(resultSet.getString("TABLE_NAME")););
    sets[2].add(resultSet.getString("COLUMN_NAME"));
    sets[3].add(resultSet.getString("FILTER"));
}

StringBuilder buf = new StringBuilder();
for (LinkedHashSet set : sets) {
    // append to buf all elements of each set
} 
```

但是从同一个 SQL 查询中解决这个问题可能更简单，只需`SELECT DISTINCT columnX`为每一列生成并输出结果而无需进一步操作。或者使用将连接所有不同值的聚合函数。实现将高度依赖于您使用的 DBMS（[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)对于 MySQL，[`LISTAGG`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)对于 Oracle，...）。对于 Oracle，这将是一个类似的问题：[How to use Oracle's LISTAGG function with a unique filter？](https://stackoverflow.com/q/7355095/851811)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:17:24.470

根据我要说的不同输出，您不仅需要删除重复项，还需要对重复项中的数据进行重新排序。

在这种情况下，您需要在 中填充一个新的数据数组（或类似结构）`while(resultSet.next())`，然后在新排列的数据对象上循环并相应地输出。

在 Meta-Lang 中，这将如下所示：

```
while resultset.next()
    if newdata-array has unique key
        add column-name to found entry in newdata-array
    else
        create new entry in newdata-array with column-name

while newdata-array.next()
    output seq, table-name
    while entry.column-names.next()
        output column-name
    output product-id 
```

# python - flask send_file 和 unicode 文件名：在 IE 中损坏

> ID：14644959
> 
> 赞同：2
> 
> 时间：2013-02-01T11:07:24.483
> 
> 标签：python, internet-explorer, unicode, flask

我编写了一个函数，可以动态生成一些 csv 文件并发送给用户进行下载。

代码如下：

```
@app.route('/survey/<survey_id>/report')
def survey_downloadreport(survey_id):  
    survey, bsonobj = survey_get(survey_id)
    resps = response_get_multi(survey_id)

    fields = ["_id", "sid", "date", "user_ip"]
    fields.extend(survey.formfields)    

    csvf = StringIO.StringIO()
    wr = csv.DictWriter(csvf, fields, encoding = 'cp949')
    wr.writerow(dict(zip(fields, fields)))
    for resp in resps :
        wr.writerow(resp)

    csvf.seek(0)

    now = datetime.datetime.now()
    report_name = survey.name + "(" + \
                  now.strftime("%Y-%m-%d-%H:%M:%S") +\
                  ")" + ".csv"

    report_name = report_name.encode("utf-8")

    return send_file(csvf,
                 as_attachment = True,
                 attachment_filename = report_name) 
```

如您所见，文件名从 unicode 转换为字符串和 utf-8（准确地说，它们是韩文字母。）

问题是，在 IE 中查看页面时文件名完全中断（在 chrome 中没有问题）。

似乎必须编辑标题以匹配不同浏览器的解析规则，但我不知道如何在烧瓶中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:54:48.250

尝试添加

```
mimetype = 'text/csv; charset=x-EBCDIC-KoreanAndKoreanExtended' 
```

发送文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T10:35:14.897

`Content-Disposition: attachment; filename="..."`用于设置下载文件的名称——这是 Flask 所做的——`send_file`对于非 ASCII 字符是不可靠的。

`werkzeug.http`在Flask 使用的库中以及在您想要定位的所有浏览器中支持 RFC 5987 之前，这是无法修复的。

同时，更可靠的跨浏览器方法是在链接到 URI 时将 UTF-8-URL 编码的文件名放在 URI 的尾部，即：

```
IRI path: /survey/1/report/안녕.csv
URI path: /survey/1/report/%ec%95%88%eb%85%95.csv 
```

请参阅[如何为 HTTP 标头编码 UTF8 文件名？（Python，Django）](https://stackoverflow.com/q/1361604/18936)作为背景。

# gcc - 执行卡在 printf -- 程序集

> ID：14644965
> 
> 赞同：1
> 
> 时间：2013-02-01T11:07:52.853
> 
> 标签：gcc, assembly, gdb, x86-64

我正在修改一些汇编代码来执行 printf。第一次调用 printf 时，它工作得很好。但是第二次，它对 printf 的调用变得很糟糕。我正在使用 gdb 进行调试。

原始部分代码是

```
 movq    192(%rsp), %rax         # 8-byte Reload
    movq    (%rax), %rcx
    movq    200(%rsp), %rdx         # 8-byte Reload
    movq    (%rdx), %rsi
    movq    %rcx, %rdi
    movq    24(%rsp), %r8           # 8-byte Reload
    addq    %r8, %rdi
    movq    $0, (%rsi)
    movq    216(%rsp), %r9          # 8-byte Reload
    movq    (%r9), %r10
    movq    208(%rsp), %r11         # 8-byte Reload
    movq    (%r11,%rdi,8), %rbx 
```

修改后的代码是

```
 movq    192(%rsp), %rax         # 8-byte Reload
    movq    (%rax), %rcx
    movq    200(%rsp), %rdx         # 8-byte Reload
    movq    (%rdx), %rsi
    movq    %rcx, %rdi
    movq    24(%rsp), %r8           # 8-byte Reload
    addq    %r8, %rdi
    pushq   %rax
    pushq   %rsi
    pushq   %rdi
    movq    %rsi, %rax
    movl    $.LCdddd, %edi
    movl    $0, %eax
    call    printf
    popq    %rdi
    popq    %rsi
    popq    %rax
    movq    $0, (%rsi)
    movq    216(%rsp), %r9          # 8-byte Reload
    movq    (%r9), %r10
    movq    208(%rsp), %r11         # 8-byte Reload
    movq    (%r11,%rdi,8), %rbx 
```

当我`Ctrl + C`在 gdb 中执行操作时卡住它显示它在

```
__lll_lock_wait_private () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:93 
```

任何帮助表示赞赏。

编辑：gdb 跟踪如下。在最后一行之后它只是等待

```
196     movq    %rsi, %rax
(gdb) 
197     movl    $.LCdddd, %edi
(gdb) 
198     movl    $0, %eax
(gdb) 
199     call    printf
(gdb) 
__printf (format=0x40969e "\nmeow %p\n") at printf.c:30
30  printf.c: No such file or directory.
(gdb) s
34  in printf.c
(gdb) s
30  in printf.c
(gdb) s
35  in printf.c
(gdb) s
34  in printf.c
(gdb) 
35  in printf.c
(gdb) 
_IO_vfprintf_internal (s=0x7ffff7ba8280 <_IO_2_1_stdout_>, format=0x40969e "\nmeow %p\n", ap=0x7fffffffdfc0) at vfprintf.c:246
246 vfprintf.c: No such file or directory.
(gdb) 
211 in vfprintf.c
(gdb) 
246 in vfprintf.c
(gdb) 
1298    in vfprintf.c
(gdb) 
1302    in vfprintf.c
(gdb) 
1313    in vfprintf.c
(gdb) 
1324    in vfprintf.c
(gdb) 
1335    in vfprintf.c
(gdb) 
__find_specmb (format=<optimized out>) at printf-parse.h:99
99  printf-parse.h: No such file or directory.
(gdb) 
_IO_vfprintf_internal (s=0x7ffff7ba8280 <_IO_2_1_stdout_>, format=0x40969e "\nmeow %p\n", ap=0x7fffffffdfc0) at vfprintf.c:1324
1324    vfprintf.c: No such file or directory.
(gdb) 
1335    in vfprintf.c
(gdb) 
__find_specmb (format=0x40969e "\nmeow %p\n") at printf-parse.h:99
99  printf-parse.h: No such file or directory.
(gdb) 
strchrnul () at ../sysdeps/x86_64/strchrnul.S:27
27  ../sysdeps/x86_64/strchrnul.S: No such file or directory.
(gdb) 
28  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
29  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
30  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
31  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
32  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
33  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
34  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
35  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
36  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
37  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
38  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
39  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
40  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
41  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
42  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
43  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
44  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
45  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
46  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
48  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
49  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
50  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
51  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
52  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
53  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
54  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
55  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
56  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
58  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
59  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
strchrnul () at ../sysdeps/x86_64/strchrnul.S:60
60  in ../sysdeps/x86_64/strchrnul.S
(gdb) 
_IO_vfprintf_internal (s=0x7ffff7ba8280 <_IO_2_1_stdout_>, format=0x40969e "\nmeow %p\n", ap=0x7fffffffdfc0) at vfprintf.c:1339
1339    vfprintf.c: No such file or directory.
(gdb) 
1335    in vfprintf.c
(gdb) 
__find_specmb (format=0x40969e "\nmeow %p\n") at printf-parse.h:99
99  printf-parse.h: No such file or directory.
(gdb) 
_IO_vfprintf_internal (s=0x7ffff7ba8280 <_IO_2_1_stdout_>, format=0x40969e "\nmeow %p\n", ap=0x7fffffffdfc0) at vfprintf.c:1339
1339    vfprintf.c: No such file or directory.
(gdb) 
_pthread_cleanup_push_defer (buffer=0x7fffffffde78, routine=0x7ffff784cf70 <__funlockfile>, arg=0x7ffff7ba8280 <_IO_2_1_stdout_>) at cleanup_defer_compat.c:31
31  cleanup_defer_compat.c: No such file or directory.
(gdb) 
32  in cleanup_defer_compat.c
(gdb) 
33  in cleanup_defer_compat.c
(gdb) 
35  in cleanup_defer_compat.c
(gdb) 
38  in cleanup_defer_compat.c
(gdb) 
55  in cleanup_defer_compat.c
(gdb) 
57  in cleanup_defer_compat.c
(gdb) 
58  in cleanup_defer_compat.c
(gdb) 
_IO_vfprintf_internal (s=0x7ffff7ba8280 <_IO_2_1_stdout_>, format=0x40969e "\nmeow %p\n", ap=0x7fffffffdfc0) at vfprintf.c:1340
1340    vfprintf.c: No such file or directory.
(gdb) 
0x00007ffff783d325 in _L_lock_927 () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) 
Single stepping until exit from function _L_lock_927,
which has no line number information.
__lll_lock_wait_private () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:77
77  ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: No such file or directory.
(gdb) 
79  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
83  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
84  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
85  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
87  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
88  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
93  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
94  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
96  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
97  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
(gdb) 
90  in ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:09:07.043

我认为您错过了堆栈保护。尝试 __printf_chk ，同时保存和恢复框架，例如：

```
pushq %rbp
movq  %rsp, %rbp
pushq   %rax
pushq   %rdx
pushq   %rsi
pushq   %rdi
xorl  %edx, %edx
movl  $.LCdddd, %esi
movl  $1, %edi
xorl  %eax, %eax
call  __printf_chk
popq   %rdi
popq   %rsi
popq   %rdx
popq   %rax
leave 
```

__printf_chk 是非标准的，但必须在 libc 中。Vararg 函数有时很棘手。使用选中的 printf，您至少会收到警告。

```
movl  $1, %edi 
```

是标志值（参见[类似规范的](http://refspecs.linux-foundation.org/LSB_4.0.0/LSB-Core-generic/LSB-Core-generic/libc---printf-chk-1.html)内容），因此您可以尝试传递 2 或更大。由于这是非标准功能，很难说您会在系统上看到什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:23:29.267

AFAIK，printf 有 CCALL 调用约定。因此，您可能必须在 printf 返回后手动从堆栈中删除推送的参数。

# android - 如何拆分此字符串？

> ID：14644971
> 
> 赞同：2
> 
> 时间：2013-02-01T11:08:14.710
> 
> 标签：android, string, split

我想拆分这个字符串

```
String info = "0.542008835 meters height from ground"; 
```

从此我只想得到这样的两位小数 `0.54`。

通过使用这个我得到了

```
String[] _new = rhs.split("(?<=\\G....)"); 
```

但是我在这里遇到问题，如果字符串不包含像这个字符串这样的小数

```
String info = "1 meters height from ground"; 
```

对于这个字符串，我在拆分字符串中得到最多前 ​​4 个字符，例如`1 me`. 如果有小数，我只想拆分数字，如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:11:15.537

```
if(info.contains("."))
{
       String[] _new = rhs.split("(?<=\\G....)");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T11:15:53.770

我认为您可以在第一个值之后通过空格进行检查。看到[这个](https://stackoverflow.com/questions/4067809/how-to-check-space-in-string/) 如果你得到空间然后只得到第一个字符。

要检查字符串是否包含空格，请使用 Matcher 并调用它的 find 方法。

```
Pattern pattern = Pattern.compile("\\s");
Matcher matcher = pattern.matcher(s);
boolean found = matcher.find(); 
```

如果你想检查它是否只包含空格，那么你可以使用 String.matches：

```
boolean isWhitespace = s.matches("^\\s*$"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T11:21:29.933

您可以使用正则表达式来替代 Deepzz 的方法，这将处理存在 '.' 的情况。在字符串的后面部分，我在下面包含了一个示例。您的问题尚不清楚您是否真的想要保留字符串的一部分，但您可以在 reg ex 中添加第二组来捕获它。

```
public static void main(String[] args) {
    final String test1 = "1.23 foo";
    final String test2 = "1 foo";
    final String test3 = "1.234 foo";
    final String test4 = "1.234 fo.o";
    final String test5 = "1 fo.o";
    getStartingDecimal(test1);
    getStartingDecimal(test2);
    getStartingDecimal(test3);
    getStartingDecimal(test4);
    getStartingDecimal(test5);

}

private static void getStartingDecimal(final String s) {
    System.out.print(s + " : ");
    Pattern pattern = Pattern.compile("^(\\d+\\.\\d\\d)");
    Matcher matcher = pattern.matcher(s);
    if(matcher.find()) {
        System.out.println(matcher.group(1));
    } else {
        System.out.println("Doesn't start with decimal");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T11:21:02.107

假设数字始终是字符串的第一部分：

```
String numStr = rhs.split(" ")[0];
Double num = Double.parseDouble(numStr); 
```

之后，您可以使用字符串[格式化](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)程序来获得所需的数字表示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T11:24:26.310

当您知道数字附近的字符串以及 int 和 double 数字时，这将起作用。

```
 String a ="0.542008835 meters height from ground";
    String b = a.replace(" meters height from ground", "");
    int c = (int) ((Double.parseDouble(b))*100);
    double d = ((double)c/100); 
```

# javascript - 如何减少在 html 上呈现数学的延迟？

> ID：14644978
> 
> 赞同：0
> 
> 时间：2013-02-01T11:08:25.583
> 
> 标签：javascript, html, mathjax

所以，我需要在一个 web 项目中实现 mathjax，对谁已经在使用它进行了一些研究，发现，

[https://math.stackexchange.com/](https://math.stackexchange.com/)使用 mathjax 渲染数学方程和公式。但是当它在浏览器上呈现时它很慢并且存在滞后。与现在发生的事情相比，如何才能消除或减少这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:24:04.460

MathJax 是一个非常好的渲染器，但并不总是最快的。另一个 JavaScript 数学渲染库是[jqmath](http://mathscribe.com/author/jqmath.html)，它明显比 MathJax 更小更快，但并不针对所有相同的间距细化和相同的乳胶数学输入覆盖范围。

最快的渲染当然只是在页面中使用 MathML 并且需要支持它的浏览器。当前版本的 Opera、Safari、Firefox 和 Chrome 都在一定程度上支持这一点。（对于 IE，人们需要免费（非开源）MathPlayer 插件）。我自己的[html5mathml](https://code.google.com/p/html5mathml/) JavaScript 有时有助于消除不同浏览器实现之间的差距。

# php - 无法在 PHP 行尾爆炸字符串

> ID：14644981
> 
> 赞同：1
> 
> 时间：2013-02-01T11:08:31.207
> 
> 标签：php, string, rss

我正在编写一个 PHP 应用程序来从 RSS 提要中获取数据并将其存储起来，以便以不同的格式为移动应用程序提供服务。

一切正常，除了从字符串中获取数据的重要部分。数据明明有新行，但我炸不出来！到目前为止，这是我尝试将每一行存储到一个数组中的尝试。我已经用尽了我的知识和谷歌的结果！！

```
 // Prepare the data
    $possibleLineEnds = array("\r\n", "\n\r", "\r");
    $preparedData = trim($row['description']);

    // Loop through and replace the data
    foreach ($possibleLineEnds as $lineEnd) {

      $preparedData = str_replace($lineEnd, "\n", $preparedData);
    }

    // Explode the data into new rows
    $locationData = explode("\n", $preparedData);

    print_r($locationData); 
```

任何想法，任何东西都将受到欢迎！

* * *

我无法将此标记为已回答，因为我的评分不是 10。

我已经成功了！我知道它不像它可能的那样整洁，我根本不了解 preg 函数的模式！

这是有效的代码：

```
 // Prepare the data
    $possibleLineEnds = array("\r\n", "\n\r", "\r", "<br>", "<br/>", "&lt;br/&gt;");
    $preparedData = trim(htmlspecialchars_decode($row['description']));

    // Replace the possible line ends
    $preparedData = str_replace($possibleLineEnds, "\n", $preparedData);

    // Explode the data into new rows
    $locationData = explode("\n", $preparedData);

    print_r($locationData); 
```

谢谢大家的意见，我们终于到了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:27:50.333

如果您不能按新行拆分。按唯一字符串拆分；

```
// Prepare the data
$possibleLineEnds = array("\r\n", "\n\r", "\r", "\n");
$preparedData = trim($row['description']);

// Loop through and replace the data
foreach ($possibleLineEnds as $lineEnd) {

  $preparedData = str_replace($lineEnd, ":::", $preparedData);
}

// Explode the data into new rows
$locationData = explode(":::", $preparedData);

print_r($locationData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:18:40.937

我只是[`preg_split()`](http://php.net/manual/en/function.preg-split.php)用来匹配`\n`和字符的任何组合，而不是用我们可以`\r`的方式弄乱字符串。`str_replace()``explode()`

您的整个代码被简化为一行：

```
$output = preg_split('/(\n|\r)+/', $input); 
```

这与您的原始解决方案之间的唯一区别是，如果输入包含空行，它们将不会出现在展开的输出中。但我认为这对你来说可能是件好事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T09:44:38.063

我已经成功了！我知道它不像它可能的那样整洁，我根本不了解 preg 函数的模式！

这是有效的代码：

```
// Prepare the data
$possibleLineEnds = array("\r\n", "\n\r", "\r", "<br>", "<br/>", "&lt;br/&gt;");
$preparedData = trim(htmlspecialchars_decode($row['description']));

// Replace the possible line ends
$preparedData = str_replace($possibleLineEnds, "\n", $preparedData);

// Explode the data into new rows
$locationData = explode("\n", $preparedData);

print_r($locationData); 
```

谢谢大家的意见，我们终于到了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:13:37.773

我通常使用的是：

```
$preparedData = str_replace("\r", "", $preparedData);
$locationData = explode("\n", $preparedData); 
```

这一直对我有用，我希望它可以帮助你

# python - 保护从py2exe python生成的二进制文件

> ID：14644986
> 
> 赞同：1
> 
> 时间：2013-02-01T11:08:54.930
> 
> 标签：python, py2exe

我的项目要求我的 python 文件必须转换为 py2exe。很好，我的 py2exe 正在工作。假设我的二进制文件被称为“test.exe”。我知道我的 test.exe 包含我的 python 文件的所有 pyc 文件。我想要做的是，保护我的 text.exe，这样我的源代码就不会被看到，换句话说我不希望它被反编译回来，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:12:47.253

简而言之：什么都没有。任何可执行文件总是可以被逆向工程。

更详细地说：你真的认为你的代码是如此有价值，以至于人们会花几个月的时间来做这件事吗？

还要记住，如果你导入任何在 GPL 下发布的模块，你将做一些非法的事情，因为你的代码也不是 GPL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:13:33.693

在构建源代码之前，您始终可以尝试对其进行混淆。看看[http://freecode.com/projects/pyobfuscate](http://freecode.com/projects/pyobfuscate)。总有一种方法可以反编译二进制文件，但生成的源代码将很难阅读。

# java - 用 .net 连接 derby 数据库

> ID：14644992
> 
> 赞同：1
> 
> 时间：2013-02-01T11:09:13.670
> 
> 标签：java, .net, database, derby

我一直在寻找一个问题的答案，这个问题很容易问，因为很难找到答案：

1.  .Net 中是否有任何可能的方式可以用来连接到 Apache Derby？

2.  是否有任何受支持的嵌入式数据库 [在本地驱动器中] 与 .net 中的 Apache Derby 相同？

3.  是否有任何支持的网络数据库[在网络上的本地驱动器中] 与 .net 中的 Apache Derby 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:45:37.697

由于 .Net 无法通过 JDBC 连接，而且 Derby 不支持其他任何东西，我怀疑您是否能够做到这一点。

当您显然在寻找嵌入式数据库时，您可能想看看 Firebird：[http ://www.firebirdsql.org/](http://www.firebirdsql.org/)

如果我没记错的话，它确实有一个 .Net 连接器，您可以将它作为网络服务器或“基于文件的”嵌入式引擎运行。

它是一个非常好的和强大的 DBMS（它有几个 Derby 没有的特性），唯一的缺点是文档很乱（没有一个完整的手册可以涵盖当前版本的完整 SQL 语法）。

# ios - 使用内存密集型应用程序处理 segues/storyboards

> ID：14644993
> 
> 赞同：0
> 
> 时间：2013-02-01T11:09:19.063
> 
> 标签：ios, objective-c, xcode, uistoryboard, uistoryboardsegue

我有一个具有以下基本布局的应用程序，请理解我已经做了很多编程，但我对 IOS 相对较新，还没有正确地围绕 Storyboards/segues 进行思考。

实际上，我的应用程序具有以下屏幕：

WelcomeViewConroller ---ModalSeque--> MenuViewController --modalSegue---> newProjectVC || loadprojectVC ---modalSegue-->ProjectScreenVC。

从项目画面，用户可以返回menuVC画面。

现在，我知道每个 segue 都会创建一个视图控制器的新实例，这很好，我希望这发生，但是，当我从我的 ProjectScreen 中转回来，然后再次重新进入它时，我得到了一个巨大的内存泄漏并且非常奇怪的行为。

我知道当我离开时我需要关闭我的 View 控制器，尤其是我的 ProjectScreen，但是，无论我尝试什么，我都无法做到这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:57:28.200

在[我应该如何在 xcode 故事板中链接视图控制器？](https://stackoverflow.com/questions/14465861/how-should-i-chain-viewcontrollers-in-xcode-storyboard/14466190#14466190)我列举了一系列在故事板中返回多个场景的方法。但简而言之，两个最简单的选择是：

1.  **Unwind segues：**如果只支持 iOS 6 或更高版本，请使用 unwind segues。因此，例如，在你的主菜单的视图控制器中，实现一个 unwind segue：

    ```
    - (IBAction)gotoMainMenu:(UIStoryboardSegue *)segue
    {
        // if you need to do anything when you return to the main menu, do it here
    } 
    ```

    还要确保在主菜单的 .h 中定义它。然后`control`从你想要segue的按钮+拖动到场景下方面板中的“退出”按钮，然后选择“ `gotoMainMenu`”选项：

    ![挂钩放松赛格](../Images/bf4d1b777657fa87d6a7e5e9cb306d30.png)

2.  **导航控制器：**如果您需要 iOS 5 支持，那么只需使用导航控制器并将模态转场替换为推送转场。然后您可以使用`popToViewController`或`popToRootViewControllerAnimated`跳转回多个场景。如果您不想显示导航栏，请在情节提要中选择导航控制器，然后在属性检查器中，取消选中“显示导航栏”：

    ![取消选中显示导航栏](../Images/97cec6d6fbffeba9f160d8dcdee651c4.png)

    在这种情况下，我实际上认为最简单的方法是确保您的菜单场景是根（并让它绕到欢迎屏幕，就像我在其他答案的第 4 点中讨论的那样），在这种情况下，您可以调用`popToRootViewController`每当您想返回主菜单时。但是，如果主菜单不是根视图控制器，并且您想弹回它，您可以在场景之间传递一个点菜单控制器，或者您可以随后呈现的视图控制器在它们执行以下操作时执行以下操作想要回到主菜单：

    ```
    for (UIViewController *controller in [self.navigationController viewControllers])
    {
        if ([controller isKindOfClass:[MenuViewController class]])
        {
            [self.navigationController popToViewController:controller animated:YES];
            break;
        }
    } 
    ```

在 Stack Overflow 的其他地方，您会看到人们正在考虑嵌套调用的方法`dismissViewControllerAnimated`，或其他类似的变体。我个人认为导航控制器和展开转场要容易得多，也更优雅。

# c++ - 如何在我的主程序 c++ 中使用我自己制作的 Array 头文件？

> ID：14644999
> 
> 赞同：1
> 
> 时间：2013-02-01T11:09:34.857
> 
> 标签：c++, arrays, header

我已经创建了自己的头文件，这就是我们被要求这样做的方式，但是我应该在我的主程序中使用什么参数来调用这个头文件并创建一个数组。

我的头文件如下所示：

```
#ifndef ARRAY_H
#define ARRAY_H

class Array {
public:

    Array(int size) : _size(0), _arr(0) {
        // Call resize to initialize oneself
        resize(size) ;
    }

    Array(const Array& other) : _size(other._size) {
        _arr = new double[other._size] ;

        // Copy elements
        for (int i=0 ; i<_size ; i++) {
            _arr[i] = other._arr[i] ;
        }
    }

    ~Array() {
        delete[] _arr ;
    }

    Array& operator=(const Array& other)
    {
        if (&other==this) return *this ;
        if (_size != other._size) {
            resize(other._size) ;
        }
        for (int i=0 ; i<_size ; i++) {
            _arr[i] = other._arr[i] ;
        }
    }

    double& operator[](int index) {
        return _arr[index] ;
    }
    const double& operator[](int index) const {
        return _arr[index] ;
    }

    int size() const { return _size ; }

    void resize(int newSize) {
        // Allocate new array
        double* newArr = new double[newSize] ;

        // Copy elements
        for (int i=0 ; i<_size ; i++) {
            newArr[i] = _arr[i] ;
        }

        // Delete old array and install new one
        if (_arr) {
            delete[] _arr ;
        }
        _size = newSize ;
        _arr = newArr ;
    }

private:
    int _size ;
    double* _arr ;
} ;

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:15:03.967

1.  *不要*在 .h 文件中编写方法的实现。在头文件中编写代码*是*合理的，而您的情况并非如此，只有*少数例外。*您应该将实现移动到项目中的 cpp 文件中。仔细阅读：[为什么 C++ 中有头文件和 .cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)
**   如果要使用 .h 文件，只需编写`#include "your-h-filename.h"`. 然后，您将能够使用 .h 文件中定义的已定义类、变量和函数。*

 *您可能想阅读以下内容：http: [//www.learncpp.com/cpp-tutorial/19-header-files/](http://www.learncpp.com/cpp-tutorial/19-header-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:18:50.500

在要使用此类的任何 .cpp 文件中，假设“Array.h”是 .cpp 文件中头文件的相对路径，请输入以下行：

`#include "Array.h"`

靠近文件顶部，在任何函数或类型声明之前。这可确保您的数组文件中的代码被视为是在该 .cpp 文件中写入的。

作为进一步说明，您通常希望将类方法的定义拆分为单独的 .cpp 文件（可能是 Array.cpp）。例如，对于`resize`你的头文件中的定义应该简单地更改为：

```
void resize(int newSize); 
```

完整的定义应该放在 .cpp 文件中：

```
void Array::resize(int newSize) {
// Allocate new array
double* newArr = new double[newSize] ;

// Copy elements
for (int i=0 ; i<_size ; i++) {
  newArr[i] = _arr[i] ;
} 
```*