# StackOverflow 问答 15068000-15068999

# c# - 如何从 silverlight 调用 delete/put 方法来休息服务

> ID：15068000
> 
> 赞同：2
> 
> 时间：2013-02-25T13:22:37.713
> 
> 标签：c#, wcf, silverlight, rest

我收到了很多关于休息服务中的 post 和 get 方法的文章，但我没有得到任何关于 put/delete 的好文章。我创建了一项休息服务并尝试调用四项操作。获取并发布工作，但不放置/删除。我将在这里提供我的代码；

在 silverlight put 和 post 方法中调用 rest 服务

```
 const string uridel = 
              "http://localhost:50211/CustomerService.svc/deletecustomer/1";
 const string uriput = 
              "http://localhost:50211/CustomerService.svc/modifycustomer/1";

client.DownloadStringCompleted += (s, ev) =>//delete method
        {
            XDocument xml = XDocument.Parse(ev.Result);

            var Customer = from results in xml.Descendants
                                               ("CustomerResponse")
                           select new CustomerResponse
                           {
                               CustomerId = Int32.Parse(results.Descendants
                                               ("CustomerId").First().Value),
                           };

            int id = Customer.Select(w => w.CustomerId).FirstOrDefault();
            MessageBox.Show("result is :" + id);
        };
        client.DownloadStringAsync(new Uri(uridel), "DELETE");

 CustomerResponse cusres = new CustomerResponse();//put method
        cusres.CustomerName = textBox1.Text;
        cusres.CustomerPh = textBox2.Text;
        DataContractSerializer dataContractSerializer = 
                          new DataContractSerializer(typeof(CustomerResponse));
        MemoryStream memoryStream = new MemoryStream();
        dataContractSerializer.WriteObject(memoryStream, cusres);
        string xmlData = Encoding.UTF8.GetString(memoryStream.ToArray(), 0, 
                                                (int)memoryStream.Length);

        client.UploadStringCompleted += (s, ev) =>
        {
            XDocument xml = XDocument.Parse(ev.Result);

            var Customer = from results in xml.Descendants("CustomerResponse")
                           select new CustomerResponse
                           {

                               CustomerId = Int32.Parse(results.Descendants
                                               ("CustomerId").First().Value),
                           };

            int id = Customer.Select(w => w.CustomerId).FirstOrDefault();
            MessageBox.Show("result is :" + id);
            textBox1.Text = "";
            textBox2.Text = "";
        };
        client.Headers[HttpRequestHeader.ContentType] = "application/xml";
        client.UploadStringAsync(new Uri(uriput), "PUT", xmlData); 
```

在 wcf 服务中

```
 [OperationContract]
    [WebInvoke(Method = "DELETE",
               RequestFormat = WebMessageFormat.Xml,
               ResponseFormat = WebMessageFormat.Xml,
               BodyStyle = WebMessageBodyStyle.Bare,
               UriTemplate = "deletecustomer/{id}")]
    CustomerResponse DeleteCustomer(string id);

 [OperationContract]
    [WebInvoke(Method = "PUT",
               RequestFormat = WebMessageFormat.Xml,
               ResponseFormat = WebMessageFormat.Xml,
               BodyStyle = WebMessageBodyStyle.Bare,
               UriTemplate = "modifycustomer/{id}")]
    CustomerResponse ModifyCustomer(string id,CustomerResponse cusres); 
```

对于删除，我遇到了一个异常，即找不到服务器，而对于 put 方法，我遇到了错误，例如此请求不支持指定的方法。任何人都可以建议错误在哪里..或者建议可以在silverlight中使用put和delete方法的好文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T17:02:53.517

第 1 步：在 Silverlight 应用程序中检查您是否在 App() 构造函数中的 App.xaml.cs 中添加了以下行。

```
HttpWebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);
HttpWebRequest.RegisterPrefix("https://", WebRequestCreator.ClientHttp); 
```

第2步：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
   <policy>
     <allow-from http-request-headers="*" http-methods="*">       
       <domain uri="*"/>
     </allow-from>
    <grant-to>
      <resource path="/" include-subpaths="true"/>
    </grant-to>
   </policy>
 </cross-domain-access>
</access-policy> 
```

在您的服务主机项目下将 xml 保存为“clientaccesspolicy.xml”。

# c++ - memset 导致“向量迭代器不兼容”错误

> ID：15068001
> 
> 赞同：-8
> 
> 时间：2013-02-25T13:22:38.917
> 
> 标签：c++, vector, iterator, memset

目前正在处理我的 DirectX 游戏，并在常量缓冲区构造函数中使用 memset(0)（或 VS 中的 ZeroMemory 宏）来用零初始化所有值，它工作得很好。当我不小心尝试以这种方式初始化包含向量的其他一些结构时，就会出现问题。根据编译器（VS2010/VS2012），这会导致“向量迭代器不兼容”，std::vector::end 更精确。我可以理解 memset 可能会使向量迭代器无效，但是为什么在我将元素推回向量后“结束”迭代器无法正常工作。它不应该重新定位向量结束迭代器到正确的位置（在最后一个元素之后）吗？是否所有类型的 std::some_container::end 迭代器也受此影响？

```
#include <vector>

class MyClass
{
public:
    MyClass() { 
        memset(this, 0, sizeof(*this));
    }
    ~MyClass() {}
    std::vector<int>& GetData() { return m_data; }
    float            m_range;
private:
    std::vector<int> m_data;

};

int main()
{
    MyClass myClass;
    myClass.GetData().push_back(1);
    myClass.GetData().push_back(2);

    for (auto it = myClass.GetData().begin(); it != myClass.GetData().end(); it++)     
    {
        //stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T13:27:19.860

`std::vector` 已经有一个可以正确初始化向量的默认构造函数。什么都不做有你想要的行为。使用`memset`只是具有未定义的行为。

如果要将`float`成员初始化为零，C++ 提供了如下代码：

```
MyClass() : m_range(0) {} 
```

C++11 也允许编写`float m_range = 0;`，但是微软的编译器还没有实现这个功能。

这些`mem*`函数是非常粗糙的工具，在 C++ 结构（如`std::vector`. 诸如正确初始化、`std::copy`和等替代`std::fill`方案是更好的解决方案，因为它们不会践踏类型系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:24:48.553

你不应该`memset`ing 任何带有构造函数的类的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:26:47.143

改为这样做：

```
class MyClass {
public:
    MyClass() : range{} { 

    }

    float range;
    std::vector<int> data;
}; 
```

永远不要使用`memset`，当然绝对不要使用`this`哦上帝。

专业提示：[买一本好书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:28:03.983

您的对象是在导致问题的 memset 之前构造的。

以这种方式初始化对象在 C++ 中不是一个好方法

# netbeans - Netbeans如何搜索嵌套文件夹

> ID：15068004
> 
> 赞同：1
> 
> 时间：2013-02-25T13:22:53.373
> 
> 标签：netbeans, netbeans-7

每当我想去一个嵌套文件夹时，我都必须手动展开它的所有父文件夹来搜索它（这是非常不愉快的任务）。有没有更好的方法来搜索 Netbeans 中的嵌套文件夹或使用键盘快捷键来展开项目中的所有文件夹？

P/S：我在 Ubuntu 上使用 Netbeans-7.2.1 for PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:12:12.660

`Alt + Shift + O`(Windows) 是快速打开，用于打开文件。只需开始输入文件名，所有打开的项目中的匹配列表就会出现。

# asp.net - 基于 IDForeign 键的 ASP.NET 动态数据排序

> ID：15068008
> 
> 赞同：1
> 
> 时间：2013-02-25T13:23:11.143
> 
> 标签：asp.net, entity-framework, asp.net-dynamic-data

在我的应用程序中，我们使用 ASP.NET 动态数据进行数据绑定。一切正常。

如果您看到下面的代码片段，它具有动态字段`DepartmentID`，它是表的外键`Department`并从那里获取部门名称（在 中指定`DynamicData/FieldTemplates/IDForeignKey.ascx.cs`）。

我们的要求是对部门名称上的记录进行排序（排序），因为它们在网格视图中可见。我唯一的选择是对`DepartmentID`不符合我们目的的排序。

我们如何对从 ForeignKey 检索到的数据进行排序？

## 列表.aspx

```
 <asp:GridView ID="GridView1" runat="server" DataSourceID="GridDataSource" OnPreRender="GridView1_PreRender"
            AllowPaging="True" AllowSorting="True" AutoGenerateColumns="false">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink ID="EditHyperLink" runat="server"
                            NavigateUrl='<%# table.GetActionPath(PageAction.Edit, GetDataItem()) %>'
                        Text="Edit" />&nbsp;|&nbsp;<asp:LinkButton ID="DeleteLinkButton" runat="server" CommandName="Delete"
                            CausesValidation="false" Text="Delete"
                            OnClientClick='return confirm("Are you sure you want to delete this item?");'
                        />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:DynamicField DataField="DepartmentID" HeaderText="Department" />                    
                <asp:DynamicField DataField="Description" HeaderText="Description"/>
            </Columns>

            <PagerStyle/>        
            <PagerTemplate>
                <asp:GridViewPager runat="server" />
            </PagerTemplate>
            <EmptyDataTemplate>
                There are currently no items in this table.
            </EmptyDataTemplate>
        </asp:GridView>
    </div>
        <asp:EntityDataSource OnSelecting="GridDataSource_Selecting" ID="GridDataSource"  runat="server" EnableDelete="true" OnDeleted="GridDataSource_Deleted"  >
            <WhereParameters>
                <asp:DynamicControlParameter ControlID="DynamicFilter1" />
            </WhereParameters>
        </asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:52:39.267

不幸的是，您的问题并不完全清楚如何描述您的元数据，
但无论如何您都可以尝试使用**QueryExtender**控件和**SearchExpression**类。您可以通过链接[QueryExtender 和 SearchExpression](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.expressions.searchexpression.aspx)找到更多详细信息以及示例。

整个想法是使用自定义 LINQ。

# xml - 如何在excel中打开一个XML文件

> ID：15068009
> 
> 赞同：2
> 
> 时间：2013-02-25T13:23:12.177
> 
> 标签：xml, vba, excel

我想用以下功能对我的按钮进行编程：

打开并选择一个 xml 文件，然后在“table2”中写入具有所属值的度量名称 id M1-M10。

我成功打开并选择了一个xml文件：

```
Private Sub btn_load_xml_Click()
'-----------Open file---------------------------
Dim Filter As String, Title As String
Dim FilterIndex As Integer
Dim Filename As Variant

' File filters
Filter = "XML Files (*.xml),*.xml"
' Default Filter to *.*

FilterIndex = 3
' Set Dialog Caption
Title = "Select a File to Open"

' Select Start Drive & Path
ChDrive ("C")
ChDir ("C:")
With Application
    ' Set File Name to selected File
    Filename = .GetOpenFilename(Filter, FilterIndex, Title)
    ' Reset Start Drive/Path
    ChDrive (Left(.DefaultFilePath, 1))
    ChDir (.DefaultFilePath)
End With

' Exit on Cancel
If Filename = False Then
    Exit Sub
End If

' Open File   
MsgBox Filename, vbInformation, "File Opened" ' This can be removed
'------------- Load XML in table2------------------

'------------- END Load XML in table2------------------
End Sub 
```

但是我怎样才能加载 XML 文件并使用它呢？

这是我的 XML 结构

```
<?xml version="1.0" encoding="UTF-8" ?>

<sourcemonitor_metrics>
  <project version="3.3">
    <project_name>metric_auswertung</project_name>
    <project_directory>C:\Users\SULAS\Desktop\Metric_auswertung</project_directory>
    <project_language>C</project_language>

    <ignore_headers_footers>false</ignore_headers_footers>
    <export_raw_numbers>false</export_raw_numbers>
    <metric_names name_count="13">
      <metric_name id="M0" type="number">Lines</metric_name>
      <metric_name id="M1" type="number">Statements</metric_name>
      <metric_name id="M2" type="percent" divisor="M1">Percent Branch Statements</metric_name>
      <metric_name id="M3" type="percent" divisor="M0">Percent Lines with Comments</metric_name>
      <metric_name id="M4" type="number">Functions</metric_name>
      <metric_name id="M5" type="average" divisor="M4">Average Statements per Function</metric_name>
      <metric_name id="M6" type="string">Line Number of Most Complex Function</metric_name>
      <metric_name id="M7" type="string">Name of Most Complex Function</metric_name>
      <metric_name id="M8" type="maximum">Complexity of Most Complex Function</metric_name>
      <metric_name id="M9" type="string">Line Number of Deepest Block</metric_name>
      <metric_name id="M10" type="maximum">Maximum Block Depth</metric_name>
      <metric_name id="M11" type="average" values="block_depths">Average Block Depth</metric_name>
      <metric_name id="M12" type="average">Average Complexity</metric_name>
    </metric_names>
    <checkpoints checkpoint_count="1">
      <checkpoint checkpoint_name="Metric_Auswertung" ignore_blank_lines="false" modified_complexity="true" checkpoint_date="2013-02-25">
        <files file_count="3">
          <file file_name="Mcu - Kopie.c">
            <metrics metric_count="13">
              <metric id="M0">603</metric>
              <metric id="M1">183</metric>
              <metric id="M2">26,2</metric>
              <metric id="M3">23,2</metric>
              <metric id="M4">11</metric>
              <metric id="M5">24,6</metric>
              <metric id="M6">321</metric>
              <metric id="M7">Mcu_GetPllStatus()</metric>
              <metric id="M8">15</metric>
              <metric id="M9">235</metric>
              <metric id="M10">6</metric>
              <metric id="M11">1,97</metric>
              <metric id="M12">6,00</metric>
            </metrics>
          </file>
        </files>
      </checkpoint>
    </checkpoints>
  </project>
</sourcemonitor_metrics> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:22:35.200

您可以使用 MSXML 直接处理 XML 文档。如需完整参考，请参阅[**MSXML**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms763742%28v=vs.85%29.aspx)，并特别查看[**DOM 参考**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms764730%28v=vs.85%29.aspx)。要最轻松地使用 MSXML，请打开 VBA 编辑器并转到工具 > 参考。在“Microsoft XML, vX.0”旁边添加一个检查，其中 X 是可用的最新版本。

“如何使用 XML”超出了这个问题的范围，但这是帮助您入门的基本 VBA：

```
Sub btn_load_xml_Click()

    ' Get file name ...

    Dim oDoc As New MSXML2.DOMDocument60
    Dim xMetricNames As IXMLDOMNodeList
    Dim xMetricName As IXMLDOMElement
    Dim xMetrics As IXMLDOMNode
    Dim xMetric As IXMLDOMElement
    Dim mtID As String, mtName As String, mtValue As String

    ' Load from file
    oDoc.Load FileName

    ' Select needed nodes
    Set xMetrics = oDoc.SelectSingleNode("//project/checkpoints/checkpoint/files/file/metrics")
    Set xMetricNames = oDoc.SelectNodes("//project/metric_names/metric_name")
    For Each xMetricName In xMetricNames
        mtName = xMetricName.Text
        mtID = xMetricName.getAttribute("id")
        mtValue = xMetrics.SelectSingleNode("metric[@id='" & mtID & "']").Text

        ' Do whatever you want with these values
    Next

    Set oDoc = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:56:31.890

你有没有尝试过：

```
Workbooks.OpenXML Filename:="C:\Path\File.xml", LoadOption:=xlXmlLoadImportToList 
```

这将在 Excel 中将 XML 文件作为 XML 表打开。然后，您可以像处理任何其他 Excel 文档一样处理它。

# multithreading - F# 事件的线程安全引发

> ID：15068010
> 
> 赞同：3
> 
> 时间：2013-02-25T13:23:13.767
> 
> 标签：multithreading, events, f#

我正在尝试进行 F# 异步计算，该计算在准备好时调用 C# 回调。代码如下：

```
type Worker() = 

    let locker = obj()
    let computedValue = ref None
    let started = ref false
    let completed = Event<_>()

    let doNothing() = ()

    member x.Compute(callBack:Action<_>) = 
        let workAlreadyStarted, action = 
            lock locker (fun () -> 
                match !computedValue with
                | Some value ->
                    true, (fun () -> callBack.Invoke value)
                | None ->
                    completed.Publish.Add callBack.Invoke
                    if !started then                            
                        true, doNothing
                    else
                        started := true
                        false, doNothing)
        action()
        if not workAlreadyStartedthen
            async {                

                // heavy computation to calc result
                let result = "result"

                lock locker (fun () -> 
                    computedValue := Some result
                    completed.Trigger result)
            } |> Async.Start 
```

但是有一个问题，我想在锁外触发完成的事件，但我想确保触发是线程安全的（实际上，在这个小例子中，我可以在锁外触发事件，因为我不知道其他人将订阅它，但并非总是如此）。

在 C# 事件中，这很容易实现：

```
 object locker = new object();
    event Action<string> MyEvent;

    void Raise()
    {
        Action<string> myEventCache;
        lock (locker)
        {
            myEventCache = MyEvent;
        }
        if (myEventCache != null)
        {
            myEventCache("result");
        }
    } 
```

如何对 F# 事件执行等效操作，冻结锁内的订阅者列表但在锁外调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:46:55.560

这在 F# 中并不那么简单，因为`Event<_>`不公开其订阅者列表，该列表由`Add`/突变`Remove`。

您可以通过为每个处理程序创建一个新事件来避免这种突变。

```
let mutable completed = Event<_>()

//...

let ev = Event<_>()
let iev = ev.Publish
iev.Add(completed.Trigger)
iev.Add(callBack.Invoke)
completed <- ev

//...

let ev = lock locker <| fun () -> 
    computedValue := Some result
    completed
ev.Trigger(result) 
```

# java - 来自另一个包的 bundle.update() 失败

> ID：15068011
> 
> 赞同：0
> 
> 时间：2013-02-25T13:23:28.103
> 
> 标签：java, service, osgi, bundle

我正在构建一个简单的 OSGi 演示应用程序来了解该框架。我想从另一个包中更新活动包，或者从嵌入了 OSGi 框架的应用程序更新（如[Neil Bartlett 的 How To Embed OSGi](http://njbartlett.name/2011/03/07/embedding-osgi.html)中所述）。

我的应用程序被分成这些包（我已将代码放在帖子末尾以便于阅读）：

1.  com.dc.sszostek.interfaces - 包含一个带有 draw() 方法的 Shape 接口
2.  com.dc.sszostek.implementations - 有 2 个带有此 SymbolicName 的包，每个包都实现了 Shape 接口：println 是一个 Line，另一个是 Square。它们的清单文件都是相同的，捆绑包仅在实现上有所不同。
3.  com.dc.sszostek.programs - 包含一个 Painter 程序；它使用 Shape 接口来绘制（）（我使用了[OSGi 服务 - Lars Vogel 的教程](http://www.vogella.com/articles/OSGiServices/article.html)来编写它）。
4.  com.dc.sszostek.xmpp - 包含使用 SmackAPI 实现的 Jabber 客户端，等待文件传输并在收到文件时尝试更新 com.dc.sszostek.implementations 包。

我的问题是，当我向我的应用程序发送不同的实现时，文件被写入，但捆绑包没有得到更新。

`bundle.update()`被调用时，它不会抛出异常，但我的程序一直在画一条线（或一个正方形，取决于我首先放入的包）。当我从 OSGi 控制台更新包时，它被正确替换，并且我的演示开始绘制不同的形状。

谁能告诉我我犯的错误在哪里，或者指出一个可行的例子？

先感谢您。

* * *

com.dc.sszostek.interfaces

清单文件

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: Provider
    Bundle-SymbolicName: com.dc.sszostek.interfaces
    Bundle-Version: 1.0.0
    Export-Package: com.dc.sszostek.interfaces 
```

形状.java

```
 package com.dc.sszostek.interfaces;

    public interface Shape {
        void draw();
    } 
```

* * *

com.dc.sszostek.implementations

清单文件

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: Impl
    Bundle-SymbolicName: com.dc.sszostek.implementations
    Bundle-Version: 1.0.0
    Bundle-Activator: com.dc.sszostek.implementations.Activator
    Export-Package: com.dc.sszostek.implementations
    Import-Package: org.osgi.framework, com.dc.sszostek.interfaces 
```

激活器.java

```
 package com.dc.sszostek.implementations;

    import org.osgi.framework.BundleActivator;
    import org.osgi.framework.BundleContext;
    import com.dc.sszostek.interfaces.Shape;

    public class Activator implements BundleActivator {

        public void start(BundleContext ctx) throws Exception {
            ctx.registerService(Shape.class.getName(), new Line(), null);
        }

        public void stop(BundleContext ctx) throws Exception {}
    } 
```

线.java

```
 package com.dc.sszostek.implementations;

    import com.dc.sszostek.interfaces.Shape;

    public class Line implements Shape {
        public void draw() {
            System.out.println("*********");
        }
    } 
```

* * *

com.dc.sszostek.programs

清单文件

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: Prog
    Bundle-SymbolicName: com.dc.sszostek.programs
    Bundle-Version: 1.0.0
    Bundle-Activator: com.dc.sszostek.programs.Activator
    Export-Package: com.dc.sszostek.programs
    Import-Package: org.osgi.framework, com.dc.sszostek.interfaces 
```

激活器.java

```
 package com.dc.sszostek.programs;

    import org.osgi.framework.BundleActivator;
    import org.osgi.framework.BundleContext;
    import org.osgi.framework.ServiceReference;
    import com.dc.sszostek.interfaces.Shape;

    public class Activator implements BundleActivator {
        private MyThread thread;

        public void start(BundleContext ctx) throws Exception {
            ServiceReference ref = getServiceReference(ctx);
            thread = new MyThread((Shape)ctx.getService(ref));
            thread.start();
        }

        public void stop(BundleContext ctx) throws Exception {
            ServiceReference ref = getServiceReference(ctx);
            ctx.ungetService(ref);
            thread.stopThread();
        }

        private ServiceReference getServiceReference(BundleContext ctx) {
            ServiceReference ref = ctx.getServiceReference(Shape.class.getName());
            return ref;
        }

        public static class MyThread extends Thread {
            private volatile boolean active = true;
            private final Shape service;

            public MyThread(Shape service) {
                this.service = service;
            }

            public void run() {
                while (active) {
                    service.draw();
                    try {
                        Thread.sleep(5000);
                    } catch (Exception e) {
                        System.out.println("Thread interrupted: " + e.getMessage());
                    }
                }
            }

            public void stopThread() {
                active = false;
            }
        }
    } 
```

* * *

com.dc.sszostek.programs

清单文件

```
 Manifest-Version: 1.0
    Bundle-ManifestVersion: 2
    Bundle-Name: FileReceiver
    Bundle-SymbolicName: com.dc.sszostek.xmpp
    Bundle-Version: 1.0.0
    Bundle-Activator: com.dc.sszostek.xmpp.Activator
    Bundle-ClassPath: ., lib/smack-3.2.1.jar, lib/smackx-3.2.1.jar
    Import-Package: org.osgi.framework, javax.net, javax.security.auth.callback, javax.net.ssl, javax.security.sasl,
        javax.naming.directory, javax.naming 
```

激活器.java

```
 package com.dc.sszostek.xmpp;

    import org.jivesoftware.smack.*;
    import org.jivesoftware.smackx.filetransfer.*;
    import org.osgi.framework.Bundle;
    import org.osgi.framework.BundleActivator;
    import org.osgi.framework.BundleContext;
    import org.osgi.framework.BundleException;

    import java.io.File;
    import java.io.IOException;

    public class Activator implements BundleActivator {
        private Connection connection;

        public void start(BundleContext bundleContext) throws Exception {
            final BundleContext ctx = bundleContext;

            try {
                connection = new XMPPConnection("JABBER_SERVER");
                connection.connect();
                connection.login("USER", "PASS");

                final FileTransferManager manager = new FileTransferManager(connection);
                FileTransferNegotiator.getInstanceFor(connection);
                FileTransferNegotiator.setServiceEnabled(connection, true);

                manager.addFileTransferListener(new FileTransferListener() {
                    public void fileTransferRequest(FileTransferRequest request) {
                        IncomingFileTransfer transfer = request.accept();

                        File file = new File("D:\\bundles\\" + transfer.getFileName());

                        try {
                            file.createNewFile();
                        } catch (IOException e) {
                            System.out.println(e.getMessage());
                        }

                        try {
                            transfer.recieveFile(file);
                        } catch (XMPPException e) {
                            System.out.println(e.getMessage());
                        }

                        Bundle bundle = ctx.getBundle(2); //com.dc.sszostek.implementations is bundle number 2
                        try {
                            bundle.update();
                        } catch (BundleException e) {
                            System.out.println(e.getMessage());
                        }
                    }
                });
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }

        public void stop(BundleContext bundleContext) throws Exception {
            connection.disconnect();
        }
    } 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:24:35.320

不要从 OSGi 中的激活器开始，激活器是过去的不幸遗留物。激活器是单例（这真的很糟糕！），它们迫使您自己处理依赖关系。尽管它们有时在非常特殊的情况下很有用，因为它们不依赖于其他捆绑包。但是，几乎所有情况下，声明式服务都是可行的。

很多人都想从底层学习 OSGi，但使用激活器就像学习如何驾驶 Fred Flintstone 的汽车在当今的道路上行驶。一定会让自己受伤。

您实际上是在展示使用激活器时发生在您身上的所有陷阱。当您启动激活器时，服务不保证存在。您还提出了一个非常糟糕的主意，即在您的激活器中打开与外部服务的连接。激活器启动/停止方法必须非常快速才能快速启动所有捆绑包。

无论如何，除了尼尔的建议。您意识到 update() 正在使用您提供的旧网址吗？您是否更改了 URL 指向的文件？您可能希望使用 update(InputStream) 方法来确保包确实已更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:52:41.983

您是否希望服务的实现在`MyThread`运行时发生变化？因为看起来您在启动线程之前只获得一次服务，然后永远重用它。在这些情况下，实现是不可能改变的，至少在你杀死并重新启动线程之前是这样。

# javascript - 增加宽度时 resize() 函数的问题

> ID：15068016
> 
> 赞同：0
> 
> 时间：2013-02-25T13:23:40.237
> 
> 标签：javascript, jquery, html, css

我在窗口的右侧有一个固定的 div，我想要做的是当用户调整窗口大小时，我希望这个固定的 div 通过改变它的位置不与另一个 div 重叠，我在调整到更小的时候设法做到了，但我想要的是，当用户还为更高的宽度调整窗口大小时，我希望该 div 回到最初的“固定”状态。

这是代码示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $(window).resize(function(){
        var pos = $("#div").offset();
        var fix = $("#fix").offset();
        if(fix.left<950){
            $('#fix').css('position','relative');
            $('#fix').css('left',fix.left);
            $('#fix').css('top',-fix.top);
            var available = true;
        }
        var pos = $("div").offset();
        var fix = $("fix").offset();
        if(fix.left>950){
            $('#fix').css('position','fixed');
            $('#fix').css('right','100px');
            $('#fix').css('top',fix.top);
        }
    });

});
</script>
</head>

<body style="margin:0;">
<div id="div" style="width:600px; height:200px; background-color:red; margin-left:300px;"></div>
<div id="fix" style="position:fixed; right:100px; height:100px; width:100px; background-color:yellow; top:100px;"></div>
</body>
</html> 
```

提前感谢每一个人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:41:27.803

正如我所看到的，当您的窗口调整到小于固定值或调整到大于相同值时，就会发生该操作，因此我**建议您使用 CSS3 媒体**查询而不是脚本来进行**响应式/自适应网页设计。**

请看看[这个](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

这些**不会处理很多**，因此**重量轻，大多数现代浏览器和设备都支持 CSS3，**因此是一个**方便可靠的选项。**

此外，如果您针对旧浏览器并需要显示旧浏览器不支持的圆角或其他 css3 属性，您可以查看链接上的 CSS3 PIE：css3pie.com

# ios - xCode 4 项目模板中的可选框架

> ID：15068018
> 
> 赞同：1
> 
> 时间：2013-02-25T13:23:43.000
> 
> 标签：ios, objective-c, xcode, facebook

我为 xcode 4 创建了一个模板并将其包含`FacebookSDK`在其中。问题是，如果您想在 iOS 5 上使用 sdk，某些框架（AdSupport、Accounts）必须设置为“可选”。如何使它们从`TemplateInfo.plist`. 还是可以有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T15:44:38.213

您应该将带有`-weak_framework`前缀的框架添加到您的 OTHER_LDFLAGS，如下所示：

```
<key>SharedSettings</key>
<dict>
<key>OTHER_LDFLAGS</key>
<string>-all_load -ObjC -weak_framework Accounts -weak_framework Social</string>
<key>CLANG_ENABLE_OBJC_ARC</key>
<string>YES</string>
</dict> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:34:23.203

![在此处输入图像描述](../Images/e9e4e4309b4d7ffae5d89f078458026b.png)

看到这张图片。这将对您有所帮助。

# mysql - 选择相关行不存在的条件

> ID：15068026
> 
> 赞同：2
> 
> 时间：2013-02-25T13:24:28.587
> 
> 标签：mysql, yii

我正在使用 Yii 开发公司的内部管理系统。我创建了一个模型`Jobs`，这个模型与`Quotes`HAS_MANY 类型的模型有关系。关系名称是`quotes`。现在我需要选择所有行（模型 Jobs 使用 MySQL 表`jobs`作为它的源），其中每个作业正好有 0 个与之关联的引号。我认为我会将其添加为模型中的范围。我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:10:59.630

在模型中添加：

```
public function scopes() {
    return array(
        'withoutQuotes'=>array(
            'with'=>'quotes',
            'condition'=>'quotes.id is null',
        ),
    );
} 
```

然后使用

```
$model->withoutQuotes()->search() //etc 
```

# android - 带有 base64encode 标记的 XmlPullParser

> ID：15068027
> 
> 赞同：0
> 
> 时间：2013-02-25T13:24:29.257
> 
> 标签：android, smack, xmlpullparser

我正在使用 XmlPullParser 解析 xml 数据包。我能够解析 base64encode 标记。我的问题是“我无法读取完整的 base64encode 数据。只有其中一部分能够读取”。

```
boolean done = false;
 while (!done) {
        int eventType = parser.next();

        if (eventType == XmlPullParser.START_TAG) {
            String elementName = parser.getName();
            String namespace = parser.getNamespace();

             if(elementName.equals("vCard") && namespace.equals("vcard-temp"))
            {
             }

            // Otherwise, see if there is a registered provider for
            // this element name and namespace.
            else {
                Object provider = ProviderManager.getInstance().getIQProvider(elementName, namespace);
                if (provider != null) {
                    if (provider instanceof IQProvider) {
                        iqPacket = ((IQProvider)provider).parseIQ(parser);
                    }
                    else if (provider instanceof Class) {
                        iqPacket = (IQ)PacketParserUtils.parseWithIntrospection(elementName,
                                (Class)provider, parser);
                    }
                }
            }
        }
        else if (eventType == XmlPullParser.END_TAG) {
            if (parser.getName().equals("iq")) {
                done = true;
            }
        }else if(eventType == XmlPullParser.TEXT){
            String xx = parser.getText();
            System.out.println("binaval "+ xx);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:27:59.593

[很长的字符串作为 Web 服务的响应](https://stackoverflow.com/questions/13086131/very-long-string-as-a-response-of-web-service)

有时在这里看到这个答案对于很长的字符串它不起作用我发布这个问题时的情况是一样的。

# javascript - Highstock X 轴：时间类别

> ID：15068028
> 
> 赞同：2
> 
> 时间：2013-02-25T13:24:33.713
> 
> 标签：javascript, highcharts, highstock

是否可以在 Highstock 中使用类别作为 x 值？我不需要时间条作为 x 轴，而是需要编号的评级。

这适用于 Highcharts，但我需要 Highstock 的滚动条功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:36:25.653

您可以使用 highstock 发布，但使用 highcharts 和滚动条。

看例子：

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container'
    },
    xAxis:{
        min:0,
        max:2,
        categories:['first','second','third','fourth']
    },
    scrollbar: {
        enabled: true
    },

    rangeSelector: {
        enabled:false
    },

    series: [{
        name: 'USD to EUR',
        data: [1,3,4,6]
    }]
}); 
```

[http://jsfiddle.net/b826C/](http://jsfiddle.net/b826C/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T10:15:48.767

您可以使用 Highstock 和以下解决方法获得所需的功能：

x 轴是日期时间，您的系列日期范围从日期时间 0 到日期时间 x，这里 x 是您拥有的类别数。

然后，当您格式化 xAxis 标签时，请使用：

```
labels: {
    formatter: function() {
    return categoryText[this.value];
   }
} 
```

同样，您可以格式化导航器中的文本，

categoryText 是一个本地变量，其中包含类别的文本名称。

这是小提琴：[https ://jsfiddle.net/b826C/98/](https://jsfiddle.net/b826C/98/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T06:43:00.577

Highcharts/Highstock 的一位开发人员回答了我的支持请求：不可能将导航器切换到除时间间隔之外的其他内容。

我的问题的唯一解决方案是带有主图表和详细图表的导航，如下例所示：  [http ://www.highcharts.com/demo/dynamic-master-detail](http://www.highcharts.com/demo/dynamic-master-detail)

# java - Android：当您以编程方式更改设置为 wrap_content 的 frameLayout 的尺寸时会发生什么？

> ID：15068031
> 
> 赞同：1
> 
> 时间：2013-02-25T13:24:40.093
> 
> 标签：java, android, android-xml

我的应用程序中有一个 FrameLayout，在 xml 文件中它的`width`和`height`设置为`wrap_content`. 然后我想像这样以编程方式更改其尺寸：

```
FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
ViewGroup.LayoutParams previewParam = preview.getLayoutParams() ;
previewParam.height =(int) (height * 0.86);
previewParam.width = (int)(previewParam.height/ratio) ;
preview.setLayoutParams(previewParam) ; 
```

当我这样做时，当我开始这个活动时程序退出，问题是否`wrap_content`存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:35:34.720

我相信它是因为`previewParam` 那时是空的。尝试这样做：

```
FrameLayout preview = (FrameLayout) findViewById(R.id.abs__action_bar);
ViewGroup.LayoutParams params = new ViewGroup.LayoutParams((height/ratio),
         (int) (height * 0.86));
preview.setLayoutParams(params);
preview.requestLayout(); 
```

# c# - c#/Excel：PrintOutEx(...) 不会打印文档的多个副本

> ID：15068032
> 
> 赞同：0
> 
> 时间：2013-02-25T13:24:41.813
> 
> 标签：c#, excel, printing

这种方法效果很好......如果我想在一个作业中多次打印同一个文档，那就不行了。

这些是 PrintOutEx 的参数描述：

```
void PrintOutEx(
Object From,
Object To,
Object Copies,
Object Preview,
Object ActivePrinter,
Object PrintToFile,
Object Collate,
Object PrToFileName,
Object IgnorePrintAreas
) 
```

“副本”参数对我不起作用：

```
 if (result == DialogResult.OK)
    {
        foreach (Excel._Worksheet ws in wb.Worksheets)
        {
            if (Char.IsDigit(ws.Name[0])) 
            {
                object copies = view.Rows.Cast<DataGridViewRow>().Where(x => x.Cells[0].Value.ToString().Trim() == ws.Name.Trim()).First().Cells[1].Value;
                if (copies == null)
                    copies = 1;
                else
                    copies = int.Parse(copies.ToString());

                ws.PrintOutEx(1, 1, copies, false, dialog.PrinterSettings.PrinterName, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
            }
        }
        return true;
    }
    else
        return false; 
```

如果有人能给我提示我做错了什么，我将不胜感激。

# javascript - 删除集合中的模型并触发删除事件-backbone.js

> ID：15068036
> 
> 赞同：18
> 
> 时间：2013-02-25T13:24:49.370
> 
> 标签：javascript, backbone.js

如何删除删除集合中的模型并使删除事件触发。我试过 `people.remove([{ name: "joe3" }]);`了，但它不会工作。

```
var Person = Backbone.Model.extend({

    initialize: function () {
        console.log(" person is initialized");
    },
    defaults: {
        name: "underfined",
        age:"underfined"
    }
});

var People = Backbone.Collection.extend({
    initialize: function () {
        console.log("people collection is initialized");
        this.bind('add', this.onModelAdded, this);
        this.bind('remove', this.onModelRemoved, this);
    },
    model: Person,
    onModelAdded: function(model, collection, options) {
        console.log("options = ", options);
        alert("added");
    },
    onModelRemoved: function (model, collection, options) {
        console.log("options = ", options);
        alert("removed");
    },
});

//var person = new Person({ name: "joe1" });
var people = new People();

//people.add([{ name: "joe2" }]);
people.add([{ name: "joe1" }]);
people.add([{ name: "joe2" }]);
people.add([{ name: "joe3" }]);
people.add([{ name: "joe4" }]);
people.add([{ name: "joe5" }]);

people.remove([{ name: "joe3" }]);

console.log(people.toJSON()); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-10-01T06:04:43.360

对于其他寻找删除位置的人，您可以简单地使用 collection.where 调用将其链接起来。像这样删除与搜索匹配的所有项目：

```
people.remove(people.where({name: "joe3"})); 
```

见[骨干collection.where](http://backbonejs.org/#Collection-where)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-25T13:56:15.857

通过做：

```
people.remove([{ name: "joe3" }]); 
```

您不会删除模型，因为您只传递了一个未连接到`people`集合的普通对象。相反，您可以执行以下操作：

```
people.remove(people.at(2)); 
```

或者：

```
var model = new Person({name: "joe3"});
people.add(model);
...
people.remove(model); 
```

也会起作用。

所以你需要从集合中引用实际的模型对象；

[http://jsfiddle.net/kD9Xu/](http://jsfiddle.net/kD9Xu/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-27T14:18:47.367

另一种方法更短一些，并且也会触发集合的*remove*事件：

```
people.at(2).destroy();
// OR
people.where({name: "joe2"})[0].destroy(); 
```

> 在模型上触发“销毁”事件，该事件将通过包含它的任何集合冒泡。[http://backbonejs.org/#Model-destroy](http://backbonejs.org/#Model-destroy)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-25T14:11:14.590

```
var Person = Backbone.Model.extend({
    defaults: {
        name: "underfined",
        age:"underfined"
    }
});

var People = Backbone.Collection.extend({
    initialize: function () {
        this.bind('remove', this.onModelRemoved, this);
    },
    model: Person,
    onModelRemoved: function (model, collection, options) {
        alert("removed");
    },
    getByName: function(name){
       return this.filter(function(val) {
          return val.get("name") === name;
        })
    }
});

var people = new People();

people.add(new Person({name:"joe1"}));
people.add(new Person({name:"joe2"}));
people.remove(people.getByName("joe1"));

console.info(people.toJSON()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-02T15:31:44.747

为了删除“[0]”，您可以使用以下代码：

```
people.findWhere({name: "joe2"}).destroy(); 
```

# cocos2d-android - 我们如何在 cocos2d-android 中同时使用动画和移动精灵？

> ID：15068054
> 
> 赞同：0
> 
> 时间：2013-02-25T13:25:38.537
> 
> 标签：cocos2d-android

动画并将一个位置的精灵移动到另一个位置已完成，但同时不起作用。任何人都有一个想法，我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:24:34.443

正如对您问题的评论中所述，您只需为要运行的每个操作调用一次 runAction ，它们就会并行运行，就像这样

```
sprite.runAction( action );
sprite.runAction( actionMove );
sprite.runAction( action_back ); 
```

如果您想将您的动作组合成一个并行动作，请使用 CCSpawn

```
CCFiniteTimeAction parallelAction = CCSpawn.actions( action, actionMove, action_back );
sprite.runAction( parallelAction ); 
```

现在，运行 parallelAction 将并行运行 action、actionMove 和 action_back。

# java - JMockit 捕获和替换接口方法逻辑

> ID：15068058
> 
> 赞同：1
> 
> 时间：2013-02-25T13:25:45.013
> 
> 标签：java, jmockit

如何使用 JMockit 捕获接口方法的调用并将捕获的接口方法的逻辑替换为模拟的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:04:11.120

是的，它在“The JMockit Tutorial”中有清楚的描述，这里：http: [//jmockit.googlecode.com/svn/trunk/www/tutorial/StateBasedTesting.html#interfaces](http://jmockit.googlecode.com/svn/trunk/www/tutorial/StateBasedTesting.html#interfaces)

这是模拟`CallBackHandler`接口并提供自己的`handle`方法实现的代码的复制粘贴示例：

```
@Test
public void mockingAnInterface() throws Exception
{
    CallbackHandler callbackHandler = new MockUp<CallbackHandler>() {
        @Mock
         void handle(Callback[] callbacks)
         {
             assertEquals(1, callbacks.length);
             assertTrue(callbacks[0] instanceof NameCallback);
         }
    }.getMockInstance();

    callbackHandler.handle(new Callback[] {new NameCallback("Enter name:")});
} 
```

# iphone - XCode 应用商店构建 - 新目标或配置？

> ID：15068062
> 
> 赞同：2
> 
> 时间：2013-02-25T13:25:49.750
> 
> 标签：iphone, xcode, build-script, buildconfiguration

我有一个有 3 个目标的应用程序。或方案。每个目标都有两个配置，dubug 和 release。我正在使用构建脚本在命令行中构建它。

对于临时发布，我使用配置“发布”。但是什么时候构建应用商店呢？最好的方法是什么？为应用商店制定新目标或新配置？

是否可以为应用商店构建进行新配置，从发布中复制值。我在 XCode 4.6 构建设置中找不到该选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:51:44.513

1.  在 Project Navigator 下选择您的项目文件
2.  选择“项目”下的项目
3.  单击配置下的加号“+”以创建新配置
4.  选择要从中复制设置的配置

![项目配置](../Images/40a84457ea27bd570a9529ca674b7edd.png)

在我们的例子中，我们使用不同的目标和配置。我们通常有一个“测试版”配置，用于在应用程序内启用跟踪、崩溃报告和快捷方式，并且还有一个不同的目标，允许我们在同一设备上安装 AppStore 和开发版本而不会发生冲突。

干杯!

# joomla - Joomla 1.7 弹出扩展以在内部加载模块

> ID：15068065
> 
> 赞同：1
> 
> 时间：2013-02-25T13:25:53.510
> 
> 标签：joomla, popup, lightbox, joomla-module

请让我知道，如果有任何扩展可用于在弹出窗口内显示模块，并且弹出窗口应在用户登录后加载。

情景：

*   我有民意调查模块，用户登录网站后应该会弹出一次。
*   我需要通过 id 或模块位置从后端指定模块。
*   用户登录网站后将进行投票，并在投票后关闭弹出窗口。
*   如果是非商业扩展，那就太好了。

请就此向我提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:23:55.933

尝试这个，

您可以在弹出窗口或任何其他页面（也可以在 ajax 页面中）加载任何模块。通过使用以下代码

```
 $document = &JFactory::getDocument();
 $renderer = $document->loadRenderer('module');

 $Module = &JModuleHelper::getModule('mod_fmDataGrid');

 $Params = "param1=bruno\n\rparam2=chris";//This will only required when you pass module params through code
 $Module->params = $Params;
 echo $renderer->render($Module); 
```

您可以创建弹出窗口，生成弹出内容的部分也可以尝试上面的代码。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:20:34.230

最好的方法是为您的模块创建一个覆盖（请参阅[http://docs.joomla.org/Layout_Overrides_in_Joomla_2.5](http://docs.joomla.org/Layout_Overrides_in_Joomla_2.5)）并将其包装在模式中，然后将其设置为仅注册。如果您的网站使用 Twitter Bootstrap（如今大多数商业 Joomla 模板都使用），您可以在此处使用标记：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

不过，您需要一些 HTML 和 PHP 的基本知识来实现​​这一点。

# actionscript-3 - ActionScript 3.0 gotoAndStop 和 gotoAndPlay

> ID：15068066
> 
> 赞同：0
> 
> 时间：2013-02-25T13:25:54.030
> 
> 标签：actionscript-3, frame, movieclip

我有一个 Flash 动作脚本 3 问题。这是我的代码

```
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.ui.Mouse;

PlayButton.addEventListener(MouseEvent.CLICK, playButtonClick);
PauseButton.addEventListener(MouseEvent.CLICK, pauseButtonClick);

function playButtonClick(event_object:MouseEvent){
    var currFrameP = MovieClip(root).currentFrame;
    trace("Frame play = " + currFrameP);
    MovieClip(root).StoryLine1.gotoAndPlay(currFrameP);
}

function pauseButtonClick(event_object:MouseEvent){
    var currFrameS = MovieClip(root).currentFrame;
    trace("Frame pause = " + currFrameS);
    MovieClip(root).StoryLine1.gotoAndStop(currFrameS);
} 
```

当我按下暂停按钮时，电影停止......但仍然在后台运行。我为什么这么说？因为当我点击播放时，电影不会恢复暂停的位置。当电影还在播放时，他将继续。有人可以告诉我如何像正常行为一样暂停和恢复电影。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:39:51.637

为什么需要让当前帧停止或播放？你应该能够调用 play() 等。

我的意思是，如果剪辑已经在 currentFrame（它是），那么没有必要去那个帧开始播放。

# macos - 使用emmet时在sublime中重新定义ctrl-d

> ID：15068074
> 
> 赞同：3
> 
> 时间：2013-02-25T13:26:12.623
> 
> 标签：macos, sublimetext2, sublimetext3

当我在 Sublime Text 中安装 Emmet 包时，它会更改`ctrl`+的定义`d`。我希望`ctrl`+`d`具有默认行为，即删除光标前面的字符。我应该在下面填写什么？

下面当我为 Emmet 包定义我的用户键绑定时？

```
{ "keys": ["ctrl+d"], "command": "???" }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:56:43.100

尝试

```
{ "keys": ["ctrl+d"], "command": "right_delete" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T09:01:57.207

根据[Emmet README](https://github.com/sergeche/emmet-sublime/blob/master/README.md#overriding-keyboard-shortcuts)，禁用快捷方式的正确方法是

> 如果您对默认键盘映射不满意，可以使用 Emmet.sublime-settings 文件的 disabled_keymap_actions 首选项禁用单个键盘快捷键。

`Ctrl`+的键`D`是“balance_outward”。设置应如下所示：

```
{"disabled_keymap_actions": "balance_outward"} 
```

`Default (<os>).sublime-keymap`您可以通过打开Emmet的归属并查看来找到不同命令的所有键`args: action`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T13:33:41.443

快速而肮脏的解决方法是删除emmet 默认键绑定文件上的`ctrl`+定义。`d`

不过，我正在寻找更清洁的解决方案。

# objective-c - Doxygen 命令@file 中断了类描述部分的生成

> ID：15068077
> 
> 赞同：1
> 
> 时间：2013-02-25T13:26:14.077
> 
> 标签：objective-c, doxygen

命令 @file 会中断 doxygen 生成的 HTML 文档中描述部分的生成。

```
/**
 @file Class.h

 @brief Brief desc.

 Description text.
*/ 
```

在 Class.h 的输出中，没有生成描述部分。因此文本“Brief desc”和“Description text”不会出现。

```
/**
 Class.h

 @brief Brief desc.

 Description text.
*/ 
```

将按预期生成描述部分。

因为我想记录全局 typdef，所以 @file 命令是必要的。

配置中是否有任何参数可以强制生成描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:26:14.077

找到丢失的信息。

通过添加@file commmand - 正如文档中提到的那样[http://www.doxygen.nl/manual/commands.html#cmdfile](http://www.doxygen.nl/manual/commands.html#cmdfile) - 文件被记录在案。

这意味着 doxygen 将在“文件”选项卡中为该头文件创建一个额外的文档，并在通常的“类”选项卡中创建一个。

如果没有@file，只会生成“类”中的文件。在这种情况下（没有 @file），初始注释和 Objective-Cs @interface 上方的注释将被解释为 CLASS 的组合描述。

如果存在@file 命令，则初始注释将用于文件描述 - 该文件位于“文件”选项卡中。

仅当您直接在 @interface 行上方提供注释时，该类的描述才可用。

# visual-studio - 如何将 .NET CF 更新到我的 WinCE 设备中？

> ID：15068085
> 
> 赞同：2
> 
> 时间：2013-02-25T13:26:36.693
> 
> 标签：visual-studio, windows-ce, motorola, smart-device, smart-device-framework

我正在为使用 WinCE 5.0 的摩托罗拉 MC3000 开发应用程序。

看来机器正在使用.NET CF 2.0，我只想将它更新到.NET CF 3.5，但我不知道如何在机器上进行操作。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:41:59.233

.NET Compact Framework 并排安装。您可以简单地将 CAB 文件复制到设备并运行它。在您的 PC 上，您可以在`%ProgramFiles%\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\NETCFv35.wce.armv4.cab`.

如果您需要在冷启动时重新安装它（用户按下 1 + 9 + 电源，或者将电池放置太久），您将需要编写一些代码来重新安装它。请参阅[wceload](http://msdn.microsoft.com/en-us/library/ms933760.aspx)的文档以进行静默安装，并参阅摩托罗拉的[StartUpCtl](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=13481)以了解控制启动时运行顺序的方法。

摩托罗拉的一些 Windows Mobile 设备进行了更新，以允许更新 .NET Compact Framework 的 ROM 版本——例如 MC70 从 1.0 到 2.0——但我不知道有任何更新可以将其替换为 3.5。

# vim - 带有 SPF-13 / csapprox 的 VIM 配色方案管理

> ID：15068092
> 
> 赞同：2
> 
> 时间：2013-02-25T13:27:01.967
> 
> 标签：vim, vim-plugin, color-scheme, spf13vim

我正在使用 spf-13 VIM 设置[1](https://i.stack.imgur.com/KmdKW.png)。我对配色方案有点困惑。似乎他们只是获取调用 :hi set color 命令的文件，并且由于并非所有颜色都设置在所有颜色方案中，因此您实际获得的颜色取决于您调用颜色方案的顺序。

这是我启动时的默认配色方案。.vimrc 声称它是日晒的， :colo 也声称它是日晒的。

![在启动 vim](../Images/b287f6a465282ee0d0e84ad3098fbed0.png)

然而，它并没有真正完全日晒。背景颜色不同。我其实很喜欢背景颜色。但是，偶数/奇数白色标签无法使用。

现在设置：

```
:colorscheme solarized 
```

![现在背景是蓝色的](../Images/86fc1d32e06dfd3262d449381953f6f5.png)

```
:colorscheme django 
```

![将其设置为其他内容](../Images/a0e90dc13ed2b281535cb728daf066f4.png)

```
:colorscheme solarized 
```

![再曝晒](../Images/a3490fd6d4d3f0e9922c8c5ad9a53a6e.png)

所以现在它继承了 django 颜色方案的某些设置。

我将此添加到我的 ~/.vimrc.local 试图在启动后破解颜色方案

```
hi IndentGuidesOdd ctermbg=235
hi IndentGuidesEven ctermbg=236 
```

但这些只是稍后被覆盖。是 csapprox 这样做吗？

csapprox 也在我的工作目录中留下了颜色方案文件。我的项目目录中有“django”和“solarized”文件。

老实说，我不确定我是否需要 csapprox，也许没有它这些方案可以工作。但是使用 spf-13 仍然很难弄清楚如何正确删除捆绑包。

[1](https://i.stack.imgur.com/KmdKW.png) [https://github.com/spf13/spf13-vim](https://github.com/spf13/spf13-vim)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:27:37.297

配色方案应同时具有`:hi clear`和`:syntax reset`在顶部；这清除了前一个方案的定义，并应避免继承前一个方案的任何内容。

如果颜色方案不提供高颜色定义，您将从*CSApprox中受益；*查看该方案的文档，或检查它是否包含任何`cterm=NNN`定义。

我认为*CSApprox*支持动态颜色方案更改，但没有亲自尝试过；我一直坚持一种配色方案。您可以尝试使用`:CSApproxSnapshot`命令手动转换颜色方案一次；然后，您在运行时根本不需要该插件。

*最后，像spf-13*这样的Vim“发行版”通过快速安装和开箱即用的设置吸引你，但你付出的代价是增加了复杂性（你需要了解 Vim 的运行时加载方案和发行版的任意约定）和不灵活（分发可能使某些事情变得更容易，但其他事情变得非常困难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:05:45.483

它的[https://github.com/nathanaelkane/vim-indent-guides](https://github.com/nathanaelkane/vim-indent-guides)正在创建白色列着色。每当打开新缓冲区时，它都会这样做。

> 目前终端 Vim 只有基本的支持。这意味着颜色不会根据您的颜色方案自动计算。

所以它不是 csapprox 做的。

# android - 通过 ContentProvider 完成操作的可靠方法

> ID：15068095
> 
> 赞同：3
> 
> 时间：2013-02-25T13:27:19.860
> 
> 标签：android, android-contentprovider

`Activity`我想在暂停时保存一些数据。我正在使用我自己的`ContentProvider`支持 SQLite 数据库。

假设执行实际保存的方法如下所示：

```
public void saveData() {
    //perform operations over ContentProvider in current thread
} 
```

**问题是**`onPause`：在（使用新线程）中调用这个方法是否安全？

```
public void onPause() {
    super.onPause();

    new Thread(new Runnable() {

        public void run() {
            saveData();
        }
    }).start();
} 
```

或者我应该开始一个新`Service`的，将在后台完成这项工作？或者也许有更可靠的方法来确保数据被保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:00:51.757

您可以尝试使用绑定的后台服务（最好将 Content Provider 包装为一个）。这将使其独立于 Activity 状态，只需随时向您的 Provider Service 发布获取/保存请求即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:44:50.730

这是安全的，但我建议不要为此目的使用 onPause() 。它调用得太频繁了（请参阅活动生命周期文档）。将其移至 onStop()。

# javascript - 盒子里的 Ajax 请求

> ID：15068097
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:27:21.920
> 
> 标签：javascript, jquery, ajax

我正在使用 jquery 构建一个响应框（ajax）。

使用 ajax 调用发送请求并等待 json 响应并使用响应并显示一个信息框。

返回的 JSON：

```
$(document).ready(function(){
    // disable the form submit
    e.preventDefault();
    //Button click event
    $("#operation").click(function(e){
        //Disabling button
        $("#operation").attr('disabled', 'disabled');
        // get the input data
        var input = $("#nameImport").val();
        //Perform POST for triggering long running operation
        $.get('update', {
            name: input
        }, function(data){
            onSuccessImport(data);
        }, "json");
    });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:32:40.453

我看到的唯一问题是`e.preventDefault()`应该进入`click`处理程序内部..

```
//Button click event
$("#operation").click(function(e){
    // disable the form submit
    e.preventDefault(); 
```

* * *

一个更通用的评论是你应该`.prop`用来摆弄 DOM 属性（*而不是`.attr`*）
所以使用

```
$("#operation").prop('disabled', true); 
```

# c++ - 在 C++ 中的一个输入中读取多个命令

> ID：15068099
> 
> 赞同：0
> 
> 时间：2013-02-25T13:27:27.003
> 
> 标签：c++, iostream

这是我所拥有的，请告诉我是否必须发布所有内容。我想要的是，如果他们键入“tcc fcc (enter)”，我希望 cube.rotateTopNeg90() 然后 cube.rotateFrontNeg90() 在打印的立方体上工作。编辑：对不起，这是我上面的问题，现在命令一次只能工作一个（即：'tcc'（输入）'fcc'（输入）......）我希望它是这样的（'tcc ' 'fcc' 'tcc' 'tcc'....（重复多次）（输入））然后每个都被连续处理。这就是为什么我不能只使用cin。我之前在[这里](https://stackoverflow.com/questions/15050388/reading-multiple-commands-from-one-line-of-input-in-c)问过这个问题，但我真的不知道该怎么做。

```
class RubiksCube
{
    public:

        RubiksCube::RubiksCube() { /*stuff here*/  }

        void display() { /*prints the cube unfolded here*/  }

        void rotateTopNeg90() { /*moves top of the cube counterclockwise*/ }

        void RubiksCube::rotateFrontNeg90() { /*moves front counterclockwise*/ }
}

//main
int main(int argc, char *argv[])
{   
    RubiksCube cube;
    string s;  
    srand(time(0));
    while (1)
    { 
        string rotateTopNeg90 = "tcc";
        string rotateFrontNeg90 = "fcc";
        cube.display();
        cout << "COMMAND:";
        getline(cin,s);
        istringstream stream(s);

        if (s == rotateTopNeg90 )
            cube.rotateTopNeg90();

        if ( s == rotateFrontNeg90 )
            cube.rotateFrontNeg90();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:37:21.283

我认为以下内容可以解决您的问题；由于您的操作以每个令牌为基础，因此您`std::getline`正在接受比您想要的更多的整条生产线 。对空白进行标记，因此 op>> 更适合您的应用程序。`std::cin``std::cin`

```
const std::string rotateTopNeg90   ="tcc",
                  rotateFrontNeg90 ="fcc";

while(std::cin >> s) {
   if (s == rotateTopNeg90 )
        cube.rotateTopNeg90();
   else if ( s == rotateFrontNeg90 )
       cube.rotateFrontNeg90();
   cube.display();
} 
```

# android - 使用 HTTP URLConnection 发布到服务器时发生 java.io.EoFException

> ID：15068103
> 
> 赞同：1
> 
> 时间：2013-02-25T13:28:01.640
> 
> 标签：android, http-post

**使用 HTTP URLCONnection 发布到服务器时发生**java.io.EoFException 。**它随机发生。为什么会发生此错误。我关闭了 outStream 并刷新了它。但不起作用。**

 ****我的代码：**

```
// Post request on server
public static String post(String serverUrl, Map<String, String> params) throws IOException {

InputStream is = null;
OutputStream out = null;

int len = 1000;// Only display the first 500 characters of the retrieved web page content.

try {
    url = new URL(serverUrl);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

StringBuilder bodyBuilder = new StringBuilder();

iterator = params.entrySet().iterator();

while (iterator.hasNext()) {
    Entry<String, String> param = iterator.next();
    bodyBuilder.append(param.getKey()).append("=")
            .append(param.getValue());

    if (iterator.hasNext()) {
        bodyBuilder.append("&");
    }
}

String body = bodyBuilder.toString();

byte[] bytes = body.getBytes();

String responseMessage ="";
HttpURLConnection conn = null;
String responseAsString ="";
try {
    conn = (HttpURLConnection) url.openConnection();
    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setUseCaches(false);
    conn.setFixedLengthStreamingMode(bytes.length);
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");

    out = conn.getOutputStream();
    out.write(bytes);
    out.flush();

    int responseCode = conn.getResponseCode();

    responseMessage = conn.getResponseMessage();

    if (responseCode==200) {
           is = conn.getInputStream();
            // Convert the InputStream into a string
           responseAsString = readIt(is, len);
           responseAsString=responseAsString.trim();
    }
    else
    {
        throw new IOException("post failed with error "
                + conn.getResponseMessage());
    }
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (conn != null) {
        conn.disconnect();
    }
    if (is != null) {
        is.close();
    } 
    if (out != null) {
        out.close();
    } 
}
return responseAsString;
}

public static String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
    Reader reader = null;
    reader = new InputStreamReader(stream, "UTF-8");        
    char[] buffer = new char[len];
    reader.read(buffer);
    return new String(buffer);
} 
```**

# java - 在 Java 中导出函数对象的最佳实践是什么？

> ID：15068106
> 
> 赞同：6
> 
> 时间：2013-02-25T13:28:07.240
> 
> 标签：java

在 Java中创建`function objects`（导出适用于其他对象的单个方法的无状态对象）的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:29:47.313

看看[即将到来的 Java 8 函数式接口很有启发性](http://datumedge.blogspot.com/2012/06/java-8-lambdas.html)

> Java 8 类库有一个新包 java.util.functions，其中包含几个新的函数接口。其中许多可以与 Collections API 一起使用。

如果您遵循此处展示的模式，您将拥有一个功能接口（一个支持一种方法的接口）和一个没有成员的实现。您的函数对象不应在方法参数上调用任何可能改变其状态（即表现出副作用）的方法。不幸的是，你不能强制执行——你必须依赖惯例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:30:16.993

Java 是一种面向对象的编程语言，所以使用策略设计模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:34:39.697

Java8 应该有 lambdas 来简化函数式接口实现的创建。在 Java8 之前，您可以查看 guava 库提供的内容：[Functional Explained](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)

这是文档的摘录：

> Guava 提供了两个基本的“函数式”接口： Function，它具有单一的方法 B apply(A input)。通常期望 Function 的实例是引用透明的——没有副作用——并且与 equals 一致，即 a.equals(b) 意味着 function.apply(a).equals(function.apply(b) ）。谓词，具有单一方法 boolean apply(T input)。Predicate 的实例通常被认为是无副作用的并且与 equals 一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:44:45.013

好的评论后，这是一个答案：没有简单/方便的方法来传递函数。

大多数时候，您将声明一个实现接口的内部类，例如`Comparator`： http: [//docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

函数不能作为参数传递的事实产生了许多所谓的设计模式，在这些模式中，您传递声明具有这些函数的对象类/接口。

正如其他人所提到的，使用 Java 8 生活会变得更轻松一些。

# javascript - 使用 javascript 将十进制时间转换为 hh:mm 格式

> ID：15068108
> 
> 赞同：0
> 
> 时间：2013-02-25T13:28:14.797
> 
> 标签：javascript, html, webforms

我有一个脚本，它返回一个十进制值来表示时间。我需要将十进制时间值转换为 hh:mm（即：90 分钟应表示为 1:30。附件是我当前的脚本。

```
function Convert() {
    var minutes = document.getElementById("sum").value;
    var hours = minutes / 60;
    document.getElementById('total').value = hours;
    document.getElementById('sum').value = minutes;

    var minutes = document.getElementById("sum_1").value;
    var hours = minutes / 60;
    document.getElementById('total_1').value = hours;
    document.getElementById('sum_1').value = minutes;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:36:48.543

我只能假设您忘记[`Math.floor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor)了`hours`并在 上应用[模数 60](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29)以`minutes`获得您期望的结果。

# android - 在android的EditView中访问系统日期

> ID：15068109
> 
> 赞同：0
> 
> 时间：2013-02-25T13:28:18.300
> 
> 标签：android, xml, android-layout, editview

我必须访问当前系统并在 android 的 EditView 中显示。我正在使用此代码。请帮助我。

```
EditText editText = (EditText) findViewById( R.id.your_edittext_id );

SimpleDateFormat sdf = new SimpleDateFormat( "yyyy/MM/dd" ); 
editText.setText( sdf.format( new Date() )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:31:09.310

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd");
                Date date = fmt.parse(Your date);
                editText.setText( date.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:33:47.967

如果要显示实际系统日期，请使用 Calendar 静态实例：

```
 Calendar c;
    c = Calendar.getInstance(TimeZone.getDefault());

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
    Date d = c.getTime();
    String date = sdf.format(d); 
```

# android - 如何从 Android 设备获取 GMT（如 GMT+7:00）的时区偏移量？

> ID：15068113
> 
> 赞同：61
> 
> 时间：2013-02-25T13:28:49.250
> 
> 标签：android, timezone

我正在`timezone`使用此代码获取 android 设备

```
TimeZone tz = TimeZone.getDefault();
String current_Time_Zone = (TimeZone.getTimeZone(tz.getID()).getDisplayName(
                false, TimeZone.SHORT)) 
```

但它总是`timezone`像“ ”一样返回我，但我想像这样`IST`获得时区`GMT``GMT+7:00.`

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-25T14:07:14.243

这可能会让您了解如何根据自己的喜好实现它：

```
Calendar mCalendar = new GregorianCalendar();  
TimeZone mTimeZone = mCalendar.getTimeZone();  
int mGMTOffset = mTimeZone.getRawOffset();  
System.out.printf("GMT offset is %s hours", TimeUnit.HOURS.convert(mGMTOffset, TimeUnit.MILLISECONDS)); 
```

（TimeUnit 是“java.util.concurrent.TimeUnit”）

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-02-26T09:00:48.923

此代码返回我 GMT 偏移量。

```
Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"),
                Locale.getDefault());
Date currentLocalTime = calendar.getTime();
DateFormat date = new SimpleDateFormat("Z");
String localTime = date.format(currentLocalTime); 
```

它返回时区偏移量，如下所示：**+0530**

如果我们在下面使用 SimpleDateFormat

```
DateFormat date = new SimpleDateFormat("z",Locale.getDefault());
String localTime = date.format(currentLocalTime); 
```

它返回时区偏移量，如下所示：**GMT+05:30**

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-02-24T11:52:18.907

这是以 **GMT+05:30**这种格式获取时区偏移的解决方案

```
public String getCurrentTimezoneOffset() {

    TimeZone tz = TimeZone.getDefault();  
    Calendar cal = GregorianCalendar.getInstance(tz);
    int offsetInMillis = tz.getOffset(cal.getTimeInMillis());

    String offset = String.format("%02d:%02d", Math.abs(offsetInMillis / 3600000), Math.abs((offsetInMillis / 60000) % 60));
    offset = "GMT"+(offsetInMillis >= 0 ? "+" : "-") + offset;

    return offset;
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-11-16T19:16:37.820

```
public static String timeZone()
{
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"), Locale.getDefault());
    String   timeZone = new SimpleDateFormat("Z").format(calendar.getTime());
    return timeZone.substring(0, 3) + ":"+ timeZone.substring(3, 5);
} 
```

返回像 **+03:30**

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-03-21T17:57:52.950

一种解决方案是使用如下`Z`符号：

```
new SimpleDateFormat(pattern, Locale.getDefault()).format(System.currentTimeMillis()); 
```

`pattern`可能在哪里：

*   Z/ZZ/ZZZ：-0800
*   ZZZZ: GMT-08:00
*   ZZZZZ：-08:00

完整参考这里：

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-09-08T06:47:33.083

这就是 Google 建议获取 TimezoneOffset 的方式。

```
Calendar calendar = Calendar.getInstance(Locale.getDefault());
int offset = -(calendar.get(Calendar.ZONE_OFFSET) + calendar.get(Calendar.DST_OFFSET)) / (60 * 1000) 
```

[https://developer.android.com/reference/java/util/Date#getTimezoneOffset()](https://developer.android.com/reference/java/util/Date#getTimezoneOffset())

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-05-21T22:29:30.423

```
public static String getCurrentTimezoneOffset() {

    TimeZone tz = TimeZone.getDefault();  
    Calendar cal = GregorianCalendar.getInstance(tz);
    int offsetInMillis = tz.getOffset(cal.getTimeInMillis());

    String offset = String.format("%02d:%02d", Math.abs(offsetInMillis / 3600000), Math.abs((offsetInMillis / 60000) % 60));
    offset = (offsetInMillis >= 0 ? "+" : "-") + offset;

    return offset;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-07-31T12:09:36.717

```
 TimeZone tz = TimeZone.getDefault();  
Calendar cal = GregorianCalendar.getInstance(tz);
int offsetInMillis = tz.getOffset(cal.getTimeInMillis());

String offset = String.format("%02d:%02d", Math.abs(offsetInMillis / 3600000), Math.abs((offsetInMillis / 60000) % 60));
offset = (offsetInMillis >= 0 ? "+" : "-") + offset; 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-08-22T15:17:19.253

```
TimeZone timeZone = TimeZone.getDefault();
String timeZoneInGMTFormat = timeZone.getDisplayName(false,TimeZone.SHORT); 
```

输出：GMT+5:30

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-08-11T13:26:05.883

获得时区偏移的另一种解决方案：

```
TimeZone tz = TimeZone.getDefault();
String current_Time_Zone = getGmtOffsetString(tz.getRawOffset());

public static String getGmtOffsetString(int offsetMillis) {
    int offsetMinutes = offsetMillis / 60000;
    char sign = '+';
    if (offsetMinutes < 0) {
        sign = '-';
        offsetMinutes = -offsetMinutes;
    }
    return String.format("GMT%c%02d:%02d", sign, offsetMinutes/60, offsetMinutes % 60);
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-01-13T10:28:20.313

如果有人正在寻找如何将 GMT 表示为表示小时偏移量的浮点数
（例如“GMT-0530”到 -5.5），您可以使用以下命令：

```
Calendar calendar = new GregorianCalendar();
TimeZone timeZone = calendar.getTimeZone();
int offset = timeZone.getRawOffset();
long hours = TimeUnit.MILLISECONDS.toHours(offset);
float minutes = (float)TimeUnit.MILLISECONDS.toMinutes(offset - TimeUnit.HOURS.toMillis(hours)) / MINUTES_IN_HOUR;
float gmt = hours + minutes; 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-04-21T02:28:00.123

你可以这样做：

```
 TimeZone tz = TimeZone.getDefault();
    int offset = tz.getRawOffset();

    String timeZone = String.format("%s%02d%02d", offset >= 0 ? "+" : "-", offset / 3600000, (offset / 60000) % 60); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-07-22T11:31:05.280

通常，您无法将亚洲/加尔各答等时区转换为 +05:30 或 +07:00 等 GMT 偏移量。顾名思义，时区是地球上的一个地方，包括那个地方的人们使用的历史、现在和已知未来的 UTC 偏移量（现在我们可以将 GMT 和 UTC 视为同义词，严格来说它们不是） . 例如，亚洲/加尔各答自 1945 年以来一直处于偏移 +05:30。在 1941 年至 1945 年期间，它处于 +06:30，而在此之前为 +05:53:20（是的，以秒为精度）。许多其他时区有夏令时（夏令时，DST），并且每年两次更改它们的偏移量。

不过，给定一个时间点，我们可以针对该特定时间点进行翻译。我想提供这样做的现代方式。

## java.time 和 ThreeTenABP

```
 ZoneId zone = ZoneId.of("Asia/Kolkata");

    ZoneOffset offsetIn1944 = LocalDateTime.of(1944, Month.JANUARY, 1, 0, 0)
            .atZone(zone)
            .getOffset();
    System.out.println("Offset in 1944: " + offsetIn1944);

    ZoneOffset offsetToday = OffsetDateTime.now(zone)
            .getOffset();
    System.out.println("Offset now: " + offsetToday); 
```

刚才运行时的输出是：

> ```
> Offset in 1944: +06:30
> Offset now: +05:30 
> ```

对于默认时区设置`zone`为`ZoneId.systemDefault()`.

要使用文本格式化偏移量，请在模式中`GMT`使用带有`OOOO`（四个大写字母 O）的格式化程序：

```
 DateTimeFormatter offsetFormatter = DateTimeFormatter.ofPattern("OOOO");
    System.out.println(offsetFormatter.format(offsetToday)); 
```

> 格林威治标准时间+05:30

我推荐并在我的代码中使用 java.time，这是现代 Java 日期和时间 API。许多其他答案中使用的`TimeZone`、`Calendar`、`Date`和`SimpleDateFormat`类`DateFormat`设计不佳，现在早已过时，所以我的建议是避免所有这些。

## 问题：我可以在 Android 上使用 java.time 吗？

是的，java.time 在较旧和较新的 Android 设备上运行良好。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在 Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-02-25T13:36:03.510

```
TimeZone tz = TimeZone.getDefault();  
String gmt1=TimeZone.getTimeZone(tz.getID())
      .getDisplayName(false,TimeZone.SHORT);  
String gmt2=TimeZone.getTimeZone(tz.getID())
      .getDisplayName(false,TimeZone.LONG); Log.d("Tag","TimeZone : "+gmt1+"\t"+gmt2); 
```

看看这是否有帮助:)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-05-20T23:52:07.990

我在 Java8（非 Android）中使用`ZoneDateTime`该类偶然发现了一个简单的解决方案。可能还有其他实现该`TemporalAccessor`接口的类，但我还没有找到它们。据我所知，这不适用于标准`Date`、、和类。`DateTime``LocalDateTime``Calender`

```
 ZoneOffset myOffset = ZonedDateTime.now().getOffset();
    ZoneOffset myOffset2 = ZoneOffset.from(ZonedDateTime.now());
    log.info("ZoneOffset is " + myOffset.getId());  // should print "+HH:MM"
    log.info("ZoneOffset2 is " + myOffset2.getId());  // should print "+HH:MM" 
```

这个解决方案的好处是它避免了很多模数学、字符串生成和解析。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-07-22T11:11:20.637

您可以从此处从此功能获取自定义 GMT 时间

```
 public static String getCurrentDate() {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy MM dd hh:mm a zzz");
        Date date = new Date();
        sdf.setTimeZone(TimeZone.getTimeZone("GMT+6:00"));
        return sdf.format(date);
    } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-09-17T19:28:35.857

我也一直在研究这个并试图弄清楚如何应用时区和 DST。这是我的代码。

```
 public long applyGMTOffsetDST(long time) {
    // Works out adjustments for timezone and daylight saving time

    Calendar mCalendar = new GregorianCalendar();  
    TimeZone mTimeZone = mCalendar.getTimeZone();  
    boolean dstBool = mTimeZone.getDefault().inDaylightTime( new Date() );
    // add an hour if DST active

    if (dstBool == true) {
        time = time + secondsPerHour;
    }
    // add offest hours
    int mGMTOffset = mTimeZone.getRawOffset();

    if (mGMTOffset > 0) {
        long offsetSeconds = secondsPerHour * mGMTOffset;
        time = time + offsetSeconds;
    }

    return time;
} 
```

这似乎可行，但有没有更好的方法来获取设备的实际时间，这代表对用户有意义且准确的时间？

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-06-19T07:20:55.317

添加 dst 偏移量将解决此问题：

```
 int offsetInMillis = TimeZone.getDefault().getRawOffset()+TimeZone.getDefault().getDSTSavings();
    String offset = String.format("%02d:%02d", Math.abs(offsetInMillis / 3600000), Math.abs((offsetInMillis / 60000) % 60));
    offset = (offsetInMillis >= 0 ? "+" : "-") + offset;
    return offset; 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-06-13T19:07:48.257

使用此代码（**选项 1**）：

```
 //Opt 1
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"),
            Locale.getDefault());
    Date currentLocalTime = calendar.getTime();
    DateFormat date = new SimpleDateFormat("Z", Locale.getDefault());
    String localTime = date.format(currentLocalTime);
    String finalTimezone = String.format("GMT%s:%s", localTime.substring(0, 3), localTime.substring(3));
    Log.d(TAG, "timezone 1: " + finalTimezone);

    //Opt 2
    date = new SimpleDateFormat("z",Locale.getDefault());
    localTime = date.format(currentLocalTime);
    Log.d(TAG, "timezone 2: "+localTime);

    //Opt 3
    TimeZone tz = TimeZone.getDefault();
    Log.d(TAG, "timezone 3: "+tz.getDisplayName(true, TimeZone.SHORT));
    // 
```

如果我在洛杉矶（GTM-07:00 太平洋标准时间），则输出为：

```
timezone 1: GMT-07:00
timezone 2: PDT
timezone 3: PDT 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-07-22T09:31:38.933

要获取带有偏移量的日期时间，`2019-07-22T13:39:27.397+05:00` 请尝试遵循 Kotlin 代码：

```
fun getDateTimeForApiAsString() : String{
    val date = SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX", 
                   Locale.getDefault())
    return date.format(Date())
} 
```

输出格式：

```
2019-07-22T13:39:27.397+05:00 //for Pakistan 
```

如果您想要其他类似的格式替换模式`SimpleDateFormat`如下：

```
"yyyy.MM.dd G 'at' HH:mm:ss z"  //Output Format: 2001.07.04 AD at 12:08:56 PDT
"EEE, MMM d, ''yy"  //Output Format:    Wed, Jul 4, '01
"h:mm a"      //Output Format: 12:08 PM
"hh 'o''clock' a, zzzz"   //Output Format:  12 o'clock PM, Pacific Daylight Time
"K:mm a, z"  //Output Format:   0:08 PM, PDT
"yyyyy.MMMMM.dd GGG hh:mm aaa"  //Output Format:    02001.July.04 AD 12:08 PM
"EEE, d MMM yyyy HH:mm:ss Z"  //Output Format:  Wed, 4 Jul 2001 12:08:56 -0700
"yyMMddHHmmssZ"  //Output Format:   010704120856-0700
"yyyy-MM-dd'T'HH:mm:ss.SSSZ"  //Output Format:  2001-07-04T12:08:56.235-0700
"yyyy-MM-dd'T'HH:mm:ss.SSSXXX"  //Output Format:    2001-07-04T12:08:56.235-07:00
"YYYY-'W'ww-u"  //Output Format:    2001-W27-3 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-03-16T01:29:37.583

我有一个正确的方法：</p>

```
public static String getCurrentTimeZone() {
    TimeZone timeZone = TimeZone.getDefault();
    return createGmtOffsetString(true, true, timeZone.getRawOffset());
}

public static String createGmtOffsetString(boolean includeGmt,
                                           boolean includeMinuteSeparator, int offsetMillis) {
    int offsetMinutes = offsetMillis / 60000;
    char sign = '+';
    if (offsetMinutes < 0) {
        sign = '-';
        offsetMinutes = -offsetMinutes;
    }
    StringBuilder builder = new StringBuilder(9);
    if (includeGmt) {
        builder.append("GMT");
    }
    builder.append(sign);
    appendNumber(builder, 2, offsetMinutes / 60);
    if (includeMinuteSeparator) {
        builder.append(':');
    }
    appendNumber(builder, 2, offsetMinutes % 60);
    return builder.toString();
}

private static void appendNumber(StringBuilder builder, int count, int value) {
    String string = Integer.toString(value);
    for (int i = 0; i < count - string.length(); i++) {
        builder.append('0');
    }
    builder.append(string);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-03-03T17:48:33.437

您可以获得格式为 +01:00 的时区偏移量，但有以下两个

1.  对于 API 级别 24+，请使用**XXX**
2.  对于 API 级别 24 或更低，请使用**ZZZZZ**

得到这样的结果：**2011-12-03T10:15:30+01:00**

你所要做的 ：

***对于 API 级别 24+*** ，请使用“ **yyyy-MM-dd'T'HH:mm:ss.SSSXXX** ”

***对于低于 24 的 API 级别，请***使用“ **yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ** ”

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-03-26T10:55:00.427

我为自己找到的最佳解决方案

```
SimpleDateFormat("XXX", Locale.getDefault()).format(System.currentTimeMillis()) 
```

> +03:00

您可以尝试更改模式（“xxx”字符串）以获得您想要的结果，例如：

```
SimpleDateFormat("XX", Locale.getDefault()).format(System.currentTimeMillis()) 
```

> +0300

```
SimpleDateFormat("X", Locale.getDefault()).format(System.currentTimeMillis()) 
```

> +03

图案也可以应用其他字母，结果会有所不同

```
SimpleDateFormat("Z", Locale.getDefault()).format(System.currentTimeMillis()) 
```

> +0300

有关此的更多信息，您可以在此处找到：[https ://developer.android.com/reference/java/text/SimpleDateFormat.html](https://developer.android.com/reference/java/text/SimpleDateFormat.html)

# ajax - YUI + Ajax 使用 FOR 循环获取 Click 事件

> ID：15068114
> 
> 赞同：0
> 
> 时间：2013-02-25T13:28:49.473
> 
> 标签：ajax, yui, moodle, yui3

我正在尝试在单击事件上显示 Mysql 查询结果。结果可能会有所不同，具体取决于单击的链接。所以我想在我的**点击**函数中添加一个 FOR 循环。看来我的代码错了：

```
<script src="http://yui.yahooapis.com/3.8.1/build/yui/yui-min.js"></script>
<script>
YUI().use("node", function (Y) { 
  for (var i=1; i<4; i++) { 
    Y.one("#link" + i).on('click', function ajaxFunction(i){

    var id = document.getElementById("link" + i).className;
    Y.io('query.php',
       {
  type: "GET",
  data: "id="+id,
  success: function (msg) {
        Y.one("#display_div" + i).setHTML(msg);
}
    });

        });
    };
});
</script>

<a href="#" id="link" class="(Test 1)"> Maths</a>
<div id="display_div1"></div>

<a href="#" id="link" class="FAQ"> Anglais</a>
<div id="display_div2"></div> 
```

**这段代码是我的工作 jQuery 代码的 YUI3 翻译：**

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script languid="javascript" type="text/javascript">
$(document).ready(function() { 
  for (var i=1; i<4; i++) { 
    $("#link" + i).click(makeDisplayCallback(i));
  }
});
function makeDisplayCallback(j) {
  return function() {
    ajaxFunction(j);
  };
}
function ajaxFunction(j){
var id = document.getElementById("link" + j).className;
$.ajax(
   {
  type: "GET",
  url: "query.php",
  data: "id="+id,
  success: function (msg) {
        $("#thema" + j).html(msg);
}
   });
};

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:53:08.127

您遇到了一个关于引用如何在 JavaScript 中工作的经典示例。`success`调用回调时， 的值`i`始终为，`2`因为它已经更改为下一次迭代。您需要做的是将每个回调包装在另一个函数中，以便每个回调指向不同的`i`.

```
for (var i = 1; i < 3; i++) {
  Y.io(url, {
    on: {
      // on each iteration the success function is a different function
      success: (function (index) {
        return function (msg, result) {
          Y.one('#display_div' + index).setHTML(msg);
        };
      }(i)); // we pass it the current value of i
    }
  });
} 
```

# iphone - WeeApp 中的横向模式

> ID：15068129
> 
> 赞同：1
> 
> 时间：2013-02-25T13:29:24.487
> 
> 标签：iphone, ios, objective-c, jailbreak

我知道`UIDeviceOrientation`在 iOS 中有很多已解决的问题，但没有人为我工作。我想`Widget`在横向模式下制作一个居中的标签。

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
if (([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) ||
    ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight))
{
     d = 516; //my var to change the Position (The Value is just a test)
} 
```

由于某种原因，这对我不起作用......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:35:43.467

我今天才为我的小部件解决了这个问题。定义方法

```
- (void)willAnimateRotationToInterfaceOrientation:(int)arg1 
```

为您的 AppController。在里面，检查 arg1 对应于哪个方向

```
if (UIInterfaceOrientationIsLandscape(arg1)) {
    // you're in landscape mode
    float screenWidth = [UIScreen mainScreen].bounds.size.height;
}
else {
    // you're in portrait mode
    float screenWidth = [UIScreen mainScreen].bounds.size.width;
} 
```

[你可以在我的文件中看到](https://github.com/andrewmm/ncwunderground/blob/master/ammNCWundergroundController.m)我的实现。我通过查看[WeeFacebook](https://github.com/forensix/WeeFacebook2.0/blob/master/FacebookWeeApp/FacebookWeeApp.mm)的代码发现了这一点。

# php - 使用 html 按钮更改网站的语言

> ID：15068132
> 
> 赞同：7
> 
> 时间：2013-02-25T13:29:32.060
> 
> 标签：php, html, variables, button

在 PHP 中，我想在单击按钮时更改站点的语言（英语、德语等）。这是解决该问题的正确方法吗？

```
<?php 
  $language;
  if ($language == "en") {
    include("headerEn.php");
  } else {
    include("header.php");
  } 
?>
<a href="index.php"><?php $language = "en"; ?>
<img src="images/language/languageNO.png"></a>

<a href="index.php"><?php $language = "no"; ?>
<img src="images/language/languageEN.png"></a> 
```

更改网站语言并在用户返回时保持不变的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T13:32:01.317

你可以这样做

```
<a href="index.php?language=en">
<a href="index.php?language=no"> 
```

并获取语言并将它们存储在 cookie 中并根据 cookie 包含文件，例如

```
if ( !empty($_GET['language']) ) {
    $_COOKIE['language'] = $_GET['language'] === 'en' ? 'en' : 'nl';
} else {
    $_COOKIE['language'] = 'nl';
}
setcookie('language', $_COOKIE['language']); 
```

然后

```
if ( $_COOKIE['language'] == "en") {
   include("headerEn.php");
} else {
   include("header.php");
} ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:34:19.507

To give a solution without changing your approach, You can do like this.

```
<?php 
if(isset($_GET['language']))
  $language = $_GET['language'];
else
  $language = "";

if ($language == "en") {
   include("headerEn.php");
} else {
   include("header.php");
} ?>

<a href="index.php?language = en"><img src="images/language/languageNO.png">      </a>
<a href="index.php?language = no"><img src="images/language/languageEN.png"></a> 
```

If you want to keep the selection, you can store this value in **Database or Session.**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T13:35:29.693

It is always good to have a default value, so that you never end up being in a no-language site.

```
$language = $_REQUEST["language"];
$default_header="myheaderXXX.php";

switch ($language) {
    case "en":
      include("headerEn.php");
      break;

    case "no":
      include("header.php");
      break;

    default:
      include($default_header);
} 
```

And then create links like this:

```
<a href="index.php?language=en">
<a href="index.php?language=no"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:33:14.020

尝试将此`$language`值保存到**会话**变量。当页面重新加载时，检查会话变量是否设置。

如果设置使用`$language`

笔记：

```
$language = $_GET['language']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:33:22.863

您不能通过 html 更改 PHP 中的变量。PHP 是服务器端 HTML 是客户端端

您可以使用[GET 变量](http://www.w3schools.com/php/php_get.asp)来更改它。这是最简单的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T13:36:56.350

You can implement the same code like this . I have editted your code .

```
<?php 
$language; ?>
<?php if ($language == "en") : ?>
    <?php include("headerEn.php"); ?>
     <a href="index.php"><?php $language = "en"; ?><img src="images/language/languageNO.png"></a> 
<?php else: ?>
    <?php include("header.php"); ?>
     <a href="index.php"><?php $language = "no"; ?><img src="images/language/languageEN.png"></a>
<?php endif; ?> 
```

this will solve your problem .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-14T13:01:32.210

In this case I have tried use Session variables to store and define language. Every thing works until i turn on caching. When caching was enabled even reload page returns same language and user could not change language. So I consider to change language using AJAX request after clicking on language button (national flag)

# ios - 如何使用 segue 在情节提要场景之间传递信息？

> ID：15068133
> 
> 赞同：1
> 
> 时间：2013-02-25T13:29:32.233
> 
> 标签：ios, objective-c, ios6

我遵循了创建 2 个故事板场景[教程](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iOS_6%29#Creating_the_Storyboard_Example_Project)的教程，并且我知道如何使用以下代码将信息从场景 1 传递到场景 2：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    Scene2ViewController *destination = 
                  [segue destinationViewController];

    destination.labelText = @"Arrived from Scene 1";
} 
```

但是，我不清楚如何从场景 2（发送布尔值）返回信息，因为教程正在使用展开来避免创建场景 1 的新实例，并且我不能使用下面场景 1 上的方法来分配场景 2 中的任何内容：

```
 -(IBAction)returned:(UIStoryboardSegue *)segue {

Scene2ViewController *destination = 
                      [segue destinationViewController];
        if (destination.thisIsBooleanFromScene2){
       //do something

   }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:40:34.307

在您的`Scene2ViewController`标题中，您可以放置​​一个`@property`当前视图控制器，以便您可以访问其公共变量

所以在`Scene2ViewController.h`：

```
#import "YourPreviousViewController.h"

//add this to your @interface
@property (strong) YourPreviousViewController *parent; 
```

然后在你当前的 viewcontroller.m

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
Scene2ViewController *destination = [segue destinationViewController];
destination.parent = self;
} 
```

然后你可以运行你的`returned`方法，`Scene2ViewController`或者你可以操纵你当前视图控制器上的公共变量，即`parent`

编辑：我以前从未见过这样的返回方法，您可以只创建一个方法来设置当前视图控制器中所需的变量，然后`Scene2ViewController`您可以实现`- (void) viewWillDisappear { }`当您按回或转到另一个视图时将运行的方法

```
//Scene2ViewController.m
- (void) viewWillDisappear {  
[self.parent returnAndSetBool:someBool];

//or if myBoolean in the previous view controller is a public variable you can just go:
//self.parent.myBoolen = someBool;
} 
```

* * *

```
//CurrentViewController.m
- (void) returnAndSetBool: (bool) passbackVariable {
self.myBoolean = passbackVariable;
} 
```

# android - 如何在 imagebutton 单击时创建新活动？

> ID：15068140
> 
> 赞同：-7
> 
> 时间：2013-02-25T13:30:01.917
> 
> 标签：android, image, button, imagebutton

有人知道单击图像按钮时如何开始新活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:34:48.877

试试这个，

```
 ImageButton mainButton = (ImageButton) findViewById(R.id.mainButton);
mainButton.setOnClickListener(new OnClickListener() {

 @Override
    public void onClick(View v) {
 Intent intent=new intent(this,NewActivityname.class);
    startActivity(intent);

 }
});} 
```

在 androidmanifest 文件中添加你的 newactivity 类

# ios - 在 ViewController 中使用未声明的标识符

> ID：15068142
> 
> 赞同：1
> 
> 时间：2013-02-25T13:30:13.477
> 
> 标签：ios, objective-c, xcode, undeclared-identifier

我知道这是每天都可以问的那种，但事实是每个问题的答案都可能不同，我还没有找到。

我目前是 Objective C 的真正初学者，我正在使用该框架开发一个应用程序`OpenCV`。

我一直在关注这个[网站](http://docs.opencv.org/trunk/doc/tutorials/ios/image_manipulation/image_manipulation.html)进行学习，然后我遇到了问题。

我复制/粘贴了网站中提供的 3 种方法，将 cv::Mat 转换为 UIImage，将 UIImage 转换为 cv::Mat，但我不能使用它们：

我的 *.pch 文件：

```
#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif

#ifdef __OBJC__
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#endif 
```

我的 ViewController.hh 文件

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController

- (cv::Mat)cvMatFromUIImage:(UIImage *)image;
- (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image;
- (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat;
@end 
```

和我的 ViewController.mm 文件

```
#import "ViewController.hh"

@interface ViewController ()

@end

@implementation ViewController

- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    @@@//what is given in the linked website
    return cvMat;
}

- (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image
{
    @@@//what is given in the linked website
    return cvMat;
}

-(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    @@@//what is given in the linked website    
    return finalImage;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSString* filename = [[NSBundle mainBundle] pathForResource:@"openCV" ofType:@"jpg"];
    UIImage *image = [UIImage imageWithContentsOfFile:filename];

    cv::Mat inputMat = cvMatFromUIImage(image);
    UIImage *newImage = UIImageFromCVMat(inputMat);

    self.view.backgroundColor = [UIColor colorWithPatternImage:newImage];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"HelloWorld !" message:@"Welcome to OpenCV !" delegate:self cancelButtonTitle:@"Continue" otherButtonTitles:nil, nil];
    [alert show];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

`(void) viewDidLoad`2个错误在文件中单独的行上`.mm`，它表示两者`cvMatFromUIImage`都`UIImageFromCVMat`没有声明。

It might be a stupid question, I guess that I missed something, but don't know what.

Please help me :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:42:24.207

I think you've defined your functions in Objective-C but are using the C standard for calling them... Change these:

```
cvMatFromUIImage(image)
UIImageFromCVMat(inputMat) 
```

to

```
[self cvMatFromUIImage:image];
[self UIImageFromCVMat:inputMat]; 
```

# sql - 使用 SQL Server 选择时间并添加到 getdate

> ID：15068145
> 
> 赞同：0
> 
> 时间：2013-02-25T13:30:24.370
> 
> 标签：sql, sql-server, getdate

我有一列 TYPE_TOURNE 类型日期时间，其中包含“1900-01-01 05:15:00.000”我想选择小时和分钟并添加到 getdate()。

示例：现在是**25/02/2013**那么结果是 =`2013-02-25 05:15:00.000`

```
select DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))+DATEPART(hh, TYPE_TOURNE) FROM TOURNE 
```

但不幸的是结果是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:34:40.727

如果您想从 to 添加时间`TYPE_TOURNE`并按`current date`then 返回`datetime`；

```
Select convert(datetime,
               convert(varchar, getdate(),112) + ' ' + 
               convert(varchar, TYPE_TOURNE, 114)
              ) newDate
From TOURNE 
```

***或者***如果您需要`yyyy-mm-dd hh:mm:ss.mmm`格式然后转换为`varchar with 121 format`

```
Select convert(varchar,
               convert(datetime,
                 convert(varchar, getdate(),112) + ' ' + 
                 convert(varchar, TYPE_TOURNE, 114)
              ), 121) newDate
From TOURNE 
```

***或者***，如果您`hour & minutes`从那时`TYPE_TOURNE`起

```
Select convert(varchar,
               convert(datetime,
                 convert(varchar, getdate(),112) + ' ' + 
                 left(convert(varchar, TYPE_TOURNE, 108),6) + '00'
              ), 121) newDate
From TOURNE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:46:44.373

```
SELECT CAST(CONVERT(DATE, GETDATE()) AS DATETIME) + 
CAST(CONVERT(TIME, TYPE_TOURNE) AS DATETIME)
FROM   TOURNE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:34:25.750

任何一个：

```
SELECT DATEADD(dd, DATEDIFF(dd, 0, GETDATE()), TYPE_TOURNE)
FROM TOURNE 
```

或者，返回 TYPE_TOURNE 并处理表示层中的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:35:44.633

```
select DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))+DATEADD(hh,0, TYPE_TOURNE) FROM TOURNE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:37:18.397

尝试这个：

```
DECLARE @TimeHolder DATETIME = '1900-01-01 05:15:00.000'

SELECT DATEADD(MINUTE, DATEPART(MINUTE, @TimeHolder), 
                   DATEADD(HOUR, DATEPART(HOUR, @TimeHolder), 
                        DATEADD(DAY, 0, DATEDIFF(DAY, 0, GETDATE())))) 
```

# java - 可选的异常处理

> ID：15068147
> 
> 赞同：0
> 
> 时间：2013-02-25T13:30:39.330
> 
> 标签：java, exception-handling

我正在为一个非常基本的 AI API 创建一个包装器。当这个 API 出现问题时，它不会抛出任何异常或报告问题。

可以在调用 API 调用之前识别错误（例如错误的参数）。

在包装器中，我想通过抛出运行时异常来实现错误指示。目前，客户可以决定是否要处理它们。在特殊情况下，我会抛出一个检查异常，但这是有充分理由的。

问题是，当抛出任何异常时，程序会停止并且无论如何都需要继续。我在想停止抛出异常，只是在记录器中将问题报告为警告，但随后客户端不知道发生了错误。

人工智能调用一种方法来每秒更新一次。

处理检查的异常是令人讨厌的，即使调用一个非常简单的调用，代码也会变得非常丑陋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:36:56.110

您可以使用 IllegalArgumentException 或根据需要创建自定义异常，只需扩展 Exception 类或实现 Throwable。然后，您可以管理应用程序的行为。但是你需要确保块被try-catch包围，这样你就可以管理它们，API应该抛出异常，你需要在try-catch-block中捕获它。例如：

```
try {
 String var = IamUsingThisAPI.methodOfTheAPI();
} catch (Exception e) { // You can create your custom Exception
 //maybe print stack trace but handle as you want
 System.out.println("Handling the exception");
 // Do something
 // Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:38:28.917

您可以提供以下方法：

```
public void doSomethingQuiet(...) {
    try {
        doSomething(...);
    } catch (Exception ex) {
        log.warn(ex.getMessage());
    }
}

public void doSomething(...) throws Exception {
    if (incorrectArgs) {
        throw new Exception("Incorrect arguments!");
    }
    // process
} 
```

您还可以将方法名称更改为更“自然”：doSomethingQuiet -> doSomething 和 doSomething -> doSomethingThrowEx

# javascript - 如何通过javascript向手机号码发送短信？

> ID：15068149
> 
> 赞同：-4
> 
> 时间：2013-02-25T13:30:44.267
> 
> 标签：javascript, sms

我已经在这里查看了类似的问题，并且我知道这可能会作为重复而关闭，但其他答案都不清楚。

我正在构建一个 chrome 扩展，我想将文本作为 SMS 发送到指定的手机号码。实现这一目标的最佳方法是什么？我宁愿不使用 API，我想完全用 JS 来完成它，也许还有一些 jQuery。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:35:04.963

> 我宁愿不使用 API

这是不可能的。短信不是由以太形成的；你不能用代码来召唤它们。您需要使用基于 Web 的 API（将您连接到将发送 SMS 的服务提供商）或设备 API（例如可能在手机上找到的）。由于您正在编写 Chrome 扩展程序，因此您几乎肯定需要前者。

> 我想用 JS 完全完成它，也许还有一些 jQuery

jQuery 是一个 JS 库。它由已经编写好的 JS 组成。

> 有人可以指出我正确的方向吗？

搜索*短信服务提供商*，从选项中选择一个，阅读他们的说明。

请注意，如果您打算向公众提供服务，您需要确保与服务提供商的任何通信都是从您的网站完成的，这样您就不会将您的 API 密钥提供给公众。

# node.js - 在树莓派 (ARM6) 上运行流星

> ID：15068152
> 
> 赞同：11
> 
> 时间：2013-02-25T13:30:52.317
> 
> 标签：node.js, meteor

我试图在我的树莓派上安装meteorJS，但在安装过程中出现了这个错误：

```
"Unable to install on unsupported architecture Meteor: armv6l
 Installation failed. ". 
```

有一个解决方案是通过修改meteor core上的文件“admin/generate-dev-bundle.sh”来重新生成bundle，但是我们应该在这个文件中放什么呢？

你有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-19T17:39:48.223

仅供参考，我整理了一个支持 Raspberry Pi 的流星叉，以及完整的安装说明。你可以在这里找到它：[https ://github.com/IGx89/meteor](https://github.com/IGx89/meteor)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-27T19:28:01.910

我为流星开发捆绑器创建了一些更新，以便您可以为尚未支持的架构生成运行时。[更新] 未来我会支持meteor realease标签，只要他们自己支持ARM。在我的 GitHub 存储库 [更新] 上签出分支。[更新 2] 添加了来自 tumblr 网站的信息[更新 2]

[https://github.com/4commerce-technologies-AG/meteor](https://github.com/4commerce-technologies-AG/meteor)

[http://meteor-universal.tumblr.com/](http://meteor-universal.tumblr.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T14:51:54.073

[尼克·马丁在](https://github.com/n1mmy)[Meteor github 存储库中的第 442 期](https://github.com/meteor/meteor/issues/442)逐字引用：

```
No immediate plans to add official ARM support. In theory, all the dependencies 
should build on ARM, so you could try building the dev bundle on your platform. 
See https://github.com/meteor/meteor#slow-start-for-developers 
```

构建这个（是的，甚至`admin/generate-dev-bundle.sh`）所需的所有文件都可以在上面的存储库中找到。Akshat 引用了另一个确实提到*如何*修改它的 SO 问题。逐字引用此：

`Essentially, remove all the instructions regarding building node.js, and all references to a tempdir, so you end up just installing node packages. I will post mine as a gist once it's all figured out...`

试一试。您甚至可以更快地找到解决方案。你永远不会知道，直到你*尝试*。

# jquery - 将多个可拖动和可调整大小的图像添加到画布

> ID：15068153
> 
> 赞同：0
> 
> 时间：2013-02-25T13:30:53.527
> 
> 标签：jquery, html

我正在做一个在线购物网站项目。为此，我需要在画布上添加多个图像，例如腰带、帽子、衬衫或裤子。最后画布应该作为图像导入。

有人建议我如何做，还帮助我向画布添加多个可拖动和可调整大小的图像。请帮帮我

这就是我试图做的。

```
<html lang="en">
<head>
  <title>Outfit Demo</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
<script type="text/javascript">
jQuery(document).ready(function(event){
$("#shirt").resizable().draggable();
   $('.pic1').live('mouseover',function(){
    $(this).resizable().draggable();
});
});
  var shirt;
  var pant;
  function selectshirt(src)
  {
  shirt = src;
  path = "<img class=\"pic1\" src=\""+src+"\" height=\"300px\" width=\"300px\"/>";
  invisible("shirtcontainer");
  visible("pantcontainer");

  document.getElementById("shirt").innerHTML=document.getElementById("shirt").value+path;
  document.getElementById("cart").style.visibility="visible";
  }
  function selectpants(src)
  {
  pant = src;
  path = "<img class=\"pic1\" src=\""+src+"\" height=\"400px\" width=\"300px\"/>";
  document.getElementById("trousers").innerHTML=path;
  }
  function addtocart()
  {
  alert("Shirt:"+shirt+"\npant:"+pant);
  }
  function changeshirt()
  {
  visible("shirtcontainer");
  invisible("pantcontainer");
  }
  function changepant()
  {
  visible("shirtcontainer");
  invisible("pantcontainer");
  }
  function visible(containername)
  {
  document.getElementById(containername).style.visibility="visible";
  }
  function invisible(containername)
  {
  document.getElementById(containername).style.visibility="hidden";
  }
  </script>
</head>

<body>
<div id="leftpanel" style="position:absolute;left:0;width:33%;">
<div style="left:0;height:30%;" id="shirt"></div>
<div style="left:0;height:70%;" id="trousers"></div>
<div style="left:0;height:70%;" id="cart">
<button  onclick="changeshirt()">Change Shirt</button>
<button  onclick="addtocart()">Add to cart</button>
</div> 
</div> 
<div id="middlepanel" style="width: 100%; height: 100%; position:absolute;left:500;width:33%;overflow:auto;">
<div id="shirtcontainer">
<img src="images/shirts/shirt1.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt2.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt3.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt4.png" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt5.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt6.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
<img src="images/shirts/shirt7.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
</div>
</div> 
<div id="rightpanel" style="width: 100%; height: 100%; position:absolute;right:0;width:33%;overflow:auto;">
<div id="pantcontainer">
<img src="images/pants/pant1.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant2.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant3.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant4.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant5.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant6.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
<img src="images/pants/pant7.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
</div>
</div>

</body>
<script>
invisible("pantcontainer");
invisible("cart");
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:53:04.970

这是我的代码：

我已经完成了 10 件衬衫和 10 条裤子，现在我要让它充满活力。但是需要代码的可以参考这个。它可能会帮助你。

```
<html lang="en">

<head>
  <title>Outfit Demo</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
<script type="text/javascript">
$(document).ready(function() {
  // sets draggable the elements with id="shirt"
  $('#shirt').draggable({
    cursor: 'move',        // sets the cursor apperance
    containment: '#leftpanel'    // sets to can be dragged only within its parent
  });
  // sets draggable the paragraph inside #trousers
  $('#trousers').draggable({
    cursor: 'move',
    containment: '#leftpanel'      // sets to can be dragged only within its parent
  });

  $('#btn').click(function() {
    // removes all LI with class="cls" in OL
    $('#shirt').resizable({
    cursor: 'move',
    containment: '#leftpanel'      // sets to can be dragged only within its parent
  });
  $('#trousers').resizable({
    cursor: 'move',
    containment: '#leftpanel'      // sets to can be dragged only within its parent
  });
  });
});

  var shirt;
  var pant;
  function selectshirt(src)
  {
  shirt = src;
  path = "<img src=\""+src+"\" height=\"100%\" width=\"100%\"/>";
  invisible("middlepanel");
  visible("rightpanel");

  document.getElementById("shirt").innerHTML=path;
  document.getElementById("cart").style.visibility="visible";
  }
  function selectpants(src)
  {
  pant = src;
  path = "<img class=\"pic1\" src=\""+src+"\" height=\"100%\" width=\"100%\"/>";
  document.getElementById("trousers").innerHTML=path;
  }
  function addtocart()
  {
  alert("Shirt:"+shirt+"\npant:"+pant);
  }
  function changeshirt()
  {
  visible("middlepanel");
  invisible("rightpanel");
  }
  function changepant()
  {
  visible("shirtcontainer");    
  invisible("pantcontainer");
  }
  function visible(containername)
  {
  document.getElementById(containername).style.visibility="visible";
  }
  function invisible(containername)
  {
  document.getElementById(containername).style.visibility="hidden";
  }
  </script>
</head>

<body>
<div id="leftpanel" style="width:800px;height:600px;border:1px solid black;">
    <div id="shirt"  style="left:0;height:300px;width:300px;"></div>
    <div id="trousers" style="left:0;height:300px;width:300px;" ></div>
</div> 
<div style="left:0;height:70%;" id="cart">
    <button  onclick="changeshirt()">Change Shirt</button>
    <button  onclick="addtocart()">Add to cart</button>
    <button id="btn">Resize</button>
</div> 
<div id="middlepanel" style="width: 100%; height: 100%; position:absolute;right:0;top:0;width:33%;overflow:auto;">
    <div id="shirtcontainer">
        <img src="images/shirts/shirt1.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt2.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt3.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt4.png" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt5.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt6.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
        <img src="images/shirts/shirt7.jpg" height="300px" width="300px" onclick="selectshirt(this.src)"/>
    </div>
</div> 
<div id="rightpanel" style="width: 100%; height: 100%; position:absolute;right:0;top:0;width:33%;overflow:auto;">
    <div id="pantcontainer">
        <img src="images/pants/pant1.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant2.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant3.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant4.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant5.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant6.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
        <img src="images/pants/pant7.jpg" height="300px" width="300px" onclick="selectpants(this.src)"/>
    </div>
</div>

</body>
<script>
invisible("rightpanel");
invisible("cart");
</script>
</html> 
```

# objective-c - 发送到实例的 copyWithZone 无法识别的选择器

> ID：15068154
> 
> 赞同：7
> 
> 时间：2013-02-25T13:30:53.457
> 
> 标签：objective-c

我正在使用以下代码来实例化视图 SenderPlayerViewController 并传递对象“会话”：

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState: GKPeerConnectionState)state {
switch (state) {
    case GKPeerStateConnected:
        NSLog(@"Connected Central");
        if ([settings.playerType isEqualToString:@"SENDER"]){                 
            SenderPlayerViewController *myViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"SenderPlayerViewController"];
            [self.navigationController pushViewController:myViewController animated:YES];
            myViewController.currentSession=session;

        }

        break;            
    case GKPeerStateDisconnected:
        NSLog(@"Disconnected Central");
        self.currentSession = nil;
        break;
}   
} 
```

视图 SenderPlayerViewController 的头文件是：

```
@interface CentralViewController : UIViewController {
Settings *settings;}
@property (nonatomic, copy) GKSession *currentSession;

@end 
```

执行代码时，我收到以下错误：

```
[GKSession copyWithZone:]: unrecognized selector sent to instance 0x9661200 
```

在这里需要更多帮助....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:32:17.870

物业：

```
@property (nonatomic, copy) GKSession *currentSession; 
```

是错的。GKSession 不是可复制对象。所以你应该通过保留来获取对它的引用：

```
@property (nonatomic, retain) GKSession *currentSession; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:38:17.840

您的自定义类 GKSession 必须是 NSObject 的子类，并且您最好实现协议 NSCopy 中声明的方法

# lotusscript - 如何读取 RichText 字段？

> ID：15068160
> 
> 赞同：1
> 
> 时间：2013-02-25T13:31:11.013
> 
> 标签：lotusscript

我有一个应该将 Notes DB 显示为 XML 的代理。我成功检索了除 RichText 之外的所有字段。这是一个代码片段：

```
Set session = New NotesSession
Set doc = session.DocumentContext
Set db = Session.CurrentDatabase
Set view = db.getview("myView")
Set doc = view.GetFirstDocument()

While Not(doc Is Nothing)
    Print "<job>"
    Print "<id>" & doc.id(0) & "</id>" ' Works fine since ID is a normal field
    Print "<text>" & doc.text(0) & "</text>" ' Does not work at all 
    Print "</job>"
    Set doc = view.GetNextDocument(doc)
Wend 
```

如果我使用 doc.text 而不是 doc.text(0) 它只写整个文本的前两个单词。我想我必须遍历整个文本，但由于我是 Lotus Script 的新手，所以我不知道该怎么做。谢谢你们。

编辑：原来西蒙的回答是正确的。据我所知，如果我删除以下打印，则问题与编码有关：

```
Print |Content-Type:text/xml| & Chr$(13) 
```

一切正常。我想我需要在标题中定义编码......

编辑：我现在使用这个 Print 代替：

```
Print "<text><![CDATA[" & rtitem.getUnformattedText() & "]]></text>" 
```

但是，当我从浏览器调用代理时，它仍然在打印时中断，因为它忽略了 CDATA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:42:28.387

不要使用点符号。要获取 Richtext 字段，您需要使用 getFirstItem() 方法调用并将其链接到 NotesRichTextItem 对象。之后，您应该能够使用 getUnformattedText() 方法将其转换为文本。

```
Dim rtitem As NotesRichTextItem
...
rtitem = doc.getFirstItem("text")

Print "<text>" & rtitem.getUnformattedText() & "</text>" 
```

当然，您可能需要解析该文本以防止 XML 中出现非标准字符，或者将其包装在 CDATA 块中。

# java - JVM 创建的 Heap Dump 不完整

> ID：15068161
> 
> 赞同：0
> 
> 时间：2013-02-25T13:31:12.683
> 
> 标签：java, jvm

我想使用 eclipse MAT 分析应用程序的内存使用情况，因此我使用`-XX:+HeapDumpOnOutOfMemoryError`它来创建一个 heapdump。现在，如果我在 MAT 中打开它，它会告诉我堆转储的大小为 127mb，这显然不是 jvm 运行时使用的所有内容`-Xmx1024m`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:44:07.737

Java VM 中通常有两段内存（nursery 和 heap），每段都可能导致 OutOfMemory。因此，您不能断定转储文件的大小应该等于或超过 -Xmx 设置。

阅读有关该主题的更多信息 - 例如此处：[http ://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)

# ms-access - 从链接服务器中删除

> ID：15068163
> 
> 赞同：0
> 
> 时间：2013-02-25T13:31:19.310
> 
> 标签：ms-access, sql-server-2000

我不知道如何从链接服务器中删除行。我的数据源是一个 mdb 文件。这是我创建链接服务器的方式：

我能够插入几行或更新一行或选择行。

从 TrainingFeedback...feedback#txt 中选择 *

但是我到底要如何删除部分或全部行呢？当我运行这个：

从 TrainingFeedback...feedback#txt 中删除

我收到此错误：

服务器：消息 7346，级别 16，状态 2，第 1 行无法从 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”获取行的数据。[OLE/DB 提供程序返回消息：书签无效。] OLE DB 错误跟踪 [OLE/DB 提供程序 'Microsoft.Jet.OLEDB.4.0' IRowset::GetData 返回 0x80040e0e]。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:03:48.757

提供者可能不会为删除语句返回行。尝试使用“OpenQuery”函数来解决错误。另外，您是否测试过删除没有发生，或者您是否因为错误而假设它没有发生？

[参考！](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q270119)

# sql-server-2008 - 在asp.net mvc3的视图中通过会话显示数据

> ID：15068167
> 
> 赞同：0
> 
> 时间：2013-02-25T13:31:37.237
> 
> 标签：sql-server-2008, asp.net-mvc-3, invalidoperationexception

我正在开发一个 ASP.net MVC 项目，并希望显示我通过会话获得的特定用户数据。根据该 ID，我想提取特定员工的所有数据。为此我做了这个代码：

我的控制器的索引方法：

```
 public ActionResult Index()
    {
        object s = Session["EmployeeID"];
        var sessval = s.ToString();
        AdminDetailsModel model = new AdminDetailsModel();

        var data1 = (from e in db.Employees.Where(c => c.EmployeeID == sessval) join d in db.Designations on e.Designation1up equals d.Designation1up select new { EmployeeID = e.EmployeeID, FirstName = e.FirstName, LastName = e.LastName, DesignationInternal = d.DesignationInternal, DesignationExternal = d.DesignationExternal, OfficePhone = e.OfficePhone, CellPhone = e.CellPhone, JoiningDate = e.JoiningDate, EmailID = e.EmailID, Address = e.Address }).SingleOrDefault();

        return View(data1);
    } 
```

我为此创建了视图模型，其中我采用了我需要在视图中显示的所有方法。

我已经创建了这个方法的视图，它在我的模型类上是强类型的。当我运行它时，出现以下错误：

```
 System.InvalidOperationException: The model item passed into the dictionary is of type '<>f__AnonymousType1`10[System.String,System.String,System.String,System.String,System.String,System.String,System.String,System.DateTime,System.String,System.String]', but this dictionary requires a model item of type 'ResourceTracking.Employee'. 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:34:31.613

改变

`select new {`

到

```
select new ResourceTracking.Employee { 
```

您希望将`Employee`类的实例而不是匿名类型传递给视图。

# python - 测试给定数组的子数组

> ID：15068169
> 
> 赞同：5
> 
> 时间：2013-02-25T13:31:43.237
> 
> 标签：python, numpy

这是初学者 Numpy 用户提出的一个基本问题：我有一个 2D 数组，比如 5 行和 2 列，您可以将其视为 10 个 2d 向量，我想测试给定向量是否在表内。

例如 ：

```
>>> tableau = array(range(10), dtype = uint8)
>>> tableau.shape = (5,2)
>>> print tableau
[[ 0  1]
 [ 2  3]
 [ 4  5]
 [ 6  7]
 [ 8  9]]
>>> [0, 1] in tableau
True 
```

最后一行给出了 True，但也给出了 '[0, 2] in tableau'。

目前，我计算欧几里得距离是否为 0，但我确信有一个更简单的答案。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:40:06.920

您可以对匹配数组执行布尔归约：

```
([0, 1] == tableau).all(axis=1).any() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-13T07:22:32.447

直截了当，您可以使用`any()`生成器将数组与`array_equal`.

```
from numpy import array_equal

in_t = lambda x, t : any((array_equal(a,x) for a in t))

print in_t([0, 2], tableau)
print in_t([0, 1], tableau) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T21:52:52.380

我写了一个函数来解决这个问题，它也处理多维情况。（@ecatmur 的答案在二维中完美运行，但对于 1D 或 3D+ 则失败）

```
import numpy as np
def haselement(arr,subarr):
    '''Test if subarr is equal to one of the elements of arr.
       This is the equivalent of the "in" operator when using lists instead of arrays.'''
    arr = np.asarray(arr)
    subarr = np.asarray(subarr)
    if subarr.shape!=arr.shape[1:]:
        return False
    elif arr.ndim<2:
        return (subarr==arr).any()
    else:
        boolArr = (subarr==arr)
        boolArr.resize([arr.shape[0],np.prod(arr.shape[1:])])
        return boolArr.all(axis=1).any()

tableau = np.array(range(10), dtype = np.uint8)
tableau.shape = (5,2)
haselement(tableau,[0,1]) 
```

1D 使用 if 语句处理，ND 则通过将数组大小调整为 2D 来处理，以便@ecatmur 的算法能够工作。我想到的解决此问题的其他方法涉及列表推导或循环（实际上可能更有效，但前提是列表很长并且元素靠近开头）；不过，这似乎更 numpy-thonic。

如果您想从库中使用它，也可以在此处找到该函数：

[https://github.com/davidmashburn/np_utils](https://github.com/davidmashburn/np_utils)（明显的免责声明，我是作者；））

# c++ - 二叉搜索树

> ID：15068171
> 
> 赞同：0
> 
> 时间：2013-02-25T13:31:51.133
> 
> 标签：c++

```
 template <class T>
void BinaryTree<T>::LoadTree(const char *file)
{
ifstream fin;
fin.open(file);
string buffer;
T buff;
while (!fin.eof())
{
      getline(fin,buffer,'~');
      fin>>buff;

      TreeNode<T> *temp,*temp1;
      temp=Root;
      temp1=temp;
      while (temp!=NULL)
      {
          temp1=temp;  
          TreeNode<T> *Right=temp->RightChild;
          TreeNode<T> *Left=temp->LeftChild;
          if (temp->key>buff)
          {
              temp=temp->LeftChild;
          }
          else if (temp->key<buff)
          {
              temp=temp->RightChild;
          }
      }
      temp=new TreeNode<T>(buff,buffer);          
      if (temp!=Root)
      temp->Parent=temp1;
}
fin.close();
} 
```

我正在制作一个二进制搜索树。这是我的一段代码，我在其中输入一个文件，其中包含一个名称和一个像“Alex~ 231423”这样的键。我的代码是否在制作正确的 BST，因为当我运行它时，那里是一条消息，上面写着“此应用程序已请求运行时以一种不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息”。我真的不明白出了什么问题。我将不胜感激任何帮助 ****** *上一个问题解决了，但是insertNode函数出现了msg，如下：

```
template <class T>
void BinaryTree<T>::insertNode(T Key,string Val)
{

 TreeNode<T> *temp,*temp1;
 temp=Root;
 while (temp!=NULL)
 {
       temp1=temp;
       if (temp->key>Key)
       {
           temp=temp->LeftChild;
       }
       else if (temp->key<Key)
       {
            temp=temp->RightChild;
       }
 }
 temp=new TreeNode<T>(Key,Val);              
 temp->Parent=temp1;
} 
```

这是 TreeNode 部分

```
template <class T>
struct TreeNode{
  string value;
  T key;
  TreeNode<T> *Parent;
  TreeNode<T> *LeftChild;
  TreeNode<T> *RightChild;
  TreeNode (T k,string Val)
  {
           this->value=Val;
           this->key=k;
           this->Parent=NULL;
           this->LeftChild=NULL;
           this->RightChild=NULL;
  }
};

Actually I was getting the error for search function,not insert function.I am sorry for inconvenience.here is the code

template <class T>
string BinaryTree<T>::searchNode(T Key)
{        
TreeNode<T> *temp=Root;
while (temp!=NULL)
{
      if (temp->key==Key)
      {
          return temp->value;
      }
      if (temp->key>Key)
      {
          temp=temp->LeftChild;
      }
      else if (temp->key<Key)
      {
           temp=temp->RightChild;
      }                  
}     
return NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:09:00.620

不确定这是否**是**问题所在，但**您需要一个指向指针的指针**，否则您只需修改局部变量，而不是左/右子成员。

```
 TreeNode<T> **temp = &Root,
             *temp1 = NULL; // otherwise Root will have an invalid parent pointer
 while (*temp != NULL)
 {
       temp1 = *temp;
       if (temp1->key > Key)
       {
           temp = &(*temp)->LeftChild;
       }
       else if (temp1->key < Key)
       {
           temp = &(*temp)->RightChild;
       }
 }
 *temp = new TreeNode<T>(Key,Val);              
 (*temp)->Parent = temp1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:20:10.730

你写这个的方式意味着你只能从一个文件中创建它。编写`operator>>`以使用`istream`. 它也将使测试变得更容易：

```
template <class T>
class BinaryTree {
public:
    istream& operator>>(istream& is) {
        //...
        return is;
    }
};

int main() {
    stringstream ss("tree formatted data");

    BinaryTree<int> tree;
    ss >> tree;
    return 0;
} 
```

替换`"tree formatted data"`为您的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:43:21.133

您需要进行更多初始化（Root 和一个孩子）：

```
template <class T>
void BinaryTree<T>::LoadTree(const char *file)
{
   ifstream fin(file);
   string buffer;
   T buff;
  while (getline(fin,buffer,'~') && fin>>buff )
  {
     TreeNode<T> *temp,*temp1;
     temp=Root;
     temp1=temp;
     while (temp!=NULL)
     {
       temp1=temp;  
       TreeNode<T> *Right=temp->RightChild;
       TreeNode<T> *Left =temp->LeftChild;
       if      (temp->key >= buff)      {   temp=temp->LeftChild;      }
       else if (temp->key <  buff)      {   temp=temp->RightChild;     }
     } // allow duplicate key??

     temp=new TreeNode<T>(buff,buffer); 
     if (     !Root)   {  Root=temp;  continue;      }
     //else if (temp !=Root)     temp->Parent=temp1;

     // insert the new node in the correct branch, that was NULL
     if (temp1->key >= buff)
      {
          temp1->LeftChild=temp;
      }
     else temp1->RightChild=temp;
  }
fin.close();
} 
```

此外，如果失败，您的 searchNode 必须返回 "" ?? 但不是NULL。

# html - 正文中的邮件链接和换行符

> ID：15068172
> 
> 赞同：2
> 
> 时间：2013-02-25T13:31:56.580
> 
> 标签：html

在一个`mailto`链接中，我正在尝试使用换行符，但我没有这样做！我已经尝试过`\n`，`/n` `<br>`并尝试搜索 enter 的 ascii 值，但我没有得到我要找的东西：

```
<a href="mailto:sadaf2605@gmail.com?subject=Your Subject&body=Hello, <br> I want your help!"> Mail me</a> 
```

你们能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:41:32.740

使用`%0D%0A`：

```
body=Hello,%0D%0AI want your help! 
```

***现场演示：http:** [//jsfiddle.net/yCte6/1/](http://jsfiddle.net/yCte6/1/)*

* * *

更多细节可以在这里找到：[http ://www.ietf.org/rfc/rfc2368](http://www.ietf.org/rfc/rfc2368)

# python - 从 excel 文件中读取缓存的外部字段，结果与我在 excel 中看到的不同

> ID：15068174
> 
> 赞同：5
> 
> 时间：2013-02-25T13:31:59.827
> 
> 标签：python, excel, python-3.x, xlrd

我正在尝试在 python3 中使用 xlrd 读取一个 excel 文件，但是我没有从读取单元格中得到结果，因为我确实在 excel 中看到了它们。

我试图访问的单元格似乎有一些外部源集，它们从中被刷新，但由于该源对我不可用，excel 显示一些缓存值。这些值位于同一个 excel 文件中的其他位置，因此在工作表中您看到例如“2.65111”时，单元格的实际内容在 excel 的此编辑栏中显示为“=BC12”。

当我尝试通过 xlrd 阅读此内容时：

```
wb=xlrd.open_workbook("filename.xls",formatting_info=True)
wb.sheet_by_name("sheetname").cell(12,9) 
```

单元格内容显示为：

```
'text:'[XXXX]' (XF:95)' 
```

（其中 XXXX 很可能是此外部 .csv 文件的列的名称）

我希望 xlrd 返回我在 excel 中看到的“2.65111”，或者至少返回“=BC12”作为对另一个单元格的引用，但我不能以任何方式使用“[XXXXX]”的东西。

*有没有办法让 xlrd 显示这两个中的任何一个？*

我真的很困惑它从哪里得到这个“[XXXXX]”，以及为什么这与我在 excel 中看到的如此不同。

PS：我不能只使用BC12单元格的数据，因为这应该是文件的自动处理，只有“原始”单元格有固定的位置，其他的可以在第二天在另一个随机位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:42:19.117

一种解决方案可能是制作仅包含值、不包含公式或外部源的 Excel 工作表的副本。

您可以通过突出显示和复制所有内容，然后将“特殊粘贴”“粘贴”到新工作表中，然后选择“仅值”或类似的东西来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:07:47.540

您可能唯一的选择是通过 Excel COM API 使用实际的 Excel 预处理文件。您可以在 .NET 中做一些简单的事情，这将加载 excel 文件，获取数据并将其保存在类似结构的 excel 文件中，但没有外部引用。用 Excel 加载一个 excel 文件需要很长时间（几秒钟），如果你在服务器上超载它肯定会失败，但如果你每天有几个文件，它会工作。当然，如果您不在 Windows 上运行，它将无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T21:44:51.950

Excel 将“12,9 单元格”称为 J13（不是 J12）。你确定你是在比较同类吗？预计 J13 将包含对 BC12 的引用吗？你能通过检查 J13 和 BC12 周围的细胞来推断什么吗？

# linux - Cron 表达式在不同月份的不同日期运行

> ID：15068181
> 
> 赞同：1
> 
> 时间：2013-02-25T13:32:19.770
> 
> 标签：linux, unix, cron

`cron`对于以下情况，我需要一个表达式：

我想在每个月的第一天午夜运行一个时间表；但三月应该是一个例外。对于 3 月，它应该在 3 月 15 日运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:35:24.730

我不认为你可以用一种表达方式做到这一点，但两种应该可以

```
0 0 1  1,2,4-12 * expr
0 0 15 3        * expr 
```

即第一个表达式运行除三月以外的所有月份。第二个仅适用于三月。

或者，您可以指定您的脚本在 1 日*和*15 日运行，并且您的脚本可以检查在给定月份的情况下哪一天有效。这会给你一个表达，但你在 cron 和你的脚本之间分割日期分析，因此我认为这不是一个特别好的解决方案。对于更复杂的场景，值得牢记。

# javascript - 如果设置了 doctype，CSS 不能通过 javascript 应用于表单元素

> ID：15068182
> 
> 赞同：5
> 
> 时间：2013-02-25T13:32:21.323
> 
> 标签：javascript, html

我有这样的文本框：

```
<input id="patId1" type="text" name="patId1" value=""> 
```

当页面加载时，会调用一个脚本来设置文本框的宽度。该代码如下：

```
document.getElementById("patId1").style.width = document.getElementById("patId2").offsetWidth; 
```

其中，patId2 是一个下拉列表（选择标签）。基本上我想要做的是将文本框的宽度设置为与下拉列表的宽度相同。

现在，如果设置了 DOCTYPE，那么上面的脚本就不起作用了。但如果未设置，则应用宽度。

任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:39:43.417

的值`offsetWidth`将是一个数字。CSS`width`属性接受一个*长度*。长度（除了`0`）必须有单位。在 quirks 模式下，浏览器违反 CSS 规范并采用`px`单位。

```
document.getElementById("patId1").style.width = document.getElementById("patId2").offsetWidth + 'px' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:40:27.407

将“px”附加到 dropdown 的 offsetWidth 上。JSFiddle： http: [//jsfiddle.net/whizkid747/ysj2t/1/](http://jsfiddle.net/whizkid747/ysj2t/1/)：`document.getElementById("patId1").style.width = document.getElementById("patId2").offsetWidth + "px";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:10:16.797

**有一种更简单的方法可以做到这一点，**我重新使用了@cychan 的以下帖子中的代码：

关联：

[用户想要选择选项后如何扩展“选择”选项宽度](https://stackoverflow.com/questions/294040/how-to-expand-select-option-width-after-the-user-wants-to-select-an-option)

这是一般方法：

```
<div id="select-wrapper-01" style="width: 180px; overflow: hidden;">
    <select style="width: auto;" name="abc" id="10">
        <option value="-1">Any</option>
        <option value="123">123</option>
    </select>
</div> 
```

![在此处输入图像描述](../Images/d19bd437f11987f5455a8c22b4c5718e.png)

现在您可能会说，“等一下？我最大的选择选项不是 180 像素宽！​​”

在这种情况下，`width`请`overflow`从`div`.

然后使用 javascript 为周围的 div 提供适当的宽度，例如：

```
var actualWidth = document.getElementById("patId2").offsetWidth;
document.getElementById("select-wrapper-01").style.width = actualWidth + 'px'; 
```

![在此处输入图像描述](../Images/d19bd437f11987f5455a8c22b4c5718e.png)

这是关于 jsfiddle 的工作副本。没什么花哨的，但它确实有效。

[http://jsfiddle.net/acegyver/eTEuk/](http://jsfiddle.net/acegyver/eTEuk/)

您可以尝试使用 select `option`，使它们更长或更短，并查看它们`select`将如何动态适应。

在应得的地方给予赞扬：正如我所说，我从@cychan 的现有帖子中调整了代码。适用于您的问题的实施由我负责。

# c# - 如何对 NHibernate 拦截器进行单元测试

> ID：15068192
> 
> 赞同：2
> 
> 时间：2013-02-25T13:32:55.940
> 
> 标签：c#, nhibernate, interceptor

我有一个 NHibernate 拦截器，它覆盖该`Instanciate`方法，并执行以下操作：

*   如果要实例化的类继承了某个基类，则返回一个 CastleDynamicProxy
*   否则只是实例化类

虽然这听起来很简单（并且已经有效），但如果我可以通过单元测试证明它的功能，我仍然会感觉更好。

这是拦截器代码：

```
 public override object Instantiate(string entityTypeName, EntityMode entityMode, object id)
    {
        // Type resolution across Assembly borders
        Type type = TypeFinder.FindType(entityTypeName);

        if (type == null)
        {
            throw new Exception(string.Format("",entityTypeName));
        }

        bool isViewModel = (typeof(ViewModelBase).IsAssignableFrom(type));

        if (entityMode == EntityMode.Poco && isViewModel)
        {
            var instance = ProxyFactory.CreateProxy(type);
            SessionFactory.GetClassMetadata(entityTypeName).SetIdentifier(instance, id, entityMode);
            return instance;
        }
        return base.Instantiate(entityTypeName, entityMode, id);
    } 
```

我可以成功测试我的代理生成代码，但`base.Instantiate`总是返回 null。这是我的测试代码（如您所见，我什至添加了一个真实的数据库，以防拦截器需要一个有效的会话）：

```
 private FluentConfiguration PrepareDataBase()
    {
        string connectionString = @"Data Source=test.sdf;";
        SqlCeEngine en = new SqlCeEngine(connectionString);
        en.CreateDatabase();

        FluentConfiguration fc = Fluently.Configure().Database(MsSqlCeConfiguration.Standard
                                                              .ConnectionString(c => c.Is(connectionString))
                                                              .ShowSql())
                                   .Mappings(x => x.FluentMappings.AddFromAssemblyOf<ViewModel>());

        new SchemaExport(fc.BuildConfiguration()).Create(true, true);
        return fc;
    }

    [TestMethod]  
    [DeploymentItem("System.Data.SqlServerCe.dll")]
    public void Test_Instantiate_WithNonViewModelBasedPoco_ReturnsInstance()
    {
        TypeFinder.RegisterAssembly(typeof(OtherPoco).Assembly);
        FluentConfiguration fc = PrepareDataBase();

        NhChangeNotificationInterceptor interceptor = new NhChangeNotificationInterceptor(); 
        ISession session = fc.BuildSessionFactory().OpenSession(interceptor);

        string instanceType = typeof(OtherPoco).FullName;
        object instance = interceptor.Instantiate(instanceType, EntityMode.Poco, null);

        Assert.AreEqual(typeof(OtherPoco).FullName, instance.GetType().FullName);
        Assert.IsFalse(typeof(ViewModelBase).IsAssignableFrom(instance.GetType()));
    } 
```

我认为这可能是空标识符的问题，所以我保存了一条记录并尝试像这样添加它的 Id：

```
 NhChangeNotificationInterceptor interceptor = new NhChangeNotificationInterceptor(); 
        ISession session = fc.BuildSessionFactory().OpenSession(interceptor);
        using (ITransaction trx = session.BeginTransaction())
        {
            session.Save(new OtherPoco() { Id = 1 });
            session.Flush();
        }
        string instanceType = typeof(OtherPoco).FullName;
        object instance = interceptor.Instantiate(instanceType, EntityMode.Poco, 1); 
```

不过，什么都改变不了。知道如何测试`base.Instantiate`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:55:58.667

我不会尝试为此编写单元测试。拦截器与 NH/数据库紧密耦合——最好为此编写集成测试。

不要试图测试你的代码行。相反，测试您的功能。您已经说明了您的拦截器应该做什么（“如果要实例化的类继承某个基类，则返回 CastleDynamicProxy 否则只需实例化该类”）。改为测试这个！如果您以后想使用拦截器以外的其他技术来获得相同的结果，则不应强迫您修改测试。

因此，不要直接从您的测试中调用interceptor.Instantiate，而是进行一些集成测试，以验证它在从数据库中获取数据时是否做了它应该做的事情。

# php - 根据 url 动态加载内容

> ID：15068195
> 
> 赞同：1
> 
> 时间：2013-02-25T13:33:08.890
> 
> 标签：php, jquery, html, dynamic

如何根据页面的 url 动态加载内容。

例如：profiles.html#example-contenet1、profiles.html#example-contenet2

对于每个 #example-contenet 加载不同的页面内容。

我试图把它放到 JSFiddle 中，但是我认为它可能需要一个 php 后端。 [http://jsfiddle.net/JEUSz/3/](http://jsfiddle.net/JEUSz/3/)

也许是这样的：

```
switch ($_POST['name']) {
case 'example-name1':
    echo "<img src='img/pic.jpg' />"; 
    echo "<img src='img/pic.jpg' />";
    echo "hi";
    break;
case 1:
    echo "i equals 1";
    break;
case 2:
    echo "i equals 2";
    break;
default:
    echo 'fail';
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:37:41.233

这就是服务器端开发的全部目的。阅读[路由](http://symfony.com/doc/current/book/routing.html)，并选择一个[像这样的 PHP 路由器](https://github.com/chriso/klein.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:44:00.323

我就是这样做的。在 php 文件中，我更改了 $template.

```
//Get content
$template = file_get_contents("main.html");

//Content based on _GET['page'] value
switch($_GET['page']){
    case "home": //Form Page
        include("inc/form_year.php");
        break;
    case "company_register": //Form Page
        include("inc/company_register.php");
        break;
    case "confirm_user": 
        include("inc/confirm_user.php");
        break;
    case "posts": 
        include("inc/posts.php");
        break;
    case "question": 
        include("inc/question.php");
        break;
    case "post_question": 
        include("inc/post_question.php");
        break;
    case "post_answer": 
        include("inc/post_answer.php");
        break;
    case "comment": 
        include("inc/comment.php");
        break;
    case "create_post": 
        include("inc/create_post.php");
        break;
    default: //Any page that is not defined in this switch will lead to this page
        include("inc/form_year.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:37:53.697

不，您不必使用 PHP。您只需要创建多个 HTML 文件并将它们放到服务器上。然后您可以使用 AJAX 加载特定内容（与哈希“#some-name”相关）。

尝试这个：

[http://tutorialzine.com/2009/09/simple-ajax-website-jquery/](http://tutorialzine.com/2009/09/simple-ajax-website-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:38:26.080

使用 PHP，您可以使用查询字符串中的变量来确定正文的内容。这是一个非常简单的小型网站示例：

**example.php?content=contact_form**

```
<?php
$content = isset($_GET['content']) ? trim($_GET['content']) : 'default';

switch($content){
    case 'contact_form':
        include('html/contact_form.php');
        break;
    case 'welcome':
        include('html/welcome.php');
        break;
    default:
        include('html/default.php');
} 
```

或者：

```
<?php
$contentPages = array(
    'contact_form' => 'contact_form.php',
    'welcome' => 'welcome.php',
    'about' => 'about.php'
);

$content = 'default.php';
if(isset($_GET['content']) && array_key_exists($_GET['content'], $contentPages)){
    $content = $contentPages[$_GET['content']];
}

include('html/' . $content); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:38:47.700

您的示例代码非常好，但您必须使用变量而不是哈希标记。

所以不是profiles.html#example-contenet1，而是profiles.html?name=example-content1

然后您的 switch 语句将正常工作。

关于 $_GET 变量的一些附加信息：http: [//www.w3schools.com/php/php_get.asp](http://www.w3schools.com/php/php_get.asp)

服务器不会获取 URL 的哈希标记部分，有关更多信息，您可以查看此问题：

[我可以在我的服务器端应用程序（PHP、Ruby、Python 等）上读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T13:38:57.877

为每个页面使用一个 js 文件。

```
index.html => index.js
guestbook.html => guestbook.js 
```

等等。没关系，因为您在不同的页面中需要不同的实现。如果您想在页面上共享功能，请使用 a`global.js`并将此文件包含在每个页面中。

# node.js - 如何在不立即退出的情况下定义 Node.js 状态码？

> ID：15068205
> 
> 赞同：1
> 
> 时间：2013-02-25T13:33:42.663
> 
> 标签：node.js, exit

在 Node 中，该[`process.exit(code)`](http://nodejs.org/docs/latest/api/process.html#process_exit)方法允许使用`code`状态码退出。

但是，我正在寻找的是一种在某些未临时定义的条件下定义进程将退出而不立即退出的状态代码的方法。

我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:33:42.663

使用`process`'s[`exit`事件](http://nodejs.org/docs/latest/api/process.html#process_event_exit)。

即使它与方法同名，`exit`如果您从内部调用，也不会递归调用处理程序`process.exit`：

```
var code = 0;
// ...
code = 1
// ...
process.on('exit', function() {
    process.exit(code);
}); 
```

# ios - malloc 错误 - 已释放对象的校验和不正确 - 对象可能在被释放后被修改

> ID：15068206
> 
> 赞同：1
> 
> 时间：2013-02-25T13:33:43.490
> 
> 标签：ios, objective-c, memory-management, nsdata

我正在尝试获取 NSData 对象的子数据，同时根据我的个人需要获取多个字节的某个值。

实际上这会影响 .wav 声音文件的音量。

但是在几次调用以下函数后，我在 malloc 语句中得到了 malloc 错误。

```
+(NSData *) subDataOfData: (NSData *) mainData withRange:(NSRange) range volume (CGFloat) volume
{
    // here is the problematic line:
    Byte * soundWithVolumeBytes = (Byte*)malloc(range.length); 
    Byte * mainSoundFileBytes =(Byte *)[mainData bytes];

    for (int i=range.location ; i< range.location + range.length; i=i+2)
    {
        // get the original sample
        int16_t sampleInt16Value = 0;
        sampleInt16Value = (sampleInt16Value<<8) + mainSoundFileBytes[i+1];
        sampleInt16Value = (sampleInt16Value<<8) + mainSoundFileBytes[i];

        //multiple sample 
        sampleInt16Value*=volume;

        //store the sample
        soundWithVolumeBytes[i] = (Byte)sampleInt16Value;
        soundWithVolumeBytes[i+1] =(Byte) (sampleInt16Value>>8);

    }

    NSData * soundDataWithVolume = [[NSData alloc] initWithBytes:soundWithVolumeBytes length:range.length];
    free(soundWithVolumeBytes);

    return [soundDataWithVolume autorelease];

} 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:40:47.680

当 的值`range.location`不为零时，您的`for`循环会修改超出分配范围的位置。这些行

```
soundWithVolumeBytes[i] = ...
soundWithVolumeBytes[i+1] = ... 
```

写入位置从`range.location`到`range.location+range.length-1`，但分配的范围仅从零到`range.length`。您需要将行更改为

```
soundWithVolumeBytes[i-range.location] = ...
soundWithVolumeBytes[i+1-range.location] = ... 
```

此外，由于您增加了 2，因此最后一次迭代可能会访问缓冲区末尾之后的一个字节，以防万一`range.location+range.length`。

# eclipse - Javah：所选资源未解析为 Java 元素

> ID：15068211
> 
> 赞同：2
> 
> 时间：2013-02-25T13:33:51.073
> 
> 标签：eclipse, javah

我正在尝试使用**eclipse**中的 javah 从 Java 类创建 JNI 标头。我使用以下配置在外部工具（运行-> 外部工具-> 外部工具配置）中创建了一个程序：
**位置**：`${env_var:JAVA_HOME}\bin\javah.exe`
**工作目录**：`${workspace_loc:/MyProject/bin/classes}`
**参数**：`-jni -verbose -d "${project_loc}${system_property:file.separator}jni" ${java_type_name}`
但是当我运行它时，会发生此错误：

```
The selected resource does not resolve to a Java element 
```

我该如何解决这个错误？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:02:41.430

我在我的**论点**中使用了这个，我的问题就消失了：

```
-d ${project_loc:}/jni -classpath E:\Android\adt-bundle-windows-x86_64\sdk\platforms\android-14\android.jar;${project_loc}/bin/classes com.example.myreallyjniproject.MainActivity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T16:17:04.840

我刚刚遇到了同样的问题，请注意您的修复并不理想，因为您将“$ {java_type_name}”替换为硬编码的类名。此配置不适用于多个 java 文件或其他类。

为了使“${java_type_name}”变量起作用，您必须在 eclipse 中选择一个 java 文件，然后运行 ​​javah eclipse 配置，否则它会在您保存给定的 java 文件时起作用。

我没有直接调用 javah，而是创建了一个 ant 脚本来处理我拥有的多个类并在 Project Builder 设置中配置该 ant 脚本。

# r - 优化错误：无法在初始参数处评估函数

> ID：15068213
> 
> 赞同：8
> 
> 时间：2013-02-25T13:33:54.937
> 
> 标签：r, nonlinear-functions, nonlinear-optimization, nlm

所以我在 R 中遇到了这个奇怪的错误。我有一个简单的函数，它在比较真实价格和模拟价格时返回一个错误项，称为`hestondifferences()`.

当我尝试通过以下方式找到局部最小值时：

```
 res<-optim(fn=hestondifferences, par = c(vT=vT, rho=rho, k=k, sigma=sigma)) 
```

我收到错误消息：

> optim(fn = hestondifferences, par = c(vT = vT, rho = rho, k = k, : 函数无法在初始参数处评估) 中的错误

让我困惑的是，直接使用初始参数调用函数会`hestondifferences(vT, rho, k, sigma)`返回正确的值。

该函数`hestondifferences()`的编写方式是，只要对某些参数集无法进行模拟，它就会返回`NA`符合`optim`() 期望的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:50:11.493

Optim 期望函数只有一个参数。因此，所有进一步的参数都应该在一个向量中传递。即：函数必须是**hestondifferences(c(vT, rho, k, sigma))**而不是 hestondifferences(vT, rho, k, sigma)。请参阅[文档](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/optim.html)：

> fn ：要最小化（或最大化）的函数，第一个参数是要进行最小化的参数向量。它应该返回一个标量结果。

# c# - Win32_PerfFormattedData_PerfOS_Memory 的 C# WMI 查询返回“无效类”

> ID：15068215
> 
> 赞同：1
> 
> 时间：2013-02-25T13:34:05.983
> 
> 标签：c#, wmi

我正在运行 Windows 7 64 位。

这个问题最近才出现，因为几个月前我一直在 WMI 的同一部分工作，没有出现问题。

这是一个特定于机器的问题，因为我已经在其他几台 PC 上尝试过这个测试程序并且它可以工作。

我已经运行了 wbemtest，与身份验证类型数据包连接，并成功枚举了 Win32_PerfFormattedData_PerfOS_Memory 对象，我可以查看 MOF 的内部结构，这是我在我的软件中尝试做的事情。

我还删除并重建了 WMI 存储库并尝试重新同步 PERF 数据。

我的 C# 应用程序还连接到 Packet 的身份验证类型。

这是我的简单测试应用程序 ( [pastebin](http://pastebin.com/nvNKCM2y) ) 的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Management;

namespace WMITest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show(Dump());
        }

        string Dump()
        {
            string HOST = "WILLIAM-PC";
            string Data = "";

            try
            {
                ConnectionOptions CO = new ConnectionOptions();
                CO.Authentication = AuthenticationLevel.Packet;                

                ManagementScope Scope = new ManagementScope(@"\\" + HOST + @"\root\cimv2", CO);

                Scope.Connect();

                if (! Scope.IsConnected)
                {
                    MessageBox.Show("Not connected!");
                }

                Scope.Options.EnablePrivileges = true;

                SelectQuery Query = new SelectQuery("SELECT * FROM Win32_PerfFormattedData_PerfOS_Memory");

                ManagementObjectSearcher MOS = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject MO in MOS.Get())
                {
                    foreach (PropertyData PD in MO.Properties)
                    {
                        Data = Data + PD.Name + " = " + PD.Value + "\n";
                    }
                }

                return Data;
            }
            catch (Exception E)
            {
                return "Exception: " +E.Message ;   
            }
        }
    }
} 
```

任何建议将不胜感激。谢谢你。

# quickbooks - 如何使用 QBFC 从快速书籍中查找每个项目的计数

> ID：15068218
> 
> 赞同：0
> 
> 时间：2013-02-25T13:34:10.620
> 
> 标签：quickbooks, quickbooks-online

我正在使用 QBFC 将快速书籍中的项目数据导入我自己的项目。

使用代码：1 我可以在快速书籍中找到总共有多少项目。

我有一个要求从快速书籍中找到每个项目类型的计数。

但是使用代码：我无法找到特定项目中有多少项目（例如：服务）

代码：1

```
IORItemRet itemRet = default(IORItemRet);
IORItemRetList itemRetList = default(IORItemRetList);
IResponse response = responseSet.ResponseList.GetAt(0);
if ((response.Detail != null))
{
    itemRetList = (IORItemRetList)response.Detail;
    if ((itemRetList != null))
    {
        int i = 0;
        for (int j = 0; j <= itemRetList.Count - 1; j++)
        {
        }
    }
} 
```

代码：2

```
IItemServiceRet itemSeriveRet = default(IItemServiceRet);
IItemServiceRetList itemServiceRetList = default(IItemServiceRetList);
IResponse response = responseSet.ResponseList.GetAt(0);
if ((response.Detail != null))
{
    itemServiceRetList = (IItemServiceRetList)response.Detail;  //Com object Error
    if ((itemServiceRetList  != null))
    {
        int i = 0;
        for (int j = 0; j <= itemServiceRetList.Count - 1; j++)
        {
        }
    }
} 
```

//Com对象错误

无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Interop.QBFC10.IItemServiceRetList”。此操作失败，因为 IID 为“{C53D1081-9FE4-4569-9181-A9D7E0155907}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

现在让我看看如何从快速书籍中找到每个项目的数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:53:36.337

在您的代码中，您似乎正在检查 response.Detail 是否为空。但是您是否也在检查 response.StatusCode 和 responseType 的值？如果您收到错误，那么您可能会收到可能未实现 IORItemRetList 接口的响应。[请参阅屏幕参考](https://member.developer.intuit.com/qbSDK-current/Common/newOSR/index.html)中的以下代码。

```
IResponse response = responseList.GetAt(i);
//check the status code of the response, 0=ok, >0 is warning
if (response.StatusCode >= 0)
{
  //the request-specific response is in the details, make sure we have some
  if (response.Detail != null)
  {
    //make sure the response is the type we're expecting
    ENResponseType responseType = (ENResponseType)response.Type.GetValue();
    if (responseType == ENResponseType.rtItemQueryRs)
    {
      //upcast to more specific type here, this is safe because we checked with response.Type check above
      IORItemRetList OR = (IORItemRetList)response.Detail;
      WalkOR(OR);
    }
  }
} 
```

请注意上面代码中的注释：

> **这是安全的，因为**我们检查了 response.Type 检查上面

在 SDK 程序员指南 (p.107) 中它指出：

> ...作为查询响应的响应对象包含一个 Ret 列表对象，该对象可能包含多个 Ret 对象。一个不是查询响应的响应对象只包含一个 Ret 对象而**没有 Ret list**。在处理响应数据时，这种差异至关重要。

一旦你得到接口检查，你的 for 循环应该可以正常工作。

# gwt - 在 GWT 中在运行时修改小部件的背景图像

> ID：15068226
> 
> 赞同：0
> 
> 时间：2013-02-25T13:34:29.480
> 
> 标签：gwt

我想让用户从 JPG 列表中选择一个图像，然后将此图像设置为面板的背景。我看不到使用 CSS 的简单方法。有人有任何关于如何以编程方式进行操作的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:12:59.367

允许用户从列表中选择图像并选择您所做的图像

```
panel.getElement().getStyle().setBackgroundImage( "image path" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:47:46.907

```
.panelImage {
background-image: url(properPathOfImage);
background-repeat: no-repeat;
height,width****etc
} 
```

重量：

```
panel.setStyleName("panelImage "); //This will set background first 
```

然后正如@Adarsha 建议在语法上进行更改

```
panel.getElement().getStyle().setBackgroundImage( "image path" ); 
```

# php - 使用数组传递可选函数参数的更简单方法

> ID：15068228
> 
> 赞同：0
> 
> 时间：2013-02-25T13:34:31.817
> 
> 标签：php, function, parameters, parameter-passing, optional-parameters

当我创建一个具有可选参数的函数时，我必须考虑哪个最有可能被传递，这决定了我在函数声明中指定它们的顺序。

使用位置不太好的 $mandatoryParam 执行以下函数：

```
public function myFunc($mightBeEmptyA, $mightBeEmptyB, $mandatoryParam)
{

} 
```

这是更好的做法吗？做以下事情会更好吗？：

```
...
$this->myFunc(array('mightBeEmptyA' => 'myValue')) ;
...

public function myFunc($params)
{
    if($params['mightBeEmptyA'])
    {
        // Do something....
    }
} 
```

改为使用数组传入参数。处理数组中的参数所需的额外逻辑是否值得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:38:09.083

是的，如果你的函数需要很多参数。例如过滤某些数据的函数，并且您有许多过滤器。

我通常这样做：

```
public function myFunc(array $args){

  $args += array(
     'mightBeEmptyA' => 'defaultVal',
     // ...
  );

  extract($args, EXTR_SKIP);

  // and here I can use $mightBeEmptyA
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:40:17.787

您应该以这种方式查看[func_get_args](http://php.net/manual/en/function.func-get-args.php)从技术上讲，您传递给函数的内容并不重要，您可以在函数本身中对其进行排序。如果您不想通过，则根本不需要传递任何东西。

```
public function myFunc()
{
    if (func_num_args()) {
        // has arguments
        $arg_list = func_get_args();
        ...
    } else {
        // no arguments
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:42:08.747

您可以使用默认参数

```
public function myFunc( $mandatoryParam,$mightBeEmptyA="", $mightBeEmptyB="")
{

} 
```

但是，如果存在不应该提供您的可能BeEmptyA 但需要提供可能BeEmptyB 的情况。那么您可以像下面这样调用它

```
myFunc("mandatory","","OptionalB"); 
```

因此，根据您的情况接听电话。

# c# - 安装exe时如何将文件复制到指定路径？

> ID：15068229
> 
> 赞同：0
> 
> 时间：2013-02-25T13:34:34.813
> 
> 标签：c#, cmd, windows-installer, xcopy

`exe`我必须将驻留在同一文件夹中的文件（在安装时）复制`msi installer`到某个不同的路径。为此，我在`installer`课堂上编写了以下代码。

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new     
System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "xcopy";
startInfo.UseShellExecute = true;
string directory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
string SourcePath = Path.GetFullPath("C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bin");
StreamWriter sw = new StreamWriter(@"C:\Users\lovestone\Desktop\data.txt");
sw.WriteLine(directory);
sw.WriteLine(SourcePath);
startInfo.Arguments = "\"" + directory + "\"" + " " + "\"" + SourcePath + "\"" + @" /e /y /I";
process.StartInfo = startInfo;
process.Start(); 
```

我对这个类没有任何问题，`installer`因为它是`data.txt`在给定路径上创建的（在安装时）。我应该如何将文件从复制`directory`到`SourcePath`？

我应该使用`cmd`而不是`xcopy`吗？

## 更新

正如我所提到的，我想从存在的同一个文件夹中复制一个`exe`文件`installer`。当我安装我的应用程序时。它显示一个错误：

```
Unable to find the file from "C:\Program Files (x86)\Default Company Name\inataller". 
```

它试图从`program files`目录中选择文件。但它应该与我所在的目录相同`exe`。我不想`hard-coded`找到 exe 的路径，因为它会分发给其他客户端。从同一文件夹中选择文件的适当代码是什么？

我对代码进行了一些更改

```
string directory = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);
string SourcePath = Path.GetFullPath("C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bin");
File.Copy(Path.Combine(directory, "MyAdHocTestCert.cer"),Path.Combine(SourcePath, "MyAdHocTestCert.cer")); 
```

现在它显示：`Object reference not set to an instance of an object`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:37:38.223

如果您想将 myFile.exe 从“目录”位置复制到“SourcePath”。

```
string sourceFileName = Path.Combine(directory, "myFile.exe");
string destFileName = Path.Combine(SourcePath, "myFileCopy.exe");

File.Copy(sourceFileName, destFileName); 
```

sourcefilename 只是您要复制的文件的位置，而 destFileName 是您要将其复制到的目标。包括文件名。

至于获取exe的位置，您可以使用

```
string directory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:54:38.577

忽略到目前为止所做的事情，创建一个新的安装程序并像往常一样将证书文件写入其中。构建 MSI 并运行命令：

```
msiexec /a foo.msi TARGETDIR=C:\EXTRACT /qb 
```

现在看看 C:\EXTRACT。您将看到未压缩的 MSI 和文件目录结构。使用要部署的文件覆盖 CER 文件。现在在机器上运行该 MSI 并记下部署了哪个 CER 文件。

真的应该这么简单。如果您使用的是更好的工具，例如 InstallShield 或 WiX，您可以构建部分压缩的 MSI 和未压缩的单个文件。在 MSI 调用的 DLL 调用的 CMD 调用的 XCOPY 中，不需要所有这些可怕的自定义操作反模式。顺便说一句，您知道 VDPROJ 已从 VS2012 中删除，对吗？

# javascript - 使用正则表达式精确匹配

> ID：15068232
> 
> 赞同：0
> 
> 时间：2013-02-25T13:34:39.137
> 
> 标签：javascript

```
var name ='John Rock';
alert((/^John|Steve$/i).test(name)); 
```

[http://jsfiddle.net/czBhb/](http://jsfiddle.net/czBhb/)

此代码警告`true`，因为不使用精确的数学，但必须。

应该返回`true`和`John`（`joHn`大小写匹配关闭）。但不是`John 12`或`mahjohng`。

代码中有`|`，我们应该保留它。

如何修复此正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:37:17.060

*如果您的目标是完全* 匹配`John`or `Steve`，您希望在其中放置一个组：

```
alert(/^(?:John|Steve)$/i.text(name)); 
```

还要注意`i`不区分大小写。（半个多小时前，当 Beat Richartz 指出问题时，我确实在[回答你的另一个问题时指出了这一点。）](https://stackoverflow.com/a/15066690/157247)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:37:03.590

关于什么

```
var name ='John Rock';
alert((/^(John|Steve)$/i).test(name)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:37:17.057

试试这个：

```
alert(/^(?:John|Steve)$/i).test(name)) 
```

`(?:`组之间`^`和`$`没有实际创建组

`/i`对于不区分大小写

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T13:40:46.820

重点在于`^`和`$`分隔符。正如评论中已经指出的那样，它们似乎优先于 OR，因此您的正则表达式匹配以 开头`John`或以 结尾的任何内容`Steve`。

将分隔符放在 OR 之外：

```
var name ='John Rock';
alert((/^(John|Steve)$/).test(name)); 
```

# perl - Perl split() 不删除分隔符

> ID：15068243
> 
> 赞同：2
> 
> 时间：2013-02-25T13:35:16.157
> 
> 标签：perl, split, declaration, tokenize

我正在尝试解析 c 函数声明。我想从字符串中获取令牌数组。所以我使用拆分：

```
$function = "int func1(  int *   , const   float, const char[])"
print split(/(\(|\)|\*|[|]|,|\ )/, $function); 
```

它返回这个数组

```
["int" "func1", "(", "int", "*", ",", "const", "float", ",", "const", "char[]", ")"] 
```

这基本上是正确的，但我不需要删除空格。所以我期待这样的事情

```
["int " "func1", "(  ", "int ", "*   ", ", ", "const   ", "float", ", ", "const ", "char[]", ")"] 
```

我有什么选择吗？（而不是编写我自己的词法解析器）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:45:12.873

对于初学者，它不会删除空格。他们正在被退回。

```
'int',' ','func1','(','',' ','',' ','int',' ','','*','',' ','',' ','',' ','',',','',' ','const',' ','',' ','',' ','float',',','',' ','const',' ','char[]',')' 
```

它们只是作为自己的“令牌”与许多空字符串一起返回。

第一个 arg to`split`应该匹配分隔标记的内容，但这显然不是您提供的。由于实际上没有字符分隔标记，因此它必须是匹配零个字符的东西。这意味着需要使用前瞻和/或后瞻。

```
split /(?=[()*|,])|(?<=[ ()*,])(?! )/ 
```

将给出以下内容（这正是您所要求的）：

```
'int ',
'func1',
'(  ',
'int ',
'*   ',
', ',
'const   ',
'float',
', ',
'const ',
'char[]',
')' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:42:04.283

你检查过这些吗？

在 Perl 中有几种现有的解析 C 源代码的方法。

[http://search.cpan.org/~dconway/Parse-RecDescent/demo/demo_another_Cgrammar.pl](http://search.cpan.org/~dconway/Parse-RecDescent/demo/demo_another_Cgrammar.pl)

[http://www.perlmonks.org/?node_id=746341](http://www.perlmonks.org/?node_id=746341)

从示例：

```
use GCC::TranslationUnit;

  # echo '#include <stdio.h>' > stdio.c
  # gcc -fdump-translation-unit -c stdio.c
  $node = GCC::TranslationUnit::Parser->parsefile('stdio.c.tu')->root;

  # list every function/variable name
  while($node) {
    if($node->isa('GCC::Node::function_decl') or
       $node->isa('GCC::Node::var_decl')) {
      printf "%s declared in %s\n",
        $node->name->identifier, $node->source;
    }
  } continue {
    $node = $node->chain;
  } 
```

# java - 你如何在 Lucene 4.1 中索引和搜索号码

> ID：15068257
> 
> 赞同：5
> 
> 时间：2013-02-25T13:35:56.647
> 
> 标签：java, search, lucene

在我的 3.6 代码中，我将数字字段添加到我的索引中，如下所示：

```
public void addNumericField(IndexField field, Integer value) {
        addField(field, NumericUtils.intToPrefixCoded(value));
    } 
```

但是现在您需要向它传递一个 BytesRef 参数，并且完全不清楚您接下来要对值做什么，因此我将其更改为（正在进行中）

```
public void addNumericField(IndexField field, Integer value) {
        FieldType ft = new FieldType();
        ft.setStored(true);
        ft.setIndexed(true);
        ft.setNumericType(FieldType.NumericType.INT);
        doc.add(new IntField(field.getName(), value, ft));
    } 
```

看起来更整洁

在 3.6 中，我还添加了覆盖 queryparser 以使其适用于数字范围搜索，

```
package org.musicbrainz.search.servlet;

import org.apache.lucene.index.Term;
import org.apache.lucene.queryparser.classic.MultiFieldQueryParser;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.TermRangeQuery;
import org.apache.lucene.util.NumericUtils;
import org.musicbrainz.search.LuceneVersion;
import org.musicbrainz.search.index.LabelIndexField;
import org.musicbrainz.search.servlet.mmd1.LabelType;

public class LabelQueryParser extends MultiFieldQueryParser {

    public LabelQueryParser(java.lang.String[] strings, org.apache.lucene.analysis.Analyzer analyzer)
    {
        super(LuceneVersion.LUCENE_VERSION, strings, analyzer);
    }

     protected Query newTermQuery(Term term) {

        if(
                (term.field() == LabelIndexField.CODE.getName())
                ){
            try {
                int number = Integer.parseInt(term.text());
                TermQuery tq = new TermQuery(new Term(term.field(), NumericUtils.intToPrefixCoded(number)));
                return tq;
            }
            catch (NumberFormatException nfe) {
                //If not provided numeric argument just leave as is, 
                //won't give matches
                return super.newTermQuery(term);
            }
        } else {
            return super.newTermQuery(term);

        }
    }

    /**
     *
     * Convert Numeric Fields
     *
     * @param field
     * @param part1
     * @param part2
     * @param inclusive
     * @return
     */
    @Override
    public Query newRangeQuery(String field,
                               String part1,
                               String part2,
                               boolean inclusive) {

        if (
                (field.equals(LabelIndexField.CODE.getName()))
            )
        {
            part1 = NumericUtils.intToPrefixCoded(Integer.parseInt(part1));
            part2 = NumericUtils.intToPrefixCoded(Integer.parseInt(part2));
        }
        TermRangeQuery query = (TermRangeQuery)
                super.newRangeQuery(field, part1, part2,inclusive);
        return query;
    }

} 
```

所以我把这一切都弄清楚了，我不再需要它了，但不幸的是，现在没有关于这个 IntField 的查询正在工作。

进一步阅读，似乎 Intfields 仅用于范围查询，所以我不知道您是如何进行匹配查询的，以及 NumericRangeQuery 是否与我正在使用的经典查询解析器兼容。

所以我然后回去尝试将我的数值添加为编码字符串

```
public void addNumericField(IndexField field, Integer value) {

    FieldType fieldType = new FieldType();
    fieldType.setStored(true);
    fieldType.setIndexed(true);
    BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
    NumericUtils.intToPrefixCoded(value, 0, bytes);
    doc.add(new Field(field.getName(),bytes, fieldType));
} 
```

但在运行时我现在收到错误！

```
java.lang.IllegalArgumentException: Fields with BytesRef values cannot be indexed 
```

但是我需要索引字段，所以请我如何像在 3.6 中那样索引数字字段，以便我可以搜索它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T17:22:51.977

只是提醒一下，如何使用 lucene 4.7 做到这一点：

索引时，我只是按以下方式进行：

```
document.add(new IntField("int_field", int_value, Field.Store.YES)); 
```

对于搜索：

```
public class MyQueryParser extends QueryParser {

public MyQueryParser(Version matchVersion, String field, Analyzer anlayzer) {
    super(matchVersion, field, anlayzer);
}

@Override
protected Query getRangeQuery(String field, String part1, String part2, boolean startInclusive, boolean endInclusive) throws ParseException {
    if ("int_field".equals(field)) {
        return NumericRangeQuery.newIntRange(field, Integer.parseInt(part1), Integer.parseInt(part2), startInclusive, endInclusive);
    } else {
        return super.getRangeQuery(field, part1, part2, startInclusive, endInclusive);
    }
}

@Override
protected Query newTermQuery(Term term)
{
    if ("int_field".equals(term.field())) {
        try {
            int number = Integer.parseInt(term.text());
            BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
            NumericUtils.intToPrefixCoded(number, 0, bytes);
            TermQuery tq = new TermQuery(new Term(term.field(), bytes.utf8ToString()));
            return tq;
        } catch (NumberFormatException nfe) {
            //If not provided numeric argument just leave as is, won't give matches
            return super.newTermQuery(term);
        }
    } else {
        return super.newTermQuery(term);
    }
} 
```

}

通过这样做，查询像

```
 int_field: 1
 int_field: [1 TO 5] 
```

按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:07:02.487

只需使用适当的字段。例如`IntField`,`LongField`等。

参见例如[http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/IntField.html](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/IntField.html)

要查询这些字段，请参阅[Lucene LongField 使用 Query 精确搜索](https://stackoverflow.com/questions/14158512/lucene-longfield-exact-search-with-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:48:45.230

所以我已经完成了这项工作，无论这是否是做我不知道的事情的最佳方式。

1.  将数字作为字符串添加到索引

    ```
    FieldType fieldType = new FieldType();
    fieldType.setStored(true);
    fieldType.setIndexed(true);
    BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
    NumericUtils.intToPrefixCoded(value, 0, bytes);
    doc.add(new Field(field.getName(),bytes.utf8ToString(), fieldType)); 
    ```

2.  QueryParser，需要使用equals()检查字段名，以前可以直接使用==

    ```
    protected Query newTermQuery(Term term)
    {

       if (term.field().equals(LabelIndexField.CODE.getName()))
        {
            try
            {

                int number = Integer.parseInt(term.text());
                BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
                NumericUtils.intToPrefixCoded(number, 0, bytes);
                TermQuery tq = new TermQuery(new Term(term.field(), bytes.utf8ToString()));
                return tq;
            }
            catch (NumberFormatException nfe)
            {
                //If not provided numeric argument just leave as is, won't give matches
                return super.newTermQuery(term);
            }
        }
        else
        {
            return super.newTermQuery(term);

        }
    } 
    ```

3.  newRangeQuery() 的签名也发生了变化，有额外的参数 endInclusive

    ```
    public Query newRangeQuery(String field,
                               String part1,
                               String part2,
                               boolean startInclusive,
                               boolean endInclusive)
    {
        if (
                (field.equals(LabelIndexField.CODE.getName()))
                )
        {
            BytesRef bytes1 = new BytesRef(NumericUtils.BUF_SIZE_INT);
            BytesRef bytes2 = new BytesRef(NumericUtils.BUF_SIZE_INT);
            NumericUtils.intToPrefixCoded(Integer.parseInt(part1), 0, bytes1);
            NumericUtils.intToPrefixCoded(Integer.parseInt(part2), 0, bytes2);
            part1 = bytes1.utf8ToString();
            part2 = bytes2.utf8ToString();
        }
        TermRangeQuery query = (TermRangeQuery)
                super.newRangeQuery(field, part1, part2, startInclusive, endInclusive);
        return query;

    } 
    ```

4.  您可以从索引中获取原始整数值，如下所示

    ```
    NumericUtils.prefixCodedToInt(new BytesRef(code)) 
    ```

# html - 如何添加两个背景图像 - 从中 心列向左和向右

> ID：15068260
> 
> 赞同：10
> 
> 时间：2013-02-25T13:36:07.490
> 
> 标签：html, css, positioning, background-image

我有这个CSS：

```
#wrapper1 {
min-width:1020px;
min-height:100%;
}
#wrapper2 {
height:100%; 
background: url('img1.jpg') -100px 300px no-repeat, url('img2.jpg') 1165px 300px no-repeat;
}
#wrapper3 {
width:1020px;
margin:0 auto;
} 
```

这个html：

```
<div id="wrapper1">
 <div id="wrapper2">
   <div id="wrapper3" class="clearfix" <!-- content here -->
        <p>blah blah blah</p>
   </div>
 </div>
</div> 
```

我需要添加 2 个图像 - 从中​​心列向左和向右，中心列宽度没有变化，并且图像不会影响页面的整体宽度。例子：

![示例图像](../Images/519ba7d3c515933f65c0be6f8218a610.png)

我可以添加图像，并做了一些尝试

1.  当我尝试更改浏览器宽度时 - 背景图像位于中央列下方![图片](../Images/121ba34056aa4bfa39c8709b474fcaf8.png)

2.  我试图改变`min-width:1020px; to min-width:1665px;`- 乍一看，一切都很好，但对于屏幕分辨率 - 小于 1665 像素的所有内容都向右移动我尝试了几个选项但没有成功

我的问题：我可以放置一个图像，以便在您更改浏览器的宽度时 - 减少中心列左右的距离（如果没有背景图像，这是默认行为）

[这是带有图像示例的代码。](http://phpfiddle.org/main/code/zqz-jh8)

**如果我用1020px**空白中心部分制作 1 张大图像并将我的左/右图像放入其中.. 它会工作吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-25T14:00:40.230

您可以遵循多种解决方案：

**1）使用div：[好]**

创建一个良好的 div“框架”可以解决您的问题，例如：

```
<div id="allWrapper">
 <div id="leftSidebar"></div>
 <div id="centerOrContent"></div>
 <div id="rightSidebar"></div>
</div> 
```

和 CSS 的伪代码（未测试）：

```
div#allWrapper{
 width: 100%;
 height: 100%;
}
div#leftSidebar{
 min-width: [theWidthOfLeftImage] px;
 height: 100%;
 background-image: url(leftImage.jpg);
 background-position: center right;
}
etc... 
```

然后使用 CSS（浮动和大小），您可以调整视图。

**2）使用多个背景：[并不总是好的]**

您可以使用此 CSS 伪代码来使用多个背景（可在此处找到：[http](http://www.css3.info/preview/multiple-backgrounds/) ://www.css3.info/preview/multiple-backgrounds/ ）

```
div#example1 {
width: 500px;
height: 250px;
background-image: url(oneBackground), url(anotherBackground);
background-position: center bottom, left top;
background-repeat: no-repeat;
} 
```

**3）使用静态“大”图像：[懒惰的解决方案]**

按照您的建议使用静态图像（中间有空白）也可以解决问题，但如果网站是“响应式”的，您可能会遇到不同屏幕分辨率（或调整浏览器窗口大小）的图形问题。在这种情况下，您也必须固定中心列的位置和宽度（在调整窗口大小时）。

**4) 使用响应式设计：[优秀——去做吧！]**

为避免中心（内容）div 上的图像重叠，您可以将（此 div 的）背景颜色设置为白色。

同样，为了避免重叠，您可以设置一个“特殊的”响应式 CSS。这会检测窗口的宽度是否 < X 2 个图像会消失。例如，使用这个 CSS 伪代码：

```
@media only screen and (min-width: 481px) {
//here happens something when the screen size is >= 481px
 div#example {
   background-image: url(oneBackground);
 }
}

@media only screen and (max-width: 481px) {
//here happens something when the screen size is <= 481px
 div#example {
   background-image: none;
 }
} 
```

这里有一些关于响应式设计的链接：

[http://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design](http://webdesignerwall.com/tutorials/5-useful-css-tricks-for-responsive-design)

[http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow](http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:56:12.330

您可以使用两个具有两个背景的绝对 DIV。一个左居中，另一个居中：

将 DIV 放置在站点中您想要的任何位置。（他们绝对定位）

HTML：

```
<div class="background" id="background1"></div>
<div class="background" id="background2"></div> 
```

CSS：

```
.background{
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
}

#background1{
    background: url(yourImage1.jpg) no-repeat 100% 0;
}

#background2{
    background: url(yourImage2.jpg) no-repeat 0 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T10:06:07.543

这对我来说是一个工作代码。唯一会改变的是`background-position`两个属性。

```
.image-bg-custom1 {
    background-image: url(/images/left-get.png);
    background-repeat: no-repeat;
    background-position: center left;
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
}

.image-bg-custom2 {
    background-image: url(/images/right-get.png);
    background-repeat: no-repeat;
    background-position: center right;
    height: 100%;
    right: 0;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -1;
} 
```

# bash - 获取网页内容并进行比较

> ID：15068261
> 
> 赞同：0
> 
> 时间：2013-02-25T13:36:13.707
> 
> 标签：bash, shell

有人可以帮助/纠正我编写一个 shell 脚本吗，这就是我想要做的

*   获取网页内容
*   比较内容
*   如果内容相同则返回0
*   如果不返回 2

这是我的代码

```
for cluster in $CLUSTERS
do
    for applis in $(eval echo \$${cluster}_APPLIS)
    do
       CONTENT=$(wget -q -O - "http://$server/$applis")
       if [ "$CONTENT" -eq 1 ]
       then
       exit_code=0
       else
       exit_code=2
       fi
     done
done

[[ -z "$error_server" ]] && error_server="aucune"

case $exit_code in
    "2")
            echo "CRITICAL - App Version Mismatch"
            exit 2
            ;;
    "1")
            echo "WARNING - instance(s) indisponible(s)"
            exit 1
            ;;
    "0")
            echo "OK - All apps have the save version"
            exit 0
            ;;
    *)
            echo "CRITICAL - there's something wrong with this script ..."
            exit 2
            ;;
esac 
```

任何帮助或建议将不胜感激

问候工厂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:37:51.297

您可以使用 diff 来比较文件的两个版本。第一个变量用于获取网页的第一个版本。我不确定 first 应该在第一个循环内部还是外部初始化。

```
first=1
for cluster in $CLUSTERS
do
     for applis in $(eval echo \$${cluster}_APPLIS)
     do
        if [ $first -eq 1 ];then
             first=0
             PREV_CONTENT=$(wget -q -O - "http://$server/$applis")
        else
             CONTENT=$(wget -q -O - "http://$server/$applis")
             diff $PREV_CONTENT $CONTENT
             PREV_CONTENT=$CONTENT
             result=$?
        fi
        if [ "$result" -eq 0 ]
        then
           exit_code=0
        else
           exit_code=2
       fi
    done 
```

完毕

# ios - 使用后台线程读取资产库的完成块

> ID：15068262
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:36:13.577
> 
> 标签：ios, xcode4, objective-c-blocks

我正在显示一些警报视图，例如 Don 操作，然后在此之后/下方，我正在调用一种方法来从 iphone 的资产库中读取资产库图像，就像在 Backgroung 线程中一样。读取图像的完成处理程序位于后台线程中运行的同一 fx 中（我正在使用 fx isMainThread 打印 Bool 值）。当控制在读取图像的完成块内时，它开始执行主线程中的代码。为什么这样？完成块是在后台线程还是主线程中运行。

IMP：当我第一次点击操作时，这个完成阻塞在主线程中只发生一次或启动应用程序启动，第一次操作后它不会阻塞 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:36:11.940

我解决了这个问题。实际上我的代码没有问题。我上面解释的问题仅与越狱设备有关。其他最新设备，代码运行良好。

# heroku - Heroku 在部署后缺少一些更改

> ID：15068266
> 
> 赞同：1
> 
> 时间：2013-02-25T13:36:28.290
> 
> 标签：heroku

我已经向 Heroku 推送了一些提交，在出现错误并运行后`heroku run bash`，我看到一些文件丢失/尚未部署。我认为这可能是由于我在此部署之前完成的一些变基/推送周期。我已经设置了一些插件，所以我想避免创建一个新应用程序并从头开始。

有替代方法吗？

编辑：

我所做的要点：

1.  `rebase`
2.  `push -f`
3.  看到部署错误..
4.  更多`rebase`_
5.  `push -f`
6.  看到 Heroku 构建中缺少文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:11:10.000

您应该检查所有需要的文件是否都已添加到您的 Git 存储库中，并且您的应用程序在`.gitignore`或`.slugignore`. 查看这篇开发中心文章了解详情：[https ://devcenter.heroku.com/articles/git](https://devcenter.heroku.com/articles/git)

# php - 如何将多张表合并为一条sql语句

> ID：15068267
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:36:27.967
> 
> 标签：php, sql, join

我有 4 个表要加入到一个 sql 语句中。

这些是我的表：

1.  **exp_members** : card_id (pk)
2.  **交易**：card_id(pk), restaurant_id(pk)
3.  **exp_channel_data** : restaurant_id(pk)
4.  **exp_channel_titles** : restaurant_id(pk)

我已经尝试过这样的声明，但这不起作用

```
 SELECT cm.*, t.*, cd.*, ct.*
FROM exp_members as cm
Inner JOIN transactions as t on (cm.card_id = t.restaurant_id)
Inner JOIN exp_channel_titles as ct on (ct.restaurant_id = t.restaurant_id)
Inner JOIN exp_channel_data as cd on (cd.restaurant_id = ct.restaurant_id)
order by t.created DESC limit 50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:01:56.600

如果你把这样的东西：

```
SELECT t.*. cd.*, ct.*
FROM transactions as t
LEFT JOIN exp_channel_titles as ct on (t.restaurant_id = ct.restaurant_id)
LEFT JOIN exp_channel_data as cd on (cd.entry_id = ct.entry_id)
WHERE t.cardid > 0 
and t.restaurant_id > 0
and ct.status= 'open'
order by t.created DESC limit 50 
```

它给了你一些东西？？？.....对不起，如果没有你的表格结构，很难找到一个简单的解决方案:)

萨卢多斯。

# javascript - document.getElementById("ID").value 不起作用

> ID：15068271
> 
> 赞同：0
> 
> 时间：2013-02-25T13:36:53.557
> 
> 标签：javascript, html

我需要你的帮助。我有一个非常简单的问题，我无法弄清楚。它很难解释，但我在一行上有评论，希望你能理解。这是我的代码。很抱歉发了这么长的帖子，但我似乎无法摆脱这个洞。

```
function CheckLength()
{
  var stringpassword = document.getElementById('Pass').value;
  alert(document.getElementById('Pass').value);   --> this part is only printing a blank. 
  /*    
  if(document.getElementById("Pass").value.length > 8)
  {
    return true;
  }
  else
  {
    alert(document.getElementById("Pass").value.length);
    return false;
  }
  */
}

function Check(a) 
{ 
  switch(a)
  {
    case 1 : 
      var first = document.getElementById("Uname").value.toUpperCase().indexOf(document.getElementById("Fname").value.toUpperCase());
      var last = document.getElementById("Uname").value.toUpperCase().indexOf(document.getElementById("Lname").value.toUpperCase());
      if(first !=-1 || last != -1)
      {
    alert("huy mali ang username. bawal yan pre");
    document.getElementById("Uname").value = "";
      }
      break; 

    case 2 :
      var gate = 0;
      var first = document.getElementById("Pass").value.toUpperCase().indexOf(document.getElementById("Fname").value.toUpperCase());
      var last = document.getElementById("Pass").value.toUpperCase().indexOf(document.getElementById("Lname").value.toUpperCase());

      if(first !=-1 || last != -1)
      {
        alert("mali dahil sa name");
        gate++;
      }
      if(!CorrectPassword())
      {     
        gate++;
      }
      if(!CheckLength())
      {    
        gate++;
      }

      if(gate != 0)
      {
    alert("Please follow password policy");
        document.getElementById("Pass").value="";
      }
      break;

    case 3:
      if(document.getElementById("Pass").value != document.getElementById("Rpass").value)
      {
    document.getElementById("Rpass").value = "";
      }
      break;
  }
} 
```

身体某处：

```
<input type="Password" placeholder="Password" value="" id="Pass" onblur="Check(2)"/> 
```

但是当我尝试时。在密码字段上键入后。然后单击其他内容。警报框仅返回一个空白警报框。即使是简单的赋值语句也不起作用？原谅我英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:07:05.707

我让它工作......我不得不取出 checkPassword() 的检查，因为你没有提供那个功能。

在您的 #Pass 元素上，删除 onblur 属性。我将它分配在我提供的 js 的底部。

JSFiddle：http: [//jsfiddle.net/jeffshaver/vcRDp/1/](http://jsfiddle.net/jeffshaver/vcRDp/1/)

```
function CheckLength() {
    var stringpassword = document.getElementById('Pass').value;
    alert(document.getElementById('Pass').value);
/*  
    if(document.getElementById("Pass").value.length > 8)
    {
    return true;
    }
    else
    {
    alert(document.getElementById("Pass").value.length);
    return false;
    }
*/
}

function Check(a) { 
    switch(a) {
        case 1 : 
            var first = document.getElementById("Uname").value.toUpperCase().indexOf(document.getElementById("Fname").value.toUpperCase());
            var last = document.getElementById("Uname").value.toUpperCase().indexOf(document.getElementById("Lname").value.toUpperCase());
            if(first !=-1 || last != -1) {
                alert("huy mali ang username. bawal yan pre");
                document.getElementById("Uname").value = "";
            }
            break; 

        case 2 :
            var gate = 0;
            if(first !=-1 || last != -1) {
                alert("mali dahil sa name");
                gate++;
            }
            if(!CheckLength()) {
                gate++;
            }

            if(gate != 0) {
                alert("Please follow password policy");
                document.getElementById("Pass").value="";
            }
            break;

        case 3:
            if(document.getElementById("Pass").value != document.getElementById("Rpass").value) {
                document.getElementById("Rpass").value = "";
           }
            break;
    }

}

documentgetElementById('Pass').addEventListener('blur', function() { Check(2) }, false); 
```

# javascript - Highcharts：在倒置图表中禁用标记旋转

> ID：15068288
> 
> 赞同：1
> 
> 时间：2013-02-25T13:37:40.743
> 
> 标签：javascript, svg, highcharts

我有一个用 highcharts.js 创建的图表，其中轴是倒置的（y 是水平的，x 是垂直的）。在图表中，我有几个图，一个是带有图片作为标记的散点图。我遇到的问题是，当图表反转时，标记默认旋转 90 度。有没有办法让标记不被旋转轴倒置的图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:44:39.463

这是我能想到的最好的......

```
function rotateMarker()
{
    $.each( $('.highcharts-markers').children(), function(){
        var marker = $(this);
        // rotate 90 degrees around the middle point of the marker
        var rotateAttr = 'rotate(90,'+(parseFloat(marker.attr('x'))+parseFloat(marker.attr('width'))/2)+','+marker.attr('y')+')';
        marker.attr('transform',rotateAttr);
    });
} 
```

下一个问题是在绘图完全渲染之前您不能运行此代码。对于 highcharts 动画，我不得不将其设置为 setTimeout。

[在这里](http://jsfiddle.net/gvTWf/1/)看小提琴。

**回应评论**

我最初使用的是从左到右相同的图像。对于“镜像”问题，您可以旋转 270 度，使其与原来的方向相同吗？

[在此处](http://jsfiddle.net/gvTWf/2/)查看更新的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T00:03:59.053

```
var markers= document.getElementsByClassName("highcharts-markers");
for(var i= 0; i< markers.length; i++) {
  var items= markers[i].childNodes;
    for(var j= 0; j< items.length; j++) {
      var bbox= items[j].getBBox(); var cx= bbox.x+ bbox.width/2; var cy= bbox.y+ bbox.height/2;
      items[j].setAttribute("transform", "rotate(90" + ", " + cx + ", " + cy + ")");
    }
  }
} 
```

# windows-8 - LocalState 文件夹的部署

> ID：15068295
> 
> 赞同：0
> 
> 时间：2013-02-25T13:38:05.873
> 
> 标签：windows-8

我正在使用 LocalState 文件夹为我的 Windows 8 应用程序启用缓存。为了提供示例数据（应用程序使用 web 服务来收集它的数据），我想提供一组已经缓存的默认数据。

我可以为将在应用程序包中的 LocalState 提供示例数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:47:57.450

您可以将文件放入您的包中，然后在启动时检查本地文件夹中是否已有数据，如果没有，请从包存储中复制/填充它（例如，请参阅[CopyAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br227104.aspx)）。如果是这样，什么也不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:31:52.037

这是一些示例 JS 代码 - 应该能够相当容易地转换为 .NET - 使用 async/await 代替 Promises。

```
WinJS.Application.local.exists('somedata.json').done(
               function (found) {
                   if (!found) {
                       return copyStartData('somedata.json');
                   }
               }
           );

function copyStartData(copyfile) {
        return Windows.ApplicationModel.Package.current.installedLocation.getFolderAsync('startdata').then(
            function (startData) {
                return startData.getFileAsync(copyfile).then(
                    function (file) {
                        if (file) {
                            return file.copyAsync(WinJS.Application.local.folder);
                        }
                    });
            });
    } 
```

该函数采用您要从安装包复制到用户本地计算机的文件的名称。

# c# - C# 到 SQL Server 的持久连接

> ID：15068301
> 
> 赞同：0
> 
> 时间：2013-02-25T13:38:22.323
> 
> 标签：c#, sql-server, database

我正在编写 C# TCP 服务。在此服务中，客户端连接到我们的 TCP 服务器以获取或写入一些数据。

问题：

早上，我们重新启动数据库服务器，服务失去与数据库的连接。当下一个请求进入我们的系统时，不再有数据库连接。

有人知道我能做什么吗？

重启后如何保持或重新连接到数据库服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:45:30.953

在您的情况下，我认为最好不要在整个服务生命周期内维护与 sql 数据库的开放 SqlConnection 。

相反，实例化一个 SqlConnection 对象，打开它，处理您的查询，然后关闭它：它将使用 SQL Server 的内部[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)机制。

例如，您可以将每个查询包含在打开和关闭连接的代码块中：

```
using(var cn = new SqlConnection(csString))
{
    cn.Open();

    ... // your query

    cn.Close();
} 
```

通过这种方式，当数据库每晚重新启动时，它将对您透明。

# python - snipmate 片段中的 vim 命令

> ID：15068305
> 
> 赞同：1
> 
> 时间：2013-02-25T13:38:29.140
> 
> 标签：python, vim, snipmate

我正在使用带有 vim 的 snipmate 插件。如何在 snipmate 片段中编写任何可以写入 .vimrc 的命令？比如`<ESC>`, `<leader>`,`<cr>`等等...

我希望能够编写一个导入 python 调试器、设置跟踪然后返回正常模式的片段。我很难回到正常模式。我不知道如何使用 snipmate 对其进行编码。

基本上我想要这样的东西，但是这不能正常工作：

```
snippet pdb
    import pdb; pdb.set_trace()<ESC> 
```

这只会`'<ESC>'`在最后添加，但我想返回正常模式。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:06:30.887

snipMate*片段*就像内置的`:abbreviate`类固醇，通常在其中包含参数插入、镜像和多个停止。看来您在这里不需要所有这些高级功能，因此最好使用普通的插入模式缩写来为您提供更好的服务，您确实可以在其中使用 Vim 键符号：

```
:ia pdb import pdb; pdb.set_trace()<ESC> 
```

使用 snipMate 本身，离开插入模式是不可能的。

# asp.net - 如何使用 MSBuild 脚本自动执行特定发布配置文件的 Web 部署？

> ID：15068307
> 
> 赞同：10
> 
> 时间：2013-02-25T13:38:31.217
> 
> 标签：asp.net, msbuild, webdeploy

我有一个 Visual Studio 2012 解决方案，其中包含三个 Web 项目。他们每个人都有一个 web 部署发布配置文件，它在特定目录中创建一个包。解决方案本身也有一个特殊的部署配置。

使用 msbuild，在部署配置中构建解决方案很容易，但是如何使用 msbuild 构建**脚本/任务（而不是调用命令行）**使用特定配置文件发布 3 个 Web 项目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T00:34:58.010

我认为您可以尝试以下方法：

```
msbuild.exe MyProject.csproj /p:DeployOnBuild=true;PublishProfile=MyProfile 
```

正如史蒂夫所指出的， Sayed Ibrahim Hashimi 的[这篇](https://stackoverflow.com/a/8664145/1990682)文章似乎详细解决了您从 msbuild 发布的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:17:03.940

所有三个已发布的配置文件是否都以相同的方式命名？如果是这样，你可以添加

`/p:PublishProfile=MyProfile`到 msbuild 命令？

有关更多信息，请参阅[此链接](https://stackoverflow.com/questions/4890289/how-do-i-configure-msbuild-to-use-a-saved-publishprofile-for-webdeploy)

# java - 如何使 Set 为空

> ID：15068314
> 
> 赞同：0
> 
> 时间：2013-02-25T13:39:09.980
> 
> 标签：java, set

我想将我的集合初始化为空（不为空），有人可以帮助我吗？这是我的代码

```
public class Graph {
private Set<Vertex> vertices;

public Graph() {
    vertices = {};
} 
```

我知道这是一种错误的方法，但不能做任何其他事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:40:24.927

Set 是一个*接口*。您需要决定所需的*实现*，然后使用无参数构造函数进行构造。例如

```
vertices = new HashSet<Vertex>(); 
```

或者

```
vertices = new TreeSet<Vertext>(); 
```

有关vs的更多信息，请参阅[此 SO 问题/答案](https://stackoverflow.com/questions/1463284/hashset-vs-treeset)。鉴于这是一个接口，可以存在任意数量的实现（您甚至可以编写自己的实现），但我怀疑您会希望从这两个中的一个开始。`TreeSet``HashSet``Set`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:40:52.423

代替

```
vertices = {}; 
```

和

```
vertices = new HashSet<Vertex>(); 
```

`HashSet`这将为您的`Set`界面初始化一个空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:40:14.327

您需要执行一个构造函数：

```
public Graph() {
  vertices = new HashSet<>();
} 
```

`Set`是一个接口定义，因此您需要选择`Set`. `HashSet`是一个这样的实现，但又`TreeSet`是另一个（`TreeSet`实际上是 a 的实现`SortedSet`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T13:40:15.353

```
public Graph(){  
  vertices = new HashSet<Vertex>();  
} 
```

或者

```
public Graph(){  
  vertices = new TreeSet<Vertex>();  
} 
```

# ipad - 在 iPad 上查看时的响应式网页设计缺少组件

> ID：15068317
> 
> 赞同：0
> 
> 时间：2013-02-25T13:39:25.907
> 
> 标签：ipad, responsive-design, missing-features

我对响应式网页设计相当陌生，正在寻找指导。我的问题在于缺少组件。我有一个用社交媒体图标固定在底部的页脚，当我在桌面上将其调整为 iPad 大小时，它们是可见的。但是，当我使用真正的 iPad 时，图标不见了。

如果我在 iPad 上刷新得足够快，我可以看到我放在页脚下方的边框，所以我使用 z-index。没运气。我认为这可能是浏览器的问题，但仍然没有运气。

我忽略了什么吗？

这是测试站点： http: [//liannesuggitt.com/test/portfolio/](http://liannesuggitt.com/test/portfolio/)

当以多种尺寸查看时：

[http://ami.responsivedesign.is/?url=http://www.liannesuggitt.com/test/portfolio/](http://ami.responsivedesign.is/?url=http://www.liannesuggitt.com/test/portfolio/)

如果在实际的 iPad 上查看其中任何一个，页脚中的图标就会消失。

如果有帮助，我正在使用媒体查询。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:45:32.733

这是视网膜 iPad 吗？此外，您是否在与 iPad 具有相同分辨率（宽度）的浏览器窗口中查看了该站点。如果是这样，什么浏览器和页脚图标仍然丢失？这将确定问题是特定于 iPad 还是媒体查询本身的问题。

# iphone - 如何在 ipad 中以编程方式启用“信息亭模式”？

> ID：15068318
> 
> 赞同：9
> 
> 时间：2013-02-25T13:39:26.693
> 
> 标签：iphone, ipad, kiosk-mode, home-button

我正在制作一个需要用户全神贯注的应用程序，直到达到指定的目标。在实现目标之前，如果用户尝试按下“主页”按钮，则应该禁用它，或者像 ios6 中的“信息亭模式”。我只需要在启动应用程序时以编程方式完成，不喜欢通过手动更改 iPhone/iPad 的设置菜单来做任何事情在我的应用程序中完成目标后，应该启用主页按钮。该应用程序面向企业。所以不需要应用商店的批准。这个怎么做？提前致谢。

编辑：我读到了“移动配置plist”。这需要重新启动设备。但我不喜欢重启设备。一旦我的应用程序启动，它应该处理所有事情（以编程方式）。我不希望用户/主管对此进行干预。只想在“引导访问”中禁用主页按钮，但在我的应用程序中以编程方式。“引导访问”是否有任何私有 api 可用于禁用主页按钮？

注意：不适用于越狱设备。针对企业许可的应用程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T14:07:38.863

[Zachary Christopoulos](http://www.zchristopoulos.com/2012/02/how-to-disable-ipad-home-button-kioskstore-demo-mode/)使用“移动配置列表”对此发表了一篇文章。

> 安装此配置文件后，重新启动设备时启动的第一个应用程序将是唯一运行的应用程序，直到您再次重新启动设备。

[Zachary 帖子中的](http://www.zchristopoulos.com/2012/02/how-to-disable-ipad-home-button-kioskstore-demo-mode/)示例 plist ：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>PayloadDescription</key>
            <string>Disables the home button.</string>
            <key>PayloadDisplayName</key>
            <string>Home Button Lock</string>
            <key>PayloadIdentifier</key>
            <string>com.zchristopoulos.kiosk</string>
            <key>PayloadOrganization</key>
            <string>Zachary Christopoulos</string>
            <key>PayloadType</key>
            <string>com.apple.defaults.managed</string>
            <key>PayloadUUID</key>
            <string>B2D02E2D-BAC5-431B-8A29-4B91F71C9FC1</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
            <key>PayloadContent</key>
            <array>
                <dict>
                    <key>DefaultsDomainName</key>
                    <string>com.apple.springboard</string>
                    <key>DefaultsData</key>
                    <dict>
                    <key>SBStoreDemoAppLock</key>
                    <true/>
                    </dict>
                </dict>
            </array>
        </dict>
    </array>
    <key>PayloadDescription</key>
    <string>Disables Home Button</string>
    <key>PayloadDisplayName</key>
    <string>Home Button Lock</string>
    <key>PayloadIdentifier</key>
    <string>com.zchristopoulos.hbkill</string>
    <key>PayloadOrganization</key>
    <string>Zachary Christopoulos</string>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadUUID</key>
    <string>614D1FE3-F80D-4643-AF6B-D10C4CC8737A</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
</dict>
</plist> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:02:07.790

如果不使用私有框架或越狱设备，您将无法自动禁用主页按钮。您可以做的最接近的事情是让您的最终用户使用引导访问来要求三次单击主页按钮以退出应用程序。必须首先在“设置应用程序”中的“常规”->“辅助功能”下打开引导式访问。

另请参阅：在[不重新启动设备的情况下禁用主页按钮 - Thinbug](https://stackoverflow.com/questions/12971857/disable-home-button-without-rebooting-device)

# objective-c - 引用计数对象在释放警告后使用

> ID：15068319
> 
> 赞同：1
> 
> 时间：2013-02-25T13:39:30.647
> 
> 标签：objective-c, xcode, cocoa

我收到以下代码的警告：

```
NSString *userMail = (__bridge NSString *) contactInfo;
CFRelease(contactInfo);

// Persist the user mail in NSUserDefaults
[[SettingsHelper sharedInstance] setUserMail:userMail]; 
```

发布后`contactInfo`，我不再引用它，所以我不太理解警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:48:27.310

userMail 只是对您的contactInfo 对象的引用。调用 userMail 就像调用contactInfo。在这里释放contactInfo，然后尝试将userMail（这是对contactInfo 的引用）设置为settingsHelper 的userMail。

试试这个方法

```
NSString *userMail = (__bridge NSString *) contactInfo;

// Persist the user mail in NSUserDefaults
[[SettingsHelper sharedInstance] setUserMail:userMail];
CFRelease(contactInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:49:55.613

桥接强制转换将某些内容传入或传出 ARC 控制，但它为您提供了一个指针，ARC 假定该指针保留在其他地方。

### 备选方案 1（丑陋）

如果使用 normal `__bridge`，则在完成之前无法释放对象。

```
NSString *userMail = (__bridge NSString *) contactInfo;
[[SettingsHelper sharedInstance] setUserMail:userMail];
CFRelease(contactInfo); 
```

### 备选方案 2（不错）

如果您使用`__bridge_transfer`，ARC 会为您跟踪它。

```
NSString *userMail = (__bridge_transfer NSString *) contactInfo;
[[SettingsHelper sharedInstance] setUserMail:userMail]; 
```

### 概括

`__bridge`强制转换只能用于将引用计数类型转换为非引用计数类型。例如，介于`void *`和之间`NSString *`。例如，您需要使用它在 C 中编写回调函数。

强制转换将`__bridge_transfer`允许您从一种引用计数类型转换为另一种类型，例如转换`CFStringRef`为`NSString *`.

# sql - VB.Net 超过 INTERVAL DAY(2) 字段类型

> ID：15068332
> 
> 赞同：0
> 
> 时间：2013-02-25T13:39:59.813
> 
> 标签：sql, vb.net, odbc, hp-nonstop

我有一个用 VB.NET 编写的应用程序，它通过 ODBC 驱动程序从 SQL/MX 数据库收集信息。除了一个包含两个 INTERVAL DAY(2) 字段的特定表之外，所有工作正常。当我对此表运行查询时，我收到“未知 SQL 类型 - 103”错误。如果更改我的查询以排除这些字段，那么它可以正常工作。

```
Dim SQLQueryDataAdapter As New OdbcDataAdapter(MySQLQuery, MyNonStopConnection)
Dim SQLQueryOutputTable As New DataTable("SQLOutput")
SQLQueryDataAdapter.Fill(SQLQueryOutputTable) 
```

我的 ODBC 连接字符串：

```
MyNonStopConnection = New OdbcConnection(
        "Driver=" & MyDriver & ";DSN=" & MyDSN & ";SERVER=TCP:" _
        & MyTCP & ";UID=" & MyUserName & ";PWD=" & MyPassword)

MyNonStopConnection.Open() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:05:57.210

并非所有数据类型都能正确通过 ODBC（取决于 SQL 和驱动程序的风格）。您可能需要将`CAST`相关字段作为更标准的类型。
你用的是什么驱动程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:16:03.423

您希望作为 INTERVAL 记录的最大天数是多少？

在我看来，您的 SQL 间隔字段的精度或数据类型长度不​​正确？所以有人会想问你是如何定义字段类型的？在您的表格记录中。

参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms716230 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms716230(v=vs.85).aspx)

# html - 添加文本后，Divs 不会内联

> ID：15068343
> 
> 赞同：0
> 
> 时间：2013-02-25T13:40:35.593
> 
> 标签：html, css

为什么将文本添加到内联 div 内的内容 div 后，div 不内联？它是一个错误吗？在这里我添加了我的代码。我尝试使用 jfiddle。但还没有解决办法。

```
<div style="display:block">
<div style="width:230px; color:#000; background-color:#EAEAEA; border-radius:6px;display:inline-block; ">
    <div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px;" class="font">
        Colombo City
    </div>
    <div style="width:202px;height:202px;background-image:url(images/colombo.png);margin:14px;">
    </div>
    <div style="margin:14px;word-wrap:break-word;width:202px;height:200px;background-color:#0099CC;">
        add more textadd more textadd more textadd more textadd more textadd more text
    </div>
</div>
<div style="width:230px; color:#000; background-color:#EAEAEA; border-radius:6px; display:inline-block;margin-left:3px; ">
    <div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px;" class="font">
        Great Sigiriya
    </div>
    <div style="width:202px;height:202px;background-image:url(images/sigiriya.png);margin:14px;">
    </div>
    <div style="margin:14px;word-wrap:break-word;width:202px;height:200px;background-color:#0099CC;">
        Colombo
    </div>
</div>
<div style="width:230px; color:#000; background-color:#EAEAEA; border-radius:6px;display:inline-block;margin-left:3px; ">
    <div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px;" class="font">
        YALA National Park
    </div>
    <div style="width:202px;height:202px;background-image:url(images/hillcountry.png);margin:14px;">
    </div>
    <div style="margin:14px;word-wrap:break-word;width:202px;height:200px;background-color:#0099CC;">
        Colombo
    </div>
</div>
<div style="width:230px; color:#000;  background-color:#EAEAEA; border-radius:6px; display:inline-block;margin-left:3px;">
    <div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px;" class="font">
        Arts & Crafts
    </div>
    <div style="width:202px;height:202px;background-image:url(images/crafts.png);margin:14px;">
    </div>
    <div style="margin:14px;word-wrap:break-word;width:202px;height:200px;background-color:#0099CC;">
        Colombo
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:47:04.837

你试过做

`<div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px; display:inline;" class="font">Colombo City</div>`

?? 好像你想要这些 div 内联，那么为什么他们没有那种风格呢？除了最好的 `<div style="text-transform:uppercase;font-size:14px;color:#000000;text-align:center;background-color:#FFFFFF;margin-top:6px;padding:5px; float:left;" class="font">Colombo City</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:49:59.140

您的问题是默认情况下 CSS`display`属性不是继承属性（即`display: inline-block`不会级联到子元素）。

如果要在父级上设置显示并在子级上继承，则需要添加：

```
display: inherit; 
```

在子 div 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:52:05.783

如果我正确理解您的问题，您可以尝试在您的 div 上使用以下内容。

```
float: left; 
```

我还建议使用样式表而不是可怕的内联样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:52:28.217

他们不会得到'内联'..他们是块。**只是将它们向左浮动**将迫使它们回到流动中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:53:32.887

我已添加`float: left`到您的第二个 div：

```
<div style="width:230px; color:#000; background-color:#EAEAEA; border-radius:6px;display:inline-block;float:left "> 
```

他们排成一列！

**[小提琴](http://jsfiddle.net/KABHH/2/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T13:57:48.900

我同意你在这里得到的两个好建议：（1）使用浮点数；(2) 使用样式表。

但是为了让您知道它为什么不对齐，您需要添加：

```
vertical-align: top 
```

到每个内联块的 div。原因是高度不同。在这里阅读更多：[http ://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

在这里小提琴：http: [//jsfiddle.net/QKNg8/1/](http://jsfiddle.net/QKNg8/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T14:02:19.797

不要`inline-block`只为每个 div使用`float`它们。它会为你做的。

```
 <div style="display:inline-block">
   <div class="mainsquare">
   <div class="font titlesquare">Colombo City</div>
   <div class="imagesquare1"></div>
   <div class="contentsquare">Colombo Colombo Colombo Colombo Colombo Colombo Colombo Colombo Colombo Colombo Colombo </div>
   </div>

   <div class="mainsquare left">
   <div  class="font titlesquare">Great Sigiriya</div>
   <div class="imagesquare2"></div>
   <div class="contentsquare">Colombo    </div>
   </div>

   <div class="mainsquare left">
   <div class="font titlesquare">Colombo City</div>
   <div class="imagesquare1"></div>
   <div class="contentsquare">Colombo </div>
   </div>

   <div class="mainsquare left">
   <div  class="font titlesquare">Great Sigiriya</div>
   <div class="imagesquare2"></div>
   <div class="contentsquare">Colombo</div>
   </div>
  </div> 
```

和CSS

```
.mainsquare{
 width:230px; color:#000; background-color:#EAEAEA; border-radius:6px;
 float:left;
}
.titlesquare{
  text-transform:uppercase;font-size:14px;color:#000000;text-align:center; 
   background-color:#FFFFFF;margin-top:6px;padding:5px;
}

.contentsquare{
  margin:14px;word-wrap:break-word;width:202px;height:200px;
   background-color:#0099CC;
 }

.imagesquare1{
   width:202px;height:202px;background-image:url(../images/colombo.png);
    margin:14px;
 }

.imagesquare2{
  width:202px;height:202px;background-image:url(../images/sigiriya.png);
   margin:14px;
 }

.imagesquare3{
  width:202px;height:202px;background-image:url(../images/hillcountry.png);
    margin:14px;
 }

.imagesquare4{
  width:202px;height:202px;background-image:url(../images/crafts.png);
    margin:14px;
 }
.left{
  margin-left:3px;
 }
 } 
```

看看这个**[Fiddle](http://jsfiddle.net/KABHH/5/)**。

**提示**

> **您不应该一次又一次地为同一个 css 使用 inline-css。创建一个 CSS 类并在任何你想要的地方调用它**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T14:04:07.130

添加`vertical-align: top;`到主 div 内的四个`div`s 中的每一个（第一个，`<div style="display:block">`）

# c#-4.0 - 使用c#在word文档中编码超链接地址

> ID：15068345
> 
> 赞同：0
> 
> 时间：2013-02-25T13:40:38.277
> 
> 标签：c#-4.0

我想在 word 文档中编码超链接地址。

单词文档路径是：`c://Users/Administrator/Dropbox/Tool`

```
finalURL=HttpUility.Urlencoding("http://www.Example.com/services/samplepage.aspx");

//finalUrl after encoding http%3a%2f%2fwww.Example.com%2fservices%2fSamplepage.aspx 
```

用加密的 URL 和书签替换超链接：

```
 docTemp.Bookmarks["FirstName"].Range.Text = "Prasanna";

foreach (Word.Hyperlink hyperlink in docTemp.Hyperlinks)
                        {
                            if (hyperlink.Address.Contains(@"mailto:"))
                            {
                                continue;
                            }

                            hyperlink.Address = finalURL;

                        } 
```

最后保存word文档：

```
saveAsFileName = string.Format("{0}\\{1}_{2}.doc", @"C:\Email_Sent", contactName, TodayDate.ToString().Replace(':', '_').Replace('/', '_'));
 docTemp.SaveAs(saveAsFileName); 
```

但是在以Url为的word文档中（word文档localpath+EncryptedUrl）

```
http://../Users/Administrator/Dropbox/BDETool/http%3a%2f%2fwww.Example.com%2fservices%2fSamplepage.aspx 
```

我需要确切的加密网址：

```
http%3a%2f%2fwww.Example.com%2fservices%2fSamplepage.aspx 
```

对于超链接地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:26:03.147

我的问题得到了解决

仅编码参数或“？”之后剩下的部分

例如，如果您的网址是：

```
 "http://www.Example.com/services/samplepage.aspx?name=yourname&age=35" 
```

编码的代码：

```
byte[] Bdata= ue.GetBytes("name=yourname&age=35");
encryptdata= Convert.ToBase64String(Bdata);
sFinalURL = string.format("http://www.Example.com/services/samplepage.aspx?{0}",encryptdata) 
```

或者

```
sFinalURL =string.format("http://www.Example.com/services/samplepage.aspx?name={0}&age={1}",yourname,35); 
```

# c# - 如何在 MVC4 中禁用特定操作\控制器的全局属性

> ID：15068347
> 
> 赞同：1
> 
> 时间：2013-02-25T13:40:41.863
> 
> 标签：c#, asp.net-mvc-4

我在全局过滤器中注册了一个属性。我希望它被禁用 2 个动作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:43:35.677

有几种方法可以处理这个问题：

1.  如果您可以控制动作过滤器的代码，则可以对其进行修改，以测试控制器动作是否用某些自定义标记属性（您将创建）进行修饰，并且在出现时不运行。然后，您将使用此标记属性装饰 2 个控制器操作。
2.  如果您无法控制此属性的代码，则可以通过实现[`IFilterProvider`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ifilterprovider%28v=vs.98%29.aspx)接口和在[`GetFilters`](http://msdn.microsoft.com/en-us/library/system.web.mvc.ifilterprovider.getfilters%28v=vs.98%29.aspx)您需要实现的方法内部编写自定义过滤器提供程序，以测试控制器操作是否用一些自定义标记属性装饰而不包括结果中的全局过滤器。然后不要将过滤器注册为全局操作过滤器，而是注册您的自定义过滤器提供程序。过滤器提供程序经常用于向动作过滤器提供依赖注入。例如，这里[`an article`](http://thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3)用 StructureMap 详细说明了这一点。

# localization - CRM 2011 本地化

> ID：15068349
> 
> 赞同：1
> 
> 时间：2013-02-25T13:40:47.243
> 
> 标签：localization, dynamics-crm-2011

我有一个问题，我已将自定义实体的解决方案导出为非托管，在 custom.xml 文件中添加了本地化，重新导入了解决方案。重新导入后，我测试了本地化，它仍然有效。

但对于我们的客户，我们必须提供托管解决方案。因此，我导出了与托管相同的解决方案，但 custom.xml 中没有更多的本地化。

是否有任何想法为什么缺少本地化？（仅在托管解决方案中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:34:38.867

好的，我现在已将解决方案导出为非托管和托管，并将托管解决方案文件夹中的 custom.xml 文件替换为非托管中的文件。似乎有效，但我想这不是一个好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:07:17.870

最好的方法是使用打开默认解决方案并导出翻译文件，添加本地化并再次导入。

# android - 是否有可能来自两个应用程序的两个 BroadcastReceiver 基于相同的广播意图操作以某种方式“碰撞”？

> ID：15068353
> 
> 赞同：0
> 
> 时间：2013-02-25T13:40:52.967
> 
> 标签：android, broadcastreceiver, download-manager, cyanogenmod

我有一个`BroadcastReceiver`内部服务：

```
public class NotificationClickService extends Service {

    private static final String DEBUG_TAG = "NotificationClickService";

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        registerReceiver(NotificationClickReceiver, new IntentFilter(DownloadManager.ACTION_NOTIFICATION_CLICKED));
    }

    @Override
      public void onDestroy() {
        unregisterReceiver(NotificationClickReceiver);
    }

    BroadcastReceiver NotificationClickReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            Log.d(DEBUG_TAG, "NotificationClickReceiver: onReceive CALLED");

                Intent i = new Intent(android.app.DownloadManager.ACTION_VIEW_DOWNLOADS);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | 
                        Intent.FLAG_ACTIVITY_SINGLE_TOP | 
                        Intent.FLAG_ACTIVITY_CLEAR_TOP | 
                        Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
                context.startActivity(i);
        }
    };
} 
```

这将系统下载管理器带到了最前面。

在我的手机上，我正在运行基于 JellyBean 的 CyanogenMod 10.1。

但...

一旦系统应用 CMupdater 启动：

*   如果**CMupdater**当前正在运行，则从我的服务的 BroadcastReceiver 调用它，而不是`DownloadManager`;
*   如果**CMupdater**没有运行，但至少运行了一次，则根本不会调用我的接收器*。*

如果我重新启动并且不运行更新程序，它会再次工作。所有测试也在我的平板电脑上使用相应的 CyanogenMod 10.1 版本进行了测试。

这是来自 CM 的接收器：

```
package com.cyanogenmod.updater.receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

import com.cyanogenmod.updater.UpdatesSettings;

public class NotificationClickReceiver extends BroadcastReceiver{
     private static String TAG = "NotificationClickReceiver";

     @Override
     public void onReceive(Context context, Intent intent) {

         // Bring the main app to the foreground
         Intent i = new Intent(context, UpdatesSettings.class);
         i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP |
                 Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
         context.startActivity(i);
     }
 } 
```

并从其清单中：

```
 <receiver android:name="com.cyanogenmod.updater.receiver.NotificationClickReceiver">
        <intent-filter>
            <action android:name="android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED"/>
            <category android:name="android.intent.category.HOME"/>
        </intent-filter>
    </receiver> 
```

`android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED``DownloadManager.ACTION_NOTIFICATION_CLICKED`是我使用的意图的常量值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:14:23.877

虽然我仍然无法解读您的问题，但我看不出您的接收器会如何被调用。您的意图过滤器中缺少类别注册。

尝试：

```
IntentFilter filter = new IntentFilter(DownloadManager.ACTION_NOTIFICATION_CLICKED); 
filter.addCategory(Intent.CATEGORY_HOME);
registerReceiver(NotificationClickReceiver, filter); 
```

这应该确保您始终收到与清单注册接收器相同的广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:15:18.043

所有匹配`BroadcastRecievers`都会收到通知，并带有相应的`Context`. 请注意，这可能以两种方式发生：

1.  如果 Receiver 是在代码中本地创建并在某个对象内注册的，则仅当该对象存在时才会调用它。

2.  如果在清单中[声明](http://developer.android.com/guide/topics/manifest/receiver-element.html)了 Reciever ，则将创建该对象并`onReceive()`调用方法。

因此，您可以实现 Service 类`BroadCastReciever`，在 Manifest 文件中声明它，并从它的形式启动您的服务`onRecieve()`；

# ios - 如何创建一个使用 CCSpriteFrameCache 和 CCSpriteBatchNode 对象的 CSSprite 类？

> ID：15068355
> 
> 赞同：0
> 
> 时间：2013-02-25T13:41:14.140
> 
> 标签：ios, objective-c, cocos2d-iphone

我正在创建一个游戏，它将多次实例化某种类型的精灵。这个精灵将有一个简单的循环动画，因此，我假设我需要使用`CCSpriteFrameCache`并`CCSPriteBatchNode`缓存用于驱动动画过程的相关精灵图像。

我一直在阅读 Raywenderlich.com 上经常被引用的[How To Use Animations and Sprite Sheets in Cocos2D](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)，我基本了解这个过程。

我的问题是他的场景文件的代码中包含了整个动画序列。我无法解释如何将相同的代码放在`CCSprite`我创建的孩子、类（或类似的类）中，以及如何在我的游戏场景中使用这个独立的精灵。

换句话说，我的愿望是有一个`CCSprite`可以在场景实现中实例化的子类。一些参数被传递到孩子的构造函数中`CCSprite`，当精灵被添加到游戏场景中时，精灵的动画会自动发生，并且不受任何场景代码的影响。

我怎样才能做到这一点？

**（未）澄清点或为什么我感到困惑**

在 Ray 教程的第 2 步中，他指示添加`CCSpriteBatchNode`用于他的动画精灵的子`self`对象（即游戏场景）。如果我`CCSpriteBatchNode`在`CCSprite`子类实现中定义了 a，我是否需要添加`CCSpriteBatchNode`到我的父母场景？我应该如何（正确地）做到这一点？

另外，如果是一个单例类，添加构造函数会不会给我`CCSpriteFrameCache`带来任何麻烦，或者我应该只调用一次，比如说，在我的应用程序的初始化中？`[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"my_sprite.plist"];``CCSprite`

一般来说，我只是感到困惑。我怎样才能创建一个独立的动画精灵，我可以添加（多次）到一个场景中，我的场景不必担心连接动画序列，也不会让小的 iOS 处理器陷入困境？

我真的不在乎我如何解决这个问题。也许我做了一些不正确的宏伟假设。我愿意采取不同的方式来解决这个问题，只要最终结果如上所述。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:13:57.247

实际上，生成的精灵应该是批处理节点的子节点（而不是相反）。批处理节点只是一个用于将绘制调用“批处理”为单个调用的小部件：要求是它的所有子节点——在你的例子中，动画精灵——来自与批处理节点相同的纹理。您必须使用批处理节点的唯一原因是您计划从同一个纹理中获得许多动画 - 动画本身与批处理节点无关。

所以，在你的场景中：

*   创建批处理节点
*   将批处理节点作为子节点添加到场景中。
*   创建您要添加的每个精灵。
    *   您可以扩展 CCSprite 以在 ctor 中创建动画。
    *   如果您希望动画自行清理，请使用 CCSequence（如下所示）。在您的情况下，精灵可能是动画的精灵 1，其中一个动作是 CCAnimate 动作。
*   将它们添加到批处理节点。

顺序 ：

```
CCSprite *icn = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@_enabled.png", sk.skillIconPrefix]];
[icn setBlendFunc:(ccBlendFunc) {GL_SRC_ALPHA, GL_ONE}];

icn.opacity = 0;
id fadein = [CCFadeTo actionWithDuration:.5 opacity:165];
id fademax = [CCFadeTo actionWithDuration:.05 opacity:255];
id stallmax = [CCDelayTime actionWithDuration:.05];
id fadeback = [CCFadeTo actionWithDuration:.05 opacity:165];
id stall = [CCDelayTime actionWithDuration:.5];
id fadout = [CCFadeTo actionWithDuration:2.5 opacity:0];
id clean = [CCCallBlock actionWithBlock:^{
    [icn removeFromParentAndCleanup:YES];

}];

CGPoint pos = [self pointLocationOnMapForLocation:theTile.location];
icn.position = ccpAdd(pos, ccp(0, -15));
id enchiladas = [CCSequence actions:fadein, fademax, stallmax, fadeback, stall, fadout, clean, nil];
[icn runAction:enchiladas]; 
```

编辑：对于重复动画（然后没有清理），这是我的一个游戏的一个例子；

```
CCAction *forever = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:anim]]; 
```

# javascript - 如何知道对象元素的默认 wmode 值？

> ID：15068359
> 
> 赞同：1
> 
> 时间：2013-02-25T13:41:29.277
> 
> 标签：javascript, html, flash, wmode

我正在调试一个网页，其中包含一些没有设置 wmode 的 flash 对象。我需要知道浏览器或 Flash 播放器分配给它们的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:44:51.853

默认 wmode 应`window` [根据文档](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)。

# java - CriteriaQuery 加入字符串值

> ID：15068373
> 
> 赞同：4
> 
> 时间：2013-02-25T13:42:23.350
> 
> 标签：java, sql, database, jpa

我有一个表，其中包含它指向的实体的条形码的字符串值。不幸的是，它不是外键，它只是一个字符串，所以不存在映射。这使得连接操作变得困难。我想知道如何将这个对象加入到另一个没有定义关系的表中。例如：

```
@Entity
@Table(name = "TblSample", schema = SCHEMA, catalog = CATALOG)
public class Sample {

  @Id
  @Column(name = "id", nullable = false)
  private int id;

  @Column(name = "barcodeEntity", nullable = false)
  private String barcodeEntity;

  @OneToOne
  @JoinColumn(name = "barcodeContainer", nullable = false)
  private Container container;

  ...
}

@Entity
@Table(name = "TblSoil", schema = SCHEMA, catalog = CATALOG)
public class Soil {

  @Column(name = "barcode", nullable = false)
  private String barcode;

  @Column(name = "name", nullable = false)
  private String name;
  ...

}

@Entity
@Table(name = "TblLeaf", schema = SCHEMA, catalog = CATALOG)
public class Leaf {

  @Column(name = "barcode", nullable = false)
  private String barcode;

  @Column(name = "name", nullable = false)
  private String name;
  ...
}

@Entity
@Table(name = "TblContainer", schema = SCHEMA, catalog = CATALOG)
public class Container {

  @Column(name = "barcode", nullable = false)
  private String barcode;

  @Column(name = "name", nullable = false)
  private String name;

  @Column(name = "location", nullable = false)
  private String location;
  ...
} 
```

因此，我想使用 CriteriaQuery 可以返回所有样本并加入从中获取的实体。我已经开始写它，但是当我试图弄清楚如何去做时，我被卡住了。在 sql 中它会像这样：

```
SELECT TOP 100
  sample.Id
, sample.barcodeEntity
, leaf.name
, soil.name
, sample.barcodeContainer
, container.name
, container.location
FROM TblSample sample

  LEFT JOIN TblSoil leaf on
    soil.barcode = sample.barcodeEntity

  LEFT JOIN TblLeaf leaf on
    leaf.barcode = sample.barcodeEntity

  JOIN TblContainer container on
    container.barcode = sample.barcodeContainer 
```

我猜想关联的 jpa CriteriaQuery 看起来像这样：

```
public void findSamples(Map<String, String> filterCriteria) {
    final CriteriaBuilder builder = getEntityManager().getCriteriaBuilder();
    final CriteriaQuery<SampleLocation> query = builder.createQuery(SampleLocation.class);
    final Root<Sample> derivation = query.from(Sample.class);
    // Note that the next two lines don't work 
    final Join<Leaf> joinOnLeaf = derivation.join(Sample_.barcodeEntity, JoinType.LEFT);
    final Join<Soil> joinOnSoil = derivation.join(Sample_.barcodeEntity, JoinType.LEFT);
    final Join<Container> joinOnContainer = derivation.join(Sample_.barcodeContainer);

    CompoundSelection<SampleLocation> cSelect = 
      builder.construct(SampleLocation.class, sample.Id, sample.entitybarcode, joinOnLeaf.get(Leaf_.name), joinOnLeaf.get(Soil_.name), sample.barcodeContainer, joinOnContainer.get(Container_.name), joinOnContainer.get(Container_.location));
    query.select(cSelect);

    TypedQuery<SampleLocation> typedQuery = entityManager.createQuery(query);
    typedQuery.setMaxResults(100);

    return typedQuery.getResults();
} 
```

有什么想法可以执行左连接操作吗？我无法根据 CriteriaQuery api 弄清楚如何做到这一点。似乎应该存在的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:53:04.533

我建议两个查询。对于第一个，获取与您的条形码字符串一致的主键值。然后在第二个查询中使用第一个查询中的数据。

# actionscript-3 - 从 ActionScript 确定 MovieClip 的尺寸（以毫米为单位）

> ID：15068376
> 
> 赞同：2
> 
> 时间：2013-02-25T13:42:28.507
> 
> 标签：actionscript-3, flash

如何`MovieClip`从 ActionScript 确定 a 的尺寸（以毫米为单位）？

* * *

例如，我有一个 Flash CS6 文档，它的“标尺单位”是毫米，我将其尺寸设置为 200mm x 200mm。

![显示宽度和高度为 100 的文档设置](../Images/d56a29f5822976314208ba42d88c1bea.png)

它的库包含一个带有 AS 链接的电影剪辑，它只`HundredMmSquare`包含一个 100 毫米 x 100 毫米的黑色正方形。该文档包含一个名为`hundredMmSquare`.

[![](../Images/621180f80953c9403529b20e9996ad2e.png)](https://i.stack.imgur.com/jClyi.png) [![](../Images/e45f1b74e00cb2accddd9dff4539f9f9.png)](https://i.stack.imgur.com/12xwS.png)

我怎样才能获得我在 Flash 中定义`100`的宽度的值？`hundredMmSquare`

* * *

我试图通过假设`applicationDPI`可以将原始像素`.width`值转换为英寸来解决这个问题，然后可以将其转换为毫米。

```
var pixelsPerInch = FlexGlobals.topLevelApplication.applicationDPI;
var mmPerInch = 25.4;

var width_in = hundredMmSquare.width / pixelsPerInch;
var width_mm = width_in * mmPerInch;

trace("width_mm = " + width_mm); 
```

这并没有产生这个预期的结果。

```
widthInMm = 45.24375 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:11:49.333

[Strille](https://stackoverflow.com/questions/15068376/determining-the-dimensions-of-a-movieclip-in-millimeters-from-actionscript#comment21191923_15068376)使用 72 PPI 的建议产生了一个接近的结果：

```
var pixelsPerInch = 72;
var mmPerInch = 25.4;

var width_in = hundredMmSquare.width / pixelsPerInch;
var width_mm = width_in * mmPerInch;

trace("width_mm = " + width_mm); 
```

```
width_mm = 100.54166666666667 
```

Flash 实际上不可能在 SWF 文件中包含精确的毫米或英寸测量值，因为该格式不支持这些单位。来自[SWF 文件格式规范版本 19](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf-file-format-spec.pdf)：

> SWF 文件格式将所有 xy 坐标存储为整数，通常采用称为缇的度量单位。在 SWF 格式中，缇是逻辑像素的 1/20。

该格式还包括可能导致某些控制点四舍五入到最近像素的选项，尽管我不确定这是否适用于我的测试文档。

因为格式不支持毫米，所以必须进行一些舍入，正如我们在`width_mm`上面的值中看到的那样。现在，对于不同类型的舍入，我们期望什么值？

```
# down to nearest pixel
Math.floor(100 / 24.4 * 72) / 72 * 24.4
= 99.97222222222221

# down to nearest twip
Math.floor(100 / 24.4 * 72 * 10) / 10 / 72 * 24.4
= 99.97222222222221

# up to nearest pixel
Math.ceil(100 / 24.4 * 72) / 72 * 24.4
= 100.31111111111109

# up to nearest twip
Math.ceil(100 / 24.4 * 72 * 10) / 10 / 72 * 24.4
= 100.00611111111111 
```

这些都不匹配`width_mm`上面的值。也许是因为它舍入了多个控制点而不是单个`width`值。无论如何，由于发生舍入，原始值不可用。

我假设 72 是 Fl​​ash 应用程序中的硬编码比率。72 也恰好是 my 的值`Capabilities.screenDPI`，但这无关紧要：运行时的 DPI 应该无关紧要，因为我认为在导出 SWF 时发生舍入，而不是导入。

# ios - 使用数组 iOS SDK 打开 URL

> ID：15068377
> 
> 赞同：0
> 
> 时间：2013-02-25T13:42:28.863
> 
> 标签：ios, arrays, nsurlconnection

我想在数组中打开一个 URL，但它不起作用。这是我的代码：

```
NSArray *platformarray = [[NSArray alloc] initWithObjects:iphonestring,ipadstring,androidstring,blackberrystring, windowsstring,nil];

    NSString *url = [NSString stringWithFormat:@"http://xxx.nl/appofferte.php?hoedanigheid=%@&bedrijfsnaam=%@&naam=%@&email=%@&telefoon=%@&platformen=%@", hoedanigheid, bedrijf.text, naam.text, email.text, telefoon.text, platformarray];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

谁能帮我把数组放在 1 个变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:49:39.170

如果数组中的所有项目都是字符串，那么您可以将它们与：

```
NSString* combined = [platformarray componentsJoinedByString:@","]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:52:12.293

```
hoedanigheid=%@&bedrijfsnaam=%@&naam=%@&email=%@&telefoon=%@&platformen=%@", hoedanigheid, bedrijf.text, naam.text, email.text, telefoon.text, platformarray]; 
```

将平台数组更改为`[platformarray objectAtIndex:thePlatformThatIWant];`例如：`[platformarray objectAtIndex:0];`

```
hoedanigheid=%@&bedrijfsnaam=%@&naam=%@&email=%@&telefoon=%@&platformen=%@", hoedanigheid, bedrijf.text, naam.text, email.text, telefoon.text, [platformarray objectAtIndex:thePlatformThatIWant]]; 
```

# azure - Azure 表存储分区限制

> ID：15068378
> 
> 赞同：5
> 
> 时间：2013-02-25T13:42:47.787
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-table-storage

可以属于 Azure 表的分区数有什么限制？

我发现的关于表存储限制的唯一体面信息来源是[here (2012)](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)和[here(2010)](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T14:08:29.207

没有限制。正如您的链接所暗示的那样，描述表模式的物理键和实体大多存在可伸缩性目标和限制。

# angularjs - 从 angularjs 路由向服务器发送查询参数

> ID：15068381
> 
> 赞同：0
> 
> 时间：2013-02-25T13:43:01.757
> 
> 标签：angularjs, angularjs-routing

我将 AngularJS 用于我的客户端框架。使用 routeprovider，我想将查询参数发送到我的 templateURL 进行处理。基本上我的 templateURL 是一个服务器端 php 脚本，它将生成 HTML。

现在 routeprovider 不会向我的服务器端代码发送查询参数。我得到所有这些参数的空白值。

如果我的方法是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:57:33.507

Angular 的使用方式是客户端从服务器请求 JSON 格式的内容（使用[$http 模块](http://docs.angularjs.org/api/ng.$http)），然后在客户端构建 HTML。看看[什么是 angularjs-routes 的点是什么？](https://stackoverflow.com/questions/13909003/what-is-the-point-of-angularjs-routes?rq=1)我也强烈推荐[官方教程](http://docs.angularjs.org/tutorial)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:47:45.813

我建议不要让您的服务器为您呈现 HTML ......但我想如果您必须以这种方式做事，您可以利用 ng-include：

设置路线时：

```
$routeProvider.when('/route/:id', {
    template: '<div ng-include="/Some/Url?id={{id}}"></div>',
    controller: 'FooCtrl'
}); 
```

然后你的控制器：

```
app.controller('FooCtrl', function($scope, $routeParams) {
   $scope.id = $routeParams.id;
}); 
```

# plugins - wordpress 插件中的 jQuery 脚本不适用于通过 ajax 加载的内容。

> ID：15068385
> 
> 赞同：0
> 
> 时间：2013-02-25T13:09:44.277
> 
> 标签：plugins, jquery, ajax, javascript

我正在使用 Jquery Hover Footnotes 插件，该插件允许添加脚注并在悬停时动态显示它们。

其用法示例如下：[http ://restoredisrael.org/blog/961/footnote-plugin-test-page/](http://restoredisrael.org/blog/961/footnote-plugin-test-page/)

此外，在我的 single.php 中，我使用选项卡式内容显示来自自定义字段的元数据。换句话说，当点击一个选项卡时，通过 ajax 在 div 上加载一个自定义字段，并且该内容包含脚注。

管理标签的jquery函数是：

```
function tab(var)
{
$(document).ready(function(){

    var Tabs = {
        '1' : 'page1.php?p='+var,
        '2' : 'page2.php?p='+var,
        '3' : 'page3.php?p='+var,
        '4' : 'page4.php?p='+var,
        '5' : 'page5.php?p='+var
    }

    $.each(Tabs,function(i,j){
        var tmp = $('<li><a href="" class="tab">'+i+'</a></li>');
        tmp.find('a').data('page',j);
        $('ul.tabContainer').append(tmp);
    })
    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

            var bg = element.attr('class').replace('tab','');

        if(!element.data('cache'))
        {   
            $.get(element.data('page'),function(msg){
            $('#contentHolder').html(msg);

            element.data('cache',msg);
            });
        }

        e.preventDefault();

    })

    the_tabs.eq(0).click();

});   
      return false; 
```

}

其中 Ajax 正在调用 pagex.php，它使用以下方法返回自定义字段：

```
get_post_meta($post->ID, 'key', true); 
```

single.php 中的 html 代码是：

```
<ul class="tabContainer" style="display: none;">
</ul>

<div class="clear"></div>

<div id="tabContent" style="display:none;">

    <div id="contentHolder">

    </div>
</div> 
```

和：

```
<body onLoad="tab(<?php echo $thePostID?>);> 
```

问题是脚注正确显示，但悬停不起作用。悬停由插件文件夹内的 js 脚本管理，该脚本在最终源代码中正确加载，但悬停效果不适用于 ajax 加载的 div 中的脚注。

我希望我很清楚。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:01:56.533

所以正如你所说，问题与DOM更新后触发插件JS动作有关。我在插件的js源码上发现该动作是由：Footnotes.Setup()触发的，所以我在ajax加载函数中添加了它。

现在的代码是：

```
function tab(var)
{
$(document).ready(function(){

    var Tabs = {
        '1' : 'page1.php?p='+var,
        '2' : 'page2.php?p='+var,
        '3' : 'page3.php?p='+var,
        '4' : 'page4.php?p='+var,
        '5' : 'page5.php?p='+var
    }

    $.each(Tabs,function(i,j){
        var tmp = $('<li><a href="" class="tab">'+i+'</a></li>');
        tmp.find('a').data('page',j);
        $('ul.tabContainer').append(tmp);
    })
    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

            var bg = element.attr('class').replace('tab','');

        if(!element.data('cache'))
        {   
            $.get(element.data('page'),function(msg){
            $('#contentHolder').html(msg);
            **Footnotes.setup();**
            element.data('cache',msg);
            });
        }

        e.preventDefault();

    })

    the_tabs.eq(0).click();

});   
      return false; 
} 
```

# c++ - 如何在 Ctrl+Tab 上显示 Qt 4.8 中打开的选项卡列表

> ID：15068391
> 
> 赞同：1
> 
> 时间：2013-02-25T13:43:32.447
> 
> 标签：c++, qt, tabs, qt4, qtabbar

是否有任何直接（不听关键事件）的方式来显示 Qt 中打开的选项卡列表，如下所示（在 Visual Studio 中）。在我自己实现这样的小部件之前，我只想确保 Qt 不提供这样的功能。

![在此处输入图像描述](../Images/f7ec879b6ba96290463b18b406f22448.png)

至少以像 NotePad++ 那样的原始方式（无意冒犯）。现在，当我使用 QTabBar 并按 Ctrl+Tab 时，它会显示如下内容，

![在此处输入图像描述](../Images/7a47606757ad43c51955623050a7fe3f.png)

我不知道那是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:56:26.563

ctrl-tab 的默认行为是循环浏览选项卡。您需要对其进行自定义以显示您自己的对话框。您不需要连接到任何信号来执行此操作，只需将对选项卡小部件/栏的引用传递到对话框中。然后，您可以使用该引用来检索名称并更改选项卡。

# android - android - 片段活动中的 ViewPager

> ID：15068395
> 
> 赞同：0
> 
> 时间：2013-02-25T13:43:50.917
> 
> 标签：android, android-viewpager, android-fragmentactivity

我没有经常使用 Fragments，现在我遇到了一些麻烦。在我的 MainActivity 中向右滑动时，我需要显示一个 ListFragment，所以我需要类似的东西：

![在此处输入图像描述](../Images/ccca077964648cdd89c1f5e86d3bfff9.png) ![在此处输入图像描述](../Images/6512fbe5d85e304a8fd0b2402cc0d57a.png)

我试图做的事情：

```
 public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    PageAdapter mPageAdapter = new PageAdapter(getSupportFragmentManager());
    ViewPager mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mViewPager.setAdapter(mPageAdapter);

}

    } 
```

页面适配器：

```
 public class PageAdapter extends FragmentPagerAdapter {

public PageAdapter(FragmentManager fm) {
    super(fm);

}

@Override
public Fragment getItem(int arg0) {
    PageListFrag f = new PageListFrag();
    return f;

}

@Override
public int getCount() {
        return 0;
}
@Override
public CharSequence getPageTitle(int position) {
    return "Title";
} 
```

}

列表片段：

```
 public class PageListFrag extends ListFragment {
ArrayAdapter<String> mAdapter;

public PageListFrag() {

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ArrayList<String> al = new ArrayList<String>();
    mAdapter = new ArrayAdapter<String>(getActivity(),
            R.layout.list_frag_item, al);
    for (int i = 0; i < 20; i++) {
        al.add("Item " + " " + Integer.toString(i));
        mAdapter.notifyDataSetChanged();
    }

    setListAdapter(mAdapter);
}

  } 
```

我只看到一个空白屏幕，无法查看我的 ListFragment。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:55:30.987

改变你的getCount：

```
@Override
public int getCount() {
    return 2;
} 
```

如果你不告诉寻呼机有任何东西可以显示它不会显示任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:14:22.487

如果你只是想制作一个滑动菜单，那么最好的解决方案就是使用这个开源的滑动菜单库[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

如果您制作自己的滑动菜单，那么您最终会遇到不同的兼容性问题。

# javascript - ExtJS 列布局，移动可调整大小的面板不重叠

> ID：15068399
> 
> 赞同：1
> 
> 时间：2013-02-25T13:44:05.707
> 
> 标签：javascript, layout, extjs, panel, overlap

我正在尝试实现这样的目标（[http://docs.sencha.com/ext-js/4-1/#!/example/portal/portal.html](http://docs.sencha.com/ext-js/4-1/#!/example/portal/portal.html)），但我希望 portlet 可以调整大小。

所以我有一个带有 Ext.layout.ColumnLayout 布局的 Ext.TabPanel。所有项目都是面板（Ext.form.Panel），带有：

```
resizable : true,
draggable:true, 
```

具体来说，给定如下的初始情况

![初始情况](../Images/7b057050cb2daaf66bcc17e250170e08.png)

我希望能够将突出显示的 portlet 拖到一个新位置，并让其他 portlet 为它“腾出空间”。不幸的是，我现在得到的是

![实际情况重叠](../Images/7652ab7f4d373d084246c9e4000b99ec.png)

即两个portlet 重叠。我想得到这个（没有重叠）：

![期望的情况没有重叠](../Images/973e3af7dc3bda2245305156819f1898.png)

所以问题是：有没有一种方法可以在不要求列具有固定大小的情况下实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:33:08.423

真的很简单。您只需要处理移动事件，例如在自定义面板的控制器中：

```
 move:function( thi, x, y, eOpts ){
    if(x!=0 && y!=0)
    {
        var cont = thi.getBubbleParent();
        var xNew = thi.getPosition()[0];
        var yNew = thi.getPosition()[1];

        var ind = 0;
        while(cont.items.items[ind].getBox().y+cont.items.items[ind].getBox().height < yNew)
        {
            ind++;
        }
        while(cont.items.items[ind].getBox().x+cont.items.items[ind].getBox().width < xNew)
        {
            ind++;
        }
        thi.setPagePosition([(xNew-x),(yNew-y)]);
        cont.insert(ind,thi);
    }
} 
```

所有其他面板的位置都是从您的列布局中自动管理的。

# opencl - OpenCL：AMD Fusion 和 CL_MEM_USE_HOST_PTR

> ID：15068403
> 
> 赞同：2
> 
> 时间：2013-02-25T13:44:17.737
> 
> 标签：opencl

我在 OpenCL 中遇到了一些关于 clCreateBuffer 的问题。我正在使用 AMD Fusion 处理器 (A10-5800k)，因此两个设备（CPU 和 GPU）应该能够在彼此的内存上工作。

对于读取和结果缓冲区，我这样做：

```
bufRead = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, size, data, &err);
bufWrite = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_USE_HOST_PTR, size, result, &err); 
```

当我调用我的内核时，“结果”数组不会改变。我知道普通的 GPU 会将数据复制到设备内存并进行处理。普通的 GPU 会在之后将数据复制回来吗？

但是，我确实希望 Fusion GPU 不会复制数据，因为它可以在同一个指针上工作。不幸的是，我没有看到“结果”数组有任何变化。当我用 clEnqueueReadBuffer 阅读“bufWrite”时，我看到了变化。（我在阅读“结果”之前做了clFinish，所以应该写入数据）

有谁知道如何真正使用 CPU 和 GPU 在同一个阵列上工作？我真的很想避免使用 clEnqueueReadBuffer。

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T11:42:13.847

好的，我搜索了很长一段时间的答案。这是可能的，但仅在某些情况下。

您需要一个启用了 VM（虚拟内存）的 GPU。您可以使用 clinfo 进行检查。在驱动程序版本中查找“VM”，例如，

```
 Driver version: CAL 1.4.1695 (VM) 
```

我在 Linux 下有一个全新的 APU，不支持 VM。我认为 Linux 下并非所有 GPU 都支持它。接下来我将尝试 Windows。这是合理的，因为它需要与操作系统进行交互。我希望将来能支持 Linux。

无论如何，要使用它，您需要：

1.  使用 CL_MEM_USE_HOST_PTR 或 CL_MEM_ALLOC_HOST_PTR 创建缓冲区。
2.  使用 clEnqueueMapBuffer 从 Host 访问缓冲区，并在使用 clEnqueueUnmapMemObject 读取/写入后释放它。
3.  启用 VM 后，不会复制任何内容，并且您可以直接访问/没有 VM，它也可以正常工作，但它会复制数据。

查看 AMD APP OpenCL 编程指南第 4.5.2 节 - 放置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:24:44.377

我不确定我是否理解你。在 OpenCL 中（对于任何目标平台类型，CPU 或 GPU），对 clCreateBuffer 的调用将在设备上分配一些内存，并将数据从主机指针复制到新分配的内存（尽管此复制可能仅在使用此调用内核时完成指针作为参数）。我认为主机和设备不可能在没有“同步”（又名 clEnqueueReadBuffer）的情况下在同一内存上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:35:00.957

在某些平台/设备上，对**clFinish**的调用足以将主机内存与设备内存同步。在一般情况下，需要调用**clEnqueueReadBuffer**或**clEnqueueMapBuffer 。****clEnqueueMapBuffer**返回的指针应该与您在创建缓冲区时提供的主机 ptr 相关。

# android - ListView 未填充

> ID：15068404
> 
> 赞同：0
> 
> 时间：2013-02-25T13:44:17.643
> 
> 标签：android

我有扩展类`FragmentActivity`，还有一个包含`ListView` **listview_layout.xml的布局 xml 文件**

```
<LinearLayout
    android:layout_width="310dip"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical"
    android:paddingLeft="15dp"
    android:paddingRight="15dp" >

    <ListView
        android:id="@+id/menuList"
        android:layout_width="310dip"
        android:layout_height="wrap_content"
        android:background="#00FFFF"
        android:dividerHeight="2dip" />
</LinearLayout>

<FrameLayout
    android:id="@+id/overlay"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

注意`ListView`, **menuList的 id**

从我的 java 代码中，我以这种方式获取此列表视图：

```
private View getElementFromView(int layout, int element) {
        LayoutInflater inflater = LayoutInflater.from(this);
        View view = inflater.inflate(layout, null);
        return view.findViewById(element);
    } 
```

这个方法会返回一个`View`给我，我做一个检查，看看这`View`是否是一个实例`ListView`

```
 View v = getElementFromView(R.layout.listview_layout, R.id.menuList);
    if(v instanceof ListView) {
        Log.v("View: ", "This view is an instance of a ListView"); 
        ListView lv = (ListView)v; 
        String[] listItems = {"Item 1", "Item 2", "Item 3", "Item 4"}; 
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems));
    } 
```

如您所见，我想为此设置一个`Adapter`，这应该用文本 Item 1、Item 2 等`ListView`填充。`ListView`

我不明白为什么列表视图根本不显示？我猜它是因为`ListView`根本没有填充，但为什么没有填充呢？

编辑：

我还应该提到这个项目被标记为图书馆。这是有趣的部分`BaseWindow.java`

```
 public class BaseWindow extends SlidingFragmentActivity {
        public void InitializeWindow(Activity act, int layoutResourceId, int menuResourceId, String windowTitle)  {
                    super.setContentView(layoutResourceId); 
                    super.setBehindContentView(R.layout.menu_frame);  
                    this.menuResourceId = menuResourceId; 
                    this.act = act; 
                    initializeSlidingMenu();
                    setWindowTitle(windowTitle); 
         }

         public void initializeSlidingMenu()  {

            this.setSlidingActionBarEnabled(true);
            this.setSlidingActionBarEnabled(true);
            getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width);
            getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
            getSlidingMenu().setShadowDrawable(R.drawable.shadow);
            getSlidingMenu().setMenu(R.layout.listview_layout);
            getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
            getSlidingMenu().setBehindScrollScale(0.25f);

            View v = getElementFromView(R.layout.listview_layout, R.id.menuList);
            if(v instanceof ListView) {
                Log.v("View: ", "This view is an instance of a ListView"); 
                ListView lv = (ListView)v; 
                String[] listItems = {"Item 1", "Item 2", "Item 3", "Item 4"}; 
                lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems));
                //lv.setAdapter(new MenuAdapter(this, menuResourceId));
            }       
        }
    } 
```

这个类是从我工作区中的另一个项目中调用的，是的，我已经将该类/项目作为库包含在内：

```
public class MainActivity extends BaseWindow {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.InitializeWindow(MainActivity.this, R.layout.activity_main, R.menu.slide_menu, "Home"); 

    }
} 
```

一切都很好，但列表视图根本没有填充。希望这能让您对想要实现的目标有所了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:57:54.697

据我所知，此处创建的视图`View view = inflater.inflate(layout, null);`从未附加到窗口。

您必须调用 setContentView(View v) 或其他东西才能将此布局放在屏幕上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:57:46.333

ListView 工作正常并显示所有项目，问题是 FrameLayout 位于您的 LinearLayout 之上。

# android - 在搜索中打开带有姓名的“选择联系人”

> ID：15068405
> 
> 赞同：2
> 
> 时间：2013-02-25T13:44:17.827
> 
> 标签：android, contactscontract

我想打开搜索框中已有名称的联系人意图。我可以这样做吗？如果是这样怎么办？不，我正在呼吁这样的意图：

```
Intent pickContactIntent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);
pickContactIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
startActivityForResult(pickContactIntent, SELECT_PERSON_REQUEST_CODE); 
```

帮助任何人？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T16:46:56.330

目前此功能不存在。

# sql - 创建一个新的计算列

> ID：15068406
> 
> 赞同：0
> 
> 时间：2013-02-25T13:44:18.983
> 
> 标签：sql, sql-server, tsql

我知道这会很容易，但我不记得该怎么做，我有查询请参阅下面我想添加一个名为 Total Capacity 的新列，这是我的 datediff 结果 * 我的 Capcity。但是对于我的生活，我无法弄清楚。你能帮我吗？

```
SELECT
  Capacity.StartDate
  ,Capacity.EndDate, DATEDIFF(d,Capacity.StartDate
  ,Capacity.EndDate)+1 AS DaysOpen
  ,Capacity.Capacity
  ,Capacity.Site_Skey
FROM
  Capacity 
```

结果

```
 StartDate   EndDate       DaysOpen   Capacity TotalCapacity
  01/05/2010  30/09/2010    153        46       7038 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:51:54.257

您可以轻松地将这两列添加到表中 - 作为计算的持久列。然后，您将可以轻松选择它们 - 它们是表中的新列，您可以像选择其他列一样选择它们 - 如果需要，您甚至可以在它们上放置索引！

```
ALTER TABLE [dbo].[Capacity]
    ADD DaysOpen AS DATEDIFF(d, StartDate, EndDate) PERSISTED

ALTER TABLE [dbo].[Capacity]
    ADD TotalCapacity AS DATEDIFF(d, StartDate, EndDate) * [Capacity] PERSISTED 
```

现在您可以发出：

```
SELECT
    StartDate, EndDate,
    DaysOpen,
    Capacity,
    TotalCapacity
FROM
    Capacity 
```

**更新：**如果您想使用该`DATEDIFF+1`方法 - 使用这些列规范：

```
ALTER TABLE [dbo].[Capacity]
    ADD DaysOpen AS (DATEDIFF(d, StartDate, EndDate) + 1) PERSISTED

ALTER TABLE [dbo].[Capacity]
    ADD TotalCapacity AS (DATEDIFF(d, StartDate, EndDate) + 1) * [Capacity] PERSISTED 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:47:17.380

```
SELECT
  Capacity.StartDate
  ,Capacity.EndDate
  ,DATEDIFF(d,Capacity.StartDate ,Capacity.EndDate)+1 AS DaysOpen
  ,Capacity.Capacity
  ,(DATEDIFF(d,Capacity.StartDate ,Capacity.EndDate)+1) * Capacity.Capcity as TotalCapacity
  ,Capacity.Site_Skey
FROM
  Capacity 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:47:23.660

像这样的东西？

```
SELECT
  Capacity.StartDate
  ,Capacity.EndDate
  ,DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1 AS DaysOpen
  ,Capacity.Capacity
  ,(DATEDIFF(d, Capacity.StartDate, Capacity.EndDate) + 1) * Capacity.Capacity AS TotalCapacity
FROM
  Capacity 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T13:50:52.173

```
SELECT
  Capacity.StartDate
  ,Capacity.EndDate
  ,DATEDIFF(d,Capacity.StartDate
  ,Capacity.EndDate)+1 AS DaysOpen
  ,Capacity.Capacity
  ,Capacity.Site_Skey
  ,(DATEDIFF(d,Capacity.StartDate
  ,Capacity.EndDate)+1 ) * Capacity.Capacity
FROM
  Capacity 
```

# r - 基于应用于多列的单个条件对数据框进行子集

> ID：15068408
> 
> 赞同：4
> 
> 时间：2013-02-25T13:44:41.873
> 
> 标签：r, conditional, subset

我浏览了该站点上现有的子集问答，但找不到我要找的东西。

我想根据一个条件对数据框进行子集化（例如，如果值低于 5）。但是，我只想要所有列中的值低于 5 的行。

例如使用`iris`数据集 - 我想选择第 1-3 列的值都低于 5 的所有行。

```
subdata <- iris[which(iris[,1:3]<5),] 
```

这不适合我。我在子集数据的底部有很多 NA 行。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T13:47:27.750

尝试

```
subdata <- iris[apply(iris[,1:3] < 5, 1, all),] 
```

# asp.net - asp.net 只向数据库中插入 255 个字符

> ID：15068413
> 
> 赞同：2
> 
> 时间：2013-02-25T13:44:48.877
> 
> 标签：asp.net, sql-server, insert

我正在做一个项目，我开始测试它的一部分。我意识到我有一个小问题，但无法理解。我正在尝试向数据库中插入一些数据，其中有一列是 nvarchar(4000)。但每当我尝试插入任意长度的字符串时，它只插入 255 个字符。为什么它只需要 255 个字符？

这是我的代码，

```
dbCommand = db.GetStoredProcCommand("New_Post");
        db.AddInParameter(dbCommand, "PostHeader", DbType.String, txt_post_header.Text.Trim());
        db.AddInParameter(dbCommand, "PostBody", DbType.String, txt_post_body.Text.Trim());
        db.AddInParameter(dbCommand, "UserId", DbType.Guid, new Guid(Session["SessionUserID"].ToString()));
        db.AddInParameter(dbCommand, "PollDescription", DbType.String, txt_poll.Text);
        db.AddInParameter(dbCommand, "CityId", DbType.Int16, 1);
        db.AddInParameter(dbCommand, "SpecialtyID", DbType.Int16, Convert.ToInt16(Session["SessionSpecialityId"].ToString()));
        db.ExecuteNonQuery(dbCommand); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:59:14.447

由于您没有声明带有限制的参数，因此您仅有的两个选项是数据库字段有 256 作为限制或存储过程中的参数，请检查并解决您的问题。

# html - 在 ExtJS 中处理来自 iframe 的链接

> ID：15068421
> 
> 赞同：1
> 
> 时间：2013-02-25T13:45:14.637
> 
> 标签：html, extjs

ExtJS - 2.0.2

我有一个使用 ExtJs 的 html 页面，该页面有一个我使用`Ext.ux.ManagedIFrame`. iframe 加载一个 web/wiki 页面，当在这些子页面中单击“链接”时，它会用所需的链接替换整个浏览器窗口。我想加载在同一个 iframe 中打开的所有页面，而不是在浏览器窗口中。

我的子页面是带有“a href”链接的简单 html 页面。这可以做到吗？

```
Parent Page
    head
    body
        ...
        ...
        iframe id="childiframe" (can't edit anything inside the iframe contents)
            head
            body
                ........
                <a href="www.google.com">Go</a> 
                <!--
                 When you click on the above link rather redirecting the whole 
                 browser to that link. I would just like the childiframe to reload
                 google.com
                 --> 
```

# highcharts - 堆积面积图中的 HighStock 导航器显示错误的系列

> ID：15068435
> 
> 赞同：0
> 
> 时间：2013-02-25T13:46:15.400
> 
> 标签：highcharts

我在[HighStocks](http://www.highcharts.com/products/highstock)中遇到了一个小问题：我有两个堆叠的区域系列。问题：在底部的导航器中，只显示了第一个系列，而不是结果堆积图。

（见[http://jsfiddle.net/Je8eG/](http://jsfiddle.net/Je8eG/)）

```
window.chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'container'
    },

    plotOptions: {
        area: {
            stacking: 'normal'
        }
    },

    series: [{
        name: 'Series 1',
        data: [
            [Date.UTC(2010, 0, 1, 10), 53.5],
            [Date.UTC(2010, 0, 1, 10, 30), 59.5],
            [Date.UTC(2010, 0, 1, 11), 53.5],
            [Date.UTC(2010, 0, 1, 12), 28.5],
            [Date.UTC(2010, 0, 1, 13), 55.2]
        ],
        type: 'area'
    }, {
        name: 'Series 2',
        data: [
            [Date.UTC(2010, 0, 1, 10), 29.9],
            [Date.UTC(2010, 0, 1, 10, 30), 29.9],
            [Date.UTC(2010, 0, 1, 11), 29.9],
            [Date.UTC(2010, 0, 1, 12), 61.5],
            [Date.UTC(2010, 0, 1, 13), 53.4]
        ],
        type: 'area'
    }]
}); 
```

有修复或解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:53:14.067

不支持这样的事情。您可以将特定系列设置为导航器，因此我建议对您自己的堆叠系列求和，然后传递给导航器，请参阅：[http ://api.highcharts.com/highstock#navigator.series](http://api.highcharts.com/highstock#navigator.series)

# ios - 旋转自定义视图？

> ID：15068438
> 
> 赞同：0
> 
> 时间：2013-02-25T13:46:27.083
> 
> 标签：ios, core-animation, core-graphics

我的自定义视图上有一些图纸，想让用户旋转它

视图控制器.m：

```
-(void)setMyView:(myView *)myView {
...
    [self.faceView addGestureRecognizer:[[UIRotationGestureRecognizer alloc] initWithTarget:faceView action:@selector(rotate:)]];
...
} 
```

人脸视图.m

```
- (void)rotate:(UIRotationGestureRecognizer *)gesture
{
    if (gesture.state == UIGestureRecognizerStateChanged) {
        self.transform = CGAffineTransformMakeRotation(gesture.rotation);
        gesture.rotation = 0;
    }
} 
```

它只是不起作用，但很震动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:08:36.720

使用此代码旋转您的视图，在您的视图上启用用户交互和多点触控。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIRotationGestureRecognizer *rotationGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
    [self.myview addGestureRecognizer:rotationGesture];
}

- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer
{
    [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
        [gestureRecognizer setRotation:0];
    }
}

- (void)adjustAnchorPointForGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        UIView *piece = gestureRecognizer.view;
        CGPoint locationInView = [gestureRecognizer locationInView:piece];
        CGPoint locationInSuperview = [gestureRecognizer locationInView:piece.superview];

        piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
        piece.center = locationInSuperview;
    }
} 
```

此代码来自 apples 示例代码[touches](http://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:58:17.230

好的，问题出在您的旋转方法上，试试这段代码，

```
- (void)rotate:(UIRotationGestureRecognizer *)gesture
{
    if (gesture.state == UIGestureRecognizerStateChanged) {
        self.transform = CGAffineTransformRotate(self.transform, [gesture rotation]);
        gesture.rotation = 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:50:51.710

使用以下代码并在 viewController.h 类中添加 UIGestureRecognizerDelegate。

```
-(void)setMyView:(myView *)myView {
//...
        UIRotationGestureRecognizer* rotateRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
        rotateRecognizer.delegate = self;
        [self.faceView addGestureRecognizer:rotateRecognizer];

//...
} 
```

我想这会对你有所帮助。

# c# - 架构中的每个类型名称都必须是唯一的

> ID：15068439
> 
> 赞同：4
> 
> 时间：2013-02-25T13:46:31.773
> 
> 标签：c#, entity-framework

我有一个具有以下结构的模型，其中我有可以在系统中使用的代码列表。

汽车和引擎之间存在一对一的关系，因此我希望将引擎详细信息映射到 Car 表，因此引擎不是实体，它只是域模型抽象。该引擎包含一个描述引擎类型的代码。

我的 dbcontext 有一个用于 CodeList 和 Car 的 DbSet，因为它们是系统中的两个聚合根。当我尝试将其映射到数据库时，出现以下错误：

模式中的每个类型名称都必须是唯一的。类型名称“代码”已定义。

如果我删除 Engine 类中的 Navigation 属性，那么问题就会消失，但我希望能够访问 Code 值而不必独立查找它。如果我删除虚拟并尝试直接映射代码的 id 属性，它会告诉我代码被定义为实体并且可能不会被重新定义为复杂类型。我不确定我哪里出了问题，这似乎是一个直接的用法。看起来 Engine 被视为复杂类型，因此不能具有导航属性。

```
CodeList
{
    public int Id {get;set;}
    public string Name {get;set;}
    public IList<Code> codes {get;set;}
}

Code
{
    public int Id {get;set}
    public string Value {get;set;}
}

public Car
{
    public int Id {get;set;}
    public Engine Engine {get;set;}
}

public Engine 
{
    public int Size {get;set;}
    public int TypeId {get;set;}
    public virtual Code Type {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:30:49.707

当我遇到您的问题时，我遇到了类似的问题。根据@LadislavMrnka 的说法，在 EF 中，[复杂类型根本不能包含导航属性](https://stackoverflow.com/questions/8616007/ef-4-2-codefirst-navigation-property-within-a-complext-type)。显然，然而[NHibernate 确实支持这一点](https://stackoverflow.com/questions/7012319/using-ef-4-1-can-a-complex-type-reference-an-entity-e-g-in-ddd-a-value-object)。如果坚持使用 EF，则必须更改模型以适应此“功能”。无论如何，这就是我最终所做的。

# javascript - 如何在循环中使用 jQuery UI 更新变量？

> ID：15068441
> 
> 赞同：0
> 
> 时间：2013-02-25T13:46:40.077
> 
> 标签：javascript, jquery, jquery-ui

我想在一个循环中创建几个 jQuery UI 滑块。这是我的代码：

JavaScript：

```
var teile = new Array();    
teile[0] = 100;
teile[1] = 200;
teile[2] = 300;

$(function() {
    for (var i = 0; i < 3; i++) {
        $('#slider' + [i]).slider({
            value: teile[i],
            min: 0, max: 600,
            slide: function(event, ui) {
                teile[i] = ui.value;
            }
        });
    }
}); 
```

HTML：

```
<div id="slider0"></div>
<div id="slider1"></div>
<div id="slider2"></div> 
```

CSS：

```
#slider0{
    margin-top: 10px;
    margin-bottom: 10px;
    width: 600px;
}
#slider1{
    margin-top: 10px;
    margin-bottom: 10px;
    width: 600px;
}
#slider2{
    margin-top: 10px;
    margin-bottom: 10px;
    width: 600px;
} 
```

到目前为止它有效，但使用滑块时变量的值似乎没有更新。如果我不使用循环，它会以这种方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:51:29.753

我不确定这一点，但我认为问题在范围内。

```
$(function() {
  for (var i=0; i<3; i++) {
    (function(index) {
      $('#slider'+[index]).slider({
        value: teile[index],
        min: 0, max: 600,
        slide: function(event, ui) {
          teile[index] = ui.value;
        }
      })
    })(i);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:51:33.243

你需要一个闭包：

```
for (var i = 0; i < 3; i++) {
    $('#slider' + [i]).slider({
        value: teile[i],
        min: 0,
        max: 600,
        slide: (function (index) {
            return function (event, ui) {
                teile[index] = ui.value;
            }
        })(i)
    })
} 
```

# android - 奇异9补丁图

> ID：15068443
> 
> 赞同：0
> 
> 时间：2013-02-25T13:46:44.320
> 
> 标签：android

我有一个看起来像这样的 9 个补丁图像

![在此处输入图像描述](../Images/33f873f7be0bbf57405b1f2bc79f907f.png)

基本上我们正在尝试模仿 android 文本字段的外观。然而，这是绘制应该用于调整大小的黑线。图像的背景是透明的，唯一的颜色是底部的线条。这是一个问题吗？

文件是这样命名的

文件名.9.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:52:46.237

您缺少左展开指示器，请使用此： ![在此处输入图像描述](../Images/50bd7bf80d06b637900b6f0155a8f562.png) 您应该使用类似[这样](http://android-holo-colors.com/)的工具为您`View`的 s 生成背景。

# r - 曼哈顿图中的峰值检测

> ID：15068445
> 
> 赞同：5
> 
> 时间：2013-02-25T13:46:51.263
> 
> 标签：r

所附图（曼哈顿图）包含来自基因组的 x 轴染色体位置和 Y 轴 -log(p)，其中 p 是与来自该特定位置的点（变体）相关的 p 值。 ![在此处输入图像描述](../Images/61d771f43615cc711f5d3022feb79ef0.png)

我已使用以下 R 代码生成它（来自 gap 包）：

```
require(gap)
affy <-c(40220, 41400, 33801, 32334, 32056, 31470, 25835, 27457, 22864, 28501, 26273, 
     24954, 19188, 15721, 14356, 15309, 11281, 14881, 6399, 12400, 7125, 6207)
CM <- cumsum(affy)
n.markers <- sum(affy)
n.chr <- length(affy)
test <- data.frame(chr=rep(1:n.chr,affy),pos=1:n.markers,p=runif(n.markers))
oldpar <- par()
par(cex=0.6)
colors <- c("red","blue","green","cyan","yellow","gray","magenta","red","blue","green",          "cyan","yellow","gray","magenta","red","blue","green","cyan","yellow","gray","magenta","red")
mhtplot(test,control=mht.control(colors=colors),pch=19,bg=colors)
> head(test)
  chr pos          p
1   1   1 0.79296584
2   1   2 0.96675136
3   1   3 0.43870076
4   1   4 0.79825513
5   1   5 0.87554143
6   1   6 0.01207523 
```

我有兴趣获得高于某个阈值 (-log(p)) 的图的峰值坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:52:52.317

如果您想要第 99 个百分位以上的值的索引：

```
# Add new column with log values
test = transform(test, log_p = -log10(test[["p"]]))
# Get the 99th percentile
pct99 = quantile(test[["log_p"]], 0.99) 
```

...并从原始数据中获取值`test`：

```
peaks = test[test[["log_p"]] > pct99,]
> head(peaks)
    chr pos           p    log_p
5     1   5 0.002798126 2.553133
135   1 135 0.003077302 2.511830
211   1 211 0.003174833 2.498279
586   1 586 0.005766859 2.239061
598   1 598 0.008864987 2.052322
790   1 790 0.001284629 2.891222 
```

您可以将其与任何阈值一起使用。请注意，我没有计算一阶导数，请参阅此问题以获取一些提示：

[如何计算时间序列的一阶导数](https://stackoverflow.com/questions/14082525/how-to-calculate-first-derivative-of-time-series)

计算一阶导数后，您可以通过查看一阶导数（几乎）为零的时间序列中的点来找到峰值。识别出这些峰值后，您可以检查哪些峰值高于阈值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T22:38:50.943

根据我绘制图表后的经验，您可以使用以下 R 代码查找峰值坐标

> 情节（x[,1]，x[,2]）
> 
> 识别(x[,1], x[,2], 标签=row.names(x))

# 注意这里 x[,1] 指的是 x 坐标（基因组坐标和 x[,2] 将是#your -log10P 值

# 此时使用鼠标点选择一个点并按回车键，#will 为您提供峰值位置，然后键入以下代码以获取#coordinate

> 坐标 <- 定位器（type="l"）
> 
> 坐标

# java - JSF：如果省略 GET 参数，则抛出 404 错误

> ID：15068446
> 
> 赞同：2
> 
> 时间：2013-02-25T13:46:55.787
> 
> 标签：java, jsf, jsf-2

如果将无效的 GET 参数传递给页面，我需要抛出 404 错误。我已将其附加到验证器，如此处[所述](https://stackoverflow.com/a/4902757/1973599)。但是如果根本没有参数，验证器就不会被调用。我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:53:15.100

您可以使用验证器进行与现在完全相同的检查，但在与`preRenderView`事件关联的侦听器中：

```
<f:event listener="#{yourBean.validateParams}" type="preRenderView"/> 
```

这个`validateParams`监听器应该有一个像这样的检查：

```
public void validateParams() {
    if (yourParam == null || /*Other fitting conditions here*/) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        facesContext.getExternalContext().responseSendError(404, "The param 'yourParam' is missing");
        facesContext.responseComplete();
    }
    //Other params here
} 
```

这种方法适用于多个参数，您可以在其中验证每个参数并采取相应措施。

# java - 如何将请求从 servlet 重定向到 https

> ID：15068447
> 
> 赞同：0
> 
> 时间：2013-02-25T13:46:58.300
> 
> 标签：java, jsp, servlets

我有一个欢迎文件是 servlet 的网站。

```
<welcome-file-list>
    <welcome-file>Main</welcome-file>
 </welcome-file-list> 
```

servlet 从数据库中收集数据并将其发送到 JSP。如何将所有请求从主 servlet 重定向到 https？任何的想法？？？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:18:11.440

感谢 **Eng.Fouad**的提示...问题已解决

```
//Check if the requested scheme is http then redirect it to https
if(request.getScheme().equals("http"))
{
    response.sendRedirect("https://www.mysite.com");
}
//If the request is not http but https then collect the data and send to jsp
else
{
        //Collect the data from the database and send it to JSP
        request.setAttribute("data",data);
        RequestDispatcher rd = request.getRequestDispatcher("/main.jsp");
    rd.forward(request, response);
} 
```

# asp.net - 某些计算机上的字符串到日期异常

> ID：15068455
> 
> 赞同：1
> 
> 时间：2013-02-25T13:47:23.107
> 
> 标签：asp.net, vb.net, datetime

我编写了一个检查以确保用户以 dd/MM/yyyy 格式输入日期。但是，它在某些计算机上不起作用，抛出异常。但是，它在我的计算机上运行时运行良好。这是为什么？我做错了还是我需要在计算机上进行一些设置。

```
 Try
     checkDate = "24/02/2013"
     selectedDate = DateTime.ParseExact(checkDate, "dd/MM/yyyy", CultureInfo.InvariantCulture)

  Catch ex As Exception
     lblError.Text = "Invalid Date."

  End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:40:37.720

您的 formatProvider（ParseExact 的 3° 参数）应与您使用的格式匹配，在您的情况下这可能是错误的。InvariantCulture 不是“万能”的文化；这是一种不会改变的文化，当您持久/检索日期时间而不向用户显示它们时，您可以依赖它。我认为（我现在不能尝试）你应该这样做：

```
 checkDate = "24/02/2013"
 Dim dtfi As New DateTimeFormatInfo()
 dtfi.ShortDatePattern = "dd/MM/yyyy"
 selectedDate = DateTime.ParseExact(checkDate, "dd/MM/yyyy", dtfi) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:01:50.763

在您的 page_load 中使用它可能会起作用..

```
Thread.CurrentThread.CurrentUICulture = New System.Globalization.CultureInfo("en-US")
Thread.CurrentThread.CurrentCulture = New System.Globalization.CultureInfo("en-US") 
```

当然根据您的文化偏好更改 en-US

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:35:05.633

不知道怎么回事，我重新上传应用程序，错误就消失了。奇怪的。

# google-play - 我的免费版应用程序没有在 google play 中显示，但付费版是

> ID：15068458
> 
> 赞同：0
> 
> 时间：2013-02-25T13:47:31.030
> 
> 标签：google-play

在阅读了很多其他帖子并且找不到答案之后，我问是否有人有同样的问题。

我为同一个APP编写了两个版本：一个免费版本，另一个付费版本。

两者都发布数小时后，只能在 google play 中找到付费版本。如果我使用搜索工具（使用网络或设备），免费版本不会“存在”，但它会在开发者控制台中发布。

最奇怪的是我也找不到单击“更多来自开发人员”的应用程序！免费版在哪里？！

比较两者的Manifest，除了包和名称外，它们是相同的。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:59:15.933

回答我自己的问题：开发人员控制台的新布局中有一个错误。我在我的应用程序中添加了两种语言：英语、葡萄牙语。但是开发者控制台并没有创建两种不同的语言，而是两次添加了英语。使用旧界面，我删除了第二种语言并再次创建了新的葡萄牙语翻译。有效！

# sql-server - 在 SELECT 查询中使用变量

> ID：15068460
> 
> 赞同：0
> 
> 时间：2013-02-25T13:47:34.853
> 
> 标签：sql-server

我想运行以下 SELECT 查询：

```
DECLARE @ColumnName nvarchar(50)
SET @ColumnName = 'AlarmID' -- actually these are calculated 
                            -- by another SELECT but this isn't relevant
SELECT MIN(@ColumnName) FROM INSERTED 
```

这不起作用，它返回 @ColumnName 的值而不是实际数据。我怎样才能使这项工作？

我无法将 SELECT 放入字符串并使用 sp_executesql 运行它，因为我将无法访问 INSERTED 表（这是在触发器中运行的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:57:04.127

```
EXEC('SELECT MIN(' + @ColumnName + ') FROM INSERTED') 
```

源自提供[的链接](https://stackoverflow.com/questions/10092869/can-i-pass-column-name-as-input-parameter-in-sql-stored-procedure)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:54:34.943

如果您希望最小值作为变量，请使用此选项：

```
SELECT @columnName = MIN(@ColumnName) FROM YourTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:56:51.067

你真的不能那样做。根据@ColumnName 可能值的数量，最好的选择是使用 case 语句动态设置字段值，或者使用 IF 语句有选择地运行正确的查询：

```
SELECT CASE @ColumnName WHEN 'AlarmID' THEN MIN(AlarmID) WHEN 'AnotherField' THEN
MIN(AnotherField) END AS MinimumValue FROM INSERTED 
```

或者

```
IF @ColumnName = 'AlarmID'
  SELECT MIN(AlarmID) FROM INSERTED
ELSE
  .... 
```

# c# - 扩展器覆盖 Silverlight 中的控件

> ID：15068462
> 
> 赞同：0
> 
> 时间：2013-02-25T13:47:50.700
> 
> 标签：c#, silverlight

我有一个树控件，用户可以在其中通过检查来选择节点。我想给用户一个选项来只显示选定的项目。

我正在考虑一个扩展器。当用户展开扩展器时，扩展器会在原始树控件上展开，其中包含仅显示所选项目的另一个内容。

问题是扩展器只能拉伸到其内容的大小。我希望扩展器完全伸展，以便在扩展器折叠之前原始树是不可见的。

代码如下。画布外的树是原始树。画布内的树是扩展器应该显示的只读树

```
<Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition Height="33" />
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Canvas Canvas.ZIndex="999" Grid.Row="0" HorizontalAlignment="Stretch" >
                    <telerik:RadExpander HorizontalAlignment="Right" ToolTipService.ToolTip="Show Selected Items"
                      ExpandDirection="Down" Expanded="RadExpander_Expanded" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
                        <telerik:RadExpander.Header>
                            <TextBlock
      Text="Selected Items"

      Width="{Binding      RelativeSource={RelativeSource AncestorType=telerik:RadExpander}, Path=ActualWidth}"   />
                        </telerik:RadExpander.Header>

                        <telerik:RadTreeView IsExpandOnSingleClickEnabled="True"  IsLoadOnDemandEnabled="False"

                                             Height="{Binding RelativeSource={RelativeSource AncestorType=telerik:RadExpander}, Path=ActualHeight}" 
                           ItemTemplate="{StaticResource SelectedElementDataOnlyTemplate}"  Margin="0,0,0,8"              
                                 ItemsSource="{Binding Path=SelectedElementsOnly}"  x:Name="ElementsTree2" >
                        </telerik:RadTreeView>

                    </telerik:RadExpander>                  

                </Canvas>
                <telerik:RadTreeView  AutomationProperties.AutomationId="ElementPicker" IsExpandOnSingleClickEnabled="True" IsVirtualizing="True"
                             ItemsOptionListType="None" Grid.Row="1" ItemTemplate="{StaticResource ElementDataTemplate}" IsRootLinesEnabled="True" Margin="0,0,0,8"
                             ItemsSource="{Binding Path=Elements}"  IsLoadOnDemandEnabled="True"    Visibility="{Binding ToggleSelectedElements,
                                                                                 Converter={StaticResource BoolToVisibilityConverter}}" LoadOnDemand="tvMain_LoadOnDemand" x:Name="ElementsTree" SelectedItem="{Binding Path=SelectedItem,Mode=TwoWay}">
                </telerik:RadTreeView>
            </Grid> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-25T17:25:51.513

使用 Canvas 而不是 Grid 可以解决问题。

希望能帮助到你。

# java - Java：返回调用函数的对象

> ID：15068465
> 
> 赞同：-2
> 
> 时间：2013-02-25T13:48:02.417
> 
> 标签：java, jackson

我正在使用 Jackson（一个 Java JSON 库）并且我有一个问题，我想在同一个类中使用 JavaFile--> JsonString 函数作为函数的参数。澄清：

```
return mapper.writeValueAsString(this.Object());<----this doesnt work
}

 public static class Test {

    private String jsonStuff;
    private List<String> moreJsonStuff = new ArrayList<>();
    private String evenMoreJsonStuff; 
```

我不想写“JavaToJSOnParser”或类似的东西，因为有人告诉我那是糟糕的代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:50:35.697

您的问题很不清楚，但您可能只是在寻找：

```
return mapper.writeValueAsString(this); 
```

# wordpress - 从wordpress理解php的键值对

> ID：15068469
> 
> 赞同：0
> 
> 时间：2013-02-25T13:48:30.037
> 
> 标签：wordpress, key-value

我想了解键值对的组织方式。例如，在 wordpress 的 wp_postmeta 表中，我们在 meta_value 列中有以下内容，这可能表示从哪里以及如何获取给定幻灯片的图像。

关于如何在那里获得图像参考的任何提示？也许我可以在这里做类似于 var_dump 或 print_r 的事情？

```
a:3:{i:1;a:6:{s:5:"title";s:39:""Femme de l'économie" les hommes bleus";s:11:"description";s:0:"";s:3:"url";s:0:"";s:9:"urlTarget";s:5:"_self";s:4:"type";s:10:"attachment";s:6:"postId";s:5:"10391";}i:2;a:6:{s:5:"title";s:41:""Femme de l'économie" les hommes oranges";s:11:"description";s:0:"";s:3:"url";s:0:"";s:9:"urlTarget";s:5:"_self";s:4:"type";s:10:"attachment";s:6:"postId";s:5:"10392";}i:3;a:6:{s:5:"title";s:31:""Femme de l'économie" les arts";s:11:"description";s:0:"";s:3:"url";s:0:"";s:9:"urlTarget";s:5:"_self";s:4:"type";s:10:"attachment";s:6:"postId";s:5:"10393";}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:53:44.727

那是一个[序列化的字符串](http://www.php.net/manual/en/function.serialize.php)。为了能够在数据库中存储数组或对象，WordPress 必须将它们转换为字符串。

通常，您不需要手动对其进行[反序列化](http://www.php.net/manual/en/function.unserialize.php)，因为如果您首先使用 WordPress 的 API 获取该数据（例如通过`get_option()`或`$wpdb`方法），WordPress 会为您执行此操作。在这种情况下，您可能正在寻找[`get_post_meta()`](http://codex.wordpress.org/Function_Reference/get_post_meta)

# c# - 将 RoutedEvent 自定义为 EventTrigger

> ID：15068471
> 
> 赞同：6
> 
> 时间：2013-02-25T13:48:33.217
> 
> 标签：c#, wpf, eventtrigger, routedevents

我有自己的形状课

```
public sealed class MirrorTile : Shape 
```

在这堂课中，我添加了事件

```
public static readonly RoutedEvent SelectedEnterEvent = EventManager.RegisterRoutedEvent("SelectedEnter", RoutingStrategy.Bubble, typeof(RoutedEventHandler), typeof(MirrorTile));

public event RoutedEventHandler SelectedEnter
{
    add
    {
        this.AddHandler(SelectedEnterEvent, value);
    }

    remove
    {
        this.RemoveHandler(SelectedEnterEvent, value);
    }
} 
```

并想以这种方式使用它

```
<shapes:MirrorTile>
    <shapes:MirrorTile.Triggers>
        <EventTrigger RoutedEvent="SelectedEnter">
            <BeginStoryboard Storyboard="{StaticResource SelectShape}"/>
        </EventTrigger>
    </shapes:MirrorTile.Triggers>
</shapes:MirrorTile> 
```

启动后我得到异常： `{"RoutedEventConverter cannot convert from System.String."}`

我做错了什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:05:43.240

`<EventTrigger RoutedEvent="shapes:MirrorTile.SelectedLeave">`

命名空间也丢失了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T13:52:23.747

您还必须提供类型：

```
<EventTrigger RoutedEvent="MirrorTile.SelectedEnter"></EventTrigger> 
```

根据评论编辑：

您是否尝试将命名空间添加到您的 XAML 声明？

```
 xmlns:local="clr-namespace:YourNameSpace" 
```

然后将其修复为：

```
 <EventTrigger RoutedEvent="local:MirrorTile.SelectedEnter"></EventTrigger> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:52:46.747

我认为您缺少定义事件的类型：

```
<EventTrigger RoutedEvent="MirrorTile.SelectedEnter"> 
```

# c# - 会话放弃在 ASP.NET 中不起作用

> ID：15068473
> 
> 赞同：0
> 
> 时间：2013-02-25T13:48:40.000
> 
> 标签：c#, asp.net, iis-7, global-asax

我开发了一个网站并将数据存储在会话中。如果用户放弃会话，我必须在会话中设置数据。

注销.aspx：

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            WebUser user = (WebUser)Session["User"];
            Session["User"] = null;
            Session.Abandon();
            if (user != null)
                SentiWordnetUtils.LogYaz(user.uAdi + "\t Çıkış Yaptı");

            if ((Request.Cookies["OturumRef"] != null))
                Response.Cookies["OturumRef"].Value = string.Empty;

            Response.Redirect("Login.aspx");
        }
        catch (Exception ex)
        {
             LogYaz( "Oturum Sonlandırma Hatası "+ex.Message.ToString());
        }

    } 
```

global.asax 中的 session_end 函数：

```
 void Session_End(object sender, EventArgs e) 
    {
        List<TBL_SentiWordNet> tempList = (List<TBL_SentiWordNet>)Session["listProcess"];
        if (tempList == null)
            return;
        using (DataClassesDataContext dc = new DataClassesDataContext())
        {
            foreach (TBL_SentiWordNet word in tempList)
            {
                var a = (from i in dc.TBL_SentiWordNets where i.id == word.id select i).FirstOrDefault();

                a.state = 0;

            }
           dc.SubmitChanges();
        }
       Session["listProcess"]= null;
       Session["User"] = null;

    } 
```

此代码适用于本地，但不适用于 IIS。a.state 从来不是 `0`

网络配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <sessionState mode="InProc" timeout="30" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Transactions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
  </system.web>
  <connectionStrings>
    <add name="myconnectionstring" connectionString="Data Source=127.0.0.1;Initial Catalog=mydb;Persist Security Info=True;User ID=userID;Password=password" providerName="System.Data.SqlClient" />
  </connectionStrings>
    <system.webServer>
        <defaultDocument>
            <files>
                <clear />
                <add value="default.aspx" />
                <add value="Default.htm" />
                <add value="Default.asp" />
                <add value="index.htm" />
                <add value="index.html" />
                <add value="iisstart.htm" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:54:56.587

Session End 永远不会真正触发，因为当它执行时，是在页面请求完成并且请求已经发送到客户端之后。

您需要在您的页面或基本页面类中执行 session_end 代码（对于此类事情非常方便）。

请参阅以下 SO 链接：

[Session_End 不触发？](https://stackoverflow.com/questions/4813462/session-end-does-not-fire)

[Session.Abandon() 和 Session.Clear() 有什么区别](https://stackoverflow.com/questions/1470445/what-is-the-difference-between-session-abandon-and-session-clear)

# iis-7 - 将应用程序配置文件添加到 web.config

> ID：15068474
> 
> 赞同：0
> 
> 时间：2013-02-25T13:48:42.977
> 
> 标签：iis-7, web-config

我正在运行 IIS7。我有一个 3rd 方 dll，它有自己的配置文件。我的理解是 IIS7 不会读取这个配置文件，我必须将它添加到服务器 web.config 文件中。

但是，添加特定节点时出现错误。在 dll.config 它有：

```
<configuration>
  <dllSettings>
    --- bunch of settings....
  </dllSettings>
</configuration> 
```

所以我将同一个节点添加到我的 web.config 文件中......

我应该在我的 web.config 中添加一个父节点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:58:15.077

当我必须添加更多配置文件时。这就是我在 Web.Config 中定义的方式

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="[NAMESPACE].[PROJECT].Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    </sectionGroup>

</configSections>

<applicationSettings>
        <[NAMESPACE].[PROJECT].Properties.Settings configSource="[NAMESPACE].[PROJECT].dll.settings.config"/>
</applicationSettings>

...
</configuration> 
```

这是我在其他配置文件中的内容

```
<?xml version="1.0" encoding="utf-8" ?>
<[PROJECT].Properties.Settings>
    <setting name="[NAME]" serializeAs="String">
        <value>Anything</value>
    </setting>
</[PROJECT].Properties.Settings> 
```

# c++ - 使用 FindFirstFile 和 FindNextFile C++ 进行递归硬盘搜索

> ID：15068475
> 
> 赞同：8
> 
> 时间：2013-02-25T13:48:43.210
> 
> 标签：c++, winapi

我看不到我哪里出错了。当前代码直接跳到closefile。不处理任何文件，我可能只是遗漏了一些明显的东西，这已经是漫长的一天。

我的功能是在硬盘 (c:) 中搜索给定文件。EG 示例.txt。&strFilePath 这里将用于 FindFirstFile 声明。

任何帮助都会受到欢迎。

谢谢。

```
String Copy::SearchDrive( const String& strFile, const String& strFilePath, const bool& bRecursive, const bool& bStopWhenFound ) const
{
    HANDLE hFile;

    WIN32_FIND_DATA file;

    hFile = FindFirstFile("C:\\", &file);

    String strFoundFilePath = "";

    if ( hFile )
    {
        while ( FindNextFile( hFile, &file))
        {
            String strTheNameOfTheFile = file.cFileName;
            // It could be a directory we are looking at
            // if so look into that dir
            if ( file.dwFileAttributes == FILE_ATTRIBUTE_DIRECTORY
                && bRecursive )
            {
                String strNewFilePath = strFilePath + "\\";
                strNewFilePath += strTheNameOfTheFile;
                SearchDrive( strFile, strNewFilePath, bRecursive, bStopWhenFound );
            }
            else
            {
                if ( strTheNameOfTheFile == strFile )
                {
                    strFoundFilePath = strFilePath;
                    strFoundFilePath += "\\";
                    strFoundFilePath += strFile;

                    /// TODO
                    // ADD TO COLLECTION TYPE

                    if ( bStopWhenFound )
                    {
                        break;
                    }
                }
            }
        }
        CloseHandle( hFile );
    }
    return strFoundFilePath;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T21:00:09.323

您的代码中有很多逻辑错误。试试这个（你没有指出你正在使用哪个编译器，所以我假设 C++Builder，它有一个大写的 S`String`类。如果你使用不同的编译器，请根据需要调整代码）：

```
String Copy::SearchDrive(const String& strFile, const String& strFilePath, const bool& bRecursive, const bool& bStopWhenFound) const
{
    String strFoundFilePath;
    WIN32_FIND_DATA file;

    String strPathToSearch = strFilePath;
    if (!strPathToSearch.IsEmpty())
        strPathToSearch = IncludeTrailingPathDelimiter(strPathToSearch);

    HANDLE hFile = FindFirstFile((strPathToSearch + "*").c_str(), &file);
    if (hFile != INVALID_HANDLE_VALUE)
    {
        do
        {
            String strTheNameOfTheFile = file.cFileName;

            // It could be a directory we are looking at
            // if so look into that dir
            if (file.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
            {
                if ((strTheNameOfTheFile != ".") && (strTheNameOfTheFile != "..") && (bRecursive))
                {
                    strFoundFilePath = SearchDrive(strFile, strPathToSearch + strTheNameOfTheFile, bRecursive, bStopWhenFound);

                    if (!strFoundFilePath.IsEmpty() && bStopWhenFound)
                        break;
                }
            }
            else
            {
                if (strTheNameOfTheFile == strFile)
                {
                    strFoundFilePath = strPathToSearch + strFile;

                    /// TODO
                    // ADD TO COLLECTION TYPE

                    if (bStopWhenFound)
                        break;
                }
            }
        }
        while (FindNextFile(hFile, &file));

        FindClose(hFile);
    }

    return strFoundFilePath;
} 
```

```
String strFoundFilePath = SearchDrive("file.ext", "C:\\", ...); 
```

**更新：**`SearchDrive()`在通过子目录递归时，它的替代实现不会保持多个搜索句柄打开：

```
#include <memory>

String Copy::SearchDrive(const String& strFile, const String& strFilePath, const bool& bRecursive, const bool& bStopWhenFound) const
{
    String strFoundFilePath;
    WIN32_FIND_DATA file;

    String strPathToSearch = strFilePath;
    if (!strPathToSearch.IsEmpty())
        strPathToSearch = IncludeTrailingPathDelimiter(strPathToSearch);

    HANDLE hFile = FindFirstFile((strPathToSearch + "*").c_str(), &file);
    if (hFile != INVALID_HANDLE_VALUE)
    {
        std::auto_ptr<TStringList> subDirs;

        do
        {
            String strTheNameOfTheFile = file.cFileName;

            // It could be a directory we are looking at
            // if so look into that dir
            if (file.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
            {
                if ((strTheNameOfTheFile != ".") && (strTheNameOfTheFile != "..") && (bRecursive))
                {
                    if (subDirs.get() == NULL)
                        subDirs.reset(new TStringList);

                    subDirs->Add(strPathToSearch + strTheNameOfTheFile);
                }
            }
            else
            {
                if (strTheNameOfTheFile == strFile)
                {
                    strFoundFilePath = strPathToSearch + strFile;

                    /// TODO
                    // ADD TO COLLECTION TYPE

                    if (bStopWhenFound)
                        break;
                }
            }
        }
        while (FindNextFile(hFile, &file));

        FindClose(hFile);

        if (!strFoundFilePath.IsEmpty() && bStopWhenFound)
            return strFoundFilePath;

        if (subDirs.get() != NULL)
        {
            for (int i = 0; i < subDirs->Count; ++i)
            {
                strFoundFilePath = SearchDrive(strFile, subDirs->Strings[i], bRecursive, bStopWhenFound);

                if (!strFoundFilePath.IsEmpty() && bStopWhenFound)
                    break;
            }
        }
    }

    return strFoundFilePath;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:58:31.773

你的条件不正确，你应该比较`INVALID_HANDLE_VALUE`

```
 if ( hFile != INVALID_HANDLE_VALUE) 
```

除了跳过由 返回的第一个匹配文件之外`FindFirstFile`，这是您想要的吗？

另外我相信你需要一个通配符`c:\\*`，否则它只会匹配`c:\\`自己

```
hFile = FindFirstFile("C:\\*", &file); 
```

# sql - 无法使用 sql 命令删除空元组

> ID：15068477
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:00.430
> 
> 标签：sql, rdbms

我有一张表，其中 attriubtes 是 usn name outtime。的值

```
 usn=222;
       name=xyz;
       outtime=NULL; 
```

当我查询使用

```
delete from table_1 where outtime=' '; 
```

没发生什么事。

但是当我使用
`delete from table_1 where outtime!=' ';`
它进行查询时，它工作得很好，为什么会这样？`DATATYPE FOR` `OUTTIME`是`nchar(10)`；_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:50:59.800

NULL 和空白是不同的。用这个：

```
DELETE FROM table_1 WHERE outtime IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:51:18.060

因为空字符串`' '`与`NULL`值不同。

Null 表示未知值，其中 as`' '`是空字符串的值。如果要删除所有为 null 的值，请尝试以下操作：

```
delete from table_1 where outtime is null 
```

# python - Flask：查看函数没有返回对 js 文件的响应

> ID：15068479
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:03.113
> 
> 标签：python, flask

我用 python-flask 建立了一个网站。在一个页面中我加载了一个 javascript 文件。这是我的文件结构：

```
/python
   /static
     /plugins
     /themes
       /default
          /js
            /my-js.js
   /templates
     /my-file.html
   /venv
   app.py 
```

我已将 my-js.js 包含在 my-file.html 中。

在此 js 之前，还有其他脚本成功加载了页面（与 my-js.js 位于同一目录中）。

当我用 url 调用我的文件时，`/static/themes/default/js/my-js.js` 它会`ValueError: View function did not return a response`显示回溯：

```
Traceback (most recent call last):
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1361, in full_dispatch_request
    response = self.make_response(rv)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1439, in make_response
    raise ValueError('View function did not return a response')
ValueError: View function did not return a response 
```

为什么会发生？我没有为这些js之类的静态文件编写路由。为什么正在加载其他js文件而这个不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:27:47.323

我能想到的几件事。首先，看起来您正在尝试将绝对路径传递给 my-js.js，当您确实需要相对路径时，请尝试 URL “static/themes/default/js/my-js.js”（没有前导斜线），看看是否有帮助。

此外，如果没有看到您的 python 或 Javascript，很难确认这一点，但是您是否在响应对象中设置了适当的 mimetype（它应该是 application/javascript）？

# cuda - 如何在cuda中分配图像堆栈

> ID：15068480
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:13.160
> 
> 标签：cuda

我是 CUDA 领域的初学者。我想对 x 帧（8 位黑白）执行简单的天真平均以减少噪声（或中值）。您建议如何为 X 图像分配内存？

这会好吗？

```
 unsigned char** dev_imageStack = new unsigned char*[X];
    for(int i = 0; i < X; i++)
    {
        cudaMalloc( (void**) &dev_imageStack[i], imageSize);
    } 
```

提前谢谢，伊多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:35:42.780

它依赖于 dev_imageStack 的使用。dev_imageStack 是一个指向 CPU 内存的指针，它持有指向 GPU 内存的指针。您将无法将 dev_imageStack 传递给内核并从中读取，并且您的内核很可能会崩溃。您可以将 dev_imageStack[0].. dev_imageStack[X] 传递给您的内核，因为这是指向 GPU 内存的指针。

如果您需要使用指针传递所有帧，我建议分配一个一维数组并在内核内执行帧偏移以获得正确的帧。

```
unsigned char* dev_imageStack;
cudaMalloc((void**)&dev_imageStack, imageSize*X); 
```

当您使用它时，您应该通过使用 Y*imageSize 偏移到数组中来访问帧，其中 Y 是您要访问的帧。

如果您想以类似于您描述的方式进行操作，则必须这样做：

```
unsigned char** host_imageStack = new unsigned char*[X];

for(int i = 0; i < X; i++)
{
    cudaMalloc( (void**) &host_imageStack[i], imageSize*sizeof(char));
    cudaMemcpy(host_imageStack[i], "char_ptr_to_frame_i_on_host", imageSize*sizeof(char),cudaMemcpyHostToDevice);
}

unsigned char** dev_imageStack;
cudaMalloc((void**)&dev_imageStack, X*sizeof(char*));
cudaMemcpy(dev_imageStack,host_imageStack,X*sizeof(char*),cudaMemcpyHostToDevice); 
```

现在您可以将 dev_imageStack 用作指向内核的 2D 指针。访问帧和像素将通过调用内核中的 dev_imageStack[frame_id][pixel_id] 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:04:10.503

在自己的项目中，我通过这种方式解决了这个问题：

```
unsigned char* dev_imageStack;
cudaMalloc( (void**)&dev_imageStack, imageSize * frames );

unsigned char* dev_image1 = dev_imageStack;
unsigned char* dev_image2 = dev_image1 + imageSize;
...
unsigned char* dev_imageN = dev_imageN-1 + imageSize; 
```

我只分配了一个大内存块并使用指向几个“子块”的指针。

如果你想要一个包含指向“子块”的指针的数组，你可以这样做。

```
void* dev_images;
cudaMalloc( (void**)&dev_images_tmp, frames * sizeof( unsigned char* ) );
unsigned char** dev_images = (unsigned char**)dev_images_tmp; 
```

现在在内核中，您可以通过以下方式调用帧 x 的图像：

```
dev_images[x][index]; 
```

使用索引，您可以获取目标图像的元素。

# c# - SignalR - 在不同的 Redis 背板之间切换

> ID：15068481
> 
> 赞同：8
> 
> 时间：2013-02-25T13:49:19.650
> 
> 标签：c#, asp.net, redis, signalr

假设我们有 2 个 Redis 服务器背板，一个作为主服务器，另一个作为从服务器。

每个 Web 应用程序都在使用 SignalR，以便在发生时将内容推送到连接的客户端，并将它们连接到我在 Application_Start 中使用的背板

```
GlobalHost.DependencyResolver.UseRedis(host, port, "", new[] {"signalr.key"});
RouteTable.Routes.MapHubs(); 
```

现在，如果 Master Redis Backplane 出现故障，我想将 Slave Redis 服务器提升为 Master，并将所有现有连接从 Web 服务器切换到新的 Master Redis 服务器。

为了将从服务器提升为主服务器，我使用以下代码

```
using (var conn = new RedisConnection(host, port, allowAdmin: true))
{
    if (conn.ServerType != ServerType.Master)
    {
        conn.Open();
        var makeMaster = conn.Server.MakeMaster();
        var info = conn.Wait(conn.GetInfo());
        conn.Wait(makeMaster);
    }
} 
```

这似乎可以完成工作。

您能否帮助我了解如何通知我的 Web 应用程序背板已更改连接到新应用程序的方式，以维持连接的客户端之间的通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:17:23.430

我们没有*专门*使用 SignalR ，但是我们在使用 redis 的方式上有一些非常相似的地方，尤其是在节点之间切换时。具体来说，我们使用 redis pub/sub 订阅一个频道，并在更改 master 时向该频道广播。

我们的配置*有点*不同，因为我们使用基于`ConnectionUtils.Connect(...)`. 这意味着我们可以指定多个节点，并`ConnectionUtils`处理确定哪个是当前主节点的问题。但在您的情况下，您也许可以将新的主信息作为发布/订阅的一部分发布。我还应该注意，处理切换主机（带有通知）的大部分代码都包含在`ConnectionUtils.SwitchMaster`. 这包括更改广播，您可以通过 订阅`ConnectionUtils.SubscribeToMasterSwitch`。作为一个次要的实现细节，它使用的通道是`"__Booksleeve_MasterChanged"`- 但如果你只使用公共方法，那是不透明的。

# html - 带有 html 元素的列表框

> ID：15068483
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:20.233
> 
> 标签：html, .net, winforms, listbox, webbrowser-control

谁能给我一些建议？我目前有一个正在使用的列表框，在列表框中有来自任何网站的图像列表。它们是通过这种方法从网站上抓取的

```
Private Sub WebBrowser1_DocumentCompleted(ByVal sender As Object, ByVal e As WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    Dim PageElements As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("img")
    For Each CurElement As HtmlElement In PageElements
        imagestxt.Items.Add(imagestxt.Text & CurElement.GetAttribute("src") & Environment.NewLine)
    Next
    Timer1.Enabled = True
End Sub 
```

然后我使用图片控制方法来获取图像并显示它。

```
pic1.Image = New Bitmap(New MemoryStream(New WebClient().DownloadData(imagestxtimagestxt.SelectedItem.ToString))).SelectedItem.ToString))) 
```

此方法从 HTML 中提取图像和标题。

```
Private Function StrHTML12() As Boolean
    Dim htmlDocument As HtmlDocument = WebBrowser1.Document
    ListBox1.Items.Clear()
    For Each element As HtmlElement In htmlDocument.All
        ListBox1.Items.Add(element.TagName)
        If element.TagName.ToUpper = "IMG" Then
            imgtags.Items.Add(element.OuterHtml.ToString)
        End If
        If element.TagName.ToUpper = "TITLE" Then
            titletags.Items.Add(element.OuterHtml.ToString)
            Timer1.Enabled = False
        End If
    Next
End Function 
```

这是一种计算页面上有多少空`alt=""`或空的计数方法。`img alt=''`

基本上我想做的是；

有一个程序可以检查图像，查看`alt=''`或者`img alt=''`如果在网站上开发人员没有在 alt 标记中放置任何内容，我希望图像显示在图片框中，并且我希望 alt 标记在它旁边或下方它什么的。但我不知道怎么做。

```
counter = InStr(counter + 1, strHTML, "<img alt=''")
counter = InStr(counter + 1, strHTML, "alt=''")
counter = InStr(counter + 1, strHTML, "alt=""") 
```

上面看起来真的很慢而且很乱。有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:50:20.263

我没有安装 VB，所以我无法测试代码。我也不熟悉 datagridview 组件，所以没有尝试将我的代码与其集成。

下面的代码应该让你知道`title`页面，并遍历所有`img`没有（或有空）的标签`alt-text`

`HtmlElement.GetAttribute(sAttr)`返回属性的值或空字符串。

```
Private Sub WebBrowser1_DocumentCompleted(ByVal sender As Object, ByVal e As     WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
    Dim Title As String
    Dim ImSrc As String
    Dim PageElements As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("img")
    // This line might need to be adjusted, see below
    Title = PageElements.GetElementsByTagName("title")(0).InnerText

    For Each CurElement As HtmlElement In PageElements
        If CurElement.GetAttribute("alt") = "" Then
             // CurElement does not have alt-text
             ImSrc = CurElement.GetAttribute("src") // This Image has no Alt Text
        Else
             // CurElement has alt-text
        End If
    Next
    Timer1.Enabled = True
End Sub 
```

获取标题的行可能需要更改，因为我不确定如何访问集合。`GetElementsByTagName`您想要从函数返回的第一个（希望是唯一的）元素。

# django - 有没有一种快速的方法可以将 Django 项目自动更新到下一个主要版本？

> ID：15068486
> 
> 赞同：6
> 
> 时间：2013-02-25T13:49:32.223
> 
> 标签：django

所以 Django 1.5 将在 Internet-Week 内发布（很快），我感受到了开始使用它的压力，因为它大大改进了用户模型。但就像之前的 1.4 和 1.3 一样，升级不仅仅是一种`virtualenv`改变，我需要改变（在某些地方相当大）我的项目结构。

我最近从 1.2 跳到 1.4 并花费数小时（在许多项目中）更新他们的文件结构（和设置）以反映现代 Django 偏好。Django 1.5 将迫使我完成并修复所有 CACHE 设置并修复`{% url ... %}`模板中的几乎每个实例。我想知道是否有更简单的方法。

### 有什么东西可以自动“升级” Django 项目吗？

...或者至少“扫描”一个项目以显示更大的喇叭问题，这样我就可以在开始 QC 之前将这些问题排除在外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:04:04.020

不。而且有充分的理由。

版本之间的一些变化是次要的（例如围绕变量的整个引号），而有些是主要的（例如新的用户模型）。

虽然自动检测可能是可能的（尽管考虑到您必须在应用程序中执行所有可能的代码路径，但这并不重要），但更改它们将是脆弱的。并且可能非常危险。

相反，在版本之间移动时，我一次向上移动一个版本（到该专业的最后一个次要版本）并进行测试。Django 将针对将在版本之间删除的功能发出警告，因此很容易在运行代码的同时捕获它们。

# php - PHPUnit_Selenium：如果找不到元素，不要抛出异常？

> ID：15068488
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:37.733
> 
> 标签：php, testing, selenium, phpunit, selenium-webdriver

`PHPUnit_Selenium`如果元素不存在，我正在使用扩展程序并遇到一些不需要的行为：

**硒测试用例：**

```
$this->type('id=search', $searchTerm); 
```

**测试输出：**

> RuntimeException：在“http://localhost:4444/selenium-server/driver/”访问 Selenium 服务器时响应无效：错误：未找到元素 id=search

所以，我收到一个**错误**，但我想将其转换为**失败**

我考虑过这个：

```
try {
    $this->type('id=search', $searchTerm);
} catch (RuntimeException $e) {
    $this->fail($e->getMessage());
} 
```

但我真的不想将所有运行时异常都转换为失败，也没有看到一种清晰的方法来区分它们。

额外的断言会很棒，但我找不到适合我需要的断言。就像是：

```
$this->assertLocatorExists('id=search'); // ???
$this->type('id=search', $searchTerm); 
```

我错过了什么吗？还是有其他我没有想到的方法？

**使用的版本：**

*   PHPUnit 3.7.14
*   PHPUnit_Selenium 1.2.12
*   硒服务器 2.30.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T13:36:38.150

对于基于 的测试用例[`SeleniumTestCase`](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/SeleniumTestCase.php)，我发现以下方法很有用：

```
getCssCount($cssSelector)
getXpathCount($xpath)
assertCssCount($cssSelector, $expectedCount)
assertXpathCount($xpath, $expectedCount) 
```

对于基于[@Farlan](https://stackoverflow.com/a/15138813/664108)[`Selenium2TestCase`](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/PHPUnit/Extensions/Selenium2TestCase.php)建议的解决方案的测试用例应该可以工作，以下方法检索元素并在未找到元素时抛出异常：

```
byCssSelector($value)
byClassName($value)
byId($value)
byName($value)
byXPath($value) 
```

在我的情况下，测试来自`SeleniumTestCase`，因此问题中示例的解决方案是：

```
$this->assertCssCount('#search', 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:04:54.123

为什么不做这样的事情：

$element = $this->byId('search');

//来自[https://github.com/sebastianbergmann/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php)

在 java 中（对不起，我在 Java 中使用 Selenium）如果没有找到带有 id 搜索的元素，这将引发异常。我会检查文档以查看它是否与 php.ini 中的行为相同。否则你可以试试看$element是否有效，例如：is_null($element)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:37:07.883

好吧，您可以检查 catch 块中的异常消息文本，如果它不匹配`Element id=search not found`（或合适的正则表达式），则重新抛出它。

```
try {
    $this->type('id=search', $searchTerm);
} catch (RuntimeException $e) {
    $msg = $e->getMessage();
    if(!preg_match('/Element id=[-_a-zA-Z0-9]+ not found/',$msg)) {
        throw new RuntimeException($msg);
    }
    $this->fail($msg);
} 
```

不理想，但它会做的伎俩。

我想这说明了为什么应该编写自定义异常类而不是重用标准异常类。

或者由于它是开源的，当然，您可以随时修改 phpunit Selenium 扩展，为其提供自定义异常类。

# asp.net - 在文字组件中显示文本内的链接

> ID：15068489
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:38.853
> 
> 标签：asp.net, html, hyperlink, encode

我正在显示来自数据库的数据`Literal`。

```
<asp:Literal ID="TextLiteral" Text='<%# Eval("Text")%>' Mode="Encode" runat="server"> 
```

我`Mode="Encode"`用来防止脚本注入。但我需要在文本中显示链接（如[http://google.com ）。](http://google.com)

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:10:08.217

一种选择是使用文本-HTML 转换，例如[Markdown](http://daringfireball.net/projects/markdown/)。

这样，您可以防止脚本注入，同时仍然允许简单的 HTML 标记，例如链接、文本格式等。

# jquery - 如何使用使用最新版本的 jquery 而不是在应用程序中使用的 jquery 插件？

> ID：15068491
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:46.993
> 
> 标签：jquery

我有一个使用 jquery 版本 xx1 的 Web 应用程序。现在我们要使用一个使用 xx5 版本的插件。

请看下文，

```
 <script type="text/javascript" src="<c:url value='/resources/scripts/jquery-1.7.1.min.js'/>"></script>
<script type="text/javascript" src="<c:url value='/resources/scripts/jquery-ui-1.8.2.custom.min.js'/>"></script>

// some other scripts 

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="<c:url value='/resources/mobile/scripts/mobiscroll.core-2.4.4.js'/>"></script>
<script src="<c:url value='/resources/mobile/scripts/mobiscroll.datetime-2.4.4.js'/>"></script> 
```

在这里，我的插件根本不工作。如果我删除第一个 jquery，它就可以工作。

我尝试使用 jQuery.noConflict()，但没有用。

注意：- 由于这是其他人开发的旧应用程序，我们不想修改他们的脚本或完全升级 jquery 版本，因为它可能会破坏一些我们甚至可能不知道的代码。

该应用程序似乎完全使用了许多版本的 jquery，并且在很多地方产生了很多问题和冲突。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:13:51.740

在页面上包含两次 jQuery 会导致灾难，这听起来像是您遇到过的。老实说，我不建议您走这条路，因为您在应用程序中引入了大量技术债务。我会坐下来花时间将所有 jQuery 版本修复为一个统一的版本，以便于未来的发展。

如果您对此一无所知，请查看[如何在同一页面上运行不同版本的 jQuery？](https://stackoverflow.com/questions/528241/how-do-i-run-different-versions-of-jquery-on-the-same-page)这解释了您需要执行的顺序。

# sencha-touch-2 - 在 Sencha Touch 2 中使用 Carousel 获取边框

> ID：15068494
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:49.560
> 
> 标签：sencha-touch-2

我在使用 Sencha Touch 2 的轮播时遇到问题。我在 iPhone 中的应用程序周围出现了边框。我应该怎么做才能从应用程序中删除此边框？

这是我的代码：

```
var mainPanel = ({
    xtype: 'carousel',
    id: 'playersView',
    ui: 'light',
    flex: 1,
    layout: {
        type: 'fit'
    },
    items: [
        playerLiveMonitorView,
        blackPlayerLiveMonitorVie
    ]
});

var topPanel = ({
    xtype: 'panel',
    width: '100%',
    height: '10%',
    layout: {
        type: 'vbox',
    },
    items: [
        {
            xtype: 'panel',
            width: '100%',
            layout: {
                type: 'hbox',

            },
            items: [
                serverBtnPanel,
                logoImagePanel
            ]
        },
        roundImagePanel
    ]
});

this.add([topPanel, mainPanel]); 
```

# xna - 如何在返回行走状态之前先完成 Update_Hit 函数中的精灵动画？

> ID：15068495
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:50.833
> 
> 标签：xna, xna-4.0

这是我用于切换状态的代码：

```
 if (mCurrentState == State.Walking)
    {
        action = "stand";
        Update_Stand(gameTime);

        if (aCurrentKeyboardState.IsKeyDown(Keys.Left) == true)
        {
            action = "run";
            feetPosition.X += MOVE_LEFT;
            effect = SpriteEffects.None;

            Update_Run(gameTime);

        }
        else if (aCurrentKeyboardState.IsKeyDown(Keys.Right) == true)
        {
            action = "run";
            feetPosition.X += MOVE_RIGHT;
            effect = SpriteEffects.FlipHorizontally;

            Update_Run(gameTime);
        }

        if (aCurrentKeyboardState.IsKeyDown(Keys.Z) == true)
        {
            mCurrentState = State.Hitting;
        }
    }

    if (mCurrentState == State.Hitting)
    {
        action = "hit";

        Update_Hit(gameTime);

        mCurrentState = State.Walking;
    } 
```

我的 Update_Hit(GameTime gameTime) 方法就是这样。我有 2 个精灵要制作动画。

```
public void Update_Hit(GameTime gameTime)
    {
        // Check if it is a time to progress to the next frame
        if (nextFrame_Hit >= frameInterval_Hit)
        {
            // Progress to the next frame in the row
            currentFrame_Hit.X++;

            // If reached end of the row advance to the next row, reset to the first frame 
            if (currentFrame_Hit.X >= sheetSize_Hit.X)
            {
                currentFrame_Hit.X = 0;
                currentFrame_Hit.Y++;
            }

            // If reached last row in the frame sheet, jump to the first row again
            if (currentFrame_Hit.Y >= sheetSize_Hit.Y)
                currentFrame_Hit.Y = 0;

            // Reset time interval for next frame
            nextFrame_Hit = TimeSpan.Zero;
        }
        else
        {
            // Wait for the next frame
            nextFrame_Hit += gameTime.ElapsedGameTime;
        }
    } 
```

如何在将状态更改回行走之前完成命中动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:21:10.173

由于您使用的是固定的游戏时间，因此您需要确保在动画完成之前没有更改状态，以确保在每次更新时您都会获得动画的单帧，直到动画完成：

```
if (nextFrame_Hit >= frameInterval_Hit)
{
    // Progress to the next frame in the row
    currentFrame_Hit.X++;

    // If reached end of the row advance to the next row, reset to the first frame 
    if (currentFrame_Hit.X >= sheetSize_Hit.X)
    {
        currentFrame_Hit.X = 0;
        currentFrame_Hit.Y++;
    }

    // If reached last row in the frame sheet, jump to the first row again
    if (currentFrame_Hit.Y >= sheetSize_Hit.Y)
    {
        currentFrame_Hit.Y = 0;
        mCurrentState = State.Walking;
    }

    // Reset time interval for next frame
    nextFrame_Hit = TimeSpan.Zero;
}
else
{
    // Wait for the next frame
    nextFrame_Hit += gameTime.ElapsedGameTime;
} 
```

你需要改变这个：

```
if (mCurrentState == State.Hitting)
{
    action = "hit";

    Update_Hit(gameTime);

} 
```

# javascript - 如何在javascript中替换javascript中的某些字母？

> ID：15068498
> 
> 赞同：0
> 
> 时间：2013-02-25T13:49:53.943
> 
> 标签：javascript, jquery, json, utf-8

从外部 JSON 文件打印数据时，我会像这样“Ã ¥、Ã¤、Ã ¶”一样输出“Å、Ä、Ö”。该文件的编码错误，但我对该文件无能为力，因为它来自 API。但是，是否有一种轻松的方法可以将所有“1”替换为“A”？我尝试在我的 HTML 文档中获取一个 UTF-8 编码的标签。没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:52:59.610

尝试使用正则表达式替换：

```
 wholetext.replace(/1/g,'A') 
```

# php - 使用 Doctrine 和 ZF2 进行分页

> ID：15068503
> 
> 赞同：7
> 
> 时间：2013-02-25T13:50:00.903
> 
> 标签：php, doctrine-orm, zend-framework2

我正在尝试使用 ZF2 和 Doctrine 实现分页。

我在这里要做的是从关联表中获取数据，可以说'xyz'。

我的类别表在其自己的 PK 上进行一对多自引用。我的类别表有以下字段

*   身份证（PK）
*   Created_at
*   Category_id（自引用 PK）

我的 XYZ 表可以说它被称为名称表有

*   身份证（PK）
*   Category_id(FK)
*   姓名
*   细节

这就是我试图获取数据的方法

```
 public function allSubcategories($id, $column, $order) {
 $repository = $this->entityManager->getRepository('Category\Entity\Category');
    $queryBuilder = $repository->createQueryBuilder('category');
    $queryBuilder->distinct();
    $queryBuilder->select('category');

    $queryBuilder->join('Category\Entity\CategoryName', 'category_name', 'WITH', 'category.id = category_name.category');
    $queryBuilder->orderBy("category.status");
    $q = $queryBuilder->getDql();
    return $query = $this->entityManager->createQuery($q);
} 
```

在我的控制器中，这就是我正在做的事情

```
 public function subcategoryAction() {

    ///////////////////////////InPut Params Given for the pagination
    $category_id = (int) $this->params()->fromRoute('id', 0);
    $page = (int) $this->params()->fromRoute('page', 0);
    $column = $this->params()->fromQuery('column');
    $order = $this->params()->fromQuery('order');

    $categoryModel = $this->getServiceLocator()->get('Category');
    $categoryModel->category = $category_id;

    $perPage = 10;
    $request = $this->getRequest();
    if ($request->isGet()) {
        $view = new ViewModel();
        $query = $categoryModel->allSubcategories($category_id, $column, $order);

        $paginator = new ORMPaginator($query);

        $paginator = new \Zend\Paginator\Paginator(new
                        \Zend\Paginator\Adapter\ArrayAdapter(array($paginator)));
        $paginator->setCurrentPageNumber($page);
        $paginator->setItemCountPerPage(2);

    }

    return array('id' => $category_id, 'view' => $paginator);
} 
```

现在我没有得到实施分页的结果，可以一些 1 指导我了解我所缺少的内容吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T14:28:15.977

您在那里使用了错误的分页器。相反，您可以使用 by [`DoctrineORMModule`](https://github.com/doctrine/DoctrineORMModule)（请参阅[`DoctrineORMModule\Paginator\Adapter\DoctrinePaginator`](https://github.com/doctrine/DoctrineORMModule/blob/0.7.0/src/DoctrineORMModule/Paginator/Adapter/DoctrinePaginator.php)）。

这可能不是很明显，但逻辑与您已经写的类似：

```
use DoctrineORMModule\Paginator\Adapter\DoctrinePaginator as PaginatorAdapter;
use Doctrine\ORM\Tools\Pagination\Paginator as ORMPaginator;
use Zend\Paginator\Paginator as ZendPaginator;

$query = $categoryModel->allSubcategories($category_id, $column, $order);

$paginator = new ZendPaginator(new PaginatorAdapter(new ORMPaginator($query))); 
```

# visual-studio-2012 - 不使用调试器启动 IIS Express

> ID：15068505
> 
> 赞同：2
> 
> 时间：2013-02-25T13:50:14.597
> 
> 标签：visual-studio-2012, iis-express

出于性能原因，我想在不调试的情况下启动 IIS Express Webserver。在 web.config 中设置 'compilation debug="false"' 参数可以解决问题，但是每次我开始调试我的应用程序时，Visual Studio 都会显示一个错误，说无法附加调试器。如果我禁用 Web 项目的“始终在调试中启动”，我不会收到此错误，但当然 IIS Express 不会启动。

# c# - 根据 Active Directory 策略检查密码

> ID：15068506
> 
> 赞同：8
> 
> 时间：2013-02-25T13:50:17.570
> 
> 标签：c#, active-directory

我有一个允许用户更改其 AD 密码的前端。

1.  有没有办法获取特定用户的密码策略（例如细粒度）及其属性（长度、复杂性......）

2.  有没有办法根据这个特定的政策检查字符串“xyz121”？

编辑：我不想检查存储在活动目录中的当前密码。我想检查新密码是否可以安全地保存到活动目录中。例如：用户输入他的新密码“xyz121”并想要更改它，但活动目录只允许至少 8 个字符的密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:15:51.910

跟踪 SO 和谷歌想出了这个 - [http://blogs.msdn.com/b/david_leblanc/archive/2007/10/11/checking-password-complexity.aspx](http://blogs.msdn.com/b/david_leblanc/archive/2007/10/11/checking-password-complexity.aspx)

从此 SO 帖子开始 - 以[编程方式确定 AD 密码策略](https://stackoverflow.com/questions/4992474/determine-ad-password-policy-programmatically)

这导致了这个 SO 答案 - [https://stackoverflow.com/a/10549823/416574](https://stackoverflow.com/a/10549823/416574)

这导致了上面的博客文章。希望有帮助。

（请随意不赞成，这似乎是评论的文字太多，但这里真的没有工作，但谷歌搜索）。

# jquery - 获取 $(this) 的完整值，包括 jquery 中的标签和属性

> ID：15068514
> 
> 赞同：3
> 
> 时间：2013-02-25T13:50:51.480
> 
> 标签：jquery

我有一堆具有数据属性的元素：

```
<span data-product_attribute="title" data-product_id="12">product title</span>
<span data-product_attribute="vendor" data-product_id="12">product vendor</span> 
```

我正在使用一个 jQuery 选择器来抓取它们并将它们放在一个列表中进行处理：

```
$('span[data-product_attribute]').map(function() {
    var o = {};
    o.name = $(this).attr("data-product_attribute");
    o.value = $(this).html(); // ** this line is not what I want **
    return o;
}).get() 
```

该`html()`方法只返回`<span>`标签内包含的内容，但我想要的是全部内容。即我试图让它这样做：

```
o.value = '<span data-product_attribute="title" data-product_id="12">product title</span>' 
```

是否有一个 jQuery 方法可以返回由 表示的所有内容`$(this)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:00:19.453

您需要元素的“outerhtml”。某些浏览器可以通过该`.outerHTML`属性提供此功能。

[如果做不到这一点，在我](https://stackoverflow.com/a/6509421/6782)对相关问题的回答中有一个微不足道的插件：

```
(function($) {
    $.fn.outerhtml = function() {
        return $('<div/>').append(this.clone()).html();
    };
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:07:33.037

示例 HTML：

```
 <div id="testing">
    <span data-product_attribute="title" data-product_id="12">product title</span>
    <span data-product_attribute="vendor" data-product_id="12">product vendor</span>
 </div> 
```

Javascript：

```
 function getHtml(elem) {
     var tmp = $('<div />');
     tmp.append(elem);
     return $(tmp).html();
 }    

 $('span[data-product_attribute]').map(function() {
     var o = {};
     o.name = $(this).attr("data-product_attribute");
     o.value = getHtml($(this));
     alert(o.value);
     return o;
 }).get() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:58:47.773

你可以很容易地通过 JavaScript 做到这一点：

```
$(this).get(0).outerHTML; 
```

如有必要，您可以使用此插件：

```
$.fn.outerHTML = function(){
    return (!this.length) ? this : (this[0].outerHTML || (
      function(el){
          var div = document.createElement('div');
          div.appendChild(el.cloneNode(true));
          var contents = div.innerHTML;
          div = null;
          return contents;
    })(this[0]));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:16:49.770

用这个...

```
$('#mydiv').on('click', function(){
    console.log(this.outerHTML);
}); 
```

看这个[例子](http://jsfiddle.net/PM8sK/2/)

# android - Eclipse 运行时 Dalvik 错误

> ID：15068521
> 
> 赞同：0
> 
> 时间：2013-02-25T13:51:07.150
> 
> 标签：android, eclipse

当我要运行任何程序时，将显示此对话框：

![在此处输入图像描述](../Images/9e6072a96c70551a5a8e9ffccdf2b469.png)

在 Eclipse 中，这些错误显示在控制台中：

1.  `[2013-02-25 19:05:09 - Dex Loader] Unable to execute dex: Target out of range: +0000ffd1`

2.  `[2013-02-25 19:05:09 - Conversion to Dalvik format failed: Unable to execute dex: Target out of range: +0000ffd1`

如果我从项目中删除 Android 依赖项，错误就会消失，但我需要一个更永久的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:54:47.680

我认为这是一种错误，请尝试删除您的依赖项（我指的是添加的库，而不是标准依赖项）。
然后清理并重建所有项目。此后，您应该能够添加已删除的库而不会出错。

# android - BroadcastReceiver中的android volatile变量

> ID：15068523
> 
> 赞同：1
> 
> 时间：2013-02-25T13:51:14.980
> 
> 标签：android

我有

```
public class ScreenReceiver extends BroadcastReceiver {

private volatile boolean wifiNetwork = false;
private volatile boolean mobileNetwork = false;

} 
```

并且我一直在执行接收器时检查布尔变量。在这里使用`volatile`变量是否明智？我没有任何线程，但我总是想要这个变量的最新状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:54:43.177

如果只有一个线程正在使用该对象，那么使变量变为 volatile 是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:07:28.503

Volatile 只会让您的值在多个线程中保持最新。如果您使用单个线程，那么您不应该担心这一点。但是您应该考虑将值保留在用户首选项中，因为如果类的实例被破坏（很可能），那么您将获得新值（默认值）。

# iphone - iPhone 或 iPhone 5 的 locationUpdate: 方法中的条件语句

> ID：15068528
> 
> 赞同：2
> 
> 时间：2013-02-25T13:51:21.687
> 
> 标签：iphone, ios, objective-c, uistoryboard

我在 locationUpdate: 方法中有这个 iPhone 或 iPhone 5 条件语句。

此代码有效：

```
- (void)locationUpdate:(CLLocation *)location {
    //locLabel.text = [location description];

#ifdef DEBUG    
    NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);
#endif

                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
                OffersViewController *lvc = [storyboard instantiateViewControllerWithIdentifier:@"OffersViewController"];
                [self.navigationController pushViewController:lvc animated:NO];

} 
```

但是当iphone5条件码。它失败。该应用程序不会崩溃，而只会保留在视图控制器 (RootViewController) 上，并且不会推送到 OffersViewController 或 OffersViewControlleriPhone。

```
- (void)locationUpdate:(CLLocation *)location {
    //locLabel.text = [location description];

#ifdef DEBUG    
    NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);
#endif

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)]) {
            CGSize result = [[UIScreen mainScreen] bounds].size;
            CGFloat scale = [UIScreen mainScreen].scale;
            result = CGSizeMake(result.width * scale, result.height * scale);

            if(result.height == 960) {
                NSLog(@"iPhone 4 Resolution");

                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
                OffersViewController *lvc = [storyboard instantiateViewControllerWithIdentifier:@"OffersViewController"];
                [self.navigationController pushViewController:lvc animated:NO];

            }
            **else if(result.height == 1136) {
                NSLog(@"iPhone 5 Resolution");

                UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
                OffersViewControlleriPhone5 *lvc = [storyboard instantiateViewControllerWithIdentifier:@"OffersViewControlleriPhone5"];
                [self.navigationController pushViewController:lvc animated:NO];

            }**
        }
        else {
            NSLog(@"Standard Resolution");

            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
            OffersViewController *lvc = [storyboard instantiateViewControllerWithIdentifier:@"OffersViewController"];
            [self.navigationController pushViewController:lvc animated:NO];

        }
    }

} 
```

似乎是 iPhone5 的 else if 语句才是问题所在。即使我将 OffersViewControlleriPhone5 更改为 OffersViewController，它也不起作用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:53:54.353

刚刚想通了。我有一个在条件达到之前`}`关闭的。`if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){` `if(result.height == 1136) {`

# jquery - jQuery - 在表格内创建元素

> ID：15068532
> 
> 赞同：0
> 
> 时间：2013-02-25T13:51:31.313
> 
> 标签：jquery

我正在尝试使用 jQuery 在表格内动态创建复选框、按钮和 2 个输入框。下面是我的 jQuery 代码，它创建了元素但没有正确创建列。我错过了什么？

```
var contentTblOpen = "<table border='4'>";
        var contentTblClose = "</table>";
        var contentTrOpen = "<tr>";
        var contentTrClose = "</tr>";
        var contentTdOpen = "<td>";
        var contentTdClose = "</td>";

        $("#Quote" + id).after(

            contentTblOpen
        ).append(
            contentTrOpen
        ).append(
            contentTdOpen
        ).append(
        $(document.createElement("input")).attr({
            id: 'RL_' + rLCount + '__Delete'
        , name: 'RL[' + rLCount + '].Delete'
        , type: 'checkbox'
        , checked: false
        })
        .click(function (event) {
            var cbox = $(this)[0];
            alert(cbox.value);
        })
        ).append(
        $(document.createElement("input")).attr({
            id: 'Line' + rLCount
        , name: 'Line' + rLCount
        , value: 'Line' + rLCount
        , class: 'ClsrLButton'
        , type: 'button'
        })
        ).append(
            contentTdClose + contentTdOpen
        ).append(
        $(document.createElement("input")).attr({
            id: 'RL_' + rLCount + '__TextLine'
        , name: 'RL[' + rLCount + '].TextLine'
        , value: 'RL_' + rLCount + '__TextLine'
        , type: 'input'
        })
        ).append(
            contentTdClose + contentTdOpen
        ).append(
        $(document.createElement("input")).attr({
            id: 'RL_' + rLCount + '__Amount'
        , name: 'RL[' + rLCount + '].Amount'
        , value: 'RL[' + rLCount + '].Amount'
        , type: 'input'
        }).append(
            contentTdClose + contentTrClose + contentTblClose
        )
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:17:14.733

而不是做一系列`append`创建一个长字符串（类似）：

`'<table><tr><td><input id="RL_0__Delete" name="RL[0].Delete" type="checkbox">...'`

```
var newTable = contentTblOpen 
               + contentTrOpen
               + contentTdOpen
               + "<input " + "id='RL_" + rLCount + "__Delete'" + "type='checkbox' >" 
```

并附加此字符串。

顺便说一句，操作 DOM 非常慢，所以如果你创建一个字符串并一次性附加所有内容，你会赢得几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:27:33.107

这里的主要缺陷是每次调用`.append()`浏览器都会创建一个有效的 DOM。因此，只要您插入`<tr>`没有 a`</tr>`的浏览器就会`</tr>`为您插入，结果将是一个有效的 DOM，但它不会是您最初想要的。

请查看strah的答案，它应该对您有所帮助。

# sql - 选择中间行失败，只有一行

> ID：15068537
> 
> 赞同：2
> 
> 时间：2013-02-25T13:51:38.903
> 
> 标签：sql, sql-server, math

我写了一个从表中选择中间行的查询：

```
with records as(select row_number() over(order by someKey) as 'row', *
                from MyTable)
select *
from records
where row=(select (count(*)/2) from records) 
```

这工作正常，除了`MyTable`只有一行的情况，它返回一个空数据集。我想这是因为在那种特殊情况下，1/2 被截断为零。所以我尝试`ceiling( count(*)/2 )`了，但我得到了相同的结果。如何`count(*)/2`使用浮点运算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:52:39.787

尝试，`.0`黑客，

```
CEILING(COUNT(*) / 2.0) 
```

# database-design - 如何为谷歌日历设计表格结构，如重复功能？

> ID：15068539
> 
> 赞同：4
> 
> 时间：2013-02-25T13:51:52.600
> 
> 标签：database-design

如何以最佳方式为 Google 日历（如重复功能）设计表格结构？

谷歌日历允许用户在不确定或确定的时间段内安排事件的再次发生。现在，当我们这样做时，在数据库表中管理这些类型的未来数据的最佳方法是什么？

例如：我有一个名为 events 的表，其中存储了所有非重复类型的常规事件，并安排在某个日期和某个时间。现在，当涉及到重复发生的事件时，我应该创建一个单独的表并将其存储为模板吗？

例如，让我们把它看得很简单：

```
**Events**
id
title
description
datetime_from
datetime_to
status

**Event_Schedule**
id
title 
description
time_from
time_to
repeats_on (Daily, Weekly, Monthly)
repeat_config ____serialized array or object 
```

字段不完整，但这只是为了提供一些想法，我可以在这里做的是一个 cron-job 或调度程序可以为下次发生创建一个事件。如果要在日历上显示它，可以通过从`Event_Schedule`表中生成数据来完成，如果用户编辑未来事件的数据，我们可以将该事件的数据存储在`Events`表中。这是正确的方式还是可以以更好的方式完成？我可以考虑将它作为模板存储在同一个表中，但我发现一个单独的表是更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:10:05.423

您的数据库不必做所有事情。你的程序代码可以负责一些日历的渲染。

这是事件数据库表的一个版本。

```
Event
-----
Event ID
Event Title
Event Location
Event Description
Event Start Time Stamp
Event End Time Stamp
Repeat Frequency (None, Daily, Weekly, Monthly, Quarterly, Yearly, 
    every nth day (every 3rd Tuesday)
    other odd frequencies 
        (the Tuesday following the first Monday in November, the Sunday 
         following the paschal full moon, which is the full moon that 
         falls on or after the vernal (spring) equinox) 
```

您的程序将负责遍历 Event 表的事件行，查看哪些具有重复频率，并计算哪些事件将在显示的月份显示。

基本上，您的程序代码必须计算以下程序对象。这不是数据库表。

```
Calendar Event
--------------
Event Date
Event Start Time
Event End Time
Event Title
Event Location
Event Description. 
```

您将有一个正在显示的月份的日历事件列表或数组。

# javascript - 向上链传递承诺时更改数据结果？

> ID：15068549
> 
> 赞同：2
> 
> 时间：2013-02-25T13:52:27.387
> 
> 标签：javascript, jquery, jquery-deferred, promise

我正在尝试通过 jQuery 迁移到使用 Promise。在我的原始代码中，我有一个回调参数，它接受修改后的数据：

```
var getRss = function (url, fnLoad) {
    $.get(url, function (data) {
        var items = [];
        $(data).find('item').each(function (index) {
            items.push({
                title: $(this).find('title').text(),
                pubDate: $(this).find('pubDate').text()
            });
        });

        fnLoad(items);
    });
} 
```

我试图改变承诺，但“完成”返回未修改的数据而不是解析的数据：

```
var getRss = function (url) {
    return $.get(url).done(function (data) {
        var items = [];
        $(data).find('item').each(function (index) {
            items.push({
                title: $(this).find('title').text(),
                pubDate: $(this).find('pubDate').text()
            });
        });
    });
} 
```

然后像下面这样使用它，但我得到的是原始 XML 版本，而不是被转换为对象的修改版本：

```
 getRss('/myurl').done(function (data) {
      $('body').append(template('#template', data));
  }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:18:11.330

您想使用[`then`](http://api.jquery.com/deferred.then/)（阅读文档[`pipe`](http://api.jquery.com/deferred.pipe/)，查看[pipe() 和 then() 文档与 jQuery 1.8 中的现实](https://stackoverflow.com/q/12011925/1048572)）：

```
function getRss(url) {
    return $.get(url).then(function (data) {
        var items = [];
        $(data).find('item').each(function (index) {
            items.push({
                title: $(this).find('title').text(),
                pubDate: $(this).find('pubDate').text()
            });
        });
        return items;
    });
} 
```

…它的工作原理是

```
function getRss(url) {
    var dfrd = $.Deferred();
    $.get(url).done(function (data) {
        var items = [];
        $(data).find('item').each(function (index) {
            items.push({
                title: $(this).find('title').text(),
                pubDate: $(this).find('pubDate').text()
            });
        });
        dfrd.resolve(items);
    }).fail(dfrd.reject);
    return dfrd.promise();
} 
```

# ios - iOS UiPickerView(-Helper) 应发送消息

> ID：15068554
> 
> 赞同：0
> 
> 时间：2013-02-25T13:52:50.563
> 
> 标签：ios, delegates, uipickerview

我正在尝试做的事情：

我有一个`ViewController`：

```
@implementation ViewController
@synthesize myPicker;
@synthesize myPickerHelper;
@synthesize label;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    myPickerHelper = [[UIPickerViewHelper alloc]initWithUIPickerView:myPicker   andNumberOfComponents:4];

    [myPickerHelper.valuesForComponent1 addObject:@"TEST1"];
    [myPickerHelper.valuesForComponent1 addObject:@"TEST2"];
    ;

    [weightsPicker reloadAllComponents];
    [weightsPicker selectRow:0 inComponent:0 animated:YES];
    //TODO receive message from picker helper.
  //label.text = ... set a listner (like that one in java) or what else
    }

} 
```

我有一个`PickerViewHelper`：（处理委托和数据源问题）

```
@interface UIPickerViewHelper : NSObject <UIPickerViewDelegate, UIPickerViewDataSource, OnPickerViewChangeDelegate>

@implementation UIPickerViewHelper 
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
  //TODO send message to controller view.
} 
```

和协议：

```
@protocol OnPickerViewChangeDelegate
@optional
-(void)onChange:(NSString*)result;
@end 
```

我想要的是在我的`UiPickerViewHelper`类中使用协议方法“onChange”，以便通知我的标签（在我的 ViewController 中）。我知道如何在 Java 中解决这个问题，但我不知道如何在目标 c 中解决这个问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:26:59.657

**UIPickerViewHelper.h**

```
@property (nonatomic, assign) id <OnPickerViewChangeDelegate> delegate 
```

**UIPickerViewHelper.m**

```
@synthesize delegate;

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //TODO send message to controller view.
    [self.delegate onChange:[NSString stringWithFormat:@"Selected row %d", row]];
} 
```

**视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    myPickerHelper = [[UIPickerViewHelper alloc]initWithUIPickerView:myPicker   andNumberOfComponents:4];
    myPickerHelper.delegate = self;

    ...
}

-(void)onChange:(NSString*)result {

    NSLog(@"Here is the result: %@", result);
    label.text = result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:36:27.763

没有`UIPickerview`用于更改的委托方法。因为它会停在任何位置并且

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

方法将被调用，因此如果用户在选择器停止动画/滚动之前退出......隐藏的方法`UIPickerView`必须在滚动/动画时为最后选择的值调用 uipicker。

```
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
    {
    if(delegate respondsToSelector:@selector(onChange:)){
        [delegate onChange:row];//return the index of row selected
     }
    } 
```

# ember.js - 在 ember.js 中定义多分段捕获所有路由

> ID：15068558
> 
> 赞同：9
> 
> 时间：2013-02-25T13:53:00.973
> 
> 标签：ember.js, ember-router

我正在使用 Ember.js，如果用户导航到与资源不匹配的 URL，我想创建一个捕获所有路由以将用户发送回应用程序的根目录。（我正在使用历史 API）我已经这样实现了：

```
App.Router.map(function() {
    this.resource('things', function() {
        this.resource('thing', {path:':thing_id'}); 
    });
    this.route('catchAll', { path: ':*' });
    this.route('catchAll', { path: ':*/:*' });
    this.route('catchAll', { path: ':*/:*/:*' });
});

App.Router.reopen({
  location: 'history'
});

App.CatchAllRoute = Ember.Route.extend({ 
    redirect: function() {
        this.transitionTo('index'); 
    }
});

App.IndexRoute = Ember.Route.extend({ 

}); 
```

我的问题是：无论路径中的段数如何，我是否可以定义一个匹配任何尚未解析为资源的路径的全部路径？

我正在使用 Ember.VERSION ：1.0.0-rc.1

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-26T20:24:46.707

经过一番摆弄后，我想我找到了解决方案：`*:`似乎可以解决问题，例如

```
this.route('catchAll', { path: '*:' }); 
```

我设置了[这个小提琴](http://jsfiddle.net/cenic/XNyme/4/)来演示它是如何工作的。

# javascript - location.reload 更改网址

> ID：15068566
> 
> 赞同：0
> 
> 时间：2013-02-25T13:53:10.743
> 
> 标签：javascript

有谁知道什么可能导致这段 javascript 更改 url：

```
<script type="text/javascript">
  window.setTimeout(function() {
    window.location.reload(true);
  }, 5000);
</script> 
```

窗口位置接受片段并将 url 从 /web/page/123321 更改为 /web/page

以前有人见过这样的事情吗？可能只是某些浏览器吗？

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:58:09.517

您正在关闭 setTimeout 函数内的 php 标记。

尝试这个 ...

```
<script type="text/javascript">
  window.setTimeout("location.reload(true);", 5000);
</script> 
```

# javascript - 如何防止默认工具提示显示在 svg 元素上悬停？

> ID：15068568
> 
> 赞同：16
> 
> 时间：2013-02-25T13:53:12.817
> 
> 标签：javascript, jquery, svg, tooltip

我正在尝试显示在 HTML 页面中绘制的交互式 SVG 图像。我没有使用 javascript/jQuery 语言的经验，但是使用一些 jQuery 插件，例如 PowerTip，我目前能够在悬停在 SVG 元素上时显示自定义工具提示。自定义工具提示出现，但在一秒钟后消失，当它们被默认工具提示的出现（在所有浏览器中）关闭时，只显示“标题”元素的内容。有没有办法禁用默认工具提示？下面是我如何使用 PowerTip 显示我的自定义工具提示。

```
$('#myGraph .node').on({ powerTipPreRender: function() {
    var title = "";
    $('a text', this).each( function(i) {
        title += " " + $(this).text();
    });

    var synonyms = "";
    $("synonym", this).each( function(i) {
        synonyms += "<li>" + parseSynonym($(this).text()) + "</li>";
    });
    $(this).data('powertipjq', $([
           '<p><b>' + title + '</b></p>',
           '<p><b>Synonym(s)</b><ul>' + synonyms + '</ul></p>'
           ].join('\n')));
}}); 
```

Tnaks 提前

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-01-04T15:02:04.920

**简短的回答：**

```
.no-tooltips {
    pointer-events: none;
} 
```

* * *

**详细解答：**

您可以通过从鼠标中删除所有操作来禁用工具提示。将其添加到显示工具提示的子项上。但请注意，它还会禁用鼠标的任何文本选择。

*例子：*

```
.no-tooltips {
    pointer-events: none;
}
```

```
<svg viewBox="0 0 100 20" xmlns="http://www.w3.org/2000/svg">
  <g>
    <title>Tooltips</title>
    <text x="0" y="0" font-size="10" dy="0">
      <tspan x="0" dy=".8em">Tooltipsable</tspan>
      <tspan x="0" dy=".8em" class="no-tooltips">Not tooltipsable</tspan>
    </text>
  </g>
</svg>
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-11-16T20:50:04.553

```
svg {
  pointer-events: none;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-28T02:08:24.490

就我而言。

我有

```
<a title="click me plz" >
   <svg>
    <title> hello title <title>
    <g>gggggrrrrrrrr.....</a>
   </svg>
</a> 
```

CSS

```
a > svg { pointer-events: none; } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-23T07:42:24.290

从 SVG 中删除标题标签将删除显示的工具提示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-20T14:51:37.093

正如[Girish Sadanandan](https://stackoverflow.com/users/4812972/girish-sadanandan)已经说过的 - 您可以完全删除`title`元素，并且工具提示将消失。如果您想保留`pointer-events`功能但摆脱工具提示，您可以这样做。如果您不需要该特定元素上的事件，那么使用 CSS 属性`pointer-events: none;`是一种“更清洁”的方式。

这是我的 JavaScript 代码示例：

```
var title_elements = Array.from(my_svg_document.querySelectorAll("title"));

title_elements.forEach(function(el) {
    el.parentNode.removeChild(el);
}); 
```

编辑：由于如何获取对`svg`文档的引用并不那么明显：

```
my_svg_document = document.getElementById('my_svg_id').contentDocument; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-17T09:24:01.263

您可以定义/生成一个空`title`来隐藏另一个。此解决方案不会**禁用鼠标事件**。

```
<svg height="100" width="100">
  <title></title>
  <circle cx="50" cy="50" r="50" fill="grey"/>
  <title>never show this title</title>
</svg>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T13:23:43.460

我尝试了很多解决方案，从重命名“标题”标签到将工具提示设置为空字符串。最后，我了解到无法阻止显示默认的 svg 工具提示。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-22T01:26:08.193

不要将属性命名为`title`类似`message`或`output`那样的名称。

**例子**

代替：

```
<a href="javascript:void(0)" class="tooltip" title="Hi this is a tooltip.">
<i class="fa fa-question-circle" aria-hidden="true">
</i>
</a> 
```

采用：

```
<a href="javascript:void(0)" class="tooltip" message="Hi this is a tooltip.">
<i class="fa fa-question-circle" aria-hidden="true">
</i>
</a> 
```

最后但并非最不重要的一点是，应用您想要的格式，如下所示：

```
.tooltip:hover:after {
  content: attr(message);
  position: absolute;
  background:#fff;
  border:#000 solid 1px;
  color:#000;
  font-weight:300 !important;
  padding:10px;
} 
```

或者以任何你想要的方式。

告别默认浏览器工具提示！

[https://jsfiddle.net/1vsd5dxp/](https://jsfiddle.net/1vsd5dxp/)

# ios - Facebook SDK 验证用户

> ID：15068569
> 
> 赞同：0
> 
> 时间：2013-02-25T13:53:14.183
> 
> 标签：ios, objective-c, facebook

我对 IOS Facebook SDK 几乎没有任何问题。

我正在创建具有自己的登录过程和 facebook 登录的应用程序。在我的应用程序中，我有一个可以购买产品的部分，我想在让他购买之前验证持有 iPhone 的人是真正的用户。如果用户以常规方式登录，我需要做的就是要求用户重新输入他的密码并将其与真实密码进行比较。使用 facebook 登录时如何做同样的事情？让我们在单击“支付”按钮时调用“closeAndClearTokenInformation”并关闭会话，当我要求重新打开会话时，它会进入应用程序切换过程并在没有用户交互的情况下重新打开会话。

似乎我无法要求 SDK 真正验证（重新登录）用户到 facebook。我对吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:41:50.100

没有直接的方法可以满足您的要求，但有一种解决方法，您甚至不需要在现有会话上调用 closeAndClearTokenInformation。

您可以使用 FBSessionLoginBehaviorForcingWebView 的登录行为创建一个新的 FBSession，打开该会话（这将强制用户通过 webview 登录）。然后，您可以使用新会话发出 /me 请求，并将其与现有会话中的用户 ID 进行比较。

# c# - JSON.Net 在使用 DeserializeObject 之前过滤转义字符串，最佳实践

> ID：15068576
> 
> 赞同：2
> 
> 时间：2013-02-25T13:53:45.803
> 
> 标签：c#, json.net, deserialization

我正在使用 JSON.Net 和 JsonConvert.DeserializeObject 函数将 json 加载到对象中。通常 json 使用转义字符串会导致 DeserializeObject 失败。一些逃脱是：

> \' \u0027 允许在字符文字中输入'，例如'\''
> 
> \" \u0022 允许在字符串文字中输入 "，例如“这是双引号 (\") 字符”
> 
> \ \u005c 允许在字符或字符串文字中输入 \ 字符，例如 '\' 或“这是反斜杠 (\) 字符”
> 
> \0 \u0000 允许输入代码为 0 的字符
> 
> \a \u0007 警报（通常是硬件哔声）
> 
> \b \u0008 退格
> 
> \f \u000c 换页（下一页）
> 
> \n \u000a 换行（下一行）
> 
> \r \u000d 回车（移动到行首）
> 
> \t \u0009（水平-）制表符
> 
> \v \u000b 垂直制表符

[在http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma](http://www.codeproject.com/Articles/371232/Escaping-in-Csharp-characters-strings-string-forma)有一篇文章和代码 可能不需要一些转义码，例如 /r /n，因为 C# 会了解他们。

是否有在 json 文件中转义这些转义码的最佳实践？我想在将数据传递给 DeserializeObject 之前创建一个完整的类来处理数据。

任何人的任何想法？对于了解 json.net 和 regex 的人来说很容易理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:39:49.133

如果我理解正确，您希望将 json 转义序列转换回 C# 转义序列。

如果是这样，您应该能够简单地搜索 json 转义并将其替换为实际的 C# 转义：

```
var test = value.Replace(@"\u0085","\u0085"); 
```

我想从理论上讲，您可以反转 Json.Net 的实用函数`ToEscapedJavaScriptString()`以从 json 转义到 C# 转义。

[以下代码是我使用在 codeplex 上](http://json.codeplex.com/)找到的代码编写的 Json.Net 字符串序列化的略微修改版本。我将它合并到一个助手类中。这就是他们将字符串从 C# 转换为 json 的方式，所以也许它会有所帮助。

```
// Copyright (c) 2007 James Newton-King    
namespace Demo
    {
        using System.Globalization;
        using System.IO;
        using System.Text;

        public class JsonHelper
        {
            public static string ToJson(string value, char delimiter = '"', bool appendDelimiters = true)
            {
                if (string.IsNullOrEmpty(value))
                    return value;

                StringBuilder sb = new StringBuilder(value.Length);
                using (StringWriter sw = new StringWriter(sb, CultureInfo.InvariantCulture))
                {
                    WriteEscapedString(sw, value, delimiter, appendDelimiters);
                    return sw.ToString();
                }
            }

            private static void WriteEscapedString(TextWriter writer, string s, char delimiter, bool appendDelimiters)
            {
                // leading delimiter
                if (appendDelimiters)
                    writer.Write(delimiter);

                if (s != null)
                {
                    char[] chars = null;
                    int lastWritePosition = 0;

                    for (int i = 0; i < s.Length; i++)
                    {
                        var c = s[i];

                        // don't escape standard text/numbers except '\' and the text delimiter
                        if (c >= ' ' && c < 128 && c != '\\' && c != delimiter)
                            continue;

                        string escapedValue;

                        switch (c)
                        {
                            case '\t': escapedValue = @"\t"; break;
                            case '\n': escapedValue = @"\n"; break;
                            case '\r': escapedValue = @"\r"; break;
                            case '\f': escapedValue = @"\f"; break;
                            case '\b': escapedValue = @"\b"; break;
                            case '\\': escapedValue = @"\\"; break;
                            case '\u0085': escapedValue = @"\u0085"; break; // Next Line
                            case '\u2028': escapedValue = @"\u2028"; break; // Line Separator
                            case '\u2029': escapedValue = @"\u2029"; break; // Paragraph Separator
                            case '\'': escapedValue = @"\'"; break;
                            case '"': escapedValue = "\\\""; break;
                            default: escapedValue = (c <= '\u001f') ? ToUnicode(c) : null; break;
                        }

                        if (escapedValue == null)
                            continue;

                        if (i > lastWritePosition)
                        {
                            if (chars == null)
                                chars = s.ToCharArray();

                            // write unchanged chars before writing escaped text
                            writer.Write(chars, lastWritePosition, i - lastWritePosition);
                        }

                        lastWritePosition = i + 1;
                        writer.Write(escapedValue);
                    }

                    if (lastWritePosition == 0)
                        // no escaped text, write entire string
                        writer.Write(s);
                    else
                    {
                        if (chars == null)
                            chars = s.ToCharArray();

                        // write remaining text
                        writer.Write(chars, lastWritePosition, s.Length - lastWritePosition);
                    }
                }

                // trailing delimiter
                if (appendDelimiters)
                    writer.Write(delimiter);
            }

            private static string ToUnicode(char c)
            {
                char h1 = ToHex((c >> 12) & '\x000f');
                char h2 = ToHex((c >> 8) & '\x000f');
                char h3 = ToHex((c >> 4) & '\x000f');
                char h4 = ToHex(c & '\x000f');

                return new string(new[] { '\\', 'u', h1, h2, h3, h4 });
            }

            private static char ToHex(int n)
            {
                if (n <= 9)
                    return (char)(n + 48);
                return 
                    (char)((n - 10) + 97);
            }

        }
    } 
```

# asp.net - 将参数从 MVC 4 操作发送到 SSRS 报告的 Web 表单

> ID：15068583
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:09.587
> 
> 标签：asp.net, asp.net-mvc-4, reporting-services

我在我的 mvc4 Web 应用程序中使用 SSRS 报告，
使用 Web 表单（其中的报表查看器服务器端控件）和
视图（包含 iFrame）。我正在使用会话发送参数以报告我的操作，这是我的代码。
控制器动作代码

```
 public ActionResult GetParamReport()
    {
        HttpContext.Session.Add("param","a");
        Redirect("~/Contents/Reports/ReportParameter.aspx");
        return View("ParamReport");
    } 
```

在我的页面加载中，我使用 aspx 访问它

```
 protected void Page_Load(object sender, EventArgs e)
    {

        string Parameter = HttpContext.Current.Session["param"].ToString(); 
    } 
```

除了会话之外，还有其他替代方法可以发送参数吗，因为我不想使用会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:15:04.970

绝对首选将其作为查询字符串传递：

```
public ActionResult GetParamReport()
{
    return Redirect("~/Contents/Reports/ReportParameter.aspx?param=" + HttpUtility.UrlEncode("some value"));
} 
```

接着：

```
protected void Page_Load(object sender, EventArgs e)
{
    string parameter = Request["param"]; 
} 
```

# java - Java：从连接的套接字设置非阻塞读取

> ID：15068586
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:33.533
> 
> 标签：java

大家好！！！！！！！！！！我的代理/服务器以这种形式接收来自客户端的请求：

```
GET mhttp://proxy_ip:proxy_port/file.mhtml\n
\n 
```

这是我的代码：

```
import java.io.*;
import java.net.Socket;
import java.net.ServerSocket;
import java.net.InetAddress;
import java.net.UnknownHostException;

public class ProxyMain {

public static void main(String argv[]) {

    int proxyPort = 55554;
    String proxyAddr = "127.0.0.1";
    ServerSocket proxySocket = null;

    try {
        proxySocket = new ServerSocket(proxyPort, 50,  InetAddress.getByName("127.0.0.1"));
    }

    catch (Exception e) {
        System.err.println("Impossible to create socket server!");
        System.out.flush();
        System.exit(1);
    }

    System.out.printf("Server active on port: %d and on address %s\n", proxyPort, proxySocket.getInetAddress());

    while (true) {
        Socket client = null;
        BufferedReader in = null;
        PrintWriter out = null;
        String request = new String();
        String tmp = new String();

        try {
            client = proxySocket.accept();
            System.out.println("Connected to: ");
            System.out.println(client.getInetAddress().toString());
            System.out.printf("On port %d\n", client.getPort());
            in = new BufferedReader(new InputStreamReader(client.getInputStream()));
            out = new PrintWriter(client.getOutputStream(), true);

        }

        /*catch (IOException e) {
            System.err.println("Couldn't get I/O for connection accepted");
            System.exit(1);
        }*/

        catch (Exception e) {
            System.out.println("Error occurred!");
            System.exit(1);
        }

        System.out.println("Received request:");

        try{
            #####################################
                            while ((tmp = in.readLine()) != null)
            System.out.println(tmp);
            request = request + tmp;
                            #####################################
        }
        catch (IOException ioe) {
            System.err.println("Impossible to read mhttp request!");
            System.exit(1);
        }

        System.out.println(request);
    }

}

} 
```

我在用######### 分隔的块中遇到问题。我不知道如何停止 in.readLine() 中的方法。首先它读取： GET mhttp://proxy_ip:proxy_port/file.mhtml\n 然后它读取 \n 但随后它阻塞，仍在等待读取但请求已完成。我认为客户端保持连接，即使在发送请求之后，但我无法更改它，因为它是我老师的软件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:59:32.097

不要读取整行，读取单个字节，直到遇到 a`'\n'`或按照 Greg 的建议执行 2 个 readlines。无论如何，既然您知道传入消息的确切格式，请调整您的代码以相应地阅读。

# cakephp - 文件输入不提供所有文件信息

> ID：15068587
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:34.050
> 
> 标签：cakephp, cakephp-2.0

在我的表格中，我有：

```
<input type="file" name="data[Speciality][background_image]" id="background_image" class="hide"> 
```

这是控制器中“捕获”的请求数据：

```
public 'data' => 
    array (size=3)
      'modified' => string '0' (length=1)
      'Speciality' => 
        array (size=2)
          'name' => string 'addfsdfsdf' (length=10)
          'background_image' => string 'test.jpg' (length=8) 
```

如您所见，仅提供了文件名，它应该是这样的：

```
[name] => test.jpg
[type] => image/jpeg
[tmp_name] => C:\server\tmp\php5A.tmp
[error] => 0
[size] => 560 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:50:49.617

您可能忘记阅读有关如何处理文件上传的文档。

确保你的 create() 方法中有 type=>file ：

```
echo $this->Form->create('Speciality', array('type' => 'file')); 
```

见[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)

# javascript - jQuery 和 JS 的 IE 问题

> ID：15068589
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:35.653
> 
> 标签：javascript, jquery, jquery-events, shopping-cart

我正在尝试编写一个从篮子中转移物品并将其推入购物车的函数。我目前面临的问题是，尽管此代码在 Firefox 和 Chrome 中运行良好，但它无法识别产品。

```
var modals_pool = {};

$('.deal_order_btn').live('click', function (e) {
    e.preventDefault();

    deal = {};
    deal.id = $(this).attr('deal_id');
    deal.title = $(this).attr('deal_title');
    deal.items = [];
    additional_total = 0;
    $(this).parents('.deal_item_holder').find('table.deals_item_').each(function (index, ele) {
        item = {};
        item.id = $(ele).attr('deal_item_id');
        item.name = $(ele).find('.deal_item_name a').text();
        if ($(ele).find('select.product').length) {
            item.product = $(ele).find('select.product').val();
        }
        if ($(ele).find('select.product').length === 0) {
            item.product = $(ele).find('.deal_item_name a').attr('rel');
        }
        if ($(ele).find('select.size').length) {
            item.size = $(ele).find('select.size option:selected').text();
        }
        if ($(ele).find('.static_size').length) {
            item.size = $(ele).find('.static_size').text();
        }

        deal_object = modals_pool[$(ele).attr('container_id').replace(/ /g, '_') + "_" + $(ele).find('.product').val()];

        //console.log(deal_object);

        if ($(ele).find('select.product').length && deal_object) {

            item.product_name = $(ele).find('select.product :selected').text();

            item.product_topping = deal_object.selected_topping_normal;
            item.base = deal_object.default_base;

            item.product_double_topping = deal_object.selected_topping_double;

            item.product_total = deal_object.total;
            additional_total += deal_object.total;

        }

        deal.items.push(item);

    });

    deal.total = $(this).parents('li:first').find('span.customize_total_deal').text();
    deal.orginal = $(this).parents('li:first').find('span.customize_total_deal').attr('orginal_total');
    deal.addtional_topping_total = additional_total;

    $.post(window.location.href, {
        'action': '_saveUserDeal',
            'deal_details': JSON.stringify(deal)
    }, function (data) {
        if (data.code) {
            var date = new Date();
            var milseconds = date.getTime();
            $('.basket_box_holder').load(root + store_name + '/get_cart?' + milseconds);
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:57:11.773

您的脚本在第 683 行中断并出现错误：

> 对象不支持此操作

这是因为 item 在 Internet Explorer 8 及以下版本中是保留关键字，请尝试将其重命名为其他名称或使用 var 关键字在本地声明 item。这可能会解决它：

```
var item = {}; 
```

干杯。

# c - 代码中的分段错误

> ID：15068591
> 
> 赞同：1
> 
> 时间：2013-02-25T13:54:40.970
> 
> 标签：c

我不断收到分段错误，但我不知道为什么，我知道我的分段错误在哪里，但不知道如何修复它。

```
struct node {
        int line;
        int count;
        char* word;
        struct node* next;
};

struct node* nodeGetPreviousNode (struct node* head, struct node* node)
{
        //return the previous node given the node
        while(((head) != NULL) ||((head)->next != node))
        {
                (head) = (head)->next;
        }
        return (head);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T13:56:06.987

```
while(((head) != NULL) ||((head)->next != node)) 
```

将评估`(head)->next != node`，取消引用`head`何时`head`是`NULL`

你的意思是`&&`改用吗？

# sql - 获取具有匹配 ID 的重复记录

> ID：15068592
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:41.847
> 
> 标签：sql, oracle

我有一个名为`unique_table`数据的表，如下所示：

```
ID        NAME 
1         venkat 
2         subash 
3         venkat 
4         subash 
5         venkat 
6         subash 
```

我想查询上表并得到如下输出：

```
ID        NAME      MATCHED_ID 
3         venkat    1 
4         subash    2             
5         venkat    1             
6         subash    2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:21:35.253

作为 xQbert 答案的替代方案，您也可以使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)在不连接的情况下执行此操作：

```
select id, name, matched_id
from (
    select id,
        name,
        first_value(id) over (partition by name order by id) as matched_id
    from unique_table
)
where id != matched_id
order by id;

       ID NAME   MATCHED_ID
---------- ------ ----------
         3 venkat          1 
         4 subash          2 
         5 venkat          1 
         6 subash          2 
```

在内部查询中，[`first_value()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions066.htm)为您提供每个的第一个 ID（即最小数字）`name`；然后，外部查询会排除行与自身匹配的情况 - 因此仅列出重复项，并且不显示每个项的第一次出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:57:52.227

```
SELECT YourColumn, COUNT(*) MatchedCount
FROM YourTable
GROUP BY YourColumn
HAVING COUNT(*) > 1
ORDER BY COUNT(*) DESC 
```

[http://blog.sqlauthority.com/2007/07/11/sql-server-count-duplicate-records-rows/](http://blog.sqlauthority.com/2007/07/11/sql-server-count-duplicate-records-rows/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:10:07.140

```
Select T2.ID, T2.name, min(T1.ID) as matched_ID
FROM D t1
INNER JOIN D t2 on t1.ID < T2.ID 
and T1.name = T2.name 
Group by T2.name, T2.ID
order by ID

create table D as (
Select 1 as ID ,'venkat' as name from dual UNION
SELECT 2,'subash' from dual UNION 
SELECT 3,'venkat' from dual UNION
SELECT 4,'subash' from dual UNION
SELECT 5 ,'venkat' from dual UNION
SELECT 6,'subash' from dual) 
```

结果是

```
ID      Name    Matched ID
3       venkat  1
4       subash  2
5       venkat  1
6       subash  2 
```

# ruby-on-rails - 创建新的 Rails 应用程序时出现 NoMethodError

> ID：15068595
> 
> 赞同：1
> 
> 时间：2013-02-25T13:54:45.687
> 
> 标签：ruby-on-rails, nomethoderror

当我创建一个新的 Rails 文件夹（带有`rails new my_app`）时出现此错误：

[http://cl.ly/image/3S071x1l0w3J](http://cl.ly/image/3S071x1l0w3J)

```
-> NoMethodError: private method 'open' called for Gem::Package:Class
An error occured while installing rake (10.0.3), and Bundler cannot continue.
Make sure that 'gem install rake -v '10.0.3' succeeds before bundling. 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:05:25.430

似乎是 ruby​​gems 版本的问题：[见这里](https://stackoverflow.com/questions/9203945/ror-nomethoderror-private-method-open-called-for-gempackageclass)

尝试使用以下命令进行更新：

```
gem update --system 
```

# java - HQL 中的内连接查询

> ID：15068597
> 
> 赞同：21
> 
> 时间：2013-02-25T13:54:49.163
> 
> 标签：java, sql, hibernate, hql

我无法为内部联接执行 HQL，查询在 sql 中执行正确，但在 HQL 中不正确。我不知道我在哪里失踪。你的帮助是可观的。

```
 ***Error***: org.hibernate.hql.ast.QuerySyntaxError: unexpected token: ON near line 1, column 148 [SELECT op.username, op.email, orders.p_id, orders.o_id, product.listed_price FROM com.model.Orders  orders INNER JOIN orders.OrderProcessing as op ON op.u_id = orders.u_id INNER JOIN orders.Product as product ON product.p_id = orders.p_id WHERE product.p_id = '208' ORDER BY op.username]

productList = (List<Orders>) session.createQuery(
 "SELECT op.username, op.email, orders.p_id, orders.o_id, product.listed_price " +                                                                               
 "FROM Orders orders " +                                                                   
 "INNER JOIN orders.OrderProcessing as op " +                                                                                       
 "ON op.u_id = orders.u_id " +                                                         
 "INNER JOIN orders.Product as product " +                                                              
 "ON product.p_id = orders.p_id " +                                                        
 "WHERE product.p_id = '"+p_id +"' " +                                                         
 "ORDER BY op.username"
).list(); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T13:58:14.050

HQL 中的联接具有稍微不同的语法。

如果您已经使用 Hibernate 映射了这些关联，则连接条件（要在哪些`id`字段上进行连接）通常由 Hibernate 本身处理（它已经在映射中定义了该信息），因此您只需要指定哪个属性关联被映射，并对其进行连接：

```
SELECT op.username, op.email, orders.p_id, orders.o_id, product.listed_price 
FROM Orders order
INNER JOIN order.orderProcessing as op
INNER JOIN order.product as product 
ORDER BY op.username 
```

如果您没有映射这些关联，您可能应该使用类似交叉连接的语法，并在`WHERE`子句中指定连接条件。请注意，这可能会对效率产生负面影响，具体取决于您的模式结构和 DBMS。

```
SELECT op.username, op.email, orders.p_id, orders.o_id, product.listed_price
FROM Orders order, OrderProcessing op, Product product
WHERE op.u_id = order.u_id AND product.p_id = orders.p_id
ORDER BY op.username 
```

[您可以在14.3](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)中找到有关 HQL 连接的更多信息。[Hibernate 参考的关联和连接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)部分。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-25T14:00:42.063

HQL 中的联接不像 SQL 中那样工作。您可以加入一个协会：

```
select order_1.code, item.code, item.quantity 
 from Order order_1 inner join order_1.item item; 
```

或使用多表选择：

```
select order_1.code, item.code, item.quantity 
 from Order order_1, Item item where item.order=order_1; 
```

任何一种语法都有优点和缺点，所以你应该根据情况选择。

值得注意的是，还有一个*隐式*表示法，这可能根本不需要使用连接：

```
select item.order.code, item.code, item.quantity from Item item; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:14:47.460

我怀疑这是因为`order`是保留字（如`order by`）。尝试做`FROM Orders o`。

我想你也会有其他问题。

查看您选择的内容（一堆随机列值），以及您期望 Hibernate 返回的内容（`List<Orders>`）。

我希望您不会回来`List<Orders>`，因为您的查询结构将强制休眠`SQL`模式而不是`HQL`. 在这种模式下，您将返回一个`List<Object[]>`其中每个`Object[]`是您选择的那四列的集合。

此链接解释了您可以期望通过不同的查询得到什么：

[http://www.laliluna.de/jpa-hibernate-guide/ch11s02.html](http://www.laliluna.de/jpa-hibernate-guide/ch11s02.html)

# ruby-on-rails - Rails 中奇怪的 ActiveRecord 时区行为

> ID：15068598
> 
> 赞同：0
> 
> 时间：2013-02-25T13:54:50.623
> 
> 标签：ruby-on-rails, activerecord, timezone

我在巴西，距世界标准时间 -3 小时。我没有在 Rails 中对时区进行任何配置，我的控制台表现得很奇怪，下面是示例：

```
 1.9.3p194 :099 >   FreeTime.first.starts_at
     => 2000-01-01 11:15:26 UTC 
    1.9.3p194 :100 > FreeTime.first.starts_at.localtime
     => 2000-01-01 09:15:26 -0200 
    1.9.3p194 :101 > FreeTime.first.starts_at.localtime.zone
     => "BRST" 
    1.9.3p194 :102 > Time.now
     => 2013-02-25 10:24:51 -0300 
    1.9.3p194 :103 > Time.now.zone
     => "BRT" 
    1.9.3p194 :104 > Time.zone
     => (GMT+00:00) UTC 
```

如您所见，问题在于 Rails Time 类正确地计算出我的本地区域（从我的系统时钟），但 ActiveRecord 不知何故弄错了。我想知道为什么 ActiveRecord 错误地指出我的时区是 BRST（右边是 BRT），即使我没有进行任何配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:00:13.413

它根本没有弄错。它意识到您在巴西时区，并且在 2000-01-01 11:15:26 UTC，巴西时区在 BRST，即 UTC-2。

在[2000 年](http://www.timeanddate.com/worldclock/timezone.html?n=45&syear=2000)，BRST -> BRT 过渡是在 2 月 26 日。

您需要了解您的时区并不是真正的“BRT”或“BRST”——它是两者的组合，包括它们之间的转换。例如，我在英国。我们目前处于格林威治标准时间，我们将在夏季过渡到 BST - 因此夏季时间值的正确输出将是 BST，UTC+1。

# jsf - ActionListener 不会在复合组件中触发

> ID：15068602
> 
> 赞同：1
> 
> 时间：2013-02-25T13:55:07.310
> 
> 标签：jsf, jsf-2, composite-component

我有一个关于将 ActionListener 委托给复合组件 (jsf) 的具体问题。我创建了一个复合组件来显示（浏览）和编辑任何个人用户数据（属性“用户”）。

```
 <body>
        <co:interface>
            <co:attribute name="editAction"     required="false"  targets="edit"   method-signature="java.lang.String f()"/>
            <co:attribute name="saveAction"     required="false"  targets="save"   method-signature="java.lang.String f()"/>
            <co:attribute name="cancelAction"   required="false"  targets="cancel" method-signature="java.lang.String f()"/>
            <co:attribute name="isBrowseModus"  required="true"/>
            <co:attribute name="user"           required="true"/>
            <co:attribute name="isDeveloper"    required="true"/>
            <co:actionSource name="edit"/>
            <co:actionSource name="save"/>
            <co:actionSource name="cancel"/>
        </co:interface>
............
        <p:inplace id="inpLand" editor="true" 
            toggleable="#{not cc.attrs.isBrowseModus}" 
            style="#{cc.attrs.isBrowseModus ? 'color: black' : 'color: blue'}">  
                <p:inputText value="#{cc.attrs.user.land}" label="text"/>  
        </p:inplace>  
...........
       <c:if test="#{cc.attrs.isBrowseModus}">
         <h:commandButton id="edit" value="Edit"/>
       </c:if>
........ 
```

实际上，这个复合组件由调用**myData.xhtml**的视图调用：

```
 <ui:define name="center">
            <h3>MyData Developer </h3>
            <h4>Welcomne</h4>
            <h:form id="dataForm">  
                <mc:UserData user="#{dataBean.user}" isDeveloper="#{dataBean.developer}" isBrowseModus="#{dataBean.browseModus}" cancelAction="#{dataBean.cancel}" 
saveAction="#{dataBean.save}" editAction="#{dataBean.edit}">
                    <f:actionListener for="edit" binding="#{dataBean.editActionListener}"/>
                </mc:UserData>   
            </h:form>  
        </ui:define>
    </ui:composition> 
```

在复合组件中有一个 (id = edit) 并且交付的 actionListener（参见 myData 中的 f:actionListener）应该绑定到这个 commandButton (id = edit)。这是我在阅读了不同的论坛讨论和几个文档后的理解。

不幸的是，单击 Edit-Button 后 editActionListener 方法没有触发，我不知道为什么。当然，这个**editActionListener**方法存在于 managedBean“dataBean”（myData.java）中：

```
public void editActionListener(ActionEvent ae) {
    browseModus = false;
    FacesContext.getCurrentInstance().renderResponse();
} 
```

我的目标是什么：在该复合组件中，用户可以通过单击“编辑”按钮来更改任何用户数据。我更喜欢使用 PRIMEFACES 的就地标签。单击编辑按钮后，所有可更改的字段应显示为蓝色。

我的问题：

1.  谁能解释我为什么没有触发有界的 editActionListener 方法？
2.  通常，这是设置“isBrowseModus”属性（单击编辑按钮后为 false）的正确方法吗？或者有没有更方便的方法来实现这个结果？
3.  我正在使用 primefaces，首先我尝试使用 p:commandButton ，但不幸的是它不起作用。使用 p:commandButton 时，单击编辑按钮后发生异常。JSF 在我的 managedBean (PropertyNotFoundException) 中找不到 editActionListener 方法？！？！？

任何帮助将不胜感激。提前谢谢了。问候， 博多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:18:24.870

根据[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/actionListener.html%5C)，`<f:actionListener binding>`必须引用实现`ActionListener`接口的具体实例，而不是方法表达式。

总而言之，您的问题可以`ActionListener`通过通过 getter 提供接口的具体实现来解决，该 getter 反过来调用所需的动作侦听器方法。

```
private ActionListener editActionListener = new ActionListener() {
    @Override
    public void processAction(ActionEvent event) throws AbortProcessingException {
        DataBean.this.editActionListener(event);
    }
};

public ActionListener getEditActionListener() {
    return editActionListener;
}

public void editActionListener(ActionEvent event) {
    browseModus = false;
    FacesContext.getCurrentInstance().renderResponse();
} 
```

然而，这很笨拙，这表明您正在寻找可能错误的方向的解决方案。一个更简单的方法是`<cc:attribute targets="edit">`改用。

```
<cc:interface>
    ...
    <cc:attribute name="actionListener" targets="edit" />
</cc:interface> 
```

用作

```
<mc:UserData ... actionListener="#{dataBean.editActionListener}" /> 
```

# django - 即使文件确实存在，Django 媒体文件也会得到 404

> ID：15068603
> 
> 赞同：0
> 
> 时间：2013-02-25T13:55:11.347
> 
> 标签：django, http-status-code-404, django-urls, django-models

我意识到这是一个在这里提出的很多问题（我读过很多），快速解释开发场景并非易事，所以我将把它压缩成一个可以解释一切的具体简单问题，我没有遇到：

无论模板和设置参数如何生成最终 url，它们最终都会成功生成粘贴在渲染页面之一中的图像 url（类似于：localhost:8000/static/images/image-name.jpg），其中我可以看到，一切都很完美。

我遇到的问题是在不同的代码部分（和应用程序）中，尽管生成的 url 似乎与我现有的目录和文件匹配，但我不断收到 404，我不知道它为什么会失败。所以我所做的只是将我似乎无法加载的图像复制到同一个合法文件夹中（只是将文件粘贴在那里），并修改了 url (localhost:8000/static/images/new-image-name. jpg） - 并得到一个 404（即使在重新加载 django 之后）。我认为这与 db-objects (ImageField 等) 没有任何关系，因为我只是在挑战 url-parse-and-conversion 机制-并且无法弄清楚为什么它适用于某些但不是全部某些路径上的图像（相同的 jpg 格式，图像在图像编辑器中成功加载，实际上是在 mspaint 中绘制的）。

（网址包括 urlpatterns += staticfiles_urlpatterns() ，据我所知，这是唯一与静态相关的 url 行）。

任何想法都会受到赞赏，我一定会遗漏一些关于 url 解码的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T15:39:52.873

实际上，这只是因为 Web 服务器将所有请求的处理转发到应用程序服务（wsgi，uwsgi），后者将请求转发给 Django。

可能是我错了，但我认为应用程序服务不应该担心静态文件。并且因为我在应用程序位置之前在 Web 服务器（在我的情况下为 nginx）配置中为静态文件夹创建了单独的位置：

```
location /static/ {
    access_log        off;
    expires           max;
}

location / {
    include         uwsgi_params;
    uwsgi_pass      unix:///run/uwsgi/app/mysite/socket;
} 
```

# android - 如何在对话框上设置 TextView 的主题？

> ID：15068607
> 
> 赞同：0
> 
> 时间：2013-02-25T13:55:25.140
> 
> 标签：android, dialog, textview, themes

我正在使用以下代码将 TextView 添加到对话框：

```
TextView alertView=new TextView(this);
alertView.setTextAppearance(this, android.R.style.TextAppearance_Medium);
alertView.setPadding(7, 7, 7, 7);
alertView.setText(Html.fromHtml(alertText));

Dialog dialog=new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(alertView);
dialog.getWindow().setLayout(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
dialog.show(); 
```

在 Android 4.0 中看起来还可以。但在 Android 2.1 中，Dialog 的背景是黑色的，TextView 的文本也是黑色的。如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:58:18.327

要为您的 设置整体样式，请`Dialog`在资源中定义样式。

例如：

```
<style name="MyDialog">
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowFrame">@null</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>

    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>

    <item name="android:windowBackground">@android:drawable/alert_light_frame</item>
</style> 
```

然后将其设置为您的对话框，如下所示：

```
Dialog dialog=new Dialog(this, R.style.MyDialog); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-10T03:25:59.720

问题是您的 TextView 正在使用您活动中的主题而不是对话框的主题。

您应该将对话框的上下文传递给 TextView 的构造函数：

```
对话框对话框=新对话框（此）；
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.getWindow().setLayout(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

TextView alertView=new TextView( dialog.getContext() );
alertView.setTextAppearance(this, android.R.style.TextAppearance_Medium);
alertView.setPadding(7, 7, 7, 7);
alertView.setText(Html.fromHtml(alertText));

dialog.setContentView(alertView);
对话框.show();
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:58:29.647

我猜你将不得不创建一个自定义对话框。[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)。这是自定义对话框的示例。[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:59:50.557

如果您可以将 textview 的颜色更改为白色，那么每个版本都可以，如果您需要黑色，则将 textview 背景颜色更改为白色

```
1.alertView.setTextColor(Color.WHITE);
2.alertView.setBackgroundColor(Color.white); 
```

# php - 千位分隔符php

> ID：15068608
> 
> 赞同：0
> 
> 时间：2013-02-25T13:55:26.167
> 
> 标签：php, string, number-formatting

我已经`$number = 100000.5;`从数据库中提取了这个。
我需要的是格式化为`100.000,5`

`str_replace`+`number_format`我想。

我的替换工作完美，

```
echo str_replace('.', ',', $row['anskaf_sum']); 
```

（返回：100000,5）但是当我添加 number_format 时，我以某种方式失败了

```
number_format($row['anskaf_sum'] , 0, ',', '.'); 
```

返回

```
101 
```

我尝试了其他一些事情，但我似乎无法更接近我需要的答案

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:17:27.430

你确定你的 $row['anskaf_sum'] 没有你不期望的价值吗？因为：

```
<?php
        $number = 100000.5;
        echo number_format($number, 1, ",", ".");
?> 
```

...这正是你想要的：100.000,5

# javascript - 如何停止通过 javascript 播放嵌入在网站中的 screencast.com 视频

> ID：15068609
> 
> 赞同：0
> 
> 时间：2013-02-25T13:55:29.867
> 
> 标签：javascript, jquery

我在我的网站上添加了一个截屏视频。现在我想在单击按钮时停止视频。我在按钮上尝试了一些 javascript 代码 onclick 事件。

var myVideoPlayer = document.getElementById("playerId"); //获取视频播放器
myVideoPlayer.sendEvent("STOP");

但它没有奏效。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:12:26.890

首先，您应该查看截屏文档，看看他们是否提供了用于控制视频的 api。

如果他们不这样做，您可以从 DOM 中删除该元素。

```
var myVideoPlayer = document.getElementById("playerId");
myVideoPlayer.parentNode.removeChild(myVideoPlayer ); 
```

如果您需要将其带回，只需使用播放器创建一个新元素即可。如果没有API，您可能无法将其设置为视频中的某一秒

# c# - 如何从我的 C# 代码隐藏发送电子邮件 - 获取 System.Net.Mail.SmtpFailedRecipientException

> ID：15068611
> 
> 赞同：2
> 
> 时间：2013-02-25T13:55:36.333
> 
> 标签：c#, web-config, asp.net-4.0, smtpclient

我有一个网络表单，有人可以在其中设置帐户 - 我想向他们发送电子邮件确认。

我正在使用的代码：

```
 // Create e-mail message
        MailMessage mm = new MailMessage();
        mm.From = new MailAddress("OurOrganisationEmail@ourdomain.com", "Our Organisation");
        mm.To.Add(new MailAddress("webuser@domain.com", "Web User"));

        mm.Subject = "Confirmation";
        mm.Body = "You are now registered test";
        mm.IsBodyHtml = true;

        // Send e-mail
        sc = new SmtpClient();

        NetworkCredential basicAuthenticationInfo = new NetworkCredential(“OurOrganisationEmail@ourdomain.com”, “ourorganisationemailPassword”);
        sc.Credentials = basicAuthenticationInfo;
        sc.UseDefaultCredentials = false;

        sc.Send(mm); 
```

网络配置：

```
<system.net>
  <mailSettings>
    <smtp>
      <network host="mail.OurOrganisationEmail@ourdomain.com" port="9999" userName="OurOrganisationEmail@ourdomain.com" password="OurOrganisationEmailPassword"/>
    </smtp>
  </mailSettings>
</system.net> 
```

但是得到：

```
System.Net.Mail.SmtpFailedRecipientException was caught
HResult=-2146233088
Message=Mailbox unavailable. The server response was: Authentication is required for relay
Source=System
FailedRecipient=<webuser@domain.com> 
```

看起来它想要我要发送到的网址的用户登录详细信息。我该如何修改它并像所有其他商业公司一样发送这样的确认电子邮件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T15:42:08.337

好的 - 让它工作。以下是工作编码；看起来我配置 NetworkCredential 对象是问题所在。感谢大家帮助我找到解决方案。

```
 MailAddress fromAddress =  new MailAddress("OurOrganisationEmail@ourdomain.com","Our Organisation");//"name@yourdomain.com";
        MailAddress toAddress = new MailAddress("webuser@domain.com", "Web User"); //"name@anydomain.com"; 

        //Create the MailMessage instance 
        MailMessage myMailMessage = new MailMessage(fromAddress, toAddress);

        //Assign the MailMessage's properties 
        myMailMessage.Subject = "Confirmation";
        myMailMessage.Body = "You are now registered test";
        myMailMessage.IsBodyHtml = true;

        //Create the SmtpClient object
        SmtpClient smtp = new SmtpClient();

        //Send the MailMessage (will use the Web.config settings) 
        smtp.Send(myMailMessage); 
```

网络配置

```
<system.net>
  <mailSettings>
    <smtp>
  <network host="mail.ourdomain.com" port="9999" userName="OurOrganisationEmail@ourdomain.com" password="OurOrganisationEmailPassword"/>
    </smtp>
  </mailSettings>
</system.net> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:21:41.620

您的客户端代码看起来不错，问题可能出在`web.config`：

```
host="mail.OurOrganisationEmail@ourdomain.com" 
```

它是一个`email address`，不是一个有效的`hostname` 它应该是这样的：

```
host="mail.ourdomain.com" 
```

你有没有测试过是否`smtp server`有效？只需使用`telnet`. [http://technet.microsoft.com/en-us/library/aa995718(v=exchg.65).aspx](http://technet.microsoft.com/en-us/library/aa995718(v=exchg.65).aspx)

另外，查看此帖子以获取更多信息 [通过 Google Apps 帐户通过 C# 发送电子邮件](https://stackoverflow.com/questions/757987/send-email-via-c-sharp-through-google-apps-account)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:04:05.897

我猜这是因为您的网站没有在域帐户下运行。许多邮件服务器不允许匿名用户发送电子邮件。

您可以尝试在域中创建一个服务帐户并将应用程序池设置为在该服务帐户下运行。

# ios - xcode中的代码签名错误，找不到身份

> ID：15068617
> 
> 赞同：25
> 
> 时间：2013-02-25T13:55:56.347
> 
> 标签：ios, iphone, xcode

我已经寻找解决这个问题几个小时了，所以希望有人可以帮助我。

当我尝试归档我的项目（以便我可以将其放入应用市场）时，我收到一个代码签名错误：

> 代码设计失败，退出代码为 1

还有一些额外的信息说

> iPhone 分布：公司名称：未找到身份

我创建了一个分发配置文件（多次）并遵循了几个建议（如卸载/安装 Xcode）。此外，我的分发配置文件到期日期是 2014 年 2 月。

我可以毫无问题地构建我的项目，并使用我的 iPhone 开发人员配置文件在 iPhone 上运行它。

有谁知道我在这里做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T13:58:37.067

您的分发配置文件可能无效或未正确验证，请转到`Organizer->Devices->Provisioning Profiles`并尝试刷新您的配置文件（删除和刷新），它们将在刷新后显示。刷新后，如果配置文件有效且签名正确，请确保绿色图标作为状态显示在配置文件中。如果它不能解决您的问题，那么您需要再次创建分发配置文件。如果您开始分发应用程序，您会发现本[教程很有帮助。](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)我希望它对你的事业有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-21T16:57:46.533

我不确定为什么我的解决方案有效，但经过数小时的尝试后……我更改了项目和目标窗口中的代码签名设置。“项目”下的代码设置显示了我的配置文件（下图），“目标”下的代码设置现在设置为“自动”。也许在我有冲突的设置之前？

![在此处输入图像描述](../Images/08241c368db6319ff5eca65ebbc29d66.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T13:43:00.237

我遇到了类似的错误，并发现我**在钥匙串中的证书不是我附加到**苹果开发人员门户中的配置文件的原因。因为有两个同名的证书，我下载了错误的一个。下载正确的证书并双击放入钥匙串后，问题就解决了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-29T02:19:13.700

我有同样的问题，原因是在我运行其他项目和`fix the issue`其他项目之后。

我的解决方案是：

`Xcode`-> `Proferences`-> 选择`Apple IDs`-> 选择`Team`-> `View Details`-> 签名身份`iOS Development`并`iOS Distribution`重置。

然后运行项目到`iphone`它工作正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T11:08:40.767

我一直在与苹果联系，在来回发送几封电子邮件后，他们发现了我的问题。出于某种原因（我不知道这是如何到达那里的）在代码签名下的构建设置中 - >其他代码签名标志我在那里写下了“--keychain keychainname.keychain”。删除此代码后，我的代码符号错误消失了。

每个人都感谢您的帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-25T03:26:42.140

问题是您需要为新设备创建/更新配置文件。配置文件与设备相关联，一旦你正确设置，你应该很高兴

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-04T10:25:40.957

我的钥匙串中没有适当的开发人员/分发证书。当我将它安装到我的钥匙串时，问题消失了！

# jquery - jQuery焦点类未在控件上呈现

> ID：15068622
> 
> 赞同：0
> 
> 时间：2013-02-25T13:56:05.857
> 
> 标签：jquery, asp.net-mvc

当我第一次进入页面时，我试图将焦点设置在表单中的第一个控件上。这有时有效，有时无效 - 光标未在字段中设置，但地址栏中的地址具有焦点。下面的例子不起作用。

```
$(document).ready(function () {

$(".focus").first().focus();

 var pickerOpts1 = {
                defaultDate: "+0",          //Used to move the current date cursor by n-days
                dateFormat: "mm/dd/yy",
                showOtherMonths: true,
                changeMonth: true,
                changeYear: true,
                yearRange: '1970:2020'
            };

        $("#Sin").mask("999-999-999");
        $("#successorHolderSin").mask("999-999-999");

        $(".sinNumber").mask("999-999-9999");

        $(".datepicker").mask("99/99/9999");
        $(".datepicker").datepicker(pickerOpts1);

     var dateFormat = "dd/mm/yy"; // en-gb date format
            jQuery.validator.addMethod('date', function (value, element, params) {
                if (this.optional(element)) {
                    return true;
                };

                var result = false;
                try {
                    $.datepicker.parseDate(dateFormat, value);
                    result = true;
                }
                catch (err) {
                    result = false;
                }
                return result;
            }, '');

});

<%:Html.DropDownListFor(r => Model.LegislationId, legislationTypeItems, new { @class = "focus" })%> 
```

但是，当我在运行页面或使用开发人员工具查找源代码后查看源代码时，该类会显示在标记中：

```
<select class="focus" data-val="true" data-val-number="The field LegislationId must be a number." id="LegislationId" name="LegislationId"> 
```

你能告诉我我可能会错过什么吗？我正在使用的 jQuery 文件是：

```
 <script src="../../Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.maskedinput-1.3.js" type="text/javascript"></script>    
    <script src="../../Scripts/jquery-datepicker.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.validate.js" type = "text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:03:51.283

`$(".focus")`即使只有一个元素与选择器匹配，也会返回一个元素数组。所以试试这个：

`$(".focus").first().focus();`

编辑：要使其在页面加载时运行，您需要像这样包装它：

```
$(function() {
    $(".focus").first().focus();
}); 
```

# css - 如何将 div 放在另一个 div 内到绝对位置？

> ID：15068624
> 
> 赞同：20
> 
> 时间：2013-02-25T13:56:08.313
> 
> 标签：css, css-position

例如，我想创建一个如下图所示的模板。

![http://i.imgur.com/OneRsMw.png](../Images/de4854638a008a976732c6f6fb18fd39.png)

如何将容器内的每个 div 定位到其绝对位置？我宁愿不需要使用浮动属性。任何简短的例子将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T14:06:19.637

你可以使用`absolute`和`relative`定位。

例如

**html**

```
<div id="container" class="box">
    <div class="box top left"></div>
    <div class="box top center"></div>
    <div class="box top right"></div>

    <div class="box middle left"></div>
    <div class="box middle center"></div>
    <div class="box middle right"></div>

    <div class="box bottom left"></div>
    <div class="box bottom center"></div>
    <div class="box bottom right"></div>
</div> 
```

**css**

```
#container{
    width:200px;
    height:200px;
    position:relative;
    border:1px solid black;
}
.box{
    border:1px solid red;
    position:absolute;
    width:20px;
    height:20px;    
}

.top{top:0}
.middle{top:50%;margin-top:-10px;/*half of the .box height*/}
.bottom{bottom:0}

.left{left:0;}
.center{left:50%;margin-left:-10px;/*half of the .box width*/}
.right{right:0;} 
```

**演示在** [http://jsfiddle.net/gaby/MB4Fd/1/](http://jsfiddle.net/gaby/MB4Fd/1/)

（*当然，您可以通过更改顶部/左侧/右侧/底部值来根据自己的喜好调整实际位置*）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T14:03:09.003

`position: relative;`在容器上使用（`<div>`包含所有内容的）并绝对定位子元素。容器内的子元素将相对于容器定位，因此很容易根据您的需要布置所有内容。

*但是*，在大多数情况下使用定位来布置您的网站被认为是一种不好的做法。我建议您使用浮动，即使您声称不想这样做，您在不同浏览器之间也会有更多的一致性。

如果您对浮点数感到困惑，请阅读[这篇文章](http://css-tricks.com/all-about-floats/)

# java - 我想映射一个地图 > 通过 JPA

> ID：15068642
> 
> 赞同：0
> 
> 时间：2013-02-25T13:56:50.263
> 
> 标签：java, hibernate, jpa, annotations, mapping

我想`Map<Long, List<ItemAttribute>>`在一个`@Entity`类内部映射一个 ItemAttribute 本身是`@Entity`单独定义的。

这是我用于映射的代码：

```
@Entity
@Table(name = "ITEM_ATTRIBUTE_GROUP")
public class ItemAttributeGroup implements Cloneable, Serializable
{
      @ElementCollection
      @MapKeyColumn(name="groupId")
      @JoinTable(name = "ATTRIBUTES_IN_GROUP", joinColumns = @JoinColumn(name = "groupId"),
                        inverseJoinColumns = @JoinColumn(name = "ID"))
      private Map<Long, List<ItemAttribute>> attributes = new HashMap<Long, List<ItemAttribute>>();
     //getters and setters........
} 
```

ItemAttribute 是下面提到的一个单独的类：

```
@Entity
@Table(name = "ITEM_ATTRIBUTE")
public class ItemAttribute implements Cloneable, Serializable {
    private static final long serialVersionUID = -8017036630979138942L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private Long id;

    @ElementCollection // this is a collection of primitives
    @JoinTable(name="ATTRIBUTE_VALUE_RANGE", joinColumns=@JoinColumn(name="ID"))
    @MapKeyColumn (name="RANGE_ID")// column name for map "key"
    @Column(name="VALUE")//  column name for map "value"
    private Map<String, String> attributeValueRange = new HashMap<String, String>();

    @ElementCollection // this is a collection of primitives
    @JoinTable(name="QUALIFIER_VALUE_RANGE", joinColumns=@JoinColumn(name="ID"))
    @MapKeyColumn (name="RANGE_ID")// column name for map "key"
    @Column(name="VALUE")//  column name for map "value"
    private Map<String, String> qualifierValueRange = new HashMap<String, String>();

    public Map<String, String> getAttributeValueRange() {
        return attributeValueRange;
    }

    public void setAttributeValueRange(Map<String, String> attributeValueRange) {
        this.attributeValueRange = attributeValueRange;
    }

    public Map<String, String> getQualifierValueRange() {
        return qualifierValueRange;
    }

    public void setQualifierValueRange(Map<String, String> qualifierValueRange) {
        this.qualifierValueRange = qualifierValueRange;
    }
} 
```

问题出在我无法识别的代码中。我收到此错误

> 使用针对未映射类的@JoinTable.inverseJoinColumns：ItemAttributeGroup.attributes[java.util.List]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:08:04.177

您需要创建一个中间类 ItemAttributes。

```
@Entity
public class ItemAttributes {

   @OneToMany
   private List<ItemAttribute> attributes;
}

@Entity
public class ItemAttributeGroup implements Cloneable, Serializable {

   @OneToMany
   private Map<Long, ItemAttributes> attributesMap;
} 
```

# java - Json 和 Java。从 String 到 JSONObject：问题

> ID：15068645
> 
> 赞同：0
> 
> 时间：2013-02-25T13:56:54.943
> 
> 标签：java, json

我正在使用图书馆`org.json`。

我有一个这样的字符串（引号不能出现在`field_n`）

```
{field1=value1, field2=value2}  (say it `val`) 
```

该字符串是从`Hashtable<String, Object>`.

我从该字符串创建一个`JSONObject`，获得：

```
{"field1":"value1", "field2":"value2"} 
```

当值`value_n`引号（或换行符和回车符）出现时，就会出现问题。

我试图以这种方式转义字符串：

```
value = value.replace("\\", "\\\\");
value = value.replace("\"", "\\\"");
value = value.replace("\r", "\\r");
value = value.replace("\n", "\\n"); 
```

但是`org.json.JSONException: Expected a ',' or '}' at ... [character ... line 1]`当我尝试使用以下方法创建 JSONObject 时，我总是会获得：

```
JSONObject json = new JSONObject(val); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:58:55.440

为了从地图创建 JSON，请使用：

```
new JSONObject(myMap); 
```

另一个相关问题：

```
quotedStr = JSONObject.quote(val.trim()); 
```

将 qoute 所有需要的值，如它所说：

> 在所有正确的位置生成带有反斜杠序列的双引号字符串

# haskell - Monads“红管”与类型不同？

> ID：15068648
> 
> 赞同：1
> 
> 时间：2013-02-25T13:57:04.640
> 
> 标签：haskell, monads

我正在[阅读一篇](http://www.cakesolutions.net/teamblogs/2013/02/11/demand-more-from-your-programming-language/)关于 monad、“管道”和成为“红色管道”的有趣文章。从表面上看，函数参数或类是确保一切都适合的管道类型。然后它会成为一个红色的管道，并且必须始终是一个红色的管道和纯度。这部分没看懂

为什么“红管”不能变成“蓝管”？可以将红色管道转换为普通管道吗？这和纯洁有什么关系？我可以认为这是类似的`class RedPipe: PlainPipe { /* same interface and implementation here*/ }`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:26:51.370

在 Haskell 中，函数的类型准确地告诉你它做了什么，更重要的是，它不做什么。这使得推理 Haskell 代码更容易。

例如，如果我有以下类型的函数：

```
f :: Int -> Int 
```

我知道它需要一个`Int`作为输入并产生一个`Int`作为输出，它什么也不做。重要的是，我知道它没有副作用。

如果我有一个类型的功能：

```
g :: Double -> State Int Double 
```

...该函数将 a`Double`作为参数并产生一种产生 a 的方法`Double`，但前提是我允许它咨询或修改某些`Int`状态。

如果我有一个类型的功能：

```
h :: Int -> Maybe String 
```

我知道这个函数需要 a`Int`并且可能会产生 a `String`，或者它可能会失败，什么也不产生。请注意，前两个函数都没有返回`Maybe`，这意味着它们不会失败。Haskell 默认不允许失败（即可以为空的值）。

如果我有一个类型的功能：

```
i :: String -> IO () 
```

我知道这个函数需要一个`String`并且可以运行来产生副作用。请注意，以前的函数都没有`IO`在它们的类型中，这意味着它们不会产生副作用。Haskell 默认不允许副作用。您必须在类型中明确选择加入它们。

这意味着我们可以查看函数或值的类型，并立即了解它们正在使用哪些特性。因此，例如，如果我`Maybe`在类型中看到 a，我知道有可能失败，如果没有，那么我知道没有失败的可能性。同样，如果我`IO`在类型中看到 an，那么我知道可能会产生副作用，但如果我`IO`在类型中看到 no，那么就不会产生副作用。

在主流语言中，您没有这种选择性地“选择加入”功能的能力。默认情况下，所有功能始终处于启用状态，这意味着您必须始终检查，`null`因为您无法保证某些功能没有失败，并且您必须始终运行测试，因为您无法保证某些功能没有失败不要隐式修改系统的状态。

Haskell 允许您限制函数的行为，以便您对它们的“权限”进行更细粒度的控制，这使得更容易扩展到没有错误的大型程序，也更容易阅读和理解 Haskell 代码，因为该类型枚举了全部范围代码的行为，因此您永远不必了解超出类型允许的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:18:17.567

作者使用术语“红管”和“蓝管”作为比喻。据我所知，这不是广泛使用的术语。我认为他文章的重点是，Java 等语言提供的类型安全有助于捕捉某些类型的程序员错误，将*纯*函数与*不纯*函数隔离可以捕捉更多。使用他的一个例子：

```
square :: Double -> Double 
```

这个类型签名告诉我

1.  该功能`square`没有任何副作用。它不会偷偷溜走并更新数据库，或者在屏幕上打印一些东西，或者改变一些状态数据，或者以其他方式让我感到惊讶。（例如，在 Java 或 C 中，我必须阅读函数及其调用的任何函数，或者依赖文档来了解函数的作用。）

2.  每次我用一个特定的值调用它，比如说，`square 5`我都会得到完全相同的结果。这称为*引用透明性*，它允许编译器做一些优化，因为它知道这个值永远不会改变，所以只需要计算一次。

# asp.net - 跟踪网站用户活动的简便方法

> ID：15068651
> 
> 赞同：0
> 
> 时间：2013-02-25T13:57:13.997
> 
> 标签：asp.net

我们希望跟踪登录用户的所有访问者活动，以便更好地了解访问者行为并为每个用户收集更多数据。

像这样不需要我们向每个网站页面添加代码的选项有哪些可用的选项？是否有一些现有的图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:59:45.613

您可以尝试以下几种不同的选择：

1.  如果您的网站使用一个或多个母版页，您可以尝试仅向母版页添加代码。
2.  创建您稍后将集成到 IIS 中的自定义 http 模块。查看[这篇](http://msdn.microsoft.com/en-us/library/ms227673%28v=vs.100%29.aspx)文章了解更多详情

# c - 线条和纹理不会一起出现

> ID：15068653
> 
> 赞同：1
> 
> 时间：2013-02-25T13:57:29.773
> 
> 标签：c, opengl

这是我画线的方法，我用鼠标画线

```
static struct
{
  GLfloat p[MAX_POINTS][2];
  GLuint point_cnt;
} contours [ MAX_CONTOURS ] ;

GLuint point_cnt_mouse;
point_cnt_mouse = contours[contour_cnt].point_cnt;
glColor3f( 0.0, 0.0, 0.0 );
glBegin(GL_LINES);
glLineWidth(5.0);
int i;
int j;
for(i = 0; i <= contour_cnt; i++)
{
  GLuint point_cnt;
  point_cnt = contours[i].point_cnt;
  if (contours[i].point_cnt == 0)
  {
    glVertex2fv ( P );
    glVertex2fv ( P );
  }//if   
  else
  {
    for(j = 2; j <= point_cnt; j++)
    {
      glVertex2fv (contours[i].p[j-2]);
      glVertex2fv (contours[i].p[j-1]);               
    }//for                
  }//else
}//for
if(point_cnt_mouse > 0)
{
  glVertex2fv(contours[contour_cnt].p[point_cnt_mouse-1]);
  glVertex2fv(P);
}//if  
glEnd(); 
```

然后我使用 glTexImage2D() 制作 GL_TEXTURE_2D 然后我的显示是

```
void display()
{
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
  glLoadIdentity();
  glPushMatrix ();     
    glTranslatef(-4.0, 5.0, -6.0);
    //this is box and load texture on it
    drawPlane();
  glPopMatrix();
  glutSwapBuffers();
  glFlush();
  }

void myinit()
{
  glClearColor(1.0, 1.0, 1.0, 1.0);
  glEnable(GL_DEPTH_TEST);
  //load png image 
  drawLogo();
  glDisable(GL_DEPTH_TEST);
} 
```

标志不会出现线条，为什么？谁能告诉我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:07:06.203

确保`glDisable(GL_TEXTURE_2D)`在绘制线条之前禁用纹理 ( )。`glEnable(GL_TEXTURE_2D)`并在绘制纹理之前重新启用 ( )。

如果您使用的是默认`GL_MODULATE`纹理环境，请确保在使用纹理进行`glColor3ub(255,255,255)`绘制之前将当前颜色设置为白色 ( )。如果你`glColor3f( 0.0, 0.0, 0.0 )`在你的线例程之后绘制纹理，那么你`GL_MODULATE`所有的纹素RGB值都会乘以零，让你到处都是黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:05:10.173

在我看来，您的`display()`函数从不调用`drawLogo()`.

```
void display()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glPushMatrix ();     
    glTranslatef(-4.0, 5.0, -6.0);
    //this is box and load texture on it
    drawPlane();
    glPopMatrix();
    glutSwapBuffers();
    glFlush();
} 
```

# c - 我无法弄清楚 MPI_Scatterv 和 MPI_Gatherv

> ID：15068657
> 
> 赞同：2
> 
> 时间：2013-02-25T13:57:36.443
> 
> 标签：c, parallel-processing, mpi

我试图将一个 1-dim n*n 数组分散到 p 个处理器，然后使用收集来获取数据。但问题是它在我运行程序时显示垃圾输出。我正在使用一个 n*n 的数组 A 和一个大小为 n 的数组 b 。

```
// num_rows is the number of rows each process will be receiving,base is the base index and last is the last index .
// curr_index_proce is the index of the processor which contains the index i of Array A. 

#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include <mpi.h>

#define NUM_EQN 10

#define NUM_ROWS(i,n,p)  ((((i)+1)*(n)/(p)) - ((i)*(n)/(p)))
#define BASE(i,n,p)     (((i)*(n)/(p)))
#define LAST(i,n,p) ((((i)+1)*(n)/(p)) - 1)
#define CUR_INDEX_PROC(i,n,p) ( ((p) * ( (i) + 1 ) - 1 )/(n))

#define MIN(a,n) ((a) > (b) ? (a) : (b))

void gather(float *A,float *b,int n);
void print_array(float *A,float *b,int n){
        int i,j;
        for ( i = 0 ; i < n;i++){
//              printf("i = %d ",i);
                for(j = 0 ; j < n;j++){
                        printf("%6.2f " ,A[i*n+j]);
                }
                printf("\n");
                //printf(" : %6.2f\n",b[i]);
        }
        printf("\n\n\n");
}

int SIZE_A(int n,int p ){
    if ( n%p == 0 )
            return n*n/p;
    else
            return n*(n/p+1);
}

int SIZE_B(int n,int p){
    if ( n%p == 0 )
            return n/p;
    else
            return n/p + 1;
}
int main(int argc,char **argv){
        MPI_Init(&argc,&argv);
        int size,rank;
        MPI_Comm_rank(  MPI_COMM_WORLD,&rank);
        MPI_Comm_size(MPI_COMM_WORLD,&size);
        double time_start, time_finish;
        float *A = malloc(sizeof(float)*NUM_EQN*NUM_EQN);
        float *b = malloc(sizeof(float)*NUM_EQN);
        float *X;
        int i,j;
        FILE *fp = fopen("A","r");
        if (fp == NULL ){
                printf("Error %s Not Found\n",argv[1]);
                exit(0);
                MPI_Finalize();
        }
        for ( i = 0 ; i < NUM_EQN;i++)
                for(j = 0 ; j < NUM_EQN;j++)
                        fscanf(fp,"%f",&A[i*NUM_EQN+j]);
        FILE *fp2 = fopen("b","r");
        if (fp2 == NULL ){
                printf("Error %s Not Found\n",argv[2]);
                exit(0);
        }
        for ( i = 0 ; i < NUM_EQN;i++)
                fscanf(fp2,"%f",&b[i]);
        time_start = - MPI_Wtime();
        gather(A,b,NUM_EQN);
        time_finish = MPI_Wtime();
        char name[100];
        int length;
        MPI_Finalize();
}

void gather(float *A,float *b,int n){
        int pivot,i,col;
        int row, j;
        int size,rank;
        MPI_Comm_rank(  MPI_COMM_WORLD,&rank);
        MPI_Comm_size(MPI_COMM_WORLD,&size);
        float global_max;
        float *A_recv,*b_recv;
        A_recv = malloc(sizeof(float)*(SIZE_A(n,size)));
        b_recv = malloc(sizeof(float)*(SIZE_B(n,size)));
    printf("%d %d \n",SIZE_A(n,size),SIZE_B(n,size));
    if ( rank == 0 ){
            print_array(A,b,n);
    }
                int send_count[size];
                int disp[size];
                int send_count_b[size];
                int disp_b[size];
                for ( i = 0 ; i < size ; i++ ){
                                send_count[i] = 0 ;
                                send_count_b[i] = 0;
                }
                for ( i = 0 ; i < size ; i++ ){
                                send_count[i] = n*NUM_ROWS(i,n,size);
                                if ( i == 0 )
                                        disp[i] = 0;
                                else
                                        disp[i] = disp[i-1] + send_count[i-1];
                                send_count_b[i] = NUM_ROWS(i,n,size);
                                if ( i == 0 )
                                        disp_b[i] = 0 ;
                                else
                                        disp_b[i] = disp_b[i-1] + send_count_b[i-1];
                }
                MPI_Scatterv(A, send_count, disp,MPI_FLOAT, A_recv,SIZE_A(n,size),MPI_FLOAT,0, MPI_COMM_WORLD);
                MPI_Scatterv(b, send_count_b, disp_b,MPI_FLOAT, b_recv,send_count_b[rank], MPI_FLOAT, 0, MPI_COMM_WORLD);
                for ( i = 0 ; i < send_count[rank]; i++ ){
                        for ( j = 0 ; j < n ; j++)
                                printf("%3.2f : ",A_recv[i*n+j]);
                        printf("\n\n");
                }
                MPI_Gatherv(A_recv,SIZE_A(n,size),MPI_FLOAT,A,send_count,disp,MPI_FLOAT,0,MPI_COMM_WORLD);
                MPI_Gatherv(b_recv,send_count_b[rank],MPI_FLOAT,b,send_count_b,disp_b,MPI_FLOAT,0,MPI_COMM_WORLD);
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T05:51:36.847

让我感到奇怪的一件事是 scatter_data 函数原型放置在另一个函数的主体中。这是很不寻常的。

其次，查看完整代码可能会有所帮助。编译完整的代码将有助于我们进行一些家庭调试，因为 MPI 代码通常很难在屏幕上调试。

编辑 ：：

我确实稍微清理了您的代码并添加了一些注释和检查。scatterv 和 gatherv 似乎都工作得很好——我添加了另一个数组 (C)，用于存储收集的数据，而不是原始 A 数组，它在两个 MPI 调用*之前*和*之后包含相同的数据。*我还修改了用于分散数据的本地临时数组的大小。

可能让您感到困惑的一件事是用于分散数据的接收缓冲区的大小。当我增加接收到的数据时，原始代码使用了太多空间并给了我段错误。例如，对于 4x4 A 矩阵，原始接收缓冲区大小为 8x4，但假设有两个进程，则应为 2x4。您的`SIZE_B(n,size)`函数实际上返回了正确的数字。

```
#define NUM_EQN 4

int main(int argc,char **argv)
{
    MPI_Init(&argc,&argv);
    int size,rank;
    MPI_Comm_rank(  MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD,&size);

    float *A = malloc(sizeof(float)*NUM_EQN*NUM_EQN);
    float *b = malloc(sizeof(float)*NUM_EQN);

    int i;
    for (i = 0; i < NUM_EQN * NUM_EQN; i++) A[i] = (float)i;
    for (i = 0; i < NUM_EQN; i++) b[i] = (float)i;

    gather(A,b,NUM_EQN);

    MPI_Finalize();
    printf("End of process %d\n",rank);
} 
```

和

```
void gather(float *A,float *b,int n){

    int i, j;
    int size,rank;
    MPI_Comm_rank(  MPI_COMM_WORLD,&rank);
    MPI_Comm_size(MPI_COMM_WORLD,&size);
    float *A_recv,*b_recv;
    A_recv = malloc(sizeof(float)*(SIZE_A(n,size)));
    b_recv = malloc(sizeof(float)*(SIZE_B(n,size)));    // size A and B are probably the array parts located in current thread
    float *C = malloc(sizeof(float)*NUM_EQN*NUM_EQN);

    printf("n: %d %d %d \n",n,SIZE_A(n,size),SIZE_B(n,size));

    if ( rank == 0 )
    {
        print_array(A,b,n);
    }
    int send_count[size];
    int disp[size];
    int send_count_b[size];
    int disp_b[size];
    for ( i = 0 ; i < size ; i++ )
    {
        send_count[i] = 0 ;
        send_count_b[i] = 0;
    }
    for ( i = 0 ; i < size ; i++ )
    {
        send_count[i] = n*NUM_ROWS(i,n,size);
        if ( i == 0 )
                disp[i] = 0;
        else
                disp[i] = disp[i-1] + send_count[i-1];
        send_count_b[i] = NUM_ROWS(i,n,size);
        if ( i == 0 )
                disp_b[i] = 0 ;
        else
                disp_b[i] = disp_b[i-1] + send_count_b[i-1];

        printf("%d Displacement[%d] : %d Sendcount : %d \n", rank, i, disp[i], send_count[i]);
    }

    MPI_Scatterv(A, send_count, disp ,MPI_FLOAT, A_recv,SIZE_A(n,size),MPI_FLOAT,0, MPI_COMM_WORLD);
    /*
    int MPI_Scatterv( void *sendbuf, int *sendcnts, int *displs,
                 MPI_Datatype sendtype, void *recvbuf, int recvcnt,
                 MPI_Datatype recvtype,
                 int root, MPI_Comm comm)*/

    //MPI_Scatterv(b, send_count_b, disp_b,MPI_FLOAT, b_recv,send_count_b[rank], MPI_FLOAT, 0, MPI_COMM_WORLD);

    printf("%d Receive data : \n",rank);
    for ( i = 0 ; i < SIZE_B(n,size); i++ )
    {
        for ( j = 0 ; j < n ; j++)
        {
            A_recv[i*n+j] = A_recv[i*n+j] + 10.0;
            printf("%d %3.2f : ",rank, A_recv[i*n+j]);

        }

        printf("\n");
    }

    if (rank == 0)
    {
        printf("%d Gather data : \n",rank);
        for ( i = 0 ; i < n; i++ )
        {
            for ( j = 0 ; j < n ; j++)
                printf("%d %3.2f : ",rank, C[i*n+j]);
            printf("\n");
        }
    }

    MPI_Gatherv(A_recv,SIZE_A(n,size),MPI_FLOAT,C,send_count,disp,MPI_FLOAT,0,MPI_COMM_WORLD);

    if (rank == 0)
    {
        printf("%d Gather data : \n",rank);
        for ( i = 0 ; i < n; i++ )
        {
            printf("%d", rank);
            for ( j = 0 ; j < n ; j++)
                printf(" %3.2f : ",C[i*n+j]);
            printf("\n");
        }
    }
    //MPI_Gatherv(b_recv,send_count_b[rank],MPI_FLOAT,b,send_count_b,disp_b,MPI_FLOAT,0,MPI_COMM_WORLD);
} 
```

如您所见，我确实摆脱了 b 数组，因为它使用几乎相同的代码。

矩阵 C 在 MPI_gather 调用之前和之后显示（对于 -np 2 ），看起来原来分散的数据现在已成功收集 - 我只需将每个分散的数字加 10 以验证是否正确收集了新的修改数据。

对于 -np = 2 和 -np = 4 也是如此。

```
0 Gather data BEFORE MPI CALL: 
0 -0.00 : 0 -0.00 : 0 0.00 : 0 0.00 : 
0 0.00 : 0 0.00 : 0 0.00 : 0 0.00 : 
0 0.00 : 0 0.00 : 0 0.00 : 0 0.00 : 
0 0.00 : 0 0.00 : 0 0.00 : 0 0.00 : 
0 Gather data AFTER MPI CALL: 
0 10.00 :  11.00 :  12.00 :  13.00 : 
0 14.00 :  15.00 :  16.00 :  17.00 : 
0 18.00 :  19.00 :  20.00 :  21.00 : 
0 22.00 :  23.00 :  24.00 :  25.00 : 
```

另外，我在这里找到了一个很好的 MPI_Scatterv 示例：[https ://gist.github.com/ehamberg/1263868](https://gist.github.com/ehamberg/1263868)

另一个很好的例子在这里： [https ://rqchp.ca/modules/cms/checkFileAccess.php?file=local.rqchpweb_udes/mpi/exemples_c/ex07_Scatter_EN.c](https://rqchp.ca/modules/cms/checkFileAccess.php?file=local.rqchpweb_udes/mpi/exemples_c/ex07_Scatter_EN.c)

还有一个建议:: 这是`free()`动态分配变量的好习惯。

# php - Symfony2 - Doctrine 和 FOSUserBundle - 错误的注释

> ID：15068658
> 
> 赞同：10
> 
> 时间：2013-02-25T13:57:36.777
> 
> 标签：php, symfony, orm, doctrine, fosuserbundle

一般来说，我是 Symfony2 的新手。这个问题与 Doctrine 和 FOSUserBundle 相关。

我有以下基于 FOSUserBundle 和自引用多对多创建的 User.php 实体。

```
<?php

namespace Pan100\MoodLogBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

    /**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ManyToMany(targetEntity="User", mappedBy="hasAccessToMe")
 **/
protected $hasAccessTo;

/**
 * @ManyToMany(targetEntity="User", inversedBy="hasAccessTo")
 * @JoinTable(name="access",
 *      joinColumns={@JoinColumn(name="id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="accessor_id", referencedColumnName="id")}
 *      )
 **/
private $hasAccessToMe;    

public function __construct()
{
    parent::__construct();
        $this->hasAccessTo = new \Doctrine\Common\Collections\ArrayCollection();
        $this->hasAccessToMe = new \Doctrine\Common\Collections\ArrayCollection();
}
} 
```

尝试更新缓存或删除时给我以下错误：

```
[Doctrine\Common\Annotations\AnnotationException]                           
[Semantical Error] The annotation "@ManyToMany" in property Pan100\MoodLog  
Bundle\Entity\User::$hasAccessTo was never imported. Did you maybe forget   
to add a "use" statement for this annotation? 
```

这里有什么问题？什么是“使用声明”？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-25T14:05:24.297

您忘记`@ORM\`在注释中添加前缀：

```
/**
 * @ManyToMany(targetEntity="User", mappedBy="hasAccessToMe")
 **/ 
```

应该

```
/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="hasAccessToMe")
 **/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:16:57.527

您还可以单独导入每个注释 - 我喜欢的方式：

```
use Doctrine\ORM\Mapping\Entity;
use Doctrine\ORM\Mapping\ManyToMany;
// ...

/**
 * @Entity
 */
class User
{
    /**
     * @ManyToMany(targetEntity="Thing")
     */
    private $things;

    // ...
} 
```

# android - Android：可以在 viewpager 中混合纵向和横向吗？

> ID：15068660
> 
> 赞同：0
> 
> 时间：2013-02-25T13:57:43.173
> 
> 标签：android, orientation, android-viewpager, landscape, portrait

我有一个关于 viewpager 的问题。可以在一个浏览器中混合纵向和横向方向吗？具体来说，一些页面是纵向的，而其他页面是横向的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:00:42.980

您可以从适配器重写方法[getWidth(int)](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth%28int%29)以更改每个页面的宽度，并随之更改它们的比例。

# c# - 如何修复不一致的可访问性：属性类型 FFT_Plotter 的可访问性低于

> ID：15068665
> 
> 赞同：0
> 
> 时间：2013-02-25T13:57:50.157
> 
> 标签：c#, .net, winforms, controls

如何在整个表单中创建具有全局范围的变量？这是我到目前为止所拥有的...

```
namespace FFT_Plotter
public partial class Form:form1 
{
public void chart1_DragDrop(...)
 {
     FFT myFFT = new FFT(); 
     myFFT.SomeFunction();
  }
   ...
 public void radioButton1_CheckChanged(...)
 {
  foreach( Series s in chart1.Series)
     {
      myRadix.DoesSomething  
      }
 }
 public class FormData
 {
    public FFT fft; 
  }
 public class AllFormData
 {
    List<FormData> myList 
 }
} 
```

为了澄清。我希望能够在所有表单控件中获得 myFFT。FFT类去

```
 namespace FFT_Plotter
  {
    class FFT 
    {
     public int pInt
     private int prInt
     }
    ...       
  } 
```

到目前为止，我的研究表明 FormData 类应该设置为 public，但我已经这样做了，它仍然给我同样的错误。

> 可访问性不一致：属性类型 FFT_Plotter 的可访问性低于...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:01:43.827

您不能拥有非公共类型的公共字段。

场;

```
public FFT fft; 
```

是公共的，FFT 类型；

```
class FFT 
{
    ...
} 
```

...这不是因为它缺少 public 关键字。

将类 FFT 公开或降低该字段的可访问性，您的问题应该得到解决。

# c# - 使用数据绑定和线程关闭 WPF 应用程序

> ID：15068667
> 
> 赞同：3
> 
> 时间：2013-02-25T13:57:53.050
> 
> 标签：c#, wpf, memory-management, data-binding

我正在尝试正确关闭我的应用程序。我的应用程序使用数据绑定，多次访问数据库，并且可能还运行了一些先天威胁。

由于`Application.Current.Shutdown()`在这种情况下不会关闭所有内容，因此我查看了`Application.Current.Dispatcher.BeginInvokeShutdown()`.

`BeginInvokeShutdown()`需要一个`System.Windows.Threading.DispatcherPriority`论据。这可以是：

*   `Invalid`- 枚举值为-1。这是无效的优先级。
*   `Inactive`- 枚举值为 0。不处理操作。
*   `SystemIdle`- 枚举值为1。系统空闲时处理操作。
*   `ApplicationIdle`- 枚举值为2。在应用程序空闲时处理操作。
*   `ContextIdle`- 枚举值为3。在后台操作完成后处理操作。
*   `Background`- 枚举值为4。在所有其他非空闲操作完成后处理操作。
*   `Input`- 枚举值为 5。操作的处理优先级与输入相同。
*   `Loaded`- 枚举值为 6。在布局和渲染完成时处理操作，但就在输入优先级的项目被服务之前。具体来说，这在引发 Loaded 事件时使用。
*   `Render`- 枚举值为 7。操作处理的优先级与渲染相同。
*   `DataBind`- 枚举值为8。操作的处理优先级与数据绑定相同。
*   `Normal`- 枚举值为 9。操作以正常优先级处理。这是典型的应用程序优先级。
*   `Send`- 枚举值为10。操作在其他异步操作之前处理。这是最高优先级。

现在，假设我的应用程序只有在出现问题时才会关闭。这意味着应用程序无需完成任何操作，只需原始关闭，以便用户重新启动应用程序。我说我必须`Inactive`作为论据是正确的吗？如果我`Send`作为论据，一切都在完全关闭之前完成，这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:25:46.163

`Application.Current.Shutdown()`只要您的线程是后台线程，就应该适用于您的情况。它们是如何被创造出来的？如果您只是新建一个 Thread 对象，您应该能够将 IsBackground 属性设置为`true`. 如果它们需要成为前台线程，您需要在关闭时手动停止循环。

As for your actual question from what I understand `BeginInvokeShutdown` will still process everything in the UI thread queue but will not accept any more actions. The priority just seems to be similar to a normal thread priority setting as it relates to CPU usage with the extra ability of ending the invoked task to the front of the processing queue.

# javascript - 如何在jqgrid中加载json

> ID：15068668
> 
> 赞同：0
> 
> 时间：2013-02-25T13:57:54.453
> 
> 标签：javascript, jquery, jqgrid

我正在使用 struts2-jquery-jqgrid 插件来构建网格。我 **在这个网格上有 filter-search**h。我在列assigned_user 上有一个下拉列表，用于根据从下拉列表中选择的选项过滤网格。**我已经使用 struts 构建的网格**

```
<s:url var="remoteurl" action="adminJsontable">
    </s:url>
    <sjg:grid
        id="gridtable"
        caption="Issue-Summary"
        dataType="json"
        href="%{remoteurl}"
        pager="true"
        gridModel="finalGridModel"
        rowList="10,20,25"
        rowNum="10"
        rownumbers="true"
        width="1250" 
        filter="true"
        filterOptions="{stringResult :false,
                        searchOnEnter : true,
                        enableClear : true,
                        autosearch : false
                       }"
        loadonce="false"

    >
        <sjg:gridColumn  name="issue_id"  id="issueId"   index="id" title="Issue-ID" formatter="integer" formatoptions="{thousandsSeparator: ''}"  sortable="false" width="100"/>
        <sjg:gridColumn name="issue_description" index="issue_description" title="Issue-Details"  sortable="false"  width="300"/>
        <sjg:gridColumn name="issue_raised_date" index="issue_raised_date" title="Issue-Date"  formatter="date"  sortable="false"  width="100"/>

        <sjg:gridColumn  name="issue_action"  index="issue_action" title="Action"  formatter="formatLink" sortable="false"/>

        <sjg:gridColumn name="assigned_to"   index="assigned_user" key="assigned_user" title="Assigned To"   
        sortable="false"
        searchtype="select"
        search="true"
        searchoptions="{defaultSearch:'cn', dataUrl : '%{fillUser}', 
                       dataEvents: [{ type: 'change', data: { field: 'assigned_user',operation:'eq'}, fn: function(elem) { filterFunction(elem)}}]}"/>

    </sjg:grid> 
```

我使用以下过滤此网格

```
function filterFunction(ele) {
    var selectedOption=$(ele.target).val();
    $.ajax({
        url: "adminJsontable?searchString=" + selectedOption + "&searchField=" + ele.data.field,
        dataType: "json",
        complete: function (jsondata, stat) { 
            if (stat=="success") {
                //here i am loading the json data as response from server
                jQuery("#gridtable")[0].addJSONData(jsondata);
            }
        }
    });
} 
```

**json-data 包含具有以下对象的列表：**

```
public class Jgrid_Data 
{
    private String issue_id;//getters & setters
    private String issue_raised_date;
    private String issue_description;
    private String issue_status;
    private String assigned_to; 
```

**问题场景：**

第一次加载 jqgrid 时，它非常棒，它是由相同的**json-data**加载的，即来自服务器的列表，但是当我过滤网格并使用不同的数据加载相同的集合时，jqgrid 显示没有行。为什么会这样？

**更新部分：这是我的 json 数据**

```
{
    "finalGridModel": [
        {
            "assigned_to": "neo",
            "issue_description": "Balance not Showing_OR7520180001",
            "issue_id": "2880",
            "issue_raised_date": "2012-03-05",
            "issue_status": "Assigned"
        },
        {
            "assigned_to": "neo",
            "issue_description": "Re: for accounts",
            "issue_id": "3215",
            "issue_raised_date": "2012-03-10",
            "issue_status": "Assigned"
        },
        {
            "assigned_to": "neo",
            "issue_description": "[Fwd: Transaction issue of chhatarpur M.P.csp Rohit jain",
            "issue_id": "3714",
            "issue_raised_date": "2012-03-15",
            "issue_status": "Assigned"
        },
        {
            "assigned_to": "neo",
            "issue_description": "Balance not Showing_(Sambalpur)_19_03_2012",
            "issue_id": "3995",
            "issue_raised_date": "2012-03-19",
            "issue_status": "Assigned"
        },
        {
            "assigned_to": "neo",
            "issue_description": "Fwd: issue no-103",
            "issue_id": "4003",
            "issue_raised_date": "2012-03-19",
            "issue_status": "Assigned"
        }
    ],
    "issueTrackerInstance": {
        "assigned_by": null,
        "issue_id": null,
        "issue_status": null,
        "tracked_time": null,
        "tracker_name": null,
        "tracker_status": null
    },
    "page": 1,
    "records": 10,
    "rows": 10,
    "session": {
        "filter_user": "neo",
        "userName": "admin"
    },
    "sidx": null,
    "sord": "asc",
    "stringResult": null,
    "total": 1
} 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:23:28.640

找到解决方案，只需将 ajax-event 从完成更改为成功。

```
 success: function(jsondata,stat)
  { 
  if(stat=="success") 
  {
  jQuery("#gridtable")[0].addJSONData(jsondata);//here i am loading the json data as response from server
  } 
```

# php - AJAX 通过无序列表（下拉菜单）

> ID：15068673
> 
> 赞同：0
> 
> 时间：2013-02-25T13:58:14.400
> 
> 标签：php, javascript, ajax, html

我想知道是否可以在不使用表单/选择的情况下将值传递给我的 ajax/php 调用。可以通过 ul 或 li 完成吗？

我的代码：

```
<script>
function showUser(str)
{
    if (str=="")
    {
        document.getElementById("activities").innerHTML="";
        return;
    } 
    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("activities").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","branch.php?q="+str,true);
    xmlhttp.send();
}
</script>
<nav class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-list"></i><span id="Branch">&nbsp;Activites</span></a>
    <ul class="dropdown-menu">
        <li>Option1</li>
        <li>Option2</li>
        <li>Option3</li>
        <li>Option4</li>
    </ul>
</nav> 
```

选择菜单正在工作，但我想要这样的菜单：http: [//twitter.github.com/bootstrap/components.html#dropdowns](http://twitter.github.com/bootstrap/components.html#dropdowns)

```
<select onchange="showUser(this.value)">
<option value="Option1">Option1</option>
<option value="Option2">Option2</option>
<option value="Option3">Option3</option>
<option value="Option4">Option4</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:06:34.230

考虑使用 jQuery 来加速你的开发，但在那之前你可以使用类似的东西

```
<ul id="myMenu">
  <li>content</li>
  ...
</ul>

<script>
document.getElementById('myMenu').addEventListener('click', function(event) {
  if ('li' != event.target.tagName) {
    return;
  }

  var str = event.target.innerText;
  showUser(str);
}, false);
</script> 
```

当然使用 jQuery 会更整洁

```
$("#myMenu > li").click(function (ev) {
  var str = $(this).html();
  showUser(str);
}); 
```

# java - Spring mvc 多部分

> ID：15068675
> 
> 赞同：6
> 
> 时间：2013-02-25T13:58:14.553
> 
> 标签：java, spring-mvc

我不断收到以下错误

> org.springframework.web.multipart.support.MissingServletRequestPartException：未找到请求部分“模型”。

将多部分请求发布到 spring mvc 控制器时。

这是请求：

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:4394941
Content-Type:multipart/form-data; boundary=----WebKitFormBoundaryK4y8t7mg2SNoYxC4
Cookie:SID=091f182f-5534-47c4-b0c1-8ca9c17e1f09
Host:localhost:8080
Origin:http://localhost:8080
Referer:http://localhost:8080/controller/home/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
X-Requested-With:XMLHttpRequest
Request Payload
------WebKitFormBoundaryK4y8t7mg2SNoYxC4
Content-Disposition: form-data; name="model"

{"name":"kjkjk","description":"kkjkjk"}
------WebKitFormBoundaryK4y8t7mg2SNoYxC4
Content-Disposition: form-data; name="photo"; filename="IMG_1281.JPG"
Content-Type: image/jpeg 
```

**控制器**

```
@RequestMapping(value = "/t")
    public ResponseEntity<ResponseMessage> t(@CookieValue(value = "SID", required = true) String sessionId, 
            @RequestPart("model") CategoryModel model,
            @RequestPart("photo") MultipartFile file)
    {
    return new ResponseEntity<ResponseMessage>(new ResponseMessage(200, "success"), HttpStatus.OK);
    } 
```

**模型**

```
package bla.bla.bla;

import java.util.ArrayList;
import java.util.List;
import java.util.Vector;
import org.codehaus.jackson.annotate.JsonBackReference;
import org.codehaus.jackson.annotate.JsonIgnore;

public class CategoryModel {

    public CategoryModel(String id, String name, String description, CategoryModel parent) {
        super();
        this.name = name;
        this.description = description;
        this.id = id;
        this.parent = parent;
    }

    public CategoryModel(String id, String name, String description, CategoryModel parent, List<CategoryModel> childrens) {
        super();
        this.name = name;
        this.description = description;
        this.id = id;
        this.parent = parent;
        this.childrens = childrens;
    }

    public CategoryModel()
    {

    }
    public String id;
    public String name;
    public String description;
    public String imageUrl; 
    public CategoryModel parent;
    public List<CategoryModel> childrens = new ArrayList<CategoryModel>();
} 
```

我添加了控制器和实体，请检查并让我知道我哪里出错了？

谢谢你，詹姆斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-15T11:01:43.407

我也有类似的问题，幸运的是，[这个](https://stackoverflow.com/a/25183266/2494102)答案帮助我找出了问题所在。正如那里提到的，问题不在于您的 Java 部分。您必须更改在客户端构建 CategoryModel 的 Javascript 逻辑。根据该答案，您的逻辑应如下所示：

```
var file = ... // your file
var model = {
    id: 'TestId'
    name: 'TestName',
    description: 'TestDesciption',
    .... // other fields are ommited
};

var fd = new FormData();
fd.append('photo', file);
fd.append('model', new Blob([JSON.stringify(model)], { type: "application/json" })); 
```

使用此代码，您的异常应该得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T05:30:19.040

[http://www.mkyong.com/spring-mvc/spring-mvc-file-upload-example/](http://www.mkyong.com/spring-mvc/spring-mvc-file-upload-example/)

文件上传依赖->模型->文件上传控制器->文件上传验证->查看页面->Spring配置->演示

html

```
<form:form method="POST" commandName="fileUploadForm"
    enctype="multipart/form-data">

    <form:errors path="*" cssClass="errorblock" element="div" />

    Please select a file to upload : <input type="file" name="file" />
    <input type="submit" value="upload" />
    <span><form:errors path="file" cssClass="error" />
    </span>

</form:form> 
```

pom.xml

```
 <!-- Apache Commons Upload --> 
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.2.2</version>
</dependency>

<!-- Apache Commons Upload --> 
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>1.3.2</version>
</dependency> 
```

控制器

```
public class FileUploadController extends SimpleFormController{

public FileUploadController(){
    setCommandClass(FileUpload.class);
    setCommandName("fileUploadForm");
}

@Override
protected ModelAndView onSubmit(HttpServletRequest request,
    HttpServletResponse response, Object command, BindException errors)
    throws Exception {

    FileUpload file = (FileUpload)command;

    MultipartFile multipartFile = file.getFile();

    String fileName="";

    if(multipartFile!=null){
        fileName = multipartFile.getOriginalFilename();
        //do whatever you want
    }

    return new ModelAndView("FileUploadSuccess","fileName",fileName);
} 
```

模型

```
public class FileUpload{

MultipartFile file;
//getter and setter methods
} 
```

...

输入类型=“文件”**名称=“文件”** ==私有MultipartFile**文件**；

控制器 -> 模型 -> getFile ^^ 是的！

# django - Django 从模板上传

> ID：15068682
> 
> 赞同：0
> 
> 时间：2013-02-25T13:58:31.227
> 
> 标签：django, django-templates

我正在研究从 html 模板上传文件。我看过很多文档，包括 FileFields、ImageFields 等。但是，理想情况下我不想重写我的代码。目前，我的模板上有一个简单的表单，我想在那里有一个上传功能，在那里，一张图片将被上传并存储到我的应用程序媒体文件夹中，如果可能的话，还可以添加到数据库中。

我确实知道我可能走了一条漫长而复杂的路线，但如果有人能提供帮助，那就太好了！

html.py：

> ```
> <div class="row">                 <div class="span1 offset5">                 </bR>
>               <form class="form-horizontal" method="get" action="/add/submit" value="add">  
>               <fieldset>              <div class="input">
>               <div class="inline-inputs">
>               <label>Ride Name:</label><input type="text" name="name">
>               <label>Type:</label><input type="text" name="type">
>               <label>Theme:</label><input type="text" name="theme">
>               <label>Description:</label><textarea rows="5" name ="description"></textarea>
>               <label>Author:</label><input type="text" name="author">
> 
>               <label>Date Released:</label>
>               <div id="datetimepicker" class="input-append date">
>                   <input type="text" name="date"></input>
>                   <span class="add-on">
>                   <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
>                   </span>
>               </div>                      
>               <label>Thread:</label><input type="text" name="thread">
>               <label>Video</label><textarea rows="2" name ="video"></textarea>
> 
>                   <br><br>
>                   <input class="btn btn-primary" type="submit" value="Add" />
>                   </div>              </div>                      
> 
>                </fieldset> 
>               </form>  
>               </div>  </div> 
> ```

目前我的 Views.py 只是获取输入的数据并将其插入数据库。我想添加要上传文件的功能：

```
def Ride_Add_Submit(request):
    name = request.GET['name']
    type = request.GET['type']
    theme = request.GET['theme']
    description = request.GET['description']
    author = request.GET['author']
    releasedate=request.GET['date']
    video=request.GET['video']
    thread=request.GET['thread']

    entry = RollerCoaster(name=name, type=type, theme=theme, description=description, releasedate=releasedate, author=author, video=video, thread=thread)
    entry.save()
    return TemplateResponse(request, 'Ride_Add.html') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:04:06.577

我不明白你为什么一直在这里谈论模板，模板与任何事情都没有任何关系。像所有逻辑一样，上传的处理是在视图中完成的。

[文件上传概述](https://docs.djangoproject.com/en/1.4/topics/http/file-uploads/#handling-uploaded-files)仍然包含您需要的所有信息。您可以忽略有关 Django 表单的部分并检查它是否有效，只需将文件对象传递给您的上传处理函数，该页面也对此进行了说明。

但是，您将需要更改您的模板，以便表单元素使用 POST 而不是 GET（无论如何这几乎肯定是一个好主意），并`enctype="multipart/form-data"`按照该页面上的描述使用。

最后，我真的建议您重写代码以使用 ModelForms。它不仅会让你的代码更简单，它还会做一些事情，比如验证条目以确保所有必需的字段都存在并且是正确的类型，等等 - 以及输出有效的 HTML（例如，你'标签中缺少`for`属性）。`label`

# javascript - 如何在没有导航、菜单等按钮的弹出窗口中打开 /data 文件夹中的 firefox 插件 html 文件？

> ID：15068686
> 
> 赞同：0
> 
> 时间：2013-02-25T13:58:39.687
> 
> 标签：javascript, firefox, firefox-addon

我正在制作一个 firefox 插件，我需要在弹出窗口中打开一个 html 页面（存储在我的 /data 文件夹中），而无需任何导航、菜单等按钮。它应该看起来像 gtalk 中的弹出窗口？

我尝试使用以下方法从*main.js*打开此弹出窗口：

```
require('sdk/windows').browserWindows.open(data:url('file.html')) 
```

这只会在新窗口中打开html页面？现在，当我`data.url`将此文件的内容传递给插件中我的面板的内容脚本时，它根本不做任何事情（它从*main.js*接收 url并在控制台中打印，但它没有打开它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T20:39:33.380

目前这在窗口中是不可能的，除非你进入非常低的级别，因为这是被阻止的，因为它通常不安全并且通常是糟糕的用户体验。

我建议改用[面板](https://addons.mozilla.org/developers/docs/sdk/latest/modules/sdk/panel.html)。

# prolog - 简单的 Prolog 程序 - 值是在范围内还是范围外？

> ID：15068691
> 
> 赞同：1
> 
> 时间：2013-02-25T13:58:47.430
> 
> 标签：prolog

我正在尝试编写一个程序，它采用 3 个整数 I、J 和 K，如果 K 在 I 和 J 的范围内，则返回 true，如果超出范围，则返回 false。

逻辑当然非常简单，但我对 Prolog 的语法理解不够，无法实现它。

我将如何解决这个任务。这是我目前得到的代码：

```
i(10).
j(20).
k(21).

inRange(i, j, k):-
   (k > i, k < j). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:07:18.063

需要记住的 Prolog 语法的第一条规则是以字母开头的事物中的第一个字母的大小写很重要：在许多其他语言中看起来像变量的东西实际上可能是 Prolog 中的*原子*。

如果标识符以小写字母开头，则它不是变量，而是所谓的*atom*。与变量不同，原子是恒定的。它们不能通过*统一*绑定到其他值，因此`inRange(i, j, k)`不可能工作。你需要

```
inRange(I, J, K) :- K > I, K < J. 
```

现在您的逻辑按预期工作：

```
:- inRange(0, 10, 5), write(yes). 
```

写`yes`，而目标

```
:- inRange(0, 10, -1), write(yes).
:- inRange(0, 10, 11), write(yes). 
```

都失败了。这是[关于 ideone 的快速演示](http://ideone.com/4zrnBy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:17:05.303

您可能想要使用变量（必须以大写字母开头）：

```
in_range(X,Y,Z) :- X < Y, X < Z, Y > Z. 
```

现在取决于您如何定义范围内的内容，您可能更喜欢：

```
in_range(X,Y,Z) :- X =< Y, X =< Z, Z =< Y. 
```

这两个版本要求实例化所有三个数字，这意味着您只能提出如下问题：

```
?- in_range(1,10,4).
true. 
```

但不是：

```
?- in_range(1,10,X).
X=1;
X=2;
...
X=10. 
```

内置谓词`between/3`怎么样？试试看：

```
?- between(1,5,3). 
```

或者

```
?- between(1,5,10). 
```

甚至：

```
?- between(1,5,X). 
```

# c# - WinApi - 字节数组到灰色 8 位位图（+性能）

> ID：15068696
> 
> 赞同：0
> 
> 时间：2013-02-25T13:59:11.740
> 
> 标签：c#, winapi, bitmap, bytearray, draw

我有一个需要在桌面（或窗体）上显示的字节数组。我正在为此使用 WinApi，但不确定如何一次设置所有像素。字节数组在我的内存中，需要尽快显示（仅使用 WinApi）。

我正在使用 C#，但简单的伪代码对我来说就可以了：

```
// create bitmap
byte[] bytes = ...;// contains pixel data, 1 byte per pixel
HDC desktopDC = GetWindowDC(GetDesktopWindow());
HDC bitmapDC = CreateCompatibleDC(desktopDC);
HBITMAP bitmap = CreateCompatibleBitmap(bitmapDC, 320, 240);
DeleteObject(SelectObject(bitmapDC, bitmap));

BITMAPINFO info = new BITMAPINFO();
info.bmiColors = new tagRGBQUAD[256];
for (int i = 0; i < info.bmiColors.Length; i++)
{
    info.bmiColors[i].rgbRed = (byte)i;
    info.bmiColors[i].rgbGreen = (byte)i;
    info.bmiColors[i].rgbBlue = (byte)i;
    info.bmiColors[i].rgbReserved = 0;
}
info.bmiHeader = new BITMAPINFOHEADER();
info.bmiHeader.biSize = (uint) Marshal.SizeOf(info.bmiHeader);
info.bmiHeader.biWidth = 320;
info.bmiHeader.biHeight = 240;
info.bmiHeader.biPlanes = 1;
info.bmiHeader.biBitCount = 8;
info.bmiHeader.biCompression = BI_RGB;
info.bmiHeader.biSizeImage = 0;
info.bmiHeader.biClrUsed = 256;
info.bmiHeader.biClrImportant = 0;
// next line throws wrong parameter exception all the time
// SetDIBits(bitmapDC, bh, 0, 240, Marshal.UnsafeAddrOfPinnedArrayElement(info.bmiColors, 0), ref info, DIB_PAL_COLORS);

// how do i store all pixels into the bitmap at once ?
for (int i = 0; i < bytes.Length;i++)
    SetPixel(bitmapDC, i % 320, i / 320, random(0x1000000));

// draw the bitmap
BitBlt(desktopDC, 0, 0, 320, 240, bitmapDC, 0, 0, SRCCOPY); 
```

当我尝试自己设置每个像素时，`SetPixel()`我看到一个没有灰色的单色图像，只有黑色和白色。如何**正确**创建用于显示的灰度位图？我该怎么做呢？

* * *

**更新：** 调用在我的 WinApi 程序之外出现错误。无法捕获异常：

```
public const int DIB_RGB_COLORS = 0;
public const int DIB_PAL_COLORS = 1;

[DllImport("gdi32.dll")]
public static extern int SetDIBits(IntPtr hdc, IntPtr hbmp, uint uStartScan, uint cScanLines, byte[] lpvBits, [In] ref BITMAPINFO lpbmi, uint fuColorUse);

// parameters as above
SetDIBits(bitmapDC, bitmap, 0, 240, bytes, ref info, DIB_RGB_COLORS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:49:16.443

[SetDIBits](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162973%28v=vs.85%29.aspx)参数中有两个错误：

*   `lpvBits`- 这是图像数据，但您正在传递调色板数据。你应该传递你的`bytes`数组。
*   `lpBmi`- 这没关系 -`BITMAPINFO`结构同时包含`BITMAPINFOHEADER`和调色板，因此您不需要单独传递调色板。我对您其他问题的回答描述了如何声明结构。
*   `fuColorUse`- 这描述了调色板的格式。您正在使用 RGB 调色板，因此您应该通过`DIB_RGB_COLORS`.

# python - 将数字表示为其因子的乘积

> ID：15068698
> 
> 赞同：1
> 
> 时间：2013-02-25T13:59:16.027
> 
> 标签：python

我想将一个数字表示为其因子的乘积。用于表示数字的因子的数量应该是从 2 到相同数量的素因子的数量（这是一个数字的最大可能的因子数量） .

例如取数字 24：

将数字表示为两个因子相乘是`2*12`, `8*3`,`6*4`等等...,

将数字表示为三个因子相乘是`2*2*6`，`2*3*4`等等...，

将数字表示为四个因子乘法（仅素因子）是`2*2*2*3`。

请帮我获得一些简单而通用的算法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:46:56.597

这将生成所有乘以得到原始数字的因子集。它将所有产品集作为唯一的排序元组列表返回。

s 被排除在外，`1`以避免无限递归。

```
def prime_factors(n):    
    return set(reduce(list.__add__, ([i, n//i] for i in range(1, int(n**0.5) + 1) if n % i == 0)))

def product_sets(n):
    return set(products(1, [], n, prime_factors(n)))

def products(current_product, current_list, aim, factors):

    if current_product == aim:
        yield tuple(sorted(current_list))

    elif 0 < current_product < aim:
        for factor in factors:
            if factor != 1:
                for product in products(current_product * factor, current_list + [factor], aim, factors):
                    yield product

print list(product_sets(24)) 
```

输出：

```
[(4, 6), (3, 8), (2, 12), (2, 3, 4), (24,), (2, 2, 6), (2, 2, 2, 3)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:06:20.540

我知道一个...

如果您使用的是 python，则可以使用字典来简化存储...

您必须检查每个小于数字平方根的素数。

现在，假设 p^k 除以你的数字 n，我想你的任务是找到 k。这是方法：

> 诠释 c = 0; 国际温度 = n; while(temp!=0) { temp /= p; c+=温度；}

上面是一个 C++ 代码，但你会明白的......在这个循环结束时，你会有 c = k

是的，will给出的链接是相同算法的完美python实现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:31:22.520

这是一个返回给定数字的所有因子的函数`n`。请注意，它返回每个因素，而不是特定的对。

```
def factors(n):
    """Finds all the factors of 'n'"""
    fList, num, y, limit = [], n, 0, int(sqrt(n)) + 1
    for factor in range(1, limit):
        if n % factor == 0:
            if factor not in fList: fList.append(factor)
            y = n / factor
            if y not in fList: fList.append(y)
    return sorted(fList) 
```

例如`factors(24)`：

```
>>> factors(24)
[1, 2, 3, 4, 6, 8, 12, 24] 
```

# c# - 打开和关闭 ap 时在文本框中加载、保存和读取数据 c# VS 2012

> ID：15068700
> 
> 赞同：0
> 
> 时间：2013-02-25T13:59:17.453
> 
> 标签：c#, winforms, textbox, xml-serialization

我有一个应用程序，用户登录到一个文本框列表，用户可以在其中写入数据，然后关闭应用程序，当他们打开它时，数据仍在文本框中。

我一直在研究 .txt 和 .xml 以了解哪种格式最适合使用。我还研究了 XML 序列化以及 .xml 文件中包含哪些代码，但我有点迷失了，是否必须更改文本框的名称才能将数据加载到正确的框中？页面本身大约有 15 个文本框。

我添加了使用 System.Xml.Serialization；到我的表格。同样，当用户登录时，它会打开一个现有的表单，而当用户注销时，它只会关闭表单。

我对如何加载显示所有数据的页面、保存数据（我为文本框页面创建了一个保存按钮）以及读取文件是否读取和加载不同？

我正在使用 Visual Studio 2012 Winforms c#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:36:11.453

您可以使用 XML 的属性并从用户登录名中对其进行命名。

```
static public void CreateFile(string username)
{
    XmlWriter xmlW = XmlWriter.Create(username + ".xml");
    xmlW.WriteStartDocument();
    xmlW.WriteStartElement("Listofboxs");

//add the box following this canvas
    xmlW.WriteStartElement("box");
    xmlW.WriteAttributeString("nameofbox", "exampleName");
    xmlW.WriteAttributeString("valueofbox", "exampleValue");
    xmlW.WriteEndElement();
   //
    xmlW.WriteEndElement();
    xmlW.WriteEndDocument();
    xmlW.Close();
} 
```

这将允许您使用用户名创建第一个文件。其次，要在重新加载应用程序时显示这些信息，这里有一些代码：

```
static public Dictionary<string, string> getBoxValue(string username)
{
     Dictionary<string, string> listofbox = new Dictionary<string, string>();

    XmlDocument xmldoc = new XmlDocument();
    xmldoc.Load(@"./" + username + ".xml");
    XmlNode root = xmldoc.DocumentElement;

    foreach (XmlNode box in root)
    {
 listofbox.Add(box.Attributes[0].Value.ToString(),box.Attributes[1].Value.ToString()); 
    }
return listofbox;
} 
```

对于每个节点，字典将添加一对字符串，框的名称及其值。你可以用它来填满你的盒子。我知道这段代码可能有点效率低下（应该使用“使用”等），但我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:55:59.727

要读取和写入 xml 文件，您可以将数据集添加到项目中，在其中定义两列。一列用于文本框的名称，另一列用于值。在数据集上，您可以使用方法 WriteXml 和 ReadXml 进行读取和写入。

要在启动时加载 xml，您必须订阅表单的加载事件。在 Formclosing-event 中，您可以编写数据。

```
public Form1()
{
   this.Load += OnLoad();
   this.FormClosing += OnFormClosing();
}
private void OnLoad(object sender, EventArgs e)
{
   // Read Data from Xml with the dataset (dataset.Readxml...)
}
private void OnFormClosing(object sender, FormClosingEventArgs e)
{
   // Write the Data from the textboxes into the xml (dataset.writexml...)
} 
```

要设置加载部分中文本框的值，您可以使用以下代码：

```
TextBox tb = this.Controls.Find("buttonName", true);
if(tb != null)
   // set the value for the tb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:14:08.133

我无法完全理解你的问题。显示您想要的程序的编码。只需在您的页面加载时尝试清除所有文本框数据。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        textBox1.Text = string.Empty;
    } 
```

# javascript - JavaScript 中的多引号问题

> ID：15068705
> 
> 赞同：0
> 
> 时间：2013-02-25T13:59:26.167
> 
> 标签：javascript, quotes

我在根据另一个选择的选项更改选择的选项时遇到问题，下面是有效的代码：

```
dropdown2.innerHTML = "<?php echo($SQLFormElements->GetColumnAsOptions('SELECT `field2` FROM `table2` WHERE `field1` = \'8\' ')); ?>"; 
```

**解释：**

我有两个数据库表：`table1`和`table2`. `table1`有`field1`. `table2`有字段`field2`和`field1`。`SQLFormElements`是一个 php 文件，它根据 mysql 查询回显 html 元素，在这种情况下，是 select 元素的选项。`dropdown1`包含`field1`值。`dropdown2`应`field2`根据 的值显示值`field1`，即 的选定项`dropdown1`。

无论如何，上面的代码工作正常，但是我已经硬编码而不是获取值，因为当我做这样的事情时：

```
var selectedItem = document.getElementById("ddField1");
dropdown2.innerHTML = "<?php echo($SQLFormElements->GetColumnAsOptions('SELECT `field2` FROM `table2` WHERE `field1` = \'" + selectedItem + "\' ')); ?>"; 
```

它不起作用，知道为什么！我有点难过。提醒一下，第一个代码片段有效。

**我尝试了以下方法：**

*   将变量解析为整数（我表中的 field1 是整数类型）
*   省略 where 子句中的引号
*   省略引号但对 where 子句中的值进行硬编码有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:03:59.770

我认为您错过了 selectedItem 中的值。

`var selectedItem = document.getElementById("ddField1");`将其更改为`var selectedItem = document.getElementById("ddField1").value;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:23:36.727

所以@Bergi 建议的 AJAX 方法成功了：

这里是：

dropdown1 的 onchange 事件：

```
onchange="AJAXItemChangeEvent(this.value)" 
```

...

JavaScript 函数

```
function AJAXItemChangeEvent(selectedValue)
{
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function(){
    document.getElementById("dropdown2").innerHTML = xmlhttp.responseText;
    };

    xmlhttp.open("GET","Getter.php?field1=" + selectedValue,true);
    xmlhttp.send();
} 
```

...

**Getter.php**

```
<?php
  mysql_connect("dbhost","username","password");
  mysql_select_db("dbname");

  $field1 = $_GET["field1"];
  $sql = "SELECT field2 FROM table2 WHERE field1 = '".$field1."'";

  $result = mysql_query($sql);
  echo "<option></option>";

  while($row = mysql_fetch_array($result))
  {
      echo "<option>".$row[0]."</option>";      
  }         
?> 
```

**注意** - 我的 ajax 代码不适合旧浏览器 \ 向后功能

# eclipse - Maven 与 IDE 的集成

> ID：15068706
> 
> 赞同：0
> 
> 时间：2013-02-25T13:59:29.927
> 
> 标签：eclipse, maven, ide, intellij-idea, dependency-management

我以为我理解 Maven，因为我已经使用它处理了几个项目，但我似乎无法用它创建自己的项目，所以有人可以纠正我可能错的地方吗？

**假设我创建了一个新的 Maven 项目（我们会说我是通过 Eclipse 或 IntelliJ 完成的）：**

1.  如果我向我的 POM 文件添加依赖项，假设我添加了一个可以找到该依赖项的公共存储库，IDE 不应该下载指定的 JAR 并使其在我的代码中使用它时被识别吗？目前，我的项目无法识别应通过我的 POM 依赖项在 JAR 中找到的任何类。
2.  假设 #1 确实有效，我如何通过 maven 确定我拥有哪些瞬态依赖项？例如，我正在使用 Pentaho Data Integration 中的类，它的一些插件引用了 org.mozilla.javascript.* 之类的东西。maven 可以自动告诉我，无需我运行代码、看到它失败并手动修复依赖关系吗？这里将有数百个这样的实例，因此手动修复确实不可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:38:54.183

这是我的 IntelliJ 两分钱：

**1 - 在项目的 pom.xml 中添加依赖项**

确实应该下载依赖的jar。如果弹出“导入更改”对话框，您可能需要批准它，或者启用自动导入。

**2 - 看到传递依赖**

它可以通过[Maven 依赖关系图](http://blogs.jetbrains.com/idea/2010/05/maven-dependencies-diagram/)来实现- 不幸的是仅在 IntelliJ Ultimate 版本中。您可以使用[Maven Dependencies Plugin](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)在您喜欢的 CLI 中查看依赖关系树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:13:05.497

**问题一：添加依赖**

在 Eclipse 中，根据您创建项目的方式，您应该能够添加使用 maven 上下文菜单自动识别的依赖项。

请注意，您应该使用 eclipse maven 插件创建项目，以便它具有 maven 特性。

要从远程存储库添加依赖项/插件，如果您知道 artifactId 或 groupId，则可以在生成的 UI 中搜索依赖项。无论是否指定了 repo url，该插件都会拉起 deps `pom.xml`。

将依赖项添加到 POM 后，IDE 将在您保存文件后立即开始下载它和所有临时依赖项。

如果出现问题，您可以尝试从上下文菜单中“更新项目”。

**问题 2：确定传递依赖关系**

瞬态依赖在 POM 编辑器的“依赖层次”选项卡中可见。

我通常默认使用命令行，因为它在跟踪`dependency graph`.

很抱歉，我没有使用 IntelliJ

# remote-access - 通过智能手机 android 远程设备

> ID：15068711
> 
> 赞同：1
> 
> 时间：2013-02-25T13:59:44.910
> 
> 标签：remote-access

我是这个世界的新手。我想构建一个应用程序来删除一些设备。例如：我想打开或关闭灯并使用我的智能手机（Android）来做。

但是，我不知道该怎么办？你能告诉我所有的步骤吗？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T03:04:02.350

使用 Raspberry Pi（运行 linux）。

您可以使用 RPi 通用 I/O 线来控制灯等继电器，然后使用许多 Android 应用程序对其进行远程控制。

# jquery - jQuery中的变量和if语句问题

> ID：15068713
> 
> 赞同：2
> 
> 时间：2013-02-25T13:59:46.613
> 
> 标签：jquery

为什么看起来相似的代码片段以不同的方式工作？

```
<input data-value-max="10"> 
```

**1.**如果脚本`option`来自`attr`，它总是`input`用`option`值更新：

```
$('input').keyup(function(e) {

  var $this = $(this);
      option = $this.attr('data-value-max');
      val = $this.val();

  if (val > option){   // ←---
    e.preventDefault();
    $this.val(option);
  }

}); 
```

我的意思是，如果我输入`3`or `10`，脚本会将输入更新为`10`.

**2.**`if`第二个变体正如我所期望的那样工作——它仅在输入值大于语句中的数字时才替换输入值：

```
$('input').keyup(function(e) {

  var $this = $(this);
      option = $this.attr('data-value-max');
      val = $this.val();

  if (val > 10){   // ←---
    e.preventDefault();
    $this.val(option);
  }

}); 
```

所以我不明白为什么第一个变体总是替换输入值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:02:12.030

您不解析值和属性。

您应该知道`"3" > "10"`但是`3 < "10"`（在后一种情况下，`"10"`会自动转换以进行比较）。

使用[parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

```
var option = parseInt($this.attr('data-value-max'), 10); 
```

由于您的属性具有`data`前缀，您还可以使用 jQuery [data](http://api.jquery.com/data/#data2)的自动转换功能：

```
var option = $this.data('value-max'); 
```

但就我个人而言，我尽量避免它（特别是考虑到 1.7 版本中的错误）并且我更喜欢明确。并且它不适用于您可以解析为数字的任何值：只有那些在数字上调用时给出相同确切字符串的值（例如`toString`，它会失败）。`"03"``"+03"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:09:09.387

清洁器：

```
$('input').keyup(function(e) {

    var max_value = $(this).data('value-max') * 1;

    if( this.value * 1 > max_value )
        this.value = max_value;

}); 
```

您在第一个示例中比较字符串，在第二个示例中您将字符串与整数 ( `10`) 进行比较。您希望将字符串转换为整数以进行预期比较。一种方法是`*1`我上面使用的。

最后`e.preventDefault()`不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:04:53.363

您的第二个示例是依靠 JavaScript 的类型强制进行比较。

您实际上在做的是测试`"3" > 10`哪个 JS 解释器是否意识到您正在尝试进行数字比较并将其在内部转换为`3 > 10`

如果您了解解释器将尝试和强制执行的内容，这很好......类似的例子是：

```
var x = 0;
if(x) { /* do stuff */ } //0 is a falsy (but not === false) value so the test will always fail

var y = "10";
console.log(y * 10) //outputs 100; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T14:04:28.487

我怀疑您的问题根源于弱类型和类型转换。试试这个：

```
 if(parseInt(val) > 10) { ... 
```

# excel - VBA 代码运行速度非常慢

> ID：15068718
> 
> 赞同：0
> 
> 时间：2013-02-25T13:59:58.740
> 
> 标签：excel, vba

我有一个可以持续很长时间的循环，虽然“Enheder”工作表只有 10 行，而我加载的数据集可能有 300 行，但当我尝试导入时，它需要很长时间。

```
 Public Function ImportData()
    Dim resultWorkbook As Workbook
    Dim curWorkbook As Workbook
    Dim importsheet As Worksheet
    Dim debugsheet As Worksheet
    Dim spgsheet As Worksheet
    Dim totalposts As Integer

    Dim year As String
    Dim month As String
    Dim week As String
    Dim Hospital As String
    Dim varType As String
    Dim numrows As Integer
    Dim Rng As Range
    Dim colavg As String
    Dim timer As String
    Dim varKey As String

    year = ImportWindow.ddYear.value
    month = ImportWindow.ddMonth.value
    week = "1"
    varType = ImportWindow.ddType.value
    Hospital = ImportWindow.txtHospital.value

    Set debugsheet = ActiveWorkbook.Sheets("Data")
    Set spgsheet = ActiveWorkbook.Sheets("Spørgsmål")
    Set depsheet = ActiveWorkbook.Sheets("Enheder")
    Set resultWorkbook = OpenWorkbook()
    setResultColVars debugsheet

    'set sheets
    Set importsheet = resultWorkbook.Sheets("Dataset")
    numrows = debugsheet.UsedRange.Rows.Count

    'make sure that the enhed can be found in the importsheet, so the units can be extracted accordingly
    If Not (importsheet.UsedRange.Find("afdeling") Is Nothing) Then
        Dim DepColumn
        Dim aCell
        DepColumn = importsheet.UsedRange.Find("afdeling").column

        'sort importsheet to allow meaningfull row calculations
        Set aCell = importsheet.UsedRange.Columns(DepColumn)
        importsheet.UsedRange.Sort Key1:=aCell, Order1:=xlAscending, Header:=xlYes

        Dim tempRange As Range
        Dim SecColumn
        Dim secRange As Range
        'find row ranges for departments
        Application.ScreenUpdating = False
'**Here's the loop that will go on for aaaaaages until I decide to ctrl+pause**

 For Each c In depsheet.UsedRange.Columns(1).Cells
    splStr = Split(c.value, "_")
    If UBound(splStr) = -1 Then
    ElseIf UBound(splStr) = 0 Then
    totalposts = totalposts + IterateColumns(GetRowRange(importsheet, DepColumn, splStr(0)), spgsheet, importsheet, debugsheet, year, month, week, Hospital, splStr(0), 0, varType, False)
    ElseIf UBound(splStr) = 1 And Not (importsheet.UsedRange.Find("afdeling_" & splStr(0)) Is Nothing) Then
    totalposts = totalposts + IterateColumns(GetRowRange(importsheet, importsheet.UsedRange.Find("afdeling_" & splStr(0)).column, splStr(1)), spgsheet, importsheet, debugsheet, year, month, week, Hospital, splStr(0), splStr(1), varType, False)
    End If
    Next
    Application.ScreenUpdating = True

    ' go through columns to get total scores
    totalposts = totalposts + IterateColumns(importsheet.UsedRange, spgsheet, importsheet, debugsheet, year, month, week, Hospital, 0, 0, varType, True)

    resultWorkbook.Close Saved = True

    ResultsWindow.lblPoster.Caption = totalposts
    ImportWindow.Hide
    ResultsWindow.Show
Else
    MsgBox "Kunne ikke finde afdelingskolonnen. Kontroller at der er er en kolonne med navnet 'afdeling' i dit datasæt"
End If

End Function

Function GetRowRange(sheetRange, column, value) As Range
'check for a valid section column
sheetRange.AutoFilterMode = False
sheetRange.UsedRange.AutoFilter Field:=column, Criteria1:=value
Set GetRowRange = sheetRange.UsedRange.SpecialCells(xlCellTypeVisible)
sheetRange.AutoFilterMode = False
End Function

'iterates through columns of a range to get the averages based on the column headers
Function IterateColumns(varRange As Range, spgsheet, importsheet, resultsheet, year, month, week, Hospital, dep, sec, varType, sortspg As Boolean)
Dim numrows
Dim totalposts
Dim usedRng
totalposts = 0
numrows = resultsheet.UsedRange.Rows.Count
Dim insert
insert = True
If Not (varRange Is Nothing) Then
' go through columns to get scores
For i = 1 To varRange.Columns.Count
    Dim tempi
    tempi = numrows + totalposts + 1

    Set Rng = varRange.Columns(i)
    With Application.WorksheetFunction
        'make sure that the values can calculate
        If (.CountIf(Rng, "<3") > 0) Then
            colavg = .SumIf(Rng, "<3") / .CountIf(Rng, "<3")
            insert = True
        Else
            insert = False
        End If
    End With

    'key is the variable
    varKey = importsheet.Cells(1, i)
    'only add datarow if the data matches a spg, and the datarow is not actually a department
    If (sortSpgs(varKey, spgsheet, sortspg)) And (insert) And Not (InStr(key, "afdeling")) Then
    resultsheet.Cells(tempi, WyearCol).value = year
    resultsheet.Cells(tempi, WmonthCol).value = month
    resultsheet.Cells(tempi, WweekCol).value = "1"
    resultsheet.Cells(tempi, WhospCol).value = "Newport Hospital"
    resultsheet.Cells(tempi, WdepCol).value = "=VLOOKUP(N" & tempi & ",Enheder!$A:$B,2,0)"
    resultsheet.Cells(tempi, WsecCol).value = "=IFERROR(VLOOKUP(O" & tempi & ",Enheder!$A:$B,2,0),"" "")"
    resultsheet.Cells(tempi, WdepnrCol).value = dep
    resultsheet.Cells(tempi, WsecnrCol).value = dep & "_" & sec
    resultsheet.Cells(tempi, WjtypeCol).value = varType
    resultsheet.Cells(tempi, WspgCol).value = varKey
    resultsheet.Cells(tempi, WsporgCol).value = "=VLOOKUP(H" & tempi & ",Spørgsmål!$D:$I,6,0)"
    resultsheet.Cells(tempi, WtestCol).value = ""
    resultsheet.Cells(tempi, Wsv1Col).value = colavg
    resultsheet.Cells(tempi, Wsv2Col).value = (1 - colavg)
    resultsheet.Cells(tempi, Wsv3Col).value = ""
    resultsheet.Cells(tempi, WgrpCol).value = "=VLOOKUP(H" & tempi & ",Spørgsmål!$D:$I,4,0)"

    totalposts = totalposts + 1
    End If
Next
End If
IterateColumns = totalposts
End Function

'Function that gets the workbook for import
Function OpenWorkbook()
    Dim pathString As String
    Dim resultWorkbook As Workbook

    pathString = Application.GetOpenFilename(fileFilter:="All Files (*.*), *.*")

    ' check if it's already opened
    For Each wb In Workbooks
        If InStr(pathString, wb.Name) > 0 Then
            Set resultWorkbook = wb
            Exit For
        End If
    Next wb

    If Not found Then
        Set resultWorkbook = Workbooks.Open(pathString)
    End If

    Set OpenWorkbook = resultWorkbook
End Function

'find column numbers for resultsheet instead of having to do this in every insert
Function setResultColVars(rsheet)
WyearCol = rsheet.UsedRange.Find("År").column
WmonthCol = rsheet.UsedRange.Find("Måned").column
WweekCol = rsheet.UsedRange.Find("Uge").column
WhospCol = rsheet.UsedRange.Find("Hospital").column
WdepCol = rsheet.UsedRange.Find("Afdeling").column
WsecCol = rsheet.UsedRange.Find("Afsnit").column
WdepnrCol = rsheet.UsedRange.Find("Afdelingsnr").column
WsecnrCol = rsheet.UsedRange.Find("Afsnitnr").column
WjtypeCol = rsheet.UsedRange.Find("Journaltype").column
WspgCol = rsheet.UsedRange.Find("spg").column
WsporgCol = rsheet.UsedRange.Find("spørgsmål").column
WtestCol = rsheet.UsedRange.Find("test").column
Wsv1Col = rsheet.UsedRange.Find("Svar 1").column
Wsv2Col = rsheet.UsedRange.Find("Svar 0").column
Wsv3Col = rsheet.UsedRange.Find("Svar 3").column
WgrpCol = rsheet.UsedRange.Find("Gruppering").column
End Function

Function sortSpgs(key, sheet, sortspg As Boolean)
If Not (sheet.UsedRange.Find(key) Is Nothing) Then
    If (sortspg) Then
        ResultsWindow.lstGenkendt.AddItem key
    End If
    sortSpgs = True
Else
    If (sortspg) Then
        ResultsWindow.lstUgenkendt.AddItem key
    End If
    sortSpgs = False
End If
End Function

Function Progress()
iProgress = iProgress + 1
Application.StatusBar = iProgress & "% Completed"
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:41:44.687

没有源文件很难调试。我看到以下潜在问题：

*   `GetRowRange`:`.UsedRange`可能会返回比您预期更多的列。通过在工作表中按`Ctrl`-检查`End`并查看最终结果
*   您的主要例程中的某些事情 -`depsheet.UsedRange.Columns(1).Cells`可能只会导致比预期更多的行
*   `someRange.Value = "VLOOKUP(...`将公式存储为文本。您需要`.Formula =`代替`.Value`（这不会解决您的长时间运行问题，但肯定会避免另一个错误）
*   在`sortSpgs`您将已知或未知项添加到控件中。不知道这些控件后面是否有任何事件代码，禁用事件`Application.EnableEvents=False`（最好在主子的开头加上`.ScreenUpdating = False`）
*   此外，`Application.Calculation = xlCalculationManual`在代码的开头和`Application.Calculation = xlCalculationAutomatic`结尾设置
*   你表演了很多`.Find`——尤其是。in `sortSpgs`- 这在大型工作表中可能很慢，因为它必须循环相当多的数据，具体取决于基础范围。

通常，还有一些“最佳实践评论”： *`Dim`变量类型正确，函数返回也一样 *`With obj`用于使代码更清晰。例如，`setResulcolVars`您可以`With rsheet.UsedRange`在接下来的 15 行左右使用和删除这部分 * 在小范围的模块中，可以在模块范围内调暗一些变量 - 尤其是。如果你每次打电话都交出他们。这将使您的代码更易于阅读

希望对您有所帮助... mvh / P。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:16:54.653

我的猜测是这`Application.Screenupdating`就是问题所在。
`if Not (importsheet.UsedRange.Find("afdeling") Is Nothing) Then`
您在:块内设置为 false 。因此，如果不是这种情况，则不会禁用屏幕更新。你应该把它移到函数的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T21:17:20.790

您还可以尝试将 usedrange 写入数组，使用它，并在需要时将其写回。

代码示例

```
dim MyArr() as Variant

redim MyArray (1 to usedrange.rows.count, 1 to usedrange.columns)
MyArray=usedrange.value

'calculating with Myarray instead of ranges (faster)

usedrange.value=myarray 'writes changes back to the sheet/range 
```

另外，也许您可​​以使用 .match 而不是 .find，这样更快。使用您使用的数组 application.match(SearchValue, Array_Name, False) '如果完全匹配则为 false

同样的事情适用于 range.find() ，成为 application.find()... 在进行如此大的更改之前，首先以新名称保存您的主工作簿...

# asp.net - 安装 ASP.NET 和 Web Tools 2012.2 后看不到新功能

> ID：15068729
> 
> 赞同：2
> 
> 时间：2013-02-25T14:00:36.427
> 
> 标签：asp.net, asp.net-mvc, breeze

安装 ASP.NET 和 Web Tools 2012.2 后，我看不到任何新功能（例如新的 MVC4 SPA 模板）。

最初，我是通过 Web Platform Installer 安装的，但在它不起作用后，我卸载了所有东西。然后我尝试安装发行说明 > 安装说明中提到的 2 个 MSI 单个软件包。成功安装后，我仍然看不到任何新功能。

我的平台是：

```
Microsoft Visual Studio Ultimate 2012
Version 11.0.60115.01 Update 2 CTP
Microsoft .NET Framework
Version 4.5.50709 
```

有任何想法吗？

## 澄清

我期待新模板显示在

```
New Project -> Visual C# -> Web -> ASP.NET MVC 4 Web Application (click ok) -> (shows only original 8 templates) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:47:16.657

ASP.NET 和 Web 工具 2012.2 更新**仅包含一个** [**SPA 模板。**](http://www.asp.net/single-page-application/overview/introduction/knockoutjs-template)

如果您想拥有其他 SPA 模板（如 HotTowel）**，您需要单独安装它们**：[知道除 Knockout 之外的库吗？](http://www.asp.net/single-page-application/overview/introduction/other-libraries)

从[宣布发布 ASP.NET 和 Web 工具 2012.2 更新：](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)这里是模板的一些链接：

> 如果您不想使用新的 Knockout 模板，则有 4 个社区创建的新模板。这些模板是使用改进的[自定义 MVC 模板](http://www.asp.net/vnext/overview/fall-2012-update/custom-mvc-templates)支持构建的：
> 
> *   [BreezeJS 模板](http://go.microsoft.com/fwlink/?LinkId=282649)，它使用 BreezeJS 和 Knockout 进行数据绑定和模板化
> *   [Ember 模板](http://go.microsoft.com/fwlink/?LinkId=282647)使用最新版本的 Ember 和 Handlebars
> *   [DurandalJS 模板](http://go.microsoft.com/fwlink/?LinkId=282648)是使用新的 MVVM 库 DurandalJS 以及 Knockout 构建的
> *   [Hot Towel](http://go.microsoft.com/fwlink/?LinkId=282646)使用 BreezeJS、DurandalJS、Knockout、require.js 和 Bootstrap

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T06:36:50.413

# 重要的

这些 MVC 模板已被弃用，并且在 VS 2013（或在 VS 2012.2 之后）中根本不起作用。请不要使用它们。

遗憾的是，它们不会更新，因为它们背后的 VSIX 方法已经失宠……主要是因为它很难编写和维护。

我们建议您从以下示例和视频开始。您可以从 John Papa 的两门课程[“使用 Angular 和 Breeze 构建应用程序 - 第 1 部分”](http://pluralsight.com/training/Courses/TableOfContents/build-apps-angular-breeze)和[“...第 2 部分”中学到很多东西](http://pluralsight.com/training/Courses/TableOfContents/build-apps-angular-breeze-part2)

# sql - 检查是否存在任何孩子

> ID：15068730
> 
> 赞同：0
> 
> 时间：2013-02-25T14:00:35.823
> 
> 标签：sql, sql-server

考虑这两个表：

> 位置（位置标识，位置文本，报告位置标识）
> 
> 用户（用户标识，位置标识）

如何在一个查询中检查用户是否有任何下属？甚至可能吗？

一个下属：如果有任何用户(b) 有用户(a) 的positionid 作为用户(b) 对应的positionid 报告给用户(b) 的positionid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:15:46.080

这将返回有下属的用户：

```
SELECT *
FROM   User u
WHERE  EXISTS (
           SELECT 1
           FROM   Position p
           WHERE  p.reportstopositionid = u.positionid
       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:06:38.580

我想你想用一个`where`子句来做到这一点：

```
select u.*
from user u
where u.positionId in (select reportstopositionid from position p) 
```

这将获取匹配的用户列表，没有重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:03:20.077

这个怎么样？

```
SELECT  DISTINCT a.*
FROM    user a
        INNER JOIN position b
            ON a.userID = b.reportstopositionID 
```

此查询返回的记录是在列的表上`userid`具有匹配 ID 的记录`position``reportstopositionID`

# javascript - HTML 表格 - 使用 JS 的动态库计数 - 使用通配符的固定布局 - 列消失

> ID：15068737
> 
> 赞同：0
> 
> 时间：2013-02-25T14:00:54.067
> 
> 标签：javascript, html, css

...对不起我的英语

这是我的页面的[示例](http://jsfiddle.net/S5uqc/7/)。我有一个固定布局、100% 宽度和一列“尽可能宽”的表格。按钮正在添加列。当我拉伸页面宽度时，一切正常。但是当我添加列并将结果区域拉伸到更小的宽度时，列“2”变得越来越小到零。我可以解决这个问题吗？

代码：

**HTML：**

```
<table>
<thead>
    <tr>
        <th class="short">1</th>
        <th>2</th>
        <th class="long">3</th>
    </tr>
</thead>
<tr>
    <td>dummy dummy dummy dummy </td>
    <td>dummy dummy dummy dummy dummy </td>
    <td>dummy dummy dummy dummy dummy </td>
</tr>
<tr>
    <td>dummy dummy dummy dummy </td>
    <td>dummy dummy dummy dummy dummy </td>
    <td>dummy dummy dummy dummy dummy </td>
</tr> 
```

**CSS：**

```
table{
    table-layout:fixed;
    width:100%;
    min-width:200px;
}

td,th{
    border:1px solid black;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}

.short{
    width: 50px;
}

.long{
    width: 100px;
} 
```

**JS：**

```
$('document').ready(function(){
    $('#addCol').click(function(){
        var c = $("table thead th").length;
        $("table thead tr").append("<th class=\"long\">" + (c+1) + "</th>");
        $("table tr:gt(0)").append("<td>dummy dummy dummy dummy dummy </td>");
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:25:43.353

对于表格单元格，最小宽度是未定义的。这让您有两个选择：

1.  每次添加一列时计算单元格宽度。当列太多时，是时候为第二列添加宽度属性了。

2.  使第二列成为最后一列。如果组合宽度小于表格的宽度，则最后一列填充表格的其余部分，即使此列具有宽度属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:39:12.143

将您的 css 部分更新为此并检查，使用 % 设置宽度是实现[此](http://jsfiddle.net/S5uqc/12/)目的的最佳方法。

```
table{
    table-layout:fixed;
    width:100%;
}

td,th{
    border:1px solid black;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width:100%;
}
.short{
    width: 50%;
}

.long{
    width: 150%;
} 
```

# jquery - Magento：简单的 jQuery 问题

> ID：15068739
> 
> 赞同：2
> 
> 时间：2013-02-25T14:01:00.533
> 
> 标签：jquery, magento

我有一个使用 jQuery 的 magento 主题，它运行时没有任何问题。当我尝试添加更多 jQuery 文件以供我在每个页面上添加的自定义 html 代码使用时，就会出现问题。

`head.phtml`我在（位于 `app/design/frontend/default/MY_THEME/template/page/html/head.phtml`：）中添加了我的 jQuery 文件

这是我`head.phtml`在文件中添加的内容（使用[此处建议](http://www.fontis.com.au/blog/magento/using-jquery-magento)的方法）：

```
<!-- adding jQuery -->
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.cookie.js"></script>
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.cycle.all.latest.js"></script>
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.min.js"></script>
<script type="text/javascript">
//<![CDATA[
     var $j = jQuery.noConflict();
//]]>
    </script>

<!-- ************* --> 
```

我尝试使用的 jQuery 文件是：

1.  [jquery.cookie.js](http://www.boozzr.com/jq/jquery.cookie.js)
2.  [jquery.cycle.all.latest.js](http://www.boozzr.com/jq/jquery.cycle.all.latest.js)
3.  [jquery.min.js](http://www.boozzr.com/jq/jquery.min.js)

现在，我的 chrome 控制台出现以下错误：

*   `Uncaught ReferenceError: jQuery is not defined`对于 `jquery.cookie.js`，第 72 行。

*   `Uncaught ReferenceError: jQuery is not defined`对于
    `jquery.cycle.all.latest.js`，第 10 行。

*   `Uncaught TypeError: Property '$s' of object [object Window] is not a function`对于这一行：`$s(document).ready(function(){....}`在
    我试图包含在每个页面上的自定义 html 代码中。

另一方面：

[这是](http://boozzr.com/testing321/js/lof_slider/jquery.easing.js)我的主题正在使用的 jquery 文件的示例，它运行没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:07:04.027

您应该在导入 jQuery 脚本后导入使用 jQuery 的脚本。

```
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.min.js"></script>
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.cookie.js"></script>
<script type="text/javascript" src="http://www.boozzr.com/jq/jquery.cycle.all.latest.js"></script> 
```

# spring - 使用 Mockito 进行 Spring 控制器测试

> ID：15068740
> 
> 赞同：1
> 
> 时间：2013-02-25T14:01:05.070
> 
> 标签：spring, spring-mvc, mocking, mockito

我正在尝试使用 Mockito 测试我的 Spring 控制器，但如果不做所有@Mock，我实际上无法做到这一点。此外，测试方法返回 NullPointerException，因为它看不到用户，实际上根本看不到用户角色。有没有办法以某种方式测试我的控制器？

（控制器类）

```
@Controller
@SessionAttributes("user")
@RequestMapping("/login.htm")
public class LoginController{

    @Autowired
    private UserDao userDao;
    @Autowired
    private LoginValidator loginValidator;

    public LoginValidator getLoginValidator() {
        return loginValidator;
    }

    public void setLoginValidator(LoginValidator loginValidator) {
        this.loginValidator = loginValidator;
    }

    public UserDao getUserDao() {
        return userDao;
    }

    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }

    @RequestMapping(method = RequestMethod.GET)
    public String getSendEmptyForm(ModelMap model, HttpServletRequest req) {
        req.getSession().invalidate();
        model.addAttribute("loginForm", new LoginForm());
        return "login";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String postSubmittedForm(ModelMap model, @ModelAttribute("loginForm") LoginForm loginForm,
            BindingResult result, SessionStatus status) {
        //validate form
        loginValidator.validate(loginForm, result);

        if (result.hasErrors()) {
            return "login";
        } 

        User user = userDao.findByLogin(loginForm.getLogin());
        model.addAttribute("user", user);

        if (user.getRole().getName().equals("Admin")) {
            model.addAttribute("usersList", userDao.findAll());
            return "viewAllUsersPage";
        } 

        if (user.getRole().getName().equals("User")){
            return "userPage";
        }

        model.addAttribute("error", "Your role is not User or Admin");
        return "errorPage";
    }

} 
```

还有我的测试课

```
@RunWith(MockitoJUnitRunner.class) 
public class LoginControllerTest {

    @InjectMocks
    private LoginController controllerUT = new LoginController();

    @Mock
    private ModelMap model;

    @Mock
    private LoginForm loginForm;

    @Mock
    private BindingResult result;

    @Mock
    private SessionStatus status;

    @Mock
    private LoginValidator validator;

    @Mock
    private UserDao userDao;

    @Mock
    private User useк;

    @Test
    public void testSendRedirect(){
        final String target = "login";
        String nextPage = controllerUT.postSubmittedForm(model, loginForm, result, status);
        assertEquals(target, nextPage);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:46:32.367

首先，您似乎缺少对`loginForm.getLogin()`and`userDao.findByLogin(loginForm.getLogin())`和的存根`user.getRole().getName()`。如果没有这样的存根，在模拟上调用的这些方法将返回一个默认值（即`null`）。

所以你可能想添加：

```
when(loginForm.getLogin()).thenReturn(login);
when(userDao.findByLogin(login)).thenReturn(user);
when(user.getRole()).thenReturn(role);
when(role.getName()).thenReturn("Admin"); 
```

您将希望为不同的测试改变返回值。根据用户和角色的实现类，您可以简单地提供真实实例。对于模拟结果有错误的测试，您需要添加此存根：

```
when(result.hasErrors()).thenReturn(true); 
```

因为否则`false`返回默认值。

# networking - 是否可以通过套接字将一个位从一台计算机发送到另一台计算机？

> ID：15068741
> 
> 赞同：1
> 
> 时间：2013-02-25T14:01:17.577
> 
> 标签：networking, packets

我正在做一个项目，我必须以位发送数据。

是否可以通过互联网从一台计算机向另一台计算机发送 1 位。大多数人对我说最小互联网数据包大小为 64 字节。如果我从一台计算机向另一台计算机发送 1 位，则数据包带宽为 64 字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:08:56.597

TCP 或 UDP 数据包由标头和数据组成。也许你可以在数据部分有一点数据，但你也需要标题。如果没有标头，就不可能发送数据包。标头包含将数据包发送到它应该去的地方并确保它安全到达所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T14:33:44.403

我将根据您给出的值将“互联网数据包”表示为以太网帧。

一个以太网帧的最小总大小为 64 字节，包括报头和有效负载，这是为了确保传输单个帧的时间大于节点之间的往返时间。

此要求是使用 CSMA/CD（特别是 CD（冲突检测）部分）的任何网络的一个特征，它允许传感节点在仍然传输帧的同时检测冲突。

虽然以太网可用于发送小于 64 字节的帧，但将添加“填充”以确保该帧至少为 64 字节。

# c# - ForEach 和 foreach

> ID：15068742
> 
> 赞同：1
> 
> 时间：2013-02-25T14:01:17.507
> 
> 标签：c#, foreach

我正在尝试将多个字符串添加到 C# 中的 MailAddress 中。

如果我要使用`ForEach`，我的代码看起来像

```
 foreach (var item in GetPeopleList())
        {
            m.Bcc.Add(new MailAddress(item.EmailAddress));
        } 
```

我现在正试图用我的 foreach （即`List.ForEach()`）来做到这一点，但我做不到。

```
 public class Person
    {
        public Person(string firstName, string lastName, string emailAddress)
        {
            FirstName = firstName;
            LastName = lastName;
            EmailAddress = emailAddress;
        }

        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string EmailAddress { get; set; }
    }

        static void Main(string[] args)
        {
            MailMessage m = new MailMessage();
            List<Person> people = GetPeopleList();

            m.Bcc.Add(people.ForEach(Person people =>
                {
                    //what goes here?
                }
            ));
        }

        private static List<Person> GetPeopleList()
        {
            List<Person> peopleList = new List<Person>();
            //add each person, of type Person, to the list and instantiate the class (with the use of 'new')
            peopleList.Add(new Person("Joe", "Bloggs", "Joe.Bloggs@foo.bar"));
            peopleList.Add(new Person("John", "Smith", "John.Smith@foo.bar"));
            peopleList.Add(new Person("Ann", "Other", "Ann.Other@foo.bar"));
            return peopleList;
        } 
```

我已经尝试了几个版本/变体，但我显然做错了。我阅读了[Eric Lippert 的页面](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)，遗憾的是这也没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:04:27.103

你需要类似的东西

```
people.ForEach(Person p => {
    m.Bcc.Add(new MailAddress(p.EmailAddress));
}); 
```

您不是添加使用 选择的单个项目范围，而是在列表中`ForEach`添加单个项目`ForEach`人员。

也就是说......我自己更喜欢常规`foreach`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:05:17.523

直接引用博客：

> 第二个原因是这样做会给语言增加零新的表示能力。这样做可以让你重写这个非常清晰的代码：
> 
> foreach(Foo foo in foos){ 涉及 foo 的语句；}
> 
> 进入这段代码：
> 
> foos.ForEach((Foo foo)=>{ 涉及 foo 的语句; });
> 
> 它以稍微不同的顺序使用几乎完全相同的字符。然而第二个版本更难理解、更难调试，并且引入了闭包语义，从而可能以微妙的方式改变对象的生命周期。

Eric Lippert 明确呼吁不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:07:04.800

尝试

```
people.ForEach(Person person =>
    {
        m.Bcc.Add(new MailAddress(person.EmailAddress));
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T14:04:12.953

我不知道我是否理解正确，但请尝试：

```
foreach (var item in GetPeopleList())
{
    m.Bcc.Add(item.EmailAddress));
} 
```

您在代码中创建了一个新的电子邮件地址，但这不是必需的，因为您已经从`item`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T14:52:28.523

Linq 聚合可以给出一个很好的解决方案。

```
 MailMessage m = new MailMessage();
        GetPeopleList().Aggregate((result, iter) =>
            {
                m.Bcc.Add(new MailAddress(iter.EmailAddress));
                return result;
            }); 
```

# jquery - 在 jquery 页面中显示 jqplot

> ID：15068743
> 
> 赞同：0
> 
> 时间：2013-02-25T14:01:20.010
> 
> 标签：jquery, cordova, jqplot

我正在使用Phonegap（Cordova）做一个应用程序，为此我正在使用jquery mobile。我用一些数据库创建了一个动态 jqplot，问题是：该图未显示在我的页面上，但如果我重新加载页面（在 Chrome 中使用 F5）它会出现但我想自动重新加载它或其他解决方案为了看剧情。（我已经尝试使用 window.location.reload 但它会将我重定向到第一页，而我的情节在另一页）谢谢！

```
<script class="code" type="text/javascript">
var dia = 2;
var plot2;
var line1=[[]];
var ultimopeso;
var dia_registro_global=0;
// PhoneGap code 
x$(document).on("deviceready", function () {

}); 

var listElement = x$('#devuelvepeso');
var messageElement = x$('#devuelvefecha');
var db;

x$('#saveItems').on('click', function(e) {
    insertItem();
});

// Create a reference to the database
function getDatabase() {
return window.openDatabase("Seguimiento","1.0", "Seguimiento Database", 200000);
}

onDeviceReady();
// PhoneGap is ready
function onDeviceReady() {
        db = getDatabase();
        db.transaction(function(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS SEGUIMIENTO(id INTEGER PRIMARY KEY AUTOINCREMENT, reportPeso)');
}, databaseError, getItems);
}

// Insert a record into the database
function insertItem() {
var insertValue = document.getElementById('reportPeso').value;
db.transaction(function(tx) {tx.executeSql('INSERT INTO SEGUIMIENTO(reportPeso) VALUES ("' + insertValue + '")');
}, databaseError, getItems);

}

// Database error handler
function databaseError(error) {
messageElement.html("SQL Error: " + error.code);
}

// consulta bbdd
function getItems() {
    db.transaction(function(tx){
    tx.executeSql('SELECT * FROM SEGUIMIENTO', [], querySuccess, databaseError);
}, databaseError);

}

function querySuccess(tx, result) {

    for (var i = 0; i < result.rows.length; i++) {
        var row = result.rows.item(i);
        line1.push([row.id, parseInt(row.reportPeso)]); 
        ultimopeso = row.reportPeso;
    }
}
$(window).load(function(){

reset_dia();
var len;

plot2 = $.jqplot ('chart1', [line1], {
  title: 'Seguimiento del peso',
  axesDefaults: {
    labelRenderer: $.jqplot.CanvasAxisLabelRenderer
  },
  axes: {
    xaxis: {
      label: "Semana",
      pad: 0
    },
    yaxis: {
      label: "Peso"
    }
  }

});
}) 
```

[这里还有一个 'div data-role="page"']

```
<div data-role="page" id="seguimiento"  >
<div data-role="navbar"  >
        <ul>
    <li><a href="#midieta"><img src="images/menu/lista_dietas_logo-01-01.png"></a></li>
    <li><a href="#lista" ><img src="images/menu/mi_dieta_logo-01.png"></a></li>
    <li><a href="#perfil" onClick="cargar_datos_perfil();"><img src="images/menu/perfil_logo-01.png"></a></li>
    <li><a href="#pro"><img src="images/menu/lista_dietas_logo-01-01.png"></a></li>
    <li><a href="#seguimiento"  class="ui-btn-active ui-state-persist" onClick="recargagrafico()"><img src="images/menu/seguimiento_logo-01.png"></a></li>
    <li><a href="#preguntas"><img src="images/menu/preguntas_logo-01.png"></a></li>
  </ul>
</div>
<div data-role="header"  >
 <h1>Seguimiento</h1>
</div>
<div data-role="content"  >

<div id="chart1" style="height:50%; width:100%;">

</div>
<!--<pre class="code prettyprint brush: js"></pre>-->
</div>
<div data-role="footer"  >
   <h4>x</h4>
   </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T03:45:58.793

对于我的情况，我使用

```
$(document).on('pageshow','#seguimiento',function(){ 
```

能够显示 jqplot，我使用：

```
<script type="text/javascript" src="plugins/jqplot.highlighter.min.js"></script>
<script type="text/javascript" src="plugins/jqplot.cursor.min.js"></script>
<script type="text/javascript" src="plugins/jqplot.dateAxisRenderer.min.js"></script> 
```

在我的 phonegap 项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:51:49.153

我终于得到了解决方案！显示页面时使用 .live() 创建我的绘图。谢谢！

```
$('#seguimiento').live('pageshow', function() {

   plot2 = $.jqplot ('chart1', [line1], {
     title: 'Seguimiento del peso',
     axesDefaults: {
      labelRenderer: $.jqplot.CanvasAxisLabelRenderer
  },
  axes: {
    xaxis: {
      label: "Semana",
      pad: 0
    },
    yaxis: {
      label: "Peso"
    }
  }

}); 
```

});

# ios - 如何从 UICollectionView 中的索引路径正确获取索引？

> ID：15068749
> 
> 赞同：10
> 
> 时间：2013-02-25T14:01:50.103
> 
> 标签：ios

我有一个一维图像数组，我将它们提供给 UICollectionView。集合视图只是由数组中的元素组成的一个部分。当我单击一个单元格`-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath;`并被触发并从 indexPath 中打印出来时，我得到了第 0 行中元素 0 的值，例如 [0,0]，但是该行中的下一个元素是 [0,5]。

如何将 indexPath 映射到我的数组，就像`UITableView`[indexPath row] 直接匹配到相应索引的方式一样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T14:11:25.293

我从未使用过它们，但我的理解是 UICollectionView 的 indexPath 的两个属性是部分和项目，而不是像 UITableView 中的部分和行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-07T12:41:08.927

要检索项目索引，您需要使用 indexPath.item（用于 UICollectionView）而不是 indexPath.row（用于 UITableView）

# c++ - IID_IMediaControl 停止时卡住

> ID：15068756
> 
> 赞同：0
> 
> 时间：2013-02-25T14:02:23.470
> 
> 标签：c++, directshow

我正在使用 DirectShow 来捕获视频。我将相机连接到样本采集器并保存我得到的图像。

在以下代码中，我将**IID_ICaptureGraphBuilder2**连接到连接到样本采集器 ( **ISampleGrabber** )的捕获设备 ( **CLSID_VideoCaptureSources** )。该图连接到**IID_IMediaControl**。我使用 IID_IMediaControl 运行和停止。大多数情况下，停止会卡住。有某种僵局。我尝试添加**IID_IMediaEvent**和 m_pEvent->WaitForCompletion(INFINITE, &evCode); 但它仍然不起作用。暂停工作没有问题，但是在尝试停止软件时卡住了

 ******构建图表

```
 ICaptureGraphBuilder2   *pBuilder;
    IBaseFilter             *pCamera;
    IPin                    *pOutPin;
    IPin                    *pInPin;
    IBaseFilter     *pSampleGrabberFilter;
    IBaseFilter     *pNullRendererFilter;
    ISampleGrabber  *pSampleGrabber;

    HRESULT hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **)&m_pGraph); 
    hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER, IID_ICaptureGraphBuilder2, (LPVOID*)&pBuilder);
    CHECK_HR(hr, L"Can't create Capture Graph Builder");

    hr = pBuilder->SetFiltergraph(m_pGraph);
    CHECK_HR(hr, L"Can't SetFiltergraph");

    pCamera = CreateFilterByName(pCaptureDeviceName, CLSID_VideoCaptureSources);

    WCHAR err[256];
    wsprintf(err, L"Can't add Camera '%s' to graph", pCaptureDeviceName);

    hr = m_pGraph->AddFilter(pCamera , pCaptureDeviceName);
    CHECK_HR(hr, err);

    WCHAR filterName[256];

    pOutPin = GetPinCapture(pCamera, L"Capture", i);
    if (!pOutPin)
        continue;
    IAMStreamConfig *pConfig = NULL;
    hr = pOutPin->QueryInterface(IID_IAMStreamConfig, (void**)&pConfig);
    CHECK_HR(hr, L"Can't get configuration");

    AM_MEDIA_TYPE *pmt = NULL;
    pConfig->GetFormat(&pmt);

    VIDEOINFOHEADER *pFrmt = (VIDEOINFOHEADER *)pmt->pbFormat;
    pFrmt->bmiHeader.biWidth = 1920;
    pFrmt->bmiHeader.biHeight = 1080;

    pConfig->SetFormat(pmt);
    SAFE_RELEASE(pConfig);
    SAFE_RELEASE(pOutPin);

   // Create a sample grabber
    wsprintf(filterName, L"Sample Grabber %d", i);

    // Create a sample grabber
    hr = CoCreateInstance(CLSID_SampleGrabber, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void **)&pSampleGrabberFilter);
    CHECK_HR(hr, L"Unable to create sample grabber filter");

    // Initialize sample grabber

    hr = pSampleGrabberFilter->QueryInterface(IID_ISampleGrabber, (void **)&pSampleGrabber);
    CHECK_HR(hr, L"Unable to get sample grabber");

    hr = pSampleGrabber->SetMediaType(pmt);
    CHECK_HR(hr, L"Unable to set media type");

    hr = pSampleGrabber->SetBufferSamples(false);
    CHECK_HR(hr, L"Unable to set buffer samples!");

    hr = pSampleGrabber->SetOneShot(false);
    CHECK_HR(hr, L"Unable to set one shot!");

    // Add the sample grabber to the graph
    hr = m_pGraph->AddFilter(pSampleGrabberFilter, filterName);
    CHECK_HR(hr, L"Unable to add sample grabber to graph");

    pOutPin = GetPinCapture(pCamera, L"Capture", i);
    pInPin = GetPin(pSampleGrabberFilter, PINDIR_INPUT);
    hr = m_pGraph->ConnectDirect(pOutPin, pInPin, 0);
    CHECK_HR(hr, L"Unable to connect Camera to pSampleGrabberFilter");
    SAFE_RELEASE(pOutPin);
    SAFE_RELEASE(pInPin);

    wsprintf(filterName, L"Null Renderer %d", i);
    // Create a null renderer
    hr = CoCreateInstance(CLSID_NullRenderer, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,(void **)&pNullRendererFilter);
    CHECK_HR(hr, L"Unable to create null renderer filter");

    hr = m_pGraph->AddFilter(pNullRendererFilter, filterName);
    CHECK_HR(hr, L"Unable to add null renderer to graph");

    pOutPin = GetPin(pSampleGrabberFilter, PINDIR_OUTPUT);
    pInPin = GetPin(pNullRendererFilter, PINDIR_INPUT);

    hr = m_pGraph->ConnectDirect(pOutPin, pInPin, 0);

    SAFE_RELEASE(pOutPin);
    SAFE_RELEASE(pInPin);

    pFrmt = ((VIDEOINFOHEADER *)pmt->pbFormat);

    // Initialize the capture grabber
    m_pCapGrabber[i] = new CapGrabber(i);
    m_pCapGrabber[i]->SetVideoInfoHeader(pFrmt);
    m_pCapGrabber[i]->SetAttachGrabberCB(m_funcAttachGrabber);
    m_pCapGrabber[i]->SetWidth((int)pFrmt->bmiHeader.biWidth);
    m_pCapGrabber[i]->SetHeight((int)pFrmt->bmiHeader.biHeight);

    // Set the capture callback
    hr = pSampleGrabber->SetCallback(m_pCapGrabber[i], 1);

    SAFE_RELEASE(pSampleGrabberFilter);
    SAFE_RELEASE(pSampleGrabber);
    SAFE_RELEASE(pNullRendererFilter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:26:18.390

这个问题很典型，但它只是一种猜测，没有您需要找出的其他细节。启动多线程操作很容易，但是在停止它时，需要同步线程并且这样做不准确是死锁的典型原因 - 你所看到的。

要解决此问题，您通常会将调试器附加到相关进程并检查其调用堆栈。您将看到一个线程调用 stop 并在调用的深处处于休眠状态，等待其他事情发生。很可能还有另一个线程也在做一些可疑的事情。

它们上的线程、调用堆栈和模块会提示问题所在，并将问题隔离到特定的过滤器或库。更重要的是，您可能希望开始减少图表，暂时删除过滤器，直到您看到冻结已经消失，并且您识别出可疑过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:16:11.663

有时最好在停止图形之前暂停图形并等待状态更改。另请注意，根据 msdn stop 不会将图形位置重置为开头。

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd390178(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390178(v=vs.85).aspx)

所以要确保图表在停止后回到开头。我建议使用 SetPosition 接口。下面是我用来停止图表的一小段代码。我假设你有有效的媒体控制和媒体搜索界面。

```
 IMediaControl *m_pControl = NULL; 
    IMediaSeeking *m_pMediaSeek = NULL;
    //Assuming that you have valid media control interface and media seeking interface    using QueryInterface

    long long m_pStart = 0;
    m_pControl->Pause();
    m_pControl->GetState(1000, NULL);

    m_pMediaSeek->SetPositions(&m_pStart, AM_SEEKING_AbsolutePositioning, NULL,  AM_SEEKING_NoPositioning);
    m_pControl->Run();
    m_pControl->GetState(1000,NULL);

    m_pControl->Stop();
    m_pControl->GetState(1000,NULL); 
```******

# ruby - 在 Rails 3 中使用 Nokogiri 读取 XML 文件

> ID：15068759
> 
> 赞同：2
> 
> 时间：2013-02-25T14:02:33.173
> 
> 标签：ruby, xml, ruby-on-rails-3, xml-parsing, nokogiri

我在尝试遍历 XML 文件的一部分时遇到问题。我正在使用带有 Rails3 的 Nokogiri。

我正在阅读这个 XML 提要 - [http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml](http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml)

这是我的代码：

```
def save_rates

    # get the XML data form ECB URL
    file_handle = open('http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist-90d.xml')

    # get document xml string and create Nokogiri object
    doc = Nokogiri::XML(file_handle)

    # foreach date...
    doc.xpath("//Cube/Cube").each do |cube|

        raise cube.inspect # isn't being executed

        # foreach currency...
        cube.xpath("./Cube").each do |curr|
            # create DB entry
            Exchange.create(:currency=>curr.currency, :rate=>curr.rate, :record_date => cube.time)

        end
    end

end 
```

当我检查时，`doc`我可以看到 Nokogiri 对象。但是，当我尝试`cube.inspect`在第一个 .each 循环中加注时，它并没有触发。所以它让我相信我的道路是错误的：`//Cube/Cube`。

从我在 Nokogiri 教程中看到的其他示例中，路径与此类似。我的路径是错的还是我在这里做错了什么？

我是ruby n00b，所以请放轻松！

**更新**

这是XML的格式

```
<gesmes:Envelope xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01" xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref">
    <gesmes:subject>Reference rates</gesmes:subject>
    <gesmes:Sender>
    <gesmes:name>European Central Bank</gesmes:name>
    </gesmes:Sender>
    <Cube>
        <Cube time="2013-02-25">
            <Cube currency="USD" rate="1.3304"/>
            <Cube currency="JPY" rate="125"/>
            <Cube currency="BGN" rate="1.9558"/>
            <Cube currency="CZK" rate="25.52"/>
            <Cube currency="DKK" rate="7.4614"/>
            <Cube currency="GBP" rate="0.8789"/>
            ...
        </Cube>
        <Cube>
        <Cube time="2013-02-24">
            <Cube currency="USD" rate="1.3304"/>
            <Cube currency="JPY" rate="125"/>
            <Cube currency="BGN" rate="1.9558"/>
            <Cube currency="CZK" rate="25.52"/>
            <Cube currency="DKK" rate="7.4614"/>
            <Cube currency="GBP" rate="0.8789"/>
            ...
        </Cube>
    </Cube>
</gesmes:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:00:07.260

这里的问题是由于[XML 命名空间](http://nokogiri.org/tutorials/searching_a_xml_html_document.html#namespaces)。

在 XML 的根属性中有一个属性`xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref"`，它指定了默认命名空间。`Cube`元素在这个命名空间中，如果你只使用而不`Cube`指定命名空间，你将不会得到匹配。

要在 Nokogiri 中指定命名空间，您可以执行以下操作：

```
doc.xpath("//ecb:Cube/ecb:Cube", 'ecb' => "http://www.ecb.int/vocabulary/2002-08-01/eurofxref") 
```

在这里，我们为命名空间指定了前缀`ecb`，并在 XPath 表达式中使用了前缀。

在这种情况下，命名空间是根节点上声明的默认命名空间，Nokogiri 会`xmlns`为我们在前缀上声明它，所以我们可以使用更简单的：

```
doc.xpath("//xmlns:Cube/xmlns:Cube") 
```

这将导致与第一个相同的结果。

如果您对命名空间不感兴趣，一个更简单的可能性是使用[`remove_namespaces!`方法](http://nokogiri.org/Nokogiri/XML/Document.html#method-i-remove_namespaces-21)：

```
doc.remove_namespaces!
doc.xpath("//Cube/Cube") 
```

由于名称空间信息已被删除，因此结果与前两个示例不太一样，但它会为您提供您期望的节点。

# java - Java - 乒乓球游戏图形未出现

> ID：15068760
> 
> 赞同：0
> 
> 时间：2013-02-25T14:02:36.473
> 
> 标签：java, libgdx, vector-graphics

我一辈子都想不出如何在我的乒乓球游戏窗口上创建一个填充的白色矩形。我遵循了有关使用 ShapeRenderer 类的基本教程（[https://www.youtube.com/watch?v=_MAi2H6lf0A](https://www.youtube.com/watch?v=_MAi2H6lf0A)），但由于某种原因，该教程使用以下行 -

`ShapeRenderer.begin(ShapeRenderer.ShapeType.FilledRectangle)`

但是，我使用的 IDE 不理解 FilledRectangle 是什么，并引发无法解析的符号错误。

我已经导入了以下所有库：

```
import com.badlogic.gdx.*;
import com.badlogic.gdx.backends.lwjgl.*;
import com.badlogic.gdx.graphics.*;
import com.badlogic.gdx.graphics.glutils.*;
import com.badlogic.gdx.math.*; 
```

有谁知道我可以尝试解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:59:27.013

API最近发生了变化，所以而不是使用

```
shapeRenderer.begin(ShapeType.FilledRectangle); 
```

改用这个

```
shapeRenderer.begin(ShapeType.Filled); 
```

并使用

```
shapeRenderer.rect(x, y, w, h); 
```

绘制一个填充的矩形。有关详细信息，请参阅[ShapeRenderer.java](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/glutils/ShapeRenderer.java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:16:47.463

基于[此](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.ShapeType.html#FilledRectangle)，FilledRectangle 是嵌套枚举 ShapeType 中的一个枚举值。但是[在](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.ShapeType.html)“睡衣”中，这个枚举值不存在。所以对库版本肯定有一些混淆。确保您在 IDE 中使用与视频中相同的版本（我没有观看视频）。

# java - 将日期转换为日历问题

> ID：15068762
> 
> 赞同：1
> 
> 时间：2013-02-25T14:02:41.717
> 
> 标签：java, date, calendar

今天是 2013-02-25，但为什么这段代码返回 2013-03-25？

```
 String currentDate =  new SimpleDateFormat("yyyy MM dd hh mm ss").format(new java.util.Date());
       System.out.println("current Date "+currentDate);
       StringTokenizer  token = new StringTokenizer(currentDate);
       Calendar cal = Calendar.getInstance();
       cal.set(Integer.parseInt(token.nextToken()),
               Integer.parseInt(token.nextToken()), 
               Integer.parseInt(token.nextToken()), 
               Integer.parseInt(token.nextToken()),
               Integer.parseInt(token.nextToken()),
               Integer.parseInt(token.nextToken()));
       String calenderDate = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").format(cal.getTime());
       System.out.println("calender date "+calenderDate);
       cal.add(Calendar.MONTH, -1); //  set to one month ago
       String pastDate = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").format(cal.getTime());
       System.out.println("past Date "+pastDate); 
```

> 输出
> 
> 当前日期 2013 02 25 04 56 26
> 
> 日历日期2013-03-25 04:56:26
> 
> 过去日期 2013-02-25 04:56:26

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:03:54.253

月减一。所以它适用于[API](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int%29)。IE：

> month - 用于设置 MONTH 日历字段的值。月份值从 0 开始。例如，0 表示一月。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:04:19.870

在 JDK 中，月份值以`0`. 所以`2`= 三月。

从[`Calendar#set`文档](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int,%20int%29)：

> `month`- 用于设置`MONTH`日历字段的值。月份值`0`基于 -。例如，`0`对于一月份。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T14:05:43.713

日历月从 0 开始，请参阅 JavaDoc：

> @param month 用于设置`MONTH`日历字段的值。* 月份值从 0 开始。例如，0 表示一月。

这是一个皇家 PITA，大多数 Java 开发人员在那个上浪费了一些时间，它肯定违反了最小意外原则。使用 Calendar 类时要非常小心......还有 Joda time 等替代方法。

# c# - 打开 PST 文件并存储元数据

> ID：15068767
> 
> 赞同：0
> 
> 时间：2013-02-25T14:03:09.270
> 
> 标签：c#, pst

我有大量的 PST，我需要能够打开它们并获取它们的元数据（发件人、日期、时间、消息、主题）。我尝试使用此处找到的代码 -[我可以在 C# 中读取 Outlook (2003/2007) PST 文件吗？](https://stackoverflow.com/questions/577904/can-i-read-an-outlook-2003-2007-pst-file-in-c)

到达线路时出现错误：

```
MAPIFolder rootFolder = outlookNs.Stores[pstName].GetRootFolder(); 
```

它不喜欢我的 pst 名称。

我希望能够遍历我所有的 pst，而不必担心文件路径和文件名是什么。这可能吗？

**编辑：**如果可能的话，我想最终将它放入 SQL 数据库中，但即使是平面文件（CSV 甚至 XML 或其他任何文件）也可以。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-24T15:59:44.063

不完全是关于您的错误，但您可以使用 XENA 将 PST 文件转换为 XML

[https://sourceforge.net/projects/xena/?source=directory](https://sourceforge.net/projects/xena/?source=directory)

# windbg - 启用 gcUnmanagedToManaged MDA 后应用程序未运行

> ID：15068771
> 
> 赞同：0
> 
> 时间：2013-02-25T14:03:30.690
> 
> 标签：windbg, heap-corruption

由于堆损坏，我通过系统环境变量启用了 gcUnmanagedToManaged MDA。不幸的是，我无法再运行我的应用程序了。我总是得到类似以下的东西：

```
(a78.1150): Unknown exception - code e053534f (first chance)
eax=00000000 ebx=00dff8ac ecx=00000000 edx=00000000 esi=00000003 edi=00000000
eip=7779013d esp=00dff85c ebp=00dff8f8 iopl=0         nv up ei pl zr na pe nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000246
ntdll!NtWaitForMultipleObjects+0x15:
7779013d 83c404          add     esp,4 
```

我所有的线程似乎都被杀死了（XXXX）：

```
0:002> !threads
ThreadCount: 5
UnstartedThread: 1
BackgroundThread: 3
PendingThread: 0
DeadThread: 0
Hosted Runtime: no
                                      PreEmptive   GC Alloc           Lock
       ID OSID ThreadOBJ    State     GC       Context       Domain   Count APT Exception
XXXX    1  c98 00401568      6020 Enabled  00000000:00000000 003c7698     4 STA
XXXX    2  4cc 0040be80      b220 Enabled  00000000:00000000 003c7698     0 MTA (Finalizer)
XXXX    3 1150 05525948      7220 Disabled 00000000:00000000 003c7698     0 STA System.StackOverflowException (0265106c)
XXXX    4  e2c 055778c0   200b220 Enabled  00000000:00000000 003c7698     1 MTA
XXXX    5    0 055b4a28      1600 Enabled  00000000:00000000 003c7698     0 Ukn 
```

一旦我摆脱`COMPLUS_MDA=gcUnmanagedToManaged`它，它就会按预期工作。我的系统是带有 .net 3.5 SP1 的 x86。

有什么提示吗？

更新：我也尝试调试它：

```
0:002> k 0xffff
ChildEBP RetAddr  
00eef8cc 757015e9 ntdll!NtWaitForMultipleObjects+0x15
00eef968 75091a2c KERNELBASE!WaitForMultipleObjectsEx+0x100
00eef9b0 75094220 KERNEL32!WaitForMultipleObjectsExImplementation+0xe0
00eef9cc 724a7821 KERNEL32!WaitForMultipleObjects+0x18
00eefa2c 724a777e mscorwks!DebuggerRCThread::MainLoop+0xe9
00eefa5c 724a76a5 mscorwks!DebuggerRCThread::ThreadProc+0xe5
00eefa8c 750933aa mscorwks!DebuggerRCThread::ThreadProcStatic+0x9c
00eefa98 777a9ef2 KERNEL32!BaseThreadInitThunk+0xe
00eefad8 777a9ec5 ntdll!__RtlUserThreadStart+0x70
00eefaf0 00000000 ntdll!_RtlUserThreadStart+0x1b 
```

# asp.net - 通过 servicestack 使用 asp.net 身份验证

> ID：15068774
> 
> 赞同：4
> 
> 时间：2013-02-25T14:03:47.457
> 
> 标签：asp.net, authentication, servicestack

我已经编写了几个带有表单身份验证的 ms lightswitch 应用程序 -> 这会在 sql server 中创建 aspnet_* 表。如何在服务堆栈 - 应用程序中使用定义的用户、密码，甚至成员资格、角色和应用程序权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:09:40.177

我尚未对此进行测试，但我认为它应该可以帮助您入门。很高兴在我的任何步骤上得到纠正。

我认为你需要做的事情..

*   为了对两个“系统”进行身份验证，您需要设置 Forms cookie 并保存您的 ServiceStack 会话。

而不是调用`FormsAuthentication.Authentiate()`做类似下面的事情。在您完成所有步骤之前，这将不起作用。

```
var apiAuthService = AppHostBase.Resolve<AuthService>();
apiAuthService.RequestContext = System.Web.HttpContext.Current.ToRequestContext();
var apiResponse = apiAuthService.Authenticate(new Auth
{
    UserName = model.UserName,
    Password = model.Password,
    RememberMe = false
}); 
```

*   创建一个子类`IUserAuthRepository`（用于从 aspnet_* 表中检索成员资格/用户/角色并填充 ServiceStack AuthUser）。

CustomAuthRepository.cs（不完整，但应该可以帮助您入门）

```
public class CustomAuthRepository : IUserAuthRepository
{
    private readonly MembershipProvider _membershipProvider;
    private readonly RoleProvider _roleProvider;

    public CustomAuthRepository()
    {
        _membershipProvider = Membership.Provider;
        _roleProvider = Roles.Provider;
    }

    public UserAuth GetUserAuthByUserName(string userNameOrEmail)
    {
        var user = _membershipProvider.GetUser(userNameOrEmail, true);
        return new UserAuth {FirstName = user.UserName, Roles = _roleProvider.GetRolesForUser(userNameOrEmail).ToList() //FILL IN REST OF PROPERTIES};
    }

    public bool TryAuthenticate(string userName, string password, out UserAuth userAuth)
    {
        //userId = null;
        userAuth = GetUserAuthByUserName(userName);
        if (userAuth == null) return false;

        if (FormsAuthentication.Authenticate(userName, password))
        {
            FormsAuthentication.SetAuthCookie(userName, false);
            return true;
        }

        userAuth = null;
        return false;
    }
//MORE METHODS TO IMPLEMENT...
} 
```

*   在 AppHost 配置方法中为 ServiceStack 连接身份验证。

    ```
    var userRep = new CustomAuthRepository();

    container.Register<IUserAuthRepository>(userRep);

    Plugins.Add(
        new AuthFeature(() => new AuthUserSession(),
            new IAuthProvider[] {
                new CredentialsAuthProvider() 
            }
        )); 
    ```

# javascript - 在 JavaScript 中自动插入分号而不解析

> ID：15068782
> 
> 赞同：4
> 
> 时间：2013-02-25T14:04:00.280
> 
> 标签：javascript, parsing, preprocessor, automatic-semicolon-insertion

我正在编写一个 JavaScript 预处理器，它会在必要的地方自动插入分号。不要问为什么。

现在我知道解决这个问题的一般方法是编写一个 JavaScript 解析器，并根据规范中的[规则](http://bclary.com/2004/11/07/#a-7.9.1 "ECMAScript 语言规范（HTML 版本）")在必要时添加分号。但是我不想这样做，原因如下：

1.  我不想写一个成熟的解析器。
2.  我想保留评论和空白。

我已经（正确地）使用简单的扫描仪实现了自动分号插入的第二条和第三条规则。

然而，第一条规则被证明是实施起来更具挑战性。所以我有三个问题：

1.  是否可以使用带有前瞻和后视的简单扫描仪来实现第一条规则？
2.  如果可能，那么有人已经做到了吗？
3.  如果不是那么我应该如何解决这个问题？

为了完整起见，这里是三个规则：

> *   当从左到右解析程序时，遇到任何语法生成都不允许的标记（称为*违规标记*）时，如果出现以下一项或多项，则在违规标记之前自动插入分号条件为真：
>     
>     
>     1.  违规标记与前一个标记至少有一个*LineTerminator*分开。
>         
>         
>     2.  有问题的令牌是**}**。
>         
>         
> *   当程序从左到右解析时，遇到输入令牌流的结尾，并且解析器无法将输入令牌流解析为单个完整的 ECMAScript *Program*，则在末尾自动插入分号输入流。
>     
>     
> *   当程序从左到右解析时，遇到某个语法产生式允许的记号，但产生式是*受限制的产生*式，并且该记号将是紧跟注释之后的终端或非终端的第一个记号"[no *LineTerminator* here]" 在受限产生式中（因此这样的记号被称为受限记号），并且受限记号与前一个记号至少有一个*LineTerminator*分隔，然后在受限记号前自动插入分号.
>     
>     
> 
> 但是，前面的规则还有一个额外的覆盖条件：如果分号随后将被解析为空语句，或者如果该分号将成为**for**语句标题中的两个分号之一（部分[12.6.3](http://bclary.com/2004/11/07/#a-12.6.3) )。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:22:16.340

仅使用扫描仪（标记器）无法实现您想要的。这是因为要回答“我们这里需要分号吗？” 您需要回答“下一个标记是*违规标记*吗？” 要回答这个问题，您需要一个 JavaScript 语法，因为违规标记被定义为该语法在此位置不允许的东西。

我在创建所有标记的列表方面取得了一些成功，然后在第二步中处理了该列表（所以我会有一些上下文）。使用这种方法，您可以通过编写如下代码来修复某些地方：

*   向后迭代标记（从最后一个开始，朝向文件的开头）
*   如果当前令牌是`IF`, `FOR`, `WHILE`,`VAR`等：
    *   跳过标记前的空格和注释
    *   如果当前令牌不是`;`，则插入一个

这种方法有效，因为错误不是随机的。人们总是犯同样的错误。大多数时候，人们会忘记`;`行尾之后，而在关键字之前寻找缺失`;`是找到它们的好方法。

但这种方法只会让你走这么远。如果您必须可靠地找到所有丢失的分号，则必须编写一个 JavaScript 解析器（或重用现有的解析器）。

# scala - 对附加到列表感到困惑

> ID：15068784
> 
> 赞同：0
> 
> 时间：2013-02-25T14:04:02.560
> 
> 标签：scala

我创建一个这样的列表：

```
var multiList : List[MyObj] = Nil 
```

要将对象附加到此列表，我使用：

```
multiList = multiList ::: List(MyObj) 
```

这有效，但我不应该使用

```
multiList = multiList ::: MyObj 
```

在这里我将一个对象附加到列表中，而在示例中（有效）它在语法上看起来好像我将一个新列表附加到一个列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:13:40.477

运算符的`:::`意思是连接，而不是附加。有`:+`元素附加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:16:42.833

该`::`方法用于将内容“添加”到列表中。`:::`运算符用于将一个列表添加到另一个列表。以`::`冒号结尾，因此是“右结合”，可以解释如下

x :: y

// 将被翻译成

y.::(x)

因此，要将您的对象添加到一个空列表中，您可以这样做

MyObj :: 无

// 将被翻译成

无::(MyObj)

如果您想将对象列表添加到空列表中，您可以这样做

List(MyObj, MyObj) ::: 无

// 将被翻译成

Nil.:::(List(MyObj, MyObj))

如果您确实想追加，可以使用该`:+`方法。然而，这对于不同类型的集合执行不同。有关性能的更多信息可以在这里找到：[性能特征](http://www.scala-lang.org/docu/files/collections-api/collections_40.html)

# asp.net - 扩展 ASP.NET MVC 4 MvcHandler

> ID：15068806
> 
> 赞同：0
> 
> 时间：2013-02-25T14:05:17.863
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

我正在尝试向默认的 MvcHandler 添加一些功能。发生的事情是：我想用破折号的 url 而不是 Pascal Case url。换句话说，如果我的控制器是 SomeController，我希望 URL 是 /some-controller 而不是 /SomeController。

我最好的解决方法是：我创建了一个映射文件 URLMappings.xml，它将每个控制器映射到每个所需的 URL。然后我扩展了默认 Route 类以基于此生成传出 url，并扩展默认 RouteHandler 以基于此理解 url。好吧，这很好用，因为即使没有创建一些映射，框架也会使用默认行为。

我的观点是：这样路由系统就可以理解这两种 Url，这会导致重复的内容 SEO 问题。然后我想实现以下内容：

1.  获取控制器值
2.  查看某些映射上的控制器名称是否与值匹配
3.  如果匹配，则有一些比输入的 URL 更可取的 URL，应该返回 404。

我在网上搜索过，我发现这样做的唯一方法是创建一个新的 IHttpHandler。但是我不想从头开始，因为我需要所有 MVC 功能。我只是想把这个逻辑放在 ProcessRequest 上，但是我的方法的覆盖版本没有被执行。

有人可以给我一些关于如何处理这个问题的想法吗？对不起，如果这个问题很愚蠢或者它不是很详细。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:09:19.610

您不需要 custom`MvcHandler`而是 custom `Route`。已经有一个用于此功能的 NuGet 包，称为[`LowercaseRoutesMVC`](http://nuget.org/packages/LowercaseRoutesMVC). 随意下载它，探索它[`source code`](http://lowercaseroutesmvc.codeplex.com/SourceControl/changeset/view/6b7b90c5784b#LowercaseRoute.cs)并在必要时进行调整（将破折号放在任何你想放置的地方）。

# c - 文件操作中的输出显示不正确

> ID：15068811
> 
> 赞同：0
> 
> 时间：2013-02-25T14:05:34.197
> 
> 标签：c, file

任何人都可以解释这段代码中的错误是什么。

```
#include<stdio.h>
int main() {
  FILE *f1;
  char c;
  f1 = fopen("INPUT", "w");
  while((c=getchar()) != '/')
    putc(c, f1);
  fclose(f1);
  f1 = fopen ("INPUT", "r");
  while ((c = getc(f1) != EOF))
    printf("%c", c); 
  fclose(f1);
} 
```

输出以无法检测的字体出现。我也在windows中试过。但同样的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:12:16.077

首先，`c`应该是一个`int`，而不是一个`char`。putc() 接受一个`int`，更重要的是，getc() 从流中读取下一个字符，并将其作为转换返回`unsigned char`到一个`int`，或文件末尾的 EOF 或错误。如果将其存储到 a`char`中，则会`EOF`丢失，因为`char`太窄且无法表示。获取（）

其次，这是错误的：

```
while ((c = getc(f1) != EOF)) 
```

你想要的是：

```
while ((c = getc(f1)) != EOF) 
```

你放错括号了。

请记住，您需要更改 printf() 调用，因为`c`现在是`int`：

```
printf("%c", (char)c); 
```

您需要显式转换，因为 printf() 是一个可变参数函数，因此编译器不执行自动类型转换。您需要使用可变参数函数手动转换。

# sql - 检查 ACCESS 中是否已经发生了更新

> ID：15068812
> 
> 赞同：2
> 
> 时间：2013-02-25T14:05:40.483
> 
> 标签：sql, ms-access, ms-access-2007

我正在使用以下代码，将多个表组合成 1 个名为的单个表`DB_Total`：

```
INSERT INTO DB_Total
SELECT *
FROM Tags_DI_DB; 
```

但是，如果我（不小心）执行此查询两次或三次，数据就会堆积起来。是否有可能检查新的“主表”中是否添加了表`DB_Total`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:07:37.107

```
INSERT INTO DB_TOTAL
SELECT  a.*
FROM    Tags_DI_DB a
        LEFT JOIN DB_TOTAL b
            ON a.colName = b.colName
WHERE   b.colName IS NULL 
```

`colName`唯一列在哪里

# matlab - 更改波德尼科尔斯图上数据提示的标签

> ID：15068821
> 
> 赞同：1
> 
> 时间：2013-02-25T14:06:10.450
> 
> 标签：matlab, plot

当我们绘制波德/尼科尔斯轨迹时，使用工作区变量的名称

```
tmp=ss(1,1,1,0);
nichols(tmp); 
```

将使用“tmp”作为标签。
![在此处输入图像描述](../Images/302c6f277bcd4643447ce03bd77c62a1.png) 当使用更复杂的数据时，matlab 使用 'untitled1','untitled2',...

```
tmp={ss(1,1,1,0) , ss(1.2,1,1,0)};
nichols(tmp{:}); 
```

![在此处输入图像描述](../Images/70efd02fe6c90a91b836b4327feff7fb.png) 如何以编程方式更改此标签？
理想情况下，我想要一个使用 Matlab 6.5.1 的解决方案，但我也对仅限于较新版本的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:57:18.633

您可以通过其图形句柄以编程方式修改标签。看起来您要更改的值是当前轴的某些子项的 DisplayName 属性。因此，在您的第一个示例中，我可以像这样更改显示名称：

```
ch = get(gca,'Children');
set(ch(1),'DisplayName','Fred'); 
```

一般来说，我不确定如何预测当前轴的哪些子项是您需要更改的子项。对于您给出的第二个示例，当我运行您的代码时，两条曲线似乎是第二个和第三个孩子。

# jquery - 变量属性的jQuery语法

> ID：15068822
> 
> 赞同：0
> 
> 时间：2013-02-25T14:06:14.213
> 
> 标签：jquery, syntax, var

我正在尝试压缩和优化一些代码，并具有以下我想压缩的类型，但无法获得正确的语法：

```
var my_field_name = $('#my_field_name'); // a multiple select
var my_array = {"0":"123","1","456","2":"789"};
my_array = $.parseJSON(my_array);
$.each(my_array, function (k, v) {
    $("#my_field_name option[value="+v+"]").prop("selected", true);
} 
```

到目前为止一切正常，但我“想”`my_field_name`在`$.each`循环中使用，`my_field_name.("option[value="+v+"]").prop("selected", true);`但这似乎是一个不正确的语法。是`$("#my_field_name option[value="+v+"]")`唯一的出路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:07:22.693

由于`my_field_name`是`select`元素的 jQuery 实例，您可以使用`children`它来访问它的`options`元素：

```
$.each(my_array, function (k, v) {
    my_field_name.children('option[value=' + v + ']').prop("selected", true);
} 
```

...但另见下文。

可能值得注意的是，您的`my_array`变量不指向数组。事实上，该行是一个语法错误（因为您在后面使用了逗号`"1"`而不是冒号）。（如果您使用了冒号，您将拥有一个带有键`"0"`、`"1"`和的对象`"2"`，但它不会是一个*数组*。当然，JavaScript 中的标准“数组”[根本不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)，但是...... ) 我想你想要：

```
var my_array = ["123", "456", "789"]; 
```

您也不要`$.parseJSON`在不是字符串的东西上使用。

**如果** `my_array`实际上最终成为一个*数组*（因为您已经按字面意思编写了它，或者因为它是从像`["123", "456", "789"]`.`children`

```
// Let's assume you get jsonString from somewhere else, and it's really a string,
// as though you had this code: jsonString = '["123", "456", "789"]'
var my_array = $.parseJSON(jsonString);
$.each($("#my_field_name")[0].options, function(index, option) {
    if ($.inArray(option.value, my_array) !== -1) {
        option.selected = true;
    }
}); 
```

`options`原始`select`DOM 元素上的属性（注意`[0]`获取原始元素）是一个具有`length`属性的类数组对象，因此`$.each`将使用索引对其进行循环。`$.inArray`然后将查看`option`'s`value`是否存在于数组中。您不需要使用`my_field_name`变量缓存查找，因为您只进行一次查找。

但请注意，如果 JSON 字符串是，那*将*`{"0": "123", "1": "456", "2": "789"}`不起作用，因为`$.inArray`它不适用于这样的非数组对象。

* * *

在下面回复您的评论：

> ...在您的示例中，您仍在使用 $("#my_field_name") ，这是我试图避免的，因为 $("#my_field_name") 已经缓存在脚本之上，尽管我想使用var 名称，而不是每次我需要引用该字段时重复 $("#my_field_name") 。

如果你*已经*在做

```
var my_field_name = $("#my_field_name"); 
```

...在代码上方，然后*自然*在此答案中的任何示例中，如果您看到`$("#my_field_name")`，您可以直接将其替换为`my_field_name`. 例如，如果您看到：

```
$.each($("#my_field_name")[0].options, function(index, option) { 
```

and you already have `my_field_name` in a variable, you can change it to this;

```
$.each(my_field_name[0].options, function(index, option) { 
```

# html - HTML 从列表中选择

> ID：15068826
> 
> 赞同：0
> 
> 时间：2013-02-25T14:06:21.310
> 
> 标签：html

我是一个 HTML 菜鸟，但是创建类似的东西的最简单方法是什么

![在此处输入图像描述](../Images/0b723f6264817f03429b17190351ad59.png)

我可以从更大的列表中进行选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:08:55.660

如果您是 HTML 的初学者，那么您可能希望从头开始。我不知道你的目标是什么，所以我无法调整我的答案。您要查找的元素称为 SELECT

[http://www.tizag.com/htmlT/htmlselect.php](http://www.tizag.com/htmlT/htmlselect.php)

如果你真的想让它像可用的选择菜单一样，你也可以看看 jQuery。尽管从您是 HTML 的初学者这一事实来看，这会有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:11:41.303

看看`<select multiple>`和事件处理程序。

您将需要其中两个，以及一些按钮/链接来将选择从一个移动到另一个。

您需要为这些按钮附加事件处理程序，以通过 javascript将所选按钮`<options>`从一个移动到另一个。`<select>`

# iphone - 如何获取局域网共享的设备和文件？

> ID：15068827
> 
> 赞同：2
> 
> 时间：2013-02-25T14:06:26.210
> 
> 标签：iphone, ios, objective-c, c, xcode

如何从 IPad 列出 LAN 上的网络共享设备。是否可以使用 Objective-c 以编程方式列出共享设备？ ![在此处输入图像描述](../Images/224083e870f505593848721da8fdbb5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:51:37.517

您如何将 iPad 连接到网络以及网络使用什么身份验证？一般来说，这需要后端服务连接到网络并通过 https 向 iPad 提供网络信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-27T05:54:49.290

使用 samba 库我们可以访问 LAN 设备文件或使用 445 端口的套接字可以访问 LAN 机器。

# google-maps-api-3 - Google Map API v.3 绘图库：在编辑折线期间触发事件

> ID：15068831
> 
> 赞同：1
> 
> 时间：2013-02-25T14:06:32.950
> 
> 标签：google-maps-api-3, google-maps-api-2, polyline

我正在将应用程序从 API v.2 移植到 API v.3

应用程序具有允许用户绘制折线的功能。每次插入新顶点时，路径长度都会更新。如何在 v.3 中执行此操作，因为绘图库仅在“polylinecomplete”上有事件。[此处](https://developers.google.com/maps/documentation/javascript/overlays#user_editable_shapes_events)描述的编辑事件只能用于现有的多段线。这并不让我高兴，因为只有在绘制完成后我才能收到我的折线对象......

```
 google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
        if (event.type == google.maps.drawing.OverlayType.POLYLINE) {
            my_polyline = event.overlay
            drawingManager.setMap(null);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T18:21:40.270

我知道这个问题很老了。以防万一有人遇到同样的问题： [编辑事件 api](https://developers.google.com/maps/documentation/javascript/overlays#user_editable_shapes_events)非常有用：

```
google.maps.event.addListener(your_polyline.getPath(), 'insert_at', function(index) {
// 当你在你的折线上插入一个新点时，做你喜欢的事。
});

google.maps.event.addListener(your_polyline.getPath(), 'set_at', function(index) {
// 当您在此处移动多段线上的现有点时，做您喜欢的事情。
});
```

# shell - 远程脚本执行产生错误

> ID：15068835
> 
> 赞同：0
> 
> 时间：2013-02-25T14:06:39.400
> 
> 标签：shell, ssh, remote-access

我在 Linux 机器上远程执行 groovy 脚本。这产生了我的错误

```
bash: -c: line 0: syntax error near unexpected token `(' 
```

我的命令是：

```
ssh user@11.11.11.11 '/home/lib/groovy-1.5.8/bin/groovy -cp jars/log4j.jar\:jars/commons-configuration.jar\:jars/spring.jar:\$(echo jars/c\*.jar | tr ' ' '\:') bin/CreateTable.groovy' 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:15:20.400

您不需要转义所有这些字符。试试这个：

```
ssh user@11.11.11.11 '/home/lib/groovy-1.5.8/bin/groovy -cp jars/log4j.jar:jars/commons-configuration.jar:jars/spring.jar:$(echo jars/c*.jar | tr " " ":") bin/CreateTable.groovy' 
```

# c# - 当您的网站托管在远程服务器上时，如何打开客户电子邮件？

> ID：15068837
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:06:42.130
> 
> 标签：c#, asp.net, email

如何从托管在远程服务器上的 asp.net 网站打开默认客户端电子邮件应用程序？

我有一个按钮，点击时应该这样做。我不能使用邮件和 smtp 设置，因为用户不知道他们公司的端口号等。

我尝试了 mailto，但这仅适用于您可能已经知道的本地主机。我可以修改 mailto 调用以达到我想要的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:14:16.577

好的，所以没有更多的抱怨或争吵，这就是我解决问题所需要的。

1.  什么代码错了？

    System.Diagnostics.Process.Start(@"mailto:email@domain.com&subject=Subject&body=Hi.....%0D%0DSent from Sender");

2.  为什么错了？

上面的代码正在服务器上执行，并没有打开客户端邮件应用程序。

3.  什么代码解决了这个问题？

    Response.Write("@window.open('mailto:email@domain.com&subject=Subject &body=Hi.......%0D%0DSent from sender','_blank');");

4.  为什么这样做？

[如何以编程方式单击带有 javascript 的链接？](https://stackoverflow.com/questions/902713/how-do-i-automatically-click-a-link-with-javascript)

[服务器端调用 mallito](http://bytes.com/topic/javascript/answers/577941-mailto-question)

# php - 定义连接变量是否明智？

> ID：15068840
> 
> 赞同：1
> 
> 时间：2013-02-25T14:06:52.107
> 
> 标签：php, definition

我今天在这里询问`define();`将变量连接到数据库是否明智。我的示例如下：

```
// Constants For Database 
define ("DBAHost", "localhost");
define ("DBAUsername", "xxx");
define ("DBAPassword", "xxx");
define ("DBADB", "xxx"); 
```

并处理了连接；

```
class ClassWork
{       
    public function AllowDB ($Arg1)
    {
        if ($Arg1 === 1)
        {
            $MySQLi = new mysqli(DBAHost, DBAUsername, DBAPassword, DBADB);
            return 'Success... ' . mysqli_get_host_info($MySQLi);
        }
        elseif ($Arg1 !== 1)
        {
            return 'Wrong Argument Please Consult The Documentation!';
        }
    }
} 
```

或者更确切地说修改接受数据库连接字符串以通过公共函数推送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:09:22.960

纯面向对象的方式是将任何需要的参数传递给类实例。

也就是说，根据您的需要，使用全局定义的数据库实例是可以接受的。请记住，如果不进行重构，您以后将无法轻松地处理多个数据库。使用这种方法，您有点自欺欺人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:11:08.750

你说的是常量，不是变量。
只使用一次的常量没有多大意义。
更好地使用设置创建一个数组并将其传递给您的数据库包装类。

# php - Json Ajax PHP 为 NULL

> ID：15068842
> 
> 赞同：0
> 
> 时间：2013-02-25T14:06:53.160
> 
> 标签：php, jquery, ajax, json, null

我得到一个带有地理定位 JavaScript 的数组，然后我想通过 ajax 将此数组传递给一个 php 脚本来处理它并返回一个处理过的数组。不幸的是，传递给 php 的数组似乎总是 NULL，我不知道为什么。

我的 JavaScript/jQuery：

```
dataArray = [];
        var lat = pos.coords.latitude;
        dataArray.push({'lat':lat});
        var lon = pos.coords.longitude;
        dataArray.push({'lon':lon});
        var identifier = 'ajax';
        dataArray.push({'identifier':identifier});
        console.debug(dataArray);

        $.ajax({
                async:   true,
                type:        'post',
                cache:       false,
                url:         'custom.php',
                data:        {myJson: dataArray},
                dataType   : 'json',
                success: function(data){
                    console.debug(data);
                    var json = $.parseJSON(data);
                    console.debug(json);
                    alert(json);
                }
        }); 
```

我的PHP：

```
$JSArray['array'] = json_decode($_POST['myJson'], true);
$_SESSION['jsonArray'] = $JSArray['array'];
var_dump($_SESSION); 
```

结果总是`["jsonArray"]=> NULL`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:25:21.443

试试这个。这个对我有用

```
 (function($){
if(navigator.geolocation){return;}
var domWrite = function(){
        setTimeout(function(){
            throw('document.write is overwritten by geolocation shim. This method is incompatible with this plugin');
        }, 1);
    },
    id = 0
;
var geoOpts = $.webshims.cfg.geolocation.options || {};
navigator.geolocation = (function(){
    var pos;
    var api = {
        getCurrentPosition: function(success, error, opts){
            var locationAPIs = 2,
                errorTimer,
                googleTimer,
                calledEnd,
                endCallback = function(){
                    if(calledEnd){return;}
                    if(pos){
                        calledEnd = true;
                        success($.extend({timestamp: new Date().getTime()}, pos));
                        resetCallback();
                        if(window.JSON && window.sessionStorage){
                            try{
                                sessionStorage.setItem('storedGeolocationData654321', JSON.stringify(pos));
                            } catch(e){}
                        }
                    } else if(error && !locationAPIs) {
                        calledEnd = true;
                        resetCallback();
                        error({ code: 2, message: "POSITION_UNAVAILABLE"});
                    }
                },
                googleCallback = function(){
                    locationAPIs--;
                    getGoogleCoords();
                    endCallback();
                },
                resetCallback = function(){
                    $(document).unbind('google-loader', resetCallback);
                    clearTimeout(googleTimer);
                    clearTimeout(errorTimer);
                },
                getGoogleCoords = function(){
                    if(pos || !window.google || !google.loader || !google.loader.ClientLocation){return false;}
                    var cl = google.loader.ClientLocation;
                    pos = {
                        coords: {
                            latitude: cl.latitude,
                            longitude: cl.longitude,
                            altitude: null,
                            accuracy: 43000,
                            altitudeAccuracy: null,
                            heading: parseInt('NaN', 10),
                            velocity: null
                        },
                        //extension similiar to FF implementation
                        address: $.extend({streetNumber: '', street: '', premises: '', county: '', postalCode: ''}, cl.address)
                    };
                    return true;
                },
                getInitCoords = function(){
                    if(pos){return;}
                    getGoogleCoords();
                    if(pos || !window.JSON || !window.sessionStorage){return;}
                    try{
                        pos = sessionStorage.getItem('storedGeolocationData654321');
                        pos = (pos) ? JSON.parse(pos) : false;
                        if(!pos.coords){pos = false;} 
                    } catch(e){
                        pos = false;
                    }
                }
            ;

            getInitCoords();

            if(!pos){
                if(geoOpts.confirmText && !confirm(geoOpts.confirmText.replace('{location}', location.hostname))){
                    if(error){
                        error({ code: 1, message: "PERMISSION_DENIED"});
                    }
                    return;
                }
                $.ajax({
                    url: 'http://freegeoip.net/json/',
                    dataType: 'jsonp',
                    cache: true,
                    jsonp: 'callback',
                    success: function(data){
                        locationAPIs--;
                        if(!data){return;}
                        pos = pos || {
                            coords: {
                                latitude: data.latitude,
                                longitude: data.longitude,
                                altitude: null,
                                accuracy: 43000,
                                altitudeAccuracy: null,
                                heading: parseInt('NaN', 10),
                                velocity: null
                            },
                            //extension similiar to FF implementation
                            address: {
                                city: data.city,
                                country: data.country_name,
                                countryCode: data.country_code,
                                county: "",
                                postalCode: data.zipcode,
                                premises: "",
                                region: data.region_name,
                                street: "",
                                streetNumber: ""
                            }
                        };
                        endCallback();
                    },
                    error: function(){
                        locationAPIs--;
                        endCallback();
                    }
                });
                clearTimeout(googleTimer);
                if (!window.google || !window.google.loader) {
                    googleTimer = setTimeout(function(){
                        //destroys document.write!!!
                        if (geoOpts.destroyWrite) {
                            document.write = domWrite;
                            document.writeln = domWrite;
                        }
                        $(document).one('google-loader', googleCallback);
                        $.webshims.loader.loadScript('http://www.google.com/jsapi', false, 'google-loader');
                    }, 800);
                } else {
                    locationAPIs--;
                }
            } else {
                setTimeout(endCallback, 1);
                return;
            }
            if(opts && opts.timeout){
                errorTimer = setTimeout(function(){
                    resetCallback();
                    if(error) {
                        error({ code: 3, message: "TIMEOUT"});
                    }
                }, opts.timeout);
            } else {
                errorTimer = setTimeout(function(){
                    locationAPIs = 0;
                    endCallback();
                }, 10000);
            }
        },
        clearWatch: $.noop
    };
    api.watchPosition = function(a, b, c){
        api.getCurrentPosition(a, b, c);
        id++;
        return id;
    };
    return api;
})();

$.webshims.isReady('geolocation', true);
    })(jQuery);

     jQuery(window).ready(function(){ 

navigator.geolocation.getCurrentPosition(successCallback,errorCallback,{timeout:10000});

function successCallback(pos) {

    $('#localstore').
    load("geo?latitude="+ pos.coords.latitude +"&longitude=" + pos.coords.longitude, function() 
    {
        $('#storefinder').hide();
        $('#localstore').show();
    });

}
function errorCallback(pos) {
    /*      
    $('#storefinder').show();
    $('#localstore').hide();
    */
}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:29:21.170

您的脚本可能在多个方面失败。我会测试每个步骤，看看它在哪里失败（通过一次注释掉一个回显语句）：

```
echo $_POST['myJson'];
$JSArray['array'] = json_decode($_POST['myJson'], true);
//echo $JSArray['array'];
$_SESSION['jsonArray'] = $JSArray['array'];
//var_dump($_SESSION); 
```

此外，您的 ajax 调用应该不包含`alert(data)`parseJSON，因为服务器没有发送回 JSON，它只是回显一个 var_dump：

```
$.ajax({
                async:   true,
                type:        'post',
                cache:       false,
                url:         'custom.php',
                data:        {myJson: dataArray},
                dataType   : 'html', // change back to json when you send json from server
                success: function(data){
                    console.debug(data);
                    //var json = $.parseJSON(data);
                    //console.debug(json);
                    //alert(json);
                    alert(data);
                }
        }); 
```

# resultset - *** 检测到 glibc *** ./test: free(): 无效指针：

> ID：15068845
> 
> 赞同：1
> 
> 时间：2013-02-25T14:07:02.543
> 
> 标签：resultset

我正在尝试使用语句 ID = r->getInt(1) 和 stat = r->getString(10) 从数据库中获取和存储 ID 和状态，其中我已将 ID 声明为 int 并将 stat 声明为字符串。其中第一个字段是包含值 1 的 ID，第 10 个字段是包含值“A”的状态。如果我尝试仅获取 ID，我的代码可以正常工作。否则，当我也尝试获取状态时，然后在运行代码时，我收到下面提到的错误：

```
*** glibc detected *** ./test: free(): invalid pointer: 0x000000001c3f5a60 ***
======= Backtrace: =========
/lib64/libc.so.6[0x3d23e71684]
/lib64/libc.so.6(cfree+0x8c)[0x3d23e74ccc]
/usr/lib64/libstdc++.so.6(_ZNSsD1Ev+0x3a)[0x3d28a9dc1a]
./test[0x401837]
./test(__gxx_personality_v0+0x310)[0x401120]
/lib64/libc.so.6(__libc_start_main+0xf4)[0x3d23e1d8b4]
./test(__gxx_personality_v0+0x89)[0x400e99] 
```

请帮忙。

仅添加我要实现的基础知识：

```
char loader_session[10];
char sql_query[500];
int ID;
string STATUS;
string CURRENT_CNT_FILE

env = Environment::createEnvironment (Environment::DEFAULT);
conn = env->createConnection( user, passwd, db);
strcpy(loader_session,"TEST");
sprintf(sql_query,"SELECT ID, SESSION_NAME, SRC_SUCCESS_PATH, SRC_CDR_PATH, LOG_FILE, CURRENT_CNT_FILE, LOG_MAX_FILE_CNT, LOG_MAX_FILE_SIZE, PROCEDURE_NAME, STATUS, ERROR_CDR_PATH, LOCK_FILE_PATH FROM TEST_DB WHERE SESSION_NAME = '%s'",loader_session);
Statement* const s = conn->createStatement(sql_query);
s->setPrefetchRowCount(10);
ResultSet* const r = s->executeQuery();
while (r->next())
  {

    ID      =  r->getInt(1);
    STATUS  =  r->getString(10);
    CURRENT_CNT_FILE = r->getString(6);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:44:28.540

好的，我有一个临时解决方案来解决我的问题。只需将 MALLOC_CHECK_ 设置为 0，我就不会收到错误消息，并且我的代码运行良好。不知道这样做的副作用，但截至目前，它工作正常。

# jquery - jQuery ul li 悬停效果

> ID：15068852
> 
> 赞同：2
> 
> 时间：2013-02-25T14:07:14.457
> 
> 标签：jquery, css, hover, html-lists

我在[这里有这段代码](http://jsfiddle.net/Jonur/BuJav/)，我试图在悬停事件上显示嵌套`.submenu`列表。`ul#menu li`如果您可以看到`ul.submenu`'s 在 's 内，`li`但由于某种原因，当您将鼠标从实际拖动`ul#menu li a`到其嵌套`ul.submenu`时，它会消失，就好像您要移出它一样。我不明白为什么会这样。

我尝试过更改 DOM 以及使用`setTimeout`但没有运气。

关于如何完成这项工作的任何想法？更重要的是……为什么会出现我的问题？我的意思是，既然在**里面**`ul.submenu`，它不应该被认为是同一个悬停区域吗？**`li`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:38:29.240

常见问题。父菜单项和之间的空间`.submenu`是罪魁祸首。

一个简单的解决方法是包装`.submenu`一个`div`足够宽以充当菜单项和子菜单之间的桥梁。

**见这里 -** [http://jsfiddle.net/BuJav/15/](http://jsfiddle.net/BuJav/15/)

CSS 变化——

```
.submenu-wrapper {
    position: absolute;
    min-width: 160px;
    min-height: 36px;
    top: -4px;
    left: 160px;
}
.submenu {
    position: relative;
    min-width: 160px;
    min-height: 36px;
    top: 0;
    left: 10px;
    background: url('../images/gradient_menuarea.png') repeat-x;
} 
```

**JS 更改 -**

```
$(function(){
    $('#menu > li, .submenu > li').hover(
        function(){
            var submenu = $(this).find('ul.submenu');
            if (submenu.hasClass('submenu')){
                submenu.removeClass('hide');
            }
        },
        function(){
            var submenu = $(this).find('ul.submenu');
            if (submenu.hasClass('submenu')){
                submenu.addClass('hide');
            }
    });
}); 
```

这样子菜单 ul 的目标就正确了。

* * *

请注意，您可以使用此 css 消除 JS

```
.submenu {display:none;}
#menu-area ul li:hover .submenu {display:block} 
```

您也不需要`.hide`在子菜单上上课

[http://jsfiddle.net/BuJav/16/](http://jsfiddle.net/BuJav/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:36:26.827

试试这个：http: [//jsfiddle.net/UFevL/6/](http://jsfiddle.net/UFevL/6/)

HTML

```
<div id="menu">
    <ul>
        <li class="active">
            <a href="?l=EL&amp;m=932K59EciV">Menu #1</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=M-z-3crmAP">Menu #2</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=jpHiTwH1bT">Menu #3</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=Jwr0SIWoWX">Menu #4</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=QY8SgMl5JH">Menu #4</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=8GaCmPByu3">Menu #5</a>
        </li>
        <li>
            <ul>
                <li>
                    <a href="?l=EL&amp;m=ueHp2vYKUa">Submenu #1</a>
                </li>
                <li>
                    <a href="?l=EL&amp;m=HQvyKxum8q">Submenu #2</a>
                </li>
                <li>
                    <a href="?l=EL&amp;m=81cDaTOCsL">Submenu #3</a>
                </li>
            </ul>
            <a href="?l=EL&amp;m=BQMppfQ0Dl">Menu #6</a>
        </li>
        <li>
            <a href="?l=EL&amp;m=D3wTd4F5Mn">Menu #7</a>
        </li>
    </ul>
</div> 
```

CSS

```
#menu ul {
    width: 160px;
    padding: 4px;
    margin: 0;
    border: 2px solid #94AA13;
    background-color: #fff;
    border-radius: 4px;
}

#menu li {
    position: relative;
    padding: 0;
    margin: 0;
}

#menu li + li {
    margin-top: 4px;
}

#menu a {
    display: block;
    padding: 0 20px;
    font-size: 14px;
    line-height: 36px;
    color: #f2f2f2;
    background-color: #283720;
    border-radius: 4px;
}

#menu li > ul {
    display: none;
    position: absolute;
    top: 0;
    left: 100%;
    margin: -4px 0 0 10px;
}

#menu li:hover > ul {
    display: block;
}

#menu li:hover > ul:before {
    display: block;
    content: "";
    position: absolute;
    top: 0;
    left: -10px;
    width: 10px;
    height: 100%;
} 
```

JS...没有！

诀窍在于 :before 元素：[http ://caniuse.com/#search=before](http://caniuse.com/#search=before)

如果您不能使用它，请尝试添加一个虚拟 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:55:40.390

我不知道它在您当前的项目中是否被认为是可以接受的，但您可以做一个快速修复：

```
menu-area ul li a{
   width: 100%;
   color: #F2F2F2;
   display: block;
   padding-right:10%;
} 
```

您可以将值更改为您想要的任何 % 以解决您的需求。只要做到这一点，以确保满足子菜单区域。我没有费心检查确切的值。让我知道它是否有效！**

# ios - XCode 界面生成器：如何配置界面生成器以显示 3.5 英寸 iphone？

> ID：15068854
> 
> 赞同：1
> 
> 时间：2013-02-25T14:07:20.590
> 
> 标签：ios, xcode, interface-builder

我希望界面生成器显示一个 3.5 英寸的 iphone 模型并进行处理。我在哪里配置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:14:00.863

您可以设置主 .xib 文件的属性，方法是选择它并转到`Assistant Editor`并在`Simulated Metrics`部分内，大小属性为`Retina 3.5 Full Screen`

在这里我提到了如何使用`storyboard` ![在此处输入图像描述](../Images/8a5244808501c04ee64a2e6d46245181.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:11:00.033

您可以将`Size`.xib 中主 UIView 的属性设置为`Retina 3,5 Full Screen`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:33:01.413

如果您使用的是故事板文件：选择视图控制器，您将在 Attributes Inspector 中找到模拟的指标。然后只需将大小从“推断”更改为“Retina 3.5 全屏”。

在情节提要中选择视图控制器的最简单方法是单击视图下方的左侧栏项目 - 参见屏幕截图。

![在此处输入图像描述](../Images/452648cf350c9d4392ccca3a4201489e.png)

# ssis - 为什么 SSIS 连接适用于 Windows，但不适用于 SQL Server 身份验证？

> ID：15068859
> 
> 赞同：0
> 
> 时间：2013-02-25T14:07:32.107
> 
> 标签：ssis, sql-server-2008-r2, lookup

我有一个包含查找转换的 SSIS 包。这需要连接到数据库。在连接管理器中，当我使用*`Windows authentication`*连接时工作正常，但是当我使用时*`SQL Server Authentication`*，我收到此错误：

> [A140_DAMAGETYPETEXT [3799]] 错误：SSIS 错误代码 DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER。对连接管理器“servername.Datanbankname.sqlUser”的 AcquireConnection 方法调用失败，错误代码为 0xC0202009。在此之前可能会发布错误消息，其中包含有关 AcquireConnection 方法调用失败原因的更多信息。

### 连接字符串：

> 数据源=TheServerName;用户 ID=TheSQLUser;初始目录=TheDababase;Provider=SQLNCLI10.1;Persist Security Info=True;Application Name=NameOfThePackage{80F4BFAB-642D-457E-9F47-1E811AFA48D0}ServerName.TheDababas‌​e.TheSQLUser;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:35:58.253

### 问题原因：

您的连接字符串缺少该*`Password`*属性。这就是连接管理器无法连接到数据库实例的原因。

### 修复的可能选项：

在 SSIS 上创建连接管理器时，请确保选中该**`Save my password`**框，以便将其*`Password`*保留在连接字符串中。如果您不选中此框，则不会保留该值，您必须键入该值。

![连接管理器](../Images/85305befe3cd4af6e9c7cb7676e09ac9.png)

### 包装配置：

如果您使用包配置，添加/更新连接管理器将导致*`Password`*属性从连接字符串属性中删除。我通常使用基于数据库的包配置。因此，每次更新包配置时，我都会使用查询来更新包配置表中的连接字符串。

### 推荐：

我更喜欢使用*Windows 身份验证*，这样连接数据库的密码就不会暴露。我觉得这*`Windows Authentication`*比处理*`SQL Server Authentication`*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:19:49.810

这是我的解决方案：单击

来自 Raj_007 的线程是救援。我使用了一个序列容器，并且 TransactionOption 设置为必需。

我将 TransactionOption 更改为支持，它对我有用。

# java - 可观察/观察者 Android

> ID：15068870
> 
> 赞同：10
> 
> 时间：2013-02-25T14:08:06.097
> 
> 标签：java, android

**编辑**请参阅[Observer Observables 实施问题](https://stackoverflow.com/questions/15076413/observer-observables-implementing-issue)- 似乎我正在覆盖不需要的方法并且没有调用 setChanged(); 在通知（）之前；

我一直在阅读观察者模式以使我的 UI 保持最新，但我仍然看不到它的用途。即使在我的特定对象中通知我的 MainActivity 然后运行 ​​update(); 方法我仍然无法使用 Pet 对象来提取更新值，因为该对象是在 Oncreate 中创建的……我只是无法创建一个新对象，因为那样变量会有所不同……这是我的实施，它似乎不起作用。

观察者/MainActivity

```
package com.grim.droidchi;

import java.util.Observable;
import java.util.Observer;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebSettings.LayoutAlgorithm;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements Observer, OnClickListener {
    private static final String TAG = "VPET";
    private static final String APP_PREFS = "VPET";
    private static final int REQUEST_CODE = 1;
    Boolean isAlive = false;
    TextView happiness_display, health_display, hunger_display, level_display;
    Button PunchPet, UpdateHunger;
    public static Pet pet = new Renamon();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SharedPreferences settings = getSharedPreferences("APP_PREFS",
                MODE_PRIVATE);

        WebView myWebView = (WebView) findViewById(R.id.pet_display);
        myWebView.loadUrl("file:///android_asset/renamon.gif");
        myWebView.setInitialScale(10000);
        myWebView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

        PunchPet = (Button) findViewById(R.id.PunchPet);
        UpdateHunger = (Button) findViewById(R.id.UpdateHunger);
        final TextView hunger_display = (TextView) findViewById(R.id.hunger_display);
        TextView happiness_display = (TextView) findViewById(R.id.happiness_display);
        TextView level_display = (TextView) findViewById(R.id.level_display);
        TextView health_display = (TextView) findViewById(R.id.health_display);

        hunger_display.setText(Integer.toString(pet.getHunger()));
        health_display.setText(Integer.toString(pet.getHP()));
        level_display.setText(Integer.toString(pet.getLVL()));
        happiness_display.setText(Integer.toString(pet.getHappy()));

        Intent intent = new Intent(this, Gameloop.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(
                getBaseContext(), REQUEST_CODE, intent, 0);

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
                System.currentTimeMillis() + (5 * 1000), 1800000, pendingIntent);
        // 1800000 ms = 30 mins

        pet.feed();
        pet.addObserver(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onPause() {

        super.onPause();
    }

    @Override
    public void update(Observable o, Object data) {

        hunger_display.setText(Integer.toString(pet.getHunger()));
        health_display.setText(Integer.toString(pet.getHP()));
        level_display.setText(Integer.toString(pet.getLVL()));
        happiness_display.setText(Integer.toString(pet.getHappy()));
        Log.d(TAG, "UPDATED FROM OBSERVER");

    }

    @Override
    public void onClick(View v) {
        if (v == PunchPet) {
            pet.setHP(500);
            Toast.makeText(getApplicationContext(), "PUNCHPET", Toast.LENGTH_SHORT).show();
            health_display.setText(Integer.toString(pet.getHP()));
    }else {

    }

    }

} 
```

可观察/宠物

```
package com.grim.droidchi;

import java.util.Observable;
import java.util.Observer;
import java.util.Set;

import android.util.Log;

public class Pet extends Observable implements PetInterface {
    protected Set<Observer> observers;
    private static final String TAG = "VPET";
    private int Health = 100;
    @Override
    public void addObserver(Observer o) {
        observers.add(o); 
        super.addObserver(o);
    }

    @Override
    public void notifyObservers() {
        observers.notify();
        super.notifyObservers();
    }

    @Override
    public synchronized void deleteObserver(Observer o) {
        observers.remove(o);
        super.deleteObserver(o);
    }

    private int Happiness = 10;
    private int Level = 1;
    private int Hunger = 0;
    private int Exp = 0;
    private String Name;
    private Boolean isAlive = true;
    private Boolean isSick = false;

    public void setHP(int hp) {
        this.Health = hp;
        notifyObservers(hp);
    }

    public void setLVL(int lvl) {
        this.Level = lvl;
        notifyObservers(lvl);
    }

    public void setXP(int xp) {
        this.Exp = xp;
        notifyObservers(xp);
    }

    public void setHunger(int hunger) {
        this.Hunger = hunger;
        notifyObservers(hunger);
    }

    public void setHappy(int happy) {
        this.Happiness = happy;
        notifyObservers(happy);
    }

    public int getHP() {

        return Health;
    }

    public int getLVL() {

        return Level;
    }

    public int getXP() {

        return Exp;
    }

    public int getHunger() {

        return Hunger;
    }

    public int getHappy() {

        return Happiness;
    }

    public boolean isAlive() {
        return isAlive;

    }

    public boolean isSick() {
        return isSick;

    }

    @Override
    public void sleep() {
        // TODO Auto-generated method stub

    }

    @Override
    public void clean() {
        // TODO Auto-generated method stub

    }

    @Override
    public void feed() {
        Log.d(TAG, "FEEDING FROM INTERFACE THING");

    }

    @Override
    public void passtime() {

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:16:55.603

首先，我不建议覆盖`addObserver`或`removeObserver`在您的可观察对象中。API 在实现这一点方面做得非常好（除非你想要一些特定的功能）。

其次，该方法`notifyObservers()`被重载，因此您可以向它传递一个对象 IE `notifyObservers(Object obj)`。如果您将 , 传递给它`Pet`，`notifyObservers(this)`那么您将获得对`Pet`正在观察的对象的引用。

我认为这是您的问题，但如果我错了，请纠正我。

**编辑**：澄清一下，我的回答取决于您在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observable.html)`Observable`使用Java API 中的类。

经过进一步审查，您应该已经拥有对`Pet`调用`update`方法的对象的引用`Observer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:15:14.933

您`pet`无法在其他方法中访问，因为它未在全局级别定义。

您应该在**onCreate**方法`Pet pet = new Renamon();`之外定义。

# c# - 从 Javascript 调用 C# BHO 方法（仍然无法正常工作）

> ID：15068872
> 
> 赞同：6
> 
> 时间：2013-02-25T14:08:15.517
> 
> 标签：c#, internet-explorer, com, bho

我完全按照[这个](https://stackoverflow.com/questions/9287961/calling-c-sharp-bho-methods-from-javascript)答案阅读并重新阅读了所有谷歌调查结果。不幸的是，大多数人都只是引用答案的复制和粘贴（包括“停止将头撞到墙上去庆祝！”）句子，它对我不起作用......所以经过半天的工作我真的要开始敲我的头了...

我的简单错误：javascript windows.myExtension 对象是“未定义”，因此在其上调用 Foo 会引发错误。请参阅下面的完整来源。似乎该属性集在 javascript 端不可见。

更多信息：

*   我使用 Debugger.Launch() 语句来方便地调试我的扩展，断点被命中，所有 BHO 扩展函数都被正确调用和运行。
*   注释的替代方法（带有 property.SetProperty）也不起作用，出现同样的错误：

    console.log(window.myExtension); // 写入'undefined'，为什么？

*   使用 VS 2010、Windows 7 x64、IE 9

请让我帮助运行这个......提前谢谢

简单的测试页面：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
    console.log(window.myExtension);  // Writes undefined why? It should be an object...
    var result = window.myExtension.Foo("bar"); // Obviously throws and error if window.myExtension is undefined 
    </script>
    <title></title>
</head>
<body>

</body>
</html> 
```

BrowserHelperObject.cs

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.Expando;

using Microsoft.Win32;

using SHDocVw;

namespace IEExtensionTest
{
[ComVisible(true)]
[Guid("DA8EA345-02AE-434E-82E9-448E3DB7629E")]
[ClassInterface(ClassInterfaceType.None)]
[ProgId("MyExtension")]
[ComDefaultInterface(typeof(IExtension))]
public class BrowserHelperObject : IObjectWithSite, IExtension
{
    private WebBrowser webBrowser;

    public int Foo(string s)
    {
        return 0;
    }

    public void OnDocumentComplete(dynamic frame, ref dynamic url)
    {
        Debugger.Launch();
        dynamic window = webBrowser.Document.parentWindow;
        var windowEx = (IExpando)window;
        windowEx.AddProperty("myExtension");
        window.myExtension = this;
        //var property = windowEx.AddProperty("MyExtension");
        //property.SetValue(windowEx, this, null);
    }

    public static string BHOKEYNAME = "Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Browser Helper Objects";

    [ComRegisterFunction]
    public static void RegisterBHO(Type type)
    {
        RegistryKey registryKey = Registry.LocalMachine.OpenSubKey(BHOKEYNAME, true);

        if (registryKey == null)
            registryKey = Registry.LocalMachine.CreateSubKey(BHOKEYNAME);

        string guid = type.GUID.ToString("B");
        RegistryKey ourKey = registryKey.OpenSubKey(guid);

        if (ourKey == null)
            ourKey = registryKey.CreateSubKey(guid);

        ourKey.SetValue("Alright", 1);
        registryKey.Close();
        ourKey.Close();
    }

    [ComUnregisterFunction]
    public static void UnregisterBHO(Type type)
    {
        RegistryKey registryKey = Registry.LocalMachine.OpenSubKey(BHOKEYNAME, true);
        string guid = type.GUID.ToString("B");

        if (registryKey != null)
            registryKey.DeleteSubKey(guid, false);
    }

    public int SetSite(object site)
    {

        if (site != null)
        {
            webBrowser = (WebBrowser)site;
            webBrowser.DocumentComplete += OnDocumentComplete;
        }
        else
        {
            webBrowser.DocumentComplete -= OnDocumentComplete;
            webBrowser = null;
        }

        return 0;

    }

    public int GetSite(ref Guid guid, out IntPtr ppvSite)
    {
        IntPtr punk = Marshal.GetIUnknownForObject(webBrowser);
        int hr = Marshal.QueryInterface(punk, ref guid, out ppvSite);
        Marshal.Release(punk);

        return hr;
    }
} 
```

IObjectWithSite.cs

```
using System;
using System.Runtime.InteropServices;

namespace IEExtensionTest
{
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("FC4801A3-2BA9-11CF-A229-00AA003D7352")]
public interface IObjectWithSite
{
    [PreserveSig]
    int SetSite([MarshalAs(UnmanagedType.IUnknown)] object site);

    [PreserveSig]
    int GetSite(ref Guid guid, out IntPtr ppvSite);
}
} 
```

IExtension.cs

```
using System;
using System.Runtime.InteropServices;

namespace IEExtensionTest
{
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("FC4801A3-2BA9-11CF-A229-00AA003D7352")]
public interface IObjectWithSite
{
    [PreserveSig]
    int SetSite([MarshalAs(UnmanagedType.IUnknown)] object site);

    [PreserveSig]
    int GetSite(ref Guid guid, out IntPtr ppvSite);
}
} 
```

构建后步骤配置如下（并正常运行）：

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\gacutil.exe" /f /i "$(TargetDir)$(TargetFileName)"
"C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe" /unregister "$(TargetDir)$(TargetFileName)"
"C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe" "$(TargetDir)$(TargetFileName)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-27T13:10:13.790

我对此有一个hack-y解决方案。它现在对我有用，所以我把它贴在这里。如果我遇到任何问题，我会更新这篇文章。

@Eli Gassert 正确识别问题。在`SetSite`函数中，我们正在向`DocumentComplete`事件添加处理程序。所以当我们在`$.ready()`.

所以我所做的是将处理程序添加到 BeforeScriptExecute 事件。这是我的 BHO.cs 的相关部分

```
public int SetSite(object site)
    {
        this.site = site;
        if(site != null)
        {
            webBrowser = (IWebBrowser2)site;
            ((DWebBrowserEvents2_Event)webBrowser).BeforeScriptExecute += S2_BeforeScriptExecute;
            //((DWebBrowserEvents2_Event)webBrowser).DocumentComplete += S2_DocumentComplete;
        }
        else
        {
            ((DWebBrowserEvents2_Event)webBrowser).BeforeScriptExecute -= S2_BeforeScriptExecute;
            //((DWebBrowserEvents2_Event)webBrowser).DocumentComplete -= S2_DocumentComplete;
            webBrowser = null;
        }
        return 0;
    } 
```

处理程序的签名不同，这里是处理程序的代码。这仍然在 BHO.cs

```
 private void S2_BeforeScriptExecute(object pDispWindow)
    {
        //if (pDisp != this.site) { return; }

        dynamic window = webBrowser.Document.parentWindow;
        IExpando windowEx = (IExpando)window;
        windowEx.AddProperty("myprop");
        window.myprop = this;
    } 
```

我只是粘贴了`DocumentComplete`方法中的代码并在顶部注释掉了条件。

结果，我可以`myprop`在 jquery中看到`$.ready()`。这解决了我眼前的问题，我正在继续我的代码。

不用说，我的插件只提供将从 javascript 调用的方法，不需要对文档内容做任何事情。

我还不知道有什么用`pDispWindow`以及不检查它是否为空等的影响是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T16:26:27.677

用窗户试试。**外部**.myExtension(); 据我所知，外部是保存您表单的对象。此外，如果这不起作用 - 一定要先尝试简单的事情，然后反其道而行之。

这是一个适合您的简单表格：

```
[PermissionSet(SecurityAction.Demand, Name = "FullTrust")] // Note full trust.
[System.Runtime.InteropServices.ComVisibleAttribute(true)]
public partial class BasicJSScriptableForm : Form
{
  private void BasicJSScriptableForm _Load(object sender, EventArgs e){
     this.WebBrowser1.Navigate("yourpage");
  }
  public string TestMethod(string input){
     return string.Format("echo: {0}", input);
  }
} 
```

然后在页面中：

```
$(document).ready(function() {
   alert(window.external.TestMethod("It will hopefully work."));
} 
```

# reporting - BI软件中的报告和分析工具有什么区别

> ID：15068873
> 
> 赞同：0
> 
> 时间：2013-02-25T14:08:23.523
> 
> 标签：reporting, analysis, business-intelligence, pentaho

我正在做一个我必须使用 Pentaho 的项目。此解决方案中包含（或可以包含）许多工具。

我真的看不出报告部分（这里是 PRD pentaho 报告设计器）和分析部分（pentaho 分析器或 saiku）之间的区别。对我来说，使用这两种工具，我们可以查看我的 DW 中的内容，并对这些数据进行或多或少复杂的报告。我是对的还是我什么都不懂？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:43:50.187

Pentaho Reporting (PR) 和分析工具是两个不同的东西。PR 是**静态**报表，你可以使用 sql 创建它。saiku、jpivot 或 stpivot 等分析工具报告 (AT) 是**动态**的。您必须使用 MDX 创建它。通过使用AT，我们可以根据我们想要的维度动态创建分析报告。

# java - 什么是 java 中可用的等效技术来执行 MSMQ 操作

> ID：15068875
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:08:26.817
> 
> 标签：java, jakarta-ee

我需要将消息从服​​务器发送到客户端。

在.Net端，**MSMQ**技术用于实现这些机制，如发送消息、通知等。

请让我知道在java端使用的有效技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:14:07.807

与 MSMQ 非常相似的是 RabbitMQ，并且运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:14:44.813

您可以使用 Apache MQ 甚至 JMS。

# html - BlackBerry PlayBook 的 apple-touch-icon Web 应用程序主屏幕图标？

> ID：15068877
> 
> 赞同：3
> 
> 时间：2013-02-25T14:08:34.210
> 
> 标签：html, icons, blackberry-playbook, playbook, apple-touch-icon

`<link rel="apple-touch-icon">`BlackBerry PlayBook是否有等价物？

当用户将我的 Web 应用程序添加到他们的主屏幕时，我想显示一个自定义图标。该应用程序完全基于 Web（不是 WebWorks），因此设备上没有代码。

# jquery-mobile - 加载本地html文件时如何处理页面重定向？

> ID：15068879
> 
> 赞同：1
> 
> 时间：2013-02-25T14:08:42.353
> 
> 标签：jquery-mobile, cordova

在我的 HTML 文件中：

```
<div data-role="content" id="termsContent">
    <div id="termDiv"></div>
</div> 
```

在我的 js 文件中：

```
$(function () {
    $("#termsPage").live('pagecreate', function(event,ui){
        $("#termDiv").load("tnc.html").trigger('create');
    });
}); 
```

然后，在我的 tnc.html 文件中：

```
<a href="http://www.xxx.com/usage-terms.html"> 
```

我似乎在 Google 中找不到任何关于如何正确加载本地 html 页面的解决方案。有人对此有建议/经验吗？我想直接显示点击的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:19:04.320

你很接近但还不够。

1.  .trigger('create') 不能在加载函数后使用。加载函数是异步的，所以我们需要等待成功状态来触发 pagecreate。
2.  按钮示例不会显示，它需要关闭。
3.  不要使用**pagecreate**，在这种情况下**pagebeforeshow**

这是一个工作示例：

**索引.html：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>        
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    <script src="index.js"></script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
                    <div id="termDiv">

                    </div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

**加载.html：**

```
<a href="http://www.google.com" data-role="button" rel="external">Onen link</a> 
```

**index.js：**

```
$(document).on('pagebeforeshow', '#index', function(){       
    $("#termDiv").load("load.html", function(){
        $('#index').trigger('create');
    });  
}); 
```

我希望这是你一直想要的。

# java - 套接字写入没有响应

> ID：15068880
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:08:43.510
> 
> 标签：java, sockets

我做了一个简单的应用程序来连接服务器和java中的客户端它不起作用

我使用 new Socket("localhost", 4444); 对于客户端和新的 ServerSocket(4444)；为服务器

客户： [http ://www.hastebin.com/siqamonebu.coffee](http://www.hastebin.com/siqamonebu.coffee)

服务器： [http ://www.hastebin.com/rivebetani.avrasm](http://www.hastebin.com/rivebetani.avrasm)

我在 hastebin 上发布了代码，因为它在这里发布太大了我不知道哪个部分坏了，但是服务器从来没有收到你说的消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:06:29.130

ChatServer - 向所有连接的客户端广播

在一个命令提示符中：`java ChartServer`
在另一个：（`java ChatClient localhost` *或服务器运行位置的 IP 地址）*
另一个：（`java ChatClient localhost` *或服务器运行位置的 IP 地址）*

开始在客户端窗口中聊天。

像这样的服务器...

```
// xagyg wrote this, but you can copy it
import java.io.*;
import java.net.*;
import java.util.*;

public class ChatServer {

    public static List list = new ArrayList();

    public static void main(String[] args) throws Exception {

        ServerSocket svr = new ServerSocket(4444);

        System.out.println("Chat Server started!");

        while (true) {
            try {
                Socket s = svr.accept();
                synchronized(list) {
                   list.add(s);              
                }                                  
                new Handler(s, list).start();
            }
            catch (IOException e) {
                // print out the error, but continue!
                System.err.println(e);
            }
        }
    }
}

class Handler extends Thread {

    private Socket s;
    private String ipaddress;
    private List list;

    Handler (Socket s, List list) throws Exception {
      this.s = s;
      ipaddress = s.getInetAddress().toString();
      this.list = list;
    }

    public void run () {

      try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(s.getInputStream()));
        String message;
        //MyDialog x = (MyDialog)map.get(ipaddress.substring(1));
        while ((message = reader.readLine()) != null) {
            if (message.equals("quit")) {
                synchronized(list) {
                    list.remove(s);
                }
                break;
            }
            synchronized(list) {
                for (Object object: list) {
                    Socket socket = (Socket)object;
                    if (socket==s) continue;
                    PrintWriter writer = new PrintWriter(socket.getOutputStream());
                    writer.println(ipaddress + ": " + message);
                    writer.flush();
                }
            }
        }
        try { reader.close(); } catch (Exception e) {}
      }
      catch (Exception e) {
        System.err.println(e);
      }
    }
} 
```

这样的客户...

```
// xagyg wrote this, but you can copy it
import java.util.*;
import java.io.*;
import java.net.*;

public class ChatClient {

    public static void main(String[] args) throws Exception {

        Socket s = new Socket(args[0], 4444);
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        PrintWriter out = new PrintWriter(s.getOutputStream());
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        String message;
        new SocketReader(in).start();   
        while ((message = reader.readLine())!=null) {
            out.println(message);
            out.flush();
            if (message.equals("quit")) break;
        }
        in.close();
        out.close();
    }        
}

class SocketReader extends Thread {

    BufferedReader in;

    public SocketReader(BufferedReader in) {
        this.in = in;
    }

    public void run() {   
        String message;
        try {
            while ((message = in.readLine())!=null) {
                System.out.println(message);
            }
        }
        catch (Exception e) {
            throw new RuntimeException(e);
        }        
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:16:55.823

我认为这是因为您如何启动服务器，尝试使用这种结构，因为您在 run 方法中创建 ServerSocket，这可能会导致冲突：

```
public class ThreadSocketServer implements Runnable {

    private int port;
    private boolean isRunning;
    private ServerSocket ss;

    public ThreadSocketServer(int port, boolean initialStatus) {
        this.port = port;
        isRunning = initialStatus;
        System.out.println("Start the server!");
        try {
            ss = new ServerSocket(port);
            Thread threadServer = new Thread(this);
            threadServer.start();
        } catch (IOException e) {
            System.err.println(e.getClass() + " - " + e.getMessage());
        }
    }

    @Override
    public void run() {

        while (isRunning) {
            try {
                Socket client = ss.accept();

                ObjectInputStream ois = new ObjectInputStream(
                        client.getInputStream());
                //Process here
                ois.close();
            } catch (IOException e) {
                System.err.println(e.getClass() + " - " + e.getMessage());
                isRunning = false;
            } catch (ClassNotFoundException e) {
                System.err.println(e.getClass() + " - " + e.getMessage());
                isRunning = false;
            }
        }

    }

    public static void main(String[] args) {
        new ThreadSocketServer(1085, true);
    } 
```

# mysql - 防止转换为文本

> ID：15068882
> 
> 赞同：0
> 
> 时间：2013-02-25T14:08:46.757
> 
> 标签：mysql, type-conversion

如果我通过

```
alter table test add column (name varchar(1024)); 
```

MySQL-Client 说：

```
Converting from VARCHAR to TEXT 
```

我怎样才能防止这种转换？任何想法？

# python - Linux 中的用户空闲时间

> ID：15068887
> 
> 赞同：2
> 
> 时间：2013-02-25T14:08:57.193
> 
> 标签：python, linux, bash

我需要检查自 Linux 上的最后一次用户输入出现（首选方式 - 在 python 中）以来经过了多长时间（清醒 - 10.4）

我知道这在正常情况下很容易（仅使用 XScreenSaverQueryInfo），但棘手的部分是我没有 x11/extensions/scrnsaver.h 标头，我必须以其他方式执行此操作（即使我安装了所需的包我无法在其他 100 台可以运行它的计算机上安装 packeges - 我没有这样做的权限）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-04-18T23:22:27.383

另一种基于 X 屏幕保护程序的替代方法是[来自 sinkless-tools 的 xssstate](https://tools.suckless.org/x/xssstate/)：

```
xssstate -i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:42:05.053

在互联网部门，我发现了类似的东西，它看起来像工作 - 但仍然不是完美的解决方案，因为它返回的信息比我需要的多得多，而且正确值附近的数字不是恒定的（它在其他系统中有所不同）：

`ls -l /dev/pts | fgrep username`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-04T10:37:15.843

使用 xprintidle

要求： `sudo apt-get install xprintidle`

从命令行使用： `xprintidle`

或者，以秒为单位： `echo $((`xprintidle` / 1000))`

或从蟒蛇：

```
milliseconds_string = os.popen("xprintidle").read()
seconds = int(milliseconds_string)/1000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T11:00:24.917

另一种解决方案是使用 unix 命令`w`，这给出了所有用户的空闲时间（除了似乎不会重置空闲时间的 w 命令）

该`w`命令还有一些标志 -s 和 -f 来显示短格式并且不打印主机名，从而为您提供略少的信息来查找空闲时间。我能够把它归结为

```
> w -sf | grep user
jxw1234  pts/5      6.00s w -sf 
```

这也将空闲时间缩短到秒，因此比`ls -l /dev/pts`.

从这一点来看，使用 python 的系统界面运行命令并应用正则表达式以各种格式提取时间应该非常简单。

编辑：使用这个[w 命令获取空闲时间，](https://unix.stackexchange.com/questions/191436/linux-w-command-get-idle-time-in-seconds)我能够得到以下结果。

```
>w | awk '{if (NR!=1) {print $1,$5 }}' | grep username
jxw1234 1.00s 
```

# java - 无法打印数组列表

> ID：15068893
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:09:11.387
> 
> 标签：java

我无法为 getLines 方法打印，我在这里做错了吗？当我运行程序时它没有给我任何错误，但是当我尝试打印 getlines 方法时，它给了我错误。

当我尝试打印 getlines 方法时，它给了我这个错误。线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 在 dijkstra.Fileprocess.getLines(Fileprocess.java:37) 在 dijkstra.Fileprocess.main(Fileprocess.java:70)

```
 public class Fileprocess {

  public static Scanner Reader(String FileName){

      //Pass a File Name to this method, then will return Scanner for reading data from that file
         try {
            return new Scanner(new File(FileName));
        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
            System.exit(1);
            return null;
        }
    }  
  static ArrayList<Edge> getLines(ArrayList<Vertex> PointCollection) {
        Scanner Input = Reader(Vertex.graph);
        ArrayList<Edge> result = new ArrayList<Edge>();

        while(Input.hasNext()){
            String line = Input.nextLine();

            String[] arr = line.split(" ");
            result.add(new Edge(Integer.parseInt(arr[0]), //index
                    getPointbyIndex(PointCollection,Integer.parseInt(arr[1])), //start
                    getPointbyIndex(PointCollection,Integer.parseInt(arr[2])), //end
                    Integer.parseInt(arr[3]))); //cost
            }
        Input.close();
        return result;
    }

  static ArrayList<Vertex> getPoints() {
      Scanner Input = Reader(Vertex.airports);
      ArrayList<Vertex> result = new ArrayList<Vertex>();

      while(Input.hasNext()){
          String line = Input.nextLine();
          result.add(new Vertex(line));
      }
      Input.close();
      return result;
  }

  static Vertex getPointbyIndex(ArrayList<Vertex>PointCollection, int Index){
      for(Vertex p:PointCollection){
          if(p.getIndex() == Index){
              return p;
          }
      }
      return null;
  }

 public static void main(String[] args){
     System.out.println(getPoints());
     System.out.println(getLines(null));
     }

} 
```

这是输入文本文件的文件（索引，开始，结束，成本）

```
1 1 2 2
2 1 3 1
3 1 6 3
4 1 7 3
5 2 1 2
6 2 3 1
7 2 4 1
8 2 5 2
9 2 6 2
10 3 1 1
11 3 2 1
12 3 4 1

class Edge {

    public Vertex start;
    public Vertex end;
    public double cost;
    public int Index;

//  public final Vertex target;
//  public final int weight;

    public Edge(double cost, Vertex end, Vertex start, int Index){

        this.start = start;
        this.end = end;
        this.cost = cost;
        this.Index = Index;
    }
       public String toString(){
            String result = "";
            if(this.start != null && this.end != null){
                result = this.Index +","+this.start.Index+","+this.end.Index +","+this.cost;
            }
            return result;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:16:01.833

也许您的文件包含空行或不兼容的行？

您可以使用以下方法修复错误：

```
String[] arr = line.split(" ");
if (arr.length > 3) {
    result.add(new Edge(Integer.parseInt(arr[0]), //index
            getPointbyIndex(PointCollection,Integer.parseInt(arr[1])), //start
            getPointbyIndex(PointCollection,Integer.parseInt(arr[2])), //end
            Integer.parseInt(arr[3]))); //cost
    }
} 
```

# c# - 非身份主键验证

> ID：15068900
> 
> 赞同：1
> 
> 时间：2013-02-25T14:09:42.777
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个使用实体框架和代码优先方法的基本 MVC 应用程序。它包含一个产品模型：

```
public class Product
{
      [Key]
      [Column("prodCode")]
      [DatabaseGenerated(DatabaseGeneratedOption.None)]
      [Required(ErrorMessage = "A Product Code is required.")]
      public string ProductCode { get; set; }

      [Column("prodName")]
      [Required(ErrorMessage = "A Name is required.")]
      public string Name { get; set; }
} 
```

ProductCode 是非身份主键。

在插入或修改产品时，我应该将逻辑放在哪里来验证密钥是否不存在。以及如何将验证消息发送回视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:24:11.040

因为我可以看到您正在使用 MVC（基于那里的标签），所以我会告诉您在业务逻辑中进行验证（由您的控制器调用到返回 bool 的方法），因为您需要一个数据库连接在这种情况下进行实际检查。

将验证消息发送回视图很简单：如果方法中的验证失败，则将其返回 false 给控制器，然后让控制器向您的集合添加一些内容，并向您的视图添加一行以在包含`ViewData`该值时显示该值`ViewData`特定键。

# string - 字符串替换文件集合

> ID：15068902
> 
> 赞同：2
> 
> 时间：2013-02-25T14:09:48.197
> 
> 标签：string, msbuild

我正在编写一个 MsBuild 脚本来处理配置文件并进行转换。因此，我正在创建一个 .Dev.config 文件的集合：

```
<ItemGroup>
    <DevConfigFiles Include="..\Source\**\*.Dev.config"/>
</ItemGroup> 
```

这工作正常。针对 %(DevConfigFiles.Identity) 执行任务给了我我所期望的。我想采用该集合，并创建一个具有相同文件名的相应集合，但将“.Dev.config”替换为“.config”。

我无法弄清楚完成这项工作的 MsBuild 语法。实现这一目标的最佳方法是什么？

注意：我会考虑获取 *.config 文件列表和对应的 *.Dev.config 文件列表的替代技术，但我真的想了解在集合上调用字符串函数的 MsBuild 语法。那是让我绊倒的部分。

另一个注意事项：在这种情况下，我不能使用 %(Extension) 元数据，因为它不会删除字符串的“.Dev”部分。它考虑文件名的那一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:15:37.023

类似的 SO 问题，OP 想要获取文件集合并使用基于原始字符串的名称复制它们。

[MSBUild：复制名称基于原始文件的文件（遵循模式）](https://stackoverflow.com/questions/5377917/msbuild-copy-files-with-a-name-based-on-the-original-following-a-pattern)

# c# - 有人可以帮我获取此脚本以允许使用 IE8 通过 https 下载我的文件吗？

> ID：15068904
> 
> 赞同：-1
> 
> 时间：2013-02-25T14:10:02.407
> 
> 标签：c#, asp.net, internet-explorer-8

这是我到目前为止从查看其他答案得到的结果，但仍然收到错误

> “请求的站点不可用或找不到。请稍后再试。”

注意：这适用于其他浏览器和没有 https 的 IE8。

```
Response.ClearHeaders();
Response.Clear();
Response.AddHeader("Cache-Control", "no-store, no-cache");
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Disposition",
    "attachment; filename=" +
    "Application.pdf");
Response.BinaryWrite(memoryStream.ToArray());
ApplicationInstance.CompleteRequest(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:16:01.923

除了在每台浏览器计算机上[编辑注册表之外](http://support.microsoft.com/kb/323308)，您还需要

*   删除缓存控制标头
*   使用`href`

# c++ - boost io_service 初始化 SIGSEGV

> ID：15068911
> 
> 赞同：1
> 
> 时间：2013-02-25T14:10:15.403
> 
> 标签：c++, boost, tcp, boost-asio, mutex

我正在编写一个 smpp 客户端，但我遇到了一个无法解决的问题。我写了一个带有内部**io_service类的****tcp_client**类来封装tcp通信的所有过程。之后，我意识到我需要在继承类中进行该控制，以运行要完成的其他任务，因此，我修改了 tcp_client 以在继承类的构造函数中初始化 io_service，并从那里**发布。**

 ****tcp_client**类**：

```
class tcp_client
{
public:
    tcp_client(boost::asio::io_service &_io_service, tcp::resolver::iterator endpoint_iterator)
      : m_io_service(_io_service), socket_(_io_service)
    {
        connect_start(endpoint_iterator);
        // this works OK
    }

    tcp_client(boost::asio::io_service &_io_service)
    :m_io_service(_io_service),socket_(m_io_service)
    {
        // SIGSEGV
    }

    tcp_client(void)
    :m_io_service(tcp_io_service),socket_(m_io_service)
    {
        // Works OK
    }

    void connect(const char *host, const char *port)
    {
    if( get_tcp_status()==CONNECTED || get_tcp_status()==CONNECTING )
    {
        do_close();
    }
    tcp::resolver::query query(host,port);
    tcp::resolver resolver(m_io_service);
    tcp::resolver::iterator iterator = resolver.resolve(query);
    connect_start(iterator);
    m_io_service_thread = boost::thread(boost::bind(&boost::asio::io_service::run,&m_io_service));
    }
private:
    boost::asio::io_service &tcp_io_service;
    .........................
    .........................
} 
```

在构造函数中

```
tcp_client(boost::asio::io_service &_io_service)
        :m_io_service(_io_service),socket_(m_io_service)
        {

        } 
```

我收到一个关于互斥体的 SIGSEGV 信号。其他建设者工作得很好，但这阻止了我。我可以使用其他可以正常工作的构造函数继续开发，但我想知道这里有什么问题，只是为了运动（学习）。

我用于此的继承类是：

```
class smpp_client : public tcp_client
{
private:
   boost::asio::io_service smpp_io_service;
public:
    smpp_client(boost::asio::io_service &_io_service, tcp::resolver::iterator endpoint_iterator)
      :tcp_client(_io_service,endpoint_iterator),
       m_smpp_status(SC_BIND_DISCONNECTED),
       rx_thread_exit(false)
      {
     m_windowing = 10;
     initialize_stack();
      }

   smpp_client(void):
      tcp_client(smpp_io_service),
      m_smpp_status(SC_BIND_DISCONNECTED),
      rx_thread_exit(false)
      {
     m_windowing = 10;
     initialize_stack();
     //smpp_io_service.post(boost::bind(&smpp_client::rx_loop,this));
      }
...........
...........
} 
```

此类中的第一个构造函数可以正常工作，但第二个调用 tcp_client 中的构造函数会产生 SIGSERV 信号。

主要是：

```
/*boost::asio::io_service io_service;
tcp::resolver::query query(argv[1],argv[2]);
tcp::resolver resolver(io_service);
tcp::resolver::iterator iterator = resolver.resolve(query);

smpp_client c(io_service,iterator);

boost::thread t(boost::bind(&boost::asio::io_service::run,&io_service));*/

smpp_client c; // --> HERE SIGSEGV 
```

我用gdb和valgrind测试过，输出的信息是一样的：

程序收到信号 SIGSEGV，分段错误。来自 /lib64/libpthread.so.0 的 pthread_mutex_lock () 中的 0x00007ffff6bdbe64

我当时检查了所有地址和值，但我不知道如何修复它。

我正在使用带有 boost 1.49 和 gcc 4.7.1 的 Linux Slackware 13.37

PD：完整的代码可以在[https://github.com/jpcordovae/smpp_client](https://github.com/jpcordovae/smpp_client)观看，但不会在此错误时更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:12:10.507

第二个构造函数不起作用，因为您将未初始化成员 smpp_io_service 的引用作为基类构造函数的参数传递。在 c++ 中，首先调用所有基类构造函数，然后启动非静态成员。

有关初始化顺序的更多详细信息，请参阅[此](https://stackoverflow.com/questions/2669888/c-initialization-order-for-member-classes)问题。

使用第一个构造函数时，io_service 是较早创建的，这就是代码工作正常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:16:37.583

尝试查看 _io_service 参数。确保它已正确定义并且不为零。此外，socket_ 对象是您的套接字对象，您似乎正在将其初始化为 m_io_service。套接字对象不是 io_service 对象。确保将其初始化为正确类型的套接字对象。我正在使用 SSL，所以这就是我初始化它的方式：

```
boost::shared_ptr<boost::asio::io_service> IOServ(new boost::asio::io_service);
IOService = IOServ;
pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
   boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error)); 
```****

# r - 如何使用 R 将 csv 转换为 xls？

> ID：15068915
> 
> 赞同：3
> 
> 时间：2013-02-25T14:10:21.217
> 
> 标签：r, csv, xls

我有一个包含数百个 CSV 文件的文件夹。使用 R 将这些转换为 XLS 格式的最简单方法是什么？

（是的，我知道 CSV 与 Excel 兼容，但我仍然有充分的理由转换它们。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:16:25.087

使用包`xlsReadWrite`导出到 xls：

```
library(xlsReadWrite)
filenames <- list.files("[path_name]", pattern="*.csv", full.names=TRUE)
for(i in 1:length(filenames)){
    a <- read.csv(filenames[i])
    write.xls(a, paste("file",i,".xls", sep=""))
} 
```

# sql - 除法抛出“SELECT 列表中的表达式无效”。

> ID：15068933
> 
> 赞同：1
> 
> 时间：2013-02-25T14:11:33.967
> 
> 标签：sql, db2, ibm-midrange

在我们的数据库中，我们有一些使用十进制日期格式的表格：yyyymmdd，全部为一个大小数（即，今天是 20130225）。我正在尝试创建一个 SQL 查询，将内容拉回每月存储桶中。根据我的研究，似乎最好的方法是将数字除以 100 以截断最右边的天数（如果去掉余数，则 20130225/100 等于 201302。）

我似乎无法弄清楚如何让它发挥作用。我开始`(INVOICE_DATE/100) As "INVOICE_MONTH"`在我的 Select 和 Group by 中使用类似的东西。当那不起作用时，我将 Group 减少了 to`"INVOICE_MONTH"`然后 to `(INVOICE_DATE/100)`，这两个都不起作用。因此，我将 Select and Group by 减少到`INVOICE_DATE/100`似乎仍然无法正常工作的程度。

这是我目前的代码（有几个小修改）

```
Select  Count(COMPETITOR_NAME) as "STORE COUNT",
    COMPETITOR_NAME,
    INVOICE_DATE/100,
    CUSTOMER_NUMBER,   
    OVERRIDE_TYPE,
    Sum (QTY_SOLD) as "Quantity Sold",
    Sum (EXT_ORIGINAL_PRICE) as "Sum Original Price", 
    Sum (EXT_OVERRIDE_PRICE) as "Sum Override Price", 
    Sum (EXT_VARIANCE) As "Sum Variance",
    Sum (INTERNAL_COST) as "Internal Cost"
From    DA*****.DW*******.PRCOVRWK
Where   INVOICE_DATE/100 between 201002 and 201302
Group By    ROLLUP(COMPETITOR_NAME,
    INVOICE_DATE/100),
    OVERRIDE_TYPE,
    CUSTOMER_NUMBER
Order By    OVERRIDE_TYPE,
    COMPETITOR_NAME,
    INVOICE_DATE,
    CUSTOMER_NUMBER 
```

我不禁想知道我的 Where 语句是否也引起了问题。起初我只是在使用`Where INVOICE_DATE between 20100225 and 20130225`，但我认为它可能需要使用与 Select 语句中相同的东西？（是的，我在这一点上有点紧张。）我一直在尽力遵循 IBM 网站上的文档，但我一定是读错了，因为它似乎没有按预期运行。

好歹。基本需求是能够将信息提取到每月存储桶中。因此，如果您知道另一种方法，那么这可能是可以接受的。我希望能够只使用小数除法来提取年份/日期组合，并在 Group By 中使用它来获得我需要的结果。

PS-我们正在使用 v5,1 的 DB2 for i。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:09:17.640

十进制日期使我们的生活比需要的更加困难。我可以建议使用[Alan Campin 的 IDate 函数](http://www.think400.dk/downloads.htm)吗？它们可以让您轻松地将这些小数转换为 SQL 日期数据类型。一旦你有了它，你就可以提取出年份和月份，然后对它们进行 GROUP BY。

你真的在 V5R1 上吗？我不认为ROLLUP那么早起作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:12:51.487

尝试将小数转换为日期。

```
select digits(date), 
  year(date(
    substr(digits(date),1,4) concat 
    ''-'' concat 
    substr(digits(date),5,2) concat
    ''-'' concat substr(digits(date),7,2))) as year,
  month(date(
    substr(digits(date),1,4) concat 
    ''-'' concat 
    substr(digits(date),5,2) concat
    ''-'' concat substr(digits(date),7,2))) as month
from .... 
```

这里的关键是将其转换为字符，然后是子字符串并插入正确的日期分隔符。

然后为 GROUP BY 重新做一遍。这将是有史以来最可怕的 SQL 语句，但它全是客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:10:07.350

在黑暗中射击：您是否尝试过使用`INT`强制数据为整数？如`INT(INVOICE_DATE/100)`?

其他“拼写”可能是`INTEGER(INVOICE_DATE/100)`or `CAST(INVOICE_DATE/100 AS INTEGER)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:16:20.047

我认为问题在于汇总的语法。检查[文档](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0059215.html)。. . 该表达式`group by rollup`仅适用于所有列。所以，试试这个：

```
Group By ROLLUP (COMPETITOR_NAME,
    INVOICE_DATE/100,
    OVERRIDE_TYPE,
    CUSTOMER_NUMBER) 
```

或者对不同的组合使用分组集。

另外，我建议您明确使用整数除法。所以，替换`\`为`idiv`：

```
invoice_date idiv 100 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T18:44:49.037

事实证明，答案相当简单。问题是我没有在`Order By`. 这似乎并不重要，但是一旦我这样做了，整个事情就奏效了。

我确实得到了一个十进制的答案。我决定通过使用舍入来解决这个问题，这似乎进展顺利。这是我为好奇而最终得到的代码：

```
Select  Count(COMPETITOR_NAME) as "STORE COUNT",
    COMPETITOR_NAME,
    ROUND(INVOICE_DATE/100, 0) As "Month_Date",
    CUSTOMER_NUMBER,   
    OVERRIDE_TYPE,
    Sum (QTY_SOLD) as "Quantity Sold",
    Sum (EXT_ORIGINAL_PRICE) as "Sum Original Price", 
    Sum (EXT_OVERRIDE_PRICE) as "Sum Override Price", 
    Sum (EXT_VARIANCE) As "Sum Variance",
    Sum (INTERNAL_COST) as "Internal Cost"
From    DA******.DW*******.PRCOVRWK
Where   INVOICE_DATE > 20100201
Group By    COMPETITOR_NAME,
    ROUND(INVOICE_DATE/100, 0),
    OVERRIDE_TYPE,
    CUSTOMER_NUMBER
Order By    COMPETITOR_NAME,
    ROUND(INVOICE_DATE/100, 0),
    SUM (EXT_VARIANCE),
    CUSTOMER_NUMBER 
```

所以，是的，尽管看起来很傻，DB2 V5,1 只是真的想让我在`Select`,`Group By`和`Order By`. 好吧，几乎相同，您可以`As`在其中使用`Select`但不能在其他任何地方使用。

希望这可以帮助其他似乎遇到类似问题的人。

# sql - SQL DBCC 命令

> ID：15068947
> 
> 赞同：0
> 
> 时间：2013-02-25T14:12:16.810
> 
> 标签：sql, database, sql-server-2008, dbcc

我只是想知道 dbcc shrinkfile(m,n) connamd 的含义。说如果我运行命令

```
dbcc shrinkfile(1,2000) 
```

1,2000 表示什么？

dbcc 与普通 sql 收缩有何不同（当您右键单击 DB 和任务>收缩>文件时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:19:26.850

是的链接如上，但只是对 Shrinkfile 说不，它相当于使用一个正确索引和排列的图书馆，其中一半是借出的，并以尽可能最快的方式将它们全部移到最少数量的书架上。是的，它占用的空间更少，但现在试着找一本特定的书，你只是不知道它被移到了哪里。如果您要完全清除数据库，那么也许可以。是的，我也知道碎片整理有助于文件系统，但它们是不同的野兽——碎片整理 => 重新索引，Shinkfile => 片段

# maven - 如何让 clojure:nrepl 与 clojure-maven-plugin 一起使用？

> ID：15068950
> 
> 赞同：0
> 
> 时间：2013-02-25T14:12:26.057
> 
> 标签：maven, plugins, clojure, nrepl, clojure-maven-plugin

如果我输入：

```
mvn -f clojure-maven-nrepl.pom.xml clojure:nrepl 
```

我得到：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Required goal not found: clojure:nrepl in com.theoryinpractise:clojure-maven-plugin:1.3.13
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 seconds
[INFO] Finished at: Mon Feb 25 14:07:04 GMT 2013
[INFO] Final Memory: 3M/15M
[INFO] ----------------------------------------------- 
```

哪里`clojure-maven-nrepl.pom.xml`是：

```
<project>

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.aspden</groupId>
  <artifactId>clojure-maven-nrepl</artifactId>
  <version>1.0-SNAPSHOT</version>
  <name>clojure-maven-nreple</name>
  <description>maven, clojure, emacs, nrepl: simplest useful maven project</description>

  <packaging>clojure</packaging>

  <dependencies>
    <dependency>
      <groupId>org.clojure</groupId>
      <artifactId>clojure</artifactId>
      <version>1.4.0</version>
    </dependency>
    <dependency>
      <groupId>org.clojure</groupId>
      <artifactId>tools.nrepl</artifactId>
      <version>0.2.1</version>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
    <groupId>com.theoryinpractise</groupId>
    <artifactId>clojure-maven-plugin</artifactId>
    <version>1.3.13</version>
        <extensions>true</extensions>
      </plugin>
    </plugins>
  </build>

</project> 
```

我应该改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:09:53.850

clojure:nrepl 在 1.3.13 中不可用，您需要 1.3.14-SNAPSHOT，您需要手动编译和安装。

# php - IE-only css 只影响 IE 中的页面，而不影响其他浏览器

> ID：15068954
> 
> 赞同：0
> 
> 时间：2013-02-25T14:12:42.380
> 
> 标签：php, internet-explorer, google-chrome

我正在处理的网页在 IE 以外的其他浏览器中运行良好。我正在使用 IE 10（预览版），所以我可以使用阴影，但`<br />`它不起作用，所以我制作了一个 IE 特定的 css，这样如果浏览器是 IE，它会加载 IE css。好吧，当我去更改 .homepagetable 的边距时，它也会将 css 应用于其他浏览器。main.css 和 all-ie-only.css 的区别在于 .homepagetable。

索引.php

```
 <? include("inc/incfiles/header.inc.php"); ?>
    <?
    $reg = @$_POST['reg'];
    //declaring variables to prevent errors
    $fn = ""; //First Name
    $ln = ""; //Last Name
    $un = ""; //Username
    $em = ""; //Email
    $em2 = ""; //Email 2
    $pswd = ""; //Password
    $pswd2 = ""; //Password 2
    $d = ""; //Sign up Date
    $u_check = ""; //Check if username exists
    //registration form
    $fn = strip_tags(@$_POST['fname']);
    $ln = strip_tags(@$_POST['lname']);
    $un = strip_tags(@$_POST['username']);
    $em = strip_tags(@$_POST['email']);
    $em2 = strip_tags(@$_POST['email2']);
    $pswd = strip_tags(@$_POST['password']);
    $pswd2 = strip_tags(@$_POST['password2']);
    $d = date("y-m-d"); // Year - Month - Day

    if ($reg) {
    if ($em==$em2) {
    // Check if user already exists
    $u_check = mysql_query("SELECT username FROM users WHERE username='$un'");
    // Count the amount of rows where username = $un
    $check = mysql_num_rows($u_check);
    if ($check == 0) {
    //check all of the fields have been filled in
    if ($fn&&$ln&&$un&&$em&&$em2&&$pswd&&$pswd2) {
    // check that passwords match
    if ($pswd==$pswd2) {
    // check the maximum length of username/first name/last name does not exceed 25 characters
    if (strlen($un)>25||strlen($fn)>25||strlen($ln)>25) {
    echo "The maximum limit for username/first name/last name is 25 characters!";
    }
    else
    {
    // check the length of the password is between 5 and 30 characters long
    if (strlen($pswd)>30||strlen($pswd)<5) {
    echo "Your password must be between 5 and 30 characters long!";
    }
    else
    {
    //encrypt password and password 2 using md5 before sending to database
    $pswd = md5($pswd);
    $pswd2 = md5($pswd2);
    $query = mysql_query("INSERT INTO users VALUES ('','$un','$fn','$ln','$em','$pswd','d','0')");
    die("<h2>Welcome to Rebel Connect</h2>Login to your account to get started.");
    }
    }
    }
    else {
    echo "Your passwords don't match!";
    }
    }
    else 
    {
    echo "Please fill in all fields";
    }
    }
    else
    {
    echo "Username already taken.";
    }
    }
    else {
    echo "Your e-mails don't match!";
    }
    }
    ?>
    <?
    //Login Script
    if (isset($_POST["user_login"]) && isset($_POST["password_login"])) {
        $user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["user_login"]); // filter everything but numbers and letters
        $password_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["password_login"]); // filter everything but numbers and letters
        $password_login=md5($password_login);
        $sql = mysql_query("SELECT id FROM users WHERE username='$user_login' AND password='$password_login' LIMIT 1"); // query the person
        //Check for their existance
        $userCount = mysql_num_rows($sql); //Count the number of rows returned
        if ($userCount == 1) {
            while($row = mysql_fetch_array($sql)){
                $id = $row["id"];
        }
             $_SESSION["id"] = $id;
             $_SESSION["user_login"] = $user_login;
             $_Session["password_login"] = $password_login;
             exit("<meta http-equiv=\"refresh\" content=\"0\">");
             } else {
             echo 'That information is incorrect, try again';
             exit();
        }
    }
    ?>
    <table class="homepageTable">
            <tr>
                <td width="60%" valign="top">
                 <h2>Already a member? Login below.</h2>
                 <form action="index.php" method="post" name="form1" id="form1">
                    <input type="text" size="25" name="user_login" id="user_login" placeholder="username" />
                    <br />
                    <input type="password" size="25" name="password_login" id="password_login" placeholder="password" />
                    <br />
                    <input type="submit" name="button" id="button" value="Login to your account!">
                 </form>
                </td>
                <td width="40%" valign="top">
                 <h2>Sign up below...</h2>
                <form action="#" method="post">
                <input type="text" size="25" name="fname" placeholder="First Name" value="<? echo $fn; ?>">
                <input type="text" size="25" name="lname" placeholder="Last Name" value="<? echo $ln; ?>">
                <input type="text" size="25" name="username" placeholder="Username" value="<? echo $un; ?>">
                <input type="text" size="25" name="email" placeholder="Email" value="<? echo $em; ?>">
                <input type="text" size="25" name="email2" placeholder="Re-enter Email" value="<? echo $em2; ?>">
                <input type="password" size="25" name="password" placeholder="password" value="<? echo $pswd; ?>">
                <input type="password" size="25" name="password2" placeholder="Re-enter Password" value="<? echo $pswd2; ?>"><br />
                <input type="submit" name="reg" value="Sign Up!">
                </form>
                </td>
            </tr>
    </table>
    </body>
    </html>

header.inc.php

<?
include ("inc/scripts/mysql_connect.inc.php");
session_start();
if (!isset($_SESSION["user_login"])) {

}
else
{
header("location: home.php");
}
?>
<html>
<head>
<if !IE>
<link href="css/main.css" rel="stylesheet" type="text/css">
<if IE>
<link rel="stylesheet" type="text/css" href="css/all-ie-only.css" />
<title>Rebel Reach - PHS Student Social Network</title>
</head>
<body>
<div class="headerMenu">
      <div id="wrapper">
            <div class="logo">
                  <img src="img/find_friends_logo.png">
            </div>
            <div class="search_box">
                  <form method="get" action="search.php" id="search">
                  <input name="q" type="text" size="60" placeholder="Search..." />
                  </form>
            </div>
            <div id="menu">
                  <a href="#">Home</a>
                  <a href="#">About</a>
                  <a href="#">Sign Up</a>
                  <a href="#">Login</a>
            </div>
      </div>
</div>
<br />
<br />
<br />
<br /> 
```

main.css

```
* {
    margin: 0px;
    padding: 0px;
    font-family: Arial;
    font-size: 12px;
    background-color: #eff5f9
}
.headerMenu {
    background-image:url(../img/menu_bg.png);
    height: 56px;
    border-bottom: 0px;
    width: 100%;
    position:fixed;
}
#wrapper {
    margin-left: auto;
    margin-right: auto;
    width: 1000px;
    padding-top: 0px;
    padding-bottom: 0px;
    background-image:url(../img/menu_bg.png);
}
.logo {
    margin-left: 0px;
    width: 125px;
}
.logo img {
    padding-top: 7px;
    width: 150px;
    height: 38px;
    background-image:url(../img/menu_bg.png);
}
.search_box {
    background-image: url(../img/menu_bg.png);
    position: absolute;
    top: 13px;
    margin-left: 150px;
    border:inset 2px
}
#search input[type="text"] {
    background: url(../img/search-white.png) no-repeat 10px 6px #666;
    outline: none;
    border: 0 none;
    font: bold 12px Arial,Helvetica,Sans-serif;
    width: 350px;
    padding: 6px 15px 6px 35px;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
    margin-bottom: 0px;
    margin-top: 0px;
}
#search input[type="text"]:focus {
    background: url(../img/search-dark.png) no-repeat 10px 6px #fcfcfc;
    color: #6a6f75;
    width: 350px;
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
}
@media screen and (max-width:1280px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 16px;
        margin-right: 4%;
    }
}
@media screen and (min-width:1280px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 16px;
        margin-right: 6%;
    }
}
@media screen and (min-width:1400px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 19px;
        margin-right: 10%;
    }
}
@media screen and (min-width:1920px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 19px;
        margin-right: 25%;
    }
}
#menu a {
    color: #ffffff;
    text-decoration: none;
    font-size: 14px;
    background-image:url(../img/menu_bg.png);
    background-repeat: no-repeat;
    padding-top: 16px;
    padding-bottom: 22px;
    padding-left: 10px;
    padding-right: 10px;
}
#menu a:hover {
    color: #ffffff;
    text-decoration: none;
    font-size: 14px;
    background-image:url(../img/menu_bg_hover_mouse_over.png);
    background-repeat: no-repeat;
    padding-top: 16px;
    padding-bottom: 22px;
    padding-left: 10px;
    padding-right: 10px;
}
h2 {
    font-family: Arial;
    font-size: 18px;
    padding: 5px;
    color: #0084C6;
}
input[type="text"] {
    background-color: #FFFFFF;
    border: 1px solid #E2E2E2;
    font-size: 15px;
    padding: 5px;
    width: 300px;
    margin-bottom: 3px;
    margin-top: 3px;
    outline:none;
}
input[type="text"]:hover {
    border: 1px solid #0084C6;
}
input[type="password"] {
    background-color: #FFFFFF;
    border: 1px solid #E2E2E2;
    font-size: 15px;
    padding: 5px;
    width: 300px;
    margin-bottom: 3px;
    margin-top: 3px;
    outline:none;
}
input[type="password"]:hover {
    border: 1px solid #0084C6;
}
input[type="submit"] {
    background-color: #006fc4;
    border: 1px solid #00508d;
    font-size: 15px;
    color: #FFFFFF;
    padding: 5px;
    margin-bottom: 3px;
    margin-top: 3px;
    border-radius: 7px;
}
.homepageTable {
    padding: 10px;
} 
```

all-ie-only.css

```
* {
    margin: 0px;
    padding: 0px;
    font-family: Arial;
    font-size: 12px;
    background-color: #eff5f9
}
.headerMenu {
    background-image:url(../img/menu_bg.png);
    height: 56px;
    border-bottom: 0px;
    width: 100%;
    position:fixed;
}
#wrapper {
    margin-left: auto;
    margin-right: auto;
    width: 1000px;
    padding-top: 0px;
    padding-bottom: 0px;
    background-image:url(../img/menu_bg.png);
}
.logo {
    margin-left: 0px;
    width: 125px;
}
.logo img {
    padding-top: 7px;
    width: 150px;
    height: 38px;
    background-image:url(../img/menu_bg.png);
}
.search_box {
    background-image: url(../img/menu_bg.png);
    position: absolute;
    top: 13px;
    margin-left: 150px;
    border:inset 2px
}
#search input[type="text"] {
    background: url(../img/search-white.png) no-repeat 10px 6px #666;
    outline: none;
    border: 0 none;
    font: bold 12px Arial,Helvetica,Sans-serif;
    width: 350px;
    padding: 6px 15px 6px 35px;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
    margin-bottom: 0px;
    margin-top: 0px;
}
#search input[type="text"]:focus {
    background: url(../img/search-dark.png) no-repeat 10px 6px #fcfcfc;
    color: #6a6f75;
    width: 350px;
    -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(0, 0, 0, 0.9) inset;
}
@media screen and (max-width:1280px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 16px;
        margin-right: 4%;
    }
}
@media screen and (min-width:1280px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 16px;
        margin-right: 6%;
    }
}
@media screen and (min-width:1400px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 19px;
        margin-right: 10%;
    }
}
@media screen and (min-width:1920px) {
    #menu {
        background-image:url(../img/menu_bg.png);
        position:absolute; top:0px; right:0px;
        height: 37px;
        padding-top: 19px;
        margin-right: 25%;
    }
}
#menu a {
    color: #ffffff;
    text-decoration: none;
    font-size: 14px;
    background-image:url(../img/menu_bg.png);
    background-repeat: no-repeat;
    padding-top: 16px;
    padding-bottom: 22px;
    padding-left: 10px;
    padding-right: 10px;
}
#menu a:hover {
    color: #ffffff;
    text-decoration: none;
    font-size: 14px;
    background-image:url(../img/menu_bg_hover_mouse_over.png);
    background-repeat: no-repeat;
    padding-top: 16px;
    padding-bottom: 22px;
    padding-left: 10px;
    padding-right: 10px;
}
h2 {
    font-family: Arial;
    font-size: 18px;
    padding: 5px;
    color: #0084C6;
    clear: both;
}
input[type="text"] {
    background-color: #FFFFFF;
    border: 1px solid #E2E2E2;
    font-size: 15px;
    padding: 5px;
    width: 300px;
    margin-bottom: 3px;
    margin-top: 3px;
    outline:none;
}
input[type="text"]:hover {
    border: 1px solid #0084C6;
}
input[type="password"] {
    background-color: #FFFFFF;
    border: 1px solid #E2E2E2;
    font-size: 15px;
    padding: 5px;
    width: 300px;
    margin-bottom: 3px;
    margin-top: 3px;
    outline:none;
}
input[type="password"]:hover {
    border: 1px solid #0084C6;
}
input[type="submit"] {
    background-color: #006fc4;
    border: 1px solid #00508d;
    font-size: 15px;
    color: #FFFFFF;
    padding: 5px;
    margin-bottom: 3px;
    margin-top: 3px;
    border-radius: 7px;
}
.homepageTable {
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:47:03.783

您绝对应该听听@SDC 关于安全漏洞的评论。这是一个比跨浏览器兼容性更重要的问题。

除此之外，您的代码不起作用，因为：

```
<if !IE>
<link href="css/main.css" rel="stylesheet" type="text/css">
<if IE>
<link rel="stylesheet" type="text/css" href="css/all-ie-only.css" /> 
```

无效。

IE10 应该符合与其他浏览器相同的标准。听起来 IE10 目前正在以怪癖模式运行。`<!DOCTYPE>`在您`<html>`应该解决问题之前立即放入。然后，您不需要使用条件。

如果您仍然坚持使用条件的想法，请尝试以下操作：

```
<link href="css/main.css" rel="stylesheet" type="text/css">
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="css/all-ie-only.css" />
<![endif]--> 
```

但是，这包括`main.css`和`all-ie-only.css`。

# jquery - jquery表排序

> ID：15068956
> 
> 赞同：-3
> 
> 时间：2013-02-25T14:12:48.243
> 
> 标签：jquery

我已经动态创建了一个表。该表加载数据表单数据库。这是以下代码。

```
$('#artistinfo').empty();
$('#artistinfo').append('<table  id="transactions" class="partner" width="100%" cellpadding="0" cellspacing="0" style="font-size:90%;" />');
$('#artistinfo table').append(
' <tr class="thead"><th valign="top">Artist</th><th valign="top">Release</th> <th valign="top">Score</th>  </tr>');
$('#artistinfo table').append('<tr>' +
'<td>' + artistname + '</td>' +
'<td>' + releasename + '</td>' +
'<td>' + score+ '</td>' +
'</tr>'
); 
```

我想按每个颜色对表格进行排序。jquery可以吗？

例如，分数是一个数字类型。我想按升序或降序排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:20:25.803

仅使用 jQuery 做您想做的事情会非常昂贵，因为默认情况下不会提供此功能。我不会重新发明轮子，而是通过这些插件：[**DataTables**](http://datatables.net/)和[**jqGrid**](http://www.trirand.com/blog/)。这两个提供了相当不错的 API 和广泛的功能，而且似乎它们也旨在提供良好的性能。

当然，显示网格的插件要多得多，你可以试试谷歌。

# java - 静态变量与易失性

> ID：15068962
> 
> 赞同：6
> 
> 时间：2013-02-25T14:13:26.253
> 
> 标签：java, multithreading

我只是从线程的角度问......可能回答了很多次，但请帮助我理解这一点。

参考这里的帖子 [Volatile Vs Static in java](https://stackoverflow.com/questions/2423622/volatile-vs-static-in-java)

询问一个静态变量值也将是所有线程的一个值，那么我们为什么要选择 volatile 呢？我找到了以下示例：

```
public class VolatileExample {  
public static void main(String args[]) {  
    new ExampleThread("Thread 1 ").start();  
    new ExampleThread("Thread 2 ").start();  
}  

}  
class ExampleThread extends Thread {  
private static volatile int testValue = 1;  
public ExampleThread(String str){  
    super(str);  
}  
public void run() {  
    for (int i = 0; i < 3; i++) {  
        try {  
            System.out.println(getName() + " : "+i);  
            if (getName().compareTo("Thread 1 ") == 0)  
            {  
                testValue++;  
                System.out.println( "Test Value T1: " + testValue);  
            }  
            if (getName().compareTo("Thread 2 ") == 0)  
            {  
                System.out.println( "Test Value T2: " + testValue);  
            }                 
            Thread.sleep(1000);  
        } catch (InterruptedException exception) {  
            exception.printStackTrace();  
          }  
       }  
       }  
       } 
```

输出：

```
Thread 1 : 0
Test Value T1: 2
Thread 2 : 0
Test Value T2: 2
Thread 1 : 1
Test Value T1: 3
Thread 2 : 1
Test Value T2: 3
Thread 1 : 2
Test Value T1: 4
Thread 2 : 2
Test Value T2: 4 
```

如果我从 testValue 中删除静态，则获得的结果：

```
Thread 1 : 0
Test Value T1: 2
Thread 2 : 0
Test Value T2: 1
Thread 1 : 1
Test Value T1: 3
Thread 2 : 1
Test Value T2: 1
Thread 1 : 2
Test Value T1: 4
Thread 2 : 2
Test Value T2: 1 
```

为什么线程 2 没有读取更新的值？如果必须将其设为 static ，那么 volatile 有什么用？

有人可以提供一个很好的 volatile 示例的链接，其中该变量未声明为静态的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:17:19.520

的用途`volatile`是确保所有线程同时看到**相同**的值。本质上是说这个变量永远不应该被缓存。

很难在代码中演示，因为缓存策略从 cpu 到 cpu，从 JRE 到 JRE。

`volatile`对 JRE 的看法是，*如果您想缓存这个值，因为您认为这样做可以使代码运行得更快一点……***不要***！****...我对编程的了解比您多得多，而且我毫无疑问地知道，如果您这样做，您将破坏我的代码。*.**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T14:19:18.927

问题是 ++ 不是原子的。该代码应`AtomicInteger`改为使用。使用该`static`变量，两个线程都在尝试更新相同的值，而 ++ 实际上是 3 个操作：get、+1 和 store。这意味着两个线程之间存在竞争条件并且它们正在相互覆盖。

> 为什么线程 2 没有读取更新的值？如果必须将其设为 static ，那么 volatile 有什么用？

`static`并`volatile`做不同的事情。 `static`使字段与类相关联，而不是对象实例。 `volatile`强制对该字段的任何读取或写入跨越内存屏障。这允许多个线程读取和更新一个公共字段，但这并*不能*保护您免受多个操作的影响。如果您使变量*不是*静态的，那么您将不需要，`volatile`因为每个线程都将使用它自己的字段实例。

你应该使用`AtomicInteger`. 这包装了 a`volatile int`但也提供了对增量操作的特殊处理：

```
private static AtomicInteger testValue = new AtomicInteger(1);
...
testValue.incrementAndGet(); 
```

> 有人可以提供一个很好的 volatile 示例的链接，其中该变量未声明为静态的。

`volatile`当它由多个线程共享时，您将需要一个非静态字段。例如，如果您将`testValue`up 移到`VolatileExample`类中，然后将类的相同实例传递给`VolatileExample`两个线程，以便它们可以访问`testValue`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:21:22.453

在这种情况下，当 tou 删除`static`修饰符时，您更改了变量，因为现在，每个`ExampleThread`都有自己的`testValue`，为此，每个线程实例的存储值是不同的。

`static`修饰符的含义：

> 有时，您希望拥有所有对象共有的变量。这是通过静态修饰符完成的。声明中带有 static 修饰符的字段称为静态字段或类变量。它们与类相关联，而不是与任何对象相关联。类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。任何对象都可以更改类变量的值...

参考：[了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

关于`volatile`，如果您尝试另一种测试，将`testValue`变量移动到 class `VolatileExample`，如下所示：

```
 public class VolatileExample {
    private volatile int testValue = 1;
 ...
 } 
```

然后，删除`testVariable`from`ExampleThread`并运行代码。它的输出应该和第一个一样。

`volatile`修饰符的含义：

> 使用 volatile 变量可以降低内存一致性错误的风险，因为对 volatile 变量的任何写入都会与后续读取该相同变量建立起之前发生的关系。这意味着对 volatile 变量的更改始终对其他线程可见

参考：[原子访问](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T04:56:59.163

您的最后一个问题“有人可以链接到一个很好的 volatile 示例，其中该变量未声明为静态的。” 为了清楚地理解这个概念，我举了一个例子。

```
 public class VolatileExample {

   // public static volatile int testValue = 1;
    public  int nonstatic=8;
    public static void main(String args[]) {
        VolatileExample volatileExample=new VolatileExample();
        new ExampleThread("Thread 1 ",volatileExample).start();
        new ExampleThread("Thread 2 ",volatileExample).start();
    }

}
class ExampleThread extends Thread {
VolatileExample volatileExample;
    public ExampleThread(String str,VolatileExample volatileExample){
        super(str);
        this.volatileExample=volatileExample;
    }
    public void run() {
        for (int i = 0; i < 3; i++) {
            try {
                if (getName().compareTo("Thread 1 ") == 0)
                {
                   volatileExample.nonstatic++;
                    System.out.println( "Test Value T1: " + volatileExample.nonstatic);

                }
                if (getName().compareTo("Thread 2 ") == 0)
                {
                    System.out.println( "Test Value T2: " + volatileExample.nonstatic);
                    Thread.sleep(1);
                }
               // Thread.sleep(1000);
            } catch (InterruptedException exception) {
                exception.printStackTrace();
            }
        }
    }
} 
```

现在请通过使 public int nonstatic=8; 来查看更改。易挥发的

以下将是当它变得易变时的输出，

测试值 T1：9 测试值 T1：10 测试值 T1：11 测试值 T2：11 测试值 T2：11 测试值 T2：11

进程以退出代码 0 结束

以下是非易失性的结果： 测试值 T1：9 测试值 T2：9 测试值 T1：10 测试值 T1：11 测试值 T2：11 测试值 T2：11

进程以退出代码 0 结束

观察：由于 Volatile keyWord 使线程直接将其写入主内存，因此线程更快地返回到循环中，因此当它变为 volatile 时，线程 1 更快地完成了任务，甚至在线程 2 开始之前就回到了循环中。

另一方面，使其成为非易失性，使线程更新其 locl 缓存，然后将其报告给主内存......所以在这个循环中，线程 2 进入了竞争。

请注意，我在 VolatileExample 类中有“非静态”变量，而不是在 ExampleThread 中来演示这一点。

您的另一个问题是：为什么线程 2 没有读取更新的值？如果必须将其设为 static ，那么 volatile 有什么用？

好吧，如果你让它 testvalue 非静态，那么它只不过是 ExampleThread 类的两个不同对象 Thread1 和 Thread2 处理他们自己的变量 testvalue.. 所以 volatile 并不重要..**

# c# - 我希望其他人向我解释这段代码

> ID：15068963
> 
> 赞同：0
> 
> 时间：2013-02-25T14:13:36.140
> 
> 标签：c#, linq, linq-to-entities

我有下面的代码，应该会给我带来一个用户列表。我正在测试“Take”功能来进行分页，但它不起作用。

```
using (MyContainer myContainer = new MyContainer())
{
    // Works
    var user = myContainer.User.Where(u => u.Name == Name).ToList();
    // The "Name" comes from User.Name
    // myContainer is generated by my edmx he inherits the ObjectContext in the design generated by edmx as it shows below
    //// public partial class MyContainer : ObjectContext

    // Does not work
    var foo = (from t in myContainer.User
               select t.Name).Take(10);

    return user;
} 
```

为什么与第一个如此相似不起作用。

抛出异常*“无法将 Lambda 表达式转换为类型‘字符串’，因为它不是委托类型”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:18:53.780

不要指望这 2 种形式的工作方式相同，因为它们是不同的。你可以像这样表达函数链中的第二个：

```
var foo = myContainer.User.Select(u => u.Name).Take(10); 
```

正如预期的那样，它不像第一种形式那样工作，因为它在第一种形式返回`IEnumerable<string>`时返回`List<User>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:19:02.470

第一个表达式返回`User`s 的列表。

第二个表达式返回一个`Name`s 列表（名称可能是一个字符串）。

您可能应该执行以下操作：

```
var user = myContainer.User.Where(u => u.Name == Name).Take(10).ToList(); 
```

作为旁注，我相信你需要更多的分页，我猜使用 .Skip( *something* ) .Take( *something* )

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T14:26:15.113

尝试`myContainer.User.Take(10).ToList()`获取前 10 个用户`myContainer.User.Take(10).Select(iter => iter.Name).ToList()`的列表或获取前 10 个名称的列表。

# html - CSS分割边框颜色

> ID：15068967
> 
> 赞同：4
> 
> 时间：2013-02-25T14:13:43.903
> 
> 标签：html, css, styles

我无法弄清楚如何使用 CSS 在元素上应用分割边框。

我想要达到的效果是这样的：

![在此处输入图像描述](../Images/32030588a7163cca33ae310e878814f9.png)

红线和灰线占元素宽度的百分比。最好，我想将此效果应用于使用单个类的元素。

**编辑：**对于那些要求代码示例的人：

```
<!-- spans width 100% -->
<div id="wrapper">
    <h1 class="title">DDOS Protection </h1>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:18:32.567

红色文字和红色下划线？为此有一些简单的 CSS。

```
<span style='color:red; border-bottom: 1px solid red;'>DDOS</span>
<span style='color:#999; border-bottom: 1px solid #999;'>Protection</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:19:04.403

好吧，假设您想使用单个类，并且没有看到您的确切标记，这将起作用：

```
<div class="message">
    <span>DDOS</span>
    <span>Protection</span>
</div> 
```

然后你的 CSS 可能看起来像这样：

```
.message span {
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
    color: #ccc;
}
    .message span:first-child {
        border-bottom-color: red;
        color: red;
        margin-right: 10px;
    } 
```

这是一个[**jsFiddle 演示**](http://jsfiddle.net/H8CSR/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:27:33.723

您也可以尝试使用`:before`and `:after`：

```
.line {
    background-color: #DDD;
    padding: 5px 10px;
    position: relative;
}
.line:before, .line:after {
    content: '';
    width: 10%;
    height: 2px;
    background-color: red;
    position: absolute;
    bottom: 0;
    left: 0;
}
.line:after {
    width: 90%;
    background-color: green;
    left: 10%;
} 
```

[http://jsfiddle.net/DHDuw/](http://jsfiddle.net/DHDuw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:28:29.510

好的，我做了一个类似的，但被要求垂直，但现在正在改变渐变方向，这样它会帮助你

[**演示**](http://jsfiddle.net/guvdU/1/)（在**Chrome**上工作，如果有人知道跨浏览器，请随时编辑，因为我使用的是旧浏览器所以无法测试）

CSS

```
div {
  font: 40px Arial;
  background: -webkit-gradient(linear, left top, right top, color-stop(0%,#ff0505), color-stop(50%,#ff0000), color-stop(50%,#000000), color-stop(100%,#000000));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

# android - 打开非移动版网站

> ID：15068975
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:02.567
> 
> 标签：android

我想在 android 应用程序中打开网站的非移动版本

我的应用程序中有链接，我用（jericho-html）解析网址。

当我解析例如（example.com）的网址时，应用程序会解析网站（mobile.example.com）上的移动版本。

由于我解析的网站的移动版本已损坏，我无法获得结果。
如何在我的应用程序中打开该网站的桌面版本？

```
Source source = new Source(new URL(sourceUrlString));  
source.fullSequentialParse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:19:41.307

```
 URL url = new URL("http://www.google.com");
 conn.setRequestProperty("User-Agent", "Mozilla");
 Source source = new Source(conn); 
```

取自[如何使用 Jericho 解析器设置用户代理](https://stackoverflow.com/questions/9769538/how-to-set-user-agent-with-jericho-parser)

# php - 将对象内的相同数组值分组到相同的键中

> ID：15068980
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:11.710
> 
> 标签：php, arrays, multidimensional-array

我有下面的数组：

```
[1]=>
  array(2) {
    [0]=>
        object(stdClass)#23 (7) {
          ["AddressesTableID"]=> string(1) "8"
          ["AccreditNo"]=> string(13) "5129876de28ff"
          ["Type"]=> string(4) "home"
          ["Street"]=> string(34) "Wallace, Village, Under the bridge"
          ["Municipality"]=> string(8) "Tortuous"
          ["Province"]=> string(8) "Sardonic"
          ["ContactNo"]=> string(8) "92012010"
        }
    [1]=>
        object(stdClass)#24 (7) {
          ["AddressesTableID"]=> string(1) "9"
          ["AccreditNo"]=> string(13) "5129876de28ff"
          ["Type"]=> string(6) "office"
          ["Street"]=> string(25) "Rasputin Query, Palpitate"
          ["Municipality"]=> string(7) "Opulent"
          ["Province"]=> string(6) "Number"
          ["ContactNo"]=> string(8) "29101011"
    }
  } 
```

你们能帮我把它变成：

所有的值都作为一个数组分组到相似的键中？

```
["AccreditNo"]=> array(2) { "5129876de28ff", "GKIJUGUIKGI" }
["Type"]=> array(2) { "home", "home" }
["Street"]=> ...
["Municipality"]=> ... 
["Province"]=> ...
["ContactNo"]=> ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:17:24.963

尝试：

```
$input  = array( /* your input data*/ );
$output = array();

foreach ( $input as $data ) {
  foreach ( $data as $key => $value ) {
    if ( !isset($output[$key]) ) {
      $output[$key] = array();
    }
    $output[$key][] = $value;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:27:17.630

您可以使用 array_merge_recursive() 函数，如下所示：

```
$arr = array_merge_recursive($arr1, $arr2) 
```

有关更多信息，请参阅此处：[http ://www.php.net/manual/en/function.array-merge-recursive.php](http://www.php.net/manual/en/function.array-merge-recursive.php)

# r - 删除 R 中的常量列

> ID：15068981
> 
> 赞同：29
> 
> 时间：2013-02-25T14:14:17.663
> 
> 标签：r, constants

收到此错误时，我正在使用 prcomp 函数

```
Error in prcomp.default(x, ...) : 
cannot rescale a constant/zero column to unit variance 
```

我知道我可以手动扫描我的数据，但是 R 中是否有任何函数或命令可以帮助我删除这些常量变量？我知道这是一项非常简单的任务，但我从未遇到过任何执行此操作的函数。

谢谢，

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-25T14:17:23.133

这里的问题是您的列方差等于零。您可以通过这种方式检查数据框的哪一列是恒定的，例如：

```
df <- data.frame(x=1:5, y=rep(1,5))
df
#   x y
# 1 1 1
# 2 2 1
# 3 3 1
# 4 4 1
# 5 5 1

# Supply names of columns that have 0 variance
names(df[, sapply(df, function(v) var(v, na.rm=TRUE)==0)])
# [1] "y" 
```

因此，如果要排除这些列，可以使用：

```
df[,sapply(df, function(v) var(v, na.rm=TRUE)!=0)] 
```

**编辑：**事实上，它更容易使用`apply`。像这样的东西：

```
df[,apply(df, 2, var, na.rm=TRUE) != 0] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-03-02T11:55:30.680

我猜这个问答是一个流行的谷歌搜索结果，但是对于一个大矩阵来说答案有点慢，而且我没有足够的声誉来评论第一个答案。因此，我发布了该问题的新答案。

对于大矩阵的每一列，检查最大值是否等于最小值就足够了。

```
df[,!apply(df, MARGIN = 2, function(x) max(x, na.rm = TRUE) == min(x, na.rm = TRUE))] 
```

这是测试。与第一个答案相比，减少了 90% 以上的时间。它也比对该问题的第二条评论的答案更快。

```
ncol = 1000000
nrow = 10
df <- matrix(sample(1:(ncol*nrow),ncol*nrow,replace = FALSE), ncol = ncol)
df[,sample(1:ncol,70,replace = FALSE)] <- rep(1,times = nrow) # df is a large matrix

time1 <- system.time(df1 <- df[,apply(df, 2, var, na.rm=TRUE) != 0]) # the first method
time2 <- system.time(df2 <- df[,!apply(df, MARGIN = 2, function(x) max(x, na.rm = TRUE) == min(x, na.rm = TRUE))]) # my method
time3 <- system.time(df3 <- df[,apply(df, 2, function(col) { length(unique(col)) > 1 })]) # Keith's method

time1
#   user  system elapsed 
# 22.267   0.194  22.626 
time2
#   user  system elapsed 
#  2.073   0.077   2.155 
time3
#   user  system elapsed 
#  6.702   0.060   6.790
all.equal(df1, df2)
# [1] TRUE
all.equal(df3, df2)
# [1] TRUE 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-11-15T13:08:12.683

由于这个问答是一个流行的谷歌搜索结果，但是对于一个大矩阵来说答案有点慢，而且@raymkchow 版本对于 NA 来说很慢，我建议使用指数搜索和`data.table`功率的新版本。

这是我在[dataPreparation](https://CRAN.R-project.org/package=dataPreparation)包中实现的一个功能。

首先构建一个示例 data.table，行多于列（通常是这种情况）和 10% 的 NA

```
ncol = 1000
nrow = 100000
df <- matrix(sample(1:(ncol*nrow),ncol*nrow,replace = FALSE), ncol = ncol)
df <- apply (df, 2, function(x) {x[sample( c(1:nrow), floor(nrow/10))] <- NA; x} ) # Add 10% of NAs
df[,sample(1:ncol,70,replace = FALSE)] <- rep(1,times = nrow) # df is a large matrix
df <- as.data.table(df) 
```

然后对所有方法进行基准测试：

```
time1 <- system.time(df1 <- df[,apply(df, 2, var, na.rm=TRUE) != 0, with = F]) # the first method
time2 <- system.time(df2 <- df[,!apply(df, MARGIN = 2, function(x) max(x, na.rm = TRUE) == min(x, na.rm = TRUE)), with = F]) # raymkchow
time3 <- system.time(df3 <- df[,apply(df, 2, function(col) { length(unique(col)) > 1 }), with = F]) # Keith's method
time4 <- system.time(df4 <- df[,-which_are_constant(df, verbose=FALSE)]) # My method 
```

结果如下：

```
time1 # Variance approch
#   user  system elapsed 
#   2.55    1.45    4.07
time2 # Min = max approach
#   user  system elapsed 
#  2.72      1.5    4.22
time3 # length(unique()) approach
#   user  system elapsed 
#    6.7    2.75    9.53
time4 # Exponential search approach
#   user  system elapsed 
#   0.39    0.07    0.45
all.equal(df1, df2)
# [1] TRUE
all.equal(df3, df2)
# [1] TRUE
all.equal(df4, df2)
# [1] TRUE 
```

`dataPreparation:which_are_constant`比其他方法快 10 倍。

此外，您拥有的行越多，使用起来就越有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-24T16:36:56.627

如果您正在寻求在 df 中返回非常量变量的 dplyr 解决方案，我建议您使用以下方法。`%>% colnames()`或者，如果需要列名，您可以添加：

```
library(dplyr)
df <- data.frame(x = 1:5, y = rep(1,5))
# returns dataframe
var_df <- df %>%
  select_if(function(v) var(v, na.rm=TRUE) != 0)  
var_df %>% colnames() # returns column names 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-24T10:18:32.247

Keith 评论的 tidyverse 版本：

```
df %>% purrr::keep(~length(unique(.x)) != 1) 
```

# c# - 使用 LINQ 在组合框中显示数据集的表名

> ID：15068982
> 
> 赞同：2
> 
> 时间：2013-02-25T14:14:21.377
> 
> 标签：c#, .net, linq

我有一个`DataSet`包含多个`DataTable`，我想获取表名并将它们显示在组合框中。下面的代码运行良好，但我如何将此代码转换为`LINQ`.

```
foreach (DataTable dt in objDataset.Tables)
  {
    cboTables.Items.Add(dt.TableName);
  } 
```

这里`objDataset`是`DataSet`，'cboTables' 是`ComboBox`WPF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:17:41.470

```
cboTables.Items.AddRange(objDataset.Tables.Cast<DataTable>().Select(iter => iter.TableName)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:37:34.597

试试这个 ：

```
 cboTables.ItemsSource = objDataset.Tables.OfType<DataTable>().Select(dt => dt.TableName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T14:16:51.380

可能是这个作品。试一下。

```
objDataset.Tables.ToList<DataTable>().ForEach( dt => { cboTables.Items.Add(dt.TableName) }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T14:16:51.487

这是一种使用方式`ForEach`，但我不建议仅使用 LINQ 来使用它，因为您必须使用以下方式转换您的集合`ToList`：

```
objDataset.Tables.ToList().ForEach(t => cboTables.Items.Add(t.TableName)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T14:17:16.663

为什么甚至使用 foreach 只是做一个选择并将其设置为 ComboBox 的 ItemsSource。

cboTables.ItemsSource = objDataSet.Tables.OfType().Select(dt => dt.TableName);

# jquery-mobile - Android 上的 jQuery Mobile：页面加载

> ID：15068985
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:23.560
> 
> 标签：jquery-mobile

在我开始使用 jQM 之前，我有一个在 Android 上运行良好的 Web 应用程序。在桌面上使用 jQM 仍然可以正常运行...

问题是当我使用“window.location.href = newLocation;”加载“新 URL”时 新页面第一次加载正常，但下次页面显示正常但随后消失，我只能看到第一页的页眉和页脚（不是第二页）。当我刷新时，我看到第二页没问题。让它工作的另一种方法是始终刷新第一页 b4 启动第二页。

我试图禁用页面转换和 Ajax 但没有成功。

如果我运行（我猜这很愚蠢）： $.mobile.changePage(newLocation, { transition: "none"}); window.location.href = 新位置；

它总是有效，但有时我会收到“加载页面错误”。

有任何想法吗？$.mobile.changePage(newLocation, { transition: "none"}); 一个人是不行的……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:00:23.650

这是一个“绕过”解决方案。它有效，但可能有更好的......

首先，我尝试添加一些 JS 以在从第二个页面返回时强制重新加载第一页，但没有执行 JS...

然后我看到[在 Firefox 历史中旅行后，JavaScript 不会运行](https://stackoverflow.com/questions/2638292/after-travelling-back-in-firefox-history-javascript-wont-run)，只是添加了“window.onunload = function(){};” 到第一页。这可以防止缓存第一页，现在一切正常。

看起来页面缓存导致了问题，但我不知道为什么这意味着 jQM 失败......

# python - Flask-SQLAlchemy 不使用 create_all() 创建表

> ID：15068988
> 
> 赞同：5
> 
> 时间：2013-02-25T14:14:27.350
> 
> 标签：python, flask, flask-sqlalchemy

我有一个使用 Flask-SQLAlchemy 的 Flask 应用程序。在我的单元测试中，我初始化了应用程序和数据库，然后调用`db.create_all()`，由于某种原因，它看起来没有拾取我的任何模型，所以没有创建任何表。

因为我有两个数据库，所以我在我的模型中都`__tablename__`使用了。`__bind_key__`

我的配置：

```
SQLALCHEMY_DATABASE_URI = 'sqlite://'

SQLALCHEMY_BINDS = {
    'db1': SQLALCHEMY_DATABASE_URI,
    'db2': SQLALCHEMY_DATABASE_URI
} 
```

`setUp()`在我的单元测试中减少我的方法的版本：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy

class APITestCase(unittest.TestCase):

    app = Flask(__name__)
    db = SQLAlchemy(app)
    db.create_all() 
```

这是我的两个模型的示例，每个绑定类型中的一个：

```
class Contact(db.Model):

    __tablename__ = 'contact'
    __bind_key__ = 'db1'

    id = db.Column(db.Integer, primary_key=True)
    first_name = db.Column(db.String(255))
    last_name = db.Column(db.String(255))
    ...

    def __init__(first_name, last_name):
        self.first_name = first_name
        self.last_name = last_name
        ...

class BaseUser(db.Model):

    __tablename__ = 'User__GeneralUser'
    __bind_key__ = 'db2'

    id = db.Column(db.Integer, primary_key=True)
    username = db.Column('Username', db.String(100))
    first_name = db.Column('FirstName', db.String(100))
    last_name = db.Column('Surname', db.String(100))
    ...

    def __init__(username, first_name, last_name):
        self.username = username
        self.first_name = first_name
        self.last_name = last_name
        ... 
```

我错过了什么明显的东西吗？Flask-SQLAlchemy 如何知道在哪里寻找我的模型来创建关联表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T14:26:16.077

在您的单元测试中，您不应该创建 SQLAlchemy 对象（'db'）的新实例，您应该导入模型从其下降的实例：

模型.py：

```
from flask.ext.sqlalchemy import SQLAlchemy
db = SQLAlchemy()

class Contact(db.Model):
    ... 
```

测试.py：

```
from models import db
from flask import Flask
import unittest

class TestExample(unittest.TestCase):

    def setUp(self):
        self.app = Flask(__name__)
        db.init_app(self.app)
        with self.app.app_context():
            db.create_all() 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-11-01T12:32:54.923

您的 SQLALCHEMY_DATABASE_URI 错误，请在此处阅读如何配置引擎 Sqlite 数据库[http://docs.sqlalchemy.org/en/rel_0_9/core/engines.html#sqlite](http://docs.sqlalchemy.org/en/rel_0_9/core/engines.html#sqlite)

如果您从未体验过，请查看此 repo 并应用于您的应用程序 :) [https://github.com/Fird0s/Banda-Maps/blob/master/models.py](https://github.com/Fird0s/Banda-Maps/blob/master/models.py)

# ipad - GWT 开发模式 ipad

> ID：15068991
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:37.463
> 
> 标签：ipad, gwt

嗨，我想运行我的`gwt`项目`dev mode`并在我的 ipad 上打开它。我怎样才能做到这一点？我试图用我的 pcs ip 地址替换本地主机部分并打开网站，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:37:14.103

如果您使用 eclipse，Jetty 服务器只绑定在**localhost**接口上，这意味着当地址不是**localhost**时，即使指定的 IP 在同一台机器上，它也不会处理请求。要允许从其他计算机（或 iPad）连接，您需要在启动配置中修改此地址。

打开您的启动配置：

```
Run --> Run Configurations... --> Web Application --> [YourApplication] 
```

打开参数选项卡并在第一个文本框（程序参数）中添加以下参数：

**`-bindAddress [your ip address]`**

```
ex: -bindAddress 192.168.1.200 
```

看到[这个帖子](https://stackoverflow.com/questions/3944164/debug-gwt-application-in-a-remote-browser)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:36:27.117

没有办法为 iOs 使用 dev 模式，因为没有适用于 iOS 的 dev-mode 插件。

您可以启用[Super Dev Mode](https://developers.google.com/web-toolkit/articles/superdevmode)。这将启用一个非常快速的编译器。

**更新** 如前所述：`-bindAddress 0.0.0.0`可能有助于将码头绑定到任何 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:24:26.390

您的 ipad 和系统必须通过网络 (LAN) 连接。

# java - eclipselink - 将对象放入历史

> ID：15068992
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:37.580
> 
> 标签：java, eclipselink

当对象没有改变时，eclipselink 是否有可能将对象放入历史记录？

我正在使用 HistoryPolicy 来保留对象历史记录，但是当有人在没有存储历史记录的情况下修改对象时会出现问题。HistoryPolicy 只保留更改的对象，但如果子对象没有更改（@manyToMany、@manyToOne 注释等），那么我们就没有子对象的历史记录。所以......当我们想从历史中恢复对象时，我们会丢失有关子对象的所有信息。

这就是为什么我想在将更改写入数据库之前将当前对象及其子对象保存到历史记录（如果该对象没有历史记录）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:39:04.887

不确定我是否理解您的问题。每当您使用 HistoryPolicy 持久化一个对象时，EclipseLink 将同时插入到主表和历史表中，您永远不会有一个在历史表中没有行的对象。

# c# - 实时显示数据的替代选项

> ID：15068995
> 
> 赞同：3
> 
> 时间：2013-02-25T14:14:39.227
> 
> 标签：c#, asp.net, sql-server

我们有一个 ASP.NET Web 应用程序，它需要实时或最佳地显示数据，我们目前正在使用 AJAX 和 Web 服务，但这会导致性能问题，因为客户端的数量越来越大。每 5-10 秒收集一次数据，当这乘以 1000 多个客户端时，它会使数据检索变得非常缓慢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T14:15:53.813

您可能想尝试使用[SignalR](http://signalr.net/)来处理您的实时数据需求。从网站：

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是让您的服务器端代码实时将内容推送到连接的客户端的能力。
> 
> 您可能听说过 WebSockets，这是一种新的 HTML5 API，可以在浏览器和服务器之间实现双向通信。SignalR 将在 WebSockets 可用时在后台使用它，并在它不可用时优雅地回退到其他技术和技术，而您的应用程序代码保持不变。
> 
> SignalR 还提供了一个非常简单的高级 API，用于在 ASP.NET 应用程序中执行服务器到客户端 RPC（从服务器端 .NET 代码调用客户端浏览器中的 JavaScript 函数），以及为连接管理添加有用的钩子，例如连接/断开事件、分组连接、授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:22:20.280

尝试以下一项或多项：

缓存——您是否可以考虑将您的应用程序数据存储在内存中一段时间​​。这将减少对数据库服务器的影响。

HTML 5 服务器端事件——使用服务器端事件，您实际上可以在发生更改时通知客户端（推送数据而不是池）。您基本上需要一个 ASP.NET 事件处理程序（ashx 页面）来在客户端推送请求和一些 JS 代码。

查看[这篇](http://www.codeguru.com/csharp/csharp/cs_internet/displaying-real-time-data-using-html5-and-asp.net.htm)文章以获取有关服务器端事件的更多详细信息和代码示例。

# python - TypeError：一元操作数类型错误-：'DateTimeProperty'

> ID：15068996
> 
> 赞同：0
> 
> 时间：2013-02-25T14:14:42.737
> 
> 标签：python, google-app-engine, pagination, cursor, data-modeling

我正在使用带有 python 2.7 的 Google App Engine 并尝试重现[https://github.com/GoogleCloudPlatform/appengine-paging-python/blob/master/suggest_cursor.py](https://github.com/GoogleCloudPlatform/appengine-paging-python/blob/master/suggest_cursor.py)中给出的示例以在我的页面内使用光标分页（请参阅[https://developers.google.com/appengine/articles/paging](https://developers.google.com/appengine/articles/paging)）

数据模型.py

```
class Feedback(db.Model):
    user = db.ReferenceProperty(User)
    subject = db.StringProperty()
    text = db.TextProperty(default='')
    created = db.DateTimeProperty(auto_now_add=True) 
```

我的代码看起来很安静，但出现错误：

1)

```
query = datamodel.Feedback.all().order(-datamodel.Feedback.created)
TypeError: bad operand type for unary -: 'DateTimeProperty' 
```

2）删除 - query = datamodel.Feedback.all().order(datamodel.Feedback.created) 结果是这个错误

```
File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2614, in order
    if property.startswith('-'):
AttributeError: 'DateTimeProperty' object has no attribute 'startswith' 
```

知道为什么这不能按预期工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:19:01.483

`ndb`并且`db`是完全不同的模块；您不能使用 ndb 示例代码并期望它在 db 中工作。

您需要为`.order()`调用提供带引号的属性名称：

```
query = datamodel.Feedback.all().order('-created') 
```

# matlab - 如何在matlab中使用保存wav文件到当前子目录？

> ID：15068998
> 
> 赞同：1
> 
> 时间：2013-02-25T14:14:51.523
> 
> 标签：matlab

我的当前目录在C下，例如“C:\xxx\”

现在，我想将处理后的 wav 文件导出到当前目录中的子文件夹，例如“\wav_results\”。

我所做的是声明一个文件路径变量：

```
wav_dir = '\wav_results\';
wavwrite(...., [wav_dir wav_name]) %wav_name is the name of the wav file 
```

错误说没有这样的文件或目录。我不想使用 wav_dir 的完整目录路径，因为我需要将此脚本从一个地方移动到另一个地方。有人有好的建议吗？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:21:21.603

在调用 wavwrite 之前使用[mkdir ：](http://www.mathworks.nl/help/matlab/ref/mkdir.html)

```
wav_dir = '\wav_results\'; %'
if not(exist('testresults','dir'))
    mkdir(wav_dir);
end
wavwrite(...., [wav_dir wav_name]) 
```