# StackOverflow 问答 14696000-14696999

# jquery - 使用 jquery val() 及其 innerhtml 设置 html 选择

> ID：14696000
> 
> 赞同：4
> 
> 时间：2013-02-04T21:30:02.183
> 
> 标签：jquery

我正在尝试使用 jquery val() 在下拉选择中设置 selected 属性。我只有我想要选择的元素的标题（又名 innerhtml），但没有值。例如：

状态的下拉。我希望选择“纽约”选项。我想写一个 jquery 语句

```
$("#pull-down").val([get value of the option tag which has "New York" as its innerhtml]) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:33:53.987

你可以使用`filter`方法。

```
$("#pull-down").val(function(){
    return $('#selectElement option').filter(function(){
                return $(this).text() === 'New York';
           }).val();
}); 
```

如果这`#pull-down`是一个选择元素并且包含的​​选项元素是`New York`它的子元素，则可以使用`prop`方法。

```
$('#pull-down option').filter(function(){
     return $(this).text() === 'New York';
}).prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:35:45.953

将值设置为`#pull-down`包含`<option>`“纽约”的值。区分大小写。

```
$("#pull-down").val($("option:contains('New York')").val()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:33:52.483

像这样？- [http://jsfiddle.net/RkBd2/](http://jsfiddle.net/RkBd2/)

```
<select name="states">
    <option></option>
    <option value="NY">New York</option>
    <option value="TX">Texas</option>
</select>

$('select[name="states"]').val('TX'); 
```

将导致下拉显示德克萨斯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:34:45.843

如果您尝试选择具有给定值的选择选项（在本例中为某个值），请执行以下操作：

```
 $('#pull-down option[value="somevalue"]').select(); 
```

# sql - 由于某种原因，SQL 不想用空格匹配字符串

> ID：14696003
> 
> 赞同：1
> 
> 时间：2013-02-04T21:30:22.793
> 
> 标签：sql

我有这个没有正确比较的 SQL 查询，所以我把它注释掉了 WHERE 子句。返回 AF.ActivityNote 时，无论我是否对其进行 RTRIM，它后面总是有 2 个空格。我认为这些空格是不允许注释的 WHERE 子句正确匹配字符串与 userfield33 的问题。

```
 SELECT CAST(UF.UserField33 AS NVARCHAR) , RTRIM(CAST(AF.ActivityNote AS NVARCHAR))
        FROM [BCMTEST01].[dbo].[ActivityContacts] as AC INNER JOIN [BCMTEST01].[dbo].[ActivityFullView] as AF
            ON AC.ActivityID = AF.ActivityID INNER JOIN [BCMTEST01].[dbo].[OpportunityExportView] as OP
            ON AC.ContactID = OP.ContactServiceID INNER JOIN [BCMTEST01].[dbo].[UserFields] as UF
            ON OP.ContactServiceID = UF.ContactServiceID
            WHERE ContactID = 8376
        --WHERE  RTRIM(CAST(UF.UserField33 AS NVARCHAR) = RTRIM(CAST(AF.ActivityNote AS NVARCHAR))
        ORDER BY ContactID ASC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:34:28.740

首先，在转换为、、和时，您应该*始终*包含长度。所以使用类似的东西：`nvarchar``varchar``char``nchar`

```
cast(uf.userfield33 as nvarchar(255)) -- or whatever length you like, so long as you have something 
```

最后两个字符不是空格。执行以下操作：

```
select ascii(right( AF.ActivityNote, 1)) 
```

看看字符值是多少。然后你可以用`replace`它来摆脱它。或者，您可以只去掉最后两个字符（如果这适用于您的应用程序）。

顺便说一句，我假设您正在使用基于查询语法的 SQL Server。

这是一个替代`where`条款：

```
where (case when right(AF.ActivityNote, 2) = char(10)+CHar(13)
            then LEFT(AF.ActivityNote, LEN(AF.ActivityNote) - 2)
            else AF.ActivityNote
       end) = CAST(UF.UserField33 AS NVARCHAR(255) 
```

我不是从句中的`case`陈述的忠实粉丝。`where`我实际上会将逻辑放在子查询中。另外，我可能有 10/13 倒数的顺序。

# jquery - Jquery Mobile Object 没有方法'selectmenu'

> ID：14696007
> 
> 赞同：1
> 
> 时间：2013-02-04T21:30:36.077
> 
> 标签：jquery, ajax, mobile

在使用 JQuery Mobile 进行 ajax 调用后，我在刷新多选列表时遇到了一些问题。AJAX 调用运行良好，我正在成功执行以下 javascript 代码：

```
function(data){
    var myselect = $("select#ureporting_team");
    myselect.selectmenu("refresh", true);
} 
```

这应该更新以下元素：
`<select multiple="multiple" data-native-menu="false" name="ureporting[team]" id="ureporting_team"></select>`

但是，在控制台（chrome）中，我收到以下错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“选择菜单”

我不知道为什么这不起作用。我已经多次查看文档，但似乎找不到其他人遇到此问题。我敢肯定这是我忽略的小东西。谢谢！

编辑，这里是包含标签的脚本：
`<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>`
`<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>`
除此之外，JQMobile 似乎工作正常。

# javascript - Angular js服务器端过滤器和分页

> ID：14696008
> 
> 赞同：4
> 
> 时间：2013-02-04T21:30:39.883
> 
> 标签：javascript, mongodb, angularjs

我有几个输入字段，我们可以使用带有搜索名称的输入字段作为示例。当有人输入该字段时，我希望能够过滤对象的结果。但我想做过滤服务器端而不是客户端。我有一个包含很多记录的数据库，所以我不想将它们全部返回并进行过滤客户端，它确实减慢了速度。id 也喜欢用 angular js 实现分页。任何指针？还是我应该去的方向？

我使用 mongodb 作为数据库存储

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:18:51.580

这是使用 mongolab 的示例：http: [//jsfiddle.net/CLVpf/2/](http://jsfiddle.net/CLVpf/2/)

您可以只`$watch`使用查询变量来构造查询 URL，并`query()`针对`ngResource`实例进行调用。

```
$scope.$watch('search', function (key) {
    var q = null;
    if (key) {
        q = {
            q: '{name:{$regex:"' + key + '"}}'
        };
    }
    $scope.projects = Project.query(q);
}); 
```

这`Project`是 ngResource 实例。

# node.js - Node.js：npm 不再安装

> ID：14696014
> 
> 赞同：0
> 
> 时间：2013-02-04T21:30:56.903
> 
> 标签：node.js, npm

我不知道我做错了什么，但是尝试使用 npm 安装模块会返回错误。我的具体示例（相同的结果，无论我想安装哪个模块）：

```
npm install socket.io 
```

回报：

```
npm ERR! TypeError: Cannot call method 'replace' of undefined
npm ERR!     at /usr/local/lib/node_modules/npm/node_modules/read-package-json/read-json.js:332:45
npm ERR!     at fs.js:117:20
npm ERR!     at /usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:53:5
npm ERR!     at /usr/local/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:62:5
npm ERR!     at Object.oncomplete (fs.js:297:15)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Darwin 11.4.2
npm ERR! command "node" "/usr/local/bin/npm" "install" "socket.io"
npm ERR! cwd /Users/Hassen/www/node/btask
npm ERR! node -v v0.8.16
npm ERR! npm -v 1.1.69
npm ERR! type non_object_property_call
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/Hassen/www/node/btask/npm-debug.log
npm ERR! not ok code 0 
```

任何的想法？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:37:55.327

此错误通常是由当前目录中的 .git 目录引起的，该目录尚未提交。

在重试之前删除目录或至少提交`npm`一次。

编辑：从此[npm 问题页面](https://github.com/isaacs/npm/issues/3002)；

> 此问题已在最新版本中得到修复。请更新到最新的节点和 npm（分别为 v0.8.17 和 v1.2.0）

# android - ViewPager 显示错误的片段

> ID：14696016
> 
> 赞同：1
> 
> 时间：2013-02-04T21:30:59.220
> 
> 标签：android, android-viewpager, fragmentpageradapter

我试图找到解决我在网络上到处搜索问题的方法，但我还没有解决。无论如何，这是我的问题。基本上，当我启动我的 TestWeekActivity（包含 ViewPager）时，它会显示第一个片段/页面的第二个片段/页面，当我滑动到第二个片段/页面时，我会看到第三个片段...换句话说，它总是显示下一个或上一个片段/页面取决于滑动方向（向左或向右）。

将日志放在任何地方我知道每次滑动 FragmentPagerAdapter.getItem(int) 都会被调用两次（我读到这种行为允许缓存近页）。但是我不明白的是，为什么在调用 getItem 方法时，也会调用相对片段方法 onStart ，所以当我从第一页滑动到第二页时，由于第二次调用 getItem 方法，我看到了第三个片段。我希望已经足够清楚了。

这是我的代码：TestWeekActivity

```
package com.bord.shutup;

import java.util.ArrayList;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.ActionBar.TabListener;
import android.app.FragmentTransaction;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;

public class TestWeekActivity extends FragmentActivity implements TabListener {

private static final String TAG = "TestWeekActivity";

ActionBar mActionBar;
SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;
ArrayList<Fragment> fragments;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_week);
    mActionBar = getActionBar();
    mActionBar.setDisplayHomeAsUpEnabled(true);
    mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // create the Fragment list
    fragments = new ArrayList<Fragment>();
    for (int i = 0; i < 7; i++) {
        Bundle args = new Bundle();
        args.putInt("day", i);
        Fragment f = DayFragment.newInstance(this);
        f.setArguments(args);
        fragments.add(f);
    }

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager(), fragments, getResources()
                    .getStringArray(R.array.day_of_week));

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    mViewPager
            .setOnPageChangeListener(new           ViewPager.SimpleOnPageChangeListener() {

                @Override
                public void onPageSelected(int position) {
                    Log.d(TAG, "onPageSelected " + position);
                        mActionBar.setSelectedNavigationItem(position);
                }
            });

    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        mActionBar.addTab(mActionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }
}

// ///////// TabListener stuff ////////
@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
}

// ///////// Menu stuff ///////////
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_events, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        startActivity(new Intent(this, ChooserActivity.class)
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        return true;
    case R.id.add_event:
        startActivity(new Intent(this, CreateWeeklyEventActivity.class)
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        return true;
    }

    return false;
}

public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

    private ArrayList<Fragment> fragments;
    private String[] titles;

    public SectionsPagerAdapter(FragmentManager fm,
            ArrayList<Fragment> fragments, String[] titles) {
        super(fm);
        this.fragments = fragments;
        this.titles = titles;
    }

    @Override
    public Fragment getItem(int i) {
        Log.d(TAG, "getItem called " + i);
        return fragments.get(i);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return titles[position];
    }
  }

} 
```

日片段

```
package com.bord.shutup;

import java.util.Calendar;

import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;
import android.view.ActionMode;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView.MultiChoiceModeListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

public class DayFragment extends Fragment implements
    LoaderManager.LoaderCallbacks<Cursor>, MultiChoiceModeListener,
    OnItemClickListener {
private static final String TAG = "DayFragment"; // For debugging

ListView list_events;
SimpleCursorAdapter adapter;
private int day;

public static DayFragment newInstance(Context context) {
    DayFragment f = new DayFragment();
    return f;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "onCreate called");
    day = getArguments().getInt("day");
    Log.d(TAG, "fragment day: " + day);
    adapter = new SimpleCursorAdapter(getActivity(),                R.layout.row_weekly_event, null, new String[] {
                    EventsProvider.C_TITLE, EventsProvider.C_NOTE,
                    EventsProvider.C_START_TIME_HOUR,
                    EventsProvider.C_START_TIME_MINUTE,
                    EventsProvider.C_END_TIME_HOUR,
                    EventsProvider.C_END_TIME_MINUTE }, new     int[] {
                    R.id.title, R.id.note, R.id.hour_start_time,
                    R.id.minute_start_time, R.id.hour_end_time,
                    R.id.minute_end_time }, 0);
}

@Override
public void onStart() {
    super.onStart();
    int day = getArguments().getInt("day");
    Toast.makeText(getActivity(), "Day: " + day , Toast.LENGTH_SHORT).show();
}

// Associate a layout
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.d(TAG, "onCreateView called " + day);
    return inflater.inflate(R.layout.activity_events, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.d(TAG, "onActivityCreated called " + day);
        Log.d(TAG, "set adapter " + day);
        list_events = (ListView) getActivity().findViewById(
                R.id.list_events);
        list_events.setAdapter(adapter);
        list_events.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        list_events.setMultiChoiceModeListener(this);
        list_events.setOnItemClickListener(this);
        getActivity().getSupportLoaderManager().initLoader(day, null, this);
}

// //////////    Loader callback   ///////////
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    Log.d(TAG, "onCreateLoader called with args: " + id);
    switch (id) {
    case 0:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" + Calendar.MONDAY,
                null, EventsProvider.C_ID + " DESC");
    case 1:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" + Calendar.TUESDAY,
                null, EventsProvider.C_ID + " DESC");
    case 2:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null,
                EventsProvider.C_REPEAT_ON + "=" + Calendar.WEDNESDAY,
                null, EventsProvider.C_ID + " DESC");
    case 3:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" + Calendar.THURSDAY,
                null, EventsProvider.C_ID + " DESC");
    case 4:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" + Calendar.FRIDAY,
                null, EventsProvider.C_ID + " DESC");
    case 5:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" + Calendar.SATURDAY,
                null, EventsProvider.C_ID + " DESC");
    case 6:
        return new CursorLoader(getActivity(), EventsProvider.URI_T_WEEK,
                null, EventsProvider.C_REPEAT_ON + "=" +     Calendar.SUNDAY,
                null, EventsProvider.C_ID + " DESC");
    }
    return null;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    Log.d(TAG, "onLoadFinished called");
    adapter.swapCursor(cursor);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    Log.d(TAG, "onLoaderReset called");
    adapter.swapCursor(null);
}

} 
```

提前谢谢大家！

PS：我是新手，所以不要杀我。;-) PPS：抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:20:20.947

您不应该自己管理片段列表，适配器会为您完成。从 onCreate() 中删除“创建片段列表”代码，并使用适配器的 getItem() 中的参数创建请求的页面片段的新实例。

# php - 我想要一个在 PHP 中使用 header() 的自定义 <title></h1> <blockquote> <p>ID：14696017</p> <p>赞同：4</p> <p>时间：2013-02-04T21:31:05.203</p> <p>标签：php, html, header, title</p> </blockquote> <p>站在巨人的肩膀上，我已经成功拼凑了一个脚本，使用 header() 在我的内网发布 pdf 文档，</p> <p>我的显示代码：</p> <pre><code><?php require_once "includes/IniFile.php"; include_once "includes/process.php"; $MyData['ini'] = IniFile::getSettings(); foreach ( $_POST as $key => $value ) { $fn = $key; } $fn = str_replace("|sp|"," ",$fn); $fn = str_replace("|dt|",".",$fn); $ed = explode('!',$fn) ; $MyData['ini']['pathMask'] = str_replace('|DEPT|', dptdir($ed[1], $MyData['ini'] ['departments']), $MyData['ini']['pathMask']); $MyData['ini']['pathMask'] = str_replace('|FLDR|', subdir($ed[2], $MyData['ini'] ['folders']), $MyData['ini']['pathMask']); $fn =''; $file = $MyData['ini']['pathMask'].$ed[0]; header('Content-type: application/pdf'); header('Content-Disposition: inline; filename="'.$fn.'"'); header('Content-Transfer-Encoding: binary'); header('Content-Length: ' . filesize($file)); @readfile($file); ?> </code></pre> <p>一切正常，但我希望包含 .pdf 的新页面有一个与正在发布的文档名称相对应的 <title>。</p> <p>这可能吗？</p> <p>谢谢 - 克里斯。</p> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：2</p> <p>时间：2013-02-04T22:00:31.263</p> </blockquote> <p>您应该呈现一个普通页面并将 PDF 嵌入到 iframe 中，而不是丢弃标题。通过这种方式，您可以获得您的标题，并且 PDF 仍然是内联的。</p> <pre><code><!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <title>My great title for the PDF</title> <style type="text/css"> html, body { margin: 0; padding: 0; border: 0; height: 100%; overflow: hidden; } iframe { width: 100%; height: 100%; border: 0 } </style> </head> <body> <iframe src="yourpdfname.pdf"></iframe> </body> </html> </code></pre> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：0</p> <p>时间：2014-11-12T22:02:27.417</p> </blockquote> <p>如果您首先使用 Zend/PDF 库打开 PDF，您可以修改 pdf 的内容，包括标题和其他元相关信息。</p> <p>见： http: <a href="http://php.net/manual/en/function.pdf-set-info.php" rel="nofollow">//php.net/manual/en/function.pdf-set-info.php</a></p> </body> </html></title>

# c# - 在服务器端代码中使用 for 循环通过动态创建名称来循环标签

> ID：14696019
> 
> 赞同：4
> 
> 时间：2013-02-04T21:31:12.093
> 
> 标签：c#, asp.net

我在一个有asp标签列表的网站上工作。我使用 javscript 代码来获取每个框的名称，以便我可以修改其中的文本。我正在使用与此类似的 for 循环，我很好奇是否有一种方法可以类似地调用所有标签，以便您可以将它们放入一个循环并循环遍历它们。在服务器端代码中是这样的：

ASP代码：

```
<asp:Label runat="server" ID="lblWorld1" Text="" />
<asp:Label runat="server" ID="lblWorld2" Text="" />
<asp:Label runat="server" ID="lblWorld3" Text="" />
<asp:Label runat="server" ID="lblWorld4" Text="" />
<asp:Label runat="server" ID="lblWorld5" Text="" /> 
```

c# 代码

```
for(int c = 1; c <= 5 ; c++)

{

  var label = "lblWorld" + c.toString();

  label.Text = "Hello World!";

} 
```

但是，在服务器端代码中，这不起作用。有没有办法制作一个 for 循环并使用动态系统获取标签的名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:33:28.773

1.  将所有标签放入某个容器中，例如 a`Panel`或`PlaceHolder`。给那个容器一个 ID。
2.  在您的代码中按 ID 获取容器。
3.  迭代该`Controls`容器的集合以获取每个标签。`OfType<Label>`如果除了标签之外可能还有其他类型的控件，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:37:14.430

您可以通过以下方式遵循当前的逻辑：

```
for(int c = 1; c <= 5 ; c++)
{
var label = "lblWorld" + c.toString();
Label tempLabel = new Label;
tempLabel.ID = label.ToString();
tempLabel.Text = "Hello World!";   
} 
```

不过，您仍然需要为单个标签分配值，因此将标签作为容器处理可能更具可扩展性。

# php - 如何获取我的 mysql 表列的名称

> ID：14696020
> 
> 赞同：5
> 
> 时间：2013-02-04T21:31:15.627
> 
> 标签：php, mysql

已解决我使用了 alfasin 的答案，但由于这给了我太多信息，我写了一个小脚本来获取字段名称。由于字段名称首先出现，因此非常简单：

```
 $here = array();
  $SQL = "SHOW COLUMNS FROM User";
    foreach($conn->query($SQL) as $row) {
      $here[] = $row[0];
    }
  echo '<pre>';print_r($here);echo '<pre>'; 
```

这给我留下了`$here`包含列名的新数组，希望这对将来的人有所帮助:)

* * *

原始问题：
让我澄清一下，我有一个 mysql 表，我试图从中选择 * ，并将结果显示在 html list 中`<ol>`。我可以设法抓取行数据就好了，但我一生都无法弄清楚如何抓取表列名，以便分别将它们与行匹配。这是我获取行数据的代码：

```
//get those results
 $sql = "SELECT DISTINCT *
 FROM User
 WHERE Owner = '".$owner."'";
  foreach($conn->query($sql) as $row) {
  //split array in half
  $hax = count($row);
  $halfHax = $hax / 2;
   //set up a for loop to give results
    $u = 1;
      for($i = 2; $i <= $halfHax; $i++){
        echo $row[$u].'<br>';
        $u++;
      }
   } 
```

这给了我`Owner == $owner`应该得到的所有结果，但我希望列名与那些一起列出，我可以硬编码出来，但可能会添加/更改更多列，所以我宁愿不这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:41:23.627

获取行作为关联数组，以便将列名保留为数组键。这是我的建议：

```
$sql = "SELECT DISTINCT * FROM User WHERE Owner = :owner";
$sth = $conn->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':owner' => $owner);

while($row=$sth->fetch(PDO::fetch_assoc) as $row) {
  //split array in half
  $hax = count($row);
  $halfHax = $hax / 2;
  //set up a for loop to give results
  foreach ($row as $key => $value) {
    echo $key.'='.$value.'<br />';
  } 
```

}

仅列出列名：

```
array_keys($row); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:34:18.533

尝试：

`SHOW COLUMNS FROM mytable`

[http://dev.mysql.com/doc/refman/5.0/en/show-columns.html](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T21:34:27.613

如果您想了解有关列的更多信息，请参阅[MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)中的**SHOW COLUMNS 。**

但我建议使用[mysqli_fetch_assoc](http://php.net/manual/en/mysqli-result.fetch-assoc.php)然后使用[foreach (array_expression as $key => $value)](http://www.php.net/manual/en/control-structures.foreach.php)来获取每一行的列名及其值。

# c++ - 分组网格上的食人魔碰撞检测？

> ID：14696024
> 
> 赞同：2
> 
> 时间：2013-02-04T21:31:32.187
> 
> 标签：c++, ogre, ogre3d, voxel

我正在尝试创建一个基于体素的游戏，并且正在渲染数百万个立方体。

为了加快渲染速度，我将立方体组合成块，将 32x32x32 立方体组合成一个网格。这是为了减少对 GPU 的渲染调用次数并提高帧率。

我正在使用 ManualObject 来构建块，并且效果很好。但是，现在的问题是，由于各个块不是绑定到各个场景节点的实体，因此我找不到进行碰撞检测的方法。

食人魔有办法单独处理 ManualObject 的子网格吗？

```
// Build a face with triangles if the face is visible. Don't bother building faces for hidden faces.
void Chunk::createMesh()
{
    begin("BoxColor");

    int iVertex = 0;
    Block *block;
    Block *testingBlock;

    for (int x = 0; x < CHUNK_SIZE.x; ++x)
    {
        for (int y = 0; y < CHUNK_SIZE.y; ++y)
        {
            for (int z = 0; z < CHUNK_SIZE.z; ++z)
            {
                block = m_pBlocks[x][y][z];
                if (block == NULL) 
                {
                    continue;
                }

                    //x-1
                testingBlock = 0;
                if (x > 0) testingBlock = m_pBlocks[x-1][y][z];

                if (testingBlock == 0)
                {
                    position(x, y,   z+1);  normal(-1,0,0); textureCoord(0, 1);
                    position(x, y+1, z+1);  normal(-1,0,0); textureCoord(1, 1);
                    position(x, y+1, z);    normal(-1,0,0); textureCoord(1, 0);
                    position(x, y,   z);    normal(-1,0,0); textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }

                    //x+1
                testingBlock = 0;
                if (x < 0 + CHUNK_SIZE.x - 1) testingBlock = m_pBlocks[x+1][y][z];

                if (testingBlock == 0)
                {
                    position(x+1, y,   z);      normal(1,0,0); textureCoord(0, 1);
                    position(x+1, y+1, z);      normal(1,0,0); textureCoord(1, 1);
                    position(x+1, y+1, z+1);    normal(1,0,0); textureCoord(1, 0);
                    position(x+1, y,   z+1);    normal(1,0,0); textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }

                    //y-1
                testingBlock = 0;
                if (y > 0) testingBlock = m_pBlocks[x][y-1][z];

                if (testingBlock == 0)
                {
                    position(x,   y, z);        normal(0,-1,0);     textureCoord(0, 1);
                    position(x+1, y, z);        normal(0,-1,0);     textureCoord(1, 1);
                    position(x+1, y, z+1);      normal(0,-1,0);     textureCoord(1, 0);
                    position(x,   y, z+1);      normal(0,-1,0);     textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }

                    //y+1
                testingBlock = 0;
                if (y < 0 + CHUNK_SIZE.y - 1) testingBlock = m_pBlocks[x][y+1][z];

                if (testingBlock == 0)
                {
                    position(x,   y+1, z+1);        normal(0,1,0);  textureCoord(0, 1);
                    position(x+1, y+1, z+1);        normal(0,1,0);  textureCoord(1, 1);
                    position(x+1, y+1, z);          normal(0,1,0);  textureCoord(1, 0);
                    position(x,   y+1, z);          normal(0,1,0);  textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }

                    //z-1
                testingBlock = 0;
                if (z > 0) testingBlock = m_pBlocks[x][y][z-1];

                if (testingBlock == 0)
                {
                    position(x,   y+1, z);      normal(0,0,-1);     textureCoord(0, 1);
                    position(x+1, y+1, z);      normal(0,0,-1);     textureCoord(1, 1);
                    position(x+1, y,   z);      normal(0,0,-1);     textureCoord(1, 0);
                    position(x,   y,   z);      normal(0,0,-1);     textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }

                    //z+1
                testingBlock = 0;
                if (z < 0 + CHUNK_SIZE.z - 1) testingBlock = m_pBlocks[x][y][z+1];

                if (testingBlock == 0)
                {
                    position(x,   y,   z+1);    normal(0,0,1);      textureCoord(0, 1);
                    position(x+1, y,   z+1);    normal(0,0,1);      textureCoord(1, 1);
                    position(x+1, y+1, z+1);    normal(0,0,1);      textureCoord(1, 0);
                    position(x,   y+1, z+1);    normal(0,0,1);      textureCoord(0, 0);

                    triangle(iVertex, iVertex+1, iVertex+2);
                    triangle(iVertex+2, iVertex+3, iVertex);

                    iVertex += 4;
                }
            }
        }
    }

    end();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:54:45.583

我正在使用子弹物理库。它有一个看起来相当不错的碰撞检测系统。

有一个包装器，因为它最初是为与 Ogre 一起使用而编写的，所以它很好地与 Ogre 集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T02:48:22.493

在使用块的情况下（我想它类似于在 Minecraft 中的操作方式）你很可能有一个 3d 数组来存储你的块数据。如何使用该 3d 数组中的数据来确定是否有碰撞一个块与否？这将相当容易和快速。

# struts-1 - Struts 逻辑标记以迭代列表

> ID：14696032
> 
> 赞同：2
> 
> 时间：2013-02-04T21:32:07.193
> 
> 标签：struts-1

在此链接： [http](http://www.mkyong.com/struts/struts-logic-iterate-example/) ://www.mkyong.com/struts/struts-logic-iterate-example/ 示例#2：他们展示了使用 struts 标签来遍历`List` `listUsers`. 但是该示例`List`直接将集合显示为请求中的属性。`List`如果是相应表单bean中的属性，是否可以使用此标签？使用链接上的语法，我得到（预期）：

`listUsers`在任何范围内都找不到 bean：“ ”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T07:00:46.177

如果列表设置为您需要在迭代标记中具有以下语法的形式

```
 <logic:iterate id="myid" name="<nameofform>" property="<listname>">
        <bean:write name="myid" />
    </logic:iterate> 
```

表单名称是在 struts-config.xml 中定义的名称。

# silverlight - 设置 FontWeight 和 FontStyle 的 IValueConverter

> ID：14696035
> 
> 赞同：0
> 
> 时间：2013-02-04T21:32:36.933
> 
> 标签：silverlight, ivalueconverter

IValueConverter 如何返回 FontWeights.Bold 和 FontStyles.Italic？

根据该值，我的转换器需要将文本块设置为粗体和斜体或只是普通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:33:17.250

值转换器旨在转换绑定操作的结果，并且不能返回多个值。

如果要在控件上设置 FontWeight 和 FontStyle，则必须在每个控件上设置一个 Binding 并提供两个不同的值转换器。- 一个转换为 FontWeights，一个转换为 FontStyles

# wordpress - Jplayer 在 WP Twentytwelve / Firefox 下无法运行

> ID：14696037
> 
> 赞同：0
> 
> 时间：2013-02-04T21:32:46.920
> 
> 标签：wordpress, firefox, wordpress-theming, html5-audio, jplayer

我目前在一个 Wordpress 网站上工作。我已经放了一个 Jplayer 音频播放器来播放 mp3。

我有 2 个主题，继承自二十一和二十二。该站点当前运行的主题继承自 211，一切为了最好。一切都在 FF、Chrome 和 IE 中运行（尤其是音频播放器）。

我正在努力从二十二建立一个儿童主题。使用相同的 JS 包含，Jplayer 不能在 FF (18) 中播放，但与 Chrome 一起使用效果很好......尤其是播放列表不加载（而它应该加载）。

是不是很奇怪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:35:25.437

我设法找到了解决方案。

实际上 JQuery 在 MailPress 订阅表单中加载了两次。如果有人遇到过此类问题，则可能是由双重加载引起的。

有关其他类型的问题，另请参阅[http://www.jplayer.org/support/](http://www.jplayer.org/support/)。

# c++ - 在 CRTP 类中使用派生类型的成员

> ID：14696038
> 
> 赞同：6
> 
> 时间：2013-02-04T21:32:47.240
> 
> 标签：c++, templates, crtp

我有一个奇怪的重复模板模式类和一个派生类，如下所示：

```
template<class Derived>
class A {
  typedef typename Derived::C D;
  D x;
};
class B : public A<B> {
public:
  class C { };
}; 
```

当编译器尝试定义 D 时，由于 B 未完全定义，因此无法编译。我怎样才能获得类似的结果，即 A 的成员属于 B 中定义的类型？还是我必须强制在 B 之外定义 C？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T21:35:14.167

> 还是我必须强制在 B 之外定义 C？

是的，不幸的是你必须这样做。通常您可以在之前定义一个模板类`A`并将其专门用于`B`，包含该`C`类型。这允许您在`A`.

```
template<typename T>
struct members;

template<class Derived>
class A {
  typedef typename members<Derived>::C D;
  D x;
};

template<>
struct members<class B> {
  class C { };
};
class B : public A<B> {
public:
}; 
```

# php - 优雅的每周时间功能

> ID：14696039
> 
> 赞同：4
> 
> 时间：2013-02-04T21:32:53.377
> 
> 标签：php

我有一个 PHP 函数，它根据时间当前是否在任意数量的预定义“热区”中返回 bool。时区是美国/芝加哥 (UTC - 0600)。以下作品：

```
$d = 60*60;                    /* duration of hotzone */
$o = -(3*24+18)*3600;          /* offset to bring UNIX epoch to 12a Sun local*/
$curTime = (time()-$o)%604800; /* time since 12a Sun */

/* Hotzones */
$hotTime = array();
$hotTime[0 ] = (0*24+11)*3600; /* 11a Sun */
$hotTime[1 ] = (0*24+18)*3600; /*  6p Sun */
$hotTime[2 ] = (2*24+19)*3600; /*  7p Tue */
$hotTime[3 ] = (3*24+ 6)*3600; /*  6a Wed */
$hotTime[4 ] = (3*24+11)*3600; /* 11a Wed */

$hotTimes = count($hotTime);

for ($i = $hotTimes-1; $i>=0; $i--) {
  if (($curTime > $hotTime[$i])&&($curTime < $hotTime[$i]+$d)) {
    return true;
  }
}

return false; 
```

但是，我必须每年手动更新两次夏令时，而且我不得不认为有一种比我计算的骇人听闻的“偏移”更自然、更优雅的方式来做到这一点。考虑到夏令时，有没有人遇到过更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:51:44.347

您可以为此使用[`DateTime`](http://www.php.net/manual/de/class.datetime.php)该类：

```
$hottimes = array (
    array(
        'start'=> new DateTime('Sun 11:00:00 America/Chicago'),
        'stop'=> new DateTime('Sun 12:00:00 America/Chicago')
    ),
    array(
        'start'=> new DateTime('Sun 18:00:00 America/Chicago'),
        'stop'=> new DateTime('Sun 19:00:00 America/Chicago')
    ),
    array(
        'start'=> new DateTime('Tue 19:00:00 America/Chicago'),
        'stop'=> new DateTime('Tue 20:00:00 America/Chicago')
    ),
    array(
        'start'=> new DateTime('Wed 06:00:00 America/Chicago'),
        'stop'=> new DateTime('Wed 07:00:00 America/Chicago')
    ),
    array(
        'start'=> new DateTime('Wed 11:00:00 America/Chicago'),
        'stop'=> new DateTime('Wed 12:00:00 America/Chicago')
    )
);

$now = new DateTime();

foreach($hottimes as $hotime) {
    if($now >= $hotime['start'] && $now < $hotime['stop']) {
        return true;
    }
} 
```

您不应该对此类事情使用 UNIX 时间戳。使用 DateTime 是首选方法。另请阅读 Sven 的评论。（谢谢）

# python - 新的 pygame 表面是否必须进行 .convert() 处理？

> ID：14696043
> 
> 赞同：3
> 
> 时间：2013-02-04T21:33:27.840
> 
> 标签：python, pygame, geometry-surface, pixelformat

当你创建一个新的 Pygame 表面时：

```
pygame.Surface((width, height), flags=0, depth=0, masks=None) 
```

您是否必须调用`.convert()`它来更改其像素格式，或者在您创建它时已经为您完成了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:24:31.013

`convert`仅在更改像素格式时使用（例如，从索引到 rgb）。默认情况下，将使用 RGB 创建表面，如果这不是您需要的（几乎总是如此），您只需要转换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T03:32:07.253

当你创建一个新的表面时，它的格式总是匹配（尽可能地）当前显示表面的格式（不管你`pygame.display.set_mode()`上次调用时设置的）。您不需要`convert`新的表面，除非它们的格式要求与显示表面不同（alpha，用于一种或索引颜色，如名称所述）。

请注意，如果新表面*确实*具有每像素 alpha 深度（有或没有其他格式细节），您将需要使用它`convert_alpha()`。

来自文档： http: [//www.pygame.org/docs/ref/surface.html](http://www.pygame.org/docs/ref/surface.html) （自提出问题以来的近二十个月内可能已更新。）

# android - 用另一个没有新活动的片段替换片段

> ID：14696045
> 
> 赞同：0
> 
> 时间：2013-02-04T21:33:29.777
> 
> 标签：android, android-fragments

这是我的片段，我正在尝试从片段中更改片段。我知道我可以用新的片段创建一个新的活动，然后只创建和意图并走那条路。但是我有一项活动，其中包含一些我真的想只在一个地方更新的内容。谁能告诉我如何在仍然使用我最初创建的活动的同时将片段更改为另一个片段？

```
 view = inflater.inflate(R.layout.inst_fragment, container, false);
    furnTextView = (TextView) view.findViewById(R.id.furn_textview);
    archTextView = (TextView) view.findViewById(R.id.arch_textview);

    furnTextView.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(MotionEvent.ACTION_UP == event.getAction()){
                openCatalog("furn");
            }
            return false;
        }
    });
    archTextView.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(MotionEvent.ACTION_UP == event.getAction()){
                openCatalog("arch");
            }
            return false;
        }
    });

    return view; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:37:20.007

因此，您可以在不创建另一个的情况下将另一个“添加”`Fragment`到您的方法是使用函数。这可能是您将第一个添加到您的：`Activity``replace()``Fragment``FragmentActivity`

```
public class MainActivity extends FragmentActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.news_articles);

    if (findViewById(R.id.fragment_container) != null) {

        if (savedInstanceState != null) {
            return;
        }

        MyFirstFragment firstFragment = new HeadlinesFragment();
        firstFragment.setArguments(getIntent().getExtras());

        // Add the fragment to the 'fragment_container' FrameLayout
        getSupportFragmentManager().beginTransaction()
                .add(R.id.fragment_container, firstFragment).commit();
    }
} 
```

}

并且使用`replace`in`FragmentTransaction`你可以`MyFirstFragment`用另一个替换：

```
MyNewFragment newFragment = new MyNewFragment();
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

就这样。希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:58:59.713

试试这个代码，它将替换您当前的片段，并在后面恢复您的旧片段。

```
NewFragment fragment = NewFragment.newInstance();
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.addToBackStack("BACKSTACK");
ft.replace(R.id.home_list, fragment);
ft.commit( 
```

# ruby - rvm install ree 使用 XCode 在 Mountain Lion 上查找 /opt/local - 但我没有 MacPorts

> ID：14696048
> 
> 赞同：1
> 
> 时间：2013-02-04T21:33:38.860
> 
> 标签：ruby, rvm

我无法安装 Ruby REE

```
rvm install ree 
```

因为编译器和链接器正在寻找 /opt/local。我在 /opt/local 中只有 X11，因为我不使用 MacPorts。

我使用 XCode 命令行工具安装了我的 C/C++ 编译器，而不是使用[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)。（因为我希望 XCode 可供我使用，但它们不兼容。）

rvm 安装日志中对 /opt/local 的第一个引用是：

```
make PREINCFLAGS='-I/opt/local/include' PRELIBS='-L/opt/local/lib -Wl,-rpath,/Users/brian/.rvm/rubies/ree-1.8.7-2012.02/lib -L/Users/brian/.rvm/rubies/ree-1.8.7-2012.02/lib -lsystem_allocator' 
```

从那里我得到许多关于在 /opt/local/include 和 /opt/local/lib 中找不到的文件的错误（因为这些目录在我的系统上不存在）。

我不知道为什么安装程序认为它会在 /opt/local 中找到头文件或库，我也不知道如何让它在正确的位置查找。

这是我的 GNU C++ 和 C 编译器：

```
/usr/bin$ ll g+* gcc*
lrwxr-xr-x  1 root  wheel  12 Feb  4 11:58 g++@ -> llvm-g++-4.2
lrwxr-xr-x  1 root  wheel  12 Feb  4 12:16 g++-4.2@ -> llvm-g++-4.2
lrwxr-xr-x  1 root  wheel  12 Feb  4 11:58 gcc@ -> llvm-gcc-4.2
lrwxr-xr-x  1 root  wheel  12 Jan  6 21:11 gcc-4.2@ -> llvm-gcc-4.2 
```

我使用 Homebrew，但我没有安装任何与编译器相关的东西：

```
/usr/bin$ brew list
ack         coreutils   geoip       gnupg       libevent    little-cms2 ossp-uuid   qt          tmux
autoconf    ctags       gettext     htop-osx    libpng      macvim      phantomjs   readline    tree
automake    fontconfig  ghostscript imagemagick libtiff     memcached   pkg-config  redis       wget
cmake       freetds     gist        jbig2dec    libtool     mysql       postgresql  sqlite      xz
colordiff   freetype    git         jpeg        libyaml     ngrep       pstree      tig 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:02:24.493

我想出了如何克服这个问题。所有关于 /opt/local 的东西都是红鲱鱼。我没有 /opt/local 的事实并没有引起任何问题。

真正的问题在[install.log](https://gist.github.com/4710123)更远的地方：

```
/usr/include/tk.h:78:23: error: X11/Xlib.h: No such file or directory 
```

修复是`--without-tk --without-tcl`在安装 ree 时使用：

```
rvm install ree --without-tk --without-tcl 
```

我在安装 ree 时仍然遇到其他不相关的问题，但至少这部分不再是问题。

# java - 为 IE8 构建富 Web 应用程序的 Java 框架

> ID：14696050
> 
> 赞同：0
> 
> 时间：2013-02-04T21:33:44.970
> 
> 标签：java, frameworks, internet-explorer-8, rich-internet-application

我们为具有非常基本 GUI 的内部公司用户构建 Java Spring MVC Web 应用程序。少数有 jQuery/Ajax 来添加一些丰富的 GUI，但没什么大不了的。对于新应用程序，业务用户要求非常丰富的 Web 应用程序（例如：拖放功能、Excel 中的灵活表格等）。我们的用户只能使用 IE8，我们不能在浏览器中运行 Java 小程序。此外，我们没有时间学习一门全新的语言（例如：Flex），因此对于 Java MVC 开发人员来说学习曲线不会太陡峭。此应用仅供公司内部用户（约 100 名并发用户）使用。

我研究了一些较新的 Javascript MVC 框架（例如：Spine、Backbone、Ember）。我主要担心的是我不确定生成的复杂 Javascript 将在 IE8 下运行得如何。第二个问题是我们没有尝试在 Javascript 中维护大量代码的经验。似乎很多 Javascript 代码将成为维护的噩梦（非类型安全、更难调试、没有那么多工具等）。

我还研究了 GWT 和 ZK。这些框架减少了对维护大量 Javascript 代码的担忧，但 IE8 性能问题仍然存在。如果我们在其中一个框架中构建了一个非常丰富的 GUI，那么生成的自动生成的 Javascript 会在 IE8 中运行良好吗？

您会推荐什么框架，既能满足上面列出的高级用户需求，又能满足非功能性需求（学习曲线小、维护负担低、未来支持好）？有没有人试图做类似的事情？如果是这样，你用了什么，结果如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:34:10.300

Vaadin 支持拖放，但 d&d 的编程模型有点噩梦。

在您的情况下，我当然会选择 GWT。谷歌的人付出了很多努力让它与 ie8 一起工作。注意 GWT 具有良好的工具支持，例如 Eclipse 插件。为了避免从头开始编写所有内容，您可以从一些构建在 GWT 上的框架开始，例如[gwtplatform](http://code.google.com/p/gwt-platform/)或 ExtGWT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:41:46.277

我们正在使用与 GWT（开发 Java 代码）非常相似的[Vaadin](https://vaadin.com/home)，它在所有浏览器中都能正常工作。对我们来说，视图的可扩展性是更重要的事情（管理大型代码集）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:54:14.313

您也可以考虑 ADF Faces，它有非常丰富的组件集，您可以[在此处](http://jdevadf.oracle.com/adf-richclient-demo/faces/index.jspx)查看演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:42:57.510

在我公司，我们所有的项目都是使用 Apache Wicket 完成的。这个 java web 框架简单、强大、非常高效、基于组件并且一切都是可测试的。

社区很棒。

看看[http://wicket.apache.org](http://wicket.apache.org)。

弗朗索瓦

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T05:15:58.510

您可以使用 [ZK](http://www.zkoss.org/)或[Primefaces](http://www.primefaces.org/showcase/ui/home.jsf)

两者都是非常丰富的 web 框架只需探索他们的 Demo 来决定哪个对你很有帮助。

# java - Java中的while循环，字符串比较不起作用

> ID：14696054
> 
> 赞同：0
> 
> 时间：2013-02-04T21:33:55.203
> 
> 标签：java, loops, while-loop, java.util.scanner

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我正在开发一个小程序，该程序使用`Scanner`. 如果您输入空白字符串，那么我希望控制台显示一条消息。

这是我尝试做的事情：

```
import java.util.Scanner; 
public class Adventure
{  
    public static void main(String[] args) 
    {      
        Scanner myScan = new Scanner (System.in);                             
        System.out.println("What's your name?");                                 
        String name = myScan.nextLine();

        while (!(name == ""))   //Always returns false.
        {
            System.out.println("That's not your name. Please try again.");
            name = myScan.nextLine();
        }

        System.out.println("It's a pleasure to meet you, " + name + ".");
    }
} 
```

代码永远不会进入 while 循环。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T21:35:33.557

Change your condition to:

```
while(!name.equals("")) { 
```

or as suggested below by *m0skit0*:

```
while(!name.isEmpty()) { 
```

# See also

*   [why equals() method when we have == operator?](https://stackoverflow.com/questions/2772763)

# php - Codeigniter 2.1 - 网站管理部分的安全性

> ID：14696062
> 
> 赞同：2
> 
> 时间：2013-02-04T21:34:28.417
> 
> 标签：php, codeigniter, codeigniter-2

我有以下措施来保护管理部分：

*   在会议内部，我有以下部分：

**is_logged_in** -> 这可以是 0 或 1

**admin** -> 检查用户是否为管理员（值为 0 或 1）

在管理控制器或与网站管理有关的控制器中的任何函数之前，我调用函数来检查用户是否已登录并且他是管理员吗？这够了吗？如果不是，我该怎么做才能使管理部分更安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:24:24.057

一种简单的会话形式是

```
$data = array(
    "admin" => $username,
    "is_logged_in"  => true
);
$this->session->set_userdata($data); 
```

但是您也可以在会话中存储 id（如果需要）或其他内容。

如果你想检查它，你可以这样做

```
if (!isset($this->session->userdata['admin'])) {
    redirect('admin/login'); // for example
} 
```

我更喜欢将会话存储在数据库中。

更多信息，请阅读 [http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:32:53.483

[你应该在这里](https://philsturgeon.uk/codeigniter/2010/02/08/CodeIgniter-Base-Classes-Keeping-it-DRY/)查看 Phil Sturgeon 的博客文章

当您有一个需要单独身份验证的整个部分时，扩展 CI_Controller 将为您节省大量代码并使事情变得更加简洁。

# jquery - 使用 jQuery 选择无效的 HTML5 输入

> ID：14696065
> 
> 赞同：2
> 
> 时间：2013-02-04T21:34:31.907
> 
> 标签：jquery, html, input, validation, selector

由于 CSS`:invalid`选择器是输入的默认值，因此只有当用户对输入进行更改并且仍然无效时，我才需要使用 jQuery 来更改无效输入的样式。我尝试了很多东西，但似乎`:invalid`选择器在 jQuery 中不可用。

这个：

```
$("#formulaire input").change(function () {
    if ($(this).is(":invalid")) {
        $(this).css("backgroundColor", "red");
    }
}) 
```

不起作用。我还尝试在开始时选择无效输入：

```
$("#formulaire input:invalid").change(function () {
    $(this).css("backgroundColor", "red");
}) 
```

但这也行不通。

希望你能帮助我:)。

jsfiddle：http: [//jsfiddle.net/TWQgN/](http://jsfiddle.net/TWQgN/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:56:20.650

Selectors supported by jQuery are listed [on the selectors API page](http://api.jquery.com/category/selectors/). The `:invalid` pseudo-class is not listed there as of jQuery 1.9.0, so doesn't appear to be supported. Unless and until that selector is supported, you can access the DOM object and use its input validity API. For example:

```
$("#formulaire input").change(function() {
    if (Boolean($(this)[0].checkValidity) && (! $(this)[0].checkValidity())) {
        $(this).css("backgroundColor", "red");
    }
}); 
```

`$(this)[0]` returns the underlying [DOM HTMLInputElement](http://www.w3.org/TR/html-markup/input.text.html#input.text) object. The `checkValidity()` method will return false if the input element is invalid. (And I put in the test `Boolean($(this)[0].checkValidity)` just so that you do not get an exception if this code is run on an older browser that doesn't support HTML input validation.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T03:21:50.477

我今天正在研究这个问题，并且一直很难弄清楚如何使用 Jquery 来测试和处理 :invalid 表单字段。我在这个表单上运行 ajax，这样用户就可以提交评论而不必离开他们所在的页面。因此，如果需要使用 html5 要求方法和模式匹配，我会确保表单字段都是有效且完整的。然后在jquery中，我发现它会计算我拥有的在以下情况下无效的字段数：

```
$('.containerClass').on('click', '#button', function(){
    var valid = $(this).closest('#form').find('input:invalid').length;
    if(valid > 0){
        alert("Almost there! Please finish the last " + valid + " required fields to complete your review");
    }
    else{
        $.ajax({ 
                //do stuff 
            });
        }
}); 
```

# javascript - JS：遍历 URL 数组并在任何抛出错误时发出警报

> ID：14696072
> 
> 赞同：0
> 
> 时间：2013-02-04T21:35:00.330
> 
> 标签：javascript, jquery, ajax, loops

我有一个 URL 的关联数组，每个 URL 都有一个我想要迭代的唯一标识符，无论哪个 URL 抛出 401，我都想设置该特定 url 标识符的警报。我被困在警报部分：

```
 for (var i=0; i<lyrs.length; i++){
        $.ajax({
            url: lyrs[i],
            dataType: 'json',
            statusCode: {
                401: function(){
                    console.log('there was a 401 error on something');
                }
            }
        });            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:40:24.923

使用闭包：

```
for (var i=0; i<lyrs.length; i++){
        (function() {
             var url=lyrs[i];
             $.ajax({
                 url: url,
                 dataType: 'json',
                 statusCode: {
                     401: function(){
                         console.log('there was a 401 error on '+url);
                     }
                 }
             });
        })();          
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:40:54.493

如[文档](http://api.jquery.com/jQuery.ajax/)中所述，您关联的函数可以采用与回调`401`相同的参数。`error`因此，您可以编写：

```
. . .
statusCode: {
    401: function(jqXHR, textStatus, errorThrown) {
        // alert with the specific details
    }
} 
```

# url - 访问者使用的 URL 不存在

> ID：14696073
> 
> 赞同：8
> 
> 时间：2013-02-04T21:35:01.343
> 
> 标签：url, query-parameters

我今天有人通过这样的链接访问我的网站：

```
www.example.com/pagename.php?_sm_byp=iVVVMsFFLsqWsDL4 
```

有人可以向我解释这是如何工作的，因为我的实际 URL 以结尾，`pagename.php`而且我从未允许用户输入任何 PHP 查询，也从未有会话 ID 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-15T22:04:47.393

这并不罕见。许多站点/服务器允许（或者更确切地说，*忽略*）任意查询组件。

例如，您可以附加`?foo=bar`到这些 URL 并仍然获得 HTTP 状态 200：

*   [https://stackoverflow.com/?foo=bar](https://stackoverflow.com/?foo=bar)
*   [http://en.wikipedia.org/wiki/Stack_Overflow?foo=bar](http://en.wikipedia.org/wiki/Stack_Overflow?foo=bar)

现在，由于它们已链接到此处，用户可能会访问它们，因此这些 URL 将出现在他们的日志中。除了手动添加这样的查询组件外，它们还可能由各种脚本添加，例如用于[跟踪目的](http://en.wikipedia.org/wiki/Query_string#Tracking)，或链接到您的页面的第三方服务（……[有时它们的来源是未知的](https://webmasters.stackexchange.com/q/37858/17633 "URL参数“?chocaid=397”从何而来？")）。

如果您不希望您的 URL 与任意查询组件一起使用，您可以配置您的后端/服务器，使其重定向到没有查询组件的 URL，或以 404 或其他方式响应。

如果您继续允许这样做，但想防止机器人使用这些不必要的查询组件索引您的 URL，您可以使用[`canonical`链接关系](https://www.rfc-editor.org/rfc/rfc6596 "RFC 6596：规范链接关系")指定 URL 的规范变体。

# ios - 运行时添加的应用程序：openURL 不会触发

> ID：14696078
> 
> 赞同：3
> 
> 时间：2013-02-04T21:35:14.377
> 
> 标签：ios, facebook

出于某种原因，我为 facebook 连接开发了静态库。

对于正确的过程授权 URL appDelegate 应该有 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation

方法。因此，当我在 appDelegate.mm 文件中对其进行编码时，一切正常，方法调用和 facebook 会话被授权。但我必须将此方法添加到运行时委托，所以我使用以下代码：

```
{
NSString* methodDescription;

methodDescription = @"B@:@@@@";
UIApplication* app = [UIApplication sharedApplication];

bool res = class_addMethod([app.delegate class],     @selector(application:openURL:sourceApplication:annotation:), (IMP)applicationIMP,     [methodDescription UTF8String]);
NSLog(@"Result of add method is %d", res);
} 
```

//这里是新方法的实现：

```
 bool applicationIMP(id self, SEL _cmd, UIApplication *application, NSURL *url, NSString     *sourceApplication, id annotation)
 {
NSLog(@"Log from applicationIMP injected method");
return [[LibSocial sharedInstance] FacebookHandleOpenURL:url];
 } 
```

this code successfully adds method (I see this method when calls class_copyMethodList): 2013-02-04 23:02:00.704 LibSocialTest[38167:19a03] Mathod[0] is application:openURL:sourceApplication:annotation:

But Facebook SDK doesn't fire this method after authentication, and I got FBSessionState FBSessionStateClosedLoginFailed.

Why this method didn't fired?

**Update:** Even if I replace normally implemented method with custom implementation at runtime, all works well and Facebook SDK fires new method implementation. But if I didn't code normally this method, but add it at runtime, it isn't fires.

**Update2** If I add method to appDelegate class before instantiating UIApplication (in main.m file), then injected method works (even there are no default implementation of method in appDelegate.mm file), but if I inject method after UIApplication was created (so instance of appDelegate class was created too), then injection of method doesn't affect on already instantiated instances of class.

# recursion - 如何定义一个与 m4 中的扩展同名的宏？

> ID：14696081
> 
> 赞同：5
> 
> 时间：2013-02-04T21:35:32.130
> 
> 标签：recursion, macros, m4

我试图用 if( 使用 GNU m4 1.4.14 替换 if 并且我`ERROR: end of file in argument list` 在尝试时收到：

```
define(`if', `if(')
define(`then', `){')
define(`fi', `}')

if foo then bar() fi 
```

我曾尝试转义括号，但这会导致 m4 在短暂的一段时间后出错，说它内存不足。浏览手册，我没有发现与此问题相关的任何内容。

将宏的名称更改为“IF”或“if”以外的名称后，它按预期工作，这让我相信它正在反复评估自己。

如果是这样，我如何定义一个只评估一次的宏？否则，我应该如何解决这个问题？

**编辑**我通过处理两次找到了解决此问题的方法，一次将 if 转换为 _IF，下一次将 _IF 转换为 if(。我认为有更好的方法可以做到这一点，所以这只是我眼中的临时解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:32:03.923

您需要防止`m4`尝试重新扩展替换。通过双引号来做到这一点：

```
define(`if', ``if('')
define(`then', `){')
define(`fi', `}')

if foo then bar() fi 
```

# javascript - 将动态数据插入 Google 饼图

> ID：14696085
> 
> 赞同：5
> 
> 时间：2013-02-04T21:35:47.113
> 
> 标签：javascript, google-visualization

我的任务是将动态数据插入到`Google PieChart`.

[操场](http://code.google.com/apis/ajax/playground/?type=visualization#pie_chart)

在该链接中，我插入以下代码：

```
function drawVisualization() {
// Create and populate the data table.
var data = google.visualization.DataTable();

var mycars=["Saab","Volvo","BMW"];
var mypoints=[4,12,45];

data.addColumn('string', 'Cars');
data.addColumn('number', 'Numbers'); 
data.addRows(mycars.length);
for  (var i = 0; i < mycars.length; i++){
  data.setCell(i,0,mycars[i]);
  data.setCell(i,1,mypoints[i]);
}
// Create and draw the visualization.
new google.visualization.PieChart(document.getElementById('visualization')).
draw(data, {title:"So, how was your day?"});
} 
```

​</p>

在下面的示例中，我得到了动态数组`mycars`，`mypoints`然后我尝试将这些数组插入到图表中`for loop`。

饼图未显示。那有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:14:36.197

你有一个javascript错误。实例化 DataTable 时需要使用`new`关键字。

代替

```
var data = google.visualization.DataTable(); 
```

和

```
var data = new google.visualization.DataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T20:09:16.593

我使用 jquery 中的代码解决了这个问题，如下所示：

```
$("#piechart_3d").show();
google.load("visualization", "1", {
    packages: ["corechart"], callback: function () {
        var data = google.visualization.arrayToDataTable([
                        ['Going', 'a Day'],
                        ['Car', 11],
                        ['Bus', 2],
                        ['Moto', 2]
                    ]);
        var options = {
                        title: 'Report',
                        backgroundColor: 'transparent',
                        is3D: true,
                    };

        var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
        chart.draw(data, options);
    }
}); 
```

# python - python类常量

> ID：14696086
> 
> 赞同：2
> 
> 时间：2013-02-04T21:35:48.950
> 
> 标签：python, sockets, python-2.7

对于家庭作业，我正在 python 中重新实现套接字类。然而，我并不精通python。我有一个关于语法的问题。

当您定义使用的套接字时，从 python API：

```
import socket
mySocket = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)) 
```

但是，我不知道如何定义表现生活 AF_INET 和 SOCK_DGRAM 的常量。

```
import mySocket
mySocket = mySocket.socket(mySocket.AF_INET,mySocket.SOCK_DGRAM)) 
```

给出以下错误

```
Undefined variable from import: AF_INET
Undefined variable from import: SOCK_DGRAM 
```

mySocket 类目前看起来像：

```
class socket:
    AF_INET;
    SOCK_DGRAM;

    def socket(..... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:38:26.113

您需要在模块级别定义常量，而不是在您的`socket`类中：

```
AF_INET = 2
SOCK_DGRAM = 2

class socket:
    def __init__(..... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T21:38:28.573

这些常量是模块级的：

**`module1.py`**：

```
CONSTANT1 = 'test'

class YourClass(object):
    class_variable = 12 
```

**`module2.py`**：

```
import module1

print module1.CONSTANT1 
```

# sql - sql选择连字符右侧的数据

> ID：14696087
> 
> 赞同：2
> 
> 时间：2013-02-04T21:35:49.837
> 
> 标签：sql, ibm-midrange

什么 AS400 SQL Select 将只检索连字符右边的数据？

```
shoes - Nike Reds
kids shoes - Converse
Boot - Gold Redwing
mens boot - timberland 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:40:09.237

您可以使用[`POSITION`](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/index.jsp?topic=/com.ibm.etools.iseries.langref2.doc/rbafzmst241.htm)和[`SUBSTR`](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/index.jsp?topic=/com.ibm.etools.iseries.langref2.doc/rbafzmst264.htm)功能的组合来做到这一点：

```
SELECT SUBSTR(Field, POSITION('-' IN Field) + 1)
FROM YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:41:45.597

您可以使用 POSITION（或 POSSTR()）来查找连字符的位置。加一以找到下一个位置。

您可以使用 SUBSTR() 并从上面找到的位置开始。

最后，您可能想要 TRIM() 它。

如果您的数据有时不包含连字符，则也需要使用连字符。

```
select TRIM(SUBSTR(MY_FIELD_NAME,POSITION(MY_FIELD_NAME,'-')+1))
from MY_TABLE_NAME 
```

# java - ListView 的自定义适配器（仅显示 1 个 ImageView）

> ID：14696091
> 
> 赞同：0
> 
> 时间：2013-02-04T21:35:57.887
> 
> 标签：java, android, listview

出于某种原因，我的自定义适配器只允许我随时在列表视图中显示 1 张图像，我不确定为什么会发生这种情况。每个列表项中应该有一个图像，但只有最后一个列表项有它的图像集，所以我假设我在某个不应该的地方重新使用了一个值。列表项的其余部分已正确设置。

```
public class CustomAdapter extends ArrayAdapter<Item> {

    private ArrayList<Item> itemList;
    private ViewHolder holder; 
    private Context context;

    public CustomAdapter(Context context, int textViewResourceId, ArrayList<Item> list) {
        super(context, textViewResourceId, list);
        this.itemList = new ArrayList<Item>();
        this.itemList.addAll(list);
        this.context = context;
    }

    private class ViewHolder {
        ImageView img;
        TextView name;
        CheckBox access;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.list_grid, null);

            holder = new ViewHolder();
            holder.name = (TextView) convertView.findViewById(R.id.name);
            holder.access = (CheckBox) convertView.findViewById(R.id.checkBox1);
            holder.img = (ImageView) convertView.findViewById(R.id.imageView1);

            convertView.setTag(holder);
        } 

        else { holder = (ViewHolder) convertView.getTag(); }

        Item it = itemList.get(position);

        new UrlLookup().execute(it.getUrl());
        holder.name.setText(it.getName());
        holder.access.setChecked(it.isSelected());

        return convertView;
    }

    //Create an image from the url passed in from the server and display it on the image view   
    private class UrlLookup extends AsyncTask<String, Integer, String>{
        Bitmap bmp;

        @Override
        protected String doInBackground(String... params){  
            try {
                URL u = new URL(params[0]);
                bmp = BitmapFactory.decodeStream(u.openConnection().getInputStream());
            } catch (Exception e) { e.printStackTrace(); }

            return "Done!";
        }

        @Override
        protected void onPostExecute(String result){
            super.onPostExecute(result);    
            holder.img.setImageBitmap(bmp);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:55:18.623

您忘记了每次视图可见时您的持有人都会更改这一事实。所以只有最后一个项目有图像是正常的。

AsyncTask 将比您的`getView`方法花费更长的时间来完成。

您应该将 ImageView 传递给 AsyncTask：

```
new UrlLookup().execute(it.getUrl(), holder.img); 
```

调用 AsyncTask

```
private class UrlLookup extends AsyncTask<Object, Integer, String>{
    Bitmap bmp;
    ImageView view;

    @Override
    protected String doInBackground(Object... params){ 
        view = (ImageView) params[1]; 
        try {
            URL u = new URL((String)params[0]);
            bmp = BitmapFactory.decodeStream(u.openConnection().getInputStream());
        } catch (Exception e) { e.printStackTrace(); }

        return "Done!";
    }

    @Override
    protected void onPostExecute(String result){
        super.onPostExecute(result);    
        view.setImageBitmap(bmp);
    }
} 
```

现在您将获得每个 AsyncTask 中每一行的 ImageView 的引用。

我想向您指出，Koush 有一个出色的项目可以满足您的需求： [UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

# javascript - 在 JavaScript 中实现对象属性的 yield 迭代器

> ID：14696092
> 
> 赞同：3
> 
> 时间：2013-02-04T21:36:00.780
> 
> 标签：javascript, continuations

我需要一个**真正**的迭代器，它可以像这样工作：

```
var haystackObj = {
        'needle': 'abc',
        'prop2': {
                'prop1': 'def',
                'prop2': {
                        'needle': 'ghi',
                },
                'needle': 'jkl',
        },
};
var needleKey = 'needle';
var iterator = {
    next: function () {
            /* 
             * WHAT CODE GOES HERE? 
             * 
             * Should return the next property, recursively, with the name 
             * equal to needleKey, of haystackObj.
             *
             */
    }
};

var value = iterator.next();
console.log(value); // -> 'abc'
value = iterator.next();
console.log(value); // -> 'ghi'
value = iterator.next();
console.log(value); // -> 'jkl' 
```

我认为这对于 for(k in o) 和一流的延续来说是微不足道的，但 JS 没有这些。

编辑：我只能扫描 haystackObj 一次。

EDIT2：我*不是*在寻找“一种遍历对象属性的方法”。我正在寻找对象属性的[迭代器](http://en.wikipedia.org/wiki/Iterator_pattern)。**这是一个巨大的差异。**这个问题并不像乍一看那么微不足道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:44:30.777

JS 中不保证属性顺序。不同的引擎表现不同。（一些引擎基于字母顺序，其他基于最后添加的顺序。）

因此，您的要求无法满足。

如果您只想要一个迭代器而不介意顺序，您可以看看这个问题/答案：[如何模拟 JavaScript 产量？](https://stackoverflow.com/questions/4037252/how-to-simulate-javascript-yield)

这是[规范](http://es5.github.com/#x12.6.4)中关于属性顺序的内容：

> 未指定枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）。被枚举对象的属性可能在枚举过程中被删除。如果在枚举期间还没有访问过的属性被删除，那么它就不会被访问。如果在枚举过程中向正在枚举的对象添加了新属性，则不能保证在活动枚举中访问新添加的属性。在任何枚举中不能多次访问属性名称。

然而，实际上，您可以期望大多数浏览器具有特定的顺序：[“for (... in ...)”循环中的元素顺序](https://stackoverflow.com/questions/280713/elements-order-in-a-for-in-loop)

我看到实现假生成器的唯一方法（根据实际顺序适合您的事实）是复制您的对象，并在需要时删除副本的扫描属性。这意味着您不会重新扫描两次相同的属性。一些代码示例：

```
var Iterator = function() {
    var copy = $.extend(haystackObj, true);
    // ^ using jQuery's extend for a quick function, but use w/e you want.
    // Anyway keep it in a closure. This copy will have its properties deleted
    // after each iteration.

    return {
        next: function next() {
            var found = false,
                needle;
            for (var prop in copy) {
                if (typeof copy[prop] === 'object') {
                    // Since next() doesn't take any argument...
                    // That's a bad solution. You should use an inner function
                    // to recurse. But I'm going to bed right now!
                    var copyCopy = $.extend(copy, true);
                    copy = copy[prop];
                    found = next();
                    copy = copyCopy;
                }

                else {
                    if (prop === needleKey) {
                        found = true;
                    }
                }

                if (found) {
                    needle = copy[prop];
                }

                // Delete the current property to simulate a real generator.
                delete copy[prop];

                if (found) {
                    return needle;
                }
            }
        }
    };
};

// Usage:
var iterator = Iterator();
iterator.next(); // "abc" 
```

这段代码不起作用（见[jsfiddle](http://jsfiddle.net/QCFeW/)），我要睡觉了。但是你可以看到它的发展方向以及你如何制作一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:58:04.090

虽然 Florian Margaine 的回答指出属性的顺序取决于 js 引擎，但该解决方案适用于 chrome。花了我一点点调整，但这里是[http://jsfiddle.net/6zCkJ/3/](http://jsfiddle.net/6zCkJ/3/)：已编辑（此解决方案在 OP 说树只能处理一次之前完成）

```
var needleKey = 'needle';
var currIndex = 0;
var runningIndex = 0;
var getValueByIndex = function (obj) {
    var objToSearch = obj || haystackObj;
    for (var x in objToSearch) {
        if (x == needleKey) {

            if (runningIndex == currIndex)  {
                currIndex += 1;
                return objToSearch[x];
            }
            runningIndex += 1;
        } else if (typeof objToSearch[x] == 'object') {
            var found = getValueByIndex(objToSearch[x]);
            if (found) return found;
        }

    }
}

var iterator = {
    next: function () {
        runningIndex = 0;
        return getValueByIndex(0);
    }
}; 
```

另一种只遍历树一次的方法如下[http://jsfiddle.net/6zCkJ/6/](http://jsfiddle.net/6zCkJ/6/)。问题是，每当针更新时，您都必须加载值数组：

```
var currIndex = 0;
var valuesArray = [];

var loadValues = function (obj) {
    var objToSearch = obj || haystackObj;
    for (var x in objToSearch) {
        if (x == needleKey) {
            valuesArray.push(objToSearch[x])
        } else if (typeof objToSearch[x] == 'object') {
            loadValues(objToSearch[x]);
        }
    }
}

loadValues();
console.log(valuesArray);
var iterator = {
    next: function () {
        return valuesArray[currIndex++];
    }
}; 
```

编辑：到目前为止，此处发布的所有答案都涉及必须至少一次或多次导航整个树，这不是 OP 正在寻找的，包括在遍历对象时必须复制对象和删除属性。有一个解决方案涉及在对象遍历时用元数据标记对象，这使您可以在下次遇到对象时跳过它们。使用我的第一种方法，添加这些优化并希望完成 OP 的要求将是相当简单的。

好吧，所以我忍不住试图让它发挥作用。这是我的做法[http://jsfiddle.net/6zCkJ/12/](http://jsfiddle.net/6zCkJ/12/)。您可以看到我将找到的对象存储在 foundObjects 对象中，其中键由该对象的路径组成，因此您可以快速查找以查看它是否已被递归。numFound 用于正确增加运行索引。我没有对此进行大量测试，但这应该是一个好的开始：

```
var Iterator = function () {
    var needleKey = 'needle';
    var currIndex = 0;
    var runningIndex = 0;
    var foundObjects = {};

    var getValueByIndex = function (obj,currentPath) {
        var objToSearch = obj || haystackObj;
        for (var x in objToSearch) {
            currentPath += x + '_';
            if (x == needleKey) {

                if (runningIndex == currIndex) {
                    currIndex += 1;
                    if (!foundObjects[currentPath]) {
                        foundObjects[currentPath] = {
                            numFound: 0,
                            finished: false
                        };
                    }
                    foundObjects[currentPath].numFound += 1;
                    return objToSearch[x];
                }
                runningIndex += 1;
            } else if (typeof objToSearch[x] == 'object') {
                if (foundObjects[currentPath] && foundObjects[currentPath].finished) {
                    runningIndex += foundObjects[currentPath].numFound;
                } else {
                    var found = getValueByIndex(objToSearch[x],currentPath);
                    if (found) {
                        return found;
                    }
                }
            }
            if (!foundObjects[currentPath]) {
                foundObjects[currentPath] = {
                    numFound: 0,
                    finished: true
                };
            }
            foundObjects[currentPath].finished = true;
        }
    }

    this.next = function () {
        runningIndex = 0;

        return getValueByIndex(0,'');
    }
};
var iterator = new Iterator();
var value = iterator.next(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:30:02.653

假设我对您的理解正确，并记住这不是“真正的收益”，并将所有代码放在您似乎想要的地方，

```
var iterator = {
    next: function () {
        /* 
        * WHAT CODE GOES HERE? 
        * 
        * Should return the next property, recursively, with the name 
        * equal to needleKey, of haystackObj.
        *
        */
        var values=[], findneedles;
        findneedles = function(o){
            var k;
            for(k in o){
                if(k === needleKey){
                    values.push(o[k]);
                }else if(typeof o[k] === 'object'){
                    findneedles(o[k]);
                }
            }
        };
        findneedles(haystackObj);
        this.next = function(){
            return values.shift();
        };
        return values.shift();
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T21:30:35.297

我要为后人回答这个问题。

在 ECMAScript 6 中，我们有一个[yield](http://wiki.ecmascript.org/doku.php?id=harmony%3agenerators)语句。*但是假设你很疯狂，你现在*想使用这个功能。使用[traceur-compiler](https://github.com/google/traceur-compiler)将您的普通旧 JavaScript 编译，我们得到[以下](http://goo.gl/9P8w4v).

### 输入：

```
var iterator = function* (object) {

        for(var key in object) {
                yield key;
                for( k of iterator(object[key]) ) {
                        yield k;
                }
        }
};

var o = {
        a: 10,
        b: 11,
        c: {
                ca: 12,
                cb: 13,
        },
        d: 14,
};

var res = [];
for( key of iterator(o) ) {
        res.push(key);
}

res; 
```

### 输出

```
var $__generatorWrap = function(generator) {
        return $traceurRuntime.addIterator({
                next: function(x) {
                        switch (generator.GState) {
                                case 1:
                                        throw new Error('"next" on executing generator');
                                case 3:
                                        throw new Error('"next" on closed generator');
                                case 0:
                                        if (x !== undefined) {
                                        throw new TypeError('Sent value to newborn generator');
                                }
                                case 2:
                                        generator.GState = 1;
                                if (generator.moveNext(x, 0)) {
                                        generator.GState = 2;
                                        return {
                                                value: generator.current,
                                                done: false
                                        };
                                }
                                generator.GState = 3;
                                return {
                                        value: generator.yieldReturn,
                                        done: true
                                };
                        }
                },
                'throw': function(x) {
                        switch (generator.GState) {
                                case 1:
                                        throw new Error('"throw" on executing generator');
                                case 3:
                                        throw new Error('"throw" on closed generator');
                                case 0:
                                        generator.GState = 3;
                                throw x;
                                case 2:
                                        generator.GState = 1;
                                if (generator.moveNext(x, 1)) {
                                        generator.GState = 2;
                                        return {
                                                value: generator.current,
                                                done: false
                                        };
                                }
                                generator.GState = 3;
                                return {
                                        value: generator.yieldReturn,
                                        done: true
                                };
                        }
                }
        });
};
var iterator = function(object) {
        var $that = this;
        var $arguments = arguments;
        var $state = 20;
        var $storedException;
        var $finallyFallThrough;
        var $__0;
        var $__1;
        var $__2;
        var $__3;
        var $__4;
        var $__5;
        var key;
        var $G = {
                GState: 0,
                current: undefined,
                yieldReturn: undefined,
                innerFunction: function($yieldSent, $yieldAction) {
                        while (true) switch ($state) {
                                case 20:
                                        $__2 = [];
                                $state = 21;
                                break;
                                case 21:
                                        $__3 = object;
                                $state = 23;
                                break;
                                case 23:
                                        for (var $__4 in $__3) $__2.push($__4);
                                $state = 25;
                                break;
                                case 25:
                                        $__5 = 0;
                                $state = 17;
                                break;
                                case 17:
                                        if ($__5 < $__2.length) {
                                        $state = 12;
                                        break;
                                } else {
                                        $state = 19;
                                        break;
                                }
                                case 11:
                                        $__5++;
                                $state = 17;
                                break;
                                case 12:
                                        key = $__2[$__5];
                                $state = 13;
                                break;
                                case 13:
                                        if (!(key in $__3)) {
                                        $state = 11;
                                        break;
                                } else {
                                        $state = 15;
                                        break;
                                }
                                case 15:
                                        this.current = key;
                                $state = 1;
                                return true;
                                case 1:
                                        if ($yieldAction == 1) {
                                        $yieldAction = 0;
                                        throw $yieldSent;
                                }
                                $state = 3;
                                break;
                                case 3:
                                        $__0 = $traceurRuntime.getIterator(iterator(object[key]));
                                $state = 7;
                                break;
                                case 7:
                                        if (!($__1 = $__0.next()).done) {
                                        $state = 8;
                                        break;
                                } else {
                                        $state = 11;
                                        break;
                                }
                                case 8:
                                        k = $__1.value;
                                $state = 9;
                                break;
                                case 9:
                                        this.current = k;
                                $state = 5;
                                return true;
                                case 5:
                                        if ($yieldAction == 1) {
                                        $yieldAction = 0;
                                        throw $yieldSent;
                                }
                                $state = 7;
                                break;
                                case 19:
                                        $state = -2;
                                case -2:
                                        return false;
                                case -3:
                                        throw $storedException;
                                default:
                                        throw "traceur compiler bug: invalid state in state machine: " + $state;
                        }
                },
                moveNext: function($yieldSent, $yieldAction) {
                        while (true) try {
                                return this.innerFunction($yieldSent, $yieldAction);
                        } catch ($caughtException) {
                                $storedException = $caughtException;
                                switch ($state) {
                                        default:
                                                this.GState = 3;
                                        $state = -2;
                                        throw $storedException;
                                }
                        }
                }
        };
        return $__generatorWrap($G);
};
var o = {
        a: 10,
        b: 11,
        c: {
                ca: 12,
                cb: 13
        },
        d: 14
};
var res = [];
for (var $__1 = $traceurRuntime.getIterator(iterator(o)), $__0; !($__0 = $__1.next()).done;) {
        key = $__0.value;
        {
                res.push(key);
        }
}
res; 
```

所以`yield`JavaScript 中的声明是可能的，但非常不切实际。

# 我实际上最终使用了什么

### 使用示例：

```
var object = {...};
var callback = function (key, value) {

        // Do stuff...

        return traverse.CONTINUE; 
        // or return traverse.STOP if you want the iteration to stop
};

traverse(object, callback); 
```

### 执行：

```
var traverse = (function () {

        var _traverse = function (object, callback) {

                var key, value, command;
                for( key in object ) {
                        value = object[key];

                        command = callback(key, value);
                        if( command === _traverse.STOP ) {
                                return _traverse.STOP;
                        }

                        command = _traverse(value, callback);
                        if( command === _traverse.STOP ) {
                                return _traverse.STOP;
                        }
                }
        };
        _traverse.CONTINUE = 1;
        _traverse.STOP = 2;

        return _traverse;
})(); 
```

# python - Python：运行相同的单元测试模块测试多个文件

> ID：14696094
> 
> 赞同：2
> 
> 时间：2013-02-04T21:36:11.697
> 
> 标签：python, unit-testing, import, namespaces

我正在尝试创建一个简单的框架，它将从特定目录中发现所有测试用例（我对这些用例使用 unittest），并针对多个 python 文件运行这些测试用例中的每一个，这些文件都将使用相同的代码实现相同的代码函数签名。

```
Autograder.py  
TestCasesFolder/
    TestCase1.py  
    TestCase2.py  
    ...  
ImplementationFolder/
    Implementation1.py
SecondImplementationFolder/
    Implementation2.py 
```

框架使用成功找到所有测试用例（注意这是在类中）

```
self.suites = unittest.defaultTestLoader.discover(self.testDirectory) 
```

从那里，我想在 Implementation1 和 Implementation2 上运行这些套件。

我一直在使用内置

```
self.suites.run(unittest.TestResult) 
```

来自 unittest 的方法来运行我的测试，我第一次尝试解决这个问题是导入我想要测试的当前实现

```
imp.load_source 
```

然后使用正确的模块引用更新 TestCase1.py 的全局命名空间。但是，因为每个模块都有自己的全局命名空间，所以我不确定是否可以连接到其他文件命名空间。我也不确定这是否是正确的方法，或者是否有比我的实现更好的方法。我该怎么做呢？

**编辑** 我目前似乎可行的解决方案是让 Autograder.py 文件`__builtins__`参考实施模块来更新模块。实际的行如下所示：

```
__builtins__.ImplementationModule = imp.load_source("Implementation Module", "Implementation1.py") 
```

这意味着当 TestCase1.py 可以通过`__builtins__`. 当然，问题是假设`__builtins__`模块永远不会实现任何名为 ImplementationModule 的东西，否则我会用未知的含义覆盖它。这样做有没有风险较小的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:44:41.883

你看过鼻子系统吗？这听起来与您正在做的事情非常相似。

[http://readthedocs.org/docs/nose/](http://readthedocs.org/docs/nose/)

# font-size - 将 line-height 设置为 font-size 会导致 line-height 急剧增加

> ID：14696097
> 
> 赞同：2
> 
> 时间：2013-02-04T21:36:46.300
> 
> 标签：font-size, css

我的印象是行高会略大于字体大小（大约 20%）。相反，我看到的是我必须将行高设置为低于字体大小才能获得合理的行高。

我需要手动设置行高以进行布局。我究竟做错了什么？

当字体大小和行高相同时，这是[jsfiddle](http://jsfiddle.net/3BT2T/)显示巨大的行高。

如果小提琴出现故障：

HTML：

```
<h2>Contact Me</h2>
<p>You can Contact Me at sample@smaple.com or use the contact form below:</p> 
```

CSS：

```
h2 {
    font-size:2em;
    line-height:2em;
    float: left;
    background-color:red;
}
p {
    background-color:yellow;
    font-size:2em;
    line-height:2em;
} 
```

# ssis - 在 Windows 8 上创建 SSIS 包需要哪些工具？

> ID：14696098
> 
> 赞同：3
> 
> 时间：2013-02-04T21:36:48.603
> 
> 标签：ssis

我正在运行 Windows 8 并且需要开发 SSIS 包。

我需要的 SSIS 包版本是 SQL Server 2008 R2。

我是 SSIS 新手，但据我了解，我需要安装 SQL Server 2008 R2 和 Visual Studio 2010 才能创建 Integration Services 项目（其中将包含我的 SSIS 包）。这是否正确？

有谁知道我需要安装什么？我已经安装了 SQL Server 2008 R2 和 Visual Studio 2010 Premium 但是我没有得到集成服务项目模板的选项。

我安装了 Visual Studio 2012，但我的理解是 VS2012 不能用于创建 SSIS 包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:41:14.737

如果*`Business Intelligence Development Studio (BIDS)`*要使用 SQL Server 2008 R2 版本创建 SSIS 包，则需要。BIDS 使用 Visual Studio 2008 Shell。使用 SQL Server 2008 R2 进行 SSIS 开发不需要 Visual Studio 2010。

但是，如果您使用的是 SQL Server 2012，则需要使用 Visual Studio 2010 Shell 的 SQL Server Data Tools (SSDT)。

对以下 SO 问题的回答包含使用*SQL Server 2008 R2安装程序安装**Business Intelligence Development Studio (BIDS)*的步骤。

 *[如何在 SQL Server 2008 中启用集成服务 (SSIS)？](https://stackoverflow.com/questions/14551255/how-do-i-enable-integration-services-ssis-in-sql-server-2008/14564823#14564823)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:44:33.047

适用于 SQL Server 2008 R2 和 SQL Server 2012 的 Windows 8 和 SSIS 开发工作正常。

SQL Server 2005 将使用 Visual Studio 2005 shell (devenv) 进行 BIDS (Business Intelligence Designer Studio)

SQL Server 2008 和 SQL Server 2008 R2 使用 Visual Studio 2008 shell 进行 BIDS

SQL Server 2012 将 Visual Studio 2010 的外壳用于 SSDT（SQL Server 开发工具）。他们也有使用 Visual Studio 2012 环境的路线图，但尚未发布项目模板。

对于所有这些选择，您永远不需要安装 Visual Studio。当您在安装程序中选择选项时，SQL Server 安装程序会将 shell 放入您的计算机和关联的 ssis/ssrs/ssas 项目类型。*

# eclipse - MacPro Lion 10.7.4 上的 Nsight 5.0

> ID：14696099
> 
> 赞同：0
> 
> 时间：2013-02-04T21:36:52.113
> 
> 标签：eclipse, cuda, nsight

我是 CUDA 开发新手，我在 MacPro 上使用 NSight 5。

我正在用两个粒子进行一个非常简单的模拟（`ver1`这里`ver2`是两个结构体，它们具有指向另一种结构体的指针—— `links`）

代码已编译，但在到达此块的末尾时似乎遇到了问题，并且从未进入`integrate_functor()`：

```
...    
thrust::device_vector<Vertex> d_vecGlobalVec(2);

d_vecGlobalVec[0] = ver1;
d_vecGlobalVec[1] = ver2;

thrust::for_each(
    d_vecGlobalVec.begin(),
    d_vecGlobalVec.end(),
    integrate_functor(deltaTime)
);
... 
```

所以我的问题是：

1.  `ver1`在 NSight 中，我可以看到和的成员变量的值`ver2`；但是在这个块中代码的最后一行之前，当我展开 的层次结构时`d_vecGlobalVec`，我可以看到这些值中的任何一个 - 对应的字段（例如，这个向量中的第一个元素）只是空的。为什么会这样？显然，`ver1`并且`ver2`在主机备忘录上，而在`d_vecGlobalVec`设备上的值。

NSight 团队的一名成员发布了[此](https://stackoverflow.com/a/11868662/2041023)信息。

那么，总的来说，这是否意味着我应该能够在主机和设备代码之间进出，并且能够看到主机/设备变量，就好像它们之间没有障碍一样？

系统：

英伟达 GeForce GT 650M 1024 MB

Mac OS X Lion 10.7.4 (11E2620)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:03:32.283

确保实际调用了您的设备代码。检查所有返回代码并确认该设备实际在输出上工作。有时，如果thrust 认为它更有效，它可能会在主机上运行代码。

我真的建议更新到 10.8 - 它具有最新的驱动程序，对 NVIDIA GeForce 6xx 系列的支持最好。

另请注意，为了获得最佳体验，您需要使用不同的 GPU 进行显示和 CUDA 调试 - 否则 Mac OS X 可能会干扰并终止调试器。

# jquery - Jquery：基于复选框选择显示/隐藏下拉菜单和按钮

> ID：14696105
> 
> 赞同：1
> 
> 时间：2013-02-04T21:37:16.780
> 
> 标签：jquery

我想做的是：

如果选择了一个或多个复选框，则显示`cboResearch`并`btnResearch`

对我来说棘手的部分是复选框名称是基于循环的。所以，总而言之，我想要这样：

*   如果选中一个或多个框，则显示下拉菜单和按钮
*   如果未选中所有复选框，则隐藏下拉菜单和按钮

除了下面的记录集代码之外，我已经提供了所有内容 - 希望它足以解决问题的症结所在。

```
<head>
    <!--Jquery drop down menu add-on-->
    <script type="text/javascript" src="../js/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="../js/jquery.dd.js"></script>
    <script language="javascript">
        $(document).ready(
        function() {
            //JQuery code for drop-down menus  
            try {
                oHandler = $(".mydds").msDropDown().data("dd");
                $("#ver").html($.msDropDown.version);
            } catch (e) {
                alert("Error: " + e.message);
            }
        });

        //Function to select all check boxes.
        $(function() {
            $('.checkall').click(function() {
                $(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);
            });
        });
    </script>
</head>
<body>
    <form>
        <fieldset>
            <p>Select All
                <input type="checkbox" name="cbSelectAll" id="cbSelectAll" class="checkall">
            </p>
            <% Dim iX iX=0 Do While Not RS.EOF iX=i X + 1 %>
                <p>
                    <input type="checkbox" name="cbSelection<%=iX%>" id="cbSelection<%=iX%>"
                    />
                </p>
            <% RS.MoveNext Loop %>
            <p>
                <select name="cboResearch" id="cboResearch">
                    <option value="1">option1</option>
                    <option value="2">option2</option>
                </select>
            </p>
            <p>
                <input name="btnResearch" type="button" class="button" value="Research" />
            </p>
        </fieldset>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:06:45.387

感谢您更新您的代码，现在可以更清楚地了解重复的内容和不重复的内容。

为了选择我正在使用的所有复选框`^=`，这是 jQuery 的[**Attribute Starts With Selector**](http://api.jquery.com/attribute-starts-with-selector/)

您可以绑定到检查其状态的复选框的更改事件，并基于该事件隐藏或显示所需的元素。

您还想检查该状态并在页面加载以及选中/取消选中 chack-all 时对其做出反应。我在整个脚本中添加了注释，让你看看是什么。

> 旁注：您的检查全部没有按预期工作，因为当检查状态被删除时，属性消失了，第二次检查全部不起作用。我还在 DEMO 中修复了这个问题

* * *

[**演示**](http://jsfiddle.net/Y2RPf/)- 检查时显示下拉菜单/按钮，否则隐藏

* * *

DEMO 使用以下脚本：

```
//If one or more boxes are checked, display dropdown menu and button
//If all check boxes are unchecked, hide dropdown menu and button

// cache the jquery reference to the checkboxes
// Note the ^= in the jQuery selector below selects all elements with a name attribute which starts with `cboSelection`
var $checkboxes = $("input:checkbox[name^='cbSelection']");

// Declare a function which will process the logic when executed
var processControlState = function(){
    var anyCheckBoxSelected = false;

    // iterate through all checkboxes and check if any of them is checked
    $checkboxes.each(function(){
        if(this.checked){
            // indicate we found a checkbox which is checked
            anyCheckBoxSelected = true;

            // exit the each loop, we found one checked which is enough
            return false;
        }
    });

    // check, if we found a checkbox which was checked
    if(anyCheckBoxSelected){
        // yes we did, show the controls
        $("#cboResearch").show();
        $("input[name='btnResearch']").show();
    }
    else{
        // no we have not, hide the controls
        $("#cboResearch").hide();
        $("input[name='btnResearch']").hide();
    }
};

// execute this method on load to ensure you start off in the correct state
processControlState();

// execute processControlState when a checkbox state is changed
$checkboxes.change(function(){
    processControlState();
})

// add call to processControlState aslo to the chack-all checkbox
$('.checkall').click(function () {
    //$(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);

    // simply set the other checkboxe's state to this one
    $checkboxes.prop("checked", this.checked);

    // then also call method to ensure the controls are shown/hidden as expected
    processControlState();
}); 
```

来自 DEMO 的 HTML

```
<form>
    <fieldset>
        <p>Select All
            <input type="checkbox" name="cbSelectAll" id="cbSelectAll" class="checkall">
        </p>
        <p>
            <input type="checkbox" name="cbSelection1" id="cbSelection1" />
        </p>
        <p>
            <input type="checkbox" name="cbSelection2" id="cbSelection2" />
        </p>
        <p>
            <input type="checkbox" name="cbSelection3" id="cbSelection3" />
        </p>
        <p>
            <input type="checkbox" name="cbSelection4" id="cbSelection4" />
        </p>
        <p>
            <select name="cboResearch" id="cboResearch">
                <option value="1">option1</option>
                <option value="2">option2</option>
            </select>
        </p>
        <p>
            <input name="btnResearch" type="button" class="button" value="Research"
            />
        </p>
    </fieldset>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:00:24.193

一个可能的解决方案

-> 因为你的 id 是自动生成的，所以在你的自动生成的复选框中添加一个类

```
<input type="checkbox" name="cbSelection<%=iX%>" id="cbSelection<%=iX%>" class="test"/> 
```

-> 获取选中的复选框的数量并执行所需的任何操作

```
 $(document).ready(function () {
            $('.cbs').click(function () {
                if($('input.test').filter(':checked').length>0)
                  {
                       //show ur controls
                   }
    else
    {
    //hide controls
    }
        });
    }); 
```

# django - 多个数据库的 Django Admin

> ID：14696109
> 
> 赞同：1
> 
> 时间：2013-02-04T21:37:24.220
> 
> 标签：django, admin, multiple-databases

根据[1.4](https://docs.djangoproject.com/en/1.4/topics/db/multi-db/#exposing-multiple-databases-in-django-s-admin-interface)使用 Admin 与多个数据库的文档，您只需要在您的`ModelAdmin`子类中实现 5 个方法。我已经以推荐的方式覆盖了所有 5 个。浏览数据库没有问题。

但是，尝试保存现有记录时，我收到一个错误，声称该表在数据库中不存在 - 项目的**默认数据库**，而不是我在方法实现中指定的数据库。事实上，`save_model()`在抛出错误之前不会被调用，所以在它到达之前的某个地方有一个引用，它没有成功地获得正确数据库的“使用”。

有谁知道缺少什么？这是我的`ModelAdmin`课：

```
class TransactionAdmin(admin.ModelAdmin):
    using = "salesdb"

    def save_model(self, request, obj, form, change):
        # Tell Django to save objects to the 'other' database.
        obj.save(using=self.using)

    def delete_model(self, request, obj):
        # Tell Django to delete objects from the 'other' database
        obj.delete(using=self.using)

    def queryset(self, request):
        # Tell Django to look for objects on the 'other' database.
        return super(TransactionAdmin, self).queryset(request).using(self.using)

    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        # Tell Django to populate ForeignKey widgets using a query
        # on the 'other' database.
        return super(TransactionAdmin, self).formfield_for_foreignkey(db_field, request=request, using=self.using, **kwargs)

    def formfield_for_manytomany(self, db_field, request=None, **kwargs):
        # Tell Django to populate ManyToMany widgets using a query
        # on the 'other' database.
        return super(TransactionAdmin, self).formfield_for_manytomany(db_field, request=request, using=self.using, **kwargs) 
```

我得到的错误是：

```
(1146, "Table 'django_dev._Transactions' doesn't exist") 
```

`django_dev`是默认数据库，而不是`sales`数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:13:53.867

这显然是一个错误。

[https://code.djangoproject.com/ticket/19747](https://code.djangoproject.com/ticket/19747)

该错误已被接受，因此我想这意味着他们已确认。

# android - 使用到 Html.fromText 时将包含图像与基础对齐

> ID：14696110
> 
> 赞同：0
> 
> 时间：2013-02-04T21:37:36.630
> 
> 标签：android

我有这样的代码。

```
Button b = findViewById(R.id.button);
mImgGetter = new MiniImageGetter(this);
b.setText(Html.fromText("<img src=\"foo\"> FOO!"),mImgGetter,null) 
```

其中 MiniImageGetter 是一个类似的类：

```
class MiniImageGetter implements ImageGetter {
    private Context mContext;

    public MiniImageGetter(Context c) {
        mContext =c;
    }

    @Override
    public Drawable getDrawable(String source) {
         Drawable d = mContext.getResources().getDrawableR.drawable.foo);
         d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
         return d;

    }
} 
```

但是图像都与按钮文本的底部对齐，而不是与文本的基线对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:38:02.287

我没有找到真正的解决方案，但解决方法是：

```
private SpannableString getSpannableString(int image, int buttontext) {
    Drawable d = getResources().getDrawable(image); 

    SpannableString ss = new SpannableString("  " + getString(buttontext));
    d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight()); 
    ImageSpan span = new ImageSpan(d, ImageSpan.ALIGN_BASELINE); 
    ss.setSpan(span, 0, 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    return ss;
} 
```

然后使用

```
 b.setText(getSpannableString(R.drawable.foo,"Text with image in front of it")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T15:42:22.363

您可以使用它来将内联图像与文本对齐。

```
public Drawable getDrawable(String source) {
    BitmapDrawable d = ...;
    d.setBounds(new Rect(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight() + 5));
    d.setGravity(Gravity.TOP);
    return d;
} 
```

# c++ - GCC 编译器 Windows 问题

> ID：14696118
> 
> 赞同：0
> 
> 时间：2013-02-04T21:38:15.170
> 
> 标签：c++, gcc, windows-7, cilk-plus

1.  如果您已经安装了 4.4.1，安装 GCC 4.7 会不会很危险？如果是这样，我如何卸载过时的版本？
2.  我在哪里可以下载最新的、**免费**的、**与 Windows 兼容的**、包含GCC的**Cilk+版本？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:42:18.317

对于第一个任务，答案是否定的。只需在您的 IDE 中选择正确的工具链。对于第二个问题，请参阅[下载英特尔® Cilk++ SDK](http://software.intel.com/en-us/articles/download-intel-cilk-sdk)。

# javascript - 获取句子数组

> ID：14696120
> 
> 赞同：0
> 
> 时间：2013-02-04T21:38:17.097
> 
> 标签：javascript

我有一个带有几个句子的文本区域。（。是一个分隔符）。如何获得句子数组？我的意思是例如。`hello world. it's hello world.hello.`结果数组是 -`[hello world], [it's hello world], [hello]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:40:08.997

您应该使用该`split`方法。

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

var sentenceArray = str.split("\. |\.")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:48:24.733

您可以使用`.split()`将字符串拆分为数组：

```
> "hello world. it's hello world.hello.".split('.')
["hello world", " it's hello world", "hello", ""] 
```

# symfony - Symfony2，学说，关系中的空实体

> ID：14696124
> 
> 赞同：0
> 
> 时间：2013-02-04T21:38:30.290
> 
> 标签：symfony, doctrine, entity

我有两个实体，一个是主要的，第二个是附加的，它们作为 OneToOne 加入。我不会全部展示，我认为没有必要：

**apiKey**

```
/**
 * @ORM\OneToOne(targetEntity="Eve\ApiBundle\Entity\Account\apiKeyInfo", inversedBy="apiKey_byKeyID")
 * @ORM\JoinColumn(name="keyID", referencedColumnName="keyID")
 */
private $apiKeyInfo_byKeyID;

public function get_apiKeyInfo_byKeyID()
{
    return $this->apiKeyInfo_byKeyID;
} 
```

**apiKeyInfo**

```
/**
 * @ORM\OneToOne(targetEntity="Eve\ProfileBundle\Entity\apiKey", mappedBy="apiKeyInfo_byKeyID")
 */
private $apiKey_byKeyID;

public function get_apiKey_byKeyID()
{
    return $this->apiKey_byKeyID;
}

/**
 * @ORM\Column(name="type", type="string", length=255)
 */
private $type;

/**
 * @param string $type
 * @return apiKeyInfo
 */
public function setType($type)
{
    $this->type = $type;

    return $this;
}

/**
 * @return string 
 */
public function getType()
{
    return $this->type;
} 
```

我在树枝中调用的关系（apiKey 在 php 部分中获取）

```
apiKey.get_apiKeyInfo_byKeyID.type 
```

当 db 表充满数据时，它可以正常工作，但是当“apiKeyInfo”表没有相同的 keyID 时，它会抛出异常：

```
Entity was not found. 
```

我明白为什么，因为它找不到具有相同 keyID 的条目......但我不知道如何处理它。

所以问题是......我怎样才能使这种关系的结果可以为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:07:42.740

问题在于对实体的错误描述。问题解决了。

# ruby - 如何从下拉列表中选择“###dog”？

> ID：14696125
> 
> 赞同：0
> 
> 时间：2013-02-04T21:38:32.613
> 
> 标签：ruby, selenium-webdriver

```
<select name="dropdown" multiple="multiple" size="2">

  <option value="1">#Ram</option>
  <option value="2">##animals</option>
  <option value="3">###cat</option>
  <option value="4">###dog</option>
  <option value="5">#kalu</option>
  <option value="6">##animals</option>
  <option value="7">###rat</option>
  <option value="8">###dog</option>
  <option value="9">#jadu</option>
  <option value="10">##animals</option>
  <option value="11">###cat</option>

</select> 
```

现在我想选择`###dog`#kalu->##animals->###dog 之后的 select ——这是我要给出的输入。但现在的重点是如何选择正确`###dog`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:53:24.963

我认为您必须获得所有选项并确定每个选项的路径（即父母）。

以下内容适用于您的 html 示例。希望我没有做出太多假设。

```
#This is the option (path) you want to select
option_to_select = '#kalu->##animals->###dog'

#Get the select list
dropdown = Selenium::WebDriver::Support::Select.new(driver.find_element(:name => 'dropdown'))

#Get the text of all options
option_text = dropdown.options.collect(&:text)

#For each option, determine its full path and value
paths = {}
option_text.each_with_index do |text, index|
    level = text[/^(#+)/].length
    segment = option_text[0..index]
    path = []
    1.upto(level) do |i|
        path << segment[segment.rindex{ |x| x =~ /^#{'#' * i}\w/ }]
    end
    paths[path.join('->')] = (index + 1).to_s
end

#Convert the desired option path to a value and select it from the dropdown
dropdown.select_by(:value, paths[option_to_select]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:34:16.547

Sizzle 必须支持 CSS 选择器：

```
driver.find_element(:css, "select option:contains('###dog'):last") 
```

# javascript - ajax 客户端到服务器端

> ID：14696131
> 
> 赞同：1
> 
> 时间：2013-02-04T21:39:22.253
> 
> 标签：javascript, asp.net, ajax

**a)**我正在尝试将存储在变量“mem_ID”中的值从我的 javascript 页面发送到我的服务器端...default.aspx 到我的服务器端 - default.aspx.cs 页面。但我不断收到一条错误消息。

```
$.ajax({ 

        type: "POST", 
        url: "default.aspx.cs",
        data: "{mem_ID : ' " + mem_ID + "'}",
        async: true,
        // success: function (result) { } 
        }); 
```

$ - 未定义。预期的标识符或字符串。

**b 部分）此外，一旦我将其发送到服务器端，我如何接收存储在 mem_ID 中的值？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:43:11.953

你可以使用一个[`PageMethod`](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/). 让我们在后面的代码中举例说明这种方法：

```
[WebMethod]
public static string MyMethod(string memId)
{
    return string.Format("Thanks for calling me with id: " + memId);
} 
```

注意事项：方法必须是静态的并用[`[WebMethod]`](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx)属性修饰。

在客户端，您可以使用如下函数调用此方法`jQuery.ajax()`：

```
$.ajax({ 
    url: 'default.aspx/MyMethod',
    type: 'POST', 
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify({ memID : mem_ID }),
    success: function (result) { 
        alert(result.d);
    } 
}); 
```

Also the error you are getting about the undefined `$` symbol is related to the fact that you didn't reference the jQuery library in your page. So make sure that in your WebForm you have actually added reference to the jQuery library before using it. For example:

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script> 
```

# bash - 将 Fortran 记录预处理为类型的 Shell 脚本？

> ID：14696132
> 
> 赞同：1
> 
> 时间：2013-02-04T21:39:23.180
> 
> 标签：bash, shell, sed, awk, fortran

我正在将一些旧的 F77 代码转换为在 gfortran 下编译。我有一堆以下列方式使用的记录：

```
RecoRD /TEST/ this
this.field = 1
this.otherfield.sumthin = 2
func = func(%val(ThIs.field,foo.bar,this.other.field)) 
```

我正在尝试将这些全部转换为 TYPE：

```
TYPE(TEST) this
this%field = 1
this%otherfield%sumthin = 2
func = func(%val(ThIs%field,foo.bar,this%other%field)) 
```

我对 sed 没问题，我可以处理文件以用 TYPE 声明替换 RECORD 声明，但是有没有办法使用 linux 工具编写预处理类型的脚本来将 this.field 表示法转换为 this%field 表示法？我相信我需要一些可以识别声明的记录名称并专门针对它的东西，以避免意外地影响其他变量。另外，知道如何处理包含的文件吗？我觉得这可能会变得非常混乱，但如果有人做过类似的事情，最好包含在解决方案中。

编辑：我有 python 2.4 可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:04:15.247

您可以为此使用 Python。以下脚本从标准输入读取文本并使用您要求的替换将其输出到标准输出：

```
import re
import sys

txt = sys.stdin.read()
names = re.findall(r"RECORD /TEST/\s*\b(.+)\b", txt, re.MULTILINE)
for name in list(set(names)):
    txt = re.sub(r"\b%s\.(.*)\b"%name, r"%s%%\1"%name, txt, 
                 re.MULTILINE)
sys.stdout.write(txt) 
```

编辑：至于 Python 2.4：是的格式应该替换为 %。至于具有子字段的结构，可以通过在`sub()`调用中使用如下函数轻松实现。我还添加了不区分大小写：

```
import re
import sys

def replace(match):
    return match.group(0).replace(".", "%")

txt = sys.stdin.read()
names = re.findall(r"RECORD /TEST/\s*\b(.+)\b", txt, re.MULTILINE)
for name in names:
    txt = re.sub(r"\b%s(\.\w+)+\b" % name, replace, txt,
                 re.MULTILINE | re.IGNORECASE)
sys.stdout.write(txt) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:21:04.080

使用 GNU awk：

```
$ cat tst.awk
/RECORD/ { $0 = gensub(/[^/]+[/]([^/]+)[/]/,"TYPE(\\1)",""); name=tolower($NF) }
{
   while ( match(tolower($0),"\\<" name "[.][[:alnum:]_.]+") ) {
      $0 = substr($0,1,RSTART-1) \
           gensub(/[.]/,"%","g",substr($0,RSTART,RLENGTH)) \
           substr($0,RSTART+RLENGTH)
   }
}
{ print }

$ cat file
RECORD /TEST/ tHiS
this.field = 1
THIS.otherfield.sumthin = 2
func = func(%val(ThIs.field,foo.bar,this.other.field))

$ awk -f tst.awk file
TYPE(TEST) tHiS
this%field = 1
THIS%otherfield%sumthin = 2
func = func(%val(ThIs%field,foo.bar,this%other%field)) 
```

请注意，我修改了您的输入以显示`this.field`在一行上多次出现并与其他“。”混合会发生什么。参考文献（`foo.bar`）。我还添加了一些混合大小写的“this”来展示它是如何工作的。

针对以下有关如何处理包含文件的问题，这是一种方法：

该脚本不仅会扩展所有“包含子文件”的行，还会将结果写入 tmp 文件，重置 ARGV[1]（最高级别的输入文件）而不重置 ARGV[2]（tmp 文件） ，然后它让 awk 对扩展结果进行任何正常的记录解析，因为它现在存储在 tmp 文件中。如果您不需要，只需对标准输出执行“打印”并删除对 tmp 文件或 ARGV[2] 的任何其他引用。

```
awk 'function read(file) {
       while ( (getline < file) > 0) {
           if ($1 == "include") {
                read($2)
           } else {
                print > ARGV[2]
           }
       }
       close(file)
   }
   BEGIN{
      read(ARGV[1])
      ARGV[1]=""
      close(ARGV[2])
   }1' a.txt tmp 
```

给定当前目录中的这 3 个文件，运行上述结果：

```
 a.txt             b.txt              c.txt
  -----             -----              -----
  1                 3                  5
  2                 4                  6
  include b.txt     include c.txt
  9                 7
  10                8 
```

将打印数字 1 到 10 并将它们保存在名为“tmp”的文件中。

因此，对于此应用程序，您可以将上述脚本末尾的数字“1”替换为上面发布的第一个脚本的内容，它适用于现在包含扩展文件内容的 tmp 文件。

# python - self.redirect 在使用 Plone 调用 grok.View 时导致 TypeError

> ID：14696133
> 
> 赞同：1
> 
> 时间：2013-02-04T21:39:25.090
> 
> 标签：python, plone, grok

我一直在使用简单的 grok 和 Plone 4.1.4。到目前为止，我尝试了从这里[5.grok获取的 1.2.0 和 1.1.1 版本的已知良好配置](http://good-py.appspot.com/release/five.grok/)

我尝试将 grok.View 与重定向一起使用，并且每当运行重定向代码 (self.redirect('url')) 时，都会引发以下 TypeError：

```
TypeError: redirect() got an unexpected keyword argument 'trusted'
> /home/alex/projects/eggs/grokcore.view-1.13.5-py2.6.egg/grokcore/view/components.py(50)redirect()
-> url, status=status, trusted=trusted) 
```

我发现这个讨论处理了类似的问题，但没有真正的解决方案。[格曼](http://comments.gmane.org/gmane.comp.web.zope.grok.devel/10695)

重现错误真的很容易，只需在 grok.View 派生类中有一个更新方法即可。

```
from five import grok
from Products.CMFCore.interfaces import ISiteRoot
class RedirectTest(grok.View):
    grok.context(ISiteRoot)
    grok.require('zope2.View')
    grok.name('testredirect')
    def update(self):
        self.redirect(self.url(''))
    def render(self):
        self.redirect(self.url('')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:53:39.593

要在 Zope2 平台（由 Plone 使用）上使用 Grok，您需要安装正确版本的[`five.grok`包](http://pypi.python.org/pypi/five.grok)。

Grok 是针对 Zope Toolkit 开发的，ZTK 中的发布者包的 API 与 Zope2 发布者提供的 API 略有不同。`five.grok`弥合了这种差异。但是您需要有正确的版本才能进行正确的匹配。

对于 Plone 4.1 (Zope 2.13)，请确保使用`five.grok`1.3.1 或更高版本：

> *   修复重定向方法以正常工作。与 Zope 3 不同，它不支持受信任。

如果您要升级到 Plone 4.2，正确的版本引脚包含在包含的 versions.cfg 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T20:11:40.403

Martijn 的回答是最正确的。但是，作为解决方法，如果您无法将生产环境中的 Five.grok 版本升级到 >= 1.3.1，则可以使用“self.request.response.redirect(url_string)”而不是“self.redirect(url_string)” . 我知道这太丑了，我建议仅在这种情况下使用此替代方法。

# php - 使用PHP将SVG转换为PCB文件格式

> ID：14696134
> 
> 赞同：0
> 
> 时间：2013-02-04T21:39:25.393
> 
> 标签：php, dom, svg

我有一个包含坐标的文件，并且想将这些坐标提取到变量`x1`, `x2`, 中`y1`，`y2`这样我就可以使用 y = y2-y1 和 x=x2-x1 获得中心线

例如，我想像这样转换文件数据：

```
points="94.08955764770508,275.3258819580078 99.92155838012695,275.3258819580078 99.92155838012695,281.16587829589844 94.08955764770508,281.16587829589844" 
```

变成这样的变量：

```
x1 = 94.08955764770508
y1 = 275.3258819580078
x2 = 99.92155838012695
y2 = 275.3258819580078 
```

这是我一直在尝试的代码：

```
$line = '<polygon id="svg_806" fill-rule="nonzero" fill="black" stroke-linejoin="round" stroke-width="0" points="94.08955764770508,275.3258819580078 99.92155838012695,275.3258819580078 99.92155838012695,281.16587829589844 94.08955764770508,281.16587829589844 "/>';

if (strpos($line,'<polygon') !== false) {
    $a = 1;

for ($i=0; $i <= 6; $i++) {
    $cordinates = explode('points="', $line);
    $cordinates = substr($cordinates[$i], 0, strpos($cordinates[$i], '"'));

foreach(explode(' ', $cordinates) as $value) {
$parts = explode(",", $value);
    echo trim($parts[0])."<br/>".trim($parts[1])."<br/>";

  }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:57:35.770

here's a quick and dirty solution which works:

```
<?php
$line = '<polygon id="svg_806" fill-rule="nonzero" fill="black" stroke-linejoin="round" stroke-width="0" points="94.08955764770508,275.3258819580078 99.92155838012695,275.3258819580078 99.92155838012695,281.16587829589844 94.08955764770508,281.16587829589844 "/>';
$xml = simplexml_load_string($line);
$ps = explode(" ", $xml->attributes()->points);

$points = array();
$i = 1;
foreach($ps as $point){
    $exploded =  explode(",", $point);
    $points["x".$i] = $exploded[0];
    $points["y".$i] = $exploded[1];
    $i++;
}

print_r($points);
?> 
```

This leads to this output:

```
Array ( [x1] => 94.08955764770508 [y1] => 275.3258819580078 [x2] => 99.92155838012695 [y2] => 275.3258819580078 [x3] => 99.92155838012695 [y3] => 281.16587829589844 [x4] => 94.08955764770508 [y4] => 281.16587829589844 [x5] => [y5] => ) 
```

Now you can access the needed elements of the array with: $points["x1"] $points["y1"] ...

Hope this helps

To answer the question in your comment, here is the solution:

```
$input = "2957 1620 1124 3836 1524 3836 1524 3684 1924 3684 3324 3838 3724 3838 584 3574";
$i = $count = 1;
$points = array();
$exploded = explode(" ", $input);
foreach ($exploded as $current){
    if($count % 2 == 1){
        //X
        $points["x".$i] = $current;
    }else{
        //y
        $points["y".$i] = $current;
        $i++;
    }
    $count++;
}
print_r($points); 
```

leads to:

```
Array ( [x1] => 2957 [y1] => 1620 [x2] => 1124 [y2] => 3836 [x3] => 1524 [y3] => 3836 [x4] => 1524 [y4] => 3684 [x5] => 1924 [y5] => 3684 [x6] => 3324 [y6] => 3838 [x7] => 3724 [y7] => 3838 [x8] => 584 [y8] => 3574 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:01:48.227

**代码：**

```
// Your SVG
$line = '<polygon id="svg_806" fill-rule="nonzero" fill="black" stroke-linejoin="round" stroke-width="0" points="94.08955764770508,275.3258819580078 99.92155838012695,275.3258819580078 99.92155838012695,281.16587829589844 94.08955764770508,281.16587829589844 "/>';

// Parse SVG as XML and extract 'points' attribute
$xml = new SimpleXMLElement($line);
$points = (string) $xml->attributes()->points;

// Parse points attribute
preg_match_all('/([^, ]+),([^, ]+)/', $points, $matches, PREG_SET_ORDER);

// Convert matches from regular expression to nice array
$point_coords = array_map(function($m) {
        return array('x' => (float) $m[1], 'y' => (float) $m[2]);
    }, $matches);

// Now you have array of points array('x' => float, 'y' => float)
echo var_export($point_coords); 
```

**输出：**

```
array (
  0 =>
  array (
    'x' => 94.089557647705,
    'y' => 275.32588195801,
  ),
  1 =>
  array (
    'x' => 99.921558380127,
    'y' => 275.32588195801,
  ),
  2 =>
  array (
    'x' => 99.921558380127,
    'y' => 281.1658782959,
  ),
  3 =>
  array (
    'x' => 94.089557647705,
    'y' => 281.1658782959,
  ),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:02:39.560

我认为这段代码可以帮助你：

```
<?php

// Your XML string
$xmlStr = '<polygon id="svg_806" fill-rule="nonzero" fill="black" stroke-linejoin="round" stroke-width="0" points="94.08955764770508,275.3258819580078 99.92155838012695,275.3258819580078 99.92155838012695,281.16587829589844 94.08955764770508,281.16587829589844 "/>';

// Read the XML into and PHP object, making it ease to access structerd data
$xml = new SimpleXMLElement($xmlStr);

// Extracts the string inside "points" parameter in polygon (main) tag
$pointsStr = (string)$xml->attributes()->points;

// Breaks the string in pieces of space separated points, like "94.08955764770508,275.3258819580078"
$pointsArr = explode(' ', trim($pointsStr));

// The result array, each element is a point (an array with 2 positions)
$points = array();

foreach ($pointsArr as $pointStr) {
    // Reads the float data for each position using C-like sscanf
    list($x, $y) = sscanf($pointStr, '%f,%f');

    // Echo and save
    echo "Read point ($x, $y)<br>\n";
    $points[] = array($x, $y);
}

?> 
```

它呼应：

> 读取点 (94.089557647705, 275.32588195801)
> 读取点 (99.921558380127, 275.32588195801)
> 读取点 (99.921558380127, 281.1658782959)
> 读取点 (94.08295576487825)56,

`$points`将会：

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    float(94.089557647705)
    [1]=>
    float(275.32588195801)
  }
  [1]=>
  array(2) {
    [0]=>
    float(99.921558380127)
    [1]=>
    float(275.32588195801)
  }
  [2]=>
  array(2) {
    [0]=>
    float(99.921558380127)
    [1]=>
    float(281.1658782959)
  }
  [3]=>
  array(2) {
    [0]=>
    float(94.089557647705)
    [1]=>
    float(281.1658782959)
  }
} 
```

# ado.net - 是否有用于 Sybase IQ 的 ADO.NET 提供程序？

> ID：14696136
> 
> 赞同：1
> 
> 时间：2013-02-04T21:39:30.777
> 
> 标签：ado.net, sap-iq

我正在尝试在 Visual Studio 中构建一个应用程序，我想知道是否有 Sybase IQ 的 ADO.NET 提供程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:16:34.483

> Sybase IQ .NET 支持由 SQL Anywhere.NET 数据提供程序提供。

请参阅[SyBooks Online](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01087.1520/html/iqnew1520/CEGHAFJI.htm)。

# android - Android：将背景图像剪辑到屏幕边界

> ID：14696137
> 
> 赞同：0
> 
> 时间：2013-02-04T21:39:36.330
> 
> 标签：android, image, layout, clip

环顾四周，我看到许多非常相似但与我的问题不完全相同的问题。我看到的问题要么是想*避免*剪辑，要么是剪辑到一些复杂的路径。我只想要一个简单的剪辑。开始。

我想创建一个 Android 应用程序，它使用无法拉伸或 9 修补的大照片作为其各种 Activies 的背景（这是一个坚定的客户要求）。相反，我只想提供一个足够大的图像以适应各种屏幕尺寸/密度，多余的只是被剪裁或不显示 - 就好像它刚刚溢出屏幕一样。

这些图像没有图案或其他规则或彼此相似。它们确实是照片，展示了主题和想法，所以我当然必须决定展示哪些部分，但我现在不关心这个——只是如何解决这个问题。

我可以使用布局 XML 参数吗？还是我必须制作自定义布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:51:09.063

可能有更好的方法，但立即想到的就是将图像设置在图像视图中，将缩放类型设置为不缩放，然后将所有 UI 元素放在其上，并具有透明背景。像这样：

```
<RelativeLayout>
    <ImageView android:width=fill_parent
               android height=fill_parent
               android:scaleType=center />
    //your UI here
</RelativeLayout> 
```

# css - 如何显示 Bourbon Neat 网格的列？

> ID：14696139
> 
> 赞同：5
> 
> 时间：2013-02-04T21:39:47.390
> 
> 标签：css, sass, grid-layout, bourbon, neat

在我的 CSS 文件中应用 Bourbon Neat 的命令并且不显示 html 文件中的列，如果显示应用的结果但不显示列。

```
.container{
    @include outer-container;
    @include span-columns(2 of 8, table);
    border: 1px solid red;
    margin: 0 auto;
    position: relative;
    width: 960px;
} 
```

当显示为 sass 生成的 css 时，不显示 Bourbon Neat 列的背景属性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-10T01:31:27.577

重要的是在行之前设置`$visual-grid: true;`和定义断点`@import "neat";`

来自[https://github.com/thoughtbot/neat#using-neat](https://github.com/thoughtbot/neat#using-neat)：

> 只要 在导入 Neat*之前定义了媒体上下文，可视网格就会反映通过 new-breakpoint() mixin 应用于网格的更改。*

您是否选择使用`_grid-settings.scss`文件（如文档推荐的那样）取决于您。但是为了完全看到视觉网格，您肯定需要`$visual-grid: true;`在导入之前进行设置。为了让视觉网格做出响应，您还需要在导入整洁之前定义断点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-09T22:01:39.557

不幸的是，只需添加“$visual-grid: true;” 在容器中不起作用。或者至少它对我不起作用。但是，在文件中添加具有以下设置的“_getting-settings.scss”文件对我有用：

```
$visual-grid: true;
$visual-grid-color: yellow;
$visual-grid-index: front;
$visual-grid-opacity: 0.5; 
```

文档不是很清楚 $visual-gridL 应该去哪里，所以很难判断这是否符合开发人员的意图。我认为他们需要在这种情况下提供更好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T20:35:05.730

在容器中，您需要添加

```
 $visual-grid: true; 
```

这应该显示用于调试的网格列背景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-01T18:29:56.763

1.  制作如下文件（根据您自己的要求调整设置）。 *此文件会覆盖 `_visual-grid.scss`整洁的设置目录中的整洁默认设置。*

2.  将导入添加到您刚刚创建的行**之前**（之后将不起作用）您将主整洁文件导入到您的主项目 SCSS 文件中。

**_neatsettings.scss**

```
// Neat Settings

$visual-grid: true;
$visual-grid-color: #faa;
$visual-grid-index: front; 
```

# xml - XML 到 HTML 的转换（使用 XSLT）；无法访问属性中的自定义标签

> ID：14696140
> 
> 赞同：0
> 
> 时间：2013-02-04T21:39:48.773
> 
> 标签：xml, xslt, xslt-1.0

我有一个正在为其创建 XSLT 转换的 XML 文件。（XML => HTML）

我的 XML 数据定义为：

```
<Cells>
    <Cell Row="0" Col="0" Text="Text here"/>
    <Cell Row="1" Col="0" Text="Link &lt;URL URL=&quot;http://www.com&quot;&gt;here&lt;/URL&gt; />
</Cells> 
```

使用 XSLT1.0，我如何访问@URL（以获取地址）和锚标记文本的“此处”？

我将它用于我的 XSLT 条件：

```
 <xsl:choose>
          <xsl:when test="contains(@Text, '&lt;URL=')">
              <xsl:value-of select="@Text/@URL"/> // DOES NOT WORK
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="@Text"/>
          </xsl:otherwise>
        </xsl:choose> 
```

我能够正确检测 'Text' 属性中的 URL 标记，但是我似乎无法通过常规方式访问此自定义标记内的任何内容。我的目标是能够访问 URL 参数以完成 HTML 输出中的锚标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:47:52.467

将您的“链接”更改为锚标记而不是自定义格式，然后将此属性添加到您的 value-of 标记中，如下所示：

```
<xsl:value-of select="@Text" disable-output-escaping="yes" /> 
```

# javascript - 使用引导模式输入焦点问题

> ID：14696149
> 
> 赞同：0
> 
> 时间：2013-02-04T21:40:34.880
> 
> 标签：javascript, html, twitter-bootstrap, focus

我正在为 web 应用程序使用一个非常简单的模式窗口。出于某种原因，每当我单击模式中的任何输入时，焦点都会设置为它之前的输入。但是，如果我单击标签，焦点将设置为正确的输入。在这个问题上抓挠我的头......

这是标记：

```
<!--Admin Approve Modal -->
<div id="admin_approve_modal" class="modal hide fade" role="dialog" aria-labelledby="adminApproveModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="adminApproveModalLabel">Approval For Order #<span class="js-orderID"></span></h3>
        </div>
        <form id="admin_approve_form" name="admin_approve_form" method="post" action="admin-form-submit.php?query=adminApprove">
            <div class="modal-body">
                <label for="poNumber" />Factory PO #:
                <input type="text" id="poNumber" name="poNumber" />
                <script>
                    $(function() {
                        $( "#etaDate" ).datepicker();
                    });
                </script>
                <label for="etaDate" />ETA Date:
                <input type="text" id="etaDate" name="etaDate" value="" />
                <label for="comments" />Comments:
                <input type="text" id="comments" name="comments" value="" />
                <div id="admin_validation_error" name="admin_validation_error"></div>
                <!--Hidden inputs-->
                <input type="hidden" id="adminOrderID" name="orderID" value="" />
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button type="submit" class="btn btn-primary">Approve</button>
            </div>
        </form>
    </div>
    <!-- end modal --> 
```

页面上没有冲突的javascript（据我所知）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:11:08.180

我无法重现您的错误，您可以设置一个 jsfiddle 吗？它使用干净的引导文件对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:01:47.487

嗯，我很笨。出于某种原因，我认为标签是自动关闭的……它们不是！

# perl - 隐藏 perl 期望输出

> ID：14696150
> 
> 赞同：1
> 
> 时间：2013-02-04T21:40:37.557
> 
> 标签：perl, stdout, expect

我有一个 perl 脚本，它通过`ssh`生成 ssh来自动记录我`Expect.pm`。

它实际上工作得很好，这是我的输出：

```
 $ ngh bestServerEver
    GPG Pass : 
    root@**********'s password: 
    Linux **** 2.6.32-042stab059.7 #1 SMP Tue Jul 24 19:12:01 MSK 2012 x86_64 GNU/Linux
    motd!!!!!!!!!!
    Last login: Mon Feb  4 22:18:10 2013 from *******************
    bash
    [root@******:~]$ bash
    [root@******:~]$ 
```

我试图在输入命令后抑制此输出以直接进入服务器外壳。像那样：

```
$ngh BestServerEver
root@server# 
```

我试过这个答案： [如何在 Perl 程序中暂时抑制 STDOUT？](https://stackoverflow.com/questions/1376607/how-can-i-suppress-stdout-temporarily-in-a-perl-program)

我也试过：

```
 local (*OUT, *ERR);
    open OUT, ">&STDOUT";
    open ERR, ">&STDERR";
    close STDOUT;
    close STDERR;
    print "don't print";
    open STDOUT, ">&OUT";
    open STDERR, ">&ERR"; 
```

当涉及标准 STDOUT 时，两者都可以，但 Expect 似乎是一种不同的句柄或其他类型。

我也试过设置：

```
$exp->stty("-echo"); 
```

但它并没有隐藏任何东西

最后，这是我的代码[http://pastebin.com/pSL3AwBW](http://pastebin.com/pSL3AwBW)如果您有一些提示可以告诉我如何隐藏该垃圾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:54:59.453

The [docs](http://search.cpan.org/perldoc?Expect.pm) tell you to use

```
$exp->log_stdout(0); 
```

Tested:

```
$ perl -MExpect -E'
   my $e = Expect->spawn("cat");
   $e->log_stdout($ARGV[0]);
   $e->send("abc\n"); $e->expect(undef, "abc");
   $e->send("def\n"); $e->expect(undef, "def");
   say "done."
' 1
abc
def
done.

$ perl -MExpect -E'
   my $e = Expect->spawn("cat");
   $e->log_stdout($ARGV[0]);
   $e->send("abc\n"); $e->expect(undef, "abc");
   $e->send("def\n"); $e->expect(undef, "def");
   say "done."
' 0
done. 
```

# c++ - 为多平台目的克隆 C++ 数据类型

> ID：14696151
> 
> 赞同：0
> 
> 时间：2013-02-04T21:40:41.063
> 
> 标签：c++, multithreading, cross-platform

我有一个想法如何制作非常简单的跨平台（linux/windows）线程功能。这是我的示例代码：

```
#if LINUX
 #include <pthread.h>
 ThreadHandle createThread(???* callback, void* data) {   //I dont know what is data type of function pointer, sorry
     pthread_t handle;
     pthread_create(&handle, 0, callback, (void*)data);
     return (ThreadHandle)handle;
 }
 define_data_type ThreadHandle = pthread_t;  //I don't know how this is done at all, sorry
#endif
#if WINDOWS
  #include <windows.h>
  ThreadHandle createThread(???* callback, void* data) {
        HANDLE handle = CreateThread( 
        NULL,                   // default security attributes
        0,                      // use default stack size  
        callback,               // thread function name
        data,                   // argument to thread function 
        0,                      // use default creation flags 
        NULL);   // returns the thread identifier - I don't need this, do I?
  }
  define_data_type ThreadHandle = HANDLE;  //I don't know how this is done at all, sorry
#endif 
```

恐怕这首先看起来像一个奇怪的问题，但请记住，我是**初学者**，我需要了解 C++。随意**编辑**那些我留下*“我不知道”*评论的部分。
如果您认为这是一个错误的问题，请留下关于我应该如何提问的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:29:04.397

1.  首先拥有一个独立于平台的头文件，如 Thread.h，它将抽象所有线程函数
2.  在 *.$platform.cpp 文件中有平台特定的代码
3.  显然你的构建系统应该只编译平台相关的代码

现在，对于特定的代码

使用类似这样的东西来定义泛型类型

typedef unsigned long os_error_t;

```
typedef void * os_console_handle;
typedef void * os_thread_handle;
typedef void * os_event_handle;
typedef unsigned long os_pid_t;
typedef unsigned long os_thread_id; 
```

在 linux 上，使用并调用 pthread_create(..) 在 windows 上，使用并调用 CreateThread(..) 阅读文档以获取特定的 impl

对于回调，您可以使用类似

```
typedef os_error_t (*thread_start_function_t)(void *);

class InternalThreadArgs {
    thread_start_function_t m_func;
    void *m_pArg;
public:
    InternalThreadArgs(thread_start_function_t pf, void *pArg) {
        m_func = pf;
        m_pArg = pArg;
    }
    os_error_t Run() {
        return m_func(m_pArg);
    }
}; 
```

现在，让你的抽象方法签名像

```
 os_error_t create_thread(thread_start_function_t pf, void *pArg, os_thread_handle *pHandle); 
```

# opengl - 在着色器中使用 glTexture

> ID：14696156
> 
> 赞同：0
> 
> 时间：2013-02-04T21:40:58.570
> 
> 标签：opengl, graphics, textures, shader, framebuffer

我正在使用openGL，我想做的是将我的场景渲染为纹理，然后存储该纹理，以便我可以将它传递到我的片段着色器中以用于渲染其他内容。

我使用 glGenTexture() 创建了一个纹理并将其附加到帧缓冲区，然后使用 glBindFrameBuffer() 渲染帧缓冲区。然后我将帧缓冲区设置回 0 以渲染回屏幕，但现在我被卡住了。

在我的片段着色器中，我有一个统一的采样器 2D 'myTexture'，我想用它来存储纹理。我该怎么做呢？

对于我在网上找到的 .jpg/png 图像，我只使用了以下代码：

```
glUseProgram(Shader->GetProgramID());
GLint ID = glGetUniformLocation(
              Shader->GetProgramID(), "Map");
glUniform1i(ID, 0);
glActiveTexture(GL_TEXTURE0);
MapImage->Bind();
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT ); 
```

但是，此代码不适用于我创建的 glTexture。具体来说，我不能以同样的方式调用 myTexture->Bind() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:58:38.747

如果您`uniform sampler 2D 'myTexture'`的着色器中确实有“a”，为什么要获得*“Map”*的统一位置？您应该获得“myTexture”的统一位置；毕竟，这是采样器的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:58:31.223

> 所以我使用 glGenTexture() 创建了一个纹理并将其附加到帧缓冲区

所以换句话说，你这样做了：

```
glActiveTexture(GL_TEXTURE0);
GLuint myTexture;
glGenTextures(1, &myTexture);
glBindTexture(GL_TEXTURE_2D, myTexture);

// very important and often missed by newbies:
// A framebuffer attachment must be initialized but not bound
// when using the framebuffer, so it must be unbound after
// initializing
glTexImage2D(…, NULL);
glBindTexture(GL_TEXTURE_2D, 0);

glBindFramebuffer(…);
glFramebufferTexture2D(…, myTexture, …); 
```

好的，所以 myTexture 是纹理的名称句柄。我们该做什么？解绑FBO，这样我们就可以使用附加的纹理作为图像源了，所以：

```
glBindFrameuffer(…, 0);

glActiveTexture(GL_TEXTURE0 + n);
glBindTexture(GL_TEXTURE_2D, myTexture);

glUseProgram(…);
glUniformi(texture_sampler_location, n); 
```

# python - 使用 Python 解压缩文件并返回它创建的所有目录

> ID：14696158
> 
> 赞同：4
> 
> 时间：2013-02-04T21:41:02.880
> 
> 标签：python, zipfile, compression

如何`.zip`使用 Python 将文件解压缩到某个目录`output_dir`中并获取解压缩后生成的所有目录的列表？例如，如果我有：

`unzip('myzip.zip', 'outdir')`

`outdir`是一个目录，其中可能包含其他文件/目录。当我解压缩`myzip.zip`到它时，我想`unzip`返回`outdir/`由于压缩而生成的所有目录。到目前为止，这是我的代码：

```
import zipfile
def unzip(zip_file, outdir):
    """
    Unzip a given 'zip_file' into the output directory 'outdir'.
    """
    zf = zipfile.ZipFile(zip_file, "r")
    zf.extractall(outdir) 
```

我怎样才能`unzip`返回它创建的目录`outdir`？谢谢。

编辑：对我来说最有意义的解决方案是只获取 zip 文件中的顶级目录，然后递归地遍历它们，这将保证我获得 zip 生成的所有文件。这可能吗？namelist 的系统特定行为使其几乎不可能依赖

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T21:48:03.647

`namelist()`您可以使用该方法读取 zip 文件的内容。目录将有一个尾随路径分隔符：

```
>>> import zipfile
>>> zip = zipfile.ZipFile('test.zip')
>>> zip.namelist()
['dir2/', 'file1'] 
```

您可以在提取内容之前*或之后执行此操作。*

~~根据您的操作环境，结果`namelist()`可能仅限于 zip 存档的顶级路径（例如 Linux 上的 Python）或可能覆盖存档的全部内容（例如 Windows 上的 IronPython）。~~

返回 zip 存档内容的`namelist()`完整列表，目录用尾随路径分隔符标记。例如，以下文件结构的 zip 存档：

```
./file1
./dir2
./dir2/dir21
./dir3
./dir3/file3
./dir3/dir31
./dir3/dir31/file31 
```

导致以下列表由返回`zipfile.ZipFile.namelist()`：

```
[ 'file1', 
  'dir2/', 
  'dir2/dir21/', 
  'dir3/', 
  'dir3/file3', 
  'dir3/dir31/', 
  'dir3/dir31/file31' ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:25:00.627

[`ZipFile.namelist`](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.namelist)将返回存档中项目名称的列表。但是，这些名称将只是文件的全名，包括它们的目录路径。（一个 zip 文件只能包含文件，不能包含目录，因此目录是由归档成员名称隐含的。）要确定创建的目录，您需要每个文件隐式创建的每个目录的列表。

下面的`dirs_in_zip()`函数将执行此操作并将所有目录名称收集到一个集合中。

```
import zipfile
import os

def parent_dirs(pathname, subdirs=None):
    """Return a set of all individual directories contained in a pathname

    For example, if 'a/b/c.ext' is the path to the file 'c.ext':
    a/b/c.ext -> set(['a','a/b'])
    """
    if subdirs is None:
        subdirs = set()
    parent = os.path.dirname(pathname)
    if parent:
        subdirs.add(parent)
        parent_dirs(parent, subdirs)
    return subdirs

def dirs_in_zip(zf):
    """Return a list of directories that would be created by the ZipFile zf"""
    alldirs = set()
    for fn in zf.namelist():
        alldirs.update(parent_dirs(fn))
    return alldirs

zf = zipfile.ZipFile(zipfilename, 'r')

print(dirs_in_zip(zf)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:50:37.207

假设没有其他人将同时写入目标目录，在解压缩之前递归遍历目录，然后在之后，并比较结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:45:59.237

让它完成，然后读取目录的内容 - 这是一个[很好](https://stackoverflow.com/questions/120656/directory-listing-in-python)的例子。

# gps - 在寻找合适的 GPS 时遇到问题

> ID：14696160
> 
> 赞同：2
> 
> 时间：2013-02-04T21:41:10.317
> 
> 标签：gps, microcontroller

我正在为一个小班项目寻找 GPS。我们想要尽可能小的 GPS，而我们真正需要它做的就是在轮询时给我们经度和纬度值。

我试着看一下 sparkfun，但由于我们以前没有真正使用过这种类型的硬件，很难知道我们真正想要哪种类型/我们需要什么部件。

我们需要的：

*   最小的可能
*   最长的电池寿命
*   只需要 long 和 lat
*   能够从其他设备（例如移动应用程序或网站）进行轮询

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:12:05.493

有两种方法，一种是买一个蓝牙接收器，你可以通过手机或其他任何方式进行轮询。可能和手机一样大，里面有电池等等。不确定一次充电能持续多久。

还有其他解决方案旨在放入正在运输的包裹，延长电池寿命，但它们的目标是作为数据记录器，不一定是你可以连接和轮询的东西，如果你想要的话，可能不是无线的。

现在，如果您想建立自己的，并且您已经去过 sparkfun，这里是另一条路。
我知道在 SO 的答案中留下链接是不好的......这比评论更长，并且会添加更多信息......

你想要小，你可以用这个 [https://www.sparkfun.com/products/11571](https://www.sparkfun.com/products/11571) 它是一个 GP-635T gps 接收器，如果你看图片，它真的只有四分之一大小。50 频道。按照他们告诉你的方式指向它，天线是内置的，只需为其供电即可。

你需要连接它。它是串行版本而不是 USB，无论哪种情况，您都需要这样的电缆。 [https://www.sparkfun.com/products/10361](https://www.sparkfun.com/products/10361) 此链接指向带有 6 或 8 英寸尾纤的电缆，gps 接收器位于板上，板上有一个不常见的连接器，此电缆可让您获得这些连接，你只需要三个。

sparkfun 页面上的数据表或者可能只是搜索部件号，您需要查看 UART TTL 引脚而不是 USB 引脚。你需要 3.3 到 5.5 伏来为其引脚 2 供电，引脚 1 接地。然后引脚 3 是 txa 串行输出。这是您获取数据的地方。

这些是各种可行的解决方案 [https://www.sparkfun.com/products/9873](https://www.sparkfun.com/products/9873) [https://www.sparkfun.com/products/718](https://www.sparkfun.com/products/718) [http://jim.sh/ftx/](http://jim.sh/ftx/) 可能需要一些焊接。以上链接是 ftdi usb 到串行/uart 分线板的 10 美元到 15 美元之间的各种解决方案。这些将包括 3.3v 和接地，而 rx 引脚是 ftdi uart 的接收器，您将其连接到 gps 单元上的 txa。

您可能不知道并且可能感兴趣的是，几乎普遍的 gps 单元都会执行它们的数学魔法，并提出各种项目时间、位置（2d 或 3d）、速度等。它们以串行方式输出这些数据。搜索 NMEA 或 NMEA-0183。此数据表和任何其他数据表应指明默认数据速率（4800、9600、19200 等波特）以及发送的消息。有时你可以改变波特率，有时你不能。ftdi 芯片/板非常灵活，使用 USB 电缆将板插入计算机，配置您的软件或哑终端程序，如 minicom 或 hyperterm 或 teraterm 或其他任何东西（无奇偶校验，无硬件流控制），消息将通常每秒出现一次。无论是你的车载导航、手持gps等等，埋在里面的是一些gps接收器的味道（sparkfun会告诉你有多少不同的味道，它们的选择只是表面上的），它输出串行，并且该单元中的软件正在接收该串行数据，然后执行它事物（映射、导航等）。与您在手机中找到的调制解调器一样，您在手机中找到的某些软件/数学可能由手机中的主处理器完成以节省资金，这些库通常不可用，当您进行购买交易时数以千计或数百万个单位，它们允许您支付软件费用以及您在一堆法律文件上的签名。我假设是这种情况，

一旦通电，即使它说 X 秒的热或冷锁定它并不总是需要那个，有时如果它必须搜索它可能仍然需要一段时间，你周围的金属越少（比如在建筑物或中心汽车）越糟糕，它可能无法锁定。

如果你有一个年长的 garmin 街头飞行员（否则我不想杀死其中的一个，如果它正在工作）你可以把它撕开，很可能在那里找到一个 sirf III 或其他模块，可能是 5V 而不是 3.3（那里是基于 5V ftdi 的突破 USB 转串口。microftx 既是 5v 又是 3.3，请注意上面链接的 gps 接收器也是 5v 或 3.3）需要谷歌搜索才能确定引脚分配等，焊接可能是也可能不是挑战.

您还可以在 ebay 或其他任何地方找到旧的 etrex 或其他手持设备（可行！），然后花 15 美元左右购买一条串行电缆，那么您可能需要一个串口转 USB，它还需要一个像 max232 这样的电平转换器，您不需要把它插入一个 ftdi 分线板，它会炸掉它。较新的有 USB，您可以通过 USB 为设备供电，并且可能还会通过 USB 看到 nmea 数据。

您在 gps 领域的 sparkfun 上看到的大多数内容都与这些通过串行输出 nmea 数据的各种品牌和型号的 gps 接收器有关。有些是 5V，有些是 3.3，很多没有天线，您必须单独购买（并获得正确的类型，插入提供的连接器等）。我有很多这样的东西，它们都工作得很好，有些在建筑物周围或树上做得比其他的好，等等。在 sparkfun 周围，你还会找到 lipo 电池解决方案和蓝牙或 xbee 或其他无线解决方案，如果你需要，很快无线，我认为您会发现最好只购买现成的解决方案。我注意到了 garmin 蓝牙的东西 google Garmin GLO 便携式 GPS 和 GLONASS 接收器，它大约是 99 美元。我还没有扣动扳机，所以我不知道它的好坏，

当然，智能手机同时具有无线和 GPS 功能，您可以在 ebay 上以便宜的价格买到很多二手手机。IOS和安卓。您可以“只编写一个 android 应用程序”并将其放在手机上并使用手机内置的无线接口之一。它会咀嚼电池是的，多快？谁知道。

# ruby-on-rails - haml 和 ruby on rails 出生日期字段语法

> ID：14696171
> 
> 赞同：0
> 
> 时间：2013-02-04T21:41:30.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, haml

所以我一直在学习 ror 并尝试一些表单示例。网络上的大多数示例都是 erb 格式，我的文件是 .haml 格式。我正在尝试编写一个需要一天、时间、一年的静态 dob 字段。

```
view
%label{:for => "patient_dob"} DOB
  %date_select {Date.today,start_year => getBirthDateStart(), :end_year => getBirthDateEnd() }

module ApplicationHelper
def getBirthDateStart()
  Time.now.year - 100
end

def getBirthDateEnd()
  Time.now.year
end
end 
```

我知道我的代码没有多大意义，但希望它能解释我想要做什么。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:51:38.997

“%date_select”不是 HTML 元素。您将使用“%”来创建诸如 %title、%p 之类的东西

您需要使用“%”直接创建 HTML。在这种情况下，您将使用 "%select"% 创建选择框。在 Ruby on Rails 中，您可以调用表单助手来创建这样的集合。

```
=label_tag "patient_dob", "DOB"
=date_select "patient", "dob", { start_year: 100.years.ago.year, end_year: Date.today.year, default: Date.today} 
```

文档：[http ://apidock.com/rails/ActionView/Helpers/DateHelper/date_select](http://apidock.com/rails/ActionView/Helpers/DateHelper/date_select)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:02:08.460

在 Haml 中，您可以使用`%`开始标记，并`=`使用辅助方法，例如`date_select`. 您可以像这样重写您的示例：

```
=label_tag :patient_dob, "DOB"
=date_select :patient, :dob, :start_year => 5.years.ago, :end_year => 5.years.from_now 
```

其他几件事：

*   在 Ruby 中，使用 camelCase 方法名（如`getBirthStartYear`）是非常规的。坚持使用`snake_case`，您的代码将与 Rails 的其余部分和 Ruby 社区保持一致。
*   `()`从方法调用中删除括号也是一个好主意。这有助于模糊什么是属性和什么是方法背后的界限，我认为这会鼓励更好的内部 API 设计。出于这个原因，我也鼓励你放弃`get`更有意义的东西，比如`new_patient_dob_start_year`.
*   不过，老实说，为了简单明了，如果没有理由，我会避免使用其他方法。`5.years.ago`or`5.years.from_now`非常容易阅读，并且不需要其他程序员查找定义方法的位置。

# java - 设置后的JPA Arraylist Null

> ID：14696179
> 
> 赞同：1
> 
> 时间：2013-02-04T21:41:51.250
> 
> 标签：java, jpa, websphere, rad, openjpa

我有一个获得技能表和一个资源表。资源表中没有获取技能的列。只有 get/set 方法。获得技能表具有资源序列号的外键。

当我调用 setObtainedSkill() 然后使用新的已获取技能列表更新资源时，它不会更新。资源的已获取技能仍然为空。

我的问题是，如何将已获得技能添加到我的资源中？我是否必须在“资源”表中为“获得技能”添加另一列？

这是我的测试课：

```
 public static void main(String[] args) throws Exception {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("XRM_JPA");

    ResourcezManager rm = new ResourcezManager(emf);

    Resourcez resource = rm.getNewResourcez();
    resource = rm.findResourcezBySerialNumber("2G9933");

    for (int i = 0; i < resource.getObtainedSkills().size(); i++) {
        if (resource.getObtainedSkills().get(i) != null) {
            System.out.println(resource.getObtainedSkills().get(i).toString()); 
        }
    }

    emf.close();
} 
```

当它尝试执行 System.out 时，我得到一个 NullPointerException。

以下是相关实体

技能实体

```
package xrm.model;

import java.io.Serializable;
import javax.persistence.*;
import java.util.List;

/**
 * The persistent class for the SKILL database table.
 * 
 */
@Entity
@NamedQueries({@NamedQuery(name = "getSkillBySkillName", query = "SELECT s FROM Skill s      WHERE s.skillName = :skillName"),@NamedQuery(name = "getSkillBySkillDescription", query =   "SELECT s FROM Skill s WHERE s.skillDescription = :skillDescription"),
@NamedQuery(name = "getSkillBySkillId", query = "SELECT s FROM Skill s WHERE s.skillId = :skillId"),
@NamedQuery(name = "getSkill", query = "SELECT s FROM Skill s")})
public class Skill implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="SKILL_ID")
private int skillId;

@Column(name="SKILL_DESCRIPTION")
private String skillDescription;

@Column(name="SKILL_NAME")
private String skillName;

//bi-directional many-to-one association to ObtainedSkill
@OneToMany(mappedBy="skill")
private List<ObtainedSkill> obtainedSkills;

public Skill() {
}

public int getSkillId() {
    return this.skillId;
}

public void setSkillId(int skillId) {
    this.skillId = skillId;
}

public String getSkillDescription() {
    return this.skillDescription;
}

public void setSkillDescription(String skillDescription) {
    this.skillDescription = skillDescription;
}

public String getSkillName() {
    return this.skillName;
}

public void setSkillName(String skillName) {
    this.skillName = skillName;
}

public List<ObtainedSkill> getObtainedSkills() {
    return this.obtainedSkills;
}

public void setObtainedSkills(List<ObtainedSkill> obtainedSkills) {
    this.obtainedSkills = obtainedSkills;
}

} 
```

获得技能实体

```
package xrm.model;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the OBTAINED_SKILL database table.
 * 
 */
@Entity
@Table(name="OBTAINED_SKILL")
@NamedQueries({@NamedQuery(name = "getObtainedSkillBySkill", query = "SELECT o FROM ObtainedSkill o WHERE o.skill.skillId = :skill_skillId"),
@NamedQuery(name = "getObtainedSkillByResourcez", query = "SELECT o FROM ObtainedSkill o WHERE o.resourcez.serialNumber = :resourcez_serialNumber"),
@NamedQuery(name = "getObtainedSkillBySkillLevel", query = "SELECT o FROM ObtainedSkill o WHERE o.skillLevel = :skillLevel"),
@NamedQuery(name = "getObtainedSkillByObtainedSkillId", query = "SELECT o FROM ObtainedSkill o WHERE o.obtainedSkillId = :obtainedSkillId"),
@NamedQuery(name = "getObtainedSkill", query = "SELECT o FROM ObtainedSkill o")})
public class ObtainedSkill implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="OBTAINED_SKILL_ID")
private int obtainedSkillId;

@Column(name="SKILL_LEVEL")
private int skillLevel;

//bi-directional many-to-one association to Resourcez
@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="SERIAL_NUMBER")
private Resourcez resourcez;

//bi-directional many-to-one association to Skill
@ManyToOne (cascade=CascadeType.DETACH)
@JoinColumn(name="SKILL_ID")
private Skill skill;

public ObtainedSkill() {
}

public int getObtainedSkillId() {
    return this.obtainedSkillId;
}

public void setObtainedSkillId(int obtainedSkillId) {
    this.obtainedSkillId = obtainedSkillId;
}

public int getSkillLevel() {
    return this.skillLevel;
}

public void setSkillLevel(int skillLevel) {
    this.skillLevel = skillLevel;
}

public Resourcez getResourcez() {
    return this.resourcez;
}

public void setResourcez(Resourcez resourcez) {
    this.resourcez = resourcez;
}

public Skill getSkill() {
    return this.skill;
}

public void setSkill(Skill skill) {
    this.skill = skill;
}

} 
```

资源实体

```
package xrm.model;

import java.io.Serializable;
import javax.persistence.*;

import java.util.Date;
import java.util.List;

/**
 * The persistent class for the RESOURCEZ database table.
 * 
 */
@Entity
@NamedQueries({@NamedQuery(name = "getResourcezByUserInformation", query = "SELECT r FROM Resourcez r WHERE r.userInformation.ibmEmailAddress = :userInformation_ibmEmailAddress"),@NamedQuery(name = "getResourcezBySource", query = "SELECT r FROM Resourcez r WHERE r.source.sourceId = :source_sourceId"),
@NamedQuery(name = "getResourcezByRole", query = "SELECT r FROM Resourcez r WHERE r.role.roleId = :role_roleId"),
@NamedQuery(name = "getResourcezByLocation", query = "SELECT r FROM Resourcez r WHERE r.location.locationId = :location_locationId"),
@NamedQuery(name = "getResourcezByMiddleInitial", query = "SELECT r FROM Resourcez r WHERE r.middleInitial = :middleInitial"),
@NamedQuery(name = "getResourcezByLastName", query = "SELECT r FROM Resourcez r WHERE r.lastName = :lastName"),
@NamedQuery(name = "getResourcezByHireDate", query = "SELECT r FROM Resourcez r WHERE r.hireDate = :hireDate"),
@NamedQuery(name = "getResourcezByFirstName", query = "SELECT r FROM Resourcez r WHERE r.firstName = :firstName"),
@NamedQuery(name = "getResourcezByBirthday", query = "SELECT r FROM Resourcez r WHERE r.birthday = :birthday"),
@NamedQuery(name = "getResourcezBySerialNumber", query = "SELECT r FROM Resourcez r WHERE r.serialNumber = :serialNumber"),
@NamedQuery(name = "getResourcez", query = "SELECT r FROM Resourcez r")})
public class Resourcez implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(name="SERIAL_NUMBER")
private String serialNumber;

@Temporal( TemporalType.DATE)
private Date birthday;

@Column(name="FIRST_NAME")
private String firstName;

@Temporal( TemporalType.DATE)
@Column(name="HIRE_DATE")
private Date hireDate;

@Column(name="LAST_NAME")
private String lastName;

@Column(name="MIDDLE_INITIAL")
private String middleInitial;

//bi-directional many-to-one association to Assignment
@OneToMany(mappedBy="resourcez", cascade=CascadeType.DETACH)
private List<Assignment> assignments;

//bi-directional many-to-one association to ObtainedCertification
@OneToMany(mappedBy="resourcez", cascade=CascadeType.ALL)
private List<ObtainedCertification> obtainedCertifications;

//bi-directional many-to-one association to ObtainedSkill
@OneToMany(mappedBy="resourcez", cascade=CascadeType.ALL)
private List<ObtainedSkill> obtainedSkills;

//bi-directional many-to-one association to PhoneNumber
@OneToMany(mappedBy="resourcez", cascade=CascadeType.ALL)
private List<PhoneNumber> phoneNumbers;

//bi-directional many-to-one association to PrivilegeRequest
@OneToMany(mappedBy="resourcez", cascade=CascadeType.ALL)
private List<PrivilegeRequest> privilegeRequests;

//bi-directional many-to-one association to Location
@ManyToOne
@JoinColumn(name="LOCATION_ID")
private Location location;

//bi-directional many-to-one association to Role
@ManyToOne
@JoinColumn(name="ROLE_ID")
private Role role;

//bi-directional many-to-one association to Source
@ManyToOne
@JoinColumn(name="SOURCE_ID")
private Source source;

//bi-directional many-to-one association to UserInformation
@ManyToOne
@JoinColumn(name="IBM_EMAIL_ADDRESS")
private UserInformation userInformation;

public Resourcez() {
}

public String getSerialNumber() {
    return this.serialNumber;
}

public void setSerialNumber(String serialNumber) {
    this.serialNumber = serialNumber;
}

public Date getBirthday() {
    return this.birthday;
}

public void setBirthday(Date birthday) {
    this.birthday = birthday;
}

public String getFirstName() {
    return this.firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

public Date getHireDate() {
    return this.hireDate;
}

public void setHireDate(Date hireDate) {
    this.hireDate = hireDate;
}

public String getLastName() {
    return this.lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

public String getMiddleInitial() {
    return this.middleInitial;
}

public void setMiddleInitial(String middleInitial) {
    this.middleInitial = middleInitial;
}

public List<Assignment> getAssignments() {
    return this.assignments;
}

public void setAssignments(List<Assignment> assignments) {
    this.assignments = assignments;
}

public List<ObtainedCertification> getObtainedCertifications() {
    return this.obtainedCertifications;
}

public void setObtainedCertifications(List<ObtainedCertification> obtainedCertifications) {
    this.obtainedCertifications = obtainedCertifications;
}

public List<ObtainedSkill> getObtainedSkills() {
    return this.obtainedSkills;
}

public void setObtainedSkills(List<ObtainedSkill> obtainedSkills) {
    this.obtainedSkills = obtainedSkills;
}

public List<PhoneNumber> getPhoneNumbers() {
    return this.phoneNumbers;
}

public void setPhoneNumbers(List<PhoneNumber> phoneNumbers) {
    this.phoneNumbers = phoneNumbers;
}

public List<PrivilegeRequest> getPrivilegeRequests() {
    return this.privilegeRequests;
}

public void setPrivilegeRequests(List<PrivilegeRequest> privilegeRequests) {
    this.privilegeRequests = privilegeRequests;
}

public Location getLocation() {
    return this.location;
}

public void setLocation(Location location) {
    this.location = location;
}

public Role getRole() {
    return this.role;
}

public void setRole(Role role) {
    this.role = role;
}

public Source getSource() {
    return this.source;
}

public void setSource(Source source) {
    this.source = source;
}

public UserInformation getUserInformation() {
    return this.userInformation;
}

public void setUserInformation(UserInformation userInformation) {
    this.userInformation = userInformation;
}

} 
```

技能表 ![技能表](../Images/1c24ea8c90eb1dffc2d44bf22b6ef561.png)

获得的技能表 ![获得的技能表](../Images/f7a11dae77209aaf6a9304681e1a59db.png)

资源表 第一个字段是序列号，它是一个 varchar 其他折叠的字段也是 varchars Middle 和 Last name。 ![资源表](../Images/f8d166de38cd75e923f235ea495fd99b.png)

# authentication - 使应用程序能够使用 Google AppScript Web 服务作为 Gmail 帐户的代理

> ID：14696180
> 
> 赞同：0
> 
> 时间：2013-02-04T21:41:53.290
> 
> 标签：authentication, google-apps-script, authorization

很长一段时间以来，我一直在尝试代表 Google Apps 帐户将我的应用程序（ruby）与 Google AppScript（作为访问级别为“仅限我”的 Web 应用程序发布）集成，但我无法获得处理它。也许我在这里遗漏了一个关键概念，或者在后台发出请求时这种身份验证/授权不可用。

当我登录 gmail 并访问脚本端点时，该脚本工作正常。我还可以使用经过 openid 身份验证的 sinatra 应用程序成功连接到它。

我已经尝试过使用 google-api-ruby-client，但我无法获得正确的授权范围（服务名称）。我还在 gdata-ruby-util 中尝试了 clientlogin，以使用 Gmail 登录名/密码并在尝试从脚本 url 获取时收到授权错误消息。

可行吗？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:55:12.513

不幸的是，Apps Script 中的 Contentservice（我认为您正在使用它来创建您的网络服务）不提供任何身份验证机制。如果您从服务器端脚本访问它，您可以使用您的 Web 服务应用程序和您的服务器已知的令牌字符串来为您的可公开访问的 Web 服务提供一定程度的安全性。

这里有一些类似的讨论

*   [如何使用 Google Apps Script ContentService 作为 REST 服务器](https://stackoverflow.com/questions/11475972/how-to-use-google-apps-script-contentservice-as-a-rest-server)
*   [Google 应用脚本：ContentService 网络应用使用情况](https://stackoverflow.com/questions/13308106/google-app-script-contentservice-web-app-usage)

# php - Sql 注入：这段代码安全吗？

> ID：14696181
> 
> 赞同：2
> 
> 时间：2013-02-04T21:41:58.237
> 
> 标签：php, mysql

我有一`API`台服务器，我需要将所有获取数据放入数据库

我在连接到数据库后使用此代码：

```
foreach ($_GET as $key => $value)
$_GET[$key] = mysql_real_escape_string($value); 
```

我的代码安全吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T22:02:14.503

不，您的代码不安全！因为我们看不到您如何将数据放入查询中 - 这是最重要的事情。

你可以做很多错误的事情，比如：

```
$sql = "INSERT INTO {$_GET[table]} ({$_GET[column]}) VALUES ('{$_GET[value]}')"; 
```

只有最后一个值被安全转义，前两个不是！

此外，`mysql_real_escape_string()`评估正在进行的数据库连接的编码设置。你以前连接过数据库吗？你设置了编码吗？

最后：在你真正需要之前不要逃避东西。过早的转义会导致各种问题，因为预先转义的数据可能同时用于其他用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:45:17.080

目前是。但请注意，所有`mysql_`函数都已弃用，将从 PHP 中删除，不再受支持。这带来了它自己的安全隐患。

考虑使用

```
mysqli_real_escape_string 
```

更多信息

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

请阅读红色块并注意有关默认字符集的安全注释。适用于这两个功能。

# android - 我如何让一个 android webview 应用程序直接在浏览器中打开

> ID：14696183
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:42:08.843
> 
> 标签：android, browser, webview

我想制作一个 webview 应用程序，并在打开时直接在浏览器中启动，或者显示弹出窗口以选择浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:51:13.023

此代码将在 WebBrowser 上打开链接，或者如果您有多个可以处理此类操作的应用程序，它将显示选择对话框。

```
Uri urlUri= Uri.parse("http://www.link.com/"); 
Intent showBrowser= new Intent(Intent.ACTION_VIEW, urlUri);  
startActivity(showBrowser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:54:50.763

这将使用您指定的链接打开 chrome 浏览器。

```
public class Main extends Activity {

WebView mWebView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Intent browserIntent = new Intent(Intent.ACTION_VIEW,
    Uri.parse("http://putawebsitehere.com"));
    startActivity(browserIntent);
} 
```

# html - 如何使用 css 实现水平规则的以下样式

> ID：14696184
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:42:09.390
> 
> 标签：html, css

我知道可以为`<hr>`元素设置样式，但是我不知道如何实现以下外观：

![在此处输入图像描述](../Images/8103a4bd1f4f2d424c0abcaa907efe27.png)

可能很难看，基本上它应该看起来像（水平方向）5px深棕色，浅棕色，5px深棕色，并且在hr周围的图像中有背景使其更加突出，它不是的一部分设计。这是否可以通过 css 实现（如果可以的话）还是我需要使用图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:50:21.800

使用边框顶部和边框底部。

```
<hr style="border-top: 1px solid #DEDDD9;border-bottom: 1px solid #DEDDD9;"> 
```

或者

```
<hr style="border: 1px solid #DEDDD9;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:04:05.300

我不确定我是否遵循您的问题，但您可能可以使用这样的渐变：

[jsFiddle](http://jsfiddle.net/89h77/)

像这样设置样式`hr`：

```
hr {
    height: 10px;
    background-image: linear-gradient(black, white);
    background: -webkit-gradient(linear, center top, center bottom, from(black), to(white));
} 
```

除了用你想要的颜色替换黑色和白色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:01:35.200

这是一种方法：

```
<hr style="border:0;height:1px;background: #dfded9; border-right: 5px solid #b2b1ae;border-left: 5px solid #b2b1ae"> 
```

[http://jsfiddle.net/KvGKV/](http://jsfiddle.net/KvGKV/)

# ruby - 解析哈希和数组的简单方法

> ID：14696191
> 
> 赞同：2
> 
> 时间：2013-02-04T21:42:45.720
> 
> 标签：ruby

通常，解析 XML 或 JSON 会返回哈希、数组或它们的组合。通常，解析无效数组会导致各种`TypeError`s、`NoMethodError`s、意外 nil 等。

例如，我有一个`response`对象，想查找以下元素：

```
response['cars'][0]['engine']['5L'] 
```

如果响应是

```
{ 'foo' => { 'bar' => [1, 2, 3] } } 
```

当我只想`NoMethodError`看到的是`nil`.

有没有一种简单的方法来查找元素，而无需使用大量的 nil 检查、救援或 Rails`try`方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:44:33.333

为了参考起见，我知道有几个项目可以解决更普遍的链接方法问题`nils`：

*   [和和](https://github.com/raganwald/andand)
*   [ick](http://ick.rubyforge.org/)
*   祖克的[自负](http://rubyzucker.info/#egonil)
*   [方法链](http://projects.gregweber.info/methodchain)
*   *可能其他人...*

过去也有相当多的讨论：

*   [Ruby nil-like object](https://stackoverflow.com/q/8766191/2004045) - SO 上的众多对象之一
*   [Null Objects and Falsiness](http://devblog.avdi.org/2011/05/30/null-objects-and-falsiness/) - Avdi Grimm 的精彩文章
*   [Ruby Joy 的 28 个字节！](http://rbjl.net/26-the-28-bytes-of-ruby-joy)- 在 J-_-L 的帖子之后进行了非常有趣的讨论
*   [在可能为 nil 的变量上调用方法时避免错误的更惯用方法？](http://www.ruby-forum.com/topic/218373)关于红宝石谈话
*   *等等*

话虽如此，已经提供的答案可能足以解决更具体的链接`Hash#[]`访问问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:18:11.493

如果您可以忍受获取空哈希而不是`nil`没有密钥的情况，那么您可以这样做：

```
response.fetch('cars', {}).fetch(0, {}).fetch('engine', {}).fetch('5L', {}) 
```

或者通过定义一个方法来保存一些类型`Hash#_`：

```
class Hash; def _ k; fetch(k, {}) end end
response._('cars')._(0)._('engine')._('5L') 
```

或立即这样做：

```
["cars", 0, "engine", "5L"].inject(response){|h, k| h.fetch(k, {})} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:19:10.830

Casper 就在我之前，他使用了相同的想法（不知道我在哪里找到它，是前一段时间），但我相信我的解决方案更可靠

```
module DeepFetch
  def deep_fetch(*keys, &fetch_default)
    throw_fetch_default = fetch_default && lambda {|key, coll|
      args = [key, coll]
      # only provide extra block args if requested
      args = args.slice(0, fetch_default.arity) if fetch_default.arity >= 0
      # If we need the default, we need to stop processing the loop immediately
      throw :df_value, fetch_default.call(*args)
    }
    catch(:df_value){
      keys.inject(self){|value,key|
        block = throw_fetch_default && lambda{|*args|
          # sneak the current collection in as an extra block arg
          args << value
          throw_fetch_default.call(*args)
        }
        value.fetch(key, &block) if value.class.method_defined? :fetch
      }
    }
  end

  # Overload [] to work with multiple keys
  def [](*keys)
    case keys.size
    when 1 then super
    else deep_fetch(*keys){|key, coll| coll[key]}
    end
  end

end

response = { 'foo' => { 'bar' => [1, 2, 3] } }
response.extend(DeepFetch)

p response.deep_fetch('cars')  { nil } # nil
p response.deep_fetch('cars', 0)  { nil } # nil
p response.deep_fetch('foo')  { nil } # {"bar"=>[1, 2, 3]}
p response.deep_fetch('foo', 'bar', 0)  { nil } # 1
p response.deep_fetch('foo', 'bar', 3)  { nil } # nil
p response.deep_fetch('foo', 'bar', 0, 'engine')  { nil } # nil 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T22:15:29.940

我试图查看 Hash 文档和[Facets](http://rubyworks.github.com/facets/index.html)，但据我所见，没有什么特别突出的。

因此，您可能想要实施自己的解决方案。这是一个选项：

```
class Hash
  def deep_index(*args)
    args.inject(self) { |e,arg|
      break nil if e[arg].nil?
      e[arg]
    }
  end
end

h1 = { 'cars' => [{'engine' => {'5L' => 'It worked'}}] }
h2 = { 'foo' => { 'bar' => [1, 2, 3] } }

p h1.deep_index('cars', 0, 'engine', '5L')
p h2.deep_index('cars', 0, 'engine', '5L')
p h2.deep_index('foo', 'bonk') 
```

输出：

```
"It worked"
nil
nil 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T06:09:39.140

我建议一种将自定义`#[]`方法注入我们感兴趣的实例的方法：

```
def weaken_checks_for_brackets_accessor inst
  inst.instance_variable_set(:@original_get_element_method, inst.method(:[])) \
    unless inst.instance_variable_get(:@original_get_element_method)

  singleton_class = class << inst; self; end
  singleton_class.send(:define_method, :[]) do |*keys|
    begin
      res = (inst.instance_variable_get(:@original_get_element_method).call *keys)
    rescue
    end
    weaken_checks_for_brackets_accessor(res.nil? ? inst.class.new : res)
  end
  inst
end 
```

在 Hash 的实例上调用（Array 与所有其他类一样，已`#[]`定义），此方法存储原始`Hash#[]`方法，除非它已被替换（这是防止多次调用期间堆栈溢出所必需的。）然后它注入自定义实现方法，`#[]`返回空类实例而不是 nil/异常。要使用安全值检索：

```
a = { 'foo' => { 'bar' => [1, 2, 3] } }

p (weaken_checks_for_brackets_accessor a)['foo']['bar']
p "1 #{a['foo']}"
p "2 #{a['foo']['bar']}"
p "3 #{a['foo']['bar']['ghgh']}"
p "4 #{a['foo']['bar']['ghgh'][0]}"
p "5 #{a['foo']['bar']['ghgh'][0]['olala']}" 
```

产量：

```
#⇒ [1, 2, 3]
#⇒ "1 {\"bar\"=>[1, 2, 3]}"
#⇒ "2 [1, 2, 3]"
#⇒ "3 []"
#⇒ "4 []"
#⇒ "5 []" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-26T22:15:42.273

Since Ruby 2.3, the answer is [`dig`](https://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig)

# git - git 冲突：BASE 版本和 OTHER 版本之间的差异

> ID：14696192
> 
> 赞同：3
> 
> 时间：2013-02-04T21:42:46.430
> 
> 标签：git, merge-conflict-resolution

在 Bazaar 中，如果您在 foo.html 中存在冲突，它将额外生成 3 个文件

```
foo.html.BASE
foo.html.OTHER
foo.html.THIS 
```

那么你也能

```
diff -Naur foo.html.BASE foo.html.OTHER 
```

将共同基础与另一组更改进行比较确实很有帮助，因为它可以告诉您它们到底改变了什么，这有助于回答他们为什么这样做。例如，如果他们更改的只是空白，您可以放心地使用自己的更改。

我如何在 git 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:11:05.373

`git`不会将这三个文件的实际完整副本版本存储在您的工作目录中。相反，它存储一个文件，其中放置了冲突标记。但是，您仍然可以使用`:<stage>:<filename>`语法获得这些版本（`git`工具 - 文件实际上并不存在，因此，例如正常`diff`不会看到它们）。因此，例如，您可以运行以查看和`git diff :1:foo.html :2:foo.html`之间的差异。第 3 阶段将是您的版本。您也可以使用或。如果你真的需要对它们使用非工具，你可以这样做：`BASE``THIS``OTHER``git mergetool foo.html``git difftool foo.html``git`

```
git show :1:foo.html > foo.html.BASE
git show :2:foo.html > foo.html.THIS
git show :3:foo.html > foo.html.OTHER
diff ...... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:08:15.097

要获得外部工具中文件之间的简单差异，您可以使用[`git difftool`](http://git-scm.com/docs/git-difftool).

在解决冲突的情况下，您还可以使用[`git mergetool`](http://git-scm.com/docs/git-mergetool).

它们共享一组特定的配置和使用选项，但`git mergetool`实际上会创建类似于您从 Bazaar 知道的文件。上面链接的手册页中描述了有关此内容的详细信息。

`difftool`了解一些常用的 diff和`mergetool`merge 工具，无需进一步配置即可使用它们（例如 vimdiff、meld、k3diff 等），但您可以配置自己的或使用自定义选项来更改这些工具的行为。

您应该尝试`mergetool`做您想做的事情（例如，`mergetool`可以配置为在合并工具退出后不删除这些文件，以便您可以进一步检查它们）。既然您有了起点，Google 也会提供帮助，尤其是当手册页对您的口味而言过于技术性时。

如果您遇到具体问题，您可以提出一个新问题；）

# c# - 将 MidpointRounding.AwayFromZero 设置为默认舍入方法

> ID：14696195
> 
> 赞同：3
> 
> 时间：2013-02-04T21:43:15.067
> 
> 标签：c#

我正在做一个应用程序，我需要始终使用 MidpointRounding.AwayFromZero 对数字进行舍入，但每次进行舍入时，我都必须编写以下语句

```
Math.Round(xxx, ddd, MidpointRounding.AwayFromZero); 
```

有没有办法将 MidpointRounding.AwayFromZero 设置为方法 Math.Round(...) 的默认方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T21:45:01.150

> 有没有办法将 MidpointRounding.AwayFromZero 设置为方法 Math.Round(...) 的默认方式？

不，没有。

但是您可以编写一个在任何地方都使用的辅助方法，它使用`MidpointRounding.AwayFromZero`.

```
public static class MathHelper
{
  public static double Round(double value, int digits)
  {
    return Math.Round(value, digits, MidpointRounding.AwayFromZero);
  }
} 
```

# c++ - 将 DirectX 接口转换为 IUnknown 指针

> ID：14696202
> 
> 赞同：1
> 
> 时间：2013-02-04T21:43:54.010
> 
> 标签：c++, memory-management, com, directx, iunknown

我的代码中有很多接口，我想将重复`Release`代码封装在另一个方法中，而不是宏中，因为这是 C++，我讨厌使用宏。我最初的尝试是编写一个方法，例如

```
void SafeRelease(IUnknown **ppInterface) {
    if(*ppInterface) {
        (*ppInterface)->Release();
        (*ppInterface) = nullptr;
    }
} 
```

但是，将此方法应用于`IDirect3DSurface9 *`例如类似会`SafeRelease(&mySurface)`产生错误`IDirect3DSurface9 **`与`IUnknown **`.

1.  我在这里做错了什么？
2.  有没有更好的方法（希望不使用宏）来实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:20:14.743

这是我的方法：

```
template <typename T> void SafeRelease(T*& ptr)
{
    if(ptr)
    {
        ptr->Release();
        ptr = nullptr;
    }
} 
```

示例用法：

```
IDirect3DDevice9 *pD3DDevice = NULL;
d3d->CreateDevice(..., &pD3DDevice);
SafeRelease(pD3DDevice); 
```

如果需要，您可以`inline`使用此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:53:27.077

您可以使用模板：

```
template<class DXInterface>
void SafeRelease(DXInterface **ppInterface) {
    if(*ppInterface) {
        (*ppInterface)->Release();
        (*ppInterface) = nullptr;
    }
} 
```

您还可以使用 std::unique_ptr 或 std::shared_ptr 自动清理：

```
#include <memory>
#include <iostream>

struct Releaser {
   template<class DXInterface>
   void operator()(DXInterface *pInterface) const {
       if(pInterface) {
           pInterface->Release();
       }
   }
};

// For illustrative purposes only (supplied in DX9 headers)
struct IDirect3DSurface9 { void Release() { std::cout << "Released surface\n";} };
struct IDirect3DTexture9 { void Release() { std::cout << "Released texture\n";} };

void DX9CreateSurface( IDirect3DSurface9** surface ) 
{ 
    *surface = new IDirect3DSurface9();
}

void DX9CreateTexture( IDirect3DTexture9** texture ) 
{ 
    *texture = new IDirect3DTexture9();
}

// Your factory functions
IDirect3DSurface9* createSurface( /*init params go here*/ )
{
    IDirect3DSurface9* surface;
    DX9CreateSurface( &surface );
    return surface;
}

IDirect3DTexture9* createTexture( /*init params go here*/ )
{
    IDirect3DTexture9* texture;
    DX9CreateTexture( &texture );
    return texture;
}

int main()
{
  typedef std::unique_ptr<IDirect3DSurface9, Releaser> SurfacePtr;
  typedef std::unique_ptr<IDirect3DTexture9, Releaser> TexturePtr;

  SurfacePtr surface( createSurface() );
  TexturePtr texture( createTexture() );
  // ... use surface and texture here
  // Automatically released here when their lifetimes ends.
} 
```

请注意，它们使用相同的 Releaser，并注意对 surface.reset() 的调用也会释放接口并将 unique_ptr 内的指针设置为 null 以启动。这两个对象可能是您的类的成员，而不是 main() 中的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T15:17:42.120

> 我在这里做错了什么？

我也有同样的问题，也针对 COM `SafeRelease`。所以这里是：

```
void SafeRelease(IUnknown **ppInterface) 
...
IDirect3DSurface9 * mySurface = new ...
...
SafeRelease(&mySurface); 
```

`IDirect3DSurface9 *`，凭借继承，可以转换为`IUnknown *`. 但是，违反直觉的是，`IDirect3DSurface9 **`不能强制转换为`IUnknown **`. 如果允许，那么在您的内部，`SafeRelease(IUnknown**)`您可以执行以下操作：

```
// obtain a pointer to an instance of some random subinterface of IUnknown
*ppInterface = pMyRamdomComInterfacePointer; 
```

因此，我们将在指向 的指针中存储了指向某个随机`IUnknown`导数的指针`IDirect3DSurface9`。这将违反 C++ 类型系统。这就是为什么不允许强制转换除`T**`to以外的任何其他类型的原因。`T**`换句话说，一个类型的变量`T**`只能被分配一个`ppT`（一个类型的值`T**`）而不是一个`ppSomeSubytpeOfT`。

比较一下：[为什么不能将派生类的指针传递给期望引用基类指针的函数？](https://stackoverflow.com/q/7186341/269126)而这个：[铸造基类的双指针](https://stackoverflow.com/q/5446767/269126)。

对于 COM `SafeRelease`，模板（如这里建议的）或宏都可以。

# iphone - 在 Objective-C 中，单例相对于类方法有什么优势？

> ID：14696210
> 
> 赞同：1
> 
> 时间：2013-02-04T21:44:55.077
> 
> 标签：iphone, ios, objective-c, ipad

如上所述，但要小心，我只对 Objective-C 上下文感兴趣，因此没有必要指出单例相对于静态方法的优势。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:47:32.623

我什么也不说。单例通常被认为是不好的做法，这也适用于 Obejctive-C。可能使单例比类方法更好的解决方案是单例是可以访问实例变量的适当实例，因此如果需要类将数据存储在 ivars 中，单例可以是一种解决方案。（但是，即使实现单例也经常需要使用静态全局或局部变量——所以严格来说，你不能完全避免它们，最多可以将它们的数量减少到一个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:47:06.673

一个显着的优势是 Objective-C 中的类方法不能保存任何数据（除非在方法中声明为静态）。而对于单例，您可以访问单实例的所有数据

# c# - 有没有办法让 WPF 页面在 Frame 中保持其样式？

> ID：14696212
> 
> 赞同：1
> 
> 时间：2013-02-04T21:45:01.590
> 
> 标签：c#, wpf, frame

我有一个 WPF 页面，我的样式如下：

![WPF 页面示例](../Images/015b4844f83462d3c2bfca45f12bfb73.png)

当我将源设置为 WPF 页面时，它看起来像是在加载。但是，阴影背景样式消失了。

![WPF 帧内页面示例](../Images/b18fbf1f09d2133e1754954fdf979340.png)

该按钮只是主窗口上的一个测试。背景保留在 Window 中，并且不继承 Page 背景。

有任何想法吗？

框架：

```
<Frame Source="{Binding ProductFrameSource}" Name="frameProducts" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Column="0" Grid.RowSpan="2" />

private Uri _ProductFrameSource = new Uri("pack://application:,,,/<omitted>.<omitted>.UI;component/Views/Products/<omitted>/Products_<omitted>.xaml");
        /// <summary>
        /// Gets or sets a property indicating the current product page to display
        /// </summary>
        public Uri ProductFrameSource
        {
            get { return _ProductFrameSource; }
            set
            { 
                _ProductFrameSource = value;
                RaisePropertyChanged("ProductFrameSource");
            }
        } 
```

页面样式：

```
<Style TargetType="{x:Type Page}">
        <Setter Property="Background">
            <Setter.Value>
                <DrawingBrush TileMode="Tile" Viewport="0 0 40 40" ViewportUnits="Absolute" Viewbox="0 0 100 100" ViewboxUnits="Absolute">
                    <DrawingBrush.Drawing>
                        <DrawingGroup>
                            <GeometryDrawing Brush="#FF1C1C1C" Geometry="M 0 0 L 100 0 L 100 100 L 0 100 Z" />
                            <GeometryDrawing Geometry="M  -10 77.5 L 22.5  110
                                               M  -10 52.5 L 47.5  110
                                               M  -10 27.5 L 72.5  110
                                               M  -10  2.5 L 97.5  110
                                               M  2.5  -10 L  110 97.5
                                               M 27.5  -10 L  110 72.5
                                               M 52.5  -10 L  110 47.5 
                                               M 77.5  -10 L  110 22.5">
                                <GeometryDrawing.Pen>
                                    <Pen Brush="#FF908B91" Thickness=".5" />
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingGroup>
                    </DrawingBrush.Drawing>
                </DrawingBrush>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:20:21.203

你在哪里定义`Page`风格？它是在`App.xaml`还是在 ? 的父母之一中`Page`。

请看这里：

*   [page.DataContext 不是从父框架继承的？](https://stackoverflow.com/questions/3621424/page-datacontext-not-inherited-from-parent-frame)

`Isolated`读到这意味着只有在将其放入 App.xaml 时，由于托管行为，该样式才会被继承。

至于为什么它在您启动时起作用，但在您更改帧源之后却不起作用......这只是一个猜测，但它可能只是一个错误，或者由于某种原因隔离在那时没有激活。

如果将样式放在 App.xaml 中不起作用或不实用，那么您可以将`Style`内部`ResourceDictionary`定义在一个单独的 .XAML 文件中，然后在您`Page`创建一个`ResourceDictionary`合并到包含您的共享样式（或在代码隐藏中执行类似的操作，将您的样式放入页面的 .Resources 字典中）。

FrameProductsPageStyle.xaml：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">    
<Style TargetType="{x:Type Page}">
        <Setter Property="Background">
            <Setter.Value>
                <DrawingBrush TileMode="Tile" Viewport="0 0 40 40" ViewportUnits="Absolute" Viewbox="0 0 100 100" ViewboxUnits="Absolute">
                    <DrawingBrush.Drawing>
                        <DrawingGroup>
                            <GeometryDrawing Brush="#FF1C1C1C" Geometry="M 0 0 L 100 0 L 100 100 L 0 100 Z" />
                            <GeometryDrawing Geometry="M  -10 77.5 L 22.5  110
                                               M  -10 52.5 L 47.5  110
                                               M  -10 27.5 L 72.5  110
                                               M  -10  2.5 L 97.5  110
                                               M  2.5  -10 L  110 97.5
                                               M 27.5  -10 L  110 72.5
                                               M 52.5  -10 L  110 47.5 
                                               M 77.5  -10 L  110 22.5">
                                <GeometryDrawing.Pen>
                                    <Pen Brush="#FF908B91" Thickness=".5" />
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingGroup>
                    </DrawingBrush.Drawing>
                </DrawingBrush>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

在页面的 XAML 中：

```
<Page>
<Page.Resources>
    <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary 
            Source="FrameProductsPageStyle.xaml">
        </ResourceDictionary>
    </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Page.Resources>
</Page> 
```

使用合适的“包”URL 来引用您的 XAML 资源字典，具体取决于它是松散文件还是组件/程序集的一部分。

一些链接：

*   [将 ResourceDictionary 添加到类库](https://stackoverflow.com/questions/8173622/add-resourcedictionary-to-class-library)

# bash - .exrc 不工作

> ID：14696219
> 
> 赞同：3
> 
> 时间：2013-02-04T21:45:27.963
> 
> 标签：bash, unix, vi

我是 unix 新手。我在我的主文件夹中创建了一个 .exrc 文件。我刚刚输入 set nu 并在 .exrc 中设置 ai 进行检查。但是每当我打开 vi 编辑器时，这不起作用。

此外，我以超级用户身份输入，输入 su 和密码，现在在 vi 编辑器中打开一个新文件，现在它可以工作了。

我们是否需要拥有超级用户权限才能拥有这个？请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:53:12.353

这是我认为正在发生的事情：

1.  `vi`实际上是.`vim`的现代版本的链接或别名`vi`。
2.  您有一个`.vimrc`文件，`vim`如果存在而不是`.exrc`.
3.  作为超级用户，`vi`不是指向 的链接`vim`，并且会忽略`.vimrc`并读取`.exrc`.

检查输出

```
$ which vi
$ ls -l `which vi`
$ ls ~/.vimrc 
```

解决方案是使用`.vimrc`而不是`.exrc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T16:19:37.460

首先，确保你是可读的，并且通过在 vi 中`~/.exrc`运行它实际上可以工作。`:source $HOME/.exrc`

如果您使用的是更“传统”的 vi（不是 Vim），可能是由于额外的权限问题。[关于ex](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/ex.html)的 POSIX 文档说：

> 从历史上看，如果 $HOME 和本地 .exrc 文件归用户的真实 ID 所有，或者设置了 sourceany 选项，则 4 BSD ex 和 vi 会读取这些文件，而不管其他考虑。这是一个安全问题，因为可以将普通的 UNIX 系统命令放在 .exrc 文件中。POSIX.1-2017 未指定 sourceany 选项，鼓励历史实现将其删除。

确保您是以下设备的所有者`~/.exrc`：`chown <your-username> ~/.exrc`

此外，如果您碰巧使用的是[ex-vi](http://ex-vi.sourceforge.net)（“传统 vi”），`~/.exrc`则不能是组可写或全局可写的。运行`chmod go-w ~/.exrc`以确保这一点。来自 09/23/00 版本的变更日志的参考：

> *   POSIX.2：如果 .exrc 文件是世界或组可写的，除非设置了“sourceany”，否则它们将被忽略。

# java - 如何根据在数字字段中输入的数字设置切换按钮的延迟？

> ID：14696226
> 
> 赞同：1
> 
> 时间：2013-02-04T21:45:49.370
> 
> 标签：java, android, timer, delay, countdowntimer

我正在尝试让切换按钮播放歌曲但延迟。用户必须在数字字段（调色板/文本字段/数字）中输入**分钟**，这将用于设置延迟。我已经检查了 android 开发人员资源，但我仍然不知道从哪里开始。

目前我有这个：

```
public class Main extends Activity {

MediaPlayer mp;
Button startButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    mp = MediaPlayer.create(getBaseContext(), R.raw.songthingy);

    ToggleButton toggle = (ToggleButton) findViewById(R.id.ToggleButton);
    toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                mp.start();
            } else {
                mp.stop();
            }
        }
    });

    mp.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mp.release();
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:48:36.080

一个很好的方法是[Handler.postDelay](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)。您必须使您的操作成为可运行的，并将其传递给他们方法的参数。然后它将在给定时间后执行。

**更新：**

```
 private Runnable doStuff= new Runnable() {
//Notice doStuff is a member of the class.
            public void run() {
               //do awesome stuff here.
             mp.start();
            }
        };
//...
 toggle.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
             final Handler mHandler= new Handler();
                mHandler.postDelayed(doStuff,1000*30);//30 second delay.
            } else {
                mp.stop();
            }
        } 
```

你可以到处谷歌看看如何使用它的例子。您的代码可能看起来很像这样，但此代码不会开箱即用。您必须修复范围并满足您的要求。

# java - 试图显示从 MySQL 表中读取的图像

> ID：14696227
> 
> 赞同：0
> 
> 时间：2013-02-04T21:45:50.747
> 
> 标签：java, mysql, eclipse, image, gwt

我正在尝试从 MySQL 表中读取图像该图像被定义为 longblob，我正在使用 Eclipse Juno（更新）、Java 和 GWT（最新版本）。但是，当我运行时，我在页面上收到错误消息（未显示我的第一个视图）：

```
onModuleLoad() threw an exception

Exception while loading module org.AwardTracker.client.AwardTracker. See Development Mode for details.
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:406)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: Deferred binding failed for 'org.AwardTracker.client.DBConnection' (did you forget to inherit a required module?)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
at com.google.gwt.core.shared.GWT.create(GWT.java:57)
at com.google.gwt.core.client.GWT.create(GWT.java:85)
at org.AwardTracker.client.LoginView.<init>(LoginView.java:29)
at org.AwardTracker.client.AwardTracker.onModuleLoad(AwardTracker.java:14)
... 9 more
Caused by: com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:605)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
... 13 more 
```

开发控制台有以下消息（前几行）：

```
[DEBUG] [org.AwardTracker.AwardTracker] - Validating units:
[INFO] [org.AwardTracker.AwardTracker] - Ignored 4 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[ERROR] [org.AwardTracker.AwardTracker] - Errors in 'file:/C:/Users/Glyndwr/Eclipse/Workspace/AwardTracker/src/org/AwardTracker/client/DBConnection.java'
[ERROR] [org.AwardTracker.AwardTracker] - Line 15: No source code is available for type java.sql.Blob; did you forget to inherit a required module? 
```

我的 DBConnection 是：

```
package org.AwardTracker.client;

import java.util.List;
import java.sql.Blob;

import com.google.gwt.user.client.rpc.RemoteService;

/**
 * The client side stub for the RPC service.
 */
public interface DBConnection extends RemoteService {
public User authenticateUser(String user, String pass, String level, String archived);
public User duplicateUser(String user, String pass, String level, String archived);
public User createUser(String user, String pass, String level, String archived);
public List<YouthMember> getYM(String id, String surname, String first_name, String dob, Blob image, String archived);
} 
```

由此我认为 java.sql.Blob 不能在 GWT 中使用。我应该使用什么？

我将图像存储在数据库中，而不是图像链接，因为我只有少量低分辨率图像要存储，因此数据库不应该因此而过度征税。

问候，

格林

我做了以下更改：

在 MySQLConnection 类的服务器端，我添加了以下方法（但是它有列出的错误）：

```
public String getImageData(String id){
    ResultSet result = null;
    PreparedStatement ps = null;
    String imageDataString = null;
    try {
        // Read in the image from the database.
        ps = conn.prepareStatement(
              "SELECT at_cub_details.cd_photograph " +
                      "FROM at_cub_details " + 
                      "WHERE at_cub_details.cd_id = \"" + id + "\"");
        result = ps.executeQuery();
        while (result.next()) {
            File file = new File(result.getString(1));
            FileInputStream imageInFile = new FileInputStream(file);
            byte imageData[] = new byte[(int) file.length()];
            imageInFile.read(imageData);

            //Convert Image byte array into Base64 String
            imageDataString = encodeImage(imageData);

            imageInFile.close();
        }

    }
    catch (FileNotFoundException e) {
        System.out.println("getImageData - Image not found" + e);
    } 
    catch (IOException ioe) {
        System.out.println("getImageData - Exception while reading the Image " + ioe);
    }
    catch (SQLException e) {
      //do stuff on fail
        System.out.println("SQLException getImageData 1.");
        e.printStackTrace();
        user = null;
    }
    finally {
        if (result != null) {
            try {
                result.close();
            }
            catch (SQLException e) {
                System.out.println("SQLException getImageData 2.");
                e.printStackTrace();
            }
        }
        if (ps != null) {
            try {
                ps.close();
            }   
            catch (SQLException e) {
                System.out.println("SQLException getImageData 3.");
                e.printStackTrace();
            }
        }
    }
    return imageDataString;
}
 /**
  * Encodes the byte array into base64 string
  * @param imageByteArray - byte array
  * @return String a {@link java.lang.String}
  */
public static String encodeImage(byte[] imageByteArray) {
    return Base64.encodeBase64URLSafeString(imageByteArray); [This line has the error: Multiple markers at this line
- The method encodeBase64URLSafeString(byte[]) is undefined for the 
 type Base64
- Line breakpoint:MySQLConnection [line: 287] - encodeImage(byte[]). However I have import org.apache.commons.codec.binary.Base64;]

} 
```

在客户端，我有：

```
public void renderYouthMemberTable(List<YouthMember> youthMemberList) {
    if (youthMemberList != null) {
        int row = 0;
        int col = 0;
        flexTable.clear();
        for (YouthMember youthMember : youthMemberList) {
            String id = youthMember.getId();

            String imageDataString = getImageData(); [ Error: The method getImageData() is undefined for the type SelectPersonView]

            // Converting a Base64 String into Image byte array
            byte[] imageByteArray = decodeImage(imageDataString);

            // Write a image byte array into file system
            FileOutputStream imageOutFile = new FileOutputStream(
                    "/Users/jeeva/Pictures/wallpapers/water-drop-after-convert.jpg");
            imageOutFile.write(imageByteArray);

            flexTable.setWidget(row, col, new Label(imageByteArray)); [Error: The constructor Label(byte[]) is undefined]
            //flexTable.setWidget(row, col, new Label(youthMember.getId()));
            flexTable.setWidget(row + 1, col, new Label(youthMember.getSurname() + ", " + youthMember.getFirstname()));

            //imageOutFile.close();

            col = col + 1;
            if (col > 7) {
                row = row + 2;
                col = 0;
            }
        }
    }

}

/**
 * Decodes the base64 string into byte array
 * @param imageDataString - a {@link java.lang.String}
 * @return byte array
 */
public static byte[] decodeImage(String imageDataString) {
    return Base64.decodeBase64(imageDataString); [ With the error: The method decodeBase64(byte[]) in the type Base64 is not applicable for the arguments (String)]
    } 
```

我从以下位置复制了这段代码：[http ://www.myjeeva.com/2012/07/how-to-convert-image-to-string-and-string-to-image-in-java/](http://www.myjeeva.com/2012/07/how-to-convert-image-to-string-and-string-to-image-in-java/)

问候，

格林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:21:52.800

当您使用 GWT 时，不要忘记您的最终代码是 javascript。所以有些课程是不可用的。

但：

-> GWT 中的图像可以有一个用于源 url 的 servlet url（带参数）。

-> 此处描述的其他方式：[GWT - 来自数据库的图像](https://stackoverflow.com/questions/4553316/gwt-image-from-database)：使用在回调时返回 base64 字符串 + 图像初始化的服务 rpc。

希望对您的问题有用。

# ios - 保存一对多关系CoreData

> ID：14696228
> 
> 赞同：0
> 
> 时间：2013-02-04T21:45:51.440
> 
> 标签：ios, core-data, one-to-many, nsmanagedobject

我在 CoreData 中设置的关系有问题。它是一对多的，一个**客户**可以有多个**联系人**，这些联系人来自通讯录。

我的模型看起来像这样：

```
Customer <---->> Contact
Contact  <-----> Customer 
```

*联系人.h*

```
@class Customer;

@interface Contact : NSManagedObject

@property (nonatomic, retain) id addressBookId;
@property (nonatomic, retain) Customer *customer;

@end 
```

*客户.h*

```
@class Contact;

@interface Customer : NSManagedObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSSet *contact;

@end

@interface Customer (CoreDataGeneratedAccessors)

- (void)addContactObject:(Contact *)value;
- (void)removeContactObject:(Contact *)value;
- (void)addContact:(NSSet *)values;
- (void)removeContact:(NSSet *)values;

@end 
```

并尝试保存：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];
Customer *customer = (Customer *)[NSEntityDescription insertNewObjectForEntityForName:@"Customer" inManagedObjectContext:context];

[customer setValue:name forKey:@"name"];

for (id contact in contacts) {
    ABRecordRef ref = (__bridge ABRecordRef)(contact);
    Contact *contact = [NSEntityDescription insertNewObjectForEntityForName:@"Contact" inManagedObjectContext:context];

    [contact setValue:(__bridge id)(ref) forKey:@"addressBookId"];
    [customer addContactObject:contact];
}

NSError *error;

if ([context save:&error]) { // <----------- ERROR
    // ...
} 
```

使用我的代码，我有这个错误：

```
-[__NSCFType encodeWithCoder:]: unrecognized selector sent to instance 0x9c840c0
*** -[NSKeyedArchiver dealloc]: warning: NSKeyedArchiver deallocated without having had -finishEncoding called on it.
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType encodeWithCoder:]: unrecognized selector sent to instance 0x9c840c0' 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:15:09.180

问题是`addressBookId`（正如您在评论中提到的）定义为`Contact`实体上的可转换属性。但是（正如您在评论中提到的那样）您没有任何自定义代码来实际将 an`ABRecordRef`转换为 Core Data 知道如何存储的东西。在没有自定义转换器的情况下，Core Data 将尝试通过调用值来转换`encodeWithCoder:`值。但`ABRecordRef`不符合`NSCoding`，所以这会失败并且您的应用程序崩溃。

如果你想`ABRecordRef`在 Core Data 中存储，你需要创建一个`NSValueTransformer`子类并在你的数据模型中配置它。你的转换器需要转换`ABRecordRef`成 Core Data 知道的一种类型。我还没有充分使用地址簿 API 来就这方面的细节提供建议，但 Apple 的文档`NSValueTransformer`非常好。

这是一对多关系的事实是无关紧要的。问题是如果`ABRecordRef`不进行一些转换就无法进入您的数据存储。

# sql - SQL 存储过程中的错误

> ID：14696229
> 
> 赞同：-1
> 
> 时间：2013-02-04T21:45:53.230
> 
> 标签：sql

执行存储过程时出现以下错误：

> 消息 102，级别 15，状态 1，第 6 行
> “2011”附近的语法不正确。
> （1 行受影响）

这是存储过程：

```
ALTER PROCEDURE [dbo].[DeliveryFileNames]
AS
BEGIN
    SET NOCOUNT ON;

    declare @SQL nvarchar(4000)

    Create Table #DelivTemp(
        Style nvarchar(50),
        Material nvarchar(50),
        Filename nvarchar(100),
        delivered_date date)

    set @SQL=
    N'insert into #DelivTemp
    Select distinct Style,Material,filename 
    from OPENQUERY(GCS_PRODUCTION,
    ''SELECT LEFT(FILENAME,locate(''''_'''',FILENAME)-1)as Style,
        substring_index(filename,''''_'''',2)as Material,filename,
        delivered_date FROM view_delivery_log
        where delivered_date > ''2011%'' order by Style '')'

    exec (@SQL)

    drop table dbo.DelivFN

    Select * into dbo.DelivFN
    from #DelivTemp

END 
```

我正在使用 OpenQuery 从 SQL Server 2008 R2 上的链接服务器更新 SQL 表。

我知道下划线是一个真正的问题，但我尝试了很多选项，包括`\`,`%`以及单引号和双引号。

不管我得到相同的结果。我可以独立于存储过程运行查询并获得正确的结果。多次引用的文件名字段已格式化`00000000_ABC4_A.png`。我使用下划线来标​​识我需要用于报告目的的文件名组成部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:58:29.247

除了使用`%`其他人指出的日期比较的逻辑错误之外，您当前的问题是语法错误。

由于您在另一个动态 sql 语句中包含一个动态 sql 语句...您需要对所有单引号进行*双重转义*...您在大多数查询中都这样做了，除了以下行：

```
where delivered_date > ''2011%'' order by Style '')' 
```

正确逃脱，将是：

```
where delivered_date > ''''2011%'''' order by Style '')' 
```

这就提出了一个问题……为什么要构建动态执行的字符串，而不是直接调用语句？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:52:44.660

这是''2011%''的语法。这不是一个有效的日期。% 作为通配符意味着编译器不知道在 WHERE 子句中要比较什么。您需要使用实际日期：即 ''2011_01_01'' 以便编译器知道要比较什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:55:38.883

I believe the stored proc `exec` runs under a different session, therefore you won't have access to the temp table anyway. So, it won't matter if you get that sql statement to run. You could always use `YEAR(delivered_date) > 2011`.

Another approach would be to use the fqn for the linked server to select into and bypass the temp table all together:

```
SELECT LEFT(FILENAME,locate('_',FILENAME)-1)as Style,
    substring_index(filename,'_',2)as Material,filename,delivered_date 
FROM [linked_server_name].[db_name].[dbo].view_delivery_log
into dbo.DelivFN 
```

# ios - 我如何找到错误 iTunes 连接

> ID：14696233
> 
> 赞同：0
> 
> 时间：2013-02-04T21:46:12.507
> 
> 标签：ios, cordova, crash

我正在使用适用于 iOS 的 Cordova 2.1.0 开发一个程序，但是当此应用程序经过审核时，Apple 发现您的应用程序在运行 iOS 6.0.1 的 iPhone 5 和 iPad（第三代）上崩溃，这不符合 App Store审查指南。

崩溃是这样的，但我不知道如何在这次崩溃中找到错误以及如何解决崩溃

```
Incident Identifier: D118AC06-AE7A-45FC-B006-480445F1AEE7
CrashReporter Key:   61fff04272e67e35a7d37d24f9e047e4b111fe0c
Hardware Model:      xxx
Process:         Coto [4429]
Path:            /var/mobile/Applications/CE1C6A84-01B4-4324-B2E7-60F28C05B03A/Coto.app/Coto
Identifier:      Coto
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-12-11 16:43:37.661 -0800
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
(0x3427c29e 0x3af5e97a 0x3427fe02 0x3427e52c 0x341d5f64 0x3506c 0x8784 0x39fab588 0x39febd6c 0x39fe7ae0 0x3a0291c4 0x8454 0x39fecacc 0x39fec656 0x39fe483e 0x39f8cc34 0x39f8c6c8 0x39f8c116 0x3770859e 0x377081ce 0x3425116e 0x34251112 0x3424ff94 0x341c2eb8 0x341c2d44 0x39fe3478 0x39fe02f4 0x8092 0x806c)

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x331a6350 __pthread_kill + 8
1   libsystem_c.dylib               0x3aefd11e pthread_kill + 54
2   libsystem_c.dylib               0x3af3996e abort + 90
3   libc++abi.dylib                 0x39106d4a abort_message + 70
4   libc++abi.dylib                 0x39103ff4 default_terminate() + 20
5   libobjc.A.dylib                 0x3af5ea74 _objc_terminate() + 144
6   libc++abi.dylib                 0x39104078 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x39104110 std::terminate() + 16
8   libc++abi.dylib                 0x39105594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x3af5e9cc objc_exception_rethrow + 8
10  CoreFoundation                  0x341c2f1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x341c2d44 CFRunLoopRunInMode + 100
12  UIKit                           0x39fe3478 -[UIApplication _run] + 664
13  UIKit                           0x39fe02f4 UIApplicationMain + 1116
14  Coto                            0x00008092 0x6000 + 8338
15  Coto                            0x0000806c 0x6000 + 8300

Thread 1:
0   libsystem_kernel.dylib          0x331a6d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3aed4cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3aed4a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3aed48a0 start_wqthread + 4 
```

# spotify - 从自己的服务器检索外部歌曲

> ID：14696234
> 
> 赞同：1
> 
> 时间：2013-02-04T21:46:13.723
> 
> 标签：spotify

我正在开发一个本地 Spotify 应用程序，并想从我的外部服务器播放我自己录制的歌曲。

我试过使用：

```
 var single_track = models.Track.fromURI('http://<myserver>/recording.mp3'); 
```

但我收到以下错误消息：

```
Uncaught Error: Invalid track URI: http://<myserver>/recording.mp3 
```

这可能吗？或者是否有另一种方法可以在Spotify（本地应用程序）中从我的服务器播放歌曲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:37:49.813

这是不可能的。对于该特定方法，您只能使用 spotify:track:XXXXXX 形式的 Spotify URI，用于识别 Spotify 目录中的曲目。

# asp.net - youtube 上传 api 在 asp.net 网站上不起作用

> ID：14696236
> 
> 赞同：0
> 
> 时间：2013-02-04T21:46:19.670
> 
> 标签：asp.net, api, video, upload

我有一个网站（Visual Web Developer 2008 Express - asp.net - vb）。我想从我的网站使用 youtube api 上传电影。我在下面发布了我的代码。当我单击按钮时，我等待一段时间并收到 401-Unauthorized access.. 错误消息。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim settings As YouTubeRequestSettings = New YouTubeRequestSettings("app name", "my developer key", "my gmail", "my gmail password")

    Dim request As New YouTubeRequest(settings)
    Dim newVideo As New Video()

    newVideo.Title = "My Test Movie"
    newVideo.Tags.Add(New MediaRss.MediaCategory("Autos", YouTubeNameTable.CategorySchema))
    newVideo.Keywords = "cars, funny"
    newVideo.Description = "My description"
    newVideo.YouTubeEntry.Private = False
    newVideo.Tags.Add(New MediaRss.MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema))

    newVideo.YouTubeEntry.Location = New GeoRssWhere(37, -122)

    newVideo.YouTubeEntry.MediaSource = New MediaFileSource("C:\Users\Acer\Desktop\1.mov", "video/x-msvideo")
    Dim createdVideo As Video = request.Upload(newVideo)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:40:57.283

您必须指定一个有效的类别

```
newVideo.Tags.Add(New MediaCategory("Music", YouTubeNameTable.CategorySchema)) 
```

# javascript - 对角滚动 div

> ID：14696240
> 
> 赞同：1
> 
> 时间：2013-02-04T21:46:48.340
> 
> 标签：javascript, jquery, html, css

如何使 div 对角滚动？常规滚动会向上/向下或向左/向右，但我想让 div 向上*和*向右**或**向下*和*向左滚动。

[见视觉表现](http://i.imagebanana.com/img/06qfwen6/Unbenannt1.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:54:02.420

**编辑**：根据 OP 的要求，我更新了示例代码以引入一个校正因子，需要更改对角线移动方向和度数。

如果你想使用 jQuery，你必须下载[MouseWheel](https://github.com/brandonaaron/jquery-mousewheel)插件。

然后，您可以编写一个简单的函数绑定到`mousewheel`事件，例如：

**HTML**

```
<div id="block"></div> 
```

**CSS**

```
#block {
    position: absolute;
    width: 200px;
    height: 150px;
    top: 200px;
    left: 50px;
    background-color: red;
} 
```

**备选方案1：JS使用CSS top and left**

```
$(function(){
    $(window).on('mousewheel', function(evt,delta){
        var $block = $('#block'),
            // retrieves the top and left coordinates
            top = parseInt($block.css('top')),
            left = parseInt($block.css('left')),
            // mouse wheel delta is inverted respect to the direction, so we need to
            // normalize it against the direction
            offset = -1 * delta,
            // X and Y factors allows to change the diagonal movement direction and
            // degree. Negative values inverts the direction.
            factorX = 5,
            factorY = 2,
            // calculates the new position. NOTE: if integers only are used for factors,
            // then `Math.floor()` isn't required.
            newTop = top + Math.floor(offset * factorY),
            newLeft = left - Math.floor(offset * factorX);

        // moves the block
        $block.css({ 
            top: newTop + 'px',
            left: newLeft + 'px'
        });
    });
}); 
```

**备选方案 2：JS 使用 offset()**

```
$(function(){
    $(window).on('mousewheel', function(evt,delta){
        var $block = $('#block'),
            // retrieves the top and left coordinates
            position = $block.offset(),
            // mouse wheel delta is inverted respect to the direction, so we need to
            // normalize it against the direction
            offset = -1 * delta,
            // X and Y factors allows to change the diagonal movement direction and
            // degree. Negative values inverts the direction.
            factorX = 5,
            factorY = 2,
            // calculates the new position. NOTE: if integers only are used for factors,
            // then `Math.floor()` isn't required.
            newTop = position.top + Math.floor(offset * factorY),
            newLeft = position.left - Math.floor(offset * factorX);

        // moves the block
        $block.offset({ top: newTop, left: newLeft });
    });
}); 
```

现在您可以通过向上滚动来上下移动框，反之亦然通过向下滚动。在此示例中，对于每个`mousewheel`事件，回调函数：

1.  检索当前元素位置（`top`和`left`CSS 属性）
2.  反转事件返回的增量值`mousewheel`，因此向上滚动我们有一个负增量，向下滚动我们有一个正增量
3.  设置定义对角线移动方向和度数所需的因子值
4.  计算新位置
5.  移动对象。

要更改度数和方向，只需更改`factorX`和/或`factorY`值，以便：

*   负值反转方向，并且
*   不同的值会改变度数（例如，相对于 X = 5 和 Y = 2，X = 2 和 Y = 5 使元素以更闭合的角度移动）。

这是一个您可以测试的[演示。](http://jsfiddle.net/ragnarokkr/Ntxud/)

**备选方案 3：JS 使用 cos() 和 sin()**

```
$(function(){
    $(window).on('mousewheel', function(evt,delta){
        var $block = $('#block'),
            // read current block position
            position = $block.offset(),
            // inverts the delta; scroll up == -1 - scroll down == +1
            direction = -1 * delta,
            // sets the angle and converts it in radians
            angle = 45 * Math.PI / 180,
            // set displacememt factor
            factorX = Math.cos(angle) * direction,
            factorY = Math.sin(angle) * direction,
            // calculate the new position
            newTop = position.top + factorY,
            newLeft = position.left - factorX;

        // moves the block
        $block.offset({ top: newTop, left: newLeft });
    });
}); 
```

在本例中，要更改的是`angle`（本例中为 45）中的值。其他一切都像其他示例一样工作。

最后一件事，如果需要改变运动的*速度*，只需乘以`factorX`和/或乘以`factorY`所需的系数（例如，1.5 表示速度的一倍半，或 2 表示两倍的速度，等等）。

可以在[演示](http://jsfiddle.net/ragnarokkr/4ptTx/)中尝试。

* * *

**编辑**

只是为了知识，您可以使用[CSS Transform](https://developer.mozilla.org/en-US/docs/CSS/transform)达到相同的目标。这使您可以利用 GPU 加速硬件。（更多信息可以在[Smashing Magazine](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)和[Paul Irish](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)的文章中找到）。

**HTML**

```
<div id="block"></div> 
```

**CSS**

```
#block {
    width: 200px;
    height: 150px;
    background-color: red;
    transform: translate3d(0, 0, 0);
} 
```

**JS**

```
$(function(){
    var blockOffsetX = 50,
        blockOffsetY = 200;

    $('#block').css({
        transform: 'translate3d(' + blockOffsetX + 'px' + ', ' + blockOffsetY + 'px, 0)'
    });

    $(window).on('mousewheel', function(evt,delta){
        var $block = $('#block'),
            offset = -1 * delta;
            factorX = 5,
            factorY = 2;

        blockOffsetX -= offset * factorX;
        blockOffsetY += offset * factorY;
        $block.css({ 
            transform: 'translate3d(' + blockOffsetX + 'px, ' + blockOffsetY + 'px, 0)'
        });
    });
}); 
```

但是，正如您在本示例中所见，您需要跟踪元素 X、Y 的位置，因为直接从 CSS 中检索这些值有点复杂。此外，这个例子更简单，但在生产中，您必须支持每个供应商特定的 CSS 属性（`-webkit-`、`-moz-`、`-o-`、`-ms-`等）。

这是一个工作[演示](http://jsfiddle.net/ragnarokkr/JBDSG/)（如果它不起作用，您可能必须根据浏览器的特定前缀 CSS 属性编辑代码）。

* * *

**编辑**：由于 OP 已经看到监听`scroll`事件对他来说是更好的选择，所以我添加了相关代码（*这里只报告了 JS 代码，因为 HTML 和 CSS 与第一个示例几乎相同*）：

```
$(function(){
    var lastScrollYPos = 0;
    $(window).on('scroll', function(){
        var $this = $(this),
            $block = $('#block'),
            // retrieves the top and left coordinates
            position = $block.offset(),
            // X and Y factors allows to change the diagonal movement direction and
            // degree. Negative values inverts the direction.
            factorX = 1,
            factorY = 1,
            // retrieves current vertical scrolling position and calculate the
            // relative offset
            scrollYPos = $this.scrollTop(),
            offset = Math.abs(scrollYPos - lastScrollYPos),
            // mouse wheel delta is inverted respect to the direction, so we need to
            // normalize it against the direction
            direction = scrollYPos > lastScrollYPos ? -1 : 1,
            // calculates the new position. NOTE: if integers only are used for factors,
            // then `Math.floor()` isn't required.
            newTop = position.top + Math.floor(direction * offset * factorY),
            newLeft = position.left - Math.floor(direction * offset * factorX);

        // moves the block
        $block.offset({ top: newTop, left: newLeft });
        lastScrollYPos = scrollYPos;
    });
}); 
```

这是一个工作[演示](http://jsfiddle.net/ragnarokkr/JjxPM/)。

* * *

**奖金：想法**

代替对每个元素使用公共局部变量，HTML5`data-*`属性可以用来存储元素的数据（例如：校正因子、最后位置等），然后`.data()`可以使用 jQuery 方法检索这些数据并处理它们。

亲：

*   将回调函数与元素解耦
*   自定义页面上的每个元素以彼此不同

缺点：

*   它可能会以某种方式影响渲染性能，尤其是是否必须通过回调函数同时管理许多元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T23:02:57.947

您可以使用 onScroll 事件，检测用户是垂直滚动还是水平滚动，然后适当地滚动另一个方向。

例子：

**JS**

```
var lastScrollTop = 0;
$("#diagonalscroller").scroll(function(e) {
    var scrollTop = $(this).scrollTop();    
    if (scrollTop === lastScrollTop) {
        // Vertical scroll position is unchanged, so we're scrolling horizontal.
        $(this).scrollTop($(this).scrollLeft());
    } else {
        // Vertical scroll position has changed, so we're scrolling vertical.
        $(this).scrollLeft($(this).scrollTop());
    }
    lastScrollTop = scrollTop;
}); 
```

**HTML**

```
<h1>Try scrolling using the scrollbars</h1>
<div id="diagonalscroller">
    <img src="http://dummyimage.com/800/" />
</div> 
```

**CSS**

```
#diagonalscroller {
 width: 200px;
 height: 200px;
 overflow: scroll;
} 
```

观看[演示](http://jsfiddle.net/mXwbT/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T15:55:53.217

老问题..但是遇到过这个问题的人可能会喜欢

> > [这支笔](http://codepen.io/pixelass/pen/ozbtL)

这是对角线网页布局的概念。

在这里发布的代码太大了，它可能比 OP 要求的要多。

必须如此发布代码。这是发挥魔力的部分。（使用 Modernizr 进行跨浏览器支持）

```
 var $window = $(window);
  var con = $('#content');
  $window.on('touchmove scroll', function() {
    var winScroll = $window.scrollTop() * -1;
    if (!Modernizr.csstransforms3d && Modernizr.csstransforms) {
      con.css({
        transform: 'translate(' + winScroll + 'px,' + winScroll + 'px)'
      });
    } else if (Modernizr.csstransforms3d) {
      con.css({
        transform: 'translate3d(' + winScroll + 'px,' + winScroll + 'px,0)'
      });
    } else {
      con.css({
        left: winScroll,
        top: winScroll
      });
    }
  }); 
```

# python - 在模型中保存具有默认字段值的 Django ModelForm

> ID：14696242
> 
> 赞同：0
> 
> 时间：2013-02-04T21:46:52.913
> 
> 标签：python, django, django-models, django-forms

我有一个模型`FooModel`，有 2 个字段，默认值 ( `default=xxx`) 并标记为空白 ( `blank=True`)，我创建了一个`ModelForm`( `django.forms.ModelForm`) `FooModel`，现在我想在提交后保存它，所以在我看来，我有以下代码：

```
f = FooForm(request.POST)

if f.is_valid():
  f.save() 
```

问题是，通过这种方式，我从数据库中获得了违规异常，因为未在 html 表单中呈现的字段不会像我期望的那样在 FooForm 实例中自动继承......我怎样才能包含来自原始模型的字段哪些不应该显示给用户？（我不想将它们渲染为隐藏字段！）

到目前为止，我尝试了 2 种方法，都失败了...

1.  在 FooForm 构造函数中指定实例 ( `f = FooForm(request.POST, instance=FooModel())`)

2.  创建一个 FooModel 的实例并手动将自动生成的值分配给表单的数据：

    ```
    i = FooModel()

    f.data.fieldA = i.fieldA

    f.data.fieldB = i.fieldB 
    ```

**更新：**

通过更准确地阅读 django 文档，我以这种方式解决了：

```
if f.is_valid():
  formModel = f.save(commit=False)
  foo = FooModel()
  formModel.fieldA = foo.fieldA
  formModel.fieldB = foo.fieldB
  formModel.save() 
```

但是，老实说，我不满意...我想抽象出这些字段的添加...也许通过使用自定义装饰器...类似于：

```
f = MissingFieldsDecorator(FooForm(request.POST))
f.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:44:15.957

也尝试这里提到的方法[https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:00:04.803

> 如何包含不应向用户显示的原始模型中的字段？

回答你问题的这一部分

```
class FooForm(ModelForm):
    class Meta:
        model = FooModel
        exclude = ('not_displayed_field',) 
```

# android - android raw mp3 资源到原生 android 媒体存储

> ID：14696243
> 
> 赞同：0
> 
> 时间：2013-02-04T21:46:53.347
> 
> 标签：android, mp3, local-storage, android-mediaplayer

我正在尝试将嵌入在我的应用程序中的 mp3 资源保存到 android 设备。这样我以后可以在默认的 android 媒体播放器中播放它。

我可以得到我的资源的输入流没有问题。但我不能让它以默认的 Java 方式保存到设备中。

这两种解决方案似乎都不适合我：

> [如何下载歌曲并将其添加到用户的音乐库？](https://stackoverflow.com/questions/14280308/how-can-i-download-a-song-and-add-it-the-users-music-library)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:27:42.027

首先确保您的应用程序具有适当的权限，包括`android.permission.WRITE_EXTERNAL_STORAGE`

然后，您可以将文件从您的资源复制到 android 设备。这是一个示例代码，**仅用于说明目的**，请根据需要进行更改：

```
private void copyMp3() throws IOException{

// Open your mp3 file as the input stream
InputStream myInput = getAssets().open("your_file.mp3");

// Path to the output file on the device
String outFileName = new File(Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_MUSIC),"your_file.mp3");

OutputStream myOutput = new FileOutputStream(outFileName);

//transfer bytes from the inputfile to the outputfile
byte[] buffer = new byte[1024];
int length;
while ((length = myInput.read(buffer))>0 ){
   myOutput.write(buffer, 0, length);
}

//Close the streams => Better to have it in *final* block
myOutput.flush();
myOutput.close();
myInput.close();

} 
```

媒体扫描仪应自行选择文件（除非该文件夹中有 .nomedia 文件），但如果您想加快该过程，您可以使用您在问题中提到的链接。

# powershell - 如何在使用 Powershell 之间删除一串文本？

> ID：14696245
> 
> 赞同：0
> 
> 时间：2013-02-04T21:47:09.733
> 
> 标签：powershell, html-parsing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:53:23.947

根据您最近的评论，`-replace "<a(.*?)</a>"`应该可以解决问题。

这是示例用法：

```
$tmp = @'
Printer1, <a href="h_product=Q7493A&amp;h_lang=en&amp;h_cc=us&amp;h_tool=prodhomes" onclick="target = new Date().valueOf().toString(); if (window.open) window.open('h_product=Q7493A&amp;h_lang=en&amp;h_cc=us&amp;h_tool=prodhomes',ta‌​rget,'resizable=yes,scrollbars=yes,menubar=yes,location=yes,toolbar=yes,status=ye‌​s'); return false;" id="lnkOtherLink2">Product Support</a> Black Cartridge,91%, Cyan Cartridge,59%, Magenta Cartridge,44%, Yellow Cartridge,24%, Image Transfer Kit,75%, Image Fuser Kit,21%,
'@

$tmp -replace "<a(.*?)</a>", "" 
```

注意正则表达式贪婪限定符 ( `?`)，如果没有它，您将捕获从第一个标记的开头`<a>`到最后一个标记的结尾的所有内容，这可能不是您想要的（取决于整页内容）。

话虽如此，我无法相信 HP 打印机没有 API 来以正确的方式检查碳粉水平。

# eclipse - Git 提交地狱

> ID：14696247
> 
> 赞同：3
> 
> 时间：2013-02-04T21:47:13.940
> 
> 标签：eclipse, git, commit, egit, git-merge

在我们的项目中，我们有 2 个 git 分支，“develop”和“featureBranch”。由于 featureBranch 是从 develop 分支出来的，develop 已经更新了许多提交。现在我想将 featureBranch 合并回开发中。为了测试任何错误，我对 featureBranch 做了一个 rebase 以从开发中提取最新代码，并确定一切都很好，没有错误。现在，我想我想做的是检查开发并将 featureBranch 合并回开发。

截至目前，featureBranch 已签出。

我遇到的问题是，当我尝试结帐开发时，我收到一条错误消息，指出我在 featureBranch 中有未提交的更改会丢失。如果我尝试提交 featureBranch，我会收到一条错误消息，指出没有任何改变，也没有什么可提交的。我尝试对 featureBranch 进行硬重置，但这并没有以任何方式改变或缓解我的情况。如果我对文件进行虚拟更改，例如添加评论，提交仍然告诉我没有要提交的更改。

我似乎被困住了，我完全不知道如何摆脱这个烂摊子。

本质上，我希望 featureBranch 的当前状态成为开发分支的新状态。我想结束 featureBranch 的生命，让一切都回到开发分支。

注意：我正在为 Eclipse 使用 eGit 插件，我更愿意学习使用这个工具来满足我所有的 git 需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T10:55:44.683

这种不一致的行为构成了一个错误，实际上与您的描述相匹配的行为已在最新的 EGit 版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:21:24.863

Git 不会将特定的工作流程强加给您，但您已经迈出了正确的第一步并制定了分支策略。我对您正在使用的插件的确切操作不是很熟悉，但我认为 git 命令或多或少会直接映射到 gui 按钮。要在 Windows 中使用命令行界面：在您的源代码位置打开资源管理器窗口，然后从上下文菜单中选择打开“git bash here”。

首先更新您的功能分支（变基）

```
git checkout featurebranch
git merge develop
git commit 
```

现在功能分支包含对分支开发所做的所有更改。运行所有健全性检查和测试，然后合并回开发：

```
git stash    # Keep the uncommited changes in case you need them later.
git checkout develop
git merge featurebranch    #will be a fast forward merge as everything have been merged in the step above
git commit 
```

*   如果您在签出时遇到问题，则可能是您的工作区中添加的文件也存在于您要签出的分支中。

*   在 Eclipse 中使用 egit 提交时，您必须首先暂存您的更改，打开“git prespecive”并找到您更改的文件，双击它们以将更改移动到暂存更改并提交。

# java - 在 Eclipse 的包资源管理器中突出显示类文件

> ID：14696250
> 
> 赞同：2
> 
> 时间：2013-02-04T21:47:26.483
> 
> 标签：java, eclipse, jakarta-ee, eclipse-plugin, highlighting

我为 Eclipse 开发了一个插件，用于在项目的弹出菜单中添加一个选项。此选项将按名称搜索类，然后在包资源管理器中突出显示该类。我对突出显示部分有疑问。我在文件夹中搜索类，所以我有类路径，但我不知道如何突出显示它。

我试过这个，但我没有得到任何结果：

```
String path = "D:\\Programs\\eclipse\\runtime-EclipseApplication\\tessssst\\src\\testClass.java";

    IPath iPath = new Path(path);
    IFile file = project.getFile(iPath);

    file = ResourcesPlugin.getWorkspace().getRoot().getFileForLocation(iPath);

    ISelection selection = new StructuredSelection(file);

    IViewReference[] views = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().getViewReferences();
    PlatformUI.getWorkbench().getActiveWorkbenchWindow()
    .getActivePage().resetPerspective(); 
    for(IViewReference view:views){
        if("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())){
            IViewPart pExplorer = view.getView(true);
            pExplorer.getViewSite().getSelectionProvider().setSelection(selection);
            break;
        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:02:43.800

您应该使用 JDT API 来获取 CompilationUnit：

```
ICompilationUnit cu = JavaCore.create(file); 
```

然后使用这个 CompilationUnit 对象来设置选择：

```
ISelection selection = new StructuredSelection(cu); 
```

而且，顺便问一下，你为什么要自己开发这个功能？Ctrl+Sihft+T，你可以打开一个对话框来搜索类并在编辑器中打开它。并且包资源管理器有一个“与编辑器链接”工具栏项，可以在活动编辑器中自动选择类。

# mysql - Buggy 加入 CodeIgniter ActiveRecord

> ID：14696254
> 
> 赞同：1
> 
> 时间：2013-02-04T21:47:37.623
> 
> 标签：mysql, codeigniter, activerecord, join, left-join

最近，我再次注意到 CodeIgniter 的 ActiveRecord 库中有一个令人难以置信的逻辑错误。

当我尝试在连接中使用“AND”时，就会出现问题。

示例查询：

```
$this -> db -> join(
    'predict',
    "predict.id_predict = portion.id_predict AND event.id_event = 5",
    'left'
); 
```

结果：

```
LEFT JOIN `predict` ON
    `predict`.`id_predict` = `portion`.`id_predict`
    AND event.id_event = 5 
```

但应该更有可能：

```
LEFT JOIN `predict` ON (
     `predict`.`id_predict` = `portion`.`id_predict`
     AND `event`.`id_event` = 5
) 
```

有什么办法可以防止这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:22:16.943

```
$this->db->join(
    'predict',
    "(predict.id_predict = portion.id_predict AND `event`.`id_event` = 5)",
    'left'
); 
```

你在找这个吗？

**编辑**

```
$this->db->join('predict', "predict.id_predict = portion.id_predict", 'left');
$this->db->where('event.id_event = 5'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T05:53:53.633

也可以使用两次

> $this->db->join(……);
> $this->db->join(……);

通过活动记录进行多个联接。

# ffmpeg - 从 AVFrame 复制一个矩形区域 - ffmpeg

> ID：14696258
> 
> 赞同：1
> 
> 时间：2013-02-04T21:48:03.003
> 
> 标签：ffmpeg, rgb, libav

我正在尝试拉出一个 AVFrame 的矩形区域并开始执行一个功能。我只对使用格式为 PIX_FMT_RGB24 的 AVFrame 感兴趣。我也可能在这里重新发明轮子，所以如果已经有这样做的功能，请加入。到目前为止，我的功能如下所示：

```
AVFrame * getRGBsection(AVFrame *pFrameRGB, const int start_x, const int start_y, const int w, const int h) {

AVFrame *pFrameSect;
int numBytes;
uint8_t *mb_buffer;

pFrameSect = avcodec_alloc_frame();
numBytes = avpicture_get_size(PIX_FMT_RGB24, w, h);
mb_buffer = (uint8_t *) av_malloc(numBytes * sizeof(uint8_t));
avpicture_fill((AVPicture *) pFrameSect, mb_buffer, PIX_FMT_RGB24, w, h);

int curY, curX, i = 0;
for (curY = start_y ; curY < (start_y + h); curY++) {

    for (curX = start_x; curX < (start_x + w); curX++) {

        int curIndex = curX * 3 + curY * pFrameRGB->linesize[0];

        pFrameSect->data[0][i] = pFrameRGB->data[0][curIndex];
        pFrameSect->data[0][i + 1] = pFrameRGB->data[0][curIndex + 1];
        pFrameSect->data[0][i + 2] = pFrameRGB->data[0][curIndex + 2];

        i += 3;

    }

}

return pFrameSect;

} 
```

当我从 (0,0) 开始（我认为）时，该功能似乎有效，但是当我在图像中的其他位置移动时，它输出的颜色与应该存在的颜色相似但不正确。我想我在这里很近，有人可以提供指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:17:49.547

*   有2个选项

    1.  用户视频过滤器（vf_crop）。（filtering_video.c 提供了实际使用裁剪的示例）
    2.  imgconvert.c 中的函数 av_picture_crop()。此功能不完整，但您可以修改它以供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:35:49.483

此代码适用于我（仅 RGB24）

```
#include <libavutil/imgutils.h>

// .....
// left, top
const int crop_left = 500;
const int crop_top = 500;

// output width, height
const int crop_width = 300;
const int crop_height = 200;

AVFrame * rgb24picure;
AVFrame * output;
/// .... initialize ....

const int one_pixel = av_image_get_linesize(PIX_FMT_RGB24, 1, 0);
const int src_line_size = av_image_get_linesize(PIX_FMT_RGB24, source_width, 0);
const int copy_line_size = av_image_get_linesize(PIX_FMT_RGB24, crop_width, 0);

for (int h = crop_top; h < crop_top + crop_height; ++h)
{
    unsigned char * src = rgb24picure->data[0] + src_line_size * h + one_pixel * crop_left;
    unsigned char * dst = output->data[0] + copy_line_size * (h - crop_top);
    memcpy(dst, src, copy_line_size);
} 
```

# javascript - 在 for 循环中声明两个变量

> ID：14696261
> 
> 赞同：34
> 
> 时间：2013-02-04T21:48:06.343
> 
> 标签：javascript

是否可以在 for 循环的初始化部分声明两个变量？我想对字符串的每个字符调用一个函数。

```
for(var i = 0, c = aString.charAt(i); i < aString.length; i++){//problem here: not itterating
    alert("c: "+c)
    func1[typeOfChar(c)]++
} 
```

问题是字符串没有被迭代，因为`c`它始终是字符串的第一个字母。顺便说一句，这`alert`只是为了解决问题。

我很好奇，为什么声明时`c`不需要`var`关键字？

更新：让它工作。我不打算问，但我注意到仍在进行编辑，我习惯于不使用分号，因为它们是可选的。没有它们如何编写 for 循环？我不添加它们是因为我认为它越少越简单，或者它们是否提高了可读性？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-04T21:49:46.240

您想`c`在每次迭代时进行更改，而不是在循环开始时声明它，尝试

```
var i,c;
for(i = 0,c=aString.charAt(0); i < aString.length; ++i, c = aString.charAt(i)){
    alert("c: "+c)
    func1[typeOfChar(c)]++
} 
```

对于它的价值，我认为它不会产生非常可读的代码，我会把它放在第一行。

以下是有关您正在使用[的逗号运算符的一些信息。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)

另请注意，对于 for 循环，javascript 没有块范围，因此您实际上是在当前范围的顶部声明`i`和（这通常是当前函数的顶部，或全局范围的顶部）。`c`

这是一个小提琴：http: [//jsfiddle.net/maWua/](http://jsfiddle.net/maWua/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-01-08T18:22:57.460

在 for 循环中包含多个递增变量而无需嵌套的简单方法。这个例子声明了 3 个变量。

```
for (var i = 0, j = 1, n = 2; i < 50, n < 50; i = i + 3, j = j + 3, n = n + 3){
    console.log("variable i: " + i);
    console.log("variable j: " + j);
    console.log("variable n: " + n);
} 
```

[在此处](https://codepen.io/anon/pen/EZVxGx?editors=1112)查看代码笔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:53:22.413

在这种情况下，因为`c`仅依赖于`i`（和一个不变量）并且它*不*用于循环的条件，我建议将其从循环构造中删除：

```
// (Keep variable hoisting in mind)
for(var i = 0; i < aString.length; i++){
    var c = aString.charAt(i);
    alert("c: "+c);
    // ..
}; 
```

（原来的问题是它*从未更新*过 的值`c`。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T21:56:24.757

您应该只放置`c = aString.charAt(i);`在循环主体内。

例如：

```
for(var i = 0; i < aString.length; i++){
    c = aString.charAt(i);
    alert("c: "+c);
    func1[typeOfChar(c)]++ 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T21:52:08.953

这里：

```
c = aString.charAt(i) 
```

`i`始终为零，因此不会按预期工作。初始化发生一次，当 i 刚刚被初始化为`0`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T21:53:24.103

是的，可以通过使用[multiple`var`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)，并且您成功了。但是，在初始化语句中只分配一次不会使其改变。

您需要在循环之前和每次循环之后执行一次

```
for (var i=0, c=str.charAt(i); i<str.length; c=str.charAt(++i)) … 
```

或者你在每次转入条件之前都这样做

```
for (var i=0, c; c=str.charAt(i), i<str.length; i++) … // comma operator
for (var i=0, c; c=str.charAt(i); i++) … // empty string as condition 
```

或者只是将它移动到循环内

```
for (var i=0, c; i<str.length; i++) { c=str.charAt(i); … } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-21T03:28:14.167

另一种选择是使用`while`，在某些情况下它更清晰：

```
var i = 0;
while(i < aString.length){
   c = aString.charAt(i);
   alert("c: "+c)
   func1[typeOfChar(c)]++
   i++;
} 
```

# c++ - 从不同的文件 cmake 调用一个类

> ID：14696264
> 
> 赞同：0
> 
> 时间：2013-02-04T21:48:16.063
> 
> 标签：c++, makefile, cmake

例如，我正在编写一个库： FooBar/foobar.cpp FooBar/foobar.h FooBar/bar.cpp FOoBar/bar.h

和 foobar.h 包括“bar.h”

我想使用 cmakefiles 来构建这个库。

示例文件是什么样的

请注意，这没有任何“主要”功能，因此我没有要创建的可执行文件。我只想构建一个可以包含在不同项目中的库。

我尝试了不同的排列和组合

但是在每次尝试中我都会在 FooBar 中抛出一个错误，我试图从 bar.cpp 调用一个方法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:36:58.203

```
cmake_minimum_required(VERSION 2.8.10)
project(FooBar)
add_library(FooBar FooBar/foobar.cpp FooBar/foobar.h FooBar/bar.cpp FooBar/bar.h)
# this will create a library called FooBar that will have the code from foobar.cpp and bar.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:04:38.217

谷歌搜索 10 秒后，我发现[了这个有用的网站。](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)

您的生成文件应如下所示：

```
obj/bar.o : FooBar/bar.cpp FooBar/bar.h
    g++ -c FooBar/bar.cpp -o obj/bar.o

libbar.a : obj/bar.o
    ar rcs libbar.a obj/bar.o 
```

然后你可以将 libbar.a 链接到你的程序

# php - ajaxSubmitButton 在 Linux 服务器上不起作用

> ID：14696270
> 
> 赞同：0
> 
> 时间：2013-02-04T21:49:05.667
> 
> 标签：php, javascript, ajax, yii

下面是一个 ajaxSubmitButton，它可以在 mac 上工作，但不能在 linux 服务器上工作。在 linux 服务器错误控制台上显示此错误：SyntaxError: missing } after property list

```
<?php
     echo CHtml::ajaxSubmitButton(
        '',          
        array('/modelA/action'), 
        array(
            'type'=>'POST',
            'success' => 'js:function(){window.location="/modelB/action"}',
        ),
        array(
            'id'=>'button',
        )
    ); 
?> 
```

当我从 Firebug 或错误控制台复制错误时，我得到这个：

语法错误：属性列表后缺少 } [https://www.mysite.com/assets/95062282/jquery.ba-bbq.js](https://www.mysite.com/assets/95062282/jquery.ba-bbq.js) 第 853 行

Firebug 看起来像这样：

![在此处输入图像描述](../Images/3c8ae118b4adeef19ba49ed4bad7e6f8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:17:01.263

您需要删除代码中的 'js:' 部分（在函数之前），然后它应该可以工作

所以它看起来像这样：

```
<?php
     echo CHtml::ajaxSubmitButton(
        '',          
        array('/modelA/action'), 
        array(
            'type'=>'POST',
            'success' => 'function(){window.location="/modelB/action"}',
        ),
        array(
            'id'=>'button',
        )
    ); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:51:49.317

```
array(
        'id'=>'button',
                      ^--- 
```

悬空的逗号是许多 JS 问题的根源。

# nmea - 我应该使用哪个 NMEA 句子

> ID：14696275
> 
> 赞同：6
> 
> 时间：2013-02-04T21:49:27.937
> 
> 标签：nmea

我正在使用的 GPS 输出多个 NMEA 语句，可用于定位数据。（GPGGA 和 GPRMC）。我有理由使用一个而不是另一个吗？我应该检查它们并比较数据吗？我可以随便挑一个来用吗？

在这一点上，我只对纬度/经度和时间感兴趣。

如果不清楚我在问什么，请告诉我，我会尽力澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:46:49.417

两者中的数据将相同。如果不是，则与发送消息的时间有关。

发送它们的原因是为了兼容性，并且因为它们确实包含某些字段的不同数据。如果您只需要纬度/经度和时间，那么任何一个句子都可以。我会选择 GPRMC，因为所有 NMEA GPS 单元都应该发送这句话。

# .net - 通过 Svcutil.exe 在服务引用上设置代理身份验证

> ID：14696276
> 
> 赞同：1
> 
> 时间：2013-02-04T21:49:30.800
> 
> 标签：.net, wcf, svcutil.exe

正如标题所示，我想在通过 svcutil.exe 创建代理服务时设置我的代理身份验证凭据。如您所知，通过 VS2010（添加服务引用）添加服务引用时，我们无法设置代理凭据。

我在一些博客上读到，这可以通过直接通过 svcutil.exe 创建代理服务来实现，因为 VS2010 无论如何都会使用它。我试图在上面创建服务，但这是不可能的。即使通过 svcutil 创建，我仍然收到 Proxy Authentication Required 错误。我也尝试修改 svcutil.exe.config`<proxy usesystemdefault="True" bypassonlocal="True"/>`但我也没有工作。

[在这里](http://kjellsj.blogspot.com.br/2008/07/wcf-svcutil-proxy-problems.html)阅读我尝试在我的应用程序 web.config 上设置以下内容：

```
<system.net>
    <defaultProxy useDefaultCredentials="true" >
      <proxy usesystemdefault="True" proxyaddress="http://xxxxx:****" bypassonlocal="True"/>
      <bypasslist>
        <add address=".+\.xxxx\.com:\d{1,5}" />
      </bypasslist>
    </defaultProxy>
  </system.net> 
```

并创建服务，但错误再次存在。因为我已经尝试了我所知道的一切，所以我的选择有点少。

**问题**

那么，您知道在创建服务代理时如何设置代理身份验证凭据吗？

# foreign-keys - 实体框架代码优先：具有两个外键的表

> ID：14696279
> 
> 赞同：0
> 
> 时间：2013-02-04T21:49:42.507
> 
> 标签：foreign-keys, code-first, entity-framework-5

```
 public class User
    {
        [Key]
        public int UserId { get; set; }
        public string UserName { get; set; }
    }

public class Building
    {
        [Key]
        public int BuildingId { get; set; }
        public string BuildingName { get; set; }
    }

 public class UserBuildings
    {
        //these are the foreign keys
        public int UserId { get; set; }
        public int BuildingId { get; set; }
        public int BuildingQuantity { get; set; }
    } 
```

我一直在用两个伪造键查看其他示例，但它们似乎没有回答我的问题。

在 UserBuildings 表中，UserId 和 BuildingId 都需要使 UserBuildings 表中的记录唯一。（不会有两条记录具有相同的 UserId 和 BuildingId，尽管它们可能具有相同的一条）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:52:50.027

这应该这样做

```
 public class UserResources
    {
        [Key, Column(Order=0)]
        public int UserId { get; set; }
        [Key, Column(Order=1)]
        public int BuildingId { get; set; }
        public string BuildingName { get; set; }
    } 
```

# ruby-on-rails - 在 Rails 的 routes.rb 中匹配带有斜杠的 URL

> ID：14696281
> 
> 赞同：1
> 
> 时间：2013-02-04T21:50:00.643
> 
> 标签：ruby-on-rails, url-routing

有没有办法根据请求 URL 是否有斜杠在 Rails 的 routes.rb 中执行不同的路由？这似乎很困难，因为请求对象的尾部斜杠被删除，这意味着 http://www.example.com/about/ 的 GET 具有[http://www.example.com/about](http://www.example.com/about)[的](http://www.example.com/about/)request.url 值。这种行为会阻止使用[基于请求的约束](http://guides.rubyonrails.org/routing.html#request-based-constraints)以及[route-globbing](http://guides.rubyonrails.org/routing.html#route-globbing)进行匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:00:06.810

我发现的一种解决方案是使用 request.env["REQUEST_URI"]，其中包含随请求提交的原始 URL。不幸的是，由于它不是请求的直接字符串属性，因此需要[自定义匹配对象](http://guides.rubyonrails.org/routing.html#advanced-constraints)：

```
class TrailingSlashMatcher
  def matches?(request)
    uri = request.env["REQUEST_URI"]
    !!uri && uri.end_with?("/")
  end
end

AppName::Application.routes.draw do
  match '/example/*path', constraints: TrailingSlashMatcher.new, to: redirect("/somewhere/")
end 
```

这似乎有点矫枉过正，所以希望有人有更优雅的方法。

# ruby - Ruby 动态对象属性，发送 vs 实例变量集

> ID：14696284
> 
> 赞同：5
> 
> 时间：2013-02-04T21:50:06.383
> 
> 标签：ruby, metaprogramming

假设我有一个简单的对象。我有`attr_accessor`我想要接受的属性，并且我希望能够用对象的散列进行初始化：

```
class Example
  attr_accessor :foo, :bar

  def initialize( attributes = {} )
    attributes.each do |k,v|
      ...
    end
  end
end 
```

在上面的 attributes.each 块中，最好使用`send`，如下所示：

```
send "#{k}=", v 
```

或使用`instance_variable_set`，像这样：

```
instance_variable_set "@#{k}".to_sym, v 
```

...或者完全做其他事情？

我能想到的区别是：

*   如果在某些时候我用 setter 方法替换了其中一个，则使用`send`会更加一致。`attr_accessors`

*   如果传递了意外的值，使用`send`会引发`NoMethodError`

`send`由于这些原因，我倾向于- 我实际上有点喜欢`NoMethodError`因虚假初始化数据而被提出的可能性。但是，我在这里是否忽略了其他任何因素，尤其是性能和安全考虑？

我很欣赏任何见解。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:54:21.077

我的答案是使用发送。

原因：即使访问器不存在，也会使用 instance_variable_set 创建实例变量。正如你所提到的，使用 send 你会得到一个 NoMethodError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-26T11:22:34.043

您可以使用`try`而不是`send`. `send`如果没有找到方法将返回 NoMethod 错误，如果没有找到方法`try`将返回*nil*。`try`不能用于实例方法。

**例子：**

```
# k is a string or symbol, v a parameter value

try(k)
#=> nil

try(k, v)
#=> nil 
```

但是实例变量应该使用方法设置或读取，`instance_variable_set`并且`instance_variable_get`

**例子**

```
# k is a string or symbol, v a value
instance_variable_set("@#{k}", v)
instance_variable_get("@#{k}") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-26T11:58:07.530

通常的做法是使用发送。

首先，`instance_variable_set`会创建很多额外的实例变量。

然后，发送使用访问器方法。重新定义 attr 访问器之一时非常有用，例如：

```
attr_accessor :foo

def bar=
  # something's happening here
end 
```

为了避免`NoMethodError`你应该使用`respond_to?`方法：

```
attributes.each do |k, v|
  send("#{k}=", v) if respond_to?(k)
end 
```

也可以在手动初始化或使用 gems 之前裁剪额外的属性，例如`gem 'strong_parameters'`

# facebook - 在企业帐户下创建的无法访问的 Facebook 应用程序

> ID：14696286
> 
> 赞同：0
> 
> 时间：2013-02-04T21:50:19.810
> 
> 标签：facebook, facebook-graph-api, facebook-apps, user-accounts

当我以企业帐户登录时尝试访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)时，它会将我重定向回我的主页，并且不会让我访问我们之前在我们的帐户下创建的应用程序。

我们通过转到 Graph API Explorer 并从下拉列表中选择我们的应用程序来验证该应用程序是否存在于企业帐户中。

在检查了 stackoverflow 的类似问题后，我们发现了这个：[Creating and manage a Facebook app from a Business Account](http://facebook.stackoverflow.com/questions/10805745/creating-and-managing-a-facebook-app-from-a-business-account)。

我们的案例中有这个“错误或漏洞”。我们有一个企业帐户，其中包含在某些时候我们无法再访问的应用程序。我们需要帮助将应用程序迁移到经过验证的个人帐户。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:07:38.897

如果您的帐户未被禁用，您将无法访问禁用帐户申诉表。这个问题发生在我身上。由于我们是一个城市的游客局，我们只能访问我们的页面（访问夏安），而不是我们的商业帐户（夏安怀俄明）。所以，我们无法访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

# facebook-apps - 错误应用程序域：bryght.com 不是有效域。站点 URL 不是有效的 URL

> ID：14696290
> 
> 赞同：0
> 
> 时间：2013-02-04T21:50:44.630
> 
> 标签：facebook-apps

我正在尝试创建一个 Facebook 应用程序，但出现以下错误：

错误应用程序域：bryght.com 不是有效域。站点 URL 不是有效的 URL。

![应用程序创建错误](../Images/5d70efe6d305307e47b212500e39d06b.png)

此外，当我尝试发布有关此问题的错误时，我声称该内容已被 Facebook 阻止。

![在此处输入图像描述](../Images/093cba5ae343d7f2bcd1d1f02e7f1e3a.png)

有没有办法获得这方面的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:29:21.033

我通过联系 Facebook 支持并与他们合作解决了这个问题。在解决之前，我在 Support 和 Me 之间进行了一些反复。我认为 Facebook 端存在一些问题。

# xml - XML字符串如何添加换行符

> ID：14696292
> 
> 赞同：0
> 
> 时间：2013-02-04T21:50:49.607
> 
> 标签：xml

我到底要向这个 XML 添加什么来添加在每个返回的记录之后重复出现的换行符？

```
while($ors = mysql_fetch_array($result)) 
{
$strXML .= "<set label='".$ors['Fund_Name']."' value='".$ors['Fund_Yield_Percent']."' />";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:59:15.807

尝试在字符串的 and 中添加 \r\n 或 \n，就在 "

# javascript - mapbox.js 上的自动完成输入

> ID：14696299
> 
> 赞同：1
> 
> 时间：2013-02-04T21:51:03.470
> 
> 标签：javascript, css, map, mapbox

我最近发现了我想在我的网站上实现的mapbox.js ( [http://mapbox.com/ )。](http://mapbox.com/)实现非常简单，但我遇到了几件事： 1\. 我想要一个带有匹配位置的自动完成输入并让地图转到那个位置。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-21T22:47:12.463

自从@tmcw 回复以来，也许会对此进行更新。

[自 v2.1.0 起添加了](https://github.com/mapbox/mapbox.js/issues/264#issuecomment-56456781)自动完成功能（当前稳定版为 v2.1.4）。

[您可以在此处查看](https://www.mapbox.com/mapbox.js/example/v1.0.0/geocoding-auto/)如何使用它的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T00:57:09.197

MapBox.js 中尚未实现自动完成功能：[这是实现它的票证](https://github.com/mapbox/mapbox.js/issues/264)。

# html - 使用谷歌工具缩小后的css图像链接

> ID：14696304
> 
> 赞同：0
> 
> 时间：2013-02-04T21:51:14.327
> 
> 标签：html, css, image, hyperlink, minify

我在 css 文件中的图像链接有问题，顺便说一句，如果这会导致问题，我使用[google minify 工具？](http://code.google.com/p/minify/)

我像这样在css中使用图像：

```
background: url('../images/image.png'); 
```

并且图片没有显示在网站上，因为地址是：

```
http://domain.com/domain.com/public/images/image.png 
```

正确的链接应该是：

```
http://domain.com/public/images/image.png 
```

domain.com 是我托管的文件夹，所以它添加了该文件夹，我该如何解决这个问题？

这是**.htaccess**代码：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{HTTP_HOST} !^domain.com$ [NC]
    RewriteRule ^(.*)$ http://domain.com/$1 [L,R=301]
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|images|robots\.txt|css)
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule>

<IfModule mod_expires.c>
    # Enable expirations
    ExpiresActive On

    # My favicon
    ExpiresByType image/x-icon "access plus 1 year”

    # Images
    ExpiresByType image/gif "access plus 7 days"
    ExpiresByType image/png "access plus 7 days"
    ExpiresByType image/jpg "access plus 7 days"
    ExpiresByType image/jpeg "access plus 7 days"

    # CSS
    # ExpiresByType text/css "access plus 7 days"

    # Javascript
    ExpiresByType application/javascript "access plus 7 days"
</IfModule>

<IfModule mod_headers.c>
    Header append Cache-Control "public"
</IfModule> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:11:22.413

找到解决方案。在 /min/config.php 添加这一行：

```
$min_serveOptions['rewriteCssUris'] = false; 
```

对不起。

# javascript - 从 Rails 的 /lib 目录设置 gon 变量

> ID：14696307
> 
> 赞同：0
> 
> 时间：2013-02-04T21:51:28.933
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我试图弄清楚如何使用'gon' gem 在我的 Rails 应用程序的 /lib 文件中设置 gon.variable。出于某种原因，当我在控制器中设置变量时它似乎工作 - 但不是在 /lib 文件中 - 即使我`require 'gon'`在 /lib 文件中使用。

是否可以从 /lib 目录定义 gon.variable？如果是这样，我该怎么做？

# rest - Kinvey 的 REST API 中如何存储和查询日期值？

> ID：14696319
> 
> 赞同：1
> 
> 时间：2013-02-04T21:52:12.937
> 
> 标签：rest, date, between, kinvey

kinvey 似乎不支持特定的日期类型。

那么应该如何存储日期才能在某些日期之间进行查询呢？

我对在他们的 REST 平台上实现这一点特别感兴趣。

这个 mocha 测试似乎通过了，但是，我担心它们是按字母顺序过滤的，这可能会导致一些我还没有想到的边缘情况。

（请注意，我已抽象为通用模块的 mocha 测试缺少样板）

```
describe(kinvey.description, function () {
    it('query between two dates', function (done) {
        var query = 'query={"date_of_birth":{"$gt" : "1948-01-01", "$lt" : "1948-08-19"}}&sort=last_name'
        kinvey.get('/appdata/' + kinvey.appKey + '/static?' + query, function (response, body) {
            assert.equal(body.length, 1)
            //john bonham
            assert.equal(body[0].first_name, 'John')
            assert.equal(body[0].last_name, 'Bonham')
            done()
        })
    })
}) 
```

这是我正在玩的测试数据。

![示例数据](../Images/53babdaaf22742c90a3ab73d459cf7a4.png)

（有足够声望点的人可以添加一个Kinvey标签吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:31:59.213

我是 Kinvey 工程团队的一员。只要您的日期采用 ISO-8601 格式 ( [https://en.wikipedia.org/wiki/ISO_8601](https://en.wikipedia.org/wiki/ISO_8601) )，日期就会正确查询。如果日期未与所有数字一起存储，则会出现边缘情况。

例子：

2012-02-08 将正确排序和查询，但 2012-2-8 不会。

只要日期采用这种格式，查询过滤器（如以下）就可以正常工作。

```
{"date_of_birth":{"$gt" : "1948-01-01", "$lt" : "1948-08-19"}} 
```

# c - 在 Mac OSX 上的 Assembly (x86-64) 和 C 文件中链接 printf 和 scanf 时出现问题

> ID：14696320
> 
> 赞同：3
> 
> 时间：2013-02-04T21:52:15.570
> 
> 标签：c, macos, assembly, printf, nasm

我在 Assembly (x86-64) 中编写了一个程序，并从 C 文件包装器中调用它以同时使用 printf 和 scanf 函数。但是，当我尝试链接它时，出现以下错误：

```
$ nasm -f macho64 -l Parallelograms.lis -o assembly.o Parallelograms.asm
$ gcc -c -Wall -m64 -o main.o ParallelogramDriver.c
$ gcc -m64 -o main.out main.o assembly.o
Undefined symbols for architecture x86_64:
  "_calcAndPrint", referenced from:
      _main in main.o
  "printf", referenced from:
      calcAndPrint in assembly.o
  "scanf", referenced from:
      calcAndPrint in assembly.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我相信这与 macho64 标志有关。如果我使用 elf64 它不会捕获 printf 或 scanf 错误。但是 elf64 在 Mac 上是一种不兼容的文件格式（据我所知）。

这是我的 C 文件（ParallelogramDriver.c）：

```
#include <stdio.h>
#include <stdint.h> //For C99 compatability

extern int calcAndPrint();

int main(int argc, char* argv[])
{
    //Run Assembly Code
    calcAndPrint();

    return 0;
} 
```

最后是我的汇编代码（Parallelograms.asm）：

```
;==== Begin code area ====
extern printf                                       ;External C function for output
extern scanf                                        ;External C function for input
extern sin                                          ;External C function for sin math function

segment .data                                       ;Place initialized data in this segment

    stringData db "%s", 10, 0
    input1 db "Enter the length of one side of the parallelogram: ", 0
    input2 db "Enter the length of the second side of the parallelogram: ", 0
    input3 db "Enter the size in degrees of the included angle: ", 0

    floatOutput db "You entered: %5.2Lf", 0         ;Don't forget the uppercase L

    floatData db "%Lf", 0

segment .bss                                        ;Place uninitialized data in this segment

    ;Currently this section is empty

segment .text                                       ;Place executable statements in this segment

    global calcAndPrint

calcAndPrint:                                       ;Entry Point Label.

;==== Necessary Operations! Do not remove!
    push        rbp                                 ;Save a copy of the stack base pointer !IMPORTANT
    push        rdi                                 ;Save since we will use this for our external printf function
    push        rsi                                 ;Save since we will use this for our external printf function

;==== Enable Floating Point Operations
    finit                                           ;Reset pointers to st registers; reset control word, status word, and tag word.

;============ INPUT 1 ==============
;==== Ask for first input
    mov qword   rax, 0                              ;A zero in rax indicates that printf receives standard parameters
    mov         rdi, stringData
    mov         rsi, input1
    call        printf

;==== Grab input from Keyboard
    mov qword  rax, 0                               ;A zero in rax indicates that printf receives standard parameters
    mov        rdi, floatData                       ;Tell scanf to accept a long float as the data input
    push qword 0                                    ;8 byes reserved. Need 10 bytes
    push qword 0                                    ;Another 8 bytes reserved for a total of 16 bytes
    mov        rsi, rsp                             ;rsi now points to the 16 bytes we have open. (rsp = Stack Pointer)
    call       scanf                                ;C now uses the scanf function

;==== Copy 10 byte number into Float space
    fld tword  [rsp]                                ;Load Float space and push rsp into the float stack. (braquests de-reference)

;============ INPUT 2 ==============
;=== Ask for second input
    mov qword   rax, 0                              ;A zero in rax indicates that printf receives standard parameters
    mov         rdi, stringData
    mov         rsi, input2
    call        printf

;==== Grab input from Keyboard
    mov qword  rax, 0                               ;A zero in rax indicates that printf receives standard parameters
    mov        rdi, floatData                       ;Tell scanf to accept a long float as the data input
    push qword 0                                    ;8 byes reserved. Need 10 bytes
    push qword 0                                    ;Another 8 bytes reserved for a total of 16 bytes
    mov        rsi, rsp                             ;rsi now points to the 16 bytes we have open. (rsp = Stack Pointer)
    call       scanf                                ;C now uses the scanf function

;==== Copy 10 byte number into Float space
    fld tword  [rsp]                                ;Load Float space and push rsp into the float stack. (braquests de-reference)

;============ INPUT 3 ==============
;=== Ask for third input
    mov qword   rax, 0                              ;A zero in rax indicates that printf receives standard parameters
    mov         rdi, stringData
    mov         rsi, input3
    call        printf

;==== Grab input from Keyboard
    mov qword   rax, 0                              ;A zero in rax indicates that printf receives standard parameters
    mov         rdi, floatData                      ;Tell scanf to accept a long float as the data input
    push qword  0                                   ;8 byes reserved. Need 10 bytes
    push qword  0                                   ;Another 8 bytes reserved for a total of 16 bytes
    mov         rsi, rsp                            ;rsi now points to the 16 bytes we have open. (rsp = Stack Pointer)
    call        scanf                               ;C now uses the scanf function

;==== Copy 10 byte number into Float space
    fld tword  [rsp]                                ;Load Float space and push rsp into the float stack. (braquests de-reference)

;============ TEMP ==============

;============ Output ==============
    mov qword   rax, 0
    mov         rdi, floatOutput
    mov qword   rax, 1                              ;Important for floats??!
    push qword  0                                   ;8 bytes reserved
    push qword  0                                   ;16 bytes reserved
    fstp tword [rsp]                                ;Pop the fp number from the FP stack into the storage at [rsp]
    call       printf

;============ Restore Registers ============
    pop rsi
    pop rdi
    pop rbp                                         ;Restore base pointer

;==== Time to exit this function ====
;Prepare to exit from this function
    mov qword rax, 0                                ;A zero in rax is the code indicating a successful execution.
    ret                                             ;ret pops the stack taking away 8 bytes

;==== End of function calcAndPrint ==== 
```

为混乱的代码道歉。这是我的第一个汇编代码程序，我对它很陌生。我正在 Mac OSX 上开发，据我所知，这是 Mac OSX 特定的问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T21:55:00.253

在 OS X 上，符号以下划线为前缀。

```
call        printf 
```

和

```
call        scanf 
```

需要

```
call        _printf 
```

和

```
call        _scanf 
```

分别; 还

```
global calcAndPrint 
```

和

```
calcAndPrint: 
```

应该读

```
global _calcAndPrint 
```

和

```
_calcAndPrint: 
```

反而。

`calcAndPrint()`（但是，嘿，您可以从您的函数被符号化为的事实推断出这一点`_calcAndPrint`）。

# php - 支付宝“授权失败”

> ID：14696322
> 
> 赞同：3
> 
> 时间：2013-02-04T21:52:43.980
> 
> 标签：php, paypal

（这是我第一次使用 PayPal API，所以请多多包涵。）

我正在尝试使用 BMCreateButton API 动态创建加密按钮，使用[此页面](https://www.x.com/developers/community/blogs/ppmacole/encrypting-your-buttons-through-paypal-api-php-using-soap)中稍作修改的代码。不幸的是，我似乎无法正常工作，因为我在 PHP 错误日志中收到“身份验证/授权失败”消息。（我也在 PayPal 开发者论坛上问过这个问题，但没有得到答案。）

这段代码：

```
function createButton($name, $price) {
    // Check to make sure that our version of PHP supports SOAP.
    if((PHP_VERSION_ID < 50101) || !in_array("soap", get_loaded_extensions())) {
        error_log("PHP not running with SOAP");
    } else {
        include_once("config.php"); //this file holds the credentials and whether it's running in sandbox mode or not
        //basic variable validation
        $price = floatval($price);

        // Import the PayPal WSDL.
        $location = $sandbox ? "https://api-3t.sandbox.paypal.com/2.0/" : "https://api-3t.paypal.com/2.0/";
        $soapClient = new SoapClient("https://www.paypalobjects.com/wsdl/PayPalSvc.wsdl", array(
            location => $location
        ));

        // Set our API credentials.
        $credentials->Credentials->Username = $username;
        $credentials->Credentials->Password = $password;
        $credentials->Credentials->Signature = $signature;
        $soapClient->__setSoapHeaders(new SoapHeader("urn:ebay:api:PayPalAPI", "RequesterCredentials", $credentials));

        // Start creating our BMCreateButtonReq object.  For full details about this object, see
        // http://tinyurl.com/3mxau6j .
        $BMCreateButtonReq->BMCreateButtonRequest->Version = "71.0";

        $BMCreateButtonReq->BMCreateButtonRequest->ButtonCode = "ENCRYPTED";

        // What type of button are we creating?
        $BMCreateButtonReq->BMCreateButtonRequest->ButtonType = "CART";

        // Specific variables for this button.  For the full list of options, see
        // http://tinyurl.com/6qyanl .  For a basic payment, these two should be enough.

        $BMCreateButtonReq->BMCreateButtonRequest->ButtonVar[] = "amount=$price";
        $BMCreateButtonReq->BMCreateButtonRequest->ButtonVar[] = "item_name=$name";

        // Run the API call.
        $response = $soapClient->BMCreateButton($BMCreateButtonReq);

        if($response->Ack == "Success" || $response->Ack == "SuccessWithWarning") {
            // If successful, the button code will be in the Website element of $response.
            // It'll be a full HTML form, so don't wrap it in any <form> tags -- just
            // display it as-is.
            echo $response->Website;
        } else {
            error_log("Could not create PayPal button. " . serialize($response->Errors));
            echo "<p class=\"note\">Cannot create button</p>";

        }
    }
} 
```

在错误日志中给出：

```
Could not create PayPal button. O:8:"stdClass":4:{s:12:"ShortMessage";s:35:"Authentication/Authorization Failed";s:11:"LongMessage";s:49:"You do not have permissions to make this API call";s:9:"ErrorCode";s:5:"10002";s:12:"SeverityCode";s:5:"Error";} 
```

我检查了凭据，它们是正确的，但沙盒和实时 API 都失败了。我是否遗漏了一些基本的东西，或者我可能忽略了代码中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:28:36.400

我记得这个！

`$username`、`$password`和是否`$signature`在函数内部定义？如果没有，则需要`global $username, $password, $signature`在函数顶部添加。

# android - 是否可以使用 android.graphics.Path 绘制点

> ID：14696325
> 
> 赞同：2
> 
> 时间：2013-02-04T21:52:49.247
> 
> 标签：android

我正在基于 FingerPaint API 演示示例编写简单的 android 应用程序以在屏幕上绘图。在演示中，仅当手指在 TOUCH_TOLERANCE 定义的屏幕上移动了一定距离后才开始绘图。即使用户不移动手指，我也想画一个点。可能吗？

```
 @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        //mPath.lineTo(x + 1, y + 1); //quick fix
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:30:02.867

对的，这是可能的。只需将**1**添加到**x**或**y** 就像这样

```
//Create a dot
path.setLastPoint(x, y);
x++;
path.lineTo(x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-12T08:58:05.427

添加一个小圆圈看起来更好，但是如果在路径中添加很多圆圈，则绘制时会花费更多时间：

```
path.addCircle(x, y, 1, Path.Direction.CCW); 
```

因此，在该点周围添加一个小矩形就可以了：

```
path.addRect(x - 0.5f, y - 0.5f, x + 0.5f, y + 0.5f, Path.Direction.CCW); 
```

# javascript - 根据属性将对象数组分解为单独的数组

> ID：14696326
> 
> 赞同：68
> 
> 时间：2013-02-04T21:52:49.590
> 
> 标签：javascript, jquery, arrays, object, underscore.js

假设我有一个这样的数组：

```
var arr = [
    {type:"orange", title:"First"},
    {type:"orange", title:"Second"},
    {type:"banana", title:"Third"},
    {type:"banana", title:"Fourth"}
]; 
```

我希望将其拆分为具有相同类型对象的数组，因此：

```
[{type:"orange", title:"First"},
{type:"orange", title:"Second"}]

[{type:"banana", title:"Third"},
{type:"banana", title:"Fourth"}] 
```

但我想一般地这样做，所以没有指定橙色或香蕉的 if 语句

```
// not like this
for (prop in arr){
    if (arr[prop] === "banana"){
       //add to new array
    }
} 
```

想法？JQuery 和 Underscore 都是可以使用的选项。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-04T22:05:28.920

这是一项简单的工作[`Array.reduce(...)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
function groupBy(arr, property) {
  return arr.reduce(function(memo, x) {
    if (!memo[x[property]]) { memo[x[property]] = []; }
    memo[x[property]].push(x);
    return memo;
  }, {});
}

var o = groupBy(arr, 'type'); // => {orange:[...], banana:[...]}
o.orange; // => [{"type":"orange","title":"First"},{"type":"orange","title":"Second"}]
o.banana; // => [{"type":"banana","title":"Third"},{"type":"banana","title":"Fourth"}] 
```

当然，如果您的目标浏览器不支持 ECMAScript 262 第 5 版，那么您必须自己实现“reduce”，或者使用 polyfill 库，或者选择其他答案。

**[更新]**这是一个适用于任何版本的 JavaScript 的解决方案：

```
function groupBy2(xs, prop) {
  var grouped = {};
  for (var i=0; i<xs.length; i++) {
    var p = xs[i][prop];
    if (!grouped[p]) { grouped[p] = []; }
    grouped[p].push(xs[i]);
  }
  return grouped;
} 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-02-04T22:08:22.920

> JQuery 和 Underscore 都是可以使用的选项。

[下划线`groupBy`](http://underscorejs.org/#groupBy)正是您所需要的。

```
_.groupBy(arr, "type") 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-04T22:03:10.177

这假设一个对象数组：

```
function groupBy(array, property) {
    var hash = {};
    for (var i = 0; i < array.length; i++) {
        if (!hash[array[i][property]]) hash[array[i][property]] = [];
        hash[array[i][property]].push(array[i]);
    }
    return hash;
}

groupBy(arr,'type')  // Object {orange: Array[2], banana: Array[2]}
groupBy(arr,'title') // Object {First: Array[1], Second: Array[1], Third: Array[1], Fourth: Array[1]} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-04T22:04:02.393

只需构建一个字典，根据它们的标题保存对象。你可以这样做：

js

```
var arr = [
{type:"orange", title:"First"},
 {type:"orange", title:"Second"},
 {type:"banana", title:"Third"},
 {type:"banana", title:"Fourth"}
];
var sorted = {};
for( var i = 0, max = arr.length; i < max ; i++ ){
 if( sorted[arr[i].type] == undefined ){
  sorted[arr[i].type] = [];
 }
 sorted[arr[i].type].push(arr[i]);
}
console.log(sorted["orange"]);
console.log(sorted["banana"]); 
```

jsfiddle 演示：http: [//jsfiddle.net/YJnM6/](http://jsfiddle.net/YJnM6/)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-03-24T16:59:08.603

ES6 解决方案：

```
function groupBy(arr, property) {
  return arr.reduce((acc, cur) => {
    acc[cur[property]] = [...acc[cur[property]] || [], cur];
    return acc;
  }, {});
} 
```

或完全 ES6fy：

```
const groupBy = (arr, property) => {
    return arr.reduce((acc, cur) => {
      acc[cur[property]] = [...acc[cur[property]] || [], cur];
      return acc;
    }, {});
} 
```

我希望它有帮助！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-12-05T12:38:18.773

打字稿版本。

```
/**
* Group object array by property
 * Example, groupBy(array, ( x: Props ) => x.id );
 * @param array
 * @param property
 */
export const groupBy = <T>(array: Array<T>, property: (x: T) => string): { [key: string]: Array<T> } =>
  array.reduce((memo: { [key: string]: Array<T> }, x: T) => {
    if (!memo[property(x)]) {
      memo[property(x)] = [];
    }
    memo[property(x)].push(x);
    return memo;
  }, {});

export default groupBy; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-16T11:10:41.650

您也可以使用 [https://lodash.com/docs/4.17.15#groupBy](https://lodash.com/docs/4.17.15#groupBy)

它将为您服务

# javascript - 对象 someUrl#someHash 没有方法“包含”

> ID：14696328
> 
> 赞同：0
> 
> 时间：2013-02-04T21:52:54.960
> 
> 标签：javascript, google-chrome, dom

以下代码在 Chrome 中给了我一个错误。似乎`window.location.href`没有返回字符串，但这似乎很疯狂。

这是代码：

```
var theUrl = "" + window.location.href;
var hashValue = theUrl.contains("#") ? theUrl.split('#')[1] : null; (This is line 6) 
```

这会在 Chrome 中返回以下错误：

```
Uncaught TypeError: Object someUrl#someHash has no method 'contains' myFile.js:6

(anonymous function) faq.js:6
k jquery.min.js:2
l.fireWith jquery.min.js:2
p.extend.ready jquery.min.js:2
D 
```

有任何想法吗？

编辑：也尝试`document.URL`无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:11:40.363

目前该`String.contains`方法似乎仅受 Firefox 19 支持

[String.contains - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/contains)

该页面还提到了与 MooTools 的一些不兼容性，可能与您的问题有关。暂时你可以像这样检索哈希值

```
var hashValue = window.location.hash.substr(1) || null; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T22:17:52.147

`.indexOf`也可能有用，而不是`.contains`

```
hashValue = theUrl.indexOf('#') > -1 ? ... : ...; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:19:50.503

字符串对象没有名为“contains”的函数，但是您可以使用“indexOf”函数，如果在目标字符串中找到您感兴趣的字符串，则返回值 >= 0，否则返回 -1。

还有一条评论：您可以使用 window.location.hash 获取哈希值，因此您无需执行上述操作，而是需要执行以下操作：

var hashValue = window.location.hash.substr(1) || 无效的;

# objective-c - 如何表示文本字段为空？

> ID：14696331
> 
> 赞同：-2
> 
> 时间：2013-02-04T21:53:10.623
> 
> 标签：objective-c

我正在尝试做自己的程序来通过是和否来回答问题。但我还有一个线程，我不知道该怎么处理它。我试图表达我的 UIView (textfield) 不是空的，但 xcode 不喜欢我这样做的方式。我是初学者，所以可能有更多错误。我将不胜感激每一个帮助:)

```
- (IBAction)generateAnswer:(UIButton *)sender {
if (_typeQuestion != nil) {
    _showAnswer.text = _answer;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:04:20.383

我不是 100% 确定`_typeQuestion`您的文本字段是否是，但通常要查看它是否为空，您会使用该操作`isEqualToString`并将其与空字符串进行比较`@""`

因此，要查看文本字段是否不为空，您可以使用：

```
if (![_typeQuestion.text isEqualToString:@""]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:04:59.103

如果您只想知道 typeQuestion 是否不为空，并且 _typeQuestion 是一个 UITextfield，那么只需使用：

```
if ([_typeQuestion.text isEqualToString:@""]) {
     //It was empty
}
else {
    //It wasn't.
} 
```

注意：`isEqualToString`比较两个 NSString。为了从文本字段中获取 NSString，您必须使用`.text`. 因此->`_typeQuestion.text`

# python - 在同一个表中“加入”

> ID：14696335
> 
> 赞同：1
> 
> 时间：2013-02-04T21:53:15.803
> 
> 标签：python, sql, sqlalchemy

我正在创建一个使用 camelot（使用 sqlalchemy ORM）保存成员列表的程序。会有人相互结婚，这意味着同一张桌子内的一对一关系。这是 Person 类的简化版本：

```
class Person( Entity ):
    id = Column(Integer, primary_key=True)
    firstname = Column( Unicode(30), nullable = False )
    lastname = Column( Unicode(30), nullable = False )
    member_no = Column( Integer )
    marital_status = Column( Unicode(15) )
    marriage_date = Column( Date() )
    married_to = ... # Should be one to one with self 
```

我试过这样做：

```
married_to = relationship("Person", uselist=False, backref="persons")
married_to_id = Column(Integer, ForeignKey('persons.id')) 
```

但它失败了：

> InvalidRequestError：一个或多个映射器无法初始化 - 无法继续初始化其他映射器。最初的例外是： Person.married_to 和反向引用 Person.persons 都是同一个方向。您的意思是在多对一上设置 remote_side 吗？

我怎么能加入同一张桌子，或者这是我使用的错误方法。如果我将人 A 与 B 结合，是否可以这样做，然后人 B 会自动与 A 结合（作为婚姻工作 - 双向......）

我希望我清楚自己。：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:57:52.597

你想要一个邻接列表关系。这是 [文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#adjacency-list-relationships)。

> 这里的 relationship() 配置与“正常”的一对多关系的工作方式相同，除了“方向”，即关系是一对多还是多对一，是默认情况下假定为一对多。为了建立多对一的关系，添加了一个称为 remote_side 的额外指令，它是一个 Column 或 Column 对象的集合，指示那些应该被视为“远程

也许尝试：

```
married_to = relationship("Person", remote_side=[id]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:00:14.003

我不希望我回答你的问题，但想指出，由于两个人之间婚姻的双向性质，你可能需要考虑一个单独的表来保存婚姻，主键由两个组成`person_id`参考。您还可以考虑通过包含“开始”和“结束”日期来在此表中保留历史记录 =）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T21:58:21.410

如果这都在同一个表中，则不能使用外键。根据定义，外键是来自其他表的键。

我会使用一个`married_to`专栏，让彼此结婚的人拥有各自的伴侣`id`。然后您的查询将变得非常简化。

# wpf - WPF 将导航属性绑定到组合框

> ID：14696342
> 
> 赞同：1
> 
> 时间：2013-02-04T21:53:36.097
> 
> 标签：wpf, entity-framework, data-binding

上下文：我正在使用 EF 5 并尝试将两个实体绑定到 WPF 表单。它适用于简单的属性到文本框绑定，但我想将导航属性对象绑定到组合框。我正在学习 WPF，所以这可能很明显。

我有两个 EF 实体：

```
Product { int Id, string Name, Category Category } 
```

和

```
Category { int Id, string Description } 
```

我制作了一个 WPF 表单来创建和编辑产品，它是这样的（简化）：

```
 <Window.Resources>
            <CollectionViewSource x:Key="productViewSource" d:DesignSource="{d:DesignInstance my:product, CreateList=True}" />
            <CollectionViewSource x:Key="categoryViewSource" d:DesignSource="{d:DesignInstance my:category, CreateList=True}" />
        </Window.Resources>
        <Grid DataContext="{StaticResource productViewSource}">
            <Label Content="Id" Height="28" HorizontalAlignment="Left" Margin="6,6,0,0" Name="label1" VerticalAlignment="Top" />
            <TextBox Height="23" HorizontalAlignment="Left" Margin="61,8,0,0" Name="txtId" Text="{Binding Path=Id, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" VerticalAlignment="Top" Width="56" IsEnabled="False" />
            <Label Content="Name" Height="28" HorizontalAlignment="Left" Margin="6,38,0,0" Name="label2" VerticalAlignment="Top" />
            <TextBox Text="{Binding Path=Name, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" Height="23" HorizontalAlignment="Left" Margin="61,40,0,0" Name="txtNome" VerticalAlignment="Top" Width="183" IsEnabled="False" />

            <Label Content="Category" Height="28" HorizontalAlignment="Left" Margin="6,129,0,0" Name="label5" VerticalAlignment="Top" />
            <ComboBox Height="23" HorizontalAlignment="Left" Margin="72,132,0,0" Name="comboCategory" VerticalAlignment="Top" Width="172" 
                      DisplayMemberPath="Description" 
                      SelectedValuePath="Id" 
                      SelectedValue="{Binding Path=Category, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      ItemsSource="{Binding Path=categoryViewSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}">
            </ComboBox>
         </Grid> 
```

加载两个视图源的代码是这样的：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        context = new DBEntities();

        var productViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("productViewSource")));
        context.Product.Include(p => p.Category);
        context.Product.Load();
        ProductViewSource.Source = context.Product.Local;

        var categoryViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("categoryViewSource")));
        categoryViewSource.Source = context.Category.ToList();
    } 
```

当窗口加载时，两个文本框工作，但组合框始终为空。

可能这就是问题所在，但我似乎无法找到使其工作的方法。

```
ItemsSource="{Binding Path=categoryViewSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:57:50.377

这是错误的：

`ItemsSource="{Binding Path=categoryViewSource, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}">`

您在这里告诉 WPF 的是，您希望该**属性** `categoryViewSource`从`Window`它在可视树中向上遇到的第一个开始。当然`Window`Class 没有这样的属性。

它应该是：

`ItemsSource="{StaticResource categoryViewSource}">`

它告诉 WPF 您要查找具有该名称（键）的**资源**

**编辑：**您最好创建一个 ViewModel 来保存您的数据：

```
public class ViewModel: INotifyPropertyChanged
{
     public List<Category> Categories {get;set;} //Don't forget INotifyPropertyChanged!!

     //... other properties
}

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    context = new DBEntities();

    var vm = new ViewModel() { Categories = context.Category.ToList(); }

    DataContext = vm;
} 
```

XAML：

```
<ComboBox ItemsSource="{Binding Categories}"/> 
```

删除静态资源并删除对它们的所有引用。

**编辑2：**

`SelectedValuePath`And`SelectedValue`属性一起工作。告诉 ComboBox “`SelectedValuePath`在每个项目中评估此属性”，该`SelectedValue`属性是您希望在该属性中找到的实际值，因此：

```
<ComboBox SelectedValuePath="Id" SelectedValue="{Binding Category}"/> 
```

**`int`**告诉 WPF 您在 DataContext 类中调用了一些属性，您希望该属性包含与您的实体之一`Category`匹配的值。**`Id`**

您在这里实际需要做的是：

**视图模型：**

```
public Category Category {get;set;} //Don't forget INotifyPropertyChanged!!! 
```

XAML：

```
<ComboBox SelectedItem="{Binding Category}"/> 
```

并删除 SelectedValuePath 和 SelectedValue。

# android - 使用 jarsigner 在 cmd 中签名应用程序

> ID：14696344
> 
> 赞同：0
> 
> 时间：2013-02-04T21:53:39.907
> 
> 标签：android, cmd, publishing, signed, jarsigner

我一直在关注[如何在发布前签署您的应用程序的](http://www.talkandroid.com/android-forums/android-market-reviews/1317-tutorial-signing-your-apk-publishing.html)教程，一切正常，直到最后一步，第 6 步。当我输入我的通行证时，我收到此错误

`jarsigner error: java.lang.RuntimeException: keystore load: c:\Users\Vladimir\De sktop\keytools\key\TermalneSonde1.keystore (The system cannot find the path spec ified)`

我不知道是什么问题，但也许它与此有关：当我将我的项目导出为未签名的 pacakge 时，我收到了来自 eclipse 的下一个警告：

```
An unsigned application was saved at ..., 
Before publishing the application you will need to:
-Sign the application with your release key,
-run zipalign on the signed package. Zipalign is located in <SDK> /tools/ 
```

那么有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:00:47.300

我所做的是在 Play Store 上获取 AIDE 并获取 AIDE Premium Key。您将项目文件夹移动到您的 Android 设备的 SD 卡上名为 AppProjects 的路径。现在，您必须从那里执行几个步骤。- 将您的发布密钥移动到 SD 卡的任何路径，只需记住您放置的位置 - 单击设备上的菜单键（或者打开选项菜单） - 找到名为“导出 APK”的选项 - 输入路径您希望存储应用程序 APK 的 SD。- 输入您的发布密钥所在的路径如果正确，将出现一个按钮，上面写着“导出”。APK 将被构建，等待，然后您可以从您的设备发布（不要使用 Opera 浏览器将您的 APK 上传到 Google Play），或者您可以将 APK 移动到您的计算机/笔记本电脑并在那里发布

# visualization - 商业 RDF 可视化工具？

> ID：14696345
> 
> 赞同：1
> 
> 时间：2013-02-04T21:53:55.537
> 
> 标签：visualization, rdf, semantics, ontology, graph-visualization

我想知道是否有人知道商业 RDF 可视化工具？

SO上有很多关于RDF可视化工具的帖子，但大部分似乎都是开源项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T18:34:04.253

以下是一些常见的嫌疑人：

*   [Altova SemanticWorks 2012](http://www.bluechillies.com/download/51375.html)
*   [微软 Silverlight PivotViewer](http://weblogs.asp.net/scottgu/archive/2010/06/29/silverlight-pivotviewer-now-available.aspx)
*   [Adobe Flex](http://help.adobe.com/en_US/Flex/4.0/AccessingData/WS2db454920e96a9e51e63e3d11c0bf69084-7fdd.html)
*   [Adobe AIR](http://www.techrepublic.com/article/desktop-rss-with-adobe-air/6310679)
*   [句子](http://www.sentences.com/)
*   [星际狗](http://stardog.com/)

# sql - 为有序表中的列记录编号

> ID：14696350
> 
> 赞同：0
> 
> 时间：2013-02-04T21:54:30.687
> 
> 标签：sql, sql-server, sql-server-2008, tsql

表架构：

```
StatusId    Status  DisplayColor    IsOpen  DivisionId  SortOrder
4           Open    3e696c          1       34          1
5           Closed  3e696c          0       34          2
1           Open    3e696c          1       35          1
2           Closed  3e696c          0       35          2 
```

SQL 查询我必须按照我需要对它们进行编号的方式对列进行排序：

```
select  StatusId, Status, DisplayColor, IsOpen, DivisionId, SortOrder
from    TV_Statuses s
order by DivisionId, IsOpen desc 
```

我正在尝试创建一个脚本，该脚本可以通过 DivisionId 然后 IsOpen 逐步分配 SortOrder。所以在这里，为 4 的 STatusId 的 SortOrder 为 1。为 5 的 StatusId 的 SortOrder 为 2。底部 2 行也是如此，但这里的一个部门可能有 100 行，70 行打开，30 行关闭，因此打开的行编号为 1 - 70 和 Closed 将是 71 - 100。

关于在不使用游标的情况下做到这一点的任何建议？我的蜘蛛侠感觉告诉我，可能有一种更直接的方法可以做到这一点。

任何帮助表示赞赏。

编辑：好的，所以实际上现在在数据库中，SortOrder 列中只有 NULL。我想更新 SortOrder 列，以便每个 Division（使用 DivisionId）在 SortOrder 中都有一个递增的数字。例如，上面 34 的 DivisioniId 必须有一个 IsOPen = 1 和一个 IsOpen = 0 的行。所以我想分别用 SortOrder 1 和 2 对这两行进行排序。但是一个部门可以有 10 行。那么 SortOrder 字段的划分将是 1、2、3、4、5、6、7、8、9、10。这很难解释，但希望能有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:59:01.220

从 SQL Server 2005 开始，您可以将窗口函数应用于`ROW_NUMBER()`集合（或子集，通常称为分区，但不要与表分区混淆）。我相信您正在寻找的是以下内容：

```
SELECT 
  StatusId, Status, DisplayColor, IsOpen, DivisionId, 
  SortOrder = ROW_NUMBER() OVER 
    (PARTITION BY DivisionId ORDER BY IsOpen DESC, StatusId)
FROM dbo.TV_Statuses AS s
ORDER BY DivisionId, IsOpen DESC; 
```

# oracle - Connecting Oracle 11g in Powerplay Transformer 7.3 via ODBC

> ID：14696352
> 
> 赞同：-2
> 
> 时间：2013-02-04T21:54:43.063
> 
> 标签：oracle, cognos, transformer

I am using Cognos Powerplay Transformer 7.3 and wants to connect Oracle 11g through ODBC, but i can not see the ODBC as a data source options, the options i see are : - Impromptu Query Definition - Delimited-field text with column titles - Delimeted-field text - dBase tabel etc.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:00:00.780

在该版本的 Transformer 中，您需要创建一个 IQD 文件。要创建 IQD 文件，您需要在 Impromptu（另一个客户端应用程序）中创建报告，然后将报告保存为 IQD 文件。

如果您习惯 hacking，您实际上可以从一个空白文本文件创建一个 IQD 文件，然后直接粘贴您的 Oracle SQL。

你安装了 Impromptu 吗？您是否为 Oracle 创建了 DSN 并对其进行了测试？

# xml - Need an xslt transformation which refer to another xml

> ID：14696353
> 
> 赞同：0
> 
> 时间：2013-02-04T21:54:50.327
> 
> 标签：xml, xslt

Required Stylesheet should refer the refer.xml and must get only the values of that elements from the input.xml. How to do that

**Input.xml** which is the request

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd>
<cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
</cd>
<cd>
    <title>Greatest Hits</title>
    <artist>Dolly Parton</artist>
    <country>USA</country>
    <company>RCA</company>
    <price>9.90</price>
    <year>1982</year>
</cd>
<cd>
    <title>Still got the blues</title>
    <artist>Gary Moore</artist>
    <country>UK</country>
    <company>Virgin records</company>
    <price>10.20</price>
    <year>1990</year>
</cd>
<cd>
    <title>Eros</title>
    <artist>Eros Ramazzotti</artist>
    <country>EU</country>
    <company>BMG</company>
    <price>9.90</price>
    <year>1997</year>
</cd>
<cd>
    <title>One night only</title>
    <artist>Bee Gees</artist>
    <country>UK</country>
    <company>Polydor</company>
    <price>10.90</price>
    <year>1998</year>
</cd>
<cd>
    <title>Romanza</title>
    <artist>Andrea Bocelli</artist>
    <country>EU</country>
    <company>Polydor</company>
    <price>10.80</price>
    <year>1996</year>
</cd>
<cd>
    <title>When a man loves a woman</title>
    <artist>Percy Sledge</artist>
    <country>USA</country>
    <company>Atlantic</company>
    <price>8.70</price>
    <year>1987</year>
</cd>
</catalog> 
```

**refer.xml** - here we will have our elements from the input

```
<catalog>
<cd>
    <country name="USA">
    <title>When a man loves a woman</title>
    <title>Greatest Hits</title>
    </country>
    <country name="UK">
    <title>Still got the blues</title>
    <title>One night only</title>
    </country>
</cd>
</catalog> 
```

**Output.xml** - This shows the values of elements which are shown in refer.xml

```
<country name="USA">
<cd>
    <title>When a man loves a woman</title>
    <price>8.70</price>
</cd>
<cd>
    <title>Greatest Hits</title>
    <price>9.90</price>
</cd>
</country>
<country name="UK">
<cd>
    <title>Still got the blues</title>
    <price>10.20</price>
</cd>
<cd>
    <title>One night only</title>
    <price>10.90</price>
</cd>
</country> 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T11:00:57.833

我不确定我是否正确理解了您的意图，但是对于您的示例，我提出了以下建议：想法是，进入您的 refer.xml 并获取您的 cd 标题。然后打开 input.xml 并在其中搜索匹配的标题。我的代码不会检查找到的 CD 是否来自正确的国家/地区，但此更改很容易完成。

## XSL 文件

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/">
        <catalog>
            <xsl:for-each select="catalog/cd/country/@name">
                <country>
                    <xsl:attribute name="name">
                        <xsl:value-of select="."/>
                    </xsl:attribute>
                    <xsl:for-each select="../title">
                        <xsl:variable name="reftitle" select="."/>
                        <xsl:for-each select="document('input.xml')/catalog/cd">
                            <xsl:variable name="title" select="title"/>     
                            <xsl:variable name="price" select="price"/>

                            <xsl:if test="$reftitle=$title">
                            <cd>
                                <title>
                                    <xsl:value-of select="$reftitle"/>
                                </title>
                                <price>
                                    <xsl:value-of select="$price"/>
                                </price>
                            </cd>
                            </xsl:if>
                        </xsl:for-each>
                    </xsl:for-each>
                </country>
            </xsl:for-each>
        </catalog>
    </xsl:template>
</xsl:stylesheet> 
```

这将创建您想要的输出。我不知道这三个嵌套循环是否需要，或者是否有更清洁的版本可以做到这一点，但它会给你一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:38:48.413

您可以使用 XSLT 中的[`document`函数](http://www.w3.org/TR/xslt20/#function-document)从与您正在转换的文件不同的 XML 文件中查找值。

# ruby-on-rails - 尝试仅在 PG 中显示今天的事件时出现 ActiveRecord 关系错误

> ID：14696365
> 
> 赞同：0
> 
> 时间：2013-02-04T21:55:22.893
> 
> 标签：ruby-on-rails, ruby, datetime

我想做的只是展示今天发生的事件-

```
@event = Events.where('EXTRACT(DAY FROM start) = ?', Date.today) 
```

我能出现的只是`<ActiveRecord::Relation:0x007f8d06348d80>`。页面加载，但这是我的显示文本。

任何想法我做错了什么以及在哪里？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:57:32.137

首先，`EXTRACT(DAY FROM start) = ?`从时间戳中提取“日”中的“日”，而不是整个日期。使用`EXTRACT(DATE FROM start) = ?`或简单地使用`start::date = ?`.

除此之外，您没有得到一条记录，而是一个尚未触发的延迟加载集合。如果您希望单个记录与此`where`过滤器匹配，则只需附加`.first`以返回单个事件。否则，使用或`.all`某些将触发查询以构建.`each``map``Events`

```
@event = Event.where("EXTRACT(DATE FROM start) = ?", Date.today).first
=> SELECT * FROM events WHERE EXTRACT(DATE FROM start) = '2013-01-04' LIMIT 1

@events = Event.where("EXTRACT(DATE FROM start) = ?", Date.today).all
=> SELECT * FROM events WHERE EXTRACT(DATE FROM start) = '2013-01-04' 
```

此时您有一个 ActiveRecord 对象（或对象集合），它通常不直接呈现，而是通过调用属性或方法。

`<%= @event %>`因此，您可以使用:`<%= @event.description %>`或类似的东西来代替: 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:55:09.680

如您所见，`where`类方法返回一个`ActiveRecord::Relation`对象，以便您可以继续链接更多调用来构建查询，如下所示：

```
Model.where(:a => a)
     .where('b < ?', b)
     .limit(6)
     .order(:created_at) 
```

现在，an`ActiveRecord::Relation`代表多个项目，可能只有一个匹配项，但`ActiveRecord::Relation`在尝试将所有内容从数据库中拉出之前无法知道这一点。如果你知道只有匹配，那么你可以说：

```
@event = Event.where(...).first 
```

但也许你应该说：

```
@events = Event.where(...) 
```

然后在您看来是这样的：

```
<% @events.each do |event| %>
    <!-- Display event -->
<% end %> 
```

这将允许您“仅显示今天的**事件”（强调我的）。**

并查看[PinnyM](https://stackoverflow.com/a/14696396/479863)对如何使用 EXTRACT 的回答。

# ruby-on-rails-3 - 创建自己的 Rails 生成器

> ID：14696367
> 
> 赞同：1
> 
> 时间：2013-02-04T21:55:24.110
> 
> 标签：ruby-on-rails-3, code-generation, generator

我想知道如何创建一个 Rails 生成器，它适用于所有项目，但我只找到了针对单个项目的 rails generate generator 命令。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:35:27.770

Ruby on Rails 指南中有关[创建和自定义 Rails 生成器和模板](http://guides.rubyonrails.org/generators.html)的章节详细介绍了如何创建自己的生成器。

它只涉及如何在特定项目中实现生成器。要使其跨项目可用，您需要将代码打包为插件或 gem。

插件将作为文件夹安装在每个需要它的应用程序中，而 gem 将通过`bundler`或直接安装`rubygems`。在[什么是 gem 和 plugin 之间的区别？](https://stackoverflow.com/questions/4252319/whats-the-difference-between-gem-and-plugin)

在 RubyGems 网站上查看[如何制作自己的 gem 。](http://guides.rubygems.org/make-your-own-gem/)

有更多有用的资源可用于通过谷歌搜索创建 gem。

# objective-c - 目标 C：IKImageBrowserView 显示“页面”模板，如照片缩略图

> ID：14696369
> 
> 赞同：0
> 
> 时间：2013-02-04T21:55:37.743
> 
> 标签：objective-c, ikimagebrowserview

我对可可有点陌生。

我已设法在 IKImageBrowserView 中加载图像，并且图像一切正常。我不明白的是如何加载例如“页面”模板，以便它们以照片的方式出现 - 缩略图显示内容，而不是现在发生的“页面”文档图标。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:23:03.357

在这种情况下，您可能希望利用[QuickLook 框架](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Introduction/Introduction.html)生成缩略图。

# java - 如何使用 tika 提取 .ppt 文件的文本？

> ID：14696371
> 
> 赞同：1
> 
> 时间：2013-02-04T21:55:47.743
> 
> 标签：java, apache-tika, text-extraction

我已经使用类提取了带有 tika 的 .pdf 文件的文本`AutoDetectParser`。但是当我使用相同的代码提取 .ppt 文件的文本时，它会引发异常。怎么做？谢谢

编辑：
我使用的代码是：

```
File file = new File("1.ppt");
InputStream input = new FileInputStream(file);
Parser autoDetectParser = new AutoDetectParser();
Metadata metadata = new Metadata();
StringWriter writer = new StringWriter();
ContentHandler handler = new WriteOutContentHandler(writer);
autoDetectParser.parse(input, handler, metadata, new ParseContext()); 
```

例外是：

```
java.lang.NoSuchFieldError: SMALLER_BIG_BLOCK_SIZE_DETAILS
at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:93)
at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:190)
at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:184)
at org.apache.tika.parser.microsoft.POIFSContainerDetector.getTopLevelNames(POIFSContainerDetector.java:371)
at org.apache.tika.parser.microsoft.POIFSContainerDetector.detect(POIFSContainerDetector.java:165)
at org.apache.tika.detect.CompositeDetector.detect(CompositeDetector.java:61)
at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:113)
at ppt.PPTParserTest.test3(PPTParserTest.java:52) 
```

我发现问题是由`jars`我的`classpath`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-12T00:46:11.513

如果您的运行时类路径中有两个不同版本的 POI，则可能会发生此异常。在较新版本的 POI 中，`NPOIFSFileSystem`引用`POIFSConstants.SMALLER_BIG_BLOCK_SIZE_DETAILS`. 此常量在旧版本的 POI 中不存在。

`tika-app-1.4.jar`我在（捆绑了 POI 3.9）和`poi-3.0.2-FINAL-20080204.jar`我的类路径中遇到了这个异常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-03T08:39:45.020

你可以改变你的方法`WorkbookFactory.create(inputStream)`
而不是`WorkbookFactory.create(File)`，这可以解决你的问题。祝你好运 ！

# ruby-on-rails - Ruby on Rails + Formtastic：不检查多个选中答案的复选框

> ID：14696376
> 
> 赞同：0
> 
> 时间：2013-02-04T21:56:08.593
> 
> 标签：ruby-on-rails, checkbox, formtastic

编辑：底部的解决方案和选定的答案。

* * *

我使用 Formtastic 已经有一段时间了，主要是喜欢它如何简化表单创建。不幸的是，我在使用复选框时遇到了麻烦。由于某种原因，在我保存/提交表单后，复选框没有被选中。

**代码片段**

```
= ff.input :answer, :as => :check_boxes, :collection => ff.object.survey_question.options, :label => ff.object.survey_question.question 
```

-- .options 收集方法见下图：

```
def options
    opts = {}
    survey_options.each do |option|
        opts[option.option] = option.id.to_s
    end
    opts
end 
```

**提交**

该表单返回以下（截断的）参数：

参数[:response][:question_responses_attributes] =

```
{
  "0"=>
     {"answer"=>"42", "id"=>"1175"},
   ...,

   "3"=>
     {"answer"=>["", "52", "54", "56"], "id"=>"1178"},
   ...
 } 
```

哪个写入数据库为

```
--- - '' - '52' - '54' - '56' 
```

我无法获得复选框（使用上面的代码输入），除非只有一个答案被选中。只有当我在提交时删除所有内容并以自定义格式存储响应。

例如

```
params[:response][:question_responses_attributes].each do |key, values|
    if values[:answer].is_a?(Array)
        values[:answer] = values[:answer].delete_if {|x| x == ""}.join(",")
    end
end 
```

将去掉第一个空白选项，然后将数组拆分为逗号分隔的字符串。

```
52,54,56 
```

**到目前为止我尝试过的**

```
= ff.input :answer, :as => :check_boxes, :collection => ff.object.survey_question.options, :checked => ff.object.answer.scan(/\w+/), :label => ff.object.survey_question.question 
```

它将答案分成一个数组。

```
= ff.input :answer, :as => :check_boxes, :collection => ff.object.survey_question.options, :label => ff.object.survey_question.question, :input_html => {:checked => true} 
```

它检查了所有的复选框。

```
= ff.input :answer, :as => :check_boxes, :collection => ff.object.survey_question.options, :label => ff.object.survey_question.question, :input_html => {:checked => ff.object.answer.scan(/\w+/)} 
```

它还检查所有复选框。

*笔记：*

```
 = ff.input :answer, :as => :check_boxes, :collection => ff.object.survey_question.options, :label => ff.object.survey_question.question 
```

*如果只有一个选中的答案 (56) 并且我在将参数保存到数据库之前自定义了参数格式，则可以使用*

**其他选择？？**

还有其他选择吗？根据 Formtastic WIKI，他们不再支持 :selected 或 :checked 并提供另一个选项设置默认值，用于在初始化后的模型或带有选择和文本框的控制器中使用。我无法找到使用复选框的工作方式。

我愿意在事后使用额外的 js 代码来检查这些框，但我宁愿这样做，因为表单是用 rails 呈现的......

在此先感谢您的帮助！

* * *

**编辑**

我终于解决了这个问题。它与如何保存数据无关，也与我如何将数据传递给 Formtastic 无关。

首先，我必须在问题响应表和调查选项表之间创建连接表。然后我必须格式化数据如何访问所有调查选项（基于问题）和问题响应的所有选中选项：

```
class QuestionResponse
    has_many :question_response_options
    has_many :survey_options, :through => :question_response_options

    # Takes all the survey options that are stored in the join
    # table and puts the id's into an array
    def question_response_options
        opts = []
            self.survey_options.each do |option|
        opts << option.id.to_s
        end
        opts
    end
end

class QuestionResponseOption
    belongs_to :question_response
    belongs_to :survey_option
end

class SurveyQuestion < ActiveRecord::Base
    # Creates hash of option name to id
    # { "Law and Order" => 13 }
    def options
        opts = {}
        survey_options.each do |option|
            opts[option.option] = option.id.to_s
        end
        opts
    end
end 
```

然后在 Formtastic 中，我不得不改变我发送信息的方式：

```
= ff.input :question_response_options, :as => :check_boxes, :collection => ff.object.survey_question.options, :for => :question_response_options 
```

输入必须是连接表，集合必须是给定问题的所有选项，并且 :for 让我通过 ID 连接两者。

在那之后我唯一要做的就是自己保存检查的选项，我在控制器中做了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:50:07.027

我终于解决了这个问题。它与如何保存数据无关，也与我如何将数据传递给 Formtastic 无关。

首先，我必须在问题响应表和调查选项表之间创建连接表。然后我必须格式化数据如何访问所有调查选项（基于问题）和问题响应的所有选中选项：

```
class QuestionResponse
    has_many :question_response_options
    has_many :survey_options, :through => :question_response_options

    # Takes all the survey options that are stored in the join
    # table and puts the id's into an array
    def question_response_options
        opts = []
            self.survey_options.each do |option|
        opts << option.id.to_s
        end
        opts
    end
end

class QuestionResponseOption
    belongs_to :question_response
    belongs_to :survey_option
end

class SurveyQuestion < ActiveRecord::Base
    # Creates hash of option name to id
    # { "Law and Order" => 13 }
    def options
        opts = {}
        survey_options.each do |option|
            opts[option.option] = option.id.to_s
        end
        opts
    end
end 
```

然后在 Formtastic 中，我不得不改变我发送信息的方式：

```
= ff.input :question_response_options, :as => :check_boxes, :collection => ff.object.survey_question.options, :for => :question_response_options 
```

输入必须是连接表，集合必须是给定问题的所有选项，并且 :for 让我通过 ID 连接两者。

在那之后我唯一要做的就是自己保存检查的选项，我在控制器中做了。

# android - How can I create 2 surfaceview which splitter up half of the screen on android?

> ID：14696382
> 
> 赞同：0
> 
> 时间：2013-02-04T21:56:37.933
> 
> 标签：android

How can I create 2 surfaceview which splitter up half of the screen on android? e.g each of them takes up 1/2 of the screen.

I get this exception: My app works when I do this:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
 >
    <com.example.android.apis.graphics.Preview android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:layout_weight="1" android:id="@+id/view1" />

</LinearLayout> 
```

as soon as I switch to this, even without using '@+id/view2', like this:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
 >
    <com.example.android.apis.graphics.Preview android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:layout_weight="1" android:id="@+id/view1" />

    <com.example.android.apis.graphics.Preview android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:layout_weight="1" android:id="@+id/view2" />

</LinearLayout> 
```

I get a NullPointer exception from this:

```
Choreographer.doCallbacks(int, long) line: 558  
Choreographer.doFrame(long, int) line: 525  
Choreographer$FrameDisplayEventReceiver.run() line: 711 
Handler.handleCallback(Message) line: 615   
Choreographer$FrameHandler(Handler).dispatchMessage(Message) line: 92   
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 4921    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 1038 
ZygoteInit.main(String[]) line: 805 
NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:16:07.580

```
<LinearLayout android:layoutHeight="fill_parent"
              android:layoutWidth="fill_parent"
              android:orientation="horizontal" >
    <SurfaceView1 android:layoutWidth="fill_parent"
                  android:layoutHeight="fill_parent"
                  android:layoutWeight="1" />
    <SurfaceView2 android:layoutWidth="fill_parent"
                  android:layoutHeight="fill_parent"
                  android:layoutWeight="1" />
</LinearLayout> 
```

重要的部分是使它们的重量和fill_parent都相等。要解决 Android 中的一个奇怪错误，您可能需要指定布局的宽度为 0dip。

# android - 在方向更改时处理多个可交换片段的最佳方法

> ID：14696383
> 
> 赞同：2
> 
> 时间：2013-02-04T21:56:43.997
> 
> 标签：android, android-fragments, android-fragmentactivity, android-sliding

我使用 a`SlidingMenu`来显示侧抽屉（而不是标签）。现在，在 内部`SlidingMenuFragment`，有`ListView`6 行，每行相当于一个选项卡。当用户触摸 6 个项目之一时，内容视图应`Framelayout`使用该项目的相应 Fragment 更新 。

前任：

1.  猫
2.  小狗
3.  动物

当您选择猫时，`SlidingMenu`消失并且`CatsFragment`应该出现在屏幕上，替换那里的旧片段。

**问题：**存储将在内容视图中交换的所有片段的最佳方式是什么，同时考虑到方向变化？每次我需要交换它时实例化一个新的片段？或者实例化所有这些，将它们保存在列表中然后从那里使用它们？

**我做了什么：**

1.  每当片段需要交换时，我都会使用下面的代码。
2.  为了存储片段列表以便于访问，我使用了 ArrayList。我将此 ArrayList 保存在 onRetainCustomNonConfiguration() 中并在方向更改后检索它，这样我就不会实例化另一个片段列表，但我认为这不是一个好主意。

    ```
     getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.activity_main_framelayout, mFragmentsList.get(mCurrentFragmentPosition))
        .commit(); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:39:11.460

确实，这是官方的做法。

[http://developer.android.com/training/implementing-navigation/nav-drawer.html#ListItemClicks](http://developer.android.com/training/implementing-navigation/nav-drawer.html#ListItemClicks)

# scala - How to change text in SecureSocial

> ID：14696385
> 
> 赞同：1
> 
> 时间：2013-02-04T21:56:57.627
> 
> 标签：scala, playframework-2.0, securesocial

I'm wondering how to change text in SecureSocial views... I've created file `messages.en` in the `conf` directory... but it does not work. If I want my text and other stuff like copyright notice, shall I create my own custom views?

Thanks.

# javascript - How to force synchronous soundcloud javascript sdk calls?

> ID：14696386
> 
> 赞同：1
> 
> 时间：2013-02-04T21:57:00.787
> 
> 标签：javascript, sdk, soundcloud

From a function, I'd like to return a collection of soundcloud sounds using the SoundCloud javascript SDK. However, because soundcloud is using asynchronous requests, the is not possible:

```
function getFavorites() {
    var tracks = [];
    SC.get('/users/1234', function(data) {
      $.each(data, function (i, obj) {
        tracks.push(obj);
      });
      return tracks;
    });
} 
```

How can I return a value from an asychronous request?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:02:30.357

SoundCloud JavaScript SDK 不支持同步请求。相反，您必须在回调中处理结果。

# apache - PHP5/Apache2 的 Http 请求持续时间

> ID：14696390
> 
> 赞同：2
> 
> 时间：2013-02-04T21:57:24.540
> 
> 标签：apache, http

有没有办法从 HTTP 服务器获取有关 HTTP 请求持续时间的可靠信息？

感兴趣的场景：

使用 POST 方法针对 PHP 脚本发送带有数据负载的 AJAX 请求：

```
//dispatch ajax request
$.ajax({
  type: "POST",
  url: "timing.php",
  data: {
         "payload":"some long string or something",
         "currentTime": +new Date() //miliseconds on client
        },
  success: function(response) { console.log(response) },
  error: function() { console.log('something went banana...') },
  dataType: "text"
}); 
```

PHP 脚本“timing.php”可能会这样说：

```
<?php
//in the meanwhile, on a quiet server...
$currentTime = microtime(true); //microseconds on server
//send headers as necessary, and then, the payload
echo $currentTime * 1000 - $_POST["currentTime"];
?> 
```

我想知道的是从请求到达 http 服务器到服务器调用 PHP 脚本之间经过了多长时间。处理（加载）POST 请求的输入参数需要多长时间。不是从 Javascript currentTime 到 PHP $currentTime 所花费的时间，而是 Apache 从 AJAX 请求加载“有效负载”（和“currentTime”）所花费的时间。应该在服务器端收集时间。

下落：

*   客户端和服务器在同一个时区（而且，客户端没有对它的时间设置做任何令人兴奋的事情），
*   服务器具有默认配置和模块的 PHP5/Apache2，
*   所需的时间分辨率为毫秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-03T05:10:36.623

事实证明，在 PHP 环境中获得一些可靠信息的最佳选择是 $_SERVER['REQUEST_TIME_FLOAT'] 变量，自 PHP 5.4.0 起可用。这将忽略启动实际模块（HTTP 服务器）所需的一些时间，但应该相当准确。所需的时间是：

```
$time_microseconds = microtime(true) - $_SERVER['REQUEST_TIME_FLOAT'];. 
```

或者，Apache2 也可以这样做，只要将 %D 添加到 mod_log_config 模块的日志条目中：

```
"%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\" %D". 
```

# php - 通过 php 转发 http GET

> ID：14696391
> 
> 赞同：0
> 
> 时间：2013-02-04T21:57:25.410
> 
> 标签：php, android, http

我的 Android 应用程序从我的网络空间下载图像。我没有ssl。我不希望用户看到图像的存储位置。包含图像的文件夹应通过 .htaccess 保护。所以我想将 GET 请求发送到 php 脚本，它会收集图像并将其响应给 android 客户端。

有人可以给我一个提示如何进行转发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:13:56.293

做到这一点的一个好方法是将图像保留在 webroot 之外。这样他们就不能通过访问一个 url 来访问。在 php 中，您可以执行以下操作：

```
//Check username/whatever

//Decide what file we want
$theFile = getTheFile();

//Display the file
header('Content-Type: image/jpeg');
readfile('../not/web/accessible/'.$theFile);
die(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:13:11.303

要从其他地方下载东西，请使用[`curl`](http://php.net/manual/en/book.curl.php). 你真的应该在你的服务器上缓存下载的内容。从 $_GET 和 $_SERVER 变量重建 GET 请求应该很容易，只需按照链接页面上的示例进行操作。

但我想你想看看“[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)”。针对此任务，现有的企业质量解决方案。

# visual-studio-2010 - Visual Studio 2010 keyboard shortcut for next reference in C++

> ID：14696393
> 
> 赞同：0
> 
> 时间：2013-02-04T21:57:27.300
> 
> 标签：visual-studio-2010

In VS2010 (C++) when I use Shift-F12 to invoke Edit.FindAllReferences(), I expect the F8 key to jump my cursor to the next found reference. It did on my old machine, but I just got a new one and now it does not.

Is there a different keyboard shortcut, or better yet, what is the command to jump the cursor to the next Find Symbol Results item?

(Yes, I tried Google... best I could find is F8 for when you invoke a Find All, and in the case of Find All, it does work, but I want "Find All References". I wouldn't have expected a difference...)

Thanks, Karl

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:08:26.970

F8 适用于我的。你检查你的键盘映射。默认键盘的设置可能不同（安装时，有 VC++2、VC++6 等选项...）

打开工具/选项菜单

选择左侧的环境/键盘

在“选项”对话框中，找到“按快捷键：”文本框。将光标放在该框中，然后按 F8 键。

在当前使用的快捷方式中它的正下方：“Edit.GoToNextLocation(F8 (Global))。

如果没有这样说，您可能需要更改默认键盘映射方案。

# iis-7 - in IIS 7 add site specific error page settings

> ID：14696397
> 
> 赞同：0
> 
> 时间：2013-02-04T21:57:33.960
> 
> 标签：iis-7, asp-classic, error-handling

I'm trying to setup a classic ASP page to log errors by redirecting the errors to error page that has logging enabled. When the site was migrated from IIS6 to IIS7 the logging stopped working as the details of the errors are not included in the redirect.

I have been able to fix this issues somewhat by going to the site in IIS Manager, going to that sites Error Pages, Clicking Edit Feature Settings, and Changing that option to Detailed errors for local requests, setting my default path to the error page, and changing the path type to execute URL. In order to do this I had to edit the apphost.config and remove some of the locks that are in place there.

![Error Page Settings](../Images/e9fbf06b31e23ab08ed7c284bef73ac3.png)

Now when I go to other sites on my IIS the same default page path is set on those too. can someone please point me to some documentation or tell me how to make this change only for this particular site?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:28:25.150

我的问题最终是我正在编辑我的 applicationHost.config 这似乎是一个合理的解决方案，但可惜不是。更改该 XML 似乎对 IIS 管理器允许我执行的操作没有影响。我终于进入了 IIS 根目录的配置编辑器并在那里编辑了相同的设置，这实际上产生了一些效果。那时我所要做的就是删除默认路径上的属性锁定，然后我就可以编辑我的网站了。我不知道为什么更改应用程序主机没有任何效果。我会做出改变，当我最终查看 IIS 管理器中的设置时，我所做的一切都没有改变......仅供参考，这是 Win7 上的 IIS 7.5

希望这对其他人有帮助。

![在此处输入图像描述](../Images/ed5b987704440d70f4cde099b0d75148.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:41:42.793

要为 IIS 中部署的每个网站创建错误页面，您需要单击单个网站，然后在右侧单击错误页面并选择页面。 ![在此处输入图像描述](../Images/7ad4f844ac04e7693b69f1d458cf3036.png)

# sql - 使用 GROUP 或 RANK 中的 WHERE 的 SQL 语句（第 2 部分）

> ID：14696413
> 
> 赞同：4
> 
> 时间：2013-02-04T21:58:27.817
> 
> 标签：sql, sum, grouping, where

我最近在这里发布了一个关于 SQL Where 语句/分组的问题：

[使用来自 GROUP 或 RANK 的 WHERE 的 SQL 语句](https://stackoverflow.com/questions/14654855/sql-statement-using-where-from-a-group-or-rank)

现在我有了一些跟进。

与上一个问题类似，假设我有一个包含 35,000 行的表，其中包含这些列：

销售代表 | 父帐户 ID| 帐号 | 合同总价值 | 日期

每行都按帐户 ID 单独显示，但多个帐户 ID 可以属于一个父帐户 ID。

与第一个问题的回答类似，这可能是一个带有表格的表格。因此，首先，所有内容都必须按销售代表分组。从那以后，所有内容都需要按父帐户 ID 分组，其中所有帐户的分组总合同价值 >= 10,000。然后所有内容都将显示并按父帐户 ID 的总 TCV 排名，我需要代理的前 35 个父帐户 ID。

所以前几行数据可能如下所示：

```
销售代表 | 父帐户 ID| 帐号 | 合同总价值 | 日期 | 秩
约翰·多伊 | 父ABC12345 | ABC425 | 5,000 | 2013 年 1 月 2 日 |1
约翰·多伊 | 父ABC12345 | ABC426 | 10,000 | 2013 年 1 月 2 日 |1
约翰·多伊 | 家长DJE12345 | DJE523 | 11,000 | 2013 年 1 月 2 日 |2
约翰·多伊 | 父FBC12345 | FBC6723 | 4,000 | 2013 年 1 月 2 日 |3
约翰·多伊 | 父FBC12345 | FBC6727 | 4,000 | 2013 年 1 月 2 日 |3

```

请注意排名是如何根据父帐户 ID 进行的。帐户 ID DJE523 具有最大的单个 TCV，但它排名第二，因为父帐户 ID ParentABC12345 的分组值更大。因此会有 35 个父帐户 ID 的排名，但在该排名中，它们可能是 100 多行实际数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:20:08.830

总是很高兴跟进。“父等级”添加为`INNER JOIN`.

*编辑*：正如 Dan Bracuk 正确提到的，[我的第一个答案](http://www.sqlfiddle.com/#!3/62967/1)是不正确的。我更改了查询以满足正确的条件。我还将时间跨度应用于父帐户。

```
DECLARE @minimumValue decimal(20,2) = 10000
DECLARE @numberOfAccounts int = 35
DECLARE @from datetime = '1/1/2013'
DECLARE @till datetime = DATEADD(MONTH, 1, @from)

SELECT 
  [sub].[Sales Rep],
  [sub].[Rank],
  [sub].[Account ID],
  [sub].[Total Contract Value],
  [sub].[Parent Account ID],
  [sub].[Total],
  [sub].[ParentRank]
FROM
(
  SELECT
    [s].[Sales Rep],
    [s].[Account ID],
    [s].[Total Contract Value],
    DENSE_RANK() OVER (PARTITION BY [s].[Sales Rep] ORDER BY [s].[Total Contract Value] DESC) AS [Rank],
    [p].[Parent Account ID],
    [p].[Total],
    [p].[ParentRank]
  FROM [Sales] [s]
  INNER JOIN 
  (
    SELECT
      [Parent Account ID],
      SUM([Total Contract Value]) AS [Total],
      RANK() OVER(ORDER BY SUM([Total Contract Value]) DESC) AS [ParentRank]
    FROM [Sales]
    WHERE[Date] > @from AND [Date] < @till
    GROUP BY [Parent Account ID]
    HAVING SUM([Total Contract Value]) > @minimumValue
  ) AS [p] ON [s].[Parent Account ID] = [p].[Parent Account ID]
  WHERE [Date] > @from AND [Date] < @till
) AS [sub]
WHERE [sub].[Rank] <= @numberOfAccounts
ORDER BY 
  [Sales Rep] ASC,
  [ParentRank] ASC,
  [Rank] ASC 
```

[这是一个新的 Fiddle](http://www.sqlfiddle.com/#!3/e3331/2)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T22:03:43.213

如果您使用的是 SQL Server，我认为这将为您完成：

```
Select top 35 
    SalesRep, 
    ParentAccountId, 
    sum(TotalContractValue)  from Table
group by SalesRep, ParentAccountId 
order by sum(TotalContractValue) desc 
```

# javascript - 滚动表（但不是标题）

> ID：14696419
> 
> 赞同：3
> 
> 时间：2013-02-04T21:58:59.720
> 
> 标签：javascript, twitter-bootstrap

我有一个（长）引导表，我想允许使用`overflow: auto;`. 我只希望`tbody`是可滚动的，而不是`thead`内容。

请参阅[此小提琴](http://jsfiddle.net/SzGW3/)以了解我的尝试。我试图设置一个高度 `tbody`不成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T23:04:26.560

您不能将 tbody 设置为可滚动的。您需要创建两个单独的表——一个用于表头，一个用于正文。将 body 表包装在一个 div 中，并将 overflow-y 属性设置为滚动。

更新了 jsfiddle：http: [//jsfiddle.net/SzGW3/37/](http://jsfiddle.net/SzGW3/37/)

标记：

```
<div class="scrollable">
    <table class="table table-hover table-striped">
        <thead>
            <tr>
                <th>User</th>
                <th>Rights</th>
                <th></th>
            </tr>
        </thead>
    </table>
</div>
<div class="bodycontainer scrollable">
    <table class="table table-hover table">
        <tbody id="user-rows">
            <tr class="user-row" style="opacity: 1;">
                <td>Justin</td>
                <td>Administrator</td>
                <td><span class="btn btn-mini btn-primary edit pull-right fade">Edit</span>
                </td>
            </tr>
            <tr class="user-row" style="opacity: 1;">
                <td>Sebastien</td>
                <td>Administrator</td>
                <td><span class="btn btn-mini btn-primary edit pull-right fade">Edit</span>
                </td>
            </tr>
            <tr class="user-row" style="opacity: 1;">
                <td>Steve</td>
                <td>Operator</td>
                <td><span class="btn btn-mini btn-primary edit pull-right fade">Edit</span>
                </td>
            </tr>
            <tr class="user-row" style="opacity: 1;">
                <td>Thomas</td>
                <td>Administrator</td>
                <td><span class="btn btn-mini btn-primary edit pull-right fade">Edit</span>
                </td>
            </tr>
            <tr class="user-row" style="opacity: 1;">
                <td>admin</td>
                <td>Administrator</td>
                <td><span class="btn btn-mini btn-primary edit pull-right fade">Edit</span>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

风格：

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.scrollable {
    overflow-y: scroll;
}

.bodycontainer {
    height: 100px !important;
    width: 100%;
} 
```

标题上的滚动条是为了保持宽度相同。你可以用一些 JavaScript 来解决这个问题，但也应该有一些不错的 JS/JQuery 库你可以找到来为你处理整个 tbody 滚动问题。

如果要为标题 cols (th) 和 cols (td) 设置相同的宽度：

```
table thead>tr>th{
    width: 20% !important; /* 20% for 5, 25% for 4, etc */

}

table tbody>tr>td{
    width: 20% !important; /* 20% for 5, 25% for 4, etc */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:50:12.743

这可能对您的情况有所帮助：

[http://www.novasoftware.com/download/jquery_fixedtable/jquery_fixedtable.aspx](http://www.novasoftware.com/download/jquery_fixedtable/jquery_fixedtable.aspx)

我也尝试[一下小提琴](http://jsfiddle.net/aEjmN/1/)它可以给你一个提示：

一个单行和一列以及一个带有溢出的div：auto和一个固定的高度和另一个表：

```
<tbody id="user-rows">
   <tr>
     <td>
        <div style="overflow:auto; height:10em; width:20em;">
          <table >
              <tr>
               .
               .
               . 
              </tr>
          </table> 
```

# sql - oracle 嵌套选择查询

> ID：14696422
> 
> 赞同：5
> 
> 时间：2013-02-04T21:59:10.507
> 
> 标签：sql, database, select, oracle11g

我在 oracle db 上有这张表：

![原表](../Images/d5fc82733d2994d6877fa289b9024184.png)

我可以进行嵌套选择查询，将 PARENT 列更改为与其关联的名称吗？像这样：

![想有表](../Images/7502a178df8c106095ffdc6890bfd8f8.png)

我试过了：

```
SELECT PC.ID
,(
  SELECT PC.NAME from PRODUCTS_CATEGORIES PC where PC.PARENT = PC.ID
 )
 ,PC.NAME
  FROM PRODUCTS_CATEGORIES PC 
```

并得到这个错误：

```
Error Message: ORA-01427: single-row sub query returns more than one row 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:10:55.577

你可以这样做

```
SELECT PC.ID,
(
   SELECT DISTINCT PC2.NAME from PRODUCTS_CATEGORIES PC2 
   where PC.PARENT = PC2.ID AND PC2.PARENT = 0
 ),
 PC.NAME
 FROM PRODUCTS_CATEGORIES PC 
```

或者

```
 SELECT PC.ID,NVL(PC2.NAME,PC.PARENT) PC2_NAME,PC.NAME
  FROM PRODUCTS_CATEGORIES PC 
  LEFT OUTER JOIN 
  (SELECT DISTINCT ID, NAME 
  from PRODUCTS_CATEGORIES WHERE PARENT = 0) PC2 ON PC.PARENT = PC2.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:57:27.937

```
select pc.id,
       coalesce(pr.name, 'No Parent') as parent_name,
       pc.name
from products_categories pc
  left join products_categories pr on pc.parent = pr.id; 
```

请注意，`0`作为父母存储并不是一个好主意。它表明您可能没有在`parent`列上定义外键约束 - 您应该这样做。要表明没有父级存在，最好使用`NULL`（当您确实有外键约束时也可以使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:06:10.053

将子查询中的别名更改为 say`PC2`至少会使查询在逻辑上更易于阅读。

```
SELECT PC.ID
,(
  SELECT PC2.NAME from PRODUCTS_CATEGORIES PC2 where PC.PARENT = PC2.ID
 )
 ,PC.NAME
  FROM PRODUCTS_CATEGORIES PC 
```

我很惊讶 oracle 可以计算出连接，因为两个别名都是`PC`. 除了他不撒谎之外 - 有些产品有不止一个父母。

如果你不介意，你可以选择第一个父母（如果这确实是问题）：

```
SELECT PC.ID
,(
  SELECT PC2.NAME from PRODUCTS_CATEGORIES PC2 where PC.PARENT = PC2.ID 
  AND ROWNUM <= 1
 )
 ,PC.NAME
  FROM PRODUCTS_CATEGORIES PC 
```

# javascript - 绝对定位的 DIV 不可见

> ID：14696425
> 
> 赞同：0
> 
> 时间：2013-02-04T21:59:17.600
> 
> 标签：javascript, jquery, html, css

我有两个绝对定位的 DIV（上一个图像和下一个图像）。这是我的结构：

```
<div id="sheet" onclick="close()">
    <div id="popover">
        <div id="previous-image" onclick="previous()">&laquo;</div>
        <img src="http://cynthiawoodyardlandscapedesign.com/watermark.php?src=images/main1.jpg&x=0&y=470&opacity=50" id="popover-image" />
        <div id="next-image" onclick="next()">&raquo;</div>
    </div>
</div> 
```

链接：[http ://cynthiawoodyardlandscapedesign.com/](http://cynthiawoodyardlandscapedesign.com/)

这是我的CSS：

```
#next-image {
    position: absolute;
    right: -100px;
    top: 250px;
    text-align: center;
    line-height: 50px;
    font-size: 50px;
    -webkit-text-stroke: 1px black;
    -moz-text-stroke: 1px black;
    height: 50px;
    width: 50px;
    z-index: 200;
    background: transparent;
    color: white;
}
#previous-image {
    position: absolute;
    left: -100px;
    top: 250px;
    text-align: center;
    line-height: 50px;
    z-index: 200;
    font-size: 50px;
    -webkit-text-stroke: 1px black;
    -moz-text-stroke: 1px black;
    height: 50px;
    width: 50px;
    background: transparent;
    color: white;
} 
```

我的 JavaScript：

```
$("#sheet").click(function() {
    $("#sheet").animate({
        opacity: 0
    }, 200, function() {
        $("#sheet").hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:01:59.527

**编辑**

似乎您已经省略了元素的实际 HTML ，该元素在元素`#sheet`上有一个`display: none`集合，因此所有在 sheet 元素内都是不可见的，包括箭头。

您网站上的实际 HTML 是：

```
<div id="sheet" onclick="close()" style="display: none;">
    <div id="popover" onclick="close()">
        <div id="previous-image" onclick="previous()">«</div>
        <img src="watermark.php?src=images/main1.jpg&amp;x=0&amp;y=420&amp;opactity=50"
        id="popover-image" onclick="close()">
        <div id="next-image" onclick="next()">»</div>
    </div>
</div> 
```

删除`style="display: none;"`它将再次显示箭头。

# bash - bash 脚本如何对后台任务执行相当于 Ctrl-C 的操作？

> ID：14696427
> 
> 赞同：12
> 
> 时间：2013-02-04T21:59:26.257
> 
> 标签：bash

有没有办法调用一个子进程，以便它和它的所有后代都被发送一个中断，就像你 Ctrl-C 一个前台任务一样？我试图杀死一个调用长期运行的孩子的启动器脚本。我已经尝试过`kill -SIGINT $child`（它不会将中断发送给它的后代，所以是无操作的）和`kill -SIGINT -$child`（它在交互调用时有效，但在脚本中运行时无效）。

这是一个测试脚本。长时间运行的脚本是`test.sh --child`. 当您调用时`test.sh --parent`，它会调用`test.sh --child &`然后尝试杀死它。如何让父母成功杀死孩子？

```
#!/bin/bash

if [ "$1" = "--child" ]; then
sleep 1000

elif [ "$1" = "--parent" ]; then
"$0" --child &
for child in $(jobs -p); do
  echo kill -SIGINT "-$child" && kill -SIGINT "-$child"
done
wait $(jobs -p)

else
echo "Must be invoked with --child or --parent."
fi 
```

我知道您可以将长时间运行的子进程修改为`trap`信号，将它们发送到其子进程，然后等待（从 [Ctrl+C 上的 Bash 脚本杀死背景（大）子进程](https://stackoverflow.com/questions/11696691/bash-script-kill-background-grandchildren-on-ctrlc)），但是有什么办法不修改子脚本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-09T14:26:20.927

对于任何想知道的人，这就是您在后台启动子进程并在 ctrl+c 上杀死它们的方式：

```
#!/usr/bin/env bash
command1 &
pid[0]=$!
command2 &
pid[1]=$!
trap "kill ${pid[0]} ${pid[1]}; exit 1" INT
wait 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T22:20:52.180

```
somecommand & 
```

返回孩子的pid`$!`

```
somecommand &
pid[0]=$!
anothercommand &
pid[1]=$!
trap "kill ${pid[0]} ${pid[1]}; exit 1" INT
wait 
```

我将从这个模型开始，而不是从 bash 作业控制（bg、fg、jobs）开始。通常 init 继承并收获孤儿进程。你想解决什么问题？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T22:36:16.107

阅读本文：[如何从脚本发送信号 SIGINT 到脚本？重击](https://stackoverflow.com/questions/2524937/how-to-send-a-signal-sigint-from-script-to-script-bash)

也来自`info bash`

```
 To facilitate the implementation of the user interface to job  control,
   the operating system maintains the notion of a current terminal process
   group ID.  Members of this process group (processes whose process group
   ID is equal to the current terminal process group ID) receive keyboard-
   generated signals such as SIGINT.  These processes are said  to  be  in
   the  foreground.  Background processes are those whose process group ID
   differs from the terminal's; such processes are immune to keyboard-gen‐
   erated signals. 
```

因此，通过*进程组 ID*`bash`区分后台进程和前台进程。如果*process group id*等于*process id*，则该进程是前台进程，并在收到信号时终止。否则它不会终止（除非它被困住）。***`SIGINT`***

 ***您可以看到进程组*ID*

```
ps x -o  "%p %r %y %x %c " 
```

因此，当您`&`从脚本中运行后台进程（使用 ）时，它将忽略该`SIGINT`信号，除非它被捕获。

但是，您仍然可以使用其他信号终止子进程，例如`SIGKILL`,`SIGTERM`等。

例如，如果您将脚本更改为以下内容，它将成功终止子进程：

```
#!/bin/bash

if [ "$1" = "--child" ]; then
  sleep 1000
elif [ "$1" = "--parent" ]; then
  "$0" --child &
  for child in $(jobs -p); do
    echo kill "$child" && kill "$child"
  done
  wait $(jobs -p)

  else
  echo "Must be invoked with --child or --parent."
fi 
```

输出：

```
$ ./test.sh --parent
kill 2187
./test.sh: line 10:  2187 Terminated              "$0" --child 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-30T12:20:49.927

您可以通过`SIGINT`简单的小改动继续使用后台任务：将您的异步子进程调用放入函数 or`{` `}`中，并给它`setsid`以使其拥有自己的进程组。

这是您的脚本，保持它的全部初衷：

*   使用和传播`SIGINT`而不是使用另一个信号

*   只修改调用 from: `"$0" --child &`to`{ setsid "$0" --child; } &`

*   添加获取子实例 PID 所需的代码，这是后台子 shell 中的唯一进程。

这是你的代码：

```
#!/bin/bash

if [ "$1" = "--child" ]; then
sleep 1000

elif [ "$1" = "--parent" ]; then
{ setsid "$0" --child; } &
subshell_pid=$!
pids=$(ps -ax -o ppid,pid --no-headers |
    sed -r 's/^ +//g;s/ +/ /g' |
    grep "^$subshell_pid " | cut -f 2 -d " ");
for child in $pids;  do
  echo kill -SIGINT "-$child" && kill -SIGINT "-$child"
done
wait $subshell_pid

else
echo "Must be invoked with --child or --parent." 
```

**这是 bash 手册中的重要文档部分**

进程组 id 对后台进程的影响（在文档的*作业控制*部分）：

> [...] 进程组 ID 等于当前终端进程组 ID [..] 的进程接收键盘生成的信号，例如 SIGINT。据说这些过程处于前台。 **后台进程**是那些进程组 ID 与终端不同的进程；这样的过程**不受键盘产生的信号的**影响。

`SIGINT`和的默认处理程序`SIGQUIT`（在文档的*信号*部分中）：

> bash 运行的非内置命令将信号处理程序设置为 shell 从其父级继承的值。当作业控制无效时，除了这些继承的处理程序之外，**异步命令还会忽略 SIGINT 和 SIGQUIT 。**

以及关于陷阱的修改（在`trap`内置文档中）：

> **进入 shell 时忽略的信号不能被捕获或重置**。***

# xades4j - Xades 会签文件

> ID：14696429
> 
> 赞同：1
> 
> 时间：2013-02-04T21:59:31.137
> 
> 标签：xades4j

我有一个已经 Xades 签名的 XML 文档。现在我想会签这个签名。我怎样才能用 Xades4j 做到这一点？我已经搜索了文档，但只有示例如何一起签名和会签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:43:01.183

您可以直接使用[格式扩展器](http://code.google.com/p/xades4j/wiki/SignatureEnrichment#Creating_an_Extender)[将新的未签名属性添加](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/production/XadesSignatureFormatExtender.html)到现有签名。

# iphone - 昨天下载了 6.1sdk 现在 [self.tabBarController presentViewController:... 不起作用

> ID：14696430
> 
> 赞同：0
> 
> 时间：2013-02-04T21:59:37.490
> 
> 标签：iphone, ios, xcode

我升级到 x code 4.6 SDK 6.1 现在

```
[self.tabBarController presentViewController:loginViewController animated:YES completion:nil]; 
```

正在穿线。

此代码在 6.0 及以下模拟器上与 6.0 一起使用，但现在 6.0 和 6.1 崩溃，而 5.1 及以下模拟器仍然运行良好。

基本上在我的应用程序中，我调用一个标签栏，然后在其上运行一个登录屏幕，直到它被解雇。

![在此处输入图像描述](../Images/8ad70cb940c03563fa789dac0c5c4b4e.png)

编辑：我没有在任何地方使用 AutoLayout。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:08:57.430

明白了，我的印象是，将 ~iPad/~iPhone 添加到我的 xib 名称将适用于通用应用程序选择自动使用的 xib。好吧，在 5.1 模拟器上它确实如此，但在 6 及更高版本上却没有。

所以这是正确的代码。

```
LoginViewController *loginViewController;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil];
    viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil];
    loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController~iPhone" bundle:nil];
} else {
    viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPad" bundle:nil];
    viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPad" bundle:nil];
    loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController~iPad" bundle:nil];
} 
```

# java - ArrayList 到 ProximityAlert 方法 onReceive - 致命错误

> ID：14696432
> 
> 赞同：0
> 
> 时间：2013-02-04T21:59:43.460
> 
> 标签：java, android, android-intent, broadcast

我正在尝试在接近警报中接收阵列。我唯一可以发送的是一个 Long。这就是我设置接近警报的方式：

```
private void setProximityAlert(double lat, double lon, final long eventID, int requestCode)
{
    float radius = 30f;
    LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Intent intent = new Intent(PROXIMITY_INTENT_ACTION);
    intent.putExtra(ProximityAlert.EVENT_ID_INTENT_EXTRA, eventID);
    intent.putExtra("pole", mPositions);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), requestCode, intent, PendingIntent.FLAG_CANCEL_CURRENT);

    locManager.addProximityAlert(lat, lon, radius, -1, pendingIntent);
} 
```

当我评论“intent.putExtra（“pole”，mPositions）；”时它不会崩溃。

这是数组：

> `private ArrayList<LatLonPair> mPositions;`

这是接收器：

```
public class ProximityAlert extends BroadcastReceiver {

public static final String EVENT_ID_INTENT_EXTRA = "EventIDIntentExtraKey";

@Override
public void onReceive(Context context, Intent intent) {
    long eventID = intent.getLongExtra(EVENT_ID_INTENT_EXTRA, -1);
    ArrayList<LatLonPair> list = (ArrayList<LatLonPair>) intent.getSerializableExtra("list");
    Toast.makeText(context, "Event: " + eventID, Toast.LENGTH_SHORT).show();
}
} 
```

没有一个 putExtra 它正在工作，但我需要那个数组。所以这对我不起作用： [Array List of objects via intent](https://stackoverflow.com/questions/8109867/array-list-of-objects-via-intent)

LogCat 错误：

```
FATAL EXCEPTION: main
 java.lang.RuntimeException: Unable to start activity ComponentInfo{co.uk.gauntface.android.proximityalerts/co.uk.gauntface.android.proximityalerts.ProximityDisplay}: java.lang.RuntimeException: Parcel: unable to marshal value co.uk.gauntface.android.proximityalerts.models.LatLonPair@44fb61f0
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.RuntimeException: Parcel: unable to marshal value co.uk.gauntface.android.proximityalerts.models.LatLonPair@44fb61f0
    at android.os.Parcel.writeValue(Parcel.java:1116)
    at android.os.Parcel.writeList(Parcel.java:510)
    at android.os.Parcel.writeValue(Parcel.java:1076)
    at android.os.Parcel.writeMapInternal(Parcel.java:479)
    at android.os.Bundle.writeToParcel(Bundle.java:1552)
    at android.os.Parcel.writeBundle(Parcel.java:493)
    at android.content.Intent.writeToParcel(Intent.java:5438)
    at android.app.ActivityManagerProxy.getIntentSender(ActivityManagerNative.java:2206)
    at android.app.PendingIntent.getBroadcast(PendingIntent.java:230)
    at co.uk.gauntface.android.proximityalerts.ProximityDisplay.setProximityAlert(ProximityDisplay.java:91)
    at co.uk.gauntface.android.proximityalerts.ProximityDisplay.registerIntents(ProximityDisplay.java:79)
    at co.uk.gauntface.android.proximityalerts.ProximityDisplay.onCreate(ProximityDisplay.java:43)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    ... 11 more 
```

这是 LatLonPair 类：

```
package co.uk.gauntface.android.proximityalerts.models;

import android.os.Parcel;
import android.os.Parcelable;

import com.google.android.maps.GeoPoint;

public class LatLonPair implements Parcelable{
private double mLatitude;
private double mLongitude;
private String popis;
private String nadpis;

public LatLonPair() {
    mLatitude = -2.60312596534349;
    mLongitude = 51.4558140934651;
    popis = "Nezadany popis";
    nadpis = "Nezadany nadpis";
}

public LatLonPair(double latitude, double longitude, String popis, String nadpis) {
    mLatitude = latitude;
    mLongitude = longitude;
    this.popis = popis;
    this.nadpis = nadpis;
}

public static boolean isValid(double lat, double lon) {

    if((lon >= -180 && lon <= 180) && (lat >= -90 && lat <= 90)) {
        return true;
    }

    return false;
}

public String getPopis() {
    return popis;
}

public String getNadpis() {
    return nadpis;
}

public void setLatitude(double latitude) {
    mLatitude = latitude;
}

public double getLatitude() {
    return mLatitude;
}

public void setLongitude(double longitude) {
    mLongitude = longitude;
}

public double getLongitude() {
    return mLongitude;
}

public GeoPoint getGeoPoint() {
    return new GeoPoint((int) (mLatitude * 1E6), (int) (mLongitude * 1E6));
}

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:52:45.147

问题是我没有`implements Parceable`，之后就没有了`CREATE`。之后它没有崩溃并且数组长度还可以，但是项目具有默认值。我猜问题是在 Parceable 中保存变量的错误实现 - 它自行重置。所以我放弃了，只向广播接收器发送了我需要的几个字符串。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:44:12.443

尝试在类中调用`super(dest,flags)`被覆盖的`writeToParcel`方法`LatLonPair`

# c# - 无法从“字符串”转换为“System.Web.UI.WebControls.ListViewDataItem”

> ID：14696433
> 
> 赞同：1
> 
> 时间：2013-02-04T21:59:47.893
> 
> 标签：c#, asp.net, listview, subitem

并且也不能将子项添加到 .net 中的 ListView 控件，例如在 c# 中，我有以下代码：

```
this.listView1.Items.Add(A.Key);
this.listView1.Items[i].SubItems.Add(Convert.ToString(A.Value));
this.listView1.Items[i].SubItems.Add(Convert.ToString(A1[A.Key])) 
```

如何在 asp.net 页面中“转换”或使用相同的功能，以及在列表视图控件中添加项目和子项目的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:11:05.840

添加时，您需要添加一个 listviewitem 对象，或者您需要添加值和索引。

Microsoft 文档中的示例代码应该会有所帮助：

[https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.listview.items?view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.listview.items?view=netframework-4.8)

# c# - 类返回的默认值

> ID：14696435
> 
> 赞同：2
> 
> 时间：2013-02-04T22:00:04.840
> 
> 标签：c#, wpf, class, properties, tostring

我在 c# 中创建了一个小的自定义类来存储扑克牌的数据：

```
public class Card
    {
        public string suit { get; set; }
        public int number { get; set; }
        public string val
        {
            get
            {
                return number+" of "+suit;
            }
        }
    } 
```

如果 a 有一个类型为 的变量`Card`，并且刚刚打印`card.toString()`，它将打印名称空间、窗口名称和类名。有没有一种方法可以`val`通过引用打印出价值`card`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:01:08.457

使用[`override`](http://msdn.microsoft.com/en-us/library/ebca9ah3%28v=vs.110%29.aspx)关键字。

```
public override string ToString()
{
    return number+" of "+suit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:01:22.197

是的，你只需要重写[`ToString()`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)方法（从`Object`）。

```
public override string ToString()
{
    return val;
} 
```

这也是您在检查对象时在 Visual Studio 调试器中看到的默认值。

由于这个重载，一些方法（如`String.Format`, `Console.Write`, `Console.WriteLine`, ...）将使用这个新的字符串表示，而无需自己调用 ToString。

```
Console.WriteLine(card); 
```

相当于：

```
Console.WriteLine(card.ToString()); 
```

这将等效于（在覆盖之后）：

```
Console.WriteLine(card.val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:01:39.093

```
public class Card
{
    public string suit { get; set; }
    public int number { get; set; }
    public string val
    {
        get
        {
            return number+" of "+suit;
        }
    }

    public override string ToString()
    {
        return val;
    }

} 
```

# performance - 如何在 Sencha 中动态加载轮播项目

> ID：14696439
> 
> 赞同：1
> 
> 时间：2013-02-04T22:00:18.817
> 
> 标签：performance, dynamic, sencha-touch, sencha-touch-2, carousel

我的产品视图有问题。我想显示产品数据。每个产品都是一个带有图像和文字的“盒子”。我想在一个面板上显示六种产品。事实上，我有很多产品，我想要一个“旋转木马式的视图”。我的想法如下：在面板上放置 6 个产品。加载 3 个面板并将每个面板作为轮播项目放置，以便我可以滑动以进入另一个“页面”。

为了节省性能，我尝试在轮播中始终只有 3 个项目。活动的“页面”和之前的页面，以及之后的页面，这样我就可以向左/向右滑动并且可以加载下一页。

我试图将我的逻辑放在轮播的“onActiveItemChange”-Listener 中，但我在添加/删除轮播项目时遇到了很多问题。所以我的问题是有可能做我想做的事吗？

有更好的选择吗？当然我的数据在商店里，但我不想要那个标准的列表视图。

另一个问题：因为我第一次尝试使用旋转木马失败了，所以我尝试构建一个带有面板的 Ext.Container（卡片布局）。但是我怎样才能在面板上收听滑动事件？？？

感谢帮助 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:46:06.653

即使我也在做同样的事情，使用旋转木马和商店。轮播的每一页都是一个视图（面板），它有 4/6 个子视图（面板）。在商店加载时，我正在创建这些孩子，然后将它们分成页面并将这些页面添加到轮播中。

这对我来说很好，在 activeItemChange 上我正在加载更多页面：

```
 activeitemchange: function(container, value, oldValue, eOpts) {
        var activeItemIndex = container.getActiveIndex();
        var galleryTotal = container.getInnerItems() ? container.getInnerItems().length : 0;
        if ((activeItemIndex + 1 == galleryTotal)) {
            console.log("At last page, time to load");
            var store = this.config.store;
            store.nextPage({ addRecords: true });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:06:46.750

我想我理解你的问题。假设您有 3 个项目并且您总是查看中间的一个（当您前进时，项目 0 被销毁并创建一个项目）。并假设每个项目都有一个与其在列表中的位置相关联的 id。

```
var current_item = Ext.getCmp('carousel_name').getActiveItem().getId();
current_item = Number(current_item.replace('item', ''));

//Objects to create
var next_item = current_item + 1;
var previous_item = current_item - 1;

//Objects to destroy
var next2_item = current_item + 2;
var previous2_item = current_item - 2;

//Create items
var createItem = function(item_location, type){
    var carousel_item = create_content(item_location);

    if(type == 'next'){
        Ext.getCmp('carousel_name').add(carousel_item);
    }else if(type == 'previous'){
        Ext.getCmp('carousel_name').insert(0, carousel_item);
        Ext.getCmp('carousel_name').setActiveItem(1);
    }
}
createItem(next_item,'next');
createItem(previous_item,'previous');

//Destroy items
if(Ext.getCmp('item'+previous2_item)){
    Ext.getCmp('carousel_name').getItems().items[0].destroy();//This is a hack, for some reason with the above commented out line, the item was getting destroyed but wasn't being removed from carousel_name
}
if(Ext.getCmp('item'+next2_item)){
    Ext.getCmp('carousel_name').getItems().items[Ext.getCmp('carousel_name').getMaxItemIndex()].destroy();//This is a hack, consistency with previous destroy (above)
} 
```

# c# - Dynamics CRM 2011 - 通过插件块创建实体

> ID：14696441
> 
> 赞同：5
> 
> 时间：2013-02-04T22:00:25.453
> 
> 标签：c#, plugins, dynamics-crm-2011

**问题：**我们使用 CRM for Outlook 插件自动记录我们的支持电子邮件，但员工之间的内部电子邮件（其中一些包含敏感信息）也被记录下来。

**理想的解决方案：**我正在尝试编写一个事件前（“创建电子邮件”消息）插件来阻止内部电子邮件的自动记录，但（显然）阻止消息执行的唯一方法是在事件前阶段，但这总是会导致在 Outlook 中显示错误消息（我们显然不能拥有）。根据文档，只有“InvalidPluginExecutionExeception”应该向用户显示消息，但情况并非如此，因为所有异常都会在用户的 Outlook 应用程序中导致错误消息。

**潜在解决方案：**还有一个“CheckPromoteEmail”消息（根据文档）确定是否应将电子邮件提升到 CRM（我假设“提升到 CRM”的意思是“使电子邮件实体存储在 CRM 中”） ，但我在上下文中找不到任何可以让我告诉 CRM 不要推广电子邮件的内容。是否有一些标记隐藏在我可以设置的上下文中，或者以某种方式嵌入电子邮件以便 CRM 自己的逻辑决定不存储它？

**解决方法解决方案：**我知道的唯一其他解决方案（在[此处](https://stackoverflow.com/questions/13365153/prevent-create-in-plugin)提到）仅在创建电子邮件后清除其主题和内容，但我宁愿首先停止创建电子邮件而不是编辑或删除在浪费时间和资源创建电子邮件之后。

**有没有一种干净的方法来停止插件的操作？**还是来自任何地方？如果没有，有谁知道微软为什么不提供这个功能？如果操作失败，他们已经在后台具有铁定的回滚功能，为什么不给我一种调用回滚的方法呢？

这是我的代码，以防它有助于回答我的问题：

```
public class InternalEmailFilter : IPlugin
{
    void IPlugin.Execute(IServiceProvider serviceProvider)
    {
        IPluginExecutionContext _context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
        Entity e = (Entity)_context.InputParameters["Target"];
        bool shouldStore = ShouldStoreInCRM(e);

        if (shouldStore == false)
        {
            throw new Exception(); //attempting to stop the operation without an InvalidPluginExecutionException, but still results in error message to user
        }            
    }

    protected bool ShouldStoreInCRM(Entity e)
    {

           List<Entity> parties = new List<Entity>();

            var atttributes = e.Attributes;
            if (atttributes.ContainsKey("to") == true) parties.AddRange((atttributes["to"] as EntityCollection).Entities);
            if (atttributes.ContainsKey("from") == true) parties.AddRange((atttributes["from"] as EntityCollection).Entities);
            if (atttributes.ContainsKey("cc") == true) parties.AddRange((atttributes["cc"] as EntityCollection).Entities);
            if (atttributes.ContainsKey("bcc") == true) parties.AddRange((atttributes["bcc"] as EntityCollection).Entities);

            foreach (Entity p in parties)
            {
                if (p.LogicalName == "activityparty" && p.Attributes.ContainsKey("addressused") == true && p.Attributes["addressused"] != null)
                {
                    if (p.Attributes["addressused"].ToString().ToLower().Contains("@ourdomain.com") == false)
                    {
                        return true; //someone connected in the email is not an employee, store the email
                    }
                }
            }

            return false;  //everyone was an employee, do not store          
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T00:00:33.320

经过大量的血汗和泪水，我终于想出了如何做到这一点：

**您必须在“创建电子邮件”消息上使用异步事件后插件，以便在创建电子邮件后使用 CRMService 从数据库中删除电子邮件。**它必须是异步的，因为您需要等待 CRM 完成创建并“放开”实体，然后才能将其删除。否则，进程挂起。

这些解决方案中的任何一个都会更好，但作为参考，您不能：

1.  **在事件前抛出异常**以取消创建/推广电子邮件操作，而不向用户显示错误消息或对其 Outlook 造成严重破坏。即使只有 InvlaidPluginExectuionExecption 应该向用户显示消息，但所有异常都会向用户显示错误消息。
2.  **阻止**向 CRM 推广电子邮件。CheckPromoteEmail 消息前事件（令人惊讶的是）没有提供有关可能被提升的消息的信息（因此没有数据可用于决定是否应该提升消息）并且没有任何东西可用于告诉 CRM 不提升消息。而且，如果您使用 pre/post-event 并尝试使用 Output 参数并在那里更改 ShouldPromote 标志，它什么也不做。
3.  **在为其创建实体之前**清除电子邮件的正文内容- 您在前事件中对正文内容所做的任何更改都不会保留在执行上下文中，并且会在核心操作开始时丢失。****

 **令人抓狂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:17:23.450

抱歉，解决方法是您唯一的选择。通过插件停止操作的唯一方法是抛出异常。微软为什么这样做？我假设他们不希望插件默默地失败。

至于解决方法，您应该在事件前插件中清除它们进入数据库*之前清除主题和正文，然后在事件后异步插件中清除记录本身。*这样，敏感信息也不会进入任何审计日志。

最后，看看`DeliverPromoteEmail`而不是`CreateEmail`. `DeliverPromoteEmail`是 Outlook 用于创建跟踪电子邮件的内容。这样，您仍然可以在不触发此插件的 CRM UI 中创建电子邮件（如果需要）。

*edit* `CheckPromoteEmail`仅查看主题中的跟踪令牌（和/或电子邮件标头中的 MessageID）来决定是否应跟踪电子邮件，因此它也没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:39:49.390

您可以在个人设置中选择跟踪所有电子邮件、对 CRM 电子邮件的电子邮件回复（已跟踪的电子邮件）、来自记录（帐户等）的电子邮件以及来自启用了电子邮件的记录的电子邮件。**

# functional-testing - Rails rspec 控制器测试与集成测试

> ID：14696443
> 
> 赞同：6
> 
> 时间：2013-02-04T22:00:33.020
> 
> 标签：functional-testing, rspec-rails

我刚刚为 Rails 应用程序编写了详细的 rspec capybara 集成和单元测试，其中包括模拟 Omniauth (twitter) 登录、填写表单、数据验证等。但是，我想知道是否需要编写单独的控制器或功能测试。

非常感谢您的意见和任何指向进一步阅读等的链接。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-04T23:50:03.657

我将在这里扮演魔鬼的拥护者，因为我知道我可能是少数持有这种观点的人：我实际上更喜欢进行非常彻底的控制器测试。几个原因：

1) 我发现在控制器级别系统地测试每条路径和结果比在集成测试级别更容易。我的集成测试主要只是快乐路径，以及一些更常见的错误路径。

2）很多潜在的安全问题发生在控制器层面。彻底的测试帮助我确保没有任何恶意可以通过我的模型逻辑。

3) 这是主观的，但它确实迫使我思考我的应用程序可能经历的一些长尾路径。如果有人试图在 URL 中输入无效的密码重置令牌怎么办？控制器测试确保我考虑所有选项。

4) 与集成测试不同，它们的测试相当简单。每个动作只是一个红宝石方法！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T21:34:48.687

就个人而言，我认为如果您的请求（集成）规范正在执行您所涵盖的所有代码路径。Ryan Bates 有一个很棒的 Railscast 关于他如何在这里测试：[http](http://railscasts.com/episodes/275-how-i-test?autoplay=true) ://railscasts.com/episodes/275-how-i-test?autoplay=true并且大约 5:05 他说了类似的话。和你一样，我喜欢编写集成测试而不是控制器规范。大多数时候控制器只是简单地前置 CRUD 类型的操作（特别是如果您小心地将域逻辑排除在控制器之外），因此您要测试的只是脚手架。

# javascript - 将 Javascript 对象插入 Titanium SQLite 数据库

> ID：14696445
> 
> 赞同：2
> 
> 时间：2013-02-04T22:00:40.453
> 
> 标签：javascript, sqlite, titanium

如果我有一个 javascipt 对象：

```
 var person = new Object();
 person.name = "newPerson";
 person.occupation = "Programmer";
 person.stateName = function(){
 console.log(this.name);
}; 
```

使用基于 SQLite 的 Titanium.Database API，如何将此对象存储在单个字段中？以下工作正常：

```
var db = Titanium.Database.openFile(Titanium.Filesystem.getFile(
Titanium.Filesystem.getApplicationDataDirectory(),'myDatabase.db'));   
db.execute("CREATE TABLE IF NOT EXISTS myTable (persons TEXT)"); 
```

然后我想将对象存储在表字段中：

```
db.execute("INSERT INTO myTable (persons) VALUES(?)", JSON.stringify(person)); 
```

但返回以下内容：

```
SQL Statement invalid or database missing
[21:55:35:300] [Titanium.Database.DB] [Error] Exception executing: INSERT INTO myTable
(person) VALUES(?), Error was: SQL Statement invalid or database missing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:33:24.953

你的sql错了。你必须做两件事：

1.  在字符串化的 json 中转义你的 "s。

2.  在 SQL 语句中将该字符串括在引号中。

你正在做的相当于：

`db.execute("INSERT INTO myTable (persons) VALUES({name: "newPerson, stateName: function() {console.log(this.name)})");`

更简单：`INSERT INTO myTable (persons) VALUES( {name:"Joe"} );`

名称部分可能在引号中也可能不在引号中，这取决于您执行此操作的位置。（最好添加它们，使您存储的对象成为真正的 JSON。）

你想做的是`INSERT INTO myTable(persons) VALUES ( "{\"name\": \"Joe\"} " );`

请注意，您的 VALUES( **something** ) 没有引号，您需要 VALUES( **"something"** ) 带引号。此外，您必须转义某些内容中的任何引号**（**并做其他事情，但这是另一个话题。）

所以你的陈述应该更像这样：

```
INSERT INTO myTable(persons) VALUES("{\"name\":\"newPerson\", \"stateName\": function stateName(){console.log(this.name)}}"); 
```

# c++ - 查找数组中数字符号的变化量

> ID：14696449
> 
> 赞同：-3
> 
> 时间：2013-02-04T22:00:53.463
> 
> 标签：c++, arrays, numbers, sign

基本上，我有一个给定“x”数字的数组，我必须输出数组数字中符号变化的次数。

例如数组是：2 -4 5 6 7 -2 5 -7

输出应该是 5。为什么？因为符号第一次在-4，第二次在5，第三次在-2，第四次在5，最后一次在-7。共5次。

所以，到目前为止我有这个，但这并不完美：

```
#include <iostream>
using namespace std;

int main()
{
int a[50],n,cs=0,ha=0;

cin >> n;
for (int i=0;i<n;i++)
{
    cin >> a[i];
}
for (int j=1;j<=n;j++)
{
    if(a[j]<0 && a[j-1]>0)
    cs++;
    else if(a[j]>0 && a[j-1]<0)
    cs++;
}
cout << cs << endl;
return 0;
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:07:08.783

您的问题是您遇到了未初始化的内存，这导致了未定义的行为。`a[0]`您在输入循环中初始化`a[n-1]`，然后在计算循环中从`a[0]`(with j=1 and `a[j-1]`) 读取到`a[n]`(j=n and `a[j]`)。

只需将其更改为`j < n`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:08:33.047

如果您可以选择 STL，则可以使用`std::adjacent_find`. 这是您在完整程序中使用它的方式：

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main()
{
    vector<int> v { 1 , 3, -5, 8, -9, -10, 4 };

    auto signSwitch = [] (int x, int y) { return (abs(x) == x) ^ (abs(y) == y); };

    int cnt = 0;
    auto i = adjacent_find(begin(v), end(v), signSwitch);
    while (i != end(v))
    {
        cnt++;
        i = adjacent_find(i + 1, end(v), signSwitch);
    }

    cout << cnt;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:07:55.963

您的第二个循环应该终止于`j < n`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T22:11:59.990

在你的第二个 for 循环中，你不应该让 j 转到 <=。它应该只是

```
 for (int j=1;j<n;j++) 
```

# .net - .NET 服务应用程序启动缓慢

> ID：14696451
> 
> 赞同：1
> 
> 时间：2013-02-04T22:01:04.283
> 
> 标签：.net, service

我有一个用 c# 编写的 windows 服务，在 windows 7 上运行。有时它会在系统重新启动期间无法启动，因为它超过了 30 秒超时。

我创建了另一个简单的服务（从 VS 2012 模板创建，不做任何更改）来测试，并使用进程监视器监视开始时间。我发现加载 .NET 内容并达到我的“主要”功能需要 20 多秒。

有人知道在系统启动期间加快 .NET 加载的任何技巧吗？

我试过“NGEN executequeueditems”，但没有帮助。我的测试服务没有任何依赖关系。

该服务可以在重新启动时间后非常快速（在 1 秒内）手动启动，因为所有 .NET 内容都已初始化并保留在内存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:16:48.960

也许您应该尝试在启动时延迟您的服务。[这篇文章](http://www.techrepublic.com/blog/datacenter/delayed-start-feature-increases-options-for-windows-services/1552)给出了一些细节。

# java - 是否可以为 ~100 个常量创建位掩码？

> ID：14696454
> 
> 赞同：3
> 
> 时间：2013-02-04T22:01:10.790
> 
> 标签：java, primitive-types, bitmask

这是否意味着第 100 个常数必须是 1 << 100？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T22:08:59.017

您可以使用一个 BitSet，它具有您想要设置或清除的任意数量的位。例如

```
BitSet bitSet = new BitSet(101);
bitSet.set(100); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T22:04:26.700

您只能使用原始类型中的位数创建一个简单的位掩码。

如果您有一个 32 位（如在普通 Java 中）int，那么 1 << 31 是您可以移动低位的最大值。

要获得更大的常数，您可以使用一个 int 元素数组，然后通过除以 32（使用 32 位 int）并使用 % 32（模数）移动到选定的数组元素中来确定要使用的数组元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T22:05:09.483

您不能直接这样做，因为可用作位掩码的原始数字的最大大小实际上是一个`long`值的 64 位。您可以做的是将位掩码拆分为 2 个或多个`int`s 或`long`s，然后手动管理它。

```
int[] mask = new int[4];
final int MAX_SHIFT = 32;

void set(int b) {
  mask[b / MAX_SHIFT] |= 1 << (b % MAX_SHIFT);
}

boolean isSet(int b) {
  return (mask[b / MAX_SHIFT] & (1 << (b % MAX_SHIFT))) != 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T22:48:52.230

Effective Java Item #32 建议使用[EnumSet](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)而不是位字段。在内部，它使用位向量，因此效率很高，但是，由于每个位都有一个描述性名称（枚举常量），因此它变得更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T22:05:28.883

是的，如果您打算将任何或所有这些常量按位或全部放在一起，那么您将需要一个位来表示每个常量。当然，如果你使用 an`int`你将只有 32 位，而 a`long`只会给你 64 位。

# ssh - 如何配置 nginx 通过 subdomain.domain.tld:80 使 ssh 服务器可用

> ID：14696460
> 
> 赞同：8
> 
> 时间：2013-02-04T22:01:30.193
> 
> 标签：ssh, nginx, subdomain

我想通过端口 80 上的子域使端口 22 上的 ssh 服务器可用。

我认为应该是这样的：

```
server {
    listen          ssh.domain.tld:80;
    server_name     ssh.domain.tld;

    location / {
        proxy_pass          http://localhost:22;
    }
} 
```

但它不会起作用。nginx 将接受这个并从这个配置开始，但我只从`ssh.domain.tld:80`.

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-19T16:55:07.707

由于 Nginx 版本 1.9.0，NGINX 支持 ngx_stream_core_module 模块，它应该使用 --with-stream 启用。当启用流模块时，它们可以使用 ssh 协议 tcp 代理

```
stream {
upstream ssh {
    server localhost:22;
}
    server {
    listen        80;
    proxy_pass    ssh;
} } 
```

[https://www.nginx.com/resources/admin-guide/tcp-load-balancing/](https://www.nginx.com/resources/admin-guide/tcp-load-balancing/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-30T13:37:37.353

你应该使用[sslh](http://www.rutschle.net/tech/sslh.shtml)。

将 nginx 配置为在与 80 不同的端口上运行，例如 800，然后配置 sslh 以将 Web 流量重定向到`/etc/default/sslh.conf`文件中的该端口。

此设置可能需要 15 分钟。或更少。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T22:24:25.960

基本上你找错地方了：

*   stock nginx 可以代理网络和/或电子邮件流量，它根本不处理 ssh 流量
*   子域是一个 dns 问题：在您的 dns 设置中配置它，您需要一个`A`和/或`AAAA`记录链接`ssh.domain.tld`到您的 ssh 服务器`ip-adres`
*   您的 ssh 服务器侦听的端口是 ssh 服务器设置（`man sshd_config`具体参见`ListenAddress`and`Port`指令）

# javascript - CasperJS 和警报框

> ID：14696463
> 
> 赞同：5
> 
> 时间：2013-02-04T22:01:42.877
> 
> 标签：javascript, testing, tdd, phantomjs, casperjs

如何测试我页面上的警报框是否被调用？我可以抓取警报框的文本并对其进行评估吗？

我在 CasperJS 中的点击是这样完成的：

```
casper.waitForSelector('a[href="javascript:UserLogin()"]',
    function success() {
        this.test.comment("Submiting the bad login info");
        this.test.assertExists('a[href="javascript:UserLogin()"]');
        this.click("a#h_login");
    },
    function fail() {
        this.test.assertExists('a[href="javascript:UserLogin()"]');
}); 
```

UserLogin 函数检查并在这种情况下返回：

```
alert('Login has failed.'); 
```

我该如何检查？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T22:08:40.843

您必须收听`remote.alert` [事件](http://casperjs.org/events-filters.html)：

```
casper.on('remote.alert', function(message) {
    this.echo('alert message: ' + message);
    // or if you want to test it
    this.test.assertMatch(message, /Login has failed/);
}); 
```

尝试使其更加*同步*：

```
function testAlert(message) {
    this.test.assertMatch(message, /Login has failed/);
}

casper.then(function() {
    // temporarily registering listener
    this.on('remote.alert', testAlert);
});

casper.waitForSelector('#login', function success() {
    this.test.pass('selector was found');
    this.click("#login");
}, function fail() {
    this.test.fail('selector was found');
});

casper.then(function() {
    this.removeListener('remote.alert', testAlert);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-26T12:53:23.067

1.1-beta4 版本提供[`casper.waitForAlert`了](http://docs.casperjs.org/en/latest/modules/casper.html#waitforalert). 有了它，当您需要对页面上的不同警报做出反应时，您可以编写更好的测试。

# json - ISO 8859-1 字符

> ID：14696467
> 
> 赞同：0
> 
> 时间：2013-02-04T22:01:55.943
> 
> 标签：json, iso-8859-1

我正在开发一个应用程序，我们在其中使用 JSON 文件进行英语/西班牙语/法语翻译。如果我需要使用 ISO 8859-1 字符（它们的实体编号）作为西班牙语和法语单词的额外符号，我有点困惑。一切都在正确渲染（例如：é í ñ ¿），但我不确定我是否做错了。

前任。W/ ISO 8859-1 字符（这些使用实体名称，我听说使用实体编号更好？）：

```
 "resultsperpage":"Resultados / P&aacute;gina",

  "customer":"Cliente",

  "corp":"Corporaci&oacute;n",

  "displaycorp":"MostrarCorporaci&oacute;n", 
```

前任。没有：

```
 "resultsperpage":"Resultados / Página",

  "customer":"Cliente",

  "corp":"Corporación",

  "displaycorp":"Mostrar Corporación", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:49:39.683

使用第二种方法。

绝对确保在以编程方式读取或写入文件或执行 http 时始终使用相同的编码。

永远不要依赖系统的默认编码。始终指定您选择的编码。

确保您始终以正确的编码编辑这些文件。

编码本身并不重要。我推荐 utf-8 而不是 ISO 8859-1 或其他。

# sql - 在 SQL 中更改聚合函数中的行/列

> ID：14696470
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:03.300
> 
> 标签：sql, sql-server, database, aggregation

这是一个 SQL 函数 - 对复杂性感到抱歉；

```
SELECT [Codes].[Description], RawData.FS, COUNT(*)  As 'Total Units' 
FROM RawData, Codes, Categories  
WHERE RawData.ACR = Codes.Name
AND   Codes.CategoryName = 'ACR'
GROUP BY [Codes].[Description], [RawData].[FS]
ORDER BY [RawData].[FS] 
```

在描述中 - 有一个代码表，其中包含在表 RawData 中为每一列使用的代码。第二个名为 Categories 的表跟踪所有这些列，Codes.CategoryName 是 Categories.Name 的 FK。基本上为 RawData 中的每个编码值创建一个查找表。

字段 RawData.FS 有 3 个值 NULL、1 和 2。RawData.ACR 有 3 个值对应于小于 1 英亩、1-10 英亩、> 10 英亩的描述。上面的查询给出了正确的结果

```
Description                          FS Total Units
House on less than one acre               57080
House on one to less than ten acres        4760
House on ten acres or more                  880

House on less than one acre           1   31496
House on one to less than ten acres   1    4312
House on ten acres or more            1     360

House on less than one acre           2  594404
House on one to less than ten acres   2   74688
House on ten acres or more            2    9104 
```

这里的挑战是重做 SQL，而不是 3 组 3 行，它们是对应于 FS 值的列。换句话说，标题将是（对于第一行）；

```
Description                        FS=NULL    FS=1      FS=2    
House on less than one acre         57080    31496    594404 
```

作为更多帮助 - 这是创建类别和代码结构的 SQL

```
CREATE TABLE Categories (
 [Name] NVARCHAR(50) PRIMARY KEY,
 [Description] NVARCHAR(200) 
)

CREATE TABLE Codes (
 [Name] NVARCHAR(50),
 [CategoryName] NVARCHAR(50) FOREIGN KEY REFERENCES Categories(Name),
 [Description] NVARCHAR(200) ) 
```

RawData 中的每个字段都经过编码（实际上数据字典位于[http://www.census.gov/acs/www/Downloads/data_documentation/pums/DataDict/PUMS_Data_Dictionary_2009-2011.pdf](http://www.census.gov/acs/www/Downloads/data_documentation/pums/DataDict/PUMS_Data_Dictionary_2009-2011.pdf)）。这是那些经典的 SQL 谜题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:07:15.013

听起来您想要执行以下操作，将值*转换*`FS`为列：

```
SELECT [Codes].[Description], 
  sum(case when RawData.FS is null then 1 else 0 end) FS_null,
  sum(case when RawData.FS = 1 then 1 else 0 end) FS_1,
  sum(case when RawData.FS = 2 then 1 else 0 end) FS_2
FROM RawData
INNER JOIN Codes
  ON RawData.ACR = Codes.Name
INNER JOIN Categories  
  ON Codes.CategoryName = Categories.Name
WHERE Codes.CategoryName = 'ACR'
GROUP BY [Codes].[Description] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:11:52.647

未经测试，但似乎一个案例和一个子选择会起作用。

```
Select description, 
case when fs is null then total_units end as 'FS=Null',
CASE WHEN fs = 1 then total_units end as 'FS=1',
case when fs = 2 then total_units end as 'FS=2'
FROM (
  SELECT [Codes].[Description], 
  RawData.FS, COUNT(*)  As 'Total_units' 
  FROM RawData, Codes, Categories  
  WHERE RawData.ACR = Codes.Name
  AND   Codes.CategoryName = 'ACR'
  GROUP BY [Codes].[Description])
ORDER BY description 
```

# r - 使用 facet_grid 根据每个面板上的数据缩放 yaxix

> ID：14696472
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:10.123
> 
> 标签：r, ggplot2

```
t <- structure(list(X = 1:30, Country = structure(c(3L, 1L, 3L, 1L, 
3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 3L, 1L, 2L, 2L, 
3L, 1L, 3L, 1L, 3L, 1L, 2L, 3L, 1L, 3L), .Label = c("China", 
"Germany", "USA"), class = "factor"), Industry = structure(c(3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("Agriculture", 
"IT", "Manufacturing"), class = "factor"), Date = structure(c(15393, 
15393, 15394, 15394, 15397, 15397, 15398, 15398, 15399, 15399, 
15400, 15400, 15401, 15401, 15404, 15404, 15405, 15405, 15405, 
15405, 15406, 15406, 15407, 15407, 15408, 15408, 15408, 15411, 
15411, 15412), class = "Date"), count = c(4L, 1L, 5L, 1L, 4L, 
1L, 4L, 1L, 8L, 1L, 7L, 1L, 4L, 1L, 4L, 1L, 9L, 1L, 4L, 3L, 4L, 
1L, 4L, 1L, 9L, 1L, 2L, 7L, 1L, 4L)), .Names = c("X", "Country", 
"Industry", "Date", "count"), row.names = c(NA, 30L), class = "data.frame") 
```

我需要使 yaxis 比例与该面板中的数据成比例。当我这样做时：

```
# install.packages("ggplot2", dependencies = TRUE)
# install.packages("scales", dependencies = TRUE)
require(ggplot2)
require(scales)
p1 <- ggplot(t, aes(Date, count)) + 
  geom_bar(aes(fill=Industry), stat="identity", position="stack") + 
  geom_smooth(method="lm", se=T, size=0.5, colour="yellow") +
  xlab("Date") + ylab("Number of Input") +
  facet_grid(Industry~Country, scale="free", margins=T) + 
  theme(legend.position = 'bottom', legend.direction = 'horizontal', legend.title = element_blank(), legend.text = element_text(size=10, face = 'bold')) +theme(axis.title.x = element_text(face="bold", colour="white", size=12), axis.text.x  = element_text(angle=90, face="bold", size=10),axis.title.y = element_text(face="bold", colour="white", angle=90, size=10), axis.text.y=element_text(size=10, face="bold"),legend.text = element_text(size=10, face = 'bold'), legend.title = element_blank()) +scale_x_date(breaks = "3 month", minor_breaks = "1 week", labels=date_format("%b-%y"))+ theme(strip.text.x = element_text(size=10, face="bold", colour="navyblue"), strip.background = element_rect(colour="blue", fill="white"))+ ggtitle("Number of Monthly Breaches")+ 
  theme(plot.title=element_text(size=13, colour="white", face="bold")) + ylim(0, max(t$count)) 
```

所有面板的 yaxis 限制都相同，我试过这个

```
scales=free_y 
```

它似乎不起作用。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:32:17.547

伙计，您可能已经尝试过`scales="free_y"`，但`+ ylim(0, max(t$count)`代码末尾有一个。删除它，看看会发生什么；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:45:03.953

上面的答案很好。我只想构建您的代码，因为它看起来很难维护。我不会把情节和主题陈述混为一谈。

单独的情节：

```
p1 <- ggplot(dat, aes(Date, count)) + 
  geom_bar(aes(fill=Industry), stat="identity", position="stack") + 
  geom_smooth(method="lm", se=T, size=0.5, colour="yellow") +
  facet_grid(Industry~Country, scales="free_y", margins=T) + 
  scale_x_date(breaks = "3 month", minor_breaks = "1 week", 
             labels=date_format("%b-%y")) 
```

然后主题

```
mytheme <-  theme(legend.position = 'bottom', legend.direction = 'horizontal',
        legend.title = element_blank(), 
        legend.text = element_text(size=10, face = 'bold')) +
  theme(axis.title.x = element_text(face="bold", colour="white", size=12), 
        axis.text.x  = element_text(angle=90, face="bold", size=10),
        axis.title.y = element_text(face="bold", 
                                    colour="white", 
                                    angle=90, 
                                    size=10),
        axis.text.y=element_text(size=10, face="bold"),
        legend.text = element_text(size=10, face = 'bold'), 
        legend.title = element_blank()) +
  theme(strip.text.x = element_text(size=10, 
                                    face="bold", colour="navyblue"), 
        strip.background = element_rect(colour="blue", fill="white"))+ 
  theme(plot.title=element_text(size=13, colour="white", face="bold"))

  p1 + mytheme 
```

![在此处输入图像描述](../Images/f611ffea504a5cc523a9639ec20afb8a.png)

# ccr - Robotics Studio CCR/DSS 和 .NET Micro Framework 兼容性

> ID：14696474
> 
> 赞同：2
> 
> 时间：2013-02-04T22:02:14.707
> 
> 标签：ccr, robotics-studio, .net-micro-framework

我希望我在这个上做了功课，我基本上是在征求第二意见。

我的理解是，CCR 和 DSS（以及其他 MS RDS 工具）不能也不会在支持 .NET Micro Framework 的设备上运行。

我的目标是尽可能使用 DSS 与设备通信，但我想与之通信的一些设备（例如相机模块）将连接到 Panda II Micro Framework 板。因此，除非我在发布相机的 Panda II 板上编写 DSS 兼容服务，否则我将无法通过大多数其他方式访问相机的源。

坦率地说，我发现 .NET MF 完成了 50% 的解决方案，而 MS RDS 完成了另外 50% 的解决方案——我只是希望 DSS 可以在 .NET MF 上运行。

我的研究大部分是正确的吗？我错过了什么吗？

我的项目涉及创建一个家庭自动化系统，我发现兼容 MS RDS 的设备要么很难找到（特别是出于某些目的），要么非常昂贵。虽然 .NET Micro Framework 兼容设备将以 20 美元左右的价格为我提供湿度传感器，并以同样低的价格提供其他强大功能。而且我没有创建硬件解决方案的专业知识，我只是有想法，我想制作一个原型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T00:48:00.597

你是对的。

CCR 核心中内置的类型安全依赖于泛型，当然 .Net MF 不支持这些泛型

可以为 DSS 编写一个互操作层，但如果您想要的只是一台需要大量工作或没有太多好处的相机。另一种方法是编写一个 DSS 服务来实现网络摄像头合同并使用对您有意义的协议与熊猫板上的摄像头进行通信，可以是您自己设计的自定义协议，也可以只是编写一个简单的 Web 服务器和将其用作网络摄像机（已经有网络摄像机服务）

# java - FreeMarker 模板加载问题

> ID：14696475
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:17.763
> 
> 标签：java, freemarker

我将 java 应用程序打包到*myApplication.jar*中，具有以下结构：

*   com
    *   我的包裹
*   模板……

**问题**是如何将模板位置**目录**传递给配置？我尝试过使用 Spring Resource resource = new ClassPathResource("/templates/"); 但是在**resource.getFile()时会引发异常**

我的配置初始化代码：

```
cfg = new Configuration();
cfg.setCacheStorage(new freemarker.cache.MruCacheStorage(20, 250));
cfg.setDirectoryForTemplateLoading(dir);
cfg.setObjectWrapper(new DefaultObjectWrapper()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:14:21.363

[我在这里](https://stackoverflow.com/questions/3019424/setting-freemarker-template-from-classpath?rq=1)找到了答案

```
cfg.setClassForTemplateLoading(getClass(), "/templates"); 
```

# python - difflib 的 charjunk 可以用来忽略空格吗？

> ID：14696476
> 
> 赞同：5
> 
> 时间：2013-02-04T22:02:18.530
> 
> 标签：python, whitespace, difflib

我想比较两个字符串列表之间的差异。出于我的目的，空白是噪音，不需要显示这些差异。阅读[difflib 的文档](http://docs.python.org/2/library/difflib.html)，“默认 [for `charjunk`] 是模块级函数`IS_CHARACTER_JUNK()`，它过滤掉空白字符”。完美，除非我认为它不起作用，或者没有太大的不同（<- 双关语！）。

```
import difflib
A = ['3  4\n']
B = ['3 4\n']
print ''.join(difflib.ndiff(A, B))  # default: charjunk=difflib.IS_CHARACTER_JUNK 
```

输出：

```
- 3  4
?  -
+ 3 4 
```

我尝试了其他一些`linejunk`选项，但没有一个实际上忽略了空格导致的差异。我对什么有错误的解释`charjunk`吗？

作为旁注，我可以通过预处理我的字符串以使用`re.sub(r'\W+', ' ', 'foo\t bar')`.

# visual-studio-2012 - 迁移到 VS2012 后我无法添加/删除服务引用

> ID：14696477
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:21.943
> 
> 标签：visual-studio-2012, service-reference

尝试更新/删除/创建服务引用后出现此错误：

由于以下问题，无法添加服务引用的配置：元素“端点”需要属性“绑定”。

在 VS2010 中它工作正常。

我尝试了很多东西，包括：

**罢工一：** 取消选中“配置服务引用”对话框中的“在引用的程序集中重用类型”复选框。

**罢工二：** 从项目中删除所有引用，再次添加它们 在“配置服务引用”对话框中取消选中非 Microsoft dll。

**罢工三：-** 卸载/重新安装VS2012

-删除/重新映射原始项目

-在一个全新的项目中添加了服务参考

- 从原始项目中删除旧服务 .wsdl's、.xsd's、.disco's、.svcinfo、.svcmap

- 编辑 .csproj xml 以删除旧文件并插入新文件

- 将新项目中的服务文件复制到原项目中

- 现在旧项目构建，但我仍然无法添加/删除/更新任何服务引用

PS 我真的很喜欢 VS2010 但我不能对 VS2012 说同样的话......仍然......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:29:31.390

1.只需在VS -2010中打开你的VS-2012解决方案

1.  清理客户端项目

2.  添加服务就像您之前添加服务一样 => 配置服务 => 更新服务

3.  从 vs-2010 关闭解决方案

4.  现在在 VS-2012 中打开你的解决方案

你的项目已经为 VS-2012 做好了准备

你也可以看看链接

[迁移 VS-2012 后添加服务](http://atikpassion.blogspot.com/2013/01/add-service-after-migrating-silverlight.html)

# ruby-on-rails - Ruby SOAP 数据类型 base64Binary 错误

> ID：14696478
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:32.423
> 
> 标签：ruby-on-rails, ruby, soap, savon

我有一个使用清洗创建的 SOAP Web 服务，该服务具有一个带有 base64Binary 类型参数的操作（我假设它相当于 C# 中的 byte[]）。

我将以下变量发送到我的 Web 服务参数：

```
file_data = Base64.encode64(File.binread("/path/to/my/file")) 
```

它返回错误：

```
RuntimeError (Invalid WashOut simple type: base64Binary) 
```

我没有从我的文件路径正确创建数据类型吗？

这是 Web 服务的控制器：

```
class ServiceController < ApplicationController
  include WashOut::SOAP

  soap_action "import_file",
              :args   => { :data => :base64Binary, :name => :string},
              :return => :string
  def import_file
    render :soap => ("response")
  end

  # You can use all Rails features like filtering, too. A SOAP controller
  # is just like a normal controller with a special routing.
  before_filter :dump_parameters
  def dump_parameters
    Rails.logger.debug params.inspect
  end
end 
```

这是我的客户的代码：

```
require 'savon'

class ServiceTester
  def self.initiate
    # create a client for your SOAP service
    client = Savon.client do
      wsdl "http://localhost:3000/service/wsdl"
    end

    file_data = Base64.encode64(File.binread("/path/to/my/file"))

    response = client.call(:import_file, message: { data: file_data, name: "myfilename" })
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:52:03.090

你从哪里得到的`:base64Binary`？WSDL 参数没有这样的类型：

```
operation = case type
  when 'string';    :to_s
  when 'integer';   :to_i
  when 'double';    :to_f
  when 'boolean';   nil
  when 'date';      :to_date
  when 'datetime';  :to_datetime
  when 'time';      :to_time
  else raise RuntimeError, "Invalid WashOut simple type: #{type}"
end 
```

试试`:string`吧。

# c# - File.Exists - 不想创建新文件

> ID：14696479
> 
> 赞同：1
> 
> 时间：2013-02-04T22:02:37.173
> 
> 标签：c#

我是编码新手 - 所以请耐心等待。我已经做了很多阅读，无法弄清楚这一点。

因此，当您运行我的新应用程序时，您输入文件夹名称。该应用程序转到该文件夹​​，然后将扫描此指定文件夹中的 2 个不同的日志文件。但这是我遇到麻烦的地方。如果日志不存在 - 它会询问您是否要创建它正在寻找的文件......我不希望它这样做。我只是希望它转到文件夹，如果文件不存在，则什么也不做，继续下一行代码。

这是我到目前为止的代码：

```
private void btnGo_Click(object sender, EventArgs e)
{
    //get node id from user and build path to logs
    string nodeID = txtNodeID.Text;
    string serverPath = @"\\Jhexas02.phiext.com\rwdata\node\";
    string fullPath = serverPath + nodeID;
    string dbtoolPath = fullPath + "\\DBTool_2013.log";
    string msgErrorPath = fullPath + "\\MsgError.log";

    //check if logs exist
    if (File.Exists(dbtoolPath) == true)
    {
        System.Diagnostics.Process.Start("notepad.exe", dbtoolPath);
    }
    {
        MessageBox.Show("The 2013 DBTool log does not exist for this Node.");
    } 
```

该应用程序将显示`The 2013 DBTool log does not exist for this Node.`- 然后它打开记事本并询问我是否要创建文件。

```
Cannot find the \\Jhexas02.phiext.com\rwdata\node\R2379495\DBTool_2013.log file.

Do you want to create a new file? 
```

我不想创建一个新文件，永远。有什么好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:09:39.590

你在“if”之后跳过了“Else”

```
if (File.Exists(dbtoolPath) == true)
            {
                System.Diagnostics.Process.Start("notepad.exe", dbtoolPath);
            }
            else
            {
                MessageBox.Show("The 2013 DBTool log does not exist for this Node.");
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:08:25.860

当您的代码编译时（只添加这样的括号是有效的），它可以像添加`else`到您的`if`语句一样简单：

```
if (File.Exists(dbtoolPath) == true) // This line could be changed to: if (File.Exists(dbtoolPath))
{
    System.Diagnostics.Process.Start("notepad.exe", dbtoolPath);
}
else // Add this line.
{
    MessageBox.Show("The 2013 DBTool log does not exist for this Node.");
} 
```

* * *

正如您现在的代码所示，这部分将始终运行：

```
{
    MessageBox.Show("The 2013 DBTool log does not exist for this Node.");
} 
```

它本质上与此代码相同：

```
if (File.Exists(dbtoolPath) == true)
{
    System.Diagnostics.Process.Start("notepad.exe", dbtoolPath);
}

MessageBox.Show("The 2013 DBTool log does not exist for this Node."); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:09:21.003

尝试这个 ：

```
if (File.Exists(dbtoolPath))
    {
        System.Diagnostics.Process.Start("notepad.exe", dbtoolPath);
    }
else {
        MessageBox.Show("The 2013 DBTool log does not exist for this Node.");
    } 
```

# delphi - delphi $IfNDEF 命令

> ID：14696482
> 
> 赞同：0
> 
> 时间：2013-02-04T22:02:49.053
> 
> 标签：delphi

很抱歉，我知道这是一个非常愚蠢的问题，但有人可以看到这段代码并解释这段代码应该做什么，并且 delphi 7 一直给我错误，开始说明期待：或者，

```
{$IFDEF CRYPT_BLOCK}
  nested blocks not allowed!
{$ENDIF}
{$DEFINE CRYPT_BLOCK}
{$IFOPT O+}
  {$DEFINE SAVE_OPT}
{$ENDIF}
{$O-}
{$IfNDef UNSAFE_CRYPT}
begin
{$ENDIF}
asm db   $EB, $06, $EB, $FC, $EB, $FC, $FF, $F8 end; 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T22:10:06.560

一步步;

```
{$IFDEF CRYPT_BLOCK}
  nested blocks not allowed!
{$ENDIF} 
```

我假设这段代码是以某种方式`{$INCLUDE}`编辑的。这段代码不想被包含两次，所以它将（稍后）定义预编译器符号`CRYPT_BLOCK`；上面的代码测试符号是否被定义`{$IFDEF CRYPT_BLOCK}`，如果是，那么它会做一些不会编译的事情（`nested blocks not allowed!`）。当程序员看到她会知道时，她 - 编辑了`{$INCLUDE}`这个东西两次。

```
{$DEFINE CRYPT_BLOCK} 
```

这定义了用上面的块测试的符号。如果编译器没有抱怨就到了这里，那么这个符号还没有被定义。

```
{$IFOPT O+}
  {$DEFINE SAVE_OPT}
{$ENDIF} 
```

检查是否启用了编译器优化。如果是，`SAVE_OPT`则定义符号，以便可以恢复编译器选项。当我们看到这一点时，我们假设代码将更改`{$O}`编译器选项。

```
{$O-} 
```

果然，优化现在被禁用了。

```
{$IfNDef UNSAFE_CRYPT}
begin
{$ENDIF} 
```

`UNSAFE_CRYPT`如果未定义符号，则让编译器查看`begin`关键字。

```
asm db   $EB, $06, $EB, $FC, $EB, $FC, $FF, $F8 end; 
```

这只是一些可怕的汇编代码；有人“混淆”代码的想法；不是一个很好的主意。前两个字节 ( `$EB`, `$06`) 是在所有这些代码之后的相对跳转。换句话说，您几乎可以在任何地方包含这一系列组装，CPU 会简单地跳过它。然后是一系列奇怪的跳跃，第二次`$Eb` `$FC`实际上是跳到第一次跳跃的地方，等等。最后两个字节（`$FF`, `$F8`）实际上没有任何意义（它们不是有效的 Intel x86 指令），所以我认为这是一种有效载荷。

# css - 堆叠 和 在多列、多行中

> ID：14696483
> 
> 赞同：4
> 
> 时间：2013-02-04T22:02:52.187
> 
> 标签：css, html

有没有可能得到这个样子 ![dl 应该是什么样子](../Images/da942b3e0c53d55247173cd5bbe19ffb.png)

从这段代码（使用CSS？）

```
<dl>
<dt>Latitude</dt>
<dd>50.0</dd>
<dt>Longitude</dt>
<dd>100.0</dd>
<dt>h (metres)</dt>
<dd>0.000</dd>
<dt>Vφ (mm/y)</dt>
<dd>-6.4</dd>
<dt>Vλ (mm/y)</dt>
<dd>-15.3</dd>
<dt>Vh (mm/y)</dt>
<dd>-2.0</dd>
</dl> 
```

为了清楚起见，我不在乎颜色。将 dt/dd 对与多列和多行堆叠在一起对我来说很重要。我可以通过表格获得我想要的外观，但它不符合我的可访问性标准。我认为 a 在语义上更接近我想要的......它实际上是一个键/值对列表。

以下是我正在使用的颜色：

```
dl {border: 1px solid #C8C8C8;}

dd {border: 1px solid #C8C8C8; background-color: #F0F0F0;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:09:23.420

表本身并没有什么不可访问的地方。只有当它们用于显示而不是用于表达表格数据时，它才是一个问题。您*确实*有表格数据，它恰好有 2 列。仅仅因为它是一个 2 列 6 行表并不意味着它必须看起来像一个。

[http://jsfiddle.net/hgWxT/](http://jsfiddle.net/hgWxT/)

```
table, tbody {
    display: block;
}

tr {
    display: inline-block;
    width: 30%;
}

td, th {
    display: block;
}

<table>
    <tr>
        <th>Latitude</th>
        <td>50.0</td>
    </tr>

    <tr>
        <th>Longitude</th>
        <td>100.0</td>
    </tr>

    <tr>
        <th>h (metres)</th>
        <td>0.000</td>
    </tr>

    <tr>
        <th>Vf (mm/y)</th>
        <td>-6.4</td>
    </tr>

    <tr>
        <th>V? (mm/y)</th>
        <td>-15.3</td>
    </tr>

    <tr>
        <th>Vh (mm/y)</th>
        <td>-2.0</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T22:19:46.587

这是一个基本的解决方案，看起来很糟糕，但是使用这种结构，您应该能够根据您的要求对其进行改进：

[小提琴](http://jsfiddle.net/9vyWQ/1/)

CSS：

```
dl {
    float: left;
    display: block;
    width: 400px;
}

dl dd {
    float: left;
    margin-left: -35px;
    margin-top: 20px;
    width. 100px;
    background-color: #e0e0e0;
    border: 1px solid #777777;
    padding: 5px;
    position: relative;
    display: block;
}
dl dt {
    float: left;
    width. 70px;
    position: relative;
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:07:19.583

是的，这是可能的。Andy Clark 喜欢使用各种列表，我已经多次使用 dl。

您只需将其视为 ol/ul。首先删除边距/填充。

为 dt 分配一个类，使它们浮动，但您必须为第二行分配一个不同的类。有时好像没有设置 DL 容器的宽度，dt 会环绕，但要真正控制 dt 的第二行（V (mm/y) 和 -6.4 .. 那行），您可以分配另一个类和风格。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T22:16:23.657

可能的？是的，但不必要的困难。

远，远，更容易的是将每个`dt`/`dd`组包装在一个元素中，并相应地设置样式。这是您完成的示例： http: [//cssdeck.com/labs/jsqdknho](http://cssdeck.com/labs/jsqdknho)

# c++ - QWidget / QWindow 标题栏：自定义外观，原生感觉（类似于 Chrome）

> ID：14696484
> 
> 赞同：6
> 
> 时间：2013-02-04T22:02:54.193
> 
> 标签：c++, qt, qt4, qt5, window-managers

我知道如何使 QWidget（在 Qt4 或 Qt5 中）/ QWindow（从 Qt5 开始）无边框，绘制自定义标题栏并手动实现鼠标拖动以通过简单地跟踪鼠标位置`mouseMoveEvent`并更新窗口来在屏幕上移动窗口位置。

但是，这种移动的行为与窗口管理器实现的本地移动不同。例如，将窗口移动到屏幕边框附近可以解释为“全屏”或“分屏”；或窗口捕捉到彼此的边界，具体取决于系统/窗口管理器。如果您像上面那样实现窗口移动，这些东西就不起作用。

Google Chrome / Chromium 只是实现自定义窗口标题栏和边框的应用程序的一个示例，同时仍适应窗口管理器的本机行为。我想知道 Chrome 是否自行实现这些（并检测窗口管理器及其配置），或者大多数窗口管理器中是否有一些功能（显然，这仍然高度依赖于平台）用于告诉“启动本机窗口移动”和“停止本机窗口移动”或类似的。

在 Qt 中可能有这样的事情吗？如果没有，也许使用其他一些库，如 Qxt？

仅供参考：我主要针对 Windows 和 Linux，我看到用户可以安装*任何*窗口管理器的困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:12:46.943

基于最近对 Qt4 的尝试，我担心答案是，你需要调整这个 per-platform / per-window-manager。我希望 QWindow 的补丁可以改善该区域的行为，但我不知道有任何标准挂钩可以告诉操作系统/窗口管理器您要实现的目标。

同样，Qt 不应该“妨碍”解决这个问题，它只是一个无法以通用方式帮助您的领域。

# iphone - 在第二个 UIWebView 中加载 UIWebView 页面而不重新加载？

> ID：14696490
> 
> 赞同：0
> 
> 时间：2013-02-04T22:03:20.657
> 
> 标签：iphone, objective-c, ipad, uiwebview

我正在我的应用程序中开发某种选项卡功能，以便用户可以在他们打开的网页之间切换，就像在任何浏览器中一样。

是否可以在一个 web 视图中加载页面，然后将数据传输到第二个 web 视图，以便在不需要用户重新下载页面的情况下显示它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:15:39.397

简单地说..这是不可能的。据我所知，不可能在 UIWebview 的不同实例之间共享数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:29:57.040

> 是否可以在一个 web 视图中加载页面，然后将数据传输到第二个 web 视图，以便在不需要用户重新下载页面的情况下显示它？

与其这样做，不如交换第一个和第二个 Web 视图？因此，第一个 Web 视图将替换第二个（不需要重新加载），然后您将在后者中下载第二个页面。

顺便说一句，您可以通过执行以下操作将第一个 Web 视图的内容复制到第二个：

```
NSString* body = [webView stringByEvaluatingJavaScriptFromString:@"document.body"]; 
```

然后：

```
[secondWebView loadHTMLString:body baseURL:nil]; 
```

但这不会很有效：HTML 不会被第二次下载，它仍然应该由第二个 Web 视图呈现（这会花费一些时间，所以你会有延迟）。交换网络视图要好得多。

# dart - 你如何使用参数从 jquery 回调到 Dart？

> ID：14696492
> 
> 赞同：2
> 
> 时间：2013-02-04T22:03:22.523
> 
> 标签：dart, jquery-ui-slider

我正在编写一个 Dart 类来包装 jqueryUI 滑块。jquery 代码如下所示：

```
$("#diameter_slider").slider({'range': true, max: 50, min: 0, values: [0, 50],
                  slide: function( event, ui ) { 
            //code executed when the slider is moved goes here
                      }); 
```

我的飞镖类看起来像：

```
class Slider {
  Map options;
  String css_id;
  String units;
  var slider;
  Slider( {this.options, this.css_id, this.units} ) {
    js.scoped((){
    slider = js.context.$(css_id);
    final updater = new js.Callback.many((d, i, context) { query("#diameter").text = 'here';});
    final opts = js.map({ 'range': true, 
                        'values': [options['min'], options['max']],
                        'slide': updater});
    slider.slider(opts);
    js.retain(slider);
  });
 }
 void UpdateText( var event, var ui ){
     query("#diameter").text = 'here';  
 }
} 
```

执行时滑块正确显示（使用 Dartium）。但是当滑块移动时，Dartium 崩溃了。从javascript获取传递给Dart的参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:16:16.553

查看[幻灯片文档](http://api.jqueryui.com/slider/#event-slide)，回调函数似乎处理 2 个参数。所以，你`updater`应该这样定义：

```
final updater = new js.Callback.many((event, ui) { query("#diameter").text = 'here';}); 
```

# ubuntu - 无法访问virtualbox内的互联网

> ID：14696493
> 
> 赞同：1
> 
> 时间：2013-02-04T22:03:24.420
> 
> 标签：ubuntu, virtualbox

我刚刚安装了 virtualbox 并在其上设置了 ubuntu12.10 amd64。我在主机上使用相同的 ubuntu。

我在从 virtualbox 内部访问 Internet 时遇到问题。谁能给我任何关于为什么会这样/如何解决它的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:07:03.440

[http://www.virtualbox.org/manual/ch06.html](http://www.virtualbox.org/manual/ch06.html)

检查这篇文章它可能会帮助您进行配置。

# c# - 我可以通过编程方式确定手持设备和带式打印机的品牌和型号吗？

> ID：14696495
> 
> 赞同：0
> 
> 时间：2013-02-04T22:03:26.297
> 
> 标签：c#, windows-xp, compact-framework, windows-ce, handheld

使用在 Windows 7 上的 XP Mode 虚拟机中运行的 Visual Studio 2003 使用 Windows CE 处理一些遗留代码。

我正在编写一些在手持设备上运行的代码，并且需要知道它们的品牌和型号。我可以拨打内置电话来查询手持设备的身份吗？

同样，我将以编程方式推断手持设备所连接的带式打印机的品牌和型号，以便代码可以基于这些细节进行分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:22:51.070

您可以尝试通过[`KernelIoControl`](http://msdn.microsoft.com/en-us/library/ms886729.aspx)调用传入的调用来获取设备名称和 ID `IOCTL_HAL_GET_DEVICEID`。 [MSDN 上有一个例子](http://msdn.microsoft.com/en-us/library/ms172516%28v=vs.80%29.aspx)。那*也许*可以确定手持型号。

至于打印机，您不太可能区分它们 - 尽管这取决于它们的连接方式。如果是连载就没办法了。如果是 USB，除非他们使用不同的驱动程序，否则不太可能。如果它是联网的，那么它就不会发生。如果是蓝牙，则设备名称*可能*具有基于您可以使用的型号的模式。

# facebook - Facebook：试图在用户的时间线上发帖

> ID：14696501
> 
> 赞同：1
> 
> 时间：2013-02-04T22:03:40.480
> 
> 标签：facebook, facebook-graph-api

我正在开发一个库的网页，该网页（在用户许可后）尝试使用 PHP 在用户的 Facebook 时间线上发布：

```
Karen is reading 'Fifty Shades of Grey'
A link to http://www.mylibrarysi.te/book.php?id=4048 
```

我试过这段代码：

```
$out = $facebook->api('/me/feed', 'post', array(
'message' => "Karen is reading 'Fifty Shades of Grey'",
'name' => 'Fifty Shades of Grey',
'description' => "Description of 'Fifty Shades of Grey'",
'caption' => 'A book in your library',
'picture' => 'http://www.mylibrarysi.te/bookcover.php?id=4048',
'link' => 'http://www.mylibrarysi.te/book.php?id=4048',
)); 
```

我有两个问题：

1）我刚刚读到 Facebook 开始停止这种可能性以“提高质量”，弃用“经过身份验证的推荐”和“通过 API 发布到朋友墙” [http://developers.facebook.com/blog/post/ 2012 年 10 月 10 日/随着开放图的增长质量应用程序/](http://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)

我的代码可以被 Facebook 禁止以避免垃圾邮件吗？（用户允许我在他们的时间线上发帖）

2）我的一段代码的结果是

```
Karen Miller shared a link via MY_APP_NAME
Karen is reading 'Fifty Shades of Grey'
(the link, etc.) 
```

是否可以删除“Karen Miller 通过 MY_APP_NAME 共享链接”文本？

非常感谢您提前和最好的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:30:27.453

1）您发布到您的用户墙，而不是您用户的朋友墙。所以这不应该影响你。

2) 删除文本的唯一方法`Karen Miller shared a link via MY_APP_NAME`是将您的故事转变为 Open Graph 动作。阅读[Open Graph 教程](https://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/)以了解如何发布特定于应用程序的故事。这将允许您创建丰富的故事，如最佳实践中所示的故事[：创建开放图表故事](https://developers.facebook.com/docs/technical-guides/opengraph/creating-open-graph-stories/)。

请注意，[`book`](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-objects/#book)您的应用程序可以使用一个标准的 OG 对象，因此您可以重复使用它，无需创建自己的对象。这还会将`book`您的应用发布的内容添加到所有应用（如 Kindle、Goodread 等）发布的图书列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:09:43.617

1) Facebook 正在弃用“发帖给朋友墙”——您将无法发帖给用户的朋友。您正在发布到用户墙，因此此调用将起作用。但是，Facebook 平台策略不允许发布不是由用户在应用程序中编写的“消息”，因此您可能会删除发布权限；

2) 这是一个链接帖子，因为您要在帖子中附加一个“链接”。您可以参考“消息”中的链接并删除链接参数。但是，通过这样做，Facebook 不会显示带有图片的链接描述。

# android - 混淆 Android 测试项目以及项目（在发布和混淆版本上运行测试）

> ID：14696503
> 
> 赞同：6
> 
> 时间：2013-02-04T22:03:44.750
> 
> 标签：android, testing, proguard

假设我有一个带有测试的 android 应用程序项目。

有什么方法可以针对发布版本运行我们的测试套件（在单独的测试项目中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T01:38:01.560

在阅读了赏金的评论后，我意识到 OP 实际上要求的不仅仅是简单的是/否回复，所以我将把我的评论扩展到答案。一般来说，适当设计的 proguard.cfg 和项目结构足以避免这种困境。

一个典型的 proguard 配置（参见第 7 节。[此链接](http://proguard.sourceforge.net/index.html#manual/examples.html)中的完整 Android 应用程序部分）保证在混淆期间保留所有与 android 相关的东西，如 Activity、View 等。更改配置没有任何意义，例如混淆 Acticity.onCreate() 方法，因为它显然会在运行时破坏应用程序。换句话说，一个设计良好的 proguard.cfg 将保护底层运行时框架的所有公共接口并保持它们保持不变。

```
... ...

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

... ... 
```

另一方面，Android测试项目应该专注于测试Android组件（在混淆过程中故意保留），即正确渲染视图，单击按钮执行正确任务，并且应避免为不依赖任何POJO类编写测试Android API，注意这些 POJO 是我们通常混淆的。最好在应用程序或引用的 java 项目中为这些 POJO 编写纯 junit 测试，以便在创建最终版本（混淆、签名和 zipaligned）之前在 maven 测试阶段参与这些 junit 测试。另外，好的OO设计会屏蔽这些中间POJO依赖，使它们对外透明，即运行时框架。

```
app/
  src/main/java/
  src/test/java/  <-- intermediate POJO tests put here.
  AndroidManifest.xml
  ... ...
app-test/
  src/main/java  <-- Android component tests put here.
  AndroidManifest.xml
  ... ... 
```

在 Android 测试项目中编写 POJO junit 测试是绝对可以的，但是，如果您仍然想保持针对混淆 apk 运行测试项目的能力，您需要适当调整应用程序项目的 proguard.cfg 并在混淆期间保留 POJO 类为了适合测试代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T08:34:26.623

您可以指示 proguard 使用该指令将其创建的映射写到文件中`-printmapping <filename>`。该文件的结构很明显，可以解析为 Hashtable。然后我会编写一个脚本，将这些转换应用到您的测试中（制作它们的副本）。混淆只是意味着将类和方法名称从 Java 字节码规范方面有效的（人类可读的和）替换为其他有效的（短的并且不是人类可读的但）也有效的东西，所以这应该有效。针对混淆项目编译调整后的测试并运行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:58:55.257

您是否在一个项目中拥有测试和源代码？如果是这样，我相信 android maven 会在您执行发布时剥离测试代码。

要解决此问题，您需要将测试移动到链接到您的实际应用程序的单独项目（假设您依赖实际项目的代码/资产），然后单独的项目仍将能够针对您的应用程序的发布版本进行检测（假设它们由相同的密钥签名）。

# asp.net-mvc-3 - HighchartsTable jQuery 插件 - 是否可以在 Y 轴上有标签，在 X 轴上有值

> ID：14696506
> 
> 赞同：1
> 
> 时间：2013-02-04T22:03:55.690
> 
> 标签：asp.net-mvc-3, highcharts

当我使用 jQuery HighchartsTable 插件（不是基于 jason 的 highchart）创建柱形图时，默认情况下，标签位于 X 轴上，值位于 Y 轴上。

我需要相反的，我有很多长标签，它们不适合水平放置。是否可以在 Y 轴上有标签，在 X 轴上有值？

谢谢。

PS 我可以用我自己的替换单词“Valeur”吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:21:42.950

您可以将反转参数设置为true

[http://api.highcharts.com/highcharts#chart.inverted](http://api.highcharts.com/highcharts#chart.inverted)

# android - Android Layout 不允许用户下拉通知栏

> ID：14696510
> 
> 赞同：1
> 
> 时间：2013-02-04T22:04:07.243
> 
> 标签：android, android-layout, xamarin.android

我正在使用 MonoDroid 编写应用程序，由于某种原因，我无法从屏幕顶部拉下通知栏。我认为这与我的布局有关，但我不确定。我还注意到，当我的应用程序运行时，顶部没有显示电池、时间、信号强度等的栏。

所以，我的问题是，我需要做什么才能让用户拉下通知栏？以及如何在屏幕顶部显示信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:37:55.003

也许你的主题是

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" ? 
```

它隐藏了通知栏。更改为非全屏主题以使通知栏可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:42:06.817

我怀疑你已经做了一些事情来让你的应用程序以“全屏”模式出现（这会将屏幕底部的主页、菜单和返回按钮变成点，并隐藏导航栏。

我相信这被称为“熄灯模式”。这是一个询问如何打开它的 SO 问题（也许它也会帮助您将其关闭）： [隐藏 ICS 回家任务切换器按钮](https://stackoverflow.com/questions/8469112/hide-ics-back-home-task-switcher-buttons)

# google-apps-script - 如何将文件复制并移动到 Google Apps 脚本中的文件夹？

> ID：14696514
> 
> 赞同：4
> 
> 时间：2013-02-04T22:04:10.400
> 
> 标签：google-apps-script, move

有没有办法复制和重命名文件并将该副本移动到特定文件夹而在根文件夹中没有第二个副本？我以不同的顺序使用了复制、重命名、移动的组合，但每次，我最终还是得到了根驱动器重命名文件的副本。这是默认的吗？至少可以说很烦人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T17:39:08.410

**编辑：**我查看了您的原始问题（编辑前），从那里我理解了您对 Google Drive 中文件和文件夹如何工作的困惑。

当您复制文件时，您会在根文件夹中获得一个新文件，当您将此新文件添加到另一个文件夹时，您必须将其视为在此文件上粘贴标签而不创建任何新副本。

您实际上可以在根文件夹和其他文件夹中看到该文件，但**它是具有 2 个不同标签的相同文件！**（你确实注意到了，因为你试图删除它并看到它在两个地方都被删除了）

您唯一需要做的就是在其文件夹中获取新文件而不显示在根目录中以删除“根标签”。

这就是 Google Drive 的工作原理。当您考虑它并与本地硬盘存储进行比较时，它变得合乎逻辑：当您将文件从一个文件夹移动到同一逻辑驱动器上的另一个文件夹时，您不会移动数据（即磁盘上的字节），而只是告诉该文件位于地图上其他位置的磁盘操作系统。

因此，将 Google Drive 视为一个（非常）大的磁盘单元，其中包含数十亿个您无法移动的文件，但您可以在其上粘贴任意数量的标签；-)（最重要的标签是您的 Google 帐户 ID！）

在您描述的情况下使用这些标签只需尝试这个简单的功能：

```
function copyAndMove(file,folder){
var newfile=file.makeCopy('copy of '+file.getName());// here you can define the copy name the way you want...
newfile.addToFolder(folder);//  add the copy to the folder
newfile.removeFromFolder(DocsList.getRootFolder());// and remove it from your root folder
} 
```

要对其进行测试，只需使用 2 个必需参数：您可以从许多不同方法中获取的`file`对象和对象，请参阅[DocsList 文档](https://developers.google.com/apps-script/reference/docs-list/?hl=en)以获取有关如何获取它的详细信息（如果需要），但我想您已经知道了 ;-)`folder`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-26T17:15:44.930

在新版本的谷歌应用程序脚本中，您需要完成以下任务：

```
file.makeCopy("new name", folder); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T15:20:16.297

是的，谷歌没有提供移动方法有点奇怪。但是，考虑到驱动器的工作原理以及一个文件可以属于多个文件夹，您编写自己的动作是有道理的。这是我写的一个简单的移动函数：

```
// Moves a file to a new folder by removing all current
// parent folders and then adding the new one.
function moveFileTo(fileObj, folderObj) {
  // Attempt the move only if folderObj has a value.
  // Otherwise, the file will be left without a folder.
  // (Lost files can be found in the "All items" area.)
  if (folderObj) {
    var folders = fileObj.getParents();
    for (var i = 0; i < folders.length; i++) {
      fileObj.removeFromFolder(folders[i]);
    }
    fileObj.addToFolder(folderObj);
    return true;
  }
  return false;
} 
```

基本上，像这样使用它：

```
var file = DocsList.getFileById(fileID);
var folder = DocsList.getFolder('Some folder name');

// Make a backup copy.
var file2 = file.makeCopy('BACKUP ' + Utilities.formatDate(new Date(), Session.getTimeZone(), 'yyyy-MM-dd') + '.' + file.getName());
// Move the backup file.
if (moveFileTo(file2, folder)) {
  ... 
```

我应该注意到，这个简单的功能就是……简单。它假设您可以破坏所有父文件夹 - 拥有或共享。如果您不小心，这可能会对各种用户的各种共享文件夹中的共享文件产生意想不到的后果。但是，似乎不会删除不与该脚本的用户共享的父文件夹——这很好。无论如何，更好地控制事物的一种明显替代方法是指定“from”文件夹以及“to”文件夹。

# ios - UIScrollView中的iOS编程缩放不起作用

> ID：14696515
> 
> 赞同：2
> 
> 时间：2013-02-04T22:04:14.667
> 
> 标签：ios, ios5, ios6, uiscrollview

我是 iOS 新手，在这方面我已经被困了一段时间。我的目标是当用户在视图中任意位置捏时以编程方式缩放到特定位置。这可能看起来很奇怪，但它是一个内部应用程序，不适用于 App Store。现在，当我捏缩放时，什么也没有发生。

在我的视图（它是一个单视图应用程序）上，我有一些我想以编程方式放大的图像。这就是我所做的。

1.  在 Interface Builder 中，我将一个 Scroll View 对象拖到我的 View 上，并更改了大小以适合 View

2.  在滚动视图中，我设置了最小缩放 = 0 和最大缩放 = 1000（只是为了确保这不是问题）

3.  我在 UIScrollView 上拖了一个捏手势识别器。

4.  我右键单击 UIGestureRecognizer，并创建了一个名为 handlePinch() 的操作，我将代码放置在其中，以便在识别到捏合时以编程方式缩放。

5.  实现了handlePinch的放大（如下图）

    ```
    - (IBAction)handlePinch:(UIPinchGestureRecognizer *)sender {
        CGRect zoomRect;

        zoomRect.origin.x = 500;
        zoomRect.origin.y = 500;
        zoomRect.size.width = 512;
        zoomRect.size.height = 384;

        [scrollView zoomToRect:zoomRect animated:YES ];
      } 
    ```

已知： - 正在识别捏合手势，并且正在调用 handlePinch

感谢您提前提供任何答案或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:08:51.350

您不需要捏合手势来执行此操作，因为缩放是内置的。这就是要做的事情。

在您的视图控制器头文件中，添加滚动视图委托：

```
@interface MyViewController : UIViewController <UIScrollViewDelegate> 
```

接下来在实现文件中，最好是在您的 viewDidLoad 中，将滚动视图的委托设置为 self：

```
- (void)viewDidLoad {
    //other stuff
    self.scrollView.delegate = self;
} 
```

然后，将此滚动视图委托方法复制并粘贴到您的实现文件中：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    if (scrollView == self.scrollView) {
        return self.viewToBeZoomed;
    }
} 
```

self.viewToBeZoomed 是您要缩放的视图。此视图是 self.scrollView 的子视图。

# dns - 使用 Amazon Route53 的域别名

> ID：14696517
> 
> 赞同：4
> 
> 时间：2013-02-04T22:04:26.247
> 
> 标签：dns, amazon-web-services, amazon-route53

我最近才开始使用 Route53 来管理我的域的 DNS 记录。我拥有两个域名，mydomain.com 和 mydomain.com.au。

是否可以使用 Route53 设置 DNS 记录，这样 mydomain.com.au 只是 mydomain.com 的别名。我的意思是，所有对 xyz.mydomain.com.au 的 DNS 查询都将返回对 xyz.mydomain.com 的相同查询的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:09:22.460

CNAME 记录通常用于将域重定向到另一个域。您只需使用 xyz.mydomain.com 为 xyz.mydomain.com.au 创建 CNAME 记录。从 AWS 控制台：

1.  进入托管区域的记录集后，单击“创建记录集”。
2.  在“名称”框中，键入 xyz。
3.  在“类型”框中，选择 CNAME。
4.  在“值”框中，输入 xyz.mydomain.com，然后单击按钮以创建记录。

奖励：CNAME 不起作用的唯一情况是您希望将根域（即 mydomain.com.au）重定向到另一个站点，这在 DNS 规范中不受支持。Route53 有一个变通方法，但仅当您使用 Route53 为使用 Elastic Load Balancer 的站点提供 DNS 服务时。

# matlab - Matlab中多边形的双重积分

> ID：14696525
> 
> 赞同：1
> 
> 时间：2013-02-04T22:05:00.370
> 
> 标签：matlab, integration, numerical-integration

我得到了一个函数@f(x,y)，我想在 MATLAB 中评估这个函数在某个凸多边形上的积分。多边形不一定是矩形，这就是为什么我不能使用 MATLAB 的函数“dblquad”。我拥有的多边形由一组由向量 X 和 Y 表示的顶点给出，即顶点是 (X(1),Y(1)),....,(X(n),Y(n) ）。有什么可以使用的功能或方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:46:06.093

诀窍是使用工具在感兴趣的区域内进行整合。我已经编写了一些用于在三角域中集成的工具。

```
% Define a function to integrate.
% This function takes an nx2 array, where each row
% contains a single point to evaluate the kernel at.
% This computes x^2 + y^2 at each point.
fun = @(xy) sum(xy.^2,2);

% define the domain as a triangulated polygon
% this tool uses ear clipping to do so.
sc = poly2tri([1 4 3 1],[1 3 5 4]);

% Gauss-Legendre integration over the 2-d domain
[integ,fev]= quadgsc(fun,sc,2)
integ =
       113.166666666667
fev =
     8

% the triangulated polygon...
plotsc(sc,'facecolor','none','markerfacecolor','r')
axis equal
grid on 
```

![在此处输入图像描述](../Images/6bd176cf58e09c4011e6f7273b5e9c66.png)

我们可以将函数本身可视化为该多边形域上的映射 z(x,y)。当提供范围字段时，单纯复形从 2-d (x,y) 域变为 2-1 映射。

```
sc2 = refinesc(sc,'max',.5);
sc2.range = fun(sc2.domain);
plotsc(sc2,'markerfacecolor','r')
grid on
view(17,12) 
```

![在此处输入图像描述](../Images/9c4b49d2ca799868208015ffc1481a6f.png)

这是感兴趣域上的简单多项式函数，因此默认的低阶高斯积分就足够了。使用的方案是三角形上张量积形式的 Gauss-Legendre 方案，不是真正的最优方案，但可行。高斯正交的问题在于它不是自适应的。它基于多项式对有限点集的隐式逼近计算估计值。

上述估计使用 8 个函数 eval 来计算该估计。由于内核是一个低阶多项式，它应该做得很好。问题是，您需要知道它是否是正确的解决方案。这是高斯求积的问题，没有简单的方法可以知道答案是否正确，除了用高阶方案解决问题，直到它似乎收敛。

看到重心处每个三角形有 1 个点，我们得到了错误的答案，但高阶估计都同意。

```
[integ,fev]= quadgsc(fun,sc,1)
integ =
       107.777777777778
fev =
     2

[integ,fev]= quadgsc(fun,sc,3)
integ =
       113.166666666667

fev =
    18

[integ,fev]= quadgsc(fun,sc,4)
integ =
       113.166666666667
fev =
    32 
```

写完 quadgsc 后，我不得不尝试一个自适应求解器，它的工作方式与 MATLAB 中其他四边形工具的工作方式相同。这会对三角剖分进行自适应细化，寻找解不稳定的三角形。问题是，我从来没有完成过让我满意的这些工具的编写。对于三角域上的容积问题，可以采用许多不同的方法。quadrsc 进行低阶解，然后对其进行细化，使用 Richardson 外推，然后比较结果。对于差异太大的任何三角形，它会进一步细化它们直到收敛。

例如，

```
[integ,fev]= quadrsc(fun,sc)
integ =
          113.166666666667

fev =
    16 
```

所以这行得通。问题出现在更复杂的内核上，问题在于知道何时停止细化，并在一个人用完太多函数评估之前这样做。我从来没有完全让我满意，所以我从来没有发布这些工具。我可以将工具箱发送给那些直接给我发邮件的人。zip 文件大小约为 2.4 MB。总有一天我会完成这些工具，我希望...

# modernizr - modernizr todataurljpeg 是异步的，怎么用？

> ID：14696532
> 
> 赞同：1
> 
> 时间：2013-02-04T22:05:21.790
> 
> 标签：modernizr

[Modernizr](https://github.com/Modernizr/Modernizr/pull/470)对 canvas-todataurl-type 的测试有一条评论：

```
// This test is asynchronous. Watch out. 
```

那么.. 了解何时可以安全使用此测试的最佳做法是什么。我看到它加载到图像中，但是该库看起来没有提供任何用于何时测试的回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:23:14.907

*@jedierikb - 我想你知道答案，因为你帮助了我们！但是为了别人...*

在 Modernizr 2.x 中，它需要一些手动工作。异步检测将`undefined`持续到它们完成，所以......：

```
<script src="path/to/modernizr.js"></script>
<script>
  (function withDataURL () {
    if (typeof Modernizr.todataurljpeg !== 'undefined') {
      // Do things with `Modernizr.todataurljpeg`
    }
    else {
      setTimeout(withDataURL, 100);
    }
  }());
</script> 
```

或者，使用 watch library/shim/plugin，例如[https://gist.github.com/eligrey/384583](https://gist.github.com/eligrey/384583)

在 Modernizr 3.0 中，我们进行了 2 项相关更改：

*   画布`todataurl`检测都是同步的（感谢@jedierikb）
*   其他同步检测将具有一流的支持，可能带有回调（我们仍在研究更详细的细节）

# php - simpleXML：解析 XML 以仅输出元素属性

> ID：14696533
> 
> 赞同：2
> 
> 时间：2013-02-04T22:05:26.607
> 
> 标签：php, xml, xpath, simplexml

我正在尝试使用 simpleXML 解析 XML 文件，但我一直遇到问题（请注意，我是 PHP 菜鸟。）

这是 XML 文件的结构。（用于提高可读性的命名约定。）

```
<World>
  <Continent Name="North America" Status="" >
   <Country Name="United States of America" Status="">
     <City Name="New York" Status="" />
     <City Name="Chicago" Status="" />
   </Country>
  </Continent>
</World> 
```

所有数据都设置为属性（不是我的决定。）我需要能够输出每个属性的名称，以及告诉状态的第二个属性。“大陆”将是唯一的，但每个“大陆”可以有多个“国家”和“城市”。

这是我目前拥有的PHP...

```
<?php
        $xml_file = '/path';
        $xml = simplexml_load_file($xml_file);

        foreach($xml->Continent as $continent) {
            echo "<div class='continent'>".$continent['Name']."<span class='status'>".$continent['Status']."</span></div>";
            echo "<div class='country'>".$continent->Country['Name']."<span class='status'>".$continent->Country['Status']."</span></div>";
            echo "<div class='city'>".$continent->Country->City['Name']."<span class='status'>".$continent->Country->City['Status']."</span></div>";
         }

?> 
```

我怎样才能避免重复自己并使用->逐级进行？我以为我可以使用 xpath，但我很难开始。另外，我怎样才能确保所有城市都出现，而不仅仅是第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:50:58.633

您可能没有“骑自行车”国家和城市：

```
<?php
    $xml_file = '/path';
    $xml = simplexml_load_file($xml_file);

    foreach($xml->Continent as $continent) {
        echo "<div class='continent'>".$continent['Name']."<span class='status'>".$continent['Status']."</span>";
        foreach($continent->Country as $country) {
            echo "<div class='country'>".$country['Name']."<span class='status'>".$country['Status']."</span>";
            foreach($country->City as $city) {
                echo "<div class='city'>".$city['Name']."<span class='status'>".$city['Status']."</span></div>";
            }
            echo "</div>"; // close Country div
        }
        echo "</div>"; // close Continent div
    }
?> 
```

# javascript - “自此时间戳以来已经过去了多少秒”的 Javascript

> ID：14696538
> 
> 赞同：0
> 
> 时间：2013-02-04T22:05:40.910
> 
> 标签：javascript

此 PHP 代码是否有 Javascript 等效项？

```
function secondsAgo($unixtime){
   return time() - $unixtime;
} 
```

示例用法：

```
echo secondsAgo(time()-10); // 10 
```

我在Javascript中有一个unixtimestamp，需要找出从今天到那个时间戳已经过去了多少秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:08:40.577

JS equivelant:

```
function secondsAgo(unixTime) {
    return Math.round((new Date().getTime() / 1000)) - unixTime;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:09:31.337

JS 时间戳与 Unix/PHP 时间戳相同，时间自 1970 年 1 月 1 日起，但 JS 使用毫秒代替。

```
var msts = new Date().getTime(); // timestamps in millisecs;
var ts = msts / 1000; // now directly compariable to PHP timestamp.

var phpts = <?php echo json_encode(time()); ?>;

var diff = phpts - ts; // difference in seconds. 
```

# html - 立方体的水平对齐

> ID：14696540
> 
> 赞同：-2
> 
> 时间：2013-02-04T22:05:45.060
> 
> 标签：html, css

为了给立方体提供标题，我用 p 标签在立方体外写了文本。

我给`clear:left`了`p`标签，因为它的文字下来了。

其他立方体也因此而倒下。

如何使立方体在一行中水平对齐？

在下面提供我的小提琴

[http://jsfiddle.net/NMPFU/2/](http://jsfiddle.net/NmPFU/2/)

```
<div class="melonhtml5_gallery">
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png">testing</div>
                        <p style='clear: left; text-align:left;'>rajkumar</p>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/search.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/yourfiles.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/shareFiles.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='/Customer/index/?step=create' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' href='/Customer/' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custProfile.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custQuote.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='/Sales/order/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a href='/Sales/' style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/salesOrders.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/vendorProfile.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/reports.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/yourfiles.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/admin.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/shipLogistic.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/accReceivable.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/custRMA.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/production.png"></div>
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/png/CRM.png"></div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:13:27.963

I think that you might want to use a Div to surround that `<p>` tag, have you tried that?

***EDIT***

Here is what I did

1.  Removed style `clear:left` from `<p>`

2.  added 4 `<br/>` before the `<p>`

3.  added a style of `margin-top:100px` to `

here are the results personally i think all the code is a little messy it was a little hard to read. but I am spoiled that way.

[http://jsfiddle.net/8CtGE/](http://jsfiddle.net/8CtGE/)

***EDIT*** in the Fiddle I Moved the `<p>` Tag Above and Outside of the `<div class="melonhtml5_gallery">` tag

the cube that has the word testing on it, is not so much a cube so the spacing is off. that looks like something that will need to be addressed in the code for the Cubes itself.

[http://jsfiddle.net/8CtGE/1/](http://jsfiddle.net/8CtGE/1/)

otherwise it is as you wish now.

***LAST EDIT***

**you really need to clarify your question.**

do you want a single heading for all cubes in that section, like [http://jsfiddle.net/8CtGE/3/](http://jsfiddle.net/8CtGE/3/) ? if this is so you should start with the basics of HTML and CSS before Tackling something as complex as what you are doing with the cubes. I hope that I am not sounding Rude, but someone needs to tell you that what I have done is **Basic HTML/CSS Editing**

# extjs - 未捕获的类型错误：对象# has no method 'getValue' I am currently attempting to add a listener to my button so that when it is clicked it loads what is in the 'textId' textfield into an html text above said textfield and button. This is so th 问问题 问问题 2013-02-04T22:06:03.083 5667 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am currently attempting to add a listener to my button so that when it is clicked it loads what is in the 'textId' textfield into an html text above said textfield and button. This is so they can enter multiple things into this field and delete them if one is not needed afterwards because the text gets loaded in with a delete button. createTextAndButton: function(fieldId, v, textId, field, text, num) { var n = new Number(num); var ct = new Ext.container.Container({ xtype:"container", layout:"vbox", //padding:"5 0", items: [{ xtype:"container", itemId: fieldId, }, { xtype: "container", layout:"hbox", padding: "5 0", items: [{ xtype: 'textfield', vtype: v, name: textId, fieldLabel: field, validateOnBlur: true }, { xtype: "button", text: text, width: 115, handler: function() { ct.down('#' + fieldId).add(Ext.ComponentMgr.create({ xtype: "container", itemId: 'entry' + n, layout: "hbox", padding: "5 0", items: [{ xtype: "component", html: "

" + textId.getValue() + "

" }, { xtype: "button", itemId: 'dButton', text: "delete", width: 80 } }] })); n++; } }] }] }); return ct; } I'm getting Uncaught TypeError: Object ignoreField has no method 'getValue' when I click on the button. I'm unsure why the textfields getValue method is not working or if I am doing something obviously wrong. Eureka! I figured it out! The below answer is in the form of a library I'm writing but it should be relatively easy to follow. As it turns out, the best course of action (as far as I can tell) is to first using a separate function, build an object from the target object containing all the property paths: /** * Returns an object containing all of the property paths of an object. Each * property path is referenced by the property name. * @param {object} The object to target * @return {object} Object containing paths ELSE undefined */ paths: function( obj, path, lastKey, nextKey ) { var o, key, path = path ? path : {}, lastKey = lastKey ? lastKey : "", nextKey = nextKey ? nextKey : ""; for ( o in obj ) { // Push path onto stack path[o] = (nextKey + "." + lastKey + "." + o).replace(/^[.]+/g, ""); // Pass updated "nextKey" along with next recurse key = nextKey + "." + lastKey; // Call again on all nested objects if ( (lib).isPlainObject(obj[o]) ) { (lib).paths(obj[o], path, o, key); } } return (lib).len(path) ? path : undefined; }, Then we use the resolve method as a "wrapper" to the paths method, returning the targeted property key's namespace. resolve: function( obj, key ) { return (lib).paths(obj)[key]; }, Using the object I posted originally above: var res = o.resolve(obj, "A_2_b_1"); // Returns "A.A_2.A_2_b.A_2_b_1" Just for reference, the paths method returns an object that looks something like this: // { // A: [...] // A_1: [...] // A_2: [...] // A_2_a: [...] // A_2_b: [...] // A_2_b_1: [ // 0: "A_2_b_1" // 1: "A.A_2.A_2_b.A_2_b_1" // ] // A_2_b_2: [...] // A_2_c: [...] // A_3: [...] // B: [...] // ... // } Where each property maps to its path in the object. extjsextjs4typeerror 4 2 回答 2 This answer is useful 0 感谢所有试图帮助我解决这个问题的人。我能够弄清楚我的错在哪里。对于我的文本字段，我应该只使用id:标签而不是name:这里itemId是那些关心的人的工作代码。 createTextAndButton: function(fieldId, textId, field, text, num) { var n = new Number(num); var ct = new Ext.container.Container({ xtype:"container", layout:"vbox", //padding:"5 0", items: [{ xtype:"container", itemId: fieldId, }, { xtype: "container", layout:"hbox", padding: "5 0", items: [{ xtype: 'textfield', id: textId, fieldLabel: field, validateOnBlur: true }, { xtype: "button", text: text, width: 115, handler: function() { ct.down('#' + fieldId).add(Ext.ComponentMgr.create({ xtype: "container", Id: 'entry' + n, layout: "hbox", padding: "5 0", items: [{ xtype: "component", html: "

" + Ext.getCmp(textId).getValue() + "

" }, { xtype: "button", itemId: 'dButton', text: "delete", width: 80 }] })); n++; } }] }] }); return ct; } 于 2013-02-06T22:55:32.477 回答 This answer is useful 0 itemId 对于特定容器是本地的，getCmp() 只会检索组件的全局 id。 执行以下操作会容易得多： createTextAndButton: function(fieldId, type, v, textId, field, text) { var ct = new Ext.container.Container({ xtype:"container", layout:"vbox", //padding:"5,0", items: [{ xtype:"container", itemId: fieldId, },{ xtype: "container", layout:"hbox", padding: "5 0", items: [{ xtype: type, vtype: v, itemId: textId, fieldLabel: field, validateOnBlur: true }, { xtype: "button", text: text, width: 115, handler: function() { ct.down('#' + fieldId).add(new Ext.container.Container({ xtype: "container", padding: "5 0", items: [{ xtype: "component", autoEl: "pre", html: textId.getValue() }, { xtype: "button", text: "delete", width: 115 }] })); } }] }] }); return ct; } 于 2013-02-04T23:25:48.717 回答 Related 1 c - 从 IP 摄像机抓取非连续帧 1 ms-access - 打开Access mdb时弹出READ ONLY，但实际上不是根据Properties 1 amazon-ec2 - 无法在主机上启动光束并且无法在主机上启动新光束 1 windows-phone-7 - WP7 上带有 HttpWebRequest 的 ManualResetEvent 1 c# - 将 StringBuilder 传递给需要 char 指针的 DLL 函数 2 jquery - 需要调整窗口大小的帮助。更改 div 位置（而不是动画） 3 excel - excel中的静态时间戳 1 php - 带有外部共享库的 php 自定义 c 扩展 1 python - 如何根据上下文更改 Blender 2.63 中操作员的标签？ 2 ruby-on-rails - 使用控制器操作响应 JSON 的 Rails 方式（在 3.2.6 中）是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14696544
> 
> 赞同：2
> 
> 时间：
> 
> 标签：extjs, extjs4, typeerror

I am currently attempting to add a listener to my button so that when it is clicked it loads what is in the 'textId' textfield into an html text above said textfield and button. This is so they can enter multiple things into this field and delete them if one is not needed afterwards because the text gets loaded in with a delete button.

```
createTextAndButton: function(fieldId, v, textId, field, text, num) {
    var n = new Number(num);
    var ct = new Ext.container.Container({
        xtype:"container",
        layout:"vbox",
        //padding:"5 0",
        items: [{
            xtype:"container",
            itemId: fieldId,
            }, {
            xtype: "container",
            layout:"hbox",
            padding: "5 0",
            items: [{
                xtype: 'textfield',
                vtype: v,
                name: textId,
                fieldLabel: field,
                validateOnBlur: true
            }, {
                xtype: "button",
                text: text,
                width: 115,
                handler: function() {
                    ct.down('#' + fieldId).add(Ext.ComponentMgr.create({
                        xtype: "container",
                        itemId: 'entry' + n,
                        layout: "hbox",
                        padding: "5 0",
                        items: [{
                            xtype: "component",
                            html: "<p>" + textId.getValue() + "</p>"
                        }, {
                            xtype: "button",
                            itemId: 'dButton',
                            text: "delete",
                            width: 80
                            }
                        }]
                    }));
                    n++;
                }
            }]
        }]
    });
    return ct;
} 
```

I'm getting Uncaught TypeError: Object ignoreField has no method 'getValue' when I click on the button. I'm unsure why the textfields getValue method is not working or if I am doing something obviously wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:55:32.477

感谢所有试图帮助我解决这个问题的人。我能够弄清楚我的错在哪里。对于我的文本字段，我应该只使用`id:`标签而不是`name:`这里`itemId`是那些关心的人的工作代码。

```
createTextAndButton: function(fieldId,  textId, field, text, num) {
    var n = new Number(num);
    var ct = new Ext.container.Container({
        xtype:"container",
        layout:"vbox",
        //padding:"5 0",
        items: [{
            xtype:"container",
            itemId: fieldId,
            }, {
            xtype: "container",
            layout:"hbox",
            padding: "5 0",
            items: [{
                xtype: 'textfield',
                id: textId,
                fieldLabel: field,
                validateOnBlur: true
            }, {
                xtype: "button",
                text: text,
                width: 115,
                handler: function() {
                    ct.down('#' + fieldId).add(Ext.ComponentMgr.create({
                        xtype: "container",
                        Id: 'entry' + n,
                        layout: "hbox",
                        padding: "5 0",
                        items: [{
                            xtype: "component",
                            html: "<p>" + Ext.getCmp(textId).getValue() + "</p>"
                        }, {
                            xtype: "button",
                            itemId: 'dButton',
                            text: "delete",
                            width: 80
                        }]
                    }));
                    n++;
                }
            }]
        }]
    });
    return ct;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:25:48.717

itemId 对于特定容器是本地的，getCmp() 只会检索组件的全局 id。

执行以下操作会容易得多：

```
createTextAndButton: function(fieldId, type, v, textId, field, text) {
    var ct = new Ext.container.Container({
        xtype:"container",
        layout:"vbox",
        //padding:"5,0",
        items: [{
            xtype:"container",
            itemId: fieldId,
            },{
            xtype: "container",
            layout:"hbox",
            padding: "5 0",
            items: [{
                xtype: type,
                vtype: v,
                itemId: textId,
                fieldLabel: field,
                validateOnBlur: true
            }, {
                xtype: "button",
                text: text,
                width: 115,
                handler: function() {
                    ct.down('#' + fieldId).add(new Ext.container.Container({
                        xtype: "container",
                        padding: "5 0",
                        items: [{
                            xtype: "component",
                            autoEl: "pre",
                            html: textId.getValue()
                        }, {
                            xtype: "button",
                            text: "delete",
                            width: 115
                        }]
                    }));
                }
            }]
        }]
    });
    return ct;
} 
```

# powershell - Calling Mocha and piping results to string

> ID：14696549
> 
> 赞同：0
> 
> 时间：2013-02-04T22:06:29.237
> 
> 标签：powershell, filesystemwatcher, pipeline, mocha.js

I've created a a `FileSystemWatcher` object that I have events registered for. I intend that this script will run an execute `mocha` in the same directory. I can execute `mocha` from the script using:

```
$testProgram = "mocha"
& $testProgam 
```

I get the results.. ...

```
3 test complete.... 
```

Now when I take this same code and wrap it in the event like this...

```
$changed = Register-ObjectEvent $watcher "Changed" -Action {
  clear
  write-host "Running Test Scripts.........."
  write-host "Changed: $($eventArgs.FullPath)"
  & testProgram
} 
```

I get this...

```
Running Test Scripts.......................
Changed: C:\files\main.js 
```

Where are the results of the `& testProgram`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:20:29.903

我没有PS来测试这个atm，所以如果我错了，请纠正我。我可以想到您可以检查的多个问题：

*   你有一个错字。在您的操作块`testProgram`中，前面缺少一个美元符号。
*   我很确定 ObjectEvent 在单独的范围内运行操作块，您无法从脚本中获取参数。您可以尝试使用例如`$global:testProgram`.
*   相对路径在这里可能不起作用。您可能需要“mocha”可执行文件的绝对路径或它是什么。

编辑：我找到了一个解决方案，您可以尝试解决可能的范围问题（到达`testprogram`操作块内的变量）。[Shay Levi 在Technet](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/07bbb0e5-0d31-451c-97e8-fad42361389f/)上发布了此代码示例。它使用`-MessageData`参数将输入传递到您的操作块。这是他的代码示例：

```
#Use the -MessageData parameter:

Register-ObjectEvent ... -MessageData $foo

#Access the variable from within the action block

$event.MessageData 
```

# eclipse - 我是否以正确的方式在 Eclipse 中使用 Git？

> ID：14696559
> 
> 赞同：3
> 
> 时间：2013-02-04T22:07:15.287
> 
> 标签：eclipse, git, github

在 Windows 上使用 Eclipse Juno。在与 Git 苦苦挣扎之后，这就是我想出的：

注意 - 此时我希望能够推送到 GitHub。

1.  设置项目
2.  将其置于版本控制之下
3.  创建一个远程，这是我的 GitHub 存储库
4.  推送到遥控器

但是，我想让它每当我在 Eclipse 中提交时，它会自动更新我的 GitHub 存储库。目前它只更新我的本地文件夹。我在这里有意义吗？我该怎么做？

另外，为什么在 Eclipse 的工作区中使用 Git 是不好的做法？我的本地计算机上的目录结构如下所示：

*   ...工作区/项目名称
*   ...工作区/项目名称/.git
*   ...工作区/项目名称/bin
*   ...工作区/项目名称/src

谢谢！

PS如果这听起来真的很菜，是的，我在版本控制方面很新，但我想我必须从某个地方开始。看了网上所有的教程，这就是我想出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:39:25.337

**自动将更改推送到遥控器。**

使用最新版本的 Eclipse 的 eGit 插件，有一个复选框可以将每个提交推送到配置的远程。

来自 CVS/SVN 的人通常会自动推送到远程。但是，在像 Git 这样的分布式版本控制系统中，我建议不要这样做。尤其是在较大的团队中，您不一定希望将每个提交推送到远程以供所有人查看。

**目录结构**

有一篇[关于](http://wiki.eclipse.org/EGit/User_Guide#Considerations_for_Git_Repositories_to_be_used_in_Eclipse)Eclipse 建议不要在 Eclipse 工作区中创建存储库的文章。

# c - 我的二进制文件中的零是怎么回事？

> ID：14696560
> 
> 赞同：4
> 
> 时间：2013-02-04T22:07:15.700
> 
> 标签：c, linux, fwrite

所以。我一直在试验 fwrite()。

在我的系统 sizeof(int) = 4。我有一个整数数组，其中包含：1、2、3、4、5 和 6。

当我将它写入二进制文件并使用 hexdump 查看它时，我得到：

```
0000000 0001 0000 0002 0000 0003 0000 0004 0000
0000010 0005 0000 0006 0000                    
0000018 
```

它在 4 字节值之间写入零是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:09:24.783

因为 1（例如）表示为 4 字节十六进制是`00000001`. 显然你在一个[小端](http://en.wikipedia.org/wiki/Endianness)系统上，因此当你检查你的文件时显然是从后到前的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T22:14:52.843

您的 hexdump 将两个字节组合为一个单词并更改字节顺序。在大多数系统上，使用`hexdump -C`将转储更改为可防止分组的规范视图。在十六进制中，一个字符代表一个 nybble，每个字节有两个 nybbles。所以你的 4 字节`int`总共应该有 8 个 nybbles。由于您的数字非常小，因此您的大多数 nybbles 都是 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T22:09:35.833

我认为您误解了输出中一个字节的大小 - 8 位需要两个十六进制数字才能完全表示。您的示例中的一个单曲`int`是：

```
0001 0000 
```

您可能希望显示为 32 位数据（或 8 位数据）而不是 16。这就是让您的转储看起来很奇怪的原因。

我复制了您的二进制文件并`od`使用了几个不同的选项运行。希望你能发现这个例子很有启发性：

```
$ od -t x4 example
0000000          00000001        00000002        00000003        00000004
0000020          00000005        00000006                                
0000030
$ od -t x2 example 
0000000      0001    0000    0002    0000    0003    0000    0004    0000
0000020      0005    0000    0006    0000                                
0000030
$ od -t x1 example 
0000000    01  00  00  00  02  00  00  00  03  00  00  00  04  00  00  00
0000020    05  00  00  00  06  00  00  00                                
0000030 
```

正如您从 1 字节和 4 字节示例中所看到的那样，我也像您一样使用 little-endian 机器。

# webrequest - 向站点创建更改编辑 Web 请求的软件

> ID：14696562
> 
> 赞同：0
> 
> 时间：2013-02-04T22:07:20.107
> 
> 标签：webrequest

我需要一个充当 Web 浏览器的软件，并且还使用户能够检查 Web 请求和响应，还可以更改/更改/编辑它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T22:25:53.633

你有两个选择：

# 提琴手软件

使用[提琴手](http://fiddler2.com/)。它可以让您监控机器上的所有 Web 流量并篡改客户端请求和响应。

# 或者您最喜欢的网络浏览器可以为您执行此操作。

在任何浏览器中，您都可以按下`F12`以调出检查窗口，然后转到“网络”选项卡以查看正在发出的请求。

如果你想改变它们，你可以使用像[Chrome 的 Request Maker](https://chrome.google.com/webstore/detail/request-maker/kajfghlhfkcocafkcjlajldicbikpgnp?hl=en)或[Firefox 的 Modify Headers](https://addons.mozilla.org/En-us/firefox/addon/modify-headers/)这样的扩展。

# java - 根据值获取数组项的索引

> ID：14696563
> 
> 赞同：7
> 
> 时间：2013-02-04T22:07:22.250
> 
> 标签：java, android

我在arrays.xml 中定义了一个字符串数组，它引用了strings.xml 中的两个字符串：

```
<string-array name="my_options">
  <item>@string/my_string_one</item>
  <item>@string/my_string_two</item>
</string-array>

<string name="my_string_one">Value 1</string>
<string name="my_string_two">Value 2</string> 
```

我需要根据字符串的值获取数组中某个项目的位置。即字符串“Value 2”的索引为 1。我显然可以硬编码位置值（0、1 等），但如果字符串的顺序发生更改，它将中断。我希望代码在位置上是独立的。以下作品：

```
int value = Arrays.asList((getResources().getStringArray(R.array.my_options))).indexOf(getString(R.string.my_string_one)); 
```

有没有更紧凑、更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T22:16:17.473

您在问题中显示的代码基本上就是您需要做的。

但是，您可以对其进行一些重构以使其更具可读性： Refactor Arrays.asList((getResources().getStringArray(R.array.my_options))) 到列表中（我不知道您的应用程序的代码是什么样的，但是您可以将此列表存储为实例字段，甚至可以存储为静态（类）字段）。

```
static List<String> myOptions;

.... 
    if (myOptions == null) {
        myOptions = Arrays.asList((getResources().getStringArray(R.array.my_options)));
    }

...

    int value = myOptions.indexOf(getString(R.string.my_string_one)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:11:22.787

也许 HashSet 可能会帮助您或类似的东西，您将字符串的名称作为键，将值作为值。然后您可以选择带有键名的值。

# backbone.js - 在 jsfiddle 上使用 Backbone 模拟 ajax 请求

> ID：14696564
> 
> 赞同：0
> 
> 时间：2013-02-04T22:07:22.610
> 
> 标签：backbone.js, jsfiddle

我正在尝试设置我在 jsfiddle 上制作的应用程序的演示，以便获得解决问题的帮助。它将需要进行 ajax 调用。jsFiddle 有一个 echo api（此处为[http://jsfiddle.net/zalun/yVbYQ/](http://jsfiddle.net/zalun/yVbYQ/)示例小提琴）来模拟 ajax 调用，但我不知道如何将它集成到骨干模型或集合中，如下所示. 这是骨干模型的小提琴... [http://jsfiddle.net/mjmitche/RRXnK/117/](http://jsfiddle.net/mjmitche/RRXnK/117/)如果有帮助的话。

```
var Game = Backbone.Model.extend({

    initialize: function () {

    },
    getStuff: function () {
        var _this = this;

        $.ajax({
            url: "http://search.twitter.com/search.json?q=from:realDonaldTrump",
            type: "GET",
            success: function (response) {
               alert(response.results[0]);
                alert("success");
               _this.trigger("gameStartedEvent", response);
            },
            error: function (r) {
                alert("error");
                alert(r);

            }
        });

    }

});

var game = new Game();
game.getStuff(); 
```

jsfiddle 模拟 ajax 调用的示例

```
new Request.JSONP({
    url: 'http://jsfiddle.net/echo/jsonp/',
    data: {
        tweet1: 'some text',
        tweet2: 'another text'
        tweet3: 'blah blah'
    },
    onSuccess: function(response) {
        show_response(response, $('post'));
    }
}).send();

show_response = function(obj, result) {
    $H(obj).each(function(v, k) {
        new Element('li', {
            text: k + ': ' + v
        }).inject(result);
    });
    result.highlight();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:14:00.803

JSFiddle echo API 不支持实现 Backbone CRUD 所需的 HTTP 操作范围。`POST /echo`你可以模拟创建新模型，但仅此而已。

相反，请考虑 sinon.js [`fakeServer`](http://sinonjs.org/docs/#fakeServer)，它`autoRespond`可以选择在客户端模拟您的服务。这将需要更多的工作，但会提供更“真实”的模拟。

FWIW，对于普通的 CRUD 用例，我推荐[Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)。它是 的直接替代品`Backbone.sync`，因此只需将其作为资源包含，将您的收藏的`url`属性更改为`localStorage`，然后您就可以开展业务了。但是，这对您不起作用，因为您正在手动发出 AJAX 请求，因此您需要降低。

# mysql - 每个类别选择 5 个子类别

> ID：14696566
> 
> 赞同：3
> 
> 时间：2013-02-04T22:07:30.227
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个表，其中`product_category`包含字段`id`、`name`和。`parent_id``level`

例如，类别*农业*有**`id = 75`**和。子类别*玉米*、*小麦*、*黑麦*等有和。**`level = 1`**`parent_id = NULL`*****`level = 2`****`parent_id = 75`*****

 ***在我的站点中，我想显示顶级类别，在每个类别下方，只有 5 个子类别。但是做一个查询来检索它们比我想象的要难。

如果我执行以下查询：

```
SELECT a.name, a.parent_id FROM product_category a
WHERE (
    SELECT b.level
    FROM product_category b
    WHERE b.id = a.parent_id
    LIMIT 1
) = 1 
```

我检索*所有*顶级类别和子类别，但有数千个子类别，所以当我只想要每个类别的前 5 个时，它会非常不必要地昂贵。

如果我执行以下操作：

```
SELECT a.name, a.parent_id FROM product_category a
WHERE (
    SELECT b.level
    FROM product_category b
    WHERE b.id = a.parent_id
    LIMIT 1
) = 1
LIMIT 5 
```

它只检索 5 个子类别，而不是**每个***顶级*类别的 5 个子类别。

然后我想到了以下方式：

```
(
     SELECT a.name, a.parent_id FROM product_category a
     WHERE parent_id = 12
     LIMIT 5
) UNION (
     SELECT a.name, a.parent_id FROM product_category a
     WHERE parent_id = 21
     LIMIT 5
) UNION (     
     SELECT a.name, a.parent_id FROM product_category a
     WHERE parent_id = 75
     LIMIT 5
) UNION (
.
.
. 
```

这看起来很脏且硬编码，但这是我现在能想到的唯一方法。有没有其他解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:32:12.667

这是一个示例，每个根类别最多返回两个子类别：

```
select  parent.name as Category
,       child.name as SubCategory
from    (
        select  name
        ,       parent_id
        ,       @rn := if(@cur = parent_id, @rn+1, 1) as rn
        ,       @cur := parent_id
        from    product_category pc
        join    (select @rn := 0, @cur := '') i
        where   level = 2
        order by
                parent_id
        ,       id
        ) as child
join    product_category as parent
on      child.parent_id = parent.id
where   child.rn < 3 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/f6e1f/17/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:41:12.603

此解决方案按字母顺序排列子结果的优先级...

```
SELECT * FROM product_category;
+-----+---------------------+-----------+-------+
| id  | name                | parent_id | level |
+-----+---------------------+-----------+-------+
|  75 | Agriculture         |      NULL |     1 |
|  76 | Corn                |        75 |     2 |
|  77 | Wheat               |        75 |     2 |
|  78 | Rye                 |        75 |     2 |
|  85 | Vehicles            |      NULL |     1 |
|  86 | Cars                |        85 |     1 |
|  87 | Planes              |        85 |     1 |
|  88 | Trains              |        85 |     1 |
|  95 | Painters            |      NULL |     1 |
|  96 | Surrealists         |        95 |     2 |
|  97 | Impressionists      |        95 |     2 |
|  98 | Post-Impressionists |        95 |     2 |
|  99 | Max Ernst           |        96 |     3 |
| 100 | Claude Monet        |        97 |     3 |
| 101 | Gauguin             |        98 |     3 |
| 102 | Van Gogh            |        98 |     3 |
+-----+---------------------+-----------+-------+

SELECT a.*
  FROM
     ( SELECT x.*
            , y.name subcategory
         FROM product_category x
         JOIN product_category y
           ON y.parent_id = x.id
        WHERE x.parent_id IS NULL
     ) a
  JOIN
     ( SELECT x.*
            , y.name subcategory
         FROM product_category x
         JOIN product_category y
           ON y.parent_id = x.id
        WHERE x.parent_id IS NULL
     ) b
    ON b.id = a.id
   AND b.subcategory <= a.subcategory
 GROUP
    BY a.id,a.subcategory
HAVING COUNT(*) <= 2;
+----+-------------+-----------+-------+---------------------+
| id | name        | parent_id | level | subcategory         |
+----+-------------+-----------+-------+---------------------+
| 75 | Agriculture |      NULL |     1 | Corn                |
| 75 | Agriculture |      NULL |     1 | Rye                 |
| 85 | Vehicles    |      NULL |     1 | Cars                |
| 85 | Vehicles    |      NULL |     1 | Planes              |
| 95 | Painters    |      NULL |     1 | Impressionists      |
| 95 | Painters    |      NULL |     1 | Post-Impressionists |
+----+-------------+-----------+-------+---------------------+ 
```***

# domain-driven-design - 避免领域驱动设计中的工作单元模式

> ID：14696568
> 
> 赞同：25
> 
> 时间：2013-02-04T22:07:33.997
> 
> 标签：domain-driven-design, unit-of-work, aggregateroot

我读过这篇文章，这让我三思而后行……：

“避免工作单元模式。聚合根应定义事务边界。”

为什么有人应该避免应用领域驱动设计的 UOW 模式？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-05T08:33:24.387

（在我的帖子之前，我建议阅读V. Vernon 的“实施领域驱动设计”一书的[这一章](http://my.safaribooksonline.com/book/project-management/9780133039900/chapter-1dot-getting-started-with-ddd/ch01lev1sec2_html#X2ludGVybmFsX0h0bWxWaWV3P3htbGlkPTk3ODAxMzMwMzk5MDAlMkZjaDEwX2h0bWwmcXVlcnk9)。它可以帮助您接近聚合并包含对您问题的长答案。）

在一个设计合理的系统中，一个命令一次更改一个聚合，每个聚合都有边界，这些边界由聚合根中的不变量定义。因此，当您对聚合进行任何更改时，将检查不变量并在一个事务中应用（或不应用）更改。这是*事务一致性*。你需要在这里使用工作单元吗？不要这么想。

但我们经常会遇到一次需要更改多个聚合的情况。事务变得更大，它们涉及的不仅仅是系统的一部分，我们谈论的是*最终一致性*。在这种情况下，UoW 是一个很好的帮手。

正如在没有上下文的情况下提到的那样，很难猜测作者在想什么，但我想他讲述了事务一致性案例。在分布式系统中，您将需要使用诸如 UoW 之类的东西来为系统提供最终的一致性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T23:30:06.237

基本上，根据[M. Fowler](http://martinfowler.com/eaaCatalog/unitOfWork.html)的说法，UoW “只是”一种智能持久性工具（无论此任务可能多么复杂）。所以恕我直言，与 DDD 方法没有内在的不兼容性，它为您的域建模的“精神”提供了更多指导，而不是技术工具。

没有上下文，很难说出引文的作者在想什么。但也许他写这个是因为在使用 UoW 时，通常很难让您的实体管理自己的生命周期（以及其他人的生命周期），通常具有持久性和事务行为。

事实上，可以在带有[AOP](https://stackoverflow.com/questions/2267206/how-can-domain-driven-design-be-combined-with-aspect-oriented-programming)的 DDD 风格的应用程序中使用 UoW 模式。使用这种工具，可以保持 DDD 精神，以实体为中心，具有业务能力的领域模型，同时利用复杂但业务正交的机制来实现适当的事务持久性。

通常，在 Java 世界中，您可以在 DDD 应用程序中使用：

*   [Hibernate/JPA as a UoW ：提供域模型](https://stackoverflow.com/questions/3532258/unit-of-work-pattern-and-history)[实体](http://docs.oracle.com/javaee/6/api/javax/persistence/Entity.html)的“智能持久性”（也可能是 JPA @Entity ）
*   [Spring AOP + AspectJ](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-using-aspectj) ：在实体中提供[DI](http://en.wikipedia.org/wiki/Dependency_injection)
*   [Spring TX + AspectJ](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#transaction-declarative-aspectj)：在您的实体中启用事务方法

这些提供了 DDD 就绪（和大量@nnotated ;]）实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-11T13:21:37.803

首先，聚合是一个对象，用于保存一组加载实体，用于应用命令。

*   实体可以属于许多不同的聚合。
*   每个命令只能与一个聚合通信，该聚合应该包含命令所需的所有实体。
*   聚合可以在命令之间重用。

“工作单元”基本上是动态聚合，允许对一组实体进行单个事务更新，而无需在代码中明确定义聚合来执行此操作。

这是以没有明确的 Aggregate 类为代价的，在该类上放置保护不变量的突变方法。

投票最多的答案包含：

> 但我们经常会遇到一次需要更改多个聚合的情况。事务变得更大，它们涉及的不仅仅是系统的一部分，我们谈论的是最终一致性。在这种情况下，UoW 是一个很好的帮手。

这是荒谬的，因为根据定义，聚合是事务所需的一组内容。如果您发现您“需要来自两个不同聚合的实体”，那么实际上您需要的是“定义一个包含对所需实体的引用的附加聚合”。

# oracle - 带有IF的Oracle游标，需要帮助

> ID：14696572
> 
> 赞同：0
> 
> 时间：2013-02-04T22:07:52.833
> 
> 标签：oracle, cursor

我正在努力使用光标，尝试了不同的版本但没有运气，并决定在这里寻求帮助。如何使 IF 条件起作用？我必须计算一些东西，然后检查这个计数是否大于 10，然后删除一些东西。如何将 count(*) 传递给 IF 条件然后执行某些操作？提前致谢。

```
 DECLARE
  CURSOR MY_CURSOR
      IS

SELECT CSH.STATUSCHANGEDDATE AS STATUSCHANGEDDATE_, CSH.CUSTOMER AS CUSTOMER_ from        CUSTOMER_STATUSES csh WHERE 
csh.STATUSCHANGEDATE>SOME_DATE AND CSH.STATUS = 'X_STATUS'

 MY_RECORD MY_CURSOR%ROWTYPE;

    BEGIN
      OPEN MY_CURSOR;
      LOOP
        FETCH MY_CURSOR INTO MY_RECORD;
        EXIT
      WHEN MY_CURSOR%NOTFOUND;

SELECT COUNT(*) FROM SOME_TABLE WHERE SOME_DATE = STATUSCHANGEDDATE_ AND ....

    iF ABOVE_COUNT = 10 THEN
        DELETE * FROM SOME_TABLE2 WHERE SOME_CONDITION2
  ELSE 
 END IF

      END LOOP;
END LOOP;
 COMMIT;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:32:36.520

在声明中：

```
COUNT_VAR NUMBER(38); 
```

体内：

```
SELECT COUNT(*) INTO COUNT_VAR
FROM SOME_TABLE 
WHERE SOME_DATE = STATUSCHANGEDDATE_ AND ....;

IF COUNT_VAR = 10 THEN
    DELETE * FROM SOME_TABLE2 WHERE SOME_CONDITION2;
END IF; 
```

# time - 每 12 小时和 1 分钟一次的 Cron 作业

> ID：14696574
> 
> 赞同：0
> 
> 时间：2013-02-04T22:08:05.843
> 
> 标签：time, cron, cpanel

我需要每 12 小时 1 分钟加载一个文件，这意味着**一天中没有确定的时间**。

我正在使用 cPanel 来运行 CronJob，并且任务（`wget`）已经正常工作，我只是在时间安排上遇到了麻烦。

我努力了：

```
Minute  Hour    Day Month   Weekday 
*/1     */12    *    *     * 
```

但后来意识到这不是我想要的，因为它`wget`每 12 小时加载 60 次。

我应该如何**设置时间**以便**每 12 小时 1 分钟**执行一次命令？

我的意思是每个命令之间应该有 12 小时 1 分钟的差异。示例：第一次运行**0:00**，第二次运行**12:01**，第三次运行**0:02**，第四次运行**12:03**等。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:26:04.090

假设您正在使用 bash：

```
* */12 * * * sleep 60; wget <url> 
```

# c++ - Is it possible to have a variable number of string arrays in C++?

> ID：14696582
> 
> 赞同：0
> 
> 时间：2013-02-04T22:08:38.057
> 
> 标签：c++, arrays, string, variables

Is it possible to have a variable number of string arrays?

psuedo-psuedo code example:

```
cout<<"Number of family members?"<< endl;
cin>> n;

n_1[5]= {whatever}
n_2[5]= {whatever}
n_3[5]= {whatever}
n_4[5]= {whatever}
n_5[5]= {whatever}
n_n[5]= {whatever} 
```

Is that at all possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T22:11:14.717

你的问题并不完全清楚，但听起来你可能想要的是这个一般顺序的东西：

```
std::cout << "Number of family members? ";
std::cin >> n;

std::vector<std::string> family(n);    

for (int i=0; i<n; i++) {
    std::cout << "Name[" << i << "]: ";
    std::cin >> family[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:10:45.153

假设您想在运行时指定这些字符串数组的数量，您可以使用 a`vector<string>`或 a `vector<vector<string>>`，具体取决于您所说的“字符串数组”的确切含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:56:02.920

如果您在 MS Visual Studio 中执行此操作，那么您只需编写“使用命名空间标准；” 而不是到处写“std::”。我不知道它是否适用于其他 IDE，因为我也是 C++ 新手。对不起题外话:)

# java - Loop over the first 20 elements of an array in Java

> ID：14696584
> 
> 赞同：7
> 
> 时间：2013-02-04T22:08:40.623
> 
> 标签：java, arrays, loops

I have this loop here

```
 for(int i =0; i < prices.length; i++)
  {
        if(prices[i]>largest)
        {
            largest = prices[i];
        }

        else if(prices[i]<smallest)
        {
            smallest= prices[i];
        }
  } 
```

which loops through the whole array and finds the min and max value. Say I wanted to only loop through the first 20 elements how do I do that? I have tried along the lines of putting a nested loop in under this for loop and seeing if I come across it but I can't.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T22:11:10.027

您可以将要求添加到循环控制条件：

```
for(int i =0; i < prices.length && i < 20; i++) 
```

这将检查数组中超过 20 个的前 20 个元素，但如果少于 20 个项目，则检查整个数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T22:12:10.643

```
for(int i =0; i < 20 && i < prices.length; i++) 
```

这将循环 20 次，即数组的前 20 个元素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-04T23:39:32.837

5个答案，他们都在循环中有双重比较？

难怪Java程序运行得这么慢……

执行此类循环的正确方法是：

```
 for(int i = 0, len = Math.min(prices.length, 20); i < len; i++) 
```

将 length 和 20 之间的比较移出循环并评估循环条件，因此速度提高了一倍。（忽略 JIT 可能会或可能不会做的事情）

此外，您必须使用第一个元素初始化最大/最小元素（或者如果由于 else 而数组中只有一个元素，则会得到无效值），然后您可以跳过循环中的第一个元素，使其均匀“快点”：

```
 largest = prices[0];
 smallest = prices[0];
 for(int i = 1, len = Math.min(prices.length, 20); i < len; i++) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-04T22:21:37.367

替换`prices.length`为`Math.min(20, prices.length)`，这是数组的长度或 20，以较小者为准：

`for(int i =0; i < Math.min(20, prices.length); i++)`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-04T22:11:35.403

将您的 for 循环更改为以下内容：

```
for(int i =0; i < (prices.length < 20 ? prices.length : 20); i++)
{
    if(prices[i]>largest)
    {
        largest = prices[i];
    }
    else if(prices[i]<smallest)
    {
        smallest= prices[i];
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-04T22:09:56.983

如果你只想循环遍历前 20 个元素，那么在 for 循环的标题中这样说，就像这样。

```
for(int i =0; i < prices.length && i < 20; i++) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-16T22:30:02.197

最大值是正确的以获得最小值很简单让 max = min 然后像那时一样工作

```
if(min>x[i])
  min=x[i]; 
```

# objective-c - 来自模型类的数组返回 NULL

> ID：14696587
> 
> 赞同：1
> 
> 时间：2013-02-04T22:08:54.533
> 
> 标签：objective-c, macos, model-view-controller

如何从我的模型类中调用数组`NSWindowController`？在`valueArray`AppDelegate 中设置为模型类`ValueItem`：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    ValueItem *vi;
    ResultWindowController *rwc;
    IBOutlet NSArrayController *outArrayController;
} 
```

和

```
@implementation AppDelegate
....
- (IBAction)pushOk:(NSButton *)sender
{
    self->vi = [[ValueItem alloc]init];
    [vi setValueArray:[outArrayController arrangedObjects]];
    NSLog(@"vi.valueArray is:%@", vi.valueArray);

    if (rwc)
    {
        [rwc close];
    }
    rwc = [[ResultWindowController alloc] init];
    [rwc setShouldCascadeWindows:NO];
    [rwc showWindow:self];

} 
```

调用`NSLog(@"vi.valueArray is:%@", vi.valueArray);`返回数组内容就好了。但是当我尝试在我的另一个中使用它时，`NSWindowController`它总是返回`NULL`：

```
@interface ResultWindowController : NSWindowController
{
    ValueItem *vi;
    NSNumber *resultAverage;
} 
```

和

```
@implementation ResultWindowController
@synthesize resultAverage;
...

- (IBAction)pushChange:(NSButton *)sender
{
    [self calculateAverage];
    [_outputLabel setDoubleValue:[resultAverage doubleValue]];
    NSLog(@"resultAverage is:%@", resultAverage);
    NSLog(@"vi.valueArray is:%@", vi.valueArray);
}

-(void)calculateAverage
{
    resultAverage = [vi.valueArray valueForKeyPath:@"@avg.nomValue"];
} 
```

我找不到丢失的链接？我在这里想念什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:13:36.950

You have two separate and unrelated instances of `ValueItem *vi` in your two classes. That explains why you set it up in the first class, but in the second `vi` is still `nil`.

You should be able to fix it by doing this:

```
rwc = [[ResultWindowController alloc] init];
[rwc setVi:self->vi];                // <--- this
[rwc setShouldCascadeWindows:NO];
[rwc showWindow:self]; 
```

In order to do that, you should define a proper setter method in `RootWindowController`.

Alternatively, if you want to make your AppDelegate act as a model, you could do:

```
ValueItem *vi = [(AppDelegate*)[UIApplication sharedApplication].delegate vi]; 
```

when you need to access `vi`. You could then remove the `vi` ivar declared in `RootWindowController` (since you would access directly the one in you app delegate).

Actually, it would be better creating a separate class acting as a model. It could be a singleton and you could access it like this:

```
ValueItem *vi = [MyModel sharedModel].vi; 
```

far more readable and concise.

# asp.net - 使用 EntityFramework 时到远程数据库的连接字符串

> ID：14696589
> 
> 赞同：0
> 
> 时间：2013-02-04T22:09:00.087
> 
> 标签：asp.net, sql-server, sql-server-2008, entity-framework, entity-framework-5

我有一个 ASP.NET MVC 应用程序，并且正在使用 EntityFramework 5.0。我还安装了一个“CodeFirstMembershipProvider”Nuget 包，它为 ASP.NET 成员资格提供了一些代码 - 我相信我的 web.config 也进行了更改。

基本上，我的问题是我的应用程序在本地 SQL Server 实例上运行良好，但是当我使用此连接字符串指定远程数据库时：

> ```
>  <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=*******************, 14330;Integrated Security=False;Database=qrcodetr_database;Uid=qrcodetr_admin;Password=*********; Connect Timeout=15;Encrypt=False;Network Library=dbmssocn;Packet Size=4096" /> 
> ```

（密码和主机名已编辑）

它无法使用此连接字符串。它继续尝试使用本地 SQL Server 实例，因此它可以在本地工作，但是当我在我的 Web 和数据库主机上尝试它时，它失败了 - 因为它尝试使用它无法在我的数据库上执行的本地 SQL Server 实例主持人。远程数据库主机使用 SQL Server 2008 R2。

有谁知道为什么会这样或者我能做些什么来解决这个问题？

我不会发布整个 web.config，但这里有几行可能相关：

```
<add key="DatabaseInitializerForType TreasureHuntDB, QrCodeTreasureHunter" value="DataContextInitializer, QrCodeTreasureHunter" 
```

> ```
> <sessionState mode="InProc" customProvider="DefaultSessionProvider">
>   <providers>
>     <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
>   </providers>
> </sessionState>
> <membership defaultProvider="CodeFirstMembershipProvider">
>   <providers>
>     <add name="CodeFirstMembershipProvider" type="CodeFirstMembershipProvider" connectionStringName="DefaultConnection" />
>   </providers>
> </membership>
> <roleManager enabled="true" defaultProvider="CodeFirstRoleProvider">
>   <providers>
>     <clear />
>     <add name="CodeFirstRoleProvider" type="CodeFirstRoleProvider" connectionStringName="DefaultConnection" />
>   </providers>
> </roleManager> 
> ```

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

顺便说一句，我能够通过 SQL Server 2008 成功连接到远程数据库，所以这个问题肯定是我的配置问题。

顺便说一句，我使用的是设置为“CreateDatabaseIfNotExists”的 DataContextInitializer。我已将其设置为此，因为在托管数据库上，我没有创建或删除数据库的权限，所以我所做的是我创建了本地创建的其中一个的备份（在 SQL Server Express ) 并使用还原功能将文件还原到我的托管数据库。所以我有一个数据库，它不能与我的应用程序一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:34:16.143

[这个](https://stackoverflow.com/questions/11801471/defaultconnection-and-membership-what-is-the-connection-between-localsqlserver)问题和答案表明您的连接字符串部分应如下所示：

```
<connectionStrings>
    <clear /> <!--- need this to prevent using LocalSqlServer from machine.config or somewhere becouse it is not present when when publish to hosting -->
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="etc" />  
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:52:25.740

您似乎没有告诉 EF 连接字符串的名称，所以它只是按照惯例创建一个。您可以将名称以 的形式传递给 DbContext ctor，也可以`"Name=DefaultConnection"`在配置中重命名连接字符串，使其名称与 Db​​Context 派生类的名称匹配。

# ios - iOS以UTC计算上周日中午的日期戳

> ID：14696593
> 
> 赞同：1
> 
> 时间：2013-02-04T22:09:06.480
> 
> 标签：ios, nsdate

我需要一个指向 UTC 上周日中午的日期戳。我从[上周日凌晨 12:00 动态创建日期](https://stackoverflow.com/questions/11565018/dynamically-create-date-for-last-sunday-at-1200-am)得到了一些非常接近的结果 ：

```
NSDate *today = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[calendar setLocale:[NSLocale currentLocale]];

NSDateComponents *nowComponents = [calendar components:NSYearCalendarUnit | NSWeekCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:today];

[nowComponents setWeekday:1]; //Sunday
[nowComponents setHour:12]; // noon
[nowComponents setMinute:0];
[nowComponents setSecond:0];

NSDate *previousSunday = [calendar dateFromComponents:nowComponents]; 
```

但这给了我`NSDate`“当前时区中午”的对象，它通常与“GTM/UTC 中午”不匹配。如何更正此日期以考虑时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:25:33.293

```
 [nowComponents setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:39:54.613

日期*是*UTC，问题是日期的 NSLog() 将显示您当前时区的日期/时间。

对于实际时间使用：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy"];
NSLog(@"date: %@", [formatter stringFromDate:date]); 
```

# jquery - 使用 jQuery serializeObject 制作多个单选框的数组

> ID：14696598
> 
> 赞同：0
> 
> 时间：2013-02-04T22:09:20.967
> 
> 标签：jquery, json, serialization

当我试图从 html 输入中获取 json 数据时，我发现了这个线程： [Convert form data to JavaScript object with jQuery](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

serializeObject 函数完成了我需要的大部分事情，只有一件事我还没有完成

我有 4 个字符，用户可以为每个字符分配 0 到 3 分

所以我得到的json是

```
{"charakter1":"0","charakter2":"2","charakter3":"3","charakter4":"1"} 
```

但我想将此信息保存为数组，所以我想要的是

```
{"charakter":[0,2,3,1]} 
```

我如何必须更改单选按钮的名称才能获取此数组？

我为此 [http://jsfiddle.net/sxGtM/3028/创建了一个 jsfiddle](http://jsfiddle.net/sxGtM/3028/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:12:47.447

尝试对变量使用数组，如下所示：

```
<input type="radio" name="charakter[2]" value="0"/>0
<input type="radio" name="charakter[2]" value="1" checked />1
<input type="radio" name="charakter[2]" value="2"/>2
<input type="radio" name="charakter[2]" value="3"/>3<br/>

<input type="radio" name="charakter[3]" value="0"/>0
<input type="radio" name="charakter[3]" value="1" checked />1
<input type="radio" name="charakter[3]" value="2"/>2
<input type="radio" name="charakter[3]" value="3"/>3<br/> 
```

结果如下：

```
{"charakter":["0","2","3","1"]} 
```

jFiddle 在这里：http: [//jsfiddle.net/sxGtM/3029/](http://jsfiddle.net/sxGtM/3029/)

# java - Tomcat 7 上下文参数覆盖

> ID：14696601
> 
> 赞同：5
> 
> 时间：2013-02-04T22:09:27.357
> 
> 标签：java, tomcat, servlets, configuration

我试图通过在我的应用程序的 web.xml 文件中创建一个 context.xml 文件来覆盖一个参数`<tomcatHome>/conf/Catalina/localhost`

context.xml 文件看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/myapp">    
    <Parameter name="port" value="100" override="1"/>
</Context> 
```

但我收到一条错误消息

```
java.lang.IllegalArgumentException: Document base <path-to-tomcat> apache-tomcat-7.0.35/webapps/context does not exist or is not a readable directory 
```

如果我`<Parameter name="port" value="100" override="1"/>`直接把它放在里面`context.xml`，`<tomcat-home>/context.xml`那么它就可以工作了。

有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T01:54:19.917

这是因为没有名为*context*的应用程序上下文。换句话说，没有将名称*上下文*部署到*webapps*目录的 Web 应用程序。

[形成与定义上下文](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Defining_a_context)相关的官方 Tomcat 7 文档：

> 可以明确定义各个上下文元素：
> 
> *   在应用程序文件内 /META-INF/context.xml 的单个文件中。或者（基于主机的 copyXML 属性）可以将其复制到 $CATALINA_BASE/conf/[enginename]/[hostname]/ 并重命名为应用程序的基本文件名加上“.xml”扩展名。
>     
>     
> *   在 $CATALINA_BASE/conf/[enginename]/[hostname]/ 目录中的单个文件（带有“.xml”扩展名）中。**上下文路径和版本将从文件的基本名称（文件名减去 .xml 扩展名）派生**。此文件将始终优先于打包在 Web 应用程序的 META-INF 目录中的任何 context.xml 文件。
>     
>     
> *   在主 conf/server.xml 的 Host 元素中。

因此，要使其正常工作，请将您的自定义文件命名为不是*context.xml*，而是*your_app_name.xml*。
在您的情况下，它将是（如果我理解正确的话）***myapp.xml***。

这应该有效。我刚刚测试过了。

*我的应用程序.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>    
    <Parameter name="port" value="100" override="1"/>
</Context> 
```

* * *

附言

而且你可以得到没有*路径*属性，所以不要包含它。
从[Apache Tomcat 7 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes)：

> **仅当在 server.xml 中静态定义 Context 时才必须使用此属性**。在所有其他情况下，将从用于 .xml 上下文文件或 docBase 的文件名推断路径。
> 
> **即使在 server.xml 中静态定义 Context 时，也不得设置此属性，除非 docBase 不在 Host 的 appBase 下，或者 deployOnStartup 和 autoDeploy 都为 false**。如果不遵守此规则，很可能导致双重部署。

# wordpress - 在 Joomla 中开发一个类似于组件的 Wordpress 插件

> ID：14696605
> 
> 赞同：2
> 
> 时间：2013-02-04T22:09:35.590
> 
> 标签：wordpress

我的使命：
我有一个系统可以是一个独立的网站，但我想成为现有 CMS 的一部分，这样我就可以避免编写自己的用户管理系统、论坛、博客系统等。我本来可以做它作为 Joomla 中的一个组件！因为我以前一直在使用它，但不幸的是我不喜欢 Joomla！因此选择了 Wordpress。

我的问题：
我的系统应该在我的 Wordpress 页面中都有管理页面和前端页面。我已经能够创建一个插件并添加管理页面，但我还没有弄清楚如何制作前端。一种解决方案可能是在我选择的主题中创建一个页面模板，但是因为我想尽可能地将我的组件与 Wordpress 分开，并且还希望它独立于主题，这是一个糟糕的解决方案。

您如何提供帮助：
请为我提供一个简单的示例或指导我使用教程或现有的 Wordpress 插件，以便我查看以便能够制作我的插件。请记住，这个插件只能在我的页面上使用，并且我只想使用 Wordpress 作为插件的外壳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:40:37.203

我认为您需要的一种方法是创建一个自定义模板文件，您可以将其放入任何主题中。然后你只需要通过 wp-admin 后端创建一个空的 Wordpress 页面，并将页面模板设置为“MyPluginPageTemplate”。模板页面是独立于主题的，可以拖放到系统中的任何一个或所有主题中。

例如，创建一个名为“myplugin-template.php”的文件并将其保存在活动主题文件夹的根目录中。（例如/wordpress/wp-content/themes/activetheme/myplugin-template.php）

将以下代码放入文件中：

```
<? 

 /**
 * Template Name: MyPluginPageTemplate
 *
 * A custom page template for my plugin
 *
 * The "Template Name:" bit above allows this to be selectable
 * from a dropdown menu on the edit page screen.
 *
 * @package WordPress
 * @subpackage 
 * @since 
 */

get_header(); ?>

        <div id="container">
            <div id="content" role="main">
            <?php

            $c = new MyPluginClass();
            $c->pluginInit();

             //Here follows the usual code to include page content in Wordpress - comment out here, because probably not required:
             //get_template_part( 'loop', 'index' );

             ?>

            </div><!-- #content -->
        </div><!-- #container -->

<?php get_footer(); ?> 
```

在这个例子中，我使用了一个包含在一个类中的插件，但它可能只是一个像“myplugin_init()”这样的直接函数。

# sed - 在特定字符串之间替换字符

> ID：14696606
> 
> 赞同：0
> 
> 时间：2013-02-04T22:09:37.330
> 
> 标签：sed

我想将恰好位于两个特定字符串（DP 和 MQ）之间的每个逗号替换为分号。

输入

```
0,0,0,DP=1,1,1,1,MQ=2,2,2 
```

预期产出

```
0,0,0,DP=1;1;1;1;MQ=2,2,2 
```

我在 DP 和 MQ 之前和之后有可变数量的字段，所以我认为 sed 是最好的。我不想在 DP 之前或 MQ 之后替换逗号。你们中的任何人都可以帮助我吗？我知道它应该看起来像这样

sed 's/DP=. *,.* ,. *,.* ,MQ/DP=某事MQ/g'

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:57:04.900

这可能对您有用（GNU sed）：

```
sed -r 's/DP.*MQ/\n&\n/;h;y/,/;/;G;s/.*\n(.*)\n.*\n(.*)\n.*\n/\2\1/' file 
```

这个 sed 习语，标记有问题的字符串（使用换行符），复制标记的行，更改字符串，然后将原始行与更改的字符串组合。

字符串的标记可能必须更具体，即：

```
sed -r 's/DP=[^=]*MQ=/\n&\n/;h;y/,/;/;G;s/.*\n(.*)\n.*\n(.*)\n.*\n/\2\1/' file 
```

如果只有一些文件可能包含有问题的字符串，请使用：

```
sed -r '/DP=[^=]*MQ=/{s//\n&\n/;h;y/,/;/;G;s/.*\n(.*)\n.*\n(.*)\n.*\n/\2\1/}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:11:35.580

使用 awk ，您可以这样做（前提是没有更多 = 那里）

```
awk -F"=" '{gsub(",",";",$2); $1 = $1; print $1"="$2"="$3}' temp.txt 
```

输出

`0,0,0,DP=1;1;1;1;MQ=2,2,2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:03:01.543

下面的代码会做：

```
awk -F"=" '{OFS="=";gsub(",",";",$2)}1' 
```

测试：

```
> echo "0,0,0,DP=1,1,1,1,MQ=2,2,2" | awk -F"=" '{OFS="=";gsub(",",";",$2)}1'
0,0,0,DP=1;1;1;1;MQ=2,2,2 
```

或者您可以使用：

```
perl -plne '$_=~/DP=(.*)MQ/;$a=$1;$a=~s/,/;/g;$_=~s/(.*DP=).*(MQ.*$)/$1$a$2/g' 
```

测试：

```
> echo "0,0,0,DP=1,1,1,1,MQ=2,2,2" | perl -plne '$_=~/DP=(.*)MQ/;$a=$1;$a=~s/,/;/g;$_=~s/(.*DP=).*(MQ.*$)/$1$a$2/g'
0,0,0,DP=1;1;1;1;MQ=2,2,2 
```

或者

```
perl -F"=" -ane '$F[1]=~s/,/;/g;print join "=",@F' 
```

测试：

```
> echo "0,0,0,DP=1,1,1,1,MQ=2,2,2" | perl -F"=" -ane '$F[1]=~s/,/;/g;print join "=",@F'
0,0,0,DP=1;1;1;1;MQ=2,2,2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T23:07:25.357

如果您有**gnu sed：**这应该适用于您的示例：

```
sed -r 's/(.*DP=)(.*)(MQ=.*)/echo -n \1;echo -n \2 \|tr "," ";"; echo -n \3/ge' input 
```

用你的例子测试

```
kent$  sed -r 's/(.*DP=)(.*)(MQ=.*)/echo -n \1;echo -n \2 \|tr "," ";"; echo -n \3/ge' <<<"0,0,0,DP=1,1,1,1,MQ=2,2,2"
0,0,0,DP=1;1;1;1;MQ=2,2,2 
```

# c# - .NET 中是否有类似 Powershell 的目录？

> ID：14696613
> 
> 赞同：0
> 
> 时间：2013-02-04T22:09:51.243
> 
> 标签：c#, vb.net

我正在寻找 .NET 中的内置功能来查询具有相对路径和通配符的文件夹，类似于 Powershell 的`dir`命令（也称为`ls`）。据我记得，Powershell 返回一个 .NET 对象数组`DirectoryInfo`，`FileInfo`这些对象以后可以用于处理。示例输入：

```
..\bin\Release\XmlConfig\*.xml 
```

会翻译成几个`FileInfo`XML 文件。

.NET 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:13:26.763

`System.IO.Directory`是提供该功能的静态类。

例如，您的示例是：

```
using System.IO;

bool searchSubfolders = false;
foreach (var filePath in Directory.EnumerateFiles(@"..\bin\Release\XmlConfig",
                                                  "*.xml", searchSubfolders))
{
    var fileInfo = new FileInfo(filePath); //If you prefer
    //Do something with filePath
} 
```

一个更复杂的例子是：（注意这并没有真正彻底地测试过，例如结束一个字符串`\`会导致它出错）

```
var searchPath = @"c:\appname\bla????\*.png";
//Get the first search character
var firstSearchIndex = searchPath.IndexOfAny(new[] {'?', '*'});
if (firstSearchIndex == -1) firstSearchIndex = searchPath.Length;
//Get the clean part of the path
var cleanEnd = searchPath.LastIndexOf('\\', firstSearchIndex);
var cleanPath = searchPath.Substring(0, cleanEnd);
//Get the dirty parts of the path
var splitDirty = searchPath.Substring(cleanEnd + 1).Split('\\');

//You now have an array of search parts, all but the last should be ran with Directory.EnumerateDirectories.
//The last with Directory.EnumerateFiles
//I will leave that as an exercise for the reader. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:21:51.620

您可以使用[`DirectoryInfo.EnumerateFileSystemInfos`](http://msdn.microsoft.com/en-us/library/dd383689.aspx)API：

```
var searchDir = new DirectoryInfo("..\\bin\\Release\\XmlConfig\\");
foreach (var fileSystemInfo in searchDir.EnumerateFileSystemInfos("*.xml"))
{
    Console.WriteLine(fileSystemInfo);
} 
```

该方法将结果作为 s 的序列进行流式传输，这是和`FileSystemInfo`的基类。`FileInfo``DirectoryInfo`

# asp.net-mvc - 将 string[] 文本框传递给控制器 并获取每个文本框 MVC 的 ID

> ID：14696615
> 
> 赞同：0
> 
> 时间：2013-02-04T22:09:56.313
> 
> 标签：asp.net-mvc, forms

我将一个列表从我的控制器传递到我的视图，然后在一个表单中，我遍历每个列表项并显示一个表格，其中包含一些需要为每个项目填写的文本框。

然后我想做的是将数据提交回我的控制器，查看它以获取输入的结果，然后保存到数据库。

我该怎么做呢？？我把我的代码放在下面

## 控制器

```
public ActionResult GetListOfDogs()
{
var list = db.dogs;  //gets multiple dogs 
return View(dogs);

///Dog object looks like this
///int Id 
///string DogName 
///string RegNumber 
///string Breed 
}

[HttpPost]
public ActionResult SaveDogInfo(string[] RegNumber, string[] Breed)
{

} 
```

## 看法

```
GetListOfDogs.cshtml

@model Dog

@using(Html.BeginForm("SaveDogInfo", "Dog", FormMethod.Post))
{
<table>
    <tr>
        <th>Name</th>
        <th>Reg Number</th>
        <th>Breed</th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.DogName</td>
            <td>@Html.TextBox("RegNum", null, new{id = "dId_=" + @item.Id})</td>
            <td>@Html.TextBox("Breed", null, new{id = "breed_=" + @item.Id})</td>
        </tr>
    }
</table>
<input type="Submit" value="Save" /> 
```

}

在我的“SaveDogInfo”操作中，我可以查看 RegNumber 和 Breed 的结果，但是没有返回它们的 id，所以我无法将结果与它所属的实际 DogId 匹配。

任何人都可以帮忙还是我完全错过了重点？？？

干杯克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:17:37.563

您的视图模型应该是可枚举的，不是吗？

```
@model IList<Dog> 
```

然后使用 for 循环，并为 Id**添加一个隐藏字段**。！

```
@for (var i = 0; i < Model.Count(); i++) 
    {
        <tr>
            <td>@Html.DisplayFor(m => Model[i].Name</td>
            <td>@Html.TextBoxFor(m => Model[i].RegNumber)</td>
            <td>
                @Html.TextBoxFor(m => Model[i].Breed)
                @Html.HiddenFor(m => Model[i].Id)
           </td>
        </tr>
    } 
```

那么你的帖子操作应该变成

```
[HttpPost]
public ActionResult SaveDogInfo(IEnumerable<Dog> dogs)
{

} 
```

# ruby-on-rails - 在 ruby 中，如果我在一个类中定义一个名为 new 的函数会发生什么

> ID：14696616
> 
> 赞同：0
> 
> 时间：2013-02-04T22:10:00.820
> 
> 标签：ruby-on-rails, ruby

如果创建一个类`Foo`并定义一个被调用的函数`initialize` *和*一个被调用的函数`new`怎么办？

稍后，如果我编写代码`foo = Foo.new`，将运行哪个函数？由于`initialize`应该在声明时调用该函数`new`。

编辑：

为了澄清：

```
class Foo
    def new
    end
end 
```

这就是我所说的那种事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:13:58.050

If you defined `new` on the class, it would call your function and override the typical `new` method which would create a new instance of the class. It's better if you don't override it at all, but you can still do it *and* get away with it in Ruby because Ruby's nice like that.

If you still want a new instance of the class after that, you can call `Foo.allocate` to get that. Then you can call `initialize` on that object manually to trigger any initialization events.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:16:47.400

`new`做的时候不会调用手动定义的函数，`Foo.new`因为手动定义`new`的函数是*实例*函数。`Foo.new`正在调用一个*类*函数。

```
class Foo
    def new
        puts 'new!'
        123
    end

    def initialize
        puts 'initialize'
    end
end

c = Foo.new
puts c  #this will print "#<Confusion:0xb75b20f4>"
c.new   #this will print "new!" 
```

编辑：

但是，如果我这样做了：

```
class Foo
    def Foo.new
    end
end 
```

然后我们会遇到@Ryan 指出的问题。

# bash - 如何使用 netcat 发送 Growl 通知？

> ID：14696619
> 
> 赞同：1
> 
> 时间：2013-02-04T22:10:07.003
> 
> 标签：bash, scripting, growl, netcat

我需要从 bash 脚本发送咆哮通知，但我无法安装 growlnotify 命令行工具或可以执行类似操作的 perl 模块。我可以编写任意 bash 脚本，并且在快速清点这台 linux 机器上可用的内容后，我似乎拥有了 netcat。

我可以以这种方式发送咆哮通知吗？我一直在修补这样的事情：

```
echo -ne "GNTP/1.0 NOTIFY NONE MD5:04cf1ad341ea8e51d7bb314424276c38.6162636465666768\r\nApplication-Name: test Notification-Name testtest Notification-Title: blah \r\n\r\n" | nc -v 127.0.0.1 23053 
```

~~但我不清楚该协议实际上是如何工作的。我假设当客户端订阅另一台计算机时，他们基本上将自己注册到服务器要连接的计算机列表（超过 23053），发送格式化消息，可能等待回复，然后断开连接。由于我的 bash 脚本将包含要发送到的机器的列表（或者更有可能，接受列表作为参数），因此此订阅步骤可以跳过（除非我需要传递魔法值！）。~~

我不相信我正确地执行了哈希，否则我没有设置客户端机器来正确接收传入的通知。

这里缺少什么？

运行此命令或类似命令时，我收到以下错误消息：

```
GNTP/1.0 -ERROR NONE
Error-Code: 400
Error-Description: Invalid key hash
Origin-Machine-Name: SOMETHING
Origin-Software-Name: Growl/Win
Origin-Software-Version: 2.0.9.1
Origin-Platform-Name: Microsoft Windows NT 6.1.7601 Service Pack 1
Origin-Platform-Version: 6.1.7601.65536
X-Message-Daemon: Growl/Win
X-Timestamp: 2/5/2013 11:54:28 AM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:18:24.250

`echo`需要`-e`标志来正确解释转义字符`\r`和`\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:17:38.130

对于网络通知，您需要使用密码，该密码必须以特定方式加盐和散列。此外，将要发送通知的计算机还必须先发送注册命令，并定义一个或多个通知类型。

要进行密码加盐/散列，您需要执行以下操作：

```
# Hexify the salt:
HEXSALT=`echo -n $SALT | xxd -p`

# Md5 the password+salt
KEYBASIS=`echo -n "$PASSWORD$SALT" | $MD5SUM`
KEYBASIS=${KEYBASIS:0:32}
KEY=`echo -n "$KEYBASIS" | xxd -r -p | $MD5SUM`
KEY=${KEY:0:32} 
```

请注意，盐可以是完全任意的（并且可以更改，消息到消息），只要它的大小至少为 4 个字符。然后，您构建注册消息：

```
# Now we need to build the message string.
MESSAGE="GNTP/1.0 REGISTER NONE MD5:$KEY.$HEXSALT
Application-Name: My Application
Application-Icon: http://somesite.come/whatever.png
Notifications-Count: 2

Notification-Name: startup
Notification-Display-Name: Starting
Notification-Enabled: False

Notification-Name: downtime
Notification-Display-Name: Shutting Down
Notification-Enabled: True

"
MESSAGE=`echo -ne "$MESSAGE" | $UNIX2DOS`
echo "$MESSAGE" 
```

理论上，图标可以在消息中发送，我从来没有设法让它工作。图标应至少为 64x64，否则它们在 Windows 的 Growl 中看起来很奇怪，我没有检查过 Growl for Mac 或 Apple 的通知中心。然后发送消息，例如：

```
echo "$MESSAGE" | nc -v $ipaddress 23053 
```

虽然你可以完全消除 netcat 并使用 bash 的 TCP 设施（/dev/tcp）......我以前从未使用过，不知道如何。最后，要发送通知，您可以这样做：

```
MESSAGE="GNTP/1.0 NOTIFY NONE MD5:$KEY.$HEXSALT
Application-Name: $APPLICATION
Notification-Name: $NAME
Notification-Title: $TITLE
Notification-Text: $TEXT
Notification-Sticky: $STICKY
Notification-Priority: $PRIORITY

"
MESSAGE=`echo -ne "$MESSAGE" | $UNIX2DOS`
echo "$MESSAGE" 
```

App-name 和 Not-name 必须与注册时发送的内容相匹配。优先级必须介于 -2 和 2 之间。“粘性”是真/假。

# javascript - 快进时videojs safari崩溃

> ID：14696620
> 
> 赞同：3
> 
> 时间：2013-02-04T22:10:08.573
> 
> 标签：javascript, video.js, video-embedding

videoJS 听起来像是一个可爱的解决方案，我们几乎采用了它，但我的尝试中有两个小故障：

*   第一个是在 MacOSX 10.6.8 上的 Safari 5.1.7（所有最新版本）上，单击快进（即光标右侧）会冻结 Safari：彩虹色的等待轮继续旋转

*   第二个是相同的嵌入在 MacOSX 10.7.5 和 Safari 6.0.2 上根本不显示任何内容

这些都不会在 Chrome 或 Firefox 中发生。这不会发生在 videojs.com 上。

但是代码非常相似，复制了视频文件（我希望没问题）：可以在这里播放：http: [//direct.hoplahup.net/tmp/videoJSattempt/video-iframe-attempt.html](http://direct.hoplahup.net/tmp/videoJSattempt/video-iframe-attempt.html)和源是：

```
<html><head><title>videoJS attempt</title>

    <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/c/video.js"></script>
</head><body>
<video id="my_video_1" class="video-js vjs-default-skin" controls
       preload="auto" width="640" height="264" poster="/tmp/videoJSattempt/oceans-clip.jpg"
       data-setup="{}">
    <source src="/tmp/videoJSattempt/video/oceans-clip.mp4" type='video/mp4'>
    <source src="/tmp/videoJSattempt/oceans-clip.webm" type='video/webm'>
</video>

</body></html> 
```

我有什么选择来调试这个？或者……是不是我做错了什么？

提前致谢

保罗

# javascript - 在使用 jQuery 进行一些回调后添加类

> ID：14696625
> 
> 赞同：0
> 
> 时间：2013-02-04T22:10:28.527
> 
> 标签：javascript, jquery, callback, addclass

我对callbeck有这个问题。所以，当我的列表将有超过 2 个元素时，我想为第一个添加一些类。我想它工作得很好，但我对此有一些 ajax 操作，并且在单击后加载列表。很多时候我正在清理常见的内容，`<ul>`然后加载“新”。当我快速单击以加载下一个列表时，所有元素都会接收类`active`。我的代码有什么问题？

```
var sett_vertical_tabs_size = sett_vertical_tabs_breadcrumb.size();
sett_vertical_breadcrumb.delay(1000).fadeIn(1000, function() {
    if( --sett_vertical_tabs_size > 2 ) return;
    sett_vertical_tabs_breadcrumb.find('li').first().addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:34:02.473

这看起来是 $.Deferred 的好地方

```
function getList(){
   return $.ajax({
           // your ajax here
    });
}

function showList(){
    return $.Deferred(function( mydef ){
        $('#listy').fadeIn( 1000, mydef.resolve );
    }).promise();
}

$.when( getList(), showList() )
    .then(function( myAjaxResult ){
       alert('fadeIn and AJAX request are both done');
      // 'myAjaxResult' is the server's response
      // put your class add logic here
}); 
```

# javascript - JavaScript 中的对象标识

> ID：14696626
> 
> 赞同：3
> 
> 时间：2013-02-04T22:10:37.820
> 
> 标签：javascript, python

如何检查两个变量是否指向同一个对象？这意味着如果我改变它——两个变量指向的值都会改变。Python中有`is`运算符，那么JavaScript呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T22:13:49.190

`===`如果引用相同而不进行任何类型转换，则严格相等运算符 ( ) 将评估为 true：

```
var a, b, c;
a = {};
b = {};
c = a;
console.log( a === b ); //false
console.log( a === c ); //true 
```

* * *

在删除了两个犯了同样错误的帖子之后，我想我应该指出，`==`由于类型转换，有可能将引用类型等同于值类型：

```
var a, b;
a = {
    toString: function () {
        return 'foo';
    }
};
b = 'foo';
console.log( a == b ); //true
console.log( a === b ); //false 
```

AFAIK，如果您可以保证两个变量都是引用类型，`==`那么应该可以正常工作，但是这种情况很少见，因此您最好在大多数情况下坚持严格比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:12:58.260

Javascript 中的等效运算符是“===”。

同样，"!==" 与 Python 中的 "is not" 相同。

# php - 执行大量 http 请求（HEAD）的最快方法是什么？

> ID：14696628
> 
> 赞同：2
> 
> 时间：2013-02-04T22:10:39.747
> 
> 标签：php, http, batch-file

> **可能重复：**
> [PHP 中的异步 HTTP 请求](https://stackoverflow.com/questions/1240267/asynchronous-http-requests-in-php)

我有一个脚本，它使用 foreach 循环并从文件中获取项目 ID，如果状态为 200，则检查头部请求。该脚本需要很长时间才能运行，所以有什么办法可以做一次多个请求？我知道 ajax 如果我用 $.ajax() 做一个 for 循环，它会立即启动它们。如何使用 php 获得这种行为，或者是否有替代方法可以进行批处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:27:17.140

使用`curl_multi_*`函数。见[http://www.php.net/manual/en/function.curl-multi-exec.php](http://www.php.net/manual/en/function.curl-multi-exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:29:11.840

当心！如果您知道这需要很长时间，您可能会请求大约数百或数千个 URL。确保不要压倒目标服务器。

另请注意，根据目标上运行的代码，请求所需完成的工作量`HEAD`可能与请求完全相同`GET`。因此，唯一的优化是不将数据传输给您。这可能被误认为是拒绝服务攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:16:06.807

一个请求很容易（就像你注意到的那样）。只需循环并使用 Pear 库 HTTP_Request2 并发出 HEAD 请求：

```
 $request = new HTTP_Request2('http://www.your_url.com/',
                         HTTP_Request2::METHOD_HEAD);
  $response = $request->send();
  if (200 == $response->getStatus()) {
    echo "Yippie... a 200";
  } 
```

您也可以使用 php curl 库，但处理起来要麻烦得多：[Header only retrieve in php via curl](https://stackoverflow.com/questions/1378915/header-only-retrieval-in-php-via-curl)

但是，要在单独的 PHP 中并行执行此操作，您需要使用 exec() 之类的东西来分叉其他 php 脚本，因为 PHP 本身不支持线程编程或并发。同样，您也可以使用 gearman 或其他东西使用某种自定义作业/工作队列，但这非常复杂。

# asp.net - 如何限制对asp.net mvc中上传文件夹的公共访问

> ID：14696629
> 
> 赞同：1
> 
> 时间：2013-02-04T22:10:40.897
> 
> 标签：asp.net, c#-4.0, iis, asp.net-mvc-4, windows-server-2008-r2

我有一个自定义后端 ASP.NET MVC 4 应用程序，它允许用户上传学生文档、成绩单等。我需要知道如何限制对上传文件夹的公共访问，但仍然能够将文件上传到，从我的应用程序中。

这是在 IIS 中的目录级别上处理的东西吗？

我不知道该怎么做，因为我的大部分经验都是使用 Apache 和 .htaccess 文件，这很容易。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:25:22.167

您可以通过在 web.config 中添加**授权**来限制对该文件夹的公共访问。您只需用自己的规则替换允许/拒绝。例如：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="Administrator" />
            <allow roles="Sales Representative" />
            <deny roles="Sales Manager" />
            <deny users="*" />
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

现在如果你想拒绝访问你的 IIS 目录，请检查这个（[拒绝访问 IIS 6.0 中的目录](https://stackoverflow.com/questions/3101371/deny-access-to-directory-in-iis-6-0)）

我希望它对你有帮助。

# jquery - Primefaces dataTable - 圆角 - 如何？

> ID：14696634
> 
> 赞同：3
> 
> 时间：2013-02-04T22:10:59.430
> 
> 标签：jquery, css, jsf, primefaces, rounded-corners

在 FireFox 18 上测试我的代码。

我正在尝试在primefaces的桌子上获得圆角`p:dataTable`......

为此，我使用了 jQuery 插件[Corner](http://jquery.malsup.com/corner/)。

我在 xhtml 的末尾添加了以下脚本部分：

```
<script>
$(".ui-datatable table").corner();
</script> 
```

然而，桌角不会变圆。

表格的 xhtml 是：

```
 <p:dataTable var="row" value="#{myBean.rows}">  
                <p:column headerText="">  
                    <h:outputText value="#{row.name}" />  
                </p:column>  

                <p:column headerText="Address">  
                    <h:outputText value="#{row.address}" />  
                </p:column>  

                <p:column headerText="10 mins">  
                    <h:outputText value="#{row.gt10min}" />  
                </p:column>  

                <p:column headerText="20 mins">  
                    <h:outputText value="#{row.gt20min}" />  
                </p:column>

                <p:column headerText="30 mins">  
                    <h:outputText value="#{row.gt30min}" />  
                </p:column>  
            </p:dataTable> 
```

jQuery 链接到 xhtml，因为当我尝试它时效果会应用于其他元素。

我在这里想念什么？

是否可以通过我正在使用的 jQuery 插件或其他 jQuery 插件来实现此效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T10:31:35.743

我对 jQuery 角插件不熟悉，也没有心情查看它的源代码以了解它失败的地方，但您也可以自己输入必要的 CSS。

```
.ui-datatable.ui-corner-all table {
    border-collapse: separate;
    *border-collapse: collapse; /* Fallback for IE <=7\. */
    border-spacing: 0; 
}
.ui-datatable.ui-corner-all table tr:first-child th:first-child {
    -moz-border-radius: 6px 0 0 0; -webkit-border-radius: 6px 0 0 0; border-radius: 6px 0 0 0;
}
.ui-datatable.ui-corner-all table tr:first-child th:last-child {
    -moz-border-radius: 0 6px 0 0; -webkit-border-radius: 0 6px 0 0; border-radius: 0 6px 0 0;
}
.ui-datatable.ui-corner-all table tr:first-child th:only-child{
    -moz-border-radius: 6px 6px 0 0; -webkit-border-radius: 6px 6px 0 0; border-radius: 6px 6px 0 0;
}
.ui-datatable.ui-corner-all table tbody td {
    border-top: 0;
    *border-top: inherit; /* Fallback for IE <=7\. */
}
.ui-datatable.ui-corner-all table tr:last-child td:first-child {
    -moz-border-radius: 0 0 0 6px; -webkit-border-radius: 0 0 0 6px; border-radius: 0 0 0 6px;
}
.ui-datatable.ui-corner-all table tr:last-child td:last-child {
    -moz-border-radius: 0 0 6px 0; -webkit-border-radius: 0 0 6px 0; border-radius: 0 0 6px 0;
}
.ui-datatable.ui-corner-all table tr:last-child td:only-child{
    -moz-border-radius: 0 0 6px 6px; -webkit-border-radius: 0 0 6px 6px; border-radius: 0 0 6px 6px;
} 
```

要让它运行，只需将`ui-corner-all`styleclass 添加到`<p:dataTable>`

```
<p:dataTable ... styleClass="ui-corner-all"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:14:36.370

如果 .ui-accordion .ui-accordion-header 是分配给数据表的类，您可以这样做 -

```
<script>
$(document).ready(function() {
    $(".ui-accordion .ui-accordion-header").corner();
});
</script> 
```

但是你最好使用 CSS 来做圆角。

# regex - 将 url 从 HTTPS 重写为 HTTP

> ID：14696640
> 
> 赞同：0
> 
> 时间：2013-02-04T22:11:11.433
> 
> 标签：regex, apache, ssl, url-rewriting

重写网址有问题。

//如果路径不以'purchase'开头或不以css、jpg、jpeg、gif、png、js、ico或axd结尾，这应该从https://重定向到http:// - 文件'purchase' 中使用的类型并允许 ssl 到 'purWs'。

```
RewriteCond %{HTTPS} on
RewriteRule ^(?!purWS)(?!purchase)(?!SRC.axd\?.*)(?!WRC.axd\?.*)(.*)(?<!\.css)(?<!\.js)(?<!\.jpg)(?<!\.jpeg)(?<!\.gif)(?<!\.png)(?<!\.ico)$
http://%{HTTP_HOST}/$1 
```

我对正则表达式规则语法没有经验。你能告诉我哪里有问题吗？

# jpa - JPA 2.0 简单 @OneToOne 映射在插入时失败

> ID：14696643
> 
> 赞同：1
> 
> 时间：2013-02-04T22:11:16.893
> 
> 标签：jpa, jpa-2.0, eclipselink

我正在尝试创建一个简单的 JPA 2.0 风格的单向映射。对象模型很简单

一个用户可以有一个地址。

```
@Entity
@Table(name = "USERS")
public class User {

@Id
@SequenceGenerator(name="user_seq",sequenceName = "sequence",allocationSize=1) 
@GeneratedValue (generator="user_seq",strategy=GenerationType.SEQUENCE)
@Column(name="userid")
private Long userId;

@Column(name="emailid")
private String emailId;

@OneToOne(cascade=CascadeType.PERSIST)
@PrimaryKeyJoinColumn
private Address address;

public User() {

}

public Long getUserId() {
    return userId;
}

public void setUserId(Long userId) {
    this.userId = userId;
}

public String getEmailId() {
    return emailId;
}

public void setEmailId(String emailId) {
    this.emailId = emailId;
}

public Address getAddress() {
    return address;
}

public void setAddress(Address address) {
    this.address = address;
}

}

@Entity
@Table(name="address")
public class Address {
@Id
@SequenceGenerator(name="address_seq",sequenceName =               "hibernate_sequence",allocationSize=1) 
@GeneratedValue (generator="address_seq",strategy=GenerationType.SEQUENCE)
private long id;

@Column(name="userid")
private long userId;

@Column(name="address")
private String completeAddress;

public Address() {
    super();
}

public Address (String completeAddress) {
    super();
    this.completeAddress = completeAddress;
}

public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}

public long getUserId() {
    return userId;
}

public void setUserId(long userId) {
    this.userId = userId;
}

public String getCompleteAddress() {
    return completeAddress;
}

public void setCompleteAddress(String completeAddress) {
    this.completeAddress = completeAddress;
}

} 
```

这就是我试图执行以创建新用户并设置该用户的地址。

```
EntityManager em = entityManagerFactory.createEntityManager();
 EntityTransaction tx = em.getTransaction();
 try {
     tx.begin();
     User user = new User();
     user.setEmailId("test123");
     Address address = new Address();
     address.setCompleteAddress("some address");
     user.setAddress(address);
     em.persist(user);
     tx.commit();
 } catch (Exception e) {
     em.getTransaction().rollback();
 } finally {
     em.close();
 } 
```

这是我得到的错误 -

```
[EL Warning]: 2013-02-04 16:00:03.376--UnitOfWork(1827795025)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERROR: insert or update on table "address" violates foreign key constraint "address_userid_fkey"
  Detail: Key (userid)=(0) is not present in table "users".
  Error Code: 0
  Call: INSERT INTO address (ID, userid, address) VALUES (?, ?, ?)
bind => [43, 0, some address]
  Query: InsertObjectQuery(com.jpa.test.Address@5c001eb0) 
```

该错误非常基本，并指出未在地址记录上设置用户 ID 值。似乎这里的持久性管理器有足够的信息来完成这个简单的事务。映射出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:29:30.583

地址具有您未设置的用户 ID。除非您要设置从地址到用户的一对一关系映射，否则它需要手动设置为用户 ID。使用映射用户标识字段的连接列设置一个onetoone，并标记用户->地址被新关系映射。有关示例，请参见[http://www.eclipse.org/eclipselink/api/2.0/javax/persistence/OneToOne.html](http://www.eclipse.org/eclipselink/api/2.0/javax/persistence/OneToOne.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:42:00.123

我做错的是定义允许 OneToMany 的关系，但试图将其建模为 OneToOne 关系。

我应该在 User 表上有一个 address_id 列，而不是在地址表上有一个 user_id 。如果我在 User 表上定义 address_id 列并像这样映射我的实体

```
@OneToOne(cascade=CascadeType.PERSIST)
@JoinColumn(name="address_id")
//@PrimaryKeyJoinColumn
private Address address; 
```

它工作得很好。这是持久性管理器期望定义的 OneToOne 关系的方式。

# android - android LocalBroadcastManager 和序列化

> ID：14696647
> 
> 赞同：2
> 
> 时间：2013-02-04T22:11:24.567
> 
> 标签：android, android-intent, android-broadcast

我了解虽然android允许`Serializable`在s内传递对象`Intent`，但出于性能原因不建议这样做。

但是，如果一个人正在使用`LocalBroadcastManager`，该对象是否会在传入意图时被序列化或完全打包？由于 LBM 不是进程间的，因此没有理由调用序列化（或为此进行打包）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:18:20.653

你是对的，在使用时应该没有理由调用序列化或打包`LocalBroadcastManager`，但是，该类被设计为`BroadcastManager`在通过系统发送广播没有意义的情况下替代正常的；我认为这个想法是为了让开发人员无需付出太多努力就可以用本地广播代替正常广播。

如果您正在开发一个新项目并需要这种功能，我建议您使用像**[Otto](http://square.github.com/otto/)**或**[EventBus](https://github.com/greenrobot/EventBus)**这样的总线库，它以更好、更优雅的方式（恕我直言）解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:21:27.790

快速浏览一下 LocalBroadcastManager 的源代码会发现 Intent 中的 Serializable/Parcelable 对象没有被序列化或打包。

[https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/content/LocalBroadcastManager.java](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/content/LocalBroadcastManager.java)

# applescript - 使用 Applescript 根据标签导出 URL 列表？

> ID：14696649
> 
> 赞同：0
> 
> 时间：2013-02-04T22:11:26.387
> 
> 标签：applescript, evernote

我是 Applescript 的新手，所以我在网上找到了一个很棒的脚本，它会列出所有有关联 URL 的 Evernote 快照。对于列出所有带有 URL 的快照，此解决方案非常棒。如何修改此脚本以根据特定标签过滤列出的 URL？

我目前使用的脚本：http: [//veritrope.com/code/save-a-list-of-urls-from-your-evernote-items-as-a-file/](http://veritrope.com/code/save-a-list-of-urls-from-your-evernote-items-as-a-file/)

```
tell application "Evernote"
    activate
    set listOfNotebooks to {}

    set EVNotebooks to every notebook
    repeat with currentNotebook in EVNotebooks
        set currentNotebookName to (the name of currentNotebook)
        copy currentNotebookName to the end of listOfNotebooks
    end repeat

    set Folders_sorted to my simple_sort(listOfNotebooks)

    set SelNotebook to choose from list of Folders_sorted with title "Select Evernote Notebook" with prompt ¬
        "Current Evernote Notebooks" OK button name "OK"
    set EVnotebook to item 1 of SelNotebook
    set listofNotes to {} 
    set note_Records to {}
    set allNotes to every note in notebook EVnotebook
    repeat with currentNote in allNotes
        try
            set currentNoteURL to (the source URL of currentNote)
            set currentNoteTitle to title of currentNote
            if currentNoteURL is not missing value then
                copy currentNoteURL to the end of listofNotes
                copy {name:currentNoteTitle, URL:currentNoteURL} to the end of note_Records
            end if
        end try
    end repeat

    set Notes_sorted to my simple_sort(listofNotes)
    set SelNote to ¬
        choose from list of Notes_sorted with title ¬
            "List Of URLs In Notes" OK button name "Export List" cancel button name "Close Window" with empty selection allowed

    set record_Text to {}
    repeat with note_Record in note_Records
        set theCurrentRecord to ("Title: " & name of note_Record & return & "URL: " & URL of note_Record & return & return) as text
        copy theCurrentRecord to the end of record_Text
    end repeat

    if (SelNote is not false) then
        tell application "System Events"
            -- convert list to text FILE
            set ExportList to "Current List of URLs in Notes for " & EVnotebook & "-- " & (current date) & return & return & record_Text as Unicode text
            set fn to choose file name with prompt "Name this file" default name "URL List for Notebook Named " & EVnotebook & ¬
                ".txt" default location (path to desktop folder)
            set fid to open for access fn with write permission
            write ExportList to fid
            close access fid
        end tell
    else
        set EVnotebook to item 1 of SelNotebook
    end if
end tell

on simple_sort(my_list)
    set the index_list to {}
    set the sorted_list to {}
    repeat (the number of items in my_list) times
        set the low_item to ""
        repeat with i from 1 to (number of items in my_list)
            if i is not in the index_list then
                set this_item to item i of my_list as text
                if the low_item is "" then
                    set the low_item to this_item
                    set the low_item_index to i
                else if this_item comes before the low_item then
                    set the low_item to this_item
                    set the low_item_index to i
                end if
            end if
        end repeat
        set the end of sorted_list to the low_item
        set the end of the index_list to the low_item_index
    end repeat
    return the sorted_list
end simple_sort 
```

为我的代码块很时髦而道歉。如果有任何模组可以修复它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:28:09.753

在您的`repeat with currentNote in allNotes`循环中，您可以添加如下内容：

```
set allTags to tags of currentNote
repeat with currentTag in allTags           
   if name of currentTag is "your_specific_tag" then
      do what you want
      ...........
   end if
end repeat 
```

# javascript - DOM元素的CSS默认样式

> ID：14696653
> 
> 赞同：0
> 
> 时间：2013-02-04T22:11:46.387
> 
> 标签：javascript, html, css, dom

> **可能重复：**
> [浏览器对 HTML 元素的默认 CSS](https://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements)

DOM元素的所有默认样式是否有参考？

例如，an 上方的边距有多大`<h1>`？

有没有一些简单的方法来提取这个？我试过：

```
document.getElementById("myheading").style.marginTop 
```

但它返回空白。大概是因为没有为`marginTop`?

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:21:28.203

你有几个选择。规范有一个松散定义的列表。[HTML4](http://w3.org/TR/CSS21/sample.html)和[HTML5](http://www.w3.org/TR/html5/rendering.html#the-css-user-agent-style-sheet-and-presentational-hints)

如果您希望实际查看计算样式，可以使用 Firebug、Chrome 开发者工具、IE 开发者工具或 Opera Dragonfly 之类的程序。

如果您需要以编程方式获取计算样式，我建议您使用 jquery 来消除差异，或者使用元素的 getComputedStyle() 或 currentStyle 属性。jQuery 会自动为您执行此操作。

如果你只是想知道如何处理这个跨浏览器而不发疯，我建议使用重置样式表。有许多。Eric Meyer 是最著名的，但现在有很多工具，如 Bootstrap、Blueprint、Normalize 和 YUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T23:08:04.577

**每个浏览器在其用户代理样式表**中都有自己的实现。[这个出色的答案](https://stackoverflow.com/a/6867287/1615483)包含 WebKit、Firefox/Gecko 和 IE 资源的链接。您可以使用[`window.getComputedStyle(node);`](https://developer.mozilla.org/en/docs/DOM/window.getComputedStyle). 请注意，此方法有一些例外情况（出于安全原因，访问过的链接将像未访问过一样返回）。

对于`<h1>`，这里是每个相关的 CSS

[**网络套件**](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css#L164)

```
display: block;
font-size: 2em;
-webkit-margin-before: 0.67__qem;
-webkit-margin-after: 0.67em;
-webkit-margin-start: 0;
-webkit-margin-end: 0;
font-weight: bold 
```

[**火狐/壁虎**](http://mxr.mozilla.org/mozilla-central/source/layout/style/html.css)

```
display: block;
font-size: 2em;
font-weight: bold;
margin: .67em 0; 
```

[**IE6/7**](http://www.iecss.com/)

```
display: block;
font-size: 24pt;
font-weight: bold;
margin: 14pt 0; 
```

**IE8/9**

```
display: block;
font-size: 2em;
font-weight: bold;
margin: 0.67em 0;
page-break-after: avoid; 
```

# php - PHP exec在页面加载时挂起，但在刷新后工作

> ID：14696656
> 
> 赞同：0
> 
> 时间：2013-02-04T22:12:05.190
> 
> 标签：php, exec

为什么 PHP exec() 在第一页加载时不起作用？我正在使用以下行通过 PHP 执行 python 脚本：

```
exec("python suggester.py " . $query_plus . " " . $location, $output); 
```

大多数时候这工作正常，但在我的页面 (suggester.promediacorp.com) 的初始加载中，POST 请求等待/等待近一分钟，直到它最终返回响应。如果页面被刷新，或者之后运行另一个查询，它就可以完美运行。

我几乎 100% 确定该问题与 exec() 有关，因为当我删除该代码时，我会立即得到回复。此外，即使 python 文件没有内容，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:52:43.720

您没有正确转义参数。见[http://php.net/manual/en/function.escapeshellarg.php](http://php.net/manual/en/function.escapeshellarg.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:04:20.163

我想到了。这是在我的脚本完成运行之前回显的 php 错误日志记录的问题。

# c - 套接字选择（）如何工作？

> ID：14696658
> 
> 赞同：13
> 
> 时间：2013-02-04T22:12:08.443
> 
> 标签：c, sockets, file-descriptor

如网络编程书籍中所述，select() 监视一组文件描述符以供读取。例如，下面是部分代码：

```
select(numfds, &read_fds, NULL, NULL, NULL); 
```

这`numfds`是 read_fds + 1 中的最大套接字数。这是否意味着每个“监视器”周期都会监视`select()`从 0 到 numfds 的进程的所有文件描述符？我的意思是，如果我只有两个文件描述符要监视（0 和 26），那么 select 是否会监视从 0 到 26 的所有描述符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T22:13:32.267

`select``readfds`根据您传入的 fd 集 ( , `writefds`, )选择要观看的 fd `exceptfds`。这些集合通常被实现为位向量，因此`select`将扫描向量以查看选择了哪些 fd。作为一种优化，您传入要扫描的 fd 的数量，这样`select`就不必查看所有 fd `FD_SETSIZE`（在编译单元之间甚至可能不一样）。

`select`是一个相当昂贵的调用，因为每次调用`select`. 在许多平台上，`select`它只是在系统调用之上实现`poll`，它为等待文件描述符提供了更有效的接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T22:17:58.640

每个监视器周期意味着，只要操作系统基本上处理它，它可能会选择定期检查描述符或通过事件或中断处理它。当在套接字文件描述符上接收到数据时，描述符文件将被数据填充，并通知正在等待它的进程。这并不总是立即发生，因为进程不会立即被唤醒，它只是简单地放回准备运行队列（因为它被 select 调用阻塞）。如果 select 调用碰巧失败（超时未收到数据），则计时器将触发并将进程放回运行队列。

`FD_SET`是的，检查或监视 0-26 中的 fd 。这只是为搜索文件描述符设置上限。IIRC 这是因为`fd_set`类型在内部实现为位集，因为指定索引更容易，因为这样可以节省空间。我在前面的陈述中可能是错的，因为我有一段时间没有访问 glibc 中的代码了。

# javascript - 在把手 #each 块中以不同方式处理列表的最后一个元素

> ID：14696661
> 
> 赞同：3
> 
> 时间：2013-02-04T22:12:11.817
> 
> 标签：javascript, ember.js, handlebars.js

> **可能重复：**
> [除了最后一个元素之后，如何在 {{#each}} 循环中的元素之间添加分隔符？](https://stackoverflow.com/questions/10403003/how-do-i-add-a-separator-between-elements-in-an-each-loop-except-after-the)

作为一个最简单的情况，假设我有一个名称列表，我希望它们之间用逗号显示。我可以

```
{{#each name in names }} {{name}}, {{/each}} 
```

然后将产生最后一个

```
John, Paul, George, Ringo, 
```

用最后一个不想要的逗号。我可以想办法通过在我的控制器函数中添加逗号来处理这个问题，但这似乎很尴尬，并且有点违反 MVC 分离。有没有办法仅在车把中识别您何时处理最后一个元素并进行相应调整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:17:09.757

Javascript 有一个`.join`你最有可能使用的函数：

```
['John', 'Paul', 'George', 'Ringo'].join(', '); //John, Paul, George, Ringo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:40:36.797

万一您无法使用 Join 的另一种方法。

```
var arr = ['John', 'Paul', 'George', 'Ringo'];
var names="";
$.each(arr, function(i,val) { 

if (i < arr.length-1)
  names += val + ","
else
 names += val
 });
alert (names); 
```

# c# - How to populating labels with corresponding row data from selections in a combobox in a c# form

> ID：14696668
> 
> 赞同：-1
> 
> 时间：2013-02-04T22:12:46.887
> 
> 标签：c#, database, visual-studio-2010

I have a c# form. I have a ComboBox that is the controller. I want to populate labels to display fields from the same row as the selected item in my drop down list.

for example, items is my ComboBox, so if I select an item from my ComboBox, then I want "description" to populate my label, as item ComboBox is selected.

```
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.Sql;  //Dir used to connect to sql DB
using System.Data.SqlClient; //Dir used to connect to sql DB

namespace items_Form
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'syteLine_AppDataSet.item' table. You can move, or remove it, as needed.
            this.itemTableAdapter.Fill(this.syteLine_AppDataSet.item);
            //creating the connection to database.
            SqlConnection con_str = new SqlConnection("Data Source=SL1;Initial Catalog=SyteLine_App;Integrated Security=True");
            SqlDataAdapter dta_ad = new SqlDataAdapter("SELECT item, description, lead_time, product_code, p_m_t_code, stocked, matl_type, family_code, low_level, days_supply, order_min, order_mult, plan_code,accept_req, shrink_fact, var_lead, decifld1, decifld2, decifld3, datefld, pass_req, order_max, uf_Active, uf_BoughtOff, uf_Old, uf_ProjectEngineer FROM dbo.item", con_str);
            DataTable dta_tbl = new DataTable();

            dta_ad.Fill(dta_tbl);

            for (int i = 0; i < dta_tbl.Rows.Count; i++)

            {
                cbxItem.Items.Add(dta_tbl.Rows[i]["item"]);
            }

         }           

        public void cbxItem_SelectedIndexChanged(object sender, EventArgs e)
        {

            if (cbxItem.SelectedIndex == -1)
            {
                label1.Text = string.Empty;
            }
            else
            {
                label1.Text = cbxItem.SelectedItem.ToString();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:27:29.500

我只会在页面加载时检索 1 或 2 列，只是为了显示下拉列表。

我将在传递所选值的 cbxItem_SelectedIndexChanged 方法中进行第二次查询：

```
DataTable dt = SomeFunctionThatGetsTheDataForTheSelectedValue(cbxItem.SelectedValue)
lblDescription = dt.Rows[0]["Description"]; 
```

# c# - 使用 ASP.Net 1.1 控件的嵌套数据网格

> ID：14696674
> 
> 赞同：0
> 
> 时间：2013-02-04T22:13:16.497
> 
> 标签：c#, asp.net, datagrid, export-to-excel, .net-1.1

有没有人致力于**在 ASP.Net 1.1 中创建嵌套数据网格**？

外部网格：我希望行可扩展。在每一行上单击**“+”**时，我希望内部数据网格根据该行填充某些值。

还以相同的格式导出到所有它们的 excel 功能。

我正在使用 jQuery 获取它，但在 ASP.Net 1.1 控件本身中寻找可能的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:47:34.140

如果您问“我怎样才能仅使用 ASP.NET 1.1 来做到这一点？” 答案很简单：你不能。ASP.NET 1.1 中没有内置任何类似的远程控件，可能在第三方控件中除外（但在这一点上找到 1.1 版本祝你好运。）

但是，从好的方面来说，您不必处理 1.1 中的 Microsoft Ajax 功能，这意味着页面模型更加简单。

如果您的 jQuery 解决方案对您有用，那么就没有充分的理由让您走得更远。但是，如果您想要更多的黑盒子，它是可重用的并自动注入 jQuery 代码，您可以子类化 DataGrid 并编写代码以发出包含您的 jQuery 代码的 javascript 代码块。

# jquery - 如何在选中复选框时禁用和取消选中复选框？

> ID：14696680
> 
> 赞同：3
> 
> 时间：2013-02-04T22:13:27.260
> 
> 标签：jquery, checkbox

我有一个 jquery 脚本，它连续禁用所有复选框并将它们标记为选中：

```
$(function() {
  enable_cb();
  $("#group1").click(enable_cb);
});

function enable_cb() {
  if (this.checked) {
     $("input.group1").attr("disabled", true);
     $("input.group1").attr("checked", true);
  } else {
     $("input.group1").removeAttr("disabled","checked");

  }
} 
```

这是我对 html 的摆弄：http: [//jsfiddle.net/3fksv/16/](http://jsfiddle.net/3fksv/16/)

我希望其余的复选框再次显示为活动状态，并在取消选中复选框时取消选中。我在脚本中做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:18:45.760

`checked`并且`disabled`是属性，从 jQuery 1.6 开始，用于修改元素的属性，`prop`应该使用 method 而不是`attr`.

```
function enable_cb() {
   $("input.group1")
         .prop("disabled", this.checked)
         .prop("checked", this.checked);
} 
```

[http://jsfiddle.net/JeqE5/](http://jsfiddle.net/JeqE5/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T22:15:35.027

我不认为你可以像那样一次删除两个属性。您可能必须对`removeAttr()`函数使用两次调用 -

```
$("input.group1").removeAttr("disabled");
$("input.group1").removeAttr("checked"); 
```

正如[@nickf](https://stackoverflow.com/users/9021/nickf)正确提到的那样，这些命令也可以链接 -

```
$("input.group1").removeAttr("disabled").removeAttr("checked"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:31:00.330

演示：http: [//jsfiddle.net/3fksv/18/](http://jsfiddle.net/3fksv/18/)

```
function enable_cb() {
   if (this.checked) {
      $("input.group1").attr("disabled", 'disabled');
      $("input.group1").attr("checked", 'checked');
   } else {
      $("input.group1").removeAttr("disabled","checked");
   }
}

$(function() {
   $("input.group1").attr("disabled", 'disabled');
   $("input.group1").attr("checked", 'checked');
   $("#group1").click(enable_cb);
}); 
```

# objective-c - for loop with char in string

> ID：14696692
> 
> 赞同：1
> 
> 时间：2013-02-04T22:14:08.663
> 
> 标签：objective-c, struct

**update 1**

Building on the previous update, I think I have a better insight into doing this, but I need the answer to this question. In the current `for` loop there is a variable named `tstring`. I need to do a something like the following, but it does not work. I get the error `Collection expression type 'NSString *' may not respond to countByEnumeratingWithState:objects:count:'` How can I fix this `for` clause?

```
for (NSUInteger i = 1; i < match.numberOfRanges; ++i)
        {
            NSRange matchedRange = [match rangeAtIndex: i];
            NSString* tstring = [string substringWithRange: matchedRange];
            for (char* suit in tstring){   // error here ********
            NSLog(@"char: %@",suit);}
            NSLog(@"range %lu string: %@", (unsigned long)i, tstring);
        } 
```

**update 1**

**update 0**

Here is another approach, that does not require a search, but I still don't have any idea how to accomplish this approach in the context of the for loop.

I need a dictionary like the following schematic representation which associates with each card (2 to Ace) an integer from 0 to 12\. (I think I know how to create a dictionary in C; maybe not in objective-c.)

```
┌─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬──┬──┬──┐
│0│1│2│3│4│5│6│7│8│9│10│11│12│
├─┼─┼─┼─┼─┼─┼─┼─┼─┼─┼──┼──┼──┤
│2│3│4│5│6│7│8│9│T│J│Q │K │A │
└─┴─┴─┴─┴─┴─┴─┴─┴─┴─┴──┴──┴──┘ 
```

I need a struct with four nouns or arrays, I am not sure which, each of length 13 like this. This is similar to the original struct, but now the members are card suits, not players' positions.

```
struct board { 
int num;
char spade[13]
char heart[13]
char diamond[13]
char club[13]
}; 
```

Assuming the following deal of Board number 1,

`Q952.652.KJT4.95 T.KQT84.A865.J73 K8763.A7.Q.KQT84 AJ4.J93.9732.A62`

I need the following process in the for loop of my code.

```
 spade[10] = N
   spade[7] = N
   spade[3] = N
   spade[0] = N
   heart[4] = N
   heart[3] = N
   etc. 
```

The question is, "How do you do that processing in a for loop?"

**update 0**

The following code is working for me but I need to alter it for the purpose described below. My console output (at least, the beginning) is provided below, also. From the output I need to retain results of range 1 and range 4 thru 19 in a special way.

The little table below contains range numbers in a 4 by 4 array with rows labeled Spades, Hearts, Diamonds, Clubs and columns labeled North, East, South, and West. When a Heart is selected, I need to search the contents of row H to determine whether that card is in N,E,S, or W and report the result. Notice that in the table the contents of each cell is a string containing either nothing (is empty) or a set of letters from '23456789TJQKA' and each row has all 13 letters somewhere in it. The numbers in the table just refer to the range number in the current output.

```
 N  E  S  W    
S    4  8 12 16
H    5  9 13 17
D    6 10 14 18
C    7 11 15 19 
```

I would like to learn how to store the results in anticipation of the search task. Can I create a C struct for which each member contains the integer board number (a number between 1 and 36) and the 4 strings? For example would the struct below work? And if it does, how does one search in such a struct in objective-c? I could also use some help populating the struct in my loop.

```
struct board { 
int num;
char N[13]
char E[13]
char S[13]
char W[13]
}; 
```

Code excerpt follows.

```
NSRegularExpression *regex = [NSRegularExpression  regularExpressionWithPattern:toMatch options:NSRegularExpressionDotMatchesLineSeparators error:&error];
NSLog(@"pattern length: %lu", (unsigned long)[toMatch length]);
NSUInteger numberOfMatches = [regex numberOfMatchesInString:string options:0 range:NSMakeRange(0, [string length])];
NSLog(@"number of matches: %lu", (unsigned long)numberOfMatches);
for (NSTextCheckingResult* match in [regex matchesInString:string options:NSRegularExpressionDotMatchesLineSeparators range:NSMakeRange(0, [string length])])
{
    NSLog(@"Number of ranges in match: %u", match.numberOfRanges);
    for (NSUInteger i = 0; i < match.numberOfRanges; ++i)
    {
        NSRange matchedRange = [match rangeAtIndex: i];
        NSString* tstring = [string substringWithRange: matchedRange];
        NSLog(@"range %lu string: %@", (unsigned long)i, tstring);
    }
} 
```

Sample output follows.

```
2013-02-04 16:24:06.583 [71684:11303] string length: 22365
2013-02-04 16:24:06.591 [71684:11303] pattern length: 347
2013-02-04 16:24:06.602 [71684:11303] number of matches: 36
2013-02-04 16:24:06.613 [71684:11303] Number of ranges in match: 20
2013-02-04 16:24:06.613 [71684:11303] range 0 string:
[Board "1"]
[West ""]
[North ""]
[East ""]
[South ""]
[Dealer "N"]
[Vulnerable "None"]
[Deal "N:Q952.652.KJT4.95 T.KQT84.A865.J73 K8763.A7.Q.KQT84 AJ4.J93.9732.A62"]
2013-02-04 16:24:06.613 [71684:11303] range 1 string: 1
2013-02-04 16:24:06.613 [71684:11303] range 2 string: N
2013-02-04 16:24:06.614 [71684:11303] range 3 string: None
2013-02-04 16:24:06.614 [71684:11303] range 4 string: Q952
2013-02-04 16:24:06.614 [71684:11303] range 5 string: 652
2013-02-04 16:24:06.614 [71684:11303] range 6 string: KJT4
2013-02-04 16:24:06.614 [71684:11303] range 7 string: 95
2013-02-04 16:24:06.614 [71684:11303] range 8 string: T
2013-02-04 16:24:06.614 [71684:11303] range 9 string: KQT84
2013-02-04 16:24:06.614 [71684:11303] range 10 string: A865
2013-02-04 16:24:06.615 [71684:11303] range 11 string: J73
2013-02-04 16:24:06.615 [71684:11303] range 12 string: K8763
2013-02-04 16:24:06.615 [71684:11303] range 13 string: A7
2013-02-04 16:24:06.615 [71684:11303] range 14 string: Q
2013-02-04 16:24:06.615 [71684:11303] range 15 string: KQT84
2013-02-04 16:24:06.616 [71684:11303] range 16 string: AJ4
2013-02-04 16:24:06.616 [71684:11303] range 17 string: J93
2013-02-04 16:24:06.616 [71684:11303] range 18 string: 9732
2013-02-04 16:24:06.616 [71684:11303] range 19 string: A62 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:42:58.523

我觉得这个问题与“我该如何做 X？”相去甚远。并开始非常接近“请为我做X”。也就是说，昨晚我确实考虑了一会儿，我有一些想法要分享，这些想法可能对你有所帮助。

首先，是的，这可以用任意数量的 C 结构来建模。您已经探索了其中的几个。您尚未提出的一种想法是使用位图来表示手。一副牌中有 52 张牌；存储手牌的一种方法是使用 64 位整数，并使 52 位对应于一副牌中的牌。如果设置了对应于特定卡片的位，则一手牌包含特定卡片。然后搜索这些手就变成了一个简单的按位与运算。您甚至可以通过界面获得创意，并使用 C`union`将底层表示设为 64 位类型，同时允许对子集（如花色或位置）进行结构化访问，或许可以通过说每个花色对应于底层类型的 16 位来实现。

也就是说，考虑到这里数据集的大小，遇到性能问题的方法相对较少，在仔细研究了一下之后，我开始觉得努力寻找最好的或“最快速搜索的”数据结构构成过早的优化。即使你把这个应用程序的数据模型变成了一个完全成熟的 Objective-C 对象图，包括棋盘类、每个位置、每只手，甚至每张牌的对象实例，你仍然在解决一个“恒定大小”的问题（有一个“恒定时间”表现的机会。）IIUC，一副牌中永远不会有超过 52 张牌，也不会超过 4 个位置，也不会超过 36 个棋盘。这是一个非常受约束的问题。如果您打算导入数以万计的此类游戏，然后查询所有这些游戏，

接下来，我建议在解析行*内容*时放弃使用正则表达式`[Deal "..."]`。你能用正则表达式吗？当然。但是将带引号的字符串作为 a `const char*`（请参阅`-[NSString UTF8String]`）然后按顺序遍历字符会更简单：第一个字符是`[NSEW]`并标识第一个位置（可能需要存储在您的结构中，但到目前为止还没有）。然后一个无用`:`的忽略。然后开始阅读黑桃牌。当你击中一个`.`增量西装。当你击中一个`<space>`增量的位置。你*可以*使用正则表达式来提取这些部分，但是简单的方法要简单得多，我建议使用它。（我应该提到，考虑到上下文，这种更简单的方法也快得多，但我认为仅出于性能选择这种方法将是不成熟的优化。所以，不要为了性能而选择这种方法，选择它是为了简单！）

最后，我觉得我应该提一下，虽然我的 2 分钟 google-fu 未能找到任何好的开源 C PBN 读取实现（以及模型数据结构），但我发现真的很难相信有一个没有。我的搜索有点复杂，因为“桥”是一个超载的英文单词。我可能会建议您多了解一下，看看您是否可以找到一个成熟的开源实现来按原样使用或作为灵感使用，而不是自己动手。

编辑：

我写了一个潜在的循环来填充你建议的结构：

```
// Your structure, but as a typedef for clarity.
typedef struct {
    int num;
    char spade[13];
    char heart[13];
    char diamond[13];
    char club[13];
} board;

// The quoted string in the [Deal "..."] line; you already know how to get this.
NSString* dealString = @"N:A8.J762.KQ742.98 KQ53.K93.A85.T52 J97.A8.J963.J743 T642.QT54.T.AKQ6";

// Set up some arrays to use as maps between ints and chars...
// ...for positions:
const char* const positionIntToCharMap = "NESW";
int positionCharToIntMap['Z'] = { 0 };
for (int i = 0, len = (int)strlen(positionIntToCharMap); i < len; ++i) positionCharToIntMap[positionIntToCharMap[i]] = i;

// and cards:
const char* const cardIntToCharMap = "23456789TJQKA";
int cardCharToIntMap['Z'] = { 0 };
for (int i = 0, len = (int)strlen(cardIntToCharMap); i < len; ++i) cardCharToIntMap[cardIntToCharMap[i]] = i;

// and suits:
const char* const suitIntToCharMap = "SHDC";
int suitCharToIntMap['Z'] = { 0 }; 
for (int i = 0, len = (int)strlen(suitIntToCharMap); i < len; ++i) suitCharToIntMap[suitIntToCharMap[i]] = i;

const char* dealCString = [dealString UTF8String];
const size_t dealCStringLen = strlen(dealCString);

board thisBoard = { 0 }; 

if (dealCStringLen)
{
    char suit = 'S'; // start with spades
    char pos = dealCString[0]; // first character is starting position

    for (off_t i = 1; i < dealCStringLen; ++i)
    {
        if (dealCString[i] == ':')
        {
            continue;
        }
        else if (dealCString[i] == '.') // advance the suit
        {
            const int currentSuitInt = suitCharToIntMap[suit];
            const int nextSuitInt = (currentSuitInt + 1) % 4;
            suit = suitIntToCharMap[ nextSuitInt ];
        }
        else if (dealCString[i] == ' ') // advance the position and reset the suit
        {
            const int currentPosInt = positionCharToIntMap[pos];
            const int nextPosInt = (currentPosInt + 1) % 4;
            pos = positionIntToCharMap[ nextPosInt ];
            suit = 'S';
        }
        else // read the card
        {
            const char charForCard = dealCString[i];
            const int intForCard = cardCharToIntMap[charForCard];

            // Mark the current position in the appropriate array.
            if (suit == 'S')
            {
                thisBoard.spade[intForCard] = pos;
            }
            else if (suit == 'H')
            {
                thisBoard.heart[intForCard] = pos;
            }
            else if (suit == 'D')
            {
                thisBoard.diamond[intForCard] = pos;
            }
            else if (suit == 'C')
            {
                thisBoard.club[intForCard] = pos;
            }
        }
    }
}

// thisBoard is now populated. 
```

我希望这有帮助。

# php - Microsoft SQL Server 查询返回错误结果

> ID：14696695
> 
> 赞同：0
> 
> 时间：2013-02-04T22:14:26.603
> 
> 标签：php, sql-server

我有以下代码：

```
$GetUID = $c->query("SELECT UserUID FROM dbo.Users_Master ORDER BY UserID DESC");
$UserUniqueID = $GetUID->fetch(PDO::FETCH_ASSOC);
$UUID = $UserUniqueID['UserUID'];
$NewUUID = $UUID + 1; 
```

这是成功的，但问题出在我的查询上。

它总是在我的数据库中输入 12。

我进入 Microsoft SQL 查询窗口并输入：

```
USE UserData;
SELECT UserUID FROM dbo.Users_Master ORDER BY UserID DESC 
```

它返回：

> 11、17、15、19、16、18、10、13、12、14、3

这并不是按照从高到低的顺序排列的。

然后我继续使用：

```
USE UserData;
SELECT UserUID FROM dbo.Users_Master ORDER BY UserID ASC 
```

哪个返回：

> 3、14、12、13、10、18、16、19、15、17、11

我想获得最高的 UserUID 和 +1。为什么我的代码一直选择*11*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:16:36.727

听起来`UserId`不是 datatype `int`，您可以`cast()`订购值：

```
SELECT UserUID 
FROM dbo.Users_Master 
ORDER BY cast(UserID as int) DESC 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/17873/2)

但是，最好的解决方案是更改表中的数据类型以匹配正在存储的内容。

要更改 SQL Server 中的表，您可以使用：

```
alter table dbo.Users_Master alter column UserID int; 
```

这会将数据存储在正确的数据类型中，因此您不必对`cast()`值进行排序。

编辑＃1，根据您的评论`UserId`是 varchar 似乎您的意思`ORDER BY UserUID DESC`是`int`

# joomla - 在 Joomla 中添加文章时出现问题

> ID：14696696
> 
> 赞同：0
> 
> 时间：2013-02-04T22:14:26.730
> 
> 标签：joomla, joomla2.5, article

我遇到了一个我真的无法解决的问题。我正在尝试在 Joomla 2.5 中创建包含一篇文章的菜单，但它不会显示该文章。我创建了一个主菜单，其中一些菜单设置为**单篇文章**，并且我创建了一些文章，我已将其添加到特定菜单项中，保存菜单没有问题，但是当我重新加载页面时，那里没有文章/文字/图片。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:45:47.480

确保文章已发表。即使它不会起作用。只需在错误报告中查看错误到底是什么并找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:56:45.960

这似乎是一个 SEF 问题。

**假设您的菜单发布在 SEF url /fun/jokes.html 下：如果未启用 SEF 插件，Joomla 可能会在/fun/images/...**而不是 /images/...中寻找您的图片

只需前往管理员/插件，搜索 SEF（系统 - SEF 插件）并启用它。清除缓存，它应该开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:09:19.660

我发现了问题。在我的模板配置文件下，“系统输出”设置为“否”。将其更改为“是”，它显示了我的所有文章。

但是感谢你的努力

# javascript - 如何停止可拖动的 JcanvaScript？

> ID：14696697
> 
> 赞同：0
> 
> 时间：2013-02-04T22:14:30.223
> 
> 标签：javascript, jcanvascript

如何停止可拖动的 JcanvaScript 库？

例如一张图片，在拖放超出画布元素的情况下，我不想让图片超出它。

```
jc('#img1').draggable({

drag: function(){
    point=jc('#img1').position(); 

    if(point.x<0){
    //here stop draggable image

    //these options don't work
    //this.draggable('pause');
    //return;               
    //jc.pause();

    }

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:03:19.267

哇！这实际上是一个非常可怕的问题。真正可怕的是 JCanvasScript 不会触发`onRelaseOutside`事件。

我在这里发布了一个解决方案：http: [//jsfiddle.net/qpuGw/](http://jsfiddle.net/qpuGw/)

您将无法将圆圈从左侧拉近 100 像素。

要点是：

1.  如果您的对象移动到边界框之外：（a）设置克隆它并（b）将其设置为不可见。
2.  如果您的对象移回边界框内：（a）删除克隆并（b）再次将您的对象设置为可见
3.  如果用户释放对象：同上（2）。

祝你好运！

# java - ActiveMq 队列与服务器

> ID：14696699
> 
> 赞同：1
> 
> 时间：2013-02-04T22:14:32.643
> 
> 标签：java, queue, jms, activemq

我可以使用activemq队列实现客户端和服务器的功能吗...

应该有创建消息并发送到特定队列的客户端，服务器应该侦听此消息并发送到适当的客户端（队列）。

急需帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:49:27.303

消息队列只是一种通信手段，尽管它更多地用于服务器到服务器的通信，但它也适用于其他场景。

如果所有对等点（服务器和客户端）都连接到中央 ActiveMQ 代理（可能位于服务器节点上）。

如果您应该使用发布/订阅模型或点对点模型，您只需要对其应该如何工作进行建模。

ActiveMQ 支持动态创建队列，这在连接任意数量的客户端时很有用。您可以轻松地为队列指定唯一客户端 ID 的名称。

所以，基本上，是的——这是可以实现的。只需添加代码。;-)

# java - 如何避免在简单的代理服务器中拒绝连接？

> ID：14696704
> 
> 赞同：0
> 
> 时间：2013-02-04T22:14:44.687
> 
> 标签：java, sockets, proxy, stream

我想使用套接字在 Java 中编写一个简单的 http 代理服务器。我编写了一个测试原型，由我在互联网上找到的几个教程组成。这么久了，我来了：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class SimpleProxyServer
{
    public static final int portNumber = 55558;
    public static final int maxConnections = 100;

    public static void main( String[] args )
    {
        SimpleProxyServer proxyServer = new SimpleProxyServer();
        proxyServer.start();
    }

    public void start()
    {
        System.out.println("Starting the SimpleProxyServer ...");
        try
        {
            ServerSocket serverSocket = new ServerSocket( portNumber, maxConnections );
            byte[] buffer = new byte[10000];

            boolean run = true;
            while( run )
            {
                Socket clientSocket = serverSocket.accept();

                InputStream clientInputStream = clientSocket.getInputStream();

                // reading the request and put it into buffer
                final int readBytesCount = clientInputStream.read( buffer );
                if( readBytesCount < 0)
                    continue;

                String browserRequest = new String( buffer, 0, readBytesCount );
                System.out.println( browserRequest );

                // extract the host to connect to
                final int hostNameStart = browserRequest.indexOf( "Host: " ) + 6;
                final int hostNameEnd = browserRequest.indexOf( '\n', hostNameStart );
                final String hostName = browserRequest.substring( hostNameStart, hostNameEnd - 1 );
                System.out.println( "Connecting to host " + hostName );

                // forward the response from the proxy to the server
                Socket hostSocket = new Socket( hostName, 80 );
                OutputStream hostOutputStream = hostSocket.getOutputStream();
                System.out.println( "Forwarding request to server" );
                hostOutputStream.write( buffer, 0, readBytesCount );
                hostOutputStream.flush();

                ProxyThread thread1 = new ProxyThread( clientSocket, hostSocket );
                thread1.start();

                ProxyThread thread2 = new ProxyThread( hostSocket, clientSocket );
                thread2.start();
            }
            serverSocket.close();
        }
        catch( IOException e )
        {
            System.err.println( "IO Error: " + e.getMessage() );
            e.printStackTrace();
        }
    }
}

class ProxyThread extends Thread 
{
    private Socket incoming, outgoing;

    ProxyThread( Socket in, Socket out )
    {
        incoming = in;
        outgoing = out;
    }

    // Overwritten run() method of thread,
    // does the data transfers
    public void run()
    {
        System.out.println( "Starting proxy thread" );
        try
        {
            OutputStream toClient = outgoing.getOutputStream();
            InputStream fromClient = incoming.getInputStream();

            int numberRead = 0;
            byte[] buffer = new byte[10000];
            do
            {
                numberRead = fromClient.read( buffer );
                System.out.println( "Read " + numberRead + " bytes" );
                System.out.println( "Buffer: " + buffer );
                if( numberRead > 0 )
                {
                    toClient.write( buffer, 0, numberRead );
                    System.out.println( "Sent " + numberRead + " bytes" );
                }
            }
            while( numberRead > 0 );

            System.out.println( "Closing all streams and sockets" );
            toClient.flush();
            incoming.close();
            outgoing.close();
        }
        catch( IOException e ) 
        {
            System.err.println( "IO Error: " + e.getMessage() );
        }
        catch( ArrayIndexOutOfBoundsException e )
        {
            System.err.println( "Index error: " + e.getMessage() );
        }
    }
} 
```

在使用浏览器（如果有帮助的话，Firefox）进行测试时，它会`fromClient.read(buffer)`长时间挂起并冻结调用并返回 -1，但浏览器会更早地显示连接拒绝。它的原因是什么？它是由`InputStream.read()`阻塞引起的还是有点像比赛？也许整个方法是错误的？或者它是线程的一些障碍？

**PS**我的“本机”语言是C++。虽然我偶尔有一些 Java 编程语言的经验，但我仍然没有足够的经验使用它的库，尤其是套接字。

**PPS**我认为诸如 http 代理服务器之类的东西在互联网上有多个教程和操作方法，但我发现的只是单线程或不读取目标 URL，而只是将请求传输到下一个代理。所以也许这篇文章会帮助某人写一篇自己的文章。如果它得到修复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:17:53.167

您必须在单独的线程中处理每个接受的套接字，这包括读取 CONNECT 命令。否则，读取它将阻止接受线程接受新连接。

# java - “非活动”提交按钮，直到您单击其中一个单选按钮

> ID：14696705
> 
> 赞同：-1
> 
> 时间：2013-02-04T22:14:51.160
> 
> 标签：java, jquery, css, forms, radio-button

我希望提交按钮处于“非活动状态”，直到您单击表单中的一个单选按钮，然后单击后，该按钮会将背景图像从 button.png 更改为 button_active.png。

这可以只用 CSS 完成吗？还是我必须涉及 jquery / javascript？我该怎么做呢？

```
<input id="1" type="radio" name="1" value="1" />
<input id="2" type="radio" name="2" value="2" />
<input type="submit" name="submit" value="valj"  /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T22:30:20.763

您可以从禁用提交按钮开始：

```
<input id="1" type="radio" name="1" value="1" />
<input id="2" type="radio" name="2" value="2" />
<input type="submit" disabled name="submit" value="valj"  /> 
```

然后使用脚本绑定到单选按钮的更改事件并检查它们的值并在需要时删除 disabled 属性，类似于：

```
// cache reference to all radio buttons.
var $radioButtons = $("input:radio");

$radioButtons.change(function(){
    var anyRadioButtonHasValue = false;

    // iterate through all radio buttons
    $radioButtons.each(function(){
        if(this.checked){
            // indicate we found a radio button which has a value
            anyRadioButtonHasValue = true;

            // break out of each loop
            return false;
        }
    });

    // check if we found any radio button which has a value
    if(anyRadioButtonHasValue){
        // enable submit button.
        $("input[name='submit']").removeAttr("disabled");
    }
    else{
        // else is kind of redundant unless you somehow can clear the radio button value
        $("input[name='submit']").attr("disabled", "");
    }
}); 
```

* * *

[**演示**](http://jsfiddle.net/zSfhZ/)- 如果选择了任何单选按钮，则启用按钮。

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:22:55.287

从禁用按钮开始，然后在选择其中一个单选按钮时启用它。

```
<input id="1" type="radio" name="1" value="1" onClick="document.getElementById('subutton').disabled = false" />
<input id="2" type="radio" name="2" value="2" onClick="document.getElementById('subutton').disabled = false" />
<input id="subutton" type="submit" name="submit" value="valj" disabled/> 
```

# r - 使用 qplot 只绘制一个数据子集

> ID：14696710
> 
> 赞同：2
> 
> 时间：2013-02-04T22:15:22.860
> 
> 标签：r, list, ggplot2, subset, r-factor

我有一个`d`这样命名的列表：

`V1`是 0 - 50 的整数集 `V2`是 1500 - 1800 的实 `V3`数集 是 1 - 50 的整数集

该列表总共包含 5100 个对象

现在我想绘制 的直方图`V2`，其中`V1`= 某个数字（0、1 或 10 等）

我尝试了不同的方法：

```
factor(d$V1)
qplot(V2, data=d, V1 = 1)        --> not successful 
d.subset <- subset(d, d$V1 = 1)  --> not successful 
```

我真的为此发疯了。检查特性`d$V1`却没有发现什么奇怪的。任何人都可以帮助我吗？

```
is.factor(d$V1) 

[1] TRUE

str(d$V1)  Factor w/ 51 levels "1","2","3","4",..: 1 2 3 4 5 6 7 8 9 10 ...

levels(d$V1)  
[1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15" "16" "17" "18" "19" 
[20] "20" "21" "22" "23" "24" "25" "26" "27" "28" "29" "30" "31" "32" "33" "34" "35" "36" "37""38" 
[39] "39" "40" "41" "42" "43" "44" "45" "46" "47" "48" "49" "50" "51" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:24:35.610

换行：

```
d.subset <- subset(d, d$V1 = 1) 
```

到

```
d.subset <- subset(d, V1 == 1) 
```

注意双等号 ( `==`) 表示逻辑运算符。`=`用于分配，不会对数据框进行子集化。

最后，如果您想获得`"1"`因子的级别（可能与 numeric 不同`1`），您可能意味着将 1 放在引号中。

```
d.subset <- subset(d, V1 == "1") 
```

# c# - 从绑定到数据网格视图的绑定列表中删除对象

> ID：14696711
> 
> 赞同：1
> 
> 时间：2013-02-04T22:15:28.767
> 
> 标签：c#, winforms

我正在尝试通过执行此操作从绑定到 DataGridView 的 BindingList 中删除对象...

```
private void RemoveItems(List<Payment> removeList)
{
    for (int i = removeList.Count - 1; i >= 0; i--)
    {
    sortableBindingPaymentList.Remove(removeList[i]);
    }
} 
```

尝试自己调试时，我尝试了以下操作，但是 remover always = -1 （意味着找不到匹配项）并且我 110% 确定我在 removeList 中的付款列表在我的 sortableBindingList 中包含匹配项...

```
private void RemoveItems(List<Payment> removeList)
{
    int remover;

    for (int i = removeList.Count - 1; i >= 0; i--)
    {
        remover = sortableBindingPaymentList.IndexOf(removerList[i]);
        sortableBindingPaymentList.RemoveAt(remover);
    }
} 
```

任何帮助表示赞赏，并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:36:58.087

我不确定我会走这`IEquatable`条路..取决于您使用的 ORM，这可能会给您带来一些麻烦。

您的实体有主键吗？你可以试试这个：

```
private void RemoveItems(List<Payment> removeList)
{
    removeList.ForEach(x => sortableBindingPaymentList.RemoveAll(s => s.Id == x.Id));
} 
```

PS：我强烈建议您开始使用 LinQ 进行此类操作而不是`for`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:27:12.673

如果 removeList 不包含与 sortableBindingPaymentList 中的引用相同的引用（相同的对象），那么该方法将返回-1，我假设在您的情况下会发生这种情况。

它[在这里](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)声明：列表的“删除”方法：

“此方法使用默认相等比较器 EqualityComparer.Default 确定相等性，T 是列表中值的类型。”

支付类应该实现[IEquatable 接口](http://msdn.microsoft.com/en-us/library/ms131187.aspx)。

例如：

```
 public class Payment : IEquatable 
     {
        public  bool Equals(Payment paymentObj)
             {
                 //is current instance equal to payment OBJ?
                 //if yes, then return true otherwise false
             }
      } 
```

现在，即使您在列表集合中有不同的对象实例，此调用也应该起作用。

```
 sortableBindingPaymentList.Remove(removeList[i]); 
```

如果您需要进一步的帮助，请发布完整的帖子。

# python - 使用 chunksize 丢失记录 - Pandas 和 Google Analytics API 集成

> ID：14696717
> 
> 赞同：3
> 
> 时间：2013-02-04T22:15:47.523
> 
> 标签：python, google-analytics, pandas, google-analytics-api

我正在通过[pandas](http://pandas.pydata.org)和 Google Analytics API 自动化一些报告。当请求分割数据的多个维度时，生成的记录集远高于 pandas 施加的默认 10k max_result 限制。

为了解决这个问题，我为 max_results 参数传递了一个大数字并指定了一个块大小。我的意图是然后迭代生成的生成器以创建一个大型 DataFrame，我可以在其上执行所有操作。

```
from pandas.io import ga
import pandas as pd

max_results = 1000000
chunks = ga.read_ga(metrics=["visits"],
                    dimensions=["date", "browser", "browserVersion",
                    "operatingSystem", "operatingSystemVersion",
                    "isMobile", "mobileDeviceInfo"],
                    start_date="2012-12-01",
                    end_date="2012-12-31",
                    max_results=max_results,
                    chunksize=5000)

stats = pd.concat([chunk for chunk in chunks])
stats.groupby(level="date").sum() 
```

但是，很明显，由于每日总访问量与 Google Analytics（分析）不匹配，因此并未提取某些记录。

仅选择几个维度时，我不会遇到此问题。例如 ...

```
test = ga.read_ga(metrics=["visits"], dimensions=["date"],
            start_date="2012-12-01", end_date="2012-12-31")

test.groupby(level="date").sum() 
```

...产生与谷歌分析相同的数字。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:24:07.480

总共 10000 行是 google 分析 API 施加的限制 ( [https://developers.google.com/analytics/devguides/reporting/core/v3/reference#maxResults](https://developers.google.com/analytics/devguides/reporting/core/v3/reference#maxResults) )

该代码使用 start_index 发出多个请求并绕过限制。我将此标记为熊猫中的错误：[https](https://github.com/pydata/pandas/issues/2805) ://github.com/pydata/pandas/issues/2805 有机会我会看看。如果您可以显示一些预期数据与您通过 pandas 获得的数据，那将很有帮助。

作为一种解决方法，我建议每天迭代并提出每日请求。

# java - 这是否表明 Java 中存在内存泄漏？

> ID：14696718
> 
> 赞同：7
> 
> 时间：2013-02-04T22:15:54.837
> 
> 标签：java, memory

下图是否表明我正在使用内存并且它没有被垃圾收集？

![在此处输入图像描述](../Images/2105d4ff22013be9d6c3248119a34a39.png)

一旦我开始使用较少的堆，我预计橙色图（分配的堆）会下降。

*   这是一个无效的假设吗？
*   一旦分配，堆在程序关闭之前不会缩小吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T22:19:20.503

从图中可以清楚地看出，您的 JVM 能够缩小堆。这可以从橙色线在下午 3 点 10 分之前略微下降中看出。

但是，稍后 JVM 选择不收缩堆。这几乎可以肯定是因为未使用的堆的比例不够大。行为由`-XX:MinHeapFreeRatio`和控制`-XX:MaxHeapFreeRatio`。

有关讨论，请参阅[http://stopcoding.wordpress.com/2010/04/12/more-on-the-incredible-shrinking-jvm-heap/](http://stopcoding.wordpress.com/2010/04/12/more-on-the-incredible-shrinking-jvm-heap/)

# blackberry - blackberry webworks 上传参数

> ID：14696721
> 
> 赞同：0
> 
> 时间：2013-02-04T22:15:58.130
> 
> 标签：blackberry, parameters, upload, blackberry-webworks

有没有办法用 Blackberry WebWorks 上传发送附加参数（如 AJAX 等）的文件？（我尝试使用Phonegap FileTransfer，但它根本不适合我。其次，我尝试了WebWorks UploadDownload扩展，它工作正常，但无法发送参数。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:25:24.957

你考虑过使用 XHR2 吗？

好文章在这里 - [http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:33:43.737

据我所知，XHR 不适用于 Blackberry Playbook

# lua - Lua 模式匹配

> ID：14696727
> 
> 赞同：3
> 
> 时间：2013-02-04T22:16:17.773
> 
> 标签：lua, lua-patterns

我有一个文件，我从具有 RTF 格式标记的 Microsoft Lync 对话中提取值。示例文件如下：

> {\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 >Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl;\red0\green0\blue0 ;} {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 Craig...\embo0 \embo please\embo0 \embo close\embo0 \embo >out\embo0 \embo of\embo0 \embo your\embo0 \embo old\embo0 \embo client\embo0 \embo >and\embo0 \embo re-open\embo0\f1\par {*\lyncflags rtf=1}}

使用 Lua 脚本，我试图删除 RTF 标签，然后只提取对话的文本。所以我的函数的结果应该是：

> 克雷格...请关闭您的旧客户并重新打开

我尝试使用带有正则表达式的 string.gsub 来匹配模式并用空格替换它们以只留下文本但它不起作用。这是我到目前为止的 string.gsub 代码：

```
result = string.gsub(s, "\{\*?\\[^{}]+}|[{}]|\\\n?[A-Za-z]+\n?(?:-?\d+)?[ ]?", " ") 
```

任何建议将不胜感激！

额外的：

> > user1@capital.com @ 2013-01-18 17:48:03Z (TO: user2@capital.com)

{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl;\red0\green0\blue0; } {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 works\embo0 \embo for\embo0 \embo me..\embo0 \embo how\ embo0 \embo about\embo0 \embo embedding\embo0 \embo 图片？\embo0\f1\par {*\lyncflags rtf=1}}

> > user1@capital.com @ 2013-01-18 17:48:57Z (TO: user2@capital.com)

{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl;\red0\green0\blue0; } {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 I\embo0 \embo see\embo0 \embo it\embo0\f1\par {* \lyncflags rtf=1}}

> > user1@capital.com @ 2013-01-18 17:49:27Z (TO: user2@capital.com)

{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl;\red0\green0\blue0; } {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 让我们\embo0 \embo try\embo0 \embo a\embo0 \embo 会议。\embo0 \f1\par {*\lyncflags rtf=1}}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:37:09.380

Lua 模式没有`or`运算符 ( `|`) 或可选分组 ( `(?:...)?`)。像这样的东西可能会起作用：

```
s:match("{(.+)}"):gsub("%b{}", ""):gsub("\\%w+", "") 
```

将返回：

```
"    Craig...  please  close  >out  of  your  old  client  >and  re-open " 
```

首先`gsub`删除所有对`{}`及其内容，第二个`gsub`删除所有 rtf 标签（尽管其中似乎有一些允许空格，因此您可能需要调整模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-18T20:49:54.150

**尝试这个：**

```
local s = '{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 >Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl ;\red0\green0\blue0;} {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 Craig...\embo0 \embo please\embo0 \embo close\embo0 \embo >out\embo0 \embo of\embo0 \embo your\embo0 \embo old\embo0 \embo client\embo0 \embo >and\embo0 \embo re-open\embo0\f1\par {*\lyncflags rtf=1}}\n'
    ..'{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl ;\red0\green0\blue0;} {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 works\embo0 \embo for\embo0 \embo me..\embo0 \embo how\embo0 \embo about\embo0 \embo embedding\embo0 \embo pictures?\embo0\f1\par {*\lyncflags rtf=1}}\n'
    ..'{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl ;\red0\green0\blue0;} {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 I\embo0 \embo see\embo0 \embo it\embo0\f1\par {*\lyncflags rtf=1}}\n'
    ..'{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}} {\colortbl ;\red0\green0\blue0;} {*\generator Riched20 15.0.4420}{*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 \pard\cf1\embo\f0\fs20 let\'s\embo0 \embo try\embo0 \embo a\embo0 \embo meeting.\embo0\f1\par {*\lyncflags rtf=1}}\n'
local text = string.gsub(s, '{(.-)}[}]?', ''):gsub('embo',''):gsub('0',''):gsub('iewkind4uc1 pardcf1',''):gsub('1par',''):gsub('s2',''):gsub('>','')
print(text) 
```

> 输出
> 
> `Craig... please close out of your old client and re-open
> works for me.. how about embedding pictures?
> I see it
> let's try a meeting.`

# imagemagick - ImageMagick: convert 不断将色彩空间更改为灰色。如何保留 sRGB 色彩空间？

> ID：14696728
> 
> 赞同：18
> 
> 时间：2013-02-04T22:16:19.210
> 
> 标签：imagemagick, color-space

我有一个批处理脚本，可以将我的 PNG-24（带透明度）图像转换为 50% 和 25% 大小（用于移动开发）。通常这些图像中有颜色，但现在我正在尝试转换没有颜色的图像，并且 ImageMagick 不断将颜色空间配置文件更改为“灰色”，这在我正在使用的 3d 引擎（Unity）中弄乱了我的图像。

我曾尝试强制它使用 TrueColor 类型、色彩空间 sRGB 和 sRGB.icc 配置文件（OSX 中包含的配置文件），但它似乎并不在意。它仍然将其更改为灰色。

```
> convert old.png -profile srgb.icc -colorspace sRGB -type TrueColor new.png
> identify *.png
  old.png PNG 140x140 140x140+0+0 8-bit sRGB 3.68KB 0.000u 0:00.000
  new.png PNG 140x140 140x140+0+0 8-bit sRGB 256c 2.33KB 0.000u 0:00.000 
```

ImageMagick 仍然将其识别为 8 位 sRGB 图像，但它在其后加上“256c”，我假设这意味着它已将其减少到 256 种颜色，我也不想要。当我在 OSX Preview.app 中查看图像时，它说它使用的是灰色颜色配置文件。该图像在视觉上看起来也有很大不同。

这是我正在使用的图像：[https ://dl.dropbox.com/u/59304/old.png](https://dl.dropbox.com/u/59304/old.png)

这里有一个重复的问题，[ImageMagick Reduces Colorspace to Gray](https://stackoverflow.com/questions/11443725/imagemagick-reduces-colorspace-to-gray)，但答案对我不起作用，不幸的是，我没有足够的声誉来评论他的答案。我想我的情况有所不同，因为我使用的是 PNG 而不是 JPG。

```
Version: ImageMagick 6.8.0-7 2013-01-02 Q16 http://www.imagemagick.org
Features:  OpenCL 
```

编辑-阅读答案之一中指定的 ImageMagick 论坛后，看起来只是在输出文件中添加 PNG32: 或 PNG24: 即可解决问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-03-17T21:54:37.483

将灰度 PNG 保留为 RGB 的正确方法是使用`PNG24:result.png`

输入：

[![在此处输入图像描述](../Images/34bc6e04145b8c3531b673c28276d87c.png)](https://i.stack.imgur.com/1cFqZ.png)

```
convert lena.png -colorspace gray PNG24:lenag_rgb.png

identify -verbose lenag_rgb.png

Image: lenag_rgb.png
  Format: PNG (Portable Network Graphics)
  Mime type: image/png
  Class: DirectClass
  Geometry: 256x256+0+0
  Units: Undefined
  Colorspace: sRGB
  Type: Grayscale 
```

正如你在上面看到的，色彩空间是 RGB，而类型是灰度。

[![在此处输入图像描述](../Images/8f3be11fd69a59bd4c34ad81ebc17f0a.png)](https://i.stack.imgur.com/gC2xg.png)

对于 JPG 和 TIFF 等其他图像格式，请`-define colorspace:auto-grayscale=false`与`-type truecolor`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-17T21:28:10.717

您可以通过`-set colorspace:auto-grayscale off`convert 来禁用 RGB 通道到单个灰度通道的自动转换。

在您提出问题时，此解决方案尚不可用，但在 2015 年的 6.9.2 版本中推出：

> 2015-07-25 6.9.2-0 Dirk Lemstra <dirk@lem.....org>
> 添加`-set colorspace:auto-grayscale=false`了这将防止在支持灰度的编码器中自动转换为灰度。

# c# - 当用户登录时，如何让 ASP.NET 插入数据库记录？

> ID：14696730
> 
> 赞同：0
> 
> 时间：2013-02-04T22:16:28.020
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我要做的就是将用户登录时的用户名、登录时间和 IP 地址插入数据库。这实际上需要几行 PHP 代码，但是在多个论坛中请求帮助并尝试之后许多不同的解决方案对于 ASP 来说似乎是一项不可能完成的任务。

我得到的最接近的是将其添加到前端 aspx 页面（登录后重定向的位置）：

```
if (Request.IsAuthenticated) 
```

问题是我无法让它在之后插入以挽救我的生命。选择进入网格视图？没问题。在页面加载时插入数据？没门。

我不敢相信以前没有人遇到过这种情况。

其他注意事项

*   该站点不会加载到 Visual Studio 中。

*   我试图编辑临时目录中的 .cs 文件，但似乎没有任何反应

*   我正在编辑 webroot 目录中的 .aspx 文件。

*   我很乐意直接使用 C#，但我不知道如何添加到 aspx 页面的中间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:27:27.997

您可以使用[ASP.NET 成员资格提供程序](http://weblogs.asp.net/scottgu/archive/2006/05/07/ASP.NET-2.0-Membership-and-Roles-Tutorial-Series.aspx)，如果您使用的是 SQL-Server，则可以从`SqlMembershipProvider`.

然后你可以覆盖`ValidateUser`并记录它是否返回`false`（或总是）。

```
bool isValid = base.ValidateUser(username, password); 
```

您可以通过以下方式获取ip：

```
public static void logWrongPasswordAttempt(string userName, string passWord)
{
    // Look for a proxy address first
    var IP = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
    //Trim and lowercase IP if not null
    if ((IP != null))
    {
        IP = IP.ToLower().Trim();
    }
    if (IP == null || IP.Equals("unknown"))
    {
        //If IP is null use different detection method else pull the correct IP from list.
        IP = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"].ToLower().Trim();
    }

    List<string> IPs = null;
    if (IP.IndexOf(",") > -1)
    {
        IPs = IP.Split(new[]{','}, StringSplitOptions.None).ToList();
    }
    else
    {
        IPs = new List<String>() { IP };
    }

    foreach (string ip in IPs)
    {
        // insert your record into database
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:10:34.770

听起来您正在使用预编译的站点 - 所以，编辑代码什么都不做？

如果您可以完全控制代码，那么在该事件处理程序中插入数据库应该是一件简单的事情——我们一直都在这样做。您是在使用标准 ADO 代码还是尝试使用一些数据绑定控件或其他东西？只需一个直接的 ADO 调用就足够了......

你知道……这东西……

```
SqlConnection connection = new SqlConnection(connectionString))
SqlCommand command = new SqlCommand(queryString, connection);

connection.Open();
SqlDataReader reader = command.ExecuteQuery(); 
```

# c# - 如何为具有不同属性设置文件的 MVC 网站部署多个项目

> ID：14696742
> 
> 赞同：0
> 
> 时间：2013-02-04T22:17:07.913
> 
> 标签：c#, asp.net-mvc, deployment, web-config

我有一个 MVC 网站，它还引用了我的解决方案中的另一个 Class 项目，称为`DAL`

MVC 网站有一个`settings.settings`文件用于我的默认数据库连接字符串，它会自动在我的`Web.Config`文件中更新。

但是，我的 Class 项目还使用一个`settings.settings`文件进行数据库连接（如果 MVC 项目尚未提供连接，则创建一个连接），我相信这已放入`App.Config`文件中，但是在部署和运行此 MVC 时网站？

我为`DAL`项目做什么？

我可以看到它`DAL\bin\release\DAL.dll.config`在那个位置有一个文件，这需要进入网站目录的根目录，使用相同的文件路径吗？还是我应该做其他事情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:13:29.870

您应该能够使用全名覆盖 web.config 中的此设置。如果您的项目名为 DAL，您应该在 web.config 中创建一个连接字符串，看起来像这样。

```
<add name="DAL.Properties.Settings.MyDatabaseConnectionString" 
    connectionString="Data Source=(local);Initial Catalog=myDatabase;Integrated Security=true"
    providerName="System.Data.SqlClient" /> 
```

# android - 不同 Android 版本的不同 appWidgetProviders

> ID：14696747
> 
> 赞同：1
> 
> 时间：2013-02-04T22:17:24.123
> 
> 标签：android, android-resources, appwidgetprovider

我还是 android 新手，所以这可能是一个非常简单的问题，谢谢。

我已经构建了一个当前仅支持 android 3.1+ 的小部件，因为它可以调整大小，我现在想让它也支持早期的 android 版本。我知道我可以为例如 android sdk 版本 14 创建一个 values 文件夹，将其命名为 values-v14（对吗？）。我只想知道我是否也可以对包含 appWidgetProvider 文件的 xml 文件夹执行此操作？

如果是这样的话：

我在想我会拥有 2*2、2*3、3*3 等早期 android 版本的小部件，然后是 3.1，并为 3.1+ 调整大小。因此，要做到这一点，我只需为不可调整大小的文件创建一个默认 XML 文件夹，然后创建一个名为 XML-v12 的 XML 文件夹，包括可调整大小的小部件属性。然后这个文件夹适用于所有较新的android版本还是只适用于sdk v12？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:26:32.253

> 我构建了一个当前仅支持 android 3.1+ 的小部件，因为它可以调整大小

这不是真的。将您的 appwidget 设置为可调整大小不会使其与早期版本不兼容。低于 HC 的 Android 版本将简单地忽略这一点。

如果要创建不同形式的小部件，则必须为每个小部件创建一个`appwidget-provider`XML 文件、一个接收器和一个。`AppWidgetProvider`

当然，您可以通过创建基础`AppWidgetProvider`然后扩展该基础以添加功能、宽度/高度或其他自定义来避免代码重复。

# linux - 使用“sudo chmod 444 etc”更改目录权限后无法编辑目录权限

> ID：14696749
> 
> 赞同：-1
> 
> 时间：2013-02-04T22:17:38.110
> 
> 标签：linux, ubuntu, permissions, chmod

我正在使用 Ubuntu 12.04.1 LTS（GNU/Linux 3.2.0-31-virtual x86_64）并将“etc”目录的权限更改为 444（sudo chmod 444 等）。我现在无法将权限更改为其他任何内容，并且收到以下消息：

```
$ sudo chmod 777 etc
sudo: unable to open /etc/sudoers: Permission denied
sudo: no valid sudoers sources found, quitting 
```

我尝试更改为 root 用户并更改权限，但系统提示我输入从未被要求设置的密码，并显示以下消息：

```
$ su
Password:
su: Authentication failure 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:28:19.210

您应该启动到“Ubuntu 恢复模式”并将权限更改回 /etc 为 755：

[https://askubuntu.com/questions/115358/changed-etc-permission-in-oneiric-ubuntu11-10-by-using-sudo-chmod-665-etc](https://askubuntu.com/questions/115358/changed-etc-permission-in-oneiric-ubuntu11-10-by-using-sudo-chmod-665-etc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:21:00.273

重新启动到单用户模式并从那里修复 /etc 的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:23:19.363

您已更改 sudo 的配置文件所在文件夹的权限。

试试看[这里。这个人也有类似的问题。](https://askubuntu.com/questions/152038/accidently-blocked-access-to-sudoers-d-whilst-trying-to-change-ushare-config)

# python - 如何创建隐藏的文本输入框？

> ID：14696751
> 
> 赞同：0
> 
> 时间：2013-02-04T22:17:43.523
> 
> 标签：python, html, flask

我正在编写一个 wtforms 自定义表单，其中包括

*   多个布尔检查按钮/单选按钮

*   和隐藏的文本输入。

*   如果用户单击“其他”按钮，则启用文本输入并且用户可以手动编写内容

*   如果用户取消单击“其他”按钮，则禁用文本输入。

这是绘制这个的小部件函数（用于多个复选框）：

```
def select_multi_other_checkbox(field, ul_class='', **kwargs):
    """check wtforms.widgets.core to see what is going on"""
    kwargs.setdefault('type', 'checkbox')
    field_id = kwargs.pop('id', field.id)
    html = [u'<ul %s>' % html_params(id=field_id, class_=ul_class)]
    for value, label, checked in field.iter_choices():
        choice_id = u'%s-%s' % (field_id, value)
        options = dict(kwargs, name=field.name, value=value, id=choice_id)
        if checked:
            options['checked'] = 'checked'
        html.append(u'<li><input %s /> ' % html_params(**options))
        html.append(u'<label %s>%s</label></li>' % (html_params(**options), cgi.escape(text_type(label))))

    else:
        choice_id = u'%s-%s' %(field_id, u'other')
        options = dict(kwargs, name=field.name, value='', id = choice_id)
        options['type'] = 'text'
        html.append(u'<input %s > ' % (html_params(**options)))

    html.append(u'</ul>')
    cPickle.dump(html, open("htmltest.p", "wb"))
    return u''.join(html) 
```

该部分`html.append(u'<input %s > ' % (html_params(**options)))`是添加 textinput 的地方。（注意这`options['type'] = 'text'`意味着标签的`type="text"`属性`<input>`）问题是，我怎样才能使隐藏的文本输入（不是`type="hidden"`），以便以后可以通过 jquery 显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:19:36.640

添加隐藏它的样式：

```
<input type="text" style="display:none" id="myhiddentextfield" /> 
```

然后使用 jQuery 显示它：

```
$('#myhiddentextfield').show(); 
```

# vmware - VMware Workstation 7.0.1 是否在 VMware Infrastructure 3 下运行？

> ID：14696764
> 
> 赞同：0
> 
> 时间：2013-02-04T22:18:36.823
> 
> 标签：vmware, virtualization, vmware-workstation

我找不到有关此主题的 VMware 文档的任何信息。任何关于在哪里可以找到这方面信息的建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:46:22.813

VMware 工作站、融合和播放器是在 Windows、Linux 和 mac os 等其他操作系统之上运行的桌面产品。VMware ESX、ESXi 直接在裸机上运行。由于 VMware Infrastructure 3 是基于 ESX 和 ESXi 3.X 构建的，因此您可以在 VI3 之上运行工作站。但需要指出的是，运行在VI3 上的工作站不支持硬件虚拟化，即使您的物理cpu 附带硬件虚拟化解决方案。然而，最新的 ESXi 甚至工作站在非生产环境中支持所谓的“嵌套虚拟化”。实际上，我有一个在我的 fusion 5 中运行的虚拟 ESXi 5 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:23:11.680

假设您的意思是要在另一个虚拟化解决方案（VMware Infrastructure）之上运行一个虚拟化解决方案（VMware Workstation），尽管我不确定您为什么要这样做而不是简单地使用一个虚拟化解决方案（或者基础设施或工作站，取决于您的需求/目标），我不认为它被阻止。对于 VMware Infrastructure，您运行 Workstation 的来宾操作系统应该与任何其他来宾操作系统一样，尽管它可能会使用大量资源。

[您可能会在Workstation 社区](http://communities.vmware.com/community/vmtn/desktop/workstation?view=discussions)中找到其他人正在尝试完成同样的事情。

# artificial-intelligence - 将剪辑技能和知识传授给流口水

> ID：14696768
> 
> 赞同：1
> 
> 时间：2013-02-04T22:18:59.763
> 
> 标签：artificial-intelligence, drools, clips

我正在寻找更深入的流口水知识，我想知道 CLIPS 技能和知识是否可以转移到流口水？

特别是，我想知道以下书是否有助于深入了解流口水背后的一些原则？

[智能系统：原则、范式和语用学：原则](http://books.google.co.uk/books?id=80FXUtF5kRoC&printsec=frontcover&source=gbs_atb#v=onepage&q&f=false)？

注意：此问题由所选答案中的评论回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T18:53:30.430

亚马逊上有几本 DROOLS 书籍，包括今年（2013 年）出版的两本。

# node.js - 为什么在这种情况下套接字 io 不接收消息？

> ID：14696770
> 
> 赞同：0
> 
> 时间：2013-02-04T22:19:06.477
> 
> 标签：node.js, express, socket.io

我正在尝试使用 Node.js、socket.io 和 Express 在两条路由之间发送一条简单的消息。

这是我的特快路线：

```
app.get('/', routes.index);
app.get('/controller', routes.controller); 
```

和我在服务器端的socket.io：

```
io.sockets.on('connection', function (socket) {
    socket.emit('test', {});
      socket.on('clicked', function(data) {
      console.log('clicked received');
      socket.emit('do_stuff', data);
    });
}); 
```

在我的索引页面中：

```
<script>
var socket = io.connect('http://localhost:3001');
socket.on('test', function(data) {
  console.log('test received');
});
socket.on('do_stuff', function(data) {
  console.log('should do stuff here');
});
</script> 
```

在我的控制器页面中：

```
 <button id='the_button'>Click Me</button>

  <script>
    var socket = io.connect('http://localhost:3001'); 
    socket.on('test', function(data) {
      console.log('test recieved');
    });
    $(function() {
      $("#the_button").click(function(e) {
        socket.emit("clicked", {});
    });
  </script> 
```

当在控制器页面上单击按钮时，我希望“do_stuff”触发索引页面上的某些功能。但是，该`socket.on('do_stuff',...)`事件永远不会被触发。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:21:44.850

你想使用`socket.broadcast.emut`而不是`socket.emit`

`socket.emit`只发回发送消息的套接字

请参阅此处了解差异：[io.sockets.emit 和广播之间有什么区别？](https://stackoverflow.com/q/10342681/561731)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:53:47.713

在从事件处理程序发出事件之前确保套接字处于连接状态！

# c# - 推送通知 - URI 的使用

> ID：14696773
> 
> 赞同：1
> 
> 时间：2013-02-04T22:19:18.663
> 
> 标签：c#, windows-phone-7, push-notification, uri, mpns

我为 Windows Phone 7 创建应用程序并且需要使用推送通知（toast）。
为了在手机和服务器之间进行通信，我将使用 HttpNotificationChannel 类中的 channelURI。在 MainPage 构造函数的移动应用程序中，我将 channelURI 发送到服务器。服务器有一些频道 URI 的列表，并且每小时使用列表中的 URI 向手机发送通知。

我的问题是：
1) URI 地址在电话的标准使用情况下可以存活多久？（应用程序多久可以打开和关闭一次？
2）还有其他更好的方法来解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:46:09.887

我找到了第一个问题的答案。URI 有效期为 30 天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T13:19:03.463

有一个很棒的博客，请参阅链接[http://blog.mjfnet.com/2012/03/19/windows-phone-push-notifications-frequently-asked-questions/](http://blog.mjfnet.com/2012/03/19/windows-phone-push-notifications-frequently-asked-questions/)。

根据作者的说法，30 天的有效期仅适用于频道已停用 30 天的情况。

# java - 如何在 JavaFX 上同步滚动条？

> ID：14696790
> 
> 赞同：3
> 
> 时间：2013-02-04T22:20:15.013
> 
> 标签：java, user-interface, javafx-2

我的应用程序中有两个 TextAreas，当我移动其中一个滚动条时，我想让滚动条同步滑动。但是我在 JavaFX 2.2 中找不到这样做的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T22:42:38.260

这对我有用：

```
TextArea ta1 = new TextArea(), ta2 = new TextArea();
ta1.scrollTopProperty().bindBidirectional(ta2.scrollTopProperty()); 
```

通常情况下，您可以在 TextArea 上应用 lookupAll(String) 操作来查找 TextArea 内的滚动条，并双向绑定它们的值。

# drupal - 根据页面 tpl.php 模板更改正文类

> ID：14696791
> 
> 赞同：1
> 
> 时间：2013-02-04T22:20:16.480
> 
> 标签：drupal

我还没有完全正确的过程来根据正在查看的页面更改正文类。

我在一个小节中有大约 20 个页面，它们都有不同的背景颜色和来自主站点的反向导航链接。

我不知道是否有某种预处理函数可以在 template.php 中使用（以及哪个），或者我是否应该在某个 xx-page.tpl.php 文件中专门做一些事情。

由于浏览器缓存，仅在 xx-page.tpl.php 中的 body 标记中添加一个 ID 并不可靠。

我看过这个片段：

```
if (drupal_is_front_page()) {
 $vars['body_class'] .= ' home';
 } 
```

然而，“是不是前面”是不够的，因为它也不仅仅是一个页面，它是一个特定的页面，但我要么错过了语法，要么做错了什么。

这是我需要创建自定义函数的情况吗？如果需要，是 template.php 页面吗？

另外，我在 Drupal 6.26

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:47:41.520

你在找这个功能吗？ [http://api.drupal.org/api/drupal/includes!theme.inc/function/template_preprocess_page/6](http://api.drupal.org/api/drupal/includes!theme.inc/function/template_preprocess_page/6)

您可能还想看看 Context 模块。

# mysql - SQL 加入一列 LIKE 另一列

> ID：14696793
> 
> 赞同：36
> 
> 时间：2013-02-04T22:20:25.143
> 
> 标签：mysql, sql, join, sql-like

> **可能重复：**
> [使用like的mysql连接查询？](https://stackoverflow.com/questions/1930809/mysql-join-query-using-like)

我想做一个连接，其中一列包含另一个表列中的字符串：

```
SELECT
a.first_name,
b.age
FROM names a
JOIN ages b
ON b.full_name LIKE '%a.first_name%' 
```

这可能吗？我正在使用 MySQL。当然，上面的查询不会起作用，因为 LIKE '%a.first_name%' 只会查找字符串 a.first_name，而不是列的实际值。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-04T22:21:31.067

您只需要连接字符串，您也可以进行搜索和替换。

```
SELECT
    a.first_name,
    b.age
FROM names a
JOIN ages b
ON b.full_name LIKE '%' + a.first_name + '%' 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-04T22:23:05.257

您可以使用 CONCAT：

```
SELECT
  a.first_name,
  b.age
FROM
  names a JOIN ages b
    ON b.full_name LIKE CONCAT('%', a.first_name, '%') 
```

或[LOCATE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)，返回 in 的第一次出现的`a.first_name`位置`b.full_name`：

```
SELECT
  a.first_name,
  b.age
FROM
  names a JOIN ages b
  ON LOCATE(a.first_name, b.full_name) 
```

如果有匹配，则连接将成功。

# java - java.util.logging.Logger 方法能否在 Google App Engine 上失败？

> ID：14696801
> 
> 赞同：4
> 
> 时间：2013-02-04T22:21:01.750
> 
> 标签：java, google-app-engine, logging, java.util.logging

Google App Engine 使用`java.util.logging.Logger`(JUL) 进行所有日志记录。因此，要记录任何内容（然后通过 检索它`LogService`），您只需像通常使用 JUL 一样进行记录：

```
private Logger logger = Logger.getLogger(this.class.getName());

// ...

public void doWhatever() {
    logger.info("This will be logged.");
} 
```

但是，如果您阅读 GAE 教程/指南以了解他们的各种服务 API（Memcache、Mail、Datastore 等），他们都会重申您应该始终针对其中一项服务出现故障的可能性进行编码。GAE 甚至提供了一个`CapabilitiesService`您可以在调用任何服务方法之前检查的方法，以查看该服务当前是否已启用。

所以我问：JUL 日志记录操作是否有可能失败：

> logger.info("我能不能失败*而不*被记录？");

如果不是，为什么？如果是这样，在 JUL 阻塞的情况下，我该怎么做才能“故障转移”？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:33:33.820

```
logger.info("Can I ever fail and not get logged?"); 
```

当然也可能失败。

这条看似无辜的线背后的配置可能：

*   向控制台写入消息（控制台写入可能尚未初始化，或者已经关闭）
*   将消息附加到文件（可能由于许多与文件 I/O 相关的原因而失败）
*   发送电子邮件（可能由于许多与套接字 I/O 相关的原因而失败）
*   写入数据库（可能由于许多与数据库相关的原因而失败）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:45:48.810

如果您一直在崩溃并试图解决问题，一个选择是将异步 HTTP 调用（作为日志机制）发送到另一台服务器。

* * *

此外，因为这让我在数周的崩溃地狱中微笑： [https ://groups.google.com/d/msg/google-appengine/js5CeRWLQZ0/KrW2CpJ4JuYJ](https://groups.google.com/d/msg/google-appengine/js5CeRWLQZ0/KrW2CpJ4JuYJ)

> 在大多数系统中，正常运行时间是 100% 减去所有其他系统的停机时间的总和。此规则的例外是日志记录。当 Logging 无法记录停机时间时，Uptime 会增加。因此，Google 一直在努力构建一个日志系统，该系统在所有其他系统之前就出现故障，并在不久之后出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:17:19.070

我遇到了同样的问题，*是*的，日志服务可以失败而没有错误。您将得到的最好的结果（直到 GAE 改进日志服务 API）是 cron 一个作业来唤醒，比如说，每分钟，并执行一个`logger.info(...)`.

然后运行`LoggingService#fetchLogs(...)`​​, filters 以仅检索`AppLogLine`包含最近的记录器调用，并检查以确保您可以检索它。如果你不能，那么就`logger.info(...)`失败了，你可以让你的应用程序做出你喜欢的反应。

我总是在我的 GAE 应用程序上公开一个安全的 servlet，它会 ping 功能服务并要求对每个服务进行状态检查。如果该服务因维护而被禁用或关闭，我有一个外部监视器（每 5 分钟检查一次此 URL）向我发送一条短信。您可以将此“日志检查”cron 作业与这种服务检查联系起来。

# pdf - pdfbox 文档被加密错误

> ID：14696807
> 
> 赞同：4
> 
> 时间：2013-02-04T22:21:31.593
> 
> 标签：pdf, pdfbox

我有一个用 pdfbox 解析的[pdf 文档。](http://sdrv.ms/WoimbF)文件没有加密，我可以打开文件。但是，遵循 PDFBox 中的代码行

```
 try
        {
            document = PDDocument.load( inpFilename);

            if( document.isEncrypted() )
            {
                System.err.println( "Error: Document is encrypted with a password." );
                return;

            } 
```

创建错误：`"Error: Document is encrypted with a password."`。知道为什么会这样吗？是否有各种 pdf 加密（允许您阅读，但不能使用 pdfbox 处理）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:06:17.113

在此处查看答案：[使用 pdfbox 从 pdf 中删除加密，例如 qpdf](https://stackoverflow.com/questions/14700241/remove-encryption-from-pdf-with-pdfbox-like-qpdf/14700523#14700523)

向您展示如何在未指定用户密码的情况下轻松解密文档。

# jquery - jQuery隐藏最后5个div

> ID：14696812
> 
> 赞同：-5
> 
> 时间：2013-02-04T22:21:46.683
> 
> 标签：jquery, html

我将如何上课`show`的前 5`div`秒`.stream`？就像我会使用哪个选择器？在 jQuery 中。

假设我有这个：

```
<div class='stream'>I'm testing this out
    <br><br>
    <div style='position:absolute;bottom:20px;right:20px;color:gray;'> - dumbsearch</div>
</div>
<br>
<div class='stream'>jo
    <br><br>
    <div style='position:absolute;bottom:20px;right:20px;color:gray;'> - dumbsearch</div>
</div>
<br>
<div class='stream'>what dat?
    <br><br>
    <div style='position:absolute;bottom:20px;right:20px;color:gray;'> - dumbsearch</div>
</div>
<br>
<div class='stream'>hey
    <br><br>
    <div style='position:absolute;bottom:20px;right:20px;color:gray;'> - dumbsearch</div>
</div> 
```

类的所有和`div`s`stream`将设置为`display:none`，我将如何显示前 5 个？

提前非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:23:32.840

```
$('div.stream:lt(5)').show();// MaGiC!!! yAy! :-D 
```

演示：http: [//jsfiddle.net/maniator/gJFz9/](http://jsfiddle.net/maniator/gJFz9/)

# c# - Linq 扩展方法的 Where 子句

> ID：14696817
> 
> 赞同：1
> 
> 时间：2013-02-04T22:22:07.383
> 
> 标签：c#, linq, join, where

我有以下 lambda 表达式：

```
query = query.Join( SecondTableSource,
table1 => new
{
    table1 .Field1,
    table1 .Field2
},
table2 => new
{
    table2 .Field1,
    table2 .Field2
},
( table1 , table2 ) => table1 ) ; 
```

如您所见，我只返回第一个表的结果，但我需要通过 table2 中的列过滤掉结果。我将如何去做，但仍然只返回 `IQueryable<table1>`？

谢谢！

这是我要转换的原始代码：

```
query = from table1 in Model.Table1s
    join table2 in Model.Table2s
        on new
        {
            table1.field1,
            table1.field2
        }
    equals
        new
        {
            table2.field1,
            table2.Part
        }
    where table2.field.StartsWith( criteria.value )
    select table1; 
```

我想我一定没有正确转换，因为发布的前两个答案（这是我写这篇文章时发布的所有答案）应该可以工作，但是当我期待 4 时，两者都只返回一个结果（正如原始查询返回的那样） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:26:03.840

不能先过滤table2吗？

```
query = query.Join(SecondTableSource.Where(table2 => table2.MyFieldToFilter == condition),
                   table1 => ...,
                   ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:53:59.253

如果您有更复杂的查询，这是另一种选择...

```
IEnumerable<MyType1> result = table1.Join(table2,
        t1 => new { t1.Field1, t1.Field2 },
        t2 => new { t2.Field1, t2.Field2 },
        (t1, t2) => new { table1 = t1, table2 = t2 }).
    Where(joinedResults => joinedResults.table2 == //condition).
    Select(filteredResults => filteredResults.table1); 
```

# database - Neo4j 和大日志文件

> ID：14696819
> 
> 赞同：11
> 
> 时间：2013-02-04T22:22:15.027
> 
> 标签：database, nosql, neo4j

我尝试在我的应用程序中使用 n4j，但我遇到了大日志文件的问题。它们是必要的还是有一些方法可以减少它们的数量和大小？

目前我看到的文件如下：

> nioneo_logical.log.v0
> 
> nioneo_logical.log.v1
> 
> nioneo_logical.log.v2

等等，它们每个约为 26MB（超过 neo4j 文件夹的 50%）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-05T06:26:45.943

每当轮换逻辑日志时都会创建这些文件。

您可以在服务器属性文件中为它们配置规则。

在此处查看详细信息：http: [//docs.neo4j.org/chunked/stable/configuration-logical-logs.html](http://docs.neo4j.org/chunked/stable/configuration-logical-logs.html)

如果您的数据库已关闭且处于干净状态，您可以安全地删除它们（但仅限 *.v*）。不要在数据库运行时删除它们，因为在崩溃时恢复时可能需要它们。

# g++ - 对 Class::method() 的未定义引用

> ID：14696820
> 
> 赞同：0
> 
> 时间：2013-02-04T22:22:16.117
> 
> 标签：g++, ld, undefined-reference

我在我的代码中使用了一个名为[ROOT](http://root.cern.ch/drupal/)的框架，ROOT 提供了大量的库，然后有[PROOF](http://root.cern.ch/drupal/content/proof)应该允许我的代码并行运行。

应该在[TProof.h](http://root.cern.ch/root/html/TProof.html#TProof%3aOpen)中定义一个启动并行环境的静态方法`Open`。我使用这种方法如下：

```
//通常包括（包括ROOT的）
＃包括
//很多代码
int main(int argc, const char *argv[]) {
    //初始化代码
    TProof *p = TProof::Open("");
    // 更多代码
    返回0；
}

```

g++ 给了我这个错误：

```
mini2.o: In function `main':
/path/to/file/name.cxx:279: undefined reference to `TProof::Open(char const*, char const*, char const*, int)' 
```

ROOT 提供了一个脚本，它打印所有必要的标志来编译和**链接**它的库，我正在使用这些标志，在这种情况下：

```
$ root-config --libs
-L/my/path/root/lib -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d -lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics -lMathCore -lThread -pthread -lm -ldl -rdynamic 
```

我做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:41:10.443

您至少`-lProof`在编译器（链接器）选项中缺少。我真的不知道框架，所以我不能告诉你这是你的错还是配置脚本的问题。

（这是我发现的：下载ROOT的二进制分发，检查`lib`文件夹并找到`libProof.so`。）

如果这还不够，请包含`Proof*`您可以在库目录中找到的其他库。

# jquery - Jquery UI 可排序多个项目几乎可以工作，但还有一个问题

> ID：14696821
> 
> 赞同：2
> 
> 时间：2013-02-04T22:22:18.753
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我有两个连接的可排序，在这些工作之间拖动很好。我需要一次拖动多个，所以我使用以下类似的方法来完成它，将选定的项目附加到 event.item。

```
$(this).sortable({
         connectWith: ".stage-content",
         placeholder: 'placeholder',
         start: function(ui, e) {
             e.item.siblings(".selected").appendTo(e.item);
.... 
```

我无法弄清楚的问题是，当没有将鼠标悬停在两个放置区域之一上时，占位符最终会出现在我拖动的元素中。如果你在这个时候放手，它们就会消失。

**HierarchyRequestError：无法在层次结构中的指定点插入节点**

这很有意义，但我不知道解决方案是什么，感谢任何帮助！

[http://jsfiddle.net/mstefanko/kxBUG/](http://jsfiddle.net/mstefanko/kxBUG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:43:42.227

底部是带有示例的 jsfiddle。希望这可以帮助。

```
$(document).ready(function(){
                 $(".droppable").droppable({
                    drop: function(event, ui) {
                        var $list = $(this);
                        $helper = ui.helper;
                        $($helper).removeClass("selected");
                        var $selected = $(".selected");                 
                        if($selected.length > 1){                       
                            moveSelected($list,$selected);
                        }else{
                            moveItem(ui.draggable,$list);
                        }                                       
                    }, tolerance: "touch"
                 });

                 $(".draggable").draggable({
                    revert: "invalid",
                    helper: "clone",
                    cursor: "move",
                    drag: function(event,ui){
                        var $helper = ui.helper;
                        $($helper).removeClass("selected");
                        var $selected = $(".selected"); 
                        if($selected.length > 1){   
                            $($helper).html($selected.length + " items");
                        }                                       
                    }
                 });

                function moveSelected($list,$selected){
                    $($selected).each(function(){
                        $(this).fadeOut(function(){
                            $(this).appendTo($list).removeClass("selected").fadeIn();
                        });                 
                    });             
                }

                function moveItem( $item,$list ) {
                    $item.fadeOut(function() {
                        $item.find(".item").remove();
                        $item.appendTo( $list ).fadeIn();
                    });
                }

                $(".item").click(function(){
                    $(this).toggleClass("selected");
                });

            }); 
```

[http://jsfiddle.net/caferdo/k5XJv/3/](http://jsfiddle.net/caferdo/k5XJv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T11:39:16.453

您应该添加`$(YOUR SORTABLE OBJECT).sortable( "refresh" )`启动功能。

```
$(this).sortable({
         connectWith: ".stage-content",
         placeholder: 'placeholder',
         start: function(ui, e) {
             e.item.siblings(".selected").appendTo(e.item);
             $(YOUR SORTABLE OBJECT).sortable( "refresh" );}
... 
```

# ruby-on-rails - 机架缓存：“陈旧、有效、存储”

> ID：14696831
> 
> 赞同：4
> 
> 时间：2013-02-04T22:22:57.610
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, rack, rack-cache

我在我的 rails 应用程序中使用了页面缓存解决方案以及 expire_at 语句。

我的页面可以使用 1 小时，然后需要重做。

出于某种原因，当我的 Rails 服务器开始“新鲜”提供服务的第一个小时，然后当它变成样式时，之后的每个请求都被提供“陈旧、有效、存储”......存储意味着它进入我的应用服务器并尝试获取新副本。

我在 Heroku 上，使用 unicorn 和 rack-cache 以及用于元存储的 memcached 和用于实体存储的文件支持缓存。

任何想法为什么会发生？

在我本地的 comp/dev 机器上，它没有表现出相同的症状。当页面变得陈旧时，第一个请求被“陈旧、有效、存储”提供服务，随后的请求得到“新鲜”服务，直到一个小时过去后它再次陈旧。

# sql - 查询邻接表中最远的孩子

> ID：14696832
> 
> 赞同：6
> 
> 时间：2013-02-04T22:23:01.777
> 
> 标签：sql, postgresql, recursive-query, adjacency-list

所以我有一个 SQL 查询来检索邻接列表中给定节点的所有子节点。

```
WITH    RECURSIVE
        q AS
        (
        SELECT  id, name
        FROM    categories h
        WHERE   id = 11846801
        UNION ALL
        SELECT  hc.id, hc.name
        FROM    q
        JOIN    categories hc
        ON      hc.parent = q.id
        )
SELECT  name
FROM    q 
```

有没有办法修改这个查询只返回*最*底层的节点？我不能只指定一个给定的级别，因为每条路径可能有不同的深度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:42:16.797

### 解读1

“所有离开节点从一开始就具有最长的路径。”

一种方法是计算你下降的水平，只返回底部的成员：

```
WITH RECURSIVE q AS (
   SELECT  id, name, 0 AS lvl
   FROM    categories
   WHERE   id = 11846801

   UNION ALL
   SELECT  c.id, c.name, q.lvl + 1
   FROM    q
   JOIN    categories c ON c.parent = q.id
   )
SELECT  id, name
FROM    q
WHERE   lvl = (SELECT max(lvl) FROM q); 
```

### 解读2

“所有离开节点。”

```
WITH RECURSIVE q AS (
   SELECT  id, name, parent
   FROM    categories
   WHERE   id = 11846801

   UNION ALL
   SELECT  c.id, c.name, c.parent
   FROM    q
   JOIN    categories c ON c.parent = q.id
   )
SELECT  id, name
FROM    q
WHERE   NOT EXISTS (SELECT FROM q q1 WHERE q1.parent = q.id); 
```

检查应该`q`比检查基表更快——除非 q 非常大，在这种情况下，主表上的索引可能会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:47:41.307

底层的东西永远不是父母。因此，您可以添加以下`where`子句：

```
where id not in (select parent from categories) 
```

实际上，在 Postgres 中，`not in`可能不是最有效的方法。因此，这可能更有效：

```
where not exists (select 1 from categories c where c.parent = q.id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-26T11:37:33.813

只是为了重复[Gordon Linoff 的回答](https://stackoverflow.com/a/14697183)。他的查询会起作用是个好主意，但前提是没有`NULL`值。因此，为了解决这个问题，需要一个额外的 where 子句。

```
SELECT id WHERE id NOT IN (SELECT parent FROM categories WHERE parent IS NOT NULL); 
```

我今天才知道这件事。（并且没有足够的代表发表评论）

> 为了符合 SQL 标准，IN 不仅在左侧的表达式为 NULL 时返回 NULL，而且在列表中未找到匹配项且列表中的表达式之一为 NULL 时返回 NULL。

参考[http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_in](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_in)

# javascript - jQuery动画除了一个类

> ID：14696835
> 
> 赞同：0
> 
> 时间：2013-02-04T22:23:05.853
> 
> 标签：javascript, jquery, animation

我想知道我们怎么能这样做……我什么都没想……

所以我的问题标题可能令人困惑，所以这里是完整的问题。我们如何运行动画但跳过包含 .current... 的一类动画

这是菜单动画，所以我不想为当前类设置动画，因为没有意义。

我可以通过在 CSS 中添加另一个类并使用 !important 作为高度来阻止它。这样看起来好像没有动画，但如果我检查元素，当然有......

JS代码：

```
$("#topMenu li").mouseover(function(){
    $(this).find('span').stop().animate({ height:'45px' }, { queue:false, duration:600, easing: 'easeOutBounce' });
});

$("#topMenu li").mouseout(function(){
    $(this).find('span').stop().animate({ height:'0px' }, { queue:false, duration:600, easing: 'easeOutBounce' });
});

var currentPage = $('#topMenu span').hasClass('current');

if(currentPage === true) {
    $('span.current').css('display', 'block');
} 
```

所以我可以做到这一点，看起来好像没有动画......但是我们可以以某种方式做到这一点，所以其中包含 .current 类的元素真的没有动画吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:28:49.287

```
$(this).find('span:not(.current)').stop().animate... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:29:39.703

您可以`:not`在选择器中添加：

```
$('#topMenu li:not(.current)').mouseover(...) 
```

如果在添加事件处理程序后动态添加类，请将检查移动到处理程序内部：

```
$('#topMenu li').mouseover(function () {
  if ($(this).hasClass('current')) return;
  // etc
}); 
```

# java - java - 如何使用自定义绘制类在java slick中绘制对象

> ID：14696838
> 
> 赞同：1
> 
> 时间：2013-02-04T22:23:11.317
> 
> 标签：java, draw, renderer

我正在 2d 中创建一个非常简单的 Java Slick 游戏。我可以在扩展 BasicGameState 的类中使用渲染器方法，但我想使用 DarwMap 类渲染到我的游戏容器中。

这是我的游戏源代码和不工作的 DrawMap 类：

```
public class GamePlay extends BasicGameState{

    DrawMap map;

    public GamePlay(int state){

    }

    @Override
    public void init(GameContainer arg0, StateBasedGame arg1) throws SlickException {
        // TODO Auto-generated method stub      
    }

    @Override
    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException {
        map.render();
    }

    @Override
    public void update(GameContainer arg0, StateBasedGame arg1, int arg2) throws SlickException {
        // TODO Auto-generated method stub

    }

    @Override
    public int getID() {
        // TODO Auto-generated method stub
        return 1;
    }
} 
```

和下一节课

```
public class DrawMap {

    //size of the map
    int x,y;
    //size of the tile
    int size;

    //tile
    Image tile;

    //creator
    public DrawMap(GameContainer gc, int x, int y, int size){
         this.x = x;
         this.y = y;
         this.size = size;
    }

    public void render() throws SlickException{

         tile = new Image("res/Tile.png");

         for(int i=0; i<(y/size); i++){
             for(int j=0; j < (x/size); j++){
                 tile.draw(j*size, i*size, 2);
            }
         }
    }

} 
```

我知道这是错误的，但是如果有人可以帮助我解决这个问题并使用 DrawMap 类解决我的绘图问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:10:13.020

我在您的构造函数中看不到它，但我假设您正在`map`那里创建实例。

现在，要在屏幕上绘图（这通常对 Slick 和 Java2D 有效），您需要一个`Graphics`表示图形上下文的对象，它是管理将数据放入屏幕的对象。对于 Slick2D，您可以`GameContainer`通过调用它的`getGraphics`方法来获取图形。然后，您可以在刚刚获得的对象上调用该`drawImage`方法将图像绘制到屏幕上。`Graphics`

这是一个示例，将图形上下文作为`DrawMap`'`render`方法的参数传递：

```
public class GamePlay extends BasicGameState{

    DrawMap map;    
    ...

    @Override
    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException {
        map.render(gc.getGraphics());
    }
    ...
} 
```

还有`DrawMap`班级...

```
public class DrawMap {

    Image tile;
    ...        

    public void render(Graphics g) throws SlickException {
    // your logic to draw in the image goes here

        // then we draw the image. The second and third parameter
        // arte the coordinates where to draw the image
        g.drawImage(this.tile, 0, 0);
    }   
} 
```

当然，您可以继续直接绘制到`Graphics`对象中。

# ios - 在动画中移动 UIView 时隐藏它

> ID：14696850
> 
> 赞同：0
> 
> 时间：2013-02-04T22:23:59.577
> 
> 标签：ios, xcode

我有一些使用 beginAnimations 进行旋转的动画。我想隐藏有问题的 UIview，当然我尝试更改 hidden 属性但没有任何反应。这是代码

```
 CGAffineTransform rotation = CGAffineTransformMakeRotation( angelToRotate(-90));
[UIView beginAnimations: @"" context: NULL];
self.view.hidden = TRUE;
[UIView setAnimationDuration: 0.4];
self.view.transform = CGAffineTransformConcat(self.view.transform, rotation);
self.view.hidden = FALSE;
[UIView commitAnimations]; 
```

我还尝试更改视图上的 alpha，但仍然没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:32:07.720

```
CGAffineTransform rotation = CGAffineTransformMakeRotation( angelToRotate(-90));   
[UIView animateWithDuration:0.4 animations:^
{
    self.view.transform = CGAffineTransformConcat(self.view.transform, rotation);
    self.view.alpha = 0.0;
}
completion:^(BOOL finished)
{
    self.view.alpha = 1.0;
}]; 
```

或者：

* * *

```
CGAffineTransform rotation = CGAffineTransformMakeRotation( angelToRotate(-90));
[UIView beginAnimations:nil context: NULL];
[UIView setAnimationDuration:0.4];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
self.view.transform = CGAffineTransformConcat(self.view.transform, rotation);
self.view.alpha = 0.0;
[UIView commitAnimations]; 
```

* * *

```
- (void) animationDidStop: (NSString *) animationID finished: (NSNumber *) finished context: (void *) context
{
    self.view.alpha = 1.0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:27:55.680

作为开始尝试带走 self.view.hidden = TRUE 如果我正确获取您的代码，动画应该消失并在 0.4 秒后重新出现？

在同一个功能上隐藏和显示不是这样工作的。

您可以调用另一个专门执行 self.view.hidden = FALSE 的函数

# winforms - WinForms ReportViewer 在 .NET 4.0 中是否有其他部署依赖项？

> ID：14696851
> 
> 赞同：10
> 
> 时间：2013-02-04T22:24:08.217
> 
> 标签：winforms, deployment, .net-4.0, reportviewer

我最近将包含本地报告的 WinForms 应用程序从 .NET 3.5 更新到 .NET 4.0。`Microsoft.ReportViewer.WinForms`我在应用程序目录中包含了、`Microsoft.ReportViewer.Common`和的 11.0 版程序集`Microsoft.ReportViewer.ProcessingObjectModel`，这是使用 .NET 3.5 部署此应用程序所需的全部内容，但在使用 .NET 4.0 但没有 VisualStudio 或 SQL Server 的目标计算机上出现以下错误：

```
TYPE: Microsoft.Reporting.WinForms.LocalProcessingException
MSG: An error occurred during local report processing.
SOURCE: Microsoft.ReportViewer.WinForms
SITE: EnsureExecutionSession
   at Microsoft.Reporting.WinForms.LocalReport.EnsureExecutionSession()
   at Microsoft.Reporting.WinForms.LocalReport.SetParameters(IEnumerable`1 parameters)
   at Ceoimage.Basecamp.MaintainDocumentIntegrity.ReportContainer._SetReportParameters(String departmentName, String footer)
   at Ceoimage.Basecamp.MaintainDocumentIntegrity.ReportContainer._RefreshReport(DataTable sourceTable, String sourceName, String reportResourceName, String departmentName, String footer)
   at Ceoimage.Basecamp.MaintainDocumentIntegrity.ReportContainer.ShowMissingReport(MissingFilesDataTable missingTable, String departmentName, String footer)
   at Ceoimage.Basecamp.MaintainDocumentIntegrity.DocumentIntegrityForm._HandleMissingComplete(Object sender, RunWorkerCompletedEventArgs e)

-- INNER EXCEPTION --
TYPE: Microsoft.Reporting.DefinitionInvalidException
MSG: The definition of the report '' is invalid.
SOURCE: Microsoft.ReportViewer.Common
SITE: CompileReport
   at Microsoft.Reporting.ReportCompiler.CompileReport(ICatalogItemContext context, Byte[] reportDefinition, Boolean generateExpressionHostWithRefusedPermissions, ControlSnapshot& snapshot)
   at Microsoft.Reporting.LocalService.GetCompiledReport(PreviewItemContext itemContext, Boolean rebuild, ControlSnapshot& snapshot)
   at Microsoft.Reporting.LocalService.CompileReport()
   at Microsoft.Reporting.LocalService.Microsoft.Reporting.ILocalProcessingHost.CompileReport()
   at Microsoft.Reporting.WinForms.LocalReport.EnsureExecutionSession()

-- INNER EXCEPTION --
TYPE: Microsoft.ReportingServices.ReportProcessing.ReportProcessingException
MSG: An unexpected error occurred in Report Processing.
SOURCE: Microsoft.ReportViewer.Common
SITE: CreateIntermediateFormat
   at Microsoft.ReportingServices.ReportProcessing.ReportProcessing.CreateIntermediateFormat(PublishingContext reportPublishingContext, IDataProtection dataProtection)
   at Microsoft.Reporting.ReportCompiler.CompileReport(ICatalogItemContext context, Byte[] reportDefinition, Boolean generateExpressionHostWithRefusedPermissions, ControlSnapshot& snapshot)

-- INNER EXCEPTION --
TYPE: System.IO.FileNotFoundException
MSG: Could not load file or assembly 'Microsoft.SqlServer.Types, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
SOURCE: Microsoft.ReportViewer.Common
SITE: Write
FILE: Microsoft.SqlServer.Types, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91
   at Microsoft.ReportingServices.ReportIntermediateFormat.Persistence.IntermediateFormatWriter.Write(Object obj, Boolean verify, Boolean assertOnInvalidType)
   at Microsoft.ReportingServices.ReportIntermediateFormat.ExpressionInfo.Serialize(IntermediateFormatWriter writer)
   at Microsoft.ReportingServices.ReportIntermediateFormat.Persistence.IntermediateFormatWriter.Write(IPersistable persistableObj, Boolean verify)
   at Microsoft.ReportingServices.ReportIntermediateFormat.Persistence.IntermediateFormatWriter.WriteVariantOrPersistable(Object obj)
   at Microsoft.ReportingServices.ReportPublishing.ReportPublishing.CreateHashForCachedDataSets()
   at Microsoft.ReportingServices.ReportPublishing.ReportPublishing.InternalCreateIntermediateFormat(Stream definitionStream, String& description, String& language, ParameterInfoCollection& parameters, DataSourceInfoCollection& dataSources, DataSetInfoCollection& sharedDataSetReferences, UserLocationFlags& userReferenceLocation, ArrayList& dataSetsName, Boolean& hasExternalImages, Boolean& hasHyperlinks, Byte[]& dataSetsHash)
   at Microsoft.ReportingServices.ReportPublishing.ReportPublishing.CreateIntermediateFormat(Byte[] definition, String& description, String& language, ParameterInfoCollection& parameters, DataSourceInfoCollection& dataSources, DataSetInfoCollection& sharedDataSetReferences, UserLocationFlags& userReferenceLocation, ArrayList& dataSetsName, Boolean& hasExternalImages, Boolean& hasHyperlinks, Byte[]& dataSetsHash)
   at Microsoft.ReportingServices.ReportProcessing.ReportProcessing.CompileOdpReport(PublishingContext reportPublishingContext, IDataProtection dataProtection, PublishingErrorContext errorContext, String& reportDescription, String& reportLanguage, ParameterInfoCollection& parameters, DataSourceInfoCollection& dataSources, DataSetInfoCollection& sharedDataSetReferences, UserLocationFlags& userReferenceLocation, ArrayList& dataSetsName, Boolean& hasExternalImages, Boolean& hasHyperlinks, Byte[]& dataSetsHash)
   at Microsoft.ReportingServices.ReportProcessing.ReportProcessing.CreateIntermediateFormat(PublishingContext reportPublishingContext, IDataProtection dataProtection) 
```

我尝试运行[Report Viewer 2012 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=35747)，但它也抱怨`Microsoft.SqlServer.Types`. 我不明白为什么我有这个新的依赖，即使这是一份本地报告。该代码不使用任何高级数据类型或任何超出它在仅需要这三个`Microsoft.ReportViewer.*`程序集的 .NET 3.5 版本中使用的数据类型。有人可以给我一个有限的要求列表，以使用 Report Viewer 部署 .NET 4.0 应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T06:33:07.827

您为 Report Viewer 2012 Redistributable 提供的链接在最底部有一些信息。

附加信息

服务器处理模式的先决条件 Microsoft SQL Server 2008 Reporting Services 或更高版本。NET Framework 3.5 SP1 或 .NET Framework 4.0 SQL Server 系统 CLR 类型包

看起来您缺少 SQL Server System CLR Types 包。它可以从 SQL Server 功能包下载——这里是功能包安装程序最新列表的链接。

[http://www.microsoft.com/en-us/download/details.aspx?id=26728](http://www.microsoft.com/en-us/download/details.aspx?id=26728)您将看到多个列表，具体取决于 x86 等。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T07:52:19.233

出现此错误的主要原因是项目或设置文件无法访问报表查看器 dll，因此请手动添加以下所有与报表查看器相关的 dll 文件

1.  Microsoft.ReportViewer.Common
2.  Microsoft.ReportViewer.ProcessingObjectModel
3.  Microsoft.ReportViewer.WinForms
4.  Microsoft.ReportViewer.DataVisualization

现在我希望这个错误能轻松解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T21:19:25.620

在管理 NuGet 包中添加：

1.  [Microsoft.SqlServer.Types](http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx)
2.  Microsoft.ReportViewer.Window。

# sql - SQL Server - 从一行中提取数据并更新另一行

> ID：14696854
> 
> 赞同：1
> 
> 时间：2013-02-04T22:24:15.430
> 
> 标签：sql, sql-server

我在 SQL Server 中有一个表，其中包含以下行和列（A 代码、Desc、长度和 B 代码）

**A-代码描述长度 B-代码**

A100 农村-3D 25 A100

A100 空 55 B100

** 在第一行 A 代码 = B 代码

** 在第二个 A-code<> B-Code 和 Desc 为 NULL

我想要做的是用 A-Code = B-Code 的第一行的 Desc 值更新第二行的 Desc 列（A-code<> B-Code）

这样我的决赛桌结果如下

## **A-代码描述长度 B-代码**

A100 农村-3D 25 A100

A100 **乡村-3D** 55 B100

请帮忙 。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:29:23.307

```
UPDATE a
SET a.[Desc] = b.[Desc]
FROM MyTable A
INNER JOIN MyTable B on a.[A-Code] = b.[A-Code] and b.[A-Code] = b.[B-Code]
WHERE a.[A-Code] <> a.[B-Code]
And a.[Desc] IS NULL; 
```

[SqlFiddle](http://sqlfiddle.com/#!3/1d71e/1)

# mysql - 为多对多关系插入多个值时如何避免重复 - mysql

> ID：14696857
> 
> 赞同：0
> 
> 时间：2013-02-04T22:24:26.850
> 
> 标签：mysql, sql, database

将关键字添加到 db. 我有 3 张桌子。

```
Articles
-ArticleID PK
-ArticleTitle
-ArticleBody

Keywords
-KeywordID PK
-Keyword UNIQUE

Keyword_Article
-KeywordID PK
-ArticleID 
```

试图弄清楚如何尽可能有效地更新关键字表。我现在只有 SQLBUDDY 可以使用。

我已经成功了

```
INSERT INTO Keywords (KeywordID, Keyword)
VALUES (NULL,'test');
INSERT INTO Keyword_Article (KeywordID, ArticleID)
VALUES ('LAST_INSERT_ID()','2222'); 
```

但是当我遇到一个已经存在的关键字时，这显然不起作用。我猜需要 if/else/then 或者是否有其他方法可以做到这一点。我已经阅读了存储过程，如果第一个表失败，它可以帮助阻止第二个表填充，但我似乎无法让它们在 SQLBUDDY 中工作。

例如。

```
BEGIN
INSERT INTO Keywords (KeywordID, Keyword)
VALUES (NULL,'test')
INSERT INTO Keyword_Article (KeywordID, ArticleID)
VALUES ('LAST_INSERT_ID()','2222');
COMMIT; 
```

不断报错。

进行这种多次插入的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:32:39.880

你可以这样做：

```
INSERT IGNORE INTO Keywords (Keyword)
VALUES ('test')
INSERT INTO Keyword_Article (KeywordID, ArticleID)
VALUES ((SELECT KeywordID FROM Keywords WHERE Keyword = 'test'),'2222'); 
```

这将尝试插入一个新关键字，但如果它已经存在则忽略它。第二个查询将始终找到 KeywordID，无论它是否是新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:37:17.553

你可以这样做：

```
-- Forces Keyword to be unique
CREATE UNIQUE INDEX Keywords_ndx ON Keywords(Keyword); 
```

进而：

```
-- Inserts keyword into Keywords, failing silently if duplicated
INSERT IGNORE INTO `Keywords` (`Keyword`) VALUES ('test');

-- Retrieves that keyword's ID, be it newly inserted or duplicated.
INSERT IGNORE INTO Keyword_Article (KeywordID, ArticleID)
    SELECT KeywordID, 2222 FROM Keywords WHERE Keyword='test'; 
```

`Keyword_Article`将两个字段都作为主键。您仅将 KeywordID 声明为 PK，但这样一来，您就不能拥有具有相同关键字的两篇文章，这看起来很奇怪，并且可能导致不良行为。

# c++ - 静态函数

> ID：14696859
> 
> 赞同：0
> 
> 时间：2013-02-04T22:24:31.750
> 
> 标签：c++, static

```
class A
{
public:
static bool S(int);
static string str;
static int integer;

};

bool A::S(int)
{
   str+="A";

} 
```

当我构建程序时，发生错误：“str”未声明的标识符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:41:57.563

暂时忽略类型未定义，即使`int`仅使用 s，您仍然会收到此错误。

您看到的错误是因为您缺少静态变量的**定义**。你只**声明**了它。

```
 string A::str = "initial value"; 
```

请参阅：[定义和声明之间有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:40:48.613

可能你有不止一个错误，而你关注的那个是最不重要的：

*   错误第 5 行：`string`未命名类型
*   错误第 12 行：`str`未声明。

未定义，因为用于定义它的`str`类型不存在。

解决方案是添加

```
#include <string>
using namespace std; 
```

在文件的开头（不是我推荐该`using`行，但那是另一个故事）。

您应该始终将注意力集中在编译器问题的第一个错误上。但是一些流行的 IDE 值得注意的是对它们进行重新排序。

# ruby-on-rails - 更新时间戳值时的未定义方法“更改”：Fixnum

> ID：14696863
> 
> 赞同：2
> 
> 时间：2013-02-04T22:24:47.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, oauth-2.0, omniauth, google-oauth

我在一个项目中使用 Google 的 OAuth2 API，使用 Omniauth 轻松创建初始帐户，但为了使用 API，我需要刷新 access_token，因为它们仅在一个小时内有效，但我刷新令牌时更新 expires_at 值时出现问题。

这是我用于请求令牌刷新的代码：

```
require 'oauth2'
class Identity < ActiveRecord::Base
belongs_to :user
  def refresh_access_token
    case self.provider
      when "google"
        client = OAuth2::Client.new OAUTH_KEYS_CONFIG['google']['client_id'], 
                                    OAUTH_KEYS_CONFIG['google']['client_secret'],
                                    {
                                      :site => 'https://accounts.google.com',
                                      :authorize_url => "/o/oauth2/auth",
                                      :token_url => "/o/oauth2/token"
                                    }
        response = OAuth2::AccessToken.from_hash(client, :refresh_token => self.refresh_token).refresh!

        self.update_attribute(:access_token, response.token)
        self.update_attribute(:expires_at, Time.at(response.expires_at))
    end
  end
end 
```

我在 :expires_at 的最终 update_attribute 行上收到`undefined method 'change' for 1359936923:Fixnum`错误（我将其从上面的行中拆分出来以尝试找出问题）。

我已经尝试了上面的`update_attribute`调用，也尝试了一个简单的`self.expires_at = response.expires_at`，有和没有`Time.at`强制转换，但所有组合都会导致相同的错误。

:expires_at 属性是 Timestamp 数据类型。我检查了`response`变量，据我所知，它包含正确的时间戳：

```
--- !ruby/object:OAuth2::AccessToken
...
expires_in: 3600
expires_at: 1360019618
options:
  :mode: :header
  :header_format: Bearer %s
  :param_name: bearer_token
... 
```

堆栈跟踪

```
activerecord (3.2.11) lib/active_record/attribute_methods/time_zone_conversion.rb:69:in `round_usec'
activerecord (3.2.11) lib/active_record/attribute_methods/time_zone_conversion.rb:46:in `expires_at='
activerecord (3.2.11) lib/active_record/persistence.rb:180:in `update_attribute'
app/models/identity.rb:69:in `refresh_access_token'
app/controllers/sessions_controller.rb:30:in `create'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:414:in `_run__3108124736639590412__process_action__2258996443485139522__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
omniauth (1.1.1) lib/omniauth/strategy.rb:394:in `call_app!'
omniauth (1.1.1) lib/omniauth/strategy.rb:356:in `callback_phase'
omniauth-oauth2 (1.1.1) lib/omniauth/strategies/oauth2.rb:77:in `callback_phase'
omniauth (1.1.1) lib/omniauth/strategy.rb:219:in `callback_call'
omniauth (1.1.1) lib/omniauth/strategy.rb:175:in `call!'
omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
omniauth (1.1.1) lib/omniauth/builder.rb:48:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.4) lib/rack/etag.rb:23:in `call'
rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__2408988688759615157__call__236505231918019627__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.4) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.4) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.4.4) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
thin (1.5.0) lib/thin/connection.rb:81:in `block in pre_process'
thin (1.5.0) lib/thin/connection.rb:79:in `catch'
thin (1.5.0) lib/thin/connection.rb:79:in `pre_process'
thin (1.5.0) lib/thin/connection.rb:54:in `process'
thin (1.5.0) lib/thin/connection.rb:39:in `receive_data'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
thin (1.5.0) lib/thin/backends/base.rb:63:in `start'
thin (1.5.0) lib/thin/server.rb:159:in `start'
rack (1.4.4) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.4) lib/rack/server.rb:268:in `start'
railties (3.2.11) lib/rails/commands/server.rb:70:in `start'
railties (3.2.11) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.11) lib/rails/commands.rb:50:in `tap'
railties (3.2.11) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:03:09.177

如果您可以侥幸成功，您可以关闭属性 expires_at 的时区感知。

```
class Identity < ActiveRecord::Base
  self.skip_time_zone_conversion_for_attributes = [:expires_at]
end 
```

我们看到了同样的问题，因为我们有一个 Android 应用程序将 Epoch 时间发送回我们的网站。关闭该属性的时区转换消除了错误，到目前为止似乎对数据没有不良影响。当然，我们将所有内容都存储在 UTC 中，到目前为止，这似乎是唯一的解决方法。

一些资源：

*   [http://api.rubyonrails.org/classes/ActiveRecord/Timestamp.html](http://api.rubyonrails.org/classes/ActiveRecord/Timestamp.html)
*   [https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb)

# php - 这是一个显示发送者和接收者消息的聊天框设计

> ID：14696864
> 
> 赞同：0
> 
> 时间：2013-02-04T22:24:46.777
> 
> 标签：php, jquery, html, mysql, css

基本上，这段代码有效，但它以相同的颜色显示发送者和接收者我想要什么？我希望发件人颜色与收件人消息颜色不同

```
<?php

require_once 'cn.php';

session_start(); // startsession .line17 (username || usernameto='.$username.')

//messages sent or received by the $_SESSION or $_GET["ident"]..line 26

require_once 'protect.php';

$username=$_SESSION['UserID'];

$fiveMinutesAgo = time() - 1000;

$to=$_SESSION['UserTo'];

$sql = 'SELECT

    username, message_content,message_file, message_time,usernameto

        FROM

    messages

        WHERE

    message_time > ' . $fiveMinutesAgo . '

    and ((username='.$username.'

        and usernameto='.$to.') or (usernameto='.$username.'

        and username='.$to.'))

        ORDER BY
    message_time';

    $result = mysql_query($sql, $cn) or

    die(mysql_error($cn));

    //mysql_query ("Update messages set message_file= replace(message_file,' ','');

    while ($row = mysql_fetch_assoc($result)) {

    $hoursAndMinutes = date('g:ia', $row['message_time']);

    $mycontent=$row['message_content'];

    $myfile=$row['message_file'];

    $playfile="<A href=upload/$myfile> $myfile </A>";
/*************************************************************************************************/

    echo '<i><p style="font-family:arial;color:purple;font-size:15px;"><strong>' . $row['username']. '</strong>: <em>(' . $hoursAndMinutes . ')</em> ' . $playfile . $mycontent.'</i></p>';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:32:19.357

假设`$username`您的列用户名包含用户 ID：检查是否`$username`与`$row['username']`. 如果是，则您的消息来自发件人。

```
if ($row['username'] == $username)
    $color = 'red';
else
    $color = 'purple';

echo '<i><p style="font-family:arial;color:'.$color.';font-size:15px;"><strong>' . $row['username']. '</strong>: <em>(' . $hoursAndMinutes . ')</em> ' . $playfile . $mycontent.'</i></p>'; 
```

另外：此扩展自 PHP 5.5.0 起已弃用，将来将被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。

[http://www.php.net/manual/en/function.mysql-query.php](http://www.php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:32:51.203

您需要知道发件人姓名何时与打开会话的人相同，如果发件人姓名为接收者

# c# - 二进制写入器中未指定路径时文件位于何处？

> ID：14696868
> 
> 赞同：0
> 
> 时间：2013-02-04T22:24:58.270
> 
> 标签：c#, asp.net, .net

我试图查看生成 PE 的 bin 文件夹，但它没有保存在那里，我正在使用 ASP.NEt webforms

```
string tempExcelFilePath = "tempExcel.xls";
FileStream fs = new FileStream(tempExcelFilePath, FileMode.Create, FileAccess.ReadWrite);
BinaryWriter bw = new BinaryWriter(fs);
bw.Write(fileBytes);//fileBytes is an array of bytes= byte[]
bw.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:32:03.250

C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\tempExcel.xls

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:23:45.173

文件的完整路径存储`fs.Name`在您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:28:09.043

一般来说，当你给一个 Windows API 调用一个不包含任何路径信息的文件名（并且`FileStream`构造函数最终调用 Windows 函数）时，它会在当前目录中查找文件，这是一个每个进程的设置，它决定了，当前目录。对于相对路径也是如此（也就是说，如果您已将“SubFolder\tempExcel.xls”指定为文件名。

您可以使用`System.Environment.CurrentDirectory`属性或`System.IO.Directory.GetCurrentDirectory()`方法轻松确定代码中的当前目录。您也可以使用相同的属性设置它（对于整个过程，不要忘记），或者`System.IO.Directory.SetCurrentDirectory()`

默认情况下，我相信当前目录将设置为启动进程的 EXE 的位置 - 但有些事情可能会改变 - 例如快捷方式的“起始文件夹”参数。或之前在进程中运行并设置当前目录的任何其他代码。FilePicker 对话框倾向于这样做。

# java - 从 jpanel 获取 (g) 图形

> ID：14696870
> 
> 赞同：2
> 
> 时间：2013-02-04T22:25:12.403
> 
> 标签：java, swing, graphics

如何从 java 中的 jpanel 中获取 g 元素，如何将其传递给在其上绘制的另一个对象并将其传回。为了清楚起见，我可以使用 g 或 graphics 在 jpanel 上绘制；但似乎无法将其传递给另一个对象以在其他地方绘制它。在此先感谢，我已经搜索了解决方案，但找不到任何东西，可能是我没有使用正确的术语，抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:29:20.253

`Graphics`将对象从 a传递`JPanel`到另一个（辅助）对象的最简洁方法是从`paintComponent`方法传递对象。这样，您就可以确定对象将始终被实例化。

```
@Override
public void paintComponent(Graphics g) {
   super.paintComponent(g);
   myGraphicsHelper.drawStuff(g);
} 
```

# z3 - 匿名函数

> ID：14696871
> 
> 赞同：1
> 
> 时间：2013-02-04T22:25:24.313
> 
> 标签：z3

我发现 Yices 中对匿名函数（lambda 表达式）的支持非常有帮助。我现在正在尝试使用 Z3 来实现一个工具，但我无法确定是否支持此功能。我正在使用 -smt2 标志调用该工具。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:16:39.643

AFAIK，Z3 既不支持 lambda 表达式（请参阅主要 Z3 开发人员之一 Nikolaj Bjorner 的[回答](https://stackoverflow.com/a/11365030/491216)），它们也不是 SMTLib2 标准的一部分。支持 lambda 表达式的求解器（例如 Yices 或 veriT）支持将它们作为 SMTLib2 标准的自定义扩展。

根据您的需求（您可能想通过在问题中添加示例来说明），您可以尝试 Z3 宏 ( `define-fun`) 或 Z3Py 之类的前端[，](http://rise4fun.com/z3py)与手动编写 SMTLib 代码相比，它大大简化了 Z3 的使用。

# git-merge - 错误：以下未跟踪的工作树文件将被合并覆盖：

> ID：14696872
> 
> 赞同：2
> 
> 时间：2013-02-04T22:25:24.893
> 
> 标签：git-merge, railstutorial.org

在此先感谢您的帮助！

我刚刚完成 Rails 教程的第 6 章：

[http://ruby.railstutorial.org/chapters/modeling-users#sec-6_4](http://ruby.railstutorial.org/chapters/modeling-users#sec-6_4)

我跑了：

```
❤ git checkout master 
```

一切顺利，然后我跑了：

```
❤ git merge modeling-users 
```

并得到以下错误：

```
Updating fc9f72a..90d1ba6
error: The following untracked working tree files would be overwritten by merge:
        app/models/user.rb
Please move or remove them before you can merge.
Aborting 
```

这是我的 app/models/user.rb 文件：

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

现在我的 Sublime Text 2 user_spec.rb 和 application_helper_spec.rb 文件不会保存并出现以下错误：

> 无法保存 ~/code/rails_projects/sample_app/spec/models/user_spec.rb

user_spec.rb：

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com", 
                     password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:authenticate) }

  it { should be_valid }

  describe "when name is not present" do
    before { @user.name = " " * 51 }
    it { should_not be_valid }
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@bax.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end
      end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end      
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

  describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }

      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end
end 
```

和我的 application_helper_spec.rb 文件：

```
require 'spec_helper'

describe ApplicationHelper do

  describe "full_title" do
    it "should include the page title" do
      full_title("foo").should =~ /foo/
    end

    it "should include the base title" do
      full_title("foo").should =~ /^Ruby on Rails Tutorial Sample App/
    end

    it "should not include a bar for the home page" do
      full_title("").should_not =~ /\|/
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T03:23:12.187

发生错误`The following untracked working tree files would be overwritten by merge`是因为`app/models/user.rb`文件夹中有一个文件当前未添加到任何分支。

`git status`您可以通过运行命令来验证这一点；它应该显示类似于以下内容的输出：

```
$ git status
# On branch master
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   app/models/user.rb
no changes added to commit (use "git add" and/or "git commit -a") 
```

当您运行时`git merge modeling-users`，它会尝试将分支合并`modeling-users`到`master`分支。该`modeling-users`分支已经包含了一个副本`app/models/user.rb`。合并命令使它用`modeling-users`分支中已经存在的文件覆盖文件的未跟踪版本。因此，错误消息会警告您可能会丢失您想要保留的东西。

如消息所示，通过运行命令`git status`将文件添加到主分支。`git add app/models/user.rb`

该`Unable to save ~/code/rails_projects/sample_app/spec/models/user_spec.rb`消息似乎与此无关。从错误消息中无法得出什么结论；也许其他地方有更多信息。

关闭项目并重新打开它可能会有所帮助。您可能还想尝试将文件保存在不同的编辑器中（也许是 vim？）

# node.js - 在 Mongoose 模式中为数组字段设置选项

> ID：14696874
> 
> 赞同：2
> 
> 时间：2013-02-04T22:25:45.220
> 
> 标签：node.js, mongoose

如何将诸如`required: true`或之类`default`的选项传递给**Array 字段**？

[请参阅此处](http://mongoosejs.com/docs/schematypes.html#arrays)的文档，它仅显示如下示例：

```
ArrayOfString: [String] 
```

但我希望能够做这样的事情：

```
ArrayOfString: { type: [String], required: true, default: ['one', 'two', 'three'] } 
```

也许那是有效的，但文档中没有类似的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:52:34.627

我将它与 Mongoose 2.4.9 版一起使用，它使用以下语法

```
ArrayOfString: {type: Array, default: ['a','b','c','d']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:51:54.423

据我所知，猫鼬不会自省数组来确定它们是否稀疏或其他。这可能是您必须使用预保存挂钩的事情。

编辑：我可能误解了你的问题。您是否只是单纯地寻找该领域中是否存在任何阵列？

# kineticjs - 从输入改变宽度阶段

> ID：14696875
> 
> 赞同：0
> 
> 时间：2013-02-04T22:25:45.113
> 
> 标签：kineticjs

有人可以帮助我吗？

我有一个舞台和图像，我想从输入中更改宽度和高度。这是代码，它不起作用：/帮助我。）

var stage = new Kinetic.Stage({ container: 'containerCreator', width: imageWidth, height: imageHeight });

```
var layer = new Kinetic.Layer();

var imageObj = new Image();
imageObj.onload = function(){
  var yoda = new Kinetic.Image({
    x: 0,
    y: 0,
    image: imageObj,
    width: imageWidth,
    height: imageHeight
  });

  layer.add(yoda);
  layer.add(vrchnyText);
  stage.add(layer);  

  };
  imageObj.src = imageSource;

  $('#vrchCreator').keyup(function(){

    stage.width = $(this).val();        
    stage.height= $(this).val();    
    layer.add(yoda);
    stage.add(layer); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:54:41.407

您想将其更改为：

```
$('#vrchCreator').keyup(function()
{ 
   stage.setWidth(parseInt($(this).val()));
   stage.setHeight(parseInt($(this).val()));
   layer.add(yoda);
   stage.add(layer);  

}); 
```

# c++ - xtgmath.h：将项目从 VS 2010 转换为 VS 2012 时出现错误 C2059

> ID：14696879
> 
> 赞同：1
> 
> 时间：2013-02-04T22:26:04.293
> 
> 标签：c++, c, visual-studio-2010, visual-studio-2012, compiler-errors

在我的工作中，我正在将一个项目从 VS 2010 Express 迁移到 VS 2012 Professional。尝试编译时，我在 xtgmath.h 文件中收到以下错误：

xtgmath.h(70): 错误 C2059: 语法错误: '('

我在网上搜索没有找到任何解释或解决方案。我很困惑，因为这是一个标准的头文件。这是崩溃的头文件中的代码片段。它为使用 math.h 库的每个文件提供了其中三个错误。当我将鼠标悬停在 __cdecl、__CRTDECL 和 __CRTDECL 上时，智能感知给了我一个错误，上面写着：“错误：嵌套声明符可能不遵循调用约定”

```
extern "C" double __cdecl pow(_In_ double, _In_ double);
float __CRTDECL  pow(_In_ float, _In_ float);
long double __CRTDECL  pow(_In_ long double, _In_ long double); 
```

我非常感谢任何帮助！

# jquery-mobile - JQuery Mobile 中的多行多列按钮组

> ID：14696883
> 
> 赞同：0
> 
> 时间：2013-02-04T22:26:18.587
> 
> 标签：jquery-mobile, button, buttongroup

如何在 Jquery Mobile 中创建 6 个按钮的多行 (2) 和多列 (3) 按钮组？按钮需要连接并且必须具有相同的大小。这是一个草图：

![在此处输入图像描述](../Images/6a072da600a30231bc9947e6895bed5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:26:18.587

两个三项[导航栏](http://jquerymobile.com/test/docs/toolbars/docs-navbar.html)可以解决问题：

```
<div style="margin:20px">
  <div data-role='navbar'>
    <ul>
      <li><button>A</button></li>
      <li><button>B</button></li>
      <li><button>C</button></li>
    </ul>
  </div>
  <div data-role='navbar'>
    <ul>
      <li><button>D</button></li>
      <li><button>E</button></li>
      <li><button>F</button></li>
    </ul>
  </div>
</div> 
```

# java - 在 FXML 中以声明方式设置样式表

> ID：14696884
> 
> 赞同：21
> 
> 时间：2013-02-04T22:26:20.637
> 
> 标签：java, css, javafx-2

在 HTML 中，我们习惯于以编程方式设置样式表，例如

```
<link rel="stylesheet" ... > 
```

但是我为 JavaFX 找到的设置样式表的示例需要以编程方式设置样式表，例如

```
scene.getStylesheets().add("/resources/shell.css"); 
```

是否可以像在 HTML 中那样在 FXML 中设置样式表？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-04T23:06:01.113

您可以使用以下方法[在父节点上设置样式表](http://docs.oracle.com/javafx/2/api/javafx/scene/Parent.html#getStylesheets%28%29)：

```
parent.getStylesheets().add("/resources/shell.css"); 
```

因为 FXML 中可用的元素和属性派生自公共 JavaFX Java API，所以您还可以使用 FXML 样式表元素（或可互换的属性）将样式表分配给父节点。由于所有容器都扩展了 Parent，因此您可以在 FXML 中引用的任何容器上设置一个或多个自定义样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>
   ....
<?scenebuilder-stylesheet fruitcombo.css?>

<AnchorPane prefHeight="205.0" prefWidth="168.0"
   styleClass="layout"
   fx:controller="fruit.FruitComboController"
   xmlns:fx="http://javafx.com/fxml">
   <children>
      ....
   </children>
   <stylesheets>
      <URL value="@fruitcombo.css" />
   </stylesheets>
</AnchorPane> 
```

有关从 fxml 文件引用 css 文件的完整可执行示例，请参阅[此示例中的 fxml 文件。](https://gist.github.com/3062859)

上面的代码中有几个不错的特性：

样式表 URL 中奇怪的`@`前缀并不是绝对需要的，但可以用来利用 JavaFX 的[location resolution](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#location_resolution)。“位置解析运算符（由属性值的“@”前缀表示）用于指定应将属性值视为相对于当前文件的位置，而不是简单的字符串。”

以下行在运行时不是必需的，但如果您使用该工具， [SceneBuilder 工具会在设计时使用以下行来定位所需的 css 样式表：](http://www.oracle.com/technetwork/java/javafx/tools/index.html)

```
<?scenebuilder-stylesheet fruitcombo.css?> 
```

**关于评论的更新**

> 警告：它是 FXML 1.0，它在 2.0 中不起作用，javafx.fxml.LoadException：URL 不是有效类型。

我认为这个评论有点不正确。据我所知，目前没有 FXML 2.0 这样的东西。

评论者收到 LoadException 的原因是因为这篇文章中的指示性片段没有将`java.net.URL`类导入 FXML 文档。我更新了片段以包含`java.net.URL`导入并添加更多省略号`....`以阐明片段的意图。[省略号](http://en.wikipedia.org/wiki/Ellipsis)的意思是“一系列点，通常表示故意省略文本中的单词、句子或整个部分而不改变其原始含义”。

为了最好地理解这个答案，建议编译并运行链接的示例代码。

**警告不要在 FXMLLoader 中使用 InputStream 加载函数**

我强烈建议使用位置构造一个新的[FXMLLoader](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#FXMLLoader-java.net.URL-)，而不是使用[FXMLLoader.load(InputStream)](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.io.InputStream-)函数。使用静态 load() 函数时，由于 FXML 文件没有基本位置，因此无法解析相对位置引用。

即，不要这样做：

```
 InputStream input = this.getClass().getResourceAsStream("layout.fxml");
 FXMLLoader loader = new FXMLLoader.load(input);
 Parent content = loader.load(); 
```

而是这样做：

```
 String url = this.getClass().getResource("layout.fxml").toExternalForm();
 FXMLLoader loader = new FXMLLoader(url);
 Parent content = loader.load(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-04T22:49:21.650

[是的，请参见本教程](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)的示例 4-8 ，通过将以下属性应用于节点：

```
stylesheets="fxmlexample/Login.css" 
```

例如

```
<GridPane stylesheets="fxmlexample/Login.css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-05T05:41:23.520

如果您打算将 fxml 与 JavaFX 一起使用，则需要一些时间来下载和使用 SceneBuilder。一旦你这样做了，css 样式表的使用就变得简单了。当然，使用 NetBeans，因为在 SceneBuilder 运行时，在 NetBeans dxml 样板应用程序中打开预构建的 dxml 文件会导致它自动打开以在 SceneBuilder 中进行编辑。一旦你删除了所有的 StackPlane、按钮和标签并放入你真正想要的控件和容器，只需将样式表直接添加到 SceneBuilder。在主菜单的预览下，有一个 CSS 样式表的菜单选择。选择它会弹出一个子菜单，可以让您加载样式表文件。

加载文件后，控件将根据样式表中的规则显示为皮肤，除非您在 SceneBuilder 的属性部分中选择每个控件并声明该样式表应用于该控件，否则它们不会显示该皮肤。然后样式将在应用程序运行时显示。

# security - 基于 ssh 密钥的网站访问？

> ID：14696889
> 
> 赞同：3
> 
> 时间：2013-02-04T22:26:30.407
> 
> 标签：security, web, ssh, ssh-keys

有没有办法根据 ssh 密钥限制对网站的访问？ssh 的工作方式完全相同：

*   如果您有密钥，则授予访问权限——无密码
*   如果您没有密钥，访问被拒绝

如果不是，满足上述条件的最佳替代方案是什么？使用 htuser 会更好吗？我不能根据 IP 地址限制访问，因为访问该站点的人很可能并不总是拥有相同的 IP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:28:38.853

当然，使用[Mutual-SSL-Authentication](http://www.codeproject.com/Articles/326574/An-Introduction-to-Mutual-SSL-Authentication)，您可以使用 SSL 证书保护您的网站。

我不知道你的环境，但这里有一篇关于如何[在 Tomcat 上执行相互身份验证](http://techannotation.wordpress.com/2012/06/22/tomcat-mutual-authentication-over-ssl/)的非常详细的文章。

# opengl - 延迟渲染是否需要位置缓冲区？

> ID：14696892
> 
> 赞同：1
> 
> 时间：2013-02-04T22:26:36.663
> 
> 标签：opengl, glsl, deferred-rendering

我试图通过将屏幕空间点投影回视图空间以与照明一起使用来避免使用位置缓冲区。我试过乘以逆投影矩阵，但这并没有返回视图空间点。添加矩阵乘法以避免位置缓冲区是否值得？

最终通道着色器：

```
vec3 ScreenSpace = vec3(0.0,0.0,0.0);
ScreenSpace.xy = (texcoord.xy * 2.0) - 1.0;
ScreenSpace.z  = texture2D(depthtex, texcoord.xy);
vec4 ViewSpace = InvProjectionMatrix * vec3(ScreenSpace, 1.0);
ViewSpace.xyz = ViewSpace.w; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:57:01.230

你的大部分答案都可以在[这个答案](https://stackoverflow.com/questions/14523588/calculate-clipspace-w-from-clipspace-xyz-and-inv-projection-matrix/14530631#14530631)上找到，这个答案太长而且涉及到重新发布。但是，您的部分问题是您正在使用`texcoord`而不是`gl_FragCoord`.

您想使用`gl_FragCoord`，因为OpenGL*保证*这是正确的值（假设您的延迟通道和照明通道使用相同大小的图像），无论如何。此外，它使您不必将值从顶点着色器传递到片段着色器。

缺点是您需要输出屏幕的大小来解释它。但这[很容易](http://www.opengl.org/wiki/Sampler_%28GLSL%29#Texture_size_retrieval)，再次假设两次传递使用相同大小的图像：

```
ivec2 size = textureSize(depthtex, 0); 
```

您可以使用`size`视口的大小来转换`gl_FragCoord.xy`为纹理坐标和窗口空间位置。

# java - Java服务器/客户端发送数组，签入签出

> ID：14696893
> 
> 赞同：2
> 
> 时间：2013-02-04T22:26:43.767
> 
> 标签：java, android

我有一个小问题，我已经设法将信息从客户端发送到服务器等......但我也希望能够通过 telnet 来做到这一点（打开它并说 go telnet 127.0.0.1 4444，然后输入 1 2 3 然后它出现在服务器中，就像通过客户端发送一样。目前我收到此错误：

```
java.io.StreamCorruptedException: invalid stream header: 310D0A32
at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
at java.io.ObjectInputStream.<init>(Unknown Source)
at ConnectionHandler.run(server1.java:73)
at java.lang.Thread.run(Unknown Source) 
```

如果我做错了什么，请告诉我：

我的主要目标是拥有它，这样我就可以输入用户名、ID 和姓名，然后能够在一段时间内回忆它们，就像一个非常简单的签入签出系统。真的很想得到一些帮助<3 :)

客户：

```
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.io.BufferedReader;
import java.io.InputStreamReader;
public class client1 {

public static void main(String[] args) {
    try {
// Create a connection to the server socket on the server application
        Socket socket = new Socket("localhost", 7777);

// Send a message to the client application
        ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
        //oos.writeObject("A B C");
        String data[]=new String[3];
        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter details for the array");
        for(int x=0;x<3;x++){
            System.out.print("Enter word number"+(x+1)+":");
            data[x]=br.readLine();
        }
        oos.writeObject(data);
        System.out.println("Details sent to server...");
        oos.close();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

服务器：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.lang.ClassNotFoundException;
import java.lang.Runnable;
import java.lang.Thread;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

public class server1
{
private ServerSocket server;
private int port = 4444;

public server1()
{
    try
    {
        server = new ServerSocket(port);
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

}

public static void main(String[] args)
{
    server1 example = new server1();
    example.handleConnection();
}

public void handleConnection() 
{
    System.out.println("Waiting for client message got...");

// The server do a loop here to accept all connection initiated by the

// client application.
    while (true) 
    {
        try
        {
            Socket socket = server.accept();
            new ConnectionHandler(socket);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
  }
}

class ConnectionHandler implements Runnable 
{
private Socket socket;
public ConnectionHandler(Socket socket)
{
    this.socket = socket;
    Thread t = new Thread(this);
    t.start();
}
public void run()
{
    try
    {
// Read a message sent by client application
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        String message[] = (String[]) ois.readObject();
        //System.out.println("Message Received from client: " + message);
        //b(message);
                    printArray(message);    
        ois.close();
        socket.close();
        System.out.println("Waiting for client message is...");
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
    catch (ClassNotFoundException e) 
    {
        e.printStackTrace();
    }
}
private void b(String message) {
     List<String> list = new ArrayList<String>();
        String[] arr = list.toArray(new String[0]);
        System.out.println("Array is " + Arrays.toString(arr));

}
    private void printArray(String[] arr){
       for(String s:arr){
          System.out.println(s);
        }
} 
```

# file - 了解加密文件，使用 LockBox 3 和 Delphi XE2

> ID：14696895
> 
> 赞同：-2
> 
> 时间：2013-02-04T22:26:55.303
> 
> 标签：file, encryption, delphi-xe2, lockbox-3

因此，我当前的任务涉及获取给定的文本字符串（例如：ABC123）并使用 LockBox3 的 EncryptString(source, target) 函数对其进行加密。我可以成功加密字符串并将输出保存到 .txt 文件中。

此过程的下一步是使用 LockBox3 的 EncryptFile(source, target) 函数获取包含我已经加密的字符串的 .txt 并使用 AES-128 加密所述文件（与字符串加密相同，但密码不同）

基本上，我可以让字符串正确加密并输出到 .txt 文件。然后我请求用户获取 .txt，并将其带入我的程序。然后程序会尝试获取该文件并进一步加密它。当我这样做时，我得到一个要输出的文件..但是当我去解密所述文件时，生成的 .txt 不包含原始文本..或任何与此相关的文本。我基本上对应该如何加密 .txt 文件感到困惑。有什么建议么？如果这个问题/代码不够具体，我深表歉意。请让我知道还有什么，如果我需要澄清一下情况，以便更好地帮助你们了解我正在努力解决的问题！谢谢！

编辑1：

好的，谢谢大家的建议。澄清：

我在解密过程中拥有的流将在以后使用，以便在我解密文件后，我可以从中读取并解密剩余的加密（从第一步开始）字符串。

进一步澄清：

我用于加密字符串的编解码器（Codec1）使用带有 CBC 的 AES-128，标签为“0”，AsymetricKeySize 为 1024（我很确定这与这种类型的加密无关正确吗？）我用于加密文件的编解码器（上面的 Codec2）具有相同的设置，但是 Codec1 和 Codec2 的密码不同。基本上，我使用 Codec1 加密字符串并将其写入 .txt，然后使用 Codec2 加密所述文件..最终解密它并使用 Stream 从所述文件中读取并再次使用 Codec1 解密该字符串。

我的文件加密/解密代码：

**字符串加密：**

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  codec1.Password := WORD_1;
  //Begin encryption
  sPlainText := Serial_number.Number;         //Store Serial Number of machine 
  codec1.EncryptString(sPlainText,CipherText);   //Encrypt (base64)
  listbox2.Clear;
  listbox2.AddItem(Ciphertext, AnsiCipher);
  end; 
```

**将加密字符串写入文件并保存：**

```
saveDialog := TSaveDialog.Create(self);
  saveDialog.Title := 'Choose location to save Authentication Code';
  saveDialog.InitialDir := 'C:\';
  saveDialog.DefaultExt := '';
  saveDialog.FilterIndex := 1;
  saveDialog.Execute();
  glb_fileName1 := saveDialog.FileName;
 //open stream and write cipher to a .txt of chosen location
  try
    Stream := TFileStream.Create(saveDialog.GetNamePath + saveDialog.FileName + '.txt', fmOpenReadWrite);
  except
    Stream := TFileStream.Create(saveDialog.GetNamePath + saveDialog.FileName + '.txt', fmCreate);
  end;
    for k := 1 to (Length(CipherText)) do
        buff[k] := byte(CipherText[k]);
    ptr := @buff[1];
    Stream.WriteBuffer(ptr^, Length(CipherText));
  Stream.Free;
  saveDialog.Free; 
```

**获取 .txt 的位置以进行文件加密：**

```
procedure TForm1.Button4Click(Sender: TObject);
var
  fileName : string;
  holder_obj : TSerial_number;
begin
  holder_obj := Tserial_number.Create;
  listbox4.Clear;

if OpenTextFileDialog1.Execute() then
   fileName := OpenTextFileDialog1.FileName;     
   listbox4.AddItem(filename, holder_obj);
end; 
```

**文件加密：**

```
 Codec2.Password := WORD_2;
  sCrypt := glb_fileName1 + '_enc.txt';
  Codec2.EncryptFile(glb_fileName1+'.txt', sCrypt); 
```

**抓取加密文件进行解密：**

```
procedure TForm1.Button3Click(Sender: TObject);
var
  holder_obj : TSerial_number;
begin
  holder_obj := Tserial_number.Create;
  listbox3.Clear;
if OpenTextFileDialog1.Execute() then
   glb_fileName2 := OpenTextFileDialog1.FileName;
   listbox3.AddItem(glb_filename2, holder_obj);
end; 
```

**文件解密（打开一个流以从解密文件中读取它，以便我可以解密它包含的加密字符串）：**

```
procedure TForm1.Button5Click(Sender: TObject);
var
  saveDialog : TSaveDialog;
begin
  saveDialog := TSaveDialog.Create(self);
  saveDialog.Title := 'Choose location to save Decrypted Authentication Code';
  saveDialog.InitialDir := 'C:\';
  saveDialog.DefaultExt := '';
  saveDialog.Execute();
  glb_fileName1:= saveDialog.FileName;
 //open stream and write cipher to a .txt of chosen location
  try
    Stream := TFileStream.Create(saveDialog.GetNamePath + saveDialog.FileName + '.txt', fmOpenReadWrite);
  except
    Stream := TFileStream.Create(saveDialog.GetNamePath + saveDialog.FileName + '.txt', fmCreate);
  end;
  Stream.Free;

  Codec2.Password := WORD_2;
  Codec2.DecryptFile(glb_fileName2, saveDialog.FileName + '.txt');
  saveDialog.Free;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:48:07.977

您提供的代码很复杂，无法尝试查看问题所在。如果你只是想看看编码/解码是否有效，你应该只需要像下面的代码这样的简单代码。只需将测试文件放在驱动器上并硬编码名称即可。如果 InputFile.txt 和 Un-EncryptedFile.text 相同，这将使您知道编码/解码有效。

完成工作后，您就可以开始建立完整的例程了。您发布的代码确实与在按钮单击之间使用的全局变量以及刚刚命名为 1、2 等的全局变量混淆了。您创建的流什么都不做，只会使问题更加混乱。将事情回归基础并首先使其发挥作用。

```
procedure TestEncodeDecode();
begin
  Codec2.Password := WORD_2;
  Codec2.EncryptFile('c:\InputFile.txt', 'c:\EncryptedFile.txt');
  Codec2.DecryptFile('c:\EncryptedFile.txt', 'c:\Un-EncryptedFile.txt');
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:49:38.053

我也很困惑你的问题在问什么。冒着误解您的问题的风险，我假设您正在尝试：

1.  加密一个字符串；
2.  将加密的字符串存储在文件中
3.  加密文件（双重加密）
4.  反转前面的步骤以重建原始字符串。

该`selftest()`方法证明这是有效的。

如果这种解释是正确的，请考虑以下解决方案。（在 Delphi 2010 中测试。未在 XE2 中测试）

```
unit uDoubleEncrypt;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, uTPLb_CryptographicLibrary, uTPLb_BaseNonVisualComponent,
  uTPLb_Codec;

type
  TmfmDoubleEncrypt = class(TForm)
    Codec1: TCodec;
    Codec2: TCodec;
    CryptographicLibrary1: TCryptographicLibrary;
    btnGo: TButton;
    memoLog: TMemo;
    dlgSave1: TSaveDialog;
    dlgOpen1: TOpenDialog;
    procedure btnGoClick(Sender: TObject);

  private
    FFileName_Plain, FFileName_Cipher: string;
    sSerial: string;
    function  EncryptStringWithCodec1( const sPlaintext: string): ansistring;
    function  GetFileName( dlgOpenX: TOpenDialog; var sFN: string): boolean;
    procedure SaveAnsiStringToFile( const sFN: string; const sSerialCipherText: AnsiString);
    function  ReconstructSerial: string;

  public
    procedure Put( const LineFmt: string; const Args: array of const);
    procedure Button1Click;
    procedure Button4Click;
    function  SelfTest: boolean;
  end;

var
  mfmDoubleEncrypt: TmfmDoubleEncrypt;

implementation

{$R *.dfm}

procedure TmfmDoubleEncrypt.btnGoClick( Sender: TObject);
var
  WORD_1, WORD_2: string;
begin
WORD_1 := 'red';
WORD_2 := 'blue';
sSerial := '123'; // Serial_number.Number; // Store Serial Number of machine
Codec1.Password := WORD_1;
Codec2.Password := WORD_2;

// Run the self test.
SelfTest;

// Clean up.
Codec1.Burn;
Codec2.Burn
// You may also want to delete temporary files here.
end;

function TmfmDoubleEncrypt.EncryptStringWithCodec1(
  const sPlaintext: string): ansistring;
begin
// Assume Codec1 properties already set-up:
//  1\. Password
//  2\. CryptoLibrary
//  3\. Cipher (at design-time)
//  4\. Chain-mode
Codec1.Reset; // Normally not necessary. A defence agains the codec being left in a corrupt state.
Codec1.EncryptString( sPlaintext, result)
end;

function TmfmDoubleEncrypt.GetFileName(
  dlgOpenX: TOpenDialog; var sFN: string): boolean;
begin
result := dlgOpenX.Execute;
if result then
  sFN := dlgOpenX.FileName
end;

procedure TmfmDoubleEncrypt.Put(
  const LineFmt: string; const Args: array of const);
begin
memoLog.Lines.Add( Format( LineFmt, Args))
end;

procedure TmfmDoubleEncrypt.SaveAnsiStringToFile(
  const sFN: string; const sSerialCipherText: AnsiString);
const
  Modes: array[boolean] of word = (fmCreate, fmOpenReadWrite);
var
  SaveStream: TStream;
begin
SaveStream := TFileStream.Create( sFN, Modes[ FileExists( sFN)]);
try
  SaveStream.Size := 0;
  if sSerialCipherText <> '' then
    SaveStream.WriteBuffer( sSerialCipherText[1], Length( sSerialCipherText))
finally
  SaveStream.Free
  end
end;

procedure TmfmDoubleEncrypt.Button1Click;
// This method is equivalent to gEdit101's Button1Click()
var
  sPlainText: string;
  sSerialCipherText: AnsiString;
  sFN: string;
begin
sPlainText := sSerial;
sSerialCipherText := EncryptStringWithCodec1( sPlainText);
Put( 'Encrypted serial number is %s', [sSerialCipherText]);
if GetFileName( dlgOpen1, sFN) then
  begin
  SaveAnsiStringToFile( sFN, sSerialCipherText);
  FFileName_Plain := sFN; // Store for Button4Click()
  Put('encrypted serial number save to file "%s".',[sFN])
  end;
end;

procedure TmfmDoubleEncrypt.Button4Click;
// This method is equivalent to gEdit101's Button4Click()
var
  sPlainText: string;
  sSerialCipherText: AnsiString;
  sFN: string;
begin
Codec2.Reset;
FFileName_Cipher := FFileName_Plain + '_enc.dat'; // Not a text file. + '_enc.txt' would be wrong.
Codec2.EncryptFile( FFileName_Plain, FFileName_Cipher);
Put( 'Double Encrypted serial number is now stored in file "%s"', [FFileName_Cipher]);
end;

function TmfmDoubleEncrypt.ReconstructSerial: string;
var
  CipherStream, PlainStream: TStream;
  sEncryptedSerial: AnsiString;
begin
CipherStream := TFileStream.Create( FFileName_Cipher, fmOpenRead);
PlainStream  := TMemoryStream.Create;
try
  Codec2.Reset;
  Codec2.DecryptStream( PlainStream, CipherStream);
  PlainStream.Position := 0;
  SetLength( sEncryptedSerial, PlainStream.Size);
  if Length( sEncryptedSerial) > 0 then
    PlainStream.ReadBuffer( sEncryptedSerial[1], Length( sEncryptedSerial));
  Codec1.Reset;
  Codec1.DecryptString( result, sEncryptedSerial)
finally
  CipherStream.Free;
  PlainStream.Free
  end
end;

function TmfmDoubleEncrypt.SelfTest: boolean;
var
  sRecon: string;
begin
Put('Commencing self test...',[]);
try
  Button1Click;  // 1st encryption
  Button4Click;  // 2nd encryption
  sRecon := ReconstructSerial; // Reconstruction
  result := sSerial = sRecon
finally
  Put('Finished self test. Result = %s',[BoolToStr( result, True)]);
  end;
end;

end. 
```

这个单位的dfm是...

```
object mfmDoubleEncrypt: TmfmDoubleEncrypt
  Left = 0
  Top = 0
  Caption = 'Double Encrypt'
  ClientHeight = 304
  ClientWidth = 643
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  DesignSize = (
    643
    304)
  PixelsPerInch = 96
  TextHeight = 13
  object btnGo: TButton
    Left = 8
    Top = 8
    Width = 75
    Height = 25
    Caption = 'Go'
    TabOrder = 0
    OnClick = btnGoClick
  end
  object memoLog: TMemo
    Left = 8
    Top = 39
    Width = 627
    Height = 257
    Anchors = [akLeft, akTop, akRight, akBottom]
    Color = clInfoBk
    ReadOnly = True
    ScrollBars = ssVertical
    TabOrder = 1
  end
  object Codec1: TCodec
    AsymetricKeySizeInBits = 1024
    AdvancedOptions2 = []
    CryptoLibrary = CryptographicLibrary1
    Left = 440
    Top = 112
    StreamCipherId = 'native.StreamToBlock'
    BlockCipherId = 'native.AES-128'
    ChainId = 'native.CBC'
  end
  object Codec2: TCodec
    AsymetricKeySizeInBits = 1024
    AdvancedOptions2 = []
    CryptoLibrary = CryptographicLibrary1
    Left = 536
    Top = 112
    StreamCipherId = 'native.StreamToBlock'
    BlockCipherId = 'native.AES-128'
    ChainId = 'native.CBC'
  end
  object CryptographicLibrary1: TCryptographicLibrary
    Left = 480
    Top = 48
  end
  object dlgSave1: TSaveDialog
    InitialDir = 'C:\Temp'
    Title = 'Choose location to save Authentication Code'
    Left = 440
    Top = 176
  end
  object dlgOpen1: TOpenDialog
    InitialDir = 'C:\'
    Left = 536
    Top = 176
  end
end 
```

# c# - .NET SqlCommand 中的存储过程比 SSMS 中慢得多

> ID：14696901
> 
> 赞同：1
> 
> 时间：2013-02-04T22:27:14.887
> 
> 标签：c#, .net, sql, ssms

我有一个正在执行 INSERT 语句的存储过程，我们在执行时看到了明显的延迟。从我们的 C# .NET 应用程序运行它以连续插入 30 条记录时，总共需要大约 4 秒才能完成（仅计算运行 SqlCommand.ExecuteNonQuery() 方法所需的时间）。但是，从 SQL Server Management Studio 中调用相同的存储过程相同的次数只需要大约 0.4 秒。我无法弄清楚这两种设置之间有什么不同会产生如此不同的 10 倍速度。

我已经尝试了以下所有方法，但速度没有明显变化：

1.  创建存储过程“WITH RECOMPILE”
2.  检查在 SSMS 和 C# 中配置的所有“SET”值。唯一的区别是 SET ARITHABORT，它在 SSMS 中为 ON，而在从 .NET 应用程序调用时为 OFF。但是，在存储过程的开头添加“SET ARITHABORT ON”没有任何区别。
3.  从 sproc 参数中删除了所有默认值

用于从 .NET 应用程序调用存储过程的代码是：

```
using (SqlConnection newConn = new SqlConnection(connectionString))
 {
   using (SqlCommand uCmd = new SqlCommand("sproc_name", newConn))
   {
      uCmd.CommandType = CommandType.StoredProcedure;
      uCmd.Connection.Open();

      //About 15 parameters added using:
      uCmd.Parameters.AddWithValue("@ParamName", value);
      ...

      //One output parameter
      SqlParameter paramOUT = new SqlParameter("@OutPutKey", SqlDbType.UniqueIdentifier);
      paramOUT.Direction = ParameterDirection.Output;
      uCmd.Parameters.Add(paramOUT);

      uCmd.ExecuteNonQuery();
      uCmd.Connection.Close();
   }
} 
```

存储过程本身只是一个设置命令列表（SET ANSI_NULLS ON、SET QUOTED_IDENTIFIER ON、SET ARITHABORT ON）、非默认参数列表以及将插入的新唯一标识符的输出变量设置作为表中的主键，然后是 INSERT 语句本身。

该应用程序基于 .NET 4 构建，SQL 服务器是 MS SQL Server 2005。

这是它调用的插入存储过程的示例：

```
alter procedure InsertStuff
@Field1 uniqueidentifier,
@Field2 datetime,
...
@CreateDate datetime,
@PrimaryKEY uniqueidentifier OUTPUT
AS

declare @newCreateDate datetime 
set @newCreateDate=getDate()

set @PrimaryKEY = NEWID()

INSERT INTO [dbo].[Table]
(
    Field1,
    Field2,
    ...
    CreateDate,
    PrimaryKEY
)
VALUES
(
    @Field1,
    @Field2,
    ...
    @newCreateDate,
    @PrimaryKEY
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:45:30.093

可能的问题是每个执行命令调用都会进行一次网络跳跃，因为 ssms 会一次将所有 30 个命令一次发送到服务器。我相信默认情况下 SSMS 会将所有 30 条语句作为一个批次发送，但是如果您更改了其他可能会影响事情的设置。

另外，请确保您不是每次都打开和关闭连接。虽然连接池可能使这不是问题，但我不会让它碰运气。

# java - Java匿名内部类调用静态方法

> ID：14696903
> 
> 赞同：1
> 
> 时间：2013-02-04T22:27:20.047
> 
> 标签：java, eclipse, anonymous-inner-class

我在 Eclipse 应用程序中有以下代码：

```
import org.eclipse.swt.widgets.Listener;
public class X {
  public void test() {
     Listener eclipseListener = new Listener() {
        public void handleEvent(Event evt) {
            System.err.println("starting");
            Y.externalMethod();
            System.err.println("finished");
        }
    }
}

public class Y {
    public static void externalMethod() {
        System.err.println("in class Y");
    }
} 
```

当我在类 X 中运行方法测试时，我得到以下输出：

> > 开始

我不明白为什么 externalMethod 没有在 Y 类中运行以及为什么控制没有返回到 X 类（它从不打印“完成”或“在 Y 类中”）。

关于为什么 externalMethod 不运行的任何想法？匿名内部类是否不允许在其类外调用静态方法？如果是这样，为什么这段代码会编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:41:42.070

代替

```
 public void handleEvent(Event evt) {
        System.err.println("starting");
        Y.externalMethod();
        System.err.println("finished");
    } 
```

你可能会有更好的运气：

```
 public void handleEvent(Event evt) {
        System.err.println("starting handleEvent");
        try {
            Y.externalMethod();
        } finally {
            System.err.println("finished handleEvent");
        }
    } 
```

那是，

1.  将方法退出跟踪放入`finally`
2.  将方法名称添加到跟踪行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:31:26.317

`handleEvent()`此处不调用该方法。您所做的是定义匿名类并动态创建一个实例。

您需要将此侦听器 ( ) 注册到某个事件处理程序，该事件处理程序将在事件触发时`eclipseListener`调用该方法。`handleEvent()`

# c# - 无法创建变量类型“Item”的实例，因为它没有 new() 约束

> ID：14696904
> 
> 赞同：63
> 
> 时间：2013-02-04T22:27:20.677
> 
> 标签：c#, templates, generics, compiler-errors

我正在尝试测试一种方法 - 并收到错误：

> 无法创建变量类型“Item”的实例，因为它没有 new() 约束

以下所需资料：

```
public interface IHasRect
{
    Rectangle Rectangle { get; }
} 
```

助手类：

```
class Item : IHasRect
{
    public Item(Point p, int size)
    {
        m_size = size;
        m_rectangle = new Rectangle(p.X, p.Y, m_size, m_size); 
    }
} 
```

对于要测试的函数，我需要实例化一个对象......

```
public class SomeClass<T> where T : IHasRect 
```

考试：

```
public void CountTestHelper<Item>() where Item : IHasRect
{
    Rectangle rectangle = new Rectangle(0, 0, 100, 100); 
    SomeClass<Item> target = new SomeClass<Item>(rectangle);            
    Point p = new Point(10,10);
    Item i = new Item(p, 10);      // error here        
    ...
}
[TestMethod()]
public void CountTest()
{
    CountTestHelper<Item>();
} 
```

[我试图通过阅读http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)和[http://msdn.microsoft.com/en-](http://msdn.microsoft.com/en-us/library/x3y47hd4.aspx)了解此错误的含义或解决方法[us/library/x3y47hd4.aspx](http://msdn.microsoft.com/en-us/library/x3y47hd4.aspx) - 但它没有帮助。

我不明白这个错误 - 我已经将“SomeClass”限制为类型。我无法约束整个 Test 类（由 Visual Studio 生成的单元测试类，其中包含所有测试） - 否则我会得到许多其他错误。Item 类没有任何模板...

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-04T22:32:29.653

`new`除非您使用关键字将其标记为实现默认构造函数，否则您无法初始化泛型类型对象：

```
public void CountTestHelper<Item>() where Item : IHasRect, new()
 {
    Rectangle rectangle = new Rectangle(0, 0, 100, 100); 
    SomeClass<Item> target = new SomeClass<Item>(rectangle);            
    Point p = new Point(10,10);
    Item i = new Item();    // constructor has to be parameterless!
    ...
 } 
```

另一方面，如果您尝试初始化`Item`在应用程序中其他位置定义的类型对象，请尝试使用它之前的命名空间：

```
MyAppNamespace.Item i = new MyAppNamespace.Item(p, 10); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-03-30T11:40:30.480

因为很多人是通过问题tilte（非常通用并且与编译器消息匹配）到达这里的，所以让我对编译错误itef给出更详细的答案。

您在方法中使用泛型。编译器不知道它将接收哪种类型，因此不保证您的类型具有无参数构造函数。例如：

```
class A {
    A(int i){ ... }
}

class B { ... }

public void MyMethod<T>(){
    T t = new T(); //This would be fine if you use 'MyMethod<B>' but you would have a problem calling 'MyMethod<A>' (because A doesn´t have a parameterless construtor;
} 
```

为了解决这个问题，你可以告诉编译器你的泛型参数有一个无参数的构造器。这是通过定义约束来完成的：

```
public void MyMethod<T>()  where T: new(){
    T t = new T(); //Now it's ok because compiler will ensure that you only call generic method using a type with parameterless construtor;
} 
```

可以在此处找到有关构造函数约束的更多信息： [https ://msdn.microsoft.com/en-us/library/bb384067.aspx](https://msdn.microsoft.com/en-us/library/bb384067.aspx)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-04T22:32:43.307

该`Item`行：

```
Item i = new Item(p, 10); 
```

指的是方法的泛型类型参数`Item`，`CountTestHelper`而不是类`Item`。更改通用参数名称，例如

```
public void CountTestHelper<TItem>() where TItem : IHasRect
{
    Rectangle rectangle = new Rectangle(0, 0, 100, 100); 
    SomeClass<TItem> target = new SomeClass<TItem>(rectangle);            
    Point p = new Point(10,10);
    Item i = new Item(p, 10);    
    ...
} 
```

或者，您可以完全限定`Item`要创建的类的名称：

```
public void CountTestHelper<Item>() where Item : IHasRect
{
    Rectangle rectangle = new Rectangle(0, 0, 100, 100); 
    SomeClass<Item> target = new SomeClass<Item>(rectangle);            
    Point p = new Point(10,10);
    SomeNamespace.Item i = new SomeNamespace.Item(p, 10);  
} 
```

# django - Selenium 测试、LiveServerTestCase、Django 和 NoReverseMatch

> ID：14696907
> 
> 赞同：1
> 
> 时间：2013-02-04T22:27:28.143
> 
> 标签：django, testing, selenium

我的测试：

```
class BasicProfileTest(LiveServerTestCase):
fixtures = ['admin_user.json', 'gym.json', 'user_profile.json']

def setUp(self):
    self.browser = webdriver.Firefox()
    self.browser.implicitly_wait(3)

def tearDown(self):
    self.browser.quit()

def test_can_login_check_profile(self):
    self.browser.get(self.live_server_url + '/trackstats/index/')

    body = self.browser.find_element_by_tag_name('body')
    self.assertIn('Track your workouts. See your progress. Share with friends.', body.text)

    username_field = self.browser.find_element_by_name('username')
    username_field.send_keys('bobo')

    password_field = self.browser.find_element_by_name('password')
    password_field.send_keys('.....')
    password_field.send_keys(Keys.RETURN)

    profile_link = self.browser.find_element_by_link_text("bobo's profile")
    profile_link.click()

    body = self.browser.find_element_by_tag_name('body')
    self.assertIn('Change Password', body.text) 
```

当我运行测试时，它通过了，但它也抛出了一个

```
NoReverseMatch: Reverse for 'user_profile_update' with arguments '('',)' and keyword arguments '{}' not found. 
```

如果我在 base.html 中直接链接到用户的个人资料：

```
/trackstats/profile/update/{{user.id}} 
```

我没有得到反向匹配异常。但是一旦我将其替换为

```
{% url user_profile_update user.id %} 
```

它会出现 NoReverMatch 异常。

我觉得我在这里遗漏了一些明显的东西。

更新 1\. 添加 urls.py

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib import admin
admin.autodiscover()
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',
    (r'^$', redirect_to, {'url': '/trackstats/index/'}),
    url(r'^admin/', include(admin.site.urls)),
    (r'^accounts/login/$', 'django.contrib.auth.views.login', {'template_name': 'registration/login.html'}),
    (r'^accounts/', include('registration.backends.default.urls')), 
    url(r'^trackstats/index/', 'trackstats.views.index', name='index'),
    url(r'^trackstats/user_profile/create/', 'trackstats.views.user_profile_create', name='user_profile_create'),
    url(r'^trackstats/user_profile/update/(?P<object_id>\d{1,5})/', 'trackstats.views.user_profile_update', name='user_profile_update'),
    url(r'^trackstats/gym/create/', 'trackstats.views.gym_create', name='gym_create'),
    url(r'^trackstats/gym/update/(?P<object_id>\d{1,5})/', 'trackstats.views.gym_update', name='gym_update'),
    url(r'^trackstats/workout/create/', 'trackstats.views.workout_create', name='workout_create'),
    url(r'^trackstats/workout/update/(?P<object_id>\d{1,5})/', 'trackstats.views.workout_update', name='workout_update'),
    url(r'^trackstats/workout/assign/', 'trackstats.views.workout_assign', name='workout_assign'),

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:09:45.843

异常表示没有`user.id`传递给`reverse`函数，它只是得到一个空字符串。

您可以查看堆栈跟踪以了解该函数是如何被调用的吗？（我可能很迟钝，但我在上面的代码中看不到调用`reverse`）。您应该能够看到空字符串的来源，并将其替换为`user.id`您想要的。

还可以尝试查看您传递给模板的用户对象（您用来测试上述`url`功能的对象） - 交换您的测试`{{ user }}`以确保您传递的是有效用户。如果您传递的是具有有效 id 的有效用户，那么您的 url.conf 中可能存在重复项（例如，相同的视图和相同数量的参数）。如果是这种情况，那么您可能需要使用[命名的 url 模式](https://docs.djangoproject.com/en/1.4/topics/http/urls/#naming-url-patterns)。

更新

测试中的最终断言语句是否可能在页面加载之前运行？您可以在 之后手动插入 5 秒等待`click()`吗？你手动运行过这个吗？登录后会直接进入带有“更改密码”字样的页面吗？

# shell - 添加到 mongoDB 中的嵌套 json

> ID：14696913
> 
> 赞同：1
> 
> 时间：2013-02-04T22:28:01.520
> 
> 标签：shell, mongodb

例如，我在 mongodb 中有一个 json 文档

```
{
a:{b:c}
} 
```

现在，如果我想添加到嵌套的 json 中，我应该怎么做，这将使它看起来像：

```
{
a:{b:c, d:e}
} 
```

我已阅读`update`. 它记录了关于`$inc`, `$rename`, `$set`&的信息`$unset`。但我希望它添加现有的`a`. 就像`$addToSet`处理数组一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:38:29.840

您可以使用[$set](http://docs.mongodb.org/manual/reference/operator/set/)运算符：

```
collection.update({'a.b': 'c' }, {$set: {'a.d': 'e'}} ) 
```

# ios - 在 NSOperation 中设置 UIImage 时的内存泄漏

> ID：14696914
> 
> 赞同：2
> 
> 时间：2013-02-04T22:28:14.413
> 
> 标签：ios, xcode, memory-management, memory-leaks

我遇到了一个问题，相对较大的图像似乎永远不会从内存中释放（大小为 1MB~5MB）。当用户滚动一组图像时，会调用以下代码块。大约 15 张图像后，应用程序将崩溃。有时会调用“didReceiveMemoryWarning”，有时不会调用——应用程序只会崩溃、停止、退出调试，并且不会在任何代码行上停止——什么都没有。我认为这是设备内存不足时会发生的情况？另一个问题是子类“DownloadImageOperation”似乎从未调用过“dealloc”。有任何想法吗？

获取和设置图像：

```
//Calling this block of code multiple times will eventually cause the
// application to crash

//Memory monitor shows real memory jumping 5MB to 20MB increments in instruments.  
//Allocations tool shows #living creeping up after this method is called.
//Leaks indicate something is leaking, but in the 1 to 5 kb increments. Nothing huge.

DownloadImageOperation * imageOp = [[DownloadImageOperation alloc] initWithURL:imageURL localPath:imageFilePath];
[imageOp setCompletionBlock:^(void){
    //Set the image in a UIImageView in the open UIViewController.
    [self.ivScrollView setImage:imageOp.image];
}];
//Add operation to ivar NSOperationQueue
[mainImageQueue addOperation:imageOp];
[imageOp release]; 
```

下载图像操作定义：

.h 文件

```
#import <Foundation/Foundation.h>

@interface DownloadImageOperation : NSOperation {
    UIImage * image;
    NSString * downloadURL;
    NSString * downloadFilename;
}

@property (retain) UIImage * image;
@property (copy) NSString * downloadURL;
@property (copy) NSString * downloadFilename;

- (id) initWithURL:(NSString *)url localPath:(NSString *)filename;

@end 
```

.m 文件

```
#import "DownloadImageOperation.h"
#import "GetImage.h"

@implementation DownloadImageOperation

@synthesize image;
@synthesize downloadURL;
@synthesize downloadFilename;

- (id) initWithURL:(NSString *)url localPath:(NSString *)filename {

    self = [super init];

    if (self!= nil) {
        [self setDownloadURL:url];
        [self setDownloadFilename:filename];
        [self setQueuePriority:NSOperationQueuePriorityHigh];
    }

    return self;

}

- (void)dealloc { //This never seems to get called?
    [downloadURL release], downloadURL = nil;
    [downloadFilename release], downloadFilename = nil;
    [image release], image = nil;
    [super dealloc];
}

-(void)main{

    if (self.isCancelled) {
        return;
    }

    UIImage * imageProperty = [[GetImage imageWithContentsOfFile:downloadFilename andURL:downloadURL] retain];
    [self setImage:imageProperty];
    [imageProperty release];
    imageProperty = nil;
}

@end 
```

获取图像类

.m 文件

```
+ (UIImage *)imageWithContentsOfFile:(NSString *)path andURL:(NSString*)urlString foundFile:(BOOL*)fileFound {

    BOOL boolRef;

    UIImage *image = nil;

    NSString* bundlePath = [[NSBundle mainBundle] bundlePath];

    if (image==nil) {
        boolRef = YES;
        image = [UIImage imageWithContentsOfFile:[[AppDelegate applicationImagesDirectory] stringByAppendingPathComponent:[path lastPathComponent]]];
    }
    if (image==nil) {
        boolRef = YES;
        image = [super imageWithContentsOfFile:path];
    }
    if (image==nil) {
        //Download image from the Internet
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

        NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
        [request setTimeOutSeconds:120];
        [request startSynchronous];

        NSData *responseData = [[request responseData] retain];

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        NSData *rdat = [[NSData alloc] initWithData:responseData];
        [responseData release];

        NSError *imageDirError = nil;
        NSArray *existing_images = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[path stringByDeletingLastPathComponent] error:&imageDirError];

        if (existing_images == nil || [existing_images count] == 0) {
            // create the image directory
            [[NSFileManager defaultManager] createDirectoryAtPath:[path stringByDeletingLastPathComponent] withIntermediateDirectories:NO attributes:nil error:nil];
        }

        BOOL write_success = NO;
        write_success = [rdat writeToFile:path atomically:YES];

        if (write_success==NO) {
            NSLog(@"Error writing file: %@",[path lastPathComponent]);
        }

        image = [UIImage imageWithData:rdat];
        [rdat release];

    }

    return image;
} 
```

为这个巨大的代码块道歉。我真的不知道问题可能出在哪里，所以我尽量做到包容。谢谢阅读。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T06:31:48.687

操作未释放的主要问题是您有一个保留周期，这是由`imageOp`完成块中的引用引起的。考虑一下您的代码：

```
DownloadImageOperation * imageOp = [[DownloadImageOperation alloc] initWithURL:imageURL localPath:imageFilePath];
[imageOp setCompletionBlock:^(void){
    //Set the image in a UIImageView in the open UIViewController.
    [self.ivScrollView setImage:imageOp.image];
}]; 
```

在 ARC 中，您将向`__weak`操作添加限定符并使用它而不是`imageOp`在, 中使用`completionBlock`，以避免强引用循环。在手动引用计数中，您可以通过使用限定符来避免保留循环`__block`来实现相同的目的，即阻止块保留`imageOp`：

```
DownloadImageOperation * imageOp = [[DownloadImageOperation alloc] initWithURL:imageURL localPath:filename];
__block DownloadImageOperation *blockImageOp = imageOp;
[imageOp setCompletionBlock:^(void){
    //Set the image in a UIImageView in the open UIViewController.
    [self.imageView setImage:blockImageOp.image];
}]; 
```

我想如果你这样做，你会看到你的操作被正确释放。[（请参阅过渡到 ARC 发行说明](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)的“使用生命周期限定符来避免强引用循环”部分。我知道您没有使用 ARC，但本节描述了 ARC 和手动引用计数解决方案。）

* * *

如果您不介意，我对您的代码还有其他意见：

*   您不应该在`completionBlock`不将其分派到主队列的情况下从 更新 UI ...所有 UI 更新都应在主队列上发生：

    ```
    DownloadImageOperation * imageOp = [[DownloadImageOperation alloc] initWithURL:imageURL localPath:filename];
    __block DownloadImageOperation *blockImageOp = imageOp;
    [imageOp setCompletionBlock:^(void){
        //Set the image in a UIImageView in the open UIViewController.
        UIImage *image = blockImageOp.image;
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [self.imageView setImage:image];
        }];
    }]; 
    ```

*   您在方法中使用了访问器方法`init`。作为一个良好的做法，你真的不应该。请参阅*高级内存管理编程指南*中的[不要在初始化方法中使用访问器方法和 dealloc 。](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)

**   虽然我们可能已经解决了操作未释放的问题，但我怀疑除非您已经编写了`UIScrollViewDelegate`调用以释放已滚动出可见屏幕的图像的调用，否则您将继续遇到内存问题。话虽如此，您可能已经解决了这个问题，如果是这样，我什至为提及它而道歉。我只提出这个问题，因为它很容易解决这个`NSOperation`问题，但随后忽略了让滚动视图在它们滚动出屏幕时释放图像。

    *   我不确定您的子类`NSOperation`是否支持并发，因为您缺少在*并发编程指南中*[定义自定义操作中讨论的一些关键方法。](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW16)也许您已经这样做了，但为了简洁而省略了它。或者，我认为如果您使用为您处理这些内容的现有类之一（例如）会更容易。您的电话，但如果您追求并发，您需要确保将队列设置为合理的值，例如 4。*`NSOperation``NSBlockOperation``maxConcurrentOperationCount`*

    **   您的代码有一些多余的`retain`语句。话虽如此，你也有必要的`release`陈述，所以你确保你不会有问题，但这只是有点好奇。显然，ARC 让你摆脱了这类东西的麻烦，但我很感激这是一大步。但是，当您有机会时，请查看 ARC，因为它可以让您不必担心很多此类问题。

    *   您可能应该通过静态分析器（“产品”菜单上的“分析”）运行您的代码，因为您有一些死店等。**

# objective-c - 覆盖 NSArray 的哈希值

> ID：14696922
> 
> 赞同：2
> 
> 时间：2013-02-04T22:28:35.860
> 
> 标签：objective-c

这个[SO 答案](https://stackoverflow.com/a/11984624/337735)表明 NSDictionary 的哈希是字典中的条目数。（[类似地，NSArray 的散列是它的长度](http://opensource.apple.com/source/CF/CF-635.21/CFArray.c)。）答案继续建议创建一个类别以提供更好的散列实现。

> 如果您需要更准确的哈希值，您可以在 Obj-C 类别中自己提供一个。

但是当我尝试这个时，它似乎仍然使用原始的哈希实现。

我们有标题`NSDictionary+Hash.h`

```
#import <Foundation/Foundation.h>

@interface NSDictionary (Hash)
- (NSUInteger)hash;
@end 
```

并在`NSDictionary+Hash.m`：

```
#import "NSDictionary+Hash.h"

@implementation NSDictionary (Hash)

- (NSUInteger)hash
{
    // Based upon standard hash algorithm ~ https://stackoverflow.com/a/4393493/337735
    NSUInteger result = 1;
    NSUInteger prime = 31;
    // Fast enumeration has an unstable ordering, so explicitly sort the keys
    // https://stackoverflow.com/a/8529761/337735
    for (id key in [[self allKeys] sortedArrayUsingSelector:@selector(compare:)]) {
        id value = [self objectForKey:key];
        // okay, so copying Java's hashCode a bit:
        // http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#hashCode()
        result = prime * result + ([key hash] ^ [value hash]);
    }
    return result;
} 
```

一个简单的单元测试显示原始实现正在使用中：

```
#import "NSDictionary+Hash.h"

#import <SenTestingKit/SenTestingKit.h>

@interface NSDictionary_HashTest : SenTestCase
@end

@implementation NSDictionary_HashTest

- (void)testHash
{
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          @"val1", @"key1", @"val2", @"key2", nil];
    NSUInteger result = 1;
    result = 31 * result + ([@"key1" hash] ^ [@"val1" hash]);
    result = 31 * result + ([@"key2" hash] ^ [@"val2" hash]);
    STAssertEquals([dict hash], result, nil);
}

@end 
```

此测试失败，“'2' 应该等于 '2949297985'”。

现在，如果我在类别头文件和实现文件中将方法从 hash 重命名为 hashy（例如），则`[dict hashy]`返回正确的值。不能覆盖类别中的“内置”方法吗？我做错了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T22:47:07.667

NSDictionary 是一个类集群——当你向一个 NSDictionary 发送消息时，你与之交互的从来不是一个实际的 NSDictionary 实例，而是一个私有子类的实例。所以当你重写`hash`你的类中的方法时，它确实是重写了 NSDictionary 中的那个方法，但是具体的子类有它自己的`hash`方法，所以它重写了你的。

如果你真的想这样做，我想你会想要检查 NSDictionaryI 和 NSDictionaryM 类的存在并动态覆盖它们的`hash`方法。但这在内部实现细节上很混乱，除非你真的陷入困境，否则我不建议这样做。如果您分析并发现 NSDictionary 的`hash`方法有问题，我会尝试创建一个包装 NSDictionary 但提供自己的自定义`hash`方法的类，然后再使用私有实现类 - 实现类可以在没有警告的情况下更改（并且之前有），所以任何依赖它们的设计都是脆弱的。

# mysqli - 未定义变量：mysqli - PHP OOP

> ID：14696931
> 
> 赞同：2
> 
> 时间：2013-02-04T22:29:01.910
> 
> 标签：mysqli, php

如何在扩展类中实现 mysqli？

我正在上传图像并将其存储在 MySQL 数据库中，但出现此错误：

> 注意：未定义的变量：mysqli in ...ecc/ecc/ on line 33
> 
> 致命错误：在第 33 行对 ...ecc/ecc/ 中的非对象调用成员函数 query()

这是我的测试代码：

```
<?php
    interface ICheckImage {
        public function checkImage();
        public function sendImage();
    }           
    abstract class ACheckImage implements ICheckImage {
        public $image;
        private $mysqli;    
        public function _construct(){
            $this->image = $_POST['image'];
            $this->mysqli = new mysqli('localhost','test','test','test');
        }
    }           
    class Check extends ACheckImage {
        public function checkImage() {
            if($this->image > 102400) {
                echo "File troppo grande";
            } 
        }
        public function sendImage() {
            //This is the line 33 give me the error
            if ($mysqli->query("INSERT INTO images (image) VALUES ('$this->image')")) {
            echo "Upload avvenuto &nbsp";
            } else {
                echo "Errore &nbsp" . $mysqli->error;
            }  
        }
    }   
    $form = new Check();
    $form->checkImage();    
    $form->sendImage();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:31:39.360

您的代码中有一些错误。

1.  该`$mysqli`成员在抽象类中是私有的。它不会被`Check`类继承，所以它在那里不存在。使其受到保护。

2.  访问一个类的成员总是需要`$this->`在前面，特别`$this->mysqli`是在这个实例中。

3.  构造函数的命名必须`__construct`在前面加上两个下划线。

4.  图像检查看起来不对。$_POST['image'] 确实包含您希望存储在数据库中的内容，但您还将它与整数值进行比较，如果它更大，似乎会回显错误消息。虽然数据处理将起作用，例如，您可以将 POST 数据中的字符串与整数进行比较，但看起来您需要其他东西。

# java - 存储字符串表达式中的第一个案例变量（ArrayList 到 Array）

> ID：14696933
> 
> 赞同：2
> 
> 时间：2013-02-04T22:29:16.993
> 
> 标签：java

我正在将变量的第一种情况存储到数组中，因为我不知道会有多少变量我决定使用数组列表。

编译时出现以下错误：

```
javac TruthTester.java
TruthTester.java:102: error: no suitable method found for toArray(char[])
char[] charArr = letters.toArray(x);
^
method ArrayList.<T>toArray(T[]) is not applicable
(inferred type does not conform to declared bound(s)
inferred: char bound(s): Object)
method ArrayList.toArray() is not applicable
(actual and formal argument lists differ in length)
where T is a type-variable:
T extends Object declared in method <T>toArray(T[])
1 error 
```

这是我的代码段..

```
private static char[] getVariables(String[] lines)
{
    ArrayList<Character> letters = new ArrayList<Character>();

    int count = 0;
    for(int x = 0; x < lines.length; x++)
    {
        for(int i = 0; i < lines[x].length(); i++)
        {
            char tempStore = 'a';
            boolean isCopy = false;
            int counter = 0;
            for(char letter : letters)
            {
                if(isAlphabeticToken(letter)){
                    if(lines[x].charAt(counter) == letter)
                    {
                        isCopy = true;
                    }
                    else
                    {
                        isCopy = false;
                        tempStore = letter;
                    }
                }
                else
                {
                    isCopy = true;
                }
                counter++;
            }
            if(!isCopy)
            {
                letters.add(tempStore);
                count++;
            }
        }
    }
            /*
             * ==========
             * ERROR HERE
             * ==========
             */
    char[] x = new char[letters.size()];
    char[] charArr = letters.toArray(x);

    return charArr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:31:36.307

你不能从 a`char[]`中得到 a `ArrayList<Character>`，你只能得到 a `Character[]`，并且装箱/拆箱*不会*使它们等效。

您是否考虑过`StringBuilder`改用？这实际上是专门为保存一组可变的、长度未知的字符而设计的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:38:51.040

由于 ArrayList 是 Character 类型，因此可以将其转换为 Character[]，但不能转换为 char[]。

**所以你可以这样做：**
Character[] x = new Character[letters.size()];
Character[] charArr = letters.toArray(x);

**或者**

使用 stringbuilder 会起作用：

```
StringBuilder sb = new StringBuilder(letters.size());
for (Character c : letters)
    sb.append(c);
String result = sb.toString();
return result.toCharArray(); 
```

# c++ - 这里有比朋友班更好的方法吗？

> ID：14696938
> 
> 赞同：1
> 
> 时间：2013-02-04T22:29:39.937
> 
> 标签：c++

尽管这种情况可能在任何地方出现，但在 Windows 上使用 C++ 编程。这是我的问题的简化版本，以使问题易于管理，因此不要太关注细节:)

我有一个`class Window`包含 Windows`HWND`数据项的类。我想完全封装它，`HWND`以便类的用户必须通过类才能在该窗口上执行任何操作，因此它存储在私有成员变量中。我不想为它提供任何公共“getter”，因为这会破坏允许用户绕过我的课程的封装。

现在我想创建一个类`class Direct3d11`来封装一些directx api。为了创建这个类的一个实例，它需要一个窗口的 HWND，所以我`Window`在它的构造函数中传递了一个对象。

```
class Direct3D11
{
public:
    Direct3D11(const Window& window);
}; 
```

在构造函数内部，它可以访问窗口对象，但是它需要包含在其中的 HWND 才能物理地创建 Direct3D11 类将管理的窗口对象，但它无法获取该信息。

我可以添加一个私有 getter 函数来获取 HWND 到 Window 类，然后使 Direct3D11 类成为 Window 的朋友类，以便它调用该函数。

然而，这似乎不是很优雅，尤其是因为 Window 类根本不需要知道关于 Direct3D11 类的任何事情。

我是否错过了实现这一目标的更好方法？朋友类没有吸引力，拥有公共 getter 函数也没有太大吸引力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:33:48.623

你可以在里面创建`Direct3D11`类`Window`，因为`Windows`拥有`HWND`.

这些方面的东西：

```
class Window
{
    HWND hwnd;
    Direct3D11 d;
public:
    Window() : d(hwnd) {}
    Direct3D11& getDirect3D()
    {
       return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:15:42.933

如果你愿意使用friend关键字，你可以确保window不知道需要hwnd的类。只需制作为您处理操作的类（该窗口和 DirectX 继承自）。这使您可以解决 DirectX 的问题，并在下次出现时解决。

Side Rant：朋友不是四个字母的词。Friend，如果使用得当，实际上是为 C++ 的访问控制（public、friend (when in protected)、protected、friend (when in private)、private）添加层次的好方法。

```
#include <iostream>

class HwndOwner;
class HwndWanter
{
protected:
    HwndWanter(){}
    int getHwndFromOwner(HwndOwner & owner);
};

class HwndOwner
{
protected:
    HwndOwner() : hwnd(42){}

private:
    friend class HwndWanter;
    int getHwnd()
    {
        return hwnd;
    }

    int hwnd;
};

class Window : public HwndOwner
{
    //This is not the class you are looking for...
};

class Direct3D : private HwndWanter
{
public:
    Direct3D(HwndOwner & owner)
        : HwndWanter()
    {

        std::cout << getHwndFromOwner(owner) << std::endl;
    }
};

int HwndWanter::getHwndFromOwner(HwndOwner & owner)
{
    return owner.getHwnd();
}

int main()
{
    Window window;
    Direct3D hwndWanter(window);
} 
```

输出：

```
42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:50:17.947

在您的情况下，我建议为 the 提供一个吸气剂，`HWND`因为您可能会更频繁地需要它。提供 getter 并不意味着您承担 Window 类的责任，它仍然负责窗口的生命周期。你只是让它更有用，更容易在用例中划分你的代码。

也就是说，这是一种更通用的方法，您可以尝试：

```
class Window;

class Direct3D {
public:
    void apply(Window &window, HWND hWnd);
};

class Window {
public:
    void accept(Direct3D &direct3d) {
        direct3d.apply(*this, this->m_hWnd);
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T22:45:25.137

您可能在 Window 上有一个名为 Execute 的函数。它将接收一个带有 HWND 占位符的 std::function 作为参数。然后，Window 将使用 HWND 作为其唯一参数调用该函数。

这需要 c++11，但代码类似于：

```
#include <functional>
#include <iostream>

struct Foo {
    explicit Foo(int num) : num_(num) {}
    template<typename T>
    void execute(std::function<T> f) const { f(num_); }
    private:
    int num_;
};

struct Bar{
    void print_nums(int i,int j)
    {
        std::cout << "i:" << i << ", " << "j:" << j << std::endl;
    }
};

int main()
{
    Foo o(42);
    Bar b;

    //the function we want to execute requires an int
    //that Foo knows about
    typedef void myFunction(int);

    // store the result of a call to std::bind
    std::function<myFunction> display_1337_first = std::bind(&Bar::print_nums, b,1337, std::placeholders::_1);
    std::function<myFunction> display_1337_last = std::bind(&Bar::print_nums, b, std::placeholders::_1, 1337);
    o.execute<myFunction>(display_1337_first);
    o.execute<myFunction>(display_1337_last);
    return 0; 
}

//output:
//i:1337, j:42
//i:42, j:1337 
```

# css - 在旋转的 div 内换行

> ID：14696940
> 
> 赞同：0
> 
> 时间：2013-02-04T22:29:49.290
> 
> 标签：css, rotatetransform

知道如何在旋转的 div 内进行文本换行。旋转后文本不会留在 div 内。这是一个想法的屏幕......

![Div Rotated, and inside, Text 旋转回右度](../Images/6d0babd2439ec5b330414931324b3831.png)

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:10:19.610

我想到解决这个问题的唯一方法是 CSS 区域 ( [http://html.adobe.com/webstandards/cssregions/](http://html.adobe.com/webstandards/cssregions/) )。

我已经设置了一个小演示来向您展示它是如何工作的，这是代码：

```
div {
    -webkit-shape-inside: polygon(0% 50%, 50% 100%, 100% 50%, 50% 0%);
} 
```

这是演示：http: [//jsfiddle.net/sandro_paganotti/ABdgB/](http://jsfiddle.net/sandro_paganotti/ABdgB/)。

不幸的是，它仅适用于最新的 Chrome，而且您必须在 chrome://flags 面板中手动启用“启用实验性 WebKit 功能”。

![这是一个截图](../Images/2c2feb74f537795954add7d371b72ddc.png)

# ruby - 如何在 ruby 中创建换行符？

> ID：14696944
> 
> 赞同：14
> 
> 时间：2013-02-04T22:30:10.500
> 
> 标签：ruby

我将如何在这样的行之间放置换行符：

```
print "Hi"
print "Hi" 
```

因为它只会输出这个：

```
HiHi 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T22:46:58.587

使用[`puts`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-i-puts)，因为它会自动为您添加换行符：

```
puts "Hi"
puts "Hi" 
```

如果您想创建一个明确的换行符，那么您需要知道您的程序将在哪种系统上运行：

```
print "Hi\n"   # For UNIX-like systems including Mac OS X.
print "Hi\r\n" # For Windows. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:33:01.553

使用换行符：

```
print "Hi\n"
print "Hi" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:31:55.853

您可以通过在其他 2 个字符串之间添加一个只有一个空格的字符串来创建一个空格。例如：

```
print "Hi" + " " + "Hi" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T22:35:52.500

您可以避免使用两个打印语句，而只使用一行。

```
print "Hi\r\nHi" 
```

或者，如果您想使用两条线，那么

```
print "Hi\r\n"

print "Hi" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T14:13:40.127

puts "\n" 也适用于 Win/Ruby ruby​​ 2.4.2p198 甚至 "\n"*4 用于新行的乘法（乘以 4）

# c# - 使用 RSACryptoServiceProvider 在 C# 中实现三通协议

> ID：14696949
> 
> 赞同：1
> 
> 时间：2013-02-04T22:30:31.793
> 
> 标签：c#, encryption, cryptography, rsa

我正在尝试使用 RSA 在 C# 中实现[三通协议。](http://en.wikipedia.org/wiki/Three-pass_protocol)但是，这需要有问题的加密是可交换的，我不知道 RSA 是否是。

此外，它需要（至少据我所知）加密曾经能够使用与加密长度相同的密钥加密自己的密文，而 RSA 似乎无法做到（我试过并得到一个 CryptographicException “Bad Length”。）

有没有人有任何有用的提示或想法？

# javascript - 检测 safari 高级设置：“从不使用小于...的字体大小”来自 javascript？

> ID：14696951
> 
> 赞同：3
> 
> 时间：2013-02-04T22:30:38.740
> 
> 标签：javascript, safari

Safari (mac) 在 safari -> 首选项 -> 高级下有一个设置，它禁止使用小于给定磅值的字体。

我正在使用 PDF.js 编写一个 PDF 应用程序，当启用此设置时，它会导致字体呈现巨大并重叠。

我试图找出在加载 PDF 之前是否有一种方法可以从 javascript 中检测是否启用了此设置，然后加载一条消息，向用户解释他们需要做什么才能正确查看 PDF。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:42:57.420

用 a 创建一个 DOM 节点`font-size: 1px, line-height: 1.0`并测量它的高度。如果是`> 1px`，那么你的字体大小是有上限的。

[http://codepen.io/nevir/full/trwE​​b](http://codepen.io/nevir/full/trwEb)

# ios - 如何从少量图像创建背景？

> ID：14696953
> 
> 赞同：0
> 
> 时间：2013-02-04T22:30:59.313
> 
> 标签：ios, objective-c, ios5

我正在基于现有的 html 版本开发应用程序，但不知道如何为我的滚动视图创建以下背景。我有一张顶部的图片 ![在此处输入图像描述](../Images/54c642c9a11e33760cfdd2a320223870.png)

应该重复到底部几次 ![在此处输入图像描述](../Images/eac3ac3ddcc29c10e8f1e8730ed1867b.png)

和底部的一张图片 ![在此处输入图像描述](../Images/e3b8c0b9355e894d2956c650072679d0.png)

据我了解，我必须创建一个具有滚动视图大小的空图像，绘制标题然后计算绘制中间图像和绘制底部图像的次数。最后，我必须将创建的图像应用于背景。我对吗？

请不要浪费你的时间来写完整的代码，我会自己做，我只需要知道我是在正确的方向还是完全错误的，代码中最好的地方是什么？

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:40:18.517

> 据我了解，我必须创建一个具有滚动视图大小的空图像，绘制标题

1.  您可以将`UIImageView`属性`image`集添加到标题图像中。

> 然后计算绘制中间图像和绘制底部图像的次数；

1.  更容易说：

    ```
    UIView* middleView = [[UIView alloc] initWithFrame:];
    middleView.backgroundColor = [UIColor colorWithPattern:[UIImage imageNamed:...]]; 
    ```

这样做的好处是您不需要计算任何东西，并且图像会简单地重复自己来填充`middleView`. 只保证图片宽度与视图宽度相同，视图高度为图片高度的整数倍。

> 最后，我必须将创建的图像应用于背景。我对吗？

1.  这就像1。

# php - 为什么 PHP 的自动加载功能在 CLI 模式下不起作用？

> ID：14696961
> 
> 赞同：11
> 
> 时间：2013-02-04T22:31:38.443
> 
> 标签：php, autoload, internals

这更多是为了我个人的启迪，但是，这一直困扰着我：为什么 PHP 在 CLI 模式下不能执行“自动加载”？

多年来我一直在阅读此免责声明，但我从未阅读过任何涉及原因的内容：

> [http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)：
> 
> > *注意：如果在 CLI 交互模式下使用 PHP，则无法使用自动加载。*

有谁知道是什么阻止了 PHP 作为一种语言在 CLI 模式下工作时自动加载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T22:33:23.617

在命令行上自动加载有效。请注意“交互式”的提及。

PHP 带有两种交互模式，但不幸的是，它们都是通过`php -a`在命令 shell 上使用来调用的。

如果 PHP 使用 readline 支持编译，您将获得“交互式 shell”。在这种模式下，几乎可以立即评估每个命令，并且您还可以获得有关任何解析错误的即时反馈。

在这种模式下，自动加载工作。

另一种模式称为“交互模式”。这种模式没有任何花哨的东西，它只发出一条短消息，然后你基本上编写了一个 PHP 脚本——除非你关闭 STDIN，否则什么都做不了。只有这样编写的代码才会被解析和执行。这是唯一`__autoload()`不为未知类调用该函数的情况。

交互式 shell 会话示例（在 Linux 上使用 PHP 5.3.2）：

```
vagrant@lucid32:/etc/apache2$ php -a
Interactive shell

php > function __autoload($classname) {
php { echo "Autoload $classname";
php { eval("class $classname{}");
php { return true;
php { }
php > new Bar();
Autoload ▒▒Bar
php > new FooBar();
Autoload ▒▒FooBar
php > var_dump($a = get_declared_classes());
array(123) {
[0]=>
string(8) "stdClass"
[1]=>
string(9) "Exception"
[2]=>
string(14) "ErrorException"
   ... lots of internal classes here ...
[121]=>
string(3) "Bar"
[122]=>
string(6) "FooBar"
}
php > 
```

交互模式示例（在 Windows 上使用 PHP 5.3.18）

```
PS C:\Users\sven> php -a
Interactive mode enabled

<?php
function __autoload($class) { echo "Auto: $class"; eval("class $class {}"); }
echo "Hello World";
$x = new Foo;
var_dump($x);
var_dump($a = get_declared_classes());
^Z
Hello World
Fatal error: Class 'Foo' not found in - on line 4

Call Stack:
  100.6337    1114608   1\. {main}() -:0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T22:47:11.050

考虑 PHP 的交互式 CLI 的方式基本上是：PHP 启动一个空脚本，并从中读取一个文件`PHP://stdin`，然后解析并执行该文件。文件位置，因此包含路径和其他环境变量被忽略。当前的`__FILE__`，如果你愿意的话 不存在。
好吧，这只是一种看待它的方式，它并不能说明整个故事（远非如此），但在实践中，这就是你可以想到的方式。根本不需要在交互式 CLI 中启动文件：

```
$ php '<?php echo "this is read from STDIN"; ?>' 
```

[从文档中可以推断出](http://php.net/manual/en/features.commandline.options.php)：

> args... 传递给脚本的参数。当第一个参数以 - 开头或从标准输入读取脚本时使用 --args

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:34:19.787

我想说，他们不是在谈论 CLI，而是在谈论 PHP 交互模式，也就是`php -a`.

为什么？因为它仅用于测试目的和简短的片段，如果自动加载任何东西，行为可能会很疯狂。

[http://www.php.net/manual/en/features.commandline.interactive.php](http://www.php.net/manual/en/features.commandline.interactive.php)

# ruby-on-rails - 记录回溯、rescue_from 和自定义错误页面

> ID：14696963
> 
> 赞同：4
> 
> 时间：2013-02-04T22:31:43.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, airbrake

我正在尝试在 rails 3.0.20 和 ruby​​ 1.8.7 的项目中创建自定义错误页面。

无论如何在我的应用程序控制器中：

```
unless Rails.application.config.consider_all_requests_local
  rescue_from Exception, :with => :render_error
  rescue_from ActionController::RoutingError, ActionController::UnknownController,      ::AbstractController::ActionNotFound, ActiveRecord::RecordNotFound, :with =>    :render_error_not_found
end 
```

然后是渲染错误方法：

```
def render_error(exception)
  notify_airbrake(exception)
  Rails.logger.fatal exception
  Rails.logger.fatal exception.backtrace.join("\n")
  respond_to do |format|
    format.html { render :template => "errors/error_500", :layout => 'layouts/application'}
    format.all { render :nothing => true, :status => 500 }
  end
end 
```

似乎现在我的日志充满了比通常更长的回溯。为什么会这样？有没有办法只显示回溯的“重要”部分？在这里调用airbrake是否正确？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T22:59:45.967

查看[http://api.rubyonrails.org/classes/ActiveSupport/BacktraceCleaner.html](http://api.rubyonrails.org/classes/ActiveSupport/BacktraceCleaner.html)。Rails 使用它在显示之前清理你的 backrace。

你可以像这样使用它：

```
Rails.backtrace_cleaner.clean(exception.backtrace) 
```

我实际上是在查看 rails 源代码，因为我认为您的异常在到达您的 render_error 方法时可能已经被清除了。

# javascript - 将 PostMessage 用于 Youtube Iframe 时收到响应

> ID：14696967
> 
> 赞同：2
> 
> 时间：2013-02-04T22:31:57.907
> 
> 标签：javascript, google-chrome, youtube, cross-domain, youtube-javascript-api

我正在构建一个 chrome 扩展程序，它在后台页面中播放 youtube 视频，并在注入的内容脚本中对其进行控制。我可以使用以下代码非常有效地使用播放/暂停：

iframe.contentWindow.postMessage(JSON.stringify({ "event": "command", "func": func, "args": args || [], "id": frame_id }), "*");

我的问题是，如果我传入说 getVolume 或与我的函数类似的东西，我将如何收到回复？顺便说一句，有没有更好的方法来做到这一点？基本上我希望在我的扩展中播放视频。我可以将视频放在我的内容脚本中，但是每次用户更改/刷新页面时，视频的 iframe 也会被刷新。有没有办法在不刷新页面的内容脚本中显示视频，还是我必须做一个应用程序？

提前致谢， 罗汉

# python - 使用 Javascript 向 GAE 发送 GET 查询以重定向到另一个页面

> ID：14696974
> 
> 赞同：0
> 
> 时间：2013-02-04T22:32:17.317
> 
> 标签：python, google-app-engine, get

在 GAE (Python) 上，我试图从本地 javascript 发送一个 GET 请求，并在收到重定向到另一个页面的请求时。这是我的代码：

发送 POST 的本地 Javascript：

```
$.get("/editor"); 
```

GAE 上的 Python

```
class Editor(webapp2.RequestHandler):
    def get(self):
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render())

app = webapp2.WSGIApplication([('/', StartScreen), ('/editor', Editor)],
                              debug=True) 
```

我可以在 url 栏中输入 url /editor，它会带我到那里。为什么我的 javascript GET 请求没有激活编辑器处理程序并打开 /editor？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:59:18.063

我不确定我是否理解这个问题，但还是试试看：当前的使用方式`jQuery.get()`应该调用服务器但丢弃响应，所以你在浏览器中什么也看不到。你至少想做：

```
$.get("/editor", function(response) { 
     document.location.href = 'another page'; 
}); 
```

`another page`你想重定向到哪里。然后这仍然会丢弃您从服务器获得的内容。（`response`将是一些 HTML ......我不确定你想如何从中获取位置。）所以我想知道一个简单的 HTML 链接是否能满足你的需求。

# objective-c - 从计算机时钟引用的时间码

> ID：14696978
> 
> 赞同：0
> 
> 时间：2013-02-04T22:32:23.133
> 
> 标签：objective-c, cocoa

我基本上想按下一个按钮，以 30fps 开始时间码。（每 1/30 秒调用一次）。我希望将时间码引用到计算机内置的时钟。我可以使用 NSDate 轻松获得 HH:mm:ss 中的当前时间，但我需要计数器从零开始并实现帧格式，如 HH:mm:ss:ff

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:11:34.580

使用 a`CVDisplayLink`来生成具有显卡精度的脉冲，这将比 an`NSTimer`或 dispatch queue 准确得多。CoreMedia/CoreVideo 也原生地谈论 SMPTE。

```
CVReturn MyDisplayCallback(CVDisplayLinkRef displayLink,
  const CVTimeStamp *inNow,
  const CVTimeStamp *inOutputTime,
  CVOptionFlags flagsIn,
  CVOptionFlags *flagsOut,
  void *displayLinkContext) {

    CVSMPTETime timecodeNow = inNow->smpteTime; // it's that easy!

    DoStuffWith(timecodeNow); // you might have to modulo this run a bit if the display framerate is greater than 30fps.

    return kCVReturnSuccess;
}

CVDisplayLinkRef _link;
CVDisplayLinkCreateWithCGDisplay(CGMainDisplayID(),&_link);
CVDisplayLinkSetOutputCallback(_link, MyDisplayCallback, NULL);
CVDisplayLinkStart(_link); 
```

编辑：玩了一会儿之后，我注意到 displaylink 中的 SMPTE 字段没有被填写，但是 OTOH 主机时间是准确的。只需使用：

```
inNow->videoTime / inNow->videoTimeScale; 
```

获取正常运行时间的秒数，以及

```
inNow->videTime % inNow->videoTimeScale 
```

得到剩余部分。

据我所知，这是：

```
@implementation JHDLTAppDelegate

CVReturn MYCGCallback(CVDisplayLinkRef displayLink,
                      const CVTimeStamp *inNow,
                      const CVTimeStamp *inOutputTime,
                      CVOptionFlags flagsIn,
                      CVOptionFlags *flagsOut,
                      void *displayLinkContext) {

    dispatch_async(dispatch_get_main_queue(), ^{

        JHDLTAppDelegate *obj = (__bridge JHDLTAppDelegate *)displayLinkContext;

        uint64_t seconds = inNow->videoTime / inNow->videoTimeScale;
           [obj.outputView setStringValue:[NSString stringWithFormat:@"days: %llu/hours: %llu/seconds: %llu (%llu:%u)",
                                          seconds / (3600 * 24),
                                           seconds / 3600,
                                           seconds,
                                          inNow->videoTime, inNow->videoTimeScale]];

    });

    return kCVReturnSuccess;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    CVDisplayLinkCreateWithCGDisplay(CGMainDisplayID(), &_ref);
    CVDisplayLinkSetOutputCallback(_ref, MYCGCallback, (__bridge void *)self);
    CVDisplayLinkStart(_ref);
}

- (void)dealloc
{
    CVDisplayLinkStop(_ref);
    CVDisplayLinkRelease(_ref);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:57:58.197

这应该使用 NSTimer 对象并在调用中进行视觉更新。您可以将计时器设置为每 3.3333 毫秒触发一次。我看到的唯一问题是很长一段时间，时间码会稍微偏离。此外，如果这与视频相关，请小心，因为某些视频以 24 fps 编码。然后我会让计数器在计时器触发的方法中执行 +1，除非计数器 = 30，然后我会将其重置为 1。您应该能够使用自定义格式字符串初始化 NSDateFormatter 对象以插入当前时间以及您希望向用户显示的格式的计数器变量。

# java - 有没有办法为 Java 文档提供用于 XPath 查询的 XML 模式

> ID：14696981
> 
> 赞同：1
> 
> 时间：2013-02-04T22:32:33.750
> 
> 标签：java, xpath, xsd

`javax.xml.parsers.DocumentBuilder`可以从单个流（即 XML 文件）构建文档。但是，我找不到任何方法来给它一个模式文件。

有没有办法做到这一点，以便我的 XPath 查询可以执行类型感知查询并返回类型化数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:17:45.143

JAXP API 是为 XPath 1.0 设计的，从未升级为处理 2.0 概念，如模式感知查询。如果您使用的是 Saxon，请使用 s9api 接口而不是 JAXP。

以下是从 s9apiExamples.java 下载的 saxon-resources 中获取模式感知 XPath 的示例：

```
/**
 * Demonstrate use of a schema-aware XPath expression
 */

private static class XPathC implements S9APIExamples.Test {
    public String name() {
        return "XPathC";
    }
    public boolean needsSaxonEE() {
        return true;
    }
    public void run() throws SaxonApiException {
    Processor proc = new Processor(true);

    SchemaManager sm = proc.getSchemaManager();
    sm.load(new StreamSource(new File("data/books.xsd")));
    SchemaValidator sv = sm.newSchemaValidator();
    sv.setLax(false);

    XPathCompiler xpath = proc.newXPathCompiler();
    xpath.declareNamespace("saxon", "http://saxon.sf.net/"); // not actually used, just for demonstration
    xpath.importSchemaNamespace("");                         // import schema for the non-namespace

    DocumentBuilder builder = proc.newDocumentBuilder();
    builder.setLineNumbering(true);
    builder.setWhitespaceStrippingPolicy(WhitespaceStrippingPolicy.ALL);
    builder.setSchemaValidator(sv);
    XdmNode booksDoc = builder.build(new File("data/books.xml"));

    // find all the ITEM elements, and for each one display the TITLE child

    XPathSelector verify = xpath.compile(". instance of document-node(schema-element(BOOKLIST))").load();
    verify.setContextItem(booksDoc);
    if (((XdmAtomicValue)verify.evaluateSingle()).getBooleanValue()) {
        XPathSelector selector = xpath.compile("//schema-element(ITEM)").load();
        selector.setContextItem(booksDoc);
        QName titleName = new QName("TITLE");
        for (XdmItem item: selector) {
            XdmNode title = getChild((XdmNode)item, titleName);
            System.out.println(title.getNodeName() +
                    "(" + title.getLineNumber() + "): " +
                    title.getStringValue());
        }
    } else {
        System.out.println("Verification failed");
    }
}

// Helper method to get the first child of an element having a given name.
// If there is no child with the given name it returns null

private static XdmNode getChild(XdmNode parent, QName childName) {
    XdmSequenceIterator iter = parent.axisIterator(Axis.CHILD, childName);
    if (iter.hasNext()) {
        return (XdmNode)iter.next();
    } else {
        return null;
    }
} 
```

}

# objective-c - Objective C NSJSONSerialization 如何解析子 json

> ID：14696986
> 
> 赞同：0
> 
> 时间：2013-02-04T22:32:43.057
> 
> 标签：objective-c, json, nsjsonserialization

如何处理字符串中带有子对象的 json 对象。这是一个例子

[{"_id":"1","Title":"Pineapple","Description":"Dole Pineapple","Icon":"icon.png","Actions":{"ACTION_PHOTO":"coupon.png ", "ACTION_LINK":"google.com"}}]

你如何解析第二个 json "Actions" ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T23:31:44.327

您在这里拥有的是一个字典数组（有 1 个条目），其中顶级字典中的一个条目也是字典。所以你可能有这样的东西来解析它：

```
NSError *e = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error: &e];

if (jsonArray) {
    NSDictionary *dictActions;
    for (NSDictionary *dict in jsonArray) {
        dictActions = [dict objectForKey:@"Actions"];
        NSLog(@"The action link is: %@", [dictActions objectForKey@"ACTION_LINK"]);
    }
} else {
    NSLog(@"Error parsing JSON: %@", [e localizedDescription]);
} 
```

# visual-studio-2010 - 在 Dropbox 中托管 Visual Studio 项目

> ID：14696987
> 
> 赞同：6
> 
> 时间：2013-02-04T22:32:43.573
> 
> 标签：visual-studio-2010, windows-7, windows-8, dropbox

我在台式机和笔记本电脑上都进行开发，并且经常在它们之间切换。将项目文件夹保存在我的保管箱中并始终从那里访问/编辑是否会出现任何问题？我在两者上都运行 VS2010，但在一个上运行 W7，在另一个上运行 W8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-23T09:31:04.997

我经常使用它。但我确实遇到了一些问题。似乎有时 VS 和 Dropbox 会发生冲突。这通过留下一些临时源文件或在文件编译期间被锁定的错误来显示。

事实上，我是在寻找如何解决它们时来到这里的。但它们仍然只是一个小问题，我一直以这种方式使用它很长一段时间。

编辑：不只是我。请参阅SuperUser 上[的 Visual Studio 2012 和 Dropbox don't play nice together](https://superuser.com/questions/485041/visual-studio-2012-and-dropbox-dont-play-nice-together)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T17:32:41.600

我正在使用 Dropbox 来托管我的项目，我直接在那里进行编辑和构建，并且从未遇到任何问题。Win7，VS2010，CPP。我发现 Dropbox 比版本控制软件更简单且同样强大。我是个大粉丝。我应该说 Microsoft OneDrive 曾经让我非常失望，而且我不再信任它。使用 Dropbox，我总是仔细检查系统托盘中的图标，以确保在我关闭计算机之前完成更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T18:14:08.733

我同时使用 git 和 Dropbox，因为我还切换了我正在使用的机器。通过这种方式，我可以与团队的其他成员一起使用源代码控制，同时还能从我离开的地方继续。我的两台同步电脑是我在工作和家里的一台。两个桌面，几乎总是打开和运行 dropbox。当机器离线或其他情况时，我很少遇到冲突。99% 的解决方案是简单地删除任何冲突的文件。因为我一直在更新 git，所以如果我不得不删除所有本地代码也没关系，因为我总是可以取回它。因此，除了能够在一项紧急任务中完成工作，然后在我回到家时从中断的地方继续工作之外，这真的没有任何意义。

# mysql - 简单的 MySQL 选择查询需要 4 小时

> ID：14696988
> 
> 赞同：1
> 
> 时间：2013-02-04T22:32:44.497
> 
> 标签：mysql

如果您能帮助解决一个新手问题，我将不胜感激。我应用以下 SQL：

```
INSERT INTO t03_hesid_history(uniqueID, hes_data_all_years.extract_hesid, FIELD1, FIELD2)  
SELECT uniqueID, hes_data_all_years.extract_hesid, FIELD1, FIELD2  
FROM hes_data_all_years  
INNER JOIN T02_hesid_grouped  
ON hes_data_all_years.extract_hesid = T02_hesid_grouped.extract_hesid; 
```

hes_data_all_years 表有 1.88 亿条记录，T02_hesid_grouped 表有 80,000 条记录。T02_hesid_grouped 表有一个名为 extract_hesid 的（唯一）字段，该字段已编入索引。hes_data_all_years 有许多字段，并且在正在连接的 extract_hesid 字段上有一个索引。

该查询旨在提取 hes_data_all_years 中与 T02_hesid_grouped 字段匹配的所有记录。我希望输出提供 1-2m 条记录。

查询大约需要 4 小时...

时间长度是由于数据集大小还是可以进行一些优化？非常感谢！！

SELECT 部分的 EXPLAIN 输出如下所示：

```
1   SIMPLE  T02_hesid_grouped   index   I_HESID I_HESID 43      79824   Using index
1   SIMPLE  hes_data_all_years  ref I_HESID I_HESID 43  hes.T02_hesid_grouped.extract_hesid 1   Using where 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:36:38.577

这可能是生成结果集或将其插入目标表时的性能问题。

通常不会对`SELECT *`用于插入的结果集执行此操作，而是按与目标表中的字段相同的顺序命名要选择的列。您的结果集有两列名为 `extract_hesid`. 这似乎不太可能是你想要的。

`hes_data_all_years.extract_hesid`中与中的行`hes_data_all_years`不匹配的行的值是`T02_hesid_grouped`多少？如果这些值不为 NULL，事情会更快。

您的表，尤其是目标表，是否使用 MyISAM？如果是这样的话，事情会更快，因为 InnoDB 是面向事务的，并且在执行几兆行的 INSERT 时必须生成回滚数据。

188 兆行并不小，而且您经过的时间也不是完全离谱。它很长，但并不荒谬。您可能需要检查您的 MySQL 服务器是否有足够的 RAM。或者，如果这是一年一次或一次，您可能只想宣布胜利并继续前进。

# c - 交换功能不起作用

> ID：14696991
> 
> 赞同：0
> 
> 时间：2013-02-04T22:32:58.340
> 
> 标签：c, swap

为什么这种交换方法不起作用

```
void swap(int *x,int *y){

     int *temp;
     temp = x;
     x = y;
     y = temp;
} 
```

为什么？我觉得和普通的一样。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:36:19.553

C 按值传递函数参数：您只是交换指针的副本。

如果你想交换两个`int`：

```
void swap(int *x,int *y)
{
   int temp;
   temp = *x;
   *x = *y;
   *y = temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:36:06.617

您正在交换存储在堆栈上的临时指针中的地址，而不是存储在它们指向的内存中的值。你想这样做：

```
void swap(int *x,int *y){

     int temp = *x;
     *x = *y;
     *y = temp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:36:29.243

1.  `x`并且`y`表现得就像局部变量一样。

2.  您的代码正在交换`x`和`y`值，而不是它们指向的值。

# validation - 如何避免在域层和应用层之间重复验证逻辑？

> ID：14696995
> 
> 赞同：3
> 
> 时间：2013-02-04T22:33:12.260
> 
> 标签：validation, domain-driven-design, dry, code-duplication

我的域模型中的任何给定实体都有几个需要强制执行的不变量——项目名称必须至少有 5 个字符，必须存在某个产品才能与项目关联，截止日期不得早于当前日期和时间等

显然我希望客户端能够显示与验证相关的错误消息，但我不想在程序的几个不同层之间不断维护验证规则——例如，在小部件、控制器、应用程序服务中或命令对象和域。另外，描述性错误消息似乎与表示相关，不属于域层。我该如何解决这些困境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:20:39.693

我会创建与您预期的错误条件相关的特定异常。这是一般异常处理的标准，有助于解决您的问题。例如：

`public class ProjectNameNotLongEnoughException : System.Exception`

或者

`public class DueDatePriorToCurrentDateException : System.Exception`

在可能抛出异常的方法的 xml 注释中标记这些可能的异常，以便针对您的域模型编写的应用程序将知道要注意这些异常，并能够在应用程序的表示中显示消息。这还允许您根据文化获得本地化的错误消息，而不会因表示问题而使您的域模型混乱。

如果你选择进行客户端验证，恐怕你也吃不下蛋糕。在这种情况下，您可能必须复制验证逻辑才能在维护架构的同时实现所需的功能。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-13T09:11:16.587

我意识到这是一个老问题，但这可能会帮助处于类似情况的其他人。

您在此处具有需要封装到域模型中的行为和条件。

例如，我建议对某个长度有要求的 ProjectName 应该封装在 ValueObject 中。对某些人来说，这似乎有些过火，但在我们的领域模型中，我们几乎总是将原生类型（尤其是字符串）封装在一个 ValueObject 中。然后，这允许您在 ValueObject 的构造函数中滚动验证。

在构造函数中，您可以抛出与传入参数冲突相关的异常。这是我们的 ZoneName 值对象之一的示例：

```
public ZoneName(string name)
{

    if (String.IsNullOrWhiteSpace(name))
    {
        throw new ArgumentNullException("Zone Name is required");
    }

    if (name.Length > 33)
    {
        throw new ArgumentException("Zone name should be less than 33 characters long");
    }

    Name = name;
} 
```

现在，该 ValueObject 的使用者可以在调用构造函数之前执行自己的验证，也可以不执行，但无论哪种方式，您的不变量都将与您的模型设计保持一致。

我们在您的领域模型中构建验证规则，然后在您的 UI 中使用它们的一种方法是使用 Mediatr 模块，该模块使用一个模型输入，一个模型输出模式，并允许您为每个查询或命令定义验证器楷模。这些是使用 FluentValidation 定义的。然后，您可以将 Provider 添加到 MVC 中的 ModelValidatorProviders。在此处查看 JBogards ContosoUniversity 示例[https://github.com/jbogard/ContosoUniversity/tree/master/src/ContosoUniversity](https://github.com/jbogard/ContosoUniversity/tree/master/src/ContosoUniversity)并查看 DependancyResolution 文件夹 DefaultRegistry.cs。

您的其他产品示例必须存在才能链接到项目。在我看来，这听起来像是域服务将是促进 2 个有界上下文之间合作的最佳选择？域服务将确保不变量在有界上下文中保持一致。该域服务不会公开公开，因此您需要一个 ApplicationService 或 CQRS 类型的接口，它将该 DomainService 作为依赖项，允许 DomainService 执行所需的操作。DomainService 应该包含域行为，而应用程序服务应该只是调用该函数的促进者。然后，您的 DomainService 将引发异常，而不是导致不一致或无效的不变量。

您最终应该处于没有重复验证的位置，或者至少您永远不会得到无效的不变量，因为在某些时候没有执行验证，因为验证总是在您的域模型中处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T22:33:12.260

虽然描述性错误消息似乎更多地与表示相关而不是业务，但描述性错误消息实际上体现了域模型中包含的业务规则——并且在抛出任何类型的异常时，最好传递一些描述性消息. 此消息可以重新抛出层以最终显示给用户。

现在，当涉及到抢先验证（例如允许用户仅键入某些字符或从特定范围的选项中进行选择的小部件）时，实体可能包含一些常量或方法，这些常量或方法返回可以使用的动态生成的正则表达式通过视图模型，然后由小部件实现。

# string - 为什么是 wcout << ""; 可以，但是 wcout << string(); 不是？

> ID：14696997
> 
> 赞同：17
> 
> 时间：2013-02-04T22:33:23.367
> 
> 标签：string, encoding, iostream, c++

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    wcout << L"Hello";          // OK.
    wcout << wstring(L"Hello"); // OK.
    wcout << "Hello";           // OK. Why?
    wcout << string("Hello");   // Error. Why?
} 
```

为什么`std::wcout`接受窄字符串文字作为其参数但不接受窄字符串对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T22:49:21.863

这是由 C++11 标准的第 27.7.3.6.4 节规定的，其中指定了以下两个重载运算符（以及其他运算符）：

```
template<class charT, class traits>
basic_ostream<charT,traits>& operator<<(
    basic_ostream<charT,traits>& out, 
    const charT* s
    );

template<class charT, class traits>
basic_ostream<charT,traits>& operator<<(
    basic_ostream<charT,traits>& out, 
    const char* s
    ); 
```

最后一个重载显式处理`char`基于 - 的 C 字符串。这意味着即使对于`basic_ostream<>`带有参数的类模板的实例化，`wchar_t`也会有一个处理窄`char`字符串的重载。

此外，根据 § 27.7.3.6.4/5：

> 填充如 22.4.2.2.2 中所述确定。**从 s 开始的 n 个字符使用 out.widen (27.5.5.3) 加宽。将加宽的字符和任何所需的填充插入到 out 中**。调用宽度（0）。

* * *

另一方面，该语句`wcout << string("Hello");`无法编译，因为`string`它没有隐式转换为`const char*`，并且因为没有重载，`operator <<`所以将`string`使用一种字符类型构建的语句插入到具有不同基础字符类型的输出流中。

在标准术语中（参见第 21.4.8.9 节），重载的定义`operator <<`如下所示`std::string`：

```
template<class charT, class traits, class Allocator>
basic_ostream<charT, traits>& operator<<(
    basic_ostream<charT, traits>& os,
    const basic_string<charT,traits,Allocator>& str
    ); 
```

如您所见，相同的模板参数`charT`用于实例化`basic_ostream`和`basic_string`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:47:58.907

对于第一个，我猜[这个重载](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2)被使用了：

```
template< class CharT, class Traits >
basic_ostream<CharT,Traits>& operator<<( basic_ostream<CharT,Traits>& os, 
                                         const char* s ); 
```

本质`wstream`上是一个`basic_ostream<wchar_t>`.

为什么`string("Hello")`不起作用，这仅仅是因为没有从`string`to的转换`wstring`，也没有提供的重载`operator<<`。