# StackOverflow 问答 13399000-13399999

# python - 在 django ajax_lookup 中配置 ajax 查找

> ID：13399000
> 
> 赞同：1
> 
> 时间：2012-11-15T13:59:01.733
> 
> 标签：python, django, django-models, django-ajax-selects

我正在使用[django_ajax](https://github.com/crucialfelix/django-ajax-selects)库在其中一个表单元素中进行 ajax 查找。

**该模型：**

```
class Alpha(models.Model):
    name = models.CharField()
    description = models.TextField()
    submitted = models.BooleanField(default=False) 
```

**表格**

```
class MyForm(forms.Form):
    alpha = AutoCompleteSelectField('alpha')

    def __init__(self, loser, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.loser = loser
        self.fields['alpha'].widget.attrs['class'] = 'big-text-box' 
```

当前实现的问题是它向我显示了所有`alpha`条目，但在查找字段中我只想要`alphas`那些`submitted`是`false`.

**如何编写选择器？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:02:07.907

正如项目的[自述文件](https://github.com/crucialfelix/django-ajax-selects#readme)中所解释的，您可以使用自定义查找类来实现您的目标。

在你的 app 目录中创建一个文件`lookups.py`（名称是常规的），并在其中定义以下类：

```
from ajax_select import LookupChannel
from django.utils.html import escape
from django.db.models import Q
from yourapp.models import *

class AlphaLookup(LookupChannel):

    model = Alpha

    def get_query(self,q,request):
        # The real query
        # Here the filter will select only non-submitted entries
        return Alpha.objects.filter(Q(name__icontains = q) & Q(submitted = false)).order_by('name')

    def get_result(self,obj):
        u""" result is the simple text that is the completion of what the person typed """
        return obj.name

    def format_match(self,obj):
        """ (HTML) formatted item for display in the dropdown """
        return escape(obj.name)

    def format_item_display(self,obj):
        """ (HTML) formatted item for displaying item in the selected deck area """
        return escape(obj.name) 
```

请注意，原始字符串应始终使用in和中的`escape()`函数进行转义。`format_match``format_item_display`

就您而言，关键是`get_query`方法。应用于的过滤器`Alpha.objects`仅选择未提交的条目。

不要忘记更新您`settings.py`以使用查找类而不是默认行为：

```
AJAX_LOOKUP_CHANNELS = {
    'alpha' : ('yoursite.yourapp.lookups', 'AlphaLookup'),
} 
```

# vb.net - 通过互操作在 VB6 中使用 VB.NET 类需要类具有构造函数吗？

> ID：13399001
> 
> 赞同：2
> 
> 时间：2012-11-15T13:59:08.923
> 
> 标签：vb.net, vb6, constructor, com-interop

当我尝试`VB.NET`通过 interop in 创建对象时`VB6`，我注意到如果我的`VB.NET`类没有构造函数，我会收到此错误：

> 错误 430 - 类不支持自动化

我所要做的就是在`VB.NET`类中放置一个空的构造函数，例如：

```
Public Sub New()

End Sub 
```

并且避免了错误。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:53:19.303

VB6 通过 COM 创建对象，使用 COM coclass 的类工厂。底层方法是 IClassFactory::CreateInstance()。此方法不允许将任何参数传递给工厂。因此，[ComVisible] .NET 类必须有一个不带任何参数的构造函数。

.NET 已经为一个类创建了一个默认构造函数，除非您自己指定一个带参数的构造函数。永远不会使用的，您不妨将其删除。现在您也不再需要空的默认构造函数了。

# salesforce - 为标准对象动态设置选项列表值

> ID：13399003
> 
> 赞同：1
> 
> 时间：2012-11-15T13:59:14.087
> 
> 标签：salesforce

我想将自定义选项列表字段添加到`Case`Salesforce 中的对象，以便在创建新案例时可以使用该字段值。但是我不想在创建字段时添加选项列表值，选项列表的值应该根据另一个对象的字段值动态生成。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:27:00.183

如果对象在案例中的某个地方链接（例如通过查找），那么看起来[工作流 + 字段更新](https://cs7.salesforce.com/help/doc/en/creating_workflow_rules.htm)将是很好的候选者。

如果它是一个用户永远无法编辑的完全系统生成的字段，那么您应该使用公式字段（只要使用 SOQL 查看或检索案例，它的值就会自动计算，因此“总是新鲜的”。基于工作流的值通常不会如果您的其他对象发生变化，请更新 Case）。在 Case 上启动新字段的创建者，然后单击帮助图标以阅读有关公式字段的更多信息。

# mysql - MySQL、XML 布尔值和整数：不正确的整数值：

> ID：13399004
> 
> 赞同：2
> 
> 时间：2012-11-15T13:59:16.027
> 
> 标签：mysql, insert, integer, tinyint

我正在从 ebay 抓取 xml 数据并将结果放入 MySQL，抓取数据工作正常，但是由于几个 xml 标记值的整数值不正确，输入到数据库失败。

xml 标记值是单词“true”（不带引号），这是 db sql：

```
CREATE TABLE ebay_categories (
CategoryID int(10) NOT NULL default '0',
CategoryLevel int(5) NOT NULL default '0',
CategoryName varchar(120) NOT NULL default '',
CategoryParentID int(10) NOT NULL default '0',
LeafCategory int(1) NOT NULL default '0',
AutoPayEnabled int(1) NOT NULL default '0',
Expired int(1) NOT NULL default '0',
IntlAutosFixedCat int(1) NOT NULL default '0',
Virtual int(1) NOT NULL default '0',
LSD int(1) NOT NULL default '0',
ORPA int(1) NOT NULL default '0',
PRIMARY KEY  (CategoryID),
KEY catlevel (CategoryLevel),
KEY parent (CategoryParentID),
KEY ape (AutoPayEnabled),
KEY expired (Expired),
KEY IAFC (IntlAutosFixedCat),
KEY virtual (Virtual),
KEY lsd (LSD),
KEY orpa (ORPA),
KEY leaf (LeafCategory)
) TYPE=MyISAM; 
```

我尝试过 int、tinyint、Boolean（诉诸 tinyint）无济于事，但仍然遇到这个问题。数据库连接没有任何问题，因为我使用 varchar 作为 LeafCategory 和其他的 int 类型进行了测试，一切正常。

在插入数据库之前，我可以做些什么而不通过正则表达式进行搜索和替换？

编辑：

```
 $query = "INSERT INTO `ebay_categories` (`CategoryID`, `LeafCategory`)VALUES           ('$xmlCategoryID', '$xmlLeafCategory')";

    if (mysqli_query($link, $query)) {
    echo "Successfully inserted " . mysqli_affected_rows($link) . " row";
} else {
    echo "Error occurred: " . mysqli_error($link);
} 
```

从客户端代码展开的 SQL 语句是：

```
 INSERT INTO `ebay_categories` 
                (`CategoryID`, `LeafCategory`)
         VALUES 
                ('$xmlCategoryID', '$xmlLeafCategory')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:28:14.843

您遇到的错误是告诉您 XML 中的至少一条记录除了 $xmlCategoryID 或 $xmlLeafCategory 的有效整数之外还有其他内容。

该怎么办？

A. 您可以让错误消息显示有问题的数据，如下所示：

```
 echo "Error occurred: " . mysqli_error($link);
  echo "Bad data was either ##$xmlCategoryID## or ##$xmlLeafCategory##."; 
```

请注意，我使用了##$value##，因此您可以检测错误消息中的空字符串。你可能应该这样做。

B. 您可以尝试更改这些列的列定义以删除 NOT NULL 声明。如果实际上这些值之一为空，这可能会解决您的问题。

C. 您可能需要`bigint`此信息的值。也就是说，它们可能是非常大的数字。

D. 如果您对空值或错误值不够关心而无法检测它们，您可以试试这个。

```
INSERT INTO `ebay_categories` 
             (`CategoryID`, `LeafCategory`)
      VALUES 
             (CAST(IFNULL('$xmlCategoryID',-1) AS INT)
            (CAST(IFNULL('$xmlLeafCategory',-1) AS INT) 
```

这会将空值转换为 -1，将非整数值转换为 0。

*编辑：*哦，我现在明白了。您的 leafCategory 项目不是 XML 中的数字，而是真/假/空值。大概 false 和 empty 是同一个意思。

试试这个，使用 SQL case 语句将 true/other 转换为 1/0。

```
INSERT INTO `ebay_categories` 
             (`CategoryID`, `LeafCategory`)
      VALUES (
              '$xmlCategoryID',
              CASE '$xmlLeafCategory' WHEN 'true' THEN 1 ELSE 0 END
              ) 
```

最后，*危险！*您需要使用准备好的语句，并且需要清理从 XML 文件中提取的这些值。如果您不这样做，那么有人将能够通过向您的软件提供有毒的 XML 文件来欺骗您的软件破坏您的数据库。请阅读 SQL 注入。

# iphone - 用tableview重新加载uiviewcontroller的table view subobject的数据

> ID：13399011
> 
> 赞同：0
> 
> 时间：2012-11-15T13:59:34.770
> 
> 标签：iphone, uitableview, subclass, reloaddata

我有一个班级 SelezionaProfilo，在这个班级我有一个球员名单：

```
@interface SelezionaProfilo : UIViewController < UITableViewDelegate, UITableViewDataSource >  {

  UITableView *myTableView;
  //my staff
}

@property (nonatomic, retain) IBOutlet UITableView *myTableView; 
```

一切正常。

我已经构建了一个嵌入在导航控制器中的子类 SelectPlayerViewController，因为我希望对推送一行有不同的反应：

```
 @interface SelectPlayerViewController : SelezionaProfilo { 
```

一切正常，我有球员名单。我有不同的行动。

在 SelectPlayerViewController.m 中，我在导航栏上添加了一个按钮，在推送导航中添加了转到另一个类的播放器按钮。现在播放器已创建，但是当视图返回到 SelectPlayerViewController 时，我看不到最后一个播放器。

在 SelezionaProfilo.m 中：

```
- (void)viewWillAppear:(BOOL)animated {   
    [self.myTableView reloadData];
    [super viewWillAppear:animated];
} 
```

并在 SelectPlayerViewController.m

```
- (void)viewDidAppear:(BOOL)animated {   
    [super.myTableView reloadData];
} 
```

我确定输入此方法，但表格不会刷新。我有一个标签栏，我在另一个标签中有 SelezionaProfilo，如果我选择这个，我可以看到最后一个玩家，所以 SelezionaProfilo 类可以正常工作。

任何人都可以建议我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:52:56.660

我解决了！！！所以如果对某人感兴趣....

我在 xib 中有一个表视图，我必须将它与 File's Owner 连接到两个引用插座：

```
view
myTableView 
```

# dynamics-ax-2009 - 取消后发送给用户的电子邮件警报（批处理作业）

> ID：13399013
> 
> 赞同：1
> 
> 时间：2012-11-15T13:59:38.877
> 
> 标签：dynamics-ax-2009, x++, axapta

是否有一个表格或一个类可以显示所有批处理作业的所有电子邮件？我们有用户收到取消工作的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:04:35.987

不，没有电子邮件日志。

您必须手动单击等待批处理作业上的警报按钮（如`BatchJobAlerts`表中设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:17:28.850

同意 Jan 的观点，没有电子邮件日志。

更进一步，被取消的工作不应该继续发送电子邮件......所以听起来工作实际上并没有被取消。

要查找用户设置的警报，请在 AOT 中转到`Tables\BatchJobAlerts`. 在那里您可以看到用户和电子邮件等内容。该`BatchJobId`字段是一个可`Tables\BatchJob`在 recId 字段中查找的 recId。这将告诉您有问题的批处理作业。

# eclipse - 是否有可能在 Eclipse 中显示符号链接资源的图标？

> ID：13399015
> 
> 赞同：6
> 
> 时间：2012-11-15T13:59:48.673
> 
> 标签：eclipse, symlink, indicator

我使用 Linux 并在我的项目中使用符号链接（符号链接）在不同的地方共享公共文件。我还使用 subversive 作为团队提供者插件。

对于符号链接文件夹，Eclipse 或更好的 Subclipse 会在项目资源管理器中的文件图标上显示一个箭头覆盖。但是对于符号链接文件，这个小箭头没有显示。因此无法判断该文件是否是符号链接的，因为它看起来像一个普通文件。

是否有一个选项或插件可以有一个视觉指示器来判断它是常规文件还是符号链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:42:57.680

Eclipse 的下一个版本，即 4.3，将包括一个符号链接装饰。

# batch-file - 从批处理文件中重定向标准输出和标准错误

> ID：13399017
> 
> 赞同：23
> 
> 时间：2012-11-15T14:00:00.433
> 
> 标签：batch-file, stdout, stderr

有没有办法从里面为批处理文件重定向标准输出和标准错误。

我在想像

```
set STDOUT=stdout.log
echo Some text
a.exe
b.exe
c.exe 
```

和和`Some text`的输出`a.exe`都在哪里`b.exe``c.exe``stdout.log`

这可能吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-15T15:15:18.667

为整个命令集合重定向一次比重定向（附加）每个单独的命令更有效。初始化重定向需要时间。对于一些重定向的命令可能并不明显，但如果在具有多次迭代的循环中完成，它可能会变得非常重要。

一种方法是将整个重定向命令块括在括号内，并在括号外重定向

```
>stdout.log 2>&1 (
  echo Some text
  a.exe
  b.exe
  c.exe
) 
```

另一种选择是将您的命令放在子程序中并重定向 CALL

```
call :redirect >stdout.log 2>&1
exit /b

:redirect
echo Some text
a.exe
b.exe
c.exe
exit /b 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T14:05:50.950

是的，您需要将 stdout 重定向并附加到您的文件 ( `1>> %STDOUT%`) 并将 stderr 连接到 stdout ( `2>&1`)：

```
set STDOUT=stdout.log
echo Some text 1>> %STDOUT% 2>&1
a.exe 1>> %STDOUT% 2>&1
b.exe 1>> %STDOUT% 2>&1
c.exe 1>> %STDOUT% 2>&1 
```

@EitanT 正确地指出，您的问题并不一定意味着将 stderr 和 stdout 都写入同一个文件。因此，为了完整起见，这是一个写入单独文件的版本：

```
set STDOUT=stdout.log
set STDERR=stderr.log
echo Some text 1>> %STDOUT% 2>> %STDERR%
a.exe 1>> %STDOUT% 2>> %STDERR%
b.exe 1>> %STDOUT% 2>> %STDERR%
c.exe 1>> %STDOUT% 2>> %STDERR% 
```

# unit-testing - 如何测试单元框架？

> ID：13399018
> 
> 赞同：2
> 
> 时间：2012-11-15T14:00:05.597
> 
> 标签：unit-testing

作为一个爱好项目，我正在开发一个小型 Bash 单元测试框架。现在基本功能已经实现，下一步就是为它编写测试。

但是如何使用框架本身来测试我的框架呢？

我试图用谷歌搜索这个问题的答案，但找不到关于这个主题的任何信息。

到目前为止，我提出的想法是为一些琐碎的事情编写测试，这些事情利用了测试框架本身的所有特性。如果测试都是绿色的，那很好。这些基本测试也可以作为某种文档。

但我不知道这是否真的是一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:16:18.573

问题将是测试测试是否会失败。单元测试应该都是“绿色的”。所以选择一些需要失败来证明它正确的测试不是一个选择。

我认为解决方案将基于安静的技术。很难给出关于“对测试框架进行单元测试”的一般建议。哪些部分属于框架？读取包含单元测试的文件的部分，运行它们的部分，编写报告的部分，帮助程序库，如断言，...？

您需要拆分这些部分并使其可以单独运行。那么它与任何其他测试没有区别。

可能您找到了一种在单元测试中运行整个测试运行程序的方法。这不是单元测试，而是集成测试。这种测试可能会成为维护问题，因为它们通常非常复杂，使用来自操作系统的文件系统和其他不应该被单元测试使用的东西。考虑一下这是否值得努力。

总有一部分是无法测试的。将所有内容放在一起并在真实环境中运行应用程序（无论它是什么）的部分。这里没有区别。它甚至更容易，因为一些“最终用户环境”可以通过“绿色”测试来测试。

# c - 在 C & GLUT 中获取用户鼠标点击的位置

> ID：13399021
> 
> 赞同：6
> 
> 时间：2012-11-15T14:00:11.993
> 
> 标签：c, mouse, glut

我想将用户的鼠标点击位置存储在两个变量上

```
float x,y; 
```

我将 openGL 与`C`. 我已经有一个使用 glut 的鼠标功能，但是当我尝试打印 x 和 y 时，它给了我类似的值`x = 134; y = 150`，而我的屏幕正交在 0 和 1 之间。

我想得到确切的点来在那里画一个点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:16:45.597

您需要注册一个鼠标回调函数，它具有以下签名：

```
void glutMouseFunc(void (*func)(int button, int state,
                                int x, int y)); 
```

[这里](http://www.lighthouse3d.com/tutorials/glut-tutorial/the-mouse/)有一个涵盖一些基础知识的教程

编辑：如果您希望将位置标准化（0.0 - 1.0）除以宽度和高度：

```
float x1 = x /(float) width;
float y1 = y /(float) height; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-13T19:03:37.373

这是我写的一个简单的程序，希望它能帮助像它帮助我的每个人。

```
#include <cstdlib>
#include <GL/glut.h>
#include <iostream>

#include "Vec2.h"

Vec2 pos(0.0, 0.0);
Vec2 go(1.0, 1.0);

float mouseX;
float mouseY;
float angle = 0.0f;

void changeSize(int w, int h) {

    // Prevent a divide by zero, when window is too short
    // (you cant make a window of zero width).
    if (h == 0)
        h = 1;

    float ratio =  w * 1.0 / h;

    // Use the Projection Matrix
    glMatrixMode(GL_PROJECTION);

    // Reset Matrix
    glLoadIdentity();

    // Set the viewport to be the entire window
    glViewport(0, 0, w, h);

    // Set the correct perspective.
    gluPerspective(45.0f, ratio, 0.1f, 100.0f);

    // Get Back to the Modelview
    glMatrixMode(GL_MODELVIEW);
}

void renderScene(void) {

    // Clear Color and Depth Buffers
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Reset transformations
    glLoadIdentity();
    // Set the camera
    gluLookAt(  0.0f, 0.0f, 10.0f,
                0.0f, 0.0f,  0.0f,
                0.0f, 1.0f,  0.0f);

    glPushMatrix();
    glRotatef(angle, 0.0f, 0.0f, 1.0f);
    glTranslatef(0.0, 0.0, 0.0);
    glBegin(GL_LINE_LOOP);
        glVertex3f( 0.0f, 2.0f, 0.0f);
        glVertex3f( -1.0f, -1.0f, 0.0f);
        glVertex3f( 1.0f, -1.0f, 0.0f);
    glEnd();
    glPopMatrix();

    //angle+=0.01f;

    glutSwapBuffers();
}

void mouseMove(int x, int y) 
{
    mouseX = -1.0 + 2.0 * x / 320 ;
    mouseY = 1.0 - 2.0 * y / 320 ;

    angle = 90 + atan2(pos.y-mouseY, pos.x-mouseX) * 180 / 3.1415926;

    //std::cout << mouseX << ", " << mouseY << std::endl;
    //std::cout << x << ", " << y << std::endl;
    std::cout << angle << std::endl;
}

int main(int argc, char **argv) {

    // init GLUT and create window
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(320,320);
    glutCreateWindow("Lighthouse3D- GLUT Tutorial");

    // register callbacks
    glutDisplayFunc(renderScene);
    glutReshapeFunc(changeSize);
    glutIdleFunc(renderScene);

    glutMotionFunc(mouseMove);

    // enter GLUT event processing cycle
    glutMainLoop();

    return 1;
} 
```

# scripting - / 此时出乎意料 - 批处理脚本

> ID：13399026
> 
> 赞同：0
> 
> 时间：2012-11-15T14:00:27.387
> 
> 标签：scripting, batch-file

我正在使用下面的批处理脚本，但我不断收到错误“/此时意外。”

有任何想法吗？

谢谢

```
@ Echo off 
set n_user =%%%% username password;
c:\windows\system32\find / n "%% n_user" C:\Users\Voyager\Desktop\server installs\OpenVPN\config\list.txt> result.txt 
for / f "skip = 1"%% a in (result.txt) do set n =%% a
if "% s%" == "----------" exit 1
exit 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:06:54.507

删除(should be ) 和(should be )之间的空格 `/`和 switch 字符。（您还有其他几个空格问题。我也已修复它们。您还需要将包含空格字符的路径名括在双引号中。）`/ n``/n``/ f``/f`

```
@ Echo off 
set n_use =%%%% username password;
c:\windows\system32\find /n "%%n_user" "C:\Users\Voyager\Desktop\server installs\OpenVPN\config\list.txt"> result.txt 
for /f "skip=1" %%a in (result.txt) do set n=%%a
if "%s%" == "----------" exit 1
exit 0 
```

# html - @media（最大宽度：350 像素）和（最小高度：166 像素）上的 Soundcloud HTML5 小部件 CSS 错误

> ID：13399029
> 
> 赞同：0
> 
> 时间：2012-11-15T14:00:36.217
> 
> 标签：html, widget, soundcloud

在“@media (max-width: 350px) and (min-height: 166px)”上，“sound_art *sc-border-box* sound_artLeft”类的 div 被隐藏，但“sound_ *content sound* ”类的 div 的位置_contentRight" 不正确。位置“left: 165px”应该是“left: 0px”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:41:54.293

这已修复，将在几分钟内部署。对造成的不便表示歉意。

# html - NP ++中的正则表达式查找不在 html标签内的查询

> ID：13399031
> 
> 赞同：0
> 
> 时间：2012-11-15T14:00:40.823
> 
> 标签：html, regex, search, notepad++

我需要 NP++ 中的正则表达式来查找不在 html 文件中的锚点或超链接标签内的查询。因此它会找到任何给出的搜索查询（一个词或几个词，例如：“test”或“提出问题”，即未链接。或者换句话说：查找未链接的搜索查询，并忽略链接的查询。

鉴于链接可以是直接链接，该标签不是直接在查询之前和之后，或者在多行中。

例子：

```
<p>any text here, something else..</p>
<p>more
<a href="../folder/filename.html">test</a>

to find through other test.&nbsp; With much
<a href="http://www.site.com/folder/filename45.html">
                <font color="#800000">Ask a question</font></a> more test</p>
<p>and test to Ask a question here.</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:07:37.930

正则表达式没有完美的解决方案。最好使用编程语言和 DOM 解析器来做到这一点。

这是您可以获得的最好的：

```
test(?!((?!<a\W).)*</a) 
```

如果在下一次打开之前没有，它使用两个[负前瞻](http://www.regular-expressions.info/lookaround.html)来匹配。确保检查并更新到 Notepad++ 6。`test``</a``<a``. matches newline`

`<a`如果您有或`</a`在注释中或在属性字符串中，这将开始失败。甚至不说无效的 HTML。

# haskell - 对大量数字求和太慢了

> ID：13399032
> 
> 赞同：8
> 
> 时间：2012-11-15T14:00:43.143
> 
> 标签：haskell, ghc

任务：“对前 15,000,000 个偶数求和。”

哈斯克尔：

```
nats = [1..] :: [Int]
evens = filter even nats :: [Int]

MySum:: Int
MySum= sum $ take 15000000 evens 
```

...但`MySum`需要很长时间。更准确地说，比 C/C++ 慢大约 10-20 倍。

很多时候我发现，自然编码的 Haskell 解决方案比 C 慢 10 倍。我希望 GHC 是一个非常巧妙地优化编译器和任务，因此这似乎并不难。

因此，人们会期望比 C 慢 1.5-2 倍。问题出在哪里？

**这可以更好地解决吗？**

这是我与之比较的 C 代码：

```
long long sum = 0;
int n = 0, i = 1;

for (;;) {

  if (i % 2 == 0) {
    sum += i;
    n++;
  }

  if (n == 15000000)
    break;

  i++;
} 
```

**编辑 1**：我真的知道，它可以在 O(1) 中计算。请抵抗。

**编辑2**：我真的知道，偶数是`[2,4..]`但函数`even`可能是别的东西`O(1)`，需要作为一个函数来实现。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T14:34:31.163

# 列表不是循环

因此，如果使用列表作为循环替换，请不要感到惊讶，如果循环体很小，您的代码会变慢。

```
nats = [1..] :: [Int]
evens = filter even nats :: [Int]

dumbSum :: Int
dumbSum = sum $ take 15000000 evens 
```

`sum`不是“好消费者”，因此 GHC （还）不能完全消除中间列表。

如果您使用优化进行编译（并且不导出`nat`），GHC 足够聪明，可以将`filter`与枚举融合，

```
Rec {
Main.main_go [Occ=LoopBreaker]
  :: GHC.Prim.Int# -> GHC.Prim.Int# -> [GHC.Types.Int]
[GblId, Arity=1, Caf=NoCafRefs, Str=DmdType L]
Main.main_go =
  \ (x_aV2 :: GHC.Prim.Int#) ->
    let {
      r_au7 :: GHC.Prim.Int# -> [GHC.Types.Int]
      [LclId, Str=DmdType]
      r_au7 =
        case x_aV2 of wild_Xl {
          __DEFAULT -> Main.main_go (GHC.Prim.+# wild_Xl 1);
          9223372036854775807 -> n_r1RR
        } } in
    case GHC.Prim.remInt# x_aV2 2 of _ {
      __DEFAULT -> r_au7;
      0 ->
        let {
          wild_atm :: GHC.Types.Int
          [LclId, Str=DmdType m]
          wild_atm = GHC.Types.I# x_aV2 } in
        let {
          lvl_s1Rp :: [GHC.Types.Int]
          [LclId]
          lvl_s1Rp =
            GHC.Types.:
              @ GHC.Types.Int wild_atm (GHC.Types.[] @ GHC.Types.Int) } in
        \ (m_aUL :: GHC.Prim.Int#) ->
          case GHC.Prim.<=# m_aUL 1 of _ {
            GHC.Types.False ->
              GHC.Types.: @ GHC.Types.Int wild_atm (r_au7 (GHC.Prim.-# m_aUL 1));
            GHC.Types.True -> lvl_s1Rp
          }
    }
end Rec } 
```

但这就是 GHC 的融合所需要的。剩下的是 boxing`Int`和构建列表单元格。如果你给它一个循环，就像你把它给 C 编译器一样，

```
module Main where

import Data.Bits

main :: IO ()
main = print dumbSum

dumbSum :: Int
dumbSum = go 0 0 1
  where
    go :: Int -> Int -> Int -> Int
    go sm ct n
        | ct >= 15000000 = sm
        | n .&. 1 == 0   = go (sm + n) (ct+1) (n+1)
        | otherwise      = go sm ct (n+1) 
```

你会得到你期望的 C 和 Haskell 版本之间运行时间的大致关系。

这种算法并不是 GHC 被教导要优化的，在有限的人力投入到这些优化之前，其他地方还有更大的鱼可炒。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-15T18:03:32.357

列表融合在这里不起作用的问题实际上是相当微妙的。假设我们定义了`RULE`融合列表的权利：

```
import GHC.Base
sum2 :: Num a => [a] -> a
sum2 = sum
{-# NOINLINE [1] sum2 #-}
{-# RULES "sum" forall (f :: forall b. (a->b->b)->b->b).
                sum2 (build f) = f (+) 0 #-} 
```

（简短的解释是我们定义`sum2`为 的别名`sum`，我们禁止 GHC 提前内联，因此在被淘汰`RULE`之前有机会触发`sum2`。然后我们`sum2`直接在列表生成器旁边查找`build`（参见[定义](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#build)）并替换它通过直接算术。）

这取得了喜忧参半的成功，因为它产生了以下核心：

```
Main.$wgo =
  \ (w_s1T4 :: GHC.Prim.Int#) ->
    case GHC.Prim.remInt# w_s1T4 2 of _ {
      __DEFAULT ->
        case w_s1T4 of wild_Xg {
          __DEFAULT -> Main.$wgo (GHC.Prim.+# wild_Xg 1);
          15000000 -> 0
        };
      0 ->
        case w_s1T4 of wild_Xg {
          __DEFAULT ->
            case Main.$wgo (GHC.Prim.+# wild_Xg 1) of ww_s1T7 { __DEFAULT ->
            GHC.Prim.+# wild_Xg ww_s1T7
            };
          15000000 -> 15000000
        }
    } 
```

这是一个很好的、完全融合的代码——唯一的问题是我们`$wgo`在非尾调用位置调用。这意味着我们不是在看一个循环，而是实际上在一个深度递归的函数中，具有可预测的程序结果：

```
Stack space overflow: current size 8388608 bytes. 
```

这里的根本问题是 Prelude 的列表融合只能融合右折叠，而将和计算为右折叠直接导致过多的堆栈消耗。显而易见的解决方法是使用一个真正可以处理左折叠的融合框架，例如 Duncan 的[流融合包](http://hackage.haskell.org/package/stream-fusion)，它实际上实现了`sum`融合。

另一种解决方案是绕过它 - 并使用右折叠实现左折叠：

```
main = print $ foldr (\x c -> c . (+x)) id [2,4..15000000] 0 
```

这实际上使用当前版本的 GHC 生成接近完美的代码。另一方面，这通常*不是*一个好主意，因为它依赖于 GHC 足够智能以消除部分应用的功能。已经将 a 添加`filter`到链中将破坏该特定优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T14:28:40.610

对前 15,000,000 个偶数求和：

```
{-# LANGUAGE BangPatterns #-}

g :: Integer    -- 15000000*15000001 = 225000015000000
g = go 1 0 0
  where
    go i !a c  | c == 15000000 = a       
    go i !a c  | even i = go (i+1) (a+i) (c+1)
    go i !a c           = go (i+1) a c 
```

应该是最快的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-15T14:31:04.807

如果您想确保只遍历列表一次，您可以显式编写遍历：

```
nats = [1..] :: [Int]

requiredOfX :: Int -> Bool -- this way you can write a different requirement
requiredOfX x = even x

dumbSum :: Int
dumbSum = dumbSum' 0 0 nats
  where dumbSum' acc 15000000 _ = acc
        dumbSum' acc count (x:xs)
          | requiredOfX x = dumbSum' (acc + x) (count + 1) xs
          | otherwise     = dumbSum' acc (count + 1) xs 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-15T14:32:31.583

首先，您可以像[年轻的高斯](http://www.jimloy.com/algebra/gauss.htm)一样聪明，并计算*O(1)*中的总和。

除了有趣的东西，您的 Haskell 解决方案使用列表。我很确定您的 C/C++ 解决方案不会。（Haskell 列表非常易于使用，因此即使在可能不合适的情况下也很想使用它们。）尝试对此进行基准测试：

```
sumBy2 :: Integer -> Integer
sumBy2 = f 0
  where
    f result n | n <= 1     = result
               | otherwise  = f (n + result) (n - 2) 
```

[`-O2`使用带参数](http://www.haskell.org/haskellwiki/Performance/GHC#Use_optimisation)的GHC 编译它。该函数是[尾递归的](http://www.haskell.org/haskellwiki/Tail_recursion)，因此编译器可以非常有效地实现它。

**更新：**如果你想使用`even`函数，它是可能的：

```
sumBy2 :: Integer -> Integer
sumBy2 = f 0
  where
    f result n | n <= 0     = result
               | even n     = f (n + result) (n - 1)
               | otherwise  = f result (n - 1) 
```

您还可以轻松地将过滤函数设为参数：

```
sumFilter :: (Integral a) => (a -> Bool) -> a -> a
sumFilter filtfn = f 0
  where
    f result n | n <= 0     = result
               | filtfn n   = f (n + result) (n - 1)
               | otherwise  = f result (n - 1) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-15T14:09:05.063

严格的版本工作得更快：

```
foldl' (+) 0 $ take 15000000 [2, 4..] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-15T20:54:11.317

另一件需要注意的是，这`nats`就是`evens`所谓的常量应用形式，简称 CAF。基本上，这些对应于没有任何参数的顶级定义。CAF 有点奇怪，例如是 Dreaded Monomorphism Restriction 的原因；我不确定语言定义是否*允许*内联 CAF。

在我关于 Haskell 执行方式的心智模型中，当`dumbSum`返回一个值时，`evens`将被评估为类似于`2:4: ... : 30000000 : <thunk>`和`nats`to `1:2: ... : 30000000 : <thunk>`，其中`<thunk>`s 表示尚未查看的内容。如果我的理解是正确的，那么这些分配`:`确实必须发生并且不能被优化掉。

因此，在不过多更改代码的情况下加快速度的一种方法是简单地编写：

```
dumbSum :: Int
dumbSum = sum . take 15000000 . filter even $ [1..] 
```

或者

```
dumbSum = sum $ take 15000000 evens where
    nats = [1..]
    evens = filter even nats 
```

在我用 编译的机器上，`-O2`仅此一项似乎就可以提高大约 30% 的速度。

我不是 GHC 鉴赏家（我什至从来没有介绍过 Haskell 程序！），所以我可能会大失所望。

# jquery - JQuery DataTables ColumnFilter 默认过滤值

> ID：13399034
> 
> 赞同：0
> 
> 时间：2012-11-15T14:00:48.373
> 
> 标签：jquery, datatables

我正在使用带有 columnFilter 附加组件的 jQuery DataTable 插件。有谁知道如何设置过滤器的默认值？专门针对组合框（类型：“选择”）过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:09:55.543

看起来 columnFilter 插件的作者已经更新了代码来做到这一点。Release r69 引入了“selected”关键字来指定应该选择的默认值。

```
aoColumns: [ { type: "select", values: [ 'Gecko', 'Trident "New"', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman'], selected: 'Misc'  }, 
```

查看[http://code.google.com/p/jquery-datatables-column-filter/source/detail?r=69&path=/trunk/media/js/jquery.dataTables.columnFilter.js](http://code.google.com/p/jquery-datatables-column-filter/source/detail?r=69&path=/trunk/media/js/jquery.dataTables.columnFilter.js)了解他的修复细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:08:59.953

如果你愿意，你可以使用 hack 方法。在`jquery.dataTables.columnFilter.js`编辑功能中`fnCreateSelect`，而是：

```
for (j = 0; j < iLen; j++) {
    r += '<option value="' + aData[j] + '">' + aData[j] + '</option>';
} 
```

利用：

```
for (j = 0; j < iLen; j++) {
    if(j==X) { 
        r += '<option selected value="' + aData[j] + '">' + aData[j] + '</option>';
    } else r += '<option value="' + aData[j] + '">' + aData[j] + '</option>';
} 
```

X - 默认选定选项的索引号。`selected.change(function ()` 添加字符串后`select.change();`

# css - 在 ASUS Transformer 平板电脑上滚动时，链接的可点击区域会移动

> ID：13399035
> 
> 赞同：1
> 
> 时间：2012-11-15T14:00:50.730
> 
> 标签：css, html, tablet

我遇到了一个非常令人沮丧的问题，我在谷歌上搜索了很多，也许我在寻找错误的短语，但找不到解决方案。

所以我在一个 div （一个盒子）里面有一个表格，它在里面是可滚动的，而父级也是可滚动的。该布局适用于其他平板电脑，但在华硕 Transformer 上我有以下问题：

如果我滚动文档的正文并尝试单击表格中的链接（表格单元格包含带有隐藏字段和链接的表格），可点击区域会移动。看起来滚动也会移动链接，但链接标签、隐藏字段和父 div 保持在正确的位置。它只是由于链接轮廓的错误位置而可见（当然，如果我在滚动后单击它们，链接将不起作用）。

我在想一些奇怪的边距折叠效果，但是里面的元素被清除了，并且溢出：自动被添加到父级。也许它的一些华硕相关的错误？

内容是 HTML5。

这是用链接填充表格的部分。WebView 用于显示内容。

```
<div class="table_content_back" >
                        <div class="scrollable_content" >
                            <!-- BLOCK CONTENT STARTS HERE -->
                            <div class="table_content">
                                <table cellpadding="5" cellspacing="0" class="table" >

                                    <tr id="t_h">
                                        <th class="ta_left t_header"><%= message("siteName")%></th>
                                    </tr>

                                    <i:foreach var="ListItem" index="i" list="${sites}">
                                        <tr>
                                            <td class="ta_left" id="site_list">
                                                <form name="Site-${i}" >
                                                    <input type="hidden" name="actionid" value="SharePoint/Flow" />
                                                    <input type="hidden" name="flow" value="sitebrowser" /> 
                                                    <input type="hidden" name="sitename" value="${ListItem.title}" />
                                                    <input type="hidden" name="siteurl" value="${ListItem.url}" />
                                                    <a href="javascript:invitoSubmit('Site-${i}');">${ListItem.title}</a>
                                                </form>
                                            </td>
                                        </tr>
                                    </i:foreach>
                                </table>
                            </div>
                        </div>
                    </div> 
```

# ubuntu - sublime 挂起终端

> ID：13399042
> 
> 赞同：1
> 
> 时间：2012-11-15T14:01:30.103
> 
> 标签：ubuntu, terminal, sublimetext2

我正在使用 sublime text 2 进行 ROR 开发，但我遇到一个问题，即通过它打开终端窗口时它会挂起。

有谁知道防止“挂起”的方式？

在此先感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:05:20.657

你是怎么打开ST2的？如果您使用该`-w`标志，则 ST2 将一直等到您关闭编辑器，直到终端提示恢复。

# dhtml - 动态 HTML（字体大小）

> ID：13399043
> 
> 赞同：0
> 
> 时间：2012-11-15T14:01:30.937
> 
> 标签：dhtml

我编写了一个显示 2 个按钮和一个文本的代码。当我们单击按钮时，“GROW”文本的大小应该会增大，当我们单击“SHRINK”时，文本的大小应该会减小。但这仅适用于单击一次。当我第二次单击时，不会调用这些函数。为什么会这样？这是它的代码..

```
<html>
<head>
    <script type="text/javascript">
        function Grow()
        {
            var a=document.getElementById(1);
            a.style.fontSize=a.style.fontSize+50;

        }
        function Shrink()
        {
            var a=document.getElementById(1);
            a.style.fontSize=20;

        }
    </script>
</head>
<body>
    <input type="button" value="grow" onclick="Grow()">
    <input type="button" value="shrink" onclick="Shrink()">
    <p id="1"> Hello </p>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:04:32.203

当您第一次执行增长操作时，它会自动使用单位 px，因为您开始使用 null 值。您需要先解析 .fontSize 的值，然后才能对其执行算术运算。尝试这个...

```
parseInt(a.style.fontSize.replace('px', '')); 
```

要获得一个数值，您可以对其执行算术运算。

在全...

```
function Grow()
{
    var a=document.getElementById(1);

    // Get a number we can perform arithmetic on
    size = parseInt(a.style.fontSize.replace('px',''));

    // Additional check needed because original dimensions not specified
    if (!isNaN(size)) { // If we now have a number we can use
        a.style.fontSize=size+50;
    } else { // Otherwise, set to 50 (assuming we are starting from 0px)
        a.style.fontSize=50;
    }
} 
```

# forms - 带有 SQL Server 2008 的 VBA 表单

> ID：13399047
> 
> 赞同：2
> 
> 时间：2012-11-15T14:01:42.863
> 
> 标签：forms, sql-server-2008, vba, ms-access

请就这个话题提供帮助

1.  通过 VBA 表单（Access 项目），我需要连接到 SQL Server 2008 并加载表（或连接）。
2.  我需要针对 VBA 表单中的表生成一些报告（在 VBA 内部编写的查询）。

请参阅任何教程来启动此任务。如果论坛中已经存在此问题，请提供链接。

提前致谢。

最好的问候， 巴拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:34:16.023

[此链接](http://www.wiseowl.co.uk/blog/s285/linkviewsvba.htm)显示如何将表与 VBA 链接。您很可能需要一个表名表，以便您的代码可以循环并创建或刷新链接，甚至将它们设置为不同的 SQL Server 实例。该链接显示了更多链接方式，但如果 SQL Server 表具有主键，则此代码将起作用。这是此链接中的代码。

```
' Some variable to make the code more generic
Dim strConnectionString As String
Dim strNameInAccess As String
Dim strNameInSQLServer As String
' set the connection string
strConnectionString = "ODBC;DRIVER=SQL Server; " & _
"SERVER=.\SQLExpress;DATABASE=MyDatabase;Trusted_Connection=Yes"
' specify the tables you want to link. The table can be
' known by a different name in Access than the name in SQL server
strNameInAccess = "tblYacht"
strNameInSQLServer = "tblSailingBoat"
' delete the table from the local database if it exists
On Error Resume Next
DoCmd.RunSQL "drop table " & strNameInAccess
On Error GoTo 0
DoCmd.TransferDatabase acLink, "ODBC Database", _
strConnectionString, acTable, strNameInSQLServer, strNameInAccess 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:35:57.040

您应该使用用于连接外部表的 Access 向导来连接这些表。然后可以轻松地为表单和报告操作 SQL Server 表。[http://office.microsoft.com/en-ie/access-help/import-or-link-to-sql-server-data-HA010200494.aspx](http://office.microsoft.com/en-ie/access-help/import-or-link-to-sql-server-data-HA010200494.aspx)

# mysql - 左连接返回零行

> ID：13399048
> 
> 赞同：2
> 
> 时间：2012-11-15T14:01:43.107
> 
> 标签：mysql, join, left-join

我有两张桌子：

```
question
question_id | question

question_answer
answer_id | question_id | choice_id | user_id | explain 
```

我想获取特定用户尚未回答的所有问题。

```
SELECT question, question_id as questionId 
FROM question q 
LEFT JOIN question_answer qa USING(question_id)
WHERE qa.user_id!=$userId 
```

在这种情况下，我得到零行。我也试过

```
SELECT question, q.question_id as questionId 
FROM question q 
LEFT JOIN question_answer qa ON q.question_id=qa.question_id AND qa.user_id!=$userId 
```

显然这会返回所有记录。我卡在这里如何进行此查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:05:39.393

您检查特定用户的部分`LEFT JOIN`应该颠倒，即`user_id = $userId`而不是`user_id <> $userId`.

从结果行中，您可以选择在哪里`user_id IS NULL`可以找到`$userId`尚未回答的问题（尚未）。

```
SELECT question, q.question_id as questionId 
FROM question q 
LEFT JOIN question_answer qa ON q.question_id=qa.question_id AND qa.user_id=$userId
WHERE qa.user_id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:36:57.370

如果您不必使用`JOIN`操作，那么您可以尝试一下

> 想要获取特定用户尚未回答的所有问题：

```
select * from question
where
    question_id not in (select distinct question_id from question_answer where user_id=$userId); 
```

[**请参阅 Sqlfiddle 上的演示**](http://sqlfiddle.com/#!2/86cc4/1/0)

不知道`not in`是比`JOIN`操作慢还是快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:26:03.150

我会将上面 MG 的答案修改为简单

```
SELECT question, q.question_id as questionId 
FROM question q 
LEFT JOIN question_answer qa ON q.question_id = qa.question_id 
and qa.user_id=2
WHERE qa.user_id IS NULL; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:03:54.730

试试这个：

```
SELECT question, q.question_id as questionId 
FROM question q 
LEFT JOIN question_answer qa ON q.question_id = qa.question_id 
WHERE qa.user_id IS NULL; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/958f1/1)

这会给你一些还***没有答案的问题***。

但是，如果您想获得尚未回答问题的用户，您应该`JOIN`在 users 表中添加一个额外的内容。就像是：

```
SELECT u.id, u.name
FROM  users u 
LEFT JOIN question_answer qa ON qa.user_id = u.id
WHERE qa.question_id IS NULL; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/7d464/10)

# jquery - jQuery在动态列表中显示/隐藏唯一的孩子

> ID：13399057
> 
> 赞同：0
> 
> 时间：2012-11-15T14:02:02.863
> 
> 标签：jquery, list, this, next

当相关输入字段被聚焦/模糊时，任何想法如何从每个列表项中仅显示/隐藏子“.link”。

类似于以下内容，但我不确定如何应用（this）它？

```
$('.input').focus(function () {
  $('li').next('.link').show();
});

$('.input').blur(function () {
  $('li').next('.link').hide();
}); 
```

标记：

```
<ul>
   <li>
     <input class="input" value="1">
   </li>

   <li">   
     <a class="link" href="#"></a>         
   </li>
 </ul>

 <ul>
   <li>
     <input class="input" value="2">
   </li>

   <li>   
     <a class="link" href="#"></a>         
   </li>
 </ul>
etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:03:53.093

如果您的结构肯定如上，那么您可以简单地使用 parent 和 next ...

```
$('.input').focus(function () {
    $(this).parent().next().find(".link").show();
});

$('.input').blur(function () {
    $(this).parent().next().find(".link").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:07:36.353

以下假设您的标记结构不会改变。您可以使用`.parent()`获取父元素、`.next()`获取以下兄弟元素以及`.children()`获取子元素。您可以将两个事件处理程序合二为一，并通过将事件处理程序委托给 DOM 树的更高层来提高效率：

```
$("ul").on("focus blur", ".input", function (e) {
    var method = e.type === "focusin" ? "show" : "hide";
    $(this).parent().next().children(".link")[method]();
}); 
```

请注意，事件类型检查正在寻找`focusin`- jQuery 似乎实际上绑定到`focusin`and`focusout`而不是`focus`and `blur`。

# php - PHP 函数比较两个数组中的字符串的相关性

> ID：13399058
> 
> 赞同：0
> 
> 时间：2012-11-15T14:02:04.890
> 
> 标签：php, arrays, text, compare

假设你有两个数组：

```
$keywords=("stuff", "things", "an important phrase", "something to keep in mind"); 
$data = ("lots of junk about things and stuff", "some disorganized data pertaining to a phrase"); 
```

假设它们几乎永远不会具有相同的计数，并且如上所述，实际的关键字将被埋在垃圾中，如果存在的话，最好迭代 $data 的每个值，比较它与 $keyword 的一般相关性值，然后，如果发现它普遍相关，将其存储在一个新的数组中？

我已经尝试过 foreach 循环和遍历每个数组并在每个元素上使用similar_text 的 for 循环，但到目前为止我还没有运气。

我觉得这很接近：

```
unction compare_arrays_for_relevancy ($array1, $array2) {
if (is_array($array1) && is_array($array2)) {
    echo "Both valid arrays";
    } else {
        echo "Not Arrays";
        }
    foreach ($array1 as $key) {
        foreach ($array2 as $key2){
            echo "<pre>";
            similar_text($key, $key2, $percent);
            echo $percent; 
            echo "</pre>";
            if ($percent > 50){
                $relevant[] = $key2; 
        } else{
            echo "Not relevant"; 
        }

} 
```

} }

好的 - 我添加了百分比选项......更接近......但我对有点匹配的数组值感兴趣......

# mysql - 类似 Stackoverflow 的评论投票 SQL 查询

> ID：13399067
> 
> 赞同：1
> 
> 时间：2012-11-15T14:02:20.057
> 
> 标签：mysql, sql, voting, comments

我正在开发一个评论系统，比如 Stackoverflow 或 Disqus，人们可以在其中评论和投票。我为此准备了三个表：`USERS`、`COMMENTS`和`VOTES`。

我无法弄清楚如何编写查询来计算投票并返回给定用户是否投票。每个用户每条评论只能投票一次，不能对自己的评论投票。此外，评论和投票不仅仅针对一个主题。每个页面都有自己的主题，因此在进行评论和投票时，`GET`也需要在查询中反映出来。`SELECT``WHERE topic_id='X'`

这是我的表的数据，到目前为止我的查询看起来如何，以及我希望它返回什么：

```
USERS table
user_id user_name   
 1         tim
 2         sue
 3         bill 
 4         karen
 5         ed

COMMENTS table
comment_id topic_id    comment   commenter_id
 1            1       good job!         1
 2            2       nice work         2
 3            1       bad job :)        3

VOTES table
 vote_id    vote  comment_id  voter_id
  1          -1       1          5
  2           1       1          4
  3           1       3          1
  4          -1       2          5
  5           1       2          4

SELECT users.*, comments.*, count(vote as totals), sum(vote=1 as yes), sum(vote=-1 as no),
my_votes.vote as did_i_vote, users.* as IM_THE_USER
from comments
join votes 
on comments.comment_id=votes.comment_id
join users
on comments.commenter_id=users.user_id
join votes as MY_votes
on MY_votes.voter_id=IM_THE_USER.user_id
where topic_id=1 and IM_THE_USER.user_id=1
group by comment_id

user_id user_name comment_id topic_id  comment   commenter_id  totals yes no did_i_vote
   1      tim          1        1      good job!     1           2     1   1    NULL  
   3      bill         3        1      bad job:)     3           1     1   0      1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:50:36.390

用于演奏的[SQL Fiddle](http://www.sqlfiddle.com/#!2/b562a/8/0)

```
select u.user_id, u.user_name,
       c.comment_id, c.topic_id,
       sum(v.vote) as totals, sum(v.vote > 0) as yes, sum(v.vote < 0) as no,
       my_votes.vote as did_i_vote
from comments c
join users u on u.user_id = c.commenter_id
left join votes v on v.comment_id = c.comment_id
left join votes my_votes on my_votes.comment_id = c.comment_id
                            and my_votes.voter_id = 1
where c.topic_id = 1
group by c.comment_id, u.user_name, c.comment_id, c.topic_id, did_i_vote; 
```

*更新*：固定分组条款

*由 OP (tim peterson) 更新*：固定计数作为总数并添加注释本身以由查询 [最终工作 SQLFiddle 返回](http://www.sqlfiddle.com/#!2/b562a/13)

# php - 带标题 - 发回给我

> ID：13399069
> 
> 赞同：0
> 
> 时间：2012-11-15T14:02:33.873
> 
> 标签：php, javascript, jquery, mysqli

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我在想这可能是因为我有几个标题发送到我班上的另一个人。看起来像？因为它不会费心把我送回去'。想知道您是否只有一些 javascript 或 jquery 才能做到这一点？

但令人难以置信的是，即使我已经告诉它去做，即使我使用 ob_start(); 它也不费心去做。和 ob_end_flush ();。所以打扰它仍然没有成功..

这就是我建造这座建筑的方式，但它回来并说它没有打扰，因为：

警告：无法修改标头信息 - 标头已由（输出开始于 /home/jesperbo/public_html/mebe/function/function.php:479）在 /home/jesperbo/public_html/mebe/function/function.php 第 404 行发送

```
 function img_ok_upload(){
        if($_SESSION["logged_in"] = true && $_SESSION["rank"] == 1 || $_SESSION["rank"] == 2)
        {
            include "function/class.upload.php";
            $handle = new Upload($_FILES["filename"]);

            if($handle->uploaded)
            {
                //lidt mere store billeder
                $handle->image_resize = true;
                $handle->image_ratio_y = true;
                $handle->image_x = 220;
                $handle->Process("gallery/store");

                //til profil billede lign..
                $handle->image_resize = true;
                $handle->image_ratio_crop = true;
                $handle->image_y = 115;
                $handle->image_x = 100;
                $handle->Process("gallery");

                //til profil billede lign..
                $handle->image_resize = true;
                $handle->image_ratio_crop = true;
                $handle->image_y = 75;
                $handle->image_x = 75;
                $handle->Process("gallery/lille");
                $pb = $handle->file_dst_name;

            }
            if ($stmt = $this->mysqli->prepare('INSERT INTO `gallery` (`title`, `id_bruger`) VALUES (?, ?)'))
            {

                $stmt->bind_param('si', $title, $id_bruger);
                $title = $pb;
                $id_bruger = $_SESSION["id"];

                $stmt->execute();
                $stmt->close();

                header('Location: /nyeste-billeder/');

            }
        }
    } 
```

因此，它检索页面的整个代码的位置就在这里；

```
<?php 
session_start();
require_once ("function/function.php");
$mebe = new mebe;
$db = $mebe->db_c();
ob_start();

$img_ok_upload = $mebe->img_ok_upload();

ob_end_flush();
?> 
```

**希望你能帮我？**

# sql - 不稳定的查询性能

> ID：13399070
> 
> 赞同：1
> 
> 时间：2012-11-15T14:02:33.877
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我是这个网站的新手，但请不要反对我。我只用过一次。

这是我的困境：我有适度的 SQL 知识，但不是专家。下面的查询是很久以前由一位顾问创建的。

在大多数早晨，运行需要 1.5 小时，因为有大量数据。但其他早晨，需要 4-6 小时。我已经尝试消除任何正在运行的作业。我对尝试找出导致此问题的原因感到非常困惑。

任何帮助，将不胜感激。

我已经将此查询分解为 2 个查询，但任何有助于提高性能的方法的提示将不胜感激。

此查询构建了我们的库存交易，以查找我们在任何给定时间点的库存价值。

```
SELECT     
    ITCO, ITIM, ITLOT, Time, ITWH, Qty, ITITCD,ITIREF, 
    SellPrice, SellCost,
    case 
        when Transaction_Cost is null 
        then Qty * (SELECT ITIACT 
                    FROM (Select Top 1 B.ITITDJ, B.ITIREF, B.ITIACT
                          From OMCXIT00 AS B 
                          Where A.ITCO = B.ITCO
                          AND A.ITWH = B.ITWH
                          AND A.ITIM = B.ITIM
                          AND A.ITLOT = B.ITLOT 
                          AND ((A.ITITDJ > B.ITITDJ) 
                               OR (A.ITITDJ = B.ITITDJ AND A.ITIREF <= B.ITIREF))
                          ORDER BY B.ITITDJ DESC, B.ITIREF DESC) as C) 
        else Transaction_Cost
    END AS Transaction_Cost, 
    case when ITITCD = 'S' then ' Shipped - Stock' else null end as TypeofSale,
    case when ititcd = 'S' then ITIREF else null end as OrderNumber
FROM  
    dbo.InvTransTable2 AS A 
```

这是执行计划。 [http://i.imgur.com/mP0Cu.png](https://i.imgur.com/mP0Cu.png) ![我认为执行计划的瓶颈](../Images/cd008bf369e2ec4669a7687d54a4b888.png)

这是 DTA，但我不确定如何阅读它，因为建议是空白的。那不应该说“创造”吗？ [http://i.imgur.com/4ycIP.png](https://i.imgur.com/4ycIP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:02:11.630

您不能与 dbo.InvTransTable2 进行匹配，因为您从中选择了所有记录，所以它会留下扫描记录。

1.  确保您在 OMCXIT00 上有聚集索引，看起来它是一个堆，没有聚集索引。确保聚集索引很小，但其中包含更多不同的值。
2.  如果您没有太多记录 OMCXIT00，则使用关键 ITCO 创建索引并在 include 中包含以下列（ ITITDJ 、 ITIREF 、 ITWH 、ITCO 、ITIM 、ITLOT ）可能就足够了

索引创建示例：

```
 CREATE INDEX IX_dbo_OMCXIT00 
                     ON OMCXIT00 ([ITCO])
                    INCLUDE ( ITITDJ , ITIREF) 
```

1.  如果它没有帮助，那么您需要查看您正在搜索的谓词中的哪些列具有更多不同的值，并使用其中一个或一些键创建索引，并确保在 where 子句中重新排序谓词顺序。

    ```
     A.ITCO = B.ITCO
                      AND A.ITWH = B.ITWH
                      AND A.ITIM = B.ITIM
                      AND A.ITLOT = B.ITLOT 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:55:46.260

除了添加索引来更改索引搜索的表扫描之外，问问自己：“我真的需要这个 sql 代码中的这个 order by 吗？”。如果您不需要这种排序，请从您的 sql 代码中删除 order by。接下来，您的代码很有可能会更快。

# c - 长长C型的划分

> ID：13399071
> 
> 赞同：0
> 
> 时间：2012-11-15T14:02:37.157
> 
> 标签：c, long-integer, unsigned-long-long-int

我需要使用'long long' c 类型，将数据存储在一个非常大的数组中。由于我的代码很大，我编写了这个相当简单的代码，它有同样的问题。因此，它在循环中迭代 222 次，并在循环达到 50%（在数组中存储值）和 100%（完成时）时打印出来。

但它总是给我错误，例如在这种情况下，数组的 50% 应该打印索引 222/2 = 111，而 100% 应该打印索引 222。但是它总是打印 100 和 200。

这是我使用的简单代码，下面是结果。

```
#include<stdio.h>
#define S 222
int main(void){
    char *text = calloc(S, sizeof(char));   
     unsigned long long i;
    for(i=0; i<=S; i++){
    text[i] = 'a';

    if(i == (S/100)*50)) {printf("50percent\t and index : %llud index should be 111" ,i );}
    if(i == ((S/100)*100)){printf("100percent\t and index : %llud index should be 222", i);}        
}
return 0;
} 
```

所以我想知道，如果我做错了什么，或者这个问题是否有逻辑解释。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:04:45.137

在整数算术中，222/100 == 2。

您可以将比较修改为：

```
if (i == S/2) /* 50% */
if (i == S-1) /* 100% */ 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:07:01.953

那是因为你先做除法。如果你将 222 除以 100，你会得到 2.22，它会被截断为 2，因为它是一个 int

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:07:18.547

```
SIZEG/100 
```

将被格式化为整数，即*2*，因此您的代码将始终在 index == 100 和 index == 200 处打印

# java - 为什么 Canvas as contentPane 不绘制添加到 JFrame glasspane 的不透明组件

> ID：13399072
> 
> 赞同：1
> 
> 时间：2012-11-15T14:02:41.770
> 
> 标签：java, swing, opacity, glasspane, java-canvas

好的，我有一个`Canvas`（我使用它是因为它可以实现`BufferedStrategy`）。

我将 my 添加`Canvas`到我的`JFrame` *contentPane*中，然后将`HUDPanel`（`JPanel`由另外 2 个`JPanel`s 组成 - 带有`JProgressBar`s 和`JLabel`s - 以显示健康和*chakara*条）添加到我`JFrame`的*glassPane*。

HUD 上的所有组件都是不透明的。

现在，当我将 s 添加`HUDPanel`到我`JFrame`的*glassPane*中时`Canvas`，它的*contentPane*包含组件的 2 `JPanel`s 不会被涂成不透明的：

![在此处输入图像描述](../Images/fef927ec4890e01fba8f8d35ffadaea2.png)

但是，如果我添加一个而`JPanel`不是*contentPane*一切正常：`Canvas``JFrame`

 *![在此处输入图像描述](../Images/2931913fff4eab04a63c96677d0d16fa.png)

为什么是这样？我该如何解决？

先感谢您

**HUDPanelTest.java**

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class HUDPanelTest {

    public HUDPanelTest() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new HUDPanelTest();
            }
        });
    }

    private void initComponents() {
        JFrame frame = new JFrame() {
            @Override
            public Dimension getPreferredSize() {//testing only
                return new Dimension(800, 600);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        HUDPanel hudPanel = new HUDPanel();
        frame.setGlassPane(hudPanel);
        JPanel p = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                grphcs.setColor(Color.yellow);
                grphcs.fillRect(0, 0, getWidth(), getHeight());
            }
        };
        Canvas c = new Canvas() {
            @Override
            public void paint(Graphics grphcs) {//for testing ONLY I actually use a BufferStrategy
                super.paint(grphcs);

                grphcs.setColor(Color.yellow);
                grphcs.fillRect(0, 0, getWidth(), getHeight());
            }
        };

        frame.add(c);
        //frame.add(p);//this works as expected

        frame.pack();
        frame.setVisible(true);
        hudPanel.setVisible(true);

    }
} 
```

**HUDPanel.java**

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;

public class HUDPanel extends JPanel {

    HUDPanel.HealthPanel healthPanel;
    HUDPanel.ChakaraPanel chakaraPanel;

    public HUDPanel() {
        super(new BorderLayout(), true);
        setOpaque(false);

        healthPanel = new HUDPanel.HealthPanel();
        chakaraPanel = new HUDPanel.ChakaraPanel();

        initComponents();

        setHealthPlayer1(100);
        setHealthPlayer2(100);
        setChakaraPlayer1(0);
        setChakaraPlayer2(0);
        setLabelTextHealthPlayer1("Player 1 (Health):");
        setLabelTextHealthPlayer2("Player 2 (Health):");
        setLabelTextChakaraPlayer1("Player 1 (Chakara):");
        setLabelTextChakaraPlayer2("Player 2 (Chakara):");
    }

    private void initComponents() {
        add(healthPanel, BorderLayout.NORTH);
        add(chakaraPanel, BorderLayout.SOUTH);
    }

    public void setHealthPlayer1(int health) {
        healthPanel.setPlayer1ProgressBarValue(health);
    }

    public void setHealthPlayer2(int health) {
        healthPanel.setPlayer2ProgressBarValue(health);
    }

    public void setChakaraPlayer1(int chakara) {
        chakaraPanel.setPlayer1ProgressBarValue(chakara);
    }

    public void setChakaraPlayer2(int chakara) {
        chakaraPanel.setPlayer2ProgressBarValue(chakara);
    }

    public void setLabelTextHealthPlayer1(String text) {
        healthPanel.setPlayer1LabelText(text);
    }

    public void setLabelTextHealthPlayer2(String text) {
        healthPanel.setPlayer2LabelText(text);
    }

    public void setLabelTextChakaraPlayer1(String text) {
        chakaraPanel.setPlayer1LabelText(text);
    }

    public void setLabelTextChakaraPlayer2(String text) {
        chakaraPanel.setPlayer2LabelText(text);
    }

    private class HealthPanel extends JPanel {

        JProgressBar player1ProgressBar = new JProgressBar();
        JProgressBar player2ProgressBar = new JProgressBar();
        JLabel player1Label = new JLabel();
        JLabel player2Label = new JLabel();

        public HealthPanel() {
            super(new GridBagLayout(), true);
            setOpaque(false);

            initComponents();
        }

        private void initComponents() {
            GridBagConstraints gc = new GridBagConstraints();
            gc.fill = GridBagConstraints.NONE;
            gc.anchor = GridBagConstraints.WEST;
            gc.insets = new Insets(10, 10, 10, 10);
            //or else the anchoring wont work
            gc.weightx = 1;

            //gc.gridx = 0;//does not seem to make a difference
            //gc.gridy = 0;
            add(player1Label, gc);

            //gc.gridx = 1;
            //gc.gridy = 0;
            add(player1ProgressBar, gc);

            gc.anchor = GridBagConstraints.EAST;

            //gc.gridx = 2;
            //gc.gridy = 0;
            add(player2Label, gc);

            //gc.gridx = 3;
            //gc.gridy = 0;
            add(player2ProgressBar, gc);
        }

        public void setPlayer1ProgressBarValue(int val) {
            player1ProgressBar.setValue(val);
        }

        public void setPlayer2ProgressBarValue(int val) {
            player2ProgressBar.setValue(val);
        }

        public void setPlayer2LabelText(String text) {
            player2Label.setText(text);
        }

        public void setPlayer1LabelText(String text) {
            player1Label.setText(text);
        }
    }

    private class ChakaraPanel extends JPanel {

        JProgressBar player1ProgressBar = new JProgressBar();
        JProgressBar player2ProgressBar = new JProgressBar();
        JLabel player1Label = new JLabel();
        JLabel player2Label = new JLabel();

        public ChakaraPanel() {
            super(new GridBagLayout(), true);
            setOpaque(false);

            initComponents();
        }

        private void initComponents() {
            GridBagConstraints gc = new GridBagConstraints();
            gc.fill = GridBagConstraints.NONE;
            gc.anchor = GridBagConstraints.WEST;
            gc.insets = new Insets(10, 10, 10, 10);
            //or else the anchoring wont work
            gc.weightx = 1;
            gc.weighty = 1;

            //gc.gridx = 0;
            //gc.gridy = 0;
            add(player1Label, gc);

            //gc.gridx = 1;
            //gc.gridy = 0;
            add(player1ProgressBar, gc);

            gc.anchor = GridBagConstraints.EAST;

            //gc.gridx = 2;
            //gc.gridy = 0;
            add(player2Label, gc);

            //gc.gridx = 3;
            //gc.gridy = 0;
            add(player2ProgressBar, gc);
        }

        public void setPlayer1ProgressBarValue(int val) {
            player1ProgressBar.setValue(val);
        }

        public void setPlayer2ProgressBarValue(int val) {
            player2ProgressBar.setValue(val);
        }

        public void setPlayer2LabelText(String text) {
            player2Label.setText(text);
        }

        public void setPlayer1LabelText(String text) {
            player1Label.setText(text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:23:49.903

*   `GlassPane`是轻量级的，那么总是落后`AWT Canvas`，

*   这是非常常见的问题`JLayeredPane`，`GlassPane`Java 和`3D`, `CAD/CAM`,`Open GL/Cl`这些 API 基于`AWT Containers`

*   同样的问题将通过使用`JLayer`（轻量级容器），但您可以测试`isLightWe....()`来自`Native OS` 和/或其资源的对等点*

# design-patterns - “切换应用程序功能”的模式，例如撤消/重做

> ID：13399074
> 
> 赞同：0
> 
> 时间：2012-11-15T14:02:52.987
> 
> 标签：design-patterns, undo-redo

我喜欢有一种切换功能的模式，在我的情况下是撤消/重做。我不想要撤消/重做的模式。这工作正常。但这是跳过撤消/重做所需的代码行的好方法。使用撤消的示例：

```
AddItemToList(object item)
{
   Memento m = new Memento(..) // create application state object
   m_list.Add(item);
   m.AddState("item added", item); // store state change
   m_Caretaker.Add(m); // store state object
} 
```

没有撤消的例子：

```
AddItemToList(object item)
{
   m_list.Add(item);
} 
```

我喜欢有一个比这更优雅的模式：

```
AddItemToList(object item)
{
    Memento m = null;
    if(m_UndoEnabled)
    {
        m = new Memento(..) // create application state object
    }
    m_list.Add(item);
    if(m_UndoEnabled)
    {
        m.AddState("item added", item); // store state change
        m_Caretaker.Add(m); // store state object
    }
} 
```

我认为它不优雅的原因：我必须在每个应该支持 Undo/Redo 的函数中使用 booelan 标志两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:57:17.083

为什么不使用装饰器？这样，假设您有一个名为 EditQueue 的东西，您只需将状态更改推入即可。您为此创建一个接口，然后提供两个实现，一个只是 EditQueueImpl，另一个是 UndoEnabledEditQueueImpl。第二个是一个内部有一个 EditQueueImpl 实例的装饰器，这意味着该类的用户不必知道撤消是否打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:10:44.387

我认为实现这一点的一个好方法可能是使用带有一些继承的抽象工厂模式。

抽象工厂返回一个具体工厂，它要么构建真正的纪念品对象，要么构建一个虚拟的纪念品。虚拟纪念品显然不做任何事情，并且以与空对象类似的方式工作。

通过这种方式，您将把标志放在一个地方并只使用一次（在抽象工厂中）。我已经使用并且使用了这种方法，我发现它非常优雅和简单（我可能有偏见:)。

不太负面的一点是，您需要在所有方法或类中注入抽象工厂或具体工厂。

# iphone - iPhone 5的屏幕尺寸

> ID：13399075
> 
> 赞同：-3
> 
> 时间：2012-11-15T14:03:03.587
> 
> 标签：iphone, objective-c, ios

我正在开发适用于 iphone4 和 iPhone 5 的应用程序。我正在使用以下代码来获取屏幕尺寸

```
 CGRect screenBounds = [[UIScreen mainScreen] bounds]; 
```

![在此处输入图像描述](../Images/a07c367cf1b4f970e23d88da0ea557d6.png)

我使用的是 iPhone 5 模拟器，但它显示的是 iPhone 4 的屏幕尺寸。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T14:10:33.180

在模拟器上确保您已设置为 iPhone（Retina 4 英寸）。您可以通过顶部的模拟器菜单转到硬件>>设备>>iPhone（Retina 4-inch）来执行此操作，这会将手机模拟器更改为 iPhone 5 版本。

如果已设置，则您可能需要为 iPhone 5 添加启动图像。`Default-568h@2x.png`如果缺少此图像，它将无法在 iPhone（Retina 4 英寸）中启动。

我还在[这里](https://stackoverflow.com/questions/13287047/naming-convention-for-iphone-5-images/13287481#13287481)回答了另一个可能有帮助的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:15:53.013

实际上

```
[[UIScreen mainScreen] bounds].size.height 
```

对于 iPhone 5 返回 568。确保在模拟器中选择了“iPhone 4 - (4 inch)”作为设备（它从 Xcode 4.5 开始就存在）。如果您使用 Xcode 助手创建项目，您的项目中还应该有一个 Default-568h@2x.png 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:08:19.943

运行模拟器时，转到`Hardware`->`Device`并确保`iPhone (Retina 4-inch)`已选中。

# xcode - 检测cp和rm成功或失败

> ID：13399076
> 
> 赞同：0
> 
> 时间：2012-11-15T14:03:07.017
> 
> 标签：xcode, build

我有一个 shell 脚本，它运行一堆命令（在 OS X 10.7 上）作为 XCode 构建步骤的一部分。该脚本删除了一堆文件并复制了一堆文件。

我现在遇到的问题是，如果 cp 命令失败，根据 XCode，构建仍然“成功”，大概是因为脚本仍然返回退出状态为 0。如何捕获 cp 的结果？我查看了手册页，它似乎没有返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:07:56.367

`cp`失败时将返回错误代码（非零），但您的脚本可能会忽略它并继续执行下一个命令。

除非您在多步脚本中明确检查每个命令的返回码，否则 shell 将继续执行。

[如果任何命令返回非零值，](https://stackoverflow.com/questions/821396/aborting-a-shell-script-if-any-command-returns-a-non-zero-value)请参阅中止 shell 脚本？了解如何在出现任何错误时退出脚本。

# plone - 在哪里报告针对 Plone.org 网站的错误

> ID：13399084
> 
> 赞同：2
> 
> 时间：2012-11-15T14:03:32.810
> 
> 标签：plone

我在 Plone.org 门户网站上发现了一个错误（为您的产品创建新版本完全搞砸了），我制作了一个正确的屏幕截图并想在某处提交。但是，我找不到应该在哪里完成的信息 - [https://dev.plone.org](https://dev.plone.org)是正确的地方吗？

如果没有 - 我应该在哪里做这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:05:30.357

是的，[https://dev.plone.org/](https://dev.plone.org/)是正确的位置。

提交工单时使用该[`Website`组件。](https://dev.plone.org/query?status=!closed&component=Website)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:41:36.920

还有一个邮件列表。

[https://lists.sourceforge.net/lists/listinfo/plone-website](https://lists.sourceforge.net/lists/listinfo/plone-website)

它可能有助于引起对您问题的关注。

# javascript - Google geomap API 中的标签

> ID：13399093
> 
> 赞同：2
> 
> 时间：2012-11-15T14:03:54.980
> 
> 标签：javascript, google-geocoding-api, google-visualization

我目前正在处理此代码，一切正常，但是当我用鼠标悬停一个国家时，我只希望国家名称出现在标签中，而不是相关值。我可以这样做吗？如果是这样，怎么做？

提前致谢！

这是javascript代码：

```
 google.load('visualization', '1', {'packages': ['geochart']});
 google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
      ['Country', 'Value'],
      ['Albania', 1],
      ['Algeria', 1],
    ]);

    var options = {
        colorAxis: {colors:['#386a90']}, legend:'none', datalessRegionColor:'#f1f1f1'
        };
    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);

};
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:05:50.530

您可以创建一个额外的工具提示字段并以这种方式添加数据。

```
var data = new google.visualization.DataTable();

data.addColumn('string', 'Country'); 
data.addColumn('number', 'Value'); 
data.addColumn({type:'string', role:'tooltip'}); 

data.addRows([['Albania',1,"Extra Information"]]);
data.addRows([['Algeria',1,"Extra Information"]]); 
```

我在我的应用程序中使用了这种代码格式：http: [//cmoreira.net/interactive-world-maps-demo/france-example/](http://cmoreira.net/interactive-world-maps-demo/france-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:25:24.087

没有内置的方法可以做到这一点。您可以使用此[选项](https://developers.google.com/chart/interactive/docs/gallery/geochart#Configuration_Options)完全避免工具提示：

```
tooltip: {trigger: 'none'} 
```

否则，但 API 不支持此功能，您可能会设法避免显示字符​​串“Value”、“:”和“1”，方法是查找 - 例如使用 jQuery.contains() - 的所有标签键入包含字符串“Value”、“:”或“1”的“text”并隐藏它们。这看起来不会很好，因为工具提示方块会保持很大，但这可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T01:19:07.633

使用数组创建数据表时它似乎不起作用，但如果您直接创建数据表并使用条目填充它，则它可以工作。此处解释：[如何从 Google 地理图表的工具提示中删除坐标](https://stackoverflow.com/questions/13414966/how-to-remove-coordinates-from-tooltip-of-googles-geo-charts)

# asp.net - web.config 文件中以下标签的用途是什么？如果我删除它们会发生什么？

> ID：13399103
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:04:25.947
> 
> 标签：asp.net, web-services, web-applications

我的 web.config 文件中有以下部分

```
<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
            <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
            <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
            <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
    </sectionGroup>
</sectionGroup> 
```

我想知道，如果我从文件中删除此部分会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:09:21.587

这些程序集包含用于 ASP.Net AJAX 的资源和处理程序。

如果您在页面中使用任何 AJAX 控件，例如`<asp:ScriptManager>`or`<asp:UpdatePanel>`并且您删除了这些条目，您将收到错误和/或控件将无法按预期工作。

# c# - 获取 MSIE 9 中的特定选项卡

> ID：13399116
> 
> 赞同：0
> 
> 时间：2012-11-15T14:04:58.133
> 
> 标签：c#, internet-explorer-9, watin, ui-automation, microsoft-ui-automation

我正在使用 Watin 2.1 尝试测试网站的文件下载和文件打开功能。这在 Internet Explorer 8 中运行良好，但从 Internet Explorer 9 开始，视图底部有一个黄白色的下载栏，而不是弹出对话框窗口。

我找到了这个答案： [https](https://stackoverflow.com/a/8532222/246622) ://stackoverflow.com/a/8532222/246622 ，只要我感兴趣的浏览器选项卡位于顶部，它就可以解决这个问题。如果顶部还有其他选项卡，则找不到下载栏。这里的问题是，这些测试将在下载开始之前打开带有下载栏的选项卡顶部的其他选项卡。

**那么，我如何访问正确的选项卡，或者如何在 Internet Explorer 中切换顶部/可见选项卡，或者如何让这些其他页面在其他窗口中而不是在同一窗口中的选项卡中打开，或者我该如何从我的测试应用程序中关闭那些其他选项卡？**

这是相关的代码：

```
Window windowMain = new Window(WatiN.Core.Native.Windows.NativeMethods.GetWindow(browser.hWnd, 5/*GW_CHILD*/)); // This gets the topmost browser tab.
System.Windows.Automation.TreeWalker trw = new System.Windows.Automation.TreeWalker(System.Windows.Automation.Condition.TrueCondition);
mainWindow = trw.GetParent(System.Windows.Automation.AutomationElement.FromHandle(browser.hWnd));
windowDialog = new Window(WatiN.Core.Native.Windows.NativeMethods.GetWindow(windowMain.Hwnd, 5)); 
```

我试过这个：

```
var lowerWindow = new Window(WatiN.Core.Native.Windows.NativeMethods.GetWindow(aBrowserTab.Hwnd, 2/*GW_HWNDNEXT*/)); // This gets a next lower window. 
```

然后我打算使用带有标题的正则表达式来识别正确的选项卡：

```
titleRegex.IsMatch(windowMain.ToplevelWindow.Title) 
```

但这会在同一窗口中获得一个较低的窗口，而不是一个较低的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:13:00.247

我遇到了类似的问题，经过与您尝试的类似的调查后，我决定尝试替代路线。另请注意，即使您这样做是正确的，您也需要做很多工作才能将您的测试移植到其他浏览器上，并且 IE 10 的发布速度很快。

1.  你真的需要从浏览器下载文件吗？怎么样 - 读取触发下载的 URL，然后在该 URL 上执行[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)以检索您的文件？

2.  看看使用[Coded UI](http://msdn.microsoft.com/en-us/vstudio/ee957688.aspx) - 不是记录的测试，而是生成的测试。他们能够自动点击窗口应用程序以及在浏览器中。另请注意，开发似乎确实在 waitn 上停止了，因此转向更可靠的东西可能是有意义的。

# php - 我想用这个数组构建一棵树。这些是 Id 的 os 类别和子类别

> ID：13399117
> 
> 赞同：0
> 
> 时间：2012-11-15T14:04:58.433
> 
> 标签：php, arrays, nested

我正在尝试将扁平的 mysql 行转换为树结构。这是类别和子类别的ID

数组 ( [50] => 数组 ( [70] => 数组 ( [0] => 数组 ( [73] => 数组 ( [80] => 数组 ( )

```
 )

                        [74] => Array
                            (
                            )

                        [75] => Array
                            (
                            )

                    )

            )

        [71] => Array
            (
                [0] => Array
                    (
                    )

            )

        [72] => Array
            (
                [0] => Array
                    (
                    )

            )

        [73] => Array
            (
                [0] => Array
                    (
                        [80] => Array
                            (
                            )

                    )

            )

        [74] => Array
            (
                [0] => Array
                    (
                    )

            )

        [75] => Array
            (
                [0] => Array
                    (
                    )

            )

        [80] => Array
            (
                [0] => Array
                    (
                    )

            )

    )

[51] => Array
    (
        [76] => Array
            (
                [0] => Array
                    (
                        [77] => Array
                            (
                            )

                    )

            )

        [77] => Array
            (
                [0] => Array
                    (
                    )

            )

        [78] => Array
            (
                [0] => Array
                    (
                        [79] => Array
                            (
                                [81] => Array
                                    (
                                    )

                            )

                    )

            )

        [79] => Array
            (
                [0] => Array
                    (
                        [81] => Array
                            (
                            )

                    )

            )

        [81] => Array
            (
                [0] => Array
                    (
                    )

            )

    ) 
```

)

我以这种方式输出

```
 <ul id="red" class="treeview-famfamfam">
    <li>50
        <ul> <li> 70 
                <ul><li> 73 <ul> 
                                <li> 80</li></ul>
                    </li>
                    <li> 74</li>
                    <li>75 </li>
                    </ul>
            </li>
            <li>71</li>
            <li> 72</li>
            </ul>
            </li> 
```

基本上我需要用类别子类别子子建立一棵树.... categoreis 等。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:14:42.193

编辑：好的。我为此花了半天时间。很抱歉告诉您这一点，但您必须更改数组的定义。而不是叶节点的空数组，而是使用具有任何值的非数组值......像这样：

```
$ar=array("50" => array ( "70" => array ( "0" => array("35" => "leaf"),"3"=>"leaf" ) ) ); 
```

然后使用这个：

```
function MakeTree($array){
    $return="";

        if(!is_array($array)) return;
        while($member=current($array)){     

                $return.="<li>".key($array);
                $return.="<ul>".MakeTree($member)."</ul></li>";

            next($array);           
         }       
        return $return;
    }

    $ar=array("50" => array ( "70" => array ( "0" => array("35" => "leaf"),"3"=>"leaf" ) ) );
    echo(MakeTree($ar)); 
```

我不知道为什么，但是如果叶节点有 null 或空数组值，它不会被 next($array) 访问。即使它是一个空字符串，所以 "35"=>"" 也不起作用。

如果不使用 next() 和 current() 就不能使用 key()，所以结构的改变是不可避免的。

# python - 当我运行 setuptools .egg “就好像它是一个 shell 脚本”时，实际发生了什么？

> ID：13399118
> 
> 赞同：4
> 
> 时间：2012-11-15T14:05:00.360
> 
> 标签：python, shell, setuptools, easy-install

通过阅读[本文档](http://pypi.python.org/pypi/setuptools#cygwin-mac-os-x-linux-other)，我建立了该命令`sh setuptools-0.6c11-py2.7.egg`实际作用的心智模型，但它非常不完整，我仍然对某些方面感到困惑。

我的心智模型是这样的：

1.  发出此命令时，egg（我认为它是一种巧妙地处理依赖关系的 zip 文件）以某种方式在我的系统上找到正确版本的 python，并使用该 python 将自身“安装”到适当的位置。
2.  在实践中，这意味着一个名为 easy_install 的“Unix 可执行文件”创建在一个希望在我的路径上的目录中。这就是为什么我可以`easy_install somepackage`在之后输入终端。

因此，我的问题是：

1.  “鸡蛋”如何以这种方式“自我安装”？当其他鸡蛋需要easy_install才能工作时，为什么这对这个鸡蛋特别有效？
2.  这样创建的“Unix 可执行文件”为 4kb。它到底是什么？它充满了对其他事物的调用吗？他们在哪？

这不是一个“如何让它工作”的问题——我在这个轴上没有任何问题，但我想完全了解这里发生的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T14:10:13.250

Egg 文件只是简单的 zip 压缩目录，包含 Python 包、模块和一些元数据，并带有`.egg`扩展名。

zip格式灵活；它将忽略文件开头*不*属于 zipfile 的任何内容。通过查找一系列字符（`PK`以及另外两个指示类型的字节）并从那里读取来检测 zipfile。

这意味着您可以在拉链*前面放一些东西。*鸡蛋的`setuptools`特别之处在于它们使用这个技巧在 zip 数据之前插入一些 shell 脚本：

```
$ head -n8 setuptools-0.6c11-py2.7.egg 
#!/bin/sh
if [ `basename $0` = "setuptools-0.6c11-py2.7.egg" ]
then exec python2.7 -c "import sys, os; sys.path.insert(0, os.path.abspath('$0')); from setuptools.command.easy_install import bootstrap; sys.exit(bootstrap())" "$@"
else
  echo $0 is not the correct name for this egg file.
  echo Please rename it back to setuptools-0.6c11-py2.7.egg and try again.
  exec false
fi 
```

经过前 8 行，这是一个真正的 zip：

```
$ tail -n+9 setuptools-0.6c11-py2.7.egg | file -
/dev/stdin: Zip archive data, at least v2.0 to extract 
```

前 8 行中包含的脚本是您运行时正在执行的脚本`sh setuptools-0.6c11-py2.7.egg`。

如您所见，脚本是特定于 egg 版本的；这在 python 2.7 的版本中，它只是使用 python 解释器将这个 egg 添加到 python 搜索路径。然后它从包含的 python 模块中导入一个函数并运行它。

这是鸡蛋本身的内容，正如我提到的，它只是一个 zip 存档：

```
$ zipinfo -l setuptools-0.6c11-py2.7.egg 
Archive:  setuptools-0.6c11-py2.7.egg   332005 bytes   78 files
-rw-rw-r--  2.0 unx     1713 b-      995 defN  7-Jul-10 20:26 site.pyc
-rw-rw-r--  2.0 unx    90113 b-    31461 defN  7-Jul-10 20:26 pkg_resources.pyc
-rw-rw-r--  2.0 unx    85435 b-    23537 defN 19-Oct-09 13:35 pkg_resources.py
-rw-rw-r--  2.0 unx     2362 b-      875 defN 20-Sep-06 17:05 site.py
-rw-rw-r--  2.0 unx      309 b-      224 defN  7-Jul-10 20:26 easy_install.pyc
-rw-rw-r--  2.0 unx      126 b-      105 defN 20-Sep-06 17:05 easy_install.py
-rw-rw-r--  2.0 unx       43 b-       43 defN  7-Jul-10 20:26 EGG-INFO/top_level.txt
-rw-rw-r--  2.0 unx     1591 b-      458 defN  7-Jul-10 20:26 EGG-INFO/SOURCES.txt
-rw-rw-r--  2.0 unx        1 b-        3 defN 20-Oct-09 10:07 EGG-INFO/zip-safe
-rw-rw-r--  2.0 unx     9278 b-     3194 defN  7-Jul-10 20:26 EGG-INFO/PKG-INFO
-rwxrwxr-x  2.0 unx     2504 b-      623 defN  7-Jul-10 20:26 EGG-INFO/entry_points.txt
-rw-rw-r--  2.0 unx        1 b-        3 defN  7-Jul-10 20:26 EGG-INFO/dependency_links.txt
-rw-rw-r--  2.0 unx     1567 b-      791 defN  7-Jul-10 20:26 setuptools/extension.pyc
-rw-rw-r--  2.0 unx     1089 b-      424 defN 20-Sep-06 17:05 setuptools/extension.py
-rw-rw-r--  2.0 unx    10796 b-     4050 defN  7-Jul-10 20:26 setuptools/sandbox.pyc
-rw-rw-r--  2.0 unx     8227 b-     2309 defN  6-Jul-10 20:09 setuptools/sandbox.py
-rw-rw-r--  2.0 unx     5677 b-     2499 defN  7-Jul-10 20:26 setuptools/archive_util.pyc
-rw-rw-r--  2.0 unx    26800 b-    11228 defN  7-Jul-10 20:26 setuptools/package_index.pyc
-rw-rw-r--  2.0 unx     6209 b-     2229 defN 19-Oct-09 13:35 setuptools/depends.py
-rw-rw-r--  2.0 unx     6677 b-     3096 defN  7-Jul-10 20:26 setuptools/depends.pyc
-rw-rw-r--  2.0 unx     2816 b-     1159 defN  6-Jul-10 20:09 setuptools/__init__.py
-rw-rw-r--  2.0 unx     3639 b-     1837 defN  7-Jul-10 20:26 setuptools/__init__.pyc
-rw-rw-r--  2.0 unx     5924 b-     1777 defN 19-Oct-09 13:35 setuptools/archive_util.py
-rw-rw-r--  2.0 unx    29972 b-     8156 defN 19-Oct-09 13:35 setuptools/dist.py
-rwxrwxr-x  2.0 unx     7168 b-     3249 defN 19-Oct-09 17:18 setuptools/cli.exe
-rw-rw-r--  2.0 unx    28275 b-     8698 defN  6-Jul-10 20:09 setuptools/package_index.py
-rw-rw-r--  2.0 unx    29786 b-    10953 defN  7-Jul-10 20:26 setuptools/dist.pyc
-rwxrwxr-x  2.0 unx     7168 b-     3244 defN 19-Oct-09 17:18 setuptools/gui.exe
-rw-rw-r--  2.0 unx    22219 b-     7042 defN  7-Jul-10 20:26 setuptools/tests/test_resources.pyc
-rw-rw-r--  2.0 unx    19388 b-     4723 defN 24-Sep-08 13:10 setuptools/tests/test_resources.py
-rw-rw-r--  2.0 unx    12345 b-     2765 defN 24-Sep-08 13:10 setuptools/tests/__init__.py
-rw-rw-r--  2.0 unx    13811 b-     4523 defN  7-Jul-10 20:26 setuptools/tests/__init__.pyc
-rw-rw-r--  2.0 unx     1499 b-      708 defN  7-Jul-10 20:26 setuptools/tests/test_packageindex.pyc
-rw-rw-r--  2.0 unx    81351 b-    27171 defN  7-Jul-10 20:26 setuptools/tests/doctest.pyc
-rw-rw-r--  2.0 unx      759 b-      346 defN 24-Sep-08 13:10 setuptools/tests/test_packageindex.py
-rw-rw-r--  2.0 unx    99714 b-    25663 defN 20-Sep-06 17:05 setuptools/tests/doctest.py
-rw-rw-r--  2.0 unx     2866 b-     1332 defN  7-Jul-10 20:26 setuptools/command/rotate.pyc
-rw-rw-r--  2.0 unx    11520 b-     3127 defN 19-Oct-09 13:35 setuptools/command/build_ext.py
-rw-rw-r--  2.0 unx     6649 b-     2208 defN 24-Sep-08 13:10 setuptools/command/upload.py
-rw-rw-r--  2.0 unx     8162 b-     3538 defN  7-Jul-10 20:26 setuptools/command/sdist.pyc
-rw-rw-r--  2.0 unx     5965 b-     2421 defN  7-Jul-10 20:26 setuptools/command/setopt.pyc
-rw-rw-r--  2.0 unx     2283 b-      695 defN 19-Oct-09 17:50 setuptools/command/bdist_wininst.py
-rw-rw-r--  2.0 unx     7535 b-     3208 defN  7-Jul-10 20:26 setuptools/command/build_py.pyc
-rw-rw-r--  2.0 unx     3690 b-     1528 defN  7-Jul-10 20:26 setuptools/command/install.pyc
-rw-rw-r--  2.0 unx    14205 b-     4465 defN 19-Oct-09 13:35 setuptools/command/egg_info.py
-rw-rw-r--  2.0 unx      626 b-      311 defN 28-Dec-06 19:52 setuptools/command/__init__.py
-rw-rw-r--  2.0 unx      839 b-      494 defN  7-Jul-10 20:26 setuptools/command/__init__.pyc
-rw-rw-r--  2.0 unx     5053 b-     1519 defN 20-Sep-06 17:05 setuptools/command/setopt.py
-rw-rw-r--  2.0 unx      674 b-      329 defN  7-Jul-10 20:26 setuptools/command/register.pyc
-rw-rw-r--  2.0 unx     3724 b-     1292 defN  4-Sep-07 00:11 setuptools/command/install_egg_info.py
-rw-rw-r--  2.0 unx    18005 b-     5444 defN 19-Oct-09 13:35 setuptools/command/bdist_egg.py
-rw-rw-r--  2.0 unx     3984 b-     1385 defN 15-Feb-08 12:29 setuptools/command/install.py
-rw-rw-r--  2.0 unx     2356 b-     1002 defN  7-Jul-10 20:26 setuptools/command/bdist_wininst.pyc
-rw-rw-r--  2.0 unx     2025 b-      774 defN 22-May-07 17:55 setuptools/command/bdist_rpm.py
-rw-rw-r--  2.0 unx     2486 b-      871 defN 20-Sep-06 17:05 setuptools/command/install_lib.py
-rw-rw-r--  2.0 unx      740 b-      357 defN 20-Sep-06 17:05 setuptools/command/saveopts.py
-rw-rw-r--  2.0 unx    56980 b-    23198 defN  7-Jul-10 20:26 setuptools/command/easy_install.pyc
-rw-rw-r--  2.0 unx     3172 b-     1438 defN  7-Jul-10 20:26 setuptools/command/install_lib.pyc
-rw-rw-r--  2.0 unx     2257 b-     1013 defN  7-Jul-10 20:26 setuptools/command/bdist_rpm.pyc
-rw-rw-r--  2.0 unx     5310 b-     1732 defN 15-Feb-08 12:29 setuptools/command/develop.py
-rw-rw-r--  2.0 unx     5091 b-     2222 defN  7-Jul-10 20:26 setuptools/command/test.pyc
-rw-rw-r--  2.0 unx    63580 b-    17507 defN 19-Oct-09 13:35 setuptools/command/easy_install.py
-rw-rw-r--  2.0 unx    16467 b-     6544 defN  7-Jul-10 20:26 setuptools/command/egg_info.pyc
-rw-rw-r--  2.0 unx     4577 b-     1994 defN  7-Jul-10 20:26 setuptools/command/install_egg_info.pyc
-rw-rw-r--  2.0 unx     6275 b-     3108 defN  7-Jul-10 20:26 setuptools/command/upload.pyc
-rw-rw-r--  2.0 unx     7246 b-     2237 defN 20-Sep-06 17:05 setuptools/command/build_py.py
-rw-rw-r--  2.0 unx    10073 b-     4314 defN  7-Jul-10 20:26 setuptools/command/build_ext.pyc
-rw-rw-r--  2.0 unx     3185 b-     1463 defN  7-Jul-10 20:26 setuptools/command/alias.pyc
-rw-rw-r--  2.0 unx     1921 b-      704 defN 15-Feb-08 12:29 setuptools/command/install_scripts.py
-rw-rw-r--  2.0 unx     7327 b-     2380 defN 19-Oct-09 15:46 setuptools/command/sdist.py
-rw-rw-r--  2.0 unx     1249 b-      647 defN  7-Jul-10 20:26 setuptools/command/saveopts.pyc
-rw-rw-r--  2.0 unx     2021 b-      750 defN 20-Sep-06 17:05 setuptools/command/rotate.py
-rw-rw-r--  2.0 unx     2477 b-      848 defN 19-Oct-09 13:35 setuptools/command/alias.py
-rw-rw-r--  2.0 unx    17695 b-     7800 defN  7-Jul-10 20:26 setuptools/command/bdist_egg.pyc
-rw-rw-r--  2.0 unx      277 b-      158 defN 20-Sep-06 17:05 setuptools/command/register.py
-rw-rw-r--  2.0 unx     4442 b-     1424 defN 15-Feb-08 12:29 setuptools/command/test.py
-rw-rw-r--  2.0 unx     2445 b-     1160 defN  7-Jul-10 20:26 setuptools/command/install_scripts.pyc
-rw-rw-r--  2.0 unx     5175 b-     2317 defN  7-Jul-10 20:26 setuptools/command/develop.pyc
78 files, 958981 bytes uncompressed, 321419 bytes compressed:  66.5% 
```

# c++ - 如何将 time_t 插入 PostgreSQL 时间戳字段

> ID：13399122
> 
> 赞同：2
> 
> 时间：2012-11-15T14:05:14.020
> 
> 标签：c++, c, postgresql, timestamp

如何将接收到的时间/日期插入 time_t 结构到具有“没有时区的时间戳”类型的列中？

以前我使用 int8 作为数据类型，而 time_t 非常适合，但我想知道如何使用 PQexecParams 调用来处理时间戳字段（最好不要将 time_t 从调用程序转换为字符串）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:19:05.947

使用[to_timestamp](http://www.postgresql.org/docs/current/static/functions-formatting.html)函数。例子：

```
 select to_timestamp(1000000000)::timestamp; 
```

结果：

```
   to_timestamp     
---------------------  
 2001-09-09 03:46:40
1 行）

```

# php - 如何在会话期间注销未经身份验证的其他用户

> ID：13399136
> 
> 赞同：2
> 
> 时间：2012-11-15T14:06:20.310
> 
> 标签：php, session, symfony

我正在使用 symfony2。当我更改某些用户角色时，我希望即使该用户当前已登录，角色也会立即更改。

我发现了这样的东西：

```
$this->get('security.context')->getToken();
$token->setAuthenticated(false); 
```

但这是在当前用户内完成的。我想为另一个用户这样做。

我没有更改已登录用户的角色。我正在为可能已登录的另一个用户更改角色。

任何帮助，将不胜感激。

PS 在数据库中存储会话对于我的问题是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:17:54.053

您可以使用命令创建一个表，例如注销特定用户，然后创建一个侦听器，以便当用户从数据库刷新时（例如，当他创建另一个请求时），然后执行此命令并记录代码出用户。

您无法真正控制其他人的会话。

关于特定角色，只需更新数据库中的用户角色就可以了，因为每次请求都会刷新用户。

# windows-phone-7 - 如何知道用于下载应用程序实例的市场所在国家/地区？

> ID：13399137
> 
> 赞同：0
> 
> 时间：2012-11-15T14:06:21.717
> 
> 标签：windows-phone-7

我需要知道用户所在的国家/地区，但我不喜欢使用 Location API。因为它需要额外的认证，而且对我的应用程序来说似乎很奇怪。我需要知道它才能启用国家/地区的指定功能。我检查了手机的文化，但它并不完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:43:13.670

不完美，但如何使用

```
System.Globalization.CultureInfo.CurrentUICulture 
```

然后让用户选择在设置中更改它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:47:46.090

使用以下命令获取 2 个字符的 ISO 区域（国家）代码：System.Globalization.RegionInfo.TwoLetterISORegionName

# c++ - c++ 中的 Protobuffers 和错误 LNK2019：未解析的外部符号

> ID：13399141
> 
> 赞同：4
> 
> 时间：2012-11-15T14:06:28.400
> 
> 标签：c++, visual-studio-2012, protocol-buffers

我是 C++ 和 Visual Studio 2012 的新手，所以问题可能出在屏幕和椅子之间。我执行了以下步骤；

1.  我使用选项 optimize_for = LITE_RUNTIME 制作了一个简单的原型文件
2.  使用 protoc 创建匹配的 h 和 c 文件
3.  编译库 libprotobuf-lite.lib
4.  创建了一个新的控制台 Visual Studio 2012 项目。
5.  复制了我的单个源文件所在的 libprotobuf-lite.lib。
6.  创建了一个名为 protobuffers 的新文件夹
7.  将 protobuffers src 目录下的 c、h 和 google 目录复制到 protobuffers 文件夹中
8.  添加了 protobuffers 文件夹作为附加包含目录
9.  通过 Additional Dependencies 将库文件添加到链接器
10.  编译以下源文件；

    ```
    #include <iostream>
    #include "protobuffers\genome.pb.h"

    int main()
    {
       genomeMessage::Genome genome;
       return 0;
    } 
    ```

11.  卡住了...我收到以下错误；

    ```
    1>Source.obj : error LNK2019: unresolved external symbol "public: __cdecl genomeMessage::Genome::Genome(void)" (??0Genome@genomeMessage@@QEAA@XZ) referenced in function main
    1>Source.obj : error LNK2019: unresolved external symbol "public: virtual __cdecl genomeMessage::Genome::~Genome(void)" (??1Genome@genomeMessage@@UEAA@XZ) referenced in function main
    1>C:\Projects\testproto\x64\Debug\testproto.exe : fatal error LNK1120: 2 unresolved externals 
    ```

所以我知道它不是丢失的 lib 文件，因为如果我移动 lib 文件，链接器会抱怨它找不到它。问题是我不知道如何解决这个问题......有人吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:09:44.310

根据此消息：

```
1>Source.obj : error LNK2019: unresolved external symbol "public: __cdecl genomeMessage::Genome::Genome(void)" (??0Genome@genomeMessage@@QEAA@XZ) referenced in function main
1>Source.obj : error LNK2019: unresolved external symbol "public: virtual __cdecl genomeMessage::Genome::~Genome(void)" (??1Genome@genomeMessage@@UEAA@XZ) referenced in function main 
```

声明`genomeMessage::Genome::Genome(void)`并且`genomeMessage::Genome::~Genome(void)`不属于您的项目的源文件。

特别是，听起来您还没有将`genome.pb.cc`文件（由 Protocol Buffers 编译器创建）添加到您的项目中。

# php - php 逻辑循环 5 步

> ID：13399144
> 
> 赞同：1
> 
> 时间：2012-11-15T14:06:31.700
> 
> 标签：php, arrays

我正在用 php 读取一个 Excel 文件。没问题，但我被困在一个合乎逻辑的部分。我想创建一个包含多个其他数据数组的数组。

数据在我的 Excel 文件中提供，我知道应该从哪一列开始阅读，但不知道何时停止，因为这是动态的。

我的问题是如何创建一个循环来读取我的列并在每 5 列上创建一个新数组。

所以我想要的是这样的：

```
(My data for the excell file is proved in $line[] each column has its number.)
        array(
        'length' => $line[15],
        'width' => $line[16]
        'price_per' => $line[17],
        'price' => $line[18],
        'stock' => $line[19]
    ),
    array(
        'length' => $line[20],
        'width' => $line[21]
        'price_per' => $line[22],
        'price' => $line[23],
        'stock' => $line[24]
    ),
    array(
        'length' => $line[25],
        'width' => $line[26]
        'price_per' => $line[27],
        'price' => $line[28],
        'stock' => $line[29]
    ), .... 
```

那么我怎样才能使这个动态（for循环？），以便我有1个大索引数组，有多个关联数组？注意：我的 for 循环应该始终从第 [15] 行开始！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:10:25.810

首先，如果`$line`有任何您不想处理的元素（例如，如您的示例所示的前 15 个），请使用以下命令将它们切掉[`array_slice`](http://www.php.net/manual/en/function.array-slice.php)：

```
$line = array_slice($line, 15); 
```

然后使用[`array_chunk`](http://php.net/manual/en/function.array-chunk.php)将原始数组拆分为尽可能多的部分：

```
$chunks = array_chunk($line, 5); 
```

然后，通过使用以下方法将每个值与正确的键相关联，将每个块转换为自己的数组[`array_combine`](http://www.php.net/manual/en/function.array-combine.php)：

```
$results = array();
$keys = array('length', 'width', 'price_per', 'price', 'stock');
foreach ($chunks as $chunk) {
    $results[] = array_combine($keys, $chunk);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T14:09:40.050

```
for($i = 15; $i < ????; $i += 5)
{
    $your_array[] = array(
        'length' => $line[$i],
        'width' => $line[$i+1]
        'price_per' => $line[$i+2],
        'price' => $line[$i+3],
        'stock' => $line[$i+4]
    );
} 
```

代替 ？？？？按行数

# javascript - 授权 MVC3 ASP.NET

> ID：13399145
> 
> 赞同：0
> 
> 时间：2012-11-15T14:06:33.913
> 
> 标签：javascript, asp.net, asp.net-mvc-3, authorization

这就是我正在做的事情： 1：加载 Home/NoAccess 的自定义授权 2：NoAccess 方法将重定向到用户来自的页面。

我想要补充的是，当用户通过 NoAccess 控制器时，某些东西被放置在 viewbag 或我们中。我可以用它来显示一个小消息框，上面写着“你无权访问”。

我遇到的问题是，当我将某些东西放入 ViewBag 时，它无法到达视图。当用户未通过授权并显示警报弹出窗口时，是否有一种简单的方法可以将用户重定向到他的上一个页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:16:56.377

内容`ViewBag`在重定向中丢失。

改为使用`TempData`。内容被存储，直到被读取。

# android - Android - 保持活动活跃

> ID：13399146
> 
> 赞同：0
> 
> 时间：2012-11-15T14:06:34.747
> 
> 标签：android

我有一个令人费解的问题。如果我在任何设备/模拟器上从 Eclipse 部署我的应用程序，我可以使用 Back 和 Home 按钮将其最小化，然后我可以单击启动器图标来恢复它。

如果我拿了apk，把它放在手机上并安装它（使用Astro文件管理器），然后按返回或主页，当我再次单击启动器图标时，我的应用程序将被重新创建而不是恢复：活动没有被破坏.

这违背了 android 开发者网站上关于活动及其生命周期的所有内容。

例如，当用户使用“后退”按钮时，我会这样做：

```
@Override
public void onBackPressed() {
    moveTaskToBack(true);
} 
```

然而，当我单击其启动器图标时，我的应用程序被重新创建。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:09:48.557

这与关于活动生命周期的所有内容完全一致。

> 如果一个活动被暂停或停止，系统可以通过要求它完成或简单地终止其进程来从内存中删除该活动。当它再次显示给用户时，它必须完全重新启动并恢复到之前的状态。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

您的应用程序没有“最小化”。Android中没有最小化的东西。它不是 Linux、Windows 或 OSX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:09:53.273

是的，按 Back 会杀死你的 Activity。但是，为什么这是一个问题？Android 提供了一种机制来保存 Activity 的状态并能够恢复。

查看Activity生命周期：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

这是保存 Activity 状态的必读内容：http: [//developer.android.com/reference/android/app/Activity.html#SavingPersistentState](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)

# java - 为什么我的 jar 文件可以在我的计算机上完美运行，而在另一台计算机上却不行？

> ID：13399157
> 
> 赞同：0
> 
> 时间：2012-11-15T14:07:11.623
> 
> 标签：java, netbeans, jar, zip, executable-jar

最近，我在 NetBeans 中开发了一个相当简单的 GUI 应用程序，在进一步开发之前，我决定在另一台计算机上测试该应用程序，因为我不太了解分发应用程序并想确保我做对了.

在 NetBeans 中它运行良好，当我单击 Run->Clean and Build Project 时，它会按预期在我的项目的 dist 文件夹中创建 .jar 文件。当我从 dist 文件夹在我的计算机上运行 .jar 文件时，它会按预期运行。

然后我尝试在另一台计算机（从闪存驱动器）上以几种不同的方式运行它，但都没有奏效：

1.  仅将 jar 文件复制到我的闪存驱动器，尝试运行它，收到错误消息“找不到主类：MyApplicationPackage.MyApplication。程序将退出。”

2.  在 NetBeans 中单击 File->Export Project->To Zip... 并将压缩文件夹复制到我的闪存驱动器。当我在另一台计算机上解压缩文件时，没有 dist 文件夹（我没想到会有一个）。

3.  将整个项目文件夹复制到我的闪存驱动器上，并尝试在另一台计算机上运行 jar 文件，生成相同的错误消息。

如何让它在其他计算机上运行？有没有更简单的方法来分发应用程序？我不希望普通人知道如何解压缩文件、找到 dist 文件夹并运行 jar 文件。我可以以某种方式将所有内容组合成一个可运行的文件吗？

编辑：我自己找到了解决方案：另一台计算机上的 java 版本不是当前版本。为了让应用程序运行，我打开了项目的属性窗口，在“源”选项卡下，底部附近有一个选项，上面写着“源/二进制格式”。将其更改为早期版本的 Java 使其可以在另一台计算机上运行。另一个（更好的）选择是在另一台计算机上升级到当前版本的 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:09:53.500

您必须检查是否有一个 MANIFEST 文件来指示主类的位置。

如果您使用的是 maven，则可以使用程序集插件，它将使用您指定的参数生成您的 MANIFEST 文件。

```
<plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
                <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                        <manifest>
                                <addClasspath>true</addClasspath>
                                <mainClass>com.blabla.Main</mainClass>
                        </manifest>
                        <manifestEntries>
                                <SplashScreen-Image>splashscreen.png</SplashScreen-Image>
                        </manifestEntries>
                </archive>
        </configuration>

</plugin> 
```

编辑：

*   [设置 Netbeans 以使用 OneJAR 生成可分发的 JAR 文件](http://wiki.netbeans.org/PackagingADistributableJavaApp)
*   [Stackoverflow：在 NetBeans 中生成可执行 jar](https://stackoverflow.com/questions/602537/producing-executable-jar-in-netbeans)

# jquery - Kendo UI 网格阻止更新图像列

> ID：13399160
> 
> 赞同：1
> 
> 时间：2012-11-15T14:07:20.347
> 
> 标签：jquery, asp.net-mvc, kendo-ui

我正在尝试一个`Kendo UI`网格实现，它有一个图像列，如下所示：

```
$("#grid").kendoGrid({
    dataSource: dataSource,
    sortable: true,
    pageable: true,                
    pageSize: 10,
    height: 400,
    toolbar: [{ name: "create"}],
    columns: [{
        field: "ImageData", title: "Select Photo", width: 50, 
        template: '<img id="img_${PersonnelId}" src="/Admin/GetPersonnelImage?personnelId=${PersonnelId}" />' },
                    { field: "Name", title: "Name", width: 80 },
                    { field: "SurName", title: "Surname", width: 80 },
                    { field: "isActive", title: "Active", width: 40 },
                    { command: ["edit", "destroy", { name: "Photo", text: "Photo", click: Photo }], title: " ", width: "130px"}],
        editable: "inline",
        remove: function (e) {
             // remove  
        },            
        save: function (e) {
                //save
            }
        });
    }
}); 
```

图像列模板`GET`向以下`ASP.MVC`操作方法发出请求，以便从数据库中访问其相关图像。

```
public FileContentResult GetPersonnelImage(int personnelId)
{
    Personnel p = personnelRepository.GetById(personnelId);
    if (p != null)
    {
        return File(p.ImageData, p.ImageMimeType);
    }

    return null;            
} 
```

如上所示，有一个名为的自定义命令按钮`Photo`，可让用户在模式窗口上选择图像文件。`submitPhoto`当用户在模态窗口上单击此按钮时，将运行以下 jQuery 函数：

```
var wnd, uploadTemplate, dataItem;

function Photo(e) {
    e.preventDefault();
    dataItem = this.dataItem($(e.currentTarget).closest("tr"));
    wnd.content(uploadTemplate(dataItem));

    $("#imgfile").change(function (evt) {
        var f = evt.target.files[0];
        var reader = new FileReader();

        if (!f.type.match('image.*')) {
            alert("Selected file does not appear an image file! Please check your selection");
            return;
        }

        reader.onload = function (e) { $('#preview').attr('src', e.target.result); };
        reader.readAsDataURL(f);
    });

    // Updates the src attribute of the grid image column
    $("#submitPhoto").click(function (e) {
        var pid = dataItem.PersonnelId;
        var imgPtr = "#img_" + String(pid);
        var v = $('#preview').attr('src');
        $(imgPtr).attr('src', v);
    });

        wnd.center().open();
    } 
```

网格列的`src`属性在上述函数结束时更新。

到目前为止一切正常。但是，当模态窗口关闭时，grid 会`GET`立即向 action 方法发出请求，并导致丢失新的图像选择。

我想`GET`在用户编辑数据时阻止请求。我不知道我在这里做错了什么。任何建议都会非常完美。

提前致谢

# asp.net - MVC 3 必需的注释 ErrorMessage 文本未插入到我的输入标记的属性 data-val-required

> ID：13399162
> 
> 赞同：0
> 
> 时间：2012-11-15T14:07:34.347
> 
> 标签：asp.net, asp.net-mvc-3

我的模型中有一个带有错误消息的必需属性，当用户没有为此属性输入任何文本时，错误消息文本不会显示。

我的cshtml页面是

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Index", "Booking", FormMethod.Post, new { @class = "form-horizontal" }))
{
    <fieldset>

        <div class="control-group">
        @Html.LabelFor(m => m.CustomerOrderNumber, "", "", new { @class = "control-label" }) 
            <div class="controls">
            @Html.TextBoxFor(m => m.CustomerOrderNumber) @Html.ValidationMessageFor(m => m.CustomerOrderNumber)
            <p class="help-block">This is a mandatory field.</p>
            </div>
        </div>

        <input type="submit" value="Next" class="btn btn-primary"/>
    </fieldset>

} 
```

我已经删除了所有无关的内容。

我的模型 .cs 源是

```
using System;
using Iesi.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

namespace Technolog.Rma.Business.Domain
{
    [Serializable]
    public class RepairBatch
    { 

        [Required(ErrorMessage = "Please enter a order number.")]
        [StringLength(30)]
        [Display(Name ="Order number")]
        public virtual string CustomerOrderNumber { get; set; }

        public RepairBatch()
        {
            CustomerOrderNumber = "";
        }

        public virtual void copy(RepairBatch rb){
            this.CustomerOrderNumber = rb.CustomerOrderNumber;
        }
    }
} 
```

当我在浏览器中查看返回的 html 时，我看到以下 html 用于我的客户订单号输入框

```
<div class="control-group">
    <label class="control-label" for="CustomerOrderNumber">Order number</label> 
    <div class="controls">
    <input data-val="true" data-val-required="&amp;#39;CustomerOrderNumber&amp;#39; must not be empty." id="CustomerOrderNumber" name="CustomerOrderNumber" type="text" value="" /> <span class="field-validation-valid" data-valmsg-for="CustomerOrderNumber" data-valmsg-replace="true"></span>
    <p class="help-block">This is a mandatory field.</p>
    </div> 
```

data-val-required 属性具有 MVC 3 框架返回的预设文本，而不是我使用 required 属性在 customerordernumber 属性上指定的错误消息。

我将 Visual Studo 2010 SP1 与 MVC 2011 年 4 月 3 日工具更新一起使用。我也在使用 nhibernate 3.2 和 spring.net 1.3.2

有没有人遇到过这个问题或有什么建议？

20/11/2012 更新

我使用以下解决方法来显示正确的验证消息

@Html.TextBoxFor(m => m.CustomerOrderNumber, new { data_val_required="请输入订单号"}) @Html.ValidationMessageFor(m => m.CustomerOrderNumber)

贾巴尔·阿扎姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:43:34.283

我既不使用 nhibernate 也不使用 spring.net，但我确实注意到您的`CustomerOrderNumber`财产是虚拟的。您的模型类是源自`RepairBatch`而不是`RepairBatch`其本身吗？我不相信数据注释在基类上时会被识别。（伙计们，如果我错了，请告诉我！）

# iphone - 单击按钮时如何将文本字段值从一个视图控制器显示到另一个视图控制器

> ID：13399166
> 
> 赞同：2
> 
> 时间：2012-11-15T14:07:38.450
> 
> 标签：iphone, objective-c, uiview, uiviewcontroller

我已经实现了两个`uiviewcontrollers`. 我在一个`uiview`和一个按钮上有一些文本字段。我想要的是，当我填写文本字段并单击按钮时，这些值会显示在另一个`uiview`控制器上。当我填写文本字段并单击按钮时遇到问题，另一个`uiview`在 iPhone 屏幕上显示，但文本字段值未显示在其上。`nextview.h`我还在我的文件中导入`viewcontroller.m`文件。下面是我的一些代码：

```
-(IBAction)save:(id)sender
{

    nextview *NView = [[nextview alloc] initWithNibName:nil bundle:nil];

    [[NView name] setText:name.text];
    [[NView fathername] setText:father.text];
    [[NView country] setText:countryselected.text];
    [[NView gender] setText:genderselected.text];
    [[NView dob] setText:dateselected.text];
    [[NView username] setText:username.text];
    [[NView password] setText:password.text];
    [[NView email] setText:email.text];
    [self presentModalViewController:NView animated:YES];

} 
```

在`nextview`该类中，我还在 .h 文件中定义`@property`了 uilabels ，我还在文件中定义了这些标签，`@synthesize`并将`initialize`这些变量链接到所有标签。问题仍然存在。我能做些什么来避免这个问题？`release``nextview.m`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:52:51.053

有关 initWithNibName 的信息，请参阅苹果文档

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

在访问它的视图之前，不会加载 nib。对于额外的初始化使用 viewDidLoad。

这意味着，在 initWithNibName 之后没有直接设置网点。

因此，您可以做的一件事是添加对第一个 viewController 的引用作为 nView 中的属性，并在 nView 的 viewDidLoad 中根据第一个 VC 标签设置标签。

附带说明：您的命名约定是错误的。对类使用大写，对类的实例使用小写，即它应该是

```
Nextview *nView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:18:35.280

看这行代码：

```
nextview *NView = [[nextview alloc] initWithNibName:nil bundle:nil]; 
```

您使用 nil 作为 nib 名称来创建下一个视图。您是否覆盖了 nextview 的 initWithNibName 以提供 nib 名称？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:44:23.913

调用 nextview *NView = [[nextview alloc] initWithNibName:nil bundle:nil] 时，您是否初始化了您的成员（例如姓名）？如果你在 viewdidiload 或者其他关于视图的函数中初始化它们，那么它们会在你调用 [self presentModalViewController:NView animated:YES]; 之后被初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:20:06.450

有很多方法可以将数据从一个视图传递到另一个视图。在本教程中有关于此方法的简要说明您想要检查它[教程源代码](http://www.theappcodeblog.com/2011/04/15/passing-data-between-views-tutorial-using-a-protocol-delegate-in-your-iphone-app/)

# lotus-domino - Java 代理生成文件链接

> ID：13399169
> 
> 赞同：0
> 
> 时间：2012-11-15T14:07:50.760
> 
> 标签：Lotus, lotusscript, lotus-domino, lotus, javaagents

在[Lotus](/questions/tagged/lotus "显示标记为“莲花”的问题")中，如果要发送对网络驱动器上文件的引用，则需要手动创建热点链接。是否可以通过具有相同链接的 Java 代理以编程方式发送电子邮件？

（在[lotusscript](/questions/tagged/lotusscript "显示标记为“lotusscript”的问题") mimeentity[中可以用于](https://stackoverflow.com/questions/686384/sending-formatted-lotus-notes-rich-text-email-from-excel-vba)此目的，但我不确定。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:18:44.297

Jake Howlett 为发送 HTML 电子邮件创建了一个不错的 Java 类，您可以在此处找到：http: [//www.codestore.net/store.nsf/unid/BLOG-20100108-0129](http://www.codestore.net/store.nsf/unid/BLOG-20100108-0129) 这可用于生成指向文件。

否则，您可以使用 RichTextItem 类并编写 file:// 链接。Notes Mail 会将其显示为可点击的热点链接。

这是在我的机器上工作的修改后的示例代码（最初来自注释帮助）：

```
import lotus.domino.*;
import java.util.Vector;

public class JavaAgent extends AgentBase {
public void NotesMain() {
    try {      Session session = getSession();
    AgentContext agentContext = session.getAgentContext();
    // (Your code goes here) 
    Database db = agentContext.getCurrentDatabase();
    Document doc = db.createDocument();
    Item subject = doc.replaceItemValue("Subject","Rich text item");
    RichTextItem body = doc.createRichTextItem("Body");
    body.appendText("Link:");
    body.addNewLine(2);
    body.appendText("file://c:\\temp"); //ENTER PATH TO LINK TO HERE
    // Save the document
    doc.save(true, true);
    doc.send("ENTER YOUR MAIL ADDRESS HERE");
    } catch(Exception e) {
        e.printStackTrace();
    }}} 
```

在我原来的帖子中，我在转义路径的 \ 时出错（你必须使用 \）

希望这可以帮助。

# jquery - 使用 jQuery 将画布图形作为 DOM 元素引用

> ID：13399170
> 
> 赞同：3
> 
> 时间：2012-11-15T14:07:52.680
> 
> 标签：jquery, html5-canvas, easeljs, createjs

是否可以使用 jQuery 引用在 HTML5 画布元素上绘制的图形？这是我为 EaselJS 编写的一个函数，它遍历一个包含矢量坐标数组的对象：

```
function newShape(obj,shape,coords){
    obj.graphics.beginFill('green');
    obj.alpha = 0.05;
    for (var i=0; i<coords[shape].length; i+=2) {
        var arr = coords[shape].slice(i,i+2);
        obj.graphics.lineTo(arr[0],arr[1]);
    }
    obj.graphics.closePath();
    obj.graphics.endFill();
    stage.addChild(obj);
} 
```

坐标对象看起来像这样，有 100 个点：

```
var coords = {};

coords['0']  = [214,266,214,291,194,291];
coords['1']  = [243,1,254,2,278,9,290,14];
coords['2']  = [109,112,116,114,129,117]; 
```

和舞台：

```
canvas = document.getElementById("canvas");
stage = new createjs.Stage(canvas);

shape1 = new createjs.Shape();
shape2 = new createjs.Shape();
shape3 = new createjs.Shape();

newShape(shape1,'shape1',coords);
newShape(shape2,'shape2',coords);
newShape(shape3,'shape3',coords); 
```

我可以为点击/触摸事件添加侦听器到渲染的形状，但是我希望能够将每个图形作为 DOM 元素引用，以便与 Bootstrap Popover 和 niceScroll 等插件一起使用，例如`$(shape1).popover('show');`...... 我一直在积极研究一个没有成功的解决方案，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:19:18.030

***选项1 ：***

从 Shmiddty 的帖子中，一种使用 2d 上下文引用的编程方法：

```
function Shape(can) {
    this.x = 0;
    this.y = 0;
    this.width = 0;
    this.height = 0;
    this.fill = "rgba(0,0,0,0)";
    this.parent = can;

    this.draw = function(ctx) {
        if (!$(me.parent).is(':visible')) return;

        var parts = me.fill.split(',');
        parts[3] = $(me.parent).css("opacity") + ')';
        me.fill = parts.join(',');

        ctx.fillStyle = me.fill;
        ctx.fillRect(me.x, me.y, me.width, me.height);
    };

    var me = this;
}

(function() {
    var can = $("#sandbox")[0],
        ctx = can.getContext('2d'),
        wid = can.width,
        hei = can.height,
        sha = new Shape($('<div id="box"/>').appendTo('body'));

    sha.x = 0;
    sha.y = 0;
    sha.width = 50;    
    sha.height = 50;
    sha.offsetWidth = 50;
    sha.offsetHeight = 50;
    sha.fill = "rgba(000,111,222,1)";

    (function draw(){
        ctx.clearRect(0,0,wid,hei);
        sha.draw(ctx);
        webkitRequestAnimationFrame(draw);
    })();

    $(can).click(function(){
        $(sha.parent).fadeToggle();
    });
    $('#box').click(function(){
        $(this).fadeToggle();
    });
})();​ 
```

***选项 2：***

I was able to track x,y coords from click and touch events by applying CSS to a hidden DOM element.

**Calling a bootstrap popover :**

```
$("#canvas").click(function(e) {
    var x = e.pageX;
    var y = e.pageY;

    if ($.inArray(x, coords['shape1']) !== -1 || $.inArray(y, coords['shape1']) !== -1){
        $("#myObj").css({'position':'absolute','top':y,'left':x}).popover({
            trigger: 'click',
            placement:'top',
        }).popover('show');
    }
});
stage.update(); 
```

**HTML:**

```
<canvas id="canvas" width="375" height="322"></canvas>
<span class="myObj" data-content="lorem ipsum content" data-original-title="pop-title"></span> 
```

# java - 十进制算术表达式的意外结果

> ID：13399172
> 
> 赞同：1
> 
> 时间：2012-11-15T14:07:59.213
> 
> 标签：java

我有一些带有算术表达式的业务逻辑，它们的结果如下

```
(10.0 * 20.58)/1.0=205.7999..98
(6.0 * 37.9)/1.0=227.3999..98
(5.0 * 50.0)/1.0=250.0
(10.0 * 37.9)/1.0=379.0 
```

但预期的结果是

```
(10.0 * 20.58)/1.0=205.8
(6.0 * 37.9)/1.0=227.4
(5.0 * 50.0)/1.0=250.0
(10.0 * 37.9)/1.0=379.0 
```

我不清楚为什么我们会得到 .999..98 小数部分？因此，我的等式比较失败了，因此业务逻辑也失败了。对于我们正在使用的少数情况

```
amt = (double)Math.round(orderAmt*100000)/100000; 
```

但这不可能在我们有双重算术表达式的每个地方都做同样的事情。

我想知道为什么我们随机得到这样的结果，是否有可能将结果四舍五入到小数点后 5 位而不是四舍五入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:15:31.220

你可以使用`BigDecimal`四舍五入

```
BigDecimal bd = new BigDecimal((10.0 * 20.58)/1.0) ;
bd = bd.setScale(4, RoundingMode.UP); 
```

与静态方法一起使用

```
public static double round(double value, int digits) {
    BigDecimal bd = new BigDecimal(value);
    return bd.setScale(digits, RoundingMode.UP).doubleValue();
} 
```

`RoundingMode`拥有 ：

```
RoundingMode.UP;
RoundingMode.DOWN;
RoundingMode.HALF_DOWN;
RoundingMode.HALF_EVEN; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:46:19.013

基本问题是

```
System.out.println(10.0 * 20.58); 
```

印刷

```
205.79999999999998 
```

由于表示错误，有一个小的舍入误差`20.58`

你要么需要

*   在比较之前对结果进行四舍五入。
*   使用允许一些错误的比较
*   使用 BigDecimal（在大多数情况下过度杀戮）
*   使用美分而不是美元，即使用`int`或`long`以固定精度。

在最后一种情况下，相同的操作将读取

```
System.out.println(10 * 2058); 
```

印刷

```
20580 
```

这是您需要的固定精度值的 100 倍，例如美分而不是美元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:50:14.863

对于基数 10，有些分数不能用有限的数字精确表示，例如 1/3 = 0.33333333....

基数 2 也是一样，只是产生这种结果的除法器不是我们习惯的那种，比如 20.58 就是 2058 / 100 就是这样。

在内部，双精度和浮点数与位（非数字）一起存储，因此双精度或浮点数的确切值无法存储在计算机的内存中。每次使用此值执行操作时，您都会得到一个小的偏移，因为近似值在转换回十进制格式进行打印时变得可见。

在执行精度很重要的计算时，您必须注意这一点。

所以你有两个解决方案：

*   以十进制类型存储所有数字并使用它执行所有计算。这将实现准确性，但以性能为代价。
*   您还可以使用 double 或 float 保留所有计算，并使用固定位数格式化仅用于打印结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:21:18.730

使用`float`代替`double`

[http://ideone.com/L9vwR8](http://ideone.com/L9vwR8)

```
System.out.println((float)((10.0f * 20.58f)/1.0f)); 
```

输出

> 205.8

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:25:46.343

您可能希望使用`double`如下舍入：

```
 double roundingPlaces = 10.0;//use 10.0 for single decimal digit rounding
    double a1 = 10.0;
    double b1 = 20.58;
    double c1 = 1.0;
    System.out.println(Math.round((a1*b1*roundingPlaces)/c1)/roundingPlaces); 
```

这将打印 205.8。

```
 float fa1 = (float) 10.0;
    float fb1 = (float)20.58;
    float fc1 = (float)1.0;
    System.out.println(fa1*fb1/fc1); 
```

这也打印 205.8

# android - 如何在Android中围绕图像中心平滑旋转位图而没有振荡运动

> ID：13399173
> 
> 赞同：7
> 
> 时间：2012-11-15T14:08:07.380
> 
> 标签：android, image, rotation, smooth

我想根据用户点击将位图图像旋转 10 度。在众多 stackoverflow 和 google 回答之后，我尝试了矩阵旋转的各种组合。

然而，图像并没有像预期的那样真正旋转，并且给出了旋转 + 围绕画布中心振荡的抖动视图。为了测试，每次调用对象的 draw 方法时，我都会将旋转角度增加 10 度（而不是点击）。图像是一个对称的圆形 [64x64 封闭矩形]，我希望它像轮子一样在屏幕中心围绕它自己的中心旋转，但它会旋转并沿对角线向右下方移动，然后以振荡方式回到屏幕中心.

```
 public void draw(Canvas canvas) {
    Matrix matrix = new Matrix();

    rotation += 10;
    float px = this.viewWidth/2;
    float py = this.viewHeight/2;
    matrix.setRotate(rotation, bitmap.getWidth()/2, bitmap.getHeight()/2);
    Bitmap newbmp = Bitmap.createBitmap(bitmap, 0, 0, getImgWidth(), getImgHeight(), matrix, true);
    canvas.drawBitmap(newbmp, px - (getImgWidth()/2), py - (getImgHeight()/2), null);

 } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T16:38:39.463

这是一个例子。我把它分成了3个步骤。第一个平移移动位图，使其中心位于 0,0 然后旋转，最后将位图中心移动到画布上您想要的位置。您不需要第二个位图。

```
Matrix matrix = new Matrix();
rotation += 10;
float px = this.viewWidth/2;
float py = this.viewHeight/2;
matrix.postTranslate(-bitmap.getWidth()/2, -bitmap.getHeight()/2);
matrix.postRotate(rotation);
matrix.postTranslate(px, py);
canvas.drawBitmap(bitmap, matrix, null); 
```

作为优化，在此方法之外创建一次 Matrix 并将创建替换为调用 `matrix.reset()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:16:18.207

您需要将位图转换为 0,0 点（或在 0,0 处绘制）并将其旋转到那里，然后将其转换回来，如下所示：

```
canvas.save();
    canvas.translate(this.viewWidth, this.viewHeight);
    canvas.rotate(rotation);
    canvas.drawBitmap(newbmp, -(getImgWidth()/2), -(getImgHeight()/2), null);
canvas.restore(); 
```

在这里，我以 0,0（我认为）的中心绘制它，因为当您旋转时，它大约是 0,0，而不是人们想象的屏幕中心。如果您在 0,0 处绘制中心，那么它将围绕位图的中心旋转。

如果我的代码没有完成在 0,0 处绘制位图中心，那么您可以更改我的代码以在中心处绘制它，它将按您的意愿工作。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T14:39:08.737

```
// x : x coordinate of image position
// y : y coordinate of image position
// w : width of canvas
// h : height of canvas
canvas.save();
canvas.rotate(angle, x + (w/2), y + (h/2));
canvas.drawBitmap(image, x, y, null);
canvas.restore(); 
```

步骤是

1.  保存现有画布
2.  围绕位图的中心旋转画布，您将使用旋转角度在画布上绘制
3.  绘制图像
4.  恢复图像

# android - 显示 Google 地图图块

> ID：13399174
> 
> 赞同：2
> 
> 时间：2012-11-15T14:08:08.480
> 
> 标签：android, google-maps, osmdroid

是否可以在不违反 TOS ( [https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup?hl=pl) ) 的情况下显示 Google 地图图块？我发现它[http://datamoil.blogspot.com/2011/05/offline-google-maps-on-osmdroid.html](http://datamoil.blogspot.com/2011/05/offline-google-maps-on-osmdroid.html)但我不知道我是否可以使用它？如何禁用瓷砖下载？我使用的是非常旧的 osmdroid 版本，我没有类似的方法：`setUseDataConnection(true)`等...

# ruby-on-rails - 视图中的 URL 操作

> ID：13399178
> 
> 赞同：0
> 
> 时间：2012-11-15T14:08:16.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个生成如下 URL 的代码：`#{URI.escape p.url(checkout_path)}`

现在我需要检查一个条件，如果`#{URI.escape p.url(checkout_path)}`生成一个 URL =“http://mywebsite.com”，则将 /trunk 附加到末尾，因此它必须是“http://mywebsite.com/trunk”，否则如果它已经有从之前附加的 /trunk 应该是“http://mywebsite.com”。

因此最后如果[http://mywebsite.com](http://mywebsite.com)然后[http://mywebsite.com/trunk](http://mywebsite.com/trunk)

其他

[http://mywebsite.com/trunk](http://mywebsite.com/trunk)然后[http://mywebsite.com](http://mywebsite.com)

但我想知道如何使用`#{URI.escape p.url(checkout_path)}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:48:14.900

我会将其放入某个辅助方法中，但您可以有效地执行以下操作：

```
 URI.escape(p.url(checkout_path)) =~ /\/trunk$/ ? URI.escape(p.url(checkout_path)).gsub('/trunk', '') : "#{URI.escape(p.url(checkout_path))}/trunk" 
```

# sql - 计算具有和不具有参数的同一列中的记录

> ID：13399182
> 
> 赞同：0
> 
> 时间：2012-11-15T14:08:23.630
> 
> 标签：sql, sql-server, sql-server-2008

我在查询时遇到了一些问题，希望有人能提供帮助。我曾尝试寻找解决方案，但似乎无法用我的搜索词找到类似的场景。

这是我正在寻找的：

我有一个包含三列的表，需要返回第一列中的值，以及第二列中值的两个计数。一个计数基于一个参数，另一个是总计数。理想情况下，我只想返回第一列中具有相同计数的值。

例如：

```
Part Number | Make ID
ABC123      | 1<br>
ABC123      | 1<br>
ABC123      | 3<br>
DEF456      | 1<br>
DEF456      | 1

Part Number | Count of Apps Where Make ID = 1| Count of Total Apps
ABC123      |                              2 | 3
DEF456      |                              2 | 2 
```

到目前为止，我的查询将返回具有参数值的部件号的应用程序总数，但我需要它返回两个计数：

```
SELECT apps.part#, 
       COUNT(DISTINCT application#)apps 
FROM   [mytable] AS apps 
       INNER JOIN (SELECT part# 
                   FROM   [mytable] 
                   WHERE  make = '1') AS sz 
               ON sz.part# = apps.part# 
GROUP  BY apps.part# 
ORDER  BY 1 
```

任何帮助是极大的赞赏！

谢谢大家！我收到了几个正确的答案，并选择了第一个给出的答案：

```
SELECT part#, 
       COUNT(DISTINCT CASE WHEN make = '1' THEN application# END) make1_apps,
       COUNT(DISTINCT application#) total_apps
FROM   [mytable]
GROUP  BY part#
HAVING COUNT(DISTINCT CASE WHEN make = '1' THEN application# END)
     = COUNT(DISTINCT application#)
ORDER  BY part# 
```

再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:11:38.797

试试这个：

```
SELECT
    apps.part#
,   COUNT(*)
,   SUM(CASE WHEN make = '1' THEN 1 ELSE 0 END)
FROM [mytable]
GROUP BY apps.part# 
```

该解决方案用计算总和代替计数，并`1`为匹配项和`0`不匹配项提供。

要过滤掉两个计数不同的记录，请添加一个`HAVING`子句：

```
SELECT
    apps.part#
,   COUNT(*)
,   SUM(CASE WHEN make = '1' THEN 1 ELSE 0 END)
FROM [mytable]
GROUP BY apps.part#
HAVING SUM(CASE WHEN make = '1' THEN 1 ELSE 0 END) = COUNT(*) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:11:57.020

```
SELECT [Part Number],
       SUM(CASE WHEN [Make ID] = 1 THEN 1 ELSE 0 END),
       COUNT(*)
FROM tableName
GROUP BY [Part Number] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/a2c728/1)

**更新 1**

```
SELECT [Part Number],
       SUM(CASE WHEN [Make ID] = 1 THEN 1 ELSE 0 END),
       COUNT(*)
FROM tableName
GROUP BY [Part Number]
HAVING SUM(CASE WHEN [Make ID] = 1 THEN 1 ELSE 0 END) = COUNT(*) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/a2c728/3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T14:15:53.563

另一种更类似于你的方式：

```
select d.[Part Number], count(d.[Part Number]), o.ones
from
  data d
cross apply
(
  select count(*)
  from data d2
  where d2.[Part Number] = d.[Part Number]
      and d2.[Make ID] = 1
) o (ones)
group by d.[Part Number],  o.ones 
```

[SQLFiddle](http://sqlfiddle.com/#!6/9f40a/6)

要满足您的第二个请求，请添加：

```
having count(d.[Part Number]) = o.ones 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:17:29.347

```
SELECT part#, 
       COUNT(DISTINCT CASE WHEN make = '1' THEN application# END) make1_apps,
       COUNT(DISTINCT application#) total_apps
FROM   [mytable]
GROUP  BY part#
HAVING COUNT(DISTINCT CASE WHEN make = '1' THEN application# END)
     = COUNT(DISTINCT application#)
ORDER  BY part#; 
```

HAVING 子句确保两个计数匹配。

# c# - 字段和局部变量的范围冲突

> ID：13399185
> 
> 赞同：1
> 
> 时间：2012-11-15T14:08:50.380
> 
> 标签：c#, scope

请参阅下面的代码片段

```
class scopes
{
  static int j=20;
  Console.WriteLine(j);
    public static void Main()
   {
       int j=30;
       Console.WriteLine(j);
       return;
   }
} 
```

对于上面的代码，支持变量隐藏
见下面的代码

```
public static int Main()
{
    int j = 20;
    for (int i=0; i < 10; i++)
    {
        int j = 30;    //can't do this
        Console.WriteLine(j + i);
    }
    return 0;
} 
```

此处不支持上述代码变量隐藏。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:12:30.090

在第一种情况下，至少有一种明确的方式来消除这两种事物之间的歧义，即`this.`方法内部的前缀`this.j`是字段，其中`j`成员是成员。至于为什么支持它：推测，但*可能是*为了向类添加一个字段（在类的情况下可能在不同的代码文件中`partial`）不会导致随机方法开始引发编译器错误。请注意，`j`方法中 of 的含义在添加字段之前和之后是相同的`j`。

In the second case, this is not a concern: adding locals can only impact the single local method, and there is no disambiguation syntax (i.e. which `j` do we mean), and no risk of accidental breakage **from unrelated code**.

# asp.net - 如果内容超过没有固定大小的容器大小，则显示滚动条

> ID：13399189
> 
> 赞同：0
> 
> 时间：2012-11-15T14:09:02.160
> 
> 标签：asp.net, css

我有一个如下所示的母版页：

```
<body id="body" runat="server" style="padding: 0px 25px 25px 25px;">
<div class="wrapper">
    <form id="form1" runat="server">
    <uc1:Header ID="header" runat="server" />
    <div style="width: 100%;" class="borderContent">
        <div style="float: left; margin: 20px 0px 20px 20px;">
            <uc2:MenuLeft ID="menuLeft" runat="server" />
        </div>
        <div style="width: 80%; float: left; margin: 20px;">
            <asp:ContentPlaceHolder ID="content" runat="server">
            </asp:ContentPlaceHolder>
        </div>
        <div class="push">
        </div>
        <div style="clear: both;">
        </div>
    </div>
    </form>
</div>
<div class="footer">
    <p>
        Copyright (c) 2012</p>
</div> 
```

在内容占位符中，我有一个有两行的表格，一个是标题，另一个是内容。如果内容长于屏幕的高度，我想将页脚和内容保持在适当的位置并使用滚动条，但不说容器有多大（我希望它保持它的比例，无论大小监视器）。所以也许它可以用百分比来完成？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:14:03.273

你可以使用

```
position: absolute; 
```

在你的页脚和内容上，然后为你的页脚做

```
bottom: 0px;
height: 100px; 
```

然后为内容做

```
bottom: 100px;
overflow: auto; 
```

无论页面如何调整大小，这将使页脚保持在页面底部，内容将在其上方。

这当然只是一个指导方针，您必须使用它才能使其看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:37:29.780

我以前做过类似的事情，你可以在页面的负载上放一些 JS/jQuery。基本上你会想要：

1.  根据页面的百分比或您喜欢的固定数量计算容器的最大高度。
2.  将数据附加到容器
3.  确定容器现在是否大于在步骤 1 中检索到的值。
4.  如果容器大于内容，则在元素的样式中添加 'overflow-y:scroll'
5.  否则，保持原样。

# java - 如何在 Java 中的链表上使用两个不同的迭代器？

> ID：13399192
> 
> 赞同：5
> 
> 时间：2012-11-15T14:09:11.787
> 
> 标签：java, iterator, linked-list, heuristics, concurrentmodification

我想使用链表来执行元素的提取和插入，尝试所有组合以进行启发式。链表对于这种类型的操作更有效。因为我想尝试所有可能的提取/插入对，所以我在列表上使用了两个不同的迭代器。这会引发“ConcurrentModificationException”。我怎样才能有效地执行此操作，而无需每次都重新遍历列表，因为这会破坏首先使用列表的全部目的？

这是代码的相关部分：

```
ListIterator<Integer> it1 = data.listIterator();
ListIterator<Integer> it2;

while(it1.hasNext()) {
    int i = it1.next();
    it2 = data.listIterator();

    while(it2.hasNext()) {
        if (i == it2.next()) continue; // continue right away when the indexes are equal
        it1.remove();
        it2.add(i);
        if (length() < best)
            return true;
        }

    // when the swap is not better/consistent
    it2.remove();
    it1.add(i);
}
return false; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T13:03:39.550

如果我没听错的话，你会寻找一种数据结构，它提供了几个用于操作列表的迭代器。这对于原始的 java.util.LinkedList 来说在技术上是困难的，因为它对当前索引进行内务处理，并且只有在其他迭代器在列表中的未知位置没有并行更改时，这才可能以一种有效的方式实现。但是，您可以轻松实现一个简单的 LinkedList，它不做这种内务处理并支持通过多个迭代器添加/删除。然后，迭代器不知道它在列表中的位置，但我敢打赌你不在乎。只需使用这样的东西：

```
public class MyList<T> {
private MyNode<T> first = null, last = null;

public MyNode<T> getFirst() {
    return first;
}

public MyNode<T> getLast() {
    return last;
}

public boolean contains(MyNode<T> n) {
    return n.list == this;
}

/**
 * If beforeMe is null, toInsert is inserted at the end of the list.
 * @return inserted node
 */
public void insertBefore(MyNode<T> beforeMe, MyNode<T> newNode) {
    if (newNode == null) {
        throw new IllegalArgumentException("toInsert must not be null!");
    }

    if (newNode.list != null) {
        throw new IllegalArgumentException("This node is already in the list " + newNode.list);
    }

    if (beforeMe == null) {
        if (last == null) {
            newNode.prev = newNode.next = null;
            first = last = newNode;
        } else {
            last.next = newNode;
            newNode.prev = last;
            newNode.next = null;
            last = newNode;
        }
    } else {
        newNode.prev = beforeMe.prev;
        newNode.next = beforeMe;

        if (beforeMe.prev != null) {
            beforeMe.prev.next = newNode;
        } else {
            first = newNode;
        }

        beforeMe.prev = newNode;
    }

    newNode.list = this;
}

/**
 * If beforeMe is null, t is inserted at the end of the list.
 * @return inserted node
 */
public MyNode<T> insertBefore(MyNode<T> beforeMe, T t) {
    MyNode<T> newNode = new MyNode<T>(t);
    insertBefore(beforeMe, newNode);
    return newNode;
}

public void remove(MyNode<T> n) {
    if (n == null || n.list != this) {
        throw new IllegalArgumentException("Node is not in the list!");
    }

    if (n.prev != null) {
        n.prev.next = n.next;
    } else {
        first = n.next;
    }

    if (n.next != null) {
        n.next.prev = n.prev;
    } else {
        last = n.prev;
    }

    n.prev = n.next = null;
    n.list = null;
}}

public class MyNode<T> {

private T t;
/**
 * written only by MyList
 */
MyNode<T> prev = null;
/**
 * written only by MyList
 */
MyNode<T> next = null;
/**
 * written only by MyList
 */
MyList<T> list = null;

public T get() {
    return t;
}

public void set(T t) {
    this.t = t;
}

public MyNode<T> previous() {
    return prev;
}

public MyNode<T> next() {
    return next;
}

public MyList<T> list() {
    return list;
}

/**
 * called only by MyList.
 * @param t
 */
MyNode(T t) {
    this.t = t;
}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:44:08.050

您不能在 LinkedList 上同时使用多个迭代器，但是您可以使用[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

尝试这个：

```
List<Integer> safeData = new CopyOnWriteArrayList(date);
// your code, but working with safeData rather than data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:23:59.763

当您只执行读取操作时，您可以在 LIST 上使用任意数量的迭代器。由于您在此处执行删除/添加，因此您不能将同一个列表与两个不同的迭代器一起使用，因为它会导致您现在遇到的 ConcurrentModificationException。

你想达到什么目标？可能，人们可以为您提供不同的选择。

# javascript - 如果函数中返回多个错误的返回值？

> ID：13399202
> 
> 赞同：0
> 
> 时间：2012-11-15T14:09:45.857
> 
> 标签：javascript

看到这个：

```
var x = function() {
    if(true) {
        return false;
    }

    return true;
}

if( x === false) {
      alert("OK");
} else {
      alert("Wrong");       
} 
```

检查[小提琴](http://jsfiddle.net/mxvFy/)。

为什么会“错”？为什么这个函数没有`false`按预期返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:10:27.837

要调用您的函数，请使用

```
if( x() === false) { 
```

您正在测试变量`x`是否保持`false`，而不是测试变量中包含的函数的返回值`x`。

# json - JIT SpaceTree 可视化

> ID：13399204
> 
> 赞同：1
> 
> 时间：2012-11-15T14:09:51.347
> 
> 标签：json, asp.net-mvc-4, infovis, thejit, space-tree

我需要在 MVC4 的项目中使用 JIT SpaceTree。

三种型号：`Symptom`, `Test`, `Reference`. 每个都有`ID (guid)`, `Title`, `Links (List<Guid>)`.

A`Symptom`可以链接到 a`Test`或 a `Reference`。A`Test`可以链接到一个`Symptom`or`Reference`并且 a`Reference`只能链接到 other `Refernces`。

在应用启动时：随机生成一个`N`大小图，假设每个节点有 2-5 个链接，遵循链接规则，假设`N`为 1000。

如何从这些模型构建 JSON 树？

# cryptography - 这可能是什么样的解密算法？

> ID：13399211
> 
> 赞同：0
> 
> 时间：2012-11-15T14:10:09.617
> 
> 标签：cryptography, encryption

对于我们大学的作业，我们必须找到密文的解密算法。我已经为每个字母找到了正确的解密方法，但我仍然不知道使用了哪种密码。（我们唯一的提示是它有点像凯撒密码）

![http://i.imgur.com/JXRFk.png](../Images/4904d5c808554721ce12b65ba4f05233.png)

（这就是解密字母的方式。第一行转换为第三行，我还写了字母表中字母的编号，也许可以找到一些数字解密算法）

这是密文。对于那些对此感兴趣的人：

> xituih，rinsyf ltgiqtl mwc液Sy mrim bgixt，ktxieutttr ril iymsxsbimtl mrim，sy mrt yimehig xcehut ca tntymu，uexr wcegl kt mrt xcylexm ca nthxsyftmchsv，gtintu mrt ihdq eylth，gtintu mrt ihdq eylth bhtmtyut ca hisusyf htxhesmu iyl xiniveq：rt bgixtu khemeu，i qceyf diive， sy xcddiyl ca mrtut achxtu；rt fsntu rsd syumhexmscyu mrim mrt xinighq urcegl hiyft iu tvmtyusntgq iu bcuuskgt sy igg lshtxmscyu；mrim rt wcegl tvthm rsdutga ycm mc kt ikutym ahcd mrt xidb gcyfth mriy mrhtt liqu。rinsyf ihhiyftl mrtut dimmthu, rt dihxrtu mc nstyyi kq iu gcyf zcehytqu iu rt xiy, wrty rsu cwy ucglsthu lsl ycm tvbtxm rsd。asylsyf mrtht i ahtur kclq ca xinighq, wrsxr rt ril utym cy mc mrim bgixt utnthig liqu ktacht, dihxrsyf syxtuuiymgq ysfrm iyl liq, rt ilniyxtl hibslgq mrhcefr mrt mthhsmchq ca mrt itles symc mrim ca mrt gsyfcy sy wrsxr mwc gtfscyu wtht wsymthsyf, mrim, sa iyq bgiy iaatxmsyf rsu cwy uiatmq urcegl rint ktty chfiysotl kq mrt itles, rt dsfrm ltatim sm kq mrt hibslsmq ca rsu dcntdtymu。wrty rt ihhsntl mrtht, rt utylu syachdimscy mc mrt htum ca mrt gtfscyu, iyl fimrthu igg rsu ihdq symc cyt bgixt ktacht symtggsftyxt ca rsu ihhsnig xcegl kt iyyceyxtl mc mrt ihnthys。nthxsyftmchsv, cy rtihsyf mrsu xshxedumiyxt, gtilu kixj rsu ihdq symc mrt xceymhq ca mrt ksmehsftu；iyl iamth dihxrsyf ahcd sm mc fthfcnsi, i mcwy ca mrt kcss, wrcd xituih ril utmmgtl mrtht iamth ltatimsyf mrtd sy mrt rtgntmsiy wih, iyl ril htylthtl mhskemihq mc mrt itles, rt ltmthdsytl mc immixj sm。rt utylu syachdimscy mc mrt htum ca mrt gtfscyu, iyl fimrthu igg rsu ihdq symc cyt bgixt ktacht symtggsftyxt ca rsu ihhsnig xcegl kt iyyceyxtl mc mrt ihnthys。nthxsyftmchsv, cy rtihsyf mrsu xshxedumiyxt, gtilu kixj rsu ihdq symc mrt xceymhq ca mrt ksmehsftu；iyl iamth dihxrsyf ahcd sm mc fthfcnsi, i mcwy ca mrt kcss, wrcd xituih ril utmmgtl mrtht iamth ltatimsyf mrtd sy mrt rtgntmsiy wih, iyl ril htylthtl mhskemihq mc mrt itles, rt ltmthdsytl mc immixj sm。rt utylu syachdimscy mc mrt htum ca mrt gtfscyu, iyl fimrthu igg rsu ihdq symc cyt bgixt ktacht symtggsftyxt ca rsu ihhsnig xcegl kt iyyceyxtl mc mrt ihnthys。nthxsyftmchsv, cy rtihsyf mrsu xshxedumiyxt, gtilu kixj rsu ihdq symc mrt xceymhq ca mrt ksmehsftu；iyl iamth dihxrsyf ahcd sm mc fthfcnsi, i mcwy ca mrt kcss, wrcd xituih ril utmmgtl mrtht iamth ltatimsyf mrtd sy mrt rtgntmsiy wih, iyl ril htylthtl mhskemihq mc mrt itles, rt ltmthdsytl mc immixj sm。

到目前为止，我发现的唯一可能的算法是使用新字母表的简单替换，在我的情况下是 fpomuglr ....q 但我不确定它是否真的只是那样。

我知道这实际上是一个询问编程问题的板，但由于这有点编程相关，而且我知道有一些编程人员非常喜欢密码学，所以我决定问你们是否可以在其中找到一些算法。此外，当我们找到实际的解密算法时，我们还必须对其进行编码。

问候杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:22:03.987

破解密码的第一步是对其进行频率攻击。在凯撒密码的情况下应该特别有效。

[http://en.wikipedia.org/wiki/Frequency_analysis](http://en.wikipedia.org/wiki/Frequency_analysis)

还有一大堆工具可以帮助你，都是在科学好奇心下发布的:)

[http://csc.fsksm.utm.my/syed/projects/cryptography.html](http://csc.fsksm.utm.my/syed/projects/cryptography.html)

# python - 如何退出 pyplot 循环？

> ID：13399222
> 
> 赞同：4
> 
> 时间：2012-11-15T14:10:32.843
> 
> 标签：python, matplotlib, tkinter, tk

我有一个使用 pyplot (backend:tkagg) 的 python 程序，其中简单地创建了一个 matplotlib，其中包含一些东西。当我想退出程序时，我立即调用：

```
plt.close('all') 
```

关闭它。奇怪的是，程序并没有退出。

用调试器跟踪它，我看到一切都完成后，它返回到

```
class Show(ShowBase):
    def mainloop(self):
        Tk.mainloop() 
```

在**backend_tkagg.py**中，

其次是

```
if not is_interactive():
            self.mainloop() 
```

在同一个文件中，然后到

```
def show(*args, **kw):
    global _show
    _show(*args, **kw) 
```

在**pyplot.py** 所以看来我还在 pyplot 循环中！

如何正确退出？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T23:26:31.870

您不是在`pyplot`循环中，而是与 GUI 工具包相关的主循环（这是处理所有用户与 GUI 交互的循环）。我怀疑只调用`exit()`你的程序并让对象清理处理正确拆除`TK`对象/主循环是安全的

可能相关： [Exit Tks mainloop in Python?](https://stackoverflow.com/questions/2732847/exit-tks-mainloop-in-python) ,

# c# - 在 C# .Net Compact Framework 中使用线程序列化任务的最佳方法是什么？

> ID：13399223
> 
> 赞同：0
> 
> 时间：2012-11-15T14:10:32.813
> 
> 标签：c#, .net, compact-framework

在我的程序中，我收到了一些数据，我必须将其保存到一个文件（一个或多个）中，数据的顺序非常重要，所以它应该像先到先得一样保存。

最后，我收到一个信号，表明此时不再有数据可用，我必须关闭所有打开的文件，我该如何处理它，我的意思是如何确保所有线程都完成了它们的工作，以便，我可以关闭文件。

我`ManualResetEvent`用来控制数据的顺序，所以下一个线程正在等待前一个线程完成它的工作。

以下是我的代码示例，我需要指导以非常有效的方式完成相同类型的工作，以及我如何知道所有线程都已完成工作。

```
class Program
    {
        static StreamWriter _fileStream;
        static void Main(string[] args)
        {
            _fileStream = File.CreateText(@"D:\HelloThread.txt");               
            ManualResetEvent currentEvent = new ManualResetEvent(true);
            ManualResetEvent nextEvent = new ManualResetEvent(false);              
            int length = 60;
            Data data = null;
            Console.WriteLine("Writing started...");
            for (int i = 0; i < length; i++)
            {
                data = new Data { CurrentEvent = currentEvent, Number = i, NextEvent = nextEvent };
                ThreadPool.QueueUserWorkItem(PrintMsg, data);                   
                currentEvent = nextEvent;
                nextEvent = new ManualResetEvent(false);
            }

            Console.ReadLine();
        }

        private static void CloseAll()
        {
            Console.WriteLine("Requested to close all...");

            Console.WriteLine("Done with the writing...");
        }

        private static object _lockObj = new object();

        private static void PrintMsg(object state)
        {
            Data data = state as Data;

            data.CurrentEvent.WaitOne();

            string msg = "Hello times...";
            for (int j = 0; j < 5; j++)
            {
                _fileStream.WriteLine(msg + data.Number);
               // Console.WriteLine(msg + data.Number);
            }

            data.NextEvent.Set();
        }
    }

    public class Data
    {
        public ManualResetEvent CurrentEvent { get; set; }
        public ManualResetEvent NextEvent { get; set; }
        public int Number { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:02:48.923

听起来您正在描述一个应用程序管道，其中有多个线程，每个线程都在一个单独的工作项上工作。例如，一个线程可能做输入，一个线程做进程，一个线程做输出。

通常，您通过创建多个队列来处理此问题。假设你有这三个线程。输入线程读取一条记录并将其放入输入队列。处理线程读取输入队列，处理一个项目，并将结果放入输出队列。然后输出线程读取输出队列并将数据写入它需要去的地方。

这可确保以正确的顺序处理和写入工作项，但允许所有线程同时工作。

使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)，您可以让您的线程在队列上进行非忙碌等待。此外，当输入线程完成读取时，它可以调用`CompleteAdding`队列以发出没有更多工作项的信号。当处理线程读取队列时，它可以检查该`IsCompleted`属性以确定是否所有项目都已完成，从而退出。读取输出队列时，输出线程也是如此。

有关[使用](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=821)`BlockingCollection`. _

如果不能使用`BlockingCollection`，则必须在`Queue<T>`.

# sql - SQL SUM、分组依据和有查询

> ID：13399228
> 
> 赞同：0
> 
> 时间：2012-11-15T14:10:50.293
> 
> 标签：sql, sql-server, group-by, sum, having

我有一个非常标准的查询，它将为我提供库存高于 0 的产品列表。

这工作正常，但是我现在需要添加给定 SKU 的 BranchID 31 的所有负数的总和。

```
SELECT * FROM Products WHERE
PrimaryPLU IN 
(select SKU FROM Stock 
WHERE BranchID IN (2,12,1,11,0,96,32,13,14,15) 
AND ApplicationID = @site 
GROUP BY SKU HAVING(SUM(Stock)) > 0)) 
```

所以 BranchID 31 可以有正数和负数，但是我只需要获取 SKU 的负数的总和，然后需要将其添加到检查中以查看它是否超过 0。

不知道从哪里开始，希望得到 SQL 大师的支持！

提前致谢！

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:15:42.660

试试这个：

```
SELECT * FROM Products WHERE
PrimaryPLU IN 
(select SKU FROM Stock 
WHERE BranchID IN (2,12,1,11,0,96,31,32,13,14,15) 
AND ApplicationID = @site 
GROUP BY SKU HAVING(SUM(CASE WHEN Stock < 0 AND BranchID = 31 
              THEN Stock ELSE 0 END)) > 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:15:49.357

取负数（股票）的绝对值之和，看它们是否非零。

# objective-c - 从 m4a 或 wav 解析标题？

> ID：13399231
> 
> 赞同：1
> 
> 时间：2012-11-15T14:10:57.773
> 
> 标签：objective-c, ios, parsing, wav, m4a

如何轻松地从 iOS(objective-c) 上的 wav 或 m4a 文件中解析标题？

感谢您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:59:06.067

```
NSBundle* bundle = [NSBundle mainBundle];
NSString* path = [bundle bundlePath];
NSURL * fileURL=[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/silence.mp3", path]];
AudioFileTypeID fileTypeHint = kAudioFileMP3Type;
NSString *fileExtension = [[fileURL path] pathExtension];
if ([fileExtension isEqual:@"mp3"]||[fileExtension isEqual:@"m4a"])
{
    AudioFileID fileID  = nil;
    OSStatus err        = noErr;

    NSDictionary *piDict = nil;
    UInt32 piDataSize   = sizeof( piDict );
    err = AudioFileGetProperty( fileID, kAudioFilePropertyInfoDictionary, &piDataSize, &piDict );
    if( err != noErr ) {
        [piDict release];
        NSLog( @"AudioFileGetProperty failed for property info dictionary" );
    }

    NSString * Album = [piDict objectForKey: 
                        [NSString stringWithUTF8String: kAFInfoDictionary_Album]];
    NSString * Artist = [piDict objectForKey: 
                         [NSString stringWithUTF8String: kAFInfoDictionary_Artist]];
    NSString * Title = [piDict objectForKey: 
                        [NSString stringWithUTF8String: kAFInfoDictionary_Title]];
    NSLog(@"%@",Title);
    NSLog(@"%@",Artist);
    NSLog(@"%@",Album);

} 
```

# macos - LoadFinished false 即使对于本地 html 文件加载

> ID：13399233
> 
> 赞同：0
> 
> 时间：2012-11-15T14:11:06.287
> 
> 标签：macos, qt, qwebview, qwebkit

我们使用 C++/QT 为 MAC OSX 开发了一个“.app”安装程序。即使在加载来自本地文件系统的 html 文件时，我们也面临着 loadFinished 信号被间歇性调用的问题。

我发现了一些关于 loadFinished 信号被多次调用的其他帖子。在我的情况下，该信号仅被调用一次且为 false。

有人遇到过这种问题吗？依赖值为 100 的 loadProgress 信号可以吗？

QT - 4.8.2
Mac OS X - 10.7

代码片段：-

```
boost::scoped_ptr<QWebView> m_webViewP;
static const boost::filesystem::path kJSEntryPoint = boost::filesystem::path("web") / boost::filesystem::path("index.html");

QUrl fileURL(QString::fromStdString(ISettingsManager::getInstance()->getJSEntryPoint()));
Log(INFO, "Loading auth page[%s].", qPrintable(fileURL.toString()));
m_webViewP->load(fileURL);
m_webViewP->activateWindow();
m_webViewP->raise();

const std::string SettingsManagerImpl::getJSEntryPoint() const
{
    boost::filesystem::path retPath;

    retPath = getAppDir_();

    retPath /= kJSEntryPoint;
    std::string toRet = retPath.string();
    convertToURL_(toRet);

    return toRet;
}

void SettingsManagerImpl::convertToURL_(std::string &path) const
{
    size_t index = path.find(kBackSlash);
    while (index != std::string::npos)
    {
        path.replace(index, 1, kForwarSlash);
        index = path.find(kBackSlash);
    }

    path = kURLPrefix + path;
}   

boost::filesystem::path SettingsManagerImpl::getAppDir_() const
{
#ifdef _WIN32
    TCHAR pathName[MAX_PATH];
    if (::GetModuleFileName(NULL, pathName, MAX_PATH) == 0)
    {
        SSLog(ERROR, "Error while retrieving app path.");
        return "";
    }

    ::PathRemoveFileSpec(pathName);

    return boost::filesystem::path(pathName);
#else
    NSAutoreleasePool *poolP = [[NSAutoreleasePool alloc] init];

    NSString *pathP = [[NSBundle mainBundle] executablePath];
    pathP = [pathP stringByDeletingLastPathComponent];

    boost::filesystem::path toRet([pathP cStringUsingEncoding:NSASCIIStringEncoding]);

    [poolP drain];
    return toRet;
#endif
} 
```

# windows-8 - Windows 8 中的导航栏

> ID：13399234
> 
> 赞同：0
> 
> 时间：2012-11-15T14:11:06.743
> 
> 标签：windows-8, appbar

我如何实现一个 Windows 8 导航栏，如天气应用程序或财务应用程序中的导航栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:53:33.697

首先，您需要添加顶部应用栏，如下所示：

```
<Page.TopAppBar>
    <AppBar>
        <!--App Bar Contents here -->
    </AppBar>
</Page.TopAppBar> 
```

而不是在应用栏内添加导航按钮。

# php - 扩展 PDO 类时出错

> ID：13399237
> 
> 赞同：0
> 
> 时间：2012-11-15T14:11:13.507
> 
> 标签：php

在这段代码中，我尝试扩展 PDO

```
class mypdo extends PDO{

    static public $db = null;

    public function __construct($dsn, $username=false, $password=false){
        if(self::$db==null){
            try {            
                self::$db = parent::__construct($dsn, $username, $password);
                self::$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            } catch (PDOException $e) {
              die("PDO CONNECTION ERROR: " . $e->getMessage() . "<br/>");
            }
        }
        return self::$db;
    }
} 
```

当我打电话时

```
$db = new mypdo(<here my DSN>,<here my user>,<here my password>); 
```

我收到这个错误

> 致命错误：在非对象上调用成员函数 setAttribute()

错误在这一行

```
self::$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

`setAttribute()`是 PDO 对象的方法，为什么会出现这个错误？

当我将此方法添加到我的 PDO 类中时

```
public function lastInsertId($name) {
    return self::$db->lastInsertId($name); 
} 
```

如果我尝试调用它，我会收到相同的错误消息

我认为正确的代码是

```
class mypdo extends PDO{

    static public $db = null;

    public function __construct($dsn, $username=false, $password=false){
        if(self::$db==null){
            try {            
                parent::__construct($dsn, $username, $password);
                parent::setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            } catch (PDOException $e) {
              die("PDO CONNECTION ERROR: " . $e->getMessage() . "<br/>");
            }
        }
        return self::$db;
    }

    public function runSQL($SQL) {
        return parent::exec($SQL);
    }

    public function lastInsertId($name) {
       return parent::lastInsertId($name);
    } 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:14:01.093

在 PHP 中，在这种情况下`PDO`，对象构造函数通常不返回值。

当您执行以下操作时：

```
self::$db = parent::__construct($dsn, $username, $password); 
```

如果`PDO`构造函数 ( `parent::__construct()`) 没有返回值，则您设置`self::$db`为`null`-value。这就是您收到错误*"Call to member function `setAttribute()`on a non-object"*的原因，因为`null`它不是对象。

要进行测试，您可以尝试以下操作：

```
parent::__construct($dsn, $username, $password);
self::$db = $this; 
```

这将调用父级的构造函数，然后设置`self::$db`对当前实例的引用。

# vb.net - VB.NET单数据类型计算问题

> ID：13399241
> 
> 赞同：3
> 
> 时间：2012-11-15T14:11:34.897
> 
> 标签：vb.net, vb.net-2010

我想使用 vb.net 对小数进行基本计算。

```
Dim a As Single= 7200.5
Dim b As Single= 7150.3
Dim c As Single= a - b

'Expected result = 50.2
MsgBox(a.ToString + " - " + b.ToString + " = " + c.ToString.Trim)
'Produced result is: 50.2002

Dim single1 As Single
Dim single2 As Single
Dim single3 As Single

single1 = 425000
single2 = 352922.2
single3 = single1 - single2

'Expected result is: 72077.8
MsgBox(single3.ToString)
'Produced result is: 72077.81 
```

如此简单的计算结果怎么会如此不准确？当我将数据类型更改为 时，问题得到解决`Decimal`，但`Decimal`对象消耗更多内存（16 字节）。是否有任何替代数据类型可用于执行简单的分数计算并获得准确的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:22:19.750

这与浮点数在内存中的存储方式有关，.Net 中的 Single 是单精度浮点数，在存储十进制数时比 Decimal 或 Double 准确得多。

当计算机计算您的数字时，它只能使用二进制分数，并且在单精度浮点数中，它们不是很准确。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Single-precision_floating-point_format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)。

编辑：这里有一些特定于 VB.Net 的更多信息：http: [//msdn.microsoft.com/en-us/library/ae382yt8 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ae382yt8(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:41:19.743

和数据类型不精确`Single`。`Double`他们使用浮点方法来存储他们的值。浮点使用较少的内存并允许更快的计算，但它们不精确。如果您要使用它们，这是您必须接受的权衡。如果精度很重要，那么它们不是您的选择。 `Decimal`是精确的（即到一定数量的小数位数），所以通常，在大多数情况下，这是精确小数的最佳选择。如果您确实需要节省内存，并且可以保证您的数字在一定范围内，那么您可以使用`Int16`, `Int32`, 或`Int64`代替。例如，如果您只关心两位小数，您可以简单地将所有内容乘以 100，然后除以 100（使用`Decimal`部门的类型）在显示之前。这样，您可以使用更少的内存存储许多数字并执行许多操作，并且只需要在需要显示结果时使用 Decimal 数据类型。

```
Dim a As Integer = 720050 '7200.5
Dim b As Integer = 715030 '7150.3
Dim c As Integer = a - b
Dim cDisplay As Decimal = CDec(c) / CDec(100)
MessageBox.Display(String.Format("{0} - {1} = {2}", a, b, c)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:16:30.533

您可以改用`Decimal`数据类型。它会很好用！这是因为`Decimal`是定点值，而`Single`和`Double`是浮点值（精度损失）。

# c++ - 如何在向量中找到第一个小于整数 X 的元素？(c++)

> ID：13399243
> 
> 赞同：6
> 
> 时间：2012-11-15T14:11:38.317
> 
> 标签：c++, stl, vector, binary-search

如果我有以下向量 {10 10 10 20 20 20 30 30} 并且我想要一个函数来返回整数的位置 = X 或直接返回 X 之后的较小元素，例如如果我正在搜索 11 我想要返回 2 的函数，因为第 2 个元素（10）是向量中第一个小于 11 的元素。
我尝试使用 lower_bound 但这不起作用。

```
int myints[] = {10,20,30,30,20,10,10,20};
vector<int> v(myints,myints+8);           // 10 20 30 30 20 10 10 20
vector<int>::iterator low,up;

sort (v.begin(), v.end());                // 10 10 10 20 20 20 30 30

low=lower_bound (v.begin(), v.end(), 11); //
up= upper_bound (v.begin(), v.end(), 11); //

cout << "lower_bound at position " << int(low- v.begin()) << endl;
cout << "upper_bound at position " << int(up - v.begin()) << endl;

return 0; 
```

此代码输出：

```
lower_bound at position 3
upper_bound at position 3 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T14:18:26.200

cppreference 告诉我`std::lower_bound`

> 返回一个迭代器，指向范围 [first, last) 中**不小于 value的第一个元素**

和`std::upper_bound`

> 返回一个迭代器，指向范围 [first, last) 中**大于 value的第一个元素**

在这种情况下，给定一个包含`10 10 10 20 20 20 30 30`我希望两个函数都指向第一个向量的向量`20`，它位于向量中的第 3 位，并且确实是您两次得到的结果。如果您改为要求`20`,`std::lower_bound`将返回一个迭代器，该迭代器指向`20`向量中的第一个（位置 3）...第一个不小于 20 的数字与您在要求时得到的结果相同`11`。但是，在这种情况下，`std::upper_bound`将返回一个指向第一个`30`（位置 6）的迭代器，这是第一个大于 20 的值。

只需将迭代器移回一个以获得小于目标数的最后一个值，`std::prev`这是一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T14:17:24.223

好吧，`upper_bound`返回大于测试项目的第一个项目，那么之前的项目（如果存在）将是您想要的项目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T13:13:32.290

你可以这样做......如果向量为空，最好返回一个迭代器......

```
auto find_next_smaller(vector<int> vec, const int x) { 
    std::sort(vec.begin(), vec.end());
    auto it = std::lower_bound(vec.begin(), vec.end(), x); 
    if (it == vec.end()) { 
      it = (vec.rbegin()+1).base();
    }
    else if (it != vec.begin() && *it > x) { 
        --it; 
    }

    return it; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-03T04:30:22.107

如果必须找到小于或等于某个 x 的元素，则可以使用 multiset 来做到这一点。

```
#include <iostream> 
#include <set> 
#include <iterator> 

using namespace std; 

int main() 
{
    multiset <int, greater <int> > iammultiset;
    iammultiset.insert(10);
    iammultiset.insert(10);
    iammultiset.insert(14);
    iammultiset.insert(20);
    iammultiset.insert(20);
    iammultiset.insert(30);
    iammultiset.insert(40);
    iammultiset.insert(50);
    //{10,10,14,20,20,30,40,50}

    cout<<*iammultiset.lower_bound(17) << endl;
    //The Output here will be 14.

    cout<<*iammultiset.lower_bound(20) << endl;
    //The Output here will be 20.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-26T21:33:21.667

```
#include <bits/stdc++.h>
using namespace std;
template <typename F, typename T>

F first_less_than(F f, F l, T val)
{
    auto it = lower_bound(f, l, val);
    return it == f ? l : --it;
}

int main()
{
    vector<int> s{10, 20, 25, 40};
    auto j = first_less_than(s.begin(), s.end(), 35);

    cout << *j;

    //output : 25
    return 0;
} 
```

# php - JSON 和 PHP 驱动的幻灯片无法正常工作

> ID：13399244
> 
> 赞同：0
> 
> 时间：2012-11-15T14:11:43.217
> 
> 标签：php, jquery, json

我从一个客户端继承了一个项目，该项目使用 JSON 和 PHP 来显示来自在线房地产服务的房地产列表。服务提供的数据会加载，但与它们关联的属性和代理会混淆。有时会显示所有属性，但只有一个代理与之关联。其他时候数据会加载，但在显示一些属性后不会转换。过渡由 jQuery 循环插件控制。

我已经包含了下面的所有代码。非常感谢任何帮助。

谢谢你。

麦克风

```
<?php
function decode_json_string($json){
    $objects = array();

    $start_pos = strpos($json, '[');
    $end_pos = strpos($json, ']');

    $dataString = substr($json, ++$start_pos, ($end_pos - $start_pos));

    while(strpos($dataString, '{') !== FALSE){
        $start_pos = strpos($dataString, '{');
        $end_pos = strpos($dataString, '}');

        $objectString = substr($dataString, ++$start_pos, ($end_pos - $start_pos));

        $tempString = $objectString;

        $formattedString = "";

        while(strpos($tempString, ':') !== FALSE){
            $valueStart = strpos($tempString, ':');

            if($tempString[++$valueStart] != '"'){

                $substring1 = substr($tempString, 0, $valueStart);

                if(strpos($tempString, ',', $valueStart) !== FALSE){
                    $valueEnd = strpos($tempString, ',', $valueStart);

                    $substring2 = substr($tempString, $valueStart, ($valueEnd - $valueStart));
                }
                else{
                    $valueEnd = $valueStart + 1;
                    $substring2 = substr($tempString, $valueStart);
                }

                $formattedString .= $substring1 . '"' . $substring2 . '"';

                $tempString = substr($tempString, $valueEnd);
            }
            else{
                $valueEnd = strpos($tempString, '",') + 1;

                $formattedString .= substr($tempString, 0, $valueEnd);
                $tempString = substr($tempString, $valueEnd);
            }
        }

        $tempArray = explode('",', $formattedString);

        foreach($tempArray as $tempValue){
            $tempValueArray = explode( ":", $tempValue);

            $key = format_string($tempValueArray[0]);
            $value = format_string($tempValueArray[1]);

            $object[$key] = $value;
        }

        $objects[] = $object;

        $dataString = substr($dataString, ++$end_pos);
    }

    return $objects;
}

function format_string($string){
    $string = str_replace("'", "", $string);
    $string = str_replace('"', "", $string);

    return trim($string);
}

function get_agent_properties_json($agentID){
    global $BASE_URL;

    $date = time();
    $dataType = '3'; // Data Type = Properties

    $url = $BASE_URL . '/FeaturedDataHandler.c?r=' . $date . '&DataType=' . $dataType . '&CompanyID=' . $companyID . '&agentID=' . $agentID;

    // create a new cURL resource
    $ch = curl_init();

    // set URL and other appropriate options
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, 0);

    // grab URL and pass it to the browser
    $response = curl_exec($ch);

    // close cURL resource, and free up system resources
    curl_close($ch);

    return $response;
}

function get_agent_properties($agentID){
    $agent_properties_json = get_agent_properties_json($agentID);
    $properties = decode_json_string($agent_properties_json);

    return $properties;
}

function print_property_details(&$property, &$agent){
    global $BASE_URL;

    if($property['ListingStatusCode'] != 'SOLD'){
        $address = $property['Address'];
        $shortaddr = substr($address, 0, -12);
        echo "<div class='propertySlide'>";
            echo "<div class='title'>";
                echo "<div class='box1'>";
                    echo "<span class='price'>". $property['Price'] ."</span>";
                    echo "<span class='address'>". $shortaddr ."</span>";
                echo "</div>";
                echo "<div class='box2'>";
                    echo "<span class='style'><strong>Style:</strong> ". $property['Style'] ."</span>";
                    echo "<span class='footage'><strong>Sq. Feet:</strong> ". $property['SqFootage'] ."</span>";
                    echo "<span class='beds'><strong>Beds:</strong> ". $property['Bedrooms'] ."</span>";
                    echo "<span class='baths'><strong>Baths:</strong> ". $property['Bathrooms'] ."</span>";
                    echo "<span class='year'><strong>Year Built:</strong> ". $property['YearBuilt'] ."</span>";
                echo "</div>";
            echo "</div>";
            echo "<div class='imagebox'><img class='listingImage' src='". $BASE_URL . $property['Image'] ."' /></div>";
            echo "<div class='agentbox'>";
                echo "<img class='agentImage' src='" . $BASE_URL . "/Users/pic" .  $agent['WTLUserID'] . ".jpg' />";
                echo "<span class='agent'><strong>Agent:</strong> ". $agent['DisplayName'] ."</span>";
            echo "</div>";
        echo "</div>";
    }
} 
```

?>

```
$date = time();
$dataType = '4'; // Data Type = Agents
$companyID = '2119'; // Red Deer - Century 21 Advantage

$url = $BASE_URL . '/FeaturedDataHandler.c?r=' . $date . '&DataType=' . $dataType . '&CompanyID=' . $companyID;

// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
$response = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

$agents = decode_json_string($response);

foreach($agents as $agent){
    $properties = get_agent_properties($agent['WTLUserID']);

    foreach($properties as $property){
        print_property_details($property, $agent);
    }
}

<?php
$BASE_URL = 'http://www.century21.ca';

$date = time();
$dataType = '4'; // Data Type = Agents
$companyID = '2119'; // Red Deer - Century 21 Advantage

$url = $BASE_URL . '/FeaturedDataHandler.c?r=' . $date . '&DataType=' . $dataType . '&CompanyID=' . $companyID;

// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
$response = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

$agents = decode_json_string($response);

foreach($agents as $agent){
    $properties = get_agent_properties($agent['WTLUserID']);

    foreach($properties as $property){
        print_property_details($property, $agent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:29:41.200

在尝试在`decode_json_string()`这里调试函数之前，您应该尝试 PHP 的内置`json_decode()` [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

如果你有一个旧版本的 PHP 缺少你可以在[upgrade.php](http://include-once.org/p/upgradephp/)`json_decode()`中找到一个兼容的

# jquery - 如何使用 jQuery 删除 div 开头的多余空格？

> ID：13399246
> 
> 赞同：2
> 
> 时间：2012-11-15T14:11:50.500
> 
> 标签：jquery

我想从 div 中删除额外的创建空格的标签（特别是 br & p）。div 内容可能如下：

```
<div>
  <br>
  <br>
  something
  <br>
  something
</div> 
```

但在其他情况下，它们也可以很好：

```
<div>
  something
  <br>
  something
</div> 
```

[如何使用 jquery 删除前两个 BR 标记中](https://stackoverflow.com/questions/3667904/how-to-remove-the-first-two-br-tags-with-jquery)描述的解决方案？如果 BR 计数已知（例如，开头总是单个 br），则可以工作。如果一开始的 BR 数量在 0 和无穷大之间呢？此外，中间的 BR 不应该被删除。

为 div 寻找类似 $.trim 的东西:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:19:23.780

以下将删除`<br>`文本块中的所有重复元素（包括开头）：

```
​$("div"​​​​​​).html(function(i, html) {
    return $.grep(html.split(/<br\s*\/?>/), function(part) {
        return $.trim(part) !== "";
    }).join("<br>");
}); 
```

**演示：http:** [//jsfiddle.net/S8qeb/](http://jsfiddle.net/S8qeb/)

这将`<br>`仅删除文本块开头的所有元素：

```
$("div").html(function(i, html) {
    var textFound = false;
    return $.grep(html.split(/<br\s*\/?>/), function(part, i) {
        if ($.trim(part) !== "") textFound = true;
        return textFound;
    }).join("<br>");
}); 
```

**演示： http:** [//jsfiddle.net/S8qeb/1/](http://jsfiddle.net/S8qeb/1/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:20:55.517

尝试

```
$('.trimmable > div').contents().each(function(i){
    var node = $(this),
        contents = $.trim(node.text());
    if (this.nodeName === 'BR' || contents === '') {
        node.remove();
    } else {
        return false;
    }
}); 
```

演示在[http://jsfiddle.net/gaby/3TnM​​T/1/](http://jsfiddle.net/gaby/3TnMT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:19:53.280

尝试这个

```
var otherContent = false;
$('#yourdiv').contents().each(function() {
    if(!otherContent) {
        if(this.tagName.toLowerCase() == "br") {
            $(this).remove();
        } else {
            otherContent = true;
        }
    }
}); 
```

# php - mysqli插入函数不返回真或假

> ID：13399249
> 
> 赞同：1
> 
> 时间：2012-11-15T14:11:54.820
> 
> 标签：php, mysqli

嘿，这里是第一次海报。我正在使用 php 和 mysqli 创建一个注册表单，在实际插入函数之前一切正常。

我已经检查并仔细检查和三次检查查询中的变量名称，它们是正确的，表单输入也到达了函数，但由于某种原因在 £this->connect->query($query) 它拒绝去工作。我尝试了无数种不同的方法来执行实际的查询，每一种都返回 false。我在这里无所适从，希望有人可以提供帮助！

```
function insertNewRecord($fname, $lname, $pass, $email, $mob, $school, $location, $connumb)
{
    $query = "INSERT INTO 'dbusers' 
        (firstName, lastName, password, emailaddress, mobnumb, school, campus, connumb) 
VALUES ($fname, $lname, $pass, $email, $mob, $school, $location, $connumb)";
    if(!$this->connection->query($query)) {
        echo $query;
    }
} 
```

编辑：我想通了，我忘了自动增加表中的用户 ID。我已经坚持了几个小时，我觉得自己像个白痴。

谢谢你的时间

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:16:19.210

尝试以下列形式使用您的查询：

```
$query = "INSERT INTO `dbusers` 
        (`firstName`, `lastName`, `password`, `emailaddress`, `mobnumb`, `school`, `campus`, `connumb`) 
VALUES ('$fname','$lname', '$pass', '$email', '$mob', '$school', '$location', '$connumb')"; 
```

但这不是正确的方法，您应该使用准备好的语句来防止 SQL 注入。见[手册](http://php.net/manual/en/mysqli.prepare.php)

# macos - 每个文档的 NSUserDefaults

> ID：13399251
> 
> 赞同：0
> 
> 时间：2012-11-15T14:11:58.813
> 
> 标签：macos, cocoa, nsuserdefaults, appkit, nsdocument

AppKit 框架是否提供了一种存储`NSUserDefaults`方式`NSDocument`？如果没有，你会建议如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:16:12.800

如果您有一些标识文档的键，则可以使用该键将对象（字典...）存储在`NSUserDefaults`. 或者，根据您定义“文档”的方式，它可以包含自己的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:30:19.397

使用`NSDictionary`. 将其内容与文档一起存储。如果您保存的格式无法修改以包含此字典，您可能可以切换到“文档包”，也称为“文档包” - 包含数据和 plist 内容的目录词典。

* * *

如果您想明确地将每个文档的数据存储在`[NSUserDefaults standardUserDefaults]`-provided 工具中，您可能需要考虑组织这样的事情：

*   documentSpecificSettings - NSArray
    *   项目 0 - NSDictionary
        *   url - 包含 NSURL 书签的 NSData
        *   some_key - 您的自定义密钥
        *   another_key - 您的自定义密钥
    *   项目 1 - NSDictionary
        *   url - 包含 NSURL 书签的 NSData
        *   some_key - 您的自定义密钥

请参阅[文档`NSURL`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，特别是`+bookmarkDataWithContentsOfURL:error:`和`+URLByResolvingBookmarkData:options:relativeToURL:bookmarkDataIsStale:error:`。周围还有更多方法，但这些是您想要使用的方法。

据我了解，在将书签解析为 URL 时，您必须手动跟踪文档是否仍然存在。而且我怀疑您必须解析字典中的每个 URL 以查看它是否适用于您的文档。

这似乎比简单地将字典与文档一起存储更复杂。

# node.js - Nginx - 多个后端的反向代理

> ID：13399252
> 
> 赞同：1
> 
> 时间：2012-11-15T14:12:06.580
> 
> 标签：node.js, nginx

请在将此标记为重复之前阅读我自己的案例，这与其他案例有点不同。

我正在开发多个我想在同一个域下拥有的 node.js 端点。

这些服务确实会响应以下内容：

*   `/user/:user_id/authorization`- 授权服务的基本路径
*   `/user/:user_id/log`- 日志服务的基本路径

等等。

第一部分`/user/:user_id/`对所有服务都是一样的，它只是一种在路径内传递用户 ID 的 REST 方式，而不是使用 Authentication 标头。

**有没有办法可以将 NGINX 反向代理到这些 Web 服务，因为它们使用相同的基本路径？**

另一个问题：如果 NGINX 不用于缓存内容，如果它是反向代理，它是否会降低 node.js 的性能（例如，如果它的性能比 node.js 最差）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:35:31.530

使用 nginx，你可以做任何你想做的路由，看这里作为起点： http: [//nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)和[http://nginx.org/r/location](http://nginx.org/r/location)

* * *

> 另一个问题：如果 NGINX 不用于缓存内容，如果它是反向代理，它是否会降低 node.js 的性能（例如，如果它的性能比 node.js 最差）？

[node.js 本身或用于提供静态文件的 nginx 前端？](https://stackoverflow.com/questions/9967887/node-js-itself-or-nginx-frontend-for-serving-static-files)

另见：[http ://www.aosabook.org/en/nginx.html](http://www.aosabook.org/en/nginx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:44:03.970

如果我清楚地理解你的问题，你需要这样的东西：

```
server {
    listen              80;
    server_name default;
    root                /var/www/;

    access_log  /var/log/nginx/access.log combined;
    error_log   /var/log/nginx/error.log error;

    location / {
        if (-f $request_filename) {
                access_log      off;
                expires         30d;
                break;
        }
        error_log       off;
        error_page 404  = @node;
    }

    location @node {
        if ($uri ~ "/user/(.*)/authorization") { proxy_pass     http://127.0.0.1:8080; } #authorization service
        if ($uri ~ "/user/(.*)/log")           { proxy_pass     http://127.0.0.1:8081; } #log service

        proxy_next_upstream     error timeout http_500 http_502 http_503 http_504;
        proxy_set_header        Host $host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_ignore_headers    X-Accel-Expires Expires Cache-Control;
    }
} 
```

# c# - 找到相同的号码并用新号码替换其他号码

> ID：13399253
> 
> 赞同：0
> 
> 时间：2012-11-15T14:12:11.217
> 
> 标签：c#, arrays

我有 2 个数组（每个都包含 2 个字符串），其中一个包含来自 USB 的序列号。另一个包含来自文本文件的序列号。我能够成功地检索它们。所以这是我的问题：我需要将它们相互比较，找到一个不同的序列号，然后替换它。像这样：

```
Contents (Dummy Serial numbers)
     ________
USB | A | B

TXT | B | C 
```

如您所见，USB 和 TXT 阵列都包含相同的序列号 (B) 之一。那部分很容易；但是，我需要编写代码来查看 C != A，然后我需要 A 来替换 C。

我试过这个：

```
for (int x = 0; x < 2; x++)
{
     for (int y = 0; y < 2; y++)
     {
          //checks for same serial number
          if (m_AttachedUSB[x] == m_Existing_Serial_Numbers[y])
          {
              //found one
              IntOnlyOne++;
              //we want this one to stay beacause it has a serial number 
              //that matches one in the .txt file
              m_ChachedUSB = m_AttachedUSB[x];
          }
     }
} 
```

然而，这只会找到相似的序列号。如何替换不同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:26:08.780

如果我理解正确：

```
List<int> usb = new List<int> {1,2,4,7,8};
List<int> text = new List<int> {1,2,3,4,5};

usb.Intersect(text).Union(usb); 
```

这将返回一个包含 {1,2,4,7,8} 的列表。

intersect 方法为您提供两个列表包含的所有项目。在这种情况下 {1,2,4}。union 方法将在 USB 尚不可用时加入所有来自 USB 的项目。在这种情况下 {7,8}。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:26:47.047

下面在 USB 列表中创建一组所有序列号，然后循环遍历 TXT 列表，从 USB 集中删除匹配项或记录 TXT 列表中“旧”项的索引。

然后它将“旧”项目替换为 USB 集中的剩余项目，现在应该只是“新”项目。

这假定两个列表的长度相同，并且 USB 列表不包含重复项。

```
HashSet<string> usbSNs = new HashSet<string>(m_AttachedUSB); // { "A", "B" }
List<int> txtOldIndices = new List<int>();                   // { }

// Remove existing items from USB set, note indices of old items in TXT list.
for (int i = 0; i < m_CachedUSB.Length; i++)
{                                         // First iteration  Second iteration
    if (!usbSNs.Remove(m_CachedUSB[i]))   // Now { "A" }      Still { "A" }
        txtOldIndices.Add(i);             // Still {}         Now { 1 }
}
// At this point you may want to check usbSNs and txtOldIndices
// have the same number of elements.

// Overwrite old items in TXT list with remaining, new items in USB set.    
foreach(var newSN in usbSNs)
{
    m_CachedUSB[txtOldIndices[0]] = newSN;    // Now [ "B", "A" ]
    txtOldIndices.RemoveAt(0);                // Now { }
} 
```

本质上，这是一种复制的方式`m_AttachedUSB`，`m_CachedUSB`同时保留两者共有的项目的位置，这就是我假设你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:26:52.797

您的列表中只有 4 个项目，您可以保持简单：

```
if(usbArray[0] == textArray[0])
  usbArray[1] = textArray[1];
else if(usbArray[0] == textArray[1])
  usbArray[1] = textArray[0];
else if(usbArray[1] == textArray[0])
  usbArray[0] = textArray[1];
else if(usbArray[1] == textArray[1])
  usbArray[0] = textArray[0]; 
```

基本上，改变两个不同的。

第二种解决方案：

```
for(int i=0; i<=1; i++)
  for(int j=0; j<=1; j++)
     if(usbArray[i] == textArray[j])
       usbArray[(i+1)%2] = textArray[(j+1)%2]; 
```

# objective-c - 使用 GCD 进行后台处理

> ID：13399257
> 
> 赞同：1
> 
> 时间：2012-11-15T14:12:17.050
> 
> 标签：objective-c, cocoa-touch, grand-central-dispatch

我正在开发具有数据库同步机制的应用程序。

我正在调用同步服务如下

```
[NSThread detachNewThreadSelector:@selector(sync) 
                         toTarget:[SyncService sharedInstance] 
                       withObject:nil]; 
```

但这里的问题是，同步不是在后台执行的。结果应用

将处于空闲状态，直到同步完成。所以，我想到了使用 GCD 作为背景

处理并做了以下

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{

    [[SyncService sharedInstance]Sync]; 

}); 
```

但是即使现在同步也没有在后台执行。我希望在后台执行同步

背景。

编辑：

每当我不使用 [NSThread detachNewThreadSelector:@selector(sync)

```
 toTarget:[SyncService sharedInstance] withObject:nil];, 
```

紧接着的下一行 [[[SyncService sharedInstance] delegate]addObject:self]; 不是

称为。当我使用 GCD（全局队列）时不会调用它。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:19:40.373

您正在调用`dispatch_get_global_queue`具有错误属性的方法，前 0 表示或`DISPATCH_QUEUE_PRIORITY_DEFAULT`任何其他预定义的优先级： `DISPATCH_QUEUE_PRIORITY_HIGH`、`DISPATCH_QUEUE_PRIORITY_DEFAULT`或。.`DISPATCH_QUEUE_PRIORITY_LOW``DISPATCH_QUEUE_PRIORITY_BACKGROUND`

你应该这样称呼它：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [[SyncService sharedInstance]Sync]; 
}); 
```

* * *

文档还指出，调用[`+detachNewThreadSelector:toTarget:withObject:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/occ/clm/NSThread/detachNewThreadSelector%3atoTarget%3awithObject%3a)将启动一个新线程。你确定没有其他东西阻止用户界面。你在`sync`调用主线程的方法中做了什么？这可能意味着主线程/队列将再次阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:35:14.400

你试过这个：

```
[[SyncService sharedInstance] performSelectorInBackground:@selector(Sync) withObject:nil] 
```

正如 rckoenes 所说，您应该确保在 Sync 方法的主线程上没有做任何事情

# regex - 如何在 Dreamweaver 中替换使用 REGEX

> ID：13399268
> 
> 赞同：1
> 
> 时间：2012-11-15T14:13:16.303
> 
> 标签：regex, dreamweaver

有谁知道如何使用正则表达式替换dreamweaver 中的字符串？

基本上我想改变

.htm?" 到 .htm?" rel="nofollow"

我可以在dreamweaver中找到我要找的字符串没问题

```
\.htm\?(.*?)\" 
```

上面的代码完美地找到了上面的字符串。但是我想我可能对替换部分有点困惑。

如果我使用代码

```
.htm?(.*?)" rel="nofollow" 
```

在替换部分，它完全替换为那个。有什么方法可以让它保留我的参数字符串吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:15:49.193

你想要的是一个捕获组。顺便说一句，你已经有一个。括号捕获其中匹配的任何内容。由于您只有一组括号，因此捕获组使用 number 索引`1`。

试试这个替换字符串：

```
.htm?$1" rel="nofollow" 
```

替代，`$0`对应于完全匹配。所以你也可以用

```
$0 rel="nofollow" 
```

**编辑：**我现在找不到任何人`$0`在 Dreamweaver 中使用。如果它不起作用，请捕获整个匹配项：

```
(\.htm\?(.*?)\") 
```

并将其替换为

```
$1 rel="nofollow" 
```

# facebook-graph-api - 如何获取各种 Facebook 帖子类型的点赞、分享和评论总数？

> ID：13399269
> 
> 赞同：1
> 
> 时间：2012-11-15T14:13:18.860
> 
> 标签：facebook-graph-api, facebook-fql, facebook-php-sdk

我正在创建一个简单的 CMS 系统，用户可以在其中贡献由 Facebook 上的品牌页面制作的鼓舞人心的帖子。用户所要做的就是将永久链接粘贴到帖子中，CMS 将处理 ping Graph API 以获取它需要的所有信息。（例如[https://www.facebook.com/photo.php?fbid=10152047553868306&set=a.99394368305.88399.40796308305&type=1&relevant_count=1](https://www.facebook.com/photo.php?fbid=10152047553868306&set=a.99394368305.88399.40796308305&type=1&relevant_count=1)）

CMS 的要求之一是每个帖子都包含`like`、`comment`和计数。`share`这就是我挣扎的地方。

简单地用照片 ID ping 图形端点只会返回一个分页的喜欢/评论列表。总喜欢或总评论没有参数。幸运的是，该`photo`表包括供我查询的成员`like_info`。`comment_info`这对于获取照片的总数非常有用：

`SELECT like_info, comment_info FROM photo WHERE object_id = 10152047553868306`

人们会期望我可以`SELECT`在`status`or`video`表上应用相同的 FQL，以便获取状态更新和视频帖子的`like`和`comment`信息，但您不能。 `like_info`并且`comment_info`只驻留在`photo`桌子上。

至少现在我可以获得照片的点赞/评论总数，但我仍然看不到如何获得照片的分享总数的迹象。

有没有一种方法可以可靠地获取视频帖子、照片帖子和状态帖子的`like`、`comment`和计数？`share`使用 Graph 或 FQL API 的任意组合？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-01T09:28:20.967

我为 facebook graph api v2.8 找到了类似的东西

```
$accessToken ="XXXXXXXXXX";

$fb = new Facebook\Facebook(array(
        'app_id' => 'Facbook App Id',
        'app_secret' =>  'Facebook Secret Key',
        'default_graph_version' => 'v2.8',
)); 

$params = array();

$request = $fb->request('GET', '/{post_id}/?fields=likes.limit(0).summary(true),comments.limit(0).summary(true)',$params,$accessToken);

$response = $fb->getClient()->sendRequest($request);

$graphNode = $response->getGraphNode();
$likeArr = $graphNode['likes']->getMetaData();
$commentArr = $graphNode['comments']->getMetaData();

echo "Total Post Likes : ".$likeArr['summary']['total_count'];
echo "Total Post Comments : ".$commentArr['summary']['total_count']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T09:24:39.363

用这个：

```
SELECT user_id FROM like WHERE object_id=10151751324059927 LIMIT 1000 
```

# javascript - 在 griview 页面索引更改事件上运行 javascript 函数

> ID：13399274
> 
> 赞同：1
> 
> 时间：2012-11-15T14:13:41.307
> 
> 标签：javascript, function, paging, page-index-changed

我有一个 gridview，启用了分页。这是我想转到第二页时的链接

```
<a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$gv','Page$2')"> 
```

问题是我需要在分页完成之前运行 CheckValid() 函数 - 用户无法使用无效的详细信息进行分页。如何设置 HREF 以允许这样做？

```
<a href= "if Checkvalid() then "javascript:__doPostBack('ctl00$ContentPlaceHolder1$gv','Page$2')""> 
```

[谷歌没有返回我能找到的任何答案](http://www.dotnetnuke.com/Resources/Forums/forumid/203/threadid/423454/scope/posts.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:19:29.410

在您的情况下，寻呼机是由 ASP.NET 生成的，因此您不能在服务器端做太多事情。您必须运行一个客户端脚本，该脚本分步骤： 1-找到寻呼机锚点 2-用 onclick 函数替换（并存储）它们的 href 3-创建验证函数，如果成功，则调用原始存储的函数“ __doPostBack”。

如果您获得 Firebug 或 Chrome 开发人员工具等客户端工具的帮助，这并不是那么复杂。

# installation - 安装 shield installscript 项目并停止安装

> ID：13399276
> 
> 赞同：0
> 
> 时间：2012-11-15T14:13:55.557
> 
> 标签：installation, installshield, installscript

我一直在努力使用 InstallShield，但是经过大量的反复试验和谷歌搜索，我设法使用 installscript 创建了一个项目。欢迎之后它做的第一件事是调用一个.net 程序集并处理方法的返回。现在我似乎无法理解的是如何处理退货。

例如，如果 dll 调用返回 false，我想向用户显示一条消息，建议“xyz”，然后显示未安装任何内容的完成对话框。现在这在某种程度上很容易做到，因为我可以很容易地做到

```
MessageBox("Some message here...", INFORMATION);
abort; 
```

然而，这正是代码所建议的 - 中止。它只是退出，我认为不会对已经安装的任何内容进行任何回滚。

现在在这种情况下，这很好，因为在过程的早期没有安装任何东西。但是，我将在安装过程的稍后部分进行一些类似的调用，并且需要正确处理它。

如何使用 installshield 中的 installscript 正确处理中止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:00:13.160

运行安装进度条（复制文件），如果你的项目是InstallShield项目，很难找到执行回滚操作的方法，但如果你的项目是MSI项目，一旦调用不成功，它可以自动执行回滚操作。

# c++ - 将 unsigned char* 数组转换为 std::string

> ID：13399282
> 
> 赞同：1
> 
> 时间：2012-11-15T14:14:16.423
> 
> 标签：c++, arrays, stringstream, stdstring

我正在使用此代码将 unsigned char*（指向 256 个值的数组）转换为 std::string：

```
int ClassA::Func(unsigned char *dataToSend, int sendLength)
{
    std::stringstream convertStream;
    std::string dataToSendStr = "";

    for(int i=0; i<=sendLength; i++) convertStream << dataToSend[i];    

    while(!convertStream.eof()) convertStream >> dataToSendStr;
    ...
} 
```

但后来我有这种格式的 dataToSendStr ：

```
dataToSendStr "" 
[0]           0x00 
[1]           0x00 
[2]           0x04 
[3]           0xC0 
```

如果我现在使用这个值，我只会得到“”而不是重要的值 [0-3]！

-> 需要类似：dataToSendStr "000004C0"

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:19:28.790

如果需要，请使用 IO 操纵器[std::hex](http://en.cppreference.com/w/cpp/io/manip/hex)（这是我*认为*基于*需要类似*问题的一部分）的字符的十六进制表示`dataToSend`：

```
std::ostringstream convertStream;
convertStream << std::hex << std::setfill('0');

for (int i = 0; i < sendLength; i++)
{
    convertStream << std::setw(2) << static_cast<short>(dataToSend[i]);
} 
```

# wpf - VS 2012：无法从文本创建“ImageSource”

> ID：13399285
> 
> 赞同：2
> 
> 时间：2012-11-15T14:14:29.713
> 
> 标签：wpf, visual-studio-2012, runtime-error, imagesource

我在我的资源字典中声明一个图像，然后在用户控件中显示如下：

**ResourceDictionary.xaml**（我在这里使用一种样式，因为我计划在用户更改他们查看的内容时更新图像，即公司、员工等）

```
<ImageSource x:Key="CompanyIcon">Images/company_128.png</ImageSource>

<Style x:Key="QuickInfoIcon" TargetType="{x:Type Image}">
    <!-- Default Value -->
    <Setter Property="Source" Value="{StaticResource CompanyIcon}" />
</Style> 
```

“Images”文件夹是“Assests”的子文件夹。“Assests”文件夹包含我的“ResourceDictionary.xaml”文件，我知道路径是正确的，因为如果我将路径更改为“../Images/company_128.png”之类的东西，则会出现设计器错误

**QuickinfoView.xaml**

```
<UserControl x:Class="SidekickAdmin.Views.QuickInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignWidth="500" Height="100"
             Background="BlanchedAlmond">

    <!-- Setup a grid to house the icon and the info -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Name="InfoIcon">
            <Image Style="{StaticResource QuickInfoIcon}" Height="50" Width="50"/>
        </Grid>
    </Grid>

</UserControl> 
```

在 Visual Studio 2012 设计器中查看布局时，一切都显示正确，但是当我运行程序时，我收到错误“发生 XamlParseException：无法从文本‘Images/employee_128.png’创建‘ImageSource’。” 在带有 ImageSource 的 ResourceDictionary 行上。

如果我将 ImageSource 更改为使用不同的图像，它会在 VS2012 设计器中按预期更新，但在尝试运行程序时会出现相同的错误。

我已在 Resource.resx 文件上将 Build Action 设置为“Embedded Resource”，但这并没有解决问题。

关于我尝试运行该程序时为什么会收到 XamlParseException 的任何想法？

作为一个附带问题，当我在我的程序中合并图像时，图像本身（文件）是否应该在 bin/debug 文件夹中的某个地方可见，或者此信息是否隐藏在 bin/debug 中的某个文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-24T21:51:18.980

我遇到过同样的问题。

您可以尝试解决我的问题。

将文件添加到解决方案资源管理器中的项目中。我建议添加文件夹太依赖于文件到项目文件的相对路径。然后转到：

构建 -> 清洁解决方案

结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T22:12:04.423

我也遇到了这个问题。这个社区或任何社区都没有提供任何建议，其中大部分是关于 PACK uri 和其他方法的逐字声明解决了这个问题。可悲的是，尽管人们在回答时表现出的所有热情，但他们中的大多数人都不知道如何解决它。

设置：1 个解决方案，2 个项目。

项目 1 是一个包含资源字典的类库，其中包含一个 BitMapSource 条目列表，这些条目指向其自身下方包含的图像的本地相对路径。

例子：

```
<BitmapSource x:Key="RedoImage">Images/Redo.png</BitmapSource> 
```

项目 2 是一个 WPF 应用程序，它引用了该类库并使用 MergedDictionary 从另一个程序集中加载字典：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/WPFResourceLibrary;component/Resources/images.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

在 WPF 应用程序项目的一个窗体中，我在窗体上放置了一个简单的 IMAGE 控件。在它的源属性下，我可以在 LocalResources 下从我的 images.xaml 资源字典中的 BitMapSources 列表（按键）中进行选择。进行选择，图像将出现（如预期的那样）。

但是你瞧，在运行应用程序时，我会收到可怕的“无法从文本创建图像源......”消息。我摆弄着尝试所有的许多建议，每一个都没有成功。在运行时总是出现相同的错误，或者没有错误但没有图像。

受够了，我制作了自己的自定义控件。我选择不覆盖图像源属性，所以我们可以在适当的地方使用它，但通过添加一个名为 ResourceName 的依赖属性来扩展它。此控件查看当前应用程序域中记录和可用的所有 BitMapSources 和 ImageSources。宾果游戏，它有效。

编码：

```
<Image x:Class="WPFResourceLibrary.Controls.ImageFromResource"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            >

</Image> 
```

以及它背后的代码。

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace WPFResourceLibrary.Controls
{
    /// <summary>
    /// ImageFromResource - an extension of the standard Image control that properly handles binding Resource to an Image from a Resource
    /// </summary>
    public partial class ImageFromResource : Image
    {
        public ImageFromResource()
        {
            InitializeComponent();

            DependencyPropertyDescriptor imageDescriptor = DependencyPropertyDescriptor.FromProperty(ImageFromResource.ResourceNameProperty, typeof(ImageFromResource));
            if (imageDescriptor != null)
            {
                imageDescriptor.AddValueChanged(this, delegate { SetImage(); });
            }
        }

        public static DependencyProperty ResourceNameProperty = DependencyProperty.Register("ResourceName", typeof(ImageSource), typeof(ImageFromResource), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));

        [Description("Resource String of the Target Image."), Category("Appearance")]
        public ImageSource ResourceName
        {
            get { return (ImageSource)GetValue(ResourceNameProperty); }
            set
            {
                SetValue(ResourceNameProperty, value);
            }
        }

        private void SetImage()
        {
            if(ResourceName != null)
                this.Source = new BitmapImage(new Uri(ResourceName.ToString()));
        }

    }
} 
```

因此，提供标准图像所期望的功能，而不会出现问题。

请注意，这是在带有 SP3 的 Visual Studio 2012 中执行的。

保罗

# ios - 我应该将 appDelegate 用于所有单例样式的应用程序级代码吗？

> ID：13399289
> 
> 赞同：1
> 
> 时间：2012-11-15T14:14:35.550
> 
> 标签：ios, singleton, appdelegate

从“好设计”的角度来看。我应该对所有应用级公共代码使用 appDelegate 类吗？换句话说，我有很多视图控制器需要做的事情。这意味着它是通用功能，而不是特定于单个视图控制器。所以问题是：我应该将这些常用方法放在 appDelegate 中吗？这是为了这个吗？我应该创建另一个单独的类吗？

以下是我所说的常见功能的一些示例：

1) 播放常见的声音（如错误声音）。

2) 显示警告信息（例如错误信息）。

3) 验证输入应该是特定类型的方法（十进制数字）

4) 从 Web 服务更新应用级数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:34:39.180

将所有常用函数放到 appDelegate 类中并不是一个好主意。

1 & 2）您可以创建超类，并且您的所有视图控制器都继承它或使用类别。

3 & 4) 可以创建一个普通的函数类来实现。例如，您的类名是 Function 并且您有类方法，使用它只需简单调用 [Function validate:yourdata] 返回布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:19:59.123

如果它与数据相关，那么在您的应用程序中拥有一个单独的模型层对我来说最有意义。如果它的代码与您希望视图控制器的行为方式特别相关，那么一个通用的超类甚至一个`UIViewController`类别听起来更像是正确的解决方案。

我认为应用程序委托更多地是关于设置基本应用程序结构（可能包括连接模型和控制器层）并处理其生命周期。

# lua - Lua，元表，阴影环境

> ID：13399291
> 
> 赞同：1
> 
> 时间：2012-11-15T14:14:49.930
> 
> 标签：lua

我想在全局环境中提供一组特定的功能。添加这些表和 C-Function 后，全局 env 应该是只读的。目标是创造一个可替代的廉价工作环境和一个静态的**全球**环境。（静态环境应该包含一些生成时间密集的表。）

从现在开始，创建全局变量的调用应该被转发到`local_env`，访问不在其中的全局变量的调用`_G`应该被转发到`local_env`.

为此，我使用以下元表：

```
local_env = {}

setmetatable(_G, {
  __newindex = function(t, v, n)
  --print('attempt to write to _G', v, n, 
  --      'forward to local env', local_env)
  rawset(local_env, v, n)
end,
__index = function(t, k)
    --print('attemp to index unknown value', t, k,
    --       '-> lookup in local env', local_env)
    return rawget(local_env, k)
  end,
}) 
```

我认为使用`rawset`我可以克服这种保护，但我可以忍受这个问题。运行一些 Lua 代码，我收到元函数正在使用的消息：

```
attempt to write to _G  flag    function: 42a2fbe4      forward to local env    table: 42b91fbc
attempt to write to _G  state   0       forward to local env    table: 42b91fbc
attemp to index unknown value   table: 4298aa2c state    -> lookup in local env table: 42b91fbc 
```

但打印`local_env`不显示任何内容：

```
for k,v in pairs(local_env) do 
  print("-- local_env", k,v) 
end 
```

我会犯什么逻辑错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:32:22.163

> 一般的解决方案是将全局表中的内容复制到本地环境中，如果您希望它可以访问的话。

# c++ - 可变参数模板函数参数的编译错误

> ID：13399292
> 
> 赞同：3
> 
> 时间：2012-11-15T14:14:52.193
> 
> 标签：c++, c++11, namespaces, variadic-templates, compiler-bug

我正在尝试编写一些参数包装帮助器代码，如下所示

```
#include <type_traits>
#include <string>

struct test{};

namespace ns {
    struct test{};
}

template<typename T>
struct arg_wrapper;

template<>
struct arg_wrapper<test>
{
    arg_wrapper(test&) {}
};

template<>
struct arg_wrapper<ns::test>
{
    arg_wrapper(ns::test&) {}
};

template<>
struct arg_wrapper<std::string>
{
    arg_wrapper(const std::string& value) {}
};

template<typename... Args>
void callee(const Args&... args)
{
}

template<typename... Args>
void wrapper_variadic(Args&&... args)
{
    callee(arg_wrapper<typename std::decay<Args>::type>(args)...);
}

template<typename Args>
void wrapper_fixed(Args&& args)
{
    callee(arg_wrapper<typename std::decay<Args>::type>(args));
}

int main()
{
    std::string a("test");
    wrapper_variadic(a); // works well
    wrapper_variadic(std::string("test")); // compile error
    wrapper_variadic(test()); // works well
    wrapper_variadic(ns::test()); // compile error
    wrapper_fixed(std::string("test")); // works well
    wrapper_fixed(test()); // works well
    wrapper_fixed(ns::test()); // works well
} 
```

此代码适用于没有命名空间的固定参数函数或类型的左值引用，但我的编译器拒绝尝试将右值引用参数与某个命名空间一起使用。我用的是vc11 ctp版本，报错信息有点看不懂（见下文）

```
1>d:\work\toy\vs2012test\vs2012test\source.cpp(39): error C2065: 'basic_string<char,std::char_traits<char>,std::allocator<char> >' : undeclared identifier
1>          d:\work\toy\vs2012test\vs2012test\source.cpp(52) : see reference to function template instantiation 'void wrapper_variadic<std::basic_string<char,std::char_traits<char>,std::allocator<char>>>(std::basic_string<char,std::char_traits<char>,std::allocator<char>> &&)' being compiled
1>d:\work\toy\vs2012test\vs2012test\source.cpp(39): error C2923: 'std::decay' : 'basic_string<char,std::char_traits<char>,std::allocator<char> >' is not a valid template type argument for parameter '_Ty'
1>d:\work\toy\vs2012test\vs2012test\source.cpp(39): error C2955: 'std::decay' : use of class template requires template argument list
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\type_traits(1620) : see declaration of 'std::decay'
1>d:\work\toy\vs2012test\vs2012test\source.cpp(39): error C2440: '<function-style-cast>' : cannot convert from 'std::basic_string<char,std::char_traits<char>,std::allocator<char>>' to 'arg_wrapper<_If<std::is_array<remove_reference<_Ty>::type>::value,remove_extent<remove_reference<_Ty>::type>::type*,_If<std::is_function<remove_reference<_Ty>::type>::value,add_pointer<remove_reference<_Ty>::type>::type,remove_cv<remove_reference<_Ty>::type>::type>::type>::type>'
1>          Source or target has incomplete type
1>d:\work\toy\vs2012test\vs2012test\source.cpp(39): error C2440: '<function-style-cast>' : cannot convert from 'ns::test' to 'arg_wrapper<test>'
1>          No constructor could take the source type, or constructor overload resolution was ambiguous
1>          d:\work\toy\vs2012test\vs2012test\source.cpp(54) : see reference to function template instantiation 'void wrapper_variadic<ns::test>(ns::test &&)' being compiled 
```

它看起来像一个编译器错误，但我对此没有信心。这是错误吗？如果不是，那么我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:10:13.037

它可以与 g++ 4.7.2 和 clang++ 3.2 一起编译。这可能是一个编译器错误。似乎 vc11 没有正确实现扩展包。

# python - 设置 matplotlib 图形/轴属性的首选方法

> ID：13399293
> 
> 赞同：30
> 
> 时间：2012-11-15T14:14:53.050
> 
> 标签：python, matplotlib, idioms

假设我有一个名为 的 matplotlib 轴`ax`，我想设置它的几个属性。目前，我这样做：

```
ax.set_yscale('log')
ax.set_xlim([0,10])
ax.set_xlabel('some label') 
```

但一段时间后它会变得乏味。然后我遇到了这个方法：

```
ax.set(yscale='log', xlim=[0,10], xlabel='some label') 
```

更简洁，但似乎有点无证。我的意思是所有文档都说“一个 tkstyle set 命令，通过*kwargs*来设置属性”。

首选或惯用的方式是什么？`set`方法api稳定吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T13:01:38.077

[Pyplot 教程](http://matplotlib.org/users/pyplot_tutorial.html)似乎推荐`ax.set_xxx()`函数，但也提到`.setp(xxx=)`.

另一方面，`.set(xxx=)`没有使用函数`.setp(xxx=)`，并且虽然有文档记录，但在任何示例中都没有使用（[Pyplot API](http://matplotlib.org/api/pyplot_api)）。

我理解 matplotlib 支持命令式编程风格和类似 matlab 的风格。原因是目标用户群——那些已经熟悉 Python 和以前使用过 Matlab 的人。

我的结论是 matplotlib*推荐*的 api 是`.set_xxx()`.

通过[画廊](http://matplotlib.org/gallery.html)的快速检查证实了这一点。

编辑：现在画廊里似乎都有这两个例子。

绘图函数的关键字参数也存在类似的对偶性，只是命令式 API 并不那么明显。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-05T07:08:18.763

作为对这个问题的超迟跟进：

`ax.set_xlim(4)`并`ax.set(xlim=4)`最终是同一件事，所以做你喜欢的事。`ax.set(kwarg=foo)`通过一些字符串操作调用`ax.set_kwarg(foo)`，如果你查看源代码就可以看到。各种 setter 函数也大多是单行函数，但存在是为了允许内省`setp`工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T23:38:03.837

我通常使用 matplotlib 的 pyplot（交互式）接口，它公开了 [`setp`](http://matplotlib.org/api/pyplot_api.html?highlight=setp#matplotlib.pyplot.setp)函数（我经常使用）。

> matplotlib 支持使用 setp()（“设置属性”）和 getp() 来设置和获取对象属性，以及对对象进行自省。

这让您可以像`set`上面的函数一样执行操作，只需将要设置的对象作为参数传递：

```
>>> x = arange(0,1.0,0.01)
>>> y1 = sin(2*pi*x)
>>> y2 = sin(4*pi*x)
>>> lines = plot(x, y1, x, y2)
>>> setp(lines, linewidth=2, color='r') 
```

我猜该`setp`函数实际上调用了传递对象的`set`函数，该函数用于定位和设置*kwargs*。

所以我的想法是，尽管缺乏文档，但对象的方法是通过*kwargs*而不是逐行`set`设置多个参数的惯用方法。

 *我的 2 美分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-03T10:16:32.883

我在 matplotlib 后端有类似的问题，所以我刚刚看到这篇文章。我希望 matplotlib 允许对绘图中的属性使用字典控件。使用@Chris Zeh 的建议，您可以：

```
f = {'xlabel': 'x1', 'ylabel': 'x2'}
[setp(ax, formati, formatj) for formati, formatj in f.items()] 
```

这解决了我的问题。希望这可以帮助。*

# python - 每次 apache 重启时烧瓶登录会话都会被破坏

> ID：13399294
> 
> 赞同：2
> 
> 时间：2012-11-15T14:14:56.443
> 
> 标签：python, flask, flask-login, flask-extensions

我正在使用烧瓶登录[https://github.com/maxcountryman/flask-login并且](https://github.com/maxcountryman/flask-login)[login_user](http://packages.python.org/Flask-Login/#flaskext.login.login_user)中记住的字段似乎不起作用。

每次重启 apache 后会话都会被破坏。理想情况下，remember 字段应该处理这个问题。即使会话值也会被破坏。这真是令人沮丧......任何知道解决方案的人请ping ..谢谢我使用login_user作为

```
login_user(user, remember=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:41:11.423

如果有人遇到此问题，您必须正确编写函数**user_loader**。

```
@login_manager.user_loader
def load_user(id):
    return "get the user properly and create the usermixin object" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T19:47:00.097

我遇到了这个问题，但这是因为我们`Flask.secret_key`在启动时设置了一个新的 GUID。我们将其移至配置文件（每个环境的唯一 ID），现在会话保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:40:05.323

您必须在用户 mixen 以及 user_loader 中设置 get_auth_token

```
class User(UserMixin):
    def get_auth_token(self):
        """
        Encode a secure token for cookie
        """
        data = [str(self.id), self.password]
        return login_serializer.dumps(data) 
```

和

```
@login_manager.token_loader
def load_token(token):
    """
    Flask-Login token_loader callback. 
    The token_loader function asks this function to take the token that was 
    stored on the users computer process it to check if its valid and then 
    return a User Object if its valid or None if its not valid.
    """

    #The Token itself was generated by User.get_auth_token.  So it is up to 
    #us to known the format of the token data itself.  

    #The Token was encrypted using itsdangerous.URLSafeTimedSerializer which 
    #allows us to have a max_age on the token itself.  When the cookie is stored
    #on the users computer it also has a exipry date, but could be changed by
    #the user, so this feature allows us to enforce the exipry date of the token
    #server side and not rely on the users cookie to exipre. 
    max_age = app.config["REMEMBER_COOKIE_DURATION"].total_seconds()

    #Decrypt the Security Token, data = [username, hashpass]
    data = login_serializer.loads(token, max_age=max_age)

    #Find the User
    user = User.get(data[0])

    #Check Password and return user or None
    if user and data[1] == user.password:
        return user
    return None 
```

这两种方法都使用模块 itsdangerous 来加密记住我的 cookie

```
from itsdangerous import URLSafeTimedSerializer 
```

我写了一篇关于我如何做到的博客文章 [Flask-Login Auth Tokens](http://blog.thecircuitnerd.com/flask-login-tokens/)

# aptana - 如何在 Aptana 中使用 git

> ID：13399297
> 
> 赞同：4
> 
> 时间：2012-11-15T14:15:12.113
> 
> 标签：aptana, aptana3

我在我的 Windows 7 机器上设置了 Git 扩展，我也有 Aptana 3。我有 Git 扩展与我的存储库一起工作。我建立了一个 Apatana 项目并指向我的项目的 git 目录。我在齿轮图标中获得了拉/推选项。

当我尝试拉时出现错误：
**权限被拒绝（公钥）。
致命：远端意外挂断**

我在 Goodle 上花了一段时间试图找出答案，但没有任何运气。

我想我需要对某种公钥进行排序，但不知道是什么。

本

# javascript - Ajax 回调后颜色选择器不起作用

> ID：13399299
> 
> 赞同：1
> 
> 时间：2012-11-15T14:15:19.013
> 
> 标签：javascript, jquery, ajax, silverstripe

我正在使用 Silver Stripe 2.4.7，我正在尝试使用 silver stripe 网站上提供的 jQuery 颜色选择器扩展来添加颜色选择器。我已经添加了颜色选择器，颜色选择器工作正常没有问题。但问题是当我从管理部分的设置页面转到其他页面并再次回到我添加颜色选择器的位置时，我的颜色选择器不起作用。另一个整个页面是通过 Ajax 调用的。

例如说我在设置中，如果我进入页面，页面是通过 Ajax 加载而不是页面刷新，当我回到设置时，这也是通过银条中的 Ajax 完成的。此时我无法使用颜色选择器。输入在那里，单击时颜色选择器不会弹出。

任何帮助将不胜感激。

# jquery-cycle2 - Jquery Cycle 2 双寻呼机

> ID：13399302
> 
> 赞同：0
> 
> 时间：2012-11-15T14:15:30.460
> 
> 标签：jquery-cycle2

我有两个 jQuery Cycles 版本 2。[http://jquery.malsup.com/cycle2/](http://jquery.malsup.com/cycle2/) 我想要一个导航 (#nav) 来控制两个周期。我知道它仍然是测试版，所以也许还不可能..

```
 <script src="http://jquery.malsup.com/cycle2/jquery.cycle2.js"></script>
    <script src="http://jquery.malsup.com/cycle2/jquery.cycle2.scrollVert.js"></script>

    <div class="cycle-slideshow"
        data-cycle-fx="scrollVert"
        data-cycle-pause-on-hover="true"
        data-cycle-timeout="0"
        data-cycle-pager="#nav">
        <img src="http://i46.tinypic.com/29oocgm.jpg" data-cycle-pager-template="<a href=#>1</a>" />
        <img src="http://i48.tinypic.com/o602sz.jpg" data-cycle-pager-template="<a href=#>2</a>" />
        <img src="http://i50.tinypic.com/qntoxc.jpg" data-cycle-pager-template="<a href=#>3</a>" />
    </div>
    ​&lt;br />
    <br />
    <div class="cycle-slideshow"
        data-cycle-fx="scrollVert"
        data-cycle-pause-on-hover="true"
        data-cycle-timeout="0"
        data-cycle-pager="#nav">
        <img src="http://i46.tinypic.com/29oocgm.jpg" data-cycle-pager-template="<a href=#>1</a>" />
        <img src="http://i48.tinypic.com/o602sz.jpg" data-cycle-pager-template="<a href=#>2</a>" />
        <img src="http://i50.tinypic.com/qntoxc.jpg" data-cycle-pager-template="<a href=#>3</a>" />
    </div>
    <div id="nav"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

示例：http: [//jsfiddle.net/hfjXd/](http://jsfiddle.net/hfjXd/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:32:16.383

我不确定我是否完全理解你的意思，但如果你只是使用：

```
data-cycle-prev=".prev"
data-cycle-next=".next" 
```

在这两个周期上，它都应该这样做。

检查这个例子：查看源： http: [//jquery.malsup.com/cycle2/demo/caro-pager.php](http://jquery.malsup.com/cycle2/demo/caro-pager.php) 和这个：http: [//jquery.malsup.com/cycle2/demo/prevnext.php](http://jquery.malsup.com/cycle2/demo/prevnext.php)

# google-chrome - 用于 chrome 扩展的 Windows 安装程序

> ID：13399303
> 
> 赞同：1
> 
> 时间：2012-11-15T14:15:32.473
> 
> 标签：google-chrome, google-chrome-extension

我刚刚创建了一个要安装在 chrome 上进行视频聊天的扩展。我想将它与我提供的软件捆绑在一起。如何创建允许我执行此操作的安装程序。

该应用程序是用 java 编写的，并且 chrome 扩展名是 html、js、css 代码。我在 vb 中编写代码也没有问题，但我找不到任何链接，他们有这方面的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-04T11:45:39.920

您需要创建 exe（或 vb 脚本）作为安装程序的一部分，它将在 Windows 注册表记录中为您的扩展创建：

在注册表中查找或创建以下项：

```
32-bit Windows: HKEY_LOCAL_MACHINE\Software\Google\Chrome\Extensions
64-bit Windows: HKEY_LOCAL_MACHINE\Software\Wow6432Node\Google\Chrome\Extensions 
```

在 Extensions 项下创建一个与您的扩展程序 ID 同名的新项（文件夹）（例如，aaaaaaaaabbbbbbbbbbcccccccccc）。

在您的扩展密钥中，创建一个属性“update_url”，并将其设置为值：“ [https://clients2.google.com/service/update2/crx](https://clients2.google.com/service/update2/crx) ”（这指向您的扩展在 Chrome 网上应用店中的 crx） ：

```
{
  "update_url": "https://clients2.google.com/service/update2/crx"
} 
```

启动浏览器并转到`chrome://extensions`；您应该会看到列出的扩展名。

更多信息可以[在官方文档中找到](https://developer.chrome.com/extensions/external_extensions#registry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:54:57.577

如果您想通过其他软件安装 Chrome 扩展程序，[这可能会有所帮助](http://developer.chrome.com/extensions/external_extensions.html)。

但是，我相信用户现在必须在扳手图标下批准安装。

# asp.net-mvc - 不同的链接共享同一个事件

> ID：13399304
> 
> 赞同：0
> 
> 时间：2012-11-15T14:15:35.327
> 
> 标签：asp.net-mvc, view

我当时在 ASP.NET MVC3 应用程序上工作，我的视图中有很多链接，例如

链接1 链接2 链接3 链接4 链接5

我需要上面的链接共享相同的事件。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:17:39.300

我假设您正在谈论客户端事件。只需向元素添加一个类，然后在脚本中分配按类选择它们的元素。尝试从某个容器（由 id 选择）中搜索具有类的元素，以避免在整个 DOM 中搜索。

代码：

```
var elements = document.getElementById("SomeContainerId").getElementsByClassName("Class");
elements.onclick = function() {
    // Do your stuff.
}; 
```

替换您想要的事件的“onclick”。

# sql-server - T-SQL 将所有日期时间记录向后移动

> ID：13399307
> 
> 赞同：0
> 
> 时间：2012-11-15T14:15:47.993
> 
> 标签：sql-server, tsql

我的数据库有很多记录，记录了正在或将要采取的各种行动的日期时间。为了正确测试数据库，我想将所有这些都移到过去，6 个月，一年等（而不是更改系统时间）。我怎样才能通过存储过程实现这一点，按天数参数化？

（如果您还包括其他日期/时间类型，例如 datetime2，则可以加分）

需要明确的是，我正在寻找能够动态更新所有表中所有列的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:18:18.090

看起来很简单...

```
CREATE PROCEDURE dbo.MoveDatesBack @NumberOfDays INT
AS BEGIN

   UPDATE dbo.YourTableNameHere
   SET SomeDateColum = DATEADD(DAY, @NumberOfDays, SomeDateColumn) 

   -- repeat the above statement for each table/column that you need to "move back"

END 
```

像这样调用它：

```
EXEC  dbo.MoveDatesBack @NumberOfDays = -30 
```

或任何你需要的...

该`DATEADD`函数应适用于 SQL Server 2008 或更高版本中的任何日期类型 - 如果将其应用于 a `DATETIME2`，您将获得一个新的`DATETIME2`

但这对于 Stackoverflow 来说似乎**太简单**了——我在这里错过了什么？

**更新：**如果您想在整个数据库中的所有表和所有与日期相关的列中全局执行此操作 - 您可以使用基于游标的方法，如下所示：

```
CREATE PROCEDURE dbo.MoveDatesBack @NumberOfDays INT
AS BEGIN
  DECLARE TableCursor CURSOR FAST_FORWARD 
  FOR
     SELECT t.Name, c.name
     FROM sys.columns c 
     INNER JOIN sys.tables t ON c.object_id = t.object_id
     INNER JOIN sys.types typ ON c.system_type_id = typ.system_type_id
     WHERE typ.system_type_id IN (40, 42, 43, 61)  
     -- 40 = date, 42 = datetime2, 43 = datetimeoffset, 61 = datetime

  DECLARE @TableName sysname, @ColumnName sysname

  OPEN TableCursor

  FETCH NEXT FROM TableCursor INTO @TableName, @ColumnName

  WHILE @@FETCH_STATUS = 0
  BEGIN
      DECLARE @Stmt NVARCHAR(999)

      SET @Stmt = 'UPDATE ' + QUOTENAME(@TableName) + 
                  ' SET ' + QUOTENAME(@ColumnName) + ' = DATEADD(DAY, ' + 
                  CAST(@NumberOfDays AS VARCHAR(10)) + ', ' + 
                  QUOTENAME(@ColumnName) + ')'

      -- PRINT @Stmt
      EXEC (@Stmt)

      FETCH NEXT FROM TableCursor INTO @TableName, @ColumnName
  END

  CLOSE TableCursor
  DEALLOCATE TableCursor
END 
```

> **使用风险自负！**这将对整个数据库进行大规模更新！确保手头有**足够**的备份以防万一出现问题！
> 
> 这非常简单，因为它假定所有表都在默认模式中 - 我不检查并在此示例中包含模式信息。可以添加 - 只是让事情更复杂/更复杂。

# c - 如何启动一个进程并等待其子进程完成

> ID：13399313
> 
> 赞同：0
> 
> 时间：2012-11-15T14:15:53.220
> 
> 标签：c, windows

有没有办法启动一个进程，并等待其子进程完成？我的问题如下。我有一个 setup.exe。如果我启动它，它会运行 4-5 秒并启动 1 或 2 个新进程，然后 setup.exe 会关闭。

如果我使用 createprocess 和 WaitForSingleObject 启动 setup.exe，那么它只会等到 setup.exed 关闭。

有没有办法等到由 setup.exe 启动的新进程也完成？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:21:13.480

你可以在启动时创建一个 Mutex 并将其锁定。然后，使用 WaitForSingleObject api 让基础进程等待它。Mutex 在其所有者进程终止时自动销毁。

或者，您可以在子进程中创建一个 tmp 文件，当进程完成时终止该文件，您的 setup.exe 可以检查 frim 是否存在以了解进程是否仍在运行。

# xml - 在 XSLT 中排序，仅当 string-length != 0 时

> ID：13399314
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:15:54.430
> 
> 标签：xml, xslt, sorting

我使用以下 XSLT 块从 XML 文件中的“最新”项目中获取描述。它按日期排序（在我的 XML 中显示为`<date>2011-11-15</date>`），然后从排序列表中选择顶部的日期。虽然我刚刚发现有些项目没有日期，但它们只是显示为`<date/>`. 问题是我的 XSLT 将这些排序在排序列表的顶部，因此首先选择没有日期的项目。

那么，如何按日期对长度大于零的项目进行排序？

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <xsl:apply-templates select="/products/product">
      <xsl:sort select="normalize-space(substring(date,0,4))" order="ascending" />
      <xsl:sort select="normalize-space(substring(date,4,2))" order="ascending" />
      <xsl:sort select="normalize-space(substring(date,7,2))" order="ascending" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="product">
    <xsl:if test="position()=1">
      <xsl:value-of select="description"/>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:38:18.260

只是避免在排序中包括没有日期的那些：

```
<xsl:apply-templates select="/products/product[date]"> 
```

顺便说一句（a）您似乎选择了列表中最早的项目，而不是最新的，并且（b）确实没有必要将日期分成三个部分进行格式化：如果所有日期的格式均为 YYYY-MM- DD 那么直接的字母排序应该可以完成这项工作，除非系统决定使用奇怪的整理顺序，在这种情况下`<xsl:sort select="number(translate(date, '-', ''))" data-type="number"/>`可能更安全。

# git - 无法在 Git Bash 中输入密码

> ID：13399315
> 
> 赞同：19
> 
> 时间：2012-11-15T14:16:03.300
> 
> 标签：git, bitbucket, git-bash

我有一个奇怪的问题，我在网上找不到任何相关信息。

我正在学习使用 BitBucket，并且正在关注他们的演练。[正如他们在此处](https://confluence.atlassian.com/display/BITBUCKET/Clone+Your+Git+Repo+and+Add+Source+Files)所说的，我正在使用 Git Bash 作为命令提示符。

每当我需要输入密码时，例如在克隆存储库时，它都会拒绝输入任何内容！我在键盘上键入，但屏幕上没有显示任何内容。它接受的唯一键是 Enter，然后它说授权失败，因为没有密码。我不能打字。

奇怪的是我可以输入所有其他命令，只是不能输入这个。有任何想法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-15T14:18:12.567

`*`您正在输入密码，它只是在输入字符（即没有符号）时不会给您明显的反应。因此，只需正确输入您的密码，按回车，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-13T17:00:14.427

有几件事可能是您的问题，但首先要了解终端确实允许您输入密码，只是出于安全原因不允许您看到它。可以解决的另一件事是，如果您在密码中使用任何数字，请尝试使用键盘顶部的键而不是小键盘。但请记住，您将无法看到正在发生的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-18T22:29:53.550

我经常使用 bitbucket。我注意到有时当我克隆一个非常大的存储库时，我输入我的密码（不显示），然后我按下回车键，然后我必须等待很长一段时间才能克隆任何东西。缓慢的克隆确实看起来像挂起。试着输入你的密码，按回车，喝杯咖啡然后回来。为我工作。

# c - 如何在 Linux 上获取 cpuid()？

> ID：13399316
> 
> 赞同：1
> 
> 时间：2012-11-15T14:16:02.837
> 
> 标签：c, linux

如何以编程方式获取给定线程正在运行的核心？类似于 Unix 的`getcpuid`. 这适用于 Linux 和 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:22:07.840

sched_getcpu [()](http://www.kernel.org/doc/man-pages/online/pages/man3/sched_getcpu.3.html)不会为内核提供不同的值吗？

# sql - 存储过程中sql命令的不同行为

> ID：13399319
> 
> 赞同：0
> 
> 时间：2012-11-15T14:16:10.933
> 
> 标签：sql, stored-procedures, firebird2.5

源表 TEST（摘录）。括号中的值确定日期类型：

```
ID (integer)  |   SAMPLES (double precision)   | NSAMPLES (double precision)
------------------------------------------------------------------------------
575            10.000000                        10.000000 
```

有问题的 SQL 命令是这样的：

```
insert into TEST
select * from TEST where ID=575; 
```

如果我从开源工具 FlameRobin 的命令行执行此命令

![在此处输入图像描述](../Images/3f539668c155d1e331934685a3d9f1e1.png)

更新后的表格如下所示

```
ID (integer)  |   SAMPLES (double precision)   |  NSAMPLES (double precision)
------------------------------------------------------------------------------
575            10.000000                          10.000000
810            10.000000                          10.000000 
```

如果我从存储过程（从 FlameRobin 或我自己使用 BDE（Borland 数据库引擎）组件的应用程序）运行相同的命令，结果是这样的

```
ID (integer)  |   SAMPLES (double precision)   | NSAMPLES (double precision)
------------------------------------------------------------------------------
575            10.000000                         10.000000
810            10.000000                         10.000000
811            10.000000                         NULL 
```

有趣的是，SAMPLES 和 NSAMPLES 两列都具有相同的日期类型、相同的源值 (= 10.000000) 并且都可以为空。为什么从存储过程调用的复制命令不复制 NSAMPLES 列的值？取而代之的是，它将 NULL 值插入到新记录中。

**添加 16.11.2012**

也许可以在数据库管理工具 FlameRobin 的以下屏幕截图中找到一些提示。它们包含存储过程 INSERT_TEST 和表 TEST 的完整定义。

![在此处输入图像描述](../Images/0fbe9c0f761602c515c306b942f23c71.png)

![在此处输入图像描述](../Images/31644dffc3dbdb4bf6bff4472dfe39c1.png)

为什么字段列表中缺少 NSAMPLES 列？？？

![在此处输入图像描述](../Images/5adc52d951742df36c7f6101391b915d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:21:30.287

问题是两种环境对 IDENTITY 列的不同处理。

相反，请执行以下操作：

```
 Insert into TEST(SAMPLES, NSAMPLES)
 Select SAMPLES, NSAMPLES 
 from TEST where ID = 575 
```

即，如果您明确命名所有列，问题就会消失。无论如何，这通常是一个好主意。

# python - Python 在 for 循环中追加 JSON 列表

> ID：13399321
> 
> 赞同：0
> 
> 时间：2012-11-15T14:16:15.043
> 
> 标签：python, cassandra, pycassa

我有以下 Python 代码，它从 cassandra 数据库中获取数据。我想要实现的是最后有 json 编码的变量。但是，毫不奇怪，我的代码仅将最新数据行附加到变量。

如何将所有数据组合或附加到单个变量？

```
for key, columns in crime.get_range():
    data = json.dumps(columns) 
```

谢谢

我正在使用 Pycassa 作为库来访问 Cassandra

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:17:41.563

首先收集列表中的所有数据，然后对该列表进行编码：

```
data = json.dumps([columns for key, columns in crime.get_range()]) 
```

# php - PHP中带有'or'运算符的'If'语句

> ID：13399323
> 
> 赞同：2
> 
> 时间：2012-11-15T14:16:17.720
> 
> 标签：php, operators

我正在尝试使用 ("||") 运算符构建 PHP`if`语句`or`，但它似乎不起作用。

```
 $country_code = "example_country_code";

   if ($country_code != 'example_country_code' || !clientIscrawler()) {
       echo 'the script can be executed';
   }
   else {
       echo 'skipping';
   } 
```

对于给定的示例，它应该被回显跳过，但它不会那样发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:30:19.853

也许双重否定会给你带来问题。让我们将其重写为：

```
!($country_code == 'example_country_code') || !clientIscrawler() 
```

这可以转化为等价条件`&&`：

```
!($country_code == 'example_country_code' && clientIscrawler()) 
```

通过反转`if`你会得到这个：

```
if ($country_code == 'example_country_code' && clientIscrawler()) {
    echo 'skipping';
} else {
    echo 'the script can be executed';
} 
```

因此，在您的代码中，只有在真实情况下才会打印跳过`clientIscrawler()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-09T14:37:45.397

如果 OR 运算符有多个条件，在这种情况下，您不希望`if`语句评估为 true，则语法为：

```
if(!($something == "something" || $something == 'somethingelse')){
    do stuff...
} 
```

这是一个例子：

```
$apples = array (
 1 => "Pink Lady",
 2 => "Granny Smith",
 3 => "Macintosh",
 4 => "Breaburn"
);

foreach($apples as $apple){

    // You don't want to echo out if the apple name is "Pink Lady" or "Macintosh"

    if(!($apple == "Pink Lady" || $apple == "Macintosh")){

        echo $apple."<br />";

    }
}

// Output is:
Granny Smith
Breaburn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:25:14.237

在您给定的代码中，这完全取决于您的函数调用

```
 !clientIscrawler() 
```

`script can be executed`只有当您的函数调用返回时，您才会获得输出`FALSE`。我认为它`TRUE`现在正在返回，这就是您没有获得所需输出的原因。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-15T14:30:28.263

也许这可以帮助你：

```
if ( ($country_code != 'example_country_code') || clientIscrawler() == false) { 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-15T14:18:19.663

试试这个方法：

```
if ( ($country_code != 'example_country_code') || !clientIscrawler()) { ... 
```

# bash - 在 Bash 中截断文件

> ID：13399325
> 
> 赞同：0
> 
> 时间：2012-11-15T14:16:25.160
> 
> 标签：bash

我正在将命令的输出写入 bash 文件。该命令逐渐产生输出，我使用 grep 检索部分特定行，并使用 tee 将其写入文件。现在，该命令正在将所有行写入文件。我希望每次 bash 命令有一些输出时都截断文件，这样文件中总是只有一行。我怎样才能达到这样的效果？

我正在使用的命令是： `2>&1 zypper -x -n in geany | grep -o --line-buffered "percent=\"[0-9]*\"" | tee /var/log/oneclick.log`

这会产生类似`percent="10"`的输出。每次，文件中应该只存在一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:19:16.397

If you need to overwrite the file for each line:

```
2>&1 zypper -x -n in geany | 
grep -o --line-buffered "percent=\"[0-9]*\"" |
while read line; do
    echo "$line" > /var/log/oneclick.log
    echo "$line"
done 
```

# events - TinyMCE：我怎样才能检测到这个事件？

> ID：13399326
> 
> 赞同：1
> 
> 时间：2012-11-15T14:16:26.700
> 
> 标签：events, tinymce

我正在开发一个将图片库与 TinyMCE 结合在一起的插件。大致它的工作方式就像每当我按下图像（位于编辑器下方的 div 中）时，单击图像的 id 将被 ajax 拾取并发送到将此代码注入 TinyMCE 的函数：

```
<img src="<?php echo $imgsrc[0]; ?>" width="<?php echo $imgsrc[1]; ?>"> 
```

这一切都像它应该的那样工作，但是我希望能够在编辑器中跟踪这种情况。我像这样使用 onEvent ：

```
ed.onEvent.add(function(ed, e) {
         console.debug('Editor event occured: ' + e.target.nodeName);
}); 
```

它根本不会接收任何事件，有没有办法让 TinyMCE 知道刚刚发生的事情？

[演示](http://fiddle.tinymce.com/mvcaab)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:07:30.640

您没有得到任何输出，因为您`setContent`在选择上使用 - 而不是在编辑器实例上使用。这是一个很大的区别，因为没有听众在听这个触发。

# c++ - 如何使用 C++11 实现指向整数的指针的原子增量 ?

> ID：13399329
> 
> 赞同：12
> 
> 时间：2012-11-15T14:16:36.443
> 
> 标签：c++, c++11, atomic

在将一些 Windows C++ 代码移植到 iOS 时，我需要提供 Win32`long InterlockedIncrement(long *p)`调用的实现。这很容易使用定义的函数`<libkern/OSAtomic.h>`。

但是，我想知道是否可以仅使用 C++11 工具以与操作系统无关的方式编写它，主要是`<atomic>`. 我想出了这个，我不确定它是否能实现我想要的：

```
inline long InterlockedIncrement(long* p)
{
    std::atomic<long&> atomicP(*p);
    return ++atomicP;
} 
```

这行得通吗？这够好吗？这两行不是原子的，但增量应该是原子的，这是这里的关键。

`<atomic>`我发现的所有使用示例都是不同的，其中 a`std::atomic<T>`是直接定义和使用的。在这里，我想使用调用者通过地址传递给我的现有长变量。我找不到这样的例子。

编辑：Clang 3.2（在 Xcode 4.x 中）无法编译`++atomicP`并出现错误“无法增加类型的值`std::atomic<long&>`”（也不`atomicP += 1`是）。

正确的方法是什么？

再次编辑：指针实现编译...

```
inline long InterlockedIncrement(long* p)
{
    std::atomic<long*> atomicP(p);
    return ++(*atomicP);
} 
```

但是恐怕这不起作用，因为我不增加原子类型，而是增加指针指向的值，这不是原子的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T17:11:49.140

您的示例实现每次都从指针构造一个新的原子。这不是 std::atomic 的预期用途，我不相信它会按您的意愿工作。

据我所知，做你想做的事情的唯一方法（以独立于平台的方式消除对 InterlockedIncrement 的依赖）是用 std::atomic 版本替换你当前调用 Win32“互锁”调用的变量的所有声明其中。然后，您可以删除互锁调用并使用常规值语义以原子方式修改变量。无论如何，这更具可读性（并且将来更易于维护）。

我了解您希望保留现有的（经过良好测试的）代码，但我认为您不能这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T07:06:32.290

**`__atomic_add_fetch`GCC 扩展**

在 GCC 4.8 中，C++ 标准库`std::atomic::operator++`使用 GCC built-in实现`__atomic_add_fetch`，因此您可以编写：

```
inline long InterlockedIncrement(long* p)
{
    return __atomic_add_fetch(p, 1, __ATOMIC_SEQ_CST);
} 
```

我不确定clang，但似乎有一些选项，如`__c11_atomic_fetch_add` [http://clang.llvm.org/docs/LanguageExtensions.html](http://clang.llvm.org/docs/LanguageExtensions.html)

正如其他人所提到的，参数`p`本身必须`std::atomic`让您仅使用标准库方法：将指针转换为原子没有帮助，因为原子指针仅作用于指针，而不作用于它指向的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T14:44:49.090

我相信你可以使用`atomic_fetch_add`手术。看看[这里](http://en.cppreference.com/w/cpp/atomic/atomic_fetch_add)的例子。

# c# - 带有嵌套元素的中继器控制 TR TD

> ID：13399330
> 
> 赞同：1
> 
> 时间：2012-11-15T14:16:39.990
> 
> 标签：c#, asp.net, repeater, nested-loops

我想以如下格式显示我的数据：

```
<table>
  <tr>
     <td></td>
     <td></td>
     <td></td>
     ...
  </tr>
  <tr>
     <td></td>
     <td></td>
     <td></td>
     ...
  </tr>
   .
   .
   .
</table> 
```

我对如何表示数据有点困惑。我正在考虑为此结构使用中继器控件。但是它需要嵌套的中继器控件还是可以使用单个中继器控件来完成？有人可以建议我正确的方法吗？

提前致谢。

更新 :: 在我的情况下，它们不是静态顺序，它们是完全动态的。在某些情况下可能有单，但在某些情况下，我的数量是 10-20。我需要在这些结构中显示测试分数。对于例子：

```
<table>
  <tr>
    <td>10</td>
    <td>5</td>
    <td>30</td>
  </tr>
  <tr>
    <td>40</td>
    <td>34</td>
  </tr>
   .
   .
   .
<table> 
```

同样明智。简而言之，当一个用户的得分记录完成时，我需要在新的新鲜中添加新记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:21:48.643

为什么要使用中继器？它是相当过时的组件。请改用 ListView。它在配置和操作方面更加灵活。

请使用 Merrimack 建议的[解决](https://stackoverflow.com/users/293615/merrimack)[方案](https://stackoverflow.com/questions/3442897/how-to-create-a-three-column-table-in-asp-net-repeater)

```
<asp:ListView ID="myListView" runat="server" 
   DataSourceID="YOURDATASOURCE" GroupItemCount="3">

   <LayoutTemplate>
      <table>
         <tr>
            <td>
               <table border="0" cellpadding="5">
                  <asp:PlaceHolder runat="server" ID="groupPlaceHolder"></asp:PlaceHolder>
               </table>
            </td>
         </tr>
      </table>
   </LayoutTemplate>

   <GroupTemplate>
      <tr>
         <asp:PlaceHolder runat="server" ID="itemPlaceHolder"></asp:PlaceHolder>
      </tr>
   </GroupTemplate>

   <ItemTemplate>
      <td>
         <%# Eval("FullName") %>
      </td>
   </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:28:49.487

旧经典方式的一种解决方案是嵌套循环

```
<table>
<% for(int loop1 = 0; loop1 <= condition1 ; loop1++){
       System.Console.WriteLine("<tr>");
       for(int loop2 = 0; loop2 <= condition2 ; loop2++){
           System.Console.WriteLine("<td>");
           System.Console.WriteLine("Your Data");
           System.Console.WriteLine("</td>");
       }
       System.Console.WriteLine("</tr>");
   } %>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:36:26.607

你可以像这样制作一个中继器

```
<asp:Repeater ID="rptMyRepeater" runat="server" >
     <HeaderTemplate>
          <table>
            <th>
               <td>
                  Header 1
               </td>
               <td>
                  Header 2
               </td>
             </th>
      </HeaderTemplate>
      <ItemTemplate>
          <tr>
             <td>
                 <asp:HiddenField runat="server" ID="hfHolderId" Value='<%# DataBinder.Eval(Container.DataItem, "HolderId") %>' />
                 <asp:TextBox runat="server" ID="tbText1" Text='<%# DataBinder.Eval(Container.DataItem, "Text1") %>' />
             </td>
             <td>
                 <asp:TextBox runat="server" ID="tbText2" Text='<%# DataBinder.Eval(Container.DataItem, "Text2") %>' />
             </td>
           </tr>
       </ItemTemplate>
       <FooterTemplate>
           </table>
       </FooterTemplate>
</asp:Repeater> 
```

然后有一个类来保存你的数据

```
 public class MyHolder()
    {
         public string HolderId {get;set;}
         public string Text1 {get;set;}
         public string Text2 {get;set;}
    } 
```

然后列出这些并将它们绑定到您的中继器

```
 List<MyHolder> myHolderList = new List<MyHolder>();
    myHolderList.Add(new MyHolder {1, "hi", "hello"});
    //Add a few of these

    rptrptMyRepeater.DataSource = myHolderList;
    rptMyRepeater.DataBind(); 
```

所有这一切都只是我的头脑，所以我在那里有语法错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:23:59.453

我终于用 asp.net 中的动态表完成了这项工作。就像 RDSAGAR 所做的那样，但是通过代码背后的代码。感谢您的所有支持。

# jquery - jquery 合并预定义选项

> ID：13399333
> 
> 赞同：1
> 
> 时间：2012-11-15T14:16:42.760
> 
> 标签：jquery, merge, options

我正在使用jqgrid，那里的选项太多了。我想要做的是设置一个预定义的选项，然后再使用它。

```
//my predefined options 
var edit_options = {
editrules:
{
    required:true 
    ,edithidden:true
    ,editable:true
} 
```

然后在执行时

```
jGrid.jqGrid({
...
colNames:['id','Code', 'Name'],
    colModel:[
    //id
    {name:'sample_id'
        ,index:'sample_id'
    },
    //Code
    {name:'sample_code'
        ,index:'sample_code'
        ,edit_options
    },
    //Name
    {name:'sample_name'
        ,index:'sample_name'
        ,edit_options
    } 
```

当然，这里的“edit_options”会出错。如何正确地做到这一点？我只希望第二个和第三个选项使用预定义的选项。我正在查看 $.extend()，但无法正确理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:21:30.393

您可以使用 jQuery 的[`extend`](http://api.jquery.com/jQuery.extend/)- 方法：

```
jGrid.jqGrid({
...
colNames:['id','Code', 'Name'],
    colModel:[
       $.extend(true,
          {
             name:'sample_code',
             index:'sample_code'
          }, 
          editOptions
       ),
       $.extend(true, setupCode, editOptions),
       $.extend(true, setupCode, editOptions)
    ]
}); 
```

此方法采用任意数量的对象，并将每个对象的属性依次复制到第一个对象中。请注意，如果同一个键多次存在，则当前值将被新的值覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:20:36.620

有一些语法错误。首先， a`}`的末尾缺少`edit_options`。

```
{name:'sample_id'
    ,index:'sample_id'
    ,edit_options
}, 
```

这个代码是错误的，你必须给第三个成员一个名字。你必须这样做：

```
{name:'sample_id'
    ,index:'sample_id'
    , options : edit_options // Replace 'options' by the good name
}, 
```

# c - ANSI C - 初始化数组

> ID：13399337
> 
> 赞同：0
> 
> 时间：2012-11-15T14:16:58.147
> 
> 标签：c, arrays

我一直在做的是：

```
int arr[] = {2, 3, 4}; 
```

它总是有效的。

我听说过使用指针初始化新数组的更好方法：

```
int *arr = {2, 3, 4}; 
```

但是，它在任何 IDE 中都不起作用，它会引发一些错误，例如`int differs in levels of indirection from int`, 或`too many initializers`. 我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:18:43.447

```
int arr[] = {2, 3, 4}; 
```

很好，而且完全正确。无需更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T14:21:28.200

在 gcc 上，该初始化似乎对我有用，但不正确。

```
int *arr = {2, 3, 4}; //weird behaviour, stores first value `2` as read-only

int arr[] = {2, 3, 4}; //array decl 
```

前者不是初始化数组的正确方法。

对于**char***，它更有意义

```
char* arr = "abcde"; //Pointer to a read-only char array in memory

char[] arr = "abcde"; //Normal char array 
```

* * *

**区别：**

前者被写入程序集的**Rodata**（常量、只读数据）部分，而后者位于读/写**Data-Segment**中。任何更改前者的尝试都可能导致**分段错误**。

* * *

存储值的位置不同。

```
char* arr = "abcde";
arr[1] = 'f'; //(undefined behavior)

char[] arr2 = "abcde";
arr2[1] = 'f'; //no issue 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:41:51.860

如果要“初始化数组”，则必须初始化*数组*，而不是指针。

无论如何，在 C99中可以使用*复合文字*，并且可以将指针初始化为

```
int *arr = (int []) {2, 3, 4}; 
```

这与您尝试做的很接近。尽管术语“ANSI C”通常用于指代 C89/90，但该功能不可用。

这种方法没有什么“更好”的了。它只是给你一个指针而不是一个数组，所以这真的是你需要什么的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:19:51.317

为什么第二个版本比第一个更好？

至少第一个版本是明确的：您定义一个具有给定元素的 int 数组。让编译器确定如何以最佳方式执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T17:33:21.113

从您对 Evan Li 的评论开始（“字符串也是一种数组，它是用指针​​初始化的。因此，数组也应该以这种方式初始化。”）。如果教练真的告诉你这个，我会认真考虑找一个新的教练，因为他对事情感到困惑。

字符串*文字*是一个数组表达式；文字 "Hello" 是`char`(`const char`在 C++ 中) 的 6 元素数组。字符串字面量的存储方式是在程序的整个生命周期内分配它们的内存；此内存可能是只读的，也可能不是只读的，具体取决于平台。尝试修改字符串文字内容的行为是*undefined*，这意味着您可能会遇到段错误，或者字符串可能会被修改，或者发生其他事情。

当数组表达式出现在上下文中而不是作为`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字时，则表达式的类型从“N”转换（“衰减”） -element 数组`T`“指向”的指针`T`，表达式的值是数组第一个元素的地址。

*这就是*为什么你可以写类似的东西

```
char *foo = "This is a test"; 
```

字符串字面`"This is a test"`量是“15 元素数组`char`”类型的数组表达式；因为它不是`sizeof`or`&`运算符的操作数，也不是用于初始化 的另一个数组`char`，所以表达式的类型变为“指向`char`”，并且第一个字符的地址被分配给`foo`。通过对比，

```
char foo[] = "This is a test"; 
```

声明`foo`为;的*数组* `char`大小是根据初始化字符串的大小（15 个字符）计算得出的，并且字符串文字的*内容*被复制到`foo`.

字符串是数组表达式；用大括号括起来的值列表*不是*.

```
int *foo = {1, 2, 3}; 
```

不会创建 3 元素数组`int`并将第一个元素的地址分配给`foo`; 相反，如果我没看错的话，这应该是违反[约束](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)*的*：

> **6.7.9 初始化**
> 
> **约束**
> 
> 2 初始化器不得尝试为未包含在被初始化实体中的对象提供值。

从 C99 开始，您可以使用所谓的*复合文字*，如下所示：

```
int *foo = (int []) {1, 2, 3}; 
```

强制转换表达式`(int [])`是必需的。这确实创建了一个新的 3 元素数组，`int`并将第一个元素的地址分配给`foo`. 与字符串文字不同，像这样的复合文字只存在于封闭块¹的持续时间内；IOW，如果你做了类似的事情

```
int *foo = NULL;
if (condition())
{
  foo = (int []){1, 2, 3};
  // do stuff
}
// do more stuff 
```

指向的匿名数组对象`foo`只存在于`if`块内；一旦`if`块退出，数组就不再存在，并且 的值`foo`不再有效。

* * *

^(1\. 如果复合文字是在文件范围内定义的（在任何函数之外），那么它具有`static`持续时间并且在程序的生命周期内都存在。)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-15T14:33:09.160

int arr[] = {2, 3, 4}; 没关系。

如果要使用指针，则必须使用例如 malloc 分配内存。类似的东西：

```
 int *arr = malloc(sizeof(int)*4);

  arr[0]=1;
  arr[1]=2;
  arr[2]=3;
  arr[3]=4;

  //display
  printf("%d %d %d %d\n",arr[0],arr[1],arr[2],arr[3]);

  free(arr); 
```

# objective-c - 在视图加载之前设置一个新的 window.rootViewController

> ID：13399343
> 
> 赞同：1
> 
> 时间：2012-11-15T14:17:08.827
> 
> 标签：objective-c, ios5, uiviewcontroller, uinavigationcontroller, ios6

所以我试图在我的应用程序中安装这个导航框架：

[https://github.com/weissi/FRLayeredNavigationController](https://github.com/weissi/FRLayeredNavigationController)

[http://www.youtube.com/watch?v=k9bFAYtoenw&feature=plcp](http://www.youtube.com/watch?v=k9bFAYtoenw&feature=plcp)

现在，如果您查看附加的图像，我有我的登录屏幕。登录完成后，我将 Segue Modal 推送到我的“主页”页面，在那里，我想在到达主页后开始使用 FRLayeredNavigationController。使用情节提要时可能吗？根据 Youtube 视频，通常会通过以下方式使用 FRLayeredNavigationController：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        // Override point for customization after application launch.

        HomeViewController* homeController = [[HomeViewController alloc] init];
        FRLayeredNavigationController* lnc = [[FRLayeredNavigationController alloc] initWithRootViewController:homeController];

        self.window.rootViewController = lnc;
    }

   [self.layeredNavigationController pushViewController:vc inFrontof:self maximumWidth:NO animated:YES]; 
```

![在此处输入图像描述](../Images/f72ffd55d50ce5ba240ec1fc476ebae8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T12:44:54.197

我还没有找到使用 Segue 的方法来做到这一点......但我实现这一点的方式如下：

如果登录成功并且您希望进入应用程序的下一部分，那么您将如何转换：

```
- (void)loginSucceeded
{
    UIViewController * vc = (UIViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"someIdentifier"];
    FRLayeredNavigationController * nav = [[FRLayeredNavigationController alloc] initWithRootViewController:vc configuration:^(FRLayeredNavigationItem *item) {
        item.width = 300;
        item.nextItemDistance = 90;
    }];
    [self presentViewController:nav animated:YES completion:nil];
} 
```

您需要将 Storyboard ID 设置为上述方法中指定的 ID。这可以在查看情节提要并选择您设计的 ViewController 时在“身份检查器”选项卡中找到。

此外，您将不再需要执行之前创建的 segue，因此请删除它。

任何你想“推”到屏幕上的未来视图控制器，你只需要调用以下命令：

```
UIViewController * vc = (UIViewController*)[self.storyboard instantiateViewControllerWithIdentifier:@"SomeStoryboardIDHere"];
[self.layeredNavigationController pushViewController:vc inFrontOf:self maximumWidth:YES animated:NO]; 
```

# java - ANTLR 中的递归处理规则

> ID：13399344
> 
> 赞同：1
> 
> 时间：2012-11-15T14:17:15.417
> 
> 标签：java, antlr

好的，对于我两天内的第三个 ANTLR 问题：

我的语法旨在解析布尔语句，如下所示：

```
AGE > 21 AND AGE < 35 
```

由于这是一个相对简单的语法，我嵌入了代码而不是使用 AST。规则如下所示：

```
: a=singleEvaluation { $evalResult = $a.evalResult;} 
(('AND') b=singleEvaluation {$evalResult = $evalResult && $b.evalResult;})+
{
// code
}
; 
```

现在我需要使用括号实现操作顺序，以解析如下内容：

```
AGE >= 21 AND (DEPARTMENT=1000 OR DEPARTMENT=1001) 
```

甚至更糟：

```
AGE >= 21 AND (DEPARTMENT=1000 OR (EMPID=1000 OR EMPID=1001)) 
```

任何人都可以提出一种实现所需递归的方法吗？我宁愿在这个后期阶段不切换到 AST，而且我在这方面仍然是一个相对的菜鸟。

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:58:42.680

我会这样做：

```
program : a=logicalExpression {System.out.println($a.evalResult);}
        ;

logicalExpression returns [boolean evalResult]  :   a=andExpression { $evalResult = $a.evalResult;} (('OR') b=andExpression {$evalResult = $evalResult || $b.evalResult;})*
                                                ;

andExpression returns [boolean evalResult]      :   a=atomicExpression { $evalResult = $a.evalResult;} (('AND') b=atomicExpression {$evalResult = $evalResult && $b.evalResult;})*
                                                ;

atomicExpression returns [boolean evalResult]   :   a=singleEvaluation {$evalResult = $a.evalResult;}
                                                |   '(' b=logicalExpression ')' {$evalResult = $b.evalResult;}
                                                ;

singleEvaluation returns [boolean evalResult ]  :   'TRUE'  {$evalResult = true;}
                                                |   'FALSE' {$evalResult = false;}
                                                ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:09:08.130

由于您的某些规则评估为布尔值，而其他规则评估为整数（或仅比较整数），您最好让您的规则返回一个通用对象，并相应地进行转换。

这是一个快速演示（包括在括号表达式的情况下进行递归调用）：

```
grammar T;

@parser::members {
  private java.util.Map<String, Integer> memory = new java.util.HashMap<String, Integer>();
}

parse
@init{
  // initialize some test values
  memory.put("AGE", 42);
  memory.put("DEPARTMENT", 999);
  memory.put("EMPID", 1001);
}
 : expression EOF {System.out.println($text + " -> " + $expression.value);}
 ;

expression returns [Object value]
 : logical {$value = $logical.value;}
 ;

logical returns [Object value]
 : e1=equality {$value = $e1.value;} ( 'AND' e2=equality {$value = (Boolean)$value && (Boolean)$e2.value;}
                                     | 'OR' e2=equality  {$value = (Boolean)$value || (Boolean)$e2.value;}
                                     )*
 ;

equality  returns [Object value]
 : r1=relational {$value = $r1.value;} ( '=' r2=relational  {$value = $value.equals($r2.value);}
                                       | '!=' r2=relational {$value = !$value.equals($r2.value);}
                                       )*
 ;

relational returns [Object value]
 : a1=atom {$value = $a1.value;} ( '>=' a2=atom {$value = (Integer)$a1.value >= (Integer)$a2.value;}
                                 | '>'  a2=atom {$value = (Integer)$a1.value >  (Integer)$a2.value;}
                                 | '<=' a2=atom {$value = (Integer)$a1.value <= (Integer)$a2.value;}
                                 | '<'  a2=atom {$value = (Integer)$a1.value <  (Integer)$a2.value;}
                                 )?
 ;

atom returns [Object value]
 : INTEGER            {$value = Integer.valueOf($INTEGER.text);}
 | ID                 {$value = memory.get($ID.text);}
 | '(' expression ')' {$value = $expression.value;}
 ;

INTEGER : '0'..'9'+;
ID      : ('a'..'z' | 'A'..'Z')+;
SPACE   : ' ' {$channel=HIDDEN;}; 
```

解析输入`"AGE >= 21 AND (DEPARTMENT=1000 OR (EMPID=1000 OR EMPID=1001))"`将产生以下输出：

```
AGE >= 21 AND (DEPARTMENT=1000 OR (EMPID=1000 OR EMPID=1001)) -> true 
```

# linux - 从 gzip 文件的开头剥离 bash 脚本

> ID：13399348
> 
> 赞同：1
> 
> 时间：2012-11-15T14:17:33.233
> 
> 标签：linux, bash, sed, gzip

我有一系列由 bash 脚本组成的文件，最后连接了一个 gzip 文件。

我想要一种剥离前导 bash 的方法，留下一个纯 gzip 文件。

我想出的方法是：

1.  对文件进行十六进制转储；
2.  用于`sed`删除 gzip 幻数之前的所有内容`1f 8b`；
3.  将剩余的十六进制转储转换回二进制。

IE

```
xxd -c1 -p input | tr "\n" " " | sed 's/^.*?1f 8b/1f 8b' | xxd -r -p > output 
```

乍一看，这似乎工作正常。但是，如果文件的 gzip 部分碰巧包含`1f 8b`除了初始标头之外的字节序列，它就会崩溃。在这些情况下，它会删除*最后一次*出现之前的所有内容。

我最初的尝试是否在正确的轨道上，我能做些什么来解决它？或者有没有更好的方法来做到这一点，我错过了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:41:53.190

Perl 解决方案。它将记录分隔符设置为魔术序列并打印除第一个记录之外的所有记录。魔术序列必须放在开头，否则会与作为第一条记录的 bash 脚本一起丢失。

```
perl -ne 'BEGIN { $/ = "\x1f\x8b"; print $/; } print if $. != 1' input > output.gz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:56:31.810

我将使用 sed 行范围功能来完成此操作。`-n`禁止正常打印，并且范围`/\x1f\x8b/,$`将匹配之后的每一行（包括第一行），其中包含 \x1f\x8b 并将`p`它们打印出来。

```
sed -n '/\x1f\x8b/,$ p' 
```

或者，根据您的喜好，您可以添加一个文本标记“### BEGIN GZIP DATA ###”并删除之前和包括它的所有内容：

```
sed '1,/### BEGIN GZIP DATA ###/ d' 
```

# javascript - 如何检查facebook粉丝专页是否被喜欢

> ID：13399352
> 
> 赞同：0
> 
> 时间：2012-11-15T14:17:36.203
> 
> 标签：javascript, facebook, api

您如何检查访问者是否喜欢了 Facebook 粉丝专页。所以我在代码中填写了我的app_id、page_id

这是我现在得到的代码

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({
    appId  : 'APP_ID',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    channelUrl : 'http://domain.com/tab/', // channel.html file
    oauth  : false // enable OAuth 2.0
  });

 (function($) {

  var session = FB.getSession();
      FB.api({
           method: 'fql.query',
           query: 'SELECT uid, page_id FROM page_fan WHERE uid=me() AND page_id=PAGE_ID'
      },
   function(response) {
      if(response instanceof Array && response.length > 0)
          alert("YOU LIKE US!");
      else
          alert("YOU DON'T LIKE US YET!");
   });
 })(jQuery);
</script> 
```

之后我收到此错误：

```
TypeError: FB.getSession is not a function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T19:44:26.960

如果当前用户已经喜欢你的页面，你可以这样处理：

```
FB.api("me/likes/PAGE_ID", function(response) {
   if ( response.data.length == 1 ) { //there should be a single value inside `data` which is your page details

      alert('you like us :-)')
     } else {
        alert('please like our page')
 }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:25:42.627

FB.getSession 方法已被弃用。改为使用`FB.getAuthResponse`。

# sql - 将两列合并为一列并添加文本

> ID：13399355
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:17:46.343
> 
> 标签：sql, tsql, sql-server-2012

我的目标是（对于所有要计算的列）

```
The Number of Invoices Per Date
1 There were a total of 1 invoice(s) on Apr 02, 2012
2 There were a total of 5 invoice(s) on Apr 01, 2012 
```

InvoiceDate 表需要格式化，但我似乎根本无法投射它，当天有多个发票日期必须以某种方式计算：S

```
SELECT convert(varchar, getdate(), 107) AS InvoiceDate FROM Invoices 
```

以上是我所知道的，但它一遍又一遍地重复相同的日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:25:22.257

听起来你想要这个：

```
select 
  'There were a total of '
  + cast(count(*) as varchar(10)) 
  + ' invoice(s) on '
  + convert(varchar(12), yourDateCol, 107)
from invoices
group by convert(varchar(12), yourDateCol, 107) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:22:56.060

您只需将日期分组：

```
SELECT COUNT(*) AS Quantity, convert(varchar,YourDateFieldName, 107)
FROM Invoices
GROUP BY convert(varchar,YourDateFieldName, 107)
ORDER BT YourDateFieldName 
```

请注意，在您的示例中，GETDATE()（又名 CURRENT_TIMESTAMP）将始终返回当前时间戳。

# dart - dart:io 和 dart:html 互斥

> ID：13399358
> 
> 赞同：4
> 
> 时间：2012-11-15T14:17:51.540
> 
> 标签：dart, dart-html, dart-io

我遇到了与[这个章节](https://stackoverflow.com/questions/10164542/how-do-i-import-darthtml-dartio-in-the-same-class)类似的情况，我希望在同一个应用程序中拥有 dart:io 和 dart:html。我知道 dart:io 是一个服务器端库，而 dart:html 是一个客户端。我的情况如下。我有一个程序可以将大量文本输出到日志文件。我发现 Dart 擅长文本操作。我想获取日志文件文本，对其进行操作，将一些信息放在标题文本区域中以提高可读性等，然后查看页面。

我无意把这个放到网上。它只是用于我的工作计算机。我只想要 dart:io 的文件加载功能和 dart:html 的漂亮显示。上一篇文章是在 4 月，Dart 的开发速度很快。现在有另一种方式来做我想做的事吗？

我知道我可以编写一个程序来构建一个 HTML 文件，其中包含适当字段中的操作文本，然后打开该 HTML 文件，但我不太喜欢这个想法。还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:43:57.780

您可以考虑在服务器端应用程序上使用这个库[html5lib](http://pub.dartlang.org/packages/html5lib)来生成 HTML 输出。然后只需在浏览器中打开文件即可。这也可以通过调用启动进程来自动执行，该进程启动浏览器并指向您生成的 html 文件。

html5lib 仍在进行中，但我相信他们希望听到您的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:32:31.527

我同意，如果您只想创建一个静态网页，那么使用 html5lib 之类的库可能是最好的。但是，如果您喜欢做更多的事情，我认为要走的路是将服务器端 dart 视为模型，将客户端视为“其余部分”。剩下的主要取决于你是否喜欢 MVC、MVP、......

我已经接近在 dart 中开发一个桌面应用程序，但我仍然没有找到一个足够有趣的例子来让我继续前进。不过我一直在想我会怎么做，我相信通过将两侧（模型和“其余部分”）连接到一个网络套接字，一个简单的序列化协议（例如 json），你可以轻松地创建一个带有客户端包装器的 rpc`noSuchMethod()`用作代理，而在服务器端则使用镜像。如果您喜欢使用 Web 套接字，可以通过其他方式创建回调。[我相信 Gilad在 HTML5 Dev Conf 的演讲](http://news.dartlang.org/2012/11/gilad-brachas-dart-talk-from.html)中提到了隔离之间的类似 rpc 技术。

无论如何，你会得到的是在`dart:io`同`dart:html`一个“应用程序”中，但应用程序将由服务器端和客户端组成。这就是我将为我的下一个桌面应用程序尝试的，不管是什么:)

# windows - aptana 3 windows - 终端访问被拒绝

> ID：13399359
> 
> 赞同：1
> 
> 时间：2012-11-15T14:17:52.600
> 
> 标签：windows, eclipse, permissions, aptana

文我从特定项目打开 Antapa studio 3 终端，它通知我一个错误：

> 访问 C:\www\drupal\sites\all 的权限被拒绝。改为使用默认工作目录。

另外，我可以通过它到达目录，`cd C:\www\drupal\sites\all`所以它非常有线..
somone 是否处理这个问题，或者 smone 有什么想法吗？

~ 阿尔莫格巴库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:43:59.037

我也有完全一样的问题。你已经准确地描述了它。我没有找到解决方案，但这是我的解决方法。首先，我想要一个 EXTERNAL 终端窗口，因为 Aptana 终端窗口太不方便从命令行运行 git 和 rspec，所以我的解决方案总是打开到当前项目目录。另请注意，我使用的是 Mac，我的解决方案是特定于 Mac 的。

从 Command 菜单中，我选择了 Shell Script，并使用了“Edit this Bundle”选项。经过一番摸索，我发现该捆绑包已作为一个新项目打开。然后我将 open_directory_in_terminal.rb 文件编辑为：

```
require 'ruble'

command t(:open_terminal) do |cmd|
  cmd.key_binding = 'M2+M4+O'
  cmd.output = :output_to_console
  cmd.working_directory = :current_project
  cmd.invoke do |context|
    `open -a Terminal.app "#{ENV['TM_PROJECT_DIRECTORY']}"`
  end
end 
```

基本上，这一切都是使用 Mac OS 的“打开”命令在当前目录中打开 Mac 终端应用程序。我确信有更优雅（且独立于平台）的方法可以做到这一点，但这就是我正在使用的。希望能给你一些想法。

仅供参考，编辑捆绑项目的文档在这里： [https ://wiki.appcelerator.org/display/tis/Rubles](https://wiki.appcelerator.org/display/tis/Rubles)

# eiffel - 使用 Eiffel 的可用处理器数量

> ID：13399362
> 
> 赞同：4
> 
> 时间：2012-11-15T14:18:00.633
> 
> 标签：eiffel

我在玩 Eiffels SCOOP。

在我的程序中，一群工人并行运行。我想创建尽可能多的工人，因为处理器可供我使用。

埃菲尔是否有“简单”的方法来查找可用处理器的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:46:44.213

当前的标准库中没有这样的功能。但是，您可以使用以下内容：

```
frozen available_cpus: NATURAL_8
        -- Number of logical CPUs reported by OS.
    external
        "C inline use %"eif_scoop.h%""
    alias
        "[
            #ifdef EIF_WINDOWS
                SYSTEM_INFO sysinfo;
                GetSystemInfo (&sysinfo);
                return sysinfo.dwNumberOfProcessors;
            #elif EIF_MACOSX
                int nm [2];
                size_t len = 4;
                uint32_t count;

                nm [0] = CTL_HW; nm [1] = HW_AVAILCPU;
                sysctl (nm, 2, &count, &len, NULL, 0);

                if(count < 1) {
                    nm[1] = HW_NCPU;
                    sysctl(nm, 2, &count, &len, NULL, 0);
                    if (count < 1) {count = 1;}
                }
                return count;
            #else
                return sysconf (_SC_NPROCESSORS_ONLN);
            #endif
        ]"
    end 
```

# java - eclipse 中类似 netbeans 的性能提示

> ID：13399363
> 
> 赞同：0
> 
> 时间：2012-11-15T14:18:06.560
> 
> 标签：java, eclipse, code-hinting

因此，在使用 eclipse 多年后，我最近被迫使用 netbeans，而我从未将 netbeans 视为真正的替代品。但是现在我碰巧在netbeans中发现了一个我在eclipse中没有见过的可爱特性：`Java Performance Code Hints`. Netbeans 抱怨诸如“无意义的二进制操作 (0 | 4)”、“手动复制列表”或“创建新列表`Boolean`效率低下”之类的事情。

有人知道我是否也可以在日食中获得这些吗？我不认为eclipse内置了这样的功能。但我希望有一个插件。目前在工作，所以我不能使用 eclipse 市场进行搜索。谷歌没有给我太多。

# spring - Spring MVC 注解控制器

> ID：13399371
> 
> 赞同：0
> 
> 时间：2012-11-15T14:18:18.777
> 
> 标签：spring, model-view-controller, jakarta-ee, controller, annotations

我试图将我的 Spring MVC 表单控制器更改为注释控制器，但我遇到了一些问题。

当我在 glassfish 服务器上部署我的应用程序时，当我想访问 hello.htm 时出现以下错误

```
Avertissement: StandardWrapperValve[dispatcher]: PWC1406: Servlet.service() for servlet dispatcher threw exception
java.lang.NullPointerException
at hibernateTest.web.InventoryController.getClient(InventoryController.java:38)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at     com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

这是我的 web.xml ：

```
<?xml version="1.0" encoding="UTF-8"?> 

<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns="http://java.sun.com/xml/ns/javaee" 
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     id="WebApp_ID" 
     version="2.5">

<context-param> 
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/dispatcher-servlet.xml, /WEB-INF/applicationContext.xml
    </param-value>
</context-param> 

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

调度程序-servlet.xml：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
  default-autowire="byName">

<context:component-scan base-package="hibernateTest.web" />

<context:annotation-config/>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
      p:prefix="/WEB-INF/jsp/" 
      p:suffix=".jsp" />

<bean id="propertyConfigurer" 
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean> 
```

库存控制器：

```
import com.mysql.jdbc.Constants;
import hibernateTest.service.ProductManager;
import java.util.HashMap;
import java.util.Map;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class InventoryController { 

protected final Log logger = LogFactory.getLog(getClass()); 

private ProductManager productManager; 

public void setProductManager(ProductManager productManager) {
    this.productManager = productManager;
} 

@RequestMapping(value="/hello.htm",method = RequestMethod.GET)
public String getClient(ModelMap model) {

    logger.info("returning hello view"); 
    model.addAttribute("products", this.productManager.getProducts());
    return "hello"; 
}
 } 
```

简单产品经理：

```
import hibernateTest.domain.Product; 
import hibernateTest.repository.ProductDao;
 import java.util.List; 
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.stereotype.Service;

@Service()
public class SimpleProductManager implements ProductManager { 

protected final Log logger = LogFactory.getLog(getClass()); 

private ProductDao productDao; 

public void increasePrice(int percentage) {

    List<Product> products = productDao.getProductList();

    if (products != null) {

        for (Product product : products) {

            double newPrice = product.getPrice().doubleValue() * (100 + percentage)/100;
            product.setPrice(newPrice);
            productDao.saveProduct(product);

        }

    }

} 

public void createProduct(String description, Double price) {

    Product prod = new Product();

    prod.setDescription(description);
    prod.setPrice(price);

    logger.info("Class SimpleProductManager - Description set to " + description);
    logger.info("Class SimpleProductManager - Price set to " + price);

    productDao.insertProduct(prod);

}

public List<Product> getProducts() {

    return productDao.getProductList();

} 

public void setProductDao(ProductDao productDao) {

    this.productDao = productDao;

} 
} 
```

JdbcProductDao ：

```
import hibernateTest.domain.Product;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.List; 

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.jdbc.core.simple.ParameterizedRowMapper;
import org.springframework.jdbc.core.support.JdbcDaoSupport;
import org.springframework.stereotype.Repository;

@Repository
public class JdbcProductDao extends JdbcDaoSupport implements ProductDao { 

/** Logger for this class and subclasses */
protected final Log logger = LogFactory.getLog(getClass()); 

public List<Product> getProductList() {

    logger.info("Getting products!");

    List<Product> products = getJdbcTemplate().query(
            "select id, description, price from products", 
            new ProductMapper());

    return products;

} 

public void saveProduct(Product prod) {

    logger.info("Saving product: " + prod.getDescription());

    int count = getJdbcTemplate().update(
            "update products set description = ?, price = ? where id = ?",
            new Object[]{prod.getDescription(), prod.getPrice(), prod.getId()});

    logger.info("Rows affected: " + count);

}    

public void insertProduct(Product prod) {

    logger.info("Inserting product: " + prod.getDescription());

    getJdbcTemplate().update(
            "insert into products (description, price) values (?, ?)",
            new Object[]{prod.getDescription(), prod.getPrice()});

    logger.info("Inserting product " + prod.getDescription() + "ok");

}
private static class ProductMapper implements ParameterizedRowMapper<Product> { 

    public Product mapRow(ResultSet rs, int rowNum) throws SQLException {

        Product prod = new Product();

        prod.setId(rs.getInt("id"));
        prod.setDescription(rs.getString("description"));
        prod.setPrice(new Double(rs.getDouble("price")));

        return prod;

    } 

} 

} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:22:23.760

您需要通过自动装配告诉控制器 ProductManager 是什么。

@autowired 私有 ProductManager 产品经理；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:18:59.097

bean 应该在 spring 上下文配置 XML 中声明。

```
 <bean id="productDao" class="JdbcProductDao"/> 
```

并注意

```
<context:component-scan base-package="hibernateTest.web" /> 
```

确保包包含所有包含的注释配置。

# android - 水平滑动

> ID：13399376
> 
> 赞同：3
> 
> 时间：2012-11-15T14:18:34.813
> 
> 标签：android, viewpage

我需要在问题列表及其在无线电组中各自的选择之间水平滑动。我读过我有不同的选择，例如： 1- 手势检测器 2- ViewPage 3- 带有片段的 ViewPage

我尝试过 ViewPage，但在如何向后滑动和指示用户检查了哪个选项方面遇到了不同的问题。我需要使用最简单的方法来向前和向后滑动（表示已选中哪个选项）

我想尽可能多地依赖 Andriod 方法，而不是自己存储检查的选择，因为我相信它从运行时或代码大小都更优化了这些方法。如果还有其他我可以使用的课程，请指导我，或者其中哪一个真的最适合我的目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:24:20.767

我会用`ViewPager`一个`FragmentPagerAdapter`. 适配器的项目将是同一片段的不同实例。每个片段将包含一个静态问题文本和一组可能的问题答案。 `ViewPager`然后将负责用另一个这样的片段替换一个这样的片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:48:28.597

您可以轻松地使用手势检测器创建一个扩展类，该类`SimpleOnGestureListener`具有以下`onFling`方法：

```
protected class ExampleGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

        if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {// User swipe vertically
        }
        if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_MIN_VELOCITY) {// Right swipe
        } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_MIN_VELOCITY) {// Left swipe
        }
        return false;
    }

} 
```

你只需要根据需要定义变量，创建你的gestureDetector

```
gestureDetector = new GestureDetector(new ExampleGestureDetector()); 
```

并为您想要的视图重新定义触摸侦听器

```
view.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View wv, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        }); 
```

编辑：经过测试，它似乎只适用于可滚动项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:37:49.113

我强烈推荐这个库：

[杰克沃顿的 ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

非常可定制。

# jsf - 无法将rich:panel 滚动条链接到rich:tree

> ID：13399379
> 
> 赞同：2
> 
> 时间：2012-11-15T14:18:48.457
> 
> 标签：jsf, richfaces

使用：JSF 1.2 + RichFaces 3.3.3

我们无法将rich:panel 的滚动条链接到rich:tree 组件。选择或突出显示节点发生在 rich:tree 中。但是我们无法将滚动条与突出显示的节点链接，因此即使选择溢出 div，滚动条也不会相应移动，因此突出显示的节点对用户不可见。

如果我们手动向下滚动到特定节点，我们可以看到该节点被突出显示。

我们尝试了以下步骤来解决，但问题仍未解决

1.  在每次向下或向上箭头按下时调用 js，并使用 container.scrollTop=16 将主 div 的滚动条移动固定高度。

2.  传递突出显示的节点并使用 treeItem.scrollIntoView(true) 滚动到该节点的视图；和 container.scrollTop。

3.  试图找出突出显示的节点，然后将其传递给js，但发现在前端很难访问突出显示的节点。

在这个问题上挣扎了2天多。

如何解决这个问题？我们走投无路了吗？

提前感谢您的帮助。拉梅什

代码片段：

```
 <div class="treespaceheight" >
    <rich:panel styleClass="treeStyleClass">

        <rich:tree styleClass="treewidth" id="tree" 
            iconCollapsed="../../images/ImgNodePlus.gif"    
            iconExpanded="../../images/ImgNodeMinus.gif"                    
            reRender="selectedNode" switchType="client"
            ajaxSubmitSelection="true"
            value="#{commoncontroller.quotevo.quotetreeNode}"                           
            ondblclick="setNodeToggle(event);" oncontextmenu="false"   
            adviseNodeOpened="#{commoncontroller.quotevo.adviseNodeOpened}" 
            adviseNodeSelected="#{commoncontroller.quotevo.adviseNodeSelected}" >                                                                       
        </rich:tree>
    </rich:panel>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T02:53:01.373

让我们尝试通过 css 类获取选中的节点。我认为你可以使用

```
jQuery('.rich-tree-node-selected') 
```

得到那个节点！或者您可以通过编辑树属性“selectedClass”来设置自己的类。

# iphone - 将值从 UIViewController 传递到另一个

> ID：13399380
> 
> 赞同：0
> 
> 时间：2012-11-15T14:18:48.423
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uiviewcontroller

在关闭 FlipsideViewController 之前，我有这些值

```
shours
sminutes
sseconds
srecharge
change 
```

从宣言

```
int shours;
int sminutes;
int sseconds;
int srecharge;
bool change; 
```

现在我想将这些变量传递给这些其他变量中的另一个 UIViewController (MainViewController)

```
mhours
mminutes
mseconds
mrecharge
mchange 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:08:04.957

我会创建一个类来保存这些值。然后在视图控制器之间传递这个对象。

像这样的东西：

接口文件：

```
//
//  MyObject.h
//  SOObjectPassing
//
//  Created by Wilson, LJ on 11/15/12.
//  Copyright (c) 2012 Arkansas Children's Hospital. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface MyObject : NSObject {
    int shours;
    int sminutes;
    int sseconds;
    int srecharge;
    bool change;
}

@property (nonatomic, assign) int shours;
@property (nonatomic, assign) int sminutes;
@property (nonatomic, assign) int sseconds;
@property (nonatomic, assign) int srecharge;
@property (nonatomic, assign) BOOL change;

-(id) initWithHours:(int)hours
            minutes:(int)minutes
            seconds:(int)seconds
           recharge:(int)recharge
             changed:(BOOL)changed;

@end 
```

实现文件：

```
//
//  MyObject.m
//  SOObjectPassing
//
//  Created by Wilson, LJ on 11/15/12.
//  Copyright (c) 2012 Arkansas Children's Hospital. All rights reserved.
//

#import "MyObject.h"

@implementation MyObject
@synthesize shours = _shours;
@synthesize sminutes = _sminutes;
@synthesize sseconds = _sseconds;
@synthesize srecharge = _srecharge;
@synthesize change = _change;

-(id) initWithHours:(int)hours
            minutes:(int)minutes
            seconds:(int)seconds
           recharge:(int)recharge
             changed:(BOOL)changed {

    if ((self = [super init])) {
        _shours = hours;
        _sminutes = minutes;
        _sseconds = seconds;
        _srecharge = recharge;
        _change = changed;
    }

    return self;
}
@end 
```

并像这样实例化您的对象：

```
MyObject *myObject = [[MyObject alloc] initWithHours:2
                                                 minutes:3
                                                 seconds:4
                                                recharge:1
                                                 changed:NO]; 
```

然后只需将整个对象传递给您的其他 VC。

[这是说明这一点的示例项目。](https://dl.dropbox.com/u/3660978/SOObjectPassing.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:59:41.510

我只需创建一个“模型”类来保存这些变量并将模型类从一个视图控制器传递到下一个视图控制器。一旦它在从 view1 到 view2 的转换过程中链接到 view1 和 view2 中，它就会在从 view2 转换回 view1 时自动更新。使用 @property (assign) int shours 来创建 setter 和 getter。

使用这种方法，使用 segues 就可以了。你不需要使用 NSUserDefaults 或 NSNotificationCenter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:24:20.687

在您上创建一个自定义对象属性`MainViewController`并将其设置在您的`FlipsideViewController`或由于某种原因您不能这样做：创建一个对象来保存这些值并将其放入`NSUserDefaults`并继续阅读`MainViewController`。

# javascript - DIV 内的居中图像未给出预期位置

> ID：13399381
> 
> 赞同：0
> 
> 时间：2012-11-15T14:18:56.883
> 
> 标签：javascript, jquery, html, css

我已经使用 JavaScript 和 css 成功地将我的图像居中。我遇到的问题是居中图像的坐标不是我所期望的。而不是 Top 和 Left 值相对于包含 div 的顶部和左侧，它们代表图像的确切中心。这是[小提琴](http://jsfiddle.net/ddivita/dNX9j/8/)，我将粘贴我的代码。我需要知道框架的确切顶部和左侧，以便计算服务器端的偏移量。

html:

```
<div id="containment-wrapper">
    <img id="imgFrame" class="centerImg" src="http://i.imgur.com/2KKIB.png" name=
    "imgFrame">

    <div id="drag_resize" style=
    "position: absolute; z-index: 1; width:500px; height: 375px;"><img id="#imgSource"
    src="http://data.whicdn.com/images/35067333/ocean-life-029_large.jpg" style=
    "width: 100%; height:100%;" name="#imgSource"></div>
  </div>

  <div style="height: 200px;"></div>Frame Position:

  <form>
    <input type="text" id="framePos"><br>
    Image Size: <input type="text" id="imgSize" style="width: 500px;"><br>
    Orgignal Image Position: <input type="text" id="imgPos" style="width: 500px;"><br>
    Calcualted Image Position: <input type="text" id="imgPosCalc" style=
    "width: 500px;"><br>
  </form> 
```

CSS：

```
#containment-wrapper {
  border:1px solid; width: 432px;
  height: 348px; position: relative;
  border: solid 1px;display: table;
  text-align: center;
}

.centerImg {
    display:block;
    margin:auto;
    max-width:100%;
    top:50%;
    left:50%;
    opacity:0;
    position: absolute; z-index: 9999; pointer-events:none;  
}​ 
```

JavaScript：

```
$(function () {
    var frameTop = 0;
    var frameLeft = 0;

    $('#imgFrame').each(function () {
        imgheight = Math.round($(this).height() / 2);
        imgwidth = Math.round($(this).width() / 2);
        $(this).attr("style", "margin-top: -" + imgheight + "px; margin-left: -" + imgwidth + "px; opacity:1;");
    });

    var pos = $('#imgFrame').position();
    $('#framePos').val("Top: " + pos.top + " Left: " + pos.left);
    frameTop = pos.top;
    frameLeft = pos.left;

    $("#drag_resize").resizable({
        aspectRatio: true,
        resize: function (event, ui) {
            $('#imgSize').val("W: " + ui.size.width + " H: " + ui.size.height);
        },
        handles: 'e,w,n,s'

    }).draggable({
        drag: function (event, ui) {
            $('#imgPos').val("Top: " + (ui.position.top) + " Left: " + (ui.position.left));
            $('#imgPosCalc').val("Top: " + (ui.position.top - frameTop) + " Left: " + (ui.position.left - frameLeft));

        }
    });

    $('#imgSource').css({
        'width': '200px',
        'height': '200px;'
    })
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:03:15.957

我添加了一个函数来计算框架的真实顶部和真实左侧位置：

```
function getTrueXY(){
        var img = document.getElementById('imgFrame'); 
        //or however you get a handle to the IMG
        var fameWidth= img.clientWidth;
        var frameHeight= img.clientHeight;

        var container = document.getElementById('containment-wrapper');
        var conWidth= container .clientWidth;
        var conHeight = container .clientHeight;

        var trueLeft = Math.round((conWidth / 2) - (fameWidth / 2));
        var trueTop = Math.round((conHeight / 2) - (frameHeight / 2));

    } 
```

我也更新了[小提琴](http://jsfiddle.net/ddivita/dNX9j/11/)。

# javascript - 如何根据缩放、分辨率和窗口大小正确缩放网页？

> ID：13399385
> 
> 赞同：2
> 
> 时间：2012-11-15T14:19:14.147
> 
> 标签：javascript, jquery, html, css

我正忙于开发一个网络应用程序，但我似乎找不到正确的方法来缩放所有项目以使其适合屏幕。

![在此处输入图像描述](../Images/954414eff3946884e7b443674424721a.png)

正如您在图片上看到的，灰色条是菜单，需要保持原位。中间的内容（包括白色背景的蓝色块）需要左右移动，也需要上下移动。调整窗口大小、缩放和其他应考虑的因素。我目前的技术失败了很多次，所以我希望你们中的任何人都知道一些好的技术。

所以正如我所说，内容需要上下左右移动。所有页面的父 div 与所有页面的宽度相同。所以一页应该有正确的窗口宽度。高度也是如此，但水平轴上只有 2 页。目前我正在使用 JavaScript/JQuery 调整大小。

顺便说一句，当当前内容页面大于屏幕可以显示时，可能会垂直滚动。水平滚动是不可能的。

很难解释，我正在尽我所能，但我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:09:58.667

That's a lot fun! Perhaps working with em units will assist you. It's a neat little trick.

1 - Set the font-size to 100% on your parent container.

2 - In all of the children elements, use ems for all of your dimensions, padding, margin, borders, font sizes, etc.

3 - In Javascript, when the page loads, capture the browser dimensions and save these to variables for later use.

4 - Setup a window resize event. When the window resizes, get the new browser dimensions. Now, some basic math will allow you to compare the new browser dimensions to the original browser dimensions - and get a percentage.

5 - Still in the resize event, set that new percentage to the font-size of the parent element.

You can set this up with just your center container - or whatever. Any children elements of the main container that has the font-size property (and are defined in ems) will automatically scale with the browser window.

Text will scale Border size will scale Border radius will scale Dimensions, padding, margins will scale

It's neato.

# sql - 具有不同计数的 SQL 查询

> ID：13399386
> 
> 赞同：1
> 
> 时间：2012-11-15T14:19:22.073
> 
> 标签：sql, database-table

我正在尝试在 Delphi 中编写 SQL 查询，但没有运气。

我有两张表，第一张保存个人数据，第二张保存有关购买商品的信息。

当我用`WHERE`子句连接两个表时，我的查询工作正常（我的键是`person_id`）。

但我想在我的查询中添加没有个人数据的记录，只是有人购买了商品，他们不显示。

因此，在那些没有任何个人信息的记录中，我需要有空字符串或空值。

是否可以在一个 SQL 查询中完成？

编辑：这是工作版本，但这不包含与第一个表无关的第二个表的值。

```
Query1.SQL.Add ('SELECT idcard, vnev, knev, kapcs, ');
Query1.SQL.Add ('bsz, bt, kidate, ervvege, alkalmak FROM "'+adathely+'", "'+berlethely+'" ');
Query1.SQL.Add ('WHERE ("'+adathely+'".idcard = "'+berlethely+'".idcard) ');
//from here only filtering occurs
Query1.SQL.Add ('AND kidate >= "'+IntToStr(DateToInt(filterdate1.Text))+'" ');
Query1.SQL.Add ('AND ervvege <= "'+IntToStr(DateToInt(filterdate2.Text))+'" ');
Query1.SQL.Add ('AND CAST(bsz AS CHAR(6)) LIKE '''+filterbsz.Text+'%''  ');
Query1.SQL.Add ('AND ((LOWER(vnev) LIKE ''%'+filtername.Text+'%'') OR (LOWER(knev) LIKE ''%'+filtername.Text+'%''))  ');
Query1.SQL.ADD ('ORDER BY vnev ASC '); 
```

一点解释：table1 是“adathely” table2 是“berlethely” 两个表都包含字段“idcard”，但在 table2 中有记录在该字段中没有值，但我也想在我的 stringgrid 中显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:22:42.347

我想你写了一个这样的查询：

```
SELECT *
FROM Table1, Table2
WHERE Table1.person_id = Table2.person_id 
```

如果 table1 中存在 person_id 而 Table2 中没有，则不会出现任何记录。

尝试使用 LEFT JOIN 代替：

```
SELECT *
FROM Table1 LEFT JOIN Table2 on Table1.person_id = Table2.person_id 
```

这将显示 Table1 中的每条记录，即使它与 Table2 中的记录不相关。

**编辑：**如果左连接还不够，您可能需要完全外连接。如果你的 DBMS 不支持 FULL OUTER JOIN，你可以用这个来模拟它：

```
SELECT *
FROM Table1 LEFT JOIN Table2 on Table1.person_id = Table2.person_id
UNION SELECT *
FROM Table1 RIGHT JOIN Table2 on Table1.person_id = Table2.person_id 
```

并且由于 where 子句中有很多条件，我建议您这样编写查询：

```
SELECT *
FROM (the union query above) tables
WHERE ...all the conditions,
  except table1.idcard = table2.idcard that's already included in the join... 
```

只是为了让事情更具可读性。

# html - 居中的 div 偏离中心？

> ID：13399402
> 
> 赞同：0
> 
> 时间：2012-11-15T14:20:05.107
> 
> 标签：html, css

我有一个 150px div 的 6x4 数组，每个 5px 边距（想象 Metro UI）。我还有一个模态 div。方形 div 都是`display: inline-block`，以`text-align`父 div 为中心，每 6 个后有一个换行符（以制作 6x4 网格）。当我的模态（也居中，带有`margin`）弹出时，它与同样居中的图块稍微不对齐。为什么会这样？这没什么大不了的，但它与它下面的方形图块对齐，并且所有 1-2 像素都关闭看起来很可怕。可能有区别`text-align: center`并`margin: auto`导致这种情况吗？

从 HTML：

```
<div id="container">
<br />
<div id="tile11">

</div>
<div id="tile12">

</div>
<div id="tile13">

</div>
<div id="tile14">

</div>
<div id="tile15">

</div>
<div id="tile16">

</div>
<br />
<div id="tile21">

</div>
<div id="tile22">

</div>
...........
<div id="tile46">

</div>
</div> 
```

来自 CSS：

```
#container {
background: #000000;
width: 1000px;
height: 680px;
z-index: 1;
text-align: center;
margin: 10px auto 0px auto;
}

#tile44 {
background: #333333;
width: 150px;
height: 150px;
margin: 5px;
display: inline-block;
z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:45:18.247

以此为开端：

[http://jsfiddle.net/HdHRe/10/](http://jsfiddle.net/HdHRe/10/)

```
#container {
   background: #000000;
   width: 960px;
   height: 680px;
   margin: 0 auto;
   padding: 5px;
   overflow: auto;
}

#container div {
   background: #333333;
   width: 150px;
   height: 150px;
   margin: 5px;
   float: left;
} 
```

​</p>

我认为这是创建网格的更好方法。现在我们需要知道你想在哪里显示你的模态窗口。

# .net - 将文本文件转换为图像以在 .NET 中进行预览

> ID：13399409
> 
> 赞同：1
> 
> 时间：2012-11-15T14:20:35.363
> 
> 标签：.net, sql-server

我有以下情况，我需要将文本文件（文本文件流）转换为小图像，然后将它们存储在数据库（SQL Server）中，以便以后可以在“预览”屏幕中显示。有人对如何做到这一点有任何建议吗？尤其是将文本文件转换为图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:22:50.510

我不认为将文本文件转换为图像是解决问题的最佳方法。话虽如此，这里有一些示例代码可以帮助您入门。

```
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.IO;
using System.Linq;

/// <summary>
/// A utility class to generate images from a string.
/// </summary>
public static class ImageMaker
{
    private static readonly ImageCodecInfo MyCodecInfo = GetEncoderInfo("image/jpeg");
    private static readonly EncoderParameters MyEncodeParameters = new EncoderParameters(1);

    static ImageMaker()
    {
        // Specify the quality for generated images.
        MyEncodeParameters.Param[0] = new EncoderParameter(Encoder.Quality, 95L);
    }

    /// <summary>
    /// Takes in a string and returns an image of that text.
    /// </summary>
    /// <param name="text">Text to put on an image.</param>
    /// <returns>Image instance.</returns>
    public static Image DrawText(string text)
    {
        // Create a bitmap to store the result.
        var destImage = new Bitmap(500, 700);

        // Create a graphic to draw the text on.
        Graphics graphic = Graphics.FromImage(destImage);
        graphic.FillRectangle(new SolidBrush(Color.White), 0, 0, destImage.Width, destImage.Height);

        graphic.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
        graphic.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
        graphic.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

        var fontFamily = new FontFamily("Arial");
        var textRectangle = new Rectangle(0, 0, destImage.Width, destImage.Height);
        var format = new StringFormat();
        float emSize = graphic.DpiY * 10 / 72;

        // Create text path.
        var path = new GraphicsPath();
        path.AddString(text, fontFamily, (int)FontStyle.Regular, emSize, textRectangle, format);

        // Write path to graphic.
        var fillBrush = new SolidBrush(Color.FromKnownColor(KnownColor.Black));
        graphic.FillPath(fillBrush, path);

        return destImage;
    }

    /// <summary>
    /// Writes image to a stream.
    /// </summary>
    /// <param name="image">Image instance.</param>
    /// <param name="stream">Stream instance.</param>
    public static void WriteToStream(Image image, Stream stream)
    {
        image.Save(stream, MyCodecInfo, MyEncodeParameters);
    }

    /// <summary>
    /// Gets codec info for the specified MIME type.
    /// </summary>
    /// <param name="mimeType">MIME type name.</param>
    /// <returns>ImageCodecInfo instance or null if no matching info was found.</returns>
    private static ImageCodecInfo GetEncoderInfo(string mimeType)
    {
        ImageCodecInfo[] encoders = ImageCodecInfo.GetImageEncoders();
        return encoders.FirstOrDefault(t => t.MimeType == mimeType);
    }
} 
```

以下是它在 .ashx 处理程序中的使用方式：

```
public class GetPreview : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var image = ImageMaker.DrawText(
            @"Normally, both your asses would be dead as fucking fried chicken, " +
            "but you happen to pull this shit while I'm in a transitional period so " +
            "I don't wanna kill you, I wanna help you. But I can't give you this case, " +
            "it don't belong to me. Besides, I've already been through too much " +
            "shit this morning over this case to hand it over to your dumb ass.");

        context.Response.ContentType = "image/jpeg";
        ImageMaker.WriteToStream(image, context.Response.OutputStream);
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

干杯。

PS-lipsum 文本取自[slipsum.com](http://slipsum.com) ;)

# c# - RavenDB 和复合模式

> ID：13399413
> 
> 赞同：2
> 
> 时间：2012-11-15T14:20:41.890
> 
> 标签：c#, nosql, ravendb, document-database

假设我有这样的结构

```
public class Form
{
   public List<Field> Fields { get; set; }
} 
```

Field 类可以是复合的，也可以包含从`Field`该类派生的其他 Field，所以我有某种层次结构。表单作为实体文档保存到 RavenDB 中，并且工作正常。我只是想知道`Form`从 RavenDB 获取实例，我希望 Raven 创建适当的类（类，派生自`Field`类）。因此，假设我有两个派生类`FieldDerived1`，并在取回它们后将`FieldDerived2`它们放入`Fields`集合中，我想要两个具有实际类型的元素 -以及我添加到这些类中的所有附加属性？`Form``FieldDerived1``FieldDerived2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:25:05.730

它会工作得很好。Raven 使用 Json.Net 进行序列化，这将为您的数据添加一个 $type 属性，以便可以将其正确反序列化为正确的类型。

假设您的字段如下所示：

```
public class Field
{
  public string Name {get; set;}
}

public class FieldDerived1 : Field
{
  public int Length {get; set;}
}

public class FieldDerived2 : Field
{
  public string Color {get; set;}
} 
```

Raven 将像这样存储 Form 类：

```
{
  Fields: [
    {
      "$type": "YourNamespace.FieldDerived1, YourAssembly",
      "Name": "foo",
      "Length": 10
    },
    {
      "$type": "YourNamespace.FieldDerived2, YourAssembly",
      "Name": "bar",
      "Color": "blue"
    }
  ]
} 
```

# javascript - 检测对 HTML5 iframe 沙盒属性的支持

> ID：13399415
> 
> 赞同：8
> 
> 时间：2012-11-15T14:20:43.663
> 
> 标签：javascript, html, google-chrome, iframe, sandbox

有谁知道如何检测浏览器是否支持 iframe 沙盒属性而不中继版本检查等？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T14:23:25.397

您可以检查一个`iframe`元素是否具有该`sandbox`属性：

```
var sandboxSupported = "sandbox" in document.createElement("iframe"); 
```

* * *

**边注**

查找功能检测的一个好方法是查看[Modernizr](http://modernizr.com/)并查看它是否已经有一个。这是[沙盒属性测试的 Modernizr 代码](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/iframe-sandbox.js)：

```
Modernizr.addTest('sandbox', 'sandbox' in document.createElement('iframe')); 
```

或者（如果您需要在您的应用程序中使用大量功能检测）包括 Modernizr 并正确使用它，而不是仅仅从其源头获取想法！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T13:54:02.543

检查浏览器支持的新**HTML5**功能的最快方法是查看此链接[HTML5Test](http://html5test.com)，对于**CSS3**功能，请查看此链接[CSS3Test](http://css3test.com)。很酷的是，您可以将显示的结果与同一页面上的其他浏览器进行比较。

# c# - 如何获取 StackPanel.Children 项的 Width 或 ActualWith

> ID：13399417
> 
> 赞同：0
> 
> 时间：2012-11-15T14:20:49.920
> 
> 标签：c#, wpf

如何获取 StackPanel.Children 项的 Width 或 ActualWith？

```
foreach (var item in stackPanel1.Children)
{
 // item.Width ???              
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:25:35.647

使用`FrameworkElement`类，因为`ActualWidth`并且`Width`属于这个基类-

```
foreach (FrameworkElement item in stackPanel1.Children)
{
    double width = item.ActualWidth;
} 
```

# java - Java中的数据层、模型层和接口

> ID：13399421
> 
> 赞同：2
> 
> 时间：2012-11-15T14:20:56.610
> 
> 标签：java

假设我们希望代表一个人

```
public interface Person {

    String getFirstName();

    String getLastName();

} 
```

这是用 JPA 实现的（我错过了代码，因为它非常平庸）

现在，我希望有一个模型，它的接口是带有 setter 方法的人员接口的扩展

```
public interface PersonModel extends Person {

    void setFirstName(String firstName);

    void setLastName(String lastName);

} 
```

并且我实现了 Model 接口的具体实现（我将跳过它，因为它再次非常平庸）

在这样做时，我意识到从 Person 扩展的 PersonModel 并没有那么大的意义，因为“PersonModel 不是一个人”

将 PersonModel 转换为 Person 也是不“正确的”。

实现这一点的正确方法是什么 - PersonModel 不能从 Person 继承并重新定义方法，但这意味着额外的维护。

我可以将方法提取到另一个基本接口 -> PersonBase(?) 并从中扩展 Person （未定义其他方法）和 PersonModel 。

如果我沿着上述路径前进，命名基本接口的最佳方法是什么？

我使用接口的主要原因之一（除了它帮助我思考一切如何工作/组合在一起的事实）是这样可以很容易地有不同的实现层（JPA2/NoSQL 驱动程序等）

这不是真正使用的代码，所以请原谅任何语法错误/拼写错误 - 我只是为了这个问题而写的。

想法/指导/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:46:26.837

向上转换似乎工作正常：

```
package person;

public class PersonApp {
    public static void main(String [] args)
    {
        ConcretePerson p = new ConcretePerson("Superman");
        System.out.println(p.getName());
        PersonModel pm= p;
        System.out.println(pm.getName());
        Person pn=p;
        System.out.println(pn.getName());
        Person pnm=pm;
        System.out.println(pnm.getName());
    }
} 
```

程序输出：

```
Superman
Superman
Superman
Superman 
```

# git-commit - 如何使用 GitHub For Mac 执行“git commit --amend”

> ID：13399430
> 
> 赞同：5
> 
> 时间：2012-11-15T14:21:21.767
> 
> 标签：git-commit, github-for-mac

GitHub For Mac 中是否不包含“commit --amend”功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:29:48.857

查看[发行说明](http://mac.github.com/release-notes.html)，该功能似乎不可用（同上 GitHub for Windows）。

您可以将其添加到[GitHub for Mac](https://github.com/baldwindavid/github-for-mac-issues/issues?page=1&state=open)（ofr 记录）的问题列表中，并使用[联系表](https://github.com/contact)（用于操作）。

[Jonas](https://stackoverflow.com/users/183665/jonas)[在评论](https://stackoverflow.com/questions/13399430/how-to-do-git-commit-amend-using-github-for-mac/13400715?noredirect=1#comment24162180_13400715)中提到该功能有待处理的请求：

[第 30 期：github for mac 中的“git commit --amend”功能](https://github.com/baldwindavid/github-for-mac-issues/issues/30)

# jquery - 10 px 后显示菜单

> ID：13399438
> 
> 赞同：0
> 
> 时间：2012-11-15T14:22:02.363
> 
> 标签：jquery, scroll, hide, show

我需要隐藏我的 2 个菜单（顶部和侧边菜单），并在我开始向下滚动时首先变得可见……例如，在 10 px 之后。任何人都可以帮助我实现这一目标？

**HTML**

```
<div class="wrapper">
    <div class="navigation_top">
    <ul>
        <li>Btn_1</li>
        <li>Btn_2</li>
        <li>Btn_3</li>
        <li>Btn_4</li>
        <li>Btn_5</li>
    </ul>
    </div>

    <div class="navigation_side">
       <ul>        
          <li><a href="#slice1" id="btn_1" class="anchorLink">slice1</a></li>
          <li><a href="#slice2" id="btn_2" class="anchorLink">slice2</a></li>
          <li><a href="#slice3" id="btn_3" class="anchorLink">slice3</a></li>
           <li><a href="#slice4" id="btn_4" class="anchorLink">slice4</a></li>
           <li><a href="#slice5" id="btn_5" class="anchorLink">slice5</a></li>
       </ul>
    </div>

    <div id="slice1"></div>
    <div id="slice2"></div>
    <div id="slice3"></div>
    <div id="slice4"></div>
    <div id="slice5"></div>
</div> 
```

**CSS**

```
html, body {height:100%; color:#FFF;}

.wrapper {width:100%; height:100%;}
.navigation_top {width:100%; height:50px; background-color:#000; opacity:.5; line-height:50px; position:fixed;}
.navigation_top ul {list-style:none;}
.navigation_top ul li {float:left; width:20%; display:block;}
.navigation_side {width:200px; height:auto; position:fixed; background-color:#FFF; margin-top:30%;}

#slice1 {width:100%; height:100%; background-color:#CCC;}
#slice2 {width:100%; height:100%; background-color:#999;}
#slice3 {width:100%; height:100%; background-color:#888;}
#slice4 {width:100%; height:100%; background-color:#777;}
#slice5 {width:100%; height:100%; background-color:#666;} 
```

**jQuery**

```
jQuery(document).ready(function($) {

    $(".anchorLink").click(function(event){        
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
    });
}); 
```

这是一个小提琴：

[http://jsfiddle.net/iBertel/GA5NH/11/](http://jsfiddle.net/iBertel/GA5NH/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:26:07.183

使用 jQuery，您可以监听`scroll`元素上的事件：http: [//api.jquery.com/scroll/](http://api.jquery.com/scroll/)

您可以通过以下方式获取滚动位置`scrollTop`：[http](http://api.jquery.com/scrollTop/) ://api.jquery.com/scrollTop/ （或`scrollLeft`用于水平滚动）

一个例子 ：

```
$('#myElement').scroll(function() {
    if ($(this).scrollTop() > 10) {
       // Do some stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:31:31.483

首先隐藏你的菜单，然后监听`scroll`事件`window`并检查`scrollTop`：

```
jQuery(document).ready(function($) {

    $(".anchorLink").click(function(event){        
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
    });

    $('.navigation_top').hide();

    $(window).scroll(function() {
        // the 10 below is the number of pixels down to show the menu
        if ($(this).scrollTop() > 10) $('.navigation_top').show();
        else $('.navigation_top').hide();
    });
});​ 
```

# javascript - 如何将类变量传递给带有打字稿的函数内的函数？

> ID：13399439
> 
> 赞同：0
> 
> 时间：2012-11-15T14:22:02.717
> 
> 标签：javascript, typescript

我创建了一个这样的模态类：

```
export class Modal {
        link: Link;
        constructor (link: Link) {
            this.link = link;
        }
        create() {
            this.link.Modal.$Modal = $.modal({ });
        }
        addSubmit() {
            this.link.Modal.$Form.submit(function () {
                var a = this.link;
                submitHandler(this.link);
                return false;
            });
        }
} 
```

这是我正在使用的代码：

```
var modal = new Modal(link);
modal.create();
modal.addSubmit(); 
```

这里有一个问题。我想将链接作为参数传递给 submitHandler 函数。然而，它似乎不存在。此外，当我检查“var a = this.link”行上的所有内容时，当我将鼠标悬停在变量“a”、“this”和“link”上时，它们似乎都显示为“any”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:31:55.397

您已经发现了 JavaScript 作用域——一开始可能会让人感到困惑。

JavaScript 是功能范围的。这意味着变量属于声明它们的函数。

当变量在函数外部声明时，JavaScript 会尝试沿着链向上查找变量。

当您键入代码的上下文不是调用代码的上下文时，这会令人困惑。在您的情况下，`this`提交函数的上下文是正在提交的元素（例如表单元素）。它不是您编写提交函数的类。

这是一个应该有效的更新：

```
export class Modal {
    link: Link;
    constructor (link: Link) {
        this.link = link;
        this.link.Modal.$Modal = $.modal({ });
    }

    addSubmit() {
        var _this = this;
        this.link.Modal.$Form.submit(function () {
            var a = _this.link;
            submitHandler(_this.link);
            return false;
        });
    }
} 
```

在此示例中，我们将`this`一个名称放入一个不会被覆盖的变量中，因此 JavaScript 运行时在找到它之前不会停止查找。（它将`this`立即停止查找，因为它将在本地将其定义为表单元素）。因为没有本地`_this`JavaScript 会沿着链向上走，直到它发现我们的变量，它代表类。

TypeScript 中也有一个简写方式来执行此操作，这会产生与我们上面手写的相同的 JavaScript：

```
export class Modal {
    constructor (public link: Link) {
        this.link.Modal.$Modal = $.modal({ });
    }

    addSubmit() {
        this.link.Modal.$Form.submit(() => {
            var a = this.link;
            submitHandler(this.link);
            return false;
        });
    }
} 
```

最后，您不希望调用代码必须依赖以特定顺序调用函数才能正常工作。这是一个暴露类内部工作的示例，因此我将类的用法更新为：

```
var modal = new Modal(link);
modal.addSubmit(); 
```

我假设这`addSubmit`是可选的 - 否则 Modal 类也应该这样做，而调用代码不必知道它。

# webbrowser-control - 隐藏页面内容，直到在 WebBrowser 控件中应用过滤器

> ID：13399441
> 
> 赞同：0
> 
> 时间：2012-11-15T14:22:03.800
> 
> 标签：webbrowser-control, autohotkey

我正在修改 webbrowser 控件中显示的 web 内容，并寻找一种在应用所有更改之前不显示它们的方法。

我目前正在使用 DocumentComplete 事件，在过滤某些页面时，它们的内容是可见的。所以我想隐藏它们，直到一切都可以显示。

**简单的.html**

```
<html>
<head>
<style type="text/css">
div {
    font-weight: bold;
}
</style>
</head>
<body><div>foo</div> bar</body>
</html> 
```

**演示脚本**

```
new WBControl("file:///" A_ScriptDir "/simple.html")

class WBControl {

    DocumentComplete(oParams*) {
        doc :=  oParams[3].document
        sleep 200   ; simulate a delay caused by a heavy task
        doc.styleSheets[0].rules[0].style.fontweight := "normal"
    }

    __New(strURL="") {
        static WB
        Gui, New, Resize MaximizeBox
        Gui, Add, ActiveX, vWB w780 h580, Shell.Explorer  
        Gui, show, w800 h600
        ComObjConnect(WB, this)
        WB.Navigate(strURL)
    }   
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:05:41.743

尝试：

```
document.body.style.visibility := "hidden" 
```

要恢复可见性，请将其设置为空字符串。

```
document.body.style.visibility := "" 
```

您也可以创建一个简单的加载显示来代替显示；如果你想变得花哨。

# jsf-2 - 从其他上下文中检索 FacesContext sessionMap

> ID：13399444
> 
> 赞同：2
> 
> 时间：2012-11-15T14:22:17.293
> 
> 标签：jsf-2

我有一种删除会话托管 bean 的方法

```
public void invalidMyBean()
{
    final Map<String, Object> sessionMap = FaceContext.getCurrentInstance().getExternalContext().getSessionMap();
    sessionMap.remove("mySessionBean");
} 
```

invalidMyBean() 也从 Web 服务调用。在这种情况下 FaceContext.getCurrentInstance() 为空，我无法删除我的 bean。我试图将 sessionMap 作为一个字段存储在我的类中，但是从这个对象中删除是行不通的。有没有办法从 faceContext 外部检索 sessionMap ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:32:51.977

`ExternalContext#getSessionMap()`只是 的抽象`HttpSession#get/set/removeAttribute()`。因此，无论您在 servletcontainer（过滤器、servlet、webservice 等什么）中，一旦您掌握了具体`HttpSession`实例，就应该能够使用`session.removeAttribute("mySessionBean")`它。

请注意，这显然仅在使用与 JSF 应用程序相同的 HTTP 会话请求 Web 服务时才有效（您提出这个问题的方式——您似乎根本不了解 HTTP 会话的工作方式——表明情况并非如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:33:19.597

我回答自己在共享相同 HttpSession 的 JSF 页面中提供小程序的工作代码。小程序使用 JAX-WS 与服务器上的 Web 服务通信。

在 JSF 页面中：

```
<applet ..>
<param name="commonSessionId" value="#{session.id}" />
Distance Sensor [Your browser doesn&rsquo;t seem to support Java applets.]
</applet> 
```

在小程序 init() 中：

```
@Override
public void init()
{
    ...
    commonSessionId = getParameter("commonSessionId");
    port = service.getWsAppletPort();
    final Map<String, Object> map = new HashMap<String, Object>();
    map.put("Cookie", Collections.singletonList("JSESSIONID=" + commonSessionId));
    final Map<String, Object> requestContext = ((BindingProvider) port).getRequestContext();
    requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, map);
    requestContext.put(BindingProvider.SESSION_MAINTAIN_PROPERTY, Boolean.TRUE);
} 
```

再次感谢 BalusC 的大力帮助！

# java - 直接读取 Zip 文件中的文件 - Java

> ID：13399448
> 
> 赞同：5
> 
> 时间：2012-11-15T14:22:24.673
> 
> 标签：java, zip, zipfile

我的情况是我有一个包含一些文件（txt、png、...）的 zip 文件，我想直接通过它们的名称读取它，我测试了以下代码但没有结果（NullPointerExcepion）：

```
InputStream in = Main.class.getResourceAsStream("/resouces/zipfile/test.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

*resources*是一个包，而*zipfile*是一个 zip 文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T14:42:16.620

如果你可以确定你的 zip 文件永远不会被打包在另一个 jar 中，你可以使用类似的东西：

```
URL zipUrl = Main.class.getResource("/resources/zipfile.zip");
URL entryUrl = new URL("jar:" + zipUrl + "!/test.txt");
InputStream is = entryUrl.openStream(); 
```

或者：

```
URL zipUrl = Main.class.getResource("/resources/zipfile.zip");
File zipFile = new File(zipUrl.toURI());
ZipFile zip = new ZipFile(zipFile);
InputStream is = zip.getInputStream(zip.getEntry("test.txt")); 
```

否则，您的选择是：

*   对于需要加载的每个条目，使用 ZipInputStream 扫描 zip 文件一次。如果您有很多资源，这可能会很慢，除非您可以为所有资源重用相同的 ZipInputStream。
*   不要将资源打包在嵌套的 zip 文件中，只需将它们与代码一起内联到 jar 中。
*   将嵌套的 zip 文件复制到临时目录中，并使用 ZipFile 类访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T14:26:47.027

你目前的方法肯定行不通。您制定了一个任意的“访问”方案，并在一个不知道您要做什么的类中使用它。您***可以***做的是使用[ZipInputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)来读取您要查找的条目：

```
URL zipFileURL = Thread.currentThread().getContextClassLoader().getResource("zipfile.zip");
InputStream inputStream = zipFileURL.openStream();
ZipInputStream zipInputStream = new ZipInputStream(inputStream);

ZipEntry zipEntry = null;

do {
    zipEntry = zipInputStream.getNextEntry();
    if(zipEntry == null) break;
}
while(zipEntry != null && (! "textfile".equals(zipEntry.getName()));

if(zipEntry != null ) {
    // do some stuff
} 
```

这是临时代码，修复它来做你需要的。此外，可能有一些更有效的类来处理 Zip 文件，例如在 Apache Commons IO 库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:27:39.300

zip 文件中 test.txt 的路径是什么？您需要使用 zip 文件中的路径来读取此文件。还要确保您的 zipfile 在类路径中。实际上，您可以将其捆绑在一个 jar 文件中。

# javascript - carouFredSel 结合漂亮的照片

> ID：13399449
> 
> 赞同：1
> 
> 时间：2012-11-15T14:22:28.867
> 
> 标签：javascript, jquery, html, css

我正在尝试将漂亮的照片放入 CarouFredSel，但我遇到了我认为与 jquery 冲突的问题。一切正常，但是当我在 caraouFredSel 中实现 Pretty photo 时，看起来好像每个 li 都没有宽度或高度。

我对 javascript 有非常基本的了解，我目前正在尝试解决这个问题，但如果我能在截止日期临近时得到帮助，我将不胜感激。

这是页面，[http://www.grahamwilsdon.com/stoves/grants.html](http://www.grahamwilsdon.com/stoves/grants.html)

这里还有我正在使用的脚本，这些脚本也与下载的库内联

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" language="javascript" src="js/jquery.carouFredSel-5.6.4-packed.js"></script>
<script type="text/javascript" language="javascript">
$(function() {
// Scrolled by user interaction
    $('#foo2').carouFredSel({
        prev: '#prev2',
        next: '#next2',
        pagination: "#pager2",
        auto: false
    });
});
</script>

<link rel="stylesheet" href="prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
<script src="js/pretty_photo/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("a[rel^='prettyPhoto']").prettyPhoto();
});
</script> 
```

# windows-runtime - WinRT 支持哪些方法进行联合身份验证？

> ID：13399451
> 
> 赞同：2
> 
> 时间：2012-11-15T14:22:36.480
> 
> 标签：windows-runtime, federated-identity

我正在尝试编写一个支持与联合身份提供程序集成的 Windows 应用商店应用程序，例如 ADFS 或 Windows Azure AD 访问控制。

WinRT 支持哪些联合身份验证和访问控制方法以及应该利用哪些类/库？

# ios - 在最新的 Xcode (4.5) 中使用 iPad 1 进行开发和调试，如何？

> ID：13399455
> 
> 赞同：2
> 
> 时间：2012-11-15T14:22:43.563
> 
> 标签：ios, xcode, ipad

我还有一台 iPad 1。我使用最新版本的 XCode 进行应用程序开发，它只会在运行 iOS 6 的设备上调试应用程序。

不幸的是，iTunes 不允许您将 iPad 1 升级到 iOS 5 以上。XCode 可以配置为在低于版本 6 的 iOS 版本上调试应用程序吗？

另一种方法是通过越狱将设备升级到 iOS 6。我已经读到越狱 iPad 1 会给你一条将它升级到 iOS 6 的途径，但我还没有找到任何特定于开发的东西。

**编辑** 事实证明，这个问题只发生在我使用 XCode 创建新应用程序时。但是，如果我从一些现有应用程序（例如[SpeakHere](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)）打开示例代码，我的 iPad 1 突然出现在 XCode“运行列表”中，我**可以**在 iPad 1 上进行测试！我怀疑这些应用程序有一些“旧”的东西导致它们工作。我可以在使用 XCode 构建的新应用程序上以某种方式模拟吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:54:54.383

不，您不能将第一代 iPad 用于 iOS 6**特定**开发。

另一方面，您**可以使用最新的 Xcode 和 iOS 6 SDK，并且仍然使用 iPad 1 进行调试。**你自然不能使用 iOS 6 的功能，因为 iPad 最高支持 iOS 5。

要启用此功能，您可以下载“设备调试支持”包，以允许您执行此操作。转到 Xcode->Preferences->Downloads->Components，看看它是否可用。

![在此处输入图像描述](../Images/99345cabd6c8e708f48f47735aed4728.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T03:21:57.023

听起来您只是在接受新项目的默认部署目标 6.0。这意味着您将无法在旧版本的 iOS 上运行该应用程序，更不用说调试它们了。您需要将项目或目标的部署目标设置为 4.x。

# sql-server - T-SQL Recursive CTE，长路径所需的缩短结果

> ID：13399456
> 
> 赞同：2
> 
> 时间：2012-11-15T14:22:46.107
> 
> 标签：sql-server, tsql, common-table-expression

亲爱的 Stackoverflow 会员

我有一个这样的递归 CTE 查询：

```
DECLARE @Level TABLE (ID int, ParentID int, Name varchar(max))

INSERT INTO @Level (ID, ParentID, Name)
         VALUES (1,0, 'AAAA'),
                (2,1, 'BBBB'),
                (3,2, 'CCCC'),
                (4,3, 'DDDD'),
                (5,4, 'EEEE')

;WITH cte (ID, ParentID, Name, Path, Level) AS
(
     SELECT 
         ID, ParentID, Name, CONVERT(varchar(MAX), Name), 1
     FROM 
         @Level
     WHERE 
         ParentID = 0

     UNION ALL

     SELECT 
         n.ID, n.ParentID, n.Name, 
         CONVERT(varchar(MAX), cte.Path + '/' + n.Name), cte.Level + 1
     FROM 
         @Level n
     JOIN 
         cte on n.ParentID = cte.ID
   )
   SELECT * FROM cte 
```

上述查询的结果：

```
ID          ParentID    Name    Path                         Level
----------- ----------- ------- ---------------------------- -----------
1           0           AAAA    AAAA                         1
2           1           BBBB    AAAA/BBBB                    2
3           2           CCCC    AAAA/BBBB/CCCC               3
4           3           DDDD    AAAA/BBBB/CCCC/DDDD          4
5           4           EEEE    AAAA/BBBB/CCCC/DDDD/EEEE     5 
```

CTE 查询所需的输出：

```
ID          ParentID    Name   Paths                        Path                         Level
----------- ----------- ----------------------------------- ---------------------------- -----------
1           0           AAAA   AAAA                         AAAA                         1
2           1           BBBB   AAAA/BBBB                    AAAA/BBBB                    2
3           2           CCCC   AAAA/.../CCCC                AAAA/BBBB/CCCC               3
4           3           DDDD   AAAA/.../.../DDDD            AAAA/BBBB/CCCC/DDDD          4
5           4           EEEE   AAAA/.../.../.../EEEE        AAAA/BBBB/CCCC/DDDD/EEEE     5 
```

从上面的示例中可以看出，路径可能会变得很长，并且宁愿将路径替换为点。除了开始和结束字符保持可见并且仅替换中间内容之外。请注意，VALUES 的内容可以是任何内容，这只是作为示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:29:31.373

这会折叠除 Root 和 Current 之外的所有内容

```
 DECLARE @Level TABLE (ID int, ParentID int, Name varchar(max))

        INSERT INTO @Level (ID, ParentID, Name)
         VALUES (1,0, 'AAAA'),
                (2,1, 'BBBB'),
                (3,2, 'CCCC'),
                (4,3, 'DDDD'),
                (5,4, 'EEEE')

        ;WITH cte (ID, ParentID, Name, Root, Path, Level) AS
   (
   SELECT ID, ParentID, Name, CONVERT(varchar(MAX), Name),
          CONVERT(varchar(MAX), Name), 1
   FROM @Level
   WHERE ParentID = 0
   UNION ALL
   SELECT n.ID, n.ParentID, n.Name, cte.Root, cte.Root + '/' +
          CASE WHEN cte.Level=1 then ''
               else replicate('.../', cte.level-1) end +
          n.Name, cte.Level + 1
   FROM @Level n
   JOIN cte on n.ParentID = cte.ID
   )
   SELECT * FROM cte 
```

# asp.net - DropDown -- 在 Oracle SQL 或 ASP.NET 中将 DateTime 截断为日期？

> ID：13399459
> 
> 赞同：1
> 
> 时间：2012-11-15T14:22:53.273
> 
> 标签：asp.net, oracle

目前，我正在使用以下 SQL 填充 DropDown：

```
SELECT REPORT_DATE FROM MY_TABLE 
```

尽管存储在表中的值采用以下格式`dd-mon-yyyy`（我的首选格式），但填充我的 DropDown 的文本的不同之处在于它还显示时间，例如`dd-mon-yyyy hh:mm:ss AM`.

解决此问题的最佳方法是什么？我知道 Oracle SQL 中的`TRUNC`函数`TO_DATE`。但我想我也可以在填充后遍历 DropDown 并截断那里的字符串。我尝试了以下代码，但它返回运行时错误：

```
For Each i As ListItem In DropDown1.Items
        'Strip time here
        i.Text.ToString("dd-MMM-yyyy")
    Next 
```

本质上，我只想循环我的 DropDown 并仅更改文本以匹配“dd-MMM-yyyy”。我怎样才能做到这一点？我应该使用 SQL 还是 VB.NET？有最佳实践吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:25:12.403

你可以用这个 sql 端

```
SELECT to_char(REPORT_DATE, 'dd-mon-yyyy') report_date FROM MY_TABLE order by report_date; 
```

ps "存储在表中的值采用以下格式，dd-mon-yyyy"。日期不是这样存储的，它们在内部存储为 7 字节数字，您在选择时如何查看它们完全取决于您的 NLS_DATE_FORMAT 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:25:42.987

使用此字符串从 Oracle 获取数据

```
SELECT TO_CHAR(REPORT_DATE,'DD-MON-YYYY') FROM MY_TABLE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:27:39.917

如果数据是 DateTime 类型，您可以简单地在下拉列表中指定 DataTextFormatString 属性，如下所示：

```
<asp:dropdownlist DataTextFormatString ="{0:MM-dd-yyyy}" ... /> 
```

应该是到UI层以你想要的格式显示日期。如果可能，您应该尽量避免将用于将日期转换为您想要的格式的逻辑放在 SQL 语句中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:27:14.667

尝试

```
i.Text = Convert.ToDateTime(i.Text).ToString("dd-MMM-yyyy") 
```

您不能`.ToString("dd-MMM-yyyy")`用于字符串的日期格式。您需要将其转换为 DateTime

你也可以试试`<asp:DropDownList DataTextFormatString="{0:dd-MMM-yyyy}" />`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T14:34:04.350

最好在 DropDownList 中格式化日期，而不是让 sql 来做。

只需将 DataTextFormatString="{0:dd/MM/yyyy}" 添加到您的 DropDownList 标签：

```
 <asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="SqlDataSource1" DataTextField="adddate" 
        DataTextFormatString="{0:dd/MM/yyyy}" DataValueField="adddate">
</asp:DropDownList> 
```

# r - 使用 RStudio 在 R 中创建包

> ID：13399462
> 
> 赞同：5
> 
> 时间：2012-11-15T14:22:57.690
> 
> 标签：r, package, rstudio

我创建了一堆文件：

*   初始化程序
*   作者.r
*   类.r
*   模块/status.r
*   模块/mgmt.r
*   模块/core.r
*   模块/mcf.r

init.r 文件的来源是：

```
# initiation of package

# include libraries
library(RCurl);
library(rjson);

# include files
source('auth.r');
source('class.r');

# extend class
source('modules/status.r');
source('modules/mgmt.r');
source('modules/core.r');
source('modules/mcf.r'); 
```

我该如何去创建一个包呢？init.r 文件显然需要先启动。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T15:46:13.713

请按照本视频中的步骤开始：

[使用 RStudio 在 2 分钟内构建 R 包](http://www.youtube.com/watch?v=ScV7XXlBZww)

然后阅读更多关于[RStudio 的包开发](http://www.rstudio.com/ide/docs/packages/overview)功能，以及[Hadley Wickam 的包基础知识](https://github.com/hadley/devtools/wiki/Package-basics)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T14:40:47.077

请参阅`Writing R Extensions`制作包的过程。你可能想用它`package.skeleton`来开始。

但本质上，

*   摆脱你的`init.r`文件，
*   将所有其他`.R`文件放在`R`目录中
*   写`Depends: RCurl, rjson`在你的DESCRIPTION文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T07:49:17.110

**1\. 构建先决条件：** 要使用 RStudio 构建 R 包，您应该具备以下先决条件，例如 R、RStudio、Rtools、Basic MikTex、roxygen2 和 devtools 包。

**2\. 在 RStudio 中创建 RPackage 项目**并添加所有 R 文件 (init.r,auth.r,class.r,modules/status.r,modules/mgmt.r,modules/core.r,modules/mcf.r ) 项目的 R 文件夹下。

**3.**通过编辑包描述文件添加文档。构建项目，现在您的包可以使用了。

构建一个简单的包不会超过 15 分钟。如果您希望逐步解释创建一个简单的包，请访问此博客。 [https://veeramaninatarajanmca.wordpress.com/2017/02/10/how-to-create-a-simple-package-in-r-using-rstudio/](https://veeramaninatarajanmca.wordpress.com/2017/02/10/how-to-create-a-simple-package-in-r-using-rstudio/)

# ruby-on-rails - Datamapper：为同一模型创建两个关系（具有 n 和具有 1）

> ID：13399466
> 
> 赞同：0
> 
> 时间：2012-11-15T14:23:27.453
> 
> 标签：ruby-on-rails, ruby-datamapper

我有两个模型，它们相互链接。

```
class User
  include DataMapper::Resource

  property :id, Serial
  has n, :mail_addresses
end

class MailAddress
  include DataMapper::Resource

  property :id, Serial
  property :email, String, :required => true, :unique => true, :format => :email_address

  belongs_to :user
end 
```

现在我想为用户添加一个主邮件地址。所以它可以做类似的事情

```
some_user.primary_mail_address = some_user.mail_addresses.first 
```

我一直在尝试在用户模型上做这样的事情，但没有任何运气。

```
property :primary_mail_address_id, Integer, required: false
has 1, :primary_mail_address, model: 'MailAddress', parent_key: [:primary_mail_address_id], child_key: [:id] 
```

上面的技巧允许我执行代码示例，但是当我这样做时，primary_mail_address_id 不会得到更新。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:34:46.223

找到了自己的解决方案。

问题是我`has 1`与`belongs_to`. `has 1`实际上是一个 one_to_many 关系，它试图在模型上创建属性`MailAddress`，而不是在`User`模型上。

诀窍是：

```
belongs_to :primary_mail_address, MailAddress, required: false 
```

# linux - CentOS 6.3 中的 OpenMPI 1.6.3- 64 位安装失败

> ID：13399468
> 
> 赞同：0
> 
> 时间：2012-11-15T14:23:34.980
> 
> 标签：linux, cuda, installation, centos, openmpi

如何在已安装**CUDA 5.0的机器上安装****OpenMPI 1.6.3 - 64 位**版本。使用的操作系统是**CentOS 6.3 x86_64**。

 ****完成**配置**后，我给出了命令**make**。最后它显示了与 CUDA 包含文件的一些冲突。

我在配置命令中给出了以下选项

```
./configure --enable-heterogeneous --enable-cxx-exceptions --enable-opal-multi-threads --enable-mpi-thread-multiple --with-wrapper-cflags=-m64 --with-wrapper-cxxflags=-m64 --with-wrapper-ldflags=-m64 --with-wrapper-libs=-m64 --with-wrapper-fflags=-m64 --with-wrapper-fcflags=-m64 --with-exflags=-m64 --with-timer=TYPE CFLAGS=-m64 LDFLAGS=-m64 CPPFLAGS=-m64 CXXFLAGS=-m64 CCASFLAGS=-m64 FFLAGS=-m64 FCFLAGS=-m64 --prefix=/usr/local/openmpi 
```

配置命令成功执行。之后我给了

```
make 
```

经过大量输出后，我在终端中收到以下错误。

```
Making all in vtlib
make[5]: Entering directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi/contrib/vt/vt/vtlib'
  CC     vt_comp_gnu.lo
  CC     vt_getcpu.lo
  CC     vt_gpu.lo
  CC     vt_cudartwrap.lo
vt_cudartwrap.c:145: error: conflicting types for 'cudaGetSymbolAddress'
/usr/local/cuda/include/cuda_runtime_api.h:4263: note: previous declaration of 'cudaGetSymbolAddress' was here
vt_cudartwrap.c:164: error: conflicting types for 'cudaGetSymbolSize'
/usr/local/cuda/include/cuda_runtime_api.h:4285: note: previous declaration of 'cudaGetSymbolSize' was here
vt_cudartwrap.c:392: error: conflicting types for 'cudaGetTextureReference'
/usr/local/cuda/include/cuda_runtime_api.h:5055: note: previous declaration of 'cudaGetTextureReference' was here
vt_cudartwrap.c:501: error: conflicting types for 'cudaFuncGetAttributes'
/usr/local/cuda/include/cuda_runtime_api.h:2241: note: previous declaration of 'cudaFuncGetAttributes' was here
vt_cudartwrap.c:797: error: conflicting types for 'cudaFuncSetCacheConfig'
/usr/local/cuda/include/cuda_runtime_api.h:2122: note: previous declaration of 'cudaFuncSetCacheConfig' was here
vt_cudartwrap.c:969: error: conflicting types for 'cudaGetSurfaceReference'
/usr/local/cuda/include/cuda_runtime_api.h:5110: note: previous declaration of 'cudaGetSurfaceReference' was here
vt_cudartwrap.c:1565: error: conflicting types for 'cudaFuncSetSharedMemConfig'
/usr/local/cuda/include/cuda_runtime_api.h:2173: note: previous declaration of 'cudaFuncSetSharedMemConfig' was here
make[5]: *** [vt_cudartwrap.lo] Error 1
make[5]: Leaving directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi/contrib/vt/vt/vtlib'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi/contrib/vt/vt'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi/contrib/vt/vt'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi/contrib/vt'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/Softwares/OpenMPI/openmpi-1.6.3/ompi'
make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:18:27.860

问题不在 Open MPI 中，而是在捆绑的 VampirTrace 库中。**只需使用*--disable-vt***配置构建。1.6.1 默认不构建 VT。也许 1.6.3 已经改变了。如果您需要 MPI 跟踪，请从其主页获取最新的 VampirTrace 并单独构建。

此答案由**Hristo Iliev 11 月 16 日 12:35提供******

# javascript - 密码强度计 - 错误：SyntaxError：无效的量词

> ID：13399469
> 
> 赞同：1
> 
> 时间：2012-11-15T14:23:47.507
> 
> 标签：javascript, jquery

我正在尝试为项目自定义密码强度计，但我不断收到 Javascript/jQuery 中的 RegEx 语法无效的量词错误。我试过转义反斜杠，消除正斜杠，在堆栈和谷歌上搜索。我找到了一些关于此的信息，但他们的解决方案似乎对我没有帮助。我希望有人可以在下面的函数代码中发现它。您的帮助将不胜感激。

```
$('#rPassword').keyup(function() {
    return passwordChanged();
});

function passwordChanged()
{
    var pwd = $('#rPassword').val();
    var noofchar=/^.*(?=.{3,}).*$/;
    var checkspace=/\s/;    
    var best = /(?=^.{8,}$)(?=.*\d)(?=.*\W+)(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/; // 8 character minimum, upper-case letter, Lower-case letter, digit, special character
    var strong = /(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/; // 8 character minimum, upper-case letter, lower-case letter, digit or special character. Examples: “15NotEasy”,”Bett.er-Yet”
    var weak = /(?=^.{6,}$)(?=.*\d)(?=.*[A-Za-z]).*$/; // 6 character minimum, upper-case letter or lower-case letter, digit. Examples: “common1″,”7etmein”
    var bad = /[a-zA-Z0-9\_\-]{3,}$/; // 3 characters or longer, digits, upper or lower case letters. Examples: “easy”,”8892″,”NOTSECURE”

    if (true==checkspace.test(pwd)) {
        $('#rPasswordStrength').animate({
            width: '0%',
            backgroundColor: '#eb001f'
        }, 500)
    } else if (false==noofchar.test(pwd)) {
        $('#rPasswordStrength').animate({
            width: '0%',
            backgroundColor: '#eb001f'
        }, 500);
    } else if(best.test(pwd)) {
    $('#rPasswordStrength').animate({
        width: '100%',
        backgroundColor: '#1ca456'
    }, 500);          
    } else if(strong.test(pwd)) {
        $('#rPasswordStrength').animate({
            width: '75%',
            backgroundColor: '#8eda2a'
        }, 500);              
    } else if(weak.test(pwd)==true && bad.test(pwd)==true) { 
        $('#rPasswordStrength').animate({
            width: '50%',
            backgroundColor: '#ff7e0b'
        }, 500);              
    } else if(bad.test(pwd)) {
        $('#rPasswordStrength').animate({
            width: '25%',
            backgroundColor: '#eb001f'
        }, 500);              
    }
} 
```

# java - 如何在多个 Android 活动类型之间共享方法

> ID：13399474
> 
> 赞同：1
> 
> 时间：2012-11-15T14:24:01.167
> 
> 标签：java, android

我正在使用**ActionBarSherlock构建****Android**应用程序。

 **我有**多种类型**的活动：

*   SherlockFragmentActivity
*   SherlockMapActivity
*   SherlockActivity

我希望我的**所有**活动都共享**通用方法**来遵循屏幕的内部工作流程。

如果我创建一个`Workflow`扩展的类，`SherlockFragmentActivity`那么我`MapActivity does`就不再工作了。如果我创建了一个`Worflow`扩展类，`SherlockMapActivity`那么我的类`TutorialActivity`就不再工作了（因为它使用的是`new SectionsPagerAdapter(getSupportFragmentManager());`.

请注意，我想要的常用方法也在运行`startActivity()`。

我知道Java不能有一个扩展多个类的类，那么我应该怎么做呢？

```
public class Workflow extends SherlockMapActivity {

protected void goMain() {
    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
    startActivity(intent);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

    // ...
}

public class TutorialActivity extends Workflow {
    // ...
    // new SectionsPagerAdapter(getSupportFragmentManager());
    // ...
}

public class GameActivity extends Workflow {
    // ...
    // MapView
    // ...
} 
```

我也想分享这样的代码：

```
@Override
protected void onCreate(Bundle savedInstance) {
    super.onCreate(savedInstance);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setProgressBarIndeterminate(true);
    setProgressBarIndeterminateVisibility(false);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:25:32.207

您可以创建一个自定义`Activity`类并在您的活动中扩展它。

例如：

```
public abstract class DerivedActivityA extends Activity implements CustomInterfaceA {

    // ... your code here
}

public abstract class DerivedActivityB extends DerivedActivityA implements CustomInterfaceB {

    // ... your code here
} 
```

如果你必须实现多个接口，那么像我上面那样使用抽象类并实现接口。

**编辑：** 如果我做对了，它`SectionsPagerAdapter`只是一个适配器，所以你可以将它作为一个字段组合到你的一个类中。

**Edit2：** 您不能扩展两个类，也不能将一个类组合`Activity`成另一个类，因此您要么必须自己编写东西，要么从第三方库中提取所需的功能。**

# facebook - 获取 Facebook Chat 的在线状态

> ID：13399476
> 
> 赞同：0
> 
> 时间：2012-11-15T14:24:06.877
> 
> 标签：facebook, xmpp, facebook-chat

我正在使用 libpurple 连接到 FB 聊天。问题是我没有从通过移动 Facebook 应用程序在线的朋友那里获得在线状态。

但是，如果这样的朋友给我发消息，我会同时为他收到消息和在线状态。

它看起来像这样：

```
(14:23:08) jabber: Recv (ssl)(191): <message from="-mybyddyid@chat.facebook.com"     to="myownid@chat.facebook.com/b94353f3_4CE87B53BB319" type="chat"><composing  xmlns="http://jabber.org/protocol/chatstates"/></message>

(14:23:10) jabber: Recv (ssl)(188): <message from="-mybyddyid@chat.facebook.com"   to="myownid@chat.facebook.com/b94353f3_4CE87B53BB319" type="chat"><active   xmlns="http://jabber.org/protocol/chatstates"/></message>

(14:23:11) jabber: Recv (ssl)(166): <presence from="-mybyddyid@chat.facebook.com" to="myownid@chat.facebook.com/b94353f3_4CE87B53BB319"><x xmlns="vcard-temp:x:update"><photo/></x></presence> 
```

所以我想知道这是我的错还是 Facebook Chat 实施的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:54:04.970

我认为状态更新会有延迟。也许您可以检查一下，要求您的朋友不要发送消息并等待状态发生变化。从 facebook 聊天开发者页面 [1] 看来，当您更改它时，状态会在之后更新。

此外，从同一页面来看，限制之一是 facebook 聊天服务器不支持存在探测。如果 XMPP 服务器在用户登录并发送初始状态后还没有联系人的状态信息，则向联系人发送状态探测（参见 RFC 3921 [2] 的 5.1.1 节和 RFC 3921 [2] 的第 4.3.1 节RFC 6121 [3]）。

如果服务器无法发送存在探测，它可能没有联系人的存在信息。我不知道 facebook 聊天服务器是如何实现的，但我猜测当联系人执行某些操作（如发送消息/更新状态）时，服务器会假定联系人在线并发送状态。（我可能在这里错了，如果我错了，请纠正我！）

参考：

[1] [http://developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

[2] [http://xmpp.org/rfcs/rfc3921.html](http://xmpp.org/rfcs/rfc3921.html)

[3] [http://xmpp.org/rfcs/rfc6121.html](http://xmpp.org/rfcs/rfc6121.html)

# udp - 无法显示通过 UDP 使用 GStreamer 流式传输的 h.264 网络摄像头图像

> ID：13399478
> 
> 赞同：3
> 
> 时间：2012-11-15T14:24:18.123
> 
> 标签：udp, h.264, gstreamer, rtp, live-streaming

我正在尝试通过 IP 将我的网络摄像头从一台 PC 流式传输到另一台 PC。这都是通过命令行完成的。首先我尝试：

#gst 启动 v4l2src ！xvimagesink

哪个工作正常并启动网络摄像头并显示图片/视频。然后我尝试通过 udp 将网络摄像头流式传输到另一台 PC。

```
gst-launch v4l2src device=/dev/video0 ! 'video/x-raw-yuv,width=320,height=240' !  x264enc pass=qual quantizer=20 tune=zerolatency ! rtph264pay ! udpsink host=127.0.0.1 port=1234 sync=false 
```

在目标 PC 上，我开始执行此操作：

```
gst-launch -v udpsrc port=1234 ! fakesink dump=1 
```

我在外壳中看到的位置：

```
00000000 (0x7f2ebc004a70): 80 e0 18 2b 7a 74 25 94 2b 28 22 2d 5c 41 73 0c  ...+zt%.+("-\As.
00000010 (0x7f2ebc004a80): a5 12 72 91 4b 97 36 f6 8f 12 46 d9 45 5f cf ac  ..r.K.6...F.E_..
00000020 (0x7f2ebc004a90): 92 80 33 35 c2 65 37 d5 f0 1e f0 70 d6 95 b2 3d  ..35.e7....p...=
00000030 (0x7f2ebc004aa0): 52 82 53 f7 fe 47 be 62 30 39 e9 97 c9 bb 56 de  R.S..G.b09....V.
00000040 (0x7f2ebc004ab0): b1 d3 eb d0 f1 49 90 7b bc 23 9b 9f ab 1e ee 72  .....I.{.#.....r
00000050 (0x7f2ebc004ac0): ff 61 41 ac 8e 54 b9 96 16 ba 4d 37 f6 67 8e ce  .aA..T....M7.g..
00000060 (0x7f2ebc004ad0): 1a 8b 6b 9a 06 f0 31 51 25 e2 b0 a6 73 55 23 76  ..k...1Q%...sU#v
00000070 (0x7f2ebc004ae0): 02 e8 97 60 ec 77 52 1d 3d 1c 55 52 5c 24 5a fb  ...`.wR.=.UR\$Z.
00000080 (0x7f2ebc004af0): ae 6f d7 bb 0a 18 bf bb 72 43 7e c2 76 ab fc ca  .o......rC~.v...
00000090 (0x7f2ebc004b00): ba dd a0 e5 f5 ea 61 2b 1c 77 da ab 44 62 4f 60  ......a+.w..DbO`
000000a0 (0x7f2ebc004b10): 78 83 d3 1a 54 f7 a9 af 15 4b db 08 6d 43 31 a5  x...T....K..mC1. 
```

所以在我看来，它正在流式传输图像。现在，我尝试在屏幕上显示它。我用这个显示流：

```
gst-launch -v udpsrc port=1234 ! application/x-rtp,clockrate=90000,payload=96 ! rtph264depay queue-delay=0 ! ffdec_h264 ! xvimagesink 
```

但它不显示网络摄像头；而是在外壳中我得到：

```
Setting pipeline to PAUSED ...
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
/GstPipeline:pipeline0/GstCapsFilter:capsfilter0.GstPad:src: caps = application/x-rtp, clockrate=(int)90000, payload=(int)96, media=(string)video, clock-rate=(int)90000, encoding-name=(string)H264
/GstPipeline:pipeline0/GstRtpH264Depay:rtph264depay0.GstPad:src: caps = video/x-h264
/GstPipeline:pipeline0/GstRtpH264Depay:rtph264depay0.GstPad:sink: caps = application/x-rtp, clockrate=(int)90000, payload=(int)96, media=(string)video, clock-rate=(int)90000, encoding-name=(string)H264
/GstPipeline:pipeline0/ffdec_h264:ffdec_h2640.GstPad:sink: caps = video/x-h264
/GstPipeline:pipeline0/ffdec_h264:ffdec_h2640.GstPad:src: caps = video/x-raw-yuv, width=(int)320, height=(int)240, framerate=(fraction)30/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
ERROR: from element /GstPipeline:pipeline0/GstUDPSrc:udpsrc0: Internal data flow error.
Additional debug info:
gstbasesrc.c(2543): gst_base_src_loop (): /GstPipeline:pipeline0/GstUDPSrc:udpsrc0:
streaming task paused, reason not-negotiated (-4)
Execution ended after 79200858888 ns.
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
/GstPipeline:pipeline0/ffdec_h264:ffdec_h2640.GstPad:src: caps = NULL
/GstPipeline:pipeline0/ffdec_h264:ffdec_h2640.GstPad:sink: caps = NULL
/GstPipeline:pipeline0/GstRtpH264Depay:rtph264depay0.GstPad:src: caps = NULL
/GstPipeline:pipeline0/GstRtpH264Depay:rtph264depay0.GstPad:sink: caps = NULL
/GstPipeline:pipeline0/GstCapsFilter:capsfilter0.GstPad:src: caps = NULL
Setting pipeline to NULL ...
Freeing pipeline ... 
```

我不知道我做错了什么。所有这些都在 CentOS 6.3 上，我在其中安装了 GStreamer 10.29，其中包含所有插件（基本、好、坏、丑）和 gstreamer-ffmpeg，两者都来自存储库[http://pkgrepo.linuxtech.net/el6/release/linuxtech。回购](http://pkgrepo.linuxtech.net/el6/release/linuxtech.repo)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:40:10.060

您可以在这里找到一些现成的发送方/接收方示例，以防您还没有看到：

[http://cgit.freedesktop.org/gstreamer/gst-plugins-good/tree/tests/examples/rtp?h=0.10](http://cgit.freedesktop.org/gstreamer/gst-plugins-good/tree/tests/examples/rtp?h=0.10)

# automated-tests - 替换 Watin 的测试框架，如果它会停止维护？

> ID：13399483
> 
> 赞同：6
> 
> 时间：2012-11-15T14:24:34.673
> 
> 标签：automated-tests, watin, browser-testing

我的印象是 Watin 不再被维护，并被问到哪个框架最适合在 .net 浏览器中测试网站？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T20:41:54.630

早在 7 月的 WatiN 邮件列表中，Jeroen 就发表了以下声明。

> ...WatiN 还活着吗：是的。活动是否对外界可见：不，这是一件坏事。
> 
> 在过去两周的假期中，我一直在考虑如何进行，并决定每周四晚上在 WatiN 上工作。第一优先是尽快获得更新的 FireFox 支持和 IE 改进。

.

如果离开 WatiN，那么 Selenium 2 或更高版本将是我的首选框架。编码的 UI 将是下一个。我参与了一个测试练习，在房间里，WatiN、Selenium 和 Coded UI 都用于测试同一个站点；由此产生的结构在所有三个中都非常相似。Selenium 似乎对多种浏览器有最好的支持。

# azure - 如何从具有多个 PK 的 Azure 表存储中获取多个表实体？

> ID：13399484
> 
> 赞同：1
> 
> 时间：2012-11-15T14:24:40.447
> 
> 标签：azure, azure-table-storage

我有一堆主键 - 数万个，我想检索它们关联的表实体。所有行键都是空字符串。我知道这样做的最好方法是一一异步地查询它们。它看起来很快，但理想情况下我想在一个事务中将几个实体捆绑在一起。使用新的存储客户端，我有以下代码失败：

```
var sample = GetSampleIds(); //10000 pks

var account = GetStorageAccount();
var tableClient = account.CreateCloudTableClient();
var table = tableClient.GetTableReference("myTable");

//I'm trying to get first and second pk in a single request.
var keyA = sample[0];
var keyB = sample[1];

var filterA = TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, keyA);
var filterB = TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, keyB));

//filterAB = "(PartitionKey eq 'keyA') or (PartitionKey eq 'keyB')"
var filterAB = TableQuery.CombineFilters(filterA, TableOperators.Or, filterB);
var query = new TableQuery<TweetEntity>().Where(filterAB);

//Does something weird. I thought it might be fetching a range at one point.
//Whatever it does it doesn't return. Expected the following line to get an array of 2 items.
table.ExecuteQuery(query).ToArray()

// replacing filterAB in query with either filterA or filterB works as expected 
```

示例总是显示 CombineFilters 在 PK 和 RK 上工作，但这对我没有用。我假设这是不可能的。

## 问题

是否可以通过 PK 将实体捆绑在一起？我知道过滤器的最大长度是 15，但是当您获取 10,000 个项目时，即使是 2 也是一个潜在的改进。另外，说明书在哪里？在任何地方都找不到合适的文档。例如，用于 CombineFilters 的 MSDN 是一个基本的 shell，包含了智能感知提供的较少信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:35:24.003

tl; dr：听起来您需要重新考虑分区策略。当您通常需要查询或处理多个 ID 时，唯一的、非连续的 ID 并不是好的 PK。更多的：

分区键并不意味着真的是“主”键。它们更多地被认为是您想要使用的分组的、密切相关的数据集。您可以按 id、日期等进行分组。PK 用于扩展系统 - 理论上，每个 PK 可以有 1 个分区服务器处理您的数据。

对于您的问题：您正在做的事情不会有很好的表现。事实上，OR 查询是非优化的，需要全表扫描（不好）。所以，不要做 PK = "foo" OR PK = "bar"，你真的应该做 2 个查询（并行），因为这会让你获得更好的性能。

回到您的核心问题，如果您使用特定实体的唯一标识符并将其描述为 PK，那么这也意味着您一次无法处理超过 1 个实体。为了在实体上工作，您确实需要一个公共分区键。你能想出一个更好的描述你的实体的方法吗？日期/时间有效吗？其他一些共同属性？这些往往是很好的分区键。您唯一可以做的另一件事是所谓的分区范围 - 您的查询往往在分区键上进行范围。这方面的一个例子是日期时间分区键。您可以使用文件记号来描述您的分区，并以 PK 的顺序数据记号结束。然后，您的查询可以使用 > 和 < 查询来指定范围（无 OR）。这些可以更优化，但你仍然可能会获得大量的延续令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:35:28.087

正如 dunnry 在他的回复中提到的那样，这种方法的问题是 OR 查询非常慢。我在没有存储客户端的情况下解决了我的问题（在这一点上，我不确定它有什么问题，假设它可能是一个错误），但是在没有 OR 查询的情况下单独获取 2 个实体结果很多（！）比使用 OR 查询更快。

# magento - 在非安全 magento 页面上将 https 重定向到 http

> ID：13399485
> 
> 赞同：6
> 
> 时间：2012-11-15T14:24:41.857
> 
> 标签：magento

Magento 有一些很棒的内置功能，如果您请求一个应该安全的页面，例如通过 http 结帐，那么它会重定向到 https。然而，似乎缺少的是，如果有人请求一个不需要安全的页面，例如通过 https 的类别页面，那么似乎没有将它们重定向到 http 的功能。

因此，如果有人要求：

> [https://www.mysite.com/mycategory](https://www.mysite.com/mycategory)

他们将 301 重定向到

> [http://www.mysite.com/mycategory](http://www.mysite.com/mycategory)

有人设法做到这一点吗？

如果没有，那么任何人都能够指出我重定向到 HTTPS 的 magento 核心代码的方向，然后我应该能够从中工作以提出解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:54:15.977

看看下面的方法

```
app/code/core/Mage/Core/Controller/Varien/Router/Standard.php::_checkShouldBeSecure() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T15:01:14.780

所以感谢 Rich 我在 app/code/core/Mage/Controller/Varien/Router/Standard.php::_checkShouldBeSecure()

我修改了这个函数（在 app/code/local 中创建的副本添加在那里修改）添加到**elseif**部分

```
protected function _checkShouldBeSecure($request, $path='')
{
    if (!Mage::isInstalled() || $request->getPost()) {
        return;
    }

    if ($this->_shouldBeSecure($path) && !Mage::app()->getStore()->isCurrentlySecure()) {
        $url = $this->_getCurrentSecureUrl($request);

        Mage::app()->getFrontController()->getResponse()
            ->setRedirect($url)
            ->sendResponse();
        exit;
    } elseif (!$this->_shouldBeSecure($path) && Mage::app()->getStore()->isCurrentlySecure()) {
        $url = $this->_getCurrentUnsecureUrl($request);

        Mage::app()->getFrontController()->getResponse()
            ->setRedirect($url)
            ->sendResponse();
        exit;
    }
} 
```

然后添加了这个功能

```
protected function _getCurrentUnsecureUrl($request)
{
    if ($alias = $request->getAlias(Mage_Core_Model_Url_Rewrite::REWRITE_REQUEST_PATH_ALIAS)) {
        return Mage::getBaseUrl('link', false).ltrim($alias, '/');
    }

    return Mage::getBaseUrl('link', false).ltrim($request->getPathInfo(), '/');
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-29T10:25:36.723

非常感谢上面的提示。我将代码集成到“类似 Magento 的模块”中，而不会重载核心。

只需创建三个文件：

```
app/code/local/MyCompany/MyModule/Controller/Varien/Router/Standard.php
app/code/local/MyCompany/MyModule/etc/config.xml
app/etc/modules/MyCompany_MyModule.xml 
```

粘贴`app/etc/modules/MyCompany_MyModule.xml`以下无趣的东西：

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyCompany_MyModule>
            <active>true</active>
            <codePool>local</codePool>
        </MyCompany_MyModule>
    </modules>
</config> 
```

在`app/code/local/MyCompany/MyModule/etc/config.xml`粘贴路由器配置：

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyCompany_MyModule>
            <version>0.1.0</version>
        </MyCompany_MyModule>
    </modules>
    <default>
        <web>
            <routers>
                <standard>
                    <area>frontend</area>
                    <class>MyCompany_MyModule_Controller_Varien_Router_Standard</class>
                </standard>
            </routers>
        </web>
    </default>
</config> 
```

并`app/code/local/MyCompany/MyModule/Controller/Varien/Router/Standard.php`从上面实现逻辑：

```
<?php

class MyCompany_MyModule_Controller_Varien_Router_Standard extends Mage_Core_Controller_Varien_Router_Standard {

    protected function _checkShouldBeSecure($request, $path='') {
       parent::_checkShouldBeSecure($request, $path);

       if (!$this->_shouldBeSecure($path) && Mage::app()->getStore()->isCurrentlySecure()) {
            $url = $this->_getCurrentUnsecureUrl($request);

            Mage::app()->getFrontController()->getResponse()
            ->setRedirect($url)
            ->sendResponse();
            exit;
        }
    }

    protected function _getCurrentUnsecureUrl($request) {
        if ($alias = $request->getAlias(Mage_Core_Model_Url_Rewrite::REWRITE_REQUEST_PATH_ALIAS)) {
            return Mage::getBaseUrl('link', false).ltrim($alias, '/');
        }

        return Mage::getBaseUrl('link', false).ltrim($request->getPathInfo(), '/');
    }
} 
```

不幸的是，没有观察到哪个事件解决了问题......但是覆盖路由器（更新）比（技术上）替换更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-06T23:48:34.630

上面的代码从请求中删除了查询字符串，这两个函数都应该更改为在重定向之前将其添加到请求中。

见下文：

```
$querystring = $_SERVER['QUERY_STRING'];

return Mage::getBaseUrl('link', false).ltrim($request->getPathInfo(), '/').($querystring ? '?'.$querystring : ''); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T05:56:54.317

如需更多知识，请参阅以下内容

检查如何解决自定义模块前端 url 被强制为 https 的问题。而不是http。如果您使用模块创建器创建模块。你肯定会在 config.xml 中找到下面的代码

```
<admin>
       <routers>
         <[ModuleName]>
            <use>admin</use>
            <args>
                <module>[NameSpace_ModuleName]</module>
                <frontName>[frontName]</frontName>
            </args>
        </[ModuleName]>
    </routers>
</admin> 
```

要解决重定向到 https 而不是 http 的问题，您需要从模块 config.xml 文件路径中注释上述代码：app/code/(codepool)/(NameSpace)/(ModuleName)/etc/config.xml 或者您可以添加和路由器的不同“frontName”。例如。：

```
<admin>
       <routers>
         <[ModuleName]>
            <use>admin</use>
            <args>
                <module>[NameSpace_ModuleName]</module>
                <frontName>[frontName]</frontName>
            </args>
        </[ModuleName]>
    </routers>
</admin>

<frontend>
       <routers>
         <[ModuleName]>
            <use>standard</use>
            <args>
                <module>[NameSpace_ModuleName]</module>
                <frontName>[frontName1]</frontName>
            </args>
        </[ModuleName]>
    </routers>
</frontend> 
```

根据上面的代码管理 url 将是[http://yourdomain.com/index.php/frontName/adminhtml_moduleName/](http://yourdomain.com/index.php/frontName/adminhtml_moduleName/)和前端 url 将像：[http://yourdomain.com/index.php/frontName1](http://yourdomain.com/index.php/frontName1)

希望以上内容对你有用。

# c# - Process.Start 在编译时 T4 文本模板转换期间忽略运行应用程序的命令

> ID：13399491
> 
> 赞同：1
> 
> 时间：2012-11-15T14:25:07.393
> 
> 标签：c#, t4

我正在尝试`svn info`从 T4 文本模板中的代码获取本地 svn HEAD 修订号执行命令。这是一段获取此命令结果的代码：

```
private string GetSvnInfo()
{
    var psi = new ProcessStartInfo(fileName: "cmd", arguments: "/c svn info -r HEAD")
    {
        RedirectStandardOutput = true,
        UseShellExecute = false,
        CreateNoWindow = true,
        WorkingDirectory = Host.ResolvePath(""),
    };
    var process = Process.Start(psi);

    var res = process.StandardOutput.ReadToEnd();
    process.WaitForExit(100);

    return res;
} 
```

当我运行此模板时，它工作正常。但是当它在构建期间自动执行时，该命令将被忽略。

我也尝试在那里开始`svn.exe`而不是作为参数`cmd`传递`info -r HEAD`，但后来我在 Process.Start() 上得到了 Win32Exception。这似乎是与权限相关的问题，但首先，我不确定，其次，在编译时 T4 文本模板转换期间我无法找到与权限相关的任何内容。

而且我还尝试了不同的应用程序，例如`sqlcmd`- 结果是一样的。

所以问题是 - 在编译时 T4 文本模板转换期间，我将如何让应用程序从 cmd 执行？任何帮助将不胜感激。

我在管理员权限下在 VS 11 中编译我的解决方案。

# php - 如何检查是否仅在段落中或段落末尾有img标签

> ID：13399492
> 
> 赞同：0
> 
> 时间：2012-11-15T14:25:10.273
> 
> 标签：php, regex, preg-match

如何检查是否仅在段落中或段落末尾有 img 标签？

```
$input = '<p><img src="#" /></p>'; // ok
$input = '<p><img src="#" /><img src="#" /></p>'; // ok
$input = '<p>xxx<img src="#" /></p>'; // ok

$input = '<p><img src="#" />xxx</p>'; // NOT ok

if(preg_match("/img/$", $input) { ... }; 
```

还有比`preg_match`and更好的方法`regex`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:31:23.223

您可以使用, 并检查节点[`DOMDocument`](http://php.net/domdocument)上是否有任何文本内容：`<p>`

```
$doc = new DOMDocument;
$doc->loadHTML( $input);

$p = $doc->getElementsByTagName('p')->item(0);
$children = $p->childNodes;

$img_found = false; $error = false;

foreach( $children as $child) {
    if( $child->nodeType == XML_TEXT_NODE && !$img_found) {
        // Text before the image, OK, continue on
        continue;
    }
    if( $child->nodeType == XML_ELEMENT_NODE) {
        // DOMElement node
        if( !($child->tagName == 'img')) {
            // echo "Invalid HTML element found";
            $error = true;
        } else {
            $img_found = true;
        }
    } else {
        // echo "Invalid node type!";
        $error = true;
    }
}

// No errors and we found at least one image, we're good
if( $img_found && !$error) {
    echo 'ok' . "\n";
} else {
    echo 'NOT ok' . "\n";
} 
```

您可以在[此演示](http://3v4l.org/r942U)中看到它通过了所有测试。它满足以下要求：

1.  `<p>`标签内只有图像和文本。任何其他标签均无效。如果这是不正确的，请根据您的需要进行修改。
2.  如果有文本，它必须在我们检测到`<img>`标签之前出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:31:54.050

试试这个正则表达式：

```
/<p[^>]*>.*<img[^>]*></p>/ 
```

说明：如果您想用正则表达式匹配具有未知属性的标签，您可以使用`<TAGNAME[^>]*>`. 该表达式`[^>]*`匹配除 之外的每个字符 0 次或 n 次`>`，因此接受任意数量的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:14:19.320

使用这个：

```
if (preg_match("/<img\s[^<>]*><\/p>/i", $input) { ... }; 
```

# php - Joomla：如何从自定义 Jtoolbar 按钮加载视图？

> ID：13399496
> 
> 赞同：1
> 
> 时间：2012-11-15T14:25:13.377
> 
> 标签：php, controller, joomla2.5, joomla-extensions, jtoolbar

我正在尝试在 Joomla 2.5 中创建自定义 Jtoolbar 按钮。我希望按钮的行为与内置的编辑按钮非常相似，除了我希望它被称为生成。该按钮应该加载一个生成视图（类似于单一的编辑视图）。它应该有表单字段供用户填写，然后单击提交/保存按钮，该按钮将运行 php 模块以使用计算值填充数据库。

我的谷歌搜索效率很低。到目前为止，我已经能够在 games/view.html.php 中创建按钮：

```
JToolBarHelper::custom('games.generate','extension', 'extension', 'generate', false); 
```

我相信这应该调用controller/games.php 中名为generate() 的控制器方法。

在控制器/games.php 中：

```
public function generate()
    {
        JRequest::setVar('view',  'schedule');
            Jcontroller::display();
    } 
```

经过一番折腾，这似乎是在加载视图和模板 tmpl/default.php。这似乎是错误的，但这是我得到的最远的，所以我将继续这样做，直到我弄明白为止。

原始问题：

如何让该控制器加载视图/表单/字段/模板，然后运行 ​​php 脚本来填充数据库。我可能只需要一个正确的方向来解决这个问题。似乎没有任何关于添加自定义按钮的完整教程/示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T12:19:38.610

几年前，它适用于 3.2，但我将它添加到我的控制器中以获得自定义视图。我需要一个名为插入的布局。我不知道为什么你不能做同样的事情来改变视图。

```
public function insert()
{
    $this->setRedirect(JRoute::_('index.php?option=com_mycomponent&view=date&layout=insert', false));
} 
```

从自定义 Jtoolbar 按钮以相同的方式调用它。它有效，但也许还有更好的方法。

# tfs-sdk - TFS SDK：获取子分支

> ID：13399500
> 
> 赞同：0
> 
> 时间：2012-11-15T14:25:28.063
> 
> 标签：tfs-sdk

我想要做的是获得可以合并到的可用分支。与您在 TFS2008 中说合并并选择目标分支时的下拉列表几乎相同。

但是，很难找到方法。

下面的代码是我在网络上找到的一些资源之间的合并，但似乎没有一个有效。我的猜测是，如果 VS2008 可以做到，我可以通过 SDK 做到，对吧？

下面的代码总是给我同样的结果。

我的存储库是这样的：

```
Development
  Version1
    Code
  Version2
    Code
  Version3
    Code
Main
  Code 
```

通常我会分支 Main > Version X。因此可以将 Main > Version X 和 Version X 合并到 Main。

下面的代码总是给我 Main 的孩子，即使我使用 Version3 文件夹查询 (tfsParentBranchPath)。

这是因为也许我使用了 TFS2010 Web 服务但指向 TFS2008（这就是为什么我标记了一些在代码中不起作用的方法）？

好吧，如果有人知道答案，请告诉我。

谢谢！

```
 public string[] GetChildBranchesToMerge(string tfsParentBranchPath)
    {
    var versionControl = teamFoundationServer.GetService<VersionControlServer>();

    //not supported by tfs2008
    //ItemIdentifier[] identifiers = versionControl.QueryMergeRelationships(tfsParentBranchPath);
    //var allBranches = versionControl.QueryBranchObjects(new ItemIdentifier(tfsParentBranchPath), RecursionType.OneLevel);

    List<string> childs = new List<string>();
    ItemSpec[] specs = new ItemSpec[] { new ItemSpec(tfsParentBranchPath, RecursionType.OneLevel) };
    BranchHistoryTreeItem[][] branchHistoryTree = versionControl.GetBranchHistory(specs, VersionSpec.Latest);

    if (branchHistoryTree.Length > 0 && branchHistoryTree[0].Length > 0)
    {
        var treeItem = branchHistoryTree[0][0];

        if (treeItem.Children.Count > 0)
        {
            foreach (BranchHistoryTreeItem tia in treeItem.Children)
            {
                childs.Add(tia.Relative.BranchToItem.ServerItem);
            }
        }
    }

    return childs.OrderBy((s) =>
    {
        return s;
    }).ToArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:25:51.740

最后，这是最后一个有效的版本！

首先，我停止使用 VS2010 程序集，现在它更快了。

其次，最大的区别是这一行：

```
var treeItem = branchHistoryTree[0][0].GetRequestedItem(); 
```

我真的不知道为什么会有区别，但似乎没有那个方法，返回的项目是一个通用的。

```
public string[] GetChildBranchesToMerge(string tfsParentBranchPath)
{
    DoLog("Getting child branches for {0} ...", tfsParentBranchPath);
    VersionControlServer vcs = (VersionControlServer)teamFoundationServer.GetService(typeof(VersionControlServer));

    List<string> childs = new List<string>();
    ItemSpec[] specs = new ItemSpec[] { new ItemSpec(tfsParentBranchPath, RecursionType.OneLevel) };
    BranchHistoryTreeItem[][] branchHistoryTree = vcs.GetBranchHistory(specs, VersionSpec.Latest);

    if (branchHistoryTree.Length > 0 && branchHistoryTree[0].Length > 0)
    {
        var treeItem = branchHistoryTree[0][0].GetRequestedItem();
        AddChildBranch(childs, treeItem, tfsParentBranchPath);

        if (treeItem.Children != null && treeItem.Children.Count > 0)
        {
            foreach (BranchHistoryTreeItem tia in treeItem.Children)
            {
                AddChildBranch(childs, tia, tfsParentBranchPath);
            }
        }
    }

    DoLog("{0} child branches found", childs.Count);

    return childs.OrderBy((s) =>
    {
        return s;
    }).ToArray();
}

private void AddChildBranch(List<string> list, BranchHistoryTreeItem itemToCheck, string tfsParentBranchPath)
{
    if (itemToCheck.Relative.BranchFromItem != null && itemToCheck.Relative.BranchFromItem.DeletionId == 0 && itemToCheck.Relative.BranchFromItem.ServerItem != tfsParentBranchPath)
        list.Add(itemToCheck.Relative.BranchFromItem.ServerItem);

    if (itemToCheck.Relative.BranchToItem != null && itemToCheck.Relative.BranchToItem.DeletionId == 0 && itemToCheck.Relative.BranchToItem.ServerItem != tfsParentBranchPath)
        list.Add(itemToCheck.Relative.BranchToItem.ServerItem);
} 
```

# php - 从动态下拉列表中选择的国家/地区

> ID：13399501
> 
> 赞同：0
> 
> 时间：2012-11-15T14:25:30.263
> 
> 标签：php, javascript, jquery

我在我的代码上使用这个国家/州动态选择：

[http://bdhacker.wordpress.com/2009/11/21/adding-dropdown-country-state-list-dynamically-into-your-html-form-b​​y-javascript/](http://bdhacker.wordpress.com/2009/11/21/adding-dropdown-country-state-list-dynamically-into-your-html-form-by-javascript/)

这是演示页面： [http ://bdhacker.sourceforge.net/javascript/countries/](http://bdhacker.sourceforge.net/javascript/countries/)

但是，不幸的是，当我创建设置/成员个人资料页面时，我需要显示选定的国家和州，以便用户可以看到他们已经选择的内容，我不能只将用户选择的内容作为“价值”放在上面。

这是我在页面源代码上看到的内容，即使我选择了一个国家和一个州：

```
Select Country: <select onchange="print_state('state',this.selectedIndex);" id="country" name ="country"></select>

City/District/State: <select name ="state" id ="state"></select> 
```

如何评价它？因为我确实喜欢这样：

```
Select Country:   
<select onchange="print_state('state',this.selectedIndex);" id="country" name ="country" value="Indonesia"></select>

City/District/State: <select name ="state" id ="state"></select> 
```

我仍然没有看到有一个国家被选中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:25:23.090

试试这个解决方案[http://jsfiddle.net/yDAmR/](http://jsfiddle.net/yDAmR/)

```
print_country("country");
$('#country').val('Indonesia');
print_state('state',$('#country')[0].selectedIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T04:20:06.000

您看到其他国家/地区的美国州的原因是 JavaScript 缺少州下拉列表的重置。在拆分列表数组之前，只需在 JS 文件中添加“option_str.length=0; // 清除列表”。

# javascript - 客户端等高线图

> ID：13399506
> 
> 赞同：3
> 
> 时间：2012-11-15T14:25:36.847
> 
> 标签：javascript, html, charts, client-side, contour

有谁知道我可以在浏览器中使用来处理等高线图的好资源。我已经在使用[Highcharts](http://www.highcharts.com)并查看了[dojo 的 dojox/charting](http://dojotoolkit.org/reference-guide/1.8/dojox/charting.html#dojox-charting)，两者都很出色，但不要给我一个开箱即用的等高线绘图解决方案。其他如[flot](http://www.flotcharts.org)也有类似的限制。

我主要专注于 JavaScript，并且正在避免使用 Flash 或类似插件，但我对其他选项持开放态度。我宁愿不在服务器上创建图像、svg 等，然后在客户端中使用它们。

我的主要目的是让用户与等高线图进行一些交互，例如可点击区域和动态数据绑定，否则我可能会选择服务器端方法。

我也一直在避免使用 3D 选项，因为这不符合我对数据可视化的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:47:32.433

D3 允许制作某种等高线图：[http ://bl.ocks.org/4241134](http://bl.ocks.org/4241134)

# jquery - 如何从 Jquery Selector 中排除要解析的部分 DOM

> ID：13399510
> 
> 赞同：0
> 
> 时间：2012-11-15T14:25:41.007
> 
> 标签：jquery, jquery-selectors

我希望我的页面的一部分不被 jQuery 选择器解析。

在下面的示例中，有没有一种方法可以获取所有“.module”元素，但排除 div 下具有“exclude”类的元素？

此外，我们可以用 Jquery 做一些类似“请不要解析这个区域”的事情。例如，我有一个页面有一个 div(#huge) 和一个巨大的 html 内容，有没有办法让 Jquery 忽略这个 div(#huge) ？

例如，我有这样的结构：

```
<div id="page">
  <div class="exclude">
    <div class="module"></div>
    <!-- HERE HUGE HTML -->
  </div>
  <div>
    <div class="module"></div>
    <div class="module"></div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:28:01.867

```
$modules = $('div:not(".exclude") > .module'); 
```

[http://api.jquery.com/not-selector](http://api.jquery.com/not-selector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:32:33.947

在您的确切情况下，关键是只查看正确的 div。

您将从制作可搜索的集合开始

```
var $good = $('#page>div:not(.exclude)'); 
```

您的所有查询都将构建为`$(yourquery, $good)`：

```
var $mymodules = $('.module', $good); 
```

[演示（打开控制台）](http://jsfiddle.net/dystroy/phtkx/)

请注意，当通过 id 查找元素时，使用它仍然`$('#theid')`比使用`$('#theid', $good)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:32:07.323

```
$modulesNotTheHugeOne = $(".module").not("#huge"); 
```

选择所有有类`module`但不选择有 id 的`huge`

[http://api.jquery.com/not/](http://api.jquery.com/not/)

# java - 如何使用 Java 中具有指定复杂程度的方法的测试来检查代码覆盖率

> ID：13399514
> 
> 赞同：9
> 
> 时间：2012-11-15T14:26:02.137
> 
> 标签：java, unit-testing, code-coverage

我希望能够检查我的方法的测试覆盖率，这些方法的复杂性高于某个给定水平。
是否有适用于 Eclipse、Sonar、Hudson 的插件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:41:57.787

我找到了更简单的解决方案。我可以在 SONAR [http://docs.codehaus.org/display/SONAR/Filters](http://docs.codehaus.org/display/SONAR/Filters)中使用过滤器，其中可以使用给定的指标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:28:35.960

为了获得良好的代码覆盖率，您应该查看此工具。它适用于 Eclipse。

[艾玛代码覆盖率](http://emma.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:30:46.343

[http://eclipse-metrics.sourceforge.net/](http://eclipse-metrics.sourceforge.net/)

用于测量复杂性的 Eclipse Metrics 插件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:42:51.167

如前所述， [Cobertura](http://cobertura.sourceforge.net/)是一种测量代码覆盖率的工具。它还测量复杂性（参见[示例报告](http://cobertura.sourceforge.net/sample/)）。因此，您可以尝试转换它的[xml 输出](http://mojo.codehaus.org/cobertura-maven-plugin/cobertura-mojo.html#format)，使其仅显示超过给定复杂度阈值的方法的覆盖范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:44:32.980

Emma 代码覆盖率也可以通过 ant 用于代码覆盖自动化。

# java - 关闭 Tomcat 服务器时 Spring 集成异常

> ID：13399515
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:26:05.770
> 
> 标签：java, jms, spring-integration

我有一个在 Tomcat 6 上运行的 Spring Integration 应用程序。它有一个`message-driven-channel-adapter`并与远程 Active MQ 服务器通信。到目前为止，我能够完成我的工作。

但是，当我关闭 Tomcat 时，我在 catalina 日志中不断循环出现以下异常：

```
Exception in thread   "org.springframework.jms.listener.DefaultMessageListenerContainer#0-178" Exception in thread "org.springframework.jms.listener.DefaultMessageListenerContainer#0-179" 

 java.lang.NullPointerException
    at org.apache.log4j.LogManager.getLogger(LogManager.java:188)
    at org.apache.log4j.Logger.getLogger(Logger.java:104)
    at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
    at org.apache.commons.logging.impl.Log4JLogger.trace(Log4JLogger.java:166)
    at org.springframework.jms.support.JmsUtils.closeMessageConsumer(JmsUtils.java:158)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.clearResources(DefaultMessageListenerContainer.java:1111)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:971)
    at java.lang.Thread.run(Thread.java:722)

java.lang.NullPointerException
    at org.apache.log4j.LogManager.getLogger(LogManager.java:188)
    at org.apache.log4j.Logger.getLogger(Logger.java:104)
    at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
    at org.apache.commons.logging.impl.Log4JLogger.trace(Log4JLogger.java:166)
    at org.springframework.jms.support.JmsUtils.closeSession(JmsUtils.java:115)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.clearResources(DefaultMessageListenerContainer.java:1112)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:971)
    at java.lang.Thread.run(Thread.java:722)
Nov 13, 2012 7:23:37 PM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load org.apache.log4j.spi.VectorWriter.  The eventual following stack trace is ca
used by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1273)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)
    at org.apache.log4j.Category.forcedLog(Category.java:388)
    at org.apache.log4j.Category.log(Category.java:853)
    at org.apache.commons.logging.impl.Log4JLogger.warn(Log4JLogger.java:234)
    at org.springframework.jms.listener.DefaultMessageListenerContainer.handleListenerSetupFailure(DefaultMessageListenerContainer.java:831)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:981)
    at java.lang.Thread.run(Thread.java:722) 
```

你们对此有什么想法吗？在关闭 Tomcat 之前是否需要关闭或销毁 Spring 上下文？

感谢你的帮助

谢谢，凯思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T06:43:20.043

好吧，看起来你是对的：

> 在关闭 Tomcat 之前是否需要关闭或销毁 Spring 上下文？

从 Spring JSM 源代码来看，您的 Tomcat 似乎更早地关闭了它的**log4j.LogManager**，然后 Spring 停止了它的上下文。

# visual-studio - 是否有一个插件来获得更好的代码格式？

> ID：13399520
> 
> 赞同：0
> 
> 时间：2012-11-15T14:26:24.187
> 
> 标签：visual-studio, coding-style, ide

我多年来一直使用横幅样式缩进方案（http://en.wikipedia.org/wiki/Indent_style），但是 Microsoft Visual Studio 的最后两个版本不再正确处理这个问题，我整天都不得不这样做手动重新格式化代码，这是一个巨大的痛苦。

有谁知道在 Visual Studio 中是否有支持横幅样式缩进的附加工具？

或者也许你找到了一种方法来欺骗 VS 正确处理横幅样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:35:07.277

当然。Resharper 可以处理这个问题。

Resharper 具有[“代码清理”](http://www.jetbrains.com/resharper/features/code_formatting.html)功能，可以根据您的[缩进偏好](http://www.jetbrains.com/resharper/features/code_formatting.html#Code_Style_Configuration_and_Sharing)重新格式化您的整个代码库。

# c++ - 为什么这个 boost::spirit::qi 规则与输入不匹配？

> ID：13399521
> 
> 赞同：6
> 
> 时间：2012-11-15T14:26:25.863
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi, boost-spirit-lex

我尝试继续处理我之前的示例并扩展规则。我的问题是，使用 ID_IDENTIFIER 的规则不起作用——尽管我知道词法分析器正在工作（使用单元测试）。

这是示例：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>

namespace qi  = boost::spirit::qi;
namespace lex = boost::spirit::lex;

enum LexerIDs { ID_IDENTIFIER, ID_WHITESPACE, ID_INTEGER, ID_FLOAT, ID_PUNCTUATOR };

template <typename Lexer>
struct custom_lexer : lex::lexer<Lexer>
{
    custom_lexer()
        : identifier    ("[a-zA-Z_][a-zA-Z0-9_]*")
        , white_space   ("[ \\t\\n]+")
        , integer_value ("[1-9][0-9]*")
        , hex_value     ("0[xX][0-9a-fA-F]+")
        , float_value   ("[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?")
        , float_value2  ("[0-9]+\\.([eE][+-]?[0-9]+)?")
        , punctuator    ("\\[|\\]|\\(|\\)|\\.|&>|\\*\\*|\\*|\\+|-|~|!|\\/|%|<<|>>|<|>|<=|>=|==|!=|\\^|&|\\||\\^\\^|&&|\\|\\||\\?|:|,")// [ ] ( ) . &> ** * + - ~ ! / % << >> < > <= >= == != ^ & | ^^ && || ? : ,
    {
        using boost::spirit::lex::_start;
        using boost::spirit::lex::_end;

        this->self.add
            (identifier   , ID_IDENTIFIER)
            /*(white_space  , ID_WHITESPACE)*/
            (integer_value, ID_INTEGER)
            (hex_value    , ID_INTEGER)
            (float_value  , ID_FLOAT)
            (float_value2 , ID_FLOAT)
            (punctuator   , ID_PUNCTUATOR);

        this->self("WS") = white_space;
    }
    lex::token_def<std::string> identifier;
    lex::token_def<lex::omit>   white_space;
    lex::token_def<int>         integer_value;
    lex::token_def<int>         hex_value;
    lex::token_def<double>      float_value;
    lex::token_def<double>      float_value2;
    lex::token_def<>            punctuator;
};

template< typename Iterator, typename Skipper>
struct custom_grammar : qi::grammar<Iterator, Skipper>
{

    template< typename TokenDef >
    custom_grammar(const TokenDef& tok) : custom_grammar::base_type(ges)
    {
        ges = qi::token(ID_IDENTIFIER);
        BOOST_SPIRIT_DEBUG_NODE(ges);
    }
    qi::rule<Iterator, Skipper > ges;
};

int main(int argc, _TCHAR* argv[])
{
    std::string test("testidentifier");

    typedef char const* Iterator;
    typedef lex::lexertl::token<Iterator, lex::omit, boost::mpl::true_> token_type;
    typedef lex::lexertl::lexer<token_type> lexer_type;
    typedef qi::in_state_skipper<custom_lexer<lexer_type>::lexer_def> skipper_type;

    typedef custom_lexer<lexer_type>::iterator_type iterator_type;

    custom_lexer<lexer_type> my_lexer; 
    custom_grammar<iterator_type, skipper_type> my_grammar(my_lexer);

    Iterator first = test.c_str();
    Iterator last = &first[test.size()];

    bool r = lex::tokenize_and_phrase_parse(first,last,my_lexer,my_grammar,qi::in_state( "WS" )[ my_lexer.self ]);

    std::cout << std::boolalpha << r << "\n";
    std::cout << "Remaining unparsed: '" << std::string(first,last) << "'\n";
    return 0;
} 
```

ID_INTEGER 的类似规则匹配“1234”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:18:37.453

问题在于您在枚举中定义令牌 ID 的方式。如果以这种方式执行此操作，则会`ID_IDENTIFIER`得到 0 值，这不是有效的 lex 令牌 ID。幸运的是 Spirit.Lex 定义了一个值`boost::spirit::lex::min_token_id`，您可以使用它来确保您获得有效的令牌。使用这个你的枚举将是：

```
enum LexerIDs { ID_IDENTIFIER=boost::spirit::lex::min_token_id+1, ID_WHITESPACE, ID_INTEGER, ID_FLOAT, ID_PUNCTUATOR }; 
```

# c# - C# 有没有类似于 JavaScript 的操作 || 二传手？

> ID：13399523
> 
> 赞同：2
> 
> 时间：2012-11-15T14:26:33.177
> 
> 标签：c#, javascript, language-features, null-check

C# 和 JavaScript 的 || 有类似的操作吗？二传手？

例如，在 JavaScript 中，如果我想检查一个值是否为 null 并设置一个默认值，我可以这样做：

```
function foo(val){
    this.name = val || "foo";
} 
```

但是，当我想要 C# 中的这个功能时，我必须走这条路：

```
public Foo(string val)
{
    this.name = (string.IsNullOrEmpty(val) ? "foo" : val);
} 
```

我知道这是小事，乞丐不能成为选择者，但如果可能的话，我想避免得到任何涉及疯狂黑客或扩展方法的答案。我可以使用三元运算符，但我只是好奇是否有我错过的语言功能。

更新：

到处都是很好的答案，但是 J0HN 和 Anton 打了它的头。C# 不会像上面示例中的 JavaScript 那样执行“虚假”值，因此`??`运算符不考虑空字符串。

感谢您的宝贵时间和出色的回应！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:28:03.357

C# 中有一个[null-coalescing 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)，尽管它不能处理 JavaScript 的所有怪癖：

```
this.name = val ?? "foo"; 
```

由于 JavaScript 中存在空字符串`false`，因此该 C# 代码的行为与其对应的 JS 代码不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:28:00.877

您可以使用`??`：

```
private int Foo(string val){
    this.name = val ?? "foo";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T14:28:28.300

和这个一起去

```
this.name = val ?? "foo"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T14:29:12.183

有一个运算符与 SQL中的`??`运算符基本相同：`COALESCE`

```
int? a = null; //int? - nullable int
int q = a??1; // q is set to one; 
```

但是，`??`它不检查字符串是否为空，因此它与 javascript 的含义不同`||`，后者也将空字符串视为 false。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T14:28:35.617

是的，使用??：

```
 private int Foo(string val){
        this.name = val ?? "foo";
    } 
```

查看 Msdn 了解更多信息：[?? 操作员](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

# javascript - 谷歌地图标记上的复选框

> ID：13399524
> 
> 赞同：0
> 
> 时间：2012-11-15T14:26:38.077
> 
> 标签：javascript, google-maps, google-maps-api-3

谷歌地图标记上是否可以有复选框？因此用户可以检查一些标记，然后显示检查地点的详细信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:43:14.233

您可以像这样切换图像：

```
marker = new google.maps.Marker({
  map:map,
  icon: blueIcon,
  draggable:true,
  animation: google.maps.Animation.DROP,
  position: parliament
});
google.maps.event.addListener(marker, 'click', changeIcon);

  function changeIcon() {
    if (marker.icon != redIcon) {
      marker.setIcon(redIcon);
    } else {
      marker.setIcon(blueIcon);
    }
  } 
```

小提琴：http: [//jsfiddle.net/Mxwxt/7/](http://jsfiddle.net/Mxwxt/7/)

另一种方法是创建一个可以包含标记的自定义覆盖

# testing - 测试场景和测试用例有什么区别？

> ID：13399528
> 
> 赞同：6
> 
> 时间：2012-11-15T14:26:46.407
> 
> 标签：testing

我对测试场景和测试用例有点困惑。它们之间有什么区别？

假设我必须测试一盒火柴。我是否正确地说以下可以是测试场景的示例？

*   盒子能容纳 x 个匹配项吗？
*   假设盒子是关闭的，我用力摇晃它。火柴还在盒子里吗？

你能给我一些测试场景和测试用例的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T14:31:58.557

例子：

您正在测试您的手机：

场景：如果用户创建新配置文件，验证设备是否自动连接到 Wi-Fi

```
Test cases:
           case 1: create Wi-Fi profile and verify that it created successfully
           case 2: verify that device succeeded to connect to Wi-Fi 
```

在此示例中，您有一个包含 2 个测试用例的测试场景。因为第一个是指*先决条件*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T08:27:52.773

测试用例由一组输入值、执行前提条件、异常结果和执行后置条件组成，为覆盖特定测试条件而开发。虽然测试场景不过是测试过程。一个测试场景与测试用例有一对多的关系，意味着一个场景有多个测试用例。每次我们为测试场景编写测试用例。因此，在开始测试时，首先准备测试场景，然后为每个场景创建不同的 2 个测试用例。测试用例从测试场景派生（或编写）。场景源自用例。测试场景代表一系列关联在一起的动作。而测试用例代表用户的单个（低级别）操作。场景是操作线程，其中测试用例是给系统的一组输入和输出。例如：

检查登录按钮的功能是测试场景，该测试场景的测试用例是： 1\. 点击按钮，无需输入用户名和密码。2\. 单击仅输入用户名的按钮。3\. 输入错误的用户名和密码时点击按钮。等等……</p>

测试场景是“要测试什么”，测试用例是“如何测试”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T06:47:50.587

测试用例是您可以详细描述的东西。

假设**测试场景**是“登录页面”。

鉴于此测试场景，**测试用例**可能与登录页面及其属性有关：

1.  验证 URL 以显示登录页面

2.  验证登录页面上的用户名和密码文本框输入字段

3.  当用户名已定义但密码为空且用户单击登录按钮时验证警报消息

4.  当用户名未定义但密码存在时验证警报消息，并且用户单击登录按钮

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-04T11:52:12.183

一般来说，**测试用例**意味着*测试是怎样的*以及**测试场景** *要测试什么*。

以下是关于 ATM 机的示例。

### 测试用例

*   插入一张有效的提款卡
*   输入您的密码
*   然后显示应该显示“提款”，“检查余额”等选项。
*   选择需要的选项
*   最后，机器应该打印一张带有详细信息的纸

### 测试场景

*   插入提款卡

*   输入您的密码

*   选择一个选项

*   输入金额

*   提款

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-17T14:49:27.170

简单来说，测试场景提供并概述了在哪些条件下需要测试的内容。而测试用例概述了如何通过更改前提条件和所需变量来测试该条件的正面和负面结果。因此，1 个场景可以有 1....1* 个测试用例关系。

例如，

Senario 1 - 用户使用 Web URL 连接到网站，并在作为第一页成功登录后访问他的个人资料。

测试用例 仅使用用户名登录 仅使用密码登录 使用用户名和密码登录 使用错误用户名和密码登录 登录后查看用户配置文件 登录后查看用户历史订单的能力

我希望这更有意义。如果您确实需要更多示例，请告诉我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-24T19:43:22.260

## 测试场景

> 验证登录页面

### 测试用例

1.  输入有效的用户名和密码
2.  重置你的密码
3.  输入无效凭据

# ruby - 如何用来自另一个散列的值数组填充散列？

> ID：13399532
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:26:52.890
> 
> 标签：ruby, arrays, hash, key-value

为清楚起见，编辑第二版：

我有以下哈希：

样本输入->

```
hashweek={[43,2011]=>[0,0,0],[44,2011]=>[0,0,0],**[45,2011]=>[0,0,0]**,[1,2012]=>[0,0,0],[2,2012]=>[0,0,0]}
timesRealCum={[43,2011]=>1000,[44,2011]=>1100,[1,2012]=>1200,[2,2012]=>1300} 
```

预期输出->

```
hashweek={[43,2011]=>[1000,0,0],[44,2011]=>[1100,0,0],**[45,2011]=>[1100,0,0]**,[1,2012]=>[1200,0,0],[2,2012]=>[1300,0,0]} 
```

假装的是，在迭代 timesRealCum 或 hashweek 或任何适当的方法时，hashweek[0] 值应更新以包含来自 timesRealCum 的相应值，或者如果未出现在 timesRealCum 哈希中，则为最后一个重要值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:01:01.467

好的，这应该足够了：

```
timesRealCum.each{|k, v| hashweek[k][0] = v} 
```

没有对 nil 值的测试，因此如果您希望在 hashweek 中缺少键，则必须测试是否`hashweek[k]`存在并且`hashweek[k][0]` ：

```
timesRealCum.each{|k, v| hashweek[k][0] = v if hashweek[k] && hashweek[k][0]} 
```

编辑：所以如果我理解正确，如果timesRealCum 中没有条目，你想在hashweek 循环时取最后一个分配的值？

```
last_v = 0
hashweek.each{|k, v| last_v = v[0] = timesRealCum[k] || last_v } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:50:53.613

现在，如果 timesRealCum 不包含周和年，下面的这个使用注入来保持累积值。现在它为 [45, 2011] 返回 [1100, 0, 0]。

```
hashweek.inject(0) do |mem, kv_pair|
  hashweek[kv_pair.first] = [timesRealCum[kv_pair.first]||mem, kv_pair.last[1..-1]].flatten
  mem = hashweek[kv_pair.first][0]
end

p hashweek
#=> {[43, 2011]=>[1000, 0, 0], [44, 2011]=>[1100, 0, 0], [45, 2011]=>[1100, 0, 0], [1, 2012]=>[1200, 0, 0], [2, 2012]=>[1300, 0, 0]} 
```

# php - PHP数组重命名动态数组键

> ID：13399533
> 
> 赞同：0
> 
> 时间：2012-11-15T14:26:54.453
> 
> 标签：php, arrays

我需要重命名动态数组键，并创建一个新数组。这是给定的数组：

```
array(21)
{
    ["0161"] =>
    array(5)
    {
        ["L_NAME0161"] =>
        string(13) "john%20Hewett"
        ["L_TRANSACTIONID0161"] =>
        string(17) "50350073XN1446019"
        ["L_AMT0161"] =>
        string(6) "8%2e50"
        ["L_FEEAMT0161"] =>
        string(9) "%2d0%2e55"
        ["L_NETAMT0161"] =>
        string(6) "7%2e95"
    }
    ["08591"] =>
    array(5)
    {
        ["L_NAME08591"] =>
        string(18) "Norbert%20Bendixen"
        ["L_TRANSACTIONID08591"] =>
        string(17) "1WN98871MS4263823"
        ["L_AMT08591"] =>
        string(6) "8%2e50"
        ["L_FEEAMT08591"] =>
        string(9) "%2d0%2e55"
        ["L_NETAMT08591"] =>
        string(6) "7%2e95"
    }
} 
```

这是我正在使用的代码，它对我不起作用：

```
foreach ($reb AS $newrebarray)
{
    foreach ($newrebarray as $ke => $val)
    {

        if (preg_match("/L_NETAMT/i", $ke))
        {
            $newarrayreb1 = array('Net' => $val);
        }
        if (preg_match("/L_TRANSACTIONID/i", $ke))
        {
            $newarrayreb1 = array('TransactID' => $val);
        }
        if (preg_match("/L_NAME/i", $ke))
        {
            $newarrayreb1 = array('Name' => $val);
        }
    }
} 
```

请注意，数组键是动态的，我想用静态键和相关值创建一个新数组。当我运行代码时，我得到了五个不同的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:51:41.077

首先，我将定义一个基于正则表达式的捕获内存段进行替换的函数：

```
function do_translate($match)
{
    switch ($match[1]) {
        case 'L_NAME':
            return 'Name';

        case 'L_NETAMT':
            return 'Net';

        case 'L_TRANSACTIONID':
            return 'TransactID';
    }
    // in all other cases, return the full match
    return $match[0];
} 
```

然后遍历块，通过转换传递发送数组键，然后将新键与现有值重新组合：

```
foreach ($reb as $id => $data) {
        $new_keys = preg_replace_callback('/^(L_[A-Z]+)' . preg_quote($id) . '$/i', 'do_translate', array_keys($data));
        // create the new array with translated keys
        $reb[$id] = array_combine($new_keys, $data);
} 
```

*我注意到数组键是字段和产品 id 的组合（我猜），所以我用这些知识来加强正则表达式*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:41:10.220

未经测试，尚未完全唤醒，所以这可能会踢你的狗并删除你所有的保存游戏：

```
$translations = array(
    'L_TRANSACTIONID' => 'Translation',
    'L_NAME' => 'Name',
    'L_NETAMT' => 'Net'
);

foreach($array as $parentkey => $subarray) {
    foreach($subarray as $subkey => $val) {
       if (preg_match('/^(L_.*?)\d*$/', $matches)) {
           $newKey = $translations[$matches[1]];
           $array[$parentkey][$newkey] = $val;
           unset($array[$parentkey][$subkey]);
       }
    }
} 
```

# azure - 访问 Azure 存储 Blob 作为文件系统

> ID：13399534
> 
> 赞同：3
> 
> 时间：2012-11-15T14:26:56.607
> 
> 标签：azure, azure-blob-storage

我们在 Windows Azure 上有一个 Worker 角色，它运行 ffmpeg 以使用[MediaHandler Pro](http://www.mediasoftpro.com/media-handler-pro.html)转换媒体文件。我们喜欢处理的文件保存在 blob 存储中，生成的文件也应该存储在那里。

我们的问题是 ffmpeg 适用于本地文件，而不适用于 blob 存储中的 URI。有没有办法挂载 blob 存储容器并直接作为文件系统访问那里的文件？

如果这是不可能的，可以将文件（它们可能非常大，可能 1-2Gb）下载到本地文件系统*，在那里处理它们然后上传它们。这听起来像是多余的。

*) 我们设置了一个 CloudDrive，可以将此 blob 下载到虚拟磁盘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:35:58.480

您有几种方法可以做到这一点 - 您可以创建一个云驱动器（VHD 作为页面 blob 上传）并安装它，或者您可以在本地下载源文件并在暂存（本地临时）磁盘上工作。在这两种选择中，我会在本地下载并使用暂存盘。

如果您要使用云驱动器，则会出现 3 个主要问题 - 第一个是它是 VHD，您必须挂载它才能获取文件。第二个是RW只能挂载1个实例，因此您不能将编码源文件的工作拆分为多个工作人员保存到同一驱动器。第三个问题是它是所有存储选项中最慢的。对于编码，可能不是一个很好的选择。

您最好的选择是将源文件从 blob 存储（非常快，顺便说一句）下载到“本地资源”（又名暂存盘）并从那里工作。将生成的文件上传到 Blob 存储中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-28T14:57:59.543

如果您的系统支持 SAMBA 3.0，您可以使用现在可用的文件共享功能简单地将 Azure 存储 Blob 容器映射为驱动器。

# c++ - C++ 事件系统 - 使用基于堆或堆栈的事件

> ID：13399535
> 
> 赞同：3
> 
> 时间：2012-11-15T14:26:57.180
> 
> 标签：c++, design-patterns, event-handling

我正在尝试设计一个简单的事件系统，“基本上”看起来像这样：

*   *观察者*实体保留所有需要通知的对象的列表。它还存储触发事件的队列。事件然后由对象列表处理，遍历该对象列表。
*   *一个对象*保存一个它发送事件的观察者列表。从基础对象继承的每个特定对象都可以触发其自己的专用事件（键、鼠标、碰撞等）。该对象还有一个`HandleEvent(..)`用于编译时类型检测的具有不同重载的方法，而不是使用`dynamic_casting`.

触发事件时最好选择什么：在堆栈上创建它们并通过引用传递它们，或者在堆上动态分配它们并使用 dynamic_casting 并让观察者在它们被可以处理它们的对象处理时释放它们? （例如，当一个事件可以经常被触发时，动态分配是不是不必要的；动态转换呢，不是可以避免的吗？）。

此外，这不是一个线程安全的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:32:37.820

你需要动态分配吗？不。通常，您想要

```
void fireEvent()
{
    Event ev;
    for ( each observer )
       observer.trigger(ev);
} 
```

以及观察者的签名

```
void trigger(const Event& ev); 
```

请注意，从迂腐的角度来说，“传递对它们的引用”是不正确的。它实际上是“通过引用传递它们”。

# asp.net-mvc - MvcSiteMap：未到达动态节点提供程序

> ID：13399537
> 
> 赞同：4
> 
> 时间：2012-11-15T14:27:06.807
> 
> 标签：asp.net-mvc, mvcsitemapprovider, asp.net-mvc-sitemap

我创建了一个使用属性定义节点的项目，并将其设置在*web.config*中以扫描属性，它工作正常。
我根本不使用 XML 文件。

现在我想添加一个动态节点提供程序，我该怎么做？
有没有办法在没有 XML ( *.sitemap* ) 文件的情况下做到这一点？
我需要确保它位于根目录下，该根目录已使用`MvcSiteMapNodeAttribute`属性在代码中设置。

我已经阅读了[文档](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps)，但我真的不知道在哪里放置这一行：

```
<mvcSiteMapNode
  title="Details" action="Details"              
  dynamicNodeProvider="Project.StoreDetailsDynamicNodeProvider, Prject" /> 
```

它应该指向什么动作？此外，如上所述，根元素是使用属性定义的，所以我的问题是是否有办法避免使用 XML，或者声明 XML 的有效方法（越少越好）以包含我的动态提供程序。

## 更新

我已经尝试了以下方法，但仍未到达节点提供程序（*From HomeController.cs*）。

```
[MvcSiteMapNode(Title = "Home", Key = HomeMenuKey,
  DynamicNodeProvider = "Project.Namespace.NodeProvider, Assembly")]
public ActionResult Index()
{
  return View();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:56:14.680

您可以在控制器方法属性中定义它（根本不使用 XML）吗？

例如：

```
[MvcSiteMapNode(Title="Details", 
  DynamicNodeProvider = "Project.StoreDetailsDynamicNodeProvider, Project")]
public ActionResult Index()
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:52:12.303

1.  似乎该`dynamicNodeProvider`属性在根节点中被忽略，当它在属性中定义时也是如此。
    因此，在根目录下添加动态节点提供程序的唯一方法是通过在虚拟操作等上指定它或使用 XML。
2.  一个有趣的说明：在 XML 中定义和属性之间的实际区别在于，如果它在属性中定义，它（即 gen.menu 项）将在菜单中的最后一个，而在 XML 中定义时，它将在根项之后（我猜那是 Home），请注意，这仍然可以通过`Order`属性中的属性进行控制。
3.  在我的 Web.Config 中，我留下了`siteMapFile`空白，依赖于它在[wiki](http://goo.gl/uLpVz)页面中所说的，默认值是`~/Web.sitemap`，实际上这是错误的（我已经在更新的[wiki](http://goo.gl/0PKIf)中更正了它）。
    我不认为这种行为应该是这样的，我认为 MvcSiteMap 引擎应该像扫描动态节点属性一样扫描动态节点提供程序（[这是](http://goo.gl/uWhnx)我在网站上发布的问题）。

# iphone - 通过iPhone中的网络服务上传pdf文件（从文档目录）？

> ID：13399542
> 
> 赞同：1
> 
> 时间：2012-11-15T14:27:25.253
> 
> 标签：iphone, ios, pdf, upload

我在 iPhone 应用程序中工作，通过 Web 服务从文档目录上传 pdf 文件，例如“http://www.publigeee.com/index.php?q=api/upload&uid=1&title=Sample&file=在此处上传 Pdf 文件”，如何要做到这一点？请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:54:00.383

我几天前才做的。此代码使用 AFNetworking：[https ://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

iPhone端的代码（它上传一个pdf和另一个文本参数，项目）

```
NSData *itemData = [NSData dataWithContentsOfFile:filePath]; // filePath is the path of your PDF. This is an NSData containing your pdf file
NSString *itemValue = @"A Text Item"; // another text item to upload if you need, like a description ecc...

NSString *uploadURL = @"http://www.baseurl.it/";    // this is your upload url, the main site where you have your php file to receive the data
NSURL *url = [[NSURL alloc]initWithString:uploadURL];
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
NSDictionary *dict = [NSDictionary
                      dictionaryWithObjects:@[itemValue]
                      forKeys:@[@"item"]];

// @"path/to/page.php" is the path to your php page receiving data
NSURLRequest *request = [httpClient multipartFormRequestWithMethod: @"POST"
                     path:@"path/to/page.php"
               parameters:dict
constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
        if (itemData)
        {
            [formData appendPartWithFileData:itemData
                                        name:@"pdfData"
                                    fileName:@"pdfData.pdf"
                                    mimeType:@"application/pdf"];
        }
}];

// sorry for the formatting here, is a long method using blocks
AFJSONRequestOperation *json = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                    success: ^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                           NSLog(@"Upload Success");
                    }
                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                           NSLog(@"Error: %@", error.description);
                    }];
[json start]; 
```

在 PHP 方面：

```
// file upload
try {
    $fileName = $_FILES['pdfData']['name'];
    $tmpName  = $_FILES['pdfData']['tmp_name'];
    $fileSize = $_FILES['pdfData']['size'];
    $fileType = $_FILES['pdfData']['type'];

    $fp      = fopen($tmpName, 'r');
    $content = fread($fp, filesize($tmpName));
    $content = addslashes($content);
    fclose($fp);

    if(!get_magic_quotes_gpc())
    {
        $fileName = addslashes($fileName);
    }

} catch (Exception $e) {
    echo json_encode("Error:".$e);
}

// $content contains your pdf and you can save it wherever you want 
```

不确定它是否没有错误，因为它取自更长的源，所以我修改了一些代码，但这是一个好的开始

# mysql - 为每个客户选择最后一个按时间顺序排列的记录，其中每个客户在许多日期都有许多记录

> ID：13399543
> 
> 赞同：2
> 
> 时间：2012-11-15T14:27:33.263
> 
> 标签：mysql, where

我正在尝试从 MySQL 数据库中获取每个成员的最新事务，其中每个成员可能有不同数量的事务记录。我还必须将事务表链接到客户表以确保我没有得到任何特殊订单记录。

这是我的 SQL：

```
Select  membertransactions.maingym_id,
        membertransactions.member_id,
        membertransactions.action_id,
        Max(membertransactions.date_time) As 'Latest Transaction Date', 
        membertransactions.date_time

From    bd1.membertransactions
  Inner Join    db1.customers 
  On    membertransactions.member_id = customers.id
Where   customers.orderno <>'SPECIAL ORDER'

AND     membertransactions.main_id = 1

AND     Date_Format(membertransactions.date_time,'%Y%m%d') < '20121101'

Group By membertransactions.member_id, 'Latest Transaction Date' 
```

我得到每个客户的一行，但它并不总是按时间顺序排列的最新行。我真的被困在这里，非常感谢提供的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:33:19.577

因为您使用的是 mysql，所以您可以使用 mysql 的一个特殊功能来简单地完成这项工作。就是这样：

```
select * from (
    Select
        membertransactions.maingym_id,
        membertransactions.member_id,
        membertransactions.action_id,
        membertransactions.date_time
    From bd1.membertransactions
    Join db1.customers On membertransactions.member_id = customers.id
    Where customers.orderno <> 'SPECIAL ORDER'
    AND membertransactions.main_id = 1
    AND Date_Format(membertransactions.date_time,'%Y%m%d') < '20121101'
    order by membertransactions.date_time desc) x
Group By member_id 
```

我已经`max(date)`完全删除了这些东西，内部选择按最新的日期顺序获取所有记录，然后按 member_id 进行外部选择组。这是关键：在 mysql 中，如果您有一个 group by*而不*聚合剩余的列，您将获得该组的*第一*行。

其他数据库会在此 SQL 上给出语法错误，但在 mysql 中它就像一个魅力

另请注意更具可读性的格式。我从来不明白为什么人们使用“左对齐每行的第二个单词”格式。我希望我能找到第一个这样做的人并鞭打他。

# delphi - 将流传递给 CommandGet 后，什么时候可以释放它？

> ID：13399545
> 
> 赞同：9
> 
> 时间：2012-11-15T14:27:34.277
> 
> 标签：delphi, memory-management, stream, delphi-2009, indy

使用 indy TIdHTTPServer，即使在 OnCommandGet 上，也可以将带有数据的流传递给 AResponseInfo.ContentStream。这很好。我什么时候可以发布该流？假设服务器可以获得多个请求，并且任何请求都可以在给定时间处理，并且一个流可以完成另一个流。

在哪里可以释放流？

代码示例：

```
var
  StreamsToFree : TList;

//assume StreamsToFree := TList.create; properly 

procedure TObject.IdHttpServerCommandGet(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo);
var
stream : TFileStream;
begin
  stream := TFileSTream.create('file.name');
  AResponseInfo.ContentStream := stream;
  AResponseInfo.ResponseNo := 200;
  StreamsToFree.Add(generateReceiptXML);  
end; 
```

什么时候可以释放流？在什么情况下，我们如何知道 IdHttpServer 完成了它的传输？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T14:57:37.133

当您将其分配给该`ContentStream`属性时，Indy 将成为您的流的所有者，并在不再需要它时将其释放。

编辑：假设您将`FreeContentStream`属性设置为`True`（这是默认设置）。

# iphone - 没有重复的问题应用程序

> ID：13399547
> 
> 赞同：3
> 
> 时间：2012-11-15T14:27:37.820
> 
> 标签：iphone, objective-c

我想制作一个问题应用程序，它显示我制作的 plist 中的一个随机问题。这就是函数（目前只有 7 个问题）。

我的函数给出了一个随机问题，但它总是以相同的问题开始，并且可以重复一个问题。我需要您的帮助来随机生成问题且不重复。

```
 currentQuestion=rand()%7;
 NSDictionary *nextQuestion = [self.questions objectAtIndex:currentQuestion];

    self.answer = [nextQuestion objectForKey:@"questionAnswer"];

    self.qlabel.text = [nextQuestion objectForKey:@"questionTitle"];

    self.lanswer1.text = [nextQuestion objectForKey:@"A"];

    self.lanswer2.text = [nextQuestion objectForKey:@"B"];

    self.lanswer3.text = [nextQuestion objectForKey:@"C"];

    self.lanswer4.text = [nextQuestion objectForKey:@"D"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:03:31.037

我会这样做（在ARC中，为了清楚起见，写得特别长）：

```
@property (nonatomic,strong) NSDictionary *unaskedQuestions;

- (NSString *)nextRandomUnaskedQuestion {

    if (!self.unaskedQuestions) {
        // using your var name 'nextQuestion'.  consider renaming it to 'questions'
        self.unaskedQuestions = [nextQuestion mutableCopy];
    }

    if ([self.unaskedQuestions count] == 0) return nil;  // we asked everything

    NSArray *keys = [self.unaskedQuestions allKeys];
    NSInteger randomIndex = arc4random() % [allKeys count];
    NSString *randomKey = [keys objectAtIndex:randomIndex];
    NSString *nextRandomUnaskedQuestion = [self.unaskedQuestions valueForKey:randomKey];

    [self.unaskedQuestions removeObjectForKey:randomKey];
    return nextRandomUnaskedQuestion;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:31:14.080

`rand()%7;`将始终产生唯一的随机数序列。

改为使用`arc4random() % 7;`。

```
currentQuestion=arc4random() %7; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:44:08.360

1.  使用您的问题键数组。假设您有一个名为 arrKeys 的数组 --> [A], [B], [C], [D], ... , [z], nil
2.  使用 (arc4random() % array.length-1) {asSuggested by Suresh} 为您的数组生成随机索引。假设你有 rand = 3
3.  从数组 arrKeys @3 = D 中获取键。然后从您的 NSDictionary 中使用 [nextQuestion objectForKey:@"D"] 并从数组中删除“D”键作为 [arrKeys removeObjectAtIndex:3]。对下一个问题重复 1-3 步。

# cordova - 复制科尔多瓦 2.2.0 .jar

> ID：13399550
> 
> 赞同：9
> 
> 时间：2012-11-15T14:27:41.050
> 
> 标签：cordova

我需要新的 .jar 文件来升级到 cordova 2.2.0。但是我在哪里可以找到它？

我必须生成它吗？如何生成？

非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T14:34:07.197

您可以从[phonegap github repo](https://github.com/phonegap/phonegap/zipball/2.2.0)下载它。

您可以在 lib/android/ 文件夹中找到该库。

要创建一个新项目，您可以使用 lilb/andoird/bin/create.bat 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-18T14:37:14.217

正如我在这个问题中回答的那样： [cordova-2.7.0.jar 在哪里？](https://stackoverflow.com/questions/16637284/where-is-cordova-2-7-0-jar/21199665#21199665)

为了获得 cordova.2.xxjar 文件，您只需执行以下步骤：

1.  从 Phonegap 网站下载该项目。对于 2.9.1 版，请点击此链接： http: [//phonegap.com/install/](http://phonegap.com/install/)并导航到您要查找的版本 (2.9.1)，它将链接到[https://github.com/phonegap/phonegap/archive /2.9.1.zip](https://github.com/phonegap/phonegap/archive/2.9.1.zip)

2.  一旦下载当然你解压缩并导航到**框架**目录

3.  您必须选择要使用的 android 版本，如果您已下载 Android SDK 并添加到系统的路径变量中，您可以这样做：

    ```
    android list targets 
    ```

    它会给你一个这样的答案：

    ```
    Available Android targets:
    ----------
    id: 1 or "android-8"
    Name: Android 2.2
    Type: Platform
    API level: 8
    Revision: 3
    Skins: WQVGA432, QVGA, WQVGA400, WVGA854, WVGA800 (default), HVGA
    ABIs : armeabi
    ----------
    id: 2 or "android-17"
    Name: Android 4.2.2
    Type: Platform
    API level: 17
    Revision: 2
    Skins: WXGA720, WXGA800-7in, WQVGA432, WSVGA, QVGA, WQVGA400, WXGA800, WVGA854, WVGA800 (default), HVGA
    ABIs : armeabi-v7a, x86
    ----------
    id: 3 or "Google Inc.:Google APIs:17"
    Name: Google APIs
    Type: Add-On
    Vendor: Google Inc.
    Revision: 3
    Description: Android + Google APIs
    Based on Android 4.2.2 (API level 17)
    Libraries:
    * com.google.android.media.effects (effects.jar)
      Collection of video effects
    * com.android.future.usb.accessory (usb.jar)
      API for USB Accessories
    * com.google.android.maps (maps.jar)
      API for Google Maps
    Skins: WVGA854, WQVGA400, WSVGA, WXGA800-7in, WXGA720, HVGA, WQVGA432, WVGA800 (default), QVGA, WXGA800
    ABIs : armeabi-v7a
    ----------
    id: 4 or "android-19"
    Name: Android 4.4
    Type: Platform
    API level: 19
    Revision: 1
    Skins: WXGA720, WXGA800-7in, WQVGA432, WSVGA, QVGA, WQVGA400, WXGA800, WVGA854, WVGA800 (default), HVGA
    ABIs : armeabi-v7a 
    ```

4.  我选择了最后一个，所以我做了：

    ```
    android update project -p . -t android-19 
    ```

5.  最后

    ```
    ant jar 
    ```

    结果是这样的：

    ```
    [jar] Building jar: /home/jgonzalezd/Downloads/phonegap-2.9.1/lib/android/framework/cordova-2.9.1.jar

    BUILD SUCCESSFUL
    Total time: 10 seconds 
    ```

现在你有了你的罐子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:16:23.953

每次构建新项目时，似乎都会从 Phone Gap 文件夹中删除 cordova-2.2.0.jar。

您可以将其复制回来以运行创建脚本

# android - 哪个 Android 布局和视图用于简单的基于图像的游戏？

> ID：13399554
> 
> 赞同：1
> 
> 时间：2012-11-15T14:27:59.010
> 
> 标签：android, android-layout, android-image

我想制作一个简单的Android游戏，其中显示一个大背景图像，并在其上方的特定位置显示其他一些图像，其他图像可能是可点击的。

这是我正在谈论的快速示例图像： ![在此处输入图像描述](../Images/b29fe158056d21447ef023ac22c6db55.png)

用户应该能够点击足球运动员或驼鹿（啊，经典的“足球运动员驼鹿问题”！）

我应该如何渲染这个屏幕（哪些布局和视图？）以便用户可以与之交互并且它可以在不同的设备上正确缩放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:52:49.133

我会使用RelativeLayout。

您可以将背景图像设置为布局（fill_parent 表示高度和宽度）。

然后，您可以将包含驼鹿和足球运动员的 ImageViews 放在相对于屏幕顶部或侧面或彼此相对的布局上（确保为所有内容指定“dp”单位）。将 ImageViews 的背景设置为透明，并且不会出现边界框问题（和/或您也可以将 ImageViews 对齐设置为彼此相对，确保它们不重叠）。

我认为这是最简单的方法 - 然后将 onClickListener 附加到 Activity 中的 ImageView 非常容易，你就完成了。

这种类型的布局在所有设备和屏幕尺寸上都是一样的。

RelativeLayouts 有一些小问题，但是一旦你进入它们就非常简单，并且提供快速渲染（因为视图层次结构通常很浅）。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:30:58.520

可点击元素的 ImageView 对我来说似乎是一个不错的选择。对于背景，我只是将您的图像设置为父布局的背景，即 RelativeLayout

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:25:27.000

我同意 FoamyGuy 和 Booger 的观点，如果您的唯一目标是将静态图像放置在屏幕上，当您单击它们时会执行某些操作，则一直使用 RelativeLayout 和 ImageViews。

但是...如果您希望在屏幕上间隔随机生成多个图像并让它们四处移动以供玩家在爆炸发生和少女被绑架时进行交互，您应该查看 SurfaceView、Canvas、Drawable、 TouchEvents 和 FrameBuffers。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:32:53.407

**SurfaceView**用于整个事物（以您的字段作为背景）和常规 * *ImageView* *s 用于添加的元素。您可以轻松地从 SurfaceView 恢复单击坐标，从而知道触摸了哪个元素。

无论如何，SurfaceView 可能会为您提供额外的可能性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:45:50.013

对于大多数图像，我会为每个图像使用一个 ImageView，就像 FoamyGuy 说的那样。

如果它们足够接近重叠边界框成为问题，您仍然可以为每个使用 ImageView，但使用[此答案](https://stackoverflow.com/a/4942812/752320)的变体，测试范围内每个 ImageView 的 alpha。

# eclipse - Junit 测试在 ant 中失败，在 eclipse 中成功：actOnTestResult 失败

> ID：13399558
> 
> 赞同：2
> 
> 时间：2012-11-15T14:28:05.873
> 
> 标签：eclipse, ant, junit, amazon-web-services

当我使用 ant 运行测试时，我无法说服一些新代码与我的 JUnit 测试很好地配合使用。

我有一些使用适用于 Java 的 AWS 开发工具包与 AWS（亚马逊网络服务）交互的代码。当我的 Junit 测试遇到引用此 SDK 中任何内容的代码时，测试会失败。当我逐步完成时，代码本身运行良好，失败的是预先存在的和其他成功的 Junit 测试。

我已经使用 -v 选项从命令行运行了 ant，我可以看到 AWS SDK for Java 的 jar 文件包含在类路径中。Ant 和 JUnit 也在那里。-v 选项显示在 actOnTestResult 中报告了失败，但这不是错误本身发生的地方。

ant -v 的完整输出为：

```
Apache Ant(TM) version 1.8.2 compiled on December 3 2011
Trying the default build file: build.xml
Buildfile: /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build.xml
Detected Java version: 1.6 in: /usr/lib/jvm/jdk1.6.0_32/jre

Detected OS: Linux

parsing buildfile /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build.xml with URI = file:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build.xml

Project base dir set to: /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy

parsing buildfile jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/usr/share/ant/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file

Importing file /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/one-jar-ant-task.xml from /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build.xml

Overriding previous definition of reference to ant.projectHelper

parsing buildfile /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/one-jar-ant-task.xml with URI = file:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/one-jar-ant-task.xml

Override ignored for property "one-jar.dist.dir"

Overriding previous definition of reference to ant.projectHelper

Build sequence for target(s) `junit' is [init, compile, junit]

Complete build sequence is [init, compile, junit, input-cmdlineargs, jar, onejar, run-cmdline, input-fileprops, run-hudson, help, clean, usage, input-eclipseargs, run-eclipse, ]

init:

 [echo] Creating build directories...

[mkdir] Skipping /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build because it already exists.

[mkdir] Skipping /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build/class because it already exists.

[mkdir] Skipping /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build/jar because it already exists.

[mkdir] Skipping /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/dist because it already exists.

compile:

 [echo] Compiling source files...

[javac] /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/src/AwsCredentials.properties skipped - don't know how to handle it

[javac] com/sportingindex/tradingservices/hadoop/aws/S3DataExtractionDeploy.java omitted as /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build/class/com/sportingindex/tradingservices/hadoop/aws/S3DataExtractionDeploy.class is up to date.

[javac] com/sportingindex/tradingservices/test/hadoop/aws/JUnit_S3DataExtractionDeploy.java omitted as /home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build/class/com/sportingindex/tradingservices/test/hadoop/aws/JUnit_S3DataExtractionDeploy.class is up to date.

junit:

[junit] Implicitly adding /usr/share/ant/lib/junit.jar:/usr/share/java/ant-launcher-1.8.2.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-junit4.jar to CLASSPATH

[junit] Executing '/usr/lib/jvm/jdk1.6.0_32/jre/bin/java' with arguments:

[junit] '-classpath'

[junit] '/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build/class:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/aws-java-sdk-1.3.7.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/commons-codec-1.6.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/commons-collections-3.2.1.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/commons-logging-1.0.4.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/httpclient-4.1.3.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/httpcore-4.2.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/junit.jar:/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/lib/one-jar-ant-task-0.97.jar:/usr/share/ant/lib/junit.jar:/usr/share/java/ant-launcher-1.8.2.jar:/usr/share/ant/lib/ant.jar:/usr/share/ant/lib/ant-junit.jar:/usr/share/ant/lib/ant-junit4.jar'

[junit] 'org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner'

[junit] 'com.sportingindex.tradingservices.test.hadoop.aws.JUnit_S3DataExtractionDeploy'

[junit] 'filtertrace=true'

[junit] 'haltOnError=false'

[junit] 'haltOnFailure=true'

[junit] 'formatter=org.apache.tools.ant.taskdefs.optional.junit.SummaryJUnitResultFormatter'

[junit] 'showoutput=false'

[junit] 'outputtoformatters=true'

[junit] 'logfailedtests=true'

[junit] 'logtestlistenerevents=false'

[junit] 'crashfile=/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/junitvmwatcher8947588636768864827.properties'

[junit] 'propsfile=/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/junit7746049445603740673.properties'

[junit]

[junit] The ' characters around the executable and arguments are

[junit] not part of the command.

[junit] Running com.sportingindex.tradingservices.test.hadoop.aws.JUnit_S3DataExtractionDeploy

[junit] Tests run: 4, Failures: 0, Errors: 4, Time elapsed: 0.756 sec

BUILD FAILED

/home/tonyb1/Dev/Workspace/S3DataExtractionDeploy/build.xml:218: Test com.sportingindex.tradingservices.test.hadoop.aws.JUnit_S3DataExtractionDeploy failed

at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.actOnTestResult(JUnitTask.java:1954)

at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:854)

at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeOrQueue(JUnitTask.java:1899)

at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:800)

at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)

at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

at java.lang.reflect.Method.invoke(Method.java:597)

at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)

at org.apache.tools.ant.Task.perform(Task.java:348)

at org.apache.tools.ant.Target.execute(Target.java:390)

at org.apache.tools.ant.Target.performTasks(Target.java:411)

at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)

at org.apache.tools.ant.Project.executeTarget(Project.java:1368)

at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)

at org.apache.tools.ant.Project.executeTargets(Project.java:1251)

at org.apache.tools.ant.Main.runBuild(Main.java:809)

at org.apache.tools.ant.Main.startAnt(Main.java:217)

at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)

at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 2 seconds 
```

如果我通过 Eclipse 运行或调试测试，那很好。只有在使用 ant 运行测试时才会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T02:53:58.133

我和你有同样的问题。我发现我需要再添加一个 jar（不仅是 junit.jar）：hamcrest-core.jar 到类路径中。

更多：http: [//junit.org/dependencies.html](http://junit.org/dependencies.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-14T02:45:38.837

您必须比较 ant 和 eclipse 之间的类路径。就我而言，我的 ant 类路径中有 ant jar，所以如果您使用 includeruntime=true，我需要排除 ant 文件中的 ant。和其他的，你还应该检查你的 junit 运行时类路径中的测试类和类路径。

# c# - 未在 EF 中保存更新的行

> ID：13399559
> 
> 赞同：0
> 
> 时间：2012-11-15T14:28:11.827
> 
> 标签：c#, asp.net-mvc, entity-framework

我有 3000 位父母需要大规模更新。首先，我认为我会使用 SQL Server 进行大规模更新并为其提供一个数组，但事实证明该数组太长，并且我收到错误，即我为`WHERE IN ()`子句提供的字符串将被截断。

所以我回到了 EF，但无论我做什么，更改都不会保存。当我检查本地人时，我看到了对象中的更改，但是`db.SaveChages()`完成后，更改不在数据库中。

我在这里一无所知。

```
 public void UpdateParentStatus(List<int> primaryParentIds)
    {
        //string queryArray = string.Join(",", primaryParentIds);
        //db.Database.ExecuteSqlCommand("UPDATE Parent SET IsPrimary = 1 WHERE ParentId IN ({0})", queryArray);
        foreach (int id in primaryParentIds)
        {
            var parentResult = pList.Single(p => p.ParentId == id);
            parentResult.IsPrimary = true;
        }
        db.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:42:35.557

尝试这个：

```
foreach (int id in primaryParentIds)
{
    var parentResult = pList.Single(p => p.ParentId == id);
    parentResult.IsPrimary = true;
    pList.Entry(parentResult).EntityState = EntityState.Modified;
}
db.SaveChanges(); 
```

# javascript - 直到完全加载后才开始 gif 动画

> ID：13399564
> 
> 赞同：7
> 
> 时间：2012-11-15T14:28:21.030
> 
> 标签：javascript, jquery, animated-gif

我在网页上有一个大的 gif 动画，并且想要在它完全加载完成之前启动它。使用 JavaScript / jQuery 怎么可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T14:34:31.367

使用占位符图像，并在 GIF 完全加载后将其替换为动画 GIF：

```
<img id="anim" src="placeholder.gif"> 
```

JS：

```
var myanim = new Image();
myanim.src = '/img/actions.png';
myanim.onload = function() {
    document.getElementById('anim').src = myanim.src;
}​ 
```

[http://jsfiddle.net/mblase75/6XTg7/](http://jsfiddle.net/mblase75/6XTg7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:44:02.117

您可以隐藏它，直到它完全加载。

```
<!--- this uses jquery !-->

<script type="text/javascript">

  var image_url = "http://media.tumblr.com/tumblr_m4doax3R071r9c1z7.gif";

  var image = $('<img />').load(function(){

      $(this).show();

  }).attr('src', image_url).hide();

  $('body').append(image);

</script> 
```

这里的问题是，一旦图像被下载（即它在浏览器缓存中），似乎真的没有任何方法可以从特定帧启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:32:56.663

您可以使用 CSS 隐藏 GIF（或 JS 用占位符替换它们），当加载 GIF 时，您可以触发 show()

`$('img[src$=".gif"]').load(function(){$(this).show())`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:38:22.153

您无法通过 javascript 控制 gif 动画，因此您必须实施某种 hack。你必须在一开始就把它隐藏起来。您可以放置​​一个带有实际图片尺寸和“等待”之类的文本的 div，而不是实际图片。

在浏览器中下载图像后，您可以将 div 替换为图像。在那个时间点动画将开始

# c# - 如果使用多重插入语句，有什么方法可以使用 SCOPE_IDENTITY 吗？

> ID：13399565
> 
> 赞同：28
> 
> 时间：2012-11-15T14:28:21.077
> 
> 标签：c#, .net, sql, spring.net, scope-identity

我会将许多数据行从 csv 文件导入 SQL Server 数据库（通过 Web 应用程序）。我需要为客户端返回自动生成的 id 值。

如果我循环执行此操作，则性能非常差（但我可以`SCOPE_IDENTITY()`毫无问题地使用）。

一个更高效的解决方案是这样的：

```
INSERT INTO [MyTable]
VALUES ('1'), ('2'), ('3')
SELECT SCOPE_IDENTITY() 
```

有什么方法可以获取所有生成的 ID，而不仅仅是最后生成的 ID？

谢谢你的帮助！

最好的问候，托尔斯滕

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-15T14:32:30.767

不，`SCOPE_IDENTITY()`只给你**一个最新**的插入`IDENTITY`值。但是您可以[查看`OUTPUT`SQL Server 的子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)....

```
DECLARE @IdentityTable TABLE (SomeKeyValue INT, NewIdentity INT)

INSERT INTO [MyTable]
OUTPUT Inserted.Keyvalue, Inserted.ID INTO @IdentityTable(SomeKeyValue, NewIdentity)
VALUES ('1'), ('2'), ('3') 
```

运行`INSERT`语句后，表变量将保存“一些键值”（为您识别行）和插入`ID`的每一行的新插入值。现在为此发疯！:-)

# java - 多个 JAXBContext 实例

> ID：13399567
> 
> 赞同：9
> 
> 时间：2012-11-15T14:28:30.127
> 
> 标签：java, jaxb, marshalling

通过使用 XJC，我创建了 2 个不同的 JAXB 元数据包，每个包中都有一个 ObjectFactory 类（我不知道这种方法是否可行，我有 2 个不同的 XSD 可以处理）

建议每个操作只创建一个 JAXBContext，因为它很昂贵。所以我想知道我在这里所做的是否有效且良好的做法？

```
 JAXBContext jaxbContext = JAXBContext.newInstance("com.package.one");
    Unmarshaller jaxbUnmarshaller1 = jaxbContext.createUnmarshaller();

    JAXBContext jaxbContext2 = JAXBContext.newInstance("com.package.two");
    Unmarshaller jaxbUnmarshaller2 = jaxbContext2.createUnmarshaller(); 
```

**编辑**当我尝试一起初始化 2 个包时，我得到一个异常“元素名称 {}Value 有多个映射。” 值是两个包中的一个类。

```
 JAXBContext jaxbContext = JAXBContext.newInstance("com.package.one:com.package.two"); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-15T14:37:39.463

来自 JAXBContext 的 Javadoc：

```
客户端应用程序通常使用其中一种获取此类的新实例
newInstance 方法有两种样式，尽管还有其他特殊形式的
可用方法：

JAXBContext.newInstance("com.acme.foo:com.acme.bar")
JAXBContext 实例是从冒号分隔的 Java 包列表中初始化的
名字。每个 java 包都包含 JAXB 映射类、模式派生类和/或
用户注释类。此外，java 包可能包含 JAXB 包注释
必须处理。（参见 JLS 第 3 版，第 7.4.1 节。包注释）。

JAXBContext.newInstance(com.acme.foo.Foo.class)
JAXBContext 实例使用作为参数传递的类进行初始化，并且
可以从这些类静态访问的类。见 newInstance(Class...)
详情。

```

您可以使用共享上下文并使用包名称列表对其进行初始化。

代码示例：

```
package test.jaxb.one;

@XMLRootElement
@XMLType(name = "test.jaxb.one.SimpleObject")
@XMLAccessorType(XMLAccessType.FIELD)
public class SimpleObject implements Serializable {
    private static final long serialVersionUID = 54536613717262557148L;

    @XmlElement(name = "Name")
    private String name;

    // Constructor, Setters/Getters
} 
```

和这个：

```
package test.jaxb.two;

@XMLRootElement
@XMLType(name = "test.jaxb.two.SimpleObject")
@XMLAccessorType(XMLAccessType.FIELD)
public class SimpleObject implements Serializable {
    private static final long serialVersionUID = -4073071224211934153L;

    @XmlElement(name = "Name")
    private String name;

    // Constructor, Setters/Getters
} 
```

最后：

```
public class JAXBTest {
    @Test
    public void testContextLoad() throws Exception {
        final JAXBContext context = JAXBContext
            .newInstance("test.jaxb.one:test.jaxb.two");
        Assert.assertNotNull(context);
    }
} 
```

# java - 如何在 Java Web 应用程序中实现复杂的页面流

> ID：13399577
> 
> 赞同：7
> 
> 时间：2012-11-15T14:28:53.843
> 
> 标签：java, architecture, spring-webflow, page-flow

我正在尝试将一个相当复杂的页面流（100 多页）实现为传统的 Web 应用程序。我找到了一些选择，但没有一个是 100% 令人信服的

1.  将流程硬编码到控制器中，进行重定向等。这显然不是维护的最佳选择
2.  JSF 不仅处理流程，还要求使用 JSF 作为视图技术。我不喜欢这种锁定
3.  春季网络流。当前版本 2.3.1 定义了不易维护的 XML 流。即将发布的 3.0 版本承诺在纯 java 中使用注释定义流，但它甚至没有时间表。此外，项目开发在过去几年显着放缓。
4.  GWT 和 Vaadin 的概念更接近于传统的桌面应用程序，然后是 Web 应用程序，使用起来确实很方便，但它不适合我的项目。

另外我发现了几十个这样的废弃项目：http: [//javasteps.sourceforge.net/](http://javasteps.sourceforge.net/)

我想知道为什么所有这些项目都被放弃了，2012年实现复杂页面流的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:33:51.453

就个人而言，我推荐单页架构：

[单页 JavaScript Web 应用程序的架构？](https://stackoverflow.com/questions/3050869/architecture-of-a-single-page-javascript-web-application)

我不确定这是否适用于您的应用程序。我已经使用了你上面提到的所有流程，目前正在开发一个单页应用程序，我喜欢它。我们在客户端使用 Dojo，它调用服务器上的 REST API。已经很不错了。

Vaadin 也非常可靠，并且比简单的 GWT 更容易设置。如果您的项目中有很多 UI 人员喜欢用 CSS 和 Javascript 编写代码，那么他们会讨厌这种方法。

Spring Webflow 实际上非常可靠。我有一段时间没有看它了，但是当我使用它时，它完成了我当时所做的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-31T13:35:11.570

这真的很晚了，但我看不到这个问题的令人满意的答案，并且想分享我在最近的一个项目中尝试过的一种方法，我觉得它比严格绑定到弹簧视图的弹簧网络流方法更好。我使用带有 Spring MVC 的 Angular js 创建了一个 SPA。在 Angular js 中，我没有使用路由器或状态，而是在控制器中创建了一个 div，如下所示

```
<div width="100%" id="fullertonDataPanel" ng-include="page"></div> 
```

在服务器端，为了捕获从一个帧（我指的是 SPA 中的特定屏幕）到另一个帧的所有可能转换，我使用 MVEL 创建了一个规则树。所以在数据库中，我有一个结构，它为每一帧存储了一棵规则树。MVEL 表达式中的数据由每个操作调用的各种服务设置。因此，对于任何操作，都遵循以下步骤。

1) 验证动作。

2) 调用各种服务。

3) 从这些服务中捕获数据，并将其与用户的现有数据合并。

4) 将此捕获的数据连同当前帧的详细信息一起输入到每个帧的规则集合中。

5) 将树的规则运行到当前帧并获取其输出。

6) 如果只有一个转换，那么这就是最终转换。如果有 2 个转换并且一个是默认转换，则忽略默认转换并使用另一个转换。

7）将过渡的模板名称返回给角度控制器，并在控制器范围内设置页面变量的值。

使用这种方法，我的所有服务所要做的就是将数据存储在特定操作的不同数据字段中。Web Flows 或任何复杂流程定义（如 Spring-Web Flow 中定义的定义）的所有复杂 if-else 条件都不是必需的。MVEL 规则引擎管理所有这些，并且由于它们都在数据库中，因此无需重新启动服务器即可更改它。

我相信这种带有 MVEL 的通用方法是一种灵活的方法，它可以全面处理复杂流的问题，而不会使应用程序代码混乱或添加额外的不必要的 xml 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:22:34.030

Vaadin 组件模型有一个新的 MVC 框架和 Web 流实现，称为[Lexaden Web Flow](http://www.lexaden.com/main/entry/web_flow)

您可以在您的应用程序中试用它作为可能的替代方案。

# php - Actionscript 3.0 调用 PHP 函数

> ID：13399593
> 
> 赞同：0
> 
> 时间：2012-11-15T14:29:51.270
> 
> 标签：php, actionscript-3

我知道与

```
loader = new URLLoader();
loader.data; 
```

可以从 php 页面获取整个数据/信息。但我不希望 php 页面包含我想要从“流”中获取的每一点信息。

所以我的问题是：是否可以在 php 脚本中有多个函数/方法，并且只调用我需要的方法？

如：

```
<?php
   function getColour1()
      echo "blue";

   function getColour2()
      echo "red";
?> 
```

如果“是”，将不胜感激 2 行代码显示如何或链接到示例。

干杯，M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:37:12.420

您可以将“动作”变量传递给 PHP，然后在 PHP 中使用 if/else 语句来响应该动作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:10:34.560

查看 AMFPHP 项目：[http ://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)

它可以满足您的需求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:36:33.700

你可以这样调用页面：

[http://www.site.com/script.php?action=getColour1](http://www.site.com/script.php?action=getColour1)

然后在您的代码中：

```
<?php

switch($_GET["action"]) {

    case "getColour1":
        getColour1();
        break;
    case "getColour2":
        getColour2();
        break;
    default:
        echo "Unknown action";
        break;
}

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:38:40.390

你想听听[Front Controller Pattern](http://en.wikipedia.org/wiki/Front_Controller_pattern)。

此外，您需要将您的请求路由到不同的函数 -如果您不想使用完整的框架 MVC 堆栈，我建议您使用[这个漂亮的库。](https://github.com/chriso/klein.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:48:07.957

```
$functionName = $_GET["action"];
$functionName() or call_user_func($functionName) 
```

# c - 如何从c中的字符串中提取数字？

> ID：13399594
> 
> 赞同：19
> 
> 时间：2012-11-15T14:29:52.150
> 
> 标签：c, string

假设我有一个字符串`ab234cid*(s349*(20kd`，我想提取所有数字`234, 349, 20`，我该怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-15T14:34:58.987

你可以这样做[`strtol`](http://www.kernel.org/doc/man-pages/online/pages/man3/strtol.3.html)，像这样：

```
char *str = "ab234cid*(s349*(20kd", *p = str;
while (*p) { // While there are more characters to process...
    if ( isdigit(*p) || ( (*p=='-'||*p=='+') && isdigit(*(p+1)) )) {
        // Found a number
        long val = strtol(p, &p, 10); // Read number
        printf("%ld\n", val); // and print it.
    } else {
        // Otherwise, move on to the next character.
        p++;
    }
} 
```

链接到[ideone](http://ideone.com/3qTWZS)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-15T14:41:47.207

使用`sscanf()`和扫描集的可能解决方案：

```
const char* s = "ab234cid*(s349*(20kd";
int i1, i2, i3;
if (3 == sscanf(s,
                "%*[^0123456789]%d%*[^0123456789]%d%*[^0123456789]%d",
                &i1,
                &i2,
                &i3))
{
    printf("%d %d %d\n", i1, i2, i3);
} 
```

where`%*[^0123456789]`表示忽略输入，直到找到一个数字。[请参阅http://ideone.com/2hB4UW](http://ideone.com/2hB4UW)上的演示。

或者，如果数字的数量未知，您可以使用`%n`说明符记录缓冲区中读取的最后一个位置：

```
const char* s = "ab234cid*(s349*(20kd";
int total_n = 0;
int n;
int i;
while (1 == sscanf(s + total_n, "%*[^0123456789]%d%n", &i, &n))
{
    total_n += n;
    printf("%d\n", i);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T15:37:50.380

在这里使用一个简单的解决方案`sscanf`：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

char str[256]="ab234cid*(s349*(20kd";
char tmp[256];

int main()
{

    int x;
    tmp[0]='\0';
    while (sscanf(str,"%[^0123456789]%s",tmp,str)>1||sscanf(str,"%d%s",&x,str))
    {
        if (tmp[0]=='\0')
        {
            printf("%d\r\n",x);
        }
        tmp[0]='\0';

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T14:37:51.000

制作一个根据一个基本原则运行的状态机：当前字符是一个数字。

*   从非数字转换为数字时，您初始化您的 current_number := number。
*   当从一个数字转换到另一个数字时，您将新数字“转移”到：
    current_number := current_number * 10 + number；
*   从数字转换到非数字时，输出 current_number
*   当从非数字到非数字时，你什么也不做。

优化是可能的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T14:37:14.870

如果数字由字符串中的空格分隔，则可以使用 sscanf()。由于您的示例并非如此，因此您必须自己做：

```
char tmp[256];

for(i=0;str[i];i++)
{
  j=0;
  while(str[i]>='0' && str[i]<='9')
  {
     tmp[j]=str[i];
     i++;
     j++;
  }
  tmp[j]=0;
  printf("%ld", strtol(tmp, &tmp, 10));
  // Or store in an integer array 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-30T12:11:36.513

```
#include<stdio.h>
#include<ctype.h>
#include<stdlib.h>
void main(int argc,char *argv[])
{
char *str ="ab234cid*(s349*(20kd", *ptr = str;
while (*ptr) { // While there are more characters to process...
    if ( isdigit(*ptr) ) {
        // Found a number
        int val = (int)strtol(ptr,&ptr, 10); // Read number
        printf("%d\n", val); // and print it.
    } else {
        // Otherwise, move on to the next character.
        ptr++;
    }
}

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-01T14:20:50.733

或者你可以做一个像这样的简单函数：

```
// Provided 'c' is only a numeric character
int parseInt (char c) {
    return c - '0';
} 
```

# vba - 使用工作表名称作为参数的自定义函数

> ID：13399596
> 
> 赞同：1
> 
> 时间：2012-11-15T14:30:01.703
> 
> 标签：vba, excel, excel-2007, excel-formula, excel-2010

我有这样的功能：

```
Function GetLastRowOnSheet(ByVal SheetName As Worksheet) As Long
    On Error Resume Next
    GetLastRowOnSheet = SheetName.Cells.Find(what:="*", after:=SheetName.Cells(1),     searchorder:=xlByRows, searchdirection:=xlPrevious).Row
    On Error GoTo 0
End Function 
```

假设我有一个名为“Sheet1”的工作表，在我的 excel 工作表中，**我希望能够说 =GetLastRowOnSheet('Sheet1')**或使用**命名范围**

我可以使用上面的函数以及包含以下内容的子例程或函数在 vba 中轻松完成此操作：

```
Dim Sheet1 As Worksheet
Dim LastRow as Long
Set Sheet1 = ThisWorkbook.Sheets("Sheet1")
LastRow = GetLastRowOnSheet(Sheet1)

' last row then returns the last filled in cell on the sheet 
```

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:37:21.843

您将需要改用此代码：

```
Function GetLastRowOnSheet(ByVal SheetName As String) As Long
    Dim wks As Worksheet

    On Error Resume Next
    Set wks = ActiveWorkbook.Worksheets(SheetName)
    GetLastRowOnSheet = wks.Cells.Find(what:="*", after:=wks.Cells(1), searchorder:=xlByRows, searchdirection:=xlPrevious).Row
    On Error GoTo 0
End Function 
```

我不是 100% 确定，但现在，我非常怀疑是否可以将 Worksheet-Object 作为 Worksheet-Function-Parameter 传递。这就是我改用字符串的原因。

因为您使用的是`Resume Next`，所以您不需要检查工作表是否确实存在，但如果不存在，您就必须这样做。

但是，您现在可以轻松地使用 NAMED-Range，只要它引用 Worksheet-Name。

*编辑*

好的，找到了一种更好的方法来执行此操作，因为动态获取工作表名称作为此工作表功能的输入会很痛苦。没有内置函数可以直接执行此操作 - 至少我找不到。`Cell("address")`将是最接近的。

```
Function GetLastRowOnSheet(ByVal SheetName As Range) As Long    
    On Error Resume Next
    With SheetName.Worksheet
      GetLastRowOnSheet = .Cells.Find(what:="*", after:=.Cells(1), searchorder:=xlByRows, searchdirection:=xlPrevious).Row
    end with
    On Error GoTo 0
End Function 
```

现在您可以使用`GetLastRowOnSheet(SheetXY!A1)`or `GetLastRowOnSheet(NAMEDRANGE)`，这非常简单，并且已经对错误输入提供了一些保护。

要将它与 VBA 一起使用，您可以像这样使用它：

```
Dim LastRow as Long
LastRow = GetLastRowOnSheet(ThisWorkbook.Sheets("Sheet1").Cells) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T06:28:14.173

您需要使用 Variant 类型而不是 Worksheet。为我工作。

```
Function GetLastRowOnSheet(SheetName As Variant) As Long
    On Error Resume Next
    GetLastRowOnSheet = SheetName.Cells.Find(what:="*", after:=SheetName.Cells(1),     searchorder:=xlByRows, searchdirection:=xlPrevious).Row
    On Error GoTo 0
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:38:14.487

工作表名称不是工作表对象。

要在有工作表名称时引用工作表对象，可以使用 ThisWorkbook.Sheets(SheetName) 其中 SheetName 是函数参数，并且是字符串类型，而不是工作表类型。

现在对于一个范围来说，它会有点困难，因为命名范围可以是全局（整个工作簿）级别或本地（仅包含工作表）级别。

因此，您必须检查这两种可能性，或者更喜欢其中一种（所以首先在本地检查，如果它不存在，则在全局范围内继续），或者允许用户表达他们的偏好或在用户必须指定的地方设置第二个参数。

# sql - SQL foreach 使用表行

> ID：13399597
> 
> 赞同：5
> 
> 时间：2012-11-15T14:30:06.003
> 
> 标签：sql, ms-access

我有两个访问表。一个表 (table1) 有一个唯一字段 MyID，另一个表 (table2) 有几行 MyID 和另一列 Data。我想编写一个类似于 foreach 的 SQL 语句，其中 MyID 的所有值都是从 table2 的数据中选择和平均的，然后在另一个字段 Avg 下的 MyID 行中更新。

```
**Table1**
MyID
ID1
ID2
ID3  

**Table2**
MyID   Data   Mon
ID2    10     Jan
ID2    20     Feb
ID1    10     Jan
ID3    30     Mar
ID1    30     Mar 
```

预期结果如下：

```
**Table1**
MyID    Avg
ID1     20
ID2     15
ID3     30 
```

也许在 SQL 中有更好的方法来做到这一点，但目前不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:34:32.833

```
UPDATE  table1
        INNER JOIN
        (
            SELECT Data1, AVG(columnName) avgCol
            FROM table2
            GROUP BY Data1
        ) b ON table1.MyID = b.Data
SET     table1.avgColumnName = b.avgCol 
```

*   [MS Access 更新加入](http://www.techonthenet.com/access/queries/update2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:50:05.303

这在 MS Access 中作为查询实现了技巧，但不会更新到表中。

```
SELECT Table2.[MyID], Avg(Table2.[Data]) AS [AVG]
FROM Table2
GROUP BY Table2.[MyID] 
```

# python - QtCore.Qt.Key_ 似乎不起作用

> ID：13399598
> 
> 赞同：1
> 
> 时间：2012-11-15T14:30:13.303
> 
> 标签：python, pyqt4, keypress, qtgui

这是我的按键事件

```
def keyPressEvent(self , e): 
    key = e.key()
    if key == QtCore.Qt.Key_Escape:
         self.close()
    elif key == QtCore.Qt.Key_A:
         print 'Im here' 
```

但是，如果我单击 A ，它不会打印。但是，如果我单击 Escape，窗口将关闭。我哪里出错了？

编辑：

基本上我有一个带有 lineedit 和一个按钮的窗口。我想通过单击 Enter 将按钮链接到一个功能，让我们说有趣。这是我的代码

```
import sys
from PyQt4 import QtGui , QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example , self).__init__()
        self.window()

    def window(self):
        self.setWindowTitle('Trial')

        self.layout = QtGui.QGridLayout()
        self.text = QtGui.QLineEdit()
        self.first = QtGui.QPushButton('Button')
        self.layout.addWidget(self.text , 0 , 0)    
        self.layout.addWidget(self.first , 1 , 0)
        self.setLayout(self.layout)
        self.first.clicked.connect(self.fun)
        self.show()

    def fun(self):
        //do something

    def keyPressEvent(self , e):
        key = e.key()
        if key == QtCore.Qt.Key_Escape:
            self.close()
        elif key == QtCore.Qt.Key_Enter:
            self.fun()

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

稍后我会添加更多键。但是除了 Escape 之外，它们都没有工作/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:57:41.880

您正在寻找的方法被称为[`keyPressEvent`](http://srinikom.github.com/pyside-docs/PySide/QtGui/QWidget.html#PySide.QtGui.PySide.QtGui.QWidget.keyPressEvent)，而不是`KeyPressEvent`。

* * *

看来你`QLineEdit`正在窃取你的`KeyPress`事件。如果您只想从行编辑中处理回车键，则可以将`returnPressed`信号连接到`self.fun`：

```
self.text.returnPressed.connect(self.fun)  # in PySide 
```

否则，您将不得不使用[事件过滤器](http://srinikom.github.com/pyside-docs/PySide/QtCore/QObject.html#PySide.QtCore.PySide.QtCore.QObject.installEventFilter)。稍后我会尝试发布一些代码。

* * *

您的最终编辑使其更清晰。您可以安全地放下`keyPressEvent`并使用：

```
self.text.returnPressed.connect(self.fun)
self.button.clicked.connect(self.fun) 
```

原来这是一个多么混乱的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:23:22.397

您正在制作 GUI 应用程序，对吗？如果是，那么像这样打印将在控制台中打印。试试这个...

```
QtGui.QMessageBox.information(self,"hello","I m here") 
```

# ruby - Ruby CGI::Cookie 原始 cookie 解析

> ID：13399600
> 
> 赞同：4
> 
> 时间：2012-11-15T14:30:27.710
> 
> 标签：ruby, cookies, cgi, ruby-1.9.3

我希望能够解析 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin10.8.0] 中的原始 cookie 字符串。

[CGI::Cookie](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI/Cookie.html)库看起来很有希望，但是，它并没有像我想象的那样工作。

例如，

```
CGI::Cookie::parse("ASPSESSIONIDSCDRSRTS=HHALOHOBJGJMLPIANNLDOMCJ; path=/").each_key {|name| p 'Cookie name: ' + name} 
```

将返回：

```
"Cookie name: ASPSESSIONIDSCDRSRTS"
"Cookie name: path" 
```

我想要的是类似于`CGI::new`实例工作的东西，除了你向它传递一个原始的 cookie 字符串：

```
cookie1 = CGI::Cookie::new('name'    => 'name',
                       'value'   => ['value1', 'value2', ...],
                       'path'    => 'path',   # optional
                       'domain'  => 'domain', # optional
                       'expires' => Time.now, # optional
                       'secure'  => true      # optional
                      )

name    = cookie1.name
values  = cookie1.value
path    = cookie1.path
domain  = cookie1.domain
expires = cookie1.expires
secure  = cookie1.secure 
```

我不知道如何从原始 cookie 字符串中雄辩地做到这一点。

编辑 - -

以下代码在`~/.rvm/src/ruby-1.9.3-p194/lib/cgi/cookie.rb`文件中。所以它应该返回如下评论`cookies[name] = Cookie::new(name, *values)`。我似乎没有得到。

```
# Parse a raw cookie string into a hash of cookie-name=>Cookie
# pairs.
#
#   cookies = CGI::Cookie::parse("raw_cookie_string")
#     # { "name1" => cookie1, "name2" => cookie2, ... }
#
def Cookie::parse(raw_cookie)
  cookies = Hash.new([])
  return cookies unless raw_cookie

  raw_cookie.split(/[;,]\s?/).each do |pairs|
    name, values = pairs.split('=',2)
    next unless name and values
    name = CGI::unescape(name)
    values ||= ""
    values = values.split('&').collect{|v| CGI::unescape(v,@@accept_charset) }
    if cookies.has_key?(name)
      values = cookies[name].value + values
    end
    cookies[name] = Cookie::new(name, *values)
  end

  cookies
end 
```

编辑 - -

这似乎是 Ruby`CGI::Cookie.parse`方法中的一个错误。我已经打开了关于 Ruby 错误跟踪器的错误报告 - [https://bugs.ruby-lang.org/issues/7364](https://bugs.ruby-lang.org/issues/7364)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:04:37.617

我只是有同样的问题。`CGI::Cookie.new`只是无法消费所`CGI::Cookie::parse`生产的东西，它们似乎并没有像我们当时预期的那样相互补充。

快速搜索宝石，我找到了[https://github.com/dwaite/cookiejar](https://github.com/dwaite/cookiejar)。看起来这个 gem 做了很多尝试，但至少它有代码可以像我们期望的那样正确解析原始 cookie。我没有尝试理解该库，因为它似乎做了很多事情，而我实际上只关心“使用 cookie -> 修改它 -> 生成 cookie”。

我想出了这个快速破解：

```
require 'cgi'
require 'cookiejar'

# Some sample
raw_cookie = "somecookie=some%7Cvalue; expires=Wed, 02 Apr 2014 13:36:50 GMT; path=/; domain=.somedomain.com"

parts = CookieJar::CookieValidation.parse_set_cookie raw_cookie
# Needs manual unescape
parts[:value] = CGI::unescape(parts[:value])
# Per spec, this name is different
parts[:expires] = parts[:expires_at]
# Remove old ones
parts.delete :expires_at
# CookieJar adds them always, remove
parts.delete :version
# Convert symbol keys to strings for GGI::Cookie
cookie = parts.inject(Hash.new) do |acc, (k,v)|
  acc[k.to_s] = v 
  acc 
end
puts CGI::Cookie.new(cookie).to_s
#=> somecookie=some%7Cvalue; domain=.somedomain.com; path=/; expires=Wed, 02 Apr 2014 13:36:50 GMT 
```

我想这应该是对一个 gem 的调用，它只对 cookie 做一件事并且做得很好：能够解析和生成原始 cookie 字符串。但是 TBH，问题域可能比我像我做的那样愚弄要复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:50:00.183

我没有使用该库，但根据 Ruby 文档（[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI/Cookie.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI/Cookie.html)）你在调用什么|姓名| 在您的块中实际上是一个 Cookie 对象。

```
parse(raw_cookie) 
Parse a raw cookie string into a hash of cookie-name=>Cookie pairs. 
```

您可能只是看到打印出来的名称，因为这就是隐含的 .to_s 将在 Cookie 上为您提供的内容。

尝试打印 name.path 或 name.value（或 Cookie 对象的任何访问器）。

# .net - 未处理异常的全局错误捕获器正在收集所有异常

> ID：13399602
> 
> 赞同：0
> 
> 时间：2012-11-15T14:30:27.423
> 
> 标签：.net, vb.net, visual-studio-2010, error-handling

我试图弄清楚为什么会这样。在我的 vb.net 应用程序中，我在 ApplicationEvents.vb 中设置了一个全局处理程序，我认为它只会拾取任何未处理的异常，尽管它会拾取我的应用程序中发生的每个异常，无论它们是否使用 try catch 块处理。这是我在 applicationevents 中的代码

```
 Private Sub MyApplication_UnhandledException(ByVal _
    sender As Object, ByVal e As  _
    Microsoft.VisualBasic.ApplicationServices.UnhandledExceptionEventArgs) _
    Handles Me.UnhandledException

            e.ExitApplication = _
            MessageBox.Show(e.Exception.Message & _
                    vbCrLf & "The application has encountered a bug, would you like to                 Continue?", "An Error has occured.", _
                    MessageBoxButtons.YesNo, _
                    MessageBoxIcon.Question) _
                    = DialogResult.No
    End Sub 
```

在我的应用程序的其余部分，我设置了正常的 try catch 块，如下所示：

```
 Try

          Catch ex as exception

     End Try 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:11:48.437

我创建了一个 VB 项目。ApplicationEvents.vb 看起来像这样：

```
Partial Friend Class MyApplication

    Private Sub MyApplication_UnhandledException(sender As Object, e As Microsoft.VisualBasic.ApplicationServices.UnhandledExceptionEventArgs) Handles Me.UnhandledException
        MsgBox("Unhandled exception")
    End Sub
End Class 
```

表格的代码是：

```
Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim a As Integer
        Dim b As Integer

        Try
            a = a / b
        Catch ex As Exception
            MsgBox("Handled exception")
        End Try

    End Sub
End Class 
```

重要的是，如果您没有捕获表单中的错误，则可能不会触发通用错误处理程序（取决于 Visual Studio 上的设置，我不记得是哪一个）。可以肯定的是，在不调试的情况下执行您的项目（CTRL+F5 而不是 F5）

# c - cstring 字符串；vs 字符字符串；

> ID：13399603
> 
> 赞同：3
> 
> 时间：2012-11-15T14:30:28.787
> 
> 标签：c, char, cstring

有什么区别

```
typedef struct node *node_ref;
typedef char *cstring;
struct node {
  cstring string;
  node_ref link;
}; 
```

和

```
typedef struct node *node_ref;
struct node {
  char string;
  node_ref link;
}; 
```

我的程序编译良好，没有任何声明的警告，所以我不知道它有什么不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:33:39.917

您已将 a 定义`cstring`为`char *`在第一种情况下`string`是指向 a 的指针，`char`在第二种情况下它是单个`char`.

两者都是有效的代码，但含义非常不同。

# interop - PowerPoint互操作

> ID：13399604
> 
> 赞同：3
> 
> 时间：2012-11-15T14:30:36.577
> 
> 标签：interop, powerpoint

我是 .NET 的新手。我想制作一个将.pptx文件转换为.wmv的控制台应用程序。我已经设法使用powerpoint interop来做到这一点。但是我有一些问题。首先，如果我构建应用程序并将其转移到另一台计算机上，我会得到一个已为 COM 对象返回异常错误 HRESULT E_FAIL（我在两台 PC 中都有 powerpoint）。如果我在我写的那个上运行它，我一切正常。但不是第一次。这意味着当我启动我的 pc 和运行它我会得到同样的异常，第二次我会尝试运行它会正常运行。可能是什么问题？iguess with interop and powerpoint，但我无法弄清楚。

好的，这里是代码：

```
using Microsoft.Office.Core;
using Microsoft.Office.Interop.PowerPoint;
using PowerPoint = Microsoft.Office.Interop.PowerPoint;
using System.Runtime.InteropServices;
using System.IO;
using System;

  namespace Microsoft.Office.Interop.PowerPoint
 {
  class Program
  {

    static void Main(string[] args)
    {

        string fileName = args[0];
        string exportName = args[1];
        string exportPath = args[2];

        Microsoft.Office.Interop.PowerPoint.Application ppApp = new Microsoft.Office.Interop.PowerPoint.Application();
        ppApp.Visible = MsoTriState.msoTrue;
        ppApp.WindowState = PpWindowState.ppWindowMinimized;
        Microsoft.Office.Interop.PowerPoint.Presentations oPresSet = ppApp.Presentations;
        Microsoft.Office.Interop.PowerPoint._Presentation oPres = oPresSet.Open(fileName,
                    MsoTriState.msoFalse, MsoTriState.msoFalse,
                    MsoTriState.msoFalse);
        try
        {
            oPres.CreateVideo(exportName);
            oPres.SaveCopyAs(String.Format(exportPath, exportName),
                PowerPoint.PpSaveAsFileType.ppSaveAsWMV,
                MsoTriState.msoCTrue);
        }
        finally
        {
            ppApp.Quit();
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T21:20:59.863

`_Presentation.CreateVideo`不会从 powerpoint 创建视频。*它在*PowerPoint中创建一个视频。无论如何，这就是[文档所说](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint._presentation.createvideo.aspx)的。

尝试[_Presentation.SaveAs](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint._presentation.saveas(v=office.14).aspx)，然后使用[PpSaveAsFileType.ppSaveAsWMV](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint.ppsaveasfiletype(v=office.14).aspx)作为文件类型。

# typo3-flow - 为什么此存储库方法不起作用？

> ID：13399608
> 
> 赞同：2
> 
> 时间：2012-11-15T14:31:12.910
> 
> 标签：typo3-flow

我在 Extbase 项目中使用了这个存储库方法，它工作得很好。

```
public function findRandom() {
    $rows = $this->createQuery()->execute()->count();
    $row_number = mt_rand(0, max(0, ($rows - 1)));
    return $this->createQuery()->setOffset($row_number)->setLimit(1)->execute();
} 
```

它在 TYPO3 Flow 中不起作用。为什么？我应该改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:39:29.680

听起来很奇怪 Flow 必须返回一个对象，就像 Extbase 一样，或者在你的情况下一个对象的 QueryResultInterface ，如果你直接需要一个对象，你可以使用这种代码：

```
$query->execute()->getFirst(); 
```

希望有所帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:36:18.197

我没有提到，queryResult 不是它自己的对象。它是一个数组。我上面的代码正在运行。

这是 extbase 和 flow3 的区别。Flow3 返回一个数组。Extbase 对象本身。

# php - mysql PHP查询包含连接计数

> ID：13399626
> 
> 赞同：0
> 
> 时间：2012-11-15T14:31:57.240
> 
> 标签：php, mysql, sql, join

我有这个查询，在检查各种教程后应该可以工作 - 但它没有。

```
$query="SELECT week, year, COUNT(week) AS week_no
FROM archive_agent_booking
LEFT JOIN invoice_additions ON invoice_additions.week = archive_agent_booking.week
WHERE client_id='$account_no' GROUP BY week, year ORDER BY week DESC"; 
```

表格如下：

```
archive_agent_booking

+---------+----------+----------+----------+----------+---------+---------+
| job_id  |   week   |   year   |   desc   |   price  |   date  | acc_no  |
+---------+----------+----------+----------+----------+---------+---------+

invoice_additions

+---------+----------+----------+----------+----------+---------+
| acc_no  |  week    |   year   |  desc    | am_price | am_date |
+---------+----------+----------+----------+----------+---------+ 
```

我基本上想从两个表中计算每周元素并将它们显示为一个总数，即使其中一个表中没有显示一周值。不知道这是否是最好的解决方案，所以我对替代方案持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:37:52.863

```
select 
    week, 
    sum(items) 
from 
    (
        (select week, count(*) as items from archive_agent_booking group by week)
    union 
        (select week, count(*) from invoice_additions group by week)
    ) 
group by 
    week 
```

编辑：我对你想看到的东西做了一些巨大的假设

# bash - bash 配置模板

> ID：13399628
> 
> 赞同：1
> 
> 时间：2012-11-15T14:31:59.603
> 
> 标签：bash, templates, scripting, templating

我正在使用 bash 脚本来安装和配置应用程序。我正在尝试使用一个模板，我可以在其中填写变量中的值，然后将其保存到适当的位置。这仅适用于变量，但我无法使用任何条件。有没有更好的方法来做到这一点？

这是我的示例模板：

```
 #!/bin/bash

    cat <<EOF
    DEFAULTS: &DEFAULTS
      adapter: $DB
      host: $DB_HOST
      username: $DB_USER
      password: $DB_PASS
      database: $DB_DATABASE
      if [ ! $DB_RECONNECT = ""]; then
        reconnect: $DB_RECONNECT
      fi
      if [ ! $DB_TIMEOUT = ""]; then
        timeout: $DB_TIMEOUT  
      fi
    EOF 
```

然后我`source template.sh > /path/to/file`用来评估和保存文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:14:26.277

您不必将所有内容都包含在 heredoc 中

```
cat <<EOF
...
database: $DB_DATABASE
EOF

if [ -z "$DB_RECONNECT" ]; then
    echo "reconnect: $DB_RECONNECT"
fi

if [ -z "$DB_TIMEOUT" ]; then
    echo "timeout: $DB_TIMEOUT"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:39:01.590

您可以使用`tpage`这个简单示例中的命令：

```
$ cat /tmp/l.tpl 
DEFAULTS: [%def%]
    adapter[%db%]

$ tpage --define def=foo --define db=bar --interpolate /tmp/l.tpl
DEFAULTS: foo
    adapterbar 
```

`tpage`是众所周知的`Perl`模块附带的命令`Template::Toolkit`，但不需要知道`Perl`使用它。你也可以做一些有条件的，见[有条件的](http://my.safaribooksonline.com/book/programming/perl/0596004761/template-directives/perltt-chp-4-sect-5)

项目：[http ://www.template-toolkit.org/](http://www.template-toolkit.org/)

# php - switch case 的困难——在 case 语句完成后，我希望 php 执行 break 之后的命令并退出 switch

> ID：13399631
> 
> 赞同：1
> 
> 时间：2012-11-15T14:32:14.703
> 
> 标签：php, view, include, switch-statement, case

我有这个代码：

```
function logout()
{
    $_SESSION = array(); //destroy all of the session variables
    session_destroy();
}

// defaults to welcome view unless a different view is requested
$view = empty($_GET['view']) ? 'welcome' : $_GET['view'];

switch ($view) {
    case "logout";
        logout();
        header('Location: index.php');
        break;
}

if(isset($_SESSION['valid']) && $_SESSION['valid']) {
    include 'views/main/layout.php';
}
include 'views/main/loggedin.php'; 
```

我想要发生的是：

1.  单击注销时（注销的案例语句运行）。
2.  会话内容被破坏。
3.  用户被重定向到此代码页面的开头（index.php）
4.  带有欢迎视图（因为它是默认的）
5.  使用包含“layout.php”的包含语句，而不是在单击注销之前设置的“loggedin.php”。

所以应该以layout为模板，以welcome为主体。

但是它使用loginlayout作为模板，主体是welcome

所以要解决这个问题，我需要一种方法来以某种方式在注销 case 语句的末尾，将 php 重定向到它确定要使用哪个布局的末尾。

有人有什么建议吗？我正在考虑使用 GOTO 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:34:51.870

您的案例条件应以冒号结尾，而不是分号：

```
 case "logout": 
```

不是

```
 case "logout"; 
```

# .net - 将 Oracle 连接设置为 HttpContext.User.Identity.Name

> ID：13399632
> 
> 赞同：0
> 
> 时间：2012-11-15T14:32:20.693
> 
> 标签：.net, oracle11g, data-access

我需要让用户正确记录更新/插入信息。目前，连接字符串用作我的用户，数据库上的触发器将其记录为更新记录的人。显然，使用该应用程序的每个人都将拥有相同的连接字符串信息，但 HttpContext.User.Identity.Names 不同。我希望与数据库的连接保持不变，但我希望记录用户 HttpContext.User.Identity.Name，而不是连接。无论如何，我可以做出这种区分吗？比如设置client_Identifier？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:34:58.940

[可能的答案](http://hellspawndev.blogspot.com/2012/02/oracle-auditing-using-clientidentifier.html)

刚刚找到这个链接，看起来它可能是一个可能的答案。设置连接的ClientId。看起来很简单。

# database - 当 magento 小部件第一次运行时，它们会改变数据库吗？

> ID：13399641
> 
> 赞同：2
> 
> 时间：2012-11-15T14:32:49.403
> 
> 标签：database, magento, widget

我一直在关注本教程[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-magento-widget-part-1](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-magento-widget-part-1)来创建一个 Magento 小部件作为我正在工作的扩展的一部分上。

虽然小部件已成功创建并按我想要的方式工作，但我更改了代码并开始收到以下错误

```
Warning: Invalid argument supplied for foreach() in app/code/core/Mage/Widget/Model/Widget/Instance.php on line 502 
```

当我改回代码时，错误仍然存​​在。**但是，当我将所有**模块复制到新的 Magento 安装时，不会出现错误。

尽管我的小部件没有明确使用数据库，但有人知道安装和卸载 Magento 小部件的行为是否会更改核心数据库表，如果确实如此，哪些表会被更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:10:15.870

core_resource 表包含所有模块的列表，因此添加新模块将导致创建新行。

如果您的模块的 sql 文件夹中有任何内容，则该代码将根据您的模块版本运行。

如果不确切知道运行和更改了哪些代码，就很难知道您的具体问题是什么。

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:05:24.630

因此，如果您按照链接到的教程进行操作，我认为它不会更改任何数据库设置。

您可以通过以下方法判断模块是否会添加表或修改表列。

假设模块名为 Foo_Bar 并且它安装在“社区”代码池中（而不是核心或本地）。

导航到应用程序/代码/社区/Foo/Bar。您至少通常会在那里看到 etc 和 Block 目录。如果您看到 sql 目录，则此模块会更改 db。您还需要了解一个模块是版本化的，并且可能最初会创建某个表，然后对其进行修改。

例如，您可以转到任何核心模块并查找相同的模块。例如，我正在运行 Enterprise 1.12 并转到：app/code/core/Mage/Sendfriend/sql/sendfriend_setup

我看到：mysql4-upgrade-1.5.9.9-1.6.0.0.php
mysql4-upgrade-0.7.3-0.7.4.php
mysql4-upgrade-0.7.2-0.7.3.php
mysql4-upgrade-0.7.1- 0.7.2.php
mysql4-install-0.7.0.php
install-1.6.0.0.php

注意升级 xy 命名法。这就是 core_resource 跟踪的内容。

如果您想知道新模块的设置保存在哪里，那实际上是在 core_config_data 中。尝试这个：

```
SELECT * FROM core_config_data where path like '%foo%'; 
```

假设您在名为“foo”的管理员中有一些设置。

现在回到你的问题。这是一个常见的 php 错误。您正在对无法迭代的东西运行 foreach。在那之前的代码可能不会返回数组或集合或其他任何东西。

理想情况下，您应该始终使用检查您正在迭代的项目是否为空的语句来包装 foreach。

您还可以使用 @ 语句关闭显示错误或抑制该错误，这是一种不好的做法......

# c# - 数据阅读器和列表

> ID：13399644
> 
> 赞同：0
> 
> 时间：2012-11-15T14:32:54.250
> 
> 标签：c#, asp.net, .net, ado.net

我正在尝试创建如下列表并使用数据读取器中的值对其进行更新。我在编写代码以从数据阅读器更新此列表时需要帮助。

```
internal IList<FilingDto> LoadStatusDtofromReader(IDataReader reader)
        {
            IList<FilingDto> filingstatus = new List<FilingDto>();

            while (reader !=null && reader.Read())
             {
                var dto = new FilingDto();
                var Year = (Decimal)reader["Year"];
                dto = new FilingDto()
                {

                    Controllerid = (Guid)reader["Collectorid"],
                    Status = DBNull.Value.Equals(reader["Status"]) ? string.Empty : reader["Status"].ToString(),
                    Year = Convert.ToInt32(Year),
                    Level = DBNull.Value.Equals(reader["Level"]) ? string.Empty : reader["ServiceLevel"].ToString()
                };

                filingstatus.Add(dto);
            }

            return status;
        } 
```

从数据读取器读取的代码如下，但我被困在两者之间，请帮我完成这个

```
DataTable FilingStatus = new DataTable("FilingStatus");
                SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["Connectionstring"].ConnectionString);
                sqlcon.Open();
                SqlCommand cmd = new SqlCommand("select Collectorid, Status, Year, Level from dbo.abc", sqlcon);

                using (IDataReader dr = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:39:01.333

试试这个，

```
 DataTable FilingStatus = new DataTable("FilingStatus");
    SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["CentralW2Database"].ConnectionString); 
    sqlcon.Open();
    SqlCommand cmd = new SqlCommand("select CollectorGuid, FileStatus,FilingYear, ServiceLevel from dbo.FilingRequestQueue", sqlcon);

    using (var dr = cmd.ExecuteReader()) 
    {
       IList<FilingDto> list = LoadStatusDtofromReader(dr);
    }

    internal IList<FilingDto> LoadStatusDtofromReader(IDataReader reader)
    {
        var filingstatus = new List<FilingDto>();

        while (reader != null && reader.Read())
        {
            var dto = new FilingDto
            {
                Controllerid = (Guid)reader["Collectorid"],
                Status = DBNull.Value.Equals(reader["Status"]) ? string.Empty : reader["Status"].ToString(),
                Year = Convert.ToInt32((Decimal)reader["Year"]),
                Level = DBNull.Value.Equals(reader["Level"]) ? string.Empty : reader["ServiceLevel"].ToString()
            };

            filingstatus.Add(dto);
        }

        return filingstatus;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:41:49.070

您应该在 SqlCommand 对象上调用 ExecuteReader

```
SqlCommand cmd = new SqlCommand("select Collectorid, Status, Year, Level from dbo.abc", sqlcon);
            SqlDataReader reader = cmd.ExecuteReader();
            try
            {
                while (reader.Read())
                {
                    Console.WriteLine(String.Format("{0}, {1}",
                        reader[0], reader[1]));
                }
            }
            finally
            {
                // Always call Close when done reading.
                reader.Close();
            } 
```

我建议使用类似实体框架的 ORM 而不是 ADO.NET

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:25:38.600

如果您可以重用原始功能，请执行

```
using (DataReader dr = cme.ExecuteReader()) 
{
    IList<FilingDto> list = LoadStatusDtofromReader(dr);
} 
```

# forms - 用于表单的 acrobat pdf 提交按钮 - xfdf 中的字段顺序

> ID：13399647
> 
> 赞同：1
> 
> 时间：2012-11-15T14:33:06.303
> 
> 标签：forms, pdf, post, acrobat, xfdf

我的解决方案：

1.  用户在浏览器中打开 Web 服务器上的 PDF 文件。
2.  用户正在输入表单字段并按下提交按钮。
3.  提交按钮通过 POST 将 XFDF 数据发送到我的 PHP 脚本。
4.  当我得到 POST 数据时，表单字段是随机顺序的。
5.  我正在基于 POST 创建 XFDF 文档，然后进一步处理它。最好字段应与 PDF 文件中的顺序相同。

问题：

我不知道如何控制 adobe reader 以某种可预测的顺序发送表单数据。表单字段编号（使用 TAB 时控制文档流）不会更改生成的 POST 数据顺序。任何想法如何订购字段？

# maven - Maven，切换到不同的配置文件

> ID：13399650
> 
> 赞同：0
> 
> 时间：2012-11-15T14:33:17.000
> 
> 标签：maven, profile, pom.xml, activation

我对部署到持续集成服务器的项目的正确 Maven 配置文件配置有问题。

在我的项目中，有些资源只需要在日常构建阶段的测试中包含，而另一些则需要在夜间构建中包含，并且它们永远不能同时包含，因为构建过程会失败，我可以通过同时激活一个配置文件在本地实现这一点。

持续集成服务器运行以下 maven 命令：-
在每日构建期间：

```
mvn clean package -Pci -Dci
```

-在夜间构建期间

```
mvn clean install -Dmaven.test.failure.ignore -Pci,nightly -Dci -Dnightly
```

如您所见，夜间构建命令包括在日常构建命令中定义的 Maven 变量和配置文件，这给我带来了一些麻烦，因为我只想同时激活一个配置文件。

具体来说，我想要的是拥有 3 个单独的配置文件：
-my-pforile（默认激活，不在 CI 服务器上使用）
-ci-profile（仅在每日构建时激活，在 CI 服务器上使用）
-nightly-profile（仅在每晚构建，在 CI 服务器上使用）

我怎样才能做到这一点？我几乎尝试了一切。重新配置 CI 服务器不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:50:46.203

当我必须使用不同的配置文件配置相同的构建时，使用 Jenkins 作为 CI，我通常会创建与配置文件一样多的构建，因此每个构建都使用正确的配置。

如果添加新构建不是一个选项，您可能可以尝试使用 exec 插件（[http://mojo.codehaus.org/exec-maven-plugin/](http://mojo.codehaus.org/exec-maven-plugin/)）之类的东西创建一个解决方法来从 ftp 下载资源（或别的东西）。您还必须创建一个 cron 作业（或等效的）以在构建之间替换正确的资源：晚上您将晚上的资源放在那里，早上放白天的资源。

但是考虑到这个过程会有多麻烦，可能最好尝试添加一个新的构建。

# jquery - 使用 jQuery 从 XML 中过滤查找结果

> ID：13399653
> 
> 赞同：1
> 
> 时间：2012-11-15T14:33:29.370
> 
> 标签：jquery

我有一个 XML 文档，它是一个 2003 电子表格 XML 文档，我需要从中获取数据。问题是单元格样式意味着 XML 将包含没有数据但应用了样式的行。我需要返回每行的第 10 个单元格中包含数据的行的列表。我怎么能用 jQuery 做到这一点？

XML 示例：

```
 <Worksheet ss:Name="Space">
  <Names>
   <NamedRange ss:Name="_FilterDatabase" ss:RefersTo="=Space!R1C1:R8C13"
    ss:Hidden="1"/>
  </Names>
  <Table ss:ExpandedColumnCount="13" ss:ExpandedRowCount="995" x:FullColumns="1"
   x:FullRows="1" ss:StyleID="s114" ss:DefaultColumnWidth="46.5">
   <Column ss:StyleID="s115" ss:AutoFitWidth="0"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="142.5"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="95.25"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="75.75"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="93"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="129"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="17.25"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="41.25"/>
   <Column ss:StyleID="s115" ss:Width="236.25"/>
   <Column ss:StyleID="s115" ss:AutoFitWidth="0" ss:Width="135.75"/>
   <Column ss:StyleID="s116" ss:Width="51.75"/>
   <Column ss:StyleID="s116" ss:Width="53.25"/>
   <Column ss:StyleID="s116" ss:Width="18.75"/>
   <Row ss:AutoFitHeight="0" ss:Height="63" ss:StyleID="s117">
    <Cell ss:StyleID="s87"><Data ss:Type="String">Name</Data><NamedCell
      ss:Name="_FilterDatabase"/><NamedCell ss:Name="Space.Name"/></Cell>
    <Cell ss:StyleID="s87"><Data ss:Type="String">CreatedBy</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s88"><Data ss:Type="String">CreatedOn</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s87"><Data ss:Type="String">Category</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s87"><Data ss:Type="String">FloorName</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s87"><Data ss:Type="String">Description</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s86"><Data ss:Type="String">ExtSystem</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s86"><Data ss:Type="String">ExtObject</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s86"><Data ss:Type="String">ExtIdentifier</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s87"><Data ss:Type="String">RoomTag</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s112"><Data ss:Type="String">UsableHeight</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s112"><Data ss:Type="String">GrossArea</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s195"><Data ss:Type="String">NetArea</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
   </Row>
   <Row>
    <Cell ss:StyleID="s125"><Data ss:Type="Number">100</Data><NamedCell
      ss:Name="_FilterDatabase"/><NamedCell ss:Name="Space.Name"/></Cell>
    <Cell ss:StyleID="s126"><Data ss:Type="String">.com</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s93"><Data ss:Type="DateTime">2012-11-01T11:05:28.000</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s119"><Data ss:Type="String">Undefined</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s120"><Data ss:Type="String">01 Main Level</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s99"><Data ss:Type="String">GATHER</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s121"><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s121"><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s121"><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s122"><Data ss:Type="String">100 - Gathering Room</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s123"><Data ss:Type="Number">52</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s123"><Data ss:Type="Number">1674.1096940375501</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s124"><Data ss:Type="String">n/a</Data><NamedCell
      ss:Name="_FilterDatabase"/></Cell>
   </Row> 
```

到目前为止，我的代码将返回所有行，但未针对具有数据的单元格进行过滤：

```
$(xml).find("Worksheet[ss\\:Name='Space'] Table Row") 
```

我尝试在查找末尾应用 .filter ，但我不明白应该如何应用过滤器。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:37:05.143

您应该尝试以下方法：

```
$(xml).find("Worksheet[ss\\:Name='Space'] Row")
    .find('Cell:eq(9)').not(':empty').parent(); 
```

您直接转到`Cell`元素的位置，然后删除空的元素并返回它们各自的`Row`父元素。

请记住，为了获得第 10 个`Cell`，您必须使用`:eq(9)`，正如您在[jQuery 的文档](http://api.jquery.com/eq-selector/)中看到的那样：

> 由于 JavaScript 数组使用从 0 开始的索引，因此这些选择器反映了这一事实。这就是 $('.myclass:eq(1)') 选择文档中类 myclass 的第二个元素而不是第一个元素的原因。

或者，您可以使用`:nth-child(10)`相同的结果，即：

> 使用基于 1 的索引以符合 CSS 规范。

# asp.net-mvc-3 - 使用实体框架进行数据库迁移

> ID：13399654
> 
> 赞同：1
> 
> 时间：2012-11-15T14:33:35.043
> 
> 标签：asp.net-mvc-3, sql-server-2008, c#-4.0, entity-framework-4.3

我在数据库（SQL Server 2008）中有奇怪的结果-。

我使用 Entity Framework 处理 ASP.NET MVC 3 项目，并使用数据库迁移。

当我修改数据库的架构时，在配置文件 ( `Configuration.cs`) 种子方法中，我有以下代码在任何迁移后初始化数据：

```
protected override void Seed(YAnnonce.Core.Repository.AnnonceDbContext context)
{
   var categorieAnnonces = new List<CategorieAnnonce> 
       {
          new CategorieAnnonce{ CategorieAnnonceID = 1, CategorieName="Emploi"},
          new CategorieAnnonce{ CategorieAnnonceID = 2, CategorieName="Stage"},                        
       };

   categorieAnnonces.ForEach(a => context.CategorieAnnonces.AddOrUpdate(a));
   context.Annonces.AddOrUpdate(new Annonce[10]{
            new Annonce {AnnonceID=250, titre = "Offre d'emploi", CategorieAnnonce = categorieAnnonces[0], description="le cabinet de recrutement le pole offre à toute pe",date=DateTime.Now,etat=1, mode = 0, EndDate = DateTime.Now},
            new Annonce {AnnonceID=490, titre = "Formation", CategorieAnnonce = categorieAnnonces[1], description="Le cabinet de recrutement et de formation maroc ",date=DateTime.Now,etat=0, mode = 1, EndDate = DateTime.Now},
            new Annonce {AnnonceID=380,titre = "Freelance", CategorieAnnonce =categorieAnnonces[1], description="Bonjour, jeune développeur en informatique vous assurant ",date=DateTime.Now, etat=1, mode = 1, EndDate = DateTime.Now});
} 
```

但问题是任何迁移后都会将相同的数据添加到数据库中，我不想要这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:00:34.223

您必须确定应该在哪个状态下使用数据库迁移。有不同的方法可以做到这一点，我建议其中一种。写一个这样的类并将Seed函数放入其中：

```
public class DataContextInitializer:DropCreateDatabaseIfModelChanges<YAnnonce.Core.Repository.AnnonceDbContext>
{
    var categorieAnnonces = new List<CategorieAnnonce> 
       {
          new CategorieAnnonce{ CategorieAnnonceID = 1, CategorieName="Emploi"},
          new CategorieAnnonce{ CategorieAnnonceID = 2, CategorieName="Stage"},                        
       };

   categorieAnnonces.ForEach(a => context.CategorieAnnonces.AddOrUpdate(a));
   context.Annonces.AddOrUpdate(new Annonce[10]{
            new Annonce {AnnonceID=250, titre = "Offre d'emploi", CategorieAnnonce = categorieAnnonces[0], description="le cabinet de recrutement le pole offre à toute pe",date=DateTime.Now,etat=1, mode = 0, EndDate = DateTime.Now},
            new Annonce {AnnonceID=490, titre = "Formation", CategorieAnnonce = categorieAnnonces[1], description="Le cabinet de recrutement et de formation maroc ",date=DateTime.Now,etat=0, mode = 1, EndDate = DateTime.Now},
            new Annonce {AnnonceID=380,titre = "Freelance", CategorieAnnonce =categorieAnnonces[1], description="Bonjour, jeune développeur en informatique vous assurant ",date=DateTime.Now, etat=1, mode = 1, EndDate = DateTime.Now});
} 
```

然后在您的 main/root web.config 文件中，添加以下键以在应用程序运行期间运行上述类：

```
<appSettings>
    <add key="DatabaseInitializerForType YAnnonce.Core.Repository.AnnonceDbContext, [Project_Name]" value="DataContextInitializer, [Project_Name]" />
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T00:03:12.533

插入前检查记录是否存在。如果您考虑在单个事务中插入数据，那么您可以在插入之前搜索是否存在任何一条记录。IE

```
if(!context.Annonces.Any(x=>x.AnnonceID==250)){ //insert records here } 
```

# video - 直播和直播的区别？

> ID：13399657
> 
> 赞同：10
> 
> 时间：2012-11-15T14:33:43.540
> 
> 标签：video, streaming, video-streaming, live-streaming

好的，所以我试图清楚地展示播放视频的不同方式，但我被卡住了。除了“流媒体”和“直播”之外，似乎没有任何明确定义的术语，而且这些术语的定义似乎因人而异，因站点而异。

在我的电脑上播放视频没有流式传输？但是这个术语是什么？本地播放？

在我的电脑上播放保存在服务器上的预先录制的视频 - 这是流式传输吗？

在我的电脑上播放互联网上的实时视频（如网络摄像头） - 这也是流式传输吗？直播？

是否有任何明确的不同术语可以帮助减少所有这些混乱？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-08-12T17:34:38.357

嗯，我不喜欢这些答案中的任何一个，甚至是@Jimmery 自己接受的答案。答案`user2175703`很接近，但并不完全正确。

*   **下载**：向（通常是 HTTP）服务器发出（通常是 HTTP GET）请求以获取整个文件的行为。客户端连接到服务器，请求文件（电影、歌曲、图像、PDF 等），然后服务器将整个文件（基本上是一次）发送回客户端。但是在下载范例下，您必须等待整个文件完成下载才能打开并查看它。
*   **流**式传输：是*下载*的替代方案，需要一个特殊的流式传输客户端和一个特殊的流式传输服务器，两者都使用特殊的流式传输协议。当您流媒体时，流媒体客户端（例如 HTML5 Video、Flash、VLC 等）通过流协议（RTSP 等）连接到流媒体服务器（例如 VideoLAN、Red5 或 Wowza 等）并询问它开始*流式传输*。然后服务器在一段时间内将该媒体文件（通常是 MP4 或类似文件）提供给客户端。然后客户端可以开始播放媒体文件*，因为它正在从服务器下载/流式传输，而不必等待整个文件首先下载*. 但是，使用普通的 'ole 流媒体，在客户端连接到它并请求流之前，媒体服务器可以使用整个 MP4（或类似）文件。
*   **实时流式传输**：与流式传输非常相似，除了在这种情况下 MP4 文件（或类似文件）是实时录制的“实时”流式传输。想想网络摄像头或实时视频会议。或者一些网站直播体育赛事。或播客。[**或者即时磁带（现在什么时候？很快。）**](https://www.youtube.com/watch?v=5drjr9PmTMA)。在这里，当媒体服务器收到流式传输 MP4 的请求时，MP4 仍在制作过程中（毕竟，它是*直播*的！）。
    *   因此，对于常规（非实时）流媒体，MP4 文件是一个静态的、预先录制的文件，位于媒体服务器可以访问的文件系统的某个位置
    *   但是对于实时流媒体，MP4 本质上是一个包含输入流和输出流的容器：
        *   某处某处正在将实时提要流式传输到 MP4 文件
        *   然后，媒体服务器正在读取此文件，因为它会即时更新，并将新内容流式传输到任何连接的客户端

这并不*完全*是实时流媒体的幕后情况（实际上它非常复杂），但足够接近，可以很好地从 10,000 英尺的角度了解它与非实时流媒体的不同之处。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-14T07:03:28.373

流式传输：在服务器中创建、编辑和存储的内容，每当客户端发出请求时，服务器都会提供内容。

实时流式传输：由服务器观察并立即（无需任何编辑过程）传输到连接到该服务器的客户端的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T17:57:08.803

每当您在计算机上播放某些内容时，您就有了流媒体。但是在线流媒体并不是我们通常所说的来自保存的内容。实况流实际上是在其他媒体上广播的，例如天线和/或电缆和/或卫星和/或 ADSL，并暴露给大量观众。例如在公共媒体上播放的新闻、连续剧、儿童节目、电影等。视频会议也是直播。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:55:51.913

流媒体和直播之间没有区别。但是，直播和流媒体之间是有区别的。流媒体是您将视频直接广播到 youtube 等来源的地方。直播基本上是您在视频发生时录制视频并在编辑视频后发布它，或者在短流中，除非您对其进行编辑并稍后发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T09:59:45.977

自从我七个月前提出这个问题以来，与同事进行了多次讨论，并在网上大量搜索了这个主题，对于流媒体和直播流媒体是什么或不是什么，还没有明确的定义。

# ios - 在 iOS 5.1 中获取 CellID、MCC、MNC、LAC 和网络

> ID：13399659
> 
> 赞同：18
> 
> 时间：2012-11-15T14:33:57.290
> 
> 标签：ios, gsm, 3g, iphone-privateapi, cellid

我需要在 iOS 5.1 (iPhone 4S) 中检索当前 Serving Cell Tower 的 CellID、MCC、MNC、LAC 和网络（GSM、3G）。我知道此信息可用，因为我可以在 FieldTest 模式下看到它（调用 ****3001#12345#**** 后可访问）。我想它可以通过 Private/Undocumented iOS Frameworks 访问。

在问题[iphone, check values of cellId / Lac](https://stackoverflow.com/questions/12039930/iphone-check-values-of-cellid-lac)作者指出*我可以在 iOS 上获取无线电信息 cellId、Lac、MNC、MCC*，但没有提供有关如何执行此操作的信息。

谁能告诉我如何获取这些信息？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-16T10:03:49.837

我知道如何在 iOS 5.x - 7.x 上执行此操作的三种方法。它们都使用来自 CoreTelephony.framework 的私有 API。支持 GSM 和 UMTS。

1) 使用细胞监视器

```
struct CTResult
{
    int flag;
    int a;
};

extern CFStringRef const kCTCellMonitorCellType;
extern CFStringRef const kCTCellMonitorCellTypeServing;
extern CFStringRef const kCTCellMonitorCellTypeNeighbor;
extern CFStringRef const kCTCellMonitorCellId;
extern CFStringRef const kCTCellMonitorLAC;
extern CFStringRef const kCTCellMonitorMCC;
extern CFStringRef const kCTCellMonitorMNC;
extern CFStringRef const kCTCellMonitorUpdateNotification;

id _CTServerConnectionCreate(CFAllocatorRef, void*, int*);
void _CTServerConnectionAddToRunLoop(id, CFRunLoopRef, CFStringRef);

#ifdef __LP64__

void _CTServerConnectionRegisterForNotification(id, CFStringRef);
void _CTServerConnectionCellMonitorStart(id);
void _CTServerConnectionCellMonitorStop(id);
void _CTServerConnectionCellMonitorCopyCellInfo(id, void*, CFArrayRef*);

#else

void _CTServerConnectionRegisterForNotification(struct CTResult*, id, CFStringRef);
#define _CTServerConnectionRegisterForNotification(connection, notification) { struct CTResult res; _CTServerConnectionRegisterForNotification(&res, connection, notification); }

void _CTServerConnectionCellMonitorStart(struct CTResult*, id);
#define _CTServerConnectionCellMonitorStart(connection) { struct CTResult res; _CTServerConnectionCellMonitorStart(&res, connection); }

void _CTServerConnectionCellMonitorStop(struct CTResult*, id);
#define _CTServerConnectionCellMonitorStop(connection) { struct CTResult res; _CTServerConnectionCellMonitorStop(&res, connection); }

void _CTServerConnectionCellMonitorCopyCellInfo(struct CTResult*, id, void*, CFArrayRef*);
#define _CTServerConnectionCellMonitorCopyCellInfo(connection, tmp, cells) { struct CTResult res; _CTServerConnectionCellMonitorCopyCellInfo(&res, connection, tmp, cells); }

#endif 
```

...

```
id CTConnection = _CTServerConnectionCreate(NULL, CellMonitorCallback, NULL);
_CTServerConnectionAddToRunLoop(CTConnection, CFRunLoopGetCurrent(), kCFRunLoopCommonModes);
_CTServerConnectionRegisterForNotification(CTConnection, kCTCellMonitorUpdateNotification);
_CTServerConnectionCellMonitorStart(CTConnection);

int CellMonitorCallback(id connection, CFStringRef string, CFDictionaryRef dictionary, void *data)
{
    int tmp = 0;
    CFArrayRef cells = NULL;
    _CTServerConnectionCellMonitorCopyCellInfo(connection, (void*)&tmp, &cells);
    if (cells == NULL)
    {
        return 0;
    }

    for (NSDictionary* cell in (NSArray*)cells)
    {
        int LAC, CID, MCC, MNC;

        if ([cell[(NSString*)kCTCellMonitorCellType] isEqualToString:(NSString*)kCTCellMonitorCellTypeServing])
        {
            LAC = [cell[(NSString*)kCTCellMonitorLAC] intValue];
            CID = [cell[(NSString*)kCTCellMonitorCellId] intValue];
            MCC = [cell[(NSString*)kCTCellMonitorMCC] intValue];
            MNC = [cell[(NSString*)kCTCellMonitorMNC] intValue];
        }
        else if ([cell[(NSString*)kCTCellMonitorCellType] isEqualToString:(NSString*)kCTCellMonitorCellTypeNeighbor])
        {
        }
    }

    CFRelease(cells);

    return 0;
} 
```

2) 使用 CTTelephonyCenter

`kCTRegistrationCellChangedNotification`每次更改当前服务的蜂窝塔时都会发送。

```
extern CFStringRef const kCTRegistrationCellChangedNotification;
extern CFStringRef const kCTRegistrationGsmLac;
extern CFStringRef const kCTRegistrationLac;
extern CFStringRef const kCTRegistrationGsmCellId;
extern CFStringRef const kCTRegistrationCellId;

CFStringRef CTSIMSupportCopyMobileSubscriberCountryCode(CFAllocatorRef);
CFStringRef CTSIMSupportCopyMobileSubscriberNetworkCode(CFAllocatorRef);

id CTTelephonyCenterGetDefault();
void CTTelephonyCenterAddObserver(id, void, CFNotificationCallback, CFStringRef, void, CFNotificationSuspensionBehavior); 
```

...

```
CTTelephonyCenterAddObserver(CTTelephonyCenterGetDefault(), NULL, callback, NULL, NULL, CFNotificationSuspensionBehaviorHold);

void callback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    NSString* notification = (NSString*)name;
    NSDictionary *cellInfo = (NSDictionary*)userInfo;

    if ([notification isEqualToString:(NSString*)kCTRegistrationCellChangedNotification])
    {
        int LAC, CID, MCC, MNC;

        if (cellInfo[(NSString*)kCTRegistrationGsmLac])
        {
            LAC = [cellInfo[(NSString*)kCTRegistrationGsmLac] intValue];
        }
        else if (data[(NSString*)kCTRegistrationLac])
        {
            LAC = [cellInfo[(NSString*)kCTRegistrationLac] intValue];
        }

        if (cellInfo[(NSString*)kCTRegistrationGsmCellId])
        {
            CID = [cellInfo[(NSString*)kCTRegistrationGsmCellId] intValue];
        }
        else if (cellInfo[(NSString*)kCTRegistrationCellId])
        {
            CID = [cellInfo[(NSString*)kCTRegistrationCellId] intValue];
        }

        MCC = [[(NSString*)CTSIMSupportCopyMobileSubscriberCountryCode(NULL) autorelease] intValue];
        MNC = [[(NSString*)CTSIMSupportCopyMobileSubscriberNetworkCode(NULL) autorelease] intValue];
    }
} 
```

3）这将返回当前服务的蜂窝塔

```
struct CTResult
{
    int flag;
    int a;
};

id _CTServerConnectionCreate(CFAllocatorRef, void*, int*);

#ifdef __LP64__

void _CTServerConnectionGetLocationAreaCode(id, int*);
void _CTServerConnectionGetCellID(id, int*);

#else

void _CTServerConnectionGetLocationAreaCode(struct CTResult*, id, int*);
#define _CTServerConnectionGetLocationAreaCode(connection, LAC) { struct CTResult res; _CTServerConnectionGetLocationAreaCode(&res, connection, LAC); }

void _CTServerConnectionGetCellID(struct CTResult*, id, int*);
#define _CTServerConnectionGetCellID(connection, CID) { struct CTResult res; _CTServerConnectionGetCellID(&res, connection, CID); }

#endif 
```

...

```
int CID, LAC, MCC, MNC;

id CTConnection = _CTServerConnectionCreate(NULL, NULL, NULL);
_CTServerConnectionGetCellID(CTConnection, &CID);
_CTServerConnectionGetLocationAreaCode(CTConnection, &LAC);
MCC = [[(NSString*)CTSIMSupportCopyMobileSubscriberCountryCode(NULL) autorelease] intValue];
MNC = [[(NSString*)CTSIMSupportCopyMobileSubscriberNetworkCode(NULL) autorelease] intValue]; 
```

**更新**

`struct CTResult`在 ARM64 (iPhone 5S) 上，所有接受参数的 CoreTelephony 函数都存在问题。显然，64 位版本的 CoreTelephony 不带`struct CTResult`参数地导出这些函数。因此，如果您像过去那样调用这些函数，您将在 ARM64 上遇到错误 - 参数将是错误的。我更新了函数声明，以便它们可以在 32 位和 64 位 ARM 架构上运行。我对其进行了测试，它适用于 iPhone 4S 和 iPhone 5S。

这仅适用于 ARM64。如果您为 32 位 ARM 架构构建项目，则不存在此类问题。您的应用程序将使用需要参数的 32 位版本的 CoreTelephony `struct CTResult`。

**8.3 更新**

从 iOS 8.3 开始，上述所有解决方案都需要授权才能工作

```
<key>com.apple.CommCenter.fine-grained</key>
<array>
    <string>spi</string>
</array> 
```

不仅单元监视器受到保护，而且似乎所有 CoreTelephony 通知现在都需要该权利才能工作。例如，`kCTMessageReceivedNotification`也受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:03:27.417

suscriberCellularProvider 是一个对象方法（相对于类方法）。

你可以在这里看看如何使用它： [确定 iPhone 用户的国家](https://stackoverflow.com/questions/3043335/determine-iphone-users-country)

我认为 CTCarrier 有 MCC 和 MNC。

您可以使用以下问题中的代码检查网络类型： [如何检查 iPhone 是否支持 CDMA 或 GS​​M](https://stackoverflow.com/questions/7596079/how-to-check-if-iphone-supports-cdma-or-gsm)

并查看 CellID 的这个问题： [CTServerConnectionGetCellID 例程核心电话](https://stackoverflow.com/questions/5980575/ctserverconnectiongetcellid-routine-core-telephony)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T03:30:52.943

下面的代码是如何插入权限以使代码在 ios 8.3 上工作。从 iOS 8.3 开始，上述所有解决方案都需要授权才能工作

```
<key>com.apple.CommCenter.fine-grained</key>
<array>
    <string>spi</string>
</array> 
```

确实，据说上面提到的代码可以在 ios 8.3 及更高版本上运行以获取 lac 和单元格。但是我真的不知道如何在越狱手机上插入上述内容。任何人都可以提供任何详细信息。

# algorithm - 在 Verilog 中拆分位数组

> ID：13399663
> 
> 赞同：0
> 
> 时间：2012-11-15T04:38:53.393
> 
> 标签：algorithm, verilog

我正在 Verilog 上设计一个基本的 AES 算法，我需要将一个 128 位数组分成 16 个部分，每个部分为 8 位。

例如（基本 8 位示例），如果我收到 10111011 我需要生成 4 个输出 10 11 10 11

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T17:18:28.030

从数组中检索字节很简单：

```
module huge_array (
  input [128-1:0] data
);
  wire [7:0] first_byte,
  assign first_byte = data[7:0];

  wire [7:0] second_byte,
  assign second_byte = data[8*2-1:8*1];
endmodule 
```

如果将数据格式化到内存中会容易得多。

```
module huge_array2 (
  input [7:0] data [0:16]
);
  wire [7:0] first_byte,
  assign first_byte = data[0];

  wire [7:0] second_byte,
  assign second_byte = data[1];
endmodule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T22:49:31.720

双包装数组有效：

```
reg [127:0] in;
wire [15:0] [7:0] out_1 = in; // msb in entry 15
wire [0:15] [7:0] out_2 = in; // msb in entry 0 
```

如果一次只需要读取一个字节，则可以使用 Verilog-2001 或 SystemVerilog 如下：

```
reg [127:0] in;
reg [3:0] idx;
wire [7:0] out = in[8*idx +: 8]; 
```

# mysql - ORDER BY 单词开头或字段内

> ID：13399680
> 
> 赞同：2
> 
> 时间：2012-11-15T14:35:09.250
> 
> 标签：mysql, sql-order-by

我在 mysql-db 上有一个 ajax 搜索。示例：搜索我查询的“man”：

```
SELECT id FROM table WHERE name LIKE '%man%; 
```

我现在想对结果进行排序，以使所有结果都按字母顺序从搜索开始：

```
man
mankind 
```

之后，我希望所有结果都按字母顺序排列搜索 INSIDE，例如：

```
iron man
woman 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:39:17.767

您可以按搜索词在字符串中的位置排序：

```
SELECT id 
FROM table 
WHERE name LIKE '%man%'
ORDER BY INSTR(name, 'man'), name 
```

另见：[`INSTR()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_instr),[`LOCATE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)

您还可以更改表达式以仅区分字符串的开头或其他任何地方：

```
ORDER BY IF(INSTR(name, 'man'), 1, 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:38:13.940

您可以构造您的`ORDER BY`using`CASE`语句来验证子字符串。注意：我在`UPPER()`这里使用将搜索值和列值都转换为大写，以进行不区分大小写的匹配。如果这不是您的需要，请删除`UPPER()`.

```
ORDER BY
  CASE 
    /* Matches the start of the string */
    WHEN UPPER(LEFT(name, 3)) = 'MAN' THEN 1
    /* Doesn't match the end or the start (in the middle) */
    WHEN UPPER(RIGHT(name, 3)) <> 'MAN' THEN 2
    /* Matches the end of the string */
    WHEN UPPER(RIGHT(name, 3)) = 'MAN' THEN 3
    ELSE 4
  END,
  /* Then order by the name column */
  name 
```

*这种方法应该是相当可移植的，但我更喜欢`INSTR()`下面的答案。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:38:38.463

试试这个

```
SELECT id FROM table WHERE name LIKE 'man%';
UNION
SELECT id FROM table WHERE name LIKE '%man%'; 
```

# mysql - 将 SQL 结果行合并在一起

> ID：13399683
> 
> 赞同：0
> 
> 时间：2012-11-15T14:35:18.483
> 
> 标签：mysql, sql, pivot, entity-attribute-value

我正在研究用于存储有关对象的无模式元数据的 EAV 存储系统，现在正在研究一种使其可搜索的方法，但大部分处理由数据库服务器完成。

EAV的表格是：

```
`entityID` - INT(11)
`entity` - VARCHAR(128)
`attribute` - VARCHAR(128)
`value` - BLOB 
```

这是我的声明：

```
SELECT 
    `entity`,
    (CASE WHEN `attribute` = 'bob' THEN `value` ELSE NULL END) `bob`,
    (CASE WHEN `attribute` = 'dean' THEN `value` ELSE NULL END) `dean`
FROM `eav` 
```

它返回一组不错的行（如预期的那样），如下所示：

```
+----------+------+------+
|  entity  | bob  | dean |
+----------+------+------+
| testEnt  | foo  | NULL | // attribute = bob
+----------+------+------+
| testEnt  | NULL | NULL | // another test attribute
+----------+------+------+
| testEnt  | NULL | NULL | // another test attribute
+----------+------+------+
| testEnt2 | foo  | NULL | // attribute = bob
+----------+------+------+
| testEnt2 | NULL | foo  | // attribute = dean
+----------+------+------+ 
```

但是当我附加时`GROUP BY (Entity)`，结果变成了这样：

```
+----------+------+------+
|  entity  | bob  | dean |
+----------+------+------+
| testEnt  | foo  | NULL |
+----------+------+------+
| testEnt2 | foo  | NULL |
+----------+------+------+ 
```

所以使用`HAVING`之后的语法停止工作。有没有办法让返回的结果是：

```
+----------+------+------+
|  entity  | bob  | dean |
+----------+------+------+
| testEnt  | foo  | NULL |
+----------+------+------+
| testEnt2 | foo  | foo  |
+----------+------+------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:38:13.963

唯一的问题是您做`GROUP`了记录，但没有汇总字段。通过使用聚合字段来尝试`MAX`。

```
SELECT 
    `entity`,
    MAX(CASE WHEN `attribute` = 'bob' THEN `value` ELSE NULL END) `bob`,
    MAX(CASE WHEN `attribute` = 'dean' THEN `value` ELSE NULL END) `dean`
FROM `eav`
GROUP BY `entity` 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6a6c3/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:38:33.067

`CASE`使用和应用聚合函数`GROUP BY`。由于值是字符串，您可以使用 a`MAX()`或`MIN()`来返回结果：

```
SELECT 
    `entity`,
    Max(CASE WHEN `attribute` = 'bob' THEN `value` ELSE NULL END) `bob`,
    Max(CASE WHEN `attribute` = 'dean' THEN `value` ELSE NULL END) `dean`
FROM `eav`
group by `entity` 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/69195/1)

如果您有未知数量的`attribute`值要返回，您可以使用准备好的语句来获取结果：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when attribute = ''',
      attribute,
      ''' then value end) AS ',
      attribute
    )
  ) INTO @sql
FROM eav;

SET @sql = CONCAT('SELECT entity, ', @sql, ' 
                  FROM eav 
                   GROUP BY entity');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/69195/3)

两者的结果将是：

```
|   ENTITY | BOB |   DEAN |
---------------------------
|  testEnt | foo | (null) |
| testEnt2 | foo |    foo | 
```

# asp.net-mvc - 在剑道网格下拉列表中添加选择值

> ID：13399688
> 
> 赞同：0
> 
> 时间：2012-11-15T14:35:45.220
> 
> 标签：asp.net-mvc, kendo-ui

目前，如果您选择选择值选项，它不会选择一个值。无论如何我可以在内联网格下拉列表中添加选择值吗？添加和编辑记录时

GridForeignKey.cshtml

```
@(
 Html.Kendo().DropDownList()
        .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
        .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])
        .OptionLabel("Select value")
) 
```

看法：

```
 columns.ForeignKey(p => p.SSID, (System.Collections.IEnumerable)ViewData["dataStatus"], "OptID", "OptName"); 
```

控制器：

```
 private void PopulateDataStatus()
        {
            ViewData["dataStatus"] = new HEntities().COpts
                       .Select(e => new COptModel
                       {

                           OptID = e.OptID,
                           OptName = e.OptName,
                           CTypeID = e.CTypeID

                       })
                       .Where(e => e.CTypeID == 99)
                       .OrderBy(e => e.OptName);
        } 
```

那么我如何添加选择值文本，请指教？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:29:59.387

我现在已经重读了你的问题几次，我不确定我是否理解它。如果您询问如何选择默认值，那么您想使用**SelectedIndex**方法，其中参数是索引值（注意它是从零开始的）。例如，要将第二个选项设为默认值（因为它是从零开始的）：

```
@(
Html.Kendo().DropDownList()
  .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
  .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"])
  .OptionLabel("Select value")
  .SelectedIndex(1)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:57:08.773

**OptionsLabel** 总是有一个空值。

**要更改此设置并设置值，您需要将其添加为第一项，并带有自己的文本（“请选择”）和传递给BindTo**方法的集合的值（您喜欢的值）（并完全删除 OptionLabel）。

# c# - 如何让我的 C# PictureBox 传播鼠标事件？（提供截图）

> ID：13399689
> 
> 赞同：2
> 
> 时间：2012-11-15T14:35:45.467
> 
> 标签：c#, forms, events, picturebox

我正在使用 C# 表单创建一个程序，该程序充当另一个应用程序窗口顶部的叠加层。整个表单几乎是一个透明的 PictureBox，它横跨整个区域并在这里和那里绘制形状。

现在，我只能与覆盖完全透明的底层窗口进行交互，如何使非透明区域不拦截鼠标事件？

为清楚起见，这是一个屏幕截图：
![在此处输入图像描述](../Images/a6cdcabaf9f11d11e1b1667d17506055.png)

Skype 是底层应用程序。我的叠加层绘制了蓝色（和灰色）框。我需要能够单击框下方的链接。

不幸的是，我没有要显示的代码，因为我不确定程序的哪个部分实际上处理了这样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T01:39:33.087

您可以尝试订阅形状单击事件，然后通过一些 Windows API 将事件转发到“覆盖”窗口。如果您有一个指向应用程序主窗口的指针（您可以通过 Process 对象自己启动它，或者通过其他方式获得它），您可以简单地将鼠标事件发送到该窗口。

这是一个获取屏幕当前点并将其发送到 Skype 的第一个实例的示例。

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
static extern IntPtr SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam);

[StructLayout(LayoutKind.Explicit)]
struct LParamLocation
{
    [FieldOffset(0)]
    int Number;

    [FieldOffset(0)]
    public short X;

    [FieldOffset(2)]
    public short Y;

    public static implicit operator int(LParamLocation p)
    {
        return p.Number;
    }
}

private void Form1_MouseClick(object sender, MouseEventArgs e)
{
    var process = Process.GetProcessesByName("skype");
    LParamLocation points = new LParamLocation();
    points.X = (short)PointToScreen(e.Location).X;
    points.Y = (short)PointToScreen(e.Location).Y;

    SendMessage(process[0].MainWindowHandle, 0x201, 0, points); //MouseLeft down message
    SendMessage(process[0].MainWindowHandle, 0x202, 0, points); //MouseLeft up message
} 
```

或者，您可以尝试添加一个窗口样式来告诉它通过所有鼠标事件。

```
[DllImport("user32.dll")]
static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);
[DllImport("user32.dll")]
static extern int GetWindowLong(IntPtr hWnd, int nIndex);

protected override void OnHandleCreated(EventArgs e)
{
    base.OnHandleCreated(e);
    int style = GetWindowLong(Handle, -20);
    style |= 0x00000020; // Enables Pass-Through of events
    style |= 0x00080000; // Enables Pass-Through to layered windows
    SetWindowLong(Handle, -20, style);
} 
```

# eclipse - 更改 web.xml 在 Eclipse 中没有效果（Eclipse Juno、Tomcat 6）

> ID：13399694
> 
> 赞同：1
> 
> 时间：2012-11-15T14:36:09.630
> 
> 标签：eclipse, jsp, tomcat, servlets

我对 Web 编程非常陌生，正在尝试编写一个简单的应用程序来从输入表单中收集数据并通过`HTTPServletRequest`. 我知道每个 servlet 都需要映射到里面的特定 URL `web.xml`。我的`web.xml`样子如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>InputFormTest</display-name>
  <welcome-file-list>
    <welcome-file>InputForm.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description></description>
    <display-name>InputFormTest</display-name>
    <servlet-name>InputFormTest</servlet-name>
    <servlet-class>com.jsp.core.InputFormTest</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>InputFormTest</servlet-name>
    <url-pattern>/InputFormTest</url-pattern>
  </servlet-mapping>
</web-app> 
```

InputForm.jsp 正确显示。我已经使用 Eclipse 的上下文菜单添加了 InputFormTest servlet，即 New -> Servlet，它具有以下代码：

```
package jsp.core;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class InputFormTest
 */
public class InputFormTest extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head>");
        out.println("<title>InputFormTest</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>User inserted: " + request.getParameter("id") + "</h1>");
        out.println("</body>");
        out.println("</html>");
    }
} 
```

**我有两个问题：**

1.  首先，在 Eclipse 中运行应用程序后，我收到以下错误

    HTTP 状态 404 - /InputFormTest

    * * *

    类型状态报告

    消息 /InputFormTest

    描述 请求的资源不可用。

    * * *

    Apache Tomcat/6.0.36

2.  `<url-pattern>/InputFormTest</url-pattern>`其次，更改`web.xml`不会影响上述输出，这很奇怪，因为我认为`message /InputFormTest`应该反映内部的设置`web.xml`

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:20:13.707

好的，我终于想通了。可以猜到，答案很简单：Eclipse 内部浏览器缓存页面。

这意味着，在使用“Run as -> Run on server”运行新更改的项目后，Eclipse 内部浏览器中显示的页面是一个旧的缓存页面。之后需要手动刷新。在 Web 开发项目的情况下有一种奇怪的行为。除此之外，一切正常 - 案件已结案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T19:59:11.547

右键单击服务器和服务器资源管理器，然后单击清理。再次尝试运行应用程序。我认为它会起作用。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T05:41:02.697

只是试图添加到上面的答案：

如果您已经清除了服务器的缓存并刷新了您的项目，但仍然无法正常工作，请尝试清除您正在使用的 Web 浏览器的缓存。这是我必须执行的最后一步，以使更新的 Web xml 正常工作。

# xml - 将批量 XML 数据加载到 oracle

> ID：13399698
> 
> 赞同：1
> 
> 时间：2012-11-15T14:36:16.433
> 
> 标签：xml

所以这一切.. 我有一个大的 XML 数据，我需要导入到 oracle 中。

我已经尽力搜索了谷歌，发现我们需要根据xml字段创建表，然后导入它。但我需要知道是否有可能使用 XML 字段自动创建表字段。因为我不确定 xml 中的字段数。请让我知道如何做到这一点..

# onclick - Fullcalendar onclick 显示日视图

> ID：13399699
> 
> 赞同：4
> 
> 时间：2012-11-15T14:36:23.227
> 
> 标签：onclick, fullcalendar, days

我是 Javascript 的新手，尤其是 JSON 和 Jquery。我已经成功实现了 FullCalendar 的月视图，但是是否有根据用户单击月视图的日期显示或弹出日视图？任何帮助将非常感激

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T22:09:49.877

我猜您想在用户单击月视图中的任何一天时切换到日视图。如果是这样，您可以通过使用FullCalendar 的回调来实现`dayClick`。`changeView`

检查这个小提琴的演示：http: [//jsfiddle.net/100thGear/krJcL/](http://jsfiddle.net/100thGear/krJcL/)

让我知道这是否有帮助！

# codeigniter - CodeIgniter 未定义属性错误

> ID：13399701
> 
> 赞同：0
> 
> 时间：2012-11-15T14:36:29.030
> 
> 标签：codeigniter, session

我的应用程序中有一个名为 admin 的表，我使用下面的代码根据提交的电子邮件和密码选择记录。我收到 first_name、last_name 和 admin_role 的“未定义属性 stdclass”错误。我已经检查了三次，这些是我表中列的名称。我究竟做错了什么？我正在自动加载数据库和会话库。可以在模型中设置会话数据吗？

型号代码：

```
public function can_sign_in() {
    $this->db->select('admin_id', 'first_name', 'last_name', 'admin_role');
    $this->db->where('admin_email', $this->input->post('admin_email'));
    $this->db->where('admin_password', md5($this->input->post('admin_password')));
    $query = $this->db->get('admin');

    if($query->num_rows() == 1) {
        foreach ($query->result() as $row) {
            $admin[] = array(
                'admin_id' => $row->admin_id,
                'first_name' => $row->first_name,
                'last_name' => $row->last_name,
                'admin_role' => $row->admin_role
            );
          $this->session->set_userdata($admin);
       }
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:39:32.023

```
 $this->db->select('admin_id', 'first_name', 'last_name', 'admin_role'); 
```

`select`只需要2个参数。带有要选择的字段的字符串，以及一个布尔值，表示它是否应该用反引号转义字符串。

您正在传递 4 个参数。您只想传递一个，一个带有逗号分隔字段的字符串：

```
 $this->db->select('admin_id, first_name, last_name, admin_role'); 
```

# android - 如何在android中的每个月初添加通知

> ID：13399702
> 
> 赞同：0
> 
> 时间：2012-11-15T14:36:28.833
> 
> 标签：android, calendar, android-notifications, android-calendar

嗨，我构建了一个应用程序 - 我尝试添加每个月 1 日出现的通知。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:38:55.177

也许你可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:40:31.103

创建一个定期检查日期并在每月第一天创建通知的服务。

有关服务的信息：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html) [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

通知的相关资料：

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html) [http://developer.android.com/reference/android/app/Notification.html](http://developer.android.com/reference/android/app/Notification.html)

# visual-studio-2012 - MVC 视图未在 VS2012 页面检查器中打开

> ID：13399707
> 
> 赞同：1
> 
> 时间：2012-11-15T14:36:45.940
> 
> 标签：visual-studio-2012

在 asp.net 网站上的一个 mvc[教程](http://www.asp.net/mvc/tutorials/mvc-4/using-page-inspector-in-aspnet-mvc)中解释说，当在 Visual Studio 2012 内的浏览器中加载的页面上选择页面的某些部分时，我们可以看到视图文件 (.cshtml)。但我看不到相应的视图（全部或部分）单击加载的页面时。只有我能看到的窗口是渲染的 html 和 css，如加载页面底部所示。

![在此处输入图像描述](../Images/8ad490566d48813d13282c7f6b086ace.png)

当我们在页面上有选择时，我是否错过了打开相应视图的任何选项？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:54:47.440

尝试通过页面检查器访问设计器时，我遇到了类似的问题。在我安装 VS2012 Update 1 软件包后，此问题已得到修复。

# resharper - Resharper 提取界面 - 默认选项

> ID：13399708
> 
> 赞同：5
> 
> 时间：2012-11-15T14:36:48.367
> 
> 标签：resharper, resharper-6.1

Resharper 的提取界面对话框中的默认值是“放置在旁边”，并且没有选中任何成员。反正有没有改变这个默认值？我宁愿“放在另一个文件中”并检查所有公共成员（即相反）。

# ip - 将 IP 更改为主机名

> ID：13399709
> 
> 赞同：0
> 
> 时间：2012-11-15T14:36:48.937
> 
> 标签：ip, localhost, virtual-machine, host

我总是使用 IP 地址连接到我的虚拟机。但我无法使用主机名进行连接。

现在，当我尝试访问该机器上配置的 Web 服务时，我无法这样做，因为它给了我一个主机名未解析错误。

是否可以让 IP 以任何方式引用主机名？是否需要更改某些设置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:40:20.253

在 Windows 上更改此文件`C:\WINDOWS\system32\drivers\etc\hosts`，在 Linux 上更改此文件`/etc/hosts`。

添加：

```
IP  your.hostname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:35:10.570

首先请清楚地提及您的操作系统..在 linux 下您需要编辑*/etc/hostname*和*/etc/hosts*

此外，您还需要在*虚拟机名称下进行更改*

此服务器故障帖子可能会有所帮助 - [https://serverfault.com/questions/257485/how-to-change-the-hostname-of-a-vm-using-vmware](https://serverfault.com/questions/257485/how-to-change-the-hostname-of-a-vm-using-vmware)

# oracle - 比较 r 中的数据库连接性能

> ID：13399710
> 
> 赞同：3
> 
> 时间：2012-11-15T14:36:48.780
> 
> 标签：oracle, r, rodbc, rjdbc

我们的组织广泛使用 oracle 数据库——我们将数十万条记录提取到 r 中，然后执行统计。我们几乎一直在使用 RODBC 包，但我刚刚让 rOracle 工作，现在我想知道哪个包“更好”。

有没有人知道可以在 R 中连接到 oracle 的各种方式之间的任何基准测试/测试/比较？我一直在搜索，发现[http://guyharrison.squarespace.com/blog/2011/5/20/rjdbc-20-performance-improvements.html](http://guyharrison.squarespace.com/blog/2011/5/20/rjdbc-20-performance-improvements.html)，这表明 ROracle 与 RJDBC 非常相似，但我没有没有找到任何与 roracle 和 rodbc 相关的东西。在这里的评论中提出了一个类似的问题——[加速 sqlFetch()](https://stackoverflow.com/questions/13289796/speed-up-sqlfetch) ——但那里没有真正的答案。

我打算自己做一些测试，但我不确定我是否对自己的基准测试能力有信心。如果我发现任何重要的东西，我会在这里发帖。

# c# - 不带 System.Reflection 的属性名称

> ID：13399712
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:36:52.803
> 
> 标签：c#, .net, reflection

可以在不使用反射的情况下从 dotnet 中的代码获取属性名称吗？

```
int PropWithNiceName
{
get {Console.Writeline( ??? )}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:38:22.433

是的; 您可以使用新`[CallerMemberName]`属性：

```
static string MemberName([CallerMemberName] string name = null) {
    return name;
}

int MyProperty {
    set {
        Console.WriteLine(MemberName());
    }
} 
```

# vb.net - 执行插入数据的 TableAdapter 查询

> ID：13399715
> 
> 赞同：0
> 
> 时间：2012-11-15T14:37:11.073
> 
> 标签：vb.net, insert

我正在尝试使用 Visual Studio 向导将数据插入到访问数据库中。（vb.net）

当我尝试构建更新查询然后在查询构建器中尝试它时效果很好但是当我尝试开发代码来执行查询时它不会影响数据库虽然没有出现错误消息，所以我猜他们虽然我正在尝试从我正在学习的书中获取代码，但我的代码有问题......我正在尝试的代码是：

```
Dim SDTA As New UpdateWizardDataSetTableAdapters.StudentTableAdapter
SDTA.ClearBeforeFill = True
SDTA.InsertQuery(txtNameID.Text, txtName.Text)
MsgBox("Done") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:40:05.720

谢谢我已经找到了我的问题的答案，秘诀是手动设置表适配器的连接字符串。

SDTA.Connection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=""& _ application.startupbath&\UpdateWizard.accdb"

感谢所有想要帮助的人

# android - android真实比较dp vs. px

> ID：13399719
> 
> 赞同：0
> 
> 时间：2012-11-15T14:37:24.090
> 
> 标签：android, android-layout

我有 lcd_density 160 的平板电脑。根据 Android 指南，1 dp 相当于 LCD 密度 160 的 1px。平板电脑分辨率为 1024px x 768px。

接下来，根据[Android 指标和网格](http://developer.android.com/design/style/metrics-grids.html)，推荐的操作栏高度为 48 dp。因此，当我捕获屏幕时，操作栏的高度为 56 px（或在本例中为 56 dp）。导航栏的高度为 48 像素。我试图捕获 android 设置、pinterest、Dropbox 等。

我的计算是否有问题，或者提到的应用程序没有保持推荐的高度 48dp？为什么它是 56 像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:51:57.853

MDPI 设备上的 1dp 等于 1px，这是正确的。我只是自己做了一些计算（我的 Android 平板电脑 LCD 密度是 160，如 build.prop 中所述），看起来你说的是真的。为了确保我刚刚在 Eclipse 中开始了一个新的 100% 项目，我根本没有做任何更改，在我的平板电脑上启动它，截取了屏幕截图，它仍然是 56px。然后我寻找一个动作栏的属性：48dp。

我的平板电脑运行 100% 纯 AOSP Android 4.1.2 版本。

build.prop 中的 lcd_density 160，重新检查了两次。

我唯一的假设：160ppi 上的 1dp 并不完全是 1px。

# c# - 应用程序配置文件 - 确保自定义配置结构

> ID：13399726
> 
> 赞同：1
> 
> 时间：2012-11-15T14:37:44.207
> 
> 标签：c#, .net, app-config

我有一个从 app.config 中的自定义部分读取的库

是否有适当的方法来确保在项目中使用此库时，如果未提供它，它会创建其自定义部分的“骨架”？

我想确保无论何时，无论谁使用这个 get，他们都能够理解他们有权配置的内容，而无需查看库内部。

编辑：为了更具体，这里是一个示例应用程序配置，其中解释了我正在尝试做的事情

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="CustomSection" type="Test.CustomSection, CustomSection"/>
    </configSections>
    <CustomSection SettingOne="My Setting"/>
</configuration> 
```

这是我将创建的部分的示例，知道 SettingOne 是一个有效的设置，并且了解 CustomSection 和所有这些。我想做的是让我的 CustomSection.dll 文件在项目中包含和使用时更新配置文件以确保 CustomSection 在某些默认设置下可用。

我想要的结果是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section .... >
        <section .... >
        <!-- Custom Section below added -->
        <section name="CustomSection" type="Test.CustomSection, CustomSection"/>
    </configSections>
    <!-- Settings below also added -->
    <CustomSection SettingOne="DEFAULT"/>
</configuration> 
```

# ruby-on-rails - 在我的网站上运行这个 ruby 脚本

> ID：13399730
> 
> 赞同：0
> 
> 时间：2012-11-15T14:37:51.883
> 
> 标签：ruby-on-rails, ruby, github, jekyll

我想在我的网站上使用来自 github 的[这个插件来显示我的运球镜头。](https://github.com/ericdfields/Jekyll-Dribbble-Set-Tag/blob/master/README.md)我知道我需要在我的服务器上运行脚本，但不知道如何。我试图复制标签，但obv，这不起作用。`.rb`我敢打赌，当站点加载时，我需要安装该文件并在我的服务器上运行它。我需要一点帮助。

忘了提.. 是的，我正在运行 Jekyll。我已经更改了我的 _config 文件，但是当我输入代码并运行我的网站时似乎什么都没有发生。所发生的一切就是它破坏了网站并且正在工作的液体标签停止工作。这是我得到 Liquid Exception: Unknown tag 'dribble_set' in index.html 的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:43:25.207

此脚本适用于 Jekyll 站点生成器。Jekyll 为您生成一个静态网站，因此无需在服务器端设置 Ruby。

查看[Jekyll Github 页面](https://github.com/mojombo/jekyll)，了解一些入门示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:58:06.223

将 _plugins 目录从该存储库复制到 jekyll 目录的根目录（以及 _config.yml 等）。如果您已经有一个 _plugins 目录，请将 dribble_set.rb 复制到该目录中。

听起来你还没有这样做，这就是它不起作用的原因。如果您不为其添加代码，Jekyll/Liquid 应该如何知道新标签？

# java - 在 Eclipse 中更改外部浏览器 [Linux、GWT、Tomcat6]

> ID：13399733
> 
> 赞同：0
> 
> 时间：2012-11-15T14:37:53.777
> 
> 标签：java, eclipse, gwt, web-applications, tomcat6

在尝试部署我的 GWT 应用程序时，Eclipse 不断部署到 Aurora（最新的 Firefox 构建 - 位于 /usr/bin/firefox）。是否需要遵循编程步骤，或者我是否需要修改外部配置文件来更改 Web 浏览器？

**采取的步骤：**

窗口 -> 常规 -> 网络浏览器：

[新的外部浏览器]

1.  名称：谷歌浏览器
2.  位置：/usr/bin/google-chrome
3.  参数：

窗口 -> 网络浏览器 -> Google Chrome[x]

有什么建议么？是否有某种我查看过的持久变量或配置文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:04:58.320

您可以右键单击部署行以获取其他浏览器选项：

![在此处输入图像描述](../Images/8d2274b76014161d4faf8ca9c7a0ce5c.png)

也就是说，我只是先打开我想要的浏览器并手动输入地址——浏览器对我非常了解，可以在这一点上自动完成整个事情。

# python - 使用 os.kill() 后如何找出子进程何时终止？

> ID：13399734
> 
> 赞同：8
> 
> 时间：2012-11-15T14:37:52.653
> 
> 标签：python, django, subprocess

我有一个 Python 程序（准确地说，是一个 Django 应用程序），它使用[`subprocess.Popen`](http://docs.python.org/2.7/library/subprocess.html#subprocess.Popen). 由于我的应用程序的体系结构限制，我无法[`Popen.terminate()`](http://docs.python.org/2.7/library/subprocess.html#subprocess.Popen.terminate)用来终止子进程并[`Popen.poll()`](http://docs.python.org/2.7/library/subprocess.html#subprocess.Popen.poll)检查进程何时终止。这是因为我无法在变量中保存对已启动子进程的引用。

相反，我必须在子进程启动时将进程 ID 写入`pid`文件`pidfile`。当我想停止子进程时，我打开它`pidfile`并使用[`os.kill(pid, signal.SIGTERM)`](http://docs.python.org/2.7/library/os.html#os.kill)它来停止它。

**我的问题是：**我怎样才能知道子进程何时真正终止？调用后使用`signal.SIGTERM`它大约需要 1-2 分钟才能最终终止`os.kill()`。首先，我认为这[`os.waitpid()`](http://docs.python.org/2.7/library/os.html#os.waitpid)对这项任务来说是正确的，但是当我在`os.kill()`它给我之后调用它时`OSError: [Errno 10] No child processes`。

顺便说一句，我正在使用两种表单从 HTML 模板启动和停止子流程，程序逻辑位于 Django 视图中。当我的应用程序处于调试模式时，异常会显示在我的浏览器中。知道我在视图中调用的子进程 ( `python manage.py crawlwebpages`) 本身调用另一个子进程（即 Scrapy 爬虫的实例）可能也很重要。我将`pid`这个 Scrapy 实例写入`pidfile`，这就是我想要终止的。

以下是相关代码：

```
def process_main_page_forms(request):
    if request.method == 'POST':
        if request.POST['form-type'] == u'webpage-crawler-form':
            template_context = _crawl_webpage(request)

        elif request.POST['form-type'] == u'stop-crawler-form':
            template_context = _stop_crawler(request)
    else:
        template_context = {
            'webpage_crawler_form': WebPageCrawlerForm(),
            'stop_crawler_form': StopCrawlerForm()}

    return render(request, 'main.html', template_context)

def _crawl_webpage(request):
    webpage_crawler_form = WebPageCrawlerForm(request.POST)

    if webpage_crawler_form.is_valid():
        url_to_crawl = webpage_crawler_form.cleaned_data['url_to_crawl']
        maximum_pages_to_crawl = webpage_crawler_form.cleaned_data['maximum_pages_to_crawl']

        program = 'python manage.py crawlwebpages' + ' -n ' + str(maximum_pages_to_crawl) + ' ' + url_to_crawl
        p = subprocess.Popen(program.split())

    template_context = {
        'webpage_crawler_form': webpage_crawler_form,
        'stop_crawler_form': StopCrawlerForm()}

    return template_context

def _stop_crawler(request):
    stop_crawler_form = StopCrawlerForm(request.POST)

    if stop_crawler_form.is_valid():
        with open('scrapy_crawler_process.pid', 'rb') as pidfile:
            process_id = int(pidfile.read().strip())
            print 'PROCESS ID:', process_id

        os.kill(process_id, signal.SIGTERM)
        os.waitpid(process_id, os.WNOHANG) # This gives me the OSError
        print 'Crawler process terminated!'

    template_context = {
        'webpage_crawler_form': WebPageCrawlerForm(),
        'stop_crawler_form': stop_crawler_form}

    return template_context 
```

我能做些什么？非常感谢！

**编辑：**

根据[Jacek Konieczny](https://stackoverflow.com/users/260897/jacek-konieczny)给出[的出色回答](https://stackoverflow.com/a/13402639/1125413)，我可以通过将函数中的代码更改为以下内容来解决我的问题：`_stop_crawler(request)`

```
def _stop_crawler(request):
    stop_crawler_form = StopCrawlerForm(request.POST)

    if stop_crawler_form.is_valid():
        with open('scrapy_crawler_process.pid', 'rb') as pidfile:
            process_id = int(pidfile.read().strip())

        # These are the essential lines
        os.kill(process_id, signal.SIGTERM)
        while True:
            try:
                time.sleep(10)
                os.kill(process_id, 0)
            except OSError:
                break
        print 'Crawler process terminated!'

    template_context = {
        'webpage_crawler_form': WebPageCrawlerForm(),
        'stop_crawler_form': stop_crawler_form}

    return template_context 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T17:09:02.987

检查进程是否仍在运行的常用方法是使用信号“0”杀死（）它。它对正在运行的作业没有任何作用，并且如果进程不存在则引发`OSError`异常。`errno=ESRCH`

```
[jajcus@lolek ~]$ sleep 1000 &
[1] 2405
[jajcus@lolek ~]$ python
Python 2.7.3 (default, May 11 2012, 11:57:22) 
[GCC 4.6.3 20120315 (release)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> os.kill(2405, 0)
>>> os.kill(2405, 15)
>>> os.kill(2405, 0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OSError: [Errno 3] No such process 
```

但只要有可能，调用者应该保持被调用进程的父进程并使用`wait()`函数族来处理它的终止。这就是`Popen`对象所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:45:06.263

我的解决方案是放置一个控制子处理的中间过程。

所以你的网络请求（似乎都发生在不同的进程中——由于并行化？）告诉控制进程启动一个给定的程序并观看它；一旦需要，他们就会询问状态是什么。

在最简单的情况下，该进程将是一个打开 UNIX 域套接字（TCP/IP 套接字也可以）并监听它的进程。“Web 进程”连接到它，发送启动请求并取回一个唯一 ID。之后，它可以使用此 ID 对新进程进行进一步查询。

或者，它自己提供 ID（或者它根本不使用 ID，如果只能有一个进程），因此不必保留一些变量 ID。

# sql - 从多行 Access-SQL 到一行

> ID：13399736
> 
> 赞同：0
> 
> 时间：2012-11-15T14:37:57.403
> 
> 标签：sql, vba, ms-access, concatenation

[这是我之前的问题Concatenate 2 rows in a complex SQL query](https://stackoverflow.com/questions/13158913/concatenate-2-rows-in-a-complex-sql-query)的后续。

这是我从这个问题中得到的：

```
PARAMETERS [CurrAxe] TEXT ( 255 ), [CurrOTP] TEXT ( 255 ), [CurrClient] TEXT (
255 ), [StartDate] DATETIME, [EndDate] DATETIME;

SELECT q.Projet, *
FROM   (faitssaillants f
LEFT JOIN employes e
ON f.utilisateur = e.cip)
INNER JOIN (
SELECT s1.otp,
     [s1].[valeur] & "," & [s2].[valeur] AS Projet
FROM   (
  SELECT otp, valeur
  FROM   tb_sommaire
  WHERE  [variable] = 'TitreMandat') AS s1
INNER JOIN (
   SELECT otp, valeur
   FROM   tb_sommaire 
   WHERE  [variable] = 'NomInstallation') AS s2
ON s1.otp = s2.otp) q
ON f.otp = q.otp
WHERE f.otp  = [currotp] 
AND f.client LIKE [currclient] 
AND f.axe LIKE [curraxe] 
AND Datevalue([dateinsertion]) 
    Between [startdate] And [enddate] 
ORDER  BY f.dateinsertion DESC; 
```

如果我想用 [variable] = 'something else' 而不是 'TitreMandat' 或 'NomInstallation' 添加另一行（我们将其命名为 s3）怎么办？是否可以将所有 tb_sommaire.variable 作为字段并将 tb_sommaire.valeur 作为 tb_sommaire.otp = faitssaillants.otp 的值？它可能也会解决我未来的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:36:10.613

我会在包括交叉表在内的两个查询中执行您的第一个解决方案。第一个名为 qry1 SQL 的查询：

```
SELECT 
  f.index, f.project, f.axe, f.client, f.otp, s.variable, s.valeur, 
  f.FaitSaillant, f.dateInsertion, f.Utilisateur, e.empname
FROM 
  (FaitsSaillants AS f INNER JOIN 
  tb_SOMMAIRE AS s ON 
  f.otp = s.otp) LEFT JOIN 
  employes AS e ON 
  f.Utilisateur = e.cip; 
```

您可以将您的`WHERE`条件添加到此查询中。

第二个查询，交叉表一个：

```
TRANSFORM First(qry1.valeur) AS FirstOfvaleur
SELECT qry1.index, qry1.project, qry1.axe, qry1.client, qry1.otp
FROM qry1
GROUP BY qry1.index, qry1.project, qry1.axe, qry1.client, qry1.otp
PIVOT qry1.variable; 
```

然后你可以`valeur`为每个连接 s`variable`

# iphone - ipad 的文档查看器

> ID：13399738
> 
> 赞同：3
> 
> 时间：2012-11-15T14:38:03.993
> 
> 标签：iphone, ios, xcode, ms-office

我是 Xcode 世界的新手。我正在 Xcode 中为支持 DOC 和 PPT 文件类型的 Ipad 开发文档查看器。我用谷歌搜索了很多次，但没有任何用处。我非常需要一个图书馆。请帮我为 ios 选择一个库来支持 MS Documents 和 Powerpoint。提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:49:26.103

你试过这个吗？

[http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html)

它适用于 excel、word、pdf、图像……但我没有对 PPT 文件进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:41:09.617

如果您只想查看 PDF 和 PPT 文件（以及 Word 文档），那么您只需使用`UIWebView`

# c# - 在未安装某些平台的机器上修改可移植类库项目

> ID：13399745
> 
> 赞同：3
> 
> 时间：2012-11-15T14:38:31.163
> 
> 标签：c#, .net, visual-studio-2012, portable-class-library

我有一个支持以下平台的 PCL 项目：

*   .NET 4.5
*   .NET 用于市场应用程序
*   视窗电话 8

我遇到的问题是；虽然我可以在安装了 Windows 8（以及 Windows Phone 8 SDK）的计算机上使用该项目，但我根本无法在没有 WinPhone8 SDK 的任何 Windows 7 计算机上构建该项目。我也无法安装 WP8 SDK，因为它需要 Windows 8。我可以手动编辑源文件，但我无法构建 PCL 项目来验证没有编译器错误。

在未安装某些平台（如 WP8）的计算机上更改我的 PCL 项目的“最佳”实践是什么？我是否应该仅手动删除该项目的本地副本的这些平台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T04:04:21.237

*我们现在*没有一个好的答案。如果您放弃对 Phone 8 的支持（或完全恢复到 Phone 7.5），那么您可以在 Windows 7 上构建。原因是因为 Phone 工具本身支持 Phone 8，因此它不能安装在 Windows 7 上，便携电话 8 也不支持。

但是，我们正在考虑在明年某个时候的 Visual Studio 更新中解决这个问题，我已经通过 visualstudio.uservoice.com 提交了用户建议：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/建议/3374340-allow-portable-libraries-targeting-windows-phone-8](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3374340-allow-portable-libraries-targeting-windows-phone-8)。

如果您觉得它很重要，请投票 - 在试图弄清楚下一步该做什么时，客户反馈的价值非常高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:03:19.917

一个选项是您只支持配置文件 1-4 - 这些在第一代 PCL 工具中可用 - [http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981)

如果您想开发更高级的功能（例如 Linq2Xml），那么您需要将缺少的“配置文件”安装到 win7 机器上。

这可能就像升级到 PCL2 下载一样简单 - [http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/) - 这应该（我认为）安装超过 1-4 的新配置文件

我希望以上内容对你有用......

如果没有，那么您需要浏览到 Windows 7 机器上的参考程序集目录，并且您需要从 Win8 手动复制缺少的配置文件。有关 PCL 参考程序集如何工作的一些参考，请查看我们为构建 MonoTouch 和 MonoDroid 所做的一些黑客行为 - [http://jpobst.blogspot.co.uk/2012/04/mono-for- android-portable-libraries-in.html](http://jpobst.blogspot.co.uk/2012/04/mono-for-android-portable-libraries-in.html)和[http://slodge.blogspot.co.uk/2012/04/using-portable-library-tools-for.html](http://slodge.blogspot.co.uk/2012/04/using-portable-library-tools-for.html)

* * *

您可能会发现另一件事有用 - nuget 包将 await/async 带回 wp7.1 开发 - [http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-无网络框架 4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:11:10.350

We've now made this possible in Visual Studio 2012 Update 2\. This installs the required Phone 8 support for portable down-level on Windows Vista and Windows 7.

Grab the latest CTP here: [http://www.microsoft.com/en-us/download/details.aspx?id=36833](http://www.microsoft.com/en-us/download/details.aspx?id=36833).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:00:55.743

> 在未安装某些平台（如 WP8）的计算机上更改我的 PCL 项目的“最佳”实践是什么？我是否应该仅手动删除该项目的本地副本的这些平台？

您的问题就是您的问题的解决方案，由于 Windows Phone 8 SDK 本身的要求，您将无法在 Windows 7 上处理 PCL 项目。在 Windows Phone 8 SDK 支持 Windows 7 之前，您只有有限的选择，除非您删除 Windows 7 不支持的平台。

# php - 带条件的数组排序

> ID：13399747
> 
> 赞同：0
> 
> 时间：2012-11-15T14:38:32.503
> 
> 标签：php, arrays

我得到了这个数组：

```
Array
(
    [0] => Array
        (
            [MONTH] => April
            [logs-count] => 14
            [log_type] => 0
        )

    [1] => Array
        (
            [MONTH] => August
            [logs-count] => 942
            [log_type] => 0
        )

    [2] => Array
        (
            [MONTH] => July
            [logs-count] => 132
            [log_type] => 0
        )

    [3] => Array
        (
            [MONTH] => June
            [logs-count] => 114
            [log_type] => 0
        )

    [4] => Array
        (
            [MONTH] => March
            [logs-count] => 424
            [log_type] => 0
        )

    [5] => Array
        (
            [MONTH] => May
            [logs-count] => 79
            [log_type] => 0
        )

    [6] => Array
        (
            [MONTH] => November
            [logs-count] => 269
            [log_type] => 0
        )

    [7] => Array
        (
            [MONTH] => October
            [logs-count] => 4447
            [log_type] => 0
        )

    [8] => Array
        (
            [MONTH] => October
            [logs-count] => 3
            [log_type] => 1
        )

    [9] => Array
        (
            [MONTH] => September
            [logs-count] => 1003
            [log_type] => 0
        )

) 
```

我想将此值放入 2 个数组，其中：对于每个月`if log_type = 0`，转到 1 个数组`if log_type = 1`，然后转到 2 个数组，但是如果有来自 f 的日志（例如 11 月并且他的 log_type 为 0，则转到 1 个数组，但转到第二个数组0)

所以在最后它应该是这样的，例如上面的：

1 个数组

```
Array
(
    [0] => 14
    [1] => 942
    [2] => 132
    [3] => 114
    [4] => 424
    [5] => 79
    [6] => 272
    [7] => 4447
    [8] => 1003
) 
```

2 阵列

```
Array
(
    [0] => 0
    [1] => 0
    [2] => 0
    [3] => 0
    [4] => 0
    [5] => 0
    [6] => 0
    [7] => 3
    [8] => 0
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:55:09.070

```
$arr0 = [];
$arr1 = [];

foreach ( $arr as $a ) {

    switch ( $a['log_type'] ) {

        case 0:
            $arr0[] = $a['logs-count'];
            break;
        case 1:
            $arr1[] = $a['logs-count'];
            break;
    }

} 
```

这将完成您问题的可理解部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:50:48.513

您应该使用 foreach 循环和一些条件语句来对日志条目进行排序：

```
$array1 = array();
$array2 = array();

foreach ($input_array as $entry) {
  if ($entry['MONTH']=='March' && $entry['log_type']==1) {
    $array1[] = $entry['logs-count'];
  } else if // Etc.
} 
```

根据您的喜好调整条件语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:03:33.337

尝试：

```
 $arr = array(array('MONTH' => 'April', 'logs-count' => 14,'log_type' => 0),
 array(...),
 ...
    ); //your array
 $arr1 = $arr2 = array();
 foreach($arr as $v) {
 if( $v['log_type'] === 0 ) {
   $arr1[] = $v['logs-count'];
   $arr2[] = 0;
 }
 else if($v['log_type'] === 1) 
   $arr2[] =  $v['logs-count']; 

 } 
```

# jquery - 对象不支持 IE9 中的属性或方法“提交”

> ID：13399758
> 
> 赞同：0
> 
> 时间：2012-11-15T14:39:06.433
> 
> 标签：jquery, internet-explorer, submit

我正在使用 jquery.fileupload.js 和 jquery 1.7.2。

```
<input class="file_upload_start" type="file" name="files[]" original-title="" multiple="multiple"> 
```

我的 file.js：[http ://www.kcloud.vn/apps/files/js/files.js](http://www.kcloud.vn/apps/files/js/files.js)

```
$(function () {
    $('.file_upload_start').fileupload({
        dropZone:$('#content'), // restrict dropZone to content div
        add:function (e, data) {
            var files = data.files;
            var totalSize = 0;

data.submit().success(function (data, status) {
    response = jQuery.parseJSON(data[0].body.innerText);
    if (response[0] != undefined && response[0].status == 'success') {
        var file = response[0];
        delete uploadingFiles[file.name];
        $('tr').filterAttr('data-file', file.name).data('mime', file.mime);
        var size = $('tr').filterAttr('data-file', file.name).find('td.filesize').text();
        if (size == t('files', 'Pending')) {
            $('tr').filterAttr('data-file', file.name).find('td.filesize').text(file.size);
        }
        FileList.loadingDone(file.name);
    } 
```

当我运行它时，我收到错误：

> SCRIPT438：对象不支持属性或方法“提交”
> files.js，第 387 行字符 37

如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:24:44.577

[下面是从http://www.kcloud.vn/apps/files/js/files.js](http://www.kcloud.vn/apps/files/js/files.js)到第 387 行的摘录。代码注释包含解释。

```
$(function () {
    $('.file_upload_start').fileupload({
        dropZone: $('#content'), // restrict dropZone to content div
        add: function (e, data) {
            //data.submit() should definitely exist in this scope.
            //...stuff...
            $.ajax({
                url: '/?app=files&getfile=ajax%2Fupload.php',
                dataType: "json",
                success: function (data) {
                    //which "data" is scoped here? "add" (parent) or "success" (local)?
                    //IE is picking local scope, not parent, which is causing your error.
                    //Rename the parameter variable to something else.
                    if (data.data.message == "DAT") {
                        //...stuff...
                    } else {
                        if (files) {
                            //...stuff...
                        }
                        if (totalSize > $('#max_upload').val()) {
                            //...stuff...
                        } else {
                            if ($.support.xhrFileUpload) {
                                //...stuff...
                            } else { //"data" below in "success" scope does not have a "submit" method, hence your error.
                                data.submit().success(function (data, status) { // <-- Line 387
                                    //Yet another parameter variable named "data".
                                    //This is asking for more trouble, rename this one too,
                                    //or define your functions elsewhere and reference them here.
                                    //...stuff...
                                });
                            }
//...stuff... 
```

# javascript - 单击时在 JQuery colorbox 中打开链接的 URL

> ID：13399759
> 
> 赞同：1
> 
> 时间：2012-11-15T14:39:09.530
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:42:18.680

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:42:14.420

```
$('a#yourLinkId').click(function(e){
  // prevents default behaviour
  e.preventDefault();

  // your stuff
  $.colorbox({opacity:0.3, href:"ext/popup.php"}); 

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:57:08.147

没问题。您可以在 Stackoverflow 中询问有关 JQuery 的任何问题，我们会尽力提供帮助。

关于你的问题。我认为您想使用 JQuery 在[ColorBox](http://www.jacklmoore.com/colorbox)中加载页面，而不是在主窗口中加载 URL 的默认操作。

你需要做两件事：

1.  将事件处理程序绑定到所有锚标记 ( `<a>`)，以便在单击它们时运行您的事件。
2.  阻止默认事件处理程序打开 URL (preventDefault)

您可以将事件绑定到所有锚标记，如下所示：

```
//for all links that exist on this page up to when this line is executed
$("a").click(function(){...}); 
```

`on()`但我建议使用按钮绑定您的事件。这样，所有`<a>`标签都将运行此事件处理程序，即使它们是**在**您的事件绑定代码运行后创建的。

```
//for all links that are created on this page even after this lines of code is executed
$("a").on( "click", function(){...}); 
```

为了防止默认操作（浏览页面），您只需使用[preventDefault()](http://api.jquery.com/event.preventDefault/)方法：

```
//assuming event argument is called e
e.preventDefault(); 
```

话虽如此，您的代码将如下所示：

```
<script type="text/javascript">
//this will run when the current document is loaded
$(document).ready(function(){
    $("a").on("click",function(e){
        e.preventDefault();
        //$(this).attr("href") contains the href attribute of the <a> tag
        $.colorbox({opacity:0.3, href:$(this).attr("href")});
    });
});
</script> 
```

# sas - 使用 SAS 删除文本文件

> ID：13399760
> 
> 赞同：5
> 
> 时间：2012-11-15T14:39:13.023
> 
> 标签：sas, sas-macro

我正在寻找一段代码，最好是独立于操作系统和基于宏的，用于删除文本文件（或任何文件）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T14:48:45.897

来自 SAS 文档：

```
data _null_;
    fname="tempfile";
    rc=filename(fname,"physical-filename");
    if rc = 0 and fexist(fname) then
       rc=fdelete(fname);
    rc=filename(fname);
run; 
```

它本质上是独立于操作系统的，因为它可以在多个操作系统上工作。您永远不可能拥有真正的独立性，因为 fileref 将依赖于操作系统，但是如果您将其指定为参数，它应该不是问题。

作为宏，您将在 SYSFUNC 块中使用 FDELETE：

```
%put %sysfunc(fdelete(myfile)); 
```

但是，myfile 需要是一个文件引用，因此如果您仅使用文件的实际物理位置作为参数，则需要两个步骤：

```
%macro file_Delete(file);
filename __a "&file.";
%put %sysfunc(fdelete(__a));
%mend file_delete; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:07:44.343

我更进一步如下：

```
%macro fdel(file);
  %let rc= %sysfunc(filename(fref,&file));
  %let rc= %sysfunc(fdelete(&fref));
%mend; 
```

这使它更加通用。谢谢乔！

# blackberry - 从本机黑莓视频应用程序录制的视频有什么扩展名？

> ID：13399761
> 
> 赞同：0
> 
> 时间：2012-11-15T14:39:14.313
> 
> 标签：blackberry

使用原生黑莓视频应用程序拍摄视频时，视频有什么扩展名？到目前为止，我已经看到了 .3gpp，但是其他操作系统版本会产生不同的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:26:31.663

据我所知，所有 RIM OS 版本的录像机都将视频录制到 .3gp 容器文件中。里面的视频可以是 MPEG-4 或 h.263 编解码器格式。默认情况下，BlackBerry 设备使用 MPEG-4 编解码器对录制的视频进行编码。

# python - BeautifulSoup 查找 xml 标签

> ID：13399762
> 
> 赞同：4
> 
> 时间：2012-11-15T14:39:15.933
> 
> 标签：python, xml, beautifulsoup, openstreetmap

我有一些使用[Xapi](http://open.mapquestapi.com/xapi/)检索的快餐店的 OSM 数据，[以下](http://open.mapquestapi.com/xapi/api/0.6/node%5Bamenity=fast_food%5D%5Bbbox=-77.03299606884731,38.88960821016589,-77.01582993115268,38.8971235910255%5D)是一些示例结果：

```
<osm version="0.6" generator="Osmosis SNAPSHOT-r26564">
   <node id="486275964" version="4" timestamp="2010-05-03T08:21:42Z" uid="12055" user="aude" changeset="4592597" lat="38.8959533" lon="-77.0212458">
      <tag k="name" v="Potato Valley Cafe"/>
      <tag k="amenity" v="fast_food"/>
   </node>
   <node id="486275966" version="4" timestamp="2010-08-06T16:44:13Z" uid="207745" user="NE2" changeset="5418228" lat="38.8959399" lon="-77.0196338">
      <tag k="cuisine" v="burger"/>
      <tag k="name" v="McDonald's"/>
      <tag k="amenity" v="fast_food"/>
   </node>
   <node id="612190923" version="1" timestamp="2010-01-12T14:01:27Z" uid="111209" user="cov" changeset="3603297" lat="38.893683" lon="-77.0292732">
      <tag k="level" v="-1"/>
      <tag k="cuisine" v="sandwich"/>
      <tag k="name" v="Quizno's"/>
      <tag k="amenity" v="fast_food"/>
   </node> 
</osm>
<!--corrected indentation--> 
```

我正在尝试在 python 中使用 BeautifulSoup 从中提取纬度、经度、名称和美食。我可以用这段代码得到经纬度没有问题：

```
soup = BeautifulSoup(results)
takeaways = soup.findAll('node')

for eachtakeaway in takeaways:
    longitude = str(eachtakeaway['lon'])
    lattitude = str(eachtakeaway['lat']) 
```

但我不知道名字：

```
name = str(eachtakeaway['name']) 
```

这引发了错误：

```
TypeError: 'NoneType' object is not callable 
```

你能告诉我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:46:45.450

问题是，方括号用于检索标签的属性，即`lat`和`lon`。但是，名称是另一个标签的属性。尝试这样的事情：

```
soup = BeautifulSoup(results)
takeaways = soup.findAll('node')

for eachtakeaway in takeaways:
    another_tag = eachtakeaway('tag')
    for tag_attrs in another_tag:
        if str(tag_attrs['k']) == 'cuisine':
            print str(tag_attrs['v']) 
```

这将返回美食价值。相同的概念适用于检索`name`。

*未经测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:45:12.650

`<node>`元素没有`name`属性。标签的子标签执行以下操作：

```
for eachtakeaway in takeaways:
    longitude = str(eachtakeaway['lon'])
    lattitude = str(eachtakeaway['lat'])
    nametag = eachtakeaway.find('tag', k='name')
    name = str(nametag['v']) if nametag is not None else '' 
```

示范：

```
>>> takeaways = soup.findAll('node')
>>> for eachtakeaway in takeaways:
...     nametag = eachtakeaway.find('tag', k='name')
...     print str(nametag['v']) if nametag is not None else ''
... 
Potato Valley Cafe
McDonald's
Quizno's 
```

# c# - 我的中断网代码比 BlockingCollection 慢

> ID：13399764
> 
> 赞同：0
> 
> 时间：2012-11-15T14:39:28.743
> 
> 标签：c#, disruptor-pattern

Disruptor 应该比 BlockingCollection 快得多。

在我之前的问题中，*[为什么我的破坏者示例如此缓慢？](https://stackoverflow.com/questions/13334778/why-my-disruptor-example-is-so-slow)*我写了两个测试。`Disruptor`花费了大约 1 微秒（或更短），而 BlockingCollection 花费了大约 14 微秒。

所以我决定`Disruptor`在我的程序中使用它，但是当我实现它时，我发现现在`Disruptor`花费大约`50`微秒，而 BlockingCollection 仍然花费`14-18`微秒。

我已将我的生产代码修改为“独立测试”，`Disruptor`但仍花费 50 微秒。为什么？

下面是一个简化的测试。在这个测试中，我有两个选择。第一个选项是`Sleep for 1 ms`。然后`Disruptor`花费 30-50 微秒来交付。第二个选项是模拟活动。然后`Disruptor`花费 7 微秒来交付。相同的测试`BlockingCollection`在 14-18 微秒内得出结果。那么为什么 Disruptor 不比 BlockingCollection 快呢？

在我的实际应用程序中`Disruptor`花费 50 微秒来交付太多的东西！我希望它传递消息的速度应该比 1 微秒快得多。

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        internal int Id { get; set; }
    }

    class DisruptorTest
    {

        public class MyHandler : IEventHandler<ValueEntry>
        {
            private DisruptorTest _parent;

            public MyHandler(DisruptorTest parent)
            {
                this._parent = parent;
            }

            public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
            {
                _parent.sw.Stop();
                long microseconds = _parent.sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));

                // Filter out abnormal delays > 1000
                if (microseconds < 1000)
                {
                    _parent.sum += (int)microseconds;
                    _parent.count++;
                    if (_parent.count % 1000 == 0)
                    {
                        Console.WriteLine("average disruptor delay (microseconds) = {0}", _parent.sum / _parent.count);
                    }
                }
            }
        }

        private RingBuffer<ValueEntry> _ringBuffer;
        private const int RingSize = 64;

        static void Main(string[] args)
        {
            new DisruptorTest().Run();
        }

        public void Run()
        {
            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), RingSize, TaskScheduler.Default);
            disruptor.HandleEventsWith(new MyHandler(this));

            _ringBuffer = disruptor.Start();

            for (int i = 0; i < 10001; i++)
            {
                Do();

                // We need to simulate activity to allow event to deliver

                // Option1\. just Sleep. Result 30-50 microseconds.
                Thread.Sleep(1);

                // Option2\. Do something. Result ~7 microseconds.
                //factorial = 1;
                //for (int j = 1; j < 100000; j++)
                //{
                //    factorial *= j;
                //}
            }
        }

        public static int factorial;

        private Stopwatch sw = Stopwatch.StartNew();
        private int sum;
        private int count;

        public void Do()
        {
            long sequenceNo = _ringBuffer.Next();
            _ringBuffer[sequenceNo].Id = 0;
            sw.Restart();
            _ringBuffer.Publish(sequenceNo);
        }

    }
} 
```

旧代码。现在应该忽略：

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;

namespace DisruptorTest
{
    public sealed class ValueEntry
    {
        internal int Id { get; set; }
    }

    class DisruptorTest
    {

        public class MyHandler : IEventHandler<ValueEntry>
        {
            private readonly int _ordinal;
            private readonly int _consumers;
            private DisruptorTest _parent;

            public MyHandler(int ordinal, int consumers, DisruptorTest parent)
            {
                _ordinal = ordinal;
                _consumers = consumers;
                this._parent = parent;
            }

            public void OnNext(ValueEntry data, long sequence, bool endOfBatch)
            {
                if ((sequence % _consumers) == _ordinal)
                {
                    var id = data.Id;
                    _parent.sw[id].Stop();
                    long microseconds = _parent.sw[id].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
                    // filter out abnormal delays > 1000
                    if (microseconds < 1000)
                    {
                        _parent.sum[id] += (int)microseconds;
                        _parent.count[id]++;
                        if (_parent.count[id] % 10 == 0)
                        {
                            Console.WriteLine("Id = {0} average disruptor delay (microseconds) = {1}",
                                id, _parent.sum[id] / _parent.count[id]);
                        }
                    }
                }
            }
        }

        private const int NumberOfThreads = 1;
        private RingBuffer<ValueEntry> _ringBuffer;
        private const int RingSize = 64;

        static void Main(string[] args)
        {
            new DisruptorTest().Run();
        }

        public void Run()
        {
            var disruptor = new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), RingSize, TaskScheduler.Default);
            for (int i = 0; i < NumberOfThreads; i++)
                disruptor.HandleEventsWith(new MyHandler(i, NumberOfThreads, this));

            for (int i = 0; i < sw.Length; i++)
            {
                sw[i] = Stopwatch.StartNew();
            }

            _ringBuffer = disruptor.Start();

            //var rnd = new Random();
            for (int i = 0; i < 1000; i++)
            {
                //Do(rnd.Next(MaxId));
                Do(i % MaxId);
                Thread.Sleep(1);
            }
        }

        private const int MaxId = 100;

        private Stopwatch[] sw = new Stopwatch[MaxId];
        private int[] sum = new int[MaxId];
        private int[] count = new int[MaxId];

        public void Do(int id)
        {
            long sequenceNo = _ringBuffer.Next();
            _ringBuffer[sequenceNo].Id = id;
            sw[id].Restart();
            _ringBuffer.Publish(sequenceNo);
        }

    }
} 
```

输出：

```
......
Id = 91 average disruptor delay (microseconds) = 50
Id = 92 average disruptor delay (microseconds) = 48
Id = 93 average disruptor delay (microseconds) = 35
Id = 94 average disruptor delay (microseconds) = 35
Id = 95 average disruptor delay (microseconds) = 51
Id = 96 average disruptor delay (microseconds) = 55
Id = 97 average disruptor delay (microseconds) = 38
Id = 98 average disruptor delay (microseconds) = 37
Id = 99 average disruptor delay (microseconds) = 45 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:07:39.097

您仍在做同样的事情：您正在测量发布单个项目需要多少时间。

```
public void Do(int id)
{
    long sequenceNo = _ringBuffer.Next();
    _ringBuffer[sequenceNo].Id = id;
    sw[id].Restart(); // <--- You're doing this EVERY TIME YOU PUBLISH an item!
    _ringBuffer.Publish(sequenceNo);
} 
```

在您之前的问题中，您被告知您应该测量数千个发布，以便正确利用`Stopwatch`精度。

此外，您仍在测试过程中写入控制台。避免这样做：

```
if (_parent.count[id] % 10 == 0)
{
    Console.WriteLine("Id = {0} average disruptor delay (microseconds) = {1}",
        id, _parent.sum[id] / _parent.count[id]);
} 
```

## 清理你的代码

至少，你应该试着清理一下你的代码；我已经重新组织了一下，所以它不是那么混乱： http: [//pastie.org/5382971](http://pastie.org/5382971)

Disrputors 一开始并不那么简单，现在我们必须处理您的代码并尝试告诉您如何修复它。更重要的是：当你有意大利面条代码时，你不能进行性能优化或测试。尽量保持一切简单和干净。在这个阶段，你的代码既不简单也不干净。

让我们从私有成员变量的可怕命名约定开始：

```
private const int NumberOfThreads = 1;
private RingBuffer<ValueEntry> _ringBuffer;
private const int RingSize = 64;
private const int MaxId = 100
private Stopwatch[] sw = new Stopwatch[MaxId];
private int[] sum = new int[MaxId];
private int[] count = new int[MaxId]; 
```

始终如一：

```
private const int _numberOfThreads = 1;
private RingBuffer<ValueEntry> _ringBuffer;
private const int _ringSize = 64;
private const int _maxId = 100
private Stopwatch[] _sw = new Stopwatch[MaxId];
private int[] _sum = new int[MaxId];
private int[] _count = new int[MaxId]; 
```

其他一些指针：

*   摆脱嵌套类。
*   将 main 移出一个单独的类（例如 Program）。

## 建立一个好的测试

Martin 和 Michael 告诉您的第一件事是性能测试也必须非常好，因此他们花费了相当多的时间来构建[测试框架](http://code.google.com/p/jmicrobench/source/browse/#svn/trunk/src/main/java/com/lewisd/jmicrobench)。

*   我建议您尝试几百万个事件，而不是 1000 个事件。
*   确保您只为所有事件使用一个计时器。
*   当您开始处理项目时启动计时器并在没有更多项目要处理时停止它。
*   了解何时完成处理项目的一种有效方法是使用[`CountDownEvent`](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx).

## 更新

所以让我们先解决第一个争议：[秒表的精度确实应该足够了。](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.ishighresolution.aspx)

```
Int64 frequency = Stopwatch.Frequency;
Console.WriteLine( "  Timer frequency in ticks per second = {0}", frequency );
Int64 nanosecPerTick = (1000L * 1000L * 1000L) / frequency;
Console.WriteLine( "  Timer is accurate within {0} nanoseconds", nanosecPerTick ); 
```

在我的机器上，分辨率在 320 纳秒内。所以OP是正确的，定时器的分辨率不应该是一个问题。

我知道 OP 想要测量平均一件物品的交付，但是（至少）有两种方法可以做到这一点。

我们必须调查差异。在概念层面上，您正在做与以下代码完全相同的事情：

1.  你正在运行一堆迭代。
2.  测量它们中的每一个。
3.  你计算总数。
4.  最后计算平均值。

在代码中：

```
Stopwatch sw = new Stopwatch();
long totalMicroseconds = 0;
int numItems = 1000;
for(int i = 0; i < numItems; i++)
{
    sw.Reset();
    sw.Start();
    OneItemDelivery();
    sw.Stop();
    totalMicroseconds += sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
}
long avgOneItemDelivery = totalMicroseconds/numItems; 
```

衡量性能的另一种方法是：

1.  启动计时器。
2.  运行所有迭代。
3.  停止计时器。
4.  计算平均时间。

在代码中：

```
sw.Start();
for(int i = 0; i < numItems; i++)
{
    OneItemDelivery();    
}
sw.Stop();
totalMicroseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
long avgOneItemDelivery = totalMicroseconds/numItems; 
```

每个人都可能有自己的问题：

*   第一种方法可能不太精确，您需要在您的系统上证明秒表可以精确处理这么少的工作（除了简单地计算纳秒精度）。
*   第二种方法还将包括发生迭代所需的计算时间。这会在您的测量中引入少量偏差，但它可以解决您通常会在第一种方法中看到的精度问题。

您已经注意到`Sleep`语句会产生较低的性能，因此我建议您进行简单的计算。计算阶乘似乎是个好主意，只需进行非常小的计算即可：不需要 100000，100 也应该没问题。

当然，您不需要等待 2 分钟进行测试，但 10-20 秒应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-28T06:37:57.167

我阅读了您编写的 BlockingCollection 代码，[为什么我的破坏者示例如此缓慢？](https://stackoverflow.com/questions/13334778/why-is-my-disruptor-example-so-slow/58586597#58586597), 你在 Disruptor 里加了很多`Console.WriteLine`，但在 BlockingCollection 里没有，`Console.WriteLine`很慢，里面有锁。

你`RingBufferSize`的太小了，这会影响性能，应该是1024或更大。

并且`while (!dataItems.IsCompleted)`可能有一些问题，BlockCollection 总是处于添加状态，它会导致线程提前结束。

```
Task.Factory.StartNew(() => {
    while (!dataItems.IsCompleted)
    {

        ValueEntry ve = null;
        try
        {
    ve = dataItems.Take();
    long microseconds = sw[ve.Value].ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
    results[ve.Value] = microseconds;

    //Console.WriteLine("elapsed microseconds = " + microseconds);
    //Console.WriteLine("Event handled: Value = {0} (processed event {1}", ve.Value, ve.Value);
        }
        catch (InvalidOperationException) { }
    }
}, TaskCreationOptions.LongRunning);

for (int i = 0; i < length; i++)
{
    var valueToSet = i;

    ValueEntry entry = new ValueEntry();
    entry.Value = valueToSet;

    sw[i].Restart();
    dataItems.Add(entry);

    //Console.WriteLine("Published entry {0}, value {1}", valueToSet, entry.Value);
    //Thread.Sleep(1000);
} 
```

我已经重写了你的代码，Disruptor 比具有多个生产者（10 个并行生产者）的 BlockingCollection 快 10 倍，比具有单个生产者的 BlockingCollection 快 2 倍：

```
using System;
using System.Collections.Concurrent;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using Disruptor;
using Disruptor.Dsl;
using NUnit.Framework;

namespace DisruptorTest.Ds
{
    public sealed class ValueEntry
    {
        internal int Id { get; set; }
    }

    class MyHandler : IEventHandler<ValueEntry>
    {
        public void OnEvent(ValueEntry data, long sequence, bool endOfBatch)
        {
        }
    }

    [TestFixture]
    public class DisruptorPerformanceTest
    {
        private volatile bool collectionAddEnded;

        private int producerCount = 10;
        private int runCount = 1000000;
        private int RingBufferAndCapacitySize = 1024;

        [TestCase()]
        public async Task TestBoth()
        {
            for (int i = 0; i < 1; i++)
            {
                foreach (var rs in new int[] {64, 512, 1024, 2048 /*,4096,4096*2*/})
                {
                    Console.WriteLine($"RingBufferAndCapacitySize:{rs}, producerCount:{producerCount}, runCount:{runCount} of {i}");
                    RingBufferAndCapacitySize = rs;
                    await DisruptorTest();
                    await BlockingCollectionTest();
                }
            }
        }

        [TestCase()]
        public async Task BlockingCollectionTest()
        {
            var sw = new Stopwatch();
            BlockingCollection<ValueEntry> dataItems = new BlockingCollection<ValueEntry>(RingBufferAndCapacitySize);

            sw.Start();

            collectionAddEnded = false;

            // A simple blocking consumer with no cancellation.
            var task = Task.Factory.StartNew(() =>
            {
                while (!collectionAddEnded && !dataItems.IsCompleted)
                {
                    //if (!dataItems.IsCompleted && dataItems.TryTake(out var ve))
                    if (dataItems.TryTake(out var ve))
                    {
                    }
                }
            }, TaskCreationOptions.LongRunning);

            var tasks = new Task[producerCount];
            for (int t = 0; t < producerCount; t++)
            {
                tasks[t] = Task.Run(() =>
                {
                    for (int i = 0; i < runCount; i++)
                    {
                        ValueEntry entry = new ValueEntry();
                        entry.Id = i;
                        dataItems.Add(entry);
                    }
                });
            }

            await Task.WhenAll(tasks);

            collectionAddEnded = true;
            await task;

            sw.Stop();

            Console.WriteLine($"BlockingCollectionTest Time:{sw.ElapsedMilliseconds/1000d}");
        }

        [TestCase()]
        public async Task DisruptorTest()
        {
            var disruptor =
                new Disruptor.Dsl.Disruptor<ValueEntry>(() => new ValueEntry(), RingBufferAndCapacitySize, TaskScheduler.Default,
                    producerCount > 1 ? ProducerType.Multi : ProducerType.Single, new BlockingWaitStrategy());
            disruptor.HandleEventsWith(new MyHandler());

            var _ringBuffer = disruptor.Start();

            Stopwatch sw = Stopwatch.StartNew();

            sw.Start();

            var tasks = new Task[producerCount];
            for (int t = 0; t < producerCount; t++)
            {
                tasks[t] = Task.Run(() =>
                {
                    for (int i = 0; i < runCount; i++)
                    {
                        long sequenceNo = _ringBuffer.Next();
                        _ringBuffer[sequenceNo].Id = 0;
                        _ringBuffer.Publish(sequenceNo);
                    }
                });
            }

            await Task.WhenAll(tasks);

            disruptor.Shutdown();

            sw.Stop();
            Console.WriteLine($"DisruptorTest Time:{sw.ElapsedMilliseconds/1000d}s");
        }
    }
} 
```

## 具有共享 ValueEntry 实例的 BlockingCollectionTest（for 循环中没有新的 ValueEntry()）

*   RingBufferAndCapacitySize:64, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：16.962s

    BlockingCollection测试时间：18.399

*   RingBufferAndCapacitySize:512, producerCount:10, runCount:1000000 of 0 DisruptorTest Time:6.101s

    BlockingCollection测试时间：19.526

*   RingBufferAndCapacitySize:1024, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.928s

    BlockingCollection测试时间：20.25

*   RingBufferAndCapacitySize:2048, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.448s

    BlockingCollection测试时间：20.649

## BlockingCollectionTest 在 for 循环中创建一个新的 ValueEntry()

*   RingBufferAndCapacitySize:64, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：27.374s

    BlockingCollection测试时间：21.955

*   RingBufferAndCapacitySize:512, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：5.011s

    BlockingCollection测试时间：20.127

*   RingBufferAndCapacitySize:1024, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.877s

    BlockingCollection测试时间：22.656

*   RingBufferAndCapacitySize:2048, producerCount:10, runCount:1000000 of 0

    干扰器测试时间：2.384s

    BlockingCollection测试时间：23.567

[https://www.cnblogs.com/darklx/p/11755686.html](https://www.cnblogs.com/darklx/p/11755686.html)

# validation - 此要求的 Drools 规则

> ID：13399772
> 
> 赞同：0
> 
> 时间：2012-11-15T14:39:58.950
> 
> 标签：validation, drools, rule-engine

我有类似于下面的xml：

```
<Beans>
        <Bean>
                <Type>D</Type> <!--type can be D, B, C-->  
           <Name>Dental</Name> 
           <Transaction>121</Transaction>  
           <Amount></Amount> 
        </Bean>
        <Bean>
           <Type>D</Type> <!--type can be D, B, C-->
           <Name>Dental</Name>
           <Transaction>12312</Transaction>
           <Amount>123.45</Amount>
         </Bean>
</Beans> 
```

此 xml 的业务规则： 对于每个 bean，如果类型为 D 1：名称不应为空 2：金额和事务不应为空 3：金额和事务应与数据库表中相同事务的现有值匹配。4：如果type不是D，则规则不同。

我如何用 Drools 规则语言表示这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:05:39.047

我的建议是为每个约束使用一个规则：

```
rule "D Type - Name shouldnt be null"
when
    Bean(type == "D", name == null)
then
    //do whatever you want
end

... (you can figure out the other null checking rules)

rule "D Type - Amount must match DB value"
when
    $b: Bean(type == "D", amount != null)
    Double(doubleValue != $b.amount) from someGlobalService.getAmmount($b) 
then
    //do whatever you want
end

... 
```

在第二条规则中，我建议使用全局服务从数据库中检索所需信息，甚至实现某种缓存。另一种可能性可能是将来自 db 的值作为事实或全局变量预先填充在 ksession 中。

此致，

# php - PHP shell_exec - 错误分段错误（核心转储）

> ID：13399774
> 
> 赞同：0
> 
> 时间：2012-11-15T14:40:07.837
> 
> 标签：php, linux, shell

我将使用 shell_exec 在 php 中启动一个 .sh 文件。

```
$out = array();
exec("/home/user/html/run.sh 2>&1", $out);
print_r($out); 
```

在这个 .sh 文件中有一个程序会在硬盘上生成一个输出文件。

因为我得到了这个错误。

**run.sh：第 1 行：59934 分段错误（核心转储）**

这是什么意思？

# java - 在 LDAP 中存储照片

> ID：13399775
> 
> 赞同：2
> 
> 时间：2012-11-15T14:40:11.260
> 
> 标签：java, ldap, photo, ldif

我知道您可以将照片存储在 LDAP 中。但这是个好主意吗？

目前，正在为公司需求构建 LDAP 结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:50:50.250

存储照片是企业 LDAP 目录的常见做法。但是，请确保客户端代码仅在必要时加载此照片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:54:28.793

我们看到的最大问题是当有人想要存储 16MB 照片时。DIB 将变得非常大，用于照片的数据将超过所有其他数据的总和。

还有传输大照片的 LDAP 服务器开销和电汇负载。

但是通常在 LDAP 中存储小（20k）照片（如护照照片）而不会出现性能问题。

当用户进入从 LDAP 获得的安全区域时，当用户刷他们的安全徽章时，我们使用的几个安全设置会在头顶监视器上显示用户照片。

LDAP 服务器供应商存储“大”属性值的方式也有所不同。有些会将大项目作为 BLOB 存储在 DIB 数据库中，有些会为每个大数据块创建一个“流”文件。

-吉姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:33:21.403

JPEG 数据可以存储在objectClass[`jpegPhoto`](https://www.rfc-editor.org/rfc/rfc2798#section-2.6)中允许的属性中。`inetOrgPerson`另一种方法是将 URL 存储在指向托管照片的服务器场的条目中。

# java - 将 textview 内容和 imageview 发送到电子邮件

> ID：13399776
> 
> 赞同：0
> 
> 时间：2012-11-15T14:40:13.350
> 
> 标签：java, android, email, textview

我正在创建一个应用程序，当我按下按钮时将 TextView 内容发送到我的电子邮件，但我知道如何执行此操作，我需要帮助。

我需要发送到电子邮件 tvFechaSi 和 ImageView 到 wrfrewf@gmail.com（是假电子邮件）

```
public class FormBotonSi extends Activity {

      private String SFecha; 
      private TextView tvFechaSi ;    
      private static final int CAMERA_REQUEST = 1888; 
      private ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.formbotonsi);

        Bundle bundle=getIntent().getExtras();

        tvFechaSi=(TextView) findViewById(R.id.tvFechaSi);
        Fecha =bundle.getString("Fecha");
        tvFechaSi.setText(Fecha.toString()); 

        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);

        Spinner sp = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter adapter = ArrayAdapter.createFromResource(
            this, R.array.tipoPrioridad, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sp.setAdapter(adapter);   

        photoButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_REQUEST); 
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            imageView.setImageBitmap(photo);
        }  
    } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:48:50.793

我认为这段代码可以帮助你：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"youremail@gmail.com"});  
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Email Subject");
sendIntent.putExtra(Intent.EXTRA_STREAM,tvFechaSi.getText());
sendIntent.setType("text/html");
startActivity(sendIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:49:16.167

您可以使用`ACTION_SEND`意图操作：

```
Intent i = new Intent(Intent.ACTION_SEND);  
i.putExtra(Intent.EXTRA_EMAIL, new String[]{"wrfrewf@gmail.com"});  
i.putExtra(Intent.EXTRA_SUBJECT,"subject goes here");  
i.putExtra(Intent.EXTRA_TEXT, tvFechaSi.getText());  
startActivity(Intent.createChooser(i, "Select email application.")); 
```

# etherpad - Etherpad Lite 如何更改字体大小

> ID：13399779
> 
> 赞同：4
> 
> 时间：2012-11-15T14:40:20.713
> 
> 标签：etherpad

如何更改 etherpad lite 中文本的大小？我在 css 文件中找不到任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T21:17:26.017

你可以制作自己的插件来做到这一点。

在 ep.json 中，添加一个 client_hook：

```
{
  "parts": [
    {
      "name": "myPlugin",
      "client_hooks": {
        "aceEditorCSS": "ep_myPlugin/static/js/ace"
      }
    }
  ]
} 
```

在 static/js/ace.js 中，只写：

```
exports.aceEditorCSS = function(hook_name, cb) { // inner pad CSS;
    return ['ep_myPlugin/static/css/ace.css'];
} 
```

在静态/css/ace.css 中：

```
#innerdocbody {
    font-size: 14px;
    line-height: 18px;
} 
```

你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:40:56.130

我很确定您可以通过编辑[自定义静态文件](http://etherpad.org/doc/v1.2.7/#index_custom_static_files)来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-29T07:51:19.517

它也适用于我，但需要重新启动 etherpad-lite 服务器并仔细擦除浏览器缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T23:59:13.937

您可以使用自定义静态文件或使用 ep_font_size 插件来实现这一点，这样用户就可以更改自己的字体大小。

# c# - ASP.NET、MVC 3、C# 网站、预加载链接页面

> ID：13399784
> 
> 赞同：1
> 
> 时间：2012-11-15T14:40:41.017
> 
> 标签：c#, asp.net-mvc

对于 ASP.NET、MVC 3、C# 网站，其主页具有指向其他页面的链接 -

在请求主页并将其加载到浏览器中之后，有没有办法可以“预加载”链接的页面，以便它们立即呈现而无需返回服务器？

示例 - 假设我正在销售 10 种产品。每个产品都会有自己的“产品详细信息”页面链接到主页。当有人进入首页时，我想在后台“预加载”一个或多个“产品详情”页面，所以当点击“产品详情”链接时，该页面将立即可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:48:31.653

你在这里想要什么有点奇怪。您始终可以通过 AJAX 加载这些页面，然后处理对适当超链接的点击，并用您拥有的内容替换整个 DOM，但值得付出努力和维护吗？也许[PJAX](https://github.com/defunkt/jquery-pjax)会在这里提供帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:30:02.350

If you really want to do some sort of parallel loading, you can have an element that is not actual displayed on the page but that holds valid content. Something like:

```
<div id="parallel_load" style="position:absolute;left: -1000px;width: 100px;></div> 
```

Then you can create a queue of things you want to go get. Since it's almost exclusively going to be images that you'll want to preload, you can simply have a list that requests one image at a time from a service, creates a new element and inserts it into this div. That would force the browser to load the new image in the background while the user is doing other things ... clicking, logging in.

```
$(LoadNextImage(0));

function LoadNextImage(index)
{
    // do ajax call here to get the url to the image and id
    // use index to keep track of what images have loaded maybe

    var image = $('<img id="' + id + '"');
    image.attr('src', urlFromAjax);
    image.appendTo('#parallel_load');

    // moreImages would be some response from the server that
    // says you're not done yet possibly
    if (moreImages) 
        setTimeout(LoadNextImage, 500);
} 
```

# xpath - JMeter XPath 提取器 SAXEXception UTF-8

> ID：13399793
> 
> 赞同：0
> 
> 时间：2012-11-15T14:40:58.130
> 
> 标签：xpath, jmeter

我已经成功地将 JMeter 的 XPath 提取器用于网站的各个页面。到目前为止，我已经能够使用以下 XPath 表达式提取链接：

> //div[@class='example']/a/@href

在一个非常相似的页面上，我无法检索相同的链接，即使它们仍然位于与上述相同的 div 结构中。我添加了一个`XPath Assertion`并得到了以下 SAXException：

> SAXException：3 字节 UTF-8 序列的字节 2 无效

任何人都可以帮助我了解发生了什么。

```
XPath Extractor settings:
-------------------------
- Apply to: Main sample only
- XML parsing options: 
    Use Tidy (tolerant parser) = true
    Quiet = true 
```

提前致谢。

*编辑：我正在解析 HTML*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:50:51.450

看起来您尝试解析的页面不是 UTF-8 编码的：
[org.xml.sax.SAXParseException: Invalid byte 2 of 3-byte UTF-8 sequence](https://stackoverflow.com/questions/13091158/org-xml-sax-saxparseexception-invalid-byte-2-of-3-byte-utf-8-sequence)

# windows-8 - WinRT：如何确定当前鼠标/指针位置

> ID：13399805
> 
> 赞同：0
> 
> 时间：2012-11-15T14:41:19.463
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

在 WinRT 中，无法对`GridView`if`ItemsSource`分组的项目进行重新排序。我决定通过使用拖放功能来解决这个问题`GridView`。在我需要找到当前鼠标（或指针）位置`Drop`的事件处理程序上，`GridView`以确定我拖动的项目被拖放到的确切对象（或最近的对象）。

那么有什么办法可以拿到这个职位呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:32:04.777

您可以使用[DragEventArgs](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.drageventargs.aspx)来获取位置。

# json - Mustache.js 循环遍历 JSON 数据

> ID：13399816
> 
> 赞同：4
> 
> 时间：2012-11-15T14:41:57.883
> 
> 标签：json, mustache

谁能建议我的模板循环应该如何在以下示例中循环 JSON 数据？
**演示在这里：http: [//jsfiddle.net/Seefeld/LbVEH/](http://jsfiddle.net/Seefeld/LbVEH/)**

```
 {
    "0": {
        "Dosage": "25",
        "Drug": "Indocin",
        "Patient": "David",
        "Date": "15/11/2012 14:29:14"
    },
    "1": {
        "Dosage": "50",
        "Drug": "Enebrel",
        "Patient": "Sam",
        "Date": "15/11/2012 14:29:14"
    },
    "2": {
        "Dosage": "10",
        "Drug": "Hydralazine",
        "Patient": "Christoff",
        "Date": "15/11/2012 14:29:14"
    },
    "3": {
        "Dosage": "21",
        "Drug": "Combivent",
        "Patient": "Janet",
        "Date": "15/11/2012 14:29:14"
    },
    "4": {
        "Dosage": "100",
        "Drug": "Dilantin",
        "Patient": "Melanie",
        "Date": "15/11/2012 14:29:14"
    }
} 
```

我看到的所有示例都`mustache.js`假设您知道对象名称。 **任何建议都非常感谢。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T15:05:46.870

您可以转换`data`为真正的数组（无论如何都应该如此）：

```
var drugs = [];
for (var i = 0, drug; (drug = data[i]); ++i) {
  drugs.push(drug);
}

var template = "{{#drugs}}<p>{{Drug}}</p>{{/drugs}}";
var html = Mustache.to_html(template, {drugs: drugs});
$(html).appendTo("#cnt"); 
```

或自己浏览数据：

```
var template = "<p>{{Drug}}</p>";
for (var i = 0, drug; (drug = data[i]); ++i) {
  var html = Mustache.to_html(template, drug);
  $(html).appendTo("#cnt");
} 
```

# c# - 类型推断变量

> ID：13399817
> 
> 赞同：5
> 
> 时间：2012-11-15T14:42:08.617
> 
> 标签：c#, types, var, variant

类型推断使用`var`关键字。编译器通过变量的初始化来“推断”变量的类型。
例如 var somenum=o; 变成 int somenum=0;

即使**somenum**从未被声明为 an `int`，编译器也会计算出这一点，并且 somenum`int`只要它在范围内，它就是 an 。

它就像`variant`中使用的类型`visual basic`。在程序中使用它，在某种程度上会降低性能`var`并且在 3.5 之前不包含在 dot net 框架中。

即使它降低了性能和点网框架支持强类型检查，为什么`var`包含在框架 3.5 中？

`var`紫罗兰强类型检查？如果不是怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:44:16.660

`var`根本不会降低性能。该变量仍然是[强类型](http://msdn.microsoft.com/en-us/library/bb383973.aspx)：

> 隐式类型的局部变量是强类型的，就像您自己声明了类型一样，但编译器确定类型。

唯一的区别是您不必在源代码中手动拼出类型。`Variant`如果这就是您所指的，则与 VB 6 完全没有关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:45:36.170

它根本不像`Variant`，它不会降低性能。

在 .NET 中， var 是由编译器提供的一种速记机制；编译后的代码就像你声明了正确的类型一样是强类型的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:46:00.210

什么？不，哇，这一切都错了。

C#`var`与*VB 完全*不同，`Variant`它`dynamic`在 C# 中（或多或少）。

`var`只是编译器在编译程序时填写的占位符，在运行时实际类型已完全声明和使用，因此完全没有性能损失。

```
// this won't work
var i=0;
i="a"; // it would with dynamic though! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:46:42.423

var 之所以有用，有几个原因，它减少了代码的冗长，并且允许更轻松地重构，当分配给变量的方法的输出上的类型发生更改时，如果它仍然满足用法，则不需要更改。

也没有性能影响，因为它被编译到 IL 并最终以相同的方式结束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T14:47:07.337

`var`不会降低性能，并且仍然是强类型的。

之所以引入它是因为 LINQ 需要它，因为 LINQ 能够返回“[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)”。
这是引入此关键字的主要原因，因为您无法控制编译器将生成的类型的名称。一个附加值是，您可以将其用作语法糖，以便在声明变量时不重复变量的类型：

```
var = new List<MyComplexType<WithTypeParameter>>(); 
```

代替：

```
List<MyComplexType<WithTypeParameter>> x = new List<MyComplexType<WithTypeParameter>>(); 
```

例如。

无论如何，var 与 Visual Basic 中的 Variant 数据类型不同。当您将某个实例分配给已使用 var 关键字声明（和初始化）的变量时，您无法为其分配另一种类型的实例。除此之外，你不能在不初始化的情况下声明一个“var”变量。

# php - 在 PHP 中直接使用符号还是 HTML 代码？

> ID：13399818
> 
> 赞同：1
> 
> 时间：2012-11-15T14:42:08.253
> 
> 标签：php, html, utf-8, symbols

我想知道在 PHP 中使用 UTF-8 编码更正确的是什么。

例如“版权符号”，我应该在代码中使用：

```
&copy; 
```

或者我应该直接使用：

```
© 
```

更推荐的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:46:48.367

这取决于 PHP 源文件的编码。如果它们以 UTF-8 编码，则不会有任何问题`©`，如果源文件是 ASCII 编码，则必须使用`&copy;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T14:44:59.713

如果您使用 HTML，则不必太在意编码，尽管在 PHP 中您应该始终使用 UTF-8。

HTML 将适用于任何编码。

# java - 可以将一系列键映射到值的数据结构

> ID：13399821
> 
> 赞同：26
> 
> 时间：2012-11-15T14:42:16.900
> 
> 标签：java, dictionary, data-structures, range-map

我试图找到一个数据结构，它从一系列值中获取特定值并将其映射到一个键。

例如，我有以下条件：

1.  从1到2.9，我想把它映射到A。
2.  从4到6，我想把它映射到B。
3.  从6.5到10，我想把它映射到C。

我的值为 5，我想将它映射到一个键。所以基于上述条件，我应该把它映射到B。

是否有任何人可以向我推荐来解决问题的 Java 数据结构？

目前我正在使用一个只能将一个值映射到一个键的哈希表。我试图将值的范围映射到哈希表中存在的特定值。但是，我陷入了将值范围映射到特定值的过程中。所以现在我正在尝试另一种将值范围映射到键的方法。有谁知道我该如何解决这个问题？

编辑：

感谢 Martin Ellis，我决定使用 TreeMap 来解决这个问题。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T15:08:37.370

你的范围不重叠吗？如果是这样，您可以使用 TreeMap：

```
TreeMap<Double, Character> m = new TreeMap<Double, Character>();
m.put(1.0, 'A');
m.put(2.9, null);
m.put(4.0, 'B');
m.put(6.0, null);
m.put(6.5, 'C');
m.put(10.0, null); 
```

查找逻辑有点复杂，因为您可能想要一个包容性查找（即 2.9 映射到“A”，而不是未定义）：

```
private static <K, V> V mappedValue(TreeMap<K, V> map, K key) {
    Entry<K, V> e = map.floorEntry(key);
    if (e != null && e.getValue() == null) {
        e = map.lowerEntry(key);
    }
    return e == null ? null : e.getValue();
} 
```

例子：

```
mappedValue(m, 5) == 'B' 
```

更多结果包括：

```
0.9 null
1.0 A
1.1 A
2.8 A
2.9 A
3.0 null
6.4 null
6.5 C
6.6 C
9.9 C
10.0 C
10.1 null 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-24T11:11:10.797

Guava [RangeMap](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/collect/RangeMap.html) [提供](https://github.com/google/guava/wiki/NewCollectionTypesExplained#rangemap)开箱即用的专业解决方案：

```
RangeMap<Integer, String> rangeMap = TreeRangeMap.create();
rangeMap.put(Range.closed(1, 100), "foo"); // {[1, 100] => "foo"}
rangeMap.put(Range.open(3, 6), "bar"); // {[1, 3] => "foo", (3, 6) => "bar", [6, 100] => "foo"}

rangeMap.get(42); // returns "foo" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:06:57.583

A`HashMap`不适用于将范围映射到值，除非您找到一种方法为范围和其中匹配的单个值生成哈希码。但以下方法可能是您正在寻找的

```
public class RangeMap {
    static class RangeEntry {
        private final double lower;
        private final double upper;
        private final Object value;
        public RangeEntry(double lower, double upper, Object mappedValue) {
            this.lower = lower;
            this.upper = upper;
            this.value = mappedValue;
        }
        public boolean matches(double value) {
            return value >= lower && value <= upper;
        }
        public Object getValue() { return value; }
    }

    private final List<RangeEntry> entries = new ArrayList<RangeEntry>();
    public void put(double lower, double upper, Object mappedValue) {
        entries.add(new RangeEntry(lower, upper, mappedValue));
    }
    public Object getValueFor(double key) {
        for (RangeEntry entry : entries) {
            if (entry.matches(key))
                return entry.getValue();
        }
        return null;
    }
} 
```

你可以做

```
RangeMap map = new RangeMap();
map.put(1, 2.9, "A");
map.put(4, 6, "B");

map.getValueFor(1.5); // = "A"
map.getValueFor(3.5); // = null 
```

它不是很有效，因为它只是在一个列表上进行迭代，如果你把冲突的范围放在那里，它不会在那种状态下抱怨。只会返回它找到的第一个。

PS：像这样的映射会将一系列*键*映射到一个*值*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T15:28:07.893

这似乎是使用树结构的自然情况。

不幸的是，实现该接口是不切实际的，`java.util.Map`因为它指定了一个返回所有键的方法，并且在您的情况下，理论上您拥有大量不切实际的键。

树的每个节点都应该有一个最小键、一个最大键和一个与该范围关联的值。然后，您可以链接到代表下一个更高和下一个较低范围的节点（如果它们存在）。就像是：

```
public class RangeMap<K extends Comparable<K>, V> {
    protected boolean empty;
    protected K lower, upper;
    protected V value;
    protected RangeMap<K, V> left, right;

    public V get(K key) {
        if (empty) {
            return null;
        }

        if (key.compareTo(lower) < 0) {
            return left.get(key);
        }

        if (key.compareTo(upper) > 0) {
            return right.get(key);
        }

        /* if we get here it is in the range */
        return value;
    }

    public void put(K from, K to, V val) {
        if (empty) {
            lower = from;
            upper = to;
            value = val;
            empty = false;
            left = new RangeMap<K,V>();
            right = new RangeMap<K,V>();
            return;
        }

        if (from.compareTo(lower) < 0) {
            left.put(from, to, val);
            return;
        }

        if (to.compareTo(upper) > 0) {
            right.put(from, to, val);
            return;
        }

        /* here you'd have to put the code to deal with adding an overlapping range,
           however you want to handle that. */
    }

    public RangeMap() {
        empty = true;
    }
} 
```

如果您需要比树提供的更快的查找，您可能需要研究类似跳过列表或开发自己的哈希函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-24T18:32:38.857

这种类型的数据结构称为[区间树](https://en.wikipedia.org/wiki/Interval_tree)。（维基百科页面只展示了区间可能重叠的情况，但可以想象这样一种情况，当您添加新区间时，您希望删除任何重叠区间的映射。谷歌搜索实现，看看是否符合您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T14:44:09.343

只需在您的地图中有一个列表作为值。

```
Map<String, List<Double>> map = new HashMap<String, List<Double>>(); 
```

还有一个**建议**：

除非您想要同步访问，否则不要使用 Hashtable。

**编辑：**

Hashtable 方法是同步的，即没有两个线程可以在单个时间点访问这些方法。HashMap 方法未同步。如果您使用 Hashtable，则会对性能造成影响。使用 HashMap 以获得更好的性能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-15T15:42:44.557

我认为 Apache commons 包含一些解决这个问题的方法。

[http://commons.apache.org/proper/commons-net/apidocs/index.html](http://commons.apache.org/proper/commons-net/apidocs/index.html)

使用 SubnetUtils.SubnetInfo 的 SubnetUtils

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-15T14:43:24.807

一种方法是，使用列表实现之一作为键的值。

```
map.put("A", ArrayList<Integer>); 
```

# css - 文本未出现在提交按钮上

> ID：13399823
> 
> 赞同：1
> 
> 时间：2012-11-15T14:42:24.070
> 
> 标签：css, button, text

我目前正在重新设计一个网站，但一个页面让我很难过，因为新按钮上的文本不会出现在 Chrome 和 Safari 上。这是页面：

[http://dev.puzzles-et-jeux.fr/fr/page/login.html](http://dev.puzzles-et-jeux.fr/fr/page/login.html)

任何帮助将非常感激！对不起，如果答案很明显，也许我看起来太近了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:46:03.127

尝试更改为`type="button"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:49:17.783

问题是，文本根本不适合。要么使`font-size`按钮变小，要么使按钮变大。

例如，您可以删除此规则：

```
.button.large { font-size: 125%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:40:49.000

```
<input type="image" value="Identifiez-vous" class="button large red"> 
```

是不正确的，`<input type="button"`是你需要的。

编辑：您是否尝试过使用按钮元素？

```
<button type="submit">Identifiez-vous</button> 
```

# iphone - iOS：自定义图像 UIBarButtonItem 不响应触摸

> ID：13399824
> 
> 赞同：2
> 
> 时间：2012-11-15T14:42:27.807
> 
> 标签：iphone, ios, uinavigationcontroller, uiimageview, uibarbuttonitem

我正在尝试将图像用作导航栏中的按钮。按钮显示得很好，但它们不响应触摸事件。这是我设置按钮的方式：

```
UIImageView *iv = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"arrow_up_24.png"]];

iv.userInteractionEnabled=YES;
UIBarButtonItem * logoutButton = [[UIBarButtonItem alloc] initWithCustomView:iv ];

logoutButton.target=self;
logoutButton.action=@selector(logoutButtonPressed); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:13:52.630

如果我没记错的话，我在过去的一个项目中遇到了这个问题。我相信这是一个问题`UIBarButtonItem`。解决方法是...

```
UIButton *imageButton = [UIButton buttonWithStyle:UIButtonStyleCustom];
imageButton.frame = CGRectMake(0,0,24,24);//Standard size of a UIBarButtonItem i think.
[imageButton setImage:[UIImage imageNamed:@"arrow_up_24.png"] forState:UIControlStateNormal];
[imageButton addTarget:self action:@selector(logoutButtonPressed) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *barItem = [[UIBarButtonItem alloc] initWithCustomView:imageButton]; 
```

//将其添加到您的酒吧或此处的任何内容。

如果你想要像普通按钮一样的白光，你必须设置

```
imageButton.showsTouchWhenHighlighted = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:09:05.160

试试这个，我认为问题在于你设置的是图像对象而不是按钮对象。

```
UIButton *navBarButton = [[UIButton alloc] init];
[navBarButton setImage:[UIImage imageNamed:@"arrow_up_24.png"] forState:UIControlStateNormal];
[navBarButton addTarget:self action:@selector(logoutButtonPressed) forControlEvents:UIControlEventTouchUpInside];

// Use self.navigationItem.leftBarButtonItem if that's your preference
UIBarButtonItem *rightItem = [[UIBarButtonItem alloc] initWithCustomView:rightItemImage];
self.navigationItem.rightBarButtonItem = rightItem; 
```

# wordpress - 增加自定义字段文本的长度

> ID：13399825
> 
> 赞同：1
> 
> 时间：2012-11-15T14:42:32.307
> 
> 标签：wordpress, woocommerce

我正在使用 Wordpress 插件 Woocommerce。系统使用属性来显示产品信息，例如重量、高度等。我猜属性功能是基于 Wordpress 自定义字段的。我拥有的属性之一是描述。我面临的问题是 WP 会自动截断我在此处输入的内容并将其限制为大约 200 个字符。

在仔细研究了代码和谷歌上的各种搜索之后，我一无所获。所以我想知道是否有人可能知道如何增加这些自定义字段/属性的长度以接受 400 个字符之类的内容。

在此先感谢， 苏克里特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:36:06.480

在花了一些时间搜索代码和数据库后找到了答案。在 Woocommerce 团队成员的一些很好的建议下，我最终选择了以下解决方案。

我进入数据库并将 {wp}_terms 表的名称列从 VARCHAR (200) 更改为 VARCHAR(1000)。

似乎已经解决了问题，至少在下次升级之前。

# java - Java程序中可以存在两个主要方法吗？

> ID：13399836
> 
> 赞同：37
> 
> 时间：2012-11-15T14:43:40.000
> 
> 标签：java, methods, arguments, main

Java程序中可以存在两种主要方法吗？

只是因为他们的论点有所不同，例如：

```
public static void main(String[] args) 
```

第二个可以是

```
public static void main(StringSecond[] args) 
```

如果可能，将使用哪个 Method 作为入口点？如何识别这个？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-12-05T10:29:02.270

在这里，您可以看到`public static void main (String args[])`单个文件中有 2 个名称`Test.java`（特别是没有使用文件名作为 2 个类名称中的任何一个），并且 2 个类具有默认访问说明符。

```
class Sum {

    int add(int a, int b) {
        return (a+b);   
    }

    public static void main (String args[]) {
        System.out.println(" using Sum class");
        Sum a = new Sum();
        System.out.println("Sum is :" + a.add(5, 10));
    }

    public static void main (int i) {
        System.out.println(" Using Sum class main function with integer argument");
        Sum a = new Sum();
        System.out.println("Sum is :" + a.add(20, 10));
    }
}

class DefClass {

    public static void main (String args[]) {
        System.out.println(" using DefClass");
        Sum a = new Sum();
        System.out.println("Sum is :" + a.add(5, 10));
        Sum.main(null);
        Sum.main(1);
    }
} 
```

当我们编译代码 Test.java 时，它将生成 2 个`.class`文件（即`Sum.class`和`DefClass.class`），如果我们运行 Test.java，我们将无法运行它，因为它找不到任何名为 Test 的主类。相反，如果我们这样做`java Sum`或`java DefClass`两者都会使用不同的`main()`. 要使用 Sum 类的 main 方法，我们可以使用类名`Sum.main(null)`或`Sum.main(1)//Passing integer value in the DefClass main()`.

在类作用域中，每个类只能有一个`public static void main (String args[])`，因为类的静态方法属于一个类而不属于它的对象，并且使用它的类名来调用。即使我们创建多个对象并使用它们调用相同的静态方法，这些调用将引用的静态方法的实例也是相同的。

我们还可以通过在 main 中传递不同的参数集来重载 main 方法。上面的代码中提供了类似的示例，但默认情况下，控制流将从`public static void main (String args[])`我们使用调用的类文件开始`java classname`。要使用其他参数集调用 main 方法，我们必须从其他类显式调用它。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-15T14:44:59.797

只要方法参数（数字（或）类型）不同，就可以。它被称为[重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)。

> 重载的方法通过传递给方法的参数的数量和类型来区分

```
public static void main(String[] args) 
```

只有以单个`String[]`（或）`String...`为参数的 main 方法才会被视为程序的入口点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-07T06:56:20.060

一个程序中可以有多个 main 方法。其他是重载方法。这个重载的方法在单个主方法下工作正常

```
public class MainMultiple{

   public static void main(String args[]){
       main(122);
       main('f');
       main("hello java");
   }

   public static void main(int i){
       System.out.println("Overloaded main()"+i);
   }

   public static void main(char i){
       System.out.println("Overloaded main()"+i);
   }

   public static void main(String str){
       System.out.println("Overloaded main()"+str);
   }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-15T14:45:21.597

只`public static void main(String[] args)`计算。这是唯一被认为是真正的 main() 的签名（我的意思是作为程序入口点）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-15T14:46:15.920

只要`StringSecond`是一个类，那将是可编译的代码。但是，如果您所说的“主要方法”是指程序的第二个入口点，那么您的问题的答案仍然是否定的。只有第一个选项 ( `public static void main(String[] args)`) 可以作为程序的入口点。

但是请注意，如果您要将第二个`main(String[])`方法放在不同的类中（但在同一个项目中），您可以在项目中拥有多个可能的入口点，然后您可以从中进行选择。但这不能与覆盖或重载的原则相冲突。

另请注意，该领域的一个混淆来源，尤其是对于入门级程序员而言，是`public static void main(String[] args)`和`public static void main(String ... args)`都用作入口点并被视为具有相同的方法签名。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-28T19:35:26.753

**在 Java 中，每个类**只能有**一个** 。这意味着，**如果您的程序有多个类，则每个类都可以有**. 有关详细信息，请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html)。`public static void main(String[] args)` ****`public static void main(String[] args)`****

 ***** * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-27T22:20:08.787

main 方法的签名必须是

```
public static void main(String[] args) 
```

*   参数名称可以是任何有效名称
*   static和public关键字的位置可以互换
*   String 数组也可以使用 varargs 语法

一个类可以定义多个名为 main 的方法。这些方法的签名与 main 方法的签名不匹配。这些具有不同签名的其他方法不被视为“主要”方法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-15T18:45:41.360

答案是肯定的，但您应该考虑以下 3 点。

1.  没有两个主要方法参数应该相同

    例如。

    *   `public static void main(int i)`
    *   `public static void main(int i, int j)`
    *   `public static void main(double j)`
    *   `public static void main(String[] args)`
2.  Java 的实际 main 方法是带有 的`(String[] args)`，所以实际执行是从 public static void main(String[] args) 开始的，所以带有的 main 方法`(String[] args)`必须在一个类中，除非它不是子类。

3.  为了执行其他主要方法，您需要从`(String[] args)`主要方法内部调用它们。

这是一个关于相同的详细视频： [https ://www.youtube.com/watch?v=Qlhslsluhg4&feature=youtu.be](https://www.youtube.com/watch?v=Qlhslsluhg4&feature=youtu.be)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-15T14:47:26.950

答案是不; 只有一种“main”方法——其中“main”表示您可以“运行”的入口点。

您可以像示例中那样编写重载版本，但它们不能“运行”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-07-09T15:59:11.290

一个程序中可以有多个 main 方法。但是 JVM 总是会调用 String[] 参数 main() 方法。其他方法将充当重载方法。我们必须显式调用这些重载方法。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-29T13:32:00.927

是的，在同一个程序中有两个 main() 是可能的。例如，如果我有一个类 Demo1 如下。编译此文件将生成 Demo1.class 文件。一旦你运行它，它将默认运行具有字符串参数数组的 main()。它甚至不会用 int 参数嗅探 main() 。

```
class Demo1 {   
static int a, b;    
public static void main(int args) {
     System.out.println("Using Demo1 class Main with int arg");
     a =30;
     b =40;
     System.out.println("Product is: "+a*b);
 }
public static void main(String[] args) {
      System.out.println("Using Demo1 class Main with string arg");
      a =10;
      b =20;
      System.out.println("Product is: "+a*b);

 }
 }      

Output:
Using Demo1 class Main with string arg
Product is: 200 
```

但是如果我添加另一个名为 Anonym 的类并将文件保存为 Anonym.java。在这里面，我调用了 Demo1 类 main()[int 参数或字符串参数之一]。编译此 Anonym.class 文件后生成。

```
class Demo1 {   
    static int a, b;    
public static void main(int args) {
    System.out.println("Using Demo1 class Main with int arg");
    a =30;
    b =40;
    System.out.println("Product is: "+a*b);
}
public static void main(String[] args) {
    System.out.println("Using Demo1 class Main with string arg");
     a =10;
     b =20;
     System.out.println("Product is: "+a*b);        
} 
}       

class Anonym{
public static void main(String arg[])
{

    Demo1.main(1);
    Demo1.main(null);
}
}

Output:
Using Demo1 class Main with int arg
Product is: 1200
Using Demo1 class Main with string arg
Product is: 200 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-21T04:30:54.270

是的！Java 中的任何类都可以有多个主要方法。它被称为*重载*（重载的方法是具有相同名称但具有不同签名的方法）但应该只有一个带有如下参数的主要方法：- (String[] args) 或 (String args[])

例如：-public 类 E {

```
public static void main(String args){
    System.out.println("Print A");
}
public static void main(String [] args){
    System.out.println("Print B");
}
public static void main(int garbage){
    System.out.println("Print C");
}
public static void main(int i){
    System.out.println("Print D")
} 
```

}

上述程序的输出将是“Print B”，因为只有该 main 方法包含由 Javac 编译器识别的正确方法签名，并且它只编译并保留其余的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-20T09:06:05.757

[![在此处输入图像描述](../Images/c70fe29df720c16d0a8728d13a1a3e59.png)](https://i.stack.imgur.com/uemcJ.png)

案例：1 > 我们有两个主要方法，但使用“Main”和“main2”，所以 jvm 只有一个=调用“main”方法。

2> 方法相同但参数不同，仍然 jvm 调用“main(String[] args)”方法。

3> 完全相同的方法，但它会产生编译时错误，因为您不能在一个类中拥有两个相同名称的方法！！！

希望它能给你一个清晰的画面。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-12T10:02:07.550

同一范围内的两个 main(String[] args) 方法的可能性会给 JVM 造成混乱。它无法将它们用作重载方法。因此，参数方面的签名）必须不同。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-12-20T20:56:39.800

*文件“ Locomotive.java* ”中的以下代码将成功编译并运行，执行结果显示

```
2<SPACE> 
```

如上所述，**重载规则**仍然适用于 main 方法。然而，**入口点**是著名的*psvm* (public static void main(String[] args))

```
public class Locomotive {
    Locomotive() { main("hi");}

    public static void main(String[] args) {
        System.out.print("2 ");
    }

    public static void main(String args) {
        System.out.print("3 " + args);
    }
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-11-28T10:41:14.330

我已经检查了 java 版本 1.6.0_32 多个主要方法正在工作，但应该有一个主要方法，如类型签名的 public static void main(String []args)。Ex在这里，我测试过。

```
public class mainoverload
{
public static void main(String a)
{
    System.out.println("\nIts "+a);
}
public static void main(String args[])
{
    System.out.println("\nIts public static void main\n");
    mainoverload.main("Ankit");
    mainoverload.main(15,23);
    mainoverload.main(15);
}
public static void main(int a)
{
    System.out.println("\nIts "+a);
}
public static void main(int a,int b)
{
    System.out.println("\nIts "+a+" "+b);
}
} 
```****

# javascript - 在力有向图中重新排序 svg 元素

> ID：13399837
> 
> 赞同：0
> 
> 时间：2012-11-15T14:43:43.263
> 
> 标签：javascript, svg, d3.js, force-layout

我有一个带有有价值链接的力有向图。我放入了一个滑块控件，它根据链接的值删除和添加链接（滑动到 0.5，只显示权重为 0.5 和更高的链接）。

为此，我通常会删除所有链接并根据滑块标准将它们添加回来。我遇到的问题是，当我将链接添加回图表时，它们出现在节点的顶部。

我希望节点是最高的“z-index”，但我知道 SVG 没有 z-index。如何重新排序元素以使节点回到顶部？我查看了 d3.select.order() 和 d3.select.sort() 但我不太确定如何使用它们来完成这种重新排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:50:13.720

我建议将 display 属性设置为 none 而不是添加和删除节点。

或者，如果您有离散数量的权重，您可以使用 CSS 来完成，如下所示：

```
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
  <style type="text/css">
    <!-- Hide all links with weights that we don't want -->
    .weight0,.weight2,.weight4,.weight6 {display:none}
  </style>
  <a xlink:href="#" class="weight0">
    <text y="20">weight 0</text>
  </a>
  <a xlink:href="#" class="weight2">
    <text y="40">weight .2</text>
  </a>
  <a xlink:href="#" class="weight4">
    <text y="60">weight .4</text>
  </a>
  <a xlink:href="#" class="weight6">
    <text y="80">weight .6</text>
  </a>
  <a xlink:href="#" class="weight8">
    <text y="100">weight .8</text>
  </a>
  <a xlink:href="#" class="weight10">
    <text y="120">weight 1</text>
  </a>
</svg> 
```

# ruby-on-rails-3 - 长轮询会阻止雪松上的网络测功机吗？

> ID：13399838
> 
> 赞同：1
> 
> 时间：2012-11-15T14:43:45.057
> 
> 标签：ruby-on-rails-3, heroku

Heroku 开发中心有一篇文章解释了 cedar 堆栈支持长轮询：[https ://devcenter.heroku.com/articles/request-timeout](https://devcenter.heroku.com/articles/request-timeout)

这是否意味着 web dyno 被其他请求阻止，而长轮询 HTTP 连接是打开的？

# html - ie8错误：固定位置div，内部相对位置div，内部相对位置浮动div ...不渲染

> ID：13399840
> 
> 赞同：1
> 
> 时间：2012-11-15T14:43:56.690
> 
> 标签：html, css, internet-explorer-8

此 HTML 在 IE8 中无法正确呈现。它适用于 Firefox、Opera、IE7、IE9 和 IE10。（当然，它在 IE6 中也不起作用，因为它涉及一个固定位置的元素。）

实际上，它在 Chrome 中又做了一些不同的事情。

我能想到的最窄的测试用例是：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>test</title>
    <style>
        div {
            width: 100px;
            height: 100px;
            }
    </style>
</head>

<body>

<div style="background-color: red; position: relative; top: 50px; left: 50px; float: left;">
    <div style="background-color: blue; position: relative; top: 200px; left: 200px;">
        <div style="background-color: green; position: fixed; top: 0;">
        </div>
    </div>
</div>

</body>
</html> 
```

在 IE8 中，最内层的 div（绿色）以某种方式忽略了祖父 div（红色）的 50px 左缩进，即使是直接父级（蓝色）也将其考虑在内。奇怪的错误！

只有当 div 以这种方式双重嵌套时才会发生，并且只有当祖父母浮动时才会发生。如果我删除浮动，那么它会呈现好的。（但是，我需要它浮动，所以这对我来说不是一个解决方法。）

**编辑**

我最初以为我已经在 Chrome 中测试过了，但实际上 Chrome 做了一些完全不同的事情。

我不知道哪个浏览器实际上是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:05:33.623

这里没有错误发生。绿色 div 具有“位置：固定”，这将元素相对于浏览器窗口定位，它不会相对于其他元素定位自身。

我的猜测是您希望绿色 div 相对于蓝色 div 定位，对吗？然后在绿色 div 上使用“位置：绝对”。

# ruby-on-rails - 文件字段标记未在浏览器中显示值

> ID：13399849
> 
> 赞同：1
> 
> 时间：2012-11-15T14:44:11.277
> 
> 标签：ruby-on-rails, ruby, jruby, filefield

我在 .html.erb 文件中使用以下行

```
<@= file_field_tag 'file', :class => 'upload', value => 'index.html' %> 
```

当它在浏览器中呈现时，它不显示值“index.html”。

有人可以帮我弄清楚如何显示价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:48:48.063

您不能在 HTML 中的文件输入上设置值。因此，您也不能通过 rails 来做到这一点。

否则，您可以在页面中设置值并通过 javascript 提交表单并从访问者计算机中提取文件。

# jquery - TinyMCE 没有在 jqueryui 模式对话框上初始化

> ID：13399862
> 
> 赞同：2
> 
> 时间：2012-11-15T14:44:42.660
> 
> 标签：jquery, jquery-ui, tinymce, modal-dialog

场景：我需要加载一个外部页面并将 tinyMCE 应用于文本区域

问题：第一次单击它可以工作，但是当您关闭对话框并再次单击该按钮时，它不会使用 tinyMCE

代码：test.html

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/themes/base/jquery-ui.css" id="theme">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/tiny_mce/jquery.tinymce.js"></script>

<script type="text/javascript">
$(function(){
    $('.newbutton').button({icons: {primary: "ui-icon-plusthick"}}).click(function(e){
        e.preventDefault();
//      $('body').css({'overflow' : 'hidden'});
        $('#newform').dialog({
            show: "puff",  
            hide: "puff", 
            resizable: false, 
            height: 500, 
            width: 800, 
            modal: true, 
            beforeClose: function(){
                if ($("textarea.tinymce").length) {
                    $('textarea.tinymce').tinymce().remove();
                };
                $(this).html(" ");

            }, 
            close: function(){
//              $('body').css({'overflow' : 'auto'});   
                $(this).html(" ");
//              $('#newform').dialog('destroy');
            }, 
            open: function(){
                $('#newform').load("test2.html", function(){
                    $('textarea.tinymce').tinymce({
                        // Location of TinyMCE script
                        script_url : 'js/tiny_mce/tiny_mce.js',

                        // General options
                        theme : "advanced",
                        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

                        // Theme options
                        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
                        theme_advanced_toolbar_location : "top",
                        theme_advanced_toolbar_align : "left",
                        theme_advanced_statusbar_location : "bottom",
                        theme_advanced_resizing : true

                    });
                });
            }
        });     

    });

});
</script>

</head>

<body>
<button id="newbutton" class="newbutton">New</button>
<div id="newform" class="hide" title="Title"><!-- data loaded dynamically--></div>

</body>
</html> 
```

代码：test2.html

```
<textarea class="tinymce" id="elm1" name="elm1" rows="15" cols="80" style="width: 80%">
                &lt;p&gt;
                    This is some example text that you can edit inside the &lt;strong&gt;TinyMCE editor&lt;/strong&gt;.
                &lt;/p&gt;
                &lt;p&gt;
                Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.
                &lt;/p&gt;
            </textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:24:05.183

经过多次反复试验，我发现问题是因为对话框具有显示和隐藏效果！删除这些使系统正常工作，因此解决此问题的方法是在 tinymce 初始化时显示加载屏幕。

代码 test.html ：无标题文档

```
<script type="text/javascript">
$(function(){
    $('.newbutton').button({icons: {primary: "ui-icon-plusthick"}}).click(function(e){
        e.preventDefault();
        $('body').css({'overflow' : 'hidden'});
        $('#newform').dialog({
            show: "puff",  
            hide: "puff", 
            resizable: false, 
            height: 500, 
            width: 800, 
            modal: true, 
            beforeClose: function(){
                if ($("textarea.tinymce").length) {
                    $('textarea.tinymce').tinymce().remove();
                };
                $(this).html(" ");
            }, 
            close: function(){
                $('body').css({'overflow' : 'auto'});   
                $(this).html(" ");
                $('#newform').dialog('destroy');
            }, 
            open: function(){
                $('#newform').load("test2.html", function(){
                    $(this).css({"overflow": "hidden"});
                    $('.tinymceloader').css({"position": "absolute", "height": $(this).height()-16, "width": $(this).width() - 32, "z-index": 200, "background-color": "#ffffff"});
                    setTimeout("inittinymce(); $(this).css({\"overflow\": \"auto\"});", 500);
                });
            }
        });     

    });

});
function inittinymce(){
    $('textarea.tinymce').tinymce({
                        // Location of TinyMCE script
                        script_url : 'js/tiny_mce/tiny_mce.js',

                        // General options
                        theme : "advanced",
                        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

                        // Theme options
                        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
                        theme_advanced_toolbar_location : "top",
                        theme_advanced_toolbar_align : "left",
                        theme_advanced_statusbar_location : "bottom",
                        theme_advanced_resizing : true

                    });
    setTimeout("$('.tinymceloader').hide();", 1000);

}
</script>

</head>

<body>
<button id="newbutton" class="newbutton">New</button>
<div id="newform" class="hide" title="Title"><!-- data loaded dynamically--></div>

</body>
</html> 
```

代码test2.html：

```
<div class="tinymceloader">Loading</div>
<textarea class="tinymce" id="elm1" name="elm1" rows="15" cols="80" style="width: 80%">
                &lt;p&gt;
                    This is some example text that you can edit inside the &lt;strong&gt;TinyMCE editor&lt;/strong&gt;.
                &lt;/p&gt;
                &lt;p&gt;
                Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.
                &lt;/p&gt;
            </textarea> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:35:18.013

当您关闭对话框时 - 您还需要关闭 tinymce 实例：

```
tinymce.execCommand('mceRemoveControl',true,'your_editor_id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-26T02:20:42.727

我已经解决了这个问题。

```
function AddTinyMCE() {
    tinymce.init({
        selector: "textarea",
        theme: "modern",
        height: 180,
        plugins: [
         "advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker",
         "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
         "save table contextmenu directionality emoticons template paste textcolor"
        ],
            content_css: "css/content.css",
            toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | l      ink image | preview | forecolor backcolor",
            style_formats: [
            { title: 'Bold text', inline: 'b' },
            { title: 'Red text', inline: 'span', styles: { color: '#ff0000'} },
            { title: 'Red header', block: 'h1', styles: { color: '#ff0000'} },
            { title: 'Example 1', inline: 'span', classes: 'example1' },
            { title: 'Example 2', inline: 'span', classes: 'example2' },
            { title: 'Table styles' },
            { title: 'Table row 1', selector: 'tr', classes: 'tablerow1' }
        ]
    });
} 
```

并按如下方式调用它：

```
$("#dialog-Edit").dialog({
        autoOpen: true,
        modal: true,
        height: 600,
        width: 700,
        title: "Example",
        buttons: [{
            text: "Save",
            title: "Save",
            tabIndex: -1,
            click: function () {

            }
        },
        {
            text: "Cancel",
            title: "Cancel",
            tabIndex: -1,
            click: function () {
                $(this).dialog("close");
            }
        }],
        open: function () {
            AddTinyMCE();

        },
        close: function () {
            $(this).dialog("destroy");
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T10:19:42.797

如果原始事件使用 destroy `($(this).dialog("destroy");)`，则问题已解决，删除 TinyMCE

# javascript - 提高程序性能

> ID：13399863
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:44:46.910
> 
> 标签：javascript, regex, html, web-worker

我有一个 javascript 程序，它使用我的 JSON 数据（200Mega）执行操作这个程序通过 regxp 搜索我的数据中的出现

```
var myDatas = [
 { "id" : "0000000001",
   "title" :"Data1",
   "info": {
             "info1": "data data data",
             "info2": "infoinfoiinfoinfo",
             "info3": "info333333333",
             "miscellaneous": "",
             "other": [
                 {"title": "qwe", "ref": "other"},
                 {"title": "sdsd", "ref": "other"},
                 {"title": "ddd", "ref": "123"} 
             ]
           },
    "text": "xxxx text sldjdjskldj text text" },
 . . . ]; 
```

实际执行太慢了。

我会使用 Worker of html 5 但 IE9 不支持 IE9。

我的计划：

```
 iterObject : function(obj){

        var text = $('#search-input').val() //text to search

        var self = this
        $.each(obj, function(key, value) {
            if((typeof value) == 'object'){
                self.iterObject(value)
            }
            else{
                 self.Search(text, value)
              }
          }
      }

Search : function(item, text){

        var regexThisFragment =
                          new RegExp("[^a-zA-Z0-9]+.{0,40}[^a-zA-Z]+" + 
                          item + 
                          "[^a-zA-Z]+.{0,40}[^a-zA-Z0-9]+", "i")

        while(text.match(regexThisFragment) != null)
        {
            var fragment = text.match(regexThisFragment).toString()
            console.log(fragment );
            }
        }
}, 
```

如何改进我的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:27:52.423

[user1689607 发布的答案](https://stackoverflow.com/a/13400214/319403)很有趣，但是使用`setTimout`不会异步执行代码。它将在与主应用程序相同的线程上运行。使用计时器仍然很有趣的是，应用程序的其他部分将在计时器运行时有一些可用的处理时间。

让您的应用程序在慢速/快速设备上正常工作的最佳方法是选择处理时间和“发布”时间。由于处理数据可能需要一些时间，您还需要能够取消它。并使用回调来处理进程的结束。

代码可能看起来像这样：

```
var DataProcessor = {
     dataProcessDuration : 30,
     releaseDuration : 5,
     dataProcessedCallback : function() { 
                //... somehow notify the application the result is available
                                       },
     _currentIndex : 0,
     _processing : false,
     _shouldCancel : false,
     processData : function() 
                              {   this.cancelProcessing();
                                  this._currentIndex =0;
                                  this._processing = true;
                                  // launch data process now, or give it time to cancel
                                  if (!this._shouldCancel)  this._processData();
                                  else setTimeout(this._processData.bind(this), 
                                            this.releaseDuration+this.dataProcessDuration+1);
                               },
     cancelProcessing : function() 
                               { 
                                     if (!this._processing) return;
                                     this._shouldCancel=true;
                               },
     _processData : function() {
          if (this._shouldCancel) { this._shouldCancel = false ;  
                                    this._processing = false; 
                                    return; }
           var startTime = Date.now();
           // while there's data and processing time  left.
           while  ( ( this._currentIndex < length of data)
                       && (Date.now()-startTime < this.dataProcessDuration) )
                {    var thisBatchCount=10;
                     while (thisBatchCount--)
                           {  
                              // ... process the this._currentIndex part of the data
                             this._currentIndex++;
                             if ( this._currentIndex == length of data) break;
                            }
                }
           if (this._currentIndex == (length of data) ) // the end ?
                {     this._processing = false; 
                      this.dataProcessedCallback()
                 }
           else // keep on processing after a release time
                setTimeout(this._processData.bind(this), this.releaseDuration);
                           }
} 
```

Rq ：在主流程循环中，您可能希望通过更改 thisBatchCount 来微调粒度。如果太小，您会通过过度检查 Date.now() 来浪费时间，而太大的内部处理将花费太多时间，并且您将无法获得您选择的处理/发布比率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:03:08.787

如果问题是 UI 在处理期间被冻结，您可以将处理分解为异步处理的块。这将使 UI 响应用户。

```
var i = 0,
    chunkSize = 10, // This is how many to process at a time
    duration = 30;  // This is the duration used for the setTimeout

(function process() {
    // process this chunk
    var chunk = myDatas.slice(i, i += chunkSize);

    // do the next chunk
    if (i < myDatas.length)
        setTimeout(process, duration);
})(); 
```

您可以根据需要调整`chunkSize`和`duration`。

如果问题是提高实际代码性能，则需要显示一些代码。

# ios - 在应用程序包中添加符号链接

> ID：13399864
> 
> 赞同：4
> 
> 时间：2012-11-15T14:44:48.323
> 
> 标签：ios, xcode, build, alias, linkage

Apple 在`UILocalNotification`类引用中指定音频文件必须来自应用程序包。但是，一些聪明的极客通过使用以下方法找到了解决此限制的方法：

```
// this works by going up the bundle dir, then pointing to the Documents dir
localNotif.soundName = @"../Documents/blabla.caf"; 
```

这个解决方法在 iOS 5 中运行良好，但是在 iOS 6 中出现了问题。为了尝试提出新的解决方法，我创建了一个**别名（符号链接）** ，称为`blabla.caf`指向`../Documents/blabla.caf`，并将其放入应用程序中捆。这是我被卡住了。

现在，我得到了一个`PBXCp error`，Xcode 无法完成应用程序部署到设备，因为显然

> 错误：/Users/stuff/moreStuff/appName/../Documents/blabla.caf：没有这样的文件或目录

* * *

我的问题：

1.  我可以以某种方式在`Documents`目录中添加一个虚拟文件（0 KB）来关闭 Xcode 吗？
2.  我可以以某种方式强制 Xcode 覆盖此错误并继续部署应用程序吗~~？~~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-19T10:29:06.530

尽管从包到文档目录的符号链接在 iOS 7.1 中有效，但如果您要将应用程序放入 AppStore，则此解决方法将变得无用。自 2014 年 3 月起，带有此类符号链接的应用程序**将无法通过**审核。

在我将捆绑包中带有此类链接的应用程序上传到 iTunes 连接后，我会`Invalid binary`立即收到一个状态。使用来自 iTunes Store 的以下邮件：

> 亲爱的开发者，
> 
> 我们发现您最近交付的“X”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效的符号链接 - 您的包包含符号链接“外部/文档”，它解析为不存在或位于包之外的位置“外部/../../文档”。
> 
> ...
> 
> 问候，
> 
> 应用商店团队

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T15:59:58.083

如果您将符号链接`../../Documents/blabla.caf`放置在文件夹内，然后将该文件夹添加到项目中（确保您在导入时设置了“创建文件夹引用...”而不是“创建组...”），那么 Xcode 不会尝试在构建过程中解析链接。

我已经验证了链接本身在应用程序中工作正常，但我不确定 UILocalNotification 是否会`folder/blabla.caf`在其 soundName 属性中接受。

# cordova - 如何从 iOS 上的 Cordova 2.2.0 应用程序获取文件

> ID：13399869
> 
> 赞同：0
> 
> 时间：2012-11-15T14:45:03.303
> 
> 标签：cordova, file-transfer

我在我的应用程序中生成了几个 CSV 文件，我正在寻找一种可行的方法将这些文件传输到台式计算机，以便可以进行一些好的老式数字运算。目前，文件必须保持 CSV，因为这是桌面应用程序使用的。我看到有一种文件传输方法，但看起来它使用post提交文件，但我不希望这个软件有任何类型的web服务依赖。我正在考虑使用电子邮件，但看起来我无法添加附件。一个很好的 FTP 客户端会很有效，但我只能找到一个适用于 Android 的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:53:32.247

发布到网络服务是最简单的，因为浏览器直接支持，不需要插件。

有可用的 iOS FTP 客户端库，但其中涉及相当多的复杂性。

另一方面，电子邮件是 iOS 的标准部分，因此即使标准插件没有实现您想要的结构，编写自定义电子邮件插件也非常简单：

```
-(void)sendEmail:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options  
    {

    NSString *callback = [arguments objectAtIndex:0];
    NSString *html = [arguments objectAtIndex:1];
    NSString *csv= [arguments objectAtIndex:3];

    NSData *csvData = [csv dataUsingEncoding:NSUTF8StringEncoding];

    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    composer.mailComposeDelegate = self;

    [composer setSubject:@"CSV Data"];
    [composer setMessageBody:html isHTML:YES];
    [controller addAttachmentData:csvData mimeType:@"text/csv" fileName:@"CSVFile.csv"];

    if (composer != nil) {
        [self.viewController presentModalViewController:composer animated:YES];
    }
   // [composer release]; // not needed with ARC

    // send callback immediately - we don't need to know what happened to the mail after the UI opened

    CDVPluginResult* result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:  @"Email UI opened"];    
    [self writeJavascript:[result toSuccessCallbackString:callback]];

}   

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{       
    [self.viewController dismissModalViewControllerAnimated:YES];    
} 
```

# r - 在 R 上时 vi 模式到 emacs 模式

> ID：13399874
> 
> 赞同：3
> 
> 时间：2012-11-15T14:45:18.977
> 
> 标签：r, bash, emacs, vi

有时在 R 控制台上，我不小心输入了一个未知的键盘快捷键，将编辑模式从 emacs 更改为 vi。

有谁知道这种从一个键更改为另一个键的组合通常是什么？

我在 Fedora 16 机器上

我检查了关于这个[问题](https://stackoverflow.com/questions/2640141/is-there-a-way-to-switch-bash-or-zsh-from-emacs-mode-to-vi-mode-with-a-keystroke)的信息，但使用 meta+v 或 meta+e 并没有改变任何东西。

更新：显示下面答案的击键**仅在 R**内有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:58:49.560

R 将 GNU readline 库用于键盘编辑模式。因此，我认为答案是`meta-ctrl-j`，基于这些链接：[http](http://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC22) ://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC22，http : [//www.algorithm-forge.com/techblog/ 2009/09/r-under-unix-from-the-readline-library/shortcuts-in-r-under-unix](http://www.algorithm-forge.com/techblog/2009/09/shortcuts-in-r-under-unix-from-the-readline-library/) -...

（我在 MacOS 10.6 上的 VMWare 下运行 Ubuntu 10.04，所以我实际上必须按下`Alt-fn-j`组合键来切换模式。我从来没有偶然做到过！）

**编辑**：正如 OP 所指出的，`Ctrl-e`从 emacs 回到 vi 模式。 [http://unixhelp.ed.ac.uk/CGI/man-cgi?readline+3](http://unixhelp.ed.ac.uk/CGI/man-cgi?readline+3)确实说

> ```
>  "C-E"  emacs-editing-mode 
> ```

但这很难挖掘！

# ruby - 为什么会出现分段错误 (qtruby)？

> ID：13399878
> 
> 赞同：3
> 
> 时间：2012-11-15T14:45:29.077
> 
> 标签：ruby, segmentation-fault, qtruby

在访问类变量（s 数组）时，我一直遇到分段错误问题`Qt::Action`，我一直在尝试将其缩减为复制该问题的最小代码示例：

```
#!/usr/bin/ruby

require 'Qt4'
require 'rufus/scheduler'

app = Qt::Application.new(ARGV)

class ManagerWidget < Qt::Widget
    signals 'changed(int)'

    def initialize
        super(nil)

        max_index = 2
        next_index = 0

        scheduler = Rufus::Scheduler.start_new
        scheduler.every '10s' do
            emit changed(next_index)
            if next_index < max_index - 1
                next_index += 1
            else
                next_index = 0
            end
        end
    end
end

class Tray < Qt::Widget
    def initialize
        super(nil)

        tray = Qt::SystemTrayIcon.new
        manager_widget = ManagerWidget.new
        menu = Qt::Menu.new

        tray_icon = Qt::Icon.new("./icons/Gnome-Preferences-Desktop-Wallpaper-64.png")

        actions = []
        manager_widget.connect(SIGNAL('changed(int)')) do |i|
            puts "changed #{i}"
            actions[i].text = '...' if actions && actions[i]
        end

        2.times do |i|
            sub_menu = Qt::Menu.new("#{i + 1}")
            actions[i] = sub_menu.add_action('x')
            menu.add_menu(sub_menu)
        end

        tray.icon = tray_icon
        tray.context_menu = menu

        tray.show
    end
end

Tray.new
app.exec 
```

上面的代码输出：

```
"sni-qt/12147" WARN  14:35:48.326 void StatusNotifierItemFactory::connectToSnw() Invalid interface to SNW_SERVICE 
changed 0
changed 1
changed 0
changed 1
changed 0
changed 1
changed 0
changed 1
./min-code-example.rb:42: [BUG] Segmentation fault
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
[... snipped due to character limits on posting ...]
[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Aborted (core dumped)
Failed (134) 
```

似乎有必要使用子菜单来触发这个问题 - 至少将操作添加到托盘菜单本身运行了很长一段时间没有问题（我离开它的时间是得到它的 10 倍以上上面代码的错误）。

红宝石版本：`ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]`

Qt版本：`4.8.1`

绑定版本：`qtbindings (4.8.3.0)`

Linux 版本：`Ubuntu 12.04`

另一个奇怪的行为是`puts`调用的输出有时会立即显示在控制台中，有时它只会在我将鼠标悬停在托盘图标上时打印。

我什至不知道从哪里开始跟踪这个问题，所以非常感谢您提供的任何输入。

更新：我已经离开了一段时间，因为我无法再进一步了。我试图重新开始，但我仍然遇到同样的问题。我对这个问题进行了更深入的研究，因为它说'missing_method'，所以我首先打印了这个类，以确保我确实在查看 Qt::Action（我是），然后根据哪些方法可用`actions[0].methods`.

`.methods`输出：

```
[:setShortcut, :shortcut=, :qobject_cast, :inspect, :pretty_print, :className,
:class_name, :inherits, :findChildren, :find_children, :findChild, :find_child,
:connect, :method_missing, :const_missing, :dispose, :isDisposed, :disposed?,
:qVariantValue, :qVariantFromValue, :**, :+, :~, :-@, :-, :*, :/, :%, :>>,
:<<, :&, :^, :|, :<, :<=, :>, :>=, :==, :is_a?, :kind_of?, :methods,
:protected_methods, :public_methods, :singleton_methods, :qDebug, :qFatal,
:qWarning, :SIGNAL, :SLOT, :emit, :QT_TR_NOOP, :QT_TRANSLATE_NOOP, :nil?, :===,
:=~, :!~, :eql?, :hash, :<=>, :class, :singleton_class, :clone, :dup,
:initialize_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust,
:untrusted?, :trust, :freeze, :frozen?, :to_s, :private_methods,
:instance_variables, :instance_variable_get, :instance_variable_set,
:instance_variable_defined?, :instance_of?, :tap, :send, :public_send,
:respond_to?, :respond_to_missing?, :extend, :display, :method, :public_method,
:define_singleton_method, :object_id, :to_enum, :enum_for, :equal?, :!, :!=,
:instance_eval, :instance_exec, :__send__, :__id__, "blockSignals", "children",
"connect", "deleteLater", "disconnect", "dumpObjectInfo", "dumpObjectTree",
"dynamicPropertyNames", "event", "eventFilter", "inherits", "installEventFilter",
"widgetType?", "killTimer", "metaObject", "moveToThread", "objectName", "parent",
"property", "qt_metacall", "qt_metacast", "removeEventFilter", "objectName=",
"parent=", "setProperty", "setUserData", "signalsBlocked", "startTimer",
"thread", "userData", "actionGroup", "activate", "associatedGraphicsWidgets",
"associatedWidgets", "autoRepeat", "data", "font", "hover", "icon", "iconText",
"checkable?", "checked?", "enabled?", "iconVisibleInMenu?", "separator?",
"visible?", "menu", "menuRole", "parentWidget", "priority", "actionGroup=",
"autoRepeat=", "checkable=", "checked=", "data=", "disabled=", "enabled=",
"font=", "icon=", "iconText=", "iconVisibleInMenu=", "menu=", "menuRole=",
"priority=", "separator=", "shortcut=", "shortcutContext=", "shortcuts=",
"softKeyRole=", "statusTip=", "text=", "toolTip=", "visible=", "whatsThis=",
"shortcut", "shortcutContext", "shortcuts", "showStatusText", "softKeyRole",
"statusTip", "text", "toggle", "toolTip", "trigger", "whatsThis"] 
```

在这种情况下，我试图在`actions[0].enabled = true`发生分段错误时执行此操作，据我所知，这是在输出中（从底部算起的第 6 行，`enabled=`）。我也试过了`setEnabled(true)`，`set_enabled(true)`几乎所有我能想到的。

即使调用`inspect`动作对象也会导致分段错误，尽管在最初将动作放入数组的循环中执行此操作很好。我真的不明白这是哪里出了问题。

编辑：为了回应使用的建议，`QTimer`我已经尝试过这个，但我仍然遇到同样的问题。该代码目前比上面列出的要复杂一些，所以我将在这里编写一些快速的伪代码来说明流程：

```
def init_tray
    actions = []
    2.times do |i|
        actions[i] = ... # init and add to systray, store reference in array
    end
    update = Proc.new do |i|
        actions[i].setText('...') # update the text on one of the actions defined above
    end
    listener = ... # create a listener that can be called by Manager on certain events - will call the update Proc among other things.
    manager = Manager.new(..., listener)
end 
```

对 Manager.new 的调用初始化该对象，最后调用具有状态更改的侦听器，这反过来又调用访问数组的`update`Proc 。`actions`在这个阶段这应该都在同一个线程中，除了实际创建`Qt::Action`. 我已经删除了 Rufus 调度并将其替换为`QTimer`，但它还远远不足以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:21:37.053

我没有看到您尝试过的一件事是使用较新的 ruby​​ 版本。p0 似乎可能充满问题。

Ruby 1.9.3-p392 是 1.9.3 的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:39:19.403

我在这方面花了太长时间，但无法弄清楚为什么会发生这种情况（感谢那些试图提供帮助的人，但不幸的是它没有解决问题）。因此，我将我的解决方法放在这里作为答案，以防其他人遇到类似问题：

I've done away with the array, instead wrapping the code that was to use it in a `Proc` that I create inside the loop that was previously populating the array. Since a `Proc` created within this loop has direct access to the variable in question, there is no longer any need to store it in an array and retrieve it later. It brought up one or two issues of it's own since the code in the `Proc` is now executed once per action per `SIGNAL` rather than having one code block going through all relevant actions, but they were significantly easier to handle.

# linux - Bash：检测所有磁盘并显示可用空间

> ID：13399882
> 
> 赞同：0
> 
> 时间：2012-11-15T14:45:40.387
> 
> 标签：linux, macos, bash, shell, freebsd

我正在运行以下命令来获取 HHD 上的可用空间。在这种情况下，我知道设备 (/dev/disk0s2)。

我想知道如何首先检测所有 HDD，然后运行下面的 df 命令以显示所有 HDD 的可用磁盘空间。

```
$ df -h
Filesystem      Size   Used  Avail Capacity  Mounted on
/dev/disk0s2   112Gi   58Gi   54Gi    52%    /
/dev/disk0s3   800Gi   400Gi  400Gi   50%    /

 df -h | awk '$1=="/dev/disk0s2"{print $4}' 
```

结果：54Gi

结果我需要：disk0s2：54Gi，disk0s3：400Gi，等等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:51:11.030

像这样的东西？

```
df -h | tail -n+2 | while read fs size used rest ; do
    if [[ $used ]] ; then
        echo $fs $used
    fi
done 
```

# php - Fuelphp ORM相关限制被忽略

> ID：13399884
> 
> 赞同：0
> 
> 时间：2012-11-15T14:45:47.090
> 
> 标签：php, fuelphp

我遇到了一个我从未遇到过的fuelphp问题。

在用户个人资料页面上，我允许其他用户发表评论。当我`related comments limit`在我的控制器功能中使用它时，它只是被忽略了。

代码

```
public function action_view($id)
    {

        $user = Model_User::find($id, array(
                'related' => array(
                    'comments' => array(
                        'order_by' => array(
                            array('id', 'DESC'),
                        ),
                    ),
                ),
                 'limit' => 5,
            ));

        if(empty($user)):
            Response::redirect(Uri::base() . "welcome/404");
        endif;

        $this->template->title = $user->username . "'s Profile | " . Config::get('site_name');
        $this->template->content = View::forge('user/profile', array('user' => $user));
    } 
```

作品就像一个魅力，`order_by`但限制没有，它仍然列出了所有的评论。尝试了多种变体得到了很多不同的奇怪错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:58:25.570

**编辑：**我找到了文档的这一部分，它应该可以帮助你：[疑难解答](http://fuelphp.com/docs/packages/orm/intro.html#/troubleshooting)

尝试将“限制”放在属性数组中：在当前位置，“限制”限制用户数量，但您正在检索单个用户，因此它不起作用。

试试这个：

```
$user = Model_User::find($id, array(
    'related' => array(
        'comments' => array(
            'order_by' => array(
                array('id', 'DESC'),
            ),
            'limit' => 5,
        ),
    ),
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:38:15.847

这里的问题是此查询运行按值查找。这种类型的查找运行 get_one()，并且总是限制为 1。

因此，您的限制不会被忽略，它会被您使用这种类型的 find() 的事实所覆盖。

做你想做的事：

```
$user = Model_User::query()
    ->where('id', '=', $id)
    ->related('comments')
    ->order_by('comments.id', 'DESC')
    ->rows_limit(5)
    ->get(); 
```

# https - “此页面包含安全和非安全项目”的 IE6&7 原因

> ID：13399886
> 
> 赞同：8
> 
> 时间：2012-11-15T14:45:55.933
> 
> 标签：https, internet-explorer-7, internet-explorer-6, fiddler

我有一个 HTTPS 站点，在 IE6 和 7 中显示（错误）一个对话框，内容如下：

> 此页面包含安全和非安全项目
> 
> 您想显示不安全的项目吗？

这在任何适当的浏览器中都不会发生，但是该站点是企业站点，并且许多客户仍在使用 Windows 2000 和 IE6。

我熟悉（并已消除）此消息的以下可能原因：

1.  与页面一起加载的一个或多个资源具有`http://`而不是`https://`- 这是显示错误的唯一合法原因，并且也会在工作浏览器中导致相同的消息。[Fiddler](http://www.fiddler2.com/fiddler2/)可以识别加载不安全的资源，因此很容易修复。

2.  [加载IE 行为](http://msdn.microsoft.com/en-gb/library/ie/ms531079%28v=vs.85%29.aspx) `.htc`文件以提供 DHTML 功能 - 即使从`https://`URL 传递，这些文件通常也被视为未加密，这使得它们即使在 IE6 是新版本时也毫无用处。首先使用这些不是一个好主意。

3.  [IE 将空帧视为非安全资源](https://stackoverflow.com/questions/541837)，因此`<iframe src=""`或`<iframe src="about:blank"`两者都会导致此错误。这很容易在代码中找到和修复。

4.  在使用 ActiveX XMLHTTP 组件时，IE5 用于将 AJAX 请求作为不安全的方式发送。我认为这在 IE6 及更高版本中不是问题。

5.  IE 6 或 7 不支持 Data-URI，并且不会显示，但如果有任何包含在 CSS 中也会导致不安全警告。我们有不同的不使用它们的 IE 的 CSS。

6.  [脚本标签源中的 Javascript 协议链接报告为不安全](http://blogs.msdn.com/b/ieinternals/archive/2009/06/22/https-mixed-content-in-ie8.aspx)：`<script type="text/javascript" src="javascript:void(0)">`通过清除`src`属性轻松避免（感谢 Eric！）

7.  不加载外部库，随页面或动态加载，不使用 CDN。我们确实使用了一些第三方插件，但它们是安全交付的，不会动态加载任何进一步的内容。

这里有很多关于这个 IE 错误的信息，但到目前为止我发现的所有问题都指向我已经消除的上述问题之一。

IE6 和 7 中是否还有其他可能导致此错误的错误？

有什么方法可以识别 IE 认为哪个资源是不安全的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T15:59:39.143

我找到了问题的根源，但需要一些挖掘。

首先， [Eric Law](https://stackoverflow.com/users/126229/ericlaw)在[另一个答案](https://stackoverflow.com/questions/96382/how-to-tell-what-files-ie-thinks-are-nonsecure/1022020#1022020)中提出了一个[原型工具（exe）](http://www.bayden.com/dl/scriptfreesetup.exe)来帮助识别问题。

非安全资源是：

```
data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs= 
```

问题是 IE6 不支持数据 URI，所以我们不使用它们。那么这是从哪里来的呢？

事实证明，jQuery UI 1.8 是问题所在，特别是对 CSS中[另一个错误的修复：](http://bugs.jqueryui.com/ticket/7233)

```
.ui-resizable-handle { position: absolute;font-size: 0.1px;z-index: 99999; display: block;
    /* http://bugs.jqueryui.com/ticket/7233
     - Resizable: resizable handles fail to work in IE if transparent and content overlaps
    */
    background-image:url(data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=);
} 
```

看起来[其他人也发现了这个问题](http://bugs.jqueryui.com/ticket/7233#comment:15)，并且[已](http://bugs.jqueryui.com/ticket/7390)在最新的 jQuery UI CSS（1.9 或更高版本）中修复。

我的解决方法是将其替换为空白 gif 的常规 URL，问题解决了。

# c++ - 如何让程序在启动时运行？

> ID：13399891
> 
> 赞同：1
> 
> 时间：2012-11-15T14:46:05.030
> 
> 标签：c++, ubuntu, startup

我希望我的 c++ 程序在操作系统加载时自动运行，我的意思是当系统开始工作时.. 我正在使用 linux(ubutu) 我不知道该怎么做？任何想法都可以帮助..提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:49:04.873

（*您的程序是用 C++ 编写的这一事实与此答案无关。*）

只需将符号链接添加到您的可执行文件中`/etc/init.d/`。

例如，如果您的程序在 中`/home/username/soft/myprog`，请运行：

```
ln -s /home/username/soft/myprog /etc/init.d/ 
```

确保文件是可执行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:48:56.690

**另一种可能有用的方法**

打开您的`.bashrc`文件（可以在主目录中找到，即`~/.bashrc`）
添加以下行：

`./program_executable_path`

另请注意，程序必须具有*执行*权限。您可以使用以下方式授予权限`chmod`：
`$chmod u+x program_executable_path`

# jquery - jquery on toggle content area 移动到显示区域下方

> ID：13399902
> 
> 赞同：0
> 
> 时间：2012-11-15T14:46:38.133
> 
> 标签：jquery, mobile, toggle

我正在尝试复制您单击菜单按钮并出现左侧菜单的 facebook 移动网站。我遇到的问题是我希望我的内容区域的宽度为 100%，但是当隐藏菜单显示 100% 的内容区域低于菜单时。

这是 js fiddle：[jsfiddle](http://jsfiddle.net/huddds/EssVx/) 代码如下所示。

提前感谢您的任何回复

HTML

```
 <div id="menu">
 </div>
 <div id="content">
     <div id="header">
         <div id="menuButton">
         </div>
     </div>
 </div>​ 
```

CSS

```
 body{padding:0px; margin:0px; width:100%; min-width:320px; height:100%; min-height:480px; background-color:#FFFFFF;}
 #menu{ width:240px; min-width:240px; height:100%; min-height:480px; float:left; background-color:#CCCCCC; display:none; position:relative;}
 #header{ height:48px; width:100%; min-height:48px; min-width:320px; background-color:#666666;  float:left;}
 #menuButton{ width:30px; height:30px; background-color:#999999;margin-top:9px; margin-left:15px;}
 #content{ float:left;  min-width:320px;  min-height:480px; width:100%;} 
```

jQuery

```
 $("#menuButton").click(function () {
     $('#menu').toggle(),750;
 }); ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:16:29.350

这可以防止水平滚动条弹出，同时填充顶部以便内容实际显示。

[**小提琴**](http://jsfiddle.net/videsignz/EssVx/8/)

```
 $("body").on('click', '#menuButton', function () {

        if($('#container').position().left === 0){
            $('#container').css({'left' : 240 , 'width' : $('#container').width() - 240 } );
        }else{
            $('#container').css({'left' : 0, 'width' : '100%'});
        }

        $('#menu').toggle();
    }); 
```

# spring - 将 Spring 部署到 WebLogic 但不是 Tomcat 时出现 BeanDefinitionStoreException 错误

> ID：13399903
> 
> 赞同：1
> 
> 时间：2012-11-15T14:46:38.967
> 
> 标签：spring, maven-3, weblogic11g

我一直在使用 tomcat 6 在本地主机上开发一个简单的 Web 应用程序，并且在部署到 tomcat 时没有问题，但是当我尝试将其部署到 WebLogic Server 时出现以下错误

```
[HTTP:101216]Servlet: "mdc-dispatcher" failed to preload on startup in Web application: "admin_UI.war".
 org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource
    [/WEB-INF/mdc-dispatcher-servlet.xml]; nested exception is java.lang.NoSuchMethodError:
        org/springframework/beans/MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues; at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149) at
        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124) at
        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93) at
        org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123) at
        org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:423) at
        org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:355) at
        org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402) at
        org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316) at
        org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282) at
        org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:128) at javax.servlet.GenericServlet.init(GenericServlet.java:242) at
        weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283) at
        weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) at
        weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64) at
        weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58) at
        weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48) at
        weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539) at
        weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985) at
        weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959) at
        weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878) at
        weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3154) at
        weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508) at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:485)
        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:427) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) at
        weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:201) at
        weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:249) at
        weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:427) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) at
        weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:28) at
        weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:637) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205) at
        weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:43) at
        weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161) at
        weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79) at
        weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569) at
        weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150) at
        weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116) at
        weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:140) at
        weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323) at
        weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844) at
        weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253) at
        weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440) at
        weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:164) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:69) at
        weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) at
        weblogic.work.ExecuteThread.run(ExecuteThread.java:176) Caused by: java.lang.NoSuchMethodError:
        org/springframework/beans/MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues; at
        org.springframework.web.servlet.config.AnnotationDrivenBeanDefinitionParser.parse(AnnotationDrivenBeanDefinitionParser.java:101) at
        org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69) at
        org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1297) at
        org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1287) at
        org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135) at
        org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342) at
        org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178) at
        org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149) at
        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124) at
        org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92) at
        org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123) at
        org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422) at
        org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352) at
        org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402) at
        org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316) at
        org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282) at
        org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126) at javax.servlet.GenericServlet.init(GenericServlet.java:241) at
        weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283) at
        weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) at
        weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120) at
        weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64) at
        weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58) at
        weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48) at
        weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539) at
        weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1985) at
        weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1959) at
        weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1878) at
        weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153) at
        weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508) at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) at
        weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200) at
        weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247) at
        weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119) at
        weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27) at
        weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636) at
        weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) at
        weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205) at
        weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:43) at
        weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161) at
        weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79) at
        weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:569) at
        weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:150) at
        weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:116) at
        weblogic.deploy.internal.targetserver.operations.StartOperation.doCommit(StartOperation.java:140) at
        weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:323) at
        weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844) at
        weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253) at
        weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440) at
        weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13) at
        weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68) at
        weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) at
        weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) ... 1 more 
```

我在 Stackoverflow（见[此处](https://stackoverflow.com/questions/7461915/java-lang-nosuchmethoderror-org-springframework-beans-mutablepropertyvalues-add)）或 Google 上找到的任何内容似乎都指向 spring 版本低于 3.0 的问题，但我使用的是 3.0.4

这是我的 pom 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.fid.mdc</groupId>
    <artifactId>admin_UI</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>admin_UI Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <properties>
        <springVersion>3.0.4.RELEASE</springVersion>
    </properties>
    <dependencies>

        <!-- JUnit -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- ORACLE JDBC driver, need install yourself -->
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>

        <!-- Spring framework -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springVersion}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springVersion}</version>
        </dependency>

        <!-- for compile only, your container should have this -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Commons-logging & log4j -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.12</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>admin_UI</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <webappDirectory>/sample/servlet/container/deploy/directory</webappDirectory>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是导出战争中lib的内容：

![在此处输入图像描述](../Images/9d2e9f07673389ec5ef0372325f5012a.png)

在今天之前我从未使用过 WebLogic，所以如果我忽略了任何基本的东西，请原谅我。

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:18:12.507

因此，解决方案是包含一个 weblogic.xml 文件，其中 prefer-web-inf-classes 设置为 true，请参见下文：

```
<!--?xml version="1.0" encoding="UTF-8"?-->
<weblogic-web-app xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app">
    <context-root>admin_UI</context-root>
    <container-descriptor>
      <prefer-web-inf-classes>true</prefer-web-inf-classes>
  </container-descriptor>
</weblogic-web-app> 
```

这允许它进行部署，但目前它并没有映射所有资源，包括我的 css 和图像，但我相信这只是包含适当标签的问题，当我对它进行排序时，我会更新我的答案，以便其他可能会从中受益

## 更新

我能够`pageContext.servletContext.contextPath`在我的 jsp 页面中访问我的 css 和图像，例如`<link type="text/css" rel="stylesheet" href="${pageContext.servletContext.contextPath}/resources/css/style.css"/>`

# javascript - 使用 Javascript 更改日期格式

> ID：13399909
> 
> 赞同：0
> 
> 时间：2012-11-15T14:46:56.120
> 
> 标签：javascript, date

如何使用 JavaScript 将文本框值从 '08/11/2012' 更改为 '08-NOV-2012' 页面加载后它应该显示 '08-NOV-2012'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:52:26.677

我也喜欢[momentjs](http://momentjs.com/)，因为它使许多日期操作变得简单易读。[这](http://jsfiddle.net/m5AZv/4/)是你的答案。

```
var d = moment('08/11/2012', "DD/MM/YYYY").format('DD-MMM-YYYY').toUpperCase();​​​ 
```

只需将其包含在您的页面中： `<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/1.7.2/moment.min.js"></script>`在您的代码加载之前。

我可能还建议使用`<input type="date" />`带有[date-input polyfill](http://html5please.com/#date)的 HTML5 窥视（漂亮的日期选择器） 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:54:21.723

你可以自己做

```
var mydate = new Date(form.startDate.value);
var month = ["January", "February", "March", "April", "May", "June",
"July", "August", "September", "October", "November", "December"][mydate.getMonth()];
var str = mydate.getdate() + '-' + month + '-' + mydate.getFullYear(); 
```

请参阅[如何在 JavaScript 中更改日期格式](https://stackoverflow.com/questions/8040771/how-to-change-date-format-in-javascript)您可能必须在页面加载时将 textbox.text 值更改为 str 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:49:02.737

我可以推荐这个出色的 Javascript 日期库：

[http://momentjs.com/](http://momentjs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T00:42:17.887

这是我用于日期格式的代码

```
/*jslint sub: true, todo: true, browser: true, devel: true, indent: 4, maxerr: 50, maxlen: 120 */
/*global */
/*
About: Author
George Weilenmann <email at abyssoft@gmail.com>

About: Purpose
Adds a formatting function to the prototypal level of the Native Date object. And while it is certain that the code 
could be written more concisely it ends up loosing a lot of its readability. When minified is ~1 KB in size.

About: Prerequisite

Script Requires:
Native browser support for the Date Object and access tot he prototype of the Date object

JSLint Flags:
    2012-08-11 edition

    sub - true
    todo - true
    browser - true
    devel - true

Version history:
1.2.0 - further code cleanup and renaming of variables to improve readability, changed formatString elements to be 
to terminate in ;
1.1.0 - code clean up and documentation added
1.0.0 - Created prior to best practices

Licensing: +Use, +Examination, +Reverse Engineering, -Simple Distribution, +Distribution with full credit and link
*/
/*
Method: format (formatString {String})
Formats a {Date} to desired form. 

Parameter: formatString {String}
Contains the desired format of the {Date}. In formatting process only recognized formatting elements are replaced 
any other characters are taken at face value and returned unaltered.

Recognized Formats:
YYYY - 4 digit year
YY - 2 digit year
MMMM - Month Name
MMM - Month Abbreviation
MM - 2 digit month
M - auto digit month
DDDD - Day Name
DDD - Day Abbreviation
DD - 2 digit day
D - auto digit day
th - Ordinal suffix
hhh - 24 hour number [0-23]
hh - 2 digit hour from 12 hour clock
h - auto digit hour
mm - 2 digit minute
m - auto digit minute
ss - 2 digit second
s - auto digit second
sss - milliseconds
ampm - am/pm
AMPM - AM/PM

Returns: {String}
The processed date in string form.  If formatString is undefined or null a blank string is returned.
*/
Date.prototype.format = function (formatString) {
    "use strict";
    var
        MonthNames = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December"
        ],
        DayNames = [
            "Sunday",
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday"
        ],
        milliseconds = this.getMilliseconds(),
        seconds = this.getSeconds(),
        twoDigitSeconds = (seconds < 10 ? ('0' + seconds) : String(seconds)),
        minutes = this.getMinutes(),
        twoDigitMinutes = (minutes < 10 ? ('0' + minutes) : String(minutes)),
        twentyfourHours = this.getHours(),
        hours = (
            (
                twentyfourHours === 0 ?
                        24 :
                        twentyfourHours
            ) > 12 ? (twentyfourHours === 0 ? 24 : twentyfourHours) - 12 : twentyfourHours
        ),
        twoDigitHours = (hours < 10 ? ('0' + hours) : String(hours)),
        meridiem = (twentyfourHours < 12 ? 'am' : 'pm'),
        fullYear = this.getFullYear(),
        shortYear = String((fullYear)).substr(2, 2),
        monthNumber = this.getMonth() + 1,
        twoDigitMonth = (monthNumber < 10 ? ('0' + monthNumber) : monthNumber),
        MonthName = MonthNames[monthNumber - 1],
        MonthAbbreviation = MonthName.substr(0, 3),
        dayNumber = String(this.getDate()),
        twoDigitDay = (dayNumber < 10 ? ('0' + dayNumber) : String(dayNumber)),
        dayName = DayNames[this.getDay()],
        dayAbbreviation = dayName.substr(0, 3),
        ordinal = (
            /[023]1/.test(twoDigitDay) ?
                    "st" :
                    (
                        /[02]2/.test(twoDigitDay) ?
                                "nd" :
                                (
                                    /[02]3/.test(twoDigitDay) ?
                                            "rd" :
                                            "th"
                                )
                    )
        ),
        stringToFormat = String(formatString||"");

    return (
        stringToFormat
            .replace("YYYY;", fullYear)
            .replace("YY;", shortYear)
            .replace("MMMM;", MonthName)
            .replace("MMM;", MonthAbbreviation)
            .replace("MM;", twoDigitMonth)
            .replace("M;", monthNumber)
            .replace("DDDD;", dayName)
            .replace("DDD;", dayAbbreviation)
            .replace("DD;", twoDigitDay)
            .replace("D;", dayNumber)
            .replace("th;", ordinal)
            .replace("hhh;", twentyfourHours)
            .replace("hh;", twoDigitHours)
            .replace("h;", hours)
            .replace("mm;", twoDigitMinutes)
            .replace("m;", minutes)
            .replace("sss;", milliseconds)
            .replace("ss;", twoDigitSeconds)
            .replace("s;", seconds)
            .replace("ampm;", meridiem)
            .replace("AMPM;", meridiem.toUpperCase())
    );
}; 
```

# ruby-on-rails-3 - 覆盖设计控制器

> ID：13399911
> 
> 赞同：1
> 
> 时间：2012-11-15T14:47:10.417
> 
> 标签：ruby-on-rails-3

我正在尝试覆盖两个控制器以进行设计，但是结果，只有 routes.rb 中第一个列出的控制器被覆盖

```
 devise_for :users, :controllers => { :sessions => "users/sessions" }
  devise_for :users, :controllers => { :registrations => "users/registrations" } 
```

我得到的是：

```
new_user_session GET    /users/sign_in(.:format)                             users/sessions#new
                             user_session POST   /users/sign_in(.:format)                             users/sessions#create
                     destroy_user_session DELETE /users/sign_out(.:format)                            users/sessions#destroy
                            user_password POST   /users/password(.:format)                            devise/passwords#create
                        new_user_password GET    /users/password/new(.:format)                        devise/passwords#new
                       edit_user_password GET    /users/password/edit(.:format)                       devise/passwords#edit
                                          PUT    /users/password(.:format)                            devise/passwords#update
                 cancel_user_registration GET    /users/cancel(.:format)                              devise/registrations#cancel
                        user_registration POST   /users(.:format)                                     devise/registrations#create
                    new_user_registration GET    /users/sign_up(.:format)                             devise/registrations#new
                   edit_user_registration GET    /users/edit(.:format)                                devise/registrations#edit
                                          PUT    /users(.:format)                                     devise/registrations#update
                                          DELETE /users(.:format)                                     devise/registrations#destroy 
```

如果我首先列出注册控制器，它会工作，但会话控制器不会，，

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:07:47.277

您定义路线的方式将不起作用。因为 rails 将用于第一个匹配的路由。你可以重写如下：

```
devise_for :users, :controllers => { :sessions => "users/sessions", :registrations => "users/registrations" } 
```

然后它应该工作。

# symfony - Symfony2 查询参数的字符集

> ID：13399912
> 
> 赞同：7
> 
> 时间：2012-11-15T14:47:10.597
> 
> 标签：symfony, configuration, character-encoding, query-builder

我在 Symfony2 中有一个项目，它在我的本地主机上运行良好，但在将其移至外部服务器后问题已经开始。

1.  我没有从包含波兰字符的数据库中看到任何结果名称
2.  在 Profiler 中，我检查了查询：
    *   “参数”部分具有正确的字符集
    *   “可运行查询”具有相同的参数，但字符集错误

例如：

`(...) WHERE ((((c1_.name LIKE '%Å�%') OR (c3_.name LIKE '%Å�%') OR (..)` `Parameters: ['%ś%', '%ś%', (...)]`

所有数据库表都有 charset = utf8_unicode_ci。

在 config.yml 我设置

```
doctrine: 
    dbal: 
      charset: UTF8 
```

设置框架字符集不起作用。

/config.php 测试 说：

```
RECOMMENDATIONS:
  1\. Install and enable a PHP accelerator like APC (highly recommended).
  2\. Set short_open_tag to off in php.ini*.
  3\. Set magic_quotes_gpc to off in php.ini*.
  * Changes to the php.ini file must be done in "/usr/local/php/php.ini". 
```

但不幸的是，我无法访问该服务器上的 php.ini。可能是 magic_quotes_gpc 导致了这个问题吗？我也无法访问命令行，所以我通过 ftp 和 phpmyadmin 添加了项目（数据库、文件系统、供应商）。

因为我的本地主机上没有问题，我想这是服务器配置的问题，我无权访问，我看到的唯一方法是尝试更改 QueryBuilder 的字符集配置。我在哪里可以这样做？你知道还有什么可能导致这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T10:36:57.513

找到解决方案：要设置“SET NAMES utf8”，我更改了我的学说配置

```
doctrine:
    dbal:
          driver:   %database_driver%
          host:     %database_host%
          port:     %database_port%
          dbname:   %database_name%
          user:     %database_user%
          password: %database_password%
          charset:  UTF8
          options:
             1002:  "SET NAMES 'UTF8'" 
```

它现在工作正常。

# ios - 如何交叉编译 GCC 与 armv7 目标？

> ID：13399916
> 
> 赞同：2
> 
> 时间：2012-11-15T14:47:24.810
> 
> 标签：ios, gcc, arm, fortran, cross-compiling

我尝试根据[本](http://solarianprogrammer.com/2012/07/21/compiling-gcc-4-7-1-mac-osx-lion/)教程交叉编译**GCC 4.7.1 。**唯一的区别是，我将其设置为目标架构**arm-elf**，因为我想编译一些**fortran**代码以在我们的**iOS**应用程序中使用它。但是编译是行不通的。有人有什么建议吗？

 ******```
../configure --prefix=/usr/gcc-4.7.1 --enable-checking=release --with-gmp=/usr/gcc-4.7.1 --with-mpfr=/usr/gcc-4.7.1 --with-mpc=/usr/gcc-4.7.1 --with-ppl=/usr/gcc-4.7.1 --with-cloog=/usr/gcc-4.7.1 --enable-languages=c,c++,fortran --program-suffix=-4.7 **--target=arm-elf** 
```

在**make**我得到这些是终端中的最后几行之后：

```
checking for arm-elf-gcc... /Users/xyz/Downloads/gcc-4.7.2/build/./gcc/xgcc -B/Users/xyz/Downloads/gcc-4.7.2/build/./gcc/ -B/usr/gcc-4.7.1/arm-elf/bin/ -B/usr/gcc-4.7.1/arm-elf/lib/ -isystem /usr/gcc-4.7.1/arm-elf/include -isystem /usr/gcc-4.7.1/arm-elf/sys-include   
checking for suffix of object files... configure: error: in `/Users/xyz/Downloads/gcc-4.7.2/build/arm-elf/libgcc':
configure: error: cannot compute suffix of object files: cannot compile 
```******

# jquery - jquery - 在 ul 中的 ul 中选择 li

> ID：13399918
> 
> 赞同：1
> 
> 时间：2012-11-15T14:47:30.893
> 
> 标签：jquery, jquery-selectors, html-lists

我有这个：

```
 <ul>
        <li>
            <ul>
                <li><a>Hello world</a></li>
                <li><a>hi</a></li>
            </ul>
       </li>
       <li><a>hi</a></li>
   </ul> 
```

我需要选择第二个 ul 中的 li （例如，有“Hello world”字样的那个。）

我如何用 jQuery 做到这一点？

我试过这个：

```
$('ul li:eq(1) li:eq(1)').doSomthing(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:48:25.140

这很简单：

```
ul ul li 
```

但是，这不会检查立即嵌套；选择器中的第二个`ul`很可能嵌套得更深。您可以通过使用来限制它`>`：

```
ul > li > ul > li 
```

只抓取第一个`li`，它可能看起来像这样：

```
​$("ul > li > ul > li:first").css("background", "red");​​​​​​​​​​ 
```

您尝试使用`:eq`伪选择器的方法看起来更像这样：

```
​$("li:eq(0) li:eq(0)").css("background", "red");​​​​​​​​​​ 
```

请记住，索引是从零开始的，因此第一项始终是索引 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:49:57.133

最省事的是使用直接子选择器[`>`](http://api.jquery.com/child-selector/)

```
$("ul > li > ul") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T18:06:00.220

```
try this it will work as you wish 
```

> $('ul li>ul li:eq(0)').css('border','1px solid red');

# javascript - 完全禁用输入字段

> ID：13399919
> 
> 赞同：1
> 
> 时间：2012-11-15T14:47:31.763
> 
> 标签：javascript, jquery, html, forms, jquery-ui

我在显示欠款的表格上有输入。基本上，如果欠款为零，我会添加一个名为“paid”的特殊类，并且可以使用 jquery进行**$(".paid") 。**所有这一切都运作良好。

问题是，我如何防止用户点击或输入文本或使用这些输入做任何其他事情？

到目前为止，这是我的幻想。

```
function disablepaid(){
    $(".paid").on("click", function(){
        alert("Do disabling stuff now");
    });
} 
```

在其他一些帖子中，我看到人们尝试使用**jquery blur()**并设置 disabled 属性，如此处所示[如何将输入字段和提交按钮变灰](https://stackoverflow.com/questions/3746115/how-do-i-grey-out-the-input-field-and-the-submit-button)

请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:49:16.800

您可以`disabled`在输入上设置属性..

就像是：

```
 function disablepaid(){
        $(".paid").on("click", function(){
            alert("Do disabling stuff now");
            $(this).prop('disabled', true);
        });
    } 
```

如果您需要在任何时候重新启用它，那么：

```
 $(".paid").prop('disabled', false); 
```

**更新**

此外，与其让用户点击付费输入字段然后禁用它，为什么在设置零金额时不禁用它呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:49:04.460

只需使用`prop()`并将 disabled 属性设置为`true`

```
$(".paid").on("click", function(){
        $(this).prop('disabled', true);

        // or  
        this.disabled = true; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:49:00.343

您可以禁用输入

```
$(".paid").attr("disabled", "disabled"); 
```

# ajax - 使用 select 进行 Onchage ajax 调用

> ID：13399920
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:47:32.567
> 
> 标签：ajax, events, button, submit, onchange

我有这个代码，我已经让它与一个提交按钮一起工作，那么我将如何将它更改为 onchange 并丢弃提交按钮？你能指导我如何做到这一点吗？

```
echo "<form type=\"post\" action=\"\" id=\"newAjaxAudio" . $id . "\">
<select name=\"name\" id=\"aaplaylist_selection\" style=\"border: 1px solid #999999;color: #555555;font-size: 11px;height: 17px;min-width: 216px\">
    <option value='" . $thefile1 . "' >" . $thetitle1 . "</option>
    <option value='" . $thefile2 . "' >" . $thetitle2 . "</option>
</select>
<input type=\"hidden\" name=\"action\" value=\"addAudioSelector1\"/>
<input type=\"submit\" value=\"Play\" style=\"font-size:11px\">
</form>
<div id=\"feedback" . $id . "\"></div>

<script type=\"text/javascript\">
jQuery('#newAjaxAudio" . $id . "').submit(ajaxSubmit);

function ajaxSubmit(){

    var newAjaxAudio" . $id . " = jQuery(this).serialize();

    jQuery.ajax({
        type:\"POST\",
        url: \"/wp-admin/admin-ajax.php\",
        data: newAjaxAudio" . $id . ",
        success:function(data){
            jQuery(\"#feedback" . $id . "\").html(data);
        }
    });

    return false;
}
</script>"; 
```

功能 ：

```
function addAudioSelector1(){
    $name = $_POST['name'];
    echo "<div id='sm2-container'></div>
    <ul class='playlist'>
        <li><a href='" . WPAUDIO_URL . "/sounds/" . $name . ".mp3'>" . $name . "</a></li>
    </ul>";
    die();
} // end Function addnewAudio
add_action('wp_ajax_addAudioSelector1', addAudioSelector1);
add_action('wp_ajax_nopriv_addAudioSelector1', addAudioSelector1); // not really needed
//***************************************************************************// 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:51:23.377

可以触发也可以`jQuery('#newAjaxAudio" . $id . "').submit(ajaxSubmit);`直接`$("#aaplaylist_selection").change();`触发`ajaxSubmit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:26:32.173

好的，我解决了！.change() 还不够。这是我所做的：

```
jQuery('#aaplaylist_selection" . $id . "').change(function() {
    jQuery(this).parents('form').submit();
}); 
```

# c# - 尝试通过 C# 使用 Kinect for Windows，但我得到 System.BadImageFormatException

> ID：13399924
> 
> 赞同：0
> 
> 时间：2012-11-15T14:47:43.800
> 
> 标签：c#, kinect, dss, robotics-studio

我正在尝试创建一个非常简单的 Microsoft DSS 程序，在该程序中我订阅了由使用阵列麦克风实现语音识别的示例 Kinect DSS 生成的事件。但是，我在运行时收到下面的错误。

我已经引用了暴露接口的代理.dll，但是在运行时出现了问题。

我尝试将构建目标平台设置为 x86，但这似乎并没有解决问题。有没有办法可以验证我的项目是针对 x86 构建的？

> 无法使用自定义序列化注册类型。: System.BadImageFormatException:
> 无法加载文件或程序集“file:///c:\users\ajs\microsoft robots dev studio 4\bin\micarrayspeechrecognizer.y2011.m06.dll”或其依赖项之一。试图加载格式不正确的程序。文件名：System.Reflection.RuntimeAssembly._nLoad 中的“file:///c:\users\ajs\microsoft robots dev studio 4\bin\micarrayspeechrecognizer.y2011.m06.dll”（AssemblyName 文件名，字符串 codeBase，证据 assemblySecurity， System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark & stackMark, Serializer.DataCache.RegisterCustomSerializersFromServiceAssembly（作为 sembly pa，AssemblyLocations 位置）=== 预绑定状态信息 === LOG：User = condor\ajs LOG：Where-ref 绑定。位置 = c:\users\ajs\microsoft robots dev studio 4\bin\micarrayspeechrecognizer.y2011.m06.dll 日志：Appbase = file:///C:/Users/ajs/Microsoft Robotics Dev Studio 4/bin/ 日志：初始 PrivatePath = NULL 调用程序集：（未知）。=== LOG：此绑定在 LoadFrom 加载上下文中开始。警告：将不会在 LoadFrom 上下文中探测本机图像。本机映像只会在默认加载上下文中进行探测，例如使用 Assembly.Load()。LOG：使用应用程序配置文件：C:\Users\ajs\Microsoft Robotics Dev Studio 4\bin\DssHost.exe.Config LOG：使用主机配置文件：LOG：使用来自 C:\Windows\Microsoft 的机器配置文件。NET\Framework64\v4.0.30319\config\machine.config。日志：尝试下载新的 URL 文件：///c:/users/ajs/microsoft robots dev studio 4/bin/micarrayspeechrecognizer.y2011.m06.dll。ERR：无法完成程序集的设置（hr = 0x8007000b）。探测终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:13:05.643

事实证明，需要做的是使用 dsshost32 启动程序，而不是使用模板 Visual Studio .sln 为 DSS 节点运行的默认构建后 dssproxy。这将在 32 位 CLR 上运行 DSS 节点，并且 Kinect 库工作正常。

然后似乎需要一系列乏味的操作才能在使用 dsshost32 时从 Visual Studio 中获取代码更改：

1.  构建并运行 64 位项目，直到日志显示“DSS 主机缓存已更新”。这在我的机器上大约需要十秒钟。
2.  在命令行上手动使用 dsshost32 运行 DSS 节点。

# android - 在android中从左到右和从右到左滑动

> ID：13399927
> 
> 赞同：2
> 
> 时间：2012-11-15T14:47:57.270
> 
> 标签：android

我有 SwipeActivity。当我从右向左滑动时，我想进行活动 B，而当从左向右滑动时，我想进行活动 C。但是我的代码不起作用。请帮我。

我的 SwipeActivity 是：

公共类 SwipeActivity 扩展 Activity {

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final GestureDetector gestureDetector = new GestureDetector(new GestureListener());
    View mainview = (View) findViewById(R.id.mainView);

    // Set the touch listener for the main view to be our custom gesture listener
    mainview.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    });
}

 private final class GestureListener extends SimpleOnGestureListener {

        private static final int SWIPE_THRESHOLD = 100;
        private static final int SWIPE_VELOCITY_THRESHOLD = 100;

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            boolean result = false;
            try {
                float diffY = e2.getY() - e1.getY();
                float diffX = e2.getX() - e1.getX();
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                        if (diffX > 0) {

                            onSwipeRight();
                        } else {

                            onSwipeLeft();
                        }
                    }
                } 

            } catch (Exception exception) {
                exception.printStackTrace();
            }
            return result;
        }
    }

    public void onSwipeRight() {
        Intent in = new Intent(SwipeActivity.this,page1Activity.class);
        startActivity(in);
    }

    public void onSwipeLeft() {
        Intent in = new Intent(SwipeActivity.this,page2Activity.class);
        startActivity(in);
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:26:08.397

我认为您可以使用片段和包含活动内部片段的 ViewPager。

检查这是示例：[http ://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

我希望它对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:55:26.760

您应该使用 Android ViewPager 以获得更好的 UI 体验并使用 Fragment 而不是活动。您可以使用 ViewPager 而不是开发自定义滑动来节省更多时间。看看下面的例子。

[1\. ViewPager 标签指示器](http://manishkpr.webheavens.com/android-viewpager-example/)

[2\. ViewPager 圆形样式](http://manishkpr.webheavens.com/android-viewpager-circle-style-example/)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:12:11.363

尝试使用 onTouch 监听器。使用它的 onDown 和 on up 事件。取 onDown 和 onUp 中的坐标，然后比较它们。如果 xUp< xDown = leftswipe 和左滑动相反。（不要忘记通过添加边距来调整灵敏度：（如果距离（upX，downX）> 50））

这是一个示例代码：

```
yourView.setOnTouchListener(new OnTouchListener() {

                int xDown=0;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            // TODO Auto-generated method stub
            if(event.getAction()==MotionEvent.ACTION_DOWN){
                xDown= event.getRawX();

            }
            if(event.getAction()==MotionEvent.ACTION_MOVE){

            }
            if(event.getAction()==MotionEvent.ACTION_UP){
                                 if(Math.abs(xDown-evet.getRawX())>50)

                                      if(xDown-evet.getRawX()>0){
                                         //left
                                     }
                                     else{
                                         //right
                                     }

                                 }

                            } 
```

# c - 如何将int值保存在char中

> ID：13399935
> 
> 赞同：0
> 
> 时间：2012-11-15T14:48:17.240
> 
> 标签：c, ascii

我有低于 255 的整数，并希望将它们保存到 char 数组中。我正在尝试一些测试：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

int
main(void)
{
    char string[10];
    int integers[10]; //all under 255.

    int j;
    for(j=0; j<10; j++)
    {
            integers[j]=j;
    }

    int i;
    for(i=0; i<10; i++)
    {
            string[i]=(char)integers[i];
    }

    printf("%s \n", string);
    return 0;
} 
```

当我将调试器运行到程序末尾时，字符串包含以下 ascii 值：

"\000\001\002\003\004\005\006\a\b\t"

**首先**我不明白为什么在 006 之后出现一个 \a，最后出现一个 \t？

**其次**，我想知道是否有更好的方法来做我想做的事情？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T14:52:26.730

您看到的是[ASCII](https://duckduckgo.com/?q=ascii+table)字符 0x06、0x07、0x08 和 0x09 的转义表示。

0x06 是`ACK`.

0x07 是`BEL`或`\a`（警报），只是导致终端“叮”！

0x08 是`BS`或 退格 或`\b`.

0x09 是`TAB`或`\t`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:54:07.980

您使用 0-9 的 ASCII 字符是不可打印的字符。

printf 函数将它们格式化为 \nnn 以便可以看到它们。

ASCII 字符 9 是制表符，通常表示为`\t`
ASCII 字符 8 是退格字符，表示为`\b`
ASCII 字符 7 是响铃“或警报”字符，常见表示为`\a`

见[http://web.cs.mun.ca/~michael/c/ascii-table.html](http://web.cs.mun.ca/~michael/c/ascii-table.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:07:47.087

```
#include <stdio.h>

int main (void)
{
    char string[10];
    int i;

    for(i=0; i<10; i++)
    {
      string[i] = i;
    }
    string[9] = '\0';

    printf("%s \n", string);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:57:06.960

您不需要创建第一个整数数组。可以直接填充字符串数组。

```
char string[11];
int i;
for(i=0; i<10; i++)
{
    string[i] = i;
}
string[i] = '\0'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:58:55.957

使用**atoi**函数将 ascii 值转换为整数

# jsp - 如何在Jsp中将整数作为参数传递

> ID：13399937
> 
> 赞同：1
> 
> 时间：2012-11-15T14:48:24.703
> 
> 标签：jsp, servlets

我有这个代码。现在我想在下拉列表中传递所选项目的值，然后将其保存在我的数据库中。

```
<select name="Organization" class="txtbox">
                            <%
                                Iterator it = EMS_Items.iterator();
                                while (it.hasNext())
                                {
                                    EMSItems newsItem3 = (EMSItems) it.next();
                            %>
                            <option value="${newsItem3.getOrgId()}"><%=newsItem3.getOrgName()%></option>
                            <%
                                }
                            %>

                    </select> 
```

我所做的是

```
long statOrgId = Integer.parseInt(req.getParameter("Organization"));
    emsItem.setStatOrgId(statOrgId); 
```

但它给了我一个错误

> java.lang.NumberFormatException：对于输入字符串：“”

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:55:46.447

参数组织是一个空字符串“”

```
req.getParameter("Organization") 
```

因此，您需要做的是确保设置了“组织”参数。

然后在您的代码中添加条件检查：

```
if ( req.getParameter("Organization") != null && !"".equals(req.getParameter("Organization")) {
    long statOrgId = Integer.parseInt(req.getParameter("Organization"));
    emsItem.setStatOrgId(statOrgId);
} 
```

# tfs - Team Foundation Server - 管理 > WIT 编辑器 - 如何将团队字段添加到工作项？

> ID：13399941
> 
> 赞同：4
> 
> 时间：2012-11-15T14:48:30.903
> 
> 标签：tfs

使用用户故事类型的 WIT 编辑器，我试图添加一个控件，该控件引用一个系统字段，该字段显示在项目配置文件中配置的团队选择。

![WIT 编辑器截图](../Images/a891abcdd15970169dbdb7079c5a2115.png)

如果该系统字段不存在，我如何配置自定义字段以将配置的团队作为允许值。

![项目团队配置屏幕截图](../Images/13326372d03f1a38ecb5a36c3b588bb1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:58:45.053

@DaveShaw 它有点反过来。如果您在工作项中创建一个包含团队名称的下拉列表字段，并且它们与您创建的团队名称相匹配，那么您可以更改 CommonProcessingConfig.xml 文件以反映您希望将此字段用作团队代号。

1.  添加一个名为“MyCompany.Teams”的新字段，允许值为“Team A|Team B|Team C”
2.  在“Team A|Team B|Team C”的团队项目中创建团队
3.  使用“witadmin exportcommonprocessconfig”获取您的 CommonProcessingConfig.xml 文件
4.  在**类型**为“Team”的“CommonProjectConfiguration\TypeFields\TypeField”下，将**refname**更改为“MyCompany.Teams”
5.  使用“witadmin importcommonprocessconfig”导入新的 CommonProcessingConfig.xml 文件
6.  测试...很多...

我创建了一篇博文，引导您完成以下操作：[Team Foundation Server 2012 Teams without Area](http://blog.hinshelwood.com/team-foundation-server-2012-teams-without-areas/)

然后，您应该能够使用自定义字段来保存 Team for...your.. team... 的值

*警告：团队：指定用于将积压和任务板页面与团队相关联的字段。该字段应保持设置为其默认值 System.AreaPath。*

目前此功能还处于早期阶段，因此请确保您测试它是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T22:59:53.550

AFAIK，TFS2012 中的“团队”不是工作项的一部分，因此不能在其中使用。

我查看了有关团队的 MSDN 上的所有信息，并检查了我自己的 TF 服务帐户，并且我无法看到与他们关联的团队列表的字段。

# json - 为什么 Spring MVC 更喜欢提供 application/json 类型而不是其他任何东西？

> ID：13399943
> 
> 赞同：1
> 
> 时间：2012-11-15T14:48:33.743
> 
> 标签：json, web-services, spring-mvc

给定以下 Spring 代码：

```
@Controller
@RequestMapping("/somepath")
public class SomeService {
    @RequestMapping(headers = "Accept=application/json")
    public ReturnType methodOne() {
        // stuff
    }

    @RequestMapping(headers = "Accept=text/html")
    public ReturnType methodTwo() {
        // stuff
    }
} 
```

我注意到，当客户端根本不包含“Accept”标头时，总是优先调用“application/json”方法而不是 text/html 方法。我的问题是——为什么？它们之间没有什么可以选择的，那么为什么更喜欢其中一个呢？我本来希望收到一条错误消息...

一个具体的例子：

```
@RequestMapping("/somepath")
@Controller
public class SomeService {

    @ResponseBody
    @RequestMapping(headers = "Accept=application/json")
    public ResponseEntity<String> methodOne() {
        return new ResponseEntity<String>("Method One", HttpStatus.OK);
    }

    @ResponseBody
    @RequestMapping(headers = "Accept=text/html")
    public ResponseEntity<String> methodTwo() {
        return new ResponseEntity<String>("Method Two", HttpStatus.OK);
    }

    @ResponseBody
    @RequestMapping(headers = "Accept=application/xml")
    public ResponseEntity<String> methodThree() {
        return new ResponseEntity<String>("Method Three", HttpStatus.OK);
    }
} 
```

如果没有接受标头，则始终输出“方法一”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:30:39.243

Spring doesn't prefer anything. It can return whatever you specify (pdf, xml, etc)

However, JSON is commonly implented as views often interact with controllers using javascript and ajax. What data format is best to use with javascript : JSON.

# c# - HttpWebRequest 在第二次调用 Web 服务器时超时

> ID：13399947
> 
> 赞同：1
> 
> 时间：2012-11-15T14:48:48.523
> 
> 标签：c#, python, .net, httpwebrequest

我在这里遇到了一个非常奇怪的问题：

Web 服务器上有一个 RESTfull Web 服务`Python Paste`，WPF .net 应用程序每 2 秒向服务器发出一个 http POST 请求。问题是在第二次调用服务器时，请求超时！有时稍后（说第四次或第五次）请求会再次工作，然后我会再次遇到这个“超时”异常！

IntelliTrace 显示在 中存在阻塞操作`ws2_32.dll`：

> 对 WSACancelBlockingCall 的调用中断了阻塞操作

我使用 IIS 模拟了 REST Web 服务器，`asp.net`问题不再存在，所以我认为它可能是 Python 服务器配置！但是当我从浏览器中发出请求时，Python Web 服务器正常工作！

但是我在 .net 客户端应用程序中尝试了不同的方法：

*   我增加了 ServicePoint 的`DefaultConnectionLimit`：

    `ServicePointManager.DefaultConnectionLimit = 500;`

*   我为对服务器的任何新请求创建了一个新线程，并在请求完成时中止了它！

*   我`AppDomain`在任何请求之前创建了一个新的，并在处理完成后明确卸载它！

*   尝试了不同的http请求头：`connection=keep-alive, accept=*`

以上似乎都不起作用！`GetRequestStream()`然而有趣的是，当我在 VS 2012 中为该行设置断点时，请求**不会**超时并且可以正常工作！

使用反射调试 .net 托管代码我发现非托管`recv`方法`ws2_32.dll`导致操作阻塞，因此 Web 请求超时！

这是 C# 代码：

```
static void Main(string[] args)
{
    Task.Run(() =>
    {
        while (true)
        {
            Thread.Sleep(2000);
            Console.WriteLine(PostData());
        }
    });

    Console.ReadLine();
}

public static string PostData()
{
    try
    {
        var response = "";
        var httpRequest = WebRequest.CreateHttp("http://remote_address");
        httpRequest.ServicePoint.ConnectionLimit = 500;
        httpRequest.Method = "POST";
        httpRequest.ContentType = "application/x-www-form-urlencoded";
        httpRequest.Timeout = 5000;

        using (var writer = new StreamWriter(httpRequest.GetRequestStream()))
        {
            writer.Write("req=" + "[some parameters]");
        }

        using (WebResponse httpResponse = httpRequest.GetResponse())
        {
            using (var data = httpResponse.GetResponseStream())
            {
                StreamReader sr = new StreamReader(data, Encoding.UTF8);
                response = sr.ReadToEnd();
            }

            httpResponse.Close();
        }

        return response;
    }
    catch (WebException ex)
    {
        return "time out!";
    }
} 
```

我能做些**什么**来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:29:35.683

我设法解决了禁用`Expect100Continue`标头的问题：

```
ServicePointManager.Expect100Continue = false; 
```

根据`HTTP 1.1`协议，当发送此标头时，使用 POST 方法的客户端请求期望收到`100-Continue`来自服务器的响应，指示客户端应该发送要发布的数据。

将此属性设置为`true`（这是 .Net 的默认行为），数据不会随初始请求一起发送。相反，此标头会发送到 Web 服务器，`100-Continue`如果实施正确，该服务器会响应。但是，**并非所有 Web 服务器都能正确处理此问题**，包括我尝试向其发布数据的服务器。我使用嗅探标头`Fiddler`并注意到我的代码确实发送了此标头，而`Python Paste`没有！

# utf-8 - hCard 是否理解编码？

> ID：13399949
> 
> 赞同：1
> 
> 时间：2012-11-15T14:48:49.763
> 
> 标签：utf-8, hcard

我正在使用 Firefox 的 Operator 扩展。

当我访问[http://microformats.org/wiki/hcard](http://microformats.org/wiki/hcard)（编码为 utf-8）并尝试将 Tantek Çelik（在顶部）的 hCard 导出到 Outlook 时，它以 Tantek Ã‡elik 的形式出现。

有谁知道这是 Outlook、Operator 扩展的问题，还是 hCard 微格式不支持编码？

我试过使用 &...; 等效，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:49:09.340

hCard 是一种将 vCard 转码为 HTML 的方法。vCard 本身不为其内容指定字符编码，但`Content-Type`用于传递 vCard 数据的 MIME 标头（例如通过 HTTP）可以指定编码。vCard 数据必须解码为 Unicode，然后以 HTML 使用的任何编码转换为 HTML。我不熟悉 Operator，但我怀疑它在导入 Outlook 之前没有正确解码/编码 hCard，或者 MicroFormats 网站一开始就没有正确格式化 hCard。

# c# - 是否有一种允许静态和动态类型的语言？

> ID：13399960
> 
> 赞同：9
> 
> 时间：2012-11-15T14:49:22.923
> 
> 标签：c#, types, programming-languages, ocaml, dynamic-languages

SO上有很多关于静态和动态类型的问题，但我没有发现很多关于两者兼有的语言。让我解释。

似乎动态类型语言在快速原型设计方面具有优势，例如 Python 或 Perl，而静态类型语言（如 C++、OCaml）允许更多的编译时检查和优化。我想知道是否有一种语言可以同时允许两者：

*   首先，使用动态类型、通用（即接受任何类型）打印功能进行快速原型设计，以便于调试和 REPL，并适应不断变化的设计选择
*   然后，更改一些内容并将代码编译到库中，使用静态类型进行更多安全测试和最佳性能。例如，允许静态类型的更改可能是：声明变量（但不是注释所有内容，这要归功于类型推断）、添加编译器开关、使用特定函数而不是通用函数等。

在 C# 中，默认为静态类型，但您可以编写：

```
dynamic fooVar = new FooClass(); 
```

在这种情况下`fooVar`是动态类型的。

似乎带有[http://www.lexifi.com/blog/runtime-types](http://www.lexifi.com/blog/runtime-types)的 OCaml也提供了类似的功能。

请不要主观建议哪种语言最好，只有客观特征！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T10:07:54.300

当然。它被称为“渐进式打字”，我认为它很时髦。

“渐进式打字”的一个表亲是“可选打字”。在这两种情况下，带有和不带有静态类型的代码共存。然而，在“可选类型”中，语言的语义与静态类型完全无关，而在“渐进类型”中，语义可能会考虑静态类型，如果它们可用的话。

从课程“ [Integrating Static and Dynamic Typing](http://www.cs.indiana.edu/classes/b629-amal/) ”的页面，我读到他们学习

> 集成静态和动态类型的最新语言的设计，包括 Typed Racket（以前的 Typed Scheme）、C# 4.0、Diamondback Ruby、Haskell、Sage 和 Thorn

您可以将 Dart 添加到列表中，该列表建议可选类型，如立场文件[Pluggable, Optional Type Systems](http://bracha.org/pluggable-types.pdf)中所示。

# c# - 两次运行相同的exe

> ID：13399961
> 
> 赞同：1
> 
> 时间：2012-11-15T14:49:25.287
> 
> 标签：c#

我有以下代码：

```
foreach(string fileName in chunkFiles)
{
    p = GenerateProcessInstance();
    p.StartInfo.Arguments = string.Format("{0} {1} false {2}", fileName, Id, logName);
    p.Start();
    p.WaitForExit();
    sent += p.ExitCode;
} 
```

我想要做的是，如果我至少有 2 个块来运行带有 2 个实例的 EXE。我唯一的问题是我有`WaitForExit`. 我使用它是因为我需要从 EXE 返回的参数。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:54:30.593

为 Exited 添加一个处理程序来处理返回值，像这样

```
foreach(string fileName in chunkFiles)
{
    p = GenerateProcessInstance();
    p.StartInfo.Arguments = string.Format("{0} {1} false {2}", fileName, Id, logName);
    p.Exited += new EventHandler(p_Exited);
    p.Start();
}

protected void p_Exited(object sender, EventArgs e) 
{
    var p = (Process)sender;
    // Handle p.ExitCode
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:16:06.400

只需在一个循环中启动所有进程，然后在另一个循环中等待所有进程：

```
var processes = new List<Process>();
int sent = 0;

foreach (string fileName in chunkFiles)
{
    Process p = GenerateProcessInstance();
    p.StartInfo.Arguments = string.Format("{0} {1} false {2}", fileName, Id, logName);
    p.Start();
    processes.Add(p);
}

foreach (Process p in processes)
{
    p.WaitForExit();
    sent += p.ExitCode;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:55:39.323

```
static void Main()
{
    Thread t = new Thread(new ThreadStart(RunExe))
    t.Start
    Thread t2 = new Thread(new ThreadStart(RunExe))
    t2.Start
}

public void RunExe()
{
    foreach(string fileName in chunkFiles)
    {
        p = GenerateProcessInstance();
        p.StartInfo.Arguments = string.Format("{0} {1} false {2}", fileName, Id, logName);
        p.Start();
        p.WaitForExit();
        sent += p.ExitCode;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:28:37.923

我发现至少有时当您启动一个应用程序的两个实例，或者启动一个应用程序的实例时，一个已经在运行的应用程序，WaitForExit 和 Exited 事件不起作用。如果您仔细观察，您会发现当您尝试拥有同一个应用程序的多个实例时，整个 Process 对象会变得混乱（变得无用）。我必须设计一个不依赖 Process 对象的解决方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T09:48:29.877

最后，使用的方法是：

```
Parallel.ForEach(
                                    chunkFiles,
                                    new ParallelOptions { MaxDegreeOfParallelism = 2 },
                                    chunk =>
                                    {
                                        //create new paralel process - count limited to MaxDegreeOfParallelism
                                        Process p = ProcessManager.GenerateProcessInstance();
                                        p.StartInfo.Arguments = string.Format("{0} {1} {2} {3}", chunk, Id, logFileName, infoFileName);
                                        p.Start();
                                        p.WaitForExit();
                                        sentEmails += p.ExitCode;
                                    }
                                ); 
```

# css - CSS 特异性和/或与祖先的继承

> ID：13399968
> 
> 赞同：4
> 
> 时间：2012-11-15T14:49:46.633
> 
> 标签：css, inheritance, css-specificity

我正在尝试根据他们的祖先（不是父母，特别是）来设置一些按钮的主题，所以......我有以下 HTML 结构

```
<body class="theme-a">
  <section class="container">
    <form class="theme-b">
      <div class="button-group">
        <button type="button">Button B1</button>
        <button type="button">Button B2</button>
      </div>
      <div class="button-group">
        <button type="button">Button B3</button>
        <button type="button">Button B4</button>
      </div>
    </form>
    <form>
      <div class="button-group">
        <button type="button">Button A1</button>
        <button type="button">Button A2</button>
      </div>
      <div class="button-group">
        <button type="button">Button A3</button>
        <button type="button">Button A4</button>
      </div>
    </form>
  </section>
</body> 
```

好吧，正如你所看到的，有两个主题`.theme-a`和`.theme-b`

CSS 代码如下所示：

```
.theme-a {
  background: #999;
}
.theme-b {
  background: #555;
}
.theme-a button {
  background: #222;
}
.theme-b button {
  background: #69C;
} 
```

问题是：如果您切换主题类（A 与 B，B 与 A），您会注意到 A 主题上的按钮（与主题类有更近的祖先，保持远祖先的样式，蓝色背景而不是黑色背景）。

**如何以根据最近的祖先设置按钮属性的方式实现适当的特异性？**

这是来自 JSfiddle 的链接：http: [//jsfiddle.net/XVaQT/1/](http://jsfiddle.net/XVaQT/1/)

我希望我解释清楚:)

谢谢​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:57:02.827

值得庆幸的是，使用 CSS，您可以组合多个选择器来为许多元素指定相同的样式，我用一个工作示例更新了您的 jsfiddle，只需更改类`theme-a`，并且`theme-b`正如您在问题中所说，看到它工作：[http:// jsfiddle.net/cchana/XVaQT/3/](http://jsfiddle.net/cchana/XVaQT/3/)

我所做的只是添加第二个选择器，您只是在寻找一个`button`具有类的元素的后代`theme-a`：

```
.theme-a button {
    background: #222;
} 
```

它现在还查找 a`button`是具有类的元素的后代，该类`theme-b`本身是具有类的元素的后代`theme-a`：

```
.theme-a button,
.theme-a .theme-b button {
    background: #222;
} 
```

不需要在`!important`您的值中添加 a，因为由于此选择器更具体`background`，它将覆盖定义的样式。`.theme-b button`

# java - Android 缩略图列表

> ID：13399969
> 
> 赞同：2
> 
> 时间：2012-11-15T14:49:46.517
> 
> 标签：java, android, mysql, thumbnails, air-native-extension

对于我的 Flash 应用程序，我需要创建一个“本机扩展”，这是一个本机 android Java 调用。此扩展构建一个包含所有图像文件及其相应缩略图的字符串并将其返回给 Flash。

我不是 Java 程序员，这是我第一次尝试编写 android 代码。所以经过两天的挖掘，我想出了这个：

```
public String getThumbPaths(Uri uri, ThumbContext ctx) {
    String out = "";
    Cursor cursor = MediaStore.Images.Thumbnails.queryMiniThumbnails(ctx
            .getActivity().getContentResolver(), uri,
            MediaStore.Images.Thumbnails.MINI_KIND, null);

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {

        String imageId = cursor.getString(cursor
                .getColumnIndex(Thumbnails.IMAGE_ID));

        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor images = ctx.getActivity().managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                filePathColumn, MediaStore.Images.Media._ID + "=?",
                new String[] { imageId }, null);

        String filePath = "";

        if (images != null && images.moveToFirst()) {
            filePath = images.getString(images.getColumnIndex(filePathColumn[0]));
        }

        out += cursor.getString(1) + ";" + filePath+";";

    }

    return out;
} 
```

和电话

```
ThumbContext ctx = (ThumbContext) context;
Uri uri = MediaStore.Images.Thumbnails.getContentUri("external"); // content://media/external/images/thumbnails
String paths = getThumbPaths(uri, ctx); 
```

一切都很好，除了速度。我不知道发生这种情况是因为 Flash-Java-Flash 调用还是上面的代码，因为编译发生在 Flash 内部，所以我无法检查。

**所以我的问题是：我可以加快这段代码的速度吗？也许在“for”循环内没有第二个光标的情况下这样做？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:06:26.313

您可以进行一些优化。

1.  `cursor.getColumnIndex(Thumbnails.IMAGE_ID)`通过游标的每次迭代都将返回相同的值。将其分配给循环外的变量。
2.  `String[] filePathColumn`在每次迭代中都被赋予相同的值（并且在每次迭代中也创建一个新对象）。将其移出循环。
3.  对于 inner `Cursor`，`MediaStore.Images.Media._ID + "=?"`始终具有相同的值。在循环之外:)
4.  不要创建`out`为 a`String`并附加到它，`java.lang.StringBuilder`而是考虑使用。

# mysql - MySql OR 和 AND 操作

> ID：13399970
> 
> 赞同：0
> 
> 时间：2012-11-15T14:49:51.213
> 
> 标签：mysql

我的表架构如下：

```
 +------+-------+-------+                                                                                                                                                         
                      | id   | name1 | name2 |                                                                                          
                      +------+-------+-------+                                                                                        
                      |    1 | A     | B     |
                      |    2 | A     | C     |
                      |    3 | B     | A     |
                      |    4 | C     | D     |
                      +------+-------+-------+ 
```

我正在使用如下查询：

```
 select * from t where name1='A' or name1='B' and name2='C'; 
```

结果如下

```
 +------+-------+-------+
                       | id   | name1 | name2 |
                       +------+-------+-------+
                       |    1 | A     | B     |
                       |    2 | A     | C     |
                       +------+-------+-------+ 
```

这个结果是怎么来的？

我希望查询返回 name1 为**A**或**B**且 name2 为**'B' 的 行**

查询结果应该是这样的

```
 +------+-------+-------+
                       | id   | name1 | name2 |
                       +------+-------+-------+
                       |    1 | A     | B     |
                       +------+-------+-------+ 
```

我想要只使用“AND”和“OR”操作的查询结果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:52:26.230

我建议您阅读有关[布尔逻辑](http://en.wikipedia.org/wiki/Boolean_Logic)的信息。这是一个非常简单的操作，所以如果你熟悉 BL，你自己就可以做到这一点。

话虽如此，这两个状态将完成您想要的：

```
SELECT ... WHERE (name1 IN ('A', 'B')) AND (name2 = 'B')
SELECT ... WHERE ((name1 = 'A') or (name1 = 'B')) AND (name2 = 'B') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:54:16.263

这是一个优先级问题。B 和 C 子句绑定在一起意味着你得到：

```
select * from t where name1='A' or (name1='B' and name2='B'); 
```

所以你需要做的是自己显式地绑定子句：

```
select * from t where (name1='A' or name1='B') and name2='B'; 
```

（假设您在陈述的查询中使用 C 是一个错字，因为它与您问题的其余部分不匹配）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:52:35.457

通过添加括号对您的条件进行分组

```
select * from t where (name1='A' or name1='B') and name2='B'; 
```

或使用`IN`

```
select * from t where name1 IN ('A','B') and name2='B'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:52:52.740

你应该使用括号

```
select * from t where name1='A' or name1='B' and name2='C'; 
```

应该

```
select * from t where (name1='A' or name1='B') and name2='B'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T14:53:04.713

```
 select * from t where (name1='A' or name1='B') and name2='B'; 
```

# javascript - 如何将 SQL Server 查询结果的数据转换为 JSON 格式？

> ID：13399977
> 
> 赞同：10
> 
> 时间：2012-11-15T14:50:19.580
> 
> 标签：javascript, sql-server, ajax, json

我刚刚开始了解 Ajax 和 JSON 格式。我正在构建一个非常简单的地址簿。因此，为了简单起见，假设我有一个表有 3 列：

`Name, Email and Phone`

我的 javascript / jquery 不是刚刚学习的最好的，但我想将从我的 SQL Server 返回的数据转换为 JSON 格式。我应该创建一个可以创建 json 文件的存储过程并将其放在可以在我的 javascript 中使用它的文件夹中吗？

或者这类似于客户端 C# / VB.net 应用程序应该在每 5 分钟实际生成文件的地方执行？基本上让我们假设我得到了一些数据：

```
George g@yahoo.com 123-3333
Mike m@gmail.com 123-4433
Steve s@gmail.com 144-3333
Jill r@gmail.com 333-3333 
```

我从一个简单的选择语句中得到了这个：

`SELECT name, email, phone from myTable`

然后我怎样才能将其作为 json 文件获取，以便我可以将数据存储在 a 中`.json`，然后在我的 javascript 代码中使用该文件。有人可以解释这一点以及人们如何生成 json 文件吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T15:00:35.807

通常，更好的方法是通过一些 web api 提供 JSON。

这是一个如何在 ASP.NET MVC 中执行此操作的示例：

[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

```
public class Contact
{
  public string Name {get;set;}
  public string Email {get;set;}
  public string Phone {get;set;}
}

public class ContactsController : ApiController
    {
        // instead of having the contacts in memory, you can load them from the database using Entity Framework, Dapper.NET - or you other favorite ORM.
        Contact[] contacts = new Contact[] 
        { 
            new Contact{ Name = "George", Email = "g@yahoo.com", Phone = "123-3333" }, 
            new Contact{ Name = "Mike", Email = "m@yahoo.com", Phone = "123-3333" }, 
            new Contact{ Name = "Steve", Email = "s@yahoo.com", Phone = "123-3333" } 
        };

        public IEnumerable<Contact> GetAllContacts()
        {
            return contacts;
        }
    } 
```

然后，您将浏览到：`http://localhost:xxxx/api/contacts/`并且您可以看到您的数据。您可以使用 javascript 以 JSON 格式检索数据。Web API 负责为您将其转换为 JSON。

在幕后 ASP.NET MVC 使用 NewtonSoft 的 JSON.NET 将类转换为 JSON。这是开源的，可以在任何 .NET 应用程序中使用。

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

使用 jQuery 检索数据：

```
<script type="text/javascript">
    $(document).ready(function () {
        // Send an AJAX request
        $.getJSON("api/contacts/",
        function (data) {
            // On success, 'data' contains a list of contacts.
            $.each(data, function (key, val) {

                console.log(val.Name, val.Phone, val.Email);  
            });
        });
    });
</script> 
```

如果您的项目使用 ASP.NET Web 窗体，则可以改为执行以下操作：

[asp.net web表单json返回结果](https://stackoverflow.com/questions/5364343/asp-net-web-forms-json-return-result)

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public List<Contact> GetAllContacts()
{
  return contacts;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T20:12:53.997

您也许可以利用我过去使用过的一些基本的 sql 到 json 逻辑......但它可能特定于我的数据集。我试着把它概括一下。

```
SET NOCOUNT ON;

--sample table
CREATE TABLE #Temp(
    Id INT Identity(1,1),
    Column1 INT,
    Column2 VARCHAR(10),
    Column3 VARCHAR(10)
    )
;

INSERT INTO #Temp(Column1, Column2, Column3) VALUES (10,'Test', 'Test2'), (20, 'Test3', 'Test4'), (30, 'Test5', 'Test6');

WITH 
    cte AS(
        SELECT  Id AS RowId,
                CAST(Id AS VARCHAR(100)) AS Id,
                CAST(Column1 AS VARCHAR(100)) AS Column1,
                CAST(Column2 AS VARCHAR(100)) AS Column2,
                CAST(Column3 AS VARCHAR(100)) AS Column3
        FROM #Temp
        ),
    cte2 AS (
        SELECT  RowId,
                '"' + PropertyName + '"' + ':' + CASE WHEN ISNUMERIC(Value) = 1 THEN Value ELSE '"' + Value + '"' END AS Value,
                ROW_NUMBER() OVER(PARTITION BY RowId ORDER BY CASE WHEN PropertyName = 'Id' THEN '' ELSE PropertyName END) AS RowNum,
                ROW_NUMBER() OVER(ORDER BY RowId) AS RowNum2
        FROM cte
            UNPIVOT(
                Value
                FOR PropertyName IN (
                    Id,
                    Column1,
                    Column2,
                    Column3
                    )
                ) upvt
        )
        SELECT  CASE WHEN cte2.RowNum2 = y.MinRowNum THEN '[' ELSE '' END,
                CASE WHEN cte2.RowNum = x.MinRowNum THEN '{' ELSE '' END,
                cte2.value,
                CASE WHEN cte2.RowNum <> x.MaxRowNum THEN ',' ELSE '' END,
                CASE 
                    WHEN cte2.RowNum = x.MaxRowNum THEN '}' + 
                        CASE WHEN cte2.RowNum2 = y.MaxRowNum THEN '' ELSE ',' END 
                    ELSE '' 
                END,
                CASE WHEN cte2.RowNum2 = y.MaxRowNum THEN ']' ELSE '' END
        FROM cte2
            INNER JOIN (
                SELECT  RowId, 
                        MIN(RowNum) AS MinRowNum, 
                        MAX(RowNum) AS MaxRowNum
                FROM cte2
                GROUP BY RowId
                ) x
                    ON cte2.RowId = x.RowId
            CROSS JOIN (
                SELECT  MIN(RowNum2) AS MinRowNum, 
                        MAX(RowNum2) AS MaxRowNum
                FROM cte2
                ) y
; 
```

/* --输出如下：

[ { "Id":1 ,
"Column1":10 ,
"Column2":"Test" ,
"Column3":"Test2" },
{ "Id":2 ,
"Column1":20 ,
"Column2":"Test3 " ,
"Column3":"Test4" },
{ "Id":3 ,
"Column1":30 ,
"Column2":"Test5" ,
"Column3":"Test6" } ] */

# video-streaming - .h264 示例文件

> ID：13399981
> 
> 赞同：1
> 
> 时间：2012-11-15T14:50:37.013
> 
> 标签：video-streaming, h.264, video-encoding

我目前[在这里](http://support.apple.com/kb/HT1425)使用文件，但是在测试我的程序时遇到了一些错误。我只是想看看它是否仅与这个文件或所有其他 .h264 文件一起失败。那么，是否有任何其他来源可以下载（标准）.h264 示例文件进行测试？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:39:04.377

选项 1：使用 x264 自己制作。这些不是标准示例文件，但您可以控制它们使用 H.264 的哪些部分，例如不同的配置文件/级别/等，使它们仅 I 帧，使它们仅具有特定的宏块类型等。另外，您可以使它们变得很小，例如一帧或几帧长。

选项 2：也许 JM 软件带有一些示例文件？[http://iphome.hhi.de/suehring/tml/](http://iphome.hhi.de/suehring/tml/)

选项 3：如果您想测试大量文件，请以 mp4 格式下载一些随机预告片等并将它们解复用以获取原始 .h264（例如使用 ffmpeg -vcodec 副本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:54:40.100

这是一部用于此类测试的经典电影： [Big Buck Bunny](http://www.bigbuckbunny.org/)

# jvm - 从 Make 中启动 JVM 时出现内存不足错误

> ID：13399983
> 
> 赞同：1
> 
> 时间：2012-11-15T14:50:43.947
> 
> 标签：jvm, makefile

我遇到了一个非常奇怪的问题。我能够独立启动 Oracle JVM，但是当我通过 GNU 调用相同的命令时`make`，我得到一个错误。

```
> java -Xmx2500m -version
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) Server VM (build 23.5-b02, mixed mode)

> cat Makefile
all:
    java -Xmx2500m -version

> make
java -Xmx2500m -version
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
make: *** [all] Error 1 
```

顺便说一句，我能够通过 shell 脚本成功启动具有相同参数的 JVM。所以必须有一些关于如何`make`启动子进程的具体内容。

我曾尝试寻找解决方案，但没有运气。

我的机器有 6GB 内存。操作系统是 Ubuntu 12.10 32 位（虽然我有一台 64 位机器，但我坚持使用 32 位操作系统）。

# java - 如何在 Java 中管理打印机

> ID：13399987
> 
> 赞同：0
> 
> 时间：2012-11-15T14:50:50.930
> 
> 标签：java, windows, printing

在我的学校，我们无法正确连接到打印机。并不是他们不在网络上，只是我们真的不知道如何通过我们的笔记本电脑与他们进行交互。

我的想法是制作某种应用程序（使用 Java），可用于从学校打印机打印出文档等。

我一直在看 Oracle 在打印机上制作的教程 (http://docs.oracle.com/javase/tutorial/2d/printing/index.html) 但有两件事我想先澄清：

1.  学校的打印机使用一个系统（FollowMe 或 FollowYou）来跟踪谁在打印机上打印了什么，这样你就可以告诉打印机在学校的任何地方打印，只要你有你的卡来激活它. 有谁知道这是否可以通过Java接口？

2.  是否可以实现一个实现，在该实现中我可以右键单击 Windows 中的文档（因为这是我使用的）并将一个名为“使用 JPrinter 打印”的新选项添加​​到选项列表中？

谢谢你的帮助！

# jquery - 将 URL 附加到 jquery 函数

> ID：13399989
> 
> 赞同：0
> 
> 时间：2012-11-15T14:50:57.513
> 
> 标签：jquery, scrollto, deep-linking

我创建了一个带有 jquery.mousewheel 和 scrollTo 的系统，每次移动鼠标滚轮时都会滚动 800 像素。浏览类似于本站：[http ://beoplay.com/Products/BeoplayA8#sound-experience](http://beoplay.com/Products/BeoplayA8#sound-experience)

我当前的代码如下所示：

```
 var position = 1;
var rotation= true;
var ezin= 'easeInOutExpo';

if (position==1){
    $.scrollTo('0px', 100, { axis:'y',easing: ezin });
    $('.variable').text("1");
}

function DEL1AL2(){
    rotation= false;
    $('.variable').text("2");
    $.scrollTo('800px', 800, { axis:'y',easing: ezin, onAfter: function() {rotation= true; position=2;} });     
}

function DEL2AL1(){
    rotation= false;
    $('.variable').text("1");
    $.scrollTo('0px', 800, { axis:'y',easing: ezin, onAfter: function() {rotation= true; position=1;} });   
}

function DEL2AL3(){
    rotation= false;
    $('.variable').text("3");
    $.scrollTo('1600px', 800, { axis:'y',easing: ezin, onAfter: function() {rotation= true; position=3;} });
}

function DEL3AL2(){
    rotation= false;
    $('.variable').text("2");
    $.scrollTo('800px', 800, { axis:'y',easing: ezin, onAfter: function() {rotation= true; position=2} });
    ;
}

$(document).mousewheel(function(event, delta) {
    if (delta > 0 && rotation==true){
        if(position==2){
            DEL2AL1();
        };
        if(position==3){
            DEL3AL2();
        };          
    }
    else if (delta < 0 && rotation==true){
        if(position==1){
            DEL1AL2();
        };
        if(position==2){
            DEL2AL3();
        };
    };      
    event.preventDefault();     
});}); 
```

系统附加了一个数值变量，因此当您在位置 1 并向下滚动时，该函数会向下滚动 800 像素并将位置变量更改为 2。

您将如何添加深度链接（我认为这是术语），因此当位置为 2 时，URL 会反映它（例如 www.myexample.com/#2），因此链接实际上会将您带到这个第二个位置？

我尝试这样做的唯一原因是因为我希望页面的不同位置有自己的 facebook 喜欢（投资组合项目），如果这种深层链接是不必要的并且有更好的方法来完成我所有的耳朵。

另外，如果您在我当前的代码中发现任何错误，请告诉我，我学习缓慢，欢迎任何我能完善的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:59:11.030

首先，在到达某个位置时更改窗口位置：

```
var baseLocation = window.location;

function DEL1AL2(){
    rotation= false;
    $('.variable').text("2");
    $.scrollTo('800px', 800, { axis:'y',easing: ezin, onAfter: function() {rotation= true; position=2;} });     
    window.location = baseLocation+'#2';
} 
```

然后当您加载页面时，您可以执行以下操作：

```
 $(window).ready(function(){

    if (window.location.hash){
         // ...code to check what's the position that corresponds to the hash link.
        if (window.location.hash=='2'){ DEL1AL2();}
        // ...etc
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:21:27.843

如果您希望在滚动到特定元素时获得平滑的滚动动画，可以查看以下插件：

[http://flesler.blogspot.be/2007/10/jqueryscrollto.html](http://flesler.blogspot.be/2007/10/jqueryscrollto.html)

此插件允许您根据以下条件滚动到某个位置：

*   一个原始数字
*   一个字符串（'44'、'100px'、'+=30px'等）
*   一个 DOM 元素（逻辑上是可滚动元素的子元素）
*   一个选择器，将相对于可滚动元素
*   要滚动到末尾的字符串“max”。
*   一个字符串，指定滚动到容器的该部分的百分比（fe: 50% 到中间）。
*   哈希 { top:x, left:y }, x 和 y 可以是任何类型的数字/字符串，如上。

# java - Jgit中'pull'命令的使用

> ID：13399990
> 
> 赞同：12
> 
> 时间：2012-11-15T14:51:02.870
> 
> 标签：java, git, git-pull, jgit

我是 git 的新用户，正在使用[JGit](http://wiki.eclipse.org/JGit)与远程 git 存储库进行交互。在 JGit 中，我`CloneCommand`最初是克隆一个 repo，它可以正常工作。但是，当我尝试使用`PullCommand`相当于 SVN 更新 AFAIK 时，本地 repo 内容不会更新。

这是我使用的代码：

```
private String localPath;
private Repository localRepo;
private Git git;

localPath = "/home/test/git_repo_test";
remotePath = "https://github.com/test/repo_1.git";

try {
    localRepo = new FileRepository(localPath + "/.git");
} catch (IOException e) {
    e.printStackTrace();  
}
git = new Git(localRepo);

PullCommand pullCmd = git.pull();
try {
    pullCmd.call();
} catch (GitAPIException e) {
    e.printStackTrace();  
} 
```

这不会为我使用命令行推送到远程存储库的新文件更新本地存储库。但是，如果我删除本地存储库并再次进行克隆，则会反映所有更改。

请让我知道`PullCommand`在 JGit 中使用的正确方法是什么。

编辑：

远程仓库的结构：

```
root ____ file_1
  |______ directory_1
              |__________ file_2 
              |__________ file_3 
```

directory_1 和这两个文件是在初始克隆后从命令行推送的，我尝试了这段代码，以便它反映在本地存储库中，这没有发生。

用于克隆存储库的代码：

```
File file = new File(localPath);
CloneCommand cloneCmd = git.cloneRepository();
try {
    cloneCmd.setURI(remotePath)
            .setDirectory(file)
            .call();
} catch (GitAPIException e) {
    e.printStackTrace();  
} 
```

这里，`git`和`localPath`是`remotePath`与上面相同的变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:17:04.823

我怀疑问题是当前分支没有上游配置（因此 pull 不会合并获取的分支）。

要查看在拉取期间发生了什么，请检查以下结果`pullCmd.call()`：

```
PullResult result = pullCmd.call();
FetchResult fetchResult = result.getFetchResult();
MergeResult mergeResult = result.getMergeResult();
mergeResult.getMergeStatus();  // this should be interesting 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T15:02:36.720

文档说明了`Git`以下类的构造函数：

> 构造一个新的 Git 对象，该对象可以与指定的 git 存储库交互。此类方法返回的所有命令类将始终与此 git 存储库交互。

因此，正如我可以建议的那样，您必须将远程仓库的路径传递给构造函数，现在您正试图从本地仓库中提取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-27T20:46:15.950

我遇到了同样的问题。对我来说，解决方案是在克隆后设置 git 配置文件：

```
CloneCommand cloneCommand = Git.cloneRepository();
cloneCommand.setURI("<repo-uri>");
cloneCommand.setDirectory("<repo-dir>");
cloneCommand.call();

Git git = Git.open("<repo-dir>");
StoredConfig config = git.getRepository().getConfig();
config.setString("branch", "master", "merge", "refs/heads/master");
config.setString("branch", "master", "remote", "origin");
config.setString("remote", "origin", "fetch", "+refs/heads/*:refs/remotes/origin/*");
config.setString("remote", "origin", "url", "<repo-uri>");
config.save(); 
```

拉动时，我将远程分支名称设置为“master”，将远程分支名称设置为“origin”：

```
PullCommand pull = git.pull();
pull.setRemote("origin");
pull.setRemoteBranchName("master"); 
```

通过拉动后的这些更改，我看到了本地反映的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-08T11:49:59.300

从私有存储库尝试此代码用于 git pull

```
try {
        Repository localRepo = new FileRepository(localPath + "/.git");
        Git git = new Git(localRepo);
        CredentialsProvider cp = new UsernamePasswordCredentialsProvider(userName, pass);
        git.pull().setCredentialsProvider(cp).call();
        git.close();
    } catch (Exception e) {
    } 
```

# jquery - 来自数据表的额外 oTableTools 无法正常工作

> ID：13399992
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:09.667
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, datatables

我使用这个 gem [https://github.com/rweng/jquery-datatables-rails](https://github.com/rweng/jquery-datatables-rails) 将数据表添加到我的 Rails 应用程序项目中。

我已添加到 application.js：

```
//=require dataTables/extras/TableTools 
```

和 application.css.scss：

```
*= require dataTables/extras/TableTools
*= require dataTables/extras/TableTools_JUI 
```

我将这个 gem 与 twitter bootstrap 一起使用，除了[OTableTools](http://datatables.net/extras/tabletools/)额外，一切都运行良好。

这是我的数据表代码：

```
$("#admin").dataTable({
  "sDom": "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
  "sPaginationType": "bootstrap",
  "bProcessing"     : true,
  "sScrollX": "100%",
  "bScrollCollapse": true,
  "bAutoWidth": false,
  "aoColumns"       : [{"sType" : "html"}, null, null, null],
  "aaSorting"       : [[0, 'asc'], [1, 'asc']],
  "bServerSide"     : true,
  "sAjaxSource"     : "/admin/admins.json",
  "oTableTools": {
            "aButtons": [
                "copy",
                "print",
                {
                    "sExtends":    "collection",
                    "sButtonText": "Save",
                    "aButtons":    [ "csv", "xls", "pdf" ]
                }
            ]
        }
}).fnSetFilteringDelay(); 
```

我`oTableTools`在此示例中添加了类似[http://datatables.net/release-datatables/extras/TableTools/bootstrap.html](http://datatables.net/release-datatables/extras/TableTools/bootstrap.html)的内容，以与 twitter 引导程序一起使用。

我看不到导出为 csv、xls 和 pdf 格式的按钮...等

**我究竟做错了什么？哪里有问题？**

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:25:36.020

如果您的导向器结构与默认的 TableTools 示例稍有不同，则需要为执行保存的 swf 文件设置 sSwf 路径，即：

```
"oTableTools": {
    "sSwfPath": "dataTables/extras/TableTools/media/swf/copy_csv_xls_pdf.swf",
    "aButtons": ["copy", "print", {
         "sExtends": "collection",
         "sButtonText": "Save <span class=\"caret\" />",
         "aButtons": ["csv", "xls", "pdf"]
    }]
} 
```

但我的理解是，不应该只影响显示功能（实际保存和复制）。

我和你有完全相同的问题。我的所有代码都已处理 - 我使用[DataTables 调试器](http://datatables.net/blog/DataTables_debugger)进行了检查，它识别出 DataTable 中正在使用 TableTools。

让我知道你是否解决了这个问题！

# javascript - 如何防止页面链接导致下拉链接消失

> ID：13399994
> 
> 赞同：0
> 
> 时间：2012-11-15T14:51:11.093
> 
> 标签：javascript, css, wordpress

在此页面上：[http ://www.theionclub.com/about/contact/](http://www.theionclub.com/about/contact/)

当我将鼠标悬停在“关于”主导航菜单选择上时，会出现一个下拉菜单。

但是，如果我尝试将鼠标向下移动到下拉列表中的最后一个选择，则左侧边栏中第一个链接的悬停似乎会取消下拉列表，从而使下拉列表中的最后一个链接无法点击。

我该如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:54:24.307

添加`z-index: 1;`到**.menu li ul{}**部分，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:56:42.533

添加：

.menu li ul { z-index:1;}

# android - 从导出的 apk 安装时应用程序崩溃并在 maps.jar 文件上出错，如果我从 eclipse 安装它就可以工作

> ID：13399995
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:13.237
> 
> 标签：android, google-maps, mapactivity

我的应用程序使用谷歌地图 api。如果我从 Eclipse 安装它，它运行良好，但是当我导出 apk 并从该 apk 安装时，应用程序崩溃并报告此错误

```
11-15 16:30:29.692: E/AndroidRuntime(14405): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mycom.myapp/com.mycom.myapp.MainActivity}: java.lang.ClassNotFoundException: com.mycom.myapp.MainActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/aseccom.mycom.myapp-1/pkg.apk]

    11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.os.Looper.loop(Looper.java:150)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread.main(ActivityThread.java:4389)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at java.lang.reflect.Method.invokeNative(Native Method)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at java.lang.reflect.Method.invoke(Method.java:507)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at dalvik.system.NativeStart.main(Native Method)
11-16 01:47:41.999: E/AndroidRuntime(19577): Caused by: java.lang.ClassNotFoundException: com.mycom.myapp.MainActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/asec/com.mycom.myapp-1/pkg.apk]
11-16 01:47:41.999: E/AndroidRuntime(19577):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
11-16 01:47:41.999: E/AndroidRuntime(19577):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1777)
11-16 01:47:42.009: E/EmbeddedLogger(183): App crashed! Process: com.mycom.myapp
11-16 01:47:42.009: E/EmbeddedLogger(183): App crashed! Package: com.mycom.myapp v1 (1.0)
11-16 01:47:42.009: E/EmbeddedLogger(183): Error getting package label: com.mycom.myapp
11-16 01:47:42.009: E/EmbeddedLogger(183): java.lang.NullPointerException
11-16 01:47:42.009: E/EmbeddedLogger(183):  at com.htc.server.embedded.EmbeddedLogger.onHandleApplicationCrash(EmbeddedLogger.java:59)
11-16 01:47:42.009: E/EmbeddedLogger(183):  at com.android.server.am.ActivityManagerService.handleApplicationCrash(ActivityManagerService.java:7739)
11-16 01:47:42.009: E/EmbeddedLogger(183):  at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:1033)
11-16 01:47:42.009: E/EmbeddedLogger(183):  at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1657)
11-16 01:47:42.009: E/EmbeddedLogger(183):  at android.os.Binder.execTransact(Binder.java:320)
11-16 01:47:42.009: E/EmbeddedLogger(183):  at dalvik.system.NativeStart.run(Native Method)
11-16 01:47:42.009: E/EmbeddedLogger(183): Application Label: <ERROR> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:49:29.367

当我从 Eclipse 导出已签名的 apk 时，这经常发生在我身上。我还没有找到问题的根源，但我的解决方法只是重新导出 apk 并尝试安装到设备上进行测试。我估计大约 3/4 的时间 apk 很好，其余时间在尝试打开应用程序时立即崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:05:53.013

我无法观察@David Currie 所描述的内容。对我来说，以同样的方式通过 exclipse 导出或编译工作，如果一个工作，另一个工作。

当您查看堆栈跟踪时，它提到了两个应该在类加载器中的文件：

*   /system/framework/com.google.android.maps.jar
*   /mnt/aseccom.mycom.myapp-1/pkg.apk

这些文件存在吗？第二个的扩展是什么？它的名字很奇怪。它以“-1.pkg.apk”结尾。你应该先调查一下。您也可以使用工具[dexdump](http://android-anything.diandian.com/?tag=APK)检查您的课程`com.mycom.myapp.MainActivity`是否在您的 apk 文件中。

`com.mycom.myapp.MainActivity`仔细检查您的发布 apk 内的 dex 文件中是否有包含“类描述符”的行。

# msbuild - MSBuild 扩展程序集信息失败，版本号无效

> ID：13399996
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:14.227
> 
> 标签：msbuild, assemblyinfo, msbuildextensionpack

我正在使用 64 位 msbuild 扩展，我的构建文件中有这个

```
<AssemblyInfo AssemblyInfoFiles="$(MSBuildProjectDirectory)\DesktopAgent\properties\AssemblyInfo.cs" 
              AssemblyCopyright="Copyright 2012 Alpine Access" 
              AssemblyVersion="1.0.0.0"
              AssemblyFileVersion="1.0.0.0"
              >
</AssemblyInfo> 
```

如果重要的话，我在我的 assemblyInfo.cs 中有这个

```
[assembly: AssemblyVersion("1.0.*")]
//[assembly: AssemblyFileVersion("2.1.0.0")] 
```

当我在另一篇文章中读到第二行时，第二行被注释掉了，但这没有帮助。

我收到以下错误

```
C:\AAROOT\csharpprojects\toolbar\project.build(17,5): error MSB4018: System.Arg
umentException: The specified string is not a valid version number\r 
```

2个问题

1.  为什么我会收到此错误
2.  此任务会覆盖/修改我以前的 AssemblyInfo.cs 文件吗？（我不知道 AssemblyInfoFiles 是输入/输出还是两者兼而有之）

附带说明一下，由于某些奇怪的原因，属性 $(MSBuildExtensionsPath) 被设置为 32 位路径（我只安装了 64 位工具，因此路径不起作用，我必须手动设置属性....是这是他们的安装程序中的某种错误，他们没有正确设置该属性？

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:41:36.090

当我尝试你所拥有的时，在这里得到了相同的结果。如果您现有的 assemblyinfo 文件中包含 1.0.*，则看起来像一个真正的错误。奇怪的是，任何不是有效版本号的东西都会导致同样的问题。如果您删除 1.0.* ，那将是一种享受。我只需将其设为 1.0.0.0 并通过任务替换。

# c# - 如何使用 SharpSSH 将文件上传到 SFTP 服务器

> ID：13399997
> 
> 赞同：3
> 
> 时间：2012-11-15T14:51:15.390
> 
> 标签：c#, sftp, sharpssh

我想使用 SharpSSH 将文件上传到 SFTP 服务器。

我得到`SharpSSH.dll`了要上传的文件，一个公钥，然后我将私钥发送到了服务器。他们给了我一个用户名，不需要密码。

我试过这个：

```
Sftp sftp = new Sftp(ip, user);
sftp.Connect();
sftp.Put(filePath, toPath);
sftp.Cancel(); 
```

我在这里的某个地方需要一个 HostKey，如果需要，我必须把它放在哪里，以及如何从`.ppk`文件中制作一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T13:33:57.800

首先，您的关键术语是从后到前的，或者至少我希望它们是。您将公钥发送出去，并确保私钥安全可靠。

除此之外，是的，使用 SharpSSH 您需要包含私钥位置。

```
sftp.AddIdentityFile("path/to/identity/file"); 
```

如果您的密钥有密码，则使用重载版本，即

```
sftp.AddIdentityFile("path/to/file", "password"); 
```

我相信，密钥文件本身需要采用 OpenSSH 格式。

我也不确定您是否包含 sftp.Cancel(); 将你的 connect 和 Put 命令放入 try/catch/finally 块中，并`sftp.close()`在 finally 块中调用不是更好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T12:45:18.890

这是我的解决方案：

```
using Tamir.SharpSsh;
using Tamir.SharpSsh.jsch; 
```

方法代码：

```
public static bool SftpFile(string ftpAddress, string username, string password, string port, string folderPath, string filename, string separator, string keyFilename, string keyPassword)
{
    bool Success = false;
    Sftp sftp = null;
    try
    {

        if (filename.Length > 0 && dt != null)
        {
            //Send file

            int NumberOfConnectionAttempts = 0;

        JumpPoint:

            try
            {
                sftp = new Sftp(ftpAddress, username);

                sftp.Password = password;

                sftp.AddIdentityFile(keyFilename, keyPassword);

                // non-password alternative is sftp.AddIdentityFile(keyFilename);

                sftp.Connect();

                sftp.Put(filename + ".csv", (!String.IsNullOrWhiteSpace(folderPath) ? folderPath + "/" : "") + filename + ".csv");

                Success = true;

            }
            catch (Exception ex)
            {
                Program.DisplayText(" Connection " + NumberOfConnectionAttempts + " failed.\n");

                if (NumberOfConnectionAttempts < Program.IntTotalAllowedConnectionAttempts)
                {
                    NumberOfConnectionAttempts++;

                    Thread.Sleep(1000);

                    goto JumpPoint;

                }
                else
                {
                    //Program.HandleException(ex);

                }
            }
        }

    }
    catch (Exception ex)
    {
        //Program.HandleException(ex);
    }
    finally
    {
        //Close sftp

        try { sftp.Close(); }
        catch { }

        try { sftp = null; }
        catch { }

        try { GC.Collect(); }
        catch { }

    }
    return Success;
} 
```

使用示例：

```
string FtpAddress = "??.??.??.??";

string Port = "21";

string Username = "my-username";

string Password = "P455w0rd";

string FolderPath = "folder-name\\"; 

string Filename = "filename.foo";

string KeyFilename = "keyFilename.bar";

string KeyPassword= "K3yP455w0rd";

if (SftpFile(FtpAddress, Username, Password, Port, FolderPath, Filename, ",", KeyFilename, KeyPassword))
{
    /* Success */

}
else
{
    /* Error */

} 
```