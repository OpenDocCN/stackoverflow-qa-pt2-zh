# StackOverflow 问答 16210000-16210999

# c# - 在 WPF 中的窗口和页面之间传递值

> ID：16210002
> 
> 赞同：1
> 
> 时间：2013-04-25T08:34:08.917
> 
> 标签：c#, .net, wpf

我正在使用 WPF 开发一个软件，我想在窗口（主窗口）之间传递一个参数（文本框）到一个页面（它位于一个框架中）......你有什么想法吗？

非常感谢我的朋友们... BB

已编辑：好吧，我在 MAINWINDOW 中有一个文本框，其值为“DB2012_2013”​​，那么框架的代码就是这个：

```
 <Frame  HorizontalContentAlignment="Stretch" LoadCompleted="frSample_LoadCompleted" Navigating="frSample_Navigating" VerticalContentAlignment="Stretch" x:Name="frSample" Background="{x:Null}" Margin="0,0,0,0" Source="{Binding SelectedItem.XamlFilePath, ElementName=CategoryTreeView, FallbackValue=Welcome.xaml, IsAsync=True}"/> 
```

然后，当我选择要打开的页面时，我会在新页面中传递文本框的值...以使用此值进行某些查询..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:23:11.120

您可以使所有页面都实现一个接口，该接口具有所需值的属性。

```
public interface IPageWithValue
{
    string MyValue { get; set; }
} 
```

每当您切换到页面时，从主窗口设置属性值，每当您离开页面时，读取属性。

让您的页面实现该接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:04:35.757

您可以使用 DataContext 和 WPF 绑定功能。

您可以设置 DataContext 属于 MainWindow。您是否需要将数据传递到 Frame 或 UI 组件文本框？

```
<TextBox Name="textBox" Text="Text"></TextBox>
<Frame DataContext="{Binding ElementName=textBox,Path=DataContext}" Background="AliceBlue" Width="200"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T08:46:17.003

试试这个 App.Current.MainWindow.TextBoxName.Text

# c# - Shell Context Menus

> ID：16210004
> 
> 赞同：0
> 
> 时间：2013-04-25T08:34:15.803
> 
> 标签：c#, contextmenu, windows-shell

I am currently running a `Windows 7 x64 machine`.

I have written the following code to add a context menu on right click:

```
 RegistryKey rKey = Registry.ClassesRoot.OpenSubKey("Directory\\Background\\shell", true);
    String[] names = rKey.GetSubKeyNames();
    foreach (String s in names)
    {
        System.Windows.Forms.MessageBox.Show(s); 
    }
    RegistryKey newKey = rKey.CreateSubKey("Your Application");
    RegistryKey newSubKey = newKey.CreateSubKey("command");
    newSubKey.SetValue("", "C:\\Windows\\System32\\notepad.exe");
    newSubKey.Close();
    newKey.Close();
    rKey.Close(); 
```

If I repeat the procedure directly on the registry, it works, but not via this.

I am also able to access the registry, as I have added a snippet that tells lists all subkeys that I require, but simply does not add one.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:40:04.110

我已经测试了你的代码，它很好。看起来您没有从代码中打开注册表的访问权限。只需按照以下简单步骤操作：

1.  关闭您的 Visual Studio。然后以管理员身份运行模式再次打开它。您可以通过右键单击 Visual Studio 链接并选择以管理员身份运行选项来执行此操作。
2.  打开您的代码并从那里运行它。

如果要直接从 Exe 运行程序，请右键单击 Exe 并选择以管理员身份运行选项。

如果您不想以管理员身份运行，请按照以下步骤操作：

1.  向您的项目添加一个名为 App.manifest 的新文件；通过从项目中添加一个新文件。
2.  将以下数据添加到该文件中，休息它会变魔术。

只需将您的应用程序名称替换为 MyApplication.app。重要的部分是部分。休息是自动生成的。

> ```
>  xmlns:asmv1="urn:schemas-microsoft-com:asm.v1"
>   xmlns:asmv2="urn:schemas-microsoft-com:asm.v2"
>   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
>   <assemblyIdentity version="1.0.0.0" name="MyApplication.app" />
>   <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
>     <security>
>       <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
>         <requestedExecutionLevel level="requireAdministrator"
>       uiAccess="false" />
>       </requestedPrivileges>
>     </security>
>   </trustInfo>
> </asmv1:assembly> 
> ```

# ios - object becomes null when passed to another view controller

> ID：16210010
> 
> 赞同：1
> 
> 时间：2013-04-25T08:34:25.387
> 
> 标签：ios, objective-c, null, nsobject

In the iOS application, I need to pass an object from one view controller to another and then switch to the new view controller. The goal is to simply relay the information. However, the object becomes `NULL` and is devoid of any information when the next view showed up. what? could be the reason?

Below is part of my code.

```
#pragma mark - Table view delegate

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   BIDCourse *course = self.courses[indexPath.row];

   NSString *sub = course.subject;

   BIDSubjectMainTwoViewController *subjectController=[[BIDSubjectMainTwoViewController alloc] init];

   subjectController.title = sub;

   subjectController.course=course;

   [self.navigationController pushViewController:subjectController animated:YES];
} 
```

`BIDCourse *course` is my custom subclass to `NSObject`, which has some `NSStrings`, and it's not nil, but when I pass it onto the next view controller, it becomes `NULL`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:43:10.720

我遇到了像你这样的问题，当我将一个对象传递给另一个 viewController 时，它已经被释放了。

我觉得这是ARC的一个缺陷，觉得你的ARC`subjectController`可能没用，所以就放出来了`subjectController`。将您的`subjectController`作为属性，因此当您将其传递给另一个视图控制器时，ARC 不会释放。

如 ：

```
#pragma mark - Table view delegate

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
BIDCourse *course = self.courses[indexPath.row];

NSString *sub = course.subject;

_subjectController=[[BIDSubjectMainTwoViewController alloc] init];

_subjectController.title = sub;

_subjectController.course=course;

[self.navigationController pushViewController:_subjectController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:04:37.097

尝试这个：

BIDSubjectMainTwoViewController.h

```
 NSString *strTemp;

    @property(nonatomic,retain) NSString *strTemp;

    -(void) setValuestrTemp : (NSString *) str; 
```

.m 文件

```
 @synthesize strTemp; 
```

// 编写setter方法

```
 -(void) setValuestrTemp : (NSString *) str {
        self.strTemp = str;
    } 
```

并在 viewWillAppear 中使用 strTemp。

//现在使用它

```
 BIDSubjectMainTwoViewController *subjectController=[[BIDSubjectMainTwoViewController alloc] init];

       [subjectController setValuestrTemp:sub];

    [self.navigationController pushViewController:_subjectController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:32:15.013

我遇到了这种类似的行为。我的解决方案是制作对象的副本。对于您的情况：

```
BIDCourse *course = [self.courses[indexPath.row] copy]; 
```

并确保在 BIDCourse .m fike 中实现 copyWithZone。

```
 -(id)copyWithZone:(NSZone*) zone 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:28:16.857

利用

```
 NSString *sub = [course.subject copy];
   subjectController.course=[course copy]; 
```

实现委托 `BIDCourse`

```
 -(id)copyWithZone:(NSZone*) zone 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T08:44:08.523

问题可能出在 BIDSubjectMainTwoViewController.m 中吗？

```
subjectController.title = sub;
subjectController.course = course; 
```

在您的`BIDSubjectMainTwoViewController.m`文件中，您是否@synthesize 您的属性？

```
@synthesize title = _title;
@synthesize course = _course; 
```

您还可以将变量与 init 函数 ala 一起传递：

**BIDSubjectMainTwoViewController.h**

```
- (id)initWithTitle:(NSString *)title
          andCourse:(BIDCourse *)course; 
```

**BIDSubjectMainTwoViewController.m**

```
- (id)initWithTitle:(NSString *)title
          andCourse:(BIDCourse *)course
{
    self = [super init];
    if (self) {
        // Custom initialization
        _title=title;
        _course = course;
    }
    return self;
} 
```

# java - How to download email messages as .msg files

> ID：16210013
> 
> 赞同：2
> 
> 时间：2013-04-25T08:34:41.093
> 
> 标签：java, email, outlook

Programatically using Java, is it possible to download and save emails from Exchange Server as .msg files?

If not, are there any formats possible, which can be opened with Outlook

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:43:25.480

收到的解决方案是商业选项，对我来说现在超出了范围。我问题的第二部分是我是否可以以任何其他格式保存。我发现我可以将它们保存为 .eml 文件，该文件也可以在 Outlook 中打开。这将为我解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T05:37:40.597

[JWebServices for Exchange > 教程 > 将消息下载为 .msg 文件](http://www.independentsoft.de/jwebservices/tutorial/downloadmessagetomsgfile.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T16:43:19.210

如果您将本地 Outlook 配置文件配置为访问相关 Exchange 邮箱，则可以使用 Outlook 对象模型（请参阅 MailItem.SaveAs）。

您还可以使用[Redemption](http://www.dimastr.com/redemption)动态连接到 Exchange 邮箱 ( [RDOSession](http://www.dimastr.com/redemption/rdosession.htm) .LogonExchangeMailbox)，遍历邮件并将它们保存为 MSG 格式 ( [RDOMail](http://www.dimastr.com/redemption/RDOMail.htm) .SaveAs)。

# iphone - Delete an ALAsset

> ID：16210016
> 
> 赞同：2
> 
> 时间：2013-04-25T08:34:45.180
> 
> 标签：iphone, xcode

I'm using a photo viewer and i wan't to implement a trash button.

I already have the button ready and everything is good to go but the following:

How do I actually delete the ALAsset??

I tried searching in many places but couldn't find an answer...

Thanks,

For some reason i'm not allowed to post this question so i'm adding an irrelevant code of my trash button:

```
UIBarButtonItem *trash = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemTrash target:self action:@selector(trashButtonHit:)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T21:12:48.997

ALAsset 不是只读的：

```
editable
   Indicates whether the asset is editable. (read-only)

   @property(nonatomic, readonly, getter=isEditable) BOOL editable 
```

文档继续描述如何编辑 ALAsset（您的应用程序必须创建它）。但是文档没有提供“删除”。这有点傻，因为您的应用程序可以将照片编辑为 1x1 像素的图像，或“骷髅和交叉骨”等。

我认为发生的事情是Apple保存了原始图像，因此您无法删除图像，只能对其进行编辑。

我可以看到苹果在做什么——他们不希望应用程序删除照片并“让用户感到惊讶”。但有些应用程序可能希望拥有自己的编辑工具，包括垃圾桶。

答案是在您自己的应用程序中重新创建整个相机胶卷界面，并将图像存储在您自己的存储中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:40:17.817

您不能删除`ALAsset`，没有用于此的 API。

`ALAsset`链接到照片库中的文件，该文件位于应用程序的沙箱之外。资产库允许您访问照片库中的文件，但它们是只读的。

# java - java.lang.NoSuchMethodException 和参数化构造函数

> ID：16210019
> 
> 赞同：1
> 
> 时间：2013-04-25T08:34:49.170
> 
> 标签：java

我有一个类 Foo 如下：

```
public class Foo extends Bar
{
    public Foo(com.example.X displayState, com.example.Y parent)
    {
        super(displayState, parent);
    }
} 
```

Bar 类如下所示：

```
public abstract class Bar {

    public Bar(com.example.X displayState, com.example.Y parent)
    {
        // do something with received params
    }
} 
```

此外，还有一个具有以下方法的工厂类：

```
 public static Object getInstance(Class theSourceClass, Class theTargetClass, Class[] parameterClasses, Object[] parameterValues)
 {
     Class theClass = (theTargetClass == null) ? theSourceClass : theTargetClass;

     try
     {
         Constructor classConstructor = theClass.getConstructor(parameterClasses);
         return classConstructor.newInstance(parameterValues);
     }
     catch (NoSuchMethodException exp)
     {
         // log
     } 
```

问题是`NoSuchMethodException`总是会出现异常：

```
java.lang.NoSuchMethodException: com.example.Foo.<init>(com.example.X, com.example.Y)
at java.lang.Class.getConstructor0(Class.java:2715) 
at java.lang.Class.getConstructor(Class.java:1659)
at com.example.MyFactory.getInstance(MyFactory.java:30) 
```

我已经调试了代码，并且类信息具有有关已定义构造函数的正确详细信息；但是，这里是例外。

有人知道错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:45:41.710

以下示例将生成`Foo`. 该示例确保`Bar`存在一个接受`X`和的构造函数`Y`。

**Foo.java**

```
public class Foo extends Bar {
    public Foo(com.example.X displayState, com.example.Y parent) {
        super(displayState, parent);
    }
} 
```

**酒吧.java**

```
import com.example.X;
import com.example.Y;

public class Bar {

    public Bar(X displayState, Y parent) {
        // TODO Auto-generated constructor stub
    }

} 
```

**X.java**

```
package com.example;

public class X {

} 
```

**Y.java**

```
 package com.example;

public class Y {

} 
```

**测试.java**

```
import java.lang.reflect.Constructor;

import com.example.X;
import com.example.Y;

public class Test {
    public static void main(String[] args) {
        Class[] classes = {X.class, Y.class};
        Object[] values = {new X(), new Y()};

        Object obj = getInstance(Foo.class, null, classes, values);

        System.out.println(obj);
    }

    public static Object getInstance(Class theSourceClass,
            Class theTargetClass, Class[] parameterClasses,
            Object[] parameterValues) {
        Class theClass = (theTargetClass == null) ? theSourceClass
                : theTargetClass;

        try {
            Constructor classConstructor = theClass
                    .getConstructor(parameterClasses);
            return classConstructor.newInstance(parameterValues);
        } catch (Exception e) {

        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:56:50.947

问题的根源在于用于编译和运行时的已编译 Bar、X、Y 和工厂类的不同版本。让我解释。

所有 4 个家伙（Bar、X、Y 和工厂类）都被编译并来自 Foo 类编译的库文件。但是，生产系统总是重新编译这些类。

我创建了库，将其连接到构建路径，然后忘记了它。从技术上讲，该项目在编译期间没有错误，但反射失败。

解决方案很简单 - 删除库并使用重新生成的 Bar、X、Y 和工厂类进行 Foo 编译。

# matlab - “bwareaopen”如何工作？

> ID：16210021
> 
> 赞同：0
> 
> 时间：2013-04-25T08:34:52.040
> 
> 标签：matlab, pixels

我看到了 的文档`bwareaopen`，但让我感到困惑的是像素数。当我们说`8-neighbourhood`，这不是说`9-pixels`吗？在这个函数中，我们指定了像素的数量，如果你看到文档中提供的示例，你会发现他们提到`50-pixels`了，那仅仅是一个`10x5`窗口吗？

那么，如果我们指定像素数，该函数究竟会做什么呢？它提到删除小像素。这到底是什么意思？不是图像矩阵中的每个正方形都被视为正方形吗？在这种情况下，什么是`small`像素？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:24:40.633

您正在混合 2 个变量。在文档中，我们可以看到以下内容：

```
BW2 = bwareaopen(BW, P)
BW2 = bwareaopen(BW, P, conn) 
```

你在哪里`P`和`conn`变量。

`conn`是邻域变量。有了这个，您选择了您理解为“邻居”的值。参见示例：

```
conn=4;

- X -
X 0 X
- X - 

conn=8

X X X
X 0 X
X X X 
```

更高的数字代表更高的维度。但`P`变量是选择什么是“小”的变量。**该功能`bwareaopen`将删除小于`P`像素的白色区域。**

在文档中的示例中，您可以看到：

```
 BW = imread('text.png');
    BW2 = bwareaopen(BW, 50);
    imshow(BW); 
```

但是“50”是`P`变量，而不是`conn`. 由于`conn`未定义，它将被设置为默认值，在本例中为 8。

# windows - Windows 在什么结构中保存有关进程的工作目录（或当前目录）的数据？

> ID：16210027
> 
> 赞同：0
> 
> 时间：2013-04-25T08:35:16.643
> 
> 标签：windows, process, structure, working-directory

在阅读工作目录和脚本目录（或包含可执行文件映像的目录）目录是什么时，我开始想知道，Windows 是如何知道将哪个目录作为工作目录传递给进程的，何时当我启动一个给定的程序时，我实际上并没有指定工作目录：

![工作目录-显式-隐式-Windows](https://i.stack.imgur.com/vKTiI.png)

*   通过命令行，我只传递了*脚本*目录的位置（~作为第零个参数）。请注意，脚本目录*不是*工作目录。

我知道我可以使用[GetCurrentDir()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364934%28v=vs.85%29.aspx)来检索程序内部的工作目录，但我想知道，Windows 是否有任何“内部”结构来存储给定进程的工作目录？（如果是，是否有关于该结构的任何文档）。

我发现了以下与流程相关的结构，但似乎它们都不包含工作目录属性。

*   [处理信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684873%28v=vs.85%29.aspx)
*   [聚醚砜](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706%28v=vs.85%29.aspx)
*   [PEB_LDR_DATA](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813708%28v=vs.85%29.aspx)
*   [RTL_USER_PROCESS_PARAMETERS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813741%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:05:05.793

shell（或启动脚本的程序）调用该`CreateProcess()`函数。CreateProcess 函数具有`lpCurrentDirectory`参数。shell（或启动脚本的任何其他程序）*隐式*`lpCurrentDirectory`设置参数（〜不是通过脚本的参数）。

 *![创建过程](https://i.stack.imgur.com/hHMe9.png)

该参数稍后存储在结构的*未记录*属性中`RTL_USER_PROCESS_PARAMETERS`。[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813741%28v=vs.85%29.aspx)[链接](http://undocumented.ntinternals.net/UserMode/Structures/RTL_USER_PROCESS_PARAMETERS.html)_

*   注意这个词：*无证*（这就是为什么我首先没有在 msdn 上找到信息）。

![在此处输入图像描述](https://i.stack.imgur.com/BsE9P.png)

相关的stackoverflow问题：

*   [究竟是什么拥有“当前工作目录”？](https://stackoverflow.com/questions/9082804/precisely-what-owns-the-current-working-directory)
*   [如何在 Windows 批处理文件中设置命令的工作目录？](https://stackoverflow.com/questions/9597001/how-to-set-the-working-directory-of-a-command-in-windows-batch-file)
*   [Windows中当前目录和工作目录的区别](https://stackoverflow.com/questions/15334097/difference-between-current-directory-and-working-directory-in-windows)
*   [如何获取程序运行的目录？](https://stackoverflow.com/questions/143174/how-do-i-get-the-directory-that-a-program-is-running-from/145309#145309)*

# python - 用于 mashup 创建的 Python 包或工具

> ID：16210029
> 
> 赞同：1
> 
> 时间：2013-04-25T08:35:26.527
> 
> 标签：python, mashup

我正在尝试为网络管理创建一个混搭。python中是否有任何有助于创建混搭的包或库？请帮忙。

谢谢。

# r - 我可以从 R 代码访问 R 控制台的颜色吗？

> ID：16210032
> 
> 赞同：3
> 
> 时间：2013-04-25T08:35:28.557
> 
> 标签：r

有时我有多达 4 个 R 会话，每个会话运行不同的软件，我必须经常在它们之间进行更改。如果控制台背景（或文本）的颜色根据自动加载的代码而有所不同，这将很有帮助，这样我就可以在我的（杂乱的）桌面上轻松找到窗口并避免在其中输入错误的命令我快速移动的财务活动中的错误控制台。

有什么方法可以从 R 代码中做到这一点？目前我正在手动设置菜单并更改颜色，但这很乏味，特别是在 Windows 下，R 颜色对话框有 4 行深，有 500 种颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:43:51.747

这不是您问题的直接答案，但它可能仍然有帮助。我喜欢使用多个工作区来解决这个问题。如果您运行不同的 R 会话，将它们放在不同的工作区（或桌面）上可以很好地分离它们。我工作的平台（OS X 和 Linux）对这个工作流程有本机支持，但 Windows 必须有这样的工具（至少在几年前）。

# javascript - ng-hide 完成后添加一个函数

> ID：16210034
> 
> 赞同：0
> 
> 时间：2013-04-25T08:35:29.343
> 
> 标签：javascript, jquery, angularjs

我有一个 tr ：

```
<tr  ng-hide="func(item.status)"  ng-repeat="item in itemArray" >
<td></td>
.
.
</tr> 
```

在 Func() 中，item.status 与下拉列表 D 的值进行比较，用户可以随时更改该下拉列表的值。

我有一个 div，如果当前可见 tr 的数量 == 0，我需要显示它。我将可见 tr 的数量存储为

```
$scope.qVisible =  $("#tableid tbody tr:visible").length; 
```

只有在执行了所有 ng-hide 语句以获得正确结果后，我如何才能更新 qVisible？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:02:17.150

我将假设您在某个地方有一个下拉菜单，看起来像..

```
<select ng-model="selectedStatus" ng-options="status for status in statuses"></select> 
```

所以你的 ng-hide 可以做类似的事情

```
<tr  ng-hide="item.status !== selectedStatus"  ng-repeat="item in itemArray" >
<td></td>
.
.
</tr> 
```

在您的控制器中，您需要在 selectedStatus 上设置一个手表。

```
$scope.qVisible = false;

$scope.$watch("selectedStatus",function(newVal){
    //for loop over items.. counting the number of items that match selectedStatus
    // if count is 0, set a scope variable 
    $scope.qVisible = true;
}); 
```

在你的 html..

```
<div ng-show="qVisible">...</div> 
```

这是不接触 DOM 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:31:23.423

您可以让 $watch 监听与 data-ng-repeat 相同的功能，并运行与 hide 相同的功能：

```
function update(newValue) {
    var i;
    $scope.numberOfShownItems = 0;

    for (i = 0; i < newValue.length; i += 1) {
        if ($scope.func(newValue[i])) {
            $scope.numberOfShownItems += 1;
        }
    }

    $scope.qVisible = !!$scope.numberOfShownItems;
}

$scope.items = [1,2,3,4,5,6];    

$scope.func = function (item) {
    if (item % 2 === 0) {
        return true;
    }

    return false;
}

$scope.$watch('items', update); 
```

示例：http: [//jsfiddle.net/EgZak/](http://jsfiddle.net/EgZak/)

# highcharts - Highcharts 样式问题

> ID：16210039
> 
> 赞同：0
> 
> 时间：2013-04-25T08:35:41.520
> 
> 标签：highcharts

我希望在设计线条 Highchart 方面得到一些帮助。

我试图让这里的图表看起来像图像：

[我的图表示例](http://www.myhealthcoach.tv/HRA/aardvark.php)

但我正在努力获得块色标签？

任何帮助将非常感激！

谢谢

```
$('#container').highcharts({
        chart: {
            type: 'line',
            plotBackgroundImage: 'images/fibre.jpg',
            plotBorderWidth: 0,

            /*,
            marginRight: 130,
            marginBottom: 25*/
        },
        title: 
        {
            text    : strTitle
        },
        tooltip: 
        {
            enabled: false
        },
        xAxis: 
        {
            categories: arrXAxis,               
            title: 
            {
                text: strXTitle
            },

        },          
        yAxis: 
        {
            title: 
            {
                text: ''
            },
            labels: {
                formatter: function() {
                   // return this.value +'?'
                   return('');
                }
            },
            min: 0,
            max: 10,
            minorGridLineWidth: 0,
            alternateGridColor: null,
            gridLineWidth: 0,
            plotBands: 
            [{ 
                from: intRedStart,
                to: intRedEnd,
                color: 'rgba(229, 28, 36, 0.6)',
                label: 
                {
                    text: 'High Risk',
                    style: 
                    {
                        color: '#606060'
                    }
                }
            },
            { 
                from: intAmberStart,
                to: intAmberEnd,
                color: 'rgba(239, 140, 30, 0.6)',
                label: 
                {
                    text: 'Improvement',
                    style: 
                    {
                        color: '#606060'
                    }
                }
            },
            { 
                from: intGreenStart,
                to: intGreenEnd,
                color: 'rgba(43, 174, 115, 0.6)',
                label: 
                {
                    text: 'Healthy',
                    style: 
                    {
                        color: '#606060'
                    }
                }
            }   

            ]
        },
        legend: {
           /*
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0*/
        },
        series:
        [{
            allowPointSelect: false,    
            showInLegend: false,
            data: arrData   
        }   /*, {
                name: '1',
                data: [10]
            }, {
                name: '2',
                data: [0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: '3',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }*/]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:21:58.943

您可以为图表[http://api.highcharts.com/highcharts#chart.plotBackgroundImage](http://api.highcharts.com/highcharts#chart.plotBackgroundImage)设置 plotBackgroundImage ，然后使用 plotBands [http://jsfiddle.net/JRhaS/2/](http://jsfiddle.net/JRhaS/2/)

```
 plotBands: [{ // mark the weekend
            color: 'rgba(155,255,155,0.5)',
            from: 0,
            to: 100
        },{ // mark the weekend
            color: 'rgba(100,255,200,0.5)',
            from:100,
            to: 200
        }],
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:16:55.330

如果您查看[API doc for plotband labels](http://api.highcharts.com/highcharts#xAxis.plotBands.label)，我认为您应该能够通过使用“style”、“align”和“verticalAlign”属性来做与图像类似的事情。希望这可以帮助 ：）

编辑：似乎无法使用 labels.style 对象设置背景颜色。我猜这是因为标签是一个 SVG 元素（更具体地说是一个 tspan），所以它不支持标准 HTML 元素所做的所有 css。但是，您可以通过对齐标签“顶部”和“左侧”来更接近您的目标，并设置字体颜色。如果你真的需要背景颜色，你可以看看这个：[tspan 元素的背景颜色](https://stackoverflow.com/questions/8675223/background-color-of-tspan-element)

# jquery - 如何最小化jquery中的重复代码？

> ID：16210040
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:35:47.047
> 
> 标签：jquery, minimize

如何在 jquery 中最小化以下绑定：

```
 var profileIdDefault = "Profile ID";
    var organisationIdDefault = "Competitor ID";
    var FromDateDefault = "From Date";
    var ToDateDefault = "To Date";

    $("#startDate").focus(function () {
        if ($(this).val() === FromDateDefault) {
            $(this).attr("value", "");
        }
    });
    $("#startDate").blur(function () {
        if ($(this).val() === '') {
            $(this).val(FromDateDefault);
        }
    });

    $("#endDate").focus(function () {
        if ($(this).val() === ToDateDefault) {
            $(this).attr("value", "");
        }
    });
    $("#endDate").blur(function () {
        if ($(this).val() === '') {
            $(this).val(ToDateDefault);
        }
    });

    $("#profileID").focus(function () {
        if ($(this).val() === profileIdDefault) {
            $(this).attr("value", "");
        }
    });
    $("#profileID").blur(function () {
        if ($(this).val() === '') {
            $(this).val(profileIdDefault);
        }
    });

    $("#organisationID").focus(function () {
        if ($(this).val() === organisationIdDefault) {
            $(this).attr("value", "");
        }
    });
    $("#organisationID").blur(function () {
        if ($(this).val() === '') {
            $(this).val(organisationIdDefault);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:42:41.720

保持干燥。例子：

```
function setup(id, toCompare) {
    $(id).focus(function () {
        if ($(this).val() === toCompare) {
            $(this).attr("value", "");
        }
    }).blur(function () {
        if ($(this).val() === '') {
            $(this).val(toCompare);
        }
    });
}
setup("#startDate", FromDateDefault);
setup("#endDate", ToDateDefault);
setup("#profileID", profileIdDefault);
setup("#organisationID", organisationIdDefault); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:47:24.683

您也可以使用[占位符简单地做到这一点](http://www.w3schools.com/tags/att_input_placeholder.asp)

```
<input id="startdate" placeholder="From Date" /><br />
<input id="endDate" placeholder="To Date" /><br /> 
```

[**小提琴**](http://jsfiddle.net/4D63b/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:39:20.220

你可以这样做： -

```
function toggleValue(valToCompare) {
     if ($(this).val() === valToCompare) {
         $(this).attr("value", "");
     } else if ($(this).val() === '') {
         $(this).val(valToCompare);
     }
}

$("#startDate").focus(function() {
    this.toggleValue(FromDateDefault);
}).blur(function() {
    this.toggleValue(FromDateDefault);
}); 
```

您可以对其余元素执行相同操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:43:21.107

您可以使用 data 属性将一些数据存储在元素中。然后您可以测试与元素关联的值。例如...

```
<input id="startdate" class="focus-value" data-empty="From Date" />
<input id="enddate" class="focus-value" data-empty="To Date" /> 
```

在jquery...

```
$(".focus-value").focus(function() { 
    if $(this).val() === $(this).data('empty') { 
         $(this).attr("value", "");
    }
}); 
```

允许您组合所有焦点和模糊处理程序。

# c# - How to add CheckBox, Label and DDL to ASP.NET page programmatically?

> ID：16210046
> 
> 赞同：0
> 
> 时间：2013-04-25T08:36:02.603
> 
> 标签：c#, asp.net

I am trying to add a check box, label and DDL to ASP.NET page (aspx) from my back class in C#. I have been using `LiteralControl _liText = new LiteralControl();` to attach label so that I can show them using `this.Controls.Add(_liText);`in CreateChildControls() method.

How do I add DDL and check box to ASp.NET page from C# code so that my label is in the same line with DDL and checkbox?

I have already made DDL using this syntax:

```
List<DropDownList> _ddlCollection=new List<DropDownList>();
for (int i = 0; i < 5; i++)
            {
                _ddlCollection.Add(new DropDownList());
            } 
```

Problem is not in this.Controls.Add() which I call from CreateChildControls(). It is OnPreRender() method where I fill ddl and check box. Is LiteralControl class good for this? Here is what I have tried in OnPReRender():

```
 foreach (SPList list in web.Lists)
            {
                if (!list.Hidden)
                {
                    _liText.Text += @<input type="checkbox">;
                    _liText.Text += list.Title + "<br />";

                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:39:40.953

您的控件存在，但页面或用户控件不知道它们。

您需要将控件添加到页面

```
Page.Controls.Add(_ddlCollection); 
```

您还可以将控件添加到页面上的其他控件，例如面板。

```
panel1.Controls.Add(_ddlCollection); 
```

您正在添加一个我认为不是您想要的下拉列表。您需要改为添加 ListItems。

```
var dropDown = new DropDownList {Id = "dropDown1"};
dropDown.Items.Add(new ListItem("text", "value");

Page.Controls.Add(dropDown); 
```

为下拉列表添加标签。

```
Page.Controls.Add(new Label {AssociatedControlId = dropDown.Id, Text = "Drop me down"}); 
```

对于您的其他控件，请遵循相同的过程：

**添加复选框** 不要将 html 控件添加到文字中，除非这确实是您想要的。如果您希望能够在后面的代码中访问该复选框，则需要将其添加为 asp.net 控件。用户占位符。

```
placeHolder1.Controls.Add(new CheckBox {Id = "chkBox", Text="Tick me"}); 
```

复选框上的文本属性将是复选框的标签，并在您单击文本时勾选/取消勾选复选框。

输出应该是

```
<label for="dropDown1" >Drop me down</label>
<select id="dropDown1" >
    <option value="value" >text</option>
</select>    

<input type="checkbox" id="chkbox" />
<label for="chkbox" >Tick me</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:57:52.337

首先，您应该添加一个占位符。

```
<form id="form1" runat="server">
    <asp:PlaceHolder runat="server" ID="phMain"></asp:PlaceHolder>
</form> 
```

接下来，如果您在一行中添加了使用表格（这是一种简单但不推荐的方法，下一步将所有内容添加到页面并为页面设置 css 样式）。

```
protected override void CreateChildControls()
{
    base.CreateChildControls();
    Table table = new Table();
    for (int i = 0; i < 3; i++)
    {
        TableRow tr = new TableRow();

        TableCell tc1 = new TableCell();
        tc1.Controls.Add(new LiteralControl(String.Format("Line {0}",i)));
        tr.Cells.Add(tc1);

        TableCell tc2 = new TableCell();
        CheckBox chb = new CheckBox();
        chb.ID = String.Format("CheckBox_{0}", i);
        chb.Text = String.Format("CheckBox {0}", i);
        chb.CheckedChanged += chb_CheckedChanged;
        chb.AutoPostBack = true;
        tc2.Controls.Add(chb);
        tr.Cells.Add(tc2);

        TableCell tc3 = new TableCell();
        DropDownList ddl = new DropDownList();
        ddl.ID = String.Format("DropDownList_{0}", i);
        ddl.Items.Add("1111");
        ddl.Items.Add("2222");
        ddl.Items.Add("3333");
        ddl.SelectedIndex = i;
        ddl.Enabled = false;
        tc3.Controls.Add(ddl);
        tr.Cells.Add(tc3);

        table.Rows.Add(tr);
    }
    phMain.Controls.Add(table);
}

void chb_CheckedChanged(object sender, EventArgs e)
{
    CheckBox chb = sender as CheckBox;
    string ddlid = chb.ID.Replace("CheckBox", "DropDownList");
    DropDownList ddl = this.Page.FindControl(ddlid) as DropDownList;
    if (ddl != null)
    {
        ddl.Enabled = chb.Checked;
    }
} 
```

# heroku - What is the AWS Account Id for Heroku in Europe?

> ID：16210055
> 
> 赞同：0
> 
> 时间：2013-04-25T08:36:21.007
> 
> 标签：heroku, amazon-web-services, amazon-rds

I'm looking to move our Heroku app from the US to the EU region. As our app uses Amazon RDS as the database I'll need to add the new european Heroku EC2 cluster to the access whitelist.

Does anyone know the new AWS Account ID?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:18:28.247

没关系，我需要将我的 Amazon RDS 实例移动到 Heroku 所在的同一区域 (eu-west-1)。我现在已经开始工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T12:47:31.490

我必须应用区域选项：

rds-authorize-db-security-group-ingress --region eu-west-1 ...

# javascript - JavaScript - 获取系统短日期格式

> ID：16210058
> 
> 赞同：16
> 
> 时间：2013-04-25T08:36:30.497
> 
> 标签：javascript, date, datetime

有没有办法在 JavaScript 中获取系统短日期格式？

例如系统的短日期是否为美国格式，例如。m/d/Y 或在欧洲，例如。d/m/Y

**请注意：** 这不是关于格式化日期或根据地理位置计算日期的问题，而是关于从操作系统/系统获取格式的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:22:21.897

经过一番研究后，我得出结论，从技术上讲，不可能获得区域设置——通过这种方式，日期格式——但你可以做其他几件事。选择以下选项之一：
a) 已经提到且已过时的“toLocaleString()”函数：

```
var myDate = new Date(1950, 01, 21, 22, 23, 24, 225);
var myDateFormat = myDate.toLocaleString();
alert (myDateFormat);
```

问题：
1）您不能“myDateFormat.replace”来获取日期掩码，因为月份不是在字符串中存储为“01”、“02”等，而是作为文本存储，基于语言环境（如“二月”在英语，但它在希腊语中是“Φεβρουάριος”，谁知道在例如克林贡语中是什么）。
2) 不同浏览器上的不同
行为 3) 不同操作系统和浏览器版本上的不同行为...

b) 使用`toISOString()`函数而不是`toLocaleString()`. 您不会获得区域设置日期掩码，但会获得一个日期，您可以从中知道日期的哪一部分（即“月”或“日”在该字符串中的位置）。您还可以使用`getUTCDate()`,`getUTCMonth()`和`getUTCDay()`函数。您仍然无法分辨客户使用的日期格式，但是当你约会时可以知道你在哪个年/月/日/等处工作；使用`code`上面测试我在这里提到的功能，看看你能期待什么。

c） [在不同的浏览器文章中阅读 toLocaleString() 的不一致行为，](https://stackoverflow.com/questions/13428678/inconsistent-behavior-of-tolocalestring-in-different-browser)并使用那里描述的（恕我直言）解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-22T15:56:45.320

对于我的情况，我使用了一个自定义日期，我知道什么是日期，什么是月份，什么是年份，因此可以通过简单的替换语句来实现。

```
let customDate = new Date(2222, 11, 18);
let strDate = customDate.toLocaleDateString();
let format = strDate
    .replace("12", "MM")
    .replace("18", "DD")
    .replace("2222", "yyyy"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:54:21.493

这不可能。您可以从用户浏览器获取文化并使用一些 js 库转换为正确的日期格式。[http://code.google.com/p/datejs/](http://code.google.com/p/datejs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T18:38:17.507

我做了一个函数来确定客户日期格式。该函数确定日期格式分隔符，还确定日期格式的第 1、第 2 和第 3 部分。

```
getDateFormat(){
    // initialize date value "31st January 2019"
    var my_date = new Date(2019,0,31);
    console.log(my_date.toLocaleDateString());
    // Initialize variables
    var separator="";
    var first="";
    var second="";
    var third="";
    var date_parts = [];

    // get separator : "-", "/" or " ", format based on toLocaleDateString function        
    if (my_date.toLocaleDateString().split("-").length==3){
        separator = " - ";
        date_parts = my_date.toLocaleDateString().split("-");
    } 
    if (my_date.toLocaleDateString().split("/").length == 3) {
        separator = " / ";
        date_parts = my_date.toLocaleDateString().split("/");
    } 
    if (my_date.toLocaleDateString().split(" ").length == 3) {
        separator = " ";
        date_parts = my_date.toLocaleDateString().split(" ");
    } 

    // get first part        
    if (date_parts[0]==2019){
        first ="yyyy";
    } else if (date_parts[0] == 31){
        first = "dd";
    } else{
        if (date_parts[0].length<=2){
            first ="mm";
        }
        else{
            first="mmm";
        }
    }

    // get second part        
    if (date_parts[1] == 2019) {
        second = "yyyy";
    } else if (date_parts[1] == 31) {
        second = "dd";
    } else {
        if (date_parts[1].length <= 2) {
            second = "mm";
        }
        else {
            second = "mmm";
        }
    }

    // get third part        
    if (date_parts[2] == 2019) {
        third = "yyyy";
    } else if (date_parts[2] == 31) {
        third = "dd";
    } else {
        if (date_parts[2].length <= 2) {
            third = "mm";
        }
        else {
            third = "mmm";
        }
    }

    // assembly
    var format = first + separator + second + separator + third;
    console.log(format);
    return format;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-16T05:13:26.807

它应该做的工作...

```
function getSystemDateLocale(){
    let testDate = (new Date('2000-1-30')).toLocaleDateString()
    if (testDate.substring(0,2) == '30') return 'EU'
    else return 'US'
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-23T10:06:09.723

我创建了一个解决方法来确定用户的浏览器正在使用哪种格式。这是在 C# 中，但逻辑是相同的：

以下是步骤：

1.  首先尝试将用户的浏览器日期转换为美国格式（mm-dd-yyyy）。Convert.ToDateTime 使用美国日期格式。

2.  如果失败，则意味着用户正在使用欧洲格式 (dd-mm-yyyy)。但是，这将仅涵盖第 13 天到第 31 天，因为这不是一个有效的月份。

3.  如果转换成功，则再次检查转换日期是否介于当前 UTC 天 + 1 天（覆盖 UTC+14）和当前 UTC 天 - 1 天（覆盖 UTC-12）之间。 [https://www.timeanddate.com/time/current-number-time-zones.html](https://www.timeanddate.com/time/current-number-time-zones.html)

4.  如果转换后的日期超出当前日期范围，则表示用户的浏览器使用的是欧洲格式（dd-mm-yyyy），您可以根据需要将其转换为美国格式。

    ```
     string localeDateString = "01/11/2020"; // e.g. input is using European format (dd-mm-yyyy)
             var localeDate = new DateTime();

             try
             {
                 localeDate = Convert.ToDateTime(localeDateString);
                 //var checkTheFormatOfDateInput = localeDate.ToLongDateString();
                 var currentDateTime = DateTime.UtcNow;
                 //var currentDateTime = Convert.ToDateTime("11/01/2020");
                 //var checkTheFormatOfCurrentDate = Convert.ToDateTime("11/01/2020").ToLongDateString();
                 var currentDateTimePositive = currentDateTime.AddDays(1);
                 var currentDateTimeNegative = currentDateTime.AddDays(-1);

                 var outOfCurrentDateRange = !(localeDate.Ticks > currentDateTimeNegative.Ticks && localeDate.Ticks < currentDateTimePositive.Ticks);

                 if (outOfCurrentDateRange)
                 {
                     localeDate = DateTime.ParseExact(localeDateString, "dd/MM/yyyy", CultureInfo.InvariantCulture);
                 }
             }
             catch
             {
                 localeDate = DateTime.ParseExact(localeDateString, "dd/MM/yyyy", CultureInfo.InvariantCulture);
             }

             //var checkTheEndResultFormat = localeDate.ToLongDateString(); 
    ```

下面是包装在方法中的干净代码：

```
 private DateTime ConvertAmericanOrEuropeanDateFormatToAmericanDateFormat(string localeDateString)
    {
        var localeDate = new DateTime();

        try
        {
            localeDate = Convert.ToDateTime(localeDateString);
            var currentDateTime = DateTime.UtcNow;
            var currentDateTimePositive = currentDateTime.AddDays(1);
            var currentDateTimeNegative = currentDateTime.AddDays(-1);

            var outOfCurrentDateRange = !(localeDate.Ticks > currentDateTimeNegative.Ticks && localeDate.Ticks < currentDateTimePositive.Ticks);

            if (outOfCurrentDateRange)
            {
                localeDate = DateTime.ParseExact(localeDateString, "dd/MM/yyyy", CultureInfo.InvariantCulture);
            }
        }
        catch
        {
            localeDate = DateTime.ParseExact(localeDateString, "dd/MM/yyyy", CultureInfo.InvariantCulture);
        }

        return localeDate;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-08T06:00:40.287

在这里可以找到一个非常好的但冗长的答案：[https ://stackoverflow.com/a/9893752/2484903](https://stackoverflow.com/a/9893752/2484903)

这里有一个较短的：

```
let customDate = new Date(2222, 3, 8);
let strDate = customDate.toLocaleDateString();
let format = strDate
    .replace("04", "MM")
    .replace("4", "M")
    .replace("08", "dd")
    .replace("8", "d")
    .replace("2222", "yyyy")
    .replace("22", "yy");
console.log(format);
```

我们创建一个已知日期的日期对象，然后解析结果。

首先我们寻找`"04"`（对应于`3`日期定义）；那将是两位数的月份格式`MM`。如果没有找到，它必须是个位数格式`M`。之后对日和年做同样的事情。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-11-11T20:32:56.753

使用 Date.CultureInfo.formatPatterns.shortDate

# c - Why am I getting a segfault here?

> ID：16210059
> 
> 赞同：-1
> 
> 时间：2013-04-25T08:36:34.123
> 
> 标签：c

Code to split data into a training / test subsets is below. Note that data_points is one long vector of size items*attr, and data_labels is a vector of size items.

```
int split_data(int items, int attr, double *data_points, int *data_labels, double **split_train_points, int **split_train_labels, double **split_test_points, int **split_test_labels)
{
  srand(time(NULL));
  int i, j;
  double temp0, temp1;
  double sorter[items][2];

  *split_train_points = malloc(floor(SPLIT_PROP*items * attr) * sizeof(double));
  *split_train_labels = malloc(floor(SPLIT_PROP*items       ) * sizeof(int));

  *split_test_points  = malloc(ceil((1-SPLIT_PROP)*items * attr) * sizeof(double));
  *split_test_labels  = malloc(ceil((1-SPLIT_PROP)*items       ) * sizeof(int));

  // create a 2d array with element number in one column and a random number in the other
  for (i = 0; i < items; i++) {
      sorter[i][0] = i;
      sorter[i][1] = rand() / (double)RAND_MAX;
  }

  // sort by the random number column
  for (i = items-1; i > 0; i--) {
    for (j = 1; j <= i; j++) {
      if (sorter[j-1][1] > sorter[j][1]) {
        temp0 = sorter[j-1][0];
        temp1 = sorter[j-1][1];

        sorter[j-1][0] = sorter[j][0];
        sorter[j-1][1] = sorter[j][1];

        sorter[j][0] = temp0;
        sorter[j][1] = temp1;
      }
    }
  }

  int cutoff = floor(SPLIT_PROP*items);
  int element = 0;
  // now we have a bunch of indices in a random order.  we select the first 70% to store into our split_train datasets
  for (i = 0; i < cutoff; i++) {
    element = (int)sorter[i][0];
    *split_train_labels[i] = data_labels[element];
    printf("success!\n");
    for (j = 0; j < attr; j++) {
      printf("j: %d, data_points_element: %d\n",j,attr*element+j);

      //SEGFAULT OCCURS HERE WHEN J=4 EVERY TIME EVEN AS ELEMENT VALUE CHANGES DUE TO RANDOMNESS
      *split_train_points[attr*i+j] = data_points[attr*element+j];
      printf("j out! %d\n",j);
    }
  }

  for (i = cutoff; i < items; i++) {
    *split_train_labels[i - cutoff] = data_labels[(int)sorter[i][0]];

    for (j = 0; j < attr; j++) {
      *split_train_points[attr*(i-cutoff)+j] = data_points[attr*(int)sorter[i][0]+j];
    }
  }  

  return 0;
} 
```

As noted in the code, SEGFAULT occurs at the same line, at j=4, even though "element" is a random number.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:41:38.763

我猜这是因为这个表达`*split_train_labels[i]`并不意味着你认为它的意思。对于编译器来说是一样的`*(split_train_labels[i])`，但是你可能的意思是`(*split_train_labels)[i]`。您在多个地方都有这个问题。

数组索引的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)高于指针取消引用。

# regex - Regex to certain special characters

> ID：16210060
> 
> 赞同：2
> 
> 时间：2013-04-25T08:36:35.557
> 
> 标签：regex

Currently i have this following regex which i use to validate the name of a company/industry and its working fine

```
 /(?=[a-zA-Z0-9-]{5,25}$)^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*$/ 
```

The above regex doesnt supports for special characters like & - . _ which are valid in my case

I came up with this but it wasnt working as expected.

```
 /(?=[a-zA-Z0-9-\&\_\.]{5,25}$)^[a-zA-Z0-9\&\_\.]+(-[a-zA-Z0-9\&\_\.]+)*$/ 
```

Can someone point it out where my above regex goes wrong. Also a short explaination of the above regex wud be greatly appreciated Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:38:27.007

我不认为你必须逃脱`&`，`\&`同样的`_`方式

```
/(?=[a-zA-Z0-9-&_\.]{5,25}$)^[a-zA-Z0-9&_\.]+(-[a-zA-Z0-9&_\.]+)*$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:40:53.993

如果我没记错的话，你实际上不必在每个特殊字符上加上反斜杠，除非特殊字符是反斜杠本身或 character `-`。所以你的正则表达式是

```
/(?=[a-zA-Z0-9-&_.]{5,25}$)^[a-zA-Z0-9&_.]+(-[a-zA-Z0-9&_.]+)*$/ 
```

# c# - How should I change this source into LINQ?

> ID：16210062
> 
> 赞同：2
> 
> 时间：2013-04-25T08:36:38.500
> 
> 标签：c#, linq

```
List<Node> resultList = new List<Node>();
NodeEqualityComparer comparer = new NodeEqualityComparer();

foreach (Vector3 move in moveList)
{
    foreach (Node sight in sightList)
    {
        if (comparer.Equals((Vector3)sight.position, move))
            resultList.Add(sight);
    }
} 
```

How should I change this source into linq?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:42:46.557

```
var resultList = moveList.SelectMany(m => sightList.Where( s => comparer
                                       .Equals((Vector3)s.position, m)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:57:13.350

这[更有效](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)，因为您想要一种`join`：

```
List<Node> resultList = moveList
    .Join(sightList, m => m, s => (Vector3)s.position, (m, s) => s, comparer)
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:40:27.393

我不确定您是否真的必须将其更改为 LINQ 版本...

```
List<Node> resultList;
NodeEqualityComparer comparer = new NodeEqualityComparer();

resultList = (from m in moveList
             from s in sightList
             where comparer.Equals((Vector3)s.position, m)
             select s).ToList(); 
```

# gettext - 如何在安装前使用 gettext？

> ID：16210065
> 
> 赞同：1
> 
> 时间：2013-04-25T08:36:50.667
> 
> 标签：gettext, autotools

要使用 gettext，我需要调用 bindtextdomain()，为已安装的 .mo 文件提供补丁。例如：

```
bindtextdomain("myappname", "/opt/gnome/share/locale"); 
```

当然，我在那里使用定义，这些定义是由我的自动工具构建文件设置的。

但是，我想在运行“make install”之前使用 gettext，因为我想在“make check”测试中使用翻译。

bindtextdomain() 的路径通常包含 .mo 文件，其结构如下：

```
de/LC_MESSAGES/myappname.mo
fr/LC_MESSAGES/myappname.mo 
```

有没有什么简单的方法可以在我的本地构建中创建生成文件的结构，所以我可以在“make check”期间将本地路径传递给 bindtextdomain()？

# jquery - Create floor heat map with DWG file for website

> ID：16210066
> 
> 赞同：2
> 
> 时间：2013-04-25T08:36:59.517
> 
> 标签：jquery, html, canvas, svg, autocad

I would like to create a floor map which show foot print of user or heat map based on user movement on floor. I'm not sure how to create this heat map by using .dwg file. I also need to show this live map on my website which give real time data on map and show where users are more (currently I have only .dwg file which is auto cad file where i have complete drawing of my floor plan).

I'm open to use any technology which supports on website and can be used with JavaScript, PHP etc. Is there any tool which can create a heat map for me and generate web based format to host that on my website?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:40:12.007

如果您的问题是将 DWG 转换为画布，您可以先将 DWG 转换为 SVG。这里有一些[讨论](http://forums.autodesk.com/t5/AutoCAD-2013-2014/How-to-convert-a-drawing-dwg-file-to-svg/td-p/3506036)

如果您想要实时绘制热图，请[改为](http://www.patrick-wied.at/static/heatmapjs/)检查

# python - Scrolling camera

> ID：16210069
> 
> 赞同：2
> 
> 时间：2013-04-25T08:37:03.597
> 
> 标签：python, camera, scroll, pygame

I've been tinkering with a scrolling camera that follows the player around and have got it to follow the player. The problem is that it moves slower than the player and because of this the player wont stay in the middle of the screen.

I believe the problem is in the offset (cameraX) and have tried a few different values but haven't found any that work.

**Code:**

```
import pygame, sys, time, random, math
from pygame.locals import *

BACKGROUNDCOLOR = (255, 255, 255)

WINDOWW = 800 
WINDOWH = 600
PLAYERW = 66
PLAYERH = 22
FPS = 60
MOVESPEED = 3
YACCEL = 0.13
GRAVITY = 2
BLOCKSIZE = 30

pygame.init()
screen = pygame.display.set_mode((WINDOWW, WINDOWH), 0, 32)
mainClock = pygame.time.Clock()

testLevel = [
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,),
            (1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,)]

def createblock(length, height, color):
    tmpblock = pygame.Surface((length, height))
    tmpblock.fill(color)
    tmpblock.convert()
    return tmpblock

def terminate(): # Used to shut down the software
    pygame.quit()
    sys.exit()

def add_level(lvl, bSize): # Creates the level based on a map (lvl) and the size of blocks
    bList = [] # List of every block
    bListDisp = [] # List of every block to display    
    bTypeList = [] # List with corresponding type of block(wall, air, etc.)

    for y in range(len(lvl)): 
        for x in range(len(lvl[0])):

            if lvl[y][x] == 0: # If the block type on lvl[y][x] is '0', write "air" down in the type list
                bTypeList.append("air")
            elif lvl[y][x] == 1: # If the block type on lvl[y][x] is '1', write "wall" down in the type list
                bTypeList.append("solid")

            bList.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block that is registered
            bListDisp.append(pygame.Rect((bSize * x), (bSize * y), bSize, bSize)) #Append every block to display that is registered

    return bList, bListDisp, bTypeList

player = pygame.Rect((WINDOWW/2), (WINDOWH - BLOCKSIZE*3), PLAYERW, PLAYERH)
wallblock = createblock(BLOCKSIZE, BLOCKSIZE,(20,0,50))

lastTime = pygame.time.get_ticks()
isGrounded = False

vx = 0
vy = 0

allLevels = [testLevel] # A list containing all lvls(only one for now)
maxLevel = len(allLevels) # Checks which level is the last
currLevel = allLevels[0] # Current level(start with the first lvl)
blockList, blockListDisp, blockTypeList = add_level(currLevel, BLOCKSIZE) # A list with every block and another list with the blocks types

thrusters = True
jumping = False
falling = True
while True:
    """COLLISION"""
    collision = False
    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            if player.colliderect(blockList[i]): 
                collision = True
                if vx > 0 and not falling:
                    player.right = blockListDisp[i].left
                    vx = 0
                    print('Collide Right')
                if vx < 0 and not falling:
                    player.left = blockListDisp[i].right
                    vx = 0
                    print('Collide Left')
                if vy > 0:
                    player.bottom = blockListDisp[i].top
                    isGrounded = True
                    falling = False
                    vy = 0
                    print('Collide Bottom')
                if vy < 0:
                    player.top = blockListDisp[i].bottom
                    vy = 0
                    print('Collide Top')
            else:
                player.bottom += 1
                if player.colliderect(blockList[i]):
                    collision = True
                    #isGrounded = True
                    #falling = False
                player.bottom -= 1
    if not collision:
        falling = True
        isGrounded = False

    # Input
    pressedKeys = pygame.key.get_pressed() # Checks which keys are being pressed
    timeDiff = pygame.time.get_ticks() - lastTime # Calculates time difference 
    lastTime +=  timeDiff # Last time checked reset to current time

    # Shut-down if the ESC-key is pressed or the window is "crossed down"
    for event in pygame.event.get():
        if event.type == QUIT or event.type == KEYDOWN and event.key == K_ESCAPE:
            terminate()    

    """X-axis control"""
    if pressedKeys[ord('a')]:
        vx = -MOVESPEED
    if pressedKeys[ord('d')]:
        vx = MOVESPEED
    if not pressedKeys[ord('d')] and not pressedKeys[ord('a')]:
        vx = 0

    """Y-axis control"""
    # Controls for jumping
    if pressedKeys[ord('w')] and thrusters == True:
            vy -= YACCEL * timeDiff; # Accelerate along the y-xis when "jumping", but not above/below max speed
            if vy <= -4:
                vy = -4
            isGrounded = False # You are airborne
            jumping = True # You are jumping

    if event.type == KEYUP: # If you let go of the "jump"-button, stop jumping
        if event.key == ord('w') and vy < 0 and not isGrounded:
            jumping = False
            falling = True

    player.x += vx
    player.y += vy
    cameraX = player.x - WINDOWW/2

    # Gravity
    if not isGrounded or falling:
        vy += 0.3
        if vy > 80:
            vy = 80

    screen.fill(BACKGROUNDCOLOR)

    for i in range(len(blockTypeList)):
        if blockTypeList[i] == "solid":
            screen.blit(wallblock, (blockListDisp[i].x-cameraX, blockListDisp[i].y)) #blit the wall-block graphics

    pygame.draw.rect(screen, (0, 0, 0), player)

    pygame.display.update()
    mainClock.tick(FPS) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:48:33.550

您不会将相机偏移应用于播放器本身，而只会应用于墙块。

所以改变

```
pygame.draw.rect(screen, (0, 0, 0), player) 
```

至

```
pygame.draw.rect(screen, (0, 0, 0), player.move(-cameraX, 0)) 
```

* * *

还有一些注意事项：

使用三个列表 ( `blockList`, `blockListDisp`, `blockTypeList`) 来跟踪您的关卡是一种复杂的方式，请使用单个列表:-)

将您更改`add_level`为：

```
# use a dict to keep track of possible level blocks, so adding new ones becomes simple
types = {0: "air", 1: "solid"}

def add_level(lvl, bSize): # Creates the level based on a map (lvl) and the size of blocks
    for y in range(len(lvl)): 
        for x in range(len(lvl[0])):
            # no more if/elif
            yield types[lvl[y][x]], pygame.Rect((bSize * x), (bSize * y), bSize, bSize) 
```

您的清单：

```
blocks = list(add_level(currLevel, BLOCKSIZE)) # a single list which holds the type and rect for each block of the level 
```

然后您的碰撞检测可能如下所示：

```
while True:
    """COLLISION"""
    collision = False
    for type, rect in blocks: # list contains a tuple of type, rect
        if type == "solid":
            if player.colliderect(rect): 
                collision = True
                if vx > 0 and not falling:
                    player.right = rect.left # now you can always use the rect directly instead of accesing other lists
                    vx = 0
                    print('Collide Right')
 ... 
```

此外，绘图代码变得更简单：

```
for type, rect in blocks:
    if type == "solid":
        screen.blit(wallblock, rect.move(-cameraX, 0)) #blit the wall-block graphics

pygame.draw.rect(screen, (0, 0, 0), player.move(-cameraX, 0)) 
```

从长远来看，您可能希望使用类而不是元组，但这是另一个主题。

# html - How to get embedded code of autoplay youtube video

> ID：16210075
> 
> 赞同：0
> 
> 时间：2013-04-25T08:37:31.663
> 
> 标签：html, youtube

I need to embed a video in my project and I need to have a code for that so that it do not display any suggested videos at the end, and I need it it to be autoplayed when the page launches.

[This is the URL of the video](https://www.youtube.com/watch?v=1WCxuHDfyUo%29)

Can I get help in this please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T14:24:14.413

只需取消选中包含“建议视频”的框，然后复制并粘贴代码，它应该可以正常工作。有一个祝福的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:42:22.077

尝试这个

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/1WCxuHDfyUo?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe> 
```

# windows - 在 Windows 7 上使用给定的管理员密码安装 PostgreSQL

> ID：16210076
> 
> 赞同：0
> 
> 时间：2013-04-25T08:37:31.910
> 
> 标签：windows, postgresql, windows-7

我想将 PostgreSQL 作为我的自定义应用程序安装程序的一部分进行安装。有没有办法在不询问用户管理员密码的情况下安装 PostgreSQL，并为 PostgreSQL 提供自定义管理员密码。

稍后当应用程序需要在 PostgreSQL 数据库上执行一些“管理”活动时，应用程序知道密码是什么。

原因是，当用户在安装期间提供 PostgreSQL 的管理员密码时，当应用程序需要在数据库上执行一些管理员功能时，用户将在 6 个月后不记得它，并且用户必须提供密码.

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:25:42.273

根据[官方文档](http://www.enterprisedb.com/resources-community/pginst-guide#noninteractive)，这可以在无人值守模式下运行安装程序时使用 --superpassword 选项来完成。

一般来说，对于您正在做的事情，您可能无论如何都需要在无人值守模式下运行（从您的自定义应用程序的安装程序）。此外，您可能会在该文档中找到许多其他非常有用的开关。

祝你好运。

# asp.net - Display logged in user asp.net

> ID：16210078
> 
> 赞同：0
> 
> 时间：2013-04-25T08:37:43.737
> 
> 标签：asp.net, login

I have made a little custom log-in page in asp.net, see code:

```
 Dim strCon As String = ConfigurationManager.ConnectionStrings("Goed").ConnectionString

        'Create Connection String And SQL Statement
        Dim strSelect As String = "SELECT COUNT(*) FROM tbl_LogIn WHERE Gebruiker = @Gebruiker AND Wachtwoord = @Wachtwoord"

        Dim con As New SqlConnection(strCon)
        Dim cmd As New SqlCommand()
        cmd.Connection = con
        cmd.CommandType = CommandType.Text
        cmd.CommandText = strSelect

        Dim Gebruiker As New SqlParameter("@Gebruiker", _
                                          SqlDbType.VarChar)
        Gebruiker.Value = TxtUs.Text.Trim().ToString()
        cmd.Parameters.Add(Gebruiker)

        Dim Wachtwoord As New SqlParameter("@Wachtwoord", _
                                           SqlDbType.VarChar)
        Wachtwoord.Value = TxtPw.Text.Trim().ToString()
        cmd.Parameters.Add(Wachtwoord)

        con.Open()
        Dim result As Integer = DirectCast(cmd.ExecuteScalar(), Int32)
        con.Close()

        If result >= 1 Then
            Response.Redirect("default.aspx")
        Else
            lblMsg.Text = "Gebruikers naam en of wachtwoord kloppen niet"
        End If

    End Sub 
```

As you can see it directs to Default.aspx.

On my defaults.aspx page I have a header. In this header I want a small label to sdhow the logged in user something like: Hello [User] How can this be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:48:02.063

**使用会话：**

定向到新页面时（在 Login.aspx-in 按钮的 onClick 事件中）

```
Session["valueName"]=value; 
```

在新页面上（在您的情况下为 default.aspx）使用：

```
Label1.Text=Session["valueName"].ToString(); 
```

**或者您也可以使用 cookie：**

**创造：**

```
Response.Cookies("userInfo")("userName") = "DiederikEEn"
Response.Cookies("userInfo")("lastVisit") = DateTime.Now.ToString()
Response.Cookies("userInfo").Expires = DateTime.Now.AddDays(1) 
```

**阅读：**

```
If Not Request.Cookies("userName") Is Nothing Then
    Label1.Text = Server.HtmlEncode(Request.Cookies("userName").Value)
End If

If Not Request.Cookies("userName") Is Nothing Then
    Dim aCookie As HttpCookie = Request.Cookies("userName")
    Label1.Text = Server.HtmlEncode(aCookie.Value)
End If 
```

更多在这里：

1.  [饼干](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.100%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)
2.  [会话](http://msdn.microsoft.com/en-us/library/87069683%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:44:47.933

如果您可以在母版页中创建标题，那么您可以在 `Hello [User]` 那里添加并调用会话。

# java - 即使 XML 相同，jUnit 比较 XML 字符串也会失败

> ID：16210080
> 
> 赞同：1
> 
> 时间：2013-04-25T08:37:51.360
> 
> 标签：java, xml, servlets, junit

我正在编写一系列 jUnit 测试，以确保我的代理 Servlet 从各种来源获取客户端页面的 XML。

我的一项测试向 servlet 发送请求以获取 XML，然后将其与相同的本地副本进行比较（我认为）

我检查了每个 XML 的长度，这很有趣。

**本地复制长度 = 1753**

**远程版本长度 = 1796**

我只是在使用 assertTrue()

```
assertTrue(remote.equals(local)); 
```

任何想法为什么长度会有所不同，在 jUnit 中有没有办法我可以比较 XML 以确保它们是预期的并且在语法上是正确的？

欢迎其他建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:42:30.460

关于您比较 XML 的更好方法的问题 - 我以前使用过[XMLUnit](http://xmlunit.sourceforge.net/)，感觉效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:49:04.557

问题很可能是您有不同的换行符，例如`\n`一个字符串和`\n\r`另一个字符串。您可以在比较字符串之前删除所有换行符：

```
s1 = s1.replace("\n", "").replace("\r", "");
s2 = s2.replace("\n", "").replace("\r", "");
assertEquals(s1, s2); // should evaluate to true now 
```

# asp.net - 如果计算机空闲 5 分钟，如何关闭 asp.net 中的会话

> ID：16210084
> 
> 赞同：0
> 
> 时间：2013-04-25T08:38:06.047
> 
> 标签：asp.net, session

我正在使用 ASP.NET 开发 Web 应用程序，如果计算机空闲 5 分钟，我想关闭当前用户会话。空闲不仅仅意味着 Web 应用程序，它的完整系统意味着如果 5 分钟内没有从键盘接收到击键。

我通过 Google 获得了一些关于 VC++ 中的空闲跟踪器的信息，但我不知道如何在我的 Web 应用程序中使用该 DLL。链接[在这里](http://www.codeproject.com/Articles/1556/HOWTO-track-a-user-s-idle-time)。

请指导我如何实现这一目标。我想通过 asp.net 获得总的计算机活动时间和空闲时间，以获取我的员工生产力报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:54:46.030

ASP.Net 不适合此要求。ASP.Net 在服务器上运行，而您想要跟踪一些客户端事件。

出于安全原因，如果不使用 ActiveX 或浏览器插件，网页就无法拥有这样的权限，但它编写起来很复杂，部署起来也很复杂，并且打开了一个很大的安全漏洞窗口。

您应该创建一个经典的桌面应用程序，或者在 GPO 中搜索一个选项，可能会有一些东西。

我可以建议的简单解决方案是：

1.  创建一个注销用户的小脚本文件（搜索注销命令行）
2.  创建一个计划任务：
    1.  当达到指定的空闲时间时触发
    2.  启动您编写的脚本文件
3.  使用您想要的任何方法将计划任务部署给用户

如果您选择这种方法，我建议您移至[http://superuser.com](http://superuser.com)或[http://serverfault.com](http://serverfault.com)，这是适合此类情况的正确位置

# .net - .NET - Block main thread until there are any available threads

> ID：16210090
> 
> 赞同：1
> 
> 时间：2013-04-25T08:38:16.790
> 
> 标签：.net, multithreading, task-parallel-library, tpl-dataflow

I have a process where my main thread is reading a file and splitting it into parts. Those parts then require further processing. I would like to utilize any available threads so that the downstream processing is utilizing as much CPU (or as many cores) as possible. I don't want to create an excessive backlog from the main thread, so I need the main thread to wait to add to the queue until there is another available thread.

I see many articles like [VB.NET 4.0: Looking to execute multiple threads, but wait until all threads are completed before resuming](https://stackoverflow.com/questions/7827651/vb-net-4-0-looking-to-execute-multiple-threads-but-wait-until-all-threads-are), but they are waiting for **all threads to complete**, whereas I just need **any threads to be available**

Is this something I can tackle with the [Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd537609.aspx), or should I be manually creating threads and monitoring a threadpool?

```
Using Reader As New StreamReader(FileName)
    Do
        CurrentBlockSize = Reader.ReadBlock(CurrentBuffer, 0, BufferSize)

        RunningBuffer &= New String(CurrentBuffer)

        If RunningBuffer.Contains(RowDelimiter) Then
            LineParts = RunningBuffer.Split(RowDelimiter)

            For I As Integer = 0 To LineParts.Count - 1
                If I < LineParts.Count - 1 Then

                    'Make synchronous call that blocks until' 
                    'another thread is available to process the line'
                    AddLineToTheProcessingQueue(CurrentLine)

                Else
                    RunningBuffer = LineParts(I)
                End If
            Next
        End If

    Loop While CurrentBlockSize = BufferSize
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T21:55:59.977

将此代码粘贴到新的控制台应用程序中。

```
Imports System.Threading

Module Module1

    ' I just picked 6 randomly, not sure what is a good strategy for picking this number
    ' also, not sure what is the difference between a Worker Thread and a Completion thread
    Const MaxWorkerThreads As Integer = 6
    Const MaxCompletionPortThreads As Integer = 6

    Sub Main()

        ThreadPool.SetMaxThreads(MaxWorkerThreads, MaxCompletionPortThreads)

        Dim availableWorkerThreads As Integer
        Dim availableCompletionPortThreads As Integer

        For i As Integer = 0 To 100

            ' GetAvailableThreads returns results via output parameters
            ThreadPool.GetAvailableThreads(availableWorkerThreads, availableCompletionPortThreads)

            Dim tries As Integer = 0

            Do While (availableWorkerThreads = 0)
                ' this loop does not execute if there are available threads
                ' you may want to add a fail-safe to check "tries" in case the child threads get stuck
                tries += 1

                Console.WriteLine(String.Format("waiting to start item {0}, attempt {1}, available threads: {2}, {3}", i, tries, availableWorkerThreads, availableCompletionPortThreads))

                ' failure to call Sleep will make your program unresponsive
                Thread.Sleep(1000)

                ' call GetAvailableThreads again for the next test at the top of the loop
                ThreadPool.GetAvailableThreads(availableWorkerThreads, availableCompletionPortThreads)
            Loop

            ' this is how you pass parameters to a thread created through QueueUserWorkItem
            Dim parameters As Object() = {i}
            ThreadPool.QueueUserWorkItem(AddressOf DoWork, parameters)
            ' According to MSDN, you must Sleep after calling QueueUserWorkItem, or else the current thread will just exit
            Thread.Sleep(500)

        Next

    End Sub

    Sub DoWork(parameters As Object())
        Dim itemNumber = parameters(0)
        Dim sleepLength = itemNumber * 1000
        Console.WriteLine(String.Format("Item: {0} - sleeping for {1} miliseconds.", itemNumber, sleepLength))
        Thread.Sleep(sleepLength)
        Console.WriteLine(String.Format("Item: {0} - done sleeping.", itemNumber))
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:01:18.353

我不确定您究竟为什么要这样做，但是您可以通过使用[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)或带有`BoundedCapacity`set 的数据流块来实现非常相似的效果。

例如，如果您将容量设置为 1 并且您的消费者此时正忙，那么您将无法将第二个项目添加到队列中，直到其中一个消费者完成其当前工作并将该项目从队列中删除。这两个版本都为您提供了一种等待，直到您可以将另一个项目添加到队列中。

# performance - 哪些 Scala 特性性能较差

> ID：16210095
> 
> 赞同：5
> 
> 时间：2013-04-25T08:38:27.110
> 
> 标签：performance, scala, jvm

我最近在徘徊：由于 Scala 在 JVM 上运行，而后者针对某些类型的操作进行了优化，是否存在在 JVM 上实现效率非常低的功能，因此应该不鼓励使用哪些功能？你能解释一下为什么他们效率低下吗？

第一个候选者是函数式编程特性——据我所知，函数是带有`apply`方法的特殊类，与函数只是代码块的语言相比，这显然会产生额外的开销。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:11:38.147

性能调优是一个深刻而复杂的问题，但我立即想到了三件事。

### Scala 集合有利于表达能力，但不利于性能。

考虑：

```
(1 to 20).map(x => x*x).sum

val a = new Array[Int](20)
var i = 0
while (i < 20) { a(i) = i+1; i += 1 }  // (1 to 20)
i = 0
while (i < 20) { a(i) = a(i)*a(i); i += 1 }   // map(x => x*x)
var s = 0
i = 0
while (i < 20) { s += a(i); i += 1 }  // sum
s 
```

第一个是惊人的更紧凑。第二个速度快 16 倍。整数数学真的很快；装箱和拆箱不是。通用集合代码是通用的，并且依赖于装箱。

### Function2 仅专门用于 Int、Long 和 Double 参数。

对原语的任何其他操作都需要装箱。谨防！

假设您想要一个可以切换功能的功能——也许您想要大写字母或不想要大写字母。你试试：

```
def doOdd(a: Array[Char], f: (Char, Boolean) => Char) = {
  var i = 0
  while (i<a.length) { a(i) = f(a(i), (i&1)==1); i += 1 }
  a
} 
```

然后你

```
val text = "The quick brown fox jumps over the lazy dog".toArray
val f = (c: Char, b: Boolean) => if (b) c.toUpper else c.toLower

scala> println( doOdd(text, f).mkString )
tHe qUiCk bRoWn fOx jUmPs oVeR ThE LaZy dOg 
```

好，太棒了！除非我们

```
trait Func_CB_C { def apply(c: Char, b: Boolean): Char }
val g = new Func_CB_C {
  def apply(c: Char, b: Boolean) = if (b) c.toUpper else c.toLower
}
def doOdd2(a: Array[Char], f: Func_CB_C) = {
  var i = 0
  while (i<a.length) { a(i) = f(a(i), (i&1)==1); i += 1 }
  a
} 
```

反而？突然，它快了 3 倍。但如果它是`(Int, Int) => Int`, （或任何其他 Int/Long/Double 参数和 Unit/Boolean/Int/Long/Float/Double 返回值的排列），则不需要滚动您自己的 - 它是专门的并且以最大速度工作。

### 仅仅因为您可以轻松并行化并不意味着这是一个好主意。

Scala 的并行集合只会尝试并行运行您的代码。确保有足够的工作以使并行运行是明智之举，这取决于您。设置线程和收集结果有很多开销。举个例子，

```
val v = (1 to 1000).to[Vector]
v.map(x => x*(x+1)) 
```

相对

```
val u = (1 to 1000).to[Vector].par
u.map(x => x*(x+1)) 
```

第二张地图更快，对吧，因为它是平行的？

几乎不！由于开销，它慢了 10 倍（在我的机器上；结果可能会有很大差异）

### 概括

这些只是您通常不必担心的许多问题中的一小部分，除了代码中对性能最关键的部分。还有更多，最终你会遇到，但正如我在评论中提到的，需要一本书才能涵盖其中的相当一部分。请注意，*任何*语言都存在大量性能问题，优化通常很棘手。把你的精力放在重要的地方！

# python - django logging set context globally per request?

> ID：16210101
> 
> 赞同：23
> 
> 时间：2013-04-25T08:38:38.707
> 
> 标签：python, django, logging

Lets say I want to log like this formatting string :

```
%(levelname)s %(asctime)s %(module)s %(funcName)s %(message)s %(user_id) 
```

It can be done using this type of logging command :

`logging.error('Error fetching information', extra = { 'user_id': 22 } )`

This will add the current userid to logging messages for current request.

But the extra dict needs to be added to every logging call.

Is there a good way to add this context in a common function in django (eg Middleware, or index function of a view ), so that the extra dictionary with user id is set, and all further logging calls in the current request also log the current user.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T09:01:07.347

[https://github.com/jedie/django-tools/blob/master/django_tools/middlewares/ThreadLocal.py](https://github.com/jedie/django-tools/blob/master/django_tools/middlewares/ThreadLocal.py)上有一个 ThreadLocal 中间件，它可以帮助您解决问题，使当前请求随处可用。

所以你需要做的是将中间件添加到你的 MIDDLEWARE_CLASSES 设置中，并在这样的地方创建一个函数：

```
 from django_tools.middlewares import ThreadLocal
 def log_something(levelname, module, funcname, message):
     user = ThreadLocal.get_current_user()
     # do your logging here. "user" is the user object and the user id is in user.pk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T00:05:49.580

这是一种没有线程本地或中间件的可能方法：`views.py`例如，在您的 dict 中有一个将线程映射到请求的方法，以及一个用于序列化访问它的锁：

```
from threading import RLock
shared_data_lock = RLock()
request_map = {}

def set_request(request):
    with shared_data_lock:
        request_map[threading.current_thread()] = request 
```

创建以下过滤器并附加到需要输出特定于请求的信息的处理程序：

```
import logging
class RequestFilter(logging.Filter):
    def filter(self, record):
        with shared_data_lock:
            request = request_map.get(threading.current_thread())
        if request:
            # Set data from the request into the record, e.g.
            record.user_id = request.user.id
        return True 
```

然后，作为每个视图的第一条语句，在地图中设置请求：

```
def my_view(request, ...):
    set_request(request)
    # do your other view stuff here 
```

通过此设置，您应该会发现您的日志输出包含相关的特定于请求的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T01:15:36.203

我认为您正在寻找[自定义日志格式化程序](http://docs.python.org/2/library/logging.html#formatter-objects)。结合 mawimawi 的回答以包含线程本地信息，您的格式方法可以自动获取信息并将其添加到每个记录的消息中。

有几件事需要考虑：首先，如果您以使用线程池的方式部署，线程局部变量可能很危险，更糟糕的是，还会泄漏信息。其次，您需要谨慎编写格式化程序，以防它在没有线程本地信息的上下文中被调用。

# php - 右连接多个表odbc php

> ID：16210105
> 
> 赞同：1
> 
> 时间：2013-04-25T08:38:43.200
> 
> 标签：php, odbc, right-join

我被卡住了，我有三个要加入的表，并且我正在使用以下 SELECT 查询，它完全按照我的意愿工作，但问题是加载需要很长时间。我知道原因是因为我有两个右连接，有没有办法以不同的方式编写这个查询？

非常感谢/琳达

```
 $qu = "SELECT PULAGART.D5810 as blager, PULAGER.D1001 as D1001, 
PULAGER.D18900 as D18900, PULAGER.D1115 as D1115, PULAGER.D1021 as D1021, 
PULAGER.D1081 as D1081, PULAGER.D1031 as D1031, PULAGER.D1124 as D1124, PULAGER.D1154 as D1154, PULAGER.D1159 as D1159, PULAGER.D1040 as D1040
    FROM PULAGER
    RIGHT JOIN PUPRIREG ON (PULAGER.D1001=PUPRIREG.D25306)
    RIGHT JOIN PULAGART ON (PULAGER.D1001=PULAGART.D5801)
    WHERE (PUPRIREG.D25301 = 'REA') AND (PULAGART.D5810 = 'BS') AND (PULAGART.D5832 > 0) AND (PULAGER.D1159 <> '' AND PULAGER.D1040 <> '' AND 
(PULAGER.D1115 NOT LIKE 'SP%') AND PULAGER.D1082 = 'www') AND (".$varugrupper.") ORDER BY $orderby"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:49:37.777

您的查询很好，我建议使用索引来使查询响应快速。

您应该阅读查询优化以及如何提高查询性能。

这里有一些教程将告诉您如何减少查询响应时间。

阅读以下：

1.  [查询的性能提升](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzajq%2Frzajqkickoff.htm)。
2.  [查询优化](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzajq%2Frzajqkickoff.htm)。
3.  [减少查询执行时间](http://blog.sqlauthority.com/2009/10/07/sql-server-query-optimization-remove-bookmark-lookup-remove-rid-lookup-remove-key-lookup/)。
4.  [查询的执行时间](https://stackoverflow.com/questions/12155789/reducing-the-mysql-query-execution-time)。

# java - 如何使用 http 删除方法使用 sitebricks Web 客户端发送有效负载数据

> ID：16210107
> 
> 赞同：0
> 
> 时间：2013-04-25T08:38:50.393
> 
> 标签：java, http, sitebricks

我正在使用 sitebricks http 客户端将 http 请求发送到休息服务。我的问题是如何使用 delete 发送有效负载数据？post 方法接受数据作为参数

```
WebClient<SubnetId> client = web().clientOf(deleteUser()).transports(User.class).over(Json.class);

//client.post(user) <-- this is OK ! 

client.delete(); // <-- delete does not accepts user !!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:26:20.920

好的，伙计们，[这里](https://groups.google.com/forum/#!topic/google-sitebricks/A2OTLFKOICI)提出了一个很好的讨论，这在某种程度上是答案。

# c# - TeeChart RedCross 错误继续

> ID：16210109
> 
> 赞同：0
> 
> 时间：2013-04-25T08:38:54.387
> 
> 标签：c#, .net, teechart

这篇文章对应于你在我上一篇文章中的回答......

在我为您上传一个简单的项目之前，让我尝试一下其他方法：我注意到，当我将 Points Series 与 ColorGrid 系列交换时，会发生同样的事情，但是，当我（使用 ColorGrid 系列）使用“MyColorGrid.YValues [ gridPosition] = val" 而不是 MyColorGrid.Add(X, Y, Z) 那么它可以工作。有没有办法我可以以相同的方式使用点系列，即第一次分配所有点，然后只使用 XValues[idx] = x 和 YValues[idx] = y 来更新点？当我使用 Add 方法和 Clear 方法时，问题似乎发生了。当我只是用 XValues 和 YValues 等更新值时，问题似乎解决了！问题是，我无法让它在点系列上工作......使用 ColorGrid 系列很容易：

```
 for (int r = 0; r < 128; r++)
            {
                for (int d = 0; d < 128; d++)
                {               
                    MyColorGrid.YValues[d * 128 + r] = some_value;
                }
            }

            MyColorGrid.BeginUpdate();
            MyColorGrid.EndUpdate(); 
```

问题 1：我如何在积分系列中达到同样的效果？问题 2：如果我成功了，我如何清除/删除点，而无需在之后再次“添加（x，y）”它们？问题 3：这是使用 BeginUpdate/EndUpdate 的最佳方式吗？有什么不同？一般来说，所有可用的更新方法之间有什么区别，我该如何选择正确的方法？几个例子：

```
MyColorGrid.RefreshSeries
MyColorGrid.Repaint
MyTChart.Refresh
MyTChart.AutoRepaint 
```

问候

京东

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:39:54.827

**问题 1：我如何在积分系列中达到同样的效果？**

我建议您使用与 next 类似的代码，在更新点时以正确的方式工作。

```
Steema.TeeChart.Styles.Points points1; 
Steema.TeeChart.TChart tChart1;
Random rnd; 
public Form1()
{
    InitializeComponent();

    tChart1 = new Steema.TeeChart.TChart();
    this.Controls.Add(tChart1);
    tChart1.Aspect.View3D = false;
    tChart1.Height = 400;
    tChart1.Width = 500;
    tChart1.Dock = DockStyle.Bottom;
    points1 = new Steema.TeeChart.Styles.Points(tChart1.Chart);
    rnd = new Random();
    InitializeChart();
}

private void InitializeChart()
{

    for (int i = 0; i < 128; i++)
    {
        points1.Add(i, rnd.Next(100)); 

    }
    tChart1.Refresh();
}

private void button1_Click(object sender, EventArgs e)
{
    for (int i = 0; i < 128; i++)
    {
        points1.XValues[i] = i+1;
        points1.YValues[i] = rnd.Next(100);

    }
    points1.BeginUpdate();
    points1.EndUpdate();

} 
```

**问题 2：如果我成功了，我如何清除/删除点，而无需在之后再次“添加（x，y）”它们？**

我建议您使用方法 SetNull() 使 null 成为您不想要的点。您可以执行与下一行代码相同的操作：

```
points1.SetNull(3); 
```

**问题 3：这是使用 BeginUpdate/EndUpdate 的最佳方式吗？有什么不同？一般来说，所有可用的更新方法之间有什么区别，我该如何选择正确的方法？几个例子：**

*关于开始更新/结束更新：*

BeginUpdate 方法只重新计算一次函数，当完成添加点时，EndUpdate 方法必须与 .BeginUpdate 一起使用，以便在完成添加点时重新计算一次函数。因此，当您决定使用 BeginUpdate 更新您的系列时，您必须同时使用这两种方法。

*关于其他方法：*

方法之间的差异由帮助文档中的定义解释，您可以在下一行中看到：

**Series.RefreshSeries：** RefreshSeries 方法通知所有依赖的 Series 重新计算它们的点。每个系列都有一个 DataSource 属性。当 DataSource 是有效的 Series 或 DataSet 组件时，Series 从 DataSource 中获取所有点值并将它们添加为 Series 点。RefreshSeries 方法强制 Series 清除并再次从 DataSource 组件中获取所有点。Refreshing 过程递归遍历Series树

**Series.Repaint：**此 Series 方法强制整个父图表重新绘制。您通常不会直接调用 Repaint。当在内部更改它们的属性时，它可以在派生的 TChartSeries 组件中使用。

**TChart.Refresh：**强制控件使其客户区无效并立即重绘自身和任何子控件。

**TChart.AutoRepaint：**使用 AutoRepaint false 禁用图表重绘，同时（例如）向图表系列添加大量点。这避免了在添加点时重新绘制图表。可以重新启用自动重绘，然后在添加所有点后执行手动重绘命令。

我希望会有所帮助。如果您有任何问题，请告诉我。

谢谢，

# c# - 如何在.cs文件中为html创建onclick事件标签？

> ID：16210119
> 
> 赞同：0
> 
> 时间：2013-04-25T08:39:22.387
> 
> 标签：c#, asp.net

**如何在`.cs`html 标签的 asp.net c# 文件中创建 onclick 事件？**

例子 ：-

```
< input type="button" id="btnBeforeOk" value="Ok" name="btnBeforeOk" style="width: 90%;" /> 
```

我想在`.cs`文件中创建一个事件我们该怎么做？

## 或者

```
bool isEmail = Regex.IsMatch("nikunj@yahoo.com", @"\A(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|asia|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum|travel)\b)\Z", RegexOptions.IgnoreCase); 
```

上面的 bool isEmail 我想在`.aspx`页面中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:50:04.680

很简单。

HTML：

```
<input type="button" id="btnBeforeOk" value="Ok" runat="server"  name="btnBeforeOk" style="width: 90%;" /> 
```

现在转到您页面的 HTML 视图并双击您的按钮，它将为您生成事件，并且按钮标记将更改为以下内容：

```
<input type="button" id="btnBeforeOk" value="Ok" runat="server"  name="btnBeforeOk" style="width: 90%;" onserverclick="btnBeforeOk_ServerClick" /> 
```

您可以在后面的代码中找到以下事件：

```
 protected void btnBeforeOk_ServerClick(object sender, EventArgs e)
    {
        Response.Write("hello");
    } 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:45:26.490

我认为你应该使用：

```
<asp:Button ID="MyButton" runat="server" OnClick="YourEvent" /> 
```

并在后面的代码中做任何你想做的事情：

```
protected void YourEvent(object sender, EventArgs e)
{
  //work
} 
```

# c++ - 为什么从 DllMain 调用 WSASocket 会导致挂起？

> ID：16210131
> 
> 赞同：0
> 
> 时间：2013-04-25T08:39:55.047
> 
> 标签：c++, windows, winapi, dll, dllmain

当我的 DLL 被卸载时，我需要销毁一些对象。该对象包含一个有时调用 WSASocket 函数（用于重新连接连接）的线程。因此，我从 DllMain 调用析构函数以响应`DLL_PROCESS_DETACH`，但这会导致我的应用程序挂起。具体来说，对 WSASocket 的调用被锁定。

我知道有些函数不能从 DllMain 调用，尤其是调用 LoadLibrary 和 FreeLibrary 的函数。但是为什么 WSASocket 函数会出现同样的问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T10:02:22.030

这是因为您不应该为此使用 DllMain。许多系统过程会导致从 DllMain 调用死锁。声明一个额外的导出过程，特别是用于取消初始化您的 dll 并在 FreeLibrary 之前调用它。

另外，我建议您阅读 MSFT 的“Best Dll Practices”。远离 DllMain 的原因有很多。

# jquery - jQuery 可变宽度滑块

> ID：16210132
> 
> 赞同：0
> 
> 时间：2013-04-25T08:39:56.803
> 
> 标签：jquery, slider, carousel

我通常讨厌问这些问题，但我的时间不多了。

我更喜欢自己编写滑块和旋转木马等，但是我的时间非常有限。

尝试了许多不同的旋转木马，似乎没有一个能满足我的要求。

我需要的是一个全宽且具有固定高度的旋转木马。显示的项目应该是可变的，项目的宽度也是可变的，但是滑块的宽度应该总是被滑块项目填充，即使它们只是部分显示并且也应该是圆形的。

我创建了一个 JSfiddle： http: [//jsfiddle.net/BFS3q/](http://jsfiddle.net/BFS3q/)它可以更好地解释我的问题，我使用了 caroufredsel 插件，它几乎可以满足我的需要，但并不总是部分显示项目。

也许如果有人知道如何用 caroufredsel 做到这一点，这就是我使用的：

```
$("#slider").carouFredSel({
        width: "100%",
        align:"left",
        height: 150,
        direction :"left",
        items: {
            minimum: 1,
            start: 8,
            width: "variable",
            height: 150,
            visible: "variable"
        },
        scroll: {
            items: 1,
            easing: "linear"
        },
        auto: true,
        next: "#next",
        prev: "#prev"
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:46:18.797

[http://jquery.lemmonjuice.com/plugins/slider-variable-widths.php](http://jquery.lemmonjuice.com/plugins/slider-variable-widths.php)

我这是你在找什么？

# css - CSS menu hide current submenu when other menu item is hovered

> ID：16210135
> 
> 赞同：0
> 
> 时间：2013-04-25T08:40:09.997
> 
> 标签：css, joomla, menu

I'm designing a new website, but I currently have the following problem:

In the menu, when the I open a page with a sub menu, and then hover a menu item without sub menu I want to display an empty gray bar. But I've got no clue how to do this. To reproduce this go to this page: [http://www.kvvikingvenlo.nl/joomla/nl/aluminium-gietwerk.html](http://www.kvvikingvenlo.nl/joomla/nl/aluminium-gietwerk.html) and then hover over the home item in the menu. (Home has no sub menu, so I want the gray bar to be empty.)

**Edit**

I'm sorry, my question seems to be quite hard to understand. Lets try again:

On the web page [http://www.kvvikingvenlo.nl/joomla/nl/aluminium-gietwerk.html](http://www.kvvikingvenlo.nl/joomla/nl/aluminium-gietwerk.html) there is a menu which is always displays the current sub menu, until you hover a different sub menu. This part is already working.

But when you hover Home, you will still see:"ONTWIKKELING, HOGEDRUK SPUITGIETEN, CNC-NABEWERKING and MONTAGE".

These are the sub menu items of the parent "Processen" (which is the current active one)

Because home does not have any sub menu items, i want this bar to be empty instead.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:05:01.500

我最终在 joomla 中创建了一个模板覆盖，以便它在菜单中插入一个空的 ul 标签。我认为这将是我拥有的最干净的选择。

要进行模板覆盖，请将文件 \modules\mod_mainmenu\tmpl\default.php 复制到 \templates\YOURTEMPLATE\html\mod_mainmenu\default.php

然后在您复制的文件中找到此代码：

```
if (isset($path) && $node->attributes('id') == $path[0]) {
    $node->addAttribute('id', 'current');
} else {
    $node->removeAttribute('id');
}
$node->removeAttribute('rel');
$node->removeAttribute('level');
$node->removeAttribute('access'); 
```

并在它们之前添加这些行。

```
if (($node->name() == 'li') && !isset($node->ul)) {
    $node->addChild('ul ');
    $node->addChild('/ul');
} 
```

希望我帮助了任何人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:10:25.023

我认为你必须通过 javascript 来做到这一点，你有你`.active`，`ul`那是你的父母`li`，你的父母是你的父母，`a`所以为了改变子标签来显示，就像`.active`你通过 javascript 做的那样。我希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:18:39.727

如果我理解正确，如果菜单部分没有子菜单，您只想显示下方的灰色条。

这个菜单是用 CSS 的嵌套 UL 和 LI 标签完成的，这是一种非常常见的技术。不过，我应该警告您，您链接的页面中的效果在 IE <9 中无法满足您的需求。有一些纯 CSS 菜单示例可以很容易地实现此目的。

如果您不想（或不知道）如何更改它，因为这意味着弄乱 Joomla 的内部工作，我认为您可以做的是：首先在 HOME 下的“假”LI 内创建一个空 SPAN，然后设置特定的（通过HTML 中的`class`或`id`属性）SPAN，宽度等于灰色条。然后设置`display:block;`为 SPAN。当`:hover`事件发生在 SPAN 的父类中时，必须这样做。

例如：如果您将`class`SPAN 标记设置为*hideme*：

`.menumenu li ul li .hideme { width: [width of the grey bar]; }`

`.menumenu li:hover ul li .hideme { display:block; }`

它不漂亮，但它应该工作。

**编辑**我有正确的想法，但执行错误（早上太早）

您真正需要的是在 HOME LI（即*fakeUL*）下为假 UL 提供唯一标识符，在其中嵌套一个 LI 以保存 SPAN 标签，使用`width`属性定义该 SPAN 标签的大小，然后定义 CSS可能是这样的：

`.menumenu li .fakeUL li span { width: [width of the grey bar]; }`

`.menumenu li:hover .fakeUL li span { display:block; }`

# python - Python: nested class with static method fails

> ID：16210139
> 
> 赞同：0
> 
> 时间：2013-04-25T08:40:21.287
> 
> 标签：python, class, python-2.7, super

What is *wrong* with the following code?

```
class A:
    def A_M(self): pass
    class B:
        @staticmethod
        def C(): super(B).A_M() 
```

error (Python 2.7.3):

```
>>> a = A()
>>> a.B.C()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "..x.py", line 36, in C
    def C(): super(B).A_M()
NameError: global name 'B' is not defined 
```

**Edit**:
the solution was simple as this:

```
class A:
    def A_M(self): pass
    class B:
        @staticmethod
        def C(): A().A_M()                 #use of A() instead of supper, etc. 
```

**Important Note** that there is an issue with this solution. If you change the name of super class (i.e. `A`) then you will have to update all uses inside itself as `A` :)).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:46:26.070

```
class A(object):
    def foo(self):
        print('foo')

    @staticmethod
    def bar():
        print('bar')

    class B(object):
        @staticmethod
        def bar(obj):
            # A.foo is not staticmethod, you can't use A.foo(),
            # you need an instance.
            # You also can't use super here to get A,
            # because B is not subclass of A.
            obj.foo()
            A.foo(obj)  # the same as obj.foo()

            # A.bar is static, you can use it without an object.
            A.bar()

class B(A):
    def foo(self):
        # Again, B.foo shouldn't be a staticmethod, because A.foo isn't.
        super(B, self).foo()

    @staticmethod
    def bar():
        # You have to use super(type, type) if you don't have an instance.
        super(B, B).bar()

a, b = A(), B()

a.B.bar(a)
b.foo()
B.bar() 
```

有关. [_](http://www.artima.com/weblogs/viewpost.jsp?thread=236278) _`super(B, B)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:41:27.097

您需要使用完全限定的名称。此外，在 python 2.7 中，您需要使用`(object)`，否则`super(A.B)`会给出`TypeError: must be type, not classobj`

```
class A(object):
    def A_M(self):
        pass

    class B(object):
        @staticmethod
        def C():
            super(A.B).A_M() 
```

最后，`super(A.B)`基本上就是`object`这里了。你的意思是`B`继承自`A`？还是您只是在寻找`A.A_M()`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T10:09:54.517

一个后来者，将 B 封装在 A 中的简单方法是：

```
class A:
    def A_M(self):
        return "hi"

    class B:
        @staticmethod
        def C():
            return A().A_M()

a = A()
print a.B().C() 
```

不确定这是你需要的，但问题仍然没有解决，所以我猜到了。

# c++ - Inputting into a char* declared earlier crashes the program while doing that into a 'just-declared' char* doesn't. Why?

> ID：16210141
> 
> 赞同：0
> 
> 时间：2013-04-25T08:40:25.800
> 
> 标签：c++, pointers, char

This code crashes the program

```
#include <cstdio>
int main()
{
    char *name1;
    char *name2 = "Mark";
    gets(name1);
    puts(name1);
    return 0;
} 
```

whereas this doesn't

```
#include <cstdio>
int main()
{
    char *name1 = "Mark";
    char *name2;
    gets(name2);
    puts(name2);
    return 0;
} 
```

Why ? I am using MinGW with Code::Blocks IDE.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:41:48.537

你很幸运，一个崩溃而另一个没有。
这两个程序都会产生未定义的行为。

```
char *name2;
gets(name2); 
```

您需要将指针指向一个有效且足够大的内存，以便能够对其进行写入。你只是在写一个未初始化的指针。这会导致未定义的行为。**未定义的行为不要求崩溃，它的字面意思是任何行为都是可能的**，因为在你的情况下，它有时可能会崩溃，也可能不会，但它仍然是一个不正确的程序。

理想的解决方案是简单地使用`std::string`.
如果您坚持使用`char *`，则需要将此指针指向有效内存。例如

```
char myArr[256];
char *name2 = &myArr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:53:25.943

您必须为输入提供内存，但您没有。如果你想坚持*gets*和*puts*，你应该更改`char *name`或`char name[100]`分配内存：

```
char *name = new char[100];
...
delete name; 
```

如果您需要超过 100 个字符（包括字符串末尾的 \0 字符），则必须相应地增加大小。

在 C++ 中，使用`std::string`很可能是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:41:44.287

两者都是未定义的行为，它是否会崩溃，是相当幸运的问题。

# c++ - 在 OpenGL 中使用 QTImage

> ID：16210151
> 
> 赞同：1
> 
> 时间：2013-04-25T08:40:46.303
> 
> 标签：c++, qt, opengl, include

好的，所以我得到了一些代码，需要进行设置。我不熟悉c ++，包括说：

```
#include <Qt\qimage.h>
#include <Qt\qgl.h>
#include "imageloader.h" 
```

我已经查看了它，并且在 QT-Image 网站上有下载，但是我没有在我的计算机（在大学）上安装该程序的权限。

我做错了吗？或者有没有我可以使用的标题？这些是应用程序中唯一缺少的组件（也需要 glut、gml 和 glew）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:52:54.670

您将需要下载 Qt 的安装。即使您找到了 的头文件`qimage`，它也会包含 Qt 其他部分的头文件，并且您肯定需要 Qt 库将它们链接到您的应用程序中。

您可以将其下载并安装到家用计算机上的外部硬盘（或 USB 闪存），您可以设置大学计算机的环境以在该位置搜索头文件。

# javascript - 如何在包含堆叠面积图的 highstock（highcharts）上制作多窗格？

> ID：16210152
> 
> 赞同：2
> 
> 时间：2013-04-25T08:40:47.103
> 
> 标签：javascript, highcharts, highstock

我想知道是否可以将两个窗格视图（如[本例](http://www.highcharts.com/stock/demo/candlestick-and-volume)）与堆叠面积图一起使用？

我试图让它在小提琴[http://jsfiddle.net/g2xDj/2/](http://jsfiddle.net/g2xDj/2/)中工作，但是没有显示堆叠面积图。

```
 var stacked_data =  [{
                    name: 'Asia',
                    data: [[1364292000,502], [1364294000,635], [1364296000,809], [1364298000,947], [1364300000,1402], [1364302000,3634], [1364304000,5268]]
                }, {
                    name: 'Africa',
                    data: [[1364292000,106], [1364294000,107], [1364296000,111], [1364298000,133], [1364300000,221], [1364302000,767], [1364304000,1766]]
                }, {
                    name: 'Europe',
                    data: [[1364292000,163], [1364294000,203], [1364296000,276], [1364298000,408], [1364300000,547], [1364302000,729], [1364304000,628]]
                }];

               var line_data = [[1364292000,502], [1364294000,635], [1364296000,809], [1364298000,947], [1364300000,1402], [1364302000,3634], [1364304000,5268]];

            // create the chart
            $('#container').highcharts('StockChart',

   {
                chart : {
                    //type: 'area',
                    renderTo : 'container',
                    zoomType: 'x'
                }, 
                plotOptions: {
                     area: {
                         stacking: 'normal'
                     }
                 },
                rangeSelector: {
                    selected: 1
                },

                title: {
                    text: 'AAPL Historical'
                },

                yAxis: [{
                    title: {
                        text: 'Load'
                    },
                    height: 200,
                    lineWidth: 2
                },
                {
                   title: {
                        text: 'Load 2'
                   },
                   top: 300,
                   height: 100,
                   offset: 0,
                   lineWidth: 2    
                }
                ],
                series: [
                    { 
                      name: "area",
                      data: stacked_data,
                      yAxis: 0
                    },{
                      name: "line",
                      data: line_data,
                      yAxis: 1
                    }]
            });
        }); 
```

有人有想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:19:11.620

在您的示例中，您的系列结构不正确，因为在stackedArea 中您尝试为数据推送“系列”结构。

另外，您应该将所有时间戳乘以 1000 以实现 JS 时间戳格式。

更新示例：http: [//jsfiddle.net/g2xDj/4/](http://jsfiddle.net/g2xDj/4/)

```
 var series = [{
        name: 'Asia',
        data: [
            [1364292000000, 502],
            [1364294000000, 635],
            [1364296000000, 809],
            [1364298000000, 947],
            [1364300000000, 1402],
            [1364302000000, 3634],
            [1364304000000, 5268]
        ]
    }, {
        name: 'Africa',
        data: [
            [1364292000000, 106],
            [1364294000000, 107],
            [1364296000000, 111],
            [1364298000000, 133],
            [1364300000000, 221],
            [1364302000000, 767],
            [1364304000000, 1766]
        ]
    }, {
        name: 'Europe',
        data: [
            [1364292000000, 163],
            [1364294000000, 203],
            [1364296000000, 276],
            [1364298000000, 408],
            [1364300000000, 547],
            [1364302000000, 729],
            [1364304000000, 628]
        ]
    }];

    var line_data = {
        type:'line',
        yAxis:1,
        data:[
        [1364292000000, 502],
        [1364294000000, 635],
        [1364296000000, 809],
        [1364298000000, 947],
        [1364300000000, 1402],
        [1364302000000, 3634],
        [1364304000000, 5268]
                     ]}; 
```

series.push(line_data);

# database - PHP Geek 需要数据库设计协助

> ID：16210155
> 
> 赞同：0
> 
> 时间：2013-04-25T08:40:58.127
> 
> 标签：database, database-design

像大多数开发人员一样，我认为我一直在努力创建最优化的代码和数据库模式。

但是 - 我有一种感觉，我过度设计了我想要创建的数据库模式。

我有一个网络应用程序，它会在很短的时间内拥有很多用户。用户的形式有客户、供应商、系统用户。它处于一个可能快速增长的行业。

在以前的模式中，我将这些用户分隔在不同的表中。

但是，我现在正在考虑使用一张名为 PEOPLE 的桌子。

会有这些表：

人，联系方式，住宅

它们通过数据透视表关联，即：PivotContacts PivotResidences。

我的问题是这被认为是好/坏的设计。？我是否过度思考，过度设计了一个简单的设置。

表格 People 将呈指数增长，并将保存大量数据 - 其他表格将与之相关。

我真的很欢迎意见。

我的设计是否会扩展到 10 万条记录并保持中等速度。？* 最初将从 1000 条记录开始，并且可能会在 1 年内增长到大约 100,000 条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:58:48.853

对于可以登录并可能被跟踪（上次登录、密码重试失败）的用户，最好有一个小表，也许还有一个单独的表用于写入（读取和写入数据之间的区别）。

任何有一般人的表都有收集大量字段的趋势。保存在不同表中的功能区别使数据保持整洁，供应商表上的索引更好/可能更优化，供应商数据的更改也是如此。SQL JOIN 是可管理的，并且可以使用 SQL 视图来完成。

所以我会选择一个薄基表 People 和 1:1 表 SupplierPeople、SystemUsingPeople 等等。并考虑确实发生了哪些更改：更新、插入、读取表的频率。

还要考虑修改数据库方案，添加一个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:53:21.817

如果您只担心解决方案的可扩展性，那么 100K 记录并不是一个特别大的数字，这取决于一些（重要的）假设。

在现代硬件上运行的现代数据库软件（我假设你会使用 MySQL，因为你说你是 PH​​P 手）可以轻松处理具有数百万条记录的数据库，只要你有一个精心设计的表布局，并且可以使用索引。

您的设计 - 将“人”链接到“联系人”和“住所”可以使用主键/外键加入；这应该很容易扩展到您的要求。

不过，值得考虑您将要运行的可能查询 - 我猜您将需要能够按姓名、地址、城市或上次联系日期等搜索“人”。这个建议您可能需要[自由文本搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)- 一旦您获得大量记录，使用`where name like '%Jones%'`可能会很慢。

您可能还需要考虑存档/历史策略 - 您是否需要存储某人住所的历史（以便您可以在他们下订单时找出他们居住的地方）？

# android - 将附加值传递给 Android GCM onRegistered 方法

> ID：16210157
> 
> 赞同：1
> 
> 时间：2013-04-25T08:41:01.360
> 
> 标签：android, google-cloud-messaging

我想将附加值传递给 GCM`onRegistered`方法，因为我想检查用户是否未注册，然后我想调用`GCMRegistrar.register(RegistrationActivity.this, SENDER_ID);`并将现有用户 ID 传递给`onRegistered`方法。所以我的问题是如何传递一个附加值，以便我可以在`onRegistered`.

```
package bd.org.basis.projectmanagement;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;
import static bd.org.basis.projectmanagement.RegistrationActivity.SENDER_ID;;

public class GCMIntentService extends GCMBaseIntentService {
    public GCMIntentService() {
        super(SENDER_ID);
    }

    @Override
    protected void onError(Context context, String error) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Log.e("onMessage", "See later");
        String title=intent.getStringExtra("title");
        String type=intent.getStringExtra("type");
        String msg=intent.getStringExtra("msg");
        String url=intent.getStringExtra("url");

        Log.e("onMessage", title+"--"+type+"--"+msg+"-- "+url);

    }

    @Override
    protected void onRegistered(Context context, String token) {
        // TODO Auto-generated method stub
        Log.e("onRegistered", token);

    }

    @Override
    protected void onUnregistered(Context context, String token) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:32:56.000

您无法向 onRegistered 添加参数，因为您无法更改要覆盖的方法的签名。

你为什么要这样做？您希望在应用程序已注册时调用 onRegistered 吗？调用 GCMRegistrar.register 会做到这一点，如果应用程序已经注册，现有的注册 id 无论如何都会传递给 onRegistered，所以你不需要新的参数。

# php - 从数据库中检索数据以与组合框绑定

> ID：16210162
> 
> 赞同：0
> 
> 时间：2013-04-25T08:41:12.743
> 
> 标签：php, javascript, html, combobox

脚本包含将增加 html 中定义的行元素的函数

```
 <SCRIPT language="javascript">
      function addRow(tableID) {
        var rowNumber = document.getElementById('rowNumber');
        rowNumber.value = parseInt( rowNumber.value ) + 1;

        }
        </script> 
```

表包含将通过单击添加按钮自动生成的行。

我想使用 P_Name[] 和 Make[] 的值从数据库中检索数据以与组合框 Model[] 绑定

获得的错误：- 注意：未定义的变量：在第 117 行的 C:\xampp\htdocs\PhpProject1\transaction1.php 中生成

注意：未定义的变量：C:\xampp\htdocs\PhpProject1\transaction1.php 中的 P_Name 第 117 行

```
 <TABLE id="dataTable"  border="1" cellspacing="10">
         <input id="rowNumber" type="hidden" name="row" value="1"/>
         <TR>
         <TD> 1 </TD>
         <td><SELECT name="P_Name[]" class="input_text">
                <option value="Camera">Camera</option>  
                  <option value="DVR">DVR</option>  
                   <option value="PS">Power supply</option>  
                    <option value="HD">Hard disk</option>  
                     <option value="wire">Wire</option>  
             </select>
         </td>
         <td> <select name="Make[]" class="input_text">
                  <option value="Electronic eye">Electronic eye</option>  
                   <option value="Viewmax">Viewmax</option>  
                   <option value="Hikvision">Hikvision</option>  
                   <option value="Sony">Sony</option>  
             </select></td>

             <TD> <?php 

              $con = mysqli_connect('localhost','root','','danisco');   
                  if (mysqli_connect_errno($con))
                     {
                       echo "Failed to connect to MySQL: " . mysqli_connect_error();
                         }
                   else  {
               $query = mysqli_query($con, "SELECT p_model FROM product WHERE p_make = '$Make' AND p_name = '$P_Name' " );
                echo '<select name="Model[]" class="input_text">';
                    while ($row = mysqli_fetch_array($query)) 
                       {  

                          echo '
                                <option value="'.$row['p_model'].'">'.$row['p_model'].'</option>
                                 ';

                   }
                  }
             ?>
             </TD> 
        <TD> <INPUT name="qty[]"type="text" /> </TD>
        <TD> <INPUT name="sno[]"type="text" /> </TD>

        </TR>
        </TABLE>
        <center><INPUT type="button" value="Add Row" onclick="addRow('dataTable');"/>  </center>
        <label><span><b>Delivery Boy</b></span><input name="d_boy" class="input_text" type="text" size="20" />  
        <br><input type="submit" id="button1"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:55:59.090

您必须在不同的文件中使用 j-query 发布功能和使用 php。将无法检索品牌和产品的价值。

# windows-7 - 是否可以在 Windows 7 和 Ruby 2.0.0 上设置 Octopress？

> ID：16210170
> 
> 赞同：3
> 
> 时间：2013-04-25T08:41:28.683
> 
> 标签：windows-7, ruby-1.9.3, octopress, ruby-2.0

是否可以在 Windows 7 和 Ruby 2.0.0 上设置 Octopress？

或者-我是否被迫安装 R​​uby 1.9.3 ？

我在工作 - Windows 7 64。

谢谢...

# c++ - 动态库不使用 Visual Studio 2012 生成 lib 文件

> ID：16210178
> 
> 赞同：0
> 
> 时间：2013-04-25T08:41:47.850
> 
> 标签：c++, window

我正在使用 Visual Studio 2012，我在不使用 MFC 的情况下创建了 dll，它生成了 dll。但是当我指定使用以下选项在特定目录中生成一个 lib 文件时：- 转到 proeperties 页面->高级->导入库 ../../../lib/myapp.lib

它没有在指定文件夹中生成 lib 文件。请帮我 。

感谢和问候维卡斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T07:55:06.470

刚刚解决了一个类似的问题。Visual Studio 不会在不指示要在 dll 中公开哪些对象的情况下创建 .lib 文件。您需要像这样创建一个 win 导出标头：

```
#ifndef BLABLABLA
#define BLABLABLA

#ifdef MYAPPLIB_EXPORTS
#define MYAPPLIB_API __declspec(dllexport)
#elif defined(MYAPPLIB_EXPORTS_STATIC)
#define MYAPPLIB_API 
#else
#define MYAPPLIB_API __declspec(dllimport)
#endif 

#endif // !BLABLABLA 
```

然后，您需要将 MYAPPLIB_EXPORTS 声明为预处理器宏。在其他 API 头文件中包含这个新的头文件后，对于要在 API 中公开的每个类或方法，您可以将 MYAPPLIB_API 添加到它们的声明中，例如：

```
class MYAPPLIB_API MyClass{ ... }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T10:48:45.900

```
 calculatelibrary.h 
```

/* 默认情况下，DLL 的新建项目模板将 PROJECTNAME_EXPORTS 添加到为 DLL 项目定义的预处理器符号中。在此示例中，CALCULATELIBRARY_EXPORTS 是在构建 calculateLibrary DLL 项目时定义的。定义 CALCULATELIBRARY_EXPORTS 符号时，CALCULATELIBRARY_API 符号会在此代码中的成员函数声明上设置 __declspec(dllexport) 修饰符。此修饰符告诉编译器和链接器从 DLL 中导出函数或变量，以便其他应用程序可以使用它。当 CALCULATELIBRARY_EXPORTS 未定义时——例如，当客户端应用程序包含头文件时——CALCULATELIBRARY_API 在成员函数声明中定义 __declspec(dllimport) 修饰符。此修饰符优化了应用程序中函数的导入。了解更多信息[![在此处输入图像描述](https://i.stack.imgur.com/hc4ly.jpg)](https://i.stack.imgur.com/hc4ly.jpg)

*/

```
 #ifndef _calculate_library_h
    #define _calculate_library_h

    #ifdef CALCULATELIBRARY_EXPORTS
    #define CALCULATELIBRARY_API _declspec(dllexport)
    #else
    #define CALCULATELIBRARY_API _declspec(dllimport)
    #endif

    namespace calculatelibrary
    {
          class CALCULATELIBRARY_API clsCalculateLibrary{

               // Returns a + b  
              double  Add(double a, double b);  
        };
    }
    #endif _calculate_library_h

    // CalculateLibrary.cpp : Defines the exported functions for the DLL application.
    //

    #include "stdafx.h"
    #include "CalculateLibrary.h"

    namespace calculatelibrary
    {

            double clsCalculateLibrary::Add(double a, double b)  
        {  
            return a + b;  
        }  

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T19:00:20.277

请参阅以下内容：您可能需要声明 /EXPORTS ( [http://msdn.microsoft.com/en-us/library/7k30y2k5.aspx](http://msdn.microsoft.com/en-us/library/7k30y2k5.aspx) )

[http://msdn.microsoft.com/en-us/library/67wc07b9.aspx](http://msdn.microsoft.com/en-us/library/67wc07b9.aspx) 见“备注”

# mysql - magento enterprise_targetrule/index 模型不保存

> ID：16210180
> 
> 赞同：0
> 
> 时间：2013-04-25T08:41:51.740
> 
> 标签：mysql, magento, model

我正在执行这段代码：

```
$model1 = Mage::getModel('enterprise_targetrule/index')->load(5511);
var_dump($model1);
$model2 = Mage::getModel('enterprise_targetrule/index')->
    load(5511)->
    setFlag('0')->
    save();
var_dump($model2);
$model3 = Mage::getModel('enterprise_targetrule/index')->load(5511);
var_dump($model3);
die(); 
```

var_dump 调用的输出正是我所期望的：`$_data[flag]`对于 1 是 1 ，对于and是`$model1`0，对于`$model2`and是 1 ，对于 $model3 是 0。`$model3``$_origData[flag]``$model1``$model2`

到目前为止，一切看起来都完全正确。但是，当我（在运行此代码后立即）`select * from enterprise_targetrule_index`在我的数据库上执行时，我得到了以下结果：

```
mysql> select * from enterprise_targetrule_index;
+-----------+----------+-------------------+---------+------+
| entity_id | store_id | customer_group_id | type_id | flag |
+-----------+----------+-------------------+---------+------+
|      5511 |        7 |                 0 |       1 |    1 | 
```

为什么？

为什么flag没有更新？模型正确，所有字段正确，保存和加载调用都成功并返回完美结果，但数据库没有更新！就像我 save() 的更改没有被写入，但仍然可以以某种方式加载，至少在该脚本中。这里发生了什么？这个模型有什么特别之处，使它无法保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:16:51.553

原来这个原因，是模具。执行 sql 查询时，它们仅在内存中执行——除非进程成功终止，否则它们不会被写入数据库。因为我使用的是 die()，所以这会阻止编写查询。

最初我对此感到震惊，因为它完全发生在内存中而不是数据库中。一旦它被写入，它确实作为一个事务下降，但事务都是同时写入的，这就是为什么我没有在 mysql 常规日志中看到回滚命令 - 从技术上讲它不是回滚，但是甚至阻止写入第一个查询。非常奇怪，并且确实使测试变得更加困难，但请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:26:55.153

$model2 = Mage::getModel('enterprise_targetrule/index')->load(5511);
$model2->setFlag('0');
$model2->保存（）；
回声 $model2->getFlag();

如果您使用 var_dump 它会显示整个对象..

# php - PHP 会话注册错误

> ID：16210184
> 
> 赞同：0
> 
> 时间：2013-04-25T08:42:09.257
> 
> 标签：php, session

我希望我能得到一些帮助。当我尝试登录该系统时，我收到会话注册错误： ***致命错误：在第 18 行的 C:\xampp\htdocs\check.php 中调用未定义的函数 session_register()*** 顺便说一句，我刚刚开始学习 PHP所以我是那里的新手:)

有一个代码Register.php：

```
<?php

include('MySQL.php');
include('password.php');

$Username = $_POST['user'];
$Password = $_POST['password'];
$Re_Password = $_POST['password2'];

if($Username == "")
{
die("You don't enter a username!");
}

if($Password == "" || $Re_Password == "")
{
die("You didn't enter one of your passwords!");
}

if($Password != $Re_Password)
{
die("Your passwords don't match! Try again.");
}

$query = mysql_query("SELECT * FROM users WHERE username='$Username'");

if(mysql_num_rows($query) != 0)
{
echo "Username already exists";
}
else
{
$hash = password_hash($Password, PASSWORD_BCRYPT);
if (password_verify($Password, $hash)) {
if(!mysql_query("INSERT INTO users (username, password)
VALUES ('$Username', '$hash')"))
{
die("Connection problems!");
}
echo "<center>";
echo "Registration was successfull!<br>";
echo "Your user name: $Username<br>";
echo "<a href='login.php'>Login to the system</a>";
echo "</center>";
}
}

?> 
```

检查.php：

```
<?php

ob_start();

include('MySQL.php');

$username=$_POST['user']; 
$password=$_POST['password']; 

$query = mysql_query ("SELECT * FROM users WHERE username='$username' AND password='$password'");
if(mysql_num_rows($query) == 1)
{

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("username");
session_register("password"); 
header("location:success.php");
}
else {
echo "Wrong Username or Password";
}
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:44:32.680

`include('MySQL.php');`
放之前`session_start()`。
接下来，而不是像这样`session_register("username");`
放置`$_SESSION['username'] = $username;`和阅读它：`echo $_SESSION['username']`.
`session_register`已弃用，现在从 5.4.0 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:43:33.457

您不能使用 session_register 它在 php 最新版本中已被弃用。

你可以直接使用

```
$_SESSION['username'] = $username; 
```

并且不要忘记在文件开头添加 session_start() 来启动 PHP 会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:44:58.910

```
session_register("username");
session_register("password"); 
```

应该

```
session_start();
$_SESSION["username"]=$username;
$_SESSION["password"]=$password; 
```

请注意，DB 代码根本不安全。如果没有别的，至少运行`mysql_real_escape_string()`它。更好地迁移到 MySQLI 或 PDO

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:47:49.283

您应该从现代教程或书籍中学习 PHP（您的似乎来自 2000 年代中期）。该`session_register()`功能已被弃用多年，最终在 PHP/5.4.0 发布时被删除。官方手册包含一些[使用示例](http://es1.php.net/manual/en/session.examples.php)。

[mysql_query() 也会](http://php.net/mysql_query)发生类似的事情。遗留的 mysql 功能尚未删除，但这只是时间问题。请参阅[选择 API](http://es1.php.net/manual/en/mysqlinfo.api.choosing.php)以了解替代方案。

最后但同样重要的是，您需要阅读并理解[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)在你走得更远之前，否则你会养成坏习惯，迟早会给自己带来麻烦。

# ruby-on-rails - 将创建的图像动态添加到资产管道

> ID：16210186
> 
> 赞同：3
> 
> 时间：2013-04-25T08:42:13.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, phantomjs

我有一个 Rails 应用程序，它使用 phantomjs 在控制器中创建图像

```
system("/usr/bin/phantomjs ./app/assets/javascripts/phantom_snapshot.js  http://urlToPageWhereImgComesFrom/ ./app/assets/images/newImage.png '#divId'&") 
```

现在我想将该图像集成到一个视图中，但我认为由于 assets:precompile 图像尚不可用。这是放置我的图像的正确位置吗？或者有没有办法将创建的图像动态添加到我的资产中？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:54:53.933

不会被预编译的静态资产放在`./public`文件夹中。

只需确保在您的环境中启用了静态资产服务

```
config.serve_static_assets = true 
```

# amazon-web-services - 在 aws 中管理或管理自动缩放实例的有效方法

> ID：16210189
> 
> 赞同：3
> 
> 时间：2013-04-25T08:42:25.010
> 
> 标签：amazon-web-services, amazon-ec2, cloud, admin, autoscaling

作为一名系统管理员，我正在寻找一种有效的方法或最佳实践来管理具有自动缩放功能的 ec2 实例。

您如何管理以下场景的自动化：（我们的环境使用自动缩放、Elastic Load Balancing 和 cloudwatch 运行）

1.  出于安全原因，修补服务器的最新版本的 rpm 包？喜欢（是的更新/升级）
2.  像更改 httpd.conf 一样更改 Apache 服务器的配置并将其应用于自动缩放组中的所有实例？
3.  您如何将最新的代码部署到您的应用程序到服务器上，同时减少生产中断？
4.  您如何使用 puppet 或 chef 来自动化您的管理任务？

如果您有任何关于如何使用 aws 自动执行管理任务的信息，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:18:12.853

查看 Amazon [OpsWorks](http://aws.amazon.com/opsworks/)，这是一种新的基于 Chef 的用于 Amazon Web Services 的 DevOps 工具。

它使您能够在不同层（负载均衡器、应用程序服务器、数据库...）的实例上运行自定义 Chef 配方，以及从各种源存储库（Git、Subversion.. ）。

它支持基于负载的自动扩展（就像您已经在使用的自动扩展），以及基于时间的自动扩展，这在标准 EC2 自动扩展中实现起来更加复杂。

这是一项相对年轻的服务，并非所有功能都已经可用，但它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T06:16:07.563

> 出于安全原因，修补服务器的最新版本的 rpm 包？喜欢（是的更新/升级）

您可以使用 puppet 或 chef 创建一个 cron 作业来为您处理这个问题（cron 将以最基本的形式通过 bash 脚本下载和/或安装更新）。您可能想要自动升级，或者只是通过电子邮件通知管理员，以便在应用更新之前进行评估。

> 像更改 httpd.conf 一样更改 Apache 服务器的配置并将其应用于自动缩放组中的所有实例？

我通常通过我的 Puppet 清单来处理我的所有配置文件。您可以设置每个 EC2 实例以从 Puppet 服务器中提取更新，然后您可以按需推出更改。此过程的一部分应该是更新存储在您的 AutoScale 组中的 AMI（这是通过 Amazon 命令行工具完成的）。

> 您如何将最新的代码部署到您的应用程序到服务器上，同时减少生产中断？

首先在分期中进行测试！还有一个巧妙的技巧是版本化部署，因此每次进行部署时，它都会获得自己的文件夹（/var/www/v1 /var/www/v2 等），一旦您确认部署成功，您只需更新符号链接指向最新版本（/var/www/current 指向 /var/www/v2）。

OpsWorks 会为您处理所有此类事情，因此如果您不想自己做所有事情，您可以研究一下。

> 您如何使用 puppet 或 chef 来自动化您的管理任务？

您可以使用 Chef 或 Puppet 做各种事情，而他们不能（或者您不知道如何做）的任何事情都可以通过您从 Chef 或 Puppet 调用的 bash/python 脚本来完成。

我通常会做一些事情，比如安装包、构建自定义包、设置权限、下载东西、启动服务、管理配置文件、设置 cron 作业等

> 如果您有任何关于如何使用 aws 自动执行管理任务的信息，我将不胜感激

查看 CloudFormation。这可以帮助您通过配置文件设置所有服务器和相关服务（想想 EC2、LBS、CloudWatch），从而帮助您自动化整个堆栈（不仅仅是 EC2 的操作系统）。

# .htaccess - 如何使用 .htaccess 将文件夹重定向到 index.php？

> ID：16210193
> 
> 赞同：3
> 
> 时间：2013-04-25T08:42:34.637
> 
> 标签：.htaccess, redirect, rewrite, directory

文件夹结构：

```
/index/
/upload/
/something/ 
```

这些文件夹中没有 .htaccess（也不应该）。

访问**[http://site.com/something](http://site.com/something)**时，它会重定向到**[http://site.com/something/url=something](http://site.com/something/url=something)**，这是不需要的。

```
RewriteEngine on

# RewriteBase /base/ #

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

添加另一个重写条件以在文件夹末尾附加“/”会产生额外的（和不必要的）请求，也不是很好。

如何编写规则，以便将文件夹直接发送到前端控制器而没有任何不需要的重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:11:31.827

一个解决方案是。

```
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*[^/])$ $1/ [NC,L,R=301] 
```

但这会导致额外的重定向（首先重定向到某物/，另一个重定向到 index.php?url...）......不是最佳的。

无论如何，一个好的解决方案只是一个重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:58:47.147

尝试添加附加条件以排除现有目录：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

# python - Python SQLite Wrapper apsw-3.7.16.2 未能在 mac os x (10.7.5) 中安装

> ID：16210194
> 
> 赞同：1
> 
> 时间：2013-04-25T08:42:40.297
> 
> 标签：python, macos, sqlite, wrapper

无法安装 sqlite 包装器。任何有关安装的帮助都会非常有帮助。

[下载自](https://apsw.googlecode.com/files/apsw-3.7.16.2-r1.zip)

安装 sqlite3.version '2.6.0'

请在下面找到错误日志 -

```
sudo python setup.py install test
running install
running build
running build_ext
SQLite: Using system sqlite include/libraries
running install_lib
running install_egg_info
Removing /Library/Python/2.7/site-packages/apsw-3.7.16.2_r1-py2.7.egg-info
Writing /Library/Python/2.7/site-packages/apsw-3.7.16.2_r1-py2.7.egg-info
running test
Traceback (most recent call last):
File "setup.py", line 857, in <module>
 'win64hackvars': win64hackvars}
 File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 152, in setup
dist.run_commands()
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
self.run_command(cmd)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
cmd_obj.run()
File "setup.py", line 102, in run
import tests
 File "/Users/tj/Downloads/apsw-3.7.16.2-r1/tests.py", line 9, in <module>
import apsw
ImportError: dlopen(/Users/tj/Downloads/apsw-3.7.16.2-r1/apsw.so, 2): Symbol not found: _sqlite3_db_filename
Referenced from: /Users/tj/Downloads/apsw-3.7.16.2-r1/apsw.so
Expected in: flat namespace
in /Users/tj/Downloads/apsw-3.7.16.2-r1/apsw.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:48:53.617

它正在拾取旧版本的系统 SQLite 共享库。MacOS 倾向于忽略您希望它使用的 SQLite 库并强制使用已知系统库。（许多操作系统组件，如 CoreData 依赖于 SQLite，这就是他们喜欢强制使用已知良好版本的原因。）

最简单的解决方法是使用文档中指定的命令行。它确保 SQLite 的私有副本嵌入在扩展中，因此将始终有效。

[http://apidoc.apsw.googlecode.com/hg/build.html#recommended](http://apidoc.apsw.googlecode.com/hg/build.html#recommended)

```
python setup.py fetch --all build --enable-all-extensions install test 
```

（我是 APSW 的作者）。顺便说一句，有一个 python-sqlite 邮件列表，您可能会发现它很有用。

# kernel - 如何使用现有的引导加载程序引导一个简单的内核

> ID：16210196
> 
> 赞同：0
> 
> 时间：2013-04-25T08:42:42.413
> 
> 标签：kernel, bootloader

我编写了一个简单的内核，它是一个简单的二进制文件。我的问题是：是否可以使用 LILO 或 Grub 引导我的内核？如何？

# java - 如何使用 jarjar 格式组装 maven 项目？

> ID：16210200
> 
> 赞同：0
> 
> 时间：2013-04-25T08:42:47.343
> 
> 标签：java, maven, uberjar, jarjar

我尝试了一些汇编插件，例如`maven-assembly-plugin`，`maven-shading-plugin`但它们都不支持`jarjar`文件格式。

那么是否有一个 maven 插件可以按`jarjar`文件格式组装 Uber-Jar？

避免像 [ `spring.handlers`, `spring.schemas`]这样的资源冲突很有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:54:49.823

[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)支持 ueber-jar 的创建，此外maven [-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)也支持，但更简单一些。

# android - 从静态方法开始活动

> ID：16210203
> 
> 赞同：0
> 
> 时间：2013-04-25T08:42:51.557
> 
> 标签：android, android-intent, static, android-activity

我在启动 Activity 时遇到问题。我正在尝试使用静态方法开始一项新活动。

这是我的代码：

```
 static Dialog dialog=null;
public static void NextLevel(Context c,String title,String message){

     AlertDialog.Builder alertbox = new AlertDialog.Builder(c);
     alertbox.setTitle(title);
     alertbox.setMessage(message);
     alertbox.setPositiveButton("Volgende level", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface arg0, int arg1) {

         }
     });
     alertbox.setNegativeButton("Terug naar menu", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface arg0, int arg1) {
             startActivity(new Intent(Main.this, MainMenu.class));
         } 
     });
     alertbox.show();
} 
```

startActivity 不起作用，因为它无法从静态方法启动 Activity。我似乎无法找到解决此问题的方法，因为我自己也无法创建可以启动它的上下文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T08:46:28.270

采用

```
c.startActivity(new Intent(c, MainMenu.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:47:06.423

尝试将 startActivity 行更改为：

```
context.startActivity(new Intent(c, MainMenu.class)); 
```

和参数c：

```
final Context c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:47:11.810

您应该将当前活动的实例传递给静态方法并在其上调用**startActivity()**方法。

# c# - Ajax TabContainer 选项卡在可见性问题后无法正常工作

> ID：16210206
> 
> 赞同：0
> 
> 时间：2013-04-25T08:42:58.093
> 
> 标签：c#, asp.net, ajax

起初我在强制 TabContainer 显示时遇到问题。显然某些原因导致它在运行时呈现为“style =“visibility：hidden”。但是我通过将 style="visibility:visible" 添加到 TabContainer 来解决此问题。现在看起来像这样：

```
<asp:TabContainer ID="TabContainer1" runat="server" style="visibility:visible">
        <asp:TabPanel ID="TabPanel1" HeaderText="Tab 1" runat="server">  
                <ContentTemplate>  
                    contents of tab 1 <br />  
                    contents of tab 1 <br />  
                    contents of tab 1 <br />  
                </ContentTemplate>  
            </asp:TabPanel>  
            <asp:TabPanel ID="TabPanel2" HeaderText="Tab 2" runat="server">  
                <ContentTemplate>  
                    contents of tab 2 <br />  
                    contents of tab 2 <br />  
                    contents of tab 2 <br />  
                </ContentTemplate>              
            </asp:TabPanel>  
            <asp:TabPanel ID="TabPanel3" HeaderText="Tab 3" runat="server">  
                <ContentTemplate>  
                    contents of tab 3 <br />  
                    contents of tab 3 <br />  
                    contents of tab 3 <br />  
                </ContentTemplate>              
            </asp:TabPanel>  
    </asp:TabContainer> 
```

现在它确实显示了。但每当我按下选项卡 2 或 3 时，什么都没有发生。它仍然显示“标签 1 的内容”。

我该如何解决？我很想有一个工作的 TabContainer！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T17:40:44.343

Your code worked for me as-is in Visual Studio 2012\. The only thing I did was add the ScriptManager.

```
 <ajaxToolkit:ToolkitScriptManager runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T11:24:39.420

我对同一个控件有同样的问题，而不是使用 ScriptManager ，尝试使用 ToolkitScriptManager 。所以这可能是一个类似的问题。

```
<asp:ToolkitScriptManager runat="server">
</asp:ToolkitScriptManager> 
```

如果有问题弹出给你，请尝试重新附加最新的 Ajax Control 工具包（我有同样的问题，它是通过这样做来完成的）

[http://ajaxcontroltoolkit.codeplex.com/releases/view/116091](http://ajaxcontroltoolkit.codeplex.com/releases/view/116091)

我希望我能帮忙:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T02:14:31.343

如果您使用的是 .net 4.0/4.5，请检查您是否添加了 AjaxTookitScriptManager（而不是通常在 .net 2.0 中添加的 ScriptManager）。我遇到了同样的问题，并从这篇笔记中发现了这一点：http: [//stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit](http://stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit)

以下是对我有用的详细程序：

1.  在 VS 2012 中创建一个新的网站/应用程序
2.  使用 NuGet 安装 AjaxToolKit（我的做法是：工具菜单 > 库包管理器。然后在提示中输入“Install-Package AjaxControlToolkit”来安装它）
3.  在 ToolBox 窗口中，右键单击 Ajax Tools 或任何首选文件夹，选择 Items... > Browse... 到现在应该存在 AjaxToolkit.dll 的 Bin 文件夹并添加它
4.  创建一个新的 WebForm 拖放 AjaxTookitlScriptManager 到页面
5.  从工具箱中拖放 TabControl。向其添加标签并设置其宽度，例如 500px 测试它应该可以工作

# ant - 将值限制为 ant 属性任务

> ID：16210209
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:10.737
> 
> 标签：ant

将值限制为属性的最简单实现是什么？

```
property name="prop_name"  value="${dynamic_value} 
```

我想`${dynamic_value}`从一个受限制的集合中获取值。

谢谢，瓦吉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:28:57.860

您可以使用带有内置 javascript 引擎（包含在 Java >= 1.6.x 中）的脚本条件（参见[ant 手册条件），fe：](http://ant.apache.org/manual/Tasks/conditions.html)

```
<project>
 <property name="foo" value="26"/>
 <fail message="Value of $${foo} not in range => [${foo}] !">
  <condition>
   <scriptcondition language="javascript">
    var foo = parseInt(project.getProperty("foo"));
    self.setValue(foo &lt;= 20 || foo &gt;= 25);
   </scriptcondition>
 </fail>
</project> 
```

# python - Python 不能在多线程环境中作为 dbus 服务器和客户端工作

> ID：16210211
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:20.390
> 
> 标签：python, python-2.7

我使用以下代码创建了 dbus 服务器，将其命名为 server1.py

```
#!/usr/bin/python2.7
import dbus.service
import dbus.glib
import glib
import gobject
from dbus.mainloop.glib import DBusGMainLoop

class APP_Server(dbus.service.Object):
    def __init__(self):
        bus = dbus.SessionBus(private = True, mainloop = DBusGMainLoop())
        bus_name = dbus.service.BusName('de.test.app1', bus)
        dbus.service.Object.__init__(self, bus_name, '/de/test/app1_obj_path')

    @dbus.service.method("test.app1.interface",)
    def is_ready(self):           
        return True

def publish_dbus():
    loop = glib.MainLoop()
    APP_Server()
    loop.run()

if __name__ == '__main__': 
    gobject.threads_init()
    dbus.glib.init_threads()
    publish_dbus() 
```

然后我想通过以下代码访问 server1.py 中的 dbus 服务，将其命名为 server2.py，它也将用作 dbus 服务器。

```
#!/usr/bin/python2.7
import dbus.service
import dbus.glib
import glib
import dbus.mainloop
import gobject
from dbus.mainloop.glib import DBusGMainLoop
from threading import Thread
from time import sleep

class APP_Server(dbus.service.Object):
    def __init__(self):
        bus = dbus.SessionBus(private = True, mainloop = DBusGMainLoop())
        bus_name = dbus.service.BusName('de.test.app3', bus)
        dbus.service.Object.__init__(self, bus_name, '/de/test/app3_obj_path')

    @dbus.service.method("test.app3.interface",)
    def is_ready(self):           
        return True

def call_dbus():
    bus_name = 'de.test.app1'
    obj_path = '/de/test/app1_obj_path'
    interface_name = 'test.app1.interface'
    count = 1
    while count < 1000:
        proxy_bus = dbus.SessionBus(private = True)
        obj = None
        try:
            obj = proxy_bus.get_object(bus_name, obj_path)
        except:
            sleep(1)
            obj = proxy_bus.get_object(bus_name, obj_path)
        ready = obj.get_dbus_method('is_ready', interface_name)
        ready(pid_, bin_path)
        count += 1
        print count 

def publish_dbus():
    loop = glib.MainLoop()
    APP_Server()
    loop.run()

if __name__ == '__main__':
    gobject.threads_init()
    dbus.glib.init_threads()
    th1 = Thread(target = publish_dbus)
    th1.start()
    th2 = Thread(target = call_dbus)
    th2.start()
    sleep(10000000) 
```

然后在运行 server2.py 之后，应用程序将在线程“call_dbus”中没有完成所有 dbus 调用而终止。

如果我尝试使用以下代码，只需将 server2.py 中的代码更改如下：

从：

```
 proxy_bus = dbus.SessionBus(private = True) 
```

至：

```
 proxy_bus = dbus.SessionBus(private = True, mainloop = dbus.mainloop.NULL_MAIN_LOOP) 
```

现在，通过使用工具“d-feet”，线程“callbus”完成后将有许多连接，该工具可用作d-bus调试器来检查dbus服务器是否准备好或dbus连接是否已建立。

如果有人可以提出一些建议使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:16:08.253

我注意到的是：

*   您的总线/对象名称不匹配。
*   每次在 while 循环中创建一个新的 dbus 连接。非常糟糕的主意，特别看到你没有关闭它们。
    将调用移出循环，或使用共享连接 ( `private=False`)
*   您实际上并不需要一个自己的线程来发布 dbus 对象，这就是 mainloop 的用途。
*   如果您在不同的线程中运行主循环，请确保您有办法停止，否则`kill`将是终止程序的唯一方法。或者把 int 放在你的主线程中，那么它至少应该对`Ctrl-C`
*   程序结束时的睡眠是不必要的。只要程序周围有正在运行的非守护线程，就不会退出。

将所有这些放在一起，这应该可以工作：

```
#!/usr/bin/python2.7
import dbus.service
import dbus.glib
import glib
import dbus.mainloop
import gobject
from dbus.mainloop.glib import DBusGMainLoop
from threading import Thread
from time import sleep

class APP_Server(dbus.service.Object):
    def __init__(self):
        bus = dbus.SessionBus(private = True, mainloop = DBusGMainLoop())
        bus_name = dbus.service.BusName('de.test.app3', bus)
        dbus.service.Object.__init__(self, bus_name, '/de/test/app3_obj_path')

    @dbus.service.method("test.app3.interface",)
    def is_ready(self):           
        return True

def call_dbus():
    bus_name = 'de.test.app3'
    obj_path = '/de/test/app3_obj_path'
    interface_name = 'test.app3.interface'
    proxy_bus = dbus.SessionBus(private = True)
    count = 1
    while count < 1000:
        obj = None
        try:
            obj = proxy_bus.get_object(bus_name, obj_path)
        except:
            sleep(1)
            obj = proxy_bus.get_object(bus_name, obj_path)
        ready = obj.get_dbus_method('is_ready', interface_name)
        #ready(pid_, bin_path)
        count += 1
        print count 

if __name__ == '__main__':
    gobject.threads_init()
    dbus.glib.init_threads()
    loop = glib.MainLoop()
    server = APP_Server()
    #th1 = Thread(target = publish_dbus)
    #th1.start()
    th2 = Thread(target = call_dbus)
    th2.start()
    loop.run() 
```

# python - 在 pygtk 中，如何在一个对话框中组合字体选择和颜色选择对话框？

> ID：16210217
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:30.717
> 
> 标签：python, pygtk

我正在使用 pygtk 并搜索将字体和颜色对话框组合在一起的最佳方式，这是最 Pythonic 的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:36:54.100

您必须更改小部件样式的“基本”和“文本”部分。您还可以编辑“前景”属性。更改从 gtk.Widget 继承的样式属性的一些有用的速记方法是：

```
widget.modify_fg(state, color)
widget.modify_bg(state, color)
widget.modify_base(state, color)
widget.modify_text(state, color) 
```

gtk.Label、gtk.Button、gtk.Paned、gtk.Frame 等无窗口小部件（参见 FAQ 3.5）尽管从 gtk.Widget 继承，但不允许更改其背景和基色，因为这些属性不存在为他们。如果你想得到它们，你需要将小部件插入到 gtk.EventBox 中，它会添加这个属性。例子：

```
import gtk

window = gtk.Window(gtk.WINDOW_TOPLEVEL)
window.connect("destroy", gtk.mainquit)

label = gtk.Label("one, two, testing...")
eb = gtk.EventBox()
eb.add(label)
eb.modify_bg(gtk.STATE_NORMAL, gtk.gdk.color_parse("blue"))
window.add(eb)

window.show_all()
gtk.main() 
```

还建议您阅读此[gtk.gdk.Window — 目标窗口系统中的屏幕显示区域。](http://www.pygtk.org/docs/pygtk/class-gdkwindow.html#method-gdkwindow--set-background)

另一方面，pygtk 有用于更改颜色和更改或选择字体的对话框。

示例 1：**更改字体**

```
import gtk
import pango
class PyApp(gtk.Window): 
    def __init__(self):
        gtk.Window.__init__(self)
        self.set_size_request(300, 150)
        self.set_position(gtk.WIN_POS_CENTER)
        self.connect("destroy", gtk.main_quit)
        self.set_title("Font Selection Dialog")

        self.label = gtk.Label("The only victory over love is flight.")
        button = gtk.Button("Select font")
        button.connect("clicked", self.on_clicked)

        fix = gtk.Fixed()
        fix.put(button, 100, 30)
        fix.put(self.label, 30, 90)
        self.add(fix)

        self.show_all()

    def on_clicked(self, widget):
        fdia = gtk.FontSelectionDialog("Select font name")
        response = fdia.run()

        if response == gtk.RESPONSE_OK:
            font_desc = pango.FontDescription(fdia.get_font_name())
            if font_desc:
                self.label.modify_font(font_desc)

        fdia.destroy()
PyApp()
gtk.main() 
```

示例 2：**更改标签的颜色**

```
 import gtk
class PyApp(gtk.Window): 
    def __init__(self):
        super(PyApp, self).__init__()

        self.set_size_request(300, 150)
        self.set_position(gtk.WIN_POS_CENTER)
        self.connect("destroy", gtk.main_quit)
        self.set_title("Color Selection Dialog")

        self.label = gtk.Label("The only victory over love is flight.")
        button = gtk.Button("Select color")
        button.connect("clicked", self.on_clicked)

        fix = gtk.Fixed()
        fix.put(button, 100, 30)
        fix.put(self.label, 30, 90)
        self.add(fix)

        self.show_all()

    def on_clicked(self, widget):
        cdia = gtk.ColorSelectionDialog("Select color")
        response = cdia.run()

        if response == gtk.RESPONSE_OK:
            colorsel = cdia.colorsel
            color = colorsel.get_current_color()
            self.label.modify_fg(gtk.STATE_NORMAL, color)

        cdia.destroy()
PyApp()
gtk.main() 
```

希望它能有所帮助。

# php - 用 Laravel 3 中的外部 php 文件替换 div 的内容

> ID：16210220
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:33.363
> 
> 标签：php, ajax, laravel

我有一个从烂番茄 API 显示在名为浏览的页面中的电影的无序列表（使用 Laravel 框架）。我正在尝试使用 AJAX 将内容从单独的文件加载到 div 中，当用户单击锚点时，我已将其设置为名为 movie 的路由。

在我的路线文件中，我有这个： Route::get('browse', array('as'=>'browse', 'uses'=>'browse@index')); Route::get('movie', array('as'=>'movie', 'uses'=>'browse@movie'));

浏览位于 /application/views/browse/index.blade.php 的视图

```
$movies = $search_results->movies;
echo '<div id="browse">';
echo '<ul class="movieResults">';
  foreach ($movies as $movie) {
    echo '<div class="movieCard">'; 
    echo '<li><img src="'. $movie->posters->detailed .'"</li>';
    echo '<li class="movieCardInfo"><a href="movie" class="movie">' . $movie->title . '</a></li>'; // HERE'S WHERE I HAVE THE PROBLEM
    echo '</div>';
  }
echo '</ul>';
echo '</div>'; 
```

电影视图位于 /application/views/browse/movie.blade.php。我现在有虚拟文本

```
echo '<div class="details">'; 
```

回声'

测试

'; 回声'';

浏览控制器

```
public $restful = true;
  public function get_index() 
  {
    return View::make('browse.index')
    ->with('title', 'Browse Movies');
  }
} 
```

Javascript 文件 $(function() { $('.movi​​e').click(function() { $('.details').load(this.href); return false; }); });

[该项目可以在这里找到](https://github.com/bryansattler/rhubarb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:53:34.877

似乎您使用了错误的“this”运算符。如果是 jQuery 脚本，应该是“$(this)”吗？（JavaScript 部分...）

另外：你告诉它将“.load()”的结果添加到“.details”中，但我看不到你的 html 代码中有这样的字段？

**编辑**

在 /application/views/browse/index.blade.php 中更改以下内容：

```
echo '<li class="movieCardInfo"><a href="movie" class="movie">' . $movie->title . '</a></li>';

echo '<li class="movieCardInfo"><a href="movie" class="movie">' . $movie->title . '</a><div class="details"></div></li>'; 
```

并从响应中删除“div.details”，因此响应仅返回您想要的详细信息中的文本。

然后，在 JavaScript 中：

```
$(function() { 
    $('.movie').click(function() {
        $('.details').load($(this).href);
        return false;
    });
}); 
```

# iphone - 如何在 Tableview 单元格子视图项中分配 didSelectRowAtIndexPath

> ID：16210224
> 
> 赞同：3
> 
> 时间：2013-04-25T08:43:40.733
> 
> 标签：iphone, ios, uitableview

我有 2 个问题，我完全糊涂了。请帮我

1）我面临一个问题，我想将点击侦听器分配给我的子视图内部的图像视图，并且该子视图位于`UITableView`.

在我的 tableview 单元格中有两个图像视图，我想给它们单击侦听器，并识别它们，例如在哪一行上单击了哪个图像视图等。

如果我写`scrollview.userinteractionEnable=YES;`的不是我的`didSelectRowAtIndexPath`不回应。我知道它是因为子视图。但是如果我改变`scrollview.userinteractionEnable=NO;`了我的`didselectrowatIndexpath`代码就会执行。但滚动视图不会滚动到水平..

我该怎么办 ？我想要水平滚动加上 Image-view 单击两个 ImageView 上的侦听器。

** 通过 crating scrollview 子类解决点击问题**

这是我的 Customcell 类

```
cellScrollViewClass *scrollView = [[cellScrollViewClass alloc] initWithFrame:CGRectMake(0.0,0.0,430,187)];
     scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * 3,scrollView.frame.size.height);
    scrollView.scrollEnabled=YES;
    scrollView.userInteractionEnabled=YES;

    for (int i = 0; i < 3; i++) {
        CGRect frame;
        frame.origin.x = scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = scrollView.frame.size;

        if(i==2) // to check Last item must be train Engine   
        {
            UIView *EngineView = [[UIView alloc]initWithFrame:frame];
            UIImageView *engineImageView = [[UIImageView alloc]initWithFrame:CGRectMake(-112.5, 6, 430, 180)];
            UIImage *Image = [UIImage imageNamed:@"backengine.png"];
            engineImageView.contentMode = UIViewContentModeScaleAspectFit;
            engineImageView.image = Image;
            [EngineView addSubview:engineImageView];
            [scrollView addSubview:EngineView];  // add 3rd imageview that is Train Engine to end of scrollview
        }
        else{ // Not equal to 2 than it must be wagon of train. 

    UIView *wagon = [[UIView alloc]initWithFrame:frame];
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"wagon.png"]];
    wagon.backgroundColor = background;

    UIView *videoviewContainer = [[UIView alloc]initWithFrame:CGRectMake(20, 40, 220 , 200)];

    UIImageView *videoImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0,0, 220, 100)];
    UIImage *bgImage = [UIImage imageNamed:@"video.png"];
    videoImageView.image = bgImage;
    videoviewContainer.contentMode = UIViewContentModeLeft; // set Video Image view to left hand side of wagon UIView
            videoImageView.tag=2;

    [videoviewContainer addSubview:videoImageView];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured:)];
    [videoImageView addGestureRecognizer:singleTap];
    [videoImageView setMultipleTouchEnabled:YES];
    [videoImageView setUserInteractionEnabled:YES];

    UIView *textUiView = [[UIView alloc]initWithFrame:CGRectMake(238,28, 150 , 187)];
    textUiView.contentMode = UIViewContentModeRight;
    UILabel * label = [[UILabel alloc]initWithFrame:CGRectMake(28,10, 150 , 87)];
    label.text=@"This is testing text for IOS app to check line are aligned or not and to check video image and nested views for UIviews";
    label.backgroundColor = [UIColor clearColor];
    label.textColor=[UIColor redColor];
    label.numberOfLines = 4;
    [textUiView addSubview:label];

    [wagon addSubview:textUiView];
    [wagon addSubview:videoviewContainer];
    [scrollView addSubview:wagon];
    [self.contentView addSubview:scrollView];
  }
  }
  }
    return self;
  }

  - (void)singleTapGestureCaptured:(UITapGestureRecognizer *)gesture
    {

     NSLog(@"Touch event on view %d",gesture.view.tag);
     } 
```

我像这样创建了 Scrollview 子类..

```
@implementation cellScrollViewClass
  - (id)initWithFrame:(CGRect)frame
    {
  self = [super initWithFrame:frame];
   if (self) {
    // Initialization code
    NSLog(@"You are in scrollview");
        }
   return self;
     } 
```

这是一种正确的实施方法吗？

![在此处输入图像描述](https://i.stack.imgur.com/rbDSt.png)

感谢任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:00:17.377

使用`UITapGestureRecognizer`. 在创建每个图像视图时创建并附加一个轻击手势识别器。在创建图像视图时还要设置它的标签，以便您可以识别它在单元格上是哪一个。

当您从识别器获得回​​调时，您可以通过以下方式获取标签：

```
recogniser.view.tag 
```

您可以通过在超级视图上循环来获取表格视图单元格，直到找到表格视图单元格类：

```
UIView *superView = recogniser.view.superview;
while (superView != nil && ![superView isKindOfClass:[UITableViewCell class]]) {
    superView = superView.superview;
} 
```

然后您可以使用从表视图中获取索引路径

```
[tableView indexPathForCell:superView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:05:54.243

您可以在具有相同图像视图框架的图像视图上添加自定义按钮，并且您可以在按钮上添加选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:57:08.400

要获得点击监听器以获取`UIImageView`它的类别并使用`touches begin method`并将回调委托给“tableViewController”。

使用标签来识别点击了哪张图片和哪一行。

为避免重叠，如果我们已经分配的单元格只需删除以前的图像，这样做有一个`else`条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:17:41.083

您需要实现 UIScrollView 委托回调并检查用户正在执行哪种滚动（水平滚动或垂直滚动​​），然后手动更改 tableview 或滚动视图偏移量，这几乎是我看到这个的唯一方法......

至于您的图像，您需要为 everyImage 设置一个 UIButton 并将它们链接到选择器，然后您可以使用按钮的标签来知道它是什么图像。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T09:03:18.153

为了处理 UIImageView 上的手势，请确保您使用的 UIImageView `userInteractionEnable = YES`默认设置为`NO`

# windows-8 - 在 Windows 8 / Windows Phone 8 MVVM 中使用可移植类库 - 页面导航

> ID：16210225
> 
> 赞同：2
> 
> 时间：2013-04-25T08:43:40.990
> 
> 标签：windows-8, windows-phone-8, portable-class-library

我正在为 Windows 8 和 Windows Phone 8 开发一个应用程序。我选择实现一个可移植类库并在这两个平台之间共享它。唯一的问题是我不知道如何在 PCL 中处理页面导航。我以以下教程为例：[使用可移植类库](http://mobile.dzone.com/articles/using-portable-class-libraries) 任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:28:42.153

最好的方法是围绕导航创建自己的抽象。

我会创建一个接口说*INavigationService*，然后在每个平台的非 PCL 程序集中创建该接口的实现，包装适当的控件（WinRT 的 Frame 和 Windows Phone 8 的 PhoneNavigationFrame）。

我建议查看[Caliburn.Micro](http://caliburnmicro.codeplex.com)的来源，因为它具有与抽象导航类似的方法。

下面是一个示例，展示了如何执行此操作：[共享代码：添加 NavigationService](http://code.msdn.microsoft.com/windowsapps/Sharing-CodeAdding-a4c4beb8)

# python - 如何通过拖放对 QListWidget 中的项目进行排序

> ID：16210226
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:44.513
> 
> 标签：python, drag-and-drop, pyqt, qlistwidget

我是 pyqt 的新手，我正在使用它来编写一些 GUI，有人可以告诉我如何通过拖放对 QListWidget 中的项目进行排序吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:24:25.810

`QListWidget`继承自`QAbstractItemView`。如果您希望能够通过拖放更改项目的顺序，可以使用`QAbstractItemView.setDragDropMode()`并将其设置为。`QAbstractItemView.InternalMove`

[这是文档的相关部分](http://pyqt.sourceforge.net/Docs/PyQt4/qabstractitemview.html#setDragDropMode "PyQt 文档 - QAbstractItemView")。

这是一个简单的示例，展示了它的实际效果：

```
import sys
from PyQt4.QtGui import QApplication, QWidget, \
    QVBoxLayout, QListWidget, QAbstractItemView

class Widget(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self, parent)

        self.widget_layout = QVBoxLayout()

        # Create ListWidget and add 10 items to move around.
        self.list_widget = QListWidget()
        for x in range(1, 11):
            self.list_widget.addItem('Item {:02d}'.format(x))

        # Enable drag & drop ordering of items.
        self.list_widget.setDragDropMode(QAbstractItemView.InternalMove)

        self.widget_layout.addWidget(self.list_widget)
        self.setLayout(self.widget_layout)

if __name__ == '__main__':
  app = QApplication(sys.argv)
  widget = Widget()
  widget.show()

  sys.exit(app.exec_()) 
```

# .net - XNA 项目中的菜单加载错误以加载 3D 菜单

> ID：16210227
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:46.560
> 
> 标签：.net, windows-phone-7, xna, windows-phone-8, xna-4.0

我试图在 XNA 中做 3d 菜单，但出现以下错误：“名称 'item_OnTap' 在当前上下文中不存在。” 我是 XNA 编程的新手。提前谢谢你。

```
//ModelMenuGame.cs

   public class ModelMenuGame : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        SpriteFont font;
        Model menuItemModel;
        Vector3 cameraPosition;

        Matrix view;
        Matrix projection;
        List<ModelMenuItem> Menu;
        int TotalMenuItems = 4;

        Rectangle LeftRegion;
        Rectangle RightRegion;

        int currentIndex = 0;
        public event EventHandler OnTap;

        public ModelMenuGame()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

            TargetElapsedTime = TimeSpan.FromTicks(333333);

            // Extend battery life under lock.
            InactiveSleepTime = TimeSpan.FromSeconds(1);
        }

        protected override void Initialize()
        {
            // TODO: Add your initialization logic here
            cameraPosition = new Vector3(-40, 10, 40);
            view = Matrix.CreateLookAt(cameraPosition, Vector3.Zero, Vector3.Up);
            projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, GraphicsDevice.Viewport.AspectRatio, 1.0f, 1000.0f);
            Menu = new List<ModelMenuItem>();

            LeftRegion = new Rectangle(0, 0, GraphicsDevice.Viewport.Width / 2, GraphicsDevice.Viewport.Height);
            RightRegion = new Rectangle(GraphicsDevice.Viewport.Width / 2, 0, GraphicsDevice.Viewport.Width / 2, GraphicsDevice.Viewport.Height);

            OnTap = new EventHandler(item_OnTap);
            currentIndex = currentIndex % TotalMenuItems;
            if (currentIndex < 0)
            {
                currentIndex = TotalMenuItems - 1;
            }
            else if(currentIndex > TotalMenuItems - 1)
                {
                    currentIndex = 0;
                }
            foreach (ModelMenuItem item in Menu)
            {
                if (item.Index == currentIndex)
                {
                    item.Selected = true;
                }
                else
                {
                    item.Selected = false;
                }
            }

            menuItemModel = Content.Load<Model>("ModelMenuItem3D");

            font = Content.Load<SpriteFont>("gameFont");

            for (int i = 0; i < TotalMenuItems; i++ )
            {
                int X = -20;
                ModelMenuItem item =  new ModelMenuItem(this, menuItemModel, view, projection);

                item.Translation = new Vector3(X + (i * 20), 0, 0);
                item.Index = i;
                Menu.Add(item);
            }
            Menu[0].Selected = true;

            base.Initialize();
        } 
```

这是 //ModelMenuItem.cs public class ModelMenuItem 的代码：Microsoft.Xna.Framework.GameComponent {

```
 Model modelItem;

        public Vector3 Translation;

        public Matrix View;

        public Matrix Projection;

        public int Index;

        public bool Selected;

        public int Offset;

        public ModelMenuItem(Game game, Model model, Matrix view, Matrix projection)
            : base(game)
        {
            // TODO: Construct any child components here
            modelItem = model;
            View = view;
            Projection = projection;
            Offset = 5;
         }

        public void Draw()
        {
            Matrix[] modelTransforms = new Matrix[modelItem.Bones.Count];
            modelItem.CopyAbsoluteBoneTransformsTo(modelTransforms);
            foreach (ModelMesh mesh in modelItem.Meshes)
            {
            foreach(BasicEffect effect in mesh.Effects)
            {
                effect.EnableDefaultLighting();
                effect.AmbientLightColor = Color.White.ToVector3();

                if (Selected)
                {
                    effect.World = modelTransforms[mesh.ParentBone.Index] * Matrix.CreateTranslation(Translation + new Vector3(0, 0, Offset));
                }
                else
                {
                    effect.World = modelTransforms[mesh.ParentBone.Index] * Matrix.CreateTranslation(Translation);
                }
                effect.View = View;
                effect.Projection = Projection;
            }
            mesh.Draw();
            }

        } 
```

# javascript - 如何在单击图像按钮时上传新文件

> ID：16210231
> 
> 赞同：20
> 
> 时间：2013-04-25T08:43:52.537
> 
> 标签：javascript, jquery, html, css

我的任务是通过单击图像按钮上传新文件。我的代码是

```
 <label>File</lable>
    <input type="image" src="http://upload.wikimedia.org/wikipedia/commons/c/ca/Button-Lightblue.svg" width="30px"/> 
```

单击此按钮后，我想上传一个新文件。我该怎么做？[您可以从Demo](http://jsfiddle.net/Bkzfk/)检查我的代码

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-25T08:50:47.490

您可以添加一个隐藏的文件输入字段，例如：

```
<input type="image" src="http://upload.wikimedia.org/wikipedia/commons/c/ca/Button-Lightblue.svg" width="30px"/>
<input type="file" id="my_file" style="display: none;" /> 
```

并做：

```
$("input[type='image']").click(function() {
    $("input[id='my_file']").click();
}); 
```

演示::[更新小提琴](http://jsfiddle.net/Bkzfk/1/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-09T20:35:00.010

不需要 javascript，只需将`<input>`和 放在`<img>`里面`<label>`，确保你隐藏`<input>`如下：

```
 <label for="image">
      <input type="file" name="image" id="image" style="display:none;"/>
      <img src="IMAGE URL"/>
   </label> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-31T07:18:42.817

不需要javascript。

```
Just place both <input type="file"> and <img src=""> inside a label.

Eg:
<label>
    <input type="file" style="display:none">
<img src=""> 
</label> 
```

这会很好用

演示：[https ://codepen.io/sandeeprana1001/pen/dyPVvJZ](https://codepen.io/sandeeprana1001/pen/dyPVvJZ)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T09:02:32.697

您使用了错误的输入，请改用文件，如果您希望按钮看起来像代码演示中的圆圈，您将需要使用 CSS 来更改“提交”的外观。这必须是以下形式：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
  <input type="file" name="myfile"/>
  <input type="submit" class="circle-btn"/>
<form> 
```

我不知道您在服务器端使用什么语言（PHP、ASP.NET 等），但您需要创建一个页面（例如，用于 php 的“upload_file.php”）。您可以在 google 中轻松找到有关如何创建这样的页面的示例，只需复制粘贴代码：

PHP 中的一个示例：http: [//www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-25T08:57:12.873

如果您正在寻找一个跨浏览器兼容的解决方案，您应该查看 plupload( [http://www.plupload.com](http://www.plupload.com) ) 它支持图像按钮以及我记得的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T08:52:09.580

您可以使用 css 执行此操作。

请检查此博客中的第四个答案。

> [如何自定义浏览按钮？](https://stackoverflow.com/questions/15519223/how-can-i-customize-the-browse-button)

您可以将图像用作**.button**类的背景图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-24T22:33:44.383

您也可以使用它来访问您上传的文件，因为在 PHP 中您无法访问标签内的文件。

```
<input type="file" name="input" id="input" style="display:none;">
<label for="input">
    <img src="images/default.jpg" id="image">
</label> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-04T03:13:10.747

DemoUser 答案的补充，添加 .focus() 对我有用。

```
 $("input[type='image']").click(function() {
    $("input[id='my_file']").focus().click();
  }); 
```

# python - urllib.urlopen 返回一个旧页面？

> ID：16210233
> 
> 赞同：4
> 
> 时间：2013-04-25T08:43:56.867
> 
> 标签：python, urllib

所以我有一个非常简单的 HTML 页面（一个目录列表），我尝试用 urllib 读取它，这样：

```
page =  urllib.urlopen(coreRepositoryUrl).read() 
```

问题是，我以这种方式阅读的 HTML 比最新的要旧。`info()`给我这个：

```
Date: Fri, 19 Apr 2013 18:48:09 GMT
Server: Apache/2.0.52 (Fedora)
Content-Type: text/html; charset=UTF-8
Connection: close
Age: 481084 
```

该页面最后一次更新是今天（2013-04-25）。哪个组件可能是缓存的组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:08:36.973

在您的请求中添加值为“max-age=0”的标头“Cache-Control”

```
import urllib2
req = urllib2.Request(url)
req.add_header('Cache-Control', 'max-age=0')
resp = urllib2.urlopen(req)
content = resp.read() 
```

沿途使用该标头的每个缓存都将重新验证其缓存条目

# javascript - 在我的应用程序中自定义右键单击的 Jquery？

> ID：16210234
> 
> 赞同：0
> 
> 时间：2013-04-25T08:43:57.863
> 
> 标签：javascript, jquery, html, css, jquery-plugins

在我的应用程序中，我需要禁用`RIGHT click`并且我这样做了。

但现在我需要做`RIGHT click`只包含`COPY`和`PASTE`选项的自定义菜单。

是否有任何`way`或任何仅用于和选项`plugin`来执行此操作。`COPY``PASTE`

好的答案绝对值得赞赏。

# pdf - UIwebview 在其他应用中打开文档 (pdf)

> ID：16210236
> 
> 赞同：1
> 
> 时间：2013-04-25T08:43:59.833
> 
> 标签：pdf, uiwebview

大家好，我正在尝试将 uiwebview 中的 pdf 文件打开到其他应用程序。我可以像这样显示弹出窗口。

[![屏幕](https://i.stack.imgur.com/EtWTR.png "屏幕")](https://i.stack.imgur.com/EtWTR.png "屏幕")

我这样写代码。我也放了代表。UIDocumentInteractionControllerDelegate

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
  //other code
 if([fileType isEqualToString:@"pdf"])
 {
     NSLog(@"It is pdf file.");
     //other code to save to nsdocumentdirectory and then get this path
     // file://localhost/var/mobile/Applications/024D40FF-4518-4526-BEAB-   2A0679FD6308/Documents/iphone_user_guide.pdf

          NSURL *pdfURL = [NSURL fileURLWithPath:pathToDownloadTo];
         UIDocumentInteractionController *docController = [UIDocumentInteractionController interactionControllerWithURL:pdfURL];

         [docController setDelegate:self];

         [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];

 }
}

- (UIViewController *) documentInteractionControllerViewControllerForPreview: (UIDocumentInteractionController *) controller {
    return self;
} 
```

我得到了这个错误。void SendDelegateMessage(NSInvocation *): 委托 (webView:didFinishLoadForFrame:) 等待 10 秒后返回失败。主运行循环模式：kCFRunLoopDefaultMode

在某些链接中，它说是由于 Javascript。我也需要用这个。stringByEvaluatingJavaScriptFromString

但我已禁用该功能并进行了测试。然后，没有错误，但应用程序崩溃。

我想知道是否还有东西要转移文件。另外，我想知道如何在 uiwebview 中以编程方式添加像“在 ibook 中打开或 sth”这样的 Uibarbutton，并在我们打开 pdf 文件时使用 safari 中的一些代码。

带着敬意，

# eclipse-plugin - 更新 RCP 应用程序时是否可以自定义 http 连接？

> ID：16210238
> 
> 赞同：4
> 
> 时间：2013-04-25T08:44:01.187
> 
> 标签：eclipse-plugin, eclipse-rcp

例如添加一些标头或 cookie 到连接？我发现他们正在使用 org.eclipse.ecf.provider.filetransfor.httpclient 并且它使用 org.apache.commons.httpclient 插件进行连接，但是有可能以某种方式“挂钩”吗？

# php - mysqli多个where子句用于两个不同的变量

> ID：16210249
> 
> 赞同：1
> 
> 时间：2013-04-25T08:44:35.227
> 
> 标签：php, get, mysqli, fatal-error

我将用户当前的纬度和经度保存为变量`$latitude` 和`$longitude`. 如果纬度和经度与用户当前的纬度和经度匹配，我只希望数据库中的数据回显。

```
$con=mysqli_connect("localhost","db_username","password","db_dbname");
$stmt = $con->prepare('SELECT * FROM test WHERE geoloc1 = ? and geoloc2 = ?');
$stmt->bind_param('ss', $latitude, $longitude);
$stmt->execute();

$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
?>

            <div class="latlon">
                <a><?php echo $row['geoloc1'] ?></a>
            </div>
<?php
}  
?> 
```

但是我得到了错误`Fatal error: Call to undefined method mysqli_stmt::get_result()`，我似乎无法解决它为什么会出现！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:06:18.203

只需退出那个不可用的 mysqli 并使用 PDO，它有两个优点：in 很整洁并且可以工作。

```
$dsn = "mysql:host=localhost;dbname=db_dbname;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$con = new PDO($dsn, "db_username","password", $opt);

$stmt = $con->prepare('SELECT * FROM test WHERE geoloc1 = ? and geoloc2 = ?');
$stmt->execute(array($latitude, $longitude));
$data = $stmt->fetchAll();

foreach ($data as $row) {
?>
      <div class="latlon">
         <a><?php echo $row['geoloc1'] ?></a>
      </div>
<?php } ?> 
```

# wso2esb - 从文件导入 XSD

> ID：16210251
> 
> 赞同：1
> 
> 时间：2013-04-25T08:44:42.277
> 
> 标签：wso2esb

我们正在将 wso2esb 服务器放在我们的 web 服务和客户之间。我在导入和包含在 wsdl 文件中时遇到问题。

为了使迁移简单，我们认为我们应该将所有 wsdl 和 xsd 文件复制到 esb 服务器上的一个目录中（但在 wso2esb 软件之外）。在 esb 中创建服务时，我现在使用“指定源 WSDL”来引用 wsdl 文件。

这确实显示了一个 wsdl，但不是（完全）我们创建的那个。所以我们使用'useOriginalwsdl=true'、'modifyUserWSDLPortAddress=true'、'showAbsoluteSchemaURL=true'。

在我们的一个 wsdl 中，我们得到了这段代码：

```
<xs:schema targetNamespace="http: //www.egem.nl/StUF/wsdl/zkn0201.wsdl">
<xs:import schemaLocation="xsd/stuf0204.xsd" namespace="http://www.egem.nl/StUF/StUF0204"/>
<xs:import schemaLocation="xsd/zkn0201.msg.xsd" namespace="http://www.egem.nl/StUF/sector/zkn/0201"/>
</xs:schema> 
```

设置了上述参数后，这在服务的 wsdl 中显示为：

```
<xs:schema targetNamespace="http://www.egem.nl/StUF/wsdl/zkn0201.wsdl">
<xs:import namespace="http://www.egem.nl/StUF/StUF0204" schemaLocation="HAEM_TEST?xsd=xsd/stuf0204.xsd"/> 
<xs:import namespace="http://www.egem.nl/StUF/sector/zkn/0201" schemaLocation="HAEM_TEST?xsd=xsd/zkn0201.msg.xsd"/>
 </xs:schema> 
```

但是当我使用“http:// ...../sevices/HAEM_TEST?xsd=xsd/zkn0201.msg.xsd”查询wsdl时，它不会返回xsd的内容。即使 xsd 相对于服务使用的实际 wsdl 存在于磁盘上：

在磁盘上：

```
$ ls -lR /some/path/to/my/resource
 .:
  drwx------. 2 wnproesb01 wnproesb01  4096 Apr 17 23:15 xsd
  -rwx------. 1 wnproesb01 wnproesb01  9498 Apr 16 18:31 zkn0201.wsdl

./xsd:
   -rwx------. 1 wnproesb01 wnproesb01  13885 Apr 16 18:31 stuf0204.xsd
   -rwx------. 1 wnproesb01 wnproesb01  63982 Apr 16 18:31 zkn0201.msg.xsd 
```

这些 xsd 文件可能具有导入或包含自身，由与它们自身相比的相对路径给出。

最大的问题：我需要做什么，才能使这个 wsdl 成为 wso2esb 提供的有效、有效的 wsdl？包括所有包含/导入的 xsd。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:01:20.350

您可以使用 Registry 来存储 WSDL，然后从那里进行引用。这比存储在文件系统中方便得多。

[http://madhukaudantha.blogspot.nl/2012/07/wso2-esb-proxy-from-registry.html](http://madhukaudantha.blogspot.nl/2012/07/wso2-esb-proxy-from-registry.html)

并参考如何正确定义 WSDL 导入的模式位置。

[WSO2 ESB 4.5.0 无法从治理注册表创建代理服务](https://stackoverflow.com/questions/13616009/wso2-esb-4-5-0-fails-to-create-proxy-service-from-governance-registry)

# javascript - 如何从主对象动态继承功能到其他对象？

> ID：16210254
> 
> 赞同：0
> 
> 时间：2013-04-25T08:44:50.947
> 
> 标签：javascript, object, inheritance

***在这种情况下，我想创建动态新对象（someAnimal），例如`frog`在对象“ `Game`”下。***

在里面`Game.frog`我想从`Game`函数 init 继承到`frog` 所以青蛙也会有函数`init` ，所有其他动物都会克隆这个函数`init`。

```
 Game.frog.init(), Game.lion.init() ...... Game.n...int() 
```

**动物将如下所示**

非常感谢您的帮助。

```
Game.frog = {
    init: function(){
        this.property1 = something;
        this.property2 = something;
        this.property3 = something;
        this.property1000 = something;
    } 
}; 
```

我的代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){
var Game = {
    init: function(){
        this.property1 = 1;
        this.property2 = 2;
        this.property3 = 3;
        this.property1000 = 1000;
    },

     cons: function(gameAnimals){

        for(var i = 0; i < gameAnimals.length; i++){
             this.gameAnimals[i] = {};
             this.gameAnimals[i].init() = this.init();
            //or         
            //gameAnimals[i].prototype = new Game();        // someAnimal inheritance from Game 
            //gameAnimals[i].prototype.constructor=gameAnimals[i];      // frog constructor
        }
     }    
};

var gameAnimals = ['frog', 'lion', 'cat'];
Game.cons(gameAnimals);
alert(Game.frog[0]+' '+Game.frog[1]+' '+Game.frog[2]+' '+Game.frog[2]);//display  1 2 3 1000
                                                                        //frog.property2 = 2;
                                                                        //frog.property3 = 3;
                                                                        //frog.property1000 = 1000;
}//]]>  

</script>

</head>
<body>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:51:41.103

为什么不创建一个 Animal 函数，然后您可以为每个小动物实例化它：

```
function Animal() {
    self = this;
    self.init = function() {
        self.property1 = 1;
        self.property2 = 2;
        self.property3 = 3;
        self.property1000 = 1000;
    }
}

var frog = new Animal();
frog.init(); 
```

也可以阅读以下内容：[http](http://www.crockford.com/javascript/inheritance.html) ://www.crockford.com/javascript/inheritance.html 以获得一些关于 JS 继承模式的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:57:25.880

你真的应该重新考虑你试图访问你的“动物”的方式......试试这个：

```
window.onload = function () {

    function Animal(name) {
      this.name = name;
      this.property1 = 1;
      this.property2 = 2;
      this.property3 = 3;
      this.property1000 = 1000;
    }

    function Game() {
      this.animals = {};

      this.addAnimal = function (animalName) {
        this.animals[animalName] = new Animal(animalName);

      };
    }

    var game = new Game();

    game.addAnimal('frog');
    game.addAnimal('lion');
    game.addAnimal('cat');

    alert(game.animals.frog.name +"; " + game.animals.frog.property1 +"; " + game.animals.frog.property2);
  }; 
```

# login - 登录脚本以获得更多点击

> ID：16210255
> 
> 赞同：0
> 
> 时间：2013-04-25T08:44:53.300
> 
> 标签：login

我可以编写代码来登录、单击链接、注销并重复，以使我的部分获得更多点击吗？我认为它可以是一个简单的脚本，但不知道如何开始。

# iphone - 仅当通过 iPhone 中的 UIActivityViewController 发布成功时才想执行某些操作

> ID：16210260
> 
> 赞同：3
> 
> 时间：2013-04-25T08:45:03.090
> 
> 标签：iphone, ios, objective-c, xcode, uiactivityviewcontroller

我有一个我正在使用的应用程序`UIActivityViewController`。

这是我正在使用的代码。

```
 NSString *postText = @"My Text";
    NSArray *activityItems = @[postText];

    UIActivityViewController *activityController =
    [[UIActivityViewController alloc]
     initWithActivityItems:activityItems applicationActivities:nil];
    activityController.excludedActivityTypes = [NSArray arrayWithObjects:UIActivityTypePrint, UIActivityTypeCopyToPasteboard, UIActivityTypeAssignToContact, UIActivityTypeSaveToCameraRoll, nil];
    [self presentViewController:activityController
                       animated:YES completion:nil]; 
```

这工作正常。当我从 中打开 Twitter 或电子邮件时`UIActivityViewController`，它会显示我想要分享的文本，这很好。

但是，现在我只想在帖子成功或电子邮件发送成功时在我的数据库中执行一些操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T08:55:37.220

```
 [activityController setCompletionHandler:^(NSString *act, BOOL done)
             {

                 NSLog(@"act type %@",act);
                 NSString *ServiceMsg = nil;
                 if ( [act isEqualToString:UIActivityTypeMail] )           ServiceMsg = @"Mail sent";
                 if ( [act isEqualToString:UIActivityTypePostToTwitter] )  ServiceMsg = @"Post on twitter, ok!";
                 if ( [act isEqualToString:UIActivityTypePostToFacebook] ) ServiceMsg = @"Post on facebook, ok!";

                 if ( done )
                 {
                     UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:ServiceMsg message:@"" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];
                     [Alert show];
                     [Alert release];
                 }
                 else
                 {
                      // didn't succeed. 
                 }
             }]; 
```

使用完成处理程序的“完成”参数检查是否完成

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-14T12:36:25.460

`completionHandler`自 iOS 8.0 起已弃用。改为使用`completionWithItemsHandler`，在此处显示 Swift 示例：

```
let activityViewController = UIActivityViewController(activityItems: sharingItems, applicationActivities: nil)
activityViewController.completionWithItemsHandler = { activity, success, items, error in
    if success {
        // Success handling here    
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-04T12:45:08.567

```
 activityController.completionWithItemsHandler = ^(NSString *act, BOOL done, NSArray *returnedItems, NSError *activityError)

{
    NSString *ServiceMsg = nil;
    if ( [act isEqualToString:UIActivityTypeMail] ) ServiceMsg = @"Mail sended!";
    if ( [act isEqualToString:UIActivityTypePostToTwitter] )ServiceMsg = @"Post on twitter, ok!";
    if ( [act isEqualToString:UIActivityTypePostToFacebook] )ServiceMsg = @"Post on facebook, ok!";
    if ( [act isEqualToString:UIActivityTypeMessage] )ServiceMsg = @"SMS sended!";
    if ( done )
    {
        UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:ServiceMsg message:@"" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];
        [Alert show];
    }
}; 
```

# php - 显示动态内容的工具提示

> ID：16210266
> 
> 赞同：0
> 
> 时间：2013-04-25T08:45:19.277
> 
> 标签：php, javascript, jquery, ajax

我有以下 HTML 代码，它显示带有信息的动态行数，然后有一个图像链接，我单击该链接以获取有关基于字段**的单击行的一些特定信息。**`compentence_ID`

```
 echo "<td>".$compi['Competence_ID']."</td>";
            echo "<td><p style='text-align: center;'>".$compi['Competence_Group']."</p></td>";
            if(isset($compi['Competence_class'])){echo "<td>".$compi['Competence_class']."</td>";}else echo "<td><p style='text-align: center;'>-</p></td>";
            echo "<td>".$compi['Competence_Description']."</td>";
            echo "<td class='evaluation'>";
                echo "<select class='ownlevelselect' id='ownlevelselect-.".$compi['Competence_ID']."' name='level-".$compi['Competence_ID']."' >";
                   if (isset($compi['ownlevel']) && $compi['ownlevel']!= '' && !empty($compi['ownlevel']) && $compi['ownlevel']!= 0) {
                      echo "<option selected value='".$compi['ownlevel']."' selected='selected'>".$compi['ownlevel']."</option>";

                    }
                    echo "<option value='' >--</option>";
                    echo "<option value='1'>1</option><option value='2'>2</option><option value='3'>3</option><option value='4'>4</option><option value='5'>5</option>";
                echo "</select>";
                echo $compi['ownlevel'];

// Below are the links I click to view the content
                echo '<a target="_blank" href="'.INDEX.'?categ='.$_GET['categ'].'&action='.$_GET['action'].'&subaction=viewlevels'.'&levels='.$compi['Competence_ID'].'">';
                echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("What is this?").'"/></a>';
            echo "</td>";
            echo "<td>"; 
```

这行得通，我可以根据发布的 ID 看到相应的信息。但我想知道是否有任何方法可以在工具提示中显示该信息，而无需单击链接并发布 ID。这是从我在单击图像时显示的数据库中检索数据的脚本。

```
 function fetchlevels($Competence_id){
    $this->query="SELECT * FROM levels WHERE comp_id=".$_REQUEST['levels'];
    $tulos=$this->suoritaKysely();
    return $tulos;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:30:22.720

在代码中

```
echo '<a target="_blank" compId='$compi['Competence_ID']' href="#">';
echo '<img class="linkki" src="'.KUVAT.'paivita.gif" alt="'._("tiedot").'" title="'._("What is this?").'"/></a>'; 
```

如果上面的 PHP 代码有问题，请原谅我。基本思想是在锚标签的属性上设置id

```
 <script>
  $( document ).tooltip({
  items: "img",
  content: function() {
    var element = $( this );
    var parent=element .parent();
    if ( element.is( "img" ) ) {
      var text =  $.ajax({ type: "GET", url: remote_url, async: false, }).responseText;//remoe_url is url of your PHP whenre you have code to return the content in tooltip. You can take id as parent.attr('compId')
      return text;
    }
  }
 });
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:56:39.397

简单的答案是：你可以用 ajax 来做。

我们可以在这里提供确切的代码，但您可能想了解这个概念，所以我相信下一个视频教程是一个很好的起点。

[youtube 视频教程：在 MouseOver 上加载动态内容](http://www.youtube.com/watch?v=nlJBKEhCXqY)

在视频说明中，您可以找到视频教程和相关文件的下载链接。您需要的是示例 2。

要使示例正常工作，您只需更改配置文件：connect.php 和此数据库

--

## -- 数据库：`ajax`

* * *

--

## -- 表的表结构`data`

如果不存在则创建表`data`( `id`int(11) NOT NULL AUTO_INCREMENT, `title`varchar(45) NOT NULL, `fname`varchar(45) NOT NULL, `lname`varchar(45) NOT NULL, PRIMARY KEY ( `id`)) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--

## -- 为表转储数据`data`

插入`data`( `id`, `title`, `fname`, `lname`) 值 (1, 'Web Developer', 'Chris', 'Johnson'), (2, 'Web Designer', 'Joe', 'Black'), (3, 'Teacher', ' Jason', 'McIntosh'), (4, 'family man', 'Jake', 'Kawaguchi'), (5, 'Sans Man Card', 'Brett', 'Williams'), (6, 'I don't '不知道...'，'Topher'，'Howden'），（7，'Gamer'，'Jason'，'Luzader'），（8，'Wingman'，'Chuck'，'Strong'），（ 9, 'Basketball Player', 'Chuck', 'Barkley'), (10, 'Singer', 'Marta', 'Zore');

# django - Django South - 创建非空外键

> ID：16210272
> 
> 赞同：4
> 
> 时间：2013-04-25T08:45:37.020
> 
> 标签：django, django-models, django-south

我有一个模型

```
class Mystery(models.Model):
    first = models.CharField(max_length=256)
    second = models.CharField(max_length=256)
    third = models.CharField(max_length=256)
    player = models.ForeignKey(Player) 
```

我添加了播放器 ForeignKey，但是当我尝试使用 South 迁移它时，似乎无法使用 null=False 创建它。我有这个消息：

> 字段“Mystery.player”没有指定默认值，但不为空。由于您要添加此字段，因此您必须指定用于现有行的默认值。您是否希望：
> 1\. 立即退出，并在 models.py 中为字段添加默认值
> 2\. 立即指定一次性值以用于现有列

我使用这个命令：

> manage.py schemamigration myapp --auto

非常感谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-24T17:56:17.823

这最好在 3 次迁移中完成。

步骤 1\. 创建新模型并允许 player 为空：`player = models.ForeignKey(Player, null=True)`

步骤 2\. 运行`./manage.py schemamigration <app> --auto`

步骤 3\. 运行`./manage.py datamigration <app> set_default_players`

步骤 4\. 向前和向后更新`<app>/migrations/<number>_set_default_players.py`以使用您喜欢的任何逻辑来设置默认播放器。确保每个`Mystery`对象都有`player`.

步骤 5\. 更新模型，`Mystery`使.`player``null=False`

步骤 6\. 运行`./manage.py schemamigration <app> --auto`

步骤 7\. 运行`./manage.py migrate <app>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-16T09:37:26.237

另一种选择是在添加 ForeignKey 之前创建[数据迁移](http://south.readthedocs.org/en/latest/tutorial/part3.html#data-migrations)，您可以在其中创建具有特定 ID 的新 Player 实例。确保该 ID 以前不存在于您的数据库中。

1.创建数据迁移文件

```
$ ./manage.py datamigration myapp add_player
Created 00XX_add_player.py 
```

2.编辑文件的*前进*和*后退*方法：

```
def forwards(self, orm):
    orm['myapp.Player'].objects.create(name=u'Very misterious player', id=34)

def backwards(self, orm):
    # Haven't tested this one yet
    orm['myapp.Player'].objects.filter(id=34).delete() 
```

3.将 ForeignKey 添加到您的 Misery 类并再次迁移架构。它将要求您的数据迁移 id 的默认值，在本例中为 34。

```
 $ ./manage.py schemamigration --auto myapp
 ? The field 'Mistery.player' does not have a default specified, yet is NOT NULL.
 ? Since you are adding this field, you MUST specify a default
 ? value to use for existing rows. Would you like to:
 ?  1\. Quit now, and add a default to the field in models.py
 ?  2\. Specify a one-off value to use for existing columns now
 ? Please select a choice: 2
 ? Please enter Python code for your one-off default value.
 ? The datetime module is available, so you can do e.g. datetime.date.today()
 >>> 34
 + Added field player on myapp.Mistery
Created 0010_auto__add_field_mistery_player.py. You can now apply this migration with: ./manage.py migrate myapp 
```

4.最后运行 migrate 命令，它将按顺序执行迁移，插入新 Player 并使用对新 Player 的引用更新所有 Mistery 行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:17:29.940

如果您的数据库已经包含神秘对象，那么南必须知道在`player`字段中输入了什么值，因为它不能为空。

一种可能的解决方案：

选择

```
 2\. Specify a one-off value to use for existing columns now 
```

然后输入 1。因此，您所有现有的神秘对象现在都将指向具有 pk = 1 的 Player。然后您可以在管理页面中更改（如果需要）它。

# swt - 是否有可用于收集用户对 SWT GUI 反馈的框架？

> ID：16210275
> 
> 赞同：2
> 
> 时间：2013-04-25T08:45:44.267
> 
> 标签：swt, bug-reporting, user-feedback

经过 2 年的开发，我们的 Eclipse RCP 桌面应用程序终于完成了。开发的最后一步是允许客户就应用程序中的措辞和标签提供反馈。

大约有 10 人提供反馈，但客户愿意在将其发送给我们实施之前对其进行整合。

我的第一个想法是提供一个 Google 表单，要求他们上传屏幕截图并精确指定要更改的文本的位置。我现在想知道是否存在自动执行此操作的框架（即按“CTRL+ALT”，您可以自动在应用程序中的违规文本周围绘制一个框。

**简而言之：是否有专门设计用于收集对 GUI 中措辞的反馈的用户反馈工具？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:15:03.323

Mylyn 包括一些设施来（几乎）完全做到这一点。在标准 Eclipse 中，尝试`Help`-> `Report Bug or Enhancement`...

您使用各种`org.eclipse.mylyn.tasks...`扩展点来指定产品、区域和错误模板等内容。

# c# - 如何捕获在 Windows Server 2003 中取消的注销

> ID：16210277
> 
> 赞同：3
> 
> 时间：2013-04-25T08:45:53.977
> 
> 标签：c#, c++, c, windows, delphi

我正在开发一个在 Windows 2003 上运行的基于终端服务的系统。它由一个桌面替换应用程序组成，用户可以从中启动程序。它还有一个注销按钮。当用户注销时，必须发生两件事。首先，他从 Windows 中注销。然后调用存储过程清理用户数据库状态。这几乎可以正常工作，但在一种情况下，即用户取消注销事件时。典型场景： 1- 用户登录，启动 MS Word，编辑文档，不保存。2 - 然后用户按下注销按钮。3- MS Word 对此做出反应，要求用户保存他的更改。4 - 用户按下取消。

此时桌面应用程序可能已经调用存储过程清理数据库状态。如何在桌面应用程序中捕捉到这种行为？是否有消息说结束会话操作已取消？

我的问题有意义吗？

哦，所有的应用程序都是用 Delphi 7 编写的，但我也使用 C、C++ 和 C# 工作，所以这些语言的答案也很受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:01:56.480

如果您的用户状态逻辑在您的外壳替换中，那么请考虑重新设计应用程序：将自定义外壳与会话管理分离。

例如：在服务中移动您的用户状态逻辑。在 RDS 通知的此服务寄存器中：WTS_SESSION_LOGON/WTS_SESSION_LOGOFF。

我认为 WTS_SESSION_LOGOFF*仅*在实际注销发生时发送，即如果用户单击 Word 中的取消按钮，则 Windows 会知道用户实际上没有注销并且操作系统不会发送 WTS_SESSION_LOGOFF（这未经测试，但听起来合乎逻辑）。

这样你就不用处理 WM_ENDSESSION/WM_QUERYENDSESSION 的东西了。

[最近我写了一些关于 RDS 通知主题的指南。](https://stackoverflow.com/a/15970898/1022219)

# jpa - 控制器 Bean 没有获取用户名

> ID：16210278
> 
> 赞同：0
> 
> 时间：2013-04-25T08:45:56.250
> 
> 标签：jpa, eclipselink, glassfish-3, ejb-3.1, jsf-2.2

我真的遇到了一个严重的问题。突然之间，我正常工作的代码停止工作。我不知道为什么会这样！！！！最糟糕的是，我今天必须部署我的项目:(。不知道这样说是否正确，但所有这一切都是在构建路径中添加 PrimeFaces 后 2 天开始的。谁能指引我正确的方向. 会有很大帮助的！

我有以下配置：

1.  玻璃鱼 v3
2.  Mojara 2.1.6-FCS
3.  JPA Eclipse 链接

**控制器 Bean**

```
public List<Usergroupdetail> getUsergroupdetail_list() {
        List<Usergroupdetail> myUserGroupDetail = new ArrayList<Usergroupdetail>(
                lODBN.listUserGroupDetail(loginBean.getUsername()));
        System.out.println("username found is:" + loginBean.getUsername());
        return myUserGroupDetail;
    } 
```

**从 JPA PoJO UserGroupReport 获取完整的数据列表**

```
public List<Usergroupreport> getGroupId_list() {
    List<Usergroupreport> myAllgroupIds = new ArrayList<Usergroupreport>(
            lODBN.findAllGroupIdByUser(loginBean.getUsername()));
    return myAllgroupIds;
} 
```

**堆栈跟踪**

```
WARNING: PWC4011: Unable to set request character encoding to ISO-8859-1 from context /WebApp, because request parameters have already been read, or ServletRequest.getReader() has already been called
FINE: SELECT ROWID, GROUPID, GROUPNAME, USERNAME FROM usergroupdetail WHERE (USERNAME = ?)
    bind => [1 parameter bound]
INFO: []
INFO: username found is:null
FINE: SELECT ROWID, GROUPID, GROUPNAME, USERNAME FROM usergroupdetail WHERE (USERNAME = ?)
    bind => [1 parameter bound]

INFO: []
INFO: username found is:null
FINE: SELECT ROWID, GROUPID, GROUPNAME, USERNAME FROM usergroupdetail WHERE (USERNAME = ?)
    bind => [1 parameter bound]
INFO: []
INFO: username found is:null
FINE: SELECT RowId, LOD1COSTCENTER, LOD1DISPLAYNAME, LOD1DOMAIN, LOD1MAIL, LOD1USER, LOD2COSTCENTER, LOD2DISPLAYNAME, LOD2DOMAIN, LOD2MAIL, LOD2USER, Access, AuthentifizierteBenutzer, Auto, Comment, Comment1, Comment2, Comment3, Domain1, Domain2, EmailFeedback, EmailSendStatus, RechteGruppeChange, RechteGruppeRead, Security, Type, Username FROM lodreport WHERE (Username = ?)
    bind => [1 parameter bound]
INFO: []
INFO: LOD list for Username :null
FINE: SELECT RowId, LOD1COSTCENTER, LOD1DISPLAYNAME, LOD1DOMAIN, LOD1MAIL, LOD1USER, LOD2COSTCENTER, LOD2DISPLAYNAME, LOD2DOMAIN, LOD2MAIL, LOD2USER, Access, AuthentifizierteBenutzer, Auto, Comment, Comment1, Comment2, Comment3, Domain1, Domain2, EmailFeedback, EmailSendStatus, RechteGruppeChange, RechteGruppeRead, Security, Type, Username FROM lodreport WHERE (Username = ?)
    bind => [1 parameter bound]
INFO: []
INFO: LOD list for Username :null
FINE: SELECT RowId, LOD1COSTCENTER, LOD1DISPLAYNAME, LOD1DOMAIN, LOD1MAIL, LOD1USER, LOD2COSTCENTER, LOD2DISPLAYNAME, LOD2DOMAIN, LOD2MAIL, LOD2USER, Access, AuthentifizierteBenutzer, Auto, Comment, Comment1, Comment2, Comment3, Domain1, Domain2, EmailFeedback, EmailSendStatus, RechteGruppeChange, RechteGruppeRead, Security, Type, Username FROM lodreport WHERE (Username = ?)
    bind => [1 parameter bound]
INFO: []
INFO: LOD list for Username :null 
```

**登录豆**

```
package bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

//import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

import ejb.UserDaoBean;
import ejb.UserGroupDaoBean;

import model.User;

@ManagedBean(name = "loginBean")
@SessionScoped
public class LoginBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @EJB
    private UserDaoBean uDB;
    @EJB
    private UserGroupDaoBean uGDB;
    private User userId;

    public List<User> usernameFirstLastName;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String firstName;

    public String lastName;

    public String password;

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public List<User> getUsernameFirstLastName() {
        List<User> myName = new ArrayList<User>(uDB.findFirtLastNames(username));
        return myName;
    }

    public void setUsernameFirstLastName(List<User> usernameFirstLastName) {
        this.usernameFirstLastName = usernameFirstLastName;
    }

    private String username;

    public User getUserId() {
        return userId;
    }

    public void setUserId(User userId) {
        this.userId = userId;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String login() {
        FacesContext context = FacesContext.getCurrentInstance();

        if (uDB.validateUser(username,password)) {
            userId = uDB.findUser(username);

            context.getExternalContext().getSessionMap().put("userId", userId);
            if (uGDB.validateGroup(userId)) {
                return "home.jsf?faces-redirect=true&amp;includeViewParams=true";
            }
            return "normalHome.jsf?faces-redirect=true&amp;includeViewParams=true";

        } else {
            FacesMessage message = new FacesMessage();
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            message.setSummary("Username doesn't exists! OR User is trying to login from someone else's account");
            context.addMessage("", message);
            return "newloginerror.jsf?faces-redirect=true";
        }
    }

    public String logout() {
        FacesContext.getCurrentInstance().getExternalContext()
                .invalidateSession();
        return "logout.jsf?faces-redirect=true";
    }

} 
```

**登录页面**

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <link href="./css/PageLayout.css" rel="stylesheet" type="text/css" />
    <title>Login</title>
</h:head>
<h:body>
    <f:view>
        <div style="background-color: #205a8c; width: auto; height: 60px">
            <h3 style="font-size: large; position: relative;" align="left">Lord
                Of Data Web App</h3>
        </div>
        <div id="wrappers">
            <div class="content pls centering">
                <h:form>
                    <table class="form_table" style="background-color: silver;">
                        <tbody>
                            <tr>
                                <td>Username</td>
                                <td><h:inputText id="inputusername"
                                        value="#{loginBean.username}" required="true"
                                        requiredMessage="Username is required!"></h:inputText> <h:message
                                        for="inputusername"></h:message></td>
                            </tr>

                            <tr>
                                <td>Password</td>
                                <td><h:inputSecret id="inputpassword"
                                        value="#{loginBean.password}" required="true"
                                        requiredMessage="Password is required!"></h:inputSecret> <h:message
                                        for="inputpassword"></h:message></td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="buttonsoptions" align="center" style="padding-top: 10px;">
                        <h:panelGroup>
                            <tr>
                                <td><h:commandButton id="login" value="Login"
                                        action="#{loginBean.login}"></h:commandButton></td>
                            </tr>

                        </h:panelGroup>
                    </div>
                </h:form>
            </div>
        </div>
    </f:view>
</h:body>
</html> 
```

**用于登录身份验证的 EJB 代码片段**

```
public boolean validateUser(String username, String password) {
        try {
            Query myQuery = entityManager.createNamedQuery("userverification")
                    .setParameter("username", username)
                    .setParameter("password", password);
            User result = (User) myQuery.getSingleResult();

            if (result != null) {
                System.out.println("Loggin sucessful!");
                return true;

            } else {
                System.out.println("User does not exists in the system");
                return false;
            }
        } catch (NoResultException e) {

            return false;
        }

    } 
```

我尝试将用户名用于我的另一个会话 bean，直到两天前它工作得非常好。这是此 bean 的代码，我试图在其中调用从登录 bean 中选择的用户名

**豆**

```
package bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;

import ejb.LODReportDaoBean;
import ejb.LordOfDataDaoBeanNormal;
import ejb.UserDaoBean;

import model.Lodreport;
import model.Usergroupdetail;
import model.Usergroupreport;

@ManagedBean(name = "lordOfDataNormalUserBean")
@SessionScoped
public class LordOfDataNormalUserBean implements Serializable {

    /**
     * @author Sushant Pandey
     */
    private static final long serialVersionUID = 1L;

    @EJB
    private LordOfDataDaoBeanNormal lODBN;

    @EJB
    private UserDaoBean uDB;

    @EJB
    private LODReportDaoBean lONRDB;

    @ManagedProperty(value = "#{loginBean}")
    private LoginBean loginBean;

    public LoginBean getLoginBean() {
        return loginBean;
    }

    public void setLoginBean(LoginBean loginBean) {
        this.loginBean = loginBean;
    }

    public List<Lodreport> lodnormal_list;

    public List<Usergroupreport> usergroup_list;

    public List<Usergroupdetail> usergroupdetail_list;

    public List<Lodreport> findDataByRowId;

    private Lodreport myreport = new Lodreport();

    public Lodreport getMyreport() {
        return myreport;
    }

    public void setMyreport(Lodreport myreport) {
        this.myreport = myreport;
    }

    public void setFindDataByRowId(List<Lodreport> findDataByRowId) {
        this.findDataByRowId = findDataByRowId;
    }

    public int security;
    public String username;
    public String access;
    public String authentifizierteBenutzer;
    public String auto;
    public String comment;
    public String comment1;
    public String comment2;
    public String comment3;
    public String domain1;
    public String domain2;
    public String emailFeedback;
    public String emailSendStatus;
    public String lOD1CostCenter;
    public String lOD1DisplayName;
    public String lOD1Domain;
    public String lOD1Mail;
    public String lOD1User;
    public String lOD2CostCenter;
    public String lOD2DisplayName;
    public String lOD2Domain;
    public String lOD2Mail;
    public String lOD2User;
    public String rechteGruppeChange;
    public String rechteGruppeRead;
    public String type;
    public int rowId;

    public List<Usergroupreport> groupId_list;

    public boolean edit;

    public boolean isEdit() {
        return edit;
    }

    public void setEdit(boolean edit) {
        this.edit = edit;
    }

    public void setGroupId_list(List<Usergroupreport> groupId_list) {
        this.groupId_list = groupId_list;
    }

    public void setLodnormal_list(List<Lodreport> lodnormal_list) {
        this.lodnormal_list = lodnormal_list;
    }

    public int getSecurity() {
        return security;
    }

    public void setSecurity(int security) {
        this.security = security;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getAccess() {
        return access;
    }

    public void setAccess(String access) {
        this.access = access;
    }

    public String getAuthentifizierteBenutzer() {
        return authentifizierteBenutzer;
    }

    public void setAuthentifizierteBenutzer(String authentifizierteBenutzer) {
        this.authentifizierteBenutzer = authentifizierteBenutzer;
    }

    public String getAuto() {
        return auto;
    }

    public void setAuto(String auto) {
        this.auto = auto;
    }

    public String getComment() {
        return comment;
    }

    public void setComment(String comment) {
        this.comment = comment;
    }

    public String getComment1() {
        return comment1;
    }

    public void setComment1(String comment1) {
        this.comment1 = comment1;
    }

    public String getComment2() {
        return comment2;
    }

    public void setComment2(String comment2) {
        this.comment2 = comment2;
    }

    public String getComment3() {
        return comment3;
    }

    public void setComment3(String comment3) {
        this.comment3 = comment3;
    }

    public String getDomain1() {
        return domain1;
    }

    public void setDomain1(String domain1) {
        this.domain1 = domain1;
    }

    public String getDomain2() {
        return domain2;
    }

    public void setDomain2(String domain2) {
        this.domain2 = domain2;
    }

    public String getEmailFeedback() {
        return emailFeedback;
    }

    public void setEmailFeedback(String emailFeedback) {
        this.emailFeedback = emailFeedback;
    }

    public String getEmailSendStatus() {
        return emailSendStatus;
    }

    public void setEmailSendStatus(String emailSendStatus) {
        this.emailSendStatus = emailSendStatus;
    }

    public String getlOD1CostCenter() {
        return lOD1CostCenter;
    }

    public void setlOD1CostCenter(String lOD1CostCenter) {
        this.lOD1CostCenter = lOD1CostCenter;
    }

    public String getlOD1DisplayName() {
        return lOD1DisplayName;
    }

    public void setlOD1DisplayName(String lOD1DisplayName) {
        this.lOD1DisplayName = lOD1DisplayName;
    }

    public String getlOD1Domain() {
        return lOD1Domain;
    }

    public void setlOD1Domain(String lOD1Domain) {
        this.lOD1Domain = lOD1Domain;
    }

    public String getlOD1Mail() {
        return lOD1Mail;
    }

    public void setlOD1Mail(String lOD1Mail) {
        this.lOD1Mail = lOD1Mail;
    }

    public String getlOD1User() {
        return lOD1User;
    }

    public void setlOD1User(String lOD1User) {
        this.lOD1User = lOD1User;
    }

    public String getlOD2CostCenter() {
        return lOD2CostCenter;
    }

    public void setlOD2CostCenter(String lOD2CostCenter) {
        this.lOD2CostCenter = lOD2CostCenter;
    }

    public String getlOD2DisplayName() {
        return lOD2DisplayName;
    }

    public void setlOD2DisplayName(String lOD2DisplayName) {
        this.lOD2DisplayName = lOD2DisplayName;
    }

    public String getlOD2Domain() {
        return lOD2Domain;
    }

    public void setlOD2Domain(String lOD2Domain) {
        this.lOD2Domain = lOD2Domain;
    }

    public String getlOD2Mail() {
        return lOD2Mail;
    }

    public void setlOD2Mail(String lOD2Mail) {
        this.lOD2Mail = lOD2Mail;
    }

    public String getlOD2User() {
        return lOD2User;
    }

    public void setlOD2User(String lOD2User) {
        this.lOD2User = lOD2User;
    }

    public String getRechteGruppeChange() {
        return rechteGruppeChange;
    }

    public void setRechteGruppeChange(String rechteGruppeChange) {
        this.rechteGruppeChange = rechteGruppeChange;
    }

    public String getRechteGruppeRead() {
        return rechteGruppeRead;
    }

    public void setRechteGruppeRead(String rechteGruppeRead) {
        this.rechteGruppeRead = rechteGruppeRead;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public int getRowId() {
        return rowId;
    }

    public void setRowId(int rowId) {
        this.rowId = rowId;
    }

    public void setUsergroup_list(List<Usergroupreport> usergroup_list) {
        this.usergroup_list = usergroup_list;
    }

    public void setUsergroupdetail_list(
            List<Usergroupdetail> usergroupdetail_list) {
        this.usergroupdetail_list = usergroupdetail_list;
    }

    @PostConstruct
    public void init() {
        // getLodnormal_list();
        getUsergroupdetail_list();
//      getGroupId_list();
        getUsername();
    }

    public String displayReport() {

        getLodnormal_list();

        return "reportLordOfDataNormal.jsf?faces-redirect=true";
    }

    public List<Lodreport> getLodnormal_list() {
        List<Lodreport> myLodreport = new ArrayList<Lodreport>(
                lODBN.reportLODNormal(loginBean.getUsername()));
        System.out.println("LOD list for Username :" + loginBean.getUsername() );
        return myLodreport;
    }

    public List<Usergroupreport> getUsergroup_list() {
        return usergroup_list;
    }

    public List<Usergroupdetail> getUsergroupdetail_list() {
        List<Usergroupdetail> myUserGroupDetail = new ArrayList<Usergroupdetail>(
                lODBN.listUserGroupDetail(loginBean.getUsername()));
        System.out.println("username found is:" + loginBean.getUsername());
        return myUserGroupDetail;
    }

    public String editLODDataNormal() {

        lODBN.updateExistingLODDataNormal(security, loginBean.getUsername(),
                access, authentifizierteBenutzer, auto, comment, comment1,
                comment2, comment3, domain1, domain2, emailFeedback,
                emailSendStatus, lOD1CostCenter, lOD1DisplayName, lOD1Domain,
                lOD1Mail, lOD1User, lOD2CostCenter, lOD2DisplayName,
                lOD2Domain, lOD2Mail, lOD2User, rechteGruppeChange,
                rechteGruppeRead, type, rowId);

        return "reportLordOfDataNormal.jsf?faces-redirect=true";

    }

    public List<Usergroupreport> getGroupId_list() {
        List<Usergroupreport> myAllgroupIds = new ArrayList<Usergroupreport>(
                lODBN.findAllGroupIdByUser(loginBean.getUsername()));
        return myAllgroupIds;
    }

    public void edit(Lodreport myreport) {
        this.myreport = myreport;
        edit = true;
    }

    public void saveMyReport(){
        lONRDB.updateReport(myreport);
    }

} 
```

# php - 在 php 中上传期间对 pdf 文件进行安全检查

> ID：16210279
> 
> 赞同：0
> 
> 时间：2013-04-25T08:45:58.303
> 
> 标签：php, file-upload

我正在尝试在上传之前检查 pdf。

我想检查 pdf 是否是恶意的。

例如：我将一个 php 文件保存为 pdf 并上传。但服务器显示错误，它不是有效的 pdf。

那么我如何在php中检查pdf是否真实？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:48:57.683

请参阅 php 的 Fileinfo 扩展名：[http](http://www.php.net/fileinfo) ://www.php.net/fileinfo以及此处的使用示例：[http](http://www.php.net/manual/en/function.finfo-open.php)
: //www.php.net/manual/en/function.finfo-open.php LE：请注意, FileInfo 是您检查文件类型的唯一方法。不要使用它们的扩展名来检查文件类型，这是一个巨大的错误。
此外，如果 Fileinfo 由于某种原因不可用并且您无法安装它并且您具有 shell 访问权限，您可以：`$info = exec('file -ib ' . escapeshellarg($filePath)); print_r($info);`

# matlab - 从听诊器输入的心脏信号中找到 R 峰值

> ID：16210280
> 
> 赞同：0
> 
> 时间：2013-04-25T08:46:00.547
> 
> 标签：matlab, signals, signal-processing

将使用听诊器测量的心跳信号通过硬件（主要是放大器和截止频率为 100hz 的低通滤波器）传给计算机的声卡。现在用截止频率 100hz 过滤信号。下面给出了找到峰值和每分钟节拍的代码。代码仅适用于某些情况。请帮我找出错误

```
clear all
%input the signal into matlab

[x,fs]=wavread('heartbeat.wav');
figure(1)
subplot(2,1,1)
x1=x(:,2);
plot(x1(500:10000),'r-');
title('unfiltered input x(n),cut off frequency 0.0270,passband 60hz,stopband 70hz');
ylabel('amplitude in volts');
xlabel('number of samples')
grid on

%to filter the signal above 50-60 hz
order=4;
h=fir1(4,0.0270,hamming(order+1));
y=filter(h,1,x1);
subplot(2,1,2)
plot(y(500:10000),'b-')
title('filtered output y(n),cut off frequency 0.0270,passband 50hz,stopband 60hz');
ylabel('amplitude in volts');
xlabel('number of samples')
grid on
%sound(y,5000)

th = max(y) * 0.9; %So here I'm considering anything less than 90% of the max as not a real peak... this bit really depends on your logic of finding peaks though which you haven't explained
Yth = zeros(length(y), 1);
Yth(y > th) = y(y > th);

Ydiff = diff(Yth);
Ydiff_logical = Ydiff < 0;
Ypeaks = diff(Ydiff_logical) == 1;

p=sum(Ypeaks)

N = length(y);
duration_seconds=N/fs;
duration_minutes=duration_seconds/60;
BPM=p/duration_minutes;
bpm=ceil(BPM)

figure(2)
%frequency response of the filter
freqz(h,1)
title('Frequency response');
xlabel('normalized frequency (X pi) radians per sample');
ylabel('Magnitude');
grid on; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:48:58.077

没有示例数据，我只是在猜测，但我认为阈值不会为您提供正确的数据：很可能，峰每次的高度都不同（“每次”我指的是每次运行和每个人打）。因此，如果使用过高的峰值，则会因为心跳太低而错过一些真正的峰值。如果您使用太低的峰值，您可能会重复计算一些心跳，因为每个心跳包含多个峰值（对不起，我不记得这些叫什么了）。事情很可能会随着时间而改变，所以我什至不会尝试为单个记录设置阈值并放手，甚至从数据中得出阈值可能会有问题。

使用其他技术，例如互相关或某种修改过的零交叉，或专门为心跳的独特功能设计的技术（我想有一些东西。你搜索过文献吗？），你可能会有更好的运气。

# php - 需要属性传递给谷歌图表javascript

> ID：16210284
> 
> 赞同：1
> 
> 时间：2013-04-25T08:46:03.290
> 
> 标签：php, jquery

我正在使用 WordPress，所以我检查了它是否是一个典型的 WordPress 问题，但它是一个常见的 php 和 jQuery 问题。

我有一段代码用不同的数据执行了 12 次。我必须使用 jQuery 收集这些数据并将其传递给另一个小部件，只有当我单击一个小部件时才会显示该小部件。另一个小部件必须显示点击的小部件的数据并呈现谷歌图表。故意的节目和谷歌图表的事情没有问题，我唯一的问题是传递数据。我尝试了很多东西，但我是 jQuery 新手，目前肯定缺乏技能，所以我希望你们能帮助我。我已经简化了代码以向您展示示例和结构。

将执行 12 次的代码：

```
<a href="javascript:void(0);" class="span1 <?php echo $color .' '. $styleName; ?>">
    <div class="box_top">
        <div class="icon"></div>
        <div class="title"><h2><?php echo $title; ?></h2></div>
    </div>
    <div class="box_middle">
        <?php echo $currentValue; ?>
    </div>
    <div class="box_bottom">
        <div class="lastweek">
            <p>Last week:</p>
        </div>
        <div class="number">
            <?php echo $prevValue; ?>
        </div>
    </div>
</a> 
```

这个小部件和其他小部件之间的唯一区别是类中的 span1 将是 span5。

长话短说：我需要收集变量的数据，这样我就可以将它们传递给另一个小部件，有人可以帮我解决这个问题或将我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:54:53.827

您可以直接从 html 中选择值，但最好使用[jQuery 数据](http://api.jquery.com/jQuery.data/)。

## HTML

```
<a href="javascript:void(0);" data-current="<?php echo $currentValue; ?>" data-prev="<?php echo $prevValue; ?>" data-title="<?php echo $title; ?>" class="span1 <?php echo $color .' '. $styleName; ?>">
    <div class="box_top">
        <div class="icon"></div>
        <div class="title"><h2><?php echo $title; ?></h2></div>
    </div>
    <div class="box_middle">
        <?php echo $currentValue; ?>
    </div>
    <div class="box_bottom">
        <div class="lastweek">
            <p>Last week:</p>
        </div>
        <div class="number">
            <?php echo $prevValue; ?>
        </div>
    </div>
</a> 
```

## jQuery

```
$('body').on('click','.span1',function(){
    var title=$(this).data('title');
    var cur=$(this).data('current');
    var prev=$(this).data('prev');

    alert(title+': '+prev+' - '+cur);
}); 
```

# c# - C# 对象流程图

> ID：16210290
> 
> 赞同：3
> 
> 时间：2013-04-25T08:46:25.887
> 
> 标签：c#, .net, graph

我的对象或多或少如下所示：

```
public class Object1
{
   public string connectionIn1 { get; set; }
   public string connectionIn2 { get; set; }
   public string connectionIn3 { get; set; }

   public string connectionOut1 { get; set; }
   public string connectionOut2 { get; set; }
   public string connectionOut3 { get; set; }

   public dynamic property1 { get; set; }
   public dynamic property2 { get; set; }
   public dynamic property3 { get; set; }

} 
```

`connectionIn`对象通过and`connectionOut`属性相互连接。我需要做的是让用户使用流程图环境将对象放置在流程图上，并将它们连接起来。是否有任何.NET 流程图库允许我将对象放置在流程图上，并将属性设置为流程图上的特定对象并连接对象？

我想保持这个应用程序开源，所以商业解决方案不是我的选择......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:00:07.893

您尚未指定，但如果您使用的是 WPF，请查看[Graph#](http://graphsharp.codeplex.com/)。我自己已经用了一段时间了，一点也不差。

# sql - 用“like”查询搜索结果

> ID：16210292
> 
> 赞同：1
> 
> 时间：2013-04-25T08:46:35.197
> 
> 标签：sql, oracle

我正在寻找一个好的查询字符串来获得更好的搜索结果。

目前我使用运营商`like`

```
select title from table where lower(column) like '%data%' 
```

但结果不够准确。

我的“搜索引擎”正在我的网站上寻找事件、新闻和网络内容，所以我想获得带有, , 之`'data'`类的词的结果，但没有像`'Big-Data'`, `'Big Data.'`,之类的结果。我可以使用吗？`'All Data'``'maxdata'``'bigdata'``'datapool'``REGEXP_LIKE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:07:13.017

```
select title 
from table 
where regexp_like(column, '(\W|^)data(\W|$)', 'i') 
```

# javascript - 函数执行顺序

> ID：16210295
> 
> 赞同：0
> 
> 时间：2013-04-25T08:46:42.143
> 
> 标签：javascript

我有以下代码：

```
function() {
    $.getJSON(
        myurl + '/get_data',
        function(data) {
            function sort_data(first, second) {
                return (first.sort - second.sort);
            }
            console.log(data);
            console.log(data.sort(sort_data));
        }
        ... snipped for brevity 
```

数据是对象数组，每个对象都有排序字段，它是整数。默认情况下，它们都是随机顺序的。所以执行上面的代码后它告诉我排序前后的数据是相同的。至少两个 console.log 输出是相同的（并且它们是排序的）。但是，如果我跳过排序部分而只是 console.log(data.objects) - 它是不同的并且是未排序的。
似乎先执行排序，然后执行console.logs。为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:48:24.533

这是因为`console.log()`打印对对象的引用，并且 sort() 重新排列同一对象引用中的数据。

如果您想查看差异，请使用

```
console.log(JSON.stringify(data));
console.log(JSON.stringify(data.sort(sort_data))); 
```

`JSON.stringify()`创建 json 对象的字符串表示形式，它不会受到对 json 对象所做的任何进一步更改的影响。

# facebook - 交互式 facebook 应用程序 Open Graph Object

> ID：16210299
> 
> 赞同：2
> 
> 时间：2013-04-25T08:46:51.127
> 
> 标签：facebook, facebook-graph-api

我在 facebook 上看到了 nike run 的应用程序

它以交互式图表出现在我的墙上

我怎么能做一个这样的？

有人建议我在 Graph Api 和 Open Graph 之间纠结？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:01:28.157

现在出现的这些帖子中的大多数似乎都使用 Flash，并且只是将它们嵌入到帖子中。可以通过使用自定义 Open Graph 对象进行交互，方法是在表示 Open Graph 对象的 URL 上添加以下元标记

```
 <head prefix="og: http://ogp.me/ns fb: http://ogp.me/ns/fb">
    <meta property="fb:app_id"       content="APP_ID" />
    <meta property="og:type"         content="game" />
    <meta property="og:url"          content="http://example.com/embed/" />
    <meta property="og:title"        content="Beat Gareth's high score" />
    <meta property="og:description"  content="Gareth scored 2800, can you beat it?" />
    <meta property="og:image"        content="http://example.com/game.png" />
    <meta property="og:video"        content="http://example.com/game.swf" />
    <meta property="og:video:width"  content="398" />
    <meta property="og:video:height" content="299" />
    <meta property="og:video:type"   content="application/x-shockwave-flash" /> 
```

并在用户的提要端点上发布为

```
POST /USER_ID/feed?
  link=http://example.com/embed/
  access_token=USER_ACCESS_TOKEN 
```

有关如何执行此操作的更多详细信息，请查看[此](https://developers.facebook.com/docs/howtos/feed-gaming/)。

# javascript - 无法在 JSF 中用 JavaScript 替换 div 内容

> ID：16210301
> 
> 赞同：1
> 
> 时间：2013-04-25T08:47:01.693
> 
> 标签：javascript, jsf-2

我使用下面的 JavaScript 代码替换 a 的内容`div`，但它不起作用。

```
<h:head>
    <script type="text/javascript">
        function Findchange() {
            document.getElementById("myDiv").innerHTML='ravi';
        }
    </script>
</h:head>
<h:body>
    <h:form  id="form" onsubmit="Findchange();">
        <div id="myDiv">hello</div>
        <h:commandButton value="submit" ></h:commandButton>
    </h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:50:53.310

该方法`getElementById`是在文档对象上定义的。所以像这样使用它：

```
document.getElementById('myDiv').innerHTML = 'ravi'; 
```

此外，您可能需要`return` `false`不提交页面：

```
<script>
    function Findchange(){
        document.getElementById('myDiv').innerHTML = 'ravi';
        return false;
    }
</script>

<form onsubmit="return Findchange();">
    <div id="myDiv">hello</div>
    <input type="submit"/>
</form> 
```

否则您所做的任何更改都将立即丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:57:36.860

事实上，如果您**按原样**分析代码，您会得到“近似”的事件转折点：

1.  你点击按钮。
2.  表格即将提交。
3.  你的 JavaScript 函数被调用，因此你的值`div` **被改变了**。
4.  表格已提交。
5.  发生了对相同视图的回发，有效地使您`div`回到`hello`.

这就是一切的运作方式。

顺便说一句，`<div id="myDiv" onclick="Findchange()">hello</div>`正在工作，并且不`<h:commandButton>`通过使用其`onclick`属性来提交表单，例如：

```
<h:commandButton value="submit" onclick="return Findchange()"/> 
```

和

```
function Findchange() {
    document.getElementById("myDiv").innerHTML='ravi';
    return false;
} 
```

* * *

附带说明一下，实现功能的 JSF 方法是使用 AJAX（或者同步）更新 div 的内容，例如：

```
<h:form  id="form">
    <h:panelGroup id="div-id" display="block">
        #{bean.name}
    </h:panelGroup>
    <h:commandButton value="Submit" action="#{bean.changeName}">
        <f:ajax render="div-id"/>
    </h:commandButton>
</h:form> 
```

豆类

```
@ManagedBean
@RequestScoped
public class Bean {

    private String name = "Josh";//getter + setter

    public String changeName() {
        name = "Ravi";
        return null;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:10:56.187

您不应该提交表单来执行此操作。如果您提交它将丢失并且页面将再次刷新。

您已经在按钮级别调用了 JavaScript 函数，如下所示，并且按钮不应提交如下代码中所写的表单，

```
<h:commandButton value="submit" type="button" onclick="Findchange()"></h:commandButton> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:33:32.580

灵感来自@louisbros：

```
 <h:head>
        <script>
            function Findchange(){
                document.getElementById('myDiv').innerHTML = 'ravi';
                return false;
            }
        </script>
    </h:head>
    <h:form onsubmit="return Findchange();">
        <div id="myDiv">hello</div>
        <h:commandButton value="test" />
    </h:form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T11:55:23.210

而不是*旧*的提交使用`<f:ajax`（`execute="@form" render="@form` 例如）并调用你的js`success`代码`<f:ajax`

```
<h:head>
    <script type="text/javascript">
        function Findchange() {
            document.getElementById("myDiv").innerHTML='ravi';
        }
    </script>
</h:head>
<h:body>
    <h:form  id="form">
        <div id="myDiv">hello</div>
        <h:commandButton value="submit" >
            <f:ajax execute="@form" render="@form" onevent="function(data) { if (data.status === 'success') {Findchange(); } }"></f:ajax>
        </h:commandButton>
    </h:form>
</h:body> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-02T14:24:44.677

你应该写“ **form:myDiv** ”，而不仅仅是“ **myDiv** ”这样

```
<h:head>
   <script type="text/javascript">
     function Findchange() {
       document.getElementById("form:myDiv").innerHTML='ravi';
     }
  </script>
</h:head>
<h:body>
  <h:form  id="form" onsubmit="Findchange();">
    <div id="myDiv">hello</div>
    <h:commandButton value="submit" ></h:commandButton>
  </h:form>
</h:body> 
```

# c# - WCF Teseract 错误：尝试读取或写入受保护的内存...在 exe 上工作正常

> ID：16210302
> 
> 赞同：1
> 
> 时间：2013-04-25T08:47:01.873
> 
> 标签：c#, wcf, exception

我使用 teseract v2 到 OCR 图像，它在 exe 中工作正常，但是当我尝试在 WCF 上执行它时，我得到了这个异常：

**尝试读取或写入受保护的内存。这通常表明其他内存已损坏。**

exe（工作）和 wcf（异常）的相同代码：

```
var processor = new TesseractProcessor();

processor.SetVariable("tessedit_char_whitelist", Metadata.TextRegexPattern);
processor.Init(@"../../tessdata/" + Language + ".traineddata", Language, 3);
processor.SetPageSegMode(_pageSegmentationMode);
processor.AnalyseLayout(source);

return processor.Recognize(Image.FromFile(filePath)); // here's problem with recognize method 
```

# arrays - scala中具有10 ^ 7个元素的向量

> ID：16210306
> 
> 赞同：2
> 
> 时间：2013-04-25T08:47:08.127
> 
> 标签：arrays, scala, map, vector, range

我正在测试 ruby​​、python 和 scala，看看哪个对大数组有更好的支持。

```
Ruby (each) -> 84 MB, 2s # a = [];(0...1e7).each{|i| a[i]=i}
Ruby (expand) -> 254 MB, 60s #a = [*(0...1e7)]
Python (numpy) -> 95 MB, < 1s # a = np.arange(0, 1e7)
Python (range) -> 391 MB, < 1s # a = list(range(0, int(1e7)))
Scala (range) -> Memory Limit Exceeded :-) # var a = Range(0, 1e7.toInt).map(_.toInt) 
```

如您所见，使用scala时内存限制超过了，这是什么问题？！！！

```
--UPDATE 
```

好的，我应该使用

```
var a = Array.range(0, 1e7.toInt) 
```

但是，如果我想将数组映射到字符串呢？

```
var b = a.map(_.toString()) 
```

这里失败...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:58:06.200

Scala 的 Range 与纯粹意义上的数组并不完全相同（在它内部除了保留 N 项之外还做了一些额外的工作，因此它的内存效率较低并且消耗内存的速度更快）。

`Array.range(0, 1e7.toInt)`将更接近 python 的 np.arange 并且可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T11:18:23.413

你想要一千万个典型长度为 7 的字符串（你也有一千万个整数），并且在 JVM 上的字符串每个字符两个字节（加上开销），所以你肯定需要至少 180 MB 来保存它。让我们看看它到底有多糟糕：

```
$ scala -J-Xmx896M -e 'println(Array.range(0,1e7.toInt).map(_.toString).apply(9999999))'
9999999

$ scala -J-Xmx832M -e 'println(Array.range(0,1e7.toInt).map(_.toString).apply(9999999))'
java.lang.OutOfMemoryError: Java heap space 
```

所以你去; 比您预期的要差大约 4.5 倍。JVM 不太擅长这种事情：每个字符串实际上是两个对象（字符串和字符数组），一个对象大约有 12 个字节的开销加上内容，并且四舍五入到很好的边界。并且 JVM 本身需要一些空间来运行（并且对于它加载的所有类，尤其是使用 Scala 包括解释器）。所以这是“合理的”。

但是您不是在这里测试对大型数组的支持；您正在测试 Java 的内存效率如何`String`，但不是很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:38:10.720

你的斯卡拉代码：

```
var a = Range(0, 1e7.toInt).map(_.toInt) 
```

如果环境内存不足，将抛出“java.lang.OutOfMemoryError”异常——这可以正常工作。

您可能遇到的问题是您的 Scala 代码不会创建一个巨大的数组，它会创建一个巨大的***IndexedSeq***。在 Scala 中，IndexedSeq 就像 B 树。如果您想比较数组，请将您的 Scala 代码更改为以下内容，您可能会得到更好的结果。

```
val a = (0 to 1e7.toInt).toArray[Int] 
```

# java - JSch 使用 Unix 远程服务器环境变量

> ID：16210307
> 
> 赞同：2
> 
> 时间：2013-04-25T08:47:09.543
> 
> 标签：java, environment-variables, jsch

我正在使用 JSch 将我的 java 连接到远程 unix 服务器。下一步是运行一个使用一些内部环境变量的 shell 脚本 (.sh)。

直接从终端执行 shell 脚本可以正常工作，但是通过 JSch 从 Java 程序调用它不能识别这些变量。我该如何解决这个问题。在 Java 方面经验较少。发布示例代码-

```
 JSch jsch = new JSch();
    Session session = jsch.getSession("username", "server", 22);
    UserInfo ui = new SftpUserInfo();
    session.setUserInfo(ui);
    session.setPassword("mypass");
    session.connect();

    ChannelExec channelExec = (ChannelExec)session.openChannel("exec");

    InputStream in = channelExec.getInputStream();

    channelExec.setCommand("sh /filePath/myShellScript.sh");
    channelExec.connect();

    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    String line;

    while ((line = reader.readLine()) != null)
    {
        System.out.println(line);
    } 
```

PS：环境变量设置在用户根文件夹（/home/username/）中的“.profile”

谢谢，

艾莉亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T05:26:12.900

我使用 JSch 执行存储在我的服务器上的 jar。该 jar 使用允许修改环境变量的类 ProcessBuilder。例如：

```
ProcessBuilder pb = new ProcessBuilder("sh /filePath/myShellScript.sh");
Map<String, String> env = pb.environment();
env.put("profile","/home/username/"); 
```

# python - Python 全局变量和类功能

> ID：16210314
> 
> 赞同：8
> 
> 时间：2013-04-25T08:47:35.143
> 
> 标签：python, class

我正在创建一个简单的 python 程序，它提供了 SMS_Inbox 的基本功能。我创建了一个 SMS_Inbox 方法。

```
store = []
message_count = 0
class sms_store:
    def add_new_arrival(self,number,time,text):
        store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        **message_count += 1**
    def delete(self,i):
        if i > len(store-1):
            print("Index does not exist")
        else:
            del store[i]
            message_count -= 1 
```

在粗体部分我收到一个错误：

```
UnboundLocalError: local variable 'message_count' referenced before assignment. 
```

我创建了一个全局变量存储，它是一个空列表，当我使用 add_new_variable 对象时它可以工作。但是由于某种原因，它没有向我的全局 message_count 变量添加值。

请帮忙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T08:50:18.953

课程不是这样运作的。数据应该存储在类实例中，而不是全局存储。

```
class SMSStore(object):
    def __init__(self):
        self.store = []
        self.message_count = 0

    def add_new_arrival(self,number,time,text):
        self.store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        self.message_count += 1

    def delete(self, i):
        if i >= len(store):
            raise IndexError
        else:
            del self.store[i]
            self.message_count -= 1

sms_store = SMSStore()
sms_store.add_new_arrival("1234", "now", "lorem ipsum")
try:
    sms_store.delete(20)
except IndexError:
    print("Index does not exist")

print sms_store.store

# multiple separate stores
sms_store2 = SMSStore()
sms_store2.add_new_arrival("4321", "then", "lorem ipsum")
print sms_store2.store 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T08:51:54.017

如果您引用的变量是`message_count`，则错误是因为在 Python 中，您必须先指定一个变量，`global`然后才能使用它进行编辑。

这应该有效。

```
store = []
message_count = 0
class sms_store:
    def add_new_arrival(self,number,time,text):
        global message_count
        store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        message_count += 1
    def delete(self,i):
        if i > len(store-1):
            print("Index does not exist")
        else:
            global message_count
            del store[i]
            message_count -= 1 
```

如上所述，最好将它封装在`__init__`函数中，而不是声明它`global`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:51:30.757

您正在尝试分配给全局变量`message_count`而不这样声明：

```
message_count = 0

class sms_store:
    def add_new_arrival(self,number,time,text):
        store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        global message_count
        message_count += 1 
```

尽量避免使用全局变量，或者至少将变量封装为*类*属性：

```
class sms_store:
    message_count = 0
    store = []

    def add_new_arrival(self,number,time,text):
        sms_store.append(("From: "+number, "Recieved: "+time,"Msg: "+text))
        sms_store.message_count += 1 
```

但是，您的类*实例*不再有状态，因此在这里创建类没有*意义。*它只会混淆你的目的。

要么在实例中存储状态，要么使用全局函数（所以根本不要使用类）；前者优于后者。

使用正确的 PEP-8 样式指南命名和字符串格式将您的设置转换为实例保持状态的类：

```
class SMSStore(object):
    def __init__(self):
        self.store = []
        self.message_count = 0

    def add_new_arrival(self, number, time, text):
        self.store.append('From: {}, Received: {}, Msg: {}'.format(number, time, text))
        self.message_count += 1 
```

然后，您可以自由创建*一个*实例并将其用作全局实例（如果需要）：

```
sms_store = SMSStore() 
```

其他代码只使用`sms_store.add_new_arrival(...)`，但状态被封装在一个实例中。

# c# - 重复打开文件的列表框

> ID：16210316
> 
> 赞同：0
> 
> 时间：2013-04-25T08:47:42.707
> 
> 标签：c#, wpf, windows, timer, repeat

您好，我希望我的列表框播放列表在播放最后一个文件后重复。如何重置索引以使其重复到列表框的开头？Shownextimage 会一一处理媒体以显示在 mediaelement 上。DispatcherTimer 显示图像 20 秒，然后继续。

这就是我得到的。

```
 Dictionary<string, string> Listbox1Dict = new Dictionary<string, string>();
    public static List<string> images = new List<string> { ".JPG", ".JPE", ".BMP", ".GIF", ".PNG" }; // Bildtyper som stöds
    public static List<string> movies = new List<string> { ".WMV", ".WAV", ".SWF", ".MP4", ".MPG", ".AVI" };
    List<string> paths = new List<string>();
    DispatcherTimer dispatcherTimer = new DispatcherTimer();
    DispatcherTimer NextImageTimer = new DispatcherTimer();
    int x = 20;
    private int currentSongIndex = -1;
    private void ShowNextImage()
    {
        if (currentSongIndex == -1)
        {
            currentSongIndex = Listbox1.SelectedIndex;
        }
        currentSongIndex++;

        var selected = Listbox1.Items[currentSongIndex];
        string s = selected.ToString();
        if (Listbox1Dict.ContainsKey(s))
        {

            if (images.Contains(System.IO.Path.GetExtension(s).ToUpperInvariant()))
            {

                if (currentSongIndex < Listbox1.Items.Count)
                {
                    mediaElement1.Source = new Uri(Listbox1Dict[s]);

                }
            }
            else if (movies.Contains(System.IO.Path.GetExtension(s).ToUpperInvariant()))
            {
                if (currentSongIndex < Listbox1.Items.Count)
                {
                    dispatcherTimer.Stop();
                    mediaElement1.Source = new Uri(Listbox1Dict[s]);
                }
            }
        }
    } 
```

计时器：

```
 private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
            ShowNextImage();
    }
    private void dispatch()
    {
        dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
        dispatcherTimer.Interval = new TimeSpan(0, 0, 0, x);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:58:09.420

也许这样的东西是你想要的：

```
<StackPanel>
    <ListBox SelectedIndex="{Binding ElementName=Index, Path=Value}">
        <ListBoxItem>First</ListBoxItem>
        <ListBoxItem>Second</ListBoxItem>
        <ListBoxItem>Third</ListBoxItem>
    </ListBox>
    <Slider x:Name="Index" Minimum="0" Maximum="2" Value="2" TickFrequency="1" IsSnapToTickEnabled="True" TickPlacement="BottomRight"/>
</StackPanel> 
```

在此示例中，列表框的选定索引绑定到滑块的值。滑块应替换为 ViewModel 中的 index 属性，该属性会在更改时发出通知。你的 index 属性应该在播放完一首歌曲后递增，如果这首歌是最后一首，则设置为 0。我认为这应该在你的虚拟机中处理。

# android - 为什么我的线程不会死掉并导致内存泄漏？

> ID：16210323
> 
> 赞同：5
> 
> 时间：2013-04-25T08:47:58.183
> 
> 标签：android, multithreading, android-asynctask, executor

我的一个应用程序正在积累很多`Thread`GC 无法拾取和清除的实例。从长远来看，这种内存泄漏会使应用程序崩溃。

我不是*100%*确定它们来自哪里，但我有一种明显的感觉，以下*可能*是有问题的代码：

```
public class UraHostHttpConnection extends AbstractUraHostConnection {
    private Handler uiThreadHandler = new Handler(Looper.getMainLooper());
    private Executor taskExecutor = new Executor() {
         public void execute(Runnable command) {
             new Thread(command).start();
        }
    };
    private ConnectionTask task = null;

    @Override
    public void sendRequest(final HttpUriRequest request) {
        this.task = new ConnectionTask();
        this.uiThreadHandler.post(new Runnable() {
            public void run() {
                task.executeOnExecutor(taskExecutor, request);
            }
        });
   }

    @Override
    public void cancel() {
        if (this.task != null)
            this.task.cancel(true);
    }
} 
```

此代码允许我并行运行多个 HTTP 连接，默认情况下不会相互阻塞`AsyncTask` `Executor`（这只是一个单线程队列）。

我检查了，`AsyncTask`s 实际上正在达到他们的`onPostExecute()`方法，并且不会永远运行。在检查了一些内存转储后，我怀疑包装`Thread`-Objects 在`AsyncTask`s 完成后不会停止运行。

上面的代码是否可能仍然导致我的内存泄漏，或者我应该开始寻找其他地方？

任何帮助表示赞赏。

**编辑：**应该注意的`sendRequest`是，它只被调用一次。上面示例中没有的代码的其他部分确保了这一点。

**编辑2：**超类看起来像这样：

```
public abstract class AbstractUraHostConnection {
    protected IUraHostConnectionListener listener = null;

    public void setListener(IUraHostConnectionListener listener) {
        this.listener = listener;
    }
    public abstract void sendRequest(HttpUriRequest request);
    public abstract void cancel();
} 
```

AsyncTask 看起来像这样：

```
private class ConnectionTask extends AsyncTask<HttpUriRequest, Object, Void> {
    final byte[] buffer = new byte[2048];
    private ByteArrayBuffer receivedDataBuffer = new ByteArrayBuffer(524288);

    @Override
    protected Void doInBackground(HttpUriRequest... arg0) {
        UraHostHttpConnection.taskCounter++;
        AndroidHttpClient httpClient = AndroidHttpClient.newInstance("IVU.realtime.app");
        try {
            // Get response and notify listener
            HttpResponse response = httpClient.execute(arg0[0]);
            this.publishProgress(response);

            // Check status code OK before proceeding
            if (response.getStatusLine().getStatusCode() == 200) {
                HttpEntity entity = response.getEntity();
                InputStream inputStream = entity.getContent();
                int readCount = 0;

                // Read one kB of data and hand it over to the listener
                while ((readCount = inputStream.read(buffer)) != -1 && !this.isCancelled()) {
                    this.receivedDataBuffer.append(buffer, 0, readCount);
                    if (this.receivedDataBuffer.length() >= 524288 - 2048) {
                        this.publishProgress(receivedDataBuffer.toByteArray());
                        this.receivedDataBuffer.clear();
                    }
                }

                if (this.isCancelled()) {
                    if (arg0[0] != null && !arg0[0].isAborted()) {
                        arg0[0].abort();
                    }
                }
            }
        } catch (IOException e) {
            // forward any errors to listener
            e.printStackTrace();
            this.publishProgress(e);
        } finally {
            if (httpClient != null)
                httpClient.close();
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Object... payload) {
        // forward response
        if (payload[0] instanceof HttpResponse)
            listener.onReceiveResponse((HttpResponse) payload[0]);
        // forward error
        else if (payload[0] instanceof Exception)
            listener.onFailWithException((Exception) payload[0]);
        // forward data
        else if (payload[0] instanceof byte[])
            listener.onReceiveData((byte[]) payload[0]);
    }

    @Override
    protected void onPostExecute(Void result) {
        listener.onReceiveData(this.receivedDataBuffer.toByteArray());
        listener.onFinishLoading();
        UraHostHttpConnection.taskCounter--;
        Log.d(TAG, "There are " + UraHostHttpConnection.taskCounter + " running ConnectionTasks.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:15:20.543

将 ThreadPoolExecutor 替换为您的 Executor，以便您可以控制池的大小。如果 ThreadPoolExecutor 基本上是一个暴露了方法的 Executor，那可能只是默认最大池大小设置非常高的情况。

官方文档[在这里](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)。

特别看一下：

```
setCorePoolSize(int corePoolSize)
//Sets the core number of threads.

setKeepAliveTime(long time, TimeUnit unit)
//Sets the time limit for which threads may remain idle before being terminated.

setMaximumPoolSize(int maximumPoolSize)
//Sets the maximum allowed number of threads. 
```

如果您想减少代码，还有一个替代方案（更好的主意取决于您真正想要多少控制以及您将交易多少代码来获得它）。

```
Executor taskExecutor = Executors.newFixedThreadPool(x); 
```

其中 x = 池的大小

# c# - 从 C# 通过 Runspace 运行 Powershell 脚本非常慢

> ID：16210329
> 
> 赞同：4
> 
> 时间：2013-04-25T08:48:28.547
> 
> 标签：c#, performance, powershell

从 Powershell 命令窗口执行特定脚本时，执行大约需要 2 分钟。使用 System.Management.Automation.Runspaces 从 C#（Windows 服务）执行相同的脚本需要 5 到 6 分钟！从服务中生成新的 powershell.exe 进程会使时间再次下降到 2 分钟。

我还注意到使用 Runspace 时 CPU 使用率更高。

不出所料，几乎所有时间都花在了 Pipeline.Invoke() 中，这并没有让调试问题变得更容易。

我使用的脚本很复杂，而且会做很多事情，因此很难确定这个问题。如何缩小问题范围？

有什么明显的我可能会丢失吗？

# php - MySQL将行从表复制到表，同时使用PHP

> ID：16210330
> 
> 赞同：0
> 
> 时间：2013-04-25T08:48:41.237
> 
> 标签：php, mysql, rows

我知道你可以这样做：

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b, c, d
FROM SomeTable
WHERE SomeColumn = 1 
```

但是，如果`SELECT a, b, c, d`您需要将这些列更新为`a, b, c, "string"`

说白了，我想要一个声明：

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b
FROM SomeTable
WHERE SomeColumn = 1
// And put  "string" into d 
```

更新

所以我运行了这个：

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b, c, 'string'
FROM SomeTable
WHERE SomeColumn = 1 
```

它在“c”列中选择了 3 行具有不同条目的行，并通过插入完全相同的 3 行来更新“AnotherTable”。尽管它们应该是不同的值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:50:41.173

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b,"SOME VALE","SOMEVALUE2"
FROM SomeTable
WHERE SomeColumn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:50:13.207

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b, $somevar, 'fixed string'
FROM SomeTable
WHERE SomeColumn = 1 
```

但是，您应该非常小心地注入这样的 $somevar。真的你应该使用准备好的语句，所以它会......

```
INSERT INTO AnotherTable (a, b, c, d)
SELECT a, b, :CustomValue, 'fixed string'
FROM SomeTable
WHERE SomeColumn = 1 
```

并且 CustomValue 是通过将值绑定到语句来设置的。这里有一些例子：[http ://www.php.net/manual/en/pdostatement.bindvalue.php](http://www.php.net/manual/en/pdostatement.bindvalue.php)

# html - 我的孩子 DIV 超出了父母的范围。无固定/绝对定位

> ID：16210332
> 
> 赞同：0
> 
> 时间：2013-04-25T08:48:51.407
> 
> 标签：html, css, height

[http://thestleonardsacademy.org/stlan/extracurricular.php](http://thestleonardsacademy.org/stlan/extracurricular.php)

有问题的 div 是#content 和#newstiles。

#content 设置为 100% 高度，newstiles 也是如此，它是 content 的子级。然而，newstiles 是匹配内容的高度，而不是填充剩余空间。由于#content 中的其他 div，这意味着创建了一个滚动条，其中包含与 #content 中的页眉和页脚相等的附加滚动条。

我基本上希望#content 至少为 100% 的页面高度。然后我想要固定大小的页眉和页脚，以及#newstiles 来填充剩余空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:20:18.640

如果你不能`clear:both`在你的 css 中添加它直接添加到你的 _layout 页面中，就在你的 @RenderBody 下方

```
<br style="clear:both;" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:53:48.053

你的css中没有`clear:`，尝试`clear:both;`在你的css中添加一个。

# css - 使宽DIV内的居中DIV随内容宽度扩展

> ID：16210336
> 
> 赞同：7
> 
> 时间：2013-04-25T08:49:04.583
> 
> 标签：css, html

我正在使用 2 个 div，一个父母和一个孩子。父级的宽度为 100%，其内容以文本居中对齐。

子 div 的宽度应为零（或接近它的值），并随着其内容自动扩展其宽度，同时仍位于父 div 的中心。例子：

```
+------------ PARENT DIV ------------+
|                                    |
|          ..some content..          |
|                                    |
|           +--CHILD DIV--+          |
|           |Inside child |          |
|           +-------------+          |
|                                    |
+------------------------------------+

+------------ PARENT DIV ------------+
|                                    |
|          ..some content..          |
|                                    |
|      +------ CHILD DIV ------+     |
|      |Inside child with more |     |
|      +-----------------------+     |
|                                    |
+------------------------------------+ 
```

如果我为子 div 设置了固定宽度，我可以正确地将其居中：

```
.parent {
    width: 100%;
}
.child {
    width: 100px;
    margin-left: auto;
    margin-right: auto;
} 
```

但这不是我需要的，我需要子 div 根据其内容扩展其宽度。所以我尝试使用`float`and `nowrap`：

```
.parent {
    width: 100%;
}
.child {
    float: left;
    white-space: nowrap;
    margin-left: auto;
    margin-right: auto;
} 
```

这适用于孩子本身，但它不再作为父母的内容居中。

我可以通过使用 Javascript 来解决它，但我真的不喜欢这样做。

我一直在寻找类似的问题，但我还没有找到一个可以准确回答这种情况的问题。

有人可以给我一个灯吗？

提前感谢您的任何评论。

弗朗西斯科

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:01:28.207

您可以使用`display: inline-block;`（在 < IE7 中不支持），但您必须将所有其他内容包含在另一个块级元素中（例如 a`<p>`或 another `<div>`）

```
.parent {
    width: 100%;
    text-align: center;
        border: 1px solid #000;
}
.child {
    display: inline-block;
        border: 1px solid #f00;
} 
```

[http://jsfiddle.net/4kpsK/](http://jsfiddle.net/4kpsK/)

（单击红色边框的 div 以添加更多内容并查看有效的解决方案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:53:23.797

你必须让你的孩子`inline`：

```
.parent {
    width: 100%;
    text-align: center;
}
.child {
    display: inline;
} 
```

在此处查看小提琴：http: [//jsfiddle.net/4wXTd/1/](http://jsfiddle.net/4wXTd/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:55:45.367

我认为`width`你可以使用`max-width`and代替`display:inline`。但这有缺点：`max-width`在 IE 中无法正确解释（我认为至少 <9），但在 Webkit/Moz/Opera 浏览器中你应该是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:06:21.327

```
.child{display:block; margin: auto;} 
```

应该管用。

# javascript - onhashchange 事件导致标记验证无效

> ID：16210340
> 
> 赞同：1
> 
> 时间：2013-04-25T08:49:10.193
> 
> 标签：javascript, html

希望我在发帖时听起来不像是个白痴，而是使用：

```
<body onhashchange="HashChangeHandler();"> 
```

导致标记验证无效。

除了body标签，还有什么地方可以放吗？

我知道有`window.onhashchange = funcRef;`，`window.addEventListener("hashchange", funcRef, false);`但我不知道把它放在哪里，如果这有意义的话。

该站点仍然可以正常运行，但是无效的标记标志困扰着我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:52:52.193

> 我知道有……但我不知道把它放在哪里，如果这有意义的话。

在一个`<script>`元素中。就这样。

```
<script>
function thingy(e) {
    alert('changed');
}
window.addEventListener("hashchange", thingy, false);
</script> 
```

# c# - 在 IIS 中部署网站

> ID：16210341
> 
> 赞同：0
> 
> 时间：2013-04-25T08:49:15.553
> 
> 标签：c#, iis, deployment, service, web

我正在尝试在 IIS 上部署一个网站。当我在不给它主机名的情况下部署它时，一切正常。

但是，如果我尝试指定主机名，则该网站永远不会在浏览器中加载。例如，我给它一个主机名 www.webservice.com。当我尝试加载主页时，Web 浏览器尝试访问 www.webservice.com:2000/HomePage.aspx 但连接总是超时。

我怎么解决这个问题？

![在此处输入图像描述](https://i.stack.imgur.com/aCUsO.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:57:23.123

似乎您想在本地 IIS 服务器中托管您的网站。通常默认情况下，您可以通过访问 localhost 来访问您的站点，即[http://localhost:[port](http://localhost:[port) no]/HomePage.aspx

但是，如果您想提供自己的主机名，您可以设置您的域或进行本地测试，然后尝试以下链接：

[在 IIS 7 中使用 myfakesite.com 而不是 localhost](https://stackoverflow.com/questions/7049473/use-myfakesite-com-instead-of-localhost-in-iis-7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T08:57:46.243

Shihan 的评论让我意识到你想要达到的目标：

您不能这样做，因为您不拥有该域名。如果您拥有该域名，那么这很好。

您需要注册域名并（通过 DNS 部分）将 A 记录指向您的服务器 IP。IIS 是关于接收请求、处理它并吐出相关的内容（基于请求），它不会为您组织您的 DNS 记录（也不会创建它们）。

但是，由于您为此使用 PC，我怀疑您不在静态 IP 地址上，这使得这变得更加复杂。

您还需要注意，本地 PC 上的 IIS 比 Windows 服务器上的受限得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T08:59:52.257

您必须将 DNS 设置为指向运行 IIS 的主机，或者在“主机”文件中创建一个条目。DNS 适用于生产目的，但如果您只是想测试某些内容，则主机条目就足够了。您可以在 %WINDOWSROOT%\System32\drivers\etc 下找到 hosts 文件（例如：C:\Windows\System32\drivers\etc）。只需在其中添加站点名称 (www.webservice.com) 以及 IIS 主机的 IP。

IIS 不会自动为您设置 DNS。

# php - INSERT INTO 不起作用外键 php

> ID：16210342
> 
> 赞同：1
> 
> 时间：2013-04-25T08:49:21.173
> 
> 标签：php, insert, key

检查“if”有效，但值未更新到数据库中。怎么了？
我认为代码是正确的，它确认了插入的成功。外键是 emp_id，它从名为 empresa (idempresa) 的表中引用主键。

```
 // get post from other file
      @$pegar = $_POST['postempresa'];
      $q = " SELECT idempresa FROM empresa WHERE idempresa = $pegar " ;

      if (isset($_POST['submit'])) {
        // Connect to the database
        $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

        // Grab the medida data from the POST

        $fk_empresa = mysqli_real_escape_string($dbc, trim($_POST['chaveestrangeira']));

        $prato = mysqli_real_escape_string($dbc, trim($_POST['f_prato']));
        $medida = mysqli_real_escape_string($dbc, trim($_POST['f_medida']));
        $preco = mysqli_real_escape_string($dbc, trim($_POST['f_preco']));
        $pessoas = mysqli_real_escape_string($dbc, trim($_POST['f_pessoas']));
        $categoria = mysqli_real_escape_string($dbc, trim($_POST['f_categoria']));
        $obs = mysqli_real_escape_string($dbc, trim($_POST['f_obs']));
        $foto = mysqli_real_escape_string($dbc, trim($_FILES['f_foto']['name']));
        $foto_type = $_FILES['f_foto']['type'];
        $foto_size = $_FILES['f_foto']['size']; 

        if (!empty($prato) && !empty($medida) && !empty($preco) && !empty($pessoas) && !empty($categoria) ) {

          if ((($foto_type == 'image/gif') || ($foto_type == 'image/jpeg') || ($foto_type == 'image/pjpeg') || ($foto_type == 'image/png')) && ($foto_size > 0) && ($foto_size <= GW_MAXSIZECARD)) {
            if ($_FILES['f_foto']['error'] == 0) {
              // Move the file to the target upload folder
              $target = GW_UPCARD . $foto;
              if (move_uploaded_file($_FILES['f_foto']['tmp_name'], $target)) {
                // Write the data to the database

                $query = 

                "INSERT INTO cardapio SET

                 emp_id = '$q',
                 prato = '$prato',
                 medida = '$medida',
                 preco = '$preco',
                 pessoas = '$pessoas',
                 categoria = '$categoria',
                 obs = '$obs',
                 foto = '$foto'

                 ";

                mysqli_query($dbc, $query);

                echo mysql_error();

                // Confirm success with the user
                echo '<p>Cardapio enviado!</p>';
                echo '<p><strong>ID EMPRESA</strong> ' . $fk_empresa . '<br />';
                echo '<p><strong>prato:</strong> ' . $prato . '<br />';
                echo '<strong>Medida:</strong> ' . $medida . '<br />';
                echo '<strong>Preço:</strong> ' . $preco . '<br />';
                echo '<strong>Categoria:</strong> ' . $categoria . '<br />';
                echo '<strong>Obs:</strong> ' . $obs . '<br />';
                echo '<img src="' . GW_UPCARD . $foto . '" alt="Score image" /></p>';
                echo '<p><a href="index.php">Voltar para admin</a></p>';

                // Clear the medida data to clear the form
                $prato = "";
                $medida = ""; 
                $preco = "";
                $pessoas = "";
                $categoria = "";
                $obs = "";
                $foto = "";

                mysqli_close($dbc);

              }
              else {
                echo '<p class="error">Tivemos um erro no upload da imagem.</p>';
              }
            }
          }
          else {
            echo '<p class="error">A imagem precisa ter extensão GIF, JPEG, ou PNG e menor que ' . (GW_MAXSIZECARD / 1024) . ' KB.</p>';
          }

          // Try to delete the temporary screen shot image file
          @unlink($_FILES['foto']['tmp_name']);
        }
        else {
          echo '<p class="error">Por favor, preencha todos os campos.</p>';
        }
      }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:29:54.307

如果不存在则创建表`empresa`（ `idempresa`int（10）无符号非空AUTO_INCREMENT， `nomefantasia`varchar（255）非空， `razaosocial`varchar（255）非空， `cnpj`varchar（12）非空， `cepemp`varchar（8）非空， `estadoemp`varchar（2）非空， `empcidade`varchar(255) 字符集 utf8 NOT NULL, `ruaemp`varchar(255) NOT NULL, `bairroemp`varchar(255) NOT NULL, `numeroemp`varchar(255) NOT NULL, `compemp`varchar(20) NOT NULL, `categoriaemp`varchar(45) NOT NULL, `logomarca`varchar(64) NOT NULL, `telefoneum`varchar(20) NOT NULL, `telefonedois`varchar(20) NOT NULL, `emailum`varchar(255) NOT NULL, `emaildois`varchar(255) NOT NULL, PRIMARY KEY ( `idempresa`) ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

-- ALTER TABLE `cardapio` ADD CONSTRAINT `cardapio_ibfk_3`FOREIGN KEY ( `emp_id`) 引用`empresa`( `idempresa`) ON DELETE CASCADE ON UPDATE CASCADE;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:58:48.497

两件事情。

您没有执行查询。像这样执行

```
$rec    = " SELECT idempresa FROM empresa WHERE idempresa = $pegar " ;
$result =   mysqli_query($rec);
if($result){
    $row    =   myqsli_fetch_assoc($result);
    $q      =   $row['idempresa'];
}else{
    $q = '';
} 
```

现在另一件事是您的插入查询完全错误。它不使用 set 关键字。像这样使用它

```
$query = "INSERT INTO cardapio 
            (emp_id ,prato ,medida ,preco , pessoas , categoria , obs ,foto )
            VALUES
            ('$q','$prato','$medida','$preco','$pessoas','$pessoas','$categoria','$obs','$foto')";
mysqli_query($query); 
```

# python - 实时回调没有 POST 响应

> ID：16210345
> 
> 赞同：0
> 
> 时间：2013-04-25T08:49:27.917
> 
> 标签：python, facebook, facebook-graph-api, callback, real-time

我在做什么的基本想法。我想获取用户的喜欢并在 CLI 应用程序中打印它们（使用 Twisted 框架侦听 GET/POST 消息的 Python 脚本）。

我已经通过带有此 HTML 的内联画布完成了 OAuth：
`<a target='_top' href="https://www.facebook.com/dialog/oauth/?client_id=1111111111111&redirect_uri=https://apps.facebook.com/xxxxxxx/&scope=user_likes">Grant permissions</a>`

一切似乎都很好？

好的，现在我已经转到 Facebook 应用部分中的*实时订阅*部分并添加了

参见图片*： http: [//i.stack.imgur.com/l2I3t.png](http://i.stack.imgur.com/l2I3t.png) 当我运行测试时，我的 python 代码成功返回结果，参见*：http: [//i.stack.imgur.com/9D2EK .png](http://i.stack.imgur.com/9D2EK.png)

所以现在我被困住了。因为我现在期望发生的是，当我**喜欢**某些东西时，回调将出现在我的回调脚本中。例如，我只是打印给 render_POST 和 render_GET 的任何内容，并且 GET 响应结果很好

```
GET {'hub.verify_token': ['test'], 'hub.challenge': ['73678294'], 'hub.mode': ['subscribe']}
GET {'hub.verify_token': ['test'], 'hub.challenge': ['2038003566'], 'hub.mode': ['subscribe']} 
```

但是当我离开并喜欢某些东西时，无论是作为我自己还是作为测试用户（完成 OAuth），都没有 POST 值。什么都没有！

我想我在这里缺少一些东西。我期待看到类似的东西

```
{
  "data": [
    {
      "category": "Author", 
      "name": "Iain M. Banks", 
      "id": "111960934488822", 
      "created_time": "2013-04-22T13:21:42+0000"
    }, 
    {
      "category": "Movie", 
      "name": "The Life Of Brian", 
      "id": "110881634936650", 
      "created_time": "2012-12-17T07:48:24+0000"
    }
  ], 
  "paging": {
    "next": "https://graph.facebook.com/111111111/likes?limit=2&offset=2&__after_id=110881698346650"
  }
} 
```

在我的 POST 中，这样我就可以继续我的其余代码了。我希望有人可以为我解决这个问题！先感谢您！

**您需要至少 10 个声望才能发布图片*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T23:35:39.030

该字段`likes`对应于用户/喜欢

> 该用户喜欢的所有页面。

User 对象支持以下连接

> 此对象支持以下连接的实时更新：提要、朋友、活动、兴趣、音乐、书籍、电影、电视、喜欢、签到。
> 
> [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

所以喜欢*某样东西*可能无法得到你想要的。你要确保喜欢的对象是一个页面。只有这样，Facebook 才会发布到回调。

另外确保您看到 POST 变量，这将出现在 request.args 而不是`request`

[http://twistedmatrix.com/documents/10.1.0/web/howto/web-in-60/handling-posts.html](http://twistedmatrix.com/documents/10.1.0/web/howto/web-in-60/handling-posts.html)

# http - $http.get() 与 JSON 数据

> ID：16210347
> 
> 赞同：12
> 
> 时间：2013-04-25T08:49:35.850
> 
> 标签：http, angularjs

我正在编写一个服务器应用程序，并希望客户端使用正文中的数据来参数化我的 GET 方法，如下所示：

```
# http -v GET http://localhost:3000/url text=123 foo=bar
GET /url HTTP/1.1
Accept: application/json
Accept-Encoding: gzip, deflate, compress
Content-Length: 29
Content-Type: application/json; charset=utf-8
Host: localhost:3000
User-Agent: HTTPie/0.4.0

{
    "foo": "bar", 
    "text": "123"
} 
```

在 AngularJS 中，我尝试过：

```
var params = {
    "foo": "bar", 
    "text": "123"
}

// no body
$http({
  method: 'GET',
  url: '/url',
  data: params })

// ugly url
// also has its limitation: http://stackoverflow.com/questions/978061/http-get-with-request-body
$http({
  method: 'GET',
  url: '/url',
  params: params })

// params in body, but I wanted GET
$http({
  method: 'POST',
  url: '/url',
  data: params }) 
```

这是设计使然还是错误？

我无法从[文档](http://docs.angularjs.org/api/ng.$http)中看出原因。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-02T18:50:21.837

我会将此作为答案：

对于 HTTP，它没有被禁止，但你不应该使用它，因为服务器可能（并且**应该**）忽略`GET`请求的主体。

参考：[带有请求正文的 HTTP GET](https://stackoverflow.com/questions/978061/http-get-with-request-body/15656884#15656884)

对于 XHR，`GET`和的主体`HEAD`将被忽略（@jacob-koshy 提示）。

参考：[https ://xhr.spec.whatwg.org/#the-send()-method](https://xhr.spec.whatwg.org/#the-send()-method)

# mysql - 客户端之间的数据同步

> ID：16210349
> 
> 赞同：0
> 
> 时间：2013-04-25T08:49:52.040
> 
> 标签：mysql, analysis

我有一个数据库服务器（MySQL）。

这包含一个产品表。产品表的字段之一是剩余数量。

我有几个客户（大约 10 个）会在下订单时查询剩余数量。一旦下订单，剩余数量将根据订单减少。

当数量较少时我会遇到一个问题：例如，如果剩余数量为“10”并且 client1 正在创建 8quantity 的订单（尚未下订单，但只是在处理中）并且 client2 下订单 5 个数量，然后后者下订单的客户将失败。

我想改进系统，以便当一个客户正在订购时，其他客户应该只显示（剩余数量 - client1 订单数量）。最初我想在订单表中输入剩余数量后立即更改剩余数量，但是当订单被取消或正在下订单的计算机关闭/崩溃时，这会产生问题。

请建议我一些合适的算法来有效地处理这种情况。每当订单正在进行时，所有其他客户应该只看到（剩余数量 - 正在进行的订单数量）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:12:51.997

一个答案可能在您的问题中：

```
other clients should see only the (remaining quantity - order in progress quantity). 
```

所以你的问题是将数据存储在“正在进行的订单”上

有些人为订单添加了“已确认”属性，可以将其设置为 true/false 以维护正确的信息。或者你可以有一个单独的结构来记录正在进行的订单，并在确认后将它们移动到一个永久的订单表中。无论哪种方式，如您所说，可用库存是（库存 - 正在进行的订单数量），查询将为您提供。

然后，您需要知道如何处理取消。如果取消是明确的——用户改变了他们的购物篮——很容易：删除订单。唯一尴尬的情况是订单未通过以下方式完成：“正在进行中的订单”何时不再“进行中”？您可以设置订单仍在进行中的给定时间，并让用户知道，例如“您的订单将在篮子中保留 24 小时，之后将优先考虑库存中的其他客户” - 或类似的东西。

您的系统将使用清理过程将当前日期/时间与“进行中的订单”的时间进行比较，如果订单太旧，它将被取消 - 或者至少暂停以供客户续订。

# c# - System.InvalidOperationException：由于对象的当前状态，操作无效。？

> ID：16210351
> 
> 赞同：0
> 
> 时间：2013-04-25T08:49:58.200
> 
> 标签：c#, wcf, sharepoint-2010, sharepoint-object-model

我正在为 SharePoint Foundation 2010 开发 asp.net mvc 应用程序。asp.net 应用程序托管在一台机器上，而 SharePoint Foundation 2010 托管在另一台机器上。我在 SharePoint 环境的 ISAPI 文件夹中部署了一项自定义 wcf 服务。此自定义 wcf 服务以编程方式创建内容数据库。asp.net 应用程序使用此自定义 wcf 服务。我正在使用这种方法，因为我的场景类似于链接 - [http://blog.sharedove.com/adisjugo/index.php/2012/07/31/creating-site-collections-in-specific-content-database/](http://blog.sharedove.com/adisjugo/index.php/2012/07/31/creating-site-collections-in-specific-content-database/) . 实现上述场景我遇到了错误 - [http://social.technet.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/f10d009b-13c4-4942-86b4-2ab8c4f5994d](http://social.technet.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/f10d009b-13c4-4942-86b4-2ab8c4f5994d)。我已经解决了这个错误[http://beyondweblogs.com/sharepoint-2010-sppersistedobject-access-denied/](http://beyondweblogs.com/sharepoint-2010-sppersistedobject-access-denied/)。现在我收到错误 - System.InvalidOperationException：由于对象的当前状态，操作无效。

```
System.InvalidOperationException: Operation is not valid due to the current state of the object.
   at Microsoft.SharePoint.WebControls.SPControl.SPWebEnsureSPControl(HttpContext context)
   at Microsoft.SharePoint.Utilities.SPUtility.ValidateFormDigest()
   at Microsoft.SharePoint.Administration.SPPersistedObject.BaseUpdate()
   at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Add(T newObj, Boolean ensure)
   at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Ensure(T newObj)
   at Microsoft.SharePoint.Administration.SPContentDatabaseCollection.Add(Guid newDatabaseId, String strDatabaseServer, String strDatabaseName, String strDatabaseUsername, String strDatabasePassword, Int32 warningSiteCount, Int32 maximumSiteCount, Int32 status, Boolean provision, Guid lockId, Int32 addFlags)
   at Microsoft.SharePoint.Administration.SPContentDatabaseCollection.Add(String strDatabaseServer, String strDatabaseName, String strDatabaseUsername, String strDatabasePassword, Int32 warningSiteCount, Int32 maximumSiteCount, Int32 status)
   at Niks.SP2010.SPHostedWCFService1.SPHostedWCFService.<createContentDb>b__7()
   at Microsoft.SharePoint.SPSecurity.<>c__DisplayClass4.<RunWithElevatedPrivileges>b__2()
   at Microsoft.SharePoint.Utilities.SecurityContext.RunAsProcess(CodeToRunElevated secureCode)
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(WaitCallback secureCode, Object param)
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(CodeToRunElevated secureCode)
   at Niks.SP2010.SPHostedWCFService1.SPHostedWCFService.createContentDb()
   at Niks.SP2010.SPHostedWCFService1.SPHostedWCFService.<>c__DisplayClass3.<GetName>b__1()
   at Microsoft.SharePoint.SPSecurity.<>c__DisplayClass4.<RunWithElevatedPrivileges>b__2()
   at Microsoft.SharePoint.Utilities.SecurityContext.RunAsProcess(CodeToRunElevated secureCode)
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(WaitCallback secureCode, Object param)
   at Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(CodeToRunElevated secureCode)
   at Niks.SP2010.SPHostedWCFService1.SPHostedWCFService.GetName() 
```

上面的链接bolg.sharedove.com 中描述了此错误。我想我需要按照 bolg.sharedove.com 中的描述设置以下代码

```
var storeContext = HttpContext.Current; 
HttpContext.Current = null; 
// do your code 
HttpContext.Current = storeContext; 
```

我认为我无法在 wcf 服务中设置上述代码。我试图在 asp.net 应用程序中设置它，但发生了同样的错误。anuone可以告诉我应该在哪里设置这个代码？如果有人有不同的解决方案，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T03:17:50.670

我只是在 wcf 服务应用程序中添加了对 System.Web.dll 的引用。现在我可以在 wcf 中使用 HttpContext。我在 wcf 中设置了以下代码

```
var storeContext = HttpContext.Current; 
HttpContext.Current = null; 
// do your code 
HttpContext.Current = storeContext; 
```

现在 wcf 中的所有代码都可以正常工作。我现在能够以编程方式创建内容数据库和网站集。

# asp.net-mvc - 如何将 Moq 与 Entity Framework IDbSet Count() 等方法一起使用

> ID：16210363
> 
> 赞同：9
> 
> 时间：2013-04-25T08:50:19.307
> 
> 标签：asp.net-mvc, entity-framework, unit-testing, moq

我正在尝试`Moq`对 Entity Framework Code First 类进行一些测试。我对 Moq 和模拟技术非常陌生，我想知道是否可以轻松地进行我将在下面描述的测试。我在网上搜索了一些解决方案，但大多数都是基于存储库模式，我想避免这种情况。

我有`ITestEntities`上下文接口

```
public interface ITestEntities
{
    IDbSet<Order> Orders { get; }
    IDbSet<Product> Products { get; }
    IDbSet<User> Users { get; }
} 
```

然后上下文

```
public class TestEntities : DbContext, ITestEntities
{
    public TestEntities() : base("name=TestEntities")
    {

    }

    public virtual IDbSet<Order> Orders { get; set; }
    public virtual IDbSet<Product> Products { get; set; }
    public virtual IDbSet<User> Users { get; set; }
} 
```

一个控制器和一个要测试的动作

```
public class HomeController : Controller
{
    private ITestEntities db;

    public HomeController()
    {
        db = new TestEntities();
    }

    public HomeController(ITestEntities db)
    {
        this.db = db;
    }

    public ActionResult Index()
    {
        var count = db.Users.Count();
        ViewBag.count = count;

        return View(count);
    }        
} 
```

最后是使用 Moq 的 NUnit 测试

```
[Test]
public void ModelValueShouldBeTwo()
{
    var mockUsers = new Mock<IDbSet<User>>();
    mockUsers.Setup(m => m.Count()).Returns(2);

    var mockDB = new Mock<ITestEntities>();
    mockDB.Setup(db => db.Users).Returns((IDbSet<User>)mockUsers);

    var controller = new HomeController((ITestEntities)mockDB);

    var view = controller.Index();

    Assert.IsInstanceOf<ViewResult>(view);
    Assert.AreEqual(((ViewResult)view).Model, 2);
} 
```

问题出在这一行：`mockUsers.Setup(m => m.Count()).Returns(2);`. 运行此测试时，我收到以下错误：

`System.NotSupportedException : Expression references a method that does not belong to the mocked object: m => m.Count<User>()`

我认为这是由于它`.Count()`是一种静态方法，因此不能被 Moq 模拟。有没有一种方法可以使用 Moq 而不是使用成熟的存储库模式来测试这个简单的操作，据我所知，无论如何都应该将这`.Count()`部分硬编码为某种可测试的方法......也许我只是以错误的方式使用模拟？因为我的印象是使用 EF Code First 应该非常简单且可行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T12:32:31.377

如果您正在模拟测试实体，则无需进一步模拟

应该这样做（虽然，我不在 IDE 中，所以可能需要一些调整）

**更新以包含新的 InMemoryDbSet**

```
[Test]
public void ModelValueShouldBeTwo()
{
    //Build test users
    var mockUsers = new InMemoryDbSet<User>(){ new User(), new User()};
    var mockDB = new Mock<ITestEntities>();
    //Set up mock entities to returntest users.
    mockDB.Setup(db => db.Users).Returns(mockUsers);

    var controller = new HomeController((ITestEntities)mockDB);

    var view = controller.Index();

    Assert.IsInstanceOf<ViewResult>(view);
    Assert.AreEqual(((ViewResult)view).Model, 2);
} 
```

这意味着扩展方法将简单地使用您提供的测试数据。

See below for a good article on mocking dbset [http://geekswithblogs.net/Aligned/archive/2012/12/12/mocking-or-faking-dbset.aspx](http://geekswithblogs.net/Aligned/archive/2012/12/12/mocking-or-faking-dbset.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:30:25.160

**Mock `GetEnumerator()` instead of `Count()`**

`Count()` is an extension method on objects that implement `IEnumerable<T>`, and `IDbSet<T>` implements `IEnumerable<T>`

Extension methods are passed the object that they are called on. In this case the signature is:

```
public static int Count<TSource>(
    this IEnumerable<TSource> source,  //This is your IDbSet that you are mocking
    Func<TSource, bool> predicate
) 
```

Rather than trying to setup `Count()` to return a specific value, you can setup the members of `IEnumerable<T>` to achieve the same result. In the case of `IEnumerable<T>` all you have to do is set up `GetEnumerator()` to return an `Enumerator<T>` that enumerates over two values.

In this situation I usually create that `Enumerator<T>` by creating a new List with a couple of items and calling `GetEnumerator()` on it:

```
mockUsers.Setup(m => m.GetEnumerator()).Returns(new List<Users> {
    new User(),
    new User()
}.GetEnumerator()); 
```

Now, of course this effectively tests the extension method `Count()` in addition to whatever you are trying to achieve with your test, while that is a pretty low risk when the extension method is a part of .NET, it is something to keep in mind if you are using and authoring extension methods of your own.

# php - 过滤 HTML 标签

> ID：16210364
> 
> 赞同：2
> 
> 时间：2013-04-25T08:50:19.563
> 
> 标签：php, filter, html-entities

除了我选择的一些标签之外，有什么方法可以过滤所有 html 标签`<strong>, or <b>, <i>`？我知道 htmlentities 可以完成这项工作，但它会过滤所有 HTML 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:52:28.273

检查这个：[http ://www.php.net/strip_tags](http://www.php.net/strip_tags)

```
// Allow <p> and <a>
echo strip_tags($text, '<p><a>'); 
```

**编辑：**实际上，您所说的“过滤器”是什么意思？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:59:41.993

不，没有安全的方法可以做到这一点。php 的 strip_tags 将允许您使用这些标签，但这意味着您将容易受到 xss 的攻击。为了避免这种情况，更好的方法是 kses ( [http://sourceforge.net/projects/kses/](http://sourceforge.net/projects/kses/) ) 是 wordpress 使用的。
此外，htmlpurifier ( [http://htmlpurifier.org/](http://htmlpurifier.org/) ) 是我建议的方式。

在您的上下文中，我将使用 strip_tags 仅保留我想要的标签，然后我将通过 htmlpurifier 过滤器传递结果字符串以确保我不会得到 xss'ed。

# ruby-on-rails - 'Rails 服务器' <- 不起作用

> ID：16210366
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:50:29.290
> 
> 标签：ruby-on-rails

我是 Rails 的新手。我被要求对现有项目进行一些改进。我是从 Heroku 下载的。它使用 ruby​​ “1.8.7”，感谢 rvm，我也将它用于项目目录。我设法捆绑更新和捆绑安装。现在我尝试“rails server”并收到错误消息：

```
/home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:55: uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.5/lib/active_support.rb:56:in `require'
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/activesupport-2.3.5/lib/active_support.rb:56
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.5/bin/../lib/rails_generator.rb:28:in `require'
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.5/bin/../lib/rails_generator.rb:28
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.5/bin/rails:14:in `require'
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.5/bin/rails:14
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/bin/rails:19:in `load'
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/bin/rails:19
  from /home/jacek/.rvm/gems/ruby-1.8.7-p371/bin/ruby_noexec_wrapper:14 
```

我怎么解决这个问题？谢谢！

亚采克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:55:53.673

```
sudo gem update --system 
```

为我工作:-) 有关详细信息，请查看此[ruby​​ 论坛](http://www.ruby-forum.com/topic/1202806)

注释中的链接[Uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)](https://stackoverflow.com/questions/5176782/uninitialized-constant-activesupportdependenciesmutex-nameerror)也是一个很好的解决方案来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:19:40.237

答案很简单...

ruby 脚本/服务器
而不是 rails s

# python - 为 YUV2RGB 转换优化 python 嵌套循环

> ID：16210367
> 
> 赞同：0
> 
> 时间：2013-04-25T08:50:29.657
> 
> 标签：python, optimization

我们刚刚从海康威视导出了 YUV2RGB 算法。然而，对于我们的 720H​​ x 1280W 屏幕分辨率 python 转换，对于 1 个 RGB 帧的 720x1280=921,600 轮计算需要太长时间（15 秒）。任何人都知道如何优化以下 2 个大型嵌套循环？YUV2RGB算法是：

def YUV2RGB (Y1, U1, V1, dwHeight, dwWidth): # 函数调用

```
RGB1 = np.zeros(dwHeight * dwWidth * 3, dtype=np.uint8)  # create 1 dimensional empty np array with 720x1280x3

for i in range (0, dwHeight):    #0-720
    for j in range (0, dwWidth): #0-1280 

        # print "cv"

        Y = Y1[i * dwWidth + j]; 
        U = U1[(i / 2) * (dwWidth / 2) + (j / 2)]; 
        V = V1[(i / 2) * (dwWidth / 2) + (j / 2)];

        R = Y + (U - 128) + (((U - 128) * 103) >> 8); 
        G = Y - (((V - 128) * 88) >> 8) - (((U - 128) * 183) >> 8); 
        B = Y + (V - 128) + (((V - 128) * 198) >> 8);

        R = max(0, min(255, R)); 
        G = max(0, min(255, G)); 
        B = max(0, min(255, B));

        RGB1[3 * (i * dwWidth + j)] = B; 
        RGB1[3 * (i * dwWidth + j) + 1] = G; 
        RGB1[3 * (i * dwWidth + j) + 2] = R; 

RGB = np.reshape(RGB1, (dwHeight, dwWidth, 3))

print ("rgb.shape:")
print RGB.shape

return RGB 
```

“对于范围内的 i (0, dwHeight): #0-720 对于范围内 (0, dwWidth) 内的 j: #0-1280”

太大。任何优化这个的方法。谢谢。

马修

# java - Java - 如何检查一个类是否继承自某个类或接口？

> ID：16210369
> 
> 赞同：18
> 
> 时间：2013-04-25T08:50:31.217
> 
> 标签：java, reflection, instances

我需要检查：

```
public static boolean check(Class<?> c, Class<?> d)
{
    if (/* c inherits from d */)
        return true;
    else
        return false;
} 
```

**我怎样才能做到这一点 ？**

没有这可能`c.newInstance()`吗？

* * *

标题第一次写错了。现在它是正确的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-25T08:53:44.163

利用`isAssignableFrom`

```
if(d.isAssignableFrom(c)){
    // then d is a superclass of c
    // in other words, c inherits d
} 
```

> 确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口。如果是，则返回 true；否则返回false。如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

[资源](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T08:52:11.600

Class中有一个方法叫**[Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)** [**#isInterface()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isInterface%28%29)

```
 if (c.isInterface())
            return true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T08:54:31.073

试试这个

```
if(c.isAssignableFrom(d)){
   return true;
} else {
   return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T08:54:33.763

```
if (c.isInterface()) return true; 
```

是接口

```
public boolean isInterface() 
```

确定指定的 Class 对象是否表示接口类型。返回： 如果此对象表示接口，则为 true；否则为假。sAssignableFrom

```
public boolean isAssignableFrom(Class<?> cls) 
```

确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口。如果是，则返回 true；否则返回false。如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

具体来说，该方法测试指定的 Class 参数表示的类型是否可以通过恒等转换或扩展引用转换转换为该 Class 对象表示的类型。有关详细信息，请参阅 Java 语言规范，第 5.1.1 和 5.1.4 节。

参数： cls - 要检查的 Class 对象 返回： 指示 cls 类型的对象是否可以分配给此类对象的布尔值 抛出： NullPointerException - 如果指定的 Class 参数为 null。自：JDK1.1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T08:52:03.867

怎么样

[`public boolean isInterface();`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isInterface%28%29)

根据文档：

> 确定指定的 Class 对象是否表示接口类型。返回： 如果此对象表示接口，则为 true；否则为假。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T08:52:38.303

你试过了吗

```
c.isInterface()??? 
```

来自文档

> 确定指定的 Class 对象是否表示接口类型。

# export - Nagios 没有从 /etc/profile 获取导出

> ID：16210386
> 
> 赞同：3
> 
> 时间：2013-04-25T08:51:48.977
> 
> 标签：export, environment-variables, nagios, env

我的服务器上安装了 Nagios 和 Oracle sqlplus 客户端。Sqlplus 运行时需要很少的环境变量，所以我将导出添加到`/etc/profile`.
以 root 身份登录设置变量正确，以用户 nagios 设置登录也可以，但是当我从 nagios Web 界面运行一些检查时（这些检查是用 bash 编写的），它们以错误结束`Error: Empty result from sqlplus. Check plugin settings and Oracle status.`
当我从终端以 root 或身份运行这些检查时nagios 用户，一切正常，这就是我发现问题出在环境变量中的方式。

我会很高兴有任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-26T22:36:47.767

我发现这是 nagios 的一个错误，您可以从此[链接](http://bugzilla.globus.org/globus/show_bug.cgi?id=6539)查看文档。

您将在文件中找到`/etc/init.d/nagios`此代码。

```
# Load any extra environment variables for Nagios and its plugins
if test -f /etc/sysconfig/nagios; then
       . /etc/sysconfig/nagios
fi 
```

只需使用您需要的额外变量在 Fedora 或 rhel`nagios`的路径上创建文件。`/etc/sysconfig/`关于案例。

```
[root@server sysconfig]# cat nagios 
export ORACLE_HOME=/usr/lib/oracle/11.2/client64
export TNS_ADMIN=$ORACLE_HOME/network/admin
export PATH=$PATH:$ORACLE_HOME/bin
export LD_LIBRARY_PATH=$ORACLE_HOME/lib 
```

就是这样。

最好的问候马可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T09:25:24.770

NRPE 与 Marco 之前提到的问题相同。

您必须将环境变量添加到 /etc/sysconfig/nrpe 然后您必须重新启动 nrpe ： service nrpe restart

谢谢优素福

# javascript - 使用 jquery mobile 的 swipeJS

> ID：16210387
> 
> 赞同：0
> 
> 时间：2013-04-25T08:51:51.113
> 
> 标签：javascript, jquery, html, jquery-mobile, swipe

我试图在我的 jquery 移动应用程序中实现 swipeJS。

这是我实现 swipeJS 的页面代码。

完整代码： http: [//jsfiddle.net/unTHs/](http://jsfiddle.net/unTHs/) （jsfiddle 上的输出不一样）

```
<div id="slider" data-role="page">
<div data-role="content" id="contentSlider">

<div id='mySwipe' style='max-width:500px;margin:0 auto' class='swipe'>
  <div class='swipe-wrap'>

    <div><b>1</b></div>
    <div><b>2</b></div>
    <div><b>3</b></div>
  </div>
</div>
<div style='text-align:center;padding-top:20px;'>
  <button onclick='mySwipe.prev()'>prev</button>
  <button onclick='mySwipe.next()'>next</button>
</div>
</div> 
```

我的问题是，我得到以下输出。我把每一个“图片”都放在一边。没有图片幻灯片。

我不知道问题是什么。:(

![在此处输入图像描述](https://i.stack.imgur.com/h77mT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:20:45.253

我让它工作了。最大的问题是该`.live()`函数已被弃用，不再是 jQuery 1.9 的一部分。

工作小提琴：http: [//jsfiddle.net/Spokey/unTHs/2/](http://jsfiddle.net/Spokey/unTHs/2/)

**改变这个**

```
$('#contentSlider').live('pageshow', function (event, ui) {
  var elem = document.getElementById('mySwipe');
  window.mySwipe = Swipe(elem, {
  });
}); 
```

**对此**

```
var elem = document.getElementById('mySwipe');
window.mySwipe = Swipe(elem, {
  // startSlide: 4,
  // auto: 3000,
  // continuous: true,
  // disableScroll: true,
  // stopPropagation: true,
  // callback: function(index, element) {},
  // transitionEnd: function(index, element) {}
  // you can leave out these comments.
}); 
```

有关更多信息，请参见小提琴，您可能还缺少一些 CSS（不确定）。

**NEW FIDDLE** *[http://jsfiddle.net/Spokey/unTHs/3/](http://jsfiddle.net/Spokey/unTHs/3/)*
设置容器的`min-width`和`width`。图像`width`和`height`_`100%`

# sql - sql中多对多关系的规范化

> ID：16210389
> 
> 赞同：1
> 
> 时间：2013-04-25T08:51:55.603
> 
> 标签：sql, normalization, database-normalization

我有一个包含两列的产品表

```
ProductID   Desc
  1         Fan
  2         Table
  3         Bulb 
```

我有另一个包含供应商信息的表

```
SupplierID    Desc
   1          ABC
   2          XYZ
   3          HJK 
```

现在一个供应商可以提供多种产品，一种产品可以由多个供应商提供为了实现这一点，我创建了另一个表 tbl_Supplier_Product

```
 SupplierID    ProductID 
     1            1
     1            2
     2            1
     2            2
     2            3 
```

通过主复合键将此表链接到供应商和产品表是否是一种好方法。在此表中，主键将是复合键（SupplierID 和 ProductID），或者我应该为每条记录添加一个额外的列行 ID，然后将其用作主键并向列 SupplierID 和 ProductID 添加唯一约束

```
 SupplierID    ProductID    Row ID
         1            1       1
         1            2       2
         2            1       3
         2            2       4
         2            3       5
UNIQUE CONSTRAINT(SupplierID, ProductID) 
```

该表与供应商表的关系是什么？我在这里有点困惑，因为我添加了这个表来解决多对多关系和冗余数据，但看起来这个表仍然与两个表都有多对多关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T08:53:52.250

您不需要额外的列：您只需要一个复合键

我也会创建一个与 PK 相反的唯一索引：这对许多查询很有用，并且还为 ProductID 提供了一个 FK 索引

评论后：

```
CREATE TABLE SupplierProduct (
    SupplierID int NOT NULL,
    ProductID int NOT NULL,

    PRIMARY KEY (SupplierID, ProductID)
);
GO
CREATE UNIQUE NONCLUSTERED INDEX IXU_ReversePK ON SupplierProduct (ProductID, SupplierID);
GO 
```

更多

*   [SQL：您是否需要多对多表的自动增量主键？](https://stackoverflow.com/questions/790334/sql-do-you-need-an-auto-incremental-primary-key-for-many-many-tables/790359#790359)更多（见评论）
*   [以相反顺序定义列的 2 个索引之间的差异](https://stackoverflow.com/questions/1549847/difference-between-2-indexes-with-columns-defined-in-reverse-order/1550102#1550102)

并且通常也使用它来确保您所有的 FK 都有索引

```
SELECT  fk.name AS [Missing FK Index]
FROM    sys.foreign_keys fk
WHERE   EXISTS
        (
        SELECT  *
        FROM    sys.foreign_key_columns fkc
        WHERE   fkc.constraint_object_id = fk.object_id
                AND NOT EXISTS
                (
                SELECT  *
                FROM    sys.index_columns ic
                WHERE   ic.object_id = fkc.parent_object_id
                        AND ic.column_id = fkc.parent_column_id
                        AND ic.index_column_id = fkc.constraint_column_id
                )
        );
GO 
```

在 ERD 中（我有一个 PowerPoint 中的随机一个）：

![在此处输入图像描述](https://i.stack.imgur.com/yYihV.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-19T10:56:02.910

您可以使用复合键，但现在使用代理键更为传统。代理项是一个主键，通常是唯一的 GUID，除了唯一标识表行的目的之外，对任何人都没有任何意义。代理仅由软件在内部使用，因此通常用户永远不会看到它，也不需要看到它。

您还应该使用主键的命名约定，其中 id 是主键（这应该是代理键）并且所有外键都是 table.id。表部分告诉您它是该表的外键。所以：

[![使用代理（主）键的表](https://i.stack.imgur.com/xT2Ac.png)](https://i.stack.imgur.com/xT2Ac.png)

产品-供应商表是一些人所说的“链接表”或“连接表”。规范化多对多关系是他们的职责。它将多对多的关系变成了一对多的关系，从此我们都过着幸福的生活。如此多的产品可以有许多供应商，并且许多供应商可以有许多产品由产品-供应商连接表规范化（解决），其中产品具有一对多的产品-供应商行，供应商具有一对多的产品-供应商行。

[![在此处输入图像描述](https://i.stack.imgur.com/E7gqO.png)](https://i.stack.imgur.com/E7gqO.png)

请注意，连接表可以称为供应商-产品或产品-供应商，无论您以哪种方式命名它，只要它以父表命名并在其间加上连字符即可，这也是一种命名约定。

这里的要点是，您总是通过将其规范化为两个一对多关系来解决多对多关系，如此处所示。

# git - git删除的文件显示为红色，如何删除它们

> ID：16210390
> 
> 赞同：0
> 
> 时间：2013-04-25T08:51:56.773
> 
> 标签：git

在我从 git bash cli 使用 git status 命令从我的目录中删除文件后，我得到了所有已删除文件的红色列表，例如

**已删除：MyProject/commands/fileone.txt**

现在，当我使用 git status 命令时，我会得到大量这些已删除文件的列表。

使用哪个命令来删除它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T08:55:50.917

您可以使用“添加”下一次提交的已删除文件`git add -u`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:52:52.433

如果您使用 删除了文件`git rm`，则需要进行新的提交：`git commit -m "Removed files"`

# iphone - 是否有在安装之前将元数据传输到移动应用程序的技巧？

> ID：16210391
> 
> 赞同：0
> 
> 时间：2013-04-25T08:51:58.363
> 
> 标签：iphone, rest, qr-code

这是我正在努力解决的一个场景：我们有一个本机应用程序（Android 和 iPhone），在扫描 QR 码后下载，将用户发送到应用程序市场。

我想传输有关在安装之前扫描的特定二维码的元数据（假设有几种类型的二维码都通向同一个应用程序）。

我该怎么做呢？

我知道这不是微不足道的，因为还没有安装应用程序。我的目标是让 QR 码将用户重定向到 mydomain.com，这将保留一些关于用户的数据，然后重定向到应用市场。安装应用程序后，我想以某种方式向 mydomain.com 上的服务器询问该用户。

我可以使用 cookie 或类似的东西做类似的事情吗？该过程不一定是可靠的。

感谢您的创造力，尤瓦尔·科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:10:41.313

我认为这在 iOS 中是不可能的，因为即使您设法在 Safari 中存储 cookie，您也无法从您的应用程序中获取 cookie。看看这个。。

[https://stackoverflow.com/a/532533/919545](https://stackoverflow.com/a/532533/919545)

我不确定android。

# jquery - CSS transitionEnd 事件仍在监听完成的过渡

> ID：16210394
> 
> 赞同：0
> 
> 时间：2013-04-25T08:52:08.843
> 
> 标签：jquery, css, css-transitions

我有两个 div 元素`.parentDiv`，即`.childDiv`

我正在使用 css 过渡来为两者设置动画。应该首先`.childDiv`对其不透明度进行动画处理，然后在 transitionend 进行动画处理，对`.parentDiv`高度进行动画处理，然后调用警报检查。

所以这里是代码：

```
 $('.childDiv').addClass('faded').on('transitionend', function(){
            $('.childDiv').off('transitionend');

            $('.parentDiv')
                .addClass('no-height')
                .on('transitionend',event, function() {
                    alert(event.propertyName);
                });
        }); 
```

问题：

在`.addClass('faded')`它继续执行第二次转换之后（这是正确的）。但是 ontransitionend ，已被警告的 event.propertyName 是“不透明”的，并且在完成其转换`.parentDiv`后立即被触发。`.childDiv`

我希望它仅在调整高度时执行。不要误会，一旦高度转换完成，“高度”也会被提醒，但它似乎还会读取除高度调整之外的其他转换。

这是它的一个jsfiddle：http: [//jsfiddle.net/e9uwA/](http://jsfiddle.net/e9uwA/)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:14:38.540

只需在 $('.childDiv').on() 中添加 event.stopPropagation()

因为 childDiv 的事件将传播到 parentDiv

# r - 如何在 R 中使用类似 perl 的正则表达式来匹配向量中保存的确切字符串？

> ID：16210400
> 
> 赞同：0
> 
> 时间：2013-04-25T08:52:26.237
> 
> 标签：r

我有一个包含许多类似 ID 和相关信息的数据框：

```
col1 = c("id_string", "1id_string", "id_string1")    
col2 = c("x", "y", "z")    
col3 = c("d", "e", "f")    
data = data.frame(col1, col2, col3) 
```

我有一个包含我希望用于匹配的字符串的向量（循环输出）：

`id = "id_string"`

我使用 grep 将向量中保存的字符串与 data$col1 中包含该字符串的所有行匹配

`grep(id, data$col1)`

但是，我希望仅从 data$col1 中提取行号，其中包含 id 中的确切字符串（之前/之后没有字符）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:55:12.290

如果你必须使用`grep`尝试

```
data
##         col1 col2 col3
## 1  id_string    x    d
## 2 1id_string    y    e
## 3 id_string1    z    f

grep(paste0("^", id, "$"), data$col1)
## [1] 1 
```

或者正如@Arun 建议的那样

```
data[data$col1 == id, ] 
```

# c# - 在 PropertyGrid 中编辑列表

> ID：16210403
> 
> 赞同：0
> 
> 时间：2013-04-25T08:52:37.083
> 
> 标签：c#, winforms, list, edit, propertygrid

我有一个`PropertyGrid`包含职位列表的（winform）。

```
private ValuesCollection _position1 = new ValuesCollection();

public ValuesCollection Position1
{
   get { return _position1; }
   set
   {
     _position1 = value;
   }
} 
```

ValuesCollection 这个类是我用下面的文章做的：**[PropertyGrid 中集合数据的自定义显示](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)**

列表中的每个对象都属于它的值类​​​：

```
[TypeConverter(typeof(ExpandableObjectConverter))]
public class Values
{
    [Browsable(false)]
    public string Name { get; set; }
    public virtual double Value { get; set; }

    public Values()
        : this(null, 0)
    {

    }
    public Values(string name, double value)
    {
        Name = name;
        Value = value;

    }

    public override string ToString()
    {
        return Value.ToString();
    }
} 
```

我的问题是当列表打开时我无法在第一级进行编辑，因为每个项目都是一个对象。

![在此处输入图像描述](https://i.stack.imgur.com/VuDGk.png)

我必须打开另一个级别（打开对象本身）并在那里进行编辑。

![在此处输入图像描述](https://i.stack.imgur.com/X2mwv.png)

我想在第一级进行编辑，而不是单独打开任何对象。我还没有找到方法，有人有想法吗？

（PS我不想使用`Collection Editor`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:04:39.947

你可以`TypeConverter`为你的`Values`班级实现一个

# c - Valgrind 在 Mac OSX 10.8 上的空程序上显示内存泄漏

> ID：16210408
> 
> 赞同：7
> 
> 时间：2013-04-25T08:52:50.257
> 
> 标签：c, macos, valgrind, memory-leaks

Valgrind 使用 brew 安装。

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
    return 0;
}

gcc -g -o hello hello.c

valgrind --tool=memcheck --leak-check=yes ./hello 
```

![在此处输入图像描述](https://i.stack.imgur.com/1axzw.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-07T07:54:44.070

这不是您需要担心的内存泄漏。ImageLoader 是 OS X 运行时的一部分，负责加载二进制文件和动态库。它在初始化期间分配了一次内存并忘记了它，但它是无害的，因为它是只分配一次的一小块内存。它做了很多 Valgrind 不喜欢的事情，但并不是不正确的。您应该[将这些添加到您的抑制文件](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T17:43:51.550

Valgrind 对 Mac OSX 10.8 的支持仍然有限。ImageLoaderMachO::doInitialization... 应该在您的抑制文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T20:47:48.047

另一个答案是正确的，我只是碰巧遇到了同样的问题，并且在创建抑制文件时遇到了一些麻烦。因此，为了帮助其他人，这是我为 Mac OS X Mountain Lion 生成的最小抑制文件： [https ://www.dropbox.com/s/2btyqnf8uesgsis/minimal.supp](https://www.dropbox.com/s/2btyqnf8uesgsis/minimal.supp)

# java - java.util.Date 语言环境中的 toString() 方法是否独立？

> ID：16210409
> 
> 赞同：3
> 
> 时间：2013-04-25T08:52:51.430
> 
> 标签：java, java.util.date

```
 try {
         SimpleDateFormat strTemp = new SimpleDateFormat("ddMMMyy", Locale.US);
          Date reasult = strTemp.parse(input);
         String   checkDate = reasult.toString().substring(8, 10) + reasult.toString().substring(4, 7) + reasult.toString().substring(26);
         if (!checkDate.toUpperCase().equals(input))
             return false;

         else
          return true;
       } catch (Exception ex) {
            return false;
     } 
```

正如 API 告诉我的，java.util.Date.toString() 类似于格式“dow mon dd hh:mm:ss zzz yyyy”，我只想知道 toString() 的内容格式是否会在 Windows 语言环境中发生变化改变了吗？如“Russian”，“English”，提示输入相同，checkDate值是否相同？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:06:45.973

`Date.toString()`独立于语言环境。您可以观察到的最重要的变化是时区，这取决于您计算机的时区设置。这是[设计使然](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)。

> 将此 Date 对象转换为以下形式的字符串：
> 
> ```
>  dow mon dd hh:mm:ss zzz yyyy 
> ```
> 
> 在哪里：
> 
> *   `dow`是星期几 ( `Sun`, `Mon`, `Tue`, `Wed`, `Thu`, `Fri`, `Sat`)。
> *   `mon`是月份 ( `Jan`, `Feb`, `Mar`, `Apr`, `May`, `Jun`, `Jul`, `Aug`, `Sep`, `Oct`, `Nov`, `Dec`)。
> *   `dd`是月份中的日期（`01`通过`31`），为两位小数。
> *   `hh`是一天中的小时（`00`通过`23`），为两位小数。
> *   `mm`是一小时内的分钟（`00`通过`59`），为两位小数。
> *   `ss`是一分钟内的第二个（`00`通过`61`, 作为两位小数。
> *   `zzz`是时区（并且可能反映夏令时）。标准时区缩写包括方法 parse 识别的缩写。如果时区信息不可用，`zzz`则为空 - 也就是说，它根本不包含任何字符。
> *   `yyyy`是年份，四位小数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:07:27.343

它不会因为它的语言环境而改变。曾经有，`toLocaleString()`但现在已弃用。

你可以看到代码 -

```
public String toString() {

    // "EEE MMM dd HH:mm:ss zzz yyyy";
    BaseCalendar.Date date = normalize();
    StringBuilder sb = new StringBuilder(28);
    int index = date.getDayOfWeek();
    if (index == gcal.SUNDAY) {
        index = 8;
    }
    convertToAbbr(sb, wtb[index]).append(' ');                        // EEE
    convertToAbbr(sb, wtb[date.getMonth() - 1 + 2 + 7]).append(' ');  // MMM
    CalendarUtils.sprintf0d(sb, date.getDayOfMonth(), 2).append(' '); // dd

    CalendarUtils.sprintf0d(sb, date.getHours(), 2).append(':');   // HH
    CalendarUtils.sprintf0d(sb, date.getMinutes(), 2).append(':'); // mm
    CalendarUtils.sprintf0d(sb, date.getSeconds(), 2).append(' '); // ss
    TimeZone zi = date.getZone();
    if (zi != null) {
        sb.append(zi.getDisplayName(date.isDaylightTime(), zi.SHORT, Locale.US)); // zzz
    } else {
        sb.append("GMT");
    }
    sb.append(' ').append(date.getYear());  // yyyy
    return sb.toString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:11:21.537

小心时区！除此之外，不，它不会根据语言环境而改变。检查`java.util.Date.toString()`方法的源代码（这总是一个好主意！）：

```
 public String toString() {
    // "EEE MMM dd HH:mm:ss zzz yyyy";
    BaseCalendar.Date date = normalize();
    StringBuilder sb = new StringBuilder(28);
    int index = date.getDayOfWeek();
    if (index == gcal.SUNDAY) {
        index = 8;
    }
    convertToAbbr(sb, wtb[index]).append(' ');            
    ... 
```

那个 wtb 是一个私有的最终静态字符串：

```
private final static String wtb[] = {
    "am", "pm",
    "monday", "tuesday", "wednesday", "thursday", "friday",
    "saturday", "sunday",
    "january", "february", "march", "april", "may", "june",
    "july", "august", "september", "october", "november", "december",
    "gmt", "ut", "utc", "est", "edt", "cst", "cdt",
    "mst", "mdt", "pst", "pdt"
}; 
```

所以，不，它不会改变，它永远是英文名字。

更新：正如@nhahtdh 指出的那样，时区将根据计算机区域配置的设置位置而改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:12:02.100

通常`toString()`负责转换为String。本地系统上的语言环境更改无关紧要。

```
 //Now my local date time (US & CANADA)
    Date dt1=new Date();    
    System.out.println("Date is ::"+dt1.toString()); 
```

它会自动与您的语言环境一起使用。上面的代码也可以正常工作。

# codeigniter - jQuery自动完成检索图像

> ID：16210414
> 
> 赞同：0
> 
> 时间：2013-04-25T08:53:01.540
> 
> 标签：codeigniter

我需要一些帮助，在结果中使用带有图像的自动完成功能（类似于 Facebook 的自动完成功能）。但是，我想从基础开始......就像我在这里找到的一个很好的例子：http: [//jsfiddle.net/K5q5U/249/](http://jsfiddle.net/K5q5U/249/)

```
 <input id="auto" type="text" />

CSS:

    img { width: 25px; height: 25px; padding-right: 10px;}
    .ui-autocomplete > li { height: 40px; }

JavaScript:

    $(document).ready(function () {
      $("#auto").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "http://api.stackoverflow.com/1.1/users",
                data: {
                    filter: request.term,
                    pagesize: 10
                },
                jsonp: "jsonp",
                dataType: "jsonp",
                success: function(data) {
                    response($.map(data.users, function(el, index) {
                        return {
                            value: el.display_name,
                            avatar: "http://www.gravatar.com/avatar/" +
                                el.email_hash
                        };
                    }));
                }
            });
        }
    }).data("uiAutocomplete")._renderItem = function (ul, item) {
        return $("<li />")
            .data("item.autocomplete", item)
            .append("<a><img src='" + item.avatar + "' />" + item.value + "</a>")
                .appendTo(ul);
    };    `enter code here` }); 
```

但是，我如何使用它来创建它，就像使用 localhost 一样？有没有 jQuery 的代码示例？我正在使用 CodeIgniter 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:55:58.647

[这](http://vortexdev.netii.net/article_16/How_to%3a_Autocomplete_with_CodeIgniter_and_jQuery)是一个很好的使用 codeigniter 框架的自动完成教程。你能告诉我你正在使用哪个版本的 codeigniter。

# ruby-on-rails - Rails：有没有办法查看哪个视图/部分生成了站点 HTML 的哪个部分？

> ID：16210415
> 
> 赞同：0
> 
> 时间：2013-04-25T08:53:03.710
> 
> 标签：ruby-on-rails, view

在我们的应用程序中，我们正在处理许多类似视图/部分的变体。有时，当您想要编辑它时，很难找到正确的文件。因此，以某种方式在生成的 HTML 代码中打印出视图/部分的文件路径会非常方便。

我想有人可以覆盖这个`render`方法，但也许已经有解决方案了？

非常感谢乔希的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:52:24.307

`console log`您可以在上面或里面看到所有渲染的视图/部分`development log`

它看起来像这样：

```
 Rendered static/_menu.html.erb (165.0ms) 
```

# java - Java - 线程池

> ID：16210420
> 
> 赞同：0
> 
> 时间：2013-04-25T08:53:16.560
> 
> 标签：java, scheduled-tasks, threadpool, threadpoolexecutor

我的预定线程池--->

```
private static ScheduledExecutorService pendingCheckScheduler = Executors.newScheduledThreadPool(1); 
```

线程 1--->

```
private ScheduledFuture<?> pendingTranStatusCheckHandle=pendingCheckScheduler.scheduleAtFixedRate(new PendingTranStatusCheck(),0,checkForPendingTrans,TimeUnit.SECONDS ); 
```

线程2--->

```
private ScheduledFuture<?> forcibleBatchCloseHandle=pendingCheckScheduler.schedule(new ForcibleBatchClose(), waitForPendingTrans, TimeUnit.MINUTES); 
```

`Thread 1`每 10 秒执行一次。`Thread 2`应该在 30 分钟后开始。

`Thread 1`行为与预期一样`Thread2`，预计在 30 分钟后开始，在 1 小时后开始。

延迟`thread1`是否导致了这个问题？如果是这样，`thread2`考虑到我们在线程池中只有一个线程，当线程 1 完成时应该给予优先级。为什么`Thread2`在 1 小时后启动时间过长？

我一无所知，期待一些指示。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:58:21.887

这是因为您在执行程序中有单线程。

```
Executors.newScheduledThreadPool(1); 
```

它会导致第二个 Runnable 等待，直到第一个 Runnable 完成。

尝试使用两个线程：

```
Executors.newScheduledThreadPool(2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T08:58:55.343

您的概念略有偏差，这抵消了您的结论。您总共有*一个线程*，并且计划在该线程上运行两个*任务。*因此，如果重复任务执行很长时间，占用线程，您肯定可以预料到干扰。

# hibernate - 如何删除在 Hibernate 中已删除子类实体的超类实体？

> ID：16210422
> 
> 赞同：0
> 
> 时间：2013-04-25T08:53:17.467
> 
> 标签：hibernate, subclass, entitymanager, superclass

有两个实体类 A 和 B，以及实例 a、b（a 和 b 具有相同的 id）。B 是 A 的子类（ B 扩展 A）。我从数据库中删除了一个实体“b”。然后，我看到“a”没有被删除。其实这就是我真正想要的。但是，在我的代码的某个时刻，我也想删除“a”。但是当我执行 entityManager.remove(a) 时，它会抛出异常说，无法删除分离的实体。尽管超类实体保留在数据库中，但似乎删除子类实体会使超类实体分离。谁能帮我删除实例a。

注意：a 和 b 具有相同的 id，因为当我创建 b 时，会自动创建具有相同 id 的 a （继承规则）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:12:27.220

你应该使用`session.delete(b)`. 这将从您的数据库中删除两条记录。

在使用原生 SQL 删除语句删除 b 记录后，您必须使用原生删除语句相应地删除 a 记录。

# php - 使用键和关联删除数组中的重复数据

> ID：16210426
> 
> 赞同：1
> 
> 时间：2013-04-25T08:53:27.353
> 
> 标签：php, arrays

我已经从数据库中的表中执行了数据，结果是

```
array(3) {
   [0]=>
   array(5) {
      [0]=> string(1) "1"
      ["id_pegawai"]=> string(1) "1"
      [1]=> string(1) "1"
      ["id_jabatan"]=> string(1) "1"
      [2]=> string(1) "1"
      ["id_media"]=> string(1) "1"
      [3]=> string(7) "Marjana"
      ["nama_pegawai"]=> string(7) "Marjana"
      [4]=> string(8) "NIK.0001"
      ["nik"]=> string(8) "NIK.0001"
   },
   [1]=>
   array(5) {
      [0]=> string(1) "2"
      ["id_pegawai"]=> string(1) "2"
      [1]=> string(1) "4"
      ["id_jabatan"]=> string(1) "4"
      [2]=> string(1) "8"
      ["id_media"]=> string(1) "8"
      [3]=> string(7) "Deny"
      ["nama_pegawai"]=> string(7) "Deny"
      [4]=> string(8) "NIK.0007"
      ["nik"]=> string(8) "NIK.0007"
   },
   [2]=>
   array(5) {
      [0]=> string(1) "3"
      ["id_pegawai"]=> string(1) "3"
      [1]=> string(1) "9"
      ["id_jabatan"]=> string(1) "9"
      [2]=> string(1) "6"
      ["id_media"]=> string(1) "6"
      [3]=> string(7) "Juny"
      ["nama_pegawai"]=> string(7) "Juny"
      [4]=> string(8) "NIK.0011"
      ["nik"]=> string(8) "NIK.0011"
   }
} 
```

我想这样改变它：

```
array(3) {
   [0]=>
   array(5) {
      [0]=> string(1) "1"
      [1]=> string(1) "1"
      [2]=> string(1) "1"
      [3]=> string(7) "Marjana"
      [4]=> string(8) "NIK.0001"
   },
   [1]=>
   array(5) {
      [0]=> string(1) "2"
      [1]=> string(1) "4"
      [2]=> string(1) "8"
      [3]=> string(7) "Deny"
      [4]=> string(8) "NIK.0007"
   },
   [2]=>
   array(5) {
      [0]=> string(1) "3"
      [1]=> string(1) "9"
      [2]=> string(1) "6"
      [3]=> string(7) "Juny"
      [4]=> string(8) "NIK.0011"
   }
} 
```

如何使用 assoc 删除数组？请帮助我，谢谢

注意：我不是使用 MYSQL，而是使用 ORACLE。我执行查询使用这样的代码：

```
 $this->connection->executeQuery($sql, array($tanggalAwal, $tanggalAkhir), array(Type::DATETIME, Type::DATETIME))->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:01:37.683

如果您仍在使用旧的和折旧的 php-mysql，请查看 或[mysql_fetch_array](http://us.php.net/manual/en/function.mysql-fetch-array.php)选项中的[fetch_style 。](http://us.php.net/manual/en/pdostatement.fetch.php)`PDOStatement::fetch` `result_type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T10:07:04.583

在我设计一个关于从数据库中获取结果的 php 脚本之前，我已经尝试过这个问题。

如果您不想在没有提及键的情况下获取数组值，您可以使用 mysql_fetch_assoc()。

例如：

```
 while ($rows = mysql_fetch_assoc($result)) {
           var_dump($rows); 
           //You may using "var_dump" to check the results that correct or not
           //It's a simple and useful way instead of echo.
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T08:59:05.267

我感觉你用的是什么`mysql_*`，所以替换：

```
mysql_fetch_array() 
```

和：

```
mysql_fetch_row() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:15:00.103

看看[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)

并尝试此代码

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("ID: %s  Name: %s", $row[0], $row[1]);  
} 
```

关键是`MYSQL_NUM`。

希望能解决你的问题

# apache - 如何避免“RewriteBase”

> ID：16210435
> 
> 赞同：1
> 
> 时间：2013-04-25T08:53:56.370
> 
> 标签：apache, .htaccess, mod-rewrite

我不想手动设置每个站点`RewriteBase`。`.htaccess`如何将其设置为相对，因此将站点根目录移动到新位置不需要对其进行任何修改。

我已经阅读了这个 [http://michael.orlitzky.com/articles/avoiding_rewritebase_with_mod_rewrite.php](http://michael.orlitzky.com/articles/avoiding_rewritebase_with_mod_rewrite.php)但它似乎不适用于 .htaccess 文件。这是一个例子`htaccess`：

```
AddDefaultCharset UTF-8

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /test
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?_url=/$1 [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:39:35.657

One way to avoid modifying RewriteBase in different setups is to use **symlinks to create same name linked directory** every where. And make sure you have this option set at the top:

```
Options +FollowSymLinks 
```

# python - XMPP 连接到服务器（Python）

> ID：16210438
> 
> 赞同：0
> 
> 时间：2013-04-25T08:54:08.810
> 
> 标签：python, xmpp, bots

我目前正在学习[创建 Google Talk Bot的教程/入门](http://sleekxmpp.com/getting_started/echobot.html)

我已经制作了 EchoBot，但它在运行时失败并出现以下错误：

```
File "echobot.py", line 59, in <module>
if xmpp.connect(('talk.google.com'), '5222'):
File "C:\Python31\Lib\sleekxmpp\clientxmpp.py", line 143, in connect
reattempt=reattempt)
File "C:\Python31\Lib\sleekxmpp\xmlstream\xmlstream.py", line 372, in connect
self.address = (host, int(port))
ValueError: invalid literal for int() with base 10: 'a' 
```

我尝试过 Python 3,3 、 3,2 和 3,1 解释器，结果相同。

我无法从教程中获取这些行来使用任何一个编译器进行编译：

```
if sys.version_info < (3, 0):
reload(sys)
sys.setdefaultencoding('utf8') 
```

Bot 中失败的代码如下：

```
if xmpp.connect(('talk.google.com'), '5222'):
    xmpp.process(block=True)
else:
    print('Fekk ikkje kopla til') 
```

感谢您的任何提示/帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:05:33.263

你写错了：

```
xmpp.connect(('talk.google.com', '5222'))
                               |
                             there you missed a comma 
```

第二件事可能是将端口放在第二位。

```
xmpp.connect(('talk.google.com', 5222), '5222') 
```

我不知道第二个论点，但是

**互联网地址**几乎总是`(HOST, PORT)`

# java - 如何防止 JSP 页面刷新

> ID：16210462
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:55:54.650
> 
> 标签：java

请任何人帮助我了解如何在触发请求参数时防止 JSP 页面刷新。下面是我的代码行：

```
String action = request.getParameter("cmd");
  if (action == null) {
                 System.out.println("You are here2");
                action = "";
                }
 else if(action.equalsIgnoreCase("examSelected")){

            System.out.println("The Exam ID of the Long value is " + ExamId);
           ArrayList<Subject> subjectName = new ArrayList<Subject>(); 
```

我希望当动作在examSelected 上时，让JSP 页面不刷新。感谢回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:59:59.720

如果您希望在不刷新页面的情况下更新页面信息，您可以使用 Ajax 来更新页面上的信息。

这是描述如何 ajax 请求的详细教程。[https://netbeans.org/kb/docs/web/ajax-quickstart.html](https://netbeans.org/kb/docs/web/ajax-quickstart.html)

# android - 有没有更简单的方法来使用 AlarmManager 或设置实时警报？

> ID：16210465
> 
> 赞同：0
> 
> 时间：2013-04-25T08:56:00.683
> 
> 标签：android, android-alarms

似乎根据实际经过的时间（与正常运行时间相反，正常运行时间在设备休眠时停止）为操作计时的唯一方法是 AlarmManager。

**是否有一种*简单*的方法来执行基于“wallclock”的延迟执行，例如通过 AlarmManager 周围的开源包装器？**

对于正常的计时操作，您可以使用处理程序，这很简单，因为这样一个简单的任务应该是：

*   实现处理程序回调（无需注册）
*   实例化一个处理程序
*   调用 sendEmptyMessageDelayed 或类似函数
*   要清除所有设置的延迟，只需调用`removeCallbacksAndMessages(null)`

但是，Handler 仅支持基于正常运行时间的延迟，这有时是不够的（例如，如果您想每 15 分钟检查一次服务器是否有新消息）。

如果你想要这些，似乎你必须使用AlarmManager，这不是很舒服：

*   为您的警报定义一个动作
*   创建接收器（通过创建专用接收器类并将其声明为清单，或实现接口，使用 registerReciever 注册接收器，并在完成后取消注册）
*   为您的操作创建意图
*   将所述意图包装在待处理的意图中，如果要取消警报，则存储待处理的意图
*   获取警报管理器（这需要上下文）
*   设闹钟
*   当您想取消警报时，请使用存储的 pendingIntent 取消它
*   如果您决定有多个意图或更改数据的意图，则必须将它们全部保存以在之后清理警报管理器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:05:18.377

> 对于正常的计时操作，您可以使用处理程序

仅来自前台活动。`Handler`长期轮询的任何其他用途充其量是不可靠的，即使忽略您对正常运行时间计算的担忧。

> 为您的警报定义一个动作

这不是必需的。这甚至不是一个好主意。

> 创建接收器（通过创建专用接收器类并将其声明为清单，或实现接口，使用 registerReciever 注册接收器，并在完成后取消注册）

如果您希望事件在您不在前台时发生，并且在设备处于睡眠状态（`_WAKEUP`警报）时发出警报，则需要清单注册的接收器。如果`_WAKEUP`不需要，服务就足够了。如果您只需要在前台并在活动中接收事件，请使用`createPendingResult()`给您一个`PendingIntent`将触发`onActivityResult()`您的活动的事件。`postDelayed()`但是，在后一种情况下，使用a`View`或会更有意义`Handler`。

> 如果要取消警报，请存储待处理的意图

如果存储 a`PendingIntent`是一种选择，那么`Handler`您只需要并且`AlarmManager`不合适。要取消警报，您需要一个等价物`PendingIntent`（基础`Intent`对象基于匹配`filterEquals()`且`PendingIntent`操作 [活动、服务、广播] 相同）。

> 当您想取消警报时，请使用存储的 pendingIntent 取消它

不，您可以通过创建等效的`PendingIntent`.

> 如果您决定有多个意图或更改数据的意图，则必须将它们全部保存以在之后清理警报管理器

不，您可以通过创建等效的`PendingIntent`.

> 是否有一种简单的方法来执行基于“wallclock”的延迟执行，例如通过 AlarmManager 周围的开源包装器？

为此创建包含 80% 工作的包装器代码所花费的时间比编写问题所花费的时间要少。我不知道为此有专门的图书馆，部分原因是它不会有那么多。

或者，使用`ScheduledExecutorService`and a `WakeLock`，用于短期的事情。这不适合“每 15 分钟”的场景，因为它使设备始终处于唤醒状态。

# ios - 暂停计时器、uiview 动画和音频 iOS

> ID：16210466
> 
> 赞同：0
> 
> 时间：2013-04-25T08:56:08.853
> 
> 标签：ios, xcode, avaudioplayer, nstimer, uiviewanimation

我有一个 viewController 正在播放声音`AVAudioPlayer`，计时器正在运行 2 分钟，`NSTimer`并且正在播放一系列动画

```
 [UIView animateWithDuration:2.0
                          delay:0.0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{
                         //Rolling the Man's tongue out
                         _cooling2ManImage.alpha = 1.0;
                         _cooling3ManImage.alpha = 0.0;
                     }
                     completion:^(BOOL boolValue){
                         [UIView animateWithDuration:2.0
                                               delay:0.0
                                             options:UIViewAnimationOptionCurveLinear
                                          animations:^{
                                              //showing the Arrow image and translating the arrow to the mouth
                                              _cooling1ArrowImage.alpha = 1.0;
                                              _cooling1ArrowImage.transform = CGAffineTransformMakeTranslation(0,-110);
                                          }
                                          completion:^(BOOL boolValue){
                                              [UIView animateWithDuration:1.5
                                                                    delay:0.0
                                                                  options:UIViewAnimationOptionCurveLinear
                                                               animations:^{
                                                                   //Hiding the arrow
                                                                   _cooling1ArrowImage.alpha = 0.0;
                                                               }
                                                               completion:^(BOOL boolValue){
                                                                   _cooling1ArrowImage.transform = CGAffineTransformMakeTranslation(0,0);
                                                                   [UIView animateWithDuration:2.0
                                                                                         delay:0.0
                                                                                       options:UIViewAnimationOptionCurveLinear
                                                                                    animations:^{
                                                                                        //Roll the tongue back in
                                                                                        _cooling2ManImage.alpha = 0.0;
                                                                                        _cooling3ManImage.alpha = 1.0;
                                                                                    }
                                                                                    completion:^(BOOL boolValue){
                                                                                        //Show the arrow and translate it
                                                                                        [UIView animateWithDuration:2.0
                                                                                                              delay:0.0
                                                                                                            options:UIViewAnimationOptionCurveLinear
                                                                                                         animations:^{
                                                                                                             _cooling3ArrowImage.alpha = 1.0;
                                                                                                             CGAffineTransform scale;
                                                                                                             CGAffineTransform translate;
                                                                                                             scale = CGAffineTransformMakeScale(2.5, 2.5);
                                                                                                             translate = CGAffineTransformMakeTranslation(0, 40);
                                                                                                             _cooling3ArrowImage.transform = CGAffineTransformConcat(scale, translate);
                                                                                                             _cooling3ArrowImage.alpha = 0.0;
                                                                                                         }
                                                                                                         completion:^(BOOL boolValue){
                                                                                                             [UIView animateWithDuration:2.0
                                                                                                                                   delay:0.0
                                                                                                                                 options:UIViewAnimationOptionCurveLinear
                                                                                                                              animations:^{
                                                                                                                                  _cooling2ManImage.alpha = 0.0;
                                                                                                                                  _cooling3ManImage.alpha = 1.0;
                                                                                                                                  _cooling1ArrowImage.alpha = 0.0;
                                                                                                                                  _cooling3ArrowImage.alpha = 0.0;
                                                                                                                                  _cooling3ArrowImage.transform = CGAffineTransformMakeTranslation(0,0);
                                                                                                                                  _cooling3ArrowImage.transform = CGAffineTransformMakeScale(1,1);
                                                                                                                                  if (count <= 6 ) {
                                                                                                                                      [self startAnimation1];
                                                                                                                                      count += 1;
                                                                                                                                      NSLog(@"%i",count);
                                                                                                                                  }
                                                                                                                              }
                                                                                                                              completion:nil];
                                                                                                         }];
                                                                                    }];
                                                               }];
                                          }];
                     }]; 
```

我必须实现暂停和恢复功能，以便当用户点击“暂停”按钮时，音频、动画和计时器暂停，当用户点击恢复按钮时，它会从暂停的位置恢复。任何人都可以让我知道我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:05:02.043

供 AVAudioPlayer 使用

```
[avplayerObject pause];
[avplayerObject play];

for timer: 
```

您可以存储自计时器启动以来经过的时间量......当计时器启动时，将日期存储在 NSDate 变量中。然后当用户切换时……使用 NSDate 类中的方法 timeIntervalSinceNow 来存储经过了多少时间……注意这会给 timeIntervalSinceNow 一个负值。当用户返回时，使用该值设置适当的计时器。

查看动画[检查这个](https://stackoverflow.com/questions/3211065/how-to-pause-and-resume-uiview-animation)

# google-chrome - Chrome 开发工具：如何跟踪网络以找到打开新标签的链接？

> ID：16210468
> 
> 赞同：291
> 
> 时间：2013-04-25T08:56:15.567
> 
> 标签：google-chrome, google-chrome-devtools

我想跟踪单击链接时发生的网络活动。问题是该链接打开了一个新选项卡，显然开发工具适用于它打开的每个选项卡。“在导航时保留日志”没有帮助。

我目前的解决方案是转移到没有这个问题的 FireFox 和 HttpFox。我想知道 Chrome 的所有开发人员是如何管理的，这听起来很基本（当然我已经搜索过答案，没有发现任何有用的东西）。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2013-05-02T17:33:52.620

查看`chrome://net-internals/#events`（或`chrome://net-export`在最新版本的 Chrome 中）查看浏览器中发生的所有网络事件的详细概述。

* * *

根据您的具体问题，其他可能的解决方案可能是在“网络”选项卡上启用“保留日志”：

![开发工具 > 网络 > 保留日志](https://i.stack.imgur.com/rabex.png)

并通过在控制台中执行以下代码强制所有链接在同一选项卡中打开：

```
[].forEach.call(document.querySelectorAll('a'),
    function(link){
        if(link.attributes.target) {
            link.attributes.target.value = '_self';
        }
    });

window.open = function(url) {
    location.href = url;
}; 
```

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2016-03-07T19:29:44.360

phsource 评论中提到的[功能请求](https://bugs.chromium.org/p/chromium/issues/detail?id=410958)已经实现。

在最近的版本中（从 Chrome 50 开始），您可以转到“开发者工具设置”菜单（打开“开发者工具”，然后使用 3 点菜单或点击`F1`）并选中“自动打开 DevTools for popups”框。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2017-11-17T19:37:48.330

在 Chrome 61.0.3163.100 中，您现在可以使用以下选项。通过转到 Chrome 开发工具设置来访问它。它在底部。

![Web 检查器设置](https://i.stack.imgur.com/qCfsF.png)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2020-09-16T14:10:17.110

在 Chrome 85 中（在 Chrome 90 中仍然有效）“Auto-open DevTools for popups”隐藏在一个新位置

DevTools (F12)/Settings (F1, Ctrl + ?)/Preferences/Global（在列表末尾）

[![在此处输入图像描述](https://i.stack.imgur.com/NdKhX.png)](https://i.stack.imgur.com/NdKhX.png)

现在它保留了“保留日志”设置。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-02-01T23:13:49.977

你可以这样做：

1.  在想要的链接上设置 target="any_window_name"。
2.  单击该链接一次，以在新选项卡中打开它。
3.  在打开的选项卡中，打开开发人员工具。
4.  返回原始页面并再次点击该链接。

    结果将加载到已经准备好的窗口中，并打开开发者工具。

    您可以在开发工具中激活“保留日志”选项（参见 Konrad Dzwinel 的优秀答案）以捕获该链接上的任何重定向流量。

    **注意**：大多数人都熟悉链接目标 ∈ { _self,_blank,_parent,_top }。但实际上可以给出任何名称，这将打开一个具有该名称的新窗口，并且随后单击链接、表单或具有相同目标值的 window.open 将在同一窗口中打开。进一步阅读 - [mdn : window.open](https://developer.mozilla.org/en-US/docs/Web/API/Window.open) , [mdn : <a> 标签](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-04-27T16:18:54.477

*   添加/更新链接到`target="_self"`
*   在“网络”选项卡中选中“导航时保留日志”。
*   单击链接并记录您的请求

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-01T05:49:49.293

如果打开的链接没有重定向，您可以在新选项卡中打开网络选项卡，然后刷新选项卡。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-24T21:52:59.537

*** 免责声明：由 HttpWatch 开发者发布 ***

[Windows 上的HttpWatch](https://www.httpwatch.com)可以通过在 Tools->Options->Recording 中启用自动记录来记录打开新 Chrome 选项卡或窗口时产生的网络流量。在新窗口中单击 HttpWatch 图标以查看网络跟踪。

[免费版](https://www.httpwatch.com/download/)将提供每个请求的基本信息，例如 URL、状态代码和经过的时间。

*** 免责声明：由 HttpWatch 开发者发布 ***

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-29T12:44:36.997

`F12`新标签打开时快速点击

[https://stackoverflow.com/a/13747562/660408](https://stackoverflow.com/a/13747562/660408)

当我监控 Google Drive 下载响应时对我有用

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2020-08-04T18:47:08.790

我只是让新标签打开，按 F12 并刷新标签，以便它登录到 devtools 窗口

# java - Primefaces 对话框 - 未找到属性类的设置器

> ID：16210474
> 
> 赞同：3
> 
> 时间：2013-04-25T08:56:26.800
> 
> 标签：java, eclipse, jsf, primefaces, dialog

我想实现 Primefaces 3.5 [Dialog Component](http://www.primefaces.org/showcase/ui/dialog.jsf)。

我的实现：

```
<div class="span10">
        <div class="well well-large">

            <h:panelGrid columns="1" cellpadding="5">
                <p:commandButton id="modalDialogButton" value="Modal"
                    onclick="dlg2.show();" type="button" class="btn btn-primary"/>
            </h:panelGrid>

            <p:dialog id="modalDialog" header="Modal Dialog" widgetVar="dlg2"
                modal="true" height="100">
                <h:outputText value="This is a Modal Dialog." />
            </p:dialog>
.... 
```

当我启动服务器以查看我的页面时，我得到：

```
java.lang.IllegalArgumentException: Setter not found for property class
    at javax.faces.component.UIComponentBase$AttributesMap.put(UIComponentBase.java:2450)
    at javax.faces.component.UIComponentBase$AttributesMap.put(UIComponentBase.java:2330)
    at com.sun.faces.facelets.tag.jsf.ComponentRule$LiteralAttributeMetadata.applyMetadata(ComponentRule.java:87)
    at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
    at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:412)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:175)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:190)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:190)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:161)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:902)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:202)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:646)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
25.04.2013 10:51:53 com.sun.faces.context.ExceptionHandlerImpl log
1100: JSF1073: java.lang.IllegalArgumentException erfasst während Verarbeitung von RENDER_RESPONSE 6 : UIComponent-ClientId=, Message=Setter not found for property class
25.04.2013 10:51:53 com.sun.faces.context.ExceptionHandlerImpl log
1100: Setter not found for property class
java.lang.IllegalArgumentException: Setter not found for property class
    at javax.faces.component.UIComponentBase$AttributesMap.put(UIComponentBase.java:2450)
    at javax.faces.component.UIComponentBase$AttributesMap.put(UIComponentBase.java:2330)
    at com.sun.faces.facelets.tag.jsf.ComponentRule$LiteralAttributeMetadata.applyMetadata(ComponentRule.java:87)
    at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
    at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:412)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:175)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:190)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:190)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:161)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:902)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:202)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:646)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662) 
```

在我的 jsf 页面上，我得到：

> 未找到属性类的设置器

我很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:07:18.557

我懂了：

```
<p:commandButton id="modalDialogButton" value="Modal"
                    onclick="dlg2.show();" type="button" class="btn btn-primary"/> 
```

你必须使用`styleClass="btn btn-primary"`不`class="btn btn-primary"`

```
<p:commandButton id="modalDialogButton" value="Modal"
                        onclick="dlg2.show();" type="button" styleClass="btn btn-primary"/> 
```

# c++ - C++ 中未定义的行为断言：访问无效/空指针

> ID：16210482
> 
> 赞同：0
> 
> 时间：2013-04-25T08:56:51.163
> 
> 标签：c++, visual-studio-2010, assert

在 Visual C++ 2010 下，以下代码片段隐藏了一个可疑行为：

```
CObject* myObjectPtr = CObjectFactory::MakeAnObject();
assert( myObjectPtr->CanDoSomeWork() ); // myObjectPtr can be null due to logical errors 
```

下面的代码片段，当放在一个函数中时，当指针为 NULL 并且函数立即返回时，没有触发断言。除了额外的空指针检查任何人都可以建议的明显修复之外，是什么让代码以这种方式运行？即使错误发生在断言中，它通常不应该抱怨内存访问冲突错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:53:32.410

```
myObjectPtr->CanDoSomeWork() 
```

如果 CanDoSomeWork 不是虚函数，则编译器有效地将其重写为 C_Object::CanDoSomeWork(myObjectPtr)

这根本不涉及对象指针的任何取消引用，因此它不会崩溃或失败。如果它是一个虚函数，那么它可能会崩溃，因为它将使用指针来查找 vtable。

当然，标准中的任何内容都不能保证这一切，这都是未定义的行为，但是它解释了您所看到的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T08:58:36.503

```
assert( myObjectPtr->CanDoSomeWork() ); 
```

`myObjectPtr`如果为 NULL，将导致段错误（或 UB） 。因为`NULL->`* 是未定义的行为。
您应该首先检查是否`myObjectPtr`不是 NULL 指针。

```
assert (myObjectPtr != 0);
assert( myObjectPtr->CanDoSomeWork() .....);  // if you still need this (?) 
```

# nsurl - 如何在 Iphone SDK 中将 %20 转换为空格

> ID：16210483
> 
> 赞同：2
> 
> 时间：2013-04-25T08:56:53.090
> 
> 标签：nsurl

我正在开发应用程序，我大部分时间都在与网络服务进行交互。当我在将 url 转换为请求时将空间转换为 %20 的某处添加空间时，我遇到了问题。我用谷歌搜索，但根据我的要求找不到任何健康的解决方案，因为它只在请求 url 时发生变化。这就是我正在做的事情。

```
 url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
NSLog(@"Request is : %@", request);
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

并在`NSLog`上面显示 %20 给我的空间。如果有人知道请建议我更好的方法来解决这个问题。这对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:00:24.660

您实际上正在使用以下指令将空格转换为 %20 ：

`url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]`

但这对于获得正确的 是必要的`NSURLRequest`，因为某些字符需要这种转换。

您可以使用其他`NSString`方法将它们重新转换为“普通”字符：

[– stringByReplacingPercentEscapesUsingEncoding](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingPercentEscapesUsingEncoding:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-24T12:37:19.013

**从 URL 中删除 %20**

```
url = [strFileName stringByRemovingPercentEncoding]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:01:11.457

如果您不想要 %20 而不是空间，那么您为什么要使用`stringByAddingPercentEscapesUsingEncoding`？

`stringByAddingPercentEscapesUsingEncoding`- 将空间转换为 %20

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:11:55.453

在获得 Web 服务的响应后，我通过使用以下行解决了这个问题。

```
 responseString= [responseString stringByReplacingOccurrencesOfString:@"%20" withString:@" "]; 
```

现在我得到了正确的数据，但我认为这不是一个好的解决方案:)。感谢您回答帖子。

# heroku - 为什么上传的图片在 Heroku 上消失了？

> ID：16210486
> 
> 赞同：9
> 
> 时间：2013-04-25T08:57:02.853
> 
> 标签：heroku, image-upload

我昨天部署了我的第一个 Heroku 应用程序，一切都很好。

在我的应用程序中，您可以上传图像，我做到了并且可以在“显示”页面上看到它。然而，今天这张照片消失了。其他一切似乎都很好。该应用程序在我的本地机器以及 Heroku 上运行良好，除了不存在的图像。

可能是什么问题？我怎样才能确保它不会再次发生？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-25T09:05:33.103

Heroku 不支持文件上传。文件系统是只读的。您必须将上传的文件托管在其他地方（或来自数据库，这是一个不好的选择）。

[https://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

Amazon S3 是一个常见的选择：[http ://devcenter.heroku.com/articles/s3](http://devcenter.heroku.com/articles/s3)

如果您使用回形针或载波等任何 gem 进行上传，则使用 S3 将很简单。您必须在配置文件中设置 S3 凭据，gem 将负责上传并为上传的文件提供 url。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T09:05:20.240

我怀疑您可能已将图像上传到 Heroku 文件系统，而不是像 Amazon S3 这样的外部文件存储。Heroku 文件系统是临时的，不会在 dynos 或重启之间共享——Heroku 每天都会这样做。我怀疑这就是这里发生的事情，导致你失去了你的形象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-30T02:41:54.767

Heroku 是文件系统是临时的。或者，您可以将图像保存为 url，直到您准备好使用 aws...

# ejb-3.0 - 为Jboss 7.1编写桌面客户端的步骤是什么

> ID：16210489
> 
> 赞同：1
> 
> 时间：2013-04-25T08:57:11.193
> 
> 标签：ejb-3.0, jboss7.x, java-ee-5

我最近为 Glassfish 3.2 创建了独立客户端，现在我希望将我的应用程序部署在 JBoss 上。我对答案很感兴趣，它将指导我构建独立的应用程序，该应用程序将与我的 EJB 3 应用程序交互，该应用程序将部署在 JBoss 7.1 上

我的另一个子问题是：哪个应该是创建独立客户端的首选：EJB 3.0 还是 WebServices？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:23:25.303

在我看来，你在这里混合了一些东西。

首先，“独立客户端”是什么意思？如果你在应用服务器上部署一些东西，那么这不是独立的，而是一个可供客户端使用的服务器软件。

接下来，您的业务代码的客户端（例如在 EJB 中实现）当然可以是另一个本地或远程 EJB，但这又是一些使用您的功能的服务器软件。如果您希望从外部使用它，那么您必须提供对它的访问权限，例如以 Web 服务的形式。

最后，您谈到“JBoss 7.1”和“Glassfish 3.2”以及最近创建的应用程序 - 然后立即停止使用 EJB3.0 和 JEE5，并使用当前的 JEE6 和 EJB3.1 及其所有相关技术. 例如，包含的 REST API 可能是实现客户端的不错选择。然后，此客户端可以是“桌面应用程序”（例如本机 Java 应用程序或 JavaFX 应用程序），它利用您通过 REST 服务公开的业务逻辑。

# web-services - 从 Web 服务获取的实体：如何集成到 DDD 模型中？

> ID：16210504
> 
> 赞同：0
> 
> 时间：2013-04-25T08:57:53.927
> 
> 标签：web-services, service, domain-driven-design, entity, soa

我有一个带有复杂模型的“流程”应用程序（此处简化）。该应用程序具有这样的网络服务：

```
Webservice             | Application behind webservice
------------------------------------------------------
ProcessDTO             | Process
    .getLabel()        |     .getLabel()
                       |     .getSubComponents()
                       |     .execute(input) // calls ProcessComponent.execute
                       | ProcessComponent
                       |     .execute(input)
ProcessService         | ProcessRepository
    .findProcess(id)   |     .findProcess(id)
    .executeProcess(..)| 
```

问题是：**如何`Process`使用此 Web 服务将实体集成到应用程序中？**

* * *

我正在考虑创建一个`Process`实体，而不是直接将 DTO 用作实体。

例如，在另一个应用程序中，我有`Module`一个`Process`.

我可以连接到我的 ORM 中，所以“关联”部分不是问题。问题是**如何`Module`执行流程？**

*   通过调用`ProcessService`: 这很难看，因为我最终会得到一个不提供任何域逻辑的贫血进程实体。此外，这将使`Module`实体使用服务，这不太好，对吧？

*   通过添加一个`execute()`方法`Process`？但是实体方法也调用了一个不好的服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:08:11.613

在 DDD 中，外部 Web 服务应该由[反腐败层](http://c2.com/cgi/wiki?AnticorruptionLayer)(ACL) 封装。在 ACL 中，Web 服务的 DTO 契约应该映射到本地定义的值对象。

至于调用外部服务，这应该由托管相应用例的[应用程序服务来完成，而不是由您观察到的实体来完成。](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)

# c# - 如何克服异常“SAP.Middleware.Connector.RfcConfigParameters 的类型初始化程序引发异常 - 错误#：-2146233036”

> ID：16210505
> 
> 赞同：3
> 
> 时间：2013-04-25T08:57:54.710
> 
> 标签：c#, sap-dotnet-connector

我们的应用程序通过 DCOM SAP 连接器从 SAP 系统中获取数据。最近我们用 .NET 连接器替换了。部署到生产环境后，它工作了一天。突然它在访问一个 RFC 时给出了指定的错误。异常消息是

> “SAP.Middleware.Connector.RfcConfigParameters”的类型初始化程序引发异常 - 错误#:-2146233036。

我们使用的代码为 SAP.Middleware.Connector.RfcConfigParameters 创建对象并使用如下

```
string Value1 ="Val1";
string Value1 ="Val2";
string Value1 ="Val3";
string Value1 ="Val4";
string Value1 ="Val5";
string Value1 ="Val6";
string Value1 ="Val7";

RfcConfigParameters parms = new RfcConfigParameters();

parms.Add(RfcConfigParameters.Param1, Value1);
parms.Add(RfcConfigParameters.Param2, Value2);
parms.Add(RfcConfigParameters.Param3, Value3);
parms.Add(RfcConfigParameters.Param4, Value4);
parms.Add(RfcConfigParameters.Param5, Value5);
parms.Add(RfcConfigParameters.Param6, Value6);
parms.Add(RfcConfigParameters.Param7, Value7);

SapRfcDestination = RfcDestinationManager.GetDestination(parms);
RfcCustomDestination customDest = SapRfcDestination.CreateCustomDestination();
IRfcFunction func = customDest.Repository.CreateFunction("RFC_FUNCTION");

func.SetValue("DATA1", "VAL1")
func.SetValue("DATA2", "VAL2")
func.SetValue("DATA3", "VAL3")

RfcStructureMetadata metaData = customDest.Repository.GetStructureMetadata("STRUCTURENAME");
IRfcTable rfcTable = func.GetTable("TABLENAME"); 
```

我们已经追踪到异常信息，下面是异常信息

```
System.TypeInitializationException: The type initializer for '<Module>' threw an exception. ---> <CrtImplementationDetails>.ModuleLoadException: The C++ module failed to load.
 ---> System.IO.FileLoadException: Could not load file or assembly 'msvcm80, Version=8.0.50727.6195, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))
File name: 'msvcm80, Version=8.0.50727.6195, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' ---> System.Runtime.InteropServices.COMException (0x8000FFFF): Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))
   at <CrtImplementationDetails>.DoDllLanguageSupportValidation()
   at <CrtImplementationDetails>.LanguageSupport._Initialize(LanguageSupport* )
   at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* )

   --- End of inner exception stack trace ---
   at <CrtImplementationDetails>.ThrowModuleLoadException(String errorMessage, Exception innerException)
   at <CrtImplementationDetails>.ThrowModuleLoadException(String , Exception )
   at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* )
   at .cctor()
   --- End of inner exception stack trace ---
   at SAP.Middleware.Connector.RfcConfigParameters..cctor()- Stack trace:   at SAP.Middleware.Connector.RfcConfigParameters..ctor() 
```

以下是我们的观察结果
1\. 它并不总是抛出问题。问题是间歇性抛出。
2.当我们去服务器机器并在那里运行应用程序时，它没有抛出错误。仅当应用程序从其他客户端机器访问时才会引发错误。
3\. 相同的问题在开发、测试和舞台环境中不可重现。仅在生产中就有问题 4\. 如果我们重新部署特定的 dll，它将开始工作一天或半天而没有任何错误，第二天开始抛出错误。

我的具体问题是（1）如何克服“SAP.Middleware.Connector.RfcConfigParameters 的类型初始化程序”引发异常 - Error#:-2146233036 的异常？
(2) 我们的主要怀疑领域是内存泄漏。我们可以怀疑任何其他领域吗？
（3）我们非常有限，无法访问生产环境。因此，我们正试图在我们拥有完全访问权限的其他服务器（如开发和测试）中重现该问题。我们正在考虑多用户和多登录场景，以便在其他环境中重现该问题。我们可以考虑任何其他情况吗？

**更新**
我们设法在我们的一台测试服务器中重现了该问题。并尝试了以下方法来解决问题。并安装了 Visual C++ 2005 Redistributable SP1、.NET connector 3.0 和 VB6.0。问题仍然存在。我们无法找到问题的根本原因。

为了找到问题的根本原因，我还可以检查和执行哪些操作？

**根据回复进行编辑：**
1\. 我们没有使用任何静态变量 2\. 我们已经安装了 Visual C++ 2005 Redistributable SP1。但它仍然没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T09:19:52.450

经过大量分析和深入研究，我们找到了解决此问题的方法。

我们正在使用 SAP 3.0.4。当我们检查 3.0.9 的最新 SAP 连接器发行说明时，如下所述。

> 改进：destination 配置异常 当没有指定所需的配置参数（例如 SYSID）时，尝试通过负载平衡连接时，抛出了一个非常低级别的异常，在该异常中无法立即清楚为什么无法建立连接。现在，有早期检查，如果出现配置问题，描述性 RfcConfigurationException 会详细告知配置问题。

请在下面找到 SAP 连接器 3.0.8 的摘录

> 发行说明 3.0.8 * 修正：目标配置 通过修改目标的配置来更改目标的跟踪级别对该目标的属性 TraceLevel 没有影响，即使在触发配置更新事件时也是如此。

因此，我们安装了最新的 SAP 连接器 3.0.10 并使用最新的 SAP 连接器 dll（sapnco.dll 和 sapnco_utils.dll）重建 dll。随着这些最新的 dll 问题得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T17:05:15.400

[该线程](https://scn.sap.com/thread/2129866)建议安装 Visual C++ 2005 Redistributable SP1 包解决了它。（由于 sapnco_utils.dll 中的依赖关系）

# c# - 如何绑定 DataTemplate 中的 TextBlock 的值？

> ID：16210506
> 
> 赞同：0
> 
> 时间：2013-04-25T08:57:56.150
> 
> 标签：c#, xaml, data-binding, windows-phone-8

嗨，我想绑定 DataTemplate 内的 textBlock 的值，TextBlock 的 text 属性将根据文件/文件夹列表更改运行时。我写了下面的代码，但字符串为空。我的工作环境是带有 Visual Studio 2012 的 Windows Phone 8。

```
<Grid x:Name="ContentPanel">
<phone:LongListSelector>    
    <phone:LongListSelector.ListFooterTemplate >
        <DataTemplate >
            <TextBlock  Name="tbfooter" Text="{Binding FooterText, Mode=OneWay}" />
        </DataTemplate>
    </phone:LongListSelector.ListFooterTemplate>
</phone:LongListSelector> 
```

此 textBlock name= tbfooter 必须使用 Footertext 值更新运行时。

现在在我后面的代码中，我已经定义了这个属性，比如

```
private int _footerText;
public int FooterText
{
   get
   {
      return this._footerText;
   }
   set
   {
      this._footerText=value
      NotifyPropertyChanged("FooterText");
   }
} 
```

但是 textBlock tbfooter 的值为 null，它没有显示任何内容，它只是 null。有人可以帮帮我吗？

编辑：我在这里再次更新了 XAML 代码。我在这里不关注 MVVM，它是简单的 windows phone 应用程序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:07:42.707

看起来在您的属性设置器中，您需要在通知其更改之前设置值，请尝试这样的事情

```
private int _footerText;
public int FooterText
{
   get
   {
      return this._footerText;
   }
   set
   {  
      this._footerText = value;
      NotifyPropertyChanged("FooterText");
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:14:29.147

使用的时候`DataTemplate`是`DataContext`当前`DataTemplate`选中的Item。如果要将 a 绑定`LongListSelector`到类型 T 的列表，则可以通过绑定此类型 T 来访问属性。

您想绑定到不是当前 DataContext 的 Viewmodel 的属性。因此，您的结果为空。

试试这个代码

```
<Grid x:Name="ContentPanel">
<phone:LongListSelector>    
    <phone:LongListSelector.ListFooterTemplate >
        <DataTemplate >
            <TextBlock Name="tbfooter"
                    DataContext="{Binding Path=DataContext,RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Text="{Binding FooterText, Mode=OneWay}" />
        </DataTemplate>
    </phone:LongListSelector.ListFooterTemplate>
</phone:LongListSelector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T13:06:01.950

正如 inxs 所提到的，你`TextBlock`是空的，因为它没有绑定到正确的属性。看看[这个答案](https://stackoverflow.com/a/16286996/2332193)，它说明了如何绑定到`DataContext`代码隐藏中的属性和属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:05:00.067

```
private int _footerText;
public int FooterText
{
   get
   {
      return this._footerText;
   }
   set
   {
      this._footerText=value;  //  <<-----------You might miss this!
      NotifyPropertyChanged("FooterText");
   }
} 
```

# sml - 计算排序列表中有多少元素大于给定谓词

> ID：16210508
> 
> 赞同：2
> 
> 时间：2013-04-25T08:58:03.447
> 
> 标签：sml

`2`我正在尝试创建一个函数，该函数在给定的排序列表中查找比第一个元素大的元素数。例如，给定一个列表`[3,3,4,5,6,7,8,9,11]`，第一个元素是`3`，较大的数字除以`2`函数`7,8,9,11`返回`4`。

到目前为止，我已经这样做了，但它不起作用。该`a`元素是列表的第一个元素，并且为了更容易而给出。

```
fun findlarger a [] =
  | findlarger [] = 0
  | findlarger [x] = 0
  | findlarger (x::xs) =
    let
      val a = ref a;
    in
      if !a < x/2 then length (xs) + 1 else findlarger (a, xs)
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:07:33.757

我什至不知道从哪里开始指出您的代码存在的问题。您似乎误解了函数式编程的基础知识。

*   首先，您不应该使用引用（除非您知道自己在做什么，否则它可能仍然是错误的），您应该使用递归。
*   您还没有声明您的函数采用相同数量的参数。在第一个子句中，您使用 2 个 curried 参数定义了它，在其余子句中您只有一个参数，在代码的倒数第二行中，您使用一对作为参数调用函数。
*   您的第一个函数子句没有正文。
*   `"<"`不是 sml 中的严格小于运算符。正如你在那里写的，它是一个字符串。

修复您的原始代码将导致类似这样的结果。请注意，第一个元素总是放回列表中，这样我们就知道要比较什么。

```
fun findlarger [] = 0
  | findlarger [x] = 0
  | findlarger (x::y::xs) =
    if y > x*2 then
      1 + findlarger(x :: xs)
    else
      findlarger(x :: xs) 
```

但是，您也可以使用内部辅助函数完成 x*2 的计算，这样就不会每次都计算

```
fun findlarger [] = 0
  | findlarger (x::xs) =
    let
      val xx = 2*x
      fun f [] = 0
        | f (y::ys) =
          (if y > xx then 1 else 0) + f ys
    in
      f xs
    end 
```

如果使用另一个答案中建议的高阶函数，那么您应该避免遍历列表两次（首先过滤掉元素，然后计算剩余的元素）。您应该只浏览一次列表，并计算与给定谓词匹配的元素。
要完成此功能，您可以使用其中一种折叠功能。在大多数情况下，使用 foldl 是有意义的，因为它将以尾递归的方式从左到右遍历列表。

```
fun p (x, y) = if y > 2*x then 1 else 0

fun f [] = 0
  | f (x::xs) = foldl (fn (a,b) => b + p(x, a)) 0 xs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:02:52.793

试试这个解决方案：

```
fun find lst =
    case lst of
        [] => 0
      | x::_ => List.length(List.filter(fn e => e > 2 * x) lst) 
```

用法：

```
find [3,3,4,5,6,7,8,9,11] => 4 
```

# c# - ASP.NET IDENTITIES 在我发布时打开

> ID：16210513
> 
> 赞同：0
> 
> 时间：2013-04-25T08:58:12.047
> 
> 标签：c#, asp.net-mvc, iis, asp.net-mvc-4

当我在我的服务器上发布我的 MVC4 C# 网站时，IIS 身份验证“获取 ASP.Net 的身份”会自动打开。

我该怎么做才能让此身份验证“关闭”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:09:23.680

它正在使用 WebConfig 中的代码：

```
<authentication mode="Windows" />
    <identity impersonate="false" />
<authorization>
    <deny users="?" />
</authorization> 
```

# powershell - 在 powershell 中解压

> ID：16210514
> 
> 赞同：0
> 
> 时间：2013-04-25T08:58:12.530
> 
> 标签：powershell, jar

我对使用 powershell 很陌生并且遇到了问题。

我想使用脚本解压 .war 文件并使用以下代码：

```
jar -xf myjarfile.war 
```

但我收到如下错误：

```
jar : java.io.IOException: META-INF : could not create directory. 
```

如果我在 powershell 命令窗口中执行相同的操作，它可以正常工作，但在脚本中运行时则不行。

有谁知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:53:40.913

案件结案，感谢杰基让我走上正轨。

在 PowerGUI 脚本编辑器中运行脚本时出现错误。

在命令 shell 中运行脚本时它工作正常，我不需要通过 PGUISE 运行它。

# css - 将 CSS 应用于 a 中的元素

> ID：16210517
> 
> 赞同：1
> 
> 时间：2013-04-25T08:58:15.957
> 
> 标签：css, css-float

我有以下 HTML 代码，

```
<div class="part">
    <div class="pleft">
        <img src="images/1.jpg">
        <b>Image 1</b>
    </div>
    <div class="pright">
        <img src="images/2.jpg">
        <b>Image 2</b>
    </div>
</div> 
```

如何为*pleft*和*pright*下的图像和 b 元素应用 CSS 样式。

现在我正在按照以下方式进行操作，

```
<div class="part">
    <div class="pleft">
        <img class="pl1" src="images/1.jpg">
        <b class="pl2">Image 1</b>
    </div>
    <div class="pright">
        <img class="pr1" src="images/2.jpg">
        <b class="pr2">Image 2</b>
    </div>
</div> 
```

我想知道是否有任何捷径可以做到这一点。div *pright*和*pleft*运行时间很长，我不想为它们中的每一个定义一个新类。

感谢你的帮助。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:01:09.740

```
.pleft img, .pright img {

   //your CSS for image
}

.pleft b, .pright b {

   //your CSS for b element
} 
```

使用它，您无需添加任何其他类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:06:51.077

你的 CSS 看起来像这样

```
.pleft {//your css}
.pleft img {//your css}
.pleft b {//your css}

.pright{//your css}
.pright img{//your css}
.pright b{//your css} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:10:08.850

我的 CSS 不是最强的，但是，我假设您在问如何定义 pleft 和 pleft 而不必重新定义两次。

所以这就是我将如何做到的。

```
.pleft,.pright{ ADD ALL COMMON CSS HERE}
.pleft{ Difference }
.pright{ Difference } 
```

您可以将其应用于子元素

```
.pleft .pr1,.pright .pr1{ADD ALL COMMON CSS HERE}
.pleft .pr1{ Difference }
.pright .pr1{ Difference } 
```

或者你可以做类似的事情

```
.pleft img,.pright img{ADD ALL COMMON CSS HERE}
.pleft img{ Difference }
.pright img{ Difference } 
```

希望这可以帮助

# javascript - 用于循环阻塞其余代码的 Javascript

> ID：16210518
> 
> 赞同：0
> 
> 时间：2013-04-25T08:58:16.697
> 
> 标签：javascript, jquery, json, for-loop, jquery-get

我在编写一些 Javascript 时遇到了一些麻烦。代码的目的如下：

1.  从提供的 .TXT 文件中读取 SKU 列表
2.  在每一行拆分数据
3.  对于每个对象，在提供的 JSON api 上进行查找以获取有关 SKU 的信息
4.  将此信息输出到 HTML 表中。

目前，我可以按预期工作，但是，它似乎不会阻止我尝试在`for`循环后运行的任何其他 Javascript。

这是我的代码示例

```
<script type="text/javascript">

//Set API Address

var api = "/api/AthenaService.svc/GetProductBySku/";

//Get Array of SKUs from TXT file

$.get('/Views/Locale/promoPages/LandingPages/TradeList/TradeList.txt',function(data){

//Split File into lines
var line = data.split('\n');

for(i=0;i<line.length;i++)
{

$.getJSON(api + line[i] , function(data1) {
    // Request complete, NOW we can use the data we got!
    $('.tListBody').append('<tr><td>' + data1.Title + '</td><td align="center">' + data1.Platform.Button + '</td></tr>'); 
    });

};
});

$(document).ready(function() {
$('#searchLoading').fadeOut('slow');
$('#showForm').fadeIn('slow');

$('input#tradeSearch').blur(function() {
$('input#tradeSearch').quicksearch('table#Searchable tbody tr');
});

});
</script> 
```

我遇到的问题是，document ready 中的所有内容似乎都不起作用。

我已经更新了上面的代码以反映下面的建议修复。似乎代码运行良好，但是我的快速搜索 jQuery 插件似乎没有触发。我想知道这是否与它应该搜索的 TR 元素是新创建的 DOM 元素有关？

任何帮助将不胜感激。

**更新：**

问题已经解决了！稍微阅读一下 Quicksearch.js 插件的文档，我发现可以在我的循环中手动将条目添加到快速搜索缓存中。这解决了这个问题。

下面更新了代码；

```
$(document).ready(function () {

    var api = "/api/AthenaService.svc/GetProductBySku/";

    //Get Array of SKUs from TXT file

    $.get('/Views/Locale/promoPages/LandingPages/TradeList/TradeList.txt', function (data) {

        //Split File into lines
        var line = data.split('\n');

        var qs = $('input#tradeSearch').quicksearch('.TheList tbody tr');

        for (i = 0; i < line.length; i++) {

            $.getJSON(api + line[i], function (data1) {
                // Request complete, NOW we can use the data we got!
                $('.tListBody').append('<tr><td>' + data1.Title + '</td><td align="center">' + data1.Platform.Button + '</td></tr>');
                qs.cache();

            });

        };

    });

}); 
```

感谢大家的帮助和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:25:55.170

我知道有什么问题。您正在 for 循环中进行 ajax 调用，并且您期望 for 循环等到 ajax 完成。正确的？？

```
for(i=0;i<line.length;i++)
{

$.getJSON(api + line[i] , function(data1) {
    // Request complete, NOW we can use the data we got!
    $('.tListBody').append('<tr><td>' + data1.Title + '</td><td align="center">' + data1.Platform.Button + '</td></tr>'); 
    });

}; 
```

ajax 调用是异步的。所以`$.getJSON(`将调用服务器，并且不会在 for 循环中等待它完成。一旦它进行 ajax 调用，它将循环通过 for 循环。这会给你带来好像 `for loop not blocking the code next to it.`......但实际上`for loop is completing`更快的效果，只需发出 ajax 请求，然后执行下一个代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:04:42.850

检查控制台中的错误，如果出现问题，它将暂停脚本，阻止后面的代码运行。

此外，您似乎在那里发出了很多 HTTP 请求（文件中的每行一个），这可能很慢。

在准备好之前将内容附加到 DOM 也会给您带来问题。我会将所有代码移到`$(document).ready(function() { });`

# ios - 如何使用 UITabbarsystemitem 设置标题

> ID：16210522
> 
> 赞同：7
> 
> 时间：2013-04-25T08:58:27.160
> 
> 标签：ios, objective-c, uitabbaritem

我只是想知道如何设置标签栏项目的标题`UITabBarSystemItem`？

我做了什么 ：

> `self.tabBarItem = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemFeatured tag:0];`

因此，要默认更改标题而不是“精选”（因为`UITabBarSystemItemFeatured`对象），我写道：

> `self.tabBarItem.title = @"Actu";`

所以在我看来，我应该将“Actu”作为标题而不是“Featured”。

但它什么也没改变，标题一直是“精选”（默认标题）。

我也试过：

> `[[self.tabBarController.tabBar.items objectAtIndex:0] setTitle:NSLocalizedString(@"Actu", @"Actu")];`

（因为这个 tabbaritem 在索引 0 处），但没有任何变化。

`UITabBarSystemItem`或者也许使用对象不可能进行这样的修改？

我希望这已经足够解释了：/

PS：对不起我的英语和其他任何错误，第一次发帖……：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:10:32.720

使用 a`UITabBarItem`初始化时，`initWithTabBarSystemItem:tag:`您以后无法更改图像或标题属性。

来源：[iOS 开发文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UITabBarItem/initWithTabBarSystemItem%3atag%3a)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-02T07:08:16.753

您可以使用 KVC。

`[self.tabBarItem.setValue("YourTitle", forKey: "internalTitle")];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:06:28.413

你已经写过：

> ......这样的修改是不可能使用`UITabBarSystemItem`对象......</p>

那些`title`和`image`属性设置为`nil`，因此它们将这些值存储在一些内部私有属性中。

文档还说：

> `-initWithTabBarSystemItem:tag:`
> 返回项目的标题和图像属性以后无法更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-13T08:26:49.863

实际上有可能，您可以使用`_setInternalTitle:`私有[API 中的方法。](https://github.com/JaviSoto/iOS10-Runtime-Headers/blob/master/Frameworks/UIKit.framework/UITabBarItem.h)

```
[self.tabBarItem setValue:@"Categories" forKey:@"internalTitle"]; 
```

注意：仅用于测试构建。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-04-13T18:00:57.710

我意识到这已经过时了，但也许这会帮助其他想要这样做的人。如上所示，从系统项创建一个 tabBarItem。然后创建另一个 tabBarItem，就好像您有一个自定义图标并从系统项中复制图像一样。

```
 UITabBarItem* systemItem = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemFeatured tag:0];
        UITabBarItem* theItem = [[UITabBarItem alloc] initWithTitle:theNameIWantToUse image:systemItem.image tag:0]; 
```

# java - Fetch not repeated rows in hibernate

> ID：16210525
> 
> 赞同：2
> 
> 时间：2013-04-25T08:58:36.890
> 
> 标签：java, sql, hibernate, fetch

I would like to fetch a list from a query in Hibernate but without repeated elements.

Currently i have something like:

```
SELECT t FROM Table t join fetch t.list tl WHERE tl.userid=:userid AND tl.tableid=t.id 
```

This works good! the problem its that it returns the same object as many times as userid its in tl

so lets say userid its found 3 times in tl i am getting:

```
T
  TL1
  TL2
  TL3
T
  TL1
  TL2
  TL3
T
  TL1
  TL2
  TL3 
```

and i want to get:

```
T
  TL1
T
  TL2
T
  TL3 
```

or just one:

```
T
  TL1
  TL2
  TL3 
```

I guess its possible in Hibernate but havent manage it yet.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:00:14.380

Do write

```
SELECT  distinct t FROM Table t join fetch t .......
      -----^------ 
```

[HQL ORDER BY clause and DISTINCT clause](http://thecafetechno.com/tutorials/hibernate/hql-order-by-and-distinct-column-example/) will be helpful further.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:02:28.157

Why you don't use then [DISTINCT](http://www.w3schools.com/sql/sql_distinct.asp)

```
 SELECT DISTINCT t FROM Table t join fetch t.list tl WHERE tl.userid=:userid 
AND tl.tableid=t.id 
```

It will give you result without the repeated values

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:21:24.457

you could also try using Criteria.DISTINCT_ROOT_ENTITY

# java - 搜索文本文件中包含的文本并将它们从java中的另一个文本文件中删除

> ID：16210526
> 
> 赞同：1
> 
> 时间：2013-04-25T08:58:36.807
> 
> 标签：java

我有一个从 java 程序输出的文本文件，它查找多个文档中提到的人名的频率，并将它们写入文件（peopleNames.txt），如下所示：

```
article1location\article1 name1:countofname1# name2:countofname2# name3:countofname3# ...
article2location\article2 name1:countofname1# name2:countofname2# name3:countofname3# ...
article3location\article3 name1:countofname1# name2:countofname2# name3:countofname3# ... 
```

这些名称对应于每篇文章中确定的人名以及他们在文章中出现的频率，大约有 90,000 篇文章。我有另一个文本文件（titles.lst），其中包含大约 40 个不同的头衔及其缩写（如先生、夫人、总统、先生等）的列表。我想在文件中使用此列表来搜索并从 peopleNames.txt 中删除这些标题。我不知道如何在 java 中处理它，因为我是 java 新手，需要修改 java 中生成 peopleNames.txt 的原始代码以适应标题删除。

我的程序将像 John Smith 先生这样的人识别为与 John Smith 不同的人，因此删除标题可以让我更准确地计算文章中提到的姓名。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:06:13.680

您可以使用正则表达式删除所有实例： public class Test {

```
 public static void main( String[] args ) throws Exception {
        String s = "Mr Tom and Ms Jane";
        s = s.replaceAll("\\bMr\\b|\\bMs\\b", "");
        System.out.println(s);
    } 
```

为了解释评论：

```
 public static void main( String[] args ) throws Exception {
        String [] titles = args;
        String regex = "\\b"+titles[0]+"\\b";
        for (int i=1; i<titles.length; i++) {
            regex += "|\\b" + titles[i] + "\\b";
        }

        String s = "Mr Tom and Ms Jane";
        s = s.replaceAll(regex, "");
        System.out.println(s);
    } 
```

您还可以重复使用替换选项，而不是构建正则表达式。我实际上不知道哪个更快。我会冒险猜测它取决于java实现。

```
 public static void main( String[] args ) throws Exception {
        String [] titles = args;
        String s = "Mr Tom and Ms Jane";
        for (int i=1; i<titles.length; i++) {
            s = s.replaceAll("\\b"+titles[0]+"\\b", "");
        }
        System.out.println(s);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:08:30.367

这就是我要做
的： 1\. 解析titles.lst 文档并将每个标题放入一个集合
2\. 解析peopleNames.txt，并为每一行检查名称是否在标题的集合中
3\. 如果是，删除它.
4\. 检查重复输入，因为 John Smith 先生和 John Smith 现在将是相同的。

# java - 从数据库 org.hibernate.hql.ast.QuerySyntaxException 检索数据时出现异常：

> ID：16210535
> 
> 赞同：0
> 
> 时间：2013-04-25T08:58:59.183
> 
> 标签：java, hibernate, jpa, ejb-3.0

我是 JPA 的新手，我正在尝试创建 EJB 3.0 + JPA（休眠）应用程序。当我将数据持久化到数据库中时，出现异常。

**sessionBean 方法：**

```
 @PersistenceContext
    private EntityManager em;
    public void showCustDetails(){
        //System.out.println(em.getProperties());
        //EntityManager em = emf.createEntityManager();
        List customer = em.createQuery("select c from CUSTOMER c").getResultList();
        System.out.println("List Size:::"+ customer.size());
        for(Object c:customer){
            Customer customers = (Customer) c;
            System.out.println("Name ::::" + customers.getName() + "::customer id ::"+customers.getCustomer_id()+"::email::"+customers.getEmail_id()+"::address::"+customers.getAddress()+
                    ":::ph number::"+customers.getPhNumber());
        }

} 
```

**客户类（实体类）**

```
package retail.model.vo;

import java.io.Serializable;

import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionManagement;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

import static javax.ejb.TransactionManagementType.BEAN;
@Entity
@Table(name = "CUSTOMER")
//@TransactionAttribute(value=REQUIRED)

public class Customer  implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 5256938732963606407L;
    private int customer_id;
    private String name;
    private String address;
    private String email_id;
    private int phNumber;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "customer_id")
    public int getCustomer_id() {
        return customer_id;
    }

    public void setCustomer_id(int customer_id) {
        this.customer_id = customer_id;
    }

    @Column(name = "Name")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(name = "addres")
    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    @Column(name = "email_add")
    public String getEmail_id() {
        return email_id;
    }

    public void setEmail_id(String email_id) {
        this.email_id = email_id;
    }

    @Column(name = "ph_number")
    public int getPhNumber() {
        return phNumber;
    }

    public void setPhNumber(int phNumber) {
        this.phNumber = phNumber;
    }

     public String validate(){
          if(name!=null && name!=""){
          System.out.println("chandan");
          return "viewCustomerDetails";
          }
          else{
          return "viewCustomerDetails";
          }
          }
} 
```

**持久性.xml**

```
 <persistence-unit name="RetailUnit" >
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <!-- the JNDI data source-->
        <jta-data-source>java/customer</jta-data-source>
        <properties> 
            <!-- if this is true, hibernate will print (to stdout) the SQL it executes, 
                so you can check it to ensure it's not doing anything crazy
                 <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.ClientDriver"/>
                 <property name="hibernate.connection.url" value="jdbc:derby://localhost:1527/company;create=true" />
              <property name="hibernate.connection.username" value="user" />
              <property name="hibernate.connection.password" value="123" /> -->
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <!-- since most database servers have slightly different versions of the 
                SQL, Hibernate needs you to choose a dialect so it knows the subtleties of 
                talking to that server -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" />
            <property name="hibernate.archive.autodetection" value="class"/>
            <!-- this tell Hibernate to update the DDL when it starts, very useful 
                for development, dangerous in production -->
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>
    </persistence-unit>
</persistence> 
```

**例外**

```
Caused by: java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: CUSTOMER is not mapped [select c from CUSTOMER c]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1376)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1317)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:280)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.createQuery(EntityManagerWrapper.java:436)
    at retail.ejb.service.CustomerSessionBeanImpl.showCustDetails(CustomerSessionBeanImpl.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
    ... 51 more 
```

请任何人对此提出建议。

**编辑输出**

```
INFO: Name ::::sdsdfsd::customer id ::0::email::sdsdfdsdssfd::address::sdfsdsdsdsdf:::ph number::0
INFO: Hibernate: 
    insert 
    into
        CUSTOMER
        (customer_id, addres, email_add, Name, ph_number) 
    values
        (default, ?, ?, ?, ?)
INFO: Hibernate: 

values
    identity_val_local()

INFO: Hibernate: 
    select
        customer0_.customer_id as customer1_0_,
        customer0_.addres as addres0_,
        customer0_.email_add as email3_0_,
        customer0_.Name as Name0_,
        customer0_.ph_number as ph5_0_ 
    from
        CUSTOMER customer0_
INFO: List Size:::1
INFO: Name ::::sdsdfsd::customer id ::1::email::sdsdfdsdssfd::address::sdfsdsdsdsdf:::ph number::0 
```

![在此处输入图像描述](https://i.stack.imgur.com/JUpkz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:02:18.010

实体的名称必须完全按照类名的定义拼写，独立于表映射，在您的情况下是`Customer`.

准确地说，`String`对应于输出`myEntity.getClass().getSimpleName();`

编辑：JPQL！= SQL

通常情况下，使用 SQL 编辑器使用相同的 JPQL 查询不会得到相同的结果（如果有的话），反之亦然。SQL 使用表标识符，而 JPQL 使用实体，对应于类。

# c# - 客户端日期时间与服务器日期时间

> ID：16210538
> 
> 赞同：1
> 
> 时间：2013-04-25T08:59:10.230
> 
> 标签：c#, asp.net-mvc

我有一个 C# Web 应用程序，它已安装在美国服务器中，数据库位于另一台服务器中。我正在从印度访问我的申请。现在，当用户注册时，他从默认选择当前系统日期时间的日历控件中选择报告日期，并从后台 C# 代码插入用户创建日期。由于我在本地国家浏览器中使用该应用程序，这就是两个日期不同的原因。有没有办法解决这个冲突。

```
obUser.CreationDate = Datetime.Now 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:04:10.787

而不是`DateTime.Now`使用：`DateTime.UtcNow`. UtcNow 根据[MSDN](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)：

> 获取一个 DateTime 对象，该对象设置为此计算机上的当前日期和时间，表示为协调世界时 (UTC)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:02:38.103

还有：

```
obUser.CreationDate = DateTime.UtcNow; 
```

继续看： [将 DateTime.Now 转换为不同的时区](https://stackoverflow.com/questions/11872980/converting-datetime-now-to-a-different-time-zone)

```
TimeZoneInfo maltaTimeZone = TimeZoneInfo.FindSystemTimeZoneById("...");
DateTime utc = DateTime.UtcNow;
DateTime malta = TimeZoneInfo.ConvertTimeFromUtc(utc, maltaTimeZone ) 
```

时区 [列表 与 C# 中的 FindTimeZoneById() 一起使用的时区 ID 列表？](https://stackoverflow.com/questions/7908343/list-of-timezone-ids-for-use-with-findtimezonebyid-in-c)

```
static void Main(string[] args)
{
    foreach (TimeZoneInfo z in TimeZoneInfo.GetSystemTimeZones())
        Console.WriteLine(z.Id);
} 
```

# c++ - c ++数字char和字母char之间的字符比较

> ID：16210541
> 
> 赞同：-2
> 
> 时间：2013-04-25T08:59:26.937
> 
> 标签：c++, string, comparison, char

我有一个名为 tablolar 的字符串变量，在这种情况下，它的值是“tablo2”，根据我的意图，它不能进入​​ if 语句，但它进入了，我不知道为什么。

```
for(int z=0;z<tablolar.size();){
    if((tablolar[z]==',')||(tablolar[z]=='a')||(tablolar[z]=='b')
     ||(tablolar[z]=='c')||(tablolar[z]=='d')||(tablolar[z]=='e')
     ||(tablolar[z]=='f')||(tablolar[z]=='g')||(tablolar[z]=='h')
     ||(tablolar[z]=='i')||(tablolar[z]=='j')||(tablolar[z]=='k')
     ||(tablolar[z]=='l')||(tablolar[z]=='m')||(tablolar[z]=='n')
     ||(tablolar[z]=='o')||(tablolar[z]=='p')||(tablolar[z]=='q')
     ||(tablolar[z]=='r')||(tablolar[z]=='s')||(tablolar[z]=='t')
     ||(tablolar[z]=='u')||(tablolar[z]=='v')||(tablolar[z]=='w')
     ||(tablolar[z]=='x')||(tablolar[z]=='y')||(tablolar[z]=='z')) {
    //enters here but it must not enter
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:02:45.953

您的检查包括检查当前符号是否为`'t'`，如果字符串为`'tablo2'`，则其第一个字符为`'t'`。

顺便说一句，这个检查可以更简单地完成：

```
if ((tablolar[z] == ',') || (tablolar[z] >= 'a' && tablolar[z] <= 'z'))
    // do your work 
```

# javascript - WordPress jQuery 未捕获的参考错误（无法弄清楚）

> ID：16210546
> 
> 赞同：0
> 
> 时间：2013-04-25T08:59:44.160
> 
> 标签：javascript, jquery, wordpress

我在这里有一个 WP 网站：[http ://projects2.yeahcan.com/libdes/](http://projects2.yeahcan.com/libdes/)

底部的旋转木马（Elastislide）不起作用。我收到未捕获的引用错误的错误，并尝试了许多不同的方法来解决它。我认为这与 jQuery 或 js 脚本有关，但在更改脚本的顺序后，我仍然无法解决这个问题。有人可以看看，看看你能不能弄明白？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:14:36.657

您正在尝试使用其中不包含的 layerSlider jquery 插件（第 102 行）

# magento - ePay无法捕获交易：-1007

> ID：16210547
> 
> 赞同：0
> 
> 时间：2013-04-25T08:59:46.223
> 
> 标签：magento

我正在通过 magento 的 epay 支付网关进行自动订阅。

epay在付款后响应交易ID，但在magento中它显示在状态历史记录下：“交易无法被ePay捕获：-1007”

请帮我看看这是什么意思？如果epay无法支付，则无法响应交易ID。但它显示错误？

在此先感谢布拉塔蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:03:02.153

-1007 捕获/可用的数量存在差异。请对照授权/捕获的金额检查捕获/贷记的金额。请注意，如果有 Euroline 交易并且交易被捕获，则只能在第二天记入贷方。

检查 epay 响应并在您的代码中进行比较

# facebook - Facebook“通过应用程序名称”在个人资料提要上不可点击

> ID：16210551
> 
> 赞同：2
> 
> 时间：2013-04-25T08:59:59.083
> 
> 标签：facebook, facebook-graph-api, xcode4.5

我有一个将链接和照片上传到 Facebook 的应用程序。我已在 developer.facebook.com 的应用设置中将其链接到我的应用 facebook 页面。有两种情况。

1）当我上传带有一些文字的链接时。“via < **Appname** >”可以从我的**Home**和**Profile**中点击。

```
[FB requestWithGraphPath:@"me/feed" andParams:[NSMutableDictionary dictionaryWithObjectsAndKeys: [[self.recipeDetails objectForKey:@"source"] objectForKey:@"sourceRecipeUrl"], @"link",fbtextView.text, @"message", nil] andHttpMethod:@"POST" andDelegate:self]; 
```

2）当我上传带有一些文字的照片时。“通过 < **Appname** >”只能从我的**主页**提要中单击，但不能从**个人资料**提要中单击。

```
[FB requestWithGraphPath:@"me/photos" andParams:[NSMutableDictionary dictionaryWithObjectsAndKeys: imageData,@"source",fbtextView.text, @"message", nil] andHttpMethod:@"POST" andDelegate:self]; 
```

这是实际情况还是我错过了什么。请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-11T02:26:01.500

您是否尝试在您的 Facebook 应用上查看此设置：

![Facebook 应用程序设置](https://i.stack.imgur.com/IPwQS.png)

它未经测试，但也许您可以尝试启用和禁用此设置以检查它是否会更改您的结果。

# c# - 如何使用 EPIServer WebService 获取 startPage/rootPage

> ID：16210553
> 
> 赞同：0
> 
> 时间：2013-04-25T09:00:02.673
> 
> 标签：c#, .net, web-services, episerver

我尝试使用 EPIServer 网络服务获取起始节点或根节点。在 EPI 中编程时，我只是这样做

```
PageReference parent = PageReference.StartPage; 
```

但是当使用网络服务时，它会变得有点棘手，因为这不起作用

```
PageStoreService.PageReference.? 
```

如何使用 Web 服务获取起始节点或根节点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:24:56.303

不确定 PageStoreService 是否可以提供该信息，但您可以很容易地推出自己的服务来获取起始页以及您需要的任何其他信息

像这样的东西可能会起作用（它未经测试！）

```
[WebService(Namespace=http://yournamespace/")]
public class PageReferenceService : System.Web.Services.WebService
{ 
    [WebMethod()]
    public PageReference GetStartPage()
    {
        return PageReference.StartPage;
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T09:11:38.110

也许尝试使用它：

```
var link = ContentReference.StartPage; 
```

它还返回`PageReference`一个`StartPage`

PS我总是使用它，我从来没有像你一样遇到过这样的问题。

# c++ - 从一对中获取价值失败：TYPENAME 不提供呼叫运算符

> ID：16210558
> 
> 赞同：2
> 
> 时间：2013-04-25T09:00:19.290
> 
> 标签：c++, poco-libraries, std-pair

这是我想做的。我想存储来自 Http 响应、标头和数据的数据。我想一个简单的方法就是将响应和数据存储为一对。数据是从 LRU 缓存中获取的。LRU 缓存接受一个键（字符串）和该对。HTTPResponse 采用 POCO C++ HTTPResponse 对象的形式。但是我无法从该对的第二个参数中获取字符串！

```
 this->clientCache = new LRUPersistentCache<string, pair<HTTPResponse, string > >(3,cachePath);

    pair<HTTPResponse,string> tmp = (*this->clientCache->get(headKey));// Get the pair
    cout << ((string*)tmp.second()).c_str();  //Should get the second object of the pair!
// But gives: Type std::basic_string<char> does not provide a call operator. 
```

像下面这样写会产生同样的错误：

```
 cout << (*this->clientCache->get(headKey)).second().c_str(); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:02:50.203

`second`是一个成员值，而不是标准中定义的函数

# 20.3.2 类模板对

> 命名空间标准 {
> 模板
> 结构对 {
> typedef T1 first_type;
> typedef T2 second_type;
> T1优先；
> T2秒；

`second`因此不正确使用第二个成员值`second()`。除非它是您要使用的仿函数，否则您的情况不是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:04:22.233

```
cout << ((string*)tmp.second()).c_str(); 
                ^^ 
```

您正在投射到`string*`. 它应该只是`string`（或根本没有），因为`second`of`pair<HTTPResponse,string>`只是一个`string`.

第二个是一个公正的成员而不是一个成员函数，所以它应该是`tmp.second`

* * *

```
cout << tmp.second.c_str(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:02:49.060

要访问一对元素，您需要：

```
pair_object.first
// or
pair_object.second 
```

这些是普通的成员变量，而不是访问器函数。请参阅[http://en.cppreference.com/w/cpp/utility/pair](http://en.cppreference.com/w/cpp/utility/pair)

# python - 为什么在 Python 中计算点距离这么慢？

> ID：16210563
> 
> 赞同：5
> 
> 时间：2013-04-25T09:00:27.403
> 
> 标签：python, performance

我的 Python 程序太慢了。因此，我对其**进行了分析**，发现大部分时间都花在了一个**计算两点**之间距离的函数上（一个点是 3 个 Python 浮点数的列表）：

```
def get_dist(pt0, pt1):
    val = 0
    for i in range(3):
        val += (pt0[i] - pt1[i]) ** 2
    val = math.sqrt(val)
    return val 
```

为了分析这个函数为什么这么慢，我编写了两个测试程序：一个用 Python 编写，一个用 C++ 编写，它们执行类似的计算。他们计算 100 万对点之间的距离。（下面是 Python 和 C++ 中的测试代码。）

Python 计算需要 2 秒，而 C++ 需要 0.02 秒。相差100倍！

对于如此简单的数学计算，为什么 Python 代码比 C++ 代码**慢得多？**如何**加快速度**以匹配 C++ 性能？

用于测试的 Python 代码：

```
import math, random, time

num = 1000000

# Generate random points and numbers

pt_list = []
rand_list = []

for i in range(num):
    pt = []
    for j in range(3):
        pt.append(random.random())
    pt_list.append(pt)
    rand_list.append(random.randint(0, num - 1))

# Compute

beg_time = time.clock()
dist = 0

for i in range(num):
    pt0 = pt_list[i]
    ri  = rand_list[i]
    pt1 = pt_list[ri]

    val = 0
    for j in range(3):
        val += (pt0[j] - pt1[j]) ** 2
    val = math.sqrt(val)

    dist += val

end_time = time.clock()
elap_time = (end_time - beg_time)

print elap_time
print dist 
```

用于测试的 C++ 代码：

```
#include <cstdlib>
#include <iostream>
#include <ctime>
#include <cmath>

struct Point
{
    double v[3];
};

int num = 1000000;

int main()
{
    // Allocate memory
    Point** pt_list = new Point*[num];
    int* rand_list = new int[num];

    // Generate random points and numbers
    for ( int i = 0; i < num; ++i )
    {
        Point* pt = new Point;

        for ( int j = 0; j < 3; ++j )
        {
            const double r = (double) rand() / (double) RAND_MAX;
            pt->v[j] = r;
        }

        pt_list[i] = pt;
        rand_list[i] = rand() % num;
    }

    // Compute

    clock_t beg_time = clock();
    double dist = 0;
    for ( int i = 0; i < num; ++i )
    {
        const Point* pt0 = pt_list[i];
        int r = rand_list[i];
        const Point* pt1 = pt_list[r];

        double val = 0;
        for ( int j = 0; j < 3; ++j )
        {
            const double d = pt0->v[j] - pt1->v[j];
            val += ( d * d );
        }

        val = sqrt(val);
        dist += val;
    }
    clock_t end_time = clock();
    double sec_time = (end_time - beg_time) / (double) CLOCKS_PER_SEC;

    std::cout << sec_time << std::endl;
    std::cout << dist << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:21:02.433

一系列优化：

### 原始代码，稍作改动

```
import math, random, time

num = 1000000

# Generate random points and numbers

# Change #1: Sometimes it's good not to have too much randomness.
# This is one of those cases.
# Changing the code shouldn't change the results.
# Using a fixed seed ensures that the changes are valid.
# The final 'print dist' should yield the same result regardless of optimizations.
# Note: There's nothing magical about this seed.
# I randomly picked a hash tag from a git log.
random.seed (0x7126434a2ea2a259e9f4196cbb343b1e6d4c2fc8)
pt_list = []
rand_list = []

for i in range(num):
    pt = []
    for j in range(3):
        pt.append(random.random())
    pt_list.append(pt)

# Change #2: rand_list is computed in a separate loop.
# This ensures that upcoming optimizations will get the same results as
# this unoptimized version.
for i in range(num):
    rand_list.append(random.randint(0, num - 1))

# Compute

beg_time = time.clock()
dist = 0

for i in range(num):
    pt0 = pt_list[i]
    ri  = rand_list[i]
    pt1 = pt_list[ri]

    val = 0
    for j in range(3):
        val += (pt0[j] - pt1[j]) ** 2
    val = math.sqrt(val)

    dist += val

end_time = time.clock()
elap_time = (end_time - beg_time)

print elap_time
print dist 
```

### 优化#1：将代码放入函数中。

第一个优化（未显示）是将除 之外的所有代码嵌入到`import`函数中。这个简单的更改为我的计算机提供了 36% 的性能提升。

### 优化#2：避开`**`运营商。

你不要`pow(d,2)`在你的 C 代码中使用，因为每个人都知道这在 C 中是次优的。它在 python 中也是次优的。Python`**`很聪明；它评估`x**2`为`x*x`。然而，聪明是需要时间的。你知道你想要`d*d`，所以使用它。这是具有该优化的计算循环：

```
for i in range(num):
    pt0 = pt_list[i]
    ri  = rand_list[i]
    pt1 = pt_list[ri]

    val = 0 
    for j in range(3):
        d = pt0[j] - pt1[j]
        val += d*d 
    val = math.sqrt(val)

    dist += val 
```

### 优化#3：pythonic。

你的 Python 代码看起来很像你的 C 代码。你没有利用语言。

```
import math, random, time, itertools

def main (num=1000000) :
    # This small optimization speeds things up by a couple percent.
    sqrt = math.sqrt

    # Generate random points and numbers

    random.seed (0x7126434a2ea2a259e9f4196cbb343b1e6d4c2fc8)

    def random_point () :
        return [random.random(), random.random(), random.random()]

    def random_index () :
       return random.randint(0, num-1)

    # Big optimization:
    # Don't generate the lists of points.
    # Instead use list comprehensions that create iterators.
    # It's best to avoid creating lists of millions of entities when you don't
    # need those lists. You don't need the lists; you just need the iterators.
    pt_list = [random_point() for i in xrange(num)]
    rand_pts = [pt_list[random_index()] for i in xrange(num)]

    # Compute

    beg_time = time.clock()
    dist = 0 

    # Don't loop over a range. That's too C-like.
    # Instead loop over some iterable, preferably one that doesn't create the
    # collection over which the iteration is to occur.
    # This is particularly important when the collection is large.
    for (pt0, pt1) in itertools.izip (pt_list, rand_pts) :

        # Small optimization: inner loop inlined,
        # intermediate variable 'val' eliminated.
        d0 = pt0[0]-pt1[0]
        d1 = pt0[1]-pt1[1]
        d2 = pt0[2]-pt1[2]

        dist += sqrt(d0*d0 + d1*d1 + d2*d2)

    end_time = time.clock()
    elap_time = (end_time - beg_time)

    print elap_time
    print dist 
```

## 更新

### 优化#4，使用 numpy

以下在代码的定时部分占用了原始版本的大约 1/40 时间。不如 C 快，但接近。

请注意注释掉的“Mondo 慢”计算。这大约是原始版本的十倍。使用 numpy 会产生间接费用。与我的非 numpy 优化 #3 中的设置相比，随后的代码中的设置需要更长的时间。

底线：使用 numpy 时需要小心，而且设置成本可能很高。

```
import numpy, random, time

def main (num=1000000) :

    # Generate random points and numbers

    random.seed (0x7126434a2ea2a259e9f4196cbb343b1e6d4c2fc8)

    def random_point () :
        return [random.random(), random.random(), random.random()]

    def random_index () :
       return random.randint(0, num-1)

    pt_list = numpy.array([random_point() for i in xrange(num)])
    rand_pts = pt_list[[random_index() for i in xrange(num)],:]

    # Compute

    beg_time = time.clock()

    # Mondo slow.
    # dist = numpy.sum (
    #            numpy.apply_along_axis (
    #                numpy.linalg.norm, 1, pt_list - rand_pts))

    # Mondo fast.
    dist = numpy.sum ((numpy.sum ((pt_list-rand_pts)**2, axis=1))**0.5)

    end_time = time.clock()
    elap_time = (end_time - beg_time)

    print elap_time
    print dist 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:09:57.263

一些一般提示：

将所有代码移入 main() 函数并使用正常的

```
if __name__ == "__main__":
    main() 
```

构造。由于范围可变，它大大提高了速度。请参阅[为什么 Python 代码在函数中运行得更快？](https://stackoverflow.com/questions/11241523/why-does-python-code-run-faster-in-a-function)解释为什么。

不要使用`range()`，因为它会立即生成完整的范围，这对于大量数据来说很慢；而是使用`xrange()`which 使用生成器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T09:21:40.780

Python 不是一种快速的语言，它不会产生“计算机代码”，它是在 Python 虚拟机中运行的。“一切”都是对象，所以你没有像 C 中那样的静态类型。只有这会减慢它的速度。- 无论如何，那不是我的领域，所以我不会多说。

你应该考虑 PyPy、Cython，甚至可能用 C 编写一个 python 扩展。

我在 PyPy 中运行代码，使用的时间是 250 毫秒 <-- 这就是你要找的吗？我为 Cython 编写了一个快速测试，并设法将其降低到 500 毫秒。

所以最好的选择是使用 PyPy，或者当速度非常重要时使用 Cython。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T09:11:24.543

您不能期望在 Python 中与 C++ 性能相匹配，但是您可以稍微调整 Python 代码以使其更快：

```
def get_dist(pt0, pt1):
    val = 0
    for i in range(3):
        val += (pt0[i] - pt1[i]) ** 2
    val = math.sqrt(val)
    return val 
```

此代码的`for`循环版本和您的 C++`for`循环完全不同。Python 版本创建一个列表，然后对其进行迭代，而 C++ 版本只是增加一个变量。如果你想加快 Python 版本的速度，最好的方法是显式地写出来以节省 Python`for`循环的开销。

```
def get_dist(pt0, pt1, sqrt=math.sqrt): # cache function at definition time
    return sqrt((pt0[0] - pt1[0]) ** 2 + (pt0[1] - pt1[1]) ** 2 + (pt0[2] - pt1[2]) ** 2) 
```

`numpy`对于该特定功能，这可能与您可以获得（不使用）一样快，您也可以在主代码中改进其他内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T10:00:56.203

这个页面变得非常混乱，大多数答案实际上都在评论中，所以这里是可能的优化的快速概述：

*   [Jamlak 的回答](https://stackoverflow.com/a/16210791/758345)：优化你的 python 代码：

    ```
    def get_dist(pt0, pt1, sqrt=math.sqrt):  # cache function at definition time
        return sqrt((pt0[0] - pt1[0]) ** 2 + (pt0[1] - pt1[1]) ** 2 + (pt0[2] - pt1[2]) ** 2) 
    ```

*   使用**numpy**模块进行计算

*   **使用pypy**而不是 CPython运行代码
*   **使用Cython**编译对时间要求严格的代码

# css - LESS Mixins 不可用

> ID：16210568
> 
> 赞同：1
> 
> 时间：2013-04-25T09:00:50.580
> 
> 标签：css, less

在我当前的项目中，icnludes 的索引中有以下结构：

...

```
<link rel="stylesheet/less" type="text/css" href="css/master.less" media="screen" />

<!--module source CSS-->
<link rel="stylesheet/less" type="text/css" type="text/css" href="module/A/css/A.less" media="screen" />
<link rel="stylesheet/less" type="text/css" href="module/B/css/B.less" media="screen" /> 
```

...

在我的 master.less 中，我包含了其他 less 文件，例如 mixin.less。在这个文件中，我有很多可以正常工作的声明 - 经过测试。

但是如果我尝试在我的模块 B.less 中使用像 .gradient 这样的 mixin，我会变成这样的错误： .gradient is undefined

放置在 mixin.less 中的梯度混合完全可以：

```
.gradient (@startColor: white, @endColor: #eee) {
    background-color: @startColor;
    background: -webkit-gradient(linear, left top, left bottom, from(@startColor), to(@endColor));
    background: -webkit-linear-gradient(top, @startColor, @endColor);
    background: -moz-linear-gradient(top, @startColor, @endColor);
    background: -ms-linear-gradient(top, @startColor, @endColor);
    background: -o-linear-gradient(top, @startColor, @endColor);
} 
```

当我直接在我的 B.less 中使用这个 mixin 时，它可以工作。所以我很困惑。我将客户端部分与 less.js 一起使用，并已阅读[http://lesscss.org/](http://lesscss.org/)上的 fkn 手册，但我不知道出了什么问题。

文件已正确加载等这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:23:46.307

HTML 文档中的每个 LESS 文件都是**独立**编译的，因此您在 master.less 中创建的任何 mixin 都只保留在该文件的上下文中，并且对其他 .less 文件不可见。

我建议你这样做：

1.  用你所有的 mixins 创建一个文件 mixins.less，
2.  **在您的 master.less 中，首先**导入该 mixins.less 文件，然后导入任何其他模块更少的文件，
3.  在您的 HTML 文档中，仅引用 master.less。

我同意您遇到的情况在文档中没有明确定义，但我假设大多数想要使用 less.js 玩 LESS 的人只从一个文件开始。

希望这可以帮助。

# c++ - 如何实现两个可以互相访问的结构？

> ID：16210569
> 
> 赞同：8
> 
> 时间：2013-04-25T09:00:56.040
> 
> 标签：c++, syntax, struct, dependencies, forward-declaration

我写的代码：

```
 struct A;
    struct B;
    struct A
    {
        int v;
        int f(B b)
        {
            return b.v;
        }
    };

    struct B
    {
        int v;
        int f(A a)
        {
            return a.v;
        }
    }; 
```

编译消息：

```
|In member function 'int A::f(B)':|
11|error: 'b' has incomplete type|
7|error: forward declaration of 'struct B'|
||=== Build finished: 2 errors, 0 warnings (0 minutes, 0 seconds) ===| 
```

我知道，为什么该代码不正确，但我不知道如何实现两个可以相互访问的结构。有什么优雅的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T09:05:43.873

如果要保持成员函数的签名完全相同，则必须推迟成员函数的定义，直到看到两个类定义

```
 // forward declarations
    struct A;
    struct B;

    struct A
    {
        int v;
        int f(B b); // works thanks to forward declaration
    };

    struct B
    {
        int v;
        int f(A a);
    };

    int A::f(B b) { return b.v; } // full class definition of B has been seen
    int B::f(A a) { return a.v; } // full class definition of A has been seen 
```

您也可以使用`const&`函数参数（当`A`和`B`大时性能更好），但即便如此，您也必须推迟函数定义，直到看到两个类定义。

# ruby-on-rails - Rails number_with_delimiter 返回不带分隔符的整数

> ID：16210570
> 
> 赞同：0
> 
> 时间：2013-04-25T09:00:59.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, number-with-delimiter

我通常`number_with_delimiter`用来使我的整数或小数更易于阅读，在控制器内部使用它时我曾经遇到过问题，但它解决了那个时间。现在我不知道当我只是简单地将这些函数放在我的`view`it return上时实际上会发生什么，`integer` **而没有** `delimiter`.

请查看我创建的此模拟以显示不同之处。

```
<td><%= number_to_currency(stock.qty) %></td>
<td><%= (number_with_delimiter number_with_precision stock.qty, :precision => 2) %></td>
<td><%= number_with_delimiter(stock.qty) %></td>
<td><%= stock.qty %></td> 
```

结果：

```
$100,070.00    100070    100070    100070.0 
```

所以`number_with_delimiter`and`number_with_precision`也不起作用。事情还在于这个项目只是发生在这个项目上，而我*当地*的其他项目都做得很好。而且在我这个项目的另一个分支上也很好。所以我知道我闯入了什么东西。但我不知道它是哪一个，因为我也没有意识到也不知道我把它弄坏了，我无法追踪我的版本控制，因为它的更新太多了。请任何帮助。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T06:10:52.033

感谢@tomanow 让我得到了预期的结果。所以最后我使用了那里的代码：

位于我的**application_helper.rb**

```
def delimiter(number)
  number_with_delimiter(number, :delimiter => ",", :separator => ".")
end 
```

并在任何地方使用它。谢谢

# google-maps - 信息框按钮切换到街景

> ID：16210571
> 
> 赞同：2
> 
> 时间：2013-04-25T09:01:00.927
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我在信息框中有一个按钮。我想让那个按钮切换到街景。该按钮被触发并切换到街景但是我下面的代码将街景视为我的谷歌地图的一个完全独立的实体，这意味着我无法缩小回地图视图并且街景级别上没有可见标记：

```
 var fenway = new google.maps.LatLng(this.marker[id].position.jb,this.marker[id].position.kb);

    var panoramaOptions = {
        position: fenway,
        pov: {
            heading: 34,
            pitch: 10
        }
    };

    var panorama = new google.maps.StreetViewPanorama(document.getElementById("map-canvas"), panoramaOptions);
    this.gmap.setStreetView(panorama); 
```

如何修改它以便在当前地图中触发街景，而不是创建一个完全独立的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:00:16.657

这对我有用：

```
 var streetViewMaxDistance = 100;          

    var point = new google.maps.LatLng(this.marker[id].position.jb,this.marker[id].position.kb);
    var streetViewService = new google.maps.StreetViewService();
    var panorama = this.gmap.getStreetView();

    streetViewService.getPanoramaByLocation(point, streetViewMaxDistance, function (streetViewPanoramaData, status) {

        if(status === google.maps.StreetViewStatus.OK){

            var oldPoint = point;
            point = streetViewPanoramaData.location.latLng;

            var heading = google.maps.geometry.spherical.computeHeading(point,oldPoint);            

            panorama.setPosition(point);
            panorama.setPov({
                heading: heading,
                zoom: 1,
                pitch: 0
            });
            panorama.setVisible(true);

        }else{
            // no street view available in this range, or some error occurred
            console.log("Sorry! Street View is not available.");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T11:22:44.807

希望这也可能有用。要将其与我现有的地图集成，其中：

`map`是我的谷歌地图实例化类`map = new google.maps.Map(el,mapOptions)`

`pointer`是我的实例化标记：

```
 pointer = new google.maps.Marker({
        position: latLng,
        map: map
    }); 
```

而 latLng 是：`latLng = new google.maps.LatLng(lat, lng)`

我需要做的就是在其他所有内容下方添加以下代码，它会监听我的标记上的点击，当它被点击时，它会将街景设置为可见。

```
 var panorama = map.getStreetView();
    panorama.setPosition(latLng);
    panorama.setPov({
        heading: 45,
        pitch:-10}
    );

    google.maps.event.addListener(pointer, 'click', function() {
        panorama.setVisible(true);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T17:03:24.937

对 setStreetView 方法参数使用 null 会将嵌入的街景绑定到当前地图（加上 X 以关闭街景并返回地图）。

```
this.gmap.setStreetView(); 
```

来自： [https ://developers.google.com/maps/documentation/javascript/reference?csw=1#Map](https://developers.google.com/maps/documentation/javascript/reference?csw=1#Map)

将 StreetViewPanorama 绑定到地图。此全景图会覆盖默认的 StreetViewPanorama，允许地图绑定到地图外部的外部全景图。将全景图设置为 null 会将默认嵌入全景图绑定回地图。

编辑：如果您有多个信息窗口，您可能需要使用这样的函数，以便使用标记的位置更新 streeview：

```
function streetview(location) {

    location = location.replace('(', '').replace(')', '');
    var lat = location.split(',')[0];
    var lng = location.split(',')[1];
    var latlng = new google.maps.LatLng(lat, lng);
    this.gmap.setStreetView();
    this.gmap.getStreetView().setPosition(latlng);
} 
```

# ruby-on-rails - 在 rails 中使用 rubzip2 和回形针，如何创建一个临时 zip 文件并将其保存到回形针？

> ID：16210575
> 
> 赞同：2
> 
> 时间：2013-04-25T09:01:19.103
> 
> 标签：ruby-on-rails, ruby, zip, paperclip, mime-types

我有一些宝贵的代码压缩了大量文件，它在 tmp 文件系统中创建了一个 zip 文件，并在那里添加了文件。

我试图通过使用 ruby​​ 的 Tempfile 将文件存储在代码中来提高效率，而不是自己手动将其写入 tmp 目录并稍后将其删除。

我已经编写了这段代码来尝试这样做……</p>

```
def zip_up_files
  require 'zip/zip'

  t = Tempfile.new(["temp-filename-#{export_type}", '.zip'], :type => 'application/zip')
  Zip::ZipOutputStream.open(t.path) do |z|
    #pop some files in the zip...
  end

  #save it to the has_attachment :download on the model
  self.download = File.open(t.path)
  self.save

  #delete TempFile...
  t.close
end 
```

这成功将 Tempfile 保存到模型上的 .download 中。但是，如果您现在导航到保存的 zip 文件，它不是一个 zip 文件，而是一个乱码文本文档。我想知道在将其保存到模型之前是否缺少创建或保存 zip 的内容。我尝试将类型放入创建的 TempFile 中。看起来 zip 缺少 MimeType。但我不确定，有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T04:18:42.557

问题是，您已将二进制文件写入磁盘，但随后您以文本模式而不是二进制模式打开它。这肯定会弄乱数据。

```
# Opens in text mode by default!
#self.download = File.open(t.path)

# Change to...
self.download = File.open(t.path, 'rb') 
```

顺便说一句，`close`不会删除临时文件。当文件句柄被垃圾收集时，文件将被删除。建议`unlink`显式调用以删除临时文件，否则磁盘上将有大量临时文件等待垃圾收集。（请参阅[TempFile 文档中的概要和良好实践](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)。）

```
#delete TempFile...
t.close
t.unlink 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:04:38.860

我认为文件名没有正确生成

```
t = Tempfile.new(["temp-filename-#{export_type}", '.zip'], :type => 'application/zip') 
```

在这条线之后你可以做

```
 p t.path 
```

并检查终端中的打印值

# 或者

你可以更新你的代码来匹配这个它对我来说很好

```
 require 'zip/zip'
    Zip::ZipFile.open("my.zip", Zip::ZipFile::CREATE) {
     |zipfile|
      #do some awesome staff
     } 
```

# php - 我如何提取里面的ul标签内容和p标签内容 在 php 中使用正则表达式标记

> ID：16210579
> 
> 赞同：0
> 
> 时间：2013-04-25T09:01:34.223
> 
> 标签：php, regex, preg-match

我想从标签中提取内容`<dd>`，我想在其中获取 p 标签内容和 ul 标签内容我尝试在 php 中使用 preg_match_all 来获取该 html 页面中的所有内容`<dd>`，但什么也没得到这是我的 html 代码

```
<dd style="display: block;">
                                    <p>Lightweight, comfy and cool - the dressy shirt he won\'t mind wearing!</p>
                                    <ul>
                                        <li>Made of 100% cotton</li>                        
                                        <li>Specially treated for a soft feel</li>                      
                                        <li>Classically styled with a pointed collar and button front</li>                      
                                        <li>Chest pocket; curved shirttail hem</li>                     
                                        <li>Canvas taping at inner neck</li>                        
                                        <li>Imported</li>                       
                                    </ul>

                                    <div id="BVSecondaryCustomerRatings" style="display:none;margin-left: 15px" class="BVBrowserWebkit"> <div class="BVRRRootElement">
<div class="BVRRRatingSummary BVRRSecondaryRatingSummary">
<div class="BVRRRatingSummary BVRRPrimaryRatingSummary"><div class="BVRRRatingSummaryStyle2"><div class="BVRRRatingSummaryNoReviews"> <div id="BVRRRatingSummaryNoReviewsWriteImageLinkID" class="BVRRRatingSummaryLink BVRRRatingSummaryNoReviewsWriteImageLink">
<a name="BV_TrackingTag_Rating_Summary_2_WriteReview_I2613L0022" target="BVFrame" href="http://reviews.childrensplace.com/4154/I2613L0022/writereview.htm?format=embedded&amp;campaignid=BV_RATING_SUMMARY_ZERO_REVIEWS&amp;sessionparams=__BVSESSIONPARAMS__&amp;return=http%3A%2F%2Fwww.childrensplace.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2Fproduct_10001_10001_-1_1005476_827676_26601%257C72469%257C813599_boy%257Coutfits%257Cplaid%2520patrol_boy&amp;innerreturn=http%3A%2F%2Freviews.childrensplace.com%2F4154%2FI2613L0022%2Freviews.htm%3Fformat%3Dembedded&amp;user=__USERID__&amp;authsourcetype=__AUTHTYPE__&amp;submissionparams=__BVSUBMISSIONPARAMETERS__&amp;submissionurl=http%3A%2F%2Fwww.childrensplace.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2FTCPCheckUserAuthenticationCmd%3FlangId%3D-1%26catalogId%3D10001%26storeId%3D10001"> <img src="http://reviews.childrensplace.com/static/4154/translucent.gif" alt="Write a review">
</a> </div>
<div id="BVRRRatingSummaryLinkWriteFirstID" class="BVRRRatingSummaryLink BVRRRatingSummaryLinkWriteFirst">
<span class="BVRRRatingSummaryLinkWriteFirstPrefix">Be the first to review this item.</span>
<a name="BV_TrackingTag_Rating_Summary_2_SocialBookmarkKaboodle_I2613L0022" target="_blank" class="BVRRSocialBookmarkingSharingLink BVRRSocialBookmarkingSharingLinkKaboodle" onclick="this.href=bvReplaceTokensInSocialURL(this.href);window.open(this.href,'','left=0,top=0,width=795,height=700,toolbar=1,location=0,resizable=1,scrollbars=1'); return false;" onfocus="this.href=bvReplaceTokensInSocialURL(this.href);" rel="nofollow" href="http://reviews.childrensplace.com/4154/share.htm?site=Kaboodle&amp;url=http%3A%2F%2Fwww.childrensplace.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2Fproduct_10001_10001_-1_1005476&amp;title=__TITLE__&amp;robot=__ROBOT__&amp;image=http%3A%2F%2Fcontent.childrensplace.com%2Fwww%2Fb%2FTCP%2Fimages%2Fstyles%2F188410_m.jpg" onmouseover="this.href=bvReplaceTokensInSocialURL(this.href);"><img width="16" height="16" class="BVRRSocialBookmarkLinkImage" src="http://reviews.childrensplace.com/static/4154/link-kaboodle.gif" alt="Kaboodle" title="Add To Kaboodle"></a>
</div></div></div></div> </div>
</div>
                                    <p class="TCP-Phrase">Big Fashion, Little Prices</p>

                                    <div id="product_social_icons" style="height: 20px;">

                                            <div class="social_icon current_social">
                                                <div class="twitter"><iframe scrolling="no" frameborder="0" allowtransparency="true" src="http://platform.twitter.com/widgets/tweet_button.1336551279.html#_=1336767195241&amp;count=horizontal&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=http://www.childrensplace.com/webapp/wcs/stores/servlet/product_10001_10001_-1_1005476&amp;size=m&amp;text=The Childrens Place - plaid shirt&amp;url=http://www.childrensplace.com/webapp/wcs/stores/servlet/product_10001_10001_-1_1005476" class="twitter-share-button twitter-count-horizontal" style="height: 20px; width: 90px;" title="Twitter Tweet Button"></iframe></div>
                                                <div class="pinterest" id="pin_it">
                                                    <iframe scrolling="no" frameborder="0" src="http://pinit-cdn.pinterest.com/pinit.html?url=http://www.childrensplace.com/webapp/wcs/stores/servlet/product_10001_10001_-1_1005476&amp;media=//content.childrensplace.com/www/b/TCP/images/cloudzoom/p/188410_p.jpg&amp;description=plaid shirt&amp;layout=horizontal" style="border: medium none; width: 90px; height: 20px;"></iframe>
                                                </div>
                                                <div class="fb-like-btn" id="fb-root">
                                                    <script src="//connect.facebook.net/en_US/all.js#xfbml=1"></script>
                                                    <fb:like layout="button_count" show_faces="false" width="90" action="like" font="arial" colorscheme="light" fb-xfbml-state="rendered" class="fb_edge_widget_with_comment fb_iframe_widget"><span style="height: 20px; width: 76px;"><iframe id="f111d3371c" name="f5f7b234c" scrolling="no" style="border: none; overflow: hidden; height: 20px; width: 76px;" title="Like this content on Facebook." class="fb_ltr" src="http://www.facebook.com/plugins/like.php?api_key=&amp;locale=en_US&amp;sdk=joey&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D23%23cb%3Df11898a314%26origin%3Dhttp%253A%252F%252Fwww.childrensplace.com%252Ff210aed7%26domain%3Dwww.childrensplace.com%26relation%3Dparent.parent&amp;href=http%3A%2F%2Fwww.childrensplace.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2Fproduct_10001_10001_-1_1005476_827676_26601%257C72469%257C813599_boy%257Coutfits%257Cplaid%2520patrol_boy&amp;node_type=link&amp;width=90&amp;font=arial&amp;layout=button_count&amp;colorscheme=light&amp;action=like&amp;show_faces=false&amp;extended_social_context=false"></iframe></span></fb:like></div>
                                            </div>

                                    </div>
                                </dd> 
```

我用谷歌搜索了很多以找出这个问题我尝试使用 dom 解析但客户端需要正则表达式解析而不是那个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:26:27.800

这是一个答案，它不会告诉您您的方法在道德上是错误的：

```
$pattern = "/<dd.*?>.*?<p>(.*?)<\/p>.*?<ul>(.*?)<\/ul>/s";
if (preg_match($pattern, $html, $matches)) {
    echo "P-tag content: ".$matches[1];
    echo "<br>";
    echo "UL-tag content: ".$matches[2];
} 
```

我使用您发布的 HTML 对其进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:03:33.427

不要使用正则表达式来解析 html，这是错误的。尝试改用 simplexml，如果这对您来说太多了，请尝试查询路径：http: [//querypath.org/](http://querypath.org/)

# ios - Sencha Touch 2 应用程序无法在 mini iPad 上运行

> ID：16210581
> 
> 赞同：1
> 
> 时间：2013-04-25T09:01:42.040
> 
> 标签：ios, sencha-touch, sencha-touch-2, ipad-mini

我已经创建了一个 Sencha Touch 2 应用程序，并在苹果门户中进行了所需的配置后为 iOS 打包了它。尽管 packager.json 文件中的“deviceType”设置为“Universal”，但该应用程序已安装并在除 iPad mini 之外的所有 iOS 设备上正常运行。这可能是 ST2 SDK 中不支持 iPad mini 的错误吗？如果没有，有什么解决方法可以做到这一点？

# c++ - 我可以在返回子类类型的基类上创建赋值运算符吗

> ID：16210582
> 
> 赞同：1
> 
> 时间：2013-04-25T09:01:51.387
> 
> 标签：c++, templates, operator-overloading

抱歉标题不好...我有一个基类，例如：

```
template<class T>
class GPtr
{
public:
    typedef T BaseType;

    GPtr& operator=(const BaseType& rhs)
    {
        ...
    }
}; 
```

我经常想进行子类专业化，例如：

```
class GraphicPtr : public GPtr<Graphic>
{
...
}; 
```

但是，我的基类赋值运算符仍然`GPtr<Graphic>`不返回`GraphicPtr`，并且必须复制粘贴代码以防核心赋值运算符功能稍后更改，这很烦人。

有没有一种巧妙的方法来定义基类赋值运算符，以便它返回实际使用的类的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:09:01.900

在 C++ 中，基类不知道它的子类。您可以添加将作为派生类的模板参数并使用它。

```
template<class T, class Derived>
class GPtr
{
public:
    typedef T BaseType;

    Derived& operator=(const BaseType& rhs)
    {
        ...
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:27:07.577

也许您可以改用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)？

```
#include <iostream>

template<class Derived>
class GPtr
{
public:
    typedef Derived DerivedType;

    GPtr& operator=(const GPtr& rhs)
    {
        std::cout << "GPtr::operator=" << std::endl;

        return *this;
    }
};

class GraphicDerived : public GPtr<GraphicDerived>
{
    public: 

        GraphicDerived& operator=(const GraphicDerived& rhs)
        {
            std::cout << "GraphicDerived::operator=" << std::endl;
            // Inheiriting shadows the name of the base operator= which 
            // needs to be explicitly called.
            GPtr<GraphicDerived>::operator=(rhs); 
            return *this;
        };
};

class Graphic {};

using namespace std;

int main()
{

    GraphicDerived one; 
    GraphicDerived two;

    cout << "derived assignment: " << endl;
    one = two;

    GPtr<Graphic> ptrOne;
    GPtr<Graphic> ptrTwo;

    cout << "GPtr assignment stnadalone : " << endl;

    ptrOne = ptrTwo; 
}; 
```

结果：

```
derived assignment: 
GraphicDerived::operator=
GPtr::operator=
GPtr assignment stnadalone : 
GPtr::operator= 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:57:10.323

你所要求的并没有真正的意义。当基对象被分配时，它不可能知道它是从潜在的无限数量的派生类型中调用的，因此不能在每种情况下返回不同的类型。此外，即使这是可能的，也不可能在实际代码中使用它。

C++ 在运行时解析除了多态调用之外的所有内容，即使对于多态调用，它也只会延迟找到确切的覆盖，而不是签名（即，即使使用协变返回类型，也会使用基本覆盖的返回类型。

从技术上讲，无论有没有模板都可以，*但*它们都表现出相同的核心问题：基类只能是单一类型的基类，即赋值运算符返回的类型，限制了作为*基*类的可用性.

**你想要解决的真正问题是什么？**

您采取的方法似乎不合适。如果您解释您要达到的目标，以便人们可以提出其他方法，那会更好。

# iphone - IOS中的UIScrollView

> ID：16210585
> 
> 赞同：0
> 
> 时间：2013-04-25T09:01:53.590
> 
> 标签：iphone, ios, gridview, uiscrollview, scroll

我有一个我正在使用的 gridview，它有一个标题、侧边栏，然后是里面的 gridview，我有设置滚动，但它不像我想要的那样工作。

我正在尝试进行滚动，这样当我水平滚动时，我的左侧栏将保持不变，而网格仅滚动，但当我垂直滚动时，我希望它与网格一起移动。而且我希望顶部的标题也可以这样做，因此垂直滚动将使其保持不变，而水平滚动将使其与网格一起移动。

我做了一个滚动视图，但它都一起移动并且不能正常工作。

所以有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:26:07.627

最好的方法是将 scollview 的内部视图移动到与滚动视图相反的方向，例如，您的滚动视图中有名为“Bar”的 UIView，您需要检测每次 scollview 由其委托和用它移动“酒吧”：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
   // Move is horizontal
   if (self.lastContentOffsetX != scrollView.contentOffset.x)
   {
      [Bar setFrame:CGRectMake(scrollView.contentOffset.x,Bar.frame.origin.y, Bar.frame.size.width, Bar.frame.size.height)];
   }
   // Move is vertical
   if (self.lastContentOffsetY != scrollView.contentOffset.y)
   {
     //Move another control that you want to be steady 
   }
   self.lastContentOffsetX = scrollView.contentOffset.x;
   self.lastContentOffsetY = scrollView.contentOffset.y; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:23:05.963

使用 [scroll_View setPagingEnabled:YES]; 这会起作用

# nginx - 如何使用 Nginx 反向代理将 localhost:9292/json 重定向到 localhost:80/？

> ID：16210587
> 
> 赞同：0
> 
> 时间：2013-04-25T09:02:02.323
> 
> 标签：nginx, reverse-proxy

```
 server {   
        listen 80;
        server_name localhost;
        location / {
            index index.html;
            root /Users/Lin/Codes/JS/Emberjs/yeoman-ember/dist;
        }  

        location ~* ^/json {
            root
            proxy_pass http://localhost:9292;

        }
    } 
```

配置有点工作，但它只通过

`localhost:9292/json`到`localhost/json`.

但我想要的是

`localhost:9292/json`到“本地主机”

`localhost:9292/json/post`到“本地主机/帖子”

我想我需要做的是设置root或进行一些重写，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:23:14.407

如果您想将所有连接从端口 9092 传递到 80，那么您正在侦听错误的端口。

更改您正在监听的端口 9092：

```
server {   
    listen 9092;
    server_name localhost;

    root /Users/Lin/Codes/JS/Emberjs/yeoman-ember/dist;

    location / {
        index index.html;

    }  

    location ~* ^/json {
        proxy_pass http://localhost:80;
        proxy_set_header  X-Real-IP  $remote_addr;
    }
} 
```

尽量避免在 location 块中使用 root，这是一个常见的陷阱，如[nginx 文档中所述](http://wiki.nginx.org/Pitfalls#Root_inside_Location_Block)

此外，您还需要配置另一台服务器来监听端口 80。

# android - 谷歌地图 API v2。加载地图失败。无法连接到谷歌服务器

> ID：16210589
> 
> 赞同：1
> 
> 时间：2013-04-25T09:02:05.053
> 
> 标签：android, google-maps-api-2

当我在真实设备上运行应用程序时出现此错误。

Main_Activity.java,

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    int chkGooglePlayServices = GooglePlayServicesUtil
            .isGooglePlayServicesAvailable(Context);
    if (chkGooglePlayServices != ConnectionResult.SUCCESS) {
        GooglePlayServicesUtil.getErrorDialog(chkGooglePlayServices,
                (Activity) Context, 1122).show();
    } else {
        SupportMapFragment sfm = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mMap = sfm.getMap();

        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        // Location Update
        LocationListener listener = new LocationListener() {
            @Override
            public void onLocationChanged(Location location) {
                mMap.clear();
                final CameraPosition cameraPosition = new CameraPosition.Builder()
                        .target(new LatLng(location.getLatitude(), location
                                .getLongitude())).zoom(14.0f).build();
                final CameraUpdate cameraUpdate = CameraUpdateFactory
                        .newCameraPosition(cameraPosition);
                mMap.moveCamera(cameraUpdate);
            }

            AlertDialog.Builder dialog = new AlertDialog.Builder(Context)
                    .setTitle(R.string.RemindEnableGps);
            AlertDialog alert = dialog.create();

            @Override
            public void onProviderDisabled(String provider) {
                alert.setCanceledOnTouchOutside(false);
                alert.setCancelable(true);
                alert.show();

            }

            @Override
            public void onProviderEnabled(String provider) {
                alert.dismiss();

            }

            @Override
            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
            }
        };

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                listener);
        final Location mLocation = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

        /*final CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(new LatLng(mLocation.getLatitude(), mLocation
                        .getLongitude())).zoom(14.0f).build();
        final CameraUpdate cameraUpdate = CameraUpdateFactory
                .newCameraPosition(cameraPosition);
        mMap.moveCamera(cameraUpdate);*/
    }

} 
```

这是我的主要文件，

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.findproperty"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />

<permission
    android:name="com.example.findproperty.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.findproperty.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.findproperty.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-library android:name="com.google.android.maps" />

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="Given my signed key" />

   </application>

</manifest> 
```

activity_main.xml，

```
 <?xml version="1.0"?> 
```

```
<fragment 
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="30dp"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="60dp"
    class="com.google.android.gms.maps.SupportMapFragment"
    android:clickable="true" />

</RelativeLayout> 
```

我已经导入了应用程序所需的 Google Play 库。地图对象不为空。但在 logcat 中它显示“Google maps Api v2 Failed to load map. could not connect to google servers”

我错过了什么？请任何人帮助！这要死我了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:32:36.157

您的清单意味着您已将签名的 api 密钥作为 google api 密钥输入，因此我假设您通过在设备上安装签名的 apk 来测试这一点，而不是通过 eclipse 运行使用调试密钥签名的应用程序。这个对吗？

像这样的 API 访问问题通常归结为 api 密钥的输入错误，或哈希过程中的错误。

我会确保您的清单中的密钥是正确的。

# javascript - 为什么我无法使用 modernizr 检测 IE9 中的媒体查询

> ID：16210594
> 
> 赞同：1
> 
> 时间：2013-04-25T09:02:15.387
> 
> 标签：javascript, cross-browser, media-queries, modernizr

我在浏览器中搜索了对 CSS3 媒体查询的支持，IE9+ 支持，[http:](http://caniuse.com/css-mediaqueries) //caniuse.com/css-mediaqueries ，但是当我使用**Modernizr**检测时，发现 ie7-ie9 不支持，ie10 支持. 我要做的是：

1.  生成自定义modernizr js： http: [//modernizr.com/download/#-mq-teststyles-load](http://modernizr.com/download/#-mq-teststyles-load)

2.  html代码：下面是我在html头中的代码，我想检测浏览器是否支持最小宽度媒体查询使用，如果支持，添加support.js，如果不支持，包括nosupport.js

    ```
    <script src="modernizr.custom.03829.js" type="text/javascript"></script>
    <script>
        Modernizr.load({
            test: Modernizr.mq('(min-width: 0px)'),
            yep: 'support.js',
            nope: 'nosupport.js'
        });
    </script> 
    ```

3.  在 support.js 中：警报（“支持”）；

4.  在 nonosupport.js 中：警报（“不支持”）；

结果：ie7-ie9 提示“不支持”，在 ie10 中提示“支持”。我认为ie9也应该提醒“支持”，对吧？我的代码有问题吗？

另一个奇怪的事情是，如果我使用来自[http://modernizr.com/docs/#mq](http://modernizr.com/docs/#mq)的示例用法 ：

```
Modernizr.mq('only screen and (max-width: 768px)')  // true 
```

Chrom、firefox 和 IE7-10 会提示“不支持”，我认为现代浏览器应该提示“支持”。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T06:03:48.303

关于你的第一个问题 - 我无法复制。`Modernizr.mq('(min-width: 0px)')`在 IE 9 中为我返回 true。在 F12 工具中检查您的文档模式，看看您是否正在退回到非标准模式。

第二，浏览器的现代性与它是否会返回真实无关。`Modernizr.mq`测试浏览器是否匹配媒体查询。如果为 false，则表示浏览器窗口大于 768 像素。

# c++ - Null 与 ZeroMemory

> ID：16210598
> 
> 赞同：6
> 
> 时间：2013-04-25T09:02:21.440
> 
> 标签：c++, c, winapi, null, directx

将对象设置为 NULL 和使用 ZeroMemory 到底有什么区别？

我听说在 WinAPI（主要是 C）中，一个人应该在 C 对象上使用 ZeroMemory 是一种很好的做法。我来自 C# 背景，这似乎是一个 C++ 人应该知道的。

我发现使用 DirectX API，无论您是否对对象进行了 ZeroMemory，应用程序仍然可以工作，但有些示例使用 ZeroMemory，有些则没有。

任何人都可以澄清这些事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:11:39.997

`ZeroMemory`用零填充一块内存。

将指针设置为 NULL 只会使指针指向空，这与用零填充指针指向的内存不同（例如，您仍然可以通过该指针访问该内存）。

在你可以对该对象做任何有用的事情之前，你可能需要用更有意义的东西替换这些零 - 这就是为什么两个程序都使用`ZeroMemory`或不工作的原因。

在这种情况下的原因`ZeroMemory`是您可以轻松找到在访问点未初始化的对象上的操作（例如，Visual Studio 正在使用`0x0c0c0c0c`/* 或类似的 */ 填充未初始化的内存，因此当您在调试过程中遇到这种模式时，您知道该对象尚未初始化）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:37:56.710

这是完全不同的事情。[ZeroMemory 宏](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366920%28v=vs.85%29.aspx)用零填充一块内存。将指针设置为 NULL ......好吧，它使它指向无处。

例子。假设您有指向“Type”类型`p`对象的指针：`o`

```
struct Type
{
    int i;
    float f;
    bool b;
};
Type o;
Type* p = &o;

// In memory that will be something like this:
// "o" internals = [010101010001010010110010010010100011001001010000011...]
// "p" address = 0x00830748
//(number of bits and hex adress is just example) 
```

**如果你`ZeroMemory`这样做：**

```
ZeroMemory(&o, sizeof(o));
// ---- or -----
ZeroMemory(p, sizeof(o));

// In memory we will have:
// "o" internals = [000000000000000000000000000000000000000000000000000...]
// "p" address = 0x00830748 
```

里面的所有变量`o`现在的值都为零：

```
cout << o.i; // 0
cout << o.f; // 0.0f
cout << o.b; // false

cout << p->i; // 0
cout << p->f; // 0.0f
cout << p->b; // false 
```

**如果你`NUll`-ify 指针：**

```
p = NULL;
// In memory we now have:
// "o" internals = [010101010001010010110010010010100011001001010000011...]
// "p" address = 0x00000000 
```

如果现在取消引用`p`，您将获得未定义的行为：

```
int a = p->i; // Access voilation reading location 0x00000000 
```

**如果你`NUll`-ify 对象：** 它不会编译，如果`Type`没有重载 operator=()

```
o = NULL; // error C2679: binary '=' : no operator found 
          // which takes a right-hand operand of type 'int' 
          // (or there is no acceptable conversion) 
```

**将其应用于 DirectX**

当您使用 DirectX 时，您必须填写一些结构以将它们传递给 API 函数。这里是神奇之处。您可以`ZeroMemory`将其设置为 0 值，这主要是默认值，然后只需填写所需的值，简化您的代码并防止您使用奇怪的值出错（如果您创建对象并且不会设置一些成员变量，它将包含垃圾值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T09:06:28.720

在 C 和 C++ 中，“对象”不能设置为`NULL`. *指向*对象的指针可以设置为`NULL`，这意味着指针本身指向空（“空对象”）。

这与将对象的内容设置为“所有位为零”不同，后者就是这样[`ZeroMemory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366920%28v=vs.85%29.aspx)做的。您通常只能对`structs`可能反应非常糟糕的成熟 C++ 对象执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T09:05:05.790

ZeroMemory() 将内存设置为 0。也就是说，它将清除内存。同样将对象（指向对象的指针）设置为 NULL 意味着该对象的基地址被初始化为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:06:45.900

`ZeroMemory`用于将较大的内存块设置为零。它不应该用于不是“POD”（普通旧数据）的对象，即如果您的对象具有构造函数或虚拟方法。

`NULL`用于指示指针指向“无”。

从技术上讲，您将从`ZeroMemory(pointer, sizeof(pointer));`as得到相同的结果`pointer = NULL;`，但是 a) 第二个更清晰，并且 b) 执行后者的速度很可能一样快或更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-29T18:21:54.507

就良好实践而言，id 建议您同时使用两者。

```
// Consider mystuff as being a pointer to an object.
ZeroMemory(mystuff); // Makes this part of memory to be clean
mystuff = NULL; // Makes this pointer point to null so you dont access a 0-memory section. 
```

您可以在使用 DirectX API 时使用 malloc 分配内存，在这种情况下，调用`ZeroMemory();`将无法按预期工作。对于您分配的内存，`malloc();`您可能应该调用 to `free();`。在处理指针时，我通常在释放它们后立即将它们设置为 NULL，idk 是否这是一个好习惯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T09:18:11.183

`Zero memory`将部分内存设置为零，并且对于将大向量设置为零的更常见的对象使用它是有害的，并且它工作得很快，并且`Null`当您希望指针指向任何内容并且它们的使用取决于您的程序指针或设置时，它更常见记忆值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-17T08:49:45.433

`NULL`将算术类型变量或（数据或函数）指针变量设置为等于 0。由于 C++11，仅针对指针，`nullptr`执行相同的操作，并且出于相同的原因建议使用；这是正确的和惯用的。

但是`ZeroMemory`将 a 的内容设置为`struct`或`class`等于 0 byte-per-byte。

`ZeroMemory`（或）是第二个参数设置为`RtlZeroMemory`的预处理器定义。`memset``0`

```
void* memset(void* dest, int ch, std::size_t count);

#define ZeroMemory(dest,count) memset((dest),0,(count)) 
```

你可以说`ZeroMemory`是`memset`ing to `0`。

例子：

```
D3D11_BUFFER_DESC indexBuffDesc;
ZeroMemory(&indexBuffDesc, sizeof(indexBuffDesc));
// or:
memset(&indexBuffDesc,0,sizeof(indexBuffDesc)); 
```

`ZeroMemory`就像格式化驱动器（不是快速格式化）。

想`NULL`/`nullptr`就像擦除一个充满宝藏的坚固金库的门，因此您将永远无法进入它。鉴于，`ZeroMemory`正在破坏强大的保险库的内容，使所有宝藏和里面的其他一切都无效；你可以访问它，但那里什么都没有。这就是我对他们的看法。

# ms-project - 3-task-scenario 中的 MSProject (Start-Finish) 中的反向依赖关系不理解

> ID：16210600
> 
> 赞同：0
> 
> 时间：2013-04-25T09:02:26.937
> 
> 标签：ms-project

我对msproject有点经验。尽管如此，我遇到了一个我无法解决的非常简单的问题。请帮忙。欢迎直接解决方案或 VBA 解决方案。

案例：三个任务需要对齐。我的兄弟和我的妹妹来看我，将分别离开（开车回家是任务兄弟和任务姐姐）。我想在两个人中的第一个离开之前的时间和他们两个喝茶（任务茶）。

```
----- tea (predecessor: sf sis)           
             ---------- bro
     -------------- sis 
```

在这里，任务的排序和安排非常好。但是：万一我姐姐比我哥哥晚走，任务茶也会转移。不好，被师兄可能会错过家茶。解决方案，我认为，将是对茶任务的第二个 sf 依赖（顺便说一句：我没有使用正向 deps，因为在现实世界的场景中，兄弟姐妹有更复杂的依赖关系，并且不能由喝茶的家庭来管理）。但令我惊讶的是，在添加了 bro-dep 后，茶被转移了，如下所示（我姐姐错过了茶）：

```
 ----- tea (predecessor: sf sis, sf bro)           
             ---------- bro
     -------------- sis 
```

有一个简单的解决方案：为兄弟姐妹添加一个摘要任务，并为该摘要任务构建茶的 sf dep。这不适用于我的情况，因为 bro 和 sis 是项目计划中非常遥远的结构中的任务。好的，你是对的，我可以在兄弟姐妹之前创建里程碑，围绕该里程碑创建一个摘要任务并将其用于茶部门。这将是一个解决方案，但对于一个简单的问题来说，这是一个相当复杂、丑陋的解决方案。你知道更好的吗？

我正在寻找一个解决方案，但每个线程和解释只考虑两个任务，如上面的第一个示例，而不是三个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:45:18.330

不确定我是否完全理解您要实现的目标，但听起来您希望 bro 和 sis 任务都在 tea 任务之后开始（因此两者都有 sf 依赖于 tea 任务）但您也希望 sis 和 bro 任务同时开始？如果是这样，请让 bro 成为具有 ss 依赖关系的 sis 的前身。结果将是两者都将在茶任务结束后发生，但兄弟和姐妹的开始时间将对齐。

# javascript - 如何在html网页的文本字段中添加逗号

> ID：16210608
> 
> 赞同：0
> 
> 时间：2013-04-25T09:02:45.963
> 
> 标签：javascript, html, input, webpage

我有一个网页，我在其中输入数据`<input />`，比如 1000 所以我希望它看起来像 1,000 但它不会改变它只是显示的 ID 值，因为我在其他计算中使用相同的 ID 所以如果 1,000 那么它会显示 NaN ......我怎样才能避免这种情况？

```
<input type="text" id="test" onBlur="addCommas()">
<script>
    function addCommas(nStr){
        var offset = nStr.length % 3;
        if (offset == 0)
            return nStr.substring(0, offset) + nStr.substring(offset).replace(/([0-9]{3})(?=[0-9]+)/g, "$1,");
        else
            return nStr.substring(0, offset) + nStr.substring(offset).replace(/([0-9]{3})/g,    ",$1");
    }
    alert(addCommas("1234567"));
</script> 
```

我从论坛得到了这段代码......有没有人知道如何使这个函数变得简单，以便它只显示在输入框中，但是当我得到 ID 值时它显示 1000？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:10:55.820

[用这个](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric/174921#174921)测试你的价值：

```
function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

它会阻止你的 NAN。

并使用@Pete 的[链接了解如何在 JavaScript 中以逗号作为千位分隔符打印数字](https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript)

编辑关于您的评论：然后您可以使用 a`<input type="hidden" id="testValue" />`并将实际价值存储在其中。

所以你的代码看起来像：

```
<input type="text" id="test" onBlur="addCommas(this)">
<input type="hidden" id="testRealValue">
<script>
    function isNumber(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    }
    function addCommas(input){
        nStr = input.value;
        if(!isNumber(nStr))return;
        document.getElementById("testRealValue").value = nStr;
        var offset = nStr.length % 3;
        if (offset == 0)
            input.value = nStr.substring(0, offset) + nStr.substring(offset).replace(/([0-9]{3})(?=[0-9]+)/g, "$1,");
        else
            input.value = nStr.substring(0, offset) + nStr.substring(offset).replace(/([0-9]{3})/g,    ",$1");
    }
</script> 
```

这是[jsfiddle](http://jsfiddle.net/FhZ6y/)

# ios - 是否可以自定义触发 UIScrollView 滚动的滑动手势识别？

> ID：16210612
> 
> 赞同：3
> 
> 时间：2013-04-25T09:02:59.450
> 
> 标签：ios, objective-c, cocoa-touch, uiscrollview

我创建了一个自定义子类并`UIScrollView`实现了`touchesBegan`、`touchesMoved`和方法。`touchesEnded``touchesCancelled`

但是，我对事情的运作方式并不满意。特别是，何时提到方法被调用以及何时`UIScrollView`决定实际滚动（拖动）。

`UIScrollView`即使第一个触摸点和最后一个触摸点在垂直方向上的差异很小，也会滚动。所以我几乎可以水平滑动，并`UIScrollView`根据那个微小的差异向上或向下滚动。（这在正常用例中非常好）

![默认 UIScrollView 行为](https://i.stack.imgur.com/JPaJy.png)

这两种滑动都会导致`UIScrollView`向下滚动。

但是我很感兴趣是否可以以某种方式对其进行调整，使其行为如下：

![期望的行为](https://i.stack.imgur.com/FsSn4.png)

基本上，这样几乎水平的滑动就会被相关方法拾取`touchesBegan`并且不会启动滚动。然而，绿色滑动方向仍会启动滚动......

编辑：

我忘了提，`touchesBegan`如果您在屏幕上按住手指一小段时间然后移动它，亲戚们就会被叫到。所以不是经典的滑动手势......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:16:19.590

伊万，我认为你正在尝试做与 Facebook 页面相同的效果，并拖动你的滚动视图，所以让滚动视图跟随你的手指，如果这是正确的，我建议你忘记触摸事件，并从 UIPanGesture 开始，它在这些情况下最好，因此在调用该手势的委托中，为其放置以下代码：

```
 //The sender view, in your case the scollview
    UIScrollView* scr = (UIScrollView*)sender.view;
    //Disable the scrolling flag for the sake of user experience
    [scr setScrollEnabled:false];

    //Get the current translation point of the scrollview in respect to the main view
    CGPoint translation = [sender translationInView:self.view];

    //Set the view center to the new translation point 
    float translationPoint = scr.center.x + translation.x;
    scr.center = CGPointMake(translationPoint,scr.center.y);
    [sender setTranslation:CGPointMake(0, 0) inView:self.view]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:33:04.860

Christopher Nassar 正确地指出我应该使用`UIPanGestureRecognizer`，所以我对它进行了一些实验。

我发现，如果您将 a 添加*到*`UIPanGestureRecognizer`包含您的. 然后内置的平移手势识别器将以我想要的确切方式与您自己的配对工作！*`UIScrollView``UIScrollView``UIPanGestureRecognizer`*

 **水平和接近水平的滑​​动将被超级视图*拾取，而所有其他垂直滑动将被`UIPanGestureRecognizer`内置的（自定义）平移手势识别器拾取并使其滚动......*`UIScrollView`*

 *我想这`UIScrollView`是这样设计的，因为默认行为是只有这些平移手势识别器中的一个触发，或者如果`UIScrollView`从此`UIPanGestureRecognizerDelegate`方法返回 YES 则同时触发：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer; 
```

然而，它似乎`UIScrollView`有额外的逻辑来选择性地禁用（对于水平滑动）它自己的平移识别器，以防另一个存在。

也许这里有人知道更多细节。

所以总结一下，我的解决方案是在我的. 中添加一个`UIPanGestureRecognizer`内部。（注意：作为*子视图*添加到该视图）`viewDidLoad``UIViewController``UIScrollView`*`UIViewController`*

 *```
UIPanGestureRecognizer *myPanGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
[self.view addGestureRecognizer:myPanGestureRecognizer]; 
```

然后添加处理程序方法：

```
- (void)handlePan:(UIPanGestureRecognizer *)recognizer
{
    NSLog(@"Swiped horizontally...");
} 
```***

# php - 如何正确地将带有提交按钮的复选框表单中的数据库结果回显到表中？

> ID：16210614
> 
> 赞同：1
> 
> 时间：2013-04-25T09:03:14.597
> 
> 标签：php, html, mysql, database

大家好，我是 php、mysql 和 html 的新手，对于我正在从事的项目，我有一个简单的数据库，其中包含 id、产品、价格和条件。在我的 html 表单上，我有四个复选框，价格范围为 0-25、25-50、50-75 和 75-100。这是我正在尝试做的一个示例：如果用户选择了带有 0-25 的复选框，它应该在表格中回显所有价格为 0-25 的产品的 ID、产品、价格和条件。我有复选框值保存在数组中，但此时我完全迷失了。如何在选中的复选框的数据库中输出值。

PS我听说过PDO，但是这个项目我们必须使用mysql。这是我的html：

```
<form action="pricefilter.php" method="post">
<br><b>Filter By Price:</b><br><br> 
<input type="checkbox" name="priceFilter[]" id="Price" value="025"/>&nbsp;$0-$25<br><br>
<input type="checkbox" name="priceFilter[]" id="Price" value="2550"/>&nbsp;$25-$50<br><br>
<input type="checkbox" name="priceFilter[]" id="Price" value="5075"/>&nbsp;$50-$75<br><br>
<input type="checkbox" name="priceFilter[]" id="Price" value="75100"/>&nbsp;$75-$100<br><br>
<input type="checkbox" name="priceFilter[]" id="Price" value="100"/>&nbsp;$75-$100<br><br>
<input type="submit" name="submit" value="Submit" />
</form> 
```

这是我的php：

```
<?php
mysql_connect ("localhost", "root","root")  or die (mysql_error());
mysql_select_db ("XUSWAPSAMPLE");

$priceFilter = $_GET['priceFilter'];

 $filteredResponse = array ();
foreach($priceFilter as $range)
{
if($range == 025)
    {
        $query = "select * from Books where Price <= 25";
        $sql = mysql_query($query);

        array_push($filteredResponse, $sql);

    }

    if($range == 2550)
    {
        $query = "select * from Books where Price >= 25 AND Price <=50";
        $sql = mysql_query($query);

        array_push($filteredResponse, $sql);
    }
     if($range == 5075)
    {
        $query = "select * from Books where Price >= 50 AND Price <=75";
        $sql = mysql_query($query);

        array_push($filteredResponse, $sql);
    }

     if($range == 75100)
    {
        $query = "select * from Books where Price >= 75 AND Price <=100";
        $sql = mysql_query($query);

        array_push($filteredResponse, $sql);
    }
     if($range == 100)
    {
        $query = "select * from Books where Price >= 100";
        $sql = mysql_query($query);

        array_push($filteredResponse, $sql);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:06:47.310

您的代码中有两处错误

1）您正在使用 post 方法提交表单，但尝试使用 $_GET 获取价值，因此您应该使用 $_POST

2）您应该使用 php 的 isset 属性来检查值是否存在。

所以解决方案是试试这个

```
if (isset($_POST['priceFilter']) && ($_POST['priceFilter']!="")) {
    $priceFilter = $_POST['priceFilter'];

    // put your remaining code here
} 
```

# php - php脚本推送数据二维数组

> ID：16210616
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:03:19.323
> 
> 标签：php, json

我几乎可以将数据添加到我的文件中。但我正在尝试找出确切的语法..任何帮助都非常感谢..

我的 php 脚本

```
$inp = file_get_contents('jsontrail.json');

$tempArray = json_decode($inp, true);
//adding to the matchid index of matches array
$matchid=3;
$arrne['games']['matches'][$matchid]['winner'] ="winner";
$arrne['games']['matches'][$matchid]['player1id'] ="player1id";
$arrne['games']['matches'][$matchid]['player2id'] ="player2id";
array_push($tempArray,$arrne );
$jsonData = json_encode($tempArray);
file_put_contents('jsontrail.json', $jsonData);
print_r( $inp); 
```

我的有效 json 文件

```
{
"players": [
    {
        "name": "Moldova",
        "image": "/Images/Moldova.jpg",
        "roll_over_image": "tank.jpg"
    },
    /* repeat */
],
"games": [
    {
        "matches": [
            {
                "player1id": 0,
                "player2id": 1,
                "winner": "*"
            },
            /* repeat */
        ]
    },
    {
        "matches": [
            {
                "player1id": 0,
                "player2id": 1,
                "winner": "*"
            },
            /* repeat */
        ]
    }
]
} 
```

我正在尝试将数据添加到已经存在的数组中，

在游戏->first_match_array->mymatch_id_input->push_data_here 中。

执行后，这就是我在屏幕上得到的

```
{
    "players":
    [
        {
            "name":"Moldova",
            "image":"\/Images\/Moldova.jpg",
            "roll_over_image":"tank.jpg"
        },
        /* repeat */
    ]
    ,
    "games":
    [
        {
            "matches":
            [
                {
                    "player1id":0,
                    "player2id":1,
                    "winner":"*"
                },
                /* repeat */
            ]
        },
        {
            "matches":
            [
                {
                    "player1id":0,
                    "player2id":1,
                    "winner":"*"
                },
                /* repeat */
            ]
        }
    ],
    "0":
    {
        "games":
        {
            "matches":
            [
                {
                    "3":
                    {
                        "winner":"winner",
                        "player1id":"player1id",
                        "player2id":"player2id"
                    }
                }
            ]
        }
    }
} 
```

上面是用 array_push 得到的。我用 array_merge 得到的下一个代码

```
{
    "players":
    [
        {
            "name":"Moldova",
            "image":"\/Images\/Moldova.jpg",
            "roll_over_image":"tank.jpg"
        },
        /* repeat */
    ],
    "games":
    [
        {
            "matches":
            [
                {
                    "player1id":0,
                    "player2id":1,
                    "winner":"*"
                },
                /* repeat */
            ]
        },
        {
            "matches":
            [
                {
                    "player1id":0,
                    "player2id":1,
                    "winner":"*"
                },
                /* repeat */
            ]
        }
    ],
    "0":
    {
        "games":
        {
            "matches":
            [
                {
                    "3":
                    {
                        "winner":"winner",
                        "player1id":"player1id",
                        "player2id":"player2id"
                    }
                }
            ]
        }
    },
    "1":
    {
        "games":
        {
            "matches":
            [
                {
                    "3":
                    {
                        "winner":"winner",
                        "player1id":"player1id",
                        "player2id":"player2id"
                    }
                }
            ]
        }
    }
} 
```

请帮忙，看起来很简单，但找不到确切的代码来做这件事..请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:52:43.443

~~你搞乱了关键顺序，~~

 ~~```
$arrne['games']['matches'][$matchid]['winner'] 
```~~ 

应该

```
$arrne['games'][$matchid]['matches']['winner'] 
```

 ~~你缺少一个数字索引，

```
$arrne['games']['matches'][$matchid]['winner'] 
```

应该是

```
$arrne['games'][]['matches'][$matchid]['winner'] 
```

或者是

```
$arrne['games'][$matchid]['matches'][]['winner'] 
```

因为在您的原始 JSON 中，您有

```
"games": [
    {
        "matches": [
        /* ... */
        ]
    },
    {
        "matches": [
        /* ... */
        ]
    } 
```

所以结构是`games->[index]->matches->[index]`，不是`games->matches->[index]`。

另外，简单`array_merge`是行不通的，你需要[`array_merge_recursive`](http://www.php.net/manual/en/function.array-merge-recursive.php)；

示例代码：

```
$json=<<<JSON
...
JSON;
$tempArray=json_decode($json,true);
print_r($tempArray);
$matches=array(
    "games"=>array(
        3=>array(
            "matches"=>array(
                array(
                    "winner"=>"winner",
                    "player1id"=>"player1id",
                    "player2id"=>"player2id"
                )
            )
        )
    )
);
print_r(array_merge_recursive($tempArray,$matches)); 
```

~~[现场演示](http://3v4l.org/enpXf#v520)~~ [现场演示](http://3v4l.org/sIIQR#v520)

**编辑**

`$tempArray["games"]`并且`$tempArray["games"][index]["matches"]`都是数字数组，因此`array_merge`将追加，而不是覆盖。如果需要**修改**现有值而不是**添加**新值，直接修改like

```
$tempArray["games"][index]["matches"][$matchid]["winner"]="winner"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:16:27.107

问题是你格式错误的 json 字符串，它没有正确构造，试试这个

```
$str = '{
"players": [
{
    "name": "Moldova",
    "image": "/Images/Moldova.jpg",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Georgia",
    "image": "/Images/georgia.gif",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Belarus",
    "image": "/Images/Belarus.gif",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Armenia",
    "image": "/Images/armenia.png",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Kazahstan",
    "image": "/Images/kazahstan.gif",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Russia",
    "image": "/Images/russia.gif",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Ukraine",
    "image": "/Images/ukraine.png",
    "roll_over_image": "tank.jpg"
},
{
    "name": "Uzbekistan",
    "image": "/Images/uzbekistan.gif",
    "roll_over_image": "tank.jpg"
}
],
"games": [
{
    "matches": [
    {
        "player1id": 0,
        "player2id": 1,
        "winner": "*"
    },
    {
        "player1id": 2,
        "player2id": 3,
        "winner": "*"
    },
    {
        "player1id": 4,
        "player2id": 5,
        "winner": "*"
    },
    {
        "player1id": 6,
        "player2id": 7,
        "winner": "*"
    },
    {
        "player1id": 0,
        "player2id": 2,
        "winner": "*"
    },
    {
        "player1id": 4,
        "player2id": 6,
        "winner": "*"
    },
    {
        "player1id": 0,
        "player2id": 4,
        "winner": 4
    }
    ]
},
{
    "matches": [
    {
        "player1id": 0,
        "player2id": 1,
        "winner": "*"
    },
    {
        "player1id": 2,
        "player2id": 3,
        "winner": "*"
    },
    {
        "player1id": 4,
        "player2id": 5,
        "winner": "*"
    },
    {
        "player1id": 6,
        "player2id": 7,
        "winner": "*"
    },
    {
        "player1id": 0,
        "player2id": 2,
        "winner": "*"
    },
    {
        "player1id": 4,
        "player2id": 6,
        "winner": "*"
    },
    {
        "player1id": 0,
        "player2id": 4,
        "winner": 0
    }
    ]
}]}'; 
```

如果您使用它，它将起作用。~~

# jquery - jquery mobile：如何将图像插入按钮

> ID：16210619
> 
> 赞同：0
> 
> 时间：2013-04-25T09:03:22.527
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-button

我有这种问题。我有按钮：

```
<button type="button" data-theme="c">test</button> 
```

在这里，我想插入我的图片而不是文本 TEST：

```
<img src="resources/images/test-icon.png" align="middle" /> 
```

我尝试了几个选项，但找不到解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:33:15.823

因为您选择了该标签，所以我假设您使用的是 jQuery 移动样式按钮，而不是经典的本机浏览器按钮版本。

如果是这种情况，您的示例将永远无法工作。此外，虽然**[Amits](https://stackoverflow.com/users/533260/amit-agrawal)**示例是一个很好的示例，但它永远不会在 jQuery Mobile 中工作。当 jQuery mobile 设置按钮样式时，它会隐藏旧按钮并使用 aa 标签创建新按钮。然后它需要按钮文本并将点击事件重定向到真正的（现在隐藏的）按钮。

我们可以使用这些信息来修改新的按钮样式。不幸的是，在输入按钮和输入提交的情况下，没有javascript就无法完成。

因此，我将向您展示另一种解决方案。

jQuery Moible 按钮也可以这样构造：

```
<a data-role="button" class="custom-button">Button text goes here</a> 
```

我们可以通过纯 css 轻松修改此按钮，这是一个工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/2C8Rj/](http://jsfiddle.net/Gajotres/2C8Rj/)

**HTML：**

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>

    <div data-role="content">
        <a data-role="button" class="custom-button"></a>
    </div>

    <div data-theme="a" data-role="footer" data-position="fixed">

    </div>
</div> 
```

**CSS：**

```
.custom-button {
    height: 50px !important;
}

.custom-button .ui-btn-inner {
    padding: 0 !important;    
}

.custom-button .ui-btn-inner .ui-btn-text {
    display: block !important;
    height: 50px !important;
    width: 100% !important;
    background-image: url('http://shop.ascd.org/images/red-error.gif') !important;
    background-repeat: no-repeat  !important;
    background-position: center  !important; 
} 
```

# c# - 从文档内文档的特定键获取特定值

> ID：16210621
> 
> 赞同：0
> 
> 时间：2013-04-25T09:03:48.940
> 
> 标签：c#, mongodb

我有一个类似这样的文件

```
{ "_id": { "$oid" : "51776bca40bcc60038000001" }, 
"username": "domi55", 
"Password": "test", 
"Character": { "Job": "Warrior", 
               "Level": 1,
               "Skill": { "SkillID": "1001", 
                          "SkillName": "Blade Dance",
                          "LevelRequirment": 1 
                        }
              }
          }
} 
```

如何在 C# 中获取“Job”值和“SkillName”值？我正在使用 MongoDB 和 MongoDB C# 驱动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:10:24.357

使用[Json.Net](http://json.codeplex.com/)

```
dynamic obj = JsonConvert.DeserializeObject(yourDoc);
Console.WriteLine("{0} {1}", obj.Character.Job, obj.Character.Skill.SkillName); 
```

或使用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var obj = new JavaScriptSerializer().Deserialize<dynamic>(json);
Console.WriteLine("{0} {1}",obj["Character"]["Job"],obj["Character"]["Skill"]["SkillName"]); 
```

# c# - 从 Sender 获取 GridView 对象

> ID：16210622
> 
> 赞同：3
> 
> 时间：2013-04-25T09:03:55.207
> 
> 标签：c#, asp.net, events, sender, page-index-changed

我`GridView`在一个页面上有多个，它们都是可分页的。我需要在`OnPageIndexChanging`事件中处理分页，但我不想为每个`GridView`.

那么如何从发件人那里获取 GridView 对象 id 呢？我正在尝试执行以下操作....

```
protected void PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView gridView = (GridView)sender.ID;

    gridView.PageIndex = e.NewPageIndex;
    gridView.DataBind();
} 
```

这样我可以为所有 GridView 调用相同的事件处理程序，而不必为每个事件编写一个新的偶数处理程序？我只是不确定如何获取触发事件的***ID :(***`GridView`

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T09:04:48.007

它甚至更简单：

```
GridView gridView = (GridView)sender; 
```

`sender`参数始终是触发事件的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:11:25.100

```
protected void PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView gv= sender as GridView;

    if(gv!=null){
        gridView.PageIndex = e.NewPageIndex;
        gridView.DataBind();
    }
} 
```

# forms - 在 Spring MVC 中保存 GET 请求的表单数据

> ID：16210623
> 
> 赞同：0
> 
> 时间：2013-04-25T09:04:02.520
> 
> 标签：forms, spring-mvc, get, textarea, javabeans

我有一个巨大的**弹簧表格**，其中包含一个表格，用户可以在其中添加或删除数据行。它基本上是一个 GridView。为了删除，我放置了通过**GET requests**完成工作的锚点。我面临的问题是，在用户将一行或多行数据添加到仍处于可编辑（textarea）模式的表中后，如果他想删除其他行，他煞费苦心地写在那些上的文本textareas 消失，它们不会绑定**表单 bean**，也不会随 GET 请求一起移动。我不知道解决这个问题的优雅解决方案，当然我可以通过 Javascript 定期提交表单。有没有更好的设计解决方案？请分享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:23:06.750

> 为了删除，我放置了通过 GET 请求完成工作的锚点。

一个坏主意。实际上是一个非常糟糕的主意，网络爬虫机器人可能会意外删除行。

通过发布请求，您只需确保客户端添加元素的名称与现有的 spring 表单一致（我假设它是支持 bean 上的集合）。

# struts2 - Struts2：当复选框被选中时，有没有办法让复选框直接链接到动作类？

> ID：16210627
> 
> 赞同：1
> 
> 时间：2013-04-25T09:04:17.320
> 
> 标签：struts2

例如：

```
<s:checkbox name="checkMe" fieldValue="true" label="Check Me for testing" action="someactionclass"/> 
```

选中复选框时，控件不会重定向到特定的操作类方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-29T08:15:44.707

您必须使用 JavaScript 来解决此问题，并根据复选框的更改事件切换表单的操作。

这是一个使用 jQuery 的示例：

```
$('#checkBoxId').change(function() {
     if(this.checked) {
         // do something when checked, change action.
     } else {
         // do something else
     }
}); 
```

# laravel - Laravel 关系

> ID：16210628
> 
> 赞同：13
> 
> 时间：2013-04-25T09:04:18.110
> 
> 标签：laravel, belongs-to, relationships, laravel-4, eloquent

我一直在[文档](http://four.laravel.com/docs/eloquent#relationships)中查看 Laravel 4 中的关系，并且正在尝试解决以下问题。

我的数据库中有一个名为“事件”的表。该表有各种字段，主要包含与其他表相关的 ID。例如，我有一个“课程”表。events 表包含一个名为“course_id”的字段，该字段与 course 表中“id”字段的 ID 相关。

所以基本上，我正在就如何将两者联系起来（belongsTo()？）然后将连接的数据传递给视图提出一些建议。

到目前为止，这是我所在的位置[http://paste.laravel.com/pf3](http://paste.laravel.com/pf3)。

我希望你们能够就如何最好地解决这个问题给我一些建议。谢谢。

天然气

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-02T10:48:24.440

这与@Marko Aleksić 的答案基本相同，但是 hasOne() 和 belongsTo() 关系是正确的。

```
class Course extends Eloquent{

    protected $table = 'courses';

    public function event()
    {
        return $this->hasOne('Event'); // links this->id to events.course_id
    }
}

class Event extends Eloquent {

    protected $table = 'events';

    public function course()
    {
        return $this->belongsTo('Course'); // links this->course_id to courses.id
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T09:51:44.177

您需要在两个模型中指定关系。一个中的 belongsTo()，另一个中的 hasOne()，因为您使用的是一对一的关系

```
class Course extends Eloquent{

    protected $table = 'courses';

    public function event()
    {
        return $this->belongsTo('Event');
    }
}

class Event extends Eloquent {

    protected $table = 'events';

    public function course()
    {
        return $this->hasOne('Course');
    }

} 
```

然后在路由或控制器中调用它如下：

特定事件的过程（在这种情况下，id 为 1）

```
$course = Event::find(1)->course; 
```

特定课程的事件（在这种情况下，id 为 1）

```
$event = Course::find(1)->event; 
```

请参考 Laravel 4 文档，Eloquent ORM 部分：http: [//laravel.com/docs/eloquent#one-to-one](http://laravel.com/docs/eloquent#one-to-one)

# java - Bean scope not working

> ID：16210629
> 
> 赞同：0
> 
> 时间：2013-04-25T09:04:18.390
> 
> 标签：java, spring, session, scope, javabeans

The code shows that I want to create a loginBean that's sessions scoped. I'll show the applicationContext too and also the service and dao because there may also be a configuration error in them.

I noticed that all my beans are processed as application scoped. (Ran the project and logged in and showed my username on the header. Then I opened another browser, went to my localhost and the username was filled in..)

Anyone got any idea?

Bean:

```
package be.neoria.swissknife.bean;
import be.neoria.swissknife.model.Consultant;
import be.neoria.swissknife.model.Klant;
import be.neoria.swissknife.model.Project;
import be.neoria.swissknife.model.Taak;
import be.neoria.swissknife.service.LoginService;
import be.neoria.swissknife.service.ProjectService;
import org.hibernate.validator.constraints.NotEmpty;
import org.springframework.beans.factory.annotation.Autowired;

import javax.faces.bean.ManagedProperty;

import javax.inject.Named;
import java.io.Serializable;
import java.util.Calendar;
import java.util.Date;
import javax.enterprise.context.SessionScoped;

/**
 * Created with IntelliJ IDEA. User: Greg Date: 27/03/13 Time: 15:48 To change
 * this template use File | Settings | File Templates.
 */

@Named
@SessionScoped
public class LoginBean implements Serializable {

private final String failure = "FAILURE";
private final String success = "SUCCESS";
@NotEmpty(message = "Enter username")
private String gebruikersnaam;
@NotEmpty(message = "Enter password")
private String paswoord;
private Project project;
private Klant costumer;
private Taak taak;
private Consultant consultant;
private Taak task;
private Klant customer;
private boolean isIngelogd;
private Date today;
@ManagedProperty(value = "#{loginService}")
@Autowired
LoginService loginService;
@ManagedProperty(value = "#{projectService}")
@Autowired
ProjectService projectService;

public LoginBean() {        
}

public Klant getCustomer() {
    return customer;
}

public void setCustomer(Klant customer) {
    this.customer = customer;
}

public Project getProject() {
    return project;
}

public void setProject(Project project) {
    this.project = project;
}

public Taak getTask() {
    return task;
}

public void setTask(Taak task) {
    this.task = task;
}

public String getGebruikersnaam() {
    return gebruikersnaam;
}

public void setGebruikersnaam(String gebruikersnaam) {
    this.gebruikersnaam = gebruikersnaam;
}

public Taak getTaak() {
    return taak;
}

public void setTaak(Taak taak) {
    this.taak = taak;
}

public String getPaswoord() {
    return paswoord;
}

public void setPaswoord(String paswoord) {
    this.paswoord = paswoord;
}

public Consultant getConsultant() {
    return consultant;
}

public void setConsultant(Consultant consultant) {
    this.consultant = consultant;
}

public boolean isIngelogd() {
    return isIngelogd;
}

public void setIngelogd(boolean ingelogd) {
    isIngelogd = ingelogd;
}

public Klant getCostumer() {
    return costumer;
}

public void setCostumer(Klant costumer) {
    this.costumer = costumer;
}

public String loginConsultant() {
    consultant = loginService.loginConsultant(gebruikersnaam, paswoord);

    if (consultant == null) {
        return failure;
    } else {
        isIngelogd = true;
        return success;
    }
} 
```

LoginService:

```
package be.neoria.swissknife.service;
import be.neoria.swissknife.model.Consultant;

/**
 * Created with IntelliJ IDEA.
 * User: Greg
 * Date: 29/03/13
 * Time: 12:09
 * To change this template use File | Settings | File Templates.
 */
public interface LoginService {
    public Consultant loginConsultant(String username, String password);
} 
```

loginService implementation:

```
package be.neoria.swissknife.service;

import be.neoria.swissknife.dao.ConsultantDao;
import be.neoria.swissknife.model.Consultant;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/**
 * Created with IntelliJ IDEA.
 * User: Greg
 * Date: 29/03/13
 * Time: 12:10
 * To change this template use File | Settings | File Templates.
 */
@Transactional
@Service("loginService")
public class LoginServiceImpl implements LoginService {

@Autowired
ConsultantDao consultantDao;

@Override
public Consultant loginConsultant(String username, String password) {
    Consultant consultant = consultantDao.getConsultantByName(username);
    if (consultant.getPaswoord().equals(password)) {
        return consultant;
    } else {
        return null;
    }

} 
```

consultantDao:

```
 package be.neoria.swissknife.dao;

import be.neoria.swissknife.model.Adres;
import be.neoria.swissknife.model.Consultant;
import java.util.List;

/**
 * Created with IntelliJ IDEA. User: Greg Date: 29/03/13 Time: 12:18 To change
 * this template use File | Settings | File Templates.
 */
public interface ConsultantDao {

    public Consultant getConsultantByName(String name);
} 
```

consultantDaoImpl:

```
package be.neoria.swissknife.dao;

import be.neoria.swissknife.model.Adres;
import be.neoria.swissknife.model.Consultant;
import java.util.List;
import org.hibernate.Query;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

/**
 * Created with IntelliJ IDEA.
 * User: Greg
 * Date: 29/03/13
 * Time: 12:18
 * To change this template use File | Settings | File Templates.
 */
@Repository
public class ConsultantDaoImpl implements ConsultantDao {

@Autowired
private SessionFactory sessionFactory;

@Override
public Consultant getConsultantByName(String name) {
    Query query = sessionFactory.getCurrentSession().createQuery("from Consultant where naam=:name");
    query.setParameter("name", name);

    return (Consultant) query.uniqueResult();

    }

} 
```

applicationContext.xml (in WEB-INF), reffered to in the web.xml file

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:sec="http://www.springframework.org/schema/security"
   xsi:schemaLocation="
            http://www.springframework.org/schema/security
            http://www.springframework.org/schema/security/spring-security-3.1.xsd
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd ">

<context:component-scan base-package="be.neoria.swissknife.service"/>
<context:component-scan base-package="be.neoria.swissknife.dao"/>
<context:component-scan base-package="be.neoria.swissknife.model"/>
<context:component-scan base-package="be.neoria.swissknife.bean"/>
<context:component-scan base-package="be.neoria.swissknife.util"/>

<context:annotation-config/>

  <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/swissknife"/>
    <property name="username" value="swissknife"/>
    <property name="password" value="swissknife"/> 
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
    <property name="packagesToScan">
        <list>
            <value>be.neoria.swissknife.model</value>
            <value>be.neoria.swissknife.service</value>
            <value>be.neoria.swissknife.dao</value>
            <value>be.neoria.swissknife.model</value>
        </list>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages"/>
</bean>

<bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver" id="localeResolver" />
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:22:28.603

尝试

```
@Component
@Scope(value = "request") 
```

而不是@SessionScoped

# php - php文件操作权限被拒绝

> ID：16210631
> 
> 赞同：0
> 
> 时间：2013-04-25T09:04:23.473
> 
> 标签：php, apache, file-permissions, virtualhost

我在 Redhat Enterprise 服务器上有两个虚拟主机，其中一个可以按需要运行。第二个我在使用 PHP 执行任何类型的文件操作时遇到问题。据我所知，两个虚拟主机都设置在同一个主机上。我已检查是否已在相关文件夹/文件上正确设置了文件权限。我已经将权限设置为 777。

谁能建议我可能哪里出错了？虚拟主机设置如下：

```
<VirtualHost *:80>
 ServerName intranet
 ServerAlias intranet *.intranet
 DocumentRoot /home/burnside/public_html
 <Directory "/home/burnside/public_html">
     allow from all
     Options +Indexes
 </Directory>
</VirtualHost>

<VirtualHost *:80>
 ServerName tracker
 ServerAlias tracker *.tracker
 DocumentRoot /home/tracker/public_html
 <Directory "/home/tracker/public_html">
      Allow from all
      Options +Indexes
 </Directory>
</VirtualHost> 
```

# c++ - Poco C++ HTTPResponse how can i get the entire header map of a response?

> ID：16210633
> 
> 赞同：0
> 
> 时间：2013-04-25T09:04:30.227
> 
> 标签：c++, poco-libraries

So here is the [class](http://pocoproject.org/docs/Poco.Net.HTTPResponse.html) I need to cache the entire header map. So I figured I should extract it some how.

How can i do this, do i need to iterate them like [this](https://stackoverflow.com/questions/15991496/poco-cnet-http-get-headers-from-response), or can I get them all at once?

I intend to store the header map in a cache like :

```
 LRUPersistentCache<string, pair<HeaderMap, string > > *clientCache; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:52:37.883

您可以从 HTTPResponse 创建 NameValueCollection（它是一个类似地图的 HTTPResponse 的父级）：

```
HTTPResponse response;
// ...
NameValueCollection nvc(response);
LRUPersistentCache<string, NameValueCollection> clientCache(100);
clientCache.add("myresponse", nvc);
// ... 
```

# mysql - 如何在 MySQL 的 clob 数据中获取所有出现的字符串

> ID：16210641
> 
> 赞同：0
> 
> 时间：2013-04-25T09:04:43.863
> 
> 标签：mysql, string, clob

`'Class_Data'`我的表中有一个 clob 字段，`'School'`并且`clob`有一个标签名称为`'<Fee-Value>'`，我想从`clob`数据中选择所有出现的标签。我在 mysql 中使用了以下查询，但它只选择第一次出现的标签（有 12 次出现的值）

```
select substr(Class_Data, instr(Class_Data,'Fee-Value'),30) from  School where class='S013' and grade='A' and date ='20130301'; 
```

它显示的值是：

```
<Fee-Value>200</Fee-Value> 
```

还有11个这样的标签没有显示请建议怎么做？

# apache - Apache 正在运行但无法正常工作

> ID：16210657
> 
> 赞同：0
> 
> 时间：2013-04-25T09:05:19.573
> 
> 标签：apache, ubuntu, ubuntu-12.04

我正在使用 apache2、php5、mysql 在 ubuntu 服务器上运行一个巨大的 php 应用程序。

有时（大约每月一次）该页面无法从 Internet 访问（“它已关闭”）。奇怪的是，这`service apache2 status`表明 apache 正在运行。解决方案是始终使用重新启动 apache `service apache2 restart`，一切正常。

服务器负载最低，不能成为问题的一部分（我猜）。

我知道，这个描述没有它应该的那么详细，但我没有更多的信息。

**任何有关可能导致此问题的建议都将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-31T06:02:54.353

禁用防火墙或防病毒软件，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-21T06:10:46.553

改变`/etc/apache2/apache2.conf`=>改变所有`AllowOverride all`，

并确保`/etc/apache2/sites-available/000.default.conf`=> 验证您访问的目录的路径。

# javascript - Toggle DIV hide and show

> ID：16210660
> 
> 赞同：0
> 
> 时间：2013-04-25T09:05:22.943
> 
> 标签：javascript, jquery, html, css

I am trying to toggle DIV(hide and show) when button 'commentDIV' is pressed ..But it is not working so far...My HTML code is below. What i am trying to do here is hide/show DIV block only whose button is pressed....I don't know how to bind button to DIV....my code is able to hide the DIV not Show again...and i think it is only working for first commentDIV not for others...

```
<html>
    <head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $('.commentDIV').hide();
        $('.commentButton').click(function () {
                        $(this).next('.commentDIV').show();
                    });
        $('.closeButton').click(function () {
                        $(this).next('.commentDIV').hide();
                    });
        });

    </script>
    </head>
<body>
                    <div id="abc" style="border:2px dashed;width:600px;background:white;">
                        <table border="2px">
                            <tr>
                                <td style="text-align:center;">
                                    <div style="border:2px solid;margin:2px;padding:2px;width:60px;border-radius:10px;moz-border-radius:10px;background:#39C46E;height:50px;text-align:center;line-height: 25px;white-space:nowrap;color:white;display:inline-block;">
                                    100 %<br>Success</div>
                                    <span style="color: green">&#10004;&nbsp;Tested</span>
                                    <span>24/4/2013</span>
                                </td>
                                <td>
                                    <span id="couponTitle" >FLAT 25% OFF ON ALL MITASHI TABLETS</span><br>

                                    <span id="couponCode" style="display:inline-block;border:2px dashed;padding:5px;margin:5px;background:#39C46E;color:white">GCKSPNHIAC18</span>
                                    <br>
                                    <span style="font-size:10pt;">Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.</span>
                                </td>
                                <td style="text-align:center;width:100px">
                                    <span style="font-size:10pt;">Did this coupon work for you?</span>
                                    <br>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:5px;background:#39C46E;color:white;width:50px;">Yes</button>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:10px;background:#FF511C;color:white;width:50px;">No</button>
                                </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="text-align:right;">
                            <button type="button" class="commentButton" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Add comments</button>
                            <button type="button" class="closeButton" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Close comments</button>
                            <div class="commentDIV" style="height:300px;overflow-x:hidden;">
                                <table border=".1em">
                                    <tr>
                                        <td style="text-align:center;width:100px;height:100px;border-radius:5px;-moz-border-radius:5px;background: url(avatar.jpg) no-repeat center"></td>
                                        <td style="width:600px;">
                                            <div style="text-align:left;border-radius:5px;-moz-border-radius:5px;width:100%;overflow: auto;">Nice coupons
                                            </div>
                                        </td>
                                    </tr>
                                </table>

                                </div>
                            </td>
                        </tr>

                        </table>
                    </div>
                    <div id="abc" style="border:2px dashed;width:600px;background:white;">
                        <table border="2px">
                            <tr>
                                <td style="text-align:center;">
                                    <div style="border:2px solid;margin:2px;padding:2px;width:60px;border-radius:10px;moz-border-radius:10px;background:#39C46E;height:50px;text-align:center;line-height: 25px;white-space:nowrap;color:white;display:inline-block;">
                                    100 %<br>Success</div>
                                    <span style="color: green">&#10004;&nbsp;Tested</span>
                                    <span>24/4/2013</span>
                                </td>
                                <td>
                                    <span id="couponTitle" >FLAT 25% OFF ON ALL MITASHI TABLETS</span><br>

                                    <span id="couponCode" style="display:inline-block;border:2px dashed;padding:5px;margin:5px;background:#39C46E;color:white">GCKSPNHIAC18</span>
                                    <br>
                                    <span style="font-size:10pt;">Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.</span>
                                </td>
                                <td style="text-align:center;width:100px">
                                    <span style="font-size:10pt;">Did this coupon work for you?</span>
                                    <br>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:10px;background:#39C46E;color:white;width:50px;">Yes</button>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:10px;background:#FF511C;color:white;width:50px;">No</button>
                                </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="text-align:right;">
                            <button type="button" class="commentButton" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Add comments</button>
                            <div class="commentDIV">
                                <div>Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.</div>
                                </div>
                            </td>
                        </tr>

                        </table>
                    </div><div id="abc" style="border:2px dashed;width:600px;background:white;">
                        <table border="2px">
                            <tr>
                                <td style="text-align:center;">
                                    <div style="border:2px solid;margin:2px;padding:2px;width:60px;border-radius:10px;moz-border-radius:10px;background:#39C46E;height:50px;text-align:center;line-height: 25px;white-space:nowrap;color:white;display:inline-block;">
                                    100 %<br>Success</div>
                                    <span style="color: green">&#10004;&nbsp;Tested</span>
                                    <span>24/4/2013</span>
                                </td>
                                <td>
                                    <span id="couponTitle" >FLAT 25% OFF ON ALL MITASHI TABLETS</span><br>

                                    <span id="couponCode" style="display:inline-block;border:2px dashed;padding:5px;margin:5px;background:#39C46E;color:white">GCKSPNHIAC18</span>
                                    <br>
                                    <span style="font-size:10pt;">Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.</span>
                                </td>
                                <td style="text-align:center;width:100px">
                                    <span style="font-size:10pt;">Did this coupon work for you?</span>
                                    <br>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:10px;background:#39C46E;color:white;width:50px;">Yes</button>
                                    <button type="button" style="border-radius:5px;-moz-border-radius:10px;background:#FF511C;color:white;width:50px;">No</button>
                                </td>
                        </tr>
                        <tr>
                            <td colspan="3" style="text-align:right;">
                            <button type="button" class="commentButton" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Add comments</button>
                            <div class="commentDIV">
                                <div>Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.</div>
                                </div>
                            </td>
                        </tr>

                        </table>
                    </div>
</body>             
</html> 
```

Update: added a fiddle [here](http://jsfiddle.net/h4G6N/)

I have updated the code to add another button for closing commentDIV

Javascript is :

```
$(document).ready(function () {
        $('.commentDIV').hide();
        $('.commentButton').click(function () {
                        $(this).next('.commentDIV').show();
                    });
        $('.closeButton').click(function () {
                        $(this).next('.commentDIV').hide();
                    });
        }); 
```

and new button is :

```
<button type="button" class="closeButton" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Close comments</button> 
```

But it is not working why??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:09:59.403

您需要进行一些更改，而不是使用 id 使用类属性，因为 id 在文档中应该是唯一的

```
$(document).ready(function() {
    $(document).on('click', '.commentButton', function() {
        $(this).next('.commentDIV').toggle()
        alert("xscs");
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/6pjzR/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:10:17.210

您目前正在使用 commentButton 作为 id，它重复了更多次..当您想用 ID 调用时，它应该只访问页面一次。如果你想多次使用它应该被声明为类..所以尝试使用类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:24:09.957

这是对您的小提琴的编辑，它展示了其他人所说的答案：

[http://jsfiddle.net/h4G6N/1/](http://jsfiddle.net/h4G6N/1/)

以下是更新后的 HTML 示例：

```
<button type="button" id="commentButton" class="comment-button" style="border-radius:5px;-moz-border-radius:10px;color:white;width:100px;">Add comments</button>
    <div id="commentDIV" class="comment-block">
        Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.Get the Samsung Galaxy Ace Duos S6802 (black) listed on the landing page for Rs. 8495 (Originally for Rs. 9990). Offer valid till 25th April midnight.
    </div>
</button> 
```

这是JS：

```
$(function() {
    $('.comment-button').click(function() {
        $(this).next(".comment-block").toggle();
        alert("xscs");    
    });
}); 
```

本质上：您需要使用类选择器而不是 ID 选择器，因为您的 ID 不是唯一的（这是另一个问题）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T09:10:53.277

尝试这个：

```
$(document).ready(function () {
    $('.commentButton').click(function () {
        $(this).next('.commentDIV').toggle();
    });
}); 
```

1.  使用[toggle()](http://api.jquery.com/toggle/) - 显示或隐藏匹配的元素。
2.  使用[next()](http://api.jquery.com/next/) - 获取紧随其后的`commentButton`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T09:08:20.587

您调用`hide()`而不是`toggle()`. 隐藏只会隐藏元素。切换将在隐藏时显示它，并在显示时隐藏它。

此语法 `$('#commentDIV')`负责查找 id 为 commentDIV 的元素。id 元素在 HTML 中应该是唯一的，所以 jquery 假定它只有一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T09:12:22.440

jQuery 附带了另一种完全满足您需要的方法：[`.toggle()`](http://api.jquery.com/toggle/)

但是，您的 HTML 多次使用相同的 ID“commentDIV”。考虑将它们转换为类，或者我们使用另一个选择器来选择要切换的一个 div。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-25T09:15:15.100

id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。

所以将 id="commentDIV" 更改为 class="commentDIV" 并尝试。

代码：

```
$('.commentButton').click(function() {
    var commentDiv = $(this).closest('tr').find('.commentDIV');

    if (commentDiv.is(":visible")) {
        commentDiv.hide();
    } else {
        commentDiv.show();
    }
    alert("xscs");
}); 
```

[http://jsfiddle.net/KesY6/1/](http://jsfiddle.net/KesY6/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T09:12:20.610

演示::

[http://jsfiddle.net/Praveen16oct90/KesY6/](http://jsfiddle.net/Praveen16oct90/KesY6/)

使用此编码并尝试它的工作原理

```
 $(document).ready(function() {

        $('#commentButton').click(function() {

    $('#commentDIV').toggle();

    });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-25T09:16:20.733

jQuery[已弃用](http://api.jquery.com/category/deprecated/deprecated-1.8/) `toggle()`的方法。改用更好`.toggleClass()`。

```
.show{
   display: block;
}
.hide{
    display:none;
}
    $("#commentButton").click(function(){
        $("#commentDIV").toggleClass("show hide");
    }); 
```

# android - Gradually increase/decrease animation speed? [Android]

> ID：16210668
> 
> 赞同：1
> 
> 时间：2013-04-25T09:05:44.430
> 
> 标签：android, animation

I was working on animated effect on android, I would like to know if there's any other way to gradually increase/decrease the animation speed?

Is it possible to specify like first 3 second rate of change was slow, and the rest goes fast?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:12:52.360

使用[插值器](http://developer.android.com/reference/android/view/animation/Interpolator.html)。对于您的情况，我会推荐[AccelerateDecelerateInterpolator](http://developer.android.com/reference/android/view/animation/AccelerateDecelerateInterpolator.html)

```
Animation anim = AnimationUtils.loadAnimation(this, R.anim.your_animation);
anim.setInterpolator(new AccelerateDecelerateInterpolator());
image.startAnimation(anim); 
```

至于插值器，你可以自己构建！

```
public class MyInterpolator extends Interpolator {

    public MyInterpolator(int valueCount) {
        super(valueCount);
    }

    public float getInterpolation (float input) {
        return (float)(Math.cos((input + 1) * Math.PI) / 2.0f) + 0.5f;
    }
} 
```

使用[Wolfram Alpha](http://www.wolframalpha.com/input/?i=%28cos%28%28x%2b1%29%2api%29%20%2b%201%29/2)，您可以使用参数。

# javascript - 在 div 中提交表单，使用 ENTER 提交时无法使用 IE8

> ID：16210678
> 
> 赞同：1
> 
> 时间：2013-04-25T09:06:23.683
> 
> 标签：javascript, css, forms, internet-explorer

我有一个表单（登录、注册等），它位于 div 中。

div 拥有`visibility: hidden`并`visibility:visible`通过 javascript。

在**IE8**中，当用户完成表单（用户名、密码）然后使用`ENTER`按键提交时，它不会起作用（如果他按下登录按钮就会起作用）。

html:

```
<body onload="show_login();">
<div id="login" class="login_div">
<form id="form_login" method="post" action="index.php">
<input name="Email" id="Email" type="text" maxlength="100" size="30" />
<input name="Password" id="Password" type="password" maxlength="100" size="30" />
<input name="FromSubmit" id="FromSubmit" type="hidden" value="FromSubmit"/>
<button id="bLogin" type="submit"><span id="sLogin">Log In</span></button>
</form>
</div>
</body> 
```

CSS：

```
.login_div {
    visibility: hidden;
} 
```

js：

```
function show_login() {
    document.getElementById("login").style.visibility = "visible";
} 
```

也许有人以前遇到过这个问题？

有什么方法可以在不影响 JS 逻辑的情况下解决它？

**编辑**

如果我删除文档类型，它确实有效，但我不想删除它。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

# sql - 将值插入 varbinary 时出现重复问题

> ID：16210694
> 
> 赞同：4
> 
> 时间：2013-04-25T09:07:14.593
> 
> 标签：sql, sql-server-2008, duplicates, varbinary

我们面临一个非常奇怪的问题。

当表列如下时，我们的 mssql 2008 R2 db 中有一个表：

1.  用户 ID - 整数
2.  用户名 - varbinary(256)
3.  用户类型 - 整数

**并且 userName 列是唯一的**

我们再次对表执行以下查询：

```
insert into table_name (userId, userName, userType) values ( 1 ,  0x5942C803664B00, 0) 
```

在该查询之后，我们执行以下查询：

```
insert into table_name (userId, userName, userType) values ( 2 ,  0x5942C803664B, 0) 
```

我们得到以下错误：

> 无法在具有唯一索引“table_name _userName_u”的对象“table_name”中插入重复的键行。

虽然 0x5942C803664B 和 0x5942C803664B00 是不同的值？？

任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:09:45.043

varbinary 列中的尾随“零字节”0x00 与 varchar 列中的尾随空格“”一样微不足道。因此，您的值实际上是重复的。

换句话说，您的两个值是（按字节顺序）

```
1  2  3  4  5  6  7  --- bytes in the binary value
59 42 C8 03 66 4B
59 42 C8 03 66 4B 00 
```

出于比较的目的，最后一个字节（0 的 8 位）被认为是无关紧要的。这与您获得的原因相同

```
select CASE WHEN 'abc ' = 'abc' then 'SAME' else 'DIFFERENT' end
-- select case when 0x5942C803664B = 0x5942C803664B00 then 'same' else 'different' end

result
======
SAME 
```

为了使尾随零字节有意义，您可以作弊并在两个部分中添加相同的内容。

```
select case when 0x5942C803664B + 0xff = 0x5942C803664B00 + 0xff
            then 'same'
            else 'different' end   -- different

select case when 0x5942C80366AA + 0xff = 0x5942C80366AA + 0xff
            then 'same'
            else 'different' end   -- same 
```

# c# - 如何使用 EPIServer webservice 获取动态属性

> ID：16210698
> 
> 赞同：-1
> 
> 时间：2013-04-25T09:07:35.467
> 
> 标签：c#, .net, web-services, episerver

我正在尝试使用 EPIServer Webservice 获取动态属性。我唯一能做的就是使用创建新属性

```
PageStoreService.RawProperty dynProperty = new PageStoreService.RawProperty();
dynProperty.IsDynamicProperty = true; 
```

但我不知道如何获得房产。我的问题是这个。什么是正确的做法

```
DynamicProperty dynProperty = DynamicProperty.Load(therootnode, "MyDynamicProp"); 
```

使用 EPIServer 网络服务？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:39:57.100

[与这个](https://stackoverflow.com/questions/16210553/how-to-get-startpage-rootpage-using-episerver-webservice/16211057#16211057)问题非常相似。您可以推出自己的服务来获取此信息

```
[WebService(Namespace=http://yournamespace/")]
public class PageReferenceService : System.Web.Services.WebService
{ 
    [WebMethod()]
    public PageReference GetDynamicProperty(PageReference rootNode, string propertyName)
    {
        return DynamicProperty.Load(rootNode, propertyName);
    }  
} 
```

（未经测试）

# wpf - （使用图表的问题） WPF .net 4.5

> ID：16210699
> 
> 赞同：1
> 
> 时间：2013-04-25T09:07:37.763
> 
> 标签：wpf, charts, .net-4.5

我一直在尝试设置一个函数来绘制一些数据系列，而图表控件总是给出一些错误，这真的很烦人，因为这个控件没有合适的教程。

到目前为止，我有这个代码：

```
using System.Windows.Controls.DataVisualization.Charting;

public DataTable results;

public void plot ( Chart chr ) {    
    int cols = results.Columns.Count;
    int rows = results.Rows.Count;
    for ( int j = 1 ; j < cols ; j++ ) {
        //Add serie
        string name = results.Columns[j].ColumnName;

        //add data for the serie
        List<PlotValue> values = new List<PlotValue>( );
        for ( int i = 0 ; i < rows ; i++ ) {
            DateTime? x = results.Rows[i][0] as DateTime?; //time
            double y = double.Parse( results.Rows[i][j].ToString( ) ); //Value
            values.Add( new PlotValue( x , y ) );
        }

        LineSeries serie = new LineSeries();
        serie.LegendItems.Add( name );
        serie.ItemsSource = values;
        chr.Series.Add( serie );
    }
} 
```

“结果”是一个由另一个异步进程修改的 DataTable，所以我只想在另一个进程完成时读取它。

我还定义了这个类：

```
public class PlotValue {
    public DateTime? Date { get; set; }
    public double Value { get; set; }

    public PlotValue ( DateTime? date , double val ) {
        Date = date;
        Value = val;
    }
} 
```

到目前为止，错误是它告诉我没有轴（这是有道理的），我不知道如何添加它们。

请我想在设计时使用 NO XAML，在运行时只使用 C# 代码，因为系列的数量可能会改变。

或者，我会更直接地转向任何其他人都有经验的控制。

我在.net 4.5上，图表控件属于[System.Windows.Controls.DataVisualization.Charting]

提前致谢！！

# c# - 为 datagridview 组合框单元格设置不同的数据源后出错

> ID：16210704
> 
> 赞同：0
> 
> 时间：2013-04-25T09:07:49.227
> 
> 标签：c#, datagridview, datagridcomboboxcolumn

我试图在`DataGridView`数据库表的控件名称和字段中显示。在表格的每一行名称显示在第一个单元格中，第二列允许选择该表格的任何字段。

为此，我正在处理“DataGridView.CellBeginEdit”事件并使用字段名称填充单元格的 DataSource。当我尝试编辑这些单元格时，提供的列表会正确显示，并且可以很好地选择。

但是，当我尝试在另一行中执行相同操作时，我开始收到`DataError`有关已编辑单元格的事件。

DataRow 的事件参数在`Context`字段中有“Formatting|Display”，并且有消息“DataGridViewComboBoxCell 中不允许值”（或接近它）。在调试中，单元格事件引用具有正确`Value`的字段，但它`DataSource`是 null 并且它的`FormattedValue`是空字符串。并且之前显示的文本变为空白。

这应该如何正确解决？我是否应该派生自己的自定义 datagridview 单元格，该单元格显示文本但具有组合框编辑器？如果是这样，怎么做？

编辑：这是我目前正在使用的代码：

```
public class FieldDataNeededEventArgs: EventArgs
{
    public List<string> FieldNames
    {
        get; private set;
    }
    public string TableName
    {
        get; private set;
    }
    public ReferenceFieldDataNeededEventArgs(stringdata)
        : base()
    {
        FieldNames = new List<string>();
        TableName= data;
    }
}

...

public event EventHandler<FieldDataNeededEventArgs> FieldDataNeeded =
        new EventHandler<FieldDataNeededEventArgs>((sender, args) => { });

...
    //handler for CellBeginEdit
    //dgvMatch - dataGridView, DocsReferenceToTableMatch is class that datagridview is bound to
    private void dgvMatch_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        if (e.ColumnIndex == dgvMatch.Columns["TableKey"].Index)
        {
            DocsReferenceToTableMatch data = dgvMatch.Rows[e.RowIndex].DataBoundItem as DocsReferenceToTableMatch;
            FieldDataNeededEventArgs ea = new FieldDataNeededEventArgs(data.TableName);
            FieldDataNeeded(this, ea);
            var cell = (dgvMatch.Rows[e.RowIndex].Cells[e.ColumnIndex] as DataGridViewComboBoxCell);
            cell.DataSource = ea.FieldNames;
        }
    }
    //example handler for the FieldDataNeeded event
    static void ld_ReferenceFieldDataNeeded(object sender, ReferenceFieldDataNeededEventArgs e)
    {
        for (int i = 0; i < 4; i++)
        {
            e.FieldNames.Add(String.Format("{0}_fld{1}", e.ReferenceName, i));
        }
    } 
```

# java - Java Incompatible Types Error Arraylists

> ID：16210706
> 
> 赞同：1
> 
> 时间：2013-04-25T09:07:53.563
> 
> 标签：java, bluej

I'm using BlueJ as an IDE and whenever I try to compile this Java code it gives me an error: `incompatible types` highlighting the brackets of:

```
s.getCourtSportArrayList() 
```

Why this is happening?

```
public void showCourtBookings()
{
 for(Sport s : sportList)
 {
   for(Court c : s.getCourtSportArrayList() )
   {
     System.out.println("Court: " + c.getCourt);
     int i;
     i=1;
     for(Booking b : c.getBookings())
     {  
         System.out.println("Booking: " + i + "Start Time: " + b.getTimeStart() + "End Time :" + b.getEndTime());
         i = i + 1;
     }
   }
 }  
} 
```

This is a class `Club`, it contains two ArrayLists;

```
private ArrayList<Member> MemberList;
private ArrayList<Sport> sportList; 
```

The `Sport` class has the following ArrayList:

```
private ArrayList<Court> CourtList = new ArrayList<Court>(); 
```

The `Court` class has these ArrayLists:

```
private ArrayList<Booking> listBooking; 
```

Hopefully you can point me in the right direction. Thanks!

Edit: this is the code,

```
public ArrayList getCourtSportArrayList()
{
  return CourtList;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:12:01.857

这`getCourtSportArrayList()`似乎是您的 Sport 课程的一种方法。这个方法需要返回一个`List<Court>`它现在显然没有的。

结果该方法应如下所示：

```
public List<Court> getCourtSportArrayList()
{
   return CourtList;
} 
```

旁注：除非您使用 ArrayList 的特定实现细节，否则您应该指定通用类型`List<Court>`而不是。`ArrayList<Court>`

# c++ - C++ : Vector of template class

> ID：16210707
> 
> 赞同：12
> 
> 时间：2013-04-25T09:08:09.507
> 
> 标签：c++, generics, vector

I have a template class named Cell as follows:-

```
template<class T>class Cell
{
    string header, T data;
} 
```

Now I want another class Named Row. Row will have a vector named Cells such that I can add both Cell and Cell type elements to that vector. Is it possible?

If so, how can I do that? Thanks in advance.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-25T09:26:37.997

使用您提供的额外细节，前两个答案将不起作用。您需要的是一种称为单元变体的类型，然后您可以拥有这些类型的向量。例如：-

```
enum CellType
{
  Int,
  Float,
  // etc
};

class Cell
{
  CellType type;
  union
  {
    int i;
    float f;
    // etc
  };
};

class Vector
{
  vector <Cell> cells;
}; 
```

然而，添加新类型是一件很痛苦的事情，因为它需要大量代码来维护。另一种方法可以使用具有公共基类的单元格模板：-

```
class ICell
{
  // list of cell methods
};

template <class T>
class Cell : public ICell
{
  T data;
  // implementation of cell methods
};

class Vector
{
  vector <ICell *> cells;
}; 
```

这可能会更好，因为您最初更新的代码较少以添加新的单元格类型，但您必须在单元格向量中使用指针类型。如果您按值存储单元格`vector <ICell>`，那么您将由于[对象切片](http://en.wikipedia.org/wiki/Object_slicing)而丢失数据。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-13T03:43:33.867

这在 C++ 中**不可能**，但在 Java/Python 中可能是因为：在 C++ 向量中，STL 容器的存储（由 vector::data() 返回）包含顺序打包的所有对象实例。其中每个元素必须具有相同的大小。这使得寻址快速方便。因此，假设您定义了一个模板类 A，

```
template <class T>
class A{
  int id;
  T obj;
}; 
```

它的大小将取决于模板变量“T obj”。推送不同模板类型 T 的同一个类 A 会使向量中的每个元素具有不同的大小，因此，这是不可能的。唯一的方法是使用基类的 shared_ptr 或 unique_ptr 的向量。C++11 和 Boost 都支持 shared_ptr 和 unique_ptr。每个派生类元素可以有不同的模板类型。这样，当基类指针的析构函数被调用时，派生类的析构函数就会被调用。例如，

```
#include <memory>
#include <vector>
#include <iostream>
#include <string>

using namespace std;

class A{};

template <class T>
class AImpl : public A{
public:
    T obj;
    AImpl(T _obj):obj(_obj){}
    ~AImpl(){
        cout << "Deleting " << obj << endl;
    }
};

int main(int argc, char** argv)
{
    AImpl <string>* a1 = new AImpl <string> ("string1234");
    AImpl <int>* a2 = new AImpl <int> (1234);
    AImpl <double>* a3 = new AImpl <double> (1.234);
    vector <shared_ptr<A>> As;
    As.push_back(shared_ptr<A>(a1));
    As.push_back(shared_ptr<A>(a2));
    As.push_back(shared_ptr<A>(a3));
} 
```

请记住使用 -std=c++11 进行编译以启用 C++11。

输出：

```
Deleting string1234
Deleting 1234
Deleting 1.234 
```

你得到你想要的！:)

在 Java/Python 中，每个类对象变量实际上都是一个指针，因此，A 的 Java 数组或 A 的 Python 列表等效于 A 的指针的 C++ 数组。因此，无需显式创建即可获得基本相同的功能shared_ptrs。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T09:14:11.167

另一个答案很好，但您可能想要：

```
template<class T>
class Row
{
private:
    class Cell {
        string header;
        T data;
    }

    std::vector<Cell> cells;
    ...
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T09:09:37.050

像这样的东西？

```
template<class T>
class Row
{
private:
   std::vector<Cell<T> > cells;
}; 
```

好吧，这个答案是不正确的。

所以，如果你想存储在一个`vector`不同的单元格中——你应该使用一些动态类型标识（你可以使用一个基类并将指向它的指针存储在向量中，它只使用虚函数，在所有派生类中都被覆盖，你可以存储类似的内容`boost::any`并为每个插入的元素保存一些`type-identification`内容，以便将它们转换为真实类型并使用它）。

# php - 在php中更改上传文件的名称

> ID：16210713
> 
> 赞同：0
> 
> 时间：2013-04-25T09:08:29.107
> 
> 标签：php, file-upload

我正在使用下面的代码使用 php 上传文件并将文件名插入数据库。实际上我想在上传时重命名文件，并想将新的重命名名称插入数据库。我知道如何将名称插入数据库，但我不知道如何重命名上传的文件名。请帮忙。我正在使用下面的代码：

```
$target = "uploads/"; 
$target = $target . basename( $_FILES['uploaded']['name']); 

move_uploaded_file($_FILES['uploaded']['tmp_name'], $target);
$add_file = $_FILES['uploaded']['name']; 
```

非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:12:53.590

这是你想要的？

```
<?php
    rename("/tmp/uploaded_file.txt", "/home/user/login/uploaded/67A7466B576.txt");
?> 
```

所以新代码将是：

```
$target = "uploads/"; 
$target = $target . basename( $_FILES['uploaded']['name']); 
rename($_FILES['uploaded']['tmp_name'], $target);
$add_file_to_db = $target; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:14:13.210

这可能对您有帮助：

```
$uploaded_file = time()."__".$_FILES['uploaded']['name']; 
```

这只是在文件名之前添加时间。

例子：

如果我上传了`AnalysisReport.doc`文件，那么它就像`1354173106__AnalysisReport.doc`

# php - 如何在wordpress中获取帖子的图片网址？

> ID：16210714
> 
> 赞同：0
> 
> 时间：2013-04-25T09:08:30.287
> 
> 标签：php, wordpress, pinterest

我正在为 Wordpress 开发一个 Pinterest pinit 插件。Pinterest pinit 按钮需要图像 URL 和发布 URL……我怎样才能获得图像 URL？

我使用了下面的代码，但没有成功：

```
$pid=get_the_ID();
$image_id = get_post_thumbnail_id($pid);
$image_url = wp_get_attachment_image_src($image_id);
echo $image_url[0]; 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:24:13.763

你也试过这个吗？

```
$url = wp_get_attachment_url( get_post_thumbnail_id($post->ID) );
<img src="<?php echo $url; ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T11:02:41.910

您也可以像这样使用 $catposts 是一个帖子特色图像查询。

```
$category_id = 'your_category_id'; $NUMBEROFPOSTS = '4'; $catposts = get_posts('category='.$category_id."&order=DESC&numberposts=".$NUMBEROFPOSTS); 

foreach ($catposts as $item) :

     echo '<li class="active" style="height: 100px; width: 71px;">';

     echo '<a href="'.get_permalink( $item->ID ).'">';

     echo '<img src="'.wp_get_attachment_url( get_post_thumbnail_id($item->ID)).'">';

     echo '</a>';

     echo '</li>';

endforeach; 
```

# php - php xml dom getElementById 和 DOMXpath 查询无法获取元素

> ID：16210716
> 
> 赞同：4
> 
> 时间：2013-04-25T09:08:38.843
> 
> 标签：php, xml, domdocument, getelementbyid, domxpath

我在制作一个替换 XML 文件中问题和答案元素的函数时遇到了一些问题。我做了很多学习 php dom 的研究，但我一直坚持制作这个功能。问题是，当我试图通过属性 id 获取父元素行时，它返回 null 或者当我使用 xpath 时，它返回一个空对象。我不知道在获得正确的父元素后该功能是否可以正常工作，但这是我认为的下一步。

我的 XML 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <row id="1">
    <question>Wat doet de vuilnisman?</question>
    <answer>Hij tilt de vuilnisbak in de vuilnisauto.</answer>
  </row>
  <row id="2">
    <question>Wat zegt de tandarts vaak?</question>
    <answer>U mag nu spoelen.</answer>
  </row>
</root> 
```

和我的 php 函数：

```
//modifies rows
function modifyRows($file, $rowIds, $rowText) {
    $xmlDoc = new DOMDocument();
    $xmlDoc->preserveWhiteSpace = false;
    $xmlDoc->formatOutput = true;   
    $xmlDoc->load($file);
    foreach($rowIds as $rowId) {
        $parent = $xmlDoc->getElementById($rowId);
        for($i=0;$i<count($rowText);$i++) {
            $newQ = $xmlDoc->createElement('question');
            $qText = $xmlDoc->createTextNode($rowText[$i]);
            $qText = $newQ->appendChild($qText);
            $newA = $xmlDoc->createElement('answer');
            $aText = $xmlDoc->createTextNode($rowText[$i++]);
            $aText = $newA->appendChild($aText);
        }
        $oldQ = $parent->getElementsByTagName('question');
        $oldA = $parent->getElementsByTagName('answer');        
        $parent->replaceChild($newQ, $oldQ);
        $parent->replaceChild($newA, $oldA);
    }   
    $xmlDoc->save($file);
} 
```

$rowIds 是一个数组，其中包含在数组中修改的行数和 rowText，其中包含问题和答案字符串，如 array(0=>"question",1=>"answer") 等。XML 文件内容可以通过添加或删除行来变大或变小。我已经为此制作了“工作”功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-30T21:12:45.813

我已经解决了 hakre 和互联网的问题。所以对于有同样问题的人来说，这就是我解决它的方法。

```
 function getElementById($id) {
        $xpath = new DOMXPath($this->xmlDoc);
        return $xpath->query("//*[@id='$id']")->item(0);
    } 
```

# java - 条码扫描器 (ZXing) 崩溃

> ID：16210727
> 
> 赞同：0
> 
> 时间：2013-04-25T09:09:06.140
> 
> 标签：java, android, barcode, zxing

首先我想告诉你我已经尽我所能。关注互联网上的 10 个教程和堆叠的 10 个线程。仍然没有成功。

我知道你们建议通过意图使用扫描，但在我的情况下，它不是一个选项，我需要在我的应用程序中使用它。

我已经下载了 zxing 库（2.1）并按照[本教程进行操作](http://phpmyweb.net/2012/07/18/integrating-zxing-in-your-android-app-as-standalone-scanner/)

当我在 Galaxy S3 或 Galaxy Tab 10.1 上运行此代码作为调试时，程序在冻结 20 秒后崩溃，当我单击应该启动结果意图的按钮时：`com.google.zxing.client.android.SCAN`或`com.google.zxing.client.android.CaptureActivity`.

请注意，我已经从 Barcode Scanner 应用程序中复制了所有资源，例如哔声、xml 文件等。

[崩溃日志](http://pastebin.com/CvuusVbc)

我的代码如下：

**MainActivity.java**

```
package com.example.philipscan;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void scanNow(View view)
    {
        Log.e("test", "button works!");

        Intent intent = new Intent("com.google.zxing.client.android.CaptureActivity");
        startActivityForResult(intent, 3);
    } 

    public void onActivityResult(int requestCode, int resultCode, Intent intent) 
    {
        Log.e("xZing", "Back");
        if (requestCode == 3) 
        {
            if (resultCode == RESULT_OK)
            {
                String contents = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                Log.e("xZing", "contents: "+contents+" format: "+format);
                // Handle successful scan
            } 
            else if (resultCode == RESULT_CANCELED)
            {
                // Handle cancel
                Log.e("xZing", "Cancelled");
            }
        }
    }
} 
```

**安卓清单**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.philipscan"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

        <uses-feature android:name="android.hardware.camera"/>
          <uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>
          <uses-feature android:name="android.hardware.camera.flash" android:required="false"/>
          <uses-feature android:name="android.hardware.screen.landscape"/>
          <uses-feature android:name="android.hardware.wifi" android:required="false"/>
          <uses-feature android:name="android.hardware.touchscreen" android:required="false"/>

        <uses-permission android:name="android.permission.CAMERA"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.VIBRATE"/>
        <uses-permission android:name="android.permission.FLASHLIGHT"/>
        <uses-permission android:name="android.permission.READ_CONTACTS"/>
        <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.philipscan.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.zxing.client.android.SCAN"/>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

        </activity>
        <activity
            android:name="com.google.zxing.client.android.CaptureActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.zxing.client.android.SCAN"/>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

        </activity>
    </application>

</manifest> 
```

**我的 SRC 文件夹**

![我的档案清单](https://i.stack.imgur.com/4g1TI.jpg)

我非常感谢我能得到的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:54:19.883

尝试创造`Intent`另一种方式

```
Intent scanIntent = new Intent("com.google.zxing.client.android.SCAN");
scanIntent.putExtra("SCAN_MODE", "ONE_D_MODE"); 
```

然后像往常一样 startActivityForResult() 。ONE_D_MODE 是扫描 Code39 等一维条码的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:28:05.723

删除您从我们的项目中复制的所有这些代码。没必要，你不理解它，也不应该在许可下以这种方式重用：[https ://code.google.com/p/zxing/wiki/LicenseQuestions](https://code.google.com/p/zxing/wiki/LicenseQuestions)

特别是你不应该复制清单，也不允许复制 UI。

相反，它要简单得多，因为您似乎无论如何都在尝试使用 Intents：[https ://code.google.com/p/zxing/wiki/ScanningViaIntent](https://code.google.com/p/zxing/wiki/ScanningViaIntent)

# javascript - 如何在 jsp url 中隐藏用户 ID 和其他参数？

> ID：16210729
> 
> 赞同：1
> 
> 时间：2013-04-25T09:09:15.287
> 
> 标签：javascript, jsp, url, web, uri

我有一个 URL，用户可以使用它访问我的 jsp Web 应用程序

http://testerpages.com/testpage/menu1?userId=27

我如何向用户隐藏 userID=27 并显示类似的 url

[http://testerpages.com/testpage/menu1](http://testerpages.com/testpage/menu1)

有什么方法可以隐藏用户的参数，或者我们可以忽略 id，但是如果我们在 url 中直接向前端用户显示 id 参数，就会对安全造成威胁

我使用这个页面调用

```
<a href="#" onclick="goToURL('${param.userId}','${contextPath}/menu1?userId=')">Menu1</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T16:17:44.783

```
HEX(AES_ENCRYPT(userid,'"key"')) 
```

在您的 sql 或 mysql 查询中使用它将加密您的用户 ID 我在 mysql 中使用它应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:16:32.513

您可以将此参数作为 GET 传输，这些参数不会显示在 url 中，但也很容易阅读和修改。相反，我会为会话 ID 使用某种加密和验证代码。这将防止用户和攻击者访问其他用户会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:21:43.367

您可以在用户登录后将用户 ID 存储在会话中。当用户访问菜单页面时，您仍然可以从会话中获取 ID，而无需将其放入 URL 中。

# c# - Rounding a number with special conditions

> ID：16210730
> 
> 赞同：0
> 
> 时间：2013-04-25T09:09:18.930
> 
> 标签：c#, rounding

I need to create a function which rounds numbers like this:

33120->34000

21001->22000

here are no decimal points but if there exist a number other than 1 in the last 3 digits the 4th digit must be incremented and the last 3 digits should be set to 0.

i need something optimized, i don't want to traverse each digit of each number since i have over 800,000 number.

thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:11:57.547

```
var result =  Math.Ceiling((double) x/1000)*1000; 
```

# java - Calculate number of words in an ArrayList while some words are on the same line

> ID：16210735
> 
> 赞同：2
> 
> 时间：2013-04-25T09:09:28.580
> 
> 标签：java

I'm trying to calculate how many words an ArrayList contains. I know how to do this if every words is on a separate line, but some of the words are on the same line, like:

```
hello there
blah
cats dogs 
```

So I'm thinking I should go through every entry and somehow find out how many words the current entry contains, something like:

```
 public int numberOfWords(){
    for(int i = 0; i < arraylist.size(); i++) {
        int words = 0;
        words = words + (number of words on current line);
    //words should eventually equal to 5
    }
return words;
} 
```

Am I thinking right?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:11:59.913

`int words`您应该在循环之外声明和实例化`int`is 在循环的每次迭代期间不会重新分配。您可以使用`for..each`语法循环遍历列表，这样就无需将`get()`项目从列表中移出。要处理一行`split`中的多个单词`String`into an`Array`并计算`Array`.

```
public int numberOfWords(){
    int words = 0;
    for(String s:arraylist) {         
      words += s.split(" ").length;
    }
    return words;
} 
```

**全面测试**

```
public class StackTest {

    public static void main(String[] args) {
        List<String> arraylist = new ArrayList<String>();
        arraylist.add("hello there");
        arraylist.add("blah");
        arraylist.add("   cats    dogs");
        arraylist.add(" ");
        arraylist.add(" ");
        arraylist.add(" ");

        int words = 0;
        for(String s:arraylist) {
            s = s.trim().replaceAll(" +", " "); //clean up the String
            if(!s.isEmpty()){ //do not count empty strings
               words += s.split(" ").length;
            }
        }
        System.out.println(words);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:12:30.287

应该是这样的：

```
public int numberOfWords(){
    int words = 0;
    for(int i = 0; i < arraylist.size(); i++) {
        words = words + (number of words on current line);
    //words should eventually equal to 5
    }
return words;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:49:52.193

我认为这可以帮助你。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.StringTokenizer;
public class LineWord {

public static void main(String args[]) {
    try {
        File           f        = new File("C:\\Users\\MissingNumber\\Documents\\NetBeansProjects\\Puzzlecode\\src\\com\\test\\test.txt");    // Creating the File passing path to the constructor..!!
        BufferedReader br       = new BufferedReader(new FileReader(f));    //
        String         strLine  = " ";
        String         filedata = "";

        while ((strLine = br.readLine()) != null) {
            filedata += strLine + " ";
        }

        StringTokenizer stk   = new StringTokenizer(filedata);
        List <String>  token = new ArrayList <String>();

        while (stk.hasMoreTokens()) {
            token.add(stk.nextToken());
        }

        //Collections.sort(token);
        System.out.println(token.size());
        br.close();
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
}
} 
```

因此，在这种情况下，您将从文件中删除数据，并在标记它们后将它们存储在列表中，只需计算它们，如果您只想从控制台获取输入，请使用 Bufferedreader，标记它们，用空格分隔，放入列表，简单get size。

希望你得到你正在寻找的东西。

# networking - 在另一个程序中使用 serialforwarder 数据

> ID：16210737
> 
> 赞同：0
> 
> 时间：2013-04-25T09:09:31.590
> 
> 标签：networking, port, tinyos, nesc

我如何构建[串行转发器](http://docs.tinyos.net/tinywiki/index.php/Mote-PC_serial_communication_and_SerialForwarder)或使用它将接收到的数据转发到另一个程序以进行某些处理？

如何解析数据并将其用作另一个程序（如 Matlab 或 c# 或 java 应用程序）的输入数据。哪个协议用于解析接收到的数据？

最后一个问题：它只适用于基站微尘吗？我可以为任何微粒建造一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T15:45:39.277

你必须彻底阅读串行堆栈......它不是很容易，但它确实可以。

可以直接从串口读取。在这种情况下，您不需要串行转发器。有几件事情需要照顾。

例如，如果您想读取发送到 PC 串行端口的串行消息（USB 传感器板就像串行一样工作，因为它们使用 USB 到串行转换器，如 FTDI 芯片）。

在 C#（Java 等）中，您可以读取串行端口中的字节流。您可以解析此字节流以提取 tinyos 的标准串行消息。

[这在TEP #113](http://tinyos.cvs.sourceforge.net/viewvc/tinyos/tinyos-2.x/doc/html/tep113.html)中以某种方式进行了解释，尽管它存在一些问题，但是您应该能够找到这些问题并使您的程序正常工作。

正如 TEP 113 中所述，标准串行数据包类似于：

> 7e 40 09 00 是 05 7d 5d 06 01 02 03 04 05 7e

这意味着，一个数据包以十六进制`7E`（我相信它的 126 或 127）开头，也以`7E`. 最后 2 个字节是`CRC`数据包。因此，您可以在您的 c# 程序中在遇到流时开始从串行端口`7E`读取，并在到达流中的下一个时停止读取`7E`。介于两者之间的一切都将是您的数据包。

您必须注意的`escaping`是，如果 a`7E`是您的数据包内容的一部分，请不要与开始和结束直径计混淆，它将被转义为其他内容......这也在 TEP 113 中进行了解释。

我相信有一些 C++ 代码用于计算 CRC，您可以轻松地将其转换为 C# 或 Java 代码。

还要检查源代码，`Serial.h`其中包含有关如何在 TinyOS 中形成串行数据包的一些详细信息。

# python - Implementation of numpy in1d for 2D arrays?

> ID：16210738
> 
> 赞同：6
> 
> 时间：2013-04-25T09:09:35.680
> 
> 标签：python, numpy

I have a 2D numpy array S representing a state space, with 80000000 rows (as states) and 5 columns (as state variables).

I initialize K0 with S, and at each iteration, I apply a state transition function f(x) on all of the states in Ki, and delete states whose f(x) is not in Ki, resulting Ki+1\. Until it converges i.e. Ki+1 = Ki.

Going like this would take ages:

```
K = S
to_delete = [0]
While to_delete:
    to_delete = []
    for i in xrange(len(K)):
        if not f(i) in K:
        to_delete.append(K(i))
    K = delete(K,to_delete,0) 
```

So I wanted to make a vectorized implementation :

slice K in columns, apply f and, join them once again, thus obtaining f(K) somehow.

The question now is how to get an array of length len(K), say Sel, where each row Sel[i] determine whether f(K[i]) is in K. Exactly like the function in1d works.

Then it would be simple to make

```
K=K[Sel]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T16:21:09.727

您的问题很难理解，因为它包含无关信息并包含拼写错误。`K`如果我理解正确，您只需要一种有效的方法来对 2D 数组的行（在本例中为和的行的交集`f(K)`）执行集合操作。

如果您创建[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)视图，则可以使用[numpy.in1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html)执行此操作。

代码：

如果这是`K`：

```
In [50]: k
Out[50]:
array([[6, 6],
       [3, 7],
       [7, 5],
       [7, 3],
       [1, 3],
       [1, 5],
       [7, 6],
       [3, 8],
       [6, 1],
       [6, 0]]) 
```

这是`f(K)`（对于这个例子，我从第一个 col 中减去 1，然后在第二个 col 中加 1）：

```
In [51]: k2
Out[51]:
array([[5, 7],
       [2, 8],
       [6, 6],
       [6, 4],
       [0, 4],
       [0, 6],
       [6, 7],
       [2, 9],
       [5, 2],
       [5, 1]]) 
```

`K`然后您可以通过执行以下操作找到所有行`f(K)`：

```
In [55]: k[np.in1d(k.view(dtype='i,i').reshape(k.shape[0]),k2.view(dtype='i,i').
reshape(k2.shape[0]))]
Out[55]: array([[6, 6]]) 
```

`view`并`reshape`创建平面结构化视图，以便每一行显示为单个元素`in1d`。 `in1d`创建`k`匹配项的布尔索引，用于指定索引`k`并返回过滤后的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T21:12:45.630

不确定我是否完全理解您的问题，但如果 Paul 的解释是正确的，则可以使用[numpy_indexed](https://github.com/EelcoHoogendoorn/Numpy_arraysetops_EP)包在单个可读行中有效地解决并完全矢量化：

```
import numpy_indexed as npi
K = npi.intersection(K, f(K)) 
```

此外，这适用于任何类型或形状的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T20:25:56.470

上面的答案很棒。

但是，如果不想与结构化数组混合并想要**一个不关心数组类型或数组元素尺寸的解决方案**，我想出了这个：

```
k[np.in1d(list(map(np.ndarray.dumps, k)), list(map(np.ndarray.dumps, k2)))] 
```

基本上，`list(map(np.ndarray.dumps, k))`而不是`k.view(dtype='f8,f8').reshape(k.shape[0])`.

考虑到这个解决方案要慢约 50 倍。

```
k = np.array([[6.5, 6.5],
       [3.5, 7.5],
       [7.5, 5.5],
       [7.5, 3.5],
       [1.5, 3.5],
       [1.5, 5.5],
       [7.5, 6.5],
       [3.5, 8.5],
       [6.5, 1.5],
       [6.5, 0.5]])
k = np.tile(k, (1000, 1))

k2 = np.c_[k[:, 0] - 1, k[:, 1] + 1]

In [132]: k.shape, k2.shape
Out[132]: ((10000, 2), (10000, 2))

In [133]: timeit k[np.in1d(k.view(dtype='f8,f8').reshape(k.shape[0]),k2.view(dtype='f8,f8').reshape(k2.shape[0]))]
10 loops, best of 3: 22.2 ms per loop

In [134]: timeit k[np.in1d(list(map(np.ndarray.dumps, k)), list(map(np.ndarray.dumps, k2)))]
1 loop, best of 3: 892 ms per loop 
```

对于小输入来说它可能是微不足道的，但对于操作来说，它需要 1 小时 20 分钟而不是 2 分钟。

# php - 如何将 PayPal IPN 转发到另一个 PHP 文件？

> ID：16210741
> 
> 赞同：0
> 
> 时间：2013-04-25T09:09:40.700
> 
> 标签：php, post, curl, paypal-ipn

我们正在更新我们的系统，旧的 IPN 需要以不同的方式处理。但是，我无法更改原始 IPN 发送地址。所以我必须从 old_IPNProcessor.php 中“反弹”IPN 消息并将其转发到 new_IPNProcessor.php。由于超出此问题范围的技术原因，我无法修改 old_IPNProcessor.php。

根据我的阅读，我必须使用 cURL 来完成此操作。我已经看到了一些代码，但我不确定它是如何实现的。例如，下面代码中的 $post var（来自[https://stackoverflow.com/a/6213693/1390395](https://stackoverflow.com/a/6213693/1390395)）是直接来自 PayPal 的原始 json。它必须在 PHP 数组中才能工作吗？

```
function forwardIPN($post){
        $url = "new_IPNProcessor.php";

        // $post is the ipn message from PayPal
        $content = $post;

        $curl = curl_init($url);
        curl_setopt($curl, CURLOPT_HEADER, false);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_HTTPHEADER,
                array("Content-type: application/json"));
        curl_setopt($curl, CURLOPT_POST, true);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

        $json_response = curl_exec($curl);

        $status = curl_getinfo($curl, CURLINFO_HTTP_CODE);

        if ( $status != 201 ) {
            die("Error: call to URL $url failed with status $status, response $json_response, curl_error " . curl_error($curl) . ", curl_errno " . curl_errno($curl));
        }

        curl_close($curl);

        $response = json_decode($json_response, true);

    } 
```

# firefox - Safari 将浮动 div 发送到新行，chrome 和 IE 都可以

> ID：16210744
> 
> 赞同：1
> 
> 时间：2013-04-25T09:09:51.513
> 
> 标签：firefox, safari, css-float

情况：

**父 div：300px**

**孩子 1：50 像素宽度，5 像素边框**

**孩子 2：232px 宽度，8px 边距**

在 chrome 和 IE 中运行良好，但 Safari 和 firefox 将第二个放到新行。这有什么原因吗？如果我将 1 px 移到整体上，比如留出 7 px 的左边距，它们就会就位。此外，萤火虫中的测量值完美匹配，所以我不明白为什么这两个不适合同一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:31:57.637

尝试从父 div 和子元素中删除所有其他填充或边距。这些是由默认浏览器样式引起的。（或使用 CSS Reset 对所有元素执行此操作）

另外，请注意，如果您有十进制数字，Safari 和 Opera 会在测量方面撒谎。它们向上或向下取整，它们不像 Firefox 或 Chrome 那样精确。

# php - PHP datetime 值未作为参数传入

> ID：16210747
> 
> 赞同：0
> 
> 时间：2013-04-25T09:09:55.770
> 
> 标签：php

我在 php 中使用 DateTime 对象来获取日期范围

但是我无法将 DateTime 对象的值传递给函数。

当我尝试将其分配给变量时，该变量为空

代码如下

```
$date1 = new DateTime('2013-04-11');
$test = $date1->setTime($i, 59);
echo $test; 
```

有人知道如何将 $date1 分配给变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:13:58.437

这将返回一个`DateTime`没有`toString`方法的对象。

以上将产生一个致命错误（你应该真正[启用错误](http://php.net/manual/en/function.error-reporting.php#V85096)）：

> 可捕获的致命错误：第 7 行的 /code/KHCgOS 中的类 DateTime 的对象无法转换为字符串
> 
> PHP Catchable 致命错误：第 7 行 /code/KHCgOS 中的类 DateTime 对象无法转换为字符串

您应该执行以下操作：

```
echo $test->format('H:i:s d-m-Y'); 
```

更多信息：[http ://codepad.viper-7.com/TNHGlj](http://codepad.viper-7.com/TNHGlj)

*注意：在生产机器上，您还应该启用错误报告，但您应该记录它们而不是显示它们*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:15:26.633

使用[http://www.php.net/manual/en/datetime.format.php](http://www.php.net/manual/en/datetime.format.php)

```
 $date1 = new DateTime('2013-04-11');
   $date1->setTime($i, 59);
   echo $date1->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:17:12.520

从[DateTime::setTime 函数文档](http://php.net/manual/en/datetime.settime.php)中，它返回一个 DateTime 对象，因此为了打印您必须使用[DateTime::format 函数](http://www.php.net/manual/en/datetime.format.php)的值。这是一个工作示例：

```
<?php
$i = 14;

$date1 = new DateTime('2013-04-11');
$date1->setTime($i, 59);

echo $date1->format('Y-m-d H:i:s') . "\n"; 
```

返回

```
2013-04-11 14:59:00 
```

# android - Android：按下后退按钮时出错，即使在完成上一个活动之后也是如此

> ID：16210758
> 
> 赞同：1
> 
> 时间：2013-04-25T09:10:19.627
> 
> 标签：android, android-intent

我在使用 getIntent.getextra() 的行附近的某处遇到空指针异常。

这是错误日志：

```
 04-25 14:19:43.718: E/AndroidRuntime(10031): FATAL EXCEPTION: main
 04-25 14:19:43.718: E/AndroidRuntime(10031): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.attendence/com.example.attendence.UserPage}:  java.lang.NullPointerException
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.os.Handler.dispatchMessage(Handler.java:99)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.os.Looper.loop(Looper.java:130)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread.main(ActivityThread.java:3687)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at java.lang.reflect.Method.invokeNative(Native Method)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at java.lang.reflect.Method.invoke(Method.java:507)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at dalvik.system.NativeStart.main(Native Method)
 04-25 14:19:43.718: E/AndroidRuntime(10031): Caused by: java.lang.NullPointerException
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at com.example.attendence.UserPage.onCreate(UserPage.java:52)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
 04-25 14:19:43.718: E/AndroidRuntime(10031):   ... 11 more 
```

这是我用来在我的第一个活动中调用第二个活动（称为 UserPage）的代码：

```
 startActivity(new Intent(HelloUser.this, UserPage.class));
            intent= new Intent(HelloUser.this, UserPage.class);
            intent.putExtra("title11", "p");
            intent.putExtra("name", et.getText().toString().trim());
            startActivity(intent); 
            finish(); 
```

如您所见，我正在调用finish（），因此后退按钮不应在下一个活动中起作用。

这是称为 Userpage 的第二个活动，其中出现错误：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.userpage);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    title11= (String)getIntent().getStringExtra("title11");
    name= (String)getIntent().getStringExtra("name");
    if(title11.equals("new"))
    {
        title11=null;
        UserPage.this.runOnUiThread(new Runnable() {
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(UserPage.this);
                builder.setTitle("Welcome");
                builder.setMessage("Hello "+name)  
                       .setCancelable(false)
                       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {
                           }
                       });                     
                AlertDialog alert = builder.create();
                alert.show();               
            }
        });
    }
    t1=(TextView)findViewById(R.id.titlename);
    t2=(TextView)findViewById(R.id.gname);
    t1.setText(name);
    t2.getBackground().setAlpha(55);

    t2.setOnClickListener(new OnClickListener() {
       @Override
       public void onClick(View v) {

           startActivity(new Intent(UserPage.this, CreateGroup.class));
       }
    });

}
} 
```

当我按下返回按钮时，“if(title11.equals("new"))”行出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:16:15.640

```
startActivity(new Intent(HelloUser.this, UserPage.class));
            intent= new Intent(HelloUser.this, UserPage.class);
            intent.putExtra("title11", "p");
            intent.putExtra("name", et.getText().toString().trim());
            startActivity(intent); 
            finish(); 
```

您启动了两次活动，所以第一个开始的找不到`title11`。试试这个：

```
 intent= new Intent(HelloUser.this, UserPage.class);
                intent.putExtra("title11", "p");
                intent.putExtra("name", et.getText().toString().trim());
                startActivity(intent); 
                finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:20:56.793

你开始了 2 次活动。`NullPointerException`由第一个启动的活动引发，因为没有`title11`为该活动设置`Intent`.

此外，如果完成的唯一目的是确保 HelloUser 活动永远不会进入“后退按钮历史记录”，那么最好`android:noHistory="true"`在清单中为该活动设置而不是当前的实现。

# php - 从 DateTime() 获取超过 30/31 的天数，因此它不会延续到几个月

> ID：16210762
> 
> 赞同：0
> 
> 时间：2013-04-25T09:10:31.563
> 
> 标签：php, date, datetime, timestamp, unix-timestamp

我正在使用 DateTime() 计算两个日期之间的差异，它工作正常。问题是我希望天数格式能够超过一整月，因此 30/31 或更高。

```
$now = new DateTime();
$future_date = new DateTime($contest->expires_at);

$interval = $future_date->diff($now);
$enddate = $interval->format("%m month, %d days, %h hours, %i minutes"); 
```

当前的问题是，当我不显示月份时，天数最多只能达到 30/31，并且任何超出的内容都将被结转以使新的月份重新计算剩余天数的天数。我希望能够以这种格式显示 42 天的差异为 6 周：

```
$enddate = $interval->format("%d days, %h hours, %i minutes"); 
```

是否有快速解决此问题的方法，或者我是否需要手动将时间戳转换为秒并为此使用我自己的函数和模数运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:20:57.363

你可以试试：

```
$enddate = $interval->format("%a days, %h hours, %i minutes"); 
```

请参阅手册中的[DateInterval::format](http://www.php.net/manual/en/dateinterval.format.php)。

**笔记**

如果您在 Windows 上工作，请注意该[**错误。**](https://bugs.php.net/bug.php?id=51184)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:42:56.870

这应该可以解决您的问题：

```
$now = new DateTime();
$future_date = new DateTime();

// a period of 2 months
$addPeriod = new DateInterval('P2M');

// adding the period
$future_date->add($addPeriod);

// get the differnce
$interval = $future_date->diff($now);

echo($interval->days) . ' days'; 
```

对于今天：`echo`返回“61 天”

// 编辑

为避免遇到 dataInterval-Bug，您可以使用：

```
$now = new DateTime();
$future_date = new DateTime();

// a period of 2 months
$addPeriod = new DateInterval('P2M');

// adding the period
$future_date->add($addPeriod);

// get the difference in second
$diffTimestamp = $future_date->getTimestamp() - $now->getTimestamp();

// convert to days
// 1 day = 86.400 seconds
$diffDays = $diffTimestamp/86400;

echo(floor($diffDays)) . ' days'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T14:52:00.387

更新我的 php 版本，因为这是我旧版本中的一个错误，现在它可以完美运行。

[如何从 PHP 的 DateTime::diff 获取聚合天数？](https://stackoverflow.com/questions/2519261/how-to-get-aggregate-days-from-phps-datetimediff)

# c# - 没有 app.config 的实体框架代码优先

> ID：16210771
> 
> 赞同：5
> 
> 时间：2013-04-25T09:10:46.117
> 
> 标签：c#, .net, linq, entity-framework, app-config

我希望有人能够帮助我，因为我似乎完全陷入了困境。

对于我们公司即将开展的项目，我们希望将 Entity Framework 5 与代码优先方法一起使用。我玩了一会儿，每次尝试将 EF 与我们现有的库一起使用时，我都失败了，因为 EF 似乎严重依赖现有的 app.config。

在我们公司，我们有一个内部数据库库，它允许我们连接到各种数据源和数据库技术，利用数据库提供商的 MEF（托管扩展框架）的优势。我只需传递一些数据库设置，例如主机（或文件）、目录、用户凭据和数据库提供程序名称，库会查找适当的插件并返回自定义连接字符串或 IDbConnection。我们希望将此库与 EF 一起使用，因为它使我们能够灵活地选择我们使用的数据库，并在运行时更改数据库。

所以。我看到一个典型的 DbContext 对象在构造函数中没有参数。它会自动在 app.config 中查找适当的连接字符串。我们不喜欢这样的事情，所以我更改了默认构造函数以获取传递给 DbContext 基类的 DbConnection 对象。没有成交。

当代码优先模型更改时会出现问题。EF 会自动注意到这一点并查找迁移类/配置。但是：典型的迁移类需要上下文的默认无参数构造函数！太遗憾了！

因此，我们使用 IDbContextFactory 接口构建自己的迁移类。但同样，这个 IDbContextFactory 似乎也需要一个无参数的构造函数，否则我无法添加迁移或更新数据库。

此外，我制作了自己的数据迁移配置器，在其中传递上下文以及目标数据库。问题就在这里：无论我尝试什么，它都找不到任何迁移类。

我完全被卡住了，因为似乎使用 EF 的唯一方法是将连接字符串保存在 app.config 中。这很愚蠢，因为我们需要在运行时更改数据库连接，而 app.config 对默认用户是只读的！

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T11:32:16.637

答案在这里提供

[https://stackoverflow.com/a/15919627/941240](https://stackoverflow.com/a/15919627/941240)

诀窍是稍微修改默认`MigrateDatabaseToLatestVersion`初始化程序，以便：

*   数据库总是被初始化...
*   ...使用当前上下文中的连接字符串

仍然会创建一个新的`DbMigrator`数据上下文，但会根据初始化程序从您的上下文中复制连接字符串。我什至能够缩短代码。

就这样：

```
public class MasterDetailContext : DbContext
{
    public DbSet<Detail> Detail { get; set; }
    public DbSet<Master> Master { get; set; }

    // this one is used by DbMigrator - I am NOT going to use it in my code
    public MasterDetailContext()
    {
        Database.Initialize( true );
    }

    // rather - I am going to use this, I want dynamic connection strings
    public MasterDetailContext( string ConnectionString ) : base( ConnectionString )
    {
        Database.SetInitializer( new CustomInitializer() );
        Database.Initialize( true );
    }

    protected override void  OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
}

public class CustomInitializer : IDatabaseInitializer<MasterDetailContext>
{

    #region IDatabaseInitializer<MasterDetailContext> Members

    // fix the problem with MigrateDatabaseToLatestVersion 
    // by copying the connection string FROM the context
    public void InitializeDatabase( MasterDetailContext context )
    {            
        Configuration cfg = new Configuration(); // migration configuration class
        cfg.TargetDatabase = new DbConnectionInfo( context.Database.Connection.ConnectionString, "System.Data.SqlClient" );

        DbMigrator dbMigrator = new DbMigrator( cfg );
        // this will call the parameterless constructor of the datacontext
        // but the connection string from above will be then set on in
        dbMigrator.Update();             
    }

    #endregion
} 
```

客户端代码：

```
 static void Main( string[] args )
    {

        using ( MasterDetailContext ctx = new MasterDetailContext( @"Database=ConsoleApplication801;Server=.\SQL2012;Integrated Security=true" ) )
        {
        }

        using ( MasterDetailContext ctx = new MasterDetailContext( @"Database=ConsoleApplication802;Server=.\SQL2012;Integrated Security=true" ) )
        {
        }
    } 
```

运行这将导致根据迁移配置创建和迁移两个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:33:06.120

它需要一个无参数的构造函数才能调用它。您可以做的是`DbConntectionFactory`在空构造函数中提供默认值，例如：

```
public DbContext()
{
    IDbContextFactory defaultFactory; //initialize your default here
    DbContext(defaultFactory);
}

public DbContext(IDbContextFactory factory)
{
} 
```

# .net - Are the method names and parameter names case sensitive in a SOAP message

> ID：16210772
> 
> 赞同：1
> 
> 时间：2013-04-25T09:10:45.607
> 
> 标签：.net, wcf, asmx

If I were to change the case of a method name and parameters, would this adversely affect clients making use of a asmx or WCF web service?

```
public string getSTRING(int INPUT)
{
    return INPUT.ToString();
} 
```

to....

```
public string GetString(int input)
{
    return input.ToString();
} 
```

Would clients needed to regenerate their proxy objects to make use of the changed methods?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T10:13:53.947

是的，服务器端的参数名称应该匹配（包括大小写）参数名称，在操作合同中定义。以及方法名称。

如果您需要控制它 - 您可以使用 `MessageParameterAttribute`

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.messageparameterattribute%28v=vs.90%29.aspx)：

> 操作签名中的**参数名称**的值是**合同的一部分，并且区分大小写**。当您需要区分本地参数名称和描述客户端应用程序操作的元数据时，请使用此属性。

# neo4j - CypherQuery returns empty result in JavaEmbedded, but correct result in Neoclipse

> ID：16210781
> 
> 赞同：0
> 
> 时间：2013-04-25T09:11:06.443
> 
> 标签：neo4j, resultset, cypher, graph-databases

I have a strange problem with a cypher query. The query works fine in Neoclipse and returns the correct result. But in java embedded mode the result is empty. I can't figure out the problem. Is there a query character limit in java embedded or anything similar?

Here is the cypher query:

```
 START 
    typeNode6=node(6) ,
    containerNode=node(9) ,
    typeNode35=node(35) ,
    typeNode15=node(15) ,
    typeNode18=node(18) ,
    typeNode33=node(33) 
    MATCH (node6)-[:TYPE]->(typeNode6) ,
    (containerNode)-[:CONTAINS*]->(node6) ,
    (node35)-[:TYPE]->(typeNode35) ,
    (node6)-[:`http://www.test.test/types/s3/media#actors`]->(node35) ,
    (node15)-[:TYPE]->(typeNode15) , 
    (node35)-[:`http://www.test.test/types/s3/media#impersonatedBy`]->(node15) ,
    (node18)-[:TYPE]->(typeNode18) , 
    (node15)-[:`http://www.test.test/types/common#namedBy`]->(node18) ,
    (node33)-[:TYPE]->(typeNode33) , 
    (node6)-[:`http://www.test.test/types/s3/media#runtime`]->(node33)  
    WHERE 
    node6.`http://www.test.test/types/s3/media#releaseYear`! = 1988 
AND node18.`http://www.test.test/types/common#firstName`! = 'Robert' 
AND node18.`http://www.test.test/types/common#lastName`! = 'Davi' 
AND node33.`http://www.test.test/types/common#intValue`! = 131 RETURN node6"; 
```

Here is my java test-class:

```
@Test
    public void queryExecute() {
        ExecutionResult result, result2;
        ExecutionEngine engine;
        String query = "START typeNode6=node(6) ,containerNode=node(9) ,typeNode35=node(35) ,typeNode15=node(15) ,typeNode18=node(18) MATCH (node6)-[:TYPE]->(typeNode6) ,(containerNode)-[:CONTAINS*]->(node6) ,(node35)-[:TYPE]->(typeNode35) , (node6)-[:`http://www.test.test/types/s3/media#actors`]->(node35) ,(node15)-[:TYPE]->(typeNode15) , (node35)-[:`http://www.test.test/types/s3/media#impersonatedBy`]->(node15) ,(node18)-[:TYPE]->(typeNode18) , (node15)-[:`http://www.test.test/types/common#namedBy`]->(node18)  WHERE node18.`http://www.test.test/types/common#firstName`! = 'Robert' AND node18.`http://www.test.test/types/common#lastName`! = 'Davi' RETURN node6";
        String query2 = "START typeNode6=node(6) ,containerNode=node(9) ,typeNode35=node(35) ,typeNode15=node(15) ,typeNode18=node(18) ,typeNode33=node(33) MATCH (node6)-[:TYPE]->(typeNode6) ,(containerNode)-[:CONTAINS*]->(node6) ,(node35)-[:TYPE]->(typeNode35) , (node6)-[:`http://www.test.test/types/s3/media#actors`]->(node35) ,(node15)-[:TYPE]->(typeNode15) , (node35)-[:`http://www.test.test/types/s3/media#impersonatedBy`]->(node15) ,(node18)-[:TYPE]->(typeNode18) , (node15)-[:`http://www.test.test/types/common#namedBy`]->(node18) ,(node33)-[:TYPE]->(typeNode33) , (node6)-[:`http://www.test.test/types/s3/media#runtime`]->(node33)  WHERE node6.`http://www.test.test/types/s3/media#releaseYear`! = 1988 AND node18.`http://www.test.test/types/common#firstName`! = 'Robert' AND node18.`http://www.test.test/types/common#lastName`! = 'Davi' AND node33.`http://www.test.test/types/common#intValue`! = 131 RETURN node6";
        engine = new ExecutionEngine(svrInstance.getNeoGraphdb());
        result = engine.execute(query);
        result2 = engine.execute(query2);
        Assert.assertNotNull(result);

        System.out.println("============== CYPHER QUERY TEST ==============");
        System.out.println("uncomplicated: ");
        System.out.println(result.toString());
        System.out.println("complicated: ");
        System.out.println(result2.toString());
        System.out.println("============== CYPHER QUERY TEST ==============");

    } 
```

And this is the output from the java console:

```
============== CYPHER QUERY TEST ==============
uncomplicated: 
+---------------------------------------------------------------------------------------------------------------------------------------------------+
| node6                                                                                                                                             |
+---------------------------------------------------------------------------------------------------------------------------------------------------+
| Node[7]{http://www.test.test/types/common#id:"movie_1",http://www.test.test/types/s3/media#releaseYear:1988,type:"instance",instanceId:"movie_1"} |
+---------------------------------------------------------------------------------------------------------------------------------------------------+
1 row
138 ms

complicated: 
+-------+
| node6 |
+-------+
+-------+
0 row
4 ms

============== CYPHER QUERY TEST ============== 
```

Both queries (in java) should return the same result (At least in Neoclipse). The difference is that the "complicated query" got more "WHERE" conditions.

By the way the queries are generated dynamically from java, but this shouldn't be the problem, because they work in Neoclipse. (And I always used the same database location.)

Thank you for helping! Greetings Max

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:13:27.287

所以，我可以弄清楚，这两个查询都适用于 Neo4jServer 版本 1.7.2。版本 1.8.2 一定有问题！！

# c# - Attribute to generate compilerwarning for a method in class

> ID：16210783
> 
> 赞同：1
> 
> 时间：2013-04-25T09:11:08.083
> 
> 标签：c#, .net

I have a class, where I use the singleton-pattern. The class looks like

```
public class MessageAccess
{
    private static MessageAccess instance;
    public static MessageAccess Instance
    {
        get { return instance ?? (instance = new MessageAccess()); }
    }

    private MessageAccess()
    {

    }

    public void Initialize(string data)
    {
        //...
        isInitialized = true;
    }

    private bool isInitialized;

    public void ReadData1()
    {
        // This Method can always be called
    }

    public void ReadData2()
    {
        // This Method can only be called, if Initialize was called. Otherwise an exception will be thrown
    }
} 
```

Is it possible to generate a compiler-warning if the Method `Initialize` is never called

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:42:18.103

虽然我理解你的观点，但我认为这样的警告不会像你想象的那么方便。恐怕 .NET 框架由于几个明确的原因不能满足这种类型的警告（请参阅此链接：http: [//blogs.msdn.com/b/csharpfaq/archive/2004/03/ 19/why-doesn-tc-warn-about-unused-methods.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/19/why-doesn-t-c-warn-about-unused-methods.aspx)）。

有人可能会认为缺少此功能是错失良机，但事实并非如此。您的类 ,`MessageAccess`是公共的，将被编译成（比方说）一个 dll。即使您在编译 dll 时出现此警告，您也不希望它在使用该 dll 的`Initialize`方法（也是公共的）编译某些外部代码时出现。您基本上不能保证没有其他代码会使用该方法，这是不出现此警告的更好理由之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:15:38.420

如果该类不从程序集外部使用，您可以将其设为`internal`. 在这种情况下，如果未调用该方法，代码分析将生成警告“避免未调用的私有代码”。

# ember.js - Use "subcontrollers" in EmberJS

> ID：16210784
> 
> 赞同：1
> 
> 时间：2013-04-25T09:11:08.217
> 
> 标签：ember.js

i'm having some trouble designing an EmberJS layout. I have a view divided in two parts :

*   a content library on the left
*   a playlist editor on the right

Currently, those two elements share the same controller.

I can't figure how to use two different controllers for those two sides to be able to re-use the content library in other views or even having a view with two playlist editors.

My root view looks like this so far :

```
<script type="text/x-handlebars" data-template-name="playlists">
    <div id="library">{{template library}}</div>
    <div id="playlistEditor">{{template playlisteditor}}</div>
</script> 
```

I saw docs about the [`{{control}}`](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_control) helper, but it is unstable and i'm not sure this is what i'm looking for.

Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:31:55.817

好的，我找到了答案，我不得不使用`{{render}}`助手，就像这样：

```
<script type="text/x-handlebars" data-template-name="playlists">
    <div id="library">{{render "library" library}}</div>
    <div id="playlistEditor">{{render "playlisteditor" playlist}}</div>
</script> 
```

然后，在我的路线中：

```
App.PlaylistsRoute = Ember.Route.extend({
  setupController: function(controller) {
     controller.set('playlist', playlist);
     controller.set('library', library);
  }
}); 
```

然后，这个 EmberJS 将自动连接`App.PlaylisteditorController`、`App.LibraryController`和 视图`playlisteditor`和`library`. 惊人的。

# android - Gson fromJson() returns object with null attrubutes

> ID：16210787
> 
> 赞同：14
> 
> 时间：2013-04-25T09:11:13.137
> 
> 标签：android, json, deserialization, gson

I'm trying to create some Java objects using this line:

`Quiz currentQuiz = gson.fromJson(json, Quiz.class);`

But the all I get is this:

![Quiz object after fromJson](https://i.stack.imgur.com/I3Fxj.png)

Here are my object classes:

Quiz:

```
public class Quiz {

private String ref;
private String broadcast_dt;
private Question[] questions;

public Quiz() {
    // TODO Auto-generated constructor stub
}

public String getRef() {
    return ref;
}

public void setRef(String ref) {
    this.ref = ref;
}

public String getBroadcast_dt() {
    return broadcast_dt;
}

public void setBroadcast_dt(String broadcast_dt) {
    this.broadcast_dt = broadcast_dt;
}

public Quiz(String ref, String broadcast_dt, Question[] questions) {
    super();
    this.ref = ref;
    this.broadcast_dt = broadcast_dt;
    this.questions = questions;
}

public Question[] getQuestions() {
    return questions;
}

public void setQuestions(Question[] questions) {
    this.questions = questions;
} 
} 
```

Question:

```
public class Question {

private int question_number;
private String question_text;
private Answer[] answers;

public Question(){

}

public Question(int question_number, String question_text, Answer[] answers) {
    super();
    this.question_number = question_number;
    this.question_text = question_text;
    this.answers = answers;
}

public int getQuestion_number() {
    return question_number;
}

public void setQuestion_number(int question_number) {
    this.question_number = question_number;
}

public String getQuestion_text() {
    return question_text;
}

public void setQuestion_text(String question_text) {
    this.question_text = question_text;
}

public Answer[] getAnswers() {
    return answers;
}

public void setAnswers(Answer[] answers) {
    this.answers = answers;
}
} 
```

Answer:

```
public class Answer {

private String answer_text;
private boolean correct_yn;

public Answer(){

}

public String getAnswer_text() {
    return answer_text;
}

public void setAnswer_text(String answer_text) {
    this.answer_text = answer_text;
}

public boolean isCorrect_yn() {
    return correct_yn;
}

public void setCorrect_yn(boolean corrent_yn) {
    this.correct_yn = corrent_yn;
}
} 
```

And here is my JSON:

```
{
"quiz": {
    "ref": "45g36745bu46",
    "broadcast_dt": "2013-03-03T00:00:00Z",
    "questions": [
        {
            "question_number": 1,
            "question_text": "Example question one",
            "answers": [
                {
                    "answer_text": "Answer one",
                    "correct_yn": false
                },
                {
                    "answer_text": "Answer two",
                    "correct_yn": true
                },
                {
                    "answer_text": "Answer three",
                    "correct_yn": false
                }
            ]
        },
        {
            "question_number": 2,
            "question_text": "Question number two",
            "answers": [
                {
                    "answer_text": "Something",
                    "correct_yn": false
                },
                {
                    "answer_text": "Something else",
                    "correct_yn": false
                },
                {
                    "answer_text": "Another thing",
                    "correct_yn": true
                }
            ]
        },
        {
            "question_number": 3,
            "question_text": "And a third question with some additional question text appearing here.",
            "answers": [
                {
                    "answer_text": "Cow",
                    "correct_yn": false
                },
                {
                    "answer_text": "Pig",
                    "correct_yn": true
                }
            ]
        }
    ]
}
} 
```

Any ideas why this happens? I don't get an error message or LogCat output.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T09:47:36.357

从您的 json 中：我看到，在根级别它类似于

{quiz:{quizObject 有 ref 等，}}

因此，您需要降低一级才能开始使用 gson 进行解析。

所以，试试这个，

```
JSONObject quizObject = json.get("quiz");

Quiz currentQuiz = gson.fromJson(quizObject.toString(), Quiz.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T07:11:25.987

就我而言，我已删除

```
@SerializedName("OpCode")
@Expose 
```

我的模型类中高于

```
private Integer opCode; 
```

线。所以 Gson 无法解析它，所以我的属性为空。当我添加这些行时，它修复了。

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2013-04-25T10:27:00.360

尝试这个...

```
JSONObject js = new JSONObject(jsonString);
for (int i = 0; i < js.length(); i++) {
  JSONObject quiz = js.getJSONObject("quiz");
    for (int j = 0; j < js.length(); j++) {
       String broadcast_dt = quiz.getString("broadcast_dt");
       String ref = quiz.getString("ref");
       JSONArray questions = quiz.getJSONArray("questions");
       for (int k = 0; k < questions.length(); k++) {
        String value = questions.getString(k);
        JSONObject quest = new JSONObject(questions.getString(k));
        int question_number = quest.getInt("question_number");
        String question_text = quest.getString("question_text");
        JSONArray answers = quest.getJSONArray("answers");
        for (int m = 0; m < answers.length(); m++) {
            JSONObject ans = new JSONObject(answers.getString(m));
            Boolean correct_yn = ans.getBoolean("correct_yn");
            String answer_text = ans.getString("answer_text");
        }
    }

}

} 
```

# android - Android Listview 行的 ImageView OnClick 延迟

> ID：16210788
> 
> 赞同：2
> 
> 时间：2013-04-25T09:11:18.043
> 
> 标签：android, listview, optimization, onclick, imageview

与[此线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0M3IDRhw8Kw)类似，我在 ListView 行内的视图的单击响应中存在延迟。

此外，当列表视图之外的视图获得焦点时，单击侦听器会立即触发。

我的问题是，除了完全放弃 ListView 之外，还有其他方法可以解决这个问题，如上面链接中所建议的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T13:29:29.780

我遇到了同样的问题，我只是在其他人的帮助下解决了它。

**您似乎使用哈希数组来保存 Listview 行，以避免在实现getView()**方法时多次膨胀新视图。

但是使用哈希数组会使监听器的状态混乱，因此会导致您描述的问题。

所以删除哈希数组，只在 getView() 方法中返回行视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T03:25:01.933

我有同样的问题。我希望我能帮助你。我通过使用 OnTouchListener 解决了它，每一行，我设置一个 OnTouchListener，如下所示：

```
@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    if (motionEvent.getAction() == MotionEvent.ACTION_DOWN)
    {
        lastTimeTouch = System.currentTimeMillis();
    }
    else
    if (motionEvent.getAction() == MotionEvent.ACTION_UP) {
        long c = System.currentTimeMillis();
        if (c- lastTimeTouch< 2000)
            onClick(view);//call your onClick() funtion here
        lastTimeTouch = 0;
    }
    return true;
} 
```

# c# - Apply filter to business object

> ID：16210796
> 
> 赞同：-2
> 
> 时间：2013-04-25T09:11:44.763
> 
> 标签：c#

Can someone help me how to filter data from business object?

Here is my sample code:

```
var allemps = empService.GetAllEmployees();
IEnumerable<Emp> emps;
if (allemps.IsFreeOfErrors)
{
       emps = allemps.Value.Contains("abc");
} 
```

here `allemps.Value` is returning all employee data. But I want to filter `emps` whose name starts with "abc". How do I do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:14:50.647

这是[linq to object 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

```
var allemps = empService.GetAllEmployees();
IEnumerable<Emp> emps;
if (allemps.IsFreeOfErrors)
{
   emps = allemp.Where(w=>w.Value.StartWith("abc"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:14:59.903

```
emps = allemps.Where(e => e.Value.StartWith("abc")); 
```

# java - 在字符串数组中传递查询字符串值

> ID：16210797
> 
> 赞同：0
> 
> 时间：2013-04-25T09:11:45.217
> 
> 标签：java, jsp

在字符串数组中传递查询字符串值时遇到问题。声明如下。

```
words[0]=request.getParameter("word1");
words[1]=request.getParameter("word2"); 
```

上面的语句给了我一个例外并给出了0值。请在这方面帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T09:14:39.957

可能的解决方案/原因：

1.  确保您的**数组已初始化**：`String[] words = new String[2]`。
2.  确保您在其中提交了您的**`input`元素。`form`**

# javascript - ruby array to javascript - Rails

> ID：16210798
> 
> 赞同：7
> 
> 时间：2013-04-25T09:11:45.780
> 
> 标签：javascript, ruby-on-rails, ruby

I am trying to pass a ruby array to a js view (*js.erb* format) but it doesn't work at all.

`var array = "<%= @publishers_list %>";`

The variable *array* is just set as a *string* with all the array's values in it.

Is there a way to keep the array format ?

### Edit

I just realized it was because of my array format.

`[{:label => "name1", :value => value1}, {:label => "name2", :value => value2}]`

I tried to pass a simple array like:

`[1,2,3]`

and it worked fine.

The question is now: how can I pass this kind of array ? I really need to keep these hashes in it because I want to put it as a source of a jQuery autocomplete.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T09:13:58.203

```
var array = <%= escape_javascript @publisher_list.to_json %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:14:13.663

尝试这个：

```
var array = <%= j @publishers_list.to_json %> 
```

`j`是简写`escape_javascript`（感谢评论者 lfx_cool）。

请参阅文档：[http ://api.rubyonrails.org/classes/ERB/Util.html](http://api.rubyonrails.org/classes/ERB/Util.html)

要稍微清理一下你的视图代码，你也可以在你的控制器中`@publishers_list`变成。`json`这样，在您看来，您可以使用：

```
var array = <%= j @publishers_list %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:57:55.587

只需在 Controller 的特定操作中定义一个数组，例如：

```
def rails_action
  @publishers_list = []
  # write some code to insert value inside this array
  # like: 
  # @publishers.each do |publisher|
  # @publishers_list << publisher.name
  # end 
end 
```

与此操作关联的 js 文件，例如：**rails_action.js.erb**

现在使用您的代码

```
var array = [];
array = "<%= @publishers_list %>"; 
```

谢谢。

# report - How-to generate a JKS keystore Report?

> ID：16210801
> 
> 赞同：0
> 
> 时间：2013-04-25T09:11:47.373
> 
> 标签：report, keystore, jks

I have been looking for generating a report from a keystore of type JKS. I am looking to see the following details in the report:

Alias Name
Issued To
Validity From
Validity To

I know, this is possible using Keystore manager tool but manually. Is there a way of extracting such information programatically? [or an automated process]

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:38:17.910

我通过以下方法得到它：

创建一个批处理文件，如下所示：

@echo off
:top
keytool -list -v -keystore -storepass
:enter

# android - 如何在android上获取用户的google api版本？

> ID：16210802
> 
> 赞同：1
> 
> 时间：2013-04-25T09:11:52.997
> 
> 标签：android, google-api

我面临一些罕见的问题。我有一台在 Android API 14 上运行的设备。每当我尝试使用时，`MapActivity`我都会遇到同样的错误 - `java.lang.NoClassDefFoundError: android.security.MessageDigest`。在其他 99% 的设备上，它可以完美运行。

经过一番挖掘，我找到了问题的根源。

> 该错误是设备制造商或 ROM 创建者使用旧版地图库和新版 Android 造成的。（更多在 [什么是'android.security.MessageDigest''？](https://stackoverflow.com/questions/11407685/what-is-android-security-messagedigest)）

应用程序不需要 MapActivity 的功能，所以我想检查用户是否有这样的设备。

如何在 android 上获取用户的 google api 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:25:15.737

使用[谷歌地图 v2](https://developers.google.com/maps/documentation/android/)。
您想使用 Google 地图控制台注册 SHA-1 以在 Google api 控制台中签署密钥。
完整的教程可以在[这里](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)找到。

# c++ - Most efficient way to move row/column in 2D std::vector

> ID：16210803
> 
> 赞同：7
> 
> 时间：2013-04-25T09:11:52.723
> 
> 标签：c++, performance, algorithm, vector, multidimensional-array

I'm creating game application in C++. I have map represented as 2-dimensional `std::vector` of `Tile` objects.

I need to update that map as player moves. From server application I get row or column with a new part of global map, which should be placed in local client's map, for example:

![enter image description here](https://i.stack.imgur.com/hS1wH.png)

In a figure 1 there's a local map before player moves. Top row is filled with objects 1, center with 2 and bottom with 0\. Now when player moves up, I get new top row filled with objects 3 and all the others should go down, and the previous bottom row should disappear.

I can do it just by moving required objects in `for` loops, but I was thinking if there's already some kind of algorithm in standard library or prefered by many, efficient way to achieve this kind of modifications.

EDIT:

Sorry I didn't realize that there would a difference between doing this operation for row and for column, but indeed there is. So I also editted my title, because I sometimes need to do it for column too.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:18:17.027

您可能想要实现一个迭代器并且根本不移动向量的元素。只需为顶行的索引定义一个变量（在屏幕上），然后使用模运算符迭代所有行（因此只有 000 行应该被 333 覆盖，顶行索引将为 2 而不是0)。该算法是有效的（仅根据需要进行尽可能多的内存写入），并且可以用于向任何方向滚动：

*   向上移动：递减顶行索引（mod 行号），改变最后一行
*   向下移动：增加顶行索引（mod 行号），改变第一行
*   左移：减左列索引（mod col 编号），改变最后列
*   向右移动：增加左列索引（mod col 编号），更改第一个列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T09:21:15.363

*当您需要在两端*快速插入/擦除时，会立即想到两个标准容器：`std::deque`和`std::list`. 然而，它们有其特定的要求和限制。

如果您被向量困住，您可以利用 C++11 移动语义，这将允许您有效地移动对象而不是复制它们，或者正如@WebMonster 提到的，您可以在缓冲区中使用某种循环索引，这完全无需移动/复制。

鉴于您的要求，并假设它们是完整的，我可能会选择最有效的@WebMonster 解决方案。**编辑：**既然您的要求已经改变并且您还需要在列上滚动，他的解决方案“循环索引”绝对是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:24:07.130

我会尝试[提升矩阵。](http://www.boost.org/doc/libs/1_40_0/libs/numeric/ublas/doc/matrix.htm)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T09:21:08.403

您可以使用专门用于向量且高效的 std::swap，因为它只需要对两个向量进行几次指针交换。此外，您可以使用 std::rotate，但我不确定它是否使用交换技术。

不幸的是，只有当你有一个行向量并且你需要移动行，或者你有一个列向量并且你需要移动列时，这才有效。似乎要有效地完成这两项操作，您必须使用一些更复杂的数据结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-07T15:29:34.577

一种可能的方法是使用：

`std::std::swap_ranges()`用于移动 2D 中已经存在的行`std::vector`

和

`std::transform()`用于修改需要用新值替换的行。

# scala - 在scala中，检查非空值并直接应用方法？

> ID：16210809
> 
> 赞同：0
> 
> 时间：2013-04-25T09:12:02.950
> 
> 标签：scala, if-statement, nullpointerexception, conditional-statements

具有以下定义：

```
class Test {
  var activated: Boolean = false
}

def maybeTest(): Test = {
  if(...) {
    val res = new Test
    if(...) res.activated = true
  } else null
} 
```

我有很多`if`这样的结构：

```
val myobject = maybeTest()
if(myobject != null && myobject.activated) {
  // Do something that does not care about the object
} 
```

我想稍微浓缩一下。有没有一种很好的方法来定义/编写这样的东西来避免 nullPointerException：

```
if(maybeTest() &&> (_.activated)) {
  ...
} 
```

在scala中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:18:42.197

您可以将此类代码包装在 Option 中，如下所示：

```
class Test(num: Int) {
  def someNum = num
}

val test: Test = null
Option(test).map(t => t.someNum) 
```

在此示例中，如果您的变量为 null，那么您将得到 None，否则只需使用 Some(value)

**更新**

如果你不想使用 Option，那么你可以定义这样的函数

```
class Test(num: Int) {
  def give = num
}

def ifDefAndTrue[T, K](obj: T)(ifTrue: T => Boolean)(then: => K) {
  if (obj != null && ifTrue(obj))
    then
} 
```

在你的情况下，这看起来像这样：

```
val test = new Test // assuming that activated is false

ifDefAndTrue(test)(_.activate) {
  println("results in unit")
} 
```

但它包含副作用并且没有功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T15:16:20.493

怎么样

```
for {m <- Option(maybeTest())
     if m.activated
    }
    {
        ... // do something with non-null, activated, m
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T21:45:23.813

找到了隐式类的最佳方法，它可以正确处理 null 情况（尽管它可能不是最有效的方法）。

```
implicit class CheckNull[T](obj: T) {
  def call(f: T => Unit): Unit = if(obj != null) f(obj) else ()
  def is(f: T => Boolean): Boolean = if(obj != null) f(obj) else false
} 
```

所以我可以编写一个类型安全的方法，甚至调用：

```
if(maybeTest() is (_.activated)) {
  ...
}
myObjectMaybeNull call (_.pause()) 
```

请注意，括号`(_.activated)`是必要的。

# java - Multiple Jpanel keylistener space

> ID：16210814
> 
> 赞同：1
> 
> 时间：2013-04-25T09:12:26.487
> 
> 标签：java, swing, jpanel, frame, textfield

I have a frame which contains 4 different panels.One panels contains a music player which on pressing `Space` key start playing the music while other 3 panels contains textfields and some submit buttons.Now my problem is that while typing text in any of those textfield it's taking the input but whenever I try to give space in those textfield it's playing that music instead of typing a space in the textfield.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:51:27.897

> 我有一个包含 4 个不同面板的框架。一个面板包含一个音乐播放器，按空格键开始播放音乐，而其他 3 个面板包含文本字段和一些提交按钮。现在我的问题是，在任何这些文本字段中输入文本时接受输入，但是每当我尝试在这些文本字段中留出空间时，它都会播放该音乐，而不是在文本字段中输入空格。

和

> 听众只连接到音乐面板，而不连接其他任何东西

*   将 KeyBindings 添加到 JFrame（包含 4 个 JPanel）

*   输出应该是 Swing Action

*   在 Swing 动作中覆盖 setEnabled

*   将所有 JComponents（仅供用户输入）添加到数组

*   添加 FocusListener 或所有 JComponents（仅用于用户输入）

*   在 focusGained 上添加到数组的任何 am JComponent 都应更改

*   但是如何才能为 Swing Action 重置 isEnabled(true)，只能通过 Swing Timer

* * *

火焰战

*   对用户不友好，完全不可能，错误的想法带有一堆副作用

*   错了，错了，一切都错了，您无法确定任何可用作 JTextComponents、JSlider、JComboBox（也自动完成）、带有 isCellEditable(true) 的 JTable 输入字符的 KeyShortCuts

*   SPACE 也被用作 JButton（在 API 中实现的 KeyBindings）的加速器，等等......

* * *

使用 JToggleButton 而不是 JPanel，

*   有两种状态

*   可以不装饰，然后看起来像 JPanel（例如）

*   使用图标，放在那里播放（停止）图标，文本，用动画 gif 看几次

*   SPACE 是加速器（在 focusGained 上）

*   也可以从 MouseEvents 访问

# c++ - Signals and slots QT

> ID：16210819
> 
> 赞同：1
> 
> 时间：2013-04-25T09:12:32.643
> 
> 标签：c++, multithreading, qt, signals

I have asked a number of different questions now all regarding one main issue in my program and still not solved it at all, I'm using threading to keep my UI from locking up, but basically it still does because apparently you can't do UI stuff in threads.

So I've been told to use custom signals and slots (not that any examples were given).

So from the documentation I've read I came up with this code:

.h

```
signals:

void paint_signal(double x, double y); 
```

.cpp

```
 connect(this,SIGNAL(paint_signal(double x, double y)), this, SLOT(PaintSomething(x,y))); 
```

the Paintsomething function is within the same class as all of this....

thread:

```
*future2 = QtConcurrent::run(this, &GUI::paintAll); 
```

paint all emits the paint_signal and passes 2 doubles

```
emit paint_signal(x, y); 
```

but I get this error which I just don't understand at all

```
 connect: No such signal GUI::paint_signal(double x, double y) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:24:47.810

```
connect(this,
        SIGNAL(paint_signal(double, double)), 
        this, 
        SLOT(PaintSomething(x,y))); 
```

删除参数名称，它应该可以工作。如果这个不起作用，这个将：

```
 connect(this,
        SIGNAL(paint_signal(double, double)), 
        this, 
        SLOT(PaintSomething(double,double))); 
```

让我知道这是否适合你:)

**更新**

这个想法是您不能在线程中使用 UI，而是从线程向 UI 发出信号。因为这个答案可能会让你回到开始（可能是一个新问题）这里是一个如何从线程发出信号的工作示例：

[QT 在线程中向 UI 发送信号](http://www.qtcentre.org/wiki/index.php?title=Updating_GUI_from_QThread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T19:41:55.447

Floris Velleman 的回答是好的，但是通过使用[新的信号槽语法](http://qt-project.org/wiki/New_Signal_Slot_Syntax)，您可以在编译时捕获错误并摆脱多余的括号。

**旧语法：**

```
connect(this,
        SIGNAL(paint_signal(double, double)), 
        this, 
        SLOT(PaintSomething(double,double))); 
```

**新语法：**

```
connect(this,
        &SenderClass::paint_signal, 
        this, 
        &ReceiverClass::PaintSomething); 
```

# android - Android第一次使用apk扩展上传apk

> ID：16210820
> 
> 赞同：0
> 
> 时间：2013-04-25T09:12:33.637
> 
> 标签：android

我正在上传带有apk扩展的游戏。但是当我上传第一个apk时，它没有显示弹出扩展文件上传，第二次使用更新版本然后它显示弹出窗口以上传扩展文件。

让我知道是否有人有解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T09:11:42.667

这是 Google 开发者控制台的[问题](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en)。

您必须上传第二个 APK 才能添加扩展文件。

# macos - How to start application(path with space) using QProcess on mac OSX?

> ID：16210821
> 
> 赞同：0
> 
> 时间：2013-04-25T09:12:37.550
> 
> 标签：macos, space, qprocess

It goes well when using QProcess to start a program if its path without space.
eg:

```
QProcess app;
app.startDetached("open /Users/test/Desktop/MyTest/Hello.app"); 
```

But, it doesn't work if the program path containing spaces.
eg:

```
QProcess app;
app.startDetached("open /Users/test/Desktop/My Test/Hello.app"); 
```

Someone can help me and tell me how to start a program with space in its path?
Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:27:12.227

您需要在字符串中使用引号作为路径：-

```
app.startDetached("open \"/Users/test/Desktop/My Test/Hello.app\""); 
```

如果没有引号，空格将建议路径的下一部分作为传递给 open 调用的第二个参数。

# javascript - Angular.JS：共享相同控制器的视图，更改视图时模型数据重置

> ID：16210822
> 
> 赞同：36
> 
> 时间：2013-04-25T09:12:38.870
> 
> 标签：javascript, angularjs

我开始使用 Angular.JS。

我有许多共享同一个控制器的视图。每个视图都是收集存储在控制器中的数据的一个步骤：

```
$routeProvider.when('/', {
  templateUrl: 'partials/text.html',
  controller: 'itemSubmitter'
});

$routeProvider.when('/nextThing', {
  templateUrl: 'partials/nextthing.html',
  controller: 'itemSubmitter'
}); 
```

itemSubmitter 控制器：

```
$scope.newitem = {
  text: null
} 
```

这是第一个视图：

```
<textarea ng-model="newitem.text" placeholder="Enter some text"></textarea>

<p>Your text is:
{{ newitem.text }}</p> 
```

这有效，实时更新“您的文本是：”段落。

但是，当加载下一个视图时，`{{ newitem.text }}`会重置为其默认值。如何使存储在控制器实例中的值在视图中保持不变？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-25T11:03:33.030

更改路线时会释放控制器。这是一种很好的行为，因为您不应该依赖控制器在视图之间传输数据。最好创建一个服务来处理该数据。

请参阅有关如何正确使用控制器的角度文档。 [http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)

*引用文档：*

> ## 正确使用控制器
> 
> 一般来说，控制器不应该尝试做太多事情。它应该只包含单个视图所需的业务逻辑。
> 
> 保持控制器苗条的最常见方法是将不属于控制器的工作封装到服务中，然后通过依赖注入在控制器中使用这些服务。本指南的依赖注入服务部分对此进行了讨论。
> 
> 不要将控制器用于：
> 
> *   任何类型的 DOM 操作——控制器应该只包含业务逻辑。DOM 操作——应用程序的表示逻辑——以难以测试而闻名。将任何表示逻辑放入控制器会显着影响业务逻辑的可测试性。Angular 为自动 DOM 操作提供数据绑定。如果您必须执行自己的手动 DOM 操作，请将表示逻辑封装在指令中。
> *   输入格式 - 改用 Angular 表单控件。
> *   输出过滤 - 改用角度过滤器。
> *   要运行跨控制器共享的无状态或有状态代码——请改用 Angular 服务。
> *   实例化或管理其他组件的生命周期（例如，创建服务实例）。

# git - 将此目录添加到 .gitignore 后如何删除远程仓库的目录？

> ID：16210828
> 
> 赞同：0
> 
> 时间：2013-04-25T09:13:05.470
> 
> 标签：git

一开始，我没有放入`logs/`.gitignore，所以在远程出现a之后`git push`，`logs/`然后我添加`logs/`.gitignore并进行提交和推送，但`logs/`仍然保留在远程，我如何`logs/`在远程删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:15:11.350

简短的回答是使用`$git filter-branch`. 有关更多详细信息，请查看：

[http://git-scm.com/book/ch6-4.html#The-Nuclear-Option:-filter-branch](http://git-scm.com/book/ch6-4.html#The-Nuclear-Option:-filter-branch)

和

[https://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:34:09.263

`.gitignore`忽略未跟踪的文件，但是一旦将文件添加到存储库中，它们将被跟踪直到明确删除。

如果您不关心将目录保留在历史记录中，那么您只需将其从 git 中删除`git rm -r logs`，`git commit`. 但是，如果目录非常大并且显着增加了存储库大小，那么请按照 Yan Zax 的建议将`filter-branch`.

# themes - Plone 4.1 评论未出现在 SunBurst 主题上

> ID：16210830
> 
> 赞同：0
> 
> 时间：2013-04-25T09:13:12.920
> 
> 标签：themes, plone

我有 plone.app.discussion = 2.1.5 和 quintagroup.plonecomments 的 Plone 4.1。另外，我有几个站点在简单页面上配置了全局评论。第一个工作正常，但另一个评论根本没有出现。此外，第二个有 SunBurst 主题，我猜这个主题不包括 plone.comments viewlet，因为当我在第一个站点上使用 @@manage-viewlets 时，它显示了它，当我在另一个站点上使用它时 - 不plone.comments 的标志。如何启用此视图？

# android - 序列化/反序列化和Proguard

> ID：16210831
> 
> 赞同：10
> 
> 时间：2013-04-25T09:13:13.550
> 
> 标签：android, serialization, deserialization, proguard

在我的一个应用程序中，当我尝试更新我的 APK 时，我的一个序列化类出现了问题。

确实，以前版本的 apk 和新版本的 apk 保存的对象存在相关问题。

在最新的 APK（Android Market 上的生产中）中，我忘记为 Serializable 类配置我的 proguard.cfg（以及它们的**静态最终长 serialVersionUID**成员）......

因此，当我尝试在我的新 APK 中重新加载这个先前存储的 Serializable 类时，我在 StackTrace DDMS 中有一个**InvalidClassException问题：**

```
04-24 18:17:40.120: W/System.err(1204): java.io.InvalidClassException: cu; Incompatible class (SUID): cu: static final long serialVersionUID =6593847879518920343L; but expected cu: static final long serialVersionUID =0L;
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.verifyAndInit(ObjectInputStream.java:2380)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1662)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:683)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:1803)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:787)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2003)
04-24 18:17:40.125: W/System.err(1204):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1960) 
```

我知道这是 Serializable 对象及其 serialVersionUID 的混淆问题......

在阅读了[Proguard and Serialized Java Objects](http://littlepancake.com/2011/09/proguard-and-serialized-java-objects/) here 这清楚地暴露了我的问题之后，我无法解决我的问题......

在我的下一个 APK 中，我在 proguard.cfg 中添加了这个：

```
-keepnames class * implements java.io.Serializable

-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    !static !transient ;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}
```

为了避免下次更新的问题，我真的需要取回这些旧对象......

我尝试使用 6593847879518920343L 或 0L 更改 serialVersionUID，但没有成功...

任何想法 ？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T00:23:35.047

你可以试试这个：

1.  计算经过*混淆*的可序列化类的 serialVersionUID，并将它们添加到当前源代码中。
2.  混淆新代码，保留 serialVersionUID，但还要确保可序列化类映射到较早的混淆名称（使用选项 -applymapping）。

# android - 交付应用程序进行 Beta 测试

> ID：16210835
> 
> 赞同：3
> 
> 时间：2013-04-25T09:13:31.177
> 
> 标签：android, android-testing

我即将部署我的应用程序进行 Beta 测试。但是，我对安全交付到 beta 测试设备的最佳方式感到困惑。

我知道通过电子邮件发送 apk 文件不是一个合乎逻辑的举动。

经过一番研究，我发现了以下内容。

1.  [Deploy Gate](https://deploygate.com) - 提供私人无线分发。

2.  [用于 Google Apps 的 Google Play 私人频道](http://support.google.com/a/bin/answer.py?hl=en-uk&hlrm=en&answer=2494992) - 并没有完全掌握它。

3.  [Zubhium](https://www.zubhium.com) - 新平台。有没有人试过这个？

任何人都可以请我通过适当的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:25:49.003

Beta 测试的问题是您*总是*冒着 apk 被泄露的风险。实际上，您无法采取任何措施来防止这种情况发生，因为任何拥有根设备的人都可以在安装后检索 apk。

相反，您应该考虑向 apk 添加定时试用等功能，并让它在某个日期后停止工作，或者在服务器上的某个值发生更改后停止工作。

此外，Beta 测试是一个信任问题。如果您不信任您的 beta 测试人员，请不要给他们一个 apk。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T08:54:12.120

从 2013 年 5 月开始，Google Play 开发者控制台允许您通过 Alpha 和 Beta 测试以及分阶段发布功能与用户组一起测试您的应用。你需要：

1.  为您的 Alpha 或 Beta 测试选择一个 APK。
2.  为每个测试选择用户组。
3.  发布您的 alpha 或 beta 测试 APK。
4.  让您的测试人员选择加入。

alpha/beta 测试人员必须是[Google 群组](https://support.google.com/groups/answer/46601)或[Google+ 社区](https://support.google.com/plus/topic/2888488)的成员。该应用程序只会出现在 Google Play 中，供选择加入的测试人员使用，而不会向任何其他用户显示。另一个不方便的是，测试链接发布后可能需要长达 24 小时才能激活，但通常时间会更短

在这里您可以找到有关[Beta 测试和分阶段推出的更多信息](https://support.google.com/googleplay/android-developer/answer/3131213)

# php - plupload 应该保存大小图像

> ID：16210845
> 
> 赞同：0
> 
> 时间：2013-04-25T09:14:29.087
> 
> 标签：php, plupload

我正在使用 plupload 来保存多个图像，我想存储具有 2 种尺寸的相同图像，小图像用于 thum 和大图像以大显示。

plupload 将如何存储 2 种尺寸的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:09:42.593

在服务器端实现你需要的东西更容易......

对于插件；您可以使用以下功能：

```
 resize : {width : 500, height : 600, quality : 90}, 
```

如果您还利用诸如 FileUploaded 之类的事件来重新上传相同的上传文件但具有不同的参数，您应该能够实现您所需要的。

这里看看这个讨论；它应该引导你走上正确的道路

[http://www.plupload.com/punbb/viewtopic.php?id=555](http://www.plupload.com/punbb/viewtopic.php?id=555)

# javascript - Javascript 函数在 IE<10 中无法正常工作

> ID：16210849
> 
> 赞同：0
> 
> 时间：2013-04-25T09:14:40.550
> 
> 标签：javascript, html, internet-explorer

我有这个链接，它只是隐藏自己并显示`fb:comments`元素

```
<a onclick="comments(this)"> + Comments (
    <fb:comments-count href="http://some.url.com" fb-xfbml-state="rendered">
        <span class="fb_comments_count">1</span>
    </fb:comments-count>
)
</a>

<div class=\"facebook-comments\"><!-- default style for this is 'display:none'-->
    <fb:comments href=\"http://some.url.com" width="644" num_posts="10">
    </fb:comments>
</div> 
```

这是`comments()`功能：

```
function comments(src){
    //hide the 'a' element that called this function
    src.style.display="none"; 

    //show comments element 
    src.parentNode.getElementsByClassName('facebook-comments')[0].style.display="block";
    return false;
} 
```

这在 Chrome、Firefox、Opera、Safari 和 IE10 中也可以正常工作，但在 IE<10 中存在问题，碰巧当我单击`+ Comments (#)`链接时它会消失但评论 div 没有出现，因此链接变得无用。

是IE问题还是我做错了什么？

在这两种情况下，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:03:50.503

[`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)旧 IE 不支持。MDN 声称自 IE9 起支持。

另一种选择是[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)或[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)。从 IE8 开始支持：

```
src.parentNode.querySelector('.facebook-comments').style.display="block";

//OR

src.parentNode.querySelectorAll('.facebook-comments')[0].style.display="block"; 
```

如果您也想支持 IE7（或者如果您喜欢它的语法），最好的办法是使用框架或库。最流行的可用框架是[jQuery](http://jquery.com/)（作为其中一部分的[Sizzle](http://sizzlejs.com/)引擎也可以单独下载）。使用 jQuery：

```
$(src).parent().find(".facebook-comments:first").show(); 
```

如果您想避免使用外部库*并*希望支持 IE7，那么您的选择非常有限，但[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)仍然可用（从 IE 5.5 开始）。可悲的是，[`classList`](https://developer.mozilla.org/en-US/docs/DOM/element.classList)不是：

```
var elems = src.parentNode.getElementsByTagName("div")
for(var i = 0; i<elems.length; i++){
  elem = elems[i];
  if(elem.className.matches(/(^| )facebook-comments( |$)/){
    elem.style.display = "block";
    break;
  }
} 
```

# iphone - cocos2d中如何制作双目效果？

> ID：16210850
> 
> 赞同：5
> 
> 时间：2013-04-25T09:14:43.790
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, box2d

我需要在自定义框架内使用模糊和缩放来制作双目效果以跟随对象（精灵），就像这样

![在此处输入图像描述](https://i.stack.imgur.com/SpWDz.png)

任何想法如何制作它？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:34:15.310

剪辑要缩放到路径的区域（如双目边缘），然后增加比例（这就是我在纯物镜 c 中的做法）。

如果您使用的是 cocos2d 2.0，它应该可以工作，因为 CCDirector 是 UIViewController ，在其他版本中，我不知道。也许尝试做同样的事情，但你需要一些解决方法

# ios - Cocoa Touch：渲染图像时忽略掩码：renderInContext:UIGraphicsGetCurrentContext()

> ID：16210852
> 
> 赞同：0
> 
> 时间：2013-04-25T09:14:53.010
> 
> 标签：ios, cocoa-touch, rendering, mask, uibezierpath

我正在尝试使用`renderInContext:UIGraphicsGetCurrentContext()`. 我正在掩盖一个白色视图，它是灰色视图的子视图。这对显示效果很好：我最终得到了一个灰色背景下的白色形状，但是当我渲染蒙版时，我看到的只是结果图像中的白色。

UIView 子类中的掩码

```
- (void)drawRect:(CGRect)rect
{
        CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
        CGMutablePathRef patheToMask = CGPathCreateMutable();
        CGRect scrollMaskRect = CGRectMake(30, 30, 100, 100);
        UIBezierPath *scrollMask = [UIBezierPath bezierPathWithRoundedRect:scrollMaskRect cornerRadius:30];
        CGPathAddPath(patheToMask, nil, scrollMask.CGPath);
        [maskLayer setPath:patheToMask];
        CGPathRelease(patheToMask);
        self.layer.mask = maskLayer;
} 
```

渲染代码

```
-(void)renderImage {
    CGSize renderSize = CGSizeMake(masterView.frame.size.width, masterView.frame.size.height);
    UIGraphicsBeginImageContext(renderSize);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextConcatCTM(context, [[masterView layer] affineTransform]);
    [[masterView layer] renderInContext:UIGraphicsGetCurrentContext()];
    renderedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    CGContextRestoreGState(context);
    UIImageWriteToSavedPhotosAlbum(renderedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
    masterView.transform = CGAffineTransformIdentity;
} 
```

这是项目[http://owolf.net/uploads/StackOverflow/MaskWeirdness.zip](http://owolf.net/uploads/StackOverflow/MaskWeirdness.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T02:30:34.640

根据文档， renderInContext:UIGraphicsGetCurrentContext() 不支持屏蔽。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)

从文档：

> 重要提示：此方法的 OS X v10.5 实现不支持整个 Core Animation 合成模型。QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定背景过滤器、过滤器、合成过滤器或遮罩值的图层。OS X 的未来版本可能会增加对渲染这些层和属性的支持。

# jquery - 页面上的两个轮播不起作用

> ID：16210853
> 
> 赞同：4
> 
> 时间：2013-04-25T09:14:55.450
> 
> 标签：jquery, double, carousel, jcarousel

我正在尝试在我的页面上设置两个轮播，但我无法单独控制每个轮播，当我单击导航按钮时，它会移动两个轮播。任何想法？我应该更改css文件中的某些内容吗？或者用一个 jquery 运行两个轮播的正确命令是什么？

**我的html代码：**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Untitled Document</title>
  <link href="stylesheets/reset.css" rel="stylesheet" type="text/css" />
  <link href="stylesheets/main_css.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="scripts/browser-compatibility.js"></script>

  <script type="text/javascript" src="scripts/jquery.js"></script>
  <script type="text/javascript" src="widget/lib/jquery.ui.core.min.js"></script>
  <script type="text/javascript" src="widget/lib/jquery.ui.widget.min.js"></script>
  <script type="text/javascript" src="widget/lib/jquery.ui.rcarousel.min.js"></script>
  <link type="text/css" rel="stylesheet" href="widget/css/rcarousel.css" />
  <link rel="stylesheet" type="text/css" href="widget/css/style.css" />
  <script type="text/javascript" src="widget/lib/carous.js"></script>

 </head>
 <body>

     <div id="container">
      <div id="carousel" class="carousel_pfi cf">
       <div id="slide01" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>driven by jQuon a pageon a pageon a pageery UI</p>
        </div>
       </div>
       <div id="slide02" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>any content continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>from images ton a pageon a pageon a pageo any HTML element</p>
        </div>
       </div>
       <div id="slide03" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>horizontal and vertical continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>carousels just onon a pageon a pageon a pageon a pagee click away</p>
        </div>
       </div>
       <div id="slide04" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>multi carousels</h1>

         <p>on a pageon a pageon a pageon a pageon a pageon a page</p>
        </div>
       </div>
       <div id="slide05" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>highly customizabl continuous carousel continuous carousel continuous carousel continuous carousel continuous carousele</h1>

         <p>style it whaton a pageon a pageon a pageever you like</p>
        </div>
       </div>
       <div id="slide06" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>multi browser support</h1>

         <p>supports even old browsers</p>
        </div>
       </div>
      </div>    
      <a href="#" id="ui-carousel-next"></a>
    <a href="#" id="ui-carousel-prev"></a>

      <div id="pages"></div>
     </div>
     <div id="container">
      <div id="carousel2" class="carousel_pfi cf">
       <div id="slide011" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>driven by jQuon a pageon a pageon a pageery UI</p>
        </div>
       </div>
       <div id="slide022" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>any content continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>from images ton a pageon a pageon a pageo any HTML element</p>
        </div>
       </div>
       <div id="slide033" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>horizontal and vertical continuous carousel continuous carousel continuous carousel continuous carousel continuous carousel</h1>

         <p>carousels just onon a pageon a pageon a pageon a pagee click away</p>
        </div>
       </div>
       <div id="slide044" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>multi carousels</h1>

         <p>on a pageon a pageon a pageon a pageon a pageon a page</p>
        </div>
       </div>
       <div id="slide055" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>highly customizabl continuous carousel continuous carousel continuous carousel continuous carousel continuous carousele</h1>

         <p>style it whaton a pageon a pageon a pageever you like</p>
        </div>
       </div>
       <div id="slide066" class="slide">
        <img src="images/placeholder_crs.png" />
        <div class="text">
            <h1>multi browser support</h1>

         <p>supports even old browsers</p>
        </div>
       </div>
      </div>    <a href="#" id="ui-carousel-next2"></a>
    <a href="#" id="ui-carousel-prev2"></a>

      <div id="pages2"></div>
     </div>

 </body>

</html> 
```

**我的 carous.js 脚本：**

```
jQuery(function($) {
                function generatePages() {
                    var _total, i, _link;

                    _total = $( "#carousel, #carousel2").rcarousel( "getTotalPages" );

                    for ( i = 0; i < _total; i++ ) {
                        _link = $( "<a href='#'></a>" );

                        $(_link)
                            .bind("click", {page: i},
                                function( event ) {
                                    $( "#carousel, #carousel2").rcarousel( "goToPage", event.data.page );
                                    event.preventDefault();
                                }
                            )
                            .addClass( "bullet off" )
                            .appendTo( "#pages, #pages2" );
                    }

                    // mark first page as active
                    $( "a:eq(0)", "#pages, #pages2" )
                        .removeClass( "off" )
                        .addClass( "on" )
                        .css( "background-image", "url(images/page-on.png)" );

                }

                function pageLoaded( event, data ) {
                    $( "a.on", "#pages, #pages2" )
                        .removeClass( "on" )
                        .css( "background-image", "url(images/page-off.png)" );

                    $( "a", "#pages, #pages2" )
                        .eq( data.page )
                        .addClass( "on" )
                        .css( "background-image", "url(images/page-on.png)" );
                }

                $("#carousel, #carousel2").rcarousel(
                    {
                        visible: 4,
                        step: 1,
                        speed: 700,
                        auto: {
                            enabled: true
                        },
                        width: 288,
                        height: 250,
                        start: generatePages,
                        margin: 0,
                        pageLoaded: pageLoaded

                    }
                );

                $( "#ui-carousel-next, #ui-carousel2-next" )
                    .add( "#ui-carousel-prev, #ui-carousel2-prev" )
                    .add( ".bullet" )
                    .hover(
                        function() {
                            $( this ).css( "opacity", 0.7 );
                        },
                        function() {
                            $( this ).css( "opacity", 1.0 );
                        }
                    );
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:29:18.207

正如 oske 所说，页面中有一些具有相同 id 的元素，这是一种不好的做法。id 必须是唯一的。也许这不是这里的问题，但你应该为你的导航链接使用不同的 id：

```
 <a href="#" id="ui-carousel-next"></a>
   <a href="#" id="ui-carousel-prev"></a> 
```

和

```
 <a href="#" id="ui-carousel-next2"></a>
   <a href="#" id="ui-carousel-prev2"></a> 
```

编辑：

所以你可以看到这个链接（[https://github.com/ryrych/rcarousel/issues/13](https://github.com/ryrych/rcarousel/issues/13)），这家伙也有同样的问题。看来您必须在您的 js 文件中分别声明两个 carrousel，并为它们提供上一个和下一个 id 链接：

```
$("#carousel").rcarousel({
visible: 4,
step: 1,
speed: 700,
auto: {
  enabled: true
},
width: 288,
height: 250,
start: generatePages,
margin: 0,
pageLoaded: pageLoaded
navigation: {
   prev: "#ui-carousel-prev",
   next: "#ui-carousel-next"
}
});

$("#carouse2").rcarousel({
visible: 4,
step: 1,
speed: 700,
auto: {
  enabled: true
},
width: 288,
height: 250,
start: generatePages,
margin: 0,
pageLoaded: pageLoaded
navigation: {
   prev: "#ui-carousel2-prev",
   next: "#ui-carousel2-next"
}
}); 
```

# ruby-on-rails - Carrierwave：将多页 PDF 拆分为多个图像

> ID：16210855
> 
> 赞同：1
> 
> 时间：2013-04-25T09:14:59.650
> 
> 标签：ruby-on-rails, pdf, carrierwave

我正在尝试为我的 Rails 应用程序拆分多页 PDF，然后将页面转换为 png。在最好的情况下，我最终会在我的图像模型中每页有一个条目。

这是我到目前为止所得到的：

```
def generate_png
  manipulate! do |image, index|
    image.format = 'png'
    image.write("#{Rails.root}/public/#{store_dir}/image-#{index}.png")
  end
end 
```

不幸的是，它只给我第一帧的 image-0.png 而其他帧什么都没有。我哪里错了？

如何在我的图像模型中为每一帧生成一个新条目？就像是

```
model.images.new :image => image 
```

?

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:39:30.983

当您将 pdf 文件拆分为图像时，如果文件名为 file.pdf，则结果将是多个具有相同名称的图像，并带有附加编号，例如 file-0.png ,file-1.png ......所以您需要从 pdf 加载所有转换后的图像，并将它们转换为您想要的任何格式

它给你 image-0.png 因为拆分 pdf 文件的返回只是第一个图像，它是 pdf 文件中的第一页

您可以正常上传文件并执行 after_create 方法

```
def generate_image_form_pdf 
  file = @magazine.file
  file_name=file.path.sub(".pdf",".jpg")
  system("convert #{file.path}  #{file_name}")
end 
```

上述方法将从pdf文件创建jpg图像并将它们存储在与原始pdf文件相同的目录和相同的名称中

# c# - 将水晶报表转换成pdf格式

> ID：16210859
> 
> 赞同：0
> 
> 时间：2013-04-25T09:15:10.790
> 
> 标签：c#

我的报告在 IIS 中成功生成，现在我想获得 PDF 格式的报告。请指导我 - 我在下面列出了我的来源：

```
 protected void Button1_Click(object sender, EventArgs e)
{
    ReportDocument rpt = new ReportDocument();
    rpt.Load(Server.MapPath("MR.rpt"));
    rpt.SetDatabaseLogon("", "", "RAMYA-BD", "");
    rpt.SetParameterValue("MRNO", ddlmrno.SelectedItem.Text);

    CrystalReportViewer1.ReportSource = rpt;
    Response.ContentType = "application/pdf";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:21:17.973

如果您没有添加查看器：

```
Stream st = rpt.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Disposition", "attachment;filename=\"xxx.pdf\"");
st.CopyStream(Response.OutputStream);
Response.Output.Flush();
Response.End(); 
```

数据库连接可能

```
rep.DataSourceConnections[0].SetLogon("Login","Password"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T09:17:57.917

通过以下链接：

1.  [http://www.dotnetspider.com/resources/4946-Create-pdf-from-crystal-report.aspx](http://www.dotnetspider.com/resources/4946-Create-pdf-from-crystal-report.aspx)

2.  [http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-export-pdf.htm](http://csharp.net-informations.com/crystal-reports/csharp-crystal-reports-export-pdf.htm)

或堆栈溢出相同的问题：[Converting Crystal report to PDF](https://stackoverflow.com/questions/5521702/converting-crystal-report-to-pdf?rq=1)

# azure - 在 Windows AZURE 上发布我的网站时出现 ERROR_DESTINATION_INVALID

> ID：16210861
> 
> 赞同：4
> 
> 时间：2013-04-25T09:15:11.803
> 
> 标签：azure, azure-web-app-service

我创建了一个 ASP.NET WEB API。我想在 Windows AZURE 上托管它。我已经在 Windows Azure 上成功创建了网站并为其下载了发布设置文件。现在，当我在 Windows 8 机器上从 VS-2012 发布我的 Web API 时，它要求我导入我最近下载的发布设置文件。我提供了该文件，当我单击“验证连接”按钮时，它失败了。它给出了以下错误。

![在此处输入图像描述](https://i.stack.imgur.com/00BKK.png) ![在此处输入图像描述](https://i.stack.imgur.com/S3eh2.png)

我想提一下，我在公司防火墙后面并使用代理连接。如果它与防火墙或代理有关，那么请告诉我我可以更改我的防火墙/代理设置以使其正常工作。

提前致谢...

# mongodb - 如何在 MongoDB 中批量插入期间从错误中恢复

> ID：16210863
> 
> 赞同：4
> 
> 时间：2013-04-25T09:15:14.270
> 
> 标签：mongodb

我正在使用 MongoDB 创建一个 Web 应用程序。现在我正在创建管理页面，使管理员能够在网站上添加或删除项目。在页面上，将添加批量导入功能，可以从本地 CSV 文件中导入内容。问题是如何实现该功能。

最简单的方法是将上传的 CSV 文件转换为 JSON，然后使用`db.items.insert([{...}, {...}, ...])`语句插入它们。

如果`null`返回`db.getLastError()`，则导入成功。没有问题。

但是，如果在批量插入过程中发生错误应该怎么办？因为没有事务，所以插入的项不能回滚。因此，重试插入将导致重复的文档。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-26T11:44:27.797

[在 MongoDB 2.4 中，如果批量插入](http://docs.mongodb.org/manual/core/write-operations/#bulk-inserts)中的任何文档出现错误，您只会得到最后一个异常。

### 失败时回滚

如果您想为批量插入提供事务方法（即所有插入必须成功，或者回滚批处理），那么您应该`batch_id`在插入的文档中包含一个标识字段。如果出现任何故障，您可以删除从该批次中插入的任何文档并适当地处理错误（重试或失败）。

### 批量插入方法

如果您**没有**插入分片集群：

*   将`ContinueOnError`标志设置为 false 以确保批量插入在第一个错误时停止
*   处理异常并决定是回滚批处理还是从导致异常的文档之后的文档开始重新插入

如果要**插入**分片集群：

*   该`ContinueOnError`标志当前始终设置为 true
*   如果出现错误，您将不得不遍历该批次中的文档并尝试单独插入（或[upsert](http://docs.mongodb.org/manual/core/update/#update-operations-with-the-upsert-flag)）它们，以便您可以捕获和处理任何特定异常。
*   另请参阅：[批量插入分片集合的策略](https://docs.mongodb.com/manual/core/bulk-write-operations/index.html#strategies-for-bulk-inserts-to-a-sharded-collection)。

# javascript - 无法在 Ember 中将属性绑定设置为 View 的 ObjectController 上的属性

> ID：16210867
> 
> 赞同：0
> 
> 时间：2013-04-25T09:15:24.573
> 
> 标签：javascript, ember.js

我设法通过我的车把模板将 attributeBinding 设置为控制器上下文：

```
<li {{bindAttr class="view.controller.isSelected:active:"}}>
    <a href="#" {{action "toggleSelected"}}>{{view.controller.title}}</a>
</li> 
```

在每个组中调用如下：

```
<ul class="nav nav-tabs nav-stacked">
    {{#each skill in controller}}
        {{view App.SkillView}}
    {{/each}}
</ul> 
```

但是我发现 EmberJS 在每个视图周围添加了 div，这导致我的 CSS 出现问题，所以我`li`从模板中删除了标签并在 中设置 tagName`SkillView`并尝试通过 JS 对象进行属性绑定，该对象在我想要的地方添加了一个 li DOM 元素，但是我使用的属性绑定似乎不起作用：

```
App.SkillView = Ember.View.extend({
    templateName: 'skill',
    tagName: 'li',
    attributeBindings: ['controller.isSelected:active:']
}); 
```

这也不是：

```
App.SkillView = Ember.View.extend({
    templateName: 'skill',
    tagName: 'li',
    attributeBindings: ['view.controller.isSelected:active:']
}); 
```

也不是这个：

```
App.SkillView = Ember.View.extend({
    templateName: 'skill',
    tagName: 'li',
    attributeBindings: ['isSelected:active:']
}); 
```

如何在视图绑定字符串的上下文中从视图中引用控制器？我在车把模板上做什么，我在视图代码中没有做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:27:17.220

原来我应该使用 classNameBindings 而不是 attributeBindings。以下工作：

```
App.SkillView = Ember.View.extend({
    templateName: 'skill',
    tagName: 'li',
    classNameBindings: ['controller.isSelected:active:']
}); 
```

# c# - 高效的纯文本模板引擎

> ID：16210871
> 
> 赞同：3
> 
> 时间：2013-04-25T09:15:34.493
> 
> 标签：c#, template-engine

我有一个简单的警报系统，可以抓取网络上的号码，将它们与预定义的文本模板混合以获取警报，并将其发送给客户。警报是非常简单的纯文本，所以除了纯文本、数字、简单的函数（例如 ifthenelse），我不会期望太多，越快越好。那么是否有任何现有的开源解决方案呢？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T09:20:57.457

我会为此使用[Razor Engine](http://razorengine.codeplex.com/)。

> 基于 Microsoft 的 Razor 解析技术构建的模板引擎。RazorEngine 允许您使用 Razor 语法来构建强大的模板

其页面中的一个简单示例：

```
string template = "Hello @Model.Name! Welcome to Razor!";
string result = Razor.Parse(template, new { Name = "World" }); 
```

并将`result`成为*Hello World！欢迎来到剃刀！*

# telerik - Telerik 测试自动化按类名查找最后一个元素

> ID：16210872
> 
> 赞同：0
> 
> 时间：2013-04-25T09:15:34.597
> 
> 标签：telerik, selenium-webdriver

在我的**`specflow`**验收测试中，我需要通过给定的类名找到最后一个元素，我尝试使用**`HtmlFindExpression`**但无法找出正确的表达式。

```
 Element element = WebBrowser.CurrentBrowser.WaitForElement(new HTMLFindExpression("class=case-note-text"),5000, true)
            string value = element.InnerText;
            StringAssert.AreEqualIgnoringCase("Testing", value, string.Format("abc")); 
```

# scala - 为什么浏览 Scala api 这么难？

> ID：16210876
> 
> 赞同：2
> 
> 时间：2013-04-25T09:15:50.147
> 
> 标签：scala, scaladoc

首先，我有一个`#::`Stream 的问题查找方法。从中得到了[解决](https://stackoverflow.com/questions/16162193/what-is-method)。

现在我正在寻找以下方法`Stream`

```
 def iterate[A](start: A, len: Int)(f: A => A): Stream[A] 
```

[Stream API](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)没有提及它。

其次，在 Scala Doc 中，为什么他们不能将所有内部类都定义在同一个父类本身中。为什么用户必须去点击`c`左侧面板上的字符来搜索[Stream.consWrapper](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream$$ConsWrapper)当他可以直接在文档中阅读它`Stream`本身时？

我错过了什么吗？我是 Scala 新手（3 个月），但是如果一个新用户不能习惯它，那么它大部分将无法使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:47:20.827

`iterate`不是`Stream`类的方法，而是`Stream`对象的方法。[此处](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream$)对其进行了描述。

从`Stream`您链接的类的 scaladoc 页面，您可以通过单击顶部的“C”（用于“类”）图标直接转到`Stream`对象的 scaladoc 页面，然后单击“O”图标返回.

至于查找运算符，您可以点击左侧搜索面板顶部的“#”，进入[该页面](http://www.scala-lang.org/api/current/index.html#index.index-_)，该页面列出了标准库的所有运算符。在那里你可以找到`#::`运营商的提及，然后点击它。

至于 ConsWrapper，它是`Stream`对象的成员，而不是`Stream`类的成员。果然，您会在`Stream`对象的 scaladoc 页面上的“类型成员”部分中找到它。

# laravel - Beanstalkd / Pheanstalk - 根本无法正常工作！(WAMP/PHP/LARAVEL)

> ID：16210877
> 
> 赞同：2
> 
> 时间：2013-04-25T09:15:51.170
> 
> 标签：laravel, queue, laravel-4, beanstalkd, pheanstalk

所以我试图让 Pheanstalk 队列在内置的 Laravel 4 中工作（我必须作曲安装 beanstalkd 库）。

现在已经完成了......我正在尝试将工作发送给我的工人。每次我这样做时都会收到此错误

```
[2013-04-25 08:55:03] log.ERROR: exception 'Symfony\Component\Debug\Exception\FatalErrorException' with message 'Error: Maximum execution time of 30 seconds exceeded in C:\wamp\www\adam\L4\vendor\pda\pheanstalk\classes\Pheanstalk\Socket\StreamFunctions.php line 55' in C:\wamp\www\adam\L4\vendor\pda\pheanstalk\classes\Pheanstalk\Socket\StreamFunctions.php:55
Stack trace:
#0 C:\wamp\www\adam\L4\bootstrap\compiled.php(5006): Symfony\Component\Debug\ErrorHandler->handleFatal()
#1 [internal function]: Illuminate\Exception\ExceptionServiceProvider->Illuminate\Exception\{closure}()
#2 {main} [] [] 
```

我的日志中也出现此错误：

```
exception 'ErrorException' with message 'Catchable Fatal Error: Argument 1 passed to Illuminate\Queue\Jobs\Job::resolveAndFire() must be of the type array, null given 
```

一旦我运行'php artisan queue：listen'，它似乎就被循环了。

我已经下载了 beanstalkd 的控制台并将其配置为监听服务器 localhost:11300。

这给了我一个错误：未处理的响应。

我已经更改了我的 httpd.conf 并添加了 Listen 11300 并重新启动。

任何想法我哪里出错了？我看不到太多 Beanstalkd 的文档，而 Laravel 文档也没有帮助。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T09:16:51.610

抱歉`beanstalkd`在 Windows 上不可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T14:05:20.090

为了尝试为任何阅读的人合法地回答一个老问题，我提出以下建议。

作为使用 Pheanstalk 的替代方案，您也许可以使用 Redis。有一个 Chocolatey 安装：

[https://chocolatey.org/packages/redis-64](https://chocolatey.org/packages/redis-64)

您可以安装为 Windows 服务并在安装后使用以下命令访问命令行工具：

```
 C:\> redis-cli
    C:\> 127.0.0.1:6379> <your command here> 
```

您也许可以使用 Forever 之类的东西来保持您的队列命令在后台运行（如果需要，在失败时自动重新启动）：

[https://www.npmjs.com/package/forever](https://www.npmjs.com/package/forever)

使用类似的命令

```
 forever -c php artisan queue:listen -a -l C:\somelogdirectory\somelogfile.txt 
```

# javascript - 仅删除字符串中的最后一个空格 - Javascript

> ID：16210879
> 
> 赞同：3
> 
> 时间：2013-04-25T09:15:57.587
> 
> 标签：javascript, trim

如何从用户输入中仅删除最后一个空格（如果有）？例子：

```
var str = "This is it   "; 
```

如何删除最后一个 1-4 个空格但仍保留前 2 个空格（在此之间，是和它之间）

问题已解决 - 非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:22:44.403

使用这样的函数：

```
String.prototype.rtrim = function () {
    return this.replace(/((\s*\S+)*)\s*/, "$1");
} 
```

称呼：

```
str.rtrim() 
```

如果您喜欢删除所有前导空格，请添加：

```
String.prototype.ltrim = function () {
    return this.replace(/\s*((\S+\s*)*)/, "$1");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:30:50.993

试试这个，让我知道它是否有帮助。

```
 var str = "This is it  ";
    alert(str.replace(/(^[\s]+|[\s]+$)/g, '')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:32:20.233

你可以为此使用jquery trim，

```
var str = "This is it   ";
$.trim(str); 
```

# ios - 主视图控制器在点击项目并快速将方向从纵向更改为横向后消失

> ID：16210880
> 
> 赞同：0
> 
> 时间：2013-04-25T09:15:59.033
> 
> 标签：ios, ipad, master-detail

Xcode 4.5

iPad设备的应用程序。

对于 iPad 主视图控制器应用程序，主视图控制器在点击项目并快速将方向从纵向模式更改为横向模式后消失。

我为 iPad 的 Master-Template 应用程序使用了默认模板。在纵向模式（iPad）中，我点击主控制器上的“+”按钮并添加了大约 10 个项目。之后，我点击了主控制器中突出显示的项目之一（参考屏幕截图），然后快速将方向从纵向更改为横向。在横向模式下，主控制器消失并出现空白（黑色）屏幕。

我进一步分析并在以下代码行中发现了问题

[self.masterPopoverControllerdismissPopoverAnimated:YES];

在 DetailViewController.m

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }        
} 
```

如果我通过否，`[self.masterPopoverController dismissPopoverAnimated:NO];` 那么一切正常。

如何解决这个问题？

谢谢

![纵向模式下适用于 iPad 的 Master-Detail 应用程序](https://i.stack.imgur.com/dNRSF.png)

![导航/主控制器不见了](https://i.stack.imgur.com/0Okdk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T15:30:50.940

就我而言，这是 IB 中的一个复选标记：使用自动布局

当我取消选中它时，一切都旋转得很好。

希望能帮助到你！

# laravel - Laravel 4 中的 Twig 模板

> ID：16210881
> 
> 赞同：10
> 
> 时间：2013-04-25T09:16:09.587
> 
> 标签：laravel, laravel-4, twig, blade

我想用 TWIG 模板代替 BLADE，这可能吗？

有计划支持 TWIG 吗？由于它是 Symfony 2 的一部分，而 Laravel 4 依赖于 Symfony，这似乎是一个好主意。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T09:30:27.383

有一个作曲家包[TwigBridge](https://github.com/rcrowe/TwigBridge)可以做到这一点。

# php - 使用 Propel 选择特定列而不使用别名

> ID：16210882
> 
> 赞同：4
> 
> 时间：2013-04-25T09:16:14.663
> 
> 标签：php, propel

我在使用 Propel 1.6 提供的方法重写一个简单的查询时遇到了很多麻烦。

查询如下：

```
SELECT type_id, COUNT(id) as `count` FROM visit GROUP BY type_id; 
```

使用 Propel，我编写了以下内容：

```
$visitCount = VisitQuery::create()
                ->withColumn('COUNT(id)', 'count')
                ->groupBy('TypeId')
                ->find(); 
```

这会生成以下查询：

```
SELECT visit.ID, visit.JOB_ID, visit.ENGINEER_ID,
       visit.TYPE_ID, visit.VISIT_DATE, visit.STATUS, COUNT(id) AS count 
FROM `visit` 
GROUP BY visit.TYPE_ID 
```

哪个有效，但**我只需要列`type_id`和`count`**，所以我尝试添加以下内容：

```
$visits = VisitQuery::create()
            ->withColumn('COUNT(id)', 'count')
            ->select(array('TypeId'))
            ->groupBy('TypeId')
            ->find(); 
```

这会生成以下（工作）查询：

```
SELECT COUNT(id) AS count, visit.TYPE_ID AS "TypeId" 
FROM `visit` GROUP BY visit.TYPE_ID 
```

但是，我不想为该`type_id`列起别名。我尝试将实际的列名传递给`select`数组 ( `->select(array('type_id'))`)，但这会导致以下查询（这显然不起作用）：

```
SELECT COUNT(id) AS count,  AS "type_id" FROM `visit` GROUP BY visit.TYPE_ID 
```

**如何在`type_id`没有别名的情况下检索该列？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:07:16.800

Propel 将列名抽象化，这样您的 PHP 就不必知道它们。

***来自[PropelORM.org](http://propelorm.org/reference/model-criteria.html#relational-api)：***

> 操作对象模型名称允许您脱离实际的数据存储，并更改数据库名称，而不必更新 PHP 代码。

TypeID 将是`phpName`您的架构中的任何内容。尝试使用它而不是 mysql 列名。

考虑到这一点，如果你真的想使用列的实际名称，你可以使用 propel 的[自省类](http://propelorm.org/cookbook/runtime-introspection.html)来实现。例如：

```
var_dump(VisitPeer::getTableMap()->getColumnByPhpName('TypeId')->getName());
var_dump(VisitPeer::getTableMap()->getColumn('type_id')->getPhpName()); 
```

但正如[文档](http://propelorm.org/reference/model-criteria.html#overview)本身所说：

> 请记住始终在 PHP 代码中使用 phpName

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T08:17:35.170

您显然是在尝试查询数据，而不是与您的业务模型进行交互。因此，在这种情况下，使用 ORM 可能会适得其反。对于这种逻辑，我建议您使用普通的旧 PDO（Propel 封装）。

我在 Propel 博客上推荐这个资源，回答有关如何使用 ORM 编写特殊查询的最常见问题：http: [//propel.posterous.com/how-can-i-write-this-query-using-an-orm](http://propel.posterous.com/how-can-i-write-this-query-using-an-orm)

# button - 调整 Spinbox 按钮的大小

> ID：16210887
> 
> 赞同：1
> 
> 时间：2013-04-25T09:16:27.703
> 
> 标签：button, resize, size, tkinter, option

有没有办法调整 SpinboxWidget (Tkinter) 中使用的按钮的大小？我正在尝试构建一个触摸屏优化的 GUI。我在文档中找不到任何合适的选项，但也许还有其他方法，或者我只是没有看到该选项。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:40:39.677

我不知道如何访问`Spinbox`按钮，但您可以使用[tkinter.tix](http://docs.python.org/3.0/library/tkinter.tix.html#tkinter.tix.Control)`Control`中的小部件：

```
import tkinter.tix as tix
root = tix.Tk()
c = tix.Control(root)
c.pack()
decr = c.subwidget('decr')
incr = c.subwidget('incr')
decr['height'] = incr['height'] = 100
decr['width'] = incr['width'] = 100
root.mainloop() 
```

# java - 通过可能的对话框向用户提供前台下载

> ID：16210894
> 
> 赞同：2
> 
> 时间：2013-04-25T09:16:43.313
> 
> 标签：java, android, android-intent, android-dialog, android-download-manager

我正在与可用性设计作斗争。

让我们有一个只有一个权限的应用程序，`android.permission.INTERNET`.

我想从远程 URL（我无法控制服务器端）下载图像，但下载它以便用户可以选择是否以及在何处下载该文件。
显示流程批准和/或选择最终目的地的对话框。

我考虑了这些解决方案：

*   下载管理器使用`setDestinationInExternalPublicDir`
    *   两个bug，不想加`WRITE_EXTERNAL_STORAGE`权限，用户无法决定是否下载
*   `Intent.ACTION_VIEW`用于启动浏览 器
    *   独立将向用户显示图像，但不会自动启动下载
*   使用`Intent.ACTION_VIEW`和自定义代理脚本
    *   服务器不是我的，我不想提供我的服务器端代理下载强制脚本
*   将 HTTP(S) 替换为 FTP，让用户自行决定
    *   不起作用，因为该服务器上的图像无法通过 FTP 获得
*   为下载应用程序提供兼容性（例如“下载所有文件”、各种“文件管理器”……）

**如何在不扩展当前权限或依赖非标准应用的情况下实现这一目标？**

* * *

链接到这个 github 问题[https://github.com/smarek/Simple-Dilbert/issues/1](https://github.com/smarek/Simple-Dilbert/issues/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:29:11.257

您的应用程序下载文件并可能将它们写入外部存储。我觉得您应该请求[WRITE_EXTERNAL_STORAGE（这也意味着 READ_EXTERNAL_STORAGE）](http://developer.android.com/training/basics/data-storage/files.html)权限，以准确表示您的应用程序所做的事情。

然后你的第一个解决方案有效。在进行下载调用之前，您只需要任何提示用户的方法。或者以其他方式使主动接受成为您工作流程的一部分。

# php - PHP PDO 日期时间格式

> ID：16210895
> 
> 赞同：1
> 
> 时间：2013-04-25T09:16:47.847
> 
> 标签：php, mysql, datetime, pdo

所以我正在使用 PHP PDO 从 mysql 加载我创建的名为“用户”的类。我的对象包含几个字段，包括 3 个日期字段。但是由于某种原因，当我转储对象（使用 var_export）时，我可以看到日期的存储方式不同。1 作为 unix 时间，其他作为日期字符串

这是转储；

```
'createdtime' => '2013-04-19 09:36:42',

'logintime' => '2013-04-25 01:32:50',

'lastactiontime' => '1366880785', 
```

所有三个字段都在 MYSQL 中定义为 DATETIME，所以我不明白为什么会发生这种情况。

有任何想法吗？

我的 PHP 代码是；

```
$STH = $DBH->prepare('SELECT * from user where id=:id');        
$STH->bindParam(':id', $id);
$STH->execute();        

$STH->setFetchMode(PDO::FETCH_CLASS, 'User');               
$user = $STH->fetch(); 
```

我一定在某个地方做错了什么，但是什么？

# jquery - 在本地运行 Javascript 而不是连接到 JQuery

> ID：16210896
> 
> 赞同：0
> 
> 时间：2013-04-25T09:16:52.000
> 
> 标签：jquery, local

是否可以从我的网站本地运行脚本，而不是将其连接到 Jquery.com 托管的库/查询？目前，它在线连接到另一个页面以执行查询，但是所有功能都在代码中，我需要它在本地运行，而不需要在线库或后台任何库

谢谢

代码：

```
<script type="text/javascript" src="http://www.freshessays.com/jquery.min.js"></script>!-- Start Calculator block --

table class="fe_calc fe_block_templ"
<tr>
    <td>Academic level:</td>
    <td>
        <select id="calform_academic_level1" name="academic_level" onchange="calcountPrice1();" style="width:140px;">
            <option value="0">Please select</option>
            <option value="1">High School</option>
            <option value="2">Bachelor</option>
            <option value="3">Master</option>
            <option value="4">PhD</option>
            <option value="5">Admissions Help</option>
        </select>
        <em class="validator_exp"></em>
    </td>
</tr>
<tr>
    <td>Deadline:</td>
    <td>
        <select id="calform_deadline1" name="deadline" onchange="calcountPrice1();" style="width:140px;">
            <option value="0" selected="selected">Please select</option>

            <option value="1">24 hours</option>

            <option value="2">48 hours</option>

            <option value="3">3 days</option>

            <option value="4">4 days</option>

            <option value="5">5 days</option>
            <option value="6">6 days</option>
            <option value="7">7 days</option>

            <option value="8">8 days</option>
            <option value="9">9 days</option>
            <option value="10">10 days</option>
            <option value="11">11 days</option>

            <option value="12">12 days</option>
            <option value="13">13 days</option>
            <option value="14">14+ days</option>
        </select>

        <em class="validator_exp"></em>
    </td>
</tr>

<tr>
    <td id="pages_name1">Number of pages:</td>
    <td>

        <input maxlength="3" style="width: 40px;" id="calform_pages1" name="pages" 
onkeyup="calcountPrice1();" onkeydown="calcountPrice1();" onchange="calcountPrice1();" type="text">
        <em class="validator_exp"> </em>
    </td>
</tr>
<tr>
    <td>The price is:</td>
    <td>
        <span id="calprice_div1">AED 0</span>
    </td>
</tr>
<tr>
    <td></td>

</tr>
</table>

var calvalid;

function calvalidate_field (field_id) {
var value = $("#"+field_id).val();
var tmp_reg_exp = $("#"+field_id).next(".validator_exp").html();
reg_exp = new RegExp(tmp_reg_exp);
if (!value.match(reg_exp) || (field_id == "form_repeat_password" && !check_password("form_new_user_password","form_repeat_password"))) {
    calvalid = false;
    return false;
}
return true;
}

var caldeadline = new Array
(new Array ( 0,135,153,188,235,318),
new Array ( 0,124,141,170,206,288),
new Array ( 0,106,129,153,177,235), new Array ( 0,106,129,153,177,235), new Array ( 0,106,129,153,177,235), new Array ( 0,106,129,153,177,235),
new Array ( 0,94,118,141,165,218), new Array ( 0,94,118,141,165,218),new Array ( 0,94,118,141,165,218),new Array ( 0,94,118,141,165,218),
new Array ( 0,94,118,141,165,218), new Array ( 0,94,118,141,165,218),new Array ( 0,94,118,141,165,218),
new Array ( 0,82,106,129,153,200));

$(document).ready(function() {
$(".right_email").attr("href","mai"+"lto:su"+"ppor"+"t@fres"+"hessays.c"+"om").text("su"+"ppor"+"t@fres"+"hessays.c"+"om");
$("#calform_deadline").val(0);
$("#calform_academic_level").val(0);
});

function calcountPrice() {
calvalid = true;

calvalidate_field("calform_academic_level");

if (calvalid) {
    var al = $("#calform_academic_level").val();
}

var add = 1;
var round_off = false;
var pages_name = 1;     

if (pages_name == 1) {            
    $("#pages_name").text("Number of pages:");    
}

calvalidate_field("calform_deadline");

if (!calvalid) {
    $("#calprice_div").text("AED 0");            
} else {

    var total = caldeadline[$("#calform_deadline").val()-1][al];
    var price_mod = 0.85;
    var work = 1;
    total = Math.round(Math.round(total*price_mod*add*(round_off? 10 : 1))*work)/(round_off? 10 : 1);            
}

var valid1 = calvalid;
calvalid = true;
calvalidate_field("calform_pages");

if (!calvalid) {
    $("#calprice_div").text("AED 0");            
}

if (calvalid && valid1) {
    totalp = total*$("#calform_pages").val();
    $("#calprice_div").text("AED "+Math.round(totalp*100)/100);            
}

}

function calcountPrice1() {
calvalid = true;

calvalidate_field("calform_academic_level1");

if (calvalid) {
    var al = $("#calform_academic_level1").val();
}

var add = 1;
var round_off = false;
var pages_name = 1;         

if (pages_name == 1) {            
    $("#pages_name1").text("Number of pages:");    
}
calvalidate_field("calform_deadline1");

if (!calvalid) {
    $("#calprice_div1").text("AED 0");            
} else {

    var total = caldeadline[$("#calform_deadline1").val()-1][al];
    var price_mod = 0.85;
    var work = 1;
    total = Math.round(Math.round(total*price_mod*add*(round_off? 10 : 1))*work)/(round_off? 10 : 1);            
}

var valid1 = calvalid;
calvalid = true;
calvalidate_field("calform_pages1");

if (!calvalid) {
    $("#calprice_div1").text("AED 0");            
}

if (calvalid && valid1) {
    totalp = total*$("#calform_pages1").val();
    $("#calprice_div1").text("AED "+Math.round(totalp*100)/100);            
}

}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:21:54.213

[您可以从此处](http://jquery.com/download/)下载脚本文件并将其存储在本地计算机上。然后`<script src="path/to/jquery.min.js" type="text/javascript></script>`在您的 HTML 页面中使用以引入 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:39:38.553

您想要实现的目标是完全可能的，但您必须将 jQuery 选择器和方法更改为 javascript 版本的选择器和方法，例如：

如果你有`$('#selector')`哪个表示选择，`id`那么你可以做的是：

改变这个：

```
$('#selector') 
```

对此：

```
document.getElementById('selector') 
```

这同样适用于以下方法：

```
.val() 
```

至

```
.value 
```

所以改变这个：

```
 $('#selector').val() 
```

对此：

```
document.getElementById('selector').value; 
```

您可以将`.text()`jQuery更改`.innerHTML`为 javascript。

当然`$(document).ready(function() {....});`必须更改为javascript的`window.onload=function(){...};`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:57:33.550

要么在本地下载并使用 jQuery，要么只使用纯 JS

这是我进行一些更改后的脚本[演示](http://jsfiddle.net/mplungjan/paucL/)。它不起作用，因为 HTML 不包含所需的所有内容，例如正则表达式

```
var calvalid;

function calvalidate_field (field_id) {
  var fld = document.getElementById(field_id);
  var value = fld.value;
  var tmp_reg_exp = fld.parentNode.getElementsByClassName("validator_exp")[0].innerHTML;
  reg_exp = new RegExp(tmp_reg_exp);
  if (!value.match(reg_exp) || (field_id == "form_repeat_password" && !check_password("form_new_user_password","form_repeat_password"))) {
    calvalid = false;
    return false;
  }
  return true;
}

var caldeadline = [
  [0,135,153,188,235,318],[0,124,141,170,206,288],[0,106,129,153,177,235], 
  [0,106,129,153,177,235],[0,106,129,153,177,235], [0,106,129,153,177,235],
  [0,94,118,141,165,218],[0,94,118,141,165,218],[0,94,118,141,165,218],
  [0,94,118,141,165,218],[0,94,118,141,165,218],[0,94,118,141,165,218],
  [0,94,118,141,165,218],[0,82,106,129,153,200]
];

window.onload=function() {
  // you need to change the email from class to ID:
  var email = document.getElementById("right_email");
  email.setAttribute("href","mai"+"lto:su"+"ppor"+"t@fres"+"hessays.c"+"om");
  email.innerHTML="su"+"ppor"+"t@fres"+"hessays.c"+"om";

  // I added <a href="#" id="right_email"></a>
  document.getElementById("calform_deadline1").value=0;
  document.getElementById("calform_academic_level1").value=0;
};

function calcountPrice() {
  calvalid = true;
  calvalidate_field("calform_academic_level");
  if (calvalid) {
    var al = document.getElementById("calform_academic_level").value;
  }

  var add = 1;
  var round_off = false;
  var pages_name = 1;     
  if (pages_name == 1) {
    document.getElementById("pages_name").innerHTML="Number of pages:";    
  }

  calvalidate_field("calform_deadline");
  if (!calvalid) {
    document.getElementById("calprice_div").innerHTML="AED 0";
  } else {
    var total = caldeadline[document.getElementById("calform_deadline").value-1][al];
    var price_mod = 0.85;
    var work = 1;
    total = Math.round(Math.round(total*price_mod*add*(round_off? 10 : 1))*work)/(round_off? 10 : 1);
  }

  var valid1 = calvalid;
  calvalid = true;
  calvalidate_field("calform_pages");
  document.getElementById("calprice_div").innerHTML="AED 0";

  if (calvalid) {
    if (valid1) {
      totalp = total*document.getElementById("calform_pages").value;
      document.getElementById("calprice_div").innerHTML="AED "+(Math.round(totalp*100)/100);
    }
  }
}

function calcountPrice1() {
  calvalid = true;
  calvalidate_field("calform_academic_level1");
  if (calvalid) {
    var al = document.getElementById("calform_academic_level1").value;
  }
  var add = 1;
  var round_off = false;
  var pages_name = 1;         

  if (pages_name == 1) {
    document.getElementById("pages_name1").innerHTML="Number of pages:";    
  }
  calvalidate_field("calform_deadline1");
  document.getElementById("calprice_div1").innerHTML="AED 0";

  if (calvalid) {
    var total = caldeadline[document.getElementById("calform_deadline1").value-1][al];
    var price_mod = 0.85;
    var work = 1;
    total = Math.round(Math.round(total*price_mod*add*(round_off? 10 : 1))*work)/(round_off? 10 : 1);
  }
  var valid1 = calvalid;
  calvalid = true;
  calvalidate_field("calform_pages1");
  if (calvalid) {
    if(valid1) {
     totalp = total*document.getElementById("calform_pages1").value;
     document.getElementById("calprice_div1").innerHTML="AED "+Math.round(totalp*100)/100;
   }
  }
} 
```

# sql - SSIS Web 服务任务，WSDL 文件无效错误

> ID：16210900
> 
> 赞同：0
> 
> 时间：2013-04-25T09:16:58.923
> 
> 标签：sql, web-services, ssis, wsdl

我正在尝试从 Sql 服务器作业运行带有 Web 服务任务的 SSIS 包，它失败并出现以下错误

信息

> 以用户身份执行：UKDBT91DB05V\SYSTEM。Microsoft (R) SQL Server Execute Package Utility Version 10.50.2500.0 for 64-bit 版权所有 (C) Microsoft Corporation 2010。保留所有权利。开始：10:08:01 错误：2013-04-25 10:08:02.68 代码：0xC002F304
> 来源：DAD Web 服务任务描述：发生错误并显示以下错误消息：“Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebserviceTaskException：输入的 Web 服务描述语言 (WSDL) 文件无效。在 Microsoft.SqlServer.Dts Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebServiceTask.executeThread() 处的 .Tasks.WebServiceTask.WebServiceTaskUtil..ctor（对象连接，字符串下载的WSDL）”。结束错误 DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：10:08:01 结束时间：10:08:02 经过时间：1.014 秒。包执行失败。步骤失败。

# c++ - 将指向成员函数的指针传递给c ++中的父级

> ID：16210903
> 
> 赞同：4
> 
> 时间：2013-04-25T09:17:11.723
> 
> 标签：c++

如何使以下代码工作？我不能让成员成为静态的，父母不知道孩子，我也无法获得提升。我不使用虚函数的原因是子类应该能够定义 1-N 个处理程序。

```
class Parent
{
public:
    void registerFileHandler(string ext, memFuncPtr);
};

class Child : public Parent
{
    Child()
    {
        registerFileHandler("jpg", &Child::loadJpg);
        registerFileHandler("png", &Child::loadPNG);
    }
    void loadJpg(string filename);
    void loadPNG(string filename);
}; 
```

编辑：有很多答案。最适合我的使用关键字erasure、std::bind 和std::function，它们当然依赖于c++11。这是一个完整的可编译示例：

```
#include <string>
#include <map>
#include <iostream>
#include <functional>

using namespace std;

class Parent
{
public:
    void load(string filename)
    {
        // See if we can find a handler based on the extension.
        for(auto it = handlers.begin();it!=handlers.end();it++)
            if(filename.substr(filename.size()-it->first.size(), it->first.size())==it->first)
                it->second(filename);
    }
    template<typename Class>
    void registerFileHandler(Class* p, void (Class::*func)(string), string ext)
    {
        using namespace std::placeholders; //for _1, _2, _3...
        handlers[ext] = std::bind(func, p, _1);
    }
private:
    map<string, std::function<void(string)> > handlers;
};

class Child : public Parent
{
public:
    Child()
    {
        registerFileHandler(this, &Child::loadJpg, "jpg");
        registerFileHandler(this, &Child::loadPNG, "png");
    }
    void loadJpg(string filename)
    {
        cout << "loading the jpeg "<< filename << endl;
    }
    void loadPNG(string filename)
    {
        cout << "loading the png "<< filename << endl;
    }
};

int main(int argc, char* argv[])
{
    Child child;
    child.load("blah.jpg");
    child.load("blah.png");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:34:11.023

您需要*某种*形式的类型擦除。假设您不能使用任何已经存在的复杂的（`boost::function`, `std::function`），那么您可以自己动手：

```
class MemFuncPtr {
    void *obj;
    void (*caller)(void*, string);
  public:
    MemFuncPtr(void *obj, void(*caller)(void*, string)) : obj(obj), caller(caller) {}
    void operator()(string filename) {
        caller(obj, filename);
    }
};

class Child : public Parent
{
    Child()
    {
        registerFileHandler("jpg", MemFuncPtr(this, &jpgcaller));
        registerFileHandler("png", MemFuncPtr(this, &pgncaller));
    }
    void loadJpg(string filename);
    void loadPNG(string filename);
  private:
    static void jpgcaller(void *obj, string filename) {
        static_cast<Child*>(obj)->loadJpg(filename);
    }
    static void pngcaller(void *obj, string filename) {
        static_cast<Child*>(obj)->loadPng(filename);
    }
}; 
```

`static`我认为您可以使用带有指向成员模板参数的函数模板来摆脱这些函数。但是如果我在没有测试的情况下编写它，我可能会弄乱那个代码......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:41:04.817

怎么样[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)和[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
class Parent
{
public:

    void registerFileHandler(string ext, const std::function<void(string)> &f)
    {
    }
};

class Child : public Parent
{
public:
    Child()
    {
        using namespace std::placeholders; //for _1, _2, _3...
        registerFileHandler("jpg", std::bind(&Child::loadJpg, this, _1));
        registerFileHandler("png", std::bind(&Child::loadPNG, this, _1));
    }

    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T10:08:10.753

关于如何解决传递函数指针的很多建议——你可以稍微重新设计一下——并正确使用继承..

```
class FileLoader
{
  virtual void load() = 0; // real load function
};

class LoadManager
{
  // Here is your registry
  std::map<std::string, std::uniqe_ptr<FileLoader>> _loaders;
};

class JpegLoader : public FileLoader
{
};

class BitmapLoader : public FileLoader
{
};

// etc.

// Now register these with the LoadManager and use from there... 
```

这样的设计是不是显得更清晰了一点？显然这个建议是基于你在那里发布的简单片段，如果你的架构更复杂，那么它就是不同的故事......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:28:36.370

为了使您的代码正常工作，`registerFileHandler()`应将指针传递给将加载图像的实际子对象。

定义可能更好，`static Child Child::loadPNG(string filename)`但这取决于 Child 和 Parent 对象的实际作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:34:19.230

```
class Child;  // unfortunately this is needed

class Parent
{
public:
    void registerFileHandler(string ext, void (Child::*mem_fn) (string), Child* obj) {
                                       // ^^^^the member func  ^^^^^^^^  //the object to be used 
         (obj->*mem_fn)("test");
    }
};

class Child : public Parent
{
    Child()
    {
        registerFileHandler("jpg", &Child::loadJpg, this);
        registerFileHandler("png", &Child::loadPNG, this);
                                                            // You need to pass this.
    }
    void loadJpg(string filename);
    void loadPNG(string filename);
}; 
```

* * *

但是，您所做的可能是矫枉过正。有什么理由不能使用这样的东西吗？

```
class Parent
{
public:
    virtual void registerFileHandler(string ext)  = 0;
};

class Child : public Parent
{
    Child()
    {
        registerFileHandler("jpg");
        registerFileHandler("png");
    }
    void loadJpg(string filename);
    void loadPNG(string filename);

    virtual void registerFileHandler(string ext)   {
        loadJpg(ext);
        loadJpg(ext);
    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T09:44:25.400

声明方面，你可以逃脱

```
class Parent
{
public:
    template <typename Child>
    void registerFileHandler(string ext, void (Child::*memFuncPtr)(string filename));
}; 
```

当然，这并不能解决如何存储这些指针的问题。一种常见的解决方案是

```
struct Handler {
   virtual ~Handler() { };
  virtual void Load(Parent*, std::string) = 0;
};
template<typename Child>
struct ChildHandler {
  void (Child::*memFuncPtr)(string filename);
  virtual void Load(Parent* p, string filename) {
      dynamic_cast<Child&>(*p).*memFuncPtr(filename);
  }
}; 
```

这当然是另一种形式的类型擦除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T09:58:45.483

```
class Parent
{
public:
    // so we don't need to static-cast at the call site
    template <typename ChildT>
    void registerFileHandler(string ext, void (ChildT::*func)(string)) {
         doRegisterFileHandler(ext, static_cast<void (Parent::*func)(string)>(func));
    }
    void doRegisterFileHandler(string ext, void (Parent::*func)(string));
};

class Child : public Parent
{
    Child()
    {
        registerFileHandler("jpg", &Child::loadJpg);
        registerFileHandler("png", &Child::loadPNG);
    }
    void loadJpg(string filename);
    void loadPNG(string filename);
}; 
```

您像往常一样调用该函数：

```
this->*func(string) 
```

在父母。

规范说这应该有效（C++03 中的 5.2.9/9，C++11 中的 5.2.9/12）并且 MFC 在消息映射中使用它。然而，Microsoft Visual C++ 是编译器，它实际上并不*适用*于所有情况。因为微软提出了这种“成员指针的最小表示”，其中指向成员的指针表示不同，具体取决于类是否使用多重继承或虚拟继承。因此，如果子级使用多重继承，而父级没有，则无法进行强制转换，因为指向具有多重继承的类成员的指针不适合指向具有单继承的类成员的指针。有一个编译器选项可以始终使用通用格式，但是使用和不使用它编译的代码是二进制不兼容的。

# android - 在微调器 onItemSelected 中隐藏 Edittext

> ID：16210905
> 
> 赞同：-4
> 
> 时间：2013-04-25T09:17:26.207
> 
> 标签：android, android-layout, visibility, android-edittext, android-spinner

在我的一个布局中，我有一个 EditText，仅在选择一个微调器选项时才显示。在其余选项中隐藏。

此操作不起作用，当我选择一个选项时，EditText 不会隐藏或显示，但如果我再次选择相同的选项，它的工作正常。

我在微调器 onItemSelected 中管理 EditText 可见性。

有什么想法或解决方案吗？

我没有发布我的代码，因为我们在代码中有很多层次结构并包含在布局中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:29:56.643

哦，这很简单，你只需要把那个东西移到另一个东西上，它必须在第三个东西之后，好吗？

# rubygems - 捆绑更新 FileOverflow - 文件太大

> ID：16210910
> 
> 赞同：4
> 
> 时间：2013-04-25T09:17:45.310
> 
> 标签：rubygems, bundler

我没有很多构建 gem 的经验（工作流程等）。

无论如何，当我尝试重新安装本地 gem 时，我收到此错误：

```
Gem::Package::TarWriter::FileOverflow: You tried to feed more data than fits in the file. 
```

这是在我卸载 gem 之后，用 gem build 重新打包它并用 bundler 更新它。

谁能告诉我这个错误是什么意思？我假设宝石太大了。目前，它是 148K。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T21:14:55.833

您是否有可能将 gem 本身包含在文件列表中？

检查这个[问题](https://github.com/rubygems/rubygems/issues/623)，提供更好的错误文本的代码仍然没有像在 ruby​​gems >= 2.2 中那样发布

# installation - 如何在 CentOS 6.4 上安装 jdk 1.7

> ID：16210916
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:04.380
> 
> 标签：installation, centos, java

这个问题让我抓狂。

我从 Oracle 网站下载了 jdk 1.6 和 1.7，并将其解压到

/usr/java.

并在 /etc/profile 中添加一些路径信息。

```
export JAVA_HOME="/usr/java/jdk1.7"
PATH="$JAVA_HOME/bin:$PATH" 
```

并执行源命令。

```
source /etc/profile 
```

最后，当我执行 java -version 时，它会发回以下消息。

```
bash: /usr/bin/java: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
```

我也试过1.6，但它是一样的。

（当然，我做 chmod 的事情和其他人..）

非常感谢您的阅读，以及您的提前建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:31:46.257

我解决了这个问题。

OMG，我下载了错误的文件。T^T

# indexing - index.html优先时如何访问index.php页面

> ID：16210917
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:05.413
> 
> 标签：indexing, url-routing

我有一个使用**index.php**页面的 wordpress 网站。

现在该网站还没有上线，所以我为临时页面添加了一个**index.html**页面 - 这样用户就不会看到 index.php 页面了。

但是现在我在访问时无法访问我的 index.php 文件：[http://mysite.com/index.php](http://mysite.com/index.php) - 它直接将我重定向到[http://mysite.com](http://mysite.com)，它为 index.html 页面提供服务

如何查看我的 index.php 页面？

注意：我的 htaccess 文件有以下内容：

```
DirectoryIndex index.html index.php 
```

如果我删除它，人们看到的默认页面是 index.php，我不希望他们看到。只有我希望能够查看 index.php 文件

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T00:29:20.647

我和你的情况一样，我找不到任何方法来查看服务器上的 index.php 文件。

我建议您在开发网站时创建另一个安装了 wordpress 的目录。完成所需的一切（创建页面、创建自定义主题等）后，只需使用 wordpress 中内置的导出功能导出内容并将其导入公共 wordpress。插件和主题也是如此，您只需要手动完成，因为它们没有导出功能。

如果您的服务器上没有足够的空间，您可以使用[EasyPhp](http://www.easyphp.org/)在您自己的计算机上进行操作。它基本上将每个服务器组件安装在您的计算机上，以便可以从您的浏览器访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T00:40:51.160

将用户引导至 index.php，并在文档的开头检查您的特定 IP 地址，或者检查允许您查看 index.php 页面并将其他所有人重定向回 index.html 的 cookie。当您准备好启动页面时，只需删除此功能，其他人也将能够查看 index.php 文件。

# javascript - 为什么我的游戏角色在不同的电脑上速度不同？

> ID：16210920
> 
> 赞同：1
> 
> 时间：2013-04-25T09:18:10.610
> 
> 标签：javascript, animation, html5-canvas

我正在使用 Java Script 开发在线游戏。我正在使用 setInterval (movimage, 10) 方法来移动游戏角色。但是我看到游戏角色的移动速度是不一样的都是电脑。请给我建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:24:47.490

而不是 setInterval 你应该使用 requestAnimationFrame ( [https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame) )。

尝试比屏幕绘制速度更快地更新某些内容是没有意义的。您的目标是 60fps，即每帧约 16 毫秒。

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)有更多关于如何做到这一点的信息。

浏览器支持非常好（[http://caniuse.com/#feat=requestanimationframe](http://caniuse.com/#feat=requestanimationframe)），简而言之，除了 Android Stock 浏览器之外的所有当前浏览器。

如果您必须在 IE9 及更低版本中使用此功能，[https://gist.github.com/paulirish/1579671](https://gist.github.com/paulirish/1579671)可以很好地模拟这些浏览器中的行为。（但老实说，我怀疑这将是您最后的担忧，尤其是在缺乏`canvas`……方面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:25:25.313

即使脚本几乎什么都不做，每个时间间隔也需要超过 10 微秒：

```
function interval(){
 var i=0
 intervalID= setInterval(function(){
   console.log("called",new Date().getTime());
   i++;
   if(i>=10){
     clearInterval(intervalID);
   }
 },10);

}
interval() 
```

当计算机速度较慢或浏览器速度较慢时，您会开始注意到差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:36:49.207

如果您正在制作游戏，则以下游戏循环可以最大程度地减少它在不同计算机上以不同速度运行的问题：

```
var loopTime = 33; // 1000ms / 30fps (what we want) = 33ms per loop
var startTime, endTime, executionTime;

function gameLoop(){

    startTime = new Date().getTime();
    doGameMechanics();
    drawGame();
    endTime = new Date().getTime();
    executionTime = endTime - startTime;

    if(executionTime < loopTime) { // we were faster than maximum allowed
        // sleep the remaining time so the game does not go too fast
        setTimeout(function(){ gameLoop(); }, loopTime - executionTime);
    }else{ // we were slower than maximum allowed
        setTimeout(function(){ gameLoop(); }, 0);
    }
} 
```

您必须记住，您的游戏逻辑`doGameMechanics()`和绘图`drawGame()`也需要一些时间。这可能会导致不同计算机上的游戏行为越来越慢。

在这个游戏循环中，我们检查它们的执行速度。测量时间后，我们知道我们需要等待多长时间（使用`setTimeout`）。如果我们“太慢”，我们会`setTimeout`以 0 毫秒作为第二个参数调用。这是必需的，以便执行其他线程（如用户输入），因为 Javascript 是单线程的。

# c# - c# Windows 8 自定义文本框

> ID：16210926
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:20.397
> 
> 标签：c#, xaml, custom-controls

我正在开发一个 Windows Store 8 应用程序。为此，我想要一些自定义的 TextBox 控件。我怎样才能制作像图片中的东西？(XAML) 特别是那些角落

![自定义文本框](https://i.stack.imgur.com/uUwaL.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:36:29.667

只需为自己制作一个[自定义控件模板](http://msdn.microsoft.com/en-us/library/cc189093%28v=vs.95%29.aspx)（是的，链接显示 Silverlight，但您不会在 win8 XAML 等中看到太大差异），您可以将 a`Path`用于您的背景，甚至可以为不同的 MouseOver、Focused、States 等添加颜色更改等内容.

```
<Path Data="M130.32379,0 L142.74992,0 L157.743,15.01704 L142.73584,30.000004 L130.30968,30.000004 L0.31890577,29.99987 L15.159052,15.183544 L0,0.00013974622 z" 
      Fill="#FF1FCD99" Height="30" Width="150" Stretch="Fill" UseLayoutRounding="False"/> 
```

`TextBox`一旦你为你的TargetType有了你的自定义控制模板，你只需在需要的地方使用一个`Style`指向你的资源的标签来应用它，比如`Style="{StaticResource BlahTextBox}"`.

希望这可以帮助。

# django - Django：在一个视图中管理多个表单

> ID：16210927
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:21.613
> 
> 标签：django, django-forms

我试图在一个视图中处理三种形式。我解释说：这是一个结帐表格，其中包含送货地址、账单地址、信用卡信息的表格。

我的问题是我想让用户选择账单地址是否与送货地址相同。我用复选框做了这个。

但是现在由于三种形式，我被困在验证中。我不知道如何处理它们。

这是我的代码：

```
def show_checkout(request, template_name='checkout/checkout.html'):
user = User.objects.filter(pk=request.user.id)
if request.method == 'POST':
    form = CheckoutForm(request.POST)
    form_adress = ShippingForm(request.POST)
    if form.is_valid() and form_adress.is_valid():
        response = process(request)
        form_adress.save(commit=False)

        if not form_adress.same_adress:
            form_adress.user_shipping = user
            form_adress.user_billing = user
        else:
            form_adress.user_shipping = user
            form_billing = BillingForm(request.POST)
            form_billing.save(commit=False)
            form_billing.user_billing = user
            form_billing.save()
        form_adress.save()
        order_number = response.get('order_number', 0)
        error_message = response.get('message', '')
        if order_number:
            request.session['order_number'] = order_number
            receipt_url = urlresolvers.reverse('checkout_receipt')
            return HttpResponseRedirect(receipt_url)
    else:
        error_message = 'Correct the errors below'
else:
    form = CheckoutForm()
    form_adress = ShippingForm()
    form_billing = BillingForm()
    error_message = None
if cart.is_empty(request):
    cart_url = urlresolvers.reverse('show_cart')
    return HttpResponseRedirect(cart_url)
page_title = 'Checkout'
return render(request, template_name, {
    'error_message': error_message,
    'page_title': page_title,
    'form': form,
    'form_adress': form_adress,
    'form_billing': form_billing,
    },
context_instance=RequestContext(request)) 
```

我的模板：

```
<form action="." method="post" class="row-fluid">
{% csrf_token %}
<div class="adress span10">
<fieldset class="checkout" style="float:left;"> 
<legend>Shipping Info</legend>
{{ form_adress.as_p }}
</fieldset>
<fieldset class="checkout billing_adress" style="float:left;">
<legend>Billing Info</legend>
{{ form_billing.as_p }}
</fieldset>
</div>
<fieldset class="checkout row-fluid">
<legend>Credit Card Info</legend>
<table>
{% form_table_row form.name %}
{% form_table_row form.lastname %}
{% form_table_row form.credit_card_number %}
{% form_table_row form.credit_card_type %}
{% form_table_row form.credit_card_expire_month %}
{% form_table_row form.credit_card_expire_year %}
{% form_table_row form.credit_card_cvv %}
</table>
</fieldset>
<table>
<tr>
<th colspan="2"><input type="submit" value="Place Order" class="submit" /></th>
</tr>
</table>
</form> 
```

和我的表格：

```
class ShippingForm(forms.ModelForm):
    same_adress = forms.BooleanField(required=True, label="different address for billing ?")

class Meta:
    model = Address
    exclude = 'user_billing, user_shipping'

class BillingForm(forms.ModelForm):

    class Meta:
        model = Address
        exclude = 'user_billing, user_shipping' 
```

目前我面临分配前引用的局部变量“form_billing”

有什么建议么 ？

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:35:18.397

`form_billing`当`form_adress`有效且`form_adress.same_adress`为假且`order_number`为 0时，您没有进行初始化。

您在上下文中将其引用到`render()`.

另外，如果

```
if not form_adress.same_adress: 
```

应该

```
if form_adress.same_adress: 
```

# bash - 如何从目录中的许多文件中查找哪个文件包含字符串？

> ID：16210930
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:37.570
> 
> 标签：bash

例如，我有一个包含许多文件的目录（比如 f1.dat、f2.dat ...、f100.dat）。我想找出哪个文件包含一个字符串（比如字符串“error”）。怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:21:11.630

你可以做：

```
grep -l "your_string" /your/dir/f*.dat 
```

*   `-l`列出与 grep 匹配的文件。
*   `f*.dat`指所有名称为`f[something].dat`.

如果您想从目录中的所有文件中检查它，那么这可能很有用：

```
grep -l "your_string" /your/dir/ 
```

# jquery - jquery fancybox iframe 动态更改 href 值

> ID：16210933
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:41.277
> 
> 标签：jquery, fancybox, fancybox-2

我有一个可以单击的按钮，我希望 fancybox 加载任何需要的内容，具体取决于我可以检查的一些复选框。这些复选框将更改需要在花式框内的 iframe 中显示的 url 的值。

到目前为止，我可以让它工作一次，当我再次更改复选框时，我会看到 html 上的 url 发生变化，但fancybox 根本不会弹出。

这是我的按钮和fancybox的链接：

```
<button type="button" title="Compare" class="button">Compare</button>
<a class="comparefancy" style="display:none;" href="#"></a> 
```

这是我单击按钮时发生的情况：

```
jQuery(document).ready(function() {
        jQuery('.button').click(function(){

            var i=0;
            var prdString="";

            var prdString = jQuery.map(jQuery(':checkbox:checked'), function(n, i){
                  return n.value;
            }).join(',');

            var url='<?php echo Mage::getUrl('catalog/product_compare/index').'items/'; ?>'+ prdString + '/uenc/';

            jQuery('.comparefancy').attr('href', url);//this works all the time
            jQuery('.comparefancy').fancybox();  //this will only work the first time
            jQuery('.comparefancy').trigger('click');

    });

}); 
```

我已经尝试过提示一些类似答案的 beforeLoad 方法，但它对我不起作用。

编辑：在对此进行更多测试后，我从链接中删除了 display none 并使其可见，然后执行以下操作：

1.  检查我的复选框，然后单击按钮：第一个 fancybox 加载就好了
2.  检查其他复选框，然后单击按钮：链接将更改其href，但花式不会加载。
3.  手动点击链接，然后fancybox加载新的url

那么问题是我的触发点击功能呢？什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:25:28.107

也许你实际上并不需要

```
<a class="comparefancy" style="display:none;" href="#"></a> 
```

但尝试手动触发fancybox，例如：

```
jQuery(document).ready(function () {
    var i = 0; // inside the click will be always 0 ... to be or not to be
    jQuery('.button').click(function () {
        var prdString = jQuery.map(jQuery(':checkbox:checked'), function (n, i) {
            return n.value;
        }).join(',');
        var url = '<?php echo Mage::getUrl(' catalog / product_compare / index ').' items / '; ?>' + prdString + '/uenc/';

        // open the corresponding URL in fancybox
        jQuery.fancybox(url, {
            // API options
            padding: 0 // example
        });

    });
}); 
```

我只是建议fancybox部分（虽然将`i`变量移出`click`）。确保使用通过该方法传递的参数`url`检查每个检查的预期值。`checkbox``.map()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:25:35.597

不要一次又一次地绑定fancybox函数，一次就够了：

```
(function($) {
    $(function() { // short for $(document).ready();
        $('.button').click(function() {
            var i = 0,
                prdString = $.map($(':checkbox:checked'), function(n, i){
                    return n.value;
                }).join(','),
                url = '<?php echo Mage::getUrl('catalog/product_compare/index').'items/'; ?>'+ prdString + '/uenc/';

                $('.comparefancy').attr('href', url);
                setTimeout(function() {
                    $('.comparefancy').click();
                }, 50);
        });

        $('.comparefancy').fancybox({
            // optional settings
        });
    });
})(jQuery); 
```

# jsf-2 - 手风琴面板内的对话框验证会影响手风琴面板的功能

> ID：16210935
> 
> 赞同：0
> 
> 时间：2013-04-25T09:18:50.767
> 
> 标签：jsf-2, primefaces

我在带有命令按钮的手风琴内有一个对话框。如果我点击命令按钮，对话框打开，里面是一个输入文本组件。我做了一个验证，名字不应该为空。

我面临的问题是即使我没有单击命令按钮，输入文本的验证消息也会出现，说它不应该为空。这每次都会出现并且应用程序挂起。我尝试设置 dynamic="false" 但这也不起作用。

我正在使用素面 3.5 和 jsf2

```
<p:accordionPanel dynamic="true" id="editSeAccordion" >
    <p:tab id="Edit3" title="myEdit">
        <p:dialog widgetVar="addSAPDialog" id="sapDialog" modal="true" minimizable="false"
            style="position:fixed;" closable="true" position="350,250" maximizable="false" >

            <p:panel style="border:none;background:#F0F0F0;margin-top:-10px;">
                <h:panelGrid columns="2">
                    <h:outputText value="msg.EditService_s}" styleClass="label" />  
                    <p:inputText label="name" styleClass="textfield" 
                        value="#{serviceManagedBean.sapBean.name}" required="true" 
                        requiredMessage="name is compulsary"/>

                </h:panelGrid> 
                <p:commandButton value="Cancel" styleClass="btn-secondary" 
                    style="float:right;margin-top:20px;" onclick="addSAPDialog.hide();"/>
                <p:commandButton value="Ok" styleClass="btn-primary" ajax="true"  
                    actionListener="#{serviceManagedBean.createAddSapPanel}"  
                    oncomplete="handleDialogSubmit(xhr, status, args)"/>

            </p:panel>
        </p:dialog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:48:59.773

尝试对对话框内的输入使用单独的 h:form 元素。因为如果单击手风琴选项卡，无论使用部分过程还是部分渲染，都会验证所需的输入。

# python - Python - 读取 csv 并按列对数据进行分组

> ID：16210941
> 
> 赞同：5
> 
> 时间：2013-04-25T09:19:07.993
> 
> 标签：python, csv

我正在处理一个包含 3 列的 csv 文件，如下所示：

```
timeStamp, value, label
15:22:57, 849, CPU pid=26298:percent
15:22:57, 461000, JMX MB
15:22:58, 28683, Disks I/O
15:22:58, 3369078, Memory pid=26298:unit=mb:resident
15:22:58, 0, JMX 31690:gc-time
15:22:58, 0, CPU pid=26298:percent
15:22:58, 503000, JMX MB 
```

该`label`列包含不同的值（例如总共 5 个），其中包括空格、冒号和其他特殊字符。

我想要实现的是针对每个指标绘制时间（在同一个图上或在不同的图上）。我可以用 来做到这一点`matplotlib`，但我首先需要`[timeStamps, value]`根据“标签”对这些对进行分组。

我研究了通过“标签”`csv.DictReader`获取标签和`itertools.groupby`分组，但我正在努力以适当的“pythonic”方式做到这一点。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T09:33:19.940

你不需要`groupby`；您想用来收集由标签键入的[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)一系列对：`[timestamp, value]`

```
from collections import defaultdict
import csv

per_label = defaultdict(list)

with open(inputfilename, 'rb') as inputfile:
    reader = csv.reader(inputfile)
    next(reader, None)  # skip the header row

    for timestamp, value, label in reader:
        per_label[label.strip()].append([timestamp.strip(), float(value)]) 
```

现在`per_label`是一个字典，标签作为键，一`[timestamp, value]`对列表作为值；我已经去掉了空格（你的输入样本有很多额外的空格）并将`value`列变成浮点数。

对于您的（有限）输入样本，导致：

```
{'CPU pid=26298:percent': [['15:22:57', 849.0], ['15:22:58', 0.0]],
 'Disks I/O': [['15:22:58', 28683.0]],
 'JMX 31690:gc-time': [['15:22:58', 0.0]],
 'JMX MB': [['15:22:57', 461000.0], ['15:22:58', 503000.0]],
 'Memory pid=26298:unit=mb:resident': [['15:22:58', 3369078.0]]} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T10:26:01.633

你可以试试[pandas](http://pandas.pydata.org/)，它提供了一个很好的结构来处理数据。

将 csv 读取到`DataFrame`

```
In [123]: import pandas as pd

In [124]: df = pd.read_csv('test.csv', skipinitialspace=True)

In [125]: df
Out[125]: 
  timeStamp    value                              label
0  15:22:57      849              CPU pid=26298:percent
1  15:22:57   461000                             JMX MB
2  15:22:58    28683                          Disks I/O 
3  15:22:58  3369078  Memory pid=26298:unit=mb:resident
4  15:22:58        0                  JMX 31690:gc-time
5  15:22:58        0              CPU pid=26298:percent
6  15:22:58   503000                             JMX MB 
```

分组`DataFrame`依据`label`

```
In [154]: g =  df.groupby('label') 
```

现在你可以得到你想要的

```
In [155]: g.get_group('JMX MB')
Out[155]:
  timeStamp   value   label
1  15:22:57  461000  JMX MB
6  15:22:58  503000  JMX MB 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T09:32:59.003

您可以使用[`numpy.loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)：

```
import numpy as np
result = np.loadtxt('MYFILE', usecols=(0, 1, 2), 
          dtype=[('time', 'S8'), ('values', np.uint), ('label', 'S33')], 
          delimiter=', ') 
```

这会将您的表加载到结构化数组中，其中时间保存为 8 个字符的字符串（'S8'），值保存为无符号整数，标签保存为最多 33 个字符的字符串（'S33'，您可能需要调整这个尺寸）。然后你可以按类型索引你的值：

```
>>> print result['values']
[    849  461000   28683 3369078       0       0  503000] 
```

并根据标签过滤，如果你想：

```
>>> print result['values'][result['label'] == 'JMX MB']
[461000 503000] 
```

要将时间从字符串转换为浮点数，您可以使用`pylab`日期`datestr2num`并将其作为转换器提供给`loadtxt`：

```
import pylab
result = np.loadtxt('MYFILE', usecols=(0, 1, 2), 
           dtype=[('time', np.float), ('values', np.uint), ('label', 'S33')],
           delimiter=', ', converters={0: pylab.datestr2num}) 
```

# google-analytics - Google Analytics - 按自定义变量值分组

> ID：16210944
> 
> 赞同：0
> 
> 时间：2013-04-25T09:19:22.687
> 
> 标签：google-analytics

我想跟踪网站的访问者。我想通过谷歌分析中的“组织”和“用户名”来跟踪它们。然后，我希望能够按组织对用户进行分组。今天我有这个代码：

```
_gaq.push(['_setCustomVar', 1, 'Organization', theOrganization]);
_gaq.push(['_setCustomVar', 1, 'UserName', theUser]); 
```

请注意，这两个变量具有相同的“索引或槽”（1），这意味着变量在谷歌分析应用程序中的相同“键”下列出。在我看来，只有其中一个值被设置，这让我认为我应该使用不同的索引/插槽/键。（当整个服务和文档中的名称相同时，这是一件好事）

但是，我不确定即使在更改插槽后我是否可以使用数据 - 我找不到执行“按组织分组”操作的方法。当我在报告视图中选择“二级维度”时，我在其中找不到“自定义变量”。这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:51:51.543

您需要为每个不同的键使用一个插槽：

```
_gaq.push(['_setCustomVar', 1, 'Organization', theOrganization]);
_gaq.push(['_setCustomVar', 2, 'UserName', theUser]); 
```

然后按用户名过滤组织，您需要制作自定义报告；使用自定义变量值（不是它们的键）

![维度明细中的自定义变量](https://i.stack.imgur.com/ocl9i.png)

保存报告，然后您可以在初始过滤器中选择相关组织，您将看到该组织的用户名

# twitter-bootstrap - 它的不同组件是否有单独的引导文件？

> ID：16210945
> 
> 赞同：0
> 
> 时间：2013-04-25T09:19:28.603
> 
> 标签：twitter-bootstrap, twitter

我想放弃所有`twitter bootstrap's`商品，只使用`css`for 输入： **设计**、**行为**和**验证器**。是否有任何单独`css`的文件和其他引导组件？仅手动从基本引导`css`文件中获取我需要的代码很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:22:52.740

您可以使用自定义选项，或者我倾向于使用的是：[https](https://github.com/mdo/preboot) ://github.com/mdo/preboot这是引导程序的起点，并提供了很多混合使用来实现我想要的，而无需所有框架。

# codeigniter - 上传文件问题，错误不显示

> ID：16210947
> 
> 赞同：0
> 
> 时间：2013-04-25T09:19:49.757
> 
> 标签：codeigniter, codeigniter-2

我试图在用户上传时限制文件大小。我有以下功能：

```
function do_upload()
    {
        $config['upload_path']   = './uploads/';        
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '50';
        //$config['max_width'] = '1024';
        //$config['max_height'] = '768';

        $this->load->library('upload', $config);
        $fullImagePath;
        if (isset($_FILES['userfile']) && !empty($_FILES['userfile']['name']))
        {
              if (! $this->upload->do_upload('userfile'))
              {
                   $error = array('file_error' => $this->upload->display_errors());
                   //print_r($error);

                   $this->load->view('layout/header');
                   $this->load->view('register', $error);
                   $this->load->view('layout/footer');

              }else{
                  // set a $_POST value for 'image' that we can use later
                  $upload_data    = $this->upload->data();
                  $fullImagePath = '/uploads/' . $upload_data['file_name']; 
              }
        }       
        //path of image on the server
        return $fullImagePath;
    } 
```

如果我打印上面的 $error 数组，它会显示文件太大的错误，这正是我想要的。但问题是，如果我不打印，即使图片太大，整个过程也完成了，并且数据库中的数据是完整的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:37:46.523

你的回报是在 else 之外。你要：

`return $fullImagePath;`

在下面

`$fullImagePath = '/uploads/' . $upload_data['file_name'];`

否则无论是否出错它都会返回，我猜它会被发送到您的数据库..？

# cordova - 在应用程序关闭时使用 Cordova 和 Pushwoosh 处理推送通知

> ID：16210950
> 
> 赞同：1
> 
> 时间：2013-04-25T09:19:56.610
> 
> 标签：cordova, push-notification

我在 iOS 上有一个由 Cordova 2.6 和 Pushwoosh 组成的设置。我能够接收从 Pushwoosh 门户发送的推送通知。证书和 SDK 现在可以正常工作。（但花了一段时间）

目前，当应用程序关闭时，任何发送的推送通知都会出现在 iPhone 通知中心，但不会增加应用程序徽章，尽管我在 Pushwoosh 网站上看到了“徽章自动增加”功能。我无法弄清楚如何在应用程序中配置它。

第二点：启动应用程序时，我希望能够解析“待处理通知”列表，并将它们显示在屏幕上。

知道怎么做吗？我知道 API 存在（[http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)），但文档几乎不存在......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:34:12.633

为了使用 Pushwoosh 发送徽章，您需要使用高级表单中的“徽章”字段。您可以输入要发送的确切号码，或 +1 以增加您的徽章。

至于待处理的推送通知列表，它由您的操作系统（iOS 或 Android）的通知中心处理，而不是由应用程序处理。如果您单独打开应用程序，它无法知道发送到设备的通知；唯一的方法是让应用程序直接从您的服务器下载任何所需的信息。

# java - 将 java.util.List 存储到 GAE 数据存储中

> ID：16210952
> 
> 赞同：1
> 
> 时间：2013-04-25T09:20:04.580
> 
> 标签：java, google-app-engine

这是我将 JSON 和类似 JSON 的文档“本地”存储到 GAE 数据存储区的想法：

```
protected void createEntity(Key parent, Map obj){   
    try {
        Entity e = new Entity(
                parent == null ? createKey(_kind, (String) obj.get(OBJECT_ID)) : parent);  
        Iterator it = obj.keySet().iterator();
        while (it.hasNext()){
            String key = (String) it.next();
            if (obj.get(key) == null){
                e.setProperty(key, null);
            } else if (obj.get(key) instanceof String) {
                setProperty(e, key, obj.get(key));
            } else if(obj.get(key) instanceof Number) {
                setProperty(e, key, obj.get(key));
            } else if(obj.get(key) instanceof Boolean) {
                setProperty(e, key, obj.get(key));
            } else if(obj.get(key) instanceof List) {
                // Problem area, right way to store a list? 
                // List may contain JSONObject too!
            } else if(obj.get(key) instanceof Map){
                                    // Update: Ooops, this cause StackOverFlow error!
                                    Key pKey = createKey(e.getKey(), _kind, (String) obj.get(key)); 
                                    e.setProperty(key, pKey.toString()); // not sure?
                createEntity(pKey, obj);
            }
        }   
        _ds.put(e);
    } catch (ConcurrentModificationException e){

    } catch (Exception e) {
        // TODO: handle exception
    }
} 
```

该方法是递归放置的，其中 GAE 支持的非集合属性直接存储到实体的属性中。然后`Map`使用具有当前实体键的父键创建新实体，依此类推。

我的 JSON 接口支持的类型的基础是：[http ://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

我现在遇到的问题是我不确定如何处理`java.util.List`，以及如何以 Map 之类的方式存储它。

关于如何实现这一目标的任何建议？

# mysql - 同一列中带有 AND 的 SQL

> ID：16210956
> 
> 赞同：3
> 
> 时间：2013-04-25T09:20:20.200
> 
> 标签：mysql, sql, conditional-statements

我有一个名为 'values' 的 mySQL 表：

```
values:

file | metadata | value
________________________
01   | duration | 50s
01   | size     | 150mo
01   | extension| avi
02   | duration | 20s
02   | extension| mkv
03   | duration | 20s
03   | extension| mpeg 
```

用户将在 SQL 中创建自己的查询，如下所示：

```
SELECT file FROM values WHERE (metadata='duration' AND value='20s') AND (metadata='extension' AND value='mkv') 
```

我知道这个查询不好，但我无法更改“值”表。我不知道如何在这些条件下获取 file_id ..

有任何想法吗 ？

提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T09:28:12.220

像这样：

```
SELECT file
FROM
(
  SELECT file,
    MAX(CASE WHEN metadata = 'duration' THEN value END) AS duration,
    MAX(CASE WHEN metadata = 'extension' THEN value END) AS extension
  FROM `values`
  WHERE metadata IN ('duration', 'extension') 
  GROUP BY file
) AS sub
WHERE duration = '20s' AND extension = 'mkv'; 
```

在这里查看它的实际效果：

*   [**SQL 小提琴演示**](http://sqlfiddle.com/#!2/fc4e9/10)

* * *

## 更新

如果要动态执行此操作，并假设这些元数据名称存储在新的单独表中，则可以使用动态 sql 执行此操作。像这样的东西：

```
SET @sql = NULL;
SET @cols = NULL;

SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(m.metadata_name = ''',
      m.metadata_name, ''', v.value, 0)) AS ', '''',   m.metadata_name, '''')
  ) INTO @cols
FROM Metadata AS m;

SET @sql = CONCAT('
  SELECT 
    v.file, ', @cols ,'
  FROM `values` AS v
  INNER JOIN metadata AS m ON v.metadata_id = m.metadata_id
  GROUP BY v.file');

prepare stmt 
FROM @sql;

execute stmt; 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/ddcac/5)

然后你可以把它放在一个存储过程中并用它来显示它们，或者以你想要的方式查询它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:22:57.960

尝试这个

```
SELECT file FROM `values` 
WHERE (metadata='duration'  AND value='20s') 
OR    (metadata='extension' AND value='mkv') 
```

*   `VALUES`是 mysql 的保留关键字，在它周围使用反引号

**编辑：**

你应该有这样的桌子

```
 file | size | duration | extension |
  1   | 150mo|  50s     | avi
  2   | null |  20s     | mkv
  3   | null |  20s     | mpeg 
```

那么你的查询将是

```
 select file from `values` where duration = '20s' and extension = 'mkv' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:23:20.657

目前尚不清楚您想要实现什么。我猜你想要“持续时间”和“20 秒”或“扩展”和“mkv”的所有结果。所以你应该用“OR”替换或中间的“AND”。

```
SELECT file FROM values WHERE (metadata='duration' AND value='20s') OR (metadata='extension' AND value='mkv') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T09:24:30.573

```
SELECT 
    v.file 
FROM values AS v 
WHERE (v.metadata='duration' AND v.value='20s') 
  OR (v.metadata='extension' AND v.value='mkv') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T09:25:57.447

使用存在于第二个条件：

```
SELECT distinct file FROM values WHERE (metadata='duration' AND value='20s') AND
exists (  SELECT * FROM values as v2 where v2.metadata='extension' AND v2.value='mkv' and v2.file=values.file ) 
```

# android - 按下 imageView 时更改 imageView 中的资源的问题

> ID：16210971
> 
> 赞同：2
> 
> 时间：2013-04-25T09:21:00.563
> 
> 标签：android, imageview, onclicklistener, ontouchlistener

当按下 imageView 时，我正在尝试编写一个应用程序来更改图像资源。

我提到[了这个链接](https://stackoverflow.com/questions/4193167/change-source-image-for-image-view-when-pressed)。

我在我的代码中都使用了`setOnTouchListener`和。`setOnClickListener`在这两种情况下，我都会得到日志。但是，图像没有改变。我在下面给出了我的代码：

```
ImageView more;
 more = (ImageView) row.findViewById(R.id.imageView1);
        more.setImageResource(R.drawable.ic_more_1); 
```

`setOnTouchListener`是：

```
more.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                Log.d(TAG,"Event type "+event+" "+ event.getAction());
                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:
                    more.setImageResource(R.drawable.ic_more_2);
                    break;
                case MotionEvent.ACTION_UP:
                    more.setImageResource(R.drawable.ic_more_1);
                    break;
                }
                return false;
            }
        }); 
```

我`setOnClickListener`的是：

```
 more.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (!buttonClicked) {
                    Log.d(TAG, "on image click..... false" + buttonClicked);
                    buttonClicked = true;
                    more.setImageResource(R.drawable.ic_more_2);
                }
                if (buttonClicked) {
                    Log.d(TAG, "on image click..... true" + buttonClicked);
                    buttonClicked = false;
                    more.setImageResource(R.drawable.ic_more_1);
                }
                // more.setImageResource(R.drawable.ic_more_2);
                // TODO Auto-generated method stub

                 /* Log.d(TAG, "on image click..... " + pos);
                 * if(listData.getPosition() == SUBSCRIBE) {
                 * more.setImageResource(R.drawable.ic_more_2);
                 * //more.setImageResource(R.drawable.ic_more_1); Log.d(TAG,
                 * "For Subscribe..................."); intent = new
                 * Intent(getContext(), EpisodeActivity.class);
                 * intent.putExtra("URL", strurl);
                 * getContext().startActivity(intent);
                 * 
                 * } else { // TODO REWRITE IT FOR ADDING AS A FAVIOURITE ITEMS
                 * Log.d(TAG, "For Episode..................."); }
                 */

            }
        }); 
```

请指出我犯了什么错误。

先感谢您！！！

**注意：**由于我希望在`listView`for中进行此更改，因此`ListItem images`我在`Custom Adapter`

**更新：**

我的适配器：

```
public class CustomAdapterForSubcribe extends ArrayAdapter<ListData> {

    public final String TAG = "CustomAdapterForSubcribe";
    Context context;
    int layoutResourceId;
    boolean buttonClicked = false;
    LayoutInflater inflater;
    TextView title, desc;
    ImageView more, fav, imageRightSubscribe, imageRightEpisode;
    Intent intent;
    public static int SUBSCRIBE = 1;
    public static int EPISODE = 0;
    private String strurl = "http://timesofindia.feedsportal.com/c/33039/f/533916/index.rss";
    private String imageUrlEpisode = "http://news.bbcimg.co.uk/media/images/66996000/jpg/_66996549_66996528.jpg";

    public CustomAdapterForSubcribe(Context context, int layoutResourceId,
            List<ListData> objects, int option) {
        // TODO Auto-generated constructor stub
        super(context, layoutResourceId, objects);
        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final int pos = position;
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = LayoutInflater.from(getContext());
            row = inflater.inflate(R.layout.episode_row_view, parent, false);
        }
        final ListData listData = getItem(position);

        title = (TextView) row.findViewById(R.id.title);
        desc = (TextView) row.findViewById(R.id.description);
        more = (ImageView) row.findViewById(R.id.imageView1);
        if (listData.getPosition() == SUBSCRIBE) {
            more.setImageResource(R.drawable.ic_more_1);
        } else {
            more.setImageResource(R.drawable.ic_favourite_1);
        }
        // more.setImageResource(R.drawable.ic_more_1);
        imageRightEpisode = (ImageView) row.findViewById(R.id.image);
        imageRightEpisode.setTag(imageUrlEpisode);
        new DownloadImagesTask().execute(imageRightEpisode);
        more.setTag(new Integer(position));

        if (listData.getPosition() == SUBSCRIBE) {
            Log.d(TAG, "<<<<.....In option.....>>>>");
            desc.setVisibility(View.GONE);
            // title.setGravity(Gravity.CENTER_HORIZONTAL);
            // title.setGravity(Gravity.CENTER_VERTICAL);
            title.setGravity(Gravity.CENTER);
            title.setTextSize(16);
            title.setTypeface(Typeface.DEFAULT_BOLD);

        }
        title.setText(listData.getTitle());
        desc.setText(listData.getDesc());
//      more.setOnTouchListener(new View.OnTouchListener() {
//
//          @Override
//          public boolean onTouch(View v, MotionEvent event) {
//              // TODO Auto-generated method stub
//              Log.d(TAG, "Event type " + event + " " + event.getAction());
//              if (listData.getPosition() == SUBSCRIBE) {
//                  switch (event.getAction()) {
//
//                  case MotionEvent.ACTION_DOWN:
//                      Log.d(TAG, "SUBSCRIBE...Image press releasing....");
//                      more.setImageResource(R.drawable.ic_more_1);
//                      more.invalidate();
//                      break;
//                  case MotionEvent.ACTION_UP:
//                      Log.d(TAG, "SUBSCRIBE... Image pressing....");
//                      more.setImageResource(R.drawable.ic_more_2);
//                      break;
//                  }
//              }
//
//              return false;
//          }
//      });
        more.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (listData.getPosition() == EPISODE) {
                    if (!buttonClicked) {
                        Log.d(TAG, "on image click..... false" + pos);

                        more.setImageResource(R.drawable.ic_favourite_2);
                        buttonClicked = true;
                    }
                    else if (buttonClicked) {
                        Log.d(TAG, "on image click..... " + buttonClicked);

                        more.setImageResource(R.drawable.ic_favourite_1);
                        buttonClicked = false;
                    }
                }

                // more.setImageResource(R.drawable.ic_more_2);
                // TODO Auto-generated method stub
                else if (listData.getPosition() == SUBSCRIBE) {

                    Log.d(TAG, "on image click..... " + pos);
                    Log.d(TAG, "For Subscribe...................");
                    intent = new Intent(getContext(), EpisodeActivity.class);
                    intent.putExtra("URL", strurl);
                    getContext().startActivity(intent);

                } else {
                    // TODO REWRITE IT FOR ADDING AS A FAVIOURITE ITEMS
                    Log.d(TAG, "For Episode...................");
                }

            }
        });

        return row;
    } 
```

即使我在代码中进行了一些更改，TouchClickListener 也不适用于我的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:43:13.180

我使用`Holder`并更改了`if`条件而不是`Switch`大小写

我的工作代码是：

```
holder.more.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                    if (listData.getPosition() == SUBSCRIBE) {

                        if(event.getAction() == MotionEvent.ACTION_UP){
                            Log.d(TAG,"releasing.....");
                            holder.fav.setImageResource(R.drawable.ic_more_1);
                        }
                        if(event.getAction() == MotionEvent.ACTION_DOWN){
                            Log.d(TAG,"pressing.....");
                            holder.fav.setImageResource(R.drawable.ic_more_2);
                        }
                    }

                    return false;
                }
            }); 
```

# jsf - 强制 JSF 对我的 bean 的所有字段进行 bean 验证，而不仅仅是那些绑定到输入字段的字段

> ID：16210972
> 
> 赞同：0
> 
> 时间：2013-04-25T09:21:04.147
> 
> 标签：jsf, input, field, bean-validation

我正在使用 Apache MyFaces Core 2.1 库和 Hibernate Validator 5。我有一个带有一些注释的简单 JavaBean。我的带有一些输入字段的表单映射到这个 JavaBean。但是，如果我用约束（例如@NotNull 或@Min(value = 1000)）对字段进行注释但不使用表单中的输入字段，则JavaBean 的字段是有效的。我可以强制 JSF 生命周期验证可能 JavaBean 的所有字段，而不仅仅是那些具有输入字段的字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:31:03.097

你不能。JSF 与 Bean Validation 的集成使用*Validator.validateValue*自行验证每个输入字段。它没有使用*Validator.validate*来验证整个 bean。

如果您真的想要评估完整的 bean，您需要在另一层上进行（例如，如果您正在使用 JPA）。

# android - 使用 monoandroid 错误组装

> ID：16210977
> 
> 赞同：1
> 
> 时间：2013-04-25T09:21:11.233
> 
> 标签：android, xamarin.android

我对 mono.Android 4.6.04000 有疑问 我在尝试构建项目时出现错误“错误 CS0012: Le type 'Android.App.Activity' est défini dans un assembly qui n'est pas référencé. Vous devez ajouter une référence à l'assembly 'Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd'. (CS0012) (MonApp)'

在英语中应该是“类型'Android.App.Activity'是在未引用的程序集中定义的。您必须添加对程序集的引用'Mono.Android，版本= 0.0.0.0，文化=中性， PublicKeyToken=c4c4237547e4b6cd'。

并且程序集mono.Android被很好地引用了。所以我想知道如何解决这个问题。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:18:48.593

使用您正在使用的 Mono for Android 版本重建所有程序集。这是因为[4.6.0 中对强名称的更改](http://forums.xamarin.com/discussion/1476/changes-to-assembly-strongnames-in-xamarin-android-4-6-0)。

# macos - Mac OS X 上的 NDIS 中间微型端口

> ID：16210979
> 
> 赞同：0
> 
> 时间：2013-04-25T09:21:13.373
> 
> 标签：macos, ethernet, kernel-extension

我们有一个中间网络层的解决方案，目前在 Windows 上作为 NDIS IM 实现。我正在研究如何将这个东西移植到 Mac OS X 上。

理想情况下，它应该是一个中间驱动程序/kext，位于支持以太网的适配器之上，并且位于任何 IP/ARP/其他任何东西之下，仅与以太网帧一起运行。

一些教程/示例将是首选，例如来自 WDK 的 passthru 示例，尽管任何提示都会受到赞赏。

不，这不是过滤器/防火墙，也不是 vpn，它是在该级别运行的全新且相当复杂的中间层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:40:53.270

我建议您阅读[网络内核扩展编程指南](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/NKEConceptual/intro/intro.html)。请参阅“网络内核扩展概述”部分中的 NKE 架构。看起来您需要一个[接口过滤器](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/NKEConceptual/interface_filter_nke/interface_filter_nke.html)，甚至可能是一个[虚拟接口](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/NKEConceptual/interface_nke/interface_nke.html)。
另请参阅“OS X 和 iOS 内核编程”一书（由 Ole Henry Halvorsen 和 Douglas Clarke 撰写）中的“网络”一章（第 13 章）。据我所知，有一个简单的以太网控制器驱动程序示例。

# java - 具有持久性的 Java 中的安全 ID

> ID：16210980
> 
> 赞同：2
> 
> 时间：2013-04-25T09:21:15.220
> 
> 标签：java, uuid, id-generation

我正在准备一个 Java 库，该库需要为生成的对象分配一个唯一的 id 以进行序列化。一旦生成了唯一的 id，我必须确保下次使用该库时，不可能将 id 重新分配给我过去已经保存的对象。

现在，我看到*Stackoverflow*中的许多人建议依赖几个选项，即[`UUID`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html), [`SecureRandom`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)，但我不确定这些类是否适合我的需求，也不知道如何使用它们。

**拜托，您能否向自己介绍要使用的正确实用程序以及如何生成 id？**

欢迎使用基于 Guava/Apache 实用程序的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:58:51.517

生成重复 UUID 的概率[非常低](http://en.wikipedia.org/wiki/UUID#Random_UUID_probability_of_duplicates)。我不知道不同机器上的 2 个 UUID 实例生成相同 ID 的可能性，但是 UUID 在 JVM 中应该是唯一的。我不会为了生成 UUID 而嵌入数据库的麻烦。你可以安全地使用java `UUID`。

**替代解决方案**

如果您需要跨多个程序调用的唯一 ID，请使用数据库序列。您可以要求数据库缓存序列的下 N 个数字，以使其合理快速，并且该值将在调用之间保持不变。UUID 使用起来更方便，但两种解决方案都可以使用。如果您使用数据库，您将了解已序列化的对象数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:52:23.740

如果您的对象需要一个唯一的编号，那么为什么不只是做一个序列。您必须编写一个执行以下操作的自定义类：

*   这将是一个单身人士
*   找到对象在启动时使用的最后一个值
*   有一个像 getNext 这样的方法，它增加 lastValue 并返回对象要使用的值。
*   使其线程安全。

# delphi - Delphi接口实现

> ID：16210993
> 
> 赞同：14
> 
> 时间：2013-04-25T09:21:52.597
> 
> 标签：delphi, interface, delphi-2007, implements

我希望引用计数应该在接口实现中的外部聚合对象上起作用。如果我可以参考另一个示例：[实现多个接口的类中的清晰度（替代委托）：](https://stackoverflow.com/questions/6836425/clarity-in-classes-implementing-multiple-interfaces-alternative-to-delegation)

这是该行为的最小再现：

```
program SO16210993;

{$APPTYPE CONSOLE}

type
  IFoo = interface
    procedure Foo;
  end;

  TFooImpl = class(TInterfacedObject, IFoo)
    procedure Foo;
  end;

  TContainer = class(TInterfacedObject, IFoo)
  private
    FFoo: IFoo;
  public
    constructor Create;
    destructor Destroy; override;
    property Foo: IFoo read FFoo implements IFoo;
  end;

procedure TFooImpl.Foo;
begin
  Writeln('TFooImpl.Foo called');
end;

constructor TContainer.Create;
begin
  inherited;
  FFoo := TFooImpl.Create;
end;

destructor TContainer.Destroy;
begin
  Writeln('TContainer.Destroy called');//this line never runs
  inherited;
end;

procedure Main;
var
  Foo : IFoo;
begin
  Foo := TContainer.Create;
  Foo.Foo;
end;

begin
  Main;
  Readln;
end. 
```

如果不是使用`implements`，我在类中实现接口，`TImplementor`然后析构函数运行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T15:53:42.590

这里发生的是您调用`TContainer.Create`并创建对象的实例。但是您随后将该实例分配给接口引用，即全局变量`Foo`。因为该变量是类型`IFoo`的，所以接口委托意味着实现对象是 的实例`TFooImpl`而**不是**的实例`TContainer`。

因此，什么都不会引用 的实例`TContainer`，它的引用计数永远不会增加，因此它永远不会被销毁。

我不认为有一个非常简单的方法来解决这个问题。您可能可以使用`TAggregatedObject`，但它可能无法解决您的问题。它会迫使你声明`TContainer.FFoo`是`TFooImpl`我想你不想做的类型。无论如何，这就是以这种方式重新投射的样子：

```
program SO16210993_TAggregatedObject;

{$APPTYPE CONSOLE}

type
  IFoo = interface
    procedure Foo;
  end;

  TFooImpl = class(TAggregatedObject, IFoo)
    procedure Foo;
  end;

  TContainer = class(TInterfacedObject, IFoo)
  private
    FFoo: TFooImpl;
    function GetFoo: IFoo;
  public
    destructor Destroy; override;
    property Foo: IFoo read GetFoo implements IFoo;
  end;

procedure TFooImpl.Foo;
begin
  Writeln('TFooImpl.Foo called');
end;

destructor TContainer.Destroy;
begin
  Writeln('TContainer.Destroy called');//this line does run
  FFoo.Free;
  inherited;
end;

function TContainer.GetFoo: IFoo;
begin
  if not Assigned(FFoo) then
    FFoo := TFooImpl.Create(Self);
  Result := FFoo;
end;

procedure Main;
var
  Foo : IFoo;
begin
  Foo := TContainer.Create;
  Foo.Foo;
end;

begin
  Main;
  Readln;
end. 
```

该[文档](http://docwiki.embarcadero.com/RADStudio/en/Implementing_Interfaces#Implementing_Interfaces_by_Delegation_.28Win32_only.29)确实谈到了这一点：

> 用于实现委托接口的类应派生自 TAggregationObject。

最初我找不到任何文档`TAggregationObject`。最后我意识到它实际上被命名`TAggregatedObject`并[记录在案](http://docwiki.embarcadero.com/Libraries/en/System.TAggregatedObject)。

> TAggregatedObject 通过实现 IInterface 方法委托给控制 IInterface 为聚合的内部对象提供功能。
> 
> 聚合对象是由多个接口对象组成的对象。每个对象实现自己的行为和接口，但所有对象共享相同的引用计数，即控制器对象的引用计数。在容器模式中，控制器是容器对象。
> 
> TAggregatedObject 本身不支持任何接口。然而，作为典型的聚合，它确实实现了 IInterface 的方法，这些方法由它的后代对象使用。因此，TAggregatedObject 用作​​实现接口的类的基础，这些接口用于创建作为聚合的一部分的对象。
> 
> TAggregatedObject 用作​​创建包含对象和连接对象的类的基础。使用 TAggregatedObject 可确保对 IInterface 方法的调用委托给聚合的控制 IInterface。
> 
> 控制 IInterface 在 TAggregatedObject 的构造函数中指定，并由 Controller 属性指示。

此外，源代码注释中还有这个：

> TAggregatedObject 和 TContainedObject 是旨在聚合或包含在外部控制对象中的接口对象的合适基类。在外部对象类声明中的接口属性上使用“实现”语法时，使用这些类型来实现内部对象。
> 
> 代表控制器的聚合对象实现的接口不应与控制器提供的其他接口区分开来。聚合对象不得维护自己的引用计数——它们必须与控制器具有相同的生命周期。为此，聚合对象将引用计数方法反映给控制器。
> 
> TAggregatedObject 只是将 QueryInterface 调用反映到其控制器。从这样一个聚合对象中，可以得到控制器支持的任何接口，并且只能得到控制器支持的接口。这对于实现使用一个或多个内部对象来实现在控制器类上声明的接口的控制器类很有用。聚合促进跨对象层次结构的实现共享。
> 
> TAggregatedObject 是大多数聚合对象应该继承的，尤其是与“实现”语法结合使用时。

# c - 我无法弄清楚我的信号量实现有什么问题

> ID：16210995
> 
> 赞同：1
> 
> 时间：2013-04-25T09:21:53.773
> 
> 标签：c, multithreading, signals, semaphore, wait

我需要使用信号量在 C89 中实现生产者和消费者。

我承认这是为了学校作业，所以我将主要使用伪代码。

我花了很长时间来简化我的代码，所以希望有人能找出问题所在

有一个全局变量：

```
threadQueue ready; //global queue that holds all the threads ready to be run 
```

这些是我在代码中使用的函数。我试图让它们不言自明：

```
NewThread(Function); //turns a function into a thread
RotateQueue(Queue); //rotates the Queue so the head becomes the tail and next becomes the head
Add2Queue(Thread, Queue); //adds a thread to a queue
RunThread(NewThread); //stops the current thread, and runs NewThread
RemoveHead(Queue); //removes the head of the queue and returns it 
```

以下是我设计信号量的方式：

```
struct semaphore{
    threadQueue queue;
    int val;
}

wait(semaphore s)
{
    if(--s.val < 0)
    {
        Add2Queue(currentThread, s.queue);
        RunThread(ready.head);
    }
}

signal(semaphore s)
{
    if(s.val++ < 0)
    {
        Add2Queue(removeHead(s.queue), ready);
    }
    RotateQueue(ready);
    RunThread(ready.head);
} 
```

最后，这是我运行代码的地方：

```
semaphore mutex = 1;
semaphore taken = 0;
semaphore remaining = some number;

producer()
{
    while(1)
    {
        wait(remaining);
        wait(mutex);
        //critical section
        signal(mutex);
        signal(taken);
    }
}

consumer()
{
    while(1)
    {
        wait(taken);
        wait(mutex);
        //critical section
        signal(mutex);
        signal(remaining);
    }
}

main()
{
    thread produce = NewThread(producer);
    thread consume = NewThread(consumer);

    Add2Queue(produce, ready);
    Add2Queue(consume, ready);

    RunThread(ready.head);      
} 
```

我的代码目前这样做：

1.  开始生产线程
2.  在信号（互斥）之后切换到消耗线程
3.  启动消费线程
4.  切换到第二个消费线程？在等待（采取）
5.  启动第二个线程
6.  切换到第三个消费线程？？在等待（采取）
7.  Add2Queue 上的 SegFaults

我很确定 signal() 和 wait() 不正确并导致我所有的问题，但我不知道我需要改变什么。

请帮忙！

# javascript - 使用正则表达式分解字符串

> ID：16210997
> 
> 赞同：2
> 
> 时间：2013-04-25T09:21:55.317
> 
> 标签：javascript, regex

我需要用 JavaScript 分解一个字符串。

初始字符串：

```
$var="1234 => 4242,Example Mailbox,root@localhost" 
```

分解的4个部分：

```
1234
4242
Example Mailbox
root@localhost 
```

什么是更有效的方法：使用正则表达式或调用字符串函数？

有人可以提供一个正则表达式来提取这些模式，可能是通过使用组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T09:26:40.370

这是一个限制较少的解决方案：

```
$var.split(/\s*,\s*|\s*=>\s*/) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T09:26:56.613

看起来您想将[字符串`split`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)与一个简单（且快速）的正则表达式一起使用：

```
var vals = $var.split(/,|\s*=>\s*/); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:23:26.573

这个可以工作，假设前两组是整数，其余的可以是任何东西（逗号除外）

```
([0-9]+) => ([0-9]+),([^,]+),([^,]+) 
```