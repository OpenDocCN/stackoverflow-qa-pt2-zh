# StackOverflow 问答 16063000-16063999

# c# - 为什么没有调用我覆盖的 Dispose？

> ID：16063007
> 
> 赞同：3
> 
> 时间：2013-04-17T14:37:47.957
> 
> 标签：c#, .net, compact-framework, overriding, dispose

我目前正在使用 .NET Compact Framework 3.5 中的 TextWriter 类将日志条目写入文件。这是一个非常常见且简单的任务，没有问题。但是使用 TextWriter 并在写入所有数据后调用 Dispose 会导致文件保持打开状态。

我的方法是初始化一个 FileStream，然后使用创建的 FileStream 实例初始化一个 StreamWriter。然后我使用静态方法 Synchronized 创建了一个同步的 TextWriter。

为了调查为什么在写入和刷新数据后我的文件无法被另一个进程访问，我从 StreamWriter 派生了一个类，并重写了 Dispose 方法，只是为了查看它是否被调用。运行代码显示未调用覆盖的 Dispose 方法，这让我感到困惑。

调用代码是：

```
var fileStream = new FileStream("\\NAND_FLASH\\test.file", FileMode.OpenOrCreate);
var streamWriter = new ExtendedWriter(fileStream, Encoding.UTF8);

TextWriter textWriter = TextWriter.Synchronized(streamWriter);
textWriter.Dispose(); 
```

和派生类：

```
internal class ExtendedWriter : StreamWriter
{
    public ExtendedWriter(Stream stream) : base(stream)
    {
    }

    public ExtendedWriter(Stream stream, Encoding encoding) : base(stream, encoding)
    {
    }

    public ExtendedWriter(Stream stream, Encoding encoding, int bufferSize) : base(stream, encoding, bufferSize)
    {
    }

    public ExtendedWriter(string path) : base(path)
    {
    }

    public ExtendedWriter(string path, bool append) : base(path, append)
    {
    }

    public ExtendedWriter(string path, bool append, Encoding encoding) : base(path, append, encoding)
    {
    }

    public ExtendedWriter(string path, bool append, Encoding encoding, int bufferSize) : base(path, append, encoding, bufferSize)
    {
    }

    protected override void Dispose(bool disposing)
    {
        Trace.WriteLine("Extended writer dispose!");
        base.Dispose(disposing);
    }
} 
```

有人可以向我解释这种行为吗？

**编辑：** 更新了问题文本，我没有提到我正在使用 .NET Compact Framework 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:09:06.373

我刚刚使用 Reflector 查看了 CF 3.5 BCL 中的 TextWriter。

这是您正在调用的 Dispose：

```
public void Dispose()
{
    this.Dispose(true);
    GC.SuppressFinalize(this);
} 
```

所以这是调用参数化的 Dispose，它看起来像这样：

```
protected virtual void Dispose(bool disposing)
{
} 
```

因此，可以解释为什么派生的 StreamWriter 没有被 Disposed - TextWriter 不会在其包含的 StreamWriter 上调用 Dispose。你必须自己处理你的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:56:46.247

我不认为一切都在实现`IDisposable`接口时做它应该做的事情。

例如，如果您在`using`子句中打开连接，则使用 Microsoft Access 数据库连接 (OleDb) 将永远不会关闭该连接。

我的猜测是，您找到了另一个控件，它并没有做它应该做的所有事情。

# javascript - 如何检测浏览器对 itms 链接的支持？

> ID：16063017
> 
> 赞同：2
> 
> 时间：2013-04-17T14:38:16.707
> 
> 标签：javascript, safari, itunes-store

如何检测用户的浏览器是否支持 iTunes Music Store ( `itms://`) 链接？

如果浏览器支持它，我想提供一个`itms://`链接，以便它可以直接在 iTunes 中打开。但对于不支持的浏览器，我会使用`https://itunes.apple.com`.

我想`itms://`只提供给 Safari，但后来意识到（至少在 Mac 上）Chrome 似乎也支持`itms://`. 此外，检测 Safari[似乎有点脆弱](https://stackoverflow.com/a/12625944/93995)。如果可能的话，我更愿意检测功能支持而不是检查特定的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T15:21:23.473

如果您知道如何在 Google Chrome 等设备上使用“检查元素”，您会发现以下 javascript 使用了一个名为`its.detect.iTunesDetected()`.

所需的外部脚本来自苹果的网站：
[https ://itunes.apple.com/htmlResources/EF6B/web-storefront-base.js](https://itunes.apple.com/htmlResources/B2B2/web-storefront-base.js)
[https://itunes.apple.com/htmlResources/EF6B/web-storefront-preview.js](https://itunes.apple.com/htmlResources/B2B2/web-storefront-preview.js)

```
<script>
        if(its.detect.itunesDetected()) alert("iTunes Installed");
</script> 
```

[示例代码。](http://jsfiddle.net/FQ6F7/3/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:14:19.257

我最终使用了[这个脚本](https://github.com/n0s/itunesdetect/blob/master/itunesdetect.js)，我在发布后立即创建了它，[@Lawson](https://stackoverflow.com/users/2283816/lawson)也推荐了它。

**更新**：似乎不适用于 Windows 8 上的 IE。它无法检测到该平台上的 iTunes 集成。

# r - 将额外的参数传递给 R 中的函数

> ID：16063025
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:38:42.527
> 
> 标签：r

我是 R 的新手。我正在使用包“genalg”来处理与遗传算法相关的功能。在这个包中有一个名为“rgba”的函数。当我调用这个函数（rbga）时，我需要传递另一个函数（let A）（用户编写的评估函数）的引用作为参数，它（A）将被“rbga”函数调用，但我想访问一些值在“rbga”函数未传递给“A”的“A”中。我可以为此目的使用环境变量，但还有其他方法可以做到这一点吗？

> 编辑：

```
evaluate<-function(x,y,z) # x,y,z arguments passed by rbga 
{ 
 q=p # p is neither x,y,z nor local to this function.
}

result<- rbga(..,evalFunc=evaluate,..) # calls the function evaluate. 
```

在“评估”函数中，我想使用 p。由于 p 不是由调用函数传递的，也不是被调用函数的本地函数，所以我需要以某种方式传递它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:55:23.320

从文档看来，两种类型的用户定义函数都有一个明确定义的接口。`evalFunc`获取染色体向量，以及`monitorFunc`包传递给此函数的内部对象，用户可以从中获取内容，例如绘图。

在其当前实现中，无法向这些函数添加自定义的用户定义参数。让它工作需要对包代码进行一些调整。

# asp.net - “/Ebpp3”应用程序中的服务器错误

> ID：16063027
> 
> 赞同：0
> 
> 时间：2013-04-17T14:38:58.680
> 
> 标签：asp.net

在我的公司，我们有一台机器，一旦按下某个网站上的按钮，就会收到此错误消息。该网站本身似乎工作正常（除了没有加载几张图片）但是一旦按下按钮，机器就会收到此错误。

“/Ebpp3”应用程序中的服务器错误

我已经在 IE 和 Firefox 上检查过了。已经尝试过不起作用的功能模式。

```
Stack Trace:

[HttpException (0x80004005): Authentication of viewstate failed.  1) If this is a cluster, edit <machineKey> configuration so all servers use the same validationKey and validation algorithm.  AutoGenerate cannot be used in a cluster.  2) Viewstate can only be posted back to the same page.  3) The viewstate for this page might be corrupted.]
   System.Web.UI.LosFormatter.Deserialize(String input) +117
   System.Web.UI.Page.LoadPageStateFromPersistenceMedium() +101

[HttpException (0x80004005): Invalid_Viewstate
    Client IP: 100.3.103.37
    Port: 51747
    User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
    ViewState: dDw3ODE5MzA1Mzg7dDw7bDxpPDA+Oz47bDx0PDtsPGk8OT47aTwxMD47PjtsPHQ8cDxsPFZpc2libGU7PjtsPG88Zj47Pj47bDxpPDE+Oz47bDx0PHA8cDxsPFZpc2libGU7PjtsPG88Zj47Pj47Pjs7Pjs+Pjt0PHA8bDxWaXNpYmxlOz47bDxvPGY+Oz4+O2w8aTwxPjs+O2w8dDxwPHA8bDxUZXh0Oz47bDxUYXggUm9sbCAyMDEyLzIwMTMgaXMgY2xvc2VkLiBQYXltZW50cyByZWNlaXZlZCB3aXRoIGEgcG9zdG1hcmsgb2YgIDYvMzAvMjAxMyBhcmUgc3RpbGwgYmVpbmcgcHJvY2Vzc2VkLiBGb3IgSW5mb3JtYXRpb24gYWJvdXQgeW91ciBiaWxsLA0KcGxlYXNlIGNhbGwgKDg3NykgVEFYNFNEQyAoODI5LTQ3MzIpLiA7Pj47Pjs7Pjs+Pjs+Pjs+Pjs+Rlybxeps07mEwuNkAiKOdbBXj5M=
    Http-Referer: https://www.sdctreastax.com/ebpp3/(dolptk45bmjvq245ufgdhr45)/Start.aspx/Start.aspx
    Path: /ebpp3/Start.aspx/Search.Aspx.]
   System.Web.UI.Page.LoadPageStateFromPersistenceMedium() +447
   System.Web.UI.Page.LoadPageViewState() +18
   System.Web.UI.Page.ProcessRequestMain() +447 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:59:01.093

您的问题很可能是由页面回发到自身以外的页面引起的。

`Path: /ebpp3/Start.aspx/Search.Aspx.`

`Http-Referer: https://www.sdctreastax.com/ebpp3/(dolptk45bmjvq245ufgdhr45)/Start.aspx/Start.aspx`

如果您需要执行跨页回发，则需要确保您使用的是[PostBackUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)属性。

> PostBackUrl 属性允许您使用 Button 控件执行跨页发布。

# css - durandal.js - 是否可以使用视图按需加载视图特定的 css？

> ID：16063028
> 
> 赞同：4
> 
> 时间：2013-04-17T14:39:02.250
> 
> 标签：css, single-page-application, durandal

我最近开始开发一个使用 Durandal.js 的 SPA 应用程序。我们有几个视图和模型，它们在不同时间组合/加载到应用程序中。

例如：MyFavorites.js + MyFavorites.html

有没有办法让 durandal 将视图“链接”到 css 文件（在这种情况下可能是 MyFavorites.css），以便它可以根据需要获取它并可能利用缓存？我可以直接在我的 html 文件中放置一个或标记，但我认为这是一种不好的做法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:10:06.903

Durandal 没有专门针对此的任何东西。但是，有一个 require.js css 加载器插件，您可以从与该功能关联的一个 js 模块中使用它。我认为这样做有一些“陷阱”，但如果你真的想要动态 css 注入，那么值得研究一下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-30T16:25:24.670

我创建了一个插件。您可以将其用于 Durandal 2.0。

```
define(['jquery'], function ($) {
    return {
        loadCss : function (fileName) {
            var cssTag = document.createElement("link")
            cssTag.setAttribute("rel", "stylesheet")
            cssTag.setAttribute("type", "text/css")
            cssTag.setAttribute("href", fileName)
            cssTag.setAttribute("class", "__dynamicCss")

            document.getElementsByTagName("head")[0].appendChild(cssTag)
        },
        removeModuleCss: function () {
            $(".__dynamicCss").remove();

        }
    };
}); 
```

您可以在视图模型中使用它，如下所示。

```
define(['plugins/cssLoader'], function (cssLoader) {
    var ctor = function () {
        this.compositionComplete =  function () {
            cssLoader.loadCss("sample.css");
            cssLoader.loadCss("sample2.css");

        };
        this.deactivate =  function () {
            cssLoader.removeModuleCss();
        }
    };

    return ctor;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T22:07:49.590

我不确定为什么在视图的锚标记上放置 id 或 class 是“不好的做法”（CSSlist 会为 id 大喊大叫，但我认为这很愚蠢）；这似乎是一个非常优雅的解决方案，它使用 css 提供给您使用的级联。我认为这是[Head JS](http://headjs.com/)动态采用的方法。您可能会对此进行调查，但我不确定它与 Require JS 的效果如何。无论如何，手动方法应该可以正常工作。您唯一没有得到的是相关css的延迟加载。

另一种方法（现在可以在 Durandal 包含的 Knockout 示例中看到）是`<style type='text/css'>...</style>`在视图 html 的顶部放置一个部分。这为您提供了延迟加载，但代价是您的 css 不在单独的文件中。

如果您的自定义视图样式需要应用于多个视图，您可能会采用前一种方法来保持 DRY（当然，使用类而不是 id）。

另外，请从 RequireJS 文档中查看[此内容。](http://requirejs.org/docs/faq-advanced.html#css)

# jquery - 使用 Phonegap、Zepto 和 Backbone 进行页面转换

> ID：16063030
> 
> 赞同：0
> 
> 时间：2013-04-17T14:39:05.823
> 
> 标签：jquery, cordova, backbone.js, transitions, zepto

我正在使用 Zepto、Backbone 和 Phonegap 开发一个移动应用程序。我一直在努力实现页面转换。我试过这个库（[https://github.com/dgileadi/zepto-page-transitions/tree/master/example](https://github.com/dgileadi/zepto-page-transitions/tree/master/example)）。我无法让它工作，因为它侦听 hashchange 事件来触发转换，但是 Backbone 路由器也侦听相同的事件，从而产生冲突。有没有办法解决这个问题？是否有其他库可以使用 Zepto 和 Backbone 进行转换？？？

编辑：

```
<div id="one" data-role="page">
        <a transition="slide" href="#two">Spin to local page two</a>
    </div>
    <div id="two" data-role="page" data-title="Page Two">
    </div> 
```

当我点击链接“Spin to local page two”时，Backbone 路由器会在我的应用程序上查找“two”路由。相反，我用于转换的库应该转换为“两个”div：

```
$(window).on('hashchange', function(e) {
                var target = (action && action.element) || $(document.body);
                if (!ignoreHash[window.location.hash]) {
                    var to = window.location.hash;
 ... 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T22:23:35.103

试试这个……我一直在寻找从 jQuery Mobile 切换到另一个框架的方法。试图找到我需要更换它的一切。在 GitHub 上找到了这个页面转换，但还没有尝试过：

[Zepto 页面转换](https://github.com/dgileadi/zepto-page-transitions)

如果你让它工作，请告诉我！

ps ...您还可以预取页面吗？我发现[了这一点](http://www.prefetchjs.de/blog.html)，但它的记录非常糟糕。如果有替代方案，我很乐意听到。

# asp.net-mvc - 在 asp.net mvc +stimulsoft 上覆盖 CSV 导出默认设置

> ID：16063032
> 
> 赞同：1
> 
> 时间：2013-04-17T14:39:06.793
> 
> 标签：asp.net-mvc, stimulsoft

我在 asp.net mvc4 应用程序上使用 stimulsoft mvc 报告查看器。我试图弄清楚如何覆盖编码和分隔符的默认设置，以便我的最终用户不必更改它们。

特别是，我需要知道如何访问 StiCsvExportSettings 对象。我还需要知道代码中放置它的正确位置（在查看器上，或报告设置回调上）。

我找不到有关如何完成此操作的任何文档。

有人对这个概念有任何经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:36:46.527

在当前版本中是不可能的。此功能将在下一个预发布版本之一中提供。

# java - 在 Java 中将 HTML 转换为 PDF 不读取表单值

> ID：16063034
> 
> 赞同：1
> 
> 时间：2013-04-17T14:39:11.827
> 
> 标签：java, html, pdf, itext

我正在尝试使用 java 将 html 文档转换为 PDF，而我发现的唯一解决方案是使用 iText (XMLWorkerHelper)。

它有效，但我的问题是它似乎忽略了 HTML 表单值，导致它们没有显示在最终的 pdf 中。例如，如果我的 html 中有一个“名称：[用文本框写的东西]”，

```
<input class="layout" readonly="readonly" name="Name"
                  id="Name" value="ABCD WXYZ" size="83" maxlength="60"
                  type="text" /> 
```

只有“名称：”会出现在 pdf 中。

关于如何解决这个（愚蠢的？）问题的任何提示？当然，即使使用不同的（开源）API。

附上我的代码：

```
private static void createPDF (){  

    String path = "myTest.pdf";  
    PdfWriter pdfWriter = null;  

    //create a new document  
    Document document = new Document();  

    try {  

     //get Instance of the PDFWriter  
     pdfWriter = PdfWriter.getInstance(document, new FileOutputStream(path));  

     //document header attributes  

     //open document  
     document.open();  
     InputStream is = new FileInputStream("page.html");  

     // create new input stream reader  
     InputStreamReader isr = new InputStreamReader(is);  

     //get the XMLWorkerHelper Instance  
     XMLWorkerHelper worker = XMLWorkerHelper.getInstance();  
     //convert to PDF  
     worker.parseXHtml(pdfWriter, document, isr);  

     //close the document  
     document.close();  
     //close the writer  
     pdfWriter.close();  

    } catch (Exception e) {  
        e.printStackTrace();  
    }  

   } 
```

正如你所看到的，没有太多要编译的东西，所以我猜问题出在工人本身，也许我忽略了一些让它工作的东西。如果我尝试在任何随机在线服务上转换 html 页面，它会完美运行。

顺便说一句，我尝试将我的 html 源代码上传到 iText 演示（[http://demo.itextsupport.com/xmlworker/](http://demo.itextsupport.com/xmlworker/)），但它仍然存在这个问题......

# facebook-graph-api - 未捕获的 Oauth 异常

> ID：16063041
> 
> 赞同：1
> 
> 时间：2013-04-17T14:39:22.520
> 
> 标签：facebook-graph-api, ip, whitelist

我有一个调用 Graph API 的 php 应用程序。它已经工作了将近一年，今天停止工作，出现以下错误：

致命错误：未捕获的 OAuthException：此 IP 无法为该应用程序发出请求。在第 1133 行抛出 /mnt/var/vcap.local/dea/apps/nn-6-38e7eee3a80186c674057d8c08ede661/app/vendor/facebook/php-sdk/src/base_facebook.php

服务器通过appfog，主机名是：nn.aws.af.cm

我查看了建议我将 IP 添加到白名单的帖子。这并没有解决问题。(54.236.159.122)

如果有人能提供正确的答案，我将不胜感激。在此先感谢您的时间。

# vba - Microsoft Outlook 2010 中的统一收件箱

> ID：16063042
> 
> 赞同：0
> 
> 时间：2013-04-17T14:39:24.280
> 
> 标签：vba, outlook

我在 MS Outlook 2010 中配置了两个 IMAP 帐户和一个 POP 帐户。广泛的 Google 研究表明 Outlook 不支持真正统一的收件箱，这三个帐户将在其中组合，并且 IMAP 电子邮件仍将与其关联并由其控制IMAP 服务器。使用规则复制邮件会取消它们与 IMAP 的关联，因此这将不起作用。

这可以用VBA的`Application.AdvancedSearch`方法来完成吗？我不精通 VBA，所以如果有人可以提供一个以编程方式创建的扫描**多个**电子邮件帐户的 Outlook 搜索文件夹的示例，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:29:03.373

这似乎在 Outlook 2010 中运行良好：

请参阅：[http ://www.slipstick.com/how-to-outlook/how-to-create-a-unified-inbox/](http://www.slipstick.com/how-to-outlook/how-to-create-a-unified-inbox/)

祝你好运。

# php - 如何使用 ss3 Gallery 模块创建文件夹

> ID：16063044
> 
> 赞同：1
> 
> 时间：2013-04-17T14:39:24.890
> 
> 标签：php, web, content-management-system, silverstripe

**嗨**，
我在我的 silverstripe 项目中使用 ss3 画廊模块，我想知道是否可以创建比拥有图片更多的文件夹。

这是我的情况：
- 我有一个项目页面持有人，它允许一些项目页面
- 我有一些项目页面，其中包含一些数据和一些图片

当我创建一个新的项目页面并添加一些图片时，这些图片进入asset/bulkUppload 文件夹，问题是这个文件夹拥有我所有的项目页面图片。我想按项目页面创建一个图片文件夹，所以例如当我必须显示我的项目页面信息时，我可以轻松找到它的图片并显示它们

有谁知道这怎么可能？

谢谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:39:44.017

如果您的图像被上传到一个`bulkUpload`文件夹中，则该模块很可能使用该`GridFieldBulkEditingTools`模块（[https://github.com/colymba/GridFieldBulkEditingTools](https://github.com/colymba/GridFieldBulkEditingTools)）。

如果是这种情况，您可以为每个添加此行`GridFieldConfig`：

```
$config->getComponentByType('GridFieldBulkImageUpload')->setConfig( 'folderName', 'gallery/'.$this->ID ); 
```

这会将图像保存在每个页面的编号子文件夹中`assets/gallery`。但是你可以改变`'gallery/'.$this->ID`任何你想要的......

# android - Android：通过单击按钮将文本添加到不同xml布局的文本视图

> ID：16063046
> 
> 赞同：2
> 
> 时间：2013-04-17T14:39:28.577
> 
> 标签：android, xml, class, button, textview

我只需要一些关于我正在制作的 android 程序的帮助。基本上，我的一个 XML 布局中有一个按钮，当按下该按钮时，它应该将该活动的名称添加到位于另一个 XML 布局中的 TextView 中。

所以这是需要按下的按钮。

```
 <Button
    android:id="@+id/add_to_schedule"
    android:layout_width="150dp"
    android:layout_height="30dp"
    android:layout_below="@+id/widget44"
    android:layout_centerHorizontal="true"
    android:text="@string/add_to_schedule"
    android:textColor="#ffffffff"
    android:textSize="12sp"
    android:typeface="serif" /> 
```

这是 TextView，它位于不同的 XML 布局中，我希望它显示信息。

```
<TextView
        android:id="@+id/txtview"
        android:layout_width="300dp"
        android:layout_height="200dp"
        android:layout_alignLeft="@+id/textview"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="76dp"
        android:text="@string/textview" /> 
```

这是将从中按下 Button 的类。

```
public class Aerobic_Steps extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aerobic_steps);

    }
} 
```

这是 TextView 所属的类。

```
public class Training_Schedule extends Activity{

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.training_schedule);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:20:18.920

在课堂上，在Button`Aerobic_Steps`中调用 Training_Schedule 活动`OnClick`

```
public class Aerobic_Steps extends Activity implements OnClickListener {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aerobic_steps);
    Button btn = (Button) findViewById (R.id.buttonName);
    btn.setOnClickListener(this);

}
}

@Override
public void onClick(View view) {
    // TODO Auto-generated method stub
    String className = Aerobic_Steps.this.getClass().getSimpleName();
            Intent i = new Intent(this, Training_Schedule.class); 
           i.putExtras("name",className);
            startActivity(i);

} 
```

现在在`Training_Schedule`活动中，使用下面的代码`OnCreate()`

```
 //Get the bundle
  Bundle bundle = getIntent().getExtras();

  //Extract the data…
  String name = bundle.getString(“name”); 
  TextView tv = (TextView) findViewByID(R.id.yourTextView);
  tv.setText(name); 
```

# java - 将二维数组转换为棋盘

> ID：16063047
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:39:30.903
> 
> 标签：java, android

我正在尝试制作安卓国际象棋游戏。我已经让引擎使用这样的基于文本的 UI：

```
bR bN bB bQ bK bB bN bR 8
 bp bp bp bp bp bp bp bp 7
    ##    ##    ##    ## 6
 ##    ##    ##    ##    5
    ##    ##    ##    ## 4
 ##    ##    ##    ##    3
 wp wp wp wp wp wp wp wp 2
 wR wN wB wQ wK wB wN wR 1
  a  b  c  d  e  f  g  h
White's move: 
```

我想将此二维数组转换为图形 UI。如果移动成功与否，所有移动都正常工作并打印出结果或错误。我知道这将类似于 gridview 之类的东西。我不是在寻找代码，而是一种算法或一种可以在视图中转换这个二维数组的过程，例如：e2 e4 移动 pawn 将导致这个

```
 bR bN bB bQ bK bB bN bR 8
 bp bp bp bp bp bp bp bp 7
    ##    ##    ##    ## 6
 ##    ##    ##    ##    5
    ##    ## wp ##    ## 4
 ##    ##    ##    ##    3
 wp wp wp wp    wp wp wp 2
 wR wN wB wQ wK wB wN wR 1
  a  b  c  d  e  f  g  h
Black's move: 
```

我想在移动成功后使用二维数组中的数据重新绘制棋盘。上面看到的棋盘数据存储在数据数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:49:17.543

你考虑过只走一部分吗？

创建一个新的 UTF8 打印流：

```
PrintStream out = new PrintStream(System.out, true, "UTF8"); 
```

请[在此处](https://stackoverflow.com/q/7665120/823393)参阅每个棋子的 UTF8 代码列表。

你可能需要一种涵盖这些代码的字体——我发现 Monospaced 13 对我来说很好用。

这是我不久前写的一些实验代码的一个例子——在等宽中看起来更好：

```
 ♜|♞|♝|♚|♛|♝|♞|♜
    —+—+—+—+—+—+—+—
    ♟|♟|♟|♟|♟|♟|♟| 
    —+—+—+—+—+—+—+—
    +|*| | | | | | 
    —+—+—+—+—+—+—+—
    +| |*|+|*| | |♟
    —+—+—+—+—+—+—+—
    +| | |♙| | |*|+
    —+—+—+—+—+—+—+—
    +|*| | | | | | 
    —+—+—+—+—+—+—+—
    ♙|♙|♙| |♙|♙|♙|♙
    —+—+—+—+—+—+—+—
    ♖|♘|♗|♔|♕|♗|♘|♖ 
```

# android - OnClick 没有获得真正的按钮 ID

> ID：16063048
> 
> 赞同：0
> 
> 时间：2013-04-17T14:39:31.533
> 
> 标签：android

我初始化了一个按钮

> 按钮 button1 = null;

在我活动的开始。布局设置好后，我做

```
final   Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(this); 
```

onClick 看起来像这样

```
public void onClick(View v) {
        if(v == button1) {System.out.println("asd");};
        System.out.println(v);
    } 
```

打印显示`"I/System.out(22758): android.widget.Button@**405632f0**"`，当然 println("asd") 没有显示。

我不想为每个按钮获取 Button@ ****代码，因为使用 id 当然要容易得多。**

有人在Idea中我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:44:34.460

而不是这个

```
public void onClick(View v) {
        if(v == button1) {System.out.println("asd");};
        System.out.println(v);
    } 
```

用这个

```
public void onClick(View v) {
        if(v.getId() == R.id.button1) {System.out.println("asd");};
        System.out.println(v);
    } 
```

**为什么？？**

因为当您使用 '==' 进行比较时，它会比较两个对象，无论它是相同的引用。我检查两个对象是否引用相同的内存。

要解决这个问题，您可以检查他们的 id，这很容易比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:45:13.717

`R.id.button1`实际上是 Integer in `R.java`，它不是 String 或任何其他可以截断为`button1`. 而是使用：

```
if(v.getId() == R.id.button1) 
```

同样在 Java 中，您不能`==`用来测试非原始对象的相等性，您*必须*使用`equals()`. 阅读[如何比较 Java 中的字符串？](https://stackoverflow.com/q/513832/1267661)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:46:12.503

button1 为空。所以你比较 null 和 not null。改变这个：

```
final   Button button1 = (Button) findViewById(R.id.button1); 
```

到：

```
button1 = (Button) findViewById(R.id.button1); 
```

它会起作用。但你最好比较 R.id.button1 和 v.getId() 数字。不看自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T14:37:24.950

正如@Leonidos 所说，改变：

```
final   Button button1 = (Button) findViewById(R.id.button1); 
```

到：

```
button1 = (Button) findViewById(R.id.button1); 
```

而且，是的，您**可以**比较参考：如果您看到 android 资源，则有两种策略：有些人比较崇敬，例如：

```
if (v == mSomeButton) { 
```

和一些使用 id 像：

```
if (v.getId() == R.id.some_button) { 
```

# php - PDO 连接首次查询延迟

> ID：16063050
> 
> 赞同：1
> 
> 时间：2013-04-17T14:39:35.353
> 
> 标签：php, mysql, pdo

我有一个使用 PHP 的 PDO 库来访问 mysql 数据库的站点。mysql 数据库经过高度优化，并具有所有合适的索引以使查询快速等等。尽管与为特定 Web 服务运行的第一个查询有关，但我遇到了一些奇怪的行为。

这个特定的 web 服务对数据库运行一个查询并返回一个 json 响应，然后将其馈送到 jquery 自动完成。

在客户端中首次运行时的查询大约需要 2 秒才能运行，之后下降到百分之一秒，可能是由于 innodb 缓存。

如果我在新会话期间在自动完成框中输入一个条目，那么第一个查询响应可能需要 5 秒以上的时间，之后它会变得非常快地返回响应。如果我然后离开该站点一段时间，即可能一个小时（不是一个精确的度量，但为了争论，一个相对较长的时间段）并回到它再次观察到同样缓慢的第一次查询行为。

由于连接服务器上的连接数量有限，我出于必要而使用持久连接。

我想知道你们中是否有人有任何想法可以让我进一步减轻最初的延迟。

```
$DBH = null;

$host = "127.0.0.1";
$db_name = "my_db";
$user_name = "me";
$pass_word = "something";

try {
  # MySQL with PDO_MYSQL
  $DBH = new PDO("mysql:host=$host;dbname=$db_name;charset=utf8", $user_name, $pass_word, array(PDO::ATTR_PERSISTENT => true, PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'"));
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
}
catch(PDOException $e) {
    error_log( $e->getMessage(), 0 );
} 
```

**更新了答案**

经过大量测试并彻底检查这不是 dns 问题后，我去检查了 innodb 缓冲池路由。无论如何，我编写了一个存储过程，它使用一个查询为数据库中的每个表生成一个查询，从而将它们缓存在 innodb_buffer_pool 中。为每个表生成 sql 查询的查询来自[以下 SO question](https://stackoverflow.com/questions/3430865/how-to-preload-tables-into-innodb-buffer-pool-with-mysql)。我只对该查询进行了一次编辑并放入 database() 函数，以便它可以从调用它的任何数据库中工作。

我还对其进行了设置，以便可以通过 PHP 调用它，而无需等待脚本完成，以便您的正常应用程序继续运行。

我希望这可以帮助某人。为了提高效率，您可以将 exec 冷包装在一个小函数中，以便仅在特定时间运行它，依此类推。

**MySQL 存储过程 SQL**

```
DELIMITER $$

USE `your_db_name`$$

DROP PROCEDURE IF EXISTS `innodb_buffer_pool_warm_up`$$

CREATE DEFINER=`user_name`@`localhost` PROCEDURE `innodb_buffer_pool_warm_up`()
BEGIN
DECLARE done INT DEFAULT FALSE;
DECLARE sql_query VARCHAR(1000) DEFAULT NULL;
DECLARE sql_cursor CURSOR FOR
SELECT 
  CONCAT('SELECT `',MIN(c.COLUMN_NAME),'` FROM `',c.TABLE_NAME,'` WHERE `',MIN(c.COLUMN_NAME),'` IS NOT NULL')
FROM
  information_schema.COLUMNS AS c
LEFT JOIN (
  SELECT DISTINCT
    TABLE_SCHEMA,TABLE_NAME,COLUMN_NAME
  FROM
    information_schema.KEY_COLUMN_USAGE
) AS k
USING
  (TABLE_SCHEMA,TABLE_NAME,COLUMN_NAME)
WHERE
  c.TABLE_SCHEMA = DATABASE()
  AND k.COLUMN_NAME IS NULL
GROUP BY
  c.TABLE_NAME;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
OPEN sql_cursor;
read_loop: LOOP
    FETCH sql_cursor INTO sql_query;
    IF done THEN
      LEAVE read_loop;
    END IF;

SET @stmt_sql = sql_query;
PREPARE stmt FROM @stmt_sql;
EXECUTE stmt;

END LOOP;
CLOSE sql_cursor;
END$$
DELIMITER ; 
```

**PHP调用存储过程**

**innodb_warm_up_proc_call.php**

```
<?php
$DBH = null;

$host = "localhost";
$db_name = "your_db_name";
$user_name = "user_name";
$pass_word = "password";

try {
  # MySQL with PDO_MYSQL
  $DBH = new PDO("mysql:host=$host;dbname=$db_name;charset=utf8", $user_name, $pass_word, array(PDO::ATTR_PERSISTENT => true, PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'"));
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  $sql = "CALL innodb_buffer_pool_warm_up()";
  $STH = $DBH->prepare( $sql );
  $STH->execute();

    }catch( PDOException $e ) {
        error_log( $e->getMessage() . ' in ' .$e->getFile(). ' on line ' .$e->getLine(), 0 );
    }
?> 
```

**PHP 以静默方式运行上述脚本，无需等待它完成**

**innodb_warm_up.php**

```
<?php

$file_to_execute = dirname(__FILE__) . "/innodb_warm_up_proc_call.php";

//Run the stored procedure but don't wait around for a chat
exec("php -f {$file_to_execute} >/dev/null 2>&1 &");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:46:25.353

寻址特定 Web 服务时，将其域名更改为 IP 地址。
它很可能会消除这种延迟（由 DNS 查找引起）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:56:42.383

感谢您对此提供的所有帮助和很好的建议。我彻底检查了 dns 和其他解决方案，但最终它竟然是 innodb 页面缓冲池。我已经为自己编写了一个解决方案，并在我上面的问题中完整地添加了它，所以希望它会有用。再次感谢您的帮助。

# c# - 组合框不显示变化的值

> ID：16063051
> 
> 赞同：0
> 
> 时间：2013-04-17T14:39:43.393
> 
> 标签：c#, wpf, combobox

我陷入了一个奇怪的 ComboBox 问题。

我正在使用 ObjectDataProvider 来提供组合框：

```
 <ObjectDataProvider x:Key="foo" 
                    MethodName="GetNames" ObjectType="{x:Type sys:Enum}">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="local:FooEnum" />
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider> 
```

现在我有一个看起来像这样的类：

```
public class SomeClass : NotifyHelper
{
    private FooEnum _value;

    public FooEnum Value
    {
        get { return _value; }
        set
        {
            _value = value;
            OnPropertyChanged("Value");
        }
    }
} 
```

SomeClass 的集合通过组合框模板绑定到 ItemsControl

```
 <ItemsControl ItemsSource="{Binding Items}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{Binding Source={StaticResource foo}}" SelectedItem="{Binding Value}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

视图模型：

```
public class VM : NotifyHelper
{
    public VM ()
    {
        Items = new List<SomeClass>();
        Items.Add(new SomeClass{Value = Foo.X});
    }

    public List<SomeClass> Items {get; private set; }
} 
```

我的问题：
- 最初，组合框没有选择任何项目
- 当我在视图模型中更改值而不是在视图中时，组合框中的值不会更新。

*将 ComboBox SelectedItem 的绑定更改为 TwoWay 和 OnPropertyChange 没有影响！*

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:51:29.063

双向设置 SelectedItem 绑定模式

```
SelectedItem="{Binding Value, Mode=TwoWay}" 
```

是的，GetVaues 会在这里完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:08:18.163

这是我用 MVVM 为我的组合框提供枚举值的方法

在我的 ViewModel 的构造函数中，我有这个并将我的值（字符串）放在资源文件中

```
private ObservableCollection<WritableKeyValuePair<int, string>> _traceDisplayList = null;
private WritableKeyValuePair<int, string> _selectedTraceType = new WritableKeyValuePair<int, string>();

public OptionsFilterViewModel()
{
       _traceDisplayList = new ObservableCollection<WritableKeyValuePair<int, string>>();
       _traceDisplayList.Add(new WritableKeyValuePair<int, string>((int)TraceDisplayEnum.All, ProjectResources.All));
       _traceDisplayList.Add(new WritableKeyValuePair<int, string>((int)TraceDisplayEnum.WithEx, ProjectResources.TraceException));
       _traceDisplayList.Add(new WritableKeyValuePair<int, string>((int)TraceDisplayEnum.ExOnly, ProjectResources.ExceptionOnly));

}

    /// <summary>
        /// Listes des types de traces
        /// </summary>
        public ObservableCollection<WritableKeyValuePair<int, string>> TraceDisplayList
        {
          get { return _traceDisplayList; }
          set
          {
            _traceDisplayList = value;
            RaisePropertyChanged<OptionsFilterViewModel>(x => x.TraceDisplayList);
          }
        }

        /// <summary>
        /// Type de trace sélectionné dans la liste
        /// </summary>
        public WritableKeyValuePair<int, string> SelectedTraceType
        {
          get
          {
            return _selectedTraceType;
          }
          set
          {
            _selectedTraceType = value;
            RaisePropertyChanged<OptionsFilterViewModel>(x => x.SelectedTraceType);
          }

        } 
```

# encoding - WiX 安装程序 heat.exe 和非 ascii 文件名

> ID：16063062
> 
> 赞同：4
> 
> 时间：2013-04-17T14:40:18.260
> 
> 标签：encoding, wix, windows-installer

我在我的 WiX 脚本中添加了一个文件，路径名中带有字符“î”。Light.exe 会抱怨：

> 为字符串提供了指定数据库代码页“1252”中不可用的字符

有问题的字符是 Windows-1252 编码中的 0xEE，即 0x00EE Unicode 或 UTF-8 中的 0xC3AE。这些文件在heat.exe生成的一个wxs文件中，这个xml被编码为UTF-8。

我假设错误消息来自它尝试在数据库为 1252 时以 UTF 编码输入字符的事实？由于 Windows Installer 并不真正支持 UTF（如[WiX 文档](http://wix.sourceforge.net/manual-wix3/codepage.htm)中所述），我应该使用以 1252 还是 iso-8859 编码的输入 xml？如果是这样，我可以告诉 heat.exe 对其输出使用另一种编码吗？

我的问题与此类似： [利用 heat.exe 并收获已经本地化的文件名，并使用 wix 将它们包含到 msi](https://stackoverflow.com/questions/12168895/leveraging-heat-exe-and-harvest-already-localized-file-names-and-including-them)但不同之处在于，在这种情况下，字符是“真正的”非 ansi 字符，在我的情况下，字符*可以*在 1252 中正确编码，但似乎从 utf-8 输入文件的转换不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:43:14.833

WiX 工具集会像这样（大致）验证代码页：

```
encoding = Encoding.GetEncoding(codepage, new EncoderExceptionFallback(),
                                          new DecoderExceptionFallback());
writer = new StreamWriter(idtPath, false, encoding);
try
{
   // GetBytes will throw an exception if any character doesn't
   // match our current encoding
   rowBytes = writer.Encoding.GetBytes(rowString);
}
catch (EncoderFallbackException)
{
    rowBytes = convertEncoding.GetBytes(rowString);

    messageHandler.OnMessage(WixErrors.InvalidStringForCodepage(
                                row.SourceLineNumbers,
                                writer.Encoding.WindowsCodePage));
} 
```

NETFX 可能没有正确翻译“i”。在您的 XML 上显式设置代码页可能会有所帮助。为此，您可以尝试使用 XSLT（我从未尝试过通过 XSL 更改 XML 文档代码页，但似乎可行）或对文档进行后期编辑。

# sql - 存在于满足条件的游标中

> ID：16063063
> 
> 赞同：0
> 
> 时间：2013-04-17T14:40:22.277
> 
> 标签：sql, oracle, plsql, cursor

我创建了一个游标，它返回一些数据。然后，我希望在返回的数据中有一个 if 语句来检查字段 'test_field' 是否存在于 test_field2='A' 的游标中。不过，我正在努力使 if 语句的语法正确，并且在网上找不到任何指针。

```
CURSOR test_cur IS
      SELECT *
      FROM  test
      where name=pk_name;

BEGIN

FOR trec IN test_cur LOOP
    --The following line where my syntax is incorrect
    IF trec.test_field EXISTS IN test_cur WHERE trec.test_field2 = 'A' THEN
        {logic code to go here}
    END IF;
... 
```

示例数据：

```
name    | test_field    | test_field2
--------------------------------------
x       |  101          | ROL
x       |  101          | A
x       |  102          | ROL
x       |  103          | ROL 
```

在光标的第一个循环中，我们有以下内容：

```
trec.name=x
trec.field=101
trec.field2=ROL 
```

不过，我想要它做的是意识到还有另一行（y），其中 test_field=101 和 test_field2='A' 并因此进入 if 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:47:41.007

这种语法对我来说看起来不合逻辑，AFAIK 你不能那样做

一个解决方案是

```
IF trec.test_field is not null and  trec.test_field2 = 'A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:02:51.957

我在这里猜测，当您说“trec.test_fields 存在于 test_field = trec.test_field”时，您的意思是您`test_field`的程序中某处有一个单独的变量。如果是这种情况，**请将变量的名称更改**为`strTest_field`以防止变量和表中的字段之间的命名冲突，并将光标更改为：

```
CURSOR test_cur IS
      SELECT *
      FROM  test t
      where t.name = pk_name AND
            t.test_field = strTest_field AND
            t.test_field2 = 'A' 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:30:18.640

您不能提前查看以后的游标记录，并且多次运行游标会很昂贵，而且可能无论如何都没有帮助。

您可以对游标中的数据进行排序，以便您的`'A'`记录始终排在第一位，然后使用跟踪变量查看您是否有`'A'`当前`name`/`test_field`组合的记录：

```
DECLARE
    last_name test.name%TYPE := null;
    last_test_field test.test_field%TYPE := null;
    has_a BOOLEAN := false;
    CURSOR cur IS
        SELECT name, test_field, test_field2
        FROM  test
        WHERE name='x'
        ORDER BY name, test_field, test_field2;
        -- assumes 'A' actually comes first
BEGIN
    FOR rec IN cur LOOP
        -- reset tracking variables if major values change
        IF last_name IS NULL OR last_name != rec.name
            OR last_test_field != rec.test_field
        THEN
            last_name := rec.name;
            last_test_field := rec.test_field;
            has_a := (rec.test_field2 = 'A');
        END IF;
        IF has_a THEN
            DBMS_OUTPUT.PUT_LINE('name ' || rec.name || ' test_field '
                || rec.test_field || ' test_field2 ' || rec.test_field2
                || ' matched condition');
        END IF;
    END LOOP;
END;
/

name x test_field 101 test_field2 A matched condition
name x test_field 101 test_field2 ROL matched condition

PL/SQL procedure successfully completed. 
```

一种更简洁的方法可能是为游标中的每条记录添加一个标志，使用分析函数来“窥视”结果集中的前方；再次假设您的`'A'`值实际上是按字母顺序排列的，如果不是，则需要调整该函数以首先获得您的实际值：

```
SELECT name, test_field, test_field2,
    first_value(test_field2)
        over (partition by name, test_field
            order by test_field2) as has_a
            -- assumes 'A' actually comes first
FROM  test;

NAME       TEST_FIELD TEST_FIELD HAS_A
---------- ---------- ---------- ----------
x                 101 A          A
x                 101 ROL        A
x                 102 ROL        ROL
x                 103 ROL        ROL 
```

...甚至更好，因为这不依赖于目标值的字母顺序，并且还可以为您提供更清晰的结果：

```
SELECT name, test_field, test_field2,
    MAX(CASE WHEN test_field2 = 'A' THEN 'true' END)
        OVER (PARTITION BY name, test_field) AS has_a
FROM test;

NAME       TEST_FIELD TEST_FIELD HAS_
---------- ---------- ---------- ----
x                 101 ROL        true
x                 101 A          true
x                 102 ROL
x                 103 ROL 
```

把它放在光标中给出：

```
DECLARE
    CURSOR cur IS
        SELECT name, test_field, test_field2,
            MAX(CASE WHEN test_field2 = 'A' THEN 'true' END)
                OVER (PARTITION BY name, test_field) AS has_a
        FROM  test
        WHERE name='x'
        ORDER BY name, test_field, test_field2 DESC;
        -- forcing us to see ROL first, just to show it works
BEGIN
    FOR rec IN cur LOOP
        IF rec.has_a = 'true' THEN
            DBMS_OUTPUT.PUT_LINE('name ' || rec.name || ' test_field '
                || rec.test_field || ' test_field2 ' || rec.test_field2
                || ' matched condition');
        END IF;
    END LOOP;
END;
/

name x test_field 101 test_field2 ROL matched condition
name x test_field 101 test_field2 A matched condition

PL/SQL procedure successfully completed. 
```

请注意，这也不会强迫您`'A'`首先在循环中处理记录，这可能很重要，也可能不重要 - 可能不是因为您在示例中根本没有订购。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:09:00.577

如果我正确理解您的查询，那么您只是想往前看。如果是这样，您必须知道定义您的订单的字段。我在下面给出了执行此操作的模板。

解决您的语法问题的具体说明是：

FOR trec IN test_cur LOOP --我的语法不正确的以下行

```
SELECT COUNT(*) INTO l_count FROM  test
  where name= trec.test_field AND test_field2 = 'A' 
  and key > trec.key
   --this condition specifies if we need to look only further   
  ;

if l_count>0 then
    {logic code to go here}
END IF; 
```

并在下面重述了完整的模板：

```
CURSOR test_cur IS
  SELECT *
  FROM  test
  where name=pk_name

  ORDER by --<<whatever key that helps identify order>>

  ;

BEGIN

FOR trec IN test_cur LOOP
--The following line where my syntax is incorrect

SELECT COUNT(*) INTO l_count FROM  test
  where name= trec.test_field AND test_field2 = 'A' 
  and key > trec.key
   --this condition specifies if we need to look only further   
  ;

if l_count>0 then
    {logic code to go here}
END IF; 
```

...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T05:40:12.327

我宁愿建议在您用于光标的查询中检查此条件，就像这样：

```
CURSOR test_cur IS
    SELECT TEST.*,
           CASE
              WHEN EXISTS
                      (SELECT 1
                         FROM TEST T
                        WHERE     T.TEST_FIELD = TEST.TEST_FIELD
                              AND T.TEST_FIELD2 = 'A')
              THEN
                 1
              ELSE
                 0
           END
              HAS_A
      FROM TEST
          WHERE NAME=PK_NAME;

BEGIN

FOR trec IN test_cur LOOP
    --The following line where my syntax is incorrect
    IF trec.has_a = 1 THEN
        {logic code to go here}
    END IF;
... 
```

# c# - Eventlog 生成时间格式 - 毫秒

> ID：16063075
> 
> 赞同：1
> 
> 时间：2013-04-17T14:40:59.703
> 
> 标签：c#, datetime, event-log, milliseconds, custom-eventlog

我创建了一个事件日志条目：

```
if (!EventLog.SourceExists("testeventlog"))
            EventLog.CreateEventSource("testeventlog","testeventlog");

EventLog.WriteEntry("testeventlog", "testevent"); 
```

在此之后，我试图读出生成的时间：

```
eLog = new EventLog("testeventlog");
foreach (EventLogEntry entry in eLog.Entries)
{

     entry.TimeGenerated.ToString("MM/dd/yyyy hh:mm:ss.fff tt");

} 
```

我的问题是毫秒每次都是 0。是否有可能编写一个保存毫秒的事件日志条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:44:03.363

EventLog 不以毫秒分辨率存储时间。一般来说，它不应该是必需的，因为你不应该经常给它写信。如果您需要更高分辨率的日志和自定义消息，请考虑使用 NLog 或 Log4Net 等框架并将消息写入文件或数据库。

# c# - 如何在运行时将数据绑定到 DataGrid

> ID：16063077
> 
> 赞同：1
> 
> 时间：2013-04-17T14:41:07.723
> 
> 标签：c#, wpf, binding, datagrid, inotifycollectionchanged

所有，我有一些测试代码可以处理一些定义为的测试数据

```
private ObservableCollection<TestClass> _testData = new ObservableCollection<TestClass>();
public ObservableCollection<TestClass> TestData
{
    get { return _testData; }
    set { _testData = value; }
} 
```

并在设计时通过

```
<DataGrid x:Name="dataGrid" ItemsSource="{Binding TestData}".../> 
```

我创建了一个`DataGrid`在运行时通过

```
dataGrid.ItemsSource = BuildDataGridColumns(cultureDict).Tables[0].AsDataView(); 
```

和

```
private DataSet BuildDataGridColumns(Dictionary<string, string> cultureDict,
                                     DataTable additionalDt = null)
{
    // ...
} 
```

效果很好，但是由于（我相信）不存在，更新用于处理测试数据的网格视觉效果的代码不再起作用`ItemsSource="{Binding TestData}"`。应该绑定插入到 a`TextBox`和单元格中的文本的 XAML`DataGrid`是：

```
<DataGrid x:Name="dataGrid" 
          local:DataGridTextSearch.SearchValue="{Binding ElementName=searchBox, Path=Text, UpdateSourceTrigger=PropertyChanged}" 
          AlternatingRowBackground="Gainsboro" AlternationCount="2" HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
   <DataGrid.Resources>
      <local:SearchValueConverter x:Key="searchValueConverter" />
      <Style TargetType="{x:Type DataGridCell}">
         <Setter Property="local:DataGridTextSearch.IsTextMatch">
            <Setter.Value>
               <MultiBinding Converter="{StaticResource searchValueConverter}">
                  <Binding RelativeSource="{RelativeSource Self}" Path="Content.Text" />
                  <Binding RelativeSource="{RelativeSource Self}" Path="(local:DataGridTextSearch.SearchValue)" />
               </MultiBinding>
            </Setter.Value>
         </Setter>
         <Style.Triggers>
            <Trigger Property="local:DataGridTextSearch.IsTextMatch" Value="True">
               <Setter Property="Background" Value="Orange" />
            </Trigger>
         </Style.Triggers>
      </Style>
   </DataGrid.Resources>
   <DataGrid.CellStyle>
      <Style TargetType="DataGridCell" >
         <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
               <Setter Property="Background" Value="#FF007ACC"/>
               <Setter Property="Foreground" Value="White"/>
            </Trigger>
         </Style.Triggers>
      </Style>
   </DataGrid.CellStyle>
</DataGrid> 
```

我的问题是；

> **如何创建与`DataGrid`我在运行时创建的数据集的相同绑定？**

有人提出原因是我的数据没有实现`INotifyCollectionChanged`接口，但是由于数据的可变性，我必须将数据加载到`DataGrid`运行时。

> **如果数据的结构可以更改，我如何将此数据绑定到`DataGrid`实现的类？`INotifyPropertyChanged`**

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:35:58.423

我认为布拉姆是对的。（抱歉，我还没有添加评论的权限。）在您的测试代码中，您使用 ObservableCollection，它确实实现了 INotifyPropertyChanged。DataGrid 将获取对该集合的更改。您应该考虑在实际代码中使用 ObservableCollection 并通过它更新数据以由绑定的 DataGrid 拾取，而不是直接通过 dataGrid.ItemsSource。

本页答案中的方法可能会有所帮助：**[https ://stackoverflow.com/a/1581588/1082026](https://stackoverflow.com/a/1581588/1082026)**

最后，您的代码可能看起来像这样（注意，您必须定义一个类**DataItem**来反映 DataSet 的 DataTable 中的一行，特别是您的**DataGrid**关心的属性）：

```
private ObservableCollection<DataItem> dataItems= new ObservableCollection<DataItem>();
public ObservableCollection<DataItem> DataItems
{
    get { return this.dataItems; }
    set 
    { 
         this.dataItems = value; 
         base.OnPropertyChanged("DataItems");
    }
} 
```

有了这个绑定

```
<DataGrid x:Name="dataGrid" ItemsSource="{Binding TestData}".../> 
```

如果您不想处理 Add() 和 Remove()，这将是您设置集合的方式：

```
IList<DataItem> items = BuildDataGridColumns(cultureDict).Tables[0].AsDataView();
this.DataItems = new ObservableCollection<DataItem>(items);

...

private IList<DataItem> BuildDataGridColumns(Dictionary<string, string> cultureDict,
                                     DataTable additionalDt = null)
{
    // ... here create a list of DataItems from your table, and return it.
} 
```

希望有帮助！

# php - 在sql中显示两个表中的json

> ID：16063084
> 
> 赞同：0
> 
> 时间：2013-04-17T14:41:15.540
> 
> 标签：php, json

我设法在 sql 中执行了一个简单的连接语句来正确查询我想要的表，但是我在 json 中输出时遇到了问题。我不断得到输出 []，在我看来，它看起来像一个空数组。

```
$date_1 = mysql_real_escape_string($_GET["date_1"]);
$date_2 = mysql_real_escape_string($_GET["date_2"]);
$sport_type = ucfirst("$sport_type");
$sport_type = "Cycling - ".$sport_type;

$date1=explode('/',$date_1);
$d = $date1[0];
$m = $date1[1];
$y = $date1[2];
$date1_string = $y.'-'.$m.'-'.$d; 

$date2=explode('/',$date_2);
$d = $date2[0];
$m = $date2[1];
$y = $date2[2];
$date2_string = $y.'-'.$m.'-'.$d;  

// sql query to display info from database

$sql = "SELECT name, Cyclist.ISO_id, country_name, gdp, population  From Cyclist INNER JOIN Country ON Cyclist.ISO_id=Country.ISO_id WHERE dob BETWEEN $date1_string AND $date2_string ";

$res =& $db->query($sql);
$list = json_encode($res->fetchAll());

if (PEAR::isError($res)) {
    die($res->getMessage());
}
?>

<?php
echo $list
?> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:04:13.800

MySQL 日期字段的格式为 YYYY-MM-DD 而不是 DD-MM-YYY，就像您尝试的那样。

见这里：[http ://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

# java - 数组：java.lang.NullPointerException

> ID：16063088
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:41:40.267
> 
> 标签：java, arrays, nullpointerexception

我做错了什么？我认为这是数组的原因。行号现在不正确，因为我不得不稍微缩短我的文字，对此感到抱歉。

```
Exception in thread "main" java.lang.NullPointerException
    at Team.<init>(Team.java:43)
    at Team.main(Team.java:30) 
```

代码：

```
public static void main(String[] args) 
{
    System.out.println("Dein Fußballteam in der ersten Bundesliga!");

    int[] Spieler = new int[20];
    int Torschützen[] = new int[10];  

    Team myTeam = new Team();
    myTeam.einfacheNachricht();
}

public Team() 
{
    TeamSpieler = new Spieler[20];
    Scanner team = new Scanner(System.in);
    for (int i=0; i<20;i++){
        System.out.println("Bitte geben Sie den Namen des Spielers " + i + " ein: ");
        TeamSpieler[i].Name = team.nextLine();
        System.out.println("Bitte geben Sie das Alter des Spielers " + i + " ein: ");
        TeamSpieler[i].Alter = team.nextInt();
        System.out.println("Bitte geben Sie die Tore des Spielers " + i + " ein: ");
        TeamSpieler[i].Tore = team.nextInt();
    }
    System.out.println("Bitte geben Sie den Namen ihres Teams ein: ");
    Teamname = team.nextLine();
              team.close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:45:59.517

这一行：

```
TeamSpieler = new Spieler[20]; 
```

不创建`20`new `Spieler`s，它只创建`20` `Spieler`引用，初始化为`null`.

为了避免`NullPointerException`s，你需要做

```
TeamSpieler[i] = new Spieler(); 
```

对于每个`i`.

另外，请遵循`Java`编码标准，变量名应以小写字母开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:46:29.547

`TeamSpieler`拥有一个包含 20 个变量的数组，每个变量都可以指向一个`Spieler`对象——但它们都没有。相反，变量是 all `null`，这就是导致您的异常的原因。在循环的顶部，您`for`需要添加，例如，

```
TeamSpieler[i] = new Spieler(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:47:55.163

当您创建一个包含 20 个条目的数组时，它将填充 20`null`个条目。在您可以访问之前`Spieler`，您首先必须创建它们。

```
for (int i = 0; i < TeamSpieler.size(); i++) {
    TeamSpieler[i] = new Spieler();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T14:49:10.300

数组的元素需要**单独**初始化。

在您的代码中：

```
 TeamSpieler = new Spieler[20]; 
```

`null`用值初始化数组。

```
TeamSpieler[i].Name = team.nextLine(); 
```

访问对象`Name`的属性`null`。

# gwt - 验证 SmartGWT ListGrid 中的新行

> ID：16063104
> 
> 赞同：0
> 
> 时间：2013-04-17T14:42:23.867
> 
> 标签：gwt, smartgwt

我使用没有数据源的 ListGrid。我对某些字段使用验证器。但是然后我添加了新记录，直到我更改新记录中的值才被验证。我不想使用`grid.startEditingNew()`，因为如果我不更改它们，它们就没有 Record 实例。

```
 ListGrid grid = new ListGrid();
    grid.setCanEdit(true);
    ListGridField field1 = new ListGridField("attr1", "Name1");
    ListGridField field2 = new ListGridField("attr2", "Name2");

    CustomValidator validator = new CustomValidator() {

                @Override
                protected boolean condition(Object value) {
                    Logger.log("Validate: " + value);
                    return true;

                }
            };
    field1.setValidators(validator);
    field2.setValidators(validator);
    grid.setFields(field1, field2);

    Label addButton = new Label();
    //...
    addButton.setTooltip("Add");
    addButton.addClickHandler(new ClickHandler() {
                public void onClick(final ClickEvent clickEvent) {
                    ListGridRecord record = new ListGridRecord();
                    grid.addData(record);
             // we can use grid.startEditingNew() instead
                }
    }); 
```

如何强制验证新行？调用`grid.validateRow(grid.getRecords().length - 1)`不会导致调用验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:04:59.480

为什么不验证设置为新 Record 实例的值（来自 FormItems？）？
您可以在 ListGridField 和 FormItem 上重用验证器。

# java - org.tmatesoft.sqljet.core.SqlJetException：忙：错误代码是忙

> ID：16063105
> 
> 赞同：4
> 
> 时间：2013-04-17T14:42:25.833
> 
> 标签：java, sqlite

我正在运行关于 svn 的 java 代码，就像这样 [http://code.google.com/p/justcodingforfun/source/browse/MagicMissile/src/idv/arthur/prac/SvnTest2.java?r=3](http://code.google.com/p/justcodingforfun/source/browse/MagicMissile/src/idv/arthur/prac/SvnTest2.java?r=3)

但是，我收到以下错误消息，有人可以帮助解决问题吗

```
Exception in thread "main" org.tmatesoft.svn.core.SVNException: svn: E200030: SQLite error
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:85)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:69)
    at org.tmatesoft.svn.core.internal.wc17.db.SVNWCDbRoot.<init>(SVNWCDbRoot.java:83)
    at org.tmatesoft.svn.core.internal.wc17.db.SVNWCDb.parseDir(SVNWCDb.java:1527)
    at org.tmatesoft.svn.core.internal.wc17.db.SVNWCDb.parseDir(SVNWCDb.java:1390)
    at org.tmatesoft.svn.core.internal.wc17.db.SVNWCDb.getFormatTemp(SVNWCDb.java:1223)
    at org.tmatesoft.svn.core.internal.wc17.SVNWCContext.checkWC(SVNWCContext.java:4247)
    at org.tmatesoft.svn.core.internal.wc17.SVNWCContext.checkWC(SVNWCContext.java:4241)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgAbstractUpdate.checkout(SvnNgAbstractUpdate.java:735)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgCheckout.run(SvnNgCheckout.java:14)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgCheckout.run(SvnNgCheckout.java:9)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgOperationRunner.run(SvnNgOperationRunner.java:20)
    at org.tmatesoft.svn.core.internal.wc2.SvnOperationRunner.run(SvnOperationRunner.java:20)
    at org.tmatesoft.svn.core.wc2.SvnOperationFactory.run(SvnOperationFactory.java:1238)
    at org.tmatesoft.svn.core.wc2.SvnOperation.run(SvnOperation.java:294)
    at org.tmatesoft.svn.core.wc.SVNUpdateClient.doCheckout(SVNUpdateClient.java:777)
    at SvnTest.test(SvnTest.java:113)
    at SvnTest.main(SvnTest.java:122)
Caused by: org.tmatesoft.sqljet.core.SqlJetException: BUSY: error code is BUSY
    at org.tmatesoft.svn.core.internal.wc17.db.SVNWCDbRoot.<init>(SVNWCDbRoot.java:82)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-23T07:08:35.723

就我而言，目标文件夹包含陈旧的 .svn 文件夹。删除后一切正常。

# ubuntu-12.04 - 在不同的时间运行不同的 cron 作业

> ID：16063106
> 
> 赞同：0
> 
> 时间：2013-04-17T14:42:26.300
> 
> 标签：ubuntu-12.04, crontab, cron-task, cronexpression

我有两个 cron 作业，第一个应该每分钟执行一次，第二个应该每两分钟执行一次。

在我的 crontab 文件中

```
*/1 * * * * /home/fileserver/Desktop/Test/DBBackgrounder.exe;
*/2 * * * * echo "Date Successfully Updated: $(date)" >> /var/log/DBBackgrounder.log 
```

我试过这个，但两个工作每分钟都运行一次。

# c++ - 如何为 std::list 重载 std::remove？

> ID：16063107
> 
> 赞同：2
> 
> 时间：2013-04-17T14:42:27.240
> 
> 标签：c++, templates, stl

我曾经了解到，从容器中擦除元素的一般方法是通过 erase-remove-idiom。但我惊讶地发现，至少 g++ 的 STL 实现不会为 std::list 重载 std::remove()，因为在这种情况下，可以通过指针操作进行重新排序来保存很多对象分配。

C++ 标准不要求进行这种优化是否有原因？但我的主要问题是如何重载 std::remove() （它不必可移植到 g++ 之外），所以我可以提供一个使用 list::splice()/list::merge() 的实现。我尝试了几个签名，但充其量是一个模棱两可的错误，例如：

```
template <typename T>
typename std::list<T>::iterator
remove(typename std::list<T>::iterator first,
       typename std::list<T>::iterator last, const T &v); 
```

PS：对不起，我不够清楚。请忽略这些函数来自 std 命名空间以及它们的具体作用。我只是想了解更多关于 C++ 中的模板/类型特征/重载规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:52:20.377

它不是强制性的，因为它不仅仅是一种优化，它的语义与您对 Sequence 容器的期望不同：

```
std::list<int> l;
l.push_back(1);
l.push_back(2);

std::list<int>::iterator one = l.begin();
std::list<int>::iterator two = l.end(); --two;

if (something) {
    l.erase(remove(l.begin(), l.end(), 1), l.end());
    // one is still valid and *one == 2, two has been invalidated
} else {
    l.remove(1);
    // two is still valid and *two == 2, one has been invalidated
} 
```

关于实际问题：ISWYM，我暂时不知道如何编写一对函数模板，以便一个匹配任意迭代器，另一个匹配列表迭代器，没有歧义。

请注意，标准中实际上没有任何保证`list<T>::iterator`与`some_other_container<T>::iterator`. 因此，尽管在实践中您希望每个容器都有自己的迭代器，但原则上该方法存在缺陷，除了您建议将重载放入`std`. 您不能单独使用迭代器对其相应的容器进行“结构性”更改。

您可以毫不含糊地做到这一点：

```
template <typename Container>
void erase_all(Container &, const typename Container::value_type &);

template <typename T>
void erase_all(std::list<T> &, const T &); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:46:36.087

[`list::remove`](http://en.cppreference.com/w/cpp/container/list/remove)或者[`list::erase`](http://en.cppreference.com/w/cpp/container/list/erase)单独做你所看到的擦除/删除向量的习语。

`remove`对于值或谓词。 `erase`对于单个迭代器或范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:50:12.327

您收到的建议很好，但并不普遍。例如，这对 有好处`std::vector`，但对于`std::list`因为`std::list::erase()`并且`std::list::remove()`已经做了正确的事情而完全没有必要。它们会执行您要求的所有指针魔术，`std::vector::erase()`但由于其内部存储不同，因此无法执行某些操作。这就是为什么`std::remove()`不专门用于`std::list`: 的原因，因为在这种情况下不需要使用它。

# c# - 从另一台 PC 使用 WCF Windows 服务

> ID：16063114
> 
> 赞同：1
> 
> 时间：2013-04-17T14:43:02.343
> 
> 标签：c#, wcf, windows-services

我创建了一个 WCF 服务并将其托管在 Windows 服务中。使用 Visual Studio 测试此服务效果很好，我可以使用它。现在我已经在一台 PC（称为 PC1）上安装了该服务，并使用另一台 PC（称为 PC2）我希望能够发现它并使用它。我想我将不得不修改 app.config 文件来实现这一点。

这是我当前的 app.config，我需要修改什么才能让它在其他联网计算机上工作？我猜基地址是一个开始？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

<appSettings>
  <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
  <compilation debug="true" />
</system.web>
<!-- When deploying the service library project, the content of the config file must be added to the host's app.config file. System.Configuration does not support config files for libraries. -->
<system.serviceModel>
  <services>      
  <service name="WcfAVOLibrary.AVOs">
    <endpoint address="" binding="wsDualHttpBinding" contract="WcfAVOLibrary.IAVOs">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8733/Design_Time_Addresses/WcfAVOLibrary/AVOs/" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, 
      set the values below to false before deployment -->
      <serviceMetadata httpGetEnabled="True"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="False" />
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel>
</configuration> 
```

哦，我正在运行.Net 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:44:13.560

首先，在基地址上通过 pc1 更改 localhost，例如

`http://pc1:8733/Design_Time_Addresses/WcfAVOLibrary/AVOs/`

之后，尝试从 pc2 上的浏览​​器打开基地址 url（是的，不要介意它是 win.service - 这是您的服务 url，应该可以访问）。应该没问题，在你开始工作之前你不需要继续。

完成后 - 查看客户端的配置以匹配服务地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:48:03.830

*   （如果没有实现 web 服务，我推荐这个链接 [http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0)）

你应该尝试在这个地方修改 web.config：

```
 <baseAddresses>
    <add baseAddress="http://192.168.1.2/Design_Time_Addresses/WcfAVOLibrary/AVOs/" />
  </baseAddresses> 
```

其中 192.168.1.2 是您当前的 ip，或者 localhost 也可以，它会如下所示：

```
 <baseAddresses>
    <add baseAddress="http://localhost/Design_Time_Addresses/WcfAVOLibrary/AVOs/" />
  </baseAddresses> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T10:06:02.690

面临同样的问题。添加入站规则以在 Windows 防火墙中打开端口 8733。有效！

# ruby-on-rails - 如何使用 Puma 配置 Rails 以使用 SSL？

> ID：16063117
> 
> 赞同：17
> 
> 时间：2013-04-17T14:43:08.337
> 
> 标签：ruby-on-rails, ssl, puma

我只找到了如何[使用 SSL 启动 puma](https://github.com/puma/puma)：

`$ puma -b 'ssl://127.0.0.1:9292?key=path_to_key&cert=path_to_cert'`

但是，没有关于如何在文档中包含中间 CA 证书的描述。有人能指出我正确的方向吗？我正在使用彪马`1.6.3`

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-08-11T10:21:35.790

仅当您使用 nginx 时，将证书和捆绑包结合起来才有效。

没有 nginx，你可以使用`ca`和`verify_mode`选项：

```
rails s puma -b 'ssl://0.0.0.0:9292?key=path_to_key.key&cert=path_to_cert.crt&verify_mode=none&ca=path_to_root_bundle.crt' 
```

来源：[https ://github.com/puma/puma/blob/master/lib/puma/binder.rb](https://github.com/puma/puma/blob/master/lib/puma/binder.rb)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-08T15:37:14.920

派对迟到了，但我有另一个解决方案，你可以查看[我的帖子](https://medium.com/@matayoshi.mariano/how-to-add-ssl-to-your-localhost-with-puma-37a66a649f29)了解更多详细信息。

首先使用[mkcert为您的本地主机创建证书](https://github.com/FiloSottile/mkcert)

```
mkcert localhost 
```

如果您想让另一个域在 HTTPS 上工作，只需将 localhost 替换为您想要的域，例如`mkcert mylocalhost-with-a-cool-domain.com`

在此之后，我在该`local-certs`文件夹下创建了一个文件`config`夹并将证书和密钥粘贴到那里。

现在您应该将这些证书标记为受信任，我正在使用 Mac 计算机，所以不确定如何在 Windows 或 Linux 发行版上处理这个特定部分。看帖子，有截图。在简历中，您需要将创建的证书拖到`mkcert`钥匙串访问中。

然后在你的 puma 配置文件中，创建一个如果你没有它并命名它`puma.rb`，你应该有类似的东西

```
workers Integer(ENV['WEB_CONCURRENCY'] || 2)
threads_count = Integer(ENV['THREAD_COUNT'] || 5)
threads threads_count, threads_count

rackup      DefaultRackup
port        3001
environment ENV['RACK_ENV'] || 'production'

if ENV['RACK_ENV'] == 'development'

  # If you didn't place the cert and key under `local-certs` you should change this
  localhost_key = "#{File.join('config', 'local-certs', 'localhost-key.pem')}" 
  localhost_crt = "#{File.join('config', 'local-certs', 'localhost.pem')}"

  ssl_bind '0.0.0.0', 3000, {
    key: localhost_key,
    cert: localhost_crt,
    verify_mode: 'none'
  }
end 
```

然后运行`bundle exec puma -C puma.rb`或`bundle exec rails s`应该这样做：D

如果有人有问题，请告诉我。希望对以后的读者有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-16T10:12:33.880

而我们也在使用 Nginx+PhusionPassenger 组合。您也不能在 nginx 中指定链证书文件。诀窍是将所有证书捆绑在一个证书中，然后将新证书文件设置为服务器配置中的证书。[您将在nginx 文档](http://nginx.org/en/docs/http/configuring_https_servers.html)中找到更多信息。检查 SLL 证书链部分。

```
cat www.example.com.crt bundle.crt > www.example.com.chained.crt 
```

希望它有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-08T15:49:19.553

`rails s puma -b 'ssl://0.0.0.0:9292?key=certkey.key&cert=cert.crt&verify_mode=peer&ca=root_bundle.crt`

只要确保你设置了`verify_mode=peer`.

* * *

## 回答 #5

> 赞同：-9
> 
> 时间：2013-05-06T09:24:29.097

[使用Phusion Passenger](https://www.phusionpassenger.com/) + Nginx 来支持 SSL可能是一个更好的主意。这个组合具有广泛可用的文档，并且非常容易设置，因为它是目前最受欢迎的应用服务器选择，并被纽约时报、赛门铁克、AirBnB 等公司使用。如果你有 Nginx 和 Phusion Passenger 的话，你可以这样做安装：

```
server {
    listen 443;
    server_name yourapp.local;
    ssl on;
    ssl_certificate ...;
    ssl_key ...;
    root /path-to-your-app/public;
    passenger_enabled on;
} 
```

# c++ - 声明 constexpr initializer_list 对象是否合法？

> ID：16063123
> 
> 赞同：29
> 
> 时间：2013-04-17T14:43:23.713
> 
> 标签：c++, c++11, language-lawyer, initializer-list, constexpr

作为在讨论[这个 SO 问题时出现的一个问题](https://stackoverflow.com/q/16023262/420683)：

声明一个对象是否合法，也许是[N3471](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3471.html)`constexpr std::initializer_list`？例子：

```
constexpr std::initializer_list<int> my_list{}; 
```

* * *

为什么我认为它可能不合法：`initializer_list`必须是文字类型；但是有没有保证它是文字类型？

来自 N3485 的引文。

[dcl.constexpr]/9：

> 对象声明中使用的 constexpr 说明符将对象声明为 const。这样的对象应具有文字类型并应被初始化。

文字类型要求，[basic.types]/10，子项目符号类类型：

> *   具有以下所有属性的类类型（第 9 条）：
>     *   它有一个微不足道的析构函数，
>     *   非静态数据成员（如果有）的大括号或等式初始化器中的每个构造函数调用和完整表达式都是常量表达式（5.19），
>     *   它是一种聚合类型 (8.5.1) 或至少有一个不是复制或移动构造函数的 constexpr 构造函数或构造函数模板，并且
>     *   它的所有非静态数据成员和基类都是非易失性文字类型。

* * *

奖励积分;）回答如果

```
constexpr std::initializer_list<int> my_list = {1,2,3,4,5}; 
```

是合法的（有参考）。虽然我认为以上内容涵盖了这一点 + [dcl.init.list]/5

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T18:25:49.047

**更新：在**[CWG DR 1684](http://open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1684)的决议删除了下面引用的要求后，情况变得更加复杂。更多信息可以在[关于 std-discussion 邮件列表的讨论中](https://groups.google.com/a/isocpp.org/forum/#!topic/std-discussion/aA3BsR4ZuoE/discussion)找到，以及相关问题[Why is not `std::initializer_list` defined as a literal type?](https://stackoverflow.com/q/27496004/420683)

* * *

[decl.constexpr]/8：

> 非构造函数的非静态成员函数的 constexpr 说明符将该成员函数声明为 const (9.3.1)。[...] 该函数所属的类应为文字类型（3.9）。

因此，N3471 保证的变化`std::initializer_list`将是一个字面量类型。

* * *

请注意，`constexpr`单独的 ctor 不需要`std::initializer_list`是文字类型，请参阅 [dcl.constexpr]/4+8。旁注：`constexpr`可以在*常量初始化*[basic.start.init]/2] 期间初始化具有 ctor 的非文字类型的对象（*静态初始化*的一部分，在任何*动态初始化*之前执行）。

# c# - GetRectFromCharacterIndex 返回无穷大值而不是实际的矩形值

> ID：16063129
> 
> 赞同：2
> 
> 时间：2013-04-17T14:44:02.230
> 
> 标签：c#, .net, wpf, layout, adorner

我正在尝试获取一个表示 WPF 中文本框内某些文本位置的矩形。

我遇到的问题是矩形返回的值返回为“无穷大”。

rect.X 真的是我所关心的。

例如，如果我在 textChanged 事件上调用此方法，它会起作用。

在 TextBox.Loaded 事件中调用此方法将返回上述内容。我正在寻找任何关于我可能遗漏的东西的见解。

据我了解，尚未计算布局，但即使附加到 TextBox 的 LayoutUpdated() 事件也不起作用。

一些代码，如果它会显示任何东西：

```
foreach (var word in rslt)
      {
        //find the index of the start of the invalid word
        int idx1 = tbx.Text.ToLower().IndexOf(word.ToLower());
        //find the index of the end of the invalid word
        int idx2 = idx1 + (word.Length);

        if (idx1 == -1)
          continue;

        //get a rect defining the location in coordinates of the invalid word.
        var rec1 = tbx.GetRectFromCharacterIndex(idx1);
        var rec2 = tbx.GetRectFromCharacterIndex(idx2);

        //if the word is not visible or not fully visible, do not show the red line.
        if (tbx.ActualWidth > 0)
        {
          if (rec1.X < 0 || rec2.X > tbx.ActualWidth)
            continue;
        }

        if (rec1.Y < 0)
          continue;

        //actually draw the line under the word
        SquigglyAdorner ado = new SquigglyAdorner(tbx, word, rec1.X, rec2.X, rec2.Bottom);
        adornerLayer.Add(ado);
      }
    }; 
```

# objective-c - 基本的Objective C类返回一个数组

> ID：16063131
> 
> 赞同：3
> 
> 时间：2013-04-17T14:44:04.777
> 
> 标签：objective-c

我是Objective C的新手，正在尝试一些基本概念，但遇到了几堵砖墙

基本上我想做的是编写一个类，当从另一个类发送消息时返回一个数组

返回值的类将类似于 -

返回类.h

```
#import <Foundation/Foundation.h>

@interface ReturnClass : NSObject {

}

-(NSMutableArray *) getLocation ;

@end 
```

返回类.m

```
 #import "ReturnClass.h"

    @implementation ReturnClass

    -(NSMutableArray *) getLocation {
   //do some stuff to populate array
    //return it
        return  latLngArray;
    }
    @end 
```

然后我想将其调用到另一个实现中以获取价值

其他类.m

```
#import "ViewController.h"
#import "ReturnClass.h"

@interface ViewController ()

@end
@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
NSMutableArray *latLngArray = [[getLocation alloc] init];
} 
```

我很欣赏这可能有点错误，但请在我努力学习时保持温和:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:48:49.650

调用看起来像这样：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ReturnClass *retClass = [[ReturnClass alloc] init];
    NSMutableArray *latLngArray = [retClass getLocation];
} 
```

这将为您提供由`getLocation`.

`ReturnClass`这段代码每次需要数组时都会创建一个新实例；这可能是也可能不是你想要的，因为你不能在调用之间保持任何状态。如果您需要保持状态，`ReturnClass`则必须实现*单例*（这里是一个[问题的链接，](https://stackoverflow.com/q/9119042/335858)解释了在 Objective C 中实现单例的一种非常好的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:50:11.430

您应该总体上回顾一下您的面向对象编程的概念。特别是，不要将类与方法混淆。

在您的代码中，您必须先实例化一个`ReturnClass`实例才能调用它的方法`getLocation`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:51:17.430

```
NSMutableArray *latLngArray = [[getLocation alloc] init]; 
```

对于初学者来说，这条线没有达到目标。您正在发送`+alloc`到方法的名称。您应该将该消息发送给班级，如下所示：

```
ReturnClass *myObject = [[ReturnClass alloc] init]; 
```

然后将消息发送到结果对象，如下所示：

```
NSMutableArray *latLngArray = [myObject getLocation]; 
```

# windows - IE浏览器事件delphi

> ID：16063133
> 
> 赞同：1
> 
> 时间：2013-04-17T14:44:10.723
> 
> 标签：windows, delphi

我正在尝试使用 delphi 来捕捉浏览器事件，例如文档完成或导航之前。我发现了一个有趣的 pas 单元，它只能为 win xp 做到这一点。

```
[DCC Warning] IEEvents.pas(285): W1002 Symbol 'DWebBrowserEvents2' is specific to a platform

constructor TIEEvents.Create(AOwner: TComponent);
begin
  // Perform inherited
  inherited Create(AOwner);

  // Set the event sink IID
  FSinkIID := DWebBrowserEvents2;
end; 
```

但是，我想让它在 win7 或 win8 等最高平台上运行。请如果你能帮助解决这个问题，或者你可以提供一个不同的例子来帮助我，那么我会感谢你的。

# android - 从Android中的复选框中删除“框”

> ID：16063135
> 
> 赞同：12
> 
> 时间：2013-04-17T14:44:11.903
> 
> 标签：android, checkbox

我是一名入门级软件开发人员，从这个网站上找到了很多很好的答案，但我似乎找不到如何在 Android 中隐藏复选框的“框”。当用户选择一个选项时，我只想显示复选标记。以下是我最近尝试过的一些事情。

chkSortOrder.setBackgroundResource(android.R.color.transparent); chkSortOrder.setBackgroundResource(android.R.drawable.checkbox_off_background);

这两个仍然显示框。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-12-26T03:42:18.980

将以下属性放在 XML 中的复选框标记中。

```
android:button="@android:color/transparent" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-18T12:17:30.950

现在已经很晚了，但无论如何，如果它对任何人有帮助的话。如果您想以编程方式将自定义背景设置为 RadioButton，那么您可以像这样设置它，

```
checkbox.setButtonDrawable(null);
checkbox.setBackgroundResource(R.drawable.your_custom_drawable); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-19T11:12:15.757

现在是 2020 年！许多事情都发生了变化。但是，如果您像我一样在这方面苦苦挣扎，并且在这里尝试了所有方法（和其他解决方案）却没有运气，那么也试试这个。我从其他解决方案中得到的就是这个（模拟器，API 16）： [![在此处输入图像描述](https://i.stack.imgur.com/8w3Pu.png)](https://i.stack.imgur.com/8w3Pu.png)

奇怪的行为！两个drawable，右边是我的自定义框，左边是默认的。然后我不小心添加了这个：

```
app:buttonCompat="@null" 
```

第二个终于消失了！这是完整的定义：

```
 <CheckBox
        android:id="@+id/cb_fs_ExactSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:button="@null"
        android:gravity="center_vertical"
        android:padding="5dp"
        android:text="@string/fs_options_exact"
        android:textColor="@color/textPrimary"
        android:textSize="@dimen/textSmall"
        app:buttonCompat="@null"
        app:drawableRightCompat="@drawable/drw_checkbox" /> 
```

您需要将两者都设置`button`为`buttonCompat`空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-26T08:57:09.237

您还可以在 a`CheckBox`和 a之间切换`TextView`。只需使一个视图可见，另一个视图隐藏。这也很有意义，因为`CheckBox`复选标记周围包含填充。

```
 <FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            >

            <CheckBox
                android:id="@+id/checkbox"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:checkMark="@null"
                android:checked="true"
                android:gravity="center_vertical"
                android:paddingStart="3dp"
                android:paddingLeft="3dp"
                android:text="My text"
                android:textColor="@color/black"
                android:textSize="12sp"
                />

            <TextView
                android:id="@+id/label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="My text"
                android:textColor="@color/black"
                android:textSize="12sp"
                />

        </FrameLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-18T10:22:34.287

我从 androidx.appcompat:appcompat:1.0.0 更新到 1.1.0 时发现了这个错误。

其他答案对我来说都没有用，因为将按钮属性设置为 @null 或 @android:color/transparent 在 Android API 级别 20 或更低版本上不起作用。

我所做的是将我的 CheckBox 更改为 ToggleButton 并将 textOn 和 textOff 属性设置为空字符串

```
<ToggleButton
    ...
    android:background="@drawable/custom_selector"
    android:textOff=""
    android:textOn="" /> 
```

这样我可以更新到 androidx appCompat 1.1.0

# c# - 在 C# .NET 3.5 中播放 H264

> ID：16063140
> 
> 赞同：0
> 
> 时间：2013-04-17T14:44:29.840
> 
> 标签：c#, .net, video, .net-3.5, h.264

我正在开发一个用 C#.NET 3.5 编写的现有应用程序。

我正在寻找一个免费的（如果可能的话是开源的）库，它允许播放 h264 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:48:21.400

如果您在应用程序中安装了适当的 h264 过滤器，则可以使用 DirectShow 和众多媒体播放器控件之一。

另一种选择是使用内置解码的库，如 VLC Dot Net [http://vlcdotnet.codeplex.com/](http://vlcdotnet.codeplex.com/)

# php - PHP中如何同步多个进程来模拟wait()/notifyAll()

> ID：16063141
> 
> 赞同：1
> 
> 时间：2013-04-17T14:44:31.840
> 
> 标签：php, multithreading, process

我正在尝试在 PHP 中测试竞争条件。我想让 N 个 PHP 进程准备好做某事，然后阻塞。当我说“开始”时，他们应该同时执行动作。希望这将证明比赛。

在 Java 中，我会使用 Object.wait() 和 Object.notifyAll()。我可以在 PHP 中使用什么？

（可以接受 Windows 或 linux 原生答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:25:11.063

*   创建文件“ `wait.txt`”
*   启动N个进程，每个进程代码如下
*   删除“ `wait.txt`”文件。

...

```
<?php
while (file_exists('wait.txt')) {}
runRaceTest(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:05:45.177

通常与 PHP 文件锁定的方法一起使用。一个人创建一个`RUN_LOCK`或类似的文件并要求`file_exists("RUN_LOCK")`. 该系统还用于保护递归线程中潜在的无限循环。

我决定**要求**执行该文件。其他方法可能是，文件的存在调用阻塞算法。这取决于你的情况。总是更安全的情况应该更容易实现。

等待代码：

```
/*prepare the program*/
   /* ... */
/*Block until its time to go*/
define("LOCK_FILE", "RUN_UNLOCK");    //I'd define this in some config.php
while(!file_exists(LOCK_FILE)) {
    usleep(1); //No sleep will eat lots of CPU
}
/*Execute the main code*/
   /* ... */
/*Delete the "run" file, so that no further executions should be allowed*/
usleep(1);  //Just for sure - we want other processes to start execution phase too
if(file_exists(LOCK_FILE))
    unlink(LOCK_FILE); 
```

我想有一个阻塞功能会很好，比如这个：

```
function wait_for_file($filename, $timeout = -1) {
    if($timeout>=0) {
        $start = microtime(true)*1000;    //Remember the start time
    }    
    while(!file_exists($filename)) {      //Check the file existence
        if($timeout>=0) {                 //Only calculate when timeout is set
           if((microtime(true)*1000-$start)>$timeout) //Compare current time with start time (current always will be > than start)
             return false;          //Return failure
        }   
        usleep(1);         //Save some CPU
    }
    return true;           //Return success
} 
```

它实现了超时。你不需要它们，但也许其他人会。
用法：

```
header("Content-Type: text/plain; charset=utf-8"); 
ob_implicit_flush(true);while (@ob_end_clean());   //Flush buffers so the output will be live stream
define("LOCK_FILE","RUN_FOREST_RUN");  //Define lock file name again
echo "Starting the blocking algorithm. Waiting for file: ".LOCK_FILE."\n"; 
if(wait_for_file(LOCK_FILE, 10000)) {  //Wait for 10 secconds
    echo "File found and deleted!\n";
    if(file_exists(LOCK_FILE))   //May have been deleted by other proceses
        unlink(LOCK_FILE);
}
else {
    echo "Wait failed!\n";
} 
```

这将输出：

```
Starting the blocking algorithm. Waiting for file: RUN_FOREST_RUN
Wait failed!

~or~

Starting the blocking algorithm. Waiting for file: RUN_FOREST_RUN
File found and deleted! 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T14:47:40.600

PHP没有多线程。它也没有计划实施。您可以尝试使用套接字或[0MQ](http://www.zeromq.org/)来在多个进程之间进行通信

请参阅[为什么 PHP 不支持多线程？](https://stackoverflow.com/questions/12148193/why-does-php-not-support-multithreading) [php多线程](https://stackoverflow.com/questions/1532065/php-multithread)

# ruby - Rubygem 如何需要所有宝石？

> ID：16063144
> 
> 赞同：0
> 
> 时间：2013-04-17T14:44:39.873
> 
> 标签：ruby, rubygems

我对 Rubygem 产生了兴趣，并开始探索它是如何工作的，发现在 1.9 之后，Rubygem`require`变成了 THE `require`.

使用以下代码：

```
require 'debugger'
debugger
require 'thor' 
```

我开始`n`and `l`and `s`，但被困在：

```
 # specification.rb:263
  def self._all # :nodoc:
    unless defined?(@@all) && @@all then
      specs = {}

      self.dirs.each { |dir|
        Dir[File.join(dir, "*.gemspec")].each { |path|
          spec = Gem::Specification.load path.untaint
          # #load returns nil if the spec is bad, so we just ignore
          # it at this stage
          specs[spec.full_name] ||= spec if spec
        }
      }

      @@all = specs.values

      _resort!
    end
    @@all
  end 
```

看来在踏入上面的方法之前，`@@all`已经做好了准备。然后我到处设置断点`@@all =`，但没有一个断点到达。

我错过了什么？？？

* * *

**编辑：**

再看看我的问题。看到了`require 'debugger'`吗？我觉得自己像个傻瓜。

现在的问题是**“我该如何调试`require`”**？

* * *

**关闭：**

请看这个很好的答案：[https ://stackoverflow.com/a/16069229/342366](https://stackoverflow.com/a/16069229/342366)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:02:53.940

再次感谢这个问候答案：[https](https://stackoverflow.com/a/16069229/342366) ://stackoverflow.com/a/16069229/342366 ，我自己做了一些调试。

对于这个问题的一些谷歌（并且懒得调试），我决定将答案发布到“Rubygem 如何需要所有宝石？”

有以下关键步骤：

1.  在“Ruby193\lib\ruby\gems\1.9.1\specifications”中加载所有“.gemspec”

    ```
    Dir[File.join(dir, "*.gemspec")].each { |path|
      spec = Gem::Specification.load path.untaint
      # #load returns nil if the spec is bad, so we just ignore
      # it at this stage
      specs[spec.full_name] ||= spec if spec
    } 
    ```

2.  按版本 desc 对 gem 进行排序

    ```
    @@all.sort! { |a, b|
      names = a.name <=> b.name
      next names if names.nonzero?
      b.version <=> a.version
    } 
    ```

3.  得到第一个宝石（更高版本）

    ```
    self.find { |spec|
      spec.contains_requirable_file? path
    } 
    ```

4.  激活 gem 和所有依赖项~ 大家都很开心。

# php - move_uploaded_file 到文件夹不起作用

> ID：16063148
> 
> 赞同：0
> 
> 时间：2013-04-17T14:44:54.857
> 
> 标签：php, mysql

我正在尝试创建图像上传器，但无法将图像保存在文件夹中。该文件夹是否应该位于名为 images 的目录的根目录中？如果是这样，当我使用 move_uploaded_file 代码时，为什么不将图像保存到该文件夹​​？

谢谢你。

```
//connect to db include('includes/connection.php');

if(isset($_FILES['files'])){

$errors= array();
foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
    $file_name = $key.$_FILES['files']['name'][$key];
    $file_size =$_FILES['files']['size'][$key];
    $file_tmp =$_FILES['files']['tmp_name'][$key];
    $file_type=$_FILES['files']['type'][$key];  
    if($file_size > 2097152){
        $errors[]='File size must be less than 2 MB';
    }       
    $query="INSERT into store (`id`,`name`,`size`,`type`) VALUES('$user_id','$file_name','$file_size','$file_type'); ";
    $desired_dir="images/";
    if(empty($errors)==true){
        if(is_dir($desired_dir)==false){
            mkdir($desired_dir, 0700);      // Create directory if it does not exist
        }
        if(is_dir($desired_dir.$file_name)==false){
            move_uploaded_file($file_tmp, "$desired_dir/$file_name");
        }else{                                  // rename the file if another one exist
            $new_dir=$desired_dir.$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
     mysql_query($query);           
    }else{
            print_r($errors);
    }
}
if(empty($error)){
    echo "Success";
}
}

echo '<img src="images/' . $row['id'] . '</img>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:47:55.013

把文件夹的chmod放在775上

**解释 chmod**

Chmod 授予对您的文件夹或文件的访问权限。

**字符在哪里？**

> ```
> The first charater stands for user
> The second character stands for group
> The thirth character stands for world 
> ```

**权利**

> ```
> 0 No Permissions 
> 1 Execute Only 
> 2 Write Only 
> 3 Write & Execute Permissions
> 4 Read Only
> 5 Read & Execute Permissions
> 6 Read & Write Permissions
> 7 Read, Write & Execute Permissions 
> ```

**如何更改chmod**

*通过filezilla*

1.  连接到您的 ftp
2.  搜索您的文件夹
3.  右键单击并选择文件权限
4.  在 775 上设置数值

*通过直接管理员*

1.  转到文件管理器
2.  搜索您的文件夹
3.  填写“设置权限”值为775
4.  按下按钮。

*通过linux内核*

1.  启动内核
2.  运行 chmod 7 7 5 myfolder/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:52:12.680

右键单击文件夹和属性并确保权限设置为读写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T17:23:53.773

也许你可以像这样纠正它：

```
 $desired_dir="images";
    if(empty($errors)==true){
        if(is_dir($desired_dir)==false){
            mkdir("$desired_dir", 0700);        // Create directory if it does not exist
        }
        if(is_dir("$desired_dir/".$file_name)==false){
            move_uploaded_file($file_tmp,"images/".$file_name);
        }else{                                  //rename the file if another one exist
            $new_dir="images/".$file_name.time();
             rename($file_tmp,$new_dir) ;               
        }
    mysqli_query($conny, $sql);         
    }else{
            print_r($errors);
    }
} 
```

# html - 表格内的对齐问题

> ID：16063149
> 
> 赞同：2
> 
> 时间：2013-04-17T14:44:59.013
> 
> 标签：html, html-table

我有两个 div，我将它们放在一个表格中以便水平对齐。

```
<table>
   <tr>
      <td>
        <div>
           data
         </div>
         <div>
            data
         </div>
      </td>
   </tr>
</table> 
```

如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/2sgk3.png)

我现在想将这两个对齐在中心，而不是左边。我试过了`<td style="margin-left:auto; margin-right:auto;">` ，但没有快乐。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:49:51.530

应用`margins`到`<table/>`：

```
table {
    margin: 0 auto;
} 
```

这是一个[演示小提琴](http://jsfiddle.net/PJBUe/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:07:12.600

创建了一个小提琴[示例](http://jsfiddle.net/chauhangs/GS6dD/2/)

对 td 和 div 使用 align="center" 使用 display: inline-block;

```
<table style="border: 1px solid green; width: 100%; ">
<tbody><tr>
  <td align="center">
    <div style="border: 1px solid red;width: 30px;display: inline-block;">
       data
     </div>
     <div style="border: 1px solid red;width: 30px;display: inline-block;">
         data
     </div>
  </td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:24:18.100

```
<div id="containerdiv">
  <div id="coveringdiv">
    <div id="firstdiv">
      <div id="yourdata">
        Your Data Here
      </div>
      <div id="yourvalue">
        Value
      </div>
    </div>
    <div id="seconddiv">
      <div id="yourdata">
        Your Data Second
      </div>
      <div id="yourvalue">
       values2
      </div>
    </div>
  </div>

</div> 
```

> **和 CSS：**

```
body
{
background-color: #123456;
}

#coveringdiv
{
border: solid 1px #FFFFFF;
height: 200px;
margin: 0 auto;
width: 100%;
text-align: center;
}

#firstdiv
{
display: inline-block;
}

#yourdata
{
color: #FFFFFF;
font-size: 10px;
}

#yourvalue
{
color: #FFFFFF;
font-size: 24px;
}

#seconddiv
{
display: inline-block;
} 
```

# ruby-on-rails - 回形针和近十几个不同的文件？

> ID：16063150
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:03.933
> 
> 标签：ruby-on-rails, paperclip

我有一个`Apps`模型，每个 App 最多有 10 个与之关联的单独文件。

*   1 - 大图标
*   1 - 小图标
*   4 - iPhone 截图
*   4 - iPad截图

有没有比为每个图像添加所需的 4 列（意味着向我的`Apps`模型中添加 40 个新列）更好的方法来设置相关的回形针列？

澄清一下，并不是每个应用程序只有 10 张随机图像。每个应用程序有 4 种不同*类型*的图像，总共最多可以有 10 张图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:09:22.337

创建一个名为 AppImages 的模型，它属于 App。

示例应用图像：

*   ID
*   大小：字符串（大 | 小 | iphone | ipad）
*   属于_to：app_id
*   image_"回形针列"

此方法还允许您轻松扩展属于您的应用程序的照片的“类型”，而无需进行任何迁移。

# sql - 复合主键的外键

> ID：16063151
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:07.027
> 
> 标签：sql, oracle, foreign-keys, composite-primary-key

我的外键有问题。

**主表是：**

```
Course (courseName, courseId) 
```

和 PK 是`courseId`

**第二张表是：**

```
Section (sectionId, courseId) 
```

PK 是`(sectionId, courseID)`, FK 是`courseID reference Course(courseId)`

问题表是：

```
GradeReport (studentId, sectionId, courseId, grade) 
```

和 PK 是`(studentID, sectionID, courseID)`

FK 是

*   `courseId reference Course(courseID)`
*   `sectionId reference Section(sectionID)`

（**不允许**（courseId，sectionId）参考Section（courseId，sectionID））

第一个FK就OK了！但是第二个给了我一个错误：

> ORA-02270: 此列列表没有匹配的唯一键或主键

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:50:19.133

由于Section的主键是(sectionId, courseID)，所以GradeReport的外键约束必须是(sectionID, courseID)。

事实上，在 GradeReport 引用 Course 时不需要外键约束，因为 courseID 将在这个外键约束中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:54:42.563

我不完全理解这个问题，但如果我有这些表，我的外键将是：

*   部分（我认为你已经可以了）

    ```
    FOREIGN KEY ..name.. REFERENCES Course(CourseID) 
    ```

*   GradeReport（这是我认为你有问题的地方）

    ```
    FOREIGN KEY ..name.. REFERENCES Section(SectionID, CourseID) 
    ```

您不需要单独的外键，`GradeReport.CourseID`因为它已经是 的`SectionID, CourseID`外键的一部分`Section`，并且`Section.CourseID`可以信任，因为`Section`表的外键带有`Course`。

# css - 和 div 之间的奇怪间距与 display:box

> ID：16063155
> 
> 赞同：1
> 
> 时间：2013-04-17T14:45:14.910
> 
> 标签：css, flexbox

这很奇怪，没有边距或填充，但我仍然在第一个 div 和 100% 的高度和宽度之间有一个空间，带有 display:box 属性。

在 Firefox 20 上测试

```
</head> 
<body>
<div id="outer">
<div id="blueDiv">
</div>
</div>
</body> 
</html> 
```

[http://jsfiddle.net/ByWwz/](http://jsfiddle.net/ByWwz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:59:55.547

如果添加`vertical-align: top`到`#outer`，则空间消失

[http://jsfiddle.net/9BvTg/1](http://jsfiddle.net/9BvTg/1)

# java - 它总是返回什么 0

> ID：16063156
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:45:15.563
> 
> 标签：java, hibernate

我想用带有 ID 的 Hibernate 检索数据

这是我的助手类：

```
public class ftHelper {

    Session session = null;

    public ftHelper(){
        this.session = HibernateUtil.getSessionFactory().getCurrentSession();
    }

    public List getFtResult(String beginDate) {
    List<FinancialTransactions> ftList = null;
    try {
        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery ("from FinancialTransactions where Date='"+beginDate+"'");
        ftList = (List<FinancialTransactions>) q.list();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return ftList;
}

    public FinancialTransactions getByID(){

        System.out.print("HERE");

       FinancialTransactions ft = null;

    try {

        org.hibernate.Transaction tx = session.beginTransaction();
        Query q = session.createQuery("from FinancialTransactions where ID=" + 1);
        ft = new FinancialTransactions(1);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return ft;

    } 
```

我在这里使用 getById 函数来检索数据

我有一个控制器类

```
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;

/**
 *
 * @author mert
 */
@ManagedBean
@RequestScoped
public class ftController {

    String beginDate;
    DataModel fts;
    ftHelper ft;
    int num;

    public int getNum() {
        return num;
    }

    /**
     * Creates a new instance of ftController
     */
    public ftController() {

    }

    public DataModel getFts() {

        if (fts == null) {
            fts = new ListDataModel(ft.getFtResult(beginDate));
        }
        return fts;
    }

    public int getID(){

        FinancialTransactions ftObject = ft.getByID();

        return num = ftObject.getAmount();

    }

} 
```

在这个控制器中，我使用 getID 函数来获取对象

在jsf中我确实这样做了：

但它总是打印 0 为什么？

我认为我的课出了点问题，因为

我在控制器中编辑了 getID() 函数，如下所示：

```
 public int getID(){
FinancialTransactions fta = new FinancialTransactions(5, "asdasdsa", 123);

        return num = fta.getAmount();
} 
```

num 也返回 0 为什么为什么为什么？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:50:16.077

您没有在 getByID() 中执行查询

```
public FinancialTransactions getByID(){

    System.out.print("HERE");

   FinancialTransactions ft = null;

try {

    org.hibernate.Transaction tx = session.beginTransaction();
    Query q = session.createQuery("from FinancialTransactions where ID=" + 1);

    // q.getResultList(); MISSING HERE
    ft = new FinancialTransactions(1);
} catch (Exception e) {
    e.printStackTrace();
} 
```

# java - getView中int位置的意义

> ID：16063158
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:19.013
> 
> 标签：java, android

数组适配器的getView函数中位置属性的意义是什么？我遇到了一个例子，其中getView被一次又一次地调用，值为0，而传递给它的列表有多个元素。请帮忙

```
private ArrayAdapter<Connection> buildConnectionAdapter(final ArrayList<Connection> connectionList) {
        ArrayAdapter<Connection> attachmentadapter = new ArrayAdapter<Connection>(this, R.layout.text_view, R.id.dummy, connectionList) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                // TODO Auto-generated method stub
                final String value;
                Connection obj = connectionList.get(position);
                value = obj.getValue();
                TextView tv = new TextView(UserGlobalAppSettings.this);
                SpannableString str = makeLinkSpan(value, new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                    }
                });
                str.setSpan(new URLSpan(""), 0, value.length(), Spannable.SPAN_INCLUSIVE_EXCLUSIVE);
                tv.setText(str);
                tv.setTag(obj);
                return tv;
            }
        };
        return attachmentadapter;

    } 
```

布局是这样的

```
 <ListView
                        android:id="@+id/im_services_list"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent" >
                    </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:02:41.877

position 属性定义了在列表/微调器中单击的项目的位置，如果您的列表显示 0 个项目，即使正确传递了多个项目的列表，我建议检查适配器的 getcount 方法，它是否返回列表的计数通过与否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:58:43.807

得到了答案......根据谷歌哲学，我们不应该在彼此中使用两个可滚动项目！！！！......但是已经写了很多代码和时间，所以这样做了！......

```
public static void setListViewHeightBasedOnChildren(ListView listView) {
    ListAdapter listAdapter = listView.getAdapter();
    if (listAdapter == null) {
        // pre-condition
        return;
    }
    int totalHeight = 0;
    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, listView);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
    }
    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
    listView.setLayoutParams(params);
} 
```

# function - mips 中计算绝对值的函数

> ID：16063159
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:45:22.443
> 
> 标签：function, assembly, mips, absolute-value

你好，我有一个 mips 练习，它必须调用一个函数来计算一个数字的绝对值

我已经写了 2 个代码，但是如果您有任何其他解决方案，请写

```
.data

message:.asciiz "give number: "

.text

main: 
li $v0, 4       
la $a0, message     
syscall         

li $v0, 5       
syscall         

add $t1, $v0, $zero 

 jal absolute

add $v0,$t2,$zero

li $v0, 1

syscall

li $v0, 10
 syscall 

absolute: ori $t2,$t1,0 #copy r1 into r2
    slt $t3,$t1, $zero      #is value < 0 ?

    beq $t3,$zero,gg #if r1 is positive, skip next inst

    sub $t2,$zero, $t0      #r2 = 0 - r1

 jr $ra

gg:

#t2 
```

第二个代码是这个

```
.data

question: .asciiz "give number"

.text
main:
li $v0, 4

la $a0, question

syscall

li $v0, 5

syscall
jal absolute
li $v0, 1

syscall

li $v1, 1

syscall

li $v0, 10

syscall
absolute:

slti $t0,$a0,0

bne $t0,$zero,g1
add $v0,$a0,$zero

jr $ra
g1:

sub $t2,$a0,$a0

sub $v1,$t2,$a0

j absolute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:23:05.713

尝试这个：

```
.data
    message:    .asciiz "Enter the number: "
.text
.globl main

main:
    # print message
    li  $v0, 4
    la  $a0, message
    syscall

    # read integer
    li  $v0, 5
    syscall

    slt  $t0, $v0, $0       # $t0 = ( $v0 < 0 ? 1 : 0 )
    bne  $t0, $0, NEGATIVE  # if($t0 != 0) goto NEGATIVE
    j    POSITIVE           # goto POSITIVE (and dose nothing)

NEGATIVE:
    # ~$v0 + 1
    nor  $v0, $v0, $0       # NOR with zero = NOT
    addi $v0, $v0, 1        # $v0 =+ 1

POSITIVE:
    # print $v0
    move $a0, $v0
    li  $v0, 1
    syscall

    # print new line '\n'
    li  $v0, 11
    addi $a0, $0, 10
    syscall

    jr  $ra 
```

测试：

```
Enter the number: 10
10
Enter the number: -5
5 
```

# vb.net - 在页面回调上加载 iFrame

> ID：16063160
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:22.907
> 
> 标签：vb.net, iframe, callback, aspxgridview

我正在寻找一种在 ASPxGridView 中由 GridViewCommandColumnCustomButton 触发回调时将 PDF 文件加载到 iFrame 的方法。原因是我需要加载不同的 PDF，具体取决于单击 ASPxGridView 上的哪一行。

以下是我目前（未成功）处理回调的方式：

```
Protected Sub grid_CustomButtonCallback(ByVal sender As Object, ByVal e As DevExpress.Web.ASPxGridView.ASPxGridViewCustomButtonCallbackEventArgs)
    If e.ButtonID = "bnPreview" Then
        Dim grid As ASPxGridView = CType(sender, ASPxGridView)
        Dim key As Object = grid.GetRowValues(e.VisibleIndex, grid.KeyFieldName)
        Dim sFile = UploadReportHelper.GetReport(key)
        If sFile <> "" Then
            frame_preview.Attributes("src") = sFile
        End If 
    End If
End Sub 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:15:44.597

您的页面必须有其他事情正在阻止它更新 iframe。如果你将它隔离到另一个项目中，它就可以工作。我刚刚创建了一个新项目并对其进行了测试。下面的作品。

**HTML：**

```
<iframe id="myFrame" runat="server"
        src="http://dell.com" width="100%" height="600">

    Your browser doesn't support iframes

</iframe>

<asp:Button ID="myButton" runat="server" 
            Text="Change IFRAME Source" /> 
```

**代码隐藏：**

```
Protected Sub myButton_Click(sender As Object, 
                             e As System.EventArgs) Handles myButton.Click

    myFrame.Attributes("src") = "http://microsoft.com"

End Sub 
```

* * *

# 根据说明 OP 正在使用 UpdatePanel 的评论进行编辑

在这种情况下，您只需`UpdateMode`在您的`UpdatePanel`to上设置`Conditional`，然后在您的 CodeBehind 中，调用下面类似的`.Update()`方法`UpdatePanel`。

**HTML：**

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />

<p>
    <strong>Today's Date:</strong> <%=Now.ToString()%>
</p>

<asp:UpdatePanel ID="myUpdatePanel" runat="server" UpdateMode="Conditional">
    <ContentTemplate>

        <iframe id="myFrame" runat="server" 
                src="http://dell.com" width="100%" height="600">

            Your browser doesn't support iframes

        </iframe>

        <p>
            <asp:Button ID="myButton" runat="server" 
                        Text="Change IFRAME Source" />
        </p>

    </ContentTemplate>
</asp:UpdatePanel> 
```

**代码隐藏：**

```
Protected Sub myButton_Click(sender As Object,
                             e As System.EventArgs) Handles myButton.Click

    myFrame.Attributes("src") = "http://microsoft.com"
    myUpdatePanel.Update()

End Sub 
```

# css - 一个元素可能“逃脱”具有固定尺寸和溢出的 div 的约束边界：隐藏？

> ID：16063162
> 
> 赞同：1
> 
> 时间：2013-04-17T14:45:40.020
> 
> 标签：css, overflow

CSS专家的一个 - div是否有可能“逃脱”具有固定尺寸的div边界的约束和`overflow:hidden`？

我在这里重新创建了示例：http: [//jsfiddle.net/Wt3q4/1/](http://jsfiddle.net/Wt3q4/1/)

我尝试在所有元素上设置 z-indexes，并`b` `position:absolute`毫无乐趣地为 div 分配类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:57:28.337

由于`.b`嵌套了一个元素 that's `position:relative;`，设置`.b`为 absolute 不会做任何事情。据我所知，使用您定义的元素结构，不会有 CSS 解决方法。

如果不了解更多关于您的布局以及您要完成的工作，很难提出建议。如果有意义，您可以尝试设置一个“双容器”，并`overflow:hidden;`在您想要显示它时使用 jQuery 函数将元素移出元素。

[http://jsfiddle.net/Wt3q4/3/](http://jsfiddle.net/Wt3q4/3/)

**HTML**

```
<div class="a">

    <div class="b">
        <div class="c">
        </div>
    </div>    

</div>

<div id="show" class="button">Show!</div>
<div id="hide" class="button">Hide!</div> 
```

**CSS**

```
.a{
    position:relative;
    height:200px;
    width:200px;
    border:3px solid #f00;
    background:#ccc;
}

.b{
    position:relative;
    height:200px;
    width:200px;
    background:#ccc;
    overflow: hidden;
}
.c{
    width:50px;
    height:300px;
    border:3px solid #00f;
    background:#dad;
    margin:30px;
    position:absolute;
    z-index:333;
}
.hidden{
    display: none;
}
.button {
    width: 50px;
    padding: 5px;
    text-align: center;
    border: 3px solid #aaa;
    background: #ddd;
    margin: 20px;
    float: right;
} 
```

**jQuery**

```
$('#show').on('click', function(){
    $('.c').prependTo('.a');
    $('.b').addClass('hidden');
});

$('#hide').on('click', function(){
    $('.c').prependTo('.b');
    $('.b').removeClass('hidden');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:06:51.640

根据我对 CSS 块格式上下文的理解，您`div.b`是 的子级`div.a`，这意味着`div.a`为`div.b`. 在父元素上设置`overflow: hidden`后，任何流出父内容框的子内容都将不可见。

如果您在父容器上进行设置，则这一点会更加明显，`outline: 1px solid black`这样您就可以看到内容框的扩展，无论是`overflow`隐藏的还是可见的。

您的问题确实涉及 CSS 视觉格式模型的基本要素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T15:49:27.777

怎么样：

```
.menu > li > ul {
    position: absolute; /* you still need this here */
    background-color: #9F26B4;
    width: 10000000000000000px;
    margin-left: -100000px;
    padding-left: 100000px;
    list-style: none;
    z-index: 1000;
    top: 0;
    left: 0;
} 
```

例如，这会从左到右溢出整个页面（假设 body overflow-x 设置为隐藏），然后将元素宽度设置为巨大宽度，将其边缘设置为负左以填充任何左侧内容，并填充到left 将元素内的对象移动到所需的 X 位置。你认为呢？

# wordpress - Mod重写多个重写条件

> ID：16063165
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:47.060
> 
> 标签：wordpress, .htaccess, mod-rewrite, user-agent

我正在尝试以下代码以仅在 url 包含某些 wordpress 页面并且用户代理为空白或匹配（curl/perl/php 等）时匹配。但是，即使 REQUEST_URI 不匹配，它也会这样做。语句的流程是错误的吗？

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} ^-?$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} (havij|libwwwperl|wget|python|nikto|curl|scan|java|winhttp|clshttp|loader) [NC]
RewriteCond %{REQUEST_URI} !^/(wp-login.php|wp-admin/|wp-content/plugins/|wp-includes/).* [NC]
RewriteRule .* - [F,NS,L] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:16:09.457

`!`你的正则表达式前面有一个`%{REQUEST_URI}`。这意味着：

1.  如果用户代理是`-`
2.  **或者**如果用户代理是 havij、wget 等
3.  **如果请求**不是wp-login.php** **、** wp-admin 等。**

 **您需要删除否定匹配：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} ^-?$ [NC,OR]
RewriteCond %{HTTP_USER_AGENT} (havij|libwwwperl|wget|python|nikto|curl|scan|java|winhttp|clshttp|loader) [NC]
RewriteCond %{REQUEST_URI} ^/(wp-login.php|wp-admin/|wp-content/plugins/|wp-includes/).* [NC]
RewriteRule .* - [F,NS,L] 
```**

# php - 如何将 facebook 响应对象传递给 php 对象？

> ID：16063168
> 
> 赞同：0
> 
> 时间：2013-04-17T14:45:52.810
> 
> 标签：php, javascript, facebook-apps

当用户成功登录facebook时，javascript中有一个响应对象。如何使用 post 或其他方法将此对象传递给 PHP？

```
window.fbAsyncInit = function() {
            FB.init({
                appId: '12345788', // App ID
                channelUrl: /channel.html', // Channel File
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });

            // Additional init code here
            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    // connected
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;

                } else if (response.status === 'not_authorized') {
                    // not_authorized

                } else {
                    // not_logged_in

                }

            }); 
```

# c# - 字符串未被识别为有效的日期时间

> ID：16063173
> 
> 赞同：-2
> 
> 时间：2013-04-17T14:46:00.103
> 
> 标签：c#

以下代码引发错误“字符串未被识别为有效日期时间”。

```
string text = "5/17/2013 8:08:48 PM";
string timeFormat = "dd-MM-yyyy HH:mm:ss";
DateTime.ParseExact(text, timeFormat, null); 
```

如何将该文本字段转换为日期时间？

我将日期时间字符串分配给一个变量只是为了澄清。在我的场景中，日期字符串来自 datetimepicker 控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:51:44.600

```
string text = "5/17/2013 8:08:48 PM";

string timeFormat = "M/d/yyyy h:mm:ss tt";

DateTime.ParseExact(text, timeFormat, CultureInfo.InvariantCulture); 
```

注意：传递`null`to`ParseExact`将使解析器采用当前的文化，这在不同的环境中可能会有所不同。如果您有严格的格式，请通过，`CultureInfo.InvariantCulture`从而使解析器在所有环境中表现相同

single`d`将适用于日期中的零填充天数，`M`以及`h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T14:51:55.367

我认为您需要以下格式字符串：`"M/dd/yyyy h:mm:ss tt"`

```
string text = "5/17/2013 8:08:48 PM";
string timeFormat = "M/dd/yyyy h:mm:ss tt";
DateTime.ParseExact(text, timeFormat, CultureInfo.InvariantCulture); 
```

为我跑。请注意，这`dd`可能`d`取决于您的日子是否为零填充。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T14:55:16.550

来自*[MSDN](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)*；

> **字符串表示的格式必须与指定的格式完全匹配。**

试试这样；

```
string text = "5/17/2013 8:08:48 PM";
string timeFormat = "M/d/yyyy h:mm:ss tt";
DateTime date = DateTime.ParseExact(text, timeFormat, CultureInfo.InvariantCulture);
Console.WriteLine(date); 
```

这是一个[`DEMO`](http://ideone.com/TTUjnS).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T14:50:20.760

试试这个：

```
string timeFormat = "M/d/yyyy h:mm:ss tt";

DateTime.ParseExact(text, timeFormat, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T14:47:05.800

```
string text = "5/17/2013 8:08:48 PM";
string timeFormat = "M/dd/yyyy h:mm:ss tt";
DateTime date = DateTime.ParseExact(text, timeFormat, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T15:04:43.857

为什么要这么难？

```
string text = "5/17/2013 8:08:48 PM";
DateTime dt = DateTime.Parse(text);

//dt = {2013-05-17 20:08:48} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T14:58:23.183

问题是您缺少“PM”（tt）的格式；它应该是：

```
try{
string text = "5/17/2013 8:08:48 PM";

string timeFormat = "M/dd/yyyy HH:mm:ss tt";

DateTime.ParseExact(text,timeFormat,null); 

}   catch (FormatException) { ... } 
```

请注意，使用此方法时应始终处理此异常。

# ajax - 结合 Radgrid、RadajaxPanel、ValidationSummary 和自定义“将错误字段变为红色”问题

> ID：16063175
> 
> 赞同：1
> 
> 时间：2013-04-17T14:46:03.347
> 
> 标签：ajax, telerik, radgrid, validationsummary

这是示例页面的格式：

```
*Validation Summary*

Label : [input]

Label : [input]

###############
# RadGrid     #
###############

###############
# RadGrid     #
###############

Label : [input]

[save button] 
```

第一个版本：

*   当我按下保存按钮时，整个页面会重新加载。验证摘要填充了错误（或不填充），错误的输入显示为红色。
*   当我打开 RadGrid（自定义编辑模板）时，整个页面重新加载并且保存按钮被停用。
*   **问题**：当我们打开一个网格时，整个页面被重新加载，它是呃......不是客户想要的......？

第二版：

*   我们在 radgrids 周围放置了 radAjaxPanel，因此当您打开一个网格时，只有该网格会重新加载。**问题**：保存按钮不再被停用。
*   如果我点击保存按钮，整个页面仍然会重新加载。

第三版：

*   我们向保存按钮添加了一个 radAjaxPanel，并在打开或关闭 RadGrid 时添加*了一行（见脚注）以重新加载此 radAjaxPanel*
*   现在按钮已正确激活/停用。
*   **问题**：当我按下保存按钮时，只有按钮重新加载，如果某些字段有错误，它们不会变成红色。验证摘要仍然有效。

第 4 版：

*   添加*了一行*（脚注）以在按下保存按钮时重新加载整个页面。
*   现在错误的字段变为红色
*   **问题**：这个额外的回发使验证摘要消失。

那么，关于如何让所有这些*选项*协同工作的任何想法？
最简单的方法是说服客户放弃 radAjaxPanel（因为*我觉得我们*无论如何都错误地使用了它们，而且它带来的优势很小）。

整个项目架构有些复杂（我们用 webforms*模拟*.net mvc（！）），我觉得代码只会给问题增加混乱，但如果您认为某些特定部分需要更多细节/代码，请随时询问.

[^(MainRadAjaxPanel.ResponseScripts.Add(string.Format("$find('{0}').ajaxRequest();", MainRadAjaxPanel.ClientID));)]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:27:40.063

我建议使用`RadAjaxManager`控件而不是几个`RadAjaxPanels`. 这`RadAjaxManager`允许在哪些项目由哪些控件触发方面具有更大的灵活性。不幸的是，我无法就上述信息举出具体的例子，但希望这会让你指向正确的方向。你绝对可以做你想做的`RadAjaxManager`事情并让一切正常工作。请注意 AJAX 触发器和更新，即哪些控件触发 AJAX 更新（例如您的保存按钮）以及接收相应更新的内容（您的 ValidationSummary）。

[http://www.telerik.com/help/aspnet-ajax/ajax-ajaxmanager.html](http://www.telerik.com/help/aspnet-ajax/ajax-ajaxmanager.html)

# html - CSS更改悬停其他元素不起作用

> ID：16063187
> 
> 赞同：0
> 
> 时间：2013-04-17T14:46:36.953
> 
> 标签：html, wordpress, css, hover

我试图在 Wordpress Genesis 中同时显示子菜单项和 div。但是当我将鼠标悬停在 div 上时，子菜单就会消失。

我正在使用以下代码，但它不起作用

```
.sbclass:hover + #nav li:nth-child(3):hover ul, 
#nav li:nth-child(3) ul, 
#nav li:nth-child(3).sfHover ul, 
#nav li:nth-child(3) .submenu {
    visibility:visible !important;
    display:block !important;
} 
```

您可以在此处查看第三个导航菜单项菜单

```
http://174.120.233.154/~a348/nextmktg/jle/ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T16:34:33.743

*****原始帖子以海报结束，询问如何使用 mouseenter/mouseleave 解决他的问题，这就是为什么这是对他的 css 问题的 javascript 响应*****

Welp，您使用 jquery，所以最基本的方法如下。还有更漂亮的方法可以做到这一点。

```
$('selector').on('mouseenter', function(){
  $(this).addClass('open');
});
$('selector').on('mouseleave', function(){
  $(this).removeClass('open');
}); 
```

更多在这里：[结合 jquery 函数 - on() hover/mouseenter/mouseleave](https://stackoverflow.com/questions/9812062/combining-jquery-functions-on-hover-mouseenter-mouseleave)
在这里：`http://api.jquery.com/on/`

# python - 在 Python 进程之间共享导入

> ID：16063191
> 
> 赞同：0
> 
> 时间：2013-04-17T14:46:49.573
> 
> 标签：python, numpy, multiprocessing, python-import

我正在使用`multiprocessing`包来生成多个执行函数的进程，比如`func`（使用不同的参数）。`func`导入`numpy`包，我想知道是否每个进程都会导入包。事实上，主线程，或者更确切地说是主进程也可以导入`numpy`，并且可以很容易地在不同的`func`执行进程之间共享。

由于库的多次导入，将会对性能造成重大影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:54:54.023

> 我想知道是否每个进程都会导入包。

假设导入发生在您分叉该过程之后，那么，是的。不过，您可以通过在分叉之前进行导入来避免这种情况。

> 由于库的多次导入，将会对性能造成重大影响。

好吧，如果你在分叉之后进行导入，性能会受到影响，但可能不是“主要”的。操作系统很可能在其缓存中包含所有必要的文件，因此它只会从 RAM 读取，而不是从磁盘读取。

**更新**

才注意到这个...

> 事实上，主线程，或者更确切地说是主进程也导入`numpy`......

如果您`numpy`在分叉之前已经导入，那么子流程中的导入只会创建对现有导入模块的引用。这应该不到一毫秒，所以我不会担心。

# windows-8 - 跨 WP8 和 Win8 识别用户：ANID2 vs SafeCustomerId

> ID：16063193
> 
> 赞同：3
> 
> 时间：2013-04-17T14:46:56.257
> 
> 标签：windows-8, windows-runtime, windows-phone-8, microsoft-account

我们有一个 Web 服务需要在他的设备、wp8 和 win8 上识别用户。

在电话方面`UserExtendedProperties.GetValue("ANID2")`，我们有匿名的 microsoft id。

在 Windows8 上，有`OnlineIdAuthenticator.AuthenticateUserAsync`with`UserIdentity.SafeCustomerId`和其他属性，尽管它们看起来都不像 ANID2。

OnlineIdAuthenticator api 存在于手机上，但会引发 NotImplementedException。

有什么方法可以在win8和wp8上获得一个通用的用户标识符？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:31:56.333

我知道的最好方法（显然也是推荐的方法）是使用 Azure 移动服务（[http://www.windowsazure.com/en-us/home/scenarios/mobile-services/](http://www.windowsazure.com/en-us/home/scenarios/mobile-services/)）。您可以使用免费计划。使用移动服务，您可以使用 MobileServiceClient ( [http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.mobileservices.mobileserviceclient.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.mobileservices.mobileserviceclient.aspx) ) 为每个用户获取唯一 ID（基于 MS 帐户） .

此代码获取用户 ID：

```
MobileServiceClient client = new MobileServiceClient(serviceUri);
MobileServiceUser user = await client.LoginAsync(MobileServiceAuthenticationProvider.MicrosoftAccount);

/* The user ID contains the provider name and the ID seperated by a colon */
var userId = user.UserId.Split(':').Last(); 
```

您可以在此处找到更多信息：http: [//msdn.microsoft.com/en-us/library/jj863454.aspx](http://msdn.microsoft.com/en-us/library/jj863454.aspx) 和此处的 SDK：http: [//www.windowsazure.com/en-us/develop/mobile/开发者工具/](http://www.windowsazure.com/en-us/develop/mobile/developer-tools/)

# string - 如何在不丢失空格的情况下拆分变量中的字符串？

> ID：16063196
> 
> 赞同：2
> 
> 时间：2013-04-17T14:47:10.097
> 
> 标签：string, parsing, batch-file, split, space

我怎样才能拆分字符串

```
"   This  is  a text  with  spaces    " 
```

那是在变量“字符串”中放入文本部分而不丢失空格？

```
set string="#   This  is  a text  with  spaces    #" 
```

应该分成

```
"#   This"
"  is"
"  a"
" text"
"  with"
"  spaces    #" 
```

使用 `For /F "delims= " ...` 不起作用，因为它消除了所有空格。

是否有一个“简单”的解决方案，或者任何人都可以解释如何逐个字符地解析字符串，这样我就可以将空格计数到第一个字符，然后读取所有字符直到下一个空格，并将计数的空格和读取的字符一起写入一个新的/临时变量？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:27:09.253

是的，我也不是很明白`#`。**“空格#”**是什么让它保留尾随空格，而所有其他元素保留前面但不保留前面的空格？

哦，好吧，花在提问上的努力=花在回答上的努力。做你想做的。

```
@if (@a==@b) @end /*

:: batch portion

@echo off
setlocal

call :split "#   This  is  a text  with  spaces    #"
exit /b

:split <string>
cscript /nologo /e:jscript "%~f0" "%~1"
goto :EOF

:: JScript portion */
WSH.Echo(WSH.Arguments(0).match(/\s*\S+/g).join('\n')); 
```

输出：

```
#
   This
  is
  a
 text
  with
  spaces
    # 
```

* * *

### 更新

如果你想要第一个+第二个，倒数第二个+最终元素加入，修改上面脚本的JScript部分如下：

```
:: JScript portion */
var m = WSH.Arguments(0).match(/\s*\S+/g);
m[0] = m.shift() + m[0];
m[m.length - 2] += m.pop();
WSH.Echo(m.join('\n')); 
```

输出：

```
#   This
  is
  a
 text
  with
  spaces    # 
```

如果您希望将每个元素括在引号中，请将最后一行更改如下：

```
 WSH.Echo('"' + m.join('"\n"') + '"'); 
```

输出：

```
"#   This"
"  is"
"  a"
" text"
"  with"
"  spaces    #" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:28:02.493

I don't see a simple solution in batch, though of course if you can consider powershell or javascript you'll be working with a more appropriate toolset for string manipulation.

Sticking with the batch requirement, you can loop through character by character and "collect" your words with something like this:

```
@echo off
setlocal enabledelayedexpansion

set "string=   This  is  a text  with  spaces    "

set idx=0
set "word="
set "char="
set "lastchar= "
:loop
if "!string:~%idx%!" equ "" goto :eof
set char=!string:~%idx%,1!
if "%char%" equ " " (
    if "%lastchar%" neq " " (
        echo [%word%]
        set word=%char%
    ) else (
        set word=%word%%char%
    )
) else (
    set word=%word%%char%
)
set lastchar=%char%
set /a idx=%idx%+1
goto loop 
```

This script uses batch's substring feature `!string:~%idx%,1` to grab a single character from the string, incrementing `idx` with each loop. Then it's just a matter of processing the word (`echo` in this example) when the previous character was not a space and the current one is.

This writes out:

```
[   This]
[  is]
[  a]
[ text]
[  with]
[  spaces] 
```

Note that I'm ignoring the `#` you had in your example because I don't understand where they fit in.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T00:14:26.900

如果我必须完成这个晦涩的任务，我会使用混合 JScript/批处理技术，如[rojo 的回答](https://stackoverflow.com/a/16069645/1012053)。但是，我会使用[我已经编写的 REPL.BAT 实用程序](http://www.dostips.com/forum/viewtopic.php?f=3&t=3855)。假设我的 REPL.BAT 在当前文件夹中，或者在 PATH 中的某个位置，那么以下将起作用：

```
@echo off
setlocal enableDelayedExpansion
set "string=#   This  is  a text  with  spaces    #"

:: Build an "array" of text parts
set cnt=0
for /f delims^=^ eol^= %%A in ('repl "([^ ])(?= )" "$1\n" xs string') do (
  set /a cnt+=1
  set "string!cnt!=%%A"
)

:: Print the array values
for /l %%N in (1 1 %cnt%) do echo string%%N=[!string%%N!] 
```

但如果我想要一个纯批处理解决方案，我会使用下面相当有效的方法：

```
@echo off
setlocal enableDelayedExpansion
set "string=#   This  is  a text  with  spaces    #"

:: Define LF to contain a single line feed character (0x0A)
set LF=^

:: Above 2 blank lines are critical - DO NOT REMOVE

:: Insert a line feed before every space
for %%n in ("!LF!") do set "string=!string: =%%~n !"

:loop  Remove line feeds sandwiched by spaces
for %%n in ("!LF!") do set "string2=!string: %%~n =  !"
if "!string2!" neq "!string!" (
  set "string=!string2!"
  goto :loop
)

:: Build an "array" of text parts: FOR /F splits the string at line feeds
set /a cnt=0
for /f delims^=^ eol^= %%A in ("!string!") do (
  set /a cnt+=1
  set "string!cnt!=%%A"
)

:: Print out the array values
for /l %%N in (1 1 %cnt%) do echo string%%N=[!string%%N!] 
```

上述两种解决方案都提供以下输出：

```
string1=[#]
string2=[   This]
string3=[  is]
string4=[  a]
string5=[ text]
string6=[  with]
string7=[  spaces]
string8=[    #] 
```

请注意，如果字符串包含由于延迟扩展，FOR 循环`%%A`扩展将破坏结果。`!`这个限制可以通过额外的编码来消除。所有其他发布的使用 FOR 循环的解决方案都受到同样的限制。（至少在我写这篇文章时他们做到了）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T16:53:10.903

诀窍是用一个空格替换连续的空格，其余的替换为任意字符。假设您的字符串不包含`#`s 并且不超过 9 个连续空格，您可以试试这个

```
set st=%st:         = ########%
set st=%st:        = #######%
set st=%st:       = ######%
set st=%st:      = #####%
set st=%st:     = ####%
set st=%st:    = ###%
set st=%st:   = ##%
set st=%st:  = #% 
```

然后你可以用空格解析`for /f`并替换你的 s`#`

```
setlocal enabledelayedexpansion
for /f %%a in ("%st%") do (
  set ss= %%a
  echo !ss:#= !
) 
```

请注意，`set`在括号块内需要您启用延迟扩展并使用`!`语法（请参阅`HELP SET`）

但是这种技术只会提取第一个子字符串。概括地说，您需要另一个技巧，即将空格替换为换行符，以便`for /f`将逐行循环

请注意，为了获得换行符，您需要保留`set`命令后的两个空行

```
set nl=^

rem continue two lines down....
for /f %%a in ("%st: =!nl!%") do (
  set ss= %%a
  set ss=!ss:#= !
  echo [!ss!]
) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T17:32:13.563

尝试这个：

```
@echo off &setlocal enabledelayedexpansion
set "string=#   This  is  a text  with  spaces    #"

set string1=%string%
for %%i in (%string%) do (
    set string1=!string1: %%i = "%%i" !
    set /a strings+=1
)
set string1=#"%string1:~1,-1%"#
set string1=%string1:"= "%
for %%i in (%string1%) do (
    set /a count+=1
    set string2=%%i
    set string2=!string2: "=!
    set string2=!string2:"=!
    if !count! equ 2 (
     set $s1=!$s1!!string2!
    )else if !count! equ %strings% (
        set /a count-=1
        call set $s!count!=%%$s!count!%%!string2!
        ) else set $s!count!=!string2!
)
for /f "tokens=1*delims==" %%i in ('set "$s"') do echo "%%j" 
```

输出：

```
"#   This"
"  is"
"  a"
" text"
"  with"
"  spaces    #" 
```

# android - 运行 vuforia-sdk-android-2-0-31.bin 安装 vuforia sdk 时出错

> ID：16063201
> 
> 赞同：1
> 
> 时间：2013-04-17T14:47:25.010
> 
> 标签：android, sdk, vuforia

我开始阅读 android 应用程序的增强现实，我是新手。我需要使用 Linux（ubuntu 11.10）安装 vuforia SDK android-2-0-30，但是当我运行文件 vuforia-sdk-android-2-0-31.bin 时出现此错误：不支持安装程序用户界面模式

“ `The installer cannot run in this UI mode. To specify the interface mode, use the -i command-line option, followed by the UI mode identifier. The valid UI modes identifiers are GUI, Console, and Silent`。”

我尝试使用错误消息中提到的模式 root 和其他 UI 界面，但总是出现相同的错误我真的需要帮助

# iphone - 检查视频是否有音频

> ID：16063209
> 
> 赞同：1
> 
> 时间：2013-04-17T14:47:46.450
> 
> 标签：iphone, ios, mpmovieplayercontroller, avaudioplayer

我必须决定视频文件（从服务器流式传输）是否有音频。如果它有音频，那么我必须停止播放音频文件并开始播放视频，否则播放已经运行音频的视频。我已经设法在播放视频之前暂停音频，但是如何检查视频中的音频？

我正在使用**AVAudioPlayer**播放音频和**MPMoviePlayerViewController**播放视频。

我在谷歌上搜索了很多，但没有成功。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:18:16.593

[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/MPMoviePlayerController)

如果您导航到通知部分，您将看到有一个通知：

> MPMovieMediaTypesAvailableNotification

以下是给定通知的掩码：

```
MPMovieMediaTypeMask  
enum {
   MPMovieMediaTypeMaskNone  = 0,
   MPMovieMediaTypeMaskVideo = 1 << 0,
   MPMovieMediaTypeMaskAudio = 1 << 1
};
typedef NSInteger MPMovieMediaTypeMask; 
```

# maven - 使用单个存储库和单个镜像之间的区别

> ID：16063213
> 
> 赞同：8
> 
> 时间：2013-04-17T14:47:51.440
> 
> 标签：maven

Maven 文档说：

[http://maven.apache.org/guides/mini/guide-mirror-settings.html](http://maven.apache.org/guides/mini/guide-mirror-settings.html)

> 使用单个存储库。您可以强制 Maven 通过镜像所有存储库请求来使用单个存储库。存储库必须包含所有所需的工件，或者能够将请求代理到其他存储库。当使用带有 Maven 存储库管理器的内部公司存储库来代理外部请求时，此设置最有用。
> 
> 为此，请将 mirrorOf 设置为 *。

```
<settings>
  ...
  <mirrors>
    <mirror>
      <id>internal-repository</id>
      <name>Maven Repository Manager running on repo.mycompany.com</name>
      <url>http://repo.mycompany.com/proxy</url>
      <mirrorOf>*</mirrorOf>
    </mirror>
  </mirrors>
  ...
</settings> 
```

我不明白这一段。

不应该是这样的吗？

> 使用单一**镜像**你可以强制 Maven 使用单一 **镜像**，方法是让它镜像所有存储库请求。**镜像必须包含所有****存储库的所有**所需工件，或者能够将请求代理到其他存储库。当使用带有 Maven 存储库管理器的内部公司存储库来代理外部请求时，此设置最有用。为此，请将 mirrorOf 设置为 *。

```
 <settings>
   ...
   <mirrors>
     <mirror>
       <id>internal-mirror</id>
       <name>Maven Mirror Manager running on mirror.mycompany.com</name>
       <url>http://mirror.mycompany.com/proxy</url>
       <mirrorOf>*</mirrorOf>
     </mirror>
   </mirrors>
   ...
 </settings> 
```

我的误解在哪里？

我的意思是，`<mirror><id>internal-repository</id>...`对我来说似乎是错误的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-04T11:31:05.477

镜像是指用作其他存储库的传递者/代理的存储库。当使用 Nexus、Artiafactory、Archiva 等存储库管理器时，您需要处理一个本地企业存储库来代理远程存储库。所以没有必要在你的 pom 或 setting.xml 中声明太多的仓库。仅使用一个将所有请求重定向到您拥有的存储库管理器的镜像就足够了。这就是文档的含义。

# sql - 水晶报告 - 日期时间组标题不显示时间，只显示日期。需要显示日期和时间

> ID：16063214
> 
> 赞同：1
> 
> 时间：2013-04-17T14:47:52.220
> 
> 标签：sql, sql-server, crystal-reports, report

我有一个水晶报表，它有一个引用由 SQL Server 存储过程生成的 DATETIME 列的组。

当我右键单击并设置组格式时，格式编辑器会显示字段输出的示例，如下所示：

> 1999 年 3 月 1 日星期一下午 1:23:45

但是，当我预览报告时，它只显示如下：

> 1999 年 3 月 1 日，星期一

我也需要它按时间显示/排序。再一次，它指向的 DB 列属于 DATETIME 类型。

我正在运行 CR 11.5 和 SQL Server 2008R2。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:13:37.297

如果您希望它明确到第二个，您可能需要重新考虑对日期时间字段进行分组；多个记录共享完全相同的日期时间字段的机会通常非常低，从而否定了分组的用处。

出于这个原因，CR 可能冒昧地假设您只想按日期而不是完整的日期时间值进行分组。您可以通过执行以下步骤进行检查：从 CR 工具栏中选择“报告”→“组专家”→在右侧选择您的组并点击“选项”→在“常用”选项卡的底部会有一个标记为下拉列表“将打印该部分”。验证它是否显示“每秒”而不是“每天”或其他值。

从这里您可以控制希望 CR 为您的日期时间值分组的网络的大小。

# nhibernate - 使用类型名称作为别名时出现 InvalidPathException

> ID：16063225
> 
> 赞同：1
> 
> 时间：2013-04-17T14:48:10.380
> 
> 标签：nhibernate, hql, alias

我对以下 Hql 查询有疑问：

```
FROM PhysikalischesObjekt physikalischesObjekt LEFT OUTER JOIN FETCH physikalischesobjekt.AktuelleInstallation installation 
```

如您所见 - 我正在使用命名为实体的别名（仅在第一个位置使用小写字母）。

如果我对 Nhibernate 执行这个查询，我得到一个 InvalidPathException：

```
NHibernate.Hql.Ast.ANTLR.InvalidPathException : Invalid path: 'physikalischesobjekt.AktuelleInstallation' [FROM PhysikalischesObjekt physikalischesObjekt LEFT OUTER JOIN FETCH physikalischesobjekt.AktuelleInstallation installation ] 
```

堆栈跟踪：

```
>   NHibernate.dll!NHibernate.Hql.Ast.ANTLR.Util.LiteralProcessor.LookupConstant(NHibernate.Hql.Ast.ANTLR.Tree.DotNode node) Zeile 81   C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.Tree.DotNode.Resolve(bool generateJoin, bool implicitJoin, string classAlias, NHibernate.Hql.Ast.ANTLR.Tree.IASTNode parent) Zeile 208  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode.Resolve(bool generateJoin, bool implicitJoin, string classAlias) Zeile 58    C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.CreateFromJoinElement(NHibernate.Hql.Ast.ANTLR.Tree.IASTNode path, NHibernate.Hql.Ast.ANTLR.Tree.IASTNode alias, int joinType, NHibernate.Hql.Ast.ANTLR.Tree.IASTNode fetchNode, NHibernate.Hql.Ast.ANTLR.Tree.IASTNode propertyFetch, NHibernate.Hql.Ast.ANTLR.Tree.IASTNode with) Zeile 681  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.joinElement() Zeile 3955 + 0x3c Bytes  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.fromElement() Zeile 3617 + 0xc Bytes   C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.fromElementList() Zeile 3391 + 0xc Bytes   C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.fromClause() Zeile 3308 + 0xc Bytes    C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.unionedQuery() Zeile 1645 + 0xc Bytes  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.query() Zeile 1510 + 0xc Bytes C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.selectStatement() Zeile 536 + 0xc Bytes    C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlWalker.statement() Zeile 435 + 0xc Bytes  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.HqlSqlTranslator.Translate() Zeile 590 + 0x1b Bytes C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.Analyze(string collectionRole) Zeile 449 + 0x12 Bytes   C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.DoCompile(System.Collections.Generic.IDictionary<string,string> replacements, bool shallow, string collectionRole) Zeile 354 + 0x13 Bytes   C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.Compile(System.Collections.Generic.IDictionary<string,string> replacements, bool shallow) Zeile 72  C#
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(NHibernate.Hql.Ast.ANTLR.Tree.IASTNode ast, string queryIdentifier, string collectionRole, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> filters, NHibernate.Engine.ISessionFactoryImplementor factory) Zeile 43 + 0xa3 Bytes    Unknown
NHibernate.dll!NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(string queryString, string collectionRole, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> filters, NHibernate.Engine.ISessionFactoryImplementor factory) Zeile 21 + 0x3a Bytes    C#
NHibernate.dll!NHibernate.Engine.Query.HQLStringQueryPlan.CreateTranslators(string hql, string collectionRole, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> enabledFilters, NHibernate.Engine.ISessionFactoryImplementor factory) Zeile 24 + 0x99 Bytes  C#
NHibernate.dll!NHibernate.Engine.Query.HQLStringQueryPlan.HQLStringQueryPlan(string hql, string collectionRole, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> enabledFilters, NHibernate.Engine.ISessionFactoryImplementor factory) Zeile 16 + 0x3e Bytes C#
NHibernate.dll!NHibernate.Engine.Query.HQLStringQueryPlan.HQLStringQueryPlan(string hql, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> enabledFilters, NHibernate.Engine.ISessionFactoryImplementor factory) Zeile 14 C#
NHibernate.dll!NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(string queryString, bool shallow, System.Collections.Generic.IDictionary<string,NHibernate.IFilter> enabledFilters) Zeile 61 + 0x5b Bytes C#
NHibernate.dll!NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(string query, bool shallow) Zeile 304 + 0x87 Bytes   C#
NHibernate.dll!NHibernate.Impl.AbstractSessionImpl.CreateQuery(string queryString) Zeile 283 + 0x3b Bytes   C# 
```

在 Hql 中使用这样的别名有问题吗？是否存在不允许使用与实体名称相同的别名的语法？显然，Nhibernate 似乎尝试为不起作用的别名查找持久性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:04:42.017

您使用的别名不一样：“physikalischesObjekt”和“physikalisachesobjekt”。

# perl - Perl While 循环发送 HTTP 请求

> ID：16063228
> 
> 赞同：1
> 
> 时间：2013-04-17T14:48:13.303
> 
> 标签：perl, http, http-post, http-get

我需要帮助编写一个脚本来发送 25 个请求，然后关闭套接字并启动一个新的。

这是我到目前为止所拥有的：

```
while ($count<25) {
    $count++;
    die "Could not create socket: $!\n" unless $sock;
    print $sock "GET / HTTP/1.1\r\n";
    print $sock "Host: $host \r\n";
    print $sock "Cookie: $rand \r\n\r\n";
    print while <$sock>;
    close($sock);
}; 
```

因此，在 25 个请求之后，它会关闭套接字并启动另一个（有点像`goto`命令）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:15:08.860

听起来你有某种（foreach 或 while）循环

```
while (...) {
   ... Uses $socket ...
} 
```

并且您想将相同的 $socket 用于 25 次通行证，然后切换到新的通行证。因此，只需计算传递次数，如果经过的传递次数可被 25 整除，则更新 $socket。

```
my $socket;
my $count = 0;
while (...) {
   if (($count++ % 25) == 0) {
      $socket = ...;
   }

   ... Uses $socket ...
} 
```

# asp.net-membership - 会员商店中未找到的用户用户名不存在

> ID：16063235
> 
> 赞同：0
> 
> 时间：2013-04-17T14:48:33.153
> 
> 标签：asp.net-membership, community-server

在我们的社区服务器站点中，当我导航到 UserList.aspx 页面时，每次都会收到以下错误：`User Not Found, The user you requested cannot be found.`

当我检查事件日志时，我看到 asp.net 警告如下：

```
Event Type: Warning
Event Source:   ASP.NET 2.0.50727.0
Event Category: Web Event 
Event ID:   1309
Date:       4/17/2013
Time:       9:39:43 AM
User:       N/A
Computer:   SV3369
Description:
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 4/17/2013 9:39:43 AM 
Event time (UTC): 4/17/2013 2:39:43 PM 
Event ID: f121eb3cd0a847b2a53972a09f802235 
Event sequence: 11116 
Event occurrence: 1072 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/8022/ROOT-1-130105941980617500 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: C:\Inetpub\wwwroot\wisdomresearch.org\wwwroot\ 
    Machine name: SV3369 

Process information: 
    Process ID: 4148 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: CSException 
    Exception message: User Username not found in membership store does not exist. 

Request information: 
    Request URL: http://wisdomresearch.org/themes/basic/Arete/UserList.aspx?interest=European+History 
    Request path: /themes/basic/Arete/UserList.aspx 
    User host address: 173.199.116.83 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: NT AUTHORITY\NETWORK SERVICE 

Thread information: 
    Thread ID: 8 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at CommunityServer.Users.AddMembershipDataToUser(UserSet users)
   at CommunityServer.Users.GetUsers(UserQuery query, Boolean cacheable)
   at Arete.Common.GetGlobalUsersTable()
   at PageBase.GetUsersTableFromCache()
   at Themes_basic_Arete_userlist.BindUsers()
   at Themes_basic_Arete_userlist.ExecuteSearch()
   at Themes_basic_Arete_userlist.Page_Load()
   at System.Web.Util.CalliHelper.ArglessFunctionCaller(IntPtr fp, Object o)
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

另外，我[看过这篇文章](https://stackoverflow.com/questions/156688/community-server-username-issue-user-username-not-found-in-membership-store-do)，但如果这是我的问题，我不确定我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:58:59.577

首先，我不熟悉社区服务器站点，尽管我广泛使用 ASP.Net Membership。

根据您问题中的 SO 链接，问题是`cs_Users`表中缺少用户（或者可能是其他表）。

**1 - 您需要找到那些孤立的行。**像这样的东西-

```
SELECT * FROM aspnet_Users WHERE UserId NOT IN (SELECT UserId FROM cs_Users) 
```

**2 - 然后你需要删除它们或做一些事情。**

# google-maps - 如何使用 Google Maps Api V3 调整 kml 层中的图标大小？

> ID：16063237
> 
> 赞同：0
> 
> 时间：2013-04-17T14:48:33.860
> 
> 标签：google-maps, google-maps-api-3, kml

我有个问题？有某种方法可以使用 Google Maps Api V3 调整 kml 层中的图标大小？

这是文件.kml

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
   <Style id="icon05_E">
      <IconStyle>
         <Icon>
            <href>'http://190.143.101.58:3000/Images/AppIcons/Vehicles/Norte/icon051_N.png'</href>
         </Icon>
         <hotSpot x="50"  y="50" xunits="pixels" yunits="pixels"/>
      </IconStyle>
   </Style>
   <Placemark>
      <name>ESTE</name>
      <styleUrl>#icon05_E</styleUrl>
      <Point>
         <coordinates>-74.03973,4.7597</coordinates>
      </Point>
   </Placemark>
</Document>
</kml> 
```

谢谢你的帮助 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:00:12.147

[Google Maps API v3 KmlLayer](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)不支持[比例](https://developers.google.com/kml/documentation/kmlelementsinmaps)标签（目前）：

```
 <scale>    no 
```

如果您的 KML 不是很复杂，您可以使用[geoxml3 。](https://code.google.com/p/geoxml3/)

[使用 KML 分支的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=SO_KML_resizeIcon.kml)

[使用 KMZ 分支的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=SO_KML_resizeIcon.kml)

# objective-c - 网站objective-c授权

> ID：16063239
> 
> 赞同：0
> 
> 时间：2013-04-17T14:48:39.387
> 
> 标签：objective-c, https, authorization

如何不使用 iOS 的 UIWebView在站点[https://uslugi.beeline.ru上获得 HTTPS 授权？](https://uslugi.beeline.ru)

他们的 API 我很遗憾没有 = (

请帮忙，对不起我的英语，它是谷歌翻译。

PS 登录的用户名和密码我不能提供，因为重要信息存储在那里。

PPS 也许有办法通过 http UIWebView 填写表单，但是这样它只加载没有图片的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:50:18.007

您需要了解 POST 或 GET 的 API（以及正文数据的参数）。检查文档（配置身份验证点）：[文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WorkingWithHTTPAndHTTPSRequests/WorkingWithHTTPAndHTTPSRequests.html)

# iphone - 测试一个 UITableView，它列出了视频库

> ID：16063241
> 
> 赞同：2
> 
> 时间：2013-04-17T14:48:42.610
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在开发一个 UITableView，它显示设备视频库中的所有视频和电影。有没有办法让我在 iphone/ipad 模拟器中测试结果？

因为模拟器中没有视频库，所以我看不到它是否有效。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:52:36.443

要拍摄照片、视频并从照片库中选择图像，`UIImagePickerController`将对您有所帮助。

[参考： UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

要拍照和录像，`UIImagePickerControllerCameraCaptureMode`必须正确设置。

还`sourceType`需要根据我们的需要进行设置。见`UIImagePickerControllerSourceType`。

并[阅读此官方文档。](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html#//apple_ref/doc/uid/TP40010406)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:45:18.157

要在模拟器上进行测试，您需要在模拟器上播放一些视频。以下链接可以帮助您在模拟器上播放视频：

[在模拟器上插入视频](https://stackoverflow.com/questions/2571656/iphone-how-do-i-add-videos-to-ipad-simulator/3046699#3046699)

# jquery - jQuery UI 不可见的 droppables 仍然接受 draggables

> ID：16063253
> 
> 赞同：3
> 
> 时间：2013-04-17T14:49:36.387
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

这是一个容易重现的问题。检查这个jsFiddle：http: [//jsfiddle.net/MichielCM/XEC9g/](http://jsfiddle.net/MichielCM/XEC9g/)

```
<ul id="list1">
    <li>Item 1</li> 
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
</ul>

<ul id="list2">
    <li>Hover me over the items</li>
</ul>

<div id="status"></div> 
```

List1 存在放置目标。它设置为最大高度并且其溢出被隐藏。List2 只有一个可拖动项目。

```
$("#list1 li").droppable({
    greedy: true,
    tolerance: "pointer",
    over: function(event, ui) {
        $("#status").text(
            "Hovering over: ".concat($(this).text())
        );
    }
});

$("#list2 li").draggable(); 
```

现在，当将 list2 中的项目拖到 droppable 列表 (list1) 上时，每个目标的 'over' 事件都会被激活。甚至对于由于固定高度而未显示的不可见项目也会发生这种情况。这些物品也会触发“drop”事件，因此实际上可以将物品放在不可见的目标上！

有什么优雅的方法可以防止这种情况吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T08:36:57.487

我解决了。以下错误报告中记录了类似的行为。它还包含计算元素的实际位置和高度的解决方法。[http://bugs.jqueryui.com/ticket/8477](http://bugs.jqueryui.com/ticket/8477)

不过，我采用了一种更简单的方法。通过捕获容器元素的 mouseenter 和 mouseleave 事件，我可以确定鼠标实际上是悬停在列表上，因此是可见项目。在列表元素上使用一个作为布尔值的类来完成其余的工作。

```
$("#list1").live({
    "mouseenter": function(event, ui) {
        $(this).addClass("over");
    },
    "mouseleave":  function(event, ui) {
        $(this).removeClass("over");
    }
});

$("#list1 li").droppable({
    greedy: true,
    tolerance: "pointer",
    over: function(event, ui) {
        if ($(this).closest("ul").hasClass("over") {
            $("#status").text(
                "Hovering over: ".concat($(this).text())
            );
        }
    }
});

$("#list2 li").draggable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T01:57:31.047

我有一个类似的问题，并相信我找到了一个更简单的解决方案。可以简单地将函数传递给函数的`accept`属性，该属性`droppable`返回一个布尔值，表示是否应该接受 drop。

> [http://api.jqueryui.com/droppable/#option-accept](http://api.jqueryui.com/droppable/#option-accept)

就我而言，有很多方法可以确定目标是否可以通过单行线看到。

# language-agnostic - 使用 10 节点四面体，相邻四面体之间的应变是否连续？

> ID：16063254
> 
> 赞同：2
> 
> 时间：2013-04-17T14:49:36.463
> 
> 标签：language-agnostic, finite-element-analysis

我正在尝试实现有限元分析算法。我求解`K u = f`得到位移`u`，然后用 计算应变`u`，然后计算应力。最后，我使用应力计算 Von Mises 应力，并将其可视化。从结果中我发现四面体之间的应变不连续。

我使用 10 个节点的四面体作为元素，所以位移在每个元素中都是一个二阶多项式。应该强制位移在四面体之间是连续的。并且作为位移的一阶导数的应变在每个四面体内部应该是连续的。但我不确定：四面体之间的界面是否如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:21:51.927

只有与相邻面相切的应变分量才能保证连续。这源于位移连续性，当您在界面方向上求导时，它们是相同的。

商业 FEM 程序通常会进行一些后期处理平均，以使其他组件看起来是连续的。请注意，仅当基础本构模型是连续的时，垂直于单元边界的应变分量才预计是连续的，因此这种平均并不总是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:11:12.850

您不应该计算节点处的应力和应变，而是计算单元内部的应力和应变。例如，您可以选择 4 个高斯点并计算那里的值。然后，您必须考虑如何将高斯点计算的值放到 tet 节点上的方案。

有一个*Mathematica*应用程序示例说明了这一点。不幸的是，该网页不再可用，但笔记本在[这里](http://portal.uni-freiburg.de/imteksimulation/downloads/ims)。您可以在有限元方法、结构力学 3D（在旧的 HelpBrowser 中）下的应用程序示例部分找到该示例。如果您有困难，我可以将其转换为 PDF 并发送给您。

# java - Math.ceil not rounding the value

> ID：16063256
> 
> 赞同：0
> 
> 时间：2013-04-17T14:49:47.077
> 
> 标签：java

```
double totalInches = d * 0.3937;
double feetPart = totalInches / 12;
int inchesPart = (int) Math.ceil(totalInches - (feetPart * 12));
return (feetPart) + "' " + inchesPart + "''"; 
```

I am getting a value `6.9999999 ' 0"`. I am returning a string, is it the reason why the decimals values in feet is not getting rounded off.

I tried without casting too. `double inchesPart = Math.ceil(totalInches - (feetPart * 12));`, but still i get the same result.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:51:28.587

你肯定需要：

`int feetPart = (int)Math.floor(totalInches / 12);`

要不就：

`int feetPart = (int)(totalInches / 12);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:45:55.383

要获得这两个部分，您可以使用

```
int totalInches = (int) (d * 0.3937);
int feetPart = totalInches / 12;
int feetInchPart = totalInches % 12; 
```

# python - Web scraping with python and sqlite. How to store scraped data effectively?

> ID：16063258
> 
> 赞同：5
> 
> 时间：2013-04-17T14:49:48.263
> 
> 标签：python, sqlite, web-scraping

I want to scrape some specific webpages on a regular basis (e.g. each hour). This I want to do with python. The scraped results should get inserted into an SQLite table. New info will be scraped but also 'old' information will get scraped again, since the python-script will run each hour.

To be more precise, I want to scrape a sports-result page, where more and more match-results get published on the same page as the tournament proceeds. So with each new scraping I just need the new results to be entered in the SQLite-table, since the older ones already got scraped (and inserted into the table) one hour before (or even earlier).

I also don't want to insert the same result twice, when it gets scraped the second time. So there should be some mechanism to check if one result already got scraped. Can this be done on SQL-level? So, that I scrape the whole page, make an `INSERT` statement for each result, but only those `INSERT` statements get executed successfully which were not present in the database before. I'm thinking of something like a `UNIQUE` keyword or so.

Or am I thinking too much about performance and should solve this by doing a `DROP TABLE` each time before I start scraping and then just scrape everything from scratch again? I don't talk about really much data. It's just about 100 records (= matches) for 1 tournament and about 50 tournaments a year.

Basically I would just be interested in some kind of best-practice approach.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T00:49:19.670

您想要做的是 upsert（如果不存在则更新或插入）。在这里查看如何在 sqlite 中执行此操作：[SQLite UPSERT - ON DUPLICATE KEY UPDATE](https://stackoverflow.com/questions/2717590/sqlite-upsert-on-duplicate-key-update)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T14:59:16.613

如果数据不存在，您似乎想插入数据？也许是这样的：

1.  检查条目是否存在
2.  如果没有则插入数据
3.  如果有更新条目？（是否要更新）

您可以发出 2 个单独的 sql 语句 SELECT 然后 INSERT/UPDATE

或者你可以设置唯一的，我相信 sqllite 会提高`IntegrityError`

```
try:
  # your insert here
  pass
except sqlite.IntegrityError:
  # data is duplicate insert
  pass 
```

# powershell - 从 powershell 2.0 连接到本地交换 2007

> ID：16063260
> 
> 赞同：0
> 
> 时间：2013-04-17T14:49:52.497
> 
> 标签：powershell, exchange-server, winrm

我正在尝试从我的 PowerShell 连接到 Exchange 2007（两者都在同一台计算机上）。

我错过了什么？

我的代码：

```
Set-ExecutionPolicy  RemoteSigned  

$cred = Get-Credential
$Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri         
https://localhost/powershell/ -Credential $cred -Authentication Basic –AllowRedirection
Import-PSSession $Session 
```

我得到的错误：

```
[localhost] Connecting to remote server failed with the following error message : The server certificate on the destination computer (localhost:443) has the following errors:      
The SSL certificate is expired. For more information, see the about_Remote_Troubleshooting Help topic.
    + CategoryInfo          : OpenError: (System.Manageme....RemoteRunspace:RemoteRunspace) [], PSRemotingTransportException
    + FullyQualifiedErrorId : PSSessionOpenFailed
Import-PSSession : Cannot validate argument on parameter 'Session'. The argument is null. Supply a non-null argument and try the command again.
At line:3 char:17
+ Import-PSSession <<<<  $Session
    + CategoryInfo          : InvalidData: (:) [Import-PSSession], ParameterBindingValidationException
    + FullyQualifiedErrorId : ParameterArgumentValidationError,Microsoft.PowerShell.Commands.ImportPSSessionCommand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:53:08.943

远程处理不适用于 Exchange 2007。从来没有。

# perl - Perl：无法从外部程序获得正确的退出代码

> ID：16063261
> 
> 赞同：1
> 
> 时间：2013-04-17T14:49:53.970
> 
> 标签：perl, exit, novell-idm

我到处搜索，但似乎找不到解决问题的方法。可能，它与代码有关。

我试图从一个名为 DXCMD 的 Novell 程序中捕获退出代码，以检查某些“驱动程序”是否正在运行。这在 bash 中没有问题，但我需要编写一个更复杂的 perl 脚本（例如，更容易使用数组）。

这是代码：

```
#Fill the driverarray with the results from ldapsearch (in ldap syntax)
@driverarray =`ldapsearch -x -Z -D "$username" -w "$password" -b "$IDM" -s sub "ObjectClass=DirXML-Driver" dn | grep ^dn:* | sed 's/^....//' | sed 's/cn=//g;s/dc=//g;s/ou=//;s/,/./g'`;

#iterate through drivers and get the exit code:
foreach $driverdn (@driverarray)
{
    my $cmd = `/opt/novell/eDirectory/bin/dxcmd -user $username -password $password -getstate "$driverdn"`;
    my $driverstatus = $?>>8;
} 
```

我已经走到这一步了；编写其余代码（获取状态）。但`$?>>8`代码总是返回`60`。当我将命令直接复制到 shell 并回显`$?`时，返回代码总是`2`（这意味着驱动程序运行良好）。在 bash 中，代码也可以工作（但`>>8`显然没有 ）。

我查看了错误代码`60`，但我找不到任何东西，所以我认为这是由于我的代码。

我该如何纠正这个错误？或者我如何跟踪错误？任何人？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:56:25.493

传递给 的值错误`-getstate`。您没有删除换行符。你不见了

```
chomp(@driverarray); 
```

# python - transifex 错误无法导入名称六

> ID：16063263
> 
> 赞同：2
> 
> 时间：2013-04-17T14:50:03.543
> 
> 标签：python, django, six-python

我通过几个步骤下载并安装了[transifex](https://github.com/jakul/python-transifex)，但我总是得到`Error cannot import name six`：

```
apt-get install python-dev

apt-get install gcc make

install python python-setuptools python-imaging

easy_install transifex

easy_install pip

pip install django-celery 
```

如何运行 transifex 而不会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-29T07:22:55.443

我有同样的问题。在我的情况下，有一些不需要的库漂浮在路上，并`sudo apt autoremove`修复了它。我也失踪了`urllib3.exceptions`，我安装了`pip install urllib3`.

# reporting-services - 如何将参数表达式字符串形成为始终默认为当前年份

> ID：16063266
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:06.617
> 
> 标签：reporting-services, ssrs-2008, ssas

我有一个表达式字符串，它使用年份和日历月的维度从 SSAS 中提取年份。我想修改它，使其自动默认为当前年份。

![在此处输入图像描述](https://i.stack.imgur.com/5pnFw.png)

![在此处输入图像描述](https://i.stack.imgur.com/ziaO9.png)

```
[Allegation Closed Date].[Year].&[2013] 
```

一个更难但几乎相同的例子是我想默认为当前年份但使用预设的月份。在下面的示例中，它始终是当年的第一个月，但可以设置为任何月份。我遇到的问题是我不能默认为当前年份，因为此信息是从表字段中提取的。

`[Allegation Closed Date].[Calendar Month].&[2013-01]`

我在想我可以做这样的事情并且它会起作用：

`[Allegation Closed Date].[Year].&[Year(Now())]`

我在上面的字符串上尝试了几种不同的变体，但都没有奏效。我还尝试在名为 currentyear 的数据集中创建一个计算字段，然后使用以下命令调用该字段：

`[Allegation Closed Date].[Year].&[CurrentYear]`

尝试了下面的方法，但没有奏效，所以我想我可以重新设计查询以过滤掉所有大于当前年份的年份。这是查询设计器的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/GOeR0.png)

该查询有点难以阅读，它是：

`WITH MEMBER [Measures].[ParameterCaption] AS [Allegation Closed Date].[Year].CURRENTMEMBER.MEMBER_CAPTION MEMBER [Measures].[ParameterValue] AS [Allegation Closed Date].[Year].CURRENTMEMBER.UNIQUENAME MEMBER [Measures].[ParameterLevel] AS [Allegation Closed Date].[Year].CURRENTMEMBER.LEVEL.ORDINAL SELECT {[Measures].[ParameterCaption], [Measures].[ParameterValue], [Measures].[ParameterLevel]} ON COLUMNS , [Allegation Closed Date].[Year].ALLMEMBERS ON ROWS FROM ( SELECT ( { [Allegation Status].[Allegation Status].&[Closed] } ) ON COLUMNS FROM [Allegation Analysis])`

所以我想出了要输入的内容，所以它会默认为当前年份，它是：

```
="[Allegation Closed Date].[Year].&["+CSTR(Year(Today))+"]" 
```

仍然必须弄清楚一个月要输入什么，但至少我知道我在正确的轨道上。

任何帮助仍然非常感谢如何格式化为年月。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:47:13.453

如果您指定一个表达式，那么它必须是 VB.NET 表达式，而不是 MDX。

```
=Now.Year 
```

将始终返回当前年份。

如果要使用 MDX 表达式，则需要设置一个执行该 MDX 作为其查询的数据集，然后将参数设置为“从查询中获取值”并选择新数据集。

# c# - 使用 TFS API，我如何找到代码审查中的评论？

> ID：16063271
> 
> 赞同：18
> 
> 时间：2013-04-17T14:50:14.343
> 
> 标签：c#, api, object-model, tfs-code-review

我正在尝试找出一种方法来查找有关 TFS2012 中代码审查请求/响应项的详细信息。

我可以通过以下方式查询所有代码审查请求/响应项：

```
const string TfsUri = "http://mytfsserver:8080/tfs/Default ProjectCollection";

var tfs = new TfsTeamProjectCollection(new Uri(TfsUri));
var store = tfs.GetService<WorkItemStore>();

var versionStore = tfs.GetService<Microsoft.TeamFoundation.VersionControl.Client.VersionControlServer>();

var queryText = "SELECT [System.Id], 
                 FROM WorkItems 
                 WHERE [System.WorkItemType] = 'Code Review Request' 
                 or [System.WorkItemType] = 'Code Review Response'";
var query = new Query(store, queryText);

var result = query.RunQuery().OfType<WorkItem>(); 
```

这给了我一个`WorkItem`类型列表。当我遍历该`result.FirstOrDefault().Fields`属性时，它确实为我提供了一些与代码审查相关的 ShelveSet 的有用信息，即“关联上下文”。使用这些信息，我可以查询 ShelveSet：

```
var versionStore = tfs.GetService<VersionControlServer>();
var shelveset = versionStore.QueryShelvesets("someCodeReviewId_xxxx","someUserName"); 
```

这给了我一个`ShelveSet`项目，但这就是我卡住的地方。

我已经查看了和库`Microsoft.TeamFoundation.CodeReview`提供的命名空间，但这也对我没有进一步的帮助。`Microsoft.TeamFoundation.CodeReview.Components``Microsoft.TeamFoundation.CodeReview.Controls`

我的问题是：如何通过 TFS API 找到在代码审查期间对 ShelveSet 所做的实际评论（一般评论和文件评论）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-29T19:19:26.667

我们有一个从 TFS 中提取代码审查评论的新要求，这里是我们实现的一个简短示例。必须通过另一种方法查询 workItemId。您甚至可以在 Visual Studio 中或通过 UI 中的 TFS 查询来查找它。这是可用内容和我们正在使用的内容的一小部分。[在浏览 MSDN 后，](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.discussion.client.teamfoundationdiscussionservice.creatediscussionmanager.aspx)我发现此链接很有帮助。

```
 public List<CodeReviewComment> GetCodeReviewComments(int workItemId)
 {
        List<CodeReviewComment> comments = new List<CodeReviewComment>();

        Uri uri = new Uri(URL_TO_TFS_COLLECTION);
        TeamFoundationDiscussionService service = new TeamFoundationDiscussionService();
        service.Initialize(new Microsoft.TeamFoundation.Client.TfsTeamProjectCollection(uri));
        IDiscussionManager discussionManager = service.CreateDiscussionManager();

        IAsyncResult result = discussionManager.BeginQueryByCodeReviewRequest(workItemId, QueryStoreOptions.ServerAndLocal, new AsyncCallback(CallCompletedCallback), null);
        var output = discussionManager.EndQueryByCodeReviewRequest(result);

        foreach (DiscussionThread thread in output)
        {
            if (thread.RootComment != null)
            {
                CodeReviewComment comment = new CodeReviewComment();
                comment.Author = thread.RootComment.Author.DisplayName;
                comment.Comment = thread.RootComment.Content;
                comment.PublishDate = thread.RootComment.PublishedDate.ToShortDateString();
                comment.ItemName = thread.ItemPath;
                comments.Add(comment);
            }
        }

        return comments;
    }

    static void CallCompletedCallback(IAsyncResult result)
    {
        // Handle error conditions here
    }

    public class CodeReviewComment
    {
        public string Author { get; set; }
        public string Comment { get; set; }
        public string PublishDate { get; set; }
        public string ItemName { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-08T07:32:52.913

我没有代码示例，但根据[这个讨论](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/3bc5ad0e-2bc6-4e1f-bdfa-6b649d453e7a/)，您应该能够使用[Microsoft.TeamFoundation.Discussion.Client](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.discussion.client.aspx)命名空间中的功能获得代码审查评论。

具体来说，可以通过[DiscussionThread](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.discussion.client.discussionthread.aspx)类访问评论。您应该能够使用[IDiscussionManager](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.discussion.client.idiscussionmanager.aspx)查询讨论。

# android - Android 数据库 SQLite 异常“表没有命名的列”错误

> ID：16063276
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:20.997
> 
> 标签：android, android-sqlite

我在我的 SQL lite 数据库中添加了 2 个新列，但由于没有创建新列之一，因此出现 SQL 错误。我已经阅读了具有类似错误的其他线程并仔细检查以确保我拼写正确。

问题似乎出在我的 onCreate 上，因为这是程序崩溃的地方，但我似乎无法弄清楚。我添加了 Player_Number 和 Team 列，但尚未创建 Player_Number，但 Team one 已创建。

这是我的 DBAdapter 代码：

```
public class PlayerDbAdapter {

private static final String DATABASE_CREATE = "CREATE TABLE Players (_id integer primary key autoincrement, Player_Name text not null, Player_Position text not null, Player_Number text not null, Team text not null);";
private static final String DATABASE_NAME = "Score";
private static final String DATABASE_TABLE = "Players";
private static final int DATABASE_VERSION = 3;
  public static final String KEY_BODY = "Player_Name";
  public static final String KEY_ROWID = "_id";
  public static final String KEY_TITLE = "Player_Position";
  public static final String KEY_NUMBER = "Player_Number";
  public static final String KEY_TEAM = "Team";
private static final String TAG = "PlayerDbAdapter";
  private final Context mCtx;
  private SQLiteDatabase mDb;
  private DatabaseHelper mDbHelper;

  public PlayerDbAdapter(Context paramContext)
  {
    this.mCtx = paramContext;
  }

  public void close()
  {
    this.mDbHelper.close();
  }

  public long createPlayers(String playerName, String playerPosition, String playerNumber, String team)
  {
    ContentValues localContentValues = new ContentValues();
    localContentValues.put(KEY_BODY, playerName);
    localContentValues.put(KEY_TITLE, playerPosition);
    localContentValues.put(KEY_NUMBER, playerNumber);
    localContentValues.put(KEY_TEAM, team);
    try{
        return this.mDb.insert("Players", null, localContentValues);
    } catch (Exception e) {
        Log.e("Juma", e.getMessage());
    }

    return 0;
  } 
```

日志猫

```
04-17 14:41:42.890: I/Database(407): sqlite returned: error code = 1, msg = table Players has no column named Player_Number
04-17 14:41:43.011: E/Database(407): Error inserting Player_Number=23 Team=Chester 1st Team (Men) Player_Position=Goalkeeper Player_Name=a
04-17 14:41:43.011: E/Database(407): android.database.sqlite.SQLiteException: table Players has no column named Player_Number: , while compiling: INSERT INTO Players(Player_Number, Team, Player_Position, Player_Name) VALUES(?, ?, ?, ?);
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1549)
04-17 14:41:43.011: E/Database(407):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1422)
04-17 14:41:43.011: E/Database(407):    at playerdatabase.PlayerDbAdapter.createPlayer(PlayerDbAdapter.java:46)
04-17 14:41:43.011: E/Database(407):    at your.dissertation.project.SquadActivity$1.onClick(SquadActivity.java:53)
04-17 14:41:43.011: E/Database(407):    at android.view.View.performClick(View.java:2485)
04-17 14:41:43.011: E/Database(407):    at android.view.View$PerformClick.run(View.java:9080)
04-17 14:41:43.011: E/Database(407):    at android.os.Handler.handleCallback(Handler.java:587)
04-17 14:41:43.011: E/Database(407):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 14:41:43.011: E/Database(407):    at android.os.Looper.loop(Looper.java:123)
04-17 14:41:43.011: E/Database(407):    at android.app.ActivityThread.main(ActivityThread.java:3647)
04-17 14:41:43.011: E/Database(407):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 14:41:43.011: E/Database(407):    at java.lang.reflect.Method.invoke(Method.java:507)
04-17 14:41:43.011: E/Database(407):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-17 14:41:43.011: E/Database(407):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-17 14:41:43.011: E/Database(407):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:12:30.117

这是您使用正确语法并使用常量的查询...

```
private static final String DATABASE_TABLE = "Players";
private static final String DATABASE_CREATE = "CREATE TABLE "+DATABASE_TABLE+" (_id integer primary key autoincrement, Player_Name text not null, Player_Position text not null, Player_Number text not null, Team text not null);"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T06:56:32.333

```
1\. I think Always Double check your create table command  
   .execSQL("create table " + DATABASE_TABLE+ 
                "(" 
                + KEY_ID    + " integer primary key autoincrement,"
                + KEY_NAME  + " text not null," 
                + KEY_START + " text not null,"
                + Key_END   + " text not null,"
                + KEY_PAGE  + " text not null);"
            );

2\. if you add or remove any column or change schema  then make sure you Upgrade your database version .
   using previous version through similar exception 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T07:30:48.257

这个问题主要是由语法引起的。例如，以前我的代码是正确的。这里是：

```
String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_PRODUCTS + "("
                    + COLUMN_ID + " INTEGER PRIMARY KEY," + COLUMN_MESSAGEADDRESS
                    + " TEXT," + COLUMN_MESSAGEBODY + " TEXT " + ")"; 
```

上面的代码运行正确，但我添加了另一列，它开始导致上述错误。以下是错误代码：

```
String CREATE_PRODUCTS_TABLE = "CREATE TABLE " + TABLE_PRODUCTS + "("
                    + COLUMN_ID + " INTEGER PRIMARY KEY," + COLUMN_MESSAGEADDRESS
                    + " TEXT," + COLUMN_MESSAGEBODY + " TEXT" + COLUMN_MESSAGETIME + " LONG" + ")"; 
```

如您所见，当我添加新列时，我忘记在输入 TEXT 后包含逗号。这意味着当执行此代码时，将出现语法错误，因为编译器会将最后一部分读取为：

```
COLUMN_MESSAGEBODY TEXTCOLUMN_MESSAGETIME LONG 
```

相对于：

```
COLUMN_MESSAGEBODY TEXT, COLUMN_MESSAGETIME LONG 
```

解决方案：确保您的语法正确，并注意空格和逗号。

```
kindly check the below link for more info:
http://stackoverflow.com/questions/15123966/android-table-has-no-column-named-variable-name-mysql-database-error/23776738#23776738 
```

# php - PHP邮件函数忽略额外的标题

> ID：16063277
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:22.393
> 
> 标签：php, email, contact-form, email-headers

我正在尝试使用 php mail() 函数发送邮件，但由于某种原因我没有得到，其他标题被忽略。

这是我的代码：

```
$errors = '';
    $myemail = 'my@email.com';
    $myemail_bcc = 'my_bbc@email.com';
    if(empty($_POST['nome'])  ||   empty($_POST['email']))
    {
        $errors .= "Error: You must fill Name and Email fields";
    }

    $name = $_POST['nome'];
    $email_address = $_POST['email'];
    $telefono = $_POST['telefono'];
    $message = $_POST['messaggio'];

    if (!preg_match(
    "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i",
    $email_address))
    {
        $errors .= "<br />Error: You must use a valid email address";
    }

    // spediamo la mail
    if( empty($errors))
    {
        $to = $myemail;
        $email_subject = "New Request from: $name";

        $email_body = "User data:.\n\n";
        $email_body .= "Nome: $name \nEmail: $email_address \nTelefono: $telefono \n";
        $email_body .= "Messaggio: \n$message";

        $headers = "From: John Smith <$myemail>\r\n";
            $headers .= "Reply-To: $name <$email_address>\r\n";
            $headers .= "Bcc: $myemail_bcc";

        mail($to,$email_subject,$email_body,$headers); 

        } 
```

我试图改变我声明没有名字的标题的方式，只是用电子邮件：

```
 $headers = "From: $myemail \r\n";
            $headers .= "Reply-To:  $email_address\r\n";
            $headers .= "Bcc: $myemail_bcc"; 
```

甚至只在一条线上

```
$headers = "From:  $myemail\r\nReply-To: $name <$email_address>\r\nBcc: $myemail_bcc"; 
```

但在任何情况下，邮件都不会发送到密件抄送地址，并且客户端电子邮件中的“回复”功能不会使用回复地址。

我哪里错了？

# jquery - jQuery-UI 手风琴打开一个，折叠所有

> ID：16063281
> 
> 赞同：1
> 
> 时间：2013-04-17T14:50:30.910
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我在同一页面有几个不同形式的手风琴。我想打开手风琴并折叠其他手风琴。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:02:53.520

如果我正确理解您的需求，情况是：

1.  你有多个手风琴
2.  当您单击手风琴选项卡时，您想要折叠可能打开的手风琴

我没有复制给定的解决方案，但我认为这仍然有效并且符合您的需求：[如果其他手风琴在 jquery 中打开，则关闭手风琴](https://stackoverflow.com/questions/13186993/close-accordions-if-other-accordian-is-open-in-jquery/13188284#13188284)

# javascript - 我还是 JS 新手，看不到这个基本计算脚本的错误

> ID：16063285
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:32.527
> 
> 标签：javascript, select

我从 [根据更改输入计算一个变量中获得了代码](https://stackoverflow.com/questions/13276221/calculate-one-variable-based-on-changing-input)

我根据我有限的理解写了以下内容

```
<td>
  <select name='breadstick'>
   <option value='0' selected >-- Choose Breadstick --</option>
   <option value='4.06'>Breadstick</option>
   <option value='3.8'>Melba Toast</option>
</select>
</td>
<td>
<input id="input_bread" type="text" name="input_bread" style="width:50px;" onkeyup="do_calc3(this.value);">
</td>
<td>
<input id="bread_results" class="" readonly name="bread_results" style="width:50px;" value="" />

<script>
function do_calc3() {
var bread_choice = document.getElementById('breadstick');
var bread_weight = document.getElementById('input_bread');
var bread_r = bread_choice * bread_weight;
document.getElementById("bread_results").value = bread_r;
}
</script>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:53:49.390

**第一的：**

您需要使用该`.value`属性来**获取**元素的值。

改变：

```
var bread_r = bread_choice * bread_weight; 
```

至：

```
var bread_r = bread_choice.value * bread_weight.value; 
```

在您的原始代码中，`bread_choice`并且`bread_weight`是对 DOM 元素的引用。当您尝试将它们相乘时，这将不是数字结果。

您正在尝试获取它们的值（在下拉列表中选择的内容以及在文本框中输入的内容），因此您**应该**使用`.value`.

这与您的下一行类似，您在其中使用设置**元素**`bread_results`的值`.value = bread_r`。

**第二：**

您的`<select>`元素没有`id`“面包棒”，它有`name`. 因此，将您的元素更改为：

```
<select id='breadstick' name='breadstick'> 
```

**或**将您对元素的检索更改为：

```
var bread_choice = document.querySelector('select[name="breadstick"]'); 
```

**第三：**

由于您使用的是内联事件处理程序`onkeyup`，因此您已经在传递`this.value`，这意味着文本框的值。因此，您不需要在函数中获取文本框及其值。只需添加一个参数并使用它。

```
function do_calc3(bread_weight) {
    var bread_choice = document.getElementById('breadstick').value;
    var bread_r = bread_choice * bread_weight;
    document.getElementById("bread_results").value = bread_r;
} 
```

**第四：**

您不应该使用内联事件处理程序。由于许多原因，最好在 Javascript 代码中处理事件。这是我如何设置它的示例。（请注意，`onkeyup="do_calc3(this.value);"`已在 Javascript`window.onload`事件中删除并完成）

```
function do_calc3() {
    var bread_choice = document.getElementById('breadstick');
    var bread_weight = this;
    var bread_r = bread_choice.value * bread_weight.value;
    if (isNaN(bread_r)) {
        bread_r = "Invalid";
    }
    document.getElementById("bread_results").value = bread_r;
}

function addEvent(element, eventName, callback) {
    if (element.addEventListener) {
        element.addEventListener(eventName, callback, false);
    } else if (element.attachEvent) {
        element.attachEvent("on" + eventName, callback);
    } else {
        element["on" + eventName] = callback;
    }
}

window.onload = function () {
    var textbox = document.getElementById("input_bread");
    addEvent(textbox, "keyup", do_calc3);
}; 
```

**演示：http:** [//jsfiddle.net/Gtven/4/](http://jsfiddle.net/Gtven/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:59:48.080

`<select name='breadstick' id='breadstick'>`

以上需要更改，因为您还没有 id “breadstick”。下面是一个更改的函数，用于获取元素的实际值，而不仅仅是元素。

```
function do_calc3() {
    var bread_choice = document.getElementById('breadstick').value;
    var bread_weight = document.getElementById('input_bread').value;
    var bread_r = bread_choice * bread_weight;
    document.getElementById("bread_results").value = bread_r;
} 
```

在这里我给你一个工作小提琴：http: [//jsfiddle.net/TwqC6/](http://jsfiddle.net/TwqC6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:00:11.240

使用`.value`：

```
var bread_choice = document.getElementById('breadstick').value;
var bread_weight = document.getElementById('input_bread').value; 
```

# asp.net - 在 LoggedInTemplate 内设置锚标记的 href

> ID：16063286
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:32.677
> 
> 标签：asp.net

我正在尝试创建指向用户配置文件的动态链接，但它不会像我预期的那样工作。

我试过这个：

```
 <li class='last' style="float:right"> <a id="loginLink2" runat="server" href="~/Profile/"+<asp:LoginName runat="server" />""
> ><asp:LoginName ID="LoginName1" runat="server" />  </a></l>>                                             <asp:LoginStatus ID="LoginStatus1" runat="server" OnLoggedOut="LoginStatus1_LoggedOut"
> LogoutAction="Redirect" LogoutText="Log off" LogoutPageUrl="~/" />></li> 
```

但它没有工作。我该如何解决这个问题？我可以通过对服务器的 ajax 调用来做到这一点，但如果可能的话，我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:03:00.797

您必须从服务器手动设置它。您可以通过以下方式在加载页面时执行此操作：

```
((HtmlLink)LoginView1.FindControl("loginLink2")).href = "~/Profile/" +
          this.User.Identity.Name; 
```

我不知道的一部分是代表`<a runat="server">`...的服务器端控件是什么，但其他一切都应该起作用。

# tfs - 有什么方法可以在不减慢构建速度的情况下从 Team Build 2010 获取项目级别的错误/警告消息？

> ID：16063290
> 
> 赞同：1
> 
> 时间：2013-04-17T14:50:38.097
> 
> 标签：tfs, tfsbuild

我正在我们的 TFS 系统中设置持续集成。我们系统的一个主要部分是开发了大约 50 个 DotNetNuke 模块来支持我们的 CMS 基础架构。目前，这些项目中的每一个都有自己的解决方案，因为它们的代码库大多是孤立的（在 1 或 2 个通用项目中具有通用代码）。将它们保留在自己的解决方案中是因为它使开发过程更快（加载、编译等....）

但是，事实证明，在设置 TFS 团队构建时，这很难维护，因为每个解决方案都必须手动添加到构建定义中，并且由于每个项目都在自己的解决方案中，MSBuild 似乎无法利用并行编译。这会导致大约 5 分钟的完整构建时间，虽然并不可怕但并不理想。大多数情况下，从构建定义维护方面来看，它并不理想。

为了解决这个问题，我创建了一个包含所有项目的全球解决方案。这个想法是，如果您希望您的项目由 TFS 自动编译和部署，您必须将您的项目包含在全局解决方案中。这似乎效果很好，因为从构建定义的角度来看，它很容易维护，并将总构建时间缩短到 70 秒。

一个问题是显示的 TFS 构建日志在解决方案下将所有警告和错误分组在一起，而不是按项目将它们分开。这使得很难快速查看哪个项目导致了哪些错误和警告。

有没有一种好方法可以在构建日志摘要视图中查看项目级别的错误/警告消息，而无需深入研究杂乱的构建日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T17:22:53.933

要回答您的直接问题，我相信答案是否定的（至少在没有大量定制的情况下不会）。

对我来说，这从来不是一个大问题，因为我非常积极地让我的团队将错误/警告降至零，然后通过 TFS Build (/p:TreatWarningsAsErrors=true) 强制执行。这意味着您永远不必在构建摘要中处理数百个警告。

如果您将所有单独的解决方案添加到构建定义中，您始终可以使用 TFS 电动工具“克隆”构建定义以简化维护。您还可以修改构建模板以并行构建解决方案/项目，尽管这会带来文件争用问题的风险。

# java - 在 Java 中返回整数值

> ID：16063292
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:40.240
> 
> 标签：java

```
public class MultiplicationClass{

int answer;
int random;
int random2;

int create(){
    random = (int)(1+Math.random()*15);
    random2 = (int)(1+Math.random()*15);
    return random;
    return random2;
}

boolean checkAnswer(int useranswer){
    if(useranswer==getAnswer()){
        return true;
    }else{
        return false;
    }
}

int getAnswer(){
    return random*random2;
} 

} 
```

此代码总是给出错误： `unreachable statement in the line "return random2"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T14:51:58.053

你不能返回两次，你只能有 1 个返回语句。

```
return random;
return random2; // This one will never be reached since you've already returned from the method. 
```

如果一个方法有一个返回值，比如这个返回一个 int，该方法必须至少返回一个值。如您所见，return 语句之后的任何指令，如果 return 没有被分支本身包围，则将无法访问并引发编译错误。

我将通过几个示例来解释多个分支：

```
public int someMethod(int i) {
  if(i == 0) {
    return i;
  }
} 
```

这个方法不会编译，因为如果 i 不等于 0 会发生什么，编译器不知道如何返回该方法。要解决此问题，请添加 else 或最终 return 语句，其中任何一个都可以工作。

```
public int someMethod(int i) {
  if(i == 0) {
    return i;
  }
  return 2;
} 
```

或者：

```
public int someMethod(int i) {
  if(i == 0) {
    return i;
  } else {
    return 2;
  }
} 
```

现在编译器知道如果 i 不为 0，它可以返回某种值。

另外，不相关的注释，但看看你是如何编写代码的，我猜你来自 C 背景。请注意，您所有的方法和变量都是所谓的默认范围或包私有。即使该类被声明为公共的，这些也只能由该类本身以及与其共享同一个包的类访问。

可能想看这里：

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T14:55:37.490

Java 中的每个方法只能返回一个值。在您的示例中，您不必返回任何值，因为您将这些值分配给全局变量。所以这应该足够了：

```
void create(){
    random = (int)(1+Math.random()*15);
    random2 = (int)(1+Math.random()*15);
} 
```

如果要返回两个值，只需调用该方法两次并将其分配给您的变量，如下所示：

```
int create(){
    int random = (int)(1+Math.random()*15);
    return random;
}

...

int getAnswer(){
    answer = create();
    answer2 = create();
    return answer*answer2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:53:52.910

```
int create(){
    random = (int)(1+Math.random()*15);
    random2 = (int)(1+Math.random()*15);
    return random;
    return random2;
} 
```

您不能在返回语句后编写代码。

作为 random 和 random2 返回相同的值

```
 int create(){
        random = (int)(1+Math.random()*15);    
        return random;

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-11T18:11:48.987

```
<p>
i've tryed this one and it worked
check my github repository 
https://github.com/UnknownAD/CommonProgramingIssues

public class s{
        public static void main(String [] args){
        System.out.println("HI there");
        var primal=17;
        var edit=Integer.toString(primal);
        System.out.println(edit);
        method("22");
        }
        static void method(String tr){
        int stdin=Integer.parseInt(tr);
        int proc=stdin+5;
        String stdout=Integer.toString(proc);
        System.out.println(proc);
}
}
```

# php - 使用 gzwrite() 和 gzclose() 后文件大小不正确

> ID：16063296
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:51.160
> 
> 标签：php, zlib

代码本身非常大，所以这里是简化版本：

```
<?php
//set common headers
ob_start();
//generate the javascript source
$ret=ob_get_clean();
$handle=gzopen('cache/file.js.gz','wb');
gzwrite($handle,$ret);
gzclose($handle);
header('Content-Length: '.filesize('cache/file.js.gz'),true);
readfile('cache/file.js.gz'); 
```

有趣的部分。如果`cache/file.js.gz`不存在，则`readfile('cache/file.js.gz');`报告正确的大小。如果它确实存在，那么它会报告文件的旧大小。

我已经尝试在相同的结果`fflush($handle)`之后添加。`gzwrite`我没有尝试在写作之前取消链接文件。似乎是多余的一步。

输出文件通常很小。最大的是 5kB。

服务器信息：

*   阿帕奇版本 2.2.23
*   PHP 版本 5.2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:07:03.633

`clearstatcache()`在获取文件统计信息之前调用

# php - 让子类调用父类

> ID：16063299
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:59.237
> 
> 标签：php, oop

我有时会发现自己在各种不同的相关事物上执行类似的任务。例如，我可能有“书籍”、“电影”和“歌曲”，并且我可能有任务“addNote”，它从客户端获取注释文本，将其添加到数据库中，将其与适当的父记录相关联, 并向客户端返回一些数据。我已经实现了它，如下所示，虽然它有效，但它似乎是错误的。有没有更好的方法来做到这一点，如果有，怎么做？谢谢

```
class parentClass
{
    protected function someTask($table)
    {
        //do the task which is common to child1/2/3Class using $table
    }
}

class child1Class extends parentClass
{
    public function someTask($dummy=NULL){parent::someTask('class1_table');}
}
class child2Class extends parentClass
{
    public function someTask($dummy=NULL){parent::someTask('class2_table');}
}
class child3Class extends parentClass
{
    public function someTask($dummy=NULL){parent::someTask('class3_table');}
}

$ajax=new child1Class(); //specific childClass based on MVC
$ajax->someTask(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:18:31.153

你拥有它的方式是正确的。您唯一的其他选择是将父方法设为“公共”

```
class parentClass
{
    public function someTask($table)
    {
        echo "hello " . $table;
    }
}

class child1Class extends parentClass
{
  // no needed method here
}
 class child2Class extends parentClass
{
  // no needed method here
}

$obj1 = new child1Class();
$obj1->someTask('class1_table');
$obj2 = new child1Class();
$obj2->someTask('class2_table');
$obj3 = new child2Class();
$obj3->someTask('class3_table');

result with obj1: "hello class1_table"
result with obj2: "hello class2_table"
result with obj3: "hello class3_table" 
```

*   Public 使该方法可以通过对象直接访问。
*   受保护使该方法可通过子类访问
*   Private 使该方法只能通过其自己的类访问。

# java - Java 多方法调用

> ID：16063300
> 
> 赞同：0
> 
> 时间：2013-04-17T14:50:59.240
> 
> 标签：java

我的应用程序有一个`methodA`为服务请求执行的。现在我们想发送一个请求列表而不是单个请求，并且每个请求`methodA`都必须被调用或处理。我可以放置一个基本循环并调用该方法

```
public String findN(criteria criteriaList)  {
    .....................
    for( int i = 0; i < reqList.length; i++ )
    {
        Req req = reqList[i];
        methodA(req);
    }
} 
```

有没有比循环更好的编程方法？是否有涵盖这方面的设计模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:52:39.743

```
for(Request req : reqList) {
    MethodA(req);
} 
```

是目前最好的 Java 产品。`.map`更多的函数式语言使用,`.foreach`等方法在一行中完成此操作。

# c++ - 将代码块链接到 Poppler 库

> ID：16063302
> 
> 赞同：0
> 
> 时间：2013-04-17T14:51:03.690
> 
> 标签：c++, dll, codeblocks, poppler, .a

我对 C++ 编程比较陌生，虽然我在一般编码实践、约定等方面有一些经验……但最近我对我的（有限的）知识有了一定的了解。

基本上我希望编写一个程序，允许我从 PDF 文件中提取注释。通过一些研究，我发现 Poppler 库允许我这样做。所以我下载了它并开始了在 Windows Vista 上为 CodeBlocks (MinGW) 构建它的艰巨过程。

对于那些感兴趣的人，以下站点提供了有关使用 Cmake 构建 Poppler 的宝贵信息：

[http://www.seppemagiels.com/blog/building-poppler-windows-using-mingw](http://www.seppemagiels.com/blog/building-poppler-windows-using-mingw) >

无论如何，进入我目前的困境。遵循 Cmake 的源代码约定后，我有一个像这样的文件结构：

...\工作\

.............poppler-0.22.2

.............poppler-0.22.2_Build

在“poppler-0.22.2_Build”文件夹中有一个“libpoppler.dll.a”文件，我被认为是一个库文件夹。然后我按照此处所述的说明进行操作：

[http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/](http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/)

然后我链接到“poppler-0.22.2_Build”目录中的 libpoppler.dll.a 文件和原始源目录中的 .h 文件（即 poppler-0.22.2）。

现在我的问题是我需要在 main.cpp 中写什么，这样我才能使用 Poppler 功能。起初我只是写道：

```
#include "poppler.h" 
```

但是，这会返回“没有这样的文件或目录”错误。然后我尝试了：

```
#include "poppler-qt4.h" 
```

然后执行，但是后来我在我的代码中被告知“poppler”没有被声明。然后我尝试了：

```
#include "poppler-qt4.h"
#include "C:\Users\...\poppler-0.22.2\cpp\poppler-document.h" 
```

然后返回“对' *imp* _ZN7poppler8document14load_from_fileERKsS2_S2_'的未定义引用”错误...

所以这就是我现在所处的位置，我完全不知道我应该如何继续，我希望有人可以指导我完成让 Poppler 工作所需的步骤，即我如何让库链接，如果这确实是问题所在，或者我该如何克服“ *imp* _”错误。我真的对这个问题束手无策......

提前感谢您提供的任何帮助。

PS到目前为止我的main.cpp：

```
 #include <iostream>
    //#include "poppler.h"
    #include "poppler-qt4.h"
    #include "C:\Users\...\poppler-0.22.2\cpp\poppler-document.h"

    using namespace std;

    int main()
    {

    const string dir = "C:\\Users\\...\\TestPDF.pdf";

    poppler::document *doc = poppler::document::load_from_file(dir)

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:26:01.200

在 Code::Blocks 中，右键单击项目名称并选择“Build Options...”。在最左侧的菜单中选择项目名称的选项（应该是第一个选项），然后单击“链接器设置”。现在按“添加”按钮并浏览到您的 DLL 文件，然后按“确定”。

要允许包含库的头文件（无需在源代码中写下完整路径），您应该告诉将它们的位置添加到编译器的包含路径中。您可以在同一窗口的“搜索目录”选项卡上执行此操作。确保选择了“编译器”子选项卡，然后按“添加”。浏览到包含头文件的目录，然后按“确定”。

希望这可以帮助。

# tcl - Tcl C API：将嵌入式 Tcl interp 的 stdout 重定向到文件而不影响整个程序

> ID：16063303
> 
> 赞同：0
> 
> 时间：2013-04-17T14:51:06.227
> 
> 标签：tcl, channel

```
#include <tcl.h>
int main(int argc, char** argv)
{
    Tcl_Interp *interp = Tcl_CreateInterp();

    Tcl_Channel stdoutChannel = Tcl_GetChannel(interp, "stdout", NULL);
    Tcl_UnregisterChannel(interp, stdoutChannel);

    Tcl_Channel myChannel = Tcl_OpenFileChannel(interp, "/home/aminasya/nlb_rundir/imfile", "w", 0744);

    Tcl_RegisterChannel(interp, myChannel);
    Tcl_Eval(interp, "puts hello");
} 
```

在这段代码中，我尝试关闭标准输出通道并将其重定向到文件。（如所述[从 Tcl C 过程中获取输出](https://stackoverflow.com/questions/14324357/get-the-output-from-tcl-c-procedures)）。运行后，“imfile”被创建但为空。做错了什么？

我也看到[了如何将标准输出重定向到 tcl 中的文件](https://stackoverflow.com/questions/8531031/how-can-i-redirect-stdout-into-a-file-in-tcl)，但我需要使用 Tcl C API 来完成。

我也尝试过这种方式，但再次没有结果。

```
FILE *myfile = fopen("myfile", "W+");
Tcl_Interp *interp = Tcl_CreateInterp(); 
Tcl_Channel myChannel = Tcl_MakeFileChannel(myfile, TCL_WRITABLE);
Tcl_SetStdChannel(myChannel, TCL_STDOUT); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T20:08:51.573

在您的情况下，困难在于 Tcl 解释器的标准通道与主程序（和 C 运行时）看到的标准流的文件描述符（FD）之间的交互，以及`open(2)`Unix 中的语义。

使所有输出重定向的过程如下所示：

1.  操作系统确保在程序开始执行时三个标准文件描述符 (FD) 已打开（编号为 0、1 和 2，其中 1 是标准输出）。

2.  一旦您创建的 Tcl 解释器初始化了它的三个标准通道（当您调用`Tcl_GetChannel()`“stdout”时就会发生这种情况，如此[处](http://www.tcl.tk/man/tcl8.6/TclLib/StdChannels.htm)所述），它们就会与主程序中已经存在的三个 FD 相关联。

    请注意，底层的 FD 不是克隆的，它们只是从封闭程序中“借来的”。事实上，我认为在 99% 的情况下，这是明智的做法。

3.  当您关闭（在取消注册时发生）`stdout`Tcl 解释器中的标准通道时，底层 FD (1) 也将关闭。

4.  对`fopen(3)`内部调用的调用`open(2)`获取最低的空闲 FD，即 1，因此主程序（和 C 运行时）理解的标准输出流现在连接到打开的文件。

5.  然后您从您的文件中创建一个 Tcl 通道并将其注册到解释器。频道确实变成`stdout`了口译员。

最后，在主程序中对标准输出流的写入和对 Tcl 解释器中标准输出通道的写入都发送执行相同的底层 FD，因此最终在同一个文件中。

我可以看到两种处理这种行为的方法：

*   玩一个巧妙的技巧，将 FD 1“重新连接”到它最初打开的同一流，并使为 Tcl 解释器打开的文件`stdout`使用大于 2 的 FD。
*   与其先让 Tcl 解释器初始化它的标准通道然后重新初始化其中一个，不如在让自动激活机制启动之前手动初始化它们。

两种方法都有其优点和缺点：

*   “保留 FD 1”通常更易于实现，如果您只想在您的 Tcl 解释器中重定向*，* `stdout`并让其他两个标准通道连接到封闭程序使用的相同标准流，这种方法似乎是明智的聘请。可能的缺点是：

    *   涉及太多魔法（建议对代码进行大量注释）。
    *   不确定这将如何在 Windows 上工作：那里没有`dup(2)`（见下文）并且可能需要一些其他方法。
    *   *不*使用封闭程序的标准流`stdin`和`stderr`来自封闭程序的标准流可能很有用。
*   手动初始化 Tcl 解释器中的标准通道需要更多的代码，并且*应该*保证正确的顺序（`stdin`, `stdout`, `stderr`, 按该顺序）。如果您希望 Tcl 解释器中剩余的两个标准通道连接到封闭程序的匹配流，则这种方法更有效；第一种方法是免费的。

以下是如何保存 FD 1 以使仅`stdout`在 Tcl 解释器中连接到文件；对于封闭程序 FD 1 仍然连接到与操作系统设置的相同的流。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#include <tcl.h>

int redirect(Tcl_Interp *interp)
{
        Tcl_Channel chan;
        int rc;
        int fd;

        /* Get the channel bound to stdout.
         * Initialize the standard channels as a byproduct
         * if this wasn't already done. */
        chan = Tcl_GetChannel(interp, "stdout", NULL);
        if (chan == NULL) {
                return TCL_ERROR;
        }

        /* Duplicate the descriptor used for stdout. */
        fd = dup(1);
        if (fd == -1) {
                perror("Failed to duplicate stdout");
                return TCL_ERROR;
        }

        /* Close stdout channel.
         * As a byproduct, this closes the FD 1, we've just cloned. */
        rc = Tcl_UnregisterChannel(interp, chan);
        if (rc != TCL_OK)
                return rc;

        /* Duplicate our saved stdout descriptor back.
         * dup() semantics are such that if it doesn't fail,
         * we get FD 1 back. */
        rc = dup(fd);
        if (rc == -1) {
                perror("Failed to reopen stdout");
                return TCL_ERROR;
        }

        /* Get rid of the cloned FD. */
        rc = close(fd);
        if (rc == -1) {
                perror("Failed to close the cloned FD");
                return TCL_ERROR;
        }

        /* Open a file for writing and create a channel
         * out of it. As FD 1 is occupied, this FD won't become
         * stdout for the C code. */
        chan = Tcl_OpenFileChannel(interp, "aaa.txt", "w", 0666);
        if (chan == NULL)
                return TCL_ERROR;

        /* Since stdout channel does not exist in the interp,
         * this call will make our file channel the new stdout. */
        Tcl_RegisterChannel(interp, chan);

        return TCL_OK;
}
int main(void)
{
        Tcl_Interp *interp;
        int rc;

        interp = Tcl_CreateInterp();
        rc = redirect(interp);
        if (rc != TCL_OK) {
                fputs("Failed to redirect stdout", stderr);
                return 1;
        }
        puts("before");
        rc = Tcl_Eval(interp, "puts stdout test");
        if (rc != TCL_OK) {
                fputs("Failed to eval", stderr);
                return 2;
        }
        puts("after");

        Tcl_Finalize();

        return 0;
}
```

构建和运行（在 Debian Wheezy 中完成）：

```
$ gcc -W -Wall -I/usr/include/tcl8.5 -L/usr/lib/tcl8.5 -ltcl main.c
$ ./a.out 
before
after
$ cat aaa.txt 
test 
```

如您所见，字符串“test”输出`puts`到文件，而字符串“before”和“after”，它们是`write(2)`封闭程序中的 FD 1 的 n （这就是最后`puts(3)`所做的）去终端.

手动初始化方法将是这样的（某种伪代码）：

```
Tcl_Channel stdin, stdout, stderr;

stdin = Tcl_OpenFileChannel(interp, "/dev/null", "r", 0666);
stdout = Tcl_OpenFileChannel(interp, "aaa.txt", "w", 0666);
stderr = Tcl_OpenFileChannel(interp, "/dev/null", "w", 0666);
Tcl_RegisterChannel(interp, stdin);
Tcl_RegisterChannel(interp, stdout);
Tcl_RegisterChannel(interp, stderr); 
```

我还没有测试过这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:09:12.093

在 C API 级别，假设您使用的是基于 Unix 的操作系统（即，不是 Windows），您可以通过使用正确的操作系统调用更简单地做到这一点：

```
#include <fcntl.h>
#include <unistd.h>

// ... now inside a function

    int fd = open("/home/aminasya/nlb_rundir/imfile", O_WRONLY|O_CREAT, 0744);
    // Important: deal with errors here!

    dup2(fd, STDOUT_FILENO);
    close(fd); 
```

您还可以使用`dup()`保存旧的标准输出（到 Tcl 将忽略的任意数字），以便您可以稍后恢复它，如果需要的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T01:27:46.967

尝试这个：

```
FILE *myfile = fopen("myfile", "W+");
Tcl_Interp *interp = Tcl_CreateInterp(); 
Tcl_Channel myChannel = Tcl_MakeFileChannel(myfile, TCL_WRITABLE);
Tcl_RegisterChannel(myChannel);
Tcl_SetStdChannel(myChannel, TCL_STDOUT); 
```

您需要先向解释器注册通道，然后才能重置 std 通道以使用它。

# jquery - IE 和 Firefox 中的页面 url 不同

> ID：16063308
> 
> 赞同：0
> 
> 时间：2013-04-17T14:51:26.923
> 
> 标签：jquery, html, internet-explorer, firefox

我有这种使用 JQuery 的有线情况。我的网站上有三个页面。

1.  索引.html
2.  业务.html
3.  操作.htmls

当我打开 business.html URL 是**firefox**时，它会像这样打开

```
http://localhost:9090/Operational/business.html 
```

当我单击此页面上名为“operation.html”的按钮时，它会打开一个带有以下地址的新页面

```
http://localhost:9090/Operational/operation.html 
```

到目前为止一切都很好。但是当我在 IE 9 中打开相同的 operation.html 页面时，URL 是不常用的：

```
http://localhost:9090/Operational/business.html#/Operational/Operations.html 
```

为什么会这样？有人可以对此有所了解吗？我被卡住了:P @!!!!

**添加更多细节**

我正在使用一个名为 tiggzi 的开发工具。这是代码的锚定部分。

```
$('#j_2 [name="mobilenavbaritem4_141"]').die().live({
    click: function () {
        if (!$(this).attr('disabled')) {
            Tiggr.navigateTo('Operations', {
                transition: 'slide',
                reverse: false
            });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:56:53.673

没有看到代码，我们只能推测，但很可能页面有 JavaScript 更新内容，然后使用[历史 API](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)设置可书签的 URI。

IE9 不支持历史 API，因此它回退到使用片段标识符作为 hack。

如果有人`http://localhost:9090/Operational/business.html#/Operational/Operations.html`直接访问，服务器会传递 的内容，`business.html`然后 JavaScript 会请求`Operations.html`并替换它的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:54:07.173

那是因为你可能有`onclick`一个`Anchor tag`和工作`href`。

如果是这种情况，请将`return false;`at 放在 onclick 的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:54:00.710

我找到了问题和解决方案。

我正在使用 tiggzi 的一个名为 tiggr 的自定义 jquery 移动库。这导致了IE中的错误。

代码是这样的

```
Tiggr.navigateTo('Operations', { transition: 'slide', reverse: false }) 
```

现在我已经替换为

```
window.open('Operations.html', '_self', 'width=600,height=400,toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes,resizable=yes') 
```

我知道这个调整在过渡期间有问题，但我可以继续。！

谢谢大家帮忙！！！

# php - 新行 (\r\n) 在电子邮件正文中不起作用

> ID：16063312
> 
> 赞同：71
> 
> 时间：2013-04-17T14:51:42.850
> 
> 标签：php, email, newline, content-type

我正在使用 PHP`mail()`函数：

```
 $to      = 'AAAA <postmaster@xxx.xx>';
    $subject = 'BBBB';
    $message = "CCCC\r\nCCCC CCCC \r CCC \n CCC \r\n CCC \n\r CCCC";
    $headers = 'From: DDD<postmaster@xxx.xx>' . "\r\n";
    $headers .= "Content-Type: text/html; charset=\"UTF-8\"; format=flowed \r\n";
    $headers .= "Mime-Version: 1.0 \r\n"; 
    $headers .= "Content-Transfer-Encoding: quoted-printable \r\n";
    mail($to, $subject, $message, $headers); 
```

当我收到这封电子邮件时，它看起来像这样：

```
CCCC CCCC CCCC CCC CCC CCC CCCC 
```

我会期待这样的事情：

```
CCCC
CCCC CCCC CCC 
CCC 
CCC 
CCCC 
```

没有[`Content-Type`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type)HTTP 标头它工作正常。如何制作*新行*并仍然使用我的“Content-Type”声明？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-17T14:55:01.670

您需要使用 a`<br>`因为您的`Content-Type`is `text/html`。

它可以在没有`Content-Type`标题的情况下工作，因为这样您的电子邮件将被解释为*纯文本*。如果你真的想使用`\n`你应该使用`Content-Type: text/plain`，但是你会失去任何标记。

[也在这里](https://stackoverflow.com/questions/3578174/newline-showing-up-on-screen-but-not-in-email)查看类似的问题。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-08-25T19:36:25.073

如果您要发送 HTML 电子邮件，请按照说明使用**<BR>**（或**<BR />**或**</BR>**）。
如果您要发送纯文本电子邮件，请使用**%0D%0A**
\r = **%0D** (Ctrl+M = 回车)
\n = **%0A** (Ctrl+A = 换行)

如果您的电子邮件中有电子邮件链接，
例如

```
<A HREF="mailto?To=...&Body=Line 1%250D%250ALine 2">Send email</A> 
```

然后使用**%250D%250A**

%25 = %

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-17T05:10:08.173

您需要使用`<br>`而不是`\r\n`. 为此，您可以使用内置函数调用[nl2br](http://us.php.net/nl2br) 所以您的代码应该是这样的

```
 $message = nl2br("CCCC\r\nCCCC CCCC \r CCC \n CCC \r\n CCC \n\r CCCC"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-14T14:26:15.380

如果你使用`content-type: text/html`你需要放一个`<br>`，因为你的信息会像**html 文件**一样受到威胁。

但是如果你改变你的`content-type`to`text/plain`而不是`text/html`你将能够使用`\r\n`字符。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-04-29T10:06:06.013

使用 `<BR>` 总是不够的。如果您不告诉 Outlook 它是一个自闭合 html 标记，则 MS Outlook 2007 将忽略这一点

```
 <BR /> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-01T14:40:41.313

**您可以使用%0A**字符代码在文本/纯内容类型中添加换行符。

例如：

```
<a href="mailto:someone@example.com?subject=Hello%20again&body=HI%20%0AThis%20is%20a%20new%20line"/> 
```

这是[jsfiddle](https://jsfiddle.net/k923ddom/1/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-10T11:47:18.577

这对我有用。

```
$message  = nl2br("
===============================\r\n
www.domain.com \r\n
===============================\r\n
From: ".$from."\r\n
To: ".$to."\r\n
Subject: ".$subject."\r\n
Message: ".$_POST['form-message']); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-08T22:13:35.783

Another thing use "", there is a difference between "\r\n" and '\r\n'.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-20T06:18:24.317

```
$mail = new PHPMailer;
$mail->isSMTP(); 
$mail->isHTML(true); 
```

在处理所有 html 标记后插入此代码

```
<br> <p> in $mail->Body='Hello<br> how are you ?<b>'; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-18T16:42:07.090

OP 的问题与 HTML 编码有关。但如果您使用纯文本，请使用“\n”而不是“\r\n”。

我的个人用例：使用 mailx 邮件程序，只需将“\r\n”替换为“\n”即可解决我的问题，这与错误的自动 Content-Type 设置有关。

错误的标题：

```
User-Agent: Heirloom mailx 12.4 7/29/08
MIME-Version: 1.0
Content-Type: application/octet-stream
Content-Transfer-Encoding: base64 
```

正确的标题：

```
User-Agent: Heirloom mailx 12.4 7/29/08
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit 
```

我并不是说“application/octet-stream”和“base64”总是错误的/不需要的，但在我的情况下它们在哪里。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-18T15:46:38.230

```
' ' 
```

在我的情况下缺少空间，当添加的空格`' \r\n'`开始工作时

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-16T21:52:25.863

对于邮件函数中的文本/纯文本邮件，肯定使用 PHP_EOL 常量，您也可以将它与
text/html 文本结合使用：

```
$messagePLAINTEXT="This is my message."
. PHP_EOL .
"This is a new line in plain text";

$messageHTML="This is my message."
. PHP_EOL . "<br/>" .
"This is a new line in html text, check line break in code view";

$messageHTML="This is my message."
. "<br/>" .
"This is a new line in html text, no line break in code view"; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-26T18:15:56.263

如果在标题中使用`content-type: text/plain`.

当心：如果您执行以下 php 代码：

```
 $message='ab<br>cd<br>e<br>f';
print $message.'<br><br>';
    $message=str_replace('<br>',"\r\n",$message);
print $message; 
```

您在 Windows 浏览器中获得以下信息：

```
ab
cd
e
f

ab cd e f 
```

并与`content-type: text/plain`您一起在电子邮件输出中获得以下信息；

```
ab
cd
e
f 
```

# c - 从试卷中描述和重写示例代码

> ID：16063314
> 
> 赞同：1
> 
> 时间：2013-04-17T14:51:48.443
> 
> 标签：c, syntax

以下是一些糟糕的编程示例。目的是了解代码在做什么并用更好的代码重写它。

[![q](https://i.stack.imgur.com/IipsN.png)](https://i.stack.imgur.com/IipsN.png)
[（来源：[gyazo.com](http://gyazo.com/4cb5f604f9d57561245544187b0a2139.png?1366209953)）]

[![q](https://i.stack.imgur.com/Ven9a.png)](https://i.stack.imgur.com/Ven9a.png)
[（来源：[gyazo.com](http://gyazo.com/c3739424a78ccc3b4b90f7ccaf1317a7.png?1366209918)）]

我尝试做的是按原样输入，编译它并尝试弄清楚在做什么。但我进步很小。这是一个试卷问题，所以我不能派年龄试图弄清楚这一点，但同时它是一个完整的问题。

这些代码在做什么，我怎样才能（更快）弄清楚它们？

谢谢你。

编辑：我不是要代码。我要求对代码进行解释。所以我真的不能给出片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:01:57.853

一旦您了解了代码在做什么，只需更改变量和函数名称。完毕。在这种情况下，“糟糕的编程”正在为变量使用糟糕的名称，这并没有明确变量本身的用途

编辑：您分配的第二个任务是`rewrite it in better code.`。这就是练习的美妙之处，在您在心理上“执行”算法之前很难知道发生了什么。提供更好的名称可以提高代码的质量。如果存在潜在的错误，则提供更好的名称可以提示您。

例子：

```
// bad code
int f(int a, int b){
  return a < b ? a : b;
}

// better code
int min(int a, int b){
  return a < b ? a : b;
}

// what? there must be a bug
int max(int a, int b){
  return a < b ? a : b;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:05:59.277

关键是多练习（并学习新概念）。你练习得越多，你接触到的代码就越多。对于初学者来说，这些事情可能看起来非常复杂[在我看到的第一个 C 代码中，我想知道为什么将`*`乘法放在变量名之前`int * a`；）]

您可以使用许多很好的参考来消除[这样](http://boredzo.org/pointers/) 或[这样的困惑](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:59:06.940

这些是非常基本和出色的代码。只需在纸上做一个空运行的代码，你就会很容易地得到关于他们在做什么的答案。就像，在 B 中，我们正在创建一个相同值的数组，`item`直到`b != -1`. 同样，只需假设一些值并在纸上解决它，然后用适当的行和缩进重新编写。

# c++ - 删除智能指针指向的对象

> ID：16063318
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:51:58.867
> 
> 标签：c++, memory-management, smart-pointers, irrklang

在我的代码中，我有一个 SoundManager 类，它包含并操作我的游戏的所有声音。这个类需要被实例化，它的方法被多个其他类调用。但是我希望只有一组声音占用内存，所以为了提高效率，所有资产都被声明为静态 shared_ptrs。

```
#include "SoundManager.h"

static shared_ptr<ISoundEngine> sEngine;

static shared_ptr<ISoundSource> hoverSound;
static shared_ptr<ISoundSource> confirmSound;
static shared_ptr<ISoundSource> mainBGM;
static shared_ptr<ISound> bgmInterface;

SoundManager::SoundManager(void)
{

//first we need to create the irrKlang sound engine instance
    if(!sEngine)
    {
        sEngine.reset(createIrrKlangDevice());
    }

    if(!hoverSound)hoverSound.reset(sEngine->addSoundSourceFromFile("Sounds/ButtonHover.mp3"));
    if(!confirmSound)confirmSound.reset(sEngine->addSoundSourceFromFile("Sounds/ButtonConfirm.mp3"));
    if(!mainBGM)mainBGM.reset(sEngine->addSoundSourceFromFile("Sounds/mainBGM.mp3"));

    //set some default volumes
    hoverSound->setDefaultVolume(1.0f);
    confirmSound->setDefaultVolume(0.4f);
    mainBGM->setDefaultVolume(0.5f);

}

SoundManager::~SoundManager(void)
{   
} 
```

这个 SoundManager 在我的 main() 函数中实例化，每次我需要加载标题屏幕（SoundManager 也在这个标题屏幕类中实例化）。一遍又一遍地初始化和销毁​​标题屏幕不会导致问题。静态 shared_ptrs 对象不会被销毁，因为它们仍在被 SoundManager 的主要功能实例使用。

现在这一切在实践中运行我的游戏都很好。然而，当谈到干净地退出时，当上面的静态对象被拆除时，未处理的运行时异常（访问冲突）被抛出给我。使用 VS2012 的调试器将我指向 memory.h 中的一行。

```
private:
    virtual void _Destroy()
        {   // destroy managed resource
        delete _Ptr;       <<<<<<<<<The debugger points to this line
        } 
```

我的理解是，与 obj-c 类似，c++ shared_ptrs 使用引用计数器来确保对象不会被删除，直到不再存在需要使用它们的对象。我不明白是什么导致了这些错误。

也许我不应该省略一个重要部分：我的游戏是通过调用 exit(0) 退出的；尽可能靠近 main() 函数。在这样做之前，我没有采取任何行动来清理 SoundManagers 成员，因为我认为 shared_ptr 已经处理了这个问题。

有人知道是什么导致我的清理问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:01:26.530

如果要手动释放 a 使用的资源，`shared_ptr`则需要调用[`reset`](http://www.cplusplus.com/reference/memory/shared_ptr/reset/). 至于使用静态`shared_ptr`，我认为我没有得到推理。关键是它们不会复制周围的资源，因此您将只有一个资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:38:52.747

您正在使用 IRRKLang 库。该库以预编译二进制文件的形式提供（如果您在 Windows 上，则为 dll）。该库通过使用纯虚拟库使其自身二进制兼容。这可行，但是您不能像这样删除库的对象，因为您的程序 new/delete 与库的 new/delete 不同。这些类型的库提供了一种释放内存的方法，这种情况下会丢弃。

要使用 shared_ptr 等，您必须使用自定义删除器。查看[Using custom deleter with std::shared_ptr](https://stackoverflow.com/questions/12340810/using-custom-deleter-with-stdshared-ptr)了解如何操作并根据您自己的需要进行修改。

在你的情况下，因为你使用的是 Visual Studio 2012，你可能可以做这样的事情

```
template<class T>
struct IrrDeleter{
   void operator()(T* t){
       t->drop();
   }
}; 
```

然后更改所有重置行以包含删除器，例如

```
sEngine.reset(createIrrKlangDevice(),IrrDeleter<ISoundEngine>()); 
```

# database - cakePHP 2.x 使用密钥连接到远程数据库

> ID：16063322
> 
> 赞同：1
> 
> 时间：2013-04-17T14:52:10.200
> 
> 标签：database, cakephp-2.1

我需要与另一台服务器上的 mysql 数据库建立连接，我有 RSA 密钥来连接到服务器，并且我还拥有连接到数据库所需的所有凭据，并且使用以下代码，我能够连接完美

```
try {
    $this->db = new PDO("mysql:host=$this->host;port=$this->port;dbname=$this->dbname", $this->sqlUser, $this->sqlPass);
} catch (Exception $e) {
    shell_exec("ssh -i /path/to/rsa/key/the_key myusername@some.ip.address -L3307:localhost:3306 -N");
};

try {
    $this->db = new PDO("mysql:host=$this->host;port=$this->port;dbname=$this->dbname", $this->sqlUser, $this->sqlPass);
} catch (Exception $e) {
    die($e->getMessage() . " (line:" . __LINE__ . ")");
}; 
```

但是，我正在使用 cakePHP 2.x 构建应用程序，如何使用 cakePHP 的配置连接到远程服务器和数据库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:48:22.613

好的，我通过在 app/Model/DataSource/Database 下创建一个名为 FarAwayMysql.php 的扩展类来设法做到这一点

```
App::uses('DboSource', 'Model/Datasource');

class FarAwayMysql extends DboSource {
public $description = "Faraway MySQL DBO Driver";

protected $_baseConfig = array(
    'persistent' => true,
    'host' => 'localhost',
    'login' => 'root',
    'password' => '',
    'database' => 'cake',
    'port' => '3306',
    'rsa' => '',
    'remote_username' => '',
    'remote_ip' => ''
);
protected $_connection = null;

protected $_useAlias = true;

public function connect() {
    $config = $this->config;
    $this->connected = false;
    try {
        $flags = array(
            PDO::ATTR_PERSISTENT => $config['persistent'],
            PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true,
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
        );
        if (!empty($config['encoding'])) {
            $flags[PDO::MYSQL_ATTR_INIT_COMMAND] = 'SET NAMES ' . $config['encoding'];
        }
        if (empty($config['unix_socket'])) {
            $dsn = "mysql:host={$config['host']};port={$config['port']};dbname={$config['database']}";
        } else {
            $dsn = "mysql:unix_socket={$config['unix_socket']};dbname={$config['database']}";
        }
        $this->_connection = new PDO(
            $dsn,
            $config['login'],
            $config['password'],
            $flags
        );
        $this->connected = true;
    } catch (PDOException $e) {
        echo "ssh -i {$config['rsa']} {$config['remote_username']}@{$config['remote_ip']} -L3307:{$config['host']}:3306 -N";
        shell_exec("ssh -i {$config['rsa']} {$config['remote_username']}@{$config['remote_ip']} -L3307:{$config['host']}:3306 -N");
    }

    try {
        $flags = array(
            PDO::ATTR_PERSISTENT => $config['persistent'],
            PDO::MYSQL_ATTR_USE_BUFFERED_QUERY => true,
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
        );
        if (!empty($config['encoding'])) {
            $flags[PDO::MYSQL_ATTR_INIT_COMMAND] = 'SET NAMES ' . $config['encoding'];
        }
        if (empty($config['unix_socket'])) {
            $dsn = "mysql:host={$config['host']};port={$config['port']};dbname={$config['database']}";
        } else {
            $dsn = "mysql:unix_socket={$config['unix_socket']};dbname={$config['database']}";
        }
        $this->_connection = new PDO(
            $dsn,
            $config['login'],
            $config['password'],
            $flags
        );
        $this->connected = true;
    } catch (PDOException $e) {             
        throw new MissingConnectionException(array(
            'class' => get_class($this),
            'message' => $e->getMessage()
        ));
    }

    $this->_useAlias = (bool)version_compare($this->getVersion(), "4.1", ">=");

    return $this->connected;
}
} 
```

通过添加 3 个新配置

```
protected $_baseConfig = array(
    'persistent' => true,
    'host' => 'localhost',
    'login' => 'root',
    'password' => '',
    'database' => 'cake',
    'port' => '3306',
    'rsa' => '',
    'remote_username' => '',
    'remote_ip' => ''
); 
```

然后在你的 app/Config/database.php 上，它会是

```
public $faraway = array(
    'datasource' => 'Database/FarAwayMysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'faraway_username',
    'password' => 'faraway_password',
    'database' => 'faraway_db_name',
    'port' => '',
    'rsa' => 'path/to/rsa/key',
    'remote_username' => 'your_username',
    'remote_ip' => 'your.ip.address'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T03:56:32.227

谢谢你的帖子。我用`PostgreSQL`代替`MySQL`所以做了一些调整。其中一些可能也与此相关`MySQL`。

1）当shell_exec'ing时，将输出重定向到`/dev/null`后台并在后台运行。端口也从更改`3306/3307`为`5432/5433`

```
shell_exec("ssh -i {$config['rsa']} {$config['remote_username']}@{$config['remote_ip']} -L5433:{$config['host']}:5432 -N > /dev/null &") 
```

2）`FarAwayPostgres.php`如下

```
<?php
App::uses('Postgres', 'Model/Datasource/Database');

class FarAwayPostgres extends Postgres {
        public $description = "Postgres over SSH";

        protected $_baseConfig = array(
                'persistent'            =>  true,
                'host'                  => 'localhost',
                'login'                 => 'root',
                'password'              => '',
                'database'              => 'cake',
                'port'                  => '5432',
                'rsa'                   => '',
                'remote_username'       => '',
                'remote_ip'             => '',
                'sslmode'               => 'allow',
                'schema'                => 'public',
                'flags'                 => array()
        );

        protected $_connection = null;
        protected $_useAlias = true;

        public function connect() {

                $config = $this->config;
                $this->connected = false;

                $flags = $config['flags'] + array(
                        PDO::ATTR_PERSISTENT => $config['persistent'],
                        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
                );

                try {
                        if (empty($config['unix_socket'])) {
                                $dsn = "pgsql:host={$config['host']};port={$config['port']};dbname={$config['database']};sslmode={$config['sslmode']}";
                        } else {
                                $dsn = "pgsql:unix_socket={$config['unix_socket']};dbname={$config['database']}";
                        }

                        $this->_connection = new PDO( $dsn, $config['login'], $config['password'], $flags);
                        $this->connected = true;
                } catch (PDOException $e) {
                        $cmd="ssh -i {$config['rsa']} {$config['remote_username']}@{$config['remote_ip']} -L5433:{$config['host']}:5432 -N > /dev/null &";
                        shell_exec($cmd);
                        sleep(3);
                }

                try {
                        if (empty($config['unix_socket'])) {
                                $dsn = "pgsql:host={$config['host']};port={$config['port']};dbname={$config['database']};sslmode={$config['sslmode']}";
                        } else {
                                $dsn = "pgsql:unix_socket={$config['unix_socket']};dbname={$config['database']}";
                        }

                        $this->_connection = new PDO( $dsn, $config['login'], $config['password'], $flags);
                        $this->connected = true;
                } catch (PDOException $e) {
                        throw new MissingConnectionException(array(
                                'class' => get_class($this),
                                'message' => $e->getMessage()
                        ));
                }

                return $this->connected;
        }
} 
```

请注意如何插入三秒钟的睡眠，以便与数据库的连接尝试等待 ssh 完成。

最后，`database.php`：

```
<?php
class DATABASE_CONFIG {

        public $default = array(
                'datasource'      => 'Database/FarAwayPostgres',
                'persistent'      => false,
                'host'            => 'localhost',
                'port'            => '5433',
                'login'           => 'postgres',
                'password'        => '',
                'database'        => 'remote_db',
                'rsa'             => '/var/www/.ssh/id_rsa',
                'remote_username' => 'root',
                'remote_ip'       => 'remote_server',
                'prefix'          => '',
                'encoding'        => 'utf8',
        ); 
```

私钥`id_rsa`位于 Apache 的主目录中，可供 Apache 读取。

现在，最后，在使用之前，执行以下操作：

```
su -m apache
ssh -i /var/www/.ssh/id_rsa root@remote_server 
```

为了更新`known_hosts`。

# regex - 在 vim 中搜索和替换的正则表达式

> ID：16063324
> 
> 赞同：1
> 
> 时间：2013-04-17T14:52:16.837
> 
> 标签：regex, vim, replace

我有一个文件，其中包含多个这样的条目：

```
Abcd:abcd:*sometext*:klm:xyz/abc
Abcd:abcd:R%fs90uw:klm:xyz/abc 
```

现在，我只想将那些行中包含“ *sometext* ”字符串的行替换为“klm”。

如何使用 vim 中的搜索和替换功能来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:54:03.273

`:g`是你的朋友：

```
:g/sometext/s/klm/qrs/g 
```

# php - 自动填充下拉选择不会更新/显示

> ID：16063329
> 
> 赞同：0
> 
> 时间：2013-04-17T14:52:27.773
> 
> 标签：php, jquery

所以我一直试图弄清楚这几天，但无济于事。我正在尝试使用 php 使用从 mysql 查询的值填充 html 表单。我使用heredoc 将带有填充值的表单推送到网页，但我无法填充下拉列表。如果有人愿意提供帮助，如果您也可以包含有关如何填充单选按钮的方法，因为这是我在下拉列表>_< 之后的下一个任务。

我尝试过的最近的事情，在下面的代码中来自这篇文章： [如何使用 javascript 以编程方式设置选择框元素的值？](https://stackoverflow.com/questions/78932/how-do-i-programatically-set-the-value-of-a-select-box-element-using-javascript)

但它仍然无法执行。

我用谷歌搜索了很多，查看了多个 stackoverflow 帖子，甚至试图找到一个关于如何做到这一点的 youtube 教程。我现在很沮丧，想弄清楚这个虫子。

这是我的html：

```
<!DOCTYPE html>

<html>
    <head>
        <Script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script language="javascript" type="text/javascript">

        function searchDB(){
            //alert ("running searchDB")
            var $request;
            // abort any pending request
            if ($request) {
                $request.abort();
            }
            // setup some local variables
            var $form = $("#searchForm");
            // let's select and cache all the fields
            var $inputs = $form.find("uniqueID");
            // serialize the data in the form
            var serializedData = $form.serialize();

            if (alphaNumericCheck()) {
                //disable the inputs for the duration of the ajax request
                $inputs.prop("disabled", true);

                // fire off the request to /form.php
                $request = $.ajax({
                    url: "SearchandUpdateIsaiah.php",
                    type: "POST",
                    data: serializedData
                });

                // callback handler that will be called on success
                $request.success(function (response, textStatus, jqXHR){
                    // log a message to the console
                    $("#display").html(response);

                });
                // callback handler that will be called on failure
                $request.fail(function (jqXHR, textStatus, errorThrown){
                    // log the error to the console
                    console.error(
                        "The following error occured: "+
                        textStatus, errorThrown
                    );
                });

                // callback handler that will be called regardless
                // if the request failed or succeeded
                $request.always(function () {
                    // reenable the inputs
                    $inputs.prop("disabled", false);
                });

                }
        };
        //makes sure all values submitted in form only contain a-z, A-Z, or 0-9 and no spaces.
        function alphaNumericCheck() {
            var regex = /^[a-zA-Z0-9]+$/;
            if (!regex.test($("#uniqueID").val())) 
            {
                alert("Please fix search term");
                return false;
            }
            /*else if (!regex.test($("#lName").val()))
            {
                alert("Please fix last name");
                return false;
            }*/
            else
            {
                return true;
            }
        };

        </script>
    </head>
    <body>
        <br>
        Search form
        <form id="searchForm">
            Insert a uniqueID: <input type="text" id="uniqueID" name="uniqueID">
        </form>
        <input type="button" id="search" name="search" value="Search">
        <script> $("#search").click(function(){searchDB();});</script>

        <div id="display"> </div>

</body> 
```

这是我的php：

```
<?php
//Search the database function
SearchDB();
Function SearchDB(){

    $search=$_POST['uniqueID'];

    //------------------------------------------------------------------------
    //----------------------connect to database-------------------------------
    //------------------------------------------------------------------------
    $dbhost = '**********';
    $dbuser = '**********';
    $dbpass = '**********';
    //connection to database, stored as $conn
    $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die('Could not connect: ' .     mysql_error());
    //------------------------------------------------------------------------
    //----------------------connect to database-------------------------------
    //------------------------------------------------------------------------

    mysql_select_db("test_db",$conn);
    $likeSearch = $search.'%';
    $sql = "SELECT * FROM alumni WHERE uniqueID = '$search' OR last_name LIKE '$likeSearch'"; 
    $result = mysql_query($sql,$conn);
    $resultsArray = array();
    if (!$result) {
        echo "worked";
        $resultCount=0;
    }else {
        while ($row = mysql_fetch_assoc($result)) {
            $resultsArray[] = array(
                'uniqueID' => $row['uniqueID'],
                'fName' => $row['first_name'],
                'lName' => $row['last_name'],
                'salary' => $row['salary'],
                'company' => $row['company']
            );
        }
        $resultCount = Count($resultsArray);
    }

    if ($resultCount>1) {
    //return list of names
        //echo $resultCount. "\n";
        foreach ($resultsArray as $value){
                $string = "First name: {$value[fName]}    Last name: {$value[lName]}    Unique ID: {$value[uniqueID]} \n";  
                $textReturn = $textReturn.$string;
        };
        $textReturn = $textReturn."Copy and paste the UniqueID of the student whose data you wish to retrieve.";
$c = <<<TEXT
    </br> <textarea rows="{4*$resultCount}" cols="75">{$textReturn}</textarea>
TEXT;
        echo $c;
    }elseif ($resultCount===1) {
    //return form of data
        foreach ($resultsArray as $value){
            $formFirstName = $value[fName];
            $formLastName = $value[lName];
            $formSalary = $value[salary];
            $formCompany = $value[company];
        };
$c = <<<TEXT
<!DOCTYPE html>
    <html>
        <head>
            <Script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

            <script language="javascript" type="text/javascript">

            function submit(){
                var $request;
                // abort any pending request
                if ($request) {
                    $request.abort();
                }
                // setup some local variables
                var $form = $("#alumniForm");
                // let's select and cache all the fields
                var $inputs = $form.find("fName, lName, company, salary, submit");
                // serialize the data in the form
                var serializedData = $form.serialize();

                if (alphaNumericCheck())
                {
                    //disable the inputs for the duration of the ajax request
                    $inputs.prop("disabled", true);

                    // fire off the request to /form.php
                    $request = $.ajax({
                        url: "main2.php",
                        type: "POST",
                        data: serializedData
                    });

                    // callback handler that will be called on success
                    $request.done(function (response, textStatus, jqXHR){
                        // log a message to the console
                        $("#ajaxInfo").html(response).show();
                    });

                    // callback handler that will be called on failure
                    $request.fail(function (jqXHR, textStatus, errorThrown){
                        // log the error to the console
                        console.error(
                            "The following error occured: "+
                            textStatus, errorThrown
                        );
                    });

                    // callback handler that will be called regardless
                    // if the request failed or succeeded
                    $request.always(function () {
                        // reenable the inputs
                        $inputs.prop("disabled", false);
                    });

                    }
                    else
                    {
                    }
            };
            //makes sure all values submitted in form only contain a-z or A-Z and no spaces.
            function alphaNumericCheck() {
                var $regex = /^[a-zA-Zs]+$/;
                if (!$regex.test($("#fName").val())) 
                {
                    alert("Please fix first name");
                    return false;
                }
                else if (!regex.test($("#lName").val()))
                {
                    alert("Please fix last name");
                    return false;
                }
                else
                {
                    return true;
                }
            }

            </script>

        </head>
        <body>
                <form id="alumniForm">
                    <h3>Alumni Form</h3>
                    <br/>
                    <input type='hidden' name='submitted' id='submitted' value='alumni'/>
                    Input name <br/>
                        First Name: <input type="text" name="fName" id="fName" value="{$formFirstName}">
                        Last Name: <input type="text" name="lName" id="lName" value="{$formLastName}">

                     <br>
                     Select user company name from a dropdown list <br/>
                        <script>
                            var element = document.getElementById('company');
                            element.value = {$formCompany};
                            $('#company').selectmenu('refresh');
                        </script>
                        <select name="company" id="company">
                            <option value=""></option>
                            <option value="Proctor & Gamble">Proctor & Gamble</option>
                            <option value="General Electric">General Electric</option>
                            <option value="PwC">PwC</option>
                            <option value="McDonalds">McDonalds</option>
                        </select>

                     <br>
                     Select user salary range using radio buttons
                     <br>
                        <input type="radio" id="salary" name="salary" value="LT30000">Less than $30,000<br>
                        <input type="radio" id="salary" name="salary" value="30000">$30,000-$40,000<br>
                        <input type="radio" id="salary" name="salary" value="40000">$40,000-$50,000<br>
                        <input type="radio" id="salary" name="salary" value="50000">$50,000-$60,000<br>
                        <input type="radio" id="salary" name="salary" value="60000">$60,000-$70,000<br>
                        <input type="radio" id="salary" name="salary" value="70000">$70,000-$80,000<br>
                        <input type="radio" id="salary" name="salary" value="80000">$80,000-$90,000<br>
                        <input type="radio" id="salary" name="salary" value="90000">$90,000-$100,000<br>
                        <input type="radio" id="salary" name="salary" value="GT100000">Greater than $100,000
                    </form>
                    <br/>
                    <input type="submit" id="submit" name="submit" value="ADD/UPDATE" onclick="javascript:submit()"/> <br/>
                    <br><textarea id="ajaxInfo" rows="4" cols="75"> display php return </textarea><br/>

        </body>
    </html>
TEXT;
            echo $c;
    }else {
        echo "No results found \n";
    };  

    mysql_close($conn);
}
?> 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:12:01.303

“自动填充下拉选择不会更新/显示”

您永远不会使用 PHP 来更新选择器，javascript 也不会做任何事情。

你创造

```
select name="company" 
```

但你永远不会更新它。这就是为什么什么都没有发生。

还：

```
$('#company').selectmenu('refresh'); 
```

不应该做任何事情，因为您还没有声明#company 的存在。

# crosstab - Crystal Report 中的交叉表报表

> ID：16063330
> 
> 赞同：0
> 
> 时间：2013-04-17T14:52:34.933
> 
> 标签：crosstab, crystal-reports-2010

我对水晶报表中的交叉表类型报表很陌生，我想向多个用户显示多个详细信息。这样我就有列作为用户名和包含相同详细信息的行。

喜欢：

```
 User1     User2    User3    User4    User5
Details1:  aaa       bbb      ccc     dddd     eeee

Details2:  123       345      534     566      87667

Details3:  geg      dhrth   htrhytr   ghdf     ytryr 
```

但是我无法将界面作为总计，小计汇总等字段非常混乱。此外，我对根据一个字段对行分组然后在其中显示详细信息不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T05:14:21.913

创建一个交叉表报告，在行区域中放置您的详细信息，在列中放置您的用户，并且不要忘记放置汇总字段。它工作正常。无需进行任何编码，所有事情都应该从您的存储过程中管理。

# c# - Caliburn 如何在内部视图中处理来自外部视图的动作

> ID：16063336
> 
> 赞同：0
> 
> 时间：2013-04-17T14:52:53.527
> 
> 标签：c#, mvvm, caliburn

我有一个非常令人沮丧的问题：我有一个外部视图，顶部有一个 Ribbonbar。还有另一个视图，它包含 1...n 个视图模型并显示来自数据表列表的数据网格。显示哪一个取决于用户。用户可以在 Ribbonbar 上选择一个按钮，该按钮应该对 Datagrid 中的选定行发出操作。但是如何做到这一点？我可以轻松地在活动 ViewModel 上启动一个方法，但是该方法需要获取所有选定的行——这将违反 MVVM 背后的理念。有任何想法吗？

这是屏幕的外观： http: [//s7.directupload.net/file/d/3228/a3m3ttu9_jpg.htm](http://s7.directupload.net/file/d/3228/a3m3ttu9_jpg.htm)

按钮“Zeile raus”，应该会在右下方 Tabcontrol 中包含的 ViewModel/Viwe 中产生效果。Effect 需要知道选择了哪些行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:56:38.937

让按钮从其命令执行方法发布事件：

```
public class RibbonViewModel {  
    IEventAggregator events;  

    public RibbonViewModel (IEventAggregator events){  
        this.events = events;  
    }  

    public void ButtonClickCommandExecute(){  
        events.Publish(new SomeMessage{  
            SomeNumber = 5,  
            SomeString = "Blah..."  
        });  
    }  
} 
```

您的每个 ViewModel 都应该订阅此事件，如果它是“活动的” ViewModel 则对其做出反应：

```
public class ViewModelWithDataGrid : IHandle<SomeMessage>{  
    public void Handle(SomeMessage message){  
        if(IsActive){           
        //do something with the message  
        }
    }  
} 
```

这种方式事件源不耦合到事件接收器，并且您可以在 VM 应响应事件时轻松进行单元测试。

文档：[http ://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator&referringTitle=Documentation)

# java - Android过滤对象列表

> ID：16063338
> 
> 赞同：8
> 
> 时间：2013-04-17T14:52:59.780
> 
> 标签：java, android, list, filter

我的问题类似于：[java Best way to Filter list of object](https://stackoverflow.com/questions/4215645/java-best-way-to-filter-list-of-object)

> 我有一个对象列表说销售。我只想要其产品与另一个列表中的产品匹配的销售对象，例如 saleProductList。
> 
> 除了循环，有没有更好的方法来做到这一点。

但是我希望能够使用 android 可访问的代码进行过滤，例如，这些库需要与 android 操作系统配合得很好并在 android 操作系统上运行。我希望避免为我认为很常见的问题编写自制代码，有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-01-23T09:01:15.747

```
 mFinalList will contain filtered data.

   List<Object> mFinalList=new ArrayList<>();

       for (Object person : listData) {
                if (person.getNameType().equalsIgnoreCase("somename")) {
                    mFinalList.add(person);
                } 

               }

        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-01T09:10:47.477

如果您的目标是在简单约束上过滤列表（List 或 ArrayList）并在**ListView**中显示数据，您可以直接在适配器中使用**Filterable**接口，如下所示：

```
public class AdapterFilterable extends BaseAdapter implements Filterable {

@Override
public Filter getFilter() {

    Filter filter = new Filter() {

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {

            if (results != null && results.values != null) {

                _arrayList = (List<object>) results.values;
            }
            else {
                _arrayList = ApplicationGlobal._dataManager.get_ArraylistFull();
            }
            notifyDataSetChanged();
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {

            FilterResults results = new FilterResults();
            List<YourObject> filteredList = new ArrayList<YourObject>();

            //Do your filtering operation with the constraint String
            //Return result for publishResults to use it

            results.count = filteredList.size();
            results.values = filteredList;

            return results;
        }
    };
    return filter;
} 
```

要使用过滤器，例如何时在列表中搜索或仅使用您只需要的**约束过滤它：**

```
_yourAdapter.getFilter().filter(String yourConstraintString); 
```

否则，如果您想过滤复杂的数据，您当然可以简单地使用 For 循环进行过滤，然后执行**notifyDataChanged();**

希望能帮助到你

# java - Java Web Start 中可能存在的错误

> ID：16063340
> 
> 赞同：1
> 
> 时间：2013-04-17T14:53:05.027
> 
> 标签：java, ubuntu, java-web-start

我正在使用带有 Java 版本 1.7.0_15（冰茶）的 Ubuntu 操作系统。我无法访问 Java Web 启动应用程序。每次我启动它时，我都会收到 Java web start request JRE 1.7 的消息，然后说它无法安装，所以手动安装，然后它无法安装 JRE。我不知道该怎么办。 ![错误图片](https://i.stack.imgur.com/GW9CY.png)

这是我的java版本![Java版](https://i.stack.imgur.com/OiTIJ.png)

这里有一些重要信息 1\. 我已经使用[JaNeLa](http://www.pscode.org/janela/)验证了 JNLP 文件并且没有错误。2\. Ubuntu 使用 JRE 1.6 打开应用程序非常好。3\. 在 Windows 上，每个版本都运行良好。4\. 我尝试使用 [部署工具包](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deployingApplications)，但总是将我重定向到 Sun 页面以下载 JRE 的 linux 版本，即使在安装之后它再次将我重定向到下载页面。

如果我能提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:28:37.913

所以最后在工作了一整天后，我发现了我的系统的问题。我不确定为什么我的问题是 -3，但它是有效的问题。问题出在 Firefox 浏览器中的 Java 插件上。虽然我已经在我的机器上安装了 jdk 7，但是 firefox 插件仍然指向 jre6，所以给出了错误。所以我必须在我的机器中手动创建 jre 7 的链接

```
ln -s /usr/lib/jvm/<<location of jre 7>>/jre/lib/i386/libnpjp2.so ~/.mozzilla/plugins 
```

然后我重新启动浏览器并确保我有最新的插件并且它开始工作，所以它不是安装的java，而是firefox插件。

仅供参考，由于某些许可，oracle 已停止支持 Linux 的 java 插件，因此您必须手动安装它。谢谢

你可以在firefox的地址栏中输入'about:plugins'来查看已安装的插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:16:01.440

恕我直言，OpenJDK 7 不是 JRE 7。您可以在安装 oracle jre 之前将其卸载。否则你必须使用 sudo update-alternatives 来定义默认的 java 版本

请参阅[https://askubuntu.com/questions/67909/how-do-i-install-oracle-jdk-6](https://askubuntu.com/questions/67909/how-do-i-install-oracle-jdk-6)

# python - 以编程方式获取上次启动/关闭时间

> ID：16063346
> 
> 赞同：2
> 
> 时间：2013-04-17T14:53:20.187
> 
> 标签：python, windows, event-log

我想获得关闭和启动 Windows 的确切时间。在 c++ 中，我只需使用`GetTickCount64`which 检索自系统启动以来经过的毫秒数（从而通过差异获得时间），但我不知道是否有 python 的等效函数，如果可能的话，我'想避免编写 C++ 模块。

对于上次关闭时间，我不知道......也许在 Windows 的某个地方有一些日志？我尝试使用`win32evtlog`库读取事件日志，但它只给了我一个事件并且是关于 dns..

**编辑：好的，也许我更进一步：我使用了win32evtlog，特别是多次调用ReadEvent log，它给了我所有的日志，直到它返回null。现在，我需要一种方法来了解启动/关闭的 id 是什么。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:12:06.403

您应该使用 pywin32 库，在那里您会找到 GetTickCount() 函数。

[http://docs.activestate.com/activepython/2.5/pywin32/win32api__GetTickCount_meth.html](http://docs.activestate.com/activepython/2.5/pywin32/win32api__GetTickCount_meth.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T21:43:31.827

由于这是一个特定于 Windows 的问题，我们可以利用 WMI 甚至 PowerShell。要在 PowerShell 中解决您的问题，只需：

```
powershell -command "(gcim Win32_OperatingSystem).LastBootUpTime"
# Outputs: Tuesday, 9 October 2018 4:05:58 PM 
```

要在 Python 中做到这一点，我们可以使用`subprocess`：

```
from subprocess import call
call( ["powershell", "-command", "(gcim Win32_OperatingSystem).LastBootUpTime"] )
# Outputs: Tuesday, 9 October 2018 4:05:58 PM 
```

# azure - Azure 服务总线代理消息安全

> ID：16063348
> 
> 赞同：0
> 
> 时间：2013-04-17T14:53:22.327
> 
> 标签：azure, azureservicebus

我在 Azure 服务总线中使用代理消息（主题/订阅），我很好奇如何（或是否）使用 SSL 保护通信。

我正在使用连接字符串发送和接收消息：

```
var connectionString = CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");
var Client = TopicClient.CreateFromConnectionString(connectionString, "TestTopic");
Client.Send(new BrokeredMessage()); 
```

该消息在发送时是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:40:54.833

是和不是。如果使用 TLS (SSL)，则客户端与 Azure 服务器之间的通信是加密的。一旦通信完成并将数据传递到服务器进程，它就不再安全（它位于 Azure 防火墙等之后，但不再加密）。

代理消息传递没有像中继消息传递（WCF 选项）那样的消息级安全选项，因此只使用传输层安全性——这意味着它仅在该传输层中受到保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:15:33.997

是的，他们默认使用 SSL。它可能取决于您的连接字符串，但我使用以下连接字符串进行了测试（并使用 Fiddler 进行了验证），并且可以说它是传输级别加密的：Endpoint=sb://myns.servicebus.windows.net;SharedSecretIssuer=owner;SharedSecretValue= mykey 欢呼

# android - 如何将平板电脑顶部操作栏中的溢出（显示选项菜单）按钮移动到底部栏？

> ID：16063349
> 
> 赞同：0
> 
> 时间：2013-04-17T14:53:23.687
> 
> 标签：android, android-actionbar

我想将顶部操作栏中实际存在的溢出按钮（显示选项菜单）移动到底部操作栏。正如 Facebook 应用程序和许多其他应用程序实际上所做的那样。我只想要这个用于平板电脑。

截屏：

![](https://i.stack.imgur.com/kQB7G.jpg)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:34:47.227

首先，这些屏幕截图都没有显示“底部操作栏”。它们显示导航栏。

其次，第二个屏幕截图中显示的任何内容都是非标准的。

我的猜测是第二个屏幕截图应该是遗留菜单的可供性。现代 Android 应用程序开发人员的目标是*不显示旧菜单*可供性，因为它向用户表明您的应用程序没有得到维护。现代 Android 应用在操作栏中有溢出菜单（适用于没有专用 MENU 按钮的设备）。

话虽如此，如果您希望拥有更少的用户，并因此希望向这些用户建议您的应用程序未维护，以拥有旧版菜单可供性，请摆脱您的操作栏，例如设置`android:targetSdkVersion`为 11 或更低。

[您可以在文档](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)中阅读有关此内容的更多信息。

# javascript - 从函数返回值作为 jQuery 中参数的值

> ID：16063350
> 
> 赞同：1
> 
> 时间：2013-04-17T14:53:24.513
> 
> 标签：javascript, jquery, function, fancybox, fancybox-2

参数的值`content`应该是获取内容的函数。我想我可以使用这样的东西：

```
$(".fancy-detail-page").fancybox({
      'content'    : function(){
          var id = $(this).attr('id');
          id = id.replace("pd", "c");
          var content = $('#' + id + ' .product-details').html();
          return content;
      },
      'padding'    : 0,
      'openEffect'  : 'none',
      'closeEffect'  : 'none',
      'maxWidth'    : 960
 }); 
```

但`return`似乎不起作用。这是如何正确完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:31:11.950

在不使事情复杂化的情况下，您可以使用`beforeLoad`回调来获得相同的结果，并且它会更清洁、更简单和更快，例如：

```
$(".fancy-detail-page").fancybox({
    padding: 0,
    openEffect: 'none',
    closeEffect: 'none',
    maxWidth: 960,
    beforeLoad : function () {
        var id = $(this.element).attr("id").replace("pd", "c");
        this.content = $('#' + id + ' .product-details').html();
    }
}); 
```

**[JSFIDDLE](http://jsfiddle.net/XDxGt/)**

这条线

```
this.content = $('#' + id + ' .product-details').html(); 
```

可以简化为

```
this.content = $('#' + id + ' .product-details'); 
```

无需`.html()`获得相同的结果...查看 **[更新的 JSFIDDLE](http://jsfiddle.net/XDxGt/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:19:20.383

感谢 jqueryrocks 和烤。这个解决方案对我有用：

```
 $(".fancy-detail-page").click(function(e){
    e.preventDefault();
    var id = $(this).attr('id');
    $.fancybox({
      'content'    : (function(){
        id = id.replace("pd", "c");
        var content = $('#' + id + ' .product-details').html();
        return content;
      })(),
      'padding'    : 0,
      'openEffect'  : 'none',
      'closeEffect'  : 'none',
      'maxWidth'    : 960
    });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:00:57.273

假设这是同一个插件。

每个 API 看起来像“内容”必须是数据。

“内容强制内容（可以是任何 html 数据）” [http://fancybox.net/api](http://fancybox.net/api)

所以你只需要在初始化fancybox之前调用函数（或设置一个内容变量）；

```
var id = $(this).attr('id');
id = id.replace("pd", "c");
var content = $('#' + id + ' .product-details').html();

$(".fancy-detail-page").fancybox({
      'content'    : content,
      'padding'    : 0,
      'openEffect'  : 'none',
      'closeEffect'  : 'none',
      'maxWidth'    : 960
 }); 
```

# vb.net - 选项卡索引不适用于面板中的控件？

> ID：16063353
> 
> 赞同：10
> 
> 时间：2013-04-17T14:53:31.070
> 
> 标签：vb.net, winforms, panel, tabindex

我有一个带有大约 15 个组合框和 15 个文本框的 vb.net windows 窗体，以及其他几个控件。所有这些`TextBoxes`都`ComboBoxes`位于面板中。这样做的原因是我需要根据用户选择/输入的内容来调整控件的可见属性，因此将每个标签和控件组合在它们自己的面板中似乎是一种简单的方法来实现这一点。

我已经通过属性设置了标签顺序，但它不起作用。当我浏览我的表单时，它会跳过并且不遵循我设置的标签顺序。这是因为我的控件都位于单独的面板中吗？`TabStop`对于我不想要制表符的所有内容，我都设置为 false，我对这里发生的事情有点困惑。看起来我`ComboBoxes`和`TextBoxes`每个人都在自己的面板中这一事实正在阻止我的标签索引工作。任何人都可以确认这一点或对可能发生的事情有其他想法吗？`TabIndex`如果我创建一个新表单就可以了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-25T19:37:35.537

信不信由你，面板排序绝对会影响 TabIndex。我发现在多面板表单上处理选项卡排序的最简单方法是按照 LarsTech 的建议使用 View>Tab Order。然后，一旦选项卡顺序可见，您将能够看到面板如何影响每个面板中包含的控件的整体顺序。接下来，在实际面板上一次左键单击一个，按照您希望流程进行的顺序。您会注意到它会自动对每个面板内的控件进行子排序，整个面板的排序按照您指定的顺序排列。完成此操作后，您可以单击每个面板内的每个控件，以在给定面板内设置控件的相对 Tab 键顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:35:22.433

尝试在 Visual Studio 设计器中使用“查看 - 选项卡顺序”，然后按所需顺序单击每个容器和控件。父容器（面板）的标签索引很重要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T16:17:37.523

将 TabStop 设置为 FALSE 意味着它将在轮到 Tab 顺序时跳过。通常，您会将标签的 TabStop 设置为 FALSE，并将所有其他 INTERACTIVE 控件设置为 TABSTOP = True（除非该控件被禁用了）。

不要从标签跳到标签。您的 TabStop 和 Tab Order 应该类似于下面的列表。

```
Name         Parent        TabOrder        TabStop
=======================================================
Form         -             0               -
TabStrip1    Form          1               True
Tab1         TabStrip1     2               True
Label1       Tab1          3               False
Textbox1     Tab1          4               True
Label2       Tab1          5               False
Combo1       Tab1          6               True

Tab2         TabStrip1     7               True
Label3       Tab2          8               False
Textbox2     Tab2          9               True
Label4       Tab2          10              False
Combo2       Tab2          11              True

Tab3         TabStrip1     12               True
Label5       Tab3          13               False
Textbox3     Tab3          14               True
Label6       Tab3          15               False
Combo3       Tab3          16               True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-07T18:08:08.180

我发现您必须查看每个控件和控件分组（组框、面板等）的每个选项卡索引。与 Classic VB 不同，.Net 不会为您更新所有其他选项卡索引。您可以在表单、面板或其他分组类型上使用相同的选项卡索引拥有任意数量的控件。

顺便说一句，对于那些发布 View - Tab Order 菜单项的人，谢谢。我不知道它在那里，它极大地帮助我正确地订购了带有多个嵌套组框的表单。这是查看标签顺序的绝佳工具。如果你使用这个，一定要注意每一层的嵌套。

# html - CSS Media Query 以 1080 手机为目标？

> ID：16063356
> 
> 赞同：1
> 
> 时间：2013-04-17T14:53:43.463
> 
> 标签：html, css, media-queries, screen-resolution

我正在寻找正确的 CSS 媒体查询来定位所有手机（不是平板电脑和更大的手机），包括索尼 Xperia Z 等 1080 部手机。

现在我正在使用：

```
<link href='style/mobile.css' rel='stylesheet' type='text/css' media='screen and (max-device-width: 767px)' /> 
```

这适用于大多数设备，但在 Android Firefox 浏览器（虽然奇怪的是不是 Chrome）中，Xperia Z 只能获取桌面站点。

我试过搜索，但似乎没有人在谈论这些新的超高分辨率手机，我应该遵守新的标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-04T16:09:39.453

使用`max-width`而不是`max-device-width`目标`CSS pixels`。

不要忘记[`viewport meta`](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)。具有大量像素的小型设备仍然具有较低的 CSS 像素数，因此它可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:10:09.477

您可以在媒体查询中将宽度与分辨率结合起来。

```
@media screen and (max-device-width: 767px) and (min-resolution: 300dpi) { … } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:00:55.300

我认为您不会在媒体查询中找到所需的内容。手机和平板电脑在分辨率上有很大的交叉。

以下是您可以根据 w3c 查询的媒体功能...

[http://www.w3.org/TR/css3-mediaqueries/#media1](http://www.w3.org/TR/css3-mediaqueries/#media1)

...似乎没有一个是你要找的。

不幸的是，我不知道是否有一个很好的方法来处理这个问题，即使是用户代理也没什么帮助。

# c# - 使用 c# winforms 将文本框值存储到 SQL 数据库中

> ID：16063358
> 
> 赞同：1
> 
> 时间：2013-04-17T14:53:48.433
> 
> 标签：c#, winforms

我正在尝试将选项卡控件中的一组文本框中的值存储到选项卡控件中另一个选项卡上的数据网格视图中，但是代码会引发异常，并显示以下消息“'系统'附近的语法不正确”。

这是我的代码导致错误

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace Windows_8_Login
{
    public partial class Stock : Form
    {
        public Stock()
        {
            InitializeComponent();
        }

        private void Stock_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'loginScreenDataSet7.Stock' table. You can move, or remove it, as needed.
            this.stockTableAdapter1.Fill(this.loginScreenDataSet7.Stock);

        }

        private void button1_Click(object sender, EventArgs e)
        {
            this.Close();
            Form dash = new DashBoard();
            dash.Show();

        }

        private void GenButton_Click(object sender, EventArgs e)
        {
            Random Gen = new Random();
            ProdID.Text = Convert.ToString(Gen.Next(1000000, 9000000));
        }

        private void SaveBtn_Click(object sender, EventArgs e)
        {
            try
           {
                SqlConnection sc = new SqlConnection();
                SqlCommand com = new SqlCommand();
                sc.ConnectionString = ("Data Source=localhost;Initial Catalog=LoginScreen;Integrated Security=True");
                sc.Open();
                com.Connection = sc;
                com.CommandText = ("INSERT INTO Stock (Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) VALUES (" + ProdID.Text + "" + ProdName.Text + "" + ProdCat.Text + "" + ProdSup.Text + "" + ProdCost.Text + "" + ProdPrice1.Text + "" + ProdPrice2 + "" + ProdPrice3.Text + "");
                com.ExecuteNonQuery();
                sc.Close();
           }
            catch (Exception x)
            {
               MessageBox.Show(x.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:58:11.370

您的 com.CommandText 包含一些错误...调试它并获取值！:-) 你没有放在`','`变量之间，你忘了关闭括号......

像那样 ：

```
com.CommandText = (
    "INSERT INTO Stock "
  + "(Prod_ID, Prod_Name, Prod_Cat, Supplier, Cost, Price_1, Price_2, Price_3) "
  + "VALUES ('" 
  + ProdID.Text + "','" + ProdName.Text + "','" + ProdCat.Text + "','" 
  + ProdSup.Text + "','" + ProdCost.Text + "','" + ProdPrice1.Text + "','"
  + ProdPrice2.Text + "','" + ProdPrice3.Text
  + ")"); 
```

但是，您应该使用 SqlParameters。（和换行符）

# jquery - 关于如何在没有页面加载的情况下在 cshtml 中使用 json 的最简单解释？

> ID：16063359
> 
> 赞同：-2
> 
> 时间：2013-04-17T14:53:48.737
> 
> 标签：jquery, json, razor

我已经在网上看了很长时间了。然而，我还没有找到一个很好的指南，说明如何在没有`.cshtml`页面`Json`调用的情况下使用 调用页面。

我的问题是，你知道如何在不重新加载页面的情况下调用`.cshtml`页面的简单易用的指南吗？`Json`

- 更新 -

当我谈论时，`json`我有一个理解，这是以下代码的常用术语

```
function ajax_get_json()
{
    var hr = new XMLHttpRequest();

    hr.open("GET", "CallTime.cshtml", true);
    hr.setRequestHeader("Content-type", "application/json", true);
    hr.onreadystatechange = function ()
    {
        if (hr.readyState == 4 && hr.status == 200)
        {
            var data = JSON.parse(hr.responseText);
            var result = document.getElementById("results");

            result.innerHTML = "";
            for (var obj in data)
            {
                result.innerHTML += data[obj].item + "<br/>";
            }
        }
    }

    hr.send(null);
    result.innerHTML = "requesting...";
}; 
```

但我知道这是一个`ajax`请求`json`格式的呼叫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:55:55.443

这是我遇到的最简单的教程，使用 WebAPI（带有 MVC 项目 + jQuery）：[http ://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/教程你的第一个 web api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

和主站点：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

# opencv - 未能枚举生产树

> ID：16063362
> 
> 赞同：1
> 
> 时间：2013-04-17T14:53:53.530
> 
> 标签：opencv, openni

我正在尝试 OpenNI 示例“openni_capture.cpp”

在我完成本教程之前 [http://seevisionc.blogspot.co.uk/2012/07/compiling-opencv-with-openni-for.html](http://seevisionc.blogspot.co.uk/2012/07/compiling-opencv-with-openni-for.html)

但是因为我正在使用 qt 我不知道我是否做错了什么，我想这是因为 Cmake.txt

当我尝试我得到的示例时： CvCapture_OpenNI::CvCapture_OpenNI : 无法枚举生产树：无法创建任何重新验证类型的节点！../openni_capture 退出，代码为 255

你能帮助我吗？谢谢！

# cassandra - CQL 多范围选择

> ID：16063368
> 
> 赞同：0
> 
> 时间：2013-04-17T14:54:04.207
> 
> 标签：cassandra, cql

我尝试在 cassandra DB 中运行此查询，但无法获得结果：

```
SELECT smth..smthz, else..elsez FROM CF 
```

是否可以在 CQL 中使用多个范围选择表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:33:55.667

不，cassandra 不支持 CASE 查询。您必须在代码中进行操作才能实现该功能

# javascript - Facebook Graph API 调用不再有效（因为 Facebook Cookies）

> ID：16063370
> 
> 赞同：3
> 
> 时间：2013-04-17T14:54:09.010
> 
> 标签：javascript, facebook-graph-api, oauth, cross-browser

我一直在使用 facebook grap 从公共“页面”中提取相册并显示照片，但今天它停止工作（不仅在我的 PC 上，它已被其他人验证）

我一直在没有令牌和任何 SDK 的情况下使用图形 api，只是构建`graph.facebook.com`链接并使用返回的 json。

起初我以为问题只发生在 Chrome 上，但现在我不太确定。我已经确认*欺骗*用户代理没有任何效果，而且我最近发现**删除 Facebook.com cookie 可以解决问题**。

现在，我不能强行删除其他人的 cookie，所以我想要另一个修复，或者至少是一个解释。

图调用看起来像`https://graph.facebook.com/{{albumID}}`

*这是一个例子：* [https ://graph.facebook.com/203416696378870](https://graph.facebook.com/203416696378870)

**收到错误**

```
"error": {
   "message": "An access token is required to request this resource.",
   "type": "OAuthException",
   "code": 104
} 
```

**没有 facebook.com cookie，我得到了预期的输出。**

```
"id": "203416696378870",
"from": {
   "id": "186646504722556",
   "category": "Musician/band",
   ... 
```

**Facebook Cookie 删除前**

![facebook.com 饼干](https://i.stack.imgur.com/J3fAq.png)

我仍然不明白为什么 Facebook cookie 会突然破坏我的代码。

我在 Facebook 的平台更新或 Chrome 版本中找不到任何可以解释这种行为的记录更改。

当然，我不能强行从所有使用我的代码的网站的用户那里删除 cookie，而且我对这显然使它变得多么脆弱感到不满。

**有没有人对这个问题有任何额外的见解，以及 facebook.com cookie 中的具体内容与图形 api 调用有什么关系？**

**有没有办法防止这种情况发生？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:13:15.340

facebook询问访问令牌很奇怪，但是如果您只需要相册中的图片，这对我有用：

```
https://graph.facebook.com/YOUR_ALBUM_ID/photos?fields=picture&limit=500 
```

fields=picture 语句是必须的，它才能正常工作。

你可能会发现这很有用

```
if (empty($_GET['album'])) {

    //get all albums of page
    $graph_url = "https://graph.facebook.com/PressPlayPrague/albums?fields=id,link,name,cover_photo&limit=500";
     $albums = json_decode(file_get_contents($graph_url));
    $counted = sizeof ($albums->data); // get the number of albums for later use

    //output all albums of given page
    for($c=0; $c<$counted; $c++){
    echo ("<div class='wrapper' <a href='?album=".$albums->data[$c]->id."'><div class='stack'><div style='width:180px; height:120px; display:inline-block; background-image:url(https://graph.facebook.com/".$albums->data[$c]->id."/picture?width=300&height=200); background-repeat:no-repeat;'>  </div></div><div class='caption'>".$albums->data[$c]->name."</div></a></div>");
    };

}else{

    //get the album pictures replace the $_GET[album] with specific ID and remove the     if clause to get only one album
    $pic_url = "https://graph.facebook.com/".$_GET[album]."/photos?fields=picture&limit=500";
    $pictures = json_decode(file_get_contents($pic_url));
    $countpic= sizeof ($pictures->data); // get the number of pics for later use
    for($p=0; $p<$countpic; $p++){
    echo ("<img style='width:250px; max-height:167px;'src='https://graph.facebook.com/".$pictures->data[$p]->id."/picture' alt='".$pictures->data[$p]->id."'>");

    };
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:39:51.983

我不知道您如何尝试检索数据，但如果我使用 getJSON，它对我有用：

```
<a id="facebook-graph-link">TEST FACEBOOK</a>
<script>
 $(function(){
    $( "#facebook-graph-link" ).on( "click", function(e) {
        e.preventDefault();
        var url = "http://graph.facebook.com/203416696378870";
        $.getJSON( url, function( data ) {
            console.log(data);
        });
    });
 });
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:33:47.973

我删除了所有 Cookie，之后我无法调用图表链接，

接下来我去 facebook 网站，切换到我的页面帐户，重新加载图形链接，它工作

但是从我的网络服务器调用脚本根本不起作用

IE10，FF20，最新的chrome，结果都一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T11:31:48.360

更改IP地址终于解决了所有问题，根本不知道是否需要删除cookie，但是在IP地址更改后，所有浏览器都运行良好

顺便提一句。直接调用图表链接仍然会导致有趣的事情，IE 说找不到页面，safari 誓言，Firefox 显示数据，所有网站包括相册都很好，我想用于直接图表链接的同一张相册

# visual-studio-lightswitch - 登录后 Lightswitch 在 Trace.axd 中得到 401

> ID：16063371
> 
> 赞同：1
> 
> 时间：2013-04-17T14:54:14.797
> 
> 标签：visual-studio-lightswitch

我有一个 Lightswitch OOB 桌面应用程序。用户登录后，我的 trace.axd 中出现 401 错误的原因是什么？即使在用户登录并且 trace.axd 显示后，似乎任何与数据相关的操作都会导致弹出登录窗口

13 4/17/2013 10:52:33 AM ApplicationData.svc/Microsoft_LightSwitch_GetCanInformation 401 GET 查看详情

# sql - SQL查询将行转换为列

> ID：16063377
> 
> 赞同：0
> 
> 时间：2013-04-17T14:54:29.370
> 
> 标签：sql, oracle11g

我使用的是Oracle 11g，我有三个表，其结构如下

```
 Main_id   Sub_id  col1   col2 
   123       123     blah   blah 
```

Main_id 到 Sub_id 是一对一的映射

在另一张桌子上我有

```
 id  sub_id type   
  1  123    a
  2  123    b 
```

在这个表中，一个 sub_id 可以包含多个类型，并且

在第三张桌子上，我每种类型的地址都与此类似

```
 Type     Name    address state city zip
    a        x1        a1    s1    c1  z1
    b        x2        a2    s2    c2  z2 
```

对于任何 main_id/sub_id，我最多可以有三种类型的 a/b/c。

我的问题是，我能否使用枢轴/案例语句通过以下列来获得最终结果。在给定 sub_id/main_id 参数的情况下，我基本上需要一个只有一行的查询。

```
Main_id   Sub_id   a_name a_address a_state a_city a_zip b_name b_address b_city b_zip....c_zip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:07:09.533

请参阅[Oracle SQL - 将 N 行的列值转换为 1 行中的 N 列](https://stackoverflow.com/questions/9319997/oracle-sql-convert-n-rows-column-values-to-n-columns-in-1-row)

# php - 在 PHP 中拆分字符串

> ID：16063382
> 
> 赞同：0
> 
> 时间：2013-04-17T14:54:37.113
> 
> 标签：php

我有一个字符串，它由数据组成，并带有各种运算符来分隔它。我需要根据一些要求拆分数据。我正在开发一个测验应用程序。我需要显示问题及其选项。在*第 1 页上*，我需要显示一个问题及其选项（根据该问题的选项数量，动态地制作那么多单选按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:02:36.560

在 PHP 中拆分字符串：

```
$split = explode('|', $string); // Change '|' for your split case.
$first = $split[0];
$second = $split[1];
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:24:25.060

虽然爆炸通常就足够了，但使用多个分隔符，请尝试 preg_split：

```
$chars = preg_split('/@|\|/', 'aaa@bbb|ccc', -1, PREG_SPLIT_NO_EMPTY);
print_r($chars);

Array ( [0] => aaa [1] => bbb [2] => ccc ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:33:08.420

将此添加到第 1 页：

```
session_start();
$_SESSION['finalString'] = $finalstring; 
```

将此添加到 $finalstring 正在传递给的页面：

```
$finalstring = $_SESSION['finalString'];
$array = explode('@', $finalstring);
foreach($array as $item)
{
   echo $item.'<br />';
}

//session_close(); 
```

希望这可以帮助！

# c++ - 尝试在 Qt 中创建菜单时出错

> ID：16063383
> 
> 赞同：1
> 
> 时间：2013-04-17T14:54:41.153
> 
> 标签：c++, qt

我收到错误消息：

> 不能在没有对象的情况下调用成员函数 'QMenuBar* QMainWindow::menuBar() const'

在这个功能中，任何想法为什么？

```
void TextEditor::createMenu(){
    menu = new QMenu(tr("&TextEditor"), this);
    QMainWindow::menuBar()->addMenu(menu);
    menu->addAction(tr("&Bold"), this, SLOT(setBold()), tr("Alt+B"));
    menu->addAction(tr("&Underline"), this, SLOT(setUnderline()), tr("ALT+U"));
    menu->addAction(tr("&Italics"), this, SLOT(setItalics()), tr("Alt+I"));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:06:50.477

问题在这里：

```
QMainWindow::menuBar()->addMenu(menu);
^^^^^^^^^^^^^ 
```

方法`menuBar()`不是静态方法，没有对象就不能调用它。你必须从一个对象调用它：

```
main_window_object->menuBar()->addMenu(menu);
... or ...
this->menuBar()->addMenu(menu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:12:15.247

如果您的 TextEditor 类继承自 QMainWindow，您可以这样调用它。

# php - 在 PHP 邮件功能中包含订单确认邮件

> ID：16063387
> 
> 赞同：0
> 
> 时间：2013-04-17T14:54:48.857
> 
> 标签：php, function, email, include

我需要在 PHP 上生成订单确认电子邮件。我有一个包含确认电子邮件的 php 文件（因为它有一些变量应该在加载到处理订单的主 php 时打印出来。它看起来像这样：

```
**orderConf.php**
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
</body>
Dear <?php echo $firstName." ".$lastName; ?> .....
.....
</body></html> 
```

然后在处理订单的主 php 中，我有邮件函数，我在其中放置了这个变量： **orderProcessing.php**

```
$message = include ("orderConf.php"); 
```

这是正确的方法吗？或者我应该以不同的方式撰写我的确认电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:02:39.780

[这是HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)可以的少数情况之一

```
<?php
$message - <<<HERE
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
</body>
Dear $firstName $lastName
.....
</body></html>
HERE; 
```

那么就

```
 include ("orderConf.php"); 
```

并有你的`$message`变量。

另一种选择是使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:03:54.177

这样，您只需输出 orderConf.php 的内容。该文件应返回该消息。

```
<?php
return <<<MSG <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
</body>
Dear <?php echo $firstName." ".$lastName; ?> .....
.....
</body></html>
MSG; 
```

或者你可以使用 ob_ 函数。

```
<?php
ob_start();
include('orderConif.php');
$message = ob_get_contents();
ob_end_clean(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T15:06:04.903

您不能将文件包含到这样的变量中。您必须使用 file_get_contents()。然而，IMO 这不是最好的方法。相反，您应该将消息加载到变量中，然后使用相同的变量发送电子邮件。下面的例子：

```
$body = '<div>Dear' . $firstName . ' ' . $lastName . '... rest of your message</div>'; 
```

确保在 $body 中使用内联样式。表格可能也是一个好主意，因为它们在电子邮件中效果更好。

然后你所做的就是使用：

```
$to = recepients address;
$subject = subject;
$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
mail($to, $subject, '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><body>' . $body . '</body></html>', $headers); 
```

# spring - Grails - 覆盖 resources.groovy 中的 bean 属性值

> ID：16063391
> 
> 赞同：4
> 
> 时间：2013-04-17T14:55:08.233
> 
> 标签：spring, grails, groovy

`messageSource`Grails i18n 插件中[定义](https://github.com/grails/grails-core/blob/master/grails-plugin-i18n/src/main/groovy/org/codehaus/groovy/grails/plugins/i18n/I18nGrailsPlugin.groovy#L71)了一个bean，因此定义如下：

```
messageSource(PluginAwareResourceBundleMessageSource) {
  basenames = baseNames.toArray()
  fallbackToSystemLocale = false
  pluginManager = manager
  ....
} 
```

是否可以仅覆盖`fallbackToSystemLocale`我的 resources.groovy 中的值的配置，例如：

```
messageSource {
    fallbackToSystemLocale = true
} 
```

以上不起作用，我收到一个错误：“使用名称'messageSource'创建bean时出错：bean定义是抽象的”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:18:48.377

有什么理由不简单地更新 bean`BootStrap.groovy`吗？

```
class BootStrap {
    def def messageSource
    def init = { servletContext ->
        messageSource.fallbackToSystemLocale = true
    }
} 
```

如果你想在 BootStrap 运行之前修改 bean，你可以使用`BeanPostProcessor`as in [this blog post](http://www.tothenew.com/blog/overriding-properties-in-a-spring-bean-with-beanfactorypostprocessor/)。

src/groovy/yourpkg/CustomBeanPostProcessor：

```
import org.springframework.beans.factory.config.BeanPostProcessor

class CustomBeanPostProcessor implements BeanPostProcessor{

    @Override
    Object postProcessBeforeInitialization(Object bean, String beanName) {
        return bean
    }

    @Override
    Object postProcessAfterInitialization(Object bean, String beanName) {
        if(beanName == 'messageSource') {
            bean.setFallbackToSystemLocale = true
        }
        return bean
    }
} 
```

资源.groovy：

```
beans = {
    customBeanPostProcessor(CustomBeanPostProcessor)
} 
```

# visual-studio-2010 - 当我“转到定义”时，Visual Studio 2010（无响应）

> ID：16063393
> 
> 赞同：3
> 
> 时间：2013-04-17T14:55:13.383
> 
> 标签：visual-studio-2010

我已经遇到这个问题大约一周了，当我使用解决方案资源管理器打开文件或按 F12 到“转到定义”时，Visual Studio 2010 Premium SP1Rel 有时会冻结并变得完全无响应。

我只为扩展安装了 DevExpress Tools、Ghost Doc 和 Productivity Power Tools，并且我使用 sourcegear vault 进行源代码控制。

我在任务管理器中查看了该过程，它变得无响应并且 RAM 使用量缓慢攀升了大约 400k，然后立即回落到原来的位置，或者更高一点。它一遍又一遍地这样做，我让它使用的内存在大约 10 分钟内高达 1,300,000 KB，等待它是否会回来。

这种行为只发生在我目前正在开发的这个特定的 ASP.NET 解决方案上。所有文件的总大小约为 127 MB，如果这能告诉您解决方案的大小。

该行为在尝试将测试项目添加到解决方案后开始。我尝试在解决方案中的方法上使用右键单击-> 创建单元测试，然后它第一次冻结。尝试将此文件添加到解决方案时，它看起来像冻结了。

我强制关闭VS并重新打开解决方案并尝试打开文件并立即再次冻结。之后我再次尝试，它最终打开了文件，但现在它会在我打开其他文件时随机冻结。

以前有没有人在 Visual Studio 中处理过这样的事情？你怎么修好它的？你对我应该尝试什么有什么建议吗？您还需要我获取其他信息吗？

# javascript - 原型继承 - 编写

> ID：16063394
> 
> 赞同：137
> 
> 时间：2013-04-17T14:55:16.360
> 
> 标签：javascript, inheritance, prototype

所以我有这两个例子，来自 javascript.info：

示例 1：

```
var animal = {
  eat: function() {
    alert( "I'm full" )
    this.full = true
  }
}

var rabbit = {
  jump: function() { /* something */ }
}

rabbit.__proto__ = animal 

rabbit.eat() 
```

示例 2：

```
function Hamster() {  }
Hamster.prototype = {
  food: [],
  found: function(something) {
    this.food.push(something)
  }
}

// Create two speedy and lazy hamsters, then feed the first one
speedy = new Hamster()
lazy = new Hamster()

speedy.found("apple")
speedy.found("orange")

alert(speedy.food.length) // 2
alert(lazy.food.length) // 2 (!??) 
```

从示例 2 开始：当代码到达 时`speedy.found`，它在 中找不到任何`found`属性`speedy`，因此它爬到原型并在那里进行更改。这就是为什么`food.length`两只仓鼠是一样的，换句话说，它们的胃是一样的。

据我了解，当编写并添加一个不存在的新属性时，解释器将沿着原型链向上直到找到该属性，然后更改它。

但是在示例 1 中发生了其他事情：
我们运行`rabbit.eat`，它改变了`rabbit.full`。`full`属性无处可寻，所以它应该沿着原型链上升到（对象？？），好吧，我不确定这里会发生什么。在这个例子中， 的属性`full`被`rabbit`创建和更改，而在第一个例子中，它沿着原型链上升，因为它找不到属性。

我很困惑，不明白为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-04-17T15:08:37.240

**构造函数介绍**

您可以使用函数作为构造函数来创建对象，如果构造函数名为 Person，则使用该构造函数创建的对象是 Person 的实例。

```
var Person = function(name){
  this.name = name;
};
Person.prototype.walk=function(){
  this.step().step().step();
};
var bob = new Person("Bob"); 
```

Person 是构造函数。当您使用 Person 创建实例时，您必须使用 new 关键字：

```
var bob = new Person("Bob");console.log(bob.name);//=Bob
var ben = new Person("Ben");console.log(ben.name);//=Ben 
```

属性/成员`name`是特定于实例的，对于 bob 和 ben 是不同的

该成员`walk`是 Person.prototype 的一部分，并且为所有实例共享 bob 和 ben 是 Person 的实例，因此它们共享 walk 成员 (bob.walk===ben.walk)。

```
bob.walk();ben.walk(); 
```

因为无法直接在 bob 上找到 walk()，JavaScript 将在 Person.prototype 中查找它，因为这是 bob 的构造函数。如果在那里找不到它，它将在 Object.prototype 上查找。这称为原型链。继承的原型部分是通过加长这条链来完成的；例如 bob => Employee.prototype => Person.prototype => Object.prototype（稍后会详细介绍继承）。

即使 bob、ben 和所有其他创建的 Person 实例共享 walk，该函数在每个实例中的行为也会有所不同，因为它在 walk 函数中使用`this`. 的值`this`将是调用对象；现在假设它是当前实例，因此`bob.walk()`“this”将是 bob。（更多关于“this”和稍后的调用对象）。

如果本正在等待红灯，而鲍勃正在等待绿灯；然后你会在 ben 和 bob 上调用 walk() ，显然 ben 和 bob 会发生一些不同的事情。

当我们执行类似的操作时，会发生跟踪成员`ben.walk=22`，即使 bob 和 ben`walk`将22*分配*给 ben.walk 也不会影响 bob.walk。这是因为该语句将`walk`直接创建一个名为 ben 的成员并为其分配值 22。将有 2 个不同的 walk 成员：ben.walk 和 Person.prototype.walk。

当要求 bob.walk 时，您将获得 Person.prototype.walk 函数，因为`walk`在 bob 上找不到。然而，请求 ben.walk 会得到值 22，因为成员 walk 是在 ben 上创建的，并且由于 JavaScript 发现 walk on ben，它不会在 Person.prototype 中查找。

当使用带有 2 个参数的 Object.create 时，Object.defineProperty 或 Object.defineProperties 阴影的工作方式有点不同。更多信息在[这里](https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch5.md#setting--shadowing-properties)。

**更多关于原型**

一个对象可以通过使用原型从另一个对象继承。您可以使用任何其他对象设置任何对象的原型`Object.create`。在构造函数介绍中我们已经看到，如果在对象上找不到成员，那么 JavaScript 会在 prototpe 链中查找它。

在前面的部分中，我们已经看到重新分配来自实例原型（ben.walk）的成员将影响该成员（在 ben 上创建 walk 而不是更改 Person.prototype.walk）。

如果我们不重新分配而是改变成员怎么办？变异是（例如）更改对象的子属性或调用将更改对象值的函数。例如：

```
var o = [];
var a = o;
a.push(11);//mutate a, this will change o
a[1]=22;//mutate a, this will change o 
```

下面的代码通过改变成员来演示原型成员和实例成员之间的区别。

```
var person = {
  name:"default",//immutable so can be used as default
  sayName:function(){
    console.log("Hello, I am "+this.name);
  },
  food:[]//not immutable, should be instance specific
         //  not suitable as prototype member
};
var ben = Object.create(person);
ben.name = "Ben";
var bob = Object.create(person);
console.log(bob.name);//=default, setting ben.name shadowed the member
                      //  so bob.name is actually person.name
ben.food.push("Hamburger");
console.log(bob.food);//=["Hamburger"], mutating a shared member on the
// prototype affects all instances as it changes person.food
console.log(person.food);//=["Hamburger"] 
```

上面的代码显示 ben 和 bob 从 person 共享成员。只有一个人，它被设置为 bob 和 ben 的原型（person 被用作原型链中的第一个对象，用于查找实例上不存在的请求成员）。上面代码的问题是 bob 和 ben 应该有自己的`food`成员。这就是构造函数的用武之地。它用于创建特定于实例的成员。您还可以将参数传递给它以设置这些实例特定成员的值。

下面的代码展示了构造函数的另一种实现方式，语法不同但思想相同：

1.  定义一个对象，该对象的成员对于许多实例都是相同的（人是 bob 和 ben 的蓝图，可以是 jilly、marie、clair ...）
2.  定义对于实例（bob 和 ben）应该是唯一的实例特定成员。
3.  创建一个运行步骤 2 中的代码的实例。

使用构造函数，您将在下面的代码中的步骤 2 中设置原型，我们在步骤 3 中设置原型。

在这段代码中，我从原型和食物中删除了名称，因为无论如何在创建实例时您很可能会立即隐藏它。Name 现在是特定于实例的成员，在构造函数中设置了默认值。因为食物成员也从原型移动到实例特定成员，所以在将食物添加到 ben 时不会影响 bob.food。

```
var person = {
  sayName:function(){
    console.log("Hello, I am "+this.name);
  },
  //need to run the constructor function when creating
  //  an instance to make sure the instance has
  //  instance specific members
  constructor:function(name){
    this.name = name || "default";
    this.food = [];
    return this;
  }
};
var ben = Object.create(person).constructor("Ben");
var bob = Object.create(person).constructor("Bob");
console.log(bob.name);//="Bob"
ben.food.push("Hamburger");
console.log(bob.food);//=[] 
```

您可能会遇到类似的模式，这些模式更强大，有助于创建对象和定义对象。

**遗产**

下面的代码展示了如何继承。任务与之前的代码基本相同，只是多了一点

1.  定义对象的实例特定成员（函数 Hamster 和 RussionMini）。
2.  设置继承的原型部分（RussionMini.prototype = Object.create(Hamster.prototype)）
3.  定义可以在实例之间共享的成员。（Hamster.prototype 和 RussionMini.prototype）
4.  创建一个运行步骤 1 中的代码的实例，并为继承的对象让它们也运行父代码（Hamster.apply(this,arguments);）

使用一些人称之为“经典继承”的模式。如果您对语法感到困惑，我很乐意解释更多或提供不同的模式。

```
function Hamster(){
 this.food=[];
}
function RussionMini(){
  //Hamster.apply(this,arguments) executes every line of code
  //in the Hamster body where the value of "this" is
  //the to be created RussionMini (once for mini and once for betty)
  Hamster.apply(this,arguments);
}
//setting RussionMini's prototype
RussionMini.prototype=Object.create(Hamster.prototype);
//setting the built in member called constructor to point
// to the right function (previous line has it point to Hamster)
RussionMini.prototype.constructor=RussionMini;
mini=new RussionMini();
//this.food (instance specic to mini)
//  comes from running the Hamster code
//  with Hamster.apply(this,arguments);
mini.food.push("mini's food");
//adding behavior specific to Hamster that will still be
//  inherited by RussionMini because RussionMini.prototype's prototype
//  is Hamster.prototype
Hamster.prototype.runWheel=function(){console.log("I'm running")};
mini.runWheel();//=I'm running 
```

**Object.create 设置继承的原型部分**

这是有关[Object.create](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)的文档，它基本上返回第二个参数（在 polyfil 中不支持），第一个参数作为返回对象的原型。

如果没有给出第二个参数，它将返回一个带有第一个参数的空对象，用作返回对象的原型（返回对象的原型链中使用的第一个对象）。

有些人会将 RussionMini 的原型设置为仓鼠实例 (RussionMini.prototype = new Hamster())。这是不可取的，因为即使它完成了相同的操作（RussionMini.prototype 的原型是 Hamster.prototype），它也将 Hamster 实例成员设置为 RussionMini.prototype 的成员。所以 RussionMini.prototype.food 将存在，但它是一个共享成员（还​​记得“更多关于原型”中的 bob 和 ben 吗？）。创建 RussionMini 时，食物成员将被遮蔽，因为仓鼠代码会`Hamster.apply(this,arguments);`依次运行，`this.food = []`但任何仓鼠成员仍将是 RussionMini.prototype 的成员。

另一个原因可能是要创建仓鼠，需要对可能尚不可用的传递参数进行大量复杂的计算，同样您可以传递虚拟参数，但这可能会使您的代码不必要地复杂化。

**扩展和覆盖父函数**

有时`children`需要扩展`parent`功能。

您希望“孩子”（=RussionMini）做一些额外的事情。当 RussionMini 可以调用仓鼠代码做某事然后做一些额外的事情时，您不需要将仓鼠代码复制并粘贴到 RussionMini。

在下面的示例中，我们假设仓鼠每小时可以跑 3 公里，但俄罗斯迷你只能跑一半的速度。我们可以在 RussionMini 中对 3/2 进行硬编码，但如果要更改此值，我们在代码中有多个需要更改的地方。下面是我们如何使用 Hamster.prototype 来获取父级（Hamster）的速度。

```
var Hamster = function(name){
 if(name===undefined){
   throw new Error("Name cannot be undefined");
 }
 this.name=name;
}
Hamster.prototype.getSpeed=function(){
  return 3;
}
Hamster.prototype.run=function(){
  //Russionmini does not need to implement this function as
  //it will do exactly the same as it does for Hamster
  //But Russionmini does need to implement getSpeed as it
  //won't return the same as Hamster (see later in the code) 
  return "I am running at " + 
    this.getSpeed() + "km an hour.";
}

var RussionMini=function(name){
  Hamster.apply(this,arguments);
}
//call this before setting RussionMini prototypes
RussionMini.prototype = Object.create(Hamster.prototype);
RussionMini.prototype.constructor=RussionMini;

RussionMini.prototype.getSpeed=function(){
  return Hamster.prototype
    .getSpeed.call(this)/2;
}    

var betty=new RussionMini("Betty");
console.log(betty.run());//=I am running at 1.5km an hour. 
```

缺点是您对 Hamster.prototype 进行了硬编码。可能有一些模式会给您带来与`super`Java 一样的优势。

我见过的大多数模式要么在继承级别超过 2 级时中断（Child => Parent => GrandParent），要么通过[闭包](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)实现 super 使用更多资源。

要覆盖 Parent (=Hamster) 方法，您可以执行相同的操作，但不要执行 Hamster.prototype.parentMethod.call(this,....

**this.constructor**

构造函数属性包含在 JavaScript 的原型中，您可以更改它，但它应该指向构造函数。所以`Hamster.prototype.constructor`应该指向仓鼠。

如果在设置继承的原型部分之后，您应该让它再次指向正确的函数。

```
var Hamster = function(){};
var RussionMinni=function(){
   // re use Parent constructor (I know there is none there)
   Hamster.apply(this,arguments);
};
RussionMinni.prototype=Object.create(Hamster.prototype);
console.log(RussionMinni.prototype.constructor===Hamster);//=true
RussionMinni.prototype.haveBaby=function(){
  return new this.constructor();
};
var betty=new RussionMinni();
var littleBetty=betty.haveBaby();
console.log(littleBetty instanceof RussionMinni);//false
console.log(littleBetty instanceof Hamster);//true
//fix the constructor
RussionMinni.prototype.constructor=RussionMinni;
//now make a baby again
var littleBetty=betty.haveBaby();
console.log(littleBetty instanceof RussionMinni);//true
console.log(littleBetty instanceof Hamster);//true 
```

**带有混合的“多重继承”**

有些东西最好不要继承，如果 Cat 可以移动，那么 Cat 不应该从 Movable 继承。猫不是可移动的，而是猫可以移动。在基于类的语言中，Cat 必须实现 Movable。在 JavaScript 中，我们可以在这里定义 Movable 并定义实现，Cat 可以覆盖、扩展它或者我们它的默认实现。

对于 Movable，我们有特定于实例的成员（如`location`）。而且我们有不是特定于实例的成员（例如函数 move()）。创建实例时，将通过调用 mxIns（由 mixin 辅助函数添加）来设置实例特定成员。原型成员将使用 mixin 辅助函数从 Movable.prototype 中一一复制到 Cat.prototype 上。

```
var Mixin = function Mixin(args){
  if(this.mixIns){
    i=-1;len=this.mixIns.length;
    while(++i<len){
        this.mixIns[i].call(this,args);
      }
  }  
};
Mixin.mix = function(constructor, mix){
  var thing
  ,cProto=constructor.prototype
  ,mProto=mix.prototype;
  //no extending, if multiple prototypes
  // have members with the same name then use
  // the last
  for(thing in mProto){
    if(Object.hasOwnProperty.call(mProto, thing)){
      cProto[thing]=mProto[thing];
    }
  }
  //instance intialisers
  cProto.mixIns = cProto.mixIns || [];
  cProto.mixIns.push(mix);
};
var Movable = function(args){
  args=args || {};
  //demo how to set defaults with truthy
  // not checking validaty
  this.location=args.location;
  this.isStuck = (args.isStuck===true);//defaults to false
  this.canMove = (args.canMove!==false);//defaults to true
  //speed defaults to 4
  this.speed = (args.speed===0)?0:(args.speed || 4);
};
Movable.prototype.move=function(){
  console.log('I am moving, default implementation.');
};
var Animal = function(args){
  args = args || {};
  this.name = args.name || "thing";
};
var Cat = function(args){
  var i,len;
  Animal.call(args);
  //if an object can have others mixed in
  //  then this is needed to initialise 
  //  instance members
  Mixin.call(this,args);
};
Cat.prototype = Object.create(Animal.prototype);
Cat.prototype.constructor = Cat;
Mixin.mix(Cat,Movable);
var poochie = new Cat({
  name:"poochie",
  location: {x:0,y:22}
});
poochie.move(); 
```

上面是一个简单的实现，它用最后混合的任何混合替换相同的命名函数。

**这个变量**

在所有示例代码中，您将看到`this`引用当前实例。

this 变量实际上是指调用对象，它指的是函数之前的对象。

要澄清，请参阅以下代码：

```
theInvokingObject.thefunction(); 
```

this 引用错误对象的实例通常是在附加事件侦听器、回调或超时和间隔时。在接下来的两行代码`pass`中，我们没有调用它。传递函数是：`someObject.aFunction`并调用它是：`someObject.aFunction()`。该`this`值不是指在其上声明函数的对象，而是在`invokes`它所声明的对象上。

```
setTimeout(someObject.aFuncton,100);//this in aFunction is window
somebutton.onclick = someObject.aFunction;//this in aFunction is somebutton 
```

要`this`在上述情况下引用 someObject ，您可以直接传递[闭包](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)而不是函数：

```
setTimeout(function(){someObject.aFuncton();},100);
somebutton.onclick = function(){someObject.aFunction();}; 
```

我喜欢在原型上定义返回闭包函数的函数，以便对[闭](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)[包](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)范围中包含的变量进行精细控制。

```
var Hamster = function(name){
  var largeVariable = new Array(100000).join("Hello World");
  // if I do 
  // setInterval(function(){this.checkSleep();},100);
  // then largeVariable will be in the closure scope as well
  this.name=name
  setInterval(this.closures.checkSleep(this),1000);
};
Hamster.prototype.closures={
  checkSleep:function(hamsterInstance){
    return function(){
      console.log(typeof largeVariable);//undefined
      console.log(hamsterInstance);//instance of Hamster named Betty
      hamsterInstance.checkSleep();
    };
  }
};
Hamster.prototype.checkSleep=function(){
  //do stuff assuming this is the Hamster instance
};

var betty = new Hamster("Betty"); 
```

**传递（构造函数）参数**

当 Child 调用 Parent ( `Hamster.apply(this,arguments);`) 时，我们假设 Hamster 以相同的顺序使用与 RussionMini 相同的参数。对于调用其他函数的函数，我通常使用另一种方式来传递参数。

我通常将一个对象传递给一个函数，并让该函数根据需要进行变异（设置默认值），然后该函数会将其传递给另一个执行相同操作的函数，依此类推。这是一个例子：

```
//helper funciton to throw error
function thowError(message){
  throw new Error(message)
};
var Hamster = function(args){
  //make sure args is something so you get the errors
  //  that make sense to you instead of "args is undefined"
  args = args || {};
  //default value for type:
  this.type = args.type || "default type";
  //name is not optional, very simple truthy check f
  this.name = args.name || thowError("args.name is not optional");
};
var RussionMini = function(args){
  //make sure args is something so you get the errors
  //  that make sense to you instead of "args is undefined"
  args = args || {};
  args.type = "Russion Mini";
  Hamster.call(this,args);
};
var ben = new RussionMini({name:"Ben"});
console.log(ben);// Object { type="Russion Mini", name="Ben"}
var betty = new RussionMini();//Error: args.name is not optional 
```

这种在函数链中传递参数的方式在很多情况下都很有用。当您正在编写可以计算总和的代码并且稍后您想将该总和重新计算为某种货币时，您可能需要更改许多函数来传递货币值。您可以扩大货币价值的范围（甚至是全球性的`window.currency='USD'`），但这是解决它的不好方法。

通过传递一个对象，您可以将货币添加到`args`函数链中可用的任何时候，并在需要时改变/使用它，而无需更改其他函数（明确地必须在函数调用中传递它）。

**私有变量**

JavaScript 没有私有修饰符。

我同意以下内容： http: [//blog.millermedeiros.com/a-case-against-private-variables-and-functions-in-javascript/](http://blog.millermedeiros.com/a-case-against-private-variables-and-functions-in-javascript/)并且个人没有使用它们。

您可以通过命名成员`_aPrivate`或将所有私有变量放在名为`_`.

您可以通过[闭包](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)实现私有成员，但实例特定的私有成员只能由不在原型上的函数访问。

不将私有实现为闭包会泄漏实现，并使您或用户能够扩展您的代码以使用不属于您的公共 API 的成员。这可能是好的也可能是坏的。

这很好，因为它使您和其他人能够轻松地模拟某些成员以进行测试。它使其他人有机会轻松改进（修补）您的代码，但这也很糟糕，因为无法保证您的代码的下一个版本具有相同的实现和/或私有成员。

通过使用闭包，您不会给其他人选择，而是通过使用文档的命名约定。这不是 JavaScript 特有的，在其他语言中，您可以决定不使用私有成员，因为您相信其他人知道他们在做什么，并让他们选择做他们想做的事（涉及风险）。

如果您仍然坚持使用私人，那么[以下](https://stackoverflow.com/a/21800194/1641941)模式可能会有所帮助。它虽然没有实现私有，但实现了受保护。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-17T14:58:57.687

**不会**为对象的每个实例实例化原型。

```
Hamster.prototype.food = [] 
```

Hamster 的每个实例都将共享该数组

如果您需要（并且在这种情况下确实需要）为每个仓鼠提供单独的食物集合实例，则需要在实例上创建属性。例如：

```
function Hamster() {
  this.food = [];
} 
```

要回答您关于示例 1 的问题，如果它在原型链中的任何位置都找不到该属性，它会在目标对象上创建该属性。

# c++ - 为什么 SetupDiEnumDriverInfo 为我的驱动程序提供两个版本号

> ID：16063402
> 
> 赞同：6
> 
> 时间：2013-04-17T14:55:31.180
> 
> 标签：c++, c, windows, driver

我正在尝试以编程方式获取驱动程序的版本号。似乎是通过使用`SetupDiEnumDriverInfo`来获取`SP_DRVINFO_DATA`结构并检查`DriverVersion field`.

以下代码有效，但为同一驱动程序返回两个不同版本。我的设备是一个自定义 USB 设备，只有一个 .sys 文件。只有一台设备连接到我的机器。我指定`DIGCF_PRESENT`只查询当前连接设备的驱动程序。

```
int main(void)
{
    // Get the "device info set" for our driver GUID
    HDEVINFO devInfoSet = SetupDiGetClassDevs(
                              &GUID_DEVINTERFACE_USBSPI, NULL, NULL,
                              DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);

    // Cycle through all devices currently present
    for (int i = 0; ; i++)
    {
        // Get the device info for this device
        SP_DEVINFO_DATA devInfo;
        devInfo.cbSize = sizeof(SP_DEVINFO_DATA);
        if (!SetupDiEnumDeviceInfo(devInfoSet, i, &devInfo))
            break;

        // Build a list of driver info items that we will retrieve below
        if (!SetupDiBuildDriverInfoList(devInfoSet, 
                                        &devInfo, SPDIT_COMPATDRIVER))
            return -1; // Exit on error

        // Get all the info items for this driver 
        // (I don't understand why there is more than one)
        for (int j = 0; ; j++)
        {
            SP_DRVINFO_DATA drvInfo;
            drvInfo.cbSize = sizeof(SP_DRVINFO_DATA);
            if (!SetupDiEnumDriverInfo(devInfoSet, &devInfo, 
                                       SPDIT_COMPATDRIVER, j, &drvInfo))
                break;

            printf("Driver version is %08x %08x\n", 
                   (unsigned)(drvInfo.DriverVersion >> 32), 
                   (unsigned)(drvInfo.DriverVersion & 0xffffffffULL));
        }
    }

    SetupDiDestroyDeviceInfoList(devInfoSet);

    return 0;
} 
```

在我的机器上打印：

```
Driver version is 00000000 000015d3
Driver version is 00020004 00000000 
```

在朋友的机器上，它打印：

```
Driver version is 00020004 00000000
Driver version is 00020004 00000000 
```

第二行匹配设备管理器报告的数字。

免责声明：我之前问过一个[类似的问题](https://stackoverflow.com/questions/16032789/how-do-i-get-the-version-of-a-driver-on-windows-from-c)。这是一个关于为什么 SetupDiEnumDriverInfo 返回多个驱动程序版本的新问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-20T21:57:57.953

编写代码时，将输出所有可能的驱动程序。尝试执行以下操作以仅过滤已安装的驱动程序：

```
SP_DEVINSTALL_PARAMS InstallParams;
if ( !SetupDiGetDeviceInstallParams( devInfoSet, &devInfo, &InstallParams ) )
{
   //Error
}
else
{
   InstallParams.FlagsEx |= DI_FLAGSEX_INSTALLEDDRIVER;
   if ( !SetupDiSetDeviceInstallParams( devInfoSet, &devInfo, &InstallParams) )
   {
      //Errror
   }
} 
```

我在[http://doxygen.reactos.org/df/db2/dll_2win32_2devmgr_2misc_8c_a1cd0b33c1785392a37689433dc99e482.html找到了这个](http://doxygen.reactos.org/df/db2/dll_2win32_2devmgr_2misc_8c_a1cd0b33c1785392a37689433dc99e482.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-07T21:13:42.953

我发现解决方案非常复杂：SetupDiBuildDriverInfoList、SetupDiEnumDriverInfo、SetupDiGetDeviceInstallParams、SetupDiSetDeviceInstallParams。

尽管安装了多个驱动程序，但还有另一个选项可以仅获取当前正在使用的驱动程序的版本。

和

```
SetupDiGetDeviceRegistryProperty(devInfoSet, &devInfo, SPDRP_DRIVER, 
                                 NULL, (BYTE*)UnicodeBuf, BufferSize, NULL); 
```

我在注册表中获取驱动程序路径，如下所示：

```
"{4D36E978-E325-11CE-BFC1-08002BE10318}\0000" 
```

我将其加载到变量 s_DriverPath 中，然后直接从 HKEY_LOCAL_MACHINE 读取驱动程序版本：

```
CString s_RegPath = L"SYSTEM\\CurrentControlSet\\Control\\Class\\" + s_DriverPath; 
```

[![注册表中的驱动程序信息](https://i.stack.imgur.com/0taon.png)](https://i.stack.imgur.com/0taon.png)

“DriverVersion”键返回当前使用的驱动程序的版本。当您将驱动程序更新到较新版本时，Windows 会自动调整所有注册表项。所以这样你总能得到当前使用的驱动程序版本。

您可以阅读有关驱动程序的更多信息。条目“DriverDateData”是 8 个字节，其中包含驱动程序日期作为 FILETIME。所有这些信息都来自 INF 文件。

这适用于 Windows XP 到 Windows 10。

# c# - SQL Like 条件不会显示我的搜索数据 C# 和 Ms Access

> ID：16063406
> 
> 赞同：0
> 
> 时间：2013-04-17T14:55:38.663
> 
> 标签：c#, sql, winforms, ms-access, oledb

我尝试通过 MS Access (SELECT mname, mcellno WHERE mcellno LIKE '0922*') 进行查询，结果显示我想要的数据。虽然这个

```
 private Int32 getMemberNo()
    {
        con.ConnectionString = db.konek();
        String sql = "SELECT COUNT(*) AS x FROM members";
        Int32 count = 0;
        try
        {
            con.Open();
            OleDbCommand cmd = new OleDbCommand(sql, con);
            OleDbDataReader rdr = cmd.ExecuteReader();
            if (rdr.Read())
            {
                count = Convert.ToInt32(rdr["x"].ToString());
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error: " + ex);
        }
        finally
        {
            con.Close();
        }
        return count;
    }

    public String[,] displayMobilePrefix() //THIS FUNCTION
    {
        con.ConnectionString = db.konek();
        String sql = "SELECT mname, mcellno FROM members WHERE mcellno LIKE '" + @mcellno + "*'";
        int count = this.getMemberNo();
        String[,] ars = new String[2, count];
        try
        {
            con.Open();
            OleDbCommand cmd = new OleDbCommand(sql, con);
            cmd.Parameters.Add("@mcellno", OleDbType.VarChar, 30).Value = this.mcellno;
            OleDbDataReader rdr = cmd.ExecuteReader();
            int counter = 0;
            while (rdr.Read())
            {
                ars[0, counter] = rdr["mname"].ToString();
                ars[1, counter] = rdr["mcellno"].ToString();
                counter++;
            }
        }

        finally
        {
            con.Close();
        }
        return ars; //never returns any data
    } 
```

它不会返回任何数据。但是我试图在我的字符串查询上添加一个参数，但它什么也没返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:59:44.243

使用 OleDb，您的 Access 查询必须使用`%`而不是`*`作为通配符。

```
String sql = "SELECT mname, mcellno FROM members WHERE mcellno LIKE '" + @mcellno + "%'"; 
```

# linux - ntp_gettime() 实际上返回纳秒精度吗？

> ID：16063408
> 
> 赞同：4
> 
> 时间：2013-04-17T14:55:40.093
> 
> 标签：linux, ubuntu-12.04, ntp

Ubuntu 12.04 LTS 上的以下代码：

```
 #include <stdio.h>
 #include <sys/timex.h>
 #include <sys/time.h>

 int main(int argc, char **argv) 
 {
     struct timeval tv; 
     gettimeofday(&tv, NULL);

     struct ntptimeval ntptv;
     ntp_gettime(&ntptv);

     printf("gettimeofday: tv_sec = %ld, tv_usec = %ld\n", 
                tv.tv_sec, tv.tv_usec);
     printf("ntp_gettime:  tv_sec = %ld, tv_usec = %ld\n", 
                ntptv.time.tv_sec, ntptv.time.tv_usec);
 } 
```

返回：

```
 gettimeofday: tv_sec = 1366209548, tv_usec = 137736
 ntp_gettime:  tv_sec = 1366209548, tv_usec = 137743081 
```

这有点奇怪，因为该`tv_usec`值（如果确实是微秒计数）不应大于 1000000。上面显示的结果让我认为这`ntp_gettime()`实际上是返回纳秒精度。

[http://manpages.ubuntu.com/manpages/precise/man2/ntp_gettime.2freebsd.html](http://manpages.ubuntu.com/manpages/precise/man2/ntp_gettime.2freebsd.html)上的`ntp_gettime()`手册页（准确地说） 并没有说太多。

较早的手册页版本（适用于 hardy） [http://manpages.ubuntu.com/manpages/hardy/man2/ntp_gettime.2.html](http://manpages.ubuntu.com/manpages/hardy/man2/ntp_gettime.2.html)声称它可能是纳秒或微秒，具体取决于该`STA_NANO`位是否在`status`由`ntp_adjtime()`.

有谁确切知道吗？除此之外，在 12.04 源代码中定义的`ntp_gettime()`、`ntp_adjtime()`以及它们调用的所有各种内部函数在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-05T10:48:45.970

`ntp_gettime`并且`ntp_adjtime`都在 C 库中定义。在 Linux 和 glibc 上，`ntp_adjtime`它只是`adjtimex`系统调用的包装器，并通过将其传递给设置为 0`ntp_gettime`的方式使用相同的系统调用。您可以在[glibc LXR](http://koala.cs.pub.ro/lxr/#glibc+2.9/sysdeps/unix/sysv/linux/ntp_gettime.c)中浏览它们的定义。`struct timex``modes`

系统调用[实现](http://lxr.free-electrons.com/source/kernel/time.c#L209)调用[_do_adjtimex](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c#L1666)调用[getnstimeofday](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c#L331)以获取时间（以纳秒为单位），然后将其交给[__do_adjtimex](http://lxr.free-electrons.com/source/kernel/time/ntp.c#L641)。这是有趣的部分：

```
txc->time.tv_sec = ts->tv_sec;
txc->time.tv_usec = ts->tv_nsec;
if (!(time_status & STA_NANO))
        txc->time.tv_usec /= NSEC_PER_USEC; 
```

因此，如果`STA_NANO`设置它只是将纳秒值放入`tv_usec`，这是您一直在经历的行为。如果要取消设置此标志，可以执行以下操作：

```
struct timex tmx;
tmx.modes = 0 | ADJ_MICRO;
ntp_adjtime(&tmx); 
```

然后从中读取您的微秒值`tmx.time.tv_usec`。如果您想这样做，您必须使用 运行您的代码`sudo`，但请注意该标志将在内核中保持未设置，直到您重置它（使用`ADJ_NANO`）或重新启动。

# entity-framework - 实体框架 6 中的 STE 可用性

> ID：16063410
> 
> 赞同：1
> 
> 时间：2013-04-17T14:55:41.497
> 
> 标签：entity-framework, self-tracking-entities, entity-framework-6

如果实体框架 6 中支持 STE（自我跟踪实体），我找不到信息。如果有人知道答案，我将不胜感激。

我在看 EF 网站，但没有关于 STE 的消息。

谢谢你。

# c# - 在 C# 中使用反射和泛型属性

> ID：16063413
> 
> 赞同：2
> 
> 时间：2013-04-17T14:55:52.237
> 
> 标签：c#, asp.net-mvc, reflection

我的 ASP.NET MVC 应用程序中有一个接口/类，其中引用了我的所有通用存储库。这看起来像这样：

```
public interface IDb
{
    IGenericRepository<Car> CarRepository { get; }
    ...
    IGenericRepository<User> UserRepository { get; }
} 
```

我的目标是在程序集中找到实现某个接口的所有类型，然后找到相应的通用存储库以从数据库中获取一些对象。这应该有效：

```
List<IVehicle> vehicleElements = new List<IVehicle>();

Type vehicleType = typeof(IVehicle);
Type dbType = typeof(IDb);
foreach (Type type in vehicleType.Assembly.GetTypes().Where(t => t.IsClass && t.GetInterfaces().Contains(vehicleType)))
    {
        PropertyInfo repositoryInfo = dbType.GetProperties().Where(p => p.PropertyType.GenericTypeArguments.Contains(type)).SingleOrDefault();
        if (repositoryInfo != null)
        {
            var repository = repositoryInfo.GetValue(this.db);
            // TODO: work with repository
        }
    }

return vehicleElements; 
```

我的问题是我不知道如何将存储库变量转换为所需的通用 IGenericRepository ...有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:01:02.863

你想做的事情是行不通的，因为为了拥有一个强大的类型存储库，你需要在编译时知道实现你的接口的类型。但是你只在运行时知道它。

一种解决方案是引入非通用存储库。

另一种解决方案是使用`dynamic`关键字。

```
dynamic repository = repositoryInfo.GetValue(this.db);
repository.SomeMethod(...); 
```

但是，这意味着编译器不再可以检查涉及此动态变量的代码。换句话说：如果`SomeMethod`实际类型不存在，`repository`则将抛出*运行时异常*而不是编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:03:06.953

我会使用一个基本的 IRepository 接口，其中包含您需要在此代码中与之交互的常用方法。

如果由于某种原因这不可能，您可以通过强制转换为动态或通过反射获取所需的方法来采用松散耦合的方法。

# hibernate - Hibernate4 + c3p0 + Derby - Tomcat 停止或 Web 应用程序重新加载时的内存泄漏

> ID：16063414
> 
> 赞同：5
> 
> 时间：2013-04-17T14:55:53.517
> 
> 标签：hibernate, tomcat, memory-leaks, derby, c3p0

我有一个非常简单的应用程序模板，其中包括通过休眠的嵌入式 apache derby 数据库。

我有以下配置：

```
 <property name="hibernate.dialect"> org.hibernate.dialect.DerbyTenSevenDialect</property>
    <property name="hibernate.connection.driver_class"> org.apache.derby.jdbc.EmbeddedDriver </property>
    <property name="hibernate.connection.username"></property>
    <property name="hibernate.connection.password"></property>
    <property name="current_session_context_class">thread</property>
    <property name="connection.pool_size">10</property>
    <property name="connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
    <property name="hibernate.c3p0.acquire_increment">1</property>
    <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">20</property>
    <property name="hibernate.c3p0.timeout">300</property>
    <property name="hibernate.c3p0.idle_test_period">3000</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.c3p0.testConnectionOnCheckout">true</property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <property name="cache.use_second_level_cache">false</property>
    <property name="cache.use_query_cache">false</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="hibernate.show_sql">false</property>
    <property name="hibernate.format_sql">false</property> 
```

SessionFactory 的 init 方法是：

```
public static void init(String hibernateConfigurationResource,String connectionUrl) {
    try {
        configuration = new Configuration();
        configuration.configure(hibernateConfigurationResource);
        if (connectionUrl == null || connectionUrl.length() == 0) {
            connectionUrl = "myDb";
        } else {
            connectionUrl += File.separator + "myDb";
        }
        File f = new File(connectionUrl);
        if (logger.isDebugEnabled()) {
            logger.debug("Using db path: " + f.getAbsolutePath());
        }
        if (!f.exists()) {
            if (logger.isDebugEnabled()) {
                logger.debug("Database does not exist: creating");
            }
            connectionUrl += ";create=true";
        }
        configuration
                .setProperty("hibernate.connection.url", "jdbc:derby:"
                    + connectionUrl);

        serviceRegistry =
            new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
        sessionFactory = configuration.buildSessionFactory(serviceRegistry);
    } catch (Throwable ex) {
        throw new ExceptionInInitializerError(ex);
    }
} 
```

在销毁阶段，这个方法被调用：

```
public static void destroy() throws SQLException {
    String connectionUrl = configuration
            .getProperty("hibernate.connection.url").replace(";create=true", "");
    try {
        if (logger.isDebugEnabled()) {
            logger.debug("Shutting down database: " + connectionUrl);
        }
        DriverManager.getConnection(connectionUrl + ";shutdown=true");
    } catch (SQLNonTransientConnectionException e) {
        if (logger.isDebugEnabled()) {
            logger.debug(e.getMessage());
        }
        String message = e.getMessage();
        if (!(message.startsWith("Database") && message
                .endsWith("shutdown."))) {
            throw e;
        }
    }
    try {
        Session s = sessionFactory.getCurrentSession();
        if (s.isDirty()) {
            s.flush();
        }
        s.disconnect();
        s.close();
        sessionFactory.close();
    } catch (Exception e) {
        logger.error(e);
    }

    Enumeration<Driver> drivers = DriverManager.getDrivers();
    while (drivers.hasMoreElements()) {
        Driver driver = drivers.nextElement();
        try {
            logger.info("Deregistering jdbc driver: " + driver);
            DriverManager.deregisterDriver(driver);
        } catch (SQLException e) {
            logger.warn("Error deregistering driver " + driver, e);
        }

    }
} 
```

我注意到应用程序运行良好，但是一旦我停止 tomcat，我就会看到以下消息：

```
INFO: Stopping service Catalina
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myWebApp-webapp] appears to have started a thread named [Timer-1] but has failed to stop it. This is very likely to create a memory leak.
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myWebApp-webapp] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] but has failed to stop it. This is very likely to create a memory leak.
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myWebApp-webapp] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] but has failed to stop it. This is very likely to create a memory leak.
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/myWebApp-webapp] appears to have started a thread named [com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] but has failed to stop it. This is very likely to create a memory leak.
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/myWebApp-webapp] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@106f4e54]) and a value of type [org.apache.derby.iapi.services.context.ContextManager] (value [org.apache.derby.iapi.services.context.ContextManager@587cc9a3]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/myWebApp-webapp] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@106f4e54]) and a value of type [org.apache.derby.iapi.services.context.ContextManager] (value [org.apache.derby.iapi.services.context.ContextManager@2e704a6]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
apr 17, 2013 4:34:36 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/myWebApp-webapp] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@106f4e54]) and a value of type [org.apache.derby.iapi.services.context.ContextManager] (value [org.apache.derby.iapi.services.context.ContextManager@36bc4735]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
apr 17, 2013 4:34:36 PM org.apache.coyote.AbstractProtocolHandler stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
apr 17, 2013 4:34:36 PM org.apache.coyote.AbstractProtocolHandler stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"] 
```

我很确定问题出在连接池级别，Hibernate 无法正确关闭 c3p0 连接提供程序。我也尝试了mysql，问题仍然存在。

我也知道 tomcat 可以防止内存泄漏（实际上是在产生该消息），并且我正在运行 Tomcat 7.0.39。

此外，我不想将连接池移到应用程序之外（委托容器）。

如何告诉休眠正确关闭所有内容并避免这些消息？我错过了什么？

先感谢您！

编辑：

关机日志只显示：

```
2013-04-18 10:27:13,537 DEBUG [Thread-13] HibernateUtil  - Shutting down database: jdbc:derby:myDb
2013-04-18 10:27:13,555 DEBUG [Thread-13] HibernateUtil  - Database 'myDb' shutdown.
2013-04-18 10:27:13,656 DEBUG [Thread-13] SessionImpl  - Disconnecting session
2013-04-18 10:27:13,656 DEBUG [Thread-13] LogicalConnectionImpl  - Releasing JDBC connection
2013-04-18 10:27:13,658 DEBUG [Thread-13] SessionFactoryImpl  - HHH000031: Closing
2013-04-18 10:27:13,659 INFO  [Thread-13] HibernateUtil  - Deregistering jdbc driver: sun.jdbc.odbc.JdbcOdbcDriver@35849932
2013-04-18 10:27:13,659 INFO  [Thread-13] HibernateUtil  - Deregistering jdbc driver: org.apache.derby.jdbc.AutoloadedDriver40@7d7ff794 
```

在启动时，AbstractPoolBackedDataSource 类只有以下行：

```
2013-04-18 10:25:38,808 INFO  [Thread-2] AbstractPoolBackedDataSource  - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@28fe617e [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@8c36e25a [ acquireIncrement -> 1, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 2s05jr8u7u65au1gs0zth|25e62c36, idleConnectionTestPeriod -> 3000, initialPoolSize -> 3, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 300, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 20, maxStatements -> 50, maxStatementsPerConnection -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@423e8f48 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 2s05jr8u7u65au1gs0zth|363bec9c, jdbcUrl -> jdbc:derby:myDb, properties -> {user=******, password=******} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> true, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 2s05jr8u7u65au1gs0zth|43ba9cea, numHelperThreads -> 3 ] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T08:58:27.357

在做了更多研究之后，我发现明确关闭所有连接可以解决问题：

```
C3P0Registry.getNumPooledDataSources();

@SuppressWarnings({ "unchecked", "rawtypes" })
Iterator<Set> it = C3P0Registry.getPooledDataSources().iterator();
while (it.hasNext()) {
    try {
           dataSource = (PooledDataSource) it.next();
           dataSource.close();
    } catch (Exception e) {
           logger.error(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T01:59:48.933

接受答案的更简洁版本对我有用

```
for (Object o : C3P0Registry.getPooledDataSources()) {
  try {
    ((PooledDataSource) o).close();
  } catch (Exception e) {
    // oh well, let tomcat do the complaing for us.
  }
} 
```

# mvvm - 条件视图模型绑定

> ID：16063416
> 
> 赞同：0
> 
> 时间：2013-04-17T14:55:57.130
> 
> 标签：mvvm, knockout.js

嗨，我已经开始使用 Knockout，因为它比 jQuery 更容易达到我的目的。我以前使用过 jQuery，但这使我的代码几乎不可读。

我有这个 javascript 视图模型

```
function ovm() {
    this.delStreet = ko.observable("");
    this.deliveryNotSameAsInvoice = ko.observable(false);
    this.invStreet = ko.observable("");
}
ko.applyBindings(new ovm()); 
```

这个HTML：

```
<label><input type="checkbox" data-bind="checked: deliveryNotSameAsInvoice" />if your invoice address is not the same as delivery</label>
<div id="delivery">
    <input type="text" placeholder="Street" 
        data-bind="value: delStreet, valueUpdate:'afterkeydown'" />
</div>
<div id="invoice" data-bind="visible: deliveryNotSameAsInvoice">
    <input type="text" placeholder="Street" 
        data-bind="value: invStreet, valueUpdate:'afterkeydown'" />
</div>
<hr/>
Delivery street: <span data-bind="text: delStreet"></span><br/>
Invoice street: <span data-bind="text: invStreet"></span><br/> 
```

问题是，只要未选中复选框，我希望 invStreet 具有 delStreet 的值。我在[这里有一个工作的 jsFiddle，](http://jsfiddle.net/jphellemons/h4wn7/3/) 并且发现了这个[关于条件绑定的 SO 问题，](https://stackoverflow.com/questions/14507085/using-a-conditional-on-a-knockout-binded-value) 但我找不到一个好的代码示例。在 jquery 中，我必须将 keyup 事件绑定到每个文本框，并且根据复选框是否被选中，我必须设置几个字段。工作量很大。特别是对于更大的“视图模型”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:24:28.610

对 invStreet 使用计算的 observable .. 像这样

```
function ovm() {
     var self = this;
     this.delStreet = ko.observable("");
     this.deliveryNotSameAsInvoice = ko.observable(false);
     this.invStreet = ko.observable("");
     var invStreetCheck = ko.computed(function(){
         var checked = self.deliveryNotSameAsInvoice(),
             delStreet = self.delStreet();
         if(!checked)
             return self.invStreet(delStreet);
         return self.invStreet();
     });
 }

 ko.applyBindings(new ovm()); 
```

现在，当检查的绑定为真时，它将返回“”，否则它将包含 delStreet。价值。

# excel - 如何使用 VBScript 找出共享 Excel 文件的实例数

> ID：16063419
> 
> 赞同：2
> 
> 时间：2013-04-17T14:56:01.300
> 
> 标签：excel, vbscript, locking, semaphore, instances

我正在尝试使用 VBScript 找出在不同系统上运行的共享 Excel 文件的实例数。

假设该文件是“test.xls”，它被放置在共享驱动器上，并且不同的人正在访问它。我想使用 VBscript 从该文件打开的位置中找出。

或者

如果有人能提出一种在 Excel 文件上使用 VBScript 实现信号量概念的方法，那将非常有帮助。也就是说，一次只有一个人可以使用 Excel 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:03:04.600

[http://msdn.microsoft.com/en-us/library/office/bb221986(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb221986(v=office.12).aspx)

在这里...使用 userstatus 属性“返回一个基于 1 的二维数组，该数组提供有关将工作簿作为共享列表打开的每个用户的信息”

希望这会有所帮助，链接中有一个代码示例

# iphone - 在 .mp3 的 Safari 浏览器中未显示打开选项卡

> ID：16063421
> 
> 赞同：0
> 
> 时间：2013-04-17T14:56:09.253
> 
> 标签：iphone, ios, objective-c

通过在 info.plist 中添加以下内容，我已将 .mp3 与我的应用程序相关联

![在此处输入图像描述](https://i.stack.imgur.com/On2Hv.png)

在设备中安装我的应用程序后。我试图在 safari 中浏览 .mp3。但是 safari 没有显示打开按钮。

为什么呢？。不允许吗。。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:17:32.860

你不会错过任何东西，那就是 safari 不允许 mp3 被 3rd 方应用程序打开。同样，它也不允许图像类型的文件。

![xcode的mp3 uti设置](https://i.stack.imgur.com/lKuAO.png)

对于 mp3 文件，这里是正确的文档类型 uti 设置

文档类型界面在 Targets -> [YOURPROJECTNAME] -> info 选项卡中可用。

只需将 mp3 文件发送给自己并在 mp3 文件的菜单中启动 open 即可进行测试。

# android - 修改手机麦克风音频缓冲区，然后再将其发送给 Android 上的呼叫接收者？

> ID：16063423
> 
> 赞同：0
> 
> 时间：2013-04-17T14:56:13.237
> 
> 标签：android, audio

我对 C#/Java 有相当的经验，所以在编程时我不需要任何解释。只是想知道哪些类保存了信息以及要挂钩哪些函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:18:30.017

这在“Android”中是不可能的，因为 Android 仅指定呼叫音频的路由，它从未真正接触过数据。

在许多手机上，通话中的音频甚至从未通过运行 Android 的处理器内核。

可能有手机可以修改处理呼叫音频的软件，但是在硬件和供应商独有的软件堆栈区域中，这将远远低于“Android”级别，并且应用程序无法访问，除非利用了安全漏洞或使用了不安全的平台开发人员电话。

如果您构建了一个自定义 VOIP 呼叫应用程序，您可以使用 Android 级别的 API 执行此操作。

# knockout.js - 将嵌套的可观察数组序列化为 JSON

> ID：16063425
> 
> 赞同：1
> 
> 时间：2013-04-17T14:56:22.333
> 
> 标签：knockout.js

在 KnockoutJS 中，有没有办法将可观察数组的嵌套结构序列化为 JSON？我正在使用 JSON.stringify，但由于它不以 someObservableArray() 的形式访问数组，因此无法序列化嵌套数组：

例如：我有一个可观察数组，其中每个项目都包含一个可观察数组作为属性。

目前我在调用 JSON.stringify 之前手动将其转换为标准 JS 对象，但是是否有另一个敲除函数可以让我直接将其转换为 JSON

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:12:27.930

您可以使用可以将嵌套的可观察结构序列化为 JSON的[`ko.toJSON`函数：](http://knockoutjs.com/documentation/json-data.html)

```
var vm = {
    someObservableArray: ko.observableArray(
    [{
        prop: ko.observable('val1'),
        childArray: ko.observableArray([{
            prop2: ko.observable('vla2')
        }, {
            prop2: ko.observable('val3')
        }])
    }, {
        prop: ko.observable('val4'),
        childArray: ko.observableArray([{
            prop2: ko.observable('val5')
        }, {
            prop2: ko.observable('val6')
        }])
    }])
}
console.log(ko.toJSON(vm));
// output: {"someObservableArray":[{"prop":"val1","childArray":[{"prop2":"vla2"},
//         {"prop2":"val3"}]},{"prop":"val4","childArray":[{"prop2":"val5"},
//         {"prop2":"val6"}]}]} 
```

演示[JSFiddle](http://jsfiddle.net/ggQJN/)。

# visual-studio - 在不打开默认站点的情况下启动 IIS Express

> ID：16063428
> 
> 赞同：3
> 
> 时间：2013-04-17T14:56:25.787
> 
> 标签：visual-studio, iis, iis-express

当我从 Visual Studio 2012 启动我的 MVC4 项目时，IIS Express 启动，然后自动启动默认站点的默认页面（即我正在处理的那个）。

如何防止它打开默认页面 - somwhere 是否有配置选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:51:00.810

如果您想在开始时在浏览器中打开不同的文件，请右键单击解决方案资源管理器中的文件并选择“设置为起始页”。

不做任何事情（即只启动 IIS 而不调用您的浏览器）然后转到您的项目属性并转到 Web 选项卡。那里有一些设置。

# java - 快速更新 JList 时出现 java.lang.NullPointerException

> ID：16063429
> 
> 赞同：-1
> 
> 时间：2013-04-17T14:56:25.880
> 
> 标签：java, performance, swing, jlist, auto-update

这将是我在 StackOverflow 上的第一个问题，但肯定不是第一次有帮助。但是，到目前为止，我没有进一步尝试我发现的不同可能的解决方案。

我目前正在实习并创建一个实用程序来可视化通过 USB-to-CAN 接口读取的信息 - “控制器区域网络”。简而言之：它从嵌入式系统上的 CAN 连接器读取消息。每条消息由一个标识符字段（包含源地址、目标地址、标识符等）+ 最多 8 个数据字节组成。这些字段被转换为字符串，我想在每次收到新消息时将它们添加到 JList 中。JList 'log_listview' 使用新的 DefaultListModel 'listModel' 进行初始化，并将其添加到 ContentPane 'Can_Panel'。读取发生在一个名为“vci_thread”的单独线程中，该线程在创建面板后立即初始化并启动。

大约 5 秒后才开始读取，这是初始化 USB-to-CAN 接口所需的时间。乍一看，JList 表现良好。每条收到的消息都正确添加到 listModel 中，我什至没有注意到有错误，因为程序只是继续运行，没有丢失元素，自动滚动并在 listModel.size() > 99 时自动删除第一个元素...

不时出现以下错误（“大小：#”是 JList 中实际元素数量的调试输出）：

```
Size: 60
Size: 61
Size: 62
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.BufferStrategyPaintManager.flushAccumulatedRegion(Unknown Source)
    at javax.swing.BufferStrategyPaintManager.endPaint(Unknown Source)
    at javax.swing.RepaintManager.endPaint(Unknown Source)
    at javax.swing.JComponent._paintImmediately(Unknown Source)
    at javax.swing.JComponent.paintImmediately(Unknown Source)
    at javax.swing.RepaintManager$3.run(Unknown Source)
    at javax.swing.RepaintManager$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.access$1000(Unknown Source)
    at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Size: 63
Size: 64
Size: 65
Size: 66 
```

此外，当大量消息快速传入时，我经常会收到以下错误。我认为这与删除第一个索引有关，因为当前大小为 100：

```
Size: 100
Size: 100
Size: 100
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 99 >= 99
    at java.util.Vector.elementAt(Unknown Source)
    at javax.swing.DefaultListModel.getElementAt(Unknown Source)
    at javax.swing.plaf.basic.BasicListUI.paintCell(Unknown Source)
    at javax.swing.plaf.basic.BasicListUI.paintImpl(Unknown Source)
    at javax.swing.plaf.basic.BasicListUI.paint(Unknown Source)
    at javax.swing.plaf.ComponentUI.update(Unknown Source)
    at javax.swing.JComponent.paintComponent(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.BufferStrategyPaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent._paintImmediately(Unknown Source)
    at javax.swing.JComponent.paintImmediately(Unknown Source)
    at javax.swing.RepaintManager$3.run(Unknown Source)
    at javax.swing.RepaintManager$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.access$1000(Unknown Source)
    at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Size: 100
Size: 100 
```

以下是在读取新 CAN 消息并将字节转换为字符串后执行的**代码**：

```
 // Add a new element containing the strings:
    listModel.addElement(counter + ": " + src_addr_hex + " " + dest_addr_hex + " - " + predef_hex + " - " + str_data);

    // Auto scroll down after the element has been added
    if (listModel.size()-1 >= 0) {
        try {
            log_listview.ensureIndexIsVisible(listModel.size()-1);
        } catch (Exception ex) {
        //
        }
    }

    // When listModel contains 100 elements, remove the first index
    if (listModel.size()>99) {
        listModel.remove(0);
    } 
```

这个读数和这段代码在一个while()循环中执行，并且每次都包含一个Thread.sleep(1)来限制cpu的使用。我通过 try{} catch() 确保当没有新消息要读取时，字符串转换和添加到 JList 的操作会被简单地跳过。当消息进来的速度快于这个循环的一个周期时，它们会被简单地缓存并一一处理，直到我的程序最终赶上。这是一个相当广泛的问题，但我希望有人能帮助我。

**更新：**我已将代码迁移到一个新的可运行“update_JList”中，并在读取一行后立即使用 SwingUtilities.invokeLater 方法调用它。我没有收到任何错误，很高兴看到 GUI 更新有多流畅。但是，现在我面临 JList 中重复或缺失元素的另一个问题：

[截屏](http://i.imgur.com/o7KA3Y7.jpg)

左侧是调试输出，一一显示每条传入消息。右边是显示源地址为 45 的消息 14 次的 JList。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:05:26.207

> 读取发生在一个名为“vci_thread”的单独线程中，该线程在创建面板后立即初始化并启动。

GUI 的更新必须在 EDT 上完成，而不是单独的线程。阅读 Swing 教程中关于[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的部分以获取更多信息。

您可以使用 SwingWorker，或者如果您想继续使用现有的线程，那么您需要在想要更新模型时使用 SwingUtilities.invokeLater()。

# jsf - 如何使用 Hibernate 和 Spring 将动态 JSF 表单保存到数据库中

> ID：16063436
> 
> 赞同：0
> 
> 时间：2013-04-17T14:56:45.383
> 
> 标签：jsf, spring-mvc, primefaces

我们正在使用 JSF Primefaces 3.2。我有一个模块，用户将在其中使用自己的选择创建一些动态字段，例如文本字段、文本区域、选择框、复选框、单选按钮，然后将根据这些选定字段生成表单。我已经成功创建了用户创建表单并根据他的选择生成表单的第一部分。但现在我面临的问题是如何将此表单保存到数据库中。在这里我附上我的模块的一些代码，以便您轻松理解并快速找到解决方案。

这是我使用动态生成所有字段的 JSF 表单

```
 <h:form id="formObjectiveLibrary">
    <h:panelGrid columns="3" styleClass="form-table" columnClasses="column_1, column_2, column_3">
        <h:outputText value="Choose from Templates" />
        <p:selectOneListbox id="objectiveTemplateID" value="#{objectiveTemplateAction.objectiveTemplateID}" style="height: 120px; width: 200px">
        <f:selectItems value="#{objectiveTemplateAction.objectiveTemplateList}" var="template" itemLabel="#{template.title}" itemValue="#{template.id}"></f:selectItems>
        <p:ajax event="change" listener="#{objectiveTemplateAction.loadTemplateQuestionsByID()}" update="libraryQuestionContainer"/>
        </p:selectOneListbox>
        <p:message for="objectiveTemplateID"/>
    </h:panelGrid>

    <p:outputPanel id="libraryQuestionContainer">
        <p:outputPanel rendered="#{objectiveTemplateAction.questionList.size() > 0}">
        <div class="tabbable tabs-left" style="margin-top: 20px; text-align: left;"> <!-- Only required for left/right tabs -->
            <ul class="nav nav-tabs">
            <li class="active"><a href="#inspection" data-toggle="tab">Inspection</a></li>
            <li><a href="#observation" data-toggle="tab">Observation</a></li>
            <li><a href="#rangeOfMotion" data-toggle="tab">Range of Motion</a></li>
            <li><a href="#strength" data-toggle="tab">Strength</a></li>
            <li><a href="#neuroVascular" data-toggle="tab">Neuro-Vascular</a></li>
            <li><a href="#specialTests" data-toggle="tab">Special Tests</a></li>
            <li><a href="#palpation" data-toggle="tab">Palpation</a></li>
            </ul>
            <div class="tab-content">
            <div class="tab-pane active" id="inspection">
                <ui:repeat var="q" varStatus="current" value="#{objectiveTemplateAction.questionList}">
                <p:outputPanel rendered="#{q.questionContainerName eq 'INSPECTION'}">
                    <h:panelGrid>
                    <p:outputPanel>
                        #{current.index + 1}. <h:outputText value="#{q.questionTitle}" />
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'textfield'}">
                        <h:inputText id="txtField" value=""/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'comment'}">
                        <h:inputTextarea id="comment" cols="100" rows="5" value=""/>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'description_text'}">

                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'multi_textbox'}">
                        <ui:repeat var="txt" value="#{q.questionOptionsList}">
                        <h:panelGrid columns="2" styleClass="form-table" columnClasses="column1, column2">
                            <h:outputText value="#{txt.optionName}" />
                            <h:inputText id="multiText" value=""/>
                        </h:panelGrid>
                        </ui:repeat>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'multi_numeric_textbox'}">
                        <ui:repeat var="numeric" value="#{q.questionOptionsList}">
                        <h:panelGrid columns="2" styleClass="form-table" columnClasses="column1, column2">
                            <h:outputText value="#{numeric.optionName}" />
                            <pe:inputNumber id="numericTxt" value=""/>
                        </h:panelGrid>
                        </ui:repeat>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'checkbox'}">
                        <p:selectManyCheckbox id="check" value="#{q.questionOptionsList}" layout="pageDirection">
                        <f:selectItems value="#{q.questionOptionsList}" var="chk" itemLabel="#{chk.optionName}" itemValue="#{chk.id}"/>  
                        </p:selectManyCheckbox>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'radio'}">
                        <p:selectOneRadio id="radio" value="#{objectiveTemplateAction.optionValue.optionValue}" layout="pageDirection">
                        <f:selectItems value="#{q.questionOptionsList}" var="rd" itemLabel="#{rd.optionName}" itemValue="#{rd.id}"/>  
                        </p:selectOneRadio>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'matrix_radio'}">
                        <table class="table table-bordered">
                        <tbody>
                            <ui:repeat var="mrow" value="#{q.questionOptionsList}">
                            <p:outputPanel rendered="#{mrow.optionPosition eq 'ROW'}">
                                <tr>
                                <td>#{mrow.optionName}</td>
                                <td>
                                    <p:selectOneButton id="mradio" value="">
                                    <f:selectItems value="#{objectiveTemplateAction.getColumnOptionsList(q.questionOptionsList)}" var="mr" itemLabel="#{mr.optionName}" itemValue="#{mr.id}"/>
                                    </p:selectOneButton>
                                </td>
                                </tr>
                            </p:outputPanel>
                            </ui:repeat>
                        </tbody>
                        </table>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'matrix_checkbox'}">
                        <table class="table table-bordered">
                        <tbody>
                            <ui:repeat var="checkrow" value="#{q.questionOptionsList}">
                            <p:outputPanel rendered="#{checkrow.optionPosition eq 'ROW'}">
                                <tr>
                                <td>#{checkrow.optionName}</td>
                                <td>
                                    <p:selectManyButton id="mcheck" value="#{q.questionOptionsList}">
                                    <f:selectItems value="#{objectiveTemplateAction.getColumnOptionsList(q.questionOptionsList)}" var="mc" itemLabel="#{mc.optionName}" itemValue="#{mc.id}"/>
                                    </p:selectManyButton>
                                </td>
                                </tr>
                            </p:outputPanel>
                            </ui:repeat>
                        </tbody>
                        </table>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'matrix_select'}">
                        <table class="table table-bordered">
                        <p:outputPanel rendered="#{q.questionOptionMenuList.size() gt 0}">
                            <thead>
                            <tr>
                                <th></th>
                                <ui:repeat value="#{q.questionOptionMenuList}" var="m">
                                <th>#{m.menuTitle}</th>
                                </ui:repeat>
                            </tr>
                            </thead>
                        </p:outputPanel>
                        <tbody>
                            <ui:repeat var="selectrow" value="#{q.questionOptionsList}">
                            <p:outputPanel rendered="#{selectrow.optionPosition eq 'ROW'}">
                                <tr>
                                <td>#{selectrow.optionName}</td>
                                <ui:repeat value="#{q.questionOptionMenuList}" var="m">
                                    <td>
                                    <h:selectOneMenu value="#{m.questionOptionMenuChoiceList}" style="width: auto;">
                                        <f:selectItems value="#{m.questionOptionMenuChoiceList}" var="choice" itemLabel="#{choice.choiceName}" itemValue="#{choice.id}"/>
                                    </h:selectOneMenu>
                                    </td>
                                </ui:repeat>
                                </tr>
                            </p:outputPanel>
                            </ui:repeat>
                        </tbody>
                        </table>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{q.questionType.questionTypeVariant eq 'rating'}">
                        <table class="table table-bordered">
                        <tbody>
                            <ui:repeat var="orow" value="#{q.questionOptionsList}">
                            <tr>
                                <td>#{orow.optionName}</td>
                                <td>
                                <p:selectOneButton id="rating" value="">
                                    <f:selectItems value="#{q.questionOptionRatingList}" var="rating" itemLabel="#{rating.ratingLabel}" itemValue="#{rating.id}"/>
                                </p:selectOneButton>
                                </td>
                            </tr>
                            </ui:repeat>
                        </tbody>
                        </table>
                    </p:outputPanel>
                    </h:panelGrid>
                </p:outputPanel>
                </ui:repeat>
            </div>
            <div class="tab-pane" id="observation">
                <p>A</p>
            </div>
            <div class="tab-pane" id="rangeOfMotion">
                <p>sanjay</p>
            </div>
            <div class="tab-pane" id="strength">
                <p>A</p>
            </div>
            <div class="tab-pane" id="neuroVascular">
                <p>B</p>
            </div>
            <div class="tab-pane" id="specialTests">
                <p>C</p>
            </div>
            <div class="tab-pane" id="palpation">
                <p>D</p>
            </div>
            </div>
        </div>
        <h:panelGrid columns="3" styleClass="form-table" columnClasses="column_1, column_2, column_3">
            <h:outputText value="" />
            <p:commandButton style="text-align: center" actionListener="#{objectiveTemplateAction.fillAndSaveTemplate}" 
                    styleClass="btn" value="Save" update="@form :mainErrorMessages" process="@form"/>
            <h:outputText value="" />
        </h:panelGrid>
        </p:outputPanel>
        <p:outputPanel rendered="#{objectiveTemplateAction.questionList ne null and objectiveTemplateAction.questionList.size() eq 0}">
        <p class="lead">This template is under construction. We will launch this template very soon.</p>
        </p:outputPanel>

    </p:outputPanel>
    </h:form>
</ui:composition> 
```

这是我的 Java Action 类，将用于用户请求

```
 @Named("objectiveTemplateAction")
@Scope(ScopeType.VIEW)
public class EMRObjectiveTemplateAction implements Serializable {

    private static final Logger log = LoggerFactory.getLogger(EMRObjectiveTemplateAction.class);
    @Inject
    private EMRObjectiveTemplateService emrObjectiveTemplateService;
    @Inject
    private UserSession userSession;

    private EMRObjectiveTemplate objectiveTemplate = new EMRObjectiveTemplate();
    private EMRObjectiveTemplateQuestion question = new EMRObjectiveTemplateQuestion();

    private List<EMRObjectiveTemplateQuestion> questionList = null;
    private List<EMRObjectiveTemplate> objectiveTemplateList = new ArrayList<EMRObjectiveTemplate>();
    private List<EMRObjectiveQuestionType> questionTypeList = new ArrayList<EMRObjectiveQuestionType>();
    private List<EMRObjectiveTemplateQuestionOption> questionOptionList = new ArrayList<EMRObjectiveTemplateQuestionOption>();
    private List<EMRObjectiveTemplateQuestionOption> questionOptionColumnList = new ArrayList<EMRObjectiveTemplateQuestionOption>();
    private List<Long> optionMenuCountList = new ArrayList<Long>();
    private List<Long> optionRatingCountList = new ArrayList<Long>();
    private List<EMRObjectiveTemplateQuestionOptionMenu> optionMenuList = new ArrayList<EMRObjectiveTemplateQuestionOptionMenu>();
    private List<EMRObjectiveTemplateQuestionOptionRating> optionRatingList = new ArrayList<EMRObjectiveTemplateQuestionOptionRating>();

    private EMRObjectiveTemplateQuestionOptionValue optionValue = new EMRObjectiveTemplateQuestionOptionValue();

    private Long objectiveTemplateID;
    private Long questionTypeID;

    private String title;
    private String description;

    private String questionContainerName;

    private boolean showQuestionTabContainer = false;
    private String questionOptionName;
    private long optionMenuCount;
    private long optionRatingCount;
    private String menuOptionName;

    @PostConstruct
    public void init() {
    this.objectiveTemplateList = this.emrObjectiveTemplateService.getAllTemplates();
    this.questionTypeList = this.emrObjectiveTemplateService.getAllQuestionType();

    // prefill optionMenuCountList with menuCount
    this.optionMenuCountList.add(1L);
    this.optionMenuCountList.add(2L);
    this.optionMenuCountList.add(3L);
    this.optionMenuCountList.add(4L);
    this.optionMenuCountList.add(5L);
    this.optionMenuCountList.add(6L);
    this.optionMenuCountList.add(7L);
    this.optionMenuCountList.add(8L);
    this.optionMenuCountList.add(9L);

    // prefill optionRatingCountList with ratingCount
    this.optionRatingCountList.add(2L);
    this.optionRatingCountList.add(3L);
    this.optionRatingCountList.add(4L);
    this.optionRatingCountList.add(5L);
    this.optionRatingCountList.add(6L);
    this.optionRatingCountList.add(7L);
    this.optionRatingCountList.add(8L);
    this.optionRatingCountList.add(9L);
    this.optionRatingCountList.add(10L);
    this.optionRatingCountList.add(11L);
    this.optionRatingCountList.add(12L);
    this.optionRatingCountList.add(13L);
    this.optionRatingCountList.add(14L);
    this.optionRatingCountList.add(15L);
    this.optionRatingCountList.add(16L);
    }

    /**
     * Recharge optionMenuList with requested optionMenuCount
     */
    public void rowNumbers() {
    this.optionMenuList = new ArrayList<EMRObjectiveTemplateQuestionOptionMenu>();

    for(int i = 0; i < this.optionMenuCount; i++){
        this.optionMenuList.add(new EMRObjectiveTemplateQuestionOptionMenu());
    }
    }

    /**
     * Recharge optionRatingList with requested optionRatingCount
     */
    public void ratingNumbers() {
    this.optionRatingList = new ArrayList<EMRObjectiveTemplateQuestionOptionRating>();

    for(int i = 0; i < this.optionRatingCount; i++){
        this.optionRatingList.add(new EMRObjectiveTemplateQuestionOptionRating());
    }
    }

    /**
     * Fetch all questions registered under this objectiveTemplateID
     */
    public void loadTemplateQuestionsByID(){
    System.out.println("Current Template ID: " + this.objectiveTemplateID);
    this.questionList = this.emrObjectiveTemplateService.loadTemplateQuestionsByID(this.objectiveTemplateID);
    System.out.println("Questions size: " + this.questionList.size());
    for(EMRObjectiveTemplateQuestion q : this.questionList){
        if(q.getQuestionType().getQuestionTypeVariant().equalsIgnoreCase("radio")){
        this.optionValue = new EMRObjectiveTemplateQuestionOptionValue();
        optionValue.setQuestion(q);
        }
    }
    }

    /**
     * Save filled template into database
     */
    public void fillAndSaveTemplate(){
    for(EMRObjectiveTemplateQuestion q : this.questionList){
        System.out.println("Option Value for Question " + q.getQuestionTitle() + " is: " + this.optionValue.getOptionValue());
//            System.out.println("Question ANswer: " + q.getQuestionAnswer().getQuestionAnswer());
    }
    }

    /**
     * Filter Options according to position from this optionList
     * @param optionsList
     * @return 
     */
    public List<EMRObjectiveTemplateQuestionOption> getColumnOptionsList(List<EMRObjectiveTemplateQuestionOption> optionsList) {
    List<EMRObjectiveTemplateQuestionOption> columnOptionsList = new ArrayList<EMRObjectiveTemplateQuestionOption>();

    for(EMRObjectiveTemplateQuestionOption option : optionsList){
        if(option.getOptionPosition().equalsIgnoreCase("COLUMN")){
        columnOptionsList.add(option);
        }
    }

    return columnOptionsList;
    }

    // Getter - Setter
    public EMRObjectiveTemplate getObjectiveTemplate() {
    return objectiveTemplate;
    }

    public void setObjectiveTemplate(EMRObjectiveTemplate objectiveTemplate) {
    this.objectiveTemplate = objectiveTemplate;
    }

    public List<EMRObjectiveTemplate> getObjectiveTemplateList() {
    return objectiveTemplateList;
    }

    public void setEmrObjectiveTemplateList(List<EMRObjectiveTemplate> objectiveTemplateList) {
    this.objectiveTemplateList = objectiveTemplateList;
    }

    public Long getObjectiveTemplateID() {
    return objectiveTemplateID;
    }

    public void setObjectiveTemplateID(Long objectiveTemplateID) {
    this.objectiveTemplateID = objectiveTemplateID;
    }

    public String getDescription() {
    return description;
    }

    public void setDescription(String description) {
    this.description = description;
    }

    public String getTitle() {
    return title;
    }

    public void setTitle(String title) {
    this.title = title;
    }

    public List<EMRObjectiveQuestionType> getQuestionTypeList() {
    return questionTypeList;
    }

    public void setQuestionTypeList(List<EMRObjectiveQuestionType> questionTypeList) {
    this.questionTypeList = questionTypeList;
    }

    public Long getQuestionTypeID() {
    return questionTypeID;
    }

    public void setQuestionTypeID(Long questionTypeID) {
    this.questionTypeID = questionTypeID;
    }

    public String getQuestionContainerName() {
    return questionContainerName;
    }

    public void setQuestionContainerName(String questionContainerName) {
    this.questionContainerName = questionContainerName;
    }

    public boolean isShowQuestionTabContainer() {
    return showQuestionTabContainer;
    }

    public void setShowQuestionTabContainer(boolean showQuestionTabContainer) {
    this.showQuestionTabContainer = showQuestionTabContainer;
    }

    public List<EMRObjectiveTemplateQuestionOption> getQuestionOptionList() {
    return questionOptionList;
    }

    public void setQuestionOptionList(List<EMRObjectiveTemplateQuestionOption> questionOptionList) {
    this.questionOptionList = questionOptionList;
    }

    public List<EMRObjectiveTemplateQuestionOption> getQuestionOptionColumnList() {
    return questionOptionColumnList;
    }

    public void setQuestionOptionColumnList(List<EMRObjectiveTemplateQuestionOption> questionOptionColumnList) {
    this.questionOptionColumnList = questionOptionColumnList;
    }

    public String getQuestionOptionName() {
    return questionOptionName;
    }

    public void setQuestionOptionName(String questionOptionName) {
    this.questionOptionName = questionOptionName;
    }

    public EMRObjectiveTemplateQuestion getQuestion() {
    return question;
    }

    public void setQuestion(EMRObjectiveTemplateQuestion question) {
    this.question = question;
    }

    public List<EMRObjectiveTemplateQuestionOptionMenu> getOptionMenuList() {
    return optionMenuList;
    }

    public void setOptionMenuList(List<EMRObjectiveTemplateQuestionOptionMenu> optionMenuList) {
    this.optionMenuList = optionMenuList;
    }

    public String getMenuOptionName() {
    return menuOptionName;
    }

    public void setMenuOptionName(String menuOptionName) {
    this.menuOptionName = menuOptionName;
    }

    public long getOptionMenuCount() {
    return optionMenuCount;
    }

    public void setOptionMenuCount(long optionMenuCount) {
    this.optionMenuCount = optionMenuCount;
    }

    public List<Long> getOptionMenuCountList() {
    return optionMenuCountList;
    }

    public void setOptionMenuCountList(List<Long> optionMenuCountList) {
    this.optionMenuCountList = optionMenuCountList;
    }

    public long getOptionRatingCount() {
    return optionRatingCount;
    }

    public void setOptionRatingCount(long optionRatingCount) {
    this.optionRatingCount = optionRatingCount;
    }

    public List<Long> getOptionRatingCountList() {
    return optionRatingCountList;
    }

    public void setOptionRatingCountList(List<Long> optionRatingCountList) {
    this.optionRatingCountList = optionRatingCountList;
    }

    public List<EMRObjectiveTemplateQuestionOptionRating> getOptionRatingList() {
    return optionRatingList;
    }

    public void setOptionRatingList(List<EMRObjectiveTemplateQuestionOptionRating> optionRatingList) {
    this.optionRatingList = optionRatingList;
    }

    public List<EMRObjectiveTemplateQuestion> getQuestionList() {
    return questionList;
    }

    public void setQuestionList(List<EMRObjectiveTemplateQuestion> questionList) {
    this.questionList = questionList;
    }

    public EMRObjectiveTemplateQuestionOptionValue getOptionValue() {
    return optionValue;
    }

    public void setOptionValue(EMRObjectiveTemplateQuestionOptionValue optionValue) {
    this.optionValue = optionValue;
    }
} 
```

# html - 如果文本占用两行，如何在按钮中垂直居中文本？

> ID：16063437
> 
> 赞同：0
> 
> 时间：2013-04-17T14:56:46.337
> 
> 标签：html, css

如何在具有指定宽度和高度的按钮中垂直居中多行文本？

```
<a href="#">This text will take up two lines</a>

a {
    display: inline-block
    height: 50px;
    width: 100px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:58:54.043

使用`line-height`：

```
a { line-height: 50px; } 
```

这仅在文本占用一行时才有效。如果您必须处理多行，您可以使用`display: table-cell`：

```
a { display: table-cell; vertical-align: middle; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:58:25.573

添加垂直对齐：中间；到你的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:08:05.553

处理行高时最好使用 % 或 em。不同的浏览器以不同的方式呈现文本（大小）；当您使用 % 时，它会相应地调整 auto 。

```
a { line-height: 1.3em; } 
```

# javascript - PhoneGap & 通过 Javascript 连接到 SQLite 数据库

> ID：16063446
> 
> 赞同：0
> 
> 时间：2013-04-17T14:57:22.513
> 
> 标签：javascript, ios, sqlite, cordova, phonegap-build

我对 PhoneGap 还很陌生，并且正在构建连接到现有 SQLite 数据库的问题。下面是我的代码。通过日志条目和警报，我注意到 javascript 正在运行，但很明显我的 openDatabase 调用没有完全正确设置。我得到的错误是“错误：无法准备语句（1没有这样的表：人）（代码5）”

```
if(openDatabase){
                 db = openDatabase('popfon.sqlite'
                                    , '1.0'
                                    , 'Database Description'
                                    , 200000;
    }
                  //Alert the user to upgrade their browser
                  else {
                  alert('Databases not supported. Please get a proper browser');
                  }
  $JQuery("#theButton").click(function(){getData()});

function getData(){
    //Create an empty results string
    var strResults = '';
    //Open a new transaction
    db.transaction(function(tx){
                   //Select a wildcard from the database
                   var theQuery = "SELECT * FROM person where OfficialName like '%law%'"
                   alert(theQuery);
                   tx.executeSql(theQuery
                                 ,[]
                                 //Callback function with transaction and
                                 //results objects
                                 ,function(tx, results){
                                 //Count the results rows
                                 var rowsCount = results.rows.length;
                               //  alert("rowsCount: "+rowsCount);
                                 //Loop the rows
                                 for (var i = 0; i < rowsCount; i++){
                                 //Build a results string, notice the
                                 //column names are called
                                 strResults += 'Your Name is'
                                 + results.rows.item(i).personName
                                 + ' Your ID is '
                                 + results.rows.item(i).personId
                                 + ' Your age is '
                                 + results.rows.item(i).personAge
                                 + ' Your favourite colour is '
                                 + results.rows.item(i).personColour
                                 + '';
                                 }
                                 //Fill the results DIV
                                 $('.results').html(strResults);
                                 }
                                 ,errorHandler);
                   });
} 
```

# android - Android - 使用 URL 的 WIFI 配置 OTA

> ID：16063454
> 
> 赞同：0
> 
> 时间：2013-04-17T14:57:42.863
> 
> 标签：android, configuration, wifi, provisioning, ota

我需要在 Android 设备上部署 OTA WIFI 配置。例如，通过在 Web 服务器上部署 XML 文件，该服务器可通过移动设备的 URL 访问。您对如何进行有任何想法吗？

在 iOS 设备上，我们只需要在服务器上部署一个配置供应来配置邮件、Wifi、证书和许多其他东西。

Android 2.2 引入的 Android 设备管理 API 不包括 WIFI 管理 API/功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T07:30:58.147

有第三方商业解决方案（从 Aruba 搜索 Clearpass 或从 Securew2 搜索 JoinNow），但没有像 iOS 世界中的部署 API 那样（对于 Android 4.2）。

# unit-testing - 单元测试。何时停止

> ID：16063458
> 
> 赞同：2
> 
> 时间：2013-04-17T14:58:01.557
> 
> 标签：unit-testing

我已经对自己的项目进行了一段时间的单元测试，并希望获得有关何时停止测试的反馈。考虑以下示例。

```
public class Foo
{
    public object Bibble { get; private set; }

    public string Hooch { get; private set; }

    public string BibbleHooch { get { return string.Format("{0},{1}", Bibble, Hooch); } }

    public Foo(object bibble, string hooch)
    {
        if (bibble == null) 
            throw new ArgumentNullException("bibble");

        if (string.IsNullOrEmpty(hooch)) 
            throw new ArgumentNullException("hooch");

        Bibble = bibble;
        Hooch = hooch;
    }
} 
```

这些是我在调用构造函数时能想到的以下测试。

*   一个空圣经抛出
*   一个空的钩子抛出
*   一个空的钩子抛出
*   一个有效的圣经但空的 hooch 抛出
*   一个空的圣经，但有效的方式抛出
*   bibble 和 hooch 都设置为 null throws
*   一个有效的圣经和 hooch 不要扔
*   有效的 bibble 和 hooch 意味着 Bibble 和 Hooch 不应为空
*   有效的 bibble 和 hooch 意味着 BibbleHooch 不应为空
*   一个 hooch x 应该与 Foo.Hooch 相同
*   a bibble y 应该与 Foo.Bibble 相同
*   x 的 hooch 和 y 的 bibble 意味着 Foo.BibbleHooch 应该与 xy 相同

鉴于这些是不同的排列，我会说它们都是有效的场景。当然可以删除一些重复，但事实仍然是需要大量测试来涵盖构造函数的创建。如果我有 SetBibble() / SetHooch 方法，我就会陷入严重的重复。

我的问题是：你会测试以上多少，你如何处理排列的测试，编写测试的成本何时超过测试的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:03:31.783

我会测试实际的逻辑，而不是因为测试 getter 和 setter 而忘乎所以。通常在测试对象之间的交互过程中会涉及到 getter 和 setter。在您的示例中，我认为可能需要测试的唯一事情是抛出 IllegalArgumentExceptions，并且格式化有效。（考虑到您的属性允许成员重置为 null，测试是否抛出异常并没有太大价值。）

单元测试应该主要对开发人员有用，它们不是为了让管理人员满意或满足代码覆盖率指标（尽管有很多地方被这种事情冲昏了头脑）。我不会花时间测试不相关的事物的不同组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:11:38.010

为什么要测试不相关参数之间的交互？您在问题中命名了许多重复的测试。如我所见，您有：

## 空测试

*   `ArgumentNullException`测试空圣经
*   `ArgumentNullException`测试空 hooch
*   `ArgumentNullException`空钩测试

## 属性测试

*   `Bibble`由ctor正确设置的属性
*   `Hooch`由ctor正确设置的属性
*   `BibbleHooch`属性返回期望值

这 6 个测试完全涵盖了课堂上所有可能的场景。

> 如果我有 SetBibble() / SetHooch 方法，我就会陷入严重的重复。

如果没有必要，不要暴露 setter。更喜欢你的类的最小接口——你需要更少的测试并且逻辑会更简单。

# javascript - 如何从无线电组中删除 Spry 验证？

> ID：16063460
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:09.617
> 
> 标签：javascript, spry

我了解如何破坏文本字段的验证，但是当我将相同的逻辑应用于单选按钮组时，Spry 验证不会破坏。

在下面的示例中，您会看到单选按钮，如果用户选择个人以外的任何内容，我将尝试在其中销毁验证。

```
<script>
var spryradio1;

function checkData(){
    // get the value
    document.getElementById("spryradio1").style.display = "none";
    var value = document.applicationform.type.options[document.applicationform.type.options.selectedIndex].value;
    if(value !=""){
    if(value == "Individual"){

        if(!spryradio1){
        spryradio1 = new Spry.Widget.ValidationRadio("spryradio1");
        }

        document.getElementById("spryradio1").style.display = "block";

    } else {

        // if there is a validaiton in sprytextfield destory it, and clear the variable

        if(spryradio1 && spryradio1.destroy){
            spryradio1.resetClasses();
            spryradio1.destroy();
            spryradio1 = null;
            }

        document.getElementById("spryradio1").style.display = "none";
    }
    // proceed with the rest as normal
    }
    return true;
};
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:38:36.657

单选按钮不喜欢 resetClasses 行；当我将这些行更改为：

```
if(spryradio1)
{ spryradio1.reset();
spryradio1.destroy();
spryradio1 = null; } 
```

# excel - 从 Excel 中的文件名修剪扩展名

> ID：16063463
> 
> 赞同：4
> 
> 时间：2013-04-17T14:58:12.403
> 
> 标签：excel, trim

我有这个公式。这很好用，但是当包括点在内有 5 个字符时会失败。

例如，

abcdefgh.pdf =TRIM(LEFT(A1,LEN(A1)-4)) 给我 abcdefgh xyz.xlsx =TRIM(LEFT(A2,LEN(A2)-4)) 给我 xyz。

是否有一个公式可以查找最后一个点并修剪最后一个点之后的所有内容？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T15:05:03.367

试试这个公式来摆脱最后一个点和之后的一切

`=LEFT(A1,LOOKUP(2^15,FIND(".",A1,ROW(INDIRECT("1:"&LEN(A1)))))-1)`

如果根据您的示例只有一个点，那么您只需要

`=LEFT(A1,FIND(".",A1)-1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T14:28:18.807

这个公式效果很好

```
=TRIM(RIGHT(SUBSTITUTE(A1,".",REPT(" ",100)),100)) 
```

它用 100 个空格替换每个句点，然后返回正确的 100 个字符并修剪它。您也可以替换“。” 用“\”获取文件名。

[在 excelforum.com 上感谢 NBVC](http://www.excelforum.com/excel-formulas-and-functions/833633-how-to-extract-filename-from-path-filename.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T08:16:46.480

可以试试下面的公式。

```
=SUBSTITUTE(A1,"."& RIGHT(A1,LEN(A1)-FIND("|",SUBSTITUTE(A1,".","|",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))),"") 
```

这适用于具有 2 到 7 个字符的文件扩展名的文件扩展名，文件名中包含完整路径和命名空间表示法。

你也可以使用

```
=RIGHT(A1,LEN(A1)-FIND("|",SUBSTITUTE(A1,".","|",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))) 
```

找到文件的扩展名。

# networking - Django - 从局域网内访问站点？

> ID：16063464
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:13.963
> 
> 标签：networking, ip, lan, nat

我有一个从内部 LAN 运行的生产 Django 服务器。该站点可通过使用子域从局域网外部访问。所以，像`http://app.ourdomain.com`

我的问题是，当我们的办公室互联网出现故障时，与 Django 服务器在同一局域网上的人们将如何访问 django 应用程序？我试过使用服务器本身的 IP，`192.168.1.140`但那不起作用。这将我带到“未找到 - 在此服务器上未找到请求的 URL”。

我将如何完成从 LAN 内连接到我们的 Django 应用程序？

谢谢

**编辑***

只是为了增加一些清晰度：这里有一些配置文件：

启用 Apache 站点：

```
VirtualHost *:443>

        SSLEngine on
        SSLProtocol all
        SSLCertificateFile /usr/local/ssl/crt/certificate.crt
        SSLCertificateKeyFile /usr/local/ssl/crt/cpm.capitalirrigation.com
        SSLCertificateChainFile /usr/local/ssl/crt/intermediate.crt
        ServerAdmin elijah@capitalirrigation.com
        ServerName https://cpm.capitalirrigation.com

        AliasMatch ^/([^/]*\.css) /srv/www/cpm/static_media/css/$1
        Alias /static_media/ /srv/www/cpm/static_media/
        Alias /static/admin/ /usr/local/lib/python2.6/dist-packages/django/contrib/admin/media/
        Alias /favicon.ico "/srv/www/cpm/static_media/img/favicon.ico"

    <Directory /srv/www/cpm/static_media/>
        Options -Indexes
        Order deny,allow
        Allow from all
    </Directory>

    WSGIScriptAlias / /srv/www/cpm/django.wsgi 
```

而且，我的`django.wsgi`：

```
import os
import sys

path = '/srv/www'
if path not in sys.path:
   sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'cpm.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:15:27.517

您是否尝试使用 https 协议和您的 ip 运行

```
https://192.168.1.140 
```

# mysql - 用于 OS X 的带有 PHP 隧道脚本的桌面 MySQL 数据库管理器

> ID：16063465
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:18.777
> 
> 标签：mysql, macos

我正在寻找一个好的桌面应用程序（最好在 OSX 上）来管理我在共享主机上的 MySQL 数据库。该主机不允许外部连接，我也无法通过 SSH 连接

例如，Navicat SQL 可以通过在桌面应用程序将其数据发送到的 Web 服务器上有一个中间 PHP 脚本来规避这个限制。遗憾的是，我不记得应用程序的名称以及它在 OS X 上是否良好或存在。

你知道任何？

# regex - 正则表达式从文件中获取组

> ID：16063466
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:20.613
> 
> 标签：regex

我的字符串看起来像：

```
Especificação do Título

GRND3 - GRENDENE

GRND3 - GRENDENE

POSI3 - POSITIVO INF 
```

我需要将 GRND3、GRND3、POSI3 分成 3 个单独的组。

有什么表达我可以轻松做到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:05:28.843

未指定特定语言的问题是`^`可能意味着行首或文本开始。

**if`^`表示行首：**

```
"^(\w+) -" 
```

应该覆盖它。然后你得到第一组（同样是特定于语言的）。

**如果`^`表示文本的开头（在上述情况下也可以）：**

不同的系统上有不同的行分隔符，但通常这应该有效：

```
"\n(\w+) -" 
```

并再次获得第一组。

请注意，我假设您要获取的字符串仅包含字母和数字，在这种情况下`\w+`（这意味着一个或多个 ( `+`) 单词字符（字母或数字））并且该字符串后跟一个空格，然后是 a `-`。

不确定“3 个单独的组”是什么意思，您通常只需遍历所有匹配项，但如果您想在 1 个正则表达式中匹配它们，应该这样做：

```
"\n(\w+) - (?:\w|\s)*\r?\n(\w+) - (?:\w|\s)*\r?\n(\w+) -" 
```

虽然这并不漂亮，但难以维护和理解并且容易出错。

# excel - SharePoint + Excel 与宏

> ID：16063469
> 
> 赞同：1
> 
> 时间：2013-04-17T14:58:28.917
> 
> 标签：excel, sharepoint, vba

我试图弄清楚如何将 Excel 电子表格从映射驱动器移动到 SharePoint。

我们有一个工程部门使用此电子表格来保存工作和工作编号的活动列表。

它像这样分解：

用户打开 Job Tracking 电子表格并输入信息 在最后一个选项卡上，有一个红色按钮可转到另一个 Excel 工作簿，该工作簿提供下一个可用的工作编号，并在红色按钮所在的 Job Tracking 电子表格中生成。

单击红色按钮时运行的代码：

```
Private Sub CommandButton1_Click()
    Dim JTS As String
    Dim yRow, UseRow
    Dim Msg, Style, Title, Help, Ctxt, Response, Msg1, Msg2, Msg3

    UnProtect_Files

    If Worksheets("HANDOVER").Range("Job_No") <> "" Then GoTo JobFill1
    If Len(Worksheets("HANDOVER").Range("C4")) < 1 Then GoTo WhereCust1

    JTS = "P:\Job Tracking\Job Tracking Spreadsheet.xls"

    On Error GoTo Lock1

    OpBkNow:
    Workbooks.Open (JTS)

    'Look for available Job# in Job Tracking Spreadsheet

    For yRow = 23 To 10000
    If Workbooks("Job Tracking Spreadsheet.xls").Worksheets("Proposed-Active").Cells(yRow, 2) = "" Then UseRow = yRow: Exit For Next yRow
    'This should never happen, but if there is no available Job#, print msg and exit sub
    If UseRow < 23 Or UseRow > 10000 Then GoTo RowNtFnd

    'Make changes to Job Tracking Spreadsheet
    ThisWorkbook.Worksheets("Formulas").Range("B98") = Workbooks("Job Tracking Spreadsheet.xls").Worksheets("Proposed-Active").Cells(UseRow, 1)
    Workbooks("Job Tracking Spreadsheet.xls").Worksheets("Proposed-Active").Cells(UseRow, 2) = ThisWorkbook.Worksheets("HANDOVER").Range("C4")
    ThisWorkbook.Worksheets("HANDOVER").Range("Job_No") = ThisWorkbook.Worksheets("Formulas").Range("B98")
    Workbooks("Job Tracking Spreadsheet.xls").Worksheets("Proposed-Active").Cells(UseRow, 3) = ThisWorkbook.Worksheets("HANDOVER").Range("D7")

    GoTo QuitSb2

    RowNtFnd:
    Msg = "There are no available Job Numbers in the Job Tracking Spreadsheet.  You will need to manually add one."
    Style = vbOKOnly: Title = "Job Number Not Found": Help = "": Ctxt = 0
    Response = MsgBox(Msg, Style, Title, Help, Ctxt)

    QuitSb2:
    Workbooks("Job Tracking Spreadsheet.xls").Close SaveChanges:=True
    GoTo QuitSb1

    WhereCust1:
    'No Owner Name Given
    Msg = "An entry in the CUSTOMER field is required when generating a Job Number!"
    Style = vbOKOnly: Title = "Need Customer Info - Try Again": Help = "": Ctxt = 0
    Response = MsgBox(Msg, Style, Title, Help, Ctxt)
    GoTo QuitSb1

    JobFill1:
    'There is already a generated job number
    Msg1 = "A Job Number ("
    Msg2 = Worksheets("HANDOVER").Range("Job_No")
    Msg3 = ") has already been generated for this job!"

    Msg = Msg1 & Msg2 & Msg3
    Style = vbOKOnly: Title = "Job Number Exists": Help = "": Ctxt = 0
    Response = MsgBox(Msg, Style, Title, Help, Ctxt)
    GoTo QuitSb1

    Lock1:
    'There is already a generated job number
    Msg1 = "The Job Tracking spreadsheet is currently in use.  "
    Msg2 = "Please try to generate a Job Number later."
    Msg = Msg1 & Msg2
    Style = vbOKOnly: Title = "File In Use": Help = "": Ctxt = 0
    Response = MsgBox(Msg, Style, Title, Help, Ctxt)
    GoTo QuitSb1

    QuitSb1:

    'RER 3-29-05 remove auto file create as per Scott Penatzer request
    'Create_New_File

    Protect_Files
End Sub 
```

以另一种方式来做这一切可能更容易，但最终企业宁愿我什么也不做。是否可以让 SharePoint 上的多个文档相互通信并完全避免网络共享？请尽快提出建议。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:33:26.883

是的，您可以让文件通过 SharePoint 进行通信。转到 SharePoint 中的库，单击功能区中的“在资源管理器中打开”。这将为您提供文件的文件夹位置。您应该能够像映射驱动器位置一样引用该 URL，并打开/更新/保存 SharePoint 文件。祝你好运。

# aptana - Aptana Studio - 按 F12 时在网络浏览器中运行

> ID：16063472
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:42.133
> 
> 标签：aptana

所以，我只是将 Run-Hotkey 编辑为 F12 而不是 CTRL+F11。当我现在按 F12 时，脚本运行，但它不在 Firefox 中运行。它在 Aptana 控制台中运行。当我从下拉菜单中选择 Firefox 时，它适用于 Firefox，但是当我按 F12 打开 Firefox 时，我想要它。我希望这很清楚我想要做什么。

# flash - Flash actionscript - gotoAndPlay() 错误 1009 无法访问空对象的属性或方法

> ID：16063477
> 
> 赞同：0
> 
> 时间：2013-04-17T14:58:57.530
> 
> 标签：flash, actionscript

我是新手，需要一些帮助。

我正在用 Flash 制作游戏，但一直收到错误 1009。

我列出了我的游戏结束条件，每次发生游戏结束并调用 gotoAndPlay(1) 代码时，我都会收到错误消息。如果我注释掉 gotoAndPlay(1) 行，错误就会消失。

这是代码：

```
this.addEventListener(Event.ENTER_FRAME, gameOver);
    function gameOver(e:Event):void{
        //gameover conditions
        if (ball.y > 799 - ball.width / 2 && score > 0)
        {
            trace("GameOver!");
            if (this.contains(ball)){
            this.removeChild(ball);
            trace("Chicken removed");
            }
gotoAndPlay(1);
}
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:55:10.390

这可能是因为内联函数在它自己的（全局）范围内运行。它仍然可以访问函数中定义的变量，所以通常这样解决。

```
 this.addEventListener(Event.ENTER_FRAME, gameOver);
  var obj:DisplayObject = this;

  function gameOver(e:Event):void {
      //gameover conditions
      if (ball.y > 799 - ball.width / 2 && score > 0) {
          trace("GameOver!");
          if (this.contains(ball)) {
              this.removeChild(ball);
              trace("Chicken removed");
          }
          obj.gotoAndPlay(1);
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:48:05.060

更改了您的代码：

```
 this.addEventListener(Event.ENTER_FRAME, gameOver);
    function gameOver(e:Event):void{
        //gameover conditions
        if (ball.y > 799 - ball.width / 2 && score > 0)
        {
            trace("GameOver!");
            if (this.contains(ball)){
removeEventListener(Event.ENTER_FRAME, gameOver);
            this.removeChild(ball);
            trace("Chicken removed");
            }
gotoAndPlay(1);
}
} 
```

添加了 removeEventListener。

# iphone - iphone开发：如何设置另一个viewController的属性然后到达它

> ID：16063479
> 
> 赞同：4
> 
> 时间：2013-04-17T14:58:58.907
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

可以说我有两个视图控制器`ViewControllerA`，`ViewControllerB`当我按下一个按钮时，`viewcontrollerA`它正在推到`viewControllerB`. 但是在推送之前，我想设置`viewControllerB`from的属性`viewControllerA`。但是`nil`当我检查变量时，我得到的只是价值`viewControllerB`。我要做的是；

在`ViewControllerA`：

```
VCB = [[ViewControllerB alloc]init];
[VCB setPropertyOfViewControllerB:someString];
NSLog(@"value: %@", VCB.PropertyOfViewControllerB); // Here I observe the correct value so I set successfully 
```

但问题是我也想从中获得它，`viewControllerB`但我得到`nil`了变量。

在`ViewControllerB`：

```
//I already defined in h file as property
NSString *PropertyOfViewControllerB;
@property(nonatomic, retain) NSString *PropertyOfViewControllerB; 
```

但是当我尝试检查 ViewControllerB 的 viewDidLoad 方法中的值时

```
NSLog(@"value: %@", PropertyOfViewControllerB);//here I get null not the value I set at viewControllerA 
```

可能我错过了一个我无法弄清楚的小点。任何帮助都是极好的。谢谢。

* * *

编辑：我正在使用故事板。我使用以下代码推送：

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
    lvc = [storyboard instantiateViewControllerWithIdentifier:@"mainManu"];
    [self.navigationController pushViewController:lvc animated:YES]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:13:02.373

如果您使用`VCB = [[ViewControllerB alloc]init];`但通过 Storyboard 推送，则 VCB 与 Storyboard 中使用的 ViewController 不同。尝试这个：

```
 - (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     if ([[segue identifier] isEqualToString:@"yourSegueName"]) {
         ViewControllerB *vc = [segue destinationViewController];
         [vc setPropertyOfViewControllerB:@"foo"];
     }  
} 
```

# perl - 当条件为真时，将值从一个文件复制到另一个文件

> ID：16063482
> 
> 赞同：0
> 
> 时间：2013-04-17T14:59:02.813
> 
> 标签：perl

我有两张桌子。如果满足某个条件，我想将值从一个文件复制到另一个文件。这就是一切的样子

表格1

```
C1    C2    C3
1     a     b
3     e     f 
```

表 2

```
C1    C2    ...  ...    C7    C8 ...
      1          
      2
      3 
```

表2应该变成这样：

```
C1    C2    ...  ...    C7    C8 ...
      1                       x=b  
      2          
      3                       x=f 
```

所以如果C1（table1）和C2（table2）的值相同，那么表1的C3的值应该放在表2的C8列。C8中的新值应该都是以“x=”开头的由表 1 中的相应值

这是我目前用来打开数据的脚本

```
my $data1 = $ARGV[0];
my $data2 = $ARGV[1];

unless ($data1) {
    print "Enter filename:\n";
    $data1 = <STDIN>;
    chomp $data1;}
open(DATA1,'<',$data1) or die "Could not open file $filename $!";

unless ($data2) {
    print "Enter filename:\n";
    $data2 = <STDIN>;
    chomp $data2;}
open(DATA2,'<',$data2) or die "Could not open file $filename $!";

while (<DATA1>) {
    my @columns = split /\s+/;
    next  if /^\s*C/;
      # I'm doing some transformations here so that my input DATA1 has the format of  table 1 in my example
    }

foreach $c1(sort {$a<=>$b} keys %info ) {
    print $c1, "\t", 
      join(',',@{$info{$c1}->{variant}}), "\t", 
      join(',',@{$info{$c1}->{frequency}}), "\n";
# so $c1 is actually how table 1 in my example looks like
}

my %hash;

while($c1){
     my @columns = split;
     $hash{$columns[0]} = [$columns[2]];
     }

while (<DATA2>) {
     my @columns = split;               
     $columns[7] = @{ $hash{ $columns[0] } }[2] if exists $hash{ $columns[0] };
     print "\t", join (@columns), "\n";
     } 
```

这是带有@choroba 提供的解决方案的脚本。但是肯定有问题，因为我没有在屏幕上得到任何输出。

以及如何在复制值时添加语句“x=”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:07:57.240

使用哈希来记住第一个文件。

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

my ($data1, $data2) = @ARGV;

open my $T1, '<', $data1 or die $!;
my %hash;
while (<$T1>) {
    my @fields = split;
    $hash{$fields[0]} = [ @fields[ 1, 2 ] ];
}

open my $T2, '<', $data2 or die $!;
while (<$T2>) {
    my @fields = split;
    @fields[1, 2] = @{ $hash{ $fields[0] } }[0, 1] if exists $hash{ $fields[0] };
    say join "\t", @fields;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:10:02.267

您可以对第一个文件使用哈希来执行此操作：

```
my %columns1;
while (<DATA1>) {
    my @c = split /\s+/;
    $columns1{$c[0]} = [ @c ];
    next  if /^\s*C/;}
my %columns2;
while (<DATA2>) {
     my @c = split /\s+/;
     if (defined $columns1{$c[0]}) {
        $c[1] = $columns1{$c[0]}[1];
        $c[2] = $columns1{$c[0]}[2];
     }
     $columns2{$c[0]} = [ @c ];
} 
```

# sql-server - tsql日期列更新

> ID：16063495
> 
> 赞同：0
> 
> 时间：2013-04-17T14:59:43.203
> 
> 标签：sql-server, tsql, date, sql-update

我有一个日期列在**yyyy-mm-dd**我想将它转换为**dd/mm/yyyyy**。此列的数据类型是**nvarchar(20)**。我愿意更改数据类型。我试过的查询是

```
Update table1
set Column1= Convert(nvarchar(10),column1,101). 
```

它正在执行，但没有做出任何改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:02:21.683

您的数据并不是**真正**的日期。它目前是一个字符串，所以`Convert`不会有任何影响。

您需要：

`update table1 set Column1 = Convert(nvarchar(10), Convert(datetime, column1), 101)`

但更好的是，您应该考虑将列数据类型更改为`datetime`，然后在您从表中获取数据`convert`时将其转换为所需的格式。`select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:03:10.983

您需要将值转换两次，

```
Update table1 
set Column1 = CONVERT(nvarchar(10),CONVERT(datetime, REPLACE(column1,'-','.'), 102), 103) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/df7ab/1)

# browser - 如何阅读用户代理详细信息

> ID：16063499
> 
> 赞同：16
> 
> 时间：2013-04-17T14:59:50.863
> 
> 标签：browser, user-agent

这是我的用户代理

```
Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31 
```

我知道我正在使用 chrome，所以我知道它来自**chrome version 26**。但剩下的信息是什么？

我怎样才能读取字符串。我可以从 userAgent 收集到什么？

解析 userAgent 并读取其中的每个属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-03-09T11:54:42.407

来自[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent)：

## 句法

> ```
> User-Agent: <product> / <product-version> <comment>
> 
> Common format for web browsers:
> 
> User-Agent: Mozilla/<version> (<system-information>) <platform> (<platform-details>) <extensions> 
> ```

## 指令

> ```
> <product>
>   A product identifier
> 
> <product-version>
>   A version number of the product.
> 
> <comment>
>   Zero or more comments containing sub product information, for example. 
> ```

* * *

## 例子

## Firefox UA 字符串：

```
Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0
Mozilla/5.0 (Macintosh; Intel Mac OS X x.y; rv:42.0) Gecko/20100101 Firefox/42.0 
```

## Chrome UA 字符串：

> Chrome（或基于 Chromium/blink 的引擎）用户代理字符串类似于 Firefox 格式。为了兼容性，它添加了像“KHTML，像 Gecko”和“Safari”这样的字符串。

```
Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36 
```

## Safari UA 字符串：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1 
```

## Internet Explorer UA 字符串：

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T16:36:32.947

用户代理字符串提供有关应用程序类型、操作系统、软件供应商/版本和布局渲染引擎的信息。

根据浏览器的不同，您还将获得其他信息。IE 提供包含有关 .NET 运行时版本的信息的功能标记。您可以在此处了解有关 IE 特定令牌的更多信息 - [http://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx)

不确定您是否需要这个，但肯定有助于理解用户代理字符串是如何解码的 - [http://www.texsoft.it/index.php?c=software&m=sw.php.useragent&l=it](http://www.texsoft.it/index.php?c=software&m=sw.php.useragent&l=it)

# ios - 具有混合静态/动态内容的 UITableViewController 中的 NSRangeException

> ID：16063501
> 
> 赞同：5
> 
> 时间：2013-04-17T14:59:51.687
> 
> 标签：ios, uitableview, uistoryboard

使用 iOS6 和故事板，我有一个包含 3 个部分的 UITableViewController。

前两个部分是静态的，第三个部分是动态的。

我已经覆盖`numberOfRowsInSection`,`cellForRowAtIndexPath`并`heightForRowAtIndexPath`正确地推迟到第 0 节和第 1 节的 super ，并从我的数据模型中为第 2 节返回适当的值。

尽管如此，当我的数据中的行数超过故事板中为第三部分配置的行数时，我在 main() 中得到一个 NSRangeException：

`'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' *** First throw call stack: (0x22f3012 0x178ae7e 0x22a8b44 0xb0ece4 0x8feee3 0x784f13 0x71940c 0x784a7b 0x789919 0x7899cf 0x7721bb 0x782b4b 0x71f2dd 0x179e6b0 0x558fc0 0x54d33c 0x54d150 0x4cb0bc 0x4cc227 0x4cc8e2 0x22bbafe 0x22bba3d 0x22997c2 0x2298f44 0x2298e1b 0x26867e3 0x2686668 0x6ceffc 0x2c4d 0x2b75) libc++abi.dylib: terminate called throwing an exception`

为了防止发生此异常，我必须重写哪些超类方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T14:59:51.687

我缺少的实现是：

`-(NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath { return 0; }`

这意味着总共有四种方法必须重写才能将动态行为注入静态原型 UITableViewController：

1.  `-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`;

2.  `-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

3.  `-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

4.  `-(NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath`

希望这可以节省一些时间。

# c# - 动态创建标签和富文本框

> ID：16063508
> 
> 赞同：0
> 
> 时间：2013-04-17T15:00:07.553
> 
> 标签：c#, wpf, list, label

我正在尝试在触发事件时显示 x 数量的标签和标签旁边的富文本框，不幸的是我无法这样做，下面的代码显示了我尝试`labels`仅使用`5 labels`only 但它没有甚至在项目编译和执行时都不显示它们。我昨天和今天早上都在谷歌上搜索了一天，但我找不到具体的例子。如果有人能指出我正确的方向（我仍然需要制作富文本框，但我认为这与标签的过程相同），我将非常感激。谢谢。

```
List<Label> labels = new List<Label>();

for (int i = 0; i <= 5; i++)
{
    Label label = new Label();
    label.Name = "lbl" + i;
    mainPanel.Children.Add(label);
} 
```

`Edit:`我忘了提到这些`Labels`，`RichTextBoxes`将进入一个`Grid`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:50:33.643

你的代码就快到了。

将 mainPanel.Children 更改为 mainPanel.Controls 并向标签添加一些文本，以便您可以看到它们。（顺便说一句，您正在创建 6 个标签而不是 5，因为您使用 0 到 5 而不是 0 到 < 5）

这在流程布局面板中对我有用（在常规面板中，所有标签都将位于彼此之上）：

```
 private void button1_Click(object sender, EventArgs e)
    {
        List<Label> labels = new List<Label>();
        for (int i = 0; i <= 5; i++)
        {
            Label label = new Label();
            label.Name = "lbl" + i;
            label.Text = "Test text";
            mainPanel.Controls.Add(label);
        }

        List<RichTextBox> textBoxes = new List<RichTextBox>();
        for (int col = 0; col < 2; col++)
        {
            for (int row = 0; row < 2; row++)
            {
                RichTextBox richTB = new RichTextBox();
                richTB.Name = "textBox" + col + row;
                tableLayoutPanel1.Controls.Add(richTB);
                tableLayoutPanel1.SetColumn(richTB, col);
                tableLayoutPanel1.SetRow(richTB, row);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:11:51.573

非常感谢您的帮助，您在此处发布的内容实际上对我有很大帮助，但是，我使用以下代码解决了我的问题：

```
for (int i = 0; i < lineCount; i++)
{
    TextBlock txtb = new TextBlock();
    scrlPanel.RowDefinitions.Add(new RowDefinition());

    txtb.Name = "txtb" + i;
    txtb.Text = obj.ReadLine();
    txtb.Height = 60;
    txtb.Width = 110;
    txtb.HorizontalAlignment = HorizontalAlignment.Left;
    txtb.TextAlignment = TextAlignment.Justify;
    txtb.TextWrapping = TextWrapping.Wrap;
    txtb.ToolTip = txtb.Text;
    scrlPanel.Children.Add(txtb);
    Grid.SetRow(txtb, i);
}

for (int i = 0; i < lineCount; i++)
{
    RichTextBox rtb = new RichTextBox();
    Paragraph p = rtb.Document.Blocks.FirstBlock as Paragraph;

    rtb.Name = "rtb" + i;
    rtb.Height = 60;
    rtb.Width = 220;

    p.LineHeight = 1;
    rtb.HorizontalAlignment = HorizontalAlignment.Right;
    scrlPanel.Children.Add(rtb);
    Grid.SetRow(rtb, i);
} 
```

我不知道这是否是使用它的正确方法，但它有效：D。再次感谢！！！

# ios - Core Data ManagedObject - 无法设置属性值

> ID：16063510
> 
> 赞同：0
> 
> 时间：2013-04-17T15:00:17.737
> 
> 标签：ios, objective-c, core-data, nsmanagedobjectcontext

我在将值写入 Core Data 托管对象中的属性时遇到问题。谁能告诉我我在这里做错了什么.. PSNDataSync 是一个单例，我用来传递我的托管对象上下文以及保存其他共享变量。我正在尝试在我的 Image 对象中设置“路径”属性。

放入断点表明 imageURL 具有有效的 NSURL 值，并且在我的 CoreData 实体中，路径设置为可转换类型。

```
NSError *imgError = nil;
NSEntityDescription *imgED = [NSEntityDescription entityForName:@"Image" inManagedObjectContext:[[PSNDataSync instance]context]];
Image *img = [[Image alloc] initWithEntity:imgED insertIntoManagedObjectContext:[[PSNDataSync instance]context]];

[img setValue:imageURL forKey:@"path"];
[img setInventory:(Inventory *)[[PSNDataSync instance]currentInventory]];

[[[PSNDataSync instance]context] insertObject:img];
[[[PSNDataSync instance]context] save:&imgError]; 
```

# three.js - perf 麻烦在三个 js 的球体上绘制 256 个多边形

> ID：16063511
> 
> 赞同：0
> 
> 时间：2013-04-17T15:00:21.863
> 
> 标签：three.js, opengl-es-2.0, webgl

当我尝试使用先前生成和三角化的多边形在我的球体上插入 256 个网格时，我遇到了一个问题

1）性能压倒性，5fps，真的不明白为什么，当我使用 webgl inpspector 检查缓冲区时，我可以看到存储了超过 30k 的缓冲区！我最多只画 256 个多边形...

2）多边形不在我球体的表面而是在内部，它们没有变形

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:36:45.743

移动：

```
new THREE.MeshBasicMaterial({color:0x00ff00*0.05})); 
```

在循环之前。由于您使用的是相同的材料，因此您只需声明一次（推送到 gpu 一次），而不是每次循环迭代。所以：

```
var mat = new THREE.MeshBasicMaterial({color:0x00ff00*0.05}));
for(i=0; i<mygeometry.length;i++){
  var object = new THREE.mesh(mygeometry[i],mat);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T20:34:51.090

据我所知，您正在创建 256 个对象（缓冲区）而不是单个对象。您应该将所有这些多边形添加到单个几何体中。

# css - Firefox：使用最小宽度和最大高度时如何防止水平滚动条？

> ID：16063513
> 
> 赞同：3
> 
> 时间：2013-04-17T15:00:29.557
> 
> 标签：css, firefox, html, cross-browser, scrollbar

我有一个动态创建的表放在一个 div 中。整个结构可以在页面上任意定位。要求是（自动垂直滚动条，从不水平滚动条）：
- 当文本较长时放大的最小宽度
- 最大高度和当有更多行时滚动条应该出现。
HTML：

```
<div class="container" style="top:5px;">
<table>
  <tr><td style="white-space: nowrap;">Lorem ipsum dolor sit amet, consectetur adipisicing elit;</tr></td>
  <tr><td>2ed do eiusmod tempor</tr></td>
  <tr><td>3ed do eiusmod tempor</tr></td>
  <tr><td>4ed do eiusmod tempor</tr></td> 
</table> 
```

CSS：

```
.container {
   background-color: grey;  
   max-height: 50px;min-width: 70px;
   overflow-y: auto;
   position: absolute;} 
```

[http://jsfiddle.net/PUMAj/](http://jsfiddle.net/PUMAj/)

该代码在 IE (10) 中按预期工作，但是当出现垂直滚动条时，Firefox 中有一个水平滚动条。似乎在 Firefox 中没有正确计算滚动条的宽度。我试过 `overflow:-moz-scrollbars-vertical;`了，它隐藏了水平滚动条（[How to get firefox to show an auto Horizo​​ntal scollbar for a div?](https://stackoverflow.com/questions/676388/how-to-get-firefox-to-show-an-auto-horizontal-scollbar-for-a-div)），但部分文本隐藏在滚动条下，`overflow-y:scroll;`这导致垂直滚动条始终存在但不隐藏文本。

**编辑**

所需的输出是（IE10）

![IE10 结果](https://i.stack.imgur.com/8kEuU.jpg)

但在 Firefox 中，我有这个：

![火狐结果](https://i.stack.imgur.com/3FUpl.jpg)

建议溢出隐藏不是解决办法。

![溢出-y隐藏](https://i.stack.imgur.com/CgXnG.jpg) `overflow-y:hidden`（无法进行所需的滚动）

![溢出 x 隐藏](https://i.stack.imgur.com/qZxlE.jpg) `overflow-x:hiden`（部分文字被隐藏）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-23T10:18:25.767

只需在右侧添加一些填充:)

```
padding-right: 8px;
overflow-x: hidden; 
```

[http://jsfiddle.net/PUMAj/18/](http://jsfiddle.net/PUMAj/18/)

[![无填充](https://i.stack.imgur.com/mQwdL.png)](https://i.stack.imgur.com/mQwdL.png) [![带填充物](https://i.stack.imgur.com/4xy1h.png)](https://i.stack.imgur.com/4xy1h.png)

# javascript - 如果页面不是使用 window.open() 打开的，如何使用 jQuery 关闭浏览器/页面？

> ID：16063514
> 
> 赞同：0
> 
> 时间：2013-04-17T15:00:29.630
> 
> 标签：javascript, jquery, events, window

我的站点中有一个注销事件，一旦用户单击注销，他们的 cookie 就会被清除，如果用户愿意，我还会显示一个关闭页面或浏览器的链接。

关闭浏览器的链接ID是`closeBrowser`

这是我的`jQuery`代码

```
$(document).ready(function() {
    $('#closeBrowser').click(function(){        
        window.close();
    });
}); 
```

我认为它不起作用，因为该页面未使用`window.open() event`. 但是，我不确定。

用户单击该链接后如何关闭页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:10:41.350

状态的**[文档](https://developer.mozilla.org/en-US/docs/DOM/window.close)**`window.close()`：

> 仅允许为使用 window.open 方法的脚本打开的窗口调用此方法。如果窗口不是由脚本打开的，JavaScript 控制台中会出现以下错误：脚本可能不会关闭不是由脚本打开的窗口。

# ms-access - 如何使访问功能区菜单“粘滞”？

> ID：16063516
> 
> 赞同：1
> 
> 时间：2013-04-17T15:00:32.210
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我开发了一个 Access 功能区菜单，它可以工作。

我的问题是如何让它“粘”？（带有选定选项的选项卡保持打开状态）

即，假设您从功能区的第三个选项卡中选择了一个选项。该过程执行后，在我的应用程序中，它会将您带回菜单上的第一个选项卡。

如果用户从第三个选项卡中选择一个菜单项，我希望第三个选项卡在进程执行后可见。

我知道这是可能的，因为 MS 的所有默认功能区菜单都以这种方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:31:56.417

这实际上是 Access 2010 SP1 之后的一个错误（它以前可以正常工作）。

有一些方法可以缓解这个问题，但到目前为止还没有官方修复（虽然我没有测试过 Access 2013）。

请参阅问题：[是否可以防止 MS Access 在使用自定义功能区时自动更改所选功能区选项卡？](https://stackoverflow.com/questions/11091025/is-it-possible-to-prevent-ms-access-from-changing-the-selected-ribbon-tab-automa)

# c# - 这个语句在 C# 中是什么意思？

> ID：16063518
> 
> 赞同：11
> 
> 时间：2013-04-17T15:00:46.730
> 
> 标签：c#, if-statement

以下代码块中的含义是什么`if ((a & b) == b)`？

```
if ((e.Modifiers & Keys.Shift) == Keys.Shift)
{
    lbl.Text += "\n" + "Shift was held down.";
} 
```

为什么不是这样？

```
if (e.Modifiers == Keys.Shift)
{
    lbl.Text += "\n" + "Shift was held down.";
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T15:10:29.880

如果你看一下[`Keys`enum](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)，这是带有属性的[标志枚举。](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)`[FlagsAttribute]`

> 仅当要对数值执行按位运算（AND、OR、EXCLUSIVE OR）时，才对枚举使用 FlagsAttribute 自定义属性。
> 
> 以 2 的幂定义枚举常数，即 1、2、4、8 等。这意味着组合枚举常量中的各个标志不重叠。

所以`e.Modifiers`可能是多个枚举的组合：

```
e.Modifiers = Keys.Shift | Keys.Cancel | Keys.Enter 
```

只是非常简单的假设来解释这个概念：

```
Keys.Shift  : 001 (1)
Keys.Cancel : 010 (2)
Keys.Enter  : 100 (4) 
```

所以：

```
e.Modifiers = Keys.Shift | Keys.Cancel | Keys.Enter equal 001 | 010 | 100 = 111 
```

和条件：

```
 e.Modifiers & Keys.Shift equal 111 & 001 = 001 
```

它的意思是：

```
 e.Modifiers & Keys.Shift == Keys.Shift 
```

如果`e.Modifiers`不包含`Keys.Shift`：

```
e.Modifiers = Keys.Cancel | Keys.Enter (110) 
```

所以结果将是：

```
e.Modifiers & Keys.Shift equals 110 & 001 = 000 (is not Keys.Shift) 
```

总而言之，这个条件检查是否`e.Modifiers`包含`Keys.Shift`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:06:12.427

这是布尔逻辑（& =“按位与”）。您检查变量是否包含值。这就像一个过滤器。

例子：

```
a   -> 00110011
b   -> 00000011
a&b -> 00000011 
```

在您的代码中

```
if ((e.Modifiers & Keys.Shift) == Keys.Shift) 
```

检查 Keys.Shift 是否包含在 e.Modifiers 中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T15:06:17.700

一个 & 符号是指[按位 AND 运算符](http://msdn.microsoft.com/en-us/library/sbf85k1c.aspx)。当与具有`[Flags]`属性的枚举结合使用时，`Keys`枚举确实如此，它用于确定是否设置了该枚举的位之一。

可能同时按下了多个修饰键，这就是为什么使用它而不是直接比较的原因。

[您可以在此处](http://msdn.microsoft.com/en-us/library/vstudio/cc138362.aspx)阅读有关枚举标志的更多信息。向下滚动到标题为“作为位标志的枚举类型”的小节。您将看到与此非常相似的示例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T15:05:32.150

一个与号 (&) 是按位与，所以它基本上是将 (a & b) 的值相加，然后测试 (a & b) == b 中的相等性

因此，在您的示例中，基本上是说是否按下了 shift 键（任意键 + shift）== shift。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-17T15:07:03.640

它使用按位运算来查询是否设置了“标志”（位）（等于 1）。

可能最好在[http://msdn.microsoft.com/en-us/library/vstudio/cc138362.aspx上阅读枚举和按位运算](http://msdn.microsoft.com/en-us/library/vstudio/cc138362.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-17T15:07:12.953

`&`是按位与运算符。它所做的`Keys`是一个标志枚举，其中的值`Keys`可以是几个值的按位组合。因此，要测试任何特定值，您首先将您的值与您要测试的值相比较，然后将其与您要测试的值进行比较。

例如，您可能*同时*按住 shift 和 ctrl 键，因此 in 的值`e.Modifier`将是`Keys.Shift`and的按位组合`Keys.Ctrl`。所以这：

```
e.Modifier == Keys.Shift 
```

是假的。Shift 被按住，但 Ctrl 也被按住。如果您想知道 Shift 是否被按住而不管其他键可能被按住，您需要首先过滤掉所有其他键。这很容易通过`Keys.Shift`用作过滤器来完成：

```
(e.Modifier & Keys.Shift) == Keys.Shift 
```

现在，如果按住 shift 键而*不管其他键可能被按下*，这将是正确的，否则将是错误的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-17T15:07:23.867

**第1部分**

这是逻辑与运算符。

当多个标志应该在一个中设置时使用它，例如整数：

例如，a 是 3，表示二进制的 00000011。b 例如是 2，表示二进制的 00000010。

当您想检查 a 是否具有 b 代表设置的标志（右起第二位）时，您可以使用 AND 运算符：

a & b = 00000010

当它等于 b（或大于 0）时，您知道该标志已设置。

**第2部分**

相等运算符也可用于您要检查“Keys.Shift”是否是唯一的“修饰符”键并且没有按下其他键的情况。当您使用第一个代码时，也可以按下其他“修饰符”键，并且 if 条件仍然为真。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-17T15:09:53.877

单个与号 (&) 执行按位与运算；双与号 (&&) 执行布尔 AND 运算。

逐位并对两个参数的每一位执行 AND 运算（因此称为“逐位”）。因此，按位与运算（或任何按位运算）的输出将不是布尔值。以下是按位与运算的一些示例：

```
1001 & 0001 = 0001
1101 & 1111 = 1101 
```

布尔 AND 对两个布尔值进行运算并返回一个布尔值：

```
true && true = true
false && true = false 
```

**短路**
也可以对两个返回布尔值的表达式执行布尔 AND 运算 (&&)：

```
int a = 5;
int b = 10;
bool result = (a < 3) && (b > 3);
// result will be false; 
```

因为第一个表达式的`(a < 3)`计算结果是`false`，所以结果不可能是`true`，因为两个表达式都必须计算`true`结果才能是`true`。因此，甚至不会计算第二个表达式。这称为“短路”。但是，对于按位与运算，两个表达式都需要在执行运算之前进行计算。因此，在大多数情况下，您只想确定两件事是否为真（布尔值），布尔值 AND (&&) 将是最佳选择。

在您的示例中，代码将内部`e.Modifiers`的各个位与`Keys.Shift`. 两个参数都不代表布尔值，因此操作是按位 (&) 而不是布尔值 (&&)。

# c# - 如何在 C# 中创建异步方法？

> ID：16063520
> 
> 赞同：211
> 
> 时间：2013-04-17T15:00:50.677
> 
> 标签：c#, async-await, c#-5.0

我读过的每一篇博文都告诉你如何在 C# 中使用异步方法，但出于某种奇怪的原因，从未解释过如何构建自己的异步方法来使用。所以我现在有这段代码使用我的方法：

```
private async void button1_Click(object sender, EventArgs e)
{
    var now = await CountToAsync(1000);
    label1.Text = now.ToString();
} 
```

我写了这个方法`CountToAsync`：

```
private Task<DateTime> CountToAsync(int num = 1000)
{
    return Task.Factory.StartNew(() =>
    {
        for (int i = 0; i < num; i++)
        {
            Console.WriteLine("#{0}", i);
        }
    }).ContinueWith(x => DateTime.Now);
} 
```

**这是`Task.Factory`编写异步方法的最佳方式，还是我应该以另一种方式编写？**

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-04-17T15:30:59.980

`StartNew`除非您需要那种复杂程度，否则我不建议您这样做。

如果您的异步方法依赖于其他异步方法，最简单的方法是使用`async`关键字：

```
private static async Task<DateTime> CountToAsync(int num = 10)
{
  for (int i = 0; i < num; i++)
  {
    await Task.Delay(TimeSpan.FromSeconds(1));
  }

  return DateTime.Now;
} 
```

如果您的异步方法正在做 CPU 工作，您应该使用`Task.Run`：

```
private static async Task<DateTime> CountToAsync(int num = 10)
{
  await Task.Run(() => ...);
  return DateTime.Now;
} 
```

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-02T10:33:19.410

如果您不想在方法中使用 async/await，但仍要“装饰”它以便能够从外部使用 await 关键字，[TaskCompletionSource.cs](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskcompletionsource-1)：

```
public static Task<T> RunAsync<T>(Func<T> function)
{ 
    if (function == null) throw new ArgumentNullException(“function”); 
    var tcs = new TaskCompletionSource<T>(); 
    ThreadPool.QueueUserWorkItem(_ =>          
    { 
        try 
        {  
           T result = function(); 
           tcs.SetResult(result);  
        } 
        catch(Exception exc) { tcs.SetException(exc); } 
   }); 
   return tcs.Task; 
} 
```

[从这里](https://blogs.msdn.microsoft.com/pfxteam/2009/06/02/the-nature-of-taskcompletionsourcetresult/)和[这里](https://msdn.microsoft.com/en-us/library/hh873177(v=vs.110).aspx)

> 为了支持这样的 Task 范式，我们需要一种方法来保留 Task 外观和将任意异步操作称为 Task 的能力，但要根据提供异步，并以不显着成本的方式这样做。这就是 TaskCompletionSource 的目的。

我看到它也用于 .NET 源代码，例如[WebClient.cs](https://referencesource.microsoft.com/#System/net/System/Net/webclient.cs,c113b360583ad964)：

```
 [HostProtection(ExternalThreading = true)]
    [ComVisible(false)]
    public Task<string> UploadStringTaskAsync(Uri address, string method, string data)
    {
        // Create the task to be returned
        var tcs = new TaskCompletionSource<string>(address);

        // Setup the callback event handler
        UploadStringCompletedEventHandler handler = null;
        handler = (sender, e) => HandleCompletion(tcs, e, (args) => args.Result, handler, (webClient, completion) => webClient.UploadStringCompleted -= completion);
        this.UploadStringCompleted += handler;

        // Start the async operation.
        try { this.UploadStringAsync(address, method, data, tcs); }
        catch
        {
            this.UploadStringCompleted -= handler;
            throw;
        }

        // Return the task that represents the async operation
        return tcs.Task;
    } 
```

最后，我还发现以下有用：

> 我一直被问到这个问题。这意味着一定有某个线程阻塞了对外部资源的 I/O 调用。所以，异步代码释放了请求线程，但代价是系统中其他地方的另一个线程，对吧？一点都不。
> 
> 为了理解为什么异步请求会扩展，我将跟踪一个（简化的）异步 I/O 调用示例。假设一个请求需要写入一个文件。请求线程调用异步写入方法。WriteAsync 由基类库 (BCL) 实现，并为其异步 I/O 使用完成端口。因此，WriteAsync 调用作为异步文件写入传递给操作系统。然后，操作系统与驱动程序堆栈通信，传递数据以写入 I/O 请求数据包 (IRP)。
> 
> 这就是事情变得有趣的地方：如果设备驱动程序不能立即处理 IRP，它必须异步处理它。因此，驱动程序告诉磁盘开始写入并向操作系统返回“挂起”响应。操作系统将该“未决”响应传递给 BCL，然后 BCL 将不完整的任务返回给请求处理代码。请求处理代码等待任务，该任务从该方法返回一个不完整的任务，依此类推。最后，请求处理代码最终将一个不完整的任务返回给 ASP.NET，请求线程被释放以返回线程池。

[ASP.NET 上的 Async/Await 简介](https://msdn.microsoft.com/en-gb/magazine/dn802603.aspx)

如果目标是提高可扩展性（而不是响应能力），那么这一切都依赖于提供这样做机会的外部 I/O 的存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-06T16:35:24.913

使方法异步的一种非常简单的方法是使用 Task.Yield() 方法。正如 MSDN 所说：

> 您可以使用 await Task.Yield(); 在异步方法中强制方法异步完成。

将其插入方法的开头，然后它将立即返回给调用者并在另一个线程上完成该方法的其余部分。

```
private async Task<DateTime> CountToAsync(int num = 1000)
{
    await Task.Yield();
    for (int i = 0; i < num; i++)
    {
        Console.WriteLine("#{0}", i);
    }
    return DateTime.Now;
} 
```

# c# - 要求解释表格参考上的代码

> ID：16063522
> 
> 赞同：0
> 
> 时间：2013-04-17T15:00:51.920
> 
> 标签：c#

带 * 的行如何`Form2`被引用`Form1`？我的意思是当`Form1`被实例化时，它只能被名称Form1引用。但是在带有 * 的行中，`Form1`它被用作类型而不是对象。但是，您可以使用 m_parent 作为 `Form1`名为的形式的参考`Form2` （我希望有人可能会得到我想要问的内容。）

```
public partial class Form2 : Form
    {
*        private Form1 m_parent;

*        public Form2(Form1 frm1)
        {
            InitializeComponent();
*            m_parent = frm1;
        }
     }

public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:04:05.723

你有一个 Form2 的构造函数，它引用一个 Form1 实例。在 Form1 上可能有如下代码：

```
var form = new Form2(this);
form.Show(); 
```

发生的事情是您创建 Form2 并引用当前表单并显示它。它现在可以访问 Form1 的公共成员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:06:53.443

Form1 和 Form2 都是可以实例化的普通类。

在 Form2 类中有一个构造函数，它以 Form1 对象的实例作为参数。在构造函数的主体中，参数（对 Form1 对象的引用）然后存储在 m_parent 变量中。

# linq-to-entities - 所有实体的实体框架动态 DbSet

> ID：16063526
> 
> 赞同：5
> 
> 时间：2013-04-17T15:00:56.850
> 
> 标签：linq-to-entities, entity-framework-5, dynamic-data, auto-generate

我有一个用实体框架映射的数据库，

我需要实现一个通用方法来获取基于我传递的参数的项目列表：

```
getGenericList("product"); // returns the list of products
getGenericList("customer"); // returns the list of customers 
```

我需要动态获取`dbSet`. 我的方法是这样实现的：

```
public static List<object> getGenericList(string entityType)
    {
        List<object> myDynamicList = new List<object>();
        using (cduContext db = new cduContext())
        {
            DbSet dbSet = db.getDBSet(entityType);
            var myDynamicList = dbSet.Select(p => p).ToList();
        }
        return new List<object>();
    } 
```

my`dbSets`首先由 EF 代码自动生成：

```
public DbSet<Product> Products { get; set; }
public DbSet<Custommer> Custommers { get; set; } 
```

我的`getDBSet(entityType)`方法是在上下文中实现的，如下所示：

```
public DbSet<T> getDBSet<T>(string entityName) where T : class
    {
        switch (entityName)
        {

            case "product":
                return Products;

            case "custommer":
                return Custommers; 
```

然后我得到了这个错误：

> 无法将类型“System.Data.Entity.DbSet”隐式转换为“System.Data.Entity.DbSet”

请有任何想法！？

NB ， 的方法`Set()`不行`dbContext`；类型应该明确给出......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T03:05:42.553

最好远离字符串作为类型并将它们映射到真实类型；那是代码的味道。相反，请使用类型本身。无论哪种方式，让我们重构使用该`getGenericList()`方法的代码以使用泛型。如果您无法摆脱字符串，请在调用的代码中`getGenericList()`进行映射，而不是在该方法内部进行映射，因为我们遵循您提出的模式。

另请注意，在您的原始文件中，`getGenericList()`您总是返回一个空列表，而不是您通过 EF 获得的列表。您还使用了 2 个不同的`myDynamicList`变量；外面的那个被语句范围内的那个掩盖，`using`这就是为什么你没有得到编译器错误的原因。一旦`using`超出范围，内部`myDynamicList`也会超出范围。我已经在这里解决了这个问题。

```
public static List<T> getGenericList<T>()
{
    List<T> myDynamicList;

    using (cduContext db = new cduContext())
    {
        // consider using exception handling here as GetDbSet might get an invalid type
        DbSet dbSet = db.GetDbSet<T>();
        myDynamicList = dbSet.Select(p => p).ToList();
    }

    if (myDynamicList != null && myDynamicList.Count() > 0)
    {
        return myDynamicList;
    }
    return new List<T>();
}

// in your context class
public DbSet<T> GetDbSet<T>() where T : class
{
    return this.Set<T>();
}

// this is the code that calls getGenericList(); put this inside a function somewhere. 
// entityName holds a string value, set previously
switch(entityName.ToLower()) // making entityName case insensitive
{
    case "product":
        return getGenericList<Product>();

    case "customer":
        return getGenericList<Customer>();
} 
```

希望您不会有太多要映射的实体类型，否则您最终会得到一个巨大的`switch`语句。同样，如果您使用的是`switch`声明，通常这可能表明您需要重新考虑您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-06T08:10:02.487

为避免`switch`，您可以通过其程序集限定名称查找类型，然后从中获取`DbSet`。以这种方式检索的 DbSet 不是泛型<>，因此您可以执行的操作更加有限。

您可以通过使用已知的实体类型（例如`Product`）来获取程序集限定名称，获取其程序集限定名称，然后将“Product”替换为所需名称以获得类型。

[此示例是从Breeze](http://breeze.github.io/)应用程序简化而来的，在该应用程序中，可以从客户端按名称请求某些查找实体。

```
public async Task<List<object>> GetGenericList(string entityType)
{
  using (var context = new MyContext())
  {
    var aqtemp = typeof(Product).AssemblyQualifiedName; // template for qualified name

    var aqname = aqtemp.Replace("Product", entityType); // qualified name for entityType

    var type = Type.GetType(aqname, true, true);      // Type for entityType

    var list = await context.Set(type).ToListAsync(); // query the entities
    return list;
  }
} 
```

# symfony - Validator 组件中的翻译

> ID：16063531
> 
> 赞同：5
> 
> 时间：2013-04-17T15:01:04.413
> 
> 标签：symfony, symfony-components

我目前正在将 Symfony 验证器组件集成到自定义 PHP 应用程序中。到目前为止，一切都很好，我可以验证我的用户输入。

现在我想将验证消息翻译到另一个语言环境并集成了翻译组件（由于 DefaultTranslator 中的 TranslatorInterface 的依赖，它无论如何都是必需的）。

默认 Translator 仅支持硬编码到 ValidationConstraints 中的语言环境。据我所知，我需要指定一个自定义 Translator 实例，该实例从 Validator 组件中的 xliff 文件加载字符串。

这是我走了多远，但遗憾的是德语翻译不会加载：

```
 $translator = new Translator('de_DE');
    $translator->setFallbackLocale('en_GB');
    $translator->addLoader('xliff', new XliffFileLoader());

    $builder = new ValidatorBuilder();
    $validator = $builder
            ->setTranslator($translator)
            ->getValidator();
    $violations = $validator->validateValue($input, self::getValidationConstraints()); 
```

有什么建议我可能会在这里遗漏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T12:03:02.127

自己发现了。当然需要加载翻译文件......由于对 FileLoader 类的依赖，还需要添加 Symfony 配置组件。

```
 $translator = new Translator('de');
    $translator->addLoader('xliff', new XliffFileLoader());
    $translator->addResource('xliff', '<path-to-compontnt>/Resources/translations/validators.de.xlf', 'de','validation');

    $builder = new ValidatorBuilder();
    $validator = $builder
            ->setTranslator($translator)
            ->setTranslationDomain('validation')
            ->getValidator(); 
```

# regex - 填字游戏的正则表达式

> ID：16063534
> 
> 赞同：1
> 
> 时间：2013-04-17T15:01:06.060
> 
> 标签：regex, crossword

这是一个填字游戏。例子：

*   解决方案是一个以“r”开头并以“r”结尾的 6 个字母的单词
*   因此模式是“r....r”
*   未知的 4 个字母必须从字母“a”、“e”、“i”和“p”的池中抽取
*   每个字母必须只使用一次
*   我们有大量候选 6 字母单词

解决方案：“剑杆”或“修复”。

过滤模式“r....r”是微不足道的，但是在“未知”插槽中找到也有 [aeip] 的单词超出了我的范围。

这个问题适合正则表达式，还是必须通过详尽的方法来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:55:35.657

尝试这个：

```
r(?:(?!\1)a()|(?!\2)e()|(?!\3)i()|(?!\4)p()){4}r 
```

...或者更具可读性：

```
r
(?:
  (?!\1) a () |
  (?!\2) e () |
  (?!\3) i () |
  (?!\4) p ()
){4}
r 
```

空组用作复选标记，在每个字母被消耗时打勾。例如，如果要匹配的单词是`repair`，则 the`e`将是此构造匹配的第一个字母。`e`如果正则表达式稍后尝试匹配另一个，则该替代将不匹配它。负前瞻`(?!\2)`将失败，因为第 2 组已经参加了比赛，更不用说它没有消耗任何东西。

真正酷的是它同样适用于包含重复字母的字符串。举个`redeem`例子：

```
r
(?:
  (?!\1) e () |
  (?!\2) e () |
  (?!\3) e () |
  (?!\4) d ()
){4}
m 
```

在第一个`e`被消耗后，第一个替代品被有效地禁用，所以第二个替代品取而代之。等等...

不幸的是，这种技术不适用于所有正则表达式。一方面，他们并不都将空/失败的组捕获视为相同的。ECMAScript 规范明确指出，对非参与组的引用应该总是成功的。

正则表达式风格还必须支持前向引用——即出现在它们在正则表达式中引用的组之前的反向引用。( [ref](http://www.regular-expressions.info/brackets.html) ) 据我所知，它应该可以在 .NET、Java、Perl、PCRE 和 Ruby 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:07:11.487

假设您的意思是未知字母必须在 [aeip] 之间，那么合适的正则表达式可能是：

```
/r[aeip]{4,4}r/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T08:26:38.223

由于 sed 多正则表达式操作，未完全正则表达式

```
sed -n -e '/^r[aiep]\{4,\}r$/{/\([aiep]\).*\1/!p;}' YourFile 
```

取组中的模式 4 字母`aeip`，`r`只保留在子组中没有找到字母的行两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:10:49.487

用于比较字符串的前端语言是什么，是 java、.net ...

这是使用 java 的示例/伪代码

```
 String mandateLetters = "aeio"
    String regPattern = "\\br["+mandateLetters+"]*r$";  // or if for specific length \\br[+mandateLetters+]{4}r$

    Pattern pattern = Pattern.compile(regPattern);
    Matcher matcher = pattern.matcher("is this repair ");

    matcher.find(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T15:16:38.887

为什么不替换每个“。” 在您的原始模式中使用“[aeip]”？

你会得到一个正则表达式 string `r[aeip][aeip][aeip][aeip]r`。

这当然可以缩短为`r[aeip]{4,4}r`，但在一般情况下实现起来会很痛苦，并且可能不会改进代码。

这并没有解决重复字母使用的问题。如果我正在编码它，我会在正则表达式之外的代码中处理它 - 主要是因为正则表达式会变得比我想要处理的更复杂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T15:18:32.777

所以“只有一次”部分是关键。列出所有排列显然是不可行的。如果您的语言/环境支持前瞻和反向引用，您可以让自己更轻松一些：

```
r(?=[aeip]{4,4})(.)(?!\1)(.)(?!\1|\2)(.)(?!\1|\2|\3).r 
```

仍然很丑陋，但它是这样工作的：

```
r     # match an r
(?=   # positive lookahead (doesn't advance position of "cursor" in input string)
  [aeip]{4,4}
)     # make sure that there are the four desired character ahead
(.)   # match any character and capture it in group 1
(?!\1)# make sure that the next character is NOT the same as the previous one
(.)   # match any character and capture it in group 2
(?!\1|\2)
      # make sure that the next character is neither the first nor the second
(.)   # match any character and capture it in group 3
(?!\1|\2|\3)
      # same thing again for all three characters
.     # match another arbitrary character
r     # match an r 
```

[工作演示。](http://regexr.com?34ihu)

这既不优雅也不可扩展。因此，您可能只想使用`r([aiep]{4,4})r`（捕获四个关键字母）并确保没有正则表达式的附加条件。

**编辑：**事实上，如果你只是想确保你有 4 个不相同的字符，上述模式才是真正有用和必要的。对于您的具体情况，再次使用前瞻，有更简单（尽管更长）的解决方案：

```
r(?=[^a]*a[^a]*r)(?=[^e]*e[^e]*r)(?=[^i]*i[^i]*r)(?=[^p]*p[^p]*r)[aeip]{4,4}r 
```

解释：

```
r       # match an r
(?=     # lookahead: ensure that there is exactly one a until the next r
  [^a]* # match an arbitrary amount of non-a characters
  a     # match one a
  [^a]* # match an arbitrary amount of non-a characters
  r     # match the final r
)       # end of lookahead
(?=[^e]*e[^e]*r)  # ensure that there is exactly one e until the next r
(?=[^i]*i[^i]*r)  # ensure that there is exactly one i until the next r
(?=[^p]*p[^p]*r)  # ensure that there is exactly one p until the next r
[aeip]{4,4}r      # actually match the rest to include it in the result 
```

[工作演示。](http://regexr.com?34iip)

对于`r....m`的池`deee`，可以将其调整为：

```
r(?=[^d]*d[^d]*m)(?=[^e]*(?:e[^e])*{3,3}m)[de]{4,4}m 
```

这确保了`d`恰好 1 秒和 3`e`秒。

[工作演示。](http://regexr.com?34iis)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-09T11:56:01.563

一个更具可扩展性的解决方案（无需为每个字母或位置编写 \1、\2、\3 等）是使用负前瞻来断言每个字符稍后不会出现：

```
^r(?:([aeip])(?!.*\1)){4}r$ 
```

更具可读性：

```
^r
(?:
  ([aeip])
  (?!.*\1)
){4}
r$ 
```

* * *

## 改进

这是一个快速的解决方案，适用于您给我们的情况，但这里有一些额外的限制，以获得更强大的版本：

*   如果“字母池”可能与字符串结尾共享一些字母，请在前瞻中包含模式结尾：

    ```
    ^r(?:([aeip])(?!.*\1.*\2)){4}(r$) 
    ```

    （可能无法在所有正则表达式风格中按预期工作，在这种情况下，复制粘贴模式的结尾而不是使用`\2`）

*   如果某些字母不仅必须出现一次，而且必须出现不同的固定次数，请为共享此次数的所有字母添加单独的前瞻。例如，带有一个“a”和一个“p”但两个“e”的“r....r”将被这个正则表达式匹配（但“rapper”和“repeer”不会）：

    ```
    ^r(?:([ap])(?!.*\1.*\3)|([e])(?!.*\2.*\2.*\3)){4}(r$) 
    ```

    非捕获组现在有 2 个备选方案：`([ap])(?!.*\1.*\3)`匹配 "a" 或 "p" 在任何地方都没有跟随，直到另一个结尾，`([e])(?!.*\2.*\2.*\3)`它匹配 "e" 在任何地方都没有跟随，直到其他 2 个结尾（所以它在第一个失败如果总共有 3 个，则为一个）。顺便说一句，此解决方案包括上述解决方案，但模式的结尾在这里转移到`\3`（另请参阅关于风味的注释）。

# c# - 如何管理 IsCompleted 值

> ID：16063535
> 
> 赞同：1
> 
> 时间：2013-04-17T15:01:13.810
> 
> 标签：c#, .net, task

我像那样删除文件。并且需要知道何时更新 UI（中的文件列表`ListBox`）。

我不知道我该怎么做......我可以`fi.DeleteAsync().IsCompleted` 以某种方式使用价值吗？

```
FileInfo fi = new FileInfo(currentPackage.FullPathFileName);          
fi.DeleteAsync().Wait();          
// Here I need some code to check when it is done. Any clues?

...

public static class FileExtensions
{
  public static Task DeleteAsync(this FileInfo fi)
  {
     return Task.Factory.StartNew(() => fi.Delete());
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:15:53.643

而不是调用`Wait`，您应该使用延续：

```
fi.DeleteAsync().ContinueWith(t => { /* update ui here */ }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

使用`TaskScheduler.FromCurrentSyncronizationContext()`确保延续在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:08:45.070

删除后`fi.DeleteAsync().Wait();`

您可以检查该文件是否不存在，`if(!fi.exists)`然后更新您的 UI。

# jquery - 如何让 jQuery $.ajax 下载 XLSX 文档？

> ID：16063536
> 
> 赞同：0
> 
> 时间：2013-04-17T15:01:16.187
> 
> 标签：jquery

我目前有这个带有两个链接的标记，我正试图通过 AJAX 调用这两个链接。

我有一个搜索，它根据使用的开始和结束日期运行查询，并且我有一个导出到 Excel 链接，我试图下载一个使用开始和结束日期的 Excel 文档。

除了`#export` `$.ajax`接到下载 Excel 文档的电话外，一切正常。

如何让 jQuery 下载 Excel 文档？

```
<a href="#" class="buttonH bBlue" id="export">Export to Excel</a>
<a href="#" class="buttonH bBlue" id="search">Search</a>
<div class="headInput" id="reportsDateSearch">
    <input type="text" name="start_date" placeholder="<%= @end_date %>" class="datepicker" id="endDate" />
    <input type="text" name="end_date" placeholder="<%= @start_date %>" class="datepicker" id="startDate" />            
</div> 
```

jQuery AJAX 调用：

```
// This call gets the data based on the start and end date used
    $('#search').on('click', function() {
        $.ajax({
            type: "GET",
            beforeSend: function(xhr) { 
                xhr.setRequestHeader("Accept", "text/javascript");
            },
            url: '<%= reports_affirmative_action_path %>',
            data: {start_date: $('#startDate').val(), end_date: $('#endDate').val()}
        }, null, 'script');
    });

// This call gets the data based on the start and end date used, but i'm trying to get it to return the xlsx format.
    $('#export').on('click', function() {
        $.ajax({
                type: "GET",
                beforeSend: function(xhr) { 
                    xhr.setRequestHeader("Accept", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
                },
                url: '<%= reports_affirmative_action_path(:format => :xlsx) %>',
                data: {start_date: $('#startDate').val(), end_date: $('#endDate').val()}
        }, null, 'script');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:14:42.730

最简单的方法是只更新单击的锚标记的 href。

```
$('#export').on('click', function() {
    this.href = "<%= reports_affirmative_action_path(:format => :xlsx) %>?" + 
        $.param({start_date: $('#startDate').val(), end_date: $('#endDate').val()});
}); 
```

# javascript - jquery如何设置文件名

> ID：16063539
> 
> 赞同：0
> 
> 时间：2013-04-17T15:01:26.157
> 
> 标签：javascript, jquery, download, client-side

（这个标题可能不清楚，但无论你在这里读到什么，都是试图通过“质量标准”脚本的改进，根据所选择的标签，这似乎要严格得多）

在客户端，jquery 中有什么方法可以设置下载文件的名称吗？

假设在我的服务器上文件存储为`QXYZO123`，但该文件实际上是 information.xls ，一个电子表格。甚至超链接也显示 information.xls，因为我有将随机文件名链接到原始文件名的信息。

当用户点击链接时，默认情况下它会尝试下载存储在服务器上的文件名 QXYZO123，但我希望它改为 information.xls ，我该如何设置它以建议文件名另存为?

我称之为建议，因为根据用户的浏览器设置，它会自动下载我的文件名建议或询问用户在哪里下载并保存它，文件名建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:36:01.583

JQuery 没有直接设置文件属性。JQuery 表示一些 Javascript 代码，而 Javascript 是一种客户端脚本语言。这意味着你可以做一些事情，只能在客户端，不能在服务器端。

但是有一些间接的方法可以做到这一点。首先，唯一的方法是在服务器端设置文件名。这取决于您在服务器端使用的语言。取决于服务器端语言，您可以编写自己的下载 web api。将文件名作为请求参数传递给您的 api，并让它为您提供具有自定义文件名的文件。我不知道您在服务器端使用什么语言，但我用 node.js 准备了一个服务器端代码，它接受“GET”请求中的自定义文件名作为参数。

```
var sys = require ('sys'),
url = require('url'),
http = require('http'),
qs = require('querystring');
var path = require('path');
var mime = require('mime');
var fs = require('fs');

var server=http.createServer(

function (request, response) {

      if(request.method=='GET') {
        var filePath='path_to_your_file_in_your_server_file_system';
        var filestream = fs.createReadStream(filePath);
        var url_parts = url.parse(request.url,true);
        console.log(url_parts);
        var fileName= url_parts.query.fileName; //Taking your customized file name from GET request parameters.
        if(!fileName)
        {
            fileName=path.basename(filePath);
        }

        var mimetype = mime.lookup(filePath);
        response.setHeader('Content-disposition', 'attachment; filename=' + fileName);
        response.setHeader('Content-type', mimetype);
        filestream.pipe(response);

        response.writeHead( 200 );

        response.end();
    }               
}
);

server.listen( 9080 ); 
```

当您使用 node.js 运行此服务器代码时，您可以从 url 获取具有自定义文件名的文件 `localhost:9080?fileName=yourCustomizedFileName`。如您所见，我们在 url 中提供了 fileName 'GET' 请求参数。您可以使用 javascript windows.location 或其他方式在客户端 Javascript 代码上使用自定义文件名获取文件。不要让 node.js 代码让您感到困惑。解决方案的重点是编写一个下载 api，该 api 从 'GET' 请求中获取 fileName 参数，以将具有此名称的文件发送给客户端。

您可以将此 node.js 代码应用于您的服务器端语言或研究如何应用它。可能，它不会很难找到和应用它。

# prolog - 无法访问 Prolog 中的文件

> ID：16063542
> 
> 赞同：0
> 
> 时间：2013-04-17T15:01:33.250
> 
> 标签：prolog

我正在使用 SWI-Prolog 研究 Prolog。

我发现以下示例存在一些问题，这些示例只是访问文件并将用户放入 Prolog Shell 中的内容写入其中。

```
processFile(File) :- see(File),
                 processFile,
                 seen.

processFile :- read(Query),
               process(Query).

process(end_of_file) :- !.

process(Query) :- Query,
                  write(Query),
              nl,
              processFile. 
```

问题是，当我在 Prolog shell 中尝试使用文件名执行 processFile 语句时，我得到一个错误：

如果我给出带有扩展名的文件名，则会收到此错误消息（似乎将扩展名解释为运算符）：

```
7 ?- processFile(myFile.txt).
ERROR: Syntax error: Operator expected
ERROR: processFile(myFile
ERROR: ** here **
ERROR: .txt) . 
```

如果我给出一个不带扩展名的文件名，我会收到其他错误消息（文件不存在）：

```
7 ?- processFile(myFile).
ERROR: see/1: source_sink `myFile' does not exist (No such file or directory) 
```

因此，我还尝试在 prolog 源代码文件所在的同一文件夹中创建一个名为**myFile （不带扩展名）的新文件，但我仍然再次获得：**

```
8 ?- processFile(myFile).
ERROR: see/1: source_sink `myFile' does not exist (No such file or directory) 
```

为什么？错误在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T17:03:06.923

正如@larsmans 所说，使用单引号。

如果您确定文件存在，则“不存在”错误可能是因为当前工作目录不是您所想的那样。

尝试将当前工作目录更改为 .txt 文件所在的位置`cd('directory-path-here')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:35:00.637

您需要引用文件名。

```
processFile('myFile.txt'). 
```

# android - 从自定义适配器内的 ListView 中删除项目

> ID：16063546
> 
> 赞同：6
> 
> 时间：2013-04-17T15:01:41.790
> 
> 标签：android, listview, android-listview, custom-adapter

我有一个包含“删除”按钮的自定义列表视图项。我创建了一个名为`LazyListAdapter`extends的自定义适配器`BaseAdapter`。在我覆盖的 getView 方法中，我将此按钮的 onclick 方法设置如下：

```
@Override
public View getView(final int pos, View convertView, ViewGroup parent) {

     View v = convertView;

     // Some other things...

     ImageButton removeFav = (ImageButton) v.findViewById(R.id.removeFavorites);

     removeFav.setOnClickListener(new OnClickListener() {

     @Override
     public void onClick(View v) {

          // I delete the object from Parse database here,
          // Therefore I want the view to disappear here
     }
} 
```

如何使用此 onclick 方法中的代码删除或以某种方式隐藏相应的视图？还是我应该改变我的方法？

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:38:11.580

尝试这个

```
@Override
public View getView(final int pos, View convertView, ViewGroup parent) {

    View v = convertView;

    // Some other things...

    ImageButton removeFav = (ImageButton) v.findViewById(R.id.removeFavorites);

    removeFav.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

       // After you delete the object from Parse database here,
       notifyDataSetChanged();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T11:42:57.983

Simply you can remove an item inside getview method as in the example

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder viewHolder;

    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.list_row, null, false);
        viewHolder = new ViewHolder();
        viewHolder.img = (ImageView) convertView.findViewById(R.id.img);
        convertView.setTag(viewHolder);

    } else {
        // we call the view created before to not create a view in each time
        viewHolder = (ViewHolder) convertView.getTag();
    }

    final int imgId = imageId.get(position);

    viewHolder.img.setImageResource(imgId);

    viewHolder.img.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Toast.makeText(context, "Clicked " + imgId, Toast.LENGTH_SHORT)
                    .show();
        }
    });

    // Create a generic swipe-to-dismiss touch listener.
    viewHolder.img.setOnTouchListener(new SwipeDismissTouchListener(
            viewHolder.img, null,
            new SwipeDismissTouchListener.DismissCallbacks() {
                @Override
                public boolean canDismiss(Object token) {
                    return true;
                }

                @Override
                public void onDismiss(View view, Object token) {

                    Log.d(TAG, "Image ıd" + imgId);

                    imageId.remove(position);
                    remove(position);

                    notifyDataSetChanged();
                }
            }));

    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:06:52.707

尝试使用 parent.removeViewAt(position)。

# javascript - javascript中的类方法不是函数

> ID：16063549
> 
> 赞同：15
> 
> 时间：2013-04-17T15:01:49.977
> 
> 标签：javascript, object

答案一定很明显，但我看不到

这是我的 javascript 类：

```
var Authentification = function() {
        this.jeton = "",
        this.componentAvailable = false,
        Authentification.ACCESS_MASTER = "http://localhost:1923",

        isComponentAvailable = function() {
            var alea = 100000*(Math.random());

            $.ajax({
               url:  Authentification.ACCESS_MASTER + "/testcomposant?" + alea,
               type: "POST",
               success: function(data) {
                   echo(data);
               },
               error: function(message, status, errorThrown) {
                    alert(status);
                    alert(errorThrown);
               }
            });

            return true;
        };
    }; 
```

然后我实例化

```
var auth = new Authentification();

alert(Authentification.ACCESS_MASTER);    
alert(auth.componentAvailable);
alert(auth.isComponentAvailable()); 
```

除了最后一种方法，我什么都能用，它在 firebug 中说：

**auth.isComponentAvailable 不是一个函数**.. 但它是..

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T15:03:50.770

`isComponentAvailable`不附加到您的对象（即不是其属性），它只是被您的函数所包围；这使它成为私有的。

您可以在它前面加上前缀`this`以使其公开

`this.isComponentAvailable = function() {`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T15:27:25.140

isComponentAvailable is actually attached to the window object.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T15:03:52.683

`isComponentAvailable`是一个私有函数。您需要通过添加它来公开它`this`：

```
var Authentification = function() {
    this.jeton = "",
    this.componentAvailable = false,
    Authentification.ACCESS_MASTER = "http://localhost:1923";

    this.isComponentAvailable = function() {
        ...
    };
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T15:10:59.457

另一种看待它的方式是：

```
var Authentification = function() {
    // class data
    // ...
};

Authentification.prototype = {    // json object containing methods
    isComponentAvailable: function(){
        // returns a value
    }
};

var auth = new Authentification();
alert(auth.isComponentAvailable()); 
```

# unit-testing - How can I mock ServiceStack IHttpRequest

> ID：16063554
> 
> 赞同：4
> 
> 时间：2013-04-17T15:02:13.813
> 
> 标签：unit-testing, nunit, moq, servicestack

I'm trying to get a unit test working for a service that is injecting items into the IHttpRequest.Items, using a request filter:

```
this.RequestFilters.Add((req, res, dto) =>
{
    // simplified for readability...
    var repo = container.Resolve<IClientRepository>();
    var apiKey = req.Headers["ApiKey"];

    // lookup account code from api key
    var accountcode = repo.GetByApiKey(apiKey);
    req.Items.Add("AccountCode", accountCode);
}); 
```

My service uses that dictionary item:

```
public class UserService : AppServiceBase
{
    public IUserServiceGateway UserServiceGateway { get; set; }

    public object Any(UserRequest request)
    {
        var accountCode = base.Request.Items["AccountCode"].ToString();
        var user = UserServiceGateway.GetUserByUsername(request.Name);

        return new UserResponse { User = user };
    }
} 
```

My test needs be somehow to mock the request, and insert that account code item:

```
[Test]
public void ValidUsernameReturnUser()
{
    // arrange 
    var gateway = new Mock<IUserServiceGateway>();
    gateway.Setup(s => s.GetUserByUsername(It.IsAny<string>()))
            .Returns(new UserAccountDTO { Forename = "John", Surname = "Doe" });

    var service = new UserService {
        UserServiceGateway = gateway.Object,
        RequestContext = new MockRequestContext(),
        //Request = has no setter
    };

    // request is this case is null
    base.Request.Items.Add("AccountCode", "DEF456");

    // act
    var response = (UserResponse)service.Any(new UserRequest { Name = "test" });

    // assert
    Assert.That(response.Result, Is.Not.Null);    
} 
```

The service itself accepts a mocked RequestContext, but not a Request. The test therefore fails. Is there a better way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:00:19.150

我认为应该这样做。

```
[Test]
public void ValidUsernameReturnUser()
{
    // arrange 
    var mockRequestContext = new MockRequestContext();
    //add items to Request
    mockRequestContext.Get<IHttpRequest>().Items.Add("AccountCode", "DEF456");
    var gateway = new Mock<IUserServiceGateway>();
    gateway.Setup(s => s.GetUserByUsername(It.IsAny<string>()))
            .Returns(new UserAccountDTO { Forename = "John", Surname = "Doe" });

    var service = new UserService {
        UserServiceGateway = gateway.Object,
        RequestContext = new MockRequestContext(),
    };

    // act
    var response = (UserResponse)service.Any(new UserRequest { Name = "test" });

    // assert
    Assert.That(response.Result, Is.Not.Null);    
} 
```

# java - How to read Java InputStream without delay?

> ID：16063556
> 
> 赞同：0
> 
> 时间：2013-04-17T15:02:17.823
> 
> 标签：java, inputstream, stdout

I have C++ program (feeder.exe), that prints some data:

```
printf("%s\n", line); 
```

In average it produces 20-30 lines per second, but not uniformly.

I want to catch this data in Java program by running the exe from Java code:

```
package temp_read;    
import java.io.*;
public class Main {

    public static void main(String[] args) throws Throwable {
        Process p = Runtime.getRuntime().exec("d:/feeder.exe");
        InputStream is = p.getInputStream();
        BufferedReader in = new BufferedReader(new InputStreamReader(is));
        String line = null;
        while ((line = in.readLine()) != null) {
            System.out.println(System.currentTimeMillis() + "," + line);
        }
    }
} 
```

But when I look into the output, I see that it receives a bulk of strings once per 3-5 seconds.

**Question**: how to receive the data from feeder.exe immediately without any delay when it prints to stdout?

PS: not related question: How to stop the feeder.exe if I stop the java by Ctrl+C?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:16:26.210

如果重定向，stdout 可能会被缓冲，这意味着问题出在 C++ 代码中，而不是在 Java 端。一旦缓冲区已满，C++ 进程将缓冲输出并一次刷新几个“printf”。

如果您能够修改 C++ 软件，请尝试`fflush(stdout);`在 printf 之后执行 a 以强制刷新输出缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:22:41.553

最可能的原因是`feeder.exe`没有定期刷新其输出流，并且数据位于其输出缓冲区中，直到缓冲区填满并因此被写入。

如果这是原因，那么您在 Java 端无法采取任何措施来避免这种情况。该问题只能通过修改`feeder`应用程序来解决。

* * *

请注意，如果数据位于连接两个进程的“管道”中，那么在 Java 端读取数据即可。假设已将行尾写入管道，则该`readLine()`调用将传递该行而不会阻塞。

# c++ - 构造函数被调用多少次？

> ID：16063559
> 
> 赞同：3
> 
> 时间：2013-04-17T15:02:24.170
> 
> 标签：c++, copy-constructor, compiler-optimization

我是 C++ 编程的初学者，我有一个关于 C++ 类构造函数的简单问题。为以下代码片段调用构造函数多少次？

```
std::string s = std::string("hello world"); 
```

我想应该是两个吧？第一个是 string(const char* s)，第二个是 string(const string& s)。如果我错了，请纠正我。

下一个问题是，如果我在发布模式下编译代码，编译器会自动优化它吗？例如，将其视为`std::string s("hello world");`不同的编译器是否表现不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:07:30.527

源类型与目标类型相同的复制初始化（带有`=`）的行为非常类似于直接初始化。所以初始化等效于：

```
std::string s(std::string("hello world")); 
```

在没有优化的情况下，将按照您的描述调用两个构造函数。在 C++11 中，第二步（定义为`string(string&&)`）将首选移动构造函数，因为 `std::string("hello world")`它是一个右值表达式。但是，该标准明确允许在某些情况下省略复制/移动，包括以下情况：

> 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的复制/移动

因此，编译器可以选择优化掉副本。请注意，即使复制构造函数有一些奇怪的副作用，编译器也可能会这样做。也就是说，一个定义完善且有效的 C++ 程序可能有多个可能的执行路径。通常，您希望避免这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T15:06:10.080

您的代码符合复制省略的条件，因此大多数理智的编译器总是会这样对待，`std::string s("hello world");`除非明确指示不要这样做。

# java - Java 垃圾回收时间？

> ID：16063561
> 
> 赞同：9
> 
> 时间：2013-04-17T15:02:25.030
> 
> 标签：java, performance, garbage-collection

我在 Java 中有一个对性能非常敏感的应用程序。（我知道我实际上应该使用 C 或其他东西。但现在是 Java。）我试图避免创建和丢弃对象。现在我需要知道还有多少垃圾收集正在进行。

**我怎样才能知道？**

如果可能的话，我希望有一个以毫秒或纳秒为单位的数字，不需要安装更多软件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T15:10:50.490

或者你可以让 JVM 打印 GC 活动。我有这些设置：

```
-verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -XX:+PrintTenuringDistribution -Xloggc:logs/gc.log 
```

GC 活动被打印到文件*logs/gc.log* ..

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T15:05:59.413

您可以使用[VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/monitor_tab.html)等工具来监控应用程序活动。确保您使用适当的 GC 算法。

Oracle JVM 提供多种类型的垃圾收集器：

*   吞吐量收集器
*   并发低暂停收集器
*   增量（有时称为训练）低暂停收集器：

[在此处](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#1.1.%20Types%20of%20Collectors%7Coutline)阅读有关这些收藏家的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T15:05:02.830

您可以为此使用[VisualVm](http://visualvm.java.net/)，​​这正是您所需要的。
正如您在下面看到的，您有非常有用的 GC 活动：

![在此处输入图像描述](https://i.stack.imgur.com/4X9jN.png)

除了 GC Activity 之外，您还有很多详细信息，例如：堆使用情况、cpu 使用情况、对象实例使用情况等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T15:07:03.880

[Jprofiler](http://www.ej-technologies.com/products/jprofiler/overview.html) ，它使内存配置文件能够评估内存使用和动态分配泄漏以及 CPU 配置文件以评估线程冲突。

# jquery - What is the difference between `add`and `setup` in jQuery special events?

> ID：16063568
> 
> 赞同：0
> 
> 时间：2013-04-17T15:02:49.890
> 
> 标签：jquery

I am learning how to create custom events with jQuery, but I'm a little bit confused with some hooks.

What is exactly the difference between `setup` and `add` (and between `teardown` and `remove`)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:31:41.187

第一次将该名称的事件附加到元素上时会调用该`setup`钩子，因此您需要执行任何在该事件可能处于活动状态时应用的工作。`add`每次附加事件时都会调用该钩子，`setup`如果它恰好是第一次将事件附加到元素上，则会在之后发生。所以配对是`setup/teardown`和`add/remove`。

需要使用特殊事件挂钩并不常见。请注意，如果您更改标准 DOM 名称（如`click`or ）的行为，`mouseover`肯定会出现混乱。jQuery 本身为几个标准的 DOM 名称使用了特殊的事件系统，设置你自己的会破坏这些。

# mysql - mysql 请求 - 寻找不存在的记录

> ID：16063570
> 
> 赞同：1
> 
> 时间：2013-04-17T15:02:58.077
> 
> 标签：mysql

我有一个简单的教室预订系统，有两张桌子：

房间 ：

```
 1\. id
 2\. name
 3\. localisation 
```

日历 ：

```
 1\. id
 2\. idroom
 3\. year
 4\. month
 5\. days 
```

days 是一个 31 个字符的字符串（每天 1 个字符）。字符可以是：“0”免费；“1”为第一步预订；“3”表示占用

日历是在需要时创建的，所以我的问题是当我要求未占用的教室时，要获取在我检查期间没有日历条目的教室。例如，教室 1 从 2013 年 1 月 12 日到 2013 年 3 月 2 日被占用，我的日历表中没有更多关于该教室的条目。如果我要求从 2013 年 1 月 12 日到 2013 年 4 月 12 日的预订，我不知道如何在结果中包含教室 1。月份可以为空，年份也可以。我尝试左连接，并且“为空”但没有成功。

这是我请求的第一部分，它有效，但在此期间不显示“没有日历的房间”：

```
SELECT DISTINCT room.id
FROM room LEFT JOIN
     calendar
     ON room.id=calendar.idroom
WHERE (calendar.year=2013 AND calendar.month=12 and calendar.days like "0000%") 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:10:25.473

问题是`where`子句使用了`calendar`表，所以它取消了`left join`. 您可以通过将逻辑混合到`on`子句中来解决此问题：

```
SELECT DISTINCT room.id
FROM room LEFT JOIN
     calendar
     ON room.id=calendar.idroom and
        (calendar.year=2013 AND calendar.month=12 and calendar.days like "0000%") 
```

# linux - (unix/bash) Details of using ">>" with terminal?

> ID：16063571
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:02:59.437
> 
> 标签：linux, bash, unix, terminal

I'm trying to understand how ">>" works. Does it use auto-append mode or lseek?

I've downloaded the bash source and have been trying to grep my way through to find how it works, but I've been unsuccessful. Maybe there is a better way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:13:57.663

由于这是通过系统调用工作的，因此最简单的了解方法是使用 strace 运行 bash。您可以执行以下操作：

```
$ strace -o bash.log bash
$ echo hello >> test.txt
$ echo goodbye >> test.txt
$ exit
$ grep test.txt bash.log
open("test.txt", O_WRONLY|O_CREAT|O_APPEND, 0666) = 3
open("test.txt", O_WRONLY|O_CREAT|O_APPEND, 0666) = 3
write(3, "echo hello >> test.txt\necho good"..., 48) = 48 
```

您可以通过传递给`open()`调用的标志看到它直接以附加模式打开。

# tomcat - Lightweight servlet container for production use

> ID：16063576
> 
> 赞同：2
> 
> 时间：2013-04-17T15:03:03.710
> 
> 标签：tomcat, servlets, jetty, production, winstone

I use Tomcat in production.

Are Jetty and Winstone ([https://stackoverflow.com/questions/1515654/what-is-a-lightweight-fast-java-servlet-container](https://stackoverflow.com/questions/1515654/what-is-a-lightweight-fast-java-servlet-container)) suitable for production use?

I'm happy to let go of features in return for simplicity. Servlets and filters are probably sufficient and the server isn't heavily loaded, so interested to experiment with running it on a minimalist platform. Sticking with Tomcat is also fine.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:13:25.303

回复：码头

*   简短的回答：是的

*   长答案：是的，当然……许多公司在生产中使用码头，无论是在其分发形式还是嵌入到他们的应用程序中。事实上，我刚刚在 Eclipse 网站上更新了这个由码头供电的页面。

[http://www.eclipse.org/jetty/powered/](http://www.eclipse.org/jetty/powered/)

带有一些附加信息的关于页面：

[http://www.eclipse.org/jetty/about.php](http://www.eclipse.org/jetty/about.php)

最后是“为什么选择码头？” 关联：

[https://www.webtide.com/choose/jetty.jsp](https://www.webtide.com/choose/jetty.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T13:08:53.213

您可以考虑使用 ActiveJ Java 平台，因为它专注于简单和极简的方法：

> ActiveJ 是从头开始构建的，因此它没有大量隐藏遗留标准的抽象。它是简约的、无样板的，而且速度非常快，这已被基准测试证明。

```
public final class HttpHelloWorldExample extends HttpServerLauncher {
    @Provides
    AsyncServlet servlet() {
        return request -> HttpResponse.ok200().withPlainText("Hello World");
    }

    public static void main(String[] args) throws Exception {
        Launcher launcher = new HttpHelloWorldExample();
        launcher.launch(args);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T14:37:37.483

另一个需要考虑的是JBoss 的[Undertow](http://undertow.io/undertow-docs/undertow-docs-1.3.0/index.html#undertow-servlet)。它轻巧且易于上手。支持 servlet 以及阻塞和非阻塞 io。

# php - Symfony2 - Is it possible to create a standalone collection of forms?

> ID：16063577
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:06.970
> 
> 标签：php, forms, symfony

I have a table of data I want to be able to edit row-by-row. The most sensible thing do do would be to have each row be its own form. Can I do that in Symfony2 *without* a linked parent entity? The [documentation](http://symfony.com/doc/master/cookbook/form/form_collections.html) only shows how to do it with a parent.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:38:55.403

您的控制器操作：

```
 public function gridAction( $criteria ) {
        $entities = $this->getDoctrine()
        ->getManager()
        ->getRepository( 'Bundle:Entity' )
        ->findbyCriteria( $criteria );
        // criteria presumably involves some gneration from routing 
        // and may not be a parameter at all

        if ( array() != $entities->toArray() ) {
            throw 
            $this->createNotFoundException( 'Unable to find any entities.' );
        }

        $forms = array_map(function($element) use ($this) {
            return $this->createForm(new EntityType()
                , $element
                , array()  // form parameters here
                );
        });

        return $this->render( 'Bundle:Entity:grid.html.twig'
            , array(
                'forms'          => $forms
            ) );
    } 
```

还有你的树枝：

```
<table class="records_list dataTable" id="CaseloadTable">
    <thead>
        <tr>
        </tr>
    </thead>
    <tbody>
        {% for form in forms %}
        <tr>
            {{form_widget(form)}}
        </tr>   
        {% endfor %}
    </tbody>
</table> 
```

但是，您可能会得到更好的服务： [https ://github.com/Abhoryo/APYDataGridBundle](https://github.com/Abhoryo/APYDataGridBundle)

# delphi - How do I put a literal vertical bar "|" in a control's Hint property?

> ID：16063579
> 
> 赞同：5
> 
> 时间：2013-04-17T15:03:07.883
> 
> 标签：delphi, tooltip, delphi-xe2

I have an application that allows the users to enter a regular expression (that they craft) to parse a repository of documents. The results of the search are displayed in a TTreeView control. I want to set the TreeView's Hint property (not each Treenode) to the regular expression that was used, but the problem I'm having is that the regular expression can have a pipe (`|`) character within it (regex OR), which Delphi interprets as the separation between the hint and long hint. I tried replacing each occurrence of `|` with `||` hoping it would have the same effect as using `&&` rather than `&` (such as in menu items) to no avail.

Is there any way to embed a `|` within a hint without it being interpreted as the separator?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:41:53.047

不准确，但可能足够接近

```
 Component.Hint := Stringreplace(TheHintText,'|',#5,[rfReplaceAll]); 
```

# jquery - If a command on a MVC page does not navigate to a new view shouldnt I always use jquery ajax posts?

> ID：16063581
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:16.703
> 
> 标签：jquery, ajax, asp.net-mvc

I was thinking... I am used to doing the classic MVC style of using Url.Actions to call methods and then return a view (even the same view) with a view model.

But then as I thought about jquery and AJAX I thought.. .if the page (view)does not change shouldn't I always use jquery ajax for my commands???

For examples I have a MVC application that you click a button and calls a Url.Action method which performs a long running method.. so from the user point of view the browser hangs for about a minute... But if I used jquery ajax I could call that method... have it return immediately and then I could perhaps set up a timer that calls another method to show progress of this long running process...

So is my theory correct? ALWAYS use jquery ajax for methods that return the same page. ALWAYS use Url.Action for methods that return a new page.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:26:02.287

首先，你永远不会在给定的场景中使用一种实践，尝试定义一个实践将不可避免地产生坏习惯，你永远不会成为一个更好的开发人员。事情因项目而异，需求因需求而异。如果页面需要进行服务器调用而不是刷新，请使用 ajax。如果需要刷新或重定向，请使用 url.action。澄清一下，ajax 是异步 javascript 和 xml。ajax 的主要目的是使服务器调用异步，以便浏览器中没有锁定。这允许您在服务器调用发生并等待结果时执行其他逻辑。它还允许您在向服务器提交表单时不刷新/重定向。这在某些情况下可能非常有用，但在其他情况下，可能没有那么多。

范围：我是一名在 mvc4 工作的 .net 开发人员，所以我对这个特定问题有很多经验。我们制作非常大规模的 asp.net 应用程序并广泛使用这个概念。我们在整个应用程序中使用 ajax 数千次，但在某些情况下，我们仍然使用默认的 Web 表单模型通过方法将数据发送到服务器端脚本。

# mercurial - 分支合并，显示所有变化

> ID：16063583
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:24.780
> 
> 标签：mercurial

好的，我有一个 mercurial 存储库。

我创建了一个新分支以在几天内开发新功能。

每天，我都会检查所有当前的进度，但是由于开发非常流畅，我不想花很多时间来写详细的笔记，因为它们很有可能会得到稍后重写/删除。所以我通常只是写一个简短的“在算法上花了一点时间”或“调整了很多样板代码”等。

现在，当功能完成时，或者处于足够稳定以折叠回主干的阶段（出于争论的原因，自从我分支以来没有任何变化），合并似乎只是将所有更改复制回主干，但没有显示分支头和树干之间的纯粹差异。

除了删除分支（从而丢失所有开发历史）之外，有没有办法强制这种类型的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:12:47.360

输入后`hg merge`（但在提交之前），尝试`hg diff -r'p1():p2()'`.

# java - Hibernate Criteria list always return 0 items

> ID：16063584
> 
> 赞同：2
> 
> 时间：2013-04-17T15:03:26.283
> 
> 标签：java, spring, hibernate

Function in my DAO (findByUsername) is always returning 0 rows no matter if I change the entity class, even after removing annotation from the entity there is no exception, just 0 rows. This code is implemented in the spring based app according to some examples I have found.

**DAO**:

```
@Repository("userDao")
public class UserDao extends CustomHibernateDaoSupport {
    public void save(User user) {
        getHibernateTemplate().save(user);
    }

    public void delete(User user) {
        getHibernateTemplate().delete(user);
    }

    public User findByUsername(String username) throws DataNotFoundException {
        Session session = getSession();
        Criteria crit = session.createCriteria(User.class);
        System.out.println(username);
        crit.add(Restrictions.eq("username", username));
        crit.setMaxResults(1);

        List<User> users = crit.list();
        System.out.println(users);
        if (users.size() < 1) {
            throw new DataNotFoundException();
        }

        return users.get(0);
    }
} 
```

**ENTITY**:

```
@Entity
@Table(name = "users")
public class User {
    private Integer id;
    private String username;
    private String password;
    private boolean active;
    private String activationCode;
    private Date createdAt;
    private String email;
    private Set<Wall> walls = new HashSet<Wall>();

    @Id
    @GeneratedValue
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name = "username", unique = true, nullable = false)
    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    @Column(name = "password")
    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Column(name = "active")
    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    @Column(name = "activation_code")
    public String getActivationCode() {
        return activationCode;
    }

    public void setActivationCode(String activationCode) {
        this.activationCode = activationCode;
    }

    @Column(name = "created_at", columnDefinition = "DATETIME")
    public Date getCreatedAt() {
        return createdAt;
    }

    public void setCreatedAt(Date createdAt) {
        this.createdAt = createdAt;
    }

    @Column(name = "email")
    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinTable(name = "users_has_walls", joinColumns = { 
            @JoinColumn(name = "user_id", nullable = false, updatable = false) }, 
            inverseJoinColumns = { @JoinColumn(name = "wall_id", 
                    nullable = false, updatable = false) })
    public Set<Wall> getWalls() {
        return walls;
    }

    public void setWalls(Set<Wall> walls) {
        this.walls = walls;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:00:23.477

解决方案是将进口申报更改为

```
import javax.persistence.Entity; 
```

而不是休眠。未导入用户实体类。

# excel - 比较具有相同 ID 的 2 列中的日期并查找最新日期

> ID：16063586
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:28.970
> 
> 标签：excel, excel-formula, excel-2010, vba

我有 3 列
A = ID
B = S_Provided
C = M_Provided

在 D 列中，我想填充 B 和 C 之间给定 ID 的最新/最新日期

 **这是我在 D2 中**的屏幕截图**`=IF(A2=A1,D1,IF(B2>C2,B2,C2))`
公式， 但是这个公式在`ID=81`. D 应该是`11/11/2012 4:15:00 PM`**

 **![在此处输入图像描述](https://farm9.staticflickr.com/8105/8658414922_cd193b2398_b.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:34:29.423

如果有人找到更好的解决方案，欢迎发布。

在 D 列中：使用 Ctrl+Shift+Enter

```
=MAX(IF(A2=$A$2:$A$999, $B$2:$C$999)) 
```

参考 [http://www.get-digital-help.com/2009/12/05/lookup-a-value-and-find-max-date-in-excel/](http://www.get-digital-help.com/2009/12/05/lookup-a-value-and-find-max-date-in-excel/)**

# vb.net - Silverlight WCF 服务存储过程

> ID：16063587
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:29.173
> 
> 标签：vb.net, wcf, silverlight, stored-procedures

我试图弄清楚如何从我的 Silverlight 应用程序中调用存储过程。我可以使用这个函数调用数据库：

```
<OperationContract()>
Public Function ImportData(
    ByVal authentication As AuthenticationArgs,
    ByVal caseID As String) As ResponseArgs(Of GetGuidelineData_Result)

    Dim guidelineDataResults As GetGuidelineData_Result
    Dim exception As ExceptionArgs = Nothing

    If AuthenticationService.CheckPermissions(authentication, exception, PermissionType.StateUser) Then

        Try
            Dim model As DCF_ACCESS_Model = DataHelper.CreateDCF_ACCESS_Model()

            model.GetGuidelineData(caseID)

        Catch ex As Exception

            Return New ResponseArgs(Of GetGuidelineData_Result)(New ExceptionArgs(ex.Message))

        End Try

        Return New ResponseArgs(Of GetGuidelineData_Result)(guidelineDataResults)

    Else

        Return New ResponseArgs(Of GetGuidelineData_Result)(exception)

    End If

End Function 
```

我怎样才能修改代码来调用存储过程呢？存储过程 GetGuidelineData 将 1 个参数作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:06:30.873

我能够弄清楚如何使用以下方法调用存储过程：

```
<OperationContract()>
Public Function ImportData(
    ByVal authentication As AuthenticationArgs,
    ByVal caseID As String) As ResponseArgs(Of GetGuidelineData_Result)

    Dim guidelineDataResults As GetGuidelineData_Result
    Dim exception As ExceptionArgs = Nothing

    If AuthenticationService.CheckPermissions(authentication, exception, PermissionType.StateUser) Then

        Try
            Dim model As DCF_ACCESS_Model = DataHelper.CreateDCF_ACCESS_Model()

            ' Call stored procedure
            guidelineDataResults = model.GetGuidelineData(caseID).First()

        Catch ex As Exception

            Return New ResponseArgs(Of GetGuidelineData_Result)(New ExceptionArgs(ex.ToString()))

        End Try

        Return New ResponseArgs(Of GetGuidelineData_Result)(guidelineDataResults)

    Else

        Return New ResponseArgs(Of GetGuidelineData_Result)(exception)

    End If

End Function 
```

对存储过程的调用通过以下方式完成：

```
 model.GetGuidelineData(caseID).First() 
```

它获取集合中的第一个元素并将其作为输出返回。

# c# - Disable Specific DataGrid Cells with Binding

> ID：16063588
> 
> 赞同：5
> 
> 时间：2013-04-17T15:03:30.520
> 
> 标签：c#, wpf, xaml, data-binding, datagrid

I'm trying to bind a list of custom data objects to a data grid and achieve the following behavior.

1.  Populate the grid
2.  Disable certain cells based on object data.

Consider the following DataGrid

```
<DataGrid ItemsSource="{Binding Path=CustomObjectList}">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=FieldName}"
                            Header="Field Name"
                            IsReadOnly="True" />
        <DataGridCheckBoxColumn Binding="{Binding Path=Compare}"
                                Header="Compare" />
        <DataGridTextColumn Binding="{Binding Path=Tolerance}"
                            Header="Tolerance" />
    </DataGrid.Columns>
</DataGrid> 
```

With a backing object like this...

```
public class CustomObject: BaseModel
{
    private bool _compare;

    private bool _disableTolerance;

    private string _fieldName;

    private bool _mustCompare;

    private double _tolerance;

    /// <summary>
    /// Gets or sets the compare.
    /// </summary>
    /// <value>The compare.</value>
    public bool Compare
    {
        get
        {
            return this._compare;
        }
        set
        {
            this._compare = value;
            this.NotifyPropertyChange("Compare");
        }
    }

    /// <summary>
    /// Gets or sets the disable tolerance.
    /// </summary>
    /// <value>The disable tolerance.</value>
    public bool DisableTolerance
    {
        get
        {
            return this._disableTolerance;
        }
        set
        {
            this._disableTolerance = value;
            this.NotifyPropertyChange("DisableTolerance");
        }
    }

    /// <summary>
    /// Gets or sets the name of the field.
    /// </summary>
    /// <value>The name of the field.</value>
    public string FieldName
    {
        get
        {
            return this._fieldName;
        }
        set
        {
            this._fieldName = value;
            this.NotifyPropertyChange("FieldName");
        }
    }

    /// <summary>
    /// Gets or sets the must compare.
    /// </summary>
    /// <value>The must compare.</value>
    public bool MustCompare
    {
        get
        {
            return this._mustCompare;
        }
        set
        {
            this._mustCompare = value;
            this.NotifyPropertyChange("MustCompare");
        }
    }

    /// <summary>
    /// Gets or sets the tolerance.
    /// </summary>
    /// <value>The tolerance.</value>
    public double Tolerance
    {
        get
        {
            return this._tolerance;
        }
        set
        {
            this._tolerance = value;
            this.NotifyPropertyChange("Tolerance");
        }
    }
} 
```

And you can consider the CustomObjectList to be populated like this...

```
this.ComparisonsAndTolerances.Add(new ComparisonSettingsTolerances()
{
    FieldName = "Alpha",
    Compare = true,
    MustCompare = true,
    Tolerance = 0,
    DisableTolerance = false
});

this.ComparisonsAndTolerances.Add(new ComparisonSettingsTolerances()
{
    FieldName = "Bravo",
    Compare = true,
    MustCompare = false,
    Tolerance = 0,
    DisableTolerance = true
}); 
```

So, of course the FieldName, Compare, and Tolerance properties are filling into the grid appropriately.

However, what I would like to achieve is, when MustCompare is true, then that cell is marked as read only. And when DisableTolerance is true, that cell is marked as read only.

Obviously this will vary from cell to cell and row to row with the 4 different combinations, but I was hoping to achieve this through binding.

I tried

```
IsReadOnly="{Binding Path=MustCompare}" 
```

and

```
IsReadOnly="{Binding Path=CustomObjectList/MustCompare}" 
```

But neither of those worked.

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-05T18:20:54.667

这是您遇到的一个有趣的错误/情况。

怎么了？好吧，绑定正在尝试绑定到`MustCompare`属性（并且可能会成功），但它无法找到`FrameworkElement`或`FrameworkContentElement`成为绑定的目标，因为数据网格的列都不在可视树中。

有一个解决方案，虽然不像你（正确地）试图做的那样优雅：

```
<DataGridTemplateColumn Header="Compare">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock x:Name="TextHolder" />
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Path=Compare}"
                             Value="True">
                    <Setter TargetName="TextHolder"
                            Property="Text"
                            Value="True" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=Compare}"
                             Value="False">
                    <Setter TargetName="TextHolder"
                            Property="Text"
                            Value="False" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <CheckBox x:Name="Check"
                      IsChecked="{Binding Path=Compare}"
                      ToolTipService.ShowOnDisabled="True"/>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Path=MustCompare}"
                             Value="True">
                    <Setter TargetName="Check"
                            Property="IsEnabled"
                            Value="False" />
                    <Setter TargetName="Check"
                            Property="ToolTip"
                            Value="You cannot change this value since this item must compare" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

我已经更改了单元格，因此它在非编辑模式下显示文本并在编辑时显示复选框（只是为了查看单元格处于什么状态，您可以在两种情况下将其更改为复选框）。

这不是最佳的，如果您（或任何人）找到更好的解决方案，我想听听您的意见。

## 编辑：

想到另一个解决方案：

```
<DataGridCheckBoxColumn Binding="{Binding Path=Compare}"
                        Header="Compare">
    <DataGridCheckBoxColumn.CellStyle>
        <Style TargetType="{x:Type DataGridCell}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding MustCompare}"
                             Value="True">
                    <Setter Property="IsEnabled"
                            Value="False" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGridCheckBoxColumn.CellStyle>
</DataGridCheckBoxColumn> 
```

这使得复选框在非编辑模式下被禁用，因此看起来不同。可能是好事也可能是坏事，这取决于您的功能设计。

# php - 如何删除 PHP 中的重复值？

> ID：16063590
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:33.003
> 
> 标签：php, arrays, duplicates

我需要帮助。想要从 php 中的数组中删除重复值。

```
$categoryTotal echoes 144 125 262 108 351 177 266 269 270 268 309 144 125 262 238 108 
```

使用时：

```
vardump() 
```

我明白了

```
Array ( [0] => 144 [1] => 125 [2] => 262 [3] => 108 [4] => 351 [5] => 177 [6] => 266 [7] => 269 [8] => 270 [9] => 268 [10] => 309 [14] => 238 ) 
```

我使用 sort 按升序对得到的值进行排序：

```
108 108 125 125 144 144 177 238 262 262 266 268 269 270 309 351 
```

但随后使用`$categoryTotal=array_unique($categoryTotal,SORT_NUMERIC);`很少的值，例如`309 351`消失。

想知道如何从这个数组中找出重复的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:06:12.530

之前问过。

```
$array = array(1, 2, 2, 3);
$array = array_unique($array); // Array is now (1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:06:24.690

使用该`array_unique()`函数，如下所示：

```
$noDuplicates = array_unique($categoryTotal); 
```

[文档在这里](http://php.net/manual/en/function.array-unique.php)。

# shell - how I can start lein ring server in background?

> ID：16063592
> 
> 赞同：6
> 
> 时间：2013-04-17T15:03:38.463
> 
> 标签：shell, clojure, leiningen, ring

Now what I do is:

```
$ lein ring server & 
```

Then what I see is: [1]+ Stopped lein ring server. Then I'm trying to use:

```
$ fg 1 
```

And also see that it's stopped. What do I do wrong and how can I run ring as a background process?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:00:58.907

由于 lein 只是启动了一个 Java 进程，因此这个答案当然不适用于 ring/leiningen。

最简单的方法可能是使用以下 Linux/UNIX 实用程序之一（以及更多）：

*   屏幕
*   超然
*   诺哈普

# html - Why can you have a th element without thead element?

> ID：16063593
> 
> 赞同：-3
> 
> 时间：2013-04-17T15:03:40.987
> 
> 标签：html

I know that the browsers are very flexible with html, but is there any other reason why this is possible?

```
<table>
    <tr>
        <th>
            Column 1
        </th>
    </tr>
<table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:07:38.657

`<th>`并不一定意味着它在桌子的前面。例如，您可能有这样的布局：

```
<table>
  <tr>
    <th>Name:</th>
    <td>Tarquin Smith</td>
  </tr>
  <tr>
    <th>Occupation:</th>
    <td>Jovian Agent</td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:10:00.227

`<thead>`包含行。长话短说，它只是说那排是头排。我不使用它，但它只是让你更容易在你的 CSS 中使用它。例如：

```
<table>
  <thead>
    <tr>
      <th>Month</th>
      <th>Savings</th>
    </tr>
  </thead> 
```

你的CSS可以说：`thead {color:green;}`

`<th>`适用于表格中的一个单元格，它所做的只是粗体并将其中的文本居中。

# html - 填有输入表单的动态菜单

> ID：16063596
> 
> 赞同：0
> 
> 时间：2013-04-17T15:03:49.973
> 
> 标签：html, dom, menu

我试图弄清楚如何做到这一点：

我有 3 个输入，一个菜单和一些显示所选选项的内容（填写输入表单后，当它被填写时，它可能会显示任何文本）。

那么让我们开始吧：

我想要做的是：填写 3 个输入表单，当我单击提交按钮时，它将用我在输入表单上写的内容填充菜单，当我在此菜单上选择某些内容时，它将显示在输入形式也

提前致谢 ！

我试过这个：

[我的测试](http://pastebin.com/LbXJQQNg)

# jquery - 在 cookie 中存储 touppercase() 值并在 jQuery 中检索它

> ID：16063600
> 
> 赞同：1
> 
> 时间：2013-04-17T15:03:54.007
> 
> 标签：jquery, cookies, jquery-cookie

我有一个存储如下值的邮政编码查找（使用 jQuery.cookie 插件）

```
$.cookie('delpostcode', $('#deliveryPostcode').val().toUpperCase(),{path: '/'}); 
```

这家店`GL53%200DW`

然后我尝试稍后使用以下方法检索它：

```
$.cookie("delpostcode") 
```

但这会返回`[Object][object]`

这两个值都在设置页面上正确设置，但我无法在我尝试抓取它们的页面上检索它们。如果放

```
$.cookie('delpostcode') 
```

进入 Chrome 的控制台，我得到了`URIError: URI malformed`

编辑：

这已通过添加解决

```
$.cookie.raw = true; 
```

当我设置我的cookie时。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:15:28.583

打开浏览器的调试控制台并检查

```
$('#deliveryPostcode').val() 
```

返回，它可能不是字符串。如果您使用字符串尝试它，它会起作用：

```
$.cookie('delpostcode', "GL53%200DW".toUpperCase(),{path: '/'});
undefined
$.cookie("delpostcode")
"GL53%200DW" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:32:17.203

这是一个带有工作示例的[jsfiddle](http://jsfiddle.net/RHbcn/)，我看不出问题出在哪里。这是我使用的代码：

```
$(function () {
    $("#setCookie").on("click", function () {
            alert($('#deliveryPostcode').val().toUpperCase());
        $.cookie('delpostcode', $('#deliveryPostcode').val().toUpperCase(), {
            path: '/'
        });
    });
    $("#getCookie").on("click", function () {
        alert($.cookie('delpostcode'));
    });
}); 
```

# ruby-on-rails-3.2 - Rails 3 strftime week number not ISO 8601 compliant?

> ID：16063603
> 
> 赞同：1
> 
> 时间：2013-04-17T15:04:02.870
> 
> 标签：ruby-on-rails-3.2, iso

The API dock states:
%U - Week number of the year. The week starts with Sunday. (00..53)
%W - Week number of the year. The week starts with Monday. (00..53)
ISO 8601 states that the first week of the year is the week that contains that year's first Thursday.
2013 starts on a Tuesday. Thus week 1 is that which starts with December 31, 2012 as week 1 (for %W)

Code:

```
my_date_variable.strftime("%W").to_i 
```

is returning week # 1 as that starting January 7, 2013\. Does not match what ISO 8601 would do.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-06T19:43:20.680

似乎你想要的是`%V`ruby​​ 支持的[`Date#strftime`](http://ruby-doc.org/stdlib-2.2.0/libdoc/date/rdoc/Date.html#method-i-strftime)。

`> Date.parse("December 31, 2012").strftime("%V") => "01"`

# android - Defining a textview in another class than the "main" class

> ID：16063606
> 
> 赞同：0
> 
> 时间：2013-04-17T15:04:09.450
> 
> 标签：android, eclipse, textview

I have a main application with a button defined in layout.xml.

When I click on the button, I want to call a method located in another class, and when I try to create a TextView in that class, I must provide an argument to the new TextView(???) command, and I don't know what to do.

I reckon that this is a 2 seconds question for you folks, and for me, newbiiie as it is, it is a tough one.

Just in case, here are the relevant sections of code:

The section of the main class that is applicable:

```
public class MainActivity extends Activity {

    public DateAndTime cur_datetime = new DateAndTime();
    public LongLat cur_longlat = new LongLat();
    public int current_location_number = 0;
    public ArrayList<LocationInfo> locations = null;
     Button doSunButton;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        addListenersForButtons();
            dosomething();
    }

public void addListenersForButtons()
{
    doSunButton = (Button) findViewById(R.id.dosun_button_id);
    doSunButton.setOnClickListener( new OnClickListener()
 {

@Override
  public void onClick(View arg0) 
  {
DoSun myDoSun = new DoSun();
Log.v("button", "Am I really calling from the button function...");
myDoSun.doSun2(locations, current_location_number);
} // end of dosun on click on dosun_id button
                        ); // end of define listener

  } // end of addListenersForButtons(0) method
} 
```

The class whose method is called:

```
package com.example.sunandmoon;

import java.util.ArrayList;

import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

public class DoSun extends Activity{

    public void doSun2(ArrayList<LocationInfo> locations, int current_location_number)
    {
        //Log.v("doSun", "Am I really there!");
        TextView textViewsunrise = new TextView(??????);
        textViewsunrise = (TextView) findViewById(R.id.sunrise_id);
        ((TextView)textViewsunrise).setText("From DoSun2! " + locations.get(current_location_number).getnameGiven());
    } // end of doSun(0) method

} 
```

And by the way, I also wonder how I could avoid passing the two parameters current_location_numberv and ArrayList locations to the doSun2 method, since they "should be" globals (you can see that I come from C...).

Thank you for your help.

And to you flamers of all kinds, yes, I have tried to find an answer to this...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:15:21.323

您的代码中有多个问题。

1.  不要将扩展自的类`Activity`用于活动以外的任何东西！An`Activity`表示用户与之交互的单个以任务为中心的对象。松散地，将应用程序中的每个屏幕视为一个`Activity`.

2.  “应该是全球性的”。不，他们不应该。在 Android 中偶尔会出现全局变量有意义的情况。这不是其中的一个。您不应该避免将参数传递给，`doSun2()`因为它的行为根据这些参数。使用全局变量完全是反模式。

3.  您要正确创建的`TextView`属于`MainActivity`. 它应该负责创建和管理它。为此，让 DoSun 中的方法接受参数（位置、currentLocationNumber）并让它返回某种结构，其中包含您`TextView`在`MainActivity`. 您可以创建一个辅助方法，`MainActivity`其中将返回的结构`doSun2()`作为参数并返回一个新的`TextView`准备添加到`Activity` `Layout`.

4.  通常，只有活动应该创建和管理任何 UI 元素。

5.  如果`DoSun`真的应该是一个 Activity，那么不要尝试通过它的构造函数创建它的实例。相反，创建一个`Intent`并使用`startActivity`来创建它。

综上所述，你应该养成描述你想要达到的**目标**的习惯，因为你的方法（我已经回应过）可能不是正确的方法。

祝你好运！

# hibernate - JPA + Hibernate：大型集合的@ManyToMany 关系分配

> ID：16063614
> 
> 赞同：0
> 
> 时间：2013-04-17T15:04:36.030
> 
> 标签：hibernate, jpa, many-to-many

假设我们有以下@ManyToMany 关系：

用户实体

```
 @Entity
    public class User {

    @ManyToMany
    private Set<Role> roles = new HashSet<>();
    ...
} 
```

角色实体

```
@Entity
public class Role  {

    @ManyToMany(mappedBy = "roles")
    private Set<User> users = new HashSet<>();
    ...
} 
```

进行@ManyToMany 分配的方法是执行以下操作：

```
role.getUsers().add(user);
user.getRoles().add(role); 
```

但是，这不会导致 Hibernate/JPA 出去并获取关系两侧集合中的所有实体吗？如果集合真的很大怎么办 - 这不是性能/内存问题吗？有没有更好的方法来处理任务？

# ios - UITableViewCell 的自定义 selectedBackgroundView 带圆角

> ID：16063617
> 
> 赞同：2
> 
> 时间：2013-04-17T15:04:37.443
> 
> 标签：ios, uitableview, custom-view

我设计了具有自定义 selectedBackgroundView+ 一些其他功能的自定义 TableViewCell。
**问题：**
在 TableView 的“分组”样式中，第一个和最后一个单元格在选择时应该有圆角。如何实现第一个和最后一个单元格的圆角。

![在此处输入图像描述](https://i.stack.imgur.com/Ne2R9.png)
**代码：** MNATableViewCell 继承自 UITableViewCell

```
@implementation MNATableViewCell

-(void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    if(customSelectedBackgroundView==nil)
    {
        customSelectedBackgroundView = [MNATableViewCell getCellSelectedBackgroundView];
        self.selectedBackgroundView = customSelectedBackgroundView;
    }
}

+ (UIView*) getCellSelectedBackgroundView
{
    UIView *bgView = [[UIView alloc] initWithFrame:CGRectZero];
    UIImage *image = [UIImage imageNamed: @"bg-cell-active.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage: image];

    [imageView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)];

    [imageView setFrame:bgView.frame];
    [bgView addSubview:imageView];
    [bgView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)];
    [bgView sizeToFit];
    return bgView;
}
@end 
```

# c# - Automapper：水合int？根据条件

> ID：16063619
> 
> 赞同：0
> 
> 时间：2013-04-17T15:04:39.443
> 
> 标签：c#, automapper, automapper-2

我有以下代码：

```
[Test]
public void ConditionalMapping()
{
    var src = new Sample1 {Age = 1, Number = null};
    var dest = new Sample2 {Age = null, Number = 1};

    Hydrate(src, dest, false);

    Assert.That(dest.Age, Is.EqualTo(1));
    Assert.That(dest.Number, Is.EqualTo(1));

    src = new Sample1 {Age = null, Number = 1};
    dest = new Sample2 {Age = 1, Number = null};

    Hydrate(src, dest, true);

    Assert.That(dest.Age, Is.Null);
    Assert.That(dest.Number, Is.EqualTo(1));
}

public void Hydrate(Sample1 src, Sample2 dest, bool allowOverride)
{
    if (!dest.Age.HasValue || allowOverride)
        dest.Age = src.Age;

    if (!dest.Number.HasValue || allowOverride)
        dest.Number = src.Number;
}

public class Sample1
{
    public int? Age { get; set; }
    public int? Number { get; set; }
}

public class Sample2
{
    public int? Age { get; set; }
    public int? Number { get; set; }
} 
```

`int?`如果值为`null`unless ，它基本上`allowOverride = true`会水合一个值，其中它将在不检查字段值的情况下水合该值。

我将如何在 Automapper 中执行此操作？

我知道您可以使用 .Condition() ，如下所示：

[Automapper 的条件被忽略](https://stackoverflow.com/questions/8012725/automappers-condition-gets-ignored)

但我不知道如何：

1.  应用基于的逻辑，`int?`无需一一定义。
2.  `allowOverride`将布尔值包含到 Mapper。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:28:53.233

我可能已经为您找到了一个潜在的解决方案 - 取决于您希望`allowOverride`标志如何工作。

如果您希望标志对所有映射都进行相同的操作，您可以`TypeConverter`按如下方式创建

```
public class NullableIntConverter : ITypeConverter<int?, int?>
{
    private bool AllowOverrides { get; set;}

    public NullableIntConverter(bool allowOverrides)
    {
        AllowOverrides = allowOverrides;
    }

    public int? Convert(ResolutionContext context)
    {
        var source = context.SourceValue as int?;
        var destination = context.DestinationValue as int?;
        if (destination.HasValue && !AllowOverrides)
            return destination;
        else
            return source;
    }
} 
```

像这样初始化它：

```
Mapper.CreateMap<Sample1, Sample2>();
Mapper.CreateMap<int?, int?>().ConvertUsing(new NullableIntConverter(true));
Mapper.AssertConfigurationIsValid(); 
```

它现在将检查目标值，并根据您的构造函数参数酌情覆盖它。

* * *

**或者**

* * *

如果您希望能够为每个映射专门配置它，那么您可以使用 a `ValueResolver`（请注意，此代码可以进行一些额外的验证）：

```
public class NullableIntResolver : IValueResolver
{
    public bool AllowOverrides { get; set; }

    public NullableIntResolver(bool allowOverrides)
    {
        AllowOverrides = allowOverrides;
    }

    public ResolutionResult Resolve(ResolutionResult source)
    {
        // Add validation for source and destination types
        return source.New(
                   ResolveCore((int?) source.Value,
                               DestinationMemberValue(source.Context)),
                   typeof(int?));
    }

    public int? ResolveCore(int? source, int? destination)
    {
        if (destination.HasValue && !AllowOverrides)
            return destination;
        else
            return source;
    }

    private int? DestinationMemberValue(ResolutionContext context)
    {
        var destObject = context.DestinationValue;
        var destMemberName = context.MemberName;
        return (int?) destObject
                          .GetType()
                          .GetProperty(destMemberName)
                          .GetValue(destObject, null);
    }
} 
```

然后，您可以像这样初始化您的映射：

```
var allowOverrides = true;
Mapper.CreateMap<Sample1, Sample2>()
    .ForMember(dest => dest.Age,
               opt => opt.ResolveUsing<NullableIntResolver>()
               .FromMember(src => src.Age)
               .ConstructedBy(() => new NullableIntResolver(allowOverrides)))
    .ForMember(dest => dest.Number,
               opt => opt.ResolveUsing<NullableIntResolver>()
               .FromMember(src => src.Number)
               .ConstructedBy(() => new NullableIntResolver(allowOverrides)));
Mapper.AssertConfigurationIsValid(); 
```

# migration - 将 RMS 迁移到 RDB

> ID：16063623
> 
> 赞同：3
> 
> 时间：2013-04-17T15:04:49.940
> 
> 标签：migration, data-migration, openvms

我们正在着手将遗留 OpenVMS RMS 文件迁移到关系数据库（MS SQL 2012 和 Oracle 10g 都可用）。我想知道是否有：

*   检索索引文件架构的工具
*   解析索引文件的工具
*   将自定义 RMS 数据格式（分区小数等）作为包/API/库处理的工具 *也许我应该改变方法？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:57:05.867

有几种可用的工具，特别是通过 ODBC 供应商（我为其中之一工作：Attunity）。

1 >> 检索索引文件架构的工具

请说清楚。仅查找文件中的记录/列布局和索引或文件之间的关系。

1a) 当前使用的文件如何？Cobol、Basic、Fortran 程序？数据检索？他们将使用一些数据定义方法，所以你需要一个可以利用它的工具。Connx 和 Attunity Connect 可以“导入”CDD 定义、BASIC - MAP 文件、Cobol Copybooks。变体通常也包括在内。我编写了许多（perl/awk）脚本来将特殊定义转换为 XML。

1b ) 分析/RMS，或调用 RMS XAB 的程序可以获得可用的索引信息。Atunity connect 将知道如何将这些映射到 1a 中的字段）

1c ) OpenVMS 上的（索引）文件之间没有正式的、存储的关系。这就是程序逻辑中的全部内容。然而，一些适度智能的 Perl/Awk/DCL 脚本通常可以通过查看文件名和数据类型匹配来生成可能的外键/主键表。

我们在谈论多少个文件/布局/千兆字节？

2 >> 解析索引文件的工具

请说清楚？一旦知道结构（问题 1），就可以通过读取该结构来完成解析，对吗？您永远都不想了解索引文件的内部结构。只需告诉 RMS 获取记录。

3 >> 将自定义 RMS 数据格式（分区小数等）作为包/API/库处理的工具

再次，请澄清。一旦知道结构，只需使用“正确”工具来使用该结构进行读取，它肯定会尊重详细的数据定义。

> > （我知道自己写一个很简单，只是觉得这个行业会有东西）

著名的遗言……“很简单”。整个公司都在为一般情况而建立和发展。我承认，对于特定情况，它可能相对简单，但“魔鬼在细节中”。

在 Attunity Connect 案例中，我们有一个 UDT（用户定义的数据类型）来处理“奇数”案例，通常涉及 DATES。整数中的日期，字符串中的日期，自 xxx 以来的单位都是开箱即用的，但例如有些有 -1 表示“某个高日期”，需要一些帮助才能将其存储在数据库中。

所有数据库都有一些批量加载工具（BCP、SQL$LOADER）。只要您可以提供符合预期的数据（表格、逗号分隔、是否引用、是否转义），您就应该处于良好状态。

EGH 工具 Vselect 可能是一种方便且高性能的方式，可以批量读取索引文件、过滤和格式化一些文件，并为 DB 加载程序输出顺序文件。它可以比 RMS 更快地读取 RMS 索引文件！（虽然它有自己的元数据语言！）

Attunity 提供完全访问和复制服务。它们包括 CDC（变更数据捕获），不仅可以加载数据，还可以近乎实时地保持最新状态。这对于“进化”与“革命”很有用。查看 Attunity 的“复制”。有了数据字典后，只需指向所需的表（包括、排除过滤器），指向目标数据库并单击即可复制。当然，有（全局或每个表）转换的选项（例如将 AREA-CODE+EXHANGE+NUMBER 转换为单个电话号码，或添加修改后的日期列）。

这会是一次大的开关转换，还是希望迁移数据并让旧系统保持几天、几个月、几年的活力，一直保持数据密切同步？

希望这对一些人有所帮助，Hein van den Heuvel。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T18:00:31.717

OP：*也许我应该改变方法？* 大概。

您可能会考虑寻找数据迁移供应商，其中一些可能有现成的解决方案，如果不是作为 COTS 工具，更有可能打包为服务（我认为这不是一个大市场）。

这对您没有帮助的是我认为应用程序代码存在更大的问题：谁将更改进行 RMS 调用的所有代码，以及进行关系数据库调用的相应代码？实体（“Joe Programmer”，或一些工具）如何知道数据迁移*到*哪里，以便他可以编写正确的调用？对于数据表示可能会发生变化的事实，您要做什么？

理想情况下，您需要一个自动迁移工具，它将移动数据本身（因此知道数据布局和表示会发生变化），并会进行相应的代码更改。您也可以寻找这类供应商。

# node.js - Node.js 出站 http 请求并发

> ID：16063627
> 
> 赞同：3
> 
> 时间：2013-04-17T15:04:59.853
> 
> 标签：node.js

我有一个 node.js 脚本，它从外部 Web API 中提取数据以进行本地存储。第一个请求是一个查询，它返回我需要获取更多信息的 ID 列表。对于返回的每个 ID，我从 node.js 生成一个新的 http 请求，并与服务器联系以获取数据（POST 请求）。工作完成后，我睡 3 分钟，然后重复。有时 ID 的数量是数百个。对这些返回的每个单独的 http 请求可能会返回 1kb 的数据，通常更少，因此往返时间非常短。

今天早上我收到一封来自 API 提供商的电子邮件，请求我关闭我的进程，因为我“占用了具有数百个连接的所有 API 服务器”（我实际上对此感到非常自豪，但这不是重点）。说得好，我将睡眠时间从 3 分钟增加到 30 分钟，这对*他们*有帮助。

关于这个问题......现在我没有设置`maxSockets`或任何东西，所以我相信默认值为 5。这不应该意味着我一次只能创建 5 个实时 http 请求连接吗？管理员怎么有几百？数据交付后，他们的服务器是否没有挂断连接？我不这样做吗？在我的 http 请求结束时我没有明确的断开连接，所以也许我在这里有错。那么`maxSockets`实际上设置了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:24:04.223

**抱歉，由于某种原因，我没有正确阅读您的问题**

[maxSockets](http://nodejs.org/api/http.html#http_agent_maxsockets)是 http 模块将为当前进程建立的最大连接数。您可以通过从 访问它来查看您当前的设置`http.globalAgent.maxSockets`。

您可以使用以下内容查看有关给定主机的当前连接数的一些信息：

```
console.log("Active socket connections: %d", http.globalAgent.sockets['localhost:8080'].length )
console.log("Total queued requests: %d", http.globalAgent.requests['localhost:8080'].length) 
```

`localhost:8080`也用您提出请求的主机和端口替换。

您可以在以下两点看到节点如何处理这些连接：

添加新连接并存储到请求队列

[https://github.com/joyent/node/blob/master/lib/_http_agent.js#L83](https://github.com/joyent/node/blob/master/lib/_http_agent.js#L83)

从排队的请求创建连接

[https://github.com/joyent/node/blob/master/lib/_http_agent.js#L148](https://github.com/joyent/node/blob/master/lib/_http_agent.js#L148)

* * *

我很快就写了这篇文章，让您了解如何将这些请求错开一点。此特定代码不会检查有多少请求“待处理”，您可以轻松修改它以允许您在任何给定时间仅发出一定数量的请求（老实说，这将是更好的方法） .

```
var Stagger = function (data, stagger, fn, cb) {

    var self        = this;
    this.timerID    = 0;
    this.data       = [].concat(data);
    this.fn         = fn;
    this.cb         = cb;
    this.stagger    = stagger;
    this.iteration  = 0;
    this.store      = {};

    this.start = function () {
        (function __stagger() {

            self.fn(self.iteration, self.data[self.iteration], self.store);

            self.iteration++;

            if (self.iteration != self.data.length)
                self.timerID = setTimeout(__stagger, self.stagger);
            else
                cb(self.store);

        })();
    };

    this.stop = function () {
        clearTimeout(self.timerID);

    };
};

var t = new Stagger([1,2,3,4,5,6], 1000, function (i, item, store) {
    console.log(i, item);
    if (!store.out) store.out = [];

    store.out[i] = Math.pow(2,i);
},
function (store) {
    console.log('Done!', store);
});

t.start(); 
```

这段代码肯定可以改进，但它应该让你知道从哪里开始。

现场演示： http: [//jsbin.com/ewoyik/1/edit](http://jsbin.com/ewoyik/1/edit)（注意：需要控制台）

# django - How to stop Django template render_to_string from trying to encode unicode to ascii?

> ID：16063631
> 
> 赞同：2
> 
> 时间：2013-04-17T15:05:04.677
> 
> 标签：django, encoding, django-models, django-templates, ascii

I have a model, "Event", with the following attribute:

```
desc = models.TextField(blank=True, null=True) 
```

When an instance of the model is saved, it seems to convert special characters to unicode, for example a left double quotation mark becomes "\u201c". Later on, I reference {{ event.desc }} in a template (which works fine), but when I render the template to a string, I get a "UnicodeEncodeError". For context, I am trying to render a simple bit of HTML to a string for posting to an API.

How I render the template:

```
description = render_to_string('event_description.html', {'event': self}) 
```

and the resulting error:

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\u201c' in position 845: ordinal not in range(128) 
```

Is there a way to prevent render_to_string from encoding to ascii, or some more appropriate way to prevent this error?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:20:01.057

听起来好像有一个`.encode()`地方试图将其编码`u'\u201c'`为 ascii 并失败了。
您可以检查回溯以找到该行并将其更改为显式`.encode('utf8')`。
或者将 Python 系统的默认编码更改为 'utf-8': ref [here](https://stackoverflow.com/questions/7105441/how-to-set-default-encoding-in-python-setdefaultencoding-function-does-not-ex) & [here](http://docs.python.org/2/library/site.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:39:29.710

尝试在您的视图中使用：

```
# -*- coding: utf-8 -*- 
```

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T16:37:29.860

同样的问题也发生在我身上；我收到了这个错误：

```
'ascii' codec can't encode character u'\xf5' in position 14: ordinal not in range(128)
(...)
Error during template rendering
(...)
<h1 id="site-name">{{ servidor }}</h1> 
```

在我的情况下，可能与您的情况相同或可能不同（关于问题的详细信息不足以确定这一点），“servidor”是一个对象吗？Django 试图将其隐式转换为字符串，但使用了错误的编码；这是通过为名为“nome_servidor”的上下文创建一个新参数并事先显式编码来解决的：

```
context = {
    'nome_servidor': unicode(servidor),
    'servidor': servidor,
    'logs' : servidor.lista_logs()  
} 
```

然后更改模板以显式使用编码字符串：

```
<h1 id="site-name">{{ nome_servidor }}</h1> 
```

# c# - NFC C# 应用程序

> ID：16063636
> 
> 赞同：3
> 
> 时间：2013-04-17T15:05:28.200
> 
> 标签：c#, nfc, ndef, nfc-p2p

嗨，我不知道这是否可能，因为我一直在寻找几个小时没有线索。我想在桌面上制作一个连接到 ACR122u 阅读器的 C# 程序。我希望能够读取 NDEF 消息值并将其存储为字符串以进行处理。如果可以的话，这甚至可能吗？我从哪里开始？

注意：我已经查看并检查了 ACR122u 阅读器提供的示例，但没有一个对我有用，甚至没有显示我从第三方应用程序存储的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:15:34.797

[根据这个网站](http://www.acs.com.hk/index.php?pid=product&id=ACR122U)，阅读器是 PC/SC 兼容的。您应该能够通过该界面访问它。[有关示例，请参见此处](http://ludovicrousseau.blogspot.com/2010/11/pcsc-sample-in-c.html)。这是一篇评价很高的[CodeProject 文章](http://www.codeproject.com/Articles/16653/A-Smart-Card-Framework-for-NET)，内容相同，但它具有复杂 PC/SC 命令的包装器。

（单击[产品网站](http://www.acs.com.hk/index.php?pid=product&id=ACR122U)上的下载链接可下载PC/SC 驱动程序。）

# api - How to use 3Scale's `authrep` function from a server and client perspective?

> ID：16063638
> 
> 赞同：1
> 
> 时间：2013-04-17T15:05:31.090
> 
> 标签：api, node.js, authentication, 3scale

I'm attempting to setup a prototype API using nodejs that uses 3Scale's API management.

I've been able to find their plugin intergration code, which is as follows:

```
var ThreeScale = require('3scale').Client;
// keep your provider key secret
var client = new ThreeScale("X");

// you will usually obtain app_id and app_key from request params
client.authrep({ app_id: "Y",
                 app_key: "Z" }, function(response){
  if(response.is_success()) {
    // continue
  } else {
    throw new Error("not authorized " + response.error_message);
  }
}); 
```

Which makes *some* sense to me as part of a server module. But, I'm not sure where the client's credentials are in that equation....

I see it as the client is pointing to your app, and here's the password for the app...but what about the username/password for the actual client!? where does that get checked?

I feel like I'm not grasping their architecture (possible because it's my first *real* node project and definitely my first time using 3Scale)...

Further, what's a client's request then look like?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:07:30.540

在 3scale 系统中 app_id 和 app_key（在此身份验证方法中）代表用户（即开发人员）的凭据。这是因为每个用户都可以拥有多个应用程序，而一个应用程序只属于一个用户，因此您不需要用户凭据。在 3scale 系统端检查凭据，如果获得授权，它们会报告使用情况并将调用转发到您的 API。

provider_key 标识您的帐户（API 所有者），您必须对其保密（如果有人得到它，他们可以冒充您）。

您是否已经查看过 3scale 的支持网站？有很多关于系统架构的有用信息，一些关于集成的教程等。你可以在这里查看它们：http: [//support.3scale.net](http://support.3scale.net)

顺便提一句。node.js 插件是一个社区插件。您也可以尝试通过 nginx 反向代理进行集成。

# ios - 使用objective-c（Gmail标签）获取X-GM-LABELS

> ID：16063642
> 
> 赞同：2
> 
> 时间：2013-04-17T15:05:38.260
> 
> 标签：ios, objective-c, cocoa, gmail, gmail-imap

我的目标是在我的应用程序的 Gmail 帐户中拥有一个`NSArray`或`NSSet`带有附加到特定电子邮件的标签。我的应用程序主要使用不支持此功能的 MailCore，因此扩展它是一种更可取的方式。我一直在谷歌“API”网站[上](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels)没有太大帮助，也在我的 libetpan 库中找到[了这个](https://github.com/dinhviethoa/libetpan/blob/master/src/low-level/imap/xgmlabels.c)，但即使我有一个`IMAP`使用 gmail 帐户打开的开放会话，我仍然无法翻译此代码并获取 Gmail指定消息的标签。欢迎任何代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T15:35:42.893

我认为您可以在 MailCore 中编写方法来包装 libetpan x-gm-labels 扩展。几个月前，我在 MailCore 中编写了 SORT 扩展。你可以看看那个:)

[添加 IMAP SORT 命令支持。MailCore 上的拉取请求](https://github.com/MailCore/MailCore/pull/89)

# javascript - Coffeescript 对象、jquery 回调和变量范围冲突和混乱

> ID：16063646
> 
> 赞同：2
> 
> 时间：2013-04-17T15:05:59.670
> 
> 标签：javascript, jquery, coffeescript

试图找出完成这项工作的最佳方法：

```
class Person

  constructor: (@el) ->
    @el = $(el)
    this.bind()

  bind: ->
    @el.find('.something').on 'click', ->
      $(this).hide()       # conflict!
      this.do_something()  # conflict!

  do_something: ->
    alert 'done!' 
```

我知道我可以使用**哈希火箭（=>）**，然后`this.do_something`从我的回调中访问，但随后与 冲突`callback 'this'`，因此 jquery 试图选择对象，而不是`element '.something'`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:09:32.763

您无法`this`引用不同的对象。通过将实例的`this`引用存储在辅助变量中来使用不同的标识符：

```
 bind: ->
    person = this
    @el.find('.something').on 'click', ->
      $(this).hide()
      person.do_something() 
```

# cognos - 过滤计算字段 - 过滤器被忽略

> ID：16063648
> 
> 赞同：1
> 
> 时间：2013-04-17T15:06:05.967
> 
> 标签：cognos, cognos-bi

我花了几天时间（不是开玩笑）试图让过滤器工作。我在列表查询中有两个计算字段。它们分别称为 totalFY 和 countFY。以下是字段的表达式：

totalFY：总计（[Constituent ID] 的 [Hard Credit]，[Date of Record 会计年度]）

countFY：计数（[Constituent ID] 的不同 [Date of Record 会计年度]）

当我将 totalFY 拖到详细筛选器面板并设置阈值（假设 >5000）时，我的列表查询结果是预期的结果，即每年总购买量大于 5000 的客户。

但是当我将 countFY 字段添加到过滤器面板时，它会被我设置的过滤器阈值完全忽略（在本例中，>2）。在过去的几天里，我尝试了几件事，真的很难过。

如果我只用一个或另一个过滤，每个都可以独立工作。我尝试将一个设置为“在自动聚合后应用过滤器”，但我得到了相同的结果。

任何想法将不胜感激！

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:31:34.677

解决了。我最终做的是创建一个新查询并将前一个查询中的 countFY 添加为新查询中的数据项。现在我可以对 countFY 进行有效过滤，并在上一个查询中调整 totalFY 金额过滤器。希望这对其他人有帮助。

# java - 哪个 jar 文件包含 net.opengis.wps.x100 以及如何下载它？

> ID：16063652
> 
> 赞同：0
> 
> 时间：2013-04-17T15:06:13.450
> 
> 标签：java, opengis

我想在 52 north 之前开发一个 wps 进程，我应该使用`org.n52.wps.server.AbstractSelfDescribingAlgorithm`所以这个类继承自`net.opengis.wps.x100.ProcessDescriptionType`. 我的问题是哪个 jar 文件包含这种类型，请告诉我下载这个 jar 文件的 url？！我的代码是：

```
package www.gise.cse.iitb.ac.in;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import org.n52.wps.io.data.IData;
import org.n52.wps.io.data.binding.literal.LiteralDoubleBinding;
import org.n52.wps.server.AbstractSelfDescribingAlgorithm;

public class AddNumbersAlgo extends org.n52.wps.server.AbstractSelfDescribingAlgorithm {

@Override
public Class getInputDataType(String arg0) {
    // TODO Auto-generated method stub
    if (arg0.equals("Num1")){
        //return GTVectorDataBinding.class;
        return LiteralDoubleBinding.class;
    }
    if (arg0.equals("Num2")){
        //return GTVectorDataBinding.class;
        return LiteralDoubleBinding.class;
    }
    throw new RuntimeException("Error: WrongIdentifier");
}

@Override
public Class getOutputDataType(String arg0) {
    // TODO Auto-generated method stub
    if(arg0.equals("AdditionResult")){
        return LiteralDoubleBinding.class;
    }
    throw new RuntimeException("Error: Wrong identifier");
}
@Override
public Map<String, IData> run(Map<String, List<IData>> arg0) {

    if (arg0 == null || !arg0.containsKey("Num1")){
        throw new RuntimeException("Error: While allocating Input Parameters");
    }
    if (arg0 == null || !arg0.containsKey("Num2")){
        throw new RuntimeException("Error: While allocating Input Parameters");
    }
    List<IData> datalist = arg0.get("Num1");
    if(datalist == null || datalist.size()!=1){
        throw new RuntimeException("Error:While allocating Input Parameters");
    }

    //Checking for correctness of input
    List<IData> datalist1 = arg0.get("Num2");
    if(datalist1 == null || datalist1.size()!=1){
        throw new RuntimeException("Error:While allocating Input Parameters");
    }
    //Extracting input
            IData Num1 = datalist.get(0);
            double firstNum = ((LiteralDoubleBinding)Num1).getPayload();
            System.out.println(Num1);
            System.out.println(firstNum);

            IData Num2 = datalist1.get(0);
            double secondNum = ((LiteralDoubleBinding)Num2).getPayload();
            System.out.println(Num2);
            System.out.println(secondNum);

            double Result = firstNum + secondNum;
            //double AdditionResult;
            //create the response. In this case a GenericFileDataBinding is used (see this.getOutputDataType(...)
            IData AdditionResult = new LiteralDoubleBinding(Result);

            //new Map created
            Map<String, IData> resultMap = new HashMap<String, IData>();
            //created response added to corresponding identifier (see this.getOutputIdentifiers())
            resultMap.put("AdditionResult", AdditionResult);

            return resultMap;
}

@Override
public List<String> getInputIdentifiers() {
    // TODO Auto-generated method stub
    List<String> identifiers = new ArrayList<String>();
    identifiers.add("Num1");
    identifiers.add("Num2");
    return identifiers;
}

@Override
public List<String> getOutputIdentifiers() {
    // TODO Auto-generated method stub
    List<String> identifiers = new ArrayList<String>();
    identifiers.add("AdditionResult");
    return identifiers;
} 
```

错误是：

> 此行有多个标记
> 
> *   `net.opengis.wps.x100.ProcessDescriptionType`无法解析类型。它是从所需的 .class 文件中间接引用的
>     
>     
> *   `net.opengis.wps.x100.ProcessDescriptionType`无法解析类型。它是从所需的 .class 文件中间接引用的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:36:14.960

I would recommend using a maven-managed project. All required artifacts to create such a project are on the public 52north maven repository (including the XML bindings library you mentioned). The following pom.xml should serve well as a project skeleton. It already has the aforementioned maven repository included.

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>my.test.wps-project</groupId>
    <artifactId>wps</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.n52.wps</groupId>
            <artifactId>52n-wps-io</artifactId>
            <version>3.1.0</version>
        </dependency>
        <dependency>
            <groupId>org.n52.wps</groupId>
            <artifactId>52n-wps-algorithm</artifactId>
            <version>3.1.0</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <repositories>
        <repository>
            <id>n52-releases</id>
            <name>n52-releases</name>
            <url>http://52north.org/maven/repo/releases/</url>
        </repository>
    </repositories>
</project> 
```

In general, artifacts of a maven-managed open source project should be accessible on a dedicated or central repository. Otherwise the projects build setup would not be satisfied. So, a general advice would be to first do some investigation on the project structure.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:22:50.547

很难找到任何包含您正在搜索的内容的罐子。

我找到了一个包含文件的 subversion 存储库。所以我

*   [从http://geoengine.googlecode.com/svn/trunk/references/wps/](http://geoengine.googlecode.com/svn/trunk/references/wps/)签出代码
*   冉`mvn package`

现在你有了 jar 文件：

```
target/wps-1.0.0.jar 
```

您必须自己构建它并不是最佳选择，但它可以解决问题。

您的代码也可能依赖于其他 jar 文件，但我猜它们在同一个 repo 中。

# c# - 如何将菜单添加到组件类？

> ID：16063656
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:06:35.127
> 
> 标签：c#, .net, menu

我刚刚创建了一个解决方案并向其中添加了一个“组件类”。

**我所需要的只是在它处于win 形式时添加一个，例如 .NET 的`menu`组件。`Component Class``componentbar``ImageList`**

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:52:27.513

我假设您指的是当您选择 ImageList 组件并看到选项列表时出现在该组件上的小箭头。这需要一个自定义的 ComponentDesigner。

参考：

```
System.Components.Design
System.Design
System.Windows.Forms.Design 
```

这是一个简单的小组件示例：

```
[Designer(typeof(TestComponentDesigner))]
public class TestComponent : Component {

  public class TestComponentDesigner : ComponentDesigner {
    private DesignerVerbCollection verbs = new DesignerVerbCollection();

    public override void Initialize(IComponent component) {
      base.Initialize(component);
      verbs.Add(new DesignerVerb("Say Hello", new EventHandler(SayHello)));
    }

    public override DesignerVerbCollection Verbs {
      get {
        return verbs;
      }
    }

    private void SayHello(object sender, EventArgs e) {
      MessageBox.Show("Hello");
    }
  }
} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/Q9GLh.png)

有关详细信息，请参阅[为 .NET 组件编写自定义设计器](http://msdn.microsoft.com/en-us/library/ms973820.aspx)

# php - 如何使用 jquery 在动态添加的表行上创建计算

> ID：16063660
> 
> 赞同：1
> 
> 时间：2013-04-17T15:06:39.937
> 
> 标签：php, jquery, html, mysql

嗨，我有一个表单，当用户单击添加按钮时，它会从外部 php 文件动态添加表格行，到目前为止一切正常，但我有字段名称“数量”，它将以数字形式输入，并应计算总数它我已经创建了一个计算函数，但它只适用于第一行，任何人都可以帮助它应该如何完成这里是我的脚本

```
$(document).ready(function(){
                $('#detail').on('keyup', '.qty', calculateRow());
                $('#addnew').click(function(){

                    var ctr = $('#items').val();
                    ctr++;

                    $.post('job_srch.php', {ctr : ctr}, function(data) {
                          $(data).appendTo('#detail');

                          $('#items').val(ctr);                        
                    });
                });

function calculateSum() {

    var sum = 0;
    //iterate through each textboxes and add the values
    $(".qty").each(function (){
        //add only if the value is number
        if (!isNaN(this.value) && this.value.length != 0) {
            sum += parseFloat(this.value);
        }
    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    $("#total").val(sum.toFixed(2));
}

function calculateRow() {
    $('.qty').keyup(function () {
        //alert("entered");
        var $row = $(this).closest("tr");
        var qty = parseFloat($row.find('.qty').val());

        calculateSum();
    });
}
   }); 
```

这是我的 php

```
session_start();
require("includes/dbconnect.php");
include ('includes/function.php');

$zdb = $_SESSION["zdbyear"];
mysql_select_db($zdb);

if ($_REQUEST["ctr"]){
    $ctr = $_REQUEST["ctr"];
    //echo '<link rel="stylesheet" href="css/chosen.css" />';
echo '<tr>

   <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="srno_'.$ctr.'" class="form-input-oth"/></td>
   <td align="center"><select data-placeholder="Party" style="width:300px;" name="item_'.$ctr.'" class="chzn-select-deselect" >
                                  <option value=""></option>';
                      $res = mysql_query("SELECT * FROM `items`") or die(mysql_error());
                      while ($row = mysql_fetch_array($res)) {
                             echo "<option value='$row[accode]'>$row[name]</option>";
                      }
    echo '</select></td>';
    echo '<td align="center"><input type="text" id="qty" size="6" maxlength="9" maxlength="6" name="qty_'.$ctr.'" class="qty form-input-amt"/></td>

                      </tr>';
}
else{
    echo "ERROR";
} 
```

这是我的html

```
 <table id="detail" border="1px" width="80%">
          <tr>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Sr No.</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">item</font><span></span></label></td>
             <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Quantity</font><span></span></label></td>
          </tr>

              <tr>
                  <td align="center"><input type="text" size="6" maxlength="6" maxlength="6" name="ord_0" class="form-input-oth"/></td>
                  <td align="center"><select data-placeholder="Party" style="width:300px; text-align: left;" name="item_0" class="chzn-select-deselect" >
                          <option value=""></option>
                          <?php
                                $iqry = mysql_query("SELECT * FROM `items` ") or die(mysql_error());
                                    while($trow= mysql_fetch_array($iqry)){
                                        echo "<option value=$trow[accode]>$trow[name]</option>";
                                    }
                          ?>
                      </select></td>
                  <td align="center"><input id="qty" type="text" size="6" maxlength="9" maxlength="6" name="qty_0" class="qty form-input-amt" onkeyup="return calculateSum(); "/></td>
              </tr>
<input type="button" id="addnew" class="classname" name="addnew" value="+" /> 
                          <input type="text" id="items" name="items" value=" 0" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T12:07:55.473

改变`$('#detail').on('keyup', '.qty', calculateRow());` `as`

```
$(document).on('keyup', '.qty', function(){
calculateRow(); // or code here
}); 
```

# xslt - XSL-FO 表格每 5 列中断一次

> ID：16063662
> 
> 赞同：0
> 
> 时间：2013-04-17T15:06:43.930
> 
> 标签：xslt, pdf, xsl-fo

我正在创建一个包含 25 列的 fo:table。当我转换为 PDF 时，表格对于页面 (A4) 的大小来说太宽了，如何按列拆分表格，例如，我想在另一页上写每 5 列？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:22:40.553

我举了一个表的例子，它有九列，如：

```
<Table>
  <thead>
    <tr>
      <td>Head1</td>
      <td>Head2</td>
      <td>Head3</td>
      <td>Head4</td>
      <td>Head5</td>
      <td>Head6</td>
      <td>Head7</td>
      <td>Head8</td>
      <td>Head9</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>7</td>
      <td>8</td>
      <td>9</td>
    </tr>
    <tr>
      <td>2-1</td>
      <td>2-2</td>
      <td>2-3</td>
      <td>2-4</td>
      <td>2-5</td>
      <td>2-6</td>
      <td>2-7</td>
      <td>2-8</td>
      <td>2-9</td>
    </tr>
    <tr>
      <td>3-1</td>
      <td>3-2</td>
      <td>3-3</td>
      <td>3-4</td>
      <td>3-5</td>
      <td>3-6</td>
      <td>3-7</td>
      <td>3-8</td>
      <td>3-9</td>
    </tr>
  </tbody>
</Table> 
```

现在，我创建了 XSLT，通过在 <xsl:param name="columnNumber"/> 参数中传递整数值将其分解为多个表：

```
<?xml version='1.0' ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xsl:output indent="yes"/>

  <xsl:param name="columnNumber" select="xs:integer(4)"/>

  <xsl:template match="Table">
    <xsl:param name="countColumn" select="count(//tbody/tr[1]/td)"/>
    <xsl:choose>
      <xsl:when test="$countColumn gt $columnNumber">
        <xsl:call-template name="divideTable">
          <xsl:with-param name="tableToGenerate" select="ceiling($countColumn div $columnNumber)"/>
          <xsl:with-param name="orginialTable" select="self::*"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy>
          <xsl:copy-of select="*"/>
        </xsl:copy>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template name="divideTable">
    <xsl:param name="tableToGenerate"/>
    <xsl:param name="orginialTable"/>
    <xsl:param name="start" select="xs:integer(1)"/>
    <xsl:param name="end" select="$columnNumber"/>
    <xsl:param name="counter" select="xs:integer(1)"/>
    <xsl:choose>
      <xsl:when test="$counter le $tableToGenerate">
        <Table>
          <thead>
            <xsl:copy-of
              select="$orginialTable/thead/tr/td[position() le $end and position() ge $start]"/>
          </thead>
          <tbody>
            <xsl:for-each select="$orginialTable/tbody/tr">
              <tr>
                <xsl:copy-of select="td[position() le $end and position() ge $start]"/>
              </tr>
            </xsl:for-each>
          </tbody>
        </Table>
        <xsl:call-template name="divideTable">
          <xsl:with-param name="start" select="xs:integer(($columnNumber * $counter) + 1)"/>
          <xsl:with-param name="end" select="xs:integer(($columnNumber * $counter) + $columnNumber)"/>
          <xsl:with-param name="tableToGenerate" select="$tableToGenerate"/>
          <xsl:with-param name="orginialTable" select="$orginialTable"/>
          <xsl:with-param name="counter" select="xs:integer($counter + 1)"/>
        </xsl:call-template>
      </xsl:when>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

它给了我输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Table xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <thead>
      <td>Head1</td>
      <td>Head2</td>
      <td>Head3</td>
      <td>Head4</td>
   </thead>
   <tbody>
      <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>
         <td>4</td>
      </tr>
      <tr>
         <td>2-1</td>
         <td>2-2</td>
         <td>2-3</td>
         <td>2-4</td>
      </tr>
      <tr>
         <td>3-1</td>
         <td>3-2</td>
         <td>3-3</td>
         <td>3-4</td>
      </tr>
   </tbody>
</Table>
<Table xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <thead>
      <td>Head5</td>
      <td>Head6</td>
      <td>Head7</td>
      <td>Head8</td>
   </thead>
   <tbody>
      <tr>
         <td>5</td>
         <td>6</td>
         <td>7</td>
         <td>8</td>
      </tr>
      <tr>
         <td>2-5</td>
         <td>2-6</td>
         <td>2-7</td>
         <td>2-8</td>
      </tr>
      <tr>
         <td>3-5</td>
         <td>3-6</td>
         <td>3-7</td>
         <td>3-8</td>
      </tr>
   </tbody>
</Table>
<Table xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <thead>
      <td>Head9</td>
   </thead>
   <tbody>
      <tr>
         <td>9</td>
      </tr>
      <tr>
         <td>2-9</td>
      </tr>
      <tr>
         <td>3-9</td>
      </tr>
   </tbody>
</Table> 
```

请看看这个并检查这个例子是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T15:18:32.217

我的解决方案是创建两个独立的表。然后我创建了两个 xsl 模板块，以区分我使用模式功能的第二个块的第一个块。像这样：

```
Table
....
<xsl:apply-templates select="content[@teste='1']" mode="first" />
....
<xsl:apply-templates select="content[@teste='1']" mode="second" />
....
XSL Templates block
....
<xsl:template match="content[@teste='1']" mode="first">
....
<xsl:template match="content[@teste='1']" mode="second">
.... 
```

# regex - 带撇号的电子邮件的正则表达式

> ID：16063664
> 
> 赞同：2
> 
> 时间：2013-04-17T15:06:49.463
> 
> 标签：regex, asp.net-mvc, validation

我正在构建一个**MVC 4 Web 应用程序**并在验证我的一些 ViewModel 时使用**Fluent Validation 。**

我需要**验证电子邮件地址**，并且我正在使用这个**正则表达式**，它是在 Visual Studio 中创建默认 MVC 应用程序时 AccountModels 类中的默认表达式

```
RuleFor(x => x.ConfirmEmail)
.Matches(@"^[\w-]+(\.[\w-]+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$")
.WithMessage("Please enter a valid email address"); 
```

但是，我的客户告诉我，这不接受在 @ 符号前包含撇号的电子邮件地址。

我根本不擅长正则表达式，所以有人可以帮我修改这个 reg 表达式以允许在 @ 符号之前使用撇号吗？

提前致谢。

**更新**

我输入了错误的代码示例，请现在查看正则表达式 - 这是不接受撇号的表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:50:54.490

更新后，您正在寻找的正则表达式是：

```
^[\w-']+(\.[\w-']+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$ 
```

请注意，这里唯一改变的是`'`（撇号）字符已添加到`@`符号之前的两个字符类中的每一个中。

# javascript - Javascript 谷歌地图 api 输入地址显示位置

> ID：16063670
> 
> 赞同：1
> 
> 时间：2013-04-17T15:06:57.860
> 
> 标签：javascript, google-maps-api-3, geocoding

我的应用程序目前根据硬编码的纬度和经度查找最近的滑雪区。我希望能够输入地址并将该地址转换为经度和纬度以进行搜索。我正在使用 Google Maps api 和 places 库。我知道我不知何故需要使用地理编码，但不知道该怎么做。这是代码：

```
 <!DOCTYPE html>
    <html>
  <head>
    <meta charset="utf-8">
    <title>ski finder</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>

    <style>
      #map {
        height: 400px;
        width: 600px;
        border: 1px solid #333;
        margin-top: 0.6em;
      }
    </style>

    <script>
      var map;
      var infowindow;

      function initialize() {
        var loca = new google.maps.LatLng(41.7475, -74.0872);

        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: loca,
          zoom: 8
        });

        var request = {
          location: loca,
          radius: 50000,
          name: 'ski',
          keyword: 'mountain',
          type: ['park']

        };
        infowindow = new google.maps.InfoWindow();
        var service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, callback);
      }

      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });

        google.maps.event.addListener(marker, 'mouseover', function() {
          infowindow.setContent(place.name);
          infowindow.open(map, this);
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
      </head>
      <body>
        <h1> Welcome to Ski Finder </h1>
        <p> Please enter you location below, and we will find your local ski areas. </p>
        <form>
        <label for="zip">Zip Code: </label>
        <input type = "text" name="zip" placeholder = "12345" autofocus>
    </form>
        <div id="map"></div>
        <div id="text">

      </body>
    </html> 
```

我也尝试使用谷歌地图开发者页面上的示例，但无法正常工作。先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:36:51.330

使用地理编码器设置传入地点搜索的位置：

[工作示例](http://www.geocodezip.com/v3_SO_skiPlaceFinder.html)

**代码片段：**

```
var geocoder;
var map;
var infowindow;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var loca = new google.maps.LatLng(41.7475, -74.0872);

  map = new google.maps.Map(document.getElementById('map'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: loca,
    zoom: 8
  });

}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      createMarker(results[i]);
    }
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, 'mouseover', function() {
    infowindow.setContent(place.name);
    infowindow.open(map, this);
  });
}

function codeAddress() {
  var address = document.getElementById("address").value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
      });
      var request = {
        location: results[0].geometry.location,
        radius: 50000,
        name: 'ski',
        keyword: 'mountain',
        type: ['park']
      };
      infowindow = new google.maps.InfoWindow();
      var service = new google.maps.places.PlacesService(map);
      service.nearbySearch(request, callback);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map {
  height: 400px;
  width: 600px;
  border: 1px solid #333;
  margin-top: 0.6em;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>
<title>ski finder</title>

<h1> Welcome to Ski Finder </h1>
<p>Please enter you location below, and we will find your local ski areas.</p>
<form>
  <label for="zip">Zip Code:</label>
  <input type="text" id="address" placeholder="12345" autofocus></input>
  <input type="button" value="Submit" onclick="codeAddress();"></input>
</form>
<div id="map"></div>
<div id="text">
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T06:55:50.660

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PC Pro - Google Maps Advanced Example</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>  
<script type="text/javascript">
        var map = null;
        $(document).ready(function () {
            // Set values for latitude and longitude
            var latitude = parseFloat("51.515252");
            var longitude = parseFloat("-0.189852");
            // Setup the Google map
            loadMap(latitude, longitude);
            // Add the marker
            setupMarker(latitude, longitude);
            // Setup the address lookup on the button click event
            $('#lookup').click(function() {
                var address = $('#address').val();
                var geocoder = new google.maps.Geocoder();          
                geocoder.geocode({ 'address': address }, function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        // Show the new position on the map
                        setupMarker(results[0].geometry.location.lat(), results[0].geometry.location.lng())
                    }
                    else alert("Unable to get a result, reason: " + status);
                });
            });
        });
        // Loads the maps
        loadMap = function (latitude, longitude) {
            var latlng = new google.maps.LatLng(latitude, longitude);
            var myOptions = {
                zoom: 7,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map"), myOptions);
        }
        // Setups a marker and info window on the map at the latitude and longitude specified
        setupMarker = function(latitude, longitude) {
            // Generate the position from the given latitude and longitude values
            var pos = new google.maps.LatLng(latitude, longitude);
            // Define the marker on the map in the specified location
            var marker = new google.maps.Marker({
                position: pos,
                map: map,
                title: name
            });
            // Add a listener to this marker to display the information window on click
            var info = "This is a marker for the following co-ordinates:<br />latitude: " + latitude + "<br/>longitude: " + longitude;
            google.maps.event.addListener(marker, 'click', function () {
                var infowindow = new google.maps.InfoWindow({
                    content: info
                });
                infowindow.open(map, marker);
            });
        }
</script>
</head>
<body>
<label for="address">Address:</label>
<input id="address" type="text" style="width:540px" />
<input id="lookup" type="button" value="Lookup" />
<div id="map" style="width:600px;height:600px;margin-top:10px;"></div>
</body>
</html> 
```

# c++ - 包含所有包含的标头内容的临时文件

> ID：16063671
> 
> 赞同：3
> 
> 时间：2013-04-17T15:06:58.317
> 
> 标签：c++, visual-c++, gcc, clang, compiler-options

我需要跟踪与包含头文件相关的错误，我怀疑一个或多个文件具有不匹配的大括号和/或括号，我认为查看预处理器带来的文件会很有用给编译器；那是完成所有宏替换并且完全粘贴了标题的所有内容的文件。

我知道有一个编译器选项可以将此临时文件保存到磁盘，但是在谷歌搜索之后我无法找到为我带来该信息的搜索字符串，所以我正在寻求帮助：

什么编译器选项可以将预处理器的输出保存到磁盘中？

我对以下编译器的此选项感兴趣：

*   海合会
*   铛
*   msvc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:12:15.170

大多数（如果不是所有）编译器（我曾经使用过的所有编译器）都允许您通过使用编译器的名称来“预处理源文件” `CC -E myfile.cpp > myfile.i`（`CC`例如`CL`, `gcc`, `g++`, `clang`,`clang++`等）。

这将产生包含所有内容的大文件，如果您可以访问自动格式化文件的编辑器（例如`M-x indent-region`在 Emacs 等中），那么您可以使用它来缩进并查看不匹配的大括号在哪里。

# python - 如何使用 boto 以编程方式检查 Amazon S3 权限？

> ID：16063673
> 
> 赞同：8
> 
> 时间：2013-04-17T15:07:02.023
> 
> 标签：python, permissions, amazon-s3, boto

我们在 Amazon S3 上的存储桶中有一棵茂密的树，其中包含大量文件。我刚刚发现，虽然有些文件有两个权限条目，如在 AWS 管理控制台中单击一个文件，然后是属性 -> 权限，一行是“每个人”，另一行是某个特定用户，其他文件只有一个该用户的条目。因此，我们在使用 boto 或 curl 将这些文件下载到 Amazon EC2 实例时遇到问题。

我需要做的是检查存储桶中的所有文件并检查它们。我知道如何获取前缀的完整键列表。我可以使用 boto 来提取密钥的权限吗？是否有标准的方法来测试这些权限是否适用于每个人或特定的人，以及它们是什么？

此外，一旦我确定一个密钥是否具有限制性权限，我可以通过向“每个人”添加读取权限以编程方式更改它们吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T15:59:37.170

这是一些使用 boto 的 Python 代码，它可以查看存储桶中的所有键。如果密钥不允许“每个人”读取密钥的内容，它将为该`public-read`密钥添加权限：

```
import boto

all_users = 'http://acs.amazonaws.com/groups/global/AllUsers'
conn = boto.connect_s3()
bucket = conn.get_bucket('mybucket')

for key in bucket:
    readable = False
    acl = key.get_acl()
    for grant in acl.acl.grants:
        if grant.permission == 'READ':
            if grant.uri == all_users:
                readable = True
    if not readable:
        key.make_public() 
```

此代码尚未经过彻底测试，因此您应该先尝试一下。另外，要清楚这样做的最终结果是使存储桶中的所有对象都可以被任何人读取。另请记住，此脚本正在获取存储桶中每个对象的当前 ACL，因此如果有数百万个对象，那就是数百万个请求，这可能会花费大量时间并且会产生一些相关成本。

另一种方法是只调用`make_public()`存储桶中的每个键，而不管它是当前的 ACL。

# ios - 像在本机相机应用程序中一样在方向更改时旋转按钮

> ID：16063687
> 
> 赞同：2
> 
> 时间：2013-04-17T15:07:23.400
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller, uiviewanimation

有谁知道我怎样才能让按钮在旋转更改时旋转**到位**，就像它们在本机 iPhone 应用程序中旋转一样？

我正在为 iOS 6 及更高版本开发，所以我正在使用方法`shouldAutorotate`等。

我试图返回`YES`然后更改框架，但这使图标“移动”，而不是原地旋转。我想返回`NO`并制作自定义`UIView`动画，但我不确定如何获取有关当前和即将到来的方向的数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:14:19.393

您应该使用 CGAffineTransformation 旋转按钮，而不仅仅是更改框架。

```
self.myButton.transform = CGAffineTransformMakeRotation(someRadians); 
```

[http://iphonedevsdk.com/forum/iphone-sdk-development/61080-cgaffinetransformmakerotation-changes-height-and-width-of-image.html](http://iphonedevsdk.com/forum/iphone-sdk-development/61080-cgaffinetransformmakerotation-changes-height-and-width-of-image.html)

# html - 如何让 div 取屏幕剩余高度

> ID：16063692
> 
> 赞同：1
> 
> 时间：2013-04-17T15:07:39.433
> 
> 标签：html, css

我想扩展 div 标签以适应手机屏幕高度

```
<div id="header"></div>
<div id="container"></div>
<div id="footer"></div> 
```

页眉和页脚没有固定的高度值，我想让容器适合剩余的屏幕高度。

当我使用：

```
html , body {height:100%;}
#cointainer{height:100%;} 
```

我必须滚动才能显示页脚。

所以我希望页眉和页脚`height:auto`以及容器占据剩余的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:05:36.457

好吧，你可以做一些数学运算，取窗口高度并减去页脚和页眉高度，这就是容器高度。再见。

# python - SciPy 径向基函数的替代输入

> ID：16063698
> 
> 赞同：0
> 
> 时间：2013-04-17T15:07:58.213
> 
> 标签：python, scipy

我正在尝试生成一个径向基函数，其中输入变量是在运行时定义的。SciPy.interpolate.Rbf 函数似乎为每个输入和输出变量请求离散列表，例如：rbf(x,y,z)。这限制了您事先定义固定变量。

我尝试将变量列表或数组传递给 Rbf 函数（例如 rbf(list(x,...)) 但没有成功。有没有其他人使用这个 Rbf 库找到解决这个问题的方法？我会如果可能的话，喜欢避免切换到不同的库或重写一个库。有没有办法在运行时生成离散变量以输入函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:48:49.867

在查看 SciPy 函数的源代码后，我将对其进行子类化并覆盖**init**，其中各个输入无论如何都组合成一个数组。

# tcl - 使用 TCL 在 txt 文件中查找日期

> ID：16063702
> 
> 赞同：1
> 
> 时间：2013-04-17T15:08:10.303
> 
> 标签：tcl

嗨，伙计，我有一个小问题，我读过很多与此类似的帖子，但找不到完整的答案。我需要检查今天是否是公共假期日期。我有一个“public-holiday-dates.txt”文件，其中包含公共假期日期，例如：（mmddyyyy）

01012013

07012013

12252013

我有一个变量 $today_date_is ，它有今天的日期示例：04172013 我需要在 .txt 文件中搜索这个值，如果找到则返回 1（这将是今天是公共假期日期的情况）或返回 0 如果未找到（今天是工作日）

我怎么能这样做？我应该打开文件并将所有信息加载到变量并拆分行吗？或者我可以在文件中搜索吗？我怎么能返回值 0 或 1.. 提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:45:02.370

游戏计划是打开文件，读取内容，然后将该内容视为列表。然后，您可以使用`lsearch`(list search) 命令，如果未找到该值，该命令将返回 -1：

```
proc is_holiday {the_date} {
    set infile [open public-holiday-dates.txt]
    set holidays [read $infile]
    close $infile

    if {[lsearch $holidays $the_date] == -1} {
        return 0
    } else {
        return 1
    }
} 
```

### 使用它

您可以通过以下方式调用此过程：

```
if {[is_holiday $today_date_is]} {
    puts "Is a holiday"
} else {
    puts "Is not a holiday"
} 
```

### 讨论

*   该过程的前三行`is_holiday`处理打开假期文件、读取内容和关闭 - 直截了当，但我稍后会详细讨论该文件。
*   下一个块，该`if`命令测试搜索结果：-1 表示未找到，因此该过程返回 0。否则返回 1——同样，这非常简单。
*   我可以将整个`if`块组合成一个语句，但为了可读性，我选择不这样做，尤其是对于初学者。我确信该块比以下更具可读性：

    ```
    return [expr {[lsearch $holidays $the_date] != -1}] 
    ```

*   此过程在每次调用时打开/读取/关闭假期文件。如果您经常调用它（例如，几千次），那么您可能希望重组代码以仅读取一次以优化速度。
*   回到文件名，该过程当前将文件名硬编码（假设）为*public-holiday-dates.txt*，这不是一个好习惯。如果文件名改变了怎么办？如果你想在不同的文件中搜索怎么办？处理此问题的一种方法是允许调用者有选择地指定文件名。

    ```
    proc is_holiday {the_date {holiday_filename public-holiday-dates.txt}} {
        set infile [open $holiday_filename]
        set holidays [read $infile]
        close $infile

        if {[lsearch $holidays $the_date] == -1} {
            return 0
        } else {
            return 1
        }
    } 
    ```

现在，如果你想指定一个不同的日历文件：

```
 is_holiday $today_date_is other_calendar.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:52:33.500

由于文件的大小`public-holiday-dates.txt`可能不是那么大，我会一次读取它，拆分行，并将结果列表存储在一个变量中。你可以这样做：

```
set fp [open "public-holiday-dates.txt" r]
set file_data [read $fp]
close $fp
set holidays [split $file_data "\n"] 
```

在列表中列出所有假期后，您可以使用`lsearch`（*列表搜索*）在列表中搜索给定日期。一个复杂之处是`lsearch`返回找到该项目的索引，如果未找到则返回-1。因此，您需要将其转换为所需的 0/1。你可以这样做：

```
[expr [lsearch $holidays $today_date_is] > -1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T03:42:08.797

另一种选择。你可以使用[::fileutil::grep](http://wiki.tcl.tk/776)

```
package require fileutil

set the_date [clock format [clock seconds] -format "%m%d%y"]

if { [::fileutil::grep (?i)$the_date public-holiday-dates.txt] !="" } {
return 1 
} else {
return 0
} 
```

# sql - 从现有表插入新表并添加 ID

> ID：16063707
> 
> 赞同：0
> 
> 时间：2013-04-17T15:08:24.827
> 
> 标签：sql, tsql

我将 Excel 电子表格中的数据导入到表中，现在我需要转换其中的一些数据，然后将其插入到另一个表中。两个表中的所有内容都相同，除了一些`VARCHAR`将更改为`BIT`类型并且新表将具有一个`ID`字段。

```
SELECT Column1, Column2, CASE Column3 WHEN 'Y' THEN 1 ELSE 0 END AS 'Column3'
FROM MyTable 
```

我需要做的是获取所有这些数据并将其插入到一个新表中，该表将在原始表中的所有内容之上都有一个 ID 列。我遇到的问题是插入语句，我知道我可以`INSERT INTO`运行一个选择语句并将其插入，但我无法添加`ID`应该自动递增的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:10:35.410

你可以使用：

`ROW_NUMBER() OVER(ORDER BY Column1)`

在你的`select`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:14:14.233

试试这个....

```
 Insert into YourTableName(Column1,Column2,Column3) (SELECT Column1, Column2, CASE Column3 WHEN 'Y' THEN 1 ELSE 0 END AS 'Column3'
    FROM MyTable) 
```

将您的 id 字段设置为身份字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:22:08.003

如果您稍后要使用新表，那么您希望使用 id 列创建它：

```
create table NewTable (
    NewTableId int not null identity(1, 1),
    <your columns here>
) 
```

然后插入：

```
insert into NewTableId(<your columns here>)
    select <your columns here>
    from StagingTable 
```

这也使您有机会优化列的类型。

如果您只想为第一次插入增加一个数字：

```
select row_number() over (order by (select NULL)) as NewTableId,
       t.*
into NewTable
from t 
```

我发现在`order by`运行中使用常量表达式比使用列名更快。性能优势完全是凭经验得出的，Microsoft 不保证。但是，它在实践中对我有用。

# extjs - 使用 preloadChildren false 在 ExtJS 树面板之间拖放

> ID：16063710
> 
> 赞同：0
> 
> 时间：2013-04-17T15:08:36.023
> 
> 标签：extjs, drag-and-drop

我有两个动态加载的面板。我需要在它们之间拖放。问题是，一旦我拖放一个未展开的节点，它就不会被完全复制……只是节点，而不是子树（子树）。我不喜欢它一开始就消耗了什么，因为它会破坏性能......我需要将它复制到未扩展的状态。可以这样做吗？

PS：使用 ExtJS 4.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T10:54:06.280

检查Sencha 的[这个](http://dev.sencha.com/deploy/ext-4.0.1/examples/tree/two-trees.html)例子。这可能很有用。

# c# - 使用 System.Random 值的 C# 问题

> ID：16063712
> 
> 赞同：-8
> 
> 时间：2013-04-17T15:08:43.977
> 
> 标签：c#, random

我正在尝试创建随机数，然后使用我找到的这个 box muller 算法。我遇到的问题是使用 System.Random 值进行任何类型的数学运算。我不能取平方根、对数或将它们与浮点值混合。这是我的随机分布代码。想了好几天，也想不出什么来。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
        Random rand1 = new Random();
        Console.WriteLine("999 Doubles1.");
        for (int ctr = 0; ctr <= 999; ctr++)
            Console.Write("{0,8:N3}", rand1.NextDouble());
        Console.WriteLine();
        Random rand2 = new Random();
        Console.WriteLine("999 Doubles2.");
        for (int ctr = 0; ctr <= 999; ctr++)
            Console.Write("{0,8:N3}", rand2.NextDouble());
        Console.WriteLine();

        float mu = .75F;
        float sigma = .1F;

        float z1 = Math.Sqrt(-2 * Math.Log(rand1)) * Math.Sin(2 * Math.PI * rand2);
        float z2 = Math.Sqrt(-2 * Math.Log(rand1)) * Math.Cos(2 * Math.PI * rand2);
        float x1 = mu + z1 * sigma;
        float x2 = mu + z2 * sigma;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T15:11:51.743

看看这段代码：

```
 Math.Log(rand1) 
```

这不是试图获取随机数的日志......它试图获取随机数*生成器*的日志。你需要类似的东西：

```
double randomNumber = rand1.NextDouble();
// Code using Math.Log(randomNumber) 
```

对随机数生成器本身执行数值运算的概念没有多大意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:15:39.240

用这个：

```
 double double1 = rand1.NextDouble();
            double double2 = rand1.NextDouble();

            double z1 = Math.Sqrt(-2 * Math.Log(double1)) * Math.Sin(2 * Math.PI * double2);
            double z2 = Math.Sqrt(-2 * Math.Log(double1)) * Math.Cos(2 * Math.PI * double2);
            double x1 = mu + z1 * sigma;
            double x2 = mu + z2 * sigma; 
```

# http - 为什么我在 Netbeans HTTP Server Monitor 中看不到整个 POST 字符串？

> ID：16063715
> 
> 赞同：1
> 
> 时间：2013-04-17T15:08:49.273
> 
> 标签：http, servlets, netbeans

我最近开始查看 Netbeans 中的“HTTP Server Monitor”选项（自行弹出），它看起来非常有用。我的 GUI 客户端是一个用 Java 编写的应用程序，它使用 HTTP POST 通过 HTTPClient 库与 Tomcat 服务器通信。但是，在 HTTP Server Monitor Request 选项卡中，“Query String”为空，底部的消息显示“Data sent with the request was not parameterized”。我希望在某处看到完整的 POST 请求。

有没有办法配置 HTTP 服务器监视器以显示完整的 POST 请求？

仅供参考，我的系统通信正常，我可以将其切换到“调试”模式，将完整的字符串发送到日志文件。但是，如果可能的话，如果我可以直接在 IDE 中看到客户端/服务器通信会更方便。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:09:55.963

术语“查询字符串”是指 url 的“参数部分”。不包括帖子参数。有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Query_string)。

# sql - 如何获取可用座位数

> ID：16063717
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:08:59.147
> 
> 标签：sql, count

下表是：
Flight (FlightID, MaxCapacity)
FlightBooking (BookingID, FlightID, NumSeats, Status)，状态为：Reserved、Held、Expired、Cancall。

我已经知道如何显示保留和保留席位，但我无法计算应等于 MaxCapacity 减去保留和保留席位的可用席位。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:11:57.887

```
SELECT f.MaxCapacity - COUNT(b.Status)
FROM Flight f
INNER JOIN FlightBooking b
ON f.FlightID = b.FlightID
WHERE b.Status IN ('Reserved','Held')
GROUP BY f.FlightID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:12:19.350

```
select flightid, 
       max(f.maxcapacity) - count(case when fb.status in ('reserved', 'held') 
                                       then 1 
                                       else 0 
                                  end)
from flight f
left outer join flightbooking fb on fb.flightid = f.flightid
group by f.flightid 
```

# ruby-on-rails - 如何从资产预编译中获得完整的回溯？

> ID：16063719
> 
> 赞同：1
> 
> 时间：2013-04-17T15:09:03.903
> 
> 标签：ruby-on-rails, ruby, rake, sprockets

编译资产时出现错误，但 rake 或 sprockets 或堆栈中的某些东西正在吞噬它

```
** Execute assets:precompile:primary
uninitialized constant #<Class:0x007fae6cb3dd88>::FooBar
Command failed with status (1): [/Users/john/.rbenv/versions/1.9.3-p385-per...] 
```

我怎样才能获得更多详细信息？我正在使用耙子`--trace --verbose`

# asp-classic - Outlook 无法识别 ical 附件

> ID：16063720
> 
> 赞同：0
> 
> 时间：2013-04-17T15:09:10.687
> 
> 标签：asp-classic, outlook, attachment, email-attachments, icalendar

我必须从经典 ASP 应用程序发送日历邀请才能接收到 Outlook。使用各种不同的电子邮件组件（ASPEmail、ASPMail、JMail）我发送了带有附件的邮件，但是当收到邮件时，Outlook 不会将附件识别为日历邀请，而 GMail 会。

在 JMail 中，我可以将附件的内容类型设置为文本/日历，但这没有区别。

邀请已在[此处](http://severinghaus.org/projects/icv/)进行了测试，并且验证良好。

我对这个问题的任何解决方案持开放态度，包括将邀请作为内联工作，但不幸的是 .NET 和 PHP 不是选项。

这是一些测试代码 - JMail 是我能找到的唯一可以设置附件内容类型的组件。

```
set msg = Server.CreateOBject( "JMail.Message" )
set attachment = Server.CreateOBject( "JMail.Attachment" )

msg.Logging = true
msg.silent = true

msg.From = "website@userdomain.com"
msg.FromName = "Website"
msg.AddRecipient "outlook@userdomain.com", "Outlook"
msg.Subject = "Meeting"
msg.Body = "Meeting invite attached"

'although cid not needed, i could only get this to work by using cid =
cid = msg.AddAttachment (server.mappath(".\invite.ics"), false, "text/calendar")

msg.ContentType = "text/calendar"

if not msg.Send("mail.userdomain.com" ) then
    Response.write "<pre>" & msg.log & "</pre>"
else
    Response.write "Message sent succesfully!"
end if 
```

在将消息内容类型也设置为文本/日历后，当单击附件时，它现在显示为十六进制而不是简单的文本文件。它仍然未被识别为邀请。这是它的顶部：

```
This is a multipart message in MIME format.
----NEXT_BM_D29EC5CD87384387A59E240A29CD74DD
Content-Type: text/plain;
    charset="iso-8859-1"
Content-Transfer-Encoding: Quoted-Printable

Meeting invite attached

----NEXT_BM_D29EC5CD87384387A59E240A29CD74DD
Content-Type: text/calendar; name="=?iso-8859-1?Q?invite=2Eics?="
Content-Transfer-Encoding: base64
Content-Description: =?iso-8859-1?Q?invite=2Eics?=
Content-Disposition: attachment; filename="=?iso-8859-1?Q?invite=2Eics?="
Content-ID: <8AB4D71598B445B88353F487644AC2F3> 
```

顺便说一句，我正在使用 Office Professional Plus 2013 的测试版。

在 GMail 收到的类似消息显示了这些标头：

```
Content-Type: text/calendar;
    boundary="--NEXT_BM_675B64750B5649EAAF1A3F3D9EC69302"
Return-path: <website@userdomain.com>

This is a multipart message in MIME format.
----NEXT_BM_675B64750B5649EAAF1A3F3D9EC69302
Content-Type: text/plain;
    charset="iso-8859-1"
Content-Transfer-Encoding: Quoted-Printable

Meeting invite attached

----NEXT_BM_675B64750B5649EAAF1A3F3D9EC69302
Content-Type: text/calendar; name="=?iso-8859-1?Q?invite=2Eics?="
Content-Transfer-Encoding: base64
Content-Description: =?iso-8859-1?Q?invite=2Eics?=
Content-Disposition: attachment; filename="=?iso-8859-1?Q?invite=2Eics?="
Content-ID: <C6C87170FE7B4BC581E7EE33EE24BC71> 
```

所以消息类型确实设置为文本/日历，但消息的文本部分设置为纯文本。

使用代码的修改版本，将正文设置为实际的 iCal 数据，并且内容类型为文本/日历，Outlook 仍然不会将其识别为邀请，而是使用邮件主题将正文转换为附件作为文件名，例如 test.ics

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:48:54.107

由于客户要求快速找到解决方案的压力，我选择使用旧的 vCalendar 版本 1 规范并使用 .vcs 文件而不是 .ics 来执行此操作。

在测试中，Outlook 已证明很乐意将文本 .vcs 附件识别为日历条目，而无需特殊的内容类型等。这种格式虽然很旧，但具有我们客户需要的所有功能。

vCalendar 1.0 版 (.vcs) 的完整规范可在[http://www.imc.org/pdi/pdiproddev.html找到](http://www.imc.org/pdi/pdiproddev.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:48:14.253

确保邮件内容类型是日历，而不仅仅是附件。如果邀请需要包含附件，则需要将它们嵌入到 iCal 部分，而不是作为单独的附件添加。

# curl - Golang HTTP GET 请求返回 404

> ID：16063724
> 
> 赞同：4
> 
> 时间：2013-04-17T15:09:24.330
> 
> 标签：curl, get, go

我正在尝试使用 BasicAuth 执行简单的 HTTP 获取。问题是响应不断返回“404”，即使我可以将 URL 复制并粘贴到命令行 cURL 请求中并且它工作正常：

```
const url string = "http://1.2.3.4:6710/REST/command"
const username string = "..."
const password string = "..."

fmt.Printf("\n%v\n", url)

client := &http.Client{}

req, _ := http.NewRequest("GET", url, nil)
req.SetBasicAuth(username, password)
req.Proto = "HTTP/1.0"
req.ProtoMinor = 0

resp, _ := client.Do(req)

fmt.Printf("\n%v\n", resp)

defer resp.Body.Close()
body, _ := ioutil.ReadAll(resp.Body)   

fmt.Printf("\n%v\n\n", string(body)) 
```

因此，您可以看到我正在`url`立即打印出我的 - 这是同一行文本，如果我将其复制到命令行 cURL 请求中，则一切正常。

我的请求响应是

`&{404 Not Found 404 HTTP/1.0 1 0 map[Pragma:[no-cache] Date:[Wed, 17 Apr 2013 15:01:33 GMT] Connection:[close] Server:[MoneyWorks_Datacentre/6.1.3 Win-x86 REST/6.1.3] Cache-Control:[no-store, no-cache, must-revalidate] Expires:[Wed, 17 Apr 2013 15:01:33 GMT]] 0xf8400e3920 -1 [] true map[] 0xf8400aa000}`

golang 的 HTTP 函数有什么独特之处与 cURL 处理如此简单的请求的方式不同吗？

**编辑**：我通过将 URL 传递给`exec.Command("curl", url).Output()`. 显然这不是我希望的本机解决方案，但它现在有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T14:23:57.237

这个问题与 unicode 有关。我的命令中有一个`%2F`（未显示在我的原始问题中），Go 转换为`/`应该保留为`%2F`（cURL 正确地将其保留为`%2F`）。更改`%2F`以`%252F`解决问题。

似乎在创建新的 HTTP 请求时，Go 会将您的 unicode 解析回纯文本，因此如果您`%3D`在提交给 HTTP 请求初始化程序的 URL 中有它会将其转换为`=`. 我认为一个明显的解决方案是放入`%253D`URL，但显然 Go 中有一个错误会转换`%3D`为`=`但不会转换`%25`为`%`. 我不得不使用不透明的 URL 请求 ( `request.Url.Opaque`) 来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T06:27:33.317

你说 curl 命令可以正常工作，但如果你有最新的 curl（我的是 7.22.0）。请求将是这样的：

`curl url --verbose`

> 获取/HTTP/1.1
> 
> 用户代理：curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> 
> 主机：myhost.com
> 
> 接受：*/*

但是您正在设置`req.Proto = "HTTP/1.0"`. 似乎不对。

# jquery - Jquery 使用图标切换显示/隐藏多个 div（按 ID）

> ID：16063725
> 
> 赞同：0
> 
> 时间：2013-04-17T15:09:24.907
> 
> 标签：jquery

[我正在尝试让一些 jQuery 工作，并且我知道（好吧，想想）根据我在这个问题](https://stackoverflow.com/questions/14186565/jquery-hide-and-show-toggle-div-with-plus-and-minus-icon)中找到的信息，我已经接近解决方案。

基本上我想要的是在页面上有多个加号/减号图标，当单击时切换图标并根据 ID 值显示特定的 DIV。

查看下面的示例，DIV 中的内容将被隐藏，直到单击图标。单击后，加号图标将变为减号图标。如果单击减号图标，内容将再次隐藏。应该允许同时显示多个 DIV，因此几乎每个切换都应该是独立的。

[...如果有一个“显示/隐藏所有”链接，那就太棒了！]

```
<div><a href="#" id="content1">[Plus Icon]</a> Content Title</div>
<div id="content1">This is some content. Really exciting content!</div>

<div><a href="#" id="content2">[Plus Icon]</a> Different Content</div>
<div id="content2">Here is more content. This content is less exciting.</div> 
```

注意：在我上面的示例中，显示的 div 位于链接的正下方，但并非总是如此。有时切换链接位于不同的位置。

如您所见，我希望能够在切换链接中指定一个 ID，该 ID 对应于要显示为隐藏的 DIV。

而且，如果显示/隐藏可以通过滑动效果进行动画处理，那就太好了。

我发现的另一个问题中的两个脚本几乎可以满足我的需求，除了它们仅与一个 DIV 相关并且没有我正在描述的 ID 类型系统。

脚本归功于：Vytautas Butkus

[小提琴](http://jsfiddle.net/z7F75/1/)

```
$(document).ready(function(){

  $(".slidingDiv").hide();

    $('.show_hide').click(function(){
        $(".slidingDiv").slideToggle();
      var isShow = $(this).text() == 'Show';
      $(this).text(isShow ? 'Hide' : 'Show').css({backgroundPosition:'0 '+ (isShow?-18:0) +'px'});
    });

});

.show_hide{
  background:url(http://img37.imageshack.us/img37/1127/plusminus.png) no-repeat;
  padding-left:20px;  
}

<a href="#" class="show_hide">Show</a>

<div class="slidingDiv" style="display: block;">
Check out
</div> 
```

脚本来源：roXon

[小提琴](http://jsfiddle.net/BLkpG/7/)

注意：他的脚本也会切换文本，我并不真正想要。

```
$(document).ready(function(){

  $(".slidingDiv").hide();

    $('.show_hide').click(function(){
        $(".slidingDiv").slideToggle();
      var isShow = $(this).text() == 'Show';
      $(this).text(isShow ? 'Hide' : 'Show').css({backgroundPosition:'0 '+ (isShow?-18:0) +'px'});
    });

});

.show_hide{
  background:url(http://img37.imageshack.us/img37/1127/plusminus.png) no-repeat;
  padding-left:20px;  
}

<a href="#" class="show_hide">Show</a>

<div class="slidingDiv" style="display: block;">
Check out
</div> 
```

非常感谢您的帮助！一如既往，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:20:27.477

如果我理解正确，您正在寻找的是一种指定特定 div 以显示/隐藏给定按钮的方法。根据您构建要显示和隐藏的 div 的方式，此操作的实现可能会有所不同，但这是一种可能的解决方案。

在显示/隐藏按钮上，添加一个属性。不管它是什么，我可以叫它`targetElement`什么的。所以你最终会得到`<a targetElement="content1" href="#" id="content1">[Plus Icon]</a>`.

然后在将 click 事件处理程序附加到此元素时，传入事件。所以像这样 - `('.show_hide').click(function(event){`。然后，在处理函数内部，你可以像这样 - 获取目标 div 的名称`var target_id = $(event.target).attr("targetElement")`，然后直接显示/隐藏它，像这样 -`#(("#" + target_id)).show();`

同样，根据您的确切设置和实现，您具体如何处理可能会有所不同——这是一个非常具体的问题——但希望这个解决方案能够奏效，或者至少通过提供一个将数据传递到事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:24:42.373

我想在评论中这样说，但我还没有得到它的代表。

我看到你有 2 倍相同的 id。这将在 javascript 中产生冲突：

```
<a href="#" id="content1">
<div id="content1">

<a href="#" id="content2">
<div id="content2"> 
```

# java - 未找到 Jibx Codegen 类

> ID：16063726
> 
> 赞同：0
> 
> 时间：2013-04-17T15:09:28.393
> 
> 标签：java, code-generation, jibx

我正在尝试在命令行中运行 Jibx CodeGen 以从 xml 模式 (xsd) 文件生成 Java 源文件。但是，似乎我什至无法运行 CodeGen。我知道我应该至少提供输入 xsd 作为参数，但是 CodeGen 之前崩溃了，所以这里没关系。

```
java -cp "~/.m2/repository/org/jibx/jibx-tools/1.2.3/jibx-tools-1.2.3.jar" org.jibx.schema.codegen.CodeGen 

Exception in thread "main" java.lang.NoClassDefFoundError: org.jibx.schema.codegen.CodeGen
Caused by: java.lang.ClassNotFoundException: org.jibx.schema.codegen.CodeGen
at java.net.URLClassLoader.findClass(URLClassLoader.java:434)
at java.lang.ClassLoader.loadClass(ClassLoader.java:660)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
at java.lang.ClassLoader.loadClass(ClassLoader.java:626)
Could not find the main class: org.jibx.schema.codegen.CodeGen.  Program will exit. 
```

我打开了jar，似乎类包是正确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:20:25.387

There are two ways to run JiBX codegen:
1\. Run it as a maven plugin.
2\. Run it standalone.

I highly recommend running JiBX as a maven plugin. You will find lots of documentation and examples at: [http://jibx.sourceforge.net/maven-jibx-plugin/index.html](http://jibx.sourceforge.net/maven-jibx-plugin/index.html)

If you want to run JiBX as a stand-alone program, you will need to have all the executable jars in the same directory. You can simplify your setup by downloading the entire package from our sourceforge page at: [http://sourceforge.net/projects/jibx/](http://sourceforge.net/projects/jibx/)

# java - Window/linux路径组件分离

> ID：16063729
> 
> 赞同：0
> 
> 时间：2013-04-17T15:09:31.877
> 
> 标签：java, linux, windows, string, path

我正在我的 linux 环境中编写一个路径分隔符，它旨在解析一个文件路径，它可以是我以前从未知道的 linux 和 windows 样式。目前我正在使用 File.separator 进行拆分，但这仅适用于我所在的平台...

我想知道是否有办法使用诸如 Path 对象之类的东西来处理这个问题。

```
[...]
Node pathElement = nodeList.item(nodePos);
String path = pathElement.getTextContent();
String[] pathElements = path.split(File.separator);
String contentFileName = pathElements[pathElements.length - 1];
String parentFolderPath = xmlFiles[u].getParentFile().getAbsolutePath();
pathElement.setTextContent(parentFolderPath + File.separator + contentFileName);
[...] 
```

编辑：我需要能够从 linux 中断 windows 样式路径，反之亦然。我也尝试过使用`Paths.getPath(...)`不成功

查看上述代码的示例输出：

/输入/ZIP_0bd78143-f6cd-473f-84f7-d0da09dc42aa/7634/c:\SharedFiles\7634\1

它使用 windows 路径作为文件名，因为它无法破坏它。如果可能的话，我试图避免花哨的逻辑来检测路径的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:14:49.053

因此，根据您的编辑，您可能需要在给定的 URI 处检测 FileSystem，可能需要查看以下内容：

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html)

# iphone - 如何强制旋转 UIViewController

> ID：16063732
> 
> 赞同：0
> 
> 时间：2013-04-17T15:09:36.587
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uikit

我有一个`UINavigationController`包含一些`UIViewController`......所有这些`UIVienController`都应该只在**肖像**模式下。

但只有其中之一`UIViewController`，我应该`presentModalViewController`。这`modalViewController`应该允许在所有方向上旋转。没问题，直到我想解雇这个`modalViewController`。

如果我关闭它时它`modalViewController`处于**横向模式。**`parentViewController`不要回到肖像。

我怎样才能强制我的旋转`parentViewController`？我尝试了一些解决方案，但我无法使其工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:32:26.757

由于您在解雇时向您展示您`modalviewcontroller`的信息，否则不会调用方法。`presentModalViewController``modalviewcontroller``viewWillApper``viewDIdAppear`

您必须在您的`UIViewController`via`nsnotifcation`或中调用方法`delegate pattern`。

因此，当您关闭`modalviewcontroller`通知`UIViewController`并调用`yourmethod`时，`yourmethod`检测当前方向，如果不是纵向，则将其更改为纵向。

```
-(void) yourmethod 
{
    if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft || [[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight )
    {
       [[UIApplication sharedApplication] setStatusBarHidden:NO];
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
    } 

} 
```

# oracle - GRANT ROLE 在触发器内？

> ID：16063744
> 
> 赞同：0
> 
> 时间：2013-04-17T15:10:22.030
> 
> 标签：oracle, triggers, grant

Oracle 中有没有办法在`GRANT someRole TO someUser;`触发器中执行命令？
我试过了，但它似乎不起作用。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:30:38.493

大多数 DDL 语句在触发器中是不允许的，因为它们强制执行 COMMIT。此规则的少数例外仅适用于系统事件触发器（启动、关闭等），但似乎此触发器不是系统触发器。参考[这里](http://docs.oracle.com/cd/B28359_01/appdev.111/b28843/tdddg_triggers.htm)。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:11:21.377

不建议在触发器中使用 DDL 命令，因为提交事务并且如果出现问题，您没有办法回滚事务。如果它非常重要并且您必须这样做，那么只有您应该在触发器中执行 DDL 命令。也许您可以使用自治事务来实现它。

这是一个例子=

```
CREATE OR REPLACE TRIGGER my_trigger
  AFTER INSERT ON my_table
   DECLARE
    PRAGMA AUTONOMOUS_TRANSACTION;
   BEGIN
     EXECUTE IMMEDIATE 'GRANT someRole TO someUser';
     COMMIT;
   END; 
```

请让我知道这是否适合您。

谢谢，阿迪亚

# sharepoint - Sharepoint 2010 自定义操作未出现

> ID：16063749
> 
> 赞同：0
> 
> 时间：2013-04-17T15:10:33.983
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个自定义操作并将其添加到一个功能中，但是当我激活该功能时它没有出现在它应该出现的位置，不确定出了什么问题。下面的代码：

```
<?xml version="1.0" encoding="utf-8"?>
 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
   <CustomAction
    Id="0b5d3f99-ea17-4a93-ba04-9744a8c099af"
    RegistrationType="List"
    Title="Developer User Action"
    RegistrationId="0x0100f5be96b7d764406681760305e87f90ac"
    Sequence="4"
    Location="CommandUI.Ribbon.Display">
   <CommandUIExtension>
   <CommandUIDefinitions>
    <CommandUIDefinition Location="Ribbon.ListForm.Display.Actions.Controls._children">
      <Button 
        Id="Ribbon.ListForm.Display.Actions.DeveloperButton"
        Command="OpenWebPart"
        Image32by32="/_layouts/images/Actinium/Icons-Large/note_edit.png"
        Image16by16="/_layouts/images/Actinium/Icons-Small/note_edit.png"
        Sequence="4"
        LabelText="User/Developer Request"
        Description="Back and forth between developer/user to give results of request."
        TemplateAlias="o1" />
    </CommandUIDefinition>
  </CommandUIDefinitions>
  <CommandUIHandlers>
    <CommandUIHandler Command="OpenWebPart" CommandAction="javascript:window.open('http://www.google.ca')"></CommandUIHandler>
  </CommandUIHandlers>
</CommandUIExtension>
</CustomAction>
</Elements> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:47:58.730

我设法让它工作，我对代码做了一些更改，见下文：

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
 <CustomAction
Id="0b5d3f99-ea17-4a93-ba04-9744a8c099af"
RegistrationType="List"
Title="Developer User Action"
 RegistrationId="10015"
 Sequence="4"
 Location="CommandUI.Ribbon.DisplayForm">
<CommandUIExtension>
  <CommandUIDefinitions>
    <CommandUIDefinition Location="Ribbon.ListForm.Display.Actions.Controls._children">
      <Button 
        Id="Ribbon.ListForm.Display.Actions.DeveloperButton"
        Command="OpenWebPart"
        Image32by32="/_layouts/images/Masco/Icons-Large/note_edit.png"
        Image16by16="/_layouts/images/Masco/Icons-Small/note_edit.png"
        Sequence="4"
        LabelText="User/Developer Request"
        Description="Back and forth between developer/user to give results of request."
        TemplateAlias="o1" />
    </CommandUIDefinition>
  </CommandUIDefinitions>
  <CommandUIHandlers>
    <CommandUIHandler Command="OpenWebPart" CommandAction="javascript:window.open('http://www.google.ca')"></CommandUIHandler>
  </CommandUIHandlers>
</CommandUIExtension>
</CustomAction>
</Elements> 
```

# javascript - 输入斜杠的奥秘（消失了！）jquery

> ID：16063750
> 
> 赞同：1
> 
> 时间：2013-04-17T15:10:34.627
> 
> 标签：javascript, jquery, ajax

我有一个非常特殊的问题，我无法解决它。我的输入元素上的斜杠消失了，尽管我确定（仔细检查）php 确实包含它们。当 jquery 将此数据附加到 html 树时，会发生一些事情。

问题可以在这里看到：http: [//gamoicani.es/logo/](http://gamoicani.es/logo/)如果你点击 logo 并看到输入 html，你会看到结尾没有斜杠。

但是在php中我有这个：

```
<input type="text" name="guesslogo" data-lang="<?php echo $row['logo_lang']; ?>" /> 
```

我什至尝试过`<input></input>`，但结果是一样的。

我还在这些输入上禁用了旋钮和 kbd jquery 插件，但有些不对劲，它根本不起作用。

我检查了我的ajax调用：

```
function create_views(level) {
        $.ajax({
            url: "actions.php",
            type: "GET",
            data: "show_level=" + level,
            cache: false,
            success: function (data){
                views[level] = '<li data-level="' + level + '">' + data + '</li>';

                //Count completed tasks
                completed_calls++;

                //if last level is loaded-called append and activate slider
                if (levels == completed_calls) {
                    //append views to container
                    console.dir($(".slides_container").append(views.join(' ')));
                    //activate slider
                    unislider = $(".slides_container").dpUniSlider({
                        //loop: false,
                        draggable: false
                    });
                    //Activate Georgian keyboard for some logos
                    $("input[data-lang=ge]").GeoKBD();

                    //Activate progress bar
                    update_level_progress_bar();
                }
            }
        });
} 
```

是否在视图上使用了 console.dir 和 / 是否存在！所以它一定是在追加过程中出了点问题......我没有想法去检查......

为什么我关心斜杠？

[on.keypress 仅适用于 html 中的第一次输入](https://stackoverflow.com/questions/16062255/on-keypress-only-works-for-first-input-in-html)

```
//check answer on ENTER keyboard press
$("body").on("keypress", "input:text[name=guesslogo]", function(e){
    if (e.keyCode == 13) {  
        $(this).siblings(".check").trigger("click");
    }
}); 
```

这不能正常工作！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:31:57.110

如前所述，它与斜线无关。

更改代码以使用文档而不是带有 keydown 的正文

```
$(document).on("keydown","input[name='guesslogo']",function(e){
    if (e.keyCode == 13) {  
        $(this).siblings(".check").trigger("click");
    }
}); 
```

您的代码将适用于此更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:14:01.987

您不需要在输入标签上使用右斜杠。它们不包含其中的项目，并表示为单个标签。

这：

> 我什至尝试过`<input></input>`，但结果是一样的。

实际上是完全不正确的。[输入](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)永远没有结束标签

另一方面，jQuery 不会完全附加您发布的内容，它会对其进行解析，然后将其添加为语义正确的 HTML。

例如`$().append`，将为 、 和 附加相同`"<div>"`的`"<div/>"`内容`"<div></div>"`

即使您在源代码中明确键入，Chrome 开发工具等工具也会显示不带 / 的输入。

尝试在此处检查输入：http: [//jsfiddle.net/f7USH/](http://jsfiddle.net/f7USH/)，您会看到该元素被添加为带有斜杠的输入，但在 devtools 中没有出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:35:26.883

[现代 HTML 中的自闭合标记语法对于沉迷于 XML 的人](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5/3558200#3558200)来说只是语法糖。

当您使用 DOM 查看器查看文档时，您会看到 DOM 到 HTML 的序列化（不是原始源代码）。

由于斜线完全是可选的，因此您的查看器不会呈现它。

> 为什么我关心斜杠？

该代码不起作用与斜杠无关。

# android - 静音 AudioTrack/MediaPlayer 上的 Android Visualizer

> ID：16063754
> 
> 赞同：1
> 
> 时间：2013-04-17T15:10:43.730
> 
> 标签：android, pcm, mute, visualizer

我有一个 PCM 流，我想用 Android 的“Visualizer”进行可视化，但不会大声播放。

因此我实现了[android-visualizer](https://github.com/felixpalmer/android-visualizer)。

可视化成功，如果我使用

```
audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100,
            AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT,
            fileContent.length, AudioTrack.MODE_STREAM);
audioTrack.play();
mVisualizerView.link(audioTrack);
..
audioTrack.write(fileContent, 0, bytes); 
```

但现在我的问题是，我不想真正“播放”我的 PCM，我只想将其可视化。我的用户可能正在用他们的媒体播放器听音乐，我不想打扰他们。

所以我想‘好吧，我可以让我的 AudioTrack 静音’：

```
audioTrack.setStereoVolume(0.0f, 0.0f); 
```

但遗憾的是也没有更多的可视化。[我认为由于SCALING_MODE_NORMALIZED](http://developer.android.com/reference/android/media/audiofx/Visualizer.html#SCALING_MODE_NORMALIZED)，Visializer 应该忽略 AudioTrack 的响度：

> 定义一种捕获模式，其中根据捕获数据的内容应用放大。这是默认的 Visualizer 模式，适用于音乐可视化。

我尝试的下一个不是将 PCM 写入音轨，而是直接将其提供给抽屉：

```
mVisualizerView.updateVisualizer(fileContent); 
```

这会产生一条曲线，但它看起来真的很疯狂，与我的预期无关（可能是因为我提供的是立体声而不是单声道？）。

我在创建 PCM 流的“波形”或“fft”数据方面也没有成功——我只是对我来说是新手。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:03:24.793

尝试 AudioManager.setStreamMute(streamType, state)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T17:30:55.840

> 所以我想‘好吧，我可以让我的 AudioTrack 静音’。但遗憾的是也没有更多的可视化。

这就是它的工作方式。在`AudioFlinger`应用效果（即`Visualizer`效果）之前执行混合（应用音量）。

`Visualizer`但正如您已经意识到的那样，您实际上并不需要API 来做您想做的事情。您可以创建画布或 OpenGL ES 纹理，每帧 (60 fps) 根据您的 PCM 数据绘制一些数据，并将其显示在您的应用程序的一个视图中。

如果您只想绘制波形，这将是微不足道的。假设您有一个要绘制到的 100 像素宽的位图：在帧中`N`，您将从 N*735 开始获取 735 (44100/60) 个样本并从中生成 100 个点（例如，通过线性插值在这 735 个样本上，并根据位图的垂直分辨率对其进行缩放）。如果您的 PCM 数据是立体声的，您可以在插值点获取每对样本并对其进行平均。

如果您想绘制[频谱图](http://us.123rf.com/400wm/400/400/alinoubigh/alinoubigh0903/alinoubigh090300134/4503401-3d-illustration-of-spectrogram-and-audio-equalizer.jpg)，事情会变得有点复杂，因为您首先必须将音频数据从时域转换[到频域](http://en.wikipedia.org/wiki/Fast_Fourier_transform)。

# php - 选择多行 PHP/MySQL

> ID：16063759
> 
> 赞同：0
> 
> 时间：2013-04-17T15:11:02.477
> 
> 标签：php, mysql

```
$sqlCommand2 = "SELECT blogid FROM blogtags WHERE tag='$pageid'";
$query2 = mysqli_query($myConnection, $sqlCommand2) or die (mysqli_error());
while ($row = mysqli_fetch_array($query2)) {
    $selectedtag = $row['blogid'];
} 
```

这个 sql 选择应该给 $selectedtag 1,2,3 的值，但它只给出 3 的值。最后一行等于 pageid。谁能弄清楚为什么它没有拉所有行而只拉最后一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:12:45.180

这是因为您将值分配给循环内的变量。所以最后一个值会覆盖所有其他值。请改用数组。

更改`$selectedtag = $row['blogid'];`为`$selectedtag[] = $row['blogid'];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:12:51.773

尝试：

```
$selectedtag = array();
while ($row = mysqli_fetch_array($query2)) {
    $selectedtag[] = $row['blogid'];
}

print_r($selectedtag); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:13:36.573

您不断`$selectedtag`用最新的行迭代的 blogid 值覆盖。

您应该使用这些值创建一个数组，或者对循环中的值执行某些操作。

这完全取决于您打算如何处理数据。

如果你想用收集的 ID 搜索博客，你最好创建一个更大的查询，而不是搜索博客 ID 循环那些并搜索博客。

你可以这样做：

```
SELECT id, title, content, author, date
FROM blogs
WHERE id IN 
  (SELECT blogid FROM blogtags WHERE tag ='$pageid') 
```

上面是一个非常粗略的示例，对您的列/表命名知之甚少，但是通过上面的查询，您应该得到带有特定标签的博客的结果。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:13:28.977

改成：

```
 $sqlCommand2 = "SELECT blogid FROM blogtags WHERE tag='$pageid'";
        $query2 = mysqli_query($myConnection, $sqlCommand2) or die (mysqli_error());
                    while ($row = mysqli_fetch_array($query2)) {
                    $selectedtag[] = $row['blogid'];
                    } 
```

$selectedtag[] <--将值放入数组；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T15:15:18.530

查询中的 WHERE 子句是阻止它的原因。

如果`$pageid`变量的值为 3，则查询计算结果为：

```
SELECT COLUMN blogid FROM TABLE blogtags ONLY WHERE THE COLUMN tag HAS THE VALUE OF 3 
```

所以基本上，查询完全按照它所说的去做。

如果您想选择前两行，那么您必须在 WHERE 子句中发挥创意：

```
SELECT blogid FROM blogtags WHERE tag <= $pageid AND tag > $pageid - 3 
```

这将选择标签小于等于 3 且大于 3 - 3 = 0 的所有内容；

因此，标签可以是 3、2 或 1。

**编辑**

我可能误解了这个问题，但我会在这里留下我的答案，以防它帮助其他偶然发现它的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T15:15:45.080

退出 mysqli 并使用[PDO](https://stackoverflow.com/tags/pdo/info)。它拥有您需要的一切：

```
$stm = $pdo->prepare("SELECT blogid FROM blogtags WHERE tag=?");
$stm->execute(array($pageid));
$rows = $stm->fetchAll(PDO::FETCH_COLUMN, 0); 
```

# android - android - 在旧设备上支持 Google Maps Android API v2（姜饼）

> ID：16063761
> 
> 赞同：1
> 
> 时间：2013-04-17T15:11:21.947
> 
> 标签：android, google-maps-android-api-2

更新：

在我的 Android SDK 管理器中，我安装了 Android 支持库。在我的 Downloads/android-sdk-macosx/extras/android/support 目录中，我有 v4、v7 和 v13。我将 android-support-v4.jar 复制到 libs 文件夹。右键单击并选择构建路径 > 配置构建路径。在活动布局中，我添加了以下内容（使用 supportmapfragment 而不是 mapfragment）：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android" 
  android:id="@+id/map" 
  android:layout_width="match_parent" 
  android:layout_height="match_parent" 
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

但我仍然收到此错误：

```
04-16 17:42:00.928: E/AndroidRuntime(363): FATAL EXCEPTION: main 
04-16 17:42:00.928: E/AndroidRuntime(363): 
java.lang.RuntimeException: 
Unable to start activity ComponentInfo{com.otl.AndroidRemoteApp1/ 
com.otl.AndroidRemoteApp.ShowMapActivity}: 
android.view.InflateException: Binary XML file line #6: Error 
inflating class fragment 
```

这是完整的跟踪：

```
04-18 10:33:32.075: E/AndroidRuntime(368): FATAL EXCEPTION: main
04-18 10:33:32.075: E/AndroidRuntime(368): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.otl.AndroidRemoteApp1/com.otl.AndroidRemoteApp.ShowMapActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.os.Looper.loop(Looper.java:130)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-18 10:33:32.075: E/AndroidRuntime(368):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 10:33:32.075: E/AndroidRuntime(368):  at java.lang.reflect.Method.invoke(Method.java:507)
04-18 10:33:32.075: E/AndroidRuntime(368):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-18 10:33:32.075: E/AndroidRuntime(368):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-18 10:33:32.075: E/AndroidRuntime(368):  at dalvik.system.NativeStart.main(Native Method)
04-18 10:33:32.075: E/AndroidRuntime(368): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-18 10:33:32.075: E/AndroidRuntime(368):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.Activity.setContentView(Activity.java:1657)
04-18 10:33:32.075: E/AndroidRuntime(368):  at com.otl.AndroidRemoteApp.ShowMapActivity.onCreate(ShowMapActivity.java:45)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-18 10:33:32.075: E/AndroidRuntime(368):  ... 11 more
04-18 10:33:32.075: E/AndroidRuntime(368): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.otl.AndroidRemoteApp1-2.apk]
04-18 10:33:32.075: E/AndroidRuntime(368):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-18 10:33:32.075: E/AndroidRuntime(368):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-18 10:33:32.075: E/AndroidRuntime(368):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-18 10:33:32.075: E/AndroidRuntime(368):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
04-18 10:33:32.075: E/AndroidRuntime(368):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-18 10:33:32.075: E/AndroidRuntime(368):  ... 20 more 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:17:32.443

[API Level 12 之后才支持 MapFragment](http://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html)。建议改用[SupportMapFragment](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)。

要使用它，您需要将 Android 支持库包含在您的路径中。按照这些[说明](http://developer.android.com/tools/extras/support-library.html)将支持库添加到您的项目中。

更新：

此外，[Fragment](http://developer.android.com/guide/components/fragments.html)类在 API 级别 11 之前不可用。我相信您的目标是 API 级别 10 的 Gingerbread。这就是您收到以下错误的原因：

`Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader`

看到这个[问题](https://stackoverflow.com/questions/14265959/how-to-use-google-maps-api-v2-with-api-level-10)，它看起来是一个类似的问题。

# c++ - Visual Studio 2010 C++ IDE 显示 #ifdef 块灰显

> ID：16063762
> 
> 赞同：0
> 
> 时间：2013-04-17T15:11:24.227
> 
> 标签：c++, visual-studio-2010, ide

我们使用 Visual Studio 2010 (C++)，为了方便进行双命令行和 IDE 构建，我们使用批处理文件来调用命令行构建或 IDE。在批处理文件中，我们执行“set CL=/D AAA /D BBB ...”。命令行和 IDE 构建都遵循 CL 行中定义的预处理器标志。但是，当通过批处理文件调用 IDE 时，它会显示“#ifdef AAA”块变灰并且启用了错误的块，这不是我们真正想要的。我们有大量的解决方案和每个解决方案的许多项目，并且在每个项目的基础上设置预处理器指令是不切实际的。所以我们在批处理文件中指定这些，这对于构建工作正常，但在 IDE 中会造成一些混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:15:23.590

使用属性管理器创建包含自定义预处理器指令的属性表。然后将此属性表附加到解决方案中的所有项目。

以下博客文章似乎对 Property Manager 有很好的概述，包括屏幕截图。关注以*如何使用属性表*为标题的部分。

[Visual Studio 2010：属性表和 C++ 目录](http://blog.gockelhut.com/2009/11/visual-studio-2010-property-sheets-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:18:10.093

您可以使用[属性表](http://blogs.msdn.com/b/vsproject/archive/2009/06/23/inherited-properties-and-property-sheets.aspx)来设置将通过所有项目传播的选项。

# c# - 如何管理 ACS 服务标识

> ID：16063764
> 
> 赞同：2
> 
> 时间：2013-04-17T15:11:28.760
> 
> 标签：c#, azure, azure-web-roles, acs, acs-serviceidentity

我在 azure WebRole 中托管 WCF 4.5 服务，并使用 Azure ACS 服务标识来管理我的 wcf 用户（*主动身份验证*）。我接受了这个模型，因为我们的用户数量有限

现在我想知道如何通过 C# 代码以**编程方式管理（创建/读取/更新/删除）ACS 服务标识。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:27:07.413

查看具有管理功能的[ACS 管理服务 API](http://msdn.microsoft.com/en-us/library/windowsazure/hh278947.aspx)[`ServiceIdentity`](http://msdn.microsoft.com/en-us/library/windowsazure/hh180757.aspx)。

管理端点位于此处：
**[https ://NAMESPACE.accesscontrol.windows.net/v2/mgmt/service](https://NAMESPACE.accesscontrol.windows.net/v2/mgmt/service)**

您可以利用此 ACS 管理服务来创建新的`ServiceIdentities`

```
string name = "SampleServiceIdentity";
string password = "SampleServiceIdentityPassword";
ServiceIdentity sid = new ServiceIdentity()
{
    Name = name
};

DateTime startDate, endDate;
startDate = DateTime.UtcNow;
endDate = DateTime.MaxValue;

ServiceIdentityKey key = new ServiceIdentityKey()
{
    EndDate = endDate.ToUniversalTime(),
    StartDate = startDate.ToUniversalTime(),
    Type = "Password",
    Usage = "Password",
    Value = Encoding.UTF8.GetBytes(password),
    DisplayName = String.Format(CultureInfo.InvariantCulture, "{0} key for {1}", "Password", name)
};

svc.AddToServiceIdentities(sid);
svc.AddRelatedObject(
    sid,
    "ServiceIdentityKeys",
    key);

svc.SaveChanges(SaveChangesOptions.Batch); 
```

此示例来自[MSDN - How to: Use ACS Management Service to Configure Service Identies](http://msdn.microsoft.com/en-us/library/windowsazure/hh135148.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:50:52.960

[这里](http://www.corradin.net/index.php/2013/01/invoking-the-acs-management-service-programmatically/)有一个简单的演示方法，称为以编程方式**调用 ACS 管理服务**

# ruby - 在 ruby 参数中处理多种类型的“正确”习语

> ID：16063768
> 
> 赞同：0
> 
> 时间：2013-04-17T15:11:38.500
> 
> 标签：ruby

所以我对 Ruby 还是很陌生，还在学习习语。我仍然有很强的静态打字思维，所以也许一个问题是我打字过多。反正我的情况是这样的。

我有一个名为 Gene 的对象，带有 :name 和 :id。我有另一个称为基因型的对象，它维护着一个基因数组。

我想检查给定的基因型是否包含给定的基因。我希望能够通过 Genotype.has_gene？基因名称、基因 ID 或实际基因。在前一种情况下，例程将匹配名称或 id，以通过者为准。如果传递了完整的基因，则例程将坚持两个值都匹配。

我的逻辑是检查传递的值是否是 Integer，在这种情况下我假设它是一个 id；否则检查它是否是一个字符串并假设它是一个名称；否则检查它是否是一个基因；否则投诉和保释。

代码如下所示：

```
def has_gene?( gene )
      if gene.is_a? Integer
        id = gene
        name = ""
      elsif gene.is_a? String
        id = nil
        name = gene
      elsif gene.is_a? Gene
        id = gene.id
        name = gene.name
      else
        raise "Can't intepret passed data as gene information"   
      end
      name_valid = false
      id_valid = false
      @gene_specs.each do |current_gene_spec|
        current_gene = current_gene_spec.gene 
        name_valid = name.empty? || name == current_gene.name
        id_valid = id.nil? || id == current_gene.id
        break if name_valid && id_valid
       end
       return name_valid && id_valid
    end 
```

这里感觉有些不对劲，但我无法确定。它似乎缺乏 Ruby 著名的简洁性:-)

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T20:32:37.683

Ruby 具有将值强制转换为基本对象的方法，例如[Kernel#Array](http://www.ruby-doc.org/core-2.0.0/Kernel.html#method-i-Array)。我们可以使用它来将一个值强制转换为一个合理的数组：

```
Array(nil) # => []
Array(10) # => [10]
Array("hello") # => ["hello"]
Array([1, 2, 3]) # => [1, 2, 3] 
```

这使我们能够编写非常 Ruby 式的方法，这些方法在输入类型方面非常灵活，而无需花费大量空间检查类型。考虑这个人为的例子：

```
def say_hello(people)
  people = [people] if people.is_a?(Person)

  people.each { |p| puts "Hello, #{p.name}" }
end

def say_hello(people)
  Array(people).each { |p| puts "Hello, #{p.name}" }
end 
```

对于您的情况，我建议添加一个类方法来进行强制，而不是添加一个`Gene`方法：`Kernel`

```
class Gene
  def self.coerce(geneish)
    case geneish
    when Gene
      geneish
    when Integer
      new(id: geneish)
    when String
      new(name: geneish)
    else
      raise ArgumentError, "Can't coerce #{geneish.inspect} into a Gene"
    end
  end
end

def has_gene?(gene)
  gene = Gene(gene)

  name_valid = false
  id_valid = false
  @gene_specs.each do |current_gene_spec|
    current_gene = current_gene_spec.gene 
    name_valid = gene.name.empty? || gene.name == current_gene.name
    id_valid = gene.id.nil? || gene.id == current_gene.id
    break if name_valid && id_valid
  end
  return name_valid && id_valid
end 
```

`has_gene?`尽管这里的其他几个答案对使用某些`Enumerable`方法来清理它有很好的建议，但我已经完整地保留了您方法的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:25:59.540

这是我将如何简化它。如果你愿意，你也可以使用鸭式打字，但我认为这会使代码更复杂。

```
def genes
  @gene_specs.collect &:gene
end

def has_gene?(x)
  case x
  when Integer
    genes.any? { |g| g.id == x }
  when String
    genes.any? { |g| g.name == x }
  when Gene
    genes.include?(x)   # assumes that Gene#== is defined well
  else
    raise ArgumentError, "Can't intepret passed data as gene information" 
  end
end 
```

默认情况下，Ruby 将按身份比较对象（即它们在内存中的位置），但是对于 Gene 类，您可能想要做一些不同的事情，如下所示：

```
class Gene
  def ==(other)
    return false unless other.class == Gene
    id == other.id
  end
end 
```

花一些时间研究[Ruby 的 Enumerable 模块](http://blog.davidegrayson.com/2012/03/ruby-enumerable-module.html)中的方法是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:17:37.983

尽管 ruby​​ 不强制方法参数的类型，但除非有充分的理由，否则允许一个参数具有多种类型仍然是一种不好的做法。如果您提供三种不同的方法会更清楚：

```
def has_gene?( gene)
  ...
end

def has_gene_with_id?( id)
  ...
end

def has_gene_with_name?( name)
  ...
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:19:58.680

Ruby 不仅是动态类型的，而且它遵循*鸭子类型*范式，其中指出：

> 当我看到一只像鸭子一样走路、像鸭子一样游泳、像鸭子一样叫的鸟时，我称那只鸟为鸭子。

这是什么意思？这意味着在 Ruby 中，您不应该真正关心（除非在特定情况下） Object 是否属于确切的`X`类。你应该关心它是否表现得像一个`X`对象。

你如何检查它？检查特定对象的行为是否如您所愿的最著名的方法是使用[`#respond_to?`](http://ruby-doc.org/core-2.0/Object.html#method-i-respond_to-3F). 此方法将检查是否可以在对象上调用方法。

`#to_x`从那里您可以检查对象是否以类的名称（甚至自定义类）的形式响应方法，`x`然后调用它以将任何类型转换为您需要的类。因此，例如，如果您希望在方法中只使用一个字符串，您可以这样做：

```
def a_method( string )
    unless (string.respond_to? :to_str) // trigger error
    string = string.to_str
    // use string
end 
```

这样，如果我要定义一种特殊类型`Duck`，例如：

```
class Duck

    def to_str
        // internally convert Duck to String
    end

    ...

end 
```

我可以将它传递给您的函数：

```
obj = Duck.new
a_method( obj ) 
```

它会像我和 的*设计师*所期望的那样工作`a_method`，甚至彼此都不认识。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T16:23:50.063

您可以编写一个接受块的方法，允许该类的用户指定要查找的内容：

```
Gene = Struct.new(:name, :id)
class Genotype
  def initialize
    @arr=[]
  end
  def add(gene)
    @arr << gene
  end
  def any?(&block)
    @arr.any?(&block)
  end
end

gt = Genotype.new
gt.add Gene.new('a',0)
gt.add Gene.new('b',1)
p gt.any?{|g| g.name == "john"} #false
p gt.any?{|g| g.values == ["b",1]} #true 
```

# css - 为什么最大宽度不覆盖最小宽度？

> ID：16063771
> 
> 赞同：45
> 
> 时间：2013-04-17T15:11:50.213
> 
> 标签：css

我正在尝试创建一个响应式布局，如果屏幕尺寸允许，两个框并排放置，如果不允许，则将它们放在彼此下方。如果这些框彼此下方，我希望它们以它们的父级为中心。我设置了一个 jsfiddle 来演示这个问题：

[http://jsfiddle.net/leongersen/KsU23/](http://jsfiddle.net/leongersen/KsU23/)

```
width: 50%;
min-width: 350px;
max-width: 100%; 
```

尝试将“结果”窗格的大小调整为 350 像素以下。元素将与其父元素重叠。

我的问题：

为什么不尊重指定的最大宽度，即使它在最小宽度之后？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-17T15:15:41.443

由于[CSS 标准](http://www.w3.org/TR/CSS21/visudet.html#min-max-widths)：

> 以下算法描述了这两个属性如何影响“宽度”属性的使用值：
> 
> 1.  按照上面“计算宽度和边距”下的规则计算暂定使用的宽度（没有“最小宽度”和“最大宽度”）。
> 2.  如果暂定使用的宽度大于“最大宽度”，则再次应用上述规则，但这次使用“最大宽度”的计算值作为“宽度”的计算值。
> 3.  如果结果宽度小于“min-width”，则再次应用上述规则，但这次使用“min-width”的值作为“width”的计算值。

因此，最小宽度总是“获胜”。在特定的 CSS 规则中，无论如何都没有优先级，所有值都是原子应用的。只有当不同的规则都适用于同一个元素时，才会出现优先级，即使这样，在考虑文件顺序之前，它还是首先基于特异性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-30T09:45:10.113

我知道，我迟到了......但一个确切的解决方案可能是这样的：

```
p {
    display: inline-block;
    font-size: 15px;
    text-align: left;
    width: 50%;
    border: 1px solid blue;
    min-width: 350px;
}
@media (max-width: 700px) {
  p {
    width:100%;
    display:block;
  }
} 
```

# android - 布局配置 Android - API 级别

> ID：16063781
> 
> 赞同：1
> 
> 时间：2013-04-17T15:12:11.730
> 
> 标签：android, android-layout, resources, screen, dpi

我正在努力为某些类型的屏幕定义资源。我关注的主要屏幕是：

Galaxy Ace (320x480 mdpi) Galaxy S2 (480x800 hdpi)

我的问题是：

您能否将 3.2+ 的布局定义为：layout-sw320dp-mdpi 和 drawable-sw320dp-mdpi？

如果是这样，对于低于 Android 3.2 的任何设备，您如何定义 Galaxy Ace 和 S2？由于两个屏幕都被归类为“正常”，因此 Ace 的 layout-normal-mdpi 和 S2 的 layout-normal-hpdi 会是什么？

**编辑：**

在模拟器 (API 4.0) 上进行测试时，Galaxy Ace 320x480 决定使用 layout-sw320dp-hdpi 资源而不是 layout-sw320dp-mdpi?? 非常混乱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:05:54.287

**Galaxy S2** - 4.3'' , 480 * 800, 240 dpi

**Galaxy Ace** - 3.5'', 320 * 480, 164dpi

根据[此处](http://developer.android.com/guide/practices/screens_support.html)给出的官方 Android 指南对设备进行分类：

**Galaxy Ace**：正常 - mdpi

**Galaxy S2**：正常 - hdpi

因此，`layout-normal-mdpi`用于 Ace 和`layout-normal-hdpi`S2 就可以了！

# php - CakePHP - 自己的函数

> ID：16063785
> 
> 赞同：0
> 
> 时间：2013-04-17T15:12:16.630
> 
> 标签：php, facebook-graph-api, cakephp-2.0

长话短说：我正在将 Facebook API (PHP-SDK) 与 CakePHP 集成（我知道 GitHub 上已经存在集成，但我将此练习用作 CakePHP 和 MVC 的一般学习曲线）。我的问题如下：

我有一个控制器操作，它以非常简单的格式返回朋友列表：

```
$data = array(
  'friends' => $this->_facebook->api('/me/friends')
);
$this->set($data); 
```

`$data`然后被发送到相应的视图，此时我只是在调用`print_r($friends);`它，这就像一个魅力。但是，我想对朋友数组进行升序和降序排序，在 MVC 世界之前，我正在使用这个函数：

```
public function listFriends($sort = "") {
        $sort = strtolower($sort);
        $friend_array = $this->_facebook->api('/me/friends');
        $friends = array();
        switch ($sort) {
            case "asc":
                foreach($friend_array['data'] as $friend) {
                    $friends[$friend['id']] = $friend['name'];
                }
                natcasesort($friends);
                return $friends;
                break;

            case "desc":
                foreach($friend_array['data'] as $friend) {
                    $friends[$friend['id']] = $friend['name'];
                }
                arsort($friends);
                return $friends;
                break;

            default:
                foreach($friend_array['data'] as $friend) {
                    $friends[$friend['id']] = $friend['name'];
                }
                return $friends;
        }
    } 
```

我的问题是：如何在 CakePHP 中实现相同的功能，我在哪里可以放置“自定义”`listFriends()`函数？我的理解是，如果我将它放入控制器中，那么有人可能会通过调用**[http://example.com/controller/listFriends](http://example.com/controller/listFriends)**来访问它，我显然希望避免这种情况。我还假设**.ctp**文件不是放置此代码的最佳位置，那么在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:29:20.600

组件就是答案！

如果有人遇到同样的“问题”：

```
<?php
App::uses('Component', 'Controller');
class SortComponent extends Component {
    public function listFriends() {
        //blablablabla
    }
}
?> 
```

并在您的控制器中添加以下内容：

```
public $components = array('Sort'); 
```

您可以通过调用访问您的方法

```
$this->Sort->listFriends() 
```

干杯!

# ios - 使用分段控件切换集合视图

> ID：16063787
> 
> 赞同：0
> 
> 时间：2013-04-17T15:12:17.667
> 
> 标签：ios, uicollectionview, uisegmentedcontrol

在 iOS 上，使用导航栏中的分段控件切换集合视图的正确/最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:43:07.553

你说的切换是什么意思？其实你可以使用单个collection view，根据switch值改变collection的数据源

为您的分段控件添加操作以更改数据源

```
- (IBAction)changeCollectionViewData:(UISegmentedControl*)sender {

switch (sender.selectedSegmentIndex) {
    case 0:
        self.images =self.cars // displays images of cars;
        break;
    case 1:
        self.images =self.bike // displays images of bikes;
        break;
}
[self.collectionView reloadData]

}  
// self.images is the data source array 
```

请记住，您需要相应地设置**numberOfItemsInSection**

# file-io - Scheme 中的文件统计信息

> ID：16063788
> 
> 赞同：3
> 
> 时间：2013-04-17T15:12:18.027
> 
> 标签：file-io, scheme

我会坦率地说：这是家庭作业。以下代码定义了一个函数`countup`，称为：

```
(countup "file1") 
```

循环似乎无限期地运行。为什么，我该如何解决这个问题？

```
(define stats
  (lambda (srcf)
    (begin
      (define in (open-input-file srcf))
      (let loop (
         (l 0)
         (w 0)
         (c 0)
         (char (read-char in)))
       (case char
         ((#\newline)
           (loop (+ l 1) w(+ c 1) (read-char in)))
         ((#\space #\tab)
           (loop l (+ w 1) (+ c 1) (read-char in)))
         (else (loop l w (+ c 1) (read-char in))))
      )
  (close-input-port in)

  (display l)
  (display " ")
  (display w)
  (display " ")
  (display c)
  (newline)
  '()))
)

;; srcf = source text file
(define countup
  (lambda (srcf lstf)
    (stats srcf)
  )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:21:32.067

从文件中读取字符的程序必须在某处具有以下条件：

```
(cond ((eof-object? the-char)
       'finished)
      ...) 
```

查看此[答案](https://stackoverflow.com/a/10060603/201359)以查看与您正在编写的过程类似的过程，这可能会有所帮助。

# asp.net-mvc-4 - kendo datepicker 格式的验证

> ID：16063789
> 
> 赞同：0
> 
> 时间：2013-04-17T15:12:18.410
> 
> 标签：asp.net-mvc-4, kendo-ui

我正在使用小时间剑道，并在验证日期选择器时发现了问题。

```
@using (Ajax.BeginForm("FindByFilter", "Find", new { filter = Model.Filter }, new AjaxOptions { UpdateTargetId = "content", HttpMethod = "GET", InsertionMode = InsertionMode.Replace }))
{
  <div class="demo-section fr" style="width: 340px; margin-top: -2px;">
      <label for="start">Start:</label>
      @(Html.Kendo().DatePickerFor(model => model.Filter.Start)
          .Name("start")
          .Culture("pt-BR")
          .HtmlAttributes(new { style = "width: 140px" })
          .Min(DateTime.Today)
          .Events(e => e.Change("startChange"))
      )

      <label for="end" style="margin-left: 0.5em">End:</label>
      @(Html.Kendo().DatePickerFor(model => model.Filter.End)
          .Name("end")
          .Culture("pt-BR")
          .HtmlAttributes(new { style = "width: 140px" })
          .Min(Model.Filter.Start)
          .Events(e => e.Change("endChange"))
      )
  </div>
  <div>
      <input type="submit" class="button small secondary lupa fr" />
  </div>
} 
```

当我单击提交时，日期选择器不接受 20/04/2013 格式，仅格式为 2013-04-20。我将文化设置为 pt-BR，但仍在进行验证。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:15:50.860

我似乎记得有完全相同的问题。像你一样，我们通过使用 kendo.culture('en-GB') 改变了文化，但这并没有解决问题。最后我们必须添加我们自己的 jQuery 验证器方法：

```
jQuery.validator.addMethod(
    'date',
    function (value, element) {
        if (this.optional(element)) {
            return true;
        };
        var result = false;
        try {
            $.datepicker.parseDate('dd/mm/yy', value);
            result = true;
        } catch (err) {
            result = false;
        }
        return result;
    },
    ''
); 
```

# c++ - 设置滚动条时遇到问题

> ID：16063791
> 
> 赞同：1
> 
> 时间：2013-04-17T15:12:25.513
> 
> 标签：c++, api, winapi, user-interface

所以我有 2 个子类窗口，两个编辑控件都有自己独特的样式......我需要顶部窗口来保持滚动条，因为它是一个聊天程序，一旦有超过 37 行文本，就有此窗口中没有更多空间。因此，通过添加滚动条，我可以节省额外的空间。现在我要做的是将它设置为，默认情况下，在窗口的底部，意思是显示最后写的消息。目前它“卡在”上侧。我想做的是：

```
RECT    rc,rc2;
GetClientRect(window, &rc);
info.cbSize = sizeof(SCROLLINFO);
info.fMask = SIF_ALL|SIF_DISABLENOSCROLL;
info.nMax = lines;
info.nMin = 0;
info.nPage = 37; 
```

当焦点设置在该窗口（WM_SETFOCUS）上时，我会这样做：

```
case WM_SETFOCUS:
{
     SetScrollInfo(window, SB_VERT, &info, TRUE);
            if( lines > 37 ){
                SetScrollPos(window,SB_VERT,400,TRUE);
            }
            else if( lines < 37){
                SetScrollPos(window,SB_VERT,0,TRUE);
            }
            ShowScrollBar(window,SB_VERT,1);
        return 0;
            } 
```

因此，当我键入时，在下部窗口（另一个孩子）中，滚动条位于顶部。当我点击我正在谈论的窗口时，他的滚动条会下降，但文本不会重绘。当我单击滚动条开始滚动时，它会立即重绘文本。为了解决这个问题，当我在下层窗口中输入时，我会从下层的孩子向上层的孩子发送一条消息。向 WM_SETFOCUS 发送一条消息，该消息执行将滚动条置于底部的代码，但发生的情况是……下降了一毫秒，然后又回来了。我想知道为什么会这样。我的意思是什么消息或默认操作导致滚动条上升。另外，我如何在不需要单击滚动条的情况下重绘文本？我尝试了类似 ScrollWindowEx(window,0,400,&rc,NULL,NULL,&rc2,SW_SCROLCHILDREN); 但这失败了…… 它会在旧文本上重绘文本并在一毫秒后消失。我唯一的想法是添加另一个 ScrollWindowEx 并将其设置为擦除当前文本并重绘新文本，但我再次担心它会在一毫秒内消失，因为它已经做。我在这里先向您的帮助表示感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:44:38.443

您需要做的是告诉编辑控件滚动到底部，并让它更新滚动条。仅更改滚动条的外观不会使文本显示在视图中。

查看类似[`EM_SCROLL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761635%28v=vs.85%29.aspx)和的消息[`EM_SCROLLCARET`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761637%28v=vs.85%29.aspx)。或者也许只是向编辑控件发送[`WM_VSCROLL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787577%28v=vs.85%29.aspx)一条带有`SB_BOTTOM`. 然后，编辑控件将计算出如何更新滚动条。

# jquery - Jquery UI 滑块，中间为 0，背景为从那里

> ID：16063795
> 
> 赞同：3
> 
> 时间：2013-04-17T15:12:38.343
> 
> 标签：jquery, jquery-ui, slider

我想要一个范围从-5到5的滑块，中间为0。背景颜色将从0改变

到目前为止，我只能在这里使用 2 个滑块来做到这一点：http: [//jsfiddle.net/ur4SH/](http://jsfiddle.net/ur4SH/)

```
<div class="sliders">
   <div id="sliderLeft" class="slider left"></div>
   <div id="sliderRight" class="slider right"></div>
</div> 
```

但它不是很优雅，它有一些我不喜欢的东西：

1.  使用 2 个滑块而不是 1 个
2.  我有两个处理程序，我只想要一个
3.  拖动在滑块 3 之间不起作用。

您有什么想法可以改善这一点，或者是否存在任何仅使用一个滑块的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:18:03.533

你的意思是改变背景颜色，就像这个[jsFiddle](http://jsfiddle.net/ur4SH/1/)？

我向 CSS 添加了一个新类：

```
.color {
    background-color: green;   
} 
```

和一点 JS，第 15 行：

```
$('.ui-slider-range', this).addClass('color'); 
```

# iphone - iOS InAppPurchases 与 Phonegap 2.5

> ID：16063796
> 
> 赞同：1
> 
> 时间：2013-04-17T15:12:39.693
> 
> 标签：iphone, html, in-app-purchase, cordova

我目前正在为 android 和 iOS 实现 HTML5 应用程序。现在我的下一个业务是让应用内购买工作。

我正在使用 Cordova 2.5，使用 Xcode 4.6.2 构建。作为 InAppPurchases 的插件，我使用[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager)

我已经注册了我的应用程序的新版本，所有的 inApp 产品都可以出售了。

如果我使用模拟器，我可以获得产品的数据。它显示一个以正确价格购买商品的弹出窗口。然后它会询问 Apple ID。我向创建的测试用户注册。然后应用程序崩溃并出现以下错误消息：

```
2013-04-17 18:10:16.319 App[23553:c07] error 0 Cannot connect to iTunes Store
2013-04-17 18:10:16.319 App[23553:c07] state: PaymentTransactionStateFailed
2013-04-17 18:10:16.319 App[23553:c07] js: plugins.inAppPurchaseManager.updatedTransactionCallback.apply(plugins.inAppPurchaseManager, [
  "PaymentTransactionStateFailed",
  0,
  "Cannot connect to iTunes Store",
  "",
  "",
  ""
]) 
```

我不明白为什么它说他无法连接到 iTunes 商店。因为数据已经从那里加载了。

有谁知道我能做些什么来让它工作？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T08:21:44.993

好的。我修好了它。我做的第一件事就是等待，不做任何更改，24 小时后返回项目已经减少了一些问题。然后我和测试用户一起从 App Store 下载了一个免费的应用程序。我几乎达到了它可以工作的程度......然后我切换到另一个版本的插件：github.com/usmart/InAppPurchaseManager-EXAMPLE。你猜怎么着？它现在可以工作。

# javascript - Knockout js：选择的延迟加载选项

> ID：16063797
> 
> 赞同：2
> 
> 时间：2013-04-17T15:12:44.533
> 
> 标签：javascript, knockout.js, lazy-loading

我正在尝试使用淘汰赛 js 创建一个延迟加载选择。多亏了淘汰赛，按需加载数据并让它更新 UI 变得很简单。但是，一旦加载数据，我就无法设置正确的项目。

[此处](http://jsfiddle.net/steeeeeeeeeee/5YFry/)为示例 jsFiddle

经过一番挖掘后，似乎敲除会覆盖该值，因为它希望将模型与选项匹配。请参阅 knockout-2.2.1.debug.js 中的“ensureDropdownSelectionIsConsistentWithModelValue”。

这对我来说是个问题，因为在它这样做的时候，没有选项，所以它用 0 覆盖了我的模型值。

我对淘汰赛还很陌生，所以我怀疑我正在接近这个错误......有没有人做到这一点？或者有更好的建议方法？

我已经阅读了 Ryan 的博客文章[Lazy Loading an Observable in KnockoutJS](http://www.knockmeout.net/2011/06/lazy-loading-observable-in-knockoutjs.html)，但我看不到利用他的方法解决我的问题的方法。

在此先感谢您的帮助:)

圣。

代码示例：

html:

```
<select data-bind="options: $data.choice.options, optionsText: 'text', optionsValue: 'value', value: $data.choice"></select> 
```

JS：

```
var optionsProvider = (function () {
"use strict";
var self = {};
//container for options data, a sort of dictionary of option arrays.
self.options = {};

self.init = function (optionData) {
    //pre-populate any provided options data here...
};

self.get = function(name) {
    if (!self.options[name]) {
        self.options[name] = ko.observable([]);

        //ajax request for options
        //populate self.options[name] with options upon return
        //dummy this with below for example.
        setTimeout(function() { 
            self.options[name]([
                { text : "option1", value : 1 },
                { text : "option2", value : 2 },
                { text : "option3", value : 3 },
            ]); 
        }, 1000); //simulate some delay
    }
    //return reference to observable immediately.
    return self.options[name];
};

return self;
})();

var simpleModel = function() {
    this.choice = ko.observable(2); //hard code selected option to simulated pre-saved selection.
    this.choice.options = optionsProvider.get("SomeOptionType");  
};

ko.applyBindings(new simpleModel()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:07:44.040

通常，我处理这种情况的方法是预先填充 observableArray，并将当前值作为其唯一项。

对你来说，你可能会在你的 getter 中接受一个 initialValue，比如：

```
self.get = function(name, initialValue) {
    if (!self.options[name]) {
        self.options[name] = ko.observableArray([{ value: initialValue }]);

        //ajax request for options
        //populate self.options[name] with options upon return
        //dummy this with below for example.
        setTimeout(function() { 
            self.options[name]([
                { text : "option1", value : 1 },
                { text : "option2", value : 2 },
                { text : "option3", value : 3 },
            ]); 
        }, 1000); //simulate some delay
    }
    //return reference to observable immediately.
    return self.options[name];
}; 
```

并通过它：

```
var simpleModel = function() {
  var initialValue = 2;
  this.choice = ko.observable(initialValue); //hard code selected option to simulated pre-saved selection.
  this.choice.options = optionsProvider.get("SomeOptionType", initialValue);  
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/sHB9p/](http://jsfiddle.net/rniemeyer/sHB9p/)

对于更通用的方式，我使用了自定义绑定来实现这一点，例如：

```
ko.bindingHandlers.populateInitialValue = {
    init: function(element, valueAccessor, allBindingsAccessor) {
       var bindings = allBindingsAccessor(),
           options = ko.utils.unwrapObservable(bindings.options),
           optionsValue = bindings.optionsValue,
           value = ko.utils.unwrapObservable(bindings.value),
           initialValue;

        if (options && !options.length) {
            if (optionsValue) {
                initialValue = {};
                initialValue[optionsValue] = value;
            }
            else {
                initialValue = value;   
            }

            bindings.options.push(initialValue);
        }
    }
}; 
```

然后，使用它（无需对您的代码进行其他更改）：

```
<select data-bind="populateInitialValue: true, options: $data.choice.options, optionsText: 'text', optionsValue: 'value', value: $data.choice"></select> 
```

这只是查看其他选项并建立一个初始值。

示例：http: [//jsfiddle.net/rniemeyer/SmSC6/](http://jsfiddle.net/rniemeyer/SmSC6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T09:22:16.540

这是一个邪恶的老问题，但我想我会为了其他任何出现并发现这个问题的人的利益而发帖。我编写了一个插件来封装可供选择对象使用的选项及其所选索引。

这个插件还解决了上面描述的原始问题，因为您可以将一个值加载到 observable 中，然后在稍后加载选项，并且如果该值存在于加载的列表中，那么 observable 将自动连接它。

看看，希望这对这些年后来的人有帮助:)

[https://github.com/ozrevulsion/KoSelectSugar](https://github.com/ozrevulsion/KoSelectSugar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:32:25.737

这是一个更新的小提琴[http://jsfiddle.net/sujesharukil/5YFry/5/](http://jsfiddle.net/sujesharukil/5YFry/5/)

您可以订阅对选项的更改，然后设置值，这是一种简单的方法。

```
var simpleModel = function() {
    var self = this;
  this.choice = ko.observable(2); //hard code selected option to simulated pre-saved     selection.
  this.choice.options = optionsProvider.get("SomeOptionType");  
    this.choice.options.subscribe(function(newValue){
        self.choice(2);
    });  
}; 
```

# jquery - 如何实现悬停div从侧面滑入的鼠标悬停效果

> ID：16063803
> 
> 赞同：2
> 
> 时间：2013-04-17T15:13:00.630
> 
> 标签：jquery, html, css

我一直在看这个 WordPress 主题：[http ://themes.thunderbuddies4life.com/?theme=longwave_wp](http://themes.thunderbuddies4life.com/?theme=longwave_wp)

当磁贴悬停时，似乎半透明的 div 从鼠标进入的边缘滑过磁贴。我认为可以为此使用单个 div，但我不确定通过查看页面源代码是如何实现的。

我非常擅长 html 和 css，但我的 jQuery 非常基础。我知道这有点开放，但对所涉及的技术进行简要说明会有所帮助。

* * *

编辑：考虑一下，没有深入研究页面源，这就是我认为该方法可能起作用的方式：

1.  每个图块都有自己的半透明覆盖子 div，上面有标题等。
2.  每个覆盖 div 都位于 tile div 之外的某个位置。瓷砖有`overflow:hidden`
3.  当鼠标悬停在 div 上时，我使用 jQuery 来计算鼠标进入的哪一侧（如何？）
4.  然后我将 css 类应用于覆盖 div：*top*、*bottom*、*left*或*right*。CSS 将立即将覆盖 div 定位在 tile div 的相应边缘之外。
5.  jQuery 然后用动画偏移覆盖 div 以将其移动到图块上方的位置。

瓦片将动态调整大小，因此需要 jQuery 来根据瓦片大小重新定义偏移量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:45:35.887

他们正在使用这个 - [http://tympanus.net/codrops/2012/04/09/direction-aware-hover-effect-with-css3-and-jquery/](http://tympanus.net/codrops/2012/04/09/direction-aware-hover-effect-with-css3-and-jquery/)

我还开始了一个纯 CSS 版本 - [http://codepen.io/seanjacob/pen/rmIcD](http://codepen.io/seanjacob/pen/rmIcD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:43:59.177

第一个想法：在 mouseenter 上，您可以开始进行数学运算以根据鼠标坐标确定进入边缘。然后，当您知道鼠标是从顶部、右侧、底部还是左侧输入时，您可以执行必要的动画

# javascript - 调用与 mouseenter 关联的函数

> ID：16063804
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:01.893
> 
> 标签：javascript, jquery, jquery-events, mouseenter

使用 jQuery，我向这样的元素添加了一个函数：

```
$('#theId').mouseenter(function(){
    // ...
}); 
```

现在，我想`#theId.mouseenter`从脚本中调用与 , 关联的函数。我知道这是可能的：

```
$('#theId').mouseenter(theFunction);
function theFunction() {
    // ...
} 
```

有了这个，我可以`theFunction()`从脚本中调用。但我想知道是否有一个函数可以执行与`#theId.mouseenter`. 例如，可以`elem.scroll`通过执行来运行与相关联的函数`$(elem).scroll();`。有没有类似的`mouseenter`活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:15:06.290

您可以触发 mouseenter ：

```
$('#theId').trigger('mouseenter'); 
```

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:14:55.340

利用[**`.trigger();`**](http://api.jquery.com/trigger/)

```
$('#theId').trigger("mouseenter"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:17:05.300

你实际上根本不需要触发器 - 只是`$('#theId').mouseenter();`

# javascript - 在没有 jQuery 的情况下添加到 DOM

> ID：16063806
> 
> 赞同：8
> 
> 时间：2013-04-17T15:13:03.030
> 
> 标签：javascript

这应该很简单，但事实并非如此。

```
document.getElementsByTagName('body')[0].document.createTextNode( document.createElement('<div>some HTML</div>') ); 
```

它创建为文本节点。我该怎么做才能简单地添加没有 jQuery 的 HTML？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T15:14:29.810

关闭，但没有雪茄。您必须手动（通过[`createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)）创建元素，*然后*附加它，如下所示：

```
var div = document.createElement("div");
div.innerHTML = "some HTML";
document.getElementsByTagName('body')[0].appendChild(div); 
```

不幸的是，您不能在单行中执行此操作，因为没有设置`innerHTML`元素属性的函数，这意味着它不可链接。不过，只要稍加准备，您就可以做到这一点：

```
function setInnerHTML(element, content) {
    element.innerHTML = content;
    return element;
} 

document.getElementsByTagName('body')[0].appendChild(setInnerHTML(document.createElement("div"), "some HTML")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:15:21.607

[document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)而不是 createTextNode

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:22:35.323

有很多方法：

```
elem.innerHTML = ''   // fast
elem.appendChild()    
elem.insertAdjacentElement()  //fast    
elem.insertAdjacentHTML()
elem.insertAdjacentText() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-12T15:45:47.287

```
document.body.innerHTML+=document.createElement('div').outerHTML; 
```

# c - 如何在C中打印数组元素的摘要

> ID：16063807
> 
> 赞同：2
> 
> 时间：2013-04-17T15:13:06.910
> 
> 标签：c, arrays, pointers, malloc

我正在尝试打印数组中整数的摘要。例如，如果用户键入：“1 4 5 8”，结果应该是：“1 5 10 18”(0+1= 1, 1+4= 5, 5+5= 10, 10+8= 18) 当我使用输入运行此代码：“1 1 1”第一次结果是：“1 2 3 32767 256”，其他任何时候它都按预期运行：\ 执行此操作的算法很简单，但我已经习惯了OOP，刚开始学习C。这里的东西似乎不对……指针或malloc的东西？有什么帮助吗？实现这一点的“正确”方式是什么？干杯..！

```
#include <stdio.h>
#include <stdlib.h>
#define MAX 50

/*function prototype*/
int* summary(int a[], int length);
void printArray(int array[], int i);

int main(){
    int k;
    int length=0;
    int userArray[MAX];
    printf("Enter some numbers:\n");

    while((scanf("%d", &k) ==1)){
        userArray[length] = k;
        length++;

        /*print the array after 'Enter' key pressed*/
        if(getchar() == '\n'){
            summary(userArray, length);
            length = 0;
            printf("\n");
        }/*if*/ 
    }/*while*/

    summary(userArray, length);
    printf("\n");

    return 0;
}/*main*/

int* summary(int a[], int length){
    int i;
    int counter = 0;
    int *p;
    p = (int *) malloc(length * sizeof(int));

    if(!p){
        printf("memory allocation failed!");
        exit(0);
    }/*if null*/

    for(i=0 ; i<length ; i++){
        counter+=a[i];
        p[i] = counter;
    }/*for*/

    a[length] = '\0';
    printArray(p, 0);
    return p;
    free(p);
}/*summary*/

void printArray(int array[], int i){
    if(array[i]=='\0'){
        printf("finished printing");
        return;
    }
    else{
        printf(" %d\n", array[i]);
        printArray(array, i+1);
    }
}/*printArray*/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:17:09.427

问题出在线路上

```
a[length] = '\0';
printArray(p, 0); 
```

`printArray`迭代，直到找到值为 0 的元素。您尝试将零值写入超出`a`然后将数组传递`p`到`printArray`. `p`没有任何零元素，因此`printArray`在不可预知的时间内继续读取它，直到它崩溃或找到值为 0 的内存。

要解决此问题，您应该在调用之前为then set中的`length+1`元素分配空间。或者，您可以将第二个参数更改为数组大小并将其重新实现为`p``p[length] = 0``printArray``printArray`

```
void printArray(int* array, int size){
    for (int i=0; i<size; i++) {
        printf(" %d\n", array[i]);
    }
    printf("finished printing");
}/*prinArray*/ 
```

您还需要决定如何处理分配给`p`in的内存`summary`。您当前从函数中返回它，然后尝试使用`free`它。该`free(p)`行将永远不会执行，因为前面的`return`语句将控制权返回给调用函数。由于没有调用者`summary`使用返回值，最简单的解决方法是更改`summary`​​为返回`void`并删除该`return p`行。

请注意，如果启用警告，编译器应标记最后一个问题。（添加`-Wall`到 gcc 或`/W4`MSVC 的命令行）

# windows - Is it possible to show a remote connected console?

> ID：16063808
> 
> 赞同：1
> 
> 时间：2013-04-17T15:13:08.377
> 
> 标签：windows, powershell, cmd, remote-control, winexe

I'm connected from a Linux machine to a Windows machine through winexe. I log onto the Windows machine with a user on that machine. I can run cmd.exe or powershell scripts.

Now my problem: If I'm on the desktop of the machine, connect remotly to it and start some script through cmd/powershell then the cmd/powershell window is not visible to the desktop user. Both use the same user. I would like to have a visible window for the desktop user if a remote user started a script and it is running, so the commands and the output can be seen by the desktop user.

If I use the interactive argument of winexe then I get a message on the desktop that an interactive serivce needs attention, but when I look at it then there is only an empty cmd window. The output doesn't show.

Is there a way to show the cmd window that is used by the remote user?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:18:01.133

尝试使用`psexec`并指定交互式会话开关来执行您的脚本。就像是：

```
psexec.exe -i powershell.exe -executionpolicy bypass -file C:\myscript.ps1 
```

[psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

# extjs4.1 - 如何在 extjs 中包装长单选按钮标签

> ID：16063810
> 
> 赞同：1
> 
> 时间：2013-04-17T15:13:08.723
> 
> 标签：extjs4.1, radiobuttonlist

![单选按钮中的长标签](https://i.stack.imgur.com/MHUKL.jpg)

我上面的单选按钮包裹了标签，但没有正确对齐。它应该在顶部的第一个文本下方对齐。是否有我必须设置的配置才能正确包装标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T19:57:58.300

我很确定没有配置可以做到这一点。唯一合理的方法是摆弄 CSS -[如何对齐复选框及其标签一致地跨浏览器](https://stackoverflow.com/questions/306252/how-to-align-checkboxes-and-their-labels-consistently-cross-browsers)

+在当前版本（4.2.1.）中，有一个错误，它将整个标签文本包装在收音机下（[见这里](http://www.sencha.com/forum/showthread.php?265217)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T12:30:35.397

通过查看 ExtJS 6 实现的内容。你可以在 ExtJS 4.2.1 上使用这个 CSS 覆盖：

```
.x-form-cb-label-after {
    display: inline-block;
    padding-left: 17px;
    margin: 4px 0 0 0;
}
.x-form-cb {
    margin-top: 5px;
    position: absolute;
} 
```

并做到这一点： [![在此处输入图像描述](https://i.stack.imgur.com/4iDEJ.png)](https://i.stack.imgur.com/4iDEJ.png)

# magento - How to do a Magento Manual Restore?

> ID：16063811
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:15.583
> 
> 标签：magento, templates, themes, restore

I backed up the entire public_html folder, and had the mysql backed up as well. I'm new to Magento so I did a clean install and a mysqlimport with the database. Seems like the site is almost fully back in order but the template doesn't look the same. It's using the default Magento template. I didn't copy the entire public_html folder over for the reason of having a different mysql username/password.

I tried to copy over media, skin/frontend, and app/design/frontend folders. I just need to get the original template back and I think the site should be fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:15:07.287

Magento 非常便携，它只是归结为一堆文件和一个数据库。移动/克隆安装时，您需要做的就是移动/备份整个文件集和数据库（正如您已经完成的那样），并且在恢复时将文件集放在新位置并将 sql 转储导入新数据库。

一切就绪后，打开文件`app/etc/local.xml`并更改新数据库的数据库连接信息。`base_url`如果域已更改，您还需要更改数据库中的条目，因此`core_config_data`在新数据库中打开表并找到具有如下列`path`内容的条目`%base_url`：

```
SELECT * FROM `core_config_data` WHERE `path` LIKE '%base_url'; 
```

相应地更改此查询返回的域条目。

`var/cache/`最后请记住，目录和目录中可能有大量文件，`var/session/`这会增加备份的大小。删除 的内容是安全的，`var/cache/`但删除 的内容`var/session/`会杀死所有用户会话，因此在执行此操作之前*肯定*要做两次。

我建议您按照此过程恢复您的 Magento 安装。

# iphone - NSdateFormatter - 奇怪的问题

> ID：16063812
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:22.217
> 
> 标签：iphone, ios, xcode, nsdate, nsdateformatter

我正在尝试解决一个非常奇怪的问题。在我的应用程序中，我使用 NSXMLParser 来解析提要。我也有一个要解析的 pubDate 标记。

我有许多不同的日期格式可以解析为 NSDate，其中大部分我都能解析。但其中 1 个我有问题：

```
<pubDate>2013-04-17T12:22:00.0</pubDate> 
```

这是我的日期格式代码：

```
NSArray *dateFormats = @[@"yyyy-MM-dd'T'HH:mm:ss.S",
@"EEE, dd MMM yyyy HH:mm Z",
@"EEE, dd MMM yyyy HH:mm:ss Z",
@"dd/MM/yyyy HH:mm:ss",
@"EEE, dd MMM yyyy HH:mm:ss",@"EEE,dd MMM yyyy HH:mm:ss Z"];

NSDateFormatter *inputFormatter = [[NSDateFormatter alloc]init];
assert(inputFormatter != nil);
NSLocale *loacle = [[NSLocale alloc]initWithLocaleIdentifier:@"en_US_POSIX"];
assert(loacle != nil);
[inputFormatter setLocale:loacle];

NSString *dateString = [NSString stringWithFormat:@"%@",currentPubDate];
NSLog(@"%@",dateString);
NSDate *inputDate = nil;
for (NSString *dateFormat in dateFormats) {
    [inputFormatter setDateFormat:dateFormat];
    inputDate = [inputFormatter dateFromString:dateString];
    if (inputDate) {
        break;
    }
}

NSLocale *hebrow = [[NSLocale alloc]initWithLocaleIdentifier:@"he_IL"];
NSDateFormatter *outputFormatter = [[NSDateFormatter alloc]init];
outputFormatter.locale = hebrow;
[outputFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:3600*2]];
[outputFormatter setDateStyle:NSDateFormatterFullStyle];
[outputFormatter setTimeStyle:NSTimeZoneNameStyleShortStandard];
NSString *outputDate = [outputFormatter stringFromDate:inputDate]; 
```

当我调试时，我可以看到它`dateString`有一个发布日期，但`\n`在最后。看起来像这样`@"2013-04-17T12:22:00.0\n"`。

但是`NSLog(@"%@",dateString);`我得到了这个：

```
2013-04-17 18:10:37.769 AppName[11651:f803] 2013-04-17T17:56:58.0
2013-04-17 18:10:47.674 AppName[11651:f803] 2013-04-17T17:17:28.0
2013-04-17 18:10:49.990 AppName[11651:f803] 2013-04-17T16:27:36.0 
```

所以日期不会显示。有人有想法么？

# java - 在 java 中获取扫描仪以正确关闭的问题

> ID：16063816
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:29.990
> 
> 标签：java, eclipse

我编写了使用 java 扫描仪读取整数的方法。该方法在关闭扫描仪之前工作正常，但是当我尝试关闭扫描仪时，程序总是在第一次扫描期间崩溃。

有谁知道这段代码有什么问题？

```
private int SINT()
{
    System.out.println("Integer");
    Scanner scan = new Scanner(System.in);
    int p = 0;
    try 
    {
        p = scan.nextInt();
    }
    catch(Exception e)
    { 
        System.out.println("Not integer");
    }
    scan.close();
    return p;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:18:50.310

您始终可以在 Java 1.7 中可用的 try-w/resources 块中创建扫描器。由于它实现了`AutoClosable`接口，因此您可以省略`scan.close()`.

```
int p = 0;
try (Scanner scan = new Scanner(System.in))
{
    p = scan.nextInt();
}
catch (Exception e)
{
    System.out.println("Not integer");
}
return p; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:22:40.733

> java.util.Scanner.throwFor 处的 java.util.NoSuchElementException（未知来源）

当您尝试从输入中读取没有任何令牌时会导致您的异常

因此，当您调用[next](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)时，您应该检查扫描仪是否有一个。

像这样 ：

```
if(scan.hasNextInt())
 p =scan.nextInt(); 
```

# c# - 无法将小图像调整为大图像

> ID：16063817
> 
> 赞同：1
> 
> 时间：2013-04-17T15:13:31.617
> 
> 标签：c#, asp.net-mvc, image-resizing

在我的程序中，用户可以将图像上传到特定大小，然后我正在调整图像大小。如果图像很大，它会很好用，但是如果图像很小并且我尝试调整为大图像会变得模糊（基本上它只是缩放而不是调整大小）......有人可以帮助我怎么做。谢谢！

这是我的程序

```
 public static Image ScaleBySize(Image imgPhoto, int size)
        {
            int logoSize = size;

            float sourceWidth = imgPhoto.Width;
            float sourceHeight = imgPhoto.Height;
            float destHeight = 0;
            float destWidth = 0;
            int sourceX = 0;
            int sourceY = 0;
            int destX = 0;
            int destY = 0;

            if (sourceWidth > size || sourceWidth < size) { destWidth = size; }
            if (sourceHeight > size || sourceHeight < size) { destHeight = size; }

            Bitmap bmPhoto = new Bitmap((int)destWidth, (int)destHeight,PixelFormat.Format32bppPArgb);
            bmPhoto.SetResolution(imgPhoto.HorizontalResolution, imgPhoto.VerticalResolution);

            Graphics grPhoto = Graphics.FromImage(bmPhoto);
            grPhoto.InterpolationMode = InterpolationMode.HighQualityBicubic;
            grPhoto.DrawImage(imgPhoto,new Rectangle(destX, destY, (int)destWidth, (int)destHeight),new Rectangle(sourceX, sourceY, (int)sourceWidth, (int)sourceHeight),GraphicsUnit.Pixel);
            grPhoto.Dispose();

            return bmPhoto;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:25:02.010

当然，您的大图像会模糊，因为小图像中没有细节。该程序只是“拉伸”每个像素以填充更大的区域。

# jsp - Struts2 accessing enum from JSP

> ID：16063819
> 
> 赞同：11
> 
> 时间：2013-04-17T15:13:34.040
> 
> 标签：jsp, struts2, enums, ognl

I have the following class

```
package com.test;

public class SomeClass {
   public enum COLOR {RED,BLUE}
} 
```

I want to access values of `COLOR` enum in my JSP. I've tried the following code but it doesn't work.

```
<s:property value="@com.test.SomeClass.COLOR@RED"/>
<s:property value="@com.test.SomeClass@COLOR.RED"/> 
```

Any body came across this issue before? [I've already enabled static method access in struts.xml]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T22:01:55.797

对于`enum`-s 不需要启用`static method access`。

可以使用`@`如下符号访问 Enum-s：

```
<s:property value="@package.ENUM@enumvalue"/> 
```

在您的情况下，因为您`enum`在类内部声明使用`$`符号来引用您的`enum`.

```
<s:property value="@com.test.SomeClass$COLOR@RED"/> 
```

# c - Floating point arithmetic and machine epsilon

> ID：16063820
> 
> 赞同：6
> 
> 时间：2013-04-17T15:13:34.790
> 
> 标签：c, floating-point

I'm trying to compute an approximation of the epsilon value for the `float` type (and I know it's already in the standard library).

The epsilon values on this machine are (printed with some approximation):

```
 FLT_EPSILON = 1.192093e-07
 DBL_EPSILON = 2.220446e-16
LDBL_EPSILON = 1.084202e-19 
```

[`FLT_EVAL_METHOD`](http://en.cppreference.com/w/c/types/limits/FLT_EVAL_METHOD) is `2` so everything is done in `long double` precision, and `float`, `double` and `long double` are 32, 64 and 96 bit.

I tried to get an approximation of the value starting from 1 and dividing it by 2 until it becomes too small, doing all operation with the `float` type:

```
# include <stdio.h>

int main(void)
{
    float floatEps = 1;

    while (1 + floatEps / 2 != 1)
        floatEps /= 2;

    printf("float eps = %e\n", floatEps);
} 
```

The output is not what I was looking for:

```
float epsilon = 1.084202e-19 
```

Intermediate operations are done with the greatest precision (due to the value of `FLT_EVAL_METHOD`), so this result seems legit.

However, this:

```
// 2.0 is a double literal
while ((float) (1 + floatEps / 2.0) != 1)
    floatEps /= 2; 
```

gives this output, which is the right one:

```
float epsilon = 1.192093e-07 
```

but this one:

```
// no double literals
while ((float) (1 + floatEps / 2) != 1)
    floatEps /= 2; 
```

leads again to a wrong result, as the first one:

```
float epsilon = 1.084202e-19 
```

These last two versions should be equivalent on this platform, is this a compiler bug? If not, what's happening?

Code is compiled with:

```
gcc -O0 -std=c99 -pedantic file.c 
```

The gcc version is pretty old, but I'm at university and I can't update it:

```
$ gcc -v
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.4.5-8'
--with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs
--enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4
--enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib
--libexecdir=/usr/lib --without-included-gettext --enable-threads=posix
--with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls
--enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc
--enable-targets=all --with-arch-32=i586 --with-tune=generic
--enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu
--target=i486-linux-gnu
Thread model: posix
gcc version 4.4.5 (Debian 4.4.5-8) 
```

Current version of gcc, 4.7, behaves correctly on my home computer. There are also comments saying that different versions give different results.

After some answers and comments, that clarified what is behaving as expected and what's not, I changed the question a little to make it clearer.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:18:06.357

允许编译器以`float`它喜欢的任何更高的精度来计算表达式，所以看起来第一个表达式是以`long double`精度计算的。在第二个表达式中，您强制将结果再次缩小`float`。

在回答您的一些其他问题和下面的讨论时：您基本上是在寻找与某些浮点类型的 1 的最小非零差异。根据`FLT_EVAL_METHOD`编译器的设置，可能会决定以比所涉及类型更高的精度评估所有浮点表达式。在 Pentium 上，浮点单元的内部寄存器传统上是 80 位，对于所有较小的浮点类型使用该精度很方便。所以最后你的测试取决于你 compare 的精度`!=`。在没有显式转换的情况下，此比较的精度由您的编译器决定，而不是由您的代码决定。通过显式转换，您可以将比较缩小到您想要的类型。

正如您确认您的编译器已设置`FLT_EVAL_METHOD`为，`2`因此它使用最高精度进行任何浮点计算。

作为下面讨论的结论，我们有信心说在 4.5 版本之前存在与`FLT_EVAL_METHOD=2`案例实施相关的错误`gcc`，并且至少从 4.6 版本开始修复。如果在表达式中使用整数常量`2`而不是浮点常量`2.0`，`float`则在生成的程序集中省略转换为。还值得注意的是，从优化级别来看，`-O1`这些旧编译器会产生正确的结果，但生成的程序集完全不同，并且只包含很少的浮点运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:44:33.053

C99 C 编译器可以评估浮点表达式，就好像它们是比实际类型更精确的浮点类型一样。

宏`FLT_EVAL_METHOD`由编译器设置以指示策略：

> -1 不确定；
> 
> 0 仅根据类型的范围和精度评估所有操作和常量；
> 
> 1 将 float 和 double 类型的运算和常量评估为 double 类型的范围和精度，将 long double 运算和常量评估为 long double 类型的范围和精度；
> 
> 2 将所有运算和常量评估为 long double 类型的范围和精度。

由于历史原因，针对 x86 处理器的两个常见选择是 0 和 2。

文件`m.c`是您的第一个程序。如果我使用我的编译器对其进行编译，我将获得：

```
$ gcc -std=c99 -mfpmath=387 m.c
$ ./a.out 
float eps = 1.084202e-19
$ gcc -std=c99  m.c
$ ./a.out 
float eps = 1.192093e-07 
```

如果我在下面编译这个其他程序，编译器会根据它的作用设置宏：

```
#include <stdio.h>
#include <float.h>

int main(){
  printf("%d\n", FLT_EVAL_METHOD);
} 
```

结果：

```
$ gcc -std=c99 -mfpmath=387 t.c
$ ./a.out 
2
$ gcc -std=c99 t.c
$ ./a.out 
0 
```

# vb.net - 我正在尝试通过以太网在 VB.NET 中的热敏打印机上打印

> ID：16063822
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:36.667
> 
> 标签：vb.net, printing, ethernet

我正在尝试通过以太网在 VB.NET 中的热敏打印机上进行打印。在互联网上搜索，我发现了这个程序，它显然存储在内存打印中，因为打印机什么都不做。然后，如果我从控制面板发出测试页，它会打印我在上面打印的内容 + 测试页。你在日常生活中错过了什么吗？，非常感谢你能给我的帮助。

```
Dim cImpresion As String = Chr(27) & Chr(77) & Chr(64)
Dim tcpSender As TcpClient = New TcpClient()

tcpSender.SendBufferSize = 4096
tcpSender.Connect(whatIP, whatPort)
If tcpSender.Connected = False Then
  tcpSender.Close()
  Exit Sub
End If

Dim nStream As NetworkStream = tcpSender.GetStream()
If nStream.CanWrite = True Then
  Dim SendBytes As Byte
  SendBytes = System.Text.Encoding.ASCII.GetBytes("the text I want to print")
  nStream.Write(SendBytes, 0, SendBytes.Length)
  nStream.Flush()
End If

nStream.Close()
tcpSender.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:43:26.543

尝试将 VbCrLf 添加到 SendBytes：

```
SendBytes = System.Text.Encoding.ASCII.GetBytes("the text I want to print")
SendBytes = SendBytes + vbCrLf 
```

或使用 nStream.WriteLine 而不是 nStream.Write

# wpf - WPF 父元素失去焦点

> ID：16063823
> 
> 赞同：0
> 
> 时间：2013-04-17T15:13:38.163
> 
> 标签：wpf, focus

我正在开发一个 WPF 应用程序。在我的一个页面中，我有一个包含 3 个组合框的 DockPanel。这 3 个 ComboBox 相互依赖。因此，我在 DockPanel 上有一个绑定组和该绑定组的验证规则。

当 DockPanel 失去焦点时，我想验证这 3 个组合框；但是，当用户单击其中一个子 ComboBox 时，会触发 DockPanel 的 LostFocus 事件！

我原以为如果子控件有焦点，父控件也会有焦点……但似乎并非如此。

我正在寻找一种解决方案，以在 DockPanel 失去焦点时对绑定组执行验证......其中焦点丢失到**不是**其子项之一的控件。

编辑：

因此，我创建了一个尽可能简单的应用程序来演示这个问题。

我有一个“FertilizerCombination”类，其中包含构成肥料的 3 个整数。这些在应用程序中必须是唯一的。目前唯一不可用的组合是 10-10-10。这是类中的硬编码值。

```
Public Class FertilizerCombination
  Private _nitrogen As Integer
  Private _phosphorous As Integer
  Private _potassium As Integer

<System.ComponentModel.DataAnnotations.Range(1, 20)> _
Public Property Nitrogen As Integer
    Get
        Return _nitrogen
    End Get
    Set(value As Integer)
        System.ComponentModel.DataAnnotations.Validator.ValidateProperty(value, NitrogenValidationContext)
        _nitrogen = value
    End Set
End Property

<System.ComponentModel.DataAnnotations.Range(1, 20)> _
Public Property Phosphorous As Integer
    Get
        Return _phosphorous
    End Get
    Set(value As Integer)
        System.ComponentModel.DataAnnotations.Validator.ValidateProperty(value, PhosphorousValidationContext)
        _phosphorous = value
    End Set
End Property

<System.ComponentModel.DataAnnotations.Range(1, 20)> _
Public Property Potassium As Integer
    Get
        Return _potassium
    End Get
    Set(value As Integer)
        System.ComponentModel.DataAnnotations.Validator.ValidateProperty(value, PotassiumValidationContext)
        _potassium = value
    End Set
End Property

Public Sub New()
End Sub
Public Sub New(ByVal nitrogen As Integer, ByVal phosphorous As Integer, ByVal potassium As Integer)
    Me.Nitrogen = nitrogen
    Me.Phosphorous = phosphorous
    Me.Potassium = potassium
End Sub

Public Shared Function FertilizerCombinationAvailable(ByVal nitrogen As Integer, ByVal phosphorous As Integer, ByVal potassium As Integer) As Boolean
    'Checking against combinations already used'
    If nitrogen = "10" And phosphorous = "10" And potassium = "10" Then
        'Combination has already been used'
        Return False
    End If
    'Combination was not used yet'
    Return True
End Function

Public Sub SetFertilizerCombination(ByVal nitrogen As Integer, ByVal phosphorous As Integer, ByVal potassium As Integer)
    System.ComponentModel.DataAnnotations.Validator.ValidateProperty(nitrogen, NitrogenValidationContext)
    System.ComponentModel.DataAnnotations.Validator.ValidateProperty(phosphorous, PhosphorousValidationContext)
    System.ComponentModel.DataAnnotations.Validator.ValidateProperty(potassium, PotassiumValidationContext)
    If FertilizerCombination.FertilizerCombinationAvailable(nitrogen, phosphorous, potassium) = False Then
        Throw New ArgumentException("This fertilizer combination has already been used")
    End If
    Me.Nitrogen = nitrogen
    Me.Phosphorous = phosphorous
    Me.Potassium = potassium
End Sub

Private NitrogenValidationContext = New System.ComponentModel.DataAnnotations.ValidationContext(Me, Nothing, Nothing) With {.MemberName = "Nitrogen"}
Private PhosphorousValidationContext = New System.ComponentModel.DataAnnotations.ValidationContext(Me, Nothing, Nothing) With {.MemberName = "Phosphorous"}
Private PotassiumValidationContext = New System.ComponentModel.DataAnnotations.ValidationContext(Me, Nothing, Nothing) With {.MemberName = "Potassium"}
End Class 
```

我为肥料组合类创建了一个验证规则：

```
Public Class FertilizerCombinationValidationRule
Inherits ValidationRule

Public Overrides Function Validate(ByVal value As Object, ByVal cultureInfo As System.Globalization.CultureInfo) As System.Windows.Controls.ValidationResult
    Dim bg As BindingGroup = TryCast(value, BindingGroup)

    If bg IsNot Nothing AndAlso bg.Items.Count > 0 Then
        'The BindingGroup Items property contains the original object(s)'
        Dim fertilizerCombo As FertilizerCombination = TryCast(bg.Items(0), FertilizerCombination)

        'Using the BindingGroups GetValue method to retrieve the user provided values'
        Dim proposedNitrogen As Integer
        Dim proposedPhosphorous As Integer
        Dim proposedPotassium As Integer
        Try
            proposedNitrogen = bg.GetValue(fertilizerCombo, "Nitrogen")
            proposedPhosphorous = bg.GetValue(fertilizerCombo, "Phosphorous")
            proposedPotassium = bg.GetValue(fertilizerCombo, "Potassium")
            If FertilizerCombination.FertilizerCombinationAvailable(proposedNitrogen, proposedPhosphorous, proposedPotassium) = False Then
                Return New ValidationResult(False, "This fertializer combination has already been used")
            End If
        Catch noValue As System.Windows.Data.ValueUnavailableException
            'a binding was not properly bound yet'
        End Try

    End If
    Return New ValidationResult(True, Nothing)
End Function

End Class 
```

我有一个具有 FertilizerCombination 属性的“PlantSolution”类。我还有一个用于该类的 VM，以便在 XAML 中轻松绑定：

```
Public Class PlantSolutionVM
  Public Property PlantSolution As PlantSolution
  Public Sub New()
    PlantSolution = New PlantSolution("Produce Blooms", "Using this fertilizer will help your plant produce flowers!", 10, 10, 20)
End Sub
End Class

Public Class PlantSolution

Private _name As String
Private _description As String
Private _fertilizer As FertilizerCombination

<System.ComponentModel.DataAnnotations.Required()>
Public Property Name As String
    Get
        Return _name
    End Get
    Set(value As String)
        System.ComponentModel.DataAnnotations.Validator.ValidateProperty(value, NameValidationContext)
        _name = value
    End Set
End Property
<System.ComponentModel.DataAnnotations.Required()>
Public Property Description As String
    Get
        Return _description
    End Get
    Set(value As String)
        System.ComponentModel.DataAnnotations.Validator.ValidateProperty(value, DescriptionValidationContext)
        _description = value
    End Set
End Property
Public ReadOnly Property Fertilizer As FertilizerCombination
    Get
        Return _fertilizer
    End Get
End Property
Public Sub New(name As String, description As String, nitrogen As Integer, phosphorous As Integer, potassium As Integer)
    _fertilizer = New FertilizerCombination(nitrogen, phosphorous, potassium)
    Me.Name = name
    Me.Description = description
End Sub

Private NameValidationContext = New System.ComponentModel.DataAnnotations.ValidationContext(Me, Nothing, Nothing) With {.MemberName = "Name"}
Private DescriptionValidationContext = New System.ComponentModel.DataAnnotations.ValidationContext(Me, Nothing, Nothing) With {.MemberName = "Description"}
End Class 
```

现在这是我的 XAML，用于一个名为“FunWithFocus”的窗口：

```
 <Grid>
    <Grid.Resources>
        <x:Array x:Key="CombinationOptions" Type="sys:Int32" xmlns:sys="clr-namespace:System;assembly=mscorlib">
            <sys:Int32>0</sys:Int32>
            <sys:Int32>1</sys:Int32>
            <sys:Int32>2</sys:Int32>
            <sys:Int32>3</sys:Int32>
            <sys:Int32>4</sys:Int32>
            <sys:Int32>5</sys:Int32>
            <sys:Int32>6</sys:Int32>
            <sys:Int32>7</sys:Int32>
            <sys:Int32>8</sys:Int32>
            <sys:Int32>9</sys:Int32>
            <sys:Int32>10</sys:Int32>
            <sys:Int32>11</sys:Int32>
            <sys:Int32>12</sys:Int32>
            <sys:Int32>13</sys:Int32>
            <sys:Int32>14</sys:Int32>
            <sys:Int32>15</sys:Int32>
            <sys:Int32>16</sys:Int32>
            <sys:Int32>17</sys:Int32>
            <sys:Int32>18</sys:Int32>
            <sys:Int32>19</sys:Int32>
            <sys:Int32>20</sys:Int32>
        </x:Array>
        <local:PlantSolutionVM x:Key="PlantSolutionVM" />
        <Style TargetType="DockPanel">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Grid.Resources>
    <Grid DataContext="{Binding Source={StaticResource PlantSolutionVM}, Path=PlantSolution}" Margin="50">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Text="Solution Name:" Grid.Row="0" Grid.Column="0" Margin="5"/>
        <TextBox x:Name="ItemName" Text="{Binding Name, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" Grid.Row="0" Grid.Column="1" VerticalAlignment="Top" Margin="5"/>

        <TextBlock Text="Description of Problem:" Grid.Row="1" Grid.Column="0" Margin="5"/>
        <TextBox x:Name="ItemDescription" Text="{Binding Description, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" Grid.Row="1" Grid.Column="1" Margin="5"/>

        <TextBlock Text="Recommended Fertilizer:" Grid.Row="2" Grid.Column="0" Margin="5"/>
        <DockPanel x:Name="FertilizerCombinationContainer" DataContext="{Binding Fertilizer}" Grid.Row="2" Grid.Column="1" Margin="5" HorizontalAlignment="Left" VerticalAlignment="Top">
            <DockPanel.BindingGroup>
                <BindingGroup NotifyOnValidationError="True">
                    <BindingGroup.ValidationRules>
                        <local:FertilizerCombinationValidationRule />
                    </BindingGroup.ValidationRules>
                </BindingGroup>
            </DockPanel.BindingGroup>
            <ComboBox x:Name="NitrogenValue" HorizontalAlignment="Left" VerticalAlignment="Top"
                      ItemsSource="{StaticResource CombinationOptions}"
                      SelectedItem="{Binding Nitrogen}"/>
            <ComboBox x:Name="PhosphorousValue" HorizontalAlignment="Left"  VerticalAlignment="Top"
                      ItemsSource="{StaticResource CombinationOptions}"
                      SelectedItem="{Binding Phosphorous}"/>
            <ComboBox x:Name="PotatssiumValue" HorizontalAlignment="Left"  VerticalAlignment="Top"
                      ItemsSource="{StaticResource CombinationOptions}"
                      SelectedItem="{Binding Potassium}"/>
        </DockPanel>

        <Button x:Name="SaveIt" Content="Save" Grid.Row="3" Grid.Column="1"/>
    </Grid>
</Grid> 
```

这是页面背后的代码：

```
Class FunWithFocus

Private Sub FertilizerCombinationContainer_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles FertilizerCombinationContainer.Loaded
    'FertilizerCombinationContainer.BindingGroup.CancelEdit()'
    'FertilizerCombinationContainer.BindingGroup.BeginEdit()'
End Sub

Private Sub FertilizerCombinationContainer_LostFocus(sender As Object, e As System.Windows.RoutedEventArgs) Handles FertilizerCombinationContainer.LostFocus
    'This will get fired if the user drops down one of the comboboxes'
End Sub

'This is how I am currently handling the lost focus...but it doesn't fire if the user clicks somewhere that doesn't take keyboard focus'
'Private Sub FertilizerCombinationContainer_IsKeyboardFocusWithinChanged(sender As Object, e As System.Windows.DependencyPropertyChangedEventArgs) Handles FertilizerCombinationContainer.IsKeyboardFocusWithinChanged'
'    If FertilizerCombinationContainer.IsKeyboardFocusWithin = False Then'
'        FertilizerCombinationContainer.BindingGroup.ValidateWithoutUpdate()'
'        If Validation.GetErrors(FertilizerCombinationContainer).Count = 0 Then'
'            FertilizerCombinationContainer.BindingGroup.CommitEdit()'

'            Dim bg As BindingGroup = FertilizerCombinationContainer.BindingGroup'
'            Dim fertilizerCombo As FertilizerCombination = bg.Items(0)'
'            Dim proposedNitrogen As Integer'
'            Dim proposedPhosphorous As Integer'
'            Dim proposedPotassium As Integer'
'            Try'
'                proposedNitrogen = bg.GetValue(fertilizerCombo, "Nitrogen")'
'                proposedPhosphorous = bg.GetValue(fertilizerCombo, "Phosphorous")'
'                proposedPotassium = bg.GetValue(fertilizerCombo, "Potassium")'
'                ''there was a change: set it'
'                fertilizerCombo.SetFertilizerCombination(proposedNitrogen, proposedPhosphorous, proposedPotassium)'
'            Catch noValue As System.Windows.Data.ValueUnavailableException'
'                ''a binding was not properly bound yet'
'            End Try'
'        End If'
'    End If'

'End Sub'

End Class 
```

如果您在处理 FertilizerCombinationContainer 的 LostFocus 事件的方法上放置一个断点，您会注意到当您选择其中一个 ComboBoxes 时会触发它，即使它是 FertilizerContainer 元素的子元素。

谢谢，

-弗林尼

# android - 如何清除 android 默认浏览器的缓存、cookie、历史记录、表单、密码？

> ID：16063824
> 
> 赞同：2
> 
> 时间：2013-04-17T15:13:56.597
> 
> 标签：android

我正在寻找一种方法来清除 android 默认浏览器的缓存、cookie、历史记录、表单和密码。

我试过这些方法：

```
Browser.clearHistory(getContentResolver());
Browser.clearSearches(getContentResolver()); 
```

但他们并没有清除我想要的一切。

```
public class foo extends Browser
{
    ...
    dir = getCacheDir();
    // delete that directory including children... 
```

我使用此方法清除缓存，但它不起作用。

请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:32:40.817

您清除浏览器缓存的意图是什么？这个很重要。

除非您正在创建专门用于清除这些数据的应用程序，否则不建议随意删除用户的浏览数据。

另外，请记住，Android 上也存在其他浏览器。（铬，歌剧）

这篇文章[1] 提供了删除浏览器缓存的方法。

[1] - [Android Webview - 彻底清除缓存](https://stackoverflow.com/q/2465432/2147253)

# android - Android SQLite External Query Tool

> ID：16063827
> 
> 赞同：0
> 
> 时间：2013-04-17T15:14:06.290
> 
> 标签：android, sqlite, android-sqlite

Is there a way to connect to the SQLite database while the emulator is running and do manual queries against the database?

The following is a basic sequence of steps I'm looking to achieve:

1.  Query user table.
2.  Add a user via the program.
3.  Query user table to verify add successful.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:25:56.493

是的，甚至[在 Android 开发者网站上](http://developer.android.com/tools/help/adb.html#sqlite)也有指南。

> 在 adb 远程 shell 中，您可以使用 sqlite3 命令行程序来管理由 Android 应用程序创建的 SQLite 数据库。

请注意，您还可以使用 DDMS 从模拟器中复制数据库文件，然后使用[SQLiteStudio](http://sqlitestudio.pl/)等工具对其进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T23:06:05.210

This is an old question but if anyone still looking for this then Facebook Stetho is the best tool for debugging DB related stuff: [http://facebook.github.io/stetho/](http://facebook.github.io/stetho/)

Only downside is that you need to add a couple of line to your gradle script and application class. But well worth it.

# performance - Excel在宏期间没有响应

> ID：16063828
> 
> 赞同：2
> 
> 时间：2013-04-17T15:14:07.633
> 
> 标签：performance, excel, vba

我有一个在 24/7 连续循环上运行的宏。电脑偶尔会死机，但excel代码没有错误。该代码使用以下内容以有效运行：

```
DoEvents
Application.DisplayAlerts = False
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
startagain:
'code
'calculations, alerts, and screen are updated
GoTo startagain 
```

我也在使用我认为是一种有效的复制和粘贴方法（大部分代码是粘贴值和公式）：

```
Length = Range("C1").Value
Set rng = Sheets("Linked Data").Range("A2:AA" & Length)
Range("A2").Value = rng.Value 
```

对于 EXCEL.exe，我已将计算机上的处理器优先级更改为“高”，我已将计算机性能设置为最高性能，我已禁用所有不必要的加载项，并且我已关闭自动恢复保存。

尽管有上述所有情况，计算机有时会冻结并变得无响应。有谁知道可以做些什么来提高可靠性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:36:14.093

避免 Goto 并使用**Application.OnTime 方法**重复运行程序。

您还可以考虑创建一个自动化插件，这可能会导致性能提升作为其编译代码。

请参考此[链接](http://www.cpearson.com/excel/AutomationAddIns.aspx)

您也可以参考此链接以获取性能改进[链接](http://www.excelitems.com/2010/12/optimize-vba-code-for-faster-macros.html)

# php - 增加数据库表名

> ID：16063829
> 
> 赞同：0
> 
> 时间：2013-04-17T15:14:09.483
> 
> 标签：php, mysql, mysqli

我正在寻找创建一个 PHP 脚本，该脚本在数据库中创建一个新表，该表将绑定到一个标签，然后在表中会有与标签状态相关的数据行。但是，我不确定如何让 PHP 脚本（或 MySQL）增加表的名称。我所能找到的只是关于行的自动递增列的很多细节。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:22:12.590

你这样做是错的。如果您有脚本在项目运行阶段创建和删除常规表，这通常表明设计不佳。

如果您热衷于 OOP，您可以考虑使用类定义之类的表，并将每一行作为对象（或实体，如果您愿意）——我知道这是一个延伸，但它有一些相似之处。

花一些时间阅读有关数据库规范化和数据库设计的信息，这个项目和之后的每个人都将比花时间研究当前面临的问题的可行解决方案受益得多。

# opengl - switching between textures loaded with SOIL

> ID：16063830
> 
> 赞同：2
> 
> 时间：2013-04-17T15:14:10.227
> 
> 标签：opengl, textures, soil

I'm attempting to load two textures and then switch between the two in my display function. I am using the SOIL library to load the textures as such:

```
tex_2 = SOIL_load_OGL_texture
    (
            "s9.png",
            SOIL_LOAD_AUTO,
            SOIL_CREATE_NEW_ID,
            SOIL_FLAG_MIPMAPS | SOIL_FLAG_COMPRESS_TO_DXT
    );

tex_1 = SOIL_load_OGL_texture
    (
            "s8.png",
            SOIL_LOAD_AUTO,
            SOIL_CREATE_NEW_ID,
            SOIL_FLAG_MIPMAPS | SOIL_FLAG_COMPRESS_TO_DXT
    ); 
```

And then I use

```
glBindTexture(GL_TEXTURE_2D, tex_1) 
or
glBindTexture(GL_TEXTURE_2D, tex_2); 
```

To switch between the two. The problem is I must be loading them incorrectly and I'm not sure how. Whichever texture I load in last (tex_1 in the code above) is the the texture that I get for both tex_1 and tex_2 when I try to switch with glBindTexture. Any ideas?

Before loading the teaxtures I set up blending and turn on texture and sprites

```
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE);
glEnable(GL_TEXTURE_2D);
glEnable(GL_POINT_SPRITE);
glTexEnvi(GL_POINT_SPRITE, GL_COORD_REPLACE, GL_TRUE);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE); 
```

Then in my display function, I loop over all my points which I want to draw and attempt to change the current texture before drawing the point with glVertex3f:

```
for(int i=0; i<num_particles; i++)
{
    //select texture to use
    if(class[i] == 2.0f)
        glBindTexture(GL_TEXTURE_2D, tex_2);
    else
        glBindTexture(GL_TEXTURE_2D, tex_1);

    glVertex3f(posn[3*i], posn[3*i+1], posn[3*i+2]);
} 
```

The goal is I have two types of points and the sprite to be drawn at each point depends on the class the point is in

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:48:45.643

```
for(int i=0; i<num_particles; i++)
{
    //select texture to use
    if(class[i] == 2.0f)
        glBindTexture(GL_TEXTURE_2D, tex_2);
    else
        glBindTexture(GL_TEXTURE_2D, tex_1);

    glVertex3f(posn[3*i], posn[3*i+1], posn[3*i+2]);
} 
```

你不能[`glBindTexture()`](http://www.opengl.org/sdk/docs/man2/xhtml/glBindTexture.xml#errors)在一`glBegin()/glEnd()`对内跟注：

> `GL_INVALID_OPERATION`如果在 的执行和 的相应执行`glBindTexture`之间执行，则生成.`glBegin``glEnd`

最后一次*成功* `glBindTexture()`可能是在最近的`SOIL_load_OGL_texture()`通话中。这就是为什么`tex_1`和`tex_2`似乎包含相同的纹理数据：`tex_2`永远不会反弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:12:38.530

正如之前的答案：您不能在 glBegin/glEnd 之间更改纹理。

那你能做什么？

*   按材质对粒子进行排序……在这种情况下，按纹理排序。设置第一个纹理，绘制粒子（glBegin/glEnd），然后设置第二个纹理并绘制剩余的粒子。
*   使用纹理图集 - [http://en.wikipedia.org/wiki/Texture_atlas](http://en.wikipedia.org/wiki/Texture_atlas)。这是一些更高级的用法：[http ://www.popcornfx.com/wiki/index.php/Particle_tutorial_smoke](http://www.popcornfx.com/wiki/index.php/Particle_tutorial_smoke)
    *   这样你将拥有一个纹理，但你必须设置不同的纹理坐标......

# ssis - 带有文本限定符的批量导入任务

> ID：16063831
> 
> 赞同：0
> 
> 时间：2013-04-17T15:14:10.993
> 
> 标签：ssis

SSIS 批量导入数据转换行/列分隔符定义。尝试从 csv 文件导入到 sql 表。完成导入数据/值后如下

```
Col1 col2 col3  
"XXX" "BBN" "BBB"  
"XXX" "BBN" "BBB"  
"XXX" "BBN" "BBB" 
```

数据/值用双引号括起来。我怎样才能解决这个问题。

csv 文件的连接管理器有文本限定符：" ，标题行分隔符有 {CR}{LR} 不幸的是批量导入没有文本限定符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-17T20:15:39.833

这是一种设置 XML 格式文件以处理带双引号的 CSV 的方法：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="0" xsi:type="CharFixed" LENGTH="1"/>
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="&quot;,&quot;" MAX_LENGTH="12"/>
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="&quot;,&quot;" MAX_LENGTH="38"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="&quot;,&quot;" MAX_LENGTH="50" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="&quot;,&quot;" MAX_LENGTH="11" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="SequenceID" xsi:type="SQLINT"/>
  <COLUMN SOURCE="2" NAME="TransactionID" xsi:type="SQLUNIQUEID"/>
  <COLUMN SOURCE="3" NAME="Product_Name" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="4" NAME="Product_Code" xsi:type="SQLVARYCHAR"/>
 </ROW>
</BCPFORMAT> 
```

如果您想处理管道分隔，请更改`"&quot;,&quot;"`为`"&quot;|&quot;"`

# ruby-on-rails - 如何侧面加载当前范围的序列化？

> ID：16063833
> 
> 赞同：3
> 
> 时间：2013-04-17T15:14:12.460
> 
> 标签：ruby-on-rails, json, serialization, active-model-serializers

我想用我的 json 响应附加当前范围的序列化。虽然当前范围可用于`ActiveModel:: Serializer`，但它不一定与正在序列化的模型相关联；所以我不确定如何包含它。

我的第一直觉是创建一个合并模型序列化和范围序列化的包装器。我认为这个包装器会打破一些约定。

是否有侧面加载此上下文的模式？

# integration-testing - 使用实验室管理运行单元/集成测试

> ID：16063836
> 
> 赞同：1
> 
> 时间：2013-04-17T15:14:18.863
> 
> 标签：integration-testing, mstest, lab-management

我们有一个完整的实验室管理环境，在夜间构建中运行 Coded UI 测试。我们试图实现的是在所有 Coded UI 测试之前运行我们的集成测试（带有 SQL 连接的常规 TestMethod()），以验证我们的 db 脚本是否正确执行，并且没有导致任何问题的新更改。

到目前为止，我已经找到了一种通过 .testrunco​​nfig 远程执行测试的方法。这种方法的问题是无法选择连接到团队项目的测试控制器，所以我想这仅对在实验室管理之外的物理机器上运行测试有用？

一种选择似乎是为每个集成测试创建一个测试用例，它应该与 UI 测试一起运行，但感觉管理数百个测试用例只是为了运行集成测试需要大量维护。此外，最好将不同类型的测试的测试运行完全分开。

有没有什么简单的方法可以实现我完全错过的？还是我必须修改实验室构建模板才能部署和运行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:04:02.360

> 我想这仅对在实验室管理之外的物理机上运行测试有用？

如果您通过远程运行测试`.testrunconfig`，则必须将*测试代理*连接到另一个未连接到团队项目的*测试控制器。*不幸的是，据我所知，在实验室管理下运行的环境是不可能的。

这种方法怎么样：

1.  创建一个包含所有集成测试的*有序测试。*
2.  创建一个新的*测试用例*“集成测试”并通过有序测试自动化它因此您不必维护数百个测试用例。如果您想对集成测试进行分组，您还可以创建多个*有序测试*，然后创建一个包含它们的“主”*有序测试。*这种方式将更容易分析测试结果，特别是如果您有很多测试。
3.  让**集成测试**作为**现有夜间构建**的一部分运行。
4.  创建一个**新的** *构建定义*，它不会开始构建，而是使用最后一次成功的夜间构建，并让您的*CodedUI*测试使用*Lab Build Template*运行。

这样，您将对不同类型的测试进行不同的测试运行。

唯一的缺点是您必须“同步”这两个构建......您可以稍后安排第二个构建，这样您就可以确保第一个构建完成。

我知道这不是很完美……但这样你就可以轻松实现你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:31:20.043

我不确定是否有替代解决方案，但是在我目前正在处理的项目中，我们在 Nightly Build的 Process 选项*（Process>Basic>AutomatedTest>TestAssembly）下设置了单元和集成测试程序集。*
正如您所建议的，这是通过稍微更改**默认构建过程模板**（不是实验室默认值）来实现的（我认为这是标准的，但已经有一段时间了）。

# vb.net - Delete a pdf file in vb.net only if it is not open in vb.net?

> ID：16063838
> 
> 赞同：1
> 
> 时间：2013-04-17T15:14:19.457
> 
> 标签：vb.net

In my VB.net application I am opening a PDF file using

```
System.Diagnostics.Process.Start("c:\TEMP\MyFile.pdf"). 
```

I would like to safely delete this file in some event if it is not open.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:40:51.317

只需尝试删除文件：

```
System.IO.File.Delete("THEFILE") 
```

如果文件打开了，这行代码会抛出异常。`Try`您可以（并且应该）通过用and`Catch`块包装它来处理这种情况。例如：

```
Try
    ' Attempt to delete the file. This will succeed unless the file is in use.
    System.IO.File.Delete("THEFILE")
Catch ex As IOException
    ' The file was in use, so it cannot be deleted.
    ' Do something here...or nothing if you just want to ignore such a case.
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T01:11:17.983

如果文件未打开，您的问题是寻求帮助删除文件。即使他们这样做，您似乎也不喜欢给出的响应。

是否仅在不使用文件时才删除该文件？在这种情况下，您执行已提到的操作，您使用`Try... Catch`. 如果它抛出异常，那么它正在使用中 - 你不想删除它，否则你删除它。

但是，您给出的答复使您似乎无论如何都想删除它。请记住，在您将其加载到 vb 后，它被归类为正在使用，当您声称已使用完毕时，您需要将其丢弃。它不会在每次空闲时都被处理掉。如果您想使用它，请使用该`.Dispose`方法或将持有它的任何内容设置为`Nothing`.

# python - Scipy: Pearson's correlation always returning 1

> ID：16063839
> 
> 赞同：11
> 
> 时间：2013-04-17T15:14:19.650
> 
> 标签：python, statistics, scipy, correlation, pearson

I am using Python library scipy to calculate Pearson's correlation for two float arrays. The returned value for coefficient is always 1.0, even if the arrays are different. For example:

```
[-0.65499887  2.34644428]
[-1.46049758  3.86537321] 
```

I am calling the routine in this way:

```
r_row, p_value = scipy.stats.pearsonr(array1, array2) 
```

The value of `r_row` is always 1.0\. What am I doing wrong?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T15:47:44.350

[Pearson 的相关系数](http://en.wikipedia.org/wiki/Correlation_and_dependence)是衡量您的数据与线性回归拟合的程度。如果你只提供两个点，那么有一条线正好穿过这两个点，因此你的数据完全符合一条线，因此相关系数正好是 1。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T15:24:15.700

我认为 pearson 相关系数总是返回`1.0`或者`-1.0`如果每个数组只有两个元素，因为你总是可以通过两个点画一条完美的直线。尝试使用长度为 3 的数组，它会起作用：

```
import scipy
from scipy.stats import pearsonr

x = scipy.array([-0.65499887,  2.34644428, 3.0])
y = scipy.array([-1.46049758,  3.86537321, 21.0])

r_row, p_value = pearsonr(x, y) 
```

结果：

```
>>> r_row
0.79617014831975552
>>> p_value
0.41371200873701036 
```

# java - Checking at runtime if a class has a specific constructor that is using generics

> ID：16063840
> 
> 赞同：6
> 
> 时间：2013-04-17T15:14:24.103
> 
> 标签：java, generics, reflection, constructor, introspection

Hello all :) I'm trying to chose the right constructor in a class. Here is the code:

```
Constructor[] constructors = targetClass.getConstructors();
Constructor goodConstructor = null;
for (Constructor constructor : constructors) {
    Class[] parameterTypes = constructor.getParameterTypes();
    if (parameterTypes.length = 1 && parameterTypes[0].equals(Map.class)) {//here
        goodConstructor = constructor;
    }
} 
```

I want to switch from `Map.class` to `Map<String, String>.class`. I vaguely remember that generics are for compile time only, so this is why the compiler is complaining. How can I check at runtime that the class has the right constructor?

Best regards

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T15:26:43.533

您想`getGenericParameterTypes()`改用：

```
public class FindConstructor {

    public static void main(String[] args) throws IOException {
        for (Constructor<?> constructor : MyClass.class.getConstructors()) {
            Type[] parameterTypes = constructor.getGenericParameterTypes();
            if (parameterTypes.length == 1 && parameterTypes[0] instanceof ParameterizedType) {
                ParameterizedType parameterizedArg = (ParameterizedType) parameterTypes[0];
                if (parameterizedArg.getRawType() != Map.class) {
                    continue;
                }

                if (parameterizedArg.getActualTypeArguments()[0] != String.class) {
                    continue;
                }

                if (parameterizedArg.getActualTypeArguments()[1] != String.class) {
                    continue;
                }
            }
            System.out.println("found constructor " + constructor);
        }
    }
}

class MyClass {
    public MyClass(Map<String, String> map) {
    }
} 
```

现在，如果您更改`MyClass()`为采取 a`Map<String, Integer>`它将不再匹配。

使用 Guava 变得更容易[`TypeToken`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html)，它利用匿名类来创建`Type`我们可以比较的参数化。

```
Type mapStringString = new TypeToken<Map<String, String>>(){}.getType();
for (Constructor<?> constructor : MyClass.class.getConstructors()) {
    Type[] parameterTypes = constructor.getGenericParameterTypes();
    if (parameterTypes.length == 1 && parameterTypes[0].equals(mapStringString)) {
        System.out.println("found constructor " + constructor);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:33:16.013

类在 java 中不是这样工作的。类不能在运行时参数化；只有实例。对于 Map 的每个通用实现，只有一个`Map.class`，而不是（您似乎已经假设）一个单独的类。以下代码可能有助于澄清这一点：

```
 Map<String,String> m1 = new HashMap<>();
    Map<Object,Long> m2 = new HashMap<>();

    System.out.println(m1.getClass() == m2.getClass());//prints "true" 
```

# javascript - Lazy load hasMany association in ExtJS

> ID：16063844
> 
> 赞同：1
> 
> 时间：2013-04-17T15:14:46.480
> 
> 标签：javascript, extjs, extjs4

I'm trying to implementing Lazy loading in ExtJS 4 like this example: [http://dev.sencha.com/deploy/ext-4.0.0/examples/data/associations.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/data/associations.html) using this Code:

```
/* Models */
Ext.define('Post', { 
    extend: 'Ext.data.Model', 
    fields: ['title'], 
    proxy: {
        type: 'ajax', 
        url: 'http://example.com/post.json'
    }
});

Ext.define('User', { 
    extend: 'Ext.data.Model', 
    fields: ['name'], 
    hasMany: 'Post', 
    proxy: { 
    type: 'ajax', 
        url : 'http://example.com/user.json'
    } 
});

/* Load User and Posts */
User.load(1, {
    success: function(user) {
        var test = user.posts();
        test.on('load', function(me) {
            console.log(me.getCount()); /* THIS is always 0?! */
        });
        test.load();
    }
});

/* Returned JSON Data */

/* User */
[{"name":"blalala"}]

/* Posts */
[{"title":"dfgdfgdgd"}] 
```

but the returned Posts-Store is always empty (0 Records). You can check my JSFiddle here: [http://jsfiddle.net/lenoxDoe/n6Xbw/2/](http://jsfiddle.net/lenoxDoe/n6Xbw/2/)

Any advice would be helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:05:54.470

~~1\. hasMany 属性是一个数组~~

1.  您需要在 hasMany 关系上设置[外](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.association.HasMany-cfg-foreignKey)键，并在 Post 上提供外键字段

# javascript - 使用 Google 闭包模板重写名为“default”的属性

> ID：16063846
> 
> 赞同：2
> 
> 时间：2013-04-17T15:14:51.950
> 
> 标签：javascript, google-closure-compiler, google-closure, google-closure-templates

在我发送到 Google Closure 模板的数据中，我有一个名为`default`. 我计划使用 Google Closure Compiler 编译 JavaScript 代码和 SoyToJsSrcCompiler 生成的代码。但问题是从模板生成的代码会阻止编译器重命名`default`属性。

这是模板代码：

```
/**
 * @param test
 */
{template .template}
    <div>{$test.a.b.default.c.d}</div>
{/template} 
```

这是生成的代码：

```
/**
 * @param {Object.<string, *>=} opt_data
 * @param {(null|undefined)=} opt_ignored
 * @return {string}
 * @notypecheck
 */
test.template = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.test.a.b['default'].c.d) + '</div>';
}; 
```

有什么办法可以得到：

```
opt_data.test.a.b.default.c.d 
```

而不是：

```
opt_data.test.a.b['default'].c.d 
```

或任何其他可以让我的财产命名的方式`default`？

现在，编译`default`器重命名我的 JavaScript 代码中的属性，但不会在 SoyToJsSrcCompiler 生成的代码中重命名它，因为此代码使用引用的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:22:26.573

`default`是 JavaScript 中的半保留字。它在`switch case`语句中使用：

```
switch ( variable ) {
    case a:
        break;
    case b:
        break;
    default:
        break;
} 
```

它在对象旅行中是完全安全的，但不是作为范围级别的变量：

```
object.some.thing.else.default; 
```

考虑这个对象树：

```
var a = {
    b: {
        c: {
            "1": {
                "default": 2
            } 
        }
    }
}; 
```

您可以通过以下方式获取值 ( `2`)：

```
a.b.c[1].default // 2 
```

但是也：

```
a["b"]["c"]["1"]["default"] // 2 
```

JSHint 会在非 qoute 需要的情况下引用对象旅行时发出警告。在这种情况下`["b"]`，`["c"]`，`["default"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:57:18.600

目前似乎没有任何支持的方式来做到这一点。我将属性的名称从更改`default`为可以正确重命名的其他名称。

# amazon-web-services - 更改 sshd_config 文件后无法访问 Amazon EC2 实例（死锁）

> ID：16063848
> 
> 赞同：2
> 
> 时间：2013-04-17T15:14:56.183
> 
> 标签：amazon-web-services, amazon-ec2

我试图在不使用密钥对的情况下访问 Amazon EC2 实例（我正在使用 Dreamweaver 进行一些测试）所以，我有一个更改 sshd_config 文件的奇妙想法。

> 须藤纳米 /etc/ssh/sshd_config

我将 PasswordAuthentication 行更改为：

> 匹配用户 ubuntu
> 
> > ```
> >  PasswordAuthentication yes 
> > ```

重新启动后，我得到了一个悲伤的惊喜。我不能再访问我的机器了。更糟糕的是，我在这个实例上只有一个用户（ubuntu）。

我的问题是：

如果我无法访问我的终端，如何恢复原始设置（roolback sshd_config 文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:30:57.177

[失去对Amazon EC2](http://aws.amazon.com/ec2/)实例的访问权是一种常见的情况 - 在 Eric Hammond 的出色总结解决方案中解决了当您不知道原因时如何处理这种情况[：“我无法连接到我在 Amazon EC2 上的服务器”](http://alestic.com/2009/08/ec2-connectivity)。

但是，由于您现在已经知道问题与权限相关，因此您可以立即应用他各自的说明[Fixing Files on the Root EBS Volume on an EC2 Instance](http://alestic.com/2011/02/ec2-fix-ebs-root)，请参阅我对相关问题[Fixing Amazon EC2 Permissions](https://serverfault.com/questions/365587/fixing-amazon-ec2-permissions)的回答以获得简短摘要方法。

祝你好运！

# ruby-on-rails - 独角兽仅在生产中具有未定义的方法错误

> ID：16063849
> 
> 赞同：0
> 
> 时间：2013-04-17T15:14:56.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, ancestry

我的应用程序在使用 WEBrick 的开发模式和生产中运行良好。但在独角兽中，它只在开发模式下工作。一旦我尝试编辑或更新一个类别，我就会收到一个无方法错误。任何帮助表示赞赏，谢谢！

## 错误：

```
Started GET "/symbols/smoke" for 127.0.0.1 at 2013-04-17 08:06:02 -0700
Processing by CategoriesController#show as JS
  Parameters: {"id"=>"smoke"}
  Rendered layouts/_tabs.html.erb (2.9ms)
  Rendered categories/_meanings.html.haml (0.1ms)
  Rendered categories/_categorylist.html.haml (2.5ms)
  Rendered categories/_show-page.html.haml (13.5ms)
  Rendered categories/show.js.erb (17.1ms)
Completed 500 Internal Server Error in 45ms

ActionView::Template::Error (undefined method `map' for nil:NilClass):
    3:      %li.nav-header a parent of:
    4:      - if @category.has_children?
    5:          
    6:          = list_categories(@children)
    7:      %li
    8:          = link_to new_category_path(:parent_id => @category, :view => "show"), :remote => true do
    9:              Add Child
  app/helpers/categories_helper.rb:21:in `list_categories'
  app/views/categories/_categorylist.html.haml:6:in `_app_views_categories__categorylist_html_haml__3404053025802473956_70332682747260'
  app/views/categories/_show-page.html.haml:48:in `_app_views_categories__show_page_html_haml__1783905832676874426_70332684530780'
  app/views/categories/show.js.erb:8:in `_app_views_categories_show_js_erb___3948970986596034947_70332684487680'
  app/controllers/old_categories.rb:96:in `show' 
```

## 类别控制器：

```
class CategoriesController < ApplicationController
  helper :lego
  helper :meanings

  def index
    @categories = Category.all
    if params[:id]
      @categories = Category.find(params[:id])                      #if params[:id]
      @categories = @categories.children.arrange(:order => 'name')
    elsif params[:view] == "alpha"
      @alphabet   = Category.all.group_by{|c| c.name[0]}
      @see_kids   = false
      @categories = @categories.sort(:name => "ASC")                            if !params[:letter]
      @categories = @categories.where(name: eval("/^#{params[:letter]}/i")).sort(:name => "ASC")     if params[:letter]
    else
      # @categories = Category.all
      @categories = @categories.arrange(:order => 'name')               #if params[:view] != "list"
    end

    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @categories }
    end
  end

  def reorder
    if Rails.env != "production" && !request.xhr?
      flash[:info] = "Currently in #{Rails.env} mode."
    end
    @categories = Category.arrange(:order => 'name')
    @new = Category.new(:parent_id => params[:parent_id])
    @next = Category.count
    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @categories }
    end
  end

  def sort
    params[:category].each do |id, attr|
      thisCat = params[:category][id]
      @category = Category.where(:_id => id).first
      if thisCat.nil? || thisCat == 'null'
        @category.parent_id = nil
        @category.name_tag  = @category.name
      else
        @category.parent_id = thisCat.to_s
        @category.name_tag = "#{@category.name} <small>(#{@category.parent.name})</small>"
      end
      @category.save
    end
  end

  def gallery
    @categories = Category.arrange(:order => 'name')
    @category = Category.find(params[:id])
    @siblings = Category.siblings_of(params[:id])
    respond_to do |format|
      format.html # index.html.erb
      format.js
      format.json { render json: @category }
    end
  end

   def show
     @category    = Category.find(params[:id])
     @updater     = User.find(@category.user) || nil
     get_meanings(@category)
     # @meanings    = @category.meanings 

     respond_to do |format|
       format.html # show.html.erb
       format.js
       format.json { render json: @category }
     end
   end

  def search
    @categories = Category.arrange(:order => 'name')
    @category = Category.find(params[:id])

    @meanings = @category.meanings
    @meanings = @meanings.where(:beliefs => params[:beliefs])         if params[:beliefs]
    @meanings = @meanings.where(:cultures => params[:cultures])       if params[:cultures]
    @meanings = @meanings.where(:connotation => params[:connotation]) if params[:connotation]
    @meanings = @meanings.where(:user => params[:user])               if params[:user]    
  end

  def new
    @new = Category.new(:parent_id => params[:parent_id])
    @form_state   = "new"
    respond_to do |format|
      format.html
      format.js
      format.json
    end
  end

  def edit
    @category = Category.find(params[:id])
    respond_to do |format|
      format.html
      format.js
      format.json
    end
  end

  def create
    @new          = Category.new(params[:category])
    @new.user     = current_user
    @new.name_tag = @new.name
    @new.name_tag = "#{@new.name} <small>#{@new.parent.name}</small>"       if @new.parent

    respond_to do |format|
      if @new.save
        get_meanings(@new)
        flash[:success] = "<h4><i class=icon-ok></i> '#{@new.name}' was successfully created.</h4>"
        format.html { redirect_to @new }
        if session[:form_type] == "show"
          format.js {redirect_to @new }
        else
          format.js
        end
        format.json { render json: @categories, status: :created, location: @new }
      else
        format.html { render action: "new" }
        format.js 
        format.json { render json: @new.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @categories  = Category.arrange(:order => 'name')
    @category           = Category.find(params[:id])
    @category.user      = current_user 
    @category.name_tag  = params[:category][:name]
    # @siblings           = Category.siblings_of(params[:id])
    @category.name_tag  = "#{params[:category][:name]} <small>#{@category.parent.name}</small>"       if @category.parent
    params[:view]       = "reorder"           if session[:form_type] == "reorder"

    flash[:success] = "<h4><i class=icon-ok></i> #{@category.name} was successfully updated.</h4>"
    get_meanings(@category)
    respond_to do |format|
      # get_meanings(@category)
      # @similar     = Category.where(:name => params[:category][:name])
      if @category.update_attributes(params[:category])
        format.html { redirect_to @category}
        if session[:form_type] == "show"
          format.js #{redirect_to @category }
        else
          format.js 
        end
        format.json { head :no_content }
      else
        # get_meanings(@category)
        flash[:error] = "<h4>Unable to update #{@category.name}</h4>"
        format.html { render action: "edit", error: "Unable to update '#{@category.name}'", status: :unprocessable_entity }
        format.json { render json: @category.errors, status: :unprocessable_entity }
        format.js
      end
    end
  end

  def destroy
    @category = Category.find(params[:id])
    @category.destroy
    flash[:alert] = "<h4><i class=icon-warning-sign></i> Warning. You have deleted the category '#{@category.name}'.</h4>".html_safe
    respond_to do |format|
      format.html { redirect_to categories_url }
      format.json { head :no_content }
      format.js 
    end
  end

  def has_sidebar?
    self.has_children?
  end
private
  def get_meanings(category)
    @categories  = Category.arrange(:order => 'name')
    @children    = category.children.order_by(name: :asc) || []
    @siblings    = category.siblings.order_by(name: :asc) || []
    @similar     = Category.where(:name => category.name) || []
    @meanings    = category.meanings 
    @belief_list    = []
    @culture_list   = []
    @contributors   = []
    @connotations   = []
    for meaning in @meanings
      for belief in meaning.beliefs
        @belief_list << belief 
      end
      for culture in meaning.cultures
        @culture_list << culture
      end
      @connotations << meaning.connotation
      @contributors << meaning.user
    end
    @beliefs      = @belief_list.uniq
    @cultures     = @culture_list.uniq
    @contributors = @contributors.uniq
    @connotations = @connotations.uniq
  end
end 
```

## 显示页面：

```
.row
    .span12
        = breadcrumb(@category)
.row
    %section.span10.pull-right
        .row
            %header.span10
                .hero-unit.relative
                    .row
                        - if @category.image?
                            %figure.span3
                                = image_tag @category.image_url

                        .span5
                            %h1
                                = raw @category.name_tag

                            %p= @category.description
                            - if @similar.any?
                                - unless @similar.first.id == @category.id && @similar.last.id == @category.id

                                    See also: 

                                -@similar.each do |ref|
                                    -unless ref.id == @category.id
                                        = link_to raw(ref.name_tag), ref, :remote => true

                            -if @updater
                                .updated-by
                                    Last updated by 
                                    = @updater.name

        .row
            .span10.no-history
                #meaning-controls.row
                    .span2
                        = link_to [:new, @category, :meaning], :class => "btn", remote: true do
                            Add Meaning
                            %i.icon-plus
                    - if @meanings.any?
                        = render 'sorting-hat'
                #meanings.no-history
                    -if @meanings
                        = render 'meanings'

    %aside.span2.float-desktop
        = render 'categorylist' 
```

## 帮手：

```
 def list_categories(categories) 
      categories.map do |category|
        content_tag(:li) do
          link_to h(category.name), category, :remote => true
        end
      end.join.html_safe
  end 
```

# 更新：

逐行搜索我的`production.rb`文件，发现导致此错误的行是`config.cache_classes = false`. 只要我设置它，`true`它就会正常保存。任何想法为什么这会导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T18:20:25.233

`config.cache_classes`我暂时关机了。这个问题与我没有正确过期我的缓存有关。在专注于清理和重构我的代码之后，我会弄清楚并解决它。

再次开始关注缓存后，我将更新此答案。

# c# - Trouble Saving Excel ony my computer using c#

> ID：16063850
> 
> 赞同：0
> 
> 时间：2013-04-17T15:14:58.290
> 
> 标签：c#, excel, ms-office

I have a app that should create a excel spreadsheet and save it. The app works runs without any problems on other machines, including my bosses computer(he has the same ver of office and VS as me). I don't know if this is relevant but I have office 2013 and VS 2012\. Edit I'm trying to save as a .xls (exel 97').

```
 SNIPIT
 public static bool XLSaveAs(ref Excel._Workbook oWBTemplate, string FileName)
    {
        System.IO.FileInfo x = new System.IO.FileInfo(FileName);
        if (x.Exists)
        {
            try
            {
                x.Delete();
            }
            catch
            {
                MyControls.MsgFunctions.WarningMsg("Make sure " + FileName + " is not open.");
                return false;
            }
        }

        try
        {
           if(FileName.Contains(".xlsx"))
                oWBTemplate.SaveAs(FileName);
            else
                //Error occurs here
                oWBTemplate.SaveAs(FileName, Excel.XlFileFormat.xlExcel8);

        }
        catch
        {
            MyControls.MsgFunctions.WarningMsg("Unable to save " + FileName);
            return false;
        }
        return true;
    } 
```

If I take out the try catch statement this is the error I get.

```
ERROR
COMException as unhandled
Exception from HRESULT: 0x800A03EC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:18:59.837

我找到了一个适合我的解决方案。我也有不正确的权限来编辑 excel 正在编写的文件夹。向文件夹添加完全控制解决了该问题。如果您遇到类似问题，命令 oWBTemplate.SaveAsCopy() 也会有所帮助。

# c# - 在 Visual Studio 中跟踪事件

> ID：16063857
> 
> 赞同：0
> 
> 时间：2013-04-17T15:15:18.143
> 
> 标签：c#, wpf, visual-studio-2010, debugging

我有一个 Visual Studio WPF C# 解决方案，其中包含需要维护的数百个类和项目。我想追踪软件中的问题，但不知道该类在解决方案中的位置。有没有办法在 Visual Studio 中跟踪事件以帮助我跟踪此类？

例如，假设我启动程序，然后转到出现问题的程序部分。然后我点击一个按钮 100 次。是否有输出可以告诉我该事件在哪里被触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:20:51.037

对于 WPF 应用程序，您可以使用[Snoop](http://snoopwpf.codeplex.com/)查找控件的类名。启动后，您可以将目标标记拖到需要的控件上，它将显示在控件树中，并显示其所有属性。

它还可以显示 WPF 控件中发生的所有事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:18:54.033

使用[Log4Net](http://logging.apache.org/log4net/)以不同级别记录您的事件，例如警告、信息和错误。另请参阅[这篇文章](http://sadi02.wordpress.com/2008/06/29/log4net-tutorial-in-c-net-how-can-i-show-log-in-a-file/)以获取快速教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:30:53.993

运行程序。

![在此处输入图像描述](https://i.stack.imgur.com/Y4vIu.png)

程序运行后返回 Visual Studio 并单击暂停（或按`Ctrl`+ `Alt`+ `Break`）。

![在此处输入图像描述](https://i.stack.imgur.com/U2O1f.png)

然后单击进入（或按`F11`）。

![在此处输入图像描述](https://i.stack.imgur.com/VbHpj.png)

您的应用将重新获得焦点。

触发事件。

焦点将转到 Visual Studio，其中将突出显示事件处理程序代码。

![在此处输入图像描述](https://i.stack.imgur.com/aW056.png)

# java - CacheBuilder和redis一起使用

> ID：16063859
> 
> 赞同：1
> 
> 时间：2013-04-17T15:15:20.750
> 
> 标签：java, redis, guava

Guava`CacheBuilder`只使用一个 JVM。我想使用该`CacheBuilder`接口从.`redis``redis``MySQL`

我该如何解决？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:58:47.663

为什么不试试 Spring Cache 框架呢？它对 Redis 做了很好的包装。

# c# - SignTool 错误：访问被拒绝

> ID：16063860
> 
> 赞同：3
> 
> 时间：2013-04-17T15:15:21.250
> 
> 标签：c#, dll, runtime-error, assembly-signing, signtool

**我正在尝试使用SignTool**使用 cmd.exe 中的以下代码使用 pfx 文件对外部 dll 进行签名

**SignTool 签名 /f MyCert.pfx /p MyPassword MyControl.dll**

但是，我不断收到以下错误消息。

```
Done Adding Additional Store
SignTool Error: Access is denied.
SignTool Error: An error occured while attempting to sign: MyControl.dll

Number of errors: 1 
```

我到处寻找，但找不到正确的解决方案。我尝试了此处列出的两个答案，**[SignTool error: Access is denied](https://stackoverflow.com/questions/6532468/signtool-error-access-is-denied)**，但不断收到相同的错误。

[我尝试了使用 SignTool 对文件进行签名](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388170%28v=vs.85%29.aspx)中列出的所有命令，但每个命令都出现相同的错误。

我以管理员身份运行 cmd.exe，并且我拥有 SignTool.exe 文件夹的完全所有权。就我而言，它的**C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin**

我在这里想念什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-04T17:50:48.077

我还尝试了所有其他答案。在我的情况下，我试图签名的文件（EXE）被标记为只读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:21:31.920

也许在这里看[SignTool 错误：访问被拒绝](https://stackoverflow.com/questions/6532468/signtool-error-access-is-denied)

强私钥选项是 SignTool 对该用户失败的原因。不确定您是否启用了它？

# c++ - 函数返回指向指针的指针

> ID：16063869
> 
> 赞同：0
> 
> 时间：2013-04-17T15:15:38.457
> 
> 标签：c++, function, pointers, return

请看下面我的代码：

```
class SVMClassifier : public LibHAR
{
 public:
  ...
   //This is my function returning a pointer to pointer to svm_node structure
  svm_node** SVMFeatureExtraction(SkeData* inputData, int* pFrameNum, int* pFeatureNum, double wt);

  //This function calls SVMFeatureExtraction
  virtual bool FeatureExtraction(SkeData* inputData, const double* dataLabels = NULL, int labelNum = 0); //This function calls SVMFeatureExtraction
  ...
 private:
 svm_node** SVMNodes;
 int dataNum;
 ...
}

svm_node** SVMClassifier::SVMFeatureExtraction(SkeData* inputData, int* pFrameNum, int* pFeatureNum, double wt)
{
    *pFeatureNum = FEATURENUM;
    *pFrameNum = inputData->GetFrameSaved();
    svm_node** pNodes = new svm_node*[*pFrameNum];

    for (int i = 0; i < *pFrameNum; i++)
    {
        pNodes[i] = new svm_node[FEATURENUM + 1];
        for (int j = 0; j < FEATURENUM / 3; j++)
        {
            FEATURE_VEC* pVec = new FEATURE_VEC;
            if (!CalFeatureVector(inputData, i+1, j+1, pVec, wt))
                return NULL;

            pNodes[i][j*3].index = j*3 + 1;
            pNodes[i][j*3].value = pVec->x;

            pNodes[i][j*3 + 1].index = j*3 + 2;
            pNodes[i][j*3 + 1].value = pVec->y;

            pNodes[i][j*3 + 2].index = j*3 + 3;
            pNodes[i][j*3 + 2].value = pVec->z;

            delete pVec;
        }
        pNodes[i][FEATURENUM].index = -1;
        pNodes[i][FEATURENUM].value = 0;

    }
    return pNodes;
}

bool SVMClassifier::FeatureExtraction(SkeData* inputData, const double* dataLabels, int labelNum)
{

    CleanNodes();
    int n;
    SVMNodes = SVMFeatureExtraction(inputData, &dataNum, &n, actWeight);  //Error here!
        ...
} 
```

类方法`FeatureExtraction`调用另一个方法`SVMFeatureExtraction`，该方法返回一个指向指针的指针。我认为指针指向的内存是在堆中动态分配的，因为它是由 " `new`" 创建的。但是我在调​​试程序的时候，返回的地址`SVMFeatureExtraction`并不能成功分配给`SVMNodes`（SVMNodes总是“NULL”），虽然里面的内容`pNodes`是正确的。谁能告诉我代码有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:25:25.367

这可能是一个愚蠢的建议，但你绝对确定这部分永远不会发生吗？

```
if (!CalFeatureVector(inputData, i+1, j+1, pVec, wt))
    return NULL; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T15:22:44.950

```
*pFeatureNum = FEATURENUM;
    *pFrameNum = inputData->GetFrameSaved();
    svm_node** pNodes = new svm_node*[*pFrameNum]; 
```

这很奇怪，您尝试更改指针的值而不是指向的值。为什么你通过指针传递两个参数并在你的函数中重新初始化它？

试试这个：

```
pFeatureNum = FEATURENUM;
pFrameNum = inputData->GetFrameSaved();
svm_node** pNodes = new svm_node[pFrameNum];
for (int i = 0; i < pFrameNum; i++)
    {
        pNodes[i] = new svm_node[FEATURENUM + 1];
        for (int j = 0; j < FEATURENUM / 3; j++)
        {
            FEATURE_VEC* pVec = new FEATURE_VEC;
            if (!CalFeatureVector(inputData, i+1, j+1, pVec, wt))
                return NULL;

            pNodes[i][j*3].index = j*3 + 1;
            pNodes[i][j*3].value = pVec->x;

            pNodes[i][j*3 + 1].index = j*3 + 2;
            pNodes[i][j*3 + 1].value = pVec->y;

            pNodes[i][j*3 + 2].index = j*3 + 3;
            pNodes[i][j*3 + 2].value = pVec->z;

            delete pVec;
        }
        pNodes[i][FEATURENUM].index = -1;
        pNodes[i][FEATURENUM].value = 0;

    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T15:42:05.777

试试这个（对@Nagasaki的回答稍作修改）：

```
*pFeatureNum = FEATURENUM;
*pFrameNum = inputData->GetFrameSaved();
svm_node** pNodes = new svm_node[*pFrameNum];
for (int i = 0; i < *pFrameNum; i++)
    {
        pNodes[i] = new svm_node[FEATURENUM + 1];
... 
```

（并且，如果可行，请接受@Nagasaki 的回答，我将对其进行编辑，以便他们获得荣誉）

# vb.net - 使用 excel 工作表数据使用 vb.net 在应用程序中生成图表/图形

> ID：16063876
> 
> 赞同：3
> 
> 时间：2013-04-17T15:16:00.417
> 
> 标签：vb.net

如何使用 excel 工作表数据在使用 vb.net 的应用程序中生成图表/图形？

我有一个 listview 函数，它已经链接了 excel 数据，现在希望选择某些数据并创建一个显示结果的折线图。

在列表视图中，我将每个标题链接为一个字符串。

是否可以与 ListViewItem 或原始 Excel 工作表建立连接。我希望图表显示在已创建的一般申请表上，而不是在活动的 Excel 工作表中。

任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T15:51:05.307

您应该可以将列表视图中所需的任何数据与图表进行数据绑定。您能否详细说明您希望如何选择数据？这显示了数据绑定（只需传入两个数组）： http: [//msdn.microsoft.com/en-us/library/dd455475 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dd455475%28v=vs.110%29.aspx)

您可以有两个组合框，其中包含潜在 x 值的名称和潜在 y 值的名称，并在所选项目之一发生更改时更新图表。

# unity-container - AutoMapper 在运行大量测试时混淆了地图？

> ID：16063882
> 
> 赞同：1
> 
> 时间：2013-04-17T15:16:26.900
> 
> 标签：unity-container, automapper, mstest

我目前有一个使用 MSTest 运行器进行大约 1000 个单元/集成测试的解决方案。我在使用 AutoMapper 时遇到的问题是，当我让 VS 运行解决方案中的所有测试时，由于以下 automapper 异常，我会随机获得一些单元测试失败：

```
AutoMapper.AutoMapperMappingException: 

Mapping types:
String -> String
System.String -> System.String

Destination path:
CatalogResource.CultureCode

Source value:
en-US ---> System.InvalidCastException: Unable to cast object of type 'Model.Catalog' to type 'Model.CatalogResource'. 
```

在代码中，我没有 Catalog 到 CatalogResource 的映射，也没有尝试将它们相互映射。这种类型的异常不会发生在 PROD 中，不会发生在集成测试中，每次运行测试时都不会发生，当它发生时，总是不同的测试失败。此外，如果我只运行刚刚失败的测试，它们总是会通过。我很难始终如一地在本地复制它，但它在构建服务器上发生得更频繁，这很痛苦，因为它会阻止构建自动升级到下一个环境。

我也尝试将它添加到测试中，但它并没有解决问题：

```
 [ClassInitialize]
   public static void ClassInitialize(TestContext context)
   {
        Mapper.Reset();
   } 
```

有任何想法吗？我们已经有 4 个不同的人对此进行了尝试，但无济于事，所以我现在向你们伟大的人寻求帮助。

谢谢！

编辑：

我目前使用在服务的静态构造函数中调用的静态类来初始化配置。IE

```
static MyService()
        {
            AutoMapperBootstrapper.Initialize();
        }
...

internal static class AutoMapperBootstrapper
    {
 public static void Initialize()
        {
            ConfigureMappings();

            #if DEBUG
            Mapper.AssertConfigurationIsValid();
            #endif
        }
} 
```

编辑＃2：

今天在做一些修改时，我注意到这些随机故障只发生在`<IDataReader, something else>`地图上。例如：

```
 Mapper.CreateMap<IDataReader, Catalog>()
            .ForMember(m => m.CatalogID, opt => opt.MapFrom(src => src["CatalogID"]))               
            .ForMember(m => m.Title, opt => opt.MapFrom(src => src["Title"]))                   
            .ForMember(m => m.DateCreatedUTC, opt => opt.MapFrom(src => src["DateCreatedUTC"]))
            .ForMember(m => m.DateModifiedUTC, opt => opt.MapFrom(src => src["DateModifiedUTC"])) 
```

...

还不知道该怎么做，但它似乎很相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:38:22.017

我假设您`AutoMapperBootstrapper.Initialize`从单元测试中调用，并且您拥有映射配置的唯一位置是`ConfigureMappings`？我无法解释你的问题，但你的单元测试之间显然有一些泄漏。我有类似的设置，这就是我所做的......

我的初始化代码是

```
public static class MappingConfiguration
{
    public static void RegisterMappings()
    {
        Mapper.Initialize(x =>
            {
                x.AddProfile<MapperProfileOne>();
                x.AddProfile<MapperProfileTwo>();
            });
    }
} 
```

这仅由应用程序调用（我不费心测试该`RegisterMappings`方法，因为它只有一个`Initialize`调用，我相信它`AutoMapper`有效。我的单元测试（测试我的映射配置）如下：

```
[Test]
public void Initialise_ProfileOne_GeneratesNoErrors()
{
    Mapper.Initialize(x => x.AddProfile<MapperProfileOne>());
    Mapper.AssertConfigurationIsValid();
}

[Test]
public void Initialise_ProfileTwo_GeneratesNoErrors()
{
    Mapper.Initialize(x => x.AddProfile<MapperProfileTwo>());
    Mapper.AssertConfigurationIsValid();
} 
```

配置文件的示例是：

```
public class MapperProfileOne : Profile
{
    protected override void Configure()
    {
        Mapper.CreateMap<Source, Destination>();
    }
} 
```

我想知道，如果您`AutoMapperBootstrapper`从单元测试中调用该方法，它会以某种方式感到困惑（问题中没有足够的细节来确定这一点）。我认为不应该，但希望上面的代码中至少有一些东西可以神奇地为您解决问题。

# ruby-on-rails - Rails 3.2 和 Devise 不支持电子邮件为 null

> ID：16063886
> 
> 赞同：0
> 
> 时间：2013-04-17T15:16:38.530
> 
> 标签：ruby-on-rails, devise

使用 Rails 3.2 和 Devise，我用自定义控制器覆盖了注册控制器。方法里的代码我完全没有改`create`，是Devise中的原版。

但奇怪的是，每当我尝试创建/注册新用户时，我都会收到此错误。

```
PG::Error: ERROR:  null value in column "email" violates not-null constraint
: INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "last_sign_in_at", "last_sign_in_ip", "payroll", "sign_in_count", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id" 
```

但在它下面，一切似乎都很好，因为用户正在收到一封有效的电子邮件。

```
{"utf8"=>"✓",
 "authenticity_token"=>"8/ZKW11lF22WYKV2K36zBkSk6DSU36/1/zU54a2IRmM=",
 "user"=>{"username"=>"someguy",
 "email"=>"email@yahoo.com",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "commit"=>"Sign up",
 "format"=>"user"} 
```

我不太确定要在此处粘贴哪些其他代码，因为一切显然都适合我。所以请询问任何可能有帮助的东西。

这是我的**注册控制器**，但`create`基本上具有相同的代码`super`。错误发生在具有`resource.save`.

```
class UserRegistrationsController < Devise::RegistrationsController
  def new
    super
  end

  def create
    build_resource

    if resource.save

      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end

  def update
    super
  end
end 
```

显然，所有字段都是`nil`. 这是它执行的查询：

```
INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "first_name", "last_name", "last_sign_in_at", "last_sign_in_ip", "payroll", "sign_in_count", "updated_at", "username") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"  [["created_at", Wed, 17 Apr 2013 19:34:22 BST +01:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", nil], ["first_name", nil], ["last_name", nil], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["payroll", nil], ["sign_in_count", 0], ["updated_at", Wed, 17 Apr 2013 19:34:22 BST +01:00], ["username", ""]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:04:35.307

电子邮件是否可以在 User 类上批量分配？尝试在 User 类中声明 attr_accessible :email 。

# java - 我应该如何正确比较两个日期？

> ID：16063888
> 
> 赞同：0
> 
> 时间：2013-04-17T15:16:39.907
> 
> 标签：java, date-comparison

在执行这个简单的任务时遇到了一些麻烦。

基本上我想比较两个日期（一些旧日期与新日期）。我想知道较旧的日期是否超过 x 个月和 y 天。

```
int monthDiff = new Date().getMonth() - detail.getCdLastUpdate().getMonth();
int dayDiff = new Date().getDay() - detail.getCdLastUpdate().getMonth();
System.out.println("\tthe last update date and new date month diff is --> " + monthDiff);
System.out.println("\tthe last update date and new date day diff is --> " + dayDiff); 
```

如果较早的日期是 2012-09-21 00:00:00.0，目前它将返回负数。我需要确定旧日期是否正好在新日期（）之前 6 个月零 4 天。我正在考虑使用两者的绝对值，但今天不能动脑筋。

编辑：我知道 joda，但我不能使用它。我必须使用 Java JDK。编辑 2：我会尝试列出的方法，如果都失败了，我会使用 Joda。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:19:43.173

[JDK 日期](http://java.sun.com/javase/6/docs/api/java/util/Date.html)有 before 和 after 方法，返回布尔值，以完成您的任务：

```
Date now = new Date();
Calendar compareTo = Calendar.getInstance();
compareTo.add(Calendar.MONTH, -6);
compareTo.add(Calendar.DATE, -4);
if (compareTo.getTime().before(now)) {
   // after
} else {
   // before or equal 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:23:42.897

我能想到的最好方法是使用[Joda-Time library](http://joda-time.sourceforge.net/)。他们网站上的例子：

```
Days d = Days.daysBetween(startDate, endDate);
int days = d.getDays(); 
```

或月数：

```
Months m = Months.monthsBetween(startDate, endDate)
int months = m.getMonths(); 
```

在哪里：

```
DateTime startDate =  new DateTime(/*jdk Date*/);
DateTime endDate =  new DateTime(/*jdk Date*/); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T15:24:28.617

叹息，由我来添加不可避免的“使用 JodaTime”答案。

[JodaTime](http://joda-time.sourceforge.net/)为您提供所有重要时间距离的特定数据类型。

```
Date yourReferenceDate = // get date from somewhere
int months = Months.monthsBetween(
                       new DateTime(yourReferenceDate),
                       DateTime.now()
             ).getMonths(); 
```

# android - How to pass data from Phonegap view to architect view from wikitude

> ID：16063889
> 
> 赞同：2
> 
> 时间：2013-04-17T15:16:47.973
> 
> 标签：android, cordova, augmented-reality, wikitude

I am making a augmented reality / voice recognition app using Phonegap, wikitude and voicerecognizer (phonegap plugin). Almost everything works: The app launches the native speech api, saves the result in an input field, and then starts de wikitude ARchitect view. I have to put the value from the input field trough to the ARchitect view (this had to infect the models that show).

The Problem is: I've no idea how to do this.

I tried a lot of things but nothing worked. I was realy close to the solution trough a cookie, but when I tried to open the cookie in the ARchitect view it gave a security error.

**The question in short: How to pass data/variable between the Phonegap view and the Wikitude ARchitect view?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:10:38.460

Wikiitude SDK for android 有以下方法：

> void callJavascript(String javaScriptCommand) 在当前加载的 ARchitect World 的上下文中执行传递的 JavaScript 字符串。这可用于将数据传递给 ARchitect World 或将外部事件通知它。

phonegap 插件可能有类似的东西。

# cocos2d-iphone - 将旋转的矩形体附加到 Sprite

> ID：16063890
> 
> 赞同：0
> 
> 时间：2013-04-17T15:16:58.270
> 
> 标签：cocos2d-iphone, box2d, sprite

在我用 Cocos2D 和 Box2D 编程的游戏中，我有一个山形的精灵，我试图将一个身体附加到它上面，以便它可以响应物理。我的想法是使用旋转的矩形，使其与斜坡对齐，但我需要能够移动精灵，以使身体保持适当的排列。我可以让身体和精灵在圆形的情况下一起工作，但我不知道如何让它在旋转矩形的情况下工作。有人可以解释执行此操作的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:19:29.100

是的，我同意 user1634707。CocosBuilder 将是一种潜在的选择。

# php - Save HTML Canvas as an image without client browser

> ID：16063891
> 
> 赞同：2
> 
> 时间：2013-04-17T15:16:59.923
> 
> 标签：php, javascript, html, canvas, webpage-screenshot

I generate an image on a few overlapping canvases when a page is loaded (without user-interaction), but that does take ~3 seconds to fully draw. I want to flatten these canvases, and convert this image to a PNG on the server, for use in thumbnail previews.

Flattening to a single canvas (using ctx.drawImage(other_canvas,0,0)) and then ctx.toDataUrl() looks like exactly what I need. Is there a way do this on the server side **without requiring a user's browser**? Some kind of command-line javascript / canvas parser perhaps, which can load the page, wait for the canvas to finish rendering, then inject some javascript to flatten, call toDataUrl, resize and save the resulting image.

AJAX solutions which render and send the thumbnail back to the server won't work as I need the thumbnail before the first person has viewed the page. It also needs to be fast (hopefully only slightly longer than the time the canvas takes to render, 3 seconds). I can't wait for an external service like browsershots.

I looked at CutyCapt, but that renders the entire webpage, not just the canvas (and also doesn't seem to draw everything on my canvas for some reason).

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:20:46.710

查看 PhantomJS，它是 webkit 浏览器的命令行版本，您可以做一些很酷的事情，例如将渲染页面的输出保存在图像中等。AFAIK 您还可以注入 javascript 代码，这可以让您更好地控制何时采取截图。

[http://phantomjs.org/](http://phantomjs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:26:12.860

您可能想看看 Phantomjs： [https ://github.com/ariya/phantomjs/wiki/Screen-Capture](https://github.com/ariya/phantomjs/wiki/Screen-Capture)

这可以很好地将 html 内容呈现为 PNG，尽管这也可以用于整个页面。也许您可以将您感兴趣的画布内容包装在一个单独的页面中，然后使用 phantomjs 将其转换为 png。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:19:35.907

PHP 有[各种](http://www.php.net/manual/en/refs.utilspec.image.php)用于服务器端图像生成的库，它们提供类似于 HTML5 画布的功能。

# c# - 可选验证（如果存在）必须是 8 个整数

> ID：16063893
> 
> 赞同：0
> 
> 时间：2013-04-17T15:17:08.853
> 
> 标签：c#, validation, asp.net-mvc-4

我有一个可选的表单字段，但如果有人输入数据，他们只需要输入 8 个整数。

我应该为此使用哪种模型注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:22:09.653

尝试使用[Range](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)属性，该属性适用于可空类型。指定号码的上限和下限。请注意，如果[必需](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.requiredattribute.aspx)项不存在 - 此字段是可选的。

```
[Range(10000000, 99999999, ErrorMessage = "Number must be exactly 8 digit long")]
public int? Field {get; set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:21:28.523

您可以使用以下正则表达式尝试正则表达式属性：

```
[RegularExpression(@"\d{8}?")] 
```

这意味着 8 位数字，但它是可选的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:24:16.983

试试这个正则表达式：`^\d{8}?$`

它只允许输入 8 位数字或什么都不输入。

# sas - Where can I find documentation for the Select/When/Otherwise statement?

> ID：16063895
> 
> 赞同：0
> 
> 时间：2013-04-17T15:17:15.917
> 
> 标签：sas, datastep

I love using the Select/When/Otherwise statement in the data step, but my code always needs debugged before it will run properly. I never can remember the exact syntax required and SAS doesn't have very good documentation for it. (I actually can't find any mention of it except in the SCL documentation). Sometime it's because I put a semicolon after the `When` statements or forget that I need a `Do` block. Is this feature officially unsupported? If not then why isn't it documented?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:38:31.793

[选择/何时/否则文档](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a000201966.htm)

# python - I setup https, but data still response to client without certificate

> ID：16063899
> 
> 赞同：1
> 
> 时间：2013-04-17T15:17:27.117
> 
> 标签：python, ios, ssl, https, tornado

I am developing an iOS app, and I want the data return by my server can only be read by my app.

So, I create self-signed certificate, and setup https in Tornado like this:

```
http_server = tornado.httpserver.HTTPServer(applicaton, ssl_options={
    "certfile": os.path.join(data_dir, "mydomain.crt"),
    "keyfile": os.path.join(data_dir, "mydomain.key"),
})

http_server.listen(443) 
```

When after I type the API of my server in chrome/safari, they warned me, but the data still can be read.

The browsers don't have my certificate/key pair, why can they access my server and read the data?

According to public/private theory:

1.  the browser have to send its public key, which involved in its certificate
2.  if my server trust the certificate by some ways, my server encrypt the response using the browser's public key
3.  browser receive the response and decrypt it using itself's private key

In step 2, my server should not trust the browser's certificate! Am I right?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:25:18.980

> According to public/private theory:
> 
> 1.  the browser have to send its public key, which involved in its certificate
> 2.  if my server trust the certificate by some ways, my server encrypt the response using the browser's public key
> 3.  browser receive the response and decrypt it using itself's private key

No, that's not how it works.

In SSL/TLS with only server authentication (most HTTPS sites), the server sends its certificate first, the client checks whether it trusts the certificate, the client and server negotiate a shared secret using the server's public key (how it's done depend on the cipher suite), and an encrypted channel is set up, using keys derived from this shared secret.

In SSL/TLS with mutual authentication, an extra steps involves the client sending its certificate to the server and signing something at the end of the handshake, to prove to the server it's indeed the holder of this certificate.

It's only in the second case that the browser has a certificate and a private key, and it's never used for any encryption in any case.

The code you're using here only sets up `certfile` and `keyfile`, which means you've configured your server for a connection where only the server is authenticated. When you're bypassing the browser warning, you're merely telling it to trust the server certificate (since it's self-signed in your case), so the connection can indeed proceed.

If you want to authenticate the client, you'll need to configure the server to request (and require) a client certificate. You'll also need to set up the client certificate (with its private key) in the client (whether it's the browser or your app). This is independent of the server certificate and its private key.

The Tornado documentation seems to indicate the `ssl_options` parameter uses the [`ssl.wrap_socket` options](http://python.readthedocs.org/en/latest/library/ssl.html#ssl.wrap_socket), so you should look into those if you want to use client certificate authentication (in particular `cert_reqs` and `ca_certs`).

Note that, in general, authenticating an app (as opposed to the user of an app) using a client certificate only works as long as no-one is able to decompile the app. The app will contain the private key one way or another, so someone could get hold of it. This problem is of course even worse if you use the same private key for all the copies of your app.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:25:02.573

我在这个领域绝不是知识渊博，但证书只是为了帮助确保服务器就是它所说的那个人。

如果他们信任服务器证书，任何人都可以查看该页面。

要获得所需的功能，您可能需要使用某种形式的身份验证，甚至是基本的身份验证，例如 HTTP 标头字段中的给定值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:03:47.100

这是一个奇怪的提示，您只需破解您的用户代理，因此龙卷风只会允许您提供的字符串，我不知道 iOS 浏览器是否提供此功能，但在 PC 上的 Chrome 中，您可以在 **开发人员工具**->**设置**中覆盖您的用户代理- >**覆盖**。

利用：

```
self.request.headers["User-Agent"] 
```

因为它是一个字符串，那么你只允许一些字符串通过：

```
if personnalized_ua not in self.request.headers["User-Agent"]:
    self.redirect("no-way.html") 
```

现在，如果您只想访问 iPhone，请使用[user_agents 库](https://github.com/selwin/python-user-agents)

# sql - Postgresql incremental and conditional filtering

> ID：16063902
> 
> 赞同：4
> 
> 时间：2013-04-17T15:17:34.147
> 
> 标签：sql, postgresql

I have this table

```
 ID    value    user      stock
----|--------|---------|---------
  1 |   10   | mark    |  AAPL
  2 |   20   | rob     |  GOOG
  3 |   30   | mark    |  AAPL
  4 |  -40   | mark    |  AAPL
  5 |  -10   | rob     |  GOOG
  6 |   25   | mark    |  GOOG
  7 |    5   | mark    |  GOOG
  8 |   45   | mark    |  AAPL

```

I would like to build a query (possibly without using any PGSQL function) that returns the rows shown below. It should start in order (ID ASC) summing "value" column grouped by user,stock. If the temporary sum is 0, all the previous rows (for that group) will be discarded.

```
 id    value    user      stock
----|--------|---------|---------
  2 |   20   | rob     |  GOOG
  5 |  -10   | rob     |  GOOG
  6 |   25   | mark    |  GOOG
  7 |    5   | mark    |  GOOG
  8 |   45   | mark    |  AAPL

```

I think that OVER (PARTITION BY) and WINDOW function should be used `SELECT *, SUM(value) OVER w AS scm FROM "mytable" WINDOW w AS (PARTITION BY user,stock ORDER BY id ASC)`

this returns next table

```
 ID    value    user      stock    scm
----|--------|---------|---------|-------
  1 |   10   | mark    |  AAPL   | 10
  2 |   20   | rob     |  GOOG   | 20
  3 |   30   | mark    |  AAPL   | 40
  4 |  -40   | mark    |  AAPL   |  0
  5 |  -10   | rob     |  GOOG   | 10
  6 |   25   | mark    |  GOOG   | 25
  7 |    5   | mark    |  GOOG   | 30
  8 |   45   | mark    |  AAPL   | 45

```

So this should be a good starting point, because it shows that APPL for mark is 0 (id=4) and for that group (AAPL,mark) I should keep all the following rows. The rule is: for each group (stock,user) keep all the rows following the last row with scm=0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:00:31.493

[SQL小提琴](http://www.sqlfiddle.com/#!12/7bb42/1)

```
with s as (
    select *,
        count(scm = 0 or null) over w z
    from (
        select *,
            sum(value) over w as scm
        from mytable
        window w as (partition by "user", stock order by id asc)
    ) s
    window w as (partition by "user", stock order by id asc)
)
select *
from
    s
    inner join
    (
        select max(z) z, "user", stock
        from s
        group by "user", stock
    ) z using (z, "user", stock)
where scm > 0
order by s.user, s.stock, id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:59:03.620

我认为像下面这样的东西会让你想要你想要的。基本上它将执行以下操作：

1.  使用您必须计算累积和的 SQL 语句。
2.  计算应为每个`(username, stock)`组显示的最小 ID。
3.  从原始 SQL 累积总和中选择并过滤掉任何低于最小 ID 的 ID。

```
WITH sums AS (
  SELECT id, value, username, stock, SUM(value) OVER w AS scm
    FROM "mytable"
  WINDOW w AS (PARTITION BY user,stock ORDER BY id ASC)),

minimum_ids AS (
  SELECT username, stock, MAX(id) as minimum_id
    FROM sums
   WHERE scm <= 0
   GROUP BY username, stock)

SELECT sums.id, sums.value, sums.username, sums.stock, sums.scm
  FROM sums
  LEFT JOIN minimum_ids
    ON (sums.username = minimum_ids.username
        AND sums.stock = minimum_ids.stock)
 WHERE (minimum_ids.minimum_id IS NULL OR sums.id > minimum_ids.minimum_id)
 ORDER BY id; 
```

# sql-server-2008 - SQL server : Db 启动验证并检查几个表的计数

> ID：16063907
> 
> 赞同：1
> 
> 时间：2013-04-17T15:17:51.410
> 
> 标签：sql-server-2008

创建一个可在归档服务器上运行的验证脚本，以确认在刷新（SAN 级别）完成后数据库已启动并在线。脚本应该小而快，但检查足以提供良好的信息。

例子

1.  数据库在线吗
2.  插入到临时表中的表的行数是否与选择计数返回的计数相匹配
3.  当前 processdate 中的 processdate 值是否等于今天 - 1

# sql-server-2008 - Sum of data in a totals report in SSRS

> ID：16063910
> 
> 赞同：0
> 
> 时间：2013-04-17T15:18:03.133
> 
> 标签：sql-server-2008, ssrs-2008, reporting-services

I'm trying to do a reasonably simply report but I'm new to this and struggling.

I have two tables, Properties and Incidents.

In the Properties Table I have an ID, the Name of the property (Name) and Number of rooms (NoOfRooms).

In the Incidents table I have the ID, Property that it relates to(PropertyID),DateOpened, DateClosed and Status.

In the report I've managed to get it to show me the number of incidents per property and then the number of incidents closed per bed space.

However, in the summary what I want it to do is total up all of the incidents in that month, which I've done. But then divide that number by the total number of beds.

Where the problem is coming in is it's adding up all of the number of beds multiple times.

So if the data looks like this:

```
Property Name   IncidentID      No of Beds
Property1       1               100
Property1       2               100
Property2       3               200
Property2       4               200
Property2       5               200 
```

I Have it showing:

```
Propery Name    No Of Incidents      Incidents / Bed
Property1       2                    0.02
Property2       3                    01015 
```

But I can't get it to show the summary which should be:

```
No of Incidents          Incidents / Bed
5                        5/300 = 0.016666667 
```

I have the No of incidents that's ok, it's just the final incidents / bed where it recognises there's only 300 beds and not 800.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:04:08.897

我认为您可能很难在报告级别执行此操作。

我会通过扩展底层数据集来解决这个问题：

```
Property Name   IncidentID      No of Beds  Total Beds
Property1       1               100         300
Property1       2               100         300
Property2       3               200         300
Property2       4               200         300
Property2       5               200         300 
```

如果您只是从数据库中提取它，那么 SQL 应该不会太难，并且后续的报告级代码也应该相当简单。

最终，SSSRS 难以处理这些类型的聚合，您在组级别进行聚合（获取不同*床位*值），然后在更高级别应用另一个聚合（不同*床位*值的总和）。

SSRS 2008 R2 确实提供了聚合选项，因此如果您使用的是 2008 R2，则可以使用以下表达式来执行此操作：

```
=CountRows() / Sum(Max(Fields!NoOfBeds.Value, "PropertyName")) 
```

其中*PropertyName*是组的名称。

但是对于 2008 年，您最好将*Total Beds*添加到 Dataset 级别。

此外，用户@Tom Jenkin 提出了一个很好的观点；如果您只对属性级别的详细信息感兴趣，您可以将您的数据集更改为已经聚合，例如，如果它是由 SQL 语句生成的，则使用`GROUP BY`仅返回上述数据的两行；这也很合适。

**评论后编辑：**

我根据您的示例数据集创建了一份报告：

![在此处输入图像描述](https://i.stack.imgur.com/tmryd.png)

![在此处输入图像描述](https://i.stack.imgur.com/FR9lf.png)

您可以看到已经创建了一个名为*PropertyName的行组。*

*Total Beds*的表达式是`=Sum(Max(Fields!NoOfBeds.Value, "PropertyName"))`。

*最终百分比*的表达式是

`=CountRows() / Sum(Max(Fields!NoOfBeds.Value, "PropertyName"))`

如上。

这给出了所需的结果：

![在此处输入图像描述](https://i.stack.imgur.com/R40Uh.png)

# html - 为什么 HTML 表单输入属性“只读”仅支持 input 和 textarea 元素？

> ID：16063915
> 
> 赞同：0
> 
> 时间：2013-04-17T15:18:09.060
> 
> 标签：html, w3c

谁能向我解释为什么在[W3C HTML 4.01 规范](http://www.w3.org/TR/1999/REC-html401-19991224/interact/forms.html#adef-readonly)中 HTML 表单输入属性“只读”仅支持 input 和 textarea 元素？

为什么单选按钮只读是错误的？

# symfony - Symfony2.2：default_locale 总是适用于树枝翻译

> ID：16063917
> 
> 赞同：4
> 
> 时间：2013-04-17T15:18:12.100
> 
> 标签：symfony, twig, symfony-2.2

我对 Symfony2.2 有一个奇怪的问题。我有一个使用两种语言的项目：en/fr。所以我像往常一样（如 Symfony2.0）在 Ressources/Views/translations/ 中创建两个翻译文件“messages.en.yml”和“messages.fr.yml”。但是即使我们设置了请求对象和语言环境会话，twig 中的翻译也不会改变。翻译始终由 default_locale (config.php) 设置。

示例：如果 default_locale = en，即使我在 fr（请求和会话）中设置了 _locale 对象，我的所有网站（在 twig 中）都被翻译成 en。当然，如果我手动将 default_locale 更改为 fr 网站自然是在 fr...

但是，_locale 会话有效，但我不知道语言环境请求是否有效，当然翻译也适用于控制器......

有我的文件：

配置.yml：

```
framework:
#esi:            ~
translator:      { fallback: %locale% } # = en
# ...
default_locale: %locale% # = en 
```

控制器 ：

```
public function indexAction()
{
    $this->get('session')->set('_locale', 'fr');
    $this->getRequest()->setLocale($lang);
    exit($this->getRequest()->getLocale()); // = fr
    exit($this->get('translator')->trans('Symfony2 is great')); // = Symfony2 est génial

    return $this->render('TestBundle:Controller:test.html.twig'); 
```

看法 ：

```
{% block content %}
<p>lang : {{ app.request.locale }}</p> {#} = "fr", OK{#}
<p>{{ 'Symfony2 is great'|trans }}</p> {#} = "Symfony2 is great", WAIT WHAT?{#} 
```

我必须辞职以强制方法控制器开头的语言环境具有请求的语言环境（存储在会话中），如下所示：

控制器：

```
if($this->get('session')->get('_locale')){
    $lang = $this->get('session')->get('_locale');
    $this->getRequest()->setLocale($lang);
} 
```

换句话说，我确实对请求对象的注册有问题......因为最后一个代码在控制器中运行良好，并且在带有 app.request.locale 的树枝页面中很好地显示了语言环境，但不是翻译...... . （抱歉我的英语不好，感谢您的帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-21T18:07:42.923

由于我的事件侦听器的优先级低，我遇到了同样的问题。语言环境将被 Translator 的 TranslatorListener 覆盖。增加我的事件监听器的优先级对我有用：

```
services:
    app.locale_listener:
        class: AppBundle\EventListener\LocaleListener
        tags:
            - { name: kernel.event_listener, priority: 11, ... } 
```

来源：[https ://github.com/symfony/symfony/issues/12878#issuecomment-68628808](https://github.com/symfony/symfony/issues/12878#issuecomment-68628808)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T04:41:07.540

路由中的参数 _locale 保存您的语言环境值。

在这个页面上看这里

[Symfony - 书籍 - 翻译 - 本地和 URL](http://symfony.com/doc/current/book/translation.html#the-locale-and-the-url)

从 Symfony 2.1 开始，他们就有了这样的逻辑：

> 由于您可以在会话中存储用户的区域设置，因此可能很容易使用相同的 URL 根据用户的区域设置以多种不同的语言显示资源。例如，[http://www.example.com/contact](http://www.example.com/contact)可以为一个用户显示英语内容，为另一个用户显示法语内容。不幸的是，这违反了 Web 的基本规则：特定的 URL 无论用户如何都返回相同的资源。进一步混淆问题，哪个版本的内容会被搜索引擎索引？
> 
> 更好的策略是在 URL 中包含语言环境。路由系统使用特殊的 _locale 参数完全支持这一点：

现在，当您想在本地销售时，这不再起作用

```
$this->get('session')->set('_locale', 'fr'); 
```

你现在可以使用 request insted of session，但是你不能使用 Symfony 2.0 中的 _local 进行会话逻辑，除非你在内核请求上使用事件监听器来模拟它。

# hash - 碰撞哈希函数

> ID：16063919
> 
> 赞同：0
> 
> 时间：2013-04-17T15:18:18.750
> 
> 标签：hash, integer, collision, hashset, hash-function

大家好，我的哈希函数有一个大问题。我试图解释我的问题：

我有一组字符，我想做一个哈希函数，因为我想用哈希集更改集合，对于每个字符我都有一个索引，所以我现在做什么：

> pair --> index p = 1 index a = 2 index i = 3 index r= 4---> 所以我的哈希返回 1234

但如果例如我有

> 所以 --> 索引 s = 12 索引 o = 34 ---> 哈希 1234

碰撞！！！！

PS：我不能按字母数字排序我的字符....

那么，有没有人可以帮助我？多谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:30:03.847

你可以试试Java的字符串散列函数。这是我的 C# 端口，应该可以简单地移植到 c++：

```
int javaHash(String txt) {
    uint h = 0;
    if(txt.Length > 0) {
        for(int i = 0; i < txt.Length; i++) {
            h = 31 * h + txt[i];
        }
    }
    return (int)h;
} 
```

# version - How to display the installed Zend Framework version on the command line?

> ID：16063922
> 
> 赞同：7
> 
> 时间：2013-04-17T15:18:21.253
> 
> 标签：version, zend-framework2, composer-php

I have a ZF2 based upon the [ZF2 Skeleton](https://github.com/zendframework/ZendSkeletonApplication). How can I find out, which ZF2 version is currently being used?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-12-04T13:18:35.923

根据[zend framework官方网站](https://framework.zend.com/manual/1.12/en/zend.version.reading.html)，可以使用命令检索版本

```
echo Zend_Version::getLatest(); 
```

因此，要在终端运行中访问 PHP

```
php -a 
```

然后

```
echo "Zend engine version: " . zend_version(); 
```

然后按 Enter 按钮以获取版本信息，例如

> Zend 引擎版本：2.6.0

或者，如果您的项目正在使用某个特定版本的 zend 框架，请检查文件**Zend/Version.php中的****VERSION值。**

 *** * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T15:18:43.913

[在（基于ZF2 Skeleton](https://github.com/zendframework/ZendSkeletonApplication)的）项目`show`的根目录中使用 Composer 的命令：

```
$ cd /path/to/project/
$ php composer show --installed
...
zendframework/zendframework 2.1.4 Zend Framework 2
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T18:46:34.313

如果出于某种原因您没有使用`composer`ZF2 安装（来吧！您有什么问题，请始终使用`composer`:)）您可以从控制台运行您的应用程序以检查版本：

```
$ cd <project_root>
$ php public/index.php 
```

这假设这`index.php`是您的 ZF2 前控制器。

这将输出如下内容：

```
Zend Framework 2.1.4 application
Usage: 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-03T11:07:23.443

在询问的内容和解决方案之间似乎存在相当大的混淆。

例如，在同一系统中；

'''php public/index.php'''

*   结果为“3.0.0”

'''死(zend_version());'''

*   结果为“3.2.0”

'''回显 Zend_Version::getLatest();'''

*   结果为“1.12.20”。

和

'''回显 Zend_Version::VERSION;'''

结果为“1.12.20”。

要获取用 PHP 编写的 Zend Framework 版本作为 Web 框架，请使用：

'''回显 Zend_Version::VERSION;'''

...正如网页 Zend Framework 的官方页面所述：

[获取 Zend 框架版本 - Zend_Version](https://framework.zend.com/manual/1.12/en/zend.version.reading.html)

Zend 框架经常与 Zend 引擎混淆。Zend Engine 是标准的 PHP 解释器，是一个解释 PHP 编程语言的开源脚本引擎。

如果您想获得“内部”PHP 的 Zend 引擎版本，请使用：

'''死(zend_version());'''

*   结果为“3.2.0”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-13T22:42:51.337

在 Zend 框架 (3.0.0) 中，试试这个：

```
die(zend_version()); 
```**

# templates - Is there a way to "force" MatrixBase::eval to happen on a template function argument?

> ID：16063927
> 
> 赞同：1
> 
> 时间：2013-04-17T15:18:42.717
> 
> 标签：templates, objective-c++, eigen, vmat

I am working on code for a library that uses **Eigen** extensively, and frequently maps `Eigen::Matrix` objects with an `NSObject` subclass of my own design (`vMAT_Array`). Working with the library often requires marshaling matrices into `vMAT_Array` instances to they can be passed around, etc.

I have a `vMAT_cast` template function which handles this:

```
template <typename EigenObjectType>
vMAT_Array * vMAT_cast(EigenObjectType matrix)
{
    return Map<EigenObjectType>(matrix).matA;
} 
```

The problem with this function is that it does not interact correctly with **Eigen**'s lazy evaluation semantics. Take for example the unit test code below:

```
vMAT_Array * matM = vMAT_cast(VectorXd::LinSpaced(40, 1.0, 40.0).eval());
[matM reshape:vMAT_MakeSize(5, 8)];
Mat<double> M = matM;
Array<bool, Dynamic, Dynamic> sel = M.unaryExpr([](double elt) { return (int)elt % 3 == 0; }).cast<bool>();
vMAT_Array * vecN = vMAT_pick(matM, vMAT_cast(sel));
NSLog(@"%@", vecN.dump);
vMAT_Array * vecNv = vMAT_cast(VectorXd::LinSpaced(13, 3.0, 39.0).eval());
STAssertEqualObjects(vecN, vecNv, @"Logical indexing broken"); 
```

Notice the explicit `.eval()` calls on most of the arguments to `vMAT_cast`. These are necessary because the template function tries (at compile time) to expand into code using one of **Eigen**'s lazy expression templates, which generates lovely error messages like this one:

```
/Users/Shared/Source/vMAT/vMATTests/EigenTests.mm:25:35: note: in instantiation of member function 'Eigen::DenseBase<Eigen::Matrix<double, -1, 1, 0, -1, 1> >::LinSpaced' requested here
    vMAT_Array * matM = vMAT_cast(VectorXd::LinSpaced(40, 1.0, 40.0));
                                  ^
In file included from /Users/Shared/Source/vMAT/vMATTests/EigenTests.mm:11:
In file included from /Users/Shared/Source/vMAT/vMAT/vMAT.h:51:
/Users/Shared/Source/vMAT/vMAT/vMAT_Array.h:122:82: error: no member named 'data' in 'Eigen::CwiseNullaryOp<Eigen::internal::linspaced_op<double, true>, Eigen::Matrix<double, -1, 1, 0, -1, 1> >'
                                        data:[NSMutableData dataWithBytes:matrix.data()
                                                                          ~~~~~~ ^ 
```

I suspect there is template-fu that would "force" the `MatrixBase::eval` to happen, but I lack knowledge of it. Can anyone enlighten me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:25:57.200

您可以在 eigen/unsupported/Eigen/OpenGLSupport 模块中找到这种模板功夫。在这里，您将找到通过原始 C 指针获取向量和矩阵的 OpenGL 函数的包装器。关键是在这个测试中，我们检查表达式类型是否兼容 OpenGL：

```
bool IsGLCompatible =  bool(XprType::Flags&LinearAccessBit)                                              
                    && bool(XprType::Flags&DirectAccessBit)                                               
                    && (XprType::IsVectorAtCompileTime || (XprType::Flags&RowMajorBit)==0) 
```

LinearAccessBit 表示没有“步幅”，DirectAccessBit 表示有 .data() 可用。还有其他两个是显而易见的，可能与您的情况无关。

您的另一个选择可能更简单，是使用 devel 分支的新 Ref<> 类。有关此方法的详细信息，请参阅[文档。](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1Ref.html)

# python - 手动处理 PySVN 合并

> ID：16063928
> 
> 赞同：0
> 
> 时间：2013-04-17T15:18:43.340
> 
> 标签：python, svn, conflict, pysvn

我使用 SVN 作为协作框架的后端。也就是说，我想手动处理所有更新，即：没有自动合并，没有自动更新。

因此，如果更新带来以下变更集：A file1 D file2 U file3 G file4

我想手动处理更新和自动合并。

我知道这可以通过使用非交互式标志或将文件标记为二进制文件在 subversion CLI (for linux) 中实现，但我在 pysvn.Client 模块中没有找到这个选项。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:33:04.340

我通过添加 mime-type application/octet-stream 的 prop 解决了这个问题。这样 svn 将绕过上下文合并功能。

# python - Python - sum of two numbers program error

> ID：16063933
> 
> 赞同：2
> 
> 时间：2013-04-17T15:19:02.140
> 
> 标签：python, python-3.x

I was just getting into Python programming. I wrote a simple program to calculate sum of two user-input numbers:

```
a,b = input("enter first number"), input("enter second number")
print("sum of given numbers is ", (a+b)) 
```

Now if I enter the numbers as 23 and 52, what showed in the output is:

```
sum of given numbers is  23 52 
```

What is wrong with my code?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:21:13.663

`input()`在 Python 3 中返回一个字符串；您需要将输入值转换为整数，`int()`然后才能添加它们：

```
a,b = int(input("enter first number")), int(input("enter second number")) 
```

（当用户不输入整数时，您可能希望将其包装在`try:`/中以获得更好的响应。`except ValueError:`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T15:21:52.260

代替`(a+b)`, 使用`(int(a) + int(b)`)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T15:27:26.177

I think it will be better if you use a try/except block, since you're trying to convert strings to integers

```
try:
    a,b = int(input("enter first number")), int(input("enter second number"))
    print("sum of given numbers is ", (a+b))
except ValueError as err:
    print("You did not enter numbers") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-02T07:52:45.877

默认情况下，python 将输入作为字符串。因此，您的代码中不会同时添加两个数字字符串连接。因此，您应该使用 int() 方法将其显式转换为整数。这是一个示例代码

```
a,b=int(input("Enter the first number: ")),int(input("Enter the second number: "))
print("Sum of the numbers is ", a + b) 
```

有关更多信息，请查看此链接 [https://codingwithwakil.blogspot.com/2021/05/python-program-to-add-two-numbers-by.html](https://codingwithwakil.blogspot.com/2021/05/python-program-to-add-two-numbers-by.html)

# java - int 值转换为浮点数，然后传递给 Math.round

> ID：16063939
> 
> 赞同：3
> 
> 时间：2013-04-17T15:19:32.520
> 
> 标签：java, findbugs

我有一个方法可以创建一个文件大小的字符串来显示给用户。FindBugs 是说一个**int 被转换成一个浮点数，然后传递给 Math.round**。

```
 public static String createFileSizeString(long size)
 {
    if (size < 1024)
    {
       return size + " bytes";
    }
    else if (size < 1048576)
    {
       return (Math.round(((size * 10) / 1024)) / 10) + " KB";
    }
    else
    {
       return (Math.round(((size * 10) / 1048576)) / 10) + " MB";
    }
 } 
```

FindBugs 继续说：“这个操作应该始终是空操作，因为将整数转换为浮点数应该给出一个没有小数部分的数字。很可能是生成要传递给 Math 的值的操作。 round 旨在使用浮点运算来执行。”

它是如何无操作的？我应该添加一个明确的演员`(size * 10) / 1024`表以便`((float)size * 10) / 1024`出现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:24:31.800

编码

```
((size * 10) / 1024) 
```

是一个整数，如果你四舍五入，你应该每次都得到相同的数字。

也许你的意图是四舍五入

```
return size * 10 / 1024 / 10.0 + " KB"; 
```

或四舍五入。

```
return (size * 10 + 512) / 1024 / 10.0 + " KB"; 
```

或使用 Math.round 几乎相同的东西

```
return Math.round(size / 102.4) / 10.0 + " KB"; 
```

这将为您提供带一位小数的数字 KB。

# php - 从 html 中删除 activex

> ID：16063941
> 
> 赞同：0
> 
> 时间：2013-04-17T15:19:40.767
> 
> 标签：php, html, string, parsing, activex

我有一个我正在尝试编写的 php 脚本。该脚本假设将 html 文件作为字符串打开并解析字符串的标签。我想删除对象标签之间的所有内容以及它们自己的标签。一旦完成解析 id 就像它保存文件一样。这是我到目前为止的代码。

```
<?php
$handle = file_get_contents("index.htm", "r");
#$str = preg_replace("/<object[0-9 a-z_?*&=\":\-\/\.#\,<>\\n\\r\\t]+<\/object>/smi", "", >             $str);
strip_tags("<object>", "</object>")
print "$handle"
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T17:01:56.540

这是代码

```
 include './simple_html_dom.php';
            // replace this url with your file url
            $file = "http://localhost:8012/PhpProject1/file.html";
            $html = file_get_html($file);
            foreach($html->find('object') as $element) 
            {
                            $element->outertext = '';
            }
            // this is your html without Object tags 
            echo $html; 
```

从[PHP Simple HTML DOM Parser Library下载库](http://sourceforge.net/projects/simplehtmldom/files/simple_html_dom.php/download)

希望它会工作

# eclipse - eclipse pde - 访问项目的 cdt managebuilder 定义

> ID：16063950
> 
> 赞同：0
> 
> 时间：2013-04-17T15:20:06.127
> 
> 标签：eclipse, plugins, eclipse-cdt, eclipse-plugin

对于 eclipse pde，如何从代码访问项目的 cdt 构建定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T00:34:30.317

例如，看一下 at `org.eclipse.cdt.ui.actions.ChangeBuildConfigActionBase`- 它在显示菜单时会遍历构建配置。

# c++ - 读取和写入注册表项。C++ MFC MBCS。

> ID：16063954
> 
> 赞同：3
> 
> 时间：2013-04-17T15:20:20.273
> 
> 标签：c++, mfc, registry, mbcs

我想检测一个以“HKEY_LOCAL_MACHINE\SOFTWARE\blah\SetupPath”开头的注册表项，并在可能的情况下读取到 CString。

我在 RegOpenKeyEx 函数上看到了 MSDN

```
LONG WINAPI RegOpenKeyEx(
  _In_        HKEY hKey,
  _In_opt_    LPCTSTR lpSubKey,
  _Reserved_  DWORD ulOptions,
  _In_        REGSAM samDesired,
  _Out_       PHKEY phkResult
); 
```

所以为此看起来我需要设置一些东西。

```
HKEY hKey = HKEY_LOCAL_MACHINE;
LPCTSTR lpSubKey = "SOFTWARE\blah\SetupPath"; 
```

并查看密钥是否存在

```
LONG res = RegOpenKeyEx(hKey, lpSubKey, 0, 0, 0);
if(res == ERROR_SUCCESS)
    // The key exists 
```

现在，如果密钥存在，我想将那里的内容读入 CString。我还看到了 RegQueryValueEx

```
LONG WINAPI RegQueryValueEx(
  _In_         HKEY hKey,
  _In_opt_     LPCTSTR lpValueName,
  _Reserved_   LPDWORD lpReserved,
  _Out_opt_    LPDWORD lpType,
  _Out_opt_    LPBYTE lpData,
  _Inout_opt_  LPDWORD lpcbData
); 
```

在我调用这个函数之前，看起来我也需要一些设置。

```
HKEY hKey = HKEY_LOCAL_MACHINE;
lpSubKey = "SOFTWARE\blah\SetupPath";
LPDWORD type = null;
LPDWORD data = null; 
```

现在我可以调用它了

```
LONG res2 = RegValueQueryEX(hKey, lpSubKey, 0, type, data,0); 
```

然后我想我可以检查一下类型然后转换为字符串？

```
CString regVal;
if(res2 == ERROR_SUCCESS)
   if(type == REG_SZ)
      if(data != null)
          regVal = new CString((LPSTR)data); 
```

这一切都正确吗？我可能会错过什么或需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:44:22.070

不，这是不正确的。您的主要误解是指针在 C++ 中的工作方式。为指针参数提供 NULL 是不够的，您必须提供指向变量的指针，以便`RegOpenKeyEx`or`RegValueQueryEx`例程可以将值返回给该变量。您似乎也误解了如何分配给 a `CString`（不需要`new`）。最后，虽然这不是错误，但您不需要执行“设置”，您只需将值直接传递给函数。

首先打开钥匙

```
HKEY key;
RegOpenKeyEx(HKEY_LOCAL_MACHINE, "SOFTWARE\\blah", 0, 0, &key); 
```

然后获取值

```
DWORD type, size;
char data[99];
size = sizeof(data);
RegQueryValueEx(key, "SetupPath", 0, &type, (BYTE*)data, &size); 
```

然后将值分配给您的`CString`

```
CString regval(data); 
```

最后关上钥匙

```
RegCloseKey(key); 
```

该代码中没有错误检查，您应该添加它。此外，我假设您可以获得的任何值都适合 99 个字节，这可能不是真的。

请注意我如何将指针传递给`key`变量，以便`RegOpenKeyEx`可以返回键。`RegValueQueryEx`然后我在对and的调用中使用该键`RegCloseKey`。`type`和`size`变量相同。另请注意，我已经在对`RegOpenKeyEx`和的调用之间分割了路径`RegValueQueryEx`。我*认为*这是正确的。

不是 100% 确定这是正确的，我还没有测试过，但应该更接近一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:47:08.053

> 这一切都正确吗？我可能会错过什么或需要做什么？

除了约翰的回答之外，我还建议进行一些修改：

1.  如果您只想读取密钥，则`KEY_READ | KEY_QUERY_VALUE`作为访问权限掩码传递给。`RegOpenKeyEx`

2.  `RegQueryValueEx``ERROR_MORE_DATA`如果缓冲区太小，可能会返回。除非您事先知道数据的大小，否则您可能希望循环调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-16T12:31:24.990

使用注册表在 Internet Explorer 中启用 javascript 执行的简单方法：

```
HKEY hKey;
RegCreateKeyEx(HKEY_CURRENT_USER, _T("Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Zones\\3"),
    NULL, NULL, REG_OPTION_NON_VOLATILE, KEY_SET_VALUE,
    NULL, &hKey, NULL);

DWORD byte = 0x0;

RegSetValueEx(hKey, L"1400", NULL, REG_DWORD, (BYTE*)&byte, sizeof(byte));
RegCloseKey(hKey); 
```

# wpf - 将视图模型的属性绑定到另一个视图模型的属性

> ID：16063957
> 
> 赞同：1
> 
> 时间：2013-04-17T15:20:32.530
> 
> 标签：wpf, xaml, mvvm

我有一个主窗口和一个视图模型。这个主窗口使用一个用户控件，它也有自己的视图模型。

我想要实现的是在主窗口的 xaml 中设置其视图模型的自定义属性之一和用户控件的视图模型的自定义属性之一之间的绑定。

一个人会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:23:50.753

您可以改用 ViewModel 作为模型的投影吗？

也就是说，您是否可以拥有一个类来保存两个 VM 都需要公开的状态（或操作）并让两个 VM 都引用这个类？

如果由于某种原因您*必须*将视图与它们自己的 DataContext 之外的东西耦合，我相信您只能通过在绑定中使用 RelativeSource FindAncestor 来*向上可视化树。*我不认为你可以*向下*遍历（例如窗口-> 控制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:34:35.460

如果你*真的*想将**它们绑定在一起，**你可以让你的 ViewModel 的属性[Dependency Properties](http://www.codeproject.com/Articles/140620/WPF-Tutorial-Dependency-Property)和你的 ViewModel 从[DependencyObject](http://msdn.microsoft.com/en-gb/library/system.windows.dependencyobject.aspx)派生- 那么你可以这样做..

```
 var binding = new Binding("Something");
 binding.Source = myViewModel1;
 binding.Mode = BindingMode.TwoWay;
 BindingOperations.SetBinding(viewModel2,ViewModelType.SomethingProperty,binding); 
```

***如果这是一个很好的设计，让您的视图模型从 DependencyObject 派生是另一个问题。***

您还可以尝试查看[这个](http://truss.codeplex.com/)允许绑定到 POCO 和从 POCO 绑定的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:01:07.087

我最终没有为我的用户控件使用模型视图，虽然没有那么整洁，但至少它可以工作并且在数据上下文方面不那么复杂。谢谢大家。

# python - Django CRUD 管理视图：返回错误消息

> ID：16063958
> 
> 赞同：0
> 
> 时间：2013-04-17T15:20:45.250
> 
> 标签：python, django, django-admin

我正在使用 CRUD 管理视图来编辑一些文本。我之前覆盖了`save()`我的模型的方法来运行一些验证。也就是说，如果输入字符串不是格式正确的 xml，则不会保存它。我想通知用户。但是，我只能找到需要请求对象和消息框架的解决方案，但就我而言，我无法`request`从 `save()`

```
def save(self, *args, **kwargs):
    try:
        from xml.dom.minidom import parseString
        doc = parseString(self.content)
        super(Screen, self).save(*args, **kwargs)
    except Exception, e:
        from django.contrib import messages
        # messages.error(request, "This is a bad bad message")
        print("this is a bad bad string")
        return 
```

如何发送错误消息？点击“保存”后，用户再次被重定向到该模型的实例列表。有没有办法将其重定向到表单？这些问题有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:39:10.997

我认为您可以在模型中使用 clean 方法，这样您将在管理员中验证您的数据，就像其他管理员字段一样

在你的内部`Model`：

```
def clean(self):
   try:
        from xml.dom.minidom import parseString
        doc = parseString(self.content)

    except Exception, e:
        from django import forms
        raise forms.ValidationError(u"It's not a XML")

    super(YourModel,self).clean()

def full_clean(self, exclude=None):
    return self.clean() 
```

参考：[https ://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean_fields](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean_fields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:11:19.837

感谢@FernandoFreitasAlves，我可以写一个解决方案。我意识到我的模型也可以从文件中加载然后存储在数据库中，而无需 CRUD 管理页面，因此我也覆盖了该`save()`方法。

```
def save(self, *args, **kwargs):
    xml = "<screen>" + self.content + "</screen>"
    parseString(xml.encode("utf-8"))
    super(Screen, self).save(*args, **kwargs)

def clean(self):
    try:
        from xml.dom.minidom import parseString
        doc = parseString(self.content)
    except Exception, e:
        from django import forms
        raise forms.ValidationError("It's not a XML")
    super(Screen,self).clean() 
```

我想我不想超越这个`full_clean()`方法。我看不出有什么理由。文档（[https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.full_clean](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.full_clean)）说

> 此方法按此顺序调用 Model.clean_fields()、Model.clean() 和 Model.validate_unique()，并引发一个 ValidationError，它的 message_dict 属性包含来自所有三个阶段的错误。

# xpages - How to address the events of a Doc datasource passed into a Custom Control via property definition?

> ID：16063965
> 
> 赞同：1
> 
> 时间：2013-04-17T15:20:56.173
> 
> 标签：xpages

I'm using a property definition to pass a document datasource into a custom control.

Is there a way to bind that datasource to the page the same way as if I had defined it on the page itself?

What I'm looking for is a way to use my passed-in ds for simple data binding in controls avoiding computed EL statements. What's more important: is there a way to address the datasource's event handlers (like querySaveDocument) from inside my custom control? Or can I only address them in the page where the ds has been defined originally?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:23:18.097

[自定义控件启蒙](https://prezi.com/gubendoqbl1t/custom-controls-enlightenment/)中描述了该方法以及有关自定义控件的一些其他想法。看看然后使用汤米的图书馆

# jquery - Uncaught ReferenceError: $ is not defined when jquery.js is at end of document

> ID：16063969
> 
> 赞同：21
> 
> 时间：2013-04-17T15:21:07.170
> 
> 标签：jquery, html, dom

I have a project where all the JS files are referenced in the footer, as is recommended for speed of page loading, including the link to the Jquery file. This code produces an "Uncaught ReferenceError", I assume because Jquery has not been defined before my script is called:

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    </head>
    <body>
        <p>
            <a href="#" data-toggle="popover" title="first popover" id="example">hover over me</a>
        </p>
        <script type="text/javascript"> 
            $(function(){
                $('#example').popover({ trigger:'hover' });
            })
        </script>

        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.js"></script>
    </body>
</html> 
```

If I move the Jquery link to the header, then the code runs fine, but this will slow the page loading time.

Is there a better way to declare my function so that it does not throw this UncaughtReference error, or is keeping the Jquery link in the head the best solution?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T15:22:37.293

那是因为你在尝试使用`jQuery`之前`jQuery`已经加载了。您需要将库放在`jQuery`文档的开头

```
<head>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
</head> 
```

通常，您的脚本位于靠近正文标记和库的文档末尾，例如您正在使用的库`<head>`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-08T18:46:33.473

我喜欢将 jquery 放在底部，您只需要确保首先加载整个 DOM，并在没有 jQuery 的情况下检查它，因为它还不能使用。尝试改用这个：

```
document.addEventListener("DOMContentLoaded", function(event) { 
      $(function(){
          $('#example').popover({ trigger:'hover' });
      });
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-17T15:22:18.427

在引用 jQuery 库之前，您需要包含 jQuery。

改成这样：

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>

<script type="text/javascript"> 
$(function(){
   $('#example').popover({ trigger:'hover' });
});
</script> 
```

另请注意，最好在文档的页脚中包含 jQuery 和其他 JavaScript，以确保页面呈现不会延迟。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-11T16:56:59.070

最近在 jsTree 网站上，我看到了另一种技术

在顶部（在 HEAD 标签中）你设置了这个：

```
<script>window.$q=[];window.$=window.jQuery=function(a){window.$q.push(a);};</script> 
```

现在您可以`<script>$(function () { /* your $() calls here */ });</script>` 随时随地进行...

最后包括 jquery.js 作为usal，然后最后一个脚本是：

```
<script>$.each($q,function(i,f){$(f)});$q=null;</script> 
```

希望这对某人有用...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T15:23:43.853

脚本按顺序从文档的顶部到底部执行，因此您试图在加载之前引用 jQuery 库。

为了解决这个问题，您可以将自己的脚本放在一个单独的文件中，然后在 jQuery 库之后导入它们，或者将您的脚本标签放在 jQuery 导入下面。

# sql - SQL 使用 CASE WHEN 替换内部更新

> ID：16063972
> 
> 赞同：1
> 
> 时间：2013-04-17T15:21:10.003
> 
> 标签：sql, sql-server-2008, tsql

嘿伙计们，我一直试图自己解决这个问题一段时间，但我需要一些帮助，这是我的代码：

```
UPDATE prop_Notes 
SET Notes += 
            (
              CASE 
                   WHEN Notes LIKE '%<p>" + ProductName + @"</p>%'
                   THEN replace(Notes,'<p>" + ProductName + @"</p>', '<p>" + ProductName + @"</p>')
                   ELSE '<p>" + ProductName + @"</p>'
              END
            )
FROM prop_Notes 
```

我希望能够在我的 sql 列 Notes 中添加/附加一个新字符串，如果它还没有包含该字符串。如果存在，只需替换现有项，因此字符串不会更改。当我尝试运行此程序时，我收到错误提示不明确的列注释。任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:25:46.020

您的查询的问题是`from`语句。您可以通过删除它来修复不明确的列。

如果我正确理解您的问题，我建议您考虑一个更简单的替代方案，例如：

```
UPDATE prop_Notes 
    SET Notes = coalesce(Notes, '') + '<p>" + ProductName + @"</p>'
    where Notes not LIKE '%<p>" + ProductName + @"</p>%' 
```

在这种情况下，您需要了解以下中的别名`updates`：

```
UPDATE pn
SET Notes += 
            (
              CASE 
                   WHEN Notes LIKE '%<p>" + ProductName + @"</p>%'
                   THEN replace(Notes,'<p>" + ProductName + @"</p>', '<p>" + ProductName + @"</p>')
                   ELSE '<p>" + ProductName + @"</p>'
              END
            )
FROM prop_Notes pn 
```

# c# - 休眠映射列表 其中 Class 有自己的表

> ID：16063974
> 
> 赞同：0
> 
> 时间：2013-04-17T15:21:19.617
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

我正在尝试为类创建映射：

```
public class Employer
    {
        public virtual int Id { get; protected set; }
        public virtual string Name { get; set; }
        public virtual IList<Field> Fields { get; set; }
        public virtual string Location { get; set; }
        public virtual string Phone { get; set; }
    }

public class Field
    {
        public virtual int Id { get; protected set; }
        public virtual string Description { get; set; } 
    } 
```

我的映射看起来像：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="lab" assembly="lab">

  <class name="Employer" table="Employer">
    <id name="Id">
      <generator class="native"/>
    </id>
    <property name="Name" />

    <list name="Fields" cascade="all-delete-orphan">
      <key column="EmployerId" />
      <index column="FieldIndex" />
      <one-to-many class="Field"/>
    </list>

    <property name="Location" />
    <property name="Phone" />
  </class>

</hibernate-mapping>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="lab" assembly="lab">

  <class name="Field" table="Field">
    <id name="Id">
      <generator class="native"/>
    </id>
    <property name="Description" />
  </class>

</hibernate-mapping> 
```

代码如下：

```
var session = configuration.BuildSessionFactory().OpenSession();
var transaction = session.BeginTransaction();
var emp = new Employer();
emp.Name = "Mera";
emp.Fields = new List<Field> ();
emp.Fields.Add(new Field() { Description = "C#" });
emp.Fields.Add(new Field() { Description = "C++" });
emp.Location = "Street";
emp.Phone = "02";
session.Save(emp);
transaction.Commit();

var transaction2 = session.BeginTransaction();
var emp2 = new Employer();
emp2.Name = "Mera2";
emp2.Fields = session.CreateQuery("from Field").List<Field>();
emp2.Location = "Street";
emp2.Phone = "02";
session.Save(emp2);
transaction2.Commit(); 
```

此代码只是将字段表中的旧条目替换为第二个雇主的新条目。所以 Field 表仍然有 2 条记录，而 Employer 表有 2 条记录。

如您所见，我需要如果 2 个字段相等（相同的描述），则两个雇主都应该具有相同的对象引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:02:03.213

As JamesB has said in his comment this looks like a many-to-many relationship. Many-to-Many relationships require an intermediate table otherwise you will get the behavior you have seen.

To get the desired behavior you will need to create a new table called something like `EmployerFields`. This table will need to have two foreign key fields, one for `Employer` and the other for `Fields`, and a field for the index, `FieldIndex`. The FKs can be called something like `EmployerId` and `FieldId` respectively.

Then the list mapping will then need to be changed as shown below.

```
<list name="Fields" cascade="all-delete-orphan" table="EmployerFields">
  <key column="EmployerId" />
  <index column="FieldIndex" />
  <many-to-many class="Field" column="FieldId" />
</list> 
```

# java - 链表上的冒泡排序实现

> ID：16063976
> 
> 赞同：0
> 
> 时间：2013-04-17T15:21:25.147
> 
> 标签：java, linked-list, bubble-sort

我在“curr.names.length()-1”中的 LinkList.java 中遇到错误。.length 是一个错误。我该如何解决？这里还是新手，我不太了解Java。只是想我会试一试。这是我得到的代码：

*单节点.java*

```
public class SinglyNode
{
public Object names;
public SinglyNode next;

public SinglyNode (Object name1)
{
    names = name1;
    next = null;
}

public void setNext(SinglyNode next1)
{
    next = next1;
}

Object getObject()
{
    return names;
}

SinglyNode getNext()
{
    return next;
}

void displayLink()
{
    System.out.print("{" + names + "}");
}
} 
```

*LinkList.java*错误在这里

```
public class LinkList
{
SinglyNode first;
SinglyNode last;

public boolean isEmpty()
{
    return (first == null);
}

void insertFirst(Object name1)
{
    SinglyNode newNode1 = new SinglyNode(name1);
    newNode1.next = first;
    first = newNode1;
}

void display()
{
    SinglyNode current = first;
    while(current != null)
    {
        current.displayLink(); // print data
        current = current.next; // move to next link
    }
    System.out.println("\n");
}

public void bubbleSort()
{
    int length = 0;
    SinglyNode hold = first;
    while(true)
    {
        if(hold == last)
        {
            break;
        }
        hold = hold.next;
        length++;
    }
    while(true)
    {
        if(length == 0)
        {
            break;
        }
        int i = 0;

        SinglyNode curr = first;
        while(true)
        {
            if(i == length)
            {
                break;
            }
            if( curr.names.charAt(curr.names.length()-1) > 
                    curr.next.names.charAt(curr.next.names.length()-1))
            {
                swap(curr);
            }
            curr = curr.next;
            i++;
        }
        length--;
    }
}

private void swap(SinglyNode node)
{
    Object temp = node.names;
    node.names = node.next.names;
    node.next.names = temp;
}
} 
```

这是主类 *MainApp.java*

```
ppublic class MainApp
{
public static void main (String args[])
{
    LinkList list = new LinkList();

    list.insertFirst("Squirtle");
    list.insertFirst("Bulbasaur");
    list.insertFirst("Charmander");
    list.insertFirst("Pichu");
    list.insertFirst("Ghastly");
    list.insertFirst("Mewtwo");
    list.insertFirst("Dialga"); 

    System.out.println("LIST: ");
    list.display();

    System.out.println("BUBBLE SORT: ");
    list.bubbleSort();
    list.display();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:29:04.707

`Object`没有`length()`方法 - 您只能调用`.length()`具有适当方法签名的类。你打算这是一个`String`吗？如果是这样，请将您的代码更改为`public String names`, `public SinglyNode(String name1)`, and `String getObject()`(or `String getName()`or `String getString()`)

# php - 继承php中的通用基类

> ID：16063984
> 
> 赞同：0
> 
> 时间：2013-04-17T15:21:58.980
> 
> 标签：php

我正在开发具有两种类型用户的应用程序。我有一个抽象基类来为两种用户类型提供通用功能：发布者和消费者。目前我需要在同一页面上显示发布者和消费者的信息。当我同时包含 consumer.php 和 publisher.php 时，我收到以下错误：

> ```
> Fatal error: Cannot redeclare class baseUser ... 
> ```

php中不可能包含两个继承同一个基类的类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:23:32.390

您应该使用`require_once`来确保您的基类文件只包含在您的代码库中一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:28:59.223

您面临的错误是由“baseUser”类定义的多次包含引起的。

这意味着您不止一次地包含类文件。确保您使用`include_once`or`require_once`而不是常规的`include`or `require`。

您也可以制作自己的控制机制（使用标记变量，就像您在 C++ 中所做的那样），但我建议使用上面解释的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:29:25.383

您应该研究[命名空间](http://php.net/manual/en/language.namespaces.php)和[自动加载](http://www.php.net/manual/en/function.spl-autoload-register.php)，因此您不会再考虑文件系统，而是考虑真正的代码库。

[Composer](http://getcomposer.org/doc/00-intro.md#autoloading)为您完成这一切，遵循 PHP OOP 社区目前使用的约定。

这样你就可以专注于真正的发展，而不是`require`陈述[我们在 2013 年 ^^]。

# html - 表格单元格对齐让我发疯

> ID：16063985
> 
> 赞同：0
> 
> 时间：2013-04-17T15:22:01.713
> 
> 标签：html, css, padding, css-tables

我不确定我需要应用什么 CSS 来使所有这些表格都具有相同的高度/填充。

看看 Step 和 Abs 是如何与其他人不一致的（看看底部边框）——这让我发疯了，我不知道如何把它弄直。

任何帮助将不胜感激。

[http://www.thedynamicfitness.com/pearland/classes.html](http://www.thedynamicfitness.com/pearland/classes.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:29:07.600

如果您添加`vertical-align: top;`的`td`所有内容都与白色边框正确对齐（直到所有标题都是 1 行宽）

# c++ - 使用 Windows 中的字符串提升序列化运行时错误

> ID：16063986
> 
> 赞同：0
> 
> 时间：2013-04-17T15:22:04.793
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, boost-serialization

我们正在使用 boost::serialization 测试一个非常简单的序列化代码。测试只是在文件中写入一个 std::string。

它编译正常，但问题是它在调用 << 运算符时抛出异常。该文件仍然是空的。

test.exe 中 0x1004b370 (msvcr100d.dll) 0x000000000021647a 中未处理的异常：0xC0000005：0x000000000021647a 中的访问冲突

我们在 windows 7 64 位中使用使用 visualc++2010 编译的 boost 1.53 库。还尝试使用 Intel 12.1 64 位，但没有成功。

```
#include <fstream> 
#include <boost/serialization/string.hpp>
#include <boost/archive/text_oarchive.hpp> 

int main(int argc, char * argv[])
{
    std::string s = "HelloWorld!"; 

    std::ofstream file("archive.txt"); 
    boost::archive::text_oarchive oa(file); 

    oa << s;

    file.close();
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:53:15.763

我们发现问题出在我们在项目中使用的预处理指令 _HAS_ITERATOR_DEBUGGING=0 上。使用时，fstream 不能正常工作。任何想法为什么？这是 fstream 中的错误（不太可能）吗？谢谢

# highcharts - HighCharts：this.percentage 可以在工具提示格式化程序中访问吗？

> ID：16063996
> 
> 赞同：0
> 
> 时间：2013-04-17T15:22:18.697
> 
> 标签：highcharts

示例代码：

```
formatToolTip: function() {
        var tt = this.x + ' = ' + this.y + ' (this.percentage + ' %)';
        return tt;
} 
```

`this.percentage`总是未定义的。我是使用 highcharts 3.0.0 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:01:49.397

这是一个关于如何使用格式化程序函数来获取 %. 它依赖于知道数据的最大值，但您可以使用 getExtremes() 方法从图表中提取它。

[http://jsfiddle.net/jlbriggs/H3Q9h/5/](http://jsfiddle.net/jlbriggs/H3Q9h/5/)

```
var pcnt = Highcharts.numberFormat((this.y / 415 * 100),0,'.'); 
```

[http://api.highcharts.com/highcharts#Axis.getExtremes%28%29](http://api.highcharts.com/highcharts#Axis.getExtremes%28%29)

将方程中的 415 替换为设置为 getExtremes() 方法的 dataMax 值的变量。

# c# - cshtml页面内的异步加载

> ID：16063997
> 
> 赞同：4
> 
> 时间：2013-04-17T15:22:26.167
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asynchronous

可以在 Razor 中使用 Task (System.Threading) 吗？

我正在尝试做的是：我有一个要异步填充的表。

看代码：

```
@{
    Func<dynamic, object> preenche =
        @<text>
            <tr><td>oi1</td><td>oi2</td></tr>
        </text>;
}

...
<tbody>
    @Task.Factory.StartNew(() =>
        {
            foreach(Apontamento ap in Model.apontamentos)
            {
                preenche(ap);
            }
        })
</tbody> 
```

输出就是这样：`System.Threading.Tasks.Task`

可能吗？或者我可以使用 Ajax 来做我想做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:47:41.523

如果您希望页面立即呈现并出现，然后稍后发生某些事情（例如操作需要 5 秒才能完成），那么您可以通过执行类似的操作让页面在数据可用时更新（有关[.获取JSON](http://api.jquery.com/jQuery.getJSON/)）。

在**Razor 视图**中，您可以添加一些 JavaScript：

```
<script type="text/javascript">
    $.getJSON('LongRunningAsyncTask', function (result) 
    {
        // Populate table or other actions with: result.Data
        // ...
    });
</script> 
```

然后在您的**控制器**中，您将执行以下任务：

```
public JsonResult LongRunningAsyncTask()
{
    // Show this is async and won't render straight away...
    System.Threading.Thread.Sleep(5000);

    // Build up our view model
    var viewModel = new TestViewModel();

    // Send back as a Json result
    var result = new JsonResult();
    result.Data = viewModel;
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:29:49.093

您不应该在视图中执行此操作。进行异步操作，但是当您开始渲染视图时，所有数据都应该准备就绪。