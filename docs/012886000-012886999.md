# StackOverflow 问答 12886000-12886999

# javascript - 将 onchange 应用于特定的表单字段并设置新的隐藏输入

> ID：12886001
> 
> 赞同：0
> 
> 时间：2012-10-14T20:00:56.787
> 
> 标签：javascript, onchange

我正在构建一个事件表单，有一个添加重复事件规则的选项。

我有使用相关扩展的表单来显示重复事件规则。这个扩展 div 已经分配了 JS 来处理基于规则类型不需要的禁用/启用字段......特别是所有重复出现的表单字段都在 json 对象中定义。

我希望能够在表单保存期间检测规则是否已更改 - 如果重复规则已更改，我需要分配服务器端处理，因此我只想在规则已更改时执行此操作。

我正在考虑使用 JS 对循环表单模块中的每个字段动态应用 onchange 调用。

我对 JS 很陌生，所以在我更进一步之前，有没有关于如何最好地做到这一点的意见？请只使用纯Javascript！

最后一部分是在表单中添加一个 post var，我可以在我的提交脚本中检测到它，然后运行所需的重复事件规则。这不是“修复这段代码”问题，更多的是最好的方法问题。

# jquery - Jquery为输入赋值

> ID：12886002
> 
> 赞同：15
> 
> 时间：2012-10-14T20:00:57.830
> 
> 标签：jquery, input

我有以下输入字段

`<input type="text" name="location[state_id]" id="location[state_id]" value="" >`

我正在尝试使用以下 jquery 为那里分配一个值

```
$("#location\\[state_id\\]").val("5"); 
```

但它不起作用！仅当两者的名称都是位置时才有效。

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-14T20:09:49.110

作为`#`id 选择器，您可以尝试将输入的 id 设置为有效的 CSS id，并让输入的名称相同（我假设某种框架需要这种格式）。例如，HTML 可能如下所示：

```
<input type="text" id="location_state_id" name="location[state_id]" value="" /> 
```

和 jQuery 表达式：

```
$('#location_state_id').val('5'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-14T20:02:31.193

尝试这个

```
<input type="text" name="location[state_id]"class="input" id="location[state_id]" value="" >

$(".input").val("5"); 
```

或者

你可以使用生硬的回答：

`$("input[name='location[state_id]'").val("5");`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-14T20:11:39.280

如果您希望将`name`用作选择器的一部分，可以使用以下选择器：

```
$("input[name='location[state_id]'").val("5"); 
```

[演示](http://jsfiddle.net/ZjwJC/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T20:11:45.300

## jQuery

```
$('input[name="location[state_id]"]').val(5); 
```

# mysql - 如何从arraylist迭代php中的值以显示在html表中

> ID：12886003
> 
> 赞同：0
> 
> 时间：2012-10-14T20:00:57.470
> 
> 标签：mysql, html, arraylist, pdo

我能够以数组形式从我的数据库表中获取值。但我不知道如何在我的 `<table><tr><td>// values of subjectId comes here </td> <td>//values of subject Name comes here</td></tr></table>`. 我想在我的标签中一一迭代所有字段值。

在数组中我得到这样的值：

```
FIctionNon FIctionArray ( [0] => stdClass Object ( [subject_id] => 1 [subject_name] => FIction [creater_id] => 1 [created_date] => 2012-10-07 16:49:12 [update_id] => 1 [updated_date] => 2012-10-07 16:49:12 ) [1] => stdClass Object ( [subject_id] => 2 [subject_name] => Non FIction [creater_id] => 1 [created_date] => 2012-10-07 16:49:12 [update_id] => 1 [updated_date] => 2012-10-07 16:49:12 ) ) 
```

我获取输出的代码如下：

* * *

```
 $con = new connection(); 
     $info = new Subdetails_setup($con); 
     $results = $info->getSubjectInfo(); 
     print_r($results); 
```

我的方法看起来像这样：

```
 function getSubjectInfo()
 { 
    $sub_info = $this->con->prepare("SELECT * FROM subjectdetails");
    $sub_info->execute();

    $results = $sub_info->fetchAll(PDO::FETCH_OBJ);

    foreach ($results as $key)
        { 
           echo $key->subject_name; 
        }
    // Return the result array
        return $results;
   } 
```

我的桌子是。“主题详情”

```
 subject_id int(3) NO PRI NULL auto_increment
        subject_name varchar(150) NO NULL
        creater_id int(5) NO NULL
        created_date datetime NO NULL
        update_id int(5) NO NULL
        updated_date datetime NO NULL 
```

. 请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:04:55.447

To split apart your arrayed values, couldn't you use the explode function? I'm unfamiliar with it so I wouldn't be able to help with that. But, could you go about collecting your values, and echoing them a different way? Like shown below

```
$query = mysql_query("SELECT * from subjectdetails ORDER BY `subject_id` DESC ");
while($row = mysql_fetch_array($query)){
   $subjectid = $row['subject_id'];
   $subjectname = $row['subject_name'];
   (The rest of your values here)
   echo "
<table><tr><td>$subjectid</td> <td>$subjectname</td></tr></table>
";
} 
```

I did not test that, but it should work.

# android - UnsatisfiedLinkError 无法加载游戏 - cocos2d-x on Android

> ID：12886004
> 
> 赞同：4
> 
> 时间：2012-10-14T20:01:29.687
> 
> 标签：android, android-ndk, cocos2d-x

我正在尝试为 Android 创建一个新的 cocos2d-x 项目并遵循以下教程： [Cocos2d-x Android 集成](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)

最后，当我尝试运行应用程序时出现错误，说明：

```
10-14 21:52:37.510: E/AndroidRuntime(1568): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load game: findLibrary returned null 
```

“游戏”库是从生成的活动中加载的：

```
 System.loadLibrary("game"); 
```

但是我的项目中没有任何东西作为game.so。我只有 libgame.so 我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:06:15.200

您将 .so 文件放在哪里？确保它位于“libs”下，甚至可能位于“libs/armeabi”或“libs/armeabi-v7”下。如果它已经有 v7，请尝试删除它。

android 的命名约定将 libgame.so 变成 loadlibrary 的“游戏”.. 你的命名是正确的

还要确保你用 NDK 构建了这个库，或者这个“游戏”的制作者用 NDK 构建了这个库（从命名上看，好像是这样！）

好像你有一个 64 位的问题，可以在[这里找到](http://code.google.com/p/libgdx/issues/detail?id=85)

# matlab - matlab重塑函数 - 元素数量错误

> ID：12886005
> 
> 赞同：0
> 
> 时间：2012-10-14T20:01:48.077
> 
> 标签：matlab, matrix, reshape

嗨，我有以下代码

```
 A = squeeze(hourly_surplus(1,1,1,:));
    B = reshape(A,365,24); 
```

其中尺寸（A）= 8760 x 1

但是我得到了错误

```
 Error using reshape
 To RESHAPE the number of elements must not change 
```

这个错误出现在“B”行，但是我认为 A 有 8760 个元素，B = 365 x 24 也是 8760。可能出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:14:18.073

这个：

```
A=rand(8760,1);
B=reshape(A,365,24); 
```

工作正常，所以问题出在你的 A.

# javascript - 填充多维数组

> ID：12886007
> 
> 赞同：0
> 
> 时间：2012-10-14T20:02:04.447
> 
> 标签：javascript, multidimensional-array

下面的代码是我正在学习的初学者拼图应用教程的包含文件。该代码有效，但是现在我已经完成了教程，我正在尝试阅读预加载的未解释的文件。

我真的被“spacecount”变量绊倒了，它到底在做什么。任何人都可以用简单的英语评论每一行，这样我就可以更好地理解下面的代码是如何填充 rowCount 数组的。太感谢了。

```
var totalRows = puzzle.length;
var totalCols = puzzle[0].length;

/* Loop through the rows to create the rowCount array 
containing the totals for each row in the puzzle */

var rowCount = [];
for (var i = 0; i < totalRows; i++) {
  rowCount[i]="";
  spaceCount = 0;

  for (var j = 0; j < totalCols; j++) {
     if (puzzle[i][j] == "#") {
        spaceCount++; 

       if (j == totalCols-1) rowCount[i] += spaceCount + "&nbsp;&nbsp;";
       } else {
          if (spaceCount > 0) {
           rowCount[i] += spaceCount + "&nbsp;&nbsp;";
           spaceCount = 0;
        } 
      }    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:13:42.240

这是一个更清晰的版本：

```
var totalRows = puzzle.length;
var totalCols = puzzle[0].length;

/* Loop through the rows to create the rowCount array 
containing the totals for each row in the puzzle */

var rowCount = [];

for (var i = 0; i < totalRows; i++) {
    rowCount[i] = "";
    spaceCount = 0;

    for (var j = 0; j < totalCols; j++) {
        if (puzzle[i][j] == "#") {
            spaceCount++;

            if (j == totalCols - 1) {
                rowCount[i] += spaceCount + "&nbsp;&nbsp;";
            }
        } else if (spaceCount > 0) {
            rowCount[i] += spaceCount + "&nbsp;&nbsp;";
            spaceCount = 0;
        }
    }
}​ 
```

令人困惑的部分可能是`if`中间的块。

```
if (puzzle[i][j] == "#") {     // If a puzzle piece is `#` (a space?)
    spaceCount++;              // Increment the spaceCount by 1.

    if (j == totalCols - 1) {  // Only if we are on the last column, add the text
                               // to the row.
        rowCount[i] += spaceCount + "&nbsp;&nbsp;";
    }
} else if (spaceCount > 0) {   // If the current piece isn't a `#` but 
                               // spaces have already been counted,
                               // add them to the row's text and reset `spaceCount`
    rowCount[i] += spaceCount + "&nbsp;&nbsp;";
    spaceCount = 0;
}​ 
```

据我所知，此代码计算连续磅符号的数量并将此文本附加到每一行。

# android - 带有不同语言菜单的应用程序

> ID：12886016
> 
> 赞同：0
> 
> 时间：2012-10-14T20:03:33.237
> 
> 标签：android, ios, app-store, google-play, multilingual

我想为 android 和 ios 制作一个应用程序，它将有一个包含 4 或 5 种不同语言的主菜单。选择一种语言会将用户带到该菜单。我听说苹果和安卓不允许用不同的语言制作同一个应用程序（所以你不能用英语制作一个应用程序，用西班牙语制作同一个应用程序......等等）。

我的问题是，如果所有语言都在一个应用程序中并且用户选择了它，我能否将我的应用程序上传到市场？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:08:51.567

是的，您的应用程序中可以有多种语言，但启动两个应用程序，唯一的区别是语言不会得到 Apple 的批准。这是本地化应用程序的好读物：

1.  [IOS](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)
2.  [安卓](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)

祝你好运。

# c++ - 退出后从 C++ 程序永久设置环境变量

> ID：12886018
> 
> 赞同：3
> 
> 时间：2012-10-14T20:03:57.363
> 
> 标签：c++, bash, environment-variables

我正在编写一个多次运行 C++ 程序的 bash 脚本。我使用`getenv()`and`putenv()`来创建、获取和更新 C++ 程序中的环境变量。C++程序结束后，bash脚本需要抓取这些变量并执行一些基本逻辑。问题是当C++程序退出时，环境变量消失了。有没有办法在程序终止后永久存储这些变量，以便 bash 脚本可以使用它们？如果不是，那么在 bash 脚本和 C++ 程序之间共享变量的最佳方式是什么？我能想到的唯一解决方案是将输出写入文件。我不想在控制台中打印这些数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:10:34.643

每个进程都有自己的环境变量副本，当新进程启动时，通过从父进程复制它们来初始化环境变量。当您更改进程中的环境变量时，父进程对此一无所知。

为了将信息从孩子传回给父母，您需要建立一些其他类型的沟通渠道。它可能是磁盘上的文件，或管道，或者（取决于您的父级的能力，`bash`可能无法完成所有这些）共享内存或其他一些 IPC 机制。然后，父程序将负责根据从子程序接收到的信息更改自己的环境变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T18:22:43.020

我个人只能在 16 位 DOS 汇编程序中做到这一点，通过跟踪指向前一个进程的指针直到它指向自身，这意味着你已经到达 COMMAND.COM 的第一个实例，然后更改了它的手动环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T20:16:41.590

如果您的程序通过标准输出将变量作为字符串返回，如下所示：

```
FOO=23; BAR=45; 
```

然后，bash 可以这样称呼它：

```
eval `./your_program` 
```

bash 可以访问 end $FOO 和 $BAR。

要测试这个尝试：

```
eval `echo "FOO=23; BAR=45;"`
echo "$FOO $BAR" 
```

当然，在这种方法中，程序不会改变调用进程的环境变量（这是不可能的），而只是返回一个字符串，然后由 bash 评估，评估设置变量。

如果您的程序处理来自不可信来源的输入，请不要使用此方法。如果有人欺骗您的程序将“rm -rf /”打印到标准输出，您将注定失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:12:20.587

据我所知，在“标准”GNU/Linux 环境下，您可以通过 3 种方式设置环境变量：

*   使用命令行实用程序，例如`export`
*   编辑类似`~/.profile`或`~/.bashrc`为用户的文件或`/etc`系统下的等效文件
*   将临时值提供给这样的命令`CXX=g++ CUSTOM_VERSION=2.5 command`

最后一个通常用于自定义构建，它很好，因为它不会损害系统并且不会干扰任何系统设置或值或文件，并且在执行命令后一切都*恢复正常。*如果您想对一组特定的变量进行临时修改，这是最好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T20:12:54.797

程序无法在其父项中设置环境变量。或者，好吧，没有合法的方式。侵入其进程`ptrace`不算在内。:-)

您应该做的是在标准输出上输出环境变量。让 shell 脚本读取并设置它们。如果环境变量是您输出的全部，则调用非常简单：

```
`program` 
```

反引号将捕获程序的输出。然后它将用输出替换反引号。这将是设置 shell 变量的命令。然后稍后在您的 shell 脚本中确保执行以下操作：

```
export VAR1
export VAR2 
```

您需要导出命令才能将它们移动到传递给从 shell 启动的程序的环境中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T20:14:06.573

您无法设置在进程生命周期中存在的环境变量，因此最简单的解决方案是按照您的建议写入输出文件或写入从 Bash 传递的特定文件句柄：

C++：

```
int main (int argc, char* argv[])
{
   // missing error handling
   int fd = atoi(argv[1]);
   const char* env = "BLAH=SMURF";
   write(5, env, strlen(env));
   return 0;
} 
```

重击：

```
# discard stdout and stderr, redirect 5 to stdout so that it can be captured
# and tell the process that it should write to 5 (the first 5)
VARIABLES=`./command 5 2>&1 1>/dev/null 5>&1` 
```

这可能是一个疯狂的想法，但它*应该可以*工作:)

# asynchronous - 如何识别异步串行比特流中的起始位

> ID：12886026
> 
> 赞同：4
> 
> 时间：2012-10-14T20:05:09.623
> 
> 标签：asynchronous, serial-port

我正在为微处理器编写一些代码，以通过单线异步串行通信与外部设备进行通信。

我可以识别电线上从低/高（无论哪种方式）的转换，所以我可以找到位边界。鉴于我知道设备正在使用的波特率，我可以开始计算位，因此我可以读取来自设备的位流。

我在概念上苦苦挣扎的是识别一个起始位 - 找到一个字节帧的开始（假设我得到 8 位，无奇偶校验，1 个起始位，1 个停止位）。我知道每一帧都以开始位开始并以停止位结束，但我的理解是开始位和停止位看起来像任何其他位 - 所以它们没有什么特别之处可以将它们识别为开始位或停止位（除了他们的立场）。

我能想到的识别起始位的唯一方法是，它将成为持续空闲期后的第一个高位 - 也就是说，因为我期望 8 位没有奇偶校验，如果我得到 9 个或更多低位，那么线路空闲，下一个高位将是起始位。这一切都很好，但是如果我开始监听设备的中间比特流并且线路上没有 9 位或更多的空闲时间怎么办？我正在计算位，但是我如何识别哪个位是起始位以便我可以读取一个字节？如果我正在计算位，那么帧之间的任何内容都只能是位的整数倍（例如，停止“位”不能是 1.5 位），所以一切看起来都像位。

我希望我说得通...感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:51:50.427

起始位是让您的代码接收一个字节的原因。最好用状态机解释。您有 4 个基本状态：

*   状态“等待”：对数据线进行采样。当您看到起始位时，以 1.5 * 位时间启动计时器并进入“数据”状态
*   状态“数据”：等待定时器然后采样数据线记录位。将定时器重新启动到 1.0 * 位时间。只要您没有收到所有位，就重复。收到所有位后进入“停止”状态
*   状态“停止”：等待定时器和采样数据线检查停止位。如果错误则进入“错误”状态，如果错误则向接收缓冲区添加一个字节。回到“等待”状态。
*   状态“错误”：抱怨。等待 deus ex machina 回到“等待”状态。

因此，由此得出的基本见解是，您需要起始位才能使接收字节的代码继续运行。并且停止位很重要，因此您可以可靠地看到下一个字节的起始位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T20:46:33.083

我会让你的程序在某个点或另一个点读取序列并破译模式，来回移动 9 位，数据将有意义，具体取决于您正在传输的链。一旦识别出一种模式，可能会识别出数据是否有一个句点，然后我会查看是否在任何点使字节与句点代码匹配的位行（ascii 46）然后来回计算空格并建立开始和停止位。

# xcode - 在 4.2.1 版本之后在 Xcode 中播放视频

> ID：12886028
> 
> 赞同：0
> 
> 时间：2012-10-14T20:05:21.230
> 
> 标签：xcode

好像在 Xcode 4.2.1 版之后我的视频代码不起作用？

目标C代码：

```
NSURL *url = [NSURL fileURLWithPath:
  [[NSBundle mainBundle] pathForResource:@"h" ofType:@"mp4"]];

MPMoviePlayerViewController *playercontroller = 
  [[MPMoviePlayerViewController alloc] initWithContentURL:url];

[self presentMoviePlayerViewControllerAnimated:playercontroller];

playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

[playercontroller.moviePlayer play];
// [playercontroller release];
playercontroller = nil; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:12:07.063

尝试代替

```
[self presentMoviePlayerViewControllerAnimated:playercontroller];

[[self navigationController]presentMoviePlayerViewControllerAnimated:playercontroller]; 
```

如果您使用的是导航控制器。

# objective-c - 将 UIView 叠加在 ViewController 之上

> ID：12886030
> 
> 赞同：0
> 
> 时间：2012-10-14T20:05:25.323
> 
> 标签：objective-c, ios, ipad, uiview, uiviewcontroller

将 UIView 叠加在包含 UIWebView 的 UIViewController 之上的最佳方法是什么？

希望 UIView 的背景是透明的（它是基于 UIBezierPath 的绘图工具）。

我应该根据 CALayers 来做这个吗？

# android - 数据库显示在模拟器中，但不在我的 android 设备上

> ID：12886031
> 
> 赞同：0
> 
> 时间：2012-10-14T20:05:28.103
> 
> 标签：android, sqlite, android-assets

这是我的代码...

```
private static String DB_NAME = "pa1.db";
private static String DB_PATH = "/data/data/in.bitcode.sn/databases/";
private void copyDataBase() throws IOException {

    InputStream myInput = context.getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;

    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:30:22.703

您无法写入`/data`文件夹。这是一个 Android 系统文件夹。它在模拟器中工作，因为在模拟器中你是*[root](http://en.wikipedia.org/wiki/Superuser)*，而你可能不在你的设备中。

也许您想使用[Android 的集成备份 API](http://developer.android.com/guide/topics/data/backup.html)而不是这个。

# php - PHP打印字符串

> ID：12886033
> 
> 赞同：1
> 
> 时间：2012-10-14T20:05:52.143
> 
> 标签：php, html

我正在使用 var_dump 打印一个名为 $info 的变量。现在我需要打印 message_id 如下所示，但字符串没有被打印。

```
object(stdClass)[10]
  public 'date' => string 'Sun, 14 Oct 2012 19:45:26 +0100' (length=31)
  public 'Date' => string 'Sun, 14 Oct 2012 19:45:26 +0100' (length=31)
  public 'subject' => string 'deposit' (length=7)
  public 'Subject' => string 'deposit' (length=7)
  public 'message_id' => string '<CAKvS7sNb0Cb1AaAbCdEFGHerp5UyJuhfkcJj8P+8CZQj4VTGLA@mail.gmail.com>' (length=68)
  public 'toaddress' => string 'sbsa secretaccount <test@gmail.com>' (length=43) 
```

我正在使用这条线，

```
echo $info->message_id; 
```

另外，如果我尝试这个，

```
$temp =  '<CAKvS7sNb0Cb1AaAbCdEFGHerp5UyJuhfkcJj8P+8CZQj4VTGLA@mail.gmail.com>';
echo "::$temp::"; 
```

只有 :::: 被打印， $temp 变量被忽略？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:06:53.923

你有一个对象，而不是一个数组。采用：

```
echo $info->message_id; 
```

[php.net - 对象](http://php.net/manual/en/language.types.object.php)

作为对第二点的回应 - 由于字符串被封装在`<`and`>`中，浏览器将尝试将其显示为 HTML，如果您查看页面的源代码，您将看到您的`$temp`字符串在那里。

您可以使用[htmlentities()](http://php.net/manual/en/function.htmlentities.php)将字符转换为 HTML 实体：

```
echo htmlentites($temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:09:19.773

除了 deifwud 所说的你有一个*对象*而不是一个*数组*（它们不能像 JavaScript 中那样互换），你还应该注意任何形式的东西都`<blah blah blah>`被浏览器视为 HTML 标记并且不会显示生的。如果你去查看源代码，你会看到它就在那里。为避免此问题，请使用[`htmlspecialchars()`](http://php.net/htmlspecialchars)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:13:16.390

同意@deifwud 和@Kolink。你的字符串应该是：

```
 $temp = htmlspecialchars('<CAKvS7sNb0Cb1AaAbCdEFGHerp5UyJuhfkcJj8P+8CZQj4VTGLA@mail.gmail.com>');
   echo "::$temp::"; 
```

这将转义 < 和 > 以便浏览器不会像标记一样将它们融入其中。

# java - 深度复制图结构

> ID：12886036
> 
> 赞同：9
> 
> 时间：2012-10-14T20:06:33.617
> 
> 标签：java, data-structures, clone, deep-copy

我有一个带有节点的图形类，每个节点都可以连接到其他节点：

```
public class Node {
  List<Node> connections;
} 
```

我想制作整个图表的深层副本。作为第一次尝试，我尝试制作一个复制构造函数，例如：

```
public Node(Node other) {
  connections = new ArrayList<Node>();
  for (Node n : other.connections) { 
    connections.add(new Node(n));
  }
} 
```

所以深度复制一个图就是：

```
public Graph deepCopy () {
  Graph g = new Graph();
  g.nodes = new ArrayList<Node>();
  for (Node n : nodes) { 
    g.nodes.add(new Node(n));
  }
} 
```

但这不起作用，因为这破坏了节点之间的连接关系。我想知道是否有人建议以简单的方式做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T20:40:49.630

问题是您需要复制节点的身份，而不仅仅是它们的值。具体来说，当您复制某个节点时，您需要处理它所引用的节点的身份；这意味着复制构造函数或其他某种纯本地复制机制无法完成这项工作，因为它一次只处理一个节点。我不确定这是否有意义，但我已经输入了它，但我的退格键不起作用。

无论如何，您可以做的是传递一些其他对象，这些对象可以告诉哪个新节点对应于哪个旧节点。如果您想变得花哨（谁不想呢？），您可以将其称为[graph isomorphism](http://en.wikipedia.org/wiki/Graph_isomorphism)。这可以像地图一样简单。就像在这个完全未经测试的代码中一样：

```
// in Graph
public Graph deepCopy () {
  Graph g = new Graph();
  g.nodes = new ArrayList<Node>();
  Map<Node, Node> isomorphism = new IdentityHashMap<Node, Node>();
  for (Node n : nodes) { 
    g.nodes.add(n.deepCopy(isomorphism));
  }
  return g;
}

// in Node
public Node deepCopy(Map<Node, Node> isomorphism) {
    Node copy = isomorphism.get(this);
    if (copy == null) {
        copy = new Node();
        isomorphism.put(this, copy);
        for (Node connection: connections) {
            copy.connections.add(connection.deepCopy(isomorphism));
        }
    }
    return copy;
} 
```

Sergii 提到使用序列化；序列化在遍历对象图时实际上做了非常相似的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T20:12:36.360

是的，java中的深拷贝（不仅在java中）可以使用`serialization/deserialization` 这样的内存进行

```
public static Object copy(Object orig) {
        Object obj = null;
        try {
            // Write the object out to a byte array
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutputStream out = new ObjectOutputStream(bos);
            out.writeObject(orig);
            out.flush();
            out.close();

            // Make an input stream from the byte array and read
            // a copy of the object back in.
            ObjectInputStream in = new ObjectInputStream(
                new ByteArrayInputStream(bos.toByteArray()));
            obj = in.readObject();
        }
        catch(IOException e) {
            e.printStackTrace();
        }
        catch(ClassNotFoundException cnfe) {
            cnfe.printStackTrace();
        }
        return obj;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T20:06:37.933

有点晚输入。但是我遇到了类似的问题，但得到了不同的解决方案。但不确定它是否防弹。所以请随时发表评论，让我学习！

我有一个名为“数字”的类型，因为我没有创意命名的东西。每个“Numbers”类型的对象都有一个内部列表，可以携带“Numbers”类型的附加对象，其中每个对象都有一个附加“Numbers”列表，每个...等等。

基本上你可以制作一个类似于这样的树结构：

[![在此处输入图像描述](../Images/1ab3c8da9f39a72807e346711cee5ca2.png)](https://i.stack.imgur.com/bf9sR.png)

我通过在“数字”类中使用递归复制构造函数解决了深层复制问题。

**数字类：**

```
import java.util.ArrayList;

public class Numbers {

    private ArrayList<Numbers> numbers = new ArrayList<>();
    private int number;

    public Numbers(int number) {
        this.number = number;
    }

    public Numbers(Numbers numToCopy) {
        this.number = numToCopy.getNumber();
        ArrayList<Numbers> list = numToCopy.getNumbers();
        for(int i = 0; i < list.size(); i++) {
            Numbers n = new Numbers(list.get(i));
            numbers.add(n);
        }
    }

    public void addNumber(Numbers i) {
        numbers.add(i);
    }

    public ArrayList<Numbers> getNumbers() {
        return numbers;
    }

    public void setNumber(int i) {
        this.number = i;
    }

    public int getNumber() {
        return number;
    }

    public ArrayList<Numbers> getAllNumbers(ArrayList<Numbers> list) {
        int size = numbers.size();
        list.addAll(numbers);
        for(int i = 0; i < size; i++) {
            numbers.get(i).getAllNumbers(list);
        }
        return list;
    }

} 
```

**用法：**

```
import java.util.ArrayList;

public class NumbersTest {

    public NumbersTest() {

    }

    public static void main(String[] args) {
        Numbers num0 = new Numbers(0);
        Numbers num1 = new Numbers(1);
        Numbers num2 = new Numbers(2);
        Numbers num3 = new Numbers(3);
        Numbers num4 = new Numbers(4);
        Numbers num5 = new Numbers(5);
        Numbers num6 = new Numbers(6);

        num0.addNumber(num1);
        num0.addNumber(num2);

        num1.addNumber(num3);
        num1.addNumber(num4);

        num2.addNumber(num5);
        num2.addNumber(num6);

        num4.addNumber(num6);

        //Deep copy here!
        Numbers numCopy = new Numbers(num0);
        //Change deep down in graph of original
        num0.getNumbers().get(0).getNumbers().get(1).getNumbers().get(0).setNumber(799);
        //Printout of copy to show it was NOT affected by change in original.
        for(Numbers n : numCopy.getAllNumbers(new ArrayList<Numbers>())) {
            System.out.println(n.getNumber());
        }

    }

} 
```

使用代码表明，在原始 num0 对象的“图形”内部进行更改，不会更改由它制成的副本。

图中有两个六（**6**），没关系，因为它们在不同的分支上。不利的一面是，如果相同的数字会通过其中一条路径重复，例如在第一个 1 下方的某处有**(** 1 **)**。然后它将以无限循环结束。

 **请发表评论！:)**

# javascript - 当突出显示jQuery ui表单对话框中的输入区域时，如何阻止输入键提交表单？（示例代码）

> ID：12886037
> 
> 赞同：1
> 
> 时间：2012-10-14T20:06:40.317
> 
> 标签：javascript, forms, jquery-ui-dialog

请参阅下面的代码以获取工作演示。将打开一个 jQuery UI 模式对话框，并要求用户输入密码。如果该`submit`按钮突出显示，则一切正常。但是，如果输入区域仍然突出显示，则页面似乎重新加载，并且浏览器中的 URL 更改为`example.com?confirm_password=asdfasdf#`。

我怀疑这是因为我在对话框中嵌入了一个表单，但这是基于 jQuery 示例。

如何解决此问题，以便在突出显示文本输入框的情况下按 Enter 键相当于单击提交？

```
<html>
<head>
    <title>Problem Demo</title>
    <link href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
    <script src="http://code.jquery.com/jquery-1.7.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#myDialog').dialog({
                autoOpen: false,
                modal: true,
                buttons: {
                    "Submit": function() {
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                }
            });

            $('#openMyDialog').click(function() {
                $('#myDialog').dialog('open');          
            });
        });
    </script>
</head>
<body>
    <a id="openMyDialog" href="#">Open Dialog</a>
    <div id="myDialog">
        <p style="text-align: left;">Please enter your password.</p> 
        <form>
            <fieldset>
                <label for="confirm_password">Password</label>
                <input type="password" name="confirm_password" id="confirm_password" value="" />
            </fieldset>
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:09:24.697

看起来提交功能仅与按钮键一起使用（仅在单击按钮时才调用按钮提交功能）。

您应该使用显式绑定您的表单

```
$('yourformselector').submit(function(){
          $(this).dialog('close');
}); 
```

# jquery - 跨站 Ajax JSON 调用

> ID：12886038
> 
> 赞同：1
> 
> 时间：2012-10-14T20:06:44.777
> 
> 标签：jquery, ajax, json, jsonp, cross-site

我在处理要为其创建搜索功能的网站时遇到了很大的麻烦。这是一个在线游戏中的排名，但是搜索选项对于我的联盟来说是不够的。因此，我想进行 ajax 调用以获取所需的信息，但是根据我的尝试有几个问题：

*   如果我尝试将 ajax 调用作为 JSONP-Call 进行，则会在我的 firebug 中出现“无效标签”错误。我已经知道发生此错误是因为检索到的数据未包装到函数调用中。尽管我确实看到后面的 JSON 数据，但为什么它对我来说如此遥远？
*   如果我尝试使用 jQuery 进行简单的 getJSON 调用，我会收到几个错误，这些错误都指向由于跨站点脚本而出现的问题。JSON数据在另一台服务器上，所以这是一个大问题......

我个人能够直接正确地打开该站点（例如 www.onlinegamesite.com/api/?foo=foo&boo=false），如果我能够在浏览器中打开它，为什么我无法使其以纯编程方式工作?

我希望你有如何处理它的想法，在万维网中有太多关于它的线索，经过一天的寻找和一次又一次的尝试，我终于希望在这里得到帮助。

编辑：我当前的代码是这个：（尝试 JSONP）

```
$(document).ready(function() {
var data = $.ajax({
    url: "http://lastchaos.gamigo.com/de/ranking/api/?tabNam=realm_4&CurrLang=de&CurrCategorie=user&sEcho=1&iColumns=6&sColumns=&iDisplayStart=0&iDisplayLength=1025&sSearch=&bRegex=false&sSearch_0=&bRegex_0=false&bSearchable_0=true&sSearch_1=&bRegex_1=false&bSearchable_1=true&sSearch_2=&bRegex_2=false&bSearchable_2=true&sSearch_3=&bRegex_3=false&bSearchable_3=true&sSearch_4=&bRegex_4=false&bSearchable_4=true&sSearch_5=&bRegex_5=false&bSearchable_5=true&iSortingCols=1&iSortCol_0=0&sSortDir_0=asc&bSortable_0=true&bSortable_1=true&bSortable_2=true&bSortable_3=true&bSortable_4=true&bSortable_5=true",
    dataType: "jsonp"
    });
}); 
```

我之前的最后一次尝试是一些简单的 JSON 调用，但我无法正确调试它（在 IE 没有适当的调试工具时无法停止 FF 过滤 XSS）：

```
$(document).ready(function() {
var data = $.getJSON({
    url: "http://lastchaos.gamigo.com/de/ranking/api/?tabNam=realm_4&CurrLang=de&CurrCategorie=user&sEcho=1&iColumns=6&sColumns=&iDisplayStart=0&iDisplayLength=1025&sSearch=&bRegex=false&sSearch_0=&bRegex_0=false&bSearchable_0=true&sSearch_1=&bRegex_1=false&bSearchable_1=true&sSearch_2=&bRegex_2=false&bSearchable_2=true&sSearch_3=&bRegex_3=false&bSearchable_3=true&sSearch_4=&bRegex_4=false&bSearchable_4=true&sSearch_5=&bRegex_5=false&bSearchable_5=true&iSortingCols=1&iSortCol_0=0&sSortDir_0=asc&bSortable_0=true&bSortable_1=true&bSortable_2=true&bSortable_3=true&bSortable_4=true&bSortable_5=true",
    type: "json"
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:09:30.087

您可以使用此选项来执行此操作

1.  调用php页面
2.  向另一个站点发出 curl 请求
3.  获取 curl 输出数据
4.  将输出数据返回给ajax
5.  在您的代码中使用该输出数据

# java - Java RMI - 从 Ubuntu 到 OSX 的远程调用超级慢

> ID：12886039
> 
> 赞同：2
> 
> 时间：2012-10-14T20:06:51.943
> 
> 标签：java, rmi

当我从 OSX 服务器上的 RMI Ubuntu 客户端调用一个方法时，将 UnicastRemoteObject 作为参数传递，事情非常慢。如此缓慢，最终它会被执行，但更有可能的是，我在 2-3 分钟后出现超时异常。两台机器都在同一个网络中。这是一个新安装的 Ubuntu 12.04。我可以在使用的 RMI 端口上从 Ubuntu 机器远程登录到 OSX 机器，所以在这一点上，这似乎不是问题。我也可以在没有此 UnicastRemoteObject 参数的情况下调用服务器上的方法，并且一切正常。从 OSX 到 OSX 也很好...

这是服务器的启动方式：

```
LocateRegistry.createRegistry(port);
nodeManager = new NodeManagerImpl(maxConfigurationsPerNode, true);
Registry registry = LocateRegistry.getRegistry(host, port);
registry.rebind("NodeManager", nodeManager); 
```

这就是客户端连接和调用方法的方式：

```
Registry registry = LocateRegistry.getRegistry(host, port);
nodeManager = (NodeManager) registry.lookup("NodeManager");
handler = new NodeHandlerImpl();
id = nodeManager.register(handler, id); 
```

NodeHandlerImpl 基本上是这样的：

```
public class NodeHandlerImpl extends UnicastRemoteObject implements NodeHandler {
    public NodeHandlerImpl(boolean noSSL) throws RemoteException {
        super(0, null, null);
    }
....
} 
```

对“注册”的调用需要很长时间...... NodeHandler 扩展了 Remote。当我删除参数处理程序时，一切都会再次正常...

几个小时以来我有点卡在这里，任何线索都会很棒。

// 编辑：是的，反向 DNS 是错误的。有了这个提示，我找到了这个网站： http: [//www.communardo.de/home/techblog/2008/09/17/rmi-kommunikation-zu-remote-hosts-mit-unguenstiger-dns-konfiguration/](http://www.communardo.de/home/techblog/2008/09/17/rmi-kommunikation-zu-remote-hosts-mit-unguenstiger-dns-konfiguration/)

因此，我将客户端连接代码更改为以下内容，一切都很好：

```
System.setProperty("java.rmi.server.hostname", host);
Registry registry = LocateRegistry.getRegistry(host, port);
nodeManager = (NodeManager) registry.lookup("NodeManager");
handler = new NodeHandlerImpl();
id = nodeManager.register(handler, id); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:14:33.347

这很可能是 DNS 配置错误。Java 使用 DNS 和反向 DNS。在查找对方时，确保两者都在客户端和服务器主机上正常工作。

# objective-c - 重新加载数据时未显示 MBProgressHUD

> ID：12886042
> 
> 赞同：0
> 
> 时间：2012-10-14T20:07:01.330
> 
> 标签：objective-c, ios, ios5, mbprogresshud

当我的应用程序启动时，我加载了一个 JSON。

MBProgressHUD 在数据加载时正确显示微调器。

我还有一个刷新按钮，可以触发重新加载 JSON - 我希望它显示微调器。尽管数据已刷新，但微调器未显示。

知道我做错了什么吗？

这是我的 ViewController.m 中的相关代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    [self fetchPosts];
}

- (IBAction)refresh:(id)sender {
    [MBProgressHUD showHUDAddedTo:self.view animated:YES]; // NOT WORKING
    [self refreshPosts];
}

- (void)fetchPosts
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"http://mysite.com/app/"]];

        NSError* error;

        posts = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.collectionView reloadData];
        });
    });
}

- (void)refreshPosts
{
    NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString: @"http://mysite.com/app/"]];

    NSError* error;

    posts = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.collectionView reloadData];
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T01:48:48.533

您是否尝试将 refreshPosts 的整个代码（而不仅仅是对 reloadData 的调用）放在调度块中？我当然会尝试看看它是否有效。我认为您的数据下载可能会导致 UI 冻结，这可能会破坏 HUD。

# java - 使用邻居增量计算矩阵中的元素

> ID：12886043
> 
> 赞同：6
> 
> 时间：2012-10-14T20:07:03.940
> 
> 标签：java, algorithm, matrix

我有这个 Java 问题，我怀疑它与更高级别的算法有关，但我的搜索无法找到任何实用的东西。

您构造一个数组，如下所示：

```
1
1   1
1   2   1
1   3   3   1
1   4   6   4   1
1   5   10  10  5  1 
```

基本上，A [i,j] = A [i-1,j-1] +A [i-1,j]。它应该返回索引 (l, c) 处的元素：对于 (4, 1) 它应该返回 4，(5, 2) 返回 10，等等。我的解决方案很简单，但这还不够：

```
static long get(int l, int c){
    long[][] matrix = new long[l+1][l+1];
    matrix[0][0]=1;
    matrix[1][0]=1; 
    matrix[1][1]=1;
    for(int i=2;i<=l;i++){
        matrix[i][0]=1;
        for(int j=1;j<=i;j++){
            matrix[i][j] = matrix[i-1][j-1]+matrix[i-1][j];
        }   
    }
    return matrix[l][c];
} 
```

它不适用于较大的 l 和 c 值。使用 BigInteger 不起作用。我的搜索导致我进行循环倾斜和标量化，但我不知道从哪里开始。任何朝着正确方向发展的方向都值得赞赏。

PS：对不起新手，这是我的第一个问题！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T20:08:20.233

您正在描述[帕斯卡三角形](http://en.wikipedia.org/wiki/Pascal%27s_triangle)，其中存在一个封闭公式：

```
matrix[n][k] = n!/(k! * (n-k)!) 
```

PS如果这些数字看起来很熟悉，那是因为它们也来自[二项式定理](http://en.wikipedia.org/wiki/Binomial_theorem)，其中常见的例子是：

```
(x+y)^2 = 1* x^2 + 2xy + 1*y^2
(x+y)^3 = 1*x^3 + 3*xy^2 + 3yx^2 + 1*y^3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T20:09:19.773

你不需要使用循环，这只是[帕斯卡三角](http://en.wikipedia.org/wiki/Pascal%27s_triangle)，公式：

```
(n, k) = n! / ( k! * (n-k)!) 
```

将生成您对位置 (n, k) 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:14:19.493

试试这个：

```
static long get(int l, int c) throws Exception {
    if (l != c)
         throw new Exception("l != c");
    long[][] matrix = new long[l+1][l+1];
    matrix[0][0]=1;
    for (int i = 1; i <= l; ++i) {
         for (int j = 0; j <= i; ++j) {
              if (j - 1 >= 0) {
                    matrix[i][j] = matrix[i - 1][j] + matrix[i - 1][j - 1];
              } else {
                    matrix[i][j] = matrix[i - 1][j];
              }
         }
    }
    return matrix[l][c];
} 
```

# ruby-on-rails - git push heroku master 无法识别我的 Gemfile.lock 文件

> ID：12886044
> 
> 赞同：1
> 
> 时间：2012-10-14T20:07:04.937
> 
> 标签：ruby-on-rails, git, heroku, push, gemfile

我第一次使用 Git 推送到 Heroku，我收到了错误消息：`Gemfile.lock is required. Please run "bundle install" locally and commit your Gemfile.lock.`

我已经运行`bundle install`，将文件添加到`git`repo，提交了更改。在存储库和我的目录中都可以看到`Gemfile.lock`，但是当我运行该命令时`git push heroku master`，它始终会抛出该错误。

我究竟做错了什么：

这是我电脑上的 git repo

```
$git ls-files
.bundle/config
.gitignore
.rspec
Gemfile
Gemfile.lock
README
Rakefile
app/assets/images/rails.png
app/assets/javascripts/application.js
app/assets/stylesheets/application.css
..<snip>.. 
```

这是 repo 的 git 状态。

```
$git status
# On branch ch_ruby_intro
# Your branch is ahead of 'origin/ch_ruby_intro' by 6 commits.
#
nothing to commit (working directory clean) 
```

尝试部署时出错。

```
$git push heroku master
Counting objects: 239, done.
Compressing objects: 100% (140/140), done.
Writing objects: 100% (239/239), 50.30 KiB, done.
Total 239 (delta 74), reused 215 (delta 67)

-----> Heroku receiving push
-----> Ruby/Rails app detected
 !
 !     Gemfile.lock is required. Please run "bundle install" locally
 !     and commit your Gemfile.lock.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

为什么看不到 Gemfile.lock 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:11:28.953

可能是您提交到错误的分支？您正在推动 master 并致力于 ch_ruby_intro。

# javascript - 随着储蓄逐年增长，如何为储蓄计算器制作 for 循环

> ID：12886048
> 
> 赞同：0
> 
> 时间：2012-10-14T20:07:23.030
> 
> 标签：javascript, for-loop, calculator

我正在用javascript制作一个计算器，它是关于计算储蓄的。这都与数学计算有关。按月还款计算n年储蓄的公式为：

```
S = m * x * (1 + (((m+1)/2m)*i) * ((1+i)^n - 1)/i

where i = interest rate 
x = the monthly payment 
m = the number of payments within a year (which by default is 12) 
```

现在的问题是，在我们的州，这个人每年都会得到一笔相等的退款：

`S * 0.1`但是如果`S * 0.1 > 2000`那个人那年得到2000，第二年的差额`(S * 0.1) - 2000`+ 2000。所以实际上他每年都得到`2000 + (S * 0.1) - 2000`，但S每年都在变化。

如何在 javascript 中执行此操作，以便 javascript`S`在计算下一年时自动递增。我希望我已经解释得足够好。我认为它必须有一些循环。上面的公式并不那么重要。但是，逐年获得越来越多的国家援助`S`很难计算。请帮忙！！！这是代码：

```
var savings = mmm * bbb * (1 + ((mmm+1)/2mmm)*i);
var state_aid = (savings * 0.1) - 2000) *(n-1) + 2000*n;

mmm = the number of times per year that we pay,
bbb = the amount of payment,
n = the years of payment,
i = the interest rate 
```

这就是国家援助的计算方式，问题是储蓄每年都在增长，计算援助的基础不再相同，而是以非线性斜率增长。

# android - 自定义列表偏好选择带有图像的应用程序

> ID：12886054
> 
> 赞同：0
> 
> 时间：2012-10-14T20:09:00.500
> 
> 标签：android, android-preferences

我想自定义`ListPreference`让用户从他的应用程序中进行选择。这目前效果很好。除了：

*   过滤掉系统应用程序（我已经过滤了，`(info.activityInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1`但它仍然显示系统应用程序）
*   图标（“检查所有”项目除外；我想我需要以某种方式操作布局？；**找到解决方案： http: [//www.devmil.de/](http://www.devmil.de/?p=63)** ?p=63 ）

首选项.xml

```
<com.example.gui.preference.ApplicationListPreference
    android:key="pref_key_choose_apps"
    android:dependency="pref_key_enable_server"
    android:title="@string/choose_apps"
    android:dialogTitle="@string/choose_apps"
    android:entries="@array/pref_entries_choose_apps"
    android:entryValues="@array/pref_values_choose_apps"
    example:checkAll="#ALL#" /> 
```

数组.xml

```
<string-array name="pref_values_choose_apps">
    <item>#ALL#</item>
</string-array>

<string-array name="pref_entries_choose_apps">
    <item>All</item>
</string-array> 
```

属性.xml

```
<declare-styleable name="ApplicationListPreference">
    <attr format="string" name="checkAll" />
</declare-styleable> 
```

应用程序列表首选项：

```
public class ApplicationListPreference extends ListPreference {

    private final static String SEPARATOR = ";";

    private String checkAllKey = null;
    private boolean[] mClickedDialogEntryIndices;

    public ApplicationListPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        checkAllKey = context.obtainStyledAttributes(attrs, R.styleable.ApplicationListPreference).getString(R.styleable.ApplicationListPreference_checkAll);

        List<CharSequence> entries = new ArrayList<CharSequence>();
        for (CharSequence entry : getEntries()) {
            entries.add(entry);
        }

        List<CharSequence> entryValues = new ArrayList<CharSequence>();
        for (CharSequence entryValue : getEntryValues()) {
            entryValues.add(entryValue);
        }

        Intent intentFilter = new Intent(Intent.ACTION_MAIN, null);
        intentFilter.addCategory(Intent.CATEGORY_LAUNCHER);

        PackageManager pm = context.getPackageManager();
        List<ResolveInfo> appList = pm.queryIntentActivities(intentFilter, PackageManager.PERMISSION_GRANTED);
        Collections.sort(appList, new ResolveInfo.DisplayNameComparator(pm));

        for (ResolveInfo info : appList) {
            if ((info.activityInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1) {
                entryValues.add(info.activityInfo.packageName);
                entries.add(info.loadLabel(pm).toString());
            }
        }

        setEntries(entries.toArray(new CharSequence[entries.size()]));
        setEntryValues(entryValues.toArray(new CharSequence[entryValues.size()]));
    }

    public ApplicationListPreference(Context context) {
        this(context, null);
    }

    @Override
    public void setEntries(CharSequence[] entries) {
        super.setEntries(entries);
        mClickedDialogEntryIndices = new boolean[entries.length];
    }

    @Override
    protected void onPrepareDialogBuilder(Builder builder) {
        CharSequence[] entries = getEntries();
        CharSequence[] entryValues = getEntryValues();
        if (entries == null || entryValues == null || entries.length != entryValues.length) {
            throw new IllegalStateException("Irregular array length");
        }

        restoreCheckedEntries();
        builder.setMultiChoiceItems(entries, mClickedDialogEntryIndices, new DialogInterface.OnMultiChoiceClickListener() {
            public void onClick(DialogInterface dialog, int which, boolean val) {
                if (isCheckAllValue(which) == true) {
                    checkAll(dialog, val);
                }

                mClickedDialogEntryIndices[which] = val;
            }
        });
    }

    private boolean isCheckAllValue(int which) {
        final CharSequence[] entryValues = getEntryValues();
        if (checkAllKey != null) {
            return entryValues[which].equals(checkAllKey);
        }

        return false;
    }

    private void checkAll(DialogInterface dialog, boolean val) {
        ListView lv = ((AlertDialog) dialog).getListView();
        int size = lv.getCount();
        for (int i = 0; i < size; i++) {
            lv.setItemChecked(i, val);
            mClickedDialogEntryIndices[i] = val;
        }
    }

    public String[] parseStoredValue(CharSequence val) {
        if (val == null || "".equals(val)) {
            return null;
        }

        return ((String) val).split(SEPARATOR);
    }

    private void restoreCheckedEntries() {
        CharSequence[] entryValues = getEntryValues();
        String[] vals = parseStoredValue(getValue());

        if (vals != null) {
            List<String> valuesList = Arrays.asList(vals);
            for (int i = 0; i < entryValues.length; i++) {
                CharSequence entry = entryValues[i];
                if (valuesList.contains(entry)) {
                    mClickedDialogEntryIndices[i] = true;
                }
            }
        }
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        ArrayList<String> values = new ArrayList<String>();

        CharSequence[] entryValues = getEntryValues();
        if (positiveResult && entryValues != null) {
            for (int i = 0; i < entryValues.length; i++) {
                if (mClickedDialogEntryIndices[i] == true) {
                    String val = (String) entryValues[i];
                    if (checkAllKey == null || (val.equals(checkAllKey) == false)) {
                        values.add(val);
                    }
                }
            }

            String value = join(values);
            if (callChangeListener(value)) {
                setValue(value);
            }
        }
    }

    protected static String join(Iterable<? extends Object> pColl) {
        Iterator< ? extends Object > oIter;
        if (pColl == null || (!(oIter = pColl.iterator()).hasNext())) {
            return "";
        }

        StringBuilder oBuilder = new StringBuilder(String.valueOf(oIter.next()));
        while (oIter.hasNext()) {
            oBuilder.append(SEPARATOR).append(oIter.next());
        }

        return oBuilder.toString();
    }

    public static boolean contains(String straw, String haystack) {
        for (String val : haystack.split(SEPARATOR)) {
            if (val.equals(straw)) {
                return true;
            }
        }

        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:40:55.330

对于系统应用过滤，您应该检查`flags`ApplicationInfo 而不是 ActivityInfo。尝试修改这个：

```
(info.activityInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1 
```

到

```
(info.activityInfo.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 1 
```

# asp.net-mvc-3 - mysql 提供程序中有什么？

> ID：12886068
> 
> 赞同：0
> 
> 时间：2012-10-14T20:09:53.650
> 
> 标签：asp.net-mvc-3, web-config, mysql-connector

在过去的 3 个月里，我一直在使用一种解决方法来解决 mysql 连接器打开和关闭的问题。我什至最近提交了一个[错误报告。](http://bugs.mysql.com/bug.php?id=67183)但是，我发现 mysql 连接器的多个实例在高级 linq 使用的情况下失败。有些可以追溯到 2009 年（3 年），但仍未解决。几乎在所有情况下，用户都会切换连接器。

我正在考虑做同样的事情。但是，我发现 mysql 连接器在我的项目中存在的位置。据我所知，它只是一个包含`.dll`（mysql.data 和 mysql.data.entity）。之后，它仅在 web.config 中被引用。

对连接器的第一个引用位于连接字符串中`providerName = "MySql.Data.MySqlClient"`。

第二个参考是提供者的定义

```
<system.data>
 <DbProviderFactories>
  <clear />
  <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" 
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, mysql.data, Version=6.5.4.0,
          Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
 </DbProviderFactories>
</system.data> 
```

第三个是程序集内部

```
<add assembly="mysql.data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" /> 
```

最后是另一个程序集参考

```
<dependentAssembly>
    <assemblyIdentity name="MySql.Data" publicKeyToken="c5687fc88969c44d" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-6.5.4.0" newVersion="6.5.4.0" />
</dependentAssembly> 
```

这真的是连接器的全部占用空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:37:48.357

`Is this really the whole footprint of the connector?`

是和不是。

**是的**

就引用连接器的项目而言，这是整个足迹。唯一需要进行的配置是拥有`MySql.Data`并`MySql.Data.Entity`添加为对项目的引用。通常这些在`packages`文件夹内，然后`bin`在添加引用后复制到文件夹中。

**不**

连接器有很多内部代码在运行。由于它的定义位置，连接器继承自`DbProviderFactory`. 这个扩展涉及许多类和子类，它们决定了如何与 mysql 进行交互。因为它是开源的，所以可以从 oracle 下载实际代码。

# iphone - 同时隐藏/显示导航栏、工具栏和状态栏

> ID：12886069
> 
> 赞同：1
> 
> 时间：2012-10-14T20:09:59.297
> 
> 标签：iphone, ios, uinavigationbar, uitoolbar, uistatusbar

我希望在我的 iPhone 应用程序中有一个“全屏模式”，当用户按下按钮时，状态栏、导航栏和工具栏会在屏幕外显示动画（就像 iOS 6 中 Safari 在横向模式下的全屏功能）。我基本上展示了一个 UINavigationController 和一个 UIViewController 作为顶视图控制器。

我可以通过从 UIViewController 执行此操作来隐藏元素：

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];

    [self.navigationController setToolbarHidden:YES animated:YES];

    [self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

但是，动画不同步，内容的大小调整也不是完全流畅的。如果您使用 Safari 全屏功能，您会看到动画非常流畅。关于如何通过完美动画实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:17:22.097

您可以执行以下操作：

```
[UIView animateWithDuration:0.4 animations:^() {
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self.navigationController setToolbarHidden:YES animated:NO];
    [self.navigationController setNavigationBarHidden:YES animated:NO];
    self.yourView.frame = CGRectMake(0, 0, 320, 480); // If you have several views, set all their frames to 'fullscreen'
}]; 
```

您可以通过使用方法使用自定义动画 `UIView animateWithDuration:( delay: options: animations:^(void)animations completion:^(BOOL finished)completion`，只需查看`UIViewAnimationOptions`.

# android - Android - ImageButton onClick 在 ICS 和 JB 中工作，但在 GB 中不工作

> ID：12886076
> 
> 赞同：3
> 
> 时间：2012-10-14T20:11:02.713
> 
> 标签：android, onclick, imagebutton, android-2.3-gingerbread

我创建了一个有点简单的布局，总共有 4 个按钮：布局底部的 3 个按钮并排（在相对布局中）和几乎位于屏幕中间的巨大按钮。

在 Ice Cream Sandwich 和 Jellybean 上，我可以单击任何按钮，一切正常（即调用了各自的 onClick 函数），但奇怪的是，在 Gingerbread 上，底部的 3 个按钮中的任何一个都可以工作，但中间的按钮却不行。onClick 触发了许多指令，据我所知，这些指令都没有被执行，它没有被调用，我不知道为什么。

布局代码如下。任何帮助是极大的赞赏！

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/main_off"
android:orientation="vertical"
android:weightSum="10" >

    <ImageButton
        android:id="@+id/button_activate"
        android:layout_width="155dp"
        android:layout_height="0dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="170dp"
        android:layout_weight="7.2"
        android:background="@drawable/transparent"
        android:clickable="true"
        android:contentDescription="@string/app_name"
        android:onClick="activate"
        android:src="@drawable/transparent" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:layout_marginTop="80dp"
        android:layout_weight="2" >

        <ImageButton
            android:id="@+id/button_help"
            android:layout_width="90dp"
            android:layout_height="fill_parent"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="0dp"
            android:background="@drawable/transparent"
            android:clickable="true"
            android:contentDescription="@string/app_name"
            android:onClick="openhelp"
            android:src="@drawable/transparent" />

        <ImageButton
            android:id="@+id/button_settings"
            android:layout_width="55dp"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="0dp"
            android:layout_toLeftOf="@+id/button_help"
            android:background="@drawable/transparent"
            android:clickable="true"
            android:contentDescription="@string/app_name"
            android:onClick="opensettings"
            android:src="@drawable/transparent" />

        <ImageButton
            android:id="@+id/button_contact"
            android:layout_width="70dp"
            android:layout_height="fill_parent"
            android:layout_alignParentRight="true"
            android:layout_marginTop="0dp"
            android:layout_toRightOf="@+id/button_help"
            android:background="@drawable/transparent"
            android:clickable="true"
            android:contentDescription="@string/app_name"
            android:onClick="opencontact"
            android:src="@drawable/transparent" />

    </RelativeLayout>

</LinearLayout> 
```

调用布局的活动（main.xml）：

```
//bunch of imports

public class MainActivity extends Activity {

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LinearLayout layout = (LinearLayout) findViewById (R.id.main_layout);

    boolean serviceOn = isMyServiceRunning();

    if(serviceOn==true) layout.setBackgroundResource(R.drawable.main_on);
    else if (serviceOn==false) layout.setBackgroundResource(R.drawable.main_off); 
}

@Override
protected void onResume() {
    super.onResume();
    LinearLayout layout = (LinearLayout) findViewById (R.id.main_layout);

    boolean serviceIsOn = isMyServiceRunning();

    if(serviceIsOn==true) layout.setBackgroundResource(R.drawable.main_on);
    else if (serviceIsOn==false) layout.setBackgroundResource(R.drawable.main_off);
}

public void activate(View v){
    LinearLayout layout = (LinearLayout) findViewById (R.id.main_layout);
    Resources res = getResources();

    Drawable on = res.getDrawable(R.drawable.main_on);
    Drawable off = res.getDrawable(R.drawable.main_off);

    if (layout.getBackground().getConstantState() == off.getConstantState()){
        layout.setBackgroundResource(R.drawable.main_on);
        Toast.makeText(getApplicationContext(), "App has been activated", Toast.LENGTH_SHORT).show();
        turnon();
    }
    else if (layout.getBackground().getConstantState() == on.getConstantState()){
        layout.setBackgroundResource(R.drawable.main_off);
        Toast.makeText(getApplicationContext(), "App has been deactivated", Toast.LENGTH_SHORT).show();
        turnoff();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:29:41.240

对于 2.2 和 2.3，我可以在我的模拟器上很好地运行它。

The only thing I can suggest is to try to remove drawables (maybe some settings there are screwing things up), or try to make your relative layout height 0dp, since you are using weight_sum

# ipod-touch - OpenGL 工件 - 背面的三角形与旧 iOS 设备前面的三角形重叠

> ID：12886088
> 
> 赞同：1
> 
> 时间：2012-10-14T20:12:19.960
> 
> 标签：ipod-touch, artifacts, opengl-es-1.1

我将我的场景渲染为下面的代码

```
struct vertex
{
    float x, y, z, nx, ny, nz;
};

bool CShell::UpdateScene()
{
    glEnable(GL_DEPTH_TEST);
    glClearColor(0.3f, 0.3f, 0.4f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Set the OpenGL projection matrix
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    const float near = 0.1f;
    const float far = 1000.0f;

    float top = near * tanf(fieldOfView * SIMD_PI / 180.0f);
    float bottom = -top;
    float left = bottom * aspectRatio;
    float right = top * aspectRatio;

    glFrustumf(left, right, bottom, top, near, far);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

bool CShell::RenderScene()
{
    glEnable(GL_DEPTH_TEST);

    glBindBuffer(GL_ARRAY_BUFFER, vertsVBO);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);

    glVertexPointer(3, GL_FLOAT, elementSize, 0);
    glNormalPointer(GL_FLOAT, elementSize, (const GLvoid*) normalOffset);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indicesVBO);

    glEnable(GL_LIGHTING);

    lightPosition[0] = (-gravity.x()+0.0)*lightHeight;
    lightPosition[1] = (-gravity.y()+0.0)*lightHeight;
    lightPosition[2] = (-gravity.z()+0.5)*lightHeight;

    glLightfv(GL_LIGHT0, GL_POSITION, lightPosition);

    float worldMat[16];

    /// draw donuts 
    for (int i=0;i<numDonuts;i++)
    {
        sBoxBodies[i]->getCenterOfMassTransform().getOpenGLMatrix(worldMat);

        glPushMatrix();
        glMultMatrixf(worldMat);

        glVertexPointer(3, GL_FLOAT, elementSize, (const GLvoid*)(char*)sizeof(vertex));
        glNormalPointer(GL_FLOAT, elementSize, (const GLvoid*)(char*)(sizeof(vertex)+normalOffset));

        glDrawElements(GL_TRIANGLES, numberOfIndices, GL_UNSIGNED_SHORT, (const GLvoid*)(char*)sizeof(GLushort));

        glPopMatrix();
    }

    glBindBuffer(GL_ARRAY_BUFFER,0);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);

    glDisable(GL_LIGHTING);

    return true;
} 
```

我的项目使用乌龙引擎

这是两张截图，iPodTouch 4G (iOS 6.0)

![iPodTouch 4G (iOS 6.0)](../Images/b1c2b584368d63fedd2bcd3355bd46ce.png)

和 iPodTouch 2G (iOS 4.2.1)

![和 iPodTouch 2G (iOS 4.2.1)](../Images/02a6bf68d11faeae7e4c6547e522e1d2.png)

是什么原因导致出现在后面的屏幕截图中的那些奇怪的工件？

看起来好像背面的三角形与前面的三角形重叠

有时会发生这种情况，因为工件是生涩的，就像存在“z-fighting”一样，但背面的三角形的 z 值低于前面三角形的 z 值

这是顶点和法线z排列的图像

![在此处输入图像描述](../Images/6050bbaf167a7ce5e37f8934f2df8161.png)

蓝色箭头是周围面共享的法线，带有红线的三角形表示可能导致这些伪影的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:40:50.773

> 就像存在“z-fighting”一样，但背面三角形的 z 值低于前面三角形的 z 值

一个的 z 值小于另一个并不重要，当你的对象靠得太近并且你没有足够的 z 分辨率时，你会发生 z 冲突。

我猜这里的问题是您将投影范围设置得太大，从 0.1 到 1000。这些数字之间的差异越大，您获得的 z 分辨率就越低。

只要适用于您的应用程序，我建议尝试使用 0.1/100 或 1.0/1000 的近/远。它应该可以帮助您解决 z-fighting 问题。

# image - 如何使用 alpha 层和三角测量将图像转换为 Box2D 多边形？

> ID：12886093
> 
> 赞同：1
> 
> 时间：2012-10-14T20:12:27.107
> 
> 标签：image, box2d, polygon, rounding, edge-detection

我正在使用 Box2D 和 SFML 编写游戏，我想让我的用户导入他们自己的纹理以用作物理多边形。多边形是使用图像的 Alpha 层创建的。它不需要像素完美，这就是我的问题所在。如果它是像素完美的，那么当玩家被困在两个相当复杂的形状之间时，它就会变得非常错误。我有一个有效的边缘检测算法，它会产生类似[这样](http://pastebin.com/r4TNKGC6)的东西。它是每个像素的像素（并且它所描绘的形状只是一个带有凹陷的正方形）。在那之后，我有一个简化算法来产生[这个](http://pastebin.com/6ftAHg9v)。它对我来说很好，但如果每个角落都这样追踪，我会有一些问题。向量简化的代码是这样的：

```
 //borders is a std::vector containing simple Box2D b2Vec2 (2D vector class containing an x and a y)
    //vector shortener
    for(unsigned int i = 0; i < borders.size(); i++)
    {
        int x = 0, y = 0;
        int counter = 0;
        //get the values for x and y that need to be added to check whether in a line or not
        x = borders[i].x - borders[i-1].x;
        y = borders[i].y - borders[i-1].y;
        //while points are aligned..
        while((borders[i].x + x*counter == borders[i + counter].x) && (borders[i].y + y*counter == borders[i+counter].y))
        {
            counter++;
        }
        if(counter-1 > i)
        {
            borders.erase(borders.begin() + i, borders.begin() + i + counter -1);
        }
    } 
```

所以我的问题是，我怎样才能将之前的一组向量转换成不太精确的东西？有没有舍入算法？如果是这样，哪个最好？你能给我什么建议吗？生成的多边形是凸面还是凹面都没有关系，无论如何我都会对其进行三角测量。

谢谢，
阿斯特阿尔夫

# php - MySQL 错误 - 插入到表中

> ID：12886096
> 
> 赞同：1
> 
> 时间：2012-10-14T20:12:32.370
> 
> 标签：php, mysql, insert

我在插入表格时遇到了一点问题，代码如下：

```
mysql_query("INSERT INTO admin_menu (id, title, type, icon, parent, url, order, append, module) VALUES('', 'powerpoint', '0', 'powerpoint.png', '0', 'powerpoint/config', '0', '0', '0' ) ") or die(mysql_error()); 
```

它给了我以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'order, append, module) VALUES('', 'powerpoint', '0', 'powerpoint.png', '0', 'pow' 附近使用的正确语法在第 1 行

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T20:13:33.583

`order`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。用反引号包裹它

```
... url, `order`, append,... 
```

你也不应该使用[`mysql_query`](http://php.net/manual/en/function.mysql-query.php).

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T20:13:36.140

你需要使用反引号。order 是保留关键字。

```
mysql_query("INSERT INTO admin_menu (id, title, type, icon, parent, url, `order`, append, module) 
```

# iphone - 将子视图添加到 UITableViewCell contentView 的正确方法

> ID：12886098
> 
> 赞同：0
> 
> 时间：2012-10-14T20:12:45.107
> 
> 标签：iphone, xcode, uitableview, uiimageview

在我的应用程序中，我需要在 UITableView 中显示多个图像，所以我已经在网上搜索了很多将大图像加载到 UITableViewCells 的正确方法，更清楚的是，我将划分我的应用程序执行的过程：

1.  异步下载图片；
2.  将它们保存到 NSHomeDirectory();

=> Thins 部分运行良好。

问题是，如何在 UITableViewCell 中显示图像，我已经尝试将 UIImageView 添加到单元格 contentView 但滚动性能有点影响，我在 Apple 指南上进行了搜索，我相信正确的方法是添加 UIImageView到单元格并从 NSHomeDirectory() 加载图像，所以：

**自定义 UITableViewCell 并将 UIImageView 的（302x302px）添加到其中的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:31:54.653

要获得最佳的滚动性能，您必须自己绘制 UITableViewCell 的内容。Tweetie 应用程序（现在是官方 Twitter 应用程序）的作者 Loren Brichter 写了一篇非常著名的博客文章。很遗憾，这篇博文已被删除。 [不过，这篇文章](http://ioscodesamples.blogspot.dk/2011/02/daily-done-better.html)可能会对您有所帮助。它解释了快速滚动，它有例子，它有一个来自 Loren Brichter 的演示视频。

基本上，您要做的是继承 UITableViewCell 并覆盖该`drawRect:`方法。要显示图像，您可以执行以下操作：

```
- (void)drawRect:(CGRect)rect
{
    [myImage drawAtPoint:CGPointMake(10, 10)];
} 
```

这样可以避免布局很多子视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T01:08:30.067

我也有同样的问题。我正在执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString* CustomCellIdentifier = @"CustomCellIdentifier";

    CustomCell* cell = [tableView dequeueReusableCellWithIdentifier:CustomCellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CustomCellIdentifier];
    }

    // add subview to cell
    if (cell.customView == NULL) {
         cell.customView = [[CustomView alloc] initWithFrame:cell.frame];
         [cell.contentView addSubview:cell.customView];
    }

    // bind cell data

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:55:49.417

首先，您需要为 UITableView 创建一个自定义单元格并继续执行以下几点。

1.  将每行的高度设置为 302 像素为

    ```
    -(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
    ```

    { 返回 302.0; }

2.  使用以下代码在表格的每个单元格创建 UIImageView -(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"cell"];

    ```
     const NSInteger IMAGE_VIEW_TAG=1001;

            UIImageView *imageView;

            if(cell==nil)
            {
                    cell=[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"] autorelease];

                    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;

                    imageView =[[[UIImageView alloc] initWithFrame:CGRectMake(10, 0, 302, 302)] autorelease];
                    imageView.tag=IMAGE_VIEW_TAG;
                    imageView.contentMode=UIViewContentModeScaleAspectFit;
                    [cell.contentView addSubview:imageView];
             }

    imageView=(UIImageView*)[cell.contentView viewWithTag:IMAGE_VIEW_TAG];
    [imageView setImage:[UIImage imageNamed:@"image.png"];
    return cell; 
    ```

    }

3.  设置要显示的行数

    ```
     -(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
     {
              return 5;
     } 
    ```

4.  不要忘记添加 TableView 委托和数据源，UITableViewDelegate 和 UITableViewDataSource

# c++ - 每次调试此代码时，我都会收到“下标超出范围错误”。有人可以帮我查明错误吗？

> ID：12886099
> 
> 赞同：0
> 
> 时间：2012-10-14T20:12:45.827
> 
> 标签：c++, range, subscript

我检查了我所有的字符串和数组。在我看来没有什么不对。我的包含语句可能是问题所在。也许我错过了一个。我是一个新手程序员。所以我不知道为什么这段代码不起作用。它看起来不错，应该绝对有效。

```
#include<iostream>
#include<cstdlib>
#include<ctime>
#include<fstream>
#include<string>
using namespace std;

int main()
{
        int i;
        char response;
        char answers[20];
        char uresponse[20];
        int score=0;

        srand(time(0));
        int test_num = rand() % 2+1;
//        cout << test_num << endl;
        if (test_num == 1)
        {
                string line;
                ifstream myfile ("form1.txt");
                getline (myfile,line);
//                cout<< line<<endl;
                for (int i = 0; i <= 19; i++)
                {
                        answers[i] = line[i*2];
//                        cout<<answers[i]<<endl;
                }
                getline (myfile,line);

                  if ( myfile.is_open())
                  {
                          int x = 0;
                        while ( myfile.good() )
                        {
                          char answers[20];
                              string line;
                                getline (myfile,line);
//                                cout<< line << endl;
                                if( line == "")
                                {
                                        cout << "Enter answer: ";
                                        cin >> response;
                                        if(response == 'a', 'A' || response == 'b', 'B' || response == 'c', 'C' || response == 'd', 'D')
                                        {
                                                response = response;
                                        }
                                        else
                                        {
                                                cout << "ERROR. You must enter A, B, C, or D. Please re-enter: ";
                                                cin >> response;
                                        }
                                        response = toupper(response);
                                        uresponse[x] = response;
                                        x++;
                                }
                        }
//                      cout << uresponse <<endl;
//                      system("pause");
                 }
                  else
  {
          myfile.close();
  }
        }
        else
                {
                string line;
                ifstream myfile ("form2.txt");
                getline (myfile,line);
 //               cout<< line<<endl;
                for (int i = 0; i <= 19; i++)
                {
                        answers[i] = line[i*2];
//                        cout<<answers[i]<<endl;
                }
                getline (myfile,line);

                  if ( myfile.is_open())
                  {
                        int x = 0;
                        while ( myfile.good() )
                        {
                          char answers[20];
                              string line;
                                getline (myfile,line);
 //                               cout << line << endl;
                                if( line == "")
                                {
                                        cout << "Enter answer:";
                                        cin >> response;
                                        if(response == 'a', 'A' || response == 'b', 'B' || response == 'c', 'C' || response == 'd', 'D')
                                        {
                                                response = response;
                                        }
                                        else
                                        {
                                                cout << "ERROR:You must enter A, B, C, or D. Please re-enter:";
                                                cin >> response;
                                        }
                                        response = toupper(response);
                                        uresponse[x] = response;
                                        x++;
                                }
                        }
//                      cout<<uresponse<<endl;
//                    system("pause");
                 }
                  else
  {
          myfile.close();
  }
        }

        for (int j=0; j<20; j++)
        {
                if (answers[j] == uresponse[j])
                        score += 1;
        }

        if(score >15)
        {
                cout << "CONGRATULATIONS! You Passed with a score of ";
                cout << score << endl;
                system("pause");
        }
        else
        {
                cout<< "You Failed with a score of ";
                cout << score << endl;
                system("pause");
        }
        system("pause");
        return 0;
        }`enter code here` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:15:34.737

这可能是罪魁祸首：

```
answers[i] = line[i*2]; 
```

你确定`i*2`不是 >=`line.size()`吗？

顺便说一句，这段代码看起来很狡猾：

```
if(response == 'a', 'A' || response == 'b', 'B'
 || response == 'c', 'C' || response == 'd', 'D')
{
     response = response   
} 
```

也许您想对`switch`自身使用和初始化响应..为什么？

编辑：你的`while(myfile.good())` 那可能会执行 100 次并且你一直在增加`x` 在你的代码中很难说......你有很多“狡猾”的行：P

# liferay - Liferay Portlet 中不存在具有键 {companyId=1, name=Owner} 错误的角色

> ID：12886100
> 
> 赞同：1
> 
> 时间：2012-10-14T20:12:50.933
> 
> 标签：liferay

我在我的portlet 中使用Service Builder。这是我的 addProduct 方法`PRProductLocalServiceBaseImpl`：

```
public class PRProductLocalServiceImpl extends PRProductLocalServiceBaseImpl {
    public PRProduct addProduct(long companyID, long groupID, String productName,    String serialNumber, long userID) throws SystemException, PortalException{
        PRProduct product = prProductPersistence.create(counterLocalService.increment(PRProduct.class.getName()));
        resourceLocalService.addResources(companyID, groupID, userID, PRProduct.class.getName(), product.getPrimaryKey(), false, true, true);
        product.setProductName(productName);
        product.setSerialNumber(serialNumber);
        product.setCompanyId(companyID);
        product.setGroupId(groupID);        

        return prProductPersistence.update(product, false);
    }
} 
```

当我从我的 portlet 类中调用此方法并将 1 作为 companyID 传递时，它给出“不存在具有键 {companyId=1, name=Owner} 的角色”。这是我的 portlet 类：

```
public void addProduct(ActionRequest actionReaquest, ActionResponse actionResponse) 
{   
    PortletSession session = actionReaquest.getPortletSession();
    try
    {
        String productName = actionReaquest.getParameter("productName");
        String userID = actionReaquest.getParameter("userID");
        String companyID = actionReaquest.getParameter("companyID");
        String groupID = actionReaquest.getParameter("groupID");
        String serialNumber = actionReaquest.getParameter("serialNumber");
        PRProduct product = PRProductLocalServiceUtil.addProduct(Long.parseLong(companyID), Long.parseLong(groupID), productName, 
                serialNumber, Long.parseLong(userID));          
        session.setAttribute("errorMessage", "Product added successfully");                         
        actionResponse.setRenderParameter("jspPage", "/ProductAdded.jsp");
    }
    catch(Exception e)
    {
        session.setAttribute("errorMessage", e.getMessage());           
        actionResponse.setRenderParameter("jspPage", "/ProductAdded.jsp");
    }

} 
```

任何身体都可以帮忙吗？提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:14:07.677

可能您需要将内容添加为管理员用户或所有者用户，下面是在添加内容之前将内容作为管理员用户设置 adminUser 权限的示例，对所有者尝试相同的操作：

```
User adminUser = UserLocalServiceUtil.getUserByEmailAddress(companyId,"test@liferay.com");
permissionChecker = PermissionCheckerFactoryUtil.create(adminUser);
PermissionThreadLocal.setPermissionChecker(permissionChecker); 
```

或者只是获取所有者下面的使用代码：

```
Role role=com.liferay.portal.service.RoleLocalServiceUtil.getRole(long companyId,"Owner"); 
```

并更新 add 方法，在 add 方法中再添加一个参数，即其中的`serviceContext`所有角色（所有者），就像我们在 liferay 中添加用户时所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:07:48.997

已检查公司 ID 是否实际上是 1？

获取当前 Liferay 用户 ID、组 ID 和公司 ID 的最佳方式是通过`ThemeDisplay`对象。因此，不要使用您的代码：

```
String userID = actionReaquest.getParameter("userID");
String companyID = actionReaquest.getParameter("companyID");
String groupID = actionReaquest.getParameter("groupID"); 
```

**你应该使用：**

```
ThemeDisplay themeDisplay = (ThemeDisplay) actionReaquest.getAttribute(WebKeys.THEME_DISPLAY);
long realUserId = themeDisplay.getRealUserId();
long companyId = themeDisplay.getCompanyId();
long groupId = themeDisplay.getScopeGroupId(); 
```

通过这种方式，您将从 Liferay 获得值，而不必自己传递它们。这也意味着您不必`Long.parseLong()`获取字符串的 Long 值。

看看这是否有帮助！对于任何未来的 portlet，这样做也是更好的做法。ThemeDisplay 对象包含很多有用的信息！

也是小事，拼写为“request”而不是“request”:)

# mysql - mysql AUTO_INCREMENT 在 INSERT....SELECT 之后跳过有效的数字范围

> ID：12886111
> 
> 赞同：0
> 
> 时间：2012-10-14T20:13:54.350
> 
> 标签：mysql

我的 INSERT... SELECT 查询将 2,546 条记录插入到一​​个表中，这使我的所有插入记录的 ID 范围从 176,439 到 178,984。所有记录均已成功插入 (178984 - 176439 + 1 = 2,546)。现在，如果启动我的应用程序并添加一条新记录，我的下一个 ID 显示为 180534。我不明白 mysql 没有将其设置为 178985。如果我重复该过程，则会发生类似的行为。

我的 innodb_autoinc_lock_mode 设置为 1，默认值，代表“连续”。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:20:14.687

记录数不必与自动增量 id 匹配。记录可能已被删除。自动增量是手动设置的或出于其他原因。您可以使用此命令设置下一个 id

```
ALTER TABLE tbl AUTO_INCREMENT = 178985; 
```

之后，应在该数字之上生成 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:24:56.970

是的，您运行了其他一些插入查询，行可能由于唯一约束而被拒绝，但自动增量仍然递增，或者之后它们被删除。或者，如果其他人（或您在另一个会话中）启动了事务，插入了一些行但尚未提交...... auto_increment 值也会更大。

# jquery - 没有鼠标悬停的jQuery qTip插件

> ID：12886125
> 
> 赞同：0
> 
> 时间：2012-10-14T20:15:49.680
> 
> 标签：jquery, qtip

我只是想在用户单击一个按钮时对输入 type="text" 进行一些简单的验证，它会检查字段的长度，如果它少于 2 个字符，我想要一个 qTip 打开/显示。

我不希望它在鼠标悬停时显示我不希望它在用户在字段中输入时显示。只有当这种情况发生

```
$('#myfield').length > 0 && $('#myfield').length > 3){
     // open tool tip
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:22:17.103

您需要 qTip2 来使用此插件注册点击事件。

## HTML

```
<input type="text" name="test" value="" />
<input type="submit" name="submit" value="Submit" /> 
```

## jQuery

```
$(function () {

            function openQTip(clickedElement, contentValue)
            {
                $(clickedElement).qtip({
                   content: contentValue,
                   show: 'click',
                   hide: 'mouseout'
                });
            }

            $('input[type="submit"]').click(function(e){

                var valueLength = $('input[type="text"]').val().length;

                if(valueLength > 0 && valueLength < 2)
                {
                    openQTip(this, 'not enough characters'); 
                }
                else
                {
                        //submit form
                }

                e.preventDefault();
            });
        }); 
```

# html - 为不同的屏幕尺寸缩放 html/css 图像？

> ID：12886130
> 
> 赞同：0
> 
> 时间：2012-10-14T20:16:13.160
> 
> 标签：html, css, image, scaling

第一次使用，遇到一个简单但令人沮丧的问题。

我是一名新的网络编码员，正在设计我的网站 (austinwoehrle.net)

我正在尝试用较暗的背景制作西雅图的横幅，但如果我放大，它会脱离 div。

在较小的显示器上，图像将太大而无法适应较暗的背景。

我已经将宽度设置为 100% 并尝试了很多故障排除！

谢谢您的帮助！同样，我的网站是[http://www.austinwoehrle.net/homepage.html](http://www.austinwoehrle.net/homepage.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:21:32.747

目前你有这个：

```
<div id="seattle" alt="test">
    <img src="seattle.jpg" width="620" height="210"> 
</div> 
```

将图像的宽度更改为`width="100%"`. 这可能会比您想要的稍宽，因此您需要`seattle`在第 126 行向包含的 div添加边距或填充`mystyle.css`

```
width:80%;
margin:0 10%; 
```

然后将图像更改为 100% 的宽度并移除高度。

```
<img src="seattle.jpg" width="100%"> 
```

* * *

笔记

```
 margin:0 10%;
 //is equal to writing
 margin-top:0;
 margin-right:10%;
 margin-bottom:0;
 margin-left:10%; 
```

查看[此站点](http://www.webcredible.co.uk/user-friendly-resources/css/css-shorthand-properties.shtml)以获取有关如何编写此内容的信息。

# python - Python：我应该如何重新格式化这个短代码块？

> ID：12886133
> 
> 赞同：1
> 
> 时间：2012-10-14T20:16:26.043
> 
> 标签：python, python-2.7

我是 Python 新手。一直在通过有关 udacity 的课程来研究它，现在我正在尝试做一些事情来进一步学习。

我创建了这个短代码块：

```
list_a = []
list_b = []
for e in a_list:
    list_a.append(e['a'])
    list_b.append(e['b'])
list_b = set(list_b) 
```

（list_a 也不应包含重复项，但不会首先尝试，因此也不需要将其设置为一个集合，除非它使代码更好看且更容易通过）

看了我的这段代码后，它似乎不够优雅或 Pythonic。

我的问题是，我应该如何重新格式化？我想学习正确的做事方式。

> 我的目标是浏览一个名为 a_list 的列表，其中包含字典作为其项目。然后对于字典中的每一项，将键“a”的值添加到一个名为 list_a 的新列表中，并对键“b”执行相同的操作。但是，键 'b' 的列表应该是一个集合，并且严格不包含任何重复项。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:22:22.200

虽然这确实迭代了`a_list`两次，但您可以像这样重写它：

```
list_a = [e['a'] for e in a_list]
set_b = {e['b'] for e in a_list} 
```

假设 Python 2.7 或更高版本。

我选择了这个名称`set_b`，而不是`list_b`因为我们在第二行进行集合理解，而不是列表理解。

如果您只想迭代`a_list`一次，那么您至少可以跳过一个列表创建：

```
list_a = []
set_b = set()
for e in a_list:
    list_a.append(e['a'])
    set_b.add(e['b']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:45:42.663

@TimPietzcker 给出了一个很好的解决方案。我应该提一下，而不是将数据存储在变量名中，比如`list_a`和`list_b`——如果你有九个想要拔出的键，你会怎么做？- 我认为使用另一个字典（Python 2.7+）更pythonic：

```
>>> list_of_dicts = [{'a': 1, 'b': 10}, {'a': 2, 'b': 20, 'c': 30}]
>>> keep = ('a', 'b')
>>> by_key = {k: {d[k] for d in list_of_dicts} for k in keep}
>>> by_key
{'a': set([1, 2]), 'b': set([10, 20])} 
```

然后代替`list_a`, 你会使用

```
>>> by_key['a']
set([1, 2]) 
```

# python - Django本地静态文件路径拼图

> ID：12886134
> 
> 赞同：0
> 
> 时间：2012-10-14T20:16:36.060
> 
> 标签：python, django, static, http-status-code-404

我正在尝试在开发中本地呈现静态文件。我已遵循规则并将样式表放在`/static/`我的 Django 项目文件夹中，设置`STATIC_URL = '/static/'`. 使用`{{ STATIC_URL }}`模板标签有效，文档头中呈现的路径指向正确的目录（据我所知），例如：

```
http://localhost:8000/static/css/bootstrap.min.css 
```

这将返回 404，当然，没有样式。

我从项目根文件夹中的`/static`内容（即）开始。`/css/bootstrap.min.css`然后我将它及其全部内容复制到所有其他应用程序目录中，以尝试 Django 可能正在寻找的不同位置。还是404。

中的相关设置`settings.py`：

```
DEBUG = True

STATIC_URL = '/static/'

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.humanize',
    'south',
    'users',
    'registration',
    'django_extensions',
    'django.contrib.admin',
) 
```

怎么了？

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:53:50.317

你`urls.py`看起来像什么？您是否忘记包含静态文件 url？如果您查看有关提供静态文件的文档[https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)它建议将以下内容放入`urls.py`

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf goes here ...

urlpatterns += staticfiles_urlpatterns() 
```

# python - 用python的子进程同时捕获和输出stderr

> ID：12886136
> 
> 赞同：3
> 
> 时间：2012-10-14T20:16:38.370
> 
> 标签：python, subprocess, pipe, stdout, stderr

（目前使用python 3.2）

我需要能够：

*   使用子进程运行命令
*   该命令的 stdout/stderr 都需要实时打印到终端（无论它们是否都出现在 stdout 或 stderr 或其他
*   同时，我需要一种方法来了解该命令是否向 stderr 打印了任何内容（最好是打印的内容）。

我玩过 subprocess 管道以及在 bash 中进行奇怪的管道重定向以及 using `tee`，但到目前为止还没有找到任何可行的方法。这是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:38:20.510

我的解决方案：

```
import subprocess

process = subprocess.Popen("my command", shell=True,
                           stdout=None, # print to terminal
                           stderr=subprocess.PIPE)
duplicator = subprocess.Popen("tee /dev/stderr", shell=True, # duplicate input stream
                              stdin=process.stderr, 
                              stdout=subprocess.PIPE, # catch error stream of first process
                              stderr=None) # print to terminal
error_stream = duplicator.stdout
print('error_stream.read() = ' + error_stream.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:35:30.990

尝试这样的事情：

```
import os

cmd = 'for i in 1 2 3 4 5; do sleep 5; echo $i; done'
p = os.popen(cmd)

while True:
    output = p.readline()
    print(output)
    if not output: break 
```

在 python2 中，您也可以通过以下方式轻松捕获 stderr `popen3`：

```
i, o, err = os.popen3(cmd) 
```

但是python3中似乎没有这样的功能。如果您找不到解决方法，请尝试`subprocess.Popen`直接使用，如下所述：http: [//www.saltycrane.com/blog/2009/10/how-capture-stdout-in-real-time-python/](http://www.saltycrane.com/blog/2009/10/how-capture-stdout-in-real-time-python/)

# python - linode 上的 gunicorn 未启动

> ID：12886139
> 
> 赞同：2
> 
> 时间：2012-10-14T20:17:08.057
> 
> 标签：python, django, nginx, gunicorn, linode

我正在使用 gunicorn 来部署我的 python web 应用程序。

当我使用此命令 gunicorn_django -c gunicorn.conf.py 启动它时，我收到此错误：

```
root@localhost:/var/www/map01# gunicorn_django -c gunicorn.conf.py
2012-10-14 20:11:32 [4594] [INFO] Starting gunicorn 0.14.6
2012-10-14 20:11:32 [4594] [INFO] Listening at: http://127.0.0.1:8888 (4594)
2012-10-14 20:11:32 [4594] [INFO] Using worker: sync
2012-10-14 20:11:32 [4597] [INFO] Booting worker with pid: 4597
2012-10-14 20:11:32 [4598] [INFO] Booting worker with pid: 4598
2012-10-14 20:11:32 [4599] [INFO] Booting worker with pid: 4599
2012-10-14 15:11:32 [4597] [INFO] Worker exiting (pid: 4597)
2012-10-14 15:11:32 [4598] [INFO] Worker exiting (pid: 4598)
2012-10-14 15:11:32 [4599] [INFO] Worker exiting (pid: 4599)
Traceback (most recent call last):
  File "/usr/local/bin/gunicorn_django", line 9, in <module>
    load_entry_point('gunicorn==0.14.6', 'console_scripts', 'gunicorn_django')()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/djangoapp.py", line 132, in run
    DjangoApplication("%prog [OPTIONS] [SETTINGS_PATH]").run()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py", line 124, in run
    Arbiter(self).run()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 185, in run
    self.halt(reason=inst.reason, exit_status=inst.exit_status)
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 280, in halt
    self.stop()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 328, in stop
    self.reap_workers()
  File "/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py", line 419, in reap_workers
    raise HaltServer(reason, self.WORKER_BOOT_ERROR)
gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3> 
```

这是 gunicorn.conf.py 文件：

```
bind = u"127.0.0.1:8888"
logfile = u"/var/www/map00/gunicorn.log"
workers = 3 
```

在我的个人电脑上，gunicorn 可以完美运行。有人可以告诉我发生了什么吗？

感谢您的时间和亲切的关心。

耶尼亚·伊夫列夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T07:15:38.310

尝试将 with`--preload`作为参数运行`gunicorn_django`- 它应该向您显示工作人员在启动时遇到的错误。看到[这个错误](https://github.com/benoitc/gunicorn/issues/338#issuecomment-7425197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:47:06.050

检查运行 gunicorn_django 的用户是否对您的日志文件具有写入权限

# c# - ASP.NET 入门

> ID：12886140
> 
> 赞同：3
> 
> 时间：2012-10-14T20:17:16.713
> 
> 标签：c#, asp.net, asp.net-mvc-4, server-side

我知道 C#，我想从 ASP.NET 开始（我已经知道如何使用 PHP 构建网站）。我需要很好的 ASP.NET 资源（MVC，最新版本）。

我发现了其他问题，对我来说似乎更合适，但我想要的是你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:19:13.483

ASP.NET 网站是一个很好的起点：

[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

我建议[阅读一些文档](http://www.asp.net/mvc/tutorials/older-versions/overview/asp-net-mvc-overview)，[遵循一些教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)，然后试一试。

如果您遇到任何问题，您总是可以在这里找到答案/提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:04:21.190

没有什么比查看一个重要项目的工作代码来学习新东西更好的了。我强烈建议您阅读[MVC 音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store)并手动输入每一行以帮助您记住。到最后，您将真正了解 MVC 是什么以及它为何如此酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T02:36:48.817

[Wrox 的 ASP.NET 4 入门：在 C# 和 VB](https://www.google.com/search?q=Wrox%27s%20Beginning%20ASP.NET%204%3a%20in%20C#%20and%20VB&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)中是一本很棒的入门书籍。

# c - OpenGL Nurbs：查找结坐标

> ID：12886141
> 
> 赞同：2
> 
> 时间：2012-10-14T20:17:20.053
> 
> 标签：c, opengl, curve, nurbs

我需要在 OpenGL 中绘制 NURBS 曲线的控制点和节点。控制点没有问题，因为它们是由它们的坐标定义的。然而，我在打结时遇到了更多麻烦。

我有一个由`gluNurbsCurve`函数采用的结数组，定义如下。

```
GLfloat knots[KNOTCOUNT] = {0.00, 0.00, 0.00,
                            0.25,
                            0.50, 0.50,
                            0.75,
                            1.00, 1.00, 1.00} 
```

有没有一种简单的方法可以得出这 5 个结的坐标？根据控制点的坐标，我假设？或者这不是微不足道的？除了控制点的坐标和权重，我还有`STRIDE`和`ORDER`值。

我认为这是可能的，因为`gluNurbsCurve`-function 能够根据这些值绘制曲线..

还是我完全错过了结的概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:00:52.583

如果您阅读您在 NURBS 上发布的文章，您会了解到结比点更重要。

*“节点向量是一系列参数值，用于确定控制点在何处以及如何影响 NURBS 曲线。”*

因此，一个结最多可以表示为曲线的一个区域。你可以很容易地把它想象成一个结的多样性。只需适当地为关联的控制点着色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:40:41.823

看看这个网页：[http ://www.ibiblio.org/e-notes/Splines/Basis.htm](http://www.ibiblio.org/e-notes/Splines/Basis.htm)

它很好地解释了结向量，甚至让您尝试在 Java 小程序中使用结向量（将小结移动到图形右侧的顶部）。Java 小程序的源代码也可用。

该页面是样条线完整交互式介绍的一部分：http: [//www.ibiblio.org/e-notes/Splines/Intro.htm](http://www.ibiblio.org/e-notes/Splines/Intro.htm)

# c# - 编写直通类型关联的更好方法

> ID：12886143
> 
> 赞同：2
> 
> 时间：2012-10-14T20:17:23.050
> 
> 标签：c#

在 sql 我有一个像这样的表：

```
PersonOrganisationRole 
```

其中有以下列：

```
PersonId, OrganisationId RoleId 
```

所以这是一个人、组织和角色之间的三向表。

所以我想创建一种方法来获取一个人所属的所有组织：

```
public class Person
{
  public IEnumerable<Organisation> Organisations
        {
            get 
            { 
                var organisations = new List<Organisation>();

                foreach (var personOrganisationRole in PersonOrganisationRoles.Where(personOrganisationRole => !organisations.Contains(personOrganisationRole.Organisation)))
                {
                    organisations.Add(personOrganisationRoles.Organisation);
                }

                return organisations;
            }
        }
} 
```

所以我基本上是通过遍历表中的所有项目来填充一个列表，并且如果我还没有添加它，则只添加它。这很重要，因为表中可能有多个行具有相同的 PersonId 和 OrganisationId，因为一个人在一个组织中可能有多个角色。

我在想，虽然必须有更好的方法来编写这段代码。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:22:45.943

You can use LINQ's `Distinct` operator to do this unique-collecting, and `ToList` to collect the results in a list:

```
return PersonOrganisationRoles
    .Distinct(x => x.Organisation)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:19:44.810

```
public IEnumerable<Organisation> Organisations
{
    get 
    { 
        return PersonOrganisationRoles
            .Select(por => por.Organisation)
            .Distinct()
            .ToList();
    }
} 
```

您将要检查组织实施

*   `GetHashcode`并`Equals`正确地
*   可选地实现`IEquatable<Organisation>`

Distinct uses these to establish whether the item is already in the collection. (`Contains` did the same in the original sample, so that's probably what you intended)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:30:27.073

Make it a function rather than property.

We are used to write objectInstance.PropertyName and usually think that this is fast operation that accesses some piece of data that is already in memory. In your case any call to Person.Organizations involves some processing and maybe even IO operations.

The other, possibly more important, point is that when I do:

```
var a = myPerson.Organizations;
var b = myPerson.Organizations; 
```

I expect that a is pointing to the same List<> instance in memory as b.

And in your code that is not true. So please change the property to function or cache the result in private property so that processing is done only once. Like this:

```
public class Person
{
  private IEnumerable<Organisation> organizations; 

  public IEnumerable<Organisation> Organisations
  {
    get 
    { 
       if (organizations != null) return organizations;

       organisations = new List<Organisation>();
       // fill list here 
       return organisations;
     }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:48:06.603

A combination of the Linq Select() and Distinct() methods should do it.

```
 var organisations = PersonOrganisationRoles
              .Select<PersonOrganisationRoles,Organisation>(p => p.Organisation )
              .Distinct(); 
```

# django - Django密码重置卡在循环中

> ID：12886146
> 
> 赞同：0
> 
> 时间：2012-10-14T20:17:53.797
> 
> 标签：django, authentication

我正在尝试将用户注册系统添加到我的 Django 站点。显然，我想使用内置的身份验证视图和表单。我将要实施身份验证密码重置过程。它可以正常发送电子邮件，但随后无法正确重定向。最终结果是一遍又一遍地发送密码重置完成的电子邮件。我正在覆盖模板，但没有别的，现在它们只有：

```
{{form.As_p}} 
```

我已经改变了我`urls.py`的使用`auth.views`方式：

```
from django.contrib.auth import views as auth_views

(r'^account/forgot/$',
 auth_views.password_reset, 
 {'template_name': 'registration/password_reset.html',
  'post_reset_redirect':'/account/password-reset-done'}
),
(r'^account/password-reset-done/$',
 auth_views.password_reset_done,
 {'template_name': 'registration/password_reset_done.html'}
), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:41:11.323

在我看来，好像您需要在`post_reset_redirect`url 上加上斜杠。你试过吗？目前，`/account/password-reset-done`不会匹配`r'^account/password-reset-done/$'`，因为`/`in 那是强制性的。

请参阅 Django url 调度程序文档中的示例请求 4：[https ://docs.djangoproject.com/en/dev/topics/http/urls/#example](https://docs.djangoproject.com/en/dev/topics/http/urls/#example)

# android - Android XML：在 RelativeLayout 中将 Textview 居中

> ID：12886147
> 
> 赞同：0
> 
> 时间：2012-10-14T20:18:00.227
> 
> 标签：android, xml, layout

我有这个 xml 代码，我想将其用作加载屏幕的基础......

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="horizontal" 
    android:gravity="center"
    android:id="@+id/loading">

    <TextView
        android:id="@+id/loading_message"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="LOADING..." />
</RelativeLayout> 
```

这是在 main_loading.xml 和 TextView 应该清楚地居中，并且在 elicipse XML 预览中，它是......（所以现在一切都很好:)）

然而：

我将这个 xml 与另一个一起使用，所以我正在使用：

```
 RelativeLayout mainLayout = (RelativeLayout)findViewById(R.id.llid);
    mainLayout.removeAllViews();
    LayoutInflater inflater = getLayoutInflater();
    mainLayout.addView(inflater.inflate(R.layout.main_loading, null)); 
```

在 xml 之间进行交换，这在模拟器上都可以正常工作，除了 Textview 的居中...（它保持未对齐 - 左上角）这是为什么？如何使用上述充气机/布局代码居中？

非常感谢。

编辑：我的其他 XML 文件...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:id="@+id/llid">

<EditText android:id="@+id/edit_message"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />

<Button android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="Login" 
    android:layout_toRightOf="@id/edit_message" />

</RelativeLayout> 
```

# svn - 使用 HTTPS 创建分支时出现 svn“找不到路径”错误

> ID：12886151
> 
> 赞同：3
> 
> 时间：2012-10-14T20:18:38.663
> 
> 标签：svn, version-control, branch

我正在尝试在 Subversion 存储库中创建一个具有一些非标准结构的新分支：而`repo/trunk`不是`org/trunk/repo`. 只能使用 HTTPS 协议进行访问。

我试图以**半标准的方式创建一个分支** *（注意：下面的命令被编辑了一点）*

```
$ svn copy \
  https://svn.example.org/svnroot/ph/org/trunk/repo \
  https://svn.example.org/svnroot/ph/org/branches/foo/repo \
  -m "Create a 'foo' branch of /trunk/repo" 
```

此命令导致奇怪的“找不到路径”错误：

```
svn: '/svnroot/ph/org/!svn/bc/71/branches/foo' path not found 
```

我不认为是权限问题，如下命令

```
$ svn copy \
  https://svn.example.org/svnroot/ph/org/trunk/repo \
  https://svn.example.org/svnroot/ph/org/branches/foo_repo \
  -m "Create a 'foo' branch of /trunk/repo" 
```

成功了

```
Committed revision 72. 
```

这个问题的原因可能是什么？我该如何解决它？

* * *

Subversion 服务器版本为 1.6.19 (r1383947)，Subversion 客户端版本为 1.6.17 (r1128011)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T01:26:10.943

默认情况下，您不能即时创建中间目录。有**--parents**开关可以做到这一点。所以正确的命令应该是：

```
svn copy --parents \
https://svn.example.org/svnroot/ph/org/trunk/repo \
https://svn.example.org/svnroot/ph/org/branches/foo/repo \
-m "Create a 'foo' branch of /trunk/repo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:34:00.953

当您第一次创建存储库时，您运行“svn mkdir 分支”来创建分支文件夹。理所当然地，您需要运行 mkdir 命令来制作 foo ，然后才能创建到该（当前）不存在的文件夹的分支。你试过吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-23T15:43:39.420

在工作副本中创建目标目录，“添加”它们，提交，然后执行 svn 复制。为我工作。

# php - 带有 $_GET 的查询字符串中的只读参数名称

> ID：12886153
> 
> 赞同：1
> 
> 时间：2012-10-14T20:18:56.783
> 
> 标签：php, parameters, get, query-string

如何从 PHP 中的查询字符串中只读取参数名称？例如在这两个中：

```
www.example.com/index.php?a='1'
www.example.com/index.php?a 
```

想要的输出是：

```
a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:21:08.863

您可以使用全局 $_GET 数组的[array_keys ：](http://php.net/manual/en/function.array-keys.php)

```
$keys = array_keys($_GET);
echo $keys[0]; // echos a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:22:07.883

您需要获取 GET 的密钥：

```
foreach ($_GET as $key => $val)
{
    print($key);
} 
```

或通过`print_r(array_keys($_GET));`函数获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T20:21:55.217

`$_GET`只是一个数组变量（不是命令）。它填充了参数名称作为此数组中的键，参数值作为相应的值。

所以只需使用`array_keys($_GET)`.

# html - 流体输入和固定侧边栏

> ID：12886155
> 
> 赞同：0
> 
> 时间：2012-10-14T20:19:22.797
> 
> 标签：html, css

我正在尝试创建一个 100% 流畅的输入框，左侧有描述。我几乎完全按照我想要的方式拥有它，只是当我在输入框上放置边框时它现在给我带来了问题，因为它在右侧将其切断。

如果不使用 99% 而不是 100% 宽度，我该如何实现呢？我应该使用额外的 div 而不是“标签”来执行此操作吗？

[http://jsfiddle.net/GCt3z/18/](http://jsfiddle.net/GCt3z/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:22:52.323

的确：

```
box-sizing: border-box; 
```

将更改元素上的框模型，其中包括宽度计算中的边框和填充。

**[例子](http://jsfiddle.net/QHz2z/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:59:31.793

只需添加一个填充来补偿被切断的边界就可以尽可能简单地解决您的问题：

```
 .fieldwrapper { overflow: hidden; padding: 0 2px} 
```

[http://jsfiddle.net/GCt3z/24/](http://jsfiddle.net/GCt3z/24/)

# matlab - 在执行速度方面改进模拟

> ID：12886160
> 
> 赞同：0
> 
> 时间：2012-10-14T20:19:55.107
> 
> 标签：matlab, printf

我在matlab中创建了一个模拟。这是一个脚本文件，其中我有一个循环的主要内容，在其中，我编写了一些代码和函数。我在开发过程中使用`fprintf`函数来调试我的代码，以检查一切是否顺利。当我运行我的模拟时，我不会执行 fprintf，因为它需要很多时间来执行 fprintf，因为我的 for 循环执行 1E6。我有一种方法来决定何时执行 fprintf 何时不执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:29:16.747

两种选择：

1）例如包含一些名为“debug”的变量，并将每个 fprintf() 放入：

```
if (debug==1):
    fprintf(blah blah) 
```

那么您只需要在调试时更改程序开头的调试变量，或者您甚至可以将其作为用户的输入（一个标志）。

2）将 fprintf 包装在一个函数中，然后只使用该函数，例如：

```
function myfprintf(x)
   global debug

   if (debug==1):
     fprintf(x) 
```

# xml - 在 XML 和 JSON 之间转换是否有任何通用约定？

> ID：12886163
> 
> 赞同：0
> 
> 时间：2012-10-14T20:20:12.660
> 
> 标签：xml, json, web-services, serialization

当需要精确的向后转换时，在 XML 和 JSON 之间转换是否有任何通用约定？

例如，我搜索了一个[网站](http://jsontoxml.utilities-online.info/)，该网站添加了`-`要以 JSON 编码的 XML 标记属性，并将多个相同标记的 XML 条目表示为一个数组，该数组完全命名为标记名称（以单数形式），这些方式是否被广泛或特定接受到那个网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:25:23.593

有许多约定在使用中。那些产生最有用的 JSON 的往往会牺牲往返；那些无损的（并且可以处理任意 XML）往往会产生难以处理的 JSON。

# javascript - 如何在 Javascript 对象文字中命名许多事件

> ID：12886168
> 
> 赞同：1
> 
> 时间：2012-10-14T20:21:11.880
> 
> 标签：javascript, jquery

我正在使用 jQuery 事件来捕获跨 Rails 应用程序的事件。基本上，DOM 元素上有一组事件捕获，然后调用其他函数。我想做的是为这些事件捕获提供一些命名空间并寻找最佳方式：

我目前有（但像其中的 60 个）：

```
$(document).ready(function(){
  $('.edit-item').on('click', arc.event_handler.edit_item);
}); 
```

并想要类似以下的内容 - 基本上提供 edit_item 以便我们知道在哪里看：

```
$(document).ready(function(){
  var events.edit_item= {
    $('.edit-item').on('click', arc.event_handler.edit_item);
  };
}); 
```

但这给了我一个错误。我熟悉基本的对象文字语法，例如：

```
var my = {
  say_my_name: function(){
    alert('my name');
  }
} 
```

但不确定如何将它与 jQuery 函数一起应用。我该怎么做？

我知道有一些匿名函数可以更积极地命名空间，但老实说，现在只想改变这个

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:27:25.620

你似乎想要

```
var events = {
    "edit_item": $('.edit-item').on('click', arc.event_handler.edit_item)
}; 
```

或者

```
var events = {};
events.edit_item = …;
// equal to
events["edit_item"] = …; // Here you could use any expression (like a variable) 
                         // instead of the string literal 
```

现在`events.edit_item`是表达式返回的 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:33:12.437

也许这很有用：

```
var events;
$(document).ready(function(){
  events = {
    edit_item: $('.edit-item').on('click', arc.event_handler.edit_item),
    other_item: $('.other-item').on(/* something else */),
    //... 
    // the last item without trailing comma
  };
}); 
```

请注意行末的逗号。然而，IE 不喜欢最后一行后面的逗号，所以省略它。

events 对象包含 jQuery 对象，因此您可以将更多事件绑定到它或对它们执行其他 jQuery 操作。

# jquery - 网络摄像头/麦克风检测

> ID：12886169
> 
> 赞同：6
> 
> 时间：2012-10-14T20:21:14.093
> 
> 标签：jquery, actionscript-3, flash, camera, microphone

我想建立一个页面来检测用户的相机/麦克风是否与此类似：[http ://www.tokbox.com/user-diagnostic/](http://www.tokbox.com/user-diagnostic/)

我只需要指导从哪里开始。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:24:20.153

这个 jQuery 插件可以为您提供用户拥有的可用网络摄像头列表：

[http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

如果`webcam.getCameraList().length == 0`那样，您就会知道他们没有网络摄像头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:34:50.860

在闪存中你可以使用

```
 var cam:Camera = Camera.getCamera(); 
if (cam == null) 
{ 
    trace("User has no cameras installed."); 
} 
else 
{ 
    trace("User has at least 1 camera installed."); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T15:40:17.413

试试这个..获取网络摄像头的访问权限

```
$(function(){
    //initialize camera in browser
$("#camera").webcam({
            width: 320,
            height: 240,
            mode: "callback",
            swffile: "jscam_canvas_only.swf",
            onTick: function() {},
            onSave: function() {},
            onCapture: function() {},
            debug: function() {},
            onLoad: function() {}
        }); 
});

var test;
        test = function(){
            var tester = false;
            //try catch block for tight binding
            try{
                //condition if length is 0 or undefined
                if(webcam.getCameraList().length == 0){  
                   alert('You dont have a camera');  
                                            return;
                }else{
                    alert("cam detected");
                                            return;

                }
                tester = true;
            }catch(e){
                tester = false;
                setTimeout(test,1000);
            }
        }
        setTimeout(test,1000);

</script>

<div id="camera" style="opacity:0"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-01T21:02:26.820

我最终建立了自己的东西。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

I detected the camera number and the microphone number and pass it back to Javascript using ExternalInterface.

Works like a charm.

# prolog - Prolog：如何检查谓词是否存在？

> ID：12886179
> 
> 赞同：11
> 
> 时间：2012-10-14T20:22:04.680
> 
> 标签：prolog

如何检查 Prolog 程序中是否存在谓词？那将是一个`exists/1`，例如：

```
?- exists(some_predicate).
false.

?- assert(some_predicate).
true.

?- exists(some_predicate).
true. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T20:40:05.320

你可以使用[current_predicate/1](http://www.swi-prolog.org/pldoc/man?predicate=current_predicate/1)、[current_predicate/2](http://www.swi-prolog.org/pldoc/man?predicate=current_predicate/2)或[predicate_property/2](http://www.swi-prolog.org/pldoc/man?predicate=predicate_property/2)（最后你可能需要[functor/3](http://www.swi-prolog.org/pldoc/doc_for?object=functor/3)）：

```
?- current_predicate(a/1).
false.

?- functor(A,a,1),predicate_property(A,visible).
false.

?- functor(A,a,1),current_predicate(_,A).
false.

?- assert(a(42)).
true.

?- current_predicate(a/1).
true.

?- functor(A,a,1),predicate_property(A,visible).
A = a(_G136).

?- functor(A,a,1),current_predicate(_,A).
A = a(_G122). 
```

`current_predicate/2``predicate_property/2`如果谓词可以在`currrent_predicate/1`失败时自动加载，并且 （可见）成功

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:07:27.950

'老式方式'，但在 ISO 中被接受，是第/2[条。](http://www.swi-prolog.org/pldoc/doc_for?object=clause/2)您可能会在重用/浏览一些较旧的示例时遇到它。

例子：

```
?- [user].
|: app([], Y, Y).
|: app([X|Xs], Y, [X|Zs]) :- app(Xs, Y, Zs).
|: % user://1 compiled 0,15 sec, 17 clauses
true.

?- clause(app(X,Y,Z),Body).
X = [],
Y = Z,
Body = true ;
X = [_G338|_G339],
Z = [_G338|_G342],
Body = app(_G339, Y, _G342). 
```

# c++ - 客户端/服务器设置仅在同一台机器上有效

> ID：12886190
> 
> 赞同：2
> 
> 时间：2012-10-14T20:23:56.113
> 
> 标签：c++, c, sockets, networking

我有两个应用程序。一个是服务器应用程序，另一个是客户端应用程序。服务器应用程序侦听连接，然后将消息提供给所有连接的客户端。

到目前为止，我的所有测试都是通过在同一台机器上运行这两个应用程序来完成的，并且运行良好。现在虽然我正在尝试测试在一台机器上运行的服务器和在另一台机器上运行的客户端。

这些机器中的每一个都在我自己的家庭网络中。该网络位于带有防火墙的路由器后面。根据我的阅读，我的问题可能与我的路由器上未设置端口转发有关。听起来可能吗？

这是我可以用我的代码解决的问题吗？我真的必须要求所有用户手动打开防火墙上的端口吗？我使用了许多其他连接到服务器的商业应用程序，并且不需要我在防火墙上打开端口。这些应用程序和我的有什么不同？

再说一次，也许我在这里叫错了树。也许还有其他问题阻止我的代码在这种情况下工作？

我可以提供任何可能有帮助的代码片段，但我不确定从哪里开始寻找，我不想只发布我的整个解决方案:)

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:26:49.570

您需要绑定到 0.0.0.0（简化版）才能接受不是来自本地计算机的连接。你检查过你没有绑定到 127.0.0.1 吗？

当您绑定到 0.0.0.0 时，您实际上绑定到当前主机的所有当前和未来地址，因此将能够接受来自任何地方的连接，您也可以仅绑定到其中一个网络接口的地址。

# java - 确定是从 GWT 应用程序还是常规 Java 使用库类

> ID：12886191
> 
> 赞同：0
> 
> 时间：2012-10-14T20:23:59.810
> 
> 标签：java, gwt, compilation, environment

我正在编写几个在多个项目之间共享的库类。其中一些项目是普通的 Java，而其他项目是 GWT 应用程序。对于其中一些类，无论它们需要在 GWT 中还是在 Java 中运行，确切的实现都是不同的（我们不详细说明原因，但正如许多示例之一，Java 中不推荐使用 Date.getMonth，但 Calendar 替换不是' t 在 GWT 中可用）。

有没有办法将某些代码部分标记为与一种或另一种情况有关？

我研究了在 GWT 中使用延迟绑定和类替换，但这需要使用 GWT.create() 实例化类，这对于普通的 Java 应用程序不可用，因此会导致编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:43:36.617

找到了一个完美的解决方案：`<super-source>`我的库的 .gwt.xml 文件中的标签！

基本上，我的库中有以下 EnvironmentFlags 类的两个版本。Java使用的实际库中的一个位于文件夹“ **lib** ”中：

my.library.EnvironmentFlags 看起来像这样：

```
package my.library;

public class EnvironmentFlags {
  public static final boolean IS_GWT      = false;
  public static final boolean IS_DEV_MODE = false;
} 
```

然后文件夹“ **super** /my/library”中的文件如下所示：

```
package my.library;

import com.google.gwt.core.client.GWT;

public class EnvironmentFlags {
  public static final boolean IS_GWT      = true;
  public static final boolean IS_DEV_MODE = !GWT.isProdMode();
} 
```

现在神奇的是：我的库的 .gwt.xml 文件如下所示：

```
<module>
  <source       path='lib'   />
  <super-source path='super' />
</module> 
```

这导致使用 EnvironmentFlags 类的第一个版本的普通 Java，它只是将两个标志设置为 false，而 GWT 编译器用从超级源目录加载的第二个版本替换该类的源代码，它设置了 GWT标志为真，DEV_MODE 标志为它从 GWT 获得的任何东西。

现在，在我的代码中，我可以简单地使用以下内容：

```
if (EnvironmentFlags.IS_GWT) {
  // Do GWT stuff
} else {
  // Do plain-old Java stuff
} 
```

并且，Java 和 GWT 编译器都应该从编译结果中删除相应的不可访问/不需要的代码，即不需要运行时开销。

PS： IS_DEV_MODE 标志实际上与我原来的问题没有任何关系。我只是将它作为免费赠品包含在内，它允许我根据我是在测试还是部署我的 GWT 应用程序让我的代码行为不同（例如，更冗长）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:38:56.127

听起来您可以使用静态[GWT.isClient()](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/shared/GWT.html#isClient%28%29)`true`如果您的代码在 GWT 环境（开发或生产）或其他地方运行，它会返回`false`。您必须包含`gwt-user.jar`在您的服务器类路径中。例如，在 JVM 中运行以下命令：

```
import com.google.gwt.core.shared.GWT;

public class Main {
    public static void main(String[] args) {
        System.out.println(GWT.isClient() ? "Running client-side." 
                : "Running server-side.");
    }
} 
```

将`Running server-side.`在您的控制台中生成。

# c - 将输入从 int 转换为 double

> ID：12886195
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:24:44.273
> 
> 标签：c

有没有办法将实际输入 int 转换为 double。我不想获取字符串值并使用 isDigit 检查它是 double 还是 int。

```
int main(void)
{

    // Initializing variables
    int a,b,c,res;

    // Getting input from user
    printf("Please enter the sides of triangle");

    printf("\nPlease enter side 1:");
    scanf("%d",&a);

    printf("Please enter side 2:");
    scanf("%d",&b);

    printf("Please enter side 3:");
    scanf("%d",&c);

    // Calling function in order to print type of the triangle.
    checkTriangle(a,b,c);

}

// A function which decides the type of the triangle and print it
void checkTriangle(int s1, int s2,int s3)
{

    // Check the values whether it is triangle or not.
  if ((s1 + s2 > s3 && s1 +  s3 > s2 && s2 + s3 > s1) && (s1 > 0 && s2 > 0 && s3 > 0))
     {
    // Deciding type of triangle according to given input.
      if (s1 == s2 && s2 == s3)
          printf("EQUILATERAL TRIANGLE");
      else if (s1 == s2 || s2 == s3 || s1 == s3)
          printf("ISOSCELES TRIANGLE\n");
      else
          printf("SCALENE TRIANGLE \n");
    }
     else
         printf("Triangle could not be formed.");

} 
```

当我用户输入双倍时我想做什么我想给一个消息，你可以输入双倍。有没有办法在不输入字符的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:26:37.907

如果您有一个`int`想要转换为`double`简单的值的值，请使用强制转换：

```
int foo = 5;
double bar = (double) foo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:28:37.047

如果要将输入读取为双精度，请使用：

```
double inputValue;
scanf("%lf", &inputValue); 
```

`"%lf"`告诉`scanf`输入是双精度的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:40:15.973

您可以使用 scanf("%d",&u) 或者您可以将输入作为 int 或 char 类型，然后将其类型转换为 double。

# java - 带有一个字符的 Java 子字符串

> ID：12886197
> 
> 赞同：0
> 
> 时间：2012-10-14T20:24:51.410
> 
> 标签：java, substring

我有

```
String x = g.substring(0, 1);
if (x == "S") {
    stuff
} 
```

我有一个字符串“Safety”，但“stuff”没有运行，我的手表显示 x value = S and `x=="S"`= false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:26:21.730

`==`用于`identity`比较，它检查两个`reference`点是否指向同一个对象（在您的情况下，对象是`String`）。

您应该使用该`equals`方法来比较字符串的内容：

```
if (x.equals("S")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:26:28.023

`x=="S"`这比较引用而不是您应该使用的字符串相等性`"S".equals(x)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T20:26:31.907

改用`equals()`String 类的方法，而不是`==`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:26:31.830

```
if(x.equals("S")) 
```

== 检查引用而不是值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T20:27:03.953

您需要`String.equals`用于比较字符串内容。`==`运算符用于比较对象引用。

Switching the positions of the arguments will avoid a `NullPointerException`:

```
if ("S".equals(x)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T20:27:04.023

You should use the `.equals` method to compare Strings (and any non-primitives in general).

```
if (x.equals("S")) {
    //stuff
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-14T20:27:48.820

In Java `equals()` checks equality and `==` checks identity.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-14T20:29:13.143

Many problems...

*   Your variable `x` is a `String`! You shouldn't use `==` operator with that, use `.equals()` instead

*   Also, while you're at it, you should use `.equalsIgnoreCase()` to ignore case.

*   By the way, I should note that there is the [String.charAt(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#charAt%28int%29) function too, which returns the character at the specified place...

But if you would like to select all Strings (your question didn't reveal your original intentions why and what you are trying to achieve), but I'd look into regular expressions, and using [String.matches()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#matches%28java.lang.String%29)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-14T20:31:53.577

Why don't you use the `charAt` function and do it like this:

```
 char x = g.charAt(0);
    if (x == 'S') {
       // Stuff
    } 
```

If you don't want to use char, use the `equals` method in the `if` block comparison as:

```
 String x = g.substring(0, 1);
   if (x.equals("S")) {
      // stuff
   } 
```

# jquery - jquery 最低嵌套选择器

> ID：12886199
> 
> 赞同：2
> 
> 时间：2012-10-14T20:25:04.560
> 
> 标签：jquery, nested, selector

我想为以下代码滑动“.sub-menu”选择器的所有子项：

```
<div ID="browse_container">
    <div class="sub-menu">Root
        <div class="sub-menu">▷ English</div>
        <div class="sub-menu">▷ Maths
            <div class="sub-menu">Year 1</div>
            <div class="sub-menu">Year 2</div>
        </div>
        <div class="sub-menu">▷ Science</div>
    </div>
</div> 
```

我的jQuery是：

```
$(document).ready(function() {
    $('.sub-menu').live('click', function(){
        $(this).children().slideUp()
    })
}); 
```

但这会向上滑动“Root”，因为例如“english”的子项都是“Root”的子项。我可以告诉 jquery 选择较低的嵌套“子项”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:28:57.027

```
$(document).ready(function() {
  $('.sub-menu').on('click', function(event){
    event.stopPropagation();
    $(this).children().slideUp();
  });
}); 
```

[演示](http://jsbin.com/omapil/2)

您可以阻止事件“冒泡 DOM 树，阻止任何父处理程序收到事件通知”。

现在，当您单击 时`Maths`，只有孩子向上滑动。

# java - 在 Java 中使用 JPanel 的数独板

> ID：12886200
> 
> 赞同：4
> 
> 时间：2012-10-14T20:25:06.020
> 
> 标签：java, arrays, swing, 2d, sudoku

我知道已经有几篇关于数独相关问题的帖子，但我不确定其中是否有我正在寻找的内容......

我正在尝试使用 JPanels 和 JTextfields 在 Java 中构建一个空的数独板。我还需要使用另一个 JPanel 在右侧创建一个菜单。

棋盘本身是一个 9 x 9 的正方形，分成 9 个 3x3 的正方形。请注意，每个较小的正方形都由比常规正方形间边界更重的边界隔开。每个方块都是一个文本字段。编写程序，使文本字段中没有任何内容。用户可以根据需要在文本字段中输入，如果输入，数字将显示出来。侧面有四个按钮，可让您解决、获得新谜题、获得提示或重置谜题。

任何想法都会很棒。我无法理解如何嵌套 for 循环来创建板。这是我的代码...

```
 import javax.swing.*;
    import javax.swing.border.Border;
    import java.awt.*;

    public class ArrayTest extends JFrame {

        public ArrayTest() {

    JPanel board = new JPanel(new GridLayout(9, 9));
    add(board);

    JPanel[][] squares = new JPanel[9][9];

    Border border = BorderFactory.createLineBorder(Color.BLACK);

    for (int row = 1; row < 9; row++) {

        for (int col = 1; col < 9; col++) {
            squares[row][col] = new JPanel();
            board.add(squares[row][col]);

        }

    }

    JPanel menu = new JPanel();
    menu.add(new JButton("Reset"));
    menu.add(new JButton("Hint"));
    menu.add(new JButton("Solve"));
    menu.add(new JButton("New Puzzle"));

    add(menu);

}
public static void main(String[] args) {
    // TODO Auto-generated method stub

    /** Create a frame and set its properties*/
    JFrame frame = new ArrayTest();
    frame.setTitle("Sudoku");
    frame.setSize(600, 600);
    frame.setLocationRelativeTo(null); //Center the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:41:56.203

我看到的几件事：

*   我不认为你`JPanel`现在想要 9x9 s，而是 9x9 `JTextField`s。您可能需要 3x3 `JPanel`s，以便您可以使每个部分的边框更粗。明确地布置这些而不是尝试在循环中进行可能更容易。

*   您的循环计数器（和数组索引）应该从 0 开始，而不是 1。按照您现在的方式，循环只会执行 8 次。

*   您将要跟踪每行、每列和每个 3x3 子组中的值。行和列很简单，就像您在 2D 数组中一样。您可能会考虑使用另一个数组来保存每个 3x3 区域中的值。`JPanel`这使您在需要时更容易扫描这些值，并且如果您走这条路，可能有助于将值放置在较小的 3x3中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T02:10:12.737

首先，我会使用某种模型来控制“虚拟”板中的值，这会将逻辑与 UI 分开，并允许其中一个进行更改而不会对另一个产生不利影响。

我会为模型提供适当的事件，以允许在模型更改时更新 UI，并为每个字段提供一种根据需要更新模型的方法。

然后，我会将问题简化为最小的概念组件，即子板，并生成 UI 以尽可能抽象的方式表示它。这允许重复使用并有助于调试，就好像一块板有问题，然后你可以在一个地方修复它。

```
public class Sudoku {

    public static void main(String[] args) {
        new Sudoku();
    }

    public Sudoku() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SudokuBoard());
                frame.add(new MenuPane(), BorderLayout.AFTER_LINE_ENDS);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public class MenuPane extends JPanel {

        public MenuPane() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 1;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(new JButton("Solve"), gbc);
            gbc.gridy++;
            add(new JButton("New"), gbc);
            gbc.gridy++;
            add(new JButton("Hint"), gbc);
            gbc.gridy++;
            add(new JButton("Reset"), gbc);
        }
    }

    public class SudokuBoard extends JPanel {

        public static final int ROWS = 3;
        public static final int COLUMNS = 3;

        private SubBoard[] subBoards;

        public SudokuBoard() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            subBoards = new SubBoard[ROWS * COLUMNS];
            setLayout(new GridLayout(ROWS, COLUMNS, 2, 2));
            for (int row = 0; row < ROWS; row++) {
                for (int col = 0; col < COLUMNS; col++) {
                    int index = (row * ROWS) + col;
                    SubBoard board = new SubBoard();
                    board.setBorder(new CompoundBorder(new LineBorder(Color.GRAY, 3), new EmptyBorder(4, 4, 4, 4)));
                    subBoards[index] = board;
                    add(board);
                }
            }
        }
    }

    public class SubBoard extends JPanel {

        public static final int ROWS = 9;
        public static final int COLUMNS = 9;

        private JTextField[] fields;

        public SubBoard() {
            setLayout(new GridLayout(ROWS, COLUMNS, 2, 2));
            fields = new JTextField[ROWS * COLUMNS];
            for (int row = 0; row < ROWS; row++) {
                for (int col = 0; col < COLUMNS; col++) {
                    int index = (row * COLUMNS) + col;
                    JTextField field = new JTextField(4);
                    fields[index] = field;
//                    field.setText(Integer.toString(index));
                    add(field);
                }
            }
        }
    }
} 
```

**更新**

要将文本字段限制为仅允许输入数字值，您可以查看[JTextField 限制字符量输入和仅接受数字](https://stackoverflow.com/questions/12793030/jtextfield-limiting-character-amount-input-and-accepting-numeric-only/12793126#12793126)的一些想法

![在此处输入图像描述](../Images/182cf9695e4107b79d39f8308e3eacef.png)

**更新（使用二维数组）**

这是一个使用 2D 数组的实现，它还对子板进行分组，以便每个 3x3 字段的网格都有自己的板...

![在此处输入图像描述](../Images/3731a296b7f6466b21dced5d8236897d.png)

```
public class Sudoku {

    public static void main(String[] args) {
        new Sudoku();
    }

    public Sudoku() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SudokuBoard());
                frame.add(new MenuPane(), BorderLayout.AFTER_LINE_ENDS);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public class MenuPane extends JPanel {

        public MenuPane() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 1;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(new JButton("Solve"), gbc);
            gbc.gridy++;
            add(new JButton("New"), gbc);
            gbc.gridy++;
            add(new JButton("Hint"), gbc);
            gbc.gridy++;
            add(new JButton("Reset"), gbc);

        }

    }

    public class SudokuBoard extends JPanel {

        public static final int ROWS = 3;
        public static final int COLUMNS = 3;

        private SubBoard[][] subBoards;

        public SudokuBoard() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            subBoards = new SubBoard[ROWS][COLUMNS];
            setLayout(new GridLayout(ROWS, COLUMNS, 2, 2));
            for (int row = 0; row < ROWS; row++) {
                for (int col = 0; col < COLUMNS; col++) {
                    int index = (row * ROWS) + col;
                    SubBoard board = new SubBoard();
                    board.setBorder(new CompoundBorder(new LineBorder(Color.GRAY, 3), new EmptyBorder(4, 4, 4, 4)));
                    subBoards[row][col] = board;
                    add(board);
                }
            }
        }

    }

    public class SubBoard extends JPanel {

        public SubBoard() {
            setLayout(new GridLayout(3, 3, 2, 2));

            for (int index = 0; index < 3*3; index++) {
                add(new ChildBoard(3, 3));
            }

        }
    }

    public class ChildBoard extends JPanel {

        private JTextField[][] fields;

        public ChildBoard(int rows, int cols) {
            setBorder(new LineBorder(Color.LIGHT_GRAY));
            setLayout(new GridLayout(rows, cols, 2, 2));
            fields = new JTextField[rows][cols];
            for (int row = 0; row < rows; row++) {
                for (int col = 0; col < cols; col++) {
                    JTextField field = new JTextField(4);
                    fields[row][col] = field;
                    add(field);
                }
            }
        }

    }
} 
```

或者，如果您想尝试将所有字段保留在一个顶级引用中，您可以执行类似...

```
public class SubBoard extends JPanel {

    private JTextField[][] fields;

    public SubBoard() {
        setLayout(new GridLayout(3, 3, 2, 2));

        fields = new JTextField[9][9];
        for (int row = 0; row < 9; row++) {
            for (int col = 0; col < 9; col++) {
                fields[row][col] = new JTextField(4);
            }
        }

        for (int row = 0; row < 3; row++) {
            for (int col = 0; col < 3; col++) {

                int startRow = row * 3;
                int startCol = col * 3;

                add(new ChildBoard(3, 3, fields, startRow, startCol));

            }
        }

    }
}

public class ChildBoard extends JPanel {

    public ChildBoard(int rows, int cols, JTextField[][] fields, int startRow, int startCol) {
        setBorder(new LineBorder(Color.LIGHT_GRAY));
        setLayout(new GridLayout(rows, cols, 2, 2));
        for (int row = 0; row < rows; row++) {
            for (int col = 0; col < cols; col++) {
                JTextField field = fields[startRow + row][startCol + col];
                fields[row][col] = field;
                add(field);
            }
        }
    }

} 
```

**更新单类**

好吧，与其子分类，不如简单地使用几种方法来创建板的每个单独部分，您可以从中重复调用...

![在此处输入图像描述](../Images/c36af08afb4d40fade0311138c4a4dcf.png)

记住，减少和重用。

```
public class Sudoku {

    public static void main(String[] args) {
        new Sudoku();
    }

    public Sudoku() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SudokuBoard());
                frame.add(new MenuPane(), BorderLayout.AFTER_LINE_ENDS);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public class MenuPane extends JPanel {

        public MenuPane() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 1;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            add(new JButton("Solve"), gbc);
            gbc.gridy++;
            add(new JButton("New"), gbc);
            gbc.gridy++;
            add(new JButton("Hint"), gbc);
            gbc.gridy++;
            add(new JButton("Reset"), gbc);

        }
    }

    public class SudokuBoard extends JPanel {

        public static final int GRID_ROWS = 3;
        public static final int GRID_COLUMNS = 3;
        public static final int BOARD_ROWS = 9;
        public static final int BOARD_COLUMNS = 9;
        private JTextField fields[][];

        public SudokuBoard() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            fields = new JTextField[GRID_ROWS * BOARD_ROWS][GRID_COLUMNS * BOARD_COLUMNS];

            setLayout(new GridLayout(GRID_ROWS, GRID_COLUMNS, 2, 2));
            for (int row = 0; row < GRID_ROWS; row++) {
                for (int col = 0; col < GRID_COLUMNS; col++) {
                    int startRow = row * GRID_ROWS;
                    int startCol = col * GRID_COLUMNS;
                    add(createBoard(fields, startRow, startCol));
                }
            }
        }

        protected JPanel createBoard(JTextField fiels[][], int startRow, int startCol) {
            JPanel panel = new JPanel(new GridLayout(3, 3, 2, 2));
            panel.setBorder(new CompoundBorder(new LineBorder(Color.DARK_GRAY, 2), new EmptyBorder(2, 2, 2, 2)));

            for (int row = 0; row < 3; row++) {
                for (int col = 0; col < 3; col++) {
                    int rowIndex = (startRow + row) * 3;
                    int colIndex = (startCol + col) * 3;
                    panel.add(createSubBoard(fields, rowIndex, colIndex));
                }
            }
            return panel;
        }

        protected JPanel createSubBoard(JTextField[][] fields, int startRow, int startCol) {
            JPanel panel = new JPanel(new GridLayout(3, 3, 2, 2));
            panel.setBorder(new CompoundBorder(new LineBorder(Color.GRAY, 2), new EmptyBorder(2, 2, 2, 2)));

            populateFields(fields, startRow, startCol);
            for (int row = 0; row < 3; row++) {
                for (int col = 0; col < 3; col++) {
                    panel.add(fields[row + startRow][col + startCol]);
                }
            }
            return panel;
        }

        protected void populateFields(JTextField[][] fields, int startRow, int startCol) {
            for (int row = startRow; row < startRow + 3; row++) {
                for (int col = startCol; col < startCol + 3; col++) {
                    fields[row][col] = new JTextField(4);
                }
            }
        }
    }
} 
```

# iphone - UIView 主线程。2个UIView同时动画

> ID：12886202
> 
> 赞同：0
> 
> 时间：2012-10-14T20:25:15.293
> 
> 标签：iphone, ios, uiview

我想知道是否可以同时编写不同的 UIView 动画。我试图同时使用精灵动画为两个 Apple 风格的翻转计数器设置动画。每个翻转计数器都有自己的动画。问题是当第一个计数器完成时，第二个翻转计数器开始运行。

两次编辑：这是代码： [https ://dl.dropbox.com/u/1348024/MultipleFlipCounters.zip](https://dl.dropbox.com/u/1348024/MultipleFlipCounters.zip)

有两个简单的类“FlipCounterView.m”和“CounterViewController”。点击屏幕“CounterViewController”将启动动画。谢谢！

编辑：

添加了相关代码。

Apple 风格的翻转计数器精灵动画是在 FlipCounterView 类中完成的。

```
- (void)viewDidLoad{
[super viewDidLoad];
flipCounter1 = [[FlipCounterView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
[flipCounter1 add:10];
[self.view addSubview:flipCounter1];

flipCounter2 = [[FlipCounterView alloc] initWithFrame:CGRectMake(0, 120, 200, 200)];
[flipCounter2 add:10];
[self.view addSubview:flipCounter2];
} 
```

敲击画面：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

[UIView animateWithDuration:0.5
                     animations:^{
                         //this method made an sprite animation on flipCounter1
                         [flipCounter1 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
                     }];

[UIView animateWithDuration:0.5
                     animations:^{
                         //this method made an sprite animation on flipCounter2
                         [flipCounter2 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
                     }]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:27:21.770

您的代码中的崩溃似乎与动画无关（Xcode 4.5.1），如果您希望两个动画同时执行，您可以在一个动画块中执行此操作（因为动画属性相同）。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [UIView animateWithDuration:0.5 animations:^{
        [flipCounter1 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
        [flipCounter2 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:38:43.763

您的代码崩溃了，但在修复崩溃后试一试：

```
- (void)animateNow1
{
    [UIView animateWithDuration:0.5
                     animations:^{
                         [flipCounter1 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
                     }];

}
- (void)animateNow2
{
    [UIView animateWithDuration:0.5
                     animations:^{
                         [flipCounter2 distributedAdd:150 overSeconds:0 withNumberOfIterations:3];
                     }];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self performSelector:@selector(animateNow1) withObject:nil afterDelay:0.00];
    [self performSelector:@selector(animateNow2) withObject:nil afterDelay:0.00];
} 
```

# javascript - Ajax 请求、页面和代码来计算 diff 的数据范围。猫

> ID：12886204
> 
> 赞同：1
> 
> 时间：2012-10-14T20:25:22.540
> 
> 标签：javascript, jquery

好的，所以我会更具体一点（自从我上一个问题以来）。

基本上，我有一个分页页面 - 并且有三个显示类别，但每个分页页面只显示 50 个项目。因此，您可以让所有单个类别占据一个页面，或不同类别的组合 - 但每页不能超过 50 个项目。到达新类别后，将显示标题，然后显示相关项目。我无法弄清楚附加到 ajax 调用以请求每个类别的数学。例如，假设您搜索*linen*。假设您返回了分布在三个类别中的总共 329 场比赛，如下所示。现在，我将收到一些*数据*，以便我预先知道某些事情，即使我一次只查询 50 个项目。

A. 搜索*亚麻*：

**基础数据**

```
Total Items: 129
Category1 has 111 items
Category2 has 101 items
Category3 has 17 items 
```

因此，在**第 1 页上**，您会看到：

```
CATEGORY 1 HEADER
... list of the 50 items ... 
```

B. 用户点击“下一步”（因为我们仍处于类别 1 阈值中），我们将获得第二组 50 个。

**第2页：**

```
CATEGORY 1 HEADER
List of next 50 items 
```

C. 用户点击“下一步”（我们总共打破了第 1 类，所以现在我们进入第 2 类）。

**第 3 页：**

```
CATEGORY 1 HEADER
List of 11 items

CATEGORY 2 HEADER
List of 39 category 2 items 
```

ETC..

我遇到的问题是，如果不做大量的 if/else/||/&& 等。是否有一个漂亮的算法可以给我范围，所以在“下一页”点击我可以有 ajax 参数请求范围为后端。

即.. 所以对于第三个下一页单击 - （同时具有类别 1 和类别 2，如上所示）。在一个完美的世界中，我的 Ajax 会触发两个调用，一个用于类别 1，一个用于类别 2，就像这样。当然，如果 50 的列表完全涵盖所有三只猫，那么将进行三个调用。

```
/category1?rows=11&start=101
/category2?rows=39&start=1 
```

类似的东西。所以我知道我想从第一个 ajax 调用中获得 11 个项目，以 101 开头。我假设后端会知道范围是 101-111 等。

我希望我在这里足够简洁以满足我的需求。解决方案似乎非常数学化。

我的工作思路是，只是用铅笔画东西……

(category1 - (max x (currPage - 1)) / max >= 1 --> 如果为真，则请求 50 个类别 1；

(category1 - (max x (currPage - 1)) / max < 1 --> 请求模量然后开始进入category2

我们使用jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T02:06:10.103

[http://jsfiddle.net/CrossEye/eKApZ/](http://jsfiddle.net/CrossEye/eKApZ/)提供了一种解决方案。

基本思想是这样的：

```
var createCategoryRangesForPage = (function() {
    var ranges = function(itemCounts) {
        var total = 0;
        var indices = [0].concat(jQuery.map(itemCounts, function(item) {
            return total = total + item.count;
        }));
        var result = function(pageNbr, pageSize) {
            var first = pageSize * (pageNbr - 1),
                last = Math.min(first + pageSize, total),
                firstIdx = indices.length - 1,
                lastIdx = indices.length - 1;
            if (first >= total) {return ranges.OUT_OF_BOUNDS;}
            while (indices[firstIdx] > first) {firstIdx--;}
            while (indices[lastIdx] >= last) {lastIdx--;}
            return jQuery.map(new Array(lastIdx - firstIdx + 1), function(item, idx) {
                var index = idx + firstIdx;
                return {
                    name: itemCounts[index].name,
                    start: Math.max(first, indices[index]) - indices[index] + 1,
                    // end: Math.min(last, indices[index + 1]) - indices[index],
                    count: Math.min(last, indices[index + 1]) - Math.max(first, indices[index])
                };
            });
        };
        result.OUT_OF_BOUNDS = ranges.OUT_OF_BOUNDS;
        return result;
    };
    ranges.OUT_OF_BOUNDS = {message: "Out of bounds", toString:function(){return this.message;}};
    return ranges;
}()); 
```

然后你可以像这样创建一个分页函数：

```
var catRangesForPage = createCategoryRangesForPage([
    {name:"CATEGORY 1", count: 111},
    {name:"CATEGORY 2", count: 101},
    {name:"CATEGORY 3", count: 17}
]); 
```

并将其称为第 3 页，页面大小为 50，如下所示：

```
catRangesForPage(3, 50) 
```

得到如下所示的结果：

```
[
    {
        "name": "CATEGORY 1",
        "start": 101,
        "count": 11
    },
    {
        "name": "CATEGORY 2",
        "start": 1,
        "count": 39
    }
] 
```

您可以清楚地使用它来生成 AJAX 调用。

如果您愿意，将`pageSize`参数移动到初始调用中将是微不足道的。这不太灵活，但可能更容易使用。要改变这一点，只需`pageSize`从这一行移动参数：

```
 var result = function(pageNbr, pageSize) { 
```

对此：

```
 var ranges = function(itemCounts) { 
```

（它可能应该是这里的第一个参数，因为如果您`itemCounts`按照我的示例的方式传递对象文字，它可能会在随机播放中丢失。）

另一件需要注意的是，该函数返回一个名为的信号对象`OUT_OF_BOUNDS`，让您知道您已尝试访问超出范围的页面。该对象被命名为生成器函数和它返回的函数，无论你觉得哪个更方便。

这尚未在您最初问题的范围之外进行测试，如果在某处发现边界问题，我不会感到非常惊讶。

（这确实使用了 jQuery，但仅用于它的`map`实用功能。您可以使用任何体面的`map`实现，包括最近浏览器中的原生实现。）

祝你好运！

# android - 将 getView() 与 ViewHolder 一起使用时滚动时 ListView 中的文本混乱

> ID：12886205
> 
> 赞同：0
> 
> 时间：2012-10-14T20:25:23.920
> 
> 标签：android, android-listview, android-cursoradapter

我有一个奇怪的问题，我`ListView`将正确显示最初创建视图时填充的列表项，但是当我开始滚动时，某些项目的位置会发生变化，并且不会反映它们在列表中的位置。

这是我的代码：

```
private class CustomCursorAdapter extends CursorAdapter {

    LayoutInflater mInflater;

    public CustomCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        this.mContext = context;

        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @SuppressWarnings("static-access")
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.assignment_list_item, parent, false);
            holder = new ViewHolder();
            holder.colorStrip = (ColorStrip) convertView.findViewById(R.id.assignment_list_color_strip);
            holder.titleLabel = (TextView) convertView.findViewById(R.id.list_title);
            holder.descriptionLabel = (TextView) convertView.findViewById(R.id.list_description);
            holder.dueLabel = (TextView) convertView.findViewById(R.id.list_due);

            convertView.setTag(holder);
        } else
            holder = (ViewHolder) convertView.getTag();

        assignmentsCursor.moveToPosition(position);
        String title = assignmentsCursor.getString(1);
        short course = assignmentsCursor.getShort(2);
        String desc = assignmentsCursor.getString(3);
        long due = assignmentsCursor.getLong(4);

        holder.titleLabel.setText("Pos: " + position + " | " + title);
        holder.colorStrip.setColor(colors.get(course));
        convertView.setBackgroundColor(colorsLight.get(course));
        String dueString = getDateString(due);
        holder.dueLabel.setText(dueString);
        holder.descriptionLabel.setText(desc);

        return convertView;
    }

    @Override
    public void bindView(View arg0, Context arg1, Cursor arg2) {}

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) { return null; }

    @Override
    public boolean hasStableIds() { return true; }

    @Override
    public int getViewTypeCount() { return 2; }
} 
```

您可以在这里看到我的问题的视频：http: [//youtu.be/KzyTLSsDeJk](http://youtu.be/KzyTLSsDeJk)在视频中，您可以看到位置 7 的列表项在我滚动时正在更改一堆，然后列表似乎在 0 处重新开始在项目编号 8 上。ListView*应该*显示的是“Pos: 0”、“Pos: 1”...“Pos: 8”、“Pos: 9”等等。

从第 8 位到列表末尾，颜色也很混乱。背景颜色总是应该是沿列表项左侧的条带的较浅版本。

**编辑：** 在视频中，您可以看到 getView 被传递的位置（反映在每个列表项的标题 TextView 中）在最初可见的内容结束时都很好（通过“Pos：6 | ...”）在屏幕上（不滚动），但是一旦我向下滚动，接下来出现的所有内容都会一团糟。

这是每个列表项中第一个 TextView 的表示（括号中是我的评论）：

职位：0 | 阅读第 1 章（好）
Pos: 1 | 填写知识框（好）
职位：2 | 第 1 章论文（好）
位置：4 | 阅读第 2 章（好）
Pos: 5 | 在活页夹里放更多的纸（好）
位置：6 | 做第 1 课（好）
位置：## | [滚动时变化]（从位置正确开始：7，但随着我滚动的更多，它会发生巨大变化）
位置：0 | 阅读第 1 章（应为 Pos: 8）
Pos: 1 | 填写知识框（应为职位：9）

Pos：## 是最初只是在屏幕外的项目，但是当我滚动时位置编号会发生变化（参见视频）。

**编辑 2：**这是我的 ViewHolder 类：

```
private static class ViewHolder {
    private static ColorStrip colorStrip;
    private static TextView titleLabel;
    private static TextView descriptionLabel;
    private static TextView dueLabel;

    public ViewHolder() {}
} 
```

**编辑3：**只是为了好玩，我停止使用我的ViewHolder（并且每次都使用运行findViewById（）的低效方法）并且我的问题都消失了。所有的 TextView 都被分配了适当的值，而且颜色看起来也不错。任何想法我的 ViewHolder 的实现可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:40:34.703

可能是因为您没有`CursorAdapter`按照应有的方式使用。在`CursorAdapter`您必须膨胀内部视图`newView()`并返回`view`将传递`bindView()`给以将视图与游标中的数据绑定的视图。[您可以从此处](https://github.com/lalit3686/CursorAdapter)查看演示项目。以确保您可以如何实现您的`CursorAdapter`. 您也可以查看许多教程`CursorAdapter`，其中之一就是[这个](http://thinkandroid.wordpress.com/2010/01/11/custom-cursoradapters/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:58:05.703

我认为要分配光标值，您应该使用 bindView() 和 newView() 方法而不是 getView()。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T04:27:12.603

像这样从 getView() 方法中删除 if 条件。

```
 public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

        convertView = mInflater.inflate(R.layout.assignment_list_item, parent, false);
        holder = new ViewHolder();
        holder.colorStrip = (ColorStrip) convertView.findViewById(R.id.assignment_list_color_strip);
        holder.titleLabel = (TextView) convertView.findViewById(R.id.list_title);
        holder.descriptionLabel = (TextView) convertView.findViewById(R.id.list_description);
        holder.dueLabel = (TextView) convertView.findViewById(R.id.list_due);

        convertView.setTag(holder);

    assignmentsCursor.moveToPosition(position);
    String title = assignmentsCursor.getString(1);
    short course = assignmentsCursor.getShort(2);
    String desc = assignmentsCursor.getString(3);
    long due = assignmentsCursor.getLong(4);

    holder.titleLabel.setText("Pos: " + position + " | " + title);
    holder.colorStrip.setColor(colors.get(course));
    convertView.setBackgroundColor(colorsLight.get(course));
    String dueString = getDateString(due);
    holder.dueLabel.setText(dueString);
    holder.descriptionLabel.setText(desc);

    return convertView;
} 
```

# c - C UNIX Shell execvp 引用引用

> ID：12886208
> 
> 赞同：0
> 
> 时间：2012-10-14T20:26:14.810
> 
> 标签：c, shell, unix, exec, echo

所以我正在用 C 编写一个基本的 UNIX minishell。一切都进行得很顺利，但是我最近重新设计了它从控制台获取的原始字符串中解析参数的方式。这是它解析方式的示例：

```
$> echo HELLO "" WORLD!
HELLO "" WORLD! 
```

参数数组如下所示： [echo0, HELLO0, ""0, WORLD!0]

我像这样通过它：

```
execvp(args[0], args); 
```

但是， echo 应该省略引号，并且如您所见，它将它们打印出来。由于 echo 在我的情况下不是内置命令，因此我无法自定义它的打印方式。有谁知道为什么会发生这种情况？我想省略双引号，但包括所有其他类型的字符（当然除了 null ）。但是，空字符串本身也算作参数，因此：

```
echo HELLO "" WORLD! 
```

应该输出：

```
HELLO  WORLD! 
```

中间有 2 个空格，不是：

```
HELLO WORLD! 
```

只有一个（因为空字符串是一个参数）。

我希望这不会太令人困惑。如果你们需要任何澄清，请询问；我很乐意发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:27:52.453

它是在解析命令行时去掉引号的 shell。如果您将它们传递`exec*`给直接调用，则 echo 会回显它们。那么它相当于`echo HELLO '""' WORLD!`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:52:49.790

```
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

int main(void)
{
    char *args1[] = { "/bin/echo", "HELLO", "\"\"", "WORLD!", 0 };
    char *args2[] = { "/bin/echo", "HELLO", "",     "WORLD!", 0 };
    if (fork() == 0)
    {
        execvp(args1[0], args1);
        exit(1);
    }
    while (wait(0) > 0)
        ;
    execvp(args2[0], args2);
    return(1);
} 
```

这表明了差异。当您使用时，没有解释 I/O 重定向等的 shell `execvp()`— 尽管在这种情况下，`execv()`由于我已经指定了`echo`命令的路径，所以也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T20:30:56.160

`/bin/echo`不知道报价。它只是打印由空格分隔的所有参数。您所说的适用于外壳的原因是外壳知道引号并将空字符串作为第二个参数传递。

# sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近 ')'

> ID：12886216
> 
> 赞同：1
> 
> 时间：2012-10-14T20:26:52.580
> 
> 标签：sql, sql-server-2008, tsql

如果 T_Referral 表上发生任何更新，我在触发器中有一个脚本来插入审计表，并且我正在使用 Decrypt 函数来解密其中一列中的数据。我在触发器中的代码是：

```
DECLARE @Sql_Insert nvarchar(max)
SET @Sql_Insert = ''
SET @Sql_Insert='INSERT INTO [Logg].AuditLogData(TableName, ColumnName, OldValue, OldValue_Decode, NewValue, NewValue_Decode, AuditSubCategoryID,[GuID])
select TableName, ColumnName, OldValue_Decode, case when ColumnName = ''BookingUserReferenceValue'' then utl.sfDecrypt(NewValue,0) Else NewValue end, NewValue_Decode, AuditSubCategoryID,[GuID] from #AuditLogData
where ISNULL(OldValue,'') != ISNULL([NewValue],'')'

exec utl.uspOpenOrCloseEncryptionKey 'open'
exec(@Sql_Insert )
exec utl.uspOpenOrCloseEncryptionKey 'close' 
```

* * *

我的更新脚本是

```
Update RTS.T_Referral   
set BookingUserReferenceValue =  cast ('John Wayne' as varbinary(256))
where ReferralId = 20 
```

我正在将记录更新为表`John Wayne`中的 varbinary `T_Referral`（记录看起来像`0x4A6F686E205761796E65`），并且当调用更新触发器时，它将将该记录加载为审计表中的 John Wayne。当记录插入 BookingUserReferenceValue 时，它​​将被加密。BookingUserReferenceValue 列的数据类型是 Varbinary(256)。当我尝试更新该列中的记录时，出现错误：

> 在预期条件的上下文中指定的非布尔类型的表达式，靠近 ')'。

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:34:07.493

您需要转义单引号：

```
SET @Sql_Insert='
INSERT INTO [Logg].AuditLogData(TableName, ColumnName, OldValue, OldValue_Decode, NewValue, NewValue_Decode, AuditSubCategoryID,[GuID])
select 
    TableName, ColumnName, OldValue, OldValue_Decode, 
    case when ColumnName = ''BookingUserReferenceValue'' then utl.sfDecrypt(NewValue,0) Else NewValue end,
    NewValue_Decode, AuditSubCategoryID,[GuID] 
from #AuditLogData
where 
    ISNULL(OldValue, cast('''' as varbinary(256))) != 
    ISNULL([NewValue], cast('''' as varbinary(256)))
'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T05:42:11.130

`IF`如果我们在语句、`WHERE`子句、子句等中编写非布尔表达式，`HAVING`则会出现语法错误。请检查您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:06:12.650

我认为您的 SELECT 列表中缺少 OldValue。我不确定为什么您没有收到列数不匹配的错误。

# windows - 如何使用 Perl 5.004 获取文件的最后修改时间并且没有模块

> ID：12886217
> 
> 赞同：0
> 
> 时间：2012-10-14T20:26:51.683
> 
> 标签：windows, file-io, perl

我有一个独立版本的 Perl for Windows (5.004)，它不包含任何模块。我想运行一个脚本来检查几个文件的最后修改时间。

我可以使用`File::qstat`，但该模块不存在（Perl 的副本在版本控制中，因此没有安装[ActivePerl](https://en.wikipedia.org/wiki/ActivePerl)或[Strawberry Perl](http://en.wikipedia.org/wiki/Strawberry_Perl)的人可以使用它）。

似乎有三个选项：

1.  弄清楚如何将更新的、功能更强大的独立 Perl 安装放入版本控制中
2.  只需以某种方式添加 File::Stat 模块，然后执行`use lib`（这在 5.004 上有效吗？）
3.  使用 5.004 for Windows 中包含的一些内置函数来获取文件状态。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:32:01.317

```
perl -le '$file=shift or die;print scalar localtime((stat($file))[9])' file 
```

见[统计](http://perldoc.perl.org/functions/stat.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:35:42.087

你到底为什么要坚持使用 Perl 5.004？我有来自 1999 年的 Perl 5.5.3 的源代码，所以 Perl 5.004 可能比这早几年。（毕竟我找到了 Perl 5.004_04 的源代码；其中最新的时间戳是 1997-10-15 06:46。）所以，那是大约 15 年的历史。

该`stat`功能可能存在并完成您需要的工作。

# javascript - Mongoose，子文档是对象而不是 json

> ID：12886222
> 
> 赞同：0
> 
> 时间：2012-10-14T20:27:29.717
> 
> 标签：javascript, mongodb, mongoose

我正在使用 mongoose 查询我的 mongodb，但我不明白为什么返回的子文档只是 Object 类型，而不是 JSON。

使用

```
 hero.find({} ,{'deck' : {$elemMatch:{name:'Guard Tower'}}}, function(err, tower) {
    console.log(tower);
  } 
```

返回

```
[ { _id: 507ac406ba6ecb1316000001,
    deck: 
     [ { name: 'Guard Tower',
         description: 'This tower shoots stuff.',
         cost: 13,
         sellValue: 7,
         radius: 180,
         speed: 40,
         dmg_min: 0,
         dmg_max: 0,
         actual_height: 40,
         sprite: 'guardtower_red.png',
         anim: [Object],
         size: [Object],
         projectile: [Object],
         upgrade: [Object] } ] } ] 
```

像动画，大小，弹丸，升级等子文档，是对象，我需要嵌套的信息，我怎样才能得到信息？不进行另一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:51:03.443

所有文档和子文档都是 JavaScript 中的对象。只是在调用格式化文档以进行输出`console.log`时使用默认深度 2 。`util.inspect`您可以通过调用[`util.inspect`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)自己来输出文档的所有级别：

```
var util = require('util');

hero.find({} ,{'deck' : {$elemMatch:{name:'Guard Tower'}}}, function(err, tower) {
    console.log(util.inspect(tower, false, null)); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T23:23:37.707

像您一样使用 find() 在 Mongoose 上进行查询将返回 Mongoose 文档（而不是 JSON）。您可以使用 lean() 方法返回 POJO：

```
hero
 .find({} ,{'deck' : {$elemMatch:{name:'Guard Tower'}}})
 .lean()
 .exec(function(err, tower) {
   //tower is a JSON here
   console.log(tower);
 }); 
```

但是 JohnnyHK 所说的控制台日志是真的，它只会将嵌套文档显示为 [Object]。

更新：请注意，使用 .lean() 将返回对象，并且您可能拥有的任何虚拟字段或特殊 getter 都将被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T23:56:18.890

JohnnyHK 是正确的，但是如果您只想注销 JSON，则更简单的方法是

```
console.log(tower.toJSON()); 
```

您可以查看我对 Rodrigo 的评论，了解为什么会这样。

# opencv - 使用 OpenCV 检测人脸侧面

> ID：12886223
> 
> 赞同：2
> 
> 时间：2012-10-14T20:27:34.543
> 
> 标签：opencv, face-detection

我正在做一个需要在人脸识别中检测左右脸转向的项目。我什至不知道 API 是否可以检测到它。

我可以使用 OpenCV 检测人脸，但是当我转动我的脸时，它甚至没有检测到人脸。

任何帮助是极大的赞赏，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:00:04.940

它在 OpenCV 中称为配置文件，并且已经是 OpenCV 的一部分。我想您必须使用另一个分类器进行此类检测

看看这些链接：

*   [http://alereimondo.no-ip.org/OpenCV/34](http://alereimondo.no-ip.org/OpenCV/34)
*   [http://tech.groups.yahoo.com/group/OpenCV/message/78936](http://tech.groups.yahoo.com/group/OpenCV/message/78936)

# java - sqlite中的列类型NONE

> ID：12886224
> 
> 赞同：3
> 
> 时间：2012-10-14T20:27:36.010
> 
> 标签：java, android, sqlite

我有在 Android 平台上使用的 sqlite 数据库。

我在运行时创建了表。我的 SQL 是：

```
CREATE TABLE funcs ( id INTEGER PRIMARY KEY AUTOINCREMENT, func_name TEXT, param NONE) 
```

此表中的每一行都表示我的程序中的函数调用。并且参数为每一行更改它的类型。

而且，我已经创建了预设一行表格的类

```
class FunctionDB
{
    private ContentValues mContentValues;

    public FunctionDB(Cursor cursor)
    {
        DatabaseUtils.cursorRowToContentValues(cursor, this.mContentValues);
    }

    public int getID()
    {
        return this.mContentValues.getAsInteger("id");
    }

    public String getName()
    {
        return this.mContentValues.getAsString("func_name");
    }

    public ??? getParam()
    {
        return this.mContentValues.getAs???("param");
    }

} 
```

我希望这个类是通用函数类型。这意味着，我想通过检查函数的名称来确定`param`列的类型。

如何`param`在我的代码中接收列的通用类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:35:55.553

根据[文档](http://developer.android.com/reference/android/content/ContentValues.html)，读取某些值的通用方法是使用`get`，它返回一个`Object`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:38:28.413

我想不出一个干净的方法来做到这一点。

```
typeof(columnName) 
```

将数据类型作为字符串返回。

```
String dataType = this.typeof("param");

if (dataType.equalsIgnoreCase("TEXT"){

if (dataType.equalsIgnoreCase("INTEGER"){

... 
```

# c - 枚举和结构定义

> ID：12886227
> 
> 赞同：3
> 
> 时间：2012-10-14T20:27:50.700
> 
> 标签：c, header, enums, struct, redefinition

使用代码块编译我的项目时出现错误。我的问题来自枚举定义和结构定义。

它们是在头文件中定义的机器人，因为我只在 .c 关联文件中使用那些枚举和结构，所以它起作用了。但是当我将 .h 文件包含在另一个 .c 文件中时，出现错误，这是一些代码；

**地图.h**

```
#include <stdlib.h>
#include <stdio.h>

enum Property { BACKGROUND, FOREGROUND, BLOCK, EVENT };

typedef struct {
   char map_name[50];
   int width;
   int height;
   char* map_struct;
}rpgMap;
char getTileProperty(rpgMap map, int x, int y, int property); 
```

**地图.c**

```
#include "maps.h"

char getTileProperty(rpgMap map, int x, int y, int property){    // Works
   char value = NULL;
   value = map.map_struct[(((y*(map.width-1))+y+x) * 4 ) + property];
   return value;
}   
rpgMap loadMap(unsigned char* map){
   rpgMap Map;
       //....
       //some code
       //...
   return Map;
}
// This works until i include maps.h in another .c file 
```

所以这就是东西，当我在例如中包含 maps.h 时。game.c 或 game.hi 有此错误；

错误：“枚举属性”的嵌套重新定义

我不明白！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:32:42.997

您需要在头文件中添加标头保护，否则您将获得多个声明。

例如，对于您的`maps.h`环绕它：

```
#ifndef MAPS_H
#define MAPS_H

...

#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T23:51:34.977

任何包含头文件的源文件都将声明一个实例变量，其可能的枚举值是 { 背景、前景、块、事件}。我不确定这是你的意图。一般来说，这样做不是很好的做法。

如果您打算**声明一种枚举类型**并允许在其他地方创建实例，请将其放在头文件中：

```
typedef enum { BACKGROUND, FOREGROUND, BLOCK, EVENT } Property_t; 
```

然后在你的源文件中，像这样声明枚举：

```
static Property_t property = BACKGROUND; 
```

如果您打算**创建一个可以从多个源文件访问的变量，**那么请将其放入您的头文件中：

```
typedef enum { BACKGROUND, FOREGROUND, BLOCK, EVENT } Property_t;
extern Property_t property; 
```

并在单个源文件中声明变量：

```
Property_t property = BACKGROUND; 
```

# php - Echo PHP 基于表单选择 jQuery .post AJAX

> ID：12886235
> 
> 赞同：2
> 
> 时间：2012-10-14T20:28:51.740
> 
> 标签：php, jquery, ajax, forms, post

我正在使用 jQuery 在表单上进行选择后发送 AJAX 请求，并且我希望根据所做的选择将不同的内容回显到 div 中。这是我的表格：

```
<form name="myform" id="myform" method="post" action="#">
   <select name="myselect" id="myselect">
      <option>-- Make a selection --</option>
      <option value="1">Option 1</option>
      <option value="2">Option 2</option>           
   </select>
</form> 
```

这是页面前面的javascript：

```
$(document).ready(function() {
   $('#myselect').change(function() {
      $(this).parents("form").submit();
   });
   $('#myform').submit(function() { 
      $.post(
         'myscript.php',
         $(this).serialize(),
         function(data){
            $("#mydiv").html(data)
         }
      );
      return false;   
   });
}); 
```

这是 myscript.php：

```
<?php
   if ($_POST['myselect'] = "1") {
      echo "Div contents 1";
   }
   if ($_POST['myselect'] = "2") {
      echo "Div contents 2";
   }
?> 
```

我的问题是：在我对表单进行任何选择后，“Div 内容 1Div 内容 2”会回显到 mydiv 中。如果选择了选项 1，我试图让它回显“Div 内容 1”，如果选择了选项 2，我试图让它回显“Div 内容 2”。

感谢并为这个冗长的问题道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:30:46.240

编码 ：

```
 if ($_POST['myselect'] = "1") 
```

和

```
 if ($_POST['myselect'] = "2") { 
```

将始终评估为真，因为它的分配。

您需要使用：

```
 if ($_POST['myselect'] == "1") { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:31:07.953

它是一个很好的老人，

改成

```
<?php
 if ($_POST['myselect'] == "1") {
  echo "Div contents 1";
 }
 if ($_POST['myselect'] == "2") {
  echo "Div contents 2";
 }
?> 
```

注意 ==

# list - 在列表中查找总和 Python 的数字

> ID：12886238
> 
> 赞同：0
> 
> 时间：2012-10-14T20:28:56.997
> 
> 标签：list, function, recursion, sum

我需要定义一个函数来查找列表中加起来为给定总和的数字。我想递归地执行此功能。

这就是我到目前为止所拥有的，我认为我需要处理我的递归和基本案例。

def findsum ( x , y ) :

```
 pile = []
    z = x-y[0]
    if x == 0 :
            return pile
    elif y == [] :
            return pile
    else:
            index = 0
            n = len ( y )
            while index < n:
                    if sum( y[:index]) == x - y[index]:
                            pile += y[index]
                            y = y[:index]
                            x = x - y[index]
                    index += 1
            return pile + findsum ( x , y ) 
```

我如何编辑它以在使用递归时找到列表 y 中加起来为总和 x 的数字。

# python - 遍历数据框

> ID：12886240
> 
> 赞同：1
> 
> 时间：2012-10-14T20:29:03.717
> 
> 标签：python, pandas

我想像这样遍历 Dataframe：

```
for i in y.itertuples(): print i 
```

结果：

```
(datetime.date(2012, 9, 10), 63.930000305175781, 64.589996337890625, 63.880001068115234, 64.099998474121094, 507700.0, 64.099998474121094)
(datetime.date(2012, 9, 11), 63.490001678466797, 63.790000915527344, 62.509998321533203, 63.759998321533203, 896600.0, 63.759998321533203) 
```

如何通过索引日期对象创建每个迭代元组的新数据框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T06:54:09.460

```
pd.DataFrame.from_records([i], index=0) 
```

# jquery - 在异步操作期间通过 jQuery ajax 更新 ASP.net 进度条

> ID：12886241
> 
> 赞同：4
> 
> 时间：2012-10-14T20:29:11.777
> 
> 标签：jquery, asp.net, ajax, asynchronous, progress-bar

我正在尝试为长时间运行的异步任务设置一个简单的 html 进度条。问题是我试图触发回发以运行一些服务器代码并同时执行客户端单击事件以启动 ajax 轮询，这导致 ajax 调用中返回错误。这是我的 jQuery 和 html 代码：

```
<%@ Page Language="C#" AsyncTimeout="230" CodeFile="test.aspx.cs" Inherits="test" %>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>
        "use strict";
        var PROGRESS;
        $(document).ready(function () {
            $.ajaxSetup({
                type: "POST",
                contentType: "application/json",
                data: '{}',
                timeout: 10000,
                converters: {
                    "text json": function (data) {
                        var msg;
                        msg = $.parseJSON(data);
                        return msg.hasOwnProperty('d') ? msg.d : msg;
                    }
                }
            });
            PROGRESS = {
                done: false,
                startProgress: function () {
                    var _progress = this;
                    $.ajax({
                        url: 'test.aspx/getProgress',
                        timeout: 20000,
                        data: '{}',
                        dataType: "json",
                        success: function (data) {
                            var currProgress = data * 100;
                            $("#prog").value = currProgress;
                            if (currProgress > 99)
                                _progress.done = true;
                            else
                                setTimeout("PROGRESS.startProgress()", 5000);
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            var s = textStatus == null ? "" : textStatus;
                            s += errorThrown == null ? "" : ", " + errorThrown;
                            alert(s);
                        }
                    });
                }
            };
            $("#body_DoUploadButton").on("click", function (event) {
                //event.preventDefault();
                PROGRESS.startProgress();
            });
        });
    </script>
</head>
<body>
    <asp:Button ID="DoUploadButton" Text="Import file" OnClick="UploadButton_Click" runat="server"></asp:Button>
    <progress id="prog" value="0" max="100"></progress>
</body> 
```

这是我的代码隐藏：

```
public partial class test : System.Web.UI.Page
{
    delegate void AsyncTaskDelegate();
    AsyncTaskDelegate _dlgt;

    IAsyncResult OnBegin(object sender, EventArgs e, AsyncCallback cb, object extraData)
    {
        _dlgt = new AsyncTaskDelegate(DoImport);
        IAsyncResult result = _dlgt.BeginInvoke(cb, extraData);
        return result;
    }

    void OnEnd(IAsyncResult ar)
    {
        _dlgt.EndInvoke(ar);
    }

    void OnTimeout(IAsyncResult ar)
    {
        //do something
    }

    [WebMethod(EnableSession = true)]
    public static double getProgress()
    {
        if (HttpContext.Current.Session["pctDone"] == null)
            return 0.0;
        return (double)HttpContext.Current.Session["pctDone"];
    }

    protected void DoImport()
    {
        int i = 10;
        while (i-- > 0)
        {
            System.Threading.Thread.Sleep(5000); //fake some work
            Session["pctDone"] = i / 10.0;
        }
        Session["pctDone"] = 1.0;
    }

    protected void UploadButton_Click(object sender, EventArgs e)
    {
        Session["pctDone"] = 0.0;
        PageAsyncTask task = new PageAsyncTask(new BeginEventHandler(OnBegin), new EndEventHandler(OnEnd),
            new EndEventHandler(OnTimeout), null);
        RegisterAsyncTask(task);
        ExecuteRegisteredAsyncTasks();
    }

    protected void Page_Init(object sender, EventArgs e)
    {
        Server.ScriptTimeout = 240;
    }
} 
```

显然，单击按钮时的回发会干扰 ajax 调用。如果我在 javascript clickhandler 中添加了 preventDefault，则回发永远不会触发（duh），但所有 ajax 调用都可以正常工作，因此至少所有 ajax 代码都可以正常工作。有没有办法让一个按钮既回发，所以我的服务器代码可以运行，并执行客户端点击事件，以便我可以启动 ajax 调用？我想我在这里搞砸了，我需要在没有asp回发的情况下完成这一切，从那时起页面被破坏并重新加载，对吧？

我确定我做错了。我尝试将所有这些转移到服务中，我认为我会避免所有回发，只需对服务进行 ajax 调用以完成异步工作并轮询服务以获取完成百分比，但服务没有实现页面异步，因此没有“RegisterAsyncTask ()" 像在 .aspx 页面上一样调用。

我还尝试使用会话状态来传达异步任务和 ajax 调用之间完成的百分比值，我不知道它是否会起作用，但我想我会尝试一下。如果它失败了，我需要某种方式来传达后台任务和 ajax 调用之间的百分比。

我已经阅读了很多关于如何在 web 服务生成的代理中进行异步 web 服务和使用 Beginxxx 调用等的文章，但我也发现很多人试图做与我类似的事情，进行简单的 ajax 调用通过 jQuery，并且没有运气，也没有我能找到的真正答案。

因此，如何从 .aspx 页面开始使用页面异步或服务启动长时间运行的任务，并在任务运行时更新简单的 html5 进度条？似乎这很简单，但没有：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:20:28.697

你只漏掉了一个基本点。您的 ajax 调用将无法在回发后继续存在。

您不能`PROGRESS.startProgress()`在按钮单击时调用，因为您希望页面在此之后立即回发。回发会导致您的 ajax 调用被终止。

如果要显示进度条，您也必须使用 ajax 上传文件，而不是使用回发。有像[uploadify](http://www.uploadify.com/)这样的插件可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T06:59:23.027

在经历了许多痛苦和磨难之后，我完全重写了使用 SignalR 的解决方案，这极大地简化了所需的所有代码。有关在 Web 表单网站中使用 SignalR 为长时间运行的任务执行简单 HTML5 进度条的简单方法的更多详细信息，[请参阅我关于该主题的博客文章](http://blog.webdevsamples.com/web-forms-long-running-task-with-progress-bar-using-signalr)，其中包括可下载的极简主义示例和在线演示。我希望有人觉得这很有帮助。

# java - 使用 for 循环选择单个数字，并将它们连接在一起以在 java 中形成一个字符串

> ID：12886243
> 
> 赞同：1
> 
> 时间：2012-10-14T20:29:13.163
> 
> 标签：java, for-loop

所以我必须使用 Math.random(); 创建三个随机数。方法然后使用 for 循环自己输出每个数字，然后使用连接将它们变成一个字符串。是为了我的任务。我已经完成了其他所有事情。我可以用不同的方式来做，但它需要一个 for 循环。我不能使用 Random 类。我在我的课程中没有学过它，因此不能应用它。

```
public class Lottery
{
    public static void main(String[] args)
    {
        //declare and initialized variables and objects
        Scanner input = new Scanner(System.in);

        //Identify the repeated steps and use a for loop structure

        for(int i=0; i < 3; i++) 
        {
            double lotto = Math.random(); 
            int lotteryNumberDigit = (int)(lotto*10);

           String lotteryNumberString = Integer.toString(lotteryNumberDigit);

        }

            String firstNumber = lotteryNumberString.substring(0,0);
            String secondNumber = lotteryNumberString.substring(1,1);
            String thirdNumber = lotteryNumberString.substring(2,2);

            String firstTwoWinner = firstNumber + secondNumber;
            String lastTwoWinner = secondNumber + thirdNumber;
            String allNumbersWinner = firstNumber + secondNumber + thirdNumber;

            System.out.println("Please enter your three numbers (e.g. 123): ");

            String userInput = input.next();

             if(userInput.substring(0,2).equals(firstTwoWinner))

        {
            System.out.println("Winner: " + allNumbersWinner );

            System.out.println("Congratulations, the front pair matched.");
        }

        else if (userInput.substring(1,3).equals(lastTwoWinner))
        {
             System.out.println("Winner: " + allNumbersWinner );

             System.out.println("Congratulations, the end pair matched.");
        }

        else if (userInput.equals(allNumbersWinner))
        {
             System.out.println("Winner: " + allNumbersWinner );

             System.out.println("Congratulations, both pairs matched.");
        }

        else
        {
             System.out.println("Winner: " + allNumbersWinner );

             System.out.println("Sorry, no matches. You only had one chance out of 100 to win anyway.");
        }

    }
} 
```

我不得不取出阵列，因为我的老师说直到下一章才能预料到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:31:43.000

我不确定你的问题出在哪里，你似乎拥有所有的碎片。

您创建一个`for`循环，通过该方法创建一个随机数`Math.random()`，然后将其输出。

如果然后通过该方法将您的转换`int`为 a ，则可以使用运算符将​​它们连接起来，并在循环后输出所有三个。`String`[`Integer.toString(int i)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString%28int%29)`+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:38:36.530

您可以在下面简单地写下打印 3 位数字。

```
 Random random = new Random();
    for(int i=0; i < 3; i++){
        int randomNumber = random.nextInt(10);
        System.out.print(randomNumber);
    }
        System.out.println(); 
```

注意：**通过使用`print`方法，您将打印三个数字并排在一起。**

或者，您可以执行以下操作：

```
 String newConcatNumString = "";
    Random random = new Random();
    for(int i=0; i < 3; i++){
       newConcatNumString  = newConcatNumString +random.nextInt(10);
    }
    System.out.println(newConcatNumString); 
```

如果您想从字符串中获取数字，您可以简单地执行以下操作：

```
 int concatenatedValue = Integer.parseInt(newConcatNumString); 
```

**编辑：** 如果您不想使用`Random`类，请执行以下操作（仅更新第一个示例。同样可以应用于第二个示例）：

```
 for(int i=0; i < 3; i++){
        int lotteryNumberDigit = (int)(Math.random()*10);
        System.out.print(lotteryNumberDigit);
    }
    System.out.println(); 
```

**编辑：**对于下一个问题，在开头定义一个`int[]`并将值存储在数组中以供以后比较使用。更新的代码片段如下：

```
 int[] generatedNumbers = new int[3];
    for(int i=0; i < 3; i++){
        int lotteryNumberDigit = (int)(Math.random()*10);
                    generatedNumbers[i] = lotteryNumberDigit;
        System.out.print(lotteryNumberDigit);
    }
    System.out.println(); 
```

在上述循环之后，`generatedNumbers`将包含所有三个数字作为数组中的单独条目。您的比较代码如下：

```
 System.out.println("Please enter your three numbers, one digit at a time): ");
  for(int i=0; i<3; i++){
    int userInput = input.next();
    if(userInput == generatedNumbers[i]){
        System.out.println("Your digit "+i+" is correct");
    }else{
        System.out.println("Your digit "+i+" is incorrect");
    }
  } 
```

**编辑：** 请进行如下比较：

```
 if (userInput.equals(allNumbersWinner)) {
         System.out.println("Winner: " + allNumbersWinner );
         System.out.println("Congratulations, both pairs matched.");
    }else if(userInput.substring(0,2).equals(firstTwoWinner )) {
        System.out.println("Winner: " + allNumbersWinner);
        System.out.println("Congratulations, the front pair matched.");
    }else if (userInput.substring(1,3).equals(lastTwoWinner)) {
         System.out.println("Winner: " + allNumbersWinner );
         System.out.println("Congratulations, the end pair matched.");
    }else {
         System.out.println("Winner: " + allNumbersWinner );
         System.out.println("Sorry, no matches. You only had one chance out of 100 to win anyway.");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:16:28.793

让我们看一下您的代码的最新添加（带有行号供参考）：

```
1: double randomNumber1 = Math.random(); 
2: int randomNumber = (int)randomNumber1; 

3: for ( int i = 0 ; i < 3 ; i++) 
   { 
4:    System.out.print(randomNumber); 
   } 
```

让我们用英语描述它的作用：

```
1: Generate a random decimal number
2: Convert the random number to an integer
3: Repeat line 4 three times
5:    Print out the random number 
```

你看到这里有问题吗？产生了多少随机数？for循环中重复了什么动作？*应该*重复什么？

如果您可以回答这些问题，那么您可能会弄清楚如何解决它，以便生成三个（可能）*不同的*数字。

**ps**我还建议您保留此 for 循环并删除其余代码。你最初有很多正确的部分。现在我们需要构建这个 for 循环（一旦你修复它），以便将这些部分以正确的顺序放在一起。

# html - CSS宽度和列问题

> ID：12886245
> 
> 赞同：4
> 
> 时间：2012-10-14T20:29:28.353
> 
> 标签：html, css

*我看不出我在这里做错了什么。*我正在使用三列布局的宽度和边距，我想将右侧边栏扩大到左侧的空白区域。

但是当我将#sidebar-right 的宽度增加到 22% 以上时，两个侧边栏都会下降到内容下方。我错过了与组合宽度和边距有关的东西。

HTML 和 CSS 位于图像下方。这也是一个响应式结构，如果这有所作为的话。我需要继续使用这个 CSS 和 HTML，因为它是一个 WordPress 主题，我不想进入另一种类型的 CSS 列或框结构。

**2012 年 10 月 23 日更新** *我放弃了尝试调整当前的 CSS 和 HTML 并更改为页面模板的框布局模型 CSS，因为框模型运行良好，并且我也能够简化我的页面模板。*

有任何想法吗？

![在此处输入图像描述](../Images/8fa501dc7380e39c5625152db3372a9f.png)

**HTML：**

```
 <body class="three-column">

    <div id="page">
    <div id="main">
    <div id="primary">
    <div id="content" role="main">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>
    </div>

    <div id="sidebar-right">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>

    <div id="sidebar-left">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>
    </div>
    </div> (some closing divs omitted for clarity). 
```

**CSS：**

```
#page {
margin: 1em auto;
max-width: 1075px;
}

#main #secondary {
float: none;
margin: 0 7.6%;
width: auto;
}

.three-column #page {
max-width: 1075px;
}

.three-column #primary {
float: left;
margin: 0 -26.4% 0 0;
width: 100%;
}

.three-column #content {
margin: 0 34% 0 20%;
width: 44%;
border:1px solid #c2c2c2;
padding:10px;
}

.three-column #sidebar-right {
float: right;
margin-right: 1.5%;
width: 22%;
border:1px solid #c2c2c2;
padding:10px;
}

.three-column #sidebar-left{
position:relative;
float: left;
width: 15%;
margin-left: -72%;
border:1px solid #c2c2c2;
padding:10px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:56:42.057

您的问题是#primary 上的-26.4% 右边距和#sidebar-left 上的-72% 左边距。

我用那些调整过的人做了一个小提琴；我删除了侧边栏的左边距（但为了填充而保留了 1.5%），并将#primary 的右边距调整为 -100%。

[http://jsfiddle.net/mstauffer/CtkyN/1/](http://jsfiddle.net/mstauffer/CtkyN/1/)

这仍然很糟糕。如果有任何方法可以，您将获得更好的重新处理 HTML 和 CSS 的体验。但如果没有，该小提琴将至少允许您在现有框架内根据需要重新调整右侧边栏的大小。

**更新：**我没有可靠的来源，但我可以解释 CSS 数学。通常，您在#primary 上使用负边距将其他两个div 放置在#primary 通常占用的区域中。通常，使 div 像这样重叠的唯一方法是将它们设置为`position: fixed`or `position: absolute`。因为这些太难了，像这样的布局通常会用三个左浮动（或者将来，flexbox）来完成，但是因为你的 HTML 的顺序是不可能的。

相反，你不得不让 CSS 渲染器相信 #primary 不介意被覆盖……你可以通过设置 -100% 的负边距来做到这一点，基本上是在说，“这里，拥有所有这些空间，它是你可以把它重叠起来。” 打开空间后，您可以使用左右浮动（以及宽度限制）将侧边栏放置在 #content 两侧的空白区域中。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:31:41.523

编辑：

我做了一个可能对你有用的三列布局。

HTML

```
<body class="three-column">
    <div id="page">
        <div id="main">
            <div id="primary">
                <div id="container">
                    <div id="sidebar-left">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.
                    </div>

                    <div id="content">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.
                    </div>

                    <div id="sidebar-right">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.
                    </div>
                </div>
            </div>
        </div>
    </div>
</body> 
```

CSS

```
#container {
    text-align: left;
    margin: 0px auto;
    padding: 0px;
    border:0;
    width: 80%;
}

#sidebar-left {
    float: left;
    width: 30%;   
    min-height: 300px;
    background-color: #cccccc;
}

#sidebar-right {
    float: left;
    width: 25%;
    min-height: 300px;
    background-color: #cccccc;
}

#content { 
    float: left;
    width: 30%;
    min-height: 300px;
    background-color: #999999;
} 
```

我还注意到有边框会导致布局出现问题。可能添加以下内容将有助于将边框保持在 div 内。

```
-webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
        box-sizing: border-box; 
```

[见这篇文章](http://css-tricks.com/box-sizing/)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:55:40.443

我认为问题具体在这里：

```
.three-column #content {
margin: 0 34% 0 20%;
} 
```

边距：右上左下；

所以你必须减少右边距才能让右侧边栏扩大。
不要尝试。你最好测试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:56:46.267

使用此代码：-

**HTML**

```
<body class="three-column">

    <div id="page">
    <div id="main">
    <div id="primary">
    <div id="sidebar-left">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div> 
    <div id="content" role="main">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>
    </div>

    <div id="sidebar-right">

    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>

    </div>
    </div> (some closing divs omitted for clarity). 
```

**CSS**

```
#page {
margin: 1em auto;
max-width: 1075px;
}

#main #secondary {
float: none;
margin: 0 7.6%;
width: auto;
}

.three-column #page {
max-width: 1075px;
}

.three-column #primary {
float: left;
margin: 0 -26.4% 0 0;
width: 100%;
}

.three-column #sidebar-left{
position:relative;
float: left;
width: 15%;
}

.three-column #content {
margin: 0 34% 0 20%;
width: 44%;
border:1px solid #c2c2c2;
padding:10px;
float: left;
}

.three-column #sidebar-right {
float: left;
margin-right: 1.5%;
width: 22%;
border:1px solid #c2c2c2;
padding:10px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T14:53:33.383

它很容易实际上你非常接近你忘记了填充会增加你的内容的宽度，所以如果你有 3 个 div，每边有 20% 的宽度和 10% 的边距和 10% 的填充，你会得到超过 100% 你必须移动。

**[在这里](http://jsfiddle.net/NETse/1/)**工作 JSfiddle

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T16:55:17.007

别人已经给你解释过了。我只是想添加视觉表示，以便更容易看到问题。 ![问题区域](../Images/293919e468f6065ea669e2436220a21e.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T05:45:01.410

`.three-column #content`div 是中间内容，它需要左边距为`#sidebar-left`div 宽度 + 填充，右边距为`#sidebar-right`div 宽度 + 填充，不需要固定中间内容的宽度。

检查[示例](http://jsbin.com/okedox/1)和[代码](http://jsbin.com/okedox/1/edit)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T18:19:51.023

编辑：我没有看到您必须使用相同的 CSS 的评论。可能除了您当前拥有的之外，还可以使用它，但如果不是，请忽略。

如果您使用 row-fluid 和 div 跨度，则可以缩放它们而不会遇到很多问题。CSS 在提琴手中。

[http://jsfiddle.net/GeyHC/1/](http://jsfiddle.net/GeyHC/1/)

```
<div class="row-fluid">
    <div class="span2" id="content" role="main" style="border:1px solid #c2c2c2;">

        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
        quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
        imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
        et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>

    <div class="span6" id="sidebar-right" style="border:1px solid #c2c2c2;">

        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
        quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
        imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
        et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>

    <div class="span2 offset1" id="sidebar-left" style="border:1px solid #c2c2c2;">

        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Mauris a eros eu sem sollicitudin vulputate. Maecenas ac ante libero,
        quis volutpat diam. Etiam eleifend arcu eu enim tincidunt ornare. Sed
        imperdiet viverra bibendum. Proin a enim et turpis tempus mattis vitae
        et ipsum. In et ligula eget tellus malesuada pretium sed ut ipsum.

    </div>
</div>
​ 
```

# c++ - 令人费解的异步行为

> ID：12886246
> 
> 赞同：3
> 
> 时间：2012-10-14T20:29:37.153
> 
> 标签：c++, linux, multithreading, asynchronous, c++11

这可能是一些奇怪的 Linux 怪癖，但我观察到非常奇怪的行为。

以下代码应将求和数字的同步版本与异步版本进行比较。问题是我看到了性能提升（它不是缓存，即使我将代码分成两个单独的程序也会发生），同时仍将程序视为单线程（仅使用一个内核）。

`strace`确实显示了一些线程活动，但像`top`克隆这样的监视工具仍然只显示一个使用过的核心。

我观察到的第二个问题是，如果我增加生成率，内存使用量就会激增。线程的内存开销是多少？使用 5000 个线程，我得到 ~10GB 的内存使用量。

```
#include <iostream>
#include <random>
#include <chrono>
#include <future>
using namespace std;

long long sum2(const vector<int>& v, size_t from, size_t to)
{
    const size_t boundary = 5*1000*1000;

    if (to-from <= boundary)
    {
        long long rsum = 0;
        for (;from < to; from++)
        {
            rsum += v[from];
        }
        return rsum;
    }
    else
    {
        size_t mid = from + (to-from)/2;
        auto s2 = async(launch::async,sum2,cref(v),mid,to);

        long long rsum = sum2(v,from,mid);
        rsum += s2.get();
        return rsum;
    }
}

long long sum2(const vector<int>& v)
{
    return sum2(v,0,v.size());
}

long long sum(const vector<int>& v)
{
    long long rsum = 0;
    for (auto i : v)
    {
        rsum += i;
    }

    return rsum;
}

int main()
{
    const size_t vsize = 100*1000*1000;

    vector<int> x;
    x.reserve(vsize);

    mt19937 rng;
    rng.seed(chrono::system_clock::to_time_t(chrono::system_clock::now()));

    uniform_int_distribution<uint32_t> dist(0,10);

    for (auto i = 0; i < vsize; i++)
    {
        x.push_back(dist(rng));
    }

    auto start = chrono::high_resolution_clock::now();
    long long suma = sum(x);
    auto end = chrono::high_resolution_clock::now();

    cout << "Sum is " << suma << endl;
    cout << "Duration " << chrono::duration_cast<chrono::nanoseconds>(end - start).count() << " nanoseconds." << endl;

    start = chrono::high_resolution_clock::now();
    suma = sum2(x);
    end = chrono::high_resolution_clock::now();

    cout << "Async sum is " << suma << endl;
    cout << "Async duration " << chrono::duration_cast<chrono::nanoseconds>(end - start).count() << " nanoseconds." << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:33:00.447

你检查过正在打印的时间吗？在我的机器上，-O2 处的串行时间低于 1 秒，而并行求和时间要快几倍。因此，完全有可能 CPU 使用时间不足以让“top”之类的东西注册，因为它们通常每秒只刷新一次。

如果您通过减少每线程计数来增加线程数，那么您有效地增加了线程管理的开销。如果您有 5000 个线程处于活动状态，那么您的任务将在额外内存中占用 5000* min-thread-stack-size。在我的机器上是 20Gb！

为什么不尝试增加源容器的大小？如果您使并行部分花费的时间足够长，您将看到相应的并行 CPU 使用情况。但是，请做好准备：对整数求和**很快**，生成随机数所花费的时间可能比将数字相加的时间长一个或两个数量级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:25:59.743

也许您观察到正在使用一个内核，因为同时工作的线程之间的重叠太短而无法察觉。在现代硬件上，从一个连续的内存区域对 500 万个值求和应该非常快，所以当父母完成求和时，孩子可能刚刚开始，父母可能大部分时间或所有时间都在等待孩子的结果。您是否尝试增加工作单元以查看重叠是否变得明显？

关于性能提升：即使由于工作单元太小而导致线程之间的重叠为 0，多线程版本仍然可以受益于额外的 L1 缓存内存。对于这样的测试，内存可能会成为瓶颈，顺序版本将仅使用一个 L1 缓存，而多线程版本将使用与内核一样多的内核。

# javascript - javascript迭代图像文件夹并将图像添加到无序列表

> ID：12886250
> 
> 赞同：0
> 
> 时间：2012-10-14T20:30:14.147
> 
> 标签：javascript, html

我试图弄清楚为什么这个脚本不起作用。我一开始以为可能是因为div和后面的ul，但是给ul分配了一个额外的ID后还是不行。今晚真的需要解决这个问题，因此非常感谢所有帮助。

**HTML**

```
<div id="Home-Image">   

    <h1>Images</h1>
    <ul id="Home-Images">
        <li><a href="#"><img src="" width=100 height=100/></a></li>
        <li><a href="#"><img src="" width=100 height=100/></a></li>
        <li><a href="#"><img src="" width=100 height=100/></a></li>
        <li><a href="#"><img src="" width=100 height=100/></a></li>
        <button id="toggle-two">View more Images</button>
    </ul> 
```

**JavaScript**

```
$(document).ready(function() {
var files = {'jpg':4};
var pageName = "d";
for (var ext in files){
for (var i = 0; i < files[ext]; i++){
var src = "../Images/D/allimages" + pageName + "-" + (i+1) + "." + ext;}
var img = new Image(); 
img.src = src;
var container = document.getElementById('Home-Images');
container.appendChild(img);
}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:38:12.053

修改代码：[jsfiddle](http://jsfiddle.net/Mfssj/)

HTML：

```
<div id="Home-Image">   

    <h1>Images</h1>
    <ul id="Home-Images">

        <button id="toggle-two">View more Images</button>
    </ul>​ 
```

JS：

```
$(document).ready(function() {
    var files = {'jpg':4};
    var pageName = "d";
    var html = "", src;
for (var ext in files){
     for (var i = 0; i < files[ext]; i++){
         src = "../Images/D/allimages" + pageName + "-" + (i+1) + "." + ext;
         html += '<li><a href="#"><img src="'+ src +'" width=100 height=100/></a></li>';

     }

    $("#Home-Images").prepend(html );
}}); ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:08:24.320

也许你想要这样的东西

```
$(document).ready(function() {
    var files = {'jpg':4}, pageName = "d", container = $('#Home-Images');
    for (var ext in files)
    {
        for (var i = 0; i < files[ext]; i++)
        {
            var src = "../Images/D/allimages" + pageName + "-" + (i+1) + "."+ext ;
            var img = $('<img src="'+src+'" width=100 height=100 />'); 
            container.append($('<li/>').html($('<a/>', {'href':'#'}).html(img)));
        }
    }
}); 
```

但请确保此路径`http://yourDomain/Images/D/allimagesd-1.jpg`适用于所有图像。这是一个[演示](http://jsfiddle.net/kMfkk/1/)，但图像不可用，但您可以通过浏览器检查工具查看源代码。

# api - 缺少换行符

> ID：12886254
> 
> 赞同：1
> 
> 时间：2012-10-14T20:30:32.890
> 
> 标签：api, facebook-graph-api

我正在尝试使用图形 api
即在网站上包含 fb 提要。[https://graph.facebook.com/xxx?fields=feed](https://graph.facebook.com/xxx?fields=feed)

这很好用，但我在循环对象时注意到实际内容缺少布局格式，尤其是换行符。这使得返回字符串的内容现在对我来说毫无用处。

是否有另一种检索格式化文本的方法，或者我在这里遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:37:59.347

> 这很好用，但我在循环对象时注意到实际内容缺少布局格式，尤其是换行符。

你是*如何*进行这种“循环”的，或者更重要的是，你如何检查没有换行符？

> 还是我在这里遗漏了什么？

好吧，您不会是第一个忘记 HTML 在正常情况下只会显示压缩为一个空格字符的任何空格的人……</p>

# php - 如何使用 php 读取保存在 db 中的会话？

> ID：12886261
> 
> 赞同：0
> 
> 时间：2012-10-14T20:31:03.063
> 
> 标签：php, session, yii

我已将 Yii 应用程序会话设置为保存在数据库中。

在我的应用程序的一部分中，我需要阅读 Yii 创建的会话，但我无法使用`Yii::app()->session`，因为我的代码不在 Yii 应用程序中。

我可以用 PHP 函数阅读这个会话吗？

或者

在临时文件夹而不是数据库中使用 Yii创建并保存**此特定**会话（以便我可以轻松使用`$_SESSION`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:10:09.697

You could catch the cookie sent by browser and select from table using session id from cookie, but most probably there is a better way to solve your problem.

Why can't you simply move the code into Yii controller? Even if it is something specific, it's usually easy to work around.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:02:41.557

您正在寻找的功能是[`session_set_save_handler()`](http://php.net/manual/en/function.session-set-save-handler.php).

此函数允许您覆盖`$_SESSION`变量的默认处理。您可以使用它来指定一组函数，这些函数将处理与会话处理相关的加载、保存和其他任务。

您可以使用这些函数从数据库或您可能需要的任何其他来源加载会话数据。

希望有帮助。

# linux-kernel - “net_device”中的指针损坏

> ID：12886262
> 
> 赞同：0
> 
> 时间：2012-10-14T20:31:04.730
> 
> 标签：linux-kernel, linux-device-driver

我正在处理的设备驱动程序正在实现一个虚拟设备。逻辑如下：

```
static struct net_device_ops virt_net_ops = {
  .ndo_init = virt_net_init,
  .ndo_open = virt_net_open,
  .ndo_stop = virt_net_stop,
  .ndo_do_ioctl = virt_net_ioctl,
  .ndo_get_stats    = virt_net_get_stats,
  .ndo_start_xmit   = virt_net_start_xmit,
};

...

  struct net_device *dev;
  struct my_dev *virt;

  dev = alloc_netdev(..);
  /* check for NULL */

  virt = netdev_priv(dev);

  dev->netdev_ops = &virt_net_ops;
  SET_ETHTOOL_OPS(dev, &virt_ethtool_ops);
  dev_net_set(dev, net);
  virt->magic = MY_VIRT_DEV_MAGIC;
  ret = register_netdev(dev);
  if (ret) {
     printk("register_netdev failed\n");
     free_netdev(dev);
     return ret;
  }
... 
```

发生的事情是，“net_dev”中的指针 net_device_ops 在某处被损坏，即

1）第一次创建设备（分配net_dev，初始化包括net_device_ops在内的字段，用包含函数指针的静态结构初始化），向内核注册设备调用register_netdev（） - OK

2) 尝试再次创建同名设备，重复上述步骤，调用 register_netdev() 将返回负数，我们 free_netdev(dev) 并返回错误给调用者。

在这两个事件之间，指向 net_device_ops 的指针发生了变化，尽管在代码中除了初始化阶段之外没有任何地方明确地完成它。

内核版本为2.6.31.8，平台MIPS。用户空间和内核之间的通信通道是通过 netlink 套接字实现的。

任何人都可以建议可能出错的地方吗？感谢任何建议，谢谢。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:54:19.133

“虫子在别处。”

第二台设备不应与现有设备交互。如果您`register_netdev`使用现有名称，则在检测到条件并返回`ndo_init`之前首先调用虚函数。`-EEXIST`也许你的 init 函数做了一些涉及一些全局变量的讨厌的事情。（例如，代码是否假设有一个设备，并在初始化期间存储一个指向它的全局指针？）

# r - 获取 id 组中的平均值

> ID：12886264
> 
> 赞同：0
> 
> 时间：2012-10-14T20:31:10.807
> 
> 标签：r

> **可能重复：**
> [创建按 id 聚合列的变量的更快方法](https://stackoverflow.com/questions/8225621/faster-way-to-create-variable-that-aggregates-a-column-by-id)

所以问题是我从 CSV 文件加载了以下数据：

```
id      value2  value3
1.000   0.010   14        
1.000   0.019   15        
0.995   0.024   13        
0.995   0.031   20        
0.990   0.012   13        
..... 
```

我想计算`value2`和`value3`的组的平均值/中值等`id`。之后的计划是能够按`value2`或对结果进行排序`value3`。

有没有办法完成这样的任务？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:41:51.043

这是 data.table 星期天！这将适用于大数据——快速且高效。

```
> library(data.table)
> DT <- as.data.table(df)
> DT[, list(val2=mean(value2), val3=mean(value3)), by=id]
      id   val2 val3
1: 1.000 0.0145 14.5
2: 0.995 0.0275 16.5
3: 0.990 0.0120 13.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T20:38:41.580

```
library(plyr)
result <- ddply(df, .(id), function(x) { 
    data.frame(mv2 = mean(x$value2), mv3 = mean(x$value3))
    })

# order by mean value2
arrange(result, mv2)
# and for value 3
arrange(result, mv3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:38:21.260

假设您在名为的数据框中有数据，`df`您可以执行以下操作：

```
sapply(split(df[-1], df$id), sapply, mean) 
```

# android - 显示地图视图时如何将默认位置设置为我的位置

> ID：12886265
> 
> 赞同：3
> 
> 时间：2012-10-14T20:31:11.957
> 
> 标签：android, gps

```
public class MainActivity extends MapActivity {
    LocationManager locmang;
    static  MapController mcon;
    GeoPoint geo;
    static GeoPoint point;
    static  MapView myMap;
    MyLocationOverlay comp;
    static double lat =0;
    static double loni =0;
    private LocationManager locManager;
    private LocationListener locListener;
     List<Overlay>mapOverlays;
     Drawable drawable;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myMap= (MapView)findViewById(R.id.mapview);
    myMap.displayZoomControls(true);
    myMap.setBuiltInZoomControls(true);
    mcon=myMap.getController();
    myMap.setSatellite(false);
    geo = new GeoPoint((int)(lat*1E6),(int)(loni*1E6));
    mcon.setCenter(geo);
    mcon=myMap.getController();
    mcon.animateTo(geo);
    comp = new MyLocationOverlay(this, myMap);
    myMap.getOverlays().add(comp);
    LocationManager lm =(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,10, 100, (LocationListener) this);
     mapOverlays = myMap.getOverlays();
     MapOverlay mapOverlay = new MapOverlay();
     List<Overlay> listOfOverlays = myMap.getOverlays();
     listOfOverlays.clear();
     listOfOverlays.add(mapOverlay);  
     myMap.invalidate();
     Intent startService = new Intent(getApplicationContext(),ServiceLocation.class);
     startService(startService);

}
public static void updateMap() {
    if(ServiceLocation.curLocation!=null){
        lat = ServiceLocation.curLocation.getLatitude();
        loni = ServiceLocation.curLocation.getLongitude();        
        if(myMap!=null){
            point = new GeoPoint((int)(lat*1e6),(int)(loni*1e6));
            mcon.animateTo(point);
            myMap.invalidate();
        }
    }
}

public void createAndShowMyItemizedOverlay(Location newLocation) {
    List<Overlay> overlays = myMap.getOverlays();

     if (overlays.size() > 0) {
        for (Iterator<Overlay> iterator = overlays.iterator(); iterator.hasNext();) {
            iterator.next();
            iterator.remove();
        }
    }

    GeoPoint geopoint = new GeoPoint(
            (int) (newLocation.getLatitude() * 1E6), (int) (newLocation
                    .getLongitude() * 1E6));

     Drawable icon = getResources().getDrawable(R.drawable.image19);
    icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon
            .getIntrinsicHeight());

    myMap.getController().animateTo(geopoint);

    myMap.postInvalidate();
}
@Override
protected boolean isRouteDisplayed() {

    return false;
}

public class MapOverlay extends Overlay {
     public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
            super.draw(canvas, mapView, shadow);                   

            if(!shadow){

                Point screenPts = new Point();
                if(lat==0 && loni==0)
                    mapView.getProjection().toPixels(geo, screenPts);
                else{
                    mapView.getProjection().toPixels(point, screenPts);
                }

                Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.image19);            
                canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);
            }
            return true;
        }
} 
```

}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:35:13.287

这对我有用:-)

```
Context ctx;

double LATITUDE = ; //your static latitude
double LONGITUDE = ; //your static longitude

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_landing);
        ctx = this;

         Geocoder geocoder = new Geocoder(this, Locale.getDefault());
    try {
          List<Address> addresses = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);
          if(addresses != null) {
               Address returnedAddress = addresses.get(0);
               StringBuilder strReturnedAddress = new StringBuilder();
           for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
               strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
        }
           tvAddress.setText(strReturnedAddress.toString());
        }
          else {
           tvAddress.setText("No Address returned!");
        }
    } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          tvAddress.setText("Canont get Address!");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:17:13.330

分配您的位置`Latitude`，`longitude`默认情况下并检查它是否可以工作

# c++ - 在 C++ 和 QT 中播放 wav 音频文件

> ID：12886272
> 
> 赞同：1
> 
> 时间：2012-10-14T20:32:12.003
> 
> 标签：c++, qt, audio, wav

我正在读取 C 中的 .wav 文件，然后尝试使用一些 QT 函数播放音频文件。这是我读取文件的方式：

```
FILE *fhandle=fopen("myAudioFile.wav","rb");
fread(ChunkID,1,4,fhandle);
fread(&ChunkSize,4,1,fhandle);
fread(Format,1,4,fhandle);
fread(Subchunk1ID,1,4,fhandle);
fread(&Subchunk1Size,4,1,fhandle);
fread(&AudioFormat,2,1,fhandle);
fread(&NumChannels,2,1,fhandle);
fread(&SampleRate,4,1,fhandle);
fread(&ByteRate,4,1,fhandle);
fread(&BlockAlign,2,1,fhandle);
fread(&BitsPerSample,2,1,fhandle);
fread(&Subchunk2ID,1,4,fhandle);
fread(&Subchunk2Size,4,1,fhandle);
Data=new quint16 [Subchunk2Size/(BitsPerSample/8)]; 
fread(Data,BitsPerSample/8,Subchunk2Size/(BitsPerSample/8),fhandle); 
fclose(fhandle); 
```

所以我的音频文件在里面`Data`。的每个元素`Data`都是无符号的 16 位整数。

为了播放声音，我将每个 16 位无符号整数分成两个字符，然后每 3 毫秒（使用计时器）向声卡发送 256 个字符。假设`myData`是一个包含 256 个字符的字符数组，我这样做（每 3 毫秒）来播放声音：

```
m_output->write(myData, 256); 
```

也`m_output`被定义为：

```
m_output = m_audioOutput->start(); 
```

并`m_audioOutput`定义为：

```
m_audioOutput = new QAudioOutput(m_Outputdevice, m_format, this); 
```

并且音频格式正确设置为：

```
m_format.setFrequency(44100); 
m_format.setChannels(2);
m_format.setSampleSize(16);
m_format.setSampleType(QAudioFormat::UnSignedInt ); 
m_format.setByteOrder(QAudioFormat::LittleEndian);
m_format.setCodec("audio/pcm"); 
```

但是，当我尝试运行代码时，我听到了一些与真实音频文件非常不同的噪音。有什么我做错了吗？

谢谢， TJ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T23:36:26.313

我认为问题在于您使用的是 QTimer。无论您使用什么平台，QTimer 绝对不允许您精确地每三毫秒运行一次代码。如果你只偏离了一个样本，你的音频听起来会很糟糕。根据[QTimer 文档](http://qt-project.org/doc/qt-4.8/QTimer.html#accuracy-and-timer-resolution)：

> ...不能保证它们在指定的确切值处超时。在许多情况下，它们可能会延迟一段时间，具体取决于系统计时器的准确性。

和

> ...在许多现实世界的情况下，计时器的准确性将不等于 [1 ms]。

尽管我很喜欢 Qt，但我不会尝试将它用于信号处理。我会使用另一个框架，例如[JUCE](http://www.rawmaterialsoftware.com/juce.php)。

# uinavigationcontroller - Storyboard UINavigation 控制器后退按钮文本

> ID：12886274
> 
> 赞同：3
> 
> 时间：2012-10-14T20:32:18.093
> 
> 标签：uinavigationcontroller, storyboard, uinavigationbar, uistoryboardsegue

在 XCode 4.5.1 创建一个带有导航控制器的故事板应用程序时，我很难为任何被推送的视图控制器设置 BACK 按钮。我正在使用 segue，并且视图控制器按预期显示。但是我想动态更改导航栏和后退按钮的名称并将其放在我的 ViewWillAppear 中：

```
 self.title = @"Select Songs";
    [self.backButton setTitle:@"Add"]; 
```

更改导航栏的标题，但后退按钮仍显示推送窗口的名称，而不是文本“添加”。

模拟指标都是推断的。我还在 Xcode 中的视图下方的黑色托盘中添加了一个 BarButtonItem，并将视图控制器的 backButton 连接到 backButton，但文本仍然没有出现。

添加以下日志消息也会产生一些有趣的东西：（但标题栏正在正确更新）

```
-(void) viewDidAppear:(BOOL)animated {
    NSLog(@"%s %@", __FUNCTION__, self.navigationItem.backBarButtonItem);
    NSLog(@"%s %@", __FUNCTION__, self.navigationController.navigationItem.backBarButtonItem);
}

2012-10-14 15:18:41.835 xxxx[2690:907] -[ViewController viewDidAppear:] (null)
2012-10-14 15:18:41.838 xxxx[2690:907] -[ViewController viewDidAppear:] (null) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-10T15:32:42.170

接受的答案是一个黑客，这是做到这一点的方法......

1.  打开故事板
2.  在 Document Outline 窗口中找到要返回到的 ViewController
3.  单击该 ViewController 的导航项
4.  在属性资源管理器中，将返回按钮值更改为您的自定义磁贴

就是这样，享受...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T11:10:40.043

后退按钮将显示前一个视图的标题，如果没有设置标题，它将显示“返回”。

因此，在您的 prepareForSegue 方法中，您可以在推送下一个视图之前更改当前视图的标题。然后后退按钮将显示您设置的标题。

# css - “滚动”是 IE 的有效 CSS 背景属性吗？

> ID：12886277
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:32:44.010
> 
> 标签：css, internet-explorer

**“滚动”**是`background`Internet Explorer中 CSS 属性的有效值吗？
那么，Internet Explorer 是否会因为“滚动”的存在而忽略以下规则？

```
background: url('/images/site.gif') scroll 0; 
```

之所以提出这个问题，是因为另外两个用户之间就 Internet Explorer 的滚动属性的有效性发生了争论。由于我自己不知道这是否是一个有效的属性，我决定发布这个问题，并告诉他们 2 只关注这个帖子。但是，这是 Stack Overflow，所以我的问题当然是愚蠢的/无关紧要的/被否决。这就引出了一个问题，为什么一个愚蠢问题的答案被投票赞成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T20:45:39.120

它是一个有效的属性（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ie/ms530715%28v=vs.85%29.aspx)、[MDN](https://developer.mozilla.org/en-US/docs/CSS/background-attachment)）。但是由于您不相信文档，因此说服您的唯一方法是显示屏幕截图。`scroll`是`background-attachment`（包含在 的简写中`background`）的有效属性。事实上，它是默认值。

为了证明这一点，我们读取 的值`document.body.currentStyle.backgroundAttachment`。甚至在 IE6 中也支持！

![javascript:alert(document.body.currentStyle.backgroundAttachment)](../Images/2ad1833ff629141fd94206e62c6d7869.png)

在您最初的评论中，您说*“那是背景附件：不是背景。”* . 因此，假设您仍然不相信文档，我将展示另一个证据：

1.  假设这不是速记`fixed`的有效值。`background`
2.  然后我们推导出`background-attachment`不包含在速记中的 ，因为我们从这个答案的顶部知道这`"fixed"`是 的有效值`background-attachment`。
3.  所以，如果我们使用`body {background: url('/favicon.ico') fixed 0;}`，那么`alert(document.body.currentStyle.backgroundAttachment);`应该显示“滚动”，因为它是默认值`background-attachment` *并且*我们假设`background-attachment`不支持背景速记。
4.  但是警报显示“已修复”（屏幕截图中的页面是[http://jsfiddle.net/Nvfmt/](http://jsfiddle.net/Nvfmt/)）。 ![已修复警报](../Images/b6a3e4b835d829b7bfbbbb84013dadba.png)
5.  **矛盾**。所以我们得出结论，“滚动”是`background`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:39:42.093

有背景附件：滚动，如果这是你的意思，它是属性的默认值。

省略它会产生相同的结果 [http://jsfiddle.net/FKDer/](http://jsfiddle.net/FKDer/)

# c# - ADO.NET 中的连接生存期和准备好的语句

> ID：12886281
> 
> 赞同：0
> 
> 时间：2012-10-14T20:33:24.780
> 
> 标签：c#, sql-server, ado.net

我有一个长期运行的 Windows 服务，它不断接收数据并对其进行处理，然后将其放入数据库中。我使用存储过程进行复杂的操作，但其中一些有很多参数。

我知道这是建议的“最佳实践”：

```
using(IDbConnection connection = GetConnection())
{
   connection.Open();
   // Do stuff
   connection.Close();
} 
```

导致短暂的连接，但充分利用连接池。然而，这种做法似乎真的否定了存储过程的好处。我现在有这样的事情：

```
while(true) 
{ 
  var items = GetData(); // network I/O
  using(IDbConnection conn = GetConn()) 
  {
    connection.Open();
    var tran = connection.BeginTransaction();
    var preparedStatement1 = SQL.Prepare(connection, "...", ...);
    var preparedStatement2 = SQL.Prepare(connection, "...", ...);
    var preparedStatement3 = SQL.Prepare(connection, "...", ...);

    foreach(var item in items) 
    {
      // loop which calls SQL statements.
    }
    connection.Close();
  }
} 
```

我真的觉得我应该在 while 循环之外打开连接，这样它才能长时间保持活动状态；并在进入循环之前准备语句。这将给我使用存储过程的全部好处：

```
using(IDbConnection conn = GetConn()) 
{
  connection.Open();
  var tran = connection.BeginTransaction();
  var preparedStatement1 = SQL.Prepare(connection, "...", ...);
  var preparedStatement2 = SQL.Prepare(connection, "...", ...);
  var preparedStatement3 = SQL.Prepare(connection, "...", ...);

  while(!service.IsStopped) 
  { 
    var items = GetData(); // network I/O  
    foreach(var item in items) 
    {
      // loop which calls SQL statements.
    }      
  }
  connection.Close();
} 
```

所以问题是，存储过程的性能优势是否超过了长时间打开连接的“风险”？最佳实践似乎从未提及准备好的语句，而 MSDN 文档（我正在使用 SQL Server）似乎暗示`Prepare()`ing 有时是无操作的：[`SQLCommand.Prepare()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare.aspx)

# html - 身体形象与主容器保持一致

> ID：12886283
> 
> 赞同：0
> 
> 时间：2012-10-14T20:33:34.010
> 
> 标签：html, css, background-image

我想将背景图像（下图中的圆圈）添加到我正在处理的网站的正文中，我需要图像与容器保持齐平（下图中的白色中心带有绿色和红色横幅），以便即使浏览器最大化或最小化，图像也会保持与容器齐平。

我不确定我说的是否正确，所以我已经放置了一个视觉作为参考（下）以及我的 CSS 代码（下）。

```
html, body{height: 100%;}

body{ 
    background: #e5e5e5 url('../img/body_bck_lrg.gif') no-repeat -290px 190px fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    /*background-size: contain;
    background-origin: border-box;*/
   } 
```

![网站背景图像和容器区域的视觉参考](../Images/1d0946e64abad29621348ebaed6d02df.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:21:05.360

尝试这个：

```
body{ 
    background: #e5e5e5 url('../img/body_bck_lrg.gif') center top no-repeat;
} 
```

这应该将背景粘贴到屏幕的中心顶部，如果屏幕分辨率太大，其余空间将填充 #e5e5e5。

# jquery - 使用 jQuery Append 和/或模板？

> ID：12886284
> 
> 赞同：0
> 
> 时间：2012-10-14T20:33:35.527
> 
> 标签：jquery

使用 ajax 和 jQuery Append() 将一些项目放入一个运行良好的 div 中。我的问题是我可以为 div 设置某种模板，而不必将所有 html 代码放在 Append() 行中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:00:15.587

我不确定这是否是您的意思，但是您可以在创建新元素时传递一个属性对象。例如：

```
var divProperties = {id: 'myID', 'class': 'myClass', text: 'Some text'};
$('<div/>', divProperties).appendTo('body'); 
```

这将输出：

```
<div id="myDiv" class="myClass">Some text</div> 
```

[jQuery API - 创建新元素](http://api.jquery.com/jQuery/#creating-new-elements)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:50:39.637

看看 jQuery 模板。似乎它可以满足您的需求。

[http://api.jquery.com/template-tag-each/](http://api.jquery.com/template-tag-each/)

请参阅该页面中的示例。我认为你正在寻找的是这样的

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js">
</script>
</head>
<body>

<script id="movieTemplate" type="text/x-jquery-tmpl"> 
    <li>
        Title: ${Name}.
        {{each Languages}}
            ${$index + 1}: <em>${$value}. </em>
        {{/each}}
    </li>
</script>

<ul id="movieList"></ul>

<script>
var movies = [
    { Name: "Meet Joe Black", Languages: ["French"] },
    { Name: "The Mighty", Languages: [] },
    { Name: "City Hunter", Languages: ["Mandarin", "Cantonese"] }
];

/* Render the template with the movies data */
$( "#movieTemplate" ).tmpl( movies )
    .appendTo( "#movieList" );
</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:39:42.977

您正在寻找的是[微模板](http://ejohn.org/blog/javascript-micro-templating/)。在Backbone.js的[TODO 应用](http://ejohn.org/blog/javascript-micro-templating/)示例中可以找到一个很好的示例。

基本上，模板在 HTML 代码中：

```
<script type="text/template" id="item-template">
<div class="view">
  <input class="toggle" type="checkbox" <%= done ? 'checked="checked"' : '' %> />
  <label><%- title %></label>
  <a class="destroy"></a>
</div>
<input class="edit" type="text" value="<%= title %>" /> 
```

并且在 JavaScript 中非常容易使用：

```
template: _.template($('#item-template').html()),

render: function() {
  this.$el.html(this.template(this.model.toJSON()));
  this.$el.toggleClass('done', this.model.get('done'));
  this.input = this.$('.edit');
  return this;
}, 
```

当然还有很多其他的模板引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:59:17.967

有很多 jQuery 和 JavaScript 模板库，我的首选是[Handlebars.js](http://handlebarsjs.com/)。

除了酷的名字，它还是一个非常高效、快速、易于使用和适应性强的库。

演示：http: [//jsfiddle.net/SO_AMK/BP93x/](http://jsfiddle.net/SO_AMK/BP93x/)

JavaScript：

```
var tmpl = Handlebars.compile(document.getElementById('tmpl').innerHTML);
document.getElementById('content').innerHTML = tmpl({
    name: 'Jake'
});​ 
```

HTML：

```
<script id="tmpl" type="text/x-handlebars-template">
    <h1>Hello, {{ name }}.</h1>
    <h2>Handlebars loves you.</h2>
  </script>
<div class="container">
    <div id="content">
    </div>
</div> 
```

​Handlebars 还可以从外部文件加载模板，支持循环和 if/else 语句。

# scala - 在Scala中抛出异常，什么是“官方规则”

> ID：12886285
> 
> 赞同：52
> 
> 时间：2012-10-14T20:33:38.550
> 
> 标签：scala, exception, try-catch, either

我正在关注 Coursera 上的 Scala 课程。我也开始阅读 Odersky 的 Scala 书。

我经常听到的是，在函数式语言中抛出异常并不是一个好主意，因为它会破坏控制流，我们通常会返回带有失败或成功的 Either。Scala 2.10 似乎也将提供朝着这个方向发展的 Try。

但是在本书和课程中，Martin Odersky 似乎并没有说（至少现在）异常是不好的，他经常使用它们。我还注意到方法 assert / require ...

最后我有点困惑，因为我想遵循最佳实践，但它们并不清楚，而且语言似乎是双向的......

有人可以解释我在这种情况下应该使用什么吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-14T21:00:04.700

基本准则是对真正特殊的事情使用例外**。对于“普通”失败，最好使用`Option`or `Either`。如果您正在与 Java 交互，当有人以错误的方式打喷嚏时会引发异常，您可以使用它`Try`来保证自己的安全。

让我们举一些例子。

假设您有一个从地图中获取某些东西的方法。会出什么问题？好吧，像段错误*堆栈溢出这样的戏剧性和危险的~~事情~~，或者像元素这样的预期没有找到。您会让~~segfault~~堆栈溢出引发异常，但如果您只是找不到元素，为什么不返回 an`Option[V]`而不是值或异常（或`null`）？

现在假设您正在编写一个用户应该输入文件名的程序。现在，如果您不只是在出现问题时立即放弃该程序，那么您可以`Either`这样做：

```
def main(args: Array[String]) {
  val f = {
    if (args.length < 1) Left("No filename given")
    else {
      val file = new File(args(0))
      if (!file.exists) Left("File does not exist: "+args(0))
      else Right(file)
    }
  }
  // ...
} 
```

现在假设您要解析一个以空格分隔的数字的字符串。

```
val numbers = "1 2 3 fish 5 6"      // Uh-oh
// numbers.split(" ").map(_.toInt)  <- will throw exception!
val tried = numbers.split(" ").map(s => Try(s.toInt))  // Caught it!
val good = tried.collect{ case Success(n) => n } 
```

因此，您有（至少）三种方法来处理不同类型的故障：`Option`因为它有效/无效，在预期行为不有效的情况下，不是令人震惊和令人担忧的故障；`Either`当事情可以工作或不工作时（或者，实际上，任何你有两个互斥选项的情况）并且你想保存一些关于哪里出了问题的信息；并且`Try`当您不想自己处理异常的整个头痛，但仍需要与异常快乐的代码交互时。

顺便说一句，例外是很好的例子——所以你会在教科书或学习材料中发现它们比在其他地方更常见，我认为：教科书的例子通常是不完整的，这意味着通常可以通过精心设计来避免的严重问题应该而是通过抛出异常来标记。

*^(编辑：段错误使 JVM 崩溃，无论字节码如何，都不应该发生；那时即使是例外也无济于事。我的意思是堆栈溢出。)

**^(编辑：异常（没有堆栈跟踪）也用于 Scala 中的控制流——它们实际上是一种非常有效的机制，它们可以启用库定义的`break`语句和`return`从您的方法返回的东西，即使控制实际上已经进入一个或多个闭包。大多数情况下，您自己不应该担心这一点，只是要意识到捕获*所有* `Throwable`s 并不是一个好主意，因为您可能会错误地捕获这些控制流异常之一。)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-14T22:36:40.663

因此，这是 Scala 专门权衡功能纯度以换取与遗留语言和环境（特别是 Java）的易于转换/互操作性的地方之一。异常会破坏功能纯度，因为它们破坏了参照完整性，并且无法进行等式推理。（当然，非终止递归也是如此，但很少有语言愿意强制执行那些不可能实现的限制。）为了保持功能的纯洁性，您使用 Option/Maybe/Either/Try/Validation，所有这些都编码成功或失败作为引用透明类型，并使用它们提供的各种高阶函数或底层语言特殊的 monad 语法使事情更清晰。或者，在 Scala 中，您可以简单地决定放弃功能纯度，知道这可能会使事情在短期内变得更容易，但在长期内会变得更加困难。这类似于在 Scala 中使用“null”、可变集合或本地“var”。有点可耻，不要做太多，但每个人都在最后期限内。

# javascript - addEventListener 用于 Canvas 上的 keydown

> ID：12886286
> 
> 赞同：60
> 
> 时间：2012-10-14T20:34:00.503
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试制作一个响应键盘和鼠标输入的画布应用程序。我有这个代码：

```
canvas = document.getElementById('canvas');
canvas.addEventListener('mousedown', function(event) {
    alert('mousedown');
        }, false);
canvas.addEventListener('keydown', function(event) {
    alert('keydown');
        }, false); 
```

每当我单击鼠标时，都会出现“mousedown”警报，但永远不会出现“keydown”警报。相同的代码在 JS Bin 上运行良好：http: [//jsbin.com/uteha3/66/](http://jsbin.com/uteha3/66/)

为什么它在我的页面上不起作用？画布不能识别键盘输入吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-14T22:35:02.720

将 canvas 元素的 tabindex 设置为 1 或类似的东西

```
<canvas tabindex='1'></canvas> 
```

使任何元素都具有焦点是一个古老的技巧

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-10-14T21:00:28.847

**编辑**- 这个答案*是*一个解决方案，但更简单和正确的方法是`tabindex`在画布元素上设置属性（正如 hobberwickey 所建议的那样）。

~~您无法聚焦画布元素。一个简单的解决方法是让你“自己”专注。~~

```
var lastDownTarget, canvas;
window.onload = function() {
    canvas = document.getElementById('canvas');

    document.addEventListener('mousedown', function(event) {
        lastDownTarget = event.target;
        alert('mousedown');
    }, false);

    document.addEventListener('keydown', function(event) {
        if(lastDownTarget == canvas) {
            alert('keydown');
        }
    }, false);
} 
```

**[JSFIDDLE](http://jsfiddle.net/AustinBrunkhorst/qsULv/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T22:51:51.727

有时只需将画布的 tabindex 设置为“1”（或“0”）即可。但有时 - 它没有，出于某种奇怪的原因。

就我而言（ReactJS 应用程序、动态画布 el 创建和挂载），我需要调用 canvasEl.focus() 来修复它。也许这与 React 有某种关系（我基于 KnockoutJS 的旧应用程序在没有 '..focus()' 的情况下工作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T19:47:38.033

将所有 js 代码封装在 window.onload 函数中。我有一个类似的问题。一切都在 javascript 中异步加载，因此某些部分的加载速度比其他部分更快，包括您的浏览器。将所有代码放在 onload 函数中将确保您的代码在浏览器中需要的所有内容都可以在尝试执行之前准备好使用。

# html5-video - 使用 Video.Js 链接 html5 视频

> ID：12886288
> 
> 赞同：3
> 
> 时间：2012-10-14T20:34:03.137
> 
> 标签：html5-video, video.js

我正在寻找一些代码，允许我在另一个视频之后自动启动一个视频。我正在使用很棒的 video.js 库，它有一个非常完整的 API。我找到了一些片段来让事件监听器在第一个视频结束时工作，但是我无法启动第二个。

这是有效的，在第一个视频的末尾显示一个警报：

```
_V_("intro").ready(function(){
this.addEvent("ended", function(){
    alert('foo');
});
}); 
```

这也有效，在页面重新加载时全屏启动视频：

```
_V_("leader").ready(function(){
var leader = this;
leader.requestFullScreen();
leader.play();
}); 
```

**但是我无法在第一个视频结束时全屏启动第二个视频...**

最后的精妙之处，我想完全用 javascript 构建第二个视频，而不必编写它，只需用 CSS 隐藏 id。

谢谢各位！艾略特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:34:12.427

您可以简单地使用 Video.js API 中提供的“src”方法，如果您想在第一个视频完成后立即播放第二个视频，它的工作方式如下：

```
_V_("intro").ready(function(){
    this.addEvent("ended", function(){
        this.src({ type: "video/mp4", src: "http://path/to/second/video.mp4" });
    });
}); 
```

# c++ - scanf() 为最后一行输入提供错误的输出

> ID：12886290
> 
> 赞同：0
> 
> 时间：2012-10-14T20:34:14.197
> 
> 标签：c++, input, scanf

我正在使用 scanf 来获取图表的输入。输入如下：

```
8
1 2
3 3 5 6
2 4 7
2 3 8
2 1 5
1 7
2 6 4
0 
```

第一个整数 (8) 是顶点数，后面是 8 行。每个中的第一个整数是从第一行中的顶点 1、第二行中的顶点 2 开始的出边数，依此类推。

我写的函数如下：

```
void getInput() {
    //init();
    int numVertex; int numTest;

    scanf("%d", &numVertex);
    for(int i =1 ; i <= numVertex;i++) {
        int ver,nC; vector<int> vList;
        //fscanf(file,"%d", &ver);
        scanf("%d", &nC);

        for(int j=0;j<nC;j++) {
            int temp ;
            scanf("%d", &temp);
            vList.push_back(temp);

        }
        props pr = {-1,-1 , vList};
        graph.insert(make_pair(i, pr) );
    }
} 
```

但是，我输入的最后一行的输出变得很奇怪，它基本上重复了前一行的最后一位数字。对于上述输入，我得到的输出：

```
1 : 2
2 : 3 5 6
3 : 4 7
4 : 3 8
5 : 1 5
6 : 7
7 : 6 4
8 : 4 4  // this is where it should give nothing 
```

谁能告诉我这里出了什么问题？当我转换为通过文件获取输入时，完全相同的转换序列给了我正确的输出。

有人可以指出我的任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:37:30.560

像这样做：

```
if (scanf("%d", &nC) != EOF) {

    for(int j=0;j<nC;j++) {
        int temp ;
        scanf("%d", &temp);
        vList.push_back(temp);

    }
    props pr = {-1,-1 , vList};
    graph.insert(make_pair(i, pr) );
} 
```

这将检查读取是否成功。最后一行输入的重复是一个众所周知的问题，发生的原因是最后一次读取尝试失败（因为已到达文件末尾）并`scanf`返回与之前调用相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:47:18.420

是什么`props`？

不管是什么，对包含 std::vector 的东西进行 C 风格的结构初始化都是自找麻烦——结果是未定义的，几乎肯定不是你想要的。

尽管缺少另一个答案中提到的错误检查，但您的输入代码似乎还可以。

# design-patterns - Concern 和 Responsibility 的区别（即 SRP 和 SoC 的区别）？

> ID：12886291
> 
> 赞同：3
> 
> 时间：2012-10-14T20:34:22.097
> 
> 标签：design-patterns, separation-of-concerns, single-responsibility-principle

> **SRP** - 每个类应该只有一个责任（即改变的理由）
> **关注点分离**是将计算机程序分解为功能上尽可能少重叠的不同特征的过程。关注点是程序中的任何兴趣或关注点。（关注==系统特性。）

a) 据我了解，两者之间的唯一区别是**SRP**试图将*职责*分成不同的*类*，而**SoC**试图将*关注点*分成不同的*模块*？！

*b）如果a ）*下的假设是正确的，那么*关注点*和*责任*之间有什么区别（除了*责任*存在于较低抽象级别的事实）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:43:41.803

这就是我对它们的看法——同样的原则，通常在不同的抽象层次上引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:37:58.807

好问题。:) 免责声明：只是我的想法。我之前没有考虑过区别。我认为这两个概念之间没有太大区别。

然而，我想说的是：我只知道**横切**关注点。尽管如您所说，关注点的基本概念是程序中的任何兴趣或关注点，但如果关注点不是横切的，它们是否会成为责任？

我认为原理是一样的。甚至我的理解也和你一样。在购物车系统中，将商品添加到购物车可以被视为一个问题……这是用例应该做的主要事情。所涉及的类并不真正关心日志记录、安全性等。即使没有日志记录，也可以向该类添加一个项目。但是对于购物车或服务必须公开添加项目的功能，否则用例将失败。同样，对于日志记录用例，如果记录器未能记录活动，则意味着日志记录用例不起作用，即使该项目已添加到购物车。

有点像，将商品添加到购物车是谁的责任？（比方说 CartService）如果 AddItemToCart 故事失败，它会被追究责任吗？是的。如果 LogAddItemActivity 失败会追究责任吗？不。 AddItemToCart 故事是否与日志记录活动有关。这是。它可以与 CartService 负责的活动分开吗？模块和类是不同层次的抽象。

# java - 第一次使用 Apache Commons，HashBag.uniqueSet() 返回错误的对象类型？

> ID：12886292
> 
> 赞同：1
> 
> 时间：2012-10-14T20:34:26.900
> 
> 标签：java, apache-commons

我第一次使用 Apache Commons，主要是因为我想访问他们的 HashBag 类。我将概述我所遵循的整个过程，以帮助查明问题。

首先，我下载了 Apache Commons Collections 的当前版本 (3.2.1)。 [http://commons.apache.org/collections/download_collections.cgi](http://commons.apache.org/collections/download_collections.cgi)

然后我将文件解压缩`commons-collections-3.2.1.jar`到磁盘上的一个文件夹中，并将该文件夹添加到我的系统`%CLASSPATH%`环境变量中，以便我可以将类导入到我的 Java 程序中。

这个测试程序说明了我遇到的问题。

```
import org.apache.commons.collections.bag.HashBag;

public class test {
    public static void main(String[] args) {
        HashBag test = new HashBag();
        System.out.println(test.getClass().getName());
        System.out.println(test.uniqueSet().getClass().getName());
    }
} 
```

第一个输出行说明`org.apache.commons.collections.bag.HashBag`这是预期的。

第二个输出行说明`org.apache.commons.collections.set.UnmodifiableSet`了这不是预期的。根据文档[HERE](http://commons.apache.org/collections/api-release/org/apache/commons/collections/bag/HashBag.html "这里")，该`uniqueSet()`方法继承自超类和接口，但在这两种情况下，该方法都应该返回一个`java.util.Set`. 为什么它在这里返回不同的东西？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:37:00.560

完全没有问题，`org.apache.commons.collections.set.UnmodifiableSet`执行`java.util.Set`。

具有给定 return 语句的函数可以返回指定类的后代。否则，将无法使用接口和抽象类作为返回类型......

这是最好的 OOP :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:37:04.757

`org.apache.commons.collections.set.UnmodifiableSet`实现`java.util.Set`所以一切看起来都很好。方法必须返回隐藏在接口下的具体实现！

# php - PHP“列表”在非数字数组上工作？

> ID：12886294
> 
> 赞同：3
> 
> 时间：2012-10-14T20:34:30.653
> 
> 标签：php, list, construct

```
 $colors = array(
    'r' => 'a',
    'g' => 'b',
    'b' => 'c'
);

list($v, $k) = each($colors);

echo $v . " " . $k 
```

现在上面打印出我很惊讶的 ra，因为我认为“列表”构造只适用于数值数组。为什么它有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:38:24.660

是的，您是对的[list() 仅适用于数字数组并假设数字索引从 0 开始。](http://php.net/manual/en/function.list.php)但他之所以能解释为什么您的代码可以正常工作是因为`each`.

`each` `traverse an array`因此，如果您运行以下命令，则将其转换`keys`为示例：`numerical`

```
$foo = array("r"=>"a");
$bar = each($foo);

echo "<pre>";
print_r($bar); 
```

输出

```
Array
(
    [1] => a
    [value] => a
    [0] => r
    [key] => r
) 
```

您可以使用 `array('r' => 'a');`已转换为的，`array(0 => 'r', 1 => 'a');`因此您现在可以使用，`list`因为它们现在有`numerical keys`

[来自 PHP 文档](http://php.net/manual/en/function.each.php)

> each 从数组中返回当前的键值对并推进数组游标。
> 
> each 从数组数组中返回当前的键值对。这对以四元素数组的形式返回，键为 0、1、key 和 value。元素 0 和 key 包含数组元素的键名，元素 1 和 value 包含数据。

还

> each() 通常与 list() 结合使用来遍历数组，这是一个示例：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T20:39:28.507

仔细阅读手册[`each()`](http://us3.php.net/manual/en/function.each.php)：

> 从数组数组中返回当前的键值对。这对以四元素数组的形式返回，键为 0、1、key 和 value。元素 0 和 key 包含数组元素的键名，元素 1 和 value 包含数据。

因此，当您这样做时`each($colors)`，将返回以下内容：

```
array(0 => 'r' => 1 => 'a', 'key' => 'r', 'value' => 'a') 
```

然后`list()`获取和的值`0`并将`1`它们分别分配给`$v`和`$k`。说得通？

# sql - 当所有其他列都匹配时，sql对某列求和

> ID：12886295
> 
> 赞同：1
> 
> 时间：2012-10-14T20:34:33.277
> 
> 标签：sql, sql-server-2008-r2, sum

我有以下 SQL 临时表，它是 SQL 查询的结果

![在此处输入图像描述](../Images/a9a8805650151afeb0cac8c58e7628b6.png)

我正在尝试对列进行求和`numitems`，并且`ignoreditems`所有其他列都匹配

我尝试了类似以下查询：

```
SELECT 
    catalogid, 
    sum(numitems), sum(ignoreditesm) 
FROM ##temporderstable 
GROUP BY 
    catalogid, supplierid, cname, cprice, cstock, ccode, minstock, pother4 
```

我似乎无法让它工作

我收到一个错误

> *numitems 不属于该表*

虽然我在运行命令时可以看到它

```
select * from ##temporderstable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:01:33.620

尝试添加别名：

```
SELECT 
    T.catalogid, 
    sum(T.numitems) as numitems, 
    sum(T.ignoreditesm)  as ignoreditesm
FROM ##temporderstable T
GROUP BY 
    T.catalogid, T.supplierid, T.cname, T.cprice, 
    T.cstock, T.ccode, T.minstock, T.pother4 
```

# java - 数组元素作为java中的链表

> ID：12886299
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:35:21.497
> 
> 标签：java, arrays, linked-list

我有一个家庭作业，我使用了一个数组，数组的元素是链表，因为一行中的元素不固定需要删除或添加一些时间取决于问题情况，我在下面尝试了这些代码，但是当我遇到问题时将新元素添加到固定行，例如 p[0] 将为所有人添加该值，我该如何解决这个问题，请帮忙。

```
public class schedule
{
   public class link
   {
     public LinkedList <Integer>list = new LinkedList<Integer>() ;
     public link(LinkedList<Integer> value)
    {
        list = value;
    }
    public link(int value)
    {
        list.add(Integer.valueOf(value)) ;
    }

}

private link p[] = new link[10];
public schedule()
{
    LinkedList<Integer> l = new LinkedList<Integer>();
    l.add(Integer.valueOf(2));
    l.add(Integer.valueOf(0));
    l.add(Integer.valueOf(3));
    for(int j=0;j<p.length;j++)
        p[j] = new link(l);

    p[0].list.add(9); // here I  have problem

    for(int j=0;j<p.length;j++)
    {
        System.out.print("p["+j+"]:");
        for(int i=0;i<p[j].list.size();i++)
            System.out.print(p[j].list.get(i).intValue());
        System.out.println();
    }

}
public static void main(String []arg)
{
    new schedule();
}

the output is like this : the value 9 added to all but I want to be added just for first element
p[0]:2039
p[1]:2039
p[2]:2039
p[3]:2039
p[4]:2039
p[5]:2039
p[6]:2039
p[7]:2039
p[8]:2039
p[9]:2039 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:39:26.603

问题是您正在`link`使用相同的初始化每个实例`LinkedList<Integer>`：

```
LinkedList<Integer> l = new LinkedList<Integer>();
l.add(Integer.valueOf(2));
l.add(Integer.valueOf(0));
l.add(Integer.valueOf(3));
for(int j=0;j<p.length;j++)
//it will be the same LinkedList<Integer> l per all the instances in the array
    p[j] = new link(l); 
```

请注意，当您这样做时，每个`link`实例都将具有`list`引用相同`LinkedList<Integer> l`变量的属性。所以，如果你在一个地方修改它，每个人都会被*更新*（因为它是同一个引用）。

有很多方法可以解决这个问题：

*   在 for 循环的每次迭代中创建一个新的 LinkedList。
*   使用另一个构造函数创建新`link`实例。
*   `link[] p`一个一个地填充你的数组......

# base64 - Base64 编码变体？我的 base64 编码数据未正确解码

> ID：12886301
> 
> 赞同：3
> 
> 时间：2012-10-14T20:35:50.993
> 
> 标签：base64

我有一些来自被描述为 base64 编码的 Web 服务的数据。

例子：`AgAOAAAAQQEA3AcKDhIyCNwHCg4SMgyYIzSWoACP1T2TRRw1MTExMDUwMTE2ICAAAAAAAAAAAAAA3AAjU1QsKzAyMjEuMGxiDQo=`

但是，尝试对此进行解码并没有得到我所期望的结果：

```
>>> base64.b64decode('AgAOAAAAQQEA3AcKDhIyCNwHCg4SMgyYIzSWoACP1T2TRRw1MTExMDUwMTE2ICAAAAAAAAAAAAAA3AAjU1QsKzAyMjEuMGxiDQo=')
'\x02\x00\x0e\x00\x00\x00A\x01\x00\xdc\x07\n\x0e\x122\x08\xdc\x07\n\x0e\x122\x0c\x98#4\x96\xa0\x00\x8f\xd5=\x93E\x1c5111050116  \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xdc\x00#ST,+0221.0lb\r\n' 
```

看起来解码字符串的结尾有点像我正在寻找的内容。理论上它应该可以转换为类似的东西，`MT=2012-10-14 18:50:08, TT=2012-10-14 18:50:12, BT=00:A0:96:34:23:98, SN=5111050116 , BL=6.30V, S/H=4/3, Weight=221.0lb(100.24kg)`但我无法弄清楚这里的编码发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:28:04.187

到目前为止，我可能需要更多信息来解码所有内容，但在这里：

```
>>> t = base64.b64decode('AgAOAAAAQQEA3AcKDhIyCNwHCg4SMgyYIzSWoACP1T2TRRw1MTExMDUwMTE2ICAAAAAAAAAAAAAA3AAjU1QsKzAyMjEuMGxiDQo=') 
```

日期时间字段 MT 和 TT 依次为：

```
>>> print int(t[9:11][::-1].encode("hex"), 16), int(t[11].encode("hex"), 16), int(t[12].encode("hex"), 16), int(t[13].encode("hex"), 16), int(t[14].encode("hex"), 16), int(t[15].encode("hex"), 16)
2012 10 14 18 50 8

>>> print int(t[16:18][::-1].encode("hex"), 16), int(t[18].encode("hex"), 16), int(t[19].encode("hex"), 16), int(t[20].encode("hex"), 16), int(t[21].encode("hex"), 16), int(t[22].encode("hex"), 16)
2012 10 14 18 50 12 
```

BT 是，您只需添加 ':' 每两个字母：

```
>>> t[23:29][::-1].encode("hex")
'00a096342398' 
```

SN 是：

```
>>> t[35:47]
'5111050116  ' 
```

重量是：

```
>>> t[63:72]
'+0221.0lb' 
```

抱歉，目前我不知道其余部分是如何存储的，而且由于我不知道这些范围可能是多少，我真的无法解码其余部分，如果您可以透露，请告诉我关于这些字段应该存储什么的更多信息。

# tomcat7 - 使用 java7 运行时的 tomcat7 UnsupportedClassVersionError

> ID：12886308
> 
> 赞同：0
> 
> 时间：2012-10-14T20:36:47.383
> 
> 标签：tomcat7, grails-2.0

问题：将我的战争部署到 tomcat7 时，我收到错误 java.lang.UnsupportedClassVersionError: org.MyLibraryClass : Unsupported major.minor version 51.0

（这是使用比运行代码时使用的 java 更新的版本编译 java 时遇到的错误。）

情况，按顺序：

1.  全新的 ubuntu 12.04.1 服务器 64 位最小，在虚拟机中
2.  安装tomcat6
3.  试图部署我的战争
4.  意识到错误，我需要java7，因为ubuntu 12仍然带有过时的java
5.  使用本指南安装了 oracle java 7 [https://askubuntu.com/questions/197248/java-on-ubuntu-server-12-04](https://askubuntu.com/questions/197248/java-on-ubuntu-server-12-04)

    > ```
    >  sudo add-apt-repository ppa:webupd8team/java
    >   sudo apt-get update
    >   sudo apt-get install oracle-java7-installer 
    > ```

6.  删除tomcat6并安装tomcat7

    > ```
    >  sudo apt-get remove tomcat6-common
    >   sudo apt-get install tomcat7 
    > ```

7.  将我的战争部署到tomcat7

8.  启动tomcat

    > ```
    >  sudo service tomcat7 start 
    > ```

9.  检查了我的应用程序的日志文件。同样的错误。

10.  echo $JAVA_HOME 为空，java -version 显示：

    > ```
    >  java version "1.7.0_07"
    >   Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
    >   Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode) 
    > ```

11.  这是默认的tomcat7安装，没有修改。我仍然检查了启动脚本和配置，以确保没有在任何地方指定自定义 Java 版本。还通过询问 catalina 进行了检查：

> ```
>  ubuntu@ubuntu:/home$ /usr/share/tomcat7/bin/catalina.sh version
>   Using CATALINA_BASE:   /usr/share/tomcat7
>   Using CATALINA_HOME:   /usr/share/tomcat7
>   Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
>   Using JRE_HOME:        /usr
>   Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
>   Server version: Apache Tomcat/7.0.26
>   Server built:   Jul 19 2012 03:21:30
>   Server number:  7.0.26.0
>   OS Name:        Linux
>   OS Version:     3.2.0-29-generic
>   Architecture:   amd64
>   JVM Version:    1.7.0_07-b10
>   JVM Vendor:     Oracle Corporation 
> ```

现在我被困住了。我看不出任何 java 代码如何无法在 oracle 的 jre7 上运行。

我的战争是一个全新的非常基本的 hello world grails 2.1 应用程序，带有 maven，它有一个用 jdk7 编译的 maven 依赖项（org.MyLibraryClass）。那就是我得到错误的那个。

在 grails 中，我将 BuildConfig.groovy 更改为 1.7 而不是 1.6：

> ```
>  grails.project.target.level = 1.7
>   grails.project.source.level = 1.7 
> ```

然后做了一个 grails 清理、重建、战争、重新部署。没变。

知道接下来要尝试什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T12:36:29.017

使用 Java7 编译代码并在 Java6 下运行时的典型错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T03:31:03.130

我刚才也有同样的问题，现在解决了。

请检查这个符号

> /usr/lib/jvm/default-java

它的默认链接是 open-jdk，重置正确的 jdk 目录。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:53:04.783

您查询中的关键行是我认为的这一行：

```
sudo service tomcat7 start 
```

我认为它可能会触发系统中仍然存在 OpenJDK 的继承。你想要做的是从你自己的环境中尝试 tomcat。

以您的普通用户身份登录

```
java -version
/usr/share/tomcat7/bin/startup.sh 
```

并检查。您还应该以干净用户、root 或其他用户身份登录并检查 java -version 以进行检查。

如果一切都失败了，请转到 /etc/profile 并确保 Oracle 的 Java/bin 目录的路径是环境的 PATH 变量中的第一件事。

# c# - 使用 Microsoft Visual C# 2010 Express 加载 DLL

> ID：12886310
> 
> 赞同：2
> 
> 时间：2012-10-14T20:36:59.733
> 
> 标签：c#, visual-studio-2010, dll, visual-studio-express

我正在使用 Microsoft C# 2010 Express 和 Imperx 的 FrameLink Express 驱动程序。当我尝试在运行时加载 DLL 时，出现异常：

> *无法加载 DLL 'VCECLB.dll'：找不到指定的模块。（HRESULT 例外：0x8007007E）*

如果我尝试添加 DLL 作为参考，我会收到以下消息：

> *无法添加对“C:\\VCECLB.dll”的引用。请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。*

两个问题：

1.  这是 Express 问题（即 Express 的某些限制导致问题）？我相信 DLL 的源代码是用 C++ 编写的，但我认为这并不重要。

2.  是否有不同的方式来引用 DLL 和/或将其添加到项目中？我做错了什么？

最后，我尝试添加 x86 和 x64 版本、调试和发布。每次都无法添加为参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T20:42:26.263

该 DLL 似乎不是 .NET（也不是 COM）代码 - 因此您无法加载它，也无法添加对它的引用。

与您的 Express 版本没有任何关系 - 它只是不是 .NET “兼容” DLL，因此您无法加载或引用它。

为了使用它的功能，您可能必须深入研究从 .NET 调用原始 C++ 代码的更“神秘”（以及更精细和更复杂）的方法 - 或者找到与 .NET 兼容的对应物或版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T15:56:11.697

实际上，答案似乎在消息的第一行： Unable to load DLL 'VCECLB.dll': The specified module could not be found。（来自 HRESULT:0x8007007E 的异常它说它找不到 DLL，而不是 DLL 不兼容。DLL 应该与您的程序的其他 DLL 一起定位，您需要将 DLL 添加到解决方案中。

如果某个 DLL 被编译为 Native C/C++（即非 .NET 样式），则可以从属于 .NET 样式但不是 C# 例程的 C/C++ 调用它。

因此，如果问题是模块可以找到但无法加载，您需要编写一个 C++ (.NET) 例程从您的 C# 例程 (.NET) 调用 C++ (Not .NET)。

所有直接与硬件对话的代码都必须在某种程度上做到这一点。大多数人使用多个 DLL 为您执行此操作。

# c++ - 简单的 int 到字符串的转换... Int 到 const char* 无效

> ID：12886314
> 
> 赞同：2
> 
> 时间：2012-10-14T20:37:33.967
> 
> 标签：c++, string, int, sstream

设置：在 Qt Creator 上，我调用了这个函数。我已经导入了所有 sstream、string 等。它们都在同一个类中，并且在头文件中定义得很好：

```
std::string int2str(int x) {
    std::stringstream ss;
    ss << x;
    return ss.str();
} 
```

并在 for 循环内：

```
for (int i = 0; i < 10; i++) {
    std::string s = int2str(i); // error lies on this line
    // a line of Qt code
} 
```

我得到错误`"Invalid conversion from int to const char* [-fpermissive]"`。这很奇怪，因为这不正是这个函数应该做的吗？

**编辑：**不知道如何使用 Qt Creator 来获取更多细节......对不起大家。

错误：

> 初始化 ' `std::basic_string<_CharT, _Traits,_Alloc>::basic_string(const_charT*, const_Alloc&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]`' [-fpermissive] @ basic_string.tcc 第 214 行的参数 1 (/usr/include/c++/4.6/bits/basic_string.tcc)

**EDIT2::** 愚蠢的错误，其中之一包括，说到命名空间。从不指定在哪里`int2str`；在它前面使用`myClass::`过，现在一切都很好 - 正如每个人都认为的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:29:24.903

提供了虚假信息；标头函数*未*正确定义，因为该函数返回的`int`是 a 而不是 a `std::string`。另外命名空间：在其实现中没有`myClass::`前面的函数。`int2str`

# ruby - 如何在数组中添加特定的哈希属性

> ID：12886316
> 
> 赞同：1
> 
> 时间：2012-10-14T20:38:00.713
> 
> 标签：ruby, arrays, hash, addition, inject

我想从哈希数组中添加特定属性......这是一个示例数组：

```
@horses = [
        {name: "Runner1", odds: 4.00},
        {name: "Runner2", odds: 20.00},
        {name: "Runner3", odds: 4.00}
        ] 
```

我正在尝试这种方法：

```
@total_odds = horses[:odds].inject(:+) 
```

但我收到一个错误：`[ ]': can't convert Symbol into Integer`

我究竟做错了什么？非常感谢（刚开始学习）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:39:54.940

```
@horses.collect {|h| h[:odds] }.inject(:+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:12:58.777

[`inject`](https://ruby-doc.org/core/Enumerable.html#method-i-inject)如果你需要解压你正在迭代的元素，你可以使用一个块：

```
@horses.inject(0) { |m, h| m + h[:odds] } 
```

当你这样说时：

```
@total_odds = horses[:odds].inject(:+) 
```

您正在尝试使用符号 ,`:odds`作为数组的索引；数组索引是整数，数组无法将符号转换为整数，因此会出现`can't convert Symbol into Integer`错误。

# xslt - cygwin mod-xslt2

> ID：12886329
> 
> 赞同：2
> 
> 时间：2012-10-14T20:39:07.687
> 
> 标签：xslt, cygwin, apxs2

我正在尝试使用 cygwin 编译 mod-xslt2，mod-xslt2 正在使用 apache apxs2 程序，该程序安装在 /usr/sbin/ 目录中的 cygwin 环境中，但是在查找该程序时（apxs2） cygwin ./configure 似乎没有“看到”它并说它不存在，但是当我从 cygwin 界面中的命令行运行程序时，它工作得很好。有什么建议吗？

问候。

# .net - ASP .NET MVC 4：WebSecurity.CreateUserAndAccount 如何设置 UserId

> ID：12886334
> 
> 赞同：4
> 
> 时间：2012-10-14T20:39:41.337
> 
> 标签：.net, asp.net-mvc, entity-framework

我想在 Configuration.cs 中移动我对数据库表和数据（用户、角色中的用户等）的初始化，如本文所示：http: [//blog.longle.net/2012/09/25/seeding-users- and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)

但是我有一个问题：是否可以设置添加用户的UserId？我的意思是，我可以添加 5 个用户，并且，我认为，他们应该获得 1-2-3-4-5 个 ID，但我可以控制它并设置他们的 ID 手册吗？

现在初始化看起来像：

```
 if (!WebSecurity.UserExists("elena"))
            WebSecurity.CreateUserAndAccount("elena", "password"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T20:45:12.973

是的，您可以通过传入要设置的属性来做到这一点。例如：

```
WebSecurity.CreateUserAndAccount("elena", "password", new { UserId = 1 }); 
```

当然，您需要确保 UserId 列未设置为标识列，并且您还必须更改您的 UsersContext 架构以添加它。

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

# linux - 有人知道什么是gvfsd-http吗？

> ID：12886339
> 
> 赞同：17
> 
> 时间：2012-10-14T20:40:05.923
> 
> 标签：linux, networking, fedora

gvfsd-http 存在于 Fedora、Ubuntu 和其他几个发行版中。有人知道这个过程是做什么用的吗？网上除了“gnome 虚拟文件系统”外，没有任何信息。

它是干什么用的？

如果不是强制性的，如何摆脱它？

有时我会看到这样的连接：

```
tcp        1      0 192.168.1.3:45229       50.17.249.143:80        CLOSE_WAIT  5463/gvfsd-http 
```

如您所见，该过程是 gvfsd-http。IP地址属于：cz-usa.com，一家枪械公司。我与这个网站无关。任何想法这个过程在做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T23:47:48.197

这是一个用于 http 支持的 gvfs 模块。例如，当您将图像从浏览器拖动到 nautilus 窗口时会使用它。

# qt - 如何检查 QCA DHPrivateKey 未创建对称密钥的原因

> ID：12886341
> 
> 赞同：0
> 
> 时间：2012-10-14T20:40:10.667
> 
> 标签：qt, cryptography

我有程序通过 Diffie-Helman 算法交换会话密钥，或者几乎交换。所有动作都是2类：一类接收数据并计算私钥，设置为第二类，其中对称密钥是在接收到DH的公共部分后计算的。程序正在使用 Qt 和 QCA。私钥存储为小部件类成员：

```
QCA::DHPrivateKey m_localKey; 
```

在接收到另一方密钥的公共部分（如 QByteArray）后，它会计算对称密钥：

```
QCA::Initializer init;
QCA::DLGroup group(prime, p);
QCA::SecureArray remoteKey(m_remoteKey);
QCA::DHPublicKey pk(group, remoteKey);
m_sessionKey = m_localKey.deriveKey(pk); 
```

但会话密钥始终为空（m_sessionKey.isEmpty() 和 m_sessionKey.isNull() 为真）。值已设置且交换正确（按原样接收远程部分公钥），m_localKey.isNull() 和 pk.isNull() 返回正确的值 (false)。

奇怪的是，当我运行测试时，它可以工作。测试使用相同的顺序操作，只是在一个类中创建了私钥，但获取对称密钥的逻辑是相同的，用于此的类是相同的。

我的问题是为什么它在测试和单独的程序中表现不同。是否有可能从 QCA::DHPrivateKey 获取任何关于deriveKey() 中出了什么问题的错误/调试信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:39:29.023

遗憾的是，该代码丢失了，因此无法确定，但问题可能出在两个地方 - 传输/接收数据和过多的 QCA::Initializer 调用。

在 main 中设置 QCA::Initializer 并 [re] 编写数据交换代码后，它就可以工作了。仍然很遗憾，我不知道如何检查错误，如果发生这种情况，所以如果有人知道，请分享这些知识。

# android - Android Twitter 提要好友缩略图

> ID：12886345
> 
> 赞同：0
> 
> 时间：2012-10-14T20:40:30.880
> 
> 标签：android, twitter, twitter4j

对于 android，您如何获取带有朋友缩略图的家庭提要？Atm 我正在使用 Twitter4j，但我似乎找不到任何东西。我可以获取提要，但如何获取缩略图？缩略图是推文旁边的用户个人资料图片。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:58:25.720

如果您有一个`Tweet`对象，您可以使用 Twitter[`getProfileImage`](http://twitter4j.org/en/javadoc/twitter4j/api/UserMethods.html#getProfileImage%28java.lang.String,%20twitter4j.ProfileImage.ImageSize%29)方法和用户的屏幕名称。

如果你有一个[`Status`](http://twitter4j.org/en/javadoc/twitter4j/Status.html)对象，你可以调用`getUser`, 然后[`getProfileImageURL`](http://twitter4j.org/en/javadoc/twitter4j/User.html#getProfileImageURL%28%29)在返回的`User`对象上。

# ruby-on-rails - Rails 3.2.8“新”在 Windows 2008 上找不到捆绑程序

> ID：12886348
> 
> 赞同：2
> 
> 时间：2012-10-14T20:41:05.000
> 
> 标签：ruby-on-rails, windows-server-2008-r2

我刚刚在 Windows 2008 R2 服务器上安装了 Ruby (1.9.3) 和 Rails (3.2.8)。

```
E:\>ruby --version
ruby 1.9.3p194 (2012-04-20) [i386-mingw32]

E:\>rails --version
Rails 3.2.8 
```

每当我运行“rails new”时，都会发生以下错误：

```
C:/Program Files/Ruby/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/
generators/app_base.rb:254:in ``': No such file or directory - ""C:/Program File
s/Ruby/Ruby193/bin/ruby.exe"" -rubygems "C:/Program Files/Ruby/Ruby193/lib/ruby/
gems/1.9.1/gems/bundler-1.2.1/bin/bundle" install (Errno::ENOENT) 
```

我试过在不同的目录中运行“rails new”，并以管理员和普通用户的身份运行。

我认为捆绑器已正确安装：

```
E:\>gem list bundler

*** LOCAL GEMS ***

bundler (1.2.1) 
```

更新 rails 也无济于事。

```
E:\>gem update rails
Updating installed gems
Nothing to update 
```

我已经阅读了[http://guides.rubyonrails.org](http://guides.rubyonrails.org)。如果那里有我的答案，我不明白。

我知道大多数其他人都在使用更好的操作系统，所以请仅分享您的同情。

谢谢，

史蒂文

# ios - Rubymotion 和指向结构的指针

> ID：12886349
> 
> 赞同：11
> 
> 时间：2012-10-14T20:41:11.007
> 
> 标签：ios, ruby, rubymotion

我正在试验 cocosmotion，一个 Cocos2d 的 Rubymotion 实现。在我正在学习的教程中，我有一个将结构作为参数的方法。我查阅了 Rubymotion 和 MacRuby 文档，但不知道如何根据我需要的结构实例化一个新对象。我认为主要问题是结构以小写字母开头，当我尝试使用它时，Ruby 认为它是一个局部变量。

我相信我遇到了与此处所述相同的问题： [https ://github.com/MacRuby/MacRuby/issues/121](https://github.com/MacRuby/MacRuby/issues/121)

有解决方案或解决方法吗？

该结构在 Objective-C 中定义如下：

```
 typedef struct _ccTexParams {
         GLuint  minFilter;
         GLuint  magFilter;
         GLuint  wrapS;
         GLuint  wrapT;
 } ccTexParams; 
```

我试图调用的方法需要一个 ccTexParams 结构。

这是我尝试过的：

```
 @mysprite = Pointer.new("{ccTexParams=
            {GLUint=GL_LINEAR_MIPMAP_LINEAR}
            {GLUint=GL_LINEAR}
            {GLUint=GL_CLAMP_TO_EDGE}
            {GLUint=GL_CLAMP_TO_EDGE}}", 4) 
```

当我这样尝试时：

```
 @mysprite = Pointer.new(:object, 4)

        @mysprite[0] = GL_LINEAR_MIPMAP_LINEAR 
        @mysprite[1] = GL_LINEAR
        @mysprite[2] = GL_CLAMP_TO_EDGE
        @mysprite[3] = GL_CLAMP_TO_EDGE 
```

运行时错误是：

```
expected instance of Pointer of type `{_ccTexParams=IIII}', got `@' (TypeError) 
```

我也试过：

```
@mysprite = Pointer.new("_ccTexParams", 4)

        @mysprite[0] = GL_LINEAR_MIPMAP_LINEAR 
        @mysprite[1] = GL_LINEAR
        @mysprite[2] = GL_CLAMP_TO_EDGE
        @mysprite[3] = GL_CLAMP_TO_EDGE 
```

错误：

```
Can't find pointer description for type `_ccTexParams' 
```

我还尝试以多种不同的方式将其替换为 CcTexParams、_ccTexParams 和 ccTexParams，但没有任何版本可用。

我试过这个：

```
@mysprite = CcTexParams.new
@mysprite.minFilter = GL_LINEAR_MIPMAP_LINEAR 
@mysprite.magFilter = GL_LINEAR
@mysprite.wrapS = GL_CLAMP_TO_EDGE
@mysprite.wrapT = GL_CLAMP_TO_EDGE 
```

RubyMotion 抱怨它`expected an instance of Pointer, got '#<CcTexParams minFilter=9987 magFilter=9729 wrapS=33071 wrapT=33071>' (CcTexParams) (TypeError)`

我尝试直接传递`[GL_LINEAR_MIPMAP_LINEAR, GL_LINEAR, GL_CLAMP_TO_EDGE, GL_CLAMP_TO_EDGE]`给该方法。它抱怨它`expected a Pointer but got an Array`。

也许我应该将`ccTexParams`库中的重命名为类似的名称`CCTexParams`？我猜这不是一个理想的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T21:11:39.573

如果有人正在为此寻找解决方案，请尝试[Joybox](http://joybox.io/)。它是 Cocos2D 的包装器。

> Joybox 结合了最流行和广泛使用的 iOS 2D 游戏引擎 Cocos2D，折叠在令人惊叹的 Box2D 物理引擎中，然后将它们包装成一个干净的 Ruby API，这将使初学者和专家都更快、更愉快地进行游戏开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:14:06.657

您将需要为您的框架生成的 bridgesupport 文件。请参见：

[https://github.com/MacRuby/MacRuby/wiki/MacRuby-Tutorial](https://github.com/MacRuby/MacRuby/wiki/MacRuby-Tutorial)

并查看“访问静态 API”部分。那应该为您指明正确的方向。

# c++ - 我不断收到 C++ 函数的调试错误。我不确定我做错了什么

> ID：12886352
> 
> 赞同：1
> 
> 时间：2012-10-14T20:41:34.657
> 
> 标签：c++, function

**嗨，我对编程很陌生，对于这个程序，我应该能够通过使用函数来计算某人的每月费用。当我编译它时它很好，但是当我尝试调试时它说我失败了，所以我不知道我做错了什么。这是我的代码：**

//这个程序计算用户的每月费用

```
#include <iostream>
#include <iomanip>

using namespace std;

//function prototypes
void showpackage();
void calculatePkg_A (int,int,int);
void calculatePkg_B (int,int,int);
void calculatePkg_C (int,int,int);

int main ()
{
    int inputPackage; //package choice
    double inputHours; //number of hours

    //constants for package choice
    const int pkg_A = '1' ,
               pkg_B = '2',
               pkg_C = '3';
     const char quit_choice = 'Q' || 'q';
    //constants for cost of package
    const int cost_A = 15,
              cost_B = 20,
              cost_C = 25;
    //constants for package access time
    const int hours_A = 50,
              hours_B = 100,
              hours_C = 150;
    cout << fixed << showpoint << setprecision (2);
    do
    { //display package options. 
        showpackage();
        cin >> inputPackage;

        //validate package selection
        while (inputPackage < pkg_A || inputPackage > pkg_C || inputPackage != quit_choice )
        {
            cout << "Please enter a valid package choice:";
            cin >> inputPackage;
        }
        //If user does not want to quit, proceed.
if (inputHours < 0 || inputHours > 720 || inputPackage != quit_choice)
        {
            //get the number of hours used
            cout << "How many hours were used?";
            cin >> inputHours;

                //display the total charges
                switch (inputPackage)
                {
                case pkg_A:
                    calculatePkg_A (cost_A, hours_A, inputHours);
                    break;
                case pkg_B:
                    calculatePkg_B (cost_B, hours_B, inputHours);
                    break;
                case pkg_C:
                    calculatePkg_C (cost_C, hours_C, inputHours);
                    break;
                }
            }
    } while (inputPackage != quit_choice);

            return 0;
}

//definition of function showPackage which displays package options

void showPackage()
{cout <<"An Internet service provider has three different packages for its customers: \n"
<<"1.Package A: For $15 per month with 50 Hours of access provided, additional hours \n"
<<"are $2.00 per hour over 50 hours.\n"
<<"2.Package B: For $20 per month with 100 Hours of access provided, additional hours \n"
<<"are $1.50 per hour over 100 hours.\n"
<<"3.Package C: For $25 per month with 150 Hours of access provided, additional hours \n"
<<"are $1.00 per hour over 150 hours.\n"
<<"Enter your choice either 1,2, or 3:";
}

//defintion of function calculatePkg_A. Displays total charges.

void calculatePkg_A (int cost_A, int hours_A, int inputHours)
    {
        cout << "The total charges are $"
             << (cost_A += (inputHours - hours_A) * 2) << endl;
}

//
//defintion of function calculatePkg_B. Displays total charges.
//

void calculatePkg_B (int cost_B, int hours_B, int inputHours)
    {
        cout << "The total charges are $"
             << (cost_B += (inputHours - hours_B) * 1.5) << endl;
}

//defintion of function calculatePkg_C. Displays total charges.

void calculatePkg_C (int cost_C, int hours_C, int inputHours)
    {
        cout << "The total charges are $"
             << (cost_C += (inputHours - hours_C)) << endl;
} 
```

**但是每当我尝试调试它时，我都会不断收到错误消息：**

```
1>Program5.obj : error LNK2019: unresolved external symbol "void __cdecl calculatePkg_C(double,double,double)" (?calculatePkg_C@@YAXNNN@Z) referenced in function _main
1>Program5.obj : error LNK2019: unresolved external symbol "void __cdecl showpackage(void)" (?showpackage@@YAXXZ) referenced in function _main
    1>C:\Users\charlotte\Desktop\program5\Debug\program5.exe : fatal error LNK1120: 2 unresolved externals 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:46:56.867

错误消息告诉我们您已声明`calculatePkg_C(double,double,double)`但已实施`calculatePkg_C(int,int,int)`。更改定义中的原型，它应该可以工作。此外，查找具有此原型的函数的声明位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T20:49:52.963

第一个错误是编译器决定您需要将`double`类型传递给`calculatePkg_C`. 它期望：

```
calculatePkg_C(double,double,double) 
```

但你的是：

```
calculatePkg_C(int,int,int) 
```

你需要问问自己为什么会这样。您已在顶部声明它，并在下面正确定义它。有什么你没有展示的吗？我注意到你正在通过`inputHours`这是一个`double`. 尝试将其转换为`int`.

另一个错误是`showPackage`。您的声明（和用法）大写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:43:29.933

您需要检查每种构建类型的构建属性。包含您的`caclulatePkg_C()`和`showpackage()`方法的源文件在您的发布配置中，但不在您的调试配置中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-21T13:08:36.983

我确信您将三个函数声明为在其原型中采用三个 int 参数：

```
void calculatePkg_A (int,int,int);
void calculatePkg_B (int,int,int);
void calculatePkg_C (int,int,int); 
```

但你肯定会传递一个 double 作为第三个参数，因为你声明：

```
double inputHours; //number of hours 
```

我不建议在这里进行任何强制转换，如果必须保留函数原型，最好将其声明为整数。

在 showpackage 实现中，请记住 C/C++ 有区分大小写的 sintax，因此您应该编写：

```
//definition of function showPackage which displays package options

void showPackage()
{
...
} 
```

# tree - Primefaces3 更新上下文菜单树

> ID：12886359
> 
> 赞同：1
> 
> 时间：2012-10-14T20:42:34.357
> 
> 标签：tree, primefaces, contextmenu

每次单击不同的树项时更新 ContextMenu 有什么想法吗？

我的意思是我想动态更新 ContextMenu，例如，当我右键单击树的根时，菜单选项可能是“菜单项 1”、“菜单项 2”和“菜单项 3”。但是，如果我右键单击树的叶子，菜单选项可能是“菜单项 4”、“菜单项 5”和“菜单项 6”。

我尝试了几种不同的方式，但没有一个能像我预期的那样工作。

请给我一些帮助。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:13:55.990

从 Primefaces 文档 (http://www.primefaces.org/documentation.html) 第 446 页：

> **ContextMenu**
> Tree 与上下文菜单有特殊的集成，您甚至可以使用匹配树节点类型的上下文菜单的 nodeType 选项将不同的上下文菜单与不同的树节点匹配。

听起来他们正是您正在寻找的东西。您需要做的就是创建所需的各种菜单并设置“nodeType”属性。

# c# - Metro 应用程序中的 FTP

> ID：12886362
> 
> 赞同：3
> 
> 时间：2012-10-14T20:43:19.477
> 
> 标签：c#, ftp, windows-8, microsoft-metro

我正在尝试在 Metro 和 C# 中创建一个 FTP 应用程序，但 System.Net 中的 FTP 类已被删除，现在我无法弄清楚如何做到这一点。我查看了 BackgroundUploader，但不明白如何恢复目录结构等。

有没有人有这样做的经验，我知道这是可以实现的，因为 Windows Store 上已经有一个应用程序可用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T12:19:18.830

我还没有检查它，因为我刚刚开始寻找它。在本文中，他们分享了 C# 中的 FTP 示例。

[http://code.msdn.microsoft.com/windowsapps/CSWindowsStoreAppFTPDownloa-88a90bd9](http://code.msdn.microsoft.com/windowsapps/CSWindowsStoreAppFTPDownloa-88a90bd9)

问候， 香草

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:03:44.337

看看[http://www.dreamincode.net/forums/topic/35902-create-an-ftp-class-library-in-c%23/](http://www.dreamincode.net/forums/topic/35902-create-an-ftp-class-library-in-c%23/)。它是使用套接字的 FTP 客户端的 C# 实现，除非您有高级要求，否则这对您来说可能就足够了。

如果您需要更多，您可以随时扩展他的示例！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-29T08:13:51.557

请在下面查看此示例。与 Microsoft 示例的不同之处在于套接字的使用： - [Windows 8.1 套接字：C# 中的 Ftp 客户端示例](http://code.msdn.microsoft.com/Windows-8-SocketsFtp-4fc23b33)

# c++ - 当我们为它分配负值时，为什么 char 数据类型的行为类似于 int 数据类型？

> ID：12886364
> 
> 赞同：0
> 
> 时间：2012-10-14T20:43:29.963
> 
> 标签：c++

我知道，当我们为无符号数据类型分配负值时，它的二进制补码会被存储，即数据类型可以存储的最大值减去我们分配的负值。为了测试这一点，我编写了一个程序来说明这一点，但是我无法理解 char 数据类型的行为。

```
#include <iostream>
using namespace std;

template<class T>
void compare(T a,T b)
{
    cout<<dec<<"a:"<<(int)a<<"\tb:"<<(int)b<<endl; //first line
    cout<<hex<<"a:"<<(int)a<<"\tb:"<<(int)b<<endl; //second line

    if(a>b)
        cout<<"a is greater than b"<<endl;
    else
        cout<<"b is greater than a"<<endl;
}

int main()
{
    unsigned short as=2;
    unsigned short bs=-4;
    compare(as,bs);

    unsigned int al = 2;
    unsigned int bl =-4;
    compare(al,bl);

    char ac=2;
    char bc=-4;
    compare(ac,bc);

    int ai =2;
    int bi =-4;
    compare(ai,bi);
} 
```

输出是

```
a:2     b:65532
a:2     b:fffc
b is greater than a
a:2     b:-4
a:2     b:fffffffc
b is greater than a
a:2     b:-4
a:2     b:fffffffc
a is greater than b
a:2     b:-4
a:2     b:fffffffc
a is greater than b 
```

使用不同数据类型的参数多次调用 compare(...) 函数

1.  **unsigned short- 2 字节**，因此 -4 存储为 65532。
2.  **unsigned int - 4 bytes**，但是当我们在输出时尝试将其类型转换为 int 时，它在输出中显示为 -4，因此它欺骗了编译器，但是十六进制输出和逻辑比较结果表明内部表示是在两个人的恭维。
3.  **char-1 字节**，这是*我感到困惑*的地方。
4.  **int - 4 bytes**，有符号数据类型，没有意外，正常结果。

我要问的问题是为什么 char 表现得像一个有符号的 int？即使我们在输出结果的第一行之前将类型转换为 int，为什么 char 显示的值类似于 int，即使 char 是 1 字节而 int 是 4 字节。unsigned short 显示不同的值，因为它的内存要求是 2 字节。unsigned int 和 int 在结果的第一行显示相同的结果，因为两者都是 4 个字节，编译器被成功欺骗，并且是可以接受的。但是为什么char也显示相同的值，好像它的内存布局和int一样呢？

并且逻辑比较还表明 char 不是无符号数据类型，而是有符号数据类型。无符号数据类型显示 b 大于一。虽然 char 显示 a 大于 b ，但就带符号数据类型而言。为什么？

char 不是 1 字节无符号数据类型吗？这是我在 B.Tech 学位上学习 C 和 C++ 课程时学到的。

任何解释都会有所帮助。使用的编译器是 mingw 2.19.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:46:10.227

> char 不是 1 字节无符号数据类型吗？

也许，也许不是。的签名`char`是实现定义的。

在您当前的实现中，它显然是签名的。

在该`compare`方法的输出中，您会看到显示的四个字节，因为您将其转换`int`为输出，因此`char`value`-4`被转换为`int`value `-4`。

# ruby - yahoofinance ruby api返回值问题

> ID：12886368
> 
> 赞同：0
> 
> 时间：2012-10-14T20:43:50.713
> 
> 标签：ruby, core

我知道加入数组和字符串，但这个问题对于我正在处理的 api 来说非常具体：

我想要的只是数组中的所有 hq.close 值。例如：

```
[
 {'GOOG' => [744.75,751.48,744.56,744.09,757.84]},
 {'MSFT' => {value1,value2, .....}}
] 
```

我无法获得上述哈希数组的原因是因为当我将 hq.close 放入其打印单个值时，我不确定如何将所有 hq.close 放入一个数组中

根据下面的代码，我的输出是行分隔的：（但我希望它采用上述格式）

```
GOOG -> 744.75
GOOG -> 751.48
GOOG -> 744.56
GOOG -> 744.09
GOOG -> 757.84
MSFT -> 29.2
MSFT -> 28.95
MSFT -> 28.98
MSFT -> 29.28
MSFT -> 29.78 
```

+++++++++++++++++++++++++++++++代码：

```
require 'yahoofinance'
#Stock symbols
user_input = ['GOOG','MSFT']

user_input.each do|symb|
 YahooFinance::get_HistoricalQuotes( symb,
                                     Date.parse('2012-10-06'),
                                     Date.today()) do |hq|
   puts "#{symb} -> #{hq.close}"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:37:01.870

您可以[注入](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)每个值来构建您的哈希：

```
require 'yahoofinance'

company_symbols = ['GOOG','MSFT']
start_date = Date.parse('2012-10-06')
stop_date = Date.today()

company_symbols.inject({}) do |memo, value|
  memo[value] ||= []
  YahooFinance.get_HistoricalQuotes(value, start_date, stop_date) do |hq|
    memo[value] << hq.close
  end
  memo
end
# => {"GOOG"=>[744.75, 751.48, 744.56, 744.09, 757.84], "MSFT"=>[29.2, 28.95, 28.98, 29.28, 29.78]} 
```

# php - Highcharts 饼图切片错误

> ID：12886370
> 
> 赞同：2
> 
> 时间：2012-10-14T20:44:13.473
> 
> 标签：php, jquery, mysql, highcharts

非常感谢您阅读本文，如果我的英语不是很好，我深表歉意。

好吧，我正在尝试做一个高图饼图，但标签没有出现，只有数字。我一直在寻找，但我找不到答案，我是新来的。

这是我的 data_2.php 文件：

```
<?php 

$con = mysql_connect("localhost","root",""); 

if (!$con) {   die('Could not connect: ' . mysql_error()); } 

mysql_select_db("pymesonline", $con); 

$result = mysql_query("SELECT descripcion_p, sum(cantidad_vendida) FROM venta_producto GROUP BY descripcion_p"); 

    while($row = mysql_fetch_array($result)) {
        echo $row['descripcion_p'] . "\t" . $row['sum(cantidad_vendida)']. "\n"; } 
    mysql_close($con); 

?> 
```

这是我的脚本：

```
var a = jQuery.noConflict();
a(document).ready(function(){

var chart;
var options = {
                    chart: {
                        renderTo: 'container',
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    },

                    title: {
                        text: 'Productos Mas Vendidos',
                        x: -20 //center
                    },

                    subtitle: {
                        text: 'Historico',
                        x: -20
                    },

                    series: [{
                        type: 'pie',
                        name: 'Cantidad Vendida',

                        }]

                    }

    jQuery.get('clases/data_2.php', null, function(tsv) {
                    var lines = [];
                    traffic = [];
                    try {
                        // split the data return into lines and parse them
                        tsv = tsv.split(/\n/g);
                        jQuery.each(tsv, function(i, line) {
                            line = line.split(/\t/);
                            date = Date.parse(line[0]);
                            traffic.push([
                                date,
                                parseInt(line[1].replace(',', ''), 10)
                            ]);
                        });
                    } catch (e) {  }
                    options.series[0].data = traffic;
                    chart = new Highcharts.Chart(options);
                });
}); 
```

结果是这样，我不知道出了什么问题，一切都很好，除了标签。我非常感谢您的帮助，非常感谢。

[这是结果](http://www.mediafire.com/conv/b277ade252e71e50dc1fcc5f2433f926633a1badb8a64fe75af6eb63907962f96g.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:06:15.290

Maybe you need add series of a data name:

```
 options.series[0].data = traffic;
        options.series[1].data = traffic1;
        chart = new Highcharts.Chart(options); 
```

And put a series of name in a array of options:

```
 var options = {

    series: [{
                    name: 'Saldo'
                },{
                    name: 'Saldo1'
                }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:30:23.807

好吧，我投降了。

我这样做

```
 series: [{
        type: 'pie',
        name: 'Cantidad Vendida',
        data: [
            <?php 
                $con = mysql_connect("localhost","root",""); 
                if (!$con) {   die('Could not connect: ' . mysql_error()); } 
                    mysql_select_db("pymesonline", $con); 
                    $result = mysql_query("SELECT descripcion_p, sum(cantidad_vendida) FROM venta_producto GROUP BY descripcion_p"); 
                while($row = mysql_fetch_array($result)) {
                echo "["."'".$row['descripcion_p']."'"."," . $row['sum(cantidad_vendida)']."]".","."\n"; 
                } 
                mysql_close($con); 
                ?>
        ]
    }] 
```

它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T08:11:28.720

伊格纳西奥

我遇到了同样的问题，终于解决了——你不应该使用 jQuery.get() 函数来提取 JSON 对象，而应该使用 jQuery.getJSON() 。

你可以google一下这两个函数的区别。

# oracle - 多个可能的列匹配上的 Oracle 自联接 - CONNECT BY？

> ID：12886371
> 
> 赞同：3
> 
> 时间：2012-10-14T20:44:57.657
> 
> 标签：oracle, self-join, connect-by

我有一个来自----的查询要求。试图用 解决它`CONNECT BY`，但似乎无法得到我需要的结果。

**表（简化）：**

```
create table CSS.USER_DESC (
    USER_ID          VARCHAR2(30) not null,
    NEW_USER_ID      VARCHAR2(30),
    GLOBAL_HR_ID     CHAR(8)
)

-- USER_ID       is the primary key
-- NEW_USER_ID   is a self-referencing key
-- GLOBAL_HR_ID  is an ID field from another system 
```

有两种用户数据来源（数据馈送）...在更新信息时，我必须注意其中任何一个中的错误。

场景：

1.  一个用户被赋予了一个新的用户 ID... 旧记录被相应地设置并被停用（通常为成为全职的承包商重命名）
2.  用户离开并稍后返回。HR 未能将旧用户 ID 发送给我们，以便我们可以连接帐户。
3.  系统搞砸了，没有在旧记录上设置新的用户 ID。
4.  数据可能以其他一百种方式变坏

我需要知道以下是同一个用户，我不能依赖名称或其他字段......它们在匹配记录中有所不同：

```
ROOTUSER    NUMROOTS   NODELEVEL  ISLEAF    USER_ID    NEW_USER_ID  GLOBAL_HR_ID   USERTYPE      LAST_NAME         FIRST_NAME  
-----------------------------------------------------------------------------------------------------------------------------
EX0T1100    2          1          0         EX0T1100   EX000005                    CONTRACTOR    VON DER HAAVEN    VERONICA    
EX0T1100    2          2          1         EX000005                00126121       EMPLOYEE      HAAVEN, VON DER   VERONICA    
GL110456    1          1          1         GL110456                00126121       EMPLOYEE      VONDERHAAVEN      VERONICA 
```

`EXOT1100`并`EX000005`通过`NEW_USER_ID`现场正确连接。重命名发生在全球 HR ID 之前，因此`EX0T1100`没有。 `EX000005`被赋予了一个新的用户 ID，“GL110456”，并且两者仅通过具有相同的全局 HR ID 来连接。

清理数据不是一种选择。

到目前为止的查询：

```
select connect_by_root cud.user_id RootUser, 
       count(connect_by_root cud.user_id) over (partition by connect_by_root cud.user_id) NumRoots, 
       level NodeLevel, connect_by_isleaf IsLeaf, --connect_by_iscycle IsCycle,
       cud.user_id, cud.new_user_id, cud.global_hr_id,
       cud.user_type_code UserType, ccud.last_name, cud.first_name
from   css.user_desc cud
where  cud.user_id in ('EX000005','EX0T1100','GL110456')
-- Using this so I don't get sub-users in my list of root users...
-- It complicates the matches with GLOBAL_HR_ID, however
start with cud.user_id not in (select cudsub.new_user_id 
                               from   css.user_desc cudsub 
                               where  cudsub.new_user_id is not null)
connect by nocycle (prior new_user_id = user_id); 
```

我尝试了各种`CONNECT BY`条款，但没有一个是完全正确的：

```
-- As a multiple CONNECT BY
connect by nocycle (prior global_hr_id = global_hr_id)
connect by nocycle (prior new_user_id  = user_id)

-- As a compound CONNECT BY
connect by nocycle ((prior new_user_id = user_id)
                     or (prior global_hr_id = global_hr_id 
                         and user_id != prior user_Id)) 
```

UNIONing 两个 CONNECT BY 查询不起作用......我没有得到调平。

这是我想看到的...我可以接受我必须区分并用作子查询的结果集。我也可以接受 ROOTUSER 列中的三个用户 ID 中的任何一个......我只需要知道他们是相同的用户。

```
ROOTUSER    NUMROOTS   NODELEVEL  ISLEAF    USER_ID    NEW_USER_ID  GLOBAL_HR_ID   USERTYPE      LAST_NAME         FIRST_NAME  
-----------------------------------------------------------------------------------------------------------------------------
EX0T1100    3          1          0         EX0T1100   EX000005                    CONTRACTOR    VON DER HAAVEN    VERONICA    
EX0T1100    3          2          1         EX000005                00126121       EMPLOYEE      HAAVEN, VON DER   VERONICA    
EX0T1100    3         (2 or 3)    1         GL110456                00126121       EMPLOYEE      VONDERHAAVEN      VERONICA 
```

想法？

**更新**

Nicholas，您的代码看起来非常像正确的轨道......目前，当为空时，`lead(user_id) over (partition by global_hr_id)`得到错误命中。`global_hr_id`例如：

```
USER_ID   NEW_USER_ID   CHAINNEWUSER   GLOBAL_HR_ID   LAST_NAME   FIRST_NAME
FP004468                FP004469                      AARON       TIMOTHY
FP004469                                              FOONG       KOK WAH 
```

我经常想将空值视为分区中的单独记录，但我从来没有找到一种方法来`ignore nulls`工作。这做了我想要的：

```
decode(global_hr_id,null,null,lead(cud.user_id ignore nulls) over (partition by global_hr_id order by user_id) 
```

...但必须有更好的方法。我还没有能够完成对完整用户数据（大约 40,000 个用户）的查询。`global_hr_id`和都`new_user_id`被索引。

**更新**

查询在大约 750 秒后返回……很长，但易于管理。它返回 93k 记录，因为我没有从根目录中过滤级别 2 命中的好方法 - 你有`start with global_hr_id is null`，但不幸的是，情况并非总是如此。我将不得不考虑更多关于如何过滤掉这些内容。

我之前尝试过添加更复杂的 start with 子句，但我发现它们单独运行 < 1 秒......一起，它们需要 90 分钟 >.<

再次感谢您的帮助...为此而步履蹒跚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:38:06.270

您只为一位用户提供了数据样本。多一点会更好。无论如何，让我们看看这样的事情。

```
SQL> with user_desc(USER_ID, NEW_USER_ID,  GLOBAL_HR_ID)as(
  2    select 'EX0T1100',  'EX000005',  null          from dual union all
  3    select 'EX000005',   null,       00126121      from dual union all
  4    select 'GL110456',   null,       00126121      from dual
  5  )
  6  select connect_by_root(user_id) rootuser
  7       , count(connect_by_root(user_id)) over(partition by connect_by_root(user_id)) numroot
  8       , level nodlevel
  9       , connect_by_isleaf
 10       , user_id
 11       , new_user_id
 12       , global_hr_id
 13    from (select user_id
 14               , coalesce(new_user_id, usr) new_user_id1
 15               , new_user_id
 16               , global_hr_id
 17            from ( select user_id
 18                        , new_user_id
 19                        , global_hr_id
 20                        , decode(global_hr_id,null,null,lead(user_id) over (partition by global_hr_id order by user_id)) usr
 21                    from user_desc
 22                 )
 23         )
 24  start with global_hr_id is null
 25  connect by prior new_user_id1 = user_id
 26  ; 
```

结果：

```
ROOTUSER    NUMROOT   NODLEVEL CONNECT_BY_ISLEAF USER_ID  NEW_USER_ID GLOBAL_HR_ID
-------- ---------- ---------- ----------------- -------- ----------- ------------
EX0T1100          3          1                 0 EX0T1100 EX000005    
EX0T1100          3          2                 0 EX000005                   126121
EX0T1100          3          3                 1 GL110456                   126121 
```

# excel - VBA根据另一个工作表更新一个工作表中的Excel列

> ID：12886380
> 
> 赞同：0
> 
> 时间：2012-10-14T20:46:10.197
> 
> 标签：excel, vba

我有两个工作表。第一个工作表有一个项目编号和项目名称。第二个工作表也有一个项目编号和一个项目名称。第一个工作表中的项目名称不正确，需要使用第二个工作表中的项目名称进行更新。所以：

```
Worksheet 1:
ProjectId     ProjectName
1             Apple
2             Orange
3             Banana

Worksheet 2:
ProjectId     ProjectName
1             Chicken
2             Bacon
3             Beef 
```

我需要创建一个宏，它只运行工作表 2 中的行，根据项目 ID 匹配工作表 1，然后使用工作表 2 中的 ProjectName 更新工作表 1 中的 ProjectName。

如何使用 VBA 遍历行，匹配 ProjectID，并使用 Worksheet 2 中的 ProjectNames 更新 Worksheet 1 中的 ProjectNames？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:59:42.627

正如 Eduardo 所说，只需像这样使用 VLOOKUP：

*   将 Worksheet 1 上 ProjectName 的内容替换为与此类似的函数（但适用于您的特定工作簿）：

`=VLOOKUP(A2, sheet2!$A$2:$B$100, 2, 0)`

然后把这个公式拖下来。如果这是最终结果，您可能希望仅复制并粘贴特殊值，以便此数据之后保持不变。

# snmp - 获取 MIB 编译错误：序列和行应该有相关的名称

> ID：12886382
> 
> 赞同：0
> 
> 时间：2012-10-14T20:46:35.550
> 
> 标签：snmp, mib

在我写的 MIB 上，我收到了错误

```
 Warning 10 : Sequence "XxxSequence" and Row "xxxEntry" should have related names 
```

*smilint*没有给出任何错误，而*net-snmp*似乎也不在乎。

有没有人暗示这个错误意味着什么，或者如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:59:36.590

我在这里遇到麻烦的原因是您似乎必须在 OBJECT-TYPE 条目之后有 SEQUENCE 条目。

xxxEntry OBJECT-TYPE SYNTAX XxxEntry ...

XxxEntry ::= 序列 { ... }

如果您的订单中没有它们，那么*smilint*会给您一个*仅因情况而异的*警告。

*smilint*似乎并不关心*相关名称*警告。

# delphi - TCP 客户端未收到来自 RTSP 服务器的响应

> ID：12886383
> 
> 赞同：6
> 
> 时间：2012-10-14T20:46:38.107
> 
> 标签：delphi, sockets, delphi-xe2, rtsp, tcp-ip

在 Delphi XE2 中，我使用该`TTCPClient`组件与 RTSP 服务器进行通信。经过反复试验，没有从服务器得到响应，我将项目切换为通过端口 80（而不是 RTSP 的 554）发送 HTTP 请求，并尝试向网站（特别是 www.google.com）发送请求。我仍然没有得到任何回应。

我`TTCPClient`在主窗体 ( `Form1`) 上有一个名为的组件`Client`、一个名为 的`TMemo`控件`Log`、一个`TEdit`名为的控件`txtHost`和一个`TBitBtn`控件。以下是代码的相关部分：

**连接到服务器**

```
procedure TForm1.BitBtn1Click(Sender: TObject);
begin
  if Client.Active then Client.Disconnect;
  Client.RemoteHost:= txtHost.Text;
  Client.RemotePort:= '80'; // '554';
  Client.Connect;
end; 
```

**OnConnect 事件处理程序 (HTTP)**

```
procedure TForm1.ClientConnect(Sender: TObject);
var
  S: String;
begin
  Client.Sendln('GET / HTTP/1.0');
  Client.SendLn('');
end; 
```

**OnConnect 事件处理程序 (RTSP)**

```
procedure TForm1.ClientConnect(Sender: TObject);
var
  S: String;
begin
  Client.SendLn('OPTIONS * RTSP/1.0');
  Client.SendLn('CSeq:0');
  Client.SendLn('');
end; 
```

**OnReceive 事件处理程序**

```
procedure TForm1.ClientReceive(Sender: TObject; Buf: PAnsiChar;
  var DataLen: Integer);
var
  S, R: String;
begin
  S:= Client.Receiveln;
  while S <> '' do begin
    R:= R+ S;
    S:= Client.Receiveln;
  end;
  Log.Lines.Append('> RECEIVED ' + R);
end; 
```

**OnError 事件处理程序**

```
procedure TForm1.ClientError(Sender: TObject; SocketError: Integer);
begin
  Log.Lines.Append('> ERROR '+IntToStr(SocketError));
end; 
```

该`OnReceive`事件永远不会被调用，我连接的任何服务器都没有返回任何内容。

我在这里做错了什么？

**参考**

这些是我引用的一些链接：

*   [http://effbot.org/zone/socket-intro.htm](http://effbot.org/zone/socket-intro.htm)
*   [http://www.ietf.org/rfc/rfc2326.txt](http://www.ietf.org/rfc/rfc2326.txt)
*   [http://folk.uio.no/meccano/reflector/smallclient.html](http://folk.uio.no/meccano/reflector/smallclient.html)
*   [http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/reference/rtsp_specification.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/reference/rtsp_specification.html)

我正在使用的相机是`Grandstream GXV3601LL`

**更新**

我得出的结论是问题出在 RTSP 服务器上，并在 Grandstream 网站的论坛上提出了问题。该代码确实适用于其他服务器连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T21:06:20.400

This works for me, it depends if you are in blocking mode or not:

```
unit Unit11;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Sockets, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient, StdCtrls;

type
  TForm1 = class(TForm)
    IdTCPClient1: TIdTCPClient;
    TcpClient1: TTcpClient;
    Memo1: TMemo;
    procedure TcpClient1Connect(Sender: TObject);
    procedure TcpClient1Receive(Sender: TObject; Buf: PAnsiChar; var DataLen: Integer);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
 TcpClient1.BlockMode := bmBlocking;
 TcpClient1.RemoteHost := 'www.google.com';
 TcpClient1.RemotePort := '80';
 TcpClient1.Connect;
end;

procedure TForm1.TcpClient1Connect(Sender: TObject);

var s : string;

begin
 memo1.Lines.Add('connected');
 TcpClient1.Sendln('GET /');
 s := TcpClient1.Receiveln;
 memo1.Lines.Add(S);
end;

end. 
```

**EDIT**

here is a real world example with a RTSP server (youtube in this case) I used Indy IdTcpClient

```
unit Unit11;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Sockets, IdBaseComponent, IdComponent, IdTCPConnection, IdTCPClient, StdCtrls;

type
  TForm1 = class(TForm)
    Memo1: TMemo;
    Client: TIdTCPClient;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);

var s : string;

begin
 Client.Host := 'v5.cache6.c.youtube.com';
 Client.Port := 554;
 Client.Connect;
 Client.IOHandler.Writeln('OPTIONS * RTSP/1.0');
 Client.IOHandler.Writeln('CSeq: 1');
 Client.IOHandler.Writeln('');

 s := Client.IOHandler.ReadLn;
 Memo1.Lines.Add(s);
 s := Client.IOHandler.ReadLn;
 Memo1.Lines.Add(s);
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T21:28:48.803

`OnReceive`未调用事件的原因`TTCPClient`是它**不是**异步组件，就像您试图处理它一样。该`OnReceive`事件的工作方式与旧**事件**`TClientSocket.OnRead`不同。该`OnReceive`事件`ReceiveBuf()`仅在方法内部调用（内部`ReceiveLn()`调用`ReceiveBuf()`）。传递给`OnReceive`事件的数据与`ReceiveBuf()`方法在输出时返回的数据相同。您有一个 catch-22 情况 - 您在调用之前正在等待`OnReceive`事件`ReceiveLn()`，但`OnReceive`在您先调用之前不会被触发`ReceiveLn()`。如果要`TTCPClient`异步使用，则必须调用它`ReceiveLn()`定期方法，无论是在计时器还是工作线程中，而**不是**在`OnReceive`事件内部。

该`TTCPClient`组件是 Kylix 旧 CLX 框架的一部分。它不是 VCL 的一部分，甚至不是 FireMonkey，不应再使用。要么使用旧`TClientSocket`组件（已弃用但仍然可用），要么更改为另一个组件库，例如 Indy。

# java - 有人可以逐步解释此代码吗？

> ID：12886384
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:46:40.687
> 
> 标签：java, 2d, textures, symbols

我有点理解它在做什么，但是下面提供的代码中的步骤背后的逻辑是什么？这是在 LWJGL 中加载纹理的一种方式。但是 for 循环中发生了什么？你不会只是将 x 和 y 相乘来得到一个像素的位置吗？对从 for 循环到代码末尾发生的任何事情的任何解释都会有所帮助，因为当它到达 for 循环时，注释会变得含糊不清。将像素信息放入缓冲区时，我不明白奇怪的符号。

```
public class TextureLoader { 
private static final int BYTES_PER_PIXEL = 4;//3 for RGB, 4 for RGBA 
   public static int loadTexture(BufferedImage image){ 

      int[] pixels = new int[image.getWidth() * image.getHeight()]; 
        image.getRGB(0, 0, image.getWidth(), image.getHeight(), pixels, 0, image.getWidth()); 

        ByteBuffer buffer = BufferUtils.createByteBuffer(image.getWidth() * image.getHeight() * BYTES_PER_PIXEL); //4 for RGBA, 3 for RGB 

        for(int y = 0; y < image.getHeight(); y++){ 
            for(int x = 0; x < image.getWidth(); x++){ 
                int pixel = pixels[y * image.getWidth() + x]; 
                buffer.put((byte) ((pixel >> 16) & 0xFF));     // Red component 
                buffer.put((byte) ((pixel >> 8) & 0xFF));      // Green component 
                buffer.put((byte) (pixel & 0xFF));               // Blue component 
                buffer.put((byte) ((pixel >> 24) & 0xFF));    // Alpha component. Only for RGBA 
            } 
        } 

        buffer.flip(); //FOR THE LOVE OF GOD DO NOT FORGET THIS 

        // You now have a ByteBuffer filled with the color data of each pixel. 
        // Now just create a texture ID and bind it. Then you can load it using  
        // whatever OpenGL method you want, for example: 

      int textureID = glGenTextures(); //Generate texture ID 
        glBindTexture(GL_TEXTURE_2D, textureID); //Bind texture ID 

        //Setup wrap mode 
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE); 
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE); 

        //Setup texture scaling filtering 
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 

        //Send texel data to OpenGL 
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, image.getWidth(), image.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer); 

        //Return the texture ID so we can bind it later again 
      return textureID; 
   } 

   public static BufferedImage loadImage(String loc) 
   { 
        try { 
           return ImageIO.read(DefenseStep.class.getResource(loc)); 
        } catch (IOException e) { 
            //Error Handling Here 
        } 
       return null; 
   } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:52:48.823

它所做的只是将图像中的颜色逐个像素地加载到缓冲区中。

此代码使用 Java 中的按位运算符执行此操作。请参阅此[Java 线索](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

当您看到 时`>>`，这意味着“将该数字的二进制向右移动”，当您看到 时`num >> n`，这意味着“将`num`的值`n`位的二进制向右移动。例如：

```
System.out.println(4 >> 2); // Prints "1" 
```

打印出来`1`是因为二进制中的 4 是`0100`，并且当右移 2 位时，你会得到`0001`，它是十进制的 1。

现在，话虽如此，图像中的颜色使用 ARGB 表示。这意味着图像中的每 32 位都有 8 位专用于 A、R、G 和 B（alpha、红色、绿色和蓝色），因此其十六进制形式如下所示：

```
0xAARRGGBB 
```

其中每个字母都是十六进制数字。

您发布的代码使用二进制逻辑来检索每组`AA`,`RR`等。每组恰好是一个字节或 8 位，所以这就是 8、16 和 24 的来源。`&`对这两个数字进行按位逻辑`AND`运算，其中只有两个数字中为 1 的位位置保持 1，每隔一个位置变为 0。

举个具体的例子，让我们`RR`从 ARGB 中的紫色中检索字节。

在 ARGB 中，黄色是`A=255`、`R=127`、`G=0`和`B=127`，所以我们的十六进制版本是：

```
0xAARRGGBB
0xFF7F007F 
```

查看十六进制值，我们看到它`RR`是倒数第三个字节。要获取`RR`ARGB 值何时在变量中，让我们首先将其放入`int pixel`：

```
int pixel = 0xFF7F007F; 
```

请注意与您的代码的相似之处。`int`像素矩阵中的每一个都是 ARGB 颜色。

接下来，我们将数字右移 2 个`RR`字节，最低字节也是如此，这给了我们：

```
0x0000AARR
0x0000FF7F 
```

这是通过以下代码完成的：

```
int intermediate = pixel >> 16; 
```

这里`16`的原因是我们要右移 2 个字节，每个字节包含 8 位。`>>`运算符需要位，所以我们必须给它 16 而不是 2 。

接下来，我们想摆脱`AA`，但保留`RR`。为此，我们使用所谓的位掩码和`&`运算符。位掩码用于挑选出二进制数的特定位。在这里，我们想要`0xFF`. 这恰好是二进制中的八个 1。（每个`F`十六进制都是`1111`二进制。）

忍受我，因为这看起来很难看。当我们这样做`int red = intermediate & 0xFF`时，它在做什么（二进制）是：

```
 0000 0000 0000 0000 1111 1111 0111 1111 (0x00007F7F)
& 0000 0000 0000 0000 0000 0000 1111 1111 (0x000000FF)
= 0000 0000 0000 0000 0000 0000 0111 1111 (0x0000007F) 
```

请记住，这`&`意味着如果两个输入位均为 1，则结果位仅为 1。

所以我们得到了`red = 0x7F`or `red = 127`，这正是我们上面所得到的。

**编辑：**

> `y`为什么他从, then开始遍历图像的像素`x`，而不是`x`then `y`？当他创建变量时`pixel`，为什么要乘以`y`宽度并添加`x`？不应该只是`x * y`为了获取像素吗？

让我们使用一个简单的 3x3 图像来演示。在 3x3 图像中，您有 9 个像素，这意味着该`pixels`数组有 9 个元素。这些元素是按`getRGB`相对于图像的逐行顺序创建的，因此像素/索引关系如下所示：

```
0 1 2
3 4 5
6 7 8 
```

这些位置对应于用于获取该像素的索引。因此，为了获得图像的左上角像素`(0, 0)`，我使用`pixel[0]`. 为了获得中心像素`(1, 1)`，我使用`pixel[4]`. 为了得到中心像素下的像素`(1, 2)`，我使用`pixel[7]`.

请注意，这会生成图像坐标到索引的 1:1 映射，如下所示：

```
Coord. -> Index
---------------
(0, 0) -> 0
(1, 0) -> 1
(2, 0) -> 2
(0, 1) -> 3
(1, 1) -> 4
(2, 1) -> 5
(0, 2) -> 6
(1, 2) -> 7
(2, 2) -> 8 
```

坐标是`(x, y)`对的，所以我们需要找出一种数学方法将 x 和 y 对转换为索引。

我可以学习一些有趣的数学，但为了简单起见，我不会这样做。让我们从您的提案开始，`x * y`用于获取索引。如果我们这样做，我们会得到：

```
Coord. -> Index
-------------------
(0, 0) -> 0 * 0 = 0
(1, 0) -> 1 * 0 = 0
(2, 0) -> 2 * 0 = 0
(0, 1) -> 0 * 1 = 0
(1, 1) -> 1 * 1 = 1
(2, 1) -> 2 * 1 = 2
(0, 2) -> 0 * 2 = 0
(1, 2) -> 1 * 2 = 2
(2, 2) -> 2 * 2 = 4 
```

这不是我们上面的映射，所以 using`x * y`不起作用。由于我们不能改变`getRGB`像素的顺序，我们*需要*它来匹配上面的映射。

让我们试试他的解决方案。他的方程是`x = y * w`，其中`w`是宽度，在这种情况下为 3：

```
Coord. -> Index
-----------------------
(0, 0) -> 0 + 0 * 3 = 0
(1, 0) -> 1 + 0 * 3 = 1
(2, 0) -> 2 + 0 * 3 = 2
(0, 1) -> 0 + 1 * 3 = 3
(1, 1) -> 1 + 1 * 3 = 4
(2, 1) -> 2 + 1 * 3 = 5
(0, 2) -> 0 + 2 * 3 = 6
(1, 2) -> 1 + 2 * 3 = 7
(2, 2) -> 2 + 2 * 3 = 8 
```

看看映射如何与上面的映射对齐？这就是我们想要的。基本上`y * w`这里所做的是跳过数组中的第一个像素，这与跳过像素行`y * w`完全相同。`y`然后通过迭代`x`，我们正在迭代当前行的每个像素。

如果从上面的解释中不清楚，我们迭代`y` *then* `x`因为像素是按水平 ( ) 顺序逐行添加到数组中的`x`，所以内部循环应该迭代该`x`值，这样我们就不会跳来跳去. 如果我们使用相同的`y * w + x`，那么迭代`x`then`y`将导致迭代进行`0`, `3`, `6`, `1`, `4`, `7`, `2`, `5`, `8`, 这是不可取的，因为我们需要以与像素数组相同的顺序将颜色添加到字节缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:52:19.457

每个像素由一个 32 位整数表示。该整数的最左边八位是它的 alpha 分量，然后是红色，然后是绿色，最后是蓝色。

`(pixel >> 16) & 0xFF`将整数向右移动 16 位，因此其中最右边的 8 位现在是红色分量。然后它使用位掩码将所有其他位设置为零，因此您只剩下红色组件。相同的逻辑适用于其他组件。

[进一步阅读。](https://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:52:55.397

**您所指的**奇怪符号是移位运算符，我认为是按位与运算符。****

 **`>> n`右移 n 位

`&& 0xFF`意味着你取给定二进制值的最低 8 位

简而言之：for 循环将`pixel`变量分解为 4 个不同的 8 位部分：最高 8 位是**alpha**，第二个是**red**，第三个是**green**，最后一个是**blue**

所以这是 32 位的映射：

AAAAAAAARRRRRRRRGGGGGGGGBBBBBBBBB

在哪里：

*   答：阿尔法
*   R：红色
*   G：绿色
*   B：蓝色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T20:58:05.980

RGBA 的每个分量（红色、绿色、蓝色、alpha）都有 256 = 2^8（= 1 个字节）不同的值。连接每个组件产生一个 32 位二进制字符串，for 循环将其按字节加载到缓冲区中。**

# java - Hibernate：在双向有序树中打乱子节点

> ID：12886389
> 
> 赞同：1
> 
> 时间：2012-10-14T20:48:02.227
> 
> 标签：java, hibernate, orm, tree, hbm

我有一个基本的树结构，由一个简单的`Node`类组成，双向链接到它的单亲*（根节点可以为空）*和一个有序的子列表：

```
public class Node {
    private Integer xid;
    private Node parent;
    private List<Node> children;
    // getters and setters...
} 
```

我使用休眠将其映射到以下简单的数据库表：

```
 > select * from node;
 xid | parent | xorder 
-----+--------+--------
   1 |   NULL |      0
   2 |      1 |      0
   3 |      1 |      1
   4 |      1 |      2
(4 rows) 
```

使用以下`.hbm`休眠映射文件：

```
<class name="Node" table="node">
    <id name="xid" type="int">
        <generator class="native" />
    </id>
    <many-to-one name="parent" />
    <list name="children" table="node">
        <key column="parent" />
        <list-index column="xorder" />
        <one-to-many class="Node" />
    </list>
</class> 
```

但是，当我尝试使用以下代码在一个父级中打乱元素顺序时：

```
@Transactional
public void testNode() {
    Node parent = (Node) getSession().get(Node.class, 1);
    Node child0 = parent.getChildren().remove(0);
    parent.getChildren().add(1, child0); // Swap first and second child
    getSession().update(parent);
} 
```

当休眠刷新事务时出现异常：（`org.hibernate.exception.ConstraintViolationException ... set parent=null, xorder=null where parent='1' and xid='2'`）：基本上更新尝试设置`xorder`为`null`，这显然是数据库模式禁止的。

我在 hbm 映射上尝试了许多组合，但没有成功。当我设置`<list>`为休眠时`inverse="true"`不做任何更新，设置元素也无济于事。`insert="false" update="false"``<many-to-one>`

我可能在这里错过了一些东西，无论是在`hbm`映射中还是在我的代码中，我的感觉是它应该很明显......知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:01:10.493

[更新]

以前的答案不正确。我认为违反约束是因为 parent 被设置为 null 并且排序会避免这种情况。由于问题出在 xorder 字段上，我认为在更新之前，您需要手动浏览列表并确保对于列表中的每个项目，每个节点的 xorder 字段与该项目在列表。

例如，当您拉取测试列表时，您可能有 3 个节点。对于列表 xorder=0 中的项目 0，项目 1 的 xorder=1，项目 2 的 xorder=2。如果您对列表中的这些节点重新排序（例如交换 0 和 1，则应确保将新项目 0 的 xorder 值从 1 更改为 0，并且现在是项目 1 的节点的 xorder 应为 1。

要么创建一个新的新子列表，其中节点按正确的顺序排列，然后将 children 属性设置为新列表。

[以前的]

做类似的事情怎么样

```
Collections.sort(parent.getChildren(), new MyComparator()); 
```

现在您所要做的就是编写一个 Comparator 实现来进行您想要的排序更改。我认为这将避免在删除时 parent 设置为 null 的约束冲突。

# jquery - 过滤多维数组jquery

> ID：12886391
> 
> 赞同：0
> 
> 时间：2012-10-14T20:48:44.283
> 
> 标签：jquery, arrays, filter

我有一个插件（https://github.com/bjorn2404/jQuery-Store-Locator-Plugin），它使用代码创建一个多维数组：

```
locationset[i] = 新数组（距离、名称、纬度、lng、地址、地址 2、城市、州、邮政、电话、网络、小时 1、小时 2、小时 3）；
我++；

```

我需要根据距离过滤它（假设它应该小于 10）。

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:31:03.847

```
var filtered_array = $.grep(locationset, function(value) { 
    return value[0] < 10;
}); 
```

您应该使用[grep](http://api.jquery.com/jQuery.grep/)，因为这就是它的设计目的。

# xcode - 如何在 xcode 4.5 中选择数据源和委托？

> ID：12886392
> 
> 赞同：0
> 
> 时间：2012-10-14T20:48:58.320
> 
> 标签：xcode, storyboard, datasource, uipickerview

我是 c# asp.net 开发人员，只是开发 ios 应用程序的新手。我正在尝试一些教程来构建一些 uipickerview。但大多数教程都使用 xib 文件。我的项目是一个故事板项目，没有 xib 文件。所以我想知道如何从我的 uipickerview 连接我的数据源和委托？在一些教程中，我在 xcode 中看到了“视图控制器场景”窗口，但在我的 xcode 中找不到它。那么有人可以告诉我如何显示这个“视图控制器场景”或如何将我的 uipickerview 连接到数据源和委托？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:43:16.110

Storyboard 正在替换 xib 文件，并将您的所有视图合并到一个适用于 iPhone 或 iPad 的文件中。要连接选择器视图数据源和委托，您可以在 Interface Builder 中选择 UIPickerView 对象，转到 Connections Inspector（右侧带有箭头图标的菜单），然后从数据源拖动到视图控制器文件所有者。对代表做同样的事情。

然后在该视图控制器的头文件中，您需要将 UIPickerViewDataSource 和 UIPickerViewDelegate 协议添加到接口，并在实现文件中实现相关方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:57:32.350

将代表拖到界面生成器中的文件所有者，您不需要界面

# xcode - uicollectionviewcell 没有被选中

> ID：12886394
> 
> 赞同：2
> 
> 时间：2012-10-14T20:49:25.157
> 
> 标签：xcode, events, uicollectionview, uicollectionviewcell

我的应用基于导航控制器，其中包含嵌入两个视图控制器的自定义视图控制器。第一个是 UICollectionViewController，我通过 IB 为其设计了单元。单元格包含一个图像视图和一个标签。在执行时，应用程序会正确显示所有单元格及其图像和相关标签，但只有其中一些会在您触摸它们时触发 DidSelect 事件。我试图改变屏幕上的单元格位置，改变 IB 中的间隔设置，这样以前“不敏感”的一些单元格现在变得敏感了，反之亦然。我还检查了图像和标签都是用户交互的。

有什么建议么？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:25:37.283

我犯了一个简单的错误：在容器视图中我插入了两个视图，包含 UICollectionViewController 的视图位于另一个视图的下方，其内容在大多数情况下是隐藏的，但我将隐藏的视图设置为不包含这个特定的视图。

# android - 将三星 Galaxy S2 连接到计算机时出现问题

> ID：12886395
> 
> 赞同：0
> 
> 时间：2012-10-14T20:49:43.267
> 
> 标签：android

我有一个三星 Galaxy S2 并且正在学习安卓开发课程。在过去的两个月里，我一直在使用模拟器来运行活动。

最近，我一直在尝试将其连接到我的设备。现在，驱动程序已安装在我的计算机上，因为我可以通过“我的电脑”（Windows 7 Professional）看到设备（并查看文件）。但是，使用类似的东西

> 亚行设备

不显示设备，也不通过 Eclipse 中的应用程序启动器（在虚拟设备或连接设备之间进行选择时）。

尝试让 adb 识别它有什么帮助吗？

一些杂项。事物：

*   型号为 SPH-D710
*   我已从手机启用 USB 调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:16:23.723

在这里，通过#android（在freenode上）的一些帮助，我能够解决这个问题。

我采取的步骤是，

1.  删除所有预先存在的驱动程序

2.  我安装了一个通用驱动程序链接：http: [//forum.xda-developers.com/showthread.php?t=1514942](http://forum.xda-developers.com/showthread.php?t=1514942)

在那之后它起作用了。

谢谢戴维斯莱克

# ios - iOS 上的 CocoaHTTPServer：设置服务器，以便用户可以将 NSData 下载为文件

> ID：12886397
> 
> 赞同：6
> 
> 时间：2012-10-14T20:49:45.183
> 
> 标签：ios, hyperlink, download, nsdata, cocoahttpserver

我想使用以下网页制作`CocoaHTTPServer`：应该有一个下载文件的链接，但源文件必须是`NSData`内存中的对象。

据我在示例中看到的，有一种简单的方法可以将 iPhone 上的某些文件链接到超链接。是否可以“链接” `NSData`？

将非常感谢示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T16:28:37.650

**您需要做的就是[`HTTPDataResponse`](https://github.com/robbiehanson/CocoaHTTPServer/blob/master/Core/Responses/HTTPDataResponse.h)在您的 HTTPConnection 子类中返回。**

如果您想要一个示例，请查看调用的 CocoaHTTPServer 示例[`DynamicServer`](https://github.com/robbiehanson/CocoaHTTPServer/blob/master/Samples/DynamicServer/MyHTTPConnection.m)并将其替换`- httpResponseForMethod: URI:`为`MyHTTPConnection`类似于以下内容的内容：

```
- (NSObject<HTTPResponse> *)httpResponseForMethod:(NSString *)method URI:(NSString *)path
{
    // Before returning you can analyze the passed path argument and select the correct data object to return...
    return [[HTTPDataResponse alloc] initWithData:placeYourDataInstanceHere];
} 
```

# android - AlertDialog 主题问题

> ID：12886399
> 
> 赞同：7
> 
> 时间：2012-10-14T20:50:04.483
> 
> 标签：android

我正在创建一个警报对话框。如果像这样创建它：

```
AlertDialog.Builder builder = AlertDialog.Builder((RelationActivity)getContext());
builder.setMessage("No relations found.");
builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {       
    public void onClick(DialogInterface dialog, int id) {
        ((RelationActivity)getContext()).finish();
    }
});
builder.create();
builder.show(); 
```

这是结果：[http ://www.ozze.com.br/1.png](http://www.ozze.com.br/1.png)

但是，如果我尝试设置一个主题，如下所示：

```
AlertDialog.Builder builder = new AlertDialog.Builder(((RelationActivity)getContext()), android.R.style.Theme_Holo_Light_Dialog); 
```

这是结果：[http ://www.ozze.com.br/2.png](http://www.ozze.com.br/2.png)

请问，谁能帮我解决这个问题？看起来在使用主题时，主题“包围”了警报对话框。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T21:18:18.060

要为像 Theme.Holo.Light 这样的警报对话框设置不同的主题，请尝试使用 ContextThemeWrapper，如 android 源代码中的 Dialog.java 中使用的那样：

```
builder = new AlertDialog.Builder(new ContextThemeWrapper(this, android.R.style.Theme_Holo_Light_Dialog)) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-28T06:33:27.403

这是原始答案的链接[here](https://stackoverflow.com/a/33384274/2080965)

为了快速参考，我在这里发布
带有 v7 库**android.support.v7.app.AlertDialog的主题**

```
android.support.v7.app.AlertDialog.Builder builder = new android.support.v7.app.AlertDialog.Builder(this,R.attr.alertDialogTheme); 
```

**带有android.app.AlertDialog**构造函数的主题

 **```
android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(this,AlertDialog.THEME_HOLO_LIGHT ); 
```

但根据新文档，
**此常量（AlertDialog.THEME_HOLO_LIGHT）在 API 级别 23 中已弃用**。使用 Theme_Material_Light_Dialog_Alert 。

```
 android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(this,android.R.style.Theme_Material_Light_Dialog_Alert ); 
```**

# list - 使用 C++ 中的擦除函数删除 stl 列表中的对象

> ID：12886400
> 
> 赞同：2
> 
> 时间：2012-10-14T20:50:07.747
> 
> 标签：list, memory, stl, memory-leaks, erase

所以我在这里尝试实现一些内存管理技术。在我的程序中，我创建了一个 stl 列表，以便它包含“Blast”类的对象及其各自的迭代器：

```
list<Blast> blasts;
list<Blast>::iterator it1; 
```

看了一圈发现，如果你使用erase函数，它会调用类的析构函数，然后删除它指向的对象的迭代器，并返回一些其他的指针（迭代器）。但是，如果类是 POD，那么对析构函数的调用将不会做任何事情，因此保存在该对象中的所有信息都将保存在内存中。

为了解决这个问题，我尝试动态分配对象，以便可以使用 delete 函数将其从内存中擦除：

```
Blast *blast;
blast = new Blast; 
```

但是，在这里我遇到了一个问题。当我试图将对象推送到列表中时，它只允许我推送指针：

```
blasts.push_back(*blast); 
```

起初，我什么都没想。所以我继续说：

```
if(it2->getX() > 600) {

   delete &it2;
   it2 = blasts.erase(it2);

   } 
```

然后我意识到，它的作用是删除指向对象的指针，然后删除指向指向对象的指针的指针。

我不完全确定这是否真的正确，因为我无法知道是否存在内存泄漏。所以我的问题是：

在删除指向该对象的任何指针之前，我必须做什么才能从内存中擦除该对象？我的实现是否正确？结果和我只是简单地将对象推到列表上一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:46:25.320

> 然后删除它指向对象的迭代器并返回一些其他指针（迭代器）

不是指针，是迭代器。

> 因此，保存在该对象中的所有信息都将保存在内存中。

不，那不是真的。

> 当我试图将对象推送到列表中时，它只允许我推送指针：

嗯？如果您有 a`std::list<Blast>`那么您当然不能将 a 存储`Blast*`在列表中，那不是同一类型。也许您想将列表更改为`std::list<Blast*>`?

> `delete &it2;`

这是错误的，它试图删除迭代器，*而不是*它引用的列表元素。要删除它指向您想要的元素：

```
delete &*it2; 
```

但是如果你仍然有一个`std::list<Blast>`then 会尝试删除列表所拥有的对象，这将是非常错误的并且会导致错误。

我认为您应该坚持`std::list<Blast>`并忘记整个问题-这似乎是基于一种误解，即擦除元素不会破坏对象，这是不正确的。如果您的问题是`Blast`对象具有指向动态分配内存的指针成员，则添加一个析构函数以`Blast`使其正确清理。

# java - 使用 JUnit 测试 Spring 3.0.1 在测试期间抛出错误

> ID：12886401
> 
> 赞同：1
> 
> 时间：2012-10-14T20:50:18.190
> 
> 标签：java, spring, hibernate, junit4

我想使用 * *junit-4.10测试我的***Spring MVC 3.0.1应用程序。***jar 我也在使用 Hibernate（我不知道它是否相关）

 *这是测试类：

```
package net.controller;
import static org.junit.Assert.assertNotNull;
import net.service.WordService;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.transaction.annotation.Transactional;

@Transactional
@ContextConfiguration(locations = { "/spring-servlet.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
public class NewWordControllerTest {

    @Autowired
    private WordService wordService;

    @Test
    public void testController() {
        assertNotNull(wordService);
    }

} 
```

但它给了我以下错误：

```
java.lang.NoSuchMethodError: org.junit.runner.notification.RunNotifier.testAborted(Lorg/junit/runner/Description;Ljava/lang/Throwable;)V 
```

经过很长时间的谷歌搜索，我仍然不知道如何解决这个问题。这是spring-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="net" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="jspViewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />

    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.model.Word</value>
                <value>net.model.Category</value>
                <value>net.model.Challenge</value>
                <value>net.model.User</value>

            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.connection.autocommit">false</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>

    <bean id="handlerMapping"
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <ref bean="localeChangeInterceptor" />

        </property>

    </bean>

    <bean id="multipartResolver"
        class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="defaultEncoding" value="UTF-8" />
        <property name="maxUploadSize" value="10000000" />
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:01:20.517

Spring 3.0.1[是针对 JUnit 4.7 编写的](http://www.jarvana.com/jarvana/inspect-pom/org/springframework/spring-parent/3.0.1.RELEASE/spring-parent-3.0.1.RELEASE.pom)，因此您应该将 Spring 更新到与 JUnit 4.10 兼容的更新版本，或者将 JUnit 降级到 4.7。*

# c# - 如何使用 TreeViewDrawMode.OwnerDrawAll 更改 TreeView 中选定节点的背景颜色？

> ID：12886402
> 
> 赞同：5
> 
> 时间：2012-10-14T20:50:29.747
> 
> 标签：c#, .net, winforms

I need to change back colours of selected nodes, when node selected and has focus - back color make green, when selected but doesn't have focus - red. 我无法区分关注树视图和不关注树视图的选定节点。位于 TabPage 对象中的树视图。

```
//...
this.myTreeView.HideSelection = false;
//...
private void myTreeView_drawNode(object sender, DrawTreeNodeEventArgs e)
{
      Color backColorSelected = System.Drawing.Color.Green;
      Color backColor = System.Drawing.Color.Red;
      // node selected and has focus
      if (((e.State & TreeNodeStates.Selected) != 0) 
      && (this.myTabControl.Focused)) // this doesn't work, node is always red
      {
          using (SolidBrush brush = new SolidBrush(backColorSelected))
          {
              e.Graphics.FillRectangle(brush, e.Bounds);
          }
      }
      // node selected but doesn't have focus
      else if ((e.State & TreeNodeStates.Selected) != 0)
      {
          using (SolidBrush brush = new SolidBrush(backColor))
          {
             e.Graphics.FillRectangle(brush, e.Bounds);
          }
      }
      // not selected at all
      else
      {
          e.Graphics.FillRectangle(Brushes.White, e.Bounds);
      }

      e.Graphics.DrawRectangle(SystemPens.Control, e.Bounds);

      TextRenderer.DrawText(e.Graphics,
                             e.Node.Text,
                             e.Node.TreeView.Font,
                             e.Node.Bounds,
                             e.Node.ForeColor);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:25:26.893

只需检查节点的属性，它就可以工作（经过测试）。此外，我建议缓存您制作的任何自定义画笔，如下所示。（当然，您也可以使用 Brushes.Red 和 Brushes.Green）

```
SolidBrush greenBrush = new SolidBrush(Color.Green);
    SolidBrush redBrush = new SolidBrush(Color.Red);

    private void myTreeView_drawNode(object sender, DrawTreeNodeEventArgs e)
    {
        if (e.Node.IsSelected)
        {
            if (treeView1.Focused)
                e.Graphics.FillRectangle(greenBrush, e.Bounds);
            else
                e.Graphics.FillRectangle(redBrush, e.Bounds);
        }
        else
            e.Graphics.FillRectangle(Brushes.White, e.Bounds);

        e.Graphics.DrawRectangle(SystemPens.Control, e.Bounds);

        TextRenderer.DrawText(e.Graphics,
                               e.Node.Text,
                               e.Node.TreeView.Font,
                               e.Node.Bounds,
                               e.Node.ForeColor);
    } 
```

PS您可能需要渲染一些您单击以展开节点等的东西。

# php - 通过javascript保存文件（到服务器）

> ID：12886407
> 
> 赞同：0
> 
> 时间：2012-10-14T20:51:19.800
> 
> 标签：php, javascript, html

我有一个 JS 游戏（在 HTML 页面上），我想在每次有人玩的时候创建一个日志文件，这样我就可以记录他们的分数和他们玩的时间。

我知道 JS 是一种客户端语言，那么我该如何将文件保存到服务器呢？是否可以在我的 JS 中插入一些 .php 来完成这样的事情？或者，还有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T20:53:04.030

为了向服务器发送数据，您必须发出 HTTP 请求。（在不离开页面的情况下从 JavaScript 发出 HTTP 请求称为[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)）。对于这种情况，通常使用[XMLHttpRequest 对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)来完成。然后，您需要一个服务器端程序（可以用 PHP 编写）来处理请求并保存数据。为了避免担心文件锁定等问题，您应该考虑使用数据库而不是平面文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:17:17.497

我在我的项目中或多或少是这样做的（这里是基础知识，当然更高级，具体取决于项目、错误检查等）

**javascript**

```
function doLog(somedata) {
    $.ajax({
        url: "ajax_log.php",
        //data, an url-like string for easy access serverside
        data : somedata,
        cache: false,
        async: true,
        type: 'post',
        timeout : 5000
    });
} 
```

**服务器端大多数时候我使用一个类，该类将somedata** 中的每个元素作为行插入一些日志表中，例如`log`具有 id 和时间戳的表`logParams`，以及具有 id 和参数/值的表。但这是针对统计数据的。其他时候只需要在文件中记录一些数据

```
<?
$file="log.txt";
$text=serialize($_POST); 
$fh = fopen($file, 'a') or die();
    fwrite($fh, $text."\n");
    fclose($fh);
}
?> 
```

所以用 JS 来做一个日志系统是很容易的，而且在里面实现几乎任何东西都不难

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T20:53:20.120

您很可能必须对服务器进行 AJAX 调用。从那里，您的 PHP 代码或您想要使用的任何服务器端脚本语言将负责创建日志文件。

# java - 由于大量数据，AsyncTask 中的异常

> ID：12886408
> 
> 赞同：0
> 
> 时间：2012-10-14T20:51:29.313
> 
> 标签：java, android, multithreading, web-services, android-asynctask

我正在从我的 Android 应用程序连接到 Java 中的 RESTful Web 服务。我正在使用 AsyncTask 来获取数据。它适用于正常数量的数据。但是当我有大量数据时，Android 应用程序中会发生异常。我试图捕捉这个异常，但我不能：

```
private class LoadingDataFromServer extends AsyncTask<Void, Void, Void> {

        private boolean outOfMemory = false;

        @Override
        public void onPreExecute() {
            progress = ProgressDialog.show(main_activity, null,"Loading ...", true);
        }

        @Override
        protected void onPostExecute(Void result) {
            if(outOfMemory) {
                Toast.makeText(StatisticActivity.this, "Out of memory, select smaller criteria", Toast.LENGTH_SHORT).show();
                finish();
            }
            else
                setListView();
            try {
                progress.dismiss();
            } catch (Exception e) { }
        }

        @Override
        protected Void doInBackground(Void... params) {
            TextView txtProject = (TextView) main_activity.findViewById(R.id.project);
            txtProject.setBackgroundColor(Color.DKGRAY);
            txtProject.setText(project);

            TextView label = (TextView) main_activity.findViewById(R.id.label);
            label.setText(R.string.deliverable);
            try {
            loadStatistic();
            } catch (OutOfMemoryError e) {
                outOfMemory = true;
                progress.dismiss();
            } catch (RuntimeException e) {
                outOfMemory = true;
                progress.dismiss();
            } catch (Exception e) {
                outOfMemory = true;
                progress.dismiss();
            }
            return null;
        }
    } 
```

这是我得到的错误：

```
10-14 22:24:10.952: ERROR/AndroidRuntime(4179): Uncaught handler: thread AsyncTask #3 exiting due to uncaught exception
10-14 22:24:10.962: ERROR/AndroidRuntime(4179): java.lang.RuntimeException: An error occured while executing doInBackground()
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.lang.Thread.run(Thread.java:1102)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at android.os.Handler.<init>(Handler.java:121)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at android.widget.Toast.<init>(Toast.java:68)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at android.widget.Toast.makeText(Toast.java:231)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at se.softwerk.timelog.statistic.StatisticActivity$LoadingDataFromServer.doInBackground(StatisticActivity.java:301)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at se.softwerk.timelog.statistic.StatisticActivity$LoadingDataFromServer.doInBackground(StatisticActivity.java:1)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-14 22:24:10.962: ERROR/AndroidRuntime(4179):     ... 4 more 
```

异常发生在 中`doInBackground`，但我的异常处理不起作用。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:57:32.157

您应该从内部调用任何与 UI 相关的代码[`onPreExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)，[`onProgressUpdate(Progress... values)`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)或[`onPostExecute(Result result)`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)（在主线程中运行的 UI 线程），并且[`doInBackground(Params... params)`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)仅用于执行 CPU 密集型操作。

调用 inside[`publishProgress(Progress... values)`](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)会将[`doInBackground(Params... params)`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)数据发送到[`onProgressUpdate(Progress... values)`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)，您可以在其中使用它来更新 UI。

# mysql - MySQL - 这两者中哪一个是更好的索引？

> ID：12886413
> 
> 赞同：3
> 
> 时间：2012-10-14T20:52:04.060
> 
> 标签：mysql

我有一个包含 240 万个条目的数据库的网站。现在我想使用 mod_rewrite 生成清晰的 URL，例如 example.com/this-is-a-beautiful-url。为了识别哪个 URL 属于哪个页面，我想构建一个指向网站内容的 URL 表。像“this-url-example”属于 ID 123 的帖子。现在 2 位朋友告诉我 2 种不同的方法来构建此表，我不知道哪种方法最好。

1.  建议：“制作 URL 的 MD5 散列并将它们保存在带有索引的二进制字段中”。
2.  建议：“只需将网址保存为纯文本并在其上放置索引”。

哪种方法可以提供更快的选择查询？你还有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:40:21.950

寻求妥协，将网址设置为 sitename.com/12345/clean-url-format

您在可读的 URL 中有两个关键字，并且可以使用它们来通过主键获取行以加快速度。

将没有文本部分的 url 重定向到带有它的规范版本是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:53:20.833

MD5 Hash 是为数据比较而设计的。即检查密码是否有效或文件是否保持不变。

如果您计划能够更改和修改 URL（出于搜索引擎优化目的），我会坚持使用纯文本。

此外，如果您想创建 Mod 重写命令（在您的 HTACCESS 中）文件 - 它需要是纯文本以使您能够将该 URL 链接到特定页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T20:25:06.713

我不会使用 mysql 或 md5 散列。相反，请使用键值存储，例如[dbm](https://en.wikipedia.org/wiki/dbm)或[leveldb](http://leveldb.org/)。如果您使用的是 Apache `mod_rewrite`，它有一个特性，即[RewriteMap](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)，可以直接从 dbm 数据库中读取键和值，或者通过调用外部程序。类型可以是`sdbm`、或( [Berkeley DB](https://en.wikipedia.org/wiki/Berkeley_DB)[`gdbm`](http://www.gnu.org.ua/software/gdbm/) ) ，并且 apache 包含一个程序[httxt2dbm](http://httpd.apache.org/docs/current/programs/httxt2dbm.html)来创建数据库。如果您确实想使用 MySQL，RewriteMap 也可以使用 dbd 选项和[mod_dbd](http://httpd.apache.org/docs/current/mod/mod_dbd.html)来做到这一点。在性能方面，在 MySQL 上使用哈希索引应该类似于 Berkley DB。`ndbm``db`

# json - JSON.Net 和 Linq

> ID：12886421
> 
> 赞同：2
> 
> 时间：2012-10-14T20:53:00.483
> 
> 标签：json, json.net

在 linq 方面，我有点新手，我正在开发一个使用 json.net 解析 json 提要的网站。我遇到的问题是我需要能够从 json 提要中提取多个字段并将它们用于 foreach 块。json.net 的文档只显示了如何只提取一个字段。在查看 linq 文档后，我做了一些变体，但我没有找到任何最有效的方法。这是我到目前为止所得到的：

```
 WebResponse objResponse;
    WebRequest objRequest = HttpWebRequest.Create(url);
    objResponse = objRequest.GetResponse();
    using (StreamReader reader = new StreamReader(objResponse.GetResponseStream()))
    {
        string json = reader.ReadToEnd();
        JObject rss = JObject.Parse(json);

        var postTitles =
            from p in rss["feedArray"].Children()
            select (string)p["item"], 
            //These are the fields I need to also query
            //(string)p["title"], (string)p["message"];

        //I've also tried this with console.write and labeling the field indicies for each pulled field
        foreach (var item in postTitles)
        {
            lbl_slides.Text += "<div class='slide'><div class='slide_inner'><div class='slide_box'><div class='slide_content'></div><!-- slide content --></div><!-- slide box --></div><div class='rotator_photo'><img src='" + item + "' alt='' /></div><!-- rotator photo --></div><!-- slide -->";
        }
    } 
```

有没有人见过如何从 json 提要中提取多个字段并将它们用作 foreach 块的一部分（或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:29:02.067

您不能像这样（如下）直接在 foreach 循环中引用字段吗？我不确定您是否真的需要此处的 linq 查询。（注意，为了清楚起见，我已经为这个例子剪掉了你的大部分 html。你需要根据你的实际项目进行调整，做适当的 HTML 转义等）

```
foreach (var p in rss["feedArray"].Children())
{
    lbl_slides.Text += string.Format(
        "<img src='{0}' title='{1}'/><span>{2}</span>",
        (string)p["item"],
        (string)p["title"],
        (string)p["message"]);
} 
```

同样的事情使用 linq 看起来像这样：

```
var postTitles =
    from p in rss["feedArray"].Children()
    select new
    {
        Src = (string)p["item"],
        Title = (string)p["title"],
        Message = (string)p["message"],
    }

foreach (var item in postTitles)
{
    lbl_slides.Text += string.Format(
        "<img src='{0}' title='{1}'/><span>{2}</span>",
        item.Src, item.Title, item.Message);
} 
```

# mysql - 如何从数据库表中获取结果？

> ID：12886423
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:53:01.733
> 
> 标签：mysql

我有 3 个表：phones、phones_state 和 state

**电话：**

```
+------------------+
| phone_id | model |
+----------+-------+
| 1        | mot   |
| 2        | sam   |
+----------+-------+ 
```

**手机状态：**

```
+---------------------+
| phone_id | state_id |
+----------+----------+
| 2        | 1        |
| 2        | 3        |
| 2        | 5        |
| 1        | 1        |
+----------+----------+ 
```

**状态：**

```
+------------------+
| state_id | name  |
+----------+-------+
| 1        | rec   |
| 2        | notre |
| 3        | res   |
| 4        | wait  |
| 5        | back  |
+----------+-------+ 
```

我想获取所有处于状态 1 而不是处于状态 5 的手机如何在 mysql 查询中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:56:01.970

```
select p.phone_id
from phones p
inner join phones_state ps on ps.phone_id = p.phone_id
group by p.phone_id
having sum(ps.state_id = 1) >= 1 and sum(ps.state_id = 5) = 0 
```

# asp.net-mvc - Orchard CMS 中 Razor 视图中的奇怪错误

> ID：12886426
> 
> 赞同：1
> 
> 时间：2012-10-14T20:53:15.793
> 
> 标签：asp.net-mvc, asp.net-mvc-4, orchardcms

当我有这个时：

```
@using Orchard.Themes.Models
@using Orchard.Themes.Preview
@using Orchard.Themes.Services
@using Orchard.Themes.ViewModels
@{
    Script.Require("OrchardTinyMceDeluxe");
    var pluginsBaseUrl = @Url.Content("~/modules/tinymcedeluxe/scripts/plugins");
    var siteThemeService = WorkContext.Resolve<ISiteThemeService>();
} 
```

我收到此错误：

> 解析器错误消息：代码块缺少结束“}”字符。确保此块中的所有“{”字符都有一个匹配的“}”字符，并且没有一个“}”字符被解释为标记。

```
Line 4:  @using Orchard.Themes.Services
Line 5:  @using Orchard.Themes.ViewModels
Line 6:  @{
Line 7:      Script.Require("OrchardTinyMceDeluxe");
Line 8:      var pluginsBaseUrl = @Url.Content("~/modules/tinymcedeluxe/scripts/plugins"); 
```

但是，如果我将代码分成两个单独的 C# 块，如下所示，它可以正常工作。为什么？

```
@{
    Script.Require("OrchardTinyMceDeluxe");
    var pluginsBaseUrl = @Url.Content("~/modules/tinymcedeluxe/scripts/plugins");
}
@{
    var siteThemeService = WorkContext.Resolve<ISiteThemeService>();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:04:21.583

您不应该在 Url.Content 上使用 @，它已经在代码块中。

我认为正在发生的事情是 razor 被 @ 和末尾的分号弄糊涂了，因此将右括号放入 HTML 中。

# c# - 为什么有些方法在可空结构的空值上起作用，而有些则不起作用？

> ID：12886429
> 
> 赞同：13
> 
> 时间：2012-10-14T20:53:33.567
> 
> 标签：c#, .net, struct, nullable

开门见山：

```
int? i = null;
i.ToString(); //happy
i.GetType(); //not happy 
```

我得到了一个[非常相关的问题](https://stackoverflow.com/questions/11446838/why-does-tostring-on-a-null-string-cause-a-null-error-when-tostring-works)，它实际上涉及为什么可以`i.ToString()`正常工作。

**编辑：**刚刚发现这个极端案例是[这个 SO 线程中投票最多的案例！](https://stackoverflow.com/a/194671/661933)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T20:59:43.200

这是因为`ToString`是虚拟的，而`GetType`不是。Nullables 在 CLR 中具有特殊的装箱行为。当您调用`GetType`可空对象时，它会被装箱（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms366789%28v=VS.90%29.aspx)，实际上这发生在 any 中`struct`）。但是，对于可空值，底层值被装箱，而不是实际的可空值。`ToString`另一方面调用对 ToString 方法的覆盖`Nullable<T>`。另外，我会注意到这`int? i = null`是`Nullable<int> i = new Nullable<int>()`. 因此，您的变量中确实有一个对象`i`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T21:02:57.403

> 为什么不`i.ToString()`失败？

使用任何 .NET 反编译器并查看`Nullable<T>`该类。您会看到它`ToString()`被如下覆盖：

```
public override string ToString()
{
  if (!this.HasValue)
    return "";
  else
    return this.value.ToString();
} 
```

* * *

> 为什么会`i.GetType()`失败？

请参阅[mike z 的回答](https://stackoverflow.com/a/12886469/390819)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:59:27.180

该类型`int?`不是常规类型。

当你写的时候`int? i = null`，**只有**对象的值为空，而不是对象本身。

对象`int?`继承自`object`，因此该函数`i.ToString()`可以工作，并且它对对象内部的**值起作用。**

# php - simple-html-dom 通过类名获取表 id

> ID：12886432
> 
> 赞同：1
> 
> 时间：2012-10-14T20:53:50.253
> 
> 标签：php, simple-html-dom

我正在尝试使用 simple-html-dom构建**刮板。**

每个 tr 都有类“事件列表”以及一个唯一的 id。一切正常，但我不知道如何获取和存储 ID。

这是我的代码：

```
foreach($html->find('tr[class=event-listing]') as $event) 
     {
       $item['date'] = trim($event->find('td', 0)->plaintext); 
       $first_trim = ltrim($event->find('td', 1)->plaintext, 'at ,vs.');
       $item['opponent'] = rtrim($first_trim, ' * '); 
       $item['location'] = trim($event->find('td', 2)->plaintext); 
       $item['time'] = trim($event->find('td', 3)->plaintext);
       $sched[] = $item;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:06:26.343

你不需要任何特别的东西`$event->id`就可以了

```
$string = '<tr valign="TOP" bgcolor="#d1d1d1" class="event-listing" title="2012,4,18,21,00,00" id="1444896"> <td class="row-text">&nbsp;</td> <td class="row-text">vs. Northern Colorado *</td> <td class="row-text">Orem, Utah</td> <td class="row-text">W, 11-6</td> </tr>';
$html = str_get_html($string);

$sched = array();
foreach ( $html->find('tr[class=event-listing]') as $event ) {
    $item['date'] = trim($event->find('td', 0)->plaintext);
    $first_trim = ltrim($event->find('td', 1)->plaintext, 'at ,vs.');
    $item['opponent'] = rtrim($first_trim, ' * ');
    $item['location'] = trim($event->find('td', 2)->plaintext);
    $item['time'] = trim($event->find('td', 3)->plaintext);
    $item['id'] = $event->id;
    $sched[] = $item;
}

var_dump($sched); 
```

输出

```
array
  0 => 
    array
      'date' => string '&nbsp;' (length=6)
      'opponent' => string 'Northern Colorado' (length=17)
      'location' => string 'Orem, Utah' (length=10)
      'time' => string 'W, 11-6' (length=7)
      'id' => string '1444896' (length=7)
                         ^------------------------------ ID Captured 
```

# javascript - 圆圈周围的链接文本

> ID：12886434
> 
> 赞同：3
> 
> 时间：2012-10-14T20:54:20.243
> 
> 标签：javascript, html, css, svg, word-wrap

我有两个这样设计的链接：

![在此处输入图像描述](../Images/0356a32def9309ca7c0168aab090c1f4.png)

我正试图为此找到一个体面的解决方案。文本最好是 PNG 图像，但 SVG 中的文本也可以接受。我还需要一个悬停状态，但这可以通过使用 png sprite 或文本颜色来完成，所以这不是问题。最大的问题是创建适当的点击区域。

当涉及到重叠的链接/悬停区域时，HTML/CSS 只是有点方正和有限。

我查看了 SVG 解决方案，我还考虑使用多个正方形作为“热点”或使用 CSS3 逐个字母旋转。

有没有人对如何解决这个问题有一个聪明的想法？IE9+ 支持会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:37:28.607

您可以简单地将其作为具有两个 textPath 的 svg 来执行，其中每个链接只是一个 <a> 标记。点击区域将被自动计算。

这是一个[例子](http://xn--dahlstrm-t4a.net/svg/text/text-path-linking.svg)：

```
<svg 
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 viewBox="700 0 500 500">
    <title>Simple example of using links with svg textPaths</title>
    <defs>
    <style type="text/css">
     text {
        font: 50px sans-serif; 
        text-anchor: middle;
     }
     a:hover { fill: cornflowerblue; }
    </style>
    <path id="p1" d="M700 400a200 200 0 1 1 400 0"/>
    <path id="p2" d="M700 400a200 200 0 1 1 400 0" transform="translate(0 50)"/>
  </defs>

  <text>
    <a xlink:href="http://www.example.com/first">
       <textPath xlink:href="#p1" startOffset="50%">First link</textPath>
    </a>
    <a xlink:href="http://www.example.com/second">
       <textPath xlink:href="#p2" startOffset="50%">Second link</textPath>
    </a>
  </text> 
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:02:25.663

我有一个理论。如果你做了这样的事情怎么办：

1.  用文本创建一个容器
2.  在更高的 z-index 上创建副本
3.  创建一个纯白色的覆盖层，每个覆盖层都有精确的尺寸。（稍后使用）
4.  css全部旋转-90

阅读本文以使图像以相反的方式倾斜。

[http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)

然后倾斜覆盖以匹配您问题中弯曲示例的外观。

# php - 显示一个同时保持 s I currently have a <select>element populated by data from a DB (See screenshot below) The PHP that renders it is simple: print "</select>"; print "<option name="\&quot;$wo_num\&quot;" value="\&quot;$wo_num\&quot;">$order_date: #$wo_</option>

> ID：12886437
> 
> 赞同：-1
> 
> 时间：2012-10-14T20:54:44.687
> 
> 标签：php, html-table

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:13:56.343

您可能需要重新考虑您要在这里做什么。显然，在选择元素中分配了数据，这将更好地与您尝试为用户提供的实际选择*选项分开 - 收音机是已经建议的一个选项。*

底线是输入应该简短明了，数据应该通过 HTML 显示。这不仅为通过 CSS 更好地设计样式打开了大门，而且让您的用户更容易阅读和理解他们实际选择的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:09:20.140

how about this:

```
<select size="20" name="namehere" multiple> 
```

set the size to the be the same as the number of records. Use CSS to style the multiple select box. Note this approach however will allow multiple selections.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T20:57:23.470

使用 a`<table>`并将单选按钮放在其中一列中，而不是使用选择元素。

# node.js - Node.js 应用程序有周期性的缓慢和/或超时（不接受传入的请求）

> ID：12886438
> 
> 赞同：51
> 
> 时间：2012-10-14T20:54:48.467
> 
> 标签：node.js

这个问题正在扼杀我的生产服务器的稳定性。

回顾一下，基本思想是我的节点服务器有时会间歇性变慢，有时会导致网关超时。尽我所能从我的日志中看出，有东西阻塞了节点线程（意味着传入的请求不被接受），但我一辈子都无法弄清楚是什么。

*问题的严重程度不一*。有时应该小于 100 毫秒的请求需要大约 10 秒才能完成；有时它们甚至根本不会被节点服务器接受。**简而言之，就好像某个随机任务正在工作并阻塞节点线程一段时间，从而减慢（甚至阻塞）传入请求；我可以肯定地说的一件事是需要修复的症状是“网关超时”**。

*问题来来去去毫无预兆*。我无法将它与 CPU 使用率、RAM 使用率、正常运行时间或任何其他相关统计数据相关联。我已经看到服务器可以很好地处理大负载，然后在小负载下出现此错误，因此它甚至看起来与负载无关。在太平洋标准时间凌晨 1 点左右看到错误并不罕见，这是一天中最小的加载时间！重新启动节点应用程序似乎*可能*会使问题消失*一段时间*，但这并不能告诉我太多。我确实想知道[它是否可能是 node.js 中的一个错误](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/jncp6KM3EGM)……考虑到它正在杀死我的生产服务器，这不是很令人欣慰。

*   我做的第一件事是确保我已将 node.js 升级到最新版本（0.8.12），以及我的所有模块（[在这里它们是](http://pastebin.com/UFS6jW5X)）。当然，我也有很多错误捕捉器。我没有做任何时髦的事情，比如将很多内容打印到控制台或写入很多文件。
*   一开始[我以为是出站的HTTP请求阻塞了入站的socket，因为express中间件连入站请求都没有接，但我放弃了这个理论，因为看起来节点线程本身变得很忙](https://stackoverflow.com/questions/12868107/node-jsexpress-randomly-drops-requests-resulting-in-a-gateway-timeout)。
*   接下来，我用 JSHint 浏览了我的所有代码，并修复了每一个警告，包括一些意外的全局变量（忘记写“var”），但这并没有帮助
*   在那之后，我假设我可能内存不足。但是，我通过 nodetime 的堆快照现在看起来相当不错（如下所述）。
*   [仍然认为内存可能是一个问题，我看了一下垃圾收集](https://stackoverflow.com/questions/12887062/node-v8-garbage-collector-how-to-debug-long-mark-sweep-times)。我启用了 --nouse-idle-notification 标志，并在不需要时对 NULL 对象进行了更多代码优化。
*   仍然确信内存是问题所在，我添加了 --expose-gc 标志并执行了 gc(); 指挥每一分钟。这并没有改变任何东西，除了偶尔让请求变慢一点。
*   在绝望的尝试中，我将“集群”模块设置为使用 2 个工作人员并每 30 分钟自动重新启动一次。尽管如此，还是没有运气。
*   我将 ulimit 增加到 10,000 以上，并密切关注打开的文件。每个 node.js 应用程序似乎有 < 300 个打开的文件（或套接字），因此增加 ulimit 没有影响。

我一直在用 nodetime 记录我的服务器，这是它的要点：

*   在亚马逊云上运行的 CentOS 5.2（m1.large 实例）
*   始终大于 5000 MB 的可用内存
*   始终小于 150 MB 的堆大小
*   CPU 使用率始终低于 60%

我还检查了我的 MongoDB 服务器，它的 CPU 使用率 <5%，并且没有请求需要 > 100 毫秒才能完成，所以我非常怀疑是否存在瓶颈。

I've wrapped (almost) all my code using Q-promises ([see code sample](https://stackoverflow.com/questions/12883370/reading-node-js-heap-snapshots-created-via-nodetime-why-are-my-objects-not#comment17444187_12883370)), and of course have avoided Sync() calls like the plague. I've tried to replicate the issue on my testing server (OSX), but have had little luck. Of course, this may be just because the production servers are being used by so many people in so many unpredictable ways that I simply cannot replicate via stress tests...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T22:06:08.600

Many months after I first asked this question, I found the answer.

In a nutshell, the problem was that I was not piping a big asset when transferring it from one server to another. In other words, I was downloading an image from one server, before uploading it to a S3 bucket. Instead of streaming the download into the upload, I downloaded the file into memory, and then uploaded it.

I'm not sure why this did not show up as a memory spike, or elsewhere in my statistics.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T20:02:45.323

My guess is Mongoose. If you are storing large payloads in Mongo, Mongoose can be pretty slow due to how it builds the Mongoose objects. See [https://github.com/LearnBoost/mongoose/issues/950](https://github.com/LearnBoost/mongoose/issues/950) for more details on the problem. If this is the problem you wouldn't see it in Mongo itself since the query returns quickly, but object instantiation could take 75x the query time.

Try setting up timers around (`process.hrtime()`) before and after you the Mongoose objects are being created to see if that might be the problem. If this is the problem, I would switch to using the node Mongo driver directly instead of going through Mongoose.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-14T22:48:49.367

You are heavily leaking memory, try setting every object to null as soon as you don't need it anymore! [Read this](https://stackoverflow.com/questions/5733665/how-to-prevent-memory-leaks-in-node-js).

More information about hunting down memory leaks can be found [here](https://stackoverflow.com/questions/9152908/node-js-memory-leak-hunting).

Give special attention to having multiple references to the same object and check if you have circular references, those are a pain to debug but will help you very much.

Try invoking the garbage collector manually every minute or so (I don't know if you can do this in node.js cause I'm more of a c++ and php coder). From my years of experience working with c++ I can tell you the most likely cause of your application slowing down over time is memory leaks, find them and plug them, you'll be ok!

Also assuming you're not caching and/or processing images, audio or video in memory or anything like that 150M heap is a lot! Those could be hundreds of thousands or even millions of small objects.

You don't have to be running out of memory for your application to slow down... just searching for free memory with that many objects already allocated is a huge job for the memory allocator, it takes a lot of time to allocate each new object and as you leak more and more memory that time only increases.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T02:13:50.060

Is "--nouse-idle-connection" a mistake? do you really mean "--nouse_idle_notification".

I think it's maybe some issues about gc with too many tiny objects. node is single process, so watch the most busy cpu core is much important than the load. when your program is slow, you can execute "gdb node pid" and "bt" to see what node is busy doing.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T07:30:45.557

What I'd do is set up a parallel node instance on the same server with some kind of echo service and test that one. If it runs fine, you narrow down your problem to your program code (and not a scheduler/OS-level problem). Then, step by step, include the modules and test again. Certainly this is a lot of work, takes long and I dont know if it is doable on your system.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T00:43:07.937

If you need to get this working now, you can go the NASA redundancy route:

Bring up a second copy of your production servers, and put a proxy in front of them which routes each request to both stacks and returns the first response. I don't recommend this as a perfect long-term solution but it should help significantly reduce issues in production now, and help you gather log data that you could replay to recreate the issues on non-production servers.

Obviously, this is straight-forward for read requests, but more complex for commands which write to the db.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-27T11:27:35.123

We have a similar problem with our Node.js server. It didn't scale well for weeks and we had tried almost everything as you had. Our problem was in the implicit **backlog** value which is set **very low** for high-concurrent environments.

[http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback](http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback)

Setting the backlog to a significantly higher value (e.g. 10000) as well as tune networking in our kernel (/etc/sysctl.conf on Linux) as described in manual section helped a lot. From this time forward we don't have any timeouts in our Node.js server.

# python - 我怎样才能让我的代码成为一个集合？

> ID：12886450
> 
> 赞同：3
> 
> 时间：2012-10-14T20:57:22.310
> 
> 标签：python

我有一个小代码，它需要一个对象列表，并且只输出列表中唯一的项目。

这是我的代码

```
def only_once(a):
    return [x for x in a if a.count(x) is 1] 
```

不过，我的老师要求我们为此功能使用集合。有人可以告诉我我能做什么吗？

我的代码必须接受 a=[1,4,6,7,3,2,4,5,7,5,6] 之类的输入，然后输出 [1, 3, 2]。也必须保持它的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:59:48.823

澄清一下，您想要的是一组出现一次且仅出现一次的项目。

这里最好的选择是使用[`collections.Counter()`](http://docs.python.org/py3k/library/collections.html#collections.Counter)，因为这意味着您只计算项目一次，而不是每个项目一次，从而大大提高性能：

```
>>> import collections
>>> {key for key, count in collections.Counter(a).items() if count == 1}
{1, 2, 3} 
```

我们只需用花括号替换方括号，以表示集合推导优于列表推导，从而获得一组结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T21:09:09.010

如果您需要多次删除列表中的任何项目，而不仅仅是第一个之后的出现，您可以使用：

```
# without using generators / comprehensions
def only_once(iterable):
    seen = set()
    duplicates = set()
    for item in iterable:
        if item in seen:
            duplicates.add(item)
        seen.add(item)
    result = []
    for item in iterable:
        if item not in duplicates:
            result.append(item)
    return result 
```

对于一般的订单保留重复消除，请参阅`unique_everseen`itertools [recipes](http://docs.python.org/library/itertools.html#recipes)：

```
def unique_everseen(iterable, key=None):
    "List unique elements, preserving order. Remember all elements ever seen."
    # unique_everseen('AAAABBBCCDAABBB') --> A B C D
    # unique_everseen('ABBCcAD', str.lower) --> A B C D
    seen = set()
    seen_add = seen.add
    if key is None:
        for element in ifilterfalse(seen.__contains__, iterable):
            seen_add(element)
            yield element
    else:
        for element in iterable:
            k = key(element)
            if k not in seen:
                seen_add(k)
                yield element 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T21:11:37.150

[我假设您也是 user1744238 和 user1744316 - 请选择一个用户名并坚持使用它，这样更容易检查您提出的问题的变体以及您已经尝试过的问题。]

一种基于集合的方法是使用两个集合作为计数器。你只关心你是否见过一次或不止一次。例如，这是一个易于解释的方法：

1.  `once`为和做一个空集`more`。
2.  循环遍历列表的每个元素，并且：
    1.  如果您以前没有看过它，请将其添加到`once`.
    2.  如果您看过一次，请将其删除`once`并添加到`more`.
3.  现在您知道在 set 中您只看到过一次的元素`once`。
4.  循环遍历列表的元素，如果您已经看过一次，请将其添加到输出列表中，然后将其从`once`集合中删除，这样您就不会两次输出相同的元素。

这给了我：

```
In [49]: f([1,4,6,7,3,2,4,5,7,5,6])
Out[49]: [1, 3, 2] 
```

# java - 使继承的 getter 返回模拟对象

> ID：12886452
> 
> 赞同：0
> 
> 时间：2012-10-14T20:57:38.807
> 
> 标签：java, unit-testing, testng, mockito

我希望 A 类中继承的 getter 返回 MyObject 的 Mock。如果不直接在 A 中存根 getMyObject() 方法（即通过使用一些 MockBase 类），我怎么能做到这一点？

```
 public class Base {
         @Autowired
         private MyObject obj;
         public MyObject getMyObject(){
            return obj;
         }
     }

    public class A extends Base {
     @Autowired
     private SomeObject xyz; 

     public void myMethod(){
       MyObject  obj = getMyObject();
       //do something here
      }

    }

  public void MockBase {
      @Mock
      protected MyObject obj;

      public MyObject getMyObject(){
            return obj;
      }
  }

  public class ATest extends MockBase  {
    @InjectMocks
    private A a;

    @Mock
    private SomeObject xyz;

    @BeforeMethod
    public void setUp(){
        MockitoAnnotations.initMocks(this);
    } 

    public void MyMethod_SomeCondition_ExpectedResult{
       a.myMethod();
    }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:51:33.657

那里有什么问题？它按预期工作，也许您使用的是旧版本的 Mockito。例如版本 1.9.5 ：

这是您要测试的类的父类：

```
public class Base {
    private BaseObjectDependency base_object_dependency;

    public BaseObjectDependency getBase_object_dependency() {
        return base_object_dependency;
    }
} 
```

这是您要测试的课程：

```
public class Child extends Base {
    private ChildObjectDependency child_object_dependency;

    public void myMethod() {
        BaseObjectDependency obj = getBase_object_dependency();
        //do something here
    }

    public ChildObjectDependency getChild_object_dependency() {
        return child_object_dependency;
    }
} 
```

以下是依赖项：

```
public class BaseObjectDependency { }

public class ChildObjectDependency { } 
```

现在这是 test 的父类：

```
import org.mockito.Mock;

public class MockBase {
    @Mock protected BaseObjectDependency base_test_dependency_mock;
} 
```

最后是测试：

```
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.MockitoAnnotations;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import static org.testng.Assert.assertEquals;
import static org.testng.Assert.assertNotNull;

public class ChildTest extends MockBase {
    @InjectMocks private Child child;

    @Mock private ChildObjectDependency child_test_dependency_mock;

    @BeforeClass
    public void setUp() {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void check_that_mocks_are_correctly_injected() {
        assertNotNull(child.getBase_object_dependency());
        assertEquals(base_test_dependency_mock, child.getBase_object_dependency());

        assertNotNull(child.getChild_object_dependency());
        assertEquals(child_test_dependency_mock, child.getChild_object_dependency());
    }
} 
```

你会看到我在哪里存根`getBase_object_dependency()`。

# php - 使用 php 从字符串中识别模式

> ID：12886458
> 
> 赞同：0
> 
> 时间：2012-10-14T20:58:10.703
> 
> 标签：php, preg-replace, preg-match

假设我有一个这样的字符串：

`$string = 'Lorem Ipsum available, <a href="##article-6##">but the majority</a> have suffered alteration in some form, by injected humour.';`

注意`<a href="##article-6##">but the majority</a>`

使用它，我想根据数据库中的 id 链接我的文章。

现在，如何在该字符串上执行 preg_replace 以查看我是否有类似的东西`##article-6##`并仅提取该数字？

这个主意好不好？我能以更好的方式做到这一点吗？

编辑：

我是这样做的：

```
$post_content = preg_replace_callback('/##article-(\d+)##/', function($matches){$args = explode(',', $matches[1]); // separate the arguments
return call_user_func_array('article_seo_url', $args); /* pass the arguments to article_seo_url function*/ }, $post_content); 
```

使用此代码，我还可以替换多个 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:14:28.863

如果你想做一个`preg_replace`，你会想使用一个正则表达式，比如`/##article-(\d+)##/`做这样的事情：

```
$string = 'Lorem Ipsum available, <a href="##article-6##">but the majority</a> have suffered alteration in some form, by injected humour.';
$string = preg_replace('/##article-(\d+)##/', 'link/to/article/with/id/$1.html', $string); 
```

将导致 $string 为：

```
Lorem Ipsum available, <a href="link/to/article/with/id/6.html">but the majority</a> have suffered alteration in some form, by injected humour. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:02:51.843

如果 ID 始终为 3 位数字，您甚至不需要正则表达式。

```
$string = 'Lorem Ipsum available, <a href="##article-6##">but the majority</a> have suffered alteration in some form, by injected humour.';
$start = strpos($string, 'article-');
$articleId = substr ( $string , intval($start)+8 , 3 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:04:48.653

如果您的 href 存储在如下变量中：

```
$href="http://www.domain.com"; 
```

您可以直接将其插入到字符串中，如下所示：

```
$string = "Lorem Ipsum available, <a href=\"$href\">but the majority</a> have suffered alteration in some form, by injected humour."; 
```

请注意，重要的是您要么转义字面引号，要么使用不同的引号，在这种情况下为单引号。

# .net - 我们可以编写和自动化浏览器，最好是使用 .Net 吗？

> ID：12886459
> 
> 赞同：1
> 
> 时间：2012-10-14T20:58:13.597
> 
> 标签：.net, browser, automation, automated-tests

是否可以轻松地自动化浏览器，最好是使用 .Net？

我更喜欢自动化 Google Chrome 或它的变体，但任何浏览器都会受到欢迎。

这将用于自动化测试或抓取网站数据。

我在看[iMacro](http://www.iopus.com/iMacros/)，但我想用 .Net 来做。

任何其他提示/框架将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:04:04.440

硒呢？

[http://seleniumhq.org/download/](http://seleniumhq.org/download/)

他们有一个 C# 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:03:11.180

[查看http://seleniumhq.org/projects](http://seleniumhq.org/projects)上的 WebDriver 项目。它们还为 C# 提供绑定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-12T06:41:04.590

您可以使用[http://seleniumhq.org/](http://seleniumhq.org/)，我也建议您查看：[https](https://www.essentialobjects.com) : //www.essentialobjects.com 网站并使用 EO.WebBrowser.dll 程序集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T21:03:38.077

`httpwebrequest`通常使用s（[检查一下）](http://www.codeproject.com/Articles/6554/How-to-use-HttpWebRequest-and-HttpWebResponse-in-N)来使用 .NET 获取网页，而不是自动化浏览器。这将为您提供来自服务器的完整响应并执行自动重定向、管理 cookie 等。唯一的缺点是页面未呈现。因此，您实际上无法“看到”页面的实际外观。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T21:06:27.200

只需`WebBrowser`在 .Net Framework 中尝试控制（基于 Internet Explorer）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T02:28:13.013

自动化测试和抓取数据是两个不同的任务。对于自动化，我可以衷心地 +1 WebDriver 的建议。我经常使用它，它是一个很棒的工具，而且我仍然定期举办研讨会和会议。您还可以考虑查看[Telerik 的 Test Studio](http://www.telerik.com/automated-testing-tools/software-testing-tools.aspx)，它在帮助克服自动化测试方面的许多挑战方面做得很好。（免责声明：我是 Test Studio 的布道者......）

# jquery - 如何将 jPlayer 播放列表移动到页面上的另一个位置？

> ID：12886464
> 
> 赞同：3
> 
> 时间：2012-10-14T20:58:55.483
> 
> 标签：jquery, css, position, jplayer, playlist

在默认模式下，jPlayer 播放列表显示在 jPlayer 控件下方。我想将它移动到页面上的另一个位置（在 2 列布局中的页面右侧，左侧有 jPlayer 控件/海报），但是当我将生成播放列表的代码移动到另一个位置时页，即

```
<div class="jp-playlist">
                    <ul>
                        <!-- The method Playlist.displayPlaylist() uses this unordered list -->
                        <li></li>
                    </ul>
                </div> 
```

播放列表中没有显示任何内容。所以看起来这段代码需要包含在 jp_container_1 div 中。如果是这样，我怎样才能在我的页面右侧显示播放列表？

**jPlayer 的完整标记如下：**

```
<div id="jp_container_1" class="jp-video jp-video-270p">
            <div class="jp-type-playlist">
                <div id="jquery_jplayer_1" class="jp-jplayer"></div>
                <div class="jp-gui">
                    <div class="jp-video-play">
                        <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
                    </div>
                    <div class="jp-interface">
                        <div class="jp-progress">
                            <div class="jp-seek-bar">
                                <div class="jp-play-bar"></div>
                            </div>
                        </div>
                        <div class="jp-current-time"></div>
                        <div class="jp-duration"></div>
                        <div class="jp-title">
                            <ul>
                                <li></li>
                            </ul>
                        </div>
                        <div class="jp-controls-holder">
                            <ul class="jp-controls">
                                <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                                <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                                <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                                <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                                <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                            </ul>
                            <div class="jp-volume-bar">
                                <div class="jp-volume-bar-value"></div>
                            </div>
                            <ul class="jp-toggles">
                                <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
                                <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
                                <li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a></li>
                                <li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a></li>
                                <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                                <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="jp-playlist">
                    <ul>
                        <!-- The method Playlist.displayPlaylist() uses this unordered list -->
                        <li></li>
                    </ul>
                </div>
                <div class="jp-no-solution">
                    <span>Update Required</span>
                    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:04:06.413

jPlayer 的目标`jp_container_1`是渲染播放器和播放列表。你有几个选择：

1.  `jp_container_1`使用 CSS 定位重新排列元素的位置。

2.  更改 jPlayer 中播放列表的目标元素`add-on/jplayer-playlist.js`

对于 jPlayer 2.2.0，jplayer-playlist.js > 第 39 行：

```
this.cssSelector.playlist = this.cssSelector.cssSelectorAncestor + " .jp-playlist"; 
```

改成：

```
this.cssSelector.playlist = this.cssSelector + " .jp-playlist"; 
```

如果你这样做，它会弄乱对 jPlayer 的多实例支持，这意味着你将只能拥有一个播放器实例，每页有一个播放列表。

# c# - 通过 Tab ID 在 TabContainer 中切换 Ajax 选项卡

> ID：12886478
> 
> 赞同：1
> 
> 时间：2012-10-14T21:00:27.093
> 
> 标签：c#, asp.net, html, ajax, ajaxcontroltoolkit

我有一个 ajax 控制工具包`TabContainer`。活动选项卡通过以下方式使用 c# 进行控制。我的标签容器上有很多标签。

是否可以通过引用 C# 中的选项卡 ID 而不是选项卡的编号来切换选项卡？

**C＃**

```
TabContainerMain.ActiveTabIndex = 5; 
```

**HTML**

```
<asp:TabContainer ID="TabContainerMain" runat="server" ActiveTabIndex="4" Width="100%"
    Height="100%" CssClass="" ViewStateMode="Enabled">
    <asp:TabPanel runat="server" HeaderText="Tab_Monitor" ID="Tab_Monitor">
    </asp:TabPanel>
    <asp:TabPanel ID="Tab_Remove_Item" runat="server" HeaderText="Tab_Remove_Item">
        <ContentTemplate>
            <div class="TabControls">
                <p>
                    Howdy, I'm in Section Tab_Remove_Item .</p>
            </div>
            <div class="TabsAction">
            </div>
        </ContentTemplate>
    </asp:TabPanel>
    <asp:TabPanel ID="Tab_2nd_Sign_System" runat="server" HeaderText="Tab_2nd_Sign_System">
        <ContentTemplate>
            <div class="TabControls">
                <p>
                    Howdy, I'm in Section Tab_2nd_Sign_System .</p>
            </div>
            <div class="TabsAction">
            </div>
        </ContentTemplate>
    </asp:TabPanel>
    <asp:TabPanel ID="Tab_Configure_Device" runat="server" HeaderText="Tab_Configure_Device">
        <ContentTemplate>
            <div class="TabControls">
                <p>
                    Howdy, I'm in Section Tab_Configure_Device .</p>
            </div>
            <div class="TabsAction">
            </div>
        </ContentTemplate>
    </asp:TabPanel>
</asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:11:23.243

是的，您可以使用该`ActiveTab`物业。例如：

得到

```
if(TabContainerMain.ActiveTab == this.Tab_Remove_Item)
{
    // ...
} 
```

放

```
TabContainerMain.ActiveTab = this.Tab_2nd_Sign_System; 
```

如果您只有 ID 作为字符串，则可以使用 LINQ（或循环）来获取参考：

```
String tabPanelID = "Tab_Remove_Item";
TabContainerMain.ActiveTab = TabContainerMain.Tabs
    .Cast<AjaxControlToolkit.TabPanel>()
    .First(t => t.ID == tabPanelID); 
```

# php - PDO / SQLite：覆盖两个相关数据库的单个查询

> ID：12886480
> 
> 赞同：4
> 
> 时间：2012-10-14T21:00:42.543
> 
> 标签：php, sqlite, pdo

## 语境

使用 Feeddemon 的两个 SQLite 数据库*tags.fdb*和*feeds.fdb*，我创建了这个有效的原始查询（使用 Firefox 的便捷插件 SQLite 管理器进行了测试）：

```
SELECT tbl_tags.tag_name, feeds.tbl_posts.link
FROM tbl_tags
INNER JOIN feeds.tbl_posts
ON tbl_tags.fd_postid=feeds.tbl_posts.fd_postid
ORDER BY tbl_tags.tag_name 
```

它主要查询 Feeddemon 的*tags.fdb*和附加的*feeds.fdb*数据库文件（使用 SQLite 的功能`ATTACH feeds.fdb AS feeds`）。它列出了所有带标签的帖子及其标签名称和超链接。可以看到，数据库内容是通过 fd_postid 关联的。

可视化发生情况的示例：

*tags.fdb*的 tbl_tags 表内容：

```
fd_postid tag_name
1         rainbow
2         orange
5         green 
```

*feeds.fdb*的 tbl_posts 表内容：

```
fd_postid link
1         google.com
2         stackoverflow.com
3         microsoft.com
4         slashdot.org
5         techcrunch.com 
```

查询结果，按 tag_name 排序：

```
green    techcrunch.com    
orange   stackoverflow.com
rainbow  google.com 
```

## 问题

如何使用 PHP 中的 PDO 实现这个单一的内部连接查询以覆盖多个相关数据库？

在 PDO 中连接到两个数据库也会创建两个对象：

```
$db1 = new PDO('sqlite:tags.fdb');
$db2 = new PDO('sqlite:feeds.fdb'); 
```

但是如果我想查询，我必须指定一个对象：

```
$result = $db1->query('SELECT * FROM sometable'); 
```

那么，如何缩小差距并使用一个查询来定位两个数据库呢？

或者我可以`ATTACH database AS alias`直接在 PDO 中使用 SQLite 的功能吗？如果是这样，怎么做？但这可能会被认为是不好的做法，对吧？由于 PDO 旨在成为非特定数据库。

我认为这个用户最终也在寻找同样的东西，但从未真正达到工作代码示例的目的：

[如何在同一个 foreach 循环中加入两个 PDO 对象？](https://stackoverflow.com/questions/6984468/)

**注意：**在回答时请考虑我是一个前端/图形专家，大约两个月前才开始学习 PHP/PDO/SQLite。这个问题可能超出了我的经验水平。我很惊讶我设法让原始查询正常工作。但我在学习...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:06:08.250

要从 SQLite 中的一个查询访问多个数据库，您必须访问`ATTACH`它们。

使用 PDO，它的工作方式与执行任何其他 SQL 命令的方式相同；您只需指定不同的文件名（和目录，如果需要）：

```
$db = new PDO('sqlite:tags.db');
$db->exec('ATTACH \'feeds.db\' as feeds');
$result = $db->query('SELECT tbl_tags.tag_name, feeds.tbl_posts.link ...'); 
```

虽然 PDO 旨在大部分独立于实际数据库，但您无法避免`sqlite:`在打开数据库时指定，并且您可以使用的实际 SQL 方言始终取决于数据库。出于实际目的，该`ATTACH`命令在逻辑上是打开数据库的一部分，并且`feeds.tbl_posts`只是一个表名。

注意：SQLite 在所有附加的数据库中搜索表名，因此您可以省略数据库名以获得唯一的表名。

# mongodb - MongoDB数据库异常

> ID：12886488
> 
> 赞同：0
> 
> 时间：2012-10-14T21:01:24.393
> 
> 标签：mongodb, sharding

关于这个例外的任何线索？

> [conn1026] 进程中的 DBException：无法跨所有分片初始化游标，因为：无法映射文件内存 @ set1/192.168.1.1:27018,192.168.1.2:27018,192.168.1.3:27018

这是在我丢失了一些 mongoD 实例并且它们再次启动之后发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:58:18.503

所以我想出了问题所在。在那个 set1 中，第二台机器有一个文件数据库文件由 root 拥有，而不是由 mongodb 用户拥有。不要问我为什么会这样，无论如何，我只是更改了这些文件的权限，一切都恢复了正常..

# sonata-admin - Sonata Admin bundle 执行一对多对一连接会在第一个一对多连接中产生空指针

> ID：12886491
> 
> 赞同：2
> 
> 时间：2012-10-14T21:02:05.677
> 
> 标签：sonata-admin

我在 Page、PageMedia 和 Sonata Media Bundles Media 类之间存在一对多对一的关系。我将插入到 PageMedia 和 Page 但由于某种原因，页面媒体表中的页面 id 总是出现空值。

这是我正在尝试使用的对象的相关部分。

```
class Page {
   /** @ORM\OneToMany(targetEntity="PageMedia", mappedBy="page", cascade={"persist"} */
   protected $pageMedias;
}

class PageMedia {
   /** @ORM\ManyToOne(targetEntity="Page", cascade={"all"}, inversedBy="pageMedias") ) */
   protected $page;

   /** @ORM\ManyToOne(targetEntity="Application\Sonata\MediaBundle\Entity\Media", cascade={"persist"}) */
   protected $media;
}

 class PageAdmin extends Admin {
   protected function configureFormFields(FormMapper $form) {
      $form
        ->with('Media')
             ->add('pageMedias', 'sonata_type_collection', 
                  array('by_reference' => false ), array(
                 'edit'=>'inline',
                 'inline' => 'table',
                 'sortable' => 'sortOrder'
               ))
        ->end();
    }
}

class PageMediaAdmin extends Admin {
protected function configureFormFields(FormMapper $form) {
    $form->add('media', 'sonata_type_model_list',
                    array(),
            array('link_parameters'=>array('context' =>'default')));
    }
} 
```

也许有人可以帮我解决问题？我在这里完全不知所措......即使在页面和页面媒体之间的 joinColumn 添加了一个可为空的 fale 之后，我现在也无法插入，我错过了什么？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T20:31:41.663

在您的 Page 类中，您应该有一个“addPageMedia”方法......像这样：

```
$this->pageMedias[] = $pageMedia; 
```

你必须先添加这个

```
$pageMedia->setPage($this) 
```

或类似的东西！:)

# android - Android - HTML5 自定义启动器

> ID：12886492
> 
> 赞同：2
> 
> 时间：2012-10-14T21:02:13.707
> 
> 标签：android, html, launcher

我想创建我的自定义 android 启动器，但不使用 java 代码。我想用 HTML5 代码创建它。我见过一些带有 HTML5 的启动器，但没有看到文档。有人可以给我一些链接或一些教程/文档吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:18:42.770

> 有人可以给我一些链接或一些教程/文档吗？

您可以将大部分 UI 定义为 HTML/CSS/JavaScript。通过 PhoneGap，您可以将其部署为应用程序。但是，您仍然需要 Java 代码——或者可能是 PhoneGap 插件，如果有人编写了一个——来访问有关已安装应用程序的信息，以便填充您的启动器。

# c - atoi (argv[1]) 的返回值始终为 0

> ID：12886494
> 
> 赞同：3
> 
> 时间：2012-10-14T21:02:24.527
> 
> 标签：c, argv, atoi

我遇到了关于返回值的问题`atoi()`。

我想将`char`命令行参数`argv[1]`转换为`int`类型并打印出来。

这是我的代码。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    int i;
    //print the char in *argv[]
    for(i = 0; i < argc; i++)
    {
            fprintf(stdout, "Arg %d: %s\n", i, argv[i]);
    }

    if (argc > 1)
    {
        i = atoi(argv[1]);      //convert char to int
        fprintf(stdout, "Int version of 1st arg: %d\n", i);
    }

    return 0;
} 
```

我通过 gcc 编译并运行它`./a.out a b c`

其他结果是正确的，但`atoi()`结果总是显示为

```
Int version of 1st arg: 0 
```

你能给我一些关于这个话题的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:05:00.383

我的建议是，如果要将字符串转换为`int`，请提供一个实际上可以转换为`int`. 你的论点是：

```
 ./a.out a b c 
```

所以没有整数。你期待什么？你认为`a`转换成一个`int`是什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T21:05:48.777

`atoi()`将 char 字符串转换为数字 - 但前提是字符串是数字。

如果您想打印`'a'`为 ASCII 值，只需使用`%d`and `argv[1][0]`，即字符串的第一个字符`argv[1]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:06:10.867

`atoi`无法发出转换错误的信号，例如在尝试解析`a`. 改为使用`strtol`，它可以为您提供足够的信息来确定转换是否成功：

```
#include <stdlib.h>

char const * input = "abc";  // this could be argv[i]

char * e;

long int n = strtol(input, &e, 0);

if (*e != '\0') { /* conversion error! */ }
else            { /* n is valid        */ } 
```

# java - 文本区域中显示的线程结果

> ID：12886500
> 
> 赞同：0
> 
> 时间：2012-10-14T21:02:49.050
> 
> 标签：java, multithreading, swing

我想执行一个线程，它应该在特定的时间间隔后得到一些结果。现在我想在`JTextArea`. 如何从线程进行事件`JTextArea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:26:20.517

这取决于你如何建立你的后台任务。

如果您使用的是普通的`Thread`or `Runnable`，则需要在事件调度线程 (ETD) 上触发一个事件，以确保您对 UI 所做的任何更改都发生在 EDT 中。

Swing 提供了一种简单的机制，允许您将 a 排入`Runnable`事件队列，其`run`方法将在 EDT 中执行。

```
// Inside you thread...
// Some block action...

SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        // Executing within the EDT...
    }
}); 
```

看一眼

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [Swing 实用程序#invokeLater](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)

一个更简单的解决方案可能是使用 a`SwingWorker`而不是 plain `Thread`。这将允许您对方法内的工作人员的完成采取行动`done`（在 EDT 内为您执行）

看一眼

*   [工作线程和 SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)
*   [摇摆工人](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)

# php - MySQL/HTML 编码

> ID：12886506
> 
> 赞同：0
> 
> 时间：2012-10-14T21:03:24.730
> 
> 标签：php, mysql, cakephp, encoding, character-encoding

我有一些非常奇怪的问题。我有一个 MySQL 数据库和一个示例 php 页面（如果这些信息可以帮助解决问题，我正在使用 CakePHP）。当我从数据库中选择并在屏幕上打印信息时，我会得到类似 - “??????”的信息。数据库中的字段与整个表和整个数据库一样具有排序规则“utf8_general_ci”。php/html文件有“”，还有“？？？？？？” 我可以做些什么来解决我的问题并以我想要的语言查看文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:11:03.570

您还在添加 HTML 字符集吗？

```
<?php echo $html->charset('utf-8'); ?> 
```

在 config.php 中确保正确编码。在 config/database.php 中：

```
'encoding' => 'utf8' 
```

或者您正在使用标准拉丁编码，例如 ISO-8859-1：

```
'encoding' => 'ISO-8859-1' 
```

# javascript - init 方法在 ExtJS 4.1.0 中不起作用 Ext.app.Application

> ID：12886507
> 
> 赞同：0
> 
> 时间：2012-10-14T21:03:25.283
> 
> 标签：javascript, extjs, extjs4, extjs4.1

init 方法在 Ext JS 4.1.0 中的 Ext.app.Application 中不起作用

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:05:31.507

Issue is fixed in Ext JS 4.1.1 version.

init method now gets called before launch function of Ext.app.Application in Ext JS 4.1.1

# c# - 从 DbSet 3 表返回而没有错误“无法从查询中推断”

> ID：12886510
> 
> 赞同：0
> 
> 时间：2012-10-14T21:03:40.930
> 
> 标签：c#, linq, linq-to-entities, ef-code-first

我有3节课。WorkoutSession、WorkoutSessionExercise 和锻炼。

我想返回 WorkoutSession**及其与****运动**相关的 WorkoutSession 列表。WorkoutSession 有很多 WorkoutSessionExercise，而这一个和Exercise 只有一个1 对1 的关系。

 **```
 var query = from workoutSession in DatabaseContext.SetOwnable<WorkoutSession>()
             from workoutSessionExercises in workoutSession.WorkoutSessionExercises
             from exerciseInfo in workoutSessionExercises.Exercise
             where workoutSession.Id == id
             select workoutSession; 
```

最后一个 FROM 有错误：无法从查询中推断类型参数。

如何使用 Linq To Entity 加载这三层深的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:51:02.193

像这样的东西会起作用吗？

```
DatabaseContext.SetOwnable<WorkoutSession>
    .Include("WorkoutSessionExercises.Exercise")
    .Where(w => w.Id == id); 
```

替代语法：

```
from workoutSession in DatabaseContext.SetOwnable<WorkoutSession>
    .Include("WorkoutSessionExercises.Exercise")
    where workoutSession.Id == id
    select workoutSession; 
```

这里的关键是该`Include`方法 - 这允许您指示哪些相关对象应该被水合。

**编辑**

试试这个来绕过基于字符串的包含（灵感来自[使用 LINQ 的 Include 嵌套实体](https://stackoverflow.com/questions/7179061/linq-nested-entities)）：

```
var query = from workoutSession in DatabaseContext.SetOwnable<WorkoutSession>
select new
{
     WorkoutSession,
     WorkoutSessionExercises = from workoutSessionExercise in
        DatabaseContext.SetOwnable<WorkoutSessionExercises>
        select new
        {
            WorkoutExercise = from workoutExercise in
                DatabaseContext.SetOwnable<WorkoutExercise>
                select workoutExercise
        }
};

var results = query.Select(r => r.WorkoutSession).Where(w => w.Id == id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:30:49.320

```
var query = DatabaseContext.SetOwnable<WorkoutSession>()
                           .Include(x => x.WorkoutSessionExercises
                                          .Select(e => e.Exercise))
                           .Where(x => x.Id == id); 
```**

# eclipse - 如何在 Windows 上设置 Eclipse + StatET + Rcpp

> ID：12886517
> 
> 赞同：8
> 
> 时间：2012-10-14T21:04:37.030
> 
> 标签：eclipse, r, eclipse-cdt, rcpp, statet

当我知道我可以使用 Rcpp 用 C++ 创建一个 R 包时，我很兴奋并且渴望了解它的开发环境。并且感谢[Fell Stat Blog](http://blog.fellstat.com/?p=170)，我可以使用 Eclipse 和 StatET（它的 R 插件）快速建立一个良好的环境，以在 Windows 上使用 Rcpp 和 RInside（另一个用于将 R 嵌入到 C++ 应用程序中的包）。

然而，由于该博客是基于 OS X 的，有几件事需要反复试验（几乎放弃）才能适应 Windows——我花了 6 个小时的空闲时间。例如，您需要安装 Rtools 才能使用 R CMD 语句编译 C/C++，并使用 Miktex 将您的 Rd 文件转换为 pdf 文件。此外，构建设置与 OS X 不同。

为了使其他人免于我经历过的可能的试错期，我在 Windows 上的 Eclipse + StatET + Rcpp 上制作了这个 wiki。随意发表评论或其他答案。否则，请享受您可以获得的用于分析软件开发的出色开源环境。

**更新（2016 年末）**：几年前，我将 R 的 IDE 从 Eclipse 更改为 RStudio，我向所有使用 R 和 Rcpp 的人推荐它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:04:37.030

对于这个 wiki，我将根据最新版本的 R，R 2.15.1 继续我的演讲，这是您需要遵循的步骤列表。

1.  如果您已经[在 Windows 系统中安装了 R，请](http://cran.r-project.org/bin/windows/base/)确保其路径不包含空格，例如“C:\Program Files\R\R-2.15.1”。如果是这样，您只能将 R 系统重新安装到“C:\R\R-2.15.1”等目录。如果您不这样做，[Rcpp 或 RInside 将无法在您的系统上运行。](https://stackoverflow.com/questions/12702251/rinside-installation-error)

2.  安装[Rtools（本例中为 Rtools2.15.1）](http://cran.r-project.org/bin/windows/Rtools/)这个安装程序包括运行 R CMD 和相关的东西和 gcc 编译器的基本工具。我将它安装到“C:\Rtools”

3.  （可选）您可以安装 MikTex 以在执行 R CMD 检查时自动从您的 Rd 文件生成 pdf 文件。确保`<Miktext installation directory>\miktex\bin`在您的系统路径中。

4.  将以下目录包含到您的系统路径中。这个很重要。否则，这里的大多数都行不通。

    `C:\Rtools\bin; C:\Rtools\gcc-4.6.3\bin; C:\R\R-2.15.1\bin\i386;`

5.  如果您还没有 Eclipse，[请使用 CDT 安装它](http://www.eclipse.org/downloads/)如果您已经拥有它，请确保您已经安装了 CDT 插件。

6.  现在是时候[为 R 安装一个 Eclipse 插件，StatET](http://www.walware.de/goto/statet)正如网站建议的那样，我曾经`http://download.walware.de/eclipse-3.8`安装它。之后，运行 R windows 并安装 Rj`install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1")` 之后，您就完成了 StatET 的安装。在 Eclipse 中，按照 StatET 的 Cheatsheet 熟悉环境。特别是，创建 R 环境、R 控制台配置、R CMD 检查、构建、安装的外部配置，以便您可以在 Eclipse 中运行 R 及其 CMD。

7.  是时候安装 Rcpp 和 RInside 了。正如 Fell Stat 建议的那样，我在 Eclipse 的 R 控制台中使用了以下内容来做到这一点。`install.packages(c("Rcpp","RInside"),type="source")`这将从 Internet 获取 Rcpp 和 RInside 的源代码，并在安装它们之前对其进行编译。如果您在此处收到任何错误消息，是时候检查您是否遵循了我上面描述的所有内容。就我而言，当我没有正确设置系统路径或我的 R 路径包含空间时，我得到了一些。

8.  现在是时候用一个测试项目来检查环境了。为此，我建议您阅读[Fell Stat Blog 的第 4、5、6、7 步](http://blog.fellstat.com/?p=170)。我推荐的一件事是，当您创建示例项目时，使用

    `Rcpp.package.skeleton("MyCppPackage", module=TRUE)`

    这样，您将通过 Rcpp 模块体验 Rcpp 的强大功能。

9.  正如我所说，在 #7 中，某些设置与 Windows 上的 OS X 不同。我只会在图像上显示我的设置。在这里，我没有为 RInside 设置目录，但我希望你可以从 Rcpp 设置中轻松解决这个问题。

![在此处输入图像描述](../Images/62d19b4bebf046c835af5a50438386f8.png) ![在此处输入图像描述](../Images/2dba2e326635e41edd5fa7957d98a1c0.png) ![在此处输入图像描述](../Images/038fb34592a0a3d4899fdeb72269c289.png)

希望这可以帮助。享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T19:11:36.483

您可以使用来自 Openanalytics 的名为 Architect 的 Eclipse 和 R 打包安装。

# javascript - jQuery 克隆 () 问题。一个克隆代码块的简单程序的行为异常

> ID：12886521
> 
> 赞同：-2
> 
> 时间：2012-10-14T21:04:57.247
> 
> 标签：javascript, jquery, html, css

我是这个领域的初学者。我创建了一个 HTML 页面，单击一些“+”/“-”按钮，我分别从 Multiple.js 文件中调用 add() 和 remove() 以从 HTML 页面中添加或删除代码块。但我得到了意想不到的结果。文件如下：Multiple Group Selection.html

```
<!DOCTYPE HTML >
<HTML>
<HEAD>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<link rel="stylesheet" href="style.css">
<TITLE>Multiple Group Selections</TITLE>
<script src="Multiple.js" type="text/javascript"></script>
</HEAD>
<BODY BGCOLOR="#FDF5E6">
<H2 ALIGN="CENTER">Multiple Group Selections</H2>
<div id="clonedInput1" class="clonedInput">
<FIELDSET class="field">
<LEGEND ALIGN="RIGHT">
<button type="button" class = "clone" onclick={add();}  >+</button>
<button type="button" class = "remove" onclick={remove();}>-</button>
</LEGEND>
Field 2A: <INPUT TYPE="TEXT" NAME="field2A" VALUE="Field A"><BR>
Field 2B: <INPUT TYPE="TEXT" NAME="field2B" VALUE="Field B"><BR>
Field 2C: <INPUT TYPE="TEXT" NAME="field2C" VALUE="Field C"><BR>
</FIELDSET>
</div>
</BODY>
</HTML> 
```

多个.js：

```
function add(){
var regex = /^(.*)(\d)+$/i;
var cloneIndex = $(".clonedInput").length;

$("button.clone").live("click", function(){
$(this).parents(".clonedInput").clone()
    .appendTo("body")
    .attr("id", "clonedInput" +  cloneIndex)
    .find("*").each(function() {
        var id = this.id || "";
        var match = id.match(regex) || [];
        if (match.length == 3) {
            this.id = match[1] + (cloneIndex);
        }
});
cloneIndex++;
});

}
function remove(){
 $("button.remove").live("click", function(){
 $(this).parents(".clonedInput").remove();
});
} 
```

样式.css

```
 .clone {
 font-family: Verdana, Arial, Helvetica, sans-serif; 
 font-size: 12px;  
 font-weight: bold; 
 color: #00ffff;
 Background-COLOR: white;
 border: black;
 border-style: solid;
 border-width: 1px;
 }
.remove{
font-family: Verdana, Arial, Helvetica, sans-serif; 
font-size: 12px; 
font-weight: bold; 
color: #00ffff;
Background-COLOR: white;
border: black;
border-style: solid;
border-width: 1px;
} 
```

我想要的只是单击“+”按钮，必须将其附加到 . 单击“-”按钮时，它也应该被删除。请帮帮我。我累死。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:25:11.723

您肯定会误入歧途的一个地方是尝试将内联`onclick`处理程序与不引人注目的 jquery 点击处理程序混合使用。特别是当它们都是相同元素的单击处理程序时。如果您刚刚开始，并且打算使用 jQuery，那么最好的方法是根本不使用任何内联 javascript。

阅读您的`add()`函数，您必须单击添加按钮，然后创建一个 jQuery clcik 处理程序......但点击已经发生，因此该处理程序不会第一次触发。

剥离内联`onclick`并展开`add()`and`remove()`函数将所有 javascript 从标记中取出，使其更易于理解。

演示：http: [//jsfiddle.net/Xfg7P/](http://jsfiddle.net/Xfg7P/)

注意： fieldset 应该在 form tag 里面，markup 中没有 form tag。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:57:25.717

我简化了克隆元素并添加新动态的功能`id`。

```
$('#btnclone').on('click', function() {
    var lastid = $('[id^="clonedInput"]').length + 1;
    $(".clonedInput")
        .last()
        .clone()
        .attr('id', 'clonedInput' + lastid)
        .appendTo("body")
    $('input').each(function() {
        $(this).val('PARENT DIV ID =  ' + $(this).parent().attr('id'))
    })
}) 
```

在这里测试它：http: [//jsfiddle.net/RASG/MjMh5/](http://jsfiddle.net/RASG/MjMh5/)

# c - Converting from a float to an unsigned char in C

> ID：12886534
> 
> 赞同：0
> 
> 时间：2012-10-14T21:06:27.693
> 
> 标签：c, image, floating-point, char, unsigned

I am trying to convert between a double, which is between 0 and 1, and an unsigned char for the processing of an image.

What I'm doing so far is I have an array of floats.

```
float array[length*4] 
```

with the 4 coming from the RGBA color scheming system. I then try this:

```
unsigned char newArray[4*length]
for (int i=0; i<4*length; i++){
    newArray[i] = 255*array[i];
}

for (int i=0; i<10; i++){
    printf("newArray: %d", newArray[i])
} 
```

and get the following output:

```
newArray: 32
newArray: 128
newArray: 131
newArray: 0
newArray: 173
newArray: 224
newArray: 56
newArray: 60
newArray: 125
newArray: 104 
```

when it should be this:

```
should be: 0
should be: 75
should be: 140
should be: 255
should be: 1
should be: 79
should be: 143
should be: 255
should be: 1
should be: 84
should be: 150
should be: 255 
```

I have tried [other methods](https://stackoverflow.com/questions/3898817/c-converting-a-float-to-an-unsigned-char), but they don't work.

My question to you is: **how do I convert between a float and an unsigned char?**

EDIT: The code that generated the correct output is this:

```
for (i=0; i<length; i++) {
    [[data objectAtIndex:i] getRed:&red green:&green blue:&blue alpha:&alpha];
    array[i][0] = 255*red;
    array[i][1] = 255*green;
    array[i][2] = 255*blue;
    array[i][3] = 255*alpha;

}

for (i=0; i<10; i++) {
    NSLog(@"before: %f, %f, %f, %f", array[i][0],array[i][1],array[i][2],array[i][3]);
} 
```

, where all I did was edit the output so it was

```
1
2
3
4 
```

instead of `1,2,3,4`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:13:42.320

转换此代码：

```
for (int i=0; i<4*length; i++){
    newArray[i] = 255*array[i];
} 
```

对此：

```
for (int i=0; i<4*length; i++)
{
    float f = 255*array[i];
    if (f < 0 || f > 255)
    {
      printf("error, array[%d]=%f, 255*array[%d]=%f\n!", i, array[i], i, f);
      abort();
    }
    newArray[i] = f;
} 
```

它会告诉你你的浮点数不在 0 到 1 的范围内。

# c# - How can i get updated entity from objectdateContext.SaveChanges() method

> ID：12886535
> 
> 赞同：0
> 
> 时间：2012-10-14T21:06:34.190
> 
> 标签：c#, entity-framework-4

I am updating data in the table and then on its update inserting date in other history table with has same fields as first table.

my code is:

```
 public void SaveChanges()
    {
      objectdateContext.SaveChanges();

      saveInHistoryTable(); // here how i can pass the current entity.
    }

 public void saveInHistoryTable(FirstTable f)
 {
    SecondTable s = new SecondTable();
    s.id = f.id;
    s.Name = f.Name;
    objectdateContext.Insert(s);
} 
```

Please guide me thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:25:26.753

您可以在上下文中重载 SaveChanges()，然后为 ChangeTracker 中的每个对象进行保存。

这是我之前使用过的一个示例（这是针对 DbContext，如果您有一个对象上下文，它会略有不同）：

```
 public override int SaveChanges()
  {
     if( ChangeTracker.Entries().Any( e => e.State != EntityState.Unchanged ) )
     {
        //insert the entry into the History table
     }

     return base.SaveChanges();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:10:25.110

`saveInHistoryTable(); // here how i can pass the current entity.`

The entity is long gone by this point. You should be calling this method and passing in the entity after the changes are made in whatever method that occurs at.

You should separate out these concerns into different methods. Honestly, `SaveChanges()` should not include making a backup of a "current entity". Moreover, how do you know that only one entity was changed? If it were an object graph that were changed, then it would be impossible to only pass in one object and have the whole graph backed up.

# c++ - 从头开始编写 MIME 标头

> ID：12886536
> 
> 赞同：1
> 
> 时间：2012-10-14T21:06:38.287
> 
> 标签：c++, arrays, char, concatenation, mime

我试图弄清楚如何在 Win7 上的 C++ 中动态更改 MIME 标头（将通过 SMTP 发送）内部的信息。

下面是我正在使用的 MIME 标头的基本布局。

```
char *payload_text[]={

  "Date: Sun, 14 Oct 2012 12:59:19 +1000\n",
  "To: " TO "\n",
  "From: " FROM "\n",
  "Cc: " CC "\n",
  "Message-ID: <sender@greenearth.com>\n",
  "Subject: This is a test with the payload as char\n",
  "\n",
  "Here is where the info goes\n",
  "\n ",
  NULL
  }; 
```

我想创建一个可以更改的函数，例如，调用头文件时的主题，并返回一个字符数组（据我所知）。这是我正在尝试的方法。

```
char *part1[]={

  "Date: Sun, 14 Oct 2012 12:59:19 +1000\n",
  "To: " TO "\n",
  "From: " FROM "\n",
  "Cc: " CC "\n",
  "Message-ID: <sender@greenearth.com>\n",
  "Subject: This is a test with the payload as char\n",
  "\n"
};

char *body [] = { "Test information.", 
                   "More test info" };

char *full_payload [ strlen(*part1) + strlen(*body) + 1 ];

strcat( *full_payload, *part1 );

strcat( *full_payload, *body );

cout << *full_payload; 
```

查看有效负载时，仅显示两个部分的第一个字符串

控制台输出：

```
[several junk bytes]Date: Sun, 14 Oct 2012 12:59:19 +1000
Test information. 
```

而应该显示一个完整的 MIME 标头。

我不明白为什么这不起作用。我相信问题可能在于我不了解 {} 在 C++ 中的行为，也找不到属于这种上下文的教程/示例代码（大多数似乎只解决没有多个字符串用逗号分隔的 char 数组弯曲括号内）。

简而言之，如何将字符串附加到包含在曲括号中的现有字符串字符数组的末尾？

感谢您的阅读，我们会热情地接受建议。

跟进：

使用该函数创建 a`std::string`然后将其转换为 a`const char *`它可以根据需要格式化 MIME 消息，但无法与我用于 SMTP 的库一起使用。

最终结果必须是形式，`char* payload[] = {"strings, seperated, by, comma"};`而不是看起来要做`char *payload = "strings\nseperated\nby\ncommas"`的事情。`.c_str()`

有谁知道如何将 a 转换为a `std::string`？我认为括号是重要的部分。`char* array[]``char* payload[] = {"strings, seperated, by, comma"};`

* * *

简单的问题：

```
char *first_array[]  = { "one", "two" };

char *second_array[] = { "three", "four"};

char *final_array[ strlen(*first_array) + strlen(*second_array) + 1];

strcpy( *final_array, *second_array );

cout << *final_array; 
```

如何将 first_array 和 second_array 组合到 final_array 中？`strcopy()`并`strcat()`在这样实现时导致程序崩溃。我想我需要做的就是这个基本操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:11:05.373

在`part1`and`body`中，您正在创建一个字符串数组，而不是单个字符串。这类似于这样做：

```
int values[] = { 1, 2, 3, 4 }; 
```

在`{}`此上下文中定义数组中的项目。因此`*part1`，`*body`仅引用每个的第一行 - 您的代码正在复制 and 中的第一个字符串的`part1`内容`body`。

至于垃圾字节，`strcat`查找第一个空字符并从那里开始，替换空。因此，应使用 追加第一个字符串`strcpy`。

要正确处理此问题，请注意`std::vector<const char *> mime`将具有与 相同的布局`const char * mime[]`，因此您可以使用它来构建字符串数组：

```
void send_smtp_message(const char **message);

void build_mime_header(std::vector<const char *> &mime)
{
    mime.push_back("Date: ...");
    mime.push_back("From: " FROM);
    // ...
    mime.push_back(""); // for the newline between header and body
}

void main()
{
    std::vector<const char *> mime;
    build_mime_header(mime);
    mime.push_back("This is a test.");
    mime.push_back(NULL); // if the API requires this for end-of-data.
    send_smtp_message(&mime[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:48:19.593

如果您使用的是 C++，则使用`string`标准库中的类通常比使用`char*`. C++ 字符串可以与“+”运算符连接。您甚至可以使用`c_str()`成员函数将 c++ 字符串转换为 const char*。

这是一个可以满足您需求的功能：

```
#include <string>
#include <iostream>

std::string makeheader(std::string to, std::string from,
                       std::string cc, std::string subject)
{
    std::string header =
        "Date: Sun, 14 Oct 2012 12:59:19 +1000\n"
        "To: " + to + "\n"
        "From: " + from + "\n"
        "Cc: " + cc + "\n"
        "Message-ID: <sender@greenearth.com>\n"
        "Subject:" + subject + "\n";

    return header;
}

int main()
{
    std::cout << makeheader("example@example.com", "example@example.com",
                            "example@example.com", "This is a test with the payload as char.");
}; 
```

# virtual-machine - VNC 服务器连接到虚拟框中的来宾操作系统

> ID：12886538
> 
> 赞同：0
> 
> 时间：2012-10-14T21:06:42.507
> 
> 标签：virtual-machine, virtualbox, ubuntu-12.04, vnc, vnc-server

我有一台 ubuntu 12.04 主机。在该机器内，我使用 virtualbox 安装了一个来宾操作系统。我已经在我的ubuntu主机操作系统上安装了一个紧凑的vnc服务器（如果在tightvnc中不可能，我准备更改VNC服务器）我正试图通过我的vnc查看器连接到vnc服务器。但是我为主机操作系统打开了一个新的 x 会话，我想要的只是通过主机操作系统上的 vnc 服务器连接到来宾操作系统。这可能吗 ？任何机构都可以详细解释我如何做到这一点。ps :- 出于某种原因，我不想在我的来宾操作系统上安装 vnc 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:45:53.493

看看 Oracle 的 VirtualBox 扩展包，它可以自由地用于个人或评估目的，并提供一个 RDP 服务器，提供虚拟机的真实控制台输出。您还可以在后台启动 VM 并通过 RDP 访问它 - google 用于无头模式。

我知道您想使用 VNC，但是（在我看来）RDP 在任何级别上都优于 VNC，我经常使用此设置并且它工作正常（来自 Win/Lin/Mac）。

# objective-c - Fetching data from database (CoreData)

> ID：12886539
> 
> 赞同：2
> 
> 时间：2012-10-14T21:06:44.580
> 
> 标签：objective-c, core-data, uimanageddocument

I have two questions:

1- Do i need to have the same UImanagedDocument to enter entities and fetch them, or is it possible to enter and read the data from different objects?

2- Is there any way to confirm that data has been entered to the database? (except for fetching the data)

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T20:21:12.293

1）您真的想花一些时间处理核心数据本身 -`UIManagedDocument`只是核心数据堆栈上的一个瘦 API 包装器。这是一本关于该主题的好书，绝对物有所值：[核心数据（第 2 版）：数据存储和管理...](http://pragprog.com/book/mzcd2/core-data)

2）你可以得到一个像[Base](http://menial.co.uk/base/)这样的应用程序并打开`persistentStore`文件。核心数据如何在数据库中存储内容需要一些破译，但您可以在其中看到它。

再次因为`UIManagedDocument`严重依赖核心数据，我建议花时间好好学习。核心数据有时具有一些有趣的复杂性。

# arrays - 如何就地洗牌

> ID：12886545
> 
> 赞同：1
> 
> 时间：2012-10-14T21:08:03.497
> 
> 标签：arrays, algorithm, shuffle

有一个奇数和偶数相等的数组。这些数字没有特定的顺序存储。是否可以就地洗牌（`O(1)`额外空间）数组，以便偶数指向偶数索引，奇数指向奇数索引？

当然，使用辅助存储来实现是微不足道的，不使用辅助存储的限制使它变得困难。另外，没有模式，在将数组改组`[a1,a2,a3..an,b1,b2...bn...n1,n2,n3...nn]`到的问题中`[a1,b1,c1..n1,a2,b2,c2...n2,...an,bn...nn]`，有一个固定的映射，可以做到这一点。但是这里没有这样的模式，它完全可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:18:52.567

编写两个迭代器。一个在偶数位置迭代所有奇数的数组索引。另一个在奇数位置迭代所有偶数。

同时迭代两者，并交换迭代器指向的项目，直到数组的末尾。应该有 O(n) 的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:21:28.760

保留两个索引，一个用于奇数，一个用于偶数，并始终定位具有奇/偶内容的第一个偶/奇索引，然后交换：

```
int even = 0, odd = 1;
do {
    while(even < size && array[even] % 2 == 0) even += 2;
    while(odd < size && array[odd] % 2 == 1) odd += 2;
    if (even < size && odd < size) {
        int temp = array[even];
        array[even] = array[odd];
        array[odd] = temp;
    }
}while(even < size && odd < size); 
```

# mysql - Cant USE databaseName against mysql using SQLDeveloper

> ID：12886547
> 
> 赞同：0
> 
> 时间：2012-10-14T21:08:24.253
> 
> 标签：mysql, oracle-sqldeveloper

Yesterday I installed and ran mysql and used it to create a DB called "classicmodels".

I then connected to it using SQLDeveloper and tried to run a query to `SELECT *` from a table just to make sure things were working. When I did this it thew a "no database selected" error. The solution was to run `USE(classicmodels);` before trying to run queries and this worked.

Today, I started SQLDeveloper back up again and tried to run a query and the same problem occured. This time, though, when trying to run the same command `USE(classicmodels);` I get this error:

```
Error starting at line 1 in command:
USE(classicmodels)
Error at Command Line:1 Column:1
Error report:
SQL Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(classicmodels)' at line 1 
```

My questions are:

*   Why is this happening?
*   How do I fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:10:59.730

这是一个 SQL 语法错误；不带括号使用它，例如：

```
USE classicmodels; 
```

这不能解释为什么它第一次没有工作，但我（礼貌地）猜测你当时使用了不同的东西。

# c# - How to set the default tile size in Windows 8?

> ID：12886548
> 
> 赞同：2
> 
> 时间：2012-10-14T21:08:25.193
> 
> 标签：c#, windows-8, windows-runtime, live-tile

I have a Windows 8 Metro app and want to set the default tile size. I have set it to wide (310x150), but have forgotten how I did it. I want to change it back to square (150x150). How do you do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:49:00.943

如果提供了宽磁贴，则宽磁贴将是安装时应用程序的默认设置。安装应用后，应用无法控制磁贴的大小。用户可以通过选择图块（用鼠标右键单击）并更改设置（“更大”或“更小”）来控制图块的大小。

# sql - sql query not working correctly (about picking the random records)

> ID：12886551
> 
> 赞同：0
> 
> 时间：2012-10-14T21:08:56.153
> 
> 标签：sql, sql-server

```
USE [cms]
GO
/****** Object:  StoredProcedure [dbo].[SpCateProductsInfo]    Script Date: 10/14/2012 00:50:25 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER proc [dbo].[SpCateProductsInfo](@cate_id int)
as
begin
select sb.subcate_name, sum(p.qty) as totalqty, 
(select top 1 pimg_mid1 from product join subcategory
on product.subcate_id=
(
    select top 1 subcate_id
    from subcategory
    where cate_id=@cate_id
    order by NEWID()
)
order by NEWID()) as pimg_mid1
from subcategory sb 
  join product p on p.subcate_id = sb.subcate_id
where sb.cate_id = @cate_id
group by sb.subcate_name

end 
```

It is working f9, But the problem is that the pimg_mid1 column contains same entries (**every row regarding the pimg_mid1 column contains same data**)

can any one tell me abt this error and the solution ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:15:54.863

由于 pimg_mid1 基于：

```
SELECT TOP 1 PIMG_MID1 
FROM   PRODUCT 
       JOIN SUBCATEGORY 
         ON PRODUCT.SUBCATE_ID = (SELECT TOP 1 SUBCATE_ID 
                                  FROM   SUBCATEGORY 
                                  WHERE  CATE_ID = @cate_id 
                                  ORDER  BY Newid()) 
ORDER  BY Newid() 
```

并且这个子查询不受它所附加的单个行的影响，它总是会返回相同的结果。

“正确”的做法是这样的：

```
SELECT t1.COLA, 
       T1.COLB, 
       T2.COLZ 
FROM   (SELECT *, 
               Row_number() 
                 OVER ( 
                   ORDER BY COLA) RN 
        FROM   MAIN)T1 
       INNER JOIN(SELECT COLZ, 
                         Row_number() 
                           OVER ( 
                             ORDER BY Newid()) RN 
                  FROM   RANDOM)T2 
               ON T1.RN = T2.RN 
```

请参阅SQL Fiddle 上[的](http://sqlfiddle.com/#!3/6095e/15)示例。

# iphone - Launching another iPhone App from my App and if it is already installed or not?

> ID：12886554
> 
> 赞同：1
> 
> 时间：2012-10-14T21:09:25.723
> 
> 标签：iphone, app-store, ios, custom-url

Launching another iPhone App from my App? This feature needs to behave like this:-

a) If the App is not installed, then open the App Store with the application selected

b) If the App is installed, then open the Application

I already have custom URL. So I am able to open given app if it is installed on iPhone. **But I want to to send user to app store if it is not installed already, so that he can download the app and start using it right away**

***How to check if app is already installed or not?? Please help.***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:16:10.510

使用`canOpenURL:`on`UIApplication`查看是否有可以响应您的自定义 URL 的应用程序。如果返回 true，则使用自定义 URL 打开应用程序，否则打开 App Store 链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:22:23.810

[此处](https://stackoverflow.com/questions/3512228/how-to-check-programatically-if-an-app-is-installed)已发布了类似的答案。这应该是您实现目标所需的代码：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"YOUR-URL-SCHEME://"]]) {
// Your App is installed
} else {
// Open iTunes
} 
```

# objective-c - can anyone help how to get data from a plist, precisely inside the array

> ID：12886556
> 
> 赞同：2
> 
> 时间：2012-10-14T21:09:33.017
> 
> 标签：objective-c, xcode, xcode4.3

Can anyone help me with getting data from this plist? I'm having trouble accessing the values of the three objects in the plist.

i can see all the list of countries in my tableView, but i can't see the prices when i tap on a cell . any help please thanks

**MY PLIST**

![plist snapshot](../Images/77ef2a94c28152ef61981392451a1698.png)

```
<plist version="1.0">
<dict>
    <key>Afghanistan 3</key>
    <array>
        <string>RC $1.65</string>
        <string>CC $2.36</string>
        <string>EC 0</string>
    </array>
    <key>Albania 1</key>
    <array>
        <string>RC FREE</string>
        <string>CC $1.01</string>
    </array>
    <key>Algeria 2</key>
    <array>
        <string>RC $0.27</string>
        <string>CC $0.85</string>
    </array>
    <key>Andorra 2</key>
    <array>
        <string>RC FREE</string>
        <string>CC $0.93</string> 
```

also my code that i have implemented in xcode 4.5 . cc is the calling rate that is in item 0 in the plist rc is the receiving rate that is in item 1 in the plist
ec is the extra rate that is in item 2 in the plist

how can i see the cc ,rc, & ec each in a label when i click the cell in the next view controller ? MY CODE

```
NSString *ratesFile = [[NSBundle mainBundle] pathForResource:@"rates" ofType:@"plist"];
    rates = [[NSDictionary alloc]initWithContentsOfFile:ratesFile];
    NSArray * dictionaryKeys = [rates allKeys];
    name = [dictionaryKeys sortedArrayUsingSelector:@selector(compare:)];
    cc = [rates objectForKey:@"Item 0"];
    rc = [rates objectForKey:@"Item 1"];
    ec = [rates objectForKey:@"Item 2"];

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [rates count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSString *countryName = [name objectAtIndex:indexPath.row];
    cell.textLabel.text = countryName;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSString *ccRate = [cc objectAtIndex:indexPath.row];

    if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }

    self.detailViewController.detailItem = ccRate;

    [self.navigationController pushViewController:self.detailViewController animated:YES];
} 
```

thank in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:37:28.347

您对 cc、rc 和 ec 的访问权限不正确。在您的**didSelectRowAtIndexPath:**方法中，您需要获取与 indexPath 关联的键的数组。然后从那里你得到数组值。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *countryName = [name objectAtIndex:indexPath.row];
    NSArray *countryInfo = [rates objectForKey:countryName];

    // the countryInfo array has the RC, CC, and EC values.
} 
```

请注意，“rates”没有具有“Item 0”、“Item 1”等键的对象。rates 在一个数组中。数组没有键控。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:34:05.780

在 cellForRowAtIndexPath 中执行此操作 - 数组是键（名称）的值

```
NSString *rc = [[rates objectForKey:name] objectAtIndex:0];
NSString *cc = [[rates objectForKey:name] objectAtIndex:1]; 
```

# windows-installer - MSI Inno Parameter Passing Correctly

> ID：12886557
> 
> 赞同：1
> 
> 时间：2012-10-14T21:09:47.963
> 
> 标签：windows-installer

I spent time searching for an answer but still can't quite figure this out.

I have this MSI file that I can run this command to silent install it.

```
msiexec.exe /i theapp.msi /q INSTALLDIR=C:\myapp CLIENTDATA=34542@localhost.com 
```

With Inno, I attempted the following and my MSI will not silently install. What I do receive is this window ![image](../Images/037f179d7a713f093388f46a49b55f36.png) will pop up automatically so obvious there is a probleming passing the commands to the msiexec process.

```
#define MyAppName "fooApp"
#define MyAppVersion "1.0"
#define MyAppPublisher "fooUser"
#define MyAppURL "http://foo.com"
#define MyAppExeName "MyProg.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{E633BAE8-81C7-4190-9964-D86287FAA8F4}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
CreateAppDir=no
OutputBaseFilename=setup
Compression=lzma
SolidCompression=yes
ShowTasksTreeLines=True

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Files]
Source: "D:\theapp.msi"; DestDir: "    {tmp}";
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Run]
Filename: "msiexec.exe"; Parameters: "/i /q CLIENTDATA=34542@localhost.com    {tmp}\theapp.msi"""; Flags: runascurrentuser shellexec 
```

Underneath the [Run] section if I use this line I the MSI is launched correctly in interactive mode where the user will fill in the parameters manually which I don't want the m doing.

```
Filename: "msiexec.exe"; Parameters: "/i ""{tmp}\theapp.msi""" 
```

In another post, I saw someone mention to use this function but I couldn't find any sample code on how to actually use it.

```
function ParamStr(Index: Integer): 
```

Thanks for any direction here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:37:33.677

这是我想出如何做我想做的事情的一种方法。

```
Filename: "msiexec.exe"; Parameters: "/i {tmp}\theapp.msi /qb CLIENTDATA=34542@localhost.com"; Flags: runascurrentuser shellexec 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T16:00:05.350

在“msiexec.exe”行上使用“/passive”参数。

示例：来源：“D:\Onedrive\vbfiles\InstaladorCrystal\CRRedist2005_x86.msi”；目标目录：{tmp}；复制模式：总是覆盖；

文件名：“msiexec.exe”；参数：“/i”“{tmp}\CRRedist2005_x86.msi”“ **/passive** ”；工作目录：“{tmp}”；StatusMsg: "正在安装 Crystal Reports 32 位..."; 检查：不是 IsWin64(); 标志：skipifsilent

# c# - Cannot implicitly convert type from Task<>

> ID：12886559
> 
> 赞同：69
> 
> 时间：2012-10-14T21:10:17.187
> 
> 标签：c#, async-await

I am trying to master async method syntax in .NET 4.5\. I thought I had understood the examples exactly however no matter what the type of the async method is (ie `Task<T>`), I always get the same type of error error on the conversion back to `T` - which I understood was pretty much automatic. The following code produces the error:

> Cannot implicitly convert type '`System.Threading.Tasks.Task<System.Collections.Generic.List<int>>`' to '`System.Collections.Generic.List<int>`'

```
public List<int> TestGetMethod()
{
    return GetIdList(); // compiler error on this line
}

async Task<List<int>> GetIdList()
{
    using (HttpClient proxy = new HttpClient())
    {
        string response = await proxy.GetStringAsync("www.test.com");
        List<int> idList = JsonConvert.DeserializeObject<List<int>>();
        return idList;
    }
} 
```

It fails if I explicitly cast the result as well. This:

```
public List<int> TestGetMethod()
{
    return (List<int>)GetIdList();  // compiler error on this line
} 
```

somewhat predictably results in this error:

> Cannot convert type '`System.Threading.Tasks.Task<System.Collections.Generic.List<int>>`' to '`System.Collections.Generic.List<int>`'

Any help greatly appreciated.

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-06-04T23:17:31.500

您的示例的主要问题是您无法将`Task<T>`返回类型隐式转换为基本`T`类型。您需要使用 Task.Result 属性。请注意，Task.Result 将阻塞异步代码，应谨慎使用。

试试这个：

```
public List<int> TestGetMethod()  
{  
    return GetIdList().Result;  
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-14T23:59:07.893

您还需要制作 TestGetMethod`async`并在前面附加 await`GetIdList();`会将任务解包到`List<int>`，因此，如果您的辅助函数正在返回 Task ，请确保您在调用该函数时`async`也有 await 。

```
public Task<List<int>> TestGetMethod()
{
    return GetIdList();
}    

async Task<List<int>> GetIdList()
{
    using (HttpClient proxy = new HttpClient())
    {
        string response = await proxy.GetStringAsync("www.test.com");
        List<int> idList = JsonConvert.DeserializeObject<List<int>>();
        return idList;
    }
} 
```

**另外的选择**

```
public async void TestGetMethod(List<int> results)
{
    results = await GetIdList(); // await will unwrap the List<int>
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T21:42:55.317

根据您要执行的操作，您可以使用 GetIdList().Result 阻止（通常是一个坏主意，但很难说出上下文）或使用支持异步测试方法并让测试方法执行的测试框架var 结果 = 等待 GetIdList();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T18:42:41.117

我刚刚弹出了同样的问题，但解决方案与其他问题不同。我正在使用异步方法中的两个异步调用，这段代码给了我错误：

```
var fileContents = reader.ReadToEndAsync();
if (fileContents != null)
{
     var profile = await Task.Run(() => JsonConvert.DeserializeObject<T>(fileContents));
     return profile;
} 
```

这是修复。我忘记了第一行的异步：

```
var fileContents = await reader.ReadToEndAsync();
if (fileContents != null)
{
     var profile = await Task.Run(() => JsonConvert.DeserializeObject<T>(fileContents));
     return profile;
} 
```

错误消息显示在 var profile = ... 行的“fileContents”上，因此并不能立即看出错误在哪里。

# php - PHPMailer 和 S/MIME

> ID：12886568
> 
> 赞同：1
> 
> 时间：2012-10-14T21:11:42.910
> 
> 标签：php, security, phpmailer, digital-certificate, smime

对于学校作业，我们必须发送来自银行的安全电子邮件（我们就是银行）。为了保护这些电子邮件，我使用 PHPMailer。PHPMailer 包含一个 Sign($cert_filename, $key_filename, $key_pass) 方法，该方法使用证书对电子邮件进行签名。我猜这会使电子邮件“安全”，并且客户可以真正知道是银行发送电子邮件。我正在使用 SMTP 通过我自己的域发送电子邮件。

为了获得证书，我在[这个网站](http://www.instantssl.com/ssl-certificate-products/free-email-certificate.html)上创建了一个证书，安装在我的浏览器中。

现在的问题是：如何使用该证书来签署我使用 PHP 脚本和 PHPMailer 发送的电子邮件？我已经从我的浏览器 (FF) 中导出了证书，这会生成一个 .p12 文件，但我认为 .p12 文件不是我想要的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:21:37.277

在您的 class.phpmailer.php 文件中更改数据：

```
public   $sign_cert_file = ’’; 
public   $sign_key_file  = ’’; 
public   $sign_key_pass  = ’’; 
```

比找到出现的：

```
if (@openssl_pkcs7_sign($file, $signed, "file://".$this->sign_cert_file, array("file://".$this->sign_key_file, $this->sign_key_pass), null)) { 
```

并更改为：

```
if (@openssl_pkcs7_sign($file, $signed, file_get_contents($this->sign_cert_file), array(file_get_contents($this->sign_key_file), $this->sign_key_pass), null)){ 
```

这意味着您通过对象 $this->sign_key_file 而不是文件包含 file://

比更改您的临时名称：

```
$file = tempnam(’’, ’mail’);
...
$signed = tempnam("", "signed"); 
```

到：

```
$file = tempnam(’./tmp/’, ’mail’);
...
$signed = tempnam("./tmp/", "signed"); 
```

这意味着您正在使用 tmp 目录服务器。

现在如何显示发送和放置数据证书文件的示例：

```
require("class.phpmailer.php");
$mail = new PHPMailer();
$mail->IsMail();

$mail->AddAddress("email@example.com");
$mail->Subject = "Test 1";
$mail->Body = "Test 1 of PHPMailer.";

// CUSTOMISED SIGN EMAIL : START
$mail->sign_cert_file="/xxx/key.pem";
$mail->sign_key_file="/xxx/key.pem";
$mail->sign_key_pass="yyy";
// CUSTOMISED SIGN EMAIL : END

$mail->Send(); // Send encrypted email! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T18:29:12.143

您现在可以使用以下`sign()`功能添加签名证书：

```
require_once 'PHPMailerAutoload.php';
$mail = new PHPMailer();
$mail->AddAddress("email@example.com");
$mail->Subject = "Test";
$mail->Body = "Test";

$mail->sign(
    'cert.crt',
    'cert.key',
    'password',//required even if empty
    'certchain.pem'
);

if( !$mail->Send() ){
    echo $mail->ErrorInfo;
} 
```

[https://github.com/PHPMailer/PHPMailer/blob/master/examples/smime_signed_mail.phps#L77](https://github.com/PHPMailer/PHPMailer/blob/master/examples/smime_signed_mail.phps#L77)

# php - 从 Zend 的 headTitle() 获取页面标题

> ID：12886571
> 
> 赞同：3
> 
> 时间：2012-10-14T21:12:30.610
> 
> 标签：php, zend-framework2

在 ZF2 中，我使用以下方法设置页面标题：

```
$title = 'Sign In';
$this->headTitle($title); 
```

而在 layout.phtml 中，这用于生成标题中的标题元素：

```
echo $this->headTitle('SalesCom')->setSeparator(' - ')->setAutoEscape(false); 
```

那么我如何才能从 layout.phtml 中获取 $title 以在正文中设置页面标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T05:47:51.043

HeadTitle 助手实际上实现了 ArrayAccess，因此您可以简单地执行以下操作：

```
$title = $this->headTitle();
$part  = $title[0]; 
```

如果你有 PHP 5.4，那就更好了：

```
$part = $this->headTitle()[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T21:04:34.940

如果您有多个“段”，则可以通过以下方式检索整个标题：

```
<?php echo $this->headTitle()->renderTitle() ?> 
```

来源： http: [//framework.zend.com/manual/current/en/modules/zend.view.helpers.head-title.html](http://framework.zend.com/manual/current/en/modules/zend.view.helpers.head-title.html)

# r - 大小不同的向量的堆积条形图

> ID：12886572
> 
> 赞同：0
> 
> 时间：2012-10-14T21:12:36.200
> 
> 标签：r

我想先描述一下我的问题/情况：我有一个庞大的数据集。由于一列中的数字（> 0），我过滤了我的数据。在此列中也有 1、2、3。所以计划是生成一个堆叠的条形图。这些条由另一列表示（12 个不同的名称 - 请参见下面的示例）这是我的数据的一个小示例：

```
dat <- array(c("dbdb1", "dbdb2","dbdb1",
               "dbdb4","dbdb1","dbdb1",
               "dbdb2","dbdb4","dbdb1",
               1,1,1,2,2,3,1,2,1),dim=c(9,2)) 
```

所以现在我要用我的数据集中的数字来分隔它们，`subset(data_set, "column"==1)`或者`==2`，`==3`（这有点难看......）

例子：

```
mod1=as.vector(data_set, Phospho==1)
mod2=as.vector(data_set, Phospho==2)
    ... 
```

之后，我使用 as.vector 函数将列（在带有 dbdbX 条目的示例中）隔离为向量。`as.vector1=as.vector(mod1$dbdbColumn)` 现在我尝试使用`barplot(table(as.vector1,as.vector2)`

但由于它们的长度不同，我不能使用它。

你能帮帮我吗？谢谢！我希望我的问题很清楚，如果不是很抱歉

最好的问候和 thx 提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:21:49.067

你的问题有点不清楚。这会给你想要的结果吗？请注意，我已将您的示例数据编辑为数据框，以免将数字强制转换为文本...

```
dat <- data.frame(category=c("dbdb1","dbdb2","dbdb1","dbdb4","dbdb1","dbdb1","dbdb2","dbdb4","dbdb1"),value=c(1,1,1,2,2,3,1,2,1))
tab <- table(dat$value,dat$category)
barplot(tab,legend=rownames(tab)) 
```

结果如下：

![堆积条形图](../Images/4a7a0a244d55ea5724638a6ad3e7709a.png)

# irc - 实施 IRC RFC：如何响应 MODE？

> ID：12886573
> 
> 赞同：3
> 
> 时间：2012-10-14T21:12:37.737
> 
> 标签：irc

我正在尝试编写自己的 IRC 服务器。我正在引用 IRC RFC，但这对我来说有点困惑。如果我严格遵守 RFC，我认为任何流行的客户端都不会与我的服务器一起使用，例如 mIRC。例如，RFC 说服务器应该响应成功的 MODE 命令以下数字响应之一：`RPL_BANLIST`、`RPL_CHANNELMODEIS`、`RPL_ENDOFBANLIST`、`RPL_UMODEIS`。这会让我相信，在成功更改用户模式时，我会使用 RPL_UMODEIS 进行响应，尽管 RFC 似乎没有明确说明这一点。

但是，当我检查另一个开源 IRC 服务器的源代码时，我看到它以“MODE”的非数字命令响应。它只是回显它看起来像的 MODE 命令。

你应该如何响应 MODE 命令？有没有更好的格式的 RFC，它有一个简单的命令和响应图表，或者什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:08:32.407

RFC 1459 以稀疏着称。它并没有告诉您编写服务器所需的一切。

`MODE`在这种情况下，缺少的是查询现有模式的`MODE`命令和设置新模式的命令之间的区别。在模式查询的情况下，客户端将收到指示现有模式的数字回复；在更改模式的情况下，除非出现错误，否则客户端将不会收到直接的数字回复。但是，如果模式*成功*更改，则客户端将收到`MODE`来自服务器的通知，通知其更改。

例如，如果客户的昵称是`foo`并且它发送：

```
MODE foo 
```

然后这是查询其当前用户模式 ​​- 它会期望得到`RPL_UMODEIS`如下回复：

```
:irc.example.org 221 foo :+i 
```

如果客户端然后发送：

```
MODE foo :+w 
```

那么这正在改变它的用户模式——它要么得到一个数字错误，要么得到`ERR_USERSDONTMATCH`模式改变的确认：

```
:foo!foo@bar.com MODE foo :+w 
```

请注意，从技术上讲，此确认不是对的直接回复`MODE`- 它是服务器通知客户端其状态的相关更改，这恰好是由客户端命令触发的。

通道模式也存在类似的情况。如果客户端通过以下方式查询当前通道模式：

```
MODE #channel 
```

那么它将期望一个`RPL_CHANNELMODEIS`包含当前“简单”通道模式的`RPL_CREATIONTIME`响应，并且可能是一个给出通道创建时间的响应。如果它使用以下命令查询当前的禁止列表：

```
MODE #channel b 
```

然后应该得到零个或多个`RPL_BANLIST`响应，然后是`RPL_ENDOFBANLIST`.

相反，如果客户端尝试更改通道模式：

```
MODE #channel :+k zounds 
```

那么直接回复要么是错误回复，要么什么都没有；如果通道模式实际改变了，它会看到`MODE`命令回显。在后一种情况下，成功的`MODE`命令也将被发送到通道的其他成员——这有助于说明它并不是对初始`MODE`命令的直接回复，而是对它的间接响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T03:22:50.093

它应该是用户模式字符串。通常的响应是：

*   对于 +/- b 模式：`RPL_BANLIST`和/或禁止列表然后`RPL_ENDOFBANLIST`
*   对于通道模式：`RPL_CHANNELMODEIS`
*   使用 rmodes：`RPL_UMODEIS`

有时发出 MODE 命令不是为了更改模式而是列出它（例如不带任何参数的 +b）。因此，作为回应，您可以给出适当的数字代码，然后将模式吐回。[在RFC 2812 更新到 RFC 1459](https://www.rfc-editor.org/rfc/rfc2812)中，有更多关于从服务器返回的信息，该更新更侧重于客户端。

# c++ - 在 C++ 中组织平台特定代码的推荐方法是什么？

> ID：12886575
> 
> 赞同：6
> 
> 时间：2012-10-14T21:12:53.387
> 
> 标签：c++, cross-platform

如果我想为多个平台编写我的 C++ 应用程序，例如 Windows 和 Linux，那么推荐的编写平台代码的方式是什么？存在什么模式、类层次结构等来完成这项任务？我应该如何组织我的代码、头文件和源文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:18:36.030

I don't get your question completely, but generally you should separate your platform dependent code from platform independent one. for example you may have a folder `platform` and inside it a folder for each platform that supported by you, then you may have `win32/mutex.hpp`, `linux/mutex.hpp`, `mac/mutex.hpp` and in each of them you may add implementation of mutex for that platform. Then all you need is a single selector header that based on platform select correct file and include it. For example `platform/mutex.hpp` that include any of specified files in correct platform.

But beside that, take a look at `boost` it implement many platform dependent code in a platform independent manner, you can learn from it and you may see implementation of your platform dependent code there!!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T21:18:57.660

1.  Stick to standards defined by C++ ISO specifications.
2.  Use PLATFORM independent libraries (like Boost and Qt and Fltk)
3.  Make sure you don't use COMPILER specific extensions, or atleast stick to 1 SINGLE compiler(recommended: G++ which is cross platform)

    Follow these first. Patterns are but means of organising code. Standard patterns allowed by a language theoretically remain the same across all platforms, so that shouldn't be a part of the problem

4.  Use #ifdef MACROS to code platform specific path to files, platform specific libraries for networking etc.

More you remain platform independent, more you will have to rely on third party toolkits.

Organization:

```
FOLDERS: program
         |_plaf
         |_headers
         |_source
         |_makescripts

plaf
|_win32 //contains windows specific wrapper functions in header files
|_unix  //contains unix specific wrapper functions in header files

headers: //contains platform independent headers
lib: //contains platform independent static libraries
sources: //contains .h and .cxx(or .cc or .cpp) files. ONE file per class with main function in main.cxx 
```

# ipad - handleLongPressGesture：移动鼠标时只设置一个引脚

> ID：12886584
> 
> 赞同：0
> 
> 时间：2012-10-14T21:13:57.667
> 
> 标签：ipad, mkmapview

我正在使用 handleLongPressGesture 函数在 MKMap 上设置引脚。但是当我长按并移动时，我的地图上会出现很多图钉。

我能做些什么来禁止这个？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:27:56.177

您必须检查状态，例如...

```
- (void)longPressGestureDetected:(id)sender
{
    UILongPressGestureRecognizer* gesture = (UILongPressGestureRecognizer*)sender;
    UIGestureRecognizerState state = [gesture state];
    if (state == UIGestureRecognizerStateBegan) {
        set a pin here.
    }
} 
```

# iphone - 为什么我的带有 Facebook 的 PhoneGap 应用程序会忽略所有点击？

> ID：12886586
> 
> 赞同：0
> 
> 时间：2012-10-14T21:14:09.477
> 
> 标签：iphone, ios, facebook, cordova, ios-simulator

我有一个 PhoneGap 应用程序，我刚刚在其中添加了 Facebook iOS SDK，但是在运行 iPhone 模拟器时，所有点击都被忽略（即，当我点击任何东西时，什么都没有发生）。当我单击主页按钮时，我可以看到按钮被按下，但没有任何反应（我的应用程序没有最小化）。

我刚刚使用 iOS 6 升级到 Xcode 4.5。我遵循了[PhoneGap Facebook 指南](https://github.com/davejohnson/phonegap-plugin-facebook-connect)，但似乎我做错了什么，我不知道它是什么 - 我没有收到任何错误。我得到的唯一输出是：

```
2012-10-14 17:11:45.529 MyAppName[18019:19a03] Multi-tasking -> Device: YES, App: YES 
```

有没有人遇到过这个问题或知道可能是什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:56:05.057

升级后一定是 Xcode 的 bug。我重新启动它，模拟器再次工作。

# internationalization - 多语言网站根据ip和seo更改语言

> ID：12886588
> 
> 赞同：2
> 
> 时间：2012-10-14T21:14:12.800
> 
> 标签：internationalization, seo, geolocation, multilingual

我有一个多语种网站（主要语言是希腊语，次要语言是英语）。我正在考虑创建一个脚本，以便在默认情况下仅在希腊和塞浦路斯显示希腊语，而其他国家则为英语。这可以通过 ip 轻松完成。

对于最终用户来说，这将是很棒的！搜索引擎怎么样。Google 我认为它使用美国 ip 抓取网站，这意味着它只能看到该网站的英文版本。是否有任何替代解决方案来处理 SEO 问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:47:28.733

首先，单独对客户端 IP 进行地理定位是确定向新用户显示哪种语言的较差方法。IP 地址位置可能非常不可靠，尤其是当用户使用蜂窝数据连接时。

相反，使用客户端通过 HTTP 标头实际告诉您的是他们的语言`Accept-Language`。大多数浏览器根据他们在浏览器安装期间决定的用户选择正确设置（或稍后在浏览器首选项中更改它）。

一旦您习惯于`Accept-Language`对要显示的正确语言内容做出良好的初步估计，您还应该为用户提供一种在您的网站中做出不同选择的方法。一旦用户点击链接以查看另一种语言的网站，将该选择存储在 cookie 或他们的帐户首选项中，以便您下次访问时显示相同的语言。请记住，他们的下一次访问可能来自他们在另一个国家/地区的笔记本电脑。

给考虑这样做的其他人的提示：**避免使用标志作为更改语言的一种方式**。没有一对一的标志与语言相关性，您可能会进一步混淆或冒犯某些用户。提供目标语言的语言选择（例如，为西班牙语提供带有“En Español”的链接）。

只要您提供链接以选择其他语言（“En Español”、“In English”等），搜索引擎也会搜索这些链接，您的 SEO 排名也会相应提高。事实上，拥有可选择**的多语言内容是提高您的 SEO 排名的好方法，**因为它可以带来更多的传入链接，并让世界上的 Google 认识到您拥有更多独特的内容。仅供参考，提供即时自动翻译内容的链接（使用谷歌翻译之类的东西）不会提高您的 SEO 排名，因为它被认为是相同的内容。

# python - 显示允许的 HTTP 方法

> ID：12886589
> 
> 赞同：3
> 
> 时间：2012-10-14T21:14:28.083
> 
> 标签：python, http, rest, methods

我想使用 HTTP OPTIONS 方法获取允许的 HTTP 方法，如下所示：

```
telnet site.com 80
OPTIONS / HTTP/1.0 
```

结果：

```
HTTP/1.1 200 OK
Date: Sun, 14 Oct 2012 21:04:39 GMT
Server: Apache
Allow: GET,HEAD,POST,OPTIONS
Content-Length: 0
Connection: close
Content-Type: text/html 
```

如何使用 Python 库做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:24:55.673

```
import httplib
conn = httplib.HTTPConnection('w3.com')
conn.request('OPTIONS', '/')
response = conn.getresponse()
print response.getheader('allow') 
```

结果是

```
OPTIONS, TRACE, GET, HEAD, POST 
```

# c - 什么可能导致错误“malloc：对象 0x7b 的 *** 错误：未分配指针被释放”

> ID：12886591
> 
> 赞同：0
> 
> 时间：2012-10-14T21:14:28.433
> 
> 标签：c, malloc, free, runtime-error

我正在为一堂课编写这个程序。该程序是一个使用堆栈的简单括号检查器应用程序。在这种情况下，我使用了静态数组来实现堆栈数据结构。该程序构建良好，但我遇到了这个运行时错误，到目前为止还无法看到问题可能出在哪里。

这是我确实了解的很少信息，问题可能是由于尝试释放未使用 malloc 分配的内存。但在下面的代码中，我看不出这可能发生在哪里。

下面是使用静态数组的栈的接口实现代码。我还添加了堆栈接口代码以在堆栈上添加字符和驱动程序以测试例程。

```
#include "stack.h"
#include "stdlib.h" /* malloc, free */
#include "stdio.h"

#define MAXSTACKSIZE 10

struct stack_record {
  generic_ptr base[MAXSTACKSIZE];
  generic_ptr * top;
};

unsigned int num_elements(stack * const p_S)
{
  unsigned int numels = ((*p_S)->top - (*p_S)->base);
  /*  return ((*p_S)->top - (*p_S)->base); */
  printf("number of elements in the stack is: %u\n", numels);
  return numels;
}
status init_stack(stack * const p_S)
{
  stack_record * record = (stack_record *)malloc(sizeof(stack_record));
  if(record == NULL) {
    return ERROR;
  }
  record->top = record->base;
  *p_S = record;
  return OK;
}
bool empty_stack(stack * const p_S)
{
  if(num_elements(p_S) == 0)
    {
      printf("stack is EMPTY!\n");
      return TRUE;
    }
  else
    {
      printf("stack NOT Empty!\n");
      return FALSE;
    }
}
status push(stack * const p_S, generic_ptr const data)
{
  if (num_elements(p_S) == MAXSTACKSIZE)
    return ERROR;

  *( (*p_S)->top ) = data;
  (*p_S)->top++;
   return OK;
}

status pop(stack * const p_S, generic_ptr * const p_data)
{
  if (empty_stack(p_S) == TRUE)
    return ERROR;
  *p_data = *((*p_S)->top);
  (*p_S)->top--;
  /*  ((*p_S)->top)--; */
  return OK;
}

status top(stack *const p_S, generic_ptr * const p_data)
{
   if (pop(p_S, p_data) == ERROR)
    return ERROR;

  return push(p_S, *p_data);
}

void destroy_stack(stack * const p_S, void (* const p_func_f)())
{
  if ((p_func_f) != NULL) {
    generic_ptr * curr;    
    for(curr = (*p_S)->top;
    curr != (*p_S)->base;
    ++curr)
          (*p_func_f)(*curr);
  }
  free(*p_S); /*free the dynamically allocated memory on the heap */
  *p_S = NULL;
 } 
```

以下是字符的堆栈接口例程：

```
/*************************************************************************/
/* adapted from Esakov and Weiss, Section 5.2                            */
/*************************************************************************/

#include "char_stack.h"
#include "stdlib.h" /* malloc */
#include "stdio.h"
#define DEBUG 1 

status push_char(stack * const p_S, char const c)
{
  /*
   *     Push the character c onto the stack.
   */
  char * p_c = (char *) malloc(sizeof(char));

  if(p_c == NULL)
    return ERROR;
  *p_c = c;

  if(DEBUG)
  /* Debug code: begin */
  {
    printf("Character to PUSH on the stack: %c\n", *p_c);
  }
  /* Debug code: end */

  if (push(p_S, (generic_ptr)p_c) == ERROR) {
    if(DEBUG)
      printf("char_stack: push_char: failed to push the character on the stack!\n");
    free(p_c);
    return ERROR;
  }
  return OK;
}

status pop_char(stack * const p_S, char * const p_c)
{
  /*
   *     Pop the stack. Return the character in p_c.
   */

  generic_ptr p_data;

  if( pop(p_S, &p_data) == ERROR)
    return ERROR;

  *p_c = *((char*)p_data);

  if(DEBUG)
  /*Debug code: begin */
printf("char_stack.c::pop_char: Character to POP on the stack: %c\n", *p_c);

  /*Debug code: end */

   free(p_data);
   return OK;
}

status top_char(stack * const p_S, char * const p_c)
{
  /*
   *     Return the top character from the stack in p_c
   */
  generic_ptr p_data;

  if (top(p_S, &p_data) == ERROR)
    return ERROR;

  *p_c = *((char *)p_data); 
  return OK;
} 
```

应用程序的驱动程序：

```
/**************************************************************************/
/* adapted from Esakov and Weiss, Section 5.2                             */
/**************************************************************************/

#include "stdio.h"
#include "stdlib.h"
#include "char_stack.h"

char matching_symbol(char const c)
{
  switch(c) {
    case '(': return ')';
    case ')': return '(';
    case '}': return '{';
    case '{': return '}';
    case '[': return ']';
    case ']': return '[';
  }
  return 0;
}

status consume_char(stack * const p_S, char input)
{
  switch (input) {
    case '(':
    case '{':  
    case '[':
      return push_char(p_S, input); 
    case ')':
    case '}':
    case ']':
      { 
        char c;    
        if (pop_char(p_S, &c) == ERROR || c != matching_symbol(input)) { 
          return ERROR;
        } else {
          return OK;
        }
      }
    default:
      return OK; 
  }
}

int main(int argc, char * argv[])
{

  if (argc == 1) {
    exit(EXIT_SUCCESS);
  }

  {
    stack S;

    init_stack(&S);

    {
      char *ptr;
      for (ptr = argv[1];
           *ptr != '\0' && consume_char(&S, *ptr) == OK;
           ++ptr); 
      if (*ptr == '\0' && empty_stack(&S)) { 

    destroy_stack(&S,free);
        exit(EXIT_SUCCESS);
      } else {
    destroy_stack(&S,free);
        exit(EXIT_FAILURE);
      }
    }
  }  

  exit(EXIT_SUCCESS);  
} 
```

我想在驱动程序中补充一点，我已经缩小了对销毁堆栈的调用是触发此问题的原因。但我已经查看了这段代码，并认为这段代码很好，问题出在其他地方。

[编辑 1]：为了完整起见，我在调用这些函数的位置附加了驱动程序代码。[编辑 2]：添加了字符的堆栈接口例程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:20:27.957

错误消息告诉您您将值 0x7b 传递给`free`. 这么小的数字永远不会是从返回的内存块的地址`malloc`。所以，粗略地说，有三种可能：

1.  你有一个完全未初始化的指针，它恰好以 0x7b 结束，你将它传递给`free`.
2.  您从一个包含 0 的指针开始，将其递增 0x7b，然后将其传递给`free`.
3.  您有一些更具创造性的内存损坏错误，已将有效指针值替换为 0x7b。

最快的出路是在 valgrind 下运行你的程序，让它告诉你这一切发生在哪里。您也可以在 gdb 中到处放置断点，然后查看您看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T05:04:24.407

在`main`函数的末尾，您将`free`作为函数指针作为第二个参数传递给`destroy_stack`. 这一点是针对`free`当前在堆栈上的所有数据元素（如果有的话）。但是，只有在将项目添加到堆栈时`push`用于分配内存的函数才允许释放此内存。`malloc`

在给定的实现中，堆栈不负责为项目分配内存，因此它可能不应该尝试释放该内存。在任何一种情况下，寻找差异的地方都可能在函数中`push_char`：

看起来`push_char`正在尝试推送一个简单的 '{' 字符（顺便说一句，这是`0x7B`），而不是指向`malloc`堆栈所期望的某些内存的指针。

**更新**

从头开始我`push_char`在上一段中所说的 - 问题在于`destroy_stack`，这一行：

```
(*p_func_f)(*curr);    /* Incorrect */ 
```

`curr`是指向为单个字符（由 分配`push_char`）分配的一些内存的指针，并且`*p_func_f`是`free()`函数。你能看出问题吗？

将其`curr`传递给`*p_func_f`. 相反，只需传递原始指针：

```
(*p_func_f)(curr);     /* Correct */ 
```

发现这一点的关键与我上面提到的相同：“内存地址”`0x7b`实际上是字符“{”，它是存储在堆栈中的数据——这强烈表明该`free`函数正在接收原始数据而不是指向该数据的指针。

# c - 如何在内核空间中获取文件的元数据 - linux 3.5

> ID：12886593
> 
> 赞同：-6
> 
> 时间：2012-10-14T21:14:48.527
> 
> 标签：c, linux, file, linux-kernel, metadata

给定一个文件路径，我怎样才能得到它的元数据。这是我的问题：我必须真正隐藏一个文件（即使使用 ls -a 它也不应该出现在任何地方）并且我不需要保证它在返回时将具有相同的状态。现在我虽然可以复制元数据并将其存储在某个地方，只是在需要时才将其写回，这将解决我的问题

1.  我必须创建该元数据的副本并将其存储在另一个地方。
2.  我必须能够在我想要的时候复制回那个元数据。

那么如何获取文件的元数据呢？如果有更好的方法来完全隐藏文件我该怎么办？

这是一个个人项目，我不会有任何上游代码。

我正在使用 linux 内核 3.5.4v

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:15:28.013

我又想了想这个问题。

当然，有一些特定于文件系统的方法可以创建真正隐藏文件的可能性，但我对探索这些完全不感兴趣。但是，有一种不同的方法，一种变体，可能适合您的需求。

`open`您可以通过仅拦截系统调用（准确地说是扩展现有系统调用）来实现类似的效果。如果打开的文件解析为不存在的文件，但目录和文件名匹配，那么您不会失败，而是构建“隐藏”文件的特殊路径，然后打开它。

现有文件将是一个完全正常的文件，实际上只是在其他地方。当然，你也可以把它放在一个root只能访问的目录下`drwx------ root:root`（

# c++ - 矩阵中字符的随机移动

> ID：12886596
> 
> 赞同：1
> 
> 时间：2012-10-14T21:15:16.553
> 
> 标签：c++, algorithm, random

我试图创建一个程序，显示一个 10x10 的字符矩阵，并在其中显示一个字符，并且每 600 毫秒该字符会随机移动。但我的问题是，每次我运行程序时，都是同一个动作。

如果您查看函数 Random_move，我使用了函数 Rand()... 我也尝试使用 srand(time(null)); 以前，但这只会使两个字符 a 和 b 始终朝同一个方向移动。有人可以帮忙吗。

```
#include <iostream>
#include <windows.h>
#include <time.h>
using namespace std;

class mapa
{
    private :
    char map[10][10];
    char background[10][10];
    public :
    mapa();
    void cpy_btom();
    void copy_to_map(int, int, char);
    void print();
};
class character
{
    private :
    int posx;
    int posy;
    char type;
    public :
    character(char,int,int);
    void send_print(mapa &);
    void random_move(mapa &);
    void delay(int);
};

int main()
{
    character C1('A', 5, 5);
    character C2('B', 8, 2);
    mapa Mapa;
    while(!GetAsyncKeyState(VK_ESCAPE))
    {
        Mapa.print();

        C1.delay(750);

        C1.random_move(Mapa);
        C2.random_move(Mapa);
    }
}

void mapa :: cpy_btom()
{
    for(int a = 0;a < 10;a++)
    {
        for(int b = 0;b<10;b++)
        {
            map[a][b] = background[a][b];
        }
    }
}
void mapa :: print()
{
    system("cls");

    for(int a = 0;a<10;a++)
    {
        for(int b = 0;b<10;b++)
        {
            cout << map[a][b];
        }
        cout << endl;
    }
    cpy_btom();
}
character :: character(char kind = 'a', int x = 5, int y = 5)
{
    type = kind;
    posx = x;
    posy = y;
}
void character :: send_print(mapa & mapa)
{
    mapa.copy_to_map(posx, posy, type);
}

void character :: random_move(mapa & MAP)
{

    int a = rand() % 5;
    int b = rand() % 50;
    if(a == 0) //x --
    {
        if(b < 45)
        {
            if(posx > 0)
                posx--;
        }
        else
        {
            if(posx > 1)
            posx = posx - 2;
        }
    }
    else if(a == 1)
    {
        if(b < 45)
        {
            if(posx < 10)
            posx++;

        }
        else
        {
            if(posx < 9)
            posx = posx + 2;
        }
    }
    else if(a == 2)
    {
        if(b < 45)
        {
            if(posy > 0)
            posy--;
        }
        else
        {
            if (posy > 1)
            posy = posy - 2;
        }
    }
    else if(a == 3)
    {
        if(b < 45)
        {
            if(posy < 10)
            posy++;
        }
        else
        {
            if(posy < 9)
            posy = posy + 2;
        }
    }
    send_print(MAP);
}

void character :: delay(int time)
{
    int a = clock();
    int b = clock() + time;
    while(a < b)
    {
        a = clock();
    }
}
mapa :: mapa()
{
    for(int a = 0;a < 10;a++)
    {
        for(int b = 0;b < 10;b++)
        {
            map[a][b] = ' ';
            background[a][b] = ' ';
        }
    }
}

void mapa :: copy_to_map(int x, int y, char kind)
{
    map[x][y] = kind;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:17:26.367

尝试`srand(time(0))`在`main`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:17:37.127

您只能在启动程序时播种一次，而不是每次调用`rand`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:10:36.637

只是为了给其他答案添加一些上下文，`rand`只产生一个伪随机值序列（即序列中的下一个数字不依赖于前一个数字）。它是完全确定的，因此每次都产生相同的序列。

为了每次获得不同的序列，您必须“播种”随机数。通常这是通过在您选择的偏移量处开始序列来完成的。一个合理的值是一个永远不会两次相同的数字，即当前日期/时间。这是`srand(time(0))`从哪里来的。

# objective-c - iOS 对象在 Storyboard 中的动态定位

> ID：12886597
> 
> 赞同：1
> 
> 时间：2012-10-14T21:15:19.190
> 
> 标签：objective-c, ios, ios5, interface-builder, storyboard

我很难弄清楚如何在 DetailView 故事板中动态定位对象。

对于初学者，该应用程序遵循传统的博客格式，其中 MasterView 是一个 UITableView（或 UICollectionView），其中包含多个帖子。

当用户点击其中一个时，segue 会导致 DetailView。

一切都正确加载，除了 DetailView 中元素的定位。

这是它的外观：

![在此处输入图像描述](../Images/0497d1511a13fbbb0f441b6601042ebc.png)

顶部`UIImageView`具有固定高度，因此不会与`Post Text Label`.

但是，`Post Text Label`由于某些帖子文本比其他文本更长，因此具有可变高度。这是由我正在使用的一个类别来处理的，它可以动态调整它的大小（`resizeToFit`）。这一切都很好。

现在的问题是，`Post Text Label`随着垂直增长，我需要`View - Byline`（绿色矩形）根据`Post Text Label`垂直大小向下移动。我就是不能让它向下移动。

您可以看到我将所有`View - Byline`对象都放在了一个视图中，因此它们通过仅针对`View - Byline`以编程方式更改位置来一起移动。

你知道我可以用什么方法来完成这个吗？非常感谢任何指针、教程或智慧。

**DetailViewController.h**

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController {
    IBOutlet UIImageView  *postThumbView;
    IBOutlet UILabel      *postTextLabel;
    IBOutlet UIImageView  *postAuthorPictureView;
    IBOutlet UILabel      *postAuthorNameLabel;
    IBOutlet UILabel      *postTimestampLabel;
    IBOutlet UIScrollView *scroller;
    IBOutlet UIView       *postBylineView;
}

@property (strong, nonatomic) id detailItem;

@end 
```

**细节视图控制器.m**

```
...
[postThumbView setImageWithURL:[NSURL URLWithString:postThumbUrl] placeholderImage:[UIImage imageNamed:@"default"]];

[postAuthorPictureView setImageWithURL:[NSURL URLWithString:authorPicture] placeholderImage:[UIImage imageNamed:@"default"]];

postTextLabel.text  = postText;
postTextLabel.frame = CGRectMake(postTextLabel.frame.origin.x,
                                 postThumbView.frame.origin.y + postThumbView.frame.size.height,
                                 postTextLabel.frame.size.width,
                                 postTextLabel.frame.size.height);
[postTextLabel resizeToFit];

postAuthorNameLabel.text = postAuthorName;
postTimestampLabel.text  = postTimestamp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T00:31:37.743

如果你的目标是 ios6，你应该检查自动布局约束。如果不是，您不能使用与重新定位 postTextLabel 相同的方法吗？因此，对于 postByLine，将其相对于 post textLabel 的底部定位。

```
postByLine.frame = CGRectMake(postByLine.frame.origin.x,
                                      postTextLabel.frame.origin.y + postTextLabel.frame.size.height,
                                      postByLine.frame.size.width,
                                      postByLine.frame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:53:15.387

我认为阅读[@edwin 推荐的帖子](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)对于理解 AutoLayout 很重要。

例如，虽然我在故事板中启用了 AutoLayout，但元素并没有按预期调整它们的位置。

问题（在上面链接的帖子中解决）是 AutoLayout 期望您最初将元素彼此相邻放置在一定距离阈值内，否则它不会创建（和维护）它们之间的关系。

如果您查看我上面的原始帖子，您会看到绿色矩形（署名）。随着帖子文本的垂直大小增加，它并没有向下移动。

那是因为当我最初创建署名框时，我把它放在离帖子文本标签的底部边界太远的地方。当我将它拖得更近时，两个元素之间会出现一个 h 形图标，表示已创建关系。

然后一切都按预期工作。大多数默认距离阈值约为 8 点，但一旦建立关系，您可以稍后根据需要增加距离。

# asp.net-mvc-3 - 如何使用 ElementAt() 方法访问索引项？

> ID：12886599
> 
> 赞同：0
> 
> 时间：2012-10-14T21:15:27.067
> 
> 标签：asp.net-mvc-3

我正在尝试使用 ElementAt() 方法循环访问项目。在我看来，我有两个正在使用的模型：

```
 List<SchoolIn.ViewModels.EnrolledCourseData> courses = ViewBag.Courses;        List<SchoolIn.Models.Enrollment> dayofclass = ViewBag.classDay; 
```

然后在 foreach 循环中我有这个：

```
 foreach (var course in courses.Select ((x,i)=>new{Data=x,Index=i}))
  {

     @course.Data.Title 
     if (course.Index < dayofclass.Count())
      { 

                @dayofclass.ElementAt(course.Index).classDays

      }

      if (Model.Enrollments != null)
      {

       @Html.DropDownList("searchString", Model.WeekDays.Select(s => new SelectListItem { Text = s.ToString(), Value = s.ToString() })) 
       @Html.DropDownList("searchString", Model.Enrollments.FirstOrDefault().WeekDays.Select(s => new SelectListItem { Text = s.ToString(), Value = s.ToString(), Selected = s.ToString().Equals(dayofclass.ElementAt(course.Index).classDays) })) 

      }

 } 
```

这条线按预期工作。它在 classDays 模型的这个索引处打印字符串：@dayofclass.ElementAt(course.Index).classDays

我想要的是使用 ElementAt() 方法将这个相同的字符串放在下拉列表中。这是引发 ArgumentOutOfRange 异常的代码部分：

等于（dayofclass.ElementAt（course.Index）.classDays

如果我像这样硬编码... Equals(dayofclass.ElementAt(4).classDays... 它可以工作，所以我认为必须有某种方法来获取我的 classDays 中的元素。有什么想法吗？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:03:16.217

你得到一个 ArgumentOutOfRangeException 因为整数参数可能比你的 dayofclass 列表/数组长度的大小长。

我想你的 Index 属性就是它通常的意思。如果是这样，您应该确认这两个列表具有相同的大小。

您的硬编码 4 值有效，因为 dayofclass 长度至少为 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:08:50.237

在这里'我解决了它：

```
 String sellectedDay = dayofclass.ElementAt(course.Index).classDays; 
                   String sellectedDay = dayofclass.ElementAt(course.Index).classDays; <!---sets the element to a local variable to be used by the dropdown list--->

         selectedday = sellectedDay; 
```

# java - 如何在不使用 Swing 类/方法的情况下嵌套布局管理器？

> ID：12886600
> 
> 赞同：2
> 
> 时间：2012-10-14T21:15:43.270
> 
> 标签：java, applet, awt, layout-manager, java-6

我需要用 Java 6 制作一个 640*480 像素的小程序，底部有一个工具栏，上面有一些按钮、滚动条和标签。我能想到的最好方法是使用 a `BorderLayout`，使`BorderLayout.SOUTH`区域 a `GridBagLayout`（将包含控件）和`BorderLayout`区域的其余部分为空，作为使用控件绘制图形的地方。我在网上找不到任何不使用swing的资源，而且我对swing一无所知以推断他们在做什么或如何将其翻译成awt代码。这就是我现在的位置。代码在 中突然结束`init()`，因为这是布局管理器开始的地方。感谢您提供的任何帮助。如果您需要更多信息，请告诉我这里有什么。

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class Bounce extends Applet implements ActionListener, AdjustmentListener
{
    private static final long serialVersionUID = 1L;
    private Graphics page;
    //buttons
    String shapeButtonText = "Square";
    Button shape = new Button(shapeButtonText);
    Button quit = new Button("Quit");
    Button run = new Button("Run");
    Button tail = new Button("Tail");
    Button clear = new Button("Clear");

    //labels
    Label speedLabel = new Label("Speed", Label.CENTER);
    Label sizeLabel = new Label("Size", Label.CENTER);

    //scrollbars
    private final int barHeight = 20;
    private final int SLIDER_WIDTH = 10;
    private final int MAXSPEED = 110;
    private final int MINSPEED = 0;
    private final int UNIT_INC = 1;
    private final int BLOC_INC = 10;
    private final int MAX_SIZE = 110;
    private final int MIN_SIZE = 10;
    Scrollbar speedBar = new Scrollbar(Scrollbar.HORIZONTAL, MINSPEED, SLIDER_WIDTH, 0, MAXSPEED);  
    Scrollbar sizeBar = new Scrollbar(Scrollbar.HORIZONTAL, MIN_SIZE, SLIDER_WIDTH, 0, MAX_SIZE);

    //methods   
    public void init()
    {
        //set up objects
        //speed scroll bar
        speedBar.setUnitIncrement(UNIT_INC);
        speedBar.setBlockIncrement(BLOC_INC);
        speedBar.setValue(MAXSPEED/2);

        //size scrollbar
        sizeBar.setUnitIncrement(UNIT_INC);
        sizeBar.setBlockIncrement(BLOC_INC);
        sizeBar.setValue(MAX_SIZE/2);

        //draw the window
        BorderLayout window = new BorderLayout();
        GridBagLayout toolbar = new GridBagLayout();
        //?
    }

    public void start()
    {
    }

    public void run()
    {
    }

    public void actionPerformed(ActionEvent e)
    {
    }

    public void adjustmentValueChanged(AdjustmentEvent e)
    {
    }

    public void stop()
    {
    }

    public void destory()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:52:40.957

让我们澄清一些事情。a `LayoutManager`s 被 a `Container`（例如`Frame`、`Panel`或`Applet`）用来计算 中的组件的位置和大小`Container`。这意味着谈论“嵌套`LayoutManager`s”是不正确的。另一方面，您可以将`Container`s 嵌套在彼此内部并赋予每个 s 自己的`LayoutManager`。我相信这就是你想要做的。

让我用一个人为的例子来说明这一点：

```
public class MyGUI {
    public static void main(String[] args) {
        Frame f = new Frame("Layout Example");
        Panel mainPanel = new Panel(new BorderLayout());
        f.add(mainPanel);

        Panel toolBar = new Panel(new FlowLayout());
        toolBar.add(new Button("Button 1"));
        toolBar.add(new Button("Button 2"));
        mainPanel.add(tollBar.NORTH);

        Panel statusBar = new Panel(new FlowLayout());
        statusBar.add(new Label("Status"));
        mainPanel.add(statusBar);

        f.pack();
        f.show();
    }
} 
```

请注意，您需要`Panel`为每个`LayoutManager`. 或者更确切地说`Panel`，您创建的每个都需要一个`LayoutManager`. 此外，这个例子可以很容易地从 AWT 更改为 Swing，只需`Frame`用`JFrame`、`Panel`with `JPanel`、`Button`with`JButton`和`Label`with 替换`JLabel`。

ps 以上代码未经测试。不过，它应该说明这里涉及的概念。

# mysql - MySQL 三路三角形查询

> ID：12886602
> 
> 赞同：0
> 
> 时间：2012-10-14T21:16:02.257
> 
> 标签：mysql

我有一个团队、学校和作业的数据库。选择作业后，学校（无论如何都是其用户）可以将团队添加到作业中，以便他们可以开始处理作业。ER 图如下所示： ![数据库的ER图](../Images/8c0e40ae99ad730d9bc7a72e527c6212.png) **重要提示：**即使数据库的设置另有说明，团队<-> 分配关系也是 1:N。一个团队只能完成一项任务。这是通过 ORM 系统控制的。

现在有一个问题：数据库中有团队在处理不属于他们学校的作业：学校选择作业，创建了一个团队并删除了他们的作业选择。我需要找到属于这种情况的学校（id、name）。

到目前为止，我设法提出的最佳查询是：

```
SELECT schools.school_id, schools.name
FROM schools
LEFT JOIN teams ON schools.school_id = teams.school_id
LEFT JOIN assignment_teams ON teams.team_id = assignment_teams.team_id
LEFT JOIN assignment_schools ON schools.school_id = assignment_schools.school_id
WHERE assignment_teams.assignment_id != assignment_schools.assignment_id; 
```

但是当我手动检查结果时它不起作用。我正在寻找的正确查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:02:02.843

其中一个应该可以工作，但我不知道哪个是最快的：

1.  ```
     SELECT school_id
      FROM teams
      INNER JOIN assignment_teams ON teams.team_id = assignment_teams.team_id
      LEFT JOIN assignment_schools ON assignment_schools.school_id = teams.school_id AND  assignment_schools.assignment_id = assignment_teams.assignment_id
      WHERE assignment_schools.school_id IS NULL 
    ```

2.  ```
    SELECT school_id
      FROM teams
      INNER JOIN assignment_teams ON teams.team_id = assignment_teams.team_id
      WHERE assignment_id NOT IN (
        SELECT assignment_id
          FROM assignment_schools
          WHERE assignment_schools.school_id = teams.school_id
      ) 
    ```

3.  ```
    SELECT school_id
      FROM teams
      INNER JOIN assignment_teams ON teams.team_id = assignment_teams.team_id
      WHERE NOT EXISTS (
        SELECT *
          FROM assignment_schools
          WHERE assignment_schools.school_id = teams.school_id
          AND assignment_schools.assignment_id = assignment_teams.assignment_id
      ) 
    ```

# haskell - yesod 在空闲时是否使用处理器？

> ID：12886604
> 
> 赞同：13
> 
> 时间：2012-10-14T21:16:10.047
> 
> 标签：haskell, yesod

我使用 yesod 创建了一个非常简单的应用程序。它不是很常用，但是当我使用 htop 检查时，它比服务器中的所有其他进程消耗了更多的 cpu 时间，包括运行时间更长的进程。此外，当我启动该过程时，我发现它的处理器使用时间不断增加，即使没有发出请求（大部分时间没有发出请求）。这在 yesod 应用程序中是常见的还是预期的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T23:50:36.223

尝试禁用空闲 GC：

```
./app +RTS -I0 -RTS 
```

可能，yesod 有一个线程用当前时间更新 IORef 触发空闲 GC，就像这张票[http://hackage.haskell.org/trac/ghc/ticket/4322](http://hackage.haskell.org/trac/ghc/ticket/4322)

# php - 我如何优化这个搜索结构？

> ID：12886607
> 
> 赞同：0
> 
> 时间：2012-10-14T21:16:27.373
> 
> 标签：php, mysql, sql, database, query-optimization

我正在开发一个 Web 应用程序，让用户可以在数据库中搜索项目。这些项目分为几个类别。返回的每个搜索项根据其字段值以不同方式显示。目前我建立了一个类来处理显示和另一个来处理搜索。搜索类使用多个用户输入构建 SQL 查询，在数据库中查询与用户输入匹配的项目的 ID，并将数组中的 ID 发送到显示类。

执行此操作的代码摘录：

```
//the sql query is actually a little more complex than this
$query = "SELECT items.id FROM items, subcategories WHERE {$name} AND items.`base_school` = '{$_SESSION['base_school']}' AND items.subcategory = subcategories.id AND subcategories.parent_category = {$search_category} ORDER BY `time_added` DESC {$limit}";
$result = $DB_CONNECTION->query($query);
$newly_added = array();
while  (list($id) = $result->fetch_row()) $result[] = $id;
searchDisplay::print_result($result); 
```

显示类一个接一个地查询数据库以获取每个项目的完整详细信息，并将其显示为应显示的内容。

我的问题是在第一次查询数据库并将数据存储在数组中然后将该数组传递给显示类而不是让显示类使用项目的唯一 ID 查询每个项目的数据库？我目前的解决方案目前运行良好，但我需要知道当数据库开始增长（大约 500,000 行）时我的方法是否会出现问题。

其次，使用用户提供的几个搜索条件过滤来自数据库的数据。构建一个包含几个连接以适应所有用户条件的复杂查询，还是编写一个适应主要过滤器的简单查询，然后使用 PHP 过滤与搜索条件不匹配的少数剩余结果会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:27:16.250

在我看来，每个步骤都需要对结果进行过滤，否则随着数据越来越大，查询将变得缓慢。因此，上一段中提到的策略是最佳策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:28:59.957

您应该始终尽量避免将查询置于循环中。单个查询，即使它很复杂，通常也更快并且可以更好地扩展。像所有“规则”一样，也有例外。如果循环比复杂查询快得多，那么您应该坚持使用循环，因为您知道它不会增长到进行数十或数百次迭代（对吗？）。

至于在数据库或 PHP 中进行过滤，通常最好在数据库中进行，并避免通过网络传输无用的数据。在 MySQL 中使用 HAVING 选项通常等同于在 PHP 中进行过滤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:45:25.430

您需要牢记延迟。通常对于运行缓慢的联网应用程序，延迟是罪魁祸首。

即使每个单独的查询都很小并且可以快速执行，它们都有延迟。你说最坏的情况，100 个查询。

即使每个查询只有 10 毫秒的延迟（请记住，每个查询都需要网络驱动程序的开销、线路上的实际往返时间等），您也不必要地添加 100*10ms = 1 秒（以计算机术语来说非常长）。

很可能只需不到一秒的时间就可以简单地执行 1 个查询，一次获取所有信息。然后你只会招致一次延迟惩罚。

所以我建议重写你的方法来使用一个查询，并按照你的建议传递数组。

像这样的事情总是会通过测试，因为人们在客户端和服务器之间的延迟非常低的环境中进行测试（例如在没有太多活动的同一台服务器上）。然后应用程序进入现实世界，客户端和服务器都很忙并且相距数百英里......

# php - 与守护程序文件 (JAXL) 交互

> ID：12886608
> 
> 赞同：1
> 
> 时间：2012-10-14T21:16:31.747
> 
> 标签：php, javascript, command-line-interface, daemon

我正在学习 JAXL 以与我的 XMPP 服务器交互。JAXL 创建守护程序文件以向 XMPP 服务器发送和接收数据。这是我第一次使用任何类型的守护程序文件，我完全迷失在这个过程中。

我能够通过 CLI 初始化和运行守护进程，但我不知道下一步该做什么，也找不到任何关于如何执行此操作的文档（对于 JAXL）（我一直在寻找大约 5 个小时） .

对以下两个问题的任何帮助将不胜感激！

**1\. 如何使用 PHP 与命令行守护进程交互以发送和接收数据。**

**2\. 我将如何使用 Javascript 轮询命令行守护程​​序以返回数据？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:02:38.643

JAXL 库提供了两个 IPC 接口用于与您的 xmpp 客户端/组件守护进程进行交互：

1.  Unix 套接字域 - 默认情况下，JAXL 守护程序支持此功能。您只需要在启动主循环时启用它们。请参阅[examples/echo_bot.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/echo_bot.php#L143)，最后它使用`'--with-unix-sock' => true`. 完成此操作后，您可以远程连接到这些后台守护程序，有关详细信息，请参阅[调试运行实例文档。](http://jaxl.readthedocs.org/en/latest/users/jaxlctl.html#debug-running-instances)
2.  管道 - 您拥有的另一个选择是使用管道与后台守护进程通信。有关更多详细信息，请参见[示例/pipes.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/pipes.php)。您需要自己将所需的逻辑编码到您的应用程序文件中。

对于通过 javascript 使用 JAXL 守护程序，有很多方法可以做到这一点。一些面向客户的方法如下：

1.  JAXL v3.x 支持 BOSH，您可以找到一个工作[示例/http_bind.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/http_bind.php)。该示例不完整，使用它需要您自担风险（已警告您）。不过，您可以将这个想法用于您的应用程序开发，将此示例与 JAXL HTTP 协议支持结合起来，将数据推送到您的 javascript 客户端。您甚至可以修改此示例以使用[JAXL v2.x BOSH 样式](https://github.com/abhinavsingh/JAXL/blob/master/app/boshchat.php)。
2.  一个稳定的选择是扩展[examples/xmpp_rest.php](https://github.com/abhinavsingh/JAXL/blob/v3.x/examples/xmpp_rest.php)。此示例演示如何为 XMPP 守护程序公开 REST 接口。

# mingw - 使用 MinGW 设置 GLFW

> ID：12886609
> 
> 赞同：9
> 
> 时间：2012-10-14T21:16:32.240
> 
> 标签：mingw, glfw

我正在尝试使用 GLFW 学习 OpenGL，但我遇到了一些问题。

这是我的 main.cpp：

```
#include <GL/glfw.h>

int main()
{
    glfwInit();
    glfwSleep( 1.0 );
    glfwTerminate();
} 
```

这是我项目的文件夹结构：

```
Project
+- glfw.dll
+- main.cpp 
```

这是我提取 GLFW 文件的地方：

```
MinGW
+- include
|   +- GL
|      +- glfw.h
+- lib
   +- libglfw.a
   +- libglfwdll.a 
```

这就是我尝试构建程序的方式：

```
g++ main.cpp -o main.exe -lglfwdll 
```

这些是我得到的错误：

```
C:\Users\Dark\AppData\Local\Temp\cc0ZgTVp.o:main.cpp:(.text+0xf): undefined reference to `_glfwInit'
C:\Users\Dark\AppData\Local\Temp\cc0ZgTVp.o:main.cpp:(.text+0x25): undefined reference to `_glfwSleep'
C:\Users\Dark\AppData\Local\Temp\cc0ZgTVp.o:main.cpp:(.text+0x2a): undefined reference to `_glfwTerminate'
collect2.exe: error: ld returned 1 exit status 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-20T16:40:19.360

根据您的环境[在此处](http://www.glfw.org/download.html)下载二进制文件。

```
Project
+- glfw3.dll (You can put it in System32 or SysWOW64 instead.)
+- main.cpp

MinGW
+- include
|   +- GLFW
|      +- glfw3.h
+- lib
   +- libglfw3.a
   +- libglfw3dll.a (Renamed from glfw3dll.a)

g++ -c main.cpp
g++ -o main.exe main.o -lglfw3dll -lopengl32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T21:40:28.740

I created makefile, it's for C, but you can edit it:

```
all:
    gcc -I ./include ./src/*.c -L ./lib -lglfw3dll -lopengl32 -lmingw32 -lgdi32 -luser32 -lkernel32 -lglew32 -o ./bin/main 
```

```
openglfolder:.
│   

makefile

│
├───bin
│       glew32.dll
│       glfw3.dll
│       main.exe

│
├───include
│       eglew.h
│       glew.h
│       glfw3.h
│       glxew.h
│       wglew.h

│
├───lib
│       glew32.dll
│       glew32.lib
│       glew32s.lib
│       libglfw3.a
│       libglfw3dll.a

│
└───src
        main.c 
```

edit : this works only for windows

# programming-languages - 什么是对矩阵计算和脚本接口有良好支持的好语言？

> ID：12886610
> 
> 赞同：3
> 
> 时间：2012-10-14T21:16:34.347
> 
> 标签：programming-languages, linear-algebra

我需要复习一些线性代数概念，我基本上需要将大部分工作专门用于*纯数学*，但我还需要使用和创建一些工具，如带有 OpenGL 的窗口或 3D 对象，以使数据可视化更容易。

你会建议哪种语言，它面向脚本，几乎不需要时间来构建和运行东西，易于调试并且对数学世界有很好的支持？

老实说，我认为 Python 是一个不错的选择，但我发现同时拥有同一种语言的 2 个主要版本并不是一件好事，很难找到可靠的来源来选择版本，并且大多数人都写过Python 忘记指定他们正在谈论的版本是什么。互联网上的 Python 文档确实被*污染*了，但这种语言对我来说可能已经足够好了。

我发现 Python 不太好的一件事是速度，如果我尝试做一些需要在几分之一秒内完成的事情，与 C++ 等编译语言相比，python 根本就没有那么快；但我不得不说，Python 可能是我所知道的唯一一种为复数提供本机支持的语言。

除了 Python 或您对 Python 的想法之外，我还想了解其他可能的选择。

短版：我需要做线性代数，我需要借助标准技术来从这个计算中获取信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:20:22.897

带有 NumPy 的 Python 是矩阵数学的不错选择。NumPy 是一个相当高性能的矩阵库，它适用于 Python 和许多其他标准包（例如 PyOpenGL、Python Imaging Library、SciPy、matplotlib 等）。

# python - 从列表中消除半重复项的高性能方法

> ID：12886611
> 
> 赞同：3
> 
> 时间：2012-10-14T21:16:40.547
> 
> 标签：python, performance, data-structures, loops

我有一系列谜题：字母或单词之间没有空格的摩尔斯电码字符串。我的计划是进行字典攻击以找到最佳解决方案候选者。我的武器是蟒蛇。

我有一个包含 17000 个英语单词的列表。我还有一个小得多的与谜题主题相关的单词列表，如果这些单词出现，它们的得分应该更高。

因此，当我生成单词列表时，在脚本的最开始，我使用形式为（单词，scoremultiplier）的元组列表。这是一个小子集：

```
[('zoned', 1.0), 
 ('zonely', 1.0), 
 ('zoner', 1.0), 
 ('zones', 1.0), 
 ('zoning', 1.0), 
 ('zoo', 1.0), 
 ('zoom', 1.0), 
 ('zoomed', 1.0), 
 ('zooming', 1.0), 
 ('zooms', 1.0), 
 ('zoos', 1.0), 
 ('ten', 1.0), 
 ('tens', 1.0), 
 ('gnash', 1.0), 
 ('shag', 1.0), 
 ('75th', 2.0), 
 ('seventy', 2.0), 
 ('fifth', 2.0)] 
```

在我解析出所有内容的文件中，我只想在最后粘贴高价值的单词，而不是手动删除文件主要部分中的任何重复项。所以我需要写一些东西来摆脱早期元组的第一个值等于后面的元组的值。

我可以用蛮力做到这一点：

```
for firstkey, (firstword, firstfactor) in enumerate(wordlist):
    for laterkey, (laterword, laterfactor) in enumerate(wordlist[firstkey+1:]):
        if firstword == laterword:
            del wordlist[firstkey]
            break 
```

但是仅脚本的那部分就需要将近 45 秒，而我的 17000 个单词甚至不是一本完整的字典。（除了完成所需的时间之外，该代码也未经测试，因此它甚至可能无法工作。）虽然我刚刚学习 Python（并且正在做一些我的第一次编程），但它似乎也非常非 Pythony有了这个项目。

有一个更好的方法吗？我不能使用`set()`，因为重复的单词是不相等元组的一部分。我需要以某种方式重组我的数据吗？还是我应该准备每次运行它时等待整整一分钟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:21:32.503

我可能误解了这个问题，但看起来你可以`dict`从元组列表中生成一个。后面的值会自动覆盖前面的值：

```
lst = [
    ('foo', 1),
    ('bar', 2),
    ('foo', 10)
]

print dict(lst) # {'foo': 10, 'bar': 2} 
```

# email - 间隔发送 PHP 邮件

> ID：12886612
> 
> 赞同：5
> 
> 时间：2012-10-14T21:16:42.637
> 
> 标签：email, php

我正在为我高中的学生会开发一个简单的短信服务，而我的托管服务只允许每分钟发送 19 条 PHP 邮件，所以有没有办法可以设置间隔只发送 15 封电子邮件，等待分钟，再发送 15 封邮件，等待，直到所有邮件都发送完毕？下面是我的一些代码，您可能需要看到的只是“foreach”部分。

```
$subject =     ""; 
$message =     "Hey, $first! $messageget";

$header =     'From: Student Council<email@email.net>' . "\r\n" .
               'Reply-To: email@email.net' . "\r\n" . 
              'X-Mailer: PHP/' . phpversion(); 

foreach($to as $value) { 

    $result = mail($value, $subject, $message, $header); 

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T22:02:45.890

在 60 秒内发送 15 封邮件相当于每 4 秒发送一封邮件。

因此，如果您有一个循环会一个接一个地发送所有邮件，那么您可以在发送完每封邮件后执行 a 来减速`sleep(4)`。

```
foreach($to as $value) { 
    $result = mail($value, $subject, $message, $header); 
    sleep(4);
} 
```

这比计算何时发送下一批 15 封邮件然后再等待 60 秒要容易得多。:)

此外，它会均衡 CPU 和网络资源的使用，并且不会在 60 秒后达到峰值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T21:24:46.537

对于这种情况，您可以使用 cron 作业。
[http://www.google.com.tr/?q=cron+job+sending+email+php&oq=php+cron+job+sending](http://www.google.com.tr/?q=cron+job+sending+email+php&oq=php+cron+job+sending)
[https://serverfault.com/questions/421485/cron-job-sending-一次批量发送电子邮件](https://serverfault.com/questions/421485/cron-job-sending-bulk-emails-at-a-time)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T21:27:08.177

```
foreach($to as $i=>$value) { 
    if($i%15==1) sleep(60);
    $result = mail($value, $subject, $message, $header);
} 
```

计数可以用 Modulus $i%15 完成（每 15 次运行一次），然后用 sleep(60) 暂停；

（上面的答案假设您的 array_keys 是数字并且按顺序，您也可以使用:)

```
$i=0;
foreach($to as $value) { 
    if($i%15==1) sleep(60);
    $result = mail($value, $subject, $message, $header);
    $i++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T21:18:17.733

您只需使用以下功能：

```
 sleep(60); 
```

把它放在你的循环中。

编辑：

对于电子邮件计数，只需在循环中添加已发送的电子邮件：

```
$i=0;  // about the foreach loop 
```

并在循环调用内

```
if($i<15){ $i++; continue; }
else{ $i=0; }

sleep(60); 
```

希望清除它。

EDIT2：如果没有，这里：

```
$subject =     ""; 
$message =     "Hey, $first! $messageget";

$header =     'From: Student Council<email@email.net>' . "\r\n" .
               'Reply-To: email@email.net' . "\r\n" . 
              'X-Mailer: PHP/' . phpversion(); 

$i=0;
foreach($to as $value) { 

    $result = mail($value, $subject, $message, $header); 

    if($i<15){ $i++; continue; }

  sleep(60);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T21:18:54.127

You can use the `sleep()` function :

```
 sleep(60); // wait during 60 seconds 
```

# jquery - jQuery 从一种颜色到另一种颜色

> ID：12886617
> 
> 赞同：-3
> 
> 时间：2012-10-14T21:17:37.190
> 
> 标签：jquery, css, fade

我有这个 div 字段：

```
<div id="idNumber1" style="color: #ffcc00">hello</div> 
```

所以，我们在屏幕上看到黄色的你好。

我想要做什么：我想让黄色的 hello 变成红色，然后淡出回到黄色。我怎样才能做到这一点？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:29:52.637

正如其他人指出的那样，该`animate()`功能本身不会改变颜色。但是，它可以与 CSS3 过渡结合以达到预期的效果：

```
#idNumber1 {
  color: #ffcc00;
  -webkit-transition: color 0.5s linear;
} 
```

```
function flash(id) {
  $(id).css('color', '#ff0000');
  setTimeout(function() {
    $(id).css('color', '#ffcc00');
  }, 500);
} 
```

像这样调用它，这将在 500 毫秒内将颜色变为红色，然后在 500 毫秒内将其改回黄色：

```
flash('#idNumber1'); 
```

当然，`idNumber1`这不是最具描述性的，您可能想要考虑更好的东西，或者使用类名来表示具有这种行为的元素。您可能还希望包含全部或部分完整的浏览器前缀转换：

```
-webkit-transition: color 1s linear;
-moz-transition: color 1s linear;
-o-transition: color 1s linear;
-ms-transition: color 1s linear;
transition: color 1s linear; 
```

有很多其他方法可以做到这一点，这里只是一种。

# python - BeautifulSoup 无法解析网页？

> ID：12886619
> 
> 赞同：5
> 
> 时间：2012-10-14T21:18:02.950
> 
> 标签：python, parsing, beautifulsoup

我现在正在使用漂亮的汤来解析网页，我听说它非常有名并且很好，但它似乎不能正常工作。

这就是我所做的

```
import urllib2
from bs4 import BeautifulSoup

page = urllib2.urlopen("http://www.cnn.com/2012/10/14/us/skydiver-record-attempt/index.html?hpt=hp_t1")
soup = BeautifulSoup(page)
print soup.prettify() 
```

我认为这很简单。我打开网页并将其传递给beautifulsoup。但这是我得到的：

`Warning (from warnings module):`

`File "C:\Python27\lib\site-packages\bs4\builder\_htmlparser.py", line 149`

`"Python's built-in HTMLParser cannot parse the given document. This is not a bug in Beautiful Soup. The best solution is to install an external parser (lxml or html5lib), and use Beautiful Soup with that parser. See http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser for help."))`

`...`

`HTMLParseError: bad end tag: u'</"+"script>', at line 634, column 94`

我认为 CNN 网站应该设计得很好，所以我不太确定发生了什么。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T21:54:34.797

From [the docs](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser):

> If you can, I recommend you install and use lxml for speed. If you’re using a version of Python 2 earlier than 2.7.3, or a version of Python 3 earlier than 3.2.2, it’s essential that you install lxml or html5lib–Python’s built-in HTML parser is just not very good in older versions.

Your code works as is (on Python 2.7, Python 3.3) if you install more robust parser on Python 2.7 (such as lxml or html5lib):

```
try:
    from urllib2 import urlopen
except ImportError:
    from urllib.request import urlopen # py3k

from bs4 import BeautifulSoup # $ pip install beautifulsoup4

url = "http://www.cnn.com/2012/10/14/us/skydiver-record-attempt/index.html?hpt=hp_t1"
soup = BeautifulSoup(urlopen(url))
print(soup.prettify()) 
```

[HTMLParser.py - more robust SCRIPT tag parsing](http://bugs.python.org/issue670664) bug might be related.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T21:41:32.867

您不能使用 BeautifulSoup 或任何 HTML 解析器来读取网页。您永远无法保证网页是格式良好的文档。让我解释一下在这个给定的情况下发生了什么。

在那个页面上有这个 INLINE javascript：

```
var str="<script src='http://widgets.outbrain.com/outbrainWidget.js'; type='text/javascript'></"+"script>"; 
```

You can see that it's creating a string that will put a script tag onto the page. Now, if you're an HTML parser, this is a very tricky thing to deal with. You go along reading your tokens when suddenly you hit a `<script>` tag. Now, unfortunately, if you did this:

```
<script>
alert('hello');
<script>
alert('goodby'); 
```

Most parsers would say: ok, I found an open script tag. Oh, I found another open script tag! They must have forgot to close the first one! And the parser would think both are valid scripts.

So, in this case, BeautifulSoup sees a `<script>` tag, and **even though it's inside a javascript string**, it looks like it could be a valid starting tag, and BeautifulSoup has a seizure, as well it should.

If you look at the string again, you can see they do this interesting piece of work:

```
... "</" + "script>"; 
```

This seems odd right? Wouldn't it be better to just do `str = " ... </script>"` without doing an extra string concatination? This is actually a common trick (by silly people who write script tags as strings, a bad practice) to make the parser NOT break. Because if you do this:

```
var a = '</script>'; 
```

in an inline script, the parser will come along and really just see `</script>` and think the whole script tag has ended, and will throw up the rest of the contents of that script tag onto the page as plain text. This is because you can technically put a closing script tag anywhere, even if your JS syntax is invalid. From a parser point of view, it's better to get out of the script tag early rather than try to render your html code as javascript.

So, you can't use a regular HTML parser to parse web pages. It's a very, very dangerous game. There is no guarantee you'll get well formed HTML. Depending on what you're trying to do, you could read the content of the page with a regex, or try getting a fully rendered page content with a [headless browser](https://stackoverflow.com/questions/6025082/headless-browser-for-python-javascript-support-required)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T08:50:36.670

you need to use html5lib parser with BeautifulSoup

To install the reqd parser use pip:

```
pip install html5lib 
```

then use that parser this way

```
import mechanize
br = mechanize.Browser()
html = br.open("http://google.com/",timeout=100).read()
soup = BeautifulSoup(html,'html5lib')
a_s = soup.find_all('a')
for i in range(0,len(a_s)):
 print a_s[i]['href'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-24T10:55:26.557

One of the Simplest thing you can do is, specify the content as "lxml". you can do it by adding "lxml" to the urlopen() function as a parameter

**page = urllib2.urlopen("[url]","lxml")**

Then your code will be as follow.

`import urllib2from bs4 import BeautifulSoup page = urllib2.urlopen("http://www.cnn.com/2012/10/14/us/skydiver-record-attempt/index.html?hpt=hp_t1","lxml") soup = BeautifulSoup(page) print soup.prettify()`

So far i didn't get any trouble from this approach :)

# php - Why my SQL is not executed?

> ID：12886620
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:18:03.690
> 
> 标签：php, mysql, sql

I do not understand why `mysql_query($update)` is not executed here. All code seems fine for me, var_dump'ing elements results expected values. `echo $passed_title;` Is executing without warnings from previous line which as said is not executed (DB is not updated). Why?

```
$ask_if_empty = "SELECT id FROM content WHERE id='{$passed_id}'";
$ask_if_empty2 = mysql_query($ask_if_empty) or die($error[25]);

if (mysql_num_rows($ask_if_empty2) !== 0) 
{
    $update = "UPDATE content SET title='{$passed_title}' WHERE id='{passed_id}'";
    mysql_query($update) or die($error[25]);
    echo $passed_title;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:21:34.343

You're missing a `$`:

```
$update = "UPDATE content SET title='{$passed_title}' WHERE id='{$passed_id}'"; 
```

I strongly recommend escaping strings before using them in sql queries. You can do this with `mysql_real_escape_string`. Otherwise you are open to sql injection attacks:

```
$passed_title = mysql_real_escape_string($passed_title); 
```

If `$passed_id` is an integer you should prevent malicious input by using `intval()`:

```
$passed_id = intval($passed_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:25:28.067

If the `id` column is an INTEGER, you might need to drop the single quotes around the value `id='{$passed_id}'`.

# php - HOW TO DB查询多表关系数据库

> ID：12886621
> 
> 赞同：0
> 
> 时间：2012-10-14T21:18:15.737
> 
> 标签：php, mysql, codeigniter

# `Customer table`

```
///////////////////////////////////////////////////////////
|      id[PR]  |      name        |       email           |  
|      10      |      fabio       |     fab@fab.com       |   
|      11      |      james       |     james@james.com   | 
```

# `Order table`

```
//////////////////////////////////////////////////////////////////
|  order_id[PR]  |  ship_to[FK]  |  bill_to[FK]   | customer[FK] |  product, total, etc
|      251       |       3       |         2      |       10     |  . . . 
```

# `Ship to table`

```
//////////////////////////////////////////////////////////////////////
|   customer[FK]  |  ship_to[PR]  |   label   |    address           |  city, state, zip, etc
|       10        |      3        |   office  |  123 main st         |  . . .
|       10        |      1        |   home    |  85 some place st    |  . . . 
```

# `Bill to table`

```
///////////////////////////////////////////////////////////////////////////
|   customer[FK]  |  bill_to[PR]  |   label   |    account                |  billing details
|       10        |      2        |   visa    |  AES_CRYPT(temp storage)  |   . . .
|       10        |      1        |     mc    |  AES_CRYPT(temp storage)  |   . . . 
```

好的，所以每个客户都可以在他们的帐户中记录多发往地址和多付款方式。当他们下订单时，订单表会存储购物车和会话信息。

我需要生成`invoices`如何构造我的查询，以便当我查找订单表时，我可以看到关联表中的行`ship to table`和行，`bill to table`而不是行的行。`id`

现在请注意，我不希望任何人编写我的代码，但如果可以的话，请给我一些链接来阅读这将是很棒的，或者一个例子会很棒。请注意我在 codeigniter 上构建，所以我使用 MVC 模式。

? - 所有这些查找应该在 1 个模型函数中构建，还是应该分布在模型中的多个函数中？

```
return $this->db->get('order_table')->result();
#this would return all the orders in the order table . 
```

在我的情况下，`view`我会 foreach 这些结果并使订单 ID 成为指向更多详细信息/发票页面的链接。如何将行中的值传递给模型查询以生成正确的详细信息/发票页面？

例如 - 因此，如果您单击订单 251，您将看到一个带有发票的详细信息页面，上面写着

1.  客户编号 10
2.  姓名：法比奥
3.  电子邮件：fab@fab.com
4.  运送到：办公室，123 main st...
5.  账单：签证，acct#等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:27:18.867

```
$this->db->join('customerTable','customerTable.id = orderTable.customer');
$this->db->join('shipToTable', 'orderTable.ship_to = shipToTable.ship_to');
$this->db->join('billToTable', 'billToTable.bill_to = orderTable.bill_to');
$this->db->where('order_id', $orderId);
$result = $this->db->get('order_table');
if($result->num_rows()==1)
{
    return $result->result_array();
} 
```

# javascript - 更优雅 solution?

> ID：12886624
> 
> 赞同：1
> 
> 时间：2012-10-14T21:18:21.023
> 
> 标签：javascript, html, noscript

The [`<noscript>` tag](http://www.w3schools.com/tags/tag_noscript.asp) can be used to display a message if the user has scripting turned off - but is there any way in which it can be used to contain a conditional (html) statement, or more complicated coding?

Edit: Sorry, perhaps I wasn't clear; I have nothing against the noscript tag itself - but was wondering about the upward limitations of its usage? As far as I have seen, its usage has been merely to tell people to turn scripting on. I'm thinking about potential in terms of accessibility.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:22:38.197

有什么问题`<noscript>`？它可以包含您想要的任何内容。从整个布局到`<style>`元素再到大胖警告信息。

显然，您不能在其中使用 JavaScript，但除此之外，您可以做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:27:13.453

坚持使用 noscript 标签，因为它是解决问题的标准方法。搜索引擎知道如何处理它，屏幕阅读器知道如何处理它，关闭 javascript 的人会看到一个花哨的警告/消息（带有一些 CSS）。

顺便说一句：如果脚本也被关闭，你就不能做任何花哨的事情。

在 noscript 标签中，您可以使用 body 标签中直接允许的所有元素。有关详细信息，请参阅您提供的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T21:20:04.813

你可以这样做：

```
<div id="removeIfJS">Sorry, but javascript is disabled</div>
<script>
 var sorry = document.getElementById("removeIfJS");
 sorry.parentNode.removeChild(sorry);
</script> 
```

# java - Generating JVM bytecode for a unary not expression

> ID：12886628
> 
> 赞同：8
> 
> 时间：2012-10-14T21:18:45.270
> 
> 标签：java, compiler-construction, jvm, javac, bytecode

Let's say you're writing a Java (or subset-of-Java) compiler and you want to generate bytecode for a unary not expression, `!E`. You're past type checking so you know `E` has type `boolean`, i.e. it will push a `1` or a `0` on to the operand stack.

One way to do it is something like (in Jasmin syntax):

```
E
ifeq truelabel
iconst_0
goto stoplabel
truelabel:
iconst_1
stoplabel: 
```

i.e. if there's a 0 on the stack push 1, else push 0\. Another way to do it, taking advantage of the fact that a `boolean` is just an `int` with value `1` or `0`, is to say `!E = (E + 1) % 2` and generate

```
E
iconst_1
iadd
iconst_2
irem 
```

Is there an advantage to using one over the other? Or something else entirely?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:51:20.280

我曾经尝试写一个Java反编译器，所以我曾经知道javac生成了什么代码。我记得，javac 1.0.x 使用`!E = E ? false : true`javac 1.1 `!E = E ^ 1`（按位异或）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:17:52.407

我不会指望以下定义在字节码级别上成立。

```
true == 1 
```

在二进制级别（及其几乎与语言无关），布尔值通常定义为

```
false == 0
true != 0 
```

javac 编译器显然也遵循这个定义（我见过的 javac 字节码中的所有检查总是检查零，从不检查 ONE）。

并且将此定义用于布尔值而不是仅将 1 视为 true 是有意义的，C 也以这种方式定义它（true 只是！= 0，而不仅仅是 1），并且在汇编代码中这种约定也很常用。所以java也使用这个定义使得可以在没有任何特殊转换的情况下将java布尔值传递给其他代码。

我怀疑您的第一个代码示例（使用 ifeq）是正确实现布尔值非运算符的唯一方法。如果布尔值未严格表示为 0/1，则 ^1 方法（与 1 异或）将失败。任何其他 int 值都会导致表达式无法正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:00:02.367

我听说模数运算可能非常慢。我没有它的来源，但考虑到添加比分割简单得多，这是有道理的。再说一次，在这种情况下，过多地跳转程序计数器可能会产生问题，在这种情况下，if/else 方法不会很好地工作。

话虽如此，我怀疑尼尔`E ^ 1`是最快的，但这只是一种预感。您所要做的就是将数字通过一个逻辑电路，您就完成了！只需一次操作，而不是少数。

# java - 用java读取文本文件——为什么会跳行？

> ID：12886638
> 
> 赞同：1
> 
> 时间：2012-10-14T21:20:12.667
> 
> 标签：java, file, text, token, readline

我是新来的，只是在努力尝试读取文本文件。每一行都有一个单词和一个相应的数字代码。这个想法是阅读它并将代码和单词放在单独的变量中。我对这个领域了解不多，但我一直在网上四处寻找，并提出以下几点：

```
try{
    FileReader freader=new FileReader(f); 
    BufferedReader inFile=new BufferedReader(freader);
    while (inFile.readLine()!=null){
       String s=null;
       s=inFile.readLine();
       System.out.println(s);
               String[] tokens=s.split(" ");
       string=tokens[0];
       System.out.println(string);
       code=tokens[1];
       System.out.println(code);
       c.insert(string, code);
    }//end outer while
}//end try 
```

问题是没有读取文本文件的第一行。然后它每次都跳过一行！（也就是说，只读取第 1、3、5、7 行等）

正如我上面所说的，我是新人，我对我在不同网站上看到的所有不同的东西不太了解（比如为什么所有东西都是 bufferedThis 或 bufferedThat，或者如何正确使用所有标记器的东西）。我在不同的时间尝试了一些不同的事情，最终得到了这个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T21:22:45.187

您的 while 循环正在吞噬文件中的一半行。

```
while (inFile.readLine()!=null) 
```

这会读取一行，但不会将其分配给任何东西。`String`在循环之前声明 a并以这种方式读取每一行。

```
String line;
while ((line = inFile.readLine()) != null) 
```

现在该变量`line`将在循环内可用，因此您无需`inFile.readLine()`在循环中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:27:07.177

你的问题是你每行都读了两次。一个在 while 块内，一个在 while 的条件下。

尝试这个：

```
try{
    FileReader freader=new FileReader(f); 
    BufferedReader inFile=new BufferedReader(freader);
    String s;
    while ((s=inFile.readLine())!=null){       
       System.out.println(s);
        String[] tokens=s.split(" ");
       string=tokens[0];
       System.out.println(string);
       code=tokens[1];
       System.out.println(code);
       c.insert(string, code);
    }//end outer while
}//end try 
```

# objective-c - NSOpenPanel 崩溃？

> ID：12886639
> 
> 赞同：2
> 
> 时间：2012-10-14T21:20:17.917
> 
> 标签：objective-c, cocoa, crash-reports, nsopenpanel

我遇到了一些严重的麻烦，看起来罪魁祸首是`NSOpenPanel`......

**我的代码类似于：**

```
NSOpenPanel *openPanel  = [NSOpenPanel openPanel];
[openPanel setCanChooseFiles:NO];
[openPanel setCanChooseDirectories:YES];

[openPanel setPrompt:@"Save Here"];

[openPanel beginSheetModalForWindow:[self thePanel] completionHandler:^(NSInteger result) {
if (result == NSFileHandlingPanelOKButton) {
        // DO SOMETHING WITH SELECTION
    }
    else {
        //[openPanel close];
    }
}]; 
```

问题来了（实际上，它从未发生在我身上（在 10.6.8 和 10.8.20 下），但我收到了来自用户的大量崩溃报告（几乎只运行 10.6））。

**这是崩溃报告：**

```
Process:         MY_APP_NAME + [1330]
Path:            /Users/Kellys/Desktop/MY_APP_NAME +.app/Contents/MacOS/MY_APP_NAME +
Identifier:      uk.co.insili.MY_APP_NAME
Version:         1.0 (1)
Code Type:       X86-64 (Native)
Parent Process:  launchd [112]

Date/Time:       2012-10-14 15:51:41.911 -0500
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          2449375 sec
Crashes Since Last Report:           10
Per-App Interval Since Last Report:  3037 sec
Per-App Crashes Since Last Report:   10
Anonymous UUID:                      AE022341-E3DA-4AF1-9BAD-F960E79D80DF

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000030
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Application Specific Information:
objc[1330]: garbage collection is ON

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   com.apple.AppKit                0x00007fff83b669de -[NSImage _allocAuxiliaryStorage] + 158
1   com.apple.AppKit                0x00007fff83ceaf05 -[NSImage copyWithZone:] + 66
2   com.apple.AppKit                0x00007fff83fd543c -[NSNavView _setupNormalFileListModeControl] + 154
3   com.apple.AppKit                0x00007fff83fd5f32 -[NSNavView awakeFromNib] + 204
4   com.apple.CoreFoundation        0x00007fff835909fd -[NSSet makeObjectsPerformSelector:] + 205
5   com.apple.AppKit                0x00007fff83b6185b -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1445
6   com.apple.AppKit                0x00007fff83c08d14 -[NSNib instantiateNibWithExternalNameTable:] + 564
7   com.apple.AppKit                0x00007fff83c08a92 -[NSNib instantiateNibWithOwner:topLevelObjects:] + 233
8   com.apple.AppKit                0x00007fff83fd6b07 +[NSNavView navView] + 109
9   com.apple.AppKit                0x00007fff84044062 -[NSSavePanel(NSSavePanelLayout) _initContentView] + 1230
10  com.apple.AppKit                0x00007fff8403d60b -[NSSavePanel initWithContentRect:styleMask:backing:defer:] + 367
11  com.apple.AppKit                0x00007fff84041af5 +[NSSavePanel _crunchyRawUnbonedPanel] + 198
12  uk.co.insili.MY_APP_NAME        0x0000000100002d5f 0x100000000 + 11615
13  com.apple.AppKit                0x00007fff83cf2eda -[NSApplication sendAction:to:from:] + 95
14  com.apple.AppKit                0x00007fff83cf2e39 -[NSControl sendAction:to:] + 94
15  com.apple.AppKit                0x00007fff83d7e84b -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1715
16  com.apple.AppKit                0x00007fff83daf37a -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 555
17  com.apple.AppKit                0x00007fff83d7d2f5 -[NSControl mouseDown:] + 624
18  com.apple.AppKit                0x00007fff83c973a7 -[NSWindow sendEvent:] + 5409
19  com.apple.AppKit                0x00007fff83bccafa -[NSApplication sendEvent:] + 4719
20  com.apple.AppKit                0x00007fff83b636de -[NSApplication run] + 474
21  com.apple.AppKit                0x00007fff83b5c3b0 NSApplicationMain + 364
22  uk.co.insili.MY_APP_NAME        0x0000000100001404 0x100000000 + 5124

Thread 1:  Dispatch queue: com.apple.libdispatch-manager
0   libSystem.B.dylib               0x00007fff81749c0a kevent + 10
1   libSystem.B.dylib               0x00007fff8174badd _dispatch_mgr_invoke + 154
2   libSystem.B.dylib               0x00007fff8174b7b4 _dispatch_queue_invoke + 185
3   libSystem.B.dylib               0x00007fff8174b2de _dispatch_worker_thread2 + 252
4   libSystem.B.dylib               0x00007fff8174ac08 _pthread_wqthread + 353
5   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 2:
0   libSystem.B.dylib               0x00007fff8174aa2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff8174ae3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 3:
0   libSystem.B.dylib               0x00007fff81730d7a mach_msg_trap + 10
1   libSystem.B.dylib               0x00007fff817313ed mach_msg + 59
2   com.apple.CoreFoundation        0x00007fff8357d902 __CFRunLoopRun + 1698
3   com.apple.CoreFoundation        0x00007fff8357cd8f CFRunLoopRunSpecific + 575
4   com.apple.CoreFoundation        0x00007fff8357cb16 CFRunLoopRun + 70
5   com.apple.DesktopServices       0x00007fff861c8326 TSystemNotificationTask::SystemNotificationTaskProc(void*) + 514
6   ...ple.CoreServices.CarbonCore  0x00007fff898940d1 PrivateMPEntryPoint + 63
7   libSystem.B.dylib               0x00007fff81769fd6 _pthread_start + 331
8   libSystem.B.dylib               0x00007fff81769e89 thread_start + 13

Thread 4:
0   libSystem.B.dylib               0x00007fff8174aa2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff8174ae3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 5:
0   libSystem.B.dylib               0x00007fff8174aa2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff8174ae3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 6:
0   libSystem.B.dylib               0x00007fff8174aa2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff8174ae3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 7:
0   libSystem.B.dylib               0x00007fff8174aa2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff8174ae3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff8174aaa5 start_wqthread + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x3ff0000000000000  rbx: 0x000000010016e970  rcx: 0x00007fff7028d650  rdx: 0x0000000000000018
  rdi: 0x0000000000000000  rsi: 0x0000000000000008  rbp: 0x00007fff5fbfe7f0  rsp: 0x00007fff5fbfe7d0
   r8: 0x0000000000000001   r9: 0x000000010016ea30  r10: 0x0000000000000000  r11: 0x0000000000000007
  r12: 0x0000000000000000  r13: 0x0000000000000008  r14: 0x00000002000bc5a0  r15: 0x0000000200044800
  rip: 0x00007fff83b669de  rfl: 0x0000000000010206  cr2: 0x0000000000000030

Binary Images:
       0x100000000 -        0x10000efff +uk.co.insili.MY_APP_NAME 1.0 (1) <D849E4F3-593B-3E81-BF47-7E77A1A060FF> /Users/Kellys/Desktop/MY_APP_NAME +.app/Contents/MacOS/MY_APP_NAME +
    0x7fff5fc00000 -     0x7fff5fc3bdef  dyld 132.1 (???) <B536F2F1-9DF1-3B6C-1C2C-9075EA219A06> /usr/lib/dyld
    0x7fff8008f000 -     0x7fff8008fff7  com.apple.Accelerate.vecLib 3.6 (vecLib 3.6) <DA9BFF01-40DF-EBD5-ABB7-787DAF2D77CF> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
    0x7fff8031a000 -     0x7fff80439fe7  libcrypto.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <14115D29-432B-CF02-6B24-A60CC533A09E> /usr/lib/libcrypto.0.9.8.dylib
    0x7fff80bcf000 -     0x7fff80c5bfef  SecurityFoundation ??? (???) <6860DE26-0D42-D1E8-CD7C-5B42D78C1E1D> /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
    0x7fff80c5c000 -     0x7fff80c70ff7  com.apple.speech.synthesis.framework 3.10.35 (3.10.35) <621B7415-A0B9-07A7-F313-36BEEDD7B132> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
    0x7fff80d1c000 -     0x7fff80e5afff  com.apple.CoreData 102.1 (251) <32233D4D-00B7-CE14-C881-6BF19FD05A03> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
    0x7fff80e90000 -     0x7fff8122dfe7  com.apple.QuartzCore 1.6.3 (227.37) <16DFF6CD-EA58-CE62-A1D7-5F6CE3D066DD> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
    0x7fff8122e000 -     0x7fff81277fef  libGLU.dylib ??? (???) <B0F4CA55-445F-E901-0FCF-47B3B4BAE6E2> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
    0x7fff81730000 -     0x7fff818f1fef  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib
    0x7fff8192c000 -     0x7fff819a9fef  libstdc++.6.dylib 7.9.0 (compatibility 7.0.0) <35ECA411-2C08-FD7D-11B1-1B7A04921A5C> /usr/lib/libstdc++.6.dylib
    0x7fff82a15000 -     0x7fff82a1bfff  libCGXCoreImage.A.dylib 545.0.0 (compatibility 64.0.0) <D2F8C7E3-CBA1-2E66-1376-04AA839DABBB> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXCoreImage.A.dylib
    0x7fff82a2e000 -     0x7fff82adefff  edu.mit.Kerberos 6.5.11 (6.5.11) <085D80F5-C9DC-E252-C21B-03295E660C91> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
    0x7fff82ee6000 -     0x7fff82f07fff  libresolv.9.dylib 41.1.0 (compatibility 1.0.0) <9410EC7F-4D24-6740-AFEE-90405750FAD7> /usr/lib/libresolv.9.dylib
    0x7fff82f46000 -     0x7fff82f55fff  com.apple.NetFS 3.2.2 (3.2.2) <7CCBD70E-BF31-A7A7-DB98-230687773145> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
    0x7fff82f56000 -     0x7fff831dfff7  com.apple.security 6.1.2 (55002) <772E1B13-8271-02F8-B1FE-023592A7AED7> /System/Library/Frameworks/Security.framework/Versions/A/Security
    0x7fff8325e000 -     0x7fff83281fff  com.apple.opencl 12.3.6 (12.3.6) <42FA5783-EB80-1168-4015-B8C68F55842F> /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
    0x7fff83282000 -     0x7fff8339cfff  libGLProgrammability.dylib ??? (???) <D1650AED-02EF-EFB3-100E-064C7F018745> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
    0x7fff8339d000 -     0x7fff833dbfe7  libFontRegistry.dylib ??? (???) <395D7C0D-36B5-B353-0DC8-51ABC0B1C030> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib
    0x7fff833dc000 -     0x7fff83428fff  libauto.dylib ??? (???) <F7221B46-DC4F-3153-CE61-7F52C8C293CF> /usr/lib/libauto.dylib
    0x7fff83429000 -     0x7fff83442fff  com.apple.CFOpenDirectory 10.6 (10.6) <CCF79716-7CC6-2520-C6EB-A4F56AD0A207> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
    0x7fff83443000 -     0x7fff834e3fff  com.apple.LaunchServices 362.3 (362.3) <B90B7C31-FEF8-3C26-BFB3-D8A48BD2C0DA> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
    0x7fff834e4000 -     0x7fff834f6fe7  libsasl2.2.dylib 3.15.0 (compatibility 3.0.0) <76B83C8D-8EFE-4467-0F75-275648AFED97> /usr/lib/libsasl2.2.dylib
    0x7fff8352f000 -     0x7fff83530fff  liblangid.dylib ??? (???) <EA4D1607-2BD5-2EE2-2A3B-632EEE5A444D> /usr/lib/liblangid.dylib
    0x7fff83531000 -     0x7fff836a8fe7  com.apple.CoreFoundation 6.6.6 (550.44) <BB4E5158-E47A-39D3-2561-96CB49FA82D4> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
    0x7fff837af000 -     0x7fff837b4fff  libGIF.dylib ??? (???) <5B2AF093-1E28-F0CF-2C13-BA9AB4E2E177> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
    0x7fff837b5000 -     0x7fff837bafff  libGFXShared.dylib ??? (???) <6BBC351E-40B3-F4EB-2F35-05BDE52AF87E> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
    0x7fff837bb000 -     0x7fff837bbff7  com.apple.ApplicationServices 38 (38) <10A0B9E9-4988-03D4-FC56-DDE231A02C63> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
    0x7fff837f7000 -     0x7fff838cbfe7  com.apple.CFNetwork 454.12.4 (454.12.4) <C83E2BA1-1818-B3E8-5334-860AD21D1C80> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
    0x7fff8393c000 -     0x7fff83940ff7  libCGXType.A.dylib 545.0.0 (compatibility 64.0.0) <DB710299-B4D9-3714-66F7-5D2964DE585B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCGXType.A.dylib
    0x7fff83941000 -     0x7fff83997fe7  libTIFF.dylib ??? (???) <9BC0CAD5-47F2-9B4F-0C10-D50A7A27F461> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
    0x7fff83998000 -     0x7fff839c9fff  libGLImage.dylib ??? (???) <562565E1-AA65-FE96-13FF-437410C886D0> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
    0x7fff83b5a000 -     0x7fff84554ff7  com.apple.AppKit 6.6.8 (1038.36) <4CFBE04C-8FB3-B0EA-8DDB-7E7D10E9D251> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
    0x7fff84555000 -     0x7fff845e5fff  com.apple.SearchKit 1.3.0 (1.3.0) <4175DC31-1506-228A-08FD-C704AC9DF642> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
    0x7fff845e6000 -     0x7fff8466bff7  com.apple.print.framework.PrintCore 6.3 (312.7) <CDFE82DD-D811-A091-179F-6E76069B432D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
    0x7fff84725000 -     0x7fff847a4fe7  com.apple.audio.CoreAudio 3.2.6 (3.2.6) <79E256EB-43F1-C7AA-6436-124A4FFB02D0> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
    0x7fff847a5000 -     0x7fff84805fe7  com.apple.framework.IOKit 2.0 (???) <4F071EF0-8260-01E9-C641-830E582FA416> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
    0x7fff84806000 -     0x7fff84813fe7  libCSync.A.dylib 545.0.0 (compatibility 64.0.0) <1C35FA50-9C70-48DC-9E8D-2054F7A266B1> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
    0x7fff84814000 -     0x7fff8482afef  libbsm.0.dylib ??? (???) <42D3023A-A1F7-4121-6417-FCC6B51B3E90> /usr/lib/libbsm.0.dylib
    0x7fff84898000 -     0x7fff84932fff  com.apple.ApplicationServices.ATS 275.19 (???) <2DE8987F-4563-4D8E-45C3-2F6F786E120D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
    0x7fff8498d000 -     0x7fff84a4afff  com.apple.CoreServices.OSServices 359.2 (359.2) <BBB8888E-18DE-5D09-3C3A-F4C029EC7886> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
    0x7fff84a67000 -     0x7fff84b9cfff  com.apple.audio.toolbox.AudioToolbox 1.6.7 (1.6.7) <F4814A13-E557-59AF-30FF-E62929367933> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
    0x7fff84b9d000 -     0x7fff84bbefe7  libPng.dylib ??? (???) <14F055F9-D7B2-27B2-E2CF-F0A222BFF14D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
    0x7fff84bbf000 -     0x7fff84bbfff7  com.apple.Accelerate 1.6 (Accelerate 1.6) <2BB7D669-4B40-6A52-ADBD-DA4DB3BC0B1B> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
    0x7fff84bd4000 -     0x7fff84c3efe7  libvMisc.dylib 268.0.1 (compatibility 1.0.0) <75A8D840-4ACE-6560-0889-2AFB6BE08E59> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
    0x7fff84c3f000 -     0x7fff85086fef  com.apple.RawCamera.bundle 3.7.1 (570) <5AFA87CA-DC3D-F84E-7EA1-6EABA8807766> /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
    0x7fff8527c000 -     0x7fff8529cfff  com.apple.DirectoryService.Framework 3.6 (621.15) <9AD2A133-4275-5666-CE69-98FDF9A38B7A> /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
    0x7fff852e7000 -     0x7fff853a0fff  libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <2C5ED312-E646-9ADE-73A9-6199A2A43150> /usr/lib/libsqlite3.dylib
    0x7fff856cd000 -     0x7fff8588bfff  libicucore.A.dylib 40.0.0 (compatibility 1.0.0) <0B4ABA92-C1F0-4548-A157-0CFD65561DA5> /usr/lib/libicucore.A.dylib
    0x7fff858c6000 -     0x7fff858f1ff7  libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <3630A97F-55C1-3F34-CA63-3847653C9645> /usr/lib/libxslt.1.dylib
    0x7fff858f2000 -     0x7fff85925ff7  libTrueTypeScaler.dylib ??? (???) <B7BA8104-FA18-39A2-56E1-922EE7A660AC> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libTrueTypeScaler.dylib
    0x7fff859ac000 -     0x7fff85c2efff  com.apple.Foundation 6.6.8 (751.63) <E10E4DB4-9D5E-54A8-3FB6-2A82426066E4> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
    0x7fff85fe6000 -     0x7fff8600efff  com.apple.DictionaryServices 1.1.2 (1.1.2) <E9269069-93FA-2B71-F9BA-FDDD23C4A65E> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
    0x7fff8600f000 -     0x7fff860c5ff7  libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <03140531-3B2D-1EBA-DA7F-E12CC8F63969> /usr/lib/libobjc.A.dylib
    0x7fff860c6000 -     0x7fff860d1ff7  com.apple.speech.recognition.framework 3.11.1 (3.11.1) <F0DDF27E-DB55-07CE-E548-C62095BE8167> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
    0x7fff860d2000 -     0x7fff86150ff7  com.apple.CoreText 151.13 (???) <5C6214AD-D683-80A8-86EB-328C99B75322> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
    0x7fff861c6000 -     0x7fff862abfef  com.apple.DesktopServices 1.5.11 (1.5.11) <39FAA3D2-6863-B5AB-AED9-92D878EA2438> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
    0x7fff862ac000 -     0x7fff862efff7  libRIP.A.dylib 545.0.0 (compatibility 64.0.0) <5FF3D7FD-84D8-C5FA-D640-90BB82EC651D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libRIP.A.dylib
    0x7fff863a6000 -     0x7fff863adfff  com.apple.OpenDirectory 10.6 (10.6) <4200CFB0-DBA1-62B8-7C7C-91446D89551F> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory
    0x7fff86564000 -     0x7fff86641fff  com.apple.vImage 4.1 (4.1) <C3F44AA9-6F71-0684-2686-D3BBC903F020> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
    0x7fff86642000 -     0x7fff86758ff7  libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <3814FCF9-92B9-A6AB-E76A-F7021894AA3F> /usr/lib/libxml2.2.dylib
    0x7fff867a5000 -     0x7fff867bbfe7  com.apple.MultitouchSupport.framework 207.11 (207.11) <8233CE71-6F8D-8B3C-A0E1-E123F6406163> /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
    0x7fff867be000 -     0x7fff86808ff7  com.apple.Metadata 10.6.3 (507.15) <DE238BE4-5E22-C4D5-CF5C-3D50FDEE4701> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
    0x7fff86809000 -     0x7fff869c8fff  com.apple.ImageIO.framework 3.0.6 (3.0.6) <2C39859A-043D-0EB0-D412-EC2B5714B869> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
    0x7fff869c9000 -     0x7fff86a0afff  com.apple.SystemConfiguration 1.10.8 (1.10.2) <78D48D27-A9C4-62CA-2803-D0BBED82855A> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
    0x7fff86ae6000 -     0x7fff86b0bff7  com.apple.CoreVideo 1.6.2 (45.6) <E138C8E7-3CB6-55A9-0A2C-B73FE63EA288> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
    0x7fff86b3c000 -     0x7fff86b3efff  libRadiance.dylib ??? (???) <61631C08-60CC-D122-4832-EA59824E0025> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
    0x7fff86bcd000 -     0x7fff86bdbff7  libkxld.dylib ??? (???) <8145A534-95CC-9F3C-B78B-AC9898F38C6F> /usr/lib/system/libkxld.dylib
    0x7fff86bdc000 -     0x7fff86bebfef  com.apple.opengl 1.6.14 (1.6.14) <ECAE2D12-5BE3-46E7-6EE5-563B80B32A3E> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
    0x7fff86c5e000 -     0x7fff86d13fe7  com.apple.ink.framework 1.3.3 (107) <FFC46EE0-3544-A459-2AB9-94778A75E3D4> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
    0x7fff86d14000 -     0x7fff86d63ff7  com.apple.DirectoryService.PasswordServerFramework 6.1 (6.1) <01B370FB-D524-F660-3826-E85B7F0D85CD> /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
    0x7fff86d64000 -     0x7fff86d9ffff  com.apple.AE 496.5 (496.5) <208DF391-4DE6-81ED-C697-14A2930D1BC6> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
    0x7fff86da0000 -     0x7fff86db1ff7  libz.1.dylib 1.2.3 (compatibility 1.0.0) <FB5EE53A-0534-0FFA-B2ED-486609433717> /usr/lib/libz.1.dylib
    0x7fff86db2000 -     0x7fff86df9ff7  com.apple.coreui 2 (114) <D7645B59-0431-6283-7322-957D944DAB21> /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
    0x7fff86dfa000 -     0x7fff87604fe7  libBLAS.dylib 219.0.0 (compatibility 1.0.0) <FC941ECB-71D0-FAE3-DCBF-C5A619E594B8> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
    0x7fff87605000 -     0x7fff87605ff7  com.apple.Cocoa 6.6 (???) <68B0BE46-6E24-C96F-B341-054CF9E8F3B6> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
    0x7fff87606000 -     0x7fff8765bff7  com.apple.framework.familycontrols 2.0.2 (2020) <F09541B6-5E28-1C01-C1AE-F6A2508670C7> /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
    0x7fff8765c000 -     0x7fff87a9ffef  libLAPACK.dylib 219.0.0 (compatibility 1.0.0) <0CC61C98-FF51-67B3-F3D8-C5E430C201A9> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
    0x7fff87aa0000 -     0x7fff87aa6ff7  com.apple.CommerceCore 1.0 (9.1) <3691E9BA-BCF4-98C7-EFEC-78DA6825004E> /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
    0x7fff87ab5000 -     0x7fff87ab8ff7  libCoreVMClient.dylib ??? (???) <75819794-3B7A-8944-D004-7EA6DD7CE836> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
    0x7fff87ecd000 -     0x7fff87f07fff  libcups.2.dylib 2.8.0 (compatibility 2.0.0) <4F2A4397-89BD-DEAC-4971-EE838FFA0964> /usr/lib/libcups.2.dylib
    0x7fff87f21000 -     0x7fff87fe3fe7  libFontParser.dylib ??? (???) <EF06F16C-0CC9-B4CA-7BD9-0A97FA967340> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
    0x7fff8816b000 -     0x7fff8816bff7  com.apple.CoreServices 44 (44) <DC7400FB-851E-7B8A-5BF6-6F50094302FB> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
    0x7fff8816c000 -     0x7fff8846afff  com.apple.HIToolbox 1.6.5 (???) <AD1C18F6-51CB-7E39-35DD-F16B1EB978A8> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
    0x7fff894d2000 -     0x7fff89593fef  com.apple.ColorSync 4.6.8 (4.6.8) <7DF1D175-6451-51A2-DBBF-40FCA78C0D2C> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
    0x7fff897b8000 -     0x7fff897b9ff7  com.apple.TrustEvaluationAgent 1.1 (1) <74800EE8-C14C-18C9-C208-20BBDB982D40> /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
    0x7fff897ba000 -     0x7fff897baff7  com.apple.vecLib 3.6 (vecLib 3.6) <08D3D45D-908B-B86A-00BA-0F978D2702A7> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
    0x7fff8980b000 -     0x7fff89811ff7  com.apple.DiskArbitration 2.3 (2.3) <857F6E43-1EF4-7D53-351B-10DE0A8F992A> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
    0x7fff89812000 -     0x7fff89865ff7  com.apple.HIServices 1.8.3 (???) <F6E0C7A7-C11D-0096-4DDA-2C77793AA6CD> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
    0x7fff8988d000 -     0x7fff89bc1fef  com.apple.CoreServices.CarbonCore 861.39 (861.39) <1386A24D-DD15-5903-057E-4A224FAF580B> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
    0x7fff89bec000 -     0x7fff89bf0ff7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <95718673-FEEE-B6ED-B127-BCDBDB60D4E5> /usr/lib/system/libmathCommon.A.dylib
    0x7fff89bfa000 -     0x7fff89c0efff  libGL.dylib ??? (???) <2ECE3B0F-39E1-3938-BF27-7205C6D0358B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
    0x7fff89c0f000 -     0x7fff89c50fef  com.apple.QD 3.36 (???) <5DC41E81-32C9-65B2-5528-B33E934D5BB4> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
    0x7fff89c51000 -     0x7fff8a34dff7  com.apple.CoreGraphics 1.545.0 (???) <58D597B1-EB3B-710E-0B8C-EC114D54E11B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
    0x7fff8a34e000 -     0x7fff8a354ff7  IOSurface ??? (???) <04EDCEDE-E36F-15F8-DC67-E61E149D2C9A> /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
    0x7fff8a604000 -     0x7fff8a62bff7  libJPEG.dylib ??? (???) <472D4A31-C1F3-57FD-6453-6621C48B95BF> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
    0x7fff8a62c000 -     0x7fff8a641ff7  com.apple.LangAnalysis 1.6.6 (1.6.6) <DC999B32-BF41-94C8-0583-27D9AB463E8B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
    0x7fff8a6c9000 -     0x7fff8a6caff7  com.apple.audio.units.AudioUnit 1.6.7 (1.6.7) <49B723D1-85F8-F86C-2331-F586C56D68AF> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
    0x7fff8a764000 -     0x7fff8a7acff7  libvDSP.dylib 268.0.1 (compatibility 1.0.0) <170DE04F-89AB-E295-0880-D69CAFBD7979> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
    0x7fffffe00000 -     0x7fffffe01fff  libSystem.B.dylib ??? (???) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib

Model: iMac5,1, BootROM IM51.0090.B09, 2 processors, Intel Core 2 Duo, 2.16 GHz, 2 GB, SMC 1.9f4
Graphics: ATI Radeon X1600, ATY,RadeonX1600, PCIe, 256 MB
Memory Module: global_name
AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x87), Broadcom BCM43xx 1.0 (5.10.131.42.4)
Bluetooth: Version 2.4.5f3, 2 service, 19 devices, 1 incoming serial ports
Network Service: Built-in Ethernet, Ethernet, en0
Network Service: AirPort, AirPort, en1
Serial ATA Device: ST3250824AS  Q, 232.89 GB
Parallel ATA Device: MATSHITADVD-R   UJ-85J
USB Device: Built-in iSight, 0x05ac  (Apple Inc.), 0x8501, 0xfd400000 / 2
USB Device: Dell USB Optical Mouse, 0x413c  (Dell Inc.), 0x3012, 0x1d100000 / 2
USB Device: Bluetooth USB Host Controller, 0x05ac  (Apple Inc.), 0x8206, 0x7d100000 / 2
USB Device: IR Receiver, 0x05ac  (Apple Inc.), 0x8240, 0x7d200000 / 3 
```

请帮忙！:-)

* * *

**提示：（**如果它很重要）`[self thePanel]`（`NSOpenPanel`作为警报表出现的窗口）是 HUD 窗口，而不是“常规”窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-02T23:03:36.740

我有一个类似的问题。就我而言，罪魁祸首是 [openPanel close]。面板被过度释放。我在 Snow Leopard 中也没有任何问题，但是当我移植到 Mavericks 时它就变糟了。尝试注释掉 [openPanel close] 看看是否有帮助。顺便说一句，关闭功能似乎无论如何都不起作用。不知道那是关于什么的。也许是因为它已经被取消引用了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:16:12.337

面板不是关闭了吗？这使得调用`[openPanel close];`没有必要。

```
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000030 
```

听起来像僵尸。另外，你真的应该切换到 ARC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:03:58.127

出于某些未知原因，对我有用的是**在 10.6.8 下编译原始源代码**（那里已经存在 Xcode 版本 - 我不确定那可能是什么，但很可能是 4.2）。

因此，即使听起来有些奇怪，它也成功了！;-)

# unit-testing - 将 zend test dbadapter 与 zend db table abstract 一起使用

> ID：12886643
> 
> 赞同：2
> 
> 时间：2012-10-14T21:20:31.303
> 
> 标签：unit-testing, zend-framework, zend-db, zend-db-table, zend-test

有没有人能够将 Zend_Test_DbAdapter 与 Zend_Db_Table_Abstract 一起使用？

我正在尝试测试我创建的扩展 Zend_Db_Table_Abstract 的模型，如果我使用 Zend_Test_DbAdapter（其他适配器，如 mysql 或 sqlite）工作正常，我会收到关于未设置主键的异常。

* * *

```
class Model_Category extends Zend_Db_Table_Abstract
{
    protected $_name = 'categories';

    protected $_dependentTables = array('Model_Video');

    public function getMap()
    {
        $map = array();
        $rows = $this->fetchAll();
        foreach($rows as $row)
        {
            $map[$row->id] = $row->name;
        }

        return $map;
    }
} 
```

* * *

来自 PHPUnit 测试类的片段：

```
protected function setUp()
{
    $adapter = new Zend_Test_DbAdapter();
    $stmt = Zend_Test_DbStatement::createSelectStatement(array(
        array('id' => 1, 'name' => 'pranks'),
        array('id' => 2, 'name' => 'physical_feats'),
        array('id' => 3, 'name' => 'art'),
        array('id' => 4, 'name' => 'cute'),
        array('id' => 5, 'name' => 'philanthropy')
    ));
    $adapter->appendStatementToStack($stmt);

    $this->fixture = new Model_Category($adapter);
} 
```

执行模型的方法时抛出异常：

```
public function testGetMap()
{
    $expected = array(
        '1' => 'pranks',
        '2' => 'physical_feats',
        '3' => 'art',
        '4' => 'cute',
        '5' => 'philanthropy'
    );
    $actual = $this->fixture->getMap();
    $this->assertEquals($expected, $actual);
} 
```

结果是：

```
Model_CategoryTest::testGetMap()
Zend_Db_Table_Exception: A table must have a primary key, but none was found
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:876
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969
ZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100
ZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303
application/models/Category.php:35
tests/unit/application/models/CategoryTest.php:90 
```

* * *

强制主键也不起作用：

```
protected function setUp()
{
    $adapter = new Zend_Test_DbAdapter();
    $stmt = Zend_Test_DbStatement::createSelectStatement(array(
        array('id' => 1, 'name' => 'pranks'),
        array('id' => 2, 'name' => 'physical_feats'),
        array('id' => 3, 'name' => 'art'),
        array('id' => 4, 'name' => 'cute'),
        array('id' => 5, 'name' => 'philanthropy')
    ));
    $adapter->appendStatementToStack($stmt);

    $this->fixture = new Model_Category(array(
        'db' => $adapter,
        'primary' => 'id'
    ));
} 
```

执行相同的单元测试，从上面结果：

```
Model_CategoryTest::testGetMap()
Zend_Db_Table_Exception: Primary key column(s) (id) are not columns in this table ()
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:888
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969
ZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100
ZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005
ZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303
application/models/Category.php:35
tests/unit/application/models/CategoryTest.php:93 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:43:34.380

您可以通过在 Zend_Test_DbAdapter 实例上执行以下操作来定义主键：

```
$adapter = new Zend_Test_DbAdapter();
$adapter->setDescribeTable('table_name', array('column_name' =>
    array(
        'SCHEMA_NAME' => 'schema_name',
        'TABLE_NAME'  => 'table_name'
        'COLUMN_NAME' => 'column_name',     
        'PRIMARY'     => true
    )
)); 
```

然后将 table_name、column_name 和 schema_name 与您的实现中的值一起转换。您需要对您在被测类中与之交互的每个表执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:23:24.270

您收到异常的原因`Zend_Db_Table_Exception: A table must have a primary key, but none was found`是因为所有使用的表都`Zend_Db_Table`必须定义一个主键。当您使用该表时，由于您的`DbTable`类中没有定义主键，Zend_Db 尝试通过检查信息模式中的表属性来确定表的主键。它看到您的表没有主键并且失败。

从[手册](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.defining.primary-key)：

> 如果不指定主键，**`Zend_Db_Table_Abstract`**则尝试根据 **`describeTable()`**方法提供的信息发现主键。
> 
> **注意：每个表类都必须知道哪些列可用于唯一地寻址行。如果在表类定义或表构造函数参数中未指定主键列，或者在 ** 提供的表元数据中未发现主键列`describeTable()`**，则该表不能与 一起使用**`Zend_Db_Table`**。

尝试强制主键不起作用，因为看起来您的表没有`id`您指定为主键的名为的列。

解决方案是向您尝试使用的表添加主键。

在扩展的模型类中，`Zend_Db_Table_Abstract`您可以指定一个不是 ID 的主键`protected $_primary = 'primary_column';`

# java - 获取元素后由 br 分隔的值

> ID：12886644
> 
> 赞同：1
> 
> 时间：2012-10-14T21:20:38.050
> 
> 标签：java, jsoup

```
<div class="unique_class"> 
<h2>
    ...
</h2>
<h2>
    ...
</h2>
<strong>
    unique strong before content
</strong>
</br>
static title 1: value 1
</br>
static title 2: value 2
</br>
static title 3: value 3
</br>
static title 4: value 4
</br>
</br>
</div> 
```

我需要使用 JSOUP 获取这 4 个值。它们总是在 'strong' 标签之后，并由 br 标签分隔。怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:55:16.200

你可以这样做：

```
Document doc = // ... eg. parse File / String here or connect to a website
Node value;

for( Element element : doc.select("strong ~ *") )
{
    // element.previousSibling() is possible too
    value = element.nextSibling();
    System.out.println(value);
} 
```

这将打印：

```
 static title 1: value 1 
 static title 2: value 2 
 static title 3: value 3 
 static title 4: value 4 
```

*（还有两行带有一个''）*

# php - /dev/arandom 是什么？

> ID：12886646
> 
> 赞同：16
> 
> 时间：2012-10-14T21:20:54.883
> 
> 标签：php, linux, session, random

该[手册页](http://php.net/manual/en/session.configuration.php#ini.session.entropy-file)说：

> **注意**：从 PHP 5.4.0 开始 session.entropy_file 默认为`/dev/urandom`或`/dev/arandom`如果可用。在 PHP 5.3.0 中，该指令默认为空。

那么，`/dev/arandom`它与 什么以及有何不同`/dev/[u]random`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T21:28:49.787

从[这里](http://nixdoc.net/man-pages/openbsd/man4/arandom.4.html)。似乎`arandom`可以保证在返回请求的数据量之前存在足够的熵。它似乎也仅限于 OpenBSD 实现。 `urandom`无论是否有足够的熵，都会返回请求的数据量——如果没有足够的熵，这显然会引入漏洞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T21:30:17.340

[这个页面](https://www.mirbsd.org/htman/i386/man4/arandom.htm)做了一个合理的工作来解释设备是什么：

> 根据需要，熵池数据重新播种 ARC4 生成器，然后生成高质量的伪随机输出数据。

有关底层技术的更多信息可[从 Wikipedia](http://en.wikipedia.org/wiki/RC4)获得。

# jquery - zIndex 未按预期工作

> ID：12886647
> 
> 赞同：0
> 
> 时间：2012-10-14T21:20:56.513
> 
> 标签：jquery, css

我有一个菜单和一个幻灯片，菜单的 zindex 大于幻灯片的 zindex，但由于某种原因，它被幻灯片覆盖了。我查看了有关 zindex 的文档，但找不到发生这种情况的任何原因。

你可以去这里的网站：http: [//cp31.stablehost.com/~edenville/](http://cp31.stablehost.com/~edenvill/)

请使用 chrome 查看网站。

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:42:43.333

您看到的问题是因为顶部表设置了 z-index：

```
 table.top-table {
   ....
      z-index: 9 !important;
 } 
```

由于在这种情况下父元素具有较低的 z-index 集，因此具有较高 z-index 的子元素不会影响父元素的兄弟姐妹。（这可以理解吗？）

如果将其增加到 999 以上（幻灯片标题面板），那么它将起作用：

```
table.top-table {

   z-index: 99999 !important;
} 
```

# ruby - Heroku 与 ruby 1.9.3 导致许多不同的崩溃

> ID：12886648
> 
> 赞同：9
> 
> 时间：2012-10-14T21:21:03.603
> 
> 标签：ruby, ruby-on-rails-3, heroku, ruby-1.9.3

我用 Gemfile 中的新 gem 重新部署我的 heroku 应用程序，它在启动时崩溃

```
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': libruby.so.1.9: cannot open shared object file: No such file or directory - /app/vendor/bundle/ruby/1.9.1/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.so (LoadError) 
```

无论我部署什么分支（旧的稳定分支......），都会发生这种情况，并且只能通过执行`heroku rollback`.

我相信这是由 heroku 最近更新他们的 ruby​​ 1.9.3 引起的，因为我遇到了这个问题[Heroku app crash with 'libruby.so.1.9: cannot open shared object file'](https://stackoverflow.com/questions/12880632/heroku-app-crashes-with-libruby-so-1-9-cannot-open-shared-object-file)。移除 nokogiri 宝石停止了我得到的异常，但仍然有这个。添加新宝石时会发生更多类似的错误。

通过部署到一个新的 heroku 应用程序解决了整个问题，但这不是我可以在我的生产服务器上做的事情。

有关解决问题或以某种方式“刷新”我的应用程序的任何想法？

我的宝石文件：

```
source "https://rubygems.org"

ruby "1.9.3"
gem "rails", "3.2.3"
gem "thin"

# Bundle edge Rails instead:
# gem "rails", :git => "git://github.com/rails/rails.git"

gem "mongoid"
gem "devise"
gem "haml"
gem "sass"
gem "exceptional"
gem "kaminari"
gem "mongoid_search"
#gem "nokogiri"
gem "bson_ext"
gem "heroku-mongo-backup"
gem "aws-s3"
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem "haml-rails",   "~> 0.3.4"
  gem "sass-rails",   "~> 3.2.3"
  gem "coffee-rails", "~> 3.2.1"

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem "therubyracer", :platform => :ruby

  gem "uglifier", ">= 1.0.3"
end

gem "jquery-rails"

group :test do
  gem "mongoid-rspec"
end

# To use ActiveModel has_secure_password
# gem "bcrypt-ruby", "~> 3.0.0"

# To use Jbuilder templates for JSON
# gem "jbuilder"

# Use unicorn as the app server
# gem "unicorn"

# Deploy with Capistrano
# gem "capistrano"

# To use debugger
# gem "ruby-debug19", :require => "ruby-debug"

#
group :development do
  gem "letter_opener"
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T10:31:08.703

仅供参考，

就这个问题联系 Heroku 支持后，您应该遵循以下 3 个简单步骤：

1.  安装这个`heroku-repo`插件：`heroku plugins:install https://github.com/lstoll/heroku-repo.git`

2.  运行以下命令：`heroku repo:purge_cache`

3.  再次部署您的应用程序。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:22:15.283

这件事昨天也发生在我身上，绝对与 Heroku 有关。

我在 Twitter 上找到了修复和讨论：[https ://twitter.com/bcardarella/status/256822171979100161](https://twitter.com/bcardarella/status/256822171979100161)

只需强制清除 gem 文件缓存（清除 gemfile、部署、恢复和部署），应用程序就会再次顺利启动。

# r - 从列表中提取数据而不使用 R 中的循环

> ID：12886655
> 
> 赞同：1
> 
> 时间：2012-10-14T21:21:37.850
> 
> 标签：r, vector, matrix

我有一个带有行位置的向量 v：

```
v<-c(10,3,100,50,...) 
```

对于这些位置，我想提取列表的元素，固定列，例如假设我的列号是 2，所以我正在做：

```
data<-c()
data<-c(list1[[v]][[2]]) 
```

list1 具有以下格式的数据：

```
[[34]]
      [1] "200_s_at" "483"        "1933"        "3664" 
```

因此，例如，我想从第 342 行中仅提取值 1910 的第 2 列，并对接下来的行执行相同操作

但是当我想这样做时出现错误，是否可以直接执行？或者我应该有一个循环来一一读取 v 中的位置并填充数据向量，如：

```
#algorithm
for i<-1 to length(v)
    pos<-v[i]
    data[[i]]<-c(list1[[pos]][[2]])
next i 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T21:41:32.160

您可以使用`sapply`如下：

```
sapply(list1[v], `[`, 2) 
```

但是，根据您的数据，您可能会得到意外的输出，如[为什么 `vapply` 比 `sapply` 更安全？](https://stackoverflow.com/questions/12339650/why-is-vapply-safer-than-sapply). 例如，如果您的某些列表项的长度 < 2 怎么办？如果某些列表项不是向量而是 data.frames 怎么办？此外，输出类可能会根据列表元素的类（逻辑、整数、数字、字符）而有所不同。例如，如果您希望所有列表项都是长度 >= 2 的字符向量，那么这样做更安全：

```
vapply(list1[v], `[`, character(1), 2) 
```

where`vapply`将为您仔细检查您的假设，并在发现问题时出错。

# web-applications - 如何避免一次又一次地对元素应用绑定？

> ID：12886661
> 
> 赞同：1
> 
> 时间：2012-10-14T21:22:41.113
> 
> 标签：web-applications, knockout.js, knockout-2.0

我有以下视图模型，用于编辑 HTML 表单中的 Person 对象：

```
function PersonModel(person) {
    var self = this;
    self.id = ko.observable(person.Id);
    self.firstName = ko.observable(person.FirstName);
    self.surname = ko.observable(person.Surname);
    self.email = ko.observable(person.Email);
    self.cell = ko.observable(person.Cell);

    self.save = function (data) {
        savePerson(data);
    };
} 
```

当用户想要编辑 Person 时，我将 this 的新实例绑定到编辑表单，如下所示：

```
function editPerson(person) {
    var url = "@Url.Action("EditJson", "Person")";
    $.getJSON(url, function (data) {
        $("#person-detail").css("display", "block");
        ko.applyBindings(new PersonModel(data), $("#person-detail")[0]);
    });
} 
```

在表单中，我将单击事件绑定到视图模型中的保存方法：

```
<a href="#" data-bind="click: save">Update</a> 
```

我现在在编辑单个人员记录时遇到了多个数据库更新运行的问题，我认为这是因为我`applyBindings`在同一个元素上多次调用了编辑弹出窗口。我可以确认这一点，因为我执行的数据库编辑次数与调用 ApplyBindings 的次数一样多。

现在我要么需要知道如何删除由 应用的`applyBindings`绑定，或者如何只应用一次绑定，然后更新我的视图模型，而不是为每次编辑重新创建它。我更喜欢第一种方法。视图模型不应表现出单例特征。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:52:45.317

通常你会想做一些事情，比如创建一个 observable 来保存当前选择的记录，然后使用`with`or`template`绑定来绑定它。

所以，你会有一个像这样的编辑器：

```
<div data-bind="with: currentItem">
  ...
</div> 
```

然后，您将使用当前数据填充它：

```
this.currentItem(new PersonModel(data)); 
```

这样，您只需应用一次绑定，并且不会遇到多个事件处理程序等问题。绑定也只会在填充对象时呈现其内容，因此当它为空`with`时不会显示任何内容。`currentItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:42:49.433

Ryan 的解决方案是大多数情况下的最佳解决方案。如果您真正处理的是可以在页面上多次实例化的 JS 和 HTML 代码模块，您可能需要查看`ko.cleanNode()`或`ko.removeNode()`.

KO 在内部使用这两种方法来处理内存泄漏和绑定清理。在最近的一个项目中，我有一个表格，其中包含几行动态添加的产品。这些产品中的每一个都必须是可在线编辑的。我没有为每一行复制表单 html，而是选择设置一种 KO 模块模式，其中 html 动态加载到表行中，应用绑定，一旦完成编辑，绑定就会被删除。

这是我继承自的基本 AMD 模块：

```
/**
Prototype object for creating individual KnockoutJS modules

@module Shared
@class ko-module-prototype
@namespace
@static
**/
define(["knockout", 'jquery', 'Shared/js/helpers'], function (ko, $, helpers) {
    var exports = {};
    /**
    KO viewModel
    @property vm
    @static
    **/
    exports.vm = {};
    /**
    KO bindings
    @property bindings
    @static
    **/
    exports.bindings = {};
    /**
    Optional binding namespace for avoiding bindings getting overwritten
    @property bindingNamespace
    @static
    **/
    exports.bindingNamespace = null;
    /**
    Whether bindings are registered with KO or not
    @property bindingsRegistered
    @static
    **/
    exports.bindingsRegistered = false;
    /**
    The HTML node wrapping the area we wish to apply KO bindings
    @property $wrapperNode
    @static
    **/
    exports.$wrapperNode = $("body");
    /**
    Optional html string to be loaded in as a template
    @property template
    @static
    **/
    exports.template = null;
    /**
    Injects html, registers bindings, and applies bindings
    @method start
    @static
    **/
    exports.start = function ($wrapperNode) {
        // Update wrapper node
        if ($wrapperNode) this.$wrapperNode = $wrapperNode;

        this._openNodeId = "mod_" + helpers.uniqueId();
        var $targetNode = $wrapperNode;

        // Insert template html
        // Wrap in a div
        if (this.template) {
            this.$wrapperNode.html($("<div></div>").attr("id", this._openNodeId).html(this.template));
            $targetNode = $wrapperNode.find("#" + this._openNodeId);
        }

        // Register bindings
        // Class binding provider has to be setup first...
        if (!this.bindingsRegistered) {
            this.bindingsRegistered = true;
            var register = this.bindings;
            if (this.bindingNamespace !== null) {
                register = { };
                register[this.bindingNamespace] = this.bindings;
            }
            ko.bindingProvider.instance.registerBindings(register);
        }

        ko.applyBindings(this.vm, $targetNode[0]);
    };
    /**
    Removes html, and un-applies bindings
    @method end
    @static
    **/
    exports.end = function () {
        var $openNode = $("#" + this._openNodeId)[0];

        if (this.template !== null) {
            ko.removeNode($openNode);
        } else {
            ko.cleanNode($openNode);
        }
    };
    return exports;
}); 
```

它使用 Ryan 的 KO classBindingProvider，您可以在此处找到：

[https://github.com/rniemeyer/knockout-classBindingProvider](https://github.com/rniemeyer/knockout-classBindingProvider)

# javascript - 为单个阿拉伯字符设置样式时，为什么阿拉伯字符表现为单独的字符？

> ID：12886663
> 
> 赞同：14
> 
> 时间：2012-10-14T21:22:58.213
> 
> 标签：javascript, html, css, arabic

基本上我想要完成的是阿拉伯字符滥用荧光笔！

为了便于理解，我将尝试用英语解释类似的功能。

想象一个大小写错误的字符串，并且需要正确重写它，因此用户在输入框中重写字符串并提交，js检查是否有任何字符未更正，然后显示带有这些字母的整个字符串更正并以红色突出显示；

即[*测试*]变成[***测试****]*

为此，我正在检查那些字符，如果检测到有缺陷的字符，它会被 span 包围，以红色显示。

到目前为止一切顺利，现在当我尝试将其复制为阿拉伯语时，错误的字符会与单词分离，使其无法阅读。

* * *

**演示**：[jsfiddle](http://jsfiddle.net/elcrimer/fjz5C/7/)

```
function check1() {
  englishanswer.innerHTML = englishWord.value.replace(/t/, '<span style="color:red">T</span>');
}

function check2() {
  arabicanswer.innerHTML =
    arabicWord.value.replace(/\u0647/, '<span style="color:red">' +
      unescape("%u0629") + '</span>') +
    '<br>' + arabicWord.value.replace(/\u0647/, unescape('%u0629'));
}
```

```
fieldset {
  border: 2px groove threedface;
  border-image: initial;
  width: 75%;
}
input {
  padding: 5px;
  margin: 5px;
  font-size: 1.25em;
}
p {
  padding: 5px;
  font-size: 2em;
}
```

```
<fieldset>
  <legend>English:</legend>
  <input id='englishWord' value='test' />
  <input type='submit' value='Check' onclick='check1()' />
  <p id='englishanswer'></p>
</fieldset>

<fieldset style="direction:rtl">
  <legend>عربي</legend>
  <input id='arabicWord' value='بطله' />
  <input type='submit' value='Check' onclick='check2()' />
  <p id='arabicanswer'></p>
</fieldset>
```

请注意，在测试阿拉伯语单词时，spanned char [first preview] 与单词的其余部分是分开的，而 non-spanned char [second preview] 正常显示。

* * *

## 编辑：问题预览 [Chrome UA]

![在此处输入图像描述](../Images/5d29df92348cfc140ed8175484bc4a12.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T05:36:47.940

这是 WebKit 浏览器（Chrome、Safari）中长期存在的错误：HTML 标记破坏了连接行为。显式使用 ZWJ（零宽度连接器）用于帮助（请参阅问题[Partially coloured Arabic word in HTML](https://stackoverflow.com/questions/11155849/partially-colored-arabic-word-in-html)），但似乎该错误已变得更糟。

作为一种笨拙的（但可能是唯一的）解决方法，您可以对阿拉伯字母使用上下文形式。这可以首先使用静态 HTML 标记和 CSS 进行测试，例如

```
بطﻠ&lt;span style="color:red">ﺔ&lt;/span> 
```

在这里，我在`span`元素内部使用 ﺔ U+FE94 ARABIC LETTER TEH MARBUTA FINAL FORM 代替正常的 U+0629 ARABIC LETTER TEH MARBUTA 和 ﻠ U+FEE0 ARABIC LETTER LAM MEDIAL FORM 代替 U+0644 ARABIC LETTER LAM。

要在 JavaScript 中实现这一点，您需要在将标记插入单词阿拉伯字母时，根据其在单词中的位置将中断（由标记引起）前后的字符更改为初始、中间或最终表示形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:52:40.787

我知道我给你的这个解决方案不是很优雅，但它有点工作，所以告诉我你的想法：

```
<script>
    function check1(){
    englishanswer.innerHTML = englishWord.value.replace(/t/,'<span style="color:red">T</span>');
}
function check2(){
arabicanswer.innerHTML = 
    arabicWord.value.replace(/\u0647/,'<span style="color:red">'+
    unescape("%u0640%u0629")+'</span>')+
    '<br>'+arabicWord.value.replace(/\u0647/,unescape('%u0629'));
}
</script>

<fieldset>
<legend>English:</legend>
<input id='englishWord' value='test'/>
<input type='submit' value='Check' onclick='check1()'/>
<p id='englishanswer'></p>
</fieldset>

<fieldset style="direction:rtl">
<legend>عربي</legend>
<input id='arabicWord' value='بطلـه'/>
<input type='submit' value='Check' onclick='check2()'/>
<p id='arabicanswer'></p>
</fieldset> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:04:33.207

你应该照顾好开始、中间、结束和孤立的字符。完整列表可[在此处获得](http://en.wikipedia.org/wiki/Arabic_script_in_Unicode)

使用`ufe94`代替`u0629`

```
arabicWord.value.replace(/\u0647/,'<span style="color:red">'+ unescape("%ufe94")+'</span>')+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T09:43:21.600

正如[Jukka K. Korpela](https://stackoverflow.com/a/12889837/1085495)所指出的，这主要是大多数**基于 WebKit 的浏览器**（chrome、safari 等）中的一个错误。

除了 TAMDEED 字符或获取阿拉伯字母的上下文形式之外，一个简单的技巧是将**零宽度连接符**（`&zwj;`或`&#x200d;`）放在要被视为单个阿拉伯[连字](http://en.wikipedia.org/wiki/Typographical_ligature)的字母之前/之后- 两个字符组成另一个。例如

```
<p>عرب&#x200d;<span style="color: Red;">&#x200d;ي</span></p> 
```

演示：[jsfiddle](http://jsfiddle.net/noonon/esz4S/2/)
另请参阅 webkit[错误](https://bugs.webkit.org/show_bug.cgi?id=6148)报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:43:56.707

我会尝试在角色之前和之后添加连字/ *taweel 。*它实际上并不能解决问题，但它会让人很难注意到，因为它会迫使*lam*进入中间形式，而*taa marbuta*进入最终形式。如果它有效，那将比将字母实际转换为它们的中间形式或最终形式要容易得多。

不过，您似乎还有其他问题。我去了你的网站，输入了一个拼写错误的*hadha*，只是想看看它会做什么，这导致*ha*在两个单词中都断开了连接，如果唯一的问题是格式标签，这没有任何意义。（我在 Mac 上使用 Firefox。）

![在此处输入图像描述](../Images/d3271dbdb5756723d2faa6be3ed144d2.png)

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T22:31:19.017

不要使用 span，而是使用 HTML5 [ruby](http://dev.w3.org/html5/spec/text-level-semantics.html#the-ruby-element)​​ 元素并添加阿拉伯文字符“ـ”（U+0640），您知道扩展字母的字符（shift+j）。

所以你的代码变成：

```
arabicanswer.innerHTML = 
        (arabicWord.value).replace(/\u0647/,'ـ<ruby style="color:red"> ـ'+
        unescape("%u0629")+'</ruby>')+
        '<br>'+arabicWord.value.replace(/\u0647/,unescape('%u0629'));
    } 
```

这是一个更新的小提琴：http: [//jsfiddle.net/fjz5C/28/](http://jsfiddle.net/fjz5C/28/)

# java - 玩！框架与 Ruby on Rails

> ID：12886667
> 
> 赞同：8
> 
> 时间：2012-10-14T21:23:22.767
> 
> 标签：java, ruby-on-rails, ruby, performance, playframework-2.0

这不会是一般比较的要求：

**玩！框架是基于 Java 的**，这意味着代码被解释为字节码，然后由 JVM 在运行时编译。另一方面，**Ruby 是一种动态语言**，这意味着每次请求都会解释代码。这对于每个程序员来说都是显而易见的。

另一个方面是开发过程和语言的易用性（强类型与弱类型）。

目前我正在使用 Play 开发一个新网站！
所以，对于问题：

1.  **HTTP 服务器的性能**（Play！在 JVM 上运行，Ruby 是动态的）——这对网站真的很重要吗？你会看到显着的差异吗？
2.  我觉得 RoR 拥有**更大的社区、资源、教程等**，这对我来说有点打击。还是应该？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T22:05:42.527

这要看情况。

1.  Ruby 不是一门特别快的语言，但语言执行速度可能不是你的瓶颈——根据我的经验，Ruby 的相对缓慢通常只是外部服务调用（例如数据库）、算法问题（例如同步、阻塞）的沧海一粟子程序），以及通常不适合问题域的设计选择。保持您的整个技术堆栈的正确性。

2.  社区很重要，Ruby/Rails 有一个非常活跃的社区。AFAIK Play 的规模较小，但根据我自己的经验，Java 和 Scala（以及无数其他具有 JVM 实现的语言（包括 Ruby））也有很好的社区。

所有这些都取决于您的应用程序（以及您！）的特定需求。如果 Ruby 太慢，那就太慢了。如果您绝对需要一些仅存在于 Java 中的库，请使用 Java。选择适合任务的工具。但要正确看待整个任务（以及您自己完成该任务的需求）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T02:19:17.560

这两个模型之间有很多差异。至于性能，我对基于 Java 和 RoR 的看法：

1、基于Java的网站（运行在多个Java应用服务器上），有其独特的优势，如多线程模型（读取本地数据的速度最快）、全局内存、易于资源池化、大量高效客户端连接各种第三部分 OSS 工具...

2、RoR（和Php）模型的HTTPServer连接，需要将请求“代理”到App层。多进程模型增加了进程间通信。而作为“动态语言”，性能较低。

但是，如今，Web 编程依赖于其他工具来提升。缓存、NoSQL（Memcached、Redis、TT/TC）、IPC/RPC 框架（netty、akka、）的广泛使用……转移了瓶颈。我知道以上两种模式都被用于大型网络社交游戏。

# javascript - 如果长度为空，则需要传递一个条件

> ID：12886670
> 
> 赞同：5
> 
> 时间：2012-10-14T21:24:05.637
> 
> 标签：javascript, jquery, regex, if-statement, null

下面检查通过由字母 AF 和数字 0-9 以及三个短划线（“-”）组成的 35 个字符组成的输入提交的项目代码。有效项目代码的示例如下：16FA860F-E86A457B-A28A238B-2ACA6E3D

```
//Checks the item code to see if it meets requirements
if($("#input").val().length > 35) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is too long.<br>");

    $("#ise").each(function(){
    this.reset();
    });
}
else if($("#input").val().length < 35) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is too short. Be sure to include dashes.<br>");

    $("#ise").each(function(){
    this.reset();
    });
}
else if($("#input").val().match(/([^A-Fa-f0-9-]+)/gm)) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> contains invalid characters.<br>");

    $("#ise").each(function(){
    this.reset();
    });
}

else if($("#input").val().match(/[-]/g, "").length > 3) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is an invalid format. Please only use 3 dashes.<br>");

    $("#ise").each(function(){
    this.reset();
    });
}
else if($("#input").val().match(/[-]/g, "").length < 3) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is an invalid format. Please include 3 dashes.<br>");

    $("#ise").each(function(){
    this.reset();
    });
} 

else {
 //Rest of my code
} 
```

以下内容运行良好，除非项目代码长度为 35 个字符，但不包含破折号。如果它包含 1 或 2 个破折号，那么这段代码会捕获它，但如果它包含 0，那么它就会挂起并且什么也不做。我几乎尝试了所有方法，但似乎无法弄清楚解决方案可能是什么。由于长度为空，它只是挂起。应该以某种方式调整的部分是这样的：

```
else if($("#input").val().match(/[-]/g, "").length > 3) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is an invalid format. Please only use 3 dashes.<br>");

    $("#ise").each(function(){
    this.reset();
    });
}
else if($("#input").val().match(/[-]/g, "").length < 3) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is an invalid format. Please include 3 dashes.<br>");

    $("#ise").each(function(){
    this.reset();
    });
} 
```

我确信解决方案很简单，但我很难过。

编辑：除了 CSS 之外，这就是我大部分内容的布局方式。 [http://jsfiddle.net/86KcG/1/](http://jsfiddle.net/86KcG/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:53:51.893

您可以通过使用像这样的正则表达式来修复您的代码

```
/^[A-F0-9]+\-[A-F0-9]+\-[A-F0-9]+\-[A-F0-9]+$/ 
```

其中 ^ 和 $ 匹配输入的开始和结束，字符组 AF 和 0-9 与破折号由组 AF 或 0-9 中的至少一个字符分隔的约束条件相匹配。

将此检查与 35 个字符的长度检查相结合可以使您的代码正常工作。

```
//Checks the item code to see if it meets requirements
if($("#input").val().length != 35) {
    $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is too long/short.<br>");

    $("#ise").each(function(){
        this.reset();
    });
}
else if(!(/^[A-F0-9]+\-[A-F0-9]+\-[A-F0-9]+\-[A-F0-9]+$/.test($("#input").val()))) {
    $("#errorLogContent").prepend("Insert some dashes and make sure the required pattern...<br>");

    $("#ise").each(function(){
        this.reset();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:38:30.313

`.length`永远不会`null`。`match()`如果没有匹配，则返回 from `null`，在这种情况下，如果您尝试检查`length`属性，则会收到错误，因为`null`没有属性，因此您需要对此进行测试（但`length`它本身将始终是`0`上或`undefined`) 中的整数。

所以你可以说：

```
else {
    var matches = $("#input").val().match(/[-]/g);  // note: match() only takes one parameter
    if (matches != null && matches.length > 3) {
       $("#errorLogContent").prepend("The item code <font color='#FFFFFF'>" + itemCode + "</font> is an invalid format. Please only use 3 dashes.<br>");

       $("#ise").each(function(){
          this.reset();
       });
    }
} 
```

对于少于 3 次的测试，您会说：

```
if (matches === null || matches.length < 3) 
```

...在没有匹配项（返回`null`）或一些匹配项但少于 3 个时满足。

如果正确的值始终遵循 的模式`16FA860F-E86A457B-A28A238B-2ACA6E3D`，即由 8 个字母或数字组成的组，由破折号分隔，那么您可以这样做：

```
if (!/^[0-9A-F]{8}-[0-9A-F]{8}-[0-9A-F]{8}-[0-9A-F]{8}$/i.test($("#input").val()) {
   // invalid, do something...
} 
```

regex[`.test()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)返回`true`或`false`取决于提供的字符串是否匹配。

# delphi - 过程入口点 在动态链接库中找不到

> ID：12886675
> 
> 赞同：2
> 
> 时间：2012-10-14T21:24:57.957
> 
> 标签：delphi, delphi-xe

我已经转换了所有的 VB.NET DLL 声明

```
Declare Function SFileOpenArchive Lib "Storm.dll" Alias "#266" (ByVal lpFileName As String, ByVal dwPriority As Integer, ByVal dwFlags As Integer, ByRef hMPQ As Integer) As Boolean 
```

进入德尔福。

```
function SFileOpenArchive(lpFileName: String; dwPriority, dwFlags, hMPQ: Integer): Boolean; stdcall; external 'Storm.dll'; 
```

但是，当我调用函数并编译程序时，出现以下错误：

> 过程入口点 SFileOpenArchive 无法位于动态链接库 Storm.dll 中。

我已确保：

1.  DLL 存储在与应用程序相同的目录中
2.  我声明的函数存在（我得到了用 VB.NET 编码的源代码）

我能做些什么来解决这个错误？

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:04:50.783

我可以看到您有以下问题：

1.  该函数已按序号而不是名称导出。您需要在 Delphi 代码中指定序数。
2.  第一个参数应该是 PAnsiChar 而不是 Delphi 字符串。VB 代码使用字符串来指示编组器传递一个以空值结尾的字符串。根据经验，在 DLL 导入或导出中包含 Delphi 托管的 stype （如字符串）几乎总是错误的。
3.  最后一个参数是通过引用传递的。那是一个 Delphi var 参数。
4.  我认为返回值应该是 BOOL，但这可能不会给你带来麻烦。

像这样把它们放在一起：

```
function SFileOpenArchive(lpFileName: PAnsiChar; 
    dwPriority, dwFlags: Integer; var hMPQ: Integer): BOOL; 
    stdcall; external 'Storm.dll' index 266; 
```

请注意，我不是 100% 确定文本编码是 ANSI。但是，对您来说主要的障碍是序数导入。我希望我已经为你清除了。我相信你可以解决剩下的细节。

# eclipse - Eclipse 自动换行行号不匹配

> ID：12886677
> 
> 赞同：2
> 
> 时间：2012-10-14T21:25:17.323
> 
> 标签：eclipse, latex, word-wrap

我正在使用 Texlipse 编辑一些 LaTeX 文件，因此具有换行功能非常有帮助。我现在使用的一个（我发现的唯一一个）是[Eclipse word-wrap plugin](http://ahtik.com/blog/projects/eclipse-word-wrap/)。但是，此插件无法正确显示行号。

![行号](../Images/59ee4bc11ca5d2299fe2906429d5cb78.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:32:39.130

不幸的是，Word-Wrap 插件存在这个问题，正如您链接到的页面底部所述。没有其他办法了。

这个插件只是打开 Eclipse 编辑器构建在其之上的文本框小部件的自动换行功能的一种快速破解方法，而不是解决问题的可靠方法。Eclipse 不适合需要自动换行的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T09:09:14.557

正如谷歌首先带领我来到这里 - 我将提供关于这个 2 岁问题的更新：

这个问题已经在另一个基于自动换行的插件中得到解决： [Eclipse Word-Wrap Plug-In](http://dev.cdhq.de/eclipse/word-wrap/)

附加说明：安装后可能需要使用“-clean”参数运行 eclipse 以启用 LineNumbering 修复（在[此处](http://blog.cdhq.de/archive/476#comment-60676)提到）

# java - 将excel代码写入数据库

> ID：12886678
> 
> 赞同：0
> 
> 时间：2012-10-14T21:25:23.097
> 
> 标签：java, servlets

我正在尝试读取一个 excel 文件，然后将 excel 的内容写入数据库。我能够阅读 excel，如果我打印，它会显示在输出下方。我想知道如何将这些数据分离或拆分到数据库中的列并将数据存储在数据库中。如果我分成列，我在 DB 中有一个表可以保存以下数据。

```
 //CODE OUTPUT
1.0     Henry       Rey     Staff       IT      Software Engg       New Hire        TigoAdmin       11-Oct-2012     11-Oct-2012     555.0

2.0     Nick        Murry       Staff       IT      Administrator       New Hire        TigoAdmin       11-Oct-2012     11-Oct-2012     555.0       

// BELOW is the CODE

package com.project.bulk;

import java.io.FileInputStream;
import java.util.Iterator;
import java.util.Vector;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class ReadExcelFile {

        public static void main(String[] args) {

                String fileName = "C:\\excelFile.xls";
                Vector dataHolder = ReadCSV(fileName);
                printCellDataToConsole(dataHolder);
        }

        public static Vector ReadCSV(String fileName) {
                Vector cellVectorHolder = new Vector();

                try {
                        FileInputStream myInput = new FileInputStream(fileName);

                        POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

                        HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

                        HSSFSheet mySheet = myWorkBook.getSheetAt(0);

                        Iterator rowIter = mySheet.rowIterator();

                        while (rowIter.hasNext()) {
                                HSSFRow myRow = (HSSFRow) rowIter.next();
                                Iterator cellIter = myRow.cellIterator();
                                Vector cellStoreVector = new Vector();
                                while (cellIter.hasNext()) {
                                        HSSFCell myCell = (HSSFCell) cellIter.next();
                                        cellStoreVector.addElement(myCell);
                                }
                                cellVectorHolder.addElement(cellStoreVector);
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
                return cellVectorHolder;
        }

        private static void printCellDataToConsole(Vector dataHolder) {

                for (int i = 0; i < dataHolder.size(); i++) {
                        Vector cellStoreVector = (Vector) dataHolder.elementAt(i);
                        for (int j = 0; j < cellStoreVector.size(); j++) {
                              HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                              String stringCellValue = myCell.toString();
                              System.out.print(stringCellValue + "\t\t");
                        }
                        System.out.println();
                }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:09:37.510

如果您不知道将向语句发送多少个参数，您可以创建一个方法来处理它。我会给你一个非常基本的例子，记住这种方法可以大大改进。

```
public void executeSQLUpdate(String sql, List<Object> arguments) {
    Connection con = null;
    PreparedStatement pstmt = null;
    try {
        con = getConnection(); //a method that returns a java.sql.Connection to your database
        pstmt = con.prepareStatement(sql);
        if (arguments != null) {
            int i = 1;
            for(Object o : arguments) {
                pstmt.setObject(i++, o);
            }
        }
        //method to execute insert, update, delete statements...
        pstmt.executeUpdate();
    } catch(SQLException e) {
        //handle the error...
    } finally {
        //closing the resources (always in finally block, not in the try!)
        try {
            if (pstmt != null) {
                pstmt.close();
            }
            if (con != null) {
                con.close();
            }
        } catch (SQLException e) {
        }
    }
}

//calling the method to execute a sql insert statement
public void yourMethodToData(List<Object> arguments) {
    String sql = "INSERT INTO YOUR TABLE VALUES(?)";
    executeSQLUpdate(sql, arguments);
} 
```

该类`Vector`实现了`List`接口，因此您可以`Vector`通过这些方法传递您的。

作为旁注，您**不应**使用 a `Vector`，而应使用 a`List<Object>`实现的 a `ArrayList<Object>`。更多信息：[为什么 Java Vector 类被认为已过时或不推荐使用？](https://stackoverflow.com/q/1386275/1065197)

# java - 为什么这种二分搜索尝试会崩溃？

> ID：12886681
> 
> 赞同：0
> 
> 时间：2012-10-14T21:25:29.983
> 
> 标签：java, crash, binary-search

我对二进制搜索的概念相当陌生，并且正在尝试编写一个在 Java 中执行此操作的程序以供个人练习。我很好地理解了这个概念，但我的代码不起作用。

我的代码中发生了一个运行时异常，导致 Eclipse，然后是我的计算机崩溃……不过，这里没有编译时错误。

* * *

这是我到目前为止所拥有的：

```
public class BinarySearch
{
    // instance variables
    int[] arr;
    int iterations;

    // constructor
    public BinarySearch(int[] arr)
    {
        this.arr = arr;
        iterations = 0;
    }

    // instance method
    public int findTarget(int targ, int[] sorted)
    {
        int firstIndex = 1;
        int lastIndex = sorted.length;
        int middleIndex = (firstIndex + lastIndex) / 2;
        int result = sorted[middleIndex - 1];

        while(result != targ)
        {
            if(result > targ)
            {
                firstIndex = middleIndex + 1;
                middleIndex = (firstIndex + lastIndex) / 2;
                result = sorted[middleIndex - 1];

                iterations++;
            }
            else
            {
                lastIndex = middleIndex + 1;
                middleIndex = (firstIndex + lastIndex) / 2;
                result = sorted[middleIndex - 1];

                iterations++;
            }
        }
        return result;
    }

    // main method
    public static void main(String[] args)
    {
        int[] sortedArr = new int[]
        {
            1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29
        };
        BinarySearch obj = new BinarySearch(sortedArr);

        int target = sortedArr[8];
        int result = obj.findTarget(target, sortedArr);

        System.out.println("The original target was -- " + target + ".\n" +
                            "The result found was -- " + result + ".\n" +
                            "This took " + obj.iterations + " iterations to find.");        
    } // end of main method
} // end of class BinarySearch 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:29:19.490

```
int result = sorted[middleIndex - 1]; 
```

应该

```
int result = sorted[middleIndex]; 
```

如果`lastIndex = 1`，你尝试访问`sorted[-1]`。

和

```
lastIndex = middleIndex + 1; 
```

应该

```
lastIndex = middleIndex - 1; 
```

或者您可以尝试访问`sorted`.

而且，为了完整起见，正如[Ted Hopp 发现](https://stackoverflow.com/a/12886713/1011995)的那样，您应该从

```
firstIndex = 0;
lastIndex = sorted.length-1; 
```

因为数组索引是从 0 开始的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T21:29:32.860

在 Java 中，数组索引是从零开始的。也就是说，索引的有效范围是 0 到但*不*包括数组长度。您正在从 1 索引到数组长度。尝试替换这个：

```
int firstIndex = 1;
int lastIndex = sorted.length; 
```

和：

```
int firstIndex = 0;
int lastIndex = sorted.length - 1; 
```

此外，正如[@Daniel 在他的回答中指出的那样](https://stackoverflow.com/a/12886710/535871)，在你更新的情况下`lastIndex`，更新应该是`middleIndex - 1`（而不是`middleIndex + 1`你现在拥有的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:48:08.840

您的方法 findTarget() 中的 while 循环无限运行。所以我猜你在运行时遇到的错误应该与内存相关，因为它一直在运行。您会考虑对您的方法 findTarget() 进行一些更改吗？如果是，请尝试以下示例：

```
 int firstIndex = 0;
                 int lastIndex = sorted.length-1;
                while (firstIndex <= lastIndex) {
                    middleIndex = (firstIndex + lastIndex) / 2;
                    if (sorted[middleIndex] == targ) {

                            return middleIndex;
                    } else if (sorted[middleIndex] < targ) {
                         iterations++;
                        firstIndex = middleIndex + 1;
                    } else {
                         iterations++;
                           lastIndex = middleIndex - 1;
                    }
            }
            return -1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T02:50:00.013

不仅我的索引逻辑关闭（正如 Ted 和 Daniel 上面指出的那样），而且 if 语句中的代码块也应该与 else 的代码块进行切换。

这是更正后的代码：

```
public class BinarySearch
{
    // instance variables
    int[] arr;
    int iterations;

    // constructor
    public BinarySearch(int[] arr)
    {
        this.arr = arr;
        iterations = 0;
    }

    // instance method
    public int findTarget(int targ, int[] sorted)
    {
        int firstIndex = 0;
        int lastIndex = sorted.length - 1;
        int middleIndex = (firstIndex + lastIndex) / 2;
        int result = sorted[middleIndex];

        iterations++;

        while(result != targ)
        {
            if(result > targ)
            {
                lastIndex = middleIndex - 1;
                middleIndex = (firstIndex + lastIndex) / 2;
                result = sorted[middleIndex];

                iterations++;
            }
            else
            {
                firstIndex = middleIndex + 1;
                middleIndex = (firstIndex + lastIndex) / 2;
                result = sorted[middleIndex];

                iterations++;
            }
        }
        return result;
    }

    // main method
    public static void main(String[] args)
    {
        int[] sortedArr = new int[]
        {
            1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29
        };
        BinarySearch obj = new BinarySearch(sortedArr);

        int target = sortedArr[8];
        int result = obj.findTarget(target, sortedArr);

        System.out.println("The original target was -- " + target + ".\n" +
                "The result found was -- " + result + ".\n" +
                "This took " + obj.iterations + " iterations to find.");        
    } // end of main method
} // end of class BinarySearch 
```

# apache - .htaccess 在多个环境中

> ID：12886683
> 
> 赞同：13
> 
> 时间：2012-10-14T21:26:00.500
> 
> 标签：apache, .htaccess, mod-rewrite, expressionengine, environments

我知道以前有人问过类似的问题，但我还没有找到适合我的情况的任何真正具体的答案。

我有一个在多个环境（本地、开发、生产）上运行的 ExpressionEngine 站点，每个环境都需要不同的 .htaccess 规则：

**所有环境**

*   [删除 index.php](http://expressionengine.com/user_guide/general/remove_index.php.html)
*   设置404文件
*   设置 301 重定向

**发展**

*   使用 .htpasswd 进行密码保护
*   强制 HTTPS 协议
*   [使用X-Robots-Tag](http://yoast.com/prevent-site-being-indexed/)防止搜索引擎索引

**生产**

*   强制 HTTPS 协议
*   将非 www 子域重定向到 www

**当地的**

*   没有独特的规则。

我已经看到了很多关于如何为每个模块设置特定环境的示例。就像`RewriteCond %{REQUEST_HOST} ^dev.myurl.com`mod_rewrite 模块一样，[像这样的技巧](http://css-tricks.com/snippets/htaccess/allow-single-url/).htpasswd 要求。

但我真正喜欢的是某种方式来设置全局环境变量，然后在每个环境的 .htaccess 文件中重新使用这些变量。以伪javascript为例，例如：

```
var local = 'mysite.local';
var development = 'dev.mysite.com';
var production = 'www.mysite.com';

// Global .htaccess rules

if(environment == local){
   // Local environment .htaccess rules
}

if(environment == development){
   // Development environment .htaccess rules
}

if(environment == production){
   //Production envirotnment .htaccess rules
} 
```

这样，所有特定于环境的规则都组合在一起，形成一个非常干净的文件，如果环境发生变化，只需更改一个变量。

我已经看到一些关于更改 Apache 配置文件中的设置的参考，但如果我正在处理 3rd 方主机，这显然不是一个可行的选择。

那么这个天上掉馅饼是一厢情愿，还是可以做到呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T20:20:54.780

乔恩的回答很好。不幸的是，并非所有网络主机都允许您控制启动 Apache 的 -D 参数。

这是一种在开发和生产上使用单个 htaccess 文件的方法，但只有开发站点密码保护：

```
# ----------------------------------------------------------------------
# Password protect staging server
# Use one .htaccess file across multiple environments
# (e.g. local, dev, staging, production)
# but only password protect a specific environment.
# ----------------------------------------------------------------------

SetEnvIf Host staging.domain.com passreq
AuthType Basic
AuthName "Password Required"
AuthUserFile /full/path/to/.htpasswd
Require valid-user
Order allow,deny
Allow from all
Deny from env=passreq
Satisfy any 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T22:28:43.170

> 那么这个天上掉馅饼是一厢情愿，还是可以做到呢？

海事组织，是的。您永远无法根据 ENV 变量或类似的东西获得可预测的规则“范围”。`if(something) { do everything in here }`apache中不存在任意性。许多指令在某些范围内不起作用，并且在以后，当您需要更改某些东西的工作方式时，您更有可能破坏您拥有的东西，而不是简单地修改它。

最好的方法是[根本不使用 htaccess 文件](http://httpd.apache.org/docs/2.2/howto/htaccess.html#related)：

> 如果您有权访问 httpd 主服务器配置文件，则应完全避免使用 .htaccess 文件。使用 .htaccess 文件会降低 Apache http 服务器的速度。您可以包含在 .htaccess 文件中的任何指令都最好设置在`Directory`块中，因为它具有相同的效果和更好的性能。

为本地、开发和生产创建单独的虚拟主机。根据需要打开或关闭它们，无论它们共享什么全局配置，将其存储在其他地方（例如在一个名为 的文件中`global.includes`），然后`Include`在所有 3 个虚拟主机中使用该指令。如果您需要将规则应用于特定目录，请使用`<Directory>`块而不是 htaccess 文件。

如果您宁愿将所有内容都放在 htaccess 文件中，则*可以*尝试将所有内容都[放在`<IfDefine>`blocks](http://httpd.apache.org/docs/2.2/mod/core.html#ifdefine)中，这可能是您问题中与伪代码最接近的东西。本质上是这样的：

```
# Global htaccess rules
RewriteEngine On
RewriteRule ^foo$ /bar [L]

# Only local
<IfDefine LocalInstance>
    RewriteRule ^local/foo /bar [L]
</IfDefine>

# Only dev
<IfDefine DevInstance>
    RewriteRule ^dev/foo /bar [L]
</IfDefine>

# Only production
<IfDefine ProductionInstance>
    RewriteRule ^dev/foo /bar [L]
</IfDefine> 
```

然后，当您启动 apache 时，您需要传入`-DLocalInstance`、`-DDevInstance`或`-DProductionInstance`作为命令行参数或`Define`在 vhost 配置中的某处使用指令（只有一个参数）。这不能保证像看起来应该的那样顺利，我之前遇到过无法解释的问题`<IfDefine>`，特别是如果你想太花哨的话。

# javascript - 如何使用进度条创建 p:tabView

> ID：12886684
> 
> 赞同：0
> 
> 时间：2012-10-14T21:26:00.080
> 
> 标签：javascript, jsf, jsf-2, primefaces

我想`p:tabView`用进度条创建。类似的东西`p:tabMenu`- 当按下选项卡时，选项卡的标签更改为`Loading`我想创建类似但带有`p:tabView`. 例如，我如何像[这样](http://www.ajaxload.info/)调用进度条并在加载完成时对其进行操作。有没有可能的方法？

```
<p:tabView dynamic="true" cache="false">
    <p:tab id="tab1" title="tab1" >
        <ui:include src="tab1.xhtml" />
    </p:tab>
    <p:tab id="tab2" title="tab2" >
        <ui:include src="tab2.xhtml" />
    </p:tab>
    <p:tab id="ta3" title="tab3" >
        <ui:include src="tab3.xhtml" />
    </p:tab>
    <p:tab id="tab4" title="tab4" >
        <ui:include src="tab4.xhtml" />
    </p:tab>
</p:tabView> 
```

另一个可能有效的选项是在加载期间禁用选项卡标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T02:08:56.010

无需自己禁用任何东西。使用 primefaces [BlockUI](http://www.primefaces.org/showcase-labs/ui/blockUI.jsf)暂时禁用您的选项卡。只需将以下标记添加到您的页面：

```
 <p:blockUI block="myTabPanel" trigger="tab1,tab2,tab3,tab4" /> 
```

您`myTabPanel`将`id`分配给您的`<p:tabPanel/>`. [在 pf展示](http://www.primefaces.org/showcase-labs/ui/blockUI.jsf)中查看 blockUi 组件的其他用法

# c - 修改链表结构中的字段

> ID：12886685
> 
> 赞同：0
> 
> 时间：2012-10-14T21:26:10.740
> 
> 标签：c, list, struct, field

我在修改链表成员时遇到问题。我们有一个结构“记录”，声明如下：

```
typedef struct record
{
    char *make;
    int year;
    int stock;
    struct record *next;
} Record; 
```

保存有关经销商汽车的信息。

我们首先使用来自 CLI 参数指示的文本文件的输入创建链接列表，该文件与此完全相同：

```
Ford 2012 15
Ford 2011 3
Ford 2010 5
Toyota 2011 7
Toyota 2012 20
Toyota 2009 2
Honda 2011 9
Honda 2012 3
Honda 2013 12
Chevrolet 2013 10
Chevrolet 2012 25 
```

这些值使用 fgets 读入变量，然后发送到“insertRecordInAsendingOrder”函数，然后调用“createRecord”来实际创建链表中的每条记录。然后 insertRecordInAscendingOrder 将记录放入列表中的适当位置。然后使用函数“printList”按排序顺序打印出原始列表。

从这里开始，我们继续更新链表成员之一的股票。值“Ford”（代表品牌）、“2012”（代表年份）和“12”（代表 newStock 字段）被硬编码到函数“Main”中，并被发送到“updateStockOfCar”函数，这是以下代码：

```
int updateStockOfCar(Record *head, char *make, int year, int newStock)
{
        if(head == NULL)
        {
            printf("The list is empty\n");
            return 0;
        }

        Record * matching = malloc(sizeof(Record));
        matching->make = make;
        matching->year = year;

        //If the first record is the one we want to modify, then do so
        if(strcmp(head->make, matching->make) == 0)
        {
            if(head->year == matching->year)
            {
                head->stock = newStock;
                return 1;
            }

            Record* previous = head;
            Record* current = head->next;

                //Loop through the list, looking for the record to update
            while(current != NULL)
            {
                if(strcmp(current->make, matching->make) == 0 && current->year  == matching->year)
                {
                    current->stock = newStock;
                    return 1;
                }
                else
                {
                    previous = current;
                    current = current -> next;
                }
            }
        }
        return 0;
} 
```

如您所见，此函数接受列表的头节点（我们开始搜索要更新的正确节点的位置）、品牌和年份（针对我们要修改库存的节点）和 newStock (我们将用于替换目标节点中标准“库存”字段的值）。

我们的第一种情况是如果 head 为 NULL，在这种情况下，我们说列表是空的并且返回一个不成功的“0”返回给“Main”中的调用变量。

我们的第二种情况是如果匹配中head中的make字段之间的strcmp相同，并且head和matching中的年份字段相同，那么我们将head的stock字段更新为newStock并返回成功的“1”返回funciton“主要的”。本质上，如果头节点是要修改的正确节点，我们就会这样做。

我们的第三种情况是如果头节点不是要修改的正确节点。在 current（定义为开头的开头）不为 NULL 的情况下，我们将当前节点的 make 和 year 字段与我们想要更改的目标节点进行比较。如果它们匹配，我们将 current 的 stock 字段设置为 newStock 并返回成功的“1”。如果它们不匹配，我们将通过“else”条件，遍历列表，直到找到我们正在寻找的那个，在这种情况下，我们更新 current 的 stock 字段。

如果所有这些情况都失败，则出现第四种情况，将不成功的“0”返回到 main，表示目标记录不存在于链表中。

但是，当编译并执行代码（我在下面为您提供的）时，会为程序的输出生成以下内容：

```
The original list in ascending order: 
--------------------------------------------------
                Make                Year     Stock
--------------------------------------------------
           Chevrolet                2012        25
           Chevrolet                2013        10
                Ford                2010         5
                Ford                2011         3
                Ford                2012        15
               Honda                2011         9
               Honda                2012         3
               Honda                2013        12
              Toyota                2009         2
              Toyota                2011         7
              Toyota                2012        20

====Update Stock of Car====
Failed to update stock. Please make sure the car that has the make/year exists in the  list.

====Removing a Record====
I'm trying to remove the record of Ford 2012...
Removed the record successfully. Printing out the new list...
--------------------------------------------------
                Make                Year     Stock
--------------------------------------------------
           Chevrolet                2012        25
           Chevrolet                2013        10
                Ford                2010         5
                Ford                2011         3
               Honda                2011         9
               Honda                2012         3
               Honda                2013        12
              Toyota                2009         2
              Toyota                2011         7
              Toyota                2012        20

====Insert Record in Ascending Order====
I'm trying to insert a record of make Jeep year 2011 stock 5...
Inserted the record successfully. Printing out the new list...
--------------------------------------------------
                Make                Year     Stock
--------------------------------------------------
           Chevrolet                2012        25
           Chevrolet                2013        10
                Ford                2010         5
                Ford                2011         3
               Honda                2011         9
               Honda                2012         3
               Honda                2013        12
                Jeep                2011         5
              Toyota                2009         2
              Toyota                2011         7
              Toyota                2012        20

I'm trying to insert a record of make Honda, year 2012, and stock 10...
Inserted the record successfully. Printing out the new list...
--------------------------------------------------
                Make                Year     Stock
--------------------------------------------------
           Chevrolet                2012        25
           Chevrolet                2013        10
                Ford                2010         5
                Ford                2011         3
               Honda                2011         9
               Honda                2012        10
               Honda                2012         3
               Honda                2013        12
                Jeep                2011         5
              Toyota                2009         2
              Toyota                2011         7
              Toyota                2012        20 
```

出于某种原因，“Main”函数被告知找不到节点，即使它存在于列表中。

这是整个程序，虽然还有更多有问题的功能，但我已经排除了其中的大部分：

```
/*homework2stackoverflow2.c*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LINE 50
#define MAX_MAKE 20

typedef struct record
{
    char *make;
    int year;
    int stock;
    struct record *next;
} Record;

int compareCars(Record *car1, Record *car2);
void printList(Record *head);
Record* createRecord(char *make, int year, int stock);
int insertRecordInAscendingOrder(Record **head, char *make, int year, int stock);
int removeRecord(Record **head, char *make, int year);
int updateStockOfCar(Record *head, char *make, int year, int newStock);

int main(int argc, char **argv)
/*START MAIN*/
{
    FILE *inFile = NULL;
    char line[MAX_LINE + 1];
    char *make, *yearStr, *stockStr;
    int year, stock, len;
    Record* headRecord = NULL;

    /*Input and file diagnostics*/
    if (argc!=2)
    {
        printf ("Filename not provided.\n");
        return 1;
    }

    if((inFile=fopen(argv[1], "r"))==NULL)
    {
        printf("Can't open the file\n");
        return 2;
    }

    /*obtain values for linked list*/
    while (fgets(line, MAX_LINE, inFile))
    {
        make = strtok(line, " ");
        yearStr = strtok(NULL, " ");
        stockStr = strtok(NULL, " ");
        year = atoi(yearStr);
        stock = atoi(stockStr);
        insertRecordInAscendingOrder(&headRecord,make, year, stock);

    }

/*START PRINT ORIGINAL LIST*/
    printf("The original list in ascending order: \n");
    printList(headRecord);
/*END PRINT ORIGINAL LIST*/

/*START UPDATE STOCK TEST*/
    printf("\n====Update Stock of Car====\n");
    int newStock = 12;
    char* newMake = "Ford";
    int updateStatus = updateStockOfCar(headRecord, newMake, year, newStock);
    if(updateStatus == 0)
    {
        printf("Failed to update stock. Please make sure the car that has the make/year exists in the list.\n");

    }
    if(updateStatus == 1)
    {
        printf("Updated stock successfully. Printing out the new list...\n");
        printList(headRecord);
    }
/*END UPDATE STOCK TEST*/

/*START REMOVE RECORD TEST*/
    printf("\n====Removing a Record====\n");
    char *deleteMake = "Ford";
    int deleteYear = 2012;
    int removeStatus = removeRecord(&headRecord, deleteMake, deleteYear);

    if(removeStatus == 0)
    {
        printf("Failed to remove the record. Please make sure the care that has the make/year exists in the list.\n");
    }
    if(removeStatus == 1)
    {
        printf("Removed the record successfully. Printing out the new list...\n");
        printList(headRecord);
    }
/*END REMOVE RECORD TEST*/

/*START INSERT IN ASCENDING ORDER TEST*/
    printf("\n====Insert Record in Ascending Order====\n");
    char* insertMake = "Jeep";
    int insertYear = 2011;
    int insertStock = 5;
    int insertStatus = insertRecordInAscendingOrder(&headRecord, insertMake, insertYear, insertStock);
    printf("I'm trying to insert a record of make %s year %d stock %d...\n", insertMake, insertYear, insertStock);
    if(insertStatus == 0)
    {
        printf("Failed to insert the new record. Please make sure the car that has the make/year doesn't exist in the list.\n");        
    }
    if(insertStatus == 1)
    {
        printf("Inserted the record successfully. Printing out the new list...\n");
        printList(headRecord);
    }
    insertMake = "Honda";
    insertYear = 2012;
    insertStock = 10;
    insertStatus = insertRecordInAscendingOrder(&headRecord, insertMake, insertYear, insertStock);
    printf("\nI'm trying to insert a record of make %s, year %d, and stock %d...\n", insertMake, insertYear, insertStock);
    if(insertStatus == 0)
    {
        printf("Failed to insert the new record. Please make sure the car that has the make/year doesn't exist in the list.\n");        
    }
    if(insertStatus == 1)
    {
        printf("Inserted the record successfully. Printing out the new list...\n");
        printList(headRecord);
    }

/*END INSERT IN ASCENDING ORDER TEST*/

    fclose(inFile);
    return 0;
}
/*END MAIN*/

int compareCars(Record *car1, Record *car2)
{
    int makecmp = strcmp(car1->make, car2->make);

    if( makecmp > 0 )
      return 1;

    if( makecmp == 0 )
    {
        if (car1->year > car2->year)
        {
            return 1;
        }
    if( car1->year == car2->year )
        {
            return 0;
        }

    return -1;
}

/*prints list. lists print.*/
void printList(Record *head)
{
    int i;
    int j = 50;
    Record *aRecord;
    aRecord = head;
    for(i = 0; i < j; i++)
    {
        printf("-");
    }
    printf("\n");
    printf("%20s%20s%10s\n", "Make", "Year", "Stock");
    for(i = 0; i < j; i++)
    {
        printf("-");
    }
    printf("\n");
    while(aRecord != NULL)
    {       
        printf("%20s%20d%10d\n", aRecord->make, aRecord->year,
        aRecord->stock);        
        aRecord = aRecord->next;
    }
    printf("\n");
}

Record* createRecord(char *make, int year, int stock)
{
    Record *theRecord;
    int len;

    if(!make)
    {
        return NULL;
    }

    theRecord = malloc(sizeof(Record));

    if(!theRecord)
    {
        printf("Unable to allocate memory for the structure.\n");
        return NULL;
    }

    theRecord->year = year;
    theRecord->stock = stock;

    len = strlen(make);
    theRecord->make = malloc(len + 1);
    strncpy(theRecord->make, make, len);
    theRecord->make[len] = '\0';
    theRecord->next=NULL;

    return theRecord;
}

int insertRecordInAscendingOrder(Record **head, char *make, int year, int stock)
{
    Record *previous = *head;
    Record *newRecord = createRecord(make, year, stock);
    int compResult;
    Record *current = *head;

    if(*head == NULL)
    {
        *head = newRecord;
        //printf("Head is null, list was empty\n");
        return 1;
    }

    else if(compareCars(newRecord, *head) == 0)
    {   

        return 0;
    }
    else if ( compareCars(newRecord, *head)==-1) 
    {
        *head = newRecord;
        (*head)->next = current;
        //printf("New record was less than the head, replacing\n");
        return 1;
    }
    else 
    {
        //printf("standard case, searching and inserting\n");
        previous = *head;

        while ( current != NULL &&(compareCars(newRecord, current)==1)) 
        {
            previous = current; 
            current = current->next; 
        }

        previous->next = newRecord;
        previous->next->next = current;
    }
    return 1;
}

int removeRecord(Record **head, char *make, int year)
{
    printf("I'm trying to remove the record of %s %d...\n", make, year);

    if(*head == NULL)
    {
        printf("The list is empty\n");
        return 0;
    }   

    Record * delete = malloc(sizeof(Record));
    delete->make = make;
    delete->year = year;

    //If the first record is the one we want to delete, then we need to update the head of the list and free it.
    if((strcmp((*head)->make, delete->make) == 0))
    {           
        if((*head)->year == delete->year)
        {               
            delete = *head;
            *head = (*head)->next;
            free(delete);
            return 1;
        }
    }

    Record * previous = *head;
    Record * current = (*head)->next;

    //Loop through the list, looking for the record to remove.
    while(current != NULL)
    {
        if(strcmp(current->make, delete->make) == 0 && current->year == delete->year)
        {       
            previous->next = current->next;
            free(current);
            return 1;
        }
        else
        {       
            previous = current;
            current = current->next;
        }
    }
    return 0;   
}

int updateStockOfCar(Record *head, char *make, int year, int newStock)
{
    if(head == NULL)
    {
        printf("The list is empty\n");
        return 0;
    }

    Record * matching = malloc(sizeof(Record));
    matching->make = make;
    matching->year = year;

    //If the first record is the one we want to modify, then do so
    if(strcmp(head->make, matching->make) == 0)
    {
        if(head->year == matching->year)
        {
            head->stock = newStock;
            return 1;
        }

        Record* previous = head;
        Record* current = head->next;

    //Loop through the list, looking for the record to update
        while(current != NULL)
        {
            if(strcmp(current->make, matching->make) == 0 && current->year == matching->year)
            {
                current->stock = newStock;
                return 1;
            }
            else
            {
                previous = current;
                current = current -> next;
            }
        }
    }
    return 0;
} 
```

是什么导致这件事表明它不在列表中？

是的......这是一个家庭作业：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:40:29.343

我不完全清楚你为什么要分配一条新记录（顺便说一句，它正在泄露）只是为了遍历你的链表并在找到节点后更新它。有什么问题吗：

```
int updateStockOfCar(Record *head, const char *make, int year, int newStock)
{
    Record* p = head;
    while (p)
    {
       if ((p->year == year) && !strcmp(p->make, make))
       {
          p->stock = newStock;
          break;
       }
       p = p->next;
    }
    return (p ? 1 : 0);
} 
```

在给定品牌/年份的情况下检索汽车的当前库存：

```
int getStockOfCar(Record *head, const char *make, int year)
{
    Record* p = head;
    while (p)
    {
       if ((p->year == year) && !strcmp(p->make, make))
          return p->stock;
       p = p->next;
    }
    return 0;
} 
```

还是我错过了问题中的要求（不会是第一次）。？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:40:44.820

> 值“Ford”（代表品牌）、“2012”（代表年份）和“12”（代表 newStock 字段）被硬编码到函数“Main”中，并被发送到“updateStockOfCar”函数

“福特”和“12”是硬编码的，但“2012”不是...

另外，你从来没有`free(matching)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T21:34:05.210

这是固定代码，您将while循环放在第一个头匹配if语句中，应该在if语句之外

```
int updateStockOfCar(Record **head, char *make, int year, int newStock)
{
    if(*head == NULL)
    {
        printf("The list is empty\n");
        return 0;
    }

    Record * matching = malloc(sizeof(Record));
    matching->make = make;
    matching->year = year;

    //If the first record is the one we want to modify, then do so
    if(strcmp((*head)->make, matching->make) == 0)
    {
        if((*head)->year == matching->year)
        {
            (*head)->stock = newStock;
            return 1;
        }
    }

        Record* current = (*head)->next;

    //Loop through the list, looking for the record to update
    while(current != NULL) {
            if(strcmp(current->make, matching->make) == 0 && current->year == matching->year)
            {
                current->stock = newStock;
                return 1;
            }
            else
            {
                current = current -> next;
            }
    }
    return 0;
} 
```

# string - 用于编码 QR 码的位移大字符串

> ID：12886686
> 
> 赞同：1
> 
> 时间：2012-10-14T21:26:52.577
> 
> 标签：string, bit-manipulation, qr-code

例如，假设一个 QR 码数据流包含 55 个数据字（每个长度为一个字节）和 15 个纠错字（又是一个字节）。数据流以 12 位标头开始，以 4 个 0 位结束。因此，12 + 4 位页眉/页脚和 15 个字节的纠错，留给我 53 个字节来容纳 53 个字母数字字符。53 个字节的数据和 15 个字节的 ec 以长度为 68 (str68) 的字符串提供。问题似乎很简单——将 2 个字节的（右移）标头数据与 str68 连接，然后将整个 70 个字节左移 4 位。

这是多年编程以来我第一次需要做这样的事情，我是 ac 和比特转移的菜鸟，所以请温柔......我做了一些调查，到目前为止还没有弄清楚如何位移 70 字节的数据；任何帮助将不胜感激。

较大的 QR 码可以容纳 2000 字节的数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:36:03.620

您需要一次查看这 4 位。

您需要担心的前 4 位是第一个字节的低位。幸运的是，这是一个简单的情况，因为它们需要以第一个字节的高位结束。

您需要担心的接下来的 4 位是第二个字节的高位。这些最终需要作为第一个字节的低位。

您需要担心的接下来的 4 位是第二个字节的低位。但幸运的是，您已经知道如何做到这一点，因为您已经为第一个字节做到了。

你继续这种方式，直到你处理完第 70 个字节的低字节。

# c# - 如何在没有新线程或 async 和 await 关键字但只有 Task 的情况下获得异步

> ID：12886691
> 
> 赞同：0
> 
> 时间：2012-10-14T21:27:14.173
> 
> 标签：c#, .net, asynchronous, async-await

我想知道如何在不使用额外线程或关键字但仅使用任务的情况下完成以下程序所做的相同 `await`事情`async`。一个示例代码会很棒。在我看来，我们需要使用IO 绑定操作或任何长时间运行的操作`TaskCompletionSource`的`Async`版本。

```
static void Main(string[] args)
{
  Task t = Go();
  Console.WriteLine("Hello World");
  Task.Delay(1000).GetAwaiter().OnCompleted(() => { Console.WriteLine("Completed"); });
  Console.ReadLine();
}

static async Task Go()
{
  var task = PrintAnswerToLife();
  await task;
  Console.WriteLine("Done");
}

static async Task PrintAnswerToLife()
{
  var task = GetAnswerToLife();
  int answer = await task;
  Console.WriteLine(answer);
}

static async Task<int> GetAnswerToLife()
{
  var task = Task.Delay(2000);
  await task;
  int answer = 21 * 2;
  return answer;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:42:52.843

您可以使用. `async`_ 其他翻译也是可能的，例如，成为。`await``Task``ContinueWith``Task.Delay``System.Threading.Timer`

对于执行以下操作的任何`async`方法，基本模式是`await`：

```
static async Task Go()
{
  var task = PrintAnswerToLife();
  await task;
  Console.WriteLine("Done");
} 
```

变成：

```
static Task Go()
{
  var tcs = new TaskCompletionSource<object>();
  var task = PrintAnswerToLife();
  task.ContinueWith(_ =>
  {
    Console.WriteLine("Done");
    tcs.SetResult(null);
  });
  return tcs.Task;
} 
```

正确的错误处理需要更多的工作。

# google-app-engine - 将第 3 方库导入应用引擎

> ID：12886696
> 
> 赞同：-2
> 
> 时间：2012-10-14T21:27:38.667
> 
> 标签：google-app-engine

我无法让应用引擎接受第 3 方库。

我将它复制到应用程序引擎目录中，但我不断收到错误，“无效的对象，不支持库 tweepy” in blah blah blah/app.yaml

有人可以指出明显的错误吗？

谢谢

好的，我对代码做了一些更改，现在我得到了这个错误，希望它更有用

```
 2012-10-15 20:09:36 Running command: "['C:\\Python27\\pythonw.exe', 'C:\\Program             Files\\Google\\google_appengine\\dev_appserver.py', '--admin_console_server=', '--port=8083', 'C:\\Documents and Settings\\ladds\\My Documents\\udacity\\whycantisigh']" 
```

警告 2012-10-15 19:09:54,140 rdbms_mysqldb.py:74] rdbms API 不可用，因为无法加载 MySQLdb 库。警告 2012-10-15 19:09:56,171 datastore_file_stub.py:513] 无法从 c:\docume~1\ladds\locals~1\temp\dev_appserver.datastore 读取数据存储区 警告 2012-10-15 19:09 :56,203 dev_appserver.py:3394] 无法初始化图像 API；您可能缺少 Python “PIL” 模块。ImportError: No module named _imaging INFO 2012-10-15 19:09:56,328 dev_appserver_multiprocess.py:647] 在端口 8083 上运行应用程序 dev~whycantisigh: #http://localhost:8083 INFO 2012-10-15 19:09: 56,328 dev_appserver_multiprocess.py:649] 管理控制台位于：#http://localhost:8083/_ah/admin 警告 2012-10-15 19:10:26,171 py_zipimport.py:139] 无法打开 zipfile C:

对不起，它没有明确格式化，但它只会让我格式化第一行。

无论如何，问题的要点似乎是我下载到 python 中的第 3 方库（并且在 shell 中工作）不能被应用程序引擎访问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T04:37:38.367

如果您显示您的 app.yaml 和实际的错误消息而不是等等等等，将会有所帮助。

但是很可能您将 tweepy 放在 app.yaml 中，而您不需要。

**编辑**

要在 GAE 中使用 3rd 方库，您需要将库的副本放在项目文件夹中。否则，它不会在部署时上传到服务器。将其安装到您的 python 路径将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:56:08.700

[https://developers.google.com/appengine/kb/libraries](https://developers.google.com/appengine/kb/libraries)

> 许多原生 C Python 模块已被 Google App Engine 禁用。Python 2.7 运行时支持比 Python 2.5 运行时更多的模块。

# excel - Excel用名字替换数字

> ID：12886698
> 
> 赞同：0
> 
> 时间：2012-10-14T21:27:46.260
> 
> 标签：excel

我想用相应的名称替换一些特定的数字（重复的，它们是客户和供应商的编号）（以便在数据透视表中易于理解）。

例如，在下一列中放置一个恢复数字名称的函数。

我可以用哪个功能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:55:43.940

使用 VLOOKUP 函数创建一个额外的数据列，该函数将填充客户或供应商的名称。例如，在您的数据表中，您可能有：

`=VLOOKUP(A2, customers!A2:B100, 2, 0)`

这将在工作表的 A2:B100 范围内查找 A2 的值（例如客户编号）`customers`（假设此工作表中的数据是 A 中的客户编号和 B 中的客户描述），然后返回适当的客户名称。然后只需编辑您的数据透视表数据源以包含该列并使用它而不是客户编号。

# linux - 搜索后如何打印所有具有相同前缀的文件？

> ID：12886703
> 
> 赞同：1
> 
> 时间：2012-10-14T21:28:30.853
> 
> 标签：linux, bash, shell

我需要搜索一个包含许多子目录的目录，每个子目录都包含文件。文件内容如下 question1234_01，其中 1234 是随机数字，后缀 _01 是包含前缀的消息数，这意味着它们是同一连续线程的一部分。

```
find . -name 'quest*' | cut -d_ -f1  | awk '{print $1}' | uniq -c | sort -n 
```

示例输出：

```
1 quest1234    
10 quest1523 
```

这将搜索所有文件，然后按顺序对它们进行排序。

我想要做的是打印所有最终出现次数最多的文件，在我的示例中，有 10 个匹配项。

所以它应该只`quest1523_01`通过输出`quest1523_11`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:38:33.243

如果我理解您的意思，并且您想获取按频率排序的项目列表，则可以通过以下方式进行管道传输：

```
| sort | uniq -c | sort -k1nr 
```

例如：

输入：

```
file1
file2
file1
file1
file3
file2
file2
file1
file4 
```

输出：

```
4 file1
3 file2
1 file3
1 file4 
```

## 更新

顺便说一句，你用 awk 做什么？

```
find . -name 'quest*' | cut -d_ -f1  | sort | uniq -c | sort -k1nr | head -n10 
```

返回更经常找到的 10 个项目。

## 更新

这是一个大大改进的版本。唯一的缺点，它*不是*按出现次数排序的。但是，我将弄清楚如何解决它:)

```
find . -name 'question*' | sort \
    | sed "s#\(.*/question\([0-9]\+\)_[0-9]\+\)#\2 \1#" \
    | awk '{ cnt[$1]++; files[$1][NR] = $2 } END{for(i in files){ print i" ("cnt[i]")"; for (j in files[i]) { print "    "files[i][j] } }}' 
```

## 更新

在对约 140 万条记录进行测试后（花了 23 英寸），我认为 awk 效率太低，无法处理所有分组等内容，所以我用 Python 编写了它：

```
#!/usr/bin/env python

import sys, re

file_re = re.compile(r"(?P<name>.*/question(?P<id>[0-9]+)_[0-9]+)")

counts = {}
files = {}

if __name__ == '__main__':
    for infile in sys.stdin:
    infile = infile.strip()
    m = file_re.match(infile)
    _name = m.group('name')
    _id = m.group('id')
    if not _id in counts:
        counts[_id] = 0
    counts[_id]+=1
    if not _id in files:
        files[_id] = []
    files[_id].append(_name)

    ## Calculate groups
    grouped = {}
    for k in counts:
    if not counts[k] in grouped:
        grouped[counts[k]] = []
    grouped[counts[k]].append(k)

    ## Print results
    for k, v in sorted(grouped.items()):
    for fg in v:
        print "%s (%s)" % (fg, counts[fg])
        for f in sorted(files[fg]):
            print "    %s" % f 
```

它完成了拆分、分组和排序的所有工作。在同一个输入文件上运行只需要大约 3 英寸（添加了所有排序的东西）。

如果您需要更快的速度，可以尝试使用 Cython 进行编译，这通常至少快 30%。

## 更新 - Cython

好的，我刚尝试过 Cython。

只需将上述文件另存为`calculate2.pyx`. 在同一文件夹中，创建`setup.py`：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("calculate2", ["calculate2.pyx"])]
) 
```

还有一个启动器脚本（我命名它`calculate2_run.py`）

```
import calculate2
import sys
if __name__ == '__main__':
    calculate2.runstuff(sys.stdin) 
```

然后，确保您已安装 cython，然后运行：

```
python setup.py build_ext --inplace 
```

除其他外，这应该生成一个`calculate2.so`文件。

现在，`calculate2_run.py`像往常一样使用（只需输入 find 的结果）。

我在同一个输入文件上运行它，没有任何进一步的优化：这一次，它花了 1.99''。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:16:24.410

你可以这样做：

1.  将您的初始搜索结果保存在临时文件中。
2.  过滤掉文件数最多的前缀
3.  在该临时文件中搜索前缀，然后删除该临时文件

.

```
find -name 'quest*' | sort -o tempf
target=$(awk -F_ '{print $1}' tempf\
         | uniq -c | sort -n | tail -1\
         | sed 's/[0-9]\+ //')
grep "$target" tempf
rm -f tempf 
```

笔记：

1.  我假设具有相同前缀的文件位于相同的子目录中。
2.  输出包含相对于当前目录的路径。如果您只想要基本名称，只需`sed 's/.*\///'`在`grep`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-21T10:09:53.330

您的解决方案没有选择文件的基本名称，但我认为您正在寻找：

```
awk 'NF{ b=$(NF-1); v[b]=v[b] (v[b]?",":"") $NF;  a = ++c[b]} 
    a > max {max = a; n=b }  
    END {split(v[b],d, ","); for(i in d) print b "_" d[i]}' FS='[/_]' 
```

无需对数据进行排序；全排序非常昂贵。

# database - 是否可以将 C 与 SQL 数据库连接起来。？

> ID：12886706
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:28:56.743
> 
> 标签：database

我们已经在 java 中完成了数据库连接。现在，我需要在 c 中与任何数据库服务器 oracle/sql 进行类似的数据库连接。用c语言可以吗？谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:35:02.247

这是您正在寻找的示例。请尝试用谷歌搜索类似这样的简单问题。这是第一个结果。

[http://orclib.sourceforge.net/](http://orclib.sourceforge.net/)

# vim - vim autocmd 静默执行

> ID：12886722
> 
> 赞同：10
> 
> 时间：2012-10-14T21:31:12.990
> 
> 标签：vim, exuberant-ctags

我的 .vimrc 文件以这样的方式配置，每次我保存 Python 文件或输入 python 缓冲区（也适用于 Matlab 和 Latex，但都是一样的）它默默地执行旺盛的 ctags：

```
set tags+=./tags
autocmd BufWritePost *.py silent !ctags *.py
autocmd BufEnter *.py silent !ctags *.py
autocmd BufWritePost *.m silent !ctags *.m
autocmd BufEnter *.m silent !ctags *.m
autocmd BufWritePost *.tex silent !ctags *.tex
autocmd BufEnter *.tex silent !ctags *.tex 
```

然后我有时会使用这些信息来浏览我的文件。这在 Mac OS X 和 Linux 中运行良好。上个月左右，我不得不使用 Windows 7。当我将这些行添加到我的 .vimrc 时，它会在我面前闪烁一个 cmd 提示符，这非常令人讨厌。我还尝试了 !start 而不是静默，这带来了许多其他问题，其中最主要的问题是每次在 :w 之后都必须按 enter。

我错过了什么？是否可以复制我的 OS X 配置，在其中执行命令、更新标签文件、重新加载所有内容而不闪烁 cmd 提示符并且没有其他问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T21:54:44.920

你可能想检查

```
autocmd BufEnter *.tex silent! !start /min ctags *.tex 
```

或者，尝试`/b /wait`.

另请参阅[https://serverfault.com/questions/31608/can-i-run-a-gui-program-in-the-background-on-the-windows-command-line/31621#31621](https://serverfault.com/questions/31608/can-i-run-a-gui-program-in-the-background-on-the-windows-command-line/31621#31621)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T12:03:58.910

你也可以查看[shell.vim 插件](http://www.vim.org/scripts/script.php?script_id=3123)：

```
enables execution of external commands in the background without opening a
command prompt window on Windows. 
```

它还提供了一些有趣的附加功能。

# php - 如何建立一对一的关系

> ID：12886726
> 
> 赞同：0
> 
> 时间：2012-10-14T21:31:45.387
> 
> 标签：php, orm, yii

我正在构建一个系统，我想将一些数据与许多其他表分开。

我有很多需要属性的对象：标题、短描述、长描述。我将它们存储在另一个名为`Info`.

所以在 Yii 中你可以从数据库中构建你的模型。从这些模型中，它能够为它制作 CRUD 或表格。我想要的是，当我生成表单时，我也可以在表单中拥有一对一相关的对象。

例如表格：

`Community`有两个外键：`Info_id`（FK）和`Contact_id`（FK）。
`Contact`（联系人字段）具有属性`Phone`和`Address`。
`Info`（信息字段）具有属性`Name`,`Short description`和`Description`.

使用**自动生成**（如果可能，使用 Gii）的形式`Community`：

```
Fieldset <Contact>
textfield Phone
textfield Address

Fieldset <Info>
textfield Name
textfield Short description
textfield Description 
```

这可以使用 Yii 的自动生成器`Gii`吗？还是一种无需手动更改所有内容（控制器和表单）的方法？

在我看来，一对一的关系没有丝毫实现，这很“奇怪”。或者我应该在每个对象中创建字段？为什么会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:56:50.693

默认的 giix 模板不会为您执行此操作，您可以随时[创建自己的模板](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#extending-gii)，我还推荐[giix](http://www.yiiframework.com/extension/giix/)来处理这个和多对多，等等。

# php - 如果文件字段不为空，则验证另一个字段

> ID：12886727
> 
> 赞同：1
> 
> 时间：2012-10-14T21:31:53.793
> 
> 标签：php, yii

如果文件字段不为空，我正在尝试验证字段。因此，如果有人试图上传文件，我需要验证另一个字段以确保他们选择了他们正在上传的内容，但是我不知道如何查看或仅在字段不为空时运行规则。

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('full_name, gender_id','required'),
        array('video', 'file', 'types'=>'mp4', 'allowEmpty' => true),
        array('audio', 'file', 'types'=>'mp3', 'allowEmpty' => true),
        array('video','validateVideoType'),
    );
}

public function validateVideoType() {
    print_r($this->video);
    Yii::app()->end();
} 
```

所以`this->video`无论我是否上传了东西，它总是空的。如何检查是否设置了该变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:13:45.317

必须正确定义自定义验证函数。它总是有两个参数`$attribute`& `$params`。

```
public function validateVideoType($attribute, $params) {
    print_r($this->video);
    Yii::app()->end();
} 
```

现在，您应该编写自定义的验证方式。我相信那会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:46:44.007

您可以使用 jQuery/javascript 检查它，其中“new_document”是输入文件字段的名称。

```
if ($("#new_document").val() != "" || $("#new_document").val().length != 0) {
        //File was chosen, validate requirements
        //Get the extension
        var ext = $("#new_document").val().split('.').pop().toLowerCase();
        var errortxt = '';
        if ($.inArray(ext, ['doc','docx','txt','rtf','pdf']) == -1) {
            errortxt = 'Invalid File Type';
            //Show error
            $("#document_errors").css('display','block');
            $("#document_errors").html(errortxt);

            return false;
        }

        //Check to see if the size is too big
        var iSize = ($("#new_document")[0].files[0].size / 1024);
        if (iSize / 1024 > 5) {
            errortxt = 'Document size too big. Max 5MB.';
            //Show error
            $("#document_errors").css('display','block');
            $("#document_errors").html(errortxt);

            return false
        }
    } else {
        //No photo chosen
        //Show error
        $("#document_errors").css('display','block');
        $("#document_errors").html("Please choose a document.");
        return false;
    } 
```

这段代码显然不适合您的需求，但可能需要拼凑您需要的东西。

# javascript - 如何使用正则表达式转换字符串

> ID：12886728
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:32:27.960
> 
> 标签：javascript, regex

如何使用正则表达式转换字符串，使其仅包含字母 (az) 或连字符。它应该摆脱`" ' ! ? .`等等。即使它们出现多次。

```
// if i have e.g.
var test = '"test!!!"';

// how can i get the value "test"? 
```

有人可以帮忙吗。RegEx 对我来说是全新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:34:40.787

只是[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)你不想要的字符：

```
'"test!!!"'.replace(/[^a-z-]/gi, '') 
```

`[^a-z-]`匹配除 az 和连字符以外的所有字符。该`/g`标志使正则表达式应用多次。该`/i`标志（可选）使其匹配不区分大小写，即不替换大写字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:34:51.390

这很简单：您构建一个匹配[除](http://www.regular-expressions.info/charclass.html#negated)您想要的那些字符之外的所有内容的[字符类](http://www.regular-expressions.info/charclass.html)，并通过用空字符串[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)每个出现（*全局标志）来删除它们：*

 *```
return str.replace(/[^a-z-]/g, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:40:12.067

```
 str = "hello!! my + name $ is slim-shady";
   console.log(str.replace(/[^a-z-]+/g, ''));

$ node src/java/regex/alphanum.js 
hellomynameisslim-shady 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T21:40:30.050

对任何字符串变量使用该`replace`方法并指定要删除的字符。

这是一个例子：

```
 var sampleString = ("Hello World!!");    //Sample of what you have. 
 var holdData = sampleString.replace(/!!/gi, '');
 window.alert(holdData); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-14T21:35:28.703

```
var str = "test!!!";
str = str.replace(/[^A-Za-z\-]/g,""); 
```*

# php - 在 PHP 中将用户 ID 转换为名称（单独的表）

> ID：12886730
> 
> 赞同：1
> 
> 时间：2012-10-14T21:32:36.557
> 
> 标签：php, mysql

我目前正在尝试显示我关注的人的用户名，问题是在接下来的过程中，只存储了我和我关注的人的 ID。

我已经到了显示 ID 的地步，但我想显示超链接的名称。$p_id 是配置文件 ID。

这是我所拥有的：

```
$following = mysql_query("SELECT `follower`, `followed` FROM user_follow WHERE follower=$p_id");

I am following: <?php while($apple = mysql_fetch_array($following)){

            echo '<a href="'.$apple['followed'].'">+'.$apple['followed'].'</a> ';
            }?> 
```

用户名位于“用户名”字段下的不同表“用户”中 - 我需要它们与当前显示的 ID 匹配并显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:36:24.303

所以你需要的是一对`JOIN`s （隐式`INNER JOIN`）反对`users`，一个加入追随者，一个加入追随者。

```
SELECT 
  /* Rather than SELECT * you need to be specific about the columns, and
     give them aliases like followed_name since you have 2 tables with the same
     column names in the query */
  ufollower.id AS follower_id,
  ufollower.username AS follower_name,
  ufollowed.id AS followed_id,
  ufollowed.username AS followed_name
FROM
  /* JOIN twice against users, once to get the follower and once to get the followed */
  user_follow 
  /* users aliased as ufollower to get the follower details */
  JOIN users ufollower ON ufollower.id = user_follow.follower
  /* users aliased as ufollowed to get the followed details */
  JOIN users ufollowed ON ufollowed.id = user_follow.followed
WHERE
  user_follow.follower = $p_id 
```

在您的循环中，名称在`follower_name, followed_name`.

```
while($apple = mysql_fetch_array($following)){
   // Be sure to wrap the name in htmlspecialchars() to encode characters that could break html.
   // This has the followed id in the href and the followed name in the link text...
   echo '<a href="'.$apple['followed_id'].'">+'.htmlspecialchars($apple['followed_name']) .'</a> ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:40:15.630

您需要将它们连接在一起 - 因为您想独立输出两个 id 的名称，所以您必须将同一个表双重连接两次。

```
SELECT 
    uf.follower, 
    uf.username AS followerUsername, 
    uf.followed, 
    u2.username AS followedUsername 
FROM 
    user_follow AS uf 
INNER JOIN 
    users AS u1 
ON 
    uf.follower = u1.userID
INNER JOIN
    users AS u2
ON
    uf.followed = u2.userID
WHERE
    follower = ? 
```

如果您创建 SQL 语句，请使用准备好的语句或转义！调用 使`mysql_real_escape_string()`您免受 SQL 注入攻击。

# iphone - iOS NSURLConnection 没有连接

> ID：12886732
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:32:49.880
> 
> 标签：iphone, ios, nsurlconnection

我看到了一些这样的代码：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

if(connection) {
    receivedData = [NSMutableData data];
} else {

} 
```

我如何使它进入其他？我尝试禁用连接，但仍然从未进入 else 它通过 didFailWithError ......所以想知道它是否有必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:15:16.620

关于此方法返回值的苹果文档说：

> 返回值
> 
> URL 请求的 URL 连接。如果无法初始化连接，则返回 nil。

这可能会误导那些不熟悉 Cocoa（和 Objective-C）最佳实践的人。

通常一个`init`方法应该返回一个对象；除非有一些根本原因返回一个对象是危险的。大多数其他语言通过抛出异常来处理这种情况，需要您添加无数的 try/catch 括号。

如果（例如）您将 a作为请求参数传递，该`initWithRequest:delegate:`方法将返回；并且有充分的理由。为什么创建一个连接对象没有任何用处？`nil``nil`

但是，让我们考虑飞行模式或无效 url 之类的情况。如果`initWithRequest:delegate:`刚刚返回`nil`，那么您怎么知道出了什么问题？允许连接调用`connection:didFailWithError:`使您有机会通过错误参数深入了解特定的失败。

要解决您关于是否有`nil`必要处理连接事件的问题：这取决于。如果连接初始化失败，它将永远不会调用连接委托方法，因此如果您的代码依赖这些回调来发出后续请求，那么是的，这是必要的。

*附注：*创建您的`NSMutableData`此处有点为时过早，因为您还不知道存在有效的连接。[我在这里给出的答案给出了一些关于在哪里执行此操作的非常基本的示例代码。](https://stackoverflow.com/a/10201713/927947)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:41:34.767

您可以在代码的其他部分显示“未找到数据”的警报，如 UIAlertView *thealert=[[UIAlertView alloc] initWithTitle:@"Error" message:@"No data found." 委托：self cancelButtonTitle:@"Ok" otherButtonTitles:nil]; [戏剧表演]；[警告发布]；

# html - 我应该在哪里清理以使花车工作？

> ID：12886733
> 
> 赞同：0
> 
> 时间：2012-10-14T21:33:09.357
> 
> 标签：html, css

我在浮动问题上遇到了一些问题，它们漂浮在容器外。

我知道你可以在这个问题上使用 clears，但我真的不明白他们做了什么或者他们应该去哪里解决问题。

我创建了一个清晰的类，所以我可以使用`<br class="clear" />`

可以在此处查看有问题的实时站点：

[http://www.rubytuesdaycreative.co.uk/testsite/shop.html](http://www.rubytuesdaycreative.co.uk/testsite/shop.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:38:28.120

`float`意思是“移到一边，让这个元素后面的内容出现在它旁边”

`clear`意思是“如果我面前的东西在漂浮，请留在它下面”。

您可以使用`clear`使容器围绕其浮动内容展开 - 通过设置`clear: both`出现在浮动内容之后但在容器内部的零高度元素 - 但它不是解决该问题的最干净的方法。

而是`overflow: hidden`放在容器上。这将建立一个新的[块格式化上下文](https://stackoverflow.com/questions/4910075/why-overflow-hidden-clears-a-float)并导致容器扩展以包含浮动的子项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:38:28.417

Clear用于被对方入侵的div。因此，如果 div1 的一部分进入 div2，而 div 1 在 div2 的左侧，则在 div2 中插入 clear:left。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:47:06.150

要解决您的问题，请添加`overflow:hidden`到`#content`.

```
#content {
    margin-top: 60px;
    text-align: center;
    overflow: hidden;
} 
```

这只是**一种**可能的解决方案。正如提示：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

对于您的问题：我不建议您在文档中添加额外的标记来清除浮动。这是一个不好的做法！Nicolas Gallagher 介绍的[micro clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)是一个非常常见且稳定的解决方案。您只需向您的课程中添加一门课程，`#content`您就可以开始了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T21:36:25.650

您应该在最后一个浮动元素之后应用`clear: both`到块级元素（如）。`div`这样，清除的元素将位于所有浮动元素的下方，并将其容器的底部向下推以覆盖它们。

# silverstripe - SS3：“ArrayList”上不存在“fortemplate”方法

> ID：12886735
> 
> 赞同：0
> 
> 时间：2012-10-14T21:33:27.677
> 
> 标签：silverstripe

在 Silverstripe 3 中，我正在尝试运行一些自定义 SQL 并返回结果以在我的模板中进行处理：

```
function getListings(){
        $sqlQuery = new SQLQuery();
        $sqlQuery->setFrom('ListingCategory_Listings');
        $sqlQuery->selectField('*');
        $sqlQuery->addLeftJoin('Listing', '"ListingCategory_Listings"."ListingID" = "Listing"."ID"');
        $sqlQuery->addLeftJoin('SiteTree_Live', '"Listing"."ID" = "SiteTree_Live"."ID"');
        $sqlQuery->addLeftJoin('ListingCategory', '"ListingCategory_Listings"."ListingCategoryID" = "ListingCategory"."ID"');
        $sqlQuery->addLeftJoin('File', '"ListingCategory"."IconID" = "File"."ID"');

        $result = $sqlQuery->execute();

        $dataObject = new ArrayList();
        foreach($result as $row) { 
            $dataObject->push(new ArrayData($row)); 
        }
        return $dataObject;

    } 
```

但是，这给了我错误：

> 未捕获的异常：Object->__call()：“ArrayList”上不存在“fortemplate”方法

我在这里做错了什么，如何将此查询的结果放入我的模板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:05:58.027

我没有看到你的模板代码，但我假设你只是`$Listings`在模板中调用。这不起作用，因为 ArrayList 没有 forTemplate 方法（forTemplate 所做的是将对象输出为适当的字符串，例如 Form 上的 forTemplate 输出一个 html 元素）。

您可能想要做的是循环列表并使用该对象：

```
<% loop Listings %>
    $ID
    $Something
    $Foobar
<% end_loop %> 
```

或者，如果对象具有该方法，您可以在对象上调用 forTemplate：

```
<% loop Listings %>
    $forTemplate
<% end_loop %> 
```

# django - 用于输入 0 到 n 个电子邮件地址的 Django 表单

> ID：12886736
> 
> 赞同：0
> 
> 时间：2012-10-14T21:33:31.280
> 
> 标签：django, twitter-bootstrap, django-forms, django-crispy-forms, django-floppyforms

我有一个 Django 应用程序，其中包含一些相当常见的模型：`UserProfile`和`Organization`. A`UserProfile`或 an`Organization`都可以有 0 到 n 封电子邮件，所以我有一个`Email`具有`GenericForeignKey`. `UserProfile`和`Organization`模型都有一个指向模型的`GenericRelation`调用（下面提供的摘要代码）。`emails``Email`

**问题**`Organization`：提供允许用户输入组织详细信息（包括 0 到 n 个电子邮件地址）的表单的最佳方式是什么？

我的`Organization`创建视图是基于[Django 类的视图](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.edit/CreateView/)。我倾向于创建一个动态表单并使用 Javascript 启用它，以允许用户根据需要添加尽可能多的电子邮件地址。我将使用 django-crispy-forms 和 django-floppyforms 呈现表单，以便使用 Twitter Bootstrap 在网站上显示。

我曾考虑过`BaseGenericInlineFormset`在表单中​​嵌入一个来做到这一点，但这对于电子邮件地址来说似乎有点矫枉过正。将表单集嵌入到由基于类的视图提供的表单中也很麻烦。

请注意，`Organization`字段`phone_numbers`和也会出现同样的问题`locations`。

**代码**

电子邮件.py：

```
from django.db import models
from parent_mixins import Parent_Mixin

class Email(Parent_Mixin,models.Model):
    email_type = models.CharField(blank=True,max_length=100,null=True,default=None,verbose_name='Email Type')
    email = models.EmailField()

    class Meta:
        app_label = 'core' 
```

组织.py：

```
from emails import Email
from locations import Location
from phone_numbers import Phone_Number
from django.contrib.contenttypes import generic
from django.db import models

class Organization(models.Model):
    active = models.BooleanField()
    duns_number = models.CharField(blank=True,default=None,null=True,max_length=9)  # need to validate this
    emails = generic.GenericRelation(Email,content_type_field='parent_type',object_id_field='parent_id')
    legal_name = models.CharField(blank=True,default=None,null=True,max_length=200)
    locations = generic.GenericRelation(Location,content_type_field='parent_type',object_id_field='parent_id')
    name = models.CharField(blank=True,default=None,null=True,max_length=200)
    organization_group = models.CharField(blank=True,default=None,null=True,max_length=200)
    organization_type = models.CharField(blank=True,default=None,null=True,max_length=200)
    phone_numbers = generic.GenericRelation(Phone_Number,content_type_field='parent_type',object_id_field='parent_id')
    taxpayer_id_number = models.CharField(blank=True,default=None,null=True,max_length=9)  # need to validate this

    class Meta:
        app_label = 'core' 
```

parent_mixins.py

```
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic
from django.db import models

class Parent_Mixin(models.Model):
    parent_type = models.ForeignKey(ContentType,blank=True,null=True)
    parent_id = models.PositiveIntegerField(blank=True,null=True)
    parent = generic.GenericForeignKey('parent_type', 'parent_id')

    class Meta:
        abstract = True
        app_label = 'core' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:13:26.537

您可以尝试使用 .split()，这样您的表单看起来会更容易，用户不必继续添加文本字段。您可以做的是，创建一个文本框，用户可以在其中添加多封电子邮件并用逗号分隔它们。然后在你看来你可以这样做

```
email = emails.split(',')
for i in emails:
    #assign email and save. 
```

如果有电子邮件类型

构建这样的系统可能仍然是一个好主意。你能做的是

abc@gmail.com-work,xyz@k.com-school

然后你可以像这样拆分它们

```
email-type=email.split(',')
for i in email-type:
    email=i.split('-')[0]
    if i.split('-')[1]:
        type=i.split('-')[1]
    else:
        #give it a default type 
```

# c# - C# NetworkAvailibilityChanged 在断开连接时不会触发

> ID：12886740
> 
> 赞同：0
> 
> 时间：2012-10-14T21:34:28.090
> 
> 标签：c#, winforms

我的目标是检测以太网电缆何时断开我正在尝试使用`NetworkChange`类，但是当我拔下以太网电缆时该事件`NetworkAvailibilityChanged`不会触发。`NetworkAddressChanged`确实会在大约 8 秒内触发，但`NetworkAvailibilityChanged`从来没有，我有什么遗漏吗？

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            NetworkChange.NetworkAvailabilityChanged += new NetworkAvailabilityChangedEventHandler(NetworkChange_NetworkAvailabilityChanged);
            NetworkChange.NetworkAddressChanged += new NetworkAddressChangedEventHandler(NetworkChange_NetworkAddressChanged);
        }

        void NetworkChange_NetworkAvailabilityChanged(object sender, NetworkAvailabilityEventArgs e)
        {
            Console.WriteLine("NetworkChange_NetworkAvailabilityChanged");
        }

        void NetworkChange_NetworkAddressChanged(object sender, EventArgs e)
        {
            Console.WriteLine("NetworkChange_NetworkAddressChanged");
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T00:02:49.267

NetworkAvailabilityChanged 基于 NetworkInterface.GetIsNetworkAvailable()，它表示：

> 如果任何网络接口被标记为“up”并且不是环回或隧道接口，则认为网络连接可用。

因此，如果有多个 NIC，如果有第二个 NIC（有线或无线）满足这些条件，则在拔下电缆时不会触发 NetworkAddressChanged。

# mysql - Mysql：如何通过 PATTERN / LIKE 语句生成计数表？非常棘手

> ID：12886741
> 
> 赞同：0
> 
> 时间：2012-10-14T21:34:30.287
> 
> 标签：mysql

为了简化，我有一个注册用户的数据库，我想计算每个电子邮件域名有多少封电子邮件（注意我不知道所有域名）

例如，用户表-

```
id    |    email
------------------
1     | test@hotmail.com
2     | test@somesite.aaa<--unknown to me
3     | test@unknownsite.aaa<--unknown to me
4     | test@hotmail.com
5     | test@somesite.aaa<--unknown to me
6     | test@yahoo.com
7     | test@yahoo.com
8     | test@hotmail.com 
```

（注意：我想计算每封电子邮件而不指定确切的电子邮件）

所以我想要的结果是

```
suffix         |   count
hotmail.com    |    3
somesite.aaa   |    2
unknownsite.aaa|    1
yahoo.com      |    2 
```

**再次强调这一点，我不知道unknownsite.aaa，我也不能在声明中提及它，因为我不知道它，我希望我清楚。**

所以基本上我想对我的网站用户用作电子邮件托管网站的内容进行统计。但就像我说的，我会重复第三次，**我不知道存在的每个邮件主机。**

我将对此进行更多调查，我感觉这是 mysql 无法处理的。

编辑：

我想出了以下解决方案，但似乎有点多余，我讨厌：P

```
select substring_index(`email`,'@',-1),count(*) as count from users group by substring_index(`email`,'@',-1) order by count ASC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:48:49.740

```
SELECT   SUBSTRING_INDEX(email, '@', -1) AS suffix, COUNT(*) AS count
FROM     users
GROUP BY suffix 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/7c14f/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:37:59.940

在 mysql 中使用 RLIKE 或 REGEXP

[http://dev.mysql.com/doc/refman/5.0/en/regexp.html](http://dev.mysql.com/doc/refman/5.0/en/regexp.html)

# html - 输入代码中的返回行导致输出中元素之间的间隙/空白？

> ID：12886745
> 
> 赞同：2
> 
> 时间：2012-10-14T21:35:03.737
> 
> 标签：html, return, whitespace, code-readability

> **可能重复：**
> [忽略 HTML 中的空格](https://stackoverflow.com/questions/2628050/ignore-whitespace-in-html)

我正在尝试在网页上将图像并排放置。这是我的 HTML：

```
<img class="pt" src="Yellow Tulip.jpg" title="Yellow Tulip" alt="Yellow Tulip" />
<img class="pt" src="Pink Tulip.jpg" title="Pink Tulip" alt="Pink Tulip" />
<img class="pt" src="Purple Tulip.jpg" title="Purple Tulip" alt="Purple Tulip" /> 
```

但是，在我的网页上，这显示了每个图像之间的差距。我注意到，一旦我删除了使元素分开且可读的返回行，而是将所有元素放在一行上，差距就消失了。

```
<img class="pt" src="Yellow Tulip.jpg" title="Yellow Tulip" alt="Yellow Tulip" /><img class="pt" src="Pink Tulip.jpg" title="Pink Tulip" alt="Pink Tulip" /><img class="pt" src="Purple Tulip.jpg" title="Purple Tulip" alt="Purple Tulip" /> 
```

无论如何我可以实现后者的输出但仍然有代码/输入看起来像前者？我真的很喜欢返回行（输入空格）给代码带来的可读性，但我不想要它在实际页面上创建的空白。如果有人可以解释为什么会这样和/或如何解决它，我将非常感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:40:31.397

您可以浮动图像，例如

```
#container img { float: left } 
```

或设置容器字体大小以使空间不可见

```
#container { font-size: 0 } 
```

# iphone - NSURLConnection didFailWithError connectionDidFinishLoading 同时调用？

> ID：12886749
> 
> 赞同：3
> 
> 时间：2012-10-14T21:35:30.970
> 
> 标签：iphone, ios, nsurlconnection, nsurlconnectiondelegate

关于“ `didFailWithError`”和“ `connectionDidFinishLoading`”

可以同时调用吗？或者它总是一个或另一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T21:44:29.623

不，它们不能同时被调用。

代理收到消息后`connection:didFailWithError:`，不会再收到指定连接的代理消息。

如果连接成功下载请求，则委托接收`connectionDidFinishLoading:`消息。委托将不再收到有关连接的消息，并且`NSURLConnection`可以释放对象。

[http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T21:45:01.027

虽然不明显，但文档声明只会调用这两个中的一个。它要么成功完成并调用**connectionDidFinishLoading**，要么失败并出现错误并**调用 didFailWithError**。您可以在****connection:willSendRequest:redirectResponse:**方法的 NSURLConnectionDataDelegate 文档中找到它。

编辑：看起来@erkanyildiz 的答案显示了文档中更好的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:44:05.807

来自文档[https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)

连接完成加载：

> 当连接成功完成加载时发送。

**成功**。似乎总是一个或另一个。

# android - 第一次打开菜单时果冻豆不调用 onPrepareOptionsMenu()

> ID：12886751
> 
> 赞同：9
> 
> 时间：2012-10-14T21:35:59.267
> 
> 标签：android, android-4.1-jelly-bean

我正在覆盖 onPrepareOptionsMenu 来隐藏和显示菜单项。使用 API 级别 16 模拟器进行测试时；第一次打开菜单时不会调用 onPrepareOptionsMenu。但是当我重新打开菜单时，它可以工作。问题仅在于第一次使用。你可以用这个简单地测试它；

```
@Override
public void onPrepareOptionsMenu(Menu menu) {
    Toast.makeText(this.getActivity(), "pre", Toast.LENGTH_SHORT).show();
    super.onPrepareOptionsMenu(menu);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T21:44:06.947

`onPrepareOptionsMenu()`每次用户打开 Gingerbread 及其下方的菜单时都会调用。从 Honeycomb 开始，当 ActionBar 中存在项目时，假定选项菜单始终处于打开状态。

如果您想在活动生命周期和`onPrepareOptionsMenu()`回调中更新选项菜单，您需要调用`invalidateOptionsMenu()`并且`onPrepareOptionsMenu()`将被调用。

你不能在`onCreateOptionsMenu()`回调中实现你第一次使用的代码吗？每次创建选项菜单时都会调用它，并且它是在首次使用时创建的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-03T12:38:32.050

这是 android 错误：[https ://code.google.com/p/android/issues/detail?id=24231](https://code.google.com/p/android/issues/detail?id=24231)

当您第一次按下菜单按钮时，请致电`invalidateOptionsMenu()`或`supportInvalidateOptionsMenu()`使用支持库。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch(keyCode) {
    case KeyEvent.KEYCODE_MENU:
        if(mIsMenuFirstClick) {
            mIsMenuFirstClick = false;
            supportInvalidateOptionsMenu();
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

# sql - 查询 - 尝试根据另一字段的内容对一个字段求 和

> ID：12886752
> 
> 赞同：0
> 
> 时间：2012-10-14T21:36:02.170
> 
> 标签：sql, ms-access

**桌子：**

```
DayOfWeek           Enrollments
Monday                 35
Monday                 12
Saturday               25
Tuesday                15
Monday                  9
Tuesday                15 
```

基本上我试图总结每天的总入学人数。

所以输出看起来像：

```
DayOfWeek           Enrollments
Monday                 56
Saturday               25
Tuesday                30 
```

我花了大约 4 个小时试图解决这个问题，尝试了许多不同的方法，但没有运气。

我遇到的问题是我可以计算每天有多少注册人数，但是当我运行查询时不能让它与正确的日期对齐，例如我希望总数与计算日期在同一行. （我希望这足够清楚）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:40:49.303

Group by `DayOfWeek`，并要求`Enrollments`每个组内的总和。SQL 将如下所示。

```
SELECT DayOfWeek, Sum(Enrollments) AS SumOfEnrollments
FROM YourTable
GROUP BY DayOfWeek; 
```

如果您使用 Access 查询设计器来创建它，请选择您的字段，然后单击“总计”查询的符号（希腊字符 sigma）。在设计网格的“总计：”行中，为相应的字段选择分组依据和总和。

# java - 将数字插入有序arrayList

> ID：12886762
> 
> 赞同：3
> 
> 时间：2012-10-14T21:36:45.353
> 
> 标签：java

我有一个关于如何将任何数字插入有序 ArrayList 的有趣问题。假设用户输入`[12,34,37,60,89]`；该方法`addListElement()`应该遍历数组以找到新元素所在的索引。

用户输入数字 50，新数组应该是`[12,34,37,50,60,89]`. 我使用 for 循环遍历 ArrayList，但我不确定我的 if() 语句。

```
public void addListElement() {
    System.out.println("Add number to arrayList");
    Scanner scan = new Scanner(System.in);
    int number = scan.nextInt();

    int loc = 0;
    for (int i = 0; i < aryList.size(); i++) {
        if (number > 0 && i < loc) {
            loc++;
        }
    }

    aryList.add(loc, number);
    System.out.println(aryList.toString());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:40:13.290

试试这个：

```
int position = Collections.binarySearch(aryList, number);
aryList.add(position < 0 ? -position - 1 : position, number); 
```

*编辑*感谢指出旧代码崩溃，如果数字已经存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:50:13.363

您会想要使用该[`List<E>.add(int idx, E element)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29)方法。按顺序插入元素的想法是，对于某些数组*a*，元素*a [i]*和某些整数*n*：

a [i] <= n <= a [i+1] , 0 < i < len(a)-1。

```
// edge case:  Size one list, number coming in is smaller.
if(aryList.size() == 1 && aryList.get(0) >= number) {
    aryList.add(0, number);
} else {
    for(int i = 0; i < aryList.size()-1; i++) {
        if(number >= aryList.get(i) && number <= aryList.get(i+1)) {
            aryList.add(i, number);
        }
    }
    // number is the largest seen; add it to the end.
    aryList.add(number);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T22:01:56.157

这也应该有效。由于列表已经按升序排列，当您发现列表中的数字大于当前数字时，请在 arrayList 中的该数字之前插入新的第一索引。

```
 for (int i = 0; i < aryList.size(); i++) {
    if (aryList.get(i)>number) {
       break;
    }
  loc++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T21:44:52.400

```
int loc = 0;
int prevNumber = aryList.get(0);
for(int i = 1; i<aryList.size(); i++){
            if(number > prevNumber && number <= aryList.get(i)){ 
               return i;
            }
    prevNumber = aryList.get(i);
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T21:49:50.130

只要有更多元素并且数量小于当前元素，就增加索引。当用户给出的数字大于当前列表中的任何数字时，您还必须检查 i != list.size() 是否完成。

```
while (number >= 0 && number <= list.get(i) && i < list.size()) {
    i++;
}

list.add(i, number); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T22:19:23.583

我想你的元素是按升序排列的

```
 public void insert(int x){
        // loop through all elements
        for (int i = 0; i < arrayList.size(); i++) {
            // if the element you are looking at is smaller than x, 
            // go to the next element
            if (arrayList.get(i) < x) continue;
            // if the element equals x, return, because we don't add duplicates
            if (arrayList.get(i) == x) return;
            // otherwise, we have found the location to add x
            arrayList.add(i, x);
            return;
        }
        // we looked through all of the elements, and they were all
        // smaller than x, so we add x to the end of the list
        arrayList.add(x);
    } 
```

如果要在 ArrayList 中插入重复项，只需删除代码行

```
if (arrayList.get(i) == x) return; 
```

# java - java.net.BindException:JVM 绑定

> ID：12886765
> 
> 赞同：1
> 
> 时间：2012-10-14T21:37:08.393
> 
> 标签：java, sockets, jvm

我一直遇到这个错误：“新 ServerSocket 上的异常：java.net.BindException：无法分配请求的地址：JVM_Bind”。我尝试使用 netstat 来确保端口（1500）上没有运行任何东西。有什么建议吗？

```
package server;

import java.io.IOException
import java.net.InetAddress
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
public class Server 
{
private ServerSocket serverSocket;

Server(int Port)
{   
/* create socket server and wait for connection requests */
try 
{
        serverSocket = new ServerSocket(1500, 0, InetAddress.getByName("69.61.210.196"));
        System.out.println("Server waiting for client on port " + serverSocket.getLocalPort());
        while(true) 
        {
    Socket socket = serverSocket.accept();  // accept connection
    System.out.println("New client asked for a connection");
        }
    }
    catch (IOException e) 
    {
        System.out.println("Exception on new ServerSocket: " + e);
    }
}

    public static void main(String[] args) 
    {
       new Server(1500);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:35:52.607

听起来您尝试绑定的 IP 地址是网络的外部 IP 地址，而不是您的机器 IP。

建议尝试绑定到`127.0.0.1`或`0.0.0.0`代替。

从 windows`ipconfig`和 linux上的命令行获取您的机器 IP 使用`ifconfig`。

# c - 如何通过以编程方式分析 C 程序中的关键部分？

> ID：12886767
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:37:32.467
> 
> 标签：c, multithreading, operating-system, critical-section

我想创建一个工具，在编译阶段分析 C 程序的关键部分。我正在寻找可以让我做到这一点的正确算法。它可以在编译器的任何阶段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:28:40.533

您可能对这篇文章感兴趣“<a href="http://www.di.ens.fr/~mine/publi/article-mine-LMCS12.pdf" rel="nofollow">运行时的静态分析嵌入式实时并行 C 程序中的错误”。

[Frama-C](http://frama-c.com/)插件[mthread](http://frama-c.com/mthread.html)是同时独立开发的。它适用于类似的原则。

上述两种工具中的每一种都是在已经代表至少十人年工作的现有基础上进行的人年工作。正如一些人已经评论过的那样，如果您想为中等规模的程序做任何重要且有用的事情，而您不能仅仅通过阅读来说服自己它是正确的，那么您将需要做很多工作。

# python - 如何在所有操作系统上用 Python 解压缩文件？

> ID：12886768
> 
> 赞同：26
> 
> 时间：2012-10-14T21:37:35.537
> 
> 标签：python, zip

是否有一个简单的 Python 函数可以像这样解压缩 .zip 文件？：

```
unzip(ZipSource, DestinationDirectory) 
```

我需要在 Windows、Mac 和 Linux 上执行相同操作的解决方案：如果 zip 是文件，则始终生成文件，如果 zip 是目录，则始终生成目录，如果 zip 是多个文件，则生成目录；总是在给定的目标目录中，而不是在给定的目标目录中

如何在 Python 中解压缩文件？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-14T21:42:58.527

使用[`zipfile`](http://docs.python.org/library/zipfile.html)标准库中的模块：

```
import zipfile,os.path
def unzip(source_filename, dest_dir):
    with zipfile.ZipFile(source_filename) as zf:
        for member in zf.infolist():
            # Path traversal defense copied from
            # http://hg.python.org/cpython/file/tip/Lib/http/server.py#l789
            words = member.filename.split('/')
            path = dest_dir
            for word in words[:-1]:
                while True:
                    drive, word = os.path.splitdrive(word)
                    head, word = os.path.split(word)
                    if not drive:
                        break
                if word in (os.curdir, os.pardir, ''):
                    continue
                path = os.path.join(path, word)
            zf.extract(member, path) 
```

请注意，使用[`extractall`](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.extractall)会短很多，但该方法**不能**防止Python 2.7.4 之前的[路径遍历漏洞。](http://en.wikipedia.org/wiki/Path_traversal)如果您可以保证您的代码在最新版本的 Python 上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-23T14:31:22.623

Python 3.x 使用 -e 参数，而不是 -h.. 例如：

```
python -m zipfile -e compressedfile.zip c:\output_folder 
```

论据如下..

```
zipfile.py -l zipfile.zip        # Show listing of a zipfile
zipfile.py -t zipfile.zip        # Test if a zipfile is valid
zipfile.py -e zipfile.zip target # Extract zipfile into target dir
zipfile.py -c zipfile.zip src ... # Create zipfile from sources 
```

# java - Java 编译器错误没有任何意义（ 预期的）

> ID：12886769
> 
> 赞同：6
> 
> 时间：2012-10-14T21:37:53.790
> 
> 标签：java, casting

我已经做了很多搜索来寻找这个编译器错误`<identifier> expected`的含义，但它们似乎都不适用于我的情况。如果这是重复或基本信息，真的很抱歉，但我在任何地方都找不到任何东西。

以下代码工作正常。请注意，我`myObject1`确实是肯定的`HashSet<String>`，所以演员阵容还可以。

```
@SuppressWarnings("unchecked")
HashSet<String> s1 = (HashSet<String>) myObject1; 
```

以下代码无法正常工作。它将编译，但带有警告。

```
@SuppressWarnings("unchecked")
HashSet<String> s1;
s1 = (HashSet<String>) myObject1; 
```

那么我尝试下面的代码。

```
@SuppressWarnings("unchecked")
HashSet<String> s1;
@SuppressWarnings("unchecked")
s1 = (HashSet<String>) myObject1; 
```

现在它甚至拒绝编译，给我带来了让我`<identifier> expected`非常困惑的错误。`^`我的命令行中的符号指向`=`最后一行的之前。我不确定我到底应该把什么放在`s1`和之间`=`。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T21:46:19.163

您不能将注释应用于简单的赋值语句。从[JLS 的第 9.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7)：

> 注释可以在任何声明中用作修饰符，无论是包（§7.4.1）、类（§8.1.1）（包括枚举（§8.9））、接口（§9.1.1）（包括注释类型（§9.6） )、字段 (§8.3.1、§9.3)、方法 (§8.4.3、§9.4)、形参 (§8.4.1)、构造函数 (§8.8.3) 或局部变量 (§14.4.1) .

我同意编译器错误消息可能会更清楚，诚然......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:47:30.380

您可以查看 Java Api for Annotations。

[http://docs.oracle.com/javase/6/docs/api/java/lang/SuppressWarnings.html](http://docs.oracle.com/javase/6/docs/api/java/lang/SuppressWarnings.html)

[http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html#LOCAL_VARIABLE](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/ElementType.html#LOCAL_VARIABLE)

在那里你可以看到，SupressWarnings 的目标是 LOCAL_VARIABLE。

LOCAL_VARIABLE 代表声明而不是赋值。

# jquery - 更改滚动上的活动菜单项

> ID：12886775
> 
> 赞同：0
> 
> 时间：2012-10-14T21:38:22.040
> 
> 标签：jquery

我正在处理这篇文章中的建议[Change Active Menu Item on Page Scroll?](https://stackoverflow.com/questions/9979827/change-active-menu-item-on-page-scroll) 但似乎无法让它工作。

这是我的页面：[http ://terminalcitymarketing.com/drafts/liftx/flexslider-2/about-us](http://terminalcitymarketing.com/drafts/liftx/flexslider-2/about-us)

这是HTML：

```
<nav class="side-nav">                                          

    <ul class="menu">
        <li class="page_item"><span style="padding-left:10px;"><strong>Jump To Section</strong></span></li>
        <li class="page_item current_page_item"><a href="#lift-x"><span>Lift-X</span></a></li>
        <li class="page_item"><a href="#team"><span>Our Team</span></a></li>
        <li class="page_item"><a href="#community"><span>Lift-X in the Community</span></a></li>
        <li class="page_item"><a href="#join"><span>Join Our Team</span></a></li>   
    </ul>   

</nav> 
```

这是脚本：

```
// Cache selectors
var lastId,
    topMenu = $j(".side-nav"),
    topMenuHeight = topMenu.outerHeight()+15,
    // All list items
    menuItems = topMenu.find("a"),
    // Anchors corresponding to menu items
    scrollItems = menuItems.map(function(){
      var item = $j($j(this).attr("href"));
      if (item.length) { return item; }
    });

// Bind click handler to menu items
// so we can get a fancy scroll animation
menuItems.click(function(e){
  var href = $j(this).attr("href"),
      offsetTop = href === "#" ? 0 : $(href).offset().top-topMenuHeight+1;
  $j('html, body').stop().animate({
      scrollTop: offsetTop
  }, 300);
  e.preventDefault();
});

// Bind to scroll
$j(window).scroll(function(){
   // Get container scroll position
   var fromTop = $j(this).scrollTop()+topMenuHeight;

   // Get id of current scroll item
   var cur = scrollItems.map(function(){
     if ($j(this).offset().top < fromTop)
       return this; 
   });
   // Get the id of the current element
   cur = cur[cur.length-1];
   var id = cur && cur.length ? cur[0].id : "";

   if (lastId !== id) {
       lastId = id;
       // Set/remove active class 
       menuItems
         .parent().removeClass("current_page_item")
         .end().filter("[href=#"+id+"]").parent().addClass("current_page_item");
   }
}); 
```

有任何想法吗？

# java - 如何查看我的 Java 小程序的错误消息？

> ID：12886783
> 
> 赞同：6
> 
> 时间：2012-10-14T21:38:50.273
> 
> 标签：java, applet, runtime-error

在尝试回答[小程序问题](https://stackoverflow.com/questions/12886600/how-do-i-nest-layout-managers-without-using-swing-classes-methods#comment17450075_12886600)时，OP 不知道如何查看其小程序的错误消息。自从我自己做这个已经有一段时间了，我没有找到任何一步一步的指导，所以我在这里为后代发布一个问题和答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T21:38:50.273

**视窗：**

1.  双击右下角时钟旁边的系统托盘中的 Java 图标。这将打开 Java 控制面板。

2.  单击高级选项卡。

3.  单击`+`“Java 控制台”旁边的，然后单击“显示控制台”。

Java 控制台将显示任何堆栈跟踪，显示来自抛出的异常的错误消息。您还可以添加`System.out.println()`对小程序代码的调用，以在控制台中打印您自己的自定义消息。

# mysql - 类似页面的数据库

> ID：12886787
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:39:19.397
> 
> 标签：mysql

我正在尝试为我的音乐节网站创建一个类似 Pages 的功能。人们将能够创建关于乐队的“海报”，并在海报上发布链接和视频。我将如何在 MYSQL 中创建它。我会为每个“海报”创建一个表格并列出已发布/列出的人数吗？或者我会创建一个海报表。我该怎么做？我正在使用 MYSQL。那么如果有人想创建一个，是否必须自动创建一个表？

我只想知道从哪里开始。

干杯，诺亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:46:10.473

听起来您将拥有以下表格：

*   乐队
*   海报
*   链接
*   视频

然后：

*   一个乐队会有很多海报。
*   一张海报会有很多链接。
*   一张海报会有很多视频。

如果 X 有许多 Y，则 Y 表将包含指向 X 表的外键。

所以海报可能有以下列：

*   poster_id（主键）
*   band_id（外键）
*   描述（或任何其他元数据出现在海报页面上一次）
*   ETC

您不会为每张海报创建一个新表格。表代表数据的结构，而不是一条数据。使用外键来确定哪些链接、视频等属于哪个海报。

使用 JOINS 从其他表中获取相关信息。

请注意，MyISAM 存储引擎不支持外键。确保您使用的是 InnoDB。

# php - 如何存储我的“子站点”的根目录

> ID：12886788
> 
> 赞同：0
> 
> 时间：2012-10-14T21:39:25.547
> 
> 标签：php, relative-path, document-root

我需要将我的“网络应用程序”添加到现有网站。它将被放置在一个单独的文件夹中。

为我的应用程序定义根的最佳方法是什么？它不会与站点的其余部分进行交互。

`.php`我想只是在我的根目录中创建一个脚本并执行以下操作：

```
define('ROOT_DIR', dirname(__FILE__)); 
```

然后将此文件包含在所有其他脚本中。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:44:03.733

来自[PHP DOC](http://php.net/manual/en/function.dirname.php)`dirname(__FILE__)`或`__DIR__`

> 给定一个包含文件或目录路径的字符串，此函数将返回父目录的路径。

这可以根据我们的 be 结构和单个配置文件轻松更改

例如。

```
http://example.com = /public_html
http://example.com/mobile = /public_html/mobile 
```

我的建议.. 硬编码它，因为它总是固定的

```
define('ROOT_DIR','/public_html'); 
```

如果你有一个文件`/public_html/class/HelloWord.class.php`

无论您当前的目录如何，您都可以轻松访问它具有以下内容

```
 ROOT_DIR . '/class/HelloWord.class.php' ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:52:44.630

您的方法也是正确的，但这是个人选择的问题。我更喜欢使用绝对 URL 而不是亲戚，因为我**个人认为**绝对 URL 不太容易出错。

对于我们在核心 PHP 中创建的任何 Web 应用程序（不使用任何框架），我们定义一个 config.php 文件，其中包含以下两个条目（显然还有其他条目）

```
$WEBPATH="http://www.example.com/";
$OSPATH="/home/user/public_html/"; 
```

任何其他 php 文件的前两行是：

```
if(!defined(ANY_VAR_SET_BY_VALID_FILES)) die 'Invalid file';
require_once('path/config.php'); 
```

之后，所有路径/URL 都使用 $WEBPATH 或 $OSPATH。

# angularjs - 主要是 PJAX 站点，带有一些 AngularJS

> ID：12886790
> 
> 赞同：6
> 
> 时间：2012-10-14T21:39:28.430
> 
> 标签：angularjs, pjax

我有一个使用 PJAX 的网站，并且我有一些使用 AngularJS 的页面。对于 AngularJS 页面，我想继续使用 PJAX 来获得与不重新加载整个 HTML 页面、资产等相关的所有好处。~~不幸的是，PJAX 只是将一些 HTML 加载到页面中并且不会触发任何 javascript。这没关系，因为我可以在 pjax 成功时手动触发 javascript，但我不太清楚是什么让 AngularJS 初始化。~~

对于一个简单的场景，假设我将以下 HTML AJAX 转换为页面。还假设该页面已经包含了 Angular.js。我可以调用什么来使以下行为像 Angular 应用程序？

```
<div>
  <label>Name:</label>
  <input type="text" ng-model="yourName" placeholder="Enter a name here">
  <hr>
  <h1>Hello {{yourName}}!</h1>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-18T14:08:22.210

`angular.bootstrap(...)`并没有为我辞职，它正在抛出一个

> 已经存在的应用程序错误。

所以我选择了`(re)$compile`解决方案，但是在使用框架外部的角度时，文档很少（例如，你如何调用 $compile）。经过大量的试验和错误后，这对我有用，尽管可能会有一些开销：

```
 // outside of angular...
  var ngRefresh = function() {
    var scope = angular.element("body").scope();
    var compile = angular.element("body").injector().get('$compile');

    compile($("body").contents())(scope);
    scope.$apply();
  }

  // PJAX
  $('#page').on('pjax:success', function(e){
    ngRefresh();
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T23:13:46.017

手动初始化工作得很好

```
 angular.element(document).ready(function() {
     angular.bootstrap(document);
   }); 
```

我最终遇到了 gem rack-pjax 的一些问题，因为它在我的 url 中转义了小胡子，所以我只是摆脱了中间件并决定让 Web 服务器检测请求中的 pjax 并选择退出渲染布局。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-23T10:31:31.553

从@charlysisto 提供的解决方案开始，我添加了一个钩子`pjax:beforeReplace`来清理旧范围：

```
var cleanupRemovedScopes = function() {
  var $scope = angular.element("body").scope();

    var q = [$scope], scope, first = true;
    while (q.length > 0) {
        scope = q.pop();

        if (!first) {
            scope.$destroy();
        }

        first = false;

        if (scope.$$childHead) {
            q.push(scope.$$childHead);
        }

        if (scope.$$nextSibling) {
            q.push(scope.$$nextSibling);
        }
    }
}

$('#page').on('pjax:beforeReplace', function() {
  var $timeout = angular.element("body").injector().get("$timeout");
  $timeout(function() {
    cleanupRemovedScopes();
  }
} 
```

但是，此清理脚本的局限性在于，您的 PJAX 调用会替换整个正文。

# javascript - 页面验证：内联 Javascript

> ID：12886791
> 
> 赞同：1
> 
> 时间：2012-10-14T21:39:46.217
> 
> 标签：javascript, validation

我正在尝试获取一个表单以在[http://validator.w3.org/](http://validator.w3.org/)中进行验证，我有一个表单，其中包含由 Javascript 创建的选项，这是为了简化用户的日期选择。

内联 javascript 创建：

*   当前年份和月份（到达日期）
*   未来的年月（出发日期）

我曾想过将 javascript 转换为 PHP，但有什么方法可以维护 javascript 但同时能够通过验证测试？

javascript代码是：

```
<div class="dateBE">Fecha de llegada</div>
<select class="fieldTRA" id="b_checkin_day" name="checkin_monthday" onchange="checkDateOrder('frm', 'b_checkin_day', 'b_checkin_month', 'b_checkout_day', 'b_checkout_month') ; tickCheckBox('b_availcheck');">
<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option>

 </select>

 <select class="fieldTRA" id="b_checkin_month" name="checkin_year_month" onchange="checkDateOrder('frm', 'b_checkin_day', 'b_checkin_month', 'b_checkout_day', 'b_checkout_month') ; tickCheckBox('b_availcheck');">

**<script type="text/javascript">
/* <![CDATA[ */
            var monthArray=new Array("enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre");
var today = new Date();
      var month= today.getMonth();
      var year = today.getFullYear()%100;
      var fullYear=today.getFullYear();
      year=new String(year);
      year=addzero(year);
      var countMonth=month;
      for(var i=0;i<12;i++,countMonth++){
    if(countMonth%12==0 && i>0){
   countMonth=0;
   year++;
   year=new String(year);
   year=addzero(year);
   fullYear++;
    }
    document.writeln("<option value=\""+fullYear+"-"+(countMonth+1)+"\">"+monthArray[countMonth]+" '"+year);
    }
/* ]]> */
</script>
  </select>
</div>**

<div id="homeout">
<div class="dateBE">Fecha de salida</div>

<select class="fieldTRA" id="b_checkout_day" name="checkout_monthday" onchange="tickCheckBox('b_availcheck');">
<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option>

 </select>
 <select class="fieldTRA" id="b_checkout_month" name="checkout_year_month" onchange="tickCheckBox('b_availcheck');">
<script type="text/javascript">
/* <![CDATA[ */
      var monthArray=new Array("enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre");
      var today = new Date();
      var month= today.getMonth();
      var year = today.getFullYear()%100;
      var fullYear=today.getFullYear();
      year=new String(year);
      year=addzero(year);
      var countMonth=month;
      for(var i=0;i<12;i++,countMonth++){
if(countMonth%12==0 && i>0){
   countMonth=0;
   year++;
   year=new String(year);
   year=addzero(year);
   fullYear++;
}
document.writeln("<option value=\""+fullYear+"-"+(countMonth+1)+"\">"+monthArray[countMonth]+" '"+year);
}

/* ]]> */
</script>
  </select>
</div>

            </div> 
```

表格可以在这里看到：http: [//www.visitar.com](http://www.visitar.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:13:08.933

我建议将所有表单/html 构造逻辑移至 PHP。您在这里所做的是一些非常模糊的组合，因为您在 javascript 中向表单添加值并在服务器上的 PHP 代码中处理这些值。

如果您正在寻找一种使用 javascript 执行此操作的方法，请查看 jQuery，它可以帮助您大量编写不显眼的 JS 代码。例子：

```
$(function() {
    var opt = "";

    // Date calculations left out
    for(var i=0;i<12;i++,countMonth++) {
        opt += "<option value=\""+fullYear+"-"+(countMonth+1)+"\">"+monthArray[countMonth]+" '"+year; 
    });

    $('#b_checkout_month').append(opt);   
} 
```

该脚本可以包含在头部或就在关闭正文标记之前，因为它不依赖于直接文档访问，而是通过 jQuery 选择器 $('#b_checkout_month') 引用选择选项。

# java - 是不是一个 for 循环甚至不会像调用 if 语句首先检查大小一样快地运行一次？

> ID：12886799
> 
> 赞同：-4
> 
> 时间：2012-10-14T21:40:21.977
> 
> 标签：java, c++, performance, logic

我正在尝试优化一段代码，其中速度非常重要，并且想知道是否检查`int`包含 for 循环即将循环的次数并且如果它等于 0 则不执行 for 循环是否比更快或更慢只是让 for 循环执行 0 次。

我意识到任何速度的提高都是微不足道的。它刚刚开始变得更加好奇。这也与 Java 说 C++ 或 C 不同吗？

例子：

```
size=0;
for (int i = 0;i<size;i++)
{
} 
```

或者

```
size=0;
if (size!=0)
{ 
    for (int i = 0;i<size;i++)
    {
    }
} 
```

当然，在实际代码中，大小通常不为零，但当它为零时，哪个会更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:57:27.530

学术上？是的，因为每次大小*不为*0 时，它都会运行 1 次额外比较。

现实吗？不。当您谈论这样的比较时，您计算的是纳秒，*尤其是*在 JVM 创建机器语言并直接在处理器上执行之后。

现在，您应该使用哪一个。应该是第一个吧。它不节省时间，而且更短更清洁。更好的是，Java 有一个 for-each 循环结构，因此您根本不需要索引：

```
String[] strs = ... ;
for (String str : strs) {
    // Do something with str
} 
```

对于数组，这将编译为索引 for 循环。对于`Collection`对象：

```
Collection<String> strs = ... ;
for (String str : strs) {
    // Do something with str
} 
```

这个编译为带有`Iterator`声明的 for 循环。

如果您不需要索引本身，这些是最好的选择，因为它在编译后编译为相同的东西，很明显，数组和集合都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:47:42.363

正如您所说，这并没有太大的区别，但是由于第二个检查中还有一个检查，因此与第一个相比，运行第二个检查需要更多时间。

# java - 动态更新片段调用

> ID：12886811
> 
> 赞同：0
> 
> 时间：2012-10-14T21:42:05.520
> 
> 标签：java, android, string, variables

我想根据他们的名字在一个活动中启动几个片段，其中“i”是一个数字，所以......称呼。我已经包含了基本的静态调用，以及我根据我从 JavaScript 世界所知道的创建自己的调用（我敢打赌那是我的问题）。

我会很感激任何帮助（虽然我仍然看起来我自己）最好的方法来做到这一点，因为我怀疑这是我会一次又一次地使用的潜在方法。

当前静态代码

```
 public Fragment getItem(int i) {
    Fragment fragment = new DummySectionFragment(); 
```

错误：无效的字符常量

```
 public Fragment getItem(int i) {
    Fragment fragment = new 'DummySection' + i + 'Fragment'(); 
```

完整代码

```
/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 6;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section4).toUpperCase();
            case 4: return getString(R.string.title_section5).toUpperCase();
            case 5: return getString(R.string.title_section6).toUpperCase();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:48:59.107

**我强烈反对这种应用行为**。如果您想稍后删除#3，并拥有#4 到#17 的项目怎么办？或者您可能需要在#6 和#7 之间添加一个。这是很多重命名（假设您正在维护秩序）。

我建议给它们起正确的名称，并手动实例化它们。如果这样做，您可以将它们存储在 中`ArrayList<Fragment>`，然后返回`.get(i)`。

如果您绝对 100% 决心改用您的方法，那么您应该可以这样做：

```
Class clazz = Class.forName("DummySection" + i + "Fragment"); // Use ", not '
Fragment frag = (Fragment) clazz.newInstance(); 
```

# google-chrome-extension - chrome 扩展 - 从没有弹出窗口的背景页面获取标签 url

> ID：12886812
> 
> 赞同：4
> 
> 时间：2012-10-14T21:42:24.677
> 
> 标签：google-chrome-extension

我希望能够获取用户所在选项卡的当前 url，而无需强制用户单击弹出按钮。我得到了一个脚本来计算用户单击弹出图标的位置，并且一切都按预期进行，但是为了尝试完成我当前的目标（无需按下按钮即可），我将代码复制并粘贴到背景页面，并没有得到任何结果。我的猜测是我需要一些积极的听众或类似的东西。

这是我必须使用弹出按钮的 javascript

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script>
window.addEventListener("load", windowLoaded, false);
function windowLoaded() {
  chrome.tabs.getSelected(null, function(tab) {
        //doing stuff with the url
  });
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:07:28.577

根据打包应用程序的文档（对于扩展程序可能相同也可能不同），您可以使用 chrome.app API 中的 onLaunched 事件在应用程序启动时运行代码：

```
// start doing something when the app first loads....
chrome.app.runtime.onLaunched.addListener(function() {
    // all your monitoring code will go here

}); 
```

请注意，如果构建一个扩展，并且您的扩展应该在浏览器加载后立即开始侦听，您可能不需要声明“onLaunched”侦听器。

此外，您需要监视活动选项卡的更改，假设您希望始终知道用户在当前活动选项卡中所在的 URL。[Chrome 选项卡 API](http://developer.chrome.com/extensions/tabs.html)包含大量信息，可帮助您使用扩展程序中的选项卡，例如，以下是用于监控活动选项卡更改的代码：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    console.info("This is the url of the tab = " + changeInfo.url);
    // do stuff with that url here....
}); 
```

如果用户更改活动选项卡中的 url，此处理程序将监视该更改：

```
chrome.tabs.onActivated.addListener(function(activeInfo) { .. } 
```

但是， onActivated 的文档说明如下：

> 当窗口中的活动选项卡更改时触发。请注意，在此事件触发时可能未设置选项卡的 URL，但您可以在设置 URL 时侦听 onUpdated 事件以得到通知。

因此，您很可能只使用 onUpdated 事件示例。

当您到达后台页面中的某个点时，您会遇到一个您希望将 JavaScript 注入其中的页面。例如，要使用 JavaScript 更改页面的背景颜色，您可以使用以下代码：

```
chrome.tabs.executeScript(null,
                           {code:"document.body.bgColor='red'"}); 
```

请记住，您的后台页面不能直接运行 JavaScript 或操作网页的 DOM；因此，您需要以这种方式注入代码，其中包括注入诸如 jQuery 之类的东西以及您需要的其他资源。

不要忘记在 manifest.json 中允许选项卡权限和背景页面：

```
/* in manifest.json */
"permissions": [
  "tabs", "http://*/*"
],
"background": {
  "scripts": ["background.js"]
}, 
```

要将 jQuery 注入页面，您基本上需要编写构建脚本元素的代码，然后将其注入页面：

```
chrome.tabs.executeScript(null,
    {code:
        "var script = document.createElement('script');" +
        "script.setAttribute('src', '//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js');" +
        "script.setAttribute('type','text/javascript');" +
        "document.getElementsByTagName('head')[0].appendChild(script);"

   }
); 
```

双引号中的代码不会在您的后台页面中运行。相反，它在注入选项卡中的页面时运行。我对双引号内的内容使用单引号，这样解析器就不会混淆并引发字符串文字错误。

请注意，可能有一种更好、更简洁的方法可以将此类代码注入到页面中，但对于小型、次要的注入，这就足够了。

请记住，如果页面中已经注入了 jQuery，您可能会遇到冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-11T14:24:56.687

另一种方法：从内容脚本中获取并将其发送到后台页面：

```
url = window.location.href;

    chrome.runtime.sendMessage({greeting: url}, function(response) {
    }); 
```

在后台.js

```
chrome.runtime.onMessage.addListener(function(message,sender,sendResponse){
        var url=message.greeting;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-14T21:52:41.987

在您的 Chrome 扩展程序中，您可能需要一个在后台运行的文件。[查看这篇](http://developer.chrome.com/extensions/background_pages.html)关于创建名为的页面的开发人员文章`background.js`

这将允许您将代码放置在启用扩展程序时仍然存在的文件中。

# iphone - MapKit 由于未捕获的异常无效区域而终止应用程序

> ID：12886822
> 
> 赞同：3
> 
> 时间：2012-10-14T21:43:21.350
> 
> 标签：iphone, ios5, mapkit, userlocation

我设置了`mapView.delegate`等。
一切都很好，但是当我离开时，在我恢复我的应用程序几分钟后，它退出了。

控制台给了我这个，但我无法修复它：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'Invalid Region <center:-180.00000000, -180.00000000 span:+0.09000000, +0.09000000>' 
```

userLocation 更新后的`setRegion`发送方法`didUpdateUserLocation`

```
 - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    [mapView removeAnnotations: [mapView annotations]];
    for (TOJSearchItem *searchItem in _searchItems) {
        TOJPlaceRequest *request = [TOJPlaceRequest new];
        [request execute:SERVER_URL coordinate:userLocation.coordinate searchItem:searchItem delegate:self];
    }
    MKCoordinateRegion region = {{userLocation.coordinate.latitude , userLocation.coordinate.longitude}, {0.09f , 0.09f}};
    [mapView setRegion:region animated: YES];
} 
```

提出要求

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if (_lastLocation != nil) {
        CLLocationDistance meters = [newLocation distanceFromLocation:_lastLocation];
        if (meters < DISTANCE_MINI) {
//            CALCUL tout les points par rapport a current location
//            NSLog(@"%f, %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
        } else {
            for (TOJSearchItem *searchItem in _searchItems) {
                TOJPlaceRequest *request = [TOJPlaceRequest new];
                [request execute:SERVER_URL coordinate:newLocation.coordinate searchItem:searchItem delegate:self];
            }
            MKCoordinateRegion region = {{newLocation.coordinate.latitude , newLocation.coordinate.longitude}, {0.09f , 0.09f}};
            [_mapView setRegion: region animated: YES];
            NSLog(@"reconnection");
        }
    }
    _lastLocation = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];
} 
```

单击注释后重置区域

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    if ([view class] == TOJClusterPushPinView.class) {
        TOJClusterPushPinView *clusterPushPinView = (TOJClusterPushPinView *)view;
        CLLocationCoordinate2D topLeftCoordinate;
        topLeftCoordinate.latitude = -90;
        topLeftCoordinate.longitude = 180;
        CLLocationCoordinate2D bottomRightCoordinate;
        bottomRightCoordinate.latitude = 90;
        bottomRightCoordinate.longitude = -180;
        for (TOJPushPin *pushPin in clusterPushPinView.clusterPushPin.pushPins) {
            topLeftCoordinate.longitude = fmin(topLeftCoordinate.longitude, pushPin.coordinate.longitude);
            topLeftCoordinate.latitude = fmax(topLeftCoordinate.latitude, pushPin.coordinate.latitude);
            bottomRightCoordinate.longitude = fmax(bottomRightCoordinate.longitude, pushPin.coordinate.longitude);
            bottomRightCoordinate.latitude = fmin(bottomRightCoordinate.latitude, pushPin.coordinate.latitude);
        }
        MKCoordinateRegion region;
        region.center.latitude = topLeftCoordinate.latitude - (topLeftCoordinate.latitude - bottomRightCoordinate.latitude) * 0.5;
        region.center.longitude = topLeftCoordinate.longitude + (bottomRightCoordinate.longitude - topLeftCoordinate.longitude) * 0.5;
        region.span.latitudeDelta = fabs(topLeftCoordinate.latitude - bottomRightCoordinate.latitude) * 2.0; // Add a little extra space on the sides
        region.span.longitudeDelta = fabs(bottomRightCoordinate.longitude - topLeftCoordinate.longitude) * 2.0; // Add a little extra space on the sides
        region = [mapView regionThatFits:region];
        [mapView setRegion:region animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:56:07.093

如果您的 didUpdateToLocation 方法，您应该检查给定的位置变量是否有效。

```
 if (userLocation.location.horizontalAccuracy >= 0) { 
```

众所周知，虽然我没有看到其中的逻辑，但它在恢复后获得的第一个位置可能是无效的。任何精度 < 0 的位置都应该被丢弃。

参考： http: [//developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/horizo​​ntalAccuracy](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/horizontalAccuracy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T10:17:08.077

改成

```
 if (userLocation.location.horizontalAccuracy >= 1) {

 .......

 } 
```

有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T22:46:32.563

你应该检查 didUpdateUserLocation 如果

```
userLocation.location != nil 
```

在我的应用程序中，当从 applicationDidBecomeActive 事件返回时，第一个坐标始终无效。

# jquery - jQuery 在这个选择元素上的行为不符合预期

> ID：12886830
> 
> 赞同：0
> 
> 时间：2012-10-14T21:44:11.957
> 
> 标签：jquery

我有这段代码，当下拉列表中的第一项被选中时，它会打开一个弹出窗口。

```
<select id="selectItem">
    <option value="newItem">Load new item...</option>
    <option value="ddsds">first item  </option>
</select> 
```

```
$(document).ready(function(){  
    $("#selectItem").change(function(){
        if($(this).prop("selectedIndex") == 0){
            window.open('popup.html', '_blank', 'scrollbars=1, height=600, width=500');
        }
    });
 }); 
```

[jsFiddle](http://jsfiddle.net/wVRHY/)

如果我选择的项目与第一个项目不同，则选择第一个项目将打开弹出窗口。

但是，如果选择了第一个项目而之前没有选择任何其他项目，则不会启动弹出窗口。

我不明白发生了什么。选择第一个选项时，我应该如何正确地告诉jQuery以打开弹出窗口？

**编辑：**

我误解了 change 事件。As many people mentioned, the popup won't fire when the selection isn't changed. 也许我会用一个按钮来代替当前的“业务逻辑”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:01:30.780

Like Andy Ray commented - this is expected behavior for the *change* event - it won't fire when the selection isn't changed.

一种选择是简单地在选择中添加一个选项（没有双关语），以便默认情况下不选择“加载新”；

**html**

```
<select id="selectItem">
    <option selected>please pick</option>
    <option value="newItem">Load new item...</option>
    <option value="ddsds">first item  </option>
</select> 
```

**js**

```
$("#selectItem").change(function () {
    if (this.value === "newItem") {
        window.open('popup.html', '_blank', 'scrollbars=1, height=600, width=500');
    }
}); 
```

[http://jsfiddle.net/wVRHY/6/](http://jsfiddle.net/wVRHY/6/)

但是 - 根据您的表单应该做什么，我怀疑您**可能会更好地使用`<button>`**“加载新...”功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:49:26.523

您还需要在更改事件之外添加 window.open 方法，以便在加载页面时运行它。

```
 $(document).ready(function(){  
    $("#selectItem").change(function(){
            if($(this).prop("selectedIndex") == 0){
                window.open('popup.html', '_blank', 'scrollbars=1, height=600, width=500');
            }
        });
    if($("#selectItem").prop("selectedIndex") == 0){
                window.open('popup.html', '_blank', 'scrollbars=1, height=600, width=500');
            }
 }); 
```

[http://jsfiddle.net/wVRHY/2/](http://jsfiddle.net/wVRHY/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T21:52:15.700

页面加载后，您将需要使用该`load`事件检查选项的状态 - 或者您可以手动`trigger`更改事件。

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T22:04:59.497

实际上，对于您的示例，使用`blur()`代替`change()`会起作用。

```
$("#selectItem").blur(function(){
        if($(this).prop("selectedIndex") == 0){ 
```

jsfiddle在这里[http://jsfiddle.net/wVRHY/8/](http://jsfiddle.net/wVRHY/8/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T22:42:54.297

**信息：**显然，当您第一次单击第一项时，它不应该显示弹出窗口，因为否则用户将无法看到所有其他选项。因此，以下代码将允许您单击第一个选项以查看所有选项，然后当您选择第一个项目时，它将按您的需要工作。

**解决方案：**

```
var cc = 0;

$('#selectItem').click(function ()
{
  cc++;

  if (cc == 2) 
  {
    $(this).change();
    cc = 0;
  }
}).change(function (){
  if ($(this).prop("selectedIndex") == 0)
  {
    window.open('popup.html', '_blank', 'scrollbars=1, height=600, width=500');
  }

  cc = -1;
}); 
```

**信用：我从**[“Vega's Answer”](https://stackoverflow.com/a/11002651/1550441)中获得了大部分代码 ，然后添加了额外的代码以适合您的答案。

# php - javascript发布到数据库

> ID：12886833
> 
> 赞同：1
> 
> 时间：2012-10-14T21:44:31.793
> 
> 标签：php, javascript, ajax

我正在尝试使用`POST`and将数据保存到数据库中`AJAX`。该脚本作为 Firefox 的用户脚本运行。当我运行脚本时，没有显示任何错误，数据库中也没有任何内容。

**PHP**

```
 $db_connection = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
    //$db_connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );  
    //$db_connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );  
    //$db_connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

    $insert_key = $db_connection->prepare("INSERT into userstats (key, match, expire) VALUES (?, ?, ?, ?)");
    $insert_key->bindParam(1, $_POST["user"]);
    $insert_key->bindParam(2, $_POST["score"]);
    $insert_key->bindParam(3, $_POST["location"]);
    $insert_key->bindParam(4, $_POST["pointtime"]);
    $insert_key->execute();

    $db_connection = null;

    echo "saved to database!";

} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

**javascript**

```
xhr = new XMLHttpRequest();
xhr.open("POST", "stats.php", true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.setRequestHeader("Content-length", params.length);
xhr.setRequestHeader("Connection", "close");
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
        console.log(xhr.responseText);
    }
}

var params = "?user=james&score=5&location=homepage&pointtime=1350249055";
xhr.send(params); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:47:47.097

`KEY`并且`MATCH`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此您的语句没有正确准备。将它们括在反引号中以将其用作列名：

```
 $insert_key = $db_connection->prepare("INSERT into userstats (`key`, `match`, expire) VALUES (?, ?, ?, ?)"); 
```

至于为什么它没有抛出异常，请确保您实际上已将 PDO 配置为抛出异常。如果您不这样做，那么您`$insert_key`将在后续尝试绑定参数并执行它时`FALSE`获得s。`E_WARNING`

我建议确保`error_reporting()`已启用并`display_errors`处于打开状态，因此如果您没有抛出异常而是遇到导致脚本终止的致命错误，您至少会看到错误输出返回给您的 AJAX 调用者`console.log()`

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

# javascript - 在 JavaScript 中创建一个使用从文本框中检索到的值进行数学计算的对象？

> ID：12886834
> 
> 赞同：0
> 
> 时间：2012-10-14T21:44:35.263
> 
> 标签：javascript, function, object, calculator

我正在尝试使用 Objects 制作计算器。这是 JSFiddle：http: [//jsfiddle.net/jNqEv/4/](http://jsfiddle.net/jNqEv/4/)

在我制作计算器的其余部分时，我正在使用这段代码来计算数字：

```
/*Computes the values inside the box and returns the answer.*/
function compute(form)  
{
    form.display.value = eval(form.display.value); 
} 
```

现在我需要创建一个执行计算的对象，而不是使用 JavaScript 预定义的对象 eval。我在想这样的事情：

基本上，这个对象从 id 为“输入”的文本框中获取值这些值将采用 2*3、1+2,5/7 等形式......所以我在想如果我拉第二块使用 substr 的字符串中的数据然后我可以检查它是否是乘法、除法、减法或加法。

```
 function calc(arithmetic)
{
    this.arithmetic = arithmetic;
}        

var myCalc = new calc(input)
    {
    function maths (input) 
{
    var str = input;
    var a=str.substr(1,1); // example: 1+2   var a holds the 1
    var b=str.substr(2,1); //                var b holds the "+"
    var c=str.substr(3,1); //                var c holds the 2
                           // if the sign is equal to "+" add var a plus var b
                           // and then place them inside answerNumber.
                           // then take answerNumber and place its value
                           // inside the page element with the id "input"
    if(b == "+")
    {
        answerNumber = a + c;
    }
    else if(b == "-")
    {
        answerNumber = a + c;
    }
    else if(b == "*")
    {
        answerNumber = a * c;
    }
    else if(b == "/")
    {
        answerNumber = a / c;
    }
    document.getElementById("input").value=answerNumber;
        }

    } 
```

我已经尝试在各种网站上阅读有关对象的信息，但它们根本没有帮助，以下是我去过的一些地方：“http://www.crockford.com/javascript/private.html”、“http: //www.w3schools.com/js/js_objects.asp”等等。对于我正在尝试做的事情，这些似乎不是很有用。也许你们中的一些人可以提供帮助。

这是对象函数将被触发和放置到的按钮和文本框：

```
<input type="button" value="   =    " name="enter" onClick="compute(this.form)">
<input name="display"  id="input" size=25> 
```

这是我的整个代码表，包括外部 JavaScript。

HTML：

```
<html> 
<head>
<title>Assignment 2</title>
</head>
<body>
<div align="center">
<span style="font-weight:bold" size="20">Calculator</span>
<br>
<!-- Prints my name -->
<form  name="MyName" id="form1" style="font-weight:bold" size="20">
<script>
document.write("Mallery, Cody");
</script>
</form>
<!-- Script -->
<script src="functions.js" type="text/javascript"></script>
<!-- The Calculator! -->
<center><form>
<table border=4>
<tr>
<td>
<input name="display"  id="input" size=25>
<br>
</td>
</tr>
<tr>
<td>
<input type="button" value="    7    " onClick="addChar(this.form.display, '7')">
<input type="button" value="    8    " onClick="addChar(this.form.display, '8')">
<input type="button" value="    9    " onClick="addChar(this.form.display, '9')">
<input type="button" value="    /    " onClick="addChar(this.form.display, '/')">
<br>

<input type="button" value="    4    " onClick="addChar(this.form.display, '4')">
<input type="button" value="    5    " onClick="addChar(this.form.display, '5')">
<input type="button" value="    6    " onClick="addChar(this.form.display, '6')">
<input type="button" value="    *    " onClick="addChar(this.form.display, '*')">
<br>

<input type="button" value="    1    " onClick="addChar(this.form.display, '1')">
<input type="button" value="    2    " onClick="addChar(this.form.display, '2')">
<input type="button" value="    3    " onClick="addChar(this.form.display, '3')">
<input type="button" value="    -    " onClick="addChar(this.form.display, '-')">
<br>

<input type="button" value="   0     " onClick="addChar(this.form.display, '0')">
<input type="button" value="    N    " onClick="changeSign(this.form.display)">
<input type="button" value="    +    " onClick="addChar(this.form.display, '+')">
<input type="button" value="   C   " onClick="this.form.display.value = 0 ">
<br>
<input type="button" value="   L    " name="L" onClick="Loop(this.form.display.value)" 
                                               title="If the L button is pressed, the digit present in the results box will be looped through and added up to the 'digit plus 10'.For example: After the calculator has been reset. The user can press the 1 button, then the L button 55 should be displayed in the calculator 1 + 10 = 11, therefore start with 1 and loop until less than 11 adding all of the numbers 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 = 55">
<input type="button" value="   =    " name="enter" onClick="compute(this.form)">
</td>
</tr>
</table>
<br>
<!-- Calculator User Guide -->
<span style="font-weight:bold" size="20">Instructions:</span>
<span size="16">
<br>Click a number, then an action, then another number, then the '=' button.
<br>Press 'C' when ready to start over. 
<br>The 'N' makes your previous number negative.
<br>The 'L' button requires one number to be avalible,
<br>It will loop through "that number" to "ten plus that number"
<br> and add all values and display.
<br>
<br>For example 1+2+3+4+5+6+7+8+9+10 = 55
</span>
<br><br>
<!-- Browser information -->
<span style="font-weight:bold" size="20">Navigator:</span>
<div id="Navigator"></div>

<script language="javascript">

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("Navigator").innerHTML=txt;

</script>
</form>           
</div>
</body>
</html> 
```

外部 JavaScript：

```
/* gets the input from the keyboard OR clicking the button */
function addChar(input, character) 
{
if(input.value == null || input.value == "0")
    input.value = character;
else
    input.value += character;
}

/*changes the sign of the number inside the input box from negative to positive.*/
function changeSign(input) 
{
if(input.value.substring(0, 1) == "-")
    input.value = input.value.substring(1, input.value.length);
else
    input.value = "-" + input.value;
}

/*Computes the values inside the box and returns the answer.*/
function compute(form)  
{
    form.display.value = eval(form.display.value); /*The Calculator uses an Object for all calculations*/
}                

/* Loops the input by the value + 10 */
function Loop(input)
{
     var num = parseInt(input) + 10;
     var i=0;
     var sum=0;

    while(i < num)
        {
            sum=sum+i;
            i++;
        }
    document.getElementById("input").value=sum;

}

/*Compute Arithmetic*/
function calc() //creating an empty object named calc
{
}

var calc = new calc(); //creating a new instance of the calc object

calc.arithmetic = function maths (input) 
{
    var str = input;
    var a=str.substr(1,1); 
    var b=str.substr(2,1);
    var c=str.substr(3,1);

    if(b == "+")
    {
        answerNumber = a + c;
    }
    else if(b == "-")
    {
        answerNumber = a + c;
    }
    else if(b == "*")
    {
        answerNumber = a * c;
    }
    else if(b == "/")
    {
        answerNumber = a / c;
    }
    document.getElementById("input").value=answerNumber;
} 
```

因此，您可以向我指出正确方向的任何方式都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:02:21.220

我不知道你为什么认为你需要一个对象。只需将它们放在一个函数中 - 您已经拥有该`maths`函数。它周围的代码只是一个语法错误。

通常，通过`var myCalc = new calc(input);`您创建`calc`构造函数的实例 - 它不应跟随函数体。另外，通过做

```
function calc() {}
var calc = new calc(); 
```

你只是用它的实例覆盖`calc`函数 - 很奇怪。

如果你想命名你的函数，即将它们作为属性放到一个对象上（这是一个好主意），你应该使用一个简单的`Object`文字。不需要会创建多个实例的构造函数，您只需要一个：

```
var calc = {
   arithmetic: function maths (input) { … }
};
// then call
calc.arithmetic("1+3");
// which sets the input field to "4" 
```

# javascript - 为什么我的私人变量被更改？

> ID：12886839
> 
> 赞同：2
> 
> 时间：2012-10-14T21:45:11.607
> 
> 标签：javascript, variables, methods, private

这是小提琴： http: [//jsfiddle.net/Xh4GU/1](http://jsfiddle.net/Xh4GU/1) 或代码：

```
function Vector()
{
    var v = new Array(123, 456, 789);

    this.getV = function()
    {
        return v;
    }
}

function Formulas()
{
    this.add = function(x, axis, units)
    {
        x[axis] += units;
    }
}

var vector = new Vector();
var formulas = new Formulas();

var v = vector.getV();
var vAdded = formulas.add(v, 0, 77)

document.write(v); 
```

吐出：200,456,789

为什么 v 的第一个索引被更改？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T21:47:57.993

因为~~数组是通过`formulas.add`引用~~传递的，所以传递的参数是`formulas.add`对私有数组的引用，因此`v`您对其内容所做的任何更改都将在未来保持可见。

当您分发对外部代码的引用时，私有的事实`v`并不能保护其内容。`v`它确实可以防止外部代码`v`自己抓取并与另一个数组交换`v`，但是可以修改数组本身（其值已更改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:47:20.380

因为你改变它 v 是一个数组，你在公式中改变它。[jsfiddle](http://jsfiddle.net/Xh4GU/2/)

```
var vector = new Vector();
document.write(v.toString());  // 123,456,789
var formulas = new Formulas();

var v = vector.getV();
var vAdded = formulas.add(v, 0, 77).// v getting changed inside formulas.add.  
document.write(v); //200,456,789 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:47:43.240

```
var vAdded = formulas.add(v, 0, 77) 
```

您是说将数组 ( `v[0]`) 的第一个索引加上 77。为什么？私有变量`v`由`this.getV`. 当你做了

```
var v = vector.getV(); 
```

它返回了对数组的引用。这有效地允许您与函数外部的数组进行交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T22:00:35.643

发生这种情况是因为您*引用*的不是复制`v`，请参阅我的演示以获得更清晰的示例：http: [//jsfiddle.net/SO_AMK/hjtLd/](http://jsfiddle.net/SO_AMK/hjtLd/)如果在生成数字后单击按钮，您将看到结果是一个不同的数组。

但是，如果将数组移到内部，`vector.getV()`您将看到结果始终为 123,456,789。这是因为您将在`v`每次运行该函数时重置该值。

您还可以创建一个“真实”副本，如下所示：http: [//jsfiddle.net/SO_AMK/J8h4d/](http://jsfiddle.net/SO_AMK/J8h4d/)

# python - 打开电子表格返回 InMemoryUploadedFile

> ID：12886842
> 
> 赞同：6
> 
> 时间：2012-10-14T21:45:59.213
> 
> 标签：python, django

我有一个用户将文件上传到网站，我需要解析电子表格。这是我的代码：

```
input_file = request.FILES.get('file-upload')
wb = xlrd.open_workbook(input_file) 
```

我不断收到的错误是：

```
TypeError at /upload_spreadsheet/
coercing to Unicode: need string or buffer, InMemoryUploadedFile found 
```

为什么会发生这种情况，我需要做些什么来解决它？谢谢你。

作为参考，这是我在 shell 中打开文件的方式

```
>>> import xlrd
>>> xlrd.open_workbook('/Users/me/dave_example.xls')
<xlrd.Book object at 0x10d9f7390> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T22:01:40.500

您可以在使用 xlrd 打开之前将 InMemoryUploadedFile 转储到临时文件。

```
try:
    fd, tmp = tempfile.mkstemp()
    with os.fdopen(fd, 'w') as out:
        out.write(input_file.read())
    wb = xlrd.open_workbook(tmp)
    ...  # do what you have to do
finally:
    os.unlink(tmp)  # delete the temp file no matter what 
```

如果您想将所有内容保存在内存中，请尝试：

```
wb = xlrd.open_workbook(filename=None, file_contents=input_file.read()) 
```

# node.js - socket.io + redis - 幽灵套接字 - 有可能吗？

> ID：12886843
> 
> 赞同：1
> 
> 时间：2012-10-14T21:46:01.197
> 
> 标签：node.js, redis, socket.io, cluster-computing

我用 node.js、socket.io、clusters、redis 制作了一个应用程序，它在 8 个进程中运行。是否每个进程都有一些幽灵套接字？我的意思是已经断开连接但不是每个进程都知道它并且仍然拥有它们的套接字。

我的应用程序在连接事件中向客户端发送在线计数（来自两个房间的套接字计数）。并且名为“HEAD”的进程每 3 秒发送一次，所有套接字也“在线计数”。我为什么要告诉它？当我在浏览器中连接到应用程序时，首先从 8 个进程之一获得“在线计数”，让它为 60，3 秒后，我从 HEAD 进程中获得“在线计数”，但它是非常不同的数字。

所以我认为有些事情没有通过 Redis 同步到进程。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:28:47.643

你想做的事情是可能的，但这是一种非常复杂的方式。此外，考虑到您使用的是 node.js，它没有异步模型而是轮询，最好在 node.js 中轮询这些连接，这很简单。

你的问题有点令人困惑，所以我希望我能很好地理解它。

# c# - 将正确的 Gcode 字符串发送到串行端口？

> ID：12886850
> 
> 赞同：4
> 
> 时间：2012-10-14T21:46:28.430
> 
> 标签：c#, serial-port, grasshopper, g-code

我正在尝试`g28`通过线路将 gcode 发送到我的 RepRap 3D 打印机`port.Write("g28");`。

我的程序连接到正确的串行端口，但是当我尝试将信息作为字符串发送时，对 com 端口的访问被拒绝。**这很奇怪，因为在将 Gcode 发送给它之前，串行端口是打开的。**它甚至发回了一些数据。那里有什么问题，我该如何解决？

以下是我正在使用的代码行。[此页面](http://reprap.org/wiki/G-code#M112%3a_Emergency_Stop)上提供了 gcode 命令列表。

我尝试`"\n"`在字符串末尾添加 a ，但它不起作用。

```
 //Fields
    List<string> myReceivedLines = new List<string>();

    //subscriber method for the port.DataReceived Event
    private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        while (sp.BytesToRead > 0)
        {
            try
            {
                myReceivedLines.Add(sp.ReadLine());
            }
            catch (TimeoutException)
            {
                break;
            }
        }
    }

    protected override void SolveInstance(IGH_DataAccess DA)
    {

        string selectedportname = default(string);
        DA.GetData(1, ref selectedportname);
        int selectedbaudrate = default(int);
        DA.GetData(2, ref selectedbaudrate);
        bool connecttodevice = default(bool);
        DA.GetData(3, ref connecttodevice);
        bool homeall = default(bool);
        DA.GetData(5, ref homeall);

        SerialPort port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); 

        port.DtrEnable = true;   
        port.Open();             

        if (connecttodevice == true)
        {
            port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
            DA.SetDataList(0, myReceivedLines);
        }

        if (homeall == true)
        {
            port.Write("g28");
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T00:15:24.733

通常当我创建一个 Com 端口时，它是一个类级别的对象，我在启动期间初始化一次。我会将您的初始化代码从您的方法中移出并放入您可以在启动期间调用一次的构造函数或方法中。这应该可以防止您尝试多次打开它，并且仍然可以让它响应接收到的数据。

* * *

我不确定您的架构，看起来您可能计划拥有多个端口，但要在评论中回答您的问题，即您为创建 SerialPort 所做的一切。SerialPort 的声明至少应该是一个类级别的变量。然后，您可以检查它是否没有任何内容并第一次创建它。

```
string selectedportname = default(string); 
DA.GetData(1, ref selectedportname); 
int selectedbaudrate = default(int); 
DA.GetData(2, ref selectedbaudrate); 
bool connecttodevice = default(bool); 
DA.GetData(3, ref connecttodevice); 

SerialPort port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One);   
port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

DA.SetDataList(0, myReceivedLines);   

port.Open();  // optional  I usually open it at the time that I initialize it. you can check `port.IsOpen()`
              // and Open it if it is false. 
```

类级别 SerialPort 的第二个选项尝试这样的事情：

```
protected override void SolveInstance(IGH_DataAccess DA)
{
    if(port == null)
    {
        string selectedportname = default(string);
        DA.GetData(1, ref selectedportname);
        int selectedbaudrate = default(int);
        DA.GetData(2, ref selectedbaudrate);
        bool connecttodevice = default(bool);
        DA.GetData(3, ref connecttodevice);
        port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One);
        if (connecttodevice == true)
        {
            port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);
            DA.SetDataList(0, myReceivedLines);
        }

        port.DtrEnable = true;
        port.Open();
    }

    bool homeall = default(bool);
    DA.GetData(5, ref homeall);

    if (homeall == true)
    {
        port.Write("g28");
    }

} 
```

# wpf - 部署 WPF 项目，在第一类实例化时崩溃

> ID：12886852
> 
> 赞同：0
> 
> 时间：2012-10-14T21:46:36.797
> 
> 标签：wpf, deployment, nullreferenceexception

我已经用谷歌搜索这个问题 2 天了，我看到的所有解决方案都不太适合我的场景，或者修复不起作用。

我有一个 WPF 桌面应用程序。当我调试项目时，一切都工作正常且 100%。但是当我部署我的应用程序时（即使是在我开发它的 PC 上），它就崩溃了。它似乎在它找到的第一个类实例化时崩溃并抛出一个异常，该异常的 innerException 始终是一个空引用异常。前一个异常一直在变化，例如 TargetInvocationException、TypeInitializationException 等。

这是堆栈跟踪：

```
 System.TypeInitializationException: The type initializer for 'eTute.BusinessLayer' threw an exception. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at eTute.BusinessLayer..cctor()
   --- End of inner exception stack trace ---
   at eTute.BusinessLayer.EncryptPassword(String password)
   at eTute.MainWindow.imgLock_MouseDown(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run() 
```

“BusinessLayer”就像我的数据访问层 (DAL)。起初它是实例驱动的，但是当它开始在 BusinessLayer 的构造函数上崩溃时，我将整个类更改为静态。现在它似乎只是在下一次实例化时崩溃。

注意：要创建安装程序，我只使用了 Visual Studio 的安装向导。该应用程序使用 SQL Express 数据库，但它甚至从未使用它，因为它在任何小实例上都会崩溃。

请，任何帮助或评论将不胜感激。我以前从未做过安装，但觉得它不应该这么复杂！

**更新** 问题似乎与访问 app.config 文件中的 connectionStrings 有关。`ConfigurationManager.ConnectionStrings["name"].ConnectingString`当我用硬编码的字符串变量替换所说的代码时，问题就消失了。

但是，当我的应用程序部署时，我应该如何使用 app.config 文件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:30:13.017

因此，经过一番挣扎，我能够确定我的安装文件存在问题。我遵循了网站上的教程，它实际上教我做一些实际上不应该做的事情，这就是发生错误的原因。

问题是 app.config 文件与应用程序的 exe 不在同一个文件夹中。因此，exe在启动时找不到app.config文件，导致应用程序崩溃。

我希望这可以帮助有类似问题的人。如果我只是了解它发生的原因，这是一个非常容易解决的问题。;)

# javascript - 如何在 ACE 编辑器中禁用语法检查器？

> ID：12886857
> 
> 赞同：18
> 
> 时间：2012-10-14T21:47:15.707
> 
> 标签：javascript, ace-editor

您好，我正在使用[ACE 编辑器](http://ace.ajax.org/)，我想禁用语法检查器，我发现删除[worker-javascript.js](https://github.com/ajaxorg/ace-builds/blob/master/src-noconflict/worker-javascript.js)文件似乎可以解决问题，但我希望有一种更简洁的方法，因为我不确定是什么否则我会通过删除该文件来禁用甚至破坏。

谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-22T16:56:30.820

I also didn't find this in documentation, so I've looked at ACE source code. You can disable worker with the following lines of code:

```
var editor = ace.edit(document.getElementById('test'));
editor.getSession().setUseWorker(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-05T09:59:02.007

有一种更有效的方法可以实现这一目标。与其生成一个工人来立即停止它，不如直接告诉编辑器不要生成工人，如下所示：

```
ace.edit(document.getElementById('test'), {
    useWorker: false
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-26T15:01:32.873

如果您将**React**与[react-ace](https://github.com/securingsincity/react-ace)包装器一起使用，则必须使用该`setOptions`道具来禁用 ACE 语法检查器：

```
 <AceEditor
    mode="css"
    theme="github"
    onChange={onChange}
    name="UNIQUE_ID_OF_DIV"
    editorProps={{ $blockScrolling: true }}
    setOptions={{
      useWorker: false // <<----- USE THIS OPTION TO DISABLE THE SYNTAX CHECKER
    }}
  />, 
```

# java - 如何在java中存储文本文件中的令牌

> ID：12886865
> 
> 赞同：0
> 
> 时间：2012-10-14T21:47:51.880
> 
> 标签：java, text-files, token

我想到了。我将计数器作为整数而不是双精度数。

```
public class Family

{

   public static void main(String[] args) throws IOException
   {
        String token = "";
        File fileName = new File("MaleFemaleInFamily.txt");
        Scanner inFile = new Scanner(fileName);
        double counterGG = 0;
        double counterBG = 0;
        double counterBB = 0;
        double totalCounter = 0;
        while (inFile.hasNext())
        {
            token = inFile.next();
            System.out.println(token);
            if (token.equals("GG")) {
                counterGG++;
                totalCounter++;
            } else if (token.equals("BG")) {
                counterBG++;
                totalCounter++;
            } else if (token.equals("GB")) {
                counterBG++;
                totalCounter++;
            } else if (token.equals("BB")) {
                counterBB++;
                totalCounter++;
            }
        }
        System.out.println();
        System.out.println("Sample Size: " + totalCounter);
        System.out.println("Two Boys: " + (counterBB / totalCounter) + "%");
        System.out.println("One Boy One Girl: " + (counterBG / totalCounter) + "%");
        System.out.println("Two Girls: " + (counterGG / totalCounter) + "%");
        inFile.close();
    }
} 
```

我得到了正确反击的一切，但是当我计算`(counterGG / totalCounter)`and时`(counterBG / totalCounter)`，`(counterBB / totalCounter)`它就变成了零。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:57:23.863

您应该改用`hasNextLine`and`nextLine`方法。我认为，由于每个条目都在单独的行中，因此更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:57:39.667

这似乎有效（打印 3）：

```
public static void main(String[] args) throws Exception {
    File fileName = new File("test2.txt");
    Scanner inFile = new Scanner(fileName);
    int counter = 0;

    while (inFile.hasNext()) {
        String token = inFile.next();
        System.out.println(token);
        if (token.equals("GG")) {
            counter++;
        }
    }
    System.out.println(counter);
} 
```

# javascript - 需要 JavaScript NaN 错误帮助

> ID：12886870
> 
> 赞同：0
> 
> 时间：2012-10-14T21:48:31.277
> 
> 标签：javascript, jquery, math, nan

我有一个用作计算器一部分的函数。我用 JSMin 把它缩小了。我重写了代码，以便可以调试代码，但是现在我重写了代码，我发现了一个新错误（新错误是 NaN 问题）。输出应该是一个数字，而是 NaN。代码如下所示。

```
 function calculate() {

  console.log(1);
  var activity = $("#txtActivity").val();

  var days = parseInt( $("#txtDays").val(), 10);
  var hours = parseInt( $("#txtHours").val(), 10);
  var minutes = parseInt( $("txtMinutes").val(), 10);
  var seconds = parseInt( $("txtSeconds").val(), 10);

  var MoneyMadeDuringActivity = (days * 21464) + (hours * 2683) + (minutes * 4472) + (seconds * 0.74);

  $("#CalcOutput").html("In the time it takes me to " + activity + ",<br />Barack Obama makes $" + MoneyMadeDuringActivity);

}

  $("#btnCalculate").click(function() {
    calculate();
  }); 
```

我很难弄清楚如何摆脱这个错误，因为“活动”是唯一的字符串变量，而所有其他变量都是数字或者是 parseInt'ed。

这是我得到的输出：

**在我在这里输入一些东西的时间里，巴拉克奥巴马赚了 $NaN**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:50:25.840

您`#`在以下几行中缺少：

```
var minutes = parseInt( $("txtMinutes").val(), 10);
var seconds = parseInt( $("txtSeconds").val(), 10); 
```

因为选择器没有找到任何东西，所以它实际上是：

```
var minutes = parseInt(undefined, 10); // NaN
var seconds = parseInt(undefined, 10); // NaN 
```

# c++ - 如何使用断言函数

> ID：12886871
> 
> 赞同：1
> 
> 时间：2012-10-14T21:48:32.127
> 
> 标签：c++, c

做什么

```
assert( scanf("%d", &t) == 1 ); 
```

和

```
assert( 1 <= t && t <= 10 ); 
```

返回？

我的目标是包含`t`1 到 10 个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T21:53:52.267

不要将断言与用户输入一起使用。Assert 旨在通过使您的程序崩溃来捕获逻辑错误（如果断言失败，则通过调用 abort），并且用户输入不应使您的程序崩溃。

但是要回答您的问题，如果定义了 NDEBUG，则 assert 什么也不做。这可能是您的程序没有按预期崩溃的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T22:40:30.187

您可以假设 assert 声明如下：

```
/*!
 * Immediately crash the program if assumption is proven invalid.
 */
void assert (bool assumption); 
```

如果您“知道”变量`t`永远不会超出范围 [1, 10] 因为**您编写了代码并且您的代码不可能产生任何其他值**，那么*断言*该语句是合适的。

# 断言显而易见的事情

考虑以下断言的使用：

```
int t = 9;
assert (9 == t);   // A very valid assertion, if a little pedantic. 
```

上面的代码看起来应该是显而易见的。断言的表达式（显然）*是*正确的，但更重要的是，**任何其他结果都是 insane**。学习这`t != 9`将消除你对 C++ 如何工作、计算机如何执行数学和存储值、我们是否存在或意识是否只是由如此多的加重电子形成的幻觉的所有假设......</p>

但这就是断言的价值。

即便如此，计算机对于所有实际目的都是 100% 确定性的，“疯狂”的事情*确实*会发生。这也并不罕见。事实上，我们在代码中*显式地*写入断言以检测这些情况并让我们有机会弄清楚发生了什么。**在这里考虑一些疯狂行为的现实原因**。

# “疯狂”行为的原因

你的断言*应该*防止这样的错误......</p>

1.  线程同步不正确。

    ```
    int t;

    // Thread 1
    t = 9;
    assert(t == 9);

    // Thread 2
    t = 3;
    assert(t == 3); 
    ```

2.  内存管理不善。

    ```
    class X {
        void sayHello () {
            assert(this != NULL);   // An object that does not exist cannot say hello.
            std::cout << "Hello?" << std::endl;
        }
    };

    // Without the assertion, this code would actually run!
    X* x = NULL;
    x->sayHello(); 
    ```

3.  堆栈（或堆）损坏。

    （有关合理示例，请参阅[C++ 中的堆栈损坏。）](https://stackoverflow.com/questions/718503/stack-corruption-in-c)

# 不方便但不疯狂的行为：

尽管它可能会极大地改变程序的执行路径，但这些东西*不*适合断言。抛出异常，打印错误，很好地关闭程序，并负责任地清理程序的资源。**不要断言这些“失败”！**

1.  用户输入了一些荒谬的东西。

    ```
    int t;
    scanf("%d", &t);
    assert ( 0 <= t <= 10 );       // What, are you friends with this user?
                                   // You're going to let him crash your program? 
    ```

2.  某些 I/O 设备出现故障。

    ```
    int s = socket();
    // blah blah connect blah blah

    char buffer[64];
    int bytes_received = recv(s, buffer, 64, NULL);
    assert (bytes_received > 0);   // Do you know how hard it is to send a packet
                                   // from Estonia to the US?! 
    ```

这个列表是不完整的，但它应该给你一个更广泛的指南，告诉你如何（以及如何不）应用断言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T10:41:21.627

这是我期望的答案：

指定

```
#include <assert.h> 
```

在源文件开头的单独行中。

现在，只要 bool 不为真，您就可以使用 assert(bool) 来终止您的程序。

（其他答案是关于这个问题：“如何正确使用断言”）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T21:51:07.400

Assert 不返回任何内容，如果参数为 false，则程序终止。断言适用于不应该发生的情况......但您检查以防万一您误认为或类似情况。

[http://www.cplusplus.com/reference/clibrary/cassert/assert/](http://www.cplusplus.com/reference/clibrary/cassert/assert/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T21:51:51.313

```
assert( expression );​ 
```

assert 所做的是评估*表达式*，如果它评估的结果比较为 0/false，则程序终止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T08:20:23.710

解决问题的正确方法是将`scanf()`函数封装在一个知道它在做什么的函数中：

```
int AskNumberOfWidgetFrobs() {
  int count = 0;
  for(;;) // Until we get a valid number
    scanf("%d", &count);
     if (count > 0 && count <= 10) {
       return count;
    } else {
       printf("%d is not a valid number of WidgetFrobs\n", count);
    }
  }
} 
```

# php - 用php和sql上传多张图片

> ID：12886878
> 
> 赞同：2
> 
> 时间：2012-10-14T21:48:54.137
> 
> 标签：php, mysql, arrays, forms, file-upload

我是 php 新手，我正在尝试制作一个多图像上传器。我的表格如下所示：

```
<form action="" method="post" enctype="multipart/form-data">
    <p class="style2">Izberi datoteko: <br /><input type="file" name="image" multiple="multiple" /></p>
    <p class="style2">
        Izberi Album: <br />
            <select name="album_id">
                <?php 
                    foreach ($albums as $album) {
                        echo '<option value="', $album['id'] ,'">', $album['name'] ,'</option>';
                    }
                ?>
            </select>
    </p>
    <p class="style2"><input type="submit" value="Naloži Slike" /></p>
</form> 
```

在 php 方面，我做了类似的事情：

```
if (isset($_FILES['image'], $_POST['album_id'])) {
$image_name = $_FILES['image']['name'];
$image_size = $_FILES['image']['size'];
$image_temp = $_FILES['image']['tmp_name'];

$allowed_ext = array('jpg', 'jpeg', 'png', 'gif');
$a = explode('.', $image_name);
$image_ext = strtolower(end($a));

$album_id = $_POST['album_id'];

$errors = array();

if (empty($image_name) || empty($album_id)) {
    $errors[] = '<p class="style2">Nekaj manjka!</p>';
} else {

    if (in_array($image_ext, $allowed_ext) === false) {
        $errors[] = '<p class="style2">Izbrani tip datoteke ni dovoljen!</p>';
    }

    if ($image_size > 2097152) {
        $errors[] = '<p class="style2">Izbrana datoteka je prevelika! Maksimalna velikost datoteke mora biti 2mb!</p>';
    }           
}

if (!empty($errors)) {
    foreach ($errors as $error) {
        echo $error;
    }
} else {
    upload_image($image_temp, $image_ext, $album_id);
    header('Location: view_album.php?album_id='.$album_id);
    exit();
} 

} 
```

我创建了一个将图像放入数据库的函数。这个函数看起来像这样：

```
function upload_image($image_temp, $image_ext, $album_id) {
$album_id = (int)$album_id;

mysql_query("INSERT INTO `images` VALUES ('', '". $_SESSION['user_id'] ."', '$album_id', UNIX_TIMESTAMP(), '$image_ext')"); 

$image_id = mysql_insert_id();
$image_file = $image_id.'.'.$image_ext;
move_uploaded_file($image_temp, 'galerija/'.$album_id.'/'.$image_file);

create_thumb('galerija/'.$album_id.'/', $image_file, 'galerija/thumbs/'.$album_id.'/');
} 
```

这适用于仅上传一张图片。我试图为多个选择文件创建一个表单，我可以选择更多图像，但在数据库中只获取第一个图像。我试图放入`foreach()`我的脚本，但我不知道我必须在哪里以及如何放入它。那么我该如何更改我的脚本以便我可以将更多图像上传到我的数据库中？我就是想不通。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:58:18.370

A. PHP 不会像那样看到你的多个文件

代替

```
 <input type="file" name="image" multiple="multiple" /> 
```

和

```
 <input type="file" name="image[]" multiple="multiple" /> 
```

要遍历此文件，您需要类似

```
foreach ( $_FILES['image']['tmp_name'] as $key => $val ) {

    $fileName = $_FILES['image']['name'][$key];
    $fileSize = $_FILES['image']['size'][$key];
    $fileTemp = $_FILES['image']['tmp_name'][$key];

    $fileExt = pathinfo($fileName, PATHINFO_EXTENSION);
    $fileExt = strtolower($fileExt);

    // Continue
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:50:11.277

你会发现这很有帮助：

```
<?php
$target = "images/".$_FILES['image_upload']['name'];
$image_upload = mysql_real_escape_string(($_FILES['image_upload']['name']));
move_uploaded_file($_FILES['image_upload']['tmp_name'], $target);
for($i=2;$i<5;$i++)
{
if(!empty($_FILES['image_upload'.$i])):
$target = "images/".$_FILES['image_upload'.$i]['name'];
$image_upload.= ",".mysql_real_escape_string(($_FILES['image_upload'.$i]['name']));
 move_uploaded_file($_FILES['image_upload'.$i]['tmp_name'], $target);
 endif;
 }
 mysql_query("INSERT INTO `images` VALUES ('', '". $_SESSION['user_id'] ."', '$album_id', UNIX_TIMESTAMP(), '$image_upload')");
 ?> 
```

使用 ftp 在您的根目录中创建一个文件夹。将其命名为“图像”。所有图像都将上传到此文件夹。根据您的更改输入类型的名称。

编码快乐！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T21:58:20.437

将你的名字="image" 更改为 name="image[]"

例子：

```
<pre><?php print_r($_FILES); ?></pre>
<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="image[]" multiple="multiple" />
<input type="submit">
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T21:58:49.880

您收到了一张图片到数据库，因为您只发送了一张图片（不是在 foreach 循环中），但失败了：

```
upload_image($image_temp, $image_ext, $album_id); 
```

您应该以 HTML 形式添加上传图像的数组，例如：

```
<input type="file" name"image[]" multiple="multiple" />
<input type="file" name"image[]" multiple="multiple" /> 
```

并接收一个图像循环：

```
if (isset($_POST["image"]))
{
    $album_id = (int)$_POST['album_id'];

    foreach ($_FILES["image"] as $images)
    {

        $image_temp = $images['tmp_name'];
        $image_name = $images['name'];

        $allowed_ext = array('jpg', 'jpeg', 'png', 'gif');
        $a = explode('.', $image_name);
        $image_ext = strtolower(end($a));

        upload_image($image_temp, $image_ext, $album_id);
    }
} 
```

如果您不转储它以`var_dump($_FILES)`检查 HTML 表单中的数组。

请注意，您也是 SQL 注入的受害者！在 Stackoverflow 中阅读有关 SQL 注入的信息。

# bash - #BASH - 我如何：读取输入；var = grep $输入；如果 $input = $var 那么

> ID：12886883
> 
> 赞同：1
> 
> 时间：2012-10-14T21:49:26.087
> 
> 标签：bash, grep

我想比较用户在这个文本文件中输入的内容，以确定他们输入的内容是否在文本文件中，然后告诉他们。

file1: color_readme.txt 在这个文件中是：

```
red
red
orange
blue 
```

代码：

```
echo Please enter a color:
cat color_readme.txt (printing the colors to screen)
read userinput (read what the user enters)
variable1 = grep $userinput (a random variable = what is found in the file according to what the user typed)
if userinput = variable1 (SAY THIS)
else (SAY THIS) 
```

对于初学者来说，最好的方法是什么？我的老师只希望我使用基本的 ifelse 和 else 条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:58:33.800

```
echo "Pick one of the colours below:"
cat colour_readme.txt
read i
if x=$(grep "$i" colour_readme.txt)
then echo "You picked $i and it appears in colour_readme.txt as $x"
else echo "You picked $i but it does not appear in colour_readme.txt"
fi 
```

您可以在不使用`test`（或`[`或`[[`）运算符的情况下测试命令的状态；它们只是返回退出状态的特殊命令，可以通过`if`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:58:28.227

```
answer="Wrong"
realcolour=`cat ./color_readme.txt`

Until [ $answer = "Correct" ] ; Do
echo -n "Please enter a colour:"
read usercolour

If [ $usercolour = $realcolour ] ; Then
     answer="Correct"
Else
     answer="Wrong"
Fi

echo $answer
Done 
```

编辑：...上面是在 OP 澄清文本文件中的多种颜色之前编写的...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T22:10:52.177

```
echo "name a color"
read i
grep -q $i color.txt
if [ $? == 0 ]
then
echo "$i is in the file"
else
echo "$i is not in the file"
fi 
```

"if [ $? == 0 ]" 测试前一个命令的退出状态，在本例中是 grep。如果 grep 找到了某些东西，它的退出状态将为 0，如果没有，则退出状态为 1。

# xpath - XPATH 1.0 相当于 SQL 中的 ALL

> ID：12886888
> 
> 赞同：2
> 
> 时间：2012-10-14T21:49:57.280
> 
> 标签：xpath

XPATH 1.0 相当于在 SQL 中使用嵌套查询和“ALL”关键字。例如，考虑以下代码段。

```
<parent> a <child gender = "male">b</child>
<child gender = "female>c</child></parent>
<parent> z <child gender = "male"> y </child></parent> 
```

我应该如何检索所有孩子都具有性别 =“男性”的节点。这可以在 SQL 中通过编写一个子查询来返回孩子的性别，然后用 ALL 关键字嵌套它以检查所有孩子是否都是男性来完成。

Q2 另外，我如何检索所有只有一个（男性）孩子的父母。还要考虑父节点可能有其他节点。计算父母有名字“孩子”的孩子的数量，并检查孩子是否是我正在考虑解决问题的方式。这是最好的方法还是有更好的方法？

注意：在我的作业中，我面临一个需要类似查询的问题。我试图自己找到答案，但找不到。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:09:09.053

ALL：选择有孩子但没有非男性孩子的父母：

```
//parent[child and not child[@gender!="male"]] 
```

选择只有一个男孩的父母 - 选择只有一个孩子且有男孩的父母：

```
//parent[count(child)=1 and child[@gender="male"]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T23:05:19.577

```
How should i retrieve nodes where ALL children have gender = "male". 
```

**使用**：

```
/*/parent[child
        and
          (not(child[not(@gender) or not(@gender='male')]))
         ] 
```

**这将选择所有`parent`元素**：

1.  是 XML 文档顶部元素的子元素，并且

2.  生个`child`孩子，然后

3.  其所有`child`孩子都有一个`gender`属性，并且

4.  其所有`child`子`gender`属性的字符串值为“男”

在这里，我们使用了非常通用和有用[**的双重否定定律**](http://en.wikipedia.org/wiki/Double_negation)

**你的第二个问题**：

> Q2 另外，我如何检索所有只有一个（男性）孩子的父母。

**使用**：

```
/*/parent[child[@gender='male']
        and
          not(child[2])
         ] 
```

**这选择**：

1.  作为 XML 文档顶部元素的子元素的任何`parent`元素，以及

2.  有一个`child`孩子，其`gender`属性的字符串值为“男性”，并且

3.  那是没有第二个`child`孩子。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "/*/parent[child
           and
            (not(child[not(@gender) or not(@gender='male')]))
            ]"/>
  ==========

  <xsl:copy-of select=
  "/*/parent[child[@gender='male']
           and
             not(child[2])
            ]"/>

 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的文档，已扩展以使其更具代表性）时：

```
<t>
    <parent> a
        <child gender="male">b</child>
        <child gender="female">c</child>
        <child gender="female">d</child>
    </parent>
    <parent> e
        <child gender="male">f</child>
        <child gender="male">g</child>
        <child gender="female">h</child>
    </parent>
    <parent> z
        <child gender="male">x</child>
        <child gender="male">y</child>
    </parent>
    <parent> t
        <child gender="male">u</child>
    </parent>
</t> 
```

**计算两个 XPath 表达式，并将这些计算的结果（选定元素）复制到输出**：

```
<parent> z
        <child gender="male">x</child>
   <child gender="male">y</child>
</parent>
<parent> t
        <child gender="male">u</child>
</parent>
  ==========

  <parent> t
        <child gender="male">u</child>
</parent> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:37:15.230

> 我应该如何检索所有孩子都具有性别 =“男性”的节点。

一些受访者将此解释为意味着必须至少有一个孩子。但是您要求等效于 SQL 的 ALL 运算符，我相信在 SQL 中（如在数学逻辑中），如果应用于空集，则 ALL 返回 true。（所有的独角兽都有两个角——给我看一个没有的。）

因此，我认为对您的问题的严格回答将删除 Dimitre 在他的回答中包含的“孩子和”。但 Dimitre 可能猜对了，你所要求的并不是你真正想要的。

# mysql - 从单个日期时间列创建开始列和结束列

> ID：12886890
> 
> 赞同：0
> 
> 时间：2012-10-14T21:50:17.960
> 
> 标签：mysql

我想从名为 tbl 的表中的单个 MySQL 日期时间列中选择一个开始列和一个结束列。有什么建议么？

我从什么开始：

```
+---------------------+
|      date_time      |
+---------------------+
| 2012-03-05 10:15:52 |
| 2012-03-05 10:15:53 |
| 2012-03-05 10:15:54 |
+---------------------+ 
```

想要的结果：

```
+---------------------+---------------------+
|     start_time      |      end_time       |
+---------------------+---------------------+
| 2012-03-05 10:15:52 | 2012-03-05 10:15:53 |
| 2012-03-05 10:15:53 | 2012-03-05 10:15:54 |
+---------------------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T21:55:09.013

```
SELECT   cur.date_time AS start_time, MIN(nxt.date_time) AS end_time
FROM     my_table AS cur JOIN my_table AS nxt ON nxt.date_time > cur.date_time
GROUP BY cur.date_time 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f2207/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:05:43.500

```
select end_time.date_time as [start], 
    (select 
    min(date_time) -- select smallest value from

    from da start_time --another table instance which i called start_time

        -- taking datetimes earlier than start 
    where start_time.date_time > end_time.date_time

    ) as [end]

from da end_time -- table instance with start time

--dont take last value (end time for that value will be null)
where 
    end_time.date_time < (select max(date_time) from da) 
```

我的桌子：

```
TABLE [da]
Id  date_time
1   2012-03-05 10:15:52.000
2   2012-03-05 10:15:53.000
3   2012-03-05 10:15:54.000 
```

我的结果：

```
start                   end
2012-03-05 10:15:52.000 2012-03-05 10:15:53.000
2012-03-05 10:15:53.000 2012-03-05 10:15:54.000 
```

# python - 如何用python解析json？

> ID：12886895
> 
> 赞同：-1
> 
> 时间：2012-10-14T21:50:56.427
> 
> 标签：python, json, parsing

我正在尝试使用 python 解析一些 json 数据，并且在遍历不同的项目时遇到了麻烦。看起来所有数据都在一个列表中，并且整个列表中的每个项目都有一个不同的字典。这是我到目前为止所拥有的：

```
try:
        f = urllib.urlopen("http://www.reddit.com/r/videos/top/.json");
    except Exception:
        print("ERROR: malformed JSON response from reddit.com")
    reddit_posts = json.loads(f.read().decode("utf-8"))["data"]["children"][0]
    print reddit_posts["data"]["media"]["oembed"]["url"] 
```

我可以显示第一个 url，但我不确定如何迭代所有项目并显示 url。有什么建议吗？

此外，这是我试图解析的 json 格式更好的视图：http: [//jsonviewer.stack.hu/#http ://www.reddit.com/r/videos/top/.json](http://jsonviewer.stack.hu/#http://www.reddit.com/r/videos/top/.json)

编辑：我尝试了 for 循环，但在实现它时遇到了麻烦。

```
for entry in reddit_posts:
    print entry[0] #only prints the first character of entry ('k' and 'd')
    print entry["data"] #get an error: string indices must be integers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:47:19.790

当您`[0]`对`["children"]`JSON 结果进行操作时，您只选择了一篇文章。

因此，要获取*所有*帖子，请不要使用`[0]`：

```
reddit_posts = json.loads(f.read().decode("utf-8"))["data"]["children"] 
```

现在您可以遍历所有这些：

```
for post in reddit_posts:
    print post["data"]["media"]["oembed"]["url"] 
```

# java - 如何使用 JDOM 通过其属性的值获取元素？

> ID：12886897
> 
> 赞同：5
> 
> 时间：2012-10-14T21:51:04.200
> 
> 标签：java, xml, dom, jdom

我有一个类似以下的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
   <admins>
       <url name="Writer Admin">http://www.mywebsite.com/admins?cat=writer</url>
       <url name="Editor Admin">http://www.mywebsite.com/admins?cat=editor</url>
   </admins>
   <users>
      <url name="Critic User">http://www.mywebsite.com/users?cat=critic</url>
      <url name="Reviewer User">http://www.mywebsite.com/users?cat=reviewer</url>
      <url name="Reader User">http://www.mywebsite.com/users?cat=reader</url>
   </users>
</config> 
```

如何使用 Java 中的 JDOM 库通过其“名称”属性的值来选择“url”元素？是否有任何直接的方法，或者我必须选择所有子元素并使用“for”循环检查所需的元素？有没有像.Net中的Linq这样的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:19:49.777

XPath 是您的朋友……如果您使用的是 JDOM 2.x，它比 JDOM 1.x 更容易，因此，int JDOM 2.x 将类似于：

```
String query = "//*[@name= 'Critic User']";
XPathExpression<Element> xpe = XPathFactory.instance().compile(query, Filters.element());
for (Element urle : xpe.evaluate(mydoc)) 
{
    System.out.printf("This Element has name '%s' and text '%s'\n",
          urle.getName(), urle.getValue());
} 
```

XPath 是一个“不同的野兽”，但它使一些东西（像这样）变得更容易编写。

上面的“查询”基本上是说：查找文档中具有名为“name”的属性的所有元素，name 属性的值为“Critic User”。

适应口味，并阅读 XPath 教程：[http ://www.w3schools.com/xpath/default.asp](http://www.w3schools.com/xpath/default.asp)

编辑：当然，更好的查询是：//url[@name='Critic User']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T17:35:15.820

非常感谢。我刚刚注意到 rolfl 在 compile 方法中颠倒了参数顺序。`XPathFactory.instance().compile(query, Filters.element());` 然而，而不是`XPathFactory.instance().compile(Filters.element(), query);` 好工作......

# python - 广度优先搜索 - 为什么我的队列被清空？

> ID：12886902
> 
> 赞同：0
> 
> 时间：2012-10-14T21:51:34.440
> 
> 标签：python, algorithm, artificial-intelligence

我有从队列中获取父节点的代码，检查它是否已被访问，如果没有，则生成其子节点，将它们推送到队列，并重复循环，从队列中获取下一个父节点先进先出的时尚。不幸的是，似乎我从未达到我的目标状态。我实施 BFS 的方式在结构上是否有问题？我使用堆栈而不是队列来创建 DFS 搜索，并使用相同的确切代码获得了我想要的输出。将“q”更改为队列 (FIFO) 数据结构实际上是我对这段代码所做的唯一更改。还有什么我应该补充的吗？父母/孩子存储为元组，因此请随意忽略所有这些工作——这似乎不是问题所在。此外，程序在 isGoalState 评估为 True 之前中断，因此代码不会 t 似乎也导致了这个问题。isGoalState 测试给定状态的坐标是否与 BFS 需要找到的“目标”匹配。getSuccessors 返回一个元组列表，每个元组代表节点的一个子节点。

```
while q:
        parent = q.pop()
        print "parent: " + str(parent)
        print str(q)
        if parent[0] in visited: continue
        visited.append(parent[0])
        if problem.isGoalState(parent[0]):
            pathList.append(parent[0])
            while actionMap[parent] is not None:
                actionList.append(actionMap[parent])
                try:
                    pathList.append(parentMap[parent])
                except KeyError:
                    break
                parent = parentMap.get(parent, None)
            actionList.reverse()
        children = problem.getSuccessors(parent[0])
        if children != []:
            for child in children:
                q.push(child)
                parentMap[child] = parent
                actionMap[child] = child[1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:14:34.950

好吧，我的朋友们，这个案子已经结案了。在我从 DFS 到 BFS 的转换表格中的某个地方，在 isGoalState 条件中的 while 循环完成后，我省略了一个 return 语句。那真是白费了很多脑筋。

# ios - 如何在iphone中查找文件？

> ID：12886904
> 
> 赞同：0
> 
> 时间：2012-10-14T21:51:47.090
> 
> 标签：ios, ios5, ios6

我正在将我的数据保存在 iPhone 中。我怎样才能找到以下 txt 文件？

任何想法？

我的文件保存在以下目录中：

/var/mobile/Applications/366D42D4-5817-4007-831B-1A6EB929AF8E/Documents/Annotation1.txt

我的问题是如何找到已经保存在 iphone 中的 txt 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:56:49.600

您可以通过执行以下操作访问 Documents 目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

然后，您将附加文件名：

```
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Annotation1.txt"]; 
```

这为您提供了文件的路径。但是，如果您不知道这一点，您是如何保存文件的呢？

编辑：原来 OP 希望通过 iTunes 提供对 Documents 目录中文件的访问。这是通过将“应用程序支持 iTunes 文件共享”键添加到 Info.plist 来完成的。该值应该是一个值为 YES 的布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:11:38.710

将您的设备连接到计算机。

运行 Xcode。

打开管理器（窗口->管理器）

选择设备选项卡，然后在左侧选择您的设备

您应该会看到如下内容：

我的Ipad

*   配置文件
*   应用
*   安慰
*   设备日志
*   截图

选择应用程序

选择保存您感兴趣的数据的应用程序

在最后一行单击下载并将存档文件保存到桌面

您可以通过右键单击和“显示包内容”打开存档文件

# generics - TypeScript 中的泛型

> ID：12886916
> 
> 赞同：16
> 
> 时间：2012-10-14T21:53:19.017
> 
> 标签：generics, typescript

除了使用类型化数组之外，有没有办法在 TypeScript 中用另一种类型参数化一个类型？

KnockoutJs 真的很有必要。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T22:24:23.287

尽管正在考虑泛型，但目前还不支持泛型。这是规范必须说的：

> 注意：TypeScript 目前不支持泛型，但我们希望将它们包含在最终语言中。由于 TypeScript 的静态类型系统没有运行时表现形式，因此泛型将基于“类型擦除”，并且纯粹用作在接口、类和函数签名中表达参数类型关系的管道。

来自第 3 节末尾的 TypeScript 语言规范。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-25T18:54:50.083

泛型终于来了：http: [//blogs.msdn.com/b/typescript/archive/2013/06/18/announcing-typescript-0-9.aspx](http://blogs.msdn.com/b/typescript/archive/2013/06/18/announcing-typescript-0-9.aspx)

截至目前，它处于测试阶段，因此请谨慎使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:44:13.117

我正在使用一个相当肮脏的解决方法。可以将类分配给任何类型的变量。此代码有效：

```
class A{}
var test:any=A;
var a=new test(); 
```

因此，您可以通过添加另一个类型为 any 的参数来参数化您的方法

```
function(param:any){
    var test=new param();
    test.someFunction();
} 
```

当然，这是非常糟糕的风格，可能不推荐。但对我来说，它将涵盖泛型包含在语言中的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-17T08:53:48.070

对于像我这样遇到这个问题的人来说，既然我们在 TypeScript 中有泛型，这里有更多信息，包括 Typescript 网站上泛型官方文档的链接，因为这很好地解释了它，希望始终保持最新进行更改时，并显示示例用法：

[https://www.typescriptlang.org/docs/handbook/generics.html](https://www.typescriptlang.org/docs/handbook/generics.html)

泛型允许创建可以在多种类型而不是单一类型上工作的组件。

如官方文档所示，标识函数是泛型在工作中最基本的说明。身份函数是一个函数，它将返回传入的任何内容。

以下是我们在泛型之前的选择：

```
// without Generics option 1 - explicitly define and get tied to a single type.  
function identity(arg: number): number {
    return arg;
}

// without Generics option 2 - use the 'any' type 
// but lose type information on the incoming arg by the time we return it.
function identity(arg: any): any {
    return arg;
} 
```

以下是它与泛型一起使用的方式：

```
// with Generics - use a type variable T that works on types rather than values. 
// Captures the type of incoming arg so we can use it again in the return type
function identity<T>(arg: T): T {
    return arg;
}

// can call it with explicit setting of T to be a given type ('string' here)
let output = identity<string>("myString");  // type of output will be 'string'

// However can also call it without this explicit typing and the compiler will 
// infer the type. Note this won't always work for more complex Generics usage
let output = identity("myString");  // type of output will be 'string' 
```

# python - UnicodeEncodeError：“ascii”编解码器无法在位置 0 编码字符 u'\xc7'：写入 .csv 时

> ID：12886918
> 
> 赞同：1
> 
> 时间：2012-10-14T21:53:28.717
> 
> 标签：python

我有这个代码：

```
#!/usr/local/bin/python
# -*- coding: utf-8 -*-

import re
import urllib2
import BeautifulSoup
import csv

origin_site = 'http://typo3.nimes.fr/index.php?id=annuaire_assos&theme=0&rech=&num_page='

get_url = re.compile(r"""window.open\('(.*)','','toolbar=0,""", re.DOTALL).findall

pages = range(1,2)

for page_no in pages:
    req = ('%s%s' % (origin_site, page_no))
    user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
    headers = { 'User-Agent' : user_agent }
    try:
        urllib2.urlopen(req)
    except urllib2.URLError, e:
        pass 
    else:
        # do something with the page
        doc = urllib2.urlopen(req)
        soup = BeautifulSoup.BeautifulSoup(doc)
        infoblock = soup.findAll('tr', { "class" : "menu2" })
        for item in infoblock:
            assoc_data = []
            soup = BeautifulSoup.BeautifulSoup(str(item))
            for tag in soup.recursiveChildGenerator():
                if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('td'):
                    if tag.string is not None:
                        assoc_name = (tag.string)
                if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('u'):
                    if tag.string is not None:
                        assoc_theme = (tag.string)

            get_onclick = str(soup('a')[0]['onclick']) # get the 'onclick' attribute
            url = get_url(get_onclick)[0]

            try:
                urllib2.urlopen(url)
            except urllib2.URLError, e:
                pass 
            else:
                assoc_page = urllib2.urlopen(url)
                #print assoc_page, url
                soup_page = BeautifulSoup.BeautifulSoup(assoc_page)
                assoc_desc = soup_page.find('table', { "bgcolor" : "#FFFFFF" })
                #print assoc_desc
                get_address = str(soup_page('td', { "class" : "menu2" }))
                soup_address = BeautifulSoup.BeautifulSoup(get_address)
                for tag in soup_address.recursiveChildGenerator():
                    if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('a'):
                        if tag.string is not None:
                            assoc_email = (tag.string)
                assoc_data.append(assoc_theme)
                assoc_data.append(assoc_name)
                assoc_data.append(assoc_email)
                for tag in soup_address.recursiveChildGenerator():
                    if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('td'):
                        if tag.string is not None:
                            if tag.string != '&nbsp;':
                                get_string = BeautifulSoup.BeautifulSoup(tag.string)
                                assoc_data.append(get_string)
                                #data.append(get_string)

            c = csv.writer(open("MYFILE.csv", "wb"))
            for item in assoc_data:
                c.writerow(item) 
```

但得到这个错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xc7' in position 0: ordinal not in range(128) 
```

如何将法语字符传递到 MYFILE.csv 文件中？我可以进一步改进代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:22:01.340

问题是我没有正确使用 unicode，这是最新的代码

```
#!/usr/local/bin/python
# -*- coding: utf-8 -*-

import urllib2
import BeautifulSoup
import csv

origin_site = 'http://typo3.nimes.fr/index.php?id=annuaire_assos&theme=0&rech=&num_page='

pages = range(1,21)

assoc_table = []

for page_no in pages:
    print page_no
    req = ('%s%s' % (origin_site, page_no))
    user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
    headers = { 'User-Agent' : user_agent }
    try:
        doc = urllib2.urlopen(req)
    except urllib2.URLError, e:
        pass 
    else:
        # do something with the page    
        soup = BeautifulSoup.BeautifulSoup(doc)
        for row in soup.findAll('tr', { "class" : "menu2" }):
            assoc_data = []
            item = row.renderContents()
            soup = BeautifulSoup.BeautifulSoup(item)
            # we get the Thème
            for assoc_theme in soup.findAll('u'):
                assoc_data.append(assoc_theme.renderContents())
            # we get the Nom de l'association
            for assoc_name in soup.findAll('td', { "width": "70%"}):
                assoc_data.append(assoc_name.renderContents())
            # we list all the links to the indivudual pages
            for i in soup.findAll('a', {'href':'#'}):
                if 'associations' in i.attrMap['onclick']:
                    req = i.attrMap['onclick'].split('\'')[1]
                    try:
                        doc = urllib2.urlopen(req)
                    except urllib2.URLError, e:
                        pass
                    else:
                        soup = BeautifulSoup.BeautifulSoup(doc)
                        emails = []
                        web_sites = []
                        for tag in soup.recursiveChildGenerator():
                            if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('a'):
                                assoc_link = (tag.string)
                                if '@' in str(assoc_link):
                                    print assoc_link
                                    emails.append(assoc_link)
                        if emails != []:
                            assoc_data.append(emails[0])
                        else:
                            assoc_data.append('pas du email')
                        for tag in soup.recursiveChildGenerator():
                            if isinstance(tag,BeautifulSoup.Tag) and tag.name in ('a'):
                                assoc_link = (tag.string)
                                if 'http' in str(assoc_link):
                                    web_sites.append(assoc_link)
                            #
                        if web_sites != []:
                            assoc_data.append(web_sites[0])
                        else:
                            assoc_data.append('pas du site web')
                        assoc_addr = [] 
                        assoc_cont = soup.findAll('td', { "width" : "49%", "class": "menu2" })
                        for i in assoc_cont:
                            assoc_addr.append(i.renderContents())
                        assoc_tels = []
                        for addr in assoc_addr:
                            assoc_data.append(addr)
                        assoc_tel = soup.findAll('td', { "width" : "45%", "class": "menu2" })
                        for i in assoc_tel:
                            assoc_tels.append(i.renderContents())
                        assoc_data.append(assoc_tels[0])
                        print assoc_tels[0]
            assoc_table.append(assoc_data)
            print assoc_data
print assoc_table
c = csv.writer(open("nimes_assoc.csv", "wb"))
for item in assoc_table:
    #print item
    c.writerow(item) 
```

感谢您的所有帮助以及来自utor@python.org 邮件列表的帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T22:24:33.220

看起来 urllib2 的结果是 unicode，但 CSV 模块不兼容 Unicode，但兼容 8 位。

相反，您必须在编写每个字符串之前将其转换为 UTF-8。例如：

```
 c = csv.writer(open("MYFILE.csv", "wb"))
       for item in assoc_data:
         # Ensure item is an object and not an empty unicode string
         if item and item != u'':
           c.writerow([item.encode("UTF-8")]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T23:41:23.627

滚动到底部： http: [//docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

具体来说，使用这个作家：

```
class UnicodeWriter:
    """
    A CSV writer which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.writer(self.queue, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow([s.encode("utf-8") for s in row])
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row) 
```

然后，而不是

```
c = csv.writer(open("MYFILE.csv", "wb")) 
```

利用

```
c = UnicodeWriter(open("MYFILE.csv", "wb")) 
```

# html - 下拉导航框

> ID：12886920
> 
> 赞同：0
> 
> 时间：2012-10-14T21:53:39.450
> 
> 标签：html, css, drop-down-menu, uinavigationbar

我正在尝试从我已经拥有的导航栏中创建一个“悬停下拉”导航框。

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="<?php echo $this->url('home') ?>"><?php echo $this->translate('Skeleton Application') ?></a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li><a href="<?php echo $this->url('home') ?>"><?php echo $this->translate('Home') ?></a>
                    </li>
                    <li><a href="<?php echo $this->url('zfcuser') ?>"><?php echo $this->translate('My Account') ?></a>
                        <ul>
                            <li><a
                                href="<?php echo $this->url('zfcuser/change-password') ?>"><?php echo $this->translate('Change Password') ?></a>

                            <li><a href="<?php echo $this->url('zfcuser/change-email') ?>"><?php echo $this->translate('Change Email') ?></a>

                        </ul></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div> 
```

它的 CSS 会是什么样子？我脑子里有一些东西，但在实践中并没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:52:36.167

这是一个具有极少 CSS的[JSFiddle ，可为您提供下拉功能。](http://jsfiddle.net/VMh9U/)

你可以在[这个 Github](https://github.com/jmeas/CSS3-Dropdown-With-Fade)上查看更多功能，比如淡入淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T01:20:10.690

如果你想要纯 CSS，你可以使用经典的 Suckerfish 之子：http: [//htmldog.com/articles/suckerfish/](http://htmldog.com/articles/suckerfish/)

```
.nav-collapse, .nav-collapse ul {
  padding: 0;
  margin: 0;
  list-style: none;
}

.nav-collapse a {
  display: block;
  width: 10em;
}

.nav-collapse li {
  float: left;
  width: 10em;
}

.nav-colapse li ul {
   position: absolute;
   width: 10em;
   left: -999em;
}

.nav-collapse li:hover ul {
   left: auto;
} 
```

# wordpress - wp根据类别附加图像

> ID：12886922
> 
> 赞同：1
> 
> 时间：2012-10-14T21:53:49.143
> 
> 标签：wordpress, function

我有这个功能来按类别显示图像：

```
/*default thumbnails for posts if no thumbnail is set, based on the selected category*/
add_filter('genesis_get_image', 'default_thumb'); 
function default_thumb($output) { 
if(!$output) { 
$default_cat_thumbs = array( 
'now' => 'now.jpg', 
'news' => 'Volleyball-Club_Leipzig.gif'); 
foreach((get_the_category()) as $category) { 
if (array_key_exists($category->slug, $default_cat_thumbs)) { 
$url = 'http://www.mepanorama.com/wp-content/images/'.$default_cat_thumbs[$category->slug]; 
$output = '<img width="120" height="140" src="'.$url.'" class="alignleft" alt="" title="" />'; 
} 
} 
} 
return $output; 
} 
```

例如，非常适合在我的存档页面中显示“现在”类别的图像。像这儿

[http://www.mepanorama.com/category/now/](http://www.mepanorama.com/category/now/)

但我想在帖子中显示此类别的图像，问题是我的永久链接不包括类别，所以有没有办法从我的面包屑中提取类别名称？

示例帖子 [http://www.mepanorama.com/180193/test/](http://www.mepanorama.com/180193/test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:58:49.333

您可以使用 in_category 测试帖子是否属于某个类别：

```
if (in_category( "now")) :
    // do stuff
end 
```

您还可以使用 get_the_category() 检索特定帖子的所有类别。

```
foreach((get_the_category()) as $category) :
    echo '<img src="http://www.mepanorama.com/wp-content/images/' . $category->cat_ID . '.jpg\" />'; 
end 
```

希望有帮助。

# android - Android - 如何在暂停时重新启动活动（或将其置于前面）

> ID：12886927
> 
> 赞同：2
> 
> 时间：2012-10-14T21:54:36.017
> 
> 标签：android, android-intent, onpause

我正在为平板电脑（android 4.0.3）开发一个必须在公共场所（餐厅、酒吧等）使用的应用程序。

我需要做的是阻止用户退出应用程序，因此`onPause`当应用程序进入后台时，我会覆盖重新启动活动的方法（例如：按下主页）

```
protected void onPause() {
    super.onPause();
    Intent intent = new Intent(this, RivendesiActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.setAction(Intent.ACTION_MAIN);
    startActivity(intent);
} 
```

我的问题是，当我单击主页按钮时，应用程序重新启动但仅在 3-4 秒后重新启动.. 所以用户有时间单击应用程序按钮-> 设置，如果有.. 我不知道为什么.. 我的应用程序没有不要重启。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:18:29.837

您只需要通过将以下内容添加到您的活动来禁用主页键效果。

```
@override
public void onAttachedToWindow(){  
   this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
   super.onAttachedToWindow();  
} 
```

PS 不推荐这种方法，它违反了活动的正常行为。所以当你认真的时候使用它:)

# php - 使用 PHP，list() 是否可以附加到数组上？

> ID：12886947
> 
> 赞同：4
> 
> 时间：2012-10-14T21:57:28.113
> 
> 标签：php, foreach

我有一个正在迭代的 foreach 循环。我正在尝试将变量“分解”成碎片，然后使用 list() 附加到相应的数组中，如下所示：

```
list($a[], $b[], $c[]) = explode(':', $loop); 
```

list() 可以不这样做吗？它与

> 致命错误：字符串不支持 [] 运算符

我想我可以在 list() 中使用临时变量，然后将它们附加到相应的数组中，如下所示：

```
foreach($array as $loop) {
    list($a1, $b2, $c3) = explode(':', $loop);

    $a[] = $a1;
    $b[] = $b2;
    $c[] = $c3;
} 
```

这是否有更好/更有效的方法来执行此操作（例如完全使用 list()）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:12:37.823

该[`list`](http://php.net/list)构造需要一个有效的变量表达式，例如数组和索引：

```
foreach ($array as $i => $loop) {
    list($a[$i], $b[$i], $c[$i]) = explode(':', $loop);
} 
```

然后一切正常。[演示](http://codepad.org/uyVoCVUT)。

此外，如果这实际上是数组，它也可以工作：

```
$a = $b = $c = array();

foreach ($array as $loop) {
    list($a[], $b[], $c[]) = explode(':', $loop);
} 
```

[演示](http://codepad.org/04VvcYTc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:11:12.990

是的，你可以..只需添加`Index`不初始化变量

```
list($a[0], $b[0], $c[0]) = explode(":","A:B:C") ;
var_dump($a,$b,$c); 
```

或初始化变量

```
$a = $b = $c = array();
list($a[], $b[], $c[]) = explode(":","A:B:C") ;
var_dump($a,$b,$c); 
```

输出

```
array
  0 => string 'A' (length=1)
array
  0 => string 'B' (length=1)
array
  0 => string 'C' (length=1) 
```

# python - Python字符串替换特殊字符

> ID：12886949
> 
> 赞同：1
> 
> 时间：2012-10-14T21:57:54.483
> 
> 标签：python, string, replace, special-characters

我需要用空格替换“-”（但连续不超过1个，并删除开头和结尾的所有内容）并删除任何其他特殊字符，例如：

```
 "Example-1" ---> "Example 1"  
    "Example - 2"---> "Example 2"  
    "Ex amp le-(3)"--->"Ex amp le 3"  
    "--Example%s,,4 "--->"Examples4" 
```

解决

（我必须编辑这个问题，因为我只有 8 个声誉，而且我在 5 个多小时内无法回答我自己的问题）

我这样解决了这个问题：

```
 my_string = re.sub('[^\w -]', '', my_string).replace('-', ' ').strip(' ')
 subsMade = 1
 while subsMade > 0:
     (my_string, subsMade) = re.subn('  ', ' ', my_string) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T22:29:06.350

我同意zigg，你需要reg ex。您可以在这里找到一个温和的介绍：[http](http://www.diveintopython.net/regular_expressions/index.html#re.intro) ://www.diveintopython.net/regular_expressions/index.html#re.intro （查看“街道地址”案例研究，它与您想要做的事情有一些相似之处）。

**编辑：**

我不是注册专家，但是...

```
import re

pattern = "[- ]+"
re.sub(pattern, " ", your_string) 
```

这将解析您的前两个示例。我不确定你需要的一切是否可以在一个模式中完成......愿一些智者出现。

# wpf - 字体对齐关闭

> ID：12886950
> 
> 赞同：1
> 
> 时间：2012-10-14T21:58:00.367
> 
> 标签：wpf, xaml, layout, styles

我期望网格中同一行上的两种不同字体样式在网格行的底部对齐，但如您所见，它没有发生！

有人看到我需要改变什么吗？

干杯，
绿柱石

# 问题

![在此处输入图像描述](../Images/5b46bb8638b1b60bdee1434475fd6fe1.png)

# 网格

```
<Grid ShowGridLines="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Label Grid.Column="0" Grid.Row="0" Style="{StaticResource SubjectStyle}" .../>
        ...
        <TextBlock Grid.Column="2" Grid.Row="0" Style="{StaticResource DisplayNameStyle}" .../>
        ...
</Grid> 
```

# 主题风格

```
<Style x:Key="SubjectStyle" TargetType="{x:Type Label}">
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontSize" Value="10" />
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Bottom" />
    <Setter Property="VerticalAlignment" Value="Bottom" />
    <Setter Property="Width" Value="75" />
</Style> 
```

# 显示名称样式

```
<Style x:Key="DisplayNameStyle" TargetType="{x:Type TextBlock}">
    <Setter Property="FontSize" Value="16" />
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalAlignment" Value="Bottom" />
    <Setter Property="MinWidth" Value="75" />
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:45:45.627

的`Label`默认`Padding`值为 5。`TextBlock's`默认值为 0。只需为样式中`Padding`的属性添加一个 setter 。`Padding`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:41:19.600

在运行时在 Chrome 中启动它，然后按 F12 来检查元素。可能有一些边距或其他影响标签的问题不会影响您的文本块。

另外：为什么是标签，而不是两者的文本块？

最坏的情况是，在其中一个或另一个中添加一个边距，以确保它们排列整齐并跨浏览器进行验证。

# alignment - Soundcloud 关注按钮与 addthis 关注按钮不对齐

> ID：12886955
> 
> 赞同：1
> 
> 时间：2012-10-14T21:58:23.143
> 
> 标签：alignment, soundcloud, addthis

我想添加到我的 addthis 跟随按钮的自定义 soundcloud 按钮有问题。不幸的是，addthis 本身并不支持 soundcloud follow，所以我试图手动将它插入到 addthis 工具箱中。

我遇到的问题是 soundcloud 按钮在其他跟随按钮的末尾没有正确排列。addthis 帮助网站说应该可以在他们的工具箱中添加一个自定义按钮。我使用的图像与 addthis 自动生成的按钮大小相同。任何帮助将不胜感激。

这是它的样子：http: [//imgur.com/d6w4Y](http://imgur.com/d6w4Y)

这是我的代码：

```
<div id="right-side-social">
<h3 style="padding: 10px 0px 10px 3px;">Follow Us!</h3>
<div class="addthis_toolbox addthis_32x32_style addthis_default_style">
<a class="addthis_button_facebook_follow" addthis:userid="xxxx"></a>
<a class="addthis_button_twitter_follow" addthis:userid="xxxx"></a>
<a class="addthis_button_youtube_follow" addthis:userid="xxxx"></a>
<a href="http://soundcloud.com/xxxx"><img border="0" src="http://www.xxxx.com/images/indexpics/soundcloud.jpg" alt="follow xxxx on soundcloud" width="32" height="32"></a>
</div>
<script type="text/javascript"src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xxxx"></script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:46:54.750

如果 Soundcloud 按钮没有正确对齐，您可以应用内联样式将其向上和向左移动，例如：

```
<a href="http://soundcloud.com/xxxx"><img border="0" src="http://www.xxxx.com/images/indexpics/soundcloud.jpg" alt="follow xxxx on soundcloud" width="32" height="32" style="margin-top:-15px;margin-left:-10px;"></a> 
```

您将需要使用 margin-top 和 margin-left 数字以使它们正确对齐。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-10T00:53:41.783

[您可以在此处](http://analogsheep.com/)查看此解决方案的外观。

*   [使用此处](https://soundcloud.com/pages/embed)找到的 SoundCloud 关注小部件。

*   使用 AddThis 类将 SoundCloud iframe 括起来：

    ```
    <a class="addthis_button_facebook_follow">SOUNDCLOUD IFRAME GOES HERE</a> 
    ```

    所以它变成：

    ```
    <a class="addthis_button_facebook_follow"><iframe allowtransparency="true" scrolling="no" frameborder="no" src="https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2Fanalogsheep&color=orange_white&size=32" style="width: 32px; height: 32px;"></iframe></a> 
    ```

*   将此行放在其他 AddThis 小部件旁边。

    ```
    <div  style="position:fixed; margin: 85px 0 0 773px; z-index: 10000; width: 250px;">
        <div class="addthis_toolbox addthis_32x32_style addthis_default_style" style="margin: 0px 0 0 80px;">
            <a class="addthis_button_facebook_follow"><iframe allowtransparency="true" scrolling="no" frameborder="no" src="https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2Fanalogsheep&color=orange_white&size=32" style="width: 32px; height: 32px;"></iframe></a>
            <a class="addthis_button_twitter_follow" addthis:userid="theanalogsheep"></a>
            <a class="addthis_button_tumblr_follow" addthis:userid="analogsheep"></a>
            <a class="addthis_button_pinterest_follow" addthis:userid="analogsheep"></a>
        </div>
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=YOUR ADDTHIS PUBLIC ID GOES HERE"></script>
    <div> 
    ```

    **重要提示：这是我在**[我的网站上](http://analogsheep.com/)工作的实际代码。**不要忘记在代码末尾更改您的 AddThis ID！！！**

# php - PHP - 将字符串与来自 HTML 文本区域输入的数组元素进行比较

> ID：12886958
> 
> 赞同：-3
> 
> 时间：2012-10-14T21:58:37.540
> 
> 标签：php, arrays, string, compare

我不明白为什么我的代码不起作用。我想将一个字符串与一个已经爆炸的数据数组进行比较，同时它正在被解析。出于某种原因，我在第一个上得到了匹配，但在其余部分上没有。我会很感激这里的任何帮助！我看了又看，但没有找到答案！

通过知道哪个数组元素与哪个字符串匹配，我可以正确存储该数据并对其执行计算。这样做的目的是根据以特定格式输入的原始调查数据创建一系列坐标。

我希望我已经解释得足够好。就像我提到的那样，我一直在寻找答案，但找不到适合我正在做的事情的答案。

感谢我得到的任何帮助，我很感激！

我试过使用 in_array 没有成功， strcmp 没有成功。

肖恩

**这是我的代码：**

```
 <?php
   $textArea = explode("\r", $_POST['textArea']);
   $i = 0;
   $j = 0;

   foreach ($textArea as $textRows) {
       $j = 0;
       $textRow = explode(",", $textRows);
       foreach ($textRow as $textItem[$i][$j]) {
           if ($j == 0) {
               if (("TR") == ($textItem[$i][$j])) {
                   echo("Traverse <br>");
               }
               if (("CP") == ($textItem[$i][$j])) {
                   echo("Control <br>");
               }
               echo("i = $i, j = $j, textItem = " . $textItem[$i][$j] . "<br>");
           }
           $j++;
        }
       $i++;
   }
   echo($textItem[9][0] . "<br>");
   echo($textItem[0][0] . "<br>");
   echo($textItem[0][3] . "<br>");
   echo($textItem[5][6] . "<br>");
   $_SESSION['textNum'] = $textItem;
   ?> 
```

**我的测试数据：**

```
CP,100,576.7873,6065.6221,12.542,CP
CP,101,6966.315,2226.4001,9.897,CP
TR,100,1.735,101,1.576,1,1.735,345.9961198,90.04410841,2964.26393,PROP
TR,100,1.735,101,1.576,2,1.735,340.6589997,90.04021446,3080.322203,PROP
TR,100,1.735,101,1.576,3,1.735,351.8639518,90.02168219,5448.892284,PROP
TR,100,1.735,101,1.576,4,1.735,0,90.02469919,5316.851375,PROP
TR,100,1.735,101,1.576,5,1.735,19.26823792,90.02318399,5441.916153,PROP
TR,100,1.735,101,1.576,6,1.735,22.77896709,89.9901807,6138.435694,PROP
TR,100,1.735,101,1.576,7,1.735,5.354105397,89.98465774,7551.171809,PROP
TR,100,1.735,101,1.576,8,1.735,0,90.00156466,6884.324702,PROP
TR,100,1.735,101,1.576,9,1.735,313.0231053,90.03002234,5137.515594,PROP
TR,100,1.735,101,1.576,10,1.735,308.3168227,90.10108781,2655.989628,PROP
TR,100,1.735,101,1.576,11,1.735,340.0064751,11.68927863,757.4152317,PROP
TR,100,1.735,101,1.576,12,1.735,4.661110613,173.921569,776.3980052,PROP
TR,100,1.735,101,1.576,13,1.735,89.44844992,89.87552303,484.2277925,PROP
TR,100,1.735,101,1.576,14,1.735,169.5580845,89.57660413,273.6283687,PROP
TR,100,1.735,101,1.576,15,1.735,273.9971744,90.03246625,331.7785889,PROP 
```

**我当前的输出：**

```
Control
i = 0, j = 0, textItem = CP
i = 1, j = 0, textItem = CP
i = 2, j = 0, textItem = TR
i = 3, j = 0, textItem = TR
i = 4, j = 0, textItem = TR
i = 5, j = 0, textItem = TR
i = 6, j = 0, textItem = TR
i = 7, j = 0, textItem = TR
i = 8, j = 0, textItem = TR
i = 9, j = 0, textItem = TR
i = 10, j = 0, textItem = TR
i = 11, j = 0, textItem = TR
i = 12, j = 0, textItem = TR
i = 13, j = 0, textItem = TR
i = 14, j = 0, textItem = TR
i = 15, j = 0, textItem = TR
i = 16, j = 0, textItem = TR
TR
CP
6065.6221
1.735 
```

**我想看到的：**

```
Control
i = 0, j = 0, textItem = CP
Control
i = 1, j = 0, textItem = CP
Traverse
i = 2, j = 0, textItem = TR
Traverse
i = 3, j = 0, textItem = TR
Traverse
i = 4, j = 0, textItem = TR
Traverse
i = 5, j = 0, textItem = TR
Traverse
i = 6, j = 0, textItem = TR
Traverse
i = 7, j = 0, textItem = TR 
```

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:33:28.590

分解`$_POST`数组`"\n"`而不是`"\r"`，如下所示：

```
$textArea = explode("\n", $_POST['textArea']);

$i = 0;

foreach ($textArea as $textRows) 
{
    $j = 0;

    $textRow = explode(",", $textRows);

    foreach ($textRow as $textItem[$i][$j]) 
    {
        if ($j == 0) 
        {
            if (("TR") == ($textItem[$i][$j])) 
            {
                echo("Traverse <br>");
            }
            if (("CP") == ($textItem[$i][$j])) 
            {
                echo("Control <br>");
            }
           echo("i = $i, j = $j, textItem = " . $textItem[$i][$j] . "<br>");
       }
       $j++;
    }
   $i++;
}

echo($textItem[9][0] . "<br>");
echo($textItem[0][0] . "<br>");
echo($textItem[0][3] . "<br>");
echo($textItem[5][6] . "<br>"); 
```

有关工作示例，请参见：[http ://codepad.viper-7.com/XltceQ。](http://codepad.viper-7.com/XltceQ)

输出：

```
Control 
i = 0, j = 0, textItem = CP
Control 
i = 1, j = 0, textItem = CP
Traverse 
i = 2, j = 0, textItem = TR
Traverse 
i = 3, j = 0, textItem = TR
Traverse 
i = 4, j = 0, textItem = TR
Traverse 
i = 5, j = 0, textItem = TR
Traverse 
i = 6, j = 0, textItem = TR
Traverse 
i = 7, j = 0, textItem = TR
Traverse 
i = 8, j = 0, textItem = TR
Traverse 
i = 9, j = 0, textItem = TR
Traverse 
i = 10, j = 0, textItem = TR
Traverse 
i = 11, j = 0, textItem = TR
Traverse 
i = 12, j = 0, textItem = TR
Traverse 
i = 13, j = 0, textItem = TR
Traverse 
i = 14, j = 0, textItem = TR
Traverse 
i = 15, j = 0, textItem = TR
Traverse 
i = 16, j = 0, textItem = TR
TR
CP
6065.6221
1.735 
```

# ajax - 自动更新重复分区

> ID：12886961
> 
> 赞同：1
> 
> 时间：2012-10-14T21:59:14.980
> 
> 标签：ajax

我有一个拍卖网站的重复 div。我想这样做，所以当有人加入拍卖时，它会自动更新重复的 div。我正在为网站上的所有自动更新 div 使用 ajax。

该网站是[http://www.Dreamybids.com](http://www.Dreamybids.com)

在主页上，您可以在自己的 pinterest 样式框中看到每个拍卖。您会看到“座位数：x | 占用的座位数：0”

每次有人参加拍卖时，公开赛都需要更新。

这是我当前的 div 代码。如何添加 ajax 调用以每 x 秒更新一次特定的拍卖 ID。

```
<? if($totalRows_moline>0)
{ ?> 
<?php do { ?>

<div class="box-shortcode box-gray" style="padding-left:15px; padding-right:15px; text-align:center; font-size:10px; padding-top:0px; padding-bottom:0px; margin-top:-1px; margin-bottom:-1px" id="seats">Seats: <?php echo $seats ?> | Seats Taken: <? if($seats>1){?><?php echo $spots ?><? }?><? if($seats<=1){?>N/A<? }?></div> <?php }} while ($row_moline = mysql_fetch_assoc($moline)); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T22:04:16.743

您需要设置暂停时间间隔：

```
setInterval() 
```

并用于更新拍卖 ID，如果您在客户端执行此操作，则使用

```
getElementById() 
```

两者都可以在这里找到：

[http://w3schools.com](http://w3schools.com)

# android - 如何在每个 ArrayList 的 TableRow 中添加 onClickListener

> ID：12886964
> 
> 赞同：2
> 
> 时间：2012-10-14T21:59:20.773
> 
> 标签：android, tablerow

我的 tablesRows 似乎没有设置 onClickListener。我将它们动态添加到 tableLayout，我将它们存储到 ArrayList 中，并且我想将每个 tablerow 设置为 onClickListener。

```
 for(TableRow i : trs)
    i.setOnClickListener(this); 
```

trs 是一个数组列表。

什么都没有发生，onClick 没有被调用。（我把 Log 看）

怎么了？是否有另一种方法将 onClickListener 放在数组列表内的 tablerows 中？

# jquery - 检测用户何时滚动到底部不起作用

> ID：12886966
> 
> 赞同：0
> 
> 时间：2012-10-14T21:59:38.807
> 
> 标签：jquery, scroll, window, height

我一直在尝试检测用户滚动何时到达底部

我有下面的代码。

```
if  ($(window).scrollTop() == ($(document).innerHeight() - $(window).height())){

     alert('22')
} 
```

这里的问题是，$(window).height() 返回的结果与 $(document).height() 相同，它比实际的窗口视口大。

我的屏幕结果约为 1280 像素。

但是 $(document).height 返回 1670，$(window).height() 也是如此。

所以 document.height - window.height 总是 0

难道我做错了什么？

我正在使用 Mac OSx Chrome。

谢谢

//////////////////////

window.innerHeight 和 document.height 解决了 Sushil 建议的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:02:07.850

这应该有效；

```
$(window).scroll(function()
{
    if($(window).scrollTop() == $(document).height() - $(window).height())
    {

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T09:58:55.617

通过这个你可以得到如果你在一些 div 或 HTML 对象下面滚动

```
 $(window).scroll(function () {
    if($(window).scrollTop()+ $(window).height() >( $(".photo").offset().top +$(".photo").outerHeight()))
    {
    //YOUR CODE 
    }
  }); 
```

# java - 删除或删除共享文件

> ID：12886968
> 
> 赞同：1
> 
> 时间：2012-10-14T21:59:45.407
> 
> 标签：java, google-app-engine, google-drive-api

我正在尝试删除或删除共享文件，就像这样

删除

```
 service.files().delete(id).execute(); 
```

垃圾

```
 service.files().trash(id).execute(); 
```

但是在删除的情况下不显示任何错误但文件没有被删除，文件仍然在我的驱动器上

在垃圾箱中出现此错误

```
 {
        "code" : 403,
        "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "The authenticated user does not have the required access to the file 1-Vt5gM2SLknnJs3nRFjWUly--nzfX1IWah-PxhLbNxo",
    "reason" : "userAccess"
  } ],
  "message" : "The authenticated user does not have the required access to the file 1-Vt5gM2SLknnJs3nRFjWUly--nzfX1IWah-PxhLbNxo"
} 
```

那么如何删除、删除或取消订阅共享文件？

提前谢谢

# css - 如何动态地将新类添加到元素中？

> ID：12886972
> 
> 赞同：29
> 
> 时间：2012-10-14T22:00:14.340
> 
> 标签：css, addclass

有什么办法可以在元素上添加一个新的 CSS 类`:hover`？

类似于 jQuery，但翻译成 CSS：

```
$(element).addClass('someclass'); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-14T22:04:14.553

简短的回答没有:)

但是您可以像这样对悬停使用相同的 CSS：

```
a:hover, .hoverclass {
    background:red;
} 
```

也许如果您解释为什么需要添加该类，可能会有更好的解决方案？

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-04-07T15:40:31.127

由于每个人都给了你 jQuery/JS 的答案，我将提供一个额外的解决方案。您的问题的答案仍然是否定的，但使用 LESS（CSS 预处理器）您可以轻松做到这一点。

```
.first-class {
  background-color: yellow;
}
.second-class:hover {
  .first-class;
} 
```

很简单，任何时候你将鼠标悬停在`.second-class`它上面都会给它所有的属性`.first-class`。请注意，它不会永久添加类，只是在悬停时。您可以在此处了解有关 LESS 的更多信息：LESS[入门](http://lesscss.org/)

这也是一种 SASS 方法：

```
.first-class {
  background-color: yellow;
}
.second-class {
  &:hover {
    @extend .first-class;
  }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-14T22:03:29.893

CSS 确实没有能力以与 JavaScript 相同的方式修改对象，所以简而言之 - 不。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-14T22:03:57.663

`:hover`是一个伪类，所以你可以把你的 CSS 声明放在那里：

```
a:hover {
    color: #f00;
} 
```

您还可以使用选择器列表将 CSS 声明应用于悬停元素或具有特定类的元素：

```
.some-class,
a:hover {
    color: #f00;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-21T03:34:31.173

为什么@Marco Berrocl 得到负面反馈，他的回答是完全正确的，使用库制作一些动画怎么样，所以我需要在悬停时调用类来元素而不是从库中复制代码，这会让我变慢。

所以我认为悬停不是答案，他应该在很多情况下使用 jquery 或 javascript

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-29T11:26:30.230

这就是你的做法：

```
var e = document.getElementById('myIdName');
var value = window.getComputedStyle(e, null).getPropertyValue("zIndex");
alert('z-index: ' + value); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-14T09:09:32.573

是的，您可以 - 首先使用 捕获事件`onmouseover`，然后使用 设置类名 [`Element.className`](https://developer.mozilla.org/en-US/docs/Web/API/Element/className)。

如果您想添加或删除类 - 使用更方便的[`Element.classList`](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList) 方法。

```
.active {
  background: red;
}
```

```
<div onmouseover=className="active">
  Hover this!
</div>
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-14T22:03:01.093

仅使用 CSS，不。您需要使用 jQuery 来添加它。

# python - 使用 Python 的 Wikipedia Scraper

> ID：12886973
> 
> 赞同：3
> 
> 时间：2012-10-14T22:00:34.890
> 
> 标签：python, nlp, beautifulsoup, urllib2, wikipedia

嗨，我正在尝试构建一个简单的维基百科报废工具，它可以让我分析文本并构建一个使用 python 的人生活中的事件时间线。我已经在网上搜索可能的方法来做到这一点，直到现在我已经能够使用 BeautifulSoup 和 urllib2 检索数据。到目前为止的代码看起来像这样：

```
from bs4 import  BeautifulSoup
import urllib2
import re
import nltk
import json

#get source code of page (function used later)
def fetchsource(url):
    source = urllib2.urlopen(url).read()
    return source

if __name__=='__main__':
    #url = "http://en.wikipedia.org/w/index.php?action=raw&title=Tom_Cruise" #works
    url="http://en.wikipedia.org/w/api.php?action=query&prop=revisions&rvprop=content&format=xml&&titles=Tom_Cruise" #works
    print url
    source = fetchsource(url)
    soup = BeautifulSoup(source)
    print soup.prettify() 
```

现在虽然我可以使用它，但是我得到的输出解析起来有点棘手，我只是想问一下是否有更好的方法或者更易于管理的语法来检索数据。请评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T23:37:55.707

您还可以使用[pywikipediabot](https://www.mediawiki.org/wiki/Manual:Pywikipediabot)获取文章 wikitext。例如，要获取 Tom Cruise 的 wikitext，就像在您的示例中一样，您可以使用：

```
import wikipedia

page = wikipedia.Page(wikipedia.getSite(), 'Tom_Cruise')

pageText = page.get()

print pageText 
```

通过这种方式，您可以尝试从模板中获取数据，如果需要，还有一些 wikitext 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T22:07:06.597

从 html 页面中提取数据从来都不是一件有趣的事情，但在我看来， [http:](http://scrapy.org/) //scrapy.org/ 让它变得更容易了。您可以使用 XPath 来提取数据，功能非常强大。如果您想以这种方式检索数据，我肯定会使用scrapy。

您还应该检查是否有其他选项来获取数据。据我所知，可以下载维基百科的数据转储。对于您的用例来说，这可能有点过头了，但可能存在其他 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T13:41:38.163

DBpedia 允许通过查询检索 Wikipedia 中的结构化信息。 [http://dbpedia.org/](http://dbpedia.org/)

# javascript - Spin.js .stop() 函数问题

> ID：12886980
> 
> 赞同：0
> 
> 时间：2012-10-14T22:01:39.443
> 
> 标签：javascript, jquery, jquery-animate, preloader

> **可能重复：**
> [javascript函数的变量范围问题](https://stackoverflow.com/questions/11613176/variable-scope-issue-with-javascript-function)

我正在将 spin.js 与 jquery 一起使用。我的微调器在选择下拉菜单中的元素时启动，并在查询返回数据时停止。我也试过 `$('.spinner').spin(false);`了，`$("#spinnerContainer").spinner.stop();`但似乎没有任何效果。下面是我的代码：

```
function spinnerInit() {
    var opts = {
        lines: 13,
        length: 7,
        width: 4,
        radius: 10,
        corners: 1,
        rotate: 0,
        color: '#000',
        speed: 1,
        trail: 60,
        shadow: false,
        hwaccel: false,
        className: 'spinner',
        zIndex: 2e9,
        top: 'auto',
        left: 'auto',
        visibility: true
    };

    $('#spinnerContainer').after(new Spinner(opts).spin().el);
}
$('.categories-select').click(function() {
    spinnerInit();
    $("#spinnerContainer").spinner.stop();

}); 
```

HTML

```
<div id="spinnerContainer" class="spinner"> 
```

任何帮助，将不胜感激。谢谢

# node.js - 如何避免重音在 NodeJS 上显示为问号

> ID：12886984
> 
> 赞同：0
> 
> 时间：2012-10-14T22:01:55.650
> 
> 标签：node.js, encoding, diacritics

我通过 fs.readFile 获取文件，输出显示以下字符：

á（以及任何带重音的字母）、¿ 等。

作为问号“？”。

我想这是一个编码问题，因为我使用的是 UTF8，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:58:30.900

如果您在 HTML 中显示您的内容

放`<meta http-equiv="content-type" content="text/html; charset=utf-8" />`

# codeigniter - Codeigniter AES 解码显示奇怪的字符

> ID：12886989
> 
> 赞同：0
> 
> 时间：2012-10-14T22:02:29.737
> 
> 标签：codeigniter, aes, decode, encode

我试过：

```
$data = array('ip'=>'120.0.3.4','user'=>'robert');

 $this->load->library('encrypt');
    $this->encrypt->set_cipher(MCRYPT_RIJNDAEL_256);
    $this->encrypt->set_mode(MCRYPT_MODE_ECB);
    $key = random_string();
    $o=$this->encrypt->encode($data,$key);
var_dump($o);
$this->encrypt->set_cipher(MCRYPT_RIJNDAEL_256);
    $this->encrypt->set_mode(MCRYPT_MODE_ECB);
    $o = $this->encrypt->decode($o,$key);
    var_dump($o); 
```

它在解码中返回奇怪的字符：

```
string(44) "CVwMzZGkzagW4wHbUZfNpVWACQp2Fx4TeAO2KLqZs3I=" string(32) "��pz��xJx�jʊ8�Kw��mS�Y �1�_�" 
```

有什么建议吗？

这是由数组加密引起的吗？我需要按值加密值而不是加密所有数组以使用加密数据数组？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T22:39:02.683

您正在将一个数组传递给`$this->encrypt->encode()`. 该`encode()`方法接受一个字符串。请参阅[加密类](http://codeigniter.com/user_guide/libraries/encryption.html)。

如果您启用了 PHP 错误，您还会看到：

```
A PHP Error was encountered
Severity: Warning
Message: mcrypt_encrypt() expects parameter 3 to be string, array given
Filename: libraries/Encrypt.php 
```

[在您的开发机器上打开 PHP 错误](http://php.net/manual/en/function.error-reporting.php)以捕获这些错误。

# asp.net - 从 ASP.NET 调用 WCF 服务器

> ID：12886991
> 
> 赞同：2
> 
> 时间：2012-10-14T22:02:57.087
> 
> 标签：asp.net, wcf

我有一个使用 DuplexChannelFactory 和命名管道的简单 WCF 服务器。我可以从控制台应用程序调用它，也可以从 WPF 应用程序调用它。但是，是否可以从 ASP.NET 调用相同的 WCF 服务器并且仍然能够从控制台\WPF 应用程序调用它？

我正在使用以下端点：

```
[ServiceContract(SessionMode = SessionMode.Required,
  CallbackContract = typeof(IMyWCFClient))]
public interface IMyWCFServer
{
    [OperationContract]
    bool Subscribe();
    [OperationContract]
    bool UnSubscribe();
} 
```

我可以将其更新为可从 ASP.NET 调用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T22:08:53.393

是的，您可以通过控制台、WPF 和 ASP.NET 调用 WCF 服务。但是你需要先创建合适的`endpoint`。

[如何：在配置中创建服务端点](http://msdn.microsoft.com/en-us/library/ms734786.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:53:36.853

基本上要为您的 wcf 服务创建启用 Ajax 的端点以便能够从 javascript 调用方法，您需要执行以下操作：

1) 将 AspNetCompatibilityRequirements 添加到您的 WCF 服务定义中，因此它将类似于以下代码：

```
namespace Test

[ServiceContract(Namespace = "Test.Services")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class TestService : IMyWCFServer
{
    // To use HTTP GET, add [WebGet] attribute. (Default ResponseFormat is WebMessageFormat.Json)
    // To create an operation that returns XML,
    //     add [WebGet(ResponseFormat=WebMessageFormat.Xml)],
    //     and include the following line in the operation body:
    //         WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";

    public bool UnSubscribe()
    {
        return true;
    }

    public bool Subscribe()
    {
        return false;
    }
} 
```

注意：命名空间也很重要，因为 ScriptManager 在服务注册后将使用它来生成客户端代理。

2) 然后将具有以下定义的 [YourServiceName].svc 文件添加到 Asp.Net Web 应用程序项目中：

```
<%@ ServiceHost 
Language="C#" Debug="true"
Service="Test.TestService " 
Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory" %> 
```

该文件足以将您的 WCF 服务注册为 Ajax 服务。

3）然后通过将以下内容添加到您要使用服务的页面（或母版页），向脚本管理器注册此服务：

```
<asp:ScriptManagerProxy runat="server" ID="ScriptManagerProxy">
    <Services>
        <asp:ServiceReference Path="~/[RelativePathToSVCFile].svc" />
    </Services>
</asp:ScriptManagerProxy> 
```

然后您将能够从 JavaScript 调用您的服务，如下例所示：

```
var wasSubscribed = Test.Services.TestService.Subscribe(); 
```

例如，可以在本文中找到更多信息：http: [//dotnetslackers.com/articles/ajax/JSON-EnabledWCFServicesInASPNET35.aspx](http://dotnetslackers.com/articles/ajax/JSON-EnabledWCFServicesInASPNET35.aspx)

**编辑**：有几种方法可以以编程方式将脚本引用添加到脚本管理器。第一个是ScriptManager控件本身也可以用来将wcf服务注册为脚本服务。但是要获取脚本管理器的当前实例，您需要参考当前页面实例。因此，以下代码显示了如何从任何页面或服务器控件的类后面的代码中完成此操作：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
        scriptManager.Services.Add(new ServiceReference { Path = "[RelativePathToSVCFile].svc" });
    } 
```

这是如何从任何页面或服务器控件的类后面的代码以编程方式添加 ScriptManagerProxy 的示例。这种方法要求您有权访问页面或服务器控件的控件集合：

```
 /// <summary>
    /// Called by the ASP.NET page framework to notify server controls that use composition-based implementation to create any child controls they contain in preparation for posting back or rendering.
    /// </summary>
    protected override void CreateChildControls()
    {
        base.CreateChildControls();

        ScriptManagerProxy scriptManagerProxy = new ScriptManagerProxy { ID = "ScriptManagerProxy" };
        this.Controls.Add(scriptManagerProxy);

        scriptManagerProxy.Services.Add(new ServiceReference { Path = "[RelativePathToSVCFile].svc" });
    } 
```

# string - 如何在给定字符串的给定编辑距离处查找所有字符串

> ID：12886997
> 
> 赞同：4
> 
> 时间：2012-10-14T22:04:00.590
> 
> 标签：string, algorithm, edit-distance

我们都在 Google 中看到，如果我们输入查询并打错字，Google 会建议使用更合理的查询版本（这通常是正确的）。现在他们是怎么做到的？我能想到的一种可能方法是找出与给定字符串编辑距离为 1 的所有其他字符串，如果其中任何一个返回具有更高值“搜索”属性的字符串（可能来自后端数据库，每个索引查询词都有一个权重，基于该词在查询中出现的频率）而不是给定的字符串，建议使用该字符串。如果没有找到，则搜索编辑距离为 2 的字符串，依此类推，直到在 5 处，SE 确定该字符串可能是*用户*正在查找的字符串，并返回相应的搜索结果。

现在有可能在给定字符串的给定编辑距离处找到字符串吗？这个过程的效率如何？有什么很酷的算法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:27:29.630

Peter Norvig 的一篇有趣的文章“[如何编写拼写校正器](http://norvig.com/spell-correct.html)”谈论“你的意思是”如何工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:53:01.437

这当然是猜测，但可以肯定的是，谷歌有一个庞大的统计基础来猜测正确的单词。上下文可能是另一个取决于其他词的因素。

所以我的猜测是，他们使用的算法首先根据所有单词确定可能的上下文，然后统计查找给定上下文中正确单词的错别字变体。如果没有上下文（单个单词），他们可能会查找任何可能相似的内容。

此外，由于 Google 使用基于 MySQL 的数据库，他们还可以使用[SOUNDS LIKE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#operator_sounds-like)功能，该功能会根据人声列出听起来相似的单词。

# opengl - 将多个四边形转换为单个四边形

> ID：12886999
> 
> 赞同：5
> 
> 时间：2012-10-14T22:04:12.600
> 
> 标签：opengl, mesh

我想通过添加适当的退化四边形将下图中的五个四边形条（指定为下面的黑色索引）转换为单个四边形条。添加的灰色索引似乎可以解决问题，但我想知道是否有更紧凑的方法。 ![在此处输入图像描述](../Images/e9bea43255d6224d0967cf38e7fa601c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T22:18:05.737

您应该使用[原始重新启动](http://www.opengl.org/wiki/Vertex_Rendering#Primitive_Restart)，而不是使用退化三角形。有了这个，您只需指定一个特定的索引重新启动一个原语。核心 OpenGL 3.1 版本已有数年历史，NV_primitive_restart 扩展被 NVIDIA（自 GeForce 6xxx 天以来）和 ATI（所有 HD 级硬件）广泛支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T19:32:50.860

如果它绝对必须是四边形，那么我相信没有其他事情要做（除了已经提到的原始重启）。但是，如果您愿意并且能够使用三角形条带（我强烈建议您这样做），它会带来一些小的改进。

四边形带和等效三角形带的*真实*索引是相同的，因此在这方面没有什么可失去的。但是，四条带重新启动需要*两个*停止索引和*两个*开始索引。三角带重启只需要*一个*停止索引和*一个*开始索引。

在原始示例中，通过 3 次重新启动，这将减少 6 个索引。