# StackOverflow 问答 16137000-16137999

# variables - 在 FORLOOP 中递增计数器变量

> ID：16137004
> 
> 赞同：1
> 
> 时间：2013-04-21T22:44:33.193
> 
> 标签：variables, loops, for-loop, batch-file, increment

为什么当 FOR 循环再次遍历时变量“数字”没有增加？

```
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (input.txt) do (
set /a N+=1
set /a number=!number!+1
echo  %%a !number!.jpg >output.txt
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:04:11.663

首先，我不建议您在使用文件名时启用变量扩展，只有在您真正知道启用延迟扩展的含义、好处（提高速度）和负面因素（缺少字符）时才使用它。

此外，您正在为变量“N”分配一个值，但您不使用该 var。

这是代码：

```
@echo off

(for /f "usebackq tokens=* delims= " %%a in ("input.txt") do (
    Set /A Number+=1
    Call Echo %%a %%number%%.jpg
))>"Output.txt"

Pause&Exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:53:58.903

好的，请试试这个：

```
@echo off &setLocal EnableDelayedExpansion
(for /f "tokens=* delims= " %%a in (input.txt) do (
set /a N+=1
set /a number=!number!+1
echo  %%a !number!.jpg 
))>output.txt 
```

在重定向的情况下，您需要`>>output.txt`一个代码块（括号）和`>output.txt`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T22:49:42.237

你应该试试

```
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (input.txt) do (
set /a N++
set /a number=!number!+1
echo  %%a !number!.jpg >output.txt
) 
```

编辑或尝试：

```
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (input.txt) do (
set /a N++
set /a number=!number!++
echo  %%a !number!.jpg >output.txt
) 
```

或者也许你用来编程的东西甚至不支持 ++。让我知道吧！
影子帕特

# c++ - 在 z3 中设置成员关系

> ID：16137005
> 
> 赞同：0
> 
> 时间：2013-04-21T22:44:54.273
> 
> 标签：c++, z3

我想在 Z3 中使用 C++ API 定义成员关系。我想通过以下方式做到这一点：

```
z3::context C;
z3::sort I = C.int_sort();
z3::sort B = C.bool_sort();
z3::func_decl InSet = C.function("f", I, B);

z3::expr e1 = InSet(C.int_val(2)) == C.bool_val(true);
z3::expr e2 = InSet(C.int_val(3)) == C.bool_val(true);
z3::expr ite  = to_expr(C, Z3_mk_ite(C, e1, C.bool_val(true),
    Z3_mk_ite(C,e2,C.bool_val(true),C.bool_val(false))));
errs() << Z3_ast_to_string(C,ite); 
```

在这个例子中，集合由整数 2 和 3 组成。我确信有更好的方法来定义关系，特别是集合成员关系，但我真的是 Z3 菜鸟。有谁知道最好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:27:15.697

在 Z3 中，通常使用谓词（如您所做的）或布尔数组对集合进行编码。在 Z3 C API 中，有几个函数用于创建集合表达式：`Z3_mk_set_sort`, `Z3_mk_empty_set`, `Z3_mk_set_union`, ... 实际上，这些函数是创建数组表达式。它们表示一组从到布尔值`T`的数组。`T`他们使用[本文](http://research.microsoft.com/en-us/um/people/leonardo/files/fmcad09.pdf)中描述的编码。

备注：在 Z3 中，`InSet(C.int_val(2)) == C.bool_val(true)`相当于`InSet(C.int_val(2))`. 该`InSet`函数是一个谓词。我们可以写`std::cout << ite`而不是`std::cout << Z3_ast_to_string(C, ite)`.

在基于谓词的方法中，我们通常需要使用量词。在您的示例中，您说`2`and`3`是集合的元素，但是要说没有其他元素是元素，我们需要一个量词。我们还需要量词来表示属性，例如：集合`A`等于集合`B`和的并集`C`。基于量词的方法更加灵活，例如，我们可以说它`A`是一个包含`1`和之间所有元素的集合`n`。缺点是很容易创建不在 Z3 可以处理的可判定片段中的公式。Z3 教程描述了其中一些片段。这是教程中的一个示例。

```
;; A, B, C and D are sets of Int
(declare-fun A (Int) Bool)
(declare-fun B (Int) Bool)
(declare-fun C (Int) Bool)
(declare-fun D (Int) Bool)

;; A union B is a subset of C
(assert (forall ((x Int)) (=> (or (A x) (B x)) (C x))))

;; B minus A is not empty
;; That is, there exists an integer e that is B but not in A
(declare-const e Int)
(assert (and (B e) (not (A e))))

;; D is equal to C
(assert (forall ((x Int)) (iff (D x) (C x))))

;; 0, 1 and 2 are in B
(assert (B 0))
(assert (B 1))
(assert (B 2))

(check-sat)
(get-model)
(echo "Is e an element of D?")
(eval (D e))

(echo "Now proving that A is a strict subset of D")
;; This is true if the negation is unsatisfiable
(push)
(assert (not (and 
              ;; A is a subset of D
              (forall ((x Int)) (=> (A x) (D x)))
              ;; but, D has an element that is not in A.
              (exists ((x Int)) (and (D x) (not (A x)))))))
(check-sat)
(pop) 
```

# javascript - Fixed footer & relative DIV

> ID：16137009
> 
> 赞同：0
> 
> 时间：2013-04-21T22:45:19.380
> 
> 标签：javascript, css, wordpress, html

I am soo confused right now. Coding really isn't my thing, so I believe that I messed up majorly somewhere which creates this problem:

I'm trying to make a sticky footer. The footer does stick--but only if I make my main content DIV (the white centered box) relative. I need the height of that DIV to stretch with the content (which will contain a PHP script that'll pull from my Wordpress blog--so naturally, I need it to adjust as necessary). If the DIV stretches longer than 500px, there's a weird two-scrollbars things going on, & I hate that. I like the relative DIV, but I would love to rid of all the extra scroll space, as well as making sure it stetches/regresses with content & the footer stays where it is.

I hope that's not too confusing. I'd just like someone to look over my source code & see where I'm going wrong. Thank you for any help.

[http://www.missa.me/practice3.php](http://www.missa.me/practice3.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:02:49.807

不错的网站:)

您需要固定页脚，

使用这个 CSS

```
#footer {
position: fixed;
height: 80px;
clear: both;
background-color: #fff;
bottom: 0;
left: 0;
right: 0;
} 
```

并`overflow: auto;`起飞`#main`

这样做是告诉页脚保持“固定”到视口的底部，因此它会始终粘在屏幕的底部..`overflow:auto;`起飞将使您`#main`有自然的能力根据里面的内容扩展它的高度它。

# java - 如何区分名称相同的表格元素？硒Java

> ID：16137011
> 
> 赞同：0
> 
> 时间：2013-04-21T22:45:26.900
> 
> 标签：java, selenium, xpath, html-table

我需要到达第二个表的元素。然而，由于网页包含两个表格，我总是最终从第一个表格中获取一个元素。这是代码：

```
driver.get("http:.............");
        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
        String el = driver.findElement(By.xpath("//tr[1]/td[2]")).getText();
        System.out.println(el); 
```

//我需要得到以下值：$0.00564000。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:06:04.813

试试这个：

```
String el = driver.findElements(By.xpath("//tr[2]/td[2]")).get(1).getText(); 
```

# android - How do I get my buttons to work in the fragment?

> ID：16137014
> 
> 赞同：0
> 
> 时间：2013-04-21T22:45:37.040
> 
> 标签：android, button, android-fragments

I am still having a problem with just adding a button to the screen and getting it to execute my code. Right now, I will be happy with select the button and getting the "log,d (msg);" to work. The problem may be due to all my code in the fragment and/or combination of buttons and a list that I scroll on the same screen. It is probably a very basic problem.

My application first starts with a scrolling list created by a cursor from SQLite table. So it is an open ended list. Select an item and I get a detail screen to allow add, update or delete. That all works.

Now I am adding 3 buttons above the list.

I am a newbie, and the book I started with said to create a fragment, so the screen with the list is coded that way. (The detail screen is rewritten to just the activity.)

I have tried lots of things, but roughly three ways below:

In my onCreate method:

```
"btn_Add.setOnClickListener(new View.OnClickListener()" 
```

As suggested in a recent - reply - This executes fragment onCreate , then crashes with these messages:

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.
taskreminder. EventListActivity}:Binary XML file line #34: Error inflating class fragment 
```

As a separate method after the onCreate:

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) 
```

This causes a loop - repeating the onCreate several times then crashes with this:

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.
taskreminder.EventListActivity}: android.view.InflateException: 
Binary XML file line #8: Error inflating class <unknown> 
```

3 I added this to the XML file in button definition:

android:onClick="MyButton"

and

```
public void MyButton(View v)
    {
     Log.d(". . . " + v);
    } 
```

This allowed the application to load, but when I selected the button, it crashed when I selected the button with the following message:

```
java.lang.IllegalStateException: Could not find a method MyButton(View) in the activity 
```

This is pieces from the fragment: eventListFragment.java

```
public class EventListFragment extends ListFragment
                                  implements LoaderCallbacks<Cursor>
  {
   . . . .
    List strRecord = new ArrayList(3);

    @Override
    public void onCreate(Bundle savedInstanceState)
       {
        super.onCreate(savedInstanceState);
        . . . .
        setListAdapter(mAdapter);
        getLoaderManager().initLoader(0, null, this);
       )
//------------------------------------
// THIS IS EXAMPLE # 1
//     java.lang.RuntimeException: Unable to start activity
//     ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.taskreminder.EventListActivity}:
//     android.view.InflateException: Binary XML file line #34: Error inflating class fragment

    btn_Add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        // you may want to perform your clicks here.
        Log.d("EventLst","S create view btnAddEvent:" + v);
        }
    });   
//-------------------------------------

  }   //----> END: public void onCreate  

//-------------------------------------
//     THIS IS EXAMPLE #2:
//  it give me this error on initial load:
//  java.lang.RuntimeException: Unable to start activity
//  ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.taskreminder.EventListActivity}:
//  android.view.InflateException: Binary XML file line #8: Error inflating class <unknown>

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
       {
        View view = inflater.inflate(R.layout.event_list, container, false);
        Button button = (Button) view.findViewById(R.id.btn_Add);
        button.setOnClickListener(new OnClickListener()
           {
            @Override
            public void onClick(View v)
               {
                Activity activity = getActivity();
                if (activity != null)
                   {
                    Log.d("EventLst","S create view btnAddEvent:" + v);
                    Toast.makeText(activity, "GOT button", Toast.LENGTH_LONG).show();
                   }
               }
             }   );
        return view;
       }
//---------------------------------------

    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
       {
        . . . 
         while  (cursor.isAfterLast() == false)
            {
             strRecord.add(iRecNo, strDate + ": "  + strC[2]);
            }
         lstAdapter = new ArrayAdapter<String>(getActivity(),
                  R.layout.event_row, R.id.text1, strRecord);
          setListAdapter(lstAdapter); 
```

This is the main layout: event_list.XML Note: android:onClick="MyButton" only in try #3 above

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:name="com.dummies.android.taskreminder.EventListFragment" >

 <Button  android:id="@+id/btn_Add"
    android:onClick="MyButton"
    android:layout_width="50dp"
    android:layout_height="30dp"   
    android:textSize="12dp"
    android:padding="1dip"
    android:text="@string/add" />

  <Button  android:id="@+id/btn_Exit"
    android:onClick="onClick"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12dp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/btn_Add" 
    android:text="@string/exit" />

  <Button  android:id="@+id/btn_Other"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12dp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/btn_Exit" 
    android:text="@string/other" />

 <fragment
    android:name="com.dummies.android.taskreminder.EventListFragment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/btn_Add"  />
 </RelativeLayout> 
```

This is the row to create the scrow list: event_row.XML

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:textSize="12dp"
    android:padding="2dip" /> 
```

Luksprog requested this information in his reply please post or at least make available to him/her.

First I created this XML file, event_list_activity.xml, guessed a little on the filename:

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/> 
```

Also added to strings:

```
<string name="container">EventContainer</string> 
```

Ran my test and this is the complete log: (First three records from my code):

```
04-28 16:09:24.504: D/EventLst(258): X onCrt: x01strI:eventname
04-28 16:09:24.544: D/EventLst(258): X onCrt: x02 START
04-28 16:09:24.584: D/EventLst(258): X onCrt: x03 START
04-28 16:09:24.624: D/AndroidRuntime(258): Shutting down VM
04-28 16:09:24.646: W/dalvikvm(258): threadid=3: thread exiting with uncaught exception (group=0x4001b1d8)
04-28 16:09:24.646: E/AndroidRuntime(258): Uncaught handler: thread main exiting due to uncaught exception
04-28 16:09:24.646: W/dalvikvm(258): threadid=3: thread exiting with uncaught exception (group=0x4001b1d8)
04-28 16:09:24.646: E/AndroidRuntime(258): Uncaught handler: thread main exiting due to uncaught exception
04-28 16:09:25.065: E/AndroidRuntime(258): java.lang.RuntimeException: Unable to start activity
         ComponentInfo{com.dummies.android.taskreminder/com.dummies.android.taskreminder.EventListActivity}:
         android.view.InflateException: Binary XML file line #33: Error inflating class fragment
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.os.Looper.loop(Looper.java:123)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-28 16:09:25.065: E/AndroidRuntime(258):  at java.lang.reflect.Method.invokeNative(Native Method)
04-28 16:09:25.065: E/AndroidRuntime(258):  at java.lang.reflect.Method.invoke(Method.java:521)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-28 16:09:25.065: E/AndroidRuntime(258):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-28 16:09:25.065: E/AndroidRuntime(258):  at dalvik.system.NativeStart.main(Native Method)
04-28 16:09:25.065: E/AndroidRuntime(258): Caused by: android.view.InflateException: Binary XML file line #33:
         Error inflating class fragment
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         com.android.internal.policy.impl.WimmWindow.setContentView(WimmWindow.java:181)
04-28 16:09:25.065: E/AndroidRuntime(258):  at android.app.Activity.setContentView(Activity.java:1622)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         com.dummies.android.taskreminder.EventListActivity.onCreate(EventListActivity.java:22)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-28 16:09:25.065: E/AndroidRuntime(258):  ... 11 more
04-28 16:09:25.065: E/AndroidRuntime(258): Caused by: java.lang.NullPointerException
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         com.dummies.android.taskreminder.EventListFragment.onCreate(EventListFragment.java:98)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:877)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1066)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1168)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:280)
04-28 16:09:25.065: E/AndroidRuntime(258):  at
         android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 
```

Next I added your statements below and get errors below is from the start of the fragment to the end of on create Note: I also had to add: import android.support.v4.app.FragmentTransaction;

```
package com.dummies.android.taskreminder;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;  
import java.util.Date;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.view.LayoutInflater;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.content.DialogInterface;
import android.os.Bundle; 
import android.support.v4.app.FragmentTransaction;
//* below insures that you are using the ...v4 for version android 1.6
import android.support.v4.app.ListFragment; 
import android.support.v4.app.LoaderManager.LoaderCallbacks; 
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.MenuItem;
import android.content.ContentValues;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Button;
import android.widget.Toast;
import android.util.Log;

public class EventListFragment extends ListFragment
                                  implements 
                                  LoaderCallbacks<Cursor>
  {
    private SimpleCursorAdapter mAdapter;
    List strRecId = new ArrayList();

    private ListAdapter lstAdapter;
    private Button btn_Add;
    private Button myButton;

    List strRecord = new ArrayList(3);
    List strFields = new ArrayList();

    @Override
    public void onCreate(Bundle savedInstanceState)
       {
        super.onCreate(savedInstanceState);

//---------------------------------------------------------------        
     // assuming you use FragmentActivity
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.container, new EvetListFragment());
        ft.commit();        

// errors above:   
// For: getSupportFragmentManager()
//  "The method getSupportFragmentManager() is undefined for the type EventListFragment" 
// For: EvetListFragment());
//   "EvetListFragment cannot be resolved to a type"
//----------------------------------------------------------------

//  BELOW READS FROM DATABASE AND DISPLAYS EVENTNAME
//  THEN ALLOWS UPDATE OF THEM ABD INSERT FROM EXISTING        
//        Log.d("EventLst","X onCrt: x01 START" ); 

        String[]  strItems =  new String[]  
           { 
            EventProvider.COLUMN_EVENTNAME
           };
        Log.d("EventLst","X onCrt: x01strI:" + strItems[0]);          
        int[] iCnt = new int[]
            {  
             R.id.text1
            };

        mAdapter =  new SimpleCursorAdapter(getActivity(),R.layout.event_row,
                    null, strItems, iCnt,  0);
        Log.d("EventLst","X onCrt: x02 START" );

        setListAdapter(mAdapter);
        getLoaderManager().initLoader(0, null, this);

        Log.d("EventLst","X onCrt: x03 START" );
//---------------------------------------------------------------------------------
// I thought this set my OnClickListener.  Without this code, the application runs 
//   but the buttons don't do anything  
        btn_Add.setOnClickListener(new OnClickListener()
         {
      @Override
          public void onClick(View v)
             {
              Log.d("EventLst","S onclkBtn2" + v);
             }
         }  );
//-------------------------------------------------------------------------------

      }   //----> END: public void onCreate 
```

Many thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:48:37.913

你的代码有很多问题：

请发布完整的堆栈跟踪，`InflateException`告诉您片段无法膨胀的原因。最可能的原因是您扩展 a`ListFragment`并覆盖`onCreateView()`以膨胀您自己的布局，该布局不包含`ListView`带有 id的 a `android.R.id.list`（`@android:id/list`在 xml 文件中）。即使没有抛出该异常，您的代码仍然会失败，因为您将陷入 stackoverflow 错误，您的片段布局是一个包含相同片段的布局文件（将再次加载等等......）。

消除：

```
android:name="com.dummies.android.taskreminder.EventListFragment" 
```

从布局。布局应该是这样的：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>

 <Button  android:id="@+id/btn_Add"    
    android:layout_width="50dp" <!-- you should avoid fixed sizes -->
    android:layout_height="30dp"   
    android:textSize="12sp" <!-- use sp units for text size! -->
    android:padding="1dip"
    android:text="@string/add" />

  <Button  android:id="@+id/btn_Exit"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12sp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@id/btn_Add" 
    android:text="@string/exit" />

  <Button  android:id="@+id/btn_Other"
    android:layout_width="50dp"
    android:layout_height="30dp"
    android:textSize="12sp"
    android:padding="1dip"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@id/btn_Exit" 
    android:text="@string/other" />

 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/btn_Add"  />
 </RelativeLayout> 
```

这将是片段的布局。的布局`Activity`将是：

```
<FrameLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/> 
```

添加片段（在`onCreate()`方法中）：

```
// assuming you use FragmentActivity
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.container, new EvetListFragment());
ft.commit(); 
```

然后，您可以`EventListFragment`使用`R.id.container`.

在您的`EventListFragment`设置中`OnClickListener`，您的按钮以及`onActivityCreated()`回调中的适配器。该`onClick`属性将在该级别查找该方法，`Activity`因此只需`OnClickListener`手动设置。

# java - LinkedList 问题打印和删除

> ID：16137015
> 
> 赞同：1
> 
> 时间：2013-04-21T22:45:42.837
> 
> 标签：java, data-structures, linked-list, nodes, circular-list

好的，所以我一直在争论是否要问这个问题并保持这个问题，看看我是否能得到一些答案。我已经修复了大部分错误，但我对这个 LinkedList 有很大的问题。现在它一直在删除第一个节点后面的所有节点，并显示除最后一个节点之外的所有节点。我似乎无法弄清楚我的问题在哪里。我一直在使用 jgrasp 中的调试来提供帮助，但它并没有太大帮助

我已经包含了我正在为任何想要运行它并查看自己会发生什么的人处理的两个文件

文件输入是一个文本文件，其内容类似于：

```
 1,10
 5,16
 2,7
 4,12
 3,19
 6,25
 9,13
 7,21
 8,4 
```

它也需要一个代表时间的int。我一直在用5

这是我的主文件：

```
import java.util.*;
import java.io.*;

public class Test_RoundRobin{

public static void main(String args[]) throws IOException {
    LinkedList list=new LinkedList();
    String file=args[0];
    int cpuTime=Integer.parseInt(args[1]);

    Scanner fin=new Scanner(new FileReader(file));
    String pattern=",";
    fin.useDelimiter(pattern);
    while(fin.hasNext()){
        String s=fin.nextLine();
        String[] array=s.split(pattern);
        int pid=Integer.parseInt(array[0]);
        int time=Integer.parseInt(array[1]);
        list.add(pid, time);
    }
    fin.close();
    System.out.println(list);
    list.sortList();
    System.out.println(list);
    int count=1;
    while(list.size!=0){
        list.timeSlice(cpuTime);
        System.out.println("Run " + count + ": " + list);
        count++;
    }
    System.out.println(list);
}
} 
```

这是我拥有的 LinkedList 文件：我正在使用一个虚拟头节点，它是一个循环单链表。

```
public class LinkedList{
private class Node{
    private int pid;
    private int time;
    private Node next;

    public Node(int pid, int time){
        this.pid=pid;
        this.time=time;
    }
}//end Node

int size;
Node head;

public void add(int pid, int time) {
    Node curr=head;
    Node newNode=new Node(pid, time);
    //empty list
    if(head==null){
        head=newNode;
        newNode.next=head;
    }//end if
    else{
        while(curr.next!=head){
            curr=curr.next;
        }//end while
        curr.next=newNode;
        newNode.next=head;
    }//end else
    size++;
}//end add

public void delete(Node curr){
    if(size==0){
        return;
    }
    else if(head==curr){
        head=curr.next;
    }
    else{
        Node prev=find(curr);
        prev.next=curr.next;
    }
    size--;
}

public Node find(Node curr){
    for(Node prev=head; prev.next!=curr; prev=prev.next){
        return prev;
    }
    return curr;
}

public void sortList(){
    Node position;  // Position to fill...
    Node start;            // Where to start looking for the smallest...

    if(size>=0){
        for(position=head; position.next!=head; position=position.next){
            Node smallest=position;

            for(start=position.next; start!=head; start=start.next){
                if (start.pid<smallest.pid){
                    smallest = start;
                }//end if
            }//end for
            int tempPID=position.pid;
            int tempTime=position.time;
            position.pid=smallest.pid;
            position.time=smallest.time;
            smallest.pid=tempPID;
            smallest.time=tempTime;
        }//end for
    }//end if
}//end sortList

public void timeSlice(int cpuTime){
    for(Node curr=head; curr.next!=head; curr=curr.next){
        curr.time=curr.time-cpuTime;
        System.out.print("<" + curr.pid + ", " + curr.time +">" + " ");
        //if the time remaining <= 0 then remove the node
        if(curr.time<=0){
            System.out.println("Process " + curr.pid + " has finished, and is now being terminated");
            delete(curr);
        }
    }
}

public String toString(){
    String s="";
    for(Node curr=head; curr.next!=head; curr=curr.next)
        s=s+"<"+curr.pid+", "+curr.time+"> ";

    return s;
}
} 
```

在此先感谢，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:55:07.360

首先，您没有像您说的那样使用虚拟节点。如果列表只包含一个节点，它实际上永远不会被删除，因为`head.next`只是`head`又一次。这也使列表处于不一致的状态，`size`即 0 但它仍然有一个节点。

`find`如果您正在寻找不在列表中的节点，则会给出不正确的结果。您可能应该检测到这一点并抛出异常。

# css - 在 VS2012 Express Web 中捆绑 CSS 文件

> ID：16137022
> 
> 赞同：0
> 
> 时间：2013-04-21T22:46:27.080
> 
> 标签：css, web, visual-studio-2012, bundling-and-minification

我的情况很特殊。也许不吧。我在 VS2012 Web Express 中有一个解决方案。不是 ASP.NET，不是 MVC。只是一个充满静态 html 文件的解决方案。我最近添加了一堆（比如 20 个）CSS 文件。我需要使用某种捆绑。Web Essentials 不适用于快速版本。

任何想法？

# java - ArrayList 不打印删除的对象

> ID：16137027
> 
> 赞同：0
> 
> 时间：2013-04-21T22:46:48.380
> 
> 标签：java, arraylist, java.util.scanner

我有一个名为 Polynomial 的类，其 ArrayList 由术语对象组成，我的测试类中有一个由 Scanner 对象读取的外部文件。扫描器读取 4 个不同关键词的行并采取相应的行动。前任。INSERT 3 2\. 调用我的插入方法并打印出 3x^2。现在我有一个带有两个参数的删除方法。当我在测试类中调用该方法时，什么也没有发生，同样的事情被打印出来并且没有被删除。我是错过了什么还是一起做错了？任何帮助是极大的赞赏。

```
public void delete (int coeff, int expo)
{
  for (int i = 0; i<terms.size(); i++)
  {
      Term current = terms.get(i);
      terms.remove(current.getCoeff());
      terms.remove(current.getExpo());
  }

} 
```

我还有一个 Term 类，它创建一个 term 对象，并有两种方法来获取系数和指数。

这是我的测试类的片段：

```
public static void main(String[] args) throws IOException
{
    // TODO code application logic here
    Polynomial polyList = new Polynomial();

    Scanner inFile = new Scanner(new File("operations2.txt"));

    while(inFile.hasNext())
    {
       Scanner inLine = new Scanner(inFile.nextLine());

       String insert = inLine.next();

        if(insert.equals("INSERT"))
        {

           int coeff = inLine.nextInt();
           int expo = inLine.nextInt();            
           polyList.insert(coeff, expo);
        }
        if(insert.equals("DELETE"))
        {
            int coeff = inLine.nextInt();
            int expo = inLine.nextInt();
            polyList.delete(coeff, expo);
        }
    }
     System.out.println(polyList.toString());
   }
} 
```

编辑：这是扫描仪类正在读取的 .txt 文件的示例：

```
INSERT 3 2
INSERT 4 4
INSERT 1 6
INSERT 2 0
INSERT 5 2
INSERT 6 3
PRODUCT
DELETE 3 2
INSERT 2 7
DELETE 4 4
INSERT 4 10 
```

编辑：这是术语类：

```
class Term
{
//instance vars
private int coefficient;
private int exponent;

 public Term(int coeff, int expo)
 {
  coefficient = coeff;
  exponent = expo;

 }
 public int getCoeff()
 {
   return coefficient;
 }
 public int getExpo()
 {
   return exponent;
 }
 @Override
 public int hashCode()
 {
   return  coefficient + exponent;
 }

   @Override
   public boolean equals(Object o)
   {

     if (!(o instanceof Term))
     {
       return false;
     }
     Term t = (Term)o;
     return coefficient == t.coefficient && exponent == t.exponent;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T22:53:04.773

您不是试图`Term`从术语列表中删除，而是试图删除系数和指数。

```
 for (int i = 0; i<terms.size(); i++)
  {
      Term current = terms.get(i); // Your list contains Term objects
      terms.remove(current.getCoeff()); // but you are try to removing a coefficient
      terms.remove(current.getExpo()); // and an exponent
  } 
```

只是一般注意，删除这种方式将不起作用，因为`i`会越来越大，您的列表会越来越小。因此，当您删除最后一个术语（例如 where `i = terms.size() - 1`）时，列表中将只剩下 1 个项目。如果您尝试删除所有项目，请考虑列表的`clear`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:58:16.873

为什么您的 delete 方法采用参数 coeff 和 expo .... ...它对它们没有任何作用。

事实上，删除方法看起来很可疑。您将需要提供有关术语数组的更多详细信息，现在它没有任何意义。

滚滚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:05:14.123

如果您的`delete()`方法试图删除具有指定系数的 Twrm，我建议如下：

1.  如果参数是具有相同系数和指数的项，则覆盖`equals()`要返回的方法`true`
2.  重写`hashCode()`方法以返回基于相同的两个值的哈希

由于该`equals()`方法应该进行*值*比较，因此这样的实现是相当合理的。

完成此操作后，您的删除方法将变为一行：

```
terms.remove(new Term(coeff, expo)); 
```

* * *

实现应如下所示：

```
// in the Term class
@Override
public boolean equals(Object o) {
    if (!(o instanceof Term)
        return false;
    Term t = (Term)o;
    return coeff == t.coeff && expo == t.expo;
} 
```

尽管重写该`hashCode`方法并不是使您的代码工作的严格要求，但这是一种很好的做法，所以这里有一个示例 impl：

```
@Override
public int hashCode() {
    return 31 * coeff + expo;
} 
```

# xaml - Toggleswitch size in xaml

> ID：16137028
> 
> 赞同：4
> 
> 时间：2013-04-21T22:46:52.500
> 
> 标签：xaml, windows-8, microsoft-metro, toggleswitch

How do I change the size of the actual switch in ToggleSwitch in xaml? I can change the text size for the OnContent and OffContent, but the sliding switch never changes size.

None of these change the size of the switch itself, but just the box around it.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T23:21:59.567

要更改此设置，您需要编辑 ToggleSwitch 默认样式的 ToggleSwitch 模板。

我发现这在 Blend For Visual Studio 2012 中最容易做到。

*   打开 Blend 并右键单击设计器中的切换开关。
*   选择**Edit Template\Edit a Copy...**上下文菜单。

![在此处输入图像描述](https://i.stack.imgur.com/DUopu.png)

*   在对象和时间轴中，查看模板元素以查找可能的元素。在这种情况下，它是**SwitchKnobBounds**元素。
*   现在您已经找到了更改设置。在这种情况下，您可以拖动尺寸控制柄。 ![在此处输入图像描述](https://i.stack.imgur.com/j1BuM.png)

*   当您对编辑后的更改感到满意时，单击编辑器顶部的范围缩小按钮以返回正常编辑模式。 ![在此处输入图像描述](https://i.stack.imgur.com/ej3Os.png)

这是编辑后生成的 XAML。

```
 <Style x:Key="ToggleSwitchStyle1" TargetType="ToggleSwitch">
        <Setter Property="Foreground" Value="{StaticResource ToggleSwitchForegroundThemeBrush}"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
        <Setter Property="ManipulationMode" Value="None"/>
        <Setter Property="MinWidth" Value="154"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleSwitch">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchCurtain">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchCurtainPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchTrackPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPointerOverBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchCurtain">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchCurtainPressedBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchTrackPressedBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPressedBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbPressedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="HeaderContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchHeaderDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="OffContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="OnContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="OuterBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchOuterBorderDisabledBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchTrackDisabledBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbDisabledBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SwitchKnob">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchThumbDisabledBorderThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SwitchCurtain">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ToggleSwitchCurtainDisabledBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ToggleStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition x:Name="DraggingToOnTransition" From="Dragging" GeneratedDuration="0" To="On">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobCurrentToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainCurrentToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="DraggingToOffTransition" From="Dragging" GeneratedDuration="0" To="Off">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobCurrentToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainCurrentToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="OnToOffTransition" From="On" GeneratedDuration="0" To="Off">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobOnToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainOnToOffOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                    <VisualTransition x:Name="OffToOnTransition" From="Off" GeneratedDuration="0" To="On">
                                        <Storyboard>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.KnobOffToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchKnob"/>
                                            <RepositionThemeAnimation FromHorizontalOffset="{Binding TemplateSettings.CurtainOffToOnOffset, RelativeSource={RelativeSource Mode=TemplatedParent}}" TargetName="SwitchCurtain"/>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Dragging"/>
                                <VisualState x:Name="Off">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="-44" Storyboard.TargetProperty="X" Storyboard.TargetName="CurtainTranslateTransform"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="On">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="X" Storyboard.TargetName="CurtainTranslateTransform"/>
                                        <DoubleAnimation Duration="0" To="38" Storyboard.TargetProperty="X" Storyboard.TargetName="KnobTranslateTransform"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ContentStates">
                                <VisualState x:Name="OffContent">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OffContentPresenter"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OffContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <x:Boolean>True</x:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="OnContent">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="OnContentPresenter"/>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="OnContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <x:Boolean>True</x:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ContentPresenter x:Name="HeaderContentPresenter" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Foreground="{StaticResource ToggleSwitchHeaderForegroundThemeBrush}" FontWeight="Semilight" Margin="6"/>
                            <Grid Margin="{TemplateBinding Padding}" Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="7"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ContentPresenter x:Name="OffContentPresenter" ContentTemplate="{TemplateBinding OffContentTemplate}" Content="{TemplateBinding OffContent}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="False" Margin="6,5,0,16" MinWidth="65" Opacity="0" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <ContentPresenter x:Name="OnContentPresenter" ContentTemplate="{TemplateBinding OnContentTemplate}" Content="{TemplateBinding OnContent}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="False" Margin="6,5,0,16" MinWidth="65" Opacity="0" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <Grid Background="Transparent" Grid.Column="2">
                                    <Grid x:Name="SwitchKnobBounds" Height="42" Margin="13,5,13,16">
                                        <Border x:Name="OuterBorder" BorderBrush="{StaticResource ToggleSwitchOuterBorderBorderThemeBrush}" BorderThickness="2">
                                            <Border x:Name="InnerBorder" BorderBrush="{StaticResource ToggleSwitchTrackBorderThemeBrush}" BorderThickness="1" Background="{StaticResource ToggleSwitchTrackBackgroundThemeBrush}">
                                                <ContentPresenter x:Name="SwitchCurtainBounds">
                                                    <ContentPresenter x:Name="SwitchCurtainClip">
                                                        <Rectangle x:Name="SwitchCurtain" Fill="{StaticResource ToggleSwitchCurtainBackgroundThemeBrush}" Width="44">
                                                            <Rectangle.RenderTransform>
                                                                <TranslateTransform x:Name="CurtainTranslateTransform" X="-44"/>
                                                            </Rectangle.RenderTransform>
                                                        </Rectangle>
                                                    </ContentPresenter>
                                                </ContentPresenter>
                                            </Border>
                                        </Border>
                                        <Rectangle x:Name="SwitchKnob" Fill="{StaticResource ToggleSwitchThumbBackgroundThemeBrush}" HorizontalAlignment="Left" Stroke="{StaticResource ToggleSwitchThumbBorderThemeBrush}" StrokeThickness="1" Width="12">
                                            <Rectangle.RenderTransform>
                                                <TranslateTransform x:Name="KnobTranslateTransform"/>
                                            </Rectangle.RenderTransform>
                                        </Rectangle>
                                        <Rectangle x:Name="FocusVisualWhite" Margin="-3" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                                        <Rectangle x:Name="FocusVisualBlack" Margin="-3" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                                    </Grid>
                                    <Thumb x:Name="SwitchThumb">
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Rectangle Fill="Transparent"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ToggleSwitch Header='ToggleSwitch' 
                                HorizontalAlignment='Left'
                                Margin='795,165,0,0'
                                VerticalAlignment='Top'
                                Height='120' />
    <ToggleSwitch Header='ToggleSwitch'
                                HorizontalAlignment='Left'
                                Margin='203,165,0,0'
                                VerticalAlignment='Top' Style="{StaticResource ToggleSwitchStyle1}" />

</Grid> 
```

这是模板中的相关 XAML。

```
<Grid x:Name="SwitchKnobBounds" Height="42" Margin="13,5,13,16"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T13:06:06.133

你可以缩放它。

```
<ToggleSwitch>
    <ToggleSwitch.RenderTransform>
        <CompositeTransform ScaleX=".5" ScaleY=".5"/>
    </ToggleSwitch.RenderTransform>
</ToggleSwitch> 
```

# android - Achartengine BarChart 使用 BasicStroke 添加实心轮廓

> ID：16137039
> 
> 赞同：2
> 
> 时间：2013-04-21T22:48:32.960
> 
> 标签：android, achartengine

我正在使用 Achartengine 生成条形图，我想改进它们的外观。我正在考虑为显示的每个条添加笔画（轮廓？）。

有没有办法将 BasicStroke 用于 XYMultipleSeriesRenderer？

这就是我想要实现的目标，基于我所拥有的（我有一个 XYMultipleSeriesRenderer，我想在其中添加一个笔划）：

![截图示例](https://i.stack.imgur.com/rakDA.png)

我尝试使用 BasicStroke.class 方法扩展 XYMultipleSeriesRenderer，以查看是否可以在 XYMultipleSeriesRenderer 上使用 setStroke（只是一个实验，所以不要跳到我身上）。没想到它会起作用，但我提供了代码，以便您更好地理解我的想法。

最好，我希望尽可能多地重用来自 Achartengine 的代码，而不必修改 .jar 文件。如果有一种方法可以扩展其中一个类……那将是节省生命/时间的方法。

```
package com.example.android.fragments_proto.aChartEngine;

import java.util.ArrayList;
import java.util.List;

import org.achartengine.chart.PointStyle;
import org.achartengine.renderer.BasicStroke;
import org.achartengine.renderer.XYMultipleSeriesRenderer;

import android.graphics.Color;

public class BarChartStyling extends XYMultipleSeriesRenderer {

    /** The stroke style. */
      private BasicStroke mStroke;

      /**
       * Returns the stroke style.
       * 
       * @return the stroke style
       */
      public BasicStroke getStroke() {
        return mStroke;
      }

      /**
       * Sets the stroke style.
       * 
       * @param stroke the stroke style
       */
      public void setStroke(BasicStroke stroke) {
        mStroke = stroke;
      } 
```

**解决方案**

虽然，有一种更优雅的方式来实现这一点，但我在 BarChart.class 中找到了一个快捷方式。它涉及编辑源代码，但它是一个不错的解决方案。

我会在有时间的时候完善它并将其提交给 repo。在谷歌代码上。

丹，如果您对使用此方法有任何意见或警告……请尽情批评。

```
 private void drawBar(Canvas canvas, float xMin, float yMin, float xMax, float yMax, int scale,
      int seriesIndex, Paint paint) {
    SimpleSeriesRenderer renderer = mRenderer.getSeriesRendererAt(seriesIndex);

    // set the color to the first drawRect 
    // using the paint param.
    paint.setColor(Color.BLACK);

    // use the first drawRect to draw a bar 
    // with (left, top, right, bottom, paint)
    canvas.drawRect(Math.round(xMin), Math.round(yMin), Math.round(xMax), Math.round(yMax), paint);
    if (renderer.isGradientEnabled()) {
      float minY = (float) toScreenPoint(new double[] { 0, renderer.getGradientStopValue() }, scale)[1];
      float maxY = (float) toScreenPoint(new double[] { 0, renderer.getGradientStartValue() },
          scale)[1];
      float gradientMinY = Math.max(minY, Math.min(yMin, yMax));
      float gradientMaxY = Math.min(maxY, Math.max(yMin, yMax));
      int gradientMinColor = renderer.getGradientStopColor();
      int gradientMaxColor = renderer.getGradientStartColor();
      int gradientStartColor = gradientMaxColor;
      int gradientStopColor = gradientMinColor;

      if (yMin < minY) {
        paint.setColor(gradientMinColor);
        canvas.drawRect(Math.round(xMin), Math.round(yMin), Math.round(xMax),
            Math.round(gradientMinY), paint);
      } else {
        gradientStopColor = getGradientPartialColor(gradientMinColor, gradientMaxColor,
            (maxY - gradientMinY) / (maxY - minY));
      }
      if (yMax > maxY) {
        paint.setColor(gradientMaxColor);
        canvas.drawRect(Math.round(xMin), Math.round(gradientMaxY), Math.round(xMax),
            Math.round(yMax), paint);
      } else {
        gradientStartColor = getGradientPartialColor(gradientMaxColor, gradientMinColor,
            (gradientMaxY - minY) / (maxY - minY));
      }
      GradientDrawable gradient = new GradientDrawable(Orientation.BOTTOM_TOP, new int[] {
          gradientStartColor, gradientStopColor });
      gradient.setBounds(Math.round(xMin), Math.round(gradientMinY), Math.round(xMax),
          Math.round(gradientMaxY));
      gradient.draw(canvas);
    } else {
      if (Math.abs(yMin - yMax) < 1) {
        if (yMin < yMax) {
          yMax = yMin + 1;
        } else {
          yMax = yMin - 1;
        }
      }

      // set the color to the second drawRect 
      // using the paint param.
      paint.setColor(renderer.getColor());

      // modify the drawRect size and position to create a 
      // smaller bar above the first one 
      // while modifying it's size proportionally 
      // (left + 5, top + 5, right - 5, bottom - 5, paint)
      canvas.drawRect(Math.round(xMin + 5), Math.round(yMin + 5), Math.round(xMax - 5), Math.round(yMax - 5), paint); 
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:03:26.350

我认为这不仅仅是扩展渲染器类那么简单。您还必须扩展在`BarChart`条形图中实际呈现条形的类。我宁愿建议您检查源代码并在那里添加您的功能。然后，如果您希望其他人从您的更改中受益，请随时通过创建问题并附加代码补丁将其回馈给 AChartEngine 社区。

# jquery - 将 JSON 作为字符串发布

> ID：16137047
> 
> 赞同：2
> 
> 时间：2013-04-21T22:49:49.107
> 
> 标签：jquery, json, ajax, asp.net-mvc, post

这是我的 js/ajax 代码：

```
 $.ajax({
        type: 'POST',
        data: JSON.stringify(jsonObj),
        url: 'filter/GetAjaxTestResult',
        dataType: 'json',
        contentType: "application/json; charset=utf-8",
        success: function (data) {
        alert(data);
      }
    }); 
```

我想发布`json`为字符串。这是我在 mvc/controller 中尝试过的：

```
[HttpPost]
public JsonResult GetAjaxTestResult(dynamic jsonString)
{
    return "";// Here jsonString is null!!!
} 
```

我怎样才能`json`得到`string`？是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T23:10:33.090

以这种方式传递：-

```
 $.ajax({
            type: 'POST',
            data: "{'jsonString':'" + JSON.stringify(jsonObj) + "'}",
            contentType: "application/json; charset=utf-8",
            url: 'filter/GetAjaxTestResult',
            dataType: 'json',

            success: function (data) {

            alert(data);
          }
        }); 
```

另一件事是你的action的返回类型是JsonResult，恐怕你不能做return ""; 您需要返回 JsonResult，例如`return Json(...)`；

# jquery - Disable active button in jQuery

> ID：16137049
> 
> 赞同：0
> 
> 时间：2013-04-21T22:50:03.670
> 
> 标签：jquery

I have a navigation bar and I've been able to fix its behaviour as I like with this jQuery code:

```
$(document).bind('mobileinit', function () {
        $.mobile.activeBtnClass = 'unused';
    }); 
```

But this way I disable ALL the buttons in my webapp...

I'd like to aim it to a specific set of buttons.

How can I achieve that?

I'd do:

```
$(document).bind('mobileinit', function () {
        $(".myclass").activeBtnClass = 'unused';
    }); 
```

or

```
$(document).bind('mobileinit', function () {
        $(".myclass").mobile.activeBtnClass = 'unused';
    }); 
```

But this won't work...

What is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:31:42.063

你的建议很有趣，roXon，但是因为我想让用户了解他在使用我的 web 应用程序时的位置。

幸运的是 jQuery 的人考虑到了这种问题，我已经能够很容易地解决这个问题，添加 class="ui-btn-active ui-state-persist" 所以我的按钮。

不管怎么说，还是要谢谢你！

# python - PySide 中的 QScintilla

> ID：16137050
> 
> 赞同：6
> 
> 时间：2013-04-21T22:50:05.980
> 
> 标签：python, editor, pyside, qscintilla

我喜欢 PySide，并且已经使用了一段时间，但是在我目前正在开发的程序中，我需要一个高级代码编辑器。

我找到[了 QScintilla](http://www.riverbankcomputing.co.uk/software/qscintilla/intro)，但那是针对 PyQt 的。这是否与 PySide 兼容，如果是，我将如何使用它？
我也看过[PySide-QScintilla](http://gitorious.org/pyside-qscintilla)，但只是几个`.h`文件和一个`__init.py__`，`__init__.py`甚至没有任何与`.h`文件相关的内容！有人用过吗？您如何将其包含在程序中？
我也看到了[qutepart](https://qutepart.readthedocs.org/en/latest/)，但对于我需要的东西来说，它似乎太基础了。

我会接受 QScintilla 以外的解决方案，但它们必须具有：

*   错误突出显示
*   语法高亮
*   代码建议（键入时的下拉菜单）
*   行号
*   自定义颜色
*   必须至少是 GPL（LGPL 会很好）

其他任何功能都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:53:32.327

做一个快速的谷歌搜索带来了以下内容：

*   [http://gitorious.org/pyside-qscintilla](http://gitorious.org/pyside-qscintilla)
*   [https://github.com/LuaDist/scintilla/tree/master/qt/ScintillaEditPy](https://github.com/LuaDist/scintilla/tree/master/qt/ScintillaEditPy)

我怀疑第一个是直接端口，而第二个是某种 Scintilla 包装器而不是 QScintilla 端口。

# c++ - Requesting User Input to Name the File being created using ofstream C++ MFC

> ID：16137051
> 
> 赞同：0
> 
> 时间：2013-04-21T22:50:15.683
> 
> 标签：c++, visual-studio-2012, mfc

How would you go about giving the user the ability to change the Name of the ofstream File using c++ MFC. I would like to add an Edit Control Box that will give the user an ability to Type in the File Name before clicking save. This is my current code, any feedback will be greatly appreciated.

```
void CECET_MFC_Dialog_Based_IntroDlg::OnBnClickedSave()
    {
    UpdateData(true);

    ofstream myfile ("Save_Random.xls");
    if (myfile.is_open())
  {
    myfile << "This is the 1st line.\n" << endl;

    for(int index=0; index<100; index++){   // samples to create
     myfile << setprecision(4) << dblArray[index] << endl;
    }

    myfile << "This is another line.\n";
    myfile << "Max  = " << rndMax << endl;
    myfile << "Min  = " << rndMin << endl;
    myfile << "Mean = " << Final_Avg << endl;
    myfile.close();
  }
    else cout << "Unable to open file";

    UpdateData(false);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:11:03.327

您可以像添加任何其他控件一样添加编辑控件——将其从工具箱拖到对话框中。也许更重要的是，您通常希望在它旁边放置一个浏览按钮，以便用户可以浏览他们想要的文件夹/文件名。该按钮的代码如下所示：

```
void CYourDlg::OnBrowseButton() {
    UpdateData();

    CFileDialog dlg(false, NULL, NULL, OFN_OVERWRITEPROMPT );

    if (dlg.DoModal())
        m_dest_file = dlg.GetPathName();
    UpdateData(false);
} 
```

然后，当用户单击任何按钮（或菜单项等）让您写入文件时，您会执行以下操作：

```
std::ofstream myfile(m_dest_file);
// write the data 
```

我假设您已将编辑控件与`CString`命名的`m_dest_file`. 显然，您可以选择自己喜欢的名称，但是（当然）您需要在两个地方使用相同的名称。

# visual-studio-2010 - 在 Visual Studio 的构建输出名称中使用 #define

> ID：16137052
> 
> 赞同：2
> 
> 时间：2013-04-21T22:50:27.413
> 
> 标签：visual-studio-2010, macros, visual-studio-macros

我将 Visual Studio 2010 用于 C/C++ 项目。就版本号而言，我喜欢有一个修订和构建日期；例如“项目 1.0 R2 2013 年 4 月 21 日”。我在启动时显示这个，所以我可以很容易地判断是否有人在运行旧版本。现在我想把这样的东西放在构建创建的可执行文件的文件名中。例如，“Project10R2.exe”。

我使用[此处](http://msdn.microsoft.com/en-us/library/c02as0cs%28v=vs.100%29.aspx)列出的构建宏。[为了显示构建日期，我使用此处](http://msdn.microsoft.com/en-us/library/b0084kay(v=vs.100).aspx)列出的预定义宏。为了澄清可能的混淆，构建宏可以从项目属性中使用，它们所指的“预定义宏”是#define 的。我知道您可以定义自定义自定义构建宏（请参阅[this](https://stackoverflow.com/questions/4710084/visual-studio-where-to-define-custom-path-macros)）（显然，我想要的任何#define）。

现在我想要的是与另一个一起使用。也就是说，我想在一个地方定义一个修订字符串，并让它在启动时出现在程序输出中（使用#define 很容易）和构建输出文件名中（使用自定义 $ 宏很容易）。我不想保持两个不同的常数。

有人知道怎么做吗？看来您甚至不能将构建日期放在文件名中（无论如何，如果您使用 Windows %DATE% 环境变量，您可能会得到非法字符。）

# javascript - AngularJS - How to restrict scope on ngClick in multiple instances

> ID：16137053
> 
> 赞同：2
> 
> 时间：2013-04-21T22:50:31.623
> 
> 标签：javascript, angularjs

I'm attempting to create a single directive that will toggle an element open or closed when a trigger link is clicked. However, when one trigger is clicked, it toggles all the instances open rather than a single one.

My code looks like this: [http://plnkr.co/edit/IA1hrbAoUEvvkwDjRAh6](http://plnkr.co/edit/IA1hrbAoUEvvkwDjRAh6)

Can anyone help to explain how to make this work with attributes and without defining my templates in the directives themselves?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:25:33.197

这是一个可以满足您要求的工作程序：

[http://plnkr.co/edit/HcoyFyCSnrfmLu3lI7a6](http://plnkr.co/edit/HcoyFyCSnrfmLu3lI7a6)

这里的优点是指令是完全自包含的，每个指令都有自己的范围对象。请注意，您甚至不再需要控制器。

另见：[http ://www.egghead.io/video/fYgdU7u2--g](http://www.egghead.io/video/fYgdU7u2--g)

您的新指令定义：

```
app.directive('panelTrigger', function() {
    return {
      scope:{},
      link: function($scope, element, attrs) {

        $scope.toggle = function() {
           $scope.visibility = !$scope.visibility;
        };

        // Default visibility is false
        $scope.visibility = false;

        $scope.$watch(attrs.visible, function( newValue, oldValue ) {

          if ( newValue === oldValue ) {
              return;
          }

          var elm = angular.element(element.children()[1]);
          if (newValue) {
            elm.attr('style', 'display: block;');
          } else {
            elm.attr('style', 'display: none;');
          }
        });
      }
    };
}) 
```

并对您的 html 进行一个小改动：

```
 <div data-panel-trigger data-visible="visibility">
        <a ng-click="toggle()" href="#">Panel A</a>
        <div class="panel span2">
          <p>Panel Content</p> 
        </div>
      </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:25:43.543

那是因为您`PancelCtrl`对三个面板使用了一个实例。因此，该指令永远不知道应该切换哪个面板，因为它没有在任何地方指定。

您有两种不同的选择：

`li`为每个元素创建一个实例：

```
<!-- (you have to remove 'data-ng-controller="PanelCtrl"' from 'div.subfooter') -->
<li data-ng-controller="PanelCtrl">
  <a ng-click="toggle()" href="#">Panel A</a></a>
  <div data-panel-trigger data-visible="visibility" class="panel span2">
    <p>Panel Content</p>
  </div>
</li>
<li data-ng-controller="PanelCtrl">
  <a ng-click="toggle()" href="#">Panel B</a>
  <div data-panel-trigger data-visible="visibility" class="panel span2">
    <p>Panel Content</p>
  </div>
</li>
<li data-ng-controller="PanelCtrl">
  <a ng-click="toggle()" href="#">Panel C</a>
  <div data-panel-trigger data-visible="visibility" class="panel span2">
    <p>Panel Content</p>
  </div>
</li> 
```

这样做，您将拥有三个`PanelCtrl`实例，每个实例都会切换响应它的子元素。

另一个选项是检查单击的链接旁边是哪个面板（使用 jQuery 可以完成类似的操作`$(this).siblings("div")`）。但我认为第一个会更合适，因为您将封装要在网站上添加的每个面板的代码行为。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:14:54.477

这是因为它们都影响相同的范围。添加

```
scope:{
  ...
  ...
 } 
```

到您的指令定义并根据需要使用绑定属性到您的指令范围。

# android - Vibration when SpeechToText function completes

> ID：16137054
> 
> 赞同：0
> 
> 时间：2013-04-21T22:50:38.230
> 
> 标签：android, speech-to-text, vibration

I have implemented the SpeechToText function in a project of mine.I was wondering if it's possible to detect when the SpeechToText function has completed, so that I can implement a vibration right after. Can anyone tell me if this is possible? If so, please give me some details.Thanks! Here is the code I've implemented:

```
 @Override
public void onUtteranceCompleted(String utteranceId) {
    // TODO Auto-generated method stub
    // Get instance of Vibrator from current Context
            Vibrator mVibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

            // Vibrate for 300 milliseconds
            mVibrator.vibrate(300);

            Intent intent = new Intent(
                    RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);

            try {
                startActivityForResult(intent, RESULT_SPEECH);
                feedbackTextView.setText("");
            } catch (ActivityNotFoundException a) {
                Toast t = Toast.makeText(getApplicationContext(),
                        "Opps! Your device doesn't support Speech to Text",
                        Toast.LENGTH_SHORT);
                t.show();

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:07:34.180

在 onActivityForResult

```
@Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
 {
    Log.d(TAG, "onActivityResult"); //$NON-NLS-1$ 

    if (requestCode == RESULT_SPEECH) 
     {
       if (resultCode == RESULT_OK)
       {
         // User say something vibrate here
       }
       else
       {
          // User cancel
       }
    }

     super.onActivityResult(requestCode, resultCode, data);
 } 
```

# c# - 如何修改 ListViewItem.ToolTIp 属性的外观？

> ID：16137060
> 
> 赞同：0
> 
> 时间：2013-04-21T22:52:25.440
> 
> 标签：c#, winforms, listview, tooltip

我最近询问如何让工具提示显示在 ListViewItem 上（[请参阅此问题](https://stackoverflow.com/questions/16117362/can-i-get-a-mouseover-event-to-show-small-dialog-box-for-an-item-in-the-listview)）。我的问题是，有谁知道我将如何控制这个[ListViewItem.ToolTipText 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.tooltiptext%28v=vs.100%29.aspx)的颜色、大小或字体？

我已经尝试了一些关于“自定义工具提示”的建议，但它们似乎从未真正显示工具提示（[就像这个例子](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/bdd35f21-1d51-4cc9-812e-d30cc16032d7/)）在这个例子中，调试表明它肯定会进入鼠标悬停方法但似乎从来没有出现工具框也许是通过表格不断重置？

它似乎没有任何要更改的属性，但我知道似乎总有办法解决问题！

# vb6 - an unhandled win32 exception occurred in VB6.exe during project build

> ID：16137068
> 
> 赞同：0
> 
> 时间：2013-04-21T22:53:28.230
> 
> 标签：vb6

I have a legacy VB6 solution with a lot of projects. I am getting the error described [here](https://stackoverflow.com/questions/3409093/vb6-crashes-after-build) only when building the project.

The error is displayed inside a dialog box with the caption "Visual Studio Just-In-Time Debugger"

I have often got the error before, particularly in the IDE if I move a control on a form that has lots of controls. Usually the error does not repeat consistently.

However the error is now consistently repeating and preventing me from building. I have rebooted.

My next step will be to start trying to uninstall other things from my machine. I particularly suspect dot net framework 4 which might have installed yesterday.

The OS is Windows XP Professional Version 2002 SP3

Any ideas would be greatly appreciated.

Update: uninstalling framework 4 made no difference. I opened the solution and pressed F5 to run it, and got the error. I opened a form in design mode, then pressed F5 to run and was able to run OK. I also was able to compile the solution, and then to my relief - to build it.

The trick seems to be to have a form open before I build.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T09:04:36.317

I had the same problem in the this morning and I noticed that before error pop up, cursor was waiting for control paste (+ mark) on form and toolbox was closed. I opened the tool box(View Menu-> ToolBox) clicked on a form saved the project and error vanished.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T19:34:48.473

Try compiling without creating debug symbols. Right click the project and select properties. Click on the compile tab and uncheck "Create Symbolic Debug Info".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T22:56:34.157

The trick seems to be to have a form open before I build.

# sqlite - sqlite with full text search doesn't find results when space in query

> ID：16137070
> 
> 赞同：1
> 
> 时间：2013-04-21T22:53:51.467
> 
> 标签：sqlite, full-text-search

I'm playing with [notmuch-abook](https://github.com/guyzmo/notmuch-abook) which uses sqlite3 to store names and email addresses. The sqlite table uses full text search, being created by:

```
CREATE VIRTUAL TABLE AddressBook USING fts4(Name, Address); 
```

I have entries for myself with names "Hamish", "Hamish D" and "Hamish Downer". The query

```
select * from addressbook where addressbook match 'hamish'; 
```

Finds them all. However

```
select * from addressbook where addressbook match 'hamish d'; 
```

Finds *only* the entries with the exact name "Hamish D" but *does not* find the entries with name "Hamish Downer". I can get what I expect with:

```
select * from addressbook where name like 'hamish d%'; 
```

But I'd like to use the match version to match across both columns. Any idea what's going on here? Or how to get match to work as I want?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:41:22.577

阅读[文档](http://www.sqlite.org/fts3.html)。

查询

```
... addressbook match 'hamish d' 
```

查找包含两个单词`hamish`和的记录`d`。您可能想要搜索该短语`hamish d`，您可以使用

```
... addressbook match '"hamish d"' 
```

要搜索前缀，请使用`*`：

```
... addressbook match '"hamish d*"' 
```

# php - repeat items in a php array until they match the count of another array

> ID：16137077
> 
> 赞同：3
> 
> 时间：2013-04-21T22:54:28.250
> 
> 标签：php, arrays

I've created two arrays from strings using `explode()` one called `$labels` and the other called `$colors`. What I'd like to do is check the count of the items in `$labels` and if there are less items in `$colors` I'd like the values of the `$colors` array to be repeated until the count matches. If there are more items in `$colors` than in `$labels` I'd like to reduce remove items from the `$colors` array until it matches the number of items in `$labels`.

I assume I can use `count()` or `array_legnth()` in a conditional to compare the number of items between the two arrays and that I'm going to have to use some kind of while loop but really not sure how to get started.

Is there a better way or function I should use to compare the two arrays? And how would I go about repeating or deleting the items in the second array so that I land up with the same number of items in each?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:36:53.980

这是您可以执行的操作：

```
// the two arrays
$labels = array('a', 'b', 'c', 'd', 'e');
$colors = array(1, 2, 3, 4);

// only if the two arrays don't hold the same number of elements
if (count($labels) != count($colors)) {
    // handle if $colors is less than $labels
    while (count($colors) < count($labels)) {
        // NOTE : we are using array_values($colors) to make sure we use 
        //        numeric keys. 
        //        See http://php.net/manual/en/function.array-merge.php)
        $colors = array_merge($colors, array_values($colors));
    }

    // handle if $colors has more than $labels
    $colors = array_slice($colors, 0, count($labels));
}

// your resulting arrays    
var_dump($labels, $colors); 
```

把它放到一个实用函数中，你会很高兴的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T23:14:51.670

如果您没有找到答案，请使用此功能：

```
$labels = array("a","b","c","d","e");
$colors = array("green","blue","red");

function fillArray($biggerArray,$smallerArray) {
    $forTimes         = (sizeof($biggerArray)-sizeof($smallerArray));
    $finalArray       = $smallerArray;
    for($i=0;$i < $forTimes ;$i++) {
        shuffle($smallerArray);
        array_push($finalArray,$smallerArray[0]);
    }
    return $finalArray;
} 
```

用法：

```
 $newColorsArray = fillArray($labels,$colors);
   print_r($newColorsArray); 
```

它返回：

```
Array
(
    [0] => green
    [1] => blue
    [2] => red
    [3] => blue
    [4] => red
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T23:03:20.437

您可以使用[array_walk](http://us3.php.net/manual/en/function.array-walk.php)函数遍历一个或另一个数组并填充值。

```
if ( count($labels) > count($colors) ) {
   array_walk($labels, 'fill_other_array');
} else if (count($colors) > count($labels) {
   array_walk($colors, 'fill_other_array');
}

function fill_other_array() {
   ...
   array_fill(...);
} 
```

目前这不是很有效，因为它会遍历整个数组，而不仅仅是差异，但我会将一些代码留给你。:)

或者你可以做一些像你自己的想法的事情，你要么循环遍历较短的数组，要么只用一个值填充它，比如数组中的最后一个值。

```
if ( count($labels) > count($colors) ) {
   $colors = array_fill(count($colors), count($labels) - count($colors), $colors[count($colors)-1]);  // fill with last value in the array
} else if (count($colors) > count($labels) {
   ...
} 
```

要减少数组中的元素数量，可以使用[array_slice](http://us3.php.net/manual/en/function.array-slice.php)。

# java - Lots of ".class expected" and "not a statement"

> ID：16137079
> 
> 赞同：0
> 
> 时间：2013-04-21T22:54:46.747
> 
> 标签：java

I'm trying to make a program to accept two 3x3 matrices, then add or multiply them. I'm getting lots of three different errors.

First, a bunch of ".class expected" errors when I try to create a string to display the whole matrix in these lines:

```
strA = "\n\n|" + r1a[];
strA += "|\n|" + r2a[];
strA += "|\n|" + r3a[]; 
```

It repeats when I do the other 2 iterations for strB and strC.
When I looked up this error, I found these as possibilities for why it's happening, none of which seem to be the issue when scanning my code:

```
Usually this is just a missing semicolon,
sometimes it can be caused by unbalanced () on the previous line.
sometimes it can be cause by junk on the previous line. This junk might be far to the right off the screen.
Sometimes it is caused by spelling the keyword if incorrectly nearby.
Sometimes it is a missing + concatenation operator. 
```

~~My next issue is when I try to create the resulting matrix. I get a mixture of "not a statement" and "; expected" errors in this code:~~

```
r1c[] = r1a[] + r1b[];
r2c[] = r2a[] + r2b[];
r3c[] = r3a[] + r3b[]; 
```

The errors alternate; the compiler produces "not a statement" first with an arrow at the opening bracket of r1c[], followed by "; expected" with an arrow at the space between r1c[] =. The second and third occurrences simply move across the code, repeating the location (opening bracket, space). Thanks to tacp for this one being resolved!

This is how I declared all of my variables:

```
import javax.swing.JOptionPane;

public class Matrices
{

    public static void main(String[] args)
    {

       int i = 0;
       double[] r1a = new double[3];        //row 1 of matrix a
       double[] r2a = new double[3];        //row 2 of matrix a
       double[] r3a = new double[3];        //row 3 of matrix a
       double[] r1b = new double[3];        //row 1 of matrix b
       double[] r2b = new double[3];        //row 2 of matrix b
       double[] r3b = new double[3];        //row 3 of matrix b
       double[] r1c = new double[3];        //row 1 of matrix c
       double[] r2c = new double[3];        //row 2 of matrix c
       double[] r3c = new double[3];        //row 3 of matrix c

       String strInput,         //holds JOption inputs
       strA,                    //holds matrix A
       strB,                    //holds matrix B
       strC;                    //holds matrix C 
```

I really am not sure what I'm doing wrong. Here's all of my code.. [code](http://txtup.net/PkbuD) :p
This is probably something extremely basic, but this is my first semester of coding, ever, in any language.. So my troubleshooting skills are minimal, as are my actual coding skills. haha

So, all of your help is greatly appreciated!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:00:35.807

```
 strA = "\n\n|" + r1a[];
 strA += "|\n|" + r2a[];
 strA += "|\n|" + r3a[]; 
```

您需要指定类型`strA`和索引来访问数组元素`r1a, r2a`和`r3a`

同样，您需要索引来访问数组（它们是表示矩阵行的数组）：

```
r1c[] = r1a[] + r1b[];
r2c[] = r2a[] + r2b[];
r3c[] = r3a[] + r3b[]; 
```

例如：

```
for (int i = 0; i < 3; ++i)
{
   r1c[i] = r1a[i] + r1b[i];
} 
```

# objective-c - UITableViewCellStyleValue1 错误

> ID：16137084
> 
> 赞同：0
> 
> 时间：2013-04-21T22:55:26.020
> 
> 标签：objective-c, cocoa-touch, uitableview

所以我正在制作一个应用程序我一直在这个地方出错

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:[NSString stringWithFormat:@"Cell %i",indexPath.section]] autorelease]; 
```

这些都是错误；

> 未在此范围内声明 UITableViewCellStyleValue1 未找到“-initWithStyle:reuseIdentifier:”方法

请帮忙，谢谢。如果您需要查看完整代码，请告诉我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:41:34.897

我需要查看完整的代码才能获得一些上下文，但试试这个：

*   如果项目已打开，请先关闭项目。
*   在 xcode 菜单栏中，转到 Window -> Organizer。
*   转到项目选项卡并从左侧列表中选择您的项目。
*   在它显示派生数据的地方，单击删除按钮并打开您的项目备份。

尝试构建或运行它。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T12:20:51.840

好的，您的问题出在 /theos/ include/ uikit 中，标题是 uikit2 的标题，我相信如果您进入 /var/sdk/system/include 或靠近那些行，您会在该文件夹中找到一个 uikit 文件夹，您会看到一个文件夹被调用的 headers 将所有内容复制到 /theos/include/uikit

# java - How to create a complex query in hibernate

> ID：16137085
> 
> 赞同：-1
> 
> 时间：2013-04-21T22:55:29.190
> 
> 标签：java, hibernate

I am pretty new to hibernate was wondering if someone could help me out. I pretty much wrote the command how I would do it in SQL I tried a couple variations none worked was wondering if someone could point out how to do such a command in hibernate.

```
Query query = session.createQuery("from customer where customer_city = Harrison" 
            + " AND where customer_street = main" + " AND where customer_name = Hayes"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:03:57.937

我看到了一些可能导致问题的事情。首先，该`where`子句在 every 之后重复`and`。其次，您的 HQL 查询中有文字值，据我所知，这是不受支持的。通常，执行此类查询的代码如下所示：

```
String queryString
    = "from customer "
    + "where customer_city = ? "
    + "and customer_street = ? "
    + "and customer_name = ? ";
Query query = session.createQuery(queryString);
query.setString(0, "Harrison");
query.setString(1, "main");
query.setString(2, "Hayes");
List<Customer> customers = (List<Customer>) query.list(); 
```

# python - 识别并删除奇怪的字符

> ID：16137088
> 
> 赞同：2
> 
> 时间：2013-04-21T22:56:19.130
> 
> 标签：python, shell, command-line

我可以使用什么命令来识别和删除某些形成“单词”的奇怪字符，例如：

```
í‰äó_
í€Œ¢í‰ä‰åí‰ä‹¢
ití€Œ¢í‰ä‰åí‰ä‹¢
í‰äóìgo 
```

从一系列文件中？这些是一些示例...我想删除此类事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:44:09.597

从文件中获取数据后使用`string`模块：

```
import string
final_str = ''
for char in my_str:
    if char in string.printable:
        final_str += char 
```

替代单线：

```
''.join([str(char) for char in my_str if char in string.printable]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T23:05:39.407

正则表达式子怎么样？

就像是：

```
import re

clean_name = re.sub(r'[^a-zA-Z0-9\._-]', '', dirty_name) 
```

将任何其他允许的字符添加到正则表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T23:08:19.433

既然你标记了`shell`and `command-line`，你就去吧

```
$ tr -cd [:graph:][:space:] < foo.txt
_

it
go 
```

# python - 使用 % 将 python 中的输出右对齐

> ID：16137091
> 
> 赞同：0
> 
> 时间：2013-04-21T22:56:30.553
> 
> 标签：python

我的代码将产生一个右对齐的输出。这是代码：

```
star = '*'
n = 0
while star:
    n = n+1
    fmt = "{:>{size}s}"
    print fmt.format(star*n, size=10)
    if n > 9:
         break 
```

输出是：

```
 *
        **
       ***
      ****
     *****
    ******
   *******
  ********
 *********
********** 
```

如果我想使用“%10s”而不是这个，我该如何更改？：

```
fmt = "{:>{size}s}"
print fmt.format(star*n, size=10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:57:42.777

您只需将`<`符号用于具有新样式格式的左对齐文本：

```
fmt = "{:<{size}s}".format(star*n, size=10) 
```

这是旧样式格式提供的奇怪等价物：

```
fmt = "%-*s" % (10, star*n)

>>> "%*s" % (10, "***")
'       ***'
>>> "%-*s" % (10, "***")
'***       ' 
```

# segmentation-fault - SImple NASM program to output first number in an array gives Segmentation Fault error

> ID：16137094
> 
> 赞同：0
> 
> 时间：2013-04-21T22:56:38.160
> 
> 标签：segmentation-fault, nasm

I'm trying to make a really simple NASM program that will output the first value in my array.

When I run it, I get a `Segmentation Fault`. I can't figure out why. The value in the array is a byte, and the length I am putting into the `edx` register is `1`. Why is there a fault?

```
segment .data
    array: db 2, 9, 6, 7, 1, 4

segment .bss

segment .text
    global main

main:
    mov eax, 4
    mov ebx, 1
    mov ecx, [array]
    mov edx, 1
    int 0x80 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:58:59.787

你得到一个段错误，因为你没有正确结束程序。它正在进入无人区！

```
mov   eax, 1
xor    ebx, ebx
int     80H 
```

是退出程序的正确方法。此外，您没有打印您期望的内容。数组中的那些数字不是 ASCII，您需要在代码中转换为 ASCII，或者只用引号括起来。

```
array    db  "2", "9", "6", "7", "1", "4" 
```

此外， sys_write 期望和地址不是一个值，删除数组周围的括号

*** 编辑 ***

```
%define sys_exit    1
%define sys_write   4
%define stdout      1

section .data
array       db  "2", "9", "6", "7", "1", "4"

section .text
global main
main:
    mov     eax, sys_write
    mov     ebx, stdout
    mov     ecx, array
    mov     edx, 1
    int     80H

    mov     eax, sys_exit                
    xor     ebx, ebx                      
    int     80h 
```

# android - Corona SDK Google Play license check

> ID：16137096
> 
> 赞同：1
> 
> 时间：2013-04-21T22:56:42.493
> 
> 标签：android, lua, coronasdk

I have made a payed app for Android with Corona SDK, and I was wondering if there is anyway to check if the person actually bought the app instead of pirating it. I know this is possible to do in other SDKs

If it is possible, could anyone tell me how to set it up?

Any replies are appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:33:17.550

不再需要：D

所有信息都在这里：[http ://docs.coronalabs.com/api/library/licensing/index.html](http://docs.coronalabs.com/api/library/licensing/index.html)

# html - Center A Div within a Div with floated contents

> ID：16137104
> 
> 赞同：2
> 
> 时间：2013-04-21T22:57:41.227
> 
> 标签：html, css

Hi im struggling to center these three images in the middle of the page, ive enclosed all 3 images within one div (row) which i have then enclosed in another div (page) which is probably unnecessary,

ive centered the yellow div (page) but cant work out how to center the blue div (row) within the yellow div.

Heres a jsfiddle of my project: [http://jsfiddle.net/edddotcom/7NQKU/11/](http://jsfiddle.net/edddotcom/7NQKU/11/)

or here's the code:

CSS:

```
.page {
    width:850px;
    margin-left: auto;
    margin-right: auto;
    background-color:yellow;

}
.row {
    max-width: 840px;
    background-color: blue;
    display: inline-block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;

}
.container {
    display: block;
    float: left;
    width: 200px;
    height: 116px;
    background-color: red;
    margin: 5px;
}
span {
    margin-top: 10px;
    margin-left: 10px;
    max-height: 100%;
    text-align: justify;
}
img {
    width:100%;
    max-width: 400px;
    min-width: 200px;
} 
```

HTML:

```
<div class="page">
    <div class="row">
        <div class="container">
            <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

        </div>
        <div class="container">
            <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

        </div>
        <div class="container">
            <img src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg"> <span>TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE TEXT HERE </span>

        </div>
    </div>
</div> 
```

JavaScript:

```
$(document).ready(function () {
    //ON CLICK
    $("span").hide();
    $("img").toggle(function () { //fired the first time
        $(".container").css({
            "height": "116px",
                "width": "200px"
        });
        $("span").hide();
        $(this).parent().animate({
            //FIRSTCLICK COMMAND
            height: "400px",
            width: "400px"

        }, function () {
            $(this).children("span").show();
        });
        //Enlarges container then shows text

    }, function () { // fired the second time 
        $(this).siblings("span").hide(0, '', function () {
            $(this).parent(".container").animate({
                //SECONDCLICK COMMAND
                height: "116px",
                width: "200px"
            });
        });

    }); //Hides text then contracts container

}); 
```

The JavaScript probably isn't necessary but I've included it to give you a better idea of whats going on

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:31:53.937

[http://jsfiddle.net/7NQKU/49/](http://jsfiddle.net/7NQKU/49/) `.row`已经是一个内联块，所以很简单，添加`text-align:center;`到`.page`将居中`.row`而不更改其余代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T23:08:18.010

解决方案是不使用浮动将图像放在同一行，而是使用 display: inline-block; 和文本对齐：居中；在包装它的块元素上。

这是一个小提琴： http: [//jsfiddle.net/F9Wmg/](http://jsfiddle.net/F9Wmg/) 预览： http: [//fiddle.jshell.net/F9Wmg/show/](http://fiddle.jshell.net/F9Wmg/show/)

我添加的代码是：

```
.page {
    text-align: center;
}

.container {
    vertical-align: top;
    float: none;
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:13:37.193

您可以通过在必要时添加此 JavaScript 来使您的行在页面内居中：

```
var pageWidth = $('.page').width();
var rowWidth = $('.row').width();
$('.row').css('margin-left', (pageWidth - rowWidth)/2); 
```

由于您的图片在切换时重新调整大小，因此您必须在重新调整大小时再次使用它。

# java - Keep words in regex

> ID：16137107
> 
> 赞同：4
> 
> 时间：2013-04-21T22:57:44.230
> 
> 标签：java, regex

I just recently attempted to learn Regex for a project, and I have this:

```
patternstr = "<$Testing$>Go HERE <$Test2$>GO HERE 2 ";
Pattern pattern = Pattern.compile("<\\$\\w+\\$>\\w+");
Matcher matcher = pattern.matcher(patternstr); 
```

Which returns

```
<$Testing$>Go
and
<$Test2$>GO 
```

so how do I get the rest of the text while keeping the two strings separate? Like that should return

```
<$Testing$>Go HERE
<$Test2$>GO HERE 2 
```

and if I added more of the tags with text after it, it will return the third as well as the first 2.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:03:54.617

您需要添加一个（正）前瞻或负字符类

就像是：

```
<\\$\\w+\\$>[^<]+ 
```

或（已编辑）

```
<\\$\\w+\\$>.+?(?=<) 
```

根据评论进行编辑（应该是正面的，而不是负面的前瞻性）。

我不会重复艾伦关于行尾的评论，他们是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:06:06.213

根据您在中间允许的内容，`String`这相当容易。

你只需要`<$something$>something`反复匹配。如果您没有`<`中间字符串，那么您需要做的就是

```
final String patternstr = "<$Testing$>Go HERE <$Test2$>GO HERE 2 ";
final Pattern pattern = Pattern.compile("<\\$([^$]++)\\$>([^<]++)");
final Matcher matcher = pattern.matcher(patternstr);
while (matcher.find()) {
    System.out.println(matcher.group(1));
    System.out.println(matcher.group(2));
} 
```

输出：

```
Testing
Go HERE 
Test2
GO HERE 2 
```

解释：

*   `<\\$`与开场相匹配`<$`
*   `([^$]++)`匹配并抓取标签的内容，即直到下一个`$`
*   `\\$>`匹配结束`$>`
*   `([^<]++)`匹配并抓住一切直到下一个`<`

# python - Python Error importing Curses - not sure why

> ID：16137108
> 
> 赞同：2
> 
> 时间：2013-04-21T22:57:57.010
> 
> 标签：python, curses

So I do have curses installed Ive checked it with dpkg. Now when I try to import it, this happens

```
Python 2.7.3 (default, Jan 13 2013, 11:20:46)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import curses
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "curses.py", line 3, in <module>
    myscreen = curses.initscr()
AttributeError: 'module' object has no attribute 'initscr' 
```

I have no idea why it happens - I first tried to run this:

```
import curses

myscreen = curses.initscr()
myscreen.border(0)
myscreen.addstr(12, 25, "Python curses in action!")
myscreen.refresh()
myscreen.getch()

curses.endwin() 
```

Since I tried it, this happens. Anyone got an idea?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T23:01:07.733

```
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "curses.py", line 3, in <module> 
```

看来您命名了自己的文件 curses.py，Python 首先在当前目录中查找，因此您不能与库同名。

# java - asyctask with json and image processing

> ID：16137110
> 
> 赞同：3
> 
> 时间：2013-04-21T22:58:26.470
> 
> 标签：java, android

Hello I'm currently having no luck with sussing out how to process an image after I have pulled a url out as async only allows for one return does anyone have any suggestions?

```
 /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String json) {
        // dismiss the dialog after getting song information

        try {
               JSONObject jsonObject = new JSONObject(json);
               JSONArray jsonArray = jsonObject.getJSONArray("users");
               JSONObject arrayElement_0 = jsonArray.getJSONObject(0);
               uname = arrayElement_0.getString(TAG_USERNAME);
               ptitle = arrayElement_0.getString(TAG_PROFILETITLE);
               age = arrayElement_0.getString(TAG_AGE);
               gender = arrayElement_0.getString(TAG_GENDER);
               status = arrayElement_0.getString(TAG_STATUS);
               small = arrayElement_0.getString(TAG_SMALL);

        BitmapFactory.decodeStream((InputStream)new URL(small).getContent()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:03:56.883

如果您需要返回多个东西，只需返回一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:38:40.750

创建一个可以同时保存位图和其余数据的类？尽管将位图保留在一个类中是一个坏主意（它们使用大量内存）。一般来说，最好单独处理位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:08:11.390

这是其他人在如何做到这一点上苦苦挣扎的最好例子，希望这会有所帮助:) [http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of -listview-图像/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

# matlab - 如何在 Matlab 中显示 RGB 图像，每个通道都是单独的矩阵？

> ID：16137115
> 
> 赞同：0
> 
> 时间：2013-04-21T22:59:31.267
> 
> 标签：matlab, computer-vision, face-recognition

我得到了一个 Matlab 格式的人脸数据集，但是在我将数据集导入 Matlab 之后，我不知道如何显示图像。

矩阵的大小为 60x60x3x1000，即图像尺寸为 60x60，每个图像 RGB 有 3 个通道，这样的图像有 1000 张。

我不知道如何进行基本操作，例如以彩色显示第 i 个面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:44:55.937

看起来好像数据在 [0..255] 范围内给出，但类型为 double（而不是`uint8`）。

因此，要获得您需要的第 k 个图像

```
Im_k = uint8( squeeze( Images(:,:,:,k) ) ); 
```

或者，如果你想使用双精度浮点

```
Im_k = squeeze( Images(:,:,:,k) ) / 255; 
```

（我不是 100% 确定你需要`squeeze`在这种情况下使用）。

显示图像

```
figure('Name', 'Showing k-th face');
imshow( Im_k ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:19:36.830

你试过`image(1:60, 1:60, Images(:, :, :, i))`吗？

要获得单个频道，您可以执行以下操作：

```
colormap(gray)
image(Images(:,:,1,i)) 
```

或者

```
colormap(gray)
image(Images(:,:,2,i)) 
```

或者

```
colormap(gray)
image(Images(:,:,3,i)) 
```

这应该为您分离通道并将单个颜色分量缩放到正确的饱和度水平。

此外，如果您收到关于它超出范围的错误，请尝试：

```
imagesc(1:60, 1:60, Images(:, :, :, i)) 
```

也就是说，我很难相信你的教授或同事没有给你标准 [0,255] 格式的 RGB 数据。但是，如果您这样做，那么`imagesc`并排比较颜色通道将毫无用处。

查看每个颜色矩阵中的某些值的样子也可能会有所帮助。如果您给我以下输出，我们可以看到：

```
min(Images(:, :, 1, 1))
max(Images(:, :, 1, 1)) 
```

如果实际上它们是某种浮点数，我可以向您展示如何将其缩放为标准整数 RGB 表示。

# mercurial - 纠正 Mercurial 错误的正确方法？

> ID：16137119
> 
> 赞同：0
> 
> 时间：2013-04-21T23:00:27.227
> 
> 标签：mercurial

所以我刚刚开始使用 Mercurial 并遇到了一个我不确定如何正确处理的问题。这是示例场景：

```
Demo Branch --- Good Change 1  --- Bad Change 2  --- Good change 3  --- Good change 4
Prod Branch --- \Good Change 1 --- \Bad Change 2 --- \Good Change 3 --- \Good Change 4 
```

因此，本质上，一个好的更改已提交、测试并与生产合并。而不是一个糟糕的变化被测试，假设工作，并被推送到生产中。最后，还有 2 个不错的更改被推送到生产环境中。我们现在意识到“呃-哦”​​第二个变化实际上是一个问题！我们需要恢复它，但我们仍然在那里浪费了很好的更改 3 和 4。

Backout 对演示有效，但对 prod 无效，因为它是一个合并。我最终让一切正常，但有很多移植、更新和合并。似乎应该有一种简单的方法来解决这个问题，同时保持其他一切向前发展。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:55:23.370

我的理解是，事情就是这样开始的。

```
Demo   G1----B2----G3----G4
          \     \     \     \
Prod   ----M1----M2----M3----M4 
```

...然后您退出了演示分支上的错误更改

```
Demo   G1----B2----G3----G4----BOB2
          \     \     \     \
Prod   ----M1----M2----M3----M4 
```

此时您需要做的就是再次合并

```
Demo   G1----B2----G3----G4----BOB2
          \     \     \     \      \
Prod   ----M1----M2----M3----M4-----M5 
```

回退变更集与任何其他变更集没有什么不同。它只是具有与原始相反的效果。我认为您所做的是尝试退出包含错误更改到您的 Prod 分支 ( `M2`) 的合并，但这会产生一些奇怪的影响，如此[处](http://mercurial.selenic.com/wiki/Backout#Backout_of_a_Merge_Changeset)所述。

或者，您可以在两个分支上都退出`B2`，这也应该没问题。

```
Demo   G1----B2----G3----G4----BOB2
          \     \     \     \      
Prod   ----M1----M2----M3----M4-----BOB2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:45:32.547

> Backout 对演示有效，但对 prod 无效，因为它是一个合并

怎么回事？如果变更集是 repo 中的普通变更集，则推送此变更集后将是相同的变更集。

推！=合并，永远不会被合并。如果您想丢弃变更集，可以在源存储库中通过回退来完成（因此 - 获取新的附加变更集）并发布此更改，您必须**将回退变更集推送到产品**（肮脏的历史，但毕竟是正确的回购状态）

# android - XYMultipleSeries 图形不起作用？

> ID：16137125
> 
> 赞同：0
> 
> 时间：2013-04-21T23:01:25.780
> 
> 标签：android, graph, android-view, achartengine

我正在尝试使用[AChartEngine](http://www.achartengine.org/content/demo.html)制作图表，但我似乎无法让它工作。我的代码如下。注意：`Default2`是在用户登录之前阻止视图的覆盖，设置`Visibility(8)`意味着它是折叠的。`historyGraph`是一个相对布局，几乎填满了整个屏幕。

```
 //TODO: Remove and place in Void currently at end of onCreate()
    Toast.makeText(getApplicationContext(), "Finally", 1).show();

    default2.setVisibility(8);
    GraphicalView chartView;
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setPanEnabled(false);
    renderer.setLabelsColor(Color.BLACK);
    renderer.setShowLabels(true);
    renderer.setChartTitle("Test");

    XYSeriesRenderer r1 = new XYSeriesRenderer();
    r1.setColor(Color.BLUE);
    XYSeriesRenderer r2 = new XYSeriesRenderer();
    r2.setColor(Color.RED);
    renderer.addSeriesRenderer(r1);
    renderer.addSeriesRenderer(r2);

    XYMultipleSeriesDataset data = new XYMultipleSeriesDataset();
    XYSeries series1 = new XYSeries("Series 1");
    XYSeries series2 = new XYSeries("Series 2");
    double[] first = {5,4,3,4,5};
    double[] second = {10, 8, 6, 8, 10};
    for (double i = 0; i < 5; i++) {
        series1.add(i, first[(int) i]);
        series2.add(i, second[(int) i]);
    }
    data.addSeries(series1);
    data.addSeries(series2);

    chartView = ChartFactory.getLineChartView(getApplicationContext(), data, renderer);
    historyGraph.addView(chartView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    historyGraph.setBackgroundColor(Color.BLUE);        

    Toast.makeText(getApplicationContext(), "Done", 1).show(); 
```

有人知道为什么这不起作用吗？

# c# - 在嵌套母版页中查找控件

> ID：16137129
> 
> 赞同：0
> 
> 时间：2013-04-21T23:01:56.747
> 
> 标签：c#, asp.net, master-pages, panel

我在嵌套的 masterPage 中有一个控件，我需要在代码隐藏中获取它。我尝试了各种方法，但未能获得成功的结果。

该控件是一个名为的面板：

```
pnlNewsHeader 
```

这在页面上呈现为：

```
MainContent_MainContent_ContentBottom_pnlNewsHeader 
```

这些附加名称与嵌套母版页中使用的 ContentPlaceholder 的名称相关。

这是页面/masterPages 的结构，从页面级别开始直到最终的 masterPage：

```
 1\. BlogPost.aspx
 2\. Blogs.master
 3\. WebFormsContentCustomBreadcrumbs.master
 4\. WebForms.master
 5\. Default.master 
```

那么我到底如何从 BlogPost.aspx 中获取位于 Blogs.master 中的 pnlNewsHeader ？？？

Ps pnlNewsHeader 前面的附加名称是它所在的 ContentPlaceHolders 的名称，这是嵌套 masterPages 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:24:49.677

您可以通过调用 me.Master 获得对母版页的引用：

```
Dim blogsMaster as Blogs = CType(me.Master, Blogs) 
```

或在 C# 中：

```
Blogs blogsMaster = (Blogs)this.Master; 
```

然后，您可以像使用页面类（我）一样使用 blogsMaster。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:02:26.470

将此标记添加到您页面的顶部并在后面的代码中访问您的母版页。更新母版页的地址。

```
<%@ MasterType VirtualPath="~/MasterPages/Main.master" %> 
```

# java - 具有多客户端的 ServerSocket

> ID：16137130
> 
> 赞同：0
> 
> 时间：2013-04-21T23:02:49.350
> 
> 标签：java, serversocket, tcpserver

ServerSocket 要与多个客户端一起使用，我们可能为每个客户端附加单独的线程以使其工作，但问题是连接工作正常并接受所有客户端但只提供最后一个连接。所以不是问题，或者这是正常的。

**服务器代码：**

```
 ServerSocket serverSocket=null;
    Socket client;
        System.out.println("Establishing Connection. Please wait...");
   try{

           serverSocket =new ServerSocket(58342);            
           System.out.println("Serever Started.");
       }catch(Exception e)
       {
           System.out.println(e.getMessage());
       }

        while (true) {
                try{
             client = serverSocket.accept();
                     new ClientThread(client).start();
                }catch(Exception e)
                {
                    String err=e.getMessage();
                    if(err == null)
                    {
                       break;
                    }else{
                        System.out.println(e.getMessage());
                    }
                }

        } 
```

**客户端线程**

```
public class ClientThread extends Thread{

    private static Socket client;
    private static String line="";
    private static DataInputStream input = null;
    private static DataOutputStream output = null;

    public ClientThread(Socket serv)
    {
      try {
            client =serv;
            input=new DataInputStream(client.getInputStream());
            output=new DataOutputStream(client.getOutputStream());
            System.out.println("New Client Connected to port:"+
                    client.getPort());
            } catch (Exception e) {
                    System.out.println(e.getMessage());
            }       
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:26:47.353

你的所有变量`ClientThread`都是`static`!!

这意味着它们**在所有`ClientThread`**. 因此，每次创建`new ClientThread`.

删除`static`，你应该没问题。

在我看来，您可能需要阅读一些[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:06:57.177

您必须在 ClientThread 的构造函数中执行 I/O。

不。

# asp.net-mvc-4 - System.ObjectDisposedException：无法访问 C# asp.net 4 中的已关闭文件

> ID：16137133
> 
> 赞同：0
> 
> 时间：2013-04-21T23:02:59.220
> 
> 标签：asp.net-mvc-4, download, filestream

我正在向客户端发送文件以供下载。文件可能很大（最多几 GB），所以我分块发送。这是我的代码：

```
//code to get data in resp stream.
        using (Stream inputStream = resp.GetResponseStream())
        {
            if (System.IO.File.Exists(TargetFile))
            {
                System.IO.File.Delete(TargetFile);
            }
            using (FileStream fs = System.IO.File.Open(TargetFile, FileMode.Create, FileAccess.ReadWrite))
            {
                byte[] buffer = new byte[SegmentSize];
                int bytesRead;
                while ((bytesRead = inputStream.Read(buffer, 0, SegmentSize)) > 0)
                {
                    fs.Write(buffer,0,bytesRead);
                }
                Response.AddHeader("Content-Disposition", "Attachment;filename=targetFileName.pdf");
                return File(fs, "application/pdf");
            }
        } 
```

当我单击链接下载时，它给了我上述错误。我尝试不返回任何内容，在这种情况下它会下载文件但文件的大小为零。错误在最后一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T15:47:01.950

我在将上传的文件附加到电子邮件时遇到了同样的问题。将以下内容添加到 web.config 工作：

```
<system.web>
    <httpRuntime executionTimeout="90" maxRequestLength="20000"  useFullyQualifiedRedirectUrl="false" requestLengthDiskThreshold="8192"/>
</system.web> 
```

# java - 在 Hbox 中查找被按下节点的位置

> ID：16137140
> 
> 赞同：3
> 
> 时间：2013-04-21T23:03:36.097
> 
> 标签：java, javafx

我有一个包含很多矩形的 Hbox。当我按下 Hbox 中的一个节点时，我希望它告诉我该矩形在 observablelist 中的位置，我该如何实现？

以下是一个尝试（但它没有工作）

```
 figureRowBox.setOnMousePressed(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent event) {
                for (Node n : figureRowBox.getChildren()) {
                    if (n.isPressed()) {
                        System.out.println(figureRowBox.getChildren().indexOf(n));
                    }
                }
            }

        }); 
```

其中 figureRowBox 是一个 Hbox

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:30:53.433

这是我用来确定在 HBox 中按下了哪个节点的命中测试例程：

```
final HBox images = new HBox(10);
...
imageView.setOnMousePressed(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    final Object selectedNode = mouseEvent.getSource();
    final int    selectedIdx  = images.getChildren().indexOf(selectedNode);

    label.setText(
      "Selected Vehicle: " + (selectedIdx + 1)
    );
  }
}); 
```

* * *

这是[完整示例代码](https://gist.github.com/jewelsea/5431780)的链接：

![选择的车辆](https://i.stack.imgur.com/wKbrk.png)

# macos - 在污染模式下读取文件时出错

> ID：16137142
> 
> 赞同：2
> 
> 时间：2013-04-21T23:03:44.117
> 
> 标签：macos, perl, taint

我正在尝试使用污点模式。我想根据用户输入打开一个文件并打开一个文件来读取数据。下面是我的代码

```
#!/usr/bin/perl -w
use strict;
use warnings;

my $name = $ARGV[0];
my $file = "/Desktop/data/$name";

open MYFILE, "$file" or die $!;

while (<MYFILE>) {
    chomp;
    print "$_\n";
}
close(MYFILE); 
```

案例 1）当我使用 perl -w filename.pl input.txt 运行文件时，我能够从文件中读取数据。

案例2）当我改变

```
#!/usr/bin/perl -w
to
#!/usr/bin/perl -T 
```

并使用 perl -T filename.pl input.txt 运行文件我仍然能够读取数据。

案例3）当我将文件更改为以写入模式打开并以污染模式运行时，我得到正确的输出，

```
Insecure dependency in open while running with -t switch at test1.pl line 8. 
```

案例两种情况可能有什么问题？或者这是一个正确的行为？

是否允许以污点模式打开文件进行读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:14:08.760

这是污点模式的正确行为。[该文档](http://perldoc.perl.org/perlsec.html#Taint-mode)指定：

> 你不能使用从你的程序外部获得的数据来影响你的程序之外的其他东西——至少，不是偶然的。
> 
> [...]
> 
> `$arg = shift; # $arg is tainted`
> 
> [...]
> 
> 如果你尝试做一些不安全的事情，你会得到一个致命的错误，比如“不安全的依赖”或“不安全的 $ENV{PATH}”。

（编辑：错过了一些东西）：

> 受污染的数据不得直接或间接用于任何调用子 shell 的命令，也不得用于任何修改文件、目录或进程的命令，但以下情况除外：
> 
> *   不检查 print 和 syswrite 的参数是否有污染。

（这就是读取模式示例不抱怨文件数据的原因。）

命令行参数可能不安全，因此除非另有说明，否则会受到污染。

要确定数据是否被污染：

> 要测试变量是否包含受污染的数据，以及其使用是否会触发“不安全依赖”消息，您可以使用 Scalar::Util 模块的 tainted() 函数，该模块在您附近的 CPAN 镜像中可用，并包含在 Perl 开始从 5.8.0 版开始。

清除数据：

> [...]绕过污染机制的唯一方法是从正则表达式匹配中引用子模式。Perl 假定如果您使用`$1`,`$2`等引用子字符串，那么您在编写模式时就知道自己在做什么。这意味着要花点心思——不要盲目地清除任何东西，否则你会破坏整个机制。最好验证变量是否只有好字符（对于某些“好”值），而不是检查它是否有坏字符。那是因为很容易错过你从未想过的坏角色。

（带有警告`use locale`）：

> 如果您正在编写一个区域设置感知程序，并且想要使用包含 的正则表达式清洗数据，请在同一块中的表达式前面`\w`放置。有关进一步的讨论和示例，`no locale`请参阅[perllocale 中的 SECURITY 。](http://perldoc.perl.org/perllocale.html#SECURITY)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:07:14.463

这可以防止以下内容清除您的硬盘驱动器：

```
perl script.pl '| rm -rf /' 
```

解决方案：使用`open`只接受文件名的形式。

```
open(my $fh, '<', $ARGV[0]) 
```

# java - 在java中使用内部类扩展类（以及从一个类到另一个类时扩展内部类）

> ID：16137148
> 
> 赞同：0
> 
> 时间：2013-04-21T23:04:09.900
> 
> 标签：java, inner-classes

我在嵌套类和子类之间的关系方面遇到问题。考虑以下代码：

```
class Graph {
  class Edge {
    ...
  }

  class Vertex {
    List<Edge> _edges;
    ...
  }
  ...
}

class WeightedGraph extends Graph {
  class WeightedEdge extends Edge {
    ...
  }
  ...
} 
```

问题是，在为 WeightedGraph 编写方法时，我无法访问 _edges；编辑说它不能从类型 Edge 转换为 WeightedEdge。我想我还必须扩展嵌套类 Vertex，因为在 Graph 中它使用 Edge 类型，而在 WeightedGraph 中它必须使用 WeightedEdge 类型。什么是这样做的好方法（无需重新编写代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:08:28.287

您已`_edges`声明为 的成员`Graph.Vertex`。只有`Vertex`或其子类具有该成员。如果你想让你的类拥有它，你也需要子类`Vertex`。

编辑：听起来你还有一个额外的问题，即 co 和逆变。问题是基类被声明为包含一个具有泛型类型的列表`Edge`。虽然您可以将它们存储`WeigtedEdges`在其中，但如果没有强制转换，您将无法将它们取回，因为编译器所知道的只是它包含常规`Edges`.

我不记得泛型的确切规则，但我相信这些方面的一些东西可能会有所帮助。或者，您可以硬着头皮添加额外的演员表。泛型的目的是帮助添加一些额外的编译时类型检查，但是当它妨碍时，你可以忽略它。唯一的风险是错误更容易溜进来，因为类型只会在运行时检查。

```
class Vertex <T extends Edge> {
    List<T> _edges;
    ...
  }

class WeightedVertex extends Vertex<WeightedEdge> {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:11:23.820

您可以定义用于访问`Vertex`from的类字段的方法`WeightedGraph`。

就像是：

```
class Graph
{
   ...
    protected List<Edge> getVertexEdges(Vertex v)
    {
        return v._edges;
    }
} 
```

所以你可以在你的子类中使用这个助手

# java - Java重新缩放图像创建半白半灰图像

> ID：16137150
> 
> 赞同：0
> 
> 时间：2013-04-21T23:04:14.243
> 
> 标签：java, image, bufferedimage, graphics2d

我在使用 Grapics2D API 时遇到问题，我正在尝试重新调整图像的大小，但不是获得较小的图像，而是显示半白色和半灰色区域。我究竟做错了什么？我尝试了使用和不使用渲染提示但它没有工作，或者是否有另一种方法可以给我一个指定大小的新缓冲图像对象？

```
//height = 400, width = 600, capture_rect = screen size
BufferedImage img = robot.createScreenCapture(CAPTURE_RECT);
BufferedImage resized = new BufferedImage(WIDTH, HEIGHT, img.getType());
Graphics2D g = resized.createGraphics();
g.drawImage(img, 0, 0, WIDTH, HEIGHT, 0, 0, img.getWidth(), img.getHeight(), null);
g.dispose();
setImage(resized); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:31:55.023

请参阅有关[Image.getScaledImage 的风险的](https://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)文章。它有一些建议。

这是它推荐的一些代码：

```
private float xScaleFactor, yScaleFactor = ...;
private BufferedImage originalImage = ...;

public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D)g;
    int newW = (int)(originalImage.getWidth() * xScaleFactor);
    int newH = (int)(originalImage.getHeight() * yScaleFactor);
    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                        RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    g2.drawImage(originalImage, 0, 0, newW, newH, null);
} 
```

看起来您只需要指定新的宽度/高度，它就会自动为您进行缩放。

或者问题可能出在 img.getType() 方法上。您应该能够使用：

```
BufferedImage.TYPE_INT_RGB // (or ARGB) 
```

看看哪个效果最好。

# c - 如何在单个服务器中结合 TCP 和 UDP？

> ID：16137151
> 
> 赞同：0
> 
> 时间：2013-04-21T23:04:24.047
> 
> 标签：c, linux, sockets, udp, tcpserver

我对套接字编程完全陌生，我想用 C 编写一个组合的 TCP/UDP-Server 套接字，但我不知道如何将这两者结合起来。

所以目前，我确实知道 TCP 和 UDP 服务器/客户端是如何工作的，并且我已经为 TCP 和 UDP 编写了客户端。我也知道我必须以某种方式使用 select() 函数，但我不知道该怎么做。

我必须读取两个数字，它们使用 TCP 或 UDP 客户端发送到 TCP/UDP 服务器，然后用这些数字进行一些计算，然后在服务器上打印结果。

有谁知道该教程或示例代码，或者可以帮助我吗？

或者至少是对 select() 函数的一个很好的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:09:35.580

基本上，使用事件循环。它是这样工作的：

1.  我现在有什么需要做的吗？如果是这样，那就去做吧。

2.  计算我下一次需要做某事的时间。

3.  调用`select`指定我愿意在读取集中读取的所有套接字以及我试图在写入集中写入的所有套接字。

4.  如果我们发现任何可以读取的套接字，请从中读取。

5.  如果我们发现任何已准备好写入的套接字，请尝试写入它们。如果我们写了我们需要写的所有东西，请将它们从写集中删除。

6.  转到步骤 1。

通常，要写入套接字，请遵循以下逻辑：

1.  我是否已经尝试写入此套接字？如果是这样，只需将其添加到队列中，我们就完成了。

2.  尝试将数据写入套接字。如果我们全部发送，我们就完成了。

3.  将剩余的保存在队列中并将这个套接字添加到我们的写入集中。

要记住三件事：

1.  您必须将所有套接字设置为非阻塞。

2.  确保在将文件描述符集传递给之前复制它们，`select`因为`select`会修改它们。

3.  对于 TCP 连接，您可能需要自己的写入队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T06:02:01.123

1）简单编写一个tcp/udp服务器代码，收到消息后打印出来。

2) 将打印代码替换为 process_message() 函数。

然后你已经成功地将 TCP 和 UDP 服务器结合到相同的过程中。

小心你的处理程序，它应该能够应对并行执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:10:52.157

这个想法是在你的服务器内部混合一个 TCP 部分和一个 UDP 部分。

然后多路复用输入。您可以使用旧的[select(2)](http://man7.org/linux/man-pages/man2/select.2.html)多路复用调用，但它有局限性（google for `C10K problem`）。最好使用[poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html) 多路复用调用。

您可能想要使用一些事件循环库，例如[libev](http://software.schmorp.de/pkg/libev.html)（它使用`select`或`poll`或一些更高级的机制，例如`epoll`）。顺便说一句，图形工具包（例如 GTK 或 Qt）也提供了它们自己的偶数循环机制。

阅读一些不错的 Linux 编程书籍，例如[Advanced Linux Programming](http://advancedlinuxprogramming.com/) 书籍（可在线获得），其中有关于多路复用系统调用和事件循环的好章节。这些太复杂了，无法在几分钟内在这样的答案中很好地解释。书籍更好地解释了它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-08T02:17:51.090

你可以试试这个[stream_route_handler](https://github.com/Taymindis/stream_route_handler)，它是 c/c++ 应用程序，你可以在你的单个 c/c++ 应用程序中添加 tcp/udp 处理程序。这一直被用于交通繁忙的路线，以及测井服务的目的。

使用示例

```
void read_data(srh_request_t *req);
void read_data(srh_request_t *req) {
  char *a = "CAUSE ERROR FREE INVALID";

  if (strncmp( (char*)req->in_buff->start, "ERROR", 5) == 0) {
    free(a);
  }
  // printf("%d,  %.*s\n", i++, (int) (req->in_buff->end - req->in_buff->start), req->in_buff->start);
  srh_write_output_buffer_l(req, req->in_buff->start, (req->in_buff->end - req->in_buff->start));
  // printf("%d,  %.*s\n", i++, (int) (req->out_buff->end - req->out_buff->start),   req->out_buff->start);
} 

int main(void) {

  srh_instance_t * instance = srh_create_routing_instance(24, NULL, NULL);
  srh_add_udp_fd(instance, 12345, read_data, 1024);
  srh_add_tcp_fd(instance, 3232, read_data, 64);

  srh_start(instance);

  return 0;
} 
```

如果您使用的是 C++ 程序，您可能会喜欢这个示例代码。 [使用 spdlog 的流路由](https://github.com/Taymindis/stream_route_handler/blob/master/sample_with_spdlog.cpp)

# php - Ajax 内容和 Css 定位

> ID：16137157
> 
> 赞同：0
> 
> 时间：2013-04-21T23:05:00.850
> 
> 标签：php, css, jquery

希望有人能看到我的错误。如果你看一下我的[测试页，可能最简单](http://wx2fly.com/test/ "测试页面")

请注意`<div id="ajax" style="background-color:red">`
单击`.menu {position:fixed;}`元素时内容的变化。

奇怪的是，只有一个（Home）改变了其他的（Prog、Jet、Wind、Mesonet、Disc、Rad/Sat）

ajax 调用的 PHP 在所有页面上都具有类似的格式，如下所示：

```
<?php  
// do php stuff
echo <<<HTML
<div class="content">
<!-- html stuff -->
</div>
HTML; 
```

不知道它是 PHP 还是 css 问题，我尝试过的没有任何迹象。
感谢您的想法...谢谢

编辑：添加了ajax

```
var options = {
        success: function(result) { $("#ajax").html(result); }, 
        beforeSend: function() {},
        url: file,  
        type: "post"
            };  
$.ajax(options); 
```

编辑：已解决
我的问题的答案是 Explosion Pills 给出的“在内容 div 之前插入了一些空格”。奇怪的是，某些事情是由于`include "file.php";`在 home.php 中调用PHP 引起的。
我认为另一个问题是合适的，所以我稍后会在此处发布链接。
谢谢所有
[后续问题在这里](https://stackoverflow.com/questions/16139630/why-does-php-include-statement-return-whitespace-as-ajax-response)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:49:26.180

您的成功功能正在替换您的内容：

`<div id="ajax" style="background-color:red"><div class="content"></div></div>`

**和：**

`<div id="ajax" style="background-color:red">`*阿贾克斯内容*`</div>`

'content' 类具有 CSS：`.content {margin:auto; background-color:#eee; border-radius:15px; border:3px solid black; padding:.5em;}`随着 ajax 成功而被删除。

只需`<div class="content"></div>`从您的页面中删除或修改成功功能以使用以下内容替换第一个内容`div`：`success: function(result) { $("#ajax div:first").html(result); },`...

# java - setLocationRelative 到另一个 JFrame

> ID：16137159
> 
> 赞同：0
> 
> 时间：2013-04-21T23:05:27.123
> 
> 标签：java, swing

如何设置相对于另一个 JFrame 类的 JFrame 类？

我知道，如果我在与我想要居中的那个类中创建一个 JFrame `setLocationRelativeTo(this)`，但由于类越来越长，我将它缩减为更小的 JFrame 类。

到目前为止，我不得不使用`setLocationRelativeTo(null)`它来居中，但是当我希望弹出的 JFrame 位于主 JFrame 之上时，这并不是很好。

# javascript - 如何在 Parse API 中进行嵌套查询？

> ID：16137165
> 
> 赞同：0
> 
> 时间：2013-04-21T23:06:27.353
> 
> 标签：javascript, jquery, parsing

在用户对象中，有一系列特征：

技能：{"piano:10", "singing:5", ....};

那么我想选择具有“钢琴”技能的用户，我该怎么做？它不会完全匹配，但它具有相同的规则：从字符串 'piano' 开始

谢谢！

我正在尝试通过以下方式查询：

```
var query = new Parse.Query(Parse.User);
query.startsWith('skills', skill); 
```

但这不起作用。我尝试使用包含，也不起作用...任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:58:22.847

要从数组中提取子集，我发现 reduce 非常方便。我会这样做：

```
var arr = [{piano:3, guitar:8, name: 'benny'}, {drums:4, name: 'anna'}];

arr.reduce(function (ack, current) {
    if (current.hasOwnProperty('piano')) {
        ack.push(current);
    }
    return ack;
}, []);

// Result: [{piano:3, guitar:8, name: 'benny'}]; 
```

# php - 将数组值 + 单个表单值插入所有行

> ID：16137170
> 
> 赞同：0
> 
> 时间：2013-04-21T23:06:59.060
> 
> 标签：php, mysql

我正在尝试将表单中的值插入到我的 mysql 数据库中。我有单值表单+表单中的数组值。如何将数组值插入到我的数据库中，并将单个表单值附加到所有行？

的HTML：

```
Start:<br>
    <input type="text" name="start" id="start">

End:<br>
    <input type="text" name="end" id="end">

<input type="text" name="item[]" placeholder="Manufacturer #" /><br>

    <input type="text" name="description[]" placeholder="Description" /><br>

    <input type="text" name="item[]" placeholder="Manufacturer #" /><br>

    <input type="text" name="description[]" placeholder="Description" /><br>

    <input type="text" name="item[]" placeholder="Manufacturer #" /><br>

    <input type="text" name="description[]" placeholder="Description" /><br> 
```

PHP：

```
if (isset($_POST['submit']))
            {
                $link = mysql_connect('localhost',     'user', 'pass');
if (!$link) {
die('Could not connect: ' . mysql_error());
}
mysql_select_db("mydb") or die(mysql_error());
echo 'Connected successfully';

$query = "INSERT INTO agreement (start, end, item_number, item_description) VALUES ";
foreach($_POST['item'] as $i => $item) 
{ 
  // Get values from post.
  $item = mysql_real_escape_string($item);
  $description = mysql_real_escape_string($_POST['description'][$i]);
  $start = mysql_real_escape_string($_POST['start'][$i]);
  $end = mysql_real_escape_string($_POST['end'][$i]);

  // Add to database
  $query = $query." ('$start','$end','$item','$description') ,";
}
$query = substr($query,0,-1); //remove last char
$result = mysql_query($query);
            } 
```

我会将代码更改为 mysqli/pdo，我知道当前代码是不安全的。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:10:07.580

只需使用`$_POST['start']`和`$_POST['end']`不使用数组访问，因为它们每次都是相同的。您可以对项目和描述使用数组访问。

# c - C指针错误值？

> ID：16137180
> 
> 赞同：1
> 
> 时间：2013-04-21T23:08:34.543
> 
> 标签：c, pointers

我还在学习 C。我已经实现了一个简单的单词猜测程序。在玩调试时，我看到我的指针实际上指向真实的内存值，但是当我初始化一个 char 数组（不同的）时，指向其他 char 数组的指针也被初始化。这是代码的开头：

```
char *theword = pickAWord();//returns a word from .dat file
char guess[40]; //guess = 0x003afa94 
char guessedWord[20]; //guessedWord = 0x003afa78 
char play_again;
char *guessedWordp = guessedWord; //guessedWordp = 0x003afa78

int guessedWordIndex = 0;
int a = strlen(theword)-1;
int found = 0;
int *foundp = &found;
int *hakp = &hak;
int *guessedWordIndexp = &guessedWordIndex; 
```

当我像这样初始化guess char数组时：

```
for(i=0; i<a; i++){
    guess[i*2] = '_';
    guess[i*2+1] = ' ';
    if(i==a-1) guess[i*2+1] = '\0';
} 
```

突然，*guessedWordp 指针和数组值改变如下：

```
guessedWordp = 0x003afa78 "ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ_ _ _ _ _ _ _"
guessedWord = 0x003afa78 "ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ_ _ _ _ _ _ _" 
```

我只是很好奇为什么“_ _ _ _ _ _ _”当我实际初始化它以猜测char数组时，这个添加在guessedWordp指针的末尾（顺便说一下，猜测数组正确地用正确的值初始化）

我正在使用视觉工作室 2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:17:22.143

你可以忽略它，它没有意义。你还没有初始化`guessedWord`，这就是`guessedWordp`指向。所以内容完全没有意义。

如果你愿意，添加`guessedWord[0] = 0;`初始化`guessedWord`为一个空字符串，谜团就会消失。

# actionscript-3 - AS3 选择影片剪辑内的组合框

> ID：16137185
> 
> 赞同：0
> 
> 时间：2013-04-21T23:09:03.790
> 
> 标签：actionscript-3, combobox, movieclip, dataprovider

我不确定是否有更好的方法来做到这一点，如果有请告诉我。但是现在，我有一个包含名称的组合框列表。

组合框是 stu1、stu2、stu3 等，一直到 63 并保存在 allStudents MovieClip 中

```
for(var i = 0; i < allStudents.length; i++)
{
    var newTempStudent:ComboBox = allStudents.getChildAt(i);

    newTempStudent.dataProvider.addItem({label: fullName, data:fullName});
    newTempStudent.getChildAt(i).dataProvider.sortOn("label");
    newTempStudent.getChildAt(i).selectedItem = allStudents.getChildAt(i).getItemAt(i);

} 
```

本质上，我正在尝试：

从同一个 dataProvider 获取所有 63 个组合框进行更新，

按字母顺序对它们进行排序，

然后为每个学生设置默认选择（stu1 应该显示 dataProvider(0)，stu2 应该显示 dataProvider(1) 作为默认选择）

我得到的错误是：

场景 1，图层“图层 1”，第 1 帧，第 83 行 1118：将具有静态类型 flash.display:DisplayObject 的值隐式强制转换为可能不相关的类型 fl.controls:ComboBox。

现在我假设我得到了它，因为它正在寻找的是作为显示对象并执行组合框命令的影片剪辑，但我不确定如何执行此操作本身。

最初我打算使用 dataGrid 来执行此操作，但是当我尝试将 dataGrid 链接到 checkBoxes 以进行出勤时，它变得太复杂了。

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:22:29.717

试试这个代码：

```
for(var i = 0; i < allStudents.length; i++)
{
    var newTempStudent:ComboBox = allStudents.getChildAt(i) as ComboBox;

    newTempStudent.dataProvider.addItem({label: fullName, data:fullName});
    newTempStudent.getChildAt(i).dataProvider.sortOn("label");
    newTempStudent.getChildAt(i).selectedItem = allStudents.getChildAt(i).getItemAt(i) as ComboBox;

} 
```

getChildAt() 返回一个 DisplayObject，因此您需要将其转换为 ComboBox。

# asp.net-web-api - .Net Web API IActionFilter.OnActionExecuted 返回类型

> ID：16137189
> 
> 赞同：2
> 
> 时间：2013-04-21T23:09:42.953
> 
> 标签：asp.net-web-api

我在 .Net Web API 上有一个应用程序。执行每个操作后，我想查看结果并更改其中的内容。

说我的 API controllerAction 看起来像

```
public Car Get()
{
  ...
} 
```

执行完动作后，我想在这种情况下修改返回类型的属性 Car （但对于不同的动作可以不同）。

我知道 IActionFilter.OnActionExecuted() 在执行操作后被调用。但我不确定如何访问此方法中的返回类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T04:53:38.893

您应该能够通过查看对操作执行上下文的响应来做到这一点。如果您想获得汽车并对其进行修改，您可以编写如下内容：

```
Car car;
if (actionExecutedContext.Response.TryGetContentValue<Car>(out car))
{
    // modify the car to send back in the response
} 
```

如果要检查响应的类型，可以编写：

```
ObjectContent objectContent = actionExecutedContext.Response.Content as ObjectContent;
if (objectContent != null)
{
    Type responseType = objectContent.ObjectType;
    // do stuff with the type
} 
```

# php - ajax 提交函数不返回响应，但它更新数据库

> ID：16137192
> 
> 赞同：0
> 
> 时间：2013-04-21T23:09:49.907
> 
> 标签：php, ajax, jquery, jquery-plugins

这是我使用 jquery 通过客户端验证的第一个表单，我遇到了 .ajaxSubmit 函数的问题（我也只是使用了 .ajax），当单击提交按钮时，数据库已更新，但 ajax 函数没有t 将结果返回到页面。因此，当我单击提交按钮时，它看起来好像什么都没有发生，但是当我查看数据库时，字段会随数据更新。另外，当我注释掉 ajax 函数并只使用警报时，当我单击提交按钮时，会弹出警报。如果有人可以帮助我，因为我已经为此工作了一周。

这是 html 和 jQuery 脚本：

```
<html>
<head>
<style type="text/css">
<!--
@import "./css/job.css";
-->
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="./js/jquery.validate.js"></script>
<script type="text/javascript" src="./js/jquery.form.js"></script>
<script type="text/javascript">
(function($,W,D) {
    var JQUERY4U = {};

    JQUERY4U.UTIL =
    {
        setupFormValidation: function() {
            //form validation rules
            $("#job").validate({
                 rules: {
                        jobtype: {
                        required: true },
                        account: {
                        required: true,
                        minlength: 8 },
                        phone: {
                        required: true,
                        minlength: 7 },
                        comment: {
                        required: true,
                        minlength: 5 },
                        available: {
                        required: true,
                        minlength: 3 }
                        },
                messages: {
                        jobtype: {
                        required: "Select a job type" },
                        account: {
                        required: "Enter account in correct format" },
                        phone: {
                        required: "Enter phone number" },
                        comment: {
                        required: "Enter WIP details" },
                        available: {
                        required: "Enter an available timeframe" }
                        },
                submitHandler: function(form) {
//                        alert("Submitting Job");
                        $(form).ajaxSubmit({
                                        url: 'response.php',
                                        type: 'POST',
                                        data: {
                                        jobtype: $("#jobtype").val(),
                                        account: $("#account").val(),
                                        phone: $("#phone").val(),
                                        comment: $("#comment").val(),
                                        available: $("#available").val(),
                                        },
                                        dataType: 'json',
                                                cache: false,
                                        timeout: 7000,
                                        success: function(data) {
                                        $('form #schedTable').html(data.msg).fadeIn('fast');
                                }
                        });
                }
            });
        }
    }
    //when the dom has loaded setup form validation rules
    $(D).ready(function($) {
        JQUERY4U.UTIL.setupFormValidation();
    });
})(jQuery, window, document);
</script>
</head>
<body>
<div id="jobForm">
<form id="job" name="job" action="response.php" method="post" novalidate="novalidate">
<h1>Job Scheduling</h1>
<label>Type</label>
<select id="jobtype" name="jobtype">
  <option value="" selected>&lt;&lt; SELECT &gt;&gt;</option>
  <option value="service">Service</option>
  <option value="install">Install</option>
</select>
<label>Account</label>
<input type="text" id="account" name="account" maxlength="10" size="10">
<label>Phone</label>
<input type="text" id="phone" name="phone" maxlength="7" size="7">
<label>Comment</label>
<textarea id="comment" name="comment" rows="2" cols="40" maxlength="40"></textarea>
<label>Available</label>
<input type="text" id="available" name="available" maxlength="20" size="20">
<input id="submit" name="submit" type="submit" value="Submit" class="submit">
</form>
</div>

<div id="schedTable"></div>

</body>
</html> 
```

这是 response.php 代码：

```
<?php

$mydb connection info here

?>

<!DOCTYPE HTML>
<html>
<head>
<title>Test Form</title>
<link rel="shortcut icon" href="/favicon.ico">
</head>
<body>

<?php

// form inputs
$account = trim($_POST['account']);
$type = $_POST['type'];
$phone = $_POST['phone'];
$comment = trim($_POST['comment']);
$available = trim($_POST['available']);

// Insert into mysql db
$ins = mysql_query(sprintf("INSERT INTO table (type,comment,available,phone,account) VALUES ('%s','%s','%s','%s','%s')", $type,$comment,$available,$phone,$acct)) or die(mysql_error());

$sched = mysql_query(sprintf("SELECT * FROM table ORDER BY type asc"));

$return['msg'] = "
    <table border='1'>
    <tr>
    <th>Type</th>
    <th>Account</th>
    <th>Comment</th>
    </tr>";

    while($rowu = mysql_fetch_array($sched)) {
    $return['msg'] .= "
        <tr>
        <td>{$type}</td>
        <td>{$acct}</td>
        <td>{$comment}</td>
        </tr>";
        }
        $return['msg'] .= "</table>";

       // header("Content-Type: text/javascript; charset=utf-8");
       // $return['msg'] = "Testing " .$account . "works";

        header('Content-Type: application/json');
        echo json_encode($return);

?>
</body>
</html> 
```

更新：我删除了所有的 html 并且在使用 chrome 时问题是一样的。当我使用 IE 8 并单击提交按钮时，它要求打开或另存为文本文件（也多次重复相同的表单数据）：

```
{"msg":"<table border='1'><tr>\n    <th>Type<\/th>\n    <th>Account<\/th>\n    <th>Comment<\/th>\n    <\/tr><tr>\n        <td>other<\/td>\n        <td>12345678<\/td>\n        <td>sssss<\/td>\n   <\/tr><tr>\n      <td>other<\/td>\n        <td>12345678<\/td>\n        <td>sssss<\/td>\n      <\/tr><tr>\n        <td>other<\/td>\n        <td>12345678<\/td>\n        <td>sssss<\/td>\n      <\/tr><\/table>"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:15:16.277

去掉 php 逻辑周围的所有 html。这导致了问题，响应需要只有 json 而不是 html + json + html。

```
<?php

$mydb connection info here    

// form inputs
$account = trim($_POST['account']);
$type = $_POST['type'];
$phone = $_POST['phone'];
$comment = trim($_POST['comment']);
$available = trim($_POST['available']);

// Insert into mysql db
$ins = mysql_query(sprintf("INSERT INTO table (type,comment,available,phone,account) VALUES ('%s','%s','%s','%s','%s')", $type,$comment,$available,$phone,$acct)) or die(mysql_error());

$sched = mysql_query(sprintf("SELECT * FROM table ORDER BY type asc"));

$return['msg'] = "
    <table border='1'>
    <tr>
    <th>Type</th>
    <th>Account</th>
    <th>Comment</th>
    </tr>";

    while($rowu = mysql_fetch_array($sched)) {
    $return['msg'] .= "
        <tr>
        <td>{$type}</td>
        <td>{$acct}</td>
        <td>{$comment}</td>
        </tr>";
        }
        $return['msg'] .= "</table>";

       // header("Content-Type: text/javascript; charset=utf-8");
       // $return['msg'] = "Testing " .$account . "works";

        header('Content-Type: application/json');
        echo json_encode($return); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:16:00.107

返回无效的 JSON 可能是由于发出了未定义数组索引的通知`msg`，`$return`但更可能是因为发出了大量 HTML。基本上这会返回：

```
<some html>JSON<some html> 
```

这不是有效的 JSON，因此 jQuery 不会调用`success`回调。删除*所有HTML 并**仅*发出JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:15:10.457

响应现在有效。我将代码更改为以下内容，结果现在显示在我的 schedTable div 中，无需刷新页面：

```
submitHandler: function(form) {
     var data = $("#job").serialize();
     $.ajax({
     type: 'POST',
     url: 'response.php',
     data: data,
     cache: false,
     success: function(data) {  
          $('#job')[0].reset();
          $('#schedTable').html(data).fadeIn('fast');
     }
     });
} 
```

但是，现在显示的结果并不完全正确。比如说，我通过表单提交了 3 个作业，只有第三个作业会显示 3 次，而不是数据库中显示的所有 3 个作业。猜猜，我回到绘图板上搜索这个问题。感谢 Explosion Pills 和 Musa 的建议。

更新：将 while 循环更改为 json 数组方法解决了此问题。现在一切正常。

# java - java堆大小按部分增长到某个限制

> ID：16137193
> 
> 赞同：0
> 
> 时间：2013-04-21T23:10:02.293
> 
> 标签：java, memory, garbage-collection, benchmarking

我正在用 Java 编写一个简单的服务器应用程序，现在我正在使用*Apache 基准*进行一些基准测试。

启动后服务器使用的常驻内存大约为40M。我提出了一系列 1000 个请求（100 个并发请求）。在每个系列之后，我再次检查内存使用情况。结果对我来说似乎很奇怪。

在基准测试的第一次运行期间，99% 的请求在大约 20 毫秒内处理，其余 1% 的请求在大约 300 毫秒内处理（！）。同时内存使用量增长。在 5-7 次运行后，这种增长停止在 120M 并且请求开始运行得更快——每个请求大约 10 毫秒。此外，当我增加请求数时，时间和内存值保持不变。

为什么会发生这种情况？如果发生内存泄漏，那么我的服务器将需要越来越多的资源。我只能建议这是因为一些自适应 JVM 内存分配机制会提前增加堆大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:21:48.383

堆从 开始`Xms`并根据需要增长到指定的 limit `Xmx`。

JVM 需要一段时间来“警告”是正常的——各种优化都发生在运行时。

如果记忆爬升到一个点然后停止爬升，你就没事了。

如果内存无限增长并且程序最终抛出 an`OutOfMemoryError`那么你就有问题了。

从您的描述看来，前者是真的，所以没有内存泄漏。

# ruby - 覆盖 Ruby 中的桌面应用程序

> ID：16137198
> 
> 赞同：0
> 
> 时间：2013-04-21T23:10:42.267
> 
> 标签：ruby, code-coverage, desktop-application

我正在用 Ruby 编写一个简单的桌面应用程序。对于测试，我的选择是 minitest。现在我想测量测试覆盖率。对于 Ruby on Rails，您可以使用 Simplecov ( [https://github.com/colszowka/simplecov](https://github.com/colszowka/simplecov) )。它可以与桌面应用程序一起使用吗？如果是这样，怎么做？（我是 Ruby 的新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:54:12.340

文档的编写似乎确实偏向于 Rails 应用程序，但我没有看到任何内容会阻止您将 Simplecov 与任何 Ruby 应用程序、GUI 或其他应用程序一起使用。我过去曾将 Simplecov 用于命令行应用程序。

[根据标题为“与任何框架一起使用”](https://github.com/colszowka/simplecov#use-it-with-any-framework)的部分，使用 minitest 也不应该给您带来任何问题。

# php - 即使 memory_limit 可以，PHP 内存耗尽问题

> ID：16137200
> 
> 赞同：0
> 
> 时间：2013-04-21T23:10:58.043
> 
> 标签：php, memory-management

首先，我知道这些关于“memory_limit”错误的问题已经被问了好几次，并且给出的大多数解决方案都涉及 ini_set 修改，但我认为这不是我的情况。

事实上，我确实收到了：[21-Apr-2013 22:21:48 UTC] PHP 致命错误：在 /home/xxx/public_html/www4/admincenter 中允许的内存大小为 52428800 字节已用尽（试图分配 16000 字节） /clientes/102/slides/nuevo_slide.php 第 20 行

如您所见，允许的总内存大小实际上大于函数尝试分配的大小，但我仍然收到相同的错误：\ 据我所知，imagecreatefromjpeg 函数应该有问题（如错误行指出：20）

这是我的代码：顺便说一下，它适用于 img1 而不是 img2：

*   img1 = 139kb，1000 x 300 像素
*   img2 = 648kb，4000 x 3000 像素

两个大小都在允许的内存之下。我真的很感谢你在这方面的帮助。谢谢！

```
<?php ini_set("memory_limit", "100M");  ?>
<?php require_once '/home/xxx/private_html/0a/configuration.php';?>
<?php require_once '/home/xxx/private_html/102/configuration.php';?>
<?php

    $titulo = ucwords($_POST['titulo']);
    $texto = utf8_encode($texto);

    $q = "INSERT INTO slides (`id`, `titulo`, `texto`, `fecha`) VALUES (NULL, '".$titulo."', '".$texto."', CURRENT_TIMESTAMP)";
    $sql = mysql_query($q);
    $id = mysql_insert_id();

    for ($i = 1; $i < 3; $i++){
        if ($_FILES["foto"]["type"] == "image/jpeg" || $_FILES["foto"]["type"] == "image/pjpeg" ){
            if($_FILES["foto"]["type"] == "image/jpeg" || $_FILES["foto"]["type"] == "image/pjpeg"){    
                $image_source = imagecreatefromjpeg($_FILES["foto"]["tmp_name"]);                   
            }       

            if ($i == 1){
                $max_upload_width = 902;
                $max_upload_height = 289;
                $remote_file = $sld .$id."_".$max_upload_width."x".$max_upload_height.".jpg";               
            }

            if ($i == 2){
                $max_upload_width = 166;
                $max_upload_height = 67;
                $remote_file = $sld .$id."_".$max_upload_width."x".$max_upload_height.".jpg";               
            }

            imagejpeg($image_source,$remote_file,100);
            chmod($remote_file,0755);

            // get width and height of original image
            list($image_width, $image_height) = getimagesize($remote_file);
            if($image_width>$max_upload_width || $image_height >$max_upload_height){
                $proportions = $image_width/$image_height;
                if($image_width>$image_height){
                    $new_width = $max_upload_width;
                    $new_height = round($max_upload_width/$proportions);
                }else{
                    $new_height = $max_upload_height;
                    $new_width = round($max_upload_height*$proportions);
                }       

                $new_image = imagecreatetruecolor($max_upload_width , $max_upload_height);
                $image_source = imagecreatefromjpeg($remote_file);

                imagecopyresampled($new_image, $image_source, 0, 0, 0, 0, $max_upload_width, $max_upload_height, $image_width, $image_height);
                imagejpeg($new_image,$remote_file,100);
                imagedestroy($new_image);
            }   
            imagedestroy($image_source);
        }
    }

    header("Location: index.php?msg=350");
    exit();
?> 
```

# c# - 如何在dataGridViewComboBoxCell中呈现多种控件类型

> ID：16137209
> 
> 赞同：0
> 
> 时间：2013-04-21T23:12:45.573
> 
> 标签：c#

我正在开发一个 C# winForm，它使用一个具有多个 DataGridViewCell 类型的 Column 的 dataGridView。例如

```
DataGridView dvg = new DataGridView();
dgv.Columns.Add("colCtrl", "Ctrl");

DataGridViewComboBoxCell cboCell = new DataGridViewComboBoxCell();

TextBox txtBox = new TextBox();
txtBox.Name = "MyTextBox";
txtBox.KeyDown += txtBox_KeyDown;

cboCell.Items.Add(txtBox);

DataGridViewRow row = new DataGridViewRow();
row.Cells.Add(cboCell);

dgv.Rows.Add(row);

private void txtBox_KeyDown(object sender, KeyEventArgs e)
{
   DataGridViewComboBoxCell cb = (DataGridViewComboBoxCell)     ((TextBox)sender).Parent;
   TextBox txtBox = (TextBox)sender;

   if (e.KeyCode == Keys.Enter)
   {
       if (!cb.Items.Contains(txtBox.Text))
           cb.Items.Add(txtBox.Text);
   }
} 
```

textBox 控件未呈现给组合框项集合。当我单步执行代码时，它似乎被添加了，但它没有出现。我基本上想使用文本框将字符串项添加到我的组合框 dropDownList 中。我在这里做错了什么？

提前致谢，-DA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:28:13.637

我要说的是 MSFT 需要回到绘图板并修改 dataGridView。不要误会我的意思，它有很多很好的功能，但它的方式令人费解，并且缺乏您期望 API 支持的通用功能！似乎每次我使用 dataGridView 时，我都必须跳过箍来完成最简单的任务，但无论如何，这是我渲染文本框的 hack 工作......请记住，这是一个 HACK，远不是正确的方法这样做，哦，好吧...希望这对某人有所帮助。

```
    公共类 DropDownCellWithTextBox : DataGridViewComboBoxCell
    {
       ContextMenuStrip 下拉列表；
       ToolStripTextBox txtBox;
       DataGridView dgv；

       公共 DropDownCellWithTextBox(DataGridView _dgv)
       {
           dgv = _dgv;

           dropDownList = new ContextMenuStrip();

           txtBox = new ToolStripTextBox();
           txtBox.BorderStyle = BorderStyle.FixedSingle;
           txtBox.KeyDown += txtBox_KeyDown;

           dropDownList.Items.Add(txtBox);
       }

   公共覆盖无效InitializeEditingControl（int rowIndex，
   对象 initialFormattedVaulue, DataGridViewCellStyle dataGridViewCellStyle)
   {
       base.InitializeEditingControl(rowIndex,initialFormattedValue,dataGridViewCellStyle);

            ContextMenuStrip cms = DataGridView.EditingControl 作为 ContextMenuStrip;
   }

    受保护的覆盖无效 OnMouseClick(DataGridViewCellMouseEventArgs e)
    {
        //base.OnMouseClick(e)
        dropDownList.Size = dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Size;
        dropDownList.Show(dgv.PointToScreen(new Point(eX, eY));
    }

    私人无效txtBx_KeyDown（对象发送者，KeyEventArgs e）
    {
        ToolStripTextBox txt = (ToolStripTextBox)sender;
        if (txt.Text == "")
            返回;

        if (e.KeyCode == Keys.Enter)
        {
            ToolStripMenuItem tsmi = new ToolStripMenuItem(txt.Text);
            tsmi.Name = txt.Text;

            if (!dropDownList.Items.ContainsKey(tsmi.Name))
            {
                 dropDownList.Items.Add(tsmi);
                 txt.Text = "";
            }
        }
    }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:04:30.193

尝试在 DataGridView 中呈现不同的控件类型很困难。DataGridView 是为了显示数据而不是控制它。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)：DataGridView：在可自定义的网格中**显示**数据。

如果您的 C# 版本有，我建议您使用[DataRepeater控件](http://msdn.microsoft.com/en-us/library/cc488279%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:05:20.737

ComboBox 中的项目默认为字符串。在 WPF 中，您只需将控件添加到 ComboBox。在 Winforms 中，您可能需要自定义您的组合框。

# java - 如何使 Android CheckBoxPreference 不可点击？

> ID：16137210
> 
> 赞同：2
> 
> 时间：2013-04-21T23:12:52.097
> 
> 标签：java, android, checkboxpreference

这是我的代码：

```
<PreferenceCategory
   android:summary="Fade information"
   android:title="Fade Effects"> 

   <CheckBoxPreference
     android:title="Fade In/Out"
            android:defaultValue="false"         
            android:key="fadeIn"/> 

   <CheckBoxPreference
     android:title="Heartbeat"
            android:defaultValue="false"   
            android:key="heartbeat" />  

   <CheckBoxPreference
     android:title="Pulse"
            android:defaultValue="false"               
            android:key="pulse" />  

   <CheckBoxPreference
     android:title="None"
            android:defaultValue="true"
            android:key="none" />  
</PreferenceCategory> 
```

我基本上是想弄清楚如何使这些复选框按原样显示，但让用户无法点击它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-05T08:16:58.957

使用`android:enabled="false"`是不正确的，因为这实际上完全禁用了 a `View`（它也将其变灰，这是主要问题）。你想要做的是：

`android:clickable="false"`

这只是阻止用户单击`View`但并没有正式“禁用”它。我认为这更多的是你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:19:11.657

`android:enabled="false"`从您的 XML 或`setEnabled()`Java 代码中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-16T20:25:56.283

`android:selectable="false"`如果您不想让 CheckboxPreference 变灰，可以在 xml 中使用。

# r - 逻辑回归 NA 错误

> ID：16137211
> 
> 赞同：4
> 
> 时间：2013-04-21T23:13:07.640
> 
> 标签：r

我正在尝试运行逻辑回归并不断收到“NA”错误。问题是它说有 NA 的列没有 NA 其全部为 0 或 1。我的代码如下：

```
#V1=race, V2=momcounts of breast cancer, V3=prstatus, V4=erstatus, V5=her2status, V6=triplenegative,      V7=menopause, V8=agemenopause, V9=mentype, V10=mensurg, V11=bmi, V12=eversmok, V13=age, V14=breastfeed, V15=breastfeedmonths, V16=pregnum, V17=birthcount, V18=agefirstpreg, 

regressiondata <- as.data.frame(cbind((data[,'race']),(data[,'mom_countsofbreastcancer']),(data[,'prstatus']),(data[,'erstatus']),(data[,'her2status']),(data[,'triplenegative']),(data[,'menopause']),(data[,'agemenopause']),(data[,'mentype']),(data[,'mensurg']),(data[,'bmi']),(data[,'eversmok']),(data[,'age']),(data[,'breastfeed']),(data[,'breastfeedmonths']),(data[,'pregnum']),(data[,'birthcount']),(data[,'agefirstpreg'])), stringsAsFactors=F)

dataAA=regressiondata[regressiondata$V1==2,]  #AA
glm(V6 ~ V2+V7+V8+V10+V11+V12+V13+V14+V15+V16+V17+V18, family=binomial, data=dataAA) 
```

我也尝试了 lm() ，但仍然出现错误：

```
lm(formula=V6~V2+V7+V8+V10, data=dataAA) 
```

错误：

```
Coefficients:
(Intercept)           V2           V7           V8          V10          V11  
   1326.433      -17.262           NA      -31.174      -34.108        0.525  
        V12          V13          V14          V15          V16          V17  
      2.281       11.060           NA        1.154      -50.258           NA  
        V18  
    -12.277  

Degrees of Freedom: 12 Total (i.e. Null);  3 Residual
  (1474 observations deleted due to missingness)
Null Deviance:      16.05 
Residual Deviance: 3.49e-10     AIC: 20 
Warning message:
glm.fit: fitted probabilities numerically 0 or 1 occurred 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:36:34.693

看起来 V17 是模型中其他变量的线性组合，因此 R 会自动排除它。您的逻辑回归输出看起来没有任何问题。

（顺便说一句：我会非常担心您的逻辑回归中发生的列表删除，看起来在删除了 1474 个缺少数据的观察后，您还剩下 15 个观察......或者我错了吗？）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T01:58:55.947

这个结构是错误的，错误的，错误的，错误的：

```
as.data.frame(cbind((data[,'race']),(dat .....) 
```

如果要对数据框的列进行子集化，请不要使用`cbind`. 而是使用这样的东西：

```
regressiondata <- data[ , c('race', 'mom_countsofbreastcancer', 'prstatus', 'erstatus', 
                        'her2status', 'triplenegative', 'menopause', 'agemenopause', 
                        'mentype', 'mensurg', 'bmi', 'eversmok', 'age', 'breastfeed', 
                        'breastfeedmonths', 'pregnum', 'birthcount', 'agefirstpreg')] 
```

如果您想使用 glm 使用数据框的子集，请使用：

```
 glm(V6 ~ V2+V7+V8+V10+V11+V12+V13+V14+V15+V16+V17+V18, family=binomial, 
         data=gregressiondata, subset = race==2) 
```

这是对您命名的数据框如何`data`开始的一些猜测，如果您发布 str(data) 并描述您真正想要做的事情，您会得到更好的答案。我关于如何对数据进行子集化的建议将保留列名，并且您最终会得到更加自我记录的代码。

# c++ - Python 输入和异常与 C++

> ID：16137214
> 
> 赞同：1
> 
> 时间：2013-04-21T23:13:12.570
> 
> 标签：c++, python, input, exception-handling

我想以 Python 的方式尽可能接近地复制以下 C++ 代码，并进行输入和异常处理。我取得了成功，但可能不是我想要的。我本来想退出类似于输入随机字符的 C++ 方式的程序，在这种情况下它是一个“q”。while 条件下的 cin 对象不同于 python 的方式使 while 为真。此外，我想知道将 2 个输入转换为 int 的简单行是否合适。最后，在 python 代码中，“再见！” 由于强制应用程序关闭的 EOF (control+z) 方法，从不运行。有一些怪癖，总的来说，我对 python 所需的代码更少感到满意。

额外：如果您查看最后打印语句中的代码，这是将 var 和字符串一起打印的好方法吗？

欢迎任何简单的技巧/提示。

**C++**

```
#include <iostream>

using namespace std;

double hmean(double a, double b);  //the harmonic mean of 2 numbers is defined as the invese of the average of the inverses.

int main()
{
    double x, y, z;
    cout << "Enter two numbers: ";

    while (cin >> x >> y)
    {
        try     //start of try block
        {
            z = hmean(x, y);
        }           //end of try block
        catch (const char * s)      //start of exception handler; char * s means that this handler matches a thrown exception that is a string
        {
            cout << s << endl;
            cout << "Enter a new pair of numbers: ";
            continue;       //skips the next statements in this while loop and asks for input again; jumps back to beginning again
        }                                       //end of handler
        cout << "Harmonic mean of " << x << " and " << y
            << " is " << z << endl;
        cout << "Enter next set of numbers <q to quit>: ";
    }
    cout << "Bye!\n";

    system("PAUSE");
    return 0;
}

double hmean(double a, double b)
{
    if (a == -b)
        throw "bad hmean() arguments: a = -b not allowed";
    return 2.0 * a * b / (a + b);
} 
```

**Python**

```
class MyError(Exception):   #custom exception class
    pass

def hmean(a, b):
    if (a == -b):
        raise MyError("bad hmean() arguments: a = -b not allowed")  #raise similar to throw in C++?
    return 2 * a * b / (a + b);

print "Enter two numbers: "

while True:
    try:
        x, y = raw_input('> ').split() #enter a space between the 2 numbers; this is what .split() allows.
        x, y = int(x), int(y)   #convert string to int
        z = hmean(x, y)
    except MyError as error:
        print error
        print "Enter a new pair of numbers: "
        continue

    print "Harmonic mean of", x, 'and', y, 'is', z, #is this the most pythonic way using commas? 
    print "Enter next set of numbers <control + z to quit>: "   #force EOF

#print "Bye!" #not getting this far because of EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:51:36.937

对于该函数`hmean`，我将尝试执行 return 语句，并在`a`equals时引发异常`-b`：

```
def hmean(a, b):
    try:
        return 2 * a * b / (a + b)
    except ZeroDivisionError:
        raise MyError, "bad hmean() arguments: a = -b not allowed" 
```

要在字符串中插入变量，该方法`format`是一种常见的替代方法：

```
print "Harmonic mean of {} and {} is {}".format(x, y, z) 
```

最后，如果在将 x 或 y 转换为 时引发了 a ，您可能需要使用`except`块。`ValueError``int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:58:41.470

这是一段我想扔给你的代码。类似的事情在 C++ 中并不容易实现，但通过分离关注点，它使 Python 中的事情变得更加清晰：

```
# so-called "generator" function
def read_two_numbers():
    """parse lines of user input into pairs of two numbers"""
    try:
        l = raw_input()
        x, y = l.split()
        yield float(x), float(y)
    except Exception:
        pass

for x, y in read_two_numbers():
    print('input = {}, {}'.format(x, y))
print('done.') 
```

它使用所谓的生成器函数，该函数仅处理输入解析以将输入与计算分开。这不是您要求的“尽可能接近”，而是“以pythonic方式”，但我希望您仍然会发现这很有用。另外，我冒昧地使用浮点数而不是整数来表示数字。

还有一件事：升级到 Python 3，版本 2 不再开发，只是接收错误修复。如果您不依赖任何仅适用于 Python 2 的库，那么您应该不会感到太大的不同。

# java - “A 不能是 B 的超接口；超接口必须是接口”

> ID：16137219
> 
> 赞同：-5
> 
> 时间：2013-04-21T23:13:39.970
> 
> 标签：java

[这与这里](https://stackoverflow.com/questions/10435103/the-type-b-cannot-be-a-superinterface-of-c-a-superinterface-must-be-an-interfa)提出的问题几乎相同。

但我的问题延伸到了这一点。

我可以将其更改为“A 扩展 B”，但随后我必须使我的方法成为非静态的，这只会让我的整个系统崩溃。

有什么办法可以解决这个问题吗？

好吧，假设我有一个带有方法 AA 和方法 BB 的 A 类

```
public class  A {

    public static final BB (){

    }
     public static final AA (){

    }
  }
} 
```

现在已经设置好了，我有另一个实现它的类，但它也有自己的方法 AA 和 BB 版本。

```
public class AImpl implements A {

    public BB (){

    }
     public AA (){

    }
  }
} 
```

现在，如果我尝试扩展类，我将收到错误“实例方法无法覆盖来自 A 的静态方法”。

那么它说我可以通过从 A 类中删除静态来解决这个问题。

我这样做然后它告诉我几乎所有其他可能的 50 个类都无法从类 A 的方法 BB 中引用非静态方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T23:18:16.633

`interface`s 不能有`static`方法。它们可以有`static final`常量，但不能有方法。

如果你想有`static`方法，你需要使用`abstract class`

```
interface Iface {
    void doStuff();        
}

abstract class Base implements Iface {
    static void doStaticStuff() {

    }
} 
```

**编辑**

您不能覆盖`static`方法。你也不能`implement`其他类。

你`extend`其他班级。

`static`除非您将一个类中的方法设为非或将另一个类中的方法设为非，否则您无法解决您的问题`static`

```
static class A {
    static void a(){}
}

static class B extends A {
    static void a(){}
} 
```

你试图做的事情没有任何意义。实例方法如何覆盖`static`方法？

请注意，这不会**覆盖**其中的`a()`方法，`A`它只是`a()`在`B`. 该调用`A.a()`将调用 in 中的方法`a()`，`A`而该类`B.a()`将调用`a()`in 中的方法`B`。

在两个不同的类中调用相同的方法并没有真正的意义，`static`因为它会导致静态导入问题，并给人一种类中的方法覆盖另一个类的印象。它没有。

无论如何，即使*您*能够覆盖`static`方法；你的也是`final`这使得这不可能。即使您删除 ，`static`您也无法覆盖方法，直到您也删除`final`.

# ios - AFNetworking setAuthenticationChallengeBlock

> ID：16137220
> 
> 赞同：6
> 
> 时间：2013-04-21T23:13:45.757
> 
> 标签：ios, afnetworking

我的服务器需要客户端证书，经过一段时间搜索和阅读 AFNetworking 文档中的示例后，我尝试设置 setAuthenticationChallengeBlock 并提供客户端证书。

在浏览器中提供的证书工作正常。

```
[requestOperation setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge)
    {
        NSLog(@"AuthenticationChallenge");

        NSString *thePath = [[NSBundle mainBundle] pathForResource:@"client" ofType:@"pfx"];
        NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath];
        CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;
        SecIdentityRef identity;

        [self extractIdentity:inPKCS12Data :&identity];

        SecCertificateRef certificate = NULL;
        SecIdentityCopyCertificate (identity, &certificate);

        const void *certs[] = {certificate};
        CFArrayRef certArray = CFArrayCreate(kCFAllocatorDefault, certs, 1, NULL);

        NSURLCredential *credential = [NSURLCredential credentialWithIdentity:identity certificates:(__bridge NSArray*)certArray persistence:NSURLCredentialPersistencePermanent];
        [challenge.sender useCredential:credential forAuthenticationChallenge:challenge];
    }];
    [requestOperation start]; 
```

但是块内的代码永远不会被调用，并且服务器按预期返回 403 错误。

其他块中的代码，例如 setUploadBlock 等。工作正常。

知道我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T03:03:29.037

今晚我遇到了类似的问题。在进一步调查 AFNetworking 头文件后，我发现了我的问题。我忘记`setAuthenticationAgainstProtectionSpaceBlock`在我的操作中设置障碍。

```
 [requestOperation  setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace) {

        NSLog(@"Auth against protected space [%@]", protectionSpace);

        return YES;

    }]; 
```

我相信 AFNetworking 使用这个块来处理 NSURLConnectionDelegate 协议方法：`- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace`。

# php - 在php中设置变量类的静态成员

> ID：16137221
> 
> 赞同：0
> 
> 时间：2013-04-21T23:13:48.463
> 
> 标签：php, class, static, member

我正在尝试向我的每个类添加一个静态成员，其中包含它们在实例化时应该使用的默认数据库连接。这是我正在尝试的方法：

```
<?php //other classes extend Generic
class Generic {
    public static $defaultDatabase;
    public $db;

    function __construct (&$pDatabase = null){
        if ($pDatabase!==null)
            $this->db = &$pDatabase;
        else
            $this->db = &$defaultDatabase;
    }   
}
?>

<?php
include_once("/classes/class.Database.php");
$db = new Database ("localhost", "username", "password", "TestDatabase");

$classes = array("Generic", "Member");
foreach ($classes as $class){
    include_once("/classes/class.$class.php");
    $class::defaultDatabase = &$db;//throws error here, unexpected "="
}

?> 
```

我究竟做错了什么？有没有更好的方法来做到这一点，还是我必须为每个类单独设置 defaultDatabase？我正在使用 php 5.3，我知道它应该支持这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:19:17.670

用于`self::$propertyName`访问[静态属性](http://www.php.net/manual/en/language.oop5.static.php)：

```
function __construct (&$pDatabase = null){
    if ($pDatabase!==null)
        $this->db = &$pDatabase;
    else
        $this->db = self::$defaultDatabase;
} 
```

另请注意，如果是对象，则使用引用运算符`&$var`是没有意义的。`$var`这是因为 PHP 中的所有对象实际上都是引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:24:58.780

在这段代码中

```
 $class::defaultDatabase = &$db 
```

您应该在 defaultDatabase 之前添加 $，因为静态属性是通过

`ClassName::$staticProperty`

与其他通过以下方式访问的不同

`$class->property;`

# z-order - 用于 3D 显示的 Zorder

> ID：16137226
> 
> 赞同：0
> 
> 时间：2013-04-21T23:14:15.027
> 
> 标签：z-order

我有 2 个`div`：

```
<div id="one"></div>
<div id="two"></div> 
```

通常第二个超过第一个。但我希望第一个与 zorder 保持领先：

```
div {
    position: absolute;
    width: 100px;
    height: 100px;
}

#one {
    top: 20px;
    left: 20px;
    background: red;
    zorder: 2;
}

#two {
    top: 50px;
    left: 50px;
    background: blue;
    zorder: 1;
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:15:27.843

这是 HTML，所以我猜你的意思是`z-index`：

```
#one {
    z-index: 2;
}

#two {
    z-index: 1;
} 
```

# objective-c - 当前收据无效或不匹配 ds 人员 ID + 包含的图像

> ID：16137240
> 
> 赞同：1
> 
> 时间：2013-04-21T23:15:59.800
> 
> 标签：objective-c, xcode, macos, app-store, app-store-connect

我正在为我的 Mac 应用程序设置应用程序内购买。我目前能够从 iTunes Connect 获得产品，甚至可以请求购买。我对这个错误消息感到很困惑，我真的希望有人以前来过这里并可以提供一些帮助。

我收到（非常有用的）本地化错误：事务错误：未知错误。

我已经包含了成功的 Mac App Store 身份验证和错误消息的两个图像。我能弄清楚的是从 SKPaymentTransaction 调用 failedTransaction。

![在此处输入图像描述](https://i.stack.imgur.com/KbITd.png) ![在此处输入图像描述](https://i.stack.imgur.com/lGlrV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:58:02.023

这就是我所做的。在 Xcode 中存档。然后分发 -> mac 安装程序 -> 双击 .pkg 文件并安装。

这似乎下载了 _MASReceipt 并且包括在内时一切都很好

```
if(![[NSFileManager defaultManager] fileExistsAtPath:[[[NSBundle mainBundle] appStoreReceiptURL] path]]) {
        NSLog(@"to get sandbox receipt, the app must be launched from outside xcode");
        exit(173);
    } 
```

# java - 如何使用 XML 从站点生成 HTML

> ID：16137244
> 
> 赞同：1
> 
> 时间：2013-04-21T23:17:11.443
> 
> 标签：java, javascript, html

我不是开发人员，对 java 也一无所知，因此寻求有关如何做到这一点的建议。

该网络托管服务允许其用户从他们的 XML 表中提取数据并将它们放置在您自己网站上的任何位置（仍然由同一家公司托管）。通过使用他们的开发人员程序，您可以访问各种项目的 XML 工作表。

示例测试站点 [http://www23.myfantasyleague.com/2013/home/61760](http://www23.myfantasyleague.com/2013/home/61760)

开发者计划 [http://football.myfantasyleague.com/2013/export](http://football.myfantasyleague.com/2013/export)

当您选择所需信息并输入您的联赛 ID 时，您将获得 XML 表 [http://football23.myfantasyleague.com/2013/export?TYPE=appearance&L=61760&W=&JSON=0](http://football23.myfantasyleague.com/2013/export?TYPE=appearance&L=61760&W=&JSON=0)

那么，如何从 XML 表中获取该信息并使用它将内容放置在其站点的所有页面上，托管在主主机服务器上呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:30:05.613

1) *"Java" <> "JavaScript"*。问：您实际使用的是哪种语言（如果有的话）？

2）“从 XML 生成 HTML”的规范答案是使用 XSL 样式表。

*   这是一个很好的 XSLT 概述：[XSLT Languages](http://www.w3schools.com/xsl/xsl_languages.asp)

*   这是一个面向 Java/Servlet 的链接：http: [//ibm.com/developerworks/xml/library/x-tipxsltzen](http://ibm.com/developerworks/xml/library/x-tipxsltzen)

*   以下是一些面向 C#/.Net 的链接：

    [XML 的 XSL 转换：简单的 .Net 示例](https://stackoverflow.com/questions/5940766/xsl-transformation-of-xml-simple-net-example)

    [http://codem8.blogspot.com/2011/11/xml-to-html-using-xslt-and-ci-was.html](http://codem8.blogspot.com/2011/11/xml-to-html-using-xslt-and-c-i-was.html)

# silverlight - 如何使用新证书重新签署 Silverlight 应用程序而不需要重新安装

> ID：16137249
> 
> 赞同：6
> 
> 时间：2013-04-21T23:17:47.647
> 
> 标签：silverlight, digital-certificate

我有一个 Silverlight 4 受信任的 OOB 应用程序，该应用程序使用上周过期的证书进行了签名。我无法在旧证书上发布新代码。

我申请了一个新的 5 年证书并在从我的证书存储中选择了这个新证书后重新签署了应用程序（相同的发布者名称、公司等）

现在，当自动更新 Silverlight 机制尝试将 OOB 应用程序更新到新版本并出现证书不匹配错误时，它会失败。它显然不喜欢新证书。

我该如何解决这个问题 - 我认为这取决于证书颁发者来“链接”我的证书以继续信任。我不想让我的用户每次我的证书过期时都卸载软件，我必须得到一个新的。

# excel - VBA Excel - 在写入之前检查单元格内容

> ID：16137250
> 
> 赞同：0
> 
> 时间：2013-04-21T23:17:55.100
> 
> 标签：excel, vba

我是 VBA 的新手，并且对此用户窗体的输出有问题。

```
Private Sub btnSubmit_Click()
Dim RowCount As Long 
```

...

```
RowCount = Worksheets("Assignments").Range("A3").CurrentRegion.Rows.Count
With Worksheets("Assignments").Range("A3")
    .Offset(RowCount, 0).Value = Me.txtReportAddress.Value
    .Offset(RowCount, 1).Value = Me.cmbCityCounty.Value
    .Offset(RowCount, 2).Value = Me.txtFee.Value
    .Offset(RowCount, 3).Value = Me.txtDate.Value
    .Offset(RowCount, 4).Value = Me.cmbPropertyType.Value
    .Offset(RowCount, 5).Value = Me.txtComments.Value
End With 
```

它给出了正确的输出，但任何后续条目都会覆盖过去的整体。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:35:01.123

不熟悉“CurrentRegion”，但看起来您正在计算行数，然后覆盖最后一行；您计算 5 行，然后写入第 5 行，这是包含数据的最后一行，是否像在 RowCount 中加 1 一样简单？

或者，我对这样的事情所做的是：

```
RowCount = Application.CountA(Worksheets("Assignments").Columns("A"))
    ' Depending on what is in rows 1 and 2 of colomn A you may need to adjust
    ' ie if row 2 is blank then the count will be 1 higher than needed so you 
    ' can adjust accordingly
Dim c as Range
Set c = Worksheets("Assignments").Range("A" & RowCount + 1)
With c
    .value = Me.txtReportAddress.Value
    .Offset(0,1).Value... etc as per your code 
```

希望这能回答你的问题。

# ruby-on-rails - ` ': 未初始化的常量 Compass::Frameworks (NameError)

> ID：16137253
> 
> 赞同：1
> 
> 时间：2013-04-21T23:18:50.650
> 
> 标签：ruby-on-rails, gem

```
/home/eduardo/.rbenv/versions/2.0.0-p0/lib/ruby/gems/2.0.0/gems/compass-h5bp-0.1.1/lib/compass/h5bp.rb:5:in `<module:H5bp>': uninitialized constant Compass::Frameworks (NameError) 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '4.0.0.beta1'
gem 'sqlite3'
gem 'turbolinks'
gem 'jbuilder', '~> 1.0.1'

group :test, :development do
  gem 'rspec-rails', '~> 2.0'
end

group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'
  gem 'haml-rails'
  gem 'uglifier', '>= 1.0.3'

  gem 'compass-h5bp'
end

gem 'html5-rails'
gem 'jquery-rails'

group :test do
  gem 'capybara'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano', group: :development

# To use debugger 
```

我不知道是什么导致了这个错误。当我尝试运行时出现错误：

```
rails generate html5:install 
```

这是项目：[https ://github.com/sporkd/html5-rails](https://github.com/sporkd/html5-rails)

我尝试了一些在 Google 上找到的东西，但没有一个真正奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T09:38:20.857

**在 compass-h5bp之前**使用 compass-rails它可以工作（rails 3.2.13，ruby 2.0）

```
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier'
  gem 'compass-rails'
  gem 'compass-h5bp'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T00:03:59.287

将 compass-rails gem 添加到资产组为我解决了这个问题。

# binary-tree - 层序遍历的递归方法

> ID：16137256
> 
> 赞同：1
> 
> 时间：2013-04-21T23:19:01.573
> 
> 标签：binary-tree

该`levelOrder`方法需要递归调用自身来执行级别顺序遍历。我在如何将（这个）添加到累加器时遇到了麻烦。这就是我到目前为止所拥有的。

```
public class BinaryTreeNode<T> {
    private BinaryTreeNode<T> left;
    private BinaryTreeNode<T> right;
    private T data;

    public BinaryTreeNode() {
        this(null, null, null);
    }

    public BinaryTreeNode(T theData) {
        this(theData, null, null);
    }

    public BinaryTreeNode(T theData, BinaryTreeNode<T> leftChild,
            BinaryTreeNode<T> rightChild) {
        data = theData;

        left = leftChild;
        right = rightChild;
    }

    public void levelOrder(
            SortedMap<Integer, List<BinaryTreeNode<T>>> accumulator, int depth) {

        accumulator.put(depth, this);// add (this) to accumulator

        if (left != null) {
            left.levelOrder(accumulator, depth);// if (left) is not null invoke
                                                // this method for left
        }
        if (right != null) {
            right.levelOrder(accumulator, depth);// do the same for (right)
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:18:02.423

UAB CS 302？好的，我是这样做的：

您必须检查累加器是否包含（此）节点当前深度的键。

两种可能性： a.) 累加器不包含表示该节点深度的键，因此您必须创建一个新的二叉树节点列表并将其添加到累加器中。b.) 累加器已经有一个表示该节点深度的键，因此您必须检索已经存在的二叉树节点列表，并将该特定节点添加到该列表中。

此外，如果左右节点不为空，那么您希望在 (depth+1) 处递归调用此方法，因为它们在树上比当前节点低。

# command-line - How to locate new certification using Certutil?

> ID：16137260
> 
> 赞同：1
> 
> 时间：2013-04-21T23:19:40.987
> 
> 标签：command-line, certificate, digital-certificate, makecert

I need to create a new cert and then locate it to obtain the serial number (to use it later to get the public and private keys).

If I make a new certificate with makecert utility from Microsoft SDK's like this:

```
makecert -r -pe -a sha1 -n "CN=ElektroSoft" -b 01/01/2013 -e 01/01/2050 -ss my -$ individual 
```

Then I suppose that cert will be stored in "my"...

..But when I try to list the "my" certificates I only get one entry, and is not my new certificate:

```
C:\>CERTUTIL -store my

my
================ Certificado 0 ================
Número de serie: 586a7358ebdce8854def26875f0f38ab
Emisor: CN=localhost
NotBefore: 22/02/2013 4:43
NotAfter: 22/02/2018 2:00
Sujeto: CN=localhost
La firma coincide con la clave pública
Certificado raíz: el sujeto coincide con el emisor
Plantilla:
Hash de cert(sha1): 1b 92 19 ef 19 ce d1 09 ad 87 13 73 56 0c cf 0a 57 29 cf 81
 Contenedor de claves = IIS Express Development Certificate Container
 Nombre de contenedor exclusivo: fad662b360941f26a1193357aab3c12d_a61f2a11-eaf9
-4c14-9a63-d3613bf3bd2c
 Proveedor = Microsoft RSA SChannel Cryptographic Provider
Prueba de cifrado correcta
CertUtil: -store comando completado correctamente. 
```

Then where is stored my new certificate?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:29:24.530

最后我做了我的代码：

```
@Echo OFF
Setlocal enabledelayedexpansion

Set "Name=ElektroSoft"
Set "Password=Elektro"
Set "InitialDate=01/01/2013"
Set "ExpireDate=01/01/2050"
Set "SerialNumber=%Random%%Random%%Random%%Random%%Random%"

:: Make certificate
makecert -r -pe -a sha1 -n "CN=%Name%" -b "%InitialDate%" -e "%ExpireDate%" -$ individual -sr LocalMachine -ss my -cy authority -# "%SerialNumber%" "%Name%.cer"

:: Export certificate
For /F "Tokens=2 delims=:" %%# in ('certutil -store my') DO (
    if "%%#" NEQ " CN=%Name%" (Set "SerialNumberHash=%%#") ELSE (
        certutil -exportPFX -p "%Password%" my "!SerialNumberHash: =!" "%Name%.pfx"
        Pause&Exit))

:: Check certificate
REM certutil -store my

:: Delete certificate
REM certutil -delstore MY "%Name%" 
```

# ruby-on-rails - Ruby on Rails/Rack Builder "Use" Method Wrong Number of Arguments

> ID：16137264
> 
> 赞同：0
> 
> 时间：2013-04-21T23:20:20.377
> 
> 标签：ruby-on-rails, ruby, rack, ruby-1.9.3

I am new to Ruby and Rails. I am playing with Rack, trying to get a basic understanding of this peice of the Rails puzzle, following along with Rob Conery in his Tekpub/Rails 3 tutorial vid.

Unfortunately, the version of Rack used in the vid has become long in the tooth, and I think something has changed in between the video release and now (as have some things in Ruby between 1.8.x and 1.9.x). Even more unfortunately, I don't yet know enough about Ruby or Rack to know how to figure out what I need to do differently. The version of Rack used in the video is 1.1\. The version on my machine is 1.4.5\.

Silly example code:

```
class EnvironmentOutput

  def intialize(app)
    @app = app
  end

  def call(env)
    out = ""

    unless(@app.nil?)
      response = @app.call(env)[1]
      out+=response
    end

    env.keys.each {|key| out+="<li>#{key}=#{env[key]}"}
    ["200", {"Content-Type" => "text/html"}, [out]]
  end

end

class MyApp
  def call(env)
    ["200", {"Content-Type" => "text/html"}, ["<h1>Hello There</h1>"]]    
  end
end

# My understanding is that this should work:
use EnvironmentOutput
run MyApp.new 
```

When I run this, I get the following:

```
ArgumentError: wrong number of arguments(1 for 0) 
```

This is where the first in a series of errors occurs (line 82 in the rack `Builder` class):

```
def use(middleware, *args, &block)
  if @map
    mapping, @map = @map, nil
    @use << proc { |app| generate_map app, mapping }
  end
  # error occurs HERE:
  @use << proc { |app| middleware.new(app, *args, &block) }
end 
```

Obviously, I am passing something incorrectly. Sadly, I don't yet know enough to figure out what it is I am doing wrong. I have searched on Google and here on SO, but I suspect I also don't have quite a strong enough grasp on the Ruby/Rails/Rack relationship to know what to ask and get a reasonably helpful result (or, if I AM, then I don't yet recognize it).

Does anyone know what I am doing wrong here?

UPDATE: Thanks to the selected answer, I realize it was a typo. Next issue is an array-to-string conversion problem in the same code, but will post as new question.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:52:16.073

这只是一个错字：

```
def intialize(app) 
```

应该

```
def initialize(app) 
```

（你错过了一个`i`）。

由于您不提供`initialize`方法，Ruby 尝试使用默认的、无参数的方法，但由于 Rack 传递了一个参数（应用程序），您将获得`ArgumentError`.

# c# - 在 X、Y 平面上的某个区域中最大化矩形，其中包含表示该区域的点列表

> ID：16137266
> 
> 赞同：0
> 
> 时间：2013-04-21T23:20:31.203
> 
> 标签：c#, kinect, area, calculus, maximization

好的，我需要帮助最大化长条对象中可以是许多不同形状的矩形的面积。我已经完成了大部分工作。

我正在使用 kinect 和深度像素在 C# 中工作。

这张图片只是我能找到的最能代表我所说的内容。

![在此处输入图像描述](https://i.stack.imgur.com/9qOuX.png)

我需要在 x，y 平面上的该区域中生成一个矩形，以最大化该区域，同时使每个边缘都是实心的。

我已经将实心形状表示为 x、y 平面上的点列表。所以我有二维平面上的形状。有点像这样：

![在此处输入图像描述](https://i.stack.imgur.com/LkkNW.png)

为了简化问题，我将生成一个边平行于 x 和 y 线的矩形。我不是在寻找代码。我只需要一些可以阅读并尝试实施的方向或算法。

如果需要任何澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:31:32.813

如果您只需要边界矩形，您可以遍历点列表。存储 X 和 Y 的最小值和最大值（如 minX、minY、maxX、maxY）。浏览整个列表，如果检查每个点，请执行 4，例如：

```
if(point.X < minX) minX = point.X
if(point.Y < minY) minY = point.Y
if(point.X > maxX) maxX = point.X
if(point.Y > maxY) maxY = point.Y 
```

这将为您提供边界矩形。Min 和 Max 是两个点，根据您的坐标系，代表左上点和右下点，您可以轻松地使用它们来绘制矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T14:55:25.747

看看[最大的空矩形问题](http://en.wikipedia.org/wiki/Largest_empty_rectangle)。这是[一篇](http://www.scs.carleton.ca/~dehne/publications/1-09.pdf)关于计算其解决方案的算法的文章。

更准确地说，这是一个问题，包括在给定一组点的情况下搜索不包含任何点的最大区域。在您的情况下，您可以将其应用于描述 2D 形状边缘的一些点，以及外部的一些点。然后本文的程序将计算黄色区域中的最大矩形。我确实应用了这样的程序来找到不包含透明像素的图像的最大部分。它运作良好，但有点慢。

该解决方案适用于一组点（即没有段），但您可以轻松地计算出近似您的形状的近似解决方案。

# android - WifiManager.getScanResults() - 说明（自动扫描、睡眠等）

> ID：16137268
> 
> 赞同：1
> 
> 时间：2013-04-21T23:20:52.673
> 
> 标签：android, android-wifi, android-wireless

我想对 的行为进行一些澄清`WifiManager.getScanResults()`，即：

*启用无线时*

1.  android是否以固定间隔扫描接入点？可以查询/更改间隔吗？可以查询上次扫描的时间吗？有关讨论，请参阅此[答案](https://android.stackexchange.com/a/37646)
2.  当无线电关闭（睡眠）时会发生什么 - 而 wifi 仍然启用 - 将`getScanResults()`继续返回最后的扫描结果？怎么知道是不是时候了`startScan()`？

*禁用无线时*

1.  `getScanResults()`会返回最后的扫描结果吗？还是一个空列表？或者`null`（它有时会返回 null 并且这不是由 SO 中发布的 90% 的片段处理的）？
2.  即使在重新启动后（手机在 wifi 关闭的情况下启动），1 的答案也是正确的？

我问的原因是我需要定期获取可用接入点的列表，我宁愿立即调用`getScanResults()`，而不是`WifiManager.startScan()`如果`getScanResults()`我真的不需要的话 - 因为这涉及获取 wifi 锁等并且相当微妙. 我也不确定 API 级别和手机硬件在多大程度上发挥了作用。

有关困难的良好讨论，请参阅此[答案](https://stackoverflow.com/questions/14862018/startscan-has-result-after-10-min-when-phone-get-into-idle-state/14910918#14910918)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T22:09:43.787

*禁用无线时*

1.  `getScanResults()`将返回`null`...
2.  ...即使在重新启动后（这是意料之中的——如果它一开始没有返回 null，这将是有争议的）

*启用无线时*

2.令人惊讶的是，一段时间后`getScanResults()`会返回`null`（在 Nexus One、Android 2.3.7、Cyanogen 模块上 - 但我怀疑这并不相关）。所以是的，显然无论无线状态如何，都必须启动扫描

我想如果国家是`WIFI_STATE_DISABLING`

我仍然对启用无线的情况下的答案感兴趣 - 特别是问题 2，如果设备处于睡眠状态。Google 群组不允许我发帖（提示）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-24T06:41:18.450

> 公共列表 getScanResults ()

在**API 级别 1中添加**

*返回最新接入点扫描的结果。*

返回在最近扫描中找到的接入点列表。应用程序必须持有`ACCESS_COARSE_LOCATION`或`ACCESS_FINE_LOCATION`获得许可才能获得有效结果。

# c# - Create an image that will transform into another upon being clicked...Windows 8 VS Blend

> ID：16137269
> 
> 赞同：0
> 
> 时间：2013-04-21T23:21:00.803
> 
> 标签：c#, windows-8, expression-blend

I am creating an app where I want my image of a burger for example to change into fries when clicked. I am creating this in blend because I know I want to make storyboards and then go from there but I am totally lost on how to go about this.

Any tips on how to go about this would be greatly appreciated!

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:47:28.053

最简单的方法是创建一个故事板，通过混合更改两个图像的不透明度。然后你可以调用 storyboard.begin() 来运行你想要的情节提要，例如从点击或点击事件中。

# java - How to validate an XML file against a given DTD file?

> ID：16137280
> 
> 赞同：3
> 
> 时间：2013-04-21T23:22:31.930
> 
> 标签：java, dtd, xml-validation

I have an XML file, which has a DTD reference in it, like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE something SYSTEM "something.dtd"> 
```

I'm using a `DocumentBuilderFactory`:

```
public static Document validateXMLFile(String xmlFilePath) throws ParserConfigurationException, SAXException, IOException {
    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    domFactory.setValidating(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    builder.setErrorHandler(new ErrorHandler() {
        @Override
        public void error(SAXParseException exception) throws SAXException {
            // do something more useful in each of these handlers
            exception.printStackTrace();
        }

        @Override
        public void fatalError(SAXParseException exception) throws SAXException {
            exception.printStackTrace();
        }

        @Override
        public void warning(SAXParseException exception) throws SAXException {
            exception.printStackTrace();
        }
    });
    Document doc = builder.parse(xmlFilePath);
    return doc;
} 
```

But now I want to validate the XML file against a DTD file on a user-defined location, and not relative to the path of the XML file.

How can I do that?

Example:

```
validateXMLFile("/path/to/the/xml_file.xml", "/path/to/the/dtd_file.dtd"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T00:41:51.587

使用`EntityResolver`.

```
final String dtd = "/path/to/the/dtd_file.dtd"; 
builder.setEntityResolver(new EntityResolver() {
    public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException {
        if (systemId.endsWith("something.dtd")) {
            return new InputSource(new FileInputStream(dtd));
        }
        return null;
    }
}); 
```

请注意，只有当 XML 文档具有 DTD 声明时，它才能工作。

# codeigniter - codeigniter url中的国家名称

> ID：16137284
> 
> 赞同：0
> 
> 时间：2013-04-21T23:23:06.437
> 
> 标签：codeigniter, codeigniter-url

我的问题是如何在 codeigniter url 中附加国家名称？

假设我的网站是[http://mywebsite.com](http://mywebsite.com)并且我正在从加拿大打开网站，所以我的网址应该是[http://mywebsite.com/canada](http://mywebsite.com/canada)。这意味着我只想在 url 中附加国家名称，除此之外没有任何变化。我已经阅读了关于 codeigniter 的路线，我已经用谷歌搜索了它，但都是徒劳的。

如果有人知道如何做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:21:02.707

这就像 url 中的语言代码。

使用我的解决方案，您可以将任何段放入您的 uri 并将其隐藏到 CI。

[http://site.com/page.html](http://site.com/page.html)将等于[http://site.com/canada/page.html](http://site.com/canada/page.html)，反之亦然。

set_country_uri.php

```
//App location
$ci_directory = '/ci/';

//countries
$countries = array('canada','france');

//default country
$country = 'canada';

foreach( $countries as $c )
{
    if(strpos($_SERVER['REQUEST_URI'], $ci_directory.$c)===0)
    {
        //Store country founded
        $country = $c;

        //Delete country from URI, codeigniter will don't know is exists !
        $_SERVER['REQUEST_URI'] = substr_replace($_SERVER['REQUEST_URI'], '', strpos($_SERVER['REQUEST_URI'], '/'.$c)+1, strlen($c)+1);

        break;
    }
}

//Add the country in URI, for site_url() function
$assign_to_config['index_page'] = $country."/";

//store country founded, to be able access it in your app
define('COUNTRY', $country); 
```

索引.php

```
<?php

require('set_country_uri.php');

//ci code ... 
```

因此，在您的 CI 代码中使用`COUNTRY`常量来知道使用的是哪个。并使您的代码像路由一样，而不考虑 uri 中的国家/地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:02:26.627

我猜你会通过 IP 查找来根据请求 IP 地址 ($_SERVER['REMOTE_ADDR']) 猜测国家/地区。将 IP 地址映射到某个位置的[文档非常详细。](https://stackoverflow.com/questions/1935621/associate-ip-addresses-with-countries)一旦你有了国家，重定向到正确的控制器方法。

那就是你要找的东西？

# ios - 游戏编程：关键区域保护

> ID：16137288
> 
> 赞同：0
> 
> 时间：2013-04-21T23:23:19.500
> 
> 标签：ios, objective-c, cocos2d-iphone

您将如何保护 cocos2d 中的共享资源，以便一次只允许一个类或方法访问或更改它？我最初的想法是设置一个处理锁定/解锁协调的类，如下所示：

```
- (BOOL)requestLock {
    if (self.lockAvailable == YES) {
        self.lockAvailable = NO;
        return YES;
    }
    return NO;
}

- (void)returnLock:(CGFloat)time {
    self.timer = 0;
    self.timeToUnlock = time;
}

- (void)update:(CGFloat)dt {
    self.timer += dt;
    if (self.timer > self.timeToUnlock) {
        self.lockAvailable = YES;
    }
}

@end 
```

但它似乎并没有按预期工作。在我的一个类获得锁后，它调用执行一些操作，然后`returnLock`该操作预计会采取多长时间。然而，结果是出乎意料的，因为似乎任何其他尝试请求锁定的类都可以这样做，而不管在解锁之前提供的时间。我这里有什么缺陷吗？

另一方面：这最终会在某个时候变得非常低效吗？我有大约 3 个班级试图在每次更新时访问相同的资源。每次他们一遍又一遍地调用“requestLock”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:24:35.287

如果这确实是 cocos2d 安排的“更新”，即使您在同一个更新周期中有多个访问器，它们也永远不会同时访问 - AFAIK cocos2d 在单个线程上运行。

# networking - Does NS-3 supports Mobile IPv6?

> ID：16137289
> 
> 赞同：1
> 
> 时间：2013-04-21T23:23:22.327
> 
> 标签：networking, mobile, ns-3

I have to simulate a few scenarios of network mobility (MIPv6). I was told to use NS-3, but I don't find any good information about it. Can anyone give me some lights about this? I just need to simulate a few simple scenarios of networks moving around... Thanks anyway.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:10:36.610

据我所知，有两种方法可以进行 ns-3 MIPv6 模拟：

*   使用 DCE：[http ://www.nsnam.org/~thehajime/ns-3-dce-umip/getting-started.html](http://www.nsnam.org/~thehajime/ns-3-dce-umip/getting-started.html)
*   使用来自[http://eudl.eu/pdf/10.4108/ICST.SIMUTOOLS2010.8682](http://eudl.eu/pdf/10.4108/ICST.SIMUTOOLS2010.8682)的本机 UMIP 实现，但我不相信它已经发布。

# visual-studio-2012 - F# 代码仅在 64 位模式下崩溃 VS2012 分析器

> ID：16137290
> 
> 赞同：2
> 
> 时间：2013-04-21T23:23:22.933
> 
> 标签：visual-studio-2012, f#, profiling

以下示例在针对 x86 或 x64 时运行良好。但是，当针对 x64（但不是 x86！）时，它会立即使 VS2012 分析器崩溃，并导致缓冲区溢出。如果我将类型 Foo 切换为 int，它可以正常工作，但是一旦我使用记录，它就会失败。有任何想法吗？

```
open System

module Binary =

    open System.Reflection
    open Microsoft.FSharp.Reflection

    let private flags =
        BindingFlags.Public ||| BindingFlags.NonPublic

    type BinaryReadWriter<'a> =
        { Reader : IO.BinaryReader -> 'a
          Writer : IO.BinaryWriter -> 'a -> unit
        }

    type Reader = (IO.BinaryReader -> obj)
    type Writer = (IO.BinaryWriter -> obj -> unit)

    let rec private readValue (t: Type) : Reader =
        if   t = typeof<int>               then fun r -> box (r.ReadInt32())
        elif FSharpType.IsRecord(t, flags) then let readers = [| for f in FSharpType.GetRecordFields(t, flags) -> readValue f.PropertyType |]
                                                let build = FSharpValue.PreComputeRecordConstructor(t, flags)
                                                fun r -> readers |> Array.map (fun reader -> reader r) |> build
        else
            failwithf "Unsupported type: %s" t.Name

    let rec private writeValue (t: Type) : Writer =
        if   t = typeof<int>               then fun w v -> w.Write(v :?> int)
        elif FSharpType.IsRecord(t, flags) then let writers = [| for f in FSharpType.GetRecordFields(t, flags) -> writeValue f.PropertyType |]
                                                let getBits = FSharpValue.PreComputeRecordReader(t, flags)
                                                fun w v -> getBits v |> Array.iter2 (fun wi vi -> wi w vi) writers
        else
            failwithf "Unsupported type: %s" t.Name

    let binaryReadWriter<'a> () : BinaryReadWriter<'a> =
        let reader = readValue  typeof<'a>
        let writer = writeValue typeof<'a>
        { Reader = reader >> unbox
          Writer = fun w -> box >> writer w
        }

type Foo =
    { Bar : int }

[<EntryPoint>]
let main _ = 

    // The following code crashes VS2012 profiler when running as a 64 bit process, but 
    // profiles fine when running as a 32 bit process.

    let binary = Binary.binaryReadWriter<Foo>()        

    let value = { Bar = 0 }

    while true do
        use mem = new IO.MemoryStream()
        use write = new IO.BinaryWriter(mem)
        binary.Writer write value
        let _ = mem.Seek(0L, IO.SeekOrigin.Begin)
        use read = new IO.BinaryReader(mem)
        binary.Reader read |> ignore
    0 
```

异常消息是

```
A buffer overrun has occurred in test.exe which has corrupted the program's internal state. Press Break to debug the program or Continue to terminate the program. 
```

引发异常时的调用堆栈为：

```
clr.dll!__crt_debugger_hook()   Unknown
clr.dll!__raise_securityfailure()   Unknown
clr.dll!__report_gsfailure()    Unknown
clr.dll!StackFrameIterator::Init(class Thread *,class Frame *,struct REGDISPLAY *,unsigned int) Unknown
clr.dll!Thread::StackWalkFramesEx(struct REGDISPLAY *,enum StackWalkAction (*)(class CrawlFrame *,void *),void *,unsigned int,class Frame *)    Unknown
clr.dll!Thread::StackWalkFrames(enum StackWalkAction (*)(class CrawlFrame *,void *),void *,unsigned int,class Frame *)  Unknown
clr.dll!ProfToEEInterfaceImpl::ProfilerStackWalkFramesWrapper(class Thread *,struct _PROFILER_STACK_WALK_DATA *,unsigned int)   Unknown
clr.dll!ProfToEEInterfaceImpl::DoStackSnapshotHelper(class Thread *,struct _PROFILER_STACK_WALK_DATA *,unsigned int,struct _CONTEXT *)  Unknown
clr.dll!ProfToEEInterfaceImpl::DoStackSnapshot(unsigned __int64,long (*)(unsigned __int64,unsigned __int64,unsigned __int64,unsigned int,unsigned char * const,void *),unsigned int,void *,unsigned char *,unsigned int)    Unknown
VSPerfCorProf.dll!IsStackWalkSafe(void) Unknown
SamplingRuntime.dll!IsStackWalkSafe()   Unknown
SamplingRuntime.dll!GetStack()  Unknown
SamplingRuntime.dll!ProcessSample() Unknown
SamplingRuntime.dll!GetSample() Unknown 
```

# ruby-on-rails-3 - 将简单表单 数据属性转换为 Formtastic

> ID：16137292
> 
> 赞同：0
> 
> 时间：2013-04-21T23:23:51.467
> 
> 标签：ruby-on-rails-3, formtastic, jquery-tokeninput, custom-data-attribute

我有一个使用 jquery-tokeninput 的简单表单，如下面的代码所示（[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)，[https://github.com/loopj/jquery-tokeninput](https://github.com/loopj/jquery-tokeninput)）。我可以将表单转换为使用 formtastic 并保持数据属性正常工作吗？我应该怎么做才能替换 data: {load: @product.tags} ？

```
<%= f.text_field :tag_tokens, data: {load: @product.tags} %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T06:28:04.790

像这样，使用 input_html 哈希：

```
<%= f.input :tag_tokens, input_html: { data: { load: @product.tags } } %> 
```

# ios - Less sensitive string comparison

> ID：16137295
> 
> 赞同：1
> 
> 时间：2013-04-21T23:24:56.570
> 
> 标签：ios, objective-c, nsstring

*answered* thanks to all that helped. I'm new to stack overflow as far as posting so if my edit is messy i apologize. the code below is what i ended up coming up with and think it may help others though i believe the person who answered last may also produce similar results.

I have been searching for a while now and I am sure I could break this down and get it done with a couple of sloppy if statements but I am looking for a common, efficient way.

I have a search with typical string comparison. For each string in an array using `NSRange`, but the results I get from that can be picky.

If I have a string for example `Bat Man` I could find it with searching `Bat` or `Man` but not once I add an `m` onto `bat` for `Batm`.

I guess what im looking for, is if the characters exist within the string and not exactly that string.

```
 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

[roomsList removeAllObjects];
stringScore = 0;

// clear
if([searchText length] == 0){

    searchingRooms = NO;

    [roomsList addObjectsFromArray:[newDataManager shared].rooms];
    [self.gsgSearchBar resignFirstResponder];

    // search users
}else{

    searchingRooms = YES;

  for(QBChatRoom *room in [newDataManager shared].rooms){
      stringScore = 0;
      NSString*   newRoomNameText = [room.name stringByReplacingOccurrencesOfString:@"_" withString:@""];

      NSString* newSearchText = [searchText stringByReplacingOccurrencesOfString:@" " withString:@""];

      for(int i = 0 ;i<[newSearchText length]; i++) {
          char mySearchChar = [newSearchText characterAtIndex:i];

          lastSearchString = [NSString stringWithFormat:@"%c",mySearchChar];

          NSRange searchRange = [newRoomNameText rangeOfString:lastSearchString options:NSCaseInsensitiveSearch];
          if (searchRange.location != NSNotFound){
              stringScore = stringScore + 1;
              if (stringScore == newSearchText.length) {
                  [roomsList addObject:room];

              }

          }}}}

[gsgTableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:28:24.483

您可以使用谓词来解决这个问题。它们在过滤数组时非常方便。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Self contains[c] %@",self.searchString.text];

NSArray *filteredArray = [self.superHeroesArray filteredArrayUsingPredicate:predicate]; 
```

添加`[c]`after`contains`确保搜索不区分大小写。

# linux - FUSE 文件系统的并行网络 i/o

> ID：16137298
> 
> 赞同：1
> 
> 时间：2013-04-21T23:25:30.170
> 
> 标签：linux, file, kernel, system, fuse

**我的动力**

我很想用 FUSE 写一个分布式文件系统。在我开始之前，我仍在设计代码。它可能用 C 或 Go 编写，问题是，我如何并行处理网络 i/o？

**我的问题**

更具体地说，我希望我的文件系统在本地写入，并让一个线程异步处理网络开销。在我的情况下是否稍微延迟都没关系，我只是想避免缓慢写入文件，因为代码必须在某处联系一些慢速服务器。

**我的理解**

我脑子里有两个想法冲突。一是FUSE内核模块使用我程序的ABI劫持进程，调用我实现的具体FUSE函数名（sync or async, w/e），二是..程序正在运行，阻塞到从内核模块接收事件（我不认为是这种情况，但我可能是错的）。

不管是什么，这是否意味着我可以简单地启动一个线程并做网络工作？我对它的工作原理有点迷茫。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:17:30.503

你不需要做任何劫持。FUSE 内核模块注册为文件系统提供程序（类型为 fusefs）。然后它通过将它们分派到用户模式进程来服务读/写/打开/等调用。当该进程返回时，内核模块获取返回值，并从相应的系统调用中返回。

如果您想通过异步和多线程来拥有服务器（即用户模式进程），您所要做的就是将操作（假设它是写入 - 您不能以这种方式并行化输入）分派到该进程中的另一个线程，并立即返回 FUSE。这样，您的用户模式进程可以在闲暇时向远程服务器写出。

您可以类似地尝试并行读取，但这里的问题是您将无法返回 FUSE（并因此释放读取过程），直到您至少开始读取数据。

# java - 此行有多个标记 - 标记 ")" 上的语法错误，；预期 - 令牌“（”，{预期的语法错误

> ID：16137302
> 
> 赞同：1
> 
> 时间：2013-04-21T23:25:48.873
> 
> 标签：java, java-7, parentheses, try-finally

我正在学习 Java（对不起，我的英语很差，这不是我的母语），当我在 Eclipse（JavaSE-1.7）中执行“try-finally”块时，在我输入的每个“尝试”中都会出现以下消息：

> 此行有多个标记 - 语法错误，插入“}”以完成 Block - 语法错误，插入“Finally”以完成 BlockStatements

这是完整的代码：

```
package Java;

public class Arquivo3 {

    private Path BdC = Paths.get("C:/xti/files/conta.txt");
    private Charset utf8 = StandardCharsets.UTF_8;

    public void armazenarContas(ArrayList<Conta> contas) throws IOException{                
        try(BufferedWriter writer = Files.newBufferedWriter(BdC, utf8)) {
            for (Conta conta : contas) {
                writer.write(conta.getCliente() + ";" + conta.getSaldo() + "\n");
            }
        }
    }

    public ArrayList<Conta> recuperarContas() throws IOException{
        ArrayList<Conta> contas = new ArrayList<Conta>();
        try (BufferedReader reader = Files.newBufferedReader(BdC, utf8)){
            String line = null;
            while((line = reader.readLine()) != null) {
                String[] t = line.split(";");
                Conta conta = new Conta(t[0], Double.parseDouble(t[1]));
                contas.add(conta);
            }
        }finally {
        return contas;  
        }

    }

    public static void main(String[] args) throws IOException{
/*
        ArrayList<Conta> contas = new ArrayList<Conta>();
        contas.add(new Conta("Ricardo", 12000.23));
        contas.add(new Conta("Lawrence", 11050.32));
        contas.add(new Conta("Sandra", 18000.21));
        contas.add(new Conta("Beatriz", 23200.09));
    */  
        Arquivo3 operacao = new Arquivo3();
        //operacao.armazenarContas(contas);
        ArrayList<Conta> contas2 = operacao.recuperarContas();
        for (Conta conta : contas2) {
            conta.exibeSaldo();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T05:49:16.613

使用来自 OP 的评论

> @yan 奇怪，我使用 jdk7，这对我有用，但是，也许 eclipse 使用 jdk6 来测试语法错误。– 港琴老湖 2 小时前

那是对的。您正在使用一些 jdk7 功能，但 eclipse 配置为使用 jdk6（或更早版本）。以下是使用 eclipse 启用 jdk7 的说明（ [将 eclipse 的 java 编译器更改为 jdk7](https://stackoverflow.com/questions/8022233/changing-eclipses-java-compiler-to-jdk7)）。

具体来说，合规性设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:31:26.607

正如 Eclipse 所说，在您的`armazenarContas()`方法中，您不会用 a （或其他任何东西）来完成您的[`try{}`](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)陈述。您`finally`需要[`catch{}`](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)在.[`finally{}`](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)`try{}`

你的语法应该是这样的：

```
try {
//Do stuff
} catch (ExceptionType name) {
//If an exception occours, you can handle it here.
} 
```

或者：

```
try {
//Do stuff
} finally {
//Everything in this block of code will be excecuted
} 
```

或者您甚至可以[将它们全部组合起来](http://docs.oracle.com/javase/tutorial/essential/exceptions/putItTogether.html)：

```
try{
//Do stuff
} catch (ExceptionType name) {
//If you get an exception
} finally {
//Always excecuted
} 
```

# ruby-on-rails - Rails Rspec 错误 - 未定义的方法“访问”

> ID：16137303
> 
> 赞同：9
> 
> 时间：2013-04-21T23:26:10.747
> 
> 标签：ruby-on-rails, rspec, tdd, capybara, bdd

所以我是 TDD 的新手，我在测试中抛出了一些 Rspec 错误......基本上在运行 bundle exec rspec spec 之后，我的`undefined method 'visit'`一些规范出现错误。任何有关如何使这些测试通过的帮助将不胜感激：谢谢。

```
Failures:

1) User pages profile page 
 Failure/Error: before { visit user_path(user) }
 NoMethodError:
   undefined method `visit' for # <RSpec::Core::ExampleGroup::Nested_2::Nested_1:0x007ffda8049540>
 # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

2) User pages profile page 
 Failure/Error: before { visit user_path(user) }
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_1:0x007ffda4f3ac38>
 # ./spec/requests/user_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

3) User pages signup page 
 Failure/Error: before { visit signup_path }
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_2:0x007ffda8262e58>
 # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

4) User pages signup page 
 Failure/Error: before { visit signup_path }
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_2:0x007ffda82663c8>
 # ./spec/requests/user_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

Finished in 9.08 seconds
24 examples, 4 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:11 # User pages profile page 
rspec ./spec/requests/user_pages_spec.rb:12 # User pages profile page 
rspec ./spec/requests/user_pages_spec.rb:18 # User pages signup page 
rspec ./spec/requests/user_pages_spec.rb:19 # User pages signup page 
```

我的规范/请求/user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) } # Code to make a user variable
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: 'Sign up') }
  end
end 
```

还有我的 spec/models/user_spec.rb

```
require 'spec_helper'

describe User do

before do
  @user = User.new(name: "Example User", email: "user@example.com",
                  password: "foobar", password_confirmation: "foobar")
end

subject { @user }

it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) }
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:authenticate) }

it { should be_valid }

describe "when name is not present" do
  before { @user.name = " " }
  it { should_not be_valid }
end

describe "when email is not present" do
  before { @user.email = " " }
  it { should_not be_valid }
end

describe "when name is too long" do
  before { @user.name = "a" * 51 }
  it { should_not be_valid }
end

describe "when email format is invalid" do
  it "should be invalid" do
    addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                   foo@bar_baz.com foo@bar+baz.com]
    addresses.each do |invalid_address|
      @user.email = invalid_address
      @user.should_not be_valid
    end      
  end
end

describe "when email format is valid" do
  it "should be valid" do
    addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
    addresses.each do |valid_address|
      @user.email = valid_address
      @user.should be_valid
    end      
  end
end

describe "when email address is already taken" do
  before do
    user_with_same_email = @user.dup
    user_with_same_email.email = @user.email.upcase
    user_with_same_email.save
  end
  it { should_not be_valid }
end

describe "when password is not present" do
  before { @user.password = @user.password_confirmation = " " }
  it { should_not be_valid }
end

describe "with a password that's too short" do
  before { @user.password = @user.password_confirmation = "a" * 5 }
  it { should be_invalid }
end

describe "return value of authenticate method" do
  before { @user.save }
  let(:found_user) { User.find_by_email(@user.email) }

  describe "with valid password" do
    it { should == found_user.authenticate(@user.password) }
  end

  describe "with invalid password" do
    let(:user_for_invalid_password) { found_user.authenticate("invalid") }

    it { should_not == user_for_invalid_password }
    specify { user_for_invalid_password.should be_false }
  end
end 

describe "when password doesn't match confirmation" do
  before { @user.password_confirmation = "mismatch" }
  it { should_not be_valid }
end

describe "when password confirmation is nil" do
  before { @user.password_confirmation = nil }
  it { should_not be_valid }
end

end 
```

最后是我的意见/用户/new.html.erb

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>
<p>Find me in app/views/users/new.html.erb</p> 
```

和意见/用户/show.html.erb

```
<% provide(:title, @user.name) %>
<h1><%= @user.name %></h1> 
```

& 我已经添加了我的用户控制器

```
class UsersController < ApplicationController
  def new
  end

  def show
   @user = User.find(params[:id])
  end
end 
```

在按照比利的解决方案进行修复后，现在也出现了这个新错误

```
Failures:

1) User pages signup page 
 Failure/Error: it { should have_selector('title', text: 'Sign up') }
 Capybara::ExpectationNotMet:
   expected to find css "title" with text "Sign up" but there were no matches. Also found "", which matched the selector but not all filters.
 # ./spec/features/user_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

2) User pages profile page 
 Failure/Error: it { should have_selector('title', text: user.name) }
 Capybara::ExpectationNotMet:
   expected to find css "title" with text "Michael Hartl" but there were no matches. Also found "", which matched the selector but not all filters.
 # ./spec/features/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>'

Finished in 9.41 seconds
24 examples, 2 failures

Failed examples:

rspec ./spec/features/user_pages_spec.rb:19 # User pages signup page 
rspec ./spec/features/user_pages_spec.rb:12 # User pages profile page 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-22T00:35:53.953

问题在这里：

```
./spec/requests/user_pages_spec.rb 
```

您将 Capybara 集成测试放在`requests`文件夹中。这就是为什么该方法`visit`行不通的原因。

要修复，只需将所有测试从 `spec/requests`移至 `spec/features`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-22T00:39:41.720

发生这种情况是因为您尝试使用`visit`来自 的方法`Capybara::DSL`。如果您检查[文档](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)：

```
Capybara 不再支持
 请求从 Capybara 2.0.0 开始的规格。使用 Capybara 的推荐方法是
 具有功能规格。

```

要解决此问题，您应该将测试移动到`spec/features`文件夹或包含`Capybara::DSL`请求规范：

```
#spec_helper.rb
RSpec.configure do |config|
  #...
  config.include Capybara::DSL, :type => :request 
```

# linux - 使用 shell 脚本在文件中获取具有相同字段的 1 行

> ID：16137308
> 
> 赞同：0
> 
> 时间：2013-04-21T23:27:42.573
> 
> 标签：linux, shell, sed, awk

我有一个文件，内容如下：

```
onelab2.warsaw.rd.tp.pl    5
onelab3.warsaw.rd.tp.pl    5
lefthand.eecs.harvard.edu  7
righthand.eecs.harvard.edu 7
planetlab2.netlab.uky.edu  8
planet1.scs.cs.nyu.edu     9
planetx.scs.cs.nyu.edu     9 
```

所以对于每一行，有一个数字我想要每个数字的第一行，所以对于上面的内容，我想得到：

```
onelab2.warsaw.rd.tp.pl    5
lefthand.eecs.harvard.edu  7
planetlab2.netlab.uky.edu  8
planet1.scs.cs.nyu.edu     9 
```

我怎样才能做到这一点？我希望使用 awk、sed 等的 shell 脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T05:53:50.697

这可能对您有用（GNU 排序）：

```
sort -nsuk2 file 
```

`-k2`以数字方式对第二个字段进行排序，`-n`保持`-s`原始顺序并`-u`删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:44:24.077

为此使用`awk`命令：

```
awk '{if(!a[$2]){a[$2]=1; print}}' file.dat 
```

解释：

```
{
  # 'a' is a lookup table (array) which will contain all numbers
  # that have been printed so far. It will be initialized as an empty
  # array on its first usage by awk. So you don't have to care about.
  # $2 is the second 'column' in the line -> the number
  if(!a[$2]) 
  {
    # set index in the lookup table. This way the if statement will 
    # fail for the next line with the same number at the end
    a[$2]=1;
    # print the whole current line
    print
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:10:38.687

使用 sort 和 uniq：

```
sort -n -k2 input | uniq -f1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:03:09.807

```
perl -ane 'print unless $a{$F[1]}++' file 
```

# php - 未知数量的结果分为 3 列创建 4 列而不是 MySQL/PHP

> ID：16137309
> 
> 赞同：0
> 
> 时间：2013-04-21T23:27:48.077
> 
> 标签：php

我有一个从表中获取一些数据的查询，我想在 3 列上均匀地显示数据，但是如果返回的结果数不能被 3 整除，则脚本会创建第四列。我的脚本是：

```
$columnCount = 0;
$howManyPerColumn = mysqli_num_rows($get_category_query) / 3;

<div class="listingCategoryListWrapper">
  <ul class="categoryList">
    <?php
      while($get_category_result = mysqli_fetch_assoc($get_category_query)){
          $columnCount++;
          if($columnCount <= $howManyPerColumn){
            echo('<li><input name="txtCategory[]" type="checkbox" />List item</li>');
          }
          else
          {
            echo('</ul></div><div class="listingCategoryListWrapper"><ul class="categoryList"><li><input name="txtCategory[]" type="checkbox" />List item</li>');
            $columnCount = 1;
          }
      }
    ?>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:38:01.150

你试过这种方法吗？

在顶部：

```
$columnCount = 1; 
```

接着：

```
while($get_category_result = mysqli_fetch_assoc($get_category_query)){

      if($columnCount <= $howManyPerColumn){
        echo('<li><input name="txtCategory[]" type="checkbox" />List item</li>');
        $columnCount++;
      } 
```

你可以通过这种方式更好地控制它：

```
 $howMany = mysqli_num_rows($get_category_query);
 $howManyPerColumn = $howMany / 3;
 $theInt = floor($howManyPerColumn * 3);
 if(($theInt * 3) < $howMany)$howManyPerColumn+=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:22:21.027

使用原始代码，只需将 ceil 添加到每列的编号

```
$howManyPerColumn = ceil(mysqli_num_rows($get_category_query) / 3); 
```

# android - 将来自 android 应用程序的数据插入 Oracle SQL 表，然后获取自动生成的 id 并将其插入另一个表

> ID：16137311
> 
> 赞同：0
> 
> 时间：2013-04-21T23:28:08.187
> 
> 标签：android, sql, database, oracle

我有两个表存储在 Oracle 数据库中。一种存储客户数据，例如姓名和地址。然后我有另一个表，其中包含客户用户名和密码，并将客户 ID 作为外键。然后我有一个 Android 应用程序，用户可以在其中创建新帐户。我遇到的困难是说用户在点击提交按钮时输入了信息以及用户名和密码，所有那里的详细信息都需要输入到客户表中。然后，这将使用我的触发器和序列生成一个自动编号 ID。然后我需要检索这个自动生成的号码并将其与用户名和密码一起提交到用户名表中。我这可能在 SQL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:32:54.370

您可以在插入命令中使用[返回子句](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2171131)。

它应该如下所示：

```
INSERT INTO customer (col1, col2, ...) VALUES (val1, val2, ...)
RETURNING id 
```

另一种选择是使用[INSERT ALL](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2095116)语法，如下所示：

```
INSERT ALL
  INTO customer (id, col1, col2, ...) VALUES (your_seq.nextval ,val1, val2, ...)
  INTO customer_details (cust_id, col1, col2, ...) VALUES (your_seq.currval ,val1, val2, ...)
select * from dual; 
```

# css - CSS 元素 (DIV) 隐藏和浮动

> ID：16137316
> 
> 赞同：0
> 
> 时间：2013-04-21T23:28:50.147
> 
> 标签：css

当div元素悬停（鼠标悬停）时，如何隐藏div元素**上方的表格元素**

仅 CSS **

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:02:23.943

我编辑了你的小提琴，按照你的要求工作：[小提琴](http://jsfiddle.net/3dKRm/ "小提琴")。（注意类“重叠”）

```
<div class="overlap" style="">
test
</div> 
```

CSS：

```
.overlap {
    background-color:red; top:-65px; margin:2px; display:block;
}
.overlap:hover{
    top:-160px;
    padding-top:95px;
} 
```

# tfs - 如何使用 TFS 集成平台将团队项目从一个集合复制到另一个集合，TFS2012 到 TFS2012

> ID：16137317
> 
> 赞同：7
> 
> 时间：2013-04-21T23:29:20.610
> 
> 标签：tfs, tfsintegrationplatform

我已经从 CodePlex 下载了最新的 TFS 集成平台，并尝试使用提供的“源代码控制和工作项”模板`MyProject`在`CollectionA`左侧的现有团队项目和右侧的空团队项目`MyProject`之间迁移“单向” 。`CollectionB`每当我这样做时，它都会引发一些关于构建模板的异常（我解决了它们），然后它会显示这个带有条形图的漂亮的变更集图表，我觉得它已经完成了一些事情。每次我尝试这个时，我都会`MyProject`在源代码管理中`CollectionB`查看，以期从`CollectionA`. 每次，我都很失望——它是空的，看起来什么也没发生。

顺便说一句，我正在尝试将项目从同一 TFS 2012 服务器上的集合之间移动。

我误解了集成平台的意义吗？还是它实际上不适用于 TFS 2012？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T23:24:58.980

好的，这就是我的做法。

假设我正在尝试将项目`MyProject`从复制`SourceCollection`到`TargetCollection`.

1.  `MyProject`在中创建一个新项目`TargetCollection`
2.  开放[TFS 集成平台](http://tfsintegration.codeplex.com/)
3.  在配置下选择“新建”
4.  打开文件夹“Team Foundation Server”（%ProgramFiles%\Microsoft Team Foundation Server Integration Tools\Configurations\Team Foundation Server）
5.  如果需要，请选择“VersionControl.xml”或“VersionControlAndWorkItemTracking.xml”（如果您选择包括 WorkItem 跟踪，请确保您启动 TFS 集成的帐户是“Team Foundation Service Accounts”TFS 全局组中的用户）
6.  工作流类型：自定义/频率：一次性/方向：单向/同步上下文：禁用（您的选择可能不同）
7.  左图：“TFS 11 Migration VC Provider”
8.  选择现有`MyProject`项目`SourceCollection`
9.  正确来源：“TFS 11 Migration VC Provider”
10.  选择新`MyProject`项目`TargetCollection`
11.  **重要提示：您必须在文件夹列表中明确且单独地包括根目录下的所有文件夹（路径）。仅仅使用 $/ 或 $/MyProject 是行不通的**。例如，如果您有文件夹`src/`并且`test/`在根目录下，则必须将它们包括为`$/MyProject/src`和`$/MyProject/test`。确保您还在 中创建这些文件`MyProject`夹`TargetCollection`。
12.  保存到数据库
13.  开始迁移
14.  处理任何异常

你完成了。

# ios - 通过遍历数组创建按钮

> ID：16137323
> 
> 赞同：0
> 
> 时间：2013-04-21T23:30:56.920
> 
> 标签：ios, arrays, uibutton, uilabel

所以我早些时候问了这个问题，并得到了一些回复，但事情变得非常混乱，所以我决定在这里重新提问。

我在这里初始化一个滚动视图：

```
ScrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,480)];
ScrollView.showsVerticalScrollIndicator=YES;
ScrollView.scrollEnabled=YES;
ScrollView.bounces = YES;
ScrollView.userInteractionEnabled=YES;
[self.view addSubview:ScrollView];
ScrollView.contentSize = CGSizeMake(10500,480);
[self.view addSubview:homeButton]; 
```

我有要创建的 44 个按钮的数组，这些数组包含有关名称、图片的文件名、坐标等的信息。

我正在运行这个：

```
for (int i = 0; i < 44; i++) {
    [self makeLabelsAndButtons:i];
    xPresCoord += 10;
} 
```

在我看来DidLoad

这是 makeLabelsAndButtons 的方法：

```
-(void)makeLabelsAndButtons:(NSInteger)indexPath{

Button = [UIButton buttonWithType:UIButtonTypeCustom];
[Button addTarget:self action:@selector(presPressed:) forControlEvents:UIControlEventTouchUpInside];
Button.frame = CGRectMake(160.0, 240.0, 220.0, [[numbers objectAtIndex:indexPath] integerValue]);
Button.center = CGPointMake(xPresCoord, 200.0);
[Button setBackgroundImage:[UIImage imageNamed:[picArray objectAtIndex:indexPath]] forState: UIControlStateNormal];
[self.ScrollView addSubview:Button];

Label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 0, 32)];
Label.text = [nameArray objectAtIndex:indexPath];
Label.center = CGPointMake([[numbers objectAtIndex:indexPath] integerValue], 390);
[Label setFont:[UIFont fontWithName:@"GurmukhiMN" size:27]];
Label.numberOfLines = 1;
Label.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5f];
[Label sizeToFit];
Label.textColor= [UIColor whiteColor];
[ScrollView addSubview:Label];
//[ScrollView insertSubview:Label atIndex:1];

//NSLog(@"name: %@, pic:%@, picY:%i", nameString, picString, picNumb);
for (UIView *subview in ScrollView.subviews) NSLog(@"View: %@", subview);

} 
```

最后一个 NSLOG 显示没有添加子视图（标签和按钮），但我不知道为什么。

Button 和 Label 定义为：

```
UIButton *Button;
UILabel *Label; 
```

在我的 .h 文件中

任何帮助表示赞赏！

编辑：这是另一个问题的链接

[使用数组创建按钮](https://stackoverflow.com/questions/16124584/creating-buttons-with-an-array)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:55:09.297

这是我的代码，

```
#import "ViewController.h"

@interface ViewController ()
@property (strong,nonatomic) UIScrollView *scrollView;
@property (strong,nonatomic) NSArray *nameArray;
@property (strong,nonatomic) NSArray *numbers;
@property (strong,nonatomic) NSArray *picXCoords;
@property (strong,nonatomic) NSArray *picArray;
@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.nameArray = @[@"First",@"Second",@"Third"];
    self.numbers = @[@30,@50,@70];
    self.picXCoords = @[@160,@400,@700];
    self.picArray = @[@"back1.tiff", @"back2.tiff",@"Baldacci.tiff"];
    self.scrollView=[[UIScrollView alloc]initWithFrame:CGRectMake(0,0,320,480)];
    self.scrollView.showsVerticalScrollIndicator=YES;
    self.scrollView.scrollEnabled=YES;
    self.scrollView.bounces = YES;
    self.scrollView.userInteractionEnabled=YES;
    [self.view addSubview:self.scrollView];
    self.scrollView.contentSize = CGSizeMake(20000,480);

    for (int i = 0; i < 3; i++) {
        [self makeLabelsAndButtons:i];
    }
}

-(void)makeLabelsAndButtons:(NSInteger)indexPath{
    NSString *nameString = [self.nameArray objectAtIndex:indexPath];
    NSString *picString = [self.picArray objectAtIndex:indexPath];
    NSInteger picNumb = [[self.numbers objectAtIndex:indexPath] integerValue];
    NSInteger picXnum = [[self.picXCoords objectAtIndex:indexPath] integerValue];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button addTarget:self action:@selector(presPressed:) forControlEvents:UIControlEventTouchUpInside];
    button.frame = CGRectMake(160.0, 240.0, 220.0, picNumb);
    button.center = CGPointMake(picXnum, 200.0);
    [button setBackgroundImage:[UIImage imageNamed:picString] forState: UIControlStateNormal];
    [button setTitle:self.nameArray[indexPath] forState:UIControlStateNormal];
    [self.scrollView addSubview:button];
    NSLog(@"name: %@, picY:%i", nameString, picNumb);

} 
```

# macos - 与 Mac OSx 的 windows Jumplists 类似的功能？

> ID：16137324
> 
> 赞同：0
> 
> 时间：2013-04-21T23:31:05.177
> 
> 标签：macos, lazarus

我正在将一个应用程序（最初用 Delphi XE3 编写 - 转换为 Pascal / Lazarus）从 Windows 转换为 Mac。该程序使用 windows Jumplists 将参数传递给应用程序，允许从任务栏对其进行控制，而无需离开其他应用程序。即-右键单击任务栏中的图标，然后从跳转列表中的列表中选择所需的功能（由我的应用程序动态填充）。然后跳转列表将一个参数传递回我的应用程序，该应用程序处理消息并采取行动。[（如果我在这里](http://www.youtube.com/watch?feature=player_embedded&v=stiTd7kHwPY#t=113)不清楚，我有一个实践中的视频）

我不是 Mac 用户，我正在努力在 OSx 世界中找到任何等效的东西。我可以在 Mac 世界中使用什么类似的东西，或者这注定是一个仅限 Windows 的功能吗？欢迎任何想法 - 我对它的工作原理并不珍贵 - 但我很想有一些我可以使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T22:10:08.880

事实上，Mac OS X 提供了一个类似的功能，Dock Tile Menus。然而不幸的是，在 Lazarus 和 Free Pascal 中没有对 ApplicationManager 的直接支持。

您可以使用[http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/tasks/docktasks.html](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/tasks/docktasks.html)提供的信息将 XCode 的 C 头文件转换为 Pascal 并实现您自己的解决方案。

# html - 溢出隐藏似乎在Firefox中不起作用

> ID：16137333
> 
> 赞同：0
> 
> 时间：2013-04-21T23:32:03.143
> 
> 标签：html, css

我的项目有一个小问题，我用 css 做了一个滑动墙，它在 chrome 中看起来不错，但我不知道为什么它不能与 firefox 一起使用，因为它给了我一个很大的溢出。

它看起来与它有关，`<div class=info>` 但它可能是其他原因造成的。

这段代码来自一个应该可以工作的教程，因为我没有太大改变，我认为`<div id=overflow>`它只是将这个作为 css

> #溢出{
> 宽度：100％；
> 溢出：隐藏；
> 最小高度：600px；}

会做这项工作，但不是我的情况。

这是 jsFiddle 的[链接](http://jsfiddle.net/NuBys/)以显示问题

现在我不知道是什么导致了问题，请注意使用 firefox 时网站底部的滚动条。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:21:54.190

[检查一下](http://jsfiddle.net/NuBys/3/) 您所要做的就是添加`position:relative;`到您的`#overflow`. 这适用于我的 Firefox 20.0.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:31:36.793

这在 Firefox 中对我有用：

```
#overflow {
width: 100%;
overflow-x: hidden !important;
position:relative !important;
min-height: 600px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:06:39.263

如果你设置：

```
html {
    width: 100%;
    overflow-x: hidden;
} 
```

它似乎纠正了 Firefox 中的问题。这确实意味着如果浏览器窗口比内容窄，用户将无法滚动查看隐藏的内容。

# javascript - 限制 JQuery/ajax 中的列表选择

> ID：16137334
> 
> 赞同：1
> 
> 时间：2013-04-21T23:32:21.593
> 
> 标签：javascript, jquery, css, ajax, html-lists

其他问题与此类似，但我的问题只是我不知道将信息放在哪里。也就是说，我试图限制从下面脚本内的列表中提取的项目数量。脚本本身运行良好，我只需要将拉取的项目数限制为六个而不是全部。我觉得这很简单，但是我从其他帖子中插入的每一行代码都对我不起作用。有什么帮助吗？

```
(function($){
 $.ajax({
            type: "GET",
            url: "/homepage_photo_slider/PhotoGallery.xml", 
            dataType: "xml",
            success: function(xml) {
                $(xml).find('img').each(function() {
                   var location = '/homepage_photo_slider/'; 
                   var url = $(this).attr('src');
                    var alt = $(this).attr('alt');

                    $('<li></li>').html('<a href="'+location+''+url+'" class="pirobox" rel="gallery" title="'+alt+'"><img class="thumb" src="'+location+''+url+'" alt="'+alt+'" title="'+alt+'" /></a>').appendTo('#gallery-ul');

             });
            $().piroBox_ext({
            piro_speed : 700,
            bg_alpha : 0.5,
            piro_scroll : true
    });  
            }       
        });     
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:41:57.100

尝试使用 for 循环而不是 .each() 方法：

```
var $images = $(xml).find('img');
for(var i = 0; i < 6; i++)
{
    var $image = $($images[i])
    var location = '/homepage_photo_slider/'; 
    var url = $image.attr('src');
    var alt = $image.attr('alt');

    $('<li></li>').html('<a href="'+location+''+url+'" class="pirobox" rel="gallery" title="'+alt+'"><img class="thumb" src="'+location+''+url+'" alt="'+alt+'" title="'+alt+'" /></a>').appendTo('#gallery-ul');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:36:15.753

未经测试，但我认为这应该有效。我只更改了一行，注释中已标记。在应用之前，我使用 slice 方法将数组缩减为六个元素`each`：

```
(function($){
 $.ajax({
            type: "GET",
            url: "/homepage_photo_slider/PhotoGallery.xml", 
            dataType: "xml",
            success: function(xml) {
                $(xml).find('img').slice(0,6).each(function() { // <--- CHANGED LINE HERE
                   var location = '/homepage_photo_slider/'; 
                   var url = $(this).attr('src');
                    var alt = $(this).attr('alt');

                    $('<li></li>').html('<a href="'+location+''+url+'" class="pirobox" rel="gallery" title="'+alt+'"><img class="thumb" src="'+location+''+url+'" alt="'+alt+'" title="'+alt+'" /></a>').appendTo('#gallery-ul');

             });
            $().piroBox_ext({
            piro_speed : 700,
            bg_alpha : 0.5,
            piro_scroll : true
    });  
            }       
        });     
})(jQuery); 
```

# view - 如何在超级视图中移动 UIView

> ID：16137337
> 
> 赞同：0
> 
> 时间：2013-04-21T23:32:37.220
> 
> 标签：view, uiimageview, storyboard

我有一个由我的 UIViewController 控制的“主”视图。我在该视图中添加了 2 个标签和 UIImageView。UIImageView 中的图像是箭头图像，我想将该图像从一个标签移动到另一个标签。

我试图从我的控制器设置 UIViewImage 的来源，但 Xcode 显示错误标志：“表达式不可分配”：

```
self.myArrowPointer.bounds.origin.y = 150.0; 
```

我想过制作一个视图，即“包装”标签和此图像视图。并通过 drawRect 方法从这个 view.m 文件中移动这个 UIImageView。但是，如果我从情节提要中制作了这些对象（标签、UIImageView），我不知道该怎么做。

所以，我的问题是如何在我的故事板视图中移动 UIImageView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:38:25.343

这是一个二传手，所以你必须传递整个结构。像这样：

```
CGRect bounds = self.myArrowPointer.bounds;
bounds.origin.y = 150;
self.myArrowPointer.bounds = bounds; 
```

但是您需要使用`self.myArrowPointer.frame`或`self.myArrowPointer.center`移动图像来执行此操作。

# java - 使用 Java 枚举

> ID：16137340
> 
> 赞同：0
> 
> 时间：2013-04-21T23:33:20.333
> 
> 标签：java

我想从这个枚举中使用 2 次，首先在某些时候这些 int 值将从数据库中出来。在不修改构造函数的情况下，我想从中获得一个用户友好的名称，就像一个对象包含 INS 一样，我希望枚举上的方法之一返回“保险”.. 我如何将这些方法添加到这个枚举（不修改构造函数），这将为程序员提供技术名称，例如“HCARE”，并为用户提供用户友好名称“Insurance”。另外，想知道从数据库中获取用户友好名称需要进行哪些更改？

```
public enum Type
{
    UNDEF(-1),
    HCARE(1),
    INS(2);

    private int value;

    Type(final int value)
    {
        this.value = value;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:39:59.537

覆盖`toString`每个成员：

```
public enum Type
{
    UNDEF(-1)
    {
         public String toString(){ return "Friendly name here"; }
    },
    HCARE(1)
    {
         public String toString(){ return "Friendly name here"; }
    },
    INS(2)
    {
         public String toString(){ return "Insurance"; }
    };

    private int value;

    Type(final int value)
    {
        this.value = value;
    }

    public abstract String toString();

} 
```

文档说“当存在更“程序员友好”的字符串形式时，枚举类型应该覆盖 [toString]。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:36:59.897

您可以添加一种方法来从数据库（可能缓存它）或最初从其他地方（例如资源文件）获取用户友好的名称。

由于我们在这里讨论显示名称，因此我还添加了一个 Locale 参数，因此它可以支持多种语言。

```
public enum Type
{
    UNDEF(-1),
    HCARE(1),
    INS(2);

    private int value;

    Type(final int value)
    {
        this.value = value;
    }

    public String getNiceName(Locale l){
        // look at my id and code and use that to look up the name
        return NiceNameManager.nameForType(this, l);
    }
} 
```

# authentication - 验证码错误

> ID：16137342
> 
> 赞同：1
> 
> 时间：2013-04-21T23:33:28.943
> 
> 标签：authentication

这是一个 php 脚本的链接，该脚本需要验证授予 Uberflip 的用户名和密码。建议的代码可以在[这里看到](https://support.uberflip.com/forums/64328/entries/54720)

它应该回显一个用于身份验证的变量，但似乎给出了以下错误。

> 警告：mysql_result()：提供的参数不是 /home/healthev/public_html/journal/verify_subscribers.php 第 8 行用户名/密码组合中的有效 MySQL 结果资源

这是我对代码应该如何理解的理解。有人可以就我可能出错的地方提供反馈吗？

```
<?php
mysql_connect("localhost", "database_user_name", "database_password");
mysql_select_db("database_name");

$sql = "SELECT count * FROM 'subscribers' where user_login='" . $_POST['user_login'] . "' AND user_pass='" . $_POST['user_pass'] . "' LIMIT 1";

$result = mysql_query($sql);
$count = mysql_result($result,0); 

if($count==1){
echo "welcome!";
}

else {

echo "username/password combo not found";

}

?> 
```

# css - 键盘显示 phonegap 时页面内容不滚动

> ID：16137348
> 
> 赞同：18
> 
> 时间：2013-04-21T23:34:44.180
> 
> 标签：css, html, cordova

在我的应用程序中，当我尝试输入字段时出现注册问题，键盘隐藏了其他字段，这些字段是屏幕截图 ![在此处输入图像描述](https://i.stack.imgur.com/ZcJ1L.png)

![在此处输入图像描述](https://i.stack.imgur.com/2nRqM.png)

我们如何解决我希望页面可滚动的问题，对于我正在使用 phonegap 构建的信息，这需要对 config.xml 进行某些更改，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-06-14T08:42:52.393

我也遇到了这个问题 - 潜在的问题似乎是您无法使用 Phonegap Build 编辑 androidManifest 文件 - 您所能做的就是编辑 config.xml 文件，该文件实际上只允许您更改有限的设置子集。我想要的是能够改变windowSoftInputMode（还有很多其他人已经尖叫了很长时间）。

不过，我确实找到了解决问题的方法——键盘出现在屏幕底部的字段上，我认为这与您遇到的问题相同。对我来说 - 我使用的是最新的 phonegap 2.7.0（但能够通过在 config.xml 文件中指定 phonegap 2.5.0 来重现相同的行为和解决方案）

我找到的解决方案是在 config.xml 中更改此设置

```
<preference name="fullscreen" value="false" /> 
```

这确实意味着您会在屏幕顶部看到“状态栏”。这对我来说没什么大不了的（事实上，我认为最好把它放在那里……至少对于我的应用程序而言）——将该设置设置为“ false”而不是“true” - 页面现在向上滚动以在键盘打开时显示您正在编辑的字段。（更准确地说，我相信视口会发生变化而不是向上滚动）

希望能帮助并解决您的问题.. 花了我几个小时的搜索和摆弄才能让它工作（如果我没有发现我将不得不放弃 phonegap 构建）

喜悦！迪伦

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-18T13:22:11.120

尝试这样的事情`config.xml`：

```
<preference name="fullscreen" value="false" />
<preference name="android-windowSoftInputMode" value="stateVisible" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T04:22:17.890

如果您使用 phonegap 构建

尝试在 config.xml 中添加它，它可以帮助我解决同样的问题：

```
<gap:config-file platform="android" parent="/manifest/application">
        android:windowSoftInputMode="stateVisible"
</gap:config-file> 
```

感谢 Manuel 指出参数 windowSoftInputMode="stateVisible"

# symfony - 创建内部消息系统，我从头开始还是我依赖 捆绑？

> ID：16137353
> 
> 赞同：1
> 
> 时间：2013-04-21T23:35:16.093
> 
> 标签：symfony, symfony-2.1

我必须在网站前端的应用程序页面中实现一个功能，用户可以在其中提交请求，使用不同的数据名称、电话号码、电子邮件、描述请求..

这个请求是通过邮件发送并显示在后端，您可以在后台回复消息，然后通过电子邮件发送答案。

我根据您的经验向您提出一些建议，我从头开始做所有事情，

或者我可以依赖捆绑类型 FOSMessageBundle 并扩展我需要的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T22:36:02.360

我肯定会试试 FOSMessageBundle。FOS 捆绑包得到了很好的维护和记录，所以它应该是一个很好的起点！

# twitter-bootstrap - 带有 LESS 的 Express.js 中的引导程序：在 public/lib/ 中包含引导文件夹？

> ID：16137360
> 
> 赞同：0
> 
> 时间：2013-04-21T23:36:29.913
> 
> 标签：twitter-bootstrap, express, less, pug

我完全是 Express.js 的初学者，我正在尝试使用 Express、js、Jade 和 Less 构建一个简单的网站。我创建文件夹项目的方式是：

```
 $ mkdir myProj
 $ cd myProj
 $ express --sessions --css less 
```

最近我听说了 bootstrap，我想将它包含在我的项目中。我试图找到有关如何添加和包含引导程序的在线教程，我尝试这样做的方法是：

```
 --> download bootstrap from the official page
 --> add the downloaded folder in public/lib/bootstrap
 --> include the css files in the layout.jade as follows: link(rel='stylesheet', href='/lib/bootstrap/css/bootstrap.css') 
```

据我所见，它正在工作。但我不确定这是否是在 Express.js 中包含引导程序的正确方法。有没有其他方法可以在 Express.js 中包含引导程序，我的方法是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T18:32:27.240

这个怎么样？

```
$ npm install -g twitter-bootstrap-node

# Create the project: (Default css engine is "less",And template engine is "jade")

$ twitter-bootstrap project
$ cd project
$ node app.js 
```

# ember.js - 创建具有自动完成功能的 TextField

> ID：16137365
> 
> 赞同：9
> 
> 时间：2013-04-21T23:37:46.420
> 
> 标签：ember.js

我必须在 Ember 中创建一个具有*自动完成功能的***TextField** ，以便根据匹配在每次按键时从数据库中获取数据。

 *他们在 Ember 中有任何内置的小部件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T22:40:21.230

您可以使用 Ember.Textfield 的事件来执行此操作。（咖啡稿和翡翠）

搜索视图

```
App.SearchView = Ember.View.extend

    templateName: 'search'

    searchTerm: null

    searchTextField: Ember.TextField.extend

      insertNewline: ->
        # if the user hits the enter key, you can do something different or call the same function
        @get('controller').search(@get('searchTerm'))

      keyUp: (e) ->
        # validate the item on every keypress
        if (e.currentTarget.value.length > 0)
          @get('controller').search(@get('searchTerm')) 
```

搜索模板

```
script(type='text/x-handlebars', data-template-name='search')

{{view view.searchTextField valueBinding="view.searchTerm" placeholder="search"}}

<button {{action "search"}}>search</button> 
```

搜索控制器

```
App.SearchController = Ember.ObjectController.extend

  search: (searchTerm) ->
    # do your search 
```

** 添加缺少的括号

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T21:18:16.960

EmberCasts 有一个关于[如何构建自动完成小部件](http://www.embercasts.com/episodes/building-an-autocomplete-widget-part-1)的精彩视频。

[我问他们](https://twitter.com/ootoovak/status/337164600095166464)过滤的毫秒延迟，我被告知他们将在下一集中介绍他们所做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T00:46:07.477

Ember.js 中没有内置组件，但根据经验，这样的组件很容易自己编写。在 EmberCamp Trek Glowacki 上说，他希望不再需要任何小部件库。

您还可以使用来自 Twitter Bootstrap 的 Typeahead 或来自 jQuery UI 的 AutoComplete，它们可以一起工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T22:26:28.380

[github 项目 ember-typeahead](https://github.com/charlieridley/ember-typeahead)在这方面也取得了良好的开端。*

# c++ - 为什么这段代码以相反的方式工作？

> ID：16137370
> 
> 赞同：0
> 
> 时间：2013-04-21T23:38:35.403
> 
> 标签：c++, camera, mouse

我有这段代码应该测试鼠标移动并改变相机，如果它这样做：

```
POINT myMouse;
GetCursorPos(&myMouse);

float Sensitivity = 10;

if(myMouse.x != middleX || myMouse.y != middleY)
{
    float DifferenceX = myMouse.x - middleX;
    float DifferenceY = myMouse.y - middleY;

    Rotation -> y += DifferenceX/Sensitivity;
    Rotation -> x -= DifferenceY/Sensitivity;
    if(Rotation -> x > 90) Rotation -> x = 90;
    if(Rotation -> x < -90) Rotation -> x = -90;
    if(Rotation -> y > 360) Rotation -> y = 0;

    SetCursorPos(middleX, middleY);
} 
```

由于某种原因，DifferenceX 实际上是 Y 轴，DifferenceY 实际上是 X 轴。

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T23:40:19.660

```
 Rotation -> y += DifferenceX/Sensitivity;
           //^^ y and x seems reversed
 Rotation -> x -= DifferenceY/Sensitivity; 
```

可能应该是

```
 Rotation -> x += DifferenceX/Sensitivity;
 Rotation -> y -= DifferenceY/Sensitivity; 
```

# javascript - modernizr CSS3 动画回退到 swf

> ID：16137374
> 
> 赞同：0
> 
> 时间：2013-04-21T23:38:54.620
> 
> 标签：javascript, html, css, modernizr

目前，我有一个相当不错的 CSS3 动画，但是我需要为不支持 CSS3 动画的浏览器提供一个后备选项（IE8 是目标）

我需要使用modernizr来简化思考，但是我不确定如何检查浏览器是否支持CSS动画，如果支持，很好，继续，如果不支持，以a的形式显示flash版本瑞士法郎。

CSS 下面（警告：有很多！）：

```
#animation
{
margin-left: auto;
margin-right: auto;
width: 700px;
height: 400px;
background:url('Images/Animation/SkyBG.png');
}

#rain
{
width: 700px;
height: 300px;
position: absolute;
background: url('Images/Animation/RainDrop.png');
-webkit-animation-name: rain;
-webkit-animation-duration: 7s;
-webkit-animation-delay: 9s;
opacity:0;
}

@-webkit-keyframes rain {
 0% {background-position: 0px 0px; opacity:0;}
50%{opacity: 1;}
 100% {background-position: 500px 1000px, 400px 400px, 300px 300px; opacity: 0;}
}

#soil
{
width: 700px;
height: 150px;
background:url('Images/Animation/BGGround.png') no-repeat;
position: absolute;
top: 750px;
z-index: 5;
}

#items
{
width:700px;
height: 400px;
top:623px;
position: absolute;
}

#Seed1
{
float:left;
width: 60px;
height: 110px;
background:url('Images/Animation/Seed.png');
background-repeat: no-repeat;
background-size: 25px 50px;
margin-left: 50px;
margin-top: 140px;
}

#Seed2
{
float:left;
width: 60px;
height: 110px;
background:url('Images/Animation/Seed2.png');
background-repeat: no-repeat;
background-size: 40px 55px;
margin-left: 50px;
margin-top: 140px;
}

#Seed3
{
float:left;
width: 60px;
height: 140px;
background:url('Images/Animation/Seed3.png');
background-repeat: no-repeat;
background-size: 65px 80px;
margin-left: 50px;
margin-top: 125px;
}

#Seed4
{
float:left;
width: 100px;
height: 170px;
background:url('Images/Animation/Seed4.png');
background-repeat: no-repeat;
background-size: 125px 225px;
margin-left: 50px;
margin-top: 50px;
}

#Seed5
{
float:left;
width: 100px;
height: 225px;
background:url('Images/Animation/Seed5.png');
background-repeat: no-repeat;
background-size: 125px 225px;
margin-left: 50px;
margin-top: 20px;
}

#sun {
  width: 12.5px;
  height: 12.5px;
  border-radius: 50px;
  background: red;
position: absolute;
  -webkit-animation: rise 10s linear 3s 1 normal both;
-webkit-animation-delay: 21s;
  -moz-animation: rise 10s linear 3s 1 normal both;
  -ms-animation: rise 10s linear 3s 1 normal both;
  -o-animation: rise 10s linear 3s 1 normal both;
  animation: rise 10s linear 3s 1 normal both;
z-index: 0;
}

@-webkit-keyframes rise {
  0% {
    width: 12.5px;
    height: 12.5px;
    left: 0%;
    top: 50%;
    border-radius: 50px;
    background-color: rgba(255,0,0,1);
    box-shadow: 0px 0px 1px 1px rgba(255,255,0,1);
  }
  100% {
    width: 25px;
    height: 25px;
    left: 80%;
    top: -20%;
    border-radius: 75px;
    background-color: rgba(255,255,0,1);
    box-shadow: 0px 0px 45px 45px rgba(255,255,0,0.7);
  }
}

@-webkit-keyframes show
{
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

@-webkit-keyframes infoboxshow
{
0% {opacity:0;}
50%{opacity:1;}
}

#Seed1
{
-webkit-animation-name: show;
-webkit-animation-duration: 5s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 0;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
z-index: 5;
position:absolute;
opacity:0;
}

#infoBox1
{
width: 400px;
height: 40px;
background:#f5cf26;
position: absolute;
bottom: 475px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
font-size: 24px;
text-align: center;
font-family: 'Lemon', cursive;
-webkit-animation-name: infoboxshow;
-webkit-animation-duration: 8s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 0s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#Seed2
{

z-index: 15;
position:absolute;
left: 125px;
opacity:0;
-webkit-animation-name: show;
-webkit-animation-duration: 3s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 8s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#infoBox2
{
width: 400px;
height: 40px;
background:#f5cf26;
position: absolute;
bottom: 475px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
font-size: 24px;
text-align: center;
font-family: 'Lemon', cursive;
-webkit-animation-name: infoboxshow;
-webkit-animation-duration: 8s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 8s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#Seed3
{
-webkit-animation-name: show;
-webkit-animation-duration: 3s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 16s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
z-index: 15;
position:absolute;
left: 250px;
opacity:0;
}

#infoBox3
{
width: 400px;
height: 100px;
background:#f5cf26;
position: absolute;
bottom: 425px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
font-size: 24px;
text-align:center;
font-family: 'Lemon', cursive;
-webkit-animation-name: infoboxshow;
-webkit-animation-duration: 8s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 16s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#Seed4
{
-webkit-animation-name: show;
-webkit-animation-duration: 2s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 24s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
z-index: 15;
position:absolute;
left: 350px;
opacity:0;
}

#infoBox4
{
width: 400px;
height: 70px;
background:#f5cf26;
position: absolute;
bottom: 450px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
font-size: 24px;
text-align:center;
font-family: 'Lemon', cursive;
-webkit-animation-name: infoboxshow;
-webkit-animation-duration: 7s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 24s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#Seed5
{
-webkit-animation-name: show;
-webkit-animation-duration: 2s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 31s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
z-index: 15;
position:absolute;
left: 500px;
opacity:0;
}

#infoBox5
{
width: 400px;
height: 100px;
background:#f5cf26;
position: absolute;
bottom: 425px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
font-size: 24px;
text-align:center;
font-family: 'Lemon', cursive;
-webkit-animation-name: infoboxshow;
-webkit-animation-duration: 10s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 31s;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:15:25.890

Modernizr 会更容易。只需使用`Modernizr.cssanimations`. 范例：

```
<!-- ET CETERA -->
<head>
<!-- ET CETERA -->
<script type="text/javascript" src="modernizr.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script>
    if (!Modernizr.cssanimations) {
         /* use jQuery to replace CSS3 animations with SWF
            you may want to use JavaScript, but jQuery is just easy for me
         */
    }
</script>
</head>
<!-- ... --> 
```

为了更简洁，在 if 语句中，使用 jQuery 附加不同的样式表，例如：

```
$('head').append('<link rel="stylesheet" type="text/css" href="ie8-alternative.css">'); 
```

# jquery - Javascript webapp CSS3 动画

> ID：16137375
> 
> 赞同：0
> 
> 时间：2013-04-21T23:38:56.093
> 
> 标签：jquery, css, web-applications, animation, mootools

我一直在为我的移动 webapp 寻找一个简单的 jquery 动画库

基本上，我想要“Flip”（翻转板）和“Slide”（翻转板，Android 类似滑入/滑出，旧 div 缩小和淡出）动画并且准备好触摸！

准备好触摸意味着动画可以通过用户交互触发，touchstart, touchmove, touchcancel, touchEnd->autoplay, touchEnd->reverse...等

那里有很多 CSS3 动画库，但我找不到像上面提到的那样支持触摸的东西，那么有什么东西可以满足要求吗？

顺便说一句，jquery 或 mootools 无关紧要，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:59.917

并且代表所有 jquery 小子中的 mootools 方面，你可以看看[MoobileJS](http://moobilejs.com/) - 它作为一个完整的移动 js 框架非常可靠，它有你所要求的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:49:34.630

使用 jQuery 的内置动画，您应该可以制作相当复杂的动画。如果您需要更多，我会看看[jQuery Mobile](http://jquerymobile.com/)。

但只是做一个简单的滑入滑出，将元素放置在屏幕外，然后在需要时在屏幕上设置动画。

```
$('.content').css({
  position: 'absolute',
  left: '100%',
  top: 0,
  height: $(window).height()',
  width: $(window).width(),
} 
```

将其滑入，将`left`属性设置为`0`：

```
$('.content').animate({
  left: 0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T03:25:32.870

如果您只处理移动设备，我会使用`zepto.js`它比 jQuery 更小并支持

两个触摸事件[http://zeptojs.com/#Touch](http://zeptojs.com/#Touch)

和带有 CSS 变换属性的动画[http://zeptojs.com/#animate](http://zeptojs.com/#animate)

它与 jQuery*相同*，提供或采取一些方法来保持 zepto 苗条 :)

# prolog - 没有列表的 Prolog 关系跟踪

> ID：16137377
> 
> 赞同：0
> 
> 时间：2013-04-21T23:39:07.203
> 
> 标签：prolog, relationship, backtracking, predicates

我试图让一个谓词将一个事实与另一个事实联系起来，并一直持续到指定的停止点。

例如，假设我正在做一个物流记录，我想知道谁从谁那里得到了一个包裹，以及他们从哪里得到的，直到最后。

序言代码

```
 mailRoom(m).

    gotFrom(annie,brock).
    gotFrom(brock,cara).
    gotFrom(cara,daniel).
    gotFrom(daniel,m).

    gotFrom(X,Y) :- gotFrom(Y,_). 
```

所以我试图对谓词 gotFrom 做的是让它从你开始的任何点（例如：gotFrom(brock,Who)) 递归地沿着列表向下移动并到达由 m 指定的结尾，即邮件室。

不幸的是，当我运行这个谓词时，它会读出，

```
 Who = annie.
    Who = brock.
    Who = cara.
    etc.etc.... 
```

我试着遍历整个事情，但我不确定它从布洛克到安妮，再到卡拉，一直到它循环到无限的真实。我有一种感觉，它与函数 (_) 中的通配符有关，但我不确定我还能如何表达函数的那部分，以便谓词在程序中搜索下一个事实，而不是跳到最后。

我尝试在我的程序中使用后退（！），但它给了我同样的错误。

任何帮助是极大的赞赏。我不想要代码，我只想知道我做错了什么，这样我就可以学习如何正确地做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:45:49.770

恐怕这条规则毫无意义：

```
gotFrom(X,Y) :- gotFrom(Y,_). 
```

这里没有任何东西可以将 X 或 Y 限制为任何特定值。此外，单例变量`X`和匿名变量的存在`_`意味着基本上任何事情都可以工作。试试看：

```
?- gotFrom([1,2,3], dogbert).
true ;
true ; 
```

我认为你在这里试图建立的是某种传递属性。在那种情况下，你想要的可能更像是这样的：

```
gotFrom(X,Z) :- gotFrom(X, Y), gotFrom(Y, Z). 
```

这产生了一个有趣的结果：

```
?- gotFrom(brock, Who).
Who = cara ;
Who = daniel ;
Who = m ;
ERROR: Out of local stack 
```

问题的原因可能不会立即显而易见。这是在该规则中发生了两次未经检查的递归。我们递归地统一`gotFrom/2`，然后我们再次递归地统一它。最好将其分解为两个谓词，以便可以非递归地使用其中一个谓词。

```
got_directly_from(annie,brock).
got_directly_from(brock,cara).
got_directly_from(cara,daniel).
got_directly_from(daniel,m).

gotFrom(X,Y) :- got_directly_from(X, Y).
gotFrom(X,Z) :- got_directly_from(X, Y), gotFrom(Y, Z). 
```

这给了我们想要的行为：

```
?- gotFrom(brock, Who).
Who = cara ;
Who = daniel ;
Who = m ;
false. 
```

请注意，这个对我对无意义数据的攻击具有弹性：

```
?- gotFrom([1,2,3], dogbert).
false. 
```

一些一般性建议：

1.  永远不要忽略单例变量警告。它们几乎*总是*一个错误。
2.  当您不了解发生了什么时，切勿引入剪辑。只有在您首先了解行为并且您了解剪切将如何影响它的情况下，才应使用剪切。理想情况下，您应该尝试将自己限制在绿色削减——只影响性能并且没有明显影响的削减。如果您不了解 Prolog 的用途，那么添加红色剪辑只会使您的问题更加复杂。

# html - HTML5 视频元素请求永远保持等待状态（在 chrome 上）

> ID：16137381
> 
> 赞同：43
> 
> 时间：2013-04-21T23:39:51.910
> 
> 标签：html, google-chrome, html5-video, mediaelement.js, video.js

我在 Chrome 中有一个奇怪的问题。

每次我加载一个`<video>`元素时，chrome 都会启动两个 HTTP 请求。

第一个将永远保持挂起（我猜这是“元数据”、“部分内容”请求。但关键是它保持挂起）

同一个文件的第二个是好的，加载结束后继续关闭。

这里的问题是第一个请求一直挂起，直到我关闭浏览器页面。所以在某些时候，如果我加载多个视频，Chrome 会中断并停止下载任何内容，因为每个可用请求都被这些待处理的请求占用。

我在这里创建了一个简化的测试用例：http: [//jsbin.com/ixifiq/3](http://jsbin.com/ixifiq/3)

* * *

[我已经检查以重现该问题，并且它在Video.js](http://videojs.com/)和[MediaElements.js](http://mediaelementjs.com/)头版上都发生了。加载页面时打开您的网络选项卡，您将看到第一个待处理的请求。然后在视频上按播放，您会看到第二个请求正常工作，但第一个请求将永远处于等待状态。

有谁知道这个错误的修复？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-11-05T15:34:45.757

（这个 bug 在 Chrome 38.0.2125.111、OS X 10.10 中仍然存在）

这可能是一个 Chrome 错误，您可以在没有任何`?time-suffix`技巧的情况下解决它，只是**帮助 Chrome 更快地释放套接字**：

我在 RevealJs HTML 演示文稿中遇到了同样的错误，有 20 多个视频（每张幻灯片一个，在幻灯片焦点上自动播放）。作为一个副作用，这个未发布的套接字问题也影响了其他 ajax-lazy-loaded 媒体，紧接着第一个挂起/阻塞的视频，在同一个 HTML DOM 中。

按照 Walter 的回答（请参阅[错误报告](https://code.google.com/p/chromium/issues/detail?id=234779)），我按照以下步骤修复了该问题：

1-将视频`preload`属性设置为`none`：

```
<video preload="none">
    <source src="video.webM" type="video/webM">
</video> 
```

2 - 使用`canplaythrough`事件处理程序在视频加载和准备好后播放和/或暂停视频。这有助于 Chrome 释放用于加载该视频的套接字：

```
function loadVideos(){
    $("video").each(function(index){
            $(this).get(0).load();
            $(this).get(0).addEventListener("canplaythrough", function(){
                this.play();
                this.pause();
            });
    });
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-23T13:36:11.700

显然这是 Chrome 的一个错误。ATM 与它无关。

不久前我在 Chromium 项目上报告了这个问题，它已被分配。所以希望它会在不久的将来得到修复。

错误报告：[https ://code.google.com/p/chromium/issues/detail?id=234779](https://code.google.com/p/chromium/issues/detail?id=234779)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-17T19:14:41.260

我不知道它现在是否可以正常工作，但我记得通过在视频 URL 中添加一个参数来解决这个问题，就像“video.mp4?t=2123”一样。当然，每次加载视频时，参数都应该不同。我会用

```
var parameter = new Date().getMilliseconds(); 
```

得到它，并添加它。

有了这个，至少几个月前，我可以多次播放同一个视频，而 Chrome 不会永远等待响应。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-19T21:05:56.000

这个错误仍然存​​在。我在单页应用程序上使用 HTML5 视频播放器。在加载了大约 7 个带有预缓冲的播放器后，我达到了限制，没有更多的视频加载。我发现另一个与图像有关的答案，我惊讶地发现这个答案解决了这个问题。

```
if(window.stop !== undefined) {
    window.stop();
} else if(document.execCommand !== undefined) {
    document.execCommand("Stop", false);
} 
```

参考：[Javascript：取消/停止图像请求](https://stackoverflow.com/a/1468452/249355)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-06-09T09:48:50.420

我在动态内容（例如轮播）中使用 html5 视频时发现了这个问题，要释放阻塞的套接字，您必须卸载视频源：

```
var video = $('#video');
video[0].pause();
video.prop('src','');
video.find('source').remove();
video.remove(); 
```

该错误声称已修复，但我仍然必须在 Chrome 42 上执行此操作。至少我仍然可以设置 preload="auto"。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-30T19:14:28.607

我们有相同的症状，但问题是我们`load()`连续两次调用相同的视频：相同的视频控件，相同的视频源 (MP4)。开发工具中出现了两个相同的 206 请求，然后，在切换视频几次后，Chrome 会取消第一个请求，关闭渐进式播放，并等待第二个请求完成。

另请注意，如果您使用的是 MP4 源并且它没有被格式化为渐进式播放（意味着 MOOV 原子位于文件的开头），那么您将对文件有 1-2 个额外的请求，这使得它更令人困惑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-27T07:19:52.363

@sidonaldson 的答案是唯一对我有用的答案。但是我没有删除视频或来源。以下代码对我有用，在放置正确的 src 并播放之前运行它。

```
const video = document.getElementById('player')
      video.pause()
      video.setAttribute('src', '')
      video.load() 
```

@ecropolis 的回答也有效，但我的 SPA 最终会没有图像，所以它不是一个选项。

# php - mysql 使用 IF NOT IN 关键字或替代选择所有其他数据

> ID：16137383
> 
> 赞同：0
> 
> 时间：2013-04-21T23:40:14.477
> 
> 标签：php, mysql

我有一个 sql 语句，它根据在 where 子句中使用 IN 关键字来选择数据，但我希望也能够选择不在传入的 select 参数中的数据。我将在表单中有一个列表IN(1,2,6,4) 在 IN 子句中传递。但我希望能够选择与 IN 子句中的内容不匹配的所有其他数据。这是我的[示例 sql的链接](http://sqlfiddle.com/#!2/02a983/6)

```
WHERE pf.filter_value_id IN(1) 
```

但我也希望能够选择使用 IN 子句传入的数据。

```
WHERE pf.filter_value_id IS NOT IN(1) // this doesn't work 
```

slq 不起作用：

```
SELECT p.product_id, p.title, fv.filter_value 
  FROM products p    
  INNER JOIN product_filters pf on pf.product_id = p.product_id
  LEFT JOIN filters f on f.filter_id = pf.filter_id
  RIGHT JOIN filter_values fv on fv.filter_value_id = pf.filter_value_id
WHERE pf.filter_value_id IS NOT IN(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:47:28.690

`IS NOT IN`不是有效的 MySQL。您应该确保检查查询语法错误。相反，您只想检查该子句的[否定。](http://dev.mysql.com/doc/refman/5.1/en/logical-operators.html#operator_not)`IN`正是`NOT IN`你所需要的。

# javascript - 数学数组作业问题编码javascript？

> ID：16137385
> 
> 赞同：0
> 
> 时间：2013-04-21T23:40:26.740
> 
> 标签：javascript, math

这就是我所拥有的，但我需要记录错误的问题并让用户回答它们直到正确为止，不断提示用户解决问题，直到正确为止这是一个 4 部分问题，第 3 部分是重复相同的问题直到完成

例如（7+1=6）重复（7+1=4）重复（7+1=8）下一个问题用户必须完成5个问题并且它们必须是正确的

```
 <html>
    <script>
var file=0;
var fileIndex=new Array();
var user=prompt("what is "+a+" + "+b);
var arr=[user,user,user,user,user];
var a=Math.floor(Math.random()*11);
var b=Math.floor(Math.random()*11);
var answer=parseInt(a+b);
var user=prompt("what is "+a+" + "+b);

while (user != answer && file++ != 4) {
fileIndex.push(user);
user = prompt("what is " + a + "+" + b);
 } else {
alert("answer is:" + answer);
 }

}//close for

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:48:23.650

更新：

```
var a = 1,
    b = 1;

var answer = a + b,
    tick = 0;

var file_index = [], copy;

function randomize() {
    a = Math.floor(Math.random() * 11);
    b = Math.floor(Math.random() * 11);

    answer = a + b;
}

while (1)
{
    if ((copy = prompt("What is " + a + " + " + " b?", 0)) != answer)
    {
        if (!copy) break;
        file_index.push(copy);
        randomize();
    } else if (tick == 4) {   
        break;
    } else {
        ++tick;
    }
} 
```

[**jsFiddle 演示**](http://jsfiddle.net/fxTrn/)

# c# - 如何优化“实时”C# 写入文件和 MATLAB 从文件读取操作

> ID：16137386
> 
> 赞同：2
> 
> 时间：2013-04-21T23:40:36.480
> 
> 标签：c#, matlab, optimization, asynchronous, read-write

我正在尝试找到一种将数据从 NetworkStream（通过 C#）写入文本文件的好方法，同时“准同时”将新写入的数据从文本文件读取到 Matlab 中。

基本上，是否有一种很好的方法或技术来协调写入/读取操作（来自单独的程序），以便读取操作不会阻塞写入操作（反之亦然）并且连续写入/读取之间的延迟最小化？

目前，我只是通过 WriteLine 循环将网络流中的数据写入（附加）到文本文件中，并通过循环 Matlab 的 fscanf 函数来读取数据，该函数还标记读取的最后一个元素并将文件指针重新定位到该位置。

C# 代码的相关部分：

（注意：我使用的循环条件是任意的，我只是想看看现在什么有效。）

```
NetworkStream network_stream = tcp_client.GetStream();

string path = @"C:\Matlab\serial_data.txt";
            FileInfo file_info = new FileInfo(path);
            using (StreamWriter writer = file_info.CreateText())
            {
                string foo = "";
                writer.WriteLine(foo);
            }

            using (StreamWriter writer = File.AppendText(path))
            {
                byte[] buffer = new byte[1];
                int maxlines = 100000;
                int lines = 0;
                while (lines <= maxlines)
                {
                    network_stream.Read(buffer, 0, buffer.Length);
                    byte byte2string = buffer[0];
                    writer.WriteLine(byte2string);
                    lines++;
                }
            } 
```

相关Matlab代码：

```
i=0;

while i<100;
    a = fopen('serial_data.txt');
    b = fscanf(a, '%g', [1000 1]);
    fclose(a);
    i=i+1;
end 
```

当我查看读入 Matlab 的数据时，实际数据之间存在大量零，最令人不安的部分是在这些“假零”延伸之间读取的连续数据点的数量变化很大。

我正在考虑尝试分别在 C# 和 Matlab 中插入一些延迟（Thread.sleep 和 wait(timerObject)），但即便如此，我也不相信这能保证我总是获得通过网络流接收的数据，这是势在必行的。

任何意见/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:06:06.410

看起来`fscanf`在 Matlab 端的阅读器中如何使用存在问题。

阅读器代码看起来每次循环都会重新读取整个文件，因为它会在每次循环时重新打开它。这是故意的吗？如果您想跟踪文件的结尾，您可能希望保持文件句柄打开，并继续检查是否可以通过重复`fscanf`调用同一个打开的文件句柄来从中读取更多数据。

此外，该`fscanf`调用看起来可能总是返回一个零填充的 1000 元素数组，无论它读取的文件有多大。也许这就是你的“假零”的来源。有多少会因文件中实际有多少数据以及 Matlab 代码在两次写入之间读取它的频率而异。抓住第二个参数，`fscanf`看看它实际读取了多少元素。

```
[b,nRead] = fscanf(a, '%g', [1000 1]);
fprintf('Read %d numbers\n', nRead);
b = b(1:nRead); 
```

检查[文档页面以获取`fscanf`](http://www.mathworks.com/help/matlab/ref/fscanf.html). 在“输出参数”部分：“如果输入包含的元素少于 sizeA，则 MATLAB® 用零填充 A。”

然后你可能想看看这个问题：[如何在 C# 中进行原子写入/追加，或者如何使用 FILE_APPEND_DATA 标志打​​开文件？](https://stackoverflow.com/questions/1862309/how-can-i-do-an-atomic-write-append-in-c-or-how-do-i-get-files-opened-with-the). 保持写入比输出流的缓冲区短（就像现在一样）将使它们具有原子性，并且在每次写入后刷新将使它们及时对读者可见。

# java - 从 ArrayList 中获取 MyObject 的字段

> ID：16137387
> 
> 赞同：-1
> 
> 时间：2013-04-21T23:40:45.100
> 
> 标签：java, reflection

我有 2 个课程，`A`并且`B`. A 类有一些字段，其中一个是`ArrayList<B>`. 现在，`B`有一些自己的字段（它们的类型和内容与问题无关）

我知道如何获取 , 的字段`A`并显示它们的值，但我一直无法找到一种解决方案，使我也能够`B`从`ArrayList<B>`声明的 in 中获取 , 的字段`A`。

基本上，我正在尝试打印每个`A`的内容，包括`ArrayList<B>`. 内容是指成对的属性/字段。

假设我对此一无所知`A`并且`B`---> 我必须写一些非常通用的东西。设法使用反射使其工作，直到我遇到前面描述的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:48:27.657

有什么问题：

```
final A a = new A();
for (final Field f : a.getClass().getDeclaredFields()) {
    f.setAccessible(true);
    System.out.println(f.get(a));
} 
```

这将遍历所有字段`A`并打印内容。`List`有一个很好的`toString`方法，所以你只需要`toString`在 B 中有一个方法，它应该可以正常工作。

如果由于某种原因你不能这样做，那么递归就会起作用。然而，这很危险，除非您知道某处`B`没有引用，否则您`A`将陷入无限循环。

```
void printMethods(final Object input) {
    for (final Field f : input.getClass().getDeclaredFields()) {
        f.setAccessible(true);
        if (Collection.class.isAssignableFrom(f.getType())) {
            final Collection<?> c = (Collection<?>) f.get(input);
            for (final Object obj : c) {
                printMethods(obj);
            }
        } else {
            System.out.println(f.get(input));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:47:44.520

这很简单：

```
"Bs: " + a.bList(); 
```

`toString()`B也应该覆盖

# javascript - 谷歌地图没有在ajax中加载

> ID：16137388
> 
> 赞同：0
> 
> 时间：2013-04-21T23:40:57.060
> 
> 标签：javascript, jquery, ajax, google-maps

我正在尝试组合一个带有一点 ajax 的 Rails 应用程序。问题是调用页面加载的ajax 部分没有显示谷歌地图。页面上还有其他所有内容，但没有谷歌地图。

当我单击刷新时，带有地图的页面会按应有的方式加载，但从那时起，当我单击链接时，地图就会丢失 - 即使页面中的其他所有内容都在那里。

包含我的地图的脚本甚至没有加载。我的意思是当我将 console.log("hello") 放在脚本标签之间时，'hello' 不会出现在我的控制台中。它确实在我刷新页面时出现，但在使用 ajax 链接时不会出现。

有谁知道为什么，或者有一些代码可以帮助我吗？我试过了：

```
$(document).ready(function(){
google.maps.event.trigger(map, 'resize');
}); 
```

在我的 show.html.erb 的顶部，但无法正常工作。如果有任何帮助，我的地图脚本的代码是：

```
 <div id="map_canvas">

<script type="text/javascript">
console.log("hello") 
  var map;
  var markers = [];

  function initialize_google_maps() {
    var currentlatlng = new google.maps.LatLng(<%= @user.lat %>, <%= @user.lng %>);
    var zoom = <%= @kms_range %> > 9 ? 9 : 10;
    var myOptions = {
        zoom: zoom,
        center: currentlatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP, // ROADMAP, SATELLITE, HYBRID
        streetViewControl: false
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var marker = new google.maps.Marker({map: map, position: currentlatlng, icon:{oppacity:0}});
    map.setCenter(currentlatlng);
    map.setZoom(zoom);

    var circle = new google.maps.Circle({
        map: map,
        fillOpacity: 0,
        strokeWeight: 2,
        strokeOpacity: 0.7,
        radius: <%= @kms_range %>*1000,
    });
    circle.bindTo('center', marker, 'position');

  }

  function show_markers() {
    if (markers)
      for(i in markers) {
        markers[i].setMap(map);
      }
  }

  function add_marker(location) {
    marker = new google.maps.Marker({
      position: location,
      map: map
    });
    markers.push(marker);
    // markers.setVisible(false);
  }

  function initialize_markers() {
    <% (@reviews || []).each do |r| %>
      <% next unless r.lat && r.lng %>
      position = new google.maps.LatLng(<%= r.lat %>, <%= r.lng %>);
      add_marker(position);
    <% end %>
  }

  $(function() {
    initialize_google_maps();
    initialize_markers();
    show_markers();
  });

</script>

    </div> 
```

我的 Ajax 代码是：

```
$(document).on("ready", function(){

    var ajax_loaded = (function(response) {             

        $(".page-content")

            .html($(response).filter(".page-content"));             

        $(".page-content .ajax").on("click",ajax_load); 

});

var form_submit = (function(e) {                    
    e.preventDefault();                             

    var url = $(this).attr("action");               
    var method = $(this).attr("method");            

    var data = {}                                   
    $(this).find("input, textarea, select").each(function(i){
        var name = $(this).attr("name");            
        var value = $(this).val();                  

        data[name] =value;                          

    }); 

    $.ajax({                                        
        "url": url,                                 
        "type": method,                             
        "data": data,                               
        "success": ajax_loaded,
        "error": function () {alert("bad");}        
    });
});

var history = [];                                   

var current_url_method;                             

var ajax_load = (function(e) {                      
    e.preventDefault();                             

    history.push(this);                             

    var url =$(this).attr("href");                  
    var method = $(this).attr("data-method");       

    if (current_url_method != url + method) {       
        current_url_method = url + method;          

        $.ajax({                                    
            "url": url,                             
            "type": method,                         
            "success": ajax_loaded,                 
        });
     }
});

$("#menu a").on("click",ajax_load);

$("#menu a.main").trigger("click");
$(".search-box form").on("submit", form_submit);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T03:43:05.077

# jquery-mobile - jQuery Mobile：使用对话框让用户确认表单提交

> ID：16137390
> 
> 赞同：0
> 
> 时间：2013-04-21T23:41:12.337
> 
> 标签：jquery-mobile

我想使用漂亮的 jQuery Mobile 对话框：

```
<a href="foo.html" data-rel="dialog">Open dialog</a> 
```

询问用户是否真的要提交表单。

我的想法是：用户填写表单然后单击提交，因此他看到一个对话框，如“你真的要提交表单吗？是/否”，如果是，则使用 ajax 将表单发送到我的 insert.php 页面，如果不是对话框只是关闭了。

我已经阅读了官方文档，看起来这只是一个图形调整，可以像对话框一样显示我的 jqm Web 应用程序的任何#page。

如何使用此对话框页面确认/取消我的表单提交？

更清楚一点：我不想使用标准的 javascript，例如：

```
function insertClienti()
{
$('#form').submit(function(e) {
    if(!confirm('really submit the form?')) {
        e.preventDefault();
        return;
    }
        $.post("insert.php", $("#form").serialize());
});
} 
```

但只有 jQuery Mobile 的对话框。

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:41:53.557

我只是使用了错误的 jQuery Mobile 组件。

弹出对话框就是为此而设计的，并且非常易于使用。

文档在这里：

[http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/)

这是我在我的应用程序中使用的代码（我使用 bassistance 验证器）：

```
$(document).bind('pageinit', function () {
                validaFormInserimento();
                });

function insertClienti()
        {
$.post("insert.php", $("#form_inserimento_clienti").serialize());
        }

function validaFormInserimento()
{
$("#form_inserimento_clienti").validate({
        rules: {
                nick: "required"
        },
        messages: {
                nick: "Campo obbligatorio"
        },
        errorPlacement: function(error, element){
                if (element.attr("name") === "nick") {
                        error.insertAfter($(element).parent());
                } else {
                        error.insertAfter(element);
                }
        },
        submitHandler: function(form){
                $( "#popupDialog" ).popup( "open" );
        }
});
}

function disabilitaSubmit()
{
$('input,select').keypress(function(event) { return event.keyCode != 13; });
}

function insertClienti()
        {
$.post("insert.php", $("#form_inserimento_clienti").serialize());
$( "#popupDialog" ).popup( "close" );
$("#form_inserimento_clienti").each(function() {
       this.reset();
     });
        } 
```

# wpf - WPF：如何触发 GUI 行为以响应视图模型事件？

> ID：16137391
> 
> 赞同：6
> 
> 时间：2013-04-21T23:41:21.547
> 
> 标签：wpf, data-binding, mvvm, conceptual

我正在开发一个 WPF/MVVM 应用程序，并且我有一个列表框绑定到 ViewModel 中的数据。在不同的点上，我需要视图模型使列表框滚动到给定的元素。

如何在不创建自定义控件的情况下做到这一点，同时仍然保持良好的关注点分离？

我目前通过在视图层中创建一个具有依赖属性的自定义行为类来使其工作，`VisibleIndex`然后 XAML 代码将其绑定到视图模型中的整数：

```
<ListBox x:Name="myListBox" 
        local:ListBoxVisibilityBehavior.VisibleIndex="{Binding VisibleIndex}"> 
```

当设置整数时，它会触发依赖属性更新处理程序，该处理程序告诉列表框滚动到关联的索引。

这似乎有点棘手，因为列表框永远不会更改依赖项属性值，并且仅在值更改时才调用更新处理程序，因此确保相关项可见的唯一方法是执行以下操作：

```
// view-model code
this.VisibleIndex = -1;
this.VisibleIndex = 10; 
```

我目前使用行为类的唯一原因是绑定我的自定义依赖属性，有没有办法用事件来做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:03:20.953

在您的情况下，有些需要附加属性 - 因为在某些时候，您需要在“某处”调用以下方法......

```
ListBox.ScrollIntoView(item) 
```

或者

```
ListBoxItem.BringIntoView(); 
```

为此，您需要某种代码，附加的属性/行为是一种很好的打包方式，不会影响您的 MVVM。

话虽如此-**如果您只需要始终将“选定项目”滚动到视图**中（大多数情况下都是如此）。然后您可以使用不同的基于附加属性的解决方案（再次）：

[mvvm 如何使列表视图自动滚动到列表视图中的新项目](https://stackoverflow.com/questions/3317194/mvvm-how-to-make-a-list-view-auto-scroll-to-a-new-item-in-a-list-view/3322078#3322078)

那么你所要做的就是设置或绑定到`SelectedItem`.

如果您愿意，那会“更好”一些-但机制是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:23:14.627

对于任何对这个问题的答案感兴趣的人，WPF 论坛上的一位 MS 工程师为我澄清了这一点。不是直接绑定到事件，而是绑定到封装该事件的包装器对象。然后，该行为可以从其 DP 中获取对包装器的引用并对其执行任何操作，即订阅事件、触发它等。

# python - Python中的单词匹配

> ID：16137392
> 
> 赞同：-3
> 
> 时间：2013-04-21T23:41:33.853
> 
> 标签：python, django

我有这个，但它正在做部分匹配：

```
for il in ignore_list:
    if il.word in title or il.word in text:
        return True 
```

我怎样才能只匹配整个单词？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-21T23:44:09.730

您需要将标题和文本字符串拆分为单词列表：

```
if il.word in title.split() or il.word in text.split(): 
```

# c# - 当子类调用它时如何避免两次调用基方法，并且也被调用的父类之一也是如此

> ID：16137393
> 
> 赞同：0
> 
> 时间：2013-04-21T23:41:34.407
> 
> 标签：c#, inheritance

我有以下关于野生动物园的代码：

```
public class Bird
{
  public void virtual Exercise()
  {
     some logic here
  }

  public void virtual Feed()
  {
     Exercise();

     some logic here
  }
}

public class Penguin : Bird
{
  public void override Exercise()
  {
     base.Exercise();
     some logic here
  }

  public void override Feed()
  {
     Exercise();
     base.Feed();
     some logic here
  }
} 
```

所以每次喂鸟时也必须锻炼。然而，一只鸟可以在不喂食的情况下锻炼。

企鹅是一种特殊的鸟类，需要鸟类运动和一些特定的企鹅运动。喂企鹅需要喂鸟以及一些额外的企鹅要求。

我在这段代码中遇到的问题是，当调用 Feed 时，它会进行两次鸟类运动。企鹅会很累的。

我怎样才能改进代码，以便在企鹅喂食时，每次喂食只对鸟和企鹅进行一次锻炼？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T23:45:02.260

只需从 Penguin.Feed() 调用中删除 Exercise()。因为，正如您所注意到的，当您调用 base.Feed() 时，Exercise() 将被调用，所以这样做是多余的。base.Feed() 调用将调用 Penguin 版本的 Exercise()，因此您将获得适合该鸟的锻炼。

（删除了对哺乳动物的引用，因为它已从问题中删除）

# windows-phone-8 - 将 XNA 内容管道与适用于 Windows Phone 8 的 SharpDX 游戏一起使用

> ID：16137394
> 
> 赞同：1
> 
> 时间：2013-04-21T23:41:47.923
> 
> 标签：windows-phone-8, windows-phone, sharpdx, content-pipeline

我决定在我的第一个 Windows Phone 游戏中试用 SharpDX，但我在设置内容管道工作时遇到了麻烦。

我已经尝试创建一个 XNA 内容项目和虚拟 XNA 游戏库项目（只是为了从中引用内容项目），但是`SharpDX.Toolkit.Content.AssetNotFoundException`当我尝试加载纹理时我得到了。

第二次尝试是使用[XNA 4.0 Content Compiler](http://xnacontentcompiler.codeplex.com/)获取 .xnb 文件并将其手动添加到我的项目中，但我又得到了 .xnb 文件`AssetNotFoundException`。

`Content.RootDirectory`设置为正确的值（第`"Content"`一次尝试中 XNA 内容项目的名称，第二次尝试中包含 .xnb 文件的文件夹名称），所以这可能不是问题。

所以，真正的问题是，如何从 SharpDX 项目中的文件加载 Texture2D？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:36:51.057

SharpDX Toolkit 不是 XNA 兼容的 API/实现，因此无法加载 XNA 内容。它是 Direct3D11 的高级 API，具有一些类似于 XNA 的接口/功能（SpriteBatch、BasicEffect、ContentManager 等），但与 XNA 不兼容。如果你想使用遗留的 XNA 项目，你将不得不使用像 MonoGame 这样的库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:49:24.960

您是否尝试过使用 MonoGame 项目模板创建 Windows Phone 8 项目？MonoGame 使在 WP8 上创建 XNA 游戏变得更加容易（它在封面下使用 SharpDX）。您可以从这里下载最新的框架：http: [//monogame.codeplex.com/releases/view/102870](http://monogame.codeplex.com/releases/view/102870)

# java - 运行一个类，然后另一个

> ID：16137400
> 
> 赞同：0
> 
> 时间：2013-04-21T23:42:00.963
> 
> 标签：java, swing, user-interface, splash-screen

我刚刚做了一个闪屏课程，一切都很完美。我还有另一个课，这是我的游戏课。现在我只想知道我是怎么做到的，所以当用户在主函数中运行游戏类时，它会先运行启动画面类，然后运行游戏类？

只是为了解释一下，如果你不明白，因为我的英语不好：我有两节课。一叫`Splash`，花药叫`game`。现在用户将通过运行 main 方法来运行该游戏类。现在我想在运行 main 方法时发生什么，我希望首先运行启动类，以便它显示启动屏幕，然后让游戏类直接运行。我有两个班级都在工作，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:57:23.343

您可以创建一个`interface`可以传递给启动屏幕（例如）的，一旦启动屏幕完成，它将执行规定的方法。

# arrays - Actionscript 3.0：控制使用数组添加的子影片剪辑

> ID：16137402
> 
> 赞同：0
> 
> 时间：2013-04-21T23:42:58.070
> 
> 标签：arrays, actionscript-3, slideshow

我正在尝试构建一个用按键控制的通用幻灯片放映 Flash 文件...向右和向左箭头转到下一张/上一张幻灯片，向下和向上调用/取消调用单个动画/项目符号点/单张幻灯片上的任何内容. 到目前为止，我设法获得了一个文件，该文件可以从影片剪辑中加载所有页面，并使用左右箭头轻拂它们，并具有很好的淡出和淡入效果，即使在非常快地轻弹时也是如此。经过几个小时和大量谷歌搜索后，我根本没有得到什么是现在如何控制单页电影剪辑。到目前为止，我上传了文件：

[http://www.broesel-brzelius.de/zeug/slide.zip](http://www.broesel-brzelius.de/zeug/slide.zip)

您可以看到我（到目前为止还很粗糙）尝试将 pageHolder.Pages.page1 影片剪辑控制到 gotoAndStop(2) 只会导致加载到数组中位置 0 的 pageHolder.Pages 影片剪辑转到第 2 帧，因此显示第二页。

到目前为止的代码：

```
import flash.display.Sprite; 
import flash.events.MouseEvent; 
import com.greensock.*; 
import flash.display.MovieClip; 

// instantiate a variable to find number of pages 
var numberOfPages:Pages = new Pages(); 
// instantiate an array to hold the page movieclips 
var pageArray:Array = new Array(); 
// instantiate a container to hold the pages 
var pageHolder:Sprite = new Sprite(); 
// declare variables that will hold reference to the current page IDs
var targetIDold:int = 0;
var targetIDnew:int = 0;
// declare a variable that will hold the current direction of slide movement
var movement:int = -1;

// call a function that builds the application 
// pass in the number of pages in fl_prevSlide 
buildApp(numberOfPages.totalFrames);

// this function builds the application
function buildApp(n:int):void
{
    // declare variables for the pages
    var p:Pages;
    // instantiate a new Page, send its playhead to the current value of i+1
    // it is necessary to add 1 to the value of i, since i starts at 0, while the timeline starts at 1
    for (var i:int = 0; i < n; i++) 
    { 
        p = new Pages(); 
        p.gotoAndStop(i + 1); 
        pageArray.push(p);
    } 
    // set the position of the pageHolder relative to the buttonHolder 
    pageHolder.x = pageHolder.y = 0; 
    // add the first page (at index 0) from pageArray to pageHolder 
    pageHolder.addChild(pageArray[targetIDnew]); 
    // add pageHolder and buttonHolder to the stage 
    addChild(pageHolder); 
} 

//Adding Listener and corresponding function to change between slides
stage.addEventListener(KeyboardEvent.KEY_DOWN, f_changeSlide);
function f_changeSlide(evt:KeyboardEvent):void
{
    if(evt.keyCode == 37) // left arrow
    {
        f_prevSlide();
    }
    else if (evt.keyCode == 39 || evt.keyCode == 32) // right arrow or space
    {
        f_nextSlide();
    }
}
function f_prevSlide():void
{
    if(targetIDnew > 0)
    {
        movement = -1;
        targetIDnew -= 1;
        f_addPage();
    }
}
function f_nextSlide():void
{
    if(targetIDnew < (numberOfPages.totalFrames - 1))
    {
        movement = 1;
        targetIDnew += 1;
        f_addPage();
    }
}

function f_addPage():void 
{ 
    // use the targetID variable to access the corresponding index in the pageArray and assign it to a temporary variable
    targetIDold = targetIDnew - movement;
    var _mcOld:MovieClip = MovieClip(pageArray[targetIDold]);
    var _mcNew:MovieClip = MovieClip(pageArray[targetIDnew]);
    //avoid flickering
    if (_mcNew.alpha == 1) {
        _mcNew.alpha = 0;
    }
    // add the temp variable to pageHolder
    pageHolder.addChild(_mcNew);
    // tween the temp variable to the specified properties, then call a function to remove the previous page
    // new page gets faded in, old page gets faded out
    TweenMax.to(_mcNew, 1.5, {alpha:1}); 
    TweenMax.to(_mcOld, 1.5, {alpha:0, onComplete:f_removePage}); 
} 

function f_removePage():void 
{ 
    // previous page will always be at index 0; remove it 
    // the new page just added will drop down to index 0 when the previous page is removed 
    pageHolder.removeChildAt(0); 
}

//Trying to advance / decrease the timeline in the movieclips of the single pages by pressing down / up
stage.addEventListener(KeyboardEvent.KEY_DOWN, f_changeFrame);
function f_changeFrame(evt:KeyboardEvent):void
{
    if(evt.keyCode == 40) // down arrow
    {
        f_nextFrame();
    }
    else if (evt.keyCode == 38) // up arrow
    {
        f_prevFrame();
    }
}
function f_nextFrame():void
{
        var w:uint = pageHolder.numChildren - 1 ;
        (pageHolder.getChildAt(w) as MovieClip).gotoAndStop(currentFrame + 1);
//      for (var i:uint = 0; i < pageHolder.numChildren; i++)
//      {
//       trace (+i+'.\t name:' + pageHolder.getChildAt(i).name + '\t type:' + typeof (pageHolder.getChildAt(i)));
//      }
        trace ("down!");
}

function f_prevFrame():void
{
        var w:uint = pageHolder.numChildren - 1 ;
        (pageHolder.getChildAt(w) as MovieClip).gotoAndStop(currentFrame - 1);
//      for (var i:uint = 0; i < pageHolder.numChildren; i++)
//      {
//       trace (+i+'.\t name:' + pageHolder.getChildAt(i).name + '\t type:' + typeof (pageHolder.getChildAt(i)));
//      }
        trace ("up!");
} 
```

编辑：澄清一下代码

Edit2: TL;DR: 问题是最后一段代码的三个函数无法控制 mc page1 的时间线，它是 mc pages 的子节点，它被逐帧推入数组并在运行时加载到精灵页面持有者。如何控制单页movieclip的时间线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:42:23.430

终于让它工作了。这将作为一个完美的PowerPoint替代品：D

您需要将单个幻灯片（ mc 的每一帧上的一个影片剪辑`pages`）命名为`page0`等`page1`，然后可以使用此代码控制它们的时间轴（只需替换上面问题中列出的函数）：

```
function f_nextFrame():void
{
    var temp:uint = pageHolder.numChildren - 1;
    var frame:uint = ((pageHolder.getChildAt(temp) as MovieClip)["page" + targetIDnew].currentFrame);
    (pageHolder.getChildAt(temp) as MovieClip)["page" + targetIDnew].gotoAndStop(frame + 1);
}

function f_prevFrame():void
{
    var temp:uint = pageHolder.numChildren - 1;
    var frame:uint = ((pageHolder.getChildAt(temp) as MovieClip)["page" + targetIDnew].currentFrame);
    (pageHolder.getChildAt(temp) as MovieClip)["page" + targetIDnew].gotoAndStop(frame - 1);
} 
```

# python - Sublime API：set_read_only 不起作用

> ID：16137405
> 
> 赞同：0
> 
> 时间：2013-04-21T23:43:41.270
> 
> 标签：python, sublimetext2, sublimetext

我似乎无法插入通过“open_file”创建的视图：

```
import sublime, sublime_plugin, re, os.path

class ExtractToViewCommand(sublime_plugin.TextCommand):
  def run(self, edit):
    view = sublime.active_window().open_file("/path/to/some/file/that/doesnt/exist/yet")
    view.set_read_only(False)
    print(view.is_read_only())         # prints True!
    e = view.begin_edit()
    view.insert(e, 0, "hello world")   # returns 0!
    view.end_edit(e) 
```

我的目标是创建一个插件来将选定的文本提取到一个新文件中。当我将其更改为使用`new_file`而不是`open_file`. 有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:11:24.773

您是否确定已加载视图？来自 API 文档

请注意，由于文件加载是异步的，因此在其 is_loading() 方法返回 False 之前，无法对返回的视图进行操作。

# javascript - 将字节数组转换为没有画布的图像数据

> ID：16137406
> 
> 赞同：6
> 
> 时间：2013-04-21T23:43:44.817
> 
> 标签：javascript, canvas, base64, bytearray, getimagedata

是否可以在不使用画布的情况下将字节数组转换为图像数据？

我目前使用这样的东西，但是我认为可以在没有画布的情况下完成，还是我错了？

```
var canvas = document.getElementsByTagName("canvas")[0];
var ctx = canvas.getContext("2d");

var byteArray = [ 
    255, 0, 0, 255, 255, 0, 0, 255, 255, 0, 0, 255, // red
    0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, // green
    0, 0, 255, 255, 0, 0, 255, 255, 0, 0, 255, 255 // blue
];

var imageData = ctx.getImageData(0, 0, 10, 3);
for(var i = 0; i < byteArray.length; i+=4){
    imageData.data[i] = byteArray[i];
    imageData.data[i+1] = byteArray[i + 1];
    imageData.data[i+2] = byteArray[i + 2];
    imageData.data[i+3] = byteArray[i + 3];
}

ctx.putImageData(imageData, 0, 0); 
```

[http://jsfiddle.net/ARTsinn/swnqS/](http://jsfiddle.net/ARTsinn/swnqS/)

**更新**

我已经尝试将其转换为 base64-uri 但没有成功：

`'data:image/png;base64,' + btoa(String.fromCharCode.apply(this, byteArray));`

**更新 2**

将问题与问题分开

> 画布本身不是，而是 oldIE（和其他）不支持它的事实。...对于这个用例来说，像 excanvas 或 flashcanvas 这样的库似乎有点臃肿......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:25:30.960

`canvas.getImageData`返回如下所示的 ImageData 对象：

```
interface ImageData {
  readonly attribute unsigned long width;
  readonly attribute unsigned long height;
  readonly attribute Uint8ClampedArray data;
}; 
```

（参见规格： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#imagedata](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#imagedata)）

我想您可以将适合该界面的数据装箱并尝试一下。

如果你尝试，让我知道结果如何:)

或者，您可以创建所需宽度/高度**的内存画布**--document.createElement("canvas")，然后获取其图像数据并插入您自己的数组。我知道这行得通。是的......这与您的问题相反，但您没有将画布添加到您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:30:44.600

您是否有不想使用画布的原因？这确实是画布的用途。一旦你有了图像数据，你会用它做什么？在浏览器中渲染？发送到服务器？下载给用户？如果问题只是您不想在屏幕上显示画布，您可以创建一个隐藏的画布来完成这项工作。

# php - 如何密码保护二进制文件下载？

> ID：16137408
> 
> 赞同：2
> 
> 时间：2013-04-21T23:43:47.027
> 
> 标签：php, password-protection

我想在任意二进制文件上创建一个非常简单的 php 保护程序，用户输入密码并将文件下载到他们的计算机上，但每次下载时都必须输入密码。

在[对密码保护 php 页面的简单方法的](https://stackoverflow.com/questions/4115719/easy-way-to-password-protect-php-page)[第一个答案](https://stackoverflow.com/a/4116144/391161)中，该行似乎要求文件必须是可显示的 ascii，可由浏览器呈现。`include("secure.html");`

有没有办法保护二进制文件，比如说`foo.bin`具有相同的简单程度（以及类似的有限安全程度）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:50:43.873

将文件夹设置为存储文件的位置以拒绝所有，然后使用 readfile 您应该能够访问它。

```
<?php
    if (!empty($_POST)) {
        $user = $_POST['user'];
        $pass = $_POST['pass'];

        if($user == "admin"
        && $pass == "admin")
        {
            $file = 'path/to/file';

            if (file_exists($file)) {
                header('Content-Description: File Transfer');
                header('Content-Type: application/octet-stream');
                header('Content-Disposition: attachment; filename='.basename($file));
                header('Content-Transfer-Encoding: binary');
                header('Expires: 0');
                header('Cache-Control: must-revalidate');
                header('Pragma: public');
                header('Content-Length: ' . filesize($file));
                ob_clean();
                flush();
                readfile($file);
                exit;
            }
        }
    }
?>

<form method="POST" action="">
    User <input type="TEXT" name="user"></input>
    Pass <input type="TEXT" name="pass"></input>
    <input type="submit" name="submit"></input>
</form> 
```

# java - Java确定最佳线程数的最佳方法

> ID：16137409
> 
> 赞同：0
> 
> 时间：2013-04-21T23:43:48.130
> 
> 标签：java, multithreading, performance

我正在编写一个爬虫，它有一定数量的工作线程来处理 Web IO 并处理每个网页。但是，我不确定如何找到系统的最佳线程数。监视线程性能和具体测量诸如抖动等因素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:48:14.377

只需运行基准测试。您可以通过让线程定期向线程管理器报告其吞吐量来动态地执行此操作。管理器可以操纵线程数来探测性能如何随线程数变化，并确定一个接近最佳的值。它也可以偶尔决定进行试验，看看是否可以找到新的最优值。（最佳计数可能会随着环境条件的变化而变化，例如来自其他进程的总体 CPU 负载。）

# ruby-on-rails - Launchy::ApplicationNotFoundError:

> ID：16137410
> 
> 赞同：9
> 
> 时间：2013-04-21T23:43:48.550
> 
> 标签：ruby-on-rails, rspec, capybara, integration-testing

试图开始`save_and_open_page`工作给了我以下错误：

```
1) index page my first test
 Failure/Error: save_and_open_page
 Launchy::ApplicationNotFoundError:
   No application found to handle 'C:/Sites/Sublist_v2/tmp/capybara/capybara-201304211638563116158687.html'
 # ./spec/features/comics_page_spec.rb:6:in `block (2 levels) in <top (required)>' 
```

规格：

```
require 'spec_helper'

feature 'index page' do
  scenario "my first test" do
    visit root_path
    save_and_open_page
    # Launchy.open('http://stackoverflow.com')
  end
end 
```

如果我取消注释 Launchy 行它可以正常工作，所以我不确定问题是什么......也许路径有问题`c:/`？

`Gemfile`

```
group :development, :test do
  gem 'spork-rails'
  gem 'rspec-rails'
  gem 'factory_girl_rails'
end

group :test do
  gem 'faker'
  gem 'capybara'
  gem 'launchy'
  gem 'database_cleaner'
  gem 'shoulda-matchers'
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-30T19:16:24.623

这是因为文件路径中的驱动器号被错误地确定为 uri 方案的一部分。

您可以通过更改 /launchy/lib/launchy/applications/browser.rb 中的第 12 行来临时修复它：

`return true if File.exist?( uri.path ) and uri.scheme.nil?`

至

`return true if File.exist?( uri.path ) && !schemes.include?( uri.scheme )`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-30T16:37:44.340

我是 Launchy 的作者，刚刚得知这个问题。我通常通过 GitHub 进行错误修复并将这个问题放在那里。[问题 #65](https://github.com/copiousfreetime/launchy/issues/65)

任何时候遇到 Launchy 的问题，请打开 launchy 调试并[在 github 上提交项目问题](https://github.com/copiousfreetime/launchy/issues)

您可以通过设置环境变量来开启启动调试`LAUNCHY_DEBUG=true`。如果您在应用程序中嵌入launchy，您可以从shell 或通过ruby 代码执行此操作。

```
% export LAUNCHY_DEBUG=true
% launchy http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror
AUNCHY_DEBUG: URI parsing pass 1 : http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror -> {:scheme=>"http", :user=>nil, :password=>nil, :host=>"stackoverflow.com", :port=>nil, :path=>"/questions/16137410/launchyapplicationnotfounderror", :query=>nil, :fragment=>nil}
LAUNCHY_DEBUG: Checking if class Launchy::Application::Browser is the one for handles?(http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Windows is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Darwin is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::RubyEngine::Mri is the one for is_current_engine?(ruby)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Windows is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Darwin is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::RubyEngine::Mri is the one for is_current_engine?(ruby)}
LAUNCHY_DEBUG: Launchy::Application : found executable /usr/bin/open
LAUNCHY_DEBUG: Launchy::Application::Browser : possibility : /usr/bin/open
LAUNCHY_DEBUG: Launchy::Application::Browser : Using browser value '/usr/bin/open'
LAUNCHY_DEBUG: wet_run: before exec in child process
LAUNCHY_DEBUG: commandline_normalized => /usr/bin/open http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror 
```

或者，如果您正在嵌入启动：

```
% irb
>> require 'launchy'
>> ENV['LAUNCHY_DEBUG']="true"
>> Launchy.open( "http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror" )
LAUNCHY_DEBUG: URI parsing pass 1 : http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror -> {:scheme=>"http", :user=>nil, :password=>nil, :host=>"stackoverflow.com", :port=>nil, :path=>"/questions/16137410/launchyapplicationnotfounderror", :query=>nil, :fragment=>nil}
LAUNCHY_DEBUG: Checking if class Launchy::Application::Browser is the one for handles?(http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Windows is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Darwin is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::RubyEngine::Mri is the one for is_current_engine?(ruby)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Windows is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::HostOsFamily::Darwin is the one for matches?(darwin12.2.0)}
LAUNCHY_DEBUG: Checking if class Launchy::Detect::RubyEngine::Mri is the one for is_current_engine?(ruby)}
LAUNCHY_DEBUG: Launchy::Application : found executable /usr/bin/open
LAUNCHY_DEBUG: Launchy::Application::Browser : possibility : /usr/bin/open
LAUNCHY_DEBUG: Launchy::Application::Browser : Using browser value '/usr/bin/open'
LAUNCHY_DEBUG: wet_run: before exec in child process
>> LAUNCHY_DEBUG: commandline_normalized => /usr/bin/open http://stackoverflow.com/questions/16137410/launchyapplicationnotfounderror 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T15:58:17.783

我只需要这样做：

```
fileUri = 'file:///' + outputFile.path

Launchy.open(fileUri) 
```

注意“file:”后面的三个斜杠。这是 Windows 8 上的 github-markdown-0.5.5。

# android - 如何读取声音文件 (mp3)

> ID：16137412
> 
> 赞同：0
> 
> 时间：2013-04-21T23:44:09.690
> 
> 标签：android, file, mp3

***如何打开和读取声音文件？我的目的是单击按钮打开阅读音乐并收听此文件***

我不知道如何打开一个 mp3 文件并阅读这个文件内容

怎么样，哪个权限有教程，提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:05:10.923

如果我理解正确，您只想播放本地 MP3 文件。正确的？

您应该阅读官方[API 指南](http://developer.android.com/guide/topics/media/mediaplayer.html)。它会告诉你你需要知道的一切！

以下是指南中的一些片段：

您如何从本地存储播放：

```
Uri myUri = ....; // initialize Uri here
MediaPlayer mediaPlayer = new MediaPlayer();
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mediaPlayer.setDataSource(getApplicationContext(), myUri);
mediaPlayer.prepare();
mediaPlayer.start(); 
```

你需要什么权限？

> 1.  **Internet 权限**- 如果您使用 MediaPlayer 流式传输基于网络的内容，您的应用程序必须请求网络访问。
>     
>     
> 2.  **唤醒锁定权限**- 如果您的播放器应用程序需要防止屏幕变暗或处理器处于休眠状态，或者使用 MediaPlayer.setScreenOnWhilePlaying() 或 MediaPlayer.setWakeMode() 方法，您必须请求此权限。

# ruby - 块在lookThere: undefined method [] for nil Nilclass (NoMethodError)

> ID：16137414
> 
> 赞同：-3
> 
> 时间：2013-04-21T23:44:11.020
> 
> 标签：ruby

我不明白为什么 ruby​​ 会给我这个错误。这是代码。

```
def lookThere
    lookAround = @warrior.look
    lookAround.each do |npc|
        if not npc.empty? and not npc.wall?
            @npcRanged = @npcRangedList[npc.to_s()]
            return 
        end
    end         
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:46:12.977

显然`@npcRangedList`是`nil`。没有看到更多代码，没有人能告诉你为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:46:04.990

`@npcRangedList`是`nil`。您可能希望将其设置为`initialize`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:31:49.650

可能您可以通过以下方式处理这种情况。我只是尝试创建一种可能的方法来重新生成您遇到的错误以及相同的一种可能的解决方案：

```
class Foo
 def intialize
 end
 def showval
  @arr[2] = 2
  @arr
 end
end

p Foo.new.showval #=> `showval': undefined method `[]=' for nil:NilClass (NoMethodError) 
```

现在，如果我们编写与下面相同的类，则不会抛出错误。

```
class Foo
 def initialize
  @arr ||= []
  end
 def showval
  @arr[2] = 2
  @arr
 end
end

p Foo.new.showval #=> [nil, nil, 2] 
```

# ruby-on-rails - 在显示页面上调用用户对象的特定实例

> ID：16137415
> 
> 赞同：0
> 
> 时间：2013-04-21T23:44:11.627
> 
> 标签：ruby-on-rails, activerecord

当用户访问 /users/:id 时，我试图在他们的展示页面中列出他们想要的广告。

在我的控制器中，我有：

```
 def show
    @user = User.find(params[:id])
    @wanted_ads = WantedAd.where(:user_id => params[:id]) 
```

在我的 show.html.erb 我有：

```
<%= @wanted_ads %> 
```

Binding.pry 说@wanted_ads 是零。在我得到的实际页面上`#<ActiveRecord::Relation:0x007fa3b5a93408>`。这似乎是我想做的一件简单的事情——我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:59:49.970

该`where`函数返回一个`ActiveRecord::Relation`. 因此，您可以调用`first`以获取第一个元素、`last`获取最后一个元素或`all`获取存储在名为@wanted_ads 的数组中的所有元素。

```
@wanted_ads = WantedAd.where(:user_id => params[:id]).all 
```

然后，您可以浏览此数组并为每个元素选择要传递给视图的属性。

只是一个提示：

您应该在您的用户模型中有一个 ActiveRecord 关系，如下所示：

```
has_many :wanted_ads 
```

在您的 WantedAd 模型中，如下所示：

```
belongs_to :user 
```

有了这个，你就有了一对五的关系。

然后，您可以这样做：

```
def show
    @user = User.includes(:wanted_ads).find(params[:id])
end 
```

然后，在您看来：

```
<% @user.wanted_ads.each do |wanted_ad| %>
    <%# do something %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:49:48.770

`where`返回对象的集合，而不仅仅是单个对象。因此，根据返回的内容，您可能需要调用`first`以获取应该返回的单个实例，或者调用`each`以遍历想要的广告并将它们显示在您的页面上。

由于延迟加载结果的底层查询机制，您会看到`ActiveRecord::Relation`in的一个实例。[更多细节可以在这里找到](https://stackoverflow.com/a/2770648/33226)。`pry`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T23:54:13.127

假设你`@wanted_ads`的不是 nil 并且你想遍历所有想要的广告......

```
<% @wanted_ads.each do |wanted_ad| %>

<%= wanted_ad.some_attribute_of_wanted_ad %>

<% end %> 
```

我还建议您注意在控制器中使用以下代码进行 SQL 注入。

```
@wanted_ads = WantedAd.where(:user_id => params[:id]) 
```

它应该是

```
@wanted_ads = WantedAd.where(":user_id => ?", params[:id]) 
```

# c - 从函数返回一个字符串

> ID：16137416
> 
> 赞同：1
> 
> 时间：2013-04-21T23:44:23.520
> 
> 标签：c, string, return, substring

我正在尝试在 c 上创建一个子字符串函数。它必须返回“cdef”，但它什么也不返回。我该如何解决？谢谢。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

char* substring( char *, int, int );    

int main(){
    char stuff[] = "abcdefghjklmnoprstuvyz";
    printf("%s\n", stuff);
    printf("%s\n", substring(stuff, 2, 6));

    getch();
    return 0;
}

char* substring(char *text, int a, int b){
    char nText[b-a];
    char tmp[2];
    strcpy(nText, "");
    for(int i=a; i<b; i++){
        tmp[0] = text[i];
        tmp[1] = '\0';
        strcat(nText, tmp);
    }
    return nText;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:49:00.113

您犯了一个错误，即返回一个指向函数返回后可能不存在的变量的指针。您需要在调用函数中分配空间并将结果放在提供的空间中，或者在函数中创建永久空间`static`。注意——正如 Jonathan Leffler 所指出的——因为空间是“永久的”，你不能将块的长度从一个调用更改为下一个调用，你必须选择一个“合理”的值并测试`b-a+1`不是比分配的空间长。因此我的第二种方法更健壮。

```
char* substring(char *text, int a, int b){
    static char nText[100];
    if ((b-a+1)>100) // do something! you can't copy this!
    // code
    return nText;
} 
```

正如 Employed Russian 指出的那样，以这种方式使用静态在任何情况下都是非常危险的，因为另一段代码可能会在您仍在使用第一次调用的结果时调用此函数。如果您执行任何类型的多线程，则不建议这样做，但如果您有单线程，这是一个快速修复。

更好的配方是

```
void substring(char *text, int a, int b, char *nText) {
    // code, nothing to return
} 
```

在后一种情况下，您在调用函数中创建空间并将指针传递给`substring`. 在您的主程序中，您将拥有

```
char shortString[100];
substring(stuff, 4, 6, shortString);
printf("%s\n", shortString); 
```

顺便说一句，您复制子字符串的方法非常低效。考虑将其替换为

```
for(int i=a; i<b;i++) nText[i-a]=text[i];
nText[b-a] = '\0'; 
```

从中可以看出，其实是需要分配`nText[b-a+1]`元素的，不然finally就没有空间了`'\0'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:47:44.953

你的错误在这里：

```
char* substring(char *text, int a, int b){
    char nText[b-a];
...
    return nText;
} 
```

从函数返回后，返回的缓冲区将变为*无效。*

GCC 很好地警告你：

```
t.c:24:5: warning: function returns address of local variable [enabled by default] 
```

> 我该如何解决？

您必须分配一个新缓冲区（调用者必须释放它），或者让调用者提供输出缓冲区（如 Floris 建议的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T23:57:16.703

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* substring( char *, int, int );    
char* substringb(char *substr, char *text, int a, int b);

int main(){
    char stuff[] = "abcdefghjklmnoprstuvyz";
    char substr[5];
    printf("%s\n", stuff);
    printf("%s\n", substring(stuff, 2, 6));//Things to think to be able to release!
    printf("%s\n", substringb(substr, stuff, 2, 6));

    getch();
    return 0;
}

//dynamic allocate
char* substring(char *text, int a, int b){
    char *nText;
    nText = (char*)malloc((b-a+1)*sizeof(char));
    strncpy(nText, &text[a], b-a);
    ntext[b-a] = 0;
    return nText;
}

//copy to reserve area
char* substringb(char *substr, char *text, int a, int b){
    substr[b-a]=0;
    return strncpy(substr, &text[a], b-a);
} 
```

# maven - 将 maven 的输出目录添加到 exec:java 类路径

> ID：16137421
> 
> 赞同：1
> 
> 时间：2013-04-21T23:45:05.760
> 
> 标签：maven, configuration, resources, pom.xml

我想将`target/classes`目录添加到 Maven 的`exec:java`类路径中。编译和运行时依赖关系处理得很好，但是从中复制的资源`src/*/resources`在执行期间不可用。我几乎可以肯定这是因为插件的类路径只包含项目依赖项而不是`target/classes`目录。我希望能够在开发过程中运行应用程序，`mvn clean compile exec:java` 同时将所有属性文件和其他文件留在资源目录中。

我尝试了几种 exec 配置变体，但似乎无法正确：

我的 pom.xml：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>1.2.1</version>
  <configuration>
    <executable>java</executable>
    <mainClass>Example</mainClass>
    <arguments>
        <argument>-cp</argument>
        <classpath/>
        <argument>%classpath:target/classes</argument>

        <argument>someFile.txt</argument>
    </arguments>
  </configuration>
</plugin> 
```

我不认为这是正确的语法，因为我得到了一个 ArrayStoreException：

```
java.lang.ArrayStoreException
at java.lang.System.arraycopy(Native Method)
at java.util.Arrays.copyOf(Arrays.java:2763)
at java.util.ArrayList.toArray(ArrayList.java:305)
at org.codehaus.plexus.component.configurator.converters.composite.ArrayConverter.fromConfiguration(ArrayConverter.java:141)
at org.codehaus.plexus.component.configurator.converters.ComponentValueSetter.configure(ComponentValueSetter.java:247)
at org.codehaus.plexus.component.configurator.converters.composite.ObjectWithFieldsConverter.processConfiguration(ObjectWithFieldsConverter.java:137)
at org.codehaus.plexus.component.configurator.BasicComponentConfigurator.configureComponent(BasicComponentConfigurator.java:56)
at org.apache.maven.plugin.DefaultPluginManager.populatePluginFields(DefaultPluginManager.java:1357)
at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:724)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.jav 
```

[我从这里](https://stackoverflow.com/questions/2587935/add-additional-path-to-exec-maven-plugin/12495150#12495150)和[这里](http://mojo.codehaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)使用了示例配置 pom 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:40:59.180

By default the `target/classes` and all the dependencies are in the `classpath` when you use `exec-maven-plugin` plugin.

I have similar setup and following config works for me. In my `Test` class I read one xml file as `Thread.currentThread().getContextClassLoader().getResourceAsStream("mapping.xml")`. I have kept the file in `src/main/resources` which after build is available under `target/classes`.

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
        <execution>
            <goals>
                <goal>exec</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <executable>java</executable>
        <mainClass>com.Test</mainClass>
    </configuration>
</plugin> 
```

# html - 活动类状态不起作用

> ID：16137424
> 
> 赞同：0
> 
> 时间：2013-04-21T23:45:37.253
> 
> 标签：html, css

我有以下规则将活动和悬停状态应用于 li 元素：

```
.toolbar ul li.plus {
    background-position: 0 -170px;
}
.toolbar ul li.plus:hover, li.plus.active {
    background-position: -34px -170px; 
```

现在，当我将鼠标悬停在它上面时，我的 HTML 标记可以工作：

```
<li class="plus"><a href="#" data-content="Add property to shortlist" data-trigger="hover" title="">link</a></li> 
```

但是，如果我想显式激活它，它将不适用于以下内容：

```
<li class="plus active"><a href="#" data-content="Add property to shortlist" data-trigger="hover" title="">link</a></li> 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:49:31.670

`.toolbar ul li.plus`比 具有更高的特异性`li.plus.active`。您可以使用

```
.toolbar ul li.plus.active 
```

# c++ - 在 Windows 上编译 V8 以使用 g++

> ID：16137425
> 
> 赞同：0
> 
> 时间：2013-04-21T23:45:47.523
> 
> 标签：c++, eclipse, g++, v8

我已经完成了关于如何编译 V8 的所有过程，并且实际上设法在 Windows 平台上编译它。但是，问题在于 Windows 上的编译过程会强制您使用 Visual Studio 进行编译，因此会创建可在 VS 中使用的目标文件 (.obj)。我也设法创建了一个 DLL 文件，但它仅在有可执行文件运行时才起作用。

另一方面，我在 Windows 上使用 Eclipse 和 g++。要将 V8 嵌入到我的 C++ 中，我需要一个库文件（.a 扩展名，以便链接器能够工作）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:56:06.297

创建 DLL 时，还应该创建一个导入库。它们通常与 DLL 同名，但带有`.lib`扩展名。将此库添加到您在 Eclipse 中的项目中，它应该在构建时链接。您可以通过右键单击项目并选择`Properties -> C/C++ Build`然后`Library`将其添加到那里来执行此操作。

# ruby-on-rails - Cucumber：用户未注册的场景失败

> ID：16137428
> 
> 赞同：1
> 
> 时间：2013-04-21T23:46:30.620
> 
> 标签：ruby-on-rails, rspec, cucumber

我为[devise-rspec-cucumber 项目](https://github.com/RailsApps/rails3-devise-rspec-cucumber)运行 cucumber，但以下场景失败：

```
Scenario: User is not signed up
  Given I do not exist as a user
  When I sign in with valid credentials
  Then I see an invalid login message
    And I should be signed out 
```

nil:NilClass (NoMethodError) 的未定义方法“flatten”

1 个场景（1 个失败）

4 个步骤（4 个通过）

我尝试删除除第一个步骤之外的每个步骤，但仍然失败：

```
Given /^I do not exist as a user$/ do
  create_visitor
  delete_user
end 
```

在哪里

```
def create_visitor
  @visitor ||= { :name => "Testy McUserton", :email => "example@example.com",
    :password => "changeme", :password_confirmation => "changeme" }
end

def delete_user
  @user ||= User.where(:email => @visitor[:email]).first
  @user.destroy unless @user.nil?
end 
```

但是如果我用 create_user 替换 create_visitor，它就会通过。

```
def create_user
  create_visitor
  delete_user
  @user = FactoryGirl.create(:user, @visitor)
end 
```

我很困惑发生了什么事。在我看来，步骤定义期待一些我没有提供的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T02:43:51.187

我之前收到了同样的错误信息。我确信我的脚步没有问题。因此，我尝试将 database_cleaner gem 升级到最新的（1.0.1），因为错误是由 database_cleaner 引起的。它确实解决了这个问题。如果您的 database_cleaner gem 版本不是 1.0.1，我建议您试试这个。做就是了

$ 捆绑更新 database_cleaner

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:29:06.303

这里存在问题：

```
 create_visitor
  delete_user 
```

在第一步中，您创建了一个**访问者**，但没有创建一个**用户**。然后在第二步中，您尝试删除不存在的用户。这就是测试失败的原因。

我建议您检查逻辑并创建正确的步骤。

# c - Pointers in C — adding 1

> ID：16137429
> 
> 赞同：0
> 
> 时间：2013-04-21T23:46:32.657
> 
> 标签：c, arrays, pointers, printf

I have a question about pointers. I am beginning to grasp the concept, but this particular piece of code is threatening that understanding, and I just want to clear it up.

Please note line "B", which is `printf("ptr + %d = %d\n",i, *ptr++); /*<--- B*/`

I was under the impression that, since `*ptr` was initialized to `&my_array[0]`, then `*ptr++` (which would translate to "whatever is at the address stored in `ptr`, add one to it") would print out 23, which is the value at `my_array[1]`.

Yet, it prints out the value at `my_array[0]`, which is `1`.

I'm confused as to whether the `++` adds to the address itself (like, 1004 becomes 1005) and, since the integer takes up about 4 bytes of space, it would fall into the range of `my_array[0]` (because that value, 1, would take up addresses 1001, 1002, 1003, 1004, and since `my_array[0]` starts out at 1001 and only goes up to 1002, then `*ptr++` would still print out `my_array[0]`, which is `1`)...

or...

Whether `*ptr++` goes from `my_array[0]` (which is just `*ptr`) to `my_array[1]` `*ptr++`, which is what I originally thought.

Basically, please explain what `*ptr++` does to this program in particular. Please explain it to me as though I was a five year old.

I really appreciate it, and here's the code:

```
#include <stdio.h>

int my_array[] = { 1, 23, 17, 4, -5, 100 };
int *ptr;

int main(void)  
{ 
    int i;
    ptr = &my_array[0];     /* point our pointer to the first
                                  element of the array */
    printf("\n\n");
    for (i = 0; i < 6; i++)
    {
        printf("my_array[%d] = %d   ", i, my_array[i]);   /*<-- A */
        printf("ptr + %d = %d\n", i, *ptr++);   /*<--- B*/
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T23:51:20.247

改变这个： `printf("ptr + %d = %d\n",i, *ptr++); /*<--- B*/`

对此： `printf("ptr + %d = %d\n",i, *(++ptr)); /*<--- B*/`

如果使用后缀版本的增量运算符，则增量之前的对象的值由表达式按值返回。前缀增量运算符（此答案中的第二组代码使用）将通过引用返回增量对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:48:55.113

*ptr++ 将在 printf 之后递增。您应该使用 *(++p)。

# matlab - Matlab：当数据的功能未知时如何计算数据集的积分

> ID：16137437
> 
> 赞同：1
> 
> 时间：2013-04-21T23:48:14.923
> 
> 标签：matlab

在 Matlab 中，如果给定一个时间序列数据集，其中第二列值是第一列时间的函数，并且我需要对第二列值进行积分，如果没有函数，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-02T14:13:08.143

在 MATLAB 中，您可以使用该函数

```
 cumtrapz(time,data) 
```

这是累积梯形积分。2 个输入是具有相同长度的向量。通过这种方式，您可以获得例如对加速度进行积分的速度。输出是一个与输入长度相同的向量。

**编辑**

您还可以看看我在这里回答的内容[使用辛普森规则对离散数据进行数值积分](https://stackoverflow.com/questions/9881430/numerical-integration-using-simpsons-rule-on-discrete-data/27170316#27170316)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:52:18.437

你为什么不只使用trapz函数。这是在 Octave 中，但在使用梯形方法的 Matlab 中应该是相同的。

octave-3.6.2.exe:1> x=1:5 x =

1 2 3 4 5

octave-3.6.2.exe:2> y=x.*x y =

```
1    4    9   16   25 
```

octave-3.6.2.exe:3> 面积=trapz(x,y) 面积 = 42

# php - 如何提出真正快速的请求而不等待答复？

> ID：16137438
> 
> 赞同：1
> 
> 时间：2013-04-21T23:48:18.140
> 
> 标签：php, httprequest

我们使用 REST 进行日志记录——我们需要比简单的文本日志提供的更多信息。所以我们实现了一个 REST 服务，它接受有关事件的一些基本信息，然后从事件的源 Web 异步获取更多详细信息。所以它实际上是一个 ping 几乎没有额外的信息。记录器机器验证 API 密钥，连接到数据库并写入基本信息以及指向更详细信息的指针。

但是我们有一个问题，日志记录可能会大大降低应用程序的速度，因为连接和等待应答需要相当长的时间（速度很快，但是当您在一个请求中记录 10 多个事件时，就会出现问题）。

问题是：

**有没有办法在普通的 PHP (5.3) 中向 URL 发出请求*而不*等待任何答案，或者只是等待 HTTP 200 标头确定？**

我想我可以让日志服务器在收到请求后立即发送 HTTP 200 标头。但它需要做更多的工作；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:32:56.113

您想要的称为异步请求。

解决方案可能如下所示（引用）：

```
function curl_post_async($url, $params)
{
    foreach ($params as $key => &$val) {
      if (is_array($val)) $val = implode(',', $val);
        $post_params[] = $key.'='.urlencode($val);
    }
    $post_string = implode('&', $post_params);

    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    $out = "POST ".$parts['path']." HTTP/1.1\r\n";
    $out.= "Host: ".$parts['host']."\r\n";
    $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
    $out.= "Content-Length: ".strlen($post_string)."\r\n";
    $out.= "Connection: Close\r\n\r\n";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
} 
```

如果您需要更多信息，请查看：

[http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html](http://petewarden.typepad.com/searchbrowser/2008/06/how-to-post-an.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T02:40:41.810

这里有两个技巧可能会有所帮助。

一、http连接关闭后继续执行。这意味着您可以在主要功能完成后立即关闭连接，然后继续您的日志过程。

> ```
> <?php
> ignore_user_abort(true);//avoid apache to kill the php running
> ob_start();//start buffer output
> echo "show something to user";//do something you need -- your main function
> session_write_close();//close session file on server side if needed
> header("Content-Encoding: none");//send header to avoid the browser side to take content as gzip format
> header("Content-Length: ".ob_get_length());//send length header
> header("Connection: close");//or redirect to some url 
> ob_end_flush();flush();//really send content, can't change the order:1.ob buffer to normal buffer, 2.normal buffer to output
> //continue do something on server side
> ob_start();
> sleep(5);//the user won't wait for the 5 seconds
> echo 'for log';//user can't see this
> file_put_contents('/tmp/process.log', ob_get_contents());
> // or call remote server like http://your.log.server/log.php?xxx=yyy&aaa=bbb
> ob_end_clean();
> ?> 
> ```

二、使用函数 apache_note 写入日志是比插入数据库更轻量级的选择。因为 Apache 会在 Apache 运行期间打开日志文件并保留句柄。它稳定而且非常快。

阿帕奇配置：

```
<VirtualHost *:80>
DocumentRoot /path/to/your/web
ServerName your.domain.com
ErrorLog /path/to/your/log/error_log
    <Directory /path/to/your/web>
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
    SetEnvIf Request_URI "/log\.php" mylog
    LogFormat "%{mylog}n" log1
    CustomLog "|/usr/sbin/cronolog /path/to/logs/mylog/%Y%m%d/mysite.%Y%m%d%H.log" log1 env=mylog
</VirtualHost> 
```

PHP代码：

```
<?php
apache_note('mylog', session_id()); //you can log any data you need, see http://www.php.net/manual/en/function.apache-note.php 
```

然后你可以使用我的技巧I和II，在主页连接关闭后调用URL [http://your.log.server/log.php?xxx=yyy&aaa=bbb来记录你的详细数据。](http://your.log.server/log.php?xxx=yyy&aaa=bbb)根本不需要额外的时间成本。

# django - make impossible to insert data into database if it conflicts with existing data

> ID：16137445
> 
> 赞同：2
> 
> 时间：2013-04-21T23:49:00.800
> 
> 标签：django

I would like to make impossible to insert data to my database if that data conflicts with some another data that already exists in my base. What I mean:

Let's say that I would like to insert into database fields `start_date` and `end_date` with the following condition:

-period `(start_date; end_date)` cannot intersect with any other periods in my base

Is any nice and fast way to check it in django?

Possible I can iterate over whole database manually, but maybe is there any nice wrapper?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:46:07.843

我建议执行以下操作：

```
lower = Entry.objects.filter(start_date__lte=new_start)
lower = lower.filter(end_date_gte=new_start)

upper = Entry.objects.filter(start_date__lte=new_end)
upper = upper.filter(end_date_gte=new_end)

valid = len(lower) == 0 and len(upper) == 0

if valid:
    # Do the insert
    pass 
```

# asp.net - ASP web.config path -> cannot load file

> ID：16137446
> 
> 赞同：0
> 
> 时间：2013-04-21T23:49:10.977
> 
> 标签：asp.net, path, web-config, asp.net-membership

I try to use asp:login with my own membershipprovider, but when I write this code I got problem with type, concretly I get error that I am not able to load ~/App_Data/MyMembershipProvider
`<membership defaultProvider="default">
<providers>
<clear/>
<add name="default" type="/~App_Data/MyMembershipProvider"/>
</providers>
</membership>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:59:46.313

该类型需要采用 Namespace.ClassName 格式。您可能必须将程序集部署到 GAC 或 bin 文件夹中，然后提供类型为 CustomNamespace.CustomMembershipProvider

# android - Android - 使用 url 加载图像，但加载后，另一个图像替换另一个

> ID：16137452
> 
> 赞同：2
> 
> 时间：2013-04-21T23:49:50.617
> 
> 标签：android, android-image

我想知道这到底是怎么回事。我的应用程序使用 url 加载图像。我已成功完成加载和显示。问题是，图像显示时显示错误的图像......最好在图像中显示：

![在此处输入图像描述](https://i.stack.imgur.com/XvjvD.png)

起初，当其他图像仍在加载时，会显示正确的图像[TOP IMAGE]。但是在加载所有图像之后，`img2`复制和替换`img1`但仍然使用 img1 的尺寸？

这是我加载图像时使用的代码：

```
 public class DrawableBackgroundDownloader {    

  private final Map<String, Drawable> mCache = new HashMap<String, Drawable>();   
  private final LinkedList <Drawable> mChacheController = new LinkedList <Drawable> ();
  private ExecutorService mThreadPool;  
  private final Map<ImageView, String> mImageViews = Collections.synchronizedMap(new WeakHashMap<ImageView, String>());  
  public static int MAX_CACHE_SIZE = 80; 
  public int THREAD_POOL_SIZE = 3;

  /**
   * Constructor
   */
  public DrawableBackgroundDownloader() {  
      mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  
  }  

  /**
   * Clears all instance data and stops running threads
  */ 
  public void Reset() {
      ExecutorService oldThreadPool = mThreadPool;
      mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
      oldThreadPool.shutdownNow();

      mChacheController.clear();
      mCache.clear();
      mImageViews.clear();
  }  

  /**
   * Load the drawable associated to a url and assign it to an image, you can set a placeholder to replace this drawable.
   * @param url Is the url of the image.
   * @param imageView The image to assign the drawable.
   * @param placeholder A drawable that is show during the image is downloading.
   */
  public void loadDrawable(final String url, final ImageView imageView,Drawable placeholder) {  
      if(!mImageViews.containsKey(url))
          mImageViews.put(imageView, url);  
      Drawable drawable = getDrawableFromCache(url);  

      // check in UI thread, so no concurrency issues  
      if (drawable != null) {  
          //Log.d(null, "Item loaded from mCache: " + url);  
          imageView.setImageDrawable(drawable);  
      } else {  
          imageView.setImageDrawable(placeholder);  
          queueJob(url, imageView, placeholder);  
      }  
  } 

  /**
   * Return a drawable from the cache.
   * @param url url of the image.
   * @return a Drawable in case that the image exist in the cache, else returns null.
   */
  public Drawable getDrawableFromCache(String url) {  
      if (mCache.containsKey(url)) {  
          return mCache.get(url);  
      }  

      return null;  
  }

  /**
   * Save the image to cache memory.
   * @param url The image url
   * @param drawable The drawable to save.
   */
  private synchronized void putDrawableInCache(String url,Drawable drawable) {  
      int chacheControllerSize = mChacheController.size();
      if (chacheControllerSize > MAX_CACHE_SIZE) 
          mChacheController.subList(0, MAX_CACHE_SIZE/2).clear();

      mChacheController.addLast(drawable);
      mCache.put(url, drawable);

  }  

  /**
   * Queue the job to download the image.
   * @param url Image url.
   * @param imageView The ImageView where is assigned the drawable.
   * @param placeholder The drawable that is show during the image is downloading. 
   */
  private void queueJob(final String url, final ImageView imageView,final Drawable placeholder) {  
      /* Create handler in UI thread.  */
      final Handler handler = new Handler() {  
          @Override  
          public void handleMessage(Message msg) {  
              String tag = mImageViews.get(imageView);  
              if (tag != null && tag.equals(url)) {
                  if (imageView.isShown())
                      if (msg.obj != null) {
                          imageView.setImageDrawable((Drawable) msg.obj);  
                      } else {  
                          imageView.setImageDrawable(placeholder);  
                          //Log.d(null, "fail " + url);  
                      } 
              }  
          }  
      };  

      mThreadPool.submit(new Runnable() {  
          public void run() {  
              final Drawable bmp = downloadDrawable(url);
              // if the view is not visible anymore, the image will be ready for next time in cache
              if (imageView.isShown())
              {
                  Message message = Message.obtain();  
                  message.obj = bmp;
                  //Log.d(null, "Item downloaded: " + url);  

                  handler.sendMessage(message);
              }
          }  
      });  
  }  

  /**
   * Method that download the image
   * @param url The url image.
   * @return Returns the drawable associated to this image.
   */
  private Drawable downloadDrawable(String url) {  
      try {  
          InputStream is = getInputStream(url);

          Drawable drawable = Drawable.createFromStream(is, url);
          putDrawableInCache(url,drawable);  
          return drawable;  

      } catch (MalformedURLException e) {  
          e.printStackTrace();  
      } catch (IOException e) {  
          e.printStackTrace();  
      }  

      return null;  
  }  

  /**
   * This method manage the connection to download the image.
   * @param urlString url of the image.
   * @return Returns an InputStream associated with the url image.
   * @throws MalformedURLException
   * @throws IOException
   */
  private InputStream getInputStream(String urlString) throws MalformedURLException, IOException {
      URL url = new URL(urlString);
      URLConnection connection;
      connection = url.openConnection();
      connection.setUseCaches(true); 
      connection.connect();
      InputStream response = connection.getInputStream();

      return response;
  }
  } 
```

此外，当我使用上面的代码下载图像时，我注意到在我的其他活动中，在加载所有图像之后，水平滚动（devsmart）不再起作用。当我在加载图像之前尝试滚动时，它仍然有效。所以我尝试使用另一个，在[此](http://www.technotalkative.com/android-asynchronous-image-loading-in-listview/)之后，滚动工作但由于泄漏问题而无法加载我的图像......任何人都可以分享关于这个问题的想法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:59:20.723

所以，我决定使用[koush](https://github.com/koush/UrlImageViewHelper)的 UrlImageViewHelper 这个库。这解决了我的问题。图像的加载似乎比我的稳定。

# ios - 设置 [_director displayStats:NO] 时 cocos2d iPad 崩溃

> ID：16137454
> 
> 赞同：1
> 
> 时间：2013-04-21T23:50:15.790
> 
> 标签：ios, ipad, cocos2d-iphone

我刚刚完成了一个 cocos2d iPad 应用程序的快速原型初稿。我没有修改`CCTextureAtlas.m`文件。

当我离开时，该应用程序运行良好`[director_ setDisplayStats:YES]`，`AppDelegate`但如果我删除该行或替换`[director_setDisplayStats:NO]`，它会在`CCTextureAtlas.m`.

`-(void) drawNumberOfQuads: (NSUInteger) n fromIndex: (NSUInteger) start`在第 522 行，内容如下：

`glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, (GLvoid*) (start*6*sizeof(_indices[0])) );`

供参考，`[director_ setDisplayStats:YES]`位于第 154 行`AppDelegate.m`。

应用原型的完整源代码位于此处：

**[https://github.com/GameAid/Toddler-Taxonomist](https://github.com/GameAid/Toddler-Taxonomist)**

对于那些可能查看代码的人来说，点击开始后，`BoardLayer`这是协调大部分工作和屏幕上显示内容的主要节点。

对于我的生活，我无法弄清楚我在做什么导致这成为一个问题。起初，我怀疑我对`[[CCTextureCache sharedCache] removeUnusedTextures]`(in 'BoardLayer') 的使用有问题，但现在我认为这并没有什么不同。

这是出现在 Xcode 中的调用堆栈：

![在此处输入图像描述](https://i.stack.imgur.com/4ghoh.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:04:06.093

在`BoardLayer.m`中，我正在使用`[self removeAllChildrenWithCleanup:YES]`，这似乎是导致问题的原因。当我将其更改为 simple`[self removeAllChildren]`时，一切都按预期工作`[director_ setShowStats:NO]`。

我不确定这种冲突的性质是什么——它似乎处于低 OpenGL 级别——但它已在我的代码中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:11:24.060

好吧，在将清理设置为 NO 之前我会小心（如果你不小心，泄漏会潜伏很多时间）。当（在 ccConfig.h 中）我更改时，我能够在没有 FPS 的情况下运行您的应用程序

```
#define CC_ENABLE_GL_STATE_CACHE 1 
```

到

```
#define CC_ENABLE_GL_STATE_CACHE 0 
```

根据您的上述答案，在 GL 级别似乎存在令人讨厌的耦合。我不认为这种优化（状态缓存）会非常明显（如果有的话）影响您的应用程序类型的感知性能。

ps：漂亮的图形，可能会成为许多 7-77 岁孩子的最爱。

# z-index - Positioning child behind parent

> ID：16137456
> 
> 赞同：1
> 
> 时间：2013-04-21T23:51:01.013
> 
> 标签：z-index

I'm trying to position a child element behind it's parent:

```
<div><p>test</p></div> 
```

My CSS is:

```
div {
    width: 100px;
    height: 100px;
    background: red;
    z-index: 2;
}

div p {
    position: relative;
    z-index: 1;
} 
```

The `z-index` of the `<p>` is lower than it's parent `z-index`, but it is displayed in front. Why is that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:12:10.363

示例中的the`div`和 the`p`存在于不同的堆叠上下文中，而`div`'s`z-index`告诉它比它的**兄弟姐妹**高两层，而不是它的孩子。

但是，`z-index`低于零的元素会将其置于其父元素之后。

给出-1的`p`a将 放在后面，而不管的。`z-index``p``div``div``z-index`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:09:26.270

如果这在您的情况下是可能的，您需要防止在父级上堆叠上下文。为此，请`z-index`从您的中删除`<div/>`并将`<p/>`'s设置`z-index`为`-1`：

```
div {
    width: 100px;
    height: 100px;
    background: red;
    /* z-index: 2; */
}

div p {
    position: relative;
    z-index: -1;
} 
```

# asp.net - ASP.NET Temporary files cleanup

> ID：16137457
> 
> 赞同：164
> 
> 时间：2013-04-21T23:51:03.087
> 
> 标签：asp.net

Can I safely delete the contents of this folder

> `C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root`

on a Windows 2003 R2 standard system, given that I am not using IIS (6/7) on it?

If that is the case, could you please point me to the relevant documentation about ASP.NET's runtime and maintenance tasks such as this?

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-07-02T13:13:48.870

是的，删除这些是安全的，尽管它可能会强制对您在服务器上运行的任何 .NET 应用程序进行动态重新编译。

有关背景信息，请参阅 MSDN 上的[了解 ASP.NET 动态编译](http://msdn.microsoft.com/library/ms366723)文章。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-12-30T21:10:45.570

只是对更多当前操作系统（Vista、Win7 等）的更新 - 临时文件路径~~已经改变~~可能会因几个变量而有所不同。以下项目不是确定的，但是，它们是我遇到的一些：

“temp”环境变量设置 - 那么它将是：

```
%temp%\Temporary ASP.NET Files 
```

权限以及运行 .Net 编译器的应用程序/进程（VS、IIS、IIS Express）。访问 C:\WINDOWS\Microsoft.NET\Framework 文件夹需要提升权限，如果您不是在具有足够权限的帐户下开发，则可能会使用此文件夹：

```
c:\Users\[youruserid]\AppData\Local\Temp\Temporary ASP.NET Files 
```

在某些情况下，可以通过配置为特定于机器或站点的使用以下命令设置临时文件夹：

```
<compilation tempDirectory="d:\MyTempPlace" /> 
```

我什至在工作中有一个时髦的设置，默认情况下我们不运行 Admin，而且 IT 人员有设置 %temp% 的登录脚本，我在 3 个不同的位置获取临时文件，具体取决于编译的内容！而且我仍然不确定这些路径是如何被选中的......叹息。

尽管如此，**dthrasher**是正确的，您可以删除这些，VS 和 IIS 将根据需要重新编译它们。

# android - 从 JSON 中提取地点详细信息

> ID：16137460
> 
> 赞同：0
> 
> 时间：2013-04-21T23:51:30.630
> 
> 标签：android, json, google-places

我在这里遇到问题。在我的**android应用程序**中，我有这个地方的位置，所以我相对想得到这个地方所属的类型。所以我找到了解决方案，`"types" : [ "restaurant", "food", "establishment" ]`但问题是我不知道如何从这个 JSONObject 中提取每种类型。这是一个类似于我想要的东西的例子。

```
 URL googlePlaces = new URL(
                        "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" +URLEncoder.encode(args[0], "UTF-8")+"&sensor=true&key=key");
 URLConnection tc = googlePlaces.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));

            String line;
            StringBuffer sb = new StringBuffer();
            //take Google's legible JSON and turn it into one big string.
            while ((line = in.readLine()) != null) {
                sb.append(line);
            }
                JSONObject predictions = new JSONObject(sb.toString()); 
 JSONArray ja = new JSONArray(predictions.getString("predictions"));
                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                     predictionsArr.add(jo.getString("description"));
                }
            } 
```

# c++ - 在 Windows XP、Vista、7 和 8 中使用旧操作系统的兼容性功能有什么效果？

> ID：16137462
> 
> 赞同：5
> 
> 时间：2013-04-21T23:51:37.813
> 
> 标签：c++, batch-file, cross-platform, adapter, compatibility

我一直在尝试研究为什么某些兼容性功能会因操作系统而异，以便我可以编写补丁程序。我正在使用 Windows 95 注册表中的兼容性设置在每个系统中运行游戏（该游戏是在哪个系统上制作的）。在 Windows XP 中，游戏运行完美。没有一个场景滞后，声音和场景一样好。我不确定它如何在 Windows Vista 中运行，但在 Windows 7 和 8 中，兼容性功能会破坏游戏。我用虚拟机运行XP，但这不影响游戏的可玩性；真正的 XP 用户已经对其进行了测试。每当我使用 Win95 设置以兼容 7 和 8 玩游戏时，一切都会滞后。游戏过程中音乐不会变慢，但图形会变慢。在过场动画中，它们实际上会破裂。一切像素化，

我在其中通过 WINE 在 Ubuntu Linux 中对其进行了测试，它比在 XP 中运行得更好。我只需要使用 alsa 声音驱动程序。发生了什么变化？如果是这样，它是否可以通过编程方式修复？我正在使用 C++、Batch 和 Java 的组合。如果有必要，视频游戏的标题是“The Neverhood”。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T09:04:58.497

shell 中可用的兼容性功能只是触及Windows中[“应用程序兼容性”主题的表面。](http://technet.microsoft.com/en-US/windows/aa905066.aspx)

有一个名为[“Microsoft Application Compatibility Toolkit (ACT)”](http://technet.microsoft.com/library/cc722367.aspx)的工具（我相信自 Windows XP 存在以来就存在）它可以提供更多功能，因此也许可以提供帮助。

例如这里是[图形控制问题的一些兼容性设置](http://technet.microsoft.com/library/cc749004.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:21:06.150

我目前在 Win7 x64 上玩“The Neverhood”没有任何视觉问题，当我第一次在 Win7 上玩时（4 年前）你是对的我为 Win7 编写了这个 reg 代码并为我工作了 4 年，当然它也适合你：

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers]
"C:\\Folder\\nhc.exe"="# WIN95 256COLOR 640X480 DISABLEDWM" 
```

*   其中“C:\\Folder\\nhc.exe”当然是您的 Neverhood 的路径。（注意双反斜杠）

该标志意味着：*将显示颜色更改为 256 色，将显示分辨率更改为 640x480，禁用主题服务（DWM 服务）*。

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T19:03:39.017

这可能无法直接回答问题，但如果您想提高 The Neverhood 的性能，请将兼容性更改为在 Windows 95 中运行 - 然后打开所有其他选项，除了底部的三个。这有助于使游戏尽可能快速和流畅。

# c++ - Makefile 不读取其余部分

> ID：16137464
> 
> 赞同：0
> 
> 时间：2013-04-21T23:52:18.610
> 
> 标签：c++, g++, makefile

我的制作文件有问题。`.o`创建第一个文件后，它不会继续读取。这是我的制作文件：

```
CC = g++
CFLAGS = -g
LDFLAGS = -lm

PokerEval.o: PokerEval.cpp
    ${CC} ${CFLAGS} -c PokerEval.cpp

random.o: random.cpp random.h
    ${CC} ${CFLAGS} -c random.cpp

myprogram: random.o PokerEval.o
    ${CC} ${CFLAGS} PokerEval.o random.o ${LDFLAGS} -o myprogram

clean:
    rm -f myprogram *.o
.PHONY: all clean 
```

所以当我运行它时，我得到的是：

```
$ make
g++ -g -c PokerEval.cpp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:59:18.633

Make 通常¹构建 makefile 中的*第一个*目标，除非您在命令行上指定目标。

因此，您通常首先指定您的主要目标（例如，可执行文件），然后再指定它所依赖的任何内容。

请注意，您可以（并且经常这样做）在第一个目标之前定义*宏*——它们不算作目标。

* * *

1.  在这种情况下，“通常”意味着“总是，具有适当设计的 make 实用程序”。一个例外是一个古老的微软工具，他们称之为 make，但无论如何它构建了*一切。*他们目前`nmake`（“新品牌”）正确工作（至少是半）的已经存在了几十年。

# highcharts - 悬停时向高图中的图例添加工具提示

> ID：16137466
> 
> 赞同：9
> 
> 时间：2013-04-21T23:52:36.503
> 
> 标签：highcharts, gwt-highcharts

我想让用户知道他可以通过简单地点击它们来从图例中删除它们。对某些人来说，这可能是直观的，但其他人可能不知道他们可以做到这一点。我想让用户知道他们何时超过了图例项，然后可以单击以将其删除。

我正在为 highcharts 使用 GWT-wrapper 类。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T11:23:37.073

Highcharts 没有用于项目图例的内置工具提示，但您仍然可以为此创建自己的工具提示。将自定义事件添加到 legendItem（例如 mouseover 和 mouseout）并显示该工具提示很简单。

查看示例如何向 Highcharts 中的元素添加事件：http: [//jsfiddle.net/rAsRP/129/](http://jsfiddle.net/rAsRP/129/)

```
 events: {
            load: function () {
                var chart = this,
                    legend = chart.legend;

                for (var i = 0, len = legend.allItems.length; i < len; i++) {
                    (function(i) {
                        var item = legend.allItems[i].legendItem;
                        item.on('mouseover', function (e) {
                            //show custom tooltip here
                            console.log("mouseover" + i);
                        }).on('mouseout', function (e) {
                            //hide tooltip
                            console.log("mouseout" + i);
                        });
                    })(i);
                }

            }
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-03T15:45:58.283

还有另一个机会在将鼠标悬停在 Highcharts 图例上时获得工具提示。您只需要为图例启用 useHTML 并重新定义 labelFormatter 函数；此函数应返回包含在“span”标签中的标签文本。在这个“span”标签中，可以包含一个类来应用基于 jQuery 的工具提示（例如 jQuery UI 或 Bootstrap）。也可以使用 'data-xxx' 属性传输一些数据（例如，图例项的索引）：

```
labelFormatter: function () {
    return '<span class="abc" data-index="' + this.index + '">' + this.name + '</span>';
} 
```

工具提示可以根据需要进行格式化；超链接也是可能的。[小提琴在这里。](https://jsfiddle.net/PavelRLevashov/tnvvLqL2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T09:01:30.167

你可以这样做。

起初，Highcharts 有回调函数。
[https://stackoverflow.com/a/16191017](https://stackoverflow.com/a/16191017)

并且修改版 Tipsy 可以在 SVG 中显示工具提示。
[http://bl.ocks.org/ilyabo/1373263](http://bl.ocks.org/ilyabo/1373263)
*在此页面上使用 jquery.tipsy.js 和 Tipsy.css。

然后，像这样开始高图表。

```
$('#your-chart').highcharts(your_chart_options,function(chart){
    $('#your-chart').find('.highcharts-legend-item').each(function(){
        // set title text example
        var _text = $(this).text(),
            _title = '';
        switch(_text){
            case "legend 1":
                _title = 'legend 1 title';
                break;
            case "legend 2":
                _title = 'legend 2 title';
                break;
        }
        // add <title> tag to legend item
        $(this).append($('<title></title>').text(_title));
    });
    $('#your-chart').find(".highcharts-legend-item").tipsy({
        gravity: 's',
        fade: true
    })
}); 
```

# ruby-on-rails-3 - Bad flot canvas chart size within Bootstrap tab pane on initial page load

> ID：16137467
> 
> 赞同：7
> 
> 时间：2013-04-21T23:52:42.367
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, flot

I am building a Rails 3.2.11 app with Twitter Bootstrap and Flot (also HAML and Coffeescript).

In a view, I have Bootstrap tabs implemented like so (partials are rendered in the tab panes.),

```
.tabbable
  %ul.nav.nav-tabs
      %li.active
        %a{'data-toggle' => 'tab', :href => '#tab1'} This is tab 1
      %li
        %a{"data-toggle" => "tab", :href => "#tab2"} This is tab 2

    .tab-content
      #tab1.tab-pane.active
        = render 'tab_one_content'
      #tab2.tab-pane
        = render 'tab_two_content' 
```

Within a partial, I have a table. I want to render a flot chart within a td. My partial where I want to render the chart looks something like this,

```
 %table
    %tr
      %th
        Some heading text…
      %td
        -# Make the 12-month barchart
        - @chart_data = @barchart_12_mos_array.to_json
        #my_barchart.barchart{:data => {:bardata => @chart_data}} 
```

I am applying the chart dimensions with a CSS class like this,

```
.barchart {
  width: 240px;
  height: 120px;
} 
```

My Coffeescript looks like this. I expect the chart to plot on document.ready

```
$ ->
  $.plot $('#my_barchart'), [
    data: $("#my_barchart").data("bardata")
    bars:
      show: true
      barWidth: (365/12)*24*60*60*1000*.75
      align: 'center'
  ],
    xaxis:
      mode: "time"
      timeformat: "%b"
      monthNames: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"]
    yaxis:
      position: 'right' 
```

I have confirmed this .js is loading.

**The Problem:**

When the DOM initially loads, the chart renders, but it is the wrong size. The chart area (where the bars are only) is as set with the .barchart CSS, but the axes labels, etc. are outside that dimension (see [http://i36.tinypic.com/2vte1rp.jpg](http://i36.tinypic.com/2vte1rp.jpg), red dashes are border of td).

Upon refresh (I have .js that refreshes to the previously selected tab), the chart renders in the correct size I want (i.e., the axes labels are inside the dimension, see [http://i38.tinypic.com/4qq15g.jpg](http://i38.tinypic.com/4qq15g.jpg) ).

I think I have to get the correct placeholder dimensions to Flot, but don't know how. Adding width/height CSS to the td does not fix the problem. Any ideas?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T01:13:43.770

听起来占位符在一个开始隐藏的元素中。jQuery 无法获取隐藏元素的尺寸，这是导致绘图尺寸错误的常见原因。如果是这种情况，请在调用 $.plot 之前尝试显示该元素（您可以将其绝对定位在屏幕外，以避免任何闪烁），然后再将其重置。

# c++ - SFINAE - Detect constructor with one argument

> ID：16137468
> 
> 赞同：1
> 
> 时间：2013-04-21T23:52:47.727
> 
> 标签：c++, templates, metaprogramming, sfinae

Does anyone know how to detect a constructor with one argument? For example, this struct should have a negative result:

```
struct MyStruct
{
  MyStruct( int x, int x2 ) : y( x ) {}
  int y;
}; 
```

I have here a nice SFINAE check to see if a class or struct as a constructor with a specific number of arguments. Here's the one for argument count of 3:

```
template <typename T>
struct HasCtor3Args
{
  struct Any { template <typename U> operator U( void ); };

  template <typename U>
  static int32 SFINAE( decltype( U( Any( ), Any( ), Any( ) ) ) * );

  template <typename U>
  static int8 SFINAE( ... );

  static const bool value = sizeof( SFINAE<T>( NULL ) ) == sizeof( int32 );
}; 
```

This seems to work just fine, as the `Any` struct can convert to whatever types the parameters ought to be. However the issue is when trying to detect a constructor with just one argument. The SFINAE check seems to always return true due to defaulting `Any` to the same type as `T` thus detecting a copy constructor.

**Edit and Update**: I've made a few attempts, none seem to be a go... This was the closest I can get, but doesn't work as it always returns true. The idea was to try and get the copy constructor to resolve instead of the first "catch all" call:

```
template <typename T>
struct HasCtor1Args
{
  struct Any
  {
    template <typename U>
    operator U( ) const;
  };

  template <typename U>
  static int32 SFINAE( decltype( U( Any( ) ) ) * );

  // Try to catch the copy ctor here
  T MakeT( void );
  template <typename U>
  static int8 SFINAE( decltype( U( MakeT( ) ) ) * );

  template <typename U>
  static int8 SFINAE( ... );

  static const bool value = sizeof( SFINAE<T>( NULL ) ) == sizeof( int32 );
}; 
```

I also tried using the explicit keyword, along with the = delete feature for C++11, then realized the compiler I need to use (Microsoft's) does not allow this. I also tried using std::enable_if on the conversion type U, although I ran into the error that function template parameters cannot be defaulted.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:42:23.110

尽管 nm 的批评仍然成立，但这里有一个版本来检测**只有一个**1 参数非复制、非移动 ctor 的类型。它使用 SFINAE 来限制`Any`.

注意：具有默认参数的其他 ctor 会导致歧义（例如`my_type(int, double=0);`，这是一个非常有限的解决方案。

```
#include <cstdint>
#include <type_traits>

template <typename T>
struct HasCtor1Args
{
    struct Any
    {
      template
      <
        typename U, typename SFINAE =
          typename std::enable_if< false == std::is_same<U,T>::value, U >::type
      >
      operator U() const;
    };

    template <typename U>
    static int32_t SFINAE( decltype( U( Any( ) ) ) * );

    template <typename U>
    static int8_t SFINAE( ... );

    static const bool value = sizeof( SFINAE<T>( nullptr ) ) == sizeof( int32_t );
};

struct my_type
{
    my_type(int);
    my_type(my_type const&);
};

int main()
{
    static_assert(HasCtor1Args<my_type> :: value, "epic fail");
} 
```

# php - 列出数据库中的所有用户，具有多列和升序

> ID：16137469
> 
> 赞同：0
> 
> 时间：2013-04-21T23:52:57.270
> 
> 标签：php, mysql, database, leaderboard

简而言之，一个排行榜。

拥有最高硬币的人希望首先被列出。仅列出前 10 名，基于与其用户名连接的最高硬币数。

这列出了用户名，但不确定如何计算他们的硬币数量，以及如何将它们提升到前 10 名。

```
<?php
$query = mysql_query("SELECT username FROM `users`");

echo '<table>';
while($rowtwo = mysql_fetch_array($query)){
    echo    '<tr>
            <td><font size="2" face="Lucida Sans Unicode" color="red">'.$rowtwo['username'].'</td>
            </tr>';
}
echo '</table>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:56:03.530

```
SELECT username FROM `users` ORDER BY coins DESC LIMIT 10 
```

这`DESC`很重要，否则它将按从低到高的顺序列出硬币。这也假设硬币计数是一列`users`。如果不是，你必须让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T23:55:44.507

将查询更改为：

```
SELECT username FROM `users` ORDER BY `coins` DESC LIMIT 0,10 
```

# matlab - How to create a training example from an RGB image in Matlab?

> ID：16137470
> 
> 赞同：0
> 
> 时间：2013-04-21T23:53:10.193
> 
> 标签：matlab, image-processing, machine-learning, computer-vision, face-recognition

I have RGB face images of size 60x60\. They are matrices of size 60x60x3 in Matlab.

I need to apply some algorithms to these data. But first I need to create training examples for the images. Given one image of size 60x60x3 I will need to create a vector of size 1x10800\. I am not sure, should I interleave the R, G and B values for the pixels, should I go column by column or row by row?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:49:15.437

通常，没关系。例如，SVM 分类器或神经网络感知器对输入的任何排列都是不变的。如果您的图像是`im`，只需`im(:)`将其转换为列。

# asp.net-mvc - foreach within foreach in razor view not working

> ID：16137476
> 
> 赞同：3
> 
> 时间：2013-04-21T23:54:02.587
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, parse-error

I had a partial view as shown below in which i have first foreach loop for posts and another foreach to add comments for that post. But the run time error is as

> Parser Error Message :Unexpected "foreach" keyword after "@" character. Once inside code, you do not need to prefix constructs like "foreach" with "@".

but the braces are perfect.

```
 @model Network.Models.ViewPostModel
    @using (Html.BeginForm("AddPost", "Network"))
{

        @Html.TextBoxFor(model => model.addpost.Content, new { @class = "textboxstyle"})
        <br/>
         <button type="submit">Add Post </button>
           <br/><br/>
           @foreach(var post in Model.Post)
           {
            <br/>
             <b>Posted by :</b> @post.Username
            <span> @post.Content </span> 
                @foreach(var comment in Model.Comments)
                {

                        <br/>
                       @comment.Content
                    <b>Comented  by :</b> @comment.username
                      <br/><br/>
               }
          @Html.TextAreaFor(model => model.addcomment.Content)
          <button type="submit">Add Comment </button>

        }
} 
```

I tried either one foreach loop is working but not both .My Model class for strongly typed partial view is as below

```
public class ViewPostModel
    {

            public List<Post> Post { get; set; }
            public List<Comment> Comments { get; set; }
            public List<UserFriend> Userfriends { get; set; }
            public Post addpost { get; set; }
            public Comment addcomment { get; set; }

    } 
```

Please check what my fault is in?

Thanks, michaeld

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:11:38.280

你似乎有`fieldset`里面`foreach`，你把它关在外面。

我在剃须刀上看到过类似的问题。例如检查这篇文章
[foreach 块缺少一个结束“}”字符](https://stackoverflow.com/questions/9666440/the-foreach-block-is-missing-a-closing-character/9666495#9666495)

这对我来说没有意义 - 我认为你应该将第一个/开口移到循环之外。

# jquery - 用点击事件绑定每个功能？

> ID：16137478
> 
> 赞同：0
> 
> 时间：2013-04-21T23:54:18.097
> 
> 标签：jquery, bind, live, placeholder

我已经搜索并找到了多个答案，只是说明将我的函数包装在点击处理程序中，尽管我希望它在页面加载时运行，或者在我的 javascript 完成插入所有 html 后运行。

我有一个动态创建的整个页面。我正在使用这个片段来修复 IE 的占位符。它确实有效，但不适用于实时创建的元素。

```
$(document).ready(function(){    
    // Placeholder Fix for IE < 9    
    $("[placeholder]").each(function() {        
        var val = $(this).attr("placeholder");
        if ( this.value === "" ) {
            this.value = val;
        }
        $(this).focus(function() {
            if ( this.value == val ) {
                this.value = "";
            }
        }).blur(function() {
            if ( $.trim(this.value) === "" ) {
                this.value = val;
            }
        });
    });
    // Clear default placeholder values on form submit
    $('form').submit(function() {
        $(this).find("[placeholder]").each(function() {
            if ( this.value == $(this).attr("placeholder") ) {
                this.value = "";
            }
        });
    });
}); 
```

我正在用js添加表单元素，例如：

```
$('body').append('<input type="text" placeholder="placeholdertext" />'); 
```

有人可以建议如何解决这个问题吗？

香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:38:49.990

这是你要找的吗？

on() 函数将处理程序应用于页面上适合选择器的所有元素，而不仅仅是特定元素（如 .focus 和 .blur）更多信息在这里：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(this).on("focus", function() {
            if ( this.value == val ) {
                this.value = "";
            }
        }).on("blur", (function() {
            if ( $.trim(this.value) === "" ) {
                this.value = val;
            }
        });
}); 
```

# jquery - Performing a function after another

> ID：16137481
> 
> 赞同：-2
> 
> 时间：2013-04-21T23:54:28.100
> 
> 标签：jquery

I'm having difficulty getting another function to work after one has just completed. The first half of my code works, but the function afterwards doesn't. What am I doing wrong?

The HTML

```
<div id="feature">
    <div id="open"></div>
</div> 
```

The CSS

```
#feature {
    position:relative;
    width:100%;
    height:450px;
}
#open {
    position:relative;
    width:100%;
    height:200px;
    background:red;
} 
```

The jQuery

```
$('#open').click(function () {
    $(this).animate({
        height: 50
    }, {
        duration: 'slow'
    }).css('overflow', 'visible'),
    function () {
        $('#open').animate({
            height: 200
        }, {
            duration: 'slow'
        })
    };
    // Animation complete.
}); 
```

A JS Fiddle.

[http://jsfiddle.net/C8fA7/](http://jsfiddle.net/C8fA7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:58:31.990

该函数必须是 的参数`animate`，但您已将其放在 之后`css`，在您完成对 的调用很久之后`animate`。试试这个：

```
$(this).animate({
    height: 50
}, {
    duration: 'slow'
}, function () {
    $('#open').animate({
        height: 200
    }, {
        duration: 'slow'
    })
}).css('overflow', 'visible'); 
```

如果我们明确链接，这会变得更清楚：

```
var temp = $(this);
temp = temp.animate({ height: 50 }, { duration: 'slow' });
temp = temp.css('overflow', 'visible'); 
```

那时，您只剩下这个杂散功能：

```
function () {
    $('#open').animate({ height: 200 }, { duration: 'slow' });
} 
```

那里没有语法错误，但它什么也没做，因为它从未被调用过。

此外，您的评论`// Animation complete`表明您可能没有意识到动画是异步的。当你完成`animate`语句时，动画已经开始，但它还没有结束。动画完成时将调用您的回调函数；调用后的语句`animate`不会等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-16T14:40:57.597

这是最简单的方法：

```
// Do stuff (Pt. 1)
setTimeout(function() {
    // Do more stuff (Pt. 2)
    setTimeout(function() {
        //Do even more stuff (Pt. 3)...
    }, 0);
}, 0); 
```

不确定 ES/JS 是否打算以这种方式使用 setTimeout，但即使指定了 0ms 的持续时间，该函数仍然遵循等待第一个函数（或动作）的 when/then 或 when/done 'sequence'在继续之前完成。后续函数被称为“回调”，尽管我认为这是一个糟糕的词选择——它们不会回调任何东西并继续前进！

# mysql - Mysql Update, 2 databases

> ID：16137484
> 
> 赞同：1
> 
> 时间：2013-04-21T23:54:56.053
> 
> 标签：mysql, database, date, set

I have 2 MYSQL tables and when I pick up dates from table A which contains only 1 column and lets say 10 rows with dates

```
 $result = mysql_query("SELECT * FROM A");
    $row = mysql_fetch_assoc($result); 
```

And after I want to UPDATE another table B with using this dates from table A `mysql_query("UPDATE B SET something='1' WHERE name='".$row['name']."'")` So i need to update the second table, but its updating just once with first date from table A, and other 9 its ignoring. So my question is, how to make updating of second table with each date from 1 table?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:31:47.360

您需要循环运行更新。执行查询后

```
$result = mysql_query("SELECT * FROM A"); 
```

并验证它是否成功（确保`$result`不为空），而不是获取一行，而是使用循环：

```
while($row = mysql_fetch_assoc($result)){
    // perform calculations & assignments with the $row elements
    $result2 = mysql_query("UPDATE B SET something='1'
                            WHERE name='".$row['name']."'");
    if(! $result2){
         echo "update failed";
    }
    // Any other stuff you need to do
} 
```

* * *

或者：

如果`something`更新中的所有行都相同，则可以更改第一个查询以提供以逗号分隔的名称字符串：

```
$result = mysql_query("SELECT CONCAT("'",GROUP_CONCAT(name SEPARATOR "','"),"'")
                       AS all_names FROM A"); 
```

这样，您只会收到一行，然后您可以在第二个查询中使用它：

```
$result2 = mysql_query("UPDATE B SET something='1'
                        WHERE name IN (".$row['name'].")"); 
```

# sql - 存储过程 - 知道下一个 ID

> ID：16137489
> 
> 赞同：0
> 
> 时间：2013-04-21T23:55:59.220
> 
> 标签：sql, sql-server, sql-server-2012

我正在创建一个存储过程来创建一个新客户，例如，

```
CREATE PROCEDURE Customer_Create
@customer_arg
@type_arg
AS
BEGIN
INSERT INTO Customer (Customer_id, Type_id)
VALUES (@Customer_arg,@type_arg)
End; 
```

如果我的语句中有几个外键并且它们都是 ID，我有没有办法自动提取 NEXT ID 号，而不必知道在运行执行语句时它会是什么？我想让它拉出 ID 为 2 的事实，因为之前的记录是 1

```
EXECUTE Customer_Create 16,2 
```

是什么东西`output`吗？如果是这样，这如何工作代码明智

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:05:02.913

我怀疑你想要做的是在插入记录后*返回新的 id。*为了那个原因：

```
CREATE PROCEDURE Customer_Create (
    @customer_arg,
    @type_arg,
    @NewCustomerId int output
) AS
BEGIN
    INSERT INTO Customer(Customer_id, Type_id)
        VALUES (@Customer_arg, @type_arg);

    @NewCustomerId = scope_identity();
End; 
```

获取身份还有其他几种选择，在[此处](http://msdn.microsoft.com/en-us/library/ms187342.aspx)进行了说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:08:03.033

要获取最后插入的 IDENTITY 值，您应该使用如下`OUTPUT`子句：

```
DECLARE @IdentValues TABLE(v INT);

INSERT INTO dbo.IdentityTest 
OUTPUT INSERTED.id INTO @IdentValues(v)
DEFAULT VALUES;

SELECT v AS IdentityValues FROM @IdentValues; 
```

还有其他几种机制，`@@IDENTITY`但它们都存在重大问题。有关详细信息，请参阅我的[身份危机](http://sqlity.net/en/351/identity-crisis/)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:37:10.370

在您的情况下，您也可以像这样尝试@IDENTITY

```
DECLARE @NextID int
--insert statement goes here
SET @NextID = @@Identity` 
```

这里有几个很好的资源来熟悉这个

[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

[http://blog.sqlauthority.com/2013/03/26/sql-server-identity-fields-review-sql-queries-2012-joes-2-pros-volume-2-the-sql-query-techniques-教程-for-sql-server-2012/](http://blog.sqlauthority.com/2013/03/26/sql-server-identity-fields-review-sql-queries-2012-joes-2-pros-volume-2-the-sql-query-techniques-tutorial-for-sql-server-2012/)

# php - Symfony2 updating data with a form

> ID：16137492
> 
> 赞同：1
> 
> 时间：2013-04-21T23:56:13.853
> 
> 标签：php, symfony

I am trying to update the data in my database but unfortunately Symfony keeps creating new data for me. I have the following controller:

```
public function updateAction(Request $request,$id)
{
    $em = $this->getDoctrine()->getManager();
    $product = $em->getRepository('AcmeStoreBundle:Product')->find($id);

    if (!$product) {
        throw $this->createNotFoundException(
            'No product found for id '.$id
        );
    }

    $form = $this->createForm(new ProductType(), $product);

    if($request->isMethod('POST')) {
        $form->bind($request);
        if($form->isValid()) {
            $em->persist($product);
            $em->flush();
            $this->get('session')->getFlashBag()->add('green', 'Product Updated!');
        } else {
            //$this->get('logger')->info('This will be written in logs');
            $this->get('session')->getFlashBag()->add('red', 'Update of Product Failed!');
        }
        return $this->redirect($this->generateUrl('acme_store_product_all'));
    }

    return $this->render('AcmeStoreBundle:Default:update.html.twig',array(
        'name' => $product->getName(),
        'updateForm' => $form->createView(),
    ));
} 
```

I just wondering what I am doing wrong. I new to Symfony

**EDIT**

```
// Acme/StoreBundle/Form/Type/ProductType.php
namespace Acme\StoreBundle\Form\Type;

use Acme\StoreBundle\Entity\Category;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class ProductType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');
        $builder->add('price');
        $builder->add('description');
        $builder->add('category', 'entity',array('class' => 'AcmeStoreBundle:Category',));
    }

    public function getName()
    {
        return 'name';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T06:33:31.790

您的控制器中的代码是正确的（即使您可以`$em->persist($product)`从代码中删除，因为实体已经由实体管理器管理）。

我强烈怀疑错误出在您的树枝模板中，并且您的表单未指向控制器中的正确操作：我感觉您已将表单提交给该`newAction`方法：

```
<form action="{{ path('product_new') }}" method="post" {{ form_enctype(form) }}>
{# .... #}
</form> 
```

而表单应该指向您`updateAction`的控制器的方法：

```
<form action="{{ path('product_update') }}" method="post" {{ form_enctype(form) }}>
{# .... #}
</form> 
```

好吧，这是一个常见的错误:)

# c# - Cropping texture2d on all sides in xna c#

> ID：16137500
> 
> 赞同：1
> 
> 时间：2013-04-21T23:57:26.553
> 
> 标签：c#, xna, crop, texture2d

i am trying to crop a texture2d in xna. i have found the following code which will crop the image on the top and right sides, i have played around with the code and cannot figure a way to crop all sides at a specific interval. below is the code i have been trying to modify:

any help or ideas would be much appreciated.

```
Rectangle area = new Rectangle(0, 0, 580, 480);

        Texture2D cropped = new Texture2D(heightMap1.GraphicsDevice, area.Width, area.Height);
        Color[] data = new Color[heightMap1.Width * heightMap1.Height];
        Color[] cropData = new Color[cropped.Width * cropped.Height];

        heightMap1.GetData(data);

        int index = 0;

        for (int y = 0; y < area.Y + area.Height; y++) // for each row
        {

                for (int x = 0; x < area.X + area.Width; x++) // for each column 
                {
                    cropData[index] = data[x + (y * heightMap1.Width)];
                    index++;
                }

        }

    cropped.SetData(cropData); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:06:07.700

这是裁剪纹理的代码。请注意，该`GetData`方法已经可以选择图像的矩形子部分 - 无需手动裁剪。

```
// Get your texture
Texture2D texture = Content.Load<Texture2D>("myTexture");

// Calculate the cropped boundary
Rectangle newBounds = texture.Bounds;
const int resizeBy = 20;
newBounds.X += resizeBy;
newBounds.Y += resizeBy;
newBounds.Width -= resizeBy * 2;
newBounds.Height -= resizeBy * 2;

// Create a new texture of the desired size
Texture2D croppedTexture = new Texture2D(GraphicsDevice, newBounds.Width, newBounds.Height);

// Copy the data from the cropped region into a buffer, then into the new texture
Color[] data = new Color[newBounds.Width * newBounds.Height];
texture.GetData(0, newBounds, data, 0, newBounds.Width * newBounds.Height);
croppedTexture.SetData(data); 
```

当然，请记住，它`SpriteBatch.Draw`可以带一个`sourceRectangle`参数，因此您甚至可能根本不需要复制纹理数据！只需使用原始纹理的一小部分。例如：

```
spriteBatch.Draw(texture, Vector2.Zero, newBounds, Color.White); 
```

（其中`newBounds`的计算方式与第一个代码清单中的相同。）

# jquery-mobile - Angular.js 与 jQuery Mobile

> ID：16137501
> 
> 赞同：9
> 
> 时间：2013-04-21T23:57:45.487
> 
> 标签：jquery-mobile, angularjs

我正在用 jQuery Mobile 和 Angular.js 做一个应用程序。因为我们在使用这两个库时遇到了一些问题，存在一个执行“工作”的[适配器。](https://github.com/tigbro/jquery-mobile-angular-adapter)

所以我正在尝试使用 routeProvider 来路由我的页面。但我仍然无法使用它呈现页面。

如果你能帮我指路，请在这里。

[http://plnkr.co/edit/DNGiT83csWMmfYnHXOop](http://plnkr.co/edit/DNGiT83csWMmfYnHXOop)

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-27T21:48:35.843

我遇到了类似的问题，也许我学到的东西可能会对你有所帮助。它归结为 angular 和 jquery 从一个页面/部分到另一个（路由）的方式的差异。

首先，基础知识：通过将一大块 html 插入到您的视图中，然后在任何点击/操作/等上，从视图中删除该 html 并添加一个新的 html 块来进行角度路由。基本上你一直在同一个页面上；只是包含的 html 正在改变。相比之下，将 jqm 视为将所有 html 加载到同一页面中，这些 html 块作为 div。而不是删除 html 块并替换它们（通过路由），它只是关闭和打开 div。（有多页 jqm 应用程序，但 SPA 确实突出了差异。）

我的建议是选择您真正想要的一组功能：angular 的极简加载（仅在您需要时），或 jqm 的华丽过渡和其他内置功能。如果你有一个庞大的应用程序，每个页面上都有大量数据，你可能想绕过 jqm 并单独使用 angular，看看你可以用 angular 的新动画函数做什么。这意味着您需要构建（通过 CSS 或 javascript）jqm 功能的副本——据我所见，您可以接近，但它不会像 jqm 那样令人愉快地简化。

如果 jqm 内置功能是您真正想要的，那么请跳过使用 angular 的路由。无论如何，它只会引入各种并发症。使用 jqm 的模式设置你的页面，并且只在你处理数据的地方使用 angular。

我发现最好的方法是把它当作一个 jqm 应用程序来对待，并且只在你需要的部分添加角度。毕竟，你不必在 html 行添加 ng-app；您可以根据需要将其添加到单个 div 中。由于 jqm 作为一种系统范围的东西是最快乐的，而 angular 被限制在系统内的部分就很好，到目前为止，我发现 jqm-whole 和 angular-parts 是获得两者最佳的最简单方法世界。

# ruby-on-rails - 为依赖项 gem 指定 Rails::Engine 的正确方法？

> ID：16137502
> 
> 赞同：0
> 
> 时间：2013-04-21T23:57:47.587
> 
> 标签：ruby-on-rails, gem, rails-engines

我正在构建一个命名空间 Rails Engine gem，它可以通过其他 gem 进行扩展。例如： MyEngine 是主要的 gem，也是命名空间。MyEngine-blog 和 MyEngine-support 是可选的 gem，用于在继承 MyEngine 命名空间的同时扩展 MyEngine gem。

MyEngine-blog 和 MyEngine-support 依赖于 MyEngine 的核心功能，这两个 gem 都将包含`spec.add_dependency "synculus"`在它们的 gemspec 文件中。

`Rails::Engine`为依赖项指定 gem的正确方法是什么？我是否必须`class Engine < ::Rails::Engine`在每个 MyEngine-blog 和 MyEngine-support gem 的 engine.rb 文件中指定？

```
# lib/myengine/engine.rb
module MyEngine
  class Engine < ::Rails::Engine
    isolate_namespace MyEngine
  end
end

# lib/myengine/blog/engine.rb
module MyEngine
  class Engine < ::Rails::Engine
    isolate_namespace MyEngine
    module Blog
    end
  end
end

# lib/myengine/support/engine.rb
module MyEngine
  class Engine < ::Rails::Engine
    isolate_namespace MyEngine
    module Support
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T23:56:04.637

看看 spree commerce 在他们的 2.x 版本中是如何做到这一点的，他们对 Rails 引擎有非常好的把握。

[Spree Commerce 2.x 引擎.rb](https://github.com/spree/spree/blob/master/core/lib/spree/core/engine.rb)

# javascript - 使用 .load 后，它会加载到 div 的底部

> ID：16137510
> 
> 赞同：0
> 
> 时间：2013-04-21T23:58:40.810
> 
> 标签：javascript, jquery

使用 .load 后，它会加载到 div 的底部，我想加载到顶部。我不知道该怎么做。它加载了链接的位置，我想加载到 div 的顶部谢谢。

这是我的 javascript

```
function load(where){
$("#story" ).load("loadFrom.htm"+" #"+where);
} 
```

这是我的 HTML

```
 <div id="story">
        <h2>This is where it all starts...</h2>
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
        <a href="loadFrom.htm" id="linkFunction" onclick="load('start');return false;">Push Me!</a>

    </div> 
```

我的链接在底部，页面加载到#story，但我在新内容的底部，我想在顶部。谢谢

文章有一个标题，当它加载时，我希望它在顶部加载。

感谢大家的帮助。我修复了它，这是其他人的代码。

```
function load(where){
  $("#story" ).load("loadFrom.htm"+" #"+where).scrollTop(0);

} 
```

确保通过单击功能上的链接传递参数。

```
 <a href="loadFrom.htm" id="linkFunction" onclick="load('start');return false;">Push   Me!</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:19:33.233

你可以在故事中放置另一个 div 并在那里加载吗？

```
<div id="story">
 <div id='loadHere'></div>
 ...
</div>

$("#loadHere").load("loadFrom.htm"+" #"+where); 
```

# javascript - 使用正则表达式删除“]”之前的空格

> ID：16137516
> 
> 赞同：-1
> 
> 时间：2013-04-21T23:59:13.003
> 
> 标签：javascript, regex

我正在剥离 JavaScript 中字符串的一部分。不幸的是，有时它会在我需要的右括号之前留下一个空格`]`。

例如，`[shortcode type="default"]`成为`[shortcode ]`，而我需要它成为`[shortcode]`。请注意，随着代码的积累，一个字符串中会出现多次。

`]`我需要在每次出现组合之前去掉那个空格，如果它出现的话。这个的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:08:41.440

您可以使用积极的前瞻。

```
str = str.replace(/\s+(?=])/g, ""); 
```

[js小提琴](http://jsfiddle.net/nVQmq/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:02:51.323

如果可能出现多个空格，则应使用`\s+`，如下所示：

```
str.replace(/\s+]/g, "]") 
```

`g`最后`/.../`做你所要求的：替换每行中的多次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:05:28.130

如果有一个空格和一个出现，`.replace(' ]', ']')`就足够了，但是你具体说会有不止一个，所以`.replace(/ ]/g, ']')`会这样做。如果右大括号前可以有多个空格，请使用：

```
.replace(/\s+]/g, ']') 
```

# jquery - JQueryUI：同时滑动两个 div

> ID：16137520
> 
> 赞同：1
> 
> 时间：2013-04-22T00:00:05.777
> 
> 标签：jquery, css, jquery-ui

我有一个网页，其中有两个占据整个空间的 div。我想一次显示一个，在它们之间有一个 JQueryUI 幻灯片过渡，以便一个 div 向左滑动，并被另一个从右侧滑入的 div 所取代。不幸的是，现在，由于两个动画同时发生，第二个 div 出现在第一个 div 的下方，然后在动画结束时向上滑动以替换第一个 div。如何定位第二个 div 以使滑动运动无缝地发生？

代码：

```
<script type="text/javascript">
    $('#schedule').hide();
    $( '#changer' ).click(function() {
            $("#roster").toggle( "slide", {direction: "left"}, "fast" );
            $("#schedule").toggle("slide", { direction: "right"}, "fast");

            if ($("#changer").html() == 'Schedule View')
                $("#changer").html('Roster View');
            else
                $("#changer").html("Schedule View");
        });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T03:27:17.633

考虑这个小提琴：http: [//jsfiddle.net/FkNa2/2/](http://jsfiddle.net/FkNa2/2/)

相关代码是css定位，

```
// html
<p>some content here </p>
<div class="container">
    <div id="div1"></div>
    <div id="div2"></div>
</div>
<button>Toggle</button>

// css
#div1{
    width: 500px;
    height: 100px;
    background-color: blue;
    position: absolute;
    top: 0px;
    left: 0px;
}

#div2{
    width: 500px;
    height: 100px;
    background-color: red;
    position: absolute;
    top: 0px;
    left: 0px;
}

.container {
    width: 800px;
    position: relative;
    left: 100px;
    height: 100px;
} 
```

诀窍是确保两个 div 在视口中占据相同的位置。这是通过将它们**绝对**定位到相同的坐标来完成的。请注意，这些坐标是相对于外部 div 的。请参阅此问题的答案[https://stackoverflow.com/a/10426717/30007](https://stackoverflow.com/a/10426717/30007)

> “相对”和“绝对”定位都是相对的，只是框架不同。“绝对”定位是相对于另一个封闭元素的位置。“相对”定位是相对于元素本身没有定位的位置。
> 
> 这取决于您使用哪一个的需求和目标。“相对”位置适用于您希望将元素从其在元素流中本来应该具有的位置移出，例如使某些字符出现在上标位置。“绝对”定位适用于将一个元素放置在某个由另一个元素设置的坐标系统中，例如用一些文本“套印”图像。
> 
> 作为一个特殊的，使用没有位移的“相对”定位（只是设置位置：相对）使一个元素成为一个参考框架，这样你就可以对它内部的元素使用“绝对”定位（在标记中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:02:59.103

将div的`z-index`( [w3schools ) 设置得更高。](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

您可以将其视为网站的层。例如 0 在底部 10 在顶部。

# visual-c++ - 在哪里可以找到更多 VS2012 的主题？

> ID：16137522
> 
> 赞同：5
> 
> 时间：2013-04-22T00:00:32.050
> 
> 标签：visual-c++, visual-studio-2012, syntax-highlighting

我已经下载了[VS2012 主题编辑器](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)，但现在想为它找到更多主题。具体来说，我在 .vstheme 文件之后，但找不到任何文件。我希望能得到一个与主题编辑器配合使用的漂亮的深色主题。我对 VS2010 中使用的设置文件不感兴趣。如果相关的话，我会用 C++ 编写。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-28T12:01:52.543

我发现这个[网站](http://studiostyl.es "地点")非常好，有很多不同的主题。具有实际 *.vstheme 扩展名的一个：http: [//studiostyl.es/schemes/c-dark-scheme-for-use-with-expression-dark-theme](http://studiostyl.es/schemes/c-dark-scheme-for-use-with-expression-dark-theme)

# ruby-on-rails - 带硒的水豚失败了。在浏览器中工作

> ID：16137524
> 
> 赞同：2
> 
> 时间：2013-04-22T00:01:09.043
> 
> 标签：ruby-on-rails, cucumber, capybara, selenium-webdriver

我有一个在浏览器中工作的简单登录系统。我最近将我的黄瓜测试切换为使用 selenium，因为我需要 ajax 调用，现在登录/身份验证步骤不再通过。该应用程序在 Firefox 和 Chromium 中仍可正常运行。

这是步骤和定义

**features/authentication.features**

```
Feature: Require Authentication
  In order to restrict access to the app
  A User
  Must be logged in

  Scenario: Accessing Tracks   
    Given I am not logged in   
    And I visit the "Tracks" page   
    Then I should see the "Welcome" page 
    And I should see "You need to be logged in to access this page"

  Scenario: Accessing Tracks when Logged in 
    Given I am logged in      
    And I visit the "Tracks" page   
    Then I should see the "Tracks" page 
```

**特征/step_definitions/register_and_login_steps.rb**

```
When(/^I log in as "(.*?)"$/) do |name|
  create_and_login(name)
end

When(/^I log in$/) do          
  create_and_login('tester')   
end

When(/^I log out$/) do         
  visit(logout_path)
end   

When(/^I should be logged out$/) do
  page.should have_title "Welcome"
  page.should have_text "Please log in"
end   

When(/^I am( not)? logged in$/) do |negative|
  if negative
    visit(logout_path)
  else
    create_and_login('anyone') 
    page.should have_title 'Welcome'
  end
end 
```

**特征/step_definitions/should_see_steps.rb**

```
When(/I should( not)? see the "(.*?)" page$/) do |negative, page_title|
  if negative
    page.should_not have_title page_title
  else
    page.should have_title page_title
  end 
end

When(/^I should( not)? see "(.*?)"$/) do |negative, text|
  if negative
    page.should_not have_text text
  else
  page.should have_text text
  end 
end

When(/^I visit the "(.*?)" page$/) do |page|
  path = page.downcase + "_path"
  visit_path(path)
end 
```

**功能/支持/帮助者/user.rb**

```
def password_for(user)
  user + '_password_'
end

def create_user(name)
  return if User.exists?(name: name)
  user = User.create!(name: name,
  password: password_for(name),
  password_confirmation: password_for(name)) 
end

def create_and_login(name)
  create_user(name)
  visit(logout_path)
  visit(login_path)
  fill_in 'Name', with: name 
  fill_in 'Password', with: password_for(name)
  click_button 'Login'
end 
```

**Gemfile**（仅限测试组）

```
group :test do 
  gem 'guard-spork', '~> 1.5.0'
  gem 'rb-inotify', '~> 0.9.0' 
  gem 'spork', '~> 0.9.2'

  gem 'guard-rspec','~> 2.5.0'

  gem 'cucumber-rails' , '~> 1.3.0'
  gem 'database_cleaner','~> 0.9.1'
  gem 'guard-cucumber', '~> 1.3.2'
  gem 'capybara', '~> 2.1.0'   
  gem 'selenium-webdriver', '~>2.31.0'
end 
```

日志/test.log

```
Connecting to database specified by database.yml
   (0.3ms)  begin transaction
Started GET "/logout" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by SessionsController#destroy as HTML
Redirected to http://127.0.0.1:42286/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (26.4ms)
  Rendered layouts/_player.html.haml (0.9ms)
Completed 200 OK in 64ms (Views: 63.6ms | ActiveRecord: 0.0ms)
Started GET "/assets/application.js" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Served asset /application.js - 200 OK (8ms)
Started GET "/assets/application.css" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Served asset /application.css - 200 OK (3ms)
Started GET "/tracks" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by TracksController#index as HTML
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."session" = '' LIMIT 1
Redirected to http://127.0.0.1:42286/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 62ms (ActiveRecord: 1.6ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (1.8ms)
  Rendered layouts/_player.html.haml (0.1ms)
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.0ms)
   (0.1ms)  rollback transaction
   (0.0ms)  begin transaction
  User Exists (1.1ms)  SELECT 1 AS one FROM "users" WHERE "users"."name" = 'anyone' LIMIT 1
   (0.0ms)  SAVEPOINT active_record_1
  User Exists (0.1ms)  SELECT 1 AS one FROM "users" WHERE "users"."name" = 'anyone' LIMIT 1
  User Exists (0.0ms)  SELECT 1 AS one FROM "users" WHERE "users"."session" IS NULL LIMIT 1
Binary data inserted for `string` type on column `password_digest`
Binary data inserted for `string` type on column `session`
  SQL (0.3ms)  INSERT INTO "users" ("admin", "created_at", "name", "password_digest", "session", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["admin", nil], ["created_at", Sun, 21 Apr 2013 23:57:49 UTC +00:00], ["name", "anyone"], ["password_digest", "$2a$10$2kPN1wqnXI/G9b/1KMR2x.7yCHCaKwftE7PXm/q4u9Q9bcWCTenMG"], ["session", "91e2394dcdc86ada3836b258ad6bd2c850f99e03"], ["updated_at", Sun, 21 Apr 2013 23:57:49 UTC +00:00]]
   (0.0ms)  RELEASE SAVEPOINT active_record_1
Started GET "/logout" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by SessionsController#destroy as HTML
Redirected to http://127.0.0.1:42286/login
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:49 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (0.9ms)
  Rendered layouts/_player.html.haml (0.0ms)
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:50 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (0.9ms)
  Rendered layouts/_player.html.haml (0.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started POST "/sessions" for 127.0.0.1 at 2013-04-22 01:57:50 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "session"=>{"name"=>"anyone", "password"=>"[FILTERED]"}, "commit"=>"Login"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."name" = 'anyone' LIMIT 1
Redirected to http://127.0.0.1:42286/login
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:50 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (0.8ms)
  Rendered layouts/_player.html.haml (0.1ms)
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
Started GET "/tracks" for 127.0.0.1 at 2013-04-22 01:57:50 +0200
Processing by TracksController#index as HTML
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."session" = '' LIMIT 1
Redirected to http://127.0.0.1:42286/login
Filter chain halted as :require_login rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/login" for 127.0.0.1 at 2013-04-22 01:57:50 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.haml within layouts/application (27.5ms)
  Rendered layouts/_player.html.haml (0.0ms)
Completed 200 OK in 29ms (Views: 28.9ms | ActiveRecord: 0.0ms)
   (0.1ms)  rollback transaction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:52:31.830

修复方法是不将 selenium 设置为默认的 capybara 驱动程序，并使用 @javascript 标记需要 ajax 的测试。

# css - WordPress相对定位和页面高度CSS问题

> ID：16137525
> 
> 赞同：0
> 
> 时间：2013-04-22T00:01:10.600
> 
> 标签：css, wordpress

我正在使用`position:relative`and`top:-120px`将标题背景图像移动到两个标题下方`<div/>`，效果很好。然后我必须将包装器`<div/>`和页脚设置`<div/>`为相对，并将它们都向上移动 120 像素以正确对齐。问题是页面底部的页脚下方现在有 120 像素的额外空间。有没有一种简单的方法可以删除那个空间？或者也许有不同的方式使用 CSS 和`position`属性来实现这个结果？这是我的网站：

[http://ledvideowall.net](http://ledvideowall.net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:20:54.160

这是修复：

```
.wrapper {
    top: 0;
}
.site-header {
    margin-bottom: -120px;
}    
footer[role="contentinfo"]{
    top:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:42:46.817

我要说`#headerbg`不需要存在，但是我看到您正在使用图像来保持页眉的高度/宽度比，因为页面尺寸减小了。
当我需要做这样的事情时，我根本不放置 " `background-image`" 在这种情况下，而是制作包装器`position:relative`和`#headertop`& `#menubar` `position:absolute`。这将顶部和菜单从流程中取出并`background image`完成工作。

```
.site-header {
  position:relative;
  ...
}
#headertop {
 position:absolute;
 top:0;
 left:0;
 width:100%;
 z-index:1;
...
}
#menubar {
 position:absolute;
 top:80px;
 left:0;
 width:100%;
 z-index:1;
 ...
}
#headerbg {
 display:block;
 height:auto;
 width:100%;
 /*
 position: relative;
 top: -120px;
 z-index: 0;
 */
}
#headerbg img {
 display:block;
 width:100%;
 height:auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:29:50.570

您可以申请`margin-bottom`恢复相对位置导致的效果：

```
footer[role="contentinfo"]{
    margin-bottom: -120px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:30:47.903

如果您有意将页脚向上移动 120 像素，则可以执行此操作以删除其下方的空白区域。

```
footer[role="contentinfo"] {
    margin-bottom: -120px;
} 
```

# android - Android 获取位置无法正常工作

> ID：16137527
> 
> 赞同：0
> 
> 时间：2013-04-22T00:01:24.253
> 
> 标签：android, gps, location, locationmanager

我试图获取位置并且代码有效，但它无法正常工作。这是我的代码

```
 // Get the location manager
    LocationManager locationManager = (LocationManager)                 
    getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String bestProvider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(bestProvider);

    try {
        lat =  (int)Math.round((location.getLatitude () * 1e6) ) ;
        lon =   (int)Math.round((location.getLongitude() * 1e6) ) ;
    }
    catch (NullPointerException e){
        lat = -1;
        lon = -1;
    } 
```

问题是当我使用foursqure 或facebook 时，他们直接获取位置，但我的应用程序返回-1，-1（有时），有时它会准确找到位置。可能是什么问题，或者我该如何改进以更好地获得当前位置？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:05:54.177

您应该实现 LocationListerner 并请求位置更新。获得修复后，您可以删除位置更新。[您可以在http://developer.android.com/reference/android/location/LocationListener.html](http://developer.android.com/reference/android/location/LocationListener.html)阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:18:47.327

对 getLastKnownLocation 的调用有时会返回 null，如[Andorid 文档](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String))中所指定。所以有时该代码确实会产生 lat=lon=-1。此外，getBestProvider 是一种确定最能满足给定标准的提供者的方法。由于您没有指定任何标准，因此合乎逻辑的结论是所有提供者都同样出色，因此结果可能是随机的。最后，请注意 lat=-1 和 lon=-1 是一个有效的位置，所以通常它不是标记错误的好方法。

正如此处另一个答案中所建议的那样，您应该实施[http://developer.android.com/reference/android/location/LocationListener.html](http://developer.android.com/reference/android/location/LocationListener.html)。然后，您遇到了使用哪些提供程序的问题。我的方法是全部使用它们并使用一个简单的卡尔曼滤波器来处理不同供应商在不同时间具有不同准确度的事实。我在这里发布了用于此的简单卡尔曼滤波器[平滑 GPS 数据](https://stackoverflow.com/questions/1134579/smooth-gps-data/15657798#15657798)

# php - 如何判断字符串在元值中是空的还是空的？

> ID：16137528
> 
> 赞同：1
> 
> 时间：2013-04-22T00:01:31.290
> 
> 标签：php, html, wordpress, if-statement

我试图弄清楚如何找到确保字符串不为空或为空然后执行代码。我从中提取值的地方是一个元值，它是从 wordpress 帖子页面上的元框存储的。

我想检查这是否返回一个空值或空值，如果它没有在之后执行代码：

```
<?php echo esc_attr( get_post_meta($post->ID, 'newtheme_section_id', true) ); ?> 
```

上面的代码检索用户在帖子页面上的元框中输入的值。

我在想我会删除回声并创建一个变量来保存 get_post_meta 的输出，然后以某种方式检查该变量是空还是空。

我实际上已经在 Wordpress Stack Exchange 网站上发布了它，但它更像是一个 php 问题，所以我把它发布在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:28:24.567

您可以使用以下功能之一检查其是否为空

```
isset($var) 
```

如果设置了变量，则返回 TRUE。

或者有了这个

```
empty($var) 
```

如果变量为空，则返回 TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T17:49:17.270

我只是在使用 Toolset 中的 WP Types & Fields 插件时尝试过这个。

`isset($var)`没有正常工作。即使是空字段也返回 true。

`empty($var)`确实工作正常。

您还可以测试字符串的长度。

# c++ - 删除指向指针的向量指针时出错

> ID：16137529
> 
> 赞同：0
> 
> 时间：2013-04-22T00:01:39.887
> 
> 标签：c++, std

你觉得这个功能怎么样？

```
void deleteVector(vector<Persistent*> *v) {
    if (v) {
        for (int i = 0; i < v->size(); i++)
            delete v[i];
        delete v; 
    }
} 
```

我不断收到以下错误：

*   test.cpp：在成员函数'void Koala::ListAddressAction::deleteVector(std::vector >*)'中：

*   test.cpp:160: 错误: 类型 'class std::vector >' 参数赋予'delete'，预期指针 test.cpp: 在成员函数'virtual void Koala::ListAddressAction::execute()'中：

*   test.cpp:176: 错误: 没有匹配函数调用'Koala::ListAddressAction::deleteVector(std::vector >*&)'

*   test.cpp:157：注意：候选人是：void Koala::ListAddressAction::deleteVector(std::vector >*)

我认为这是因为我从 [] 运算符获得了引用...但我不知道如何解决它...

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:03:23.183

`v`是一个指针，所以你需要在使用下标运算符之前取消引用它：

```
for (int i = 0; i < v->size(); i++)
    delete (*v)[i];
//         ^^^^ 
```

或者，您可以使用显式运算符语法：

```
delete v->operator[](i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:03:37.133

`v`是您要传入的指针。当您这样做时，`v[i]`您正在访问`i`th `vector`。真的，你只有一个向量，你想要`delete`它的元素。为此，首先取消引用指针：

```
delete (*v)[i]; 
```

# php - 将一个单词放在单词末尾的字符串中

> ID：16137530
> 
> 赞同：0
> 
> 时间：2013-04-22T00:02:10.470
> 
> 标签：php, string

我正在尝试编写一个函数，该函数将通过以下方式修改字符串：

如果字符串的开头有'The'，我想把它剪掉并在字符串的末尾添加', The'。

我的代码不起作用 - 我想知道如何修复它以使其正常工作。

```
<?php

    $string = 'Wonderful World of Disney';
    $search_term = 'The ';
    $str_replace = ', The';
    $pos = strpos($string, $search_term);
    if ($pos==0 && strlen($string) > 4) {
        $clean_str = substr($string, 4, strlen($string));
        $clean_str = $clean_str . $str_replace;
        echo $clean_str;
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T00:03:36.870

对于此任务，使用正则表达式可能会更好：

```
$clean_str = preg_replace('/^The (.*)$/', '$1, The', $string); 
```

此外，您的代码不起作用，因为您需要对以下结果进行[严格比较](http://php.net/manual/language.operators.comparison.php)[`strpos()`](http://php.net/strpos)：

```
if ($pos === 0 && strlen($string) > 4) {
// ... 
```

# bamboo - 通过竹代理服务最大化窗口不起作用

> ID：16137532
> 
> 赞同：0
> 
> 时间：2013-04-22T00:02:34.433
> 
> 标签：bamboo

我正在使用下面的代码来最大化浏览器窗口。

```
 obj =  Win32API.new("user32.dll", "FindWindow", ['P','P'], 'i')
  hwnd = obj.call(classname, winname)

  wndConsole = Win32API.new( "user32.dll" , "ShowWindow" , ['i' , 'i'] , 'i' )
  result = wndConsole.call( hwnd , 3 ) 
```

如果我通过命令行启动竹子，它们工作得很好。但是如果我通过服务启动竹子，它们就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T20:50:15.063

这可能是我遇到的问题，也可能不是，但如果 Bamboo 作为服务运行，您已授予它 GUI 访问权限，则可用的最大分辨率为 800x600。

# c - 什么更有效率？

> ID：16137533
> 
> 赞同：-2
> 
> 时间：2013-04-22T00:02:34.747
> 
> 标签：c, function

什么更有效率？为什么？

选项1：

```
int n = someFunction();
for (int i = 0; i < n ; i++)
    //do something... 
```

选项 2：

```
for (int i = 0; i < (someFunction()); i++)
    //do something... 
```

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T00:05:25.830

这两个循环甚至不等价：如果`someFunction()`多次调用它时期望返回不同的值，结果会有所不同。

当`someFunction()`无论调用多少次都返回相同的值时，第一个选项在`someFunction()`返回大于或等于的数字时会更有效`1`。如果它返回`0`，则没有区别。

时间上的差异来自第二个选项`someFunction()`在循环中重复调用以获得限制的事实。即使函数调用非常快，这段代码也是次优的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T00:05:12.713

前者总是至少和后者一样有效。对于前者，您只需评估`someFunction`一次。对于后者，您在每次迭代时都调用它。

在后一种情况下，一个聪明的编译器可能能够内联 的主体`someFunction`并意识到它可能是一个常量，使其有效地相等，但第一个永远不会变慢。

有时我会做这样的事情，借用 JavaScript 的约定：

```
for(size_t i = 0, l = someFunction(); i < l; i++) {
    // ...
} 
```

这实际上与第一个版本相同，只是像第二个版本更简洁一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T00:05:09.067

对于第一次调用时返回大于零的值`SomeFunction()`的一般情况，选项 1 的调用次数较少。`someFunction()`因此，它会更有效率。

选项 2 不能被优化，除非编译器可以看到它的主体`someFunction()`并且可以确定它总是返回相同的值，而不管`...do something...`代码中发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:45:47.267

第一个是有效的，因为它比较 i 和一个常数来评估 for 循环条件，但是第二个 for 循环每次迭代都会评估 someFunction() 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T00:05:02.970

第一个效率更高，因为它只检查 someFunction 一次。在第二个中，对于每个循环，它一遍又一遍地检查 someFunction()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T00:05:43.260

如果 的输出`someFunction()`不随时间变化，则选项 1 更有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T00:06:37.453

首先，选项 1 的语法错误，`for`循环缺少右括号。所以不会编译。

其次，选项 2 肯定更昂贵，并且可能完全错误，因为您`someFunction()`重复调用，而不是调用一次并使用返回值来限制。

# sql - Django：在使用这种多对多关系之前，对象需要具有字段“...”的值

> ID：16137534
> 
> 赞同：3
> 
> 时间：2013-04-22T00:02:43.620
> 
> 标签：sql, django, postgresql, many-to-many, models

我在使用 Django 1.5 时遇到了一个奇怪的错误：我定义了如下模型：

```
class Company(models.Model): 
    user = models.OnetoOneField(User)
    agreed_to_terms = models.NullBooleanField(default=False) 
    address = models.CharField(_('Complete Address'), 
            max_length = 255, null = True, blank = True) 
    winning_bid = models.ForeignKey('Bid', 
            related_name='winning_bid', 
            blank = True, null = True)
    bid_list = models.ManyToManyField('Bid', 
            related_name='bids', 
            blank = True, null = True)
    ...

class Bid(models.Model):
    user = models.ForeignKey(User, null = True, blank = True)
    description = models.TextField(_('Description'), 
                            blank = True, null = True,)
    volume = models.DecimalField(max_digits=7, decimal_places=3,
            null=True, blank=True,)
    ...
    # all other attributes are of the Boolean, CharField or DecimalField type. No Foreignkeys, nor ManytoManyFields. 
```

当我尝试通过 Django 管理员使用初始数据提交表单时，我收到以下错误： **异常值：
“”需要为字段“公司”设置一个值，然后才能使用这种多对多关系。**

请参阅下面的回溯。错误消息对我来说没有多大意义。唯一的 m2m 关系是`bid_list`，在保存时它是`null = True`空的。Django 1.5 中有什么新东西，我在阅读变更日志时没有发现（这是我在 Django 1.5 中的第一个项目）？

有趣的是，当我将对象保存在 中时`Django shell`，我没有收到错误消息，但对象不会在没有任何错误消息的情况下保存。

```
In [1]: user = User.objects.get(username='admin') 
In [2]: new_company = Company() 
In [3]: new_company.user = user 
In [4]: new_company.save() Out[4]: <Company: Company object> 
In [5]: foo = Company.objects.all()
Out[5]: [] 
```

当我尝试使用 跟踪 SQL 语句时`debug toolbar`，我只能看到 SQL SELECT 语句，没有 INSERT 请求。

**这种奇怪行为的解释是什么？**

追溯：

```
Request Method: POST
Request URL: /admin/company/company/add/

Django Version: 1.5.1
Python Version: 2.7.1
Installed Applications:
('django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.gis',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'crispy_forms',
 'django_extensions',
 'easy_thumbnails',
 'registration',
 'south',
 'company',
 'bid',
 'debug_toolbar')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/contrib/admin/options.py" in wrapper
  372\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/contrib/admin/sites.py" in inner
  202\.             return view(request, *args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/db/transaction.py" in inner
  223\.                 return func(*args, **kwargs)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/contrib/admin/options.py" in add_view
  1008\.                 self.save_related(request, form, formsets, False)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/contrib/admin/options.py" in save_related
  762\.         form.save_m2m()
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/forms/models.py" in save_m2m
  84\.                 f.save_form_data(instance, cleaned_data[f.name])
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/db/models/fields/related.py" in save_form_data
  1336\.         setattr(instance, self.attname, data)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/db/models/fields/related.py" in __set__
  910\.         manager = self.__get__(instance)
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/db/models/fields/related.py" in __get__
  897\.             through=self.field.rel.through,
File "/Users/neurix/Development/virtual/lib/python2.7/site-packages/django/db/models/fields/related.py" in __init__
  586\.                                  (instance, source_field_name))

Exception Type: ValueError at /admin/company/company/add/
Exception Value: "<Company: Company object>" needs to have a value for field "company" before this many-to-many relationship can be used. 
```

设置.py

```
import os, os.path, sys
DEBUG = True
TEMPLATE_DEBUG = DEBUG

# Setting up folders
abspath = lambda *p: os.path.abspath(os.path.join(*p))
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
TASK2_MODULE_PATH = abspath(PROJECT_ROOT, 'apps/')
sys.path.insert(0, TASK2_MODULE_PATH)

# Loading passwords
try:
    from settings_pwd import *
except ImportError:
    pass
AUTH_PROFILE_MODULE = 'profile.UserProfile'
#ALLOWED_HOSTS = [''] # not needed for DEBUG = True
TIME_ZONE = 'Europe/London'
LANGUAGE_CODE = 'en-uk'
LANGUAGES = [
        ("en", u"English"),
        ]
SITE_ID = 1
USE_I18N = True
USE_L10N = True
USE_TZ = True
if DEBUG:
    MEDIA_ROOT = os.path.join(PROJECT_ROOT, "site_media", "media")
else:
    MEDIA_ROOT = "folder_to_upload_files"
if DEBUG:
    MEDIA_URL = "/media/"
else:
    MEDIA_URL = "/media/uploads/"
if DEBUG:
    STATIC_ROOT = os.path.join(PROJECT_ROOT, "site_media","static")
else:
    STATIC_ROOT = "folder_to_static_files" 
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, "assets"),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)
SECRET_KEY = '...'
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',)
ROOT_URLCONF = 'task2.urls'
WSGI_APPLICATION = 'task2.wsgi.application'
TEMPLATE_DIRS = (
    os.path.join(PROJECT_ROOT, "templates"),
    os.path.join(PROJECT_ROOT, "templates/pages"),)
INSTALLED_APPS = (
    # Django apps
    'django.contrib.admin',
    'django.contrib.admindocs',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.gis',
    'django.contrib.humanize',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
    # third party apps
    'crispy_forms',
    'django_extensions',
    'easy_thumbnails',
    'registration',
    'south',

    # task2 apps
    'profile',
    'company',
)
AUTHENTICATION_BACKENDS = (
    'django.contrib.auth.backends.ModelBackend',
)

log = DEBUG 

if log:
    LOGGING = { 
        'version': 1,
        'disable_existing_loggers': True,
        'formatters': {
            'simple': {
                'format': '%(levelname)s %(message)s',
                },  
            },  
        'handlers': {
            'console':{
                'level':'DEBUG',
                'class':'logging.StreamHandler',
                'formatter': 'simple'
                },  
            },  
        'loggers': {
            'django': {
                'handlers': ['console'],
                'level': 'DEBUG',
                },  
            }   
        }    
####################
# THIRD PARTY SETUPS

# For Crispy Forms
CRISPY_FAIL_SILENTLY = not DEBUG
CRISPY_TEMPLATE_PACK = 'bootstrap'

## For Django Registration
ACCOUNT_ACTIVATION_DAYS = 7

# for Django testing to avoid conflicts with South migrations
SOUTH_TESTS_MIGRATE = False

# Debug_toolbar settings
if DEBUG:
    INTERNAL_IPS = ('127.0.0.1',)
    MIDDLEWARE_CLASSES += (
        'debug_toolbar.middleware.DebugToolbarMiddleware',
    )

    INSTALLED_APPS += (
        'debug_toolbar',
    )

    DEBUG_TOOLBAR_PANELS = (
        'debug_toolbar.panels.version.VersionDebugPanel',
        'debug_toolbar.panels.timer.TimerDebugPanel',
        'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
        'debug_toolbar.panels.headers.HeaderDebugPanel',
        #'debug_toolbar.panels.profiling.ProfilingDebugPanel',
        'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
        'debug_toolbar.panels.sql.SQLDebugPanel',
        'debug_toolbar.panels.template.TemplateDebugPanel',
        'debug_toolbar.panels.cache.CacheDebugPanel',
        'debug_toolbar.panels.signals.SignalDebugPanel',
        'debug_toolbar.panels.logger.LoggingPanel',
    )

    DEBUG_TOOLBAR_CONFIG = {
        'INTERCEPT_REDIRECTS': False,
    }

# Easy_Thumbnail setup
THUMBNAIL_ALIASES = {
    '': {
        'thumbnail': {'size': (50, 50), 'crop': True},
    },
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-10T19:40:36.593

问题与您如何使用视图有关。我认为您正在使用： `instance.add(many_to_many_instance)` 在您拥有实例ID之前。

所以首先保存你的模型：

```
instance.save()
instance.add(many_to_many_instance) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:28:24.827

您正在使用自定义用户模型 AUTH_PROFILE_MODULE = 'profile.UserProfile'，但在代码中我想您使用的是本机 django 用户。

我想你的模型应该像

```
class Company(models.Model): 
    user = models.OnetoOneField('profile.UserProfile')
... 
```

阅读更多[https://docs.djangoproject.com/en/1.5/ref/contrib/auth/#django.contrib.auth.models.User.get_profile](https://docs.djangoproject.com/en/1.5/ref/contrib/auth/#django.contrib.auth.models.User.get_profile)

# javascript - 如何在 Javascript 中分配数字？

> ID：16137536
> 
> 赞同：-6
> 
> 时间：2013-04-22T00:02:58.350
> 
> 标签：javascript

我正在用 Javascript 构建一个风险计算器程序，为此，我的等级为 1-3，零表示无风险，三表示风险最高。对于每个选项（年龄、性别、BMI、血压、温度、吸烟量等），我将为它们分配一个数字 (0-3)，并使用该数字来确定风险百分比。

示例：年龄：

18-39 = 0 代表风险

40+ = 2 风险

无论用户选择哪个年龄作为他们的年龄都会增加他们的个人百分比。

我怎样才能编写这个程序？

```
List<StringWithValue> stringList == new ArrayList<StringWithValue>(); 
    int myRisk;
   // no risk  = "0";
    //some risk = "1";
   // risk = "2";
   //abnormal risk = "3";
   var a = "0", b = "1", c = "2", d = "3"

   if(message == "Age") {
      alert("Ages 18 to 39 have a lower risk of cancer" + '\n\n' + 
      "Than for those over 40.");

      StringAge = "18-39";
       StringValue = "a";
       System.out.println("Age" = "a");

       StringAge_2 = "40-80";
       StringValue = "c";
       System.out.println("Age_2" = "c");

   } else if(message =="Sex") {
       alert("Choose your biological gender" + '\n\n' + "Males are more likely to develop" +
            " lung cancer than females.");

   } else if(message == "Systolic Blood Pressure") {
           alert("Low blood pressure is anything below 100" + 'n\n' + "Normal range is 120-130" +
   "High blood pressure is over 135.");

   } else if(message =="Diastolic Blood Pressure") {
       alert("Low blood pressure is anything below 70" + 'n\n' +"Normal range is 80-85" + 
   "High blood pressure is over 90.");

   } else if(message =="Temperature") {
       alert("Below 98.6 degrees Fahrenheit/37 degrees Celsius is unhealthy" + 'n\n' + "Normal range is at exactly 98.6 degrees/37 degrees Celsius" +
   "Anything above 98.6 degrees Fahrenheit/37 degrees Celsius is abnormal.");

   } else if(message =="Race") {
       alert("African Americans have a higher chance of lung cancer" + 'n\n' + "Followed by Caucasians" +
   "Asians, Pacific Islanders, Hispanics, and Native Americans have a low percentage.");

   }
   else if(message == "family") {
      alert("Family History of Lung Cancer" + '\n\n' +
      "Choose Yes if an immediate family member had " +
      "lung cancer.");

      "Note: The Calculator is only applicable for persons without a previous diagnosis of lung cancer.");

   }
}

function radiobtnchange(units){
    if(units == "Standard"){
        document.getElementById('lblHeightUnits').innerHTML = "in";
        document.getElementById('lblWeightUnits').innerHTML = "lbs";
    }
    if(units == "Metric"){
        document.getElementById('lblHeightUnits').innerHTML = "cm";
        document.getElementById('lblWeightUnits').innerHTML = "kg";
    }   
}

function clearAllFields(theForm) {
   if(theForm.age) clearObjValue(theForm.race);
   if(theForm.sex) clearObjValue(theForm.pca3);
   if(theForm.systolic_blood_pressure) clearObjValue(theForm.free_psa);
   if(theForm.diastolic_blood_pressure) clearObjValue(theForm.pro_psa);
   if(theForm.bmi) clearObjValue(theForm.height);
   if(theForm.temperature) clearObjValue(theForm.weight);
   if(theForm.prostate_volume) clearObjValue(theForm.prostate_volume);
   if(theForm.num_biopsy_cores) clearObjValue(theForm.num_biopsy_cores);
   if(theForm.aua_symptom_score) clearObjValue(theForm.aua_symptom_score);
   if(theForm.age) clearObjValue(theForm.age);
   if(theForm.psa) clearObjValue(theForm.psa);
   if(theForm.familyhistory) clearObjValue(theForm.familyhistory);
   if(theForm.dre) clearObjValue(theForm.dre);
   if(theForm.biopsy) clearObjValue(theForm.biopsy);
   if(theForm.finasteride) clearObjValue(theForm.finasteride); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:27:34.333

我为你设置了一个[jsfiddle](http://jsfiddle.net/v5fy6/7/)。您可以插入您的逻辑来计算剩余字段的风险并清理 html。

**JavaScript**

```
var risk = {
    'none': 0,
    'low': 1,
    'high': 2,
    'abnormal': 3
};

var myRsk = 0;

function getValue(name) {
    return document.getElementsByName(name)[0].value;
}

function calculateRisk() {
    age = getValue('iAge');
    gender = getValue('iGender');
    sbp = getValue('iSBP');
    dbp = getValue('iDBP');
    temp = getValue('iTemp');
    race = getValue('iRace');
    family = getValue('iFamily');

    myRisk = 0;
    myRisk += calculateAge(age);
    myRisk += calculateGender(gender);
    myRisk += calculateSBP(sbp);
    myRisk += calculateDBP(sbp);
    myRisk += calculateTemp(temp);
    myRisk += calculateRace(race);
    myRisk += calculateFamily(family);
    myRisk = parseFloat(myRisk / 21 * 100).toPrecision(4);

    alert('Your Risk = ' + myRisk + '%');
}

function calculateAge(age) {
    val = parseInt(age)
    if (val > 80) return risk['abnormal'];
    else if (val > 60) return risk['high'];
    else if (val > 40) return risk['low'];
    else return parseInt(risk['none']);
}

function calculateGender(gender) {
    return parseInt(risk['low']);
}

function calculateSBP(sbp) {
    return parseInt(risk['low']);
}

function calculateDBP(dbp) {
    return parseInt(risk['low']);
}

function calculateTemp(temp) {
    return parseInt(risk['low']);
}

function calculateRace(race) {
    return parseInt(risk['low']);
}

function calculateFamily(family) {
    return parseInt(risk['low']);
} 
```

**HTML**

```
<form>
    <div class="item" title="Ages 18 to 39 have a lower risk of cancer than for those over 40.">
        <label>Age</label>
        <input name="iAge" type="text" />
    </div>
    <div class="item" title="Choose your biological gender. Males are more likely to develop lung cancer than females.">
        <label>Gender</label>
        <input name="iGender" type="text" />
    </div>
    <div class="item" title="Low blood pressure is anything below 100\. Normal range is 120-130\. High blood pressure is over 135.">
        <label>Systolic Blood Pressure</label>
        <input name="iSBP" type="text" />
    </div>
    <div class="item" title="Low blood pressure is anything below 70\. Normal range is 80-85\. High blood pressure is over 90.">
        <label>Diastolic Blood Pressure</label>
        <input name="iDBP" type="text" />
    </div>
    <div class="item" title="Below 98.6 degrees Fahrenheit/37 degrees Celsius is unhealthy Normal range is at exactly 98.6 degrees/37 degrees Celsius">
        <label>Temperature</label>
        <input name="iTemp" type="text" />
    </div>
    <div class="item" title="African Americans have a higher chance of lung cancer; followed by Caucasians, Asians, Pacific Islanders, Hispanics, and Native Americans have a low percentage.">
        <label>Race</label>
        <input name="iRace" type="text" />
    </div>
    <div class="item" title="Family History of Lung Cancer. Choose Yes if an immediate family member had lung cancer. Note: The Calculator is only applicable for persons without a previous diagnosis of lung cancer.">
        <label>Family</label>
        <input name="iFamily" type="text" />
    </div>
    <input type="button" value="Calculate" onclick="calculateRisk()" />
</form> 
```

**CSS**

```
label {
    width: 160px;
    float: left;
}
input[type='text'] {
    vertical-align:middle;
}
.item {
    margin-bottom:1.5em;
    clear:both;
    overflow:hidden;
} 
```

# arduino - 从 Pure Data 向 Arduino 发送信息

> ID：16137539
> 
> 赞同：1
> 
> 时间：2013-04-22T00:03:21.557
> 
> 标签：arduino, puredata

我刚刚拿到一个 Arduino 并开始玩弄它。我已经按照[本教程](http://nf-interactive.blogspot.com.au/2011/02/pure-data-to-arduino.html)进行操作，并设法让这个简单的补丁正常工作。我稍微修改了 PD 补丁，以便在敲击连接到底鼓的砰砰声时触发端口 9 上的 LED：

![照片1](https://photos-6.dropbox.com/t/0/AADqY7twD7e9Cub4V2LR8Y3CrWeCTwm-Bl9mWJDOFcWRJQ/12/112214675/jpeg/32x32/3/_/1/2/ardpd1.jpg)

这行得通，但我现在遇到了障碍。我想要 1 bang (Kick) 来触发端口 9 上的 1 个 LED，就像现在一样，但我也想要另一个 bang，连接到一个军鼓来触发端口 8 上的另一个 LED。我完全不知道这个怎么做。我敢肯定这不是太难，但我对编码非常缺乏经验。我已经尝试过编写代码，但它不起作用，我不确定我还需要向 PD 添加什么。

这是我尝试做的事情：

![照片2](https://photos-2.dropbox.com/t/0/AAD9LKuSeUQG-89tDNKSyOjKWNmej5u6DgHSDHf7SF9-lA/12/112214675/jpeg/32x32/3/_/1/2/ardpd2.jpg)

但它不起作用。

请问有人可以帮我吗？

感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T19:23:46.967

在您参考的教程中，您为要在 Pd 补丁中执行的操作编写自定义 Arduino 草图。另一种方法是将一种固件草图上传到Arduino，它将Arduino变成一个多功能界面。然后，您可以根据需要将数字端口设置为输入、输出或 PWM。有人为你做了这件事，它被称为 Firmata。Firmata 包含在 Arduino 中，您可以在示例中找到它。将标准 Firmata 上传到您的 Arduino，然后使用 Pd 中的 Arduino 对象来控制它。

# r - R 的 randomForest() 函数错误 - 我可以通过什么方式获取更多信息？

> ID：16137554
> 
> 赞同：1
> 
> 时间：2013-04-22T00:05:30.520
> 
> 标签：r, random-forest

我收到“新数据中的预测变量类型与训练数据中的预测变量类型不匹配”的错误消息。

这让我很困惑，因为我能够在 rpart 和 ctree 下获得相同的数据集。这些函数足够方便地报告导致错误的因素，因此很容易调试。现在我不确定我的许多维度中的哪些因素导致了问题。

有没有一种简单的方法可以知道哪些列/变量正在抛出 randomForest？

物有所值：

```
> write.csv(predict(object=train_comp.rp, newdata = test_w_age, type = c("prob")), file="test_predict_rp_w_age.csv")
> write.csv(predict(object=train_comp.rf, newdata = test_w_age, type = c("prob")), file="test_predict_rf_w_age.csv")
Error in predict.randomForest(object = train_comp.rf, newdata = test_w_age,  : Type of predictors in new data do not match that of the training data. 
```

# html - 为什么我的图片没有显示在我的网页中？

> ID：16137555
> 
> 赞同：-1
> 
> 时间：2013-04-22T00:05:37.490
> 
> 标签：html, image, webmatrix, webmatrix-2

我修改了 WebMatrix 项目中的 _SiteLayout.cshtml 文件，使其包含以下行：

```
<p class="site-title"><a <img src="~/Images/Thumbnails/Landscapes/Fall_2012 10 14_0702_th.jpg" />your logo here</a></p> 
```

...但图像未显示。为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:06:47.747

你有：

```
<a <img src="(snip)" />your logo here</a> 
```

你应该有：

```
<a><img src="(snip)" />your logo here</a> 
```

# python - Windows subprocess.Popen 没有 shell=True 的批处理文件

> ID：16137556
> 
> 赞同：4
> 
> 时间：2013-04-22T00:05:41.710
> 
> 标签：python, windows, shell, subprocess

我有一个运行`lessc`（安装`npm install -g less`）的功能：

```
>>> import subprocess
>>> subprocess.Popen(['lessc'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python27\lib\subprocess.py", line 896, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

不幸的是，除非我添加，否则它不起作用`shell=True`：

```
>>> subprocess.Popen(['lessc'], shell=True)
<subprocess.Popen object at 0x01F619D0> 
```

我可以做些什么来`lessc`运行而不使用`shell=True`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-11T11:59:47.137

来自[https://docs.python.org/3/library/subprocess.html#subprocess.Popen](https://docs.python.org/3/library/subprocess.html#subprocess.Popen)和[https://docs.python.org/2/library/subprocess.html#subprocess.Popen](https://docs.python.org/2/library/subprocess.html#subprocess.Popen)：

> 您不需要`shell=True`运行批处理文件或基于控制台的可执行文件。

正如@JBernardo 已经[引用的那样](https://stackoverflow.com/questions/16137556/windows-subprocess-popen-a-batch-file-without-shell-true#comment23054228_16137556)。

所以，让我们试试：

`where lessc`实际上告诉

```
C:\Users\myname\AppData\Roaming\npm\lessc
C:\Users\myname\AppData\Roaming\npm\lessc.cmd 
```

这意味着，要执行的文件是`lessc.cmd`，而不是某个`.bat`文件。事实上：

```
>>> import subprocess
>>> subprocess.Popen([r'C:\Users\myname\AppData\Roaming\npm\lessc.cmd'])
<subprocess.Popen object at 0x035BA070>
>>> lessc: no input files

usage: lessc [option option=parameter ...] <source> [destination] 
```

因此，如果您指定完整路径，这*确实有效。*[我想当你有这种经历](https://stackoverflow.com/questions/16137556/windows-subprocess-popen-a-batch-file-without-shell-true#comment23054022_16137556)时，有一个错字。可能是你写`.bat`的而不是`.cmd`？

* * *

如果您不想将完整路径修补`lessc`到脚本中，您可以自己烘焙`where`：

```
import plaform
import os

def where(file_name):
    # inspired by http://nedbatchelder.com/code/utilities/wh.py
    # see also: http://stackoverflow.com/questions/11210104/
    path_sep = ":" if platform.system() == "Linux" else ";"
    path_ext = [''] if platform.system() == "Linux" or '.' in file_name else os.environ["PATHEXT"].split(path_sep)
    for d in os.environ["PATH"].split(path_sep):
        for e in path_ext:
            file_path = os.path.join(d, file_name + e)
            if os.path.exists(file_path):
                return file_path
    raise Exception(file_name + " not found") 
```

然后你可以写：

```
import subprocess
subprocess.Popen([where('lessc')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T21:42:52.523

将文件更改为lessc.bat，或创建调用lessc 的.bat 文件。这样该文件将被 Windows 识别为批处理文件并正确执行。

除此之外，您可能还需要设置 cwd，具体取决于 .bat 文件的位置。

# mysql - 带有 WHERE 子句的 MySQL 查询，但如果没有结果则删除条件？

> ID：16137558
> 
> 赞同：0
> 
> 时间：2013-04-22T00:05:48.447
> 
> 标签：mysql

我目前正在通过来自 PHP 的两个单独的查询来执行此操作，但我希望以某种方式在单个查询中进行优化。

第一次查询..

```
SELECT `referrer` 
FROM `tbl_traffic_log` 
WHERE `domain` = 'mysite.com' 
  AND `referrer` != '$referringDomain' 
  AND CASE WHEN `clicks_in_unique`=0 THEN 2 ELSE `clicks_out_unique`/`clicks_in_unique` END < 1.4 
ORDER BY RAND() 
LIMIT 1 
```

..如果 mysql_num_rows 没有显示任何结果，我会进行第二次查询以重试并检查是否有任何结果减去`referrer`!= 'partner1.com' 部分。

该代码基本上是试图找到一个随机的贸易伙伴，该伙伴不是发送该点击的伙伴，但如果没有匹配项，作为最后的手段，只要它符合其他条件，就可以发回。

我很确定有办法做到这一点，但在搜索后找不到方法（可能是因为我对问题的理解不足以输入正确的内容）。

也欢迎对该查询的任何其他批评。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:09:23.280

我认为你可以这样做：

```
SELECT `referrer` 
FROM `tbl_traffic_log` 
WHERE `domain` = 'mysite.com' 
  AND CASE WHEN `clicks_in_unique`=0 THEN 2 ELSE `clicks_out_unique`/`clicks_in_unique` END < 1.4 
ORDER BY `referrer` != '$referringDomain' desc, RAND() 
LIMIT 1 
```

这个想法是将条件放在`order by`. 条件（在 MySQL 中）计算结果为 0 或 1，因此我们希望首先条件为真（因此是`desc`）。然后它选择一个随机行。如果没有条件为真的行，则它选择一个随机行。

# xml - Perl XML::LibXML 我哪里出错了

> ID：16137561
> 
> 赞同：0
> 
> 时间：2013-04-22T00:06:04.897
> 
> 标签：xml, perl

我在这里有一个相当愚蠢的时刻。问题是这是两天愚蠢的时刻，而且不认识任何了解 perl 的人，我在这里变得相当混乱。考虑以下代码：

```
 use strict;
  use warnings;
  use XML::LibXML;
  my $filename = 'f:\proxml\1561\15610024.xml';
    my $parser = XML::LibXML->new();
  my $doc    = $parser->parse_file($filename);

  for my $line ($doc->findnodes('Document/Page/Lines')) {
          for my $property ($line->findnodes('/Document/Page/Lines/OCRCharacters')) {
    print $property->textContent();
  }
  } 
```

我正在尝试打印 OCRCharacters 内容。这是 xml 文件的基本内容：

```
<Document>
  <Page>
    <Lines>
      <NumberOfLines>21</NumberOfLines>
      <LineNumber>1</LineNumber>
      <OCRCharacters>Test ocr in XML</OCRCharacters>
      <LineNumber>2</LineNumber>
      <OCRCharacters>This is the 2nd line</OCRCharacters>
    </Lines>
  </Page>
</Document> 
```

我在这里搜索了我的问题的答案，但我显然错过了一些非常基本的东西。如果您有解决方案，以及时间，请回来。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:37:17.300

```
$line->findnodes('/Document/Page/Lines/OCRCharacters') 
```

应该

```
$line->findnodes('OCRCharacters') 
```

* * *

```
use strict;
use warnings;
use XML::LibXML qw( );

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_fh(\*DATA);

for my $line ($doc->findnodes('/Document/Page/Lines')) {
   for my $property ($line->findnodes('OCRCharacters')) {
      print $property->textContent(), "\n";
   }
}

__DATA__
<Document>
  <Page>
    <Lines>
      <NumberOfLines>21</NumberOfLines>
      <LineNumber>1</LineNumber>
      <OCRCharacters>Test ocr in XML</OCRCharacters>
      <LineNumber>2</LineNumber>
      <OCRCharacters>This is the 2nd line</OCRCharacters>
    </Lines>
  </Page>
</Document> 
```

输出：

```
Test ocr in XML
This is the 2nd line 
```

# javascript - JavaScript/jQuery String Replace With Regex

> ID：16137562
> 
> 赞同：27
> 
> 时间：2013-04-22T00:06:18.973
> 
> 标签：javascript, jquery, regex

Let's say I retrieve the value of a `<textarea>` using jQuery. How can I then replace a portion of the value using JavaScript/jQuery. For example:

string: `"Hey I'm $$zach$$"`

replace `$$zach$$` with `<i>Zach</i>`

And still keep the rest of the string intact?

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-22T00:10:39.950

Use a regex replace:

```
yourTextArea.value = yourTextArea.value.replace(/\$\$(.+?)\$\$/, '<i>$1</i>') 
```

Explanation of the regex:

```
\$\$  two dollar signs
(     start a group to capture
.     a character
+     one or more
?     lazy capturing
)     end the group
\$\$  two more dollar signs 
```

The capture group is then used in the string `'<i>$1</i>'`. `$1` refers to the group that the regex has captured.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-22T00:12:44.703

Use this:

```
str.replace(/\${2}(.*?)\${2}/g, "<I>$1</I>"); 
```

```
\${2} matches two $ characters
(.*?) matches your string to be wrapped
\${2} same as above
/g matches globally 
```

[jsFiddle](http://jsfiddle.net/r5xAT/2/)

If you wanted something in jQuery:

```
$("#txt").val().replace(/\${2}(.*?)\${2}/g, "<I>$1</I>"); 
```

Markup:

```
<textarea id="txt">I'm $$Zach$$</textarea> 
```

[jsFiddle](http://jsfiddle.net/r5xAT/1/)

Wrap it in a function for best use:

```
var italics = function (str) {
    return str.replace(/\$\$(.*?)\$\$/g, "<I>$1</I>");
}

italics($("#txt").val()); 
```

Seems like you want to make a syntax similar to Markdown. Why not just use a Markdown parser for your fields instead of reinventing the wheel?

[Showdown JS](https://github.com/coreyti/showdown) is actively developed and you get the same Markdown syntax as with any other markdown syntax.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T00:10:08.123

Using the string `.replace` method will do.

```
.replace(/\$\$(.*?)\$\$/g, '<I>$1</I>') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-31T13:18:52.333

Use this, change link and tag for extended linkify function :

```
String.prototype.linkify = function() {
    var wikipediaPattern = /<wikipedia>(.+?)<\/wikipedia>/g; 
    return this.replace(wikipediaPattern, '<a href="http://fr.wikipedia.org/wiki/$1">$1</a>');
} 
```

# boost - 使用从 macports 安装的 gcc-mp-4.7 在山狮上构建提升时出错

> ID：16137571
> 
> 赞同：2
> 
> 时间：2013-04-22T00:06:57.097
> 
> 标签：boost, macports, gcc4.7, cpp-netlib

我遇到了一个非常非常棘手的问题。我的最终目标是构建 cpp-netlib。cpp-netlib 使用 C++-11，它在我的机器中使用原始 boost 构建引发链接器错误。我使用安装在我机器上的默认 gcc 构建 boost 的原因，它工作得很好。但是，按照[http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html) {第 5.2 节开始} 中给出的步骤似乎对我没有帮助。我收到这样的错误

```
..failed gcc.link.dll stage/lib/libboost_unit_test_framework.dylib...
...skipped <pstage/lib>libboost_thread.dylib for lack of <pbin.v2/libs/system/build/gcc-4.7      /release/threading-multi>libboost_system.dylib...
...skipped <pbin.v2/libs/chrono/build/gcc-4.7/release/threading-multi>libboost_chrono.dylib for 
lack of <pbin.v2/libs/system/build/gcc-4.7/release/threading-multi>libboost_system.dylib...
..skipped <pstage/lib>libboost_timer.dylib for lack of <pbin.v2/libs/chrono/build/gcc-4.7/release/threading-multi>libboost_chrono.dylib...
gcc.link.dll bin.v2/libs/date_time/build/gcc-4.7/release/threading-multi/libboost_date_time.dylib
ld: unknown option: -h
collect2: error: ld returned 1 exit status 
```

我在 user-config.jam 中添加了我的依赖项，指定了 mac-ports gcc 路径并使用工具集 gcc-4.7 调用 b2。我的最终目标是使用 cpp-netlib 进行 http 调用的应用程序，我也想在我的应用程序中使用 boost 正则表达式。

# javascript - Javascript - 函数上的函数？

> ID：16137572
> 
> 赞同：3
> 
> 时间：2013-04-22T00:06:59.060
> 
> 标签：javascript, node.js, kue

我最近使用了一个不错的 node.js 库，名为[Kue](https://github.com/LearnBoost/kue)。
我想更好地了解发生了什么，所以我开始阅读代码......

我偶然发现了一段代码，我的脑海里出现了“WTF !!?!@$@!$”......
这是代码：

```
function get(obj) {
  var pending = 0
    , res = {}
    , callback
    , done;

  return function _(arg){
    switch (typeof arg) {
      case 'function':
        callback = arg;
        break;
      case 'string':
        ++pending;
        obj[arg](function(err, val){
          if (done) return;
          if (err) return done = true, callback(err);
          res[arg] = val;
          --pending || callback(null, res);
        });
        break;
    }
    return _;
  };
} 
```

像这样使用的：

```
exports.stats = function(req, res){
  get(queue)
    ('inactiveCount')
    ('completeCount')
    ('activeCount')
    ('failedCount')
    ('delayedCount')
    ('workTime')
    (function(err, obj){
      if (err) return res.send({ error: err.message });
      res.send(obj);
    });
}; 
```

.
.
.

那些函数是函数吗？！
他们是如何认识彼此的？
函数第 7 行的“_”（下划线）是什么？

有人可以帮我了解那边发生了什么吗？:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T00:13:19.103

函数确实可以返回函数。以这个函数为例：

```
function func(text) {
    alert(text);
    return func;
} 
```

显然，任何调用的返回值`func`将再次为`func`，因此您可以像这样使用它：

```
func("hello")("world"); 
```

…你会收到两个警报：第一个是“hello”，然后是“world”。

接下来，有一种叫做*命名函数表达式*的东西。您之前可能见过匿名函数表达式：

```
doSomething(thing, function(err) {
    // operation completed or something
}); 
```

当然，这对于简单的事情非常有用，但有时您希望函数有一个名称，以便它可以引用自身。正如 Kolink 提到的，如果你只是想递归，有`arguments.callee`，它指的是当前正在执行的函数，但还有另一种方法：你可以给函数一个只在函数内可见的名称，同时仍然让它是一个函数表达式：

```
doSomething(thing, function myself(err) {
    //                      ^^^^^^
    // now I can refer to myself as myself!
}); 
```

下划线是一个有效的标识符，所以它们基本上只是以一种可能难以理解的方式组合这些技术。

# apache - 本地主机和服务器的单个 .htaccess（不仅重定向不同）

> ID：16137573
> 
> 赞同：2
> 
> 时间：2013-04-22T00:07:00.713
> 
> 标签：apache, .htaccess

我有一个非常愚蠢的使用 Apache 的 PHP 虚拟主机，这意味着我无法编辑 httpd.conf 文件来创建 VirtualHosts。所有配置都需要使用 .htaccess 文件完成。

我想为开发（本地主机）和实时服务器（但两种环境存在差异）使用单个 .htaccess 文件。

关于如何基于 HTTP_HOST 和使用 RewriteCond 进行不同的重定向，有很多答案。这对我没有用。

我需要在本地主机上以不同的方式做其他几件事（不仅仅是重定向）。这是我来自实时服务器的 .htaccess 示例：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    php_value session.save_path "/www/doc/...masked.../app/sessions"
    php_value session.gc_maxlifetime 86400
    php_value session.cookie_lifetime 86400
    php_value session.gc_probability 1
    php_value session.gc_divisor 1

    php_value pcre.recursion_limit 1000000
    php_value pcre.backtrack_limit 1000000000

    RewriteRule ^13/phpinfo.php$ index.php [L]

    # front controller
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule !\.(pdf|js|ico|gif|jpg|png|css|rar|zip|tar\.gz)$ index.php [L]
</IfModule> 
```

**请注意 php_value 调用。我不知道如何仅在实时服务器上执行它们。**而且我不想用 ini_set() PHP 调用“替换”它们（我的主机禁止这样做）。

有没有一种简单的方法可以在单个文件中执行此操作？问题的根源在于两个版本的文件很难管理，其中一个版本不能存储在本地（因为两个文件同名）。

我可以想到一个解决方法 - 在 localhost 上设置不同的 AccessName，例如`.localaccess`. 然后我可以在我的开发环境中同时拥有本地和服务器版本并更新它们。但是将规则放在一个文件中会好得多。

谢谢你的任何答案。

# asp.net - 在 ASP.Net 的 Highcharts 中使用 Credits 选项

> ID：16137574
> 
> 赞同：0
> 
> 时间：2013-04-22T00:07:08.593
> 
> 标签：asp.net, highcharts, credits

我正在学习如何使用 ASP.NET 使用 highcharts，但我遇到了一个问题。如何修改 credits 标签的默认值。

我正在使用这段代码，它对我很有用。

```
Chart1.Title = New Title("Titre de la chart")
    Chart1.SubTitle = New SubTitle("ALLAMI Said")

    Chart1.Legend.layout = Layout.vertical
    Chart1.Legend.align = Align.right
    Chart1.Legend.verticalAlign = VerticalAlign.top
    Chart1.Legend.borderWidth = 0
    Chart1.Legend.x = -10
    Chart1.Legend.y = 100

    Chart1.ShowCredits = True

    Chart1.YAxis.Add(New YAxisItem() With {.title = New Title("yAxis Titre")})
    Chart1.XAxis.Add(New XAxisItem() With {.categories = New Object() {"1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001", "2002"}})

    Dim series = New Collection(Of Serie)()

    series.Add(New Serie() With {.name = "Said", .data = New Object() {400, 435, 446, 479, 554, 634, 687, 750, 831}})
    series.Add(New Serie() With {.name = "Kati", .data = New Object() {120, 220, 320, 420, 320, 420, 320, 420, 500}})

    Chart1.DataSource = series
    Chart1.DataBind() 
```

我正在显示学分值

```
Chart1.ShowCredits = True 
```

但它显示了 highcharts 库的默认值，我该如何修改这些值？

我在等你的答案。

# php - 如何将句子拆分为单词和标点符号？

> ID：16137575
> 
> 赞同：4
> 
> 时间：2013-04-22T00:07:13.297
> 
> 标签：php, regex, string, preg-split, text-segmentation

例如，我想拆分这句话：

```
I am a sentence. 
```

成一个有 5 个部分的数组；`I`, `am`, `a`,`sentence`和`.`.

我目前正在`preg_split`尝试后使用`explode`，但我似乎找不到合适的东西。

这是我尝试过的：

```
$sentence = explode(" ", $sentence);
/*
returns array(4) {
  [0]=>
  string(1) "I"
  [1]=>
  string(2) "am"
  [2]=>
  string(1) "a"
  [3]=>
  string(8) "sentence."
}
*/ 
```

还有这个：

```
$sentence = preg_split("/[.?!\s]/", $sentence);
/*
returns array(5) {
  [0]=>
  string(1) "I"
  [1]=>
  string(2) "am"
  [2]=>
  string(1) "a"
  [3]=>
  string(8) "sentence"
  [4]=>
  string(0) ""
}
*/ 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T00:16:38.450

您可以在单词边界上拆分：

```
$sentence = preg_split("/(?<=\w)\b\s*/", 'I am a sentence.'); 
```

正则表达式几乎会扫描直到找到一个单词字符，然后在它之后，正则表达式必须捕获一个单词边界和一些可选空间。

[输出](http://viper-7.com/kWRwQ4)：

```
array(5) {
  [0]=>
  string(1) "I"
  [1]=>
  string(2) "am"
  [2]=>
  string(1) "a"
  [3]=>
  string(8) "sentence"
  [4]=>
  string(1) "."
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-09T19:53:18.473

我一直在寻找相同的解决方案并降落在这里。公认的解决方案不适用于非单词字符，如撇号和重音符号等。下面，找到对我有用的解决方案。

这是我的测试语句：

> 克莱尔最喜欢的钢琴奏鸣曲是莫扎特的第一奏鸣曲。C大调第15首。

接受的答案给了我以下结果：

```
Array
(
    [0] => Claire
    [1] => ’s
    [2] => favorite
    [3] => sonata
    [4] => for
    [5] => piano
    [6] => is
    [7] => Mozart
    [8] => ’s
    [9] => Sonata
    [10] => no
    [11] => . 15
    [12] => in
    [13] => C
    [14] => Major
    [15] => .
) 
```

我想出的解决方案如下：

```
$parts = preg_split("/\s+|\b(?=[!\?\.])(?!\.\s+)/", $sentence); 
```

它给出了以下结果：

```
Array
(
    [0] => Claire’s
    [1] => favorite
    [2] => sonata
    [3] => for
    [4] => piano
    [5] => is
    [6] => Mozart’s
    [7] => Sonata
    [8] => no.
    [9] => 15
    [10] => in
    [11] => C
    [12] => Major
    [13] => .
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T09:39:31.120

如果有人对忽略标点符号的简单解决方案感兴趣

```
preg_split( '/[^a-zA-Z0-9]+/', 'I am a sentence' ); 
```

会分裂成

```
array(4) {
  [0]=>
  string(1) "I"
  [1]=>
  string(2) "am"
  [2]=>
  string(1) "a"
  [3]=>
  string(8) "sentence"
} 
```

或标点符号包含在相邻单词中的替代解决方案

```
preg_split( '/\b[^a-zA-Z0-9]+\b/', 'I am a sentence.' ); 
```

会分裂成

```
array(4) {
  [0]=>
  string(1) "I"
  [1]=>
  string(2) "am"
  [2]=>
  string(1) "a"
  [3]=>
  string(8) "sentence."
} 
```

# asp.net - Html.Action 没有创建到 View 的链接

> ID：16137581
> 
> 赞同：3
> 
> 时间：2013-04-22T00:08:29.223
> 
> 标签：asp.net, razor, asp.net-mvc-4, razor-2

我正在尝试为我的网站设置导航栏，但遇到了一些麻烦。

我有以下内容：

```
<li>@Html.Action( "Project Management", "ProjectManagement", "Services" )</li> 
```

设置为调用视图，但它似乎正在做的是将该视图放入导航栏中。

这是将视图链接到导航栏的正确方法还是我应该尝试不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:15:48.540

您要使用的是[`@Html.ActionLink`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink.aspx)而不是[`@Html.Action`](http://msdn.microsoft.com/en-us/library/ee703423.aspx).

*   `@Html.ActionLink`生成超链接，`<a href="...">Text</a>`
*   `@Html.Action`执行一个控制器动作，即返回 HTML/markup/JSON/whatever，它被编程返回。

* * *

试试这个代码：

```
<li>@Html.ActionLink( "Project Management", "ProjectManagement", "Services" )</li> 
```

# vb.net - 如何让这个拆分函数工作？(VB.NET)

> ID：16137582
> 
> 赞同：1
> 
> 时间：2013-04-22T00:08:33.127
> 
> 标签：vb.net, split, split-function

所以，我做了一个程序，大部分情况下，将数字转换为字母。我之前的问题是它正在转换每个单独的数字而不是每个数字，例如（1-0-1 而不是 101）。有人建议我使用拆分功能：

```
 Dim numbers As String() = DTB.Split(" ") 
```

所以现在它一直在读取数字，如果中间有空格，它只会分裂。我现在的问题是它正在翻译例如：“[102,103,104]”为“[102”，“103”和“104]”，因为它只会在之间有空格时分裂。显然，您不能转换“[102”或“104]”，因为它们不是实际数字。

有没有人有解决方案，无论间距如何，我都应该怎么做才能将其转换？正则表达式会是要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:11:59.107

使用正则表达式`\d+` 将匹配数字

所以

```
12234abcsdf23434 
```

将返回两个匹配项

```
12234
23434 
```

# python - Ants AI 挑战：如何从我的 Ant 类中写入文件？

> ID：16137583
> 
> 赞同：0
> 
> 时间：2013-04-22T00:08:34.877
> 
> 标签：python, numpy, artificial-intelligence

对于我的 AI 课程的最后一个项目，我正在参与 Google AI Ants 挑战赛（从 2011 年开始）。我正在使用基于扩散的方法，并且我希望能够可视化扩散场（这是一个 numpy 数组）以用于调试/演示目的。

通常我会做类似的事情`numpy.save("myFile",array)`，但是运行所有 Ants 东西的主文件似乎会重定向 I/O。例如，如果我想让我的机器人打印到终端，我不能只做`print "Hello World"`，我必须做`sys.stderr.write("Hello World")`。

我知道这没什么用，而且我不确定要粘贴哪个代码，所以我真的希望有过挑战经验的人可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:24:03.433

不确定 Google AI Ants 挑战的具体细节，但您可以只使用标准 Python 文件操作吗？

```
with open("myFile", "w") as f:
    # print each element on a separate line
    for elem in array:
        f.write(repr(elem)) 
```

这将要求您定义如何将数组写入文件和从文件中读取，就像`numpy.save()`这样做一样。
--ap

# android - 可以在 Android 应用程序中使用 `scala.actors.Actor` 对象吗？

> ID：16137585
> 
> 赞同：0
> 
> 时间：2013-04-22T00:09:03.520
> 
> 标签：android, scala, actor

我知道它有效，刚刚检查过。我想知道系统无法释放内存或应用程序在后台“挂起”或类似的事情。

```
import scala.actors.Actor
import android.util.Log

object Player extends Actor {

  start

  def act {
    loop {
      react {
        case x => Log.v("actor", "received: " + x)
      }
    }
  }

} 
```

与使用常规线程的并发相比，Actor 更容易*掌握。*我想`scala.actors`它是建立在 JVM 线程之上的，所以也许它和在你的应用程序中使用普通线程一样合法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T01:49:13.620

您不应该使用本机 scala 演员，因为它们已被弃用。但是您可以在 Android 上运行 AKKA。您可以查看此线程以获取更多信息和示例代码：[https ://groups.google.com/forum/?fromgroups=#!topic/akka-user/1W41nAONv90](https://groups.google.com/forum/?fromgroups=#!topic/akka-user/1W41nAONv90)

# python - python csv阅读器循环中的正确迭代和退出

> ID：16137588
> 
> 赞同：0
> 
> 时间：2013-04-22T00:09:26.543
> 
> 标签：python, csv

我在两件事上有点挣扎：

1.  我有很多事情要做`for row in reader`，我担心一切都被正确执行。似乎有一些关于长指令块的迷信，所以我在无知地引导它。

2.  我不确定如何最好地进入下一个记录，或者即使我必须这样做。当我遇到错误条件时，该行被写入丢弃文件，所以我真的可以等到循环的“结束”。但是我需要做什么才能说“请下一张唱片？” 我必须在循环`next()`结束时明确说明吗？`for row...`

在这里欣赏一些指导。TC

```
with open('data.csv',rb) as f:
    reader = csv.reader(f)
    next(reader, None) # skip the header
    for row in reader:
        foo
        foo
        lots more foo
        if bar1 == errorvalue1:
            writediscard (row)
        else:
            if bar2 == errorvalue2:
                writediscard (row)
            else:
                writegoodstufftothedatabase(data)
   # in all cases, want to advance to the next record 
```

请注意，我已经`def writediscard`及`writegoodstufftothedatabase`以上。我可以处理写入和提交写入到 sqlitedb。对 CSV 进行迭代是另一回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:22:21.810

1.  代码应该执行得很好。关于长指令块的“迷信”并不是因为担心某些东西不会执行，而是因为它难以阅读、理解、维护和修改。考虑将您的“foo”逻辑分解为已定义的函数并调用它们。

2.  在您的情况下，下一个记录逻辑发生在 iterator 中 `for row in reader:`。您不需要调用任何东西来获取下一条记录，您只需要确保在失败时不执行任何您不想执行的代码，您可以使用条件结构执行此操作。您可以使用[`continue`](http://docs.python.org/2/reference/simple_stmts.html#continue)跳过循环中的代码并返回顶部，但这不是您构建代码的必要方式。

# c - 为什么会生成此核心转储

> ID：16137589
> 
> 赞同：0
> 
> 时间：2013-04-22T00:09:36.687
> 
> 标签：c, debugging, gdb, coredump

我正在编写一个 C 程序，其相关细节如下：

```
void calculate(struct iso_matrix *iso_matrix) {
        struct graphlet *graphlet = init_graphlet(GL_SIZE);
        int *index_map = (int *)malloc(iso_matrix->n_rw_col);
        //some other stuff. Working fine.
        free(index_map);    //line 90(for future references)
} 
```

我在终端得到的输出：

```
*** glibc detected *** ./bin/exec: free(): invalid next size (fast):0x00000000023696f0 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x2b3b5fc92b96]
./bin/exec[0x403ff9]
./bin/exec[0x4049eb]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x2b3b5fc3576d]
./bin/exec[0x400889]
======= Memory map: ========
(not shown here) 
```

GDB 回溯是：

```
#0  0x00007ffff7a51425 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff7a54b8b in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ffff7a8f39e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007ffff7a99b96 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x0000000000403ff9 in calculate (iso_matrix=0x6084a0) at src/graphlet_iso_mat.c:90
#5  0x00000000004049eb in main (argc=3, argv=0x7fffffffdef8) at src/main.c:70 
```

我无法理解为什么会发生这种情况或如何调试它。任何帮助表示赞赏。

[编辑] 完整`calculate`功能：

```
void calculate(struct iso_matrix *iso_matrix)
{
    printf("Calculate called\n");
    struct graphlet *graphlet = init_graphlet(GL_SIZE);
    int *index_map = (int *)malloc(iso_matrix->n_rw_col);
    struct graph *graph = init_graph(0, GL_SIZE);   /*Small graph so prefered matrix representation.*/

    /*Initialize the list_head.*/
    if(!iso_matrix->unique)
        iso_matrix->unique = init_listhead();

    for(int i=0; i<iso_matrix->n_rw_col; ++i)
    {
        graphlet_to_graph(graphlet, graph);
        calc_heuristic(graph, 3);

        /*check_unique() compares only between same type of graphs.*/
        index_map[i] = check_unique(iso_matrix->unique, graph);
        if(index_map[i]==-1)
        {
            struct graph *cpy=init_graph(0, GL_SIZE);
            cpy_graph(graph, cpy);
            int *graphlet_no = (int *)malloc(sizeof(int));
            *graphlet_no = i;
            struct container *container = (struct container *)malloc(sizeof(struct container));
            container->data = (void *)cpy;
            container->id = (void *)graphlet_no;
            struct list_node *list_node = init_listnode((void *)container);
            add_to_list(list_node, iso_matrix->unique);
        }
        else
        {
            *(*((iso_matrix->iso_mat)+index_map[i])+i) = 1;
        }

        inc_graphlet(graphlet);
        reset_graph(graph);
    }

    for(int i=0; i<iso_matrix->n_rw_col; ++i)
    {
        if(index_map[i]==-1)    /*If same then continue.*/
            continue;
        for(int j=0; j<iso_matrix->n_rw_col; ++j)
            *(*((iso_matrix->iso_mat)+i)+j) = *(*((iso_matrix->iso_mat)+index_map[i])+j);
    }

    /*Destroying allocated memory.*/
    free(index_map);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:47:15.637

我打赌这个：

```
int *index_map = (int *)malloc(iso_matrix->n_rw_col); 
```

是指指向`iso_matrix->n_rw_col` **整数**的分配。您忘记了字节计算中整数的大小：

```
int *index_map = malloc(iso_matrix->n_rw_col * sizeof(*index_map)); 
```

可能还有其他问题，但这显然是一个大问题。注意：我还删除了`malloc()`你不应该在 C 代码中做的演员表。确保`stdlib.h`包含在`#include`此源文件顶部的列表中。

# batch-file - 批处理文件以打开自定义目录

> ID：16137590
> 
> 赞同：2
> 
> 时间：2013-04-22T00:09:39.080
> 
> 标签：batch-file

我正在尝试创建一个批处理文件，询问用户一个目录，然后打开该目录。但是，它会一直打开“我的文档”！这是我的代码：

`@echo off set /p DIR= "Enter a Directory: " %SystemRoot%\explorer.exe "%DIR%"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:13:43.947

尝试做

```
@echo off
set "dir="
set /p "DIR=Enter a Directory: "
if defined DIR start "" "%DIR%" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T03:47:23.973

这是正确的方法（如果你想在一行中）：

```
@echo off & set /p "DIR=Enter a Directory: " && Call explorer /n/select,"%DIR%" 
```

普通脚本：

```
@echo off
set /p "DIR=Enter a Directory: " && (
    call Explorer /n/select,"%%DIR%%"
) 
```

PS：&& 是为了避免用户在没有输入文件夹的情况下按回车打开资源管理器。如果您不对该行进行聚合，则在正常示例中不需要调用命令。

有关资源管理器开关的更多信息，请参见此处：http: [//support.microsoft.com/kb/152457](http://support.microsoft.com/kb/152457)

# asp.net-mvc - 如何在不使用数据库的情况下创建 CRUD asp.net mvc 应用程序

> ID：16137591
> 
> 赞同：-2
> 
> 时间：2013-04-22T00:09:43.987
> 
> 标签：asp.net-mvc, dependency-injection, crud, dbcontext

我对 asp.net mvc 比较陌生，我一直在尝试创建一个简单的 CRUD 应用程序而不使用数据库，因此不使用 DbContext。然而，这似乎并不可行。我应该考虑 DI 来解决这个问题吗？

任何想法都会非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:10:34.280

如果您只想出于学习目的这样做，您可以使用静态字典，

请注意，您将在应用停止时丢失所有数据，

这是一个 asp.net mvc 基础的教程，它在没有 DB 的情况下最后做了一点杂乱无章的事情：http: [//youtu.be/fsfOFL4bXXA](http://youtu.be/fsfOFL4bXXA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:22:30.620

您将需要某种类型的对象持久化框架，或者可以创建自己的。这一切都可以在没有数据库的情况下完成，但将使用持久性理论。

真正开始这样做的唯一方法是使用持久性软件编程理论。您将在一个对象内部和另一个对象内部创建一个对象。对象通过数组存储。然后，您需要遍历数组以找到要从数组中删除对象的特定项。

例如，您将创建国家对象，然后将一个州的对象存储在该国家/地区。然后在状态数组内部，您可以将人员存储在另一个数组中。

能创造宇宙，宇宙里面就是星座，星座里​​面就是星体。所有这些都使用数组存储。

要保存状态，您将使用可序列化类将所有这些存储到 bin 文件中，该国家数组将读取该类以重新启动所有对象的状态。我已经为 VB 中的桌面应用程序编写了这样的软件。

我想你会用 C# 做同样的事情，然后简单地创建你的对象。

这是你想到的类型吗？

可以使用相同的理论而不是使用 cookie 来跟踪用户在网站上的进度，但似乎大多数人只是使用 cookie。

# google-app-engine - GCM 是在 GAE + Android 中实现回合制多人游戏的正确方法

> ID：16137596
> 
> 赞同：0
> 
> 时间：2013-04-22T00:11:10.023
> 
> 标签：google-app-engine, google-cloud-messaging, throttling

我目前正在开发一款基于回合制并在服务器端使用 GAE 的安卓游戏。现在直到现在我使用 GCM 来通知玩家何时开始行动，但我遇到了一些线程，说 GCM 限制了很多（说每个折叠键大约有 20 个初始令牌，之后你每 3 个返回 1 个令牌分钟）。但那些是信息基于用户体验的线程。现在我的问题是——因为我没有找到任何官方的信息，只有节流“存在”——有没有人知道更多“确凿的事实”，或者这是我想使用的正确方法吗？移动是在 2 名玩家之间进行的，频率可以从每两秒移动一次到每天移动一次。我担心人们玩得很快，然后这样的限制就会开始......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:50:27.227

GCM 也不保证消息传递。我会在应用程序中构建一些智能投票。可能会在前 5 秒左右每秒轮询一次然后退出，并在响应时间超过 5 秒时使用 GCM。

# reporting-services - 如何在仪表板中使用报表快照

> ID：16137597
> 
> 赞同：5
> 
> 时间：2013-04-22T00:11:12.223
> 
> 标签：reporting-services, dynamics-crm-2011, dashboard

我有一个 Dynamics 2011 仪表板，其中包含通过 iFrame 指向和 SSRS 报告的链接。它运行良好，但我正在查看的报告刷新速度很慢。我想安排报告并让仪表板自动指向*最新*的快照。

有没有办法做到这一点？

提前致谢

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T17:22:55.917

如果您想控制报告的刷新时间（例如凌晨 3 点），您应该使用快照。您需要分配默认参数，然后在 SSRS 报表管理器中设置报表的执行设置。

如果可以接受全天重新运行报告，您可以使用缓存选项，也可以在 SSRS 报告管理器的执行设置中使用。一旦您的报告的缓存过期，下一个运行它的用户将不得不等待。

# ruby-on-rails - 如何在我的 rspec 测试中设置一个变量，以便控制器可以使用它进行查询？

> ID：16137599
> 
> 赞同：4
> 
> 时间：2013-04-22T00:11:14.743
> 
> 标签：ruby-on-rails, rspec, controller, tdd, stubbing

我的会话控制器中有一个变量。

```
session[:facebook_profile_id] = @user_info['id'] 
```

@user_info['id'] 是一个整数。示例：123

然后我在主控制器中使用该会话变量从数据库中获取配置文件对象。

```
def show
    @facebook_profile = FacebookProfile.find_by_facebook_id(session[:facebook_profile_id])
end 
```

使用 session 变量找到新对象并在我的应用程序中使用，因此没有它我的 rspec 测试会失败。

这是我的 FacebookProfile 工厂：

```
FactoryGirl.define do 
  factory :facebook_profile do |f|
    f.facebook_id 123
  end
end 
```

在我对应用程序的规范测试中，我在每次测试之前创建了 Factory 实例：

```
FactoryGirl.create(:facebook_profile).should be_valid 
```

如何在我的规范测试中设置 session[:facebook_profile_id] 变量，以便@facebook_profile 的查找不会失败？

我试过存根，但无法让它工作。另外，我一直在我的功能规范中尝试这个。我应该在控制器规范中这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T00:18:43.073

如果您的目的是功能测试，那么直接在测试中分配它很简单

```
# describe .....
  session[:facebook_profile_id] = 123
# end 
```

赋值后也可以直接获取变量

```
session[:facebook_profile_id] 
```

# c++ - 我如何打印出打印出矢量 当我收到“compilr.com/rayd360/test-songst”时

> ID：16137610
> 
> 赞同：-1
> 
> 时间：2013-04-22T00:13:17.893
> 
> 标签：c++, vector

完整的程序在这里澄清：compilr.com/rayd360/test-songs

```
struct Album {
  string title;
  string year;
  string track;
  vector<string> tracks;
  vector<string>::iterator trk;
}MyAlbums[40];

cout << "\n list of songs: \n";
for(int i = 0; i < 5; i++){
  cout << *MyAlbums[i].trk << "\n";
} 
```

给我：“bash：第 1 行：232 分段错误”

我需要将曲目列表传递给按字母顺序对它们进行排序然后打印出来的函数。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:24:43.990

for 循环中的行取消引用由 . 返回的迭代器`MyAlbums[i].trk`。由于迭代器没有分配给任何东西（它的内部指针没有指向任何东西）取消引用它是未定义的行为。这也可能导致分段错误，因为您正在查看不属于您的内存。

为了解决这个问题，我认为你应该从你的类中删除迭代器。相反，在循环中使用一个：

```
auto begin = MyAlbums.tracks.begin(),
     end   = MyAlbums.tracks.end();

for (auto it = begin; it != end; ++it)
{
    std::cout << *it;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:20:28.520

```
struct Album {
string title;
string year;
string track;

}MyAlbums[40];
vector<Album> tracks;
vector<Album>::iterator trk=tracks.begin();
cout << "\n list of songs: \n";
for(trk;trk!=tracks.end();++trk){
cout << *trk.title << "\n"; 
```

假设您已经填充了 MyAlbums。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:24:07.983

有两个问题：

1) MyAlbums[i].trk 未初始化

2）在遍历容器时，确保不要访问索引无效的容器。

（例如： for(int i = 0; i < 5; i++) 在这种情况下是不安全的）。

```
// C++11
for ( auto track : MyAlbums.tracks )
{
       cout << track << "\n";
}  

// If not C++11
for (vector<string>::Iterator trackItr = MyAlbums.begin(); 
     trackItr != MyAlbums.end(); ++trackItr)
{
     cout << *trackItr << "\n";
} 
```

# ios - 无法删除有关 iOS 6 中已弃用方法的警告

> ID：16137615
> 
> 赞同：0
> 
> 时间：2013-04-22T00:13:52.240
> 
> 标签：ios, presentmodalviewcontroller, zbar-sdk, zbar

我在我的应用程序中使用 ZBar SDK，我可以正常运行。但是，我收到以下我无法弄清楚的警告：

```
"presentModalViewController:animated" is deprecated.  First deprecated in iOS 6. 
```

我使用这条线的完整方法如下：

```
- (IBAction) scanButtonTapped
{

// ADD: present a barcode reader that scans from the camera feed
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;
reader.supportedOrientationsMask = ZBarOrientationMaskAll;

ZBarImageScanner *scanner = reader.scanner;
// TODO: (optional) additional reader configuration here

// EXAMPLE: disable rarely used I2/5 to improve performance
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

// present and release the controller
//line below is deprecated
[self presentModalViewController:reader animated:YES];
//line below when I uncomment causes an error
//[self presentModalViewController: reader animated: YES completion: nil];
NSLog(@"TBD: scan barcode here...");
} 
```

现在，我做了一些研究，发现在 iOS 6 中使用的更新方法是：

```
[self presentModalViewController: reader animated: YES completion: nil]; 
```

但是，当我在代码中使用这一行而不是已弃用的行时，我现在收到以下错误而不是警告：

```
"no visible @interface for "ViewController" declares the selector 'presentModalViewController: animated: completion: '. 
```

老实说，我不知道如何纠正这个错误，并且想知道如何纠正。我的问题是我试图纠正警告的方式吗？老实说，我不知道并且希望有任何见解。

仅供参考，我从这里下载了 ZBar SDK：http: [//zbar.sourceforge.net/iphone/sdkdoc/](http://zbar.sourceforge.net/iphone/sdkdoc/)
并且 ZBar SDK 的实际文件夹仅包含头文件。

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:15:20.897

那不是更新的方法。这是

```
[self presentViewController:reader animated:YES completion:nil]; 
```

# python - Mlabwrap 多处理

> ID：16137619
> 
> 赞同：3
> 
> 时间：2013-04-22T00:14:10.713
> 
> 标签：python, matlab, multiprocessing, mlabwrap

我正在尝试通过 python 使用 matlab 来对我开发的系统进行原型设计。mlabwrap 是否能够处理多处理？这可能看起来很愚蠢，但我想我可以做到以下几点：

```
from multiprocessing import Process,Lock
from mlabwrap import mlab
from mlabwrap import mlab as mlab1

def some_Function(mlab,Astring)
    #do some stuff....

p1=Process(target=some_Function,args=(mlab,"Example string 1"))
p2=Process(target=some_Function,args=(mlab1,"Example string 2"))
p1.start()
p2.start() 
```

但我不断收到此错误：

```
Traceback (most recent call last):
  File "/usr/lib64/python2.6/multiprocessing/process.py", line 232, in _bootstrap
    self.run()
  File "/usr/lib64/python2.6/multiprocessing/process.py", line 88, in run
    self._target(*self._args, **self._kwargs)
  File "test.py", line 15, in process_Camera
    res=mlab.RetrieveAndProcess(cameraDirectory)
  File "/home/mar608/data/cameraSystem/mlabwrap-1.1/build/lib.linux-x86_64-2.6/mlabwrap.py", line 607, in mlab_command
    return self._do(name, *args, **update({'nout':nout}, kwargs))
  File "/home/mar608/data/cameraSystem/mlabwrap-1.1/build/lib.linux-x86_64-2.6/mlabwrap.py", line 515, in _do
    mlabraw.eval(self._session,  "cd('%s');" % os.getcwd().replace("'", "''"))
error: Unable to evaluate string in MATLAB(TM) workspace 
```

请注意，当我定期运行该函数时，即使我使用 mlab 运行该函数一次，然后使用 mlab1 再次运行该函数，我也不会收到此错误。它仅在我将其作为进程运行时发生，并且无论我是否使用它运行另一个进程都会发生。

任何提示将不胜感激！

请注意，所有 matlab 函数都会发生这种情况。例如，调用 mlab.sum([2,3]) 也会给出同样的错误

注意：我知道我不应该为我的代码的最终产品做这种事情。我不会在最终版本中这样做，我只是想让演示工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:30:47.040

Matlab 本身在 M 代码级别是单线程的——也就是说，M 代码解释器只能处理单个并发 M 代码执行——因此您将无法在单个 Matlab 进程中进行并发处理。

```
from mlabwrap import mlab
from mlabwrap import mlab as mlab1 
```

这个导入只是为同一个变量加上别名`mlab`，这是一个保存单个实例的类变量，所以它们可能都指向同一个 mlabwrap 对象，因此即使你将它们传递给不同的 Process 对象，它们也可能指向同一个 Matlab 会话。（如果您使用 mlab 运行该函数一次，然后使用没有 Process 对象的 mlab1 再次运行该函数，则您正在进行阻塞调用并按顺序执行它们，因此在该共享的 Matlab 会话中，一次只运行一段 M 代码，而不是并发执行。）`mlab1``mlabwrap.mlab``mlabwrap`

要使其工作，您需要为每个并行进程启动一个单独的 Matlab 会话。您可以通过`mlabwrap`为每个进程创建一个新对象来做到这一点，而不仅仅是重用`mlab`. `Mlabwrap`在幕后使用 Matlab 引擎；我不知道它是否支持从单个程序运行多个引擎实例；[`engOpen`文档](http://www.mathworks.com/help/matlab/apiref/engopen.html)没有指定。但如果是这样，使用多个`mlabwrap`对象可能会将其暴露给您的 Python 代码，因为`mlabwrap.__init__`代码在构建时会尝试打开一个新引擎。

# actionscript-3 - 在监听器函数之外访问 event.target 或 event.currentTarget

> ID：16137620
> 
> 赞同：0
> 
> 时间：2013-04-22T00:14:12.890
> 
> 标签：actionscript-3, flash-cs6

最初我有两个函数，第一个函数中`dataLoaded`有一个 eventListener，它产生了一个名为`itemClicked`. 但是，如果我想在 and 之间添加一个and`delayedFunction`作为`itemClicked`间歇阶段，当我在我的.`dataLoaded``delayedFunction``event.target``event.currentTarget``delayedFunction`

```
private function dataLoaded(event:Event):void {
    //items properties call - add other calls to master properties later on
    items = data.item;
    // parsing of each ingredient
    for (var i = 0; i < items.length(); i++) {
        // instantiation of mcItem (the stage for each item)
        _item = new Item();
        // sets //over// layer to invisible / transparent
        _item.item_btn_over.alpha = 0;
        // creates the var itemTextField
        _itemTextField = new TextField();
        _itemTextField.text = items[i].toString();
        // adds textfield to displaylist
        _item.addChild(_itemTextField);
        //adds items to container displaylist
        _container.addChild(_item);
    }
    _item.parent.addEventListener( MouseEvent.CLICK, itemClicked );
}

function itemClicked(event:MouseEvent):void {
    if (event.target is Item) {
        var item:Item = Item(event.target);
        TweenLite.to(item.btn_delete, 1,{rotation:180});
        setTimeout(delayedFunction,5000);
        item.parent.removeChild(item);
        parseXML(data);
    }
}

function delayedFunction():void {
    var item:Item = Item(event.target);
    item.parent.removeChild(item);
} 
```

（我已经模拟了上面的函数，所以我可能会遗漏一些右括号，但这与我的问题无关）

这个问题已经在我脑海中萦绕了好几天，我想不出一种方法可以让`event.target`父母的`_item`可以访问除侦听功能之外的其他功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:20:07.017

您可以`setTimeout`像这样将参数传递给您的调用：

```
setTimeout(delayedFunction, 5000, event.currentTarget); 
```

然后从您的方法的`arguments`数组中获取参数：`delayedFunction`

```
function delayedFunction():void {
    var item:Item = arguments[0] as Item;
    item.parent.removeChild(item);
} 
```

如果您需要信息，请查看[setTimeout 文档。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#setTimeout%28%29)

# vim - 在vim中将光标设置为垂直细线

> ID：16137623
> 
> 赞同：18
> 
> 时间：2013-04-22T00:14:44.370
> 
> 标签：vim

我正在尝试将插入模式下的光标设置为一条细垂直线，但我无法做到。我在我的 .vimrc 文件中试过这个：

```
set guicursor+=i:ver100-iCursor 
```

它不会在插入模式下将光标设置为垂直条。

我错过了什么，我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-10-22T15:25:44.617

**`/home/el/.vimrc`我为我的控制台工作的这段代码：**

```
if $TERM_PROGRAM =~ "iTerm"
    let &t_SI = "\<Esc>]50;CursorShape=1\x7" " Vertical bar in insert mode
    let &t_EI = "\<Esc>]50;CursorShape=0\x7" " Block in normal mode
endif 
```

**这对我来说是什么：**

[![在此处输入图像描述](https://i.stack.imgur.com/4iD2w.png)](https://i.stack.imgur.com/4iD2w.png)

**资源：**

[https://hamberg.no/erlend/posts/2014-03-09-change-vim-cursor-in-iterm.html](https://hamberg.no/erlend/posts/2014-03-09-change-vim-cursor-in-iterm.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T00:35:24.933

这成功了：

`set guicursor=i:ver25-iCursor`

我不得不减少`100`到`25`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-27T14:43:05.763

对于 gnome 终端版本>3.15
将其添加到您的 ~/.vimrc。

```
if has("autocmd")
  au VimEnter,InsertLeave * silent execute '!echo -ne "\e[2 q"' | redraw!
  au InsertEnter,InsertChange *
\ if v:insertmode == 'i' | 
\   silent execute '!echo -ne "\e[6 q"' | redraw! |
\ elseif v:insertmode == 'r' |
\   silent execute '!echo -ne "\e[4 q"' | redraw! |
\ endif
au VimLeave * silent execute '!echo -ne "\e[ q"' | redraw!
endif 
```

您将在正常模式下获得一个块光标，在插入模式下获得一个细光标。

[![在此处输入图像描述](https://i.stack.imgur.com/VDVNE.png)](https://i.stack.imgur.com/VDVNE.png)

# python - 在文件中查找单词，然后获取文本旁边的 x,y 坐标

> ID：16137624
> 
> 赞同：1
> 
> 时间：2013-04-22T00:14:59.777
> 
> 标签：python, ocr

我正在使用 terrasect ocr 从图像生成文本文件。完成后，输出文件包含 terrasect 可以从图像文件中获取的所有文本，并且还包含文本的 x、y 坐标。

这是输出文件的一个小示例：

```
 <p class='ocr_par' dir='ltr' id='par_14' title="bbox 65 1198 2904 1245">
 <span class='ocr_line' id='line_17' title="bbox 65 1198 2904 1245"><span class='ocrx_word' id='word_286' title="bbox 65 1200 287 1237">Tormented</span> <span class='ocrx_word' id='word_287' title="bbox 307 1200 391 1237">Soul</span> <span class='ocrx_word' id='word_288' title="bbox 659 1203 682 1237">2</span> <span class='ocrx_word' id='word_289' title="bbox 805 1203 828 1237">2</span> <span class='ocrx_word' id='word_290' title="bbox 953 1203 1133 1237">Common</span> <span class='ocrx_word' id='word_291' title="bbox 1247 1203 1331 1237"><strong>M13</strong></span> <span class='ocrx_word' id='word_292' title="bbox 1484 1200 1651 1245"><strong>111/249</strong></span> <span class='ocrx_word' id='word_293' title="bbox 1690 1198 1729 1237">9</span> <span class='ocrx_word' id='word_294' title="bbox 1922 1200 2143 1237">Tormented</span> <span class='ocrx_word' id='word_295' title="bbox 2164 1200 2248 1237">Soul</span> <span class='ocrx_word' id='word_296' title="bbox 2268 1200 2365 1237">can&#39;t</span> <span class='ocrx_word' id='word_297' title="bbox 2383 1200 2489 1237">block</span> <span class='ocrx_word' id='word_298' title="bbox 2508 1200 2581 1237">and</span> <span class='ocrx_word' id='word_299' title="bbox 2604 1203 2630 1237">is</span> <span class='ocrx_word' id='word_300' title="bbox 2651 1200 2904 1237">unblockable.</span> 
 </span>
</p>

<p class='ocr_par' dir='ltr' id='par_15' title="bbox 65 1263 4323 1312">
 <span class='ocr_line' id='line_18' title="bbox 65 1263 4323 1312"><span class='ocrx_word' id='word_301' title="bbox 65 1265 229 1302">Veilborn</span> <span class='ocrx_word' id='word_302' title="bbox 250 1265 365 1302">Ghoul</span> <span class='ocrx_word' id='word_303' title="bbox 659 1268 682 1302">2</span> <span class='ocrx_word' id='word_304' title="bbox 805 1268 828 1302">2</span> <span class='ocrx_word' id='word_305' title="bbox 953 1268 1182 1302">Uncommon</span> <span class='ocrx_word' id='word_306' title="bbox 1247 1268 1331 1302"><strong>M13</strong></span> <span class='ocrx_word' id='word_307' title="bbox 1484 1265 1651 1310"><strong>114/249</strong></span> <span class='ocrx_word' id='word_308' title="bbox 1690 1263 1771 1302">09</span> <span class='ocrx_word' id='word_309' title="bbox 1922 1265 2086 1302">Veilborn</span> <span class='ocrx_word' id='word_310' title="bbox 2107 1265 2222 1302">Ghoul</span> <span class='ocrx_word' id='word_311' title="bbox 2242 1265 2339 1302">can&#39;t</span> <span class='ocrx_word' id='word_312' title="bbox 2357 1265 2677 1302">b|ock.Whenever</span> <span class='ocrx_word' id='word_313' title="bbox 2698 1276 2719 1302">a</span> <span class='ocrx_word' id='word_314' title="bbox 2742 1268 2886 1312">Swamp</span> <span class='ocrx_word' id='word_315' title="bbox 2906 1268 3029 1302">enters</span> <span class='ocrx_word' id='word_316' title="bbox 3047 1265 3110 1302">the</span> <span class='ocrx_word' id='word_317' title="bbox 3130 1265 3328 1302">battlefield</span> <span class='ocrx_word' id='word_318' title="bbox 3349 1265 3464 1302">under</span> <span class='ocrx_word' id='word_319' title="bbox 3484 1276 3573 1312">your</span> <span class='ocrx_word' id='word_320' title="bbox 3594 1265 3747 1310">control,</span> <span class='ocrx_word' id='word_321' title="bbox 3766 1276 3839 1312">you</span> <span class='ocrx_word' id='word_322' title="bbox 3857 1276 3940 1312">may</span> <span class='ocrx_word' id='word_323' title="bbox 3961 1268 4081 1302">return</span> <span class='ocrx_word' id='word_324' title="bbox 4102 1265 4266 1302">Veilborn</span> <span class='ocrx_word' id='word_325' title="bbox 4289 1265 4323 1302">GI</span> 
 </span>
</p> 
```

这里有两个关键词。一个是受折磨的灵魂，另一个是面纱食尸鬼。

我正在尝试让 python 打开输出文件并搜索受折磨的灵魂，然后获取 x,y 坐标

恰好是 65 1200 287 1237

感谢您提前提供帮助。我是python的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:08:35.173

我建议您使用[pyquery](http://pythonhosted.org/pyquery/)进行解析：

```
from pyquery import PyQuery as pq

html = '''  <p class='ocr_par' dir='ltr' id='par_14' title="bbox 65 1198 2904 1245">
 <span class='ocr_line' id='line_17' title="bbox 65 1198 2904 1245"><span class='ocrx_word' id='word_286' title="bbox 65 1200 287 1237">Tormented</span> <span class='ocrx_word' id='word_287' title="bbox 307 1200 391 1237">Soul</span> <span class='ocrx_word' id='word_288' title="bbox 659 1203 682 1237">2</span> <span class='ocrx_word' id='word_289' title="bbox 805 1203 828 1237">2</span> <span class='ocrx_word' id='word_290' title="bbox 953 1203 1133 1237">Common</span> <span class='ocrx_word' id='word_291' title="bbox 1247 1203 1331 1237"><strong>M13</strong></span> <span class='ocrx_word' id='word_292' title="bbox 1484 1200 1651 1245"><strong>111/249</strong></span> <span class='ocrx_word' id='word_293' title="bbox 1690 1198 1729 1237">9</span> <span class='ocrx_word' id='word_294' title="bbox 1922 1200 2143 1237">Tormented</span> <span class='ocrx_word' id='word_295' title="bbox 2164 1200 2248 1237">Soul</span> <span class='ocrx_word' id='word_296' title="bbox 2268 1200 2365 1237">can&#39;t</span> <span class='ocrx_word' id='word_297' title="bbox 2383 1200 2489 1237">block</span> <span class='ocrx_word' id='word_298' title="bbox 2508 1200 2581 1237">and</span> <span class='ocrx_word' id='word_299' title="bbox 2604 1203 2630 1237">is</span> <span class='ocrx_word' id='word_300' title="bbox 2651 1200 2904 1237">unblockable.</span> 
 </span>
</p>

<p class='ocr_par' dir='ltr' id='par_15' title="bbox 65 1263 4323 1312">
 <span class='ocr_line' id='line_18' title="bbox 65 1263 4323 1312"><span class='ocrx_word' id='word_301' title="bbox 65 1265 229 1302">Veilborn</span> <span class='ocrx_word' id='word_302' title="bbox 250 1265 365 1302">Ghoul</span> <span class='ocrx_word' id='word_303' title="bbox 659 1268 682 1302">2</span> <span class='ocrx_word' id='word_304' title="bbox 805 1268 828 1302">2</span> <span class='ocrx_word' id='word_305' title="bbox 953 1268 1182 1302">Uncommon</span> <span class='ocrx_word' id='word_306' title="bbox 1247 1268 1331 1302"><strong>M13</strong></span> <span class='ocrx_word' id='word_307' title="bbox 1484 1265 1651 1310"><strong>114/249</strong></span> <span class='ocrx_word' id='word_308' title="bbox 1690 1263 1771 1302">09</span> <span class='ocrx_word' id='word_309' title="bbox 1922 1265 2086 1302">Veilborn</span> <span class='ocrx_word' id='word_310' title="bbox 2107 1265 2222 1302">Ghoul</span> <span class='ocrx_word' id='word_311' title="bbox 2242 1265 2339 1302">can&#39;t</span> <span class='ocrx_word' id='word_312' title="bbox 2357 1265 2677 1302">b|ock.Whenever</span> <span class='ocrx_word' id='word_313' title="bbox 2698 1276 2719 1302">a</span> <span class='ocrx_word' id='word_314' title="bbox 2742 1268 2886 1312">Swamp</span> <span class='ocrx_word' id='word_315' title="bbox 2906 1268 3029 1302">enters</span> <span class='ocrx_word' id='word_316' title="bbox 3047 1265 3110 1302">the</span> <span class='ocrx_word' id='word_317' title="bbox 3130 1265 3328 1302">battlefield</span> <span class='ocrx_word' id='word_318' title="bbox 3349 1265 3464 1302">under</span> <span class='ocrx_word' id='word_319' title="bbox 3484 1276 3573 1312">your</span> <span class='ocrx_word' id='word_320' title="bbox 3594 1265 3747 1310">control,</span> <span class='ocrx_word' id='word_321' title="bbox 3766 1276 3839 1312">you</span> <span class='ocrx_word' id='word_322' title="bbox 3857 1276 3940 1312">may</span> <span class='ocrx_word' id='word_323' title="bbox 3961 1268 4081 1302">return</span> <span class='ocrx_word' id='word_324' title="bbox 4102 1265 4266 1302">Veilborn</span> <span class='ocrx_word' id='word_325' title="bbox 4289 1265 4323 1302">GI</span> 
 </span>
</p>'''
d = pq(html) 
```

然后你可以这样做：

```
keyword = 'Tormented Soul'
coords = lambda line: map(int, line('.ocrx_word').eq(0).attr('title').split()[1:])
result = [coords(line) for line in d('.ocr_line').items() if line.text().startswith(keyword)][0] 
```

结果：

```
[65, 1200, 287, 1237] 
```

编辑：您可以使用以下命令安装 pyquery：

```
pip install pyquery 
```

如果您需要从文件中读取，请使用：

```
d = pq(filename=path_to_html_file) 
```

# html - 如何减少图像和照片幻灯片之间的空间？

> ID：16137628
> 
> 赞同：0
> 
> 时间：2013-04-22T00:15:35.350
> 
> 标签：html, css

所以我的网站上有一张图片和一张幻灯片。

图片可以在这里查看：

![在此处输入图像描述](https://i.stack.imgur.com/OsRXH.png)

如您所见，草徽标和幻灯片之间有一个空格。有没有办法摆脱那个空间？（空间在两个对象之间有一个黄色箭头）

HTML

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="css.css" />
<STYLE>
<!--
A{text-decoration:none}
-->
</STYLE>
</head>

<title>Webcleats, LLC - Traction on the Web</title>

<body bgcolor="#FFFFFF"> 

<center><h2><a href="index.html" style="color: #000000">Home</a> &nbsp; <a href="about.html" style="color: #000000">About Us</a> &nbsp; <a href="services.html" style="color: #000000">Services</a> &nbsp; <a href="customers.html" style="color: #000000">Customers</a> &nbsp; <a href="contact.html" style="color: #000000">Contact Us</a></a></center></h2>

<h1> <center><a href="index.html" target="_blank"> <img src="webcleats_logo.tiff" /></a></center> </h1>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <!-- Start WOWSlider.com HEAD section -->
    <link rel="stylesheet" type="text/css" href="engine1/style.css" />
    <script type="text/javascript" src="engine1/jquery.js"></script>
    <!-- End WOWSlider.com HEAD section -->
</head>
<body style="background-color:#d7d7d7">
    <!-- Start WOWSlider.com BODY section -->
    <div id="wowslider-container1">
    <div class="ws_images"><ul>
<li><img src="data1/images/newest.001.jpg" alt="newest.001" title="" id="wows1_0"/></li>
<li><img src="data1/images/district_lines.002.jpg" alt="district_lines.002" title="" id="wows1_1"/></li>
<li><img src="data1/images/see_me.jpg" alt="see_me" title="" id="wows1_2"/></li>
</ul></div>
<div class="ws_bullets"><div>
<a href="#" title="newest.001"><img src="data1/tooltips/newest.001.jpg" alt="newest.001"/>1</a>
<a href="#" title="district_lines.002"><img src="data1/tooltips/district_lines.002.jpg" alt="district_lines.002"/>2</a>
<a href="#" title="Hang out with me!"><img src="data1/tooltips/see_me.jpg" alt="see_me"/>3</a>
</div></div>
    <div class="ws_shadow"></div>
    </div>
    <script type="text/javascript" src="engine1/wowslider.js"></script>
    <script type="text/javascript" src="engine1/script.js"></script>
    <!-- End WOWSlider.com BODY section -->
</body>
</html> 
```

和 CSS（目前没有很多，我是 CSS 新手）

```
h1 {
    margin:5spx;
}
#title span {
    font-size: 4em;
    color: #c13636;
    line-height: 0.9em
}
#sidebar .links a:hover {
    color:"white";
}

#webcleats {
    margin: 5px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:36:51.037

这应该可以解决您的问题，尽管很难从您的代码中判断问题`<H1>`是`<UL>`. 尝试其中一种来确定罪犯。

```
h1,
h1 img {
    margin-bottom: 0;
}

#wowslider-container1 ul,
#wowslider-container1 ul li {
    margin-top: 0;
    padding-top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:41:46.520

简单的，

将此添加到您的标题图像 css ：

```
margin-bottom:0px; 
```

并为您的哇滑块 div 添加 css，使其看起来像这样：

```
#wowslider-container1 {

    width[enter your width];
    height:[enter your height];
    margin-top:0px;
    padding-top:0px;
} 
```

并将 [输入您的宽度/高度] 替换为您希望它们成为的任何值。

# java - 使用 Java YouTubeService 类进行经过身份验证的 YouTube API 调用时，关键字对象为空

> ID：16137632
> 
> 赞同：1
> 
> 时间：2013-04-22T00:16:30.340
> 
> 标签：java, youtube-api

我正在尝试从我自己的 YouTube 帐户中获取视频，以便获取每个视频的关键字/标签。我正在尝试使用最简单的方法进行经过身份验证的调用，以获取带有关键字/标签的视频。

这是我的Java代码：

```
String clientID = "XXXXXXXXXXXX.apps.googleusercontent.com";
String devKey = "MY-DEVELOPER-KEY";
String userEmail = "MY-GMAIL-EMAIL";
String userPassword = "MY-GMAIL-PASSWORD";
String authorName = "MY-YOUTUBE-ACCOUNT-NAME";
String url = "https://gdata.youtube.com/feeds/api/videos";

YouTubeService service = new YouTubeService( clientID, devKey );
service.setUserCredentials( userEmail, userPassword );

YouTubeQuery query = new YouTubeQuery( new URL( url ) );
query.setAuthor( authorName );

VideoFeed videoFeed = service.query( query, VideoFeed.class ); 
```

请帮助我了解我做错了什么，以验证并获取这些媒体关键字。

如果您要向我推荐另一个身份验证选项，请展示一个针对我的特定场景使用该其他选项的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:02:19.453

您遇到了[这篇博](http://apiblog.youtube.com/2012/03/keeping-things-fresh.html)文中描述的行为：您的 API 调用与搜索索引相反，这些结果中永远不会包含关键字。

有[一个示例](https://developers.google.com/youtube/2.0/developers_guide_java#Retrieving_Uploads)展示了如何使用 v2 的数据 API 请求 Java 中的上传提要；您可以修改该示例以使用频道名称`default`代替，`username`您将自动为当前经过身份验证的帐户提取上传提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:03:45.323

这是我最终获得带有标签（关键字）的 JSON-C 提要的方法：

```
 /** AUTHENITICATION **/

    // HTTP connection        
    URL url = new URL("https://www.google.com/accounts/ClientLogin");
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("POST");
    urlConnection.setDoInput(true);
    urlConnection.setDoOutput(true);
    urlConnection.setUseCaches(false);
    urlConnection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");

    // Form the POST parameters
    StringBuilder content = new StringBuilder();
    content.append("Email=").append(URLEncoder.encode("MY-GMAIL-LOGIN", "UTF-8"));
    content.append("&Passwd=").append(URLEncoder.encode("MY-GMAIL-PASSWORD", "UTF-8"));
    content.append("&service=").append(URLEncoder.encode("youtube", "UTF-8"));
    OutputStream outputStream = urlConnection.getOutputStream();
    outputStream.write(content.toString().getBytes("UTF-8"));
    outputStream.close();

    // Check response status
    int responseCode = urlConnection.getResponseCode();
    if( responseCode != HttpURLConnection.HTTP_OK ) {
        // EXCEPTION
    }

    // Get the token from the response
    String token;
    InputStream inputStream = urlConnection.getInputStream();
    BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
    String line = null;
    while((line = in.readLine()) != null) {
        if ( line.indexOf("Auth=") > -1 ) {
            token = line.split("=")[1];
        }
    }

    /** JSON-C FEED WITH TAGS **/

    HttpClient client = new HttpClient();
    GetMethod method = new GetMethod("http://gdata.youtube.com/feeds/api/users/default/uploads?v=2&alt=jsonc&max-results=50&start-index=1");

    // set the authentication headers
    method.setRequestHeader("Authorization", "GoogleLogin auth=" + token);
    method.setRequestHeader("X-GData-Key", "key=MY-DEV-KEY"); 
    method.setRequestHeader("GData-Version", "2");
    method.setRequestHeader("Content-Type", "application/json; charset=UTF-8");

    // Make the call
    int statusCode = client.executeMethod(method);
    if ( statusCode != HttpStatus.SC_OK ) {
        // EXCEPTION
    }
    String JSON = method.getResponseBodyAsString(); 
```

# javascript - 从右到左 jQuery 选择器不起作用

> ID：16137633
> 
> 赞同：0
> 
> 时间：2013-04-22T00:16:36.717
> 
> 标签：javascript, jquery, jquery-selectors

在阅读 StackOverflow 上关于 jQuery 选择器性能的帖子时，我一遍又一遍地阅读同样的内容，说 jQuery 对选择器使用**自下而上**或**从右到左**的方法。

举这个例子...

```
$("#dnsTitle a.save").removeClass("disabled"); 
```

根据我一直在阅读的内容，使用它会更好的性能......

```
$("a.save #dnsTitle").removeClass("disabled"); 
```

我遇到的问题是这根本不起作用！有人可以澄清做选择器的真正最佳方法吗？

我正在开发一个现有的项目，该项目有一些非常长的选择器，我正在尽我所能改进它们，但似乎我得到了错误的信息或过时的信息。我正在使用 jQuery 2.0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T00:21:41.050

“Bottom Up/Right to Left/Leaf to Root”的概念仅与选择器解析器的实现有关，与使用中选择器的顺序无关。

## 用法：

从使用的角度来看，选择器是从左到右“读取”的，您的第一个选择器是您的根，随后的选择器是您的后代。返回匹配最后一个选择器的元素。所以：

`#dnsTitle a.save`- 查找具有 id 的元素，`dnsTitle`并从那里查找`a`具有 class 的后代元素`save`。你最终`a`得到了 class 的元素`save`。

`a.save #dnsTitle`- 查找`a`具有 class 的元素，`save`并从中找到 id 为 的后代`dnsTitle`。你最终得到任何带有 id 的元素`dnsTitle`

## 解析：

现在从解析的角度来看，有两种常用的方法来解析选择器字符串，它们是“自上而下”和“自下而上”：

*   **自上而下/从根到叶/从左到右**

    如果您已经学习过数据结构课程，那么这就是您通常解析树的方式。您找到要开始的节点，这将是您的第一个选择器。然后，您逐步找到后续节点。

    这种方法的一个问题是它使用递归方法并使用大量内存，尤其是当您的树很大时。此外，回溯问题也是一个问题，因为后续选择器是*后代*，并且匹配的深度可能会有所不同。下一个选择器可能匹配一个*伟大的^N*孙子。递归深入 N 步以找到那个伟大的^N 孩子并采取 N 步返回。

*   **自下而上 / 从右到左 / 叶到根**

    使用这种方法，解析器会查找与最后一个选择器匹配的所有元素，最终得到一个匹配数组。使用该匹配数组，如果它们与后续的先前选择器匹配，则过滤它们。

    这种方法的优点是你有一个固定的数组来处理，而不是一个可变深度的树。此外，您正在线性过滤，因为在这种情况下，一个节点只能有一个父节点，而自顶向下处理多个子节点。这也意味着您只需要循环来完成这项工作，而不是递归。一个循环可以遍历每个结果，而另一个嵌套循环遍历每个祖先（如果它与后续的先前选择器匹配）。

# ios - 使用 RestKit 导致核心数据崩溃的多个 RKResponseDescriptor

> ID：16137635
> 
> 赞同：0
> 
> 时间：2013-04-22T00:16:47.067
> 
> 标签：ios, core-data, restkit

我为每个服务调用在单例中创建我的 RestKit 映射，例如：

```
- (void)setupMapping
{
RKObjectManager *objectManager = [RKObjectManager sharedManager];
RKEntityMapping *challengesMapping  = [RKEntityMapping    mappingForEntityForName:@"Challenge" inManagedObjectStore:[objectManager managedObjectStore]];

[challengesMapping addAttributeMappingsFromDictionary:@{
 @"uuid": @"uuid",
 @"title": @"title",
 @"description": @"challengeDescription",
 @"icon": @"icon",
 @"active_from": @"activeFrom",
 @"active_to": @"activeTo",
 @"trigger": @"trigger",
 @"show_in_feed": @"showInFeed",
 @"points": @"points",
 @"trigger": @"trigger",
 @"type": @"type",
 @"min_level": @"minLevel"
 }];
 challengesMapping.identificationAttributes = @[ @"uuid" ];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:challengesMapping
                                                                                   pathPattern:CHALLENGE_PATH
                                                                                       keyPath:@"challenges"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:SUCCESS]];
[objectManager addResponseDescriptor:responseDescriptor];

RKObjectMapping *sessionMapping = [RKObjectMapping mappingForClass:[TimeStamp class]];
[sessionMapping addAttributeMappingsFromArray:@[@"ts"]];

[objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:sessionMapping
                                                                             pathPattern:CHALLENGE_PATH
                                                                                 keyPath:nil
                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]];

} 
```

和

```
- (void)setupMapping
{
   RKObjectManager *objectManager = [RKObjectManager sharedManager];
RKEntityMapping *festivalsMapping  = [RKEntityMapping mappingForEntityForName:@"Festival" inManagedObjectStore:[objectManager managedObjectStore]];

[festivalsMapping addAttributeMappingsFromDictionary:@{
 @"uuid": @"uuid",
 @"festival": @"festivalDescription",
 @"start_ts": @"start_ts",
 @"end_ts": @"end_ts",
 @"title": @"title"
 }];
festivalsMapping.identificationAttributes = @[ @"uuid" ];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:festivalsMapping
                                                                                   pathPattern:GET_FESTIVALS_PATH
                                                                                       keyPath:@"festivals"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:SUCCESS]];
[objectManager addResponseDescriptor:responseDescriptor];
RKObjectMapping* sessionMapping = [RKObjectMapping mappingForClass:[TimeStamp class]];
[sessionMapping addAttributeMappingsFromArray:@[@"ts"]];

[objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:sessionMapping
                                                                             pathPattern:GET_FESTIVALS_PATH
                                                                                 keyPath:nil
                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]];
} 
```

第一个映射（挑战）的第一个服务器调用工作正常，但是当我调用第二个（节日映射）时，我得到错误：“对象的持久存储无法从此 NSManagedObjectContext 的协调器访问”。我知道这可能是 Core Data 中的一个线程问题，但我在我的代码中找不到原因。

我在控制台中得到以下信息：

（lldb）po $r0 错误：无法实现结构：无法读取 r0（实现）执行时出错，无法 PrepareToExecuteJITExpression（lldb）寄存器读取通用寄存器：r4 = 0x00000000 r5 = 0x00066e95 MyApp `main + 1 at main.m:14 r6 = 0x00000000 r7 = 0x2fd9ccf8 r8 = 0x2fd9cd10 r10 = 0x00000000 r11 = 0x00000000 r12 = 0x00000148 sp = 0x2fd9ccd4 lr = 0x00066f09 MyApp`main + 117在 main.m:16 pc = 0x00066f09 MyApp`main + 117 在 main.m:16 cpsr = 0x00000010 5 个寄存器不可用。

编辑

这是服务/映射类之一的完整示例。我以前见过类似的模式，即使用 GCD 单例。我也不认为 TimeStamp 根据下面的评论是重复的，因为 pathPatterns 是不同的。正确的？我确实尝试删除它们，但同样的问题。这是预期的，因为它们没有得到 Core Data 的支持

```
#import "ChallengeService.h"

static ChallengeService __strong *defaultService = nil;

#define CHALLENGE_PATH @"/api/challenges"

@implementation ChallengeService

+ (ChallengeService *)defaultService
{
static dispatch_once_t pred;
dispatch_once(&pred, ^{
    defaultService = [[self alloc] initWithPath:CHALLENGE_PATH];
    [defaultService setupMapping];
});

return defaultService;
}

- (void)setupMapping
{
RKObjectManager *objectManager = [RKObjectManager sharedManager];
RKEntityMapping *challengesMapping  = [RKEntityMapping     mappingForEntityForName:@"Challenge" inManagedObjectStore:[objectManager managedObjectStore]];

[challengesMapping addAttributeMappingsFromDictionary:@{
 @"uuid": @"uuid",
 @"title": @"title",
 @"description": @"challengeDescription",
 @"icon": @"icon",
 @"active_from": @"activeFrom",
 @"active_to": @"activeTo",
 @"trigger": @"trigger",
 @"show_in_feed": @"showInFeed",
 @"points": @"points",
 @"trigger": @"trigger",
 @"type": @"type",
 @"min_level": @"minLevel"
 }];
 challengesMapping.identificationAttributes = @[ @"uuid" ];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor    responseDescriptorWithMapping:challengesMapping
                                                                                      pathPattern:CHALLENGE_PATH
                                                                                           keyPath:@"challenges"
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:SUCCESS]];
[objectManager addResponseDescriptor:responseDescriptor];

RKObjectMapping *sessionMapping = [RKObjectMapping mappingForClass:[TimeStamp class]];
[sessionMapping addAttributeMappingsFromArray:@[@"ts"]];

[objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:sessionMapping
                                                                             pathPattern:CHALLENGE_PATH
                                                                                 keyPath:nil
                                                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]]; }

- (void)getChallengesFromDate:(NSDate *)date
                onSuccess:(DidSucceedBlock)successBlock
                  onError:(DidFailWithErrorBlock)failBlock
{    
[defaultService getWithData:nil
                   fromDate:date
                     onLoad:^(id object) {
                         successBlock(object);
                     } onError:^(NSError *error) {
    failBlock(error);
}];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T06:32:03.890

首先，您不能多次将相同的映射添加到同一个对象管理器。考虑使用多个不同的对象管理器（每组请求一个，即每个单例一个）或预先定义公共映射。

然后，在您的问题中添加有关何时创建和配置这些单例的详细信息。它们中的任何一个是在后台线程上运行还是在应用程序启动时预先完成所有配置。如果您知道应用程序每次使用时都会使用所有配置，那么请提前做好所有事情，因为构建配置的成本很低。

您需要小心，`defaultService`因为目前您会将访问器方法与静态变量混淆。在方法内定义静态变量并命名`_defaultService`。然后，您应该将 setup 方法移入`initWithPath`，因为它是初始化的一部分。确保您正确调用了访问器方法，并且您没有从后台线程调用它（至少是第一次，并且可能是每次）。

# c - 为什么我不能在此链表的索引 0（头）处插入新节点？

> ID：16137638
> 
> 赞同：2
> 
> 时间：2013-04-22T00:17:05.117
> 
> 标签：c, singly-linked-list

**编码：**

```
/*
 * File: problem5.c
 * Author: levihackwith
 * Description: Write a Pop() function that is the inverse of Push(). Pop() takes a non-empty list, deletes the head node, and returns the head node's data.
 */

#include <stdio.h>
#include <stdlib.h>

struct node { // Our custom node data type
    int data;
    struct node *next;
};

/*
 * Adds a node to a linked list.
 *
 * This method was taken from the Appendix of the LinkedListProblems.pdf file from Stanford University.
 */
void Push(struct node** headRef, int newData) {
    struct node* newNode = malloc(sizeof (struct node)); // allocate node
    newNode->data = newData;
    newNode->next = (*headRef);
    (*headRef) = newNode;
};

void InsertNth(struct node** headRef, int insertAt, int newData) {
    struct node* newNode = malloc(sizeof (struct node)); // allocate node
    struct node* current = *headRef;
    int index = 0;

    newNode->data = newData;

    while (current != NULL) {
        if (insertAt == 0 && index == 0) {
            newNode->next = (*headRef);
            (*headRef) = newNode;
            current = *headRef;
            printf("Current's data is now %d at index %d \n\n", current->data, index);
        } else {
            if (index == (insertAt - 1)) {
                printf("I inserted %d at index %d \n", newData, insertAt);
                newNode->next = current->next;
                current->next = newNode;
            }
        }
        current = current->next;
        index++;
    }
}

/*
 * Builds a linked list of a given size.
 */
struct node* BuildList(int numNodes) {
    struct node* head = NULL; // Start with the empty list
    int i;

    for (i = numNodes; i >= 1; i--) {
        Push(&head, i); // Use Push() to add all the data
    }
    return (head);
};

int main(void) {

    struct node* myLinkedList;
    struct node* current;
    int currentIndex = 0;
    int valToInsert = 45;
    int insertIndex = 0;

    myLinkedList = BuildList(5);
    current = myLinkedList;

    InsertNth(&myLinkedList, insertIndex, valToInsert);
    while (current != NULL) {
        printf("The value at index %d is %d \n", currentIndex, current->data);
        currentIndex++;
        current = current->next;
    }

    return 0;
}; 
```

**输出**

```
Current's data is now 45 at index 0

The value at index 0 is 1
The value at index 1 is 2
The value at index 2 is 3
The value at index 3 is 4
The value at index 4 is 5 
```

上面的输出是当插入新值的索引为零时。这是在索引 1 处插入时的输出。

```
I inserted 45 at index 1

The value at index 0 is 1
The value at index 1 is 45
The value at index 2 is 2
The value at index 3 is 3
The value at index 4 is 4
The value at index 5 is 5 
```

如您所见，0 不能按预期工作，而 1 可以。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:23:37.783

> 我究竟做错了什么？

`current`您在调用之前进行设置`InsertNth`。当您调用`InsertNth`insert at 时`0`，`myLinkedList`将发生变化，因此`current`将指向第二个节点。

通话`current = myLinkedList;`后`InsertNth`移至解决问题：

```
myLinkedList = BuildList(5);
InsertNth(&myLinkedList, insertIndex, valToInsert);
current = myLinkedList; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:24:21.737

切换这两行：

```
current = myLinkedList;
InsertNth(&myLinkedList, insertIndex, valToInsert); 
```

按照这个顺序，您将设置`current`到列表第一部分的头部，然后向头部添加更多内容。这改变了头部，但`current`仍然具有其原始值。

# django - django - 将 %0D 添加到 url 的 docfile？

> ID：16137641
> 
> 赞同：1
> 
> 时间：2013-04-22T00:17:59.673
> 
> 标签：django

我有一个奇怪的问题，`docfile.url`我们服务器上的文件正在将`%0D`（回车）添加到 url 的末尾。这只发生在我手动链接的文件上。我的意思是，一个目录中有大约 1,000 个文件，我创建了一个 CSV 文件，其中包含每个文件的`id`和，并使用一些代码`filename`将它们添加到数据库中。`mysql`所有通过我的 django 应用程序的界面链接正常上传的文件 - 单击它们的链接会正确打开文件。

这是 CSV 文件的示例：

```
792,asbuilts/C0010.pdf
793,asbuilts/C0011.pdf
794,asbuilts/C0012.pdf
795,asbuilts/C0013.pdf
796,asbuilts/C0014.pdf
797,asbuilts/C0015.pdf
798,asbuilts/C0016.pdf
799,asbuilts/C0017.pdf 
```

我在目录中有所有这些 asbuilt 文件`static_media/asbuilts/`。在mysql中我运行了这个命令：

```
load data local infile '/srv/www/cpm/CPM_CSV_Files/comm_asbuilts.csv' into table systems_asbuilt fields terminated by ',' lines terminated by '\n' (id, docFile); 
```

的示例输出`select * from systems_asbuilt`如下所示：

```
 |846 | asbuilts/C0057.pdf
 |847 | asbuilts/C0059.pdf
 |848 | asbuilts/C0060.pdf
 |849 | asbuilts/C0061.pdf
 |850 | asbuilts/C0062.pdf
 |851 | asbuilts/C0063.pdf
 |852 | asbuilts/C0064.pdf 
```

一切看起来都不错吧？

但是当我查看创建的链接时，它看起来像这样：

```
`www.ourdomain.com/static_media/asbuilts/R0546.pdf%0D' 
```

如果我从链接中手动删除`%0D`，该文件将按预期打开。知道为什么那里有额外`%0D`的东西吗？它来自哪里？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:48:55.130

我的猜测是，这是：

`lines terminated by '\n'`

应该

`lines terminated by '\r\n'`

由于您用于浏览它的客户端，您的结果“看起来”正确，但是当检索到记录时，它仍然`\r`附加了它。

因此，您可以在将其加载到数据库之前或`.strip()`在生成链接之前将其剥离。

# perl - AWK如何打印多个信息并将所有信息重定向到文本文件

> ID：16137642
> 
> 赞同：0
> 
> 时间：2013-04-22T00:18:03.713
> 
> 标签：perl, awk

需要帮助另一个信息（例如我分析的文件的行数）并将这两个信息输出到文件 calle test.txt 我尝试使用此代码和代码错误：操作员预期

```
#!/usr/bin/perl

if ($#ARGV ==-1)
{
    print "Saisissez un nom de fichier a nalyser \n";
}
else
{
    $fname = $ARGV[0];
    open(FILE, $fname) || die ("cant open \n");
}
while($ligne=<FILE>)
{
    chop ($ligne);
    my ($elemnt1, $ellement2, $element3) = split (/ /, $ligne_);
}
system("awk '{print \$2 > "test.txt"}' $fname"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:26:35.777

尝试转义最后一行的引号，`test.txt`实际上是在传递给`system`.

```
system("awk '{print \$2 > \"test.txt\"}' $fname"); 
```

## 编辑：将行数添加到同一个文件

规则执行时，Awk 变量`NR`最终会保存输入中的行数。`END`尝试这个：

```
$outfile = '"test.txt"';
system("awk '{print \$2 > $outfile} END {print NR > $outfile}' $fname"); 
```

笔记：

1.  **注意**名称中`$outfile`没有任何有趣的字符。
2.  与 shell 不同，`>`两次使用都非常安全。[看这里。](https://www.gnu.org/software/gawk/manual/gawk.html#Redirection)

# php - 当用户单击链接 php 时更新数据库中的状态

> ID：16137647
> 
> 赞同：-1
> 
> 时间：2013-04-22T00:18:59.933
> 
> 标签：php, mysql, hyperlink

我试图让我的 php 网站根据用户单击的链接（两个之一）更新 mysql 数据库，但是，我要么在数据库中获取两个链接，要么只获取同一个链接。我正在使用 if 语句，因为我试图区分单击的链接。

我尝试使用`$_GET['state']`,`$_REQUEST['state']`重新排列我的代码，或者使用 2 个 if 语句而不是 1 个 else if 语句，但仍然没有帮助。（`curr_stat`是我的表），这是我的代码：

```
<?php
//if links are clicked, will write to database the status

$connect_error= 'Sorry, we are experiencing connection problems.';
$db_name = "database name";
$connection = @mysql_connect("some host", "some username","password") or die($connect_error);
$db3 = @mysql_select_db($db_name,$connection) or die($connect_error);

//if statement

$unlock = '<a href="doorlock.php?state=1">UNLOCK &nbsp;</a>&nbsp;';
echo $unlock;

$lock = '<a href="doorlock.php?state=0">LOCK</a>';
echo $lock;

if ($_GET['state'] == 1){
    $one = 1;
    mysql_query("INSERT INTO curr_stat(status) VALUES($one)");
}
elseif ($_GET['state'] == 0){
    $zero = 0;
    mysql_query("INSERT INTO curr_stat(status) VALUES($zero)");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:34:45.073

你的 if 语句有一个问题：

`state`如果未定义get 变量，则条件`($_GET['state'] == 0)`将返回 true。

因此，如果您在没有任何参数的情况下打开站点，则会插入状态 0 的新行。

这就是为什么你要么同时得到 0 和 1，要么得到 0 的两倍。

相反，您应该测试一个不等于零的值。

```
$unlock = '<a href="doorlock.php?state=1">UNLOCK &nbsp;</a>&nbsp;';
echo $unlock;

$lock = '<a href="doorlock.php?state=-1">LOCK</a>';
echo $lock;

if ($_GET['state'] == 1){
    $one = 1;
    mysql_query("INSERT INTO curr_stat(status) VALUES($one)");
}
elseif ($_GET['state'] == -1){
    $zero = 0;
    mysql_query("INSERT INTO curr_stat(status) VALUES($zero)");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:03:00.953

我让它工作了！我最终尝试了一些不同的东西。我有一个 html 文件，它还保存状态，一个整数，1 或 0，根据单击的链接而变化（doorlock.php?state=0，已锁定）。我使用了一个函数来打开该文件，并读取文件中的数据。我保存了这些数据，并有一个 if 语句写入数据库。这是我的代码：

```
 <?php
    //if links are clicked, will write to database the status

    $connect_error= 'Sorry, we are experiencing connection problems.';
    $db_name = "database name";
    $connection = @mysql_connect("some host", "some username","password") or         die($connect_error);
    $db = @mysql_select_db($db_name,$connection) or die($connect_error);

    //displays links
$unlock = '<a href="doorlock.php?state=1">UNLOCK &nbsp;</a>&nbsp;';
    echo $unlock;

    $lock = '<a href="doorlock.php?state=0">LOCK</a>';
    echo $lock;

//opens Lockstate.html file,and reads the data stored there
$file = "Lockstate.html";
$fh = fopen($file, 'r');
$data = fread($fh, 1);
fclose($fh);
$state = $data;

//if statement to know what to write to database depending on the new status
// & displays it on the page after being clicked
if($data == 1){
    echo 'Door is now unlocked.';
    $one = 1;
    mysql_query("INSERT INTO curr_stat(status) VALUES($one)");
}
if ($data == 0){
    echo 'Door is now locked.';
    $zero = 0; 
    mysql_query("INSERT INTO curr_stat(status) VALUES($zero)");
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T16:19:55.500

`<td> <?PHP echo "<a href='action.php?kisi=$id' onclick='return hs.htmlExpand(this, { objectType: &#39;iframe&#39; } )'>$ad $soyad</a>";?></td>`

单击链接时，其他用户无法单击（数据库无法更改）

# android - Android 到 ASP.NET 上传保存路径

> ID：16137649
> 
> 赞同：2
> 
> 时间：2013-04-22T00:19:15.050
> 
> 标签：android, asp.net-mvc, upload

我正在将图像从我的 android 设备上传到我的 ASP.NET MVC 服务器。

我想使用的保存路径是 `HttpContext.Server.MapPath("../") + "App_Data/" + HttpContext.User.Identity.Name + model.Firstname + "-" + model.Surname + "-" + System.IO.Path.GetFileName(Request.Files[0].FileName);`

哪个应该给 /App_Data/AccountName/firstname-surname-filename.jpg

当我在 MVC 本身使用

```
@Html.LabelFor(m => m.Firstname)
@Html.TextBoxFor(m => m.Firstname)            

@Html.LabelFor(m => m.Surname)
@Html.TextBoxFor(m => m.Surname)            

<label for="file1">Upload Image</label>
<input type="file" name="picture" id="picture" />      

<input type="submit"  /> 
```

为了从 Android 应用程序执行上传，我需要在 MVC 中使用 javascript，如下所示

```
<script type="text/javascript">
function showAndroidToast(toast) 
{
    Android.showToast(toast);
}
</script> 
<input type="submit" value="Scan Fingerprint" onClick="showAndroidToast('Scanning fingerprint')" />' 
```

showToast 函数是我的 android 应用程序中的上传函数。

我可以从 android 获取要上传的图像，但即使我已经登录到我的 ASP.NET 应用程序，保存路径也不适用于`HttpContext.User.Identity.Name`我至少需要工作的路径。如果我也添加`[Authorize]`到我的上传控制器，上传将无法正常工作，这进一步表明它没有使用登录信息。

从 Android 设备上传到 ASP.NET Web 服务时是否可以这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T04:22:35.530

**由于图像上传是在新线程 (JavascriptInterface) 上执行的，因此您需要通过令牌**或**特定文件名**以某种方式识别正在上传的图像。上传文件后，您可以在 MVC 中“搜索”该文件。一旦它捕获到文件已上传，它可能会使用`HttpContext.User.Identity.Name`等重命名或将文件移动到您选择的指定文件夹。

例如，我将创建一个随机字符串 (ndNk3KasL.jpg)，将其与上传触发器一起传递，并将文件命名为 this。收到上传请求后，我会检查它是否是正确的文件名 ndNk3KasL，然后重命名/移动它。

# ruby-on-rails - 如何将本地文件上传到 Carrierwave 模型？

> ID：16137651
> 
> 赞同：15
> 
> 时间：2013-04-22T00:19:25.030
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在使用 Carrierwave 处理图像上传，但我没有使用表单，而是使用服务器中的本地文件。

我怎样才能使这项工作？

```
@user = User.first
image_path = "/tmp/pic-s7b28.jpg"

@user.image = image_path
@user.save! 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-22T00:28:52.907

```
@user = User.first
image_path = "/tmp/pic-s7b28.jpg"

@user.image = File.open(image_path)
@user.save! 
```

[您可以在carrierwave自述文件](https://github.com/jnicklas/carrierwave)中查看示例

# mysql - 计算嵌套树下项目的最有效方法

> ID：16137652
> 
> 赞同：3
> 
> 时间：2013-04-22T00:19:52.777
> 
> 标签：mysql, performance, tree

因此，我希望`category (x)`在我的网站上提供样式产品数量。

我目前正在使用 MySQL。

我的类别表如下所示： `Categories (Id, TreeLeft, TreeRight, Level, Name)`- 'Level' 是节点深度。

输入的类别如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/f0UaV.png)

我的项目 > 类别关系表如下所示： `ItemCategories (ItemId, CategoryId)`

假设我有：

*   “TUBE”下的 1 项
*   “LCD”下的 2 个项目
*   'FLASH' 下的 1 项
*   “2 WAY-RADIO”下的 1 项

我怎样才能最有效地查询我的项目（大数据库）+类别（4000个数据库），以产生：

```
电子产品 (5)
 - 电视 (3)
   - 管 (1)
   - 液晶显示器 (2)
 - 便携式电子产品 (2)
   - MP3 播放器 (1)
    - 闪光 (1)
   - 2 路收音机 (1)

```

注意只返回那些包含产品的类别，并正确地将它们计算在树上。

非常感谢任何帮助。

编辑：在本地重新创建环境的数据库代码：

```
如果不存在“类别”，则创建表（
  `Id` int(11) NOT NULL auto_increment,
  `TreeLeft` mediumint(7) NOT NULL,
  `TreeRight` mediumint(7) NOT NULL,
  `Level` tinyint(3) NOT NULL,
  `名称` varchar(255) NOT NULL,
  唯一键`Id`（`Id`），
  KEY `TreeLeft` (`TreeLeft`)
) 引擎=MyISAM 默认字符集=latin1 AUTO_INCREMENT=11 ；

插入`Categories`（`Id`、`TreeLeft`、`TreeRight`、`Level`、`Name`）值
(1, 1, 20, 1, '电子学'),
(2, 2, 9, 2, '电视'),
(3, 10, 19, 2, '便携式电子产品'),
(4, 3, 4, 3, '管'),
(5, 5, 6, 3, 'LCD'),
(6, 7, 8, 3, '等离子'),
(7, 11, 14, 3, 'MP3 播放器'),
(8, 15, 16, 3, 'CD 播放器'),
(9, 11, 14, 3, '2 Way Radios'),
（10、12、13、4，“闪光”）；

如果不存在`ItemCategories`，则创建表（
  `CategoryId` int(11) NOT NULL,
  `ItemId` int(11) 非空，
  KEY `CategoryId` (`CategoryId`)
) 引擎=MyISAM 默认字符集=latin1；

插入`ItemCategories`（`CategoryId`，`ItemId`）值
(4, 3442),
(5, 3441),
(5, 3456),
(9, 5343),
(10, 5423);

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:30:02.820

请参阅Mike Hillyer 在[管理 MySQL 中的分层数据中关于此主题的经典文章的小节，标题](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)*为嵌套集中的聚合函数*

# java - 线程“主”java.net.SocketException 中的异常：连接重置

> ID：16137656
> 
> 赞同：2
> 
> 时间：2013-04-22T00:20:08.297
> 
> 标签：java, sockets, tcp, ioexception

`Server.java`

```
public class Server {
    public static BufferedReader inFromClient = null;
    public static DataOutputStream outToClient = null;
    public static Socket connectionSocket = null;
    static ServerSocket welcomeSocket = null;
    static String path = null;

    public static void main(String[] args) throws IOException {
        welcomeSocket = new ServerSocket(1001);

        FileInputStream fin = null;
        FileOutputStream fout = null;

        while (true) {

            connectionSocket = welcomeSocket.accept();

            inFromClient = new BufferedReader(new InputStreamReader(
                    connectionSocket.getInputStream()));

            outToClient = new DataOutputStream(
                    connectionSocket.getOutputStream());
            path = inFromClient.readLine();

            if (path != null) {
                String fileName = new File(path).getName();

                File file = new File(path);
                File file2 = new File(fileName);

                fin = new FileInputStream(file);

                fout = new FileOutputStream(file2);

                byte[] buffer = new byte[1024];
                int bytesRead;
                while ((bytesRead = fin.read(buffer)) > 0) {
                    fout.write(buffer, 0, bytesRead);
                }

                fin.close();
                fout.close();
            }

        }
    }
} 
```

我收到此错误

```
Exception in thread "main" java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.BufferedReader.fill(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at Server.main(Server.java:37) 
```

这就是我想要做的。

在我运行 Server.java 之后再运行 Client.java。我尝试按选择按钮，但没有选择任何文件，然后关闭文件选择器。

在我的理解是这条线

```
 path = inFromClient.readLine(); 
```

当它尝试读取线时，但没有找到任何东西，这就是为什么它说未知来源，但我该如何解决这个问题？

在我的`Client.java`我正在尝试`close()`使用套接字，但它根本不关闭....

更新我已经通过在发生错误的 server.java 上放置 try&catch 来修复错误，这解决了问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:04:13.003

> 当它尝试读取Line，但没有找到任何东西，这就是为什么它说未知来源

不，不是。那是指相关源代码没有使用调试信息编译，因此在打印堆栈跟踪时源代码行号和文件不可用。

对这种情况最常见的解释是您写入的连接已经被对等方关闭：换句话说，应用程序协议错误。

为什么要编写一个服务器，其功能是根据客户端的输入将文件从一个位置复制到另一个位置？

# c# - System.Environment.Version 提供不准确的值

> ID：16137658
> 
> 赞同：9
> 
> 时间：2013-04-22T00:20:29.410
> 
> 标签：c#, .net

我有一个简单的问题：当我在 Visual Studio 2012 中转到 HELP->About 时，窗口显示我正在使用的 .NET 版本是 4.5.50709。但是，当我执行以下代码时：

```
Console.WriteLine(Environment.Version); 
```

我得到版本 4.0.30319.18034。是什么赋予了？在 Troelsen 的*Pro C# 5 & .NET 4.5 Framework*中，第 81 页指出 Version 属性返回一个表示 .NET 平台版本的对象。这是不正确的吗？上一个问题的线程表明此属性返回 CLR 版本。如果是这种情况，Version 对象的用途是什么（例如，知道 CLR 版本而不是框架版本有什么用），以及如何实际获取框架版本本身？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T00:22:32.277

CLR（公共语言运行时）版本是 4.0.30319.18034。它以 4.0.30319 开头，因为 .NET 4.5 是 .NET 4.0 程序集的就地升级。

> 4.5 更新完全替换了 .NET 4.0 运行时并将实际版本号设置为 v4.0.30319。
> 
> ^(（[来源 1](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)，[来源 2](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)）)

但是您的版本号可能代表带有一些更新的 .NET 4.5，正如用户 Daniel从[该列表中推断的那样：](https://stackoverflow.com/a/12972517/146622)

> 以下是我见过的一些运行时版本示例：
> 
> *   4.0.30319.1 = .NET 4.0 RTM
> *   4.0.30319.269 = 我们在从用户收集的数据中看到的最常见的 .NET 4.0 版本
> *   4.0.30319.544 = 我们的一小部分用户已安装的另一个 .NET 4.0 版本
> *   4.0.30319.17626 = .NET 4.5 RC
> *   4.0.30319.17929 = .NET 4.5 RTM
> *   4.0.30319.18010 = 我的 Windows 8 机器上的当前版本

主要版本号、次要版本号和内部版本号没有改变，所以我认为他们认为 .NET 4.0 和 4.5 之间的差异不会大到足以影响大多数人。预期某些版本 4.0.30319 的 .NET 4.0 应用程序在 .NET 4.5 下仍可按预期工作。

* * *

无论您为 .NET 4.0 还是 4.5 编写代码，您都在针对完全相同的 .NET 程序集进行编译。唯一的区别是 .NET 4.5 中的一些新类在针对 .NET 4.0 进行编译时是*隐藏*的（就好像它们从未存在过一样）。因此，区分 .NET 4.0 和 4.5 的唯一可靠方法似乎是 Christian.K[在他的帖子中](https://stackoverflow.com/questions/8517159/how-to-detect-at-runtime-that-net-version-4-5-currently-running-your-code/8543850#8543850)提出的相当骇人听闻的方法，它不涉及版本号：

> 该类`ReflectionContext`在 .NET 框架 4.5 中似乎是全新的，并且可以方便地使用`mscorlib`. 所以你可以做这样的事情。
> 
> ```
> public static bool IsNet45OrNewer()
> {
>     // Class "ReflectionContext" exists from .NET 4.5 onwards.
>     return Type.GetType("System.Reflection.ReflectionContext", false) != null;
> } 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T01:28:16.837

作为一个练习，我想知道 Visual Studio 如何检索 .NET 版本。您可以查询注册表以查看安装了哪些版本，我想出了以下代码：

```
static void Main(string[] args)
{
    Console.WriteLine("The following .NET versions are installed:");
    var vers = SearchRegistry(Registry.LocalMachine, "Software\\Microsoft\\NET Framework Setup\\NDP", "Version")
        .GroupBy(v => v)
        .Select(v => (string)v.Key)
        .OrderBy(s => s);

    foreach (string s in vers)
        Console.WriteLine(s);

    Console.WriteLine(string.Format("Newest Installed .NET version: {0}", vers.Last()));
}

private static IEnumerable<object> SearchRegistry(RegistryKey root, string subkey, string search)
{
    foreach (string sub in root.OpenSubKey(subkey).GetSubKeyNames())
    {
        foreach (string val in root.OpenSubKey(subkey).OpenSubKey(sub).GetValueNames())
            if (val == search)
                yield return root.OpenSubKey(subkey).OpenSubKey(sub).GetValue(val);

        foreach (var o in SearchRegistry(root.OpenSubKey(subkey), sub, search))
            yield return o;
    }
} 
```

# javascript - 仅当设置为全屏模式时，如何防止对 jwplayer5 视频的 PLAY 和 PAUSE 单击操作？

> ID：16137661
> 
> 赞同：1
> 
> 时间：2013-04-22T00:20:48.380
> 
> 标签：javascript, jwplayer

我正在使用 jwplayer 5，当我的视频设置为全屏模式时，我需要一种方法来防止执行点击操作（如果暂停则播放，如果正在播放则暂停）。

我无法管理它。有解决办法吗？

这是视频：

```
var video1 = jwplayer('vid1').setup({
            'flashplayer': 'html/js/jwplayer5/player.swf',
            'id': 'playerVid1',
            'width': VIDPLAYER_CTRL.BIGVIDEO_WIDTH,
            'height': VIDPLAYER_CTRL.BIGVIDEO_HEIGHT,
            'file': VIDPLAYER_MODEL.MAIN_VIDEO['path'],
            'provider': 'http',
            'startparam': 'start',
            'controlbar': 'bottom',
            'image': VIDPLAYER_MODEL.MAIN_VIDEO['path_img'],
            'skin': 'html/js/jwplayer5/videoSkin/videoSkin.xml'
            //'plugins': 'clickproxy',
            //'clickproxy.state' : 'play'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:48:30.713

由于您使用的是 JW5：

使用这个插件 - [http://www.longtailvideo.com/addons/plugins/68/Clickproxy](http://www.longtailvideo.com/addons/plugins/68/Clickproxy)

将“插件”变量设置为“clickproxy”

将变量“clickproxy.state”设置为“play”

您的播放器将不再可点击。

不过，我不确定如何使它特定于全屏模式。

# php - PHP 网站：获取每个图像 ID 的 Disqus 评论和评论计数

> ID：16137663
> 
> 赞同：1
> 
> 时间：2013-04-22T00:20:59.643
> 
> 标签：php, disqus

我正在尝试获取与我的 PHP 站点的特定图像 ID 关联的 DISQUS 评论和评论计数。

**1）获取评论数：**

为了获得评论计数，我遵循了 DISQUS 的指南，但它只是给了我一个指向漫画评论位置的链接……而不是总数……他们说：

将 #disqus_thread 附加到链接中的 href 属性。这将告诉 Disqus 查找哪些链接并返回评论计数。例如：

```
<a href="http://foo.com/bar.html#disqus_thread">Link</a>. 
```

但是，如果我的 url 字符串是这样的，我将如何获得该计数：

```
<a href=".?action=viewimage&site=comics&id=66">Link</a> 
```

所以我的问题是：

*   我会在哪里附加#disqus_thread？
*   如何从该漫画 URL 获取评论数并将这些总评论显示在另一页上？为什么它只给我一个评论链接而不是相关漫画的评论编号？

**2) 获取特定评论，例如最新或最受欢迎的**

除了他们说我可能需要编写自己的脚本之外，我还没有真正找到任何关于此的文档...

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:20:51.850

评论计数脚本基本上会查找线程并返回与 URL 匹配的评论计数 - 所以它需要是一个绝对 URL 才能工作。

假设您正在查看[此文档](http://help.disqus.com/customer/portal/articles/565624)，您还会注意到`data-disqus-identifier`可以使用一个可选属性，您可以在评论嵌入代码中将其与[disqus_identifier结合使用。](http://help.disqus.com/customer/portal/articles/472099)这将覆盖 URL 查找，而是拉取标识符的注释计数。但是，您仍然需要将`#disqus_thread`锚附加到您的 URL。

对于第二个问题，您需要使用 API 编写小部件以在嵌入之外显示评论。您可以采取几种不同的方法：

1.  使用[posts/listPopular](http://disqus.com/api/docs/posts/listPopular/)或[posts/list](http://disqus.com/api/docs/posts/list/)端点（与您的`disqus_identifier`）直接从 API 加载评论

2.  加载大量线程详细信息并使用[线程/集](http://disqus.com/api/docs/threads/set/)端点使用最新评论的 RSS 提要。您也可以使用它直接从 API 获取评论计数，而不是使用评论计数脚本。

# windows - cURL 命令上传文件的 PowerShell 等效项

> ID：16137665
> 
> 赞同：7
> 
> 时间：2013-04-22T00:21:16.693
> 
> 标签：windows, post, powershell, curl, http-post

我可以使用以下 cURL 命令向我的服务器发送 HTTP POST 文本文件：

```
curl -i -F file=@file.txt http://www.website.com/put_file 
```

服务器期待来自 $_FILES['file'] 的文件。

到目前为止，我有以下内容，但它不起作用：

```
$url = http://www.website.com/put_file
$file = "c:\file.txt"
$wc = new-object System.Net.WebClient
$wc.UploadFile($url, $file.FullName) 
```

它返回0，它没有上传到服务器

如何将文件作为 $_FILES['file'] 发送？另外，如何查看服务器的响应？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T01:08:57.550

我认为应该是这样的：

```
$body = "file=$(get-content file.txt -raw)"
Invoke-RestMethod -uri http://www.websetite.com/put_file -method POST -body $body 
```

注意：这确实需要 PowerShell V3。此外，您可能需要将`-ContentType`参数指定为`"application/x-www-form-urlencoded"`. 我建议获取[Fiddler2](http://fiddler2.com/)并使用它来检查 curl 和 Inovke-RestMethod 情况下的请求，以帮助获取正确的 irm 参数。这是假设文件内容相当小且非二进制。如果没有，您可能需要转到内容类型 multipart/form-data。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-03T15:34:36.487

在 Powershell 中，您可以使用 curl.exe 而不是 curl（是的，是不同的命令：[http](http://get-cmd.com/?p=5181) ://get-cmd.com/?p=5181 ）

```
curl.exe -i -F file=@file.txt http://www.website.com/put_file 
```

或者您可以使用 Powershell 3 中的 Invoke-RestMethod

有关 Powershell 3 中的 Invoke-RestMethod 的更多详细信息，请访问：[https ://superuser.com/questions/344927/powershell-equivalent-of-curl](https://superuser.com/questions/344927/powershell-equivalent-of-curl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T18:01:39.173

为了解决这个问题，我下载了 windows 的 curl.exe，并且仍然使用 curl。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-04-25T00:17:58.737

在使用 fiddler 尝试匹配 curl 几个小时后，我放弃了，只使用了这个家伙的功能（见下面的链接）。像魅力一样工作。

[http://blog.majcica.com/2016/01/13/powershell-tips-and-tricks-multipartform-data-requests/](http://blog.majcica.com/2016/01/13/powershell-tips-and-tricks-multipartform-data-requests/)

# android - Android使用switchpreference设置颜色背景

> ID：16137667
> 
> 赞同：0
> 
> 时间：2013-04-22T00:21:30.773
> 
> 标签：android, colors, switch-statement, android-preferences, setbackground

如何更改我正在尝试开发的应用程序的颜色。

我在首选项菜单下使用了 switch 语句，但不知道如何编写代码，这样当用户单击 switch 时，整个应用程序的背景颜色都会发生变化。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:55:14.793

您可以让用户使用首选项更改主题。这将根据选择更改整个应用程序的背景颜色。以下线程正在讨论相同的问题：[How to change current Theme at runtime in Android](https://stackoverflow.com/questions/2482848/how-to-change-current-theme-at-runtime-in-android)。希望这可以帮助。

# c - C 程序无法识别头文件中的常量

> ID：16137678
> 
> 赞同：0
> 
> 时间：2013-04-22T00:23:00.123
> 
> 标签：c, gcc, header-files

我有以下非常简单的头文件：

```
#ifndef __ZYNQ_CSORT_H__
#define __ZYNQ_CSORT_H__
#define CONSTANT    5
#endif 
```

我将此头文件包含在同一文件夹中的另一个 C 文件中。预处理器根本不会抱怨头文件包含，但是当我尝试打印常量的值时，它告诉我它没有定义。有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:21:34.783

当我不确定预处理器在做什么时，我发现自己运行 C 预处理器通常会很有意义。例如，给定`test1.h`：

```
#ifndef TEST1_H
#define TEST1_H
/* In TEST1_H */
#define CONSTANT 5
#endif 
```

...和`test1.c`：

```
#include "test1.h"
#include "test1.h"

int main(int argc, char **argv) {
    return CONSTANT;
} 
```

...运行`cpp -C test1.c test1.c.out`（`-C`参数使预处理器保留注释）给出`test1.c.out`如下：

```
# 1 "test1.c"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "test1.c"
# 1 "test1.h" 1

/* In TEST1_H */
# 2 "test1.c" 2

int main(int argc, char **argv) {
 return 5;
} 
```

因此，就我而言，我可以确信包含了正确的头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:26:50.013

如果在解析此文件时已经定义了 __ZYNC_CSORT_H，则 CONSTANT 将是未定义的。

# core-data - 你可以在视图之间传递一个 TreeController 吗？

> ID：16137679
> 
> 赞同：0
> 
> 时间：2013-04-22T00:23:03.607
> 
> 标签：core-data, cocoa-bindings, nsoutlineview, nstreecontroller

我有一个标准的主从接口，我正在使用 Coredata 和可可绑定。

主列表使用 NSOutlineView 和 NSTreeController，这些项目保持静态，但不同的细节视图被换入和换出。

那么，**如何设置数组控制器在不同细节视图中的内容，以对应Masterview中outlineview中的选择呢？**

如果所有数组/树控制器都在同一个 .xib 文件中，这很简单。最初，我尝试从 Treecontroller 创建一个 Outlet，并在创建它们时将其传递给其他视图，但我认为这是不正确的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:50:57.303

您可以将数组控制器或树控制器用于任意数量的视图。在您的具体示例中，我将创建树控制器的 masterview 所有者（除非您有令人信服的理由再上一层楼）。然后每个被交换的细节视图也会有视图控制器。该控制器将具有可分配的“树控制器”属性，该属性将在其视图加载到“主”树控制器的值之前设置。在 Nib 文件中，您可以像往常一样使用绑定（到文件所有者的树控制器）。

# python - 运行GDAL时是否可以禁用cmd窗口？

> ID：16137680
> 
> 赞同：2
> 
> 时间：2013-04-21T17:14:42.900
> 
> 标签：python

运行GDAL时是否可以禁用cmd窗口？类似于“静音模式”。

我用 ：

```
os.system('gdal_translate -of GTiff %s %s'%(in1, out1)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:18:35.613

您可以使用[subprocess.Popen](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)类。

`Popen`使用instead of 的一个优点`call`是它很容易获得命令输出（`call`您需要传入一个类似文件的对象来获取 stdout/stderr，因此如果您需要在字符串变量中获取它们，则需要使用[StringIO ）。](http://docs.python.org/2/library/stringio.html)

这是一个例子：

```
def runcmd(cmd):
    ''' Run a command
        cmd = list of arguments or command string
        Returns  Returns (exit_code,stdout,stderr)
    '''
    import subprocess
    proc = subprocess.Popen(cmd,stdout=subprocess.PIPE,stderr=subprocess.PIPE)
    stdout,stderr=proc.communicate()
    exit_code=proc.wait()
    return exit_code,stdout,stderr

exit_code,stdout,stderr=runcmd('gdal_translate -of GTiff %s %s'%(in1, out1))
# can also use a list, e.g.
# exit_code,stdout,stderr=runcmd(['gdal_translate', '-of', 'GTiff', in1, out1])

if exit_code: print 'Error ocurred:',stderr
else: print 'Success!',stdout 
```

如果不需要 stdout/stderr 文本，可以使用 subprocess.call：

```
exit_code=subprocess.call(['gdal_translate', '-of', 'GTiff', in1, out1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:15:18.327

您可以通过切换到`subprocess`.eg 模块`subprocess.call`并使用`shell = True`参数来解决此问题。我是从 StackOverflow 得到的，更具体地说[是从这篇文章](https://stackoverflow.com/questions/1765078/how-to-avoid-console-window-with-pyw-file-containing-os-system-call)中得到的。

# java - 将 bigdecimal 包含比 scale 更大的分隔符

> ID：16137683
> 
> 赞同：0
> 
> 时间：2013-04-22T00:23:30.643
> 
> 标签：java, android, scale, bigdecimal

我想找到一种方法来缩放可以包含不同数字的 bigdecimals 的除法。

如果我使用此代码：

> r= x.divide(y,10, RoundingMode.HALF_UP);

几乎所有结果的结果都是正确的，但是如果我有一个除数，其点前的位数比刻度多，则结果为 0.0000000000。

我必须做什么才能获得这些划分的正确精度？

> 1 / 3 =0.3333333333（比例 10）
> 
> 1 / 151545545664651878 = 1.515455456646E-17（例如）
> 
> 100000000000000 / 3 = 3.3333333333E+14

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:37:53.207

我找到了方法。它使用数学上下文而不是规模来实现操作。似乎 MathContext 构造函数使用精度而不是比例。

与 MathContext

```
MathContext mc = new MathContext(10, RoundingMode.HALF_UP);
BigDecimal r = x.divide(y, mc);
Log.i("mc","r = " + r); 
```

有规模

```
BigDecimal r = x.divide(y,10, RoundingMode.HALF_UP);   
Log.i("scale","r = " + r); 
```

如果我意识到这个划分：1 / 3333333333333333333333333 =

第一个输出：3.0000000000E-19 第二个输出：0E-10

因此，将 Scale 设置为大小数似乎与 MathContext 中的 Scale 相同，但事实并非如此。我希望它可以帮助某人。

# sql - SQL - 如何列出值大于另一个单元格的单元格？

> ID：16137687
> 
> 赞同：2
> 
> 时间：2013-04-22T00:23:54.633
> 
> 标签：sql

我有以下数据库，我需要列出所有subno，subname，其中配额大于subno 30012的配额。

```
subno   subname                 quota
30006   Adv Database design 300
30007   Software fundamentals   200
30008   Application Development 350
30010   Database development    300
30011   System design           200
30012   Requirement engineering 350 
```

我知道我能做到

```
select subno, subname from subject
where quota > 350 
```

但是我如何改变它以允许配额大于 30012 的配额而不是大于 350？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:24:54.183

您使用子查询：

```
select subno, subname from subject
where quota > (select quota from subject where subno = 30012) 
```

这假设给定的`subno`. 如果可能不止一个，则使用聚合函数，例如：

```
select subno, subname
from subject
where quota > (select max(quota) from subject where subno = 30012) 
```

# mysql - MySQL - 3 个表，这种复杂的连接是否可能？

> ID：16137695
> 
> 赞同：3
> 
> 时间：2013-04-22T00:24:51.880
> 
> 标签：mysql, join

我有三个表：用户、组和关系。

*   具有字段的表用户：usrID、usrName、usrPass、usrPts
*   具有字段的表组：grpID、grpName、grpMinPts
*   与字段的表关系：uID、gID

可以通过两种方式将用户置于组中：

*   如果收集组最小点数（users.usrPts > group.grpMinPts ORDER BY group.grpMinPts DSC LIMIT 1）
*   如果他与组的关系是手动添加到关系表中的（用户 ID 作为 uID 提供，组 ID 在名为关系的表中作为 gID 提供）

我可以创建**一个**查询，以确定每个用户（或特定用户）属于哪个组，但是与 grpMinPts 相比，手动关系（使用关系表）应该比 usrPts 具有更高的优先级？另外，我不想让一个用户显示两次（按点显示他的真实组，但也显示相关组）......

提前致谢！：） 我试过了：

```
SELECT * FROM users LEFT JOIN (relation LEFT JOIN groups ON (relation.gID = groups.grpID) ON users.usrID = relation.uID 
```

使用它我设法提取指定的关系（从关系表中），但是，我不知道如何包含用户点，尊重上述优先级（首先指定）。我知道如何在 php 中的几个单独的查询中做到这一点，这很简单，但我很好奇，可以使用一个查询来完成吗？

编辑添加：

多亏了使用[coalesce](http://www.w3resource.com/mysql/comparision-functions-and-operators/coalesce-function.php "w3resource 使用合并的示例") @GordonLinoff 提供的真正教育技术，我设法使这个查询按预期工作。所以，这里是：

```
SELECT o.usrID, o.usrName, o.usrPass, o.usrPts, t.grpID, t.grpName
FROM (
    SELECT u.*, COALESCE(relationgroupid,groupid) AS thegroupid
        FROM (
        SELECT u.*, (
            SELECT grpID
            FROM groups g
            WHERE u.usrPts > g.grpMinPts
            ORDER BY g.grpMinPts DESC 
            LIMIT 1
        ) AS groupid, (
            SELECT grpUID
            FROM relation r
            WHERE r.userUID = u.usrID
        ) AS relationgroupid
        FROM users u
    )u
)o
JOIN groups t ON t.grpID = o.thegroupid 
```

另外，如果您像我一样想知道，这种方法是比在 php 中执行三个查询和处理更快还是更慢，答案是这种方法稍微快一些。此查询执行和在网页上显示结果的平均时间为 14 毫秒。三个简单的查询，用 php 处理并在网页上显示结果花了 21 毫秒。平均值基于 10 个案例，平均执行时间实际上是一个常数时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:35:08.780

这是一种使用相关子查询来获取每个值的方法。然后它使用优先规则选择适当的一个，如果`relations`存在则使用该优先规则，否则使用组表中的一个：

```
select u.*,
       coalesce(relationgroupid, groupid) as thegroupid
from (select u.*,
             (select grpid from groups g where u.usrPts > g.grpMinPts order by g.grpMinPts desc limit 1
             ) as groupid,
             (select gid from relations r where r.userId = u.userId
             ) as relationgroupid
      from users u
    ) u 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:05:31.023

尝试这样的事情

```
select user.name, group.name
from group
join relation on relation.gid = group.gid
join user on user.uid = relation.uid
union
select user.name, g1.name
from group g1
join group g2 on g2.minpts > g1.minpts
join user on user.pts between g1.minpts and g2.minpts 
```

# c# - 将数据从 sqlite 读入 C#，然后再读入 sqlite

> ID：16137697
> 
> 赞同：7
> 
> 时间：2013-04-22T00:25:12.023
> 
> 标签：c#, sqlite, system.data.sqlite

可重现的例子：

sqlite db test3.s3db 有一个名为“MathRec”的表：

```
name score
Bill 2
Mary 3
John 3 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Data.SQLite;

namespace ConsoleApplication7

{
    class Program
    {
    static void Main(string[] args)
    {

        string fullPath = "C:\\Users\\Desktop\\dataset\\test3.s3db";
        SQLiteConnection conread = new SQLiteConnection("Data Source=" + fullPath);
        conread.Open();

        string selectSQL = "SELECT * FROM MathRec";
        SQLiteCommand selectCommand = new SQLiteCommand(selectSQL, conread);
        SQLiteDataReader dataReader = selectCommand.ExecuteReader();
        DataSet ds = new DataSet();
        DataTable dt = new DataTable("MathRec");
        dt.Load(dataReader);
        ds.Tables.Add(dt);

        // Create a table in the database to receive the information from the DataSet

        string fullPath2 = "C:\\Users\\\\Desktop\\dataset\\test4.s3db";
        SQLiteConnection conwrite = new SQLiteConnection("Data Source=" + fullPath2);
        conwrite.Open();
        SQLiteCommand cmd = new SQLiteCommand(conwrite);
        cmd.CommandText = "DROP TABLE IF EXISTS MathRec";
        cmd.ExecuteNonQuery();
        cmd.CommandText = "CREATE TABLE MathRec(name text , score integer)";
        cmd.ExecuteNonQuery();
        SQLiteDataAdapter adaptor = new SQLiteDataAdapter("SELECT * from MathRec", conwrite);
        adaptor.InsertCommand = new SQLiteCommand("INSERT INTO MathRec  VALUES(:name, :score)", conwrite);
        adaptor.InsertCommand.Parameters.Add("name", DbType.String, 0, "name");
        adaptor.InsertCommand.Parameters.Add("score", DbType.Int32, 0, "score");
        adaptor.Update(ds, "MathRec");

         }

    }
 } 
```

问题：表 MathRec 在 test4.s3db 中创建，列名：name 和 socre，但表是空的，没有插入任何记录。

需要帮助！

请不要问我为什么我只是将一个数据库复制到另一个数据库，因为我正在为一个更大的项目测试代码的一部分，我将在未来的中间步骤中对数据集进行计算。

谢谢！

* * *

为了简化问题：

这有效（使用数据表和适配器更新原始 sqlite 表）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SQLite;
using System.Data;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {
            string fullPath = "C:\\Users\\data\\test.db";
            SQLiteConnection conread = new SQLiteConnection("Data Source=" + fullPath);
            conread.Open();

        SQLiteDataAdapter DB = new SQLiteDataAdapter("SELECT speed, dist FROM Cars2", conread);
        DataSet DS = new DataSet();

        DB.Fill(DS, "NewCars");

        object[] rowVals = new object[2];
        rowVals[0] = 10;
        rowVals[1] = 20;
        DS.Tables["NewCars"].Rows.Add(rowVals);

        DB.InsertCommand = new SQLiteCommand("INSERT INTO Cars2 (speed, dist)  
                                 " + " VALUES (:speed,  :dist)", conread);
        DB.InsertCommand.Parameters.Add("speed", DbType.Double, 0, "speed");
        DB.InsertCommand.Parameters.Add("dist", DbType.Double, 20, "dist");
        DB.Update(DS, "NewCars");

        }
    }
} 
```

这有效（从旧表创建一个新的 sqlite 表）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SQLite;
using System.Data;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {
            string fullPath = "C:\\Users\\data\\test.db";
            SQLiteConnection conread = new SQLiteConnection("Data Source=" + fullPath);
            conread.Open();

        SQLiteCommand cmd = new SQLiteCommand(conread);
        cmd.CommandText = "DROP TABLE IF EXISTS Cars";
        cmd.ExecuteNonQuery();
        cmd.CommandText = "CREATE TABLE Cars (speed REAL , dist REAL)";
        cmd.ExecuteNonQuery();
        cmd.CommandText = "INSERT INTO Cars SELECT * from DS";
        cmd.ExecuteNonQuery();
        cmd.Dispose();
        }
    }
} 
```

但这是我想要的（使用数据表和适配器在 sqlite 中创建新表）并且不工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SQLite;
using System.Data;

namespace ConsoleApplication7
{
    class Program
    {
        static void Main(string[] args)
        {
            string fullPath = "C:\\Users\\data\\test.db";
            SQLiteConnection conread = new SQLiteConnection("Data Source=" + fullPath);
            conread.Open();
    SQLiteDataAdapter DB = new SQLiteDataAdapter("SELECT speed, dist FROM Cars2", conread);
    DataSet DS = new DataSet();

    DB.Fill(DS, "NewCars");

    object[] rowVals = new object[2];
    rowVals[0] = 10;
    rowVals[1] = 20;
    DS.Tables["NewCars"].Rows.Add(rowVals);

   SQLiteDataAdapter DB2 = new SQLiteDataAdapter("SELECT speed, dist FROM Cars3", conread);
    DB2.InsertCommand = new SQLiteCommand("INSERT INTO Cars3 (speed, dist)  
                        " + " VALUES (:speed,  :dist)", conread);
    DB2.InsertCommand.Parameters.Add("speed", DbType.Double, 0, "speed");
    DB2.InsertCommand.Parameters.Add("dist", DbType.Double, 20, "dist");
    DB2.Update(DS, "NewCars");

    }
}
} 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T14:53:26.840

我找到了答案！

Adapter.Update 只能用于更新数据库中的原始表，不能将数据表保存到新表中。请参阅线程以获得答案：

[访问数据库的 C# 数据集](https://stackoverflow.com/questions/8084158/c-sharp-dataset-to-access-db)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:52:08.340

将一个表复制到另一个数据库的最简单方法是将第二个数据库附加到第一个连接，然后直接复制数据：

```
ATTACH '...\test4.s3db' AS 'test4';
DROP TABLE IF EXISTS test4.MathRec;
CREATE TABLE test4.MathRec(name text , score integer);
INSERT INTO test4.MathRec SELECT * FROM MathRec; 
```

如果您想进行计算，您可以在 SQL`SELECT`语句中进行计算。如果没有，您必须使用 a 读取数据，`SELECT`然后`INSERT`为要写入的每条记录执行一条语句。（在这种情况下，您不需要`ATTACH`.）

# perl - 将文件移动到目录

> ID：16137702
> 
> 赞同：0
> 
> 时间：2013-04-22T00:25:31.757
> 
> 标签：perl, file, directory, rename

以下构造不起作用有什么原因吗？文件列表包含文件名。名称列表包含一个名称列表，当这些名称作为文件名的子字符串匹配时，会导致循环将文件移动到名为 $name 的目录中。看起来它应该可以工作，但它没有移动文件。有什么更好的方法来构建它？

```
 FILE: for my $file (@file_list) {

  for my $name (@name_list) {

    if ($file =~ /^\Q$name\E/) {
      rename "/Users/path/to/file/I/need/to/move/$file", "/Users/path/to/directory/i/need/to/move/file/to/$name/$file" or die "rename failed because: $!\n";
     next FILE;
    }
  }
  print "no match for $file\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:11:18.950

正确的代码：

```
for my $file (@file_list) {
  my $found = 0;
  for my $name (@name_list) {
    if ($file =~ /^\Q$name\E/) {
      print "failed to rename $file\n" unless rename "/Users/path/to/file/I/need/to/move/$file", "/Users/path/to/directory/i/need/to/move/file/to/$name/$file";
      $found = 1;
      last;
    }
  }
  print "no match for $file\n" unless $found;
} 
```

# java - 如何使用开放图形 API 从应用程序接收所有朋友的分数？

> ID：16137709
> 
> 赞同：3
> 
> 时间：2013-04-22T00:26:35.977
> 
> 标签：java, android, facebook, facebook-graph-api, facebook-android-sdk

我正在关注关于如何将 Facebook 实现到 Android 游戏应用程序的 Facebook 教程。我在[第 1 步即将结束的“高分板”部分。](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/games/open-graph/)在这一步中，他们提供了一种检索朋友高分的方法，但他们在应用程序的服务器空间中使用了特定的域名：`"http://www.friendsmash.com/scores".`我想知道它是否可能只是从 Facebook 检索朋友的高分，如果是这样，如何？任何帮助、建议或建议将不胜感激，谢谢！

# java - 如何在 Windows 上从命令行运行 Java 程序？

> ID：16137713
> 
> 赞同：239
> 
> 时间：2013-04-22T00:26:51.387
> 
> 标签：java

我正在尝试从 Windows 的命令行执行 Java 程序。这是我的代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class CopyFile
{
    public static void main(String[] args)
    {

        InputStream inStream = null;
        OutputStream outStream = null;

        try
        {

            File afile = new File("input.txt");
            File bfile = new File("inputCopy.txt");

            inStream = new FileInputStream(afile);
            outStream = new FileOutputStream(bfile);

            byte[] buffer = new byte[1024];

            int length;
            // copy the file content in bytes
            while ((length = inStream.read(buffer)) > 0)
            {

                outStream.write(buffer, 0, length);

            }

            inStream.close();
            outStream.close();

            System.out.println("File is copied successful!");

        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

我不确定如何执行该程序 - 有什么帮助吗？这在 Windows 上可行吗？为什么它与另一个环境不同（我认为 JVM 是一次编写，随处运行）？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2013-04-22T00:31:01.903

来源：[javaindos。](http://www.skylit.com/javamethods/faqs/javaindos.html)

> 假设您的文件位于 C:\mywork\
> 
> 运行命令提示符
> 
> ```
> C:\> cd \mywork 
> ```
> 
> 这使得 C:\mywork 成为当前目录。
> 
> ```
> C:\mywork> dir 
> ```
> 
> 这将显示目录内容。您应该在文件中看到 filenamehere.java。
> 
> ```
> C:\mywork> set path=%path%;C:\Program Files\Java\jdk1.5.0_09\bin 
> ```
> 
> 这告诉系统在哪里可以找到 JDK 程序。
> 
> ```
> C:\mywork> javac filenamehere.java 
> ```
> 
> 这将运行编译器 javac.exe。您应该只看到下一个系统提示...
> 
> ```
> C:\mywork> dir 
> ```
> 
> javac 创建了 filenamehere.class 文件。您应该在文件中看到 filenamehere.java 和 filenamehere.class。
> 
> ```
> C:\mywork> java filenamehere 
> ```
> 
> 这将运行 Java 解释器。然后你应该看到你的程序输出。
> 
> 如果系统找不到 javac，请检查 set path 命令。如果 javac 运行但出现错误，请检查 Java 文本。如果程序编译但出现异常，请检查文件名和类名中的拼写和大小写以及 java HelloWorld 命令。Java区分大小写！

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2015-10-15T13:26:20.030

要完成答案：

1.  Java 文件

    ```
    TheJavaFile.java 
    ```

2.  将 Java 文件编译为 *.class 文件

    ```
    javac TheJavaFile.java 
    ```

    *   这将创建一个`TheJavaFile.class`文件
3.  Java 文件的执行

    ```
    java TheJavaFile 
    ```

4.  创建可执行`*.jar`文件

    *   你有两个选择 -

        1.  使用外部清单文件：

            *   创建清单文件说 - MANIFEST.mf

            *   MANIFEST 文件不过是主类的显式条目

            *   `jar -cvfm TheJavaFile.jar MANIFEST.mf TheJavaFile.class`

        2.  可由入口点执行：

            *   `jar -cvfe TheJavaFile.jar <MainClass> TheJavaFile.class`
5.  运行 Jar 文件

    ```
    java -jar TheJavaFile.jar 
    ```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-07-28T14:15:16.157

如果您的 Java 类在某个包中。假设您的 Java 类`ABC.java`存在于 中`com.hello.programs`，那么您需要使用包名运行它。

用通常的方式编译它：

```
C:\SimpleJavaProject\src\com\hello\programs > javac ABC.java 
```

但是要运行它，您需要给出包名，然后是您的 java 类名：

```
C:\SimpleJavaProject\src > java com.hello.programs.ABC 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-04-11T12:14:30.627

**编译**一个 Java 文件以生成一个类：

```
javac filename.java 
```

**执行**生成的类：

```
java filename 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2019-05-29T14:10:40.100

从 Java 11 开始，`java`命令行工具已经能够直接运行单文件源代码。例如

```
java HelloWorld.java 
```

这是 JEP 330 的增强功能：[https ://openjdk.java.net/jeps/330](https://openjdk.java.net/jeps/330)

有关用法和限制的详细信息，请参阅您的 Java 实现手册，例如 Oracle 提供的手册：[https ://docs.oracle.com/en/java/javase/11/tools/java.html](https://docs.oracle.com/en/java/javase/11/tools/java.html)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-01-31T21:03:29.780

假设文件名为“CopyFile.java”，请执行以下操作：

```
javac CopyFile.java
java -cp . CopyFile 
```

第一行将源代码编译成可执行的字节码。第二行执行它，首先将当前目录添加到类路径中（以防万一）。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-04-03T11:48:20.450

这很容易。如果您已将文件保存为 A.text，您首先应该将其保存为 A.java。现在它是一个 Java 文件。

现在您需要在编译之前打开 cmd 并设置 A.java 文件的路径。你可以参考[这个](http://www.elcaro-guide.com/java/how-to-compile-and-run-a-java-program)。

然后你可以使用命令编译你的文件

> javac A.java

然后使用

> 爪哇

这就是您在 cmd 中编译和运行 java 程序的方式。您还可以通过这些[材料](http://www.elcaro-guide.com/java)深入学习 Java 课程。那里为初学者介绍了许多您需要了解的 Java 内容。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-04-22T00:32:58.910

您可以在命令行中使用 javac 编译任何 java 源代码；例如，javac CopyFile.java。运行：java CopyFile。您还可以使用 javac *.java 编译所有 java 文件，只要它们位于同一目录中

如果您遇到“无法找到或加载主类”的问题，您的路径中可能没有 jre。看看这个问题： [找不到或加载主类](https://stackoverflow.com/questions/7647448/could-not-find-or-load-main-class)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-06-28T23:49:54.370

在 Windows 7 上，我必须执行以下操作：

**快捷方式**

1.  安装JDK [http://www.oracle.com/technetwork/java/javase/downloads](http://www.oracle.com/technetwork/java/javase/downloads)
2.  在 Windows 中，浏览到“C:\Program Files\Java\jdk1.8.0_91\bin”（或安装最新版本 JDK 的地方），按住 shift 并右键单击窗口中的空白区域并执行“打开命令窗口在这里”，这将为您提供命令行并访问所有 BIN 工具。默认情况下，“javac”不在 Windows 系统 PATH 环境变量中。
3.  按照上面关于如何编译文件的评论（“javac MyFile.java”然后是“java MyFile”）[https://stackoverflow.com/a/33149828/194872](https://stackoverflow.com/a/33149828/194872)

**很长的路要走**

4.  安装JDK [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
5.  安装后，编辑 Windows PATH 环境变量并将以下内容添加到路径 C:\ProgramData\Oracle\Java\javapath。在这个文件夹中是指向少数 java 可执行文件的符号链接，**但“javac”不是其中之一，**因此当尝试从 Windows 命令行运行“javac”时会引发错误。
6.  我编辑了路径：控制面板->系统->高级选项卡->“环境变量...”按钮->向下滚动到“路径”，突出显示并编辑->替换了“C:\ProgramData\Oracle\Java\ javapath”，带有指向 java BIN 文件夹“C:\Program Files\Java\jdk1.8.0_91\bin”的直接路径。
7.  当您升级 JDK 安装但您现在可以访问所有命令行工具时，这可能会中断。

8.  按照上面关于如何编译文件的评论（“javac MyFile.java”然后是“java MyFile”）[https://stackoverflow.com/a/33149828/194872](https://stackoverflow.com/a/33149828/194872)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-05-12T04:08:36.657

[![在此处输入图像描述](https://i.stack.imgur.com/EE25R.png)](https://i.stack.imgur.com/EE25R.png) 第 1 步：首先打开文件所在的命令提示符。（在按住 shift 的同时单击鼠标右键）
第 2 步：然后使用以下命令执行。（假设要执行的文件和类名为Student.java）示例程序在图片背景中。

```
 javac Student.java
     java Student 
```

[![在此处输入图像描述](https://i.stack.imgur.com/P2vTH.png)](https://i.stack.imgur.com/P2vTH.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-01-27T08:05:00.077

从 Java 9 开始，JDK 包括`jshell`一个 Java REPL。

假设 JDK 9+`bin`目录已正确添加到您的路径中，您将能够简单地：

1.  运行`jshell File.java`——`File.java`当然是你的文件。
2.  将打开一个提示，允许您调用`main`方法：`jshell> File.main(null)`。
3.  要关闭提示并结束 JVM 会话，请使用`/exit`

可以在[此处](https://docs.oracle.com/en/java/javase/11/jshell/introduction-jshell.html)找到 JShell 的完整文档。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-04-11T10:21:45.280

现在（从 JDK 9 开始），您可以使用 java 来执行它。为了执行包含main的“Hello.java”，可以使用：java Hello.java

您不再需要使用 javac 单独编译。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-26T17:05:14.003

您实际上可以像运行 shell 或 python 脚本一样运行 Java 程序，而无需手动编译 Java 文件，如 [JEP 330](https://openjdk.java.net/jeps/330 "Java JEP 330：启动单文件源代码程序")中所述。从 JDK 11 开始就可以使用了。

如果您创建一个文件`testing`，并输入以下内容，您应该能够将其作为命令运行`testing`。您需要使用`chmod +x testing`.

```
 #!/usr/bin/env java --source 11
    public class Test {
        public static void main(String [] args) {
            System.out.println("Hello world!");
            System.exit(0);
        }
    } 
```

您*不能*`.java`使用前面示例中的文件扩展名。

```
 $ chmod +x testing
    $ ./testing
    Hello world!
    $ 
```

但是如果它是`Test.java`没有shebang“#！”的名称，您仍然可以执行 像这样的前缀：

```
 public class Test {
        public static void main(String [] args) {
            System.out.println("Hello again!");
            System.exit(0);
        }
    } 
```

然后`Test.java`使用以下命令执行文件：

```
 $ java Test.java
    Hello again!
    $ 
```

因此，只要您在路径中有足够新的 Java 编译器，就可以使用，请检查`java -version`. [此博客](https://www.infoq.com/articles/single-file-execution-java11 "在 Java 11 中无需编译即可运行单文件程序")中的更多信息。

# c++ - C++：奇怪的指针损坏错误

> ID：16137714
> 
> 赞同：6
> 
> 时间：2013-04-22T00:26:54.873
> 
> 标签：c++, debugging, pointers, mpi

我有以下情况：我编写了一些简短的 MPI 测试代码，以便找出哪种发送和接收操作组合在我的代码中效果最好。

该代码在我自己的计算机上运行良好（使用 8 个进程进行了测试），但是一旦我在我正在处理的集群中运行它，我就会得到一个损坏或双重释放的指针的巨大错误输出，这就是输出： http: [//pastebin.com/pXTRSf89](http://pastebin.com/pXTRSf89)

我在我的代码中所做的如下：我调用我的通信函数 100K 次并测量时间。该功能如下图所示。我发现，错误总是发生在同一次迭代中（大约 6K 左右）。然而，报告的处理器 ID 确实发生了变化。即使我使用 64 个 proc 而不是 8 个，迭代也是相同的。问题是：我完全不知道，可能出了什么问题，尤其是因为没有释放或分配指针。

```
void communicateGrid(int level, real* grid, const Subdomain& subdomain, std::vector<TimeMap>& tm_) {
    tm_[level]["CommGrid"].start();

    MPI_Status status[2];
    MPI_Request request[2];

    // x 
    MPI_Isend(&grid[getIndexInner(level, 1, 1, 1) + innerGridpoints_[level][0] - numOuterGridpoints_[level]], 1, mpiTypes_[level * 4 + 1], subdomain.upperNeighbors[0], 0, MPI_COMM_WORLD, &request[0]);
    MPI_Isend(&grid[getIndexInner(level, 1, 1, 1)], 1, mpiTypes_[level * 4 + 1], subdomain.lowerNeighbors[0], 1, MPI_COMM_WORLD, &request[1]);

    MPI_Recv(&grid[getIndexInner(level, 1,1,1) + innerGridpoints_[level][0]], 1, mpiTypes_[level * 4 + 1], subdomain.upperNeighbors[0], 1, MPI_COMM_WORLD, &status[0]);
    MPI_Recv(&grid[getIndexInner(level, 1,1,1) - numOuterGridpoints_[level]], 1, mpiTypes_[level * 4 + 1], subdomain.lowerNeighbors[0], 0, MPI_COMM_WORLD, &status[1]);

    //y 
    MPI_Isend(&grid[getIndex(level, 0, innerGridpoints_[level][1], 0)], 1, mpiTypes_[level * 4 + 2], subdomain.upperNeighbors[1], 2, MPI_COMM_WORLD, &request[0]);
    MPI_Isend(&grid[getIndex(level, 0, numOuterGridpoints_[level], 0)], 1, mpiTypes_[level * 4 + 2], subdomain.lowerNeighbors[1], 3, MPI_COMM_WORLD, &request[1]);

    MPI_Recv(&grid[getIndex(level, 0, innerGridpoints_[level][1] + numOuterGridpoints_[level], 0)], 1, mpiTypes_[level * 4 + 2], subdomain.upperNeighbors[1], 3, MPI_COMM_WORLD, &status[0]);
    MPI_Recv(grid, 1, mpiTypes_[level * 4 + 2], subdomain.lowerNeighbors[1], 2, MPI_COMM_WORLD, &status[1]);

    // z
    MPI_Isend(&grid[getIndex(level, 0, 0, innerGridpoints_[level][2])], 1, mpiTypes_[level * 4 + 3], subdomain.upperNeighbors[2], 4, MPI_COMM_WORLD, &request[0]);
    MPI_Isend(&grid[getIndex(level, 0, 0, numOuterGridpoints_[level])], 1, mpiTypes_[level * 4 + 3], subdomain.lowerNeighbors[2], 5, MPI_COMM_WORLD, &request[1]);

    MPI_Recv(&grid[getIndex(level, 0, 0, numOuterGridpoints_[level] + innerGridpoints_[level][2])], 1, mpiTypes_[level * 4 + 3], subdomain.upperNeighbors[2], 5, MPI_COMM_WORLD, &status[0]);
    MPI_Recv(grid, 1, mpiTypes_[level * 4 + 3], subdomain.lowerNeighbors[2], 4, MPI_COMM_WORLD, &status[1]);

    tm_[level]["CommGrid"].stop();
} 
```

mpiTypes_ 是 MPI_Datatype* 类型的全局变量，innerGridpoints_ 和 numOuterGridpoints_ 也是全局变量（我知道这不是一个好的编码风格，但我只是为了计时）。我很确定我的数据类型是正确的，因为它们在另一种通信功能设置中工作（例如 Irecv 后跟发送）。

最后说明：我只是尝试只使用一个进程来运行它。然后出现以下错误：

> 排名 0 [Mon Apr 22 02:11:23 2013] [c0-0c1s3n0] PMPI_Isend 中的致命错误：内部 MPI 错误！，错误堆栈：PMPI_Isend(148)：MPI_Isend(buf=0x2aaaab7b531c，count=1，dtype=USER， dest=0，tag=1，MPI_COMM_WORLD，request=0x7fffffffb4d4) 失败（未知）（）：内部 MPI 错误！_pmiu_daemon(SIGCHLD): [NID 00070] [c0-0c1s3n0] [Mon Apr 22 02:11:23 2013] PE RANK 0 exit signal Aborted

同样，这仅发生在集群上，但在我的机器上有效。

我很高兴我能检查什么或错误可能在哪里！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:20:38.320

您必须等待或测试由创建的那些 MPI 请求或其他东西`MPI_Isend()`，否则您将泄漏内部资源，并最终崩溃，这就是正在发生的事情。

Jeff Squyres 在他[在 Cisco 的博客文章中](http://blogs.cisco.com/performance/dont-leak-mpi_requests/)说得很好。

*您*知道那些 Isend 正在完成，但 MPI 库无法知道这一点并清理那些`MPI_Request`s 分配和指向的资源。需要多少资源和什么样的资源取决于很多事情，包括底层网络连接（例如会占用稀缺的 infiniband 资源），因此它在您自己的机器上运行但在集群上运行并不一定令人惊讶.

您可以通过添加来解决此问题

```
MPI_Waitall(2, request,  status); 
```

`MPI_Isend`在/ `MPI_Recv()`s 的每个阶段之后。

这不仅是清理资源所必需的，它实际上是具有非阻塞请求的程序的正确性所必需的。

# iphone - 点击 iAd 时如何运行函数？

> ID：16137717
> 
> 赞同：1
> 
> 时间：2013-04-22T00:27:37.470
> 
> 标签：iphone, objective-c, iad, banner-ads

我已阅读 iAd 文档并且熟悉委托方法，并且似乎没有在单击 iAd 横幅广告时运行的方法。

我希望能够在点击广告时暂停游戏：

```
[self pause]; 
```

是否有运行的 App Delegate 方法或我可以运行的其他方法以便完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T04:32:21.747

使用以下`delegate`方法`iAD`：

当`user tapped banner view`.

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
   [self pause]
   return YES;
} 
```

在`banner view` `finishes`执行`an action`覆盖您的`application’s user interface`.

```
- (void)bannerViewActionDidFinish:(ADBannerView *)banner
{ 
   [self play]
} 
```

# python - 在描述字段中继承产品类别 - OpenErp

> ID：16137724
> 
> 赞同：0
> 
> 时间：2013-04-22T00:29:12.100
> 
> 标签：python, module, field, openerp, inheritance

我的模块中有一个产品的代码：

```
_name = "purchase.requisition.line"
_description="Purchase Requisition Line"
_rec_name = 'product_id'

_columns = {
    'descripcion' : fields.char('Descripcion', size=42),
    'nrodeparte' : fields.integer('Nro. de Parte'),
    'espcifictec' : fields.char('Especificaciones Tecnicas', size=42),
    'maquina' : fields.char('Maquina', size=42),
    'anexo' : fields.float('Anexo NRo.'),
    'product_id': fields.many2one('product.product', 'Product' ),
    'product_uom_id': fields.many2one('product.uom', 'Product Unit of Measure'),
    'product_qty': fields.float('Quantity', digits_compute=dp.get_precision('Product Unit of Measure')),
    'requisition_id' : fields.many2one('purchase.requisition','Purchase Requisition', ondelete='cascade'),
    'company_id': fields.related('requisition_id','company_id',type='many2one',relation='res.company',string='Company', store=True, readonly=True),
} 
```

在`descripcion`我有一个`char`字段用于描述我从`product.product`. 现在它是一个独立的领域，我如何继承我选择的产品的类别`product_id`？

我知道对象`categ_id`在产品模块中，我试过了

```
'descripcion': fields.many2one('product.category','Desripcion') 
```

但它不起作用，我怎样才能做到这一点？我需要`categ_id`在此字段中自动加载产品描述 ( )。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:14:35.387

尝试这个

'descripcion':fields.many2one('product.category', 'Descriptcion', required=True, ondelete='cascade'),

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:37:19.557

您可以将其替换为`function`从 product_id.category_id 获取值的字段，或者在填充您的类别的字段上设置`on_change`一个`produtct_id`。阅读[手册](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html#functional-fields)和`grep`插件文件夹以获取大量示例。

# security - 安全框架（JSP 字段级+方法级）

> ID：16137727
> 
> 赞同：2
> 
> 时间：2013-04-22T00:29:40.163
> 
> 标签：security, jakarta-ee, struts2

我有一个 Struts2 应用程序。我正在尝试为应用程序添加一些安全性。

我需要以下功能：

1.) 用户可以根据他的安全权限在 JSP 中查看/编辑哪些字段

2.) 用户可以调用什么动作。

3.）最好这个安全细节应该在数据库中配置

有什么建议吗？

# apache-camel - Apache Camel 的替代品是什么

> ID：16137729
> 
> 赞同：6
> 
> 时间：2013-04-22T00:29:40.887
> 
> 标签：apache-camel, eai

如果我正在为轻量级 EAI 框架评估 Apache Camel 的替代方案 - 我应该在评估中包含哪些内容？

*   开源或闭源都可以
*   它不必是 Java，但它必须在 Windows 上运行
*   MS 替代品还可以
*   我不想要一个成熟的 ESB
*   它应该支持文件、SOAP Web 服务和 REST 端点。OData 支持将是一个奖励。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:56:02.193

您是否尝试过Java 的[Spring 集成？](http://www.springsource.org/spring-integration)您可以参考 [Hillert 博客](http://hillert.blogspot.sg/2009/10/apache-camel-alternatives.html)，比较了 Camel、Spring Integration 和其他 EAI 框架。

对于 .net，有[Mass Transit](https://code.google.com/p/masstransit/)和[ESB.net](http://www.codeplex.com/KeystrokeEsbNet)。

# android - Android ListFragment 运行时错误

> ID：16137734
> 
> 赞同：0
> 
> 时间：2013-04-22T00:29:54.823
> 
> 标签：android, android-fragments

我有一个 ListFragment 在调用时崩溃。我不知道如何解决这个问题。我会欣赏一双新的眼睛。所以让我们开始吧，这是我的代码和错误日志。

**分段**

```
public class Incidents_Frag extends ListFragment {
View view;
public static Model model;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {        
    view = inflater.inflate(R.layout.incid, container, false);
    model = new Model();
    setListAdapter(new ArrayAdapter<Incident>(getActivity(),
            android.R.layout.simple_list_item_1, model.getIncidents()));        
    return view;
}
} 
```

**片段 XML**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

</ListView>

</LinearLayout> 
```

**日志猫**

```
04-21 23:54:30.615: E/AndroidRuntime(890): FATAL EXCEPTION: main
04-21 23:54:30.615: E/AndroidRuntime(890): java.lang.RuntimeException: Content has view with id attribute 'android.R.id.list' that is not a ListView class
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.ListFragment.ensureList(ListFragment.java:402)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.ListFragment.onViewCreated(ListFragment.java:203)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:809)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.BackStackRecord.run(BackStackRecord.java:622)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1330)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.FragmentManagerImpl$1.run(FragmentManager.java:417)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.os.Handler.handleCallback(Handler.java:605)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.os.Looper.loop(Looper.java:137)
04-21 23:54:30.615: E/AndroidRuntime(890):  at android.app.ActivityThread.main(ActivityThread.java:4340)
04-21 23:54:30.615: E/AndroidRuntime(890):  at java.lang.reflect.Method.invokeNative(Native Method)
04-21 23:54:30.615: E/AndroidRuntime(890):  at java.lang.reflect.Method.invoke(Method.java:511)
04-21 23:54:30.615: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-21 23:54:30.615: E/AndroidRuntime(890):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-21 23:54:30.615: E/AndroidRuntime(890):  at dalvik.system.NativeStart.main(Native Method) 
```

正如我们从错误日志中看到的那样，我显然试图膨胀不是“listview”类型的东西。实际上，我后来在片段 xml 中添加了列表视图，其 id 为“列表”，只是为了看看它是否可以工作。它没有。我认为关键在错误日志的第二行，但我不知道如何修复它。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:47:46.020

似乎您正在创建一个新的“列表”ID，但您应该使用 android 提供的 ID：`android:id="@id/android:list"`

# django - Django，过滤当前登录用户以多对多模型形式呈现的集合

> ID：16137736
> 
> 赞同：2
> 
> 时间：2013-04-22T00:30:05.153
> 
> 标签：django, many-to-many

我知道它在某个地方，但我找不到它。

所以我有一个“类别”模型和一个“书”模型，它有一个多对多的“类别”。在模型表单中创建新书时，所有类别都会呈现给用户以分配给该书。在这种情况下，我只希望当前用户创建的类别显示在该字段中，而不是所有类别。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T06:32:01.893

假设您的模型如下：

```
class Category(models.Model):
    ....
    creator = models.ForeignKey(User)

class Book(models.Model):
    ...
    categories = models.ManyToManyField(Category) 
```

假设您的表格如下：

```
class BookForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        current_user = kwargs.pop('user')
        super(BookForm, self).__init__(*args, **kwargs)
        self.fields['categories'].queryset = Categories.objects.filter(creator=current_user) 
```

因此，您需要覆盖`__init__`您的表单，将当前用户传递给此表单。然后在你想要的 ManyToManyField 上设置一个`queryset`属性。

您的看法：

```
#GET request
book_form = BookForm(user=request.user)

#POST request
book_form = BookForm(data=request.POST, user=request.user) 
```

# drupal - 添加新的 cck 字段时出错

> ID：16137740
> 
> 赞同：0
> 
> 时间：2013-04-22T00:30:38.463
> 
> 标签：drupal, drupal-6, cck

出于某种原因，在将简单文本字段添加到内容类型后，我在很多页面上都会出错。以及不使用内容类型的页面上的错误，并且与修改后的内容类型没有任何关系。

内容类型只是一种常规形式，客户可以在其中添加一些稍后显示在视图中的简单数据。

新字段添加到已经存储了 som 数据的内容类型。

在日志中我发现了这个错误信息：

警告：preg_match() [function.preg-match]：编译失败：ctools_cleanstring() 中偏移量 1811 处不允许 Unicode 代码点 (>= 0xd800 && <= 0xdfff)（/home/u/u4144602/www/profiles 的第 157 行） /nodestream/modules/ctools/includes/cleanstring.inc）。

有人知道吗？

这是一个drupal 6 安装，一个nodestream 发行版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:13:28.650

我之前也有这个问题。我已经更换了

```
'\x{a80b}\x{a823}-\x{a82b}\x{d800}-\x{f8ff}\x{fb1e}\x{fb29}\x{fd3e}\x{fd3f}'. 
```

和

```
'\x{a80b}\x{a823}-\x{a82b}\x{e000}-\x{f8ff}\x{fb1e}\x{fb29}\x{fd3e}\x{fd3f}'. 
```

希望这个链接可以帮助你...... :)

[http://drupal.org/node/1878284](http://drupal.org/node/1878284)

[http://drupal.org/node/1444006](http://drupal.org/node/1444006)

# android - 监控android应用程序发送的url的工具

> ID：16137742
> 
> 赞同：2
> 
> 时间：2013-04-22T00:30:49.563
> 
> 标签：android, networking

我正在开发一个 android 应用程序，它将从服务器请求数据。

现在我想像`http urls`萤火虫一样监视发送到服务器的内容。

所以我想知道是否有任何工具可以满足我的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:02:53.873

假设您在模拟器上，您可以[运行](https://stackoverflow.com/questions/2453949/android-emulator-how-to-monitor-network-traffic?rq=1)带有`tcpdump`标志的模拟器以在您的 PC 上获取转储。

```
emulator -tcpdump emulator.cap -avd my_avd 
```

如果您使用的是物理设备，请考虑设置 HTTP 代理，并在代理上使用 Wireshark。

# c++ - 从 int* 到 int& 的转换

> ID：16137746
> 
> 赞同：0
> 
> 时间：2013-04-22T00:31:24.453
> 
> 标签：c++, vector, type-conversion

我一直在尝试编译并使用 & 符号，但仍然无法弄清楚错误是什么。有任何想法吗？

```
qsort.cc:22:23: error: no matching function for call to ‘qsort<int>::quicksort(std::vector<int, std::allocator<int> >*)’
qsort.cc:22:23: note: candidate is:

qsort.h:16:6: note: void qsort<T>::quicksort(std::vector<T>&) [with T = int]
qsort.h:16:6: note:   no known conversion for argument 1 from ‘std::vector<int, std::allocator<int> >*’ to ‘std::vector<int, std::allocator<int> >&’ 
```

标题：

```
template <class T>
class qsort
{
public:

void quicksort(vector<T> &v);
void qusort(vector<T> &v, int left, int right);
void print(vector<T> &v);
};

template <class T>
void qsort<T>::quicksort(vector<T> &v)
{
qusort(&v, 0, 0);
}

template <class T>
void qsort<T>::print(vector<T> &v)
{
    for(int i = 0; i < v.size(); i++)
    {
    cout << v[i] << endl;
    }
} 
```

主要的：

```
int main()
{
qsort<int> asort;
vector<int> v;

v.push_back(2);
v.push_back(1);
v.push_back(7);
v.push_back(3);
v.push_back(8);
v.push_back(4);
v.push_back(0);
v.push_back(9);
v.push_back(5);
v.push_back(6);

asort.quicksort(&v);
asort.print(&v);

return 0;
} 
```

从主函数调用中删除＆符号后更新的错误（简短版本）

qsort.h: 在成员函数'void quisort::qusort(std::vector&, int, int) [with T = int]': qsort.h:18:5: 从'void quisort::quicksort(std: :vector&) [with T = int]'</p>

qsort.cc:22:22：从此处实例化 qsort.h:27:38：错误：从“int”到“const char*”的无效转换 [-fpermissive] /usr/include/c++/4.6/bits/basic_string。 tcc:214:5: 错误：初始化 'std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) 的参数 1 [with _CharT = char, _Traits = std::char_traits, _Alloc = std::allocator]' [-fpermissive]

qsort.h:18:5: 从 'void quisort::quicksort(std::vector&) [with T = int]' 实例化 qsort.cc:22:22: 从这里实例化 qsort.h:31:9: 错误： '(& v)->std::vector<_Tp, _Alloc>::operator[] 中的 'operator<' 不匹配 [with _Tp = int, _Alloc = std::allocator, std::vector<_Tp, _Alloc >::reference = int&, std::vector<_Tp, _Alloc>::size_type = long unsigned int](((long unsigned int)i)) < pivot' qsort.h:31:9：注意：候选人是： /usr/include/c++/4.6/bits/stl_pair.h:207:5：注意：模板 bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2 >&) /usr/include/c++/4.6/bits/stl_iterator.h:291:5: 注意：模板 bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator> &)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:33:01.837

您的成员函数通过引用获取参数。它们不采用指针（地址运算符返回的指针`&`）。您只需要传递对象，引用就会绑定：

```
asort.quicksort(v);
asort.print(v); 
```

# python - Tkinter Window Formatting (Python)

> ID：16137749
> 
> 赞同：4
> 
> 时间：2013-04-22T00:31:51.937
> 
> 标签：python, formatting, widget, tkinter, calculator

Im making a simple Tkinter calculator but i cant seem to properly line up the input forms and the buttons.

here is my current code

```
from Tkinter import *

def calculate():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 * num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate2():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 / num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate3():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 + num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')
def calculate4():
    try:
        num1 = float(enter1.get())
        num2 = float(enter2.get())
        result = num1 - num2
        label3.config(text=str(result))
    except ValueError:
        label3.config(text='Enter numeric values!')

root = Tk()

label1 = Label(root, text='First Number:')
label1.grid(row=0, column=1)
enter1 = Entry(root, bg='white')
enter1.grid(row=1, column=1)

label2 = Label(root, text='Second Number:')
label2.grid(row=2, column=1)
enter2 = Entry(root, bg='white')
enter2.grid(row=3, column=1)

btn1 = Button(root, text='X', command=calculate)
btn1.grid(row=4, column=1)
btn2 = Button(root, text='/', command=calculate2)
btn2.grid(row=5, column=1)
btn3 = Button(root, text='+', command=calculate3)
btn3.grid(row=5, column=2)
btn4 = Button(root, text='-', command=calculate4)
btn4.grid(row=4, column=2)

label3 = Label(root)
label3.grid(row=6, column=1)

enter1.focus()

enter1.bind('<Return>', func=lambda e:enter2.focus_set())

root.mainloop() 
```

![What the Widget looks like now](https://i.stack.imgur.com/FqAmq.png)

I would like to line it all up and make it so the plus and minus buttons are under the input forms if anyone could help it would be great thank you

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:58:55.247

You can use the `columnspan` argument to span the labels and the entries two columns. As a side note, remember that the column index is also zero-based:

```
label1.grid(row=0, column=0, columnspan=2)
enter1.grid(row=1, column=0, columnspan=2)
label2.grid(row=2, column=0, columnspan=2)
enter2.grid(row=3, column=0, columnspan=2)

btn1.grid(row=4, column=0)
btn2.grid(row=5, column=0)
btn3.grid(row=5, column=1)
btn4.grid(row=4, column=1)

label3.grid(row=6, column=0, columnspan=2) 
```

Another solution is to create a new frame and put the buttons inside it, forming a simple grid of 2 by 2.

# ios - NSMutableDictionary - EXC BAD ACCESS - 同时读/写

> ID：16137751
> 
> 赞同：3
> 
> 时间：2013-04-22T00:32:03.647
> 
> 标签：ios, objective-c, multithreading, nsmutablearray, core-foundation

我希望对我的应用程序有所帮​​助。

我有一个设置，其中多个线程访问`NSMutableDictionary`由单例类拥有的共享。线程访问字典以响应下载 JSON 并对其进行处理。单例类基本上是防止复制一些具有唯一 ID 号的下载对象。

IE。

```
 //NSURLConnection calls:
    [[Singleton sharedInstance] processJSON:data];

@interface Singleton
+ (Singleton) sharedInstance;
@property (nonatomic, strong) NSMutableDictionary *store;
@end

@implementation

-(void) processJSON:(NSData*)data {
   ...
   someCustomClass *potentialEntry = [someCustomClass parse:data];
   ...
   if(![self entryExists:potentialEntry.stringId])
        [self addNewEntry:potentialEntry]; 
   ...
  }

-(void) entryExists:(NSString*)objectId {
    if(self.store[objectId])
     return true;
    else return false;
  }

 -(void) addEntry:(someCustomClass *object) {
    self.store[object.stringId] = object;
  } 
```

一次可以有多达 5-10 个线程同时调用 processJSON。

不是立即，而是在运行几分钟后（在 iPhone 上比在模拟器上更快），我得到了可怕的 EXC BAD ACCESS。

我不承认知道它是如何`NSMutableDictionary`工作的，但我猜背景中有某种哈希表需要在分配对象时更新并在访问对象时读取。因此，如果线程要立即读取/写入字典，则可能会发生此错误 - 可能是因为对象已在内存中移动？

我希望有更多有关该主题的知识的人可以启发我！

至于解决方案，我正在考虑具有`NSOperationQueue`最大并发操作数 1 的单例类，然后`operationWithBlock:`在我想访问`NSDictionary`. 唯一的问题是它调用`processJSON`了一个异步函数，我不能立即返回创建的对象；我必须使用一个块，这会有点混乱。有什么使用方法`@synchronize`吗？那会很好用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T21:09:16.580

我会提请您注意Hot Licks 向您指出的*线程编程指南的 iOS 版本的*[同步](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW1)部分。其中一种锁定机制或使用专用串行队列可以帮助您实现线程安全。

 *您对串行操作队列的直觉是有希望的，尽管人们经常会为此使用串行调度队列（例如，因此您可以`dispatch_sync`从任何队列调用字典的串行队列），实现与它交互的受控机制以及同步操作。或者，更好的是，您可以使用自定义并发队列（不是全局队列），并通过执行读取`dispatch_sync`和执行写入`dispatch_barrier_async`，实现高效的读取器/写入器方案（如[WWDC 2011 - Mastering GCD](https://developer.apple.com/videos/wwdc/2011/?id=210)或[WWDC 2012 - Asynchronous Design中所讨论的）模式](https://developer.apple.com/videos/wwdc/2012/?id=712)）。

*并发编程指南*的[消除基于锁的代码](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW3)部分概述了使用串行队列与传统锁定技术进行同步的一些基本原理。

 *[Grand Central Dispatch (GCD) 参考](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)和*并发编程指南*中的[调度队列讨论](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW1)应该提供相当多的信息。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:37:36.240

最简单的解决方案是将所有访问 dict 的代码都放在 @synchronized 块中。

串行操作队列很棒，但对我来说听起来有点矫枉过正，因为你没有保护整个数据生态系统，只是一个结构..***

# jquery - 引用一个新的动态创建的 div 类

> ID：16137756
> 
> 赞同：1
> 
> 时间：2013-04-22T00:33:09.320
> 
> 标签：jquery, html, css

是否可以创建一个具有类名的 div，然后引用该 div 而不给它一个 ID？还是必须生成一个 ID？另外，我创建一个 div 的原因是因为我正在尝试为自己创建一个插件，该插件可能会在每个地方重复这个 div，但是我只想引用那个单个 div。

例如：

```
var newDiv = $("<div/>").addClass("newAdded");

$(parent).append(newDiv);

$(newDiv).css("background","purple"); 
```

这样的事情可能吗？我知道上面的代码不起作用，但希望这有助于说明我的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:36:25.523

是的，这是可能的，这是正确的方法。

`newDiv`已经是一个 jQuery 对象，所以不是`$(newDiv)`，而只是`newDiv`.

```
newDiv.css("background","purple"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:38:35.167

引用将被保留：

```
// Create a new div and maintain a reference to it
var div = $("<div></div>").addClass("foo");

// Our div is a jQuery object
div.appendTo(parent);

// We still have a reference
div.text( "Text added after the appending has taken place" ); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/fwHAB/](http://jsfiddle.net/jonathansampson/fwHAB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:40:27.673

由于您添加了新类，如果您失去了该 JavaScript 变量的范围，您还可以按类引用该变量：

```
$('.newAdded').css("background","purple"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:38:17.613

您还可以在 append 语句中引用新的 div。

```
$(parent).append(newDiv).css("background","purple"); 
```

# html - 如何让最右边的列填充剩余空间？

> ID：16137757
> 
> 赞同：68
> 
> 时间：2013-04-22T00:33:09.727
> 
> 标签：html, css, html-table

假设我有一张只有三个小列的表。将一张又窄又高的桌子紧贴在屏幕的左侧（[示例](http://jsfiddle.net/MrZXp/)）看起来很不整洁和不平衡，所以我希望桌子能覆盖页面的宽度。但是，当我将表格宽度设置为 100% 时，所有列也会被拉伸，所以现在我的数据在屏幕上散布得很薄，看起来也很不整齐（[示例](http://jsfiddle.net/MrZXp/1/)）。

我正在寻找的是一个解决方案，其中所有列的大小与如果表是 的大小相同`width: auto`，但最后一列填充屏幕上的剩余空间。这就是 Spotify 所做的，例如：

![Spotify](https://i.stack.imgur.com/OWGN3.png)

无论如何，“用户”列将覆盖剩余的宽度。有没有一种相对简单的方法可以通过 HTML 表格和 CSS 实现这一点？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-22T00:52:55.250

我找到了一个简单的解决方案：

```
table td:last-child {
    width: 100%;
} 
```

结果：

![截屏](https://i.stack.imgur.com/lfPVk.png)

```
body {
    font: 12px "Sans serif";
}

table {
    width: 100%;

    background-color: #222222;
    color: white;
    border-collapse: collapse;
}

table th {
    padding: 10px;
    text-align: left;
}

table td {
    padding: 2px 10px;
}

table td:last-child {
    width: 100%;
}

table td:nth-child(odd), table th:nth-child(odd) {
    background-color: rgba(255, 255, 255, 0.05);
}

table tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.05);
}

table tr:last-child td {
    padding-bottom: 10px;
}
```

```
<table>
    <tr>
        <th>Product</th>
        <th>Cardinality</th>
        <th>Price per item</th>
    </tr>
    <tr>
        <td>Apple</td>
        <td>5</td>
        <td>$2</td>
    </tr>
    <tr>
        <td>Pear</td>
        <td>3</td>
        <td>$3</td>
    </tr>
    <tr>
        <td>Sausage</td>
        <td>10</td>
        <td>$0.5</td>
    </tr>
    <tr>
        <td>Pineapple</td>
        <td>2</td>
        <td>$8</td>
    </tr>
    <tr>
        <td>Tomato</td>
        <td>5</td>
        <td>$1</td>
    </tr>
    <tr>
        <td>Lightsaber</td>
        <td>2</td>
        <td>$99 999</td>
    </tr>
</table>
```

这似乎在我当前的情况下有效，但它看起来可能会在其他情况下导致不必要的副作用。如果我偶然发现，我会编辑这个答案。

### 可能的副作用

*   多字表格单元格将被包装成多行以使列尽可能窄。一种解决方案是`white-space: nowrap`在表格单元格上使用，但这会阻碍包含大量文本的单元格在应该换行时进行换行。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-22T00:52:27.540

如果这是你的意思：![图片](https://i.stack.imgur.com/2TZbS.png)

然后我可以使用具有以下 css 的标准 html 表结构来实现这一点：

```
table {
  width:auto;
}
td {
  white-space:nowrap;
}
td:last-child {
  width:100%;
} 
```

--编辑：[使用你的 jsfiddle](http://jsfiddle.net/MrZXp/3/)

# java - 使用 for 循环的更好方法？

> ID：16137758
> 
> 赞同：0
> 
> 时间：2013-04-22T00:33:10.837
> 
> 标签：java, android, for-loop

这是我第一次真正的 Java 尝试，在一个 android 活动中。

代码基于起点countStart 和终点count1 进行计数。我没有包含整个类，但是在 toString 之后，它会创建一个文本视图并显示从数组生成的字符串（显然我猜...）

它根据需要多少个插槽在逻辑上构建一个数组，我不想让数组太大，因为最后会输出一个零。

有人能告诉我如何让这段代码更有效率吗？（更少的行，更少的混乱，更快，更少的内存使用）

```
//get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
    //convert string to double
    double count1 = Double.parseDouble(message);
    //declare variables and arrays
    double[] countArray;
    double countStart = 3.5;
    //initialize array with exact number of elements needed
    countArray = new double[((int) (count1-countStart)) +1];

    //counts from countStart to count1 without going over count1
    for(double i=0; i<(((int) count1-countStart) + 1); i++) {
        if ((countStart+i)>count1) {
            break;
        } else {
            countArray[((int) i)] = countStart+i;
        }

    }

    //convert array to string
    String mensage = Arrays.toString(countArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:41:02.653

作为一个基本的经验法则，你计算的任何东西都会将它保存到一个变量中。这使事情看起来更简单，并防止计算多次运行。

```
double count1 = Double.parseDouble(message);
double countStart = 3.5;

int resultCount = (int)(count1 - countStart) + 1;
double results = new double[resultCount];

for(double i = 0; i < resultCount; ++i) {
    double result = countStart + i;
    if (result > count1) {
        break;
    } else {
        results[i] = result;
    }
} 
```

# asp.net - 有一个从索引 0 开始的未知单词是什么意思？

> ID：16137759
> 
> 赞同：0
> 
> 时间：2013-04-22T00:33:19.207
> 
> 标签：asp.net, sql, data-binding, detailsview

我正在尝试使用 SQL Server 2008 数据库将网格视图绑定到 ASP.NET 中的详细信息视图。当我尝试绑定详细信息视图时，我收到以下错误消息：

> 该字符串未被识别为有效的日期时间。从索引 0 开始有一个未知单词。

代码：

```
protected void gvstudentworkshop_SelectedIndexChanged(object sender, EventArgs e)
{
        this.dvuserworkshop.Visible = true;
        this.dvuserworkshop.DataBind();
        this.UpdatePanel1.Update();
        this.Modalenroll.Show();
} 
```

这是我正在使用的查询：

```
SelectCommand="
SELECT * FROM [tblUserWorkshop] 
WHERE (([WorkshopName] = @WorkshopName) 
AND ([WorkshopLocation] = @WorkshopLocation) 
AND ([UserID] = @UserID) 
AND ([WorkshopDate] = @WorkshopDate))" 

UpdateCommand="
UPDATE [tblUserWorkshop] 
SET [UserWorkshopPaymentStaus] = @UserWorkshopPaymentStaus, 
[ReferralSource] = @ReferralSource, 
[UserWorkshopState] = @UserWorkshopState, 
[UserLastName] = @UserLastName, 
[UserFirstname] = @UserFirstname, 
[UserMiddleInitial] = @UserMiddleInitial 
WHERE [WorkshopName] = @original_WorkshopName 
AND [WorkshopDate] = @original_WorkshopDate 
AND [WorkshopLocation] = @original_WorkshopLocation 
AND [UserID] = @original_UserID 
AND (([UserWorkshopPaymentStaus] = @original_UserWorkshopPaymentStaus) 
OR ([UserWorkshopPaymentStaus] IS NULL 
AND @original_UserWorkshopPaymentStaus IS NULL)) 
AND (([ReferralSource] = @original_ReferralSource) 
OR ([ReferralSource] IS NULL 
AND @original_ReferralSource IS NULL)) 
AND (([UserWorkshopState] = @original_UserWorkshopState) 
OR ([UserWorkshopState] IS NULL 
AND @original_UserWorkshopState IS NULL)) 
AND (([UserLastName] = @original_UserLastName) 
OR ([UserLastName] IS NULL AND @original_UserLastName IS NULL)) 
AND (([UserFirstname] = @original_UserFirstname) 
OR ([UserFirstname] IS NULL 
AND @original_UserFirstname IS NULL)) 
AND (([UserMiddleInitial] = @original_UserMiddleInitial) 
OR ([UserMiddleInitial] IS NULL
 AND @original_UserMiddleInitial IS NULL))"> 
```

我收到此错误消息是否有可能的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:45:48.307

绑定函数似乎无法将返回值从数据库转换为日期时间对象。你能找出日期时间的返回值，看看它是否可以转换为有效的日期时间吗？

# php - 为什么这不显示我的 mysql 表信息？

> ID：16137762
> 
> 赞同：-2
> 
> 时间：2013-04-22T00:33:49.023
> 
> 标签：php, mysql

不显示任何信息。出现错误，我真的不知道为什么？谢谢。

```
 <?php

    $mysqli = new mysqli("localhost", "root", "", "insuredcars");
     if ($_POST['formcar'] == '1' || $_POST['formage'] == '18' ||  $_POST['formNCD'] ==          '0' || $_POST['formPoints'] == '0' )
    $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '1'");
while($row = mysql_fetch_array($result))
 {
 echo "<tr>";
 echo "<td>" . $row['insuranceprice'] . "</td>";
 echo "</tr>";
  }
 echo "</table>";

 mysql_close($con);

 ?> 
```

我得到的错误：注意：未定义的变量：导致 C：在第 8 行

警告：mysql_fetch_row() 期望参数 1 是资源，在第 8 行的 C:\xampp\htdocs\search.php 中给出 null

注意：未定义的变量：C 中的 con：第 16 行

警告：mysql_close() 期望参数 1 是资源，在 C: 第 16 行给出 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:38:53.997

`mysqli_fetch_row`正如函数名所说，只获取一行。

```
$mysqli = new mysqli("localhost", "root", "", "insuredcars");
if ($_POST['formcar'] == '1' || $_POST['formage'] == '18' || $_POST['formNCD'] == '0' || $_POST['formPoints'] == '0') {    
    $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '1'");
    while ($row = mysqli_fetch_assoc($query)) {
        echo "<tr>";
        echo "<td>" . $row['insuranceprice'] . "</td>";
        echo "</tr>";
    }
    echo "</table>";
}

mysql_close($con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:52:25.007

尝试阅读有关 using`mysqli_fetch_row`而不是的其他答案`mysql_fetch_row`，但我认为您需要注意的是这一行：

```
$query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '1'"); 
```

您将结果存储到`$query`变量中，但是当您循环时：

```
while($row = mysql_fetch_array($result)) 
```

您尝试获取`$result`未在此处声明的变量。

# java - Android-在多个按钮上滑动

> ID：16137763
> 
> 赞同：2
> 
> 时间：2013-04-22T00:34:03.997
> 
> 标签：java, android, button, touch

我已经使用网格布局实现了一个按钮网格。我试图允许单次滑动来激活多个按钮。当用户触摸任何一个按钮时，我会调用一个按下特定按钮的函数来执行相应的操作。但是，目前，我每次触摸只能激活一个按钮。多点触控有效，但不是单次滑动。问题是，虽然 onTouch 函数被连续调用，但我用来确定按下的按钮的视图对象仅在初始触摸时更新。我需要做的是获取所有被刷过的按钮的 ID。

谢谢。

```
@Override
public boolean onTouch(View v, MotionEvent event)
{
    super.onTouchEvent(event);
    if (event.getAction() == MotionEvent.ACTION_MOVE) 
    {
        switch (v.getId())
        {
        case R.id.padZeroZero:
            padTouch(0,0);
            break;
        case R.id.padZeroOne:
            padTouch(0,1);
            break;
        case R.id.padZeroTwo:
            padTouch(0,2);
            break;
        //There's a lot more cases (it's a 9x8 grid), but they all do the same thing.
        }
    }
    return false;
} 
```

# asp.net-mvc-3 - WebAPI PUT/POST 中的部分实体更新

> ID：16137766
> 
> 赞同：15
> 
> 时间：2013-04-22T00:34:32.077
> 
> 标签：asp.net-mvc-3, web-applications, asp.net-web-api, single-page-application

假设您有一个更新文档的存储库方法：

```
public Document UpdateDocument(Document document)
  {
  Document serverDocument = _db.Documents.Find(document.Id);
  serverDocument.Title = document.Title;
  serverDocument.Content = document.Content;
  _db.SaveChanges();
  return serverDocument;
  } 
```

在这种情况下，实体有两个属性。更新 Document 时，JSON 请求中需要这两个属性，因此请求`PUT /api/folder`正文为

```
{
  "documentId" = "1",
  "title" = "Updated Title"
} 
```

将返回错误，因为未提供“内容”。我这样做的原因是，即使对于可为空的属性和用户不更新的属性，强制客户端在请求中指定这些字段以避免用空值覆盖服务器端的未指定字段似乎更安全。

**这导致我总是要求 PUT 和 POST 请求中的每个可更新属性，即使这意味着为这些属性指定 null。**

这很酷吗，或者是否有一种我尚未了解的模式/实践可以通过仅通过网络发送所需的内容来促进部分更新？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T02:30:15.630

API 设计的最佳实践是使用 HTTP PATCH 进行部分更新。事实上，像您这样的用例正是 IETF 首先引入它的原因。

[RFC 5789](https://www.rfc-editor.org/rfc/rfc5789)非常精确地定义了它：

> **PATCH**用于对资源应用**部分修改**。
> 
> 需要一种新方法来提高互操作性并防止
> 错误。**PUT**方法已经定义为用一个完整的新主体覆盖资源，
> 并且**不能重用来进行部分更改**。否则，代理和缓存，甚至客户端和服务器，可能会对
> 操作的结果感到困惑。POST 已经被使用，但没有广泛的互操作性（例如，没有标准的方法来
> 发现补丁格式支持）。

Mark Nottingham 写了**一篇**关于在 API 设计中使用 PATCH 的精彩文章 - [http://www.mnot.net/blog/2012/09/05/patch](http://www.mnot.net/blog/2012/09/05/patch)

在你的情况下，那将是：

```
 [AcceptVerbs("PATCH")]
  public Document PatchDocument(Document document)
  {
      Document serverDocument = _db.Documents.Find(document.Id);
      serverDocument.Title = document.Title;
      serverDocument.Content = document.Content;
      _db.SaveChanges();
      return serverDocument;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T01:37:06.843

> Is this cool, or is there a pattern/practice that I haven't learned about yet that might facilitate partial updates by sending only what is needed over the wire?

A good practice of doing a `POST` or `PUT` is to only include values that you need for that specific request. In doing the `UpdateDocument` you should ask yourself what "really should be done here"? If you have a hundred fields on that object do you need to update all of them or only part of them. What "action" are you really trying to do?

Let's have an illustration for those questions, say we have a `User` object that has the following fields:

```
public class User {
    public int Id {get;set;}
    public string Username {get;set;}
    public string RealName {get;set;}
    public string Password {get;set;}
    public string Bio {get;set;}
} 
```

You then have two use cases:

1.  Update the profile of a User
2.  Update the password of a User

When you do each of those you will not, or it's a good idea to, have one update method that will do both. Instead of having a generic `UpdateUser` method you should have the following methods:

1.  `UpdateProfile`
2.  `UpdatePassword`

Methods that accepts fields that they just need, nothing more, nothing less.

```
public User UpdateProfile(int id, string username, string realname, string bio) {
}
public User UpdatePassword(int id, string password) {
} 
```

Now comes the question:

> I have a use case that a "user action" allows for an update on multiple fields where some of the fields can have "no input" from the user but I don't want to update that field in my model.

Suppose a user updates his/her profile and provided values for `Username`, `RealName` but not for `Bio`. But you do not want to set `Bio` as null or empty if it has a value already. Then that becomes a part of your application's business logic and **that should be handled explicitly**.

```
public User UpdateProfile(int id, string username, string realname, string bio) {
    var user = db.Users.Find(id);
    // perhaps a validation here (e.g. if user is not null)
    user.Username = username;
    user.RealName = realname;
    if (!string.IsNullOrEmptyWHiteSpace(bio)) {
        user.Bio = bio;
    }
} 
```

# c# - 为什么不总是有默认构造函数

> ID：16137767
> 
> 赞同：1
> 
> 时间：2013-04-22T00:34:43.573
> 
> 标签：c#, wcf, constructor

在 C# 中，当我创建一个空类时，它提供了一个默认构造函数，但是当我提供一个带参数的构造函数时，不再创建默认构造函数。

我的问题是：

1.  为什么编译器不再给我默认构造函数？
2.  是否有设置始终生成此默认构造函数？

这些问题源于使用 WCF，我需要默认构造函数，但也希望能够为构造函数提供值，最好不必每次都放置默认构造函数，我不会认为未使用的默认构造函数会产生很多开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:40:16.923

拥有自定义构造函数（通常）意味着对象的内部状态使用您通过构造函数参数提供的一些自定义信息进行初始化。如果在这种情况下仍然有默认构造函数，那么初始状态会是什么？

如果您没有自定义构造函数，那么假设您只使用默认构造函数就可以了，因为没有要初始化的内部状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:36:00.350

没有它的设置。

在某些情况下，默认构造函数是一种强制约定指定数据的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:39:30.630

默认构造函数存在于...默认。但是，如果您创建自己的参数化构造函数，则编译器会假定您要使用该构造函数，并且不再发出默认构造函数。

如果您想要使用 WCF 的默认值，则必须指定它。如果您愿意，可以在其中使用一些默认值调用参数化构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:54:50.400

在 C++、C♯、Java 及其后代语言中，编写自定义构造函数是因为需要确保对象已初始化并处于一致状态。编译器无法猜测它应该如何初始化对象，因此它甚至不会尝试。有很多方法可以为类同时拥有默认构造函数和自定义构造函数。

Java 有相互引用的构造函数：

```
public Name(String givenName, String middleName, String surName) {...}
public Name(String givenName, String surName) {
    this(givenName, null, surname);
} 
```

C++11 引入了委托构造函数，它们做同样的事情。C++ 一直都有默认参数，它也可以做同样的事情。C♯ 似乎只有默认参数。

其他语言使用约定：Objective-C 让程序员根据指定的初始化程序编写所有初始化程序。

简而言之，总有办法做到这一点，但你必须手动编程。不存在自动方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T00:56:18.710

如果您没有为您的类提供任何构造函数定义，编译器只会创建默认构造函数。原因可能是：当你需要创建对象的实例时，你需要调用构造函数，所以如果编码器没有定义构造函数，编译器会添加它使其工作。

但是一旦你已经定义了一个构造函数，那就告诉编译器用户意识到了构造函数的需要，因此默认构造函数不会被自动添加。您需要手动插入自己的默认构造函数。我不认为有这个设置。

# vba - 按降序对行进行排序，直到出现空白行，然后继续下一个空白行

> ID：16137769
> 
> 赞同：0
> 
> 时间：2013-04-22T00:34:59.450
> 
> 标签：vba, sorting, excel, logic

我想按降序对行进行排序“直到碰到每个空白行”。

我有以下代码：

```
For j = 1 To 15
For i = 1 To 15

   Do Until mySheet.Cells(i, 1).Value = 0

   If mySheet.Cells(j, 2).Value > mySheet.Cells(i, 2).Value Then
       For c = 2 To 5
            temp1 = mySheet.Cells(i, c).Value
            mySheet.Cells(i, c).Value = mySheet.Cells(j, c).Value
            mySheet.Cells(j, c).Value = temp1
       Next c
   End If

   i = i + 1
   Loop

Next i
Next j 
```

If 语句通过比较行的第二个数字以降序交换行。

出了问题的是“直到循环”。我想继续检查/交换行，直到它碰到一个空白行，但继续检查/交换空白行之后的行。检查，交换，在碰到空白行时停止，然后再次检查下一行，再次交换，依此类推。

**编辑**
这是我正在尝试做的事情：
之前：

```
Row   B           C      D       E
1     63743       734    1848    246
2     86208       900    900     974
3     --------**Empty Row**----------
4     40934       730    5643    5565
5     97734       454    54656   3345
6     73885       347    3728    9934
7     --------**Empty Row**----------
8     34355       998    3884    3299
9     98438       383    43483   4399
10    19874       454    53439   3499
11    --------**Empty Row**---------- 
```

后：

```
Row   B           C      D       E
1     86208       900    900     974
2     63743       734    1848    246
3     --------**Empty Row**----------
4     97734       454    54656   3345
5     73885       347    3728    9934
6     40934       730    5643    5565
7     --------**Empty Row**----------
8     98438       383    43483   4399
9     34355       998    3884    3299
10    19874       454    53439   3499
11    --------**Empty Row**---------- 
```

My`If`比较 B 列中的值，并按降序对行进行排序。我不知道如何制作一个while循环，以便在遇到空白行时停止排序，然后在空白行之后继续比较/排序接下来的几行。注意我不知道空白行之前有多少行。

**之前编辑 2**
：

```
Row   A   B           C      D       E
1     A    63743       734    1848    246
2     B    86208       900    900     974
3     -------------**Empty Row**----------
4     C    40934       730    5643    5565
5     D    97734       454    54656   3345
6     E    73885       347    3728    9934
7     -------------**Empty Row**----------
8     F    34355       998    3884    3299
9     G    98438       383    43483   4399
10    H    19874       454    53439   3499
11    -------------**Empty Row**---------- 
```

后：

```
Row   A   B           C      D       E
1     B   86208       900    900     974
2     A   63743       734    1848    246
3     -------------**Empty Row**----------
4     D   97734       454    54656   3345
5     E   73885       347    3728    9934
6     C   40934       730    5643    5565
7     -------------**Empty Row**----------
8     G   98438       383    43483   4399
9     F   34355       998    3884    3299
10    H   19874       454    53439   3499
11    -------------**Empty Row**---------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T05:41:01.120

现有的代码永远不会终止，因为您正在检查的变量，

```
Do Until mySheet.Cells(i, 1).Value = 0 
```

如果以下任何内容均未更改：

```
If mySheet.Cells(j, 2).Value > mySheet.Cells(i, 2).Value Then
   For c = 2 To 5
        temp1 = mySheet.Cells(i, c).Value
        mySheet.Cells(i, c).Value = mySheet.Cells(j, c).Value
        mySheet.Cells(j, c).Value = temp1
   Next c
End If 
```

你`c`从 2 到 5 循环，所以`Cells(i,1)`永远不会被触及。

这是非常基本的，以至于有点难以理解你真正想要做什么，但我会试一试。

似乎您希望使用冒泡排序对第 2 到 5 列（可能是 1 到 5）中的每一列进行排序 - 检查两个相邻的单元格，将较小的单元格移到顶部，继续到列的底部。您没有说明每列是否具有相同的长度，所以我假设它没有。

我们应该能够一次对一列进行排序（这不是最有效的算法，但我认为它符合您的意图）：

```
Sub sortMyColumns()
Dim colNum As Integer
Dim numRows As Integer
Dim i, j As Integer
Dim lastCell As Range

For colNum = 1 To 5
    Set lastCell = Cells(1, colNum).End(xlDown)
    numRows = lastCell.Row
    For i = 2 To numRows
        For j = numRows To i Step -1
           If Cells(j, colNum) < Cells(j - 1, colNum) Then
             temp = Cells(j - 1, colNum).Value
             Cells(j - 1, colNum).Value = Cells(j, colNum).Value
             Cells(j, colNum).Value = temp
          End If
        Next j
    Next i
Next colNum
End Sub 
```

对于每一列，这会找到行数；然后它从底部开始，并将较小的数字一直推到顶部。它回到底部，但这次只从顶部向上推到一个。它一直持续到最后两个单元格 - 现在应该对所有内容进行排序。

如果单元格不包含数值等，您可能需要添加一些错误捕获，但原则上这应该有效。

**编辑**

根据您的评论，这不是您想要的。我创建了第二个 Sub，它仅根据 B 中的值对列 B 到 E 进行排序 - 这更好地反映了您的代码示例，并且可能是您的想法。我正在使用 B 列的长度来找出要排序的行数 - 我仍然不清楚您的 A 列在做什么以及测试它如何帮助您。

如果这仍然不是你想要的，我建议你用一个简单的例子（屏幕截图）来编辑你的问题，“这就是我的工作表的开头”和“这就是它的样子”。电子表格的四五行以及 A 到 E 列就足够了。

```
Sub sortByColumnB()
' sort cells in columns B through E
' based on the value found in B
    Dim colNum As Integer
    Dim numRows As Integer
    Dim i, j As Integer
    Dim lastCell As Range

    ' find the last cell in column B:
    Set lastCell = Cells(1, 2).End(xlDown)
    numRows = lastCell.Row
    For i = 2 To numRows
        For j = numRows To i Step -1
           If Cells(j, 2) < Cells(j - 1, 2) Then
             ' swap around each of the cells in this row with the one above
             For colNum = 2 To 5
                 temp = Cells(j - 1, colNum).Value
                 Cells(j - 1, colNum).Value = Cells(j, colNum).Value
                 Cells(j, colNum).Value = temp
             Next colNum
          End If
        Next j
    Next i

End Sub 
```

我在以下虚拟电子表格上运行了此代码：

![在此处输入图像描述](https://i.stack.imgur.com/a5pQh.png)

它导致以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/fQ6Pu.png)

正如您所看到的，A 列没有改变，B 到 E 列中的每一行都根据 B 列中的键进行排序。您当然知道 Excel 中有一个内置的排序功能，但我假设您有理由不想用...

我希望这是你需要的！如果不是，请更新您的问题，并以“我希望这个变成那个”的例子。

**编辑 3** 您对问题的最新更新以及对我的解决方案的评论最终清楚地表明了您打算做什么。因为直到我们“掉出边缘”我们才能真正知道我们已经到达最后一个块，所以我修改了代码，所以它有一个带有错误陷阱的无限循环（当你试图超出底部时生成电子表格）。我一直用空白行测试了这个（包括A列中的空白 - 请注意代码根本不再使用A列）：

```
Sub keepSorting()
Dim colNum As Integer
Dim firstRow, lastRow As Integer
Dim i, j As Integer

' loop around the algorithm we had earlier, but only for the 'non-empty blocks of rows'
firstRow = 1
lastRow = [B1].End(xlDown).Row

On Error GoTo allDone

While True ' break out of the loop when we throw error
' sort from firstRow to lastRow:
    For i = firstRow + 1 To lastRow
        For j = lastRow To i Step -1
           If Cells(j, 2) > Cells(j - 1, 2) Then
             ' swap around each of the cells in this row with the one above
             For colNum = 1 To 5
                 temp = Cells(j - 1, colNum).Value
                 Cells(j - 1, colNum).Value = Cells(j, colNum).Value
                 Cells(j, colNum).Value = temp
             Next colNum
          End If
        Next j
    Next i
    firstRow = Cells(lastRow + 1, 2).End(xlDown).Row
    lastRow = Cells(firstRow, 2).End(xlDown).Row

Wend

allDone:
On Error GoTo 0
End Sub 
```

它变成了这个：

![在此处输入图像描述](https://i.stack.imgur.com/cuIHV.png)

进入这个：

![在此处输入图像描述](https://i.stack.imgur.com/wlQTt.png)

注意 -`On Error Resume Next`因为找到工作表底部的时间会产生错误`lastRow`；`firstRow`但既然我们已经完成了，我们只需要退出while循环......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:54:57.263

有很多方法可以做到这一点，但如果你想保持嵌套`For`方法，你需要做的第一件事就是在你遇到空白之前找出有多少行。

```
Dim lngTotalRows As Long

lngTotalRows = 0

While Cells(lngTotalRows + 1, 1) <> ""
    lngTotalRows = lngTotalRows + 1
Wend 
```

现在您有了它，您基本上可以使用现有代码将 15 替换为 lngTotalRows。你的循环确实有几个小问题......

你的外循环应该是：

```
For j = 1 to lngTotalRows - 1 
```

你的内部循环应该是：

```
For i = j + 1 to lngTotalRows 
```

如果你看几个具体的例子，你可能会明白为什么。您正在将外部循环单元格与其**之后**的每个单元格进行比较，因此第一次通过循环时，我们的第一个单元格将具有`j = 1`（因此**第 1 行中的单元格**），我们将其与之后的每一行进行比较，因此我们**从**`j + 1`(**是第 2 行**），然后我们看第 3 行、第 4 行等等。当外部循环查看**第 10 行时**，内部循环将只查看**第 11 行**和排序范围末尾之间的值。

外部循环结束于，`lngTotalRows - 1`因为内部循环将查看该单元格之后的单元格，该单元格将是范围中的最后一个单元格。

看看您是否可以在现有代码中实现它。如果事情没有按预期运行，请在单步执行代码时使用断点并检查值。它可能非常有启发性。您还可以`Debug.Print`在代码中使用语句将值输出到即时窗口以帮助追踪问题。

# c# - 从会话创建 XML 文件时无法转换对象

> ID：16137771
> 
> 赞同：0
> 
> 时间：2013-04-22T00:35:11.363
> 
> 标签：c#, casting, xmlwriter

我正在处理一项需要从会话创建 XML 文件的任务。我有一个铸造问题，我知道它来自列表，这是存储购物车中的物品的地方，但我不知道如何解决它。

按钮单击是一个创建 XML 按钮，这是我得到的确切错误： `Unable to cast object of type Utils.ShoppingCart' to type 'System.Collections.Generic.List`1 [CartItem]'。

`Line 86: List<CartItem> cartItems = new List<CartItem>();`

`Line 87: cartItems = (List<CartItem>)Session["UserCart"];`

这是代码。如果我需要提供更多信息，请告诉我。我将不胜感激任何反馈！

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    ShoppingCart sCart = (ShoppingCart)Session["UserCart"];

    List<CartItem> cartItems = new List<CartItem>();
    cartItems = (List<CartItem>)Session["UserCart"];

    XmlWriterSettings sets = new XmlWriterSettings();
    sets.Indent = true;

    using (XmlWriter writer = XmlWriter.Create(Server.MapPath("~/items.xml"), sets))
    {

        writer.WriteStartDocument();
        writer.WriteStartElement("cartItems");

        foreach (CartItem i in cartItems)
        {
            writer.WriteStartElement("CartItem");
            writer.WriteElementString("ITEM_ID", i.ITEM_ID.ToString());
            writer.WriteElementString("ITEM_QUANTITY", i.ITEM_QUANTITY.ToString());

            writer.WriteEndElement();
        }

        writer.WriteEndElement();
        writer.Flush();
        writer.Close();

        Label1.Text = "XML written successfully!";

        Label2.Text = "<a href='DOM/cart.xml'> XML created successfully. </a>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:45:55.867

这只是一个猜测，但正如我在上面的评论中所说，您对 Session 的第一次调用似乎没有产生错误（您`ShoppingCart`从 Session 获取实例）。

看起来您正试图从中检索项目列表`ShoppingCart`。由于您已经拥有实例（在您第一次调用 Session 时），您需要做的就是访问包含购物车中项目列表的属性（如果有的话），如下所示：

```
ShoppingCart sCart = (ShoppingCart)Session["UserCart"];

List<CartItem> cartItems = sCart.Items; 
```

以上基于`ShoppingCart`有一个名为的属性，该属性`Items`返回一个列表`CartItem`。

你这样做的方式是告诉编译器`ShoppingCart`从 Session 获取实例并将其转换为 List `CartItems`，因此我怀疑的错误`ShoppingCart`是`CartItems`同一个对象:)

# unix - 如何使用 awk、sed 或其他 unix 命令每隔 n 个间隔获取一系列行？

> ID：16137773
> 
> 赞同：6
> 
> 时间：2013-04-22T00:35:22.863
> 
> 标签：unix, sed, awk, cat

我知道如何使用 awk 和 sed 获得一系列行。我也知道如何使用 awk 和 sed 打印出每一行。

但是，我不知道如何将两者结合起来。

例如，我有一个包含 1780000 行的文件。

对于每第 17800 行，我想打印第 17800 行加上之后的两行。

因此，如果我有一个包含 1780000 行的文件，并且它从 1 开始并以 1780000 结束，则会打印：

```
1
2
3
17800
17801
17802
35600
35601
35602
# ... and so on. 
```

有谁知道如何使用 awk、sed 或其他 unix 命令每隔 n 个间隔获取一系列行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:50:55.630

使用 GNU sed：

```
sed -n '0~17800{N;N;p}' input 
```

意义，

```
For every 17800th line: 0~17800
  Read two lines: {N;N;
  And print these out: p} 
```

我们还可以添加前三行：

```
sed -n -e '1,3p' -e '0~17800{N;N;p}' input 
```

使用 awk，这会更简单：

```
awk 'NR%17800<3 || NR==3 {print}' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T02:53:02.663

```
$ cat file
1
2
3
4
5
6
7
8
9
10

$ awk '!(NR%3)' file
3
6
9

$ awk -v intvl=3 -v delta=2 '!(NR%intvl){print "-----"; c=delta} c&&c--' file
-----
3
4
-----
6
7
-----
9
10

$ awk -v intvl=4 -v delta=2 '!(NR%intvl){print "-----"; c=delta} c&&c--' file
-----
4
5
-----
8
9

$ awk -v intvl=4 -v delta=3 '!(NR%intvl){print "-----"; c=delta} c&&c--' file
-----
4
5
6
-----
8
9
10 
```

# android - 如何更改菜单和上下文菜单的主题？

> ID：16137774
> 
> 赞同：2
> 
> 时间：2013-04-22T00:35:24.350
> 
> 标签：android, api, menu, colors, edit

我正在制作一个带有普通和浮动上下文菜单的 Android 应用程序，但它的背景是白色的，当我点击它时，选择颜色是旧 Android 版本的默认橙色。

我的应用程序是黑色/蓝色主题，但这个橙色正在破坏它。AndroidManifest.xml 设置为：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="13" /> 
```

它会以某种方式影响吗？

如何设置最新版本 Android（例如 ICS/JB）的蓝色主题菜单？

# javascript - 使用javascript从数组中删除一个对象？

> ID：16137777
> 
> 赞同：1
> 
> 时间：2013-04-22T00:35:48.907
> 
> 标签：javascript

如何通过 id 从数组中删除对象，例如：

```
users = [{id: "10051", name: "Mike Coder"},{id: "4567", name: "Jhon Second"}] 
```

假设我想使用 javascript 删除 ID 为“10051”的用户，我尝试搜索互联网但找不到任何东西？

加上我不想使用下划线！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T00:40:20.500

> 加上我不想使用下划线！

本机方法是[`.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)：

```
var removeId = "4567";
users = users.filter(function (user) { return user.id !== removeId; }); 
```

请注意，它要求引擎与[ES5 兼容](http://kangax.github.io/es5-compat-table/#Array.prototype.filter)（或[polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:36:55.057

```
for (var i = 0; i < users.length; ++i)
{
    if ( users[i].id == "10051" )
    {
        users[i].splice(i--, 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T00:40:26.667

你可以使用`.filter`数组的方法。

```
users = users.filter(function(el) {return el.id !== '10051'}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T00:49:04.543

```
var users= [{id:"10051", name:"Mike Coder"},{id:"4567", name:"Jhon Second"}];

/* users.length= 2 */

function removebyProperty(prop, val, multiple){
    for(var i= 0, L= this.length;i<L;i++){
        if(i in this && this[i][prop]=== val){
            this.splice(i, 1);
            if(!multiple) i= L;
        }
    }
    return this.length;
} 
```

**removebyProperty.call(users,'id',"10051");**

**返回值：（数字）1**

# php - 大流量MySQL数据库解决方案

> ID：16137785
> 
> 赞同：-2
> 
> 时间：2013-04-22T00:36:55.243
> 
> 标签：php, mysql, database, database-design

所以我想知道转向一个严肃的数据库解决方案。我正准备维护一个拥有 100 万用户的网站，这些用户在任何给定时间使用该网站的人数约为数百人。

我们使用大约 7 GB 的数据并维护大约 40 个表，从 3500 万条记录到大约几千条记录不等。

我们现在有大约 100,000 个用户缓存和维护单个数据库服务器。我们使用 CakePHP 为我们的网站提供动力。我们需要计划变得更大，我负责。

我正在努力学习，但我想知道堆栈中的酷孩子们信任什么来管理这种规模的数据库。

我回顾了亚马逊的解决方案 Cassandra、分片数据库、mysql confederated db 和 NBD 集群。

我想用 mysql 为这个解决方案提供动力，我问是因为我对当前明智的解决方案感兴趣。

用于此的方法、工具和适当的引擎是我想知道的。我会继续研究。

我正在尝试减轻我需要的服务器功率。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T00:49:20.657

这些事情每个案例都有很大差异，因此如果没有更多数据，就无法说出真正有用的东西。

但是，如果您只是想知道其他人是如何做到的，请查看此博客：[http ://highscalability.com/](http://highscalability.com/)

至于堆栈...查看博客：[https ://blog.stackoverflow.com/](https://blog.stackoverflow.com/)

# mysql - MySQL中的高频插入

> ID：16137787
> 
> 赞同：3
> 
> 时间：2013-04-22T00:37:08.740
> 
> 标签：mysql, performance, innodb, scalability, high-availability

我在 MySQL 中遇到高频插入问题。我在互联网上搜索了很多，但没有找到一个很好的答案来解决我的问题。

我需要以非常高的频率记录很多事件（每天约 3000 次插入/秒 => 2.6 亿行），这些事件存储在这样的 InnoDB 表中：

```
log_events :
 - id_user : BIGINT
 - id_event : SMALLINT
 - date : INT
 - data : BIGINT (data associated to this event) 
```

我的问题是：
- 如何加快插入速度？事件由成千上万的访问者发送，我们无法批量插入
- 如何限制 IO 写入？我们在 6*600 GB SSD 驱动器上并且有写入 IO 问题

你对这类问题有什么想法吗？

谢谢

弗朗索瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:28:33.053

你那张桌子上有外键吗？如果是这样，我会考虑删除它们并仅在用于读取的列上添加索引。这应该会改善写入。

第二个想法是使用一些内存数据库（例如redis，memcache）作为队列，一些工作人员可以从中获取数据并批量（例如每2秒）插入mysql存储。

如果您不需要频繁读取，另一种选择是使用`archive`存储而不是 innodb：[http](http://dev.mysql.com/doc/refman/5.5/en/archive-storage-engine.html) ://dev.mysql.com/doc/refman/5.5/en/archive-storage-engine.html 。但它看起来对你来说不是一个选项，只要它根本没有索引（这意味着全扫描表读取）。

另一种选择是重组你的数据库结构，例如。使用分区（[http://dev.mysql.com/doc/refman/5.5/en/partitioning.html](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)）。但这取决于 SELECTS 的外观。

我的其他问题是：

*   你能显示整个表的定义吗？
*   哪些字段用于读取？你能告诉他们吗？
*   您需要读取所有数据还是仅需要最近的数据？如果是这样，数据必须是最近多久？（例如，仅从最后一天/周/月/年开始）
*   id_event 是一个事件类型，对吧？可能事件的数量是静态的还是将来会发生变化？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:01:17.673

> 事件由成千上万的访问者发送，我们无法批量插入

您需要批量插入或分片数据。我很想先尝试批量插入路线。

你认为你不能暗示这些事件是由自治进程创建的——你只需要通过中介而不是直接到数据库来引导它们。并且最容易将该漏斗实现为基于事件的服务器（而不是线程或分叉服务器）。

您没有说明事件是什么，也没有说明它们的来源——这对实施解决方案的细节有一些影响。

rsyslog 和 syslogng 都将与 MySQL 后端通信——因此您可以消除为每条消息建立新连接的开销——但我不知道它们是否实现了缓冲/批量插入。当然可以使用单个进程跟踪他们生成的文件并从那里创建批量插入。

使用这个[基于事件的服务器](http://www.phpclasses.org/package/5758-PHP-Handle-requests-to-network-servers.html)、[这个缓冲工具](http://www.phpclasses.org/package/7485-PHP-Store-values-in-cache-with-underflow-and-overflow.html)以及一些代码来实现异步 mysqli 调用和看门狗来编写一个漏斗相对简单。或者您可以将[node.js 与 async mysql lib 一起](https://stackoverflow.com/questions/5818312/mysql-with-node-js)使用。还有像[statsd](https://github.com/etsy/statsd/)之类的工具（同样使用 node.js），它也可以对数据上的数据执行一些聚合。

或者你可以从头开始写一些东西。

不过，只写数据库是一个无用的硬件。您尚未提供有关如何使用此数据的任何详细信息 - 这与设计解决方案有些相关。此外，由于理想情况下数据馈送将是单个进程/数据库会话，因此使用 MyISAM 而不是 InnoDB 可能是一个更好的主意（我在您后来的评论中看到您说您在使用 MyISAM 时遇到问题 - 大概这是与多个客户端有关）。

# javascript - jQuery Draggable/Droppable 动画 remove()

> ID：16137789
> 
> 赞同：2
> 
> 时间：2013-04-22T00:37:27.177
> 
> 标签：javascript, jquery, draggable, droppable

当我尝试`remove()`在可拖动元素上的动画之后调用时遇到了问题。

基本上，当一个元素被删除时，我想：

1.  向下动画放置元素的比例
2.  移除元素，以便在需要时可以拖动另一个元素

现在发生的事情是：

1.  比例动画作品
2.  remove() 调用不会删除元素的占位符，这会阻止用户拖动任何其他元素

这是我正在使用的javascript：

```
drop: function(event, ui) {
   ui.draggable.effect("scale", {
     scale: "content",
     percent: 1
   }, 100, function() {
     return ui.draggable.remove();
   });
}); 
```

当您`setTimeout`围绕`ui.draggable.remove();`调用执行功能时，似乎会出现相同的问题，因此它一定是某种时间问题。

有没有人遇到过这个问题？非常感谢您朝正确的方向轻推！

# jquery - jquery getScript 在返回的脚本上窒息

> ID：16137790
> 
> 赞同：1
> 
> 时间：2013-04-22T00:37:28.217
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我正在使用 MVC 4，它可以正常返回一个`JavaScriptResult`. 我已经用简单的javascript对其进行了测试。

但是，虽然我可以在 firebug 中看到 getScript 将 javascript 返回到浏览器，但下面的代码不起作用：

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width" />
<title>Categories Page</title>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script src="~/Scripts/jquery-2.0.0.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.getScript('http://localhost:53353/z/categories');
    });   
</script>
</head>    
<body>
    <h2>test</h2>
    <div id="chart_div">
    </div>        
</body>
</html> 
```

但如果我更换：

```
$(document).ready(function () {
        $.getScript('http://localhost:53353/z/categories');
}); 
```

..使用被调用时返回给浏览器的javascript `getScript`，那么代码就可以工作了。

调用时返回的 javascript`getScript`只是调用 google barchart 的标准 javascript。在返回的脚本中也省略了脚本标签，因为`getScript`添加了这些。

问题是，`getScript`当我可以复制并粘贴返回的脚本并将其替换为该`getScript`部分时，为什么会在返回的脚本上窒息，以便确定返回的脚本没有缺陷，因为当替换时页面正确呈现制成？

好的。让我们忘记 MVC。只需使用 HTML（和基于 [https://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)示例的 javascript ），我们就有以下工作：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Categories Page</title>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script src="scripts/jquery-2.0.0.js"></script>
    <script type="text/javascript" src="scripts/testscript.js"></script>
</head>
<body>
    <h2>test</h2>
    <div id="chart_div">
    </div>    
</body>
</html> 
```

testscript.js 仅包含：

```
google.load('visualization', '1', { packages: ['corechart'] });
google.setOnLoadCallback(drawChart);
function drawChart() {
var data = google.visualization.arrayToDataTable([
    ['Year', 'Sales', 'Expenses'],
    ['2004', 1000, 400],
    ['2005', 1170, 460]       
]);
var options = { title: 'Company Performance', vAxis: { title: 'Year', titleTextStyle: { color: 'red' } } };
var chart = new google.visualization.BarChart(document.getElementById('chart_div')); chart.draw(data, options); } 
```

但是，如果我们现在重写这一行......

```
<script type="text/javascript" src="scripts/testscript.js"></script> 
```

作为...

```
<script type="text/javascript">
    $(document).ready(function () {
        $.getScript('scripts/testscript.js');
    });
</script> 
```

...浏览器只是挂起，即使您可以在 Firebug 的响应中看到 testscript.js 的内容。只需将 testscript.js 的内容替换为简单的内容，例如`alert('hello');`getScript 就可以正常工作，但像上面的 testscript.js 和 getScript 这样复杂的内容就会停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:06:08.620

在您开始调用其中的函数之前，可能该文件尚未加载。
可以试试success函数中的操作吗？

```
$.getScript('http://localhost:53353/z/categories', function(data, textStatus, jqxhr) {
   if(textStatus == 'success') {
      //do work here
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T05:26:01.057

我尝试将其`$.getScript`用于我正在开发的应用程序，以推动加载相当繁重的日期选择器脚本，直到知道确实需要它为止。

我发现了一种类似的挂起方式，浏览器会变成空白并且似乎永远在加载。

我检查了 DOM，我发现日期选择器脚本正在使用`document.write()`调用操作文档，并且它们没有附加到文档，而是替换了整个文档。摆脱那些在我的应用程序中解决了这个问题，但我后来发现我已经有了 jQuery UI，而且使用旧的日期选择器对我来说很愚蠢。

当然，问题发布已经有一段时间了，所以现在很可能已经弄清楚了。

# c - 未定义的全局变量引用

> ID：16137797
> 
> 赞同：1
> 
> 时间：2013-04-22T00:38:58.173
> 
> 标签：c, global-variables, extern

我正在使用 C 和 Quake 3 / ioquake 引擎。请注意，这不是特定于游戏引擎的问题，它纯粹是 C 语言查询。

`g_entities`是引擎中全局定义的变量。这个变量也有一个`extern`语句的使用。

引擎中的许多其他`.c`文件都可以毫无问题地调用此变量，但是当我从代码中执行此操作时，`undefined reference to g_entities`编译时会出现链接器错误。

**我的代码：**

```
// get entity information for this bot (e.g. health etc)
gentity_t *entity;
entity = &g_entities[1]; 
```

**制作错误：**

```
/home/george/Desktop/ioquake/ioquake-latest/ioquake3/code/botlib/be_ai_char.c:1196: undefined reference to `g_entities' 
```

我将不胜感激任何 C 大师可以提供的任何建议，这些建议可能会为我指明解决方案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T01:35:15.293

This is not a header file issue. You need to link against an object that contains the definition of g_entities. This could be an object file or a library. Sometimes the order in which you link things also makes a difference.

Do you know where g_entities is defined? The other code references this symbol, how doe it resolve it? What does it link against?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:30:26.450

是不是因为链接器的输入集中缺少实际定义 g_entities（没有 extern）的模块（以及很可能引用它的所有其他模块）？

# javascript - 最大高度容器，里面有非常高的固定位置容器

> ID：16137801
> 
> 赞同：0
> 
> 时间：2013-04-22T00:39:38.327
> 
> 标签：javascript, jquery, html, css

在一个非常基本的 CSS 问题上遇到了一些麻烦。

我有一个最大高度为 655px 的容器。现在该容器的最右边是一个固定位置的容器（由于我正在做的事情，它必须是固定的位置）。固定位置容器的高度大得离谱。

它需要这个高度，因为它会充满内容，您最终会通过单击按钮和一些 javascript 看到这些内容。（改变滚动顶部）

我不是 100% 确定我做错了什么，但我基本上只需要 655px 的固定位置容器来显示。我不太确定为什么这不能按照我的设置方式工作。

在这里查看 JS 小提琴：http: [//jsfiddle.net/BG2bu/](http://jsfiddle.net/BG2bu/)

```
.tall {
background-color:blue;
position:absolute;
right:0px;
width:200px;
height:5000px;
} 
```

我正在使用这个 CSS 来定义 tall 容器。而且我知道如果我将位置更改为绝对位置，它将限制在其父容器的最大高度。由于其他原因，我真的需要修复这个容器。有没有办法做到这一点？我在这里错过了一些简单的东西吗？

如果这可以通过 JS/Jquery 解决方案来完成，我肯定对此持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:33:05.717

不确定这是否适合您的需求，但我已经`.tall`用另一个容器包装了 div，因为它`position:fixed`不会粘`overflow:hidden`在它的容器 div 中。

[http://jsfiddle.net/3DZ53/](http://jsfiddle.net/3DZ53/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:15:47.777

很难说这是否适合你的需要，但你能...

```
.tall {
    max-height: 655px;
    overflow: scroll / hidden;
} 
```

# javascript - 样式化 JavaScript onmouseover 警报

> ID：16137804
> 
> 赞同：3
> 
> 时间：2013-04-22T00:39:52.107
> 
> 标签：javascript, html, css

这是我将鼠标悬停在图像上时使警报出现的代码；

```
var special_offers = document.getElementsByClassName("special_offer");

//for each special offer
for(i=0;i<special_offers.length;i++){
    var special_offer = special_offers[i];
    special_offer.setAttribute("offer_shown", "0");

    special_offer.onmouseover = function(){
        if( this.getAttribute("offer_shown") == "0" ){
            this.setAttribute("offer_shown", "1");

            alert('This room has the special offer attached to it, please book soon before you miss out!');
        }
    } 
```

我想知道如何将它从沼泽标准 JS 警报更改为我可以设置样式的框，我想我会使用某种 div。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:59:48.690

您想将您的消息定向到 div 吗？

创建 div

```
<div id="mySpecialOffer">
   Some Text gets updated
</div> 
```

然后，在您的 js 中，您可以定位此 id 并使用您想要的任何消息进行更新。

```
document.getElementById("mySpecialOffer").innerHTML = 'some Text'; 
```

您甚至可以将 div 隐藏在 css 中，然后使用 JS 取消隐藏。

或者您可以创建 HTML ...

```
document.getElementById("mySpecialOffer").innerHTML = '<div> Special Offer Div Inserted </div>'; 
```

使用 jQuery 就更容易了。

这是你的想法吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:46:32.763

[http://www.webdesignerdepot.com/2012/10/creating-a-modal-window-with-html5-and-css3/](http://www.webdesignerdepot.com/2012/10/creating-a-modal-window-with-html5-and-css3/)

这是创建您自己的模态窗口的好资源。您可以使用您的函数来触发您创建的模式窗口，而不仅仅是使用 alert() 来触发标准警报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T01:23:39.957

您应该做的是打开一个全新的窗口，例如带有该消息的小网页。那将是最简单的方法！
这是一个链接：[http](http://www.w3schools.com/jsref/met_win_open.asp)
://www.w3schools.com/jsref/met_win_open.asp 当人们将鼠标悬停在图像上时，您将希望激活 window.open()。
您可以指定窗口的大小和位置，在本例中为屏幕中心和一个小窗口。
希望有帮助！

# python - scikit-learn 在管道中使用多个类预处理 SVM

> ID：16137816
> 
> 赞同：6
> 
> 时间：2013-04-22T00:41:07.067
> 
> 标签：python, scikit-learn, svm

有关机器学习的文献强烈建议对 SVM 的数据进行规范化（[Preprocessing data in scikit-learn](http://scikit-learn.org/stable/modules/preprocessing.html)）。如前所述，相同[的 StandardScalar](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler)[应该](https://stackoverflow.com/questions/14688391/how-to-apply-standardization-to-svms-in-scikit-learn)应用于训练和测试数据。

1.  与手动减去平均值并除以标准差相比，使用[StandardScalar](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler)有什么优势（除了在管道中使用它的能力）？
2.  scikit-learn 中的 LinearSVC 依赖于多类的[一对一](http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html)（正如 larsmans 所提到的，SVC 依赖于多类的一对一）。那么，如果我有多个类使用规范化作为第一个估计量的管道进行训练，会发生什么？它还会计算每个类别的均值和标准变差，并在分类过程中使用它吗？
3.  更具体地说，以下分类器是否在流水线的 svm 阶段之前对每个类应用不同的均值和标准差？

```
estimators = [('normalize', StandardScaler()), ('svm', SVC(class_weight = 'auto'))]
clf = Pipeline(estimators)
# Training
clf.fit(X_train, y)
# Classification
clf.predict(X_test) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T01:51:46.757

执行的特征缩放`StandardScaler`是在不参考目标类的情况下执行的。它只考虑`X`特征矩阵。它计算所有样本中每个特征的均值和标准差，而与每个样本的目标类别无关。

管道的每个组件独立运行：只有数据在它们之间传递。让我们扩展管道的`clf.fit(X_train, y)`. 它大致做了以下工作：

```
X_train_scaled = clf.named_steps['normalize'].fit_transform(X_train, y)
clf.named_steps['svm'].fit(X_train_scaled, y) 
```

第一个缩放步骤实际上忽略了`y`它的传递，而是计算每个特征的平均值和标准差，`X_train`并将它们存储在它的`mean_`和`std_`属性（`fit`组件）中。它还居中`X_train`并返回它（`transform`组件）。下一步学习 SVM 模型，并执行 one-vs-rest 所需的操作。

现在从管道的角度进行分类。`clf.predict(X_test)`扩展为：

```
X_test_scaled = clf.named_steps['normalize'].transform(X_test)
y_pred = clf.named_steps['svm'].predict(X_test_scaled) 
```

归来`y_pred`。在第一行中，它使用存储的`mean_`并将`std_`转换应用于`X_test`使用从训练数据中学习的参数。

是的，缩放算法不是很复杂。它只是减去平均值并除以标准。但是`StandardScalar`：

*   为算法提供一个名称，以便您可以将其从库中拉出
*   避免你自己滚动，确保它正常工作，并且不需要你了解它在内部做什么
*   记住 a`fit`或`fit_transform`以后`transform`操作的参数（如上）
*   提供与其他数据转换相同的接口（因此可以在管道中使用）
*   在密集或稀疏矩阵上运行
*   能够用它的`inverse_transform`方法逆转转换

# regex - Wordnet如何知道字符串是否是有效的查询字符串

> ID：16137818
> 
> 赞同：0
> 
> 时间：2013-04-22T00:41:19.973
> 
> 标签：regex, perl, wordnet

因此，我无法从 Wordnet::SenseRelate 调用函数，因为文本中的某些“单词”不是有效查询。我试过用 try 和 catch 包围，这样程序就不会退出并跳过它，但没有运气。我想通过使用 Wordnet::QueryData 检查一个词是否有效，但是当我使用无效词时它会退出，例如：

```
$wn->querySense("#44"); 
```

我得到：

```
(querySense) Bad query string: #44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T14:18:18.210

可以在语句中找到使用的正则表达式：

```
my ($word, $pos, $sense) = $string =~ /^([^\#]+)(?:\#([^\#]+)(?:\#(\d+))?)?$/; 
```

如果不确定令牌是否会被接受，请对照此正则表达式对其进行测试。

评论特定问题时，不能有任何前导或尾随 # 字符（遇到的问题）。如果存在 # 个字符，则查询字符串中可以有 1 个或 2 个，但不能超过 2 个。# 字符如果作为分隔符出现，以确定什么是单词、什么是 pos 和什么是有义的。

# django - 在 FastCGI 上使用夹层部署 Django

> ID：16137822
> 
> 赞同：2
> 
> 时间：2013-04-22T00:42:30.833
> 
> 标签：django, deployment, fastcgi, fabric, mezzanine

我正在尝试在使用 FastCGI 的 Subsys.no 上部署 Django 项目。我以前从未部署过项目，并且已经连续尝试了 3 天。

我在服务器上做了一个 virtualenv 并安装了我需要的所有包。我已经将我拥有的项目上传（FTP）到服务器（在正确的位置）我已经厌倦了在服务器和本地使用 Fabrics“fab all”命令。服务器给出了这样的响应：

```
--
all
---

-------
install
-------

$ cat /etc/default/locale ->

Fatal error: Low level socket error connecting to host subsys.no on port 22: Connection refused (tried 1 time)

Underlying exception:
Connection refused

Aborting. 
```

当地人给出了相同的答案，但有一个转折：

```
Fatal error: Timed out trying to connect to subsys.no (tried 1 time)

Underlying exception:
timed out 
```

我不确定错误是在这里还是[在](http://tryggoversikt.no)网站上。它给出了很多我不明白的东西。

非常感谢所有帮助，并在此先感谢！

# javascript - 使用 Javascript 编辑打开的 HTML 页面

> ID：16137827
> 
> 赞同：0
> 
> 时间：2013-04-22T00:43:40.367
> 
> 标签：javascript, html, firefox, firefox-addon, add-on

我正在研究制作 Firefox 插件，我需要一些帮助。是否可以使用 javascript 编辑在浏览器中打开的 HTML 页面？例如：

*   用户输入“google.com”
*   插件已激活
*   Javascript 将“google.com”的内容更改为可能会说“你好！” 在底部。

当然，这并不是我想要做的，但是朝着正确的方向推动如何完成这样的任务会很棒。~地毯嘶嘶声

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:57:04.390

是的。您必须找到有关 javascript DOM 操作的教程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:58:34.523

在 Firefox 插件中，这显然是可能的，因为许多扩展都是这样做的。

但是，如果您只是想修改 DOM 而我建议您看一下greasemonkey。大量示例脚本可以做到这一点：[http ://userscripts.org/](http://userscripts.org/)

额外的好处是，如果编写正确，它们也可以在 Chrome 和其他浏览器中使用。

# delphi - 从 .res 文件将位图加载到 WinAPI 窗口（无格式！）

> ID：16137828
> 
> 赞同：0
> 
> 时间：2013-04-22T00:43:48.730
> 
> 标签：delphi, delphi-2007

我在 Delphi 2007 中有一个没有表单的 Win32 API 应用程序，我想从 .res 文件加载位图。环顾了两天，似乎找不到关于这个主题的任何内容，所以是时候发布了。:)

假设我需要向“WM_PAINT”消息添加代码只是不确定要添加什么。也许可以使用GDI。

/谢谢。

编辑：

```
function WndProc(hWin: HWnd; Msg, WParam, LParam: Longint): Longint; stdcall;
var
  hbmp: HBITMAP;
  ps: PAINTSTRUCT;
  DC, hdcMem: HDC;
  bmp: BITMAP;
  oldBitmap: HGDIOBJ;
begin
  case Msg of
    WM_CREATE:
    begin
      hbmp := LoadImage(HInstance, 'C:\test_img.bmp', IMAGE_BITMAP, 0, 0,    LR_LOADFROMFILE); // Never called H2077 Value assigned to 'hbmp' never used
      ShowMessage('Im Here'); // Called
      Result := 0;
      Exit;
    end;
    WM_PAINT:
    begin
      hbmp := LoadImage(HInstance, 'C:\test_img.bmp', IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); // Called
      DC := BeginPaint(hWin, ps);
      hdcMem := CreateCompatibleDC(DC);
      oldBitmap := SelectObject(hdcMem, hbmp);
      GetObject(hbmp, SizeOf(bmp), @bmp);
      BitBlt(DC, 0, 0, bmp.bmWidth, bmp.bmHeight, hdcMem, 0, 0, SRCCOPY);
      SelectObject(hdcMem, oldBitmap);
      DeleteDC(hdcMem);
      DeleteObject(hbmp);
      EndPaint(hWin, ps);
      Result := 0;
      Exit;
    end;
    WM_DESTROY:
    begin
      PostQuitMessage(0);
      Result := 0;
      Exit;
    end;
  end;
  Result := DefWindowProc(hWin, Msg, WParam, LParam);
end; 
```

我是否认为 WM_CREATE 相当于 Form1.OnCreate 而 WM_DESTROY 是 Form1.OnDestroy 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:46:16.170

看看单位里的`TBitmap`班级`Graphics`。它有`LoadFromResourceName()`和`LoadFromResourceID()`方法。

# android - 使用 android 模拟器创建到远程 HTTP 服务器的套接字

> ID：16137829
> 
> 赞同：0
> 
> 时间：2013-04-22T00:44:16.080
> 
> 标签：android, sockets, emulation

我对android编程很陌生。我有一个程序，它使用套接字连接到远程主机、欺骗 http 请求并解析结果。由于某种原因，我的套接字无法连接到主机。我已经在独立环境中测试了该程序，它可以连接并正常工作。我继续并隔离了我需要的函数，并将其包含在我的活动类中以这种方式调用它。我也尝试过静态调用它，以及执行一个异步对象并从那里调用它。我的 android 模拟器上的互联网可以通过浏览器运行，我添加了

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

到我的 android 清单。下面的代码显示了我现在的位置。我需要做什么？

```
public class FlightNumResults extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    Intent intent = getIntent();
    String value = intent.getStringExtra("input"); //if it's a string you stored.
    //super.onCreate(savedInstanceState);
    System.out.println("HULLO");
    System.out.println(value);
    setContentView(R.layout.loading);

    Log.i("Excecution", "Complete");
    Hashtable<String, String> table = flightNumInfo(value);
    if (table == null)
        System.out.println("NULL");

    TableLayout results = (TableLayout) findViewById(R.id.resultTable);

    TableRow rowLabels = new TableRow(this);
    TableRow rowResults = new TableRow(this);
    rowLabels.setGravity(Gravity.CENTER);

    TableRow.LayoutParams params = new TableRow.LayoutParams();
    params.span = 4;

    //Column 1
    TextView destLabel = new TextView(this);  
    destLabel.setText("Destination");  
    destLabel.setTypeface(Typeface.SERIF, Typeface.BOLD);  
    TextView destResult = new TextView(this);  
    destResult.setText(table.get("destination"));  
    destResult.setGravity(Gravity.CENTER_HORIZONTAL);  

    rowLabels.addView(destLabel);  
    rowResults.addView(destResult);
    //Column 2
    TextView gateLabel = new TextView(this);  
    destLabel.setText("Gate");  
    destLabel.setTypeface(Typeface.SERIF, Typeface.BOLD);  
    TextView gateResult = new TextView(this);  
    destResult.setText(table.get("gate"));  
    destResult.setGravity(Gravity.CENTER_HORIZONTAL);  

    rowLabels.addView(gateLabel);  
    rowResults.addView(gateResult);
  //Column 3
    TextView scheduledLabel = new TextView(this);  
    destLabel.setText("Scheduled");  
    destLabel.setTypeface(Typeface.SERIF, Typeface.BOLD);  
    TextView scheduledResult = new TextView(this);  
    destResult.setText(table.get("scheduled"));  
    destResult.setGravity(Gravity.CENTER_HORIZONTAL);  

    rowLabels.addView(scheduledLabel);  
    rowResults.addView(scheduledResult);
  //Column 4
    TextView estimatedLabel = new TextView(this);  
    destLabel.setText("estimated");  
    destLabel.setTypeface(Typeface.SERIF, Typeface.BOLD);  
    TextView estimatedResult = new TextView(this);  
    destResult.setText(table.get("scheduled"));  
    destResult.setGravity(Gravity.CENTER_HORIZONTAL);  

    rowLabels.addView(estimatedLabel);  
    rowResults.addView(estimatedResult);

    results.addView(rowLabels);
    results.addView(rowResults);

    setContentView(R.layout.activity_flightnum_results);

}
public Hashtable<String, String> flightNumInfo(String flightNum) {

    Hashtable<String, String> table = new Hashtable<String, String>();
    System.out.println("Initializing socket");
    try {
        String request = "GET /flifo/servlet/DeltaFlifo?airline_code=DL&flight_number="
                + flightNum
                + "&flight_date="
                + DateCalc.getSlashDateAndTime()
                + "&request=main&DptText=ATL HTTP/1.1";

        Socket conn = new Socket(InetAddress.getByName("www.delta.com"), 80);
        System.out.println("initialized");
        PrintWriter wr = new PrintWriter(conn.getOutputStream());

        wr.println(request);
        wr.println("Host: www.delta.com");
        wr.println("Referer: http://www.delta.com/flifo/servlet/DeltaFlifo?airline_code=DL&request=main");
        wr.println("Connection: close\n");
        wr.flush();

        Scanner in = new Scanner(conn.getInputStream());
        String myResp = new String();
        String ans = new String();

        do {
            ans = in.nextLine();
            myResp += ans;
        } while (ans.indexOf("<span class=\"detailsLabel\"><br />") < 0);

        wr.close();
        in.close();
        // System.out.println(myResp);
        Pattern p = Pattern
                .compile("<td class=\"tableCell\" align=\"left\">&nbsp;\\s+Atlanta\\s+"
                        + "<a href=\"/content/www/en_US/traveling-with-us/airports-and-aircraft/airports/atlanta.html\">"
                        + "<!-- mp_trans_disable_start -->\\(ATL\\)<!-- mp_trans_disable_end --></a>\\s+<br />&nbsp;(.*?)"
                        + "<br />&nbsp; Gate <!-- mp_trans_disable_start -->([A-Z0-9]{2,3})<!-- mp_trans_disable_end -->\\s+"
                        + "</td>\\s+<td class=\"tableCell\">\\s+&nbsp;([A-Za-z0-9:]{6,9})<br />\\s+&nbsp;(.*?)</td>\\s+"
                        + "<td class=\"tableCell\">\\s+&nbsp;([a-z0-9*?:]{6,9}|[a-zA-Z\\s]{6,9})<br />\\s+&nbsp;(.*?)</td>\\s+" 
                        + "<td class=\"tableCell\">&nbsp;(.*?)\\(([A-Z]{3})\\)");

        Matcher m = p.matcher(myResp);
        if (m.find()) {
            table.put("number", flightNum);
            table.put("gate", m.group(2));
            table.put("scheduled", m.group(3));
            table.put("estimated", m.group(5));
            table.put("destination", m.group(8));

            return table;
        }
    } catch (Exception e) {
        return null;
    }
    return null;
}

} 
```

这是我的代码使用 AsyncTask 的样子。

```
public class FlightNumResults extends Activity {

public String flightNum;
public Hashtable<String, String> table;

@Override
protected void onCreate(Bundle savedInstanceState) {
    Intent intent = getIntent();
    flightNum = intent.getStringExtra("input"); // if it's a string you
                                                // stored.
    super.onCreate(savedInstanceState);
    System.out.println("HULLO");
    // System.out.println(value);

    setContentView(R.layout.loading);

    Log.i("Excecution", "Complete");
    FlightInfo fi = new FlightInfo();
    fi.execute();
    fi.flightNumInfo(flightNum);
    // Hashtable<String, String> table = fi.flightNumInfo(value);

    // System.out.println(table.get("destination"));

    // setContentView(R.layout.activity_flightnum_results);

}

public class FlightInfo extends AsyncTask<Void, Void, Void> {
    public Socket conn;
    public PrintWriter wr;
    public DataInputStream dis;
    public DataOutputStream dos;
    @Override
    protected Void doInBackground(Void... params) {
        try {
             conn = new Socket(InetAddress.getByName("www.delta.com"), 80);
        }catch (Exception e){
            Log.i("AsyncTank", "Can't create socket");
        }
        if (conn.isConnected()){
            try {
                dis = (DataInputStream)conn.getInputStream();
                dos = (DataOutputStream)conn.getOutputStream();
                Log.i("AsyncTank", "doInBackgoung: Socket created, Streams assigned");

            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.i("AsyncTank", "doInBackgoung: Cannot assign Streams, Socket not connected");
                e.printStackTrace();
            }
        } else {
            Log.i("AsyncTank", "doInBackgoung: Cannot assign Streams, Socket is closed");
        }
        return null;

        }
    protected void onPostExecute(Boolean result) {
        if (result) {
            Log.i("AsyncTask", "onPostExecute: Completed with an Error.");

        } else {
            Log.i("AsyncTask", "onPostExecute: Completed.");

        }
        setContentView(R.layout.activity_flightnum_results);

    }

        public  void flightNumInfo(String flightNum) {

              table = new Hashtable<String, String>();

                String request = "GET /flifo/servlet/DeltaFlifo?airline_code=DL&flight_number="
                        + flightNum
                        + "&flight_date="
                        + DateCalc.getSlashDateAndTime()
                        + "&request=main&DptText=ATL HTTP/1.1";

                //Socket conn = new Socket(InetAddress.getByName("www.delta.com"), 80);

                wr = new PrintWriter(dos);

                wr.println(request);
                wr.println("Host: www.delta.com");
                wr.println("Referer: http://www.delta.com/flifo/servlet/DeltaFlifo?airline_code=DL&request=main");
                wr.println("Connection: close\n");
                wr.flush();

                Scanner in = new Scanner(dis);
                String myResp = new String();
                String ans = new String();

                do {
                    ans = in.nextLine();
                    myResp += ans;
                } while (ans.indexOf("<span class=\"detailsLabel\"><br />") < 0);

                wr.close();
                in.close();

                // System.out.println(myResp);
                Pattern p = Pattern
                        .compile("<td class=\"tableCell\" align=\"left\">&nbsp;\\s+Atlanta\\s+"
                                + "<a href=\"/content/www/en_US/traveling-with-us/airports-and-aircraft/airports/atlanta.html\">"
                                + "<!-- mp_trans_disable_start -->\\(ATL\\)<!-- mp_trans_disable_end --></a>\\s+<br />&nbsp;(.*?)"
                                + "<br />&nbsp; Gate <!-- mp_trans_disable_start -->([A-Z0-9]{2,3})<!-- mp_trans_disable_end -->\\s+"
                                + "</td>\\s+<td class=\"tableCell\">\\s+&nbsp;([A-Za-z0-9:]{6,9})<br />\\s+&nbsp;(.*?)</td>\\s+"
                                + "<td class=\"tableCell\">\\s+&nbsp;([a-z0-9*?:]{6,9}|[a-zA-Z\\s]{6,9})<br />\\s+&nbsp;(.*?)</td>\\s+" 
                                + "<td class=\"tableCell\">&nbsp;(.*?)\\(([A-Z]{3})\\)");

                Matcher m = p.matcher(myResp);
                if (m.find()) {
                    table.put("number", flightNum);
                    table.put("gate", m.group(2));
                    table.put("scheduled", m.group(3));
                    table.put("estimated", m.group(5));
                    table.put("destination", m.group(8));

                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:50:29.483

这里发生的事情很常见，您正试图在应用程序的主线程上执行一些长时间运行的操作。

这意味着，主线程负责更新 UI，以强制执行流畅的体验，如果 android 检测到您正在执行一些将阻塞的长时间运行操作，它将强制关闭应用程序，让您知道这很糟糕。

有许多替代解决方案，例如 AsynTask 或 IntentService。

此外，要建立套接字连接，您应该执行以下操作：

```
conn = new Socket(InetAddress.getByName(new URL("http://www.delta.com").getHost()), 80);
dis = new DataInputStream(conn.getInputStream());
dos = new DataOutputStream(conn.getOutputStream()); 
```

# css - 设置父级 儿童宽度 使用 CSS

> ID：16137830
> 
> 赞同：0
> 
> 时间：2013-04-22T00:44:35.553
> 
> 标签：css, html

我有一个三列标记，中间列**#palette**（弹性列）具有以下 innerHTML 标记片段

```
<div id="palette">
<div id="wrapper" style="left: -354px; top: 0px;">
  <div id="colours">
    <ul>
      <li class="swatch"><a tite="Beige" style="background-color:beige;"  class="label" href="javascript:void(0);"><span>&nbsp;</span></a></li>
      <li class="swatch"><a tite="Bisque" ... class="label" href="javascript:void(0);"><span>&nbsp;</span></a></li>
      <li class="swatch"><a tite="Brown" style="background-color:brown;" class="label" href="javascript:void(0);"><span>&nbsp;</span></a></li>
      <li class="swatch"><a tite="Coral" style="background-color:coral;" onclick="setColouringColour(this);" class="label" href="javascript:void(0);"><span>&nbsp;</span></a></li>
      ....
    </ul>
  </div>
  <div id="brush-sizes"> <span style="width:16px; height:16px;" ><span>16</span></a></span> <span class="brush badge" style="width:32px; height:32px;"><a...><span>32</span></a></span> <span class="brush badge" style="width:64px; height:64px;"><a...><span>64</span></a></span> </div>
  <div id="brushes"> <a class="selected btn btn-mini"...>&nbsp;</a> <a class="btn btn-mini">&nbsp;</a> </div>
</div> 
```

适用以下 CSS 规则的地方

```
#palette {
float: left;
height: 100%;
position: relative;
width: 100%; overflow:hidden;
}
#wrapper {
 display: inline-block;
position: absolute;
top: 0 !important;
white-space: nowrap;
width: auto;
} 
```

> 注意：**#palette**是**overflow:hidden**以便**#wrapper**可以使用**left:*n*px;滚动。**. 这些孩子***#wrapper**里面 都是**display:inline-block; 明确：无；***

 *我遇到的问题是**#wrapper**不是它的孩子的“全宽”......因此我似乎无法滚动到最后。

这里问题的根源是什么，如何**仅使用 CSS**修复它（只能通过 CSS 完成吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:45:40.333

显然我需要将剩余的 2 个***< div >***之一设置为固定宽度，并尝试适当地设置最大和最小宽度。不知道为什么会这样*

# iphone - There and Back Again：通过 GameCenter 发送和接收 NSData

> ID：16137832
> 
> 赞同：1
> 
> 时间：2013-04-22T00:44:44.067
> 
> 标签：iphone, ios, objective-c, game-center

我正在使用 GameCenter 开发一款有趣的回合制 iPhone 小游戏。这是我第一次使用该平台，我可以使用一些帮助打包数据发送，然后解包它。

这些是我需要发送和接收的信息：

提示：一个 <256 个字符的 NSString。

播放：一个自定义对象，包含： 提示：与上述相同的提示。具有 1-3 个相似字符串的 NSMutableArray。（订单事项）玩家 ID：另一个 NSString

以前的播放：播放对象的 NSMutableArrays 的 NSMutableArray。（最大 10x8x5 = 400 个 NSStrings）

PlayedA：NSStrings 的 NSArray，<1000 PlayedB：相同，<500

我的问题是，我怎样才能将这些打包以便 GameCenter 接收它们？如果有一种方法我可以为所有这些数据创建一个容器类，将其序列化为一个 NSData 对象，然后能够在另一端解包它，那就太好了。

最糟糕的是，我可以用我自己的分隔符将它们连接成一个巨大的字符串，然后解析它，但这真的很烦人。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:43:35.710

我会将它全部打包到字典中，然后将其转换为 NSData。查看[如何将 NSDictionary 转换为 NSData，反之亦然？](https://stackoverflow.com/questions/5513075/how-can-i-convert-nsdictionary-to-nsdata-and-vice-versa)有关如何进行转换的更多信息

# c++ - 问题 Oppening files to write to intro C++

> ID：16137835
> 
> 赞同：0
> 
> 时间：2013-04-22T00:45:16.427
> 
> 标签：c++, writetofile

我现在正在开发一个程序并收到此错误：

```
writeOddEven.cpp:35: error: no match for call to ‘(std::ofstream) (const char*, const std::ios_base::openmode&)’ 
```

我以前从未见过，似乎无法在网上找到任何信息。在我的程序中，我试图读取用户指定的 2 个文件的名称，然后根据它们是偶数还是奇数将用户指定的整数输入到文件中。到目前为止，我的代码是这样的：

```
#include <iostream>
#include <fstream> 
#include <string>

using namespace std; 

int main()
{
  string odd_name;    //odd number file name
  string even_name;   //even number file name
  ofstream fout_odd;        //fout for odd file
  ofstream fout_even;       //fout for even file

  //Get file names
  cout<<"Enter name of file for odd integers: ";
  getline(cin, odd_name);
  cout<<"Enter name of file for even intgers: ";
  getline(cin, even_name); 

  //Open files;
  fout_odd(odd_name.c_str(), ios::out);             //*ERROR HERE*
  fout_even(even_name.c_str(), ios::out);           //*ERROR HERE*

...

fout_odd.close();
fout_even.close(); 
```

我唯一能想到的是我的“ios::out”格式存在某种错误，但我不知道如何改写。

**编辑**所以我完全忘记了这些行中的“open（）”部分：

```
 fout_odd(odd_name.c_str(), ios::out);
  fout_even(even_name.c_str(), ios::out); 
```

所以他们应该读： fout_odd.open(odd_name.c_str(), ios::out); fout_even.open(even_name.c_str(), ios::out);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:49:56.907

尝试以下操作：

```
 //^^^^remove these two lines
 ofstream fout_odd;        //fout for odd file
 ofstream fout_even;       //fout for even file

  //Get file names
  cout<<"Enter name of file for odd integers: ";
  getline(cin, odd_name);
  cout<<"Enter name of file for even intgers: ";
  getline(cin, even_name); 

 //Open files;
 //^^you should supply parameters when constructing 
 //the fout_odd and fout_even object
 ofstream  fout_odd(odd_name.c_str(), ios::out); 
 ofstream fout_even(even_name.c_str(), ios::out); 
```

[您可以从C++ 文件 I/O 文档](http://www.cplusplus.com/doc/tutorial/files/)中找到更多信息

**编辑**：您也可以尝试以下方法：

```
 ofstream fout_odd;        //fout for odd file
 ofstream fout_even;       //fout for even file

  //Get file names
  cout<<"Enter name of file for odd integers: ";
  getline(cin, odd_name);
  cout<<"Enter name of file for even intgers: ";
  getline(cin, even_name); 

 //Open files; provide option when open the files to write
 fout_odd.open(odd_name.c_str(), ios::out); 
 fout_even.open(even_name.c_str(), ios::out); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T00:52:09.983

打开文件有两种方式

要么用构造函数打开它

```
ofstream fout_odd( odd_name.c_str() ); 
```

或在 open 之后调用它

```
fout_odd.open( odd_name.c_str() ); 
```

无需通过`ios::out`，因为它是 ofstream 的默认设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T00:54:00.170

更改这些行

```
//Open files;
fout_odd(odd_name.c_str(), ios::out);             //*ERROR HERE*
fout_even(even_name.c_str(), ios::out);           //*ERROR HERE* 
```

和

```
//Open files;
fout_odd = ofstream(odd_name.c_str(), ios::out);             
fout_even = ofstream(even_name.c_str(), ios::out); 
```

# python - Python中的列表迭代

> ID：16137837
> 
> 赞同：2
> 
> 时间：2013-04-22T00:45:30.977
> 
> 标签：python, list, for-loop

所以我得到这个错误：

```
TypeError: list indices must be integers, not str 
```

指向这行代码：

```
if snarePattern[i] == '*': 
```

每当我使用我认为简单的 Python 时

```
snarePattern = ['-', '*', '-', '*']
for i in snarePattern:
    if snarePattern[i] == '*':
        ... 
```

这是不允许的吗？我不知道什么？

而且，如果有人知道我要使用这段代码去哪里，你能想出一种更简单的方法来创建和解析这样的简单模式吗？？？我是 Python 新手。

多谢你们

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T00:47:02.607

`for i in snarePattern:`遍历每个**项目**而不是每个索引：

```
>>> snarePattern = ['-', '*', '-', '*']
>>> for c in snarePattern:
        print c

-
*
-
* 
```

您可以将其更改为

```
for i in range(len(snarePattern)): 
```

如果你真的需要它，但看起来你不需要，只需检查一下`c == '*'`。

通过索引的*更好*方法是

```
for i, c in enumerate(snarePattern):  # i is each index, c is each character 
```

# android - Android中的线交点渲染

> ID：16137838
> 
> 赞同：4
> 
> 时间：2013-04-22T00:45:33.483
> 
> 标签：android, graphics

在我的 Android 应用程序中，我将从服务器检索数据，其中一些坐标将被返回。然后我使用这些坐标创建线条并在视图中绘制它们。

我想要一条以不同方式呈现的线条。例如：线条渲染

![在此处输入图像描述](https://i.stack.imgur.com/iC0us.png)

顶部的线是原始线，我希望它呈现为下面的形状。

并且有一些线彼此相交。那么交叉点可能会呈现如下：

![在此处输入图像描述](https://i.stack.imgur.com/ZIj1q.png)

左边的交集渲染方式是我想要的。

所以我想知道Android图形api是否支持这些操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:22:23.433

如果您使用 Android Canvas 绘制路径两次，使用不同的笔触大小和颜色。这是一个示例，它创建一个具有类似于您想要的图像的位图：

```
 // Creates a 256*256 px bitmap
    Bitmap bitmap = Bitmap.createBitmap(256, 256, Config.ARGB_8888);

    // creates a Canvas which draws on the Bitmap
    Canvas c = new Canvas(bitmap);

    // Creates a path (draw an X)
    Path path = new Path();
    path.moveTo(64, 64);
    path.lineTo(192, 192);
    path.moveTo(64, 192);
    path.lineTo(192, 64);

    // the Paint to draw the path
    Paint paint = new Paint();
    paint.setStyle(Style.STROKE);

    // First pass : draws the "outer" border in red
    paint.setColor(Color.argb(255, 255, 0, 0));
    paint.setStrokeWidth(40);
    c.drawPath(path, paint);

    // Second pass : draws the inner border in pink
    paint.setColor(Color.argb(255, 255, 192, 192));
    paint.setStrokeWidth(30);
    c.drawPath(path, paint);

    // Use the bitmap in the layout
    ((ImageView) findViewById(R.id.image1)).setImageBitmap(bitmap); 
```

# core-data - Core Data Fetch 在插入实体时保存关系（同时）

> ID：16137843
> 
> 赞同：0
> 
> 时间：2013-04-22T00:46:01.403
> 
> 标签：core-data, insert, many-to-many, entity, relationships

这里的第一个问题，我尝试了很多东西，但无法弄清楚。
具有 2 个实体的核心数据，双向关系

`A<<---->>B`
`A`实体具有名称作为属性和关系`Bs`

第一个控制器列出了所有`A`实体，我有第二个控制器来添加`A`实体，我想让它`B`在其关系中保存一个默认值。

在为 segue 做准备时，我有以下代码：

```
if ([[segue identifier] isEqualToString:@"addAEntitySegue"]) {

    AddAEntityViewController *addAEntityViewController = [segue destinationViewController];
    addAEntityViewController.delegate = self;
    addAEntityViewController.managedObjectContext = self.managedObjectContext;

    NSManagedObjectContext *addingContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    self.addingManagedObjectContext = addingContext;

    [addingManagedObjectContext setPersistentStoreCoordinator:[[fetchedResultsController managedObjectContext] persistentStoreCoordinator]];

   addAEntityViewController.A = [NSEntityDescription insertNewObjectForEntityForName:@"A" inManagedObjectContext:addingContext];

    UIBarButtonItem *saveButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemSave
                                                                           target:addAEntityViewController
                                                                               action:@selector(save:)];
    addAEntityViewController.navigationItem.rightBarButtonItem = saveButton;

} 
```

在 addAEntityViewController 我有这个要保存

```
-(IBAction)save:(id)sender
{
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"B"                                                    inManagedObjectContext:self.managedObjectContext];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@",[defaults objectForKey:@"BDefault"]];

    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:predicate];

     //Set the batch size to a suitable number
    [fetchRequest setFetchBatchSize:20];
    NSError *error;

    self.A.name = textFieldVal;

    [self.A addBObject:[[self.managedObjectContext executeFetchRequest:fetchRequest error:&error] objectAtIndex:0]];

    NSLog(@"A = %@", self.A.Bs);

    [self.delegate addAEntityViewController:self didFinishWithSave:YES];
} 
```

在`addAEntityViewController`一切都正确保存的情况下，即使`NSLog(@"A = %@", self.A.Bs);`语句显示`B`. 但是当委托保存在第一个控制器（`AEntityViewController`）中时，它只保存了关系，`A.name`但不保存关系`A.Bs`，我不知道出了什么问题。

这是委托方法：

```
-(void) addAEntityViewController:self didFinishWithSave:YES{
if (save) {
    NSLog(@"saveworkouts");

    NSError *error;
    if (![addingManagedObjectContext save:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }
}

// release the adding managed object context
self.addingManagedObjectContext = nil;
} 
```

就像我说的那样，它保存`A`实体而不是关系，`B`即使关系`B`正确保存在`addAEntityViewController`（第二个视图）中。`NSLOg`of`A.Bs`为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:20:12.710

首先，我认为这条线：
`addAEntityViewController = self.managedObjectContext;`
应该是：
`addAEntityViewController.managedObjectContext = self.managedObjectContext;`

但这也是错误的。
它应该得到`addingContext`你之后创建的：
`addAEntityViewController.managedObjectContext = addingContext;`

我有点惊讶您的应用程序没有崩溃，因为您正在混合来自 2 个不同上下文的托管对象。

# python - 安装 PySide - Windows 8

> ID：16137847
> 
> 赞同：0
> 
> 时间：2013-04-22T00:47:13.290
> 
> 标签：python, windows, qt, windows-8, pyside

遵循这些说明：

[http://qt-project.org/wiki/Setting_up_PySide](http://qt-project.org/wiki/Setting_up_PySide)

成功安装了这些程序：

*   PySide-1.1.2.win-amd64-py2.7.exe -
*   qt-win-opensource-4.8.4-vs2010.exe - 适用于 Windows 的 Qt 库 4.8.4 (VS 2010, 234 MB)

尝试了以下并得到了一个错误：

```
PS C:\Windows\system32> python
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import PySide
>>> print(PySide.QtCore.__version__)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'QtCore' 
```

我正在运行 Windows 8（64 位）。我以管理员身份从 powershell 运行上述命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T20:25:23.037

PySide 现在可以在 pip 上使用，您可以使用 pip 命令简单地安装它

```
pip install PySide 
```

2.7.9 及更高版本的 Python 安装程序（在 python2 系列上）和 Python 3.4 及更高版本默认包含 pip（Python 3 的 pip3）。但请记住在命令行窗口 (Windows+R) 中运行它之前将其添加到“PATH”环境变量中。[Python 安装](http://docs.python-guide.org/en/latest/starting/install/win/)

```
C:\Python27\;C:\Python27\Scripts\ 
```

# c++ - 使用带有重复的整数的二进制文件进行快速排序。递归遇到问题

> ID：16137850
> 
> 赞同：1
> 
> 时间：2013-04-22T00:47:18.360
> 
> 标签：c++, recursion, binaryfiles, quicksort

**首先，我想说这是家庭作业。**

很多时候，我们会有一些作业，我会在完成后发布问题，我想继续使用它来提高我的能力，但在这种情况下，我只是难住了！

我们的任务是使用二进制文件实现快速排序，仅使用 file.seek 、 file.read 和 file.write 命令。这是整数的二进制文件。

我遇到的问题是递归部分，在枢轴的“子树”上调用函数。我一直在关注这个网站上提出的算法：http: [//xoax.net/comp_sci/crs/algorithms/lessons/Lesson4/](http://xoax.net/comp_sci/crs/algorithms/lessons/Lesson4/)并一直使用代码示例作为我的二进制文件实现的伪代码。

这是我的代码：

```
//Algorithm and code example used:
void manage( fstream & file , int lindex , int fSize ){

    //Chunks of 1 or 0 do not need sorting
    if( fSize <= 1 )
        return;

    //Choose point in file as "pivot." Pivot is a value.
    //pp is the index of "pivot"
    int pp = (rand() % fSize) + lindex;
    file.seekp( pp * sizeof( int ) , file.beg );
    int pivot;
    file.read( (char*)&pivot , sizeof( int ) );

    //Choose "indices" to be swapped. These will be used in seekp
    int leftIndex = lindex;
    int rightIndex = fSize - 1;

    //Swap val , swap val, temp storage, swap index 1 , swap index 2
    int leftSwap , rightSwap , temp , tempI1 , tempI2 = 0;

    //Dummy indecies to help with tracking partitions.
    int dumL = leftIndex;
    int dumR = rightIndex;

    while( dumL < dumR ){

        //Move to left index from the file beginning.
        file.seekp( dumL * sizeof( int ) , file.beg );

        do{

            tempI1 = file.tellp() / sizeof( int );
            dumL = tempI1;
            file.read( (char*)&temp , sizeof( int ) );
        }

        while( temp < pivot );

        leftSwap = temp;

        //Move to right index.
        file.seekp( dumR * sizeof( int ) , file.beg );
        int n = 1;

        do{

            tempI2 = file.tellp() / sizeof( int );
            dumR = tempI2;
            file.read( (char*)&temp , sizeof( int ) );
            file.seekp( ( rightIndex - n ) * sizeof( int ) , file.beg );
            n++;
        }           

        while( temp > pivot );

        rightSwap = temp;

        //Swap values
        int hold = 0;

        if( leftSwap == rightSwap && rightSwap == pivot )
            break;

        file.seekp( tempI1 * sizeof( int ) , file.beg );
        file.read( (char*)&hold , sizeof( int ) );

        file.seekp( tempI1 * sizeof( int ) , file.beg );
        file.write( (char*)&rightSwap , sizeof( int ) );

        file.seekp( tempI2 * sizeof( int ) , file.beg );
        file.write( (char*)&leftSwap , sizeof( int ) );
    }

    cout << "pp: " << pp << endl;
    cout << "dumL: " << dumL << endl;
    cout << "dumR: " << dumR << endl << endl;

    //cout << "Lmanage: \n\t Lindex: 0\n\tSize: " << dumL << endl;
    manage( file , 0 , dumL );
    //cout << "Rmanage: \n\t Lindex: " << dumL + 1 << "\n\tSize: " << fSize - dumL - 1 << endl;
    manage( file , dumL + 1 , fSize - (dumL - leftIndex) - 1 );
}

void quicksort( fstream & file , int iSize ){

    srand( ( unsigned int ) time( 0 ) );
    manage( file , 0 , iSize );
}

int main( int argc, char* argv[] ){

    if( argc != 2 ){

        cout << "Invalid number of arguments.\n";
        return -1;
    }

    fstream file;
    int x = 0;

    file.open( argv[1] , ios::binary | ios::out | ios::in );

    //Calculate number of ints in file.
    file.seekg( 0 , file.end );
    int size = file.tellg() / sizeof( int );

    cout << "size: " << size << endl;

    quicksort( file , size );

    return 0;
} 
```

“arg”是一个包含 100 个整数的二进制文件，可能有重复。问题是它似乎对前 1/4 进行了排序，但索引混淆了，“大小”参数变为负数。

* * *

**编辑：添加了我的主要内容并根据评论的更改进行了更新。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:06:30.870

我意识到就地 qsort 算法可能不是一个流行的选择，但它使这个特定实例更容易理解。请参阅以下内容：

```
#include <iostream>
#include <fstream>
#include <vector>
#include <cstdlib>
#include <random>
using namespace std;

static void quicksort_stream(std::iostream& st,
                             std::ios::off_type left,  // inclusive
                             std::ios::off_type right, // exclusive
                             unsigned int indent=0)
{
    std::ios::off_type len = (right - left);
    if (len <= 1)
        return;

    // an interesting way of looking at the sort.
    std::string sIndent(indent,' ');
    cerr << sIndent << left << ',' << right << endl;

    // choose a random pivot index form our range:
    std::ios::off_type pivot_idx = left + std::rand() % (len-1);

    // get the pivot value, then swap the *last* value in our
    //  range into the pivot slot. it will be putting the pivot
    //  value in when were done.
    int pivot = 0, val = 0;
    st.seekg(pivot_idx * sizeof(int), ios::beg);
    st.read((char*)&pivot, sizeof(int));
    st.seekg((right-1) * sizeof(int), ios::beg);
    st.read((char*)&val, sizeof(int));
    st.seekg(pivot_idx * sizeof(int), ios::beg);
    st.write((char*)&val, sizeof(int));

    // now start the partition scan.
    pivot_idx = left;
    for (std::ios::off_type i=left; i<(right-1);++i)
    {
        st.seekg(i * sizeof(int), ios::beg);
        st.read((char*)&val, sizeof(int));
        if (val < pivot)
        {
            // swap the current selection with whatever is at
            //  the curent pivot index.
            int val2 = 0;
            st.seekg(pivot_idx * sizeof(int), ios::beg);
            st.read((char*)&val2, sizeof(int));
            st.seekg(i * sizeof(int), ios::beg);
            st.write((char*)&val2, sizeof(int));
            st.seekg(pivot_idx * sizeof(int), ios::beg);
            st.write((char*)&val, sizeof(int));
            ++pivot_idx;
        }
    }

    // store the pivot value back at the pivot index,
    //  placing that value in the last slot of the partition.
    st.seekg(pivot_idx * sizeof(int), ios::beg);
    st.read((char*)&val, sizeof(int));
    st.seekg((right-1) * sizeof(int), ios::beg);
    st.write((char*)&val, sizeof(int));
    st.seekg(pivot_idx * sizeof(int), ios::beg);
    st.write((char*)&pivot, sizeof(int));

    // and finally,invoke on subsequences. skipping the pivot index
    quicksort_stream(st, left, pivot_idx, indent+1);
    quicksort_stream(st, pivot_idx+1, right, indent+1);
}

int main(int argc, char *argv[])
{
    if (argc < 2)
        return EXIT_FAILURE;

    // create a vector of 100 random int values in [1,1000]
    std::vector<int> vals;

    // build generator
    std::random_device rd;
    std::mt19937 rgen(rd());
    std::uniform_int_distribution<> dist(0, 999);
    std::generate_n(std::back_inserter(vals), 100, [&dist,&rgen](){ return dist(rgen); });

    // open the output file and dump this to that location.
    std::fstream fs(argv[1], ios::out|ios::binary);
    fs.write((const char*)vals.data(), vals.size() * sizeof(vals[0]));
    fs.flush();
    fs.close();

    // now open the stream and sort it
    fs.open(argv[1], ios::in|ios::out|ios::binary);
    quicksort_stream(fs, 0, 100);
    fs.flush();
    fs.close();

    // clear the content of the exiting vector.
    std::fill(vals.begin(), vals.end(), 0);
    fs.open(argv[1], ios::in|ios::binary);
    fs.read((char *)vals.data(), vals.size() * sizeof(vals[0]));
    cout << endl << "Sorted" << endl;
    std::copy(vals.begin(), vals.end(), std::ostream_iterator<int>(cout, "\n"));

    return 0;
} 
```

我在其中包含了一个递归缩进的“打印”机制来演示快速排序的本质及其工作原理。示例运行的输出如下所示。我希望它可以帮助你。

**样本输出**

```
0,100
 0,66
  2,66
   2,23
    2,20
     2,5
     6,20
      6,15
       6,11
        7,11
         9,11
       12,15
        12,14
      16,20
       17,20
        17,19
    21,23
   24,66
    24,62
     24,44
      24,29
       24,26
       27,29
      30,44
       30,42
        30,32
        33,42
         33,39
          33,37
           33,35
         40,42
     45,62
      45,60
       46,60
        46,52
         46,48
         49,52
          50,52
        53,60
         53,59
          53,57
           55,57
    63,66
 67,100
  67,72
   67,69
   70,72
  73,100
   73,94
    73,85
     73,80
      73,75
      76,80
       76,78
     81,85
      81,84
       82,84
    86,94
     86,89
     90,94
      90,92
   95,100
    95,99
     97,99

Sorted
3
8
23
27
40
54
68
78
90
97
118
120
127
130
139
149
153
155
158
168
201
210
221
235
240
241
247
260
271
274
285
292
311
317
325
327
330
332
334
362
371
410
415
427
444
478
481
487
492
499
499
513
540
542
543
543
556
567
575
578
621
624
634
634
635
661
676
676
690
693
694
706
739
777
780
793
793
798
822
834
835
836
836
850
865
871
883
884
900
903
907
917
924
924
935
943
945
946
983
996 
```

# android - 在 Laravel 上执行请求的 URL

> ID：16137851
> 
> 赞同：0
> 
> 时间：2013-04-22T00:47:19.257
> 
> 标签：android, rest, laravel

这可能是一个愚蠢的问题，但我还没有找到任何方法来解决它。我的项目伙伴使用**Laravel**编写了我们项目的服务器端。我的工作是开发Android App。我知道如何在 Android 和 PHP 之间发送和接收 JSON。但是，我对 Laravel 了解不多。所以我不知道应该使用哪个 URL 来发送/接收 JSON。

我应该将我的 JSON 发送到哪个 URL 以使用 my_application_name/application/controllers/menucategory.php 文件下的以下 post_list() 方法？

```
<?php

class MenuCategory_Controller extends Base_Controller {

    public $restful = true;

    public function post_list() {
        $categories = MenuCategory::all();
        $cat = null;
        foreach ($categories as $category) {
            $cat[] = array(
                'id' => $category->id,
                'name' => $category->name
            );
        }
        return Response::json(array('categories' => $cat));
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:55:14.927

由于控制器是restful，你只需要指向控制器的名称，以及方法的名称（不带动作）

例如，在这种情况下，您`post`可以，`menucategory/list`因为它是 MenuCategory 控制器，您`post`可以`list`

有关这方面的更多信息，请参见此处的 laravel 文档：http: [//laravel.com/docs/controllers#restful-controllers](http://laravel.com/docs/controllers#restful-controllers)

# css - 容器泄漏到侧边栏

> ID：16137852
> 
> 赞同：-3
> 
> 时间：2013-04-22T00:47:38.963
> 
> 标签：css, css-float, containers, dreamweaver, sidebar

帮助！我是新手，我需要一些快速的认真帮助！我有一个从dreamweaver 的模板（2 列液体）中使用的两列布局，我的大部分网站都准备好了，但是当我在浏览器中打开它时，它看起来完全不同。里面的文字和图片`.container`都漏到了`.sidebar1`。我将侧边栏设置为`float: left`，将容器设置为`float: right`，但我没有尝试过任何工作。请帮忙！今晚我需要解决这个问题！谢谢，麻烦您了！

```
.sidebar1 {
    float: left;
    width: 180px;
    background-color: #C7776C;
    margin-bottom: -10000px;
    padding-bottom: 10000px;
    height: 100%;
    overflow: hidden;
}

.header {
    min-height: 160px;
    background-color: #E7C082;
}

.container {
    float: right;
    width: 993px;
    background-color: #FEF3C8; /* the auto value on the sides, coupled with the width, centers the layout */
    height: 100%;
    margin-top: 0;
    margin-bottom: auto;
    padding-bottom: 0;
    overflow: hidden;
    margin-left: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:33:28.730

尝试将您的 CSS 代码更改为：

```
.sidebar1 {
    position: absolute;
    top: 180px;
    width: 180px;
    background-color: #C7776C;
    height: 100%;
    overflow: hidden
}

.header {
    min-height: 160px;
    background-color: #E7C082;
}

.container {
    position: absolute;
    top: 180px;
    left: 200px;
    width: 993px;
    background-color: #FEF3C8; /* the auto value on the sides, coupled with the width,       centers the layout */
    height: 100%;
    margin-top: 0;
    margin-bottom: auto;
    padding-bottom: 0;
    overflow: hidden;
    margin-left: 0;
} 
```

这是一个解决方案：http: [//jsfiddle.net/pEdf2/2/](http://jsfiddle.net/pEdf2/2/)

# php - 使用 htaccess 和 codeigniter 路由请求

> ID：16137855
> 
> 赞同：0
> 
> 时间：2013-04-22T00:48:49.027
> 
> 标签：php, apache, .htaccess, codeigniter

我有一个带有一个控制器的 codeigniter 应用程序（main.php）

目前，我将 htaccess 文件设置为删除 index.php 和 main.php

所以不是 www.domain.com/index.php/main/function_name，而是 www.domain.com/function_name

我的 htaccess 文件如下所示：

```
 <IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/main/$1 [L] 
```

```
ErrorDocument 404 /index.php 
```

我现在需要在网站上添加一大块。它目前内置在一个单独的 codeigniter 应用程序中，我需要将它移过来。该站点的新部分位于 controllers/manage_emails/contacts.php...

我的问题是，在大多数情况下，如何更改 htaccess 文件以从 URL 中删除 main.php，但是如果您输入 www.domain.com/manage_emails/contollername，它将转到正确的控制器。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T14:27:19.923

据我了解，您有两个不同的问题：

1.从Codeigniter的默认中删除index.php文件

2.将任何呼叫从“www.domain.com/main/method”重定向到“www.domain.com/method”

对于第一个问题，我总是使用 Elliot Haughin 的用于 CI 的 htaccess 文件：[CodeIgniter 和 mod_rewrite 与多个应用程序](https://stackoverflow.com/questions/11057519/codeigniter-and-mod-rewrite-with-multiple-applications)

对于第二个问题，您需要在 CI 中更改 config/routes.php，并添加以下行：

```
$route['(:any)'] = "main/$1"; 
```

..你也可以查看这篇文章：[Codeigniter, bypassing the main or default controller](https://stackoverflow.com/questions/16233670/codeigniter-bypassing-the-main-or-default-controller/16234599?noredirect=1#comment23227401_16234599)

尝试将这两个问题分开，就像已经说过的那样，坚持使用 CI 进行路由，只使用 htaccess 从 URL 中删除 index.php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T03:06:48.503

除了@despina 答案我想添加一些东西：

您必须`$route['(:any)'] = "main/$1";`在最后一个路由设置，因为 CI 会按照它们在 routes.php 文件中出现的顺序处理路由，因此如果您将 $route['(:any)'] 放在顶部，它将处理任何事情。

所以你的 route.php 文件将是这样的：

```
$route['controllers/manage_emails/something.php'] = 'controllers/manage_emails/something.php'
$route['(:any)'] = "main/$1"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T02:45:56.423

如果您从 .htaccess 文件中删除任何 URI 路由，并让您的 CodeIgniter 的路由为您执行此操作，您的应用程序将更容易管理。

您的 .htaccess 应该只有标准的“摆脱 index.php”代码（最后一部分，没有`/main`它）。然后，您的应用程序的路由可以定义其余 URL 的时间/位置。

仅供参考，如果您使用的是更新版本的 CI，例如 2.1.x，则不需要 .htaccess 中的系统和应用程序文件夹特定规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T08:21:12.590

```
//config/routes.php
    $route['404_override'] = 'main/route';
//controllers/main.php
class Main {
...........
   function route() {
      $methodName = $this->uri->segment(1);
      if(method_exists($methodName, $this)) {
       $this->{$methodName}();
      } else {
        show_404();
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T21:28:17.473

首先，您的 2 条规则不正确，很可能无法正常工作。这是您的 .htaccess 的固定版本，其中添加了一条要求的新规则：

```
RewriteEngine On
RewriteBase /

RewriteRule ^(?:application|system)(/.*|)$ /index.php?/$1 [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/manage_emails/contollername [NC]
RewriteRule ^(.*)$ index.php?/main/$1 [L] 
```

错误文档 404 /index.php

# c# - 使用叶元素上的属性将类序列化为 XML 时的冗余元素

> ID：16137859
> 
> 赞同：1
> 
> 时间：2013-04-22T00:49:07.510
> 
> 标签：c#, .net, xml, xml-serialization

我有以下要序列化为 XML 的类结构：

```
public class Foo
{
    [XmlArray("approxPriceList")]
    [XmlArrayItem("approxPrice")]
    public List<ApproxPriceElement> ApproxPriceList { get; set; }
}

public class ApproxPriceElement
{
    [XmlAttribute("currency")]
    public string Currency { get; set; }

    [XmlElement("approxPrice")]
    public decimal? ApproxPrice { get; set; }
} 
```

如果我序列化`Foo`，我会得到以下 XML：

```
<approxPriceList>
    <approxPrice currency="aud">
        <approxPrice>2220.00</approxPrice>
    </approxPrice>
</approxPriceList> 
```

我想要的是以下内容：

```
<approxPriceList>
    <approxPrice currency="aud">2220.00</approxPrice>
</approxPriceList> 
```

一个想法是变成`ApproxPriceList`一个`Foo`，`List<decimal?>`但后来我不知道如何将一个`currency`属性与`approxPrice`列表中的每个相关联。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T00:57:50.857

使用`XmlText`代替`XmlElement("approxPrice")`

```
[XmlText]
public decimal? ApproxPrice { get; set; } 
```

要允许`null`添加元素：

```
[XmlArrayItem("approxPrice", IsNullable = true)]
public List<ApproxPriceElement> ApproxPriceList { get; set; } 
```

* * *

以下是针对“*不能用于编码复杂类型*”异常（[来源](https://stackoverflow.com/questions/703137/how-to-make-a-value-type-nullable-with-net-xmlserializer/703257#703257)）的建议解决方法：

```
 [XmlText]
  public decimal ApproxPrice { get; set; }
  [XmlIgnore]
  public bool ApproxPriceSpecified { get { return ApproxPrice >= 0; } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T02:17:55.230

你可以使用`IXmlSerializable`：

```
public class Foo : IXmlSerializable
    {
        public Foo()
        {
            ApproxPriceList = new List<ApproxPriceElement>();
        }

        public List<ApproxPriceElement> ApproxPriceList { get; set; }

        public XmlSchema GetSchema()
        {
            return null;
        }

        public void ReadXml(XmlReader reader)
        {
            while (reader.Read())
            {
                if (reader.IsStartElement())
                {
                    switch (reader.LocalName)
                    {
                        case "approxPrice":
                            {
                                var approxPrice = new ApproxPriceElement();

                                approxPrice.Currency = reader.GetAttribute("currency");

                                var approxPriceValue = reader.ReadElementContentAsString();

                                if (!string.IsNullOrEmpty(approxPriceValue))
                                {
                                    approxPrice.ApproxPrice = decimal.Parse(approxPriceValue);
                                }

                                ApproxPriceList.Add(approxPrice);
                            }
                            break;
                    }
                }
            }
        }

        public void WriteXml(XmlWriter writer)
        {
            writer.WriteStartElement("approxPriceList");
            foreach (var approxPrice in ApproxPriceList)
            {
                writer.WriteStartElement("approxPrice");
                writer.WriteAttributeString("currency", approxPrice.Currency);
                writer.WriteString(approxPrice.ApproxPrice.ToString());
                writer.WriteEndElement();
            }
            writer.WriteEndElement();
        }
    }

    public class ApproxPriceElement
    {
        public string Currency { get; set; }

        public decimal? ApproxPrice { get; set; }
    } 
```

它不是那么方便，但它可以完成工作。

# actionscript-3 - Actionscript 3 删除 swf 音频不会停止

> ID：16137864
> 
> 赞同：0
> 
> 时间：2013-04-22T00:49:59.123
> 
> 标签：actionscript-3

我正在尝试为游戏过场动画添加 swf，但在 removeChild 并将对象设置为 null 后出现音频重复问题。我正在尝试添加文件并在动画（721）中的帧长度之后将其删除，然后将其删除以继续进行其他操作。

我也试过过场动画[0].stop(); 和 SoundMixer.stopAll(); 正如其他帖子所建议的那样。

removechild() 确实会删除文件/动画的视觉方面，但不会删除音频，并且它会在动画长度（721 帧）的时间量之后重复，就好像它正在重新加载一样。如何停止音频？

```
 package {
import flash.display.*;
    import flash.media.*;
    import flash.utils.*;
                import flash.events.*;
   [SWF(backgroundColor="#0000ff", frameRate="24", width="640", height="480")]
public class main extends MovieClip
{
    [Embed(source="/Cutscenes/Intro_Scene 1.swf")]
    private var scene1:Class
    public var cutscenes:Array = new Array();
    public var scene_exists:Boolean = false;
    public var scene_timer:Number = 0;
    public function main()
    {
        scene_exists = false;
        addEventListener(Event.ENTER_FRAME, play_intro);
    }

    public function play_intro(event:Event):void
    {
        scene_timer++;
        if (scene_exists == false) //Add cutscene
        {
            cutscenes[0] = new scene1();
            addChild(cutscenes[0]);
            scene_exists = true;
        }

        if (scene_timer == 721) //Remove cutscene
        {
            SoundMixer.stopAll();
            scene_exists = false;
            removeChild(cutscenes[0]);
            cutscenes[0] = null;
            scene_timer = 0;
            removeEventListener(Event.ENTER_FRAME, play_intro);
                            //Do next thing
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:02:34.803

不确定这是否是问题所在，但请尝试像这样停止过场动画：

```
 cutscenes[0].stop(); 
```

然后做之`SoundMixer.stopAll();`类的。

我的想法是 .swf 的时间线将继续播放，如果不停止，甚至会重复播放。

从显示列表中删除 DisplayObject 不会停止播放动画/音频，它只是将其从显示列表中删除。

# android - 在 android app Activity 之间动态更新数据

> ID：16137867
> 
> 赞同：1
> 
> 时间：2013-04-22T00:50:19.397
> 
> 标签：android, android-layout, android-intent, android-activity, broadcastreceiver

我最近有一个问题（[在 Android 中的活动之间共享数据](https://stackoverflow.com/questions/16093639/android-sharing-data-between-activities)）解决了我的部分问题，但我仍然遇到问题。我决定从头开始。

这个简单的应用程序执行以下操作：

1.  启动一个主要活动，该活动在其 onCreate() 方法期间立即调用“DataActivity”
2.  DataActivity 只增加一个数字，创建一个捆绑包，将数字填充到该捆绑包中，然后将其发送到意图内的 LocalBroadcastManager 中。
3.  MainActivity 选择该新号码备份并更新其 ListView。

现在，我的问题就在这里：

*   （固定）意图没有被广播！（它在我的上一个应用程序中工作，但在这里完全不工作）
*   我不确定如何确保 MainActivity 的列表位于显示屏顶部
*   我不确定如何“最小化” DataActivity

这是我的 MainActivity.java

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = new Intent(this, DataActivity.class);
        intent.putExtra("First", true);
        startActivity(intent);
    }

    @Override
    protected void onResume() {
        super.onResume();
        IntentFilter iff = new IntentFilter(MainActivity.class.getCanonicalName());
        Log.d(getClass().getSimpleName(), "Creating Intent for Position Debuging...");
        LocalBroadcastManager.getInstance(this).registerReceiver(AGDReceiver, iff);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        LocalBroadcastManager.getInstance(this).unregisterReceiver(AGDReceiver);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private volatile ArrayAdapter<Integer> aradInt;
    public BroadcastReceiver AGDReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final int broadcast = intent.getExtras().getInt("iInt");
            Bundle b = intent.getExtras().getBundle("bBundle");
            final int bI = b.getInt("bInt");
            Log.d(getClass().getSimpleName(), "onReceieve(): " + broadcast);
            initArrAd();
            runOnUiThread(new Runnable() {
                public void run() {
                    Log.d(getClass().getSimpleName(), "runOnUiThread(): " + broadcast);
                    aradInt.add(broadcast);
                    aradInt.setNotifyOnChange(true);
                    aradInt.notifyDataSetChanged();
                }
            });

        }

    };

    private void initArrAd() {
        if (aradInt == null) {
            aradInt = new ArrayAdapter<Integer>(this.getApplicationContext(),R.id.listView1);
        }
    }

} 
```

数据活动.java

```
public class DataActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_data);
    }

    private volatile int count = 0;

    @Override
    protected void onResume() {
        super.onResume();
        Log.d(getClass().getSimpleName(), "onResume(): " + count);
        count++;
        Intent intent = new Intent(MainActivity.class.getCanonicalName());
        Bundle b = new Bundle();
        b.putInt("bInt", count);
        intent.putExtra("iInt", count);
        intent.putExtra("bBundle", b);
        this.moveTaskToBack(true);
        for (int i = 1; i < 100; i++) {
            LocalBroadcastManager.getInstance(this).sendBroadcastSync(intent);
            intent.removeExtra("iInt");
            intent.removeExtra("bInt");
            intent.putExtra("bInt", count++);
            intent.putExtra("iInt", count);
        }
        Log.d(getClass().getSimpleName(), "onResume(): Done");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.data, menu);
        return true;
    }

} 
```

至于更新 ListView，我认为一旦我始终如一地获得我想要的数据并且 MainActivity 的视图是可见的，那应该是微不足道的。

以防万一，我的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.eks.mytestbed"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.eks.mytestbed.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.eks.mytestbed.DataActivity"
            android:label="@string/title_activity_data" >
        </activity>
    </application>

</manifest> 
```

更新：看起来问题的广播方面已关闭（我需要将取消注册调用放在 .onDestroy() 方法而不是 .onPause() ），但更新 MainActivity 上的列表视图不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T02:49:15.913

问题是你还没有注册你的`BroadcastReceiver`. 您必须注册一个接收器才能使用它，因此您必须在完成后取消注册它。

由于您使用过 LocalBroadcastReceiver 所以

注册

```
 LocalBroadcastManager.getInstance(this).registerReceiver(
            AGDReceiver ,
            new IntentFilter(INTENT_FILTER_NAME)); 
```

取消注册

```
 LocalBroadcastManager.getInstance(this).unregisterReceiver(
            AGDReceiver ); 
```

另一件事是你的 aradLong 没有初始化

# c++ - C++“列表迭代器错误”

> ID：16137868
> 
> 赞同：-1
> 
> 时间：2013-04-22T00:50:27.087
> 
> 标签：c++, visual-studio-2010, list

我对以下代码部分有疑问。我已经对此进行了一段时间的研究，并发现问题`*pos`已被添加。我只是不确定如何解决它。

```
#include <iostream>
#include <list>
#include <string>

using namespace std;

list<int>:: iterator pos;           //iterator for pos to allow movement through the list
list<int> numbers;                  // list of int's called "numbers"
int a;                              //  @param a: int to store value at the current position in the list for comparison
int b = 0;                          //  @param b: int to store larger value after comparison

/*function maximum cycles through the list of numbers and assigns the number at each position to variable a
variable a is then compared to variable b which holds the largest element, if variable a is larger than b then
variable a's value is given to b.
*/

int maximum()
{

        for (pos = numbers.begin(); pos != numbers.end(); pos++)
        {
            a = *pos;
                if (a > b)
                {
                    b = a;
                }
        } 

return b; 
}

int main()
{

    int UserNum;        //@param UserNum are the numbers the user will enter that will be added to the list

    //A do loop to fill the list with numbers entered by the user.
    cout << "Enter some numbers (0 to end)" << endl;
    do 
    {
        cin >> UserNum;
        numbers.push_back (UserNum);
    }
    while (UserNum);

    maximum();

    cout << ("Your largest element entered is ") << b << endl;

    system ("PAUSE"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T00:53:41.003

删除此行末尾的分号。

```
 for (pos = numbers.begin(); pos != numbers.end(); pos++) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T00:53:47.880

`for`您的语句末尾有一个分号

```
for (pos = numbers.begin(); pos != numbers.end(); pos++) ;
                                                        ^^^ 
```

删除它，您的代码应该可以工作。

* * *

**编辑：**

请注意，如果您的列表为空，则无法取消引用返回的迭代器值，这可能是您的运行时错误的原因。因此，如果您`0`在添加任何数字之前运行代码并立即输入，您将收到您所看到的错误。

# asp.net - 在 ASP .NET MVC 中使用自定义路由时的 WebConfigurationManager

> ID：16137873
> 
> 赞同：1
> 
> 时间：2013-04-22T00:51:05.977
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

当我使用自定义路由时，WebConfigurationManager.AppSettings 似乎没有为真实的虚拟目录返回正确的数据。

我的意思是，如果我去这里，MyApp/MyDir 与我的视图的物理目录结构匹配：

```
 http://localhost/MyApp/MyDir/Index 
```

WebConfigurationManager.AppSettings 从 MyApp/MyDir 中的 web.config 正确返回 appSettings。

我还有一个自定义路由，它指向相同的控制器操作：

```
 http://localhost/MyApp/Home 
```

在这种情况下，WebConfigurationManager 似乎无法识别我的 appSettings（并且只返回 Web 应用程序根 web.config 的 appSettings）。

知道如何解决这个问题吗？

谢谢你。

# tomcat - Tomcat 5.5 与 Java 7 兼容吗？

> ID：16137879
> 
> 赞同：3
> 
> 时间：2013-04-22T00:51:45.317
> 
> 标签：tomcat, java

我的服务器运行旧版 Debian 4、Tomcat 5.5 和 JDK 5。我计划（如果可能）在服务器上安装 JDK 7 并让 Tomcat 5.5 在 JDK 7 上运行，而不升级 Tomcat。

有什么我应该注意的兼容性问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T00:55:37.997

根据这个[页面](http://tomcat.apache.org/whichversion.html)，Tomcat 5.5 只依赖于 >= 1.4 的 JDK。所以你应该对 Java 7 没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:47:07.413

在 Java 7.0 上运行 Tomcat 5.5 应该没有问题（以使用带有最新安全补丁的 Java 版本的正常建议为模。）请参阅 Greg 的答案中的链接以了解 Tomcat 平台要求。

不过，运行 Tomcat 5.5 和/或古老的 Debnian 版本更令人担忧。如果您仍然获得这些平台的安全补丁，我会感到惊讶。我建议升级到 Tomcat 6 或 7 以及最近的操作系统版本。

# ios - 从 Facebook 中的 iOS 应用程序邀请 facebook 用户：未发送邀请

> ID：16137886
> 
> 赞同：8
> 
> 时间：2013-04-22T00:52:46.513
> 
> 标签：ios, xcode, facebook

我正在尝试邀请 Facebook 中的用户试用我的 iOS 应用程序（尚未在商店中，尚未完成）。

我使用 facebook API 对用户进行身份验证，然后尝试使用以下代码：

```
- (void)shareWithFriends:(id)sender
{
    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"Invite Friends"
                          message:@"If you enjoy using this app, would you mind taking a moment to invite a few friends that you think will also like it?"
                          delegate:self
                          cancelButtonTitle:@"No Thanks"
                          otherButtonTitles:@"Tell Friends!", nil];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView
didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        // User has clicked on the No Thanks button, do not ask again
        NSLog(@"Chitty user says he doesn't wanna share");
    } else if (buttonIndex == 1) {
        // User has clicked on the Tell Friends button
        [self performSelector:@selector(sendRequest) withObject:nil afterDelay:0.5];
    }
}

- (void)sendRequest {
    // Display the requests dialog

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:nil];
    [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                                                  message:[NSString stringWithFormat:@"Try this app, brah!"]
                                                    title:nil
                                               parameters:params
                                                  handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                                                      if (error) {
                                                          // Case A: Error launching the dialog or sending request.
                                                          NSLog(@"Error sending request.");
                                                      } else {
                                                          if (result == FBWebDialogResultDialogNotCompleted) {
                                                              // Case B: User clicked the "x" icon
                                                              NSLog(@"User canceled request.");
                                                          } else {
                                                              NSLog(@"Request Sent.");
                                                          }
                                                      }}];

} 
```

但是，当我选择要向其发送邀请的用户然后点击发送时。什么都没发生。我确实收到“请求已发送”。通过 NSLog 但我的朋友没有收到它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T21:30:10.457

我注意到通知消息只出现在 Android/iOS 的 Facebook 应用程序中，但是网络用户看不到它，我希望它不是 Facebook 的实现？此外，为了确保您的邀请成功发送，您必须解析 resultURL 查询。

```
NSDictionary *parameters = @{@"to":@""};

[FBWebDialogs presentRequestsDialogModallyWithSession:nil
                                                      message:SL_FB_INVITE_DESCRIPTION
                                                        title:SL_FB_INVITE_TITLE
                                                   parameters:parameters
                                                      handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
         {
             if(error)
             {
                 NSLog(@"Some errorr: %@", [error description]);
                 UIAlertView *alrt = [[UIAlertView alloc] initWithTitle:@"Invitiation Sending Failed" message:@"Unable to send inviation at this Moment, please make sure your are connected with internet" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
                 [alrt show];
                 [alrt release];
             }
             else
             {
                 if (![resultURL query])
                 {
                     return;
                 }

                 NSDictionary *params = [self parseURLParams:[resultURL query]];
                 NSMutableArray *recipientIDs = [[[NSMutableArray alloc] init] autorelease];
                 for (NSString *paramKey in params)
                 {
                     if ([paramKey hasPrefix:@"to["])
                     {
                         [recipientIDs addObject:[params objectForKey:paramKey]];
                     }
                 }
                 if ([params objectForKey:@"request"])
                 {
                     NSLog(@"Request ID: %@", [params objectForKey:@"request"]);
                 }
                 if ([recipientIDs count] > 0)
                 {
                     //[self showMessage:@"Sent request successfully."];
                     //NSLog(@"Recipient ID(s): %@", recipientIDs);
                     UIAlertView *alrt = [[UIAlertView alloc] initWithTitle:@"Success!" message:@"Invitation(s) sent successfuly!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
                     [alrt show];
                     [alrt release];
                 }

             }
         }
                                                  friendCache:nil];

- (NSDictionary *)parseURLParams:(NSString *)query
{
    NSArray *pairs = [query componentsSeparatedByString:@"&"];
    NSMutableDictionary *params = [[[NSMutableDictionary alloc] init] autorelease];
    for (NSString *pair in pairs)
    {
        NSArray *kv = [pair componentsSeparatedByString:@"="];

        [params setObject:[[kv objectAtIndex:1] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
                   forKey:[[kv objectAtIndex:0] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    }

    return params;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T13:32:10.360

它始终取决于您的应用所在的平台。例如：如果您有一个只能在手机上使用的应用程序，受邀的朋友将只能在他们的手机上看到请求，而不会在 facebook.com 上看到。如果您在 facebook.com 上也有一个画布应用程序，它也会出现在 facebook.com 上。

您可以在有关应用程序发送的请求的“接收体验”[1] 的文档中了解更多信息。

[1] [https://developers.facebook.com/docs/games/requests/v2.0#receive](https://developers.facebook.com/docs/games/requests/v2.0#receive)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T13:26:36.137

你怎么知道你的请求没有到达其他用户？您必须知道他们不会收到任何通知，他们可以通过[以下](http://www.facebook.com/appcenter/requests)链接访问它：

您的应用中必须有一个 Facebook 应用作为具有画布页面的平台。然后用户将收到通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T04:56:24.883

你什么时候填充参数？

我知道如果您发送一个空白的 Facebook 用户名作为收件人，FB API 会发送一个已完成的操作

# javascript - Knockout.js 在视图模型中修改具有多个位置的项目（又名：一对多关系）

> ID：16137887
> 
> 赞同：1
> 
> 时间：2013-04-22T00:52:52.170
> 
> 标签：javascript, mvvm, knockout.js

使用 Knockout.js：

如果一个项目/对象位于多个位置的视图模型中（相同的确切对象），是否可以将两个项目绑定在一起，以便如果用户在一个位置编辑项目，另一个项目会自动更新为出色地？

示例：http: [//jsfiddle.net/77Jc5/1/](http://jsfiddle.net/77Jc5/1/)

```
var model = {
    Foo : [
        {
            ID: 99,
            Title: 'This is item number ninety-nine',
            Description: 'This is an item included in more than one object'
        },
        {
            ID: 100,
            Title: 'This is item number one-hundred',
            Description: 'This is an item included in only one object'
        }
    ],
        Poo : [
        {
            ID: 99,
            Title: 'This is item number ninety-nine',
            Description: 'This is an item included in more than one object'
        }
    ]
}; 
```

在示例中，当用户在 Foo 或 Poo 中编辑 Item #99 时，我希望它在两者中都进行更改……最好是在用户更改它时（按键事件？）。

**解决方案**

您的模型应如下所示：

```
var model = {
    AllMembers: [
        { ID: 100, Title: 'This is item number 100' },
        { ID: 776, Title: 'This is item number 776' },
        { ID: 456, Title: 'This is item number 456' },
        { ID: 999, Title: 'This is item number 999' }
    ],
    Foo: [],
    Poo: []
}; 
```

**解决方案 1：（感谢@Joseph Gabriel）**

[http://jsfiddle.net/lamarant/hMutz/8/](http://jsfiddle.net/lamarant/hMutz/8/)

在此解决方案中，Foo 和 Poo 数组将包含对象的重复实例。Knockout 负责对象之间的同步。这可行，但从架构的角度来看，它并不理想，因为数据在整个视图模型中都是重复的。

**解决方案 2：（感谢@Jeff Mercado）**

[http://jsfiddle.net/jeff1203/rndM9/2/](http://jsfiddle.net/jeff1203/rndM9/2/)

在这个解决方案中，Foo 和 Poo 数组将只包含被引用对象的 ID。在架构上，我认为这是正确的方法，但它也以更多代码为代价。

如果您正在阅读本文，那么最终您可能会将视图模型发布到服务器进行处理，这可能需要将模型保存回您的数据库。这两种解决方案都能充分处理数据库中存在的一对多关系。在我的要求中，我还使用顺序负数作为 ID 号（ID：-1、ID：-2 等）向 AllMembers 数组添加新元素。服务器端处理顺序应如下所示：

1.  创建一个数组以将负 ID 映射到数据库中相应的数据库新创建的 ID
2.  循环遍历 AllMembers 数组中的成员并更新/创建数据库中的每个成员。如果创建新成员，请将其负数和新 ID 添加到您在步骤 1 中创建的数组中。
3.  删除数据库中 Foo/Poo 之间所有现有的 1 对多关系，因为您的模型现在是该信息的主人
4.  循环遍历 Poo 和 Foo，并将模型中到 Foo/Poo 的所有关系添加到 1-many 表中（使用 ID）

呼...

淘汰赛很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:16:18.843

要记住的主要事情是，淘汰赛将更新它绑定到的任何对象，但是为了使同一个对象可更新并反映多个位置的更改，它确实必须是**同一个对象，而不仅仅是一个克隆**。

两个具有相同名称和/或属性的对象是不够的。它实际上必须是一个对象，指向同一个内存地址，然后可以在多个位置显示和绑定。

我会考虑将您的数据从您的 viewModel 中分离出来，以便您可以根据需要从尽可能多的地方引用相同的项目。

```
var items = [{
    ID: 99,
    Title: 'This is item number ninety-nine',
    Description: 'This is an item included in more than one object'
}, {
    ID: 100,
    Title: 'This is item number one-hundred',
    Description: 'This is an item included in only one object'
}];

var model = {
    Foo : [
        items[0],
        items[1]
    ],
        Poo : [
        items[0]
    ]
};
var viewModel = ko.mapping.fromJS(model);
ko.applyBindings(viewModel); 
```

**也就是说**，在您的视图模型中直接有重复引用似乎有点尴尬。我不知道您的情况是什么，但是可以使用Ko吗？计算给你“便便”值，反之亦然？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:02:16.210

理想情况下，同一视图模型中的任何对象最多只能有一个副本。如果你能帮助它，重构你的视图模型，这样你的对象可以引用一个包含所有对象的数组/映射来最小化复制。然后你的实际对象只需要获取引用的对象。

```
var model = {
    _FooRefs: [99, 100],
    _PooRefs: [99],
    _AllObjects: [
        {
            ID: 99,
            Title: 'This is item number ninety-nine',
            Description: 'This is an item included in more than one object'
        },
        {
            ID: 100,
            Title: 'This is item number one-hundred',
            Description: 'This is an item included in only one object'
        }
    ]
}; 
```

```
function ViewModel(data) {
    var self = this;
    ko.mapping.fromJS(data, {
        _AllObjects: {
            key: function (obj) {
                return obj.ID;
            }
        }
    }, self);

    self.Foo = ko.computed(function () {
        var fooRefs = ko.utils.unwrapObservable(self._FooRefs);
        return ko.utils.arrayMap(fooRefs, function (id) {
            // mappedGet was added to mapping plugin version 2.4.1
            return self._AllObjects.mappedGet({ ID: id });
        });
    });

    self.Poo = ko.computed(function () {
        var pooRefs = ko.utils.unwrapObservable(self._PooRefs);
        return ko.utils.arrayMap(pooRefs, function (id) {
            return self._AllObjects.mappedGet({ ID: id });
        });
    });
} 
```

[小提琴](http://jsfiddle.net/jeff1203/XZGek/)

要将对象添加到数组中，您需要确保该对象存在于您的数组/映射中，然后将对象的键添加到引用数组中。要删除项目，请删除引用并可选择删除对象。

* * *

如果这样做不是一个选项，并且您需要保持重复，您可以使用[邮箱](https://github.com/rniemeyer/knockout-postbox/)插件来帮助保持对象同步。如果对象存在于单独的视图模型中，这种方法将是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:01:47.240

从**架构**的角度来看，我相信你不应该像这样复制你的模型。而是只使用 'Foo' 并在多个视图上使用它。你有更少的代码重复，一切都是自动发生的，而且更不容易出错。

为此，您可以`ko.applyBindings()`在多个元素上使用该函数。

这里也有按键事件的小**例子：http:** [//jsfiddle.net/Z5yGf/2/](http://jsfiddle.net/Z5yGf/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T00:59:10.500

如果你写这样的代码：

```
var num99 = {
            ID: 99,
            Title: 'This is item number ninety-nine',
            Description: 'This is an item included in more than one object'
        };

var model = {
    Foo : [
        num99,
        {
            ID: 100,
            Title: 'This is item number one-hundred',
            Description: 'This is an item included in only one object'
        }
    ],
        Poo : [
        num99
    ]
}; 
```

然后`Foo`，`Poo`确实，指向同一个对象，所以改变一个会改变另一个。

[jsFiddle 示例](http://jsfiddle.net/77Jc5/2/)

# java - 每 20 分钟分析一次程序行为

> ID：16137889
> 
> 赞同：2
> 
> 时间：2013-04-22T00:53:02.297
> 
> 标签：java, multithreading, concurrency

我正在做一个项目，我正在尝试对我的一些客户端代码进行基准测试。

因此，为此我编写了一个`Multithreading program`将生成多个线程并且每个线程将运行特定持续时间的程序，并且在程序完成后，我调用`logHistogramInfo() method`finally 块为我打印出`historgram information`它将告诉我我的客户端代码的行为方式.

下面是我的代码，其中我产生了多个线程，在 finally 块中，我调用`logHistogramInfo method`-

```
public static void main(String[] args) {

    try {

        readPropertyFiles(args);

        //create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        long startTime = System.currentTimeMillis();
        long endTime = startTime + (durationOfRun * 60 * 1000);

        for (int i = 0; i < threads; i++) {
            service.submit(new CassandraReadTask(endTime, columnFamilyList));
        }

        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
    } catch (InterruptedException e) {

    } catch (Exception e) {

    } finally {
        logHistogramInfo();
    }

    LOG.info("All threads are finished");
} 
```

下面是我的直方图方法-

```
private static void logHistogramInfo() {

    int[] definition = { 0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30 };
    long[] buckets = new long[definition.length];

    System.out.println("Milliseconds           Number");
    SortedSet<Long> keys = new TreeSet<Long>(CassandraTimer.histogram.keySet());
    for (long key : keys) {
        Long value = CassandraTimer.histogram.get(key);
        System.out.println(key + "                      " + value);
    }

    //Histogram information
    for (Long time : CassandraTimer.histogram.keySet()) {
        for (int i = definition.length - 1; i >= 0; i--) {
            if (time >= definition[i]) {
                buckets[i] += CassandraTimer.histogram.get(time);
                break;
            }
        }
    }
    for (int i = 0; i < definition.length; i++) {
        String period = "";
        if (i == definition.length - 1) {
            period = "greater than " + definition[i] + " ms";
        } else {
            period = "between " + (definition[i] + 1) + " and " + definition[i + 1] + " ms";
        }
        LOG.info(buckets[i] + " came back " + period);
    }
} 
```

**问题陈述：-**

一切对我来说都很好。现在唯一的问题是，假设如果我正在运行我的程序，`10hours` 那么我需要等待我的程序完成。仅在 10 小时后，我就可以看到结果是什么。

我有兴趣在程序运行时查看结果。只是为了了解程序的行为方式。我不想等待 10 个小时然后看到结果。

现在我在想，假设我`10 hours`每 10 分钟或 20 分钟（它应该是可配置的）运行我的程序，它应该调用`logHistogramInfo() method`并向我显示结果。

并且程序运行完成后，会自动调用`logHistogramInfo() method`finally 块中的 。所以我最终将能够得到全貌。但是每 20 分钟后，我可以看到程序的行为，而不是等待程序完成。这件事可能吗？

任何例子都会有很大帮助。

**更新代码：-**

使用下面的代码，它不会每隔几分钟打印一次日志。我尝试调试并将断点放在 try 块中，但它也没有达到该断点。知道为什么吗？

```
// queue some tasks
long startTime = System.currentTimeMillis();
long endTime = startTime + (durationOfRun * 60 * 1000);

for (int i = 0; i < threads; i++) {
        service.submit(new CassandraReadTask(endTime, columnFamilyList));
}

service.shutdown();

loggingAfterEveryXMinutes();
service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);

/**
 * This is a simple which will call the logHistogramInfo method after every X Minutes
 */
private static void loggingAfterEveryXMilliseconds() {
    new Thread() {
        public void run() {
            while (true) {
                try { 
                    Thread.sleep(loggingEveryXMilliseconds); 
                }
                catch (InterruptedException ex) {

                }
                logHistogramInfo();
            }
        }
    }.start();      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:09:25.287

您在这里有两个选择：

1）预配置一个“更新周期”

这是您已经确定的解决方案。它只是包括设置一个额外的线程，就像这样，做日志记录：

```
new Thread() {
    public void run() {
        while (true) {
            try { Thread.sleep(numMinutes * 60 * 1000); }
            catch (InterruptedException ex) { }
            logHistogramInfo();
        }
    }
}; 
```

2）提供一个钩子，可以按需检索直方图信息

有几种方法可以做到这一点，但最常见的一种是简单地设置一个 HTTP 服务器，您可以从浏览器中点击它来呈现信息（或者，您可以简单地让程序将直方图信息呈现到日志文件中HTTP 服务器被命中）

Apache Commons 对于快速设置这类东西很有用，但它真的不是很多：

```
new Thread() {
    public void run() {
        ServerSocker serverSocket = new ServerSocket(12345);
        while (true) {
            Socket socket = serverSocket.accept();
            PrintWriter pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream());
            pw.println("Histogram Info");
            // Print histogram info
            pw.flush();  pw.close();
            socket.close();
        }
    }
} 
```

# php - PHP::DOTNET 加载每隔一个页面加载就会抛出错误

> ID：16137895
> 
> 赞同：1
> 
> 时间：2013-04-22T00:54:23.367
> 
> 标签：php, .net, iis-7

我目前正在测试我在 php 内的 vb.net 中创建的 dll。我通过 php 的 dotnet com 对象加载它。它第一次加载很好。但是如果我按 f5 并刷新页面，它会抛出这个错误。

`HTTP Error 500.0 - Internal Server Error C:\Program Files (x86)\PHP\v5.3\php-cgi.exe - The FastCGI process exited unexpectedly`

它按顺序执行此操作。第一次加载工作正常，第二次 - 失败，第三次 - 工作正常，第四次 - 失败等等。这是相当一致的。几乎就像这个对象没有被有效地处理。我以前从未使用过它，所以如果我必须以某种方式逃避它，请告诉我。

```
$myclassobj = new DOTNET("MyWebClass,"
."Version=1.0.0.0,"
."Culture=neutral,"
."PublicKeyToken=6fe1ba5eac63c19c"                   
,"MyWebClass.MyAssembly.Web");
echo $myclassobj->SayHello("Hi PHP!!!!"); 
```

这是在运行 Windows 7、IIS 7 和 php 5.3.19 的本地计算机上进行测试的

任何帮助表示赞赏。谢谢。

# c# - 如果列表字符串元素包含另一个列表中的字符串元素，如何删除它？

> ID：16137897
> 
> 赞同：5
> 
> 时间：2013-04-22T00:54:50.173
> 
> 标签：c#, xml, linq

## 设置

我有这三个清单。

```
List<List<string>> tokens = new List<string>();
List<string> token = new List<string>();
List<string> sets = new List<string(); 
```

`token`将在列表中的一个完整`tokens`列表。

```
{"<card>"",
 "    <name>Domri Emblem</name>",
 "    <set picURL="http://magiccards.info/extras/token/Gatecrash/Domri-Rade-Emblem.jpg" picURLHq="" picURLSt="">GTC</set>",
 "    <color></color>",
 "    <manacost></manacost>",
 "    <type>Emblem</type>",
 "    <pt></pt>",
 "    <tablerow>0</tablerow>",
 "    <text></text>",
 "    <token>1</token>",
 "</card>"} 
```

`sets`列表看起来像这样。

```
{"ARB", ..., "AVR", ..., "GTC", ..., "ZEN"} 
```

我想遍历每个`token`in`tokens`并删除`token`包含`set`.

## 例子

该`tokens`列表有几个`token`元素。一个`token`（比如 token1）有一个像这样的元素。

```
{..., "    <set picURL="http://magiccards.info/extras/token/Gatecrash/Domri-Rade-Emblem.jpg" picURLHq="" picURLSt="">GTC</set>", ...} 
```

另一个`token`（比如 token2）有这两个元素。

```
{..., "    <set picURL="http://magiccards.info/extras/token/magic-2012/pentavite.jpg" picURLHq="" picURLSt="">M12</set>",
"    <set picURL="http://magiccards.info/extras/token/player-rewards-2004/pentavite.jpg" picURLHq="" picURLSt="">MI</set>", ...} 
```

假设`sets`列表被修改为仅包含`{"ARB", "GTC", "M12"}`.

我将如何遍历每个`token`in`tokens`并删除包含 in 中任何字符串元素的字符串元素`sets`？那么，在该过程之后，token1 将没有上面的那个元素，而 token2 将只有第二个呈现的元素？

## 我试过的

这将遍历每个`token`in并删除包含 string 的`tokens`任何元素。`token``"GTC"`

```
foreach (var token in tokens)
{
    token.RemoveAll(str => str.Contains("GTC"));
} 
```

我查看了其他一些问题，发现了这个，但它不起作用。

```
foreach (var token in tokens)
{
    token.RemoveAll(sets.Contains);
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T00:59:49.343

```
foreach (var token in tokens)
{
    token.RemoveAll(str => sets.Any(s => str.Contains(s)));
} 
```

# java - 将 JOptionpane 代码与 jFrame 代码混合

> ID：16137904
> 
> 赞同：-2
> 
> 时间：2013-04-22T00:55:46.373
> 
> 标签：java, swing, awt

我和我的搭档一直在做一个项目的不同部分，现在我们想把它们放在一起，但我们遇到了麻烦。他为 jOptionpane 编写了他的部分代码，但完成的项目将使用 jFrame。

代码的这个特定部分可以编译，但它不会向文件中写入任何内容，它在 jOptionpane 版本中工作。基本上我们想从文本字段中读取并将它们写入 .txt 文件。我知道在使用基于 unix 的操作系统时可能会有细微的差别，但我们在 Windows 上也没有成功。我试图模仿这个网站的其他答案，但我没有任何运气。有什么提示或建议吗？

```
public void jTextField1ActionPerformed (java.awt.event.ActionEvent te)               
{             
    String user,usersPass;
    FileWriter fw;
    FileReader fr;
    BufferedWriter writer;
    BufferedReader reader;

    if (te.getSource() == jTextField1)

    {

        user = jTextField1.getText();

    }
        else if (te.getSource() == jTextField2)

            {

                usersPass = jTextField2.getText();

             }

                try
                   {
                       ArrayList<String> nameList = new ArrayList<String>(100);
                       ArrayList<String> passwords = new ArrayList<String>(100);

                       File userNames = new File("Username.txt");
                       Scanner users = new Scanner(userNames);
                       File userPass = new File("Passwords.txt");
                       Scanner pass = new Scanner(userPass);

                       // FileWriter fw;
                       //  FileReader fr;
                       fw = new FileWriter("Macintosh  Hd/Users/smooth4prez/Desktop/Project/Username.txt");
                       fr = new FileReader("Macintosh Hd/Users/smooth4prez/Desktop/Project/Passwords.txt");
                       writer = new BufferedWriter(fw);
                       reader = new BufferedReader(fr);
                   }
                   catch(FileNotFoundException E)
                       {
                           E.printStackTrace();
                       }
                               catch(IOException e)
                                   {
                               e.printStackTrace();
                                   }

}
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
 {

        if (evt.getSource() == jButton1)

            {
                dispose ();

                new SignIn().setVisible(true);

            }

} 
```

这是我们正在尝试重做的 jOptionpane 版本。

```
import java.util.ArrayList;
import java.util.Scanner;
import javax.swing.JOptionPane;
import java.io.*;

public class LoginTest implements Serializable

{
    Scanner keyboard = new Scanner(System.in);  

 public static void main(String[] args)throws FileNotFoundException, IOException, NotSerializableException
 {
    Username();
 }
 public static void Username()throws FileNotFoundException, IOException
 {
   File userNames = new File("Username.txt");
    Scanner users = new Scanner(userNames);
    File userPass = new File("Passwords.txt");
    Scanner pass = new Scanner(userPass);

    FileWriter fWriteUser = new FileWriter("Username.txt", true);
   PrintWriter outUser = new PrintWriter(fWriteUser);
    FileWriter fWritePass = new FileWriter("Passwords.txt", true);
   PrintWriter outPass = new PrintWriter(fWritePass);       

    ArrayList<String> nameList = new ArrayList<String>(100);
  ArrayList<String> passwords = new ArrayList<String>(100);

    int userCount = 0;

    while(users.hasNext())
    {
        String oldName = users.nextLine();
        nameList.add(oldName);
        userCount = userCount + 1;
    }
    while(pass.hasNext())
    {
        String oldPass = pass.nextLine();
        passwords.add(oldPass);
    }

    String strNumUsers = "";

    strNumUsers = JOptionPane.showInputDialog("How many users would you like to register?");

    int numUsers = Integer.parseInt(strNumUsers);

    int newCount = userCount + 1;

   for(int j = 0;j < numUsers;j++)
    {

        String username = JOptionPane.showInputDialog("Enter the username");

        for(int i = 0;i < nameList.size();i++)
        {
            if(username.equals(nameList.get(i)))
            {
                JOptionPane.showMessageDialog(null, "That username is already taken");
                username = JOptionPane.showInputDialog("Enter the username");

                i = 0;
            }
        }

        nameList.add(username);              

        String password = JOptionPane.showInputDialog("Enter password");
       passwords.add(password);

        File dir = new File("Inbox" + newCount); 
        dir.mkdir();
        File folder = new File("Inbox" + newCount);

        File m;
        m = new File("Macintosh Hd/Users/smooth4prez/Desktop/Project3/Inbox" + newCount + "/messages.txt");
        m.createNewFile();

        File n;
        n = new File("Macintosh Hd/Users/smooth4prez/Desktop/Project3/Inbox" + newCount + "/outbox.txt");
        n.createNewFile();

        newCount = newCount + 1;
   }

    for(int k = userCount;k < nameList.size();k++)
    {
        outUser.println(nameList.get(k));
        outPass.println(passwords.get(k));
    }
    outUser.close();
    outPass.close();

    String signInUserName = JOptionPane.showInputDialog("Enter username to sign in");

    for(int i = 0;i < nameList.size();i++)
    {
        if(signInUserName.equals(nameList.get(i)))
        {

            String signInPassword = JOptionPane.showInputDialog("Please enter your password");
            if(signInPassword.equals(passwords.get(i)))
            {
                String response = "";

                JOptionPane.showMessageDialog(null, "Signed in!");
                i = nameList.size();

                response = JOptionPane.showInputDialog("Would you like to send a message, view messages, or exit?" + 
                "(Please enter send, view, or exit.)");

                /*switch(response.trim())
                {
                case "Send":
                case "send":
                    Messages.MessageTest(nameList, signInUserName);
                    break;
                case "View":
                case "view":
                    Messages.MessageView(nameList, signInUserName);
                    break;
                case "Exit":
                case "exit":
                    break;
                case "":
                    JOptionPane.showMessageDialog(null, "You didn't enter anything, DIPSHIT!");
                    break;
                default:
                    JOptionPane.showMessageDialog(null, "That is not a proper response.");
                    break;
                }*/
                /*
                Save s = new Save();
                testObject Rob = new testObject();
                s.saveMyObject("myfile", Rob);

                //Saving an object with class Save.java
                /*
                Save s = new Save();
                Object myObject = new Object();
                String test = "test";
                myObject = (Object)test;
                s.saveMyObject("myfile", myObject);
                */

                //insert program to search for specific user homepage file
                //if found, load that homepage, if not found, call method to create homepage
                //and save it as a file with the title including the username
            }
            else
            {
                JOptionPane.showMessageDialog(null, "Incorrect password");
                i = nameList.size();
            }
        }
        else if(!signInUserName.equals(nameList.get(i)))
        {
            if(i + 1 == nameList.size())
            {
            JOptionPane.showMessageDialog(null, "That is not a valid username");
            }       
        }           
    }
} 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:50:40.993

> 他为 jOptionpane 编写了他的部分代码，但完成的项目将使用 jFrame。

框架可能会根据需要弹出对话框或选项窗格。我在上面的（格式可怕的）代码中看到的一个很好的例子是向用户查询信息。如果它在一个框架中，另一种选择是有一个`JTextField`带有动作监听器的输入字段（例如）。当用户输入内容并点击时，它将被执行`Enter`

在后一种情况下，您可能需要使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)或布局管理器的组合来布置多个组件。

使用消息类型选项窗格的代码部分可能会在 GUI 中的适当位置替换为 a `JLabel`，尽管其中一些消息实际上似乎*应该*出现在自由浮动选项窗格中。YMMV。

# algorithm - 选择哪个节点作为最近邻算法的起始节点

> ID：16137906
> 
> 赞同：2
> 
> 时间：2013-04-22T00:55:48.887
> 
> 标签：algorithm, nearest-neighbor, traveling-salesman, approximation

[http://en.wikipedia.org/wiki/Nearest_neighbour_algorithm](http://en.wikipedia.org/wiki/Nearest_neighbour_algorithm)

我正在使用最近邻算法来解决旅行商问题。它非常快，但并不准确。我在某处读到了我可以做出的两项改进。第一种不是从一个随机点开始，而是从每个节点开始运行最近邻算法。（所以如果有N个节点，最近邻居运行N次）然后比较并选择总距离最小的路线。这似乎要精确得多。但是太慢了。

另一种方法不是随机选择起始节点，而是选择一个特殊的节点。然后仍然只运行一次最近的邻居以获得结果。这不会像上面的方法那样准确，但肯定要快得多，因为该算法像以前一样只运行一次。但不幸的是，我不记得我在哪里读到那篇文章以及选择这个起始节点的标准。

我猜我应该得到每个节点到其他节点之间的总距离，然后应该选择具有最大值的节点作为起始节点。（用我的话来说，这是选择一个离图表“最远”的节点，同时也避免选择靠近图表中心的节点）我认为这样我得到的路线应该非常接近最佳最短路线。

我想对了吗？

编辑：我正在处理具有欧几里得距离的度量 TSP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:46:02.040

听起来你可能应该只运行 K-NN 算法，其中几个起始节点说 O(log N)，这只会花费 O(K*N*log(N))。选择最佳路线，然后使用路线改进启发式算法，[2 选择](http://en.wikipedia.org/wiki/Traveling_salesman_problem#Iterative_improvement)或 2.5 选择，限制移动次数或仅限制时间。

这应该可以实现时间与准确性的最佳平衡，除非您开始研究基于[k-opt 或 v-opt](http://en.wikipedia.org/wiki/Traveling_salesman_problem#Iterative_improvement)的算法。虽然，听起来你没有时间陪他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:19:41.773

您还可以在每次做最近邻居时进行缓存。如果你做一个 K 最近的邻居会更好。这就是它的工作方式：

1.  对于每个节点，找到 K 个最近的邻居。将其存储在缓存中。
2.  每当您需要执行最近邻时，请先检查缓存。否则执行最近邻居并将其添加到缓存中。

# php - 如何在 PHP 中实现 javascript int.toString(32)？

> ID：16137909
> 
> 赞同：2
> 
> 时间：2013-04-22T00:56:37.877
> 
> 标签：php, javascript, hex

我有一个生成字符串唯一 ID 的 uniqueId 函数。我在javascript中使用它，你可以在这里找到它（见我的回答）： [Generate unique number based on string input in Javascript](https://stackoverflow.com/questions/15377161/generate-unique-number-based-on-string-input-in-javascript)

我想在 PHP 中做同样的事情，但是该函数主要生成浮点数而不是无符号整数（超出有符号整数值`PHP_MAX_INT`），因此我不能使用 PHP 函数`dechex()`将其转换为十六进制。`dechex()`仅限于 PHP_MAX_INT 值，因此高于 的每个值`PHP_MAX_INT`都将返回为`FFFFFFFF`.

相反，在 javascript 中，当使用 int.toString(32) 时，它会生成一个包含 A..F 以外的其他字母的字符串，例如：

```
dh8qi9t
je38ugg 
```

如何在 PHP 中实现相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:01:38.410

我建议`base_convert($input,10,32)`，但正如您所观察到的，它不适用于太大的数字。

相反，您可以自己实现它：

```
function big_base_convert($input,$from,$to) {
  $out = "";
  $alphabet = "0123456789abcdefghijklmnopqrstuvwxyz";
  while($input > 0) {
    $next = floor($input/$to);
    $out = $alphabet[$input-$next*$to].$out; // note alternate % operation
    $input = $next;
  }
  return $out ?: "0";
} 
```

# httprequest - 带有飞镖的HttpRequest（损坏/失败的语言）

> ID：16137911
> 
> 赞同：-3
> 
> 时间：2013-04-22T00:56:54.470
> 
> 标签：httprequest, dart

我有这个代码：

```
import 'dart:io';

void main() {

  HttpRequest request = new HttpRequest();      

} 
```

没有做任何其他事情，我在 HttpRequest() 下得到一条黄线；说'抽象类不能用'新'实例化......'等等。[我直接从https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/tQsptp_PprU](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/tQsptp_PprU)复制并粘贴了这段代码。它于 2013 年 4 月 12 日发布，因此不可能过时。我今天刚刚下载了最新版本的飞镖编辑器。

继续，然后我可以输入，然后`request.`会出现可用方法的列表。`open()`不是其中之一。这种语言是半途而废还是编辑器这么糟糕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:59:09.633

[io.HttpRequest](http://api.dartlang.org/docs/releases/latest/dart_io/HttpRequest.html)类没有公共的空构造函数。

您发布的链接使用的是[html.HttpRequest](http://api.dartlang.org/docs/releases/latest/dart_html/HttpRequest.html)，它具有不同的 API。

这个[问题/答案](https://stackoverflow.com/questions/15734057/what-is-the-easiest-way-to-get-an-http-response-from-command-line-dart)可能会对您有所帮助。

# scheme - Scheme (DrRacket) - cond 语句不适用于递归

> ID：16137914
> 
> 赞同：1
> 
> 时间：2013-04-22T00:57:10.897
> 
> 标签：scheme, racket

我正在使用 DrRacket R5RS 学习方案。我以为我已经确定了这些概念，但我无法让这个简单的递归练习起作用。我认为这是 DrRacket 中的一个错误，但我不确定。

有人能看到问题，并希望能解释为什么我的代码不起作用吗？我真的很想学习这种函数式语言。

此代码将正确生成 #T 和 #F：

```
(define three (lambda (L target1 target2 target3 sum)
    (cond
        ((= target1 0) (three L (car L) (cadr L) (caddr L) 0))
        ((NULL? L) (= (- sum (+ target1 (+ target2 target3))) (+ target1 (+ target2 target3))))  ; sum minus targets = targets
        (else (three (cdr L) target1 target2 target3 (+ sum (car L))))       ; return true if branch returns true
))) 
```

当我使用 (three '(1 2 3 6) 0 0 0 0) 启动程序时，它返回 #T，因为 1+2+3=6。当我使用 (three '(1 2 3 5) 0 0 0 0) 启动程序时，它返回 #F，因为 1+2+3!=5。

现在，问题来了。我想做多分支递归。但是，此代码每次都返回 #T！因为我不能让它返回#F，所以我不能让它跳到我的递归的下一个分支。

```
(define three (lambda (L target1 target2 target3 sum)
    (cond
        ((= target1 0) (three L (car L) (cadr L) (caddr L) 0))
        ((NULL? L) (= (- sum (+ target1 (+ target2 target3))) (+ target1 (+ target2 target3))))  ; sum minus targets = targets
        ((three (cdr L) target1 target2 target3 (+ sum (car L))) #T)       ; return true if branch returns true                  
        (else 'hit_the_bottom)  ; IT NEVER HITS THIS STATEMENT!                  
))) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T01:10:43.527

解决方案太复杂了，如果你只想检查列表中前三个数字的总和是否等于第四个数字，更简单的非递归方法会更好：

```
(define (three lst)
  (= (+ (first lst) (second lst) (third lst))
     (fourth lst))) 
```

除此之外，你为什么不坚持第一种方法？它对您有用，并且不清楚“多分支递归”是什么意思，为什么第二种方法有必要-第一种方法不是“多分支”吗？毕竟，它已经递归地调用`three`了*两*部分。关于第二种方法总是返回的原因`#t`- 这一行：

```
(else 'hit_the_bottom) 
```

...确实会被执行，但是因为它是递归调用的一部分，所以它会返回到这一行：

```
((three (cdr L) target1 target2 target3 (+ sum (car L))) #t) 
```

并且值为`'hit_the_bottom`，`#t`所以整个过程最终会返回`#t`。请注意，在 Scheme 中，*所有*不是`#f`的都是`#t`，特别是在这种情况下，`'hit_the_bottom`将被解释为`#t`。只是为了清楚这`else`部分是真的被执行了，运行这段代码，你会看到`'hit_the_bottom`在屏幕上打印了一次：

```
(define three
  (lambda (L target1 target2 target3 sum)
    (cond ((= target1 0)
           (three L (car L) (cadr L) (caddr L) 0))
          ((null? L)
           (= (- sum (+ target1 target2 target3))
              (+ target1 target2 target3)))
          ((three (cdr L) target1 target2 target3 (+ sum (car L)))
           #t)
          (else (display 'hit_the_bottom) 'hit_the_bottom))))

(three '(1 2 3 6) 0 0 0 0)
=> #t
(three '(1 2 3 5) 0 0 0 0)
=> hit_the_bottom #t 
```

最后，要纠正第二种方法，请将最后一行替换为`(else #f)`，它将按预期工作。

# ruby-on-rails - 如何教rails表单按钮提交以使用遥控器？

> ID：16137915
> 
> 赞同：2
> 
> 时间：2013-04-22T00:57:13.283
> 
> 标签：ruby-on-rails, button, submit

这个问题之前在一些帖子中出现过，但没有一个是具体的，也没有提出解决方案。

我有一个导轨形式。我使用我想让这个按钮通过 ajax 提交表单，也就是 remote:true。

在我看来，rails.js 还不支持提交类型的按钮，它对我不起作用，即使我手动向按钮添加数据远程标签。（虽然它应该与 ）

但是我想使用新的 html5 按钮 formaction 属性走这条路，因为这使得将不同的操作分配给不同的按钮变得更加容易。

所以我问我是否只是在这里遗漏了一些东西，或者这只是rails ujs中缺少的东西，但是呢？

我现在只是在挖掘 rails.js，所以也许有人已经想出了一个补丁？使按钮 type=submit remote:true 工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T07:26:22.247

如果我得到你，你想通过 AJAX 提交表单（不是特殊的按钮按下）。为此，您将 a 添加`remote: true`到您的`form`-tag，而不是按钮本身。

请参阅[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T08:45:56.267

我曾经这样做：

*   向以“js-”开头的提交按钮添加一个类，它用作在一个小 jquery 脚本/插件中检索按钮的钩子。
*   在js中，我检索按钮并`preventDefault();`对其进行操作以避免提交
*   可选地，我可以验证数据或显示某种警报/模式视图等
*   最后我打电话`$.ajax`来做异步电话

这里有一个小例子

```
= f.submit 'myButton', class: 'js-my_async_form'
:javascript
  jQuery(function($) {
    $('.js-my_async_form').asyncSubmit();
 }); 
```

在这里你有“小插件”

```
jQuery(function($) {
  jQuery.fn.asyncSubmit = function(){
    return this.each(function () {
      var mybutton = $(this);
      var completed = function(answer) {
        // do some stuff
      };

      var error = function(answer) {
        //do some stuff
      };

      var submit_click = function(event){
        event.preventDefault();
        $.ajax({
          url: //my_form_path,
          type: //get or post,
          success: completed,
          error: error,
          dataType: 'json'
        });
      }

      mybutton.click(submit_click);
    });
  }
}); 
```

这是我的脚本的改编，所以要**小心处理！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T07:05:50.787

我不确定我是否理解您的问题......我必须明确提交一个远程表单（因为 chrome 中的一个错误）对我来说问题是表单是数据远程而不是按钮提交。现在我在按钮的 onclick 中提交，但我必须使用表单本身的提交方法。

让我们更清楚一点......我的表单的数据远程属性为true，我的提交按钮有 `:onclick => "stuff_i_had_to_do_before_submiting();$("new_id_of_my_form").submit();"`

希望它有帮助...

ps：感谢[pduersteler](https://stackoverflow.com/users/92096/pduersteler)的整理

是的，“onclick”不好，但之前的东西（“stuff_i_had_to_do_before_submiting（）”需要一些垃圾，我将javascript拉到一个单独的文件中以供重用......

# css - save_and_open_page 已停止提供我的 CSS

> ID：16137916
> 
> 赞同：2
> 
> 时间：2013-04-22T00:57:42.917
> 
> 标签：css, ruby-on-rails, testing, capybara

每当我`save_and_open_page`从测试中调用时，我的测试设置工作得非常好，可以很好地提供用 css 正确格式化的页面。然后我设置了一些 javascript 测试并对我的设置进行了一些更改（抱歉，我无法详细说明它们 - 我没有足够好的文档记录）。进行更改后，当我调用`save_and_open_page`.

这是我的规范/spec_helper.rb

```
require 'rubygems'
require 'spork'

Spork.prefork do

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'
  require 'factory_girl'
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  RSpec.configure do |config|
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.add_setting(:seed_tables)
    config.seed_tables = %w(notifications drug_names drug_modes drug_prefs db_tables db_columns column_values)
    config.use_transactional_fixtures = false
    config.before(:suite) do
      DatabaseCleaner.strategy = :truncation, {except: config.seed_tables}
    end
    config.before(:each) do
      DatabaseCleaner.start
    end
    config.after(:each) do
      DatabaseCleaner.clean
    end
    config.infer_base_class_for_anonymous_controllers = false
    config.include Features::SessionHelpers, type: :feature
    config.order = "random"
  end
  Spork.each_run do
    FactoryGirl.reload
  end
end 
```

我的测试环境中安装了以下 gem；

```
gem 'rspec-rails', '2.13.0'
gem 'guard-rspec', '2.4.1'
gem 'rb-fsevent', '0.9.3'
gem 'terminal-notifier-guard', '1.5.3'
gem 'guard-spork', '1.5.0'
gem 'spork', '0.9.2'
gem 'capybara', '2.1.0'
gem 'timecop', '0.5.9.2'
gem 'launchy', '2.2.0'
gem 'factory_girl_rails', '4.2.1'
gem 'shoulda', '3.3.2'
gem 'faker', '1.1.2'
gem 'database_cleaner', '0.9.1'
gem 'selenium-webdriver', '2.32.1' 
```

关于我做了什么来阻止它正常工作的任何线索？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-26T18:46:23.350

仅供参考，save_and_open_page 作品由这两个链接的优秀人士提供。这就是我在 spec_helper.rb 底部的内容，以使其工作

```
# to allow CSS and Javascript to be loaded when we use save_and_open_page, the
# development server must be running at localhost:3000 as specified below or
# wherever you want. See original issue here:
#https://github.com/jnicklas/capybara/pull/609
# and final resolution here:
#https://github.com/jnicklas/capybara/pull/958
Capybara.asset_host = "http://localhost:3000" 
```

享受并感谢 sdhull 和 jnicklas 以及所有为此工作的人

哈尼族

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T13:03:39.250

这是从 Capybara 中删除的，在[pull 609](https://github.com/jnicklas/capybara/pull/609)

尼克拉斯：

> 凭借我作为水豚生命的仁慈独裁者的身份，我在这里做出行政决定：
> 
> 必须进行资产重写。它是整个 Capybara 代码库中最糟糕的部分。这是一个可怕的 hack，它从一开始就无法正常工作，它给我们带来的微薄好处可以通过卓越的调试方法轻松实现，例如在 Selenium 中运行相同的测试并通过例如 sleep、gets 或 binding.pry 停止执行。
> 
> 如果这惹恼了你们中的一些人，我很抱歉，但我的工作是做出艰难的决定，决定什么是进去，什么是外边。如果我不做那份工作，简单地接受一切，我们最终不会有好的结果。所以我希望你能接受这个决定，即使你可能不同意它。

根据[Save_and_open_page 不选择 scss 标记](https://stackoverflow.com/questions/9356398/save-and-open-page-not-picking-up-scss-markup)，您可以考虑使用`capybara-screenshot`-gem 制作屏幕截图。

这颗宝石将介绍`save_and_open_screenshot`。

然而，正如 jnicklas 在 pull-request 的讨论中提到的那样，有充分的理由根本不想要这个特性：

> ...因为 RackTest 没有 CSS 和 JS，所以现在您看到的页面与 Capybara 的不同

# c# - System.Xml.Linq.XDocument 类是否实现 IEnumerable ?

> ID：16137918
> 
> 赞同：1
> 
> 时间：2013-04-22T00:57:51.427
> 
> 标签：c#, linq

我知道您不能对未实现的对象运行 LINQ 语句`IEnumerable<T>`。我还知道您可以针对 XDocument 类的实例运行 LINQ 语句。

例如我可以做

```
 XDocument people = XDocument.Load(@"People.xml");

    var legalDrinkers = from x in people.Descendants("person")
                        where int.Parse(x.Attribute("Age").ToString()) > 21
                        select x; 
```

但是当我查看 XDocument 的元数据及其继承层次结构中的所有上游类时，我看不到在哪里`IEnumerable<Xdocument>`实现。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T01:05:31.597

您不直接从 XDocument 使用 LINQ，而是使用其中的方法，例如[`XDocument.Descendants`](http://msdn.microsoft.com/en-us/library/bb360635.aspx)实现[`Elements`](http://msdn.microsoft.com/en-us/library/bb342765.aspx)所需接口的方法。

# node.js - 如何为 elasticjs 客户端指定凭据用户名/密码？

> ID：16137919
> 
> 赞同：0
> 
> 时间：2013-04-22T00:58:25.787
> 
> 标签：node.js, elasticsearch, elasticjs

我们在哪里可以为 elasticjs ( [http://www.fullscale.co/elasticjs/](http://www.fullscale.co/elasticjs/) ) 客户端指定用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:10:23.893

由于 elasticsearch 本身不支持基本身份验证，因此 elastic.js 没有提供在所有客户端中设置此信息的方法。Angular 客户端最近获得了对传递 $http 配置对象的支持，该配置对象允许设置自定义标头（即 http 基本身份验证中使用的授权标头）。jQuery 和节点客户端目前不支持此功能。

# php - 使用 Peerindex API 计算用户分数

> ID：16137921
> 
> 赞同：0
> 
> 时间：2013-04-22T00:58:35.070
> 
> 标签：php

要使用 Peerindex API 计算用户分数，我下载了这个库：

```
https://github.com/nixilla/peerindex-api-consumer 
```

当我尝试实现位于库文件夹中的 example.php 文件时，我收到以下错误消息：

```
Fatal error: Class 'Buzz\Browser' not found in C:\xampp\htdocs\... 
```

过去有没有人遇到过这个问题？关于如何解决它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:16:03.303

该包用于[`composer`](http://getcomposer.org/)解决外部依赖关系。在执行示例之前，您必须执行以下步骤：

```
# download composer.phar
php -r "eval('?>'.file_get_contents('https://getcomposer.org/installer'));"
# install external deps
php ./composer.phar install
# update depencies (important)
php ./composer.phar update 
```

然后`example.php`在文本编辑器中打开并替换`YOUR_KEY_HERE`为您的 API 密钥。

现在您可以执行示例

```
php example.php 
```

# javascript - 乱码算法请帮忙

> ID：16137924
> 
> 赞同：0
> 
> 时间：2013-04-22T00:59:27.897
> 
> 标签：javascript, algorithm

我正在尝试制作简单的游戏，从数据库中加载单词（检查）

放入数组（检查）

然后他们一个接一个地被打乱并显示一个文本字段供用户输入。

在我看来，这听起来很简单，但我不知道如何打乱单词，换句话说，我如何处理字符串的单个字母。

我是java脚本的初学者，所以请轻轻地陪我^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:51:42.823

我对javascript不熟悉，所以我将用伪代码描述一个算法：

- 制作所有字母的列表/数组。

- 从 1 到 n（字母的数量）中随机选择一个数字，然后从列表中取出该字母。（请注意，您必须减去一个才能获得索引）。

- 从上一个列表中删除该字母并将该字母添加到新列表中。

- 冲洗并重复，直到旧列表中没有字母为止。

Sorta 相关，在 python 中（也许你可以把它翻译成 javascript？），一个可能的实现是

```
l = list(word)
newWord = ""
for i in xrange(len(word)):
    index = random.range(0, len(l))
    newWord = newWord + l.pop(index) 
```

# redis - 在 Redis 中存储 32 位有符号整数的内存有效方法

> ID：16137927
> 
> 赞同：9
> 
> 时间：2013-04-22T00:59:39.773
> 
> 标签：redis

由于 Redis 尝试将字符串解析为 64 位有符号整数，存储 32 位有符号整数的二进制表示而不是基数 10 整数字符串是一个好主意吗？

在我们的系统中，我们有许多 32 位有符号整数 ID 的列表。

```
I can store them like
lpush mykey 102450  --> redis cast 102450 to 8 bytes long

or store it like 
lpush mykey  \x00\x01\x19\x32  ---> this is just 4 bytes 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T04:17:23.557

在内部，Redis 以最有效的方式存储字符串。将整数强制转换为 radix 10 字符串实际上会占用更多内存。

这是 Redis 存储字符串的方式 -

1.  小于 10000 的整数存储在共享内存池中，并且没有任何内存开销。如果您愿意，可以通过更改[redis.h 中的常量 REDIS_SHARED_INTEGERS](https://github.com/antirez/redis/blob/unstable/src/redis.h#L82)并重新编译 Redis 来增加此限制。
2.  大于 10000 且在 long 范围内的整数占用 8 个字节。
3.  常规字符串采用 len(string) + 4 个字节作为长度 + 4 个字节用于标记可用空间 + 1 个字节作为空终止符 + 8 个字节作为 malloc 开销。

在您引用的示例中，它的问题是 8 个字节的长字符串和 21 个字节的字符串。

编辑 ：

> > 因此，如果我有一组数字都小于 10,000，Redis 如何存储我的集合？

这取决于你有多少元素。

如果您的集合中的元素少于 512 个（请参阅`set-max-intset-entries`参考资料），那么该集合将存储为一个 IntSet。IntSet 是有序整数数组的美名。由于您的数字小于 10000，因此每个元素将使用 16 位。它（几乎）与 C 数组一样具有内存效率。

如果您有超过 512 个元素，则该集合将成为一个 HashTable。集合中的每个元素都包装在一个名为 的结构中`robj`，该结构具有 16 个字节的开销。该`robj`结构有一个指向共享整数池的指针，因此您无需为整数本身支付任何额外费用。最后，`robj`实例存储在哈希表中，哈希表的开销与集合的大小成正比。

如果您对某个元素究竟消耗了多少内存感兴趣，请在您的数据集上运行[redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)（免责声明：我是该工具的作者）。或者你可以阅读[MemoryCallback](https://github.com/sripathikrishnan/redis-rdb-tools/blob/master/rdbtools/memprofiler.py#L80)类的源代码，注释解释了内存是如何布局的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:05:17.847

字符串是按长度存储的，所以它在数据库中不仅仅是 4 个字节——它可能存储为 4 个字节数据 + 4 个字节长度 + 填充，所以你什么也得不到。

# c# - 使用线程运行 COM 对象时 Excel 崩溃

> ID：16137935
> 
> 赞同：0
> 
> 时间：2013-04-22T01:00:26.810
> 
> 标签：c#, multithreading, vba, excel, com-object

运行 COM（自制）计时器时，我在 Excel 中遇到错误。基本上Excel实例化定时器，初始化它并启动它。然后计时器每 X 毫秒计时一次，引发 Excel 捕获的事件（非常标准的东西）。我没有将 Excel 本身用作计时器，因为它的滴答速度不会比每秒快（这对我来说太长了）

我的问题是，如果我在计时器引发事件时单击并按住电子表格，Excel 会严重崩溃。不幸的是，用户需要（有时）在电子表格中单击并在计时器运行时对其进行修改。

我在某个地方看到我可以在我的计时器中使用 IMessageFilter 接口。这应该确保如果在事件触发时 Excel 很忙，则计时器可以看到这一点并采取相应的行动。但是我无法正确实施它。

如果有人可以帮助我，那就太好了。

这是我正在使用的源代码：

在 Excel 中，我有一个带有 WithEvents ExcelTimer.ExcelTimer 对象的单例，这是我的单例的代码：

```
Option Explicit
Private Const m_sMODULE_NAME = "cTimerManager"

Public WithEvents oCsharpTimer As ExcelTimer.ExcelTimer

Private Sub Class_Initialize()
    Set oCsharpTimer = New ExcelTimer.ExcelTimer

    'The following two lines are called dynamically from somewhere else 
    'normally but for simplicity of my post I have put them here
    oCsharpTimer.Initialize 500  
    oCsharpTimer.StartTimer
End Sub

Private Sub oCsharpTimer_TimeTickEvt(ByVal o As Variant, ByVal Time As String)
    Const sPROCEDURE_NAME = "oCsharpTimer_TimeTickEvt"
    On Error GoTo ErrorHandler

    '"Send" confirmation with time to the COM object.
    oCsharpTimer.TimeReceived Time

    'Do whatever I wanna do when the event is trigger

CleanUp:
    Exit Sub

ErrorHandler:
    'My Error handling structure
    If ProcessError(m_sMODULE_NAME, sPROCEDURE_NAME, Err) Then
        Stop
        Resume
    Else
        Resume Next
    End If
End Sub 
```

这是我的 COM 对象的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace ExcelTimer
{
    public delegate void EventTimeRaiser(object o, string Time);

    //COM Interface
    public interface ICOMExcelTimer
    {
        [DispId(1)]        
        void StartTimer();
        [DispId(2)]
        void StopTimer();
        [DispId(3)]
        void Initialize(int TimeInMilliseconds);
        [DispId(4)]
        void TimeReceived(string ReceivedTime);
    }

    //Event interface 
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface ICOMExcelTimerEvent
    {
        [DispId(1000)]
        void TimeTickEvt(object o, string Time);
    }

    [ClassInterface(ClassInterfaceType.None),
    ComSourceInterfaces(typeof(ICOMExcelTimerEvent)),
    ComVisible(true)]
    public class ExcelTimer : ICOMExcelTimer, IMessageFilter
    {
        private event EventTimeRaiser TimeTickEvt;
        private bool _started;
        private bool _initialised;
        private int _timeInMilliseconds;
        private string _lastTimeReceived;
        private Control _control;
        private Thread _timerThread;
        private IAsyncResult _AsynchronousResult;

        [ComVisible(true)]
        public void Initialize(int TimeInMilliSeconds)
        {   
            //To be called by Excel to set which timer parameters it wants
            _timeInMilliseconds = TimeInMilliSeconds;
            _initialised = true;

            //Make sure we clear the last confirmation received 
            //since we are re-initialising the object
            _lastTimeReceived = ""; 
        }

        [ComVisible(true)]
        public void TimeReceived(string ReceivedTime)
        {
            //Store the last time received. Excel calls this function
            _lastTimeReceived = ReceivedTime;
        }

        public ExcelTimer()
        {
            _lastTimeReceived = "";
        }

        [ComVisible(true)]
        //Start the Timer
        public void StartTimer()
        {
            //If the timer has not been initialised just yet
            if (!_initialised)
            {
                //Sends back an error message to Excel
                TimeTickEvt(this, "Error: Timer Not Initialised");
                return;
            }

            try
            {
                //Start the timer
                _timerThread = new Thread(new ThreadStart(TimeTicking));

                //Start the Thread
                _started = true;
                _timerThread.Start();
            }
            catch (Exception ex)
            {
                System.IO.File.AppendAllText(@"C:\ErrorLog.txt", ex.Message + " - StartTimer - " + DateTime.Now.ToString("hh:mm:ss.f") + "\n");
            }
        }

        [ComVisible(true)]
        //Stop the timer
        public void StopTimer()
        {            
            //Stop the Thread
            _timerThread.Abort();
            //Change the status
            _started = false;
        }

        private void TimeTicking()
        {
            string SentTime;

            //As long as the timer is running
            while (_started)
            {
                try
                {
                    //Pause the timer for the right number of milliseconds

                    Thread.Sleep(_timeInMilliseconds);

                    SentTime = DateTime.Now.ToString("hh:mm:ss.ffff");

                    //########### The CODE Errors Here when Excel is busy!  ###########
                    //Raise an event for Excel to grab with the time that the thread finished the sleep at.
                    OnTimeTick(SentTime);

                    //_lastTimeReceived is used so that if the link between Excel and the Thread is broken the thread stops after sometimes
                    //if no confirmation was received from Excel.

                    //If no last time was received just yet, we setup the last time received to the sent time
                    if (_lastTimeReceived.Equals(""))
                    {
                        _lastTimeReceived = SentTime;
                    }
                    //If the last time received is older than 10 x TimeInMilliseconds (in Seconds) we stop the timer.
                    else if (Convert.ToDateTime(_lastTimeReceived).AddSeconds(_timeInMilliseconds * 10 / 1000) < Convert.ToDateTime(SentTime))
                    {
                        OnTimeTick("Timer timed out. No Confirmation for more than " + _timeInMilliseconds * 10 / 1000 + " second(s).");

                        //Stop the timer because the thread has not received a last time recently
                        _started = false;

                    }
                }
                catch (Exception ex)
                {
                    System.IO.File.AppendAllText(@"C:\ErrorLog.txt", ex.Message + " - TimeTicking - " + DateTime.Now.ToString("hh:mm:ss.f") + "\n");
                }

            }
        }

        protected virtual void OnTimeTick(string Time)
        {
            try
            {
                if (Time != null)
                {
                    //Raise the event
                    TimeTickEvt(this, Time);                    
                }
            }
            catch (Exception ex)
            {
                System.IO.File.AppendAllText(@"C:\ErrorLog.txt", ex.Message + " - OnTimeTick - " + DateTime.Now.ToString("hh:mm:ss.f") + "\n");
            }
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:36:28.497

I can't help you with the C# coding, but if you would prefer to use Excel and a timer with more precision than 1 second, this can be done in VBA:

`Public Declare Function timeBeginPeriod Lib "winmm.dll" (ByVal uPeriod As Long) As Long`

`Public Declare Function timeGetTime Lib "winmm.dll" () As Long`

You can then use the `timeGetTime` function from your subroutine to return the time in millisecond accuracy, if desired.

Credit where it's due:

[http://www.excelforum.com/excel-programming-vba-macros/738087-using-milliseconds-in-vba.html?p=2748931&viewfull=1#post2748931](http://www.excelforum.com/excel-programming-vba-macros/738087-using-milliseconds-in-vba.html?p=2748931&viewfull=1#post2748931)

# excel - Excel / VBA - 对单元格 A1 的更改反映在 B1 中，反之亦然（即双向更改）

> ID：16137940
> 
> 赞同：0
> 
> 时间：2013-04-22T01:02:25.523
> 
> 标签：excel, vba

假设您希望单元格 A1 和 B1 始终包含相同的值。如果用户只能修改A1，那么你只需要B1中的“=A1”。

如果您需要用户能够同时修改两者怎么办？

这只能通过 VBA 代码实现吗？如果它只能通过 VBA 实现，并且您需要以这种方式连接多个单元格，那么最易于维护的编码方式是什么？

似乎 Excel 假定您只想在一个地方修改一个值。如果您有大量令人生畏的数据表并且您希望在单独的选项卡中为它们提供更简单的视图，则这是有限制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:13:11.563

看起来只能通过 VBA 并利用编写代码来触发“更改”事件。此链接是一个论坛，有人提供示例代码片段。不幸的是，它要求您创建一个我不想这样做的帐户：

[http://www.excelforum.com/excel-general/686940-cell1-cell2-and-cell2-cell1.html?p=2107235&viewfull=1#post2107235](http://www.excelforum.com/excel-general/686940-cell1-cell2-and-cell2-cell1.html?p=2107235&viewfull=1#post2107235)

这里还有一个链接到有关更改事件的文档：

[http://msdn.microsoft.com/en-us/library/office/ff839775.aspx](http://msdn.microsoft.com/en-us/library/office/ff839775.aspx)

# python - 并行使用多个（python）客户端从 cassandra 加载所有行

> ID：16137944
> 
> 赞同：4
> 
> 时间：2013-04-22T01:03:26.560
> 
> 标签：python, parallel-processing, cassandra, pycassa, cql3

当使用 Cassandra 推荐的 RandomPartitioner（或 Murmur3Partitioner）时，不可能对键进行有意义的范围查询，因为行[使用键的 md5 散列分布在集群周围](http://wiki.apache.org/cassandra/Operations#Ring_management)。这些哈希称为“令牌”。

尽管如此，通过为每个计算工作者分配一系列令牌来在许多计算工作者之间拆分一个大表将非常有用。使用 CQL3，似乎可以[直接针对 tokens 发出查询](http://www.datastax.com/docs/1.2/cql_cli/using/paging)，但是以下 python~~不起作用~~...编辑：在切换到针对 cassandra 数据库的最新版本（doh！）进行测试后工作，并且还更新每个语法以下注释：

```
## use python cql module
import cql

## If running against an old version of Cassandra, this raises: 
## TApplicationException: Invalid method name: 'set_cql_version'
conn = cql.connect('localhost', cql_version='3.0.2')

cursor = conn.cursor()

try:
    ## remove the previous attempt to make this work
    cursor.execute('DROP KEYSPACE test;')
except Exception, exc:
    print exc

## make a keyspace and a simple table
cursor.execute("CREATE KEYSPACE test WITH strategy_class = 'SimpleStrategy' AND strategy_options:replication_factor = 1;")
cursor.execute("USE test;")
cursor.execute('CREATE TABLE data (k int PRIMARY KEY, v varchar);')

## put some data in the table -- must use single quotes around literals, not double quotes                                                                                                                                   
cursor.execute("INSERT INTO data (k, v) VALUES (0, 'a');")
cursor.execute("INSERT INTO data (k, v) VALUES (1, 'b');")
cursor.execute("INSERT INTO data (k, v) VALUES (2, 'c');")
cursor.execute("INSERT INTO data (k, v) VALUES (3, 'd');")

## split up the full range of tokens.
## Suppose there are 2**k workers:
k = 3 # --> eight workers
token_sub_range = 2**(127 - k)
worker_num = 2 # for example
start_token =    worker_num  * token_sub_range
end_token = (1 + worker_num) * token_sub_range

## put single quotes around the token strings
cql3_command = "SELECT k, v FROM data WHERE token(k) >= '%d' AND token(k) < '%d';" % (start_token, end_token)
print cql3_command

## this fails with "ProgrammingError: Bad Request: line 1:28 no viable alternative at input 'token'"
cursor.execute(cql3_command)

for row in cursor:
    print row

cursor.close()
conn.close() 
```

理想情况下，我希望使用 pycassa 来完成这项工作，因为我更喜欢它的 Pythonic 界面。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:42:56.427

我已更新问题以包含答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:24:51.110

它不是 CQL3，但这是一个简单的程序，可以直接使用 Thrift 接口读取 localhost 拥有的所有（腌制）数据。这可以用来构建一个简单的以 Cassandra 作为后端的 map/reduce 引擎。每个节点都会运行这样的东西来映射（）属于自己的数据，因此不会产生数据检索的网络开销。然后将结果传送回单独节点上的 reduce() 阶段。

显然，这不适用于 Cassandra1.2+ 中的 vnode。我现在使用索引方法来允许 map() 覆盖较小的本地数据子集并支持 vnode。

```
#!/usr/bin/env python2.7

import sys
import socket
import cPickle as pickle
from thrift import Thrift
from thrift.transport import TTransport
from thrift.transport import TSocket
from pycassa.cassandra import Cassandra
from pycassa.cassandra.ttypes import *
import time
import pprint

def main():
    jobname = sys.argv[1]
    pp = pprint.PrettyPrinter(indent=2)

    (client, transport) = connect("localhost")

    # Determine local IP address
    ip = socket.gethostbyname(socket.gethostname())

    # Set up query
    keyspace = "data"
    column_parent = ColumnParent(column_family=foo)

    try:
        # Find range of tokens for which this node is first replica
        for tokenrange in client.describe_ring(keyspace):
            if tokenrange.endpoints[0] == ip:
                start_token=tokenrange.start_token
                end_token=tokenrange.end_token
                break

        # Set kesypace
        client.set_keyspace(keyspace)

        # Query for all data owned by this node
        slice_range = SliceRange(start="", finish="")
        predicate = SlicePredicate(slice_range=slice_range)
        keyrange = KeyRange(start_token=start_token, end_token=end_token, count=10000)
        t0 = time.time()
        ptime = 0
        keycount = 0
        start=""
        for keyslice in client.get_range_slices(column_parent, predicate, keyrange, ConsistencyLevel.ONE):
            keycount += 1
            for col in keyslice.columns:
                pt0 = time.time()
                data = pickle.loads(col.column.value)
                ptime += time.time() - pt0
    except Thrift.TException, tx:
        print 'Thrift: %s' % tx.message
    finally:
        disconnect(transport)

    t1 = time.time() - t0
    print "Read data for %d tasks in: %.2gs" %(keycount, t1)
    print "Job unpickling time: %.2gs" %ptime
    print "Unpickling percentage: %.2f%%" %(ptime/t1*100)

def connect(host):
    """ 
    Connect to cassandra instance on given host.
    Returns: Cassandra.Client object
    """
    socket = TSocket.TSocket(host, 9160)
    transport = TTransport.TFramedTransport(socket)
    protocol = TBinaryProtocol.TBinaryProtocolAccelerated(transport)
    transport.open()
    client = Cassandra.Client(protocol) 
    return (client, transport)

def disconnect(transport):
    """ 
    Disconnect from cassandra instance
    """
    transport.close()

if __name__ == '__main__':
    main() 
```

# amazon-web-services - 将远程 MS SQL AWS RDS 数据库复制到本地开发机器？

> ID：16137947
> 
> 赞同：2
> 
> 时间：2013-04-22T01:03:56.023
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

谁能告诉我如何将我的 AWS RDS 数据库复制到我的本地开发机器上？有没有办法做到这一点？我正在使用 MS SQL，并且远程 RDS 实例是与 Elastic Beanstalk EC2 实例一起创建的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T07:49:31.403

没有办法做到这一点。AWS 删除了对底层文件系统的访问——因此您实际上无法复制数据库。亚马逊也不提供任何导出/导入功能。

我能提供的最佳建议是使用 SQL Server Management Studio 或等效的（即 RedGate SQL Compare）来执行此操作。

RedGate 提供试用产品——这就是我过去不得不这样做时使用的产品。

# android - 设置 EditText 值会导致重新测量和 UI 布局

> ID：16137948
> 
> 赞同：0
> 
> 时间：2013-04-22T01:03:56.327
> 
> 标签：android, android-ui

我有一个相当复杂的 UI - 很多视图和相当多的层次结构。我正在努力减少它，但我注意到一些非常奇怪的东西。

UI 是从一个支持模型更新的；当模型发生变化时，我会在后台线程中重新计算模型，然后在 UI 线程上，将更新后的模型传递给各个组件以重新显示它们的信息。传递模型并进行所有（例如）textview.setText 调用大约需要 200-300 毫秒。但是，在更新功能完成后，UI 实际上最多 5 秒内不会更新。

我使用 ddms 中的方法分析工具来查看发生了什么，看起来在更新完成后的几秒钟内正在进行大量的测量和布局调用 - 我在几个地方覆盖了 onLayout，它似乎甚至设置只有一个值会导致整个 UI 被重新测量和布局。

所以我的问题是这是否正常；我可以看到更新需要一些时间，但 5 秒似乎很长。应用程序启动时显示 UI 可能需要几秒钟，所以我想知道 UI 是否太复杂。这是在带有 Android 4.0.4 的 Galaxy Tab 10.1 上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T23:45:38.980

事实证明，layout_weight 可能非常昂贵。应用程序的主面板由同一个自定义视图的两个实例组成，使用 layout_weight 将其分成两半：

```
<LinearLayout ...>
    <CustomView 
        android:layout_height="match_parent"
        android:layout_width="0dp"
        android:layout_weight="1" />
    <CustomView 
        android:layout_height="match_parent"
        android:layout_width="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

我在整个应用程序中坚持了一些计时方法，并与层次结构查看器一起发现，在布局期间，对于每个对线性布局的 onMeasure 调用，onMeasure 在*每个*自定义视图上都被调用了 4 次。每个 onMeasure 调用大约需要 300-400 毫秒（正如我提到的，这是一个复杂的布局），这导致整个视图实际布局需要 3 秒以上。

任何时候视图发生变化（比如当编辑文本添加了一些文本）时，自定义视图的宽度都会根据权重进行更新。由于我只是使用权重来设置设备上的初始大小，并且每个自定义视图都无法调整其大小（因为它们都是屏幕宽度的一半），我删除了自定义视图上的 layout_weight 属性并添加了这对 onCreate 中的代码：

```
int halfScreenWidth = ...;
for(View v : new View[]{customViewA, customViewB})
{
    LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) v.getLayoutParams();
    lp.width = halfScreenWidth;
    v.setLayoutParams(lp);
} 
```

此更改将每个自定义视图的 onMeasure 调用次数从 4 次减少到 2 次，节省了大量资金。所以这里学到的教训是，如果视图在运行时不需要调整大小，最好在代码中计算宽度，而不是依赖 XML 中的 layout_weight。

# java - javafx 2 javascript api - 获取 java 控制器

> ID：16137952
> 
> 赞同：4
> 
> 时间：2013-04-22T01:04:53.680
> 
> 标签：java, javascript, javafx-2, fxml

我有一个 FXML 文件，其中包含许多我发送到普通控制器的控制器方法。但是，我最近添加了几个小处理程序，它们做非常琐碎的事情，并且想知道是否可以在 FXML 文件本身的 javascript 中执行它们。但是，我似乎遇到了一个问题：我找不到在 javascript 中获取控制器对象的文档化方法。如何在 javascript 中获取控制器对象？（不，我不能使用静态方法，因为我在很多对象上有很多这些控制器）

使用 Java 的当前代码：FXML 文件：

```
...
<GridPane fx:id="moveOverlay" onMouseClicked="#mouseOverlayClicked" ...>
.... 
```

和java控制器：

```
...
@FXML
private void mouseOverlayClicked(MouseEvent e)
{
    if (e.getClickCount() > 1)
    {
        this.enableNestedEditing();
    }
    else if (e.isControlDown())
    {
        this.selectSelf();
    }
}
... 
```

所需的 FXML：

```
...
<fx:script>
var controller = [what goes here?];

function mouseOverlayClicked(e) {
    if (e.getClickCount() > 1) {
        controller.enableNestedEditing();
    else if (e.isControlDown()) {
        controller.selectSelf();
}
</fx:script>
...
<GridPane fx:id="moveOverlay" onMouseClicked="mouseOverlayClicked" ...>
... 
```

并且java类中没有对应的事件处理程序（除了其他方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:34:28.707

很简单，`controller`已经在 fxml 的 javascript 部分中定义了。所以`var controller =`没有必要。

例子：

```
<?xml version="1.0" encoding="utf-8"?>

<?language javascript?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.Button?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="fxmltest.SomeController">
    <fx:script>
        function buttonClicked() {
          controller.print("hallo");
        }
    </fx:script>
    <children>
        <Button text="John Doe" onAction="buttonClicked()"/>
    </children>
</VBox> 
```

控制器：

```
package fxmltest;

import javafx.fxml.FXML;

public class SomeController {

  @FXML
  public void print(String s){
    System.out.println("from javascript: "+s);
  }
} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/TZsCy.png)

# c++ - 是否有在 C/C++ 中复制数组的函数？

> ID：16137953
> 
> 赞同：114
> 
> 时间：2013-04-22T01:05:04.660
> 
> 标签：c++, c, arrays

我是一名学习 C/C++ 的 Java 程序员。所以我知道Java有一个像 System.arraycopy(); 这样的函数。复制一个数组。我想知道 C 或 C++ 中是否有复制数组的函数。我只能通过使用 for 循环、指针等找到复制数组的实现。有没有可以用来复制数组的函数？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-04-22T01:12:27.543

既然您要求 C++ 解决方案...

```
#include <algorithm>
#include <iterator>

const int arr_size = 10;
some_type src[arr_size];
// ...
some_type dest[arr_size];
std::copy(std::begin(src), std::end(src), std::begin(dest)); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2013-04-22T01:12:48.347

从 C++11 开始，您可以使用以下命令直接复制数组`std::array`：

```
std::array<int,4> A = {10,20,30,40};
std::array<int,4> B = A; //copy array A into array B 
```

这是关于[std::array的文档](http://en.cppreference.com/w/cpp/container/array)

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2013-08-18T12:39:41.583

正如其他人所提到的，在 C 中你会使用`memcpy`. 但是请注意，这是一个原始内存副本，因此如果您的数据结构具有指向自身或彼此的指针，则副本中的指针仍将指向原始对象。

在 C++ 中，`memcpy`如果您的数组成员是 POD（即本质上您也可以在 C 中原样使用的类型），您也可以使用，但通常`memcpy`不允许*使用*。正如其他人提到的，要使用的功能是`std::copy`.

话虽如此，在 C++ 中你很少应该使用原始数组。相反，您应该使用其中一个标准容器（`std::vector`最接近内置数组，而且我认为最接近 Java 数组 - 确实比普通 C++ 数组更接近 - 但`std::deque`或者`std::list`在某些情况下可能更合适）或者，如果您使用 C++11，`std::array`它非常接近内置数组，但具有与其他 C++ 类型一样的值语义。我在这里提到的所有类型都可以通过赋值或复制构造来复制。此外，您可以使用迭代器语法从 opne“交叉复制”到另一个（甚至从内置数组）。

这给出了可能性的概述（我假设所有相关的标题都已包含在内）：

```
int main()
{
  // This works in C and C++
  int a[] = { 1, 2, 3, 4 };
  int b[4];
  memcpy(b, a, 4*sizeof(int)); // int is a POD

  // This is the preferred method to copy raw arrays in C++ and works with all types that can be copied:
  std::copy(a, a+4, b);

  // In C++11, you can also use this:
  std::copy(std::begin(a), std::end(a), std::begin(b));

  // use of vectors
  std::vector<int> va(a, a+4); // copies the content of a into the vector
  std::vector<int> vb = va;    // vb is a copy of va

  // this initialization is only valid in C++11:
  std::vector<int> vc { 5, 6, 7, 8 }; // note: no equal sign!

  // assign vc to vb (valid in all standardized versions of C++)
  vb = vc;

  //alternative assignment, works also if both container types are different
  vb.assign(vc.begin(), vc.end());

  std::vector<int> vd; // an *empty* vector

  // you also can use std::copy with vectors
  // Since vd is empty, we need a `back_inserter`, to create new elements:
  std::copy(va.begin(), va.end(), std::back_inserter(vd));

  // copy from array a to vector vd:
  // now vd already contains four elements, so this new copy doesn't need to
  // create elements, we just overwrite the existing ones.
  std::copy(a, a+4, vd.begin());

  // C++11 only: Define a `std::array`:
  std::array<int, 4> sa = { 9, 10, 11, 12 };

  // create a copy:
  std::array<int, 4> sb = sa;

  // assign the array:
  sb = sa;
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-04-22T01:12:34.910

`memcpy`在 C、`std::copy`C++ 中使用。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2013-04-22T01:09:49.457

您可以使用`memcpy()`,

```
void * memcpy ( void * destination, const void * source, size_t num ); 
```

`memcpy()``num`将字节的值从 指向的位置直接复制到指向`source`的内存块`destination`。

如果`destination`和`source`重叠，那么您可以使用`memmove()`.

```
void * memmove ( void * destination, const void * source, size_t num ); 
```

`memmove()``num`将字节的值从 指向的位置复制到指向`source`的内存块`destination`。复制就像使用中间缓冲区一样进行，允许目标和源重叠。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-07-18T08:50:30.337

我喜欢 Ed S. 的答案，但这仅适用于固定大小的数组，而不适用于将数组定义为指针的情况。

因此，将数组定义为指针的 C++ 解决方案：

```
#include<algorithm>
...
const int bufferSize = 10;
char* origArray, newArray;
std::copy(origArray, origArray + bufferSize, newArray); 
```

**注**：无需扣除`buffersize`1：

> 1.  复制范围 [first, last) 中的所有元素，从 first 开始，一直到 last - 1

请参阅：[https ://en.cppreference.com/w/cpp/algorithm/copy](https://en.cppreference.com/w/cpp/algorithm/copy)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2013-04-22T01:12:53.580

在 C 中，您可以使用`memcpy`. 在 C++`std::copy`中从头文件中使用`<algorithm>`。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-05-31T04:47:47.383

只需在您的代码中包含标准库即可。

```
#include<algorithm> 
```

数组大小将表示为`n`

你的旧数组

```
int oldArray[n]={10,20,30,40,50}; 
```

声明新数组，您必须在其中复制旧数组值

```
int newArray[n]; 
```

用这个

```
copy_n(oldArray,n,newArray); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-12-09T19:08:56.357

在 C++11 中，您可以使用`Copy()`适用于标准容器的

```
template <typename Container1, typename Container2>
auto Copy(Container1& c1, Container2& c2)
    -> decltype(c2.begin())
{
    auto it1 = std::begin(c1);
    auto it2 = std::begin(c2);

    while (it1 != std::end(c1)) {
        *it2++ = *it1++;
    }
    return it2;
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-02T16:59:41.000

我在这里给出了 2 种处理数组的方法，用于 C 和 C++ 语言。[memcpy](http://www.cplusplus.com/reference/cstring/memcpy/)和[copy](http://www.cplusplus.com/reference/algorithm/copy/)都可以在 C++ 上使用，但是**copy**不能用于 C，如果你想在 C 中复制数组，你必须使用**memcpy 。**

```
#include <stdio.h>
#include <iostream>
#include <algorithm> // for using copy (library function)
#include <string.h> // for using memcpy (library function)

int main(){

    int arr[] = {1, 1, 2, 2, 3, 3};
    int brr[100];

    int len = sizeof(arr)/sizeof(*arr); // finding size of arr (array)

    std:: copy(arr, arr+len, brr); // which will work on C++ only (you have to use #include <algorithm>
    memcpy(brr, arr, len*(sizeof(int))); // which will work on both C and C++

    for(int i=0; i<len; i++){ // Printing brr (array).
        std:: cout << brr[i] << " ";
    }

    return 0;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-06T23:04:27.573

首先，由于您正在切换到 C++，因此建议使用**vector而不是传统的****array**。此外，复制数组或向量`std::copy`是您的最佳选择。

访问此页面以获取如何使用复制功能：[http ://en.cppreference.com/w/cpp/algorithm/copy](http://en.cppreference.com/w/cpp/algorithm/copy)

例子：

```
std::vector<int> source_vector;
source_vector.push_back(1);
source_vector.push_back(2);
source_vector.push_back(3);
std::vector<int> dest_vector(source_vector.size());
std::copy(source_vector.begin(), source_vector.end(), dest_vector.begin()); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-11-17T15:02:16.450

尝试这个 ：

1.  创建一个空数组。
2.  插入元素。
3.  创建一个相同大小的重复空数组。
4.  开始为`i=0`i=数组长度。
    5\. `newarray[i]=oldarray[i]` （仅适用于 C++）

C++程序

```
#include<iostream>
using namespace std;
int main()
{
        int initA[100],finA[100],i,size;
        cout<<"Input the size of the array : ";
        cin>>size;
        cout<<"Input the elements of the first array";
        for(i=0;i<size;i++)
        {
               cin>>initA[i];
        }
        for(i=0;i<size;i++)
        {
             finA[i]=initA[i];
        }
        cout<<"The final array is\n";
        for(i=0;i<size;i++)
               cout<<finA[i]<<" ";
        return 0;
} 
```

# ios - 我将如何制作一个三列的选择器视图，其中第 1 列中的选择，更新第 2 列中的条目等等

> ID：16137955
> 
> 赞同：0
> 
> 时间：2013-04-22T01:05:25.637
> 
> 标签：ios, objective-c, uipickerview

我正在尝试制作一个包含三列的扑克选择器视图。在每一列中，我都有标准的卡片列表，每张卡片代表一行。如果我在最左列选择“红心王牌”，那么下一列将是标准列表，不包括“红心王牌”。如果我在第二列中选择“梅花 3”，则第三栏将包含标准列表，不包括“红心王牌”和“梅花 3”

有人可以告诉我该怎么做吗？

我当前的代码仅适用于一列，所有三列代表一列，因此不方便发布。

我正在使用`NSArray`默认列表，并且还使用`UIActionSheet`.

```
self.myPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 43 , 320, 480)];
self.myPickerView.delegate = self;
self.myPickerView.dataSource = self;
[self.myPickerView setShowsSelectionIndicator:YES];

// Create done button in UIPickerView
self.myPickerViewToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 56)];
//  self.myPickerViewToolBar.barStyle = UIBarStyleBlackOpaque;
[self.myPickerViewToolBar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];
UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
[barItems addObject:flexSpace];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked)];
[barItems addObject:doneBtn];

[self.myPickerViewToolBar setItems:barItems animated:YES];
self.sheet = [[UIActionSheet alloc] initWithTitle:nil
                                         delegate:self
                                cancelButtonTitle:@"Done"
                           destructiveButtonTitle:nil
                                otherButtonTitles:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:51:56.727

我认为你可以使用 UICollectionViewController 来做到这一点。

这就像使用 UITableView 一样简单。

以下链接可能对您有用。

[http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:13:24.477

您需要使用 3 列设置选择器。您需要为每列创建 3 个单独的数组。

然后，您需要实现用于处理行选择的委托方法。如果选定的行用于第一个组件，那么您需要更新第二个和第三个数组以包含除选定对象之外的所有卡片。然后告诉选择器重新加载第二个和第三个组件。

在处理第二个组件的选定行时，您需要更新第三个组件的数组以包括除其他两个选定卡之外的所有卡。然后重新加载第三个组件。

# c++ - 如何计算以下struct占用的内存空间？

> ID：16137956
> 
> 赞同：0
> 
> 时间：2013-04-22T01:05:29.727
> 
> 标签：c++, memory, struct

我需要创建一个结构的内存模型，我需要找到在声明时为结构分配了多少内存。

```
struct student {       
        int Roll_no,age;
        float average;
        float grade;     
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:09:04.987

除非我误解了你，否则内置的`sizeof`运算符/函数会做你想要的：

```
size_t size_of_student_in_bytes = sizeof(student); 
```

# java - 保持 SocketServer 处于活动状态，直到 Frame 关闭

> ID：16137959
> 
> 赞同：0
> 
> 时间：2013-04-22T01:05:33.643
> 
> 标签：java, sockets

我想要实现的是，使用我的程序，用户可以根据需要多次上传文件，当他们单击关闭按钮时，我想关闭或终止套接字连接，但是当我再次运行 GUI 时即使我还没有开始连接，它仍然存在。

```
while (true) { // >>>>>>>HERE IS MY PROBLEM<<<<<<<
    try{
    connectionSocket = welcomeSocket.accept();

    inFromClient = new BufferedReader(new InputStreamReader(
            connectionSocket.getInputStream()));

    outToClient = new DataOutputStream(
            connectionSocket.getOutputStream());

                 //Do something here.....
    }catch(IOException e){ }
} 
```

因此，如果我保持 while(true) 连接将保持活动状态，但即使当我关闭 Frame 时，它​​仍然在连接。

我在这里关闭了窗口的@Override 方法

```
 frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent b) {

            if(socket != null){
            try {
                socket = new Socket(hostIP, port);
            } catch (UnknownHostException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            }
            try {
              if (socket != null) {
               socket.close();
                socket = null;
                 }
                }
            catch (IOException e) { socket = null; }

            ftoc.dispose();

        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:15:06.590

你有几个选择...

在您的套接字循环中创建一个“转义”标志，可以在外部触发（例如为假）。将 a 添加`WindowListener`到框架并`windowClosing`翻转标志并中断线程。这将允许循环终止。

您也可以尝试在守护线程中设置服务器套接字，但我怀疑这不会起作用，因为服务器套接字的阻塞操作可能不在乎。

**更新了示例**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestSocket {

    private SocketThread socketThread;

    public static void main(String[] args) {
        new TestSocket();
    }

    public TestSocket() {
        socketThread = new SocketThread();
        socketThread.start();
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new JLabel("Close me if you dare"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosing(WindowEvent e) {
                        socketThread.stopThatSocket();
                    }
                });
            }
        });
    }

    public class SocketThread extends Thread {

        private volatile boolean flagToSetWhenYouWantToStop = true;
        private ServerSocket socket = null;

        public SocketThread() {
            setName("Socket");
            setDaemon(true);
        }

        public void stopThatSocket() {
            flagToSetWhenYouWantToStop = false;
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException ex) {
                }
            }
            interrupt();
            try {
                join();
            } catch (InterruptedException ex) {
            }
        }

        @Override
        public void run() {

            try {
                socket = new ServerSocket(1234);
                while (flagToSetWhenYouWantToStop) {
                    Socket accept = socket.accept();
                }
            } catch (IOException exp) {
                exp.printStackTrace();
            }
        }
    }
} 
```

**更新了简单的套接字命令示例**

此示例基本通过套接字进行通信以告诉服务器它应该关闭...

```
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.net.SocketFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestSocket {

    private SocketThread socketThread;

    public static void main(String[] args) {
        new TestSocket();
    }

    public TestSocket() {
        socketThread = new SocketThread();
        socketThread.start();
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new JLabel("Close me if you dare"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                frame.addWindowListener(new WindowAdapter() {
                    @Override
                    public void windowClosing(WindowEvent e) {
//                        socketThread.stopThatSocket();
                        Socket socket = null;

                        try {
                            socket = SocketFactory.getDefault().createSocket("localhost", 1234);

                            BufferedWriter bw = null;
                            try {
                                bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
                                System.out.println("Out-Cmd = STOP");
                                bw.write("stop");
                                bw.newLine();
                            } finally {
                                try {
                                    bw.close();
                                } catch (Exception exp) {
                                }
                            }
                        } catch (IOException ex) {
                            ex.printStackTrace();
                        } finally {
                            try {
                                socket.close();
                            } catch (Exception exp) {
                            }
                        }
                    }
                });
            }
        });
    }

    public class SocketThread extends Thread {

        private volatile boolean flagToSetWhenYouWantToStop = true;
        private ServerSocket socket = null;

        public SocketThread() {
            setName("Socket");
            setDaemon(true);
        }

        public void stopThatSocket() {
            flagToSetWhenYouWantToStop = false;
            if (socket != null) {
                try {
                    socket.close();
                } catch (IOException ex) {
                }
            }
            interrupt();
            try {
                join();
            } catch (InterruptedException ex) {
            }
        }

        @Override
        public void run() {

            try {
                socket = new ServerSocket(1234);
                while (flagToSetWhenYouWantToStop) {
                    Socket accept = socket.accept();
                    /**
                     * Normally I would have a command processor take care of this,
                     * read in the command and then terminate the server thread by
                     * calling stopThatSocket...
                     */
                    BufferedReader br = null;
                    try {
                        br = new BufferedReader(new InputStreamReader(accept.getInputStream()));
                        String cmd = br.readLine();
                        System.out.println("In-Cmd = " + cmd);
                        if (cmd.equalsIgnoreCase("stop")) {
                            stopThatSocket();
                        }
                    } finally {
                        try {
                            br.close();
                        } catch (Exception e) {
                        }
                    }
                }
            } catch (IOException exp) {
                exp.printStackTrace();
            }
        }
    }
} 
```

# google-app-engine - 查询 GAE 数据存储时如何修复索引错误？

> ID：16137960
> 
> 赞同：8
> 
> 时间：2013-04-22T01:05:38.880
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

当我尝试在按日期排序的数据存储上运行查询时，出现以下错误：

```
NeedIndexError: no matching index found.
The suggested index for this query is:

- kind: Message
  properties:
  - name: author
  - name: ref
  - name: date 
```

如果我不尝试按日期订购，则查询运行不会出错。数据存储索引下的 appengine 控制台说：

```
author ▲ , ref ▲ , date ▼   
Serving 
```

我究竟做错了什么？如何运行按日期排序的查询？谢谢！

这是我的实体定义：

```
from google.appengine.ext import ndb

class Message(ndb.Model):
    subject = ndb.StringProperty()
    body = ndb.TextProperty()
    date = ndb.DateTimeProperty(auto_now_add=True)
    ref = ndb.StringProperty( required=True )
    author = ndb.KeyProperty(required=True) 
```

这是失败的查询：

```
def readMessages( ref, user = None ):
    query = Message.query()
    query = query.filter(Message.ref == ref )
    if user:
        query = query.filter(Message.author == user.key )
    query = query.order(Message.date)

# convert to a list so we can index like an array
return [ message for message in query ] 
```

我的 index.yaml 包含：

```
indexes:

- kind: Message
  properties:
  - name: author
  - name: ref
  - name: date
    direction: desc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:27:32.580

您还需要指定“方向”，因为“排序”是在编写索引以加快 Google 风格的速度时完成的。

所以，你的 index.yaml 应该是这样的：

```
indexes:

- kind: Message
  properties:
  - name: author
  - name: ref
  - name: date
    direction: desc 
```

这是谷歌关于订单的官方描述：

> 排序的方向，asc 表示升序，desc 表示降序。这仅对查询的排序顺序中使用的属性是必需的，并且必须与查询使用的方向相匹配。默认值为升序。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T03:53:14.423

谢谢劳伦斯，你让我走上了正确的道路——我想我已经找到了答案。查询必须与索引定义完全匹配。

我通过在数据存储管理框中尝试不同的 GQL 查询发现了这一点。

例如，以下 2 个查询：

```
SELECT * FROM Message where ref='' and author='' order by date 
SELECT * FROM Message where ref='' and author='' order by date asc 
```

两者都失败了：

```
no matching index found.

The suggested index for this query is:
- kind: Message
  properties:
  - name: author
  - name: ref
  - name: date 
```

然而，

```
SELECT * FROM Message where ref='' and author='' order by date desc 
```

成功。同样，参数少于索引包含的查询也会失败，例如：

```
SELECT * FROM Message where ref='' order by date DESC 
```

失败：

```
no matching index found.

The suggested index for this query is:
- kind: Message
  properties:
  - name: ref
  - name: date
    direction: desc 
```

所以问题出在我的查询中，这行：

```
query = query.order(Message.date) 
```

实际上是按升序排序，但我的索引显示的是 DESCENDING 顺序。修复方法是：

```
query = query.order(-Message.date) 
```

# java - 从 OnClickListener Android 打开一个 URL

> ID：16137964
> 
> 赞同：0
> 
> 时间：2013-04-22T01:06:27.680
> 
> 标签：java, android, url, webview, onclicklistener

我正在尝试从 Android 中的一个按钮打开一个网页，但无法让它正常工作。我找到了一个看起来非常简单的教程，但诀窍是我试图显示一个从另一个活动类中创建的对象中获取的 url。我使用的代码是标准的 OnClickListener：

```
private void addListeneronButton() {
    // TODO Auto-generated method stub
    button1 = (Button) findViewById(R.id.stationHistory);

    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

          Intent browserIntent = 
                        new Intent(Intent.ACTION_VIEW, Uri.parse(//need help here));
            startActivity(browserIntent);

        } 
```

该项目正在读取气象站列表。我有一个带有适当的 getter/setter 的 Station 类，所以 Url 已经存储了。我只是不知道从这里访问的适当命令。我认为它会像 Uri.parse(station.get_url) 一样简单，但它只会提示我创建局部变量......有人有什么建议吗？

```
<station>
    <station_id>NFNA</station_id>
    <state>FJ</state>
    <station_name>Nausori</station_name>
    <latitude>-18.05</latitude>
    <longitude>178.567</longitude>
    <html_url>http://weather.noaa.gov/weather/current/NFNA.html</html_url>
    <rss_url>http://weather.gov/xml/current_obs/NFNA.rss</rss_url>
    <xml_url>http://weather.gov/xml/current_obs/NFNA.xml</xml_url>
</station>

<station>
    <station_id>KCEW</station_id>
    <state>FL</state>
            <station_name>Crestview, Sikes Airport</station_name>
    <latitude>30.79</latitude>
    <longitude>-86.52</longitude>
            <html_url>http://weather.noaa.gov/weather/current/KCEW.html</html_url>
            <rss_url>http://weather.gov/xml/current_obs/KCEW.rss</rss_url>
            <xml_url>http://weather.gov/xml/current_obs/KCEW.xml</xml_url>
</station>

<station>
    <station_id>KDTS</station_id>
    <state>FL</state>
            <station_name>Destin, Ft. Walton Beach Airport</station_name>
    <latitude>30.4</latitude>
    <longitude>-86.47</longitude>
            <html_url>http://weather.noaa.gov/weather/current/KDTS.html</html_url>
            <rss_url>http://weather.gov/xml/current_obs/KDTS.rss</rss_url>
            <xml_url>http://weather.gov/xml/current_obs/KDTS.xml</xml_url>
</station> 
```

我将这些解析为带有构造函数/获取器/设置器的站类。从先前的活动中，用户选择这些站之一。在下一个活动中，它会显示此 xml 中的名称、id 等元素。但现在我想从一个按钮打开电台网址，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:56:27.420

我想我明白你说的是现在的问题，虽然你真的没有说得很清楚。你有这个

```
private void addListeneronButton() {
// TODO Auto-generated method stub
button1 = (Button) findViewById(R.id.stationHistory);

button1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

      Intent browserIntent = 
                    new Intent(Intent.ACTION_VIEW, Uri.parse(station.get_url);
        startActivity(browserIntent);

    } 
```

它告诉你这`station.get_url`不是一个变量，所以你需要创建一个。如果它是一种方法，`get_url`应该是。`get_url()`如果您的班级是`Station`（大写“S”），那么您可以使用`Station.get_url()`. 但是，您可能需要传入某个参数来告诉它要获取哪个 url。这是假设它是一种`static`方法。如果不是，那么您需要创建`Station`该类的一个实例并调用该方法

```
Station myStation = new Station();  //pass parameters here to constructor as needed
String address = myStation.get_url();  // object 
```

然后你可以`address`在你的`Intent`.

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(address));
 startActivity(browserIntent); 
```

如果`http://`没有与 url 一起传回，则必须在使用它之前附加它`Intent`，正如 wangyif2 已经说明的那样。我希望这是有道理的，但这是我能用所提供的信息做的最好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:17:05.773

在进行 URI 解析时，尝试将 http:// 放在字符串之前：

```
private void addListeneronButton() {
   button1 = (Button) findViewById(R.id.stationHistory);
   button1.setOnClickListener(new OnClickListener() {
       @Override
       public void onClick(View arg0) {
           Intent browserIntent = new Intent(Intent.ACTION_VIEW,
             Uri.parse(Station.getHtmlUrl("NFNA"));
           startActivity(browserIntent);
       }
} 
```

车站等级：

```
public static String getHtmlUrl(String station) { 
    //return the full URL here based on station 
    //eg. "http://weather.noaa.gov/weather/current/NFNA.html"
} 
```

# javascript - For 循环不创建 Div

> ID：16137965
> 
> 赞同：0
> 
> 时间：2013-04-22T01:06:39.010
> 
> 标签：javascript, html

我正在尝试使用 for 循环动态创建多个 div。此代码没有给出任何结果。我的期望是它可以创建带有 id a1、a2、a3 等的单独 div。谁能解释为什么它不这样做？我知道在 SO 上还有其他解决方案，但这对我来说是一次学习经历，我想知道为什么我的解决方案不起作用。

```
function createDiv(divid,divcontent){
  this.div = document.createElement("div");
  this.div.setAttribute("id",divid);
  this.div.innerHTML = divcontent;
}

var keys = [1,2,3,4,5,6,7,8,9,0];
for (i=0; i<keys.length;i++){
    createDiv("a"+i,i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T01:08:55.720

您必须将节点附加到文档中的父节点 - 现有 - 节点以使其显示。像这样：

```
function createDiv(divid,divcontent){
  this.div = document.createElement("div");
  this.div.setAttribute("id",divid);
  this.div.innerHTML = divcontent;

  var parent = document.getElementById('mydiv');
  parent.appendChild(this.div);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:09:07.860

您需要将您的附加`div`到现有的 html 元素。

```
document.getElementById("yourHtmlElementId").appendChild(this.div); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:10:23.820

您的函数仅创建`div`您必须将其添加到 DOM

```
function createDiv(divid,divcontent){
  this.div = document.createElement("div");
  this.div.setAttribute("id",divid);
  this.div.innerHTML = divcontent;
}

var keys = [1,2,3,4,5,6,7,8,9,0];
for (i=0; i<keys.length;i++){
    var newDiv = createDiv("a"+i,i); //Store the div you just created here
    document.getElementById('yourdivcontainer').appendChild(newDiv); //And add it to the DOM
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T01:36:39.577

```
function createDiv(id, content){
  var div = document.createElement('div');
  div.setAttribute("id",id);
  div.innerHTML = content;
  return div;
}
var $parent = $('#parentDiv'); // get parent div
$parent.append(createDiv("a"+i,i)); 
```

# javascript - 使用对象函数的全局回调

> ID：16137968
> 
> 赞同：0
> 
> 时间：2013-04-22T01:07:39.077
> 
> 标签：javascript, api, backbone.js

我正在集成一个 Api，它具有调用必须在全局空间中的函数的事件。我正在使用主干来定义响应这些回调的视图和模型，这将是绑定该回调以便它调用模型实例中的函数的最佳方法，例如：获取类似这样的**实例**

```
 Model.extend({
       thisIsTheApiCallback: function() {
            //DO WORK
       }
  }) ; 
```

在页面中表现得像这个脚本

```
<script language="JavaScript" type="text/javascript">
   function thisIsTheApiCallback() {
         //DO WORK
   }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:05:48.607

如果希望模型间接监听全局回调，可以使用 Backbone 转发事件。请记住，`doSomething`当调用全局回调时，您创建的模型的每个实例都会被调用。

```
// global callback function
function thisIsTheApiCallback() {
         Backbone.trigger('foo');
   }

// MyModel doesn't need to know about the global callback.
var MyModel = Model.extend({
       initialize:function(){
           this.listenTo(Backbone, 'foo', this.doSomething);
       },

       doSomething: function() {
            //DO WORK
       }
  }) ; 
```

# java - 如何以一种很好的方式从封闭类的公共嵌套类的实例访问封闭类变量？

> ID：16137972
> 
> 赞同：0
> 
> 时间：2013-04-22T01:08:56.130
> 
> 标签：java, class, inner-classes

考虑以下 java 中的代码示例：

```
 public class Packet {

    protected int offset = 0;
    public int type;

    public Packet() {
        // This is the backward out-constructor. Every sub class must call its superior classes .new () to live!
        offset++; // For type
    }

    int[] compile(int[] outBuffer) {
        // This is the top-down compilation routine. Every sub class should call its superior compile() in a similar manner, as recursion is only possible this way!
        int dOffset = offset;
        outBuffer[--offset] = this.type;
        int[] result = outBuffer;
        offset = dOffset;
        return result;
    }

    public class Command {

        public int opCode;
        public int length;

        public Command() {
            // OpCode and length are set by sub-classes!
            type = 0x01;
            offset += 3;
            length = 0; // Init only
        }

        int[] compile(int[] outBuffer) {
            int dOffset = offset;
            offset -= 3;
            outBuffer[offset] = opCode & 0xFF;
            outBuffer[offset + 1] = (opCode >>> 8) & 0xFF;
            outBuffer[offset + 2] = length;
            int[] result = Packet.this.compile(outBuffer);
            offset = dOffset;
            return result;
        }

        public class HWCommand {
            // And so on... 8 more nesting levels in my project
        }

    }

    public Packet(int[] data) {
        // This is the forward in-constructor.
        if (data.length > 0) {
            type = data[offset++];
        }
    }

    public class Event {
        // ...
    }
} 
```

我目前正在使用这样的结构，它有大约 9 到 10 级这种嵌套来解码一个可笑的复杂协议的数据包，我对此没有任何影响，对此我深表遗憾。到目前为止它运行良好，目前只有我的任务是使其适应某种架构。

有时，当通过该协议连接的另一端的计算机尚未准备好接收新的命令数据包时，因为它仍在忙于处理最后一个命令数据包，因为纯粹的处理是如此痛苦，它会拒绝我的数据包并通知我使用 OpCode 和一些相当不相关的属性。

正确的反应方法是等待随机时间并重试发送该命令。

现在，当我只有一个 Packet.Command.HWCommand 实例时，我想要一种访问例如 Packet.Command 的 OpCode 变量的方法。... .子类 sp; - 所以我可以有一个带有 OpCodes 和 Comands 的关联 HashMap，只需抓住那些没有通过成功消息确认的那些，然后重新发送它们。

我已经考虑过：

1.  实现 getter 和 setter（对我来说似乎不是一个好主意）
2.  保留对从中实例化 SubClass 的 Packet.Command 的引用（可以正常工作，但需要更改 10k+ 行代码，因为那些发送例程被大量使用）
3.  泄漏 this$0 参考。通过 getter（例如创建一个 parent() 函数）
4.  保存最后发送的数据包的原始数据，将其重新解析为那个海量的协议数据结构，然后重新发送（似乎……对我来说*有点奇怪*）

其中哪一个是最好的方法，或者我不知道有更好的方法吗？

# google-mirror-api - 如何将消息直接发送到我的应用程序？

> ID：16137974
> 
> 赞同：7
> 
> 时间：2013-04-22T01:09:02.897
> 
> 标签：google-mirror-api

我的应用程序添加了一个共享联系人，我启用了它。我可以将图片分享到我的应用程序，但我无法向我的应用程序发送消息，因为联系人没有显示在“ok glass，将消息发送到...”列表中。

有什么方法可以让我的应用成为“我可以向其发送消息的真实联系人”？如果没有，向我的应用程序发送消息的最简单方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T03:49:56.833

# 当前选项

## 通过 API

您可以创建时间线项目并将回复菜单项添加到该时间线。在收到带有时间线 ID 的通知后，您应该能够让您的应用获取该时间线项目。从该时间线 ID，您可以获取包括音频文件和转录内容在内的附件。

以下是新时间线项目的正文示例：

```
{
 "text": "Hello world",
 "menuItems": [
   { "action": "REPLY" }]
} 
```

要查看示例响应，请查看[时间线参考](https://developers.google.com/glass/v1/reference/timeline#resource)页面。

## 更有创意的方法

您可以做的是创建[Twilio](http://twilio.com)帐户以创建一个可以向其发送 txt 消息的号码。然后，您可以让您的应用程序与文本消息的正文进行交互。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T04:01:57.810

目前，Mirror API 不支持此功能。

问题跟踪器中有一个[非常相似的功能请求](https://code.google.com/p/google-glass-api/issues/detail?id=6)。我建议您在此处添加您的反馈并为问题加注星标，以便在更新时通知您。

# ios - UIActivityViewController 推特长度

> ID：16137980
> 
> 赞同：1
> 
> 时间：2013-04-22T01:10:15.677
> 
> 标签：ios, facebook, twitter, uiactivityviewcontroller

Twitter 有一定的长度限制。Facebook允许更长的长度。

如果 twitter 的长度太长，活动窗口会显示为空白。

如何设置特定于 twitter 和 Facebook 的活动项目？

我想在 facebook 上发布最多 200 个字符，并限制 twitter 足以发布。

任何建议表示赞赏。

# jquery-ui - Draggable inside resizable - 不显示拖动项

> ID：16137982
> 
> 赞同：0
> 
> 时间：2013-04-22T01:10:24.510
> 
> 标签：jquery-ui, draggable, resizable

我一直在尝试让一个基本的拖放界面工作。我让它使用一组 div 工作，但是当我将 div 更改为可调整大小的手风琴时，我发现当我移动到可调整大小的 div 的边界之外时，图像将不会显示。光标保持不变，拖动项目的图像似乎绘制在可调整大小的 div 上。当光标离开手风琴时，您可以看到滚动条移动。放置操作“似乎”按预期被拾取。唯一的问题是保留拖动项目的可见性。我试过`zIndex`没有效果。

我会包含显示效果的图像和示例代码，但我没有 10 的声誉来发布图像。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link rel="stylesheet" href="../themes/base/jquery.ui.all.css">
    <script src="./jquery-1.8.3.js"></script>
    <script src="../ui/jquery.ui.core.js"></script>
    <script src="../ui/jquery.ui.widget.js"></script>
    <script src="../ui/jquery.ui.mouse.js"></script>
    <script src="../ui/jquery.ui.resizable.js"></script>
    <script src="../ui/jquery.ui.accordion.js"></script>
    <script src="../ui/jquery.ui.draggable.js"></script>
    <script src="../ui/jquery.ui.droppable.js"></script>
    <link rel="stylesheet" href="./mainDemo.css">
    <style>
    #accordion-resizer {
        padding: 10px;
        width: 100px;
        height: 400px;
    }
    </style>
    <script>
    $(function() {
        $( "#accordion" ).accordion({
            heightStyle: "fill"
        });
    });
    $(function() {
        $( "#accordion-resizer" ).resizable({
            minHeight: 140,
            minWidth: 50,
            resize: function() {
                $( "#accordion" ).accordion( "refresh" );
            }
        });
    });
    </script>
    <script type="text/javascript">
        $(init);
        function init() {
             $('#cardPile').html('');
            var numbers = [ 'test a ','test b', 'test c' ];
            for (var i = 0; i < 3; i++) {
                createItem(numbers[i], '#baseWidgets', ['#content','#selection'], '#baseWidgets div' );
            }
             $('#displayCanvas').droppable({
             accept: '#baseWidgets div',
             hoverClass: 'hovered',
             drop:handleCardDrop
             });
        }
        function createItem( title, parent, container, stack )
        {
            var el = '<div>' + title + '</div>';
            var $div = $(el).data('number', title).attr('id', 'card' + title).appendTo(parent).draggable({
              containment: ['displayCanvas','content'],
                stack: stack,
                cursor: 'move',
                zIndex:1000,
                scroll: false,
                revert: true
            });
          }
        function handleCardDrop(event, ui) {
        }
    </script>
</head>
<body>
    <div id="content">
        <div id="accordion-resizer" >
            <div id="accordion">
                <h3>Basic</h3>

                <div id ="selection" >
                    <div id="baseWidgets"> </div>
                </div>
                <h3>Advanced</h3>
                <div>
                    <p>Some data</p>
                </div>
            </div>
        </div>
        <div id="displayCanvas">
        </div>
    </div>
</body>
</html>

body {
    font-size: 62.5%;
    font-family: "Trebuchet MS", "Arial", "Helvetica", "Verdana", "sans-serif";
}

table {
    font-size: 1em;
}

#selection {
    margin: 2px 2px;
    position: relative;
    vertical-align: middle;
    text-align: center;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    border-radius: 8px;
}

.imgcls {
    width: 32px;
    height: 32px;
    border: 1px solid #a8cad0;
    border-radius: 2px;
    position: relative;
}

.demo-description {
    clear: both;
    padding: 12px;
    font-size: 1.3em;
    line-height: 1.4em;
}

#baseWidgets div.ui-draggable-dragging {
    -moz-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
    -webkit-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
    box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
}
#displayCanvas
{
    margin: 2px 2px;
    height: 92%;
    width: 99.5%;
    top: 4%;
    position: relative;
    vertical-align: middle;
    text-align: center;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: #ebedf2;
    border: 1px solid #333;
    border-radius: 8px;
}

#content {
    margin: 2px 2px;
    height: 92%;
    width: 99.5%;
    top: 4%;
    position: fixed;
    vertical-align: middle;
    text-align: center;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: #ebedf2;
    border: 1px solid #333;
    border-radius: 8px;

} 
```

# facebook - 从 WPF 客户端使用 azure 访问控制时弹出错误的浏览器窗口

> ID：16137985
> 
> 赞同：1
> 
> 时间：2013-04-22T01:10:49.553
> 
> 标签：facebook, authentication, azure, jwt

我目前正在实施 azure 访问控制作为我们支持 WPF 客户端和网站的许多不同应用程序的默认身份验证平台。

我在 WPF 客户端中看到以下奇怪行为。

使用 Azure 身份验证库，我正在运行以下代码行来获取 JWT 令牌，然后用于对我们的服务进行身份验证。

```
 _authContext = new Microsoft.WindowsAzure.ActiveDirectory.Authentication.AuthenticationContext("https://xxxx.accesscontrol.windows.net");
    AssertionCredential credential = _authContext.AcquireToken("http://localhost/xxxx"); 
```

在测试中，我们对 Facebook 直接对我们网站的服务进行身份验证没有问题，它们运行良好。Google 和 Microsoft ID 在 WEB 和 WPF 情况下也可以正常工作。

但是，当从我们的一个 WPF 客户端使用 Facebook 时，会弹出一个浏览器窗口并显示以下错误。

```
HTTP Error Code:  502  
Message:  ACS40000: An error occurred while processing a Facebook sign-in response. This may be caused by invalid configuration of the Facebook application.  
Inner Message:  ACS40001: An error occurred while attempting to get an access token from Facebook.  
Inner Message:  ACS90005: Web exception  
Trace ID:  1a8a9ddf-5bf7-4c09-ace2
Timestamp:  XXXXXXX 
```

根据 stackoverflow 上发现的类似错误的建议，我已经重置了我的 facebook 应用程序设置，但似乎找不到最终答案

# javascript - 如何使用 javascript 用链接替换文本？

> ID：16137990
> 
> 赞同：1
> 
> 时间：2013-04-22T01:11:35.203
> 
> 标签：javascript, jquery

这就是我从 html usng Jquery 中取出文本的方法：

```
$(".text").each(function(){

        var texts = items[textCount]['data']['title'];
        $(this).text(texts);
         textCount = textCount + 1;
      }); 
```

我的问题是，如果我希望文本成为 url，那么它不会显示为链接，还会显示添加到 texts 变量的字符串。如何显示链接？如何将其作为 href 添加到文本中？

输出应该是这样的：

文字+网址

而不是链接为 url 的文本：`"<a href=\""+link+"\">"+texts+"</a>"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:17:58.513

您可以使用 class=text 使每个元素成为这样的链接，假设您有某种元素要用超链接包装。我不是 100% 确定这就是你要找的。

```
$('.text').wrap('<a href="http://yourlinkhere.com"></a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:17:55.660

使用`.attr()`这样的功能。

```
$(this).attr("href", "your link"); 
```

但这只有在您有锚标签时才有效，否则您可以即时创建锚标签。

```
$(this).html("<a href=\""+link+"\">"+texts+"</a>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T01:19:58.023

你可以做。注意：- 这比 attr() 更有效，因为您直接处理对象属性。

```
this.href="yoururl" 
```

您不必通过 attr 期间调用的后续 jquery 代码来设置 href 属性。

**jQuery attr 函数**

```
attr: function( elem, name, value, pass ) {
        var nType = elem.nodeType;

        // don't get/set attributes on text, comment and attribute nodes
        if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
            return undefined;
        }

        if ( pass && name in jQuery.attrFn ) {
            return jQuery( elem )[ name ]( value );
        }

        // Fallback to prop when attributes are not supported
        if ( !("getAttribute" in elem) ) {
            return jQuery.prop( elem, name, value );
        }

        var ret, hooks,
            notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

        // Normalize the name if needed
        if ( notxml ) {
            name = jQuery.attrFix[ name ] || name;

            hooks = jQuery.attrHooks[ name ];

            if ( !hooks ) {
                // Use boolHook for boolean attributes
                if ( rboolean.test( name ) ) {
                    hooks = boolHook;

                // Use nodeHook if available( IE6/7 )
                } else if ( nodeHook ) {
                    hooks = nodeHook;
                }
            }
        }

        if ( value !== undefined ) {

            if ( value === null ) {
                jQuery.removeAttr( elem, name );
                return undefined;

            } else if ( hooks && "set" in hooks && notxml && (ret = hooks.set( elem, value, name )) !== undefined ) {
                return ret;

            } else {
                elem.setAttribute( name, "" + value );
                return value;
            }

        } else if ( hooks && "get" in hooks && notxml && (ret = hooks.get( elem, name )) !== null ) {
            return ret;

        } else {

            ret = elem.getAttribute( name );

            // Non-existent attributes return null, we normalize to undefined
            return ret === null ?
                undefined :
                ret;
        }
    }, 
```