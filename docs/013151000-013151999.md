# StackOverflow 问答 13151000-13151999

# java - 带有私钥客户端的套接字

> ID：13151004
> 
> 赞同：1
> 
> 时间：2012-10-31T03:49:30.583
> 
> 标签：java, sockets, client

现在我有一个 Server.java 脚本正在等待与侦听端口建立连接。它目前正在我的 Amazon 实例上运行。

我还有一个 Client.java 文件试图将数据发送到本地运行的服务器。

目前的问题是（如果您了解亚马逊云，您就知道这一点）亚马逊 Ubuntu 实例需要一个私钥来确认 RSA 身份验证。有没有办法用套接字做到这一点？我查看了构造函数，找不到任何可以为密钥提供另一个参数的东西。

对于 SSH，我必须这样做，即：`ssh -i key.pem root@server.amazonaws.com`

客户。爪哇

```
import java.io.PrintWriter;
import java.net.Socket;

class Client {
    public static void main(String args[]) {
        String data = "toobie ornaught toobie";
        try {
            Socket skt = new Socket("my ubuntu instance", 1235);
            System.out.print("Server has connected!\n");
            PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
            System.out.print("Sending string: '" + data + "'\n");
            out.print(data);
            out.close();
            skt.close();
        } catch (Exception e) {
            System.out.print("Whoops! It didn't work!\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T03:54:15.727

你很困惑。TCP 套接字与 ssh 无关（除了 ssh 确实使用 TCP 套接字）。SSH 需要 RSA 密钥。您只是打开一个普通的 TCP 套接字。密钥和其他身份验证内容不适用。您需要做的是允许您的端口号通过在 EC2 实例上自动运行的防火墙。

# python - 试图从文本文件创建字典

> ID：13151005
> 
> 赞同：2
> 
> 时间：2012-10-31T03:49:38.253
> 
> 标签：python, dictionary, list-comprehension

fieldict(filename) 读取 DOT 格式的文件并返回一个字典，其中 DOT CMPLID 转换为整数，作为键，元组作为该键的对应值。元组的格式为：(manufacturer, date, crash, city, state)

```
fieldict("DOT500.txt")[416]
  ('DAIMLERCHRYSLER  CORPORATION', datetime.date(1995, 1, 9), False, 'ARCADIA', 
```

到目前为止，我已经尝试过

```
from collections import defaultdict
import datetime

def fieldict(filename):
    with open(filename) as f:
        x=[line.split('\t')[0].strip() for line in f] #list of complaint numbers
        y= line.split('\t') #list of full complaints
        d={}
        for j in x:
            Y= True
            N= False
            d[j] = tuple(y[2],datetime.date(y[7]), y[6], y[12], y[13])   #dict with number of complaint as key and tuple with index as values
        return d 
```

没有运气......我想我很接近......非常感谢任何帮助

编辑：每个投诉的格式如下

```
'11\t958128\tDAIMLERCHRYSLER CORPORATION\tDODGE\tSHADOW\t1990\tY\t19941117\tN\t0\t0\tENGINE AND ENGINE COOLING:ENGINE\tWILMINGTON  \tDE\t1B3XT44KXLN\t19950103\t19950103\t\t1\tENGINE MOTOR MOUNTS FAILED, RESULTING IN ENGINE NOISE. *AK\tEVOQ\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tV\t\r\n' 
```

没有字符标记的条目显示：

```
11  958128  DAIMLERCHRYSLER CORPORATION DODGE   SHADOW  1990    Y   19941117    N   0   0   ENGINE AND ENGINE COOLING:ENGINE    WILMINGTON      DE  1B3XT44KXLN 19950103    19950103        1   ENGINE MOTOR MOUNTS FAILED, RESULTING IN ENGINE NOISE.  *AK EVOQ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:14:32.503

注意：修剪换行符由读者决定。

实现此目的的一种干净方法是使用`dict(zip(headers,data_list))`

假设您的样本数据看起来像

```
joe\tSan Francisco\tapple
frank\tNew York City\torange
tim\tHawaii\tpineapple 
```

您可以执行以下操作：

```
results = []
headers = ['person','place','fruit']

for line in open('datafile.txt').readlines():
    record = line.split('\t')
    results.append(dict(zip(headers,record))) 
```

这将为每一行制作一个字典并将其附加到“结果”的末尾。

看起来像：

```
[{'fruit': 'apple\n', 'person': 'joe', 'place': 'San Francisco'},
 {'fruit': 'orange\n', 'person': 'frank', 'place': 'New York City'},
 {'fruit': 'pineapple\n', 'person': 'tim', 'place': 'Hawaii'}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T08:56:38.403

看起来您想与[`csv`](http://docs.python.org/2/library/csv.html)模块交朋友，因为这看起来像制表符格式的 csv 文本。`csv.reader()`有一个方法，当您将其放入 for 循环时会调用该`.next()`方法，因此您可以逐行浏览文件。

作为一般提示，请阅读 PEP8，并使用易于理解的变量名称。使用 python，如果它开始感觉很难，这是一个好兆头，通常有更好的方法。

```
import csv
import datetime

def _build_datetime(line)
    year_idx = x
    month_idx = y
    day_idx = z
    indexes = (year_idx, month_idx, day_idx)

    result_datetime = None
    if all(line[idx] for idx in indexes): # check that expected values are populated
        int_values = [int(line[idx]) for idx in indexes]
        result_datetime = datetime.date(*int_values)
    return result_datetime

def format2dict(filename):
    complaints = {}
    with open(filename, "rb") as in_f:
        reader = csv.reader(in_f, delimiter='\t')
        complaint_id_idx = 0
        manufacturer_idx = 2
        crash_idx = x
        city_idx = 12
        state_idx = 13

        for line in reader:
            complaint_id = int(line[complaint_id_idx])
            data= (
                         line[manufacturer_idx], 
                         _build_datetime(line),
                         line[crash_idx],
                         line[city_idx],
                         line[state_idx],
                        )

            complaints[complaint_id] = data
    return complaints

if __name__ == "__main__":
    formatted_data = format2dict("DOT500.txt") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T06:37:10.210

你在正确的轨道上使用 line.split('\t') 将文本分成几部分。尝试这样的事情来从分裂的部分建立元组。

```
import datetime

a = '11\t958128\tDAIMLERCHRYSLER CORPORATION\tDODGE\tSHADOW\t1990\tY\t19941117\tN\t0\t0\tENGINE AND ENGINE COOLING:ENGINE\tWILMINGTON  \tDE\t1B3XT44KXLN\t19950103\t19950103\t\t1\tENGINE MOTOR MOUNTS FAILED, RESULTING IN ENGINE NOISE. *AK\tEVOQ\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tV\t'

fields = a.split('\t')
recordNum = fields[0]
mfr = fields[2]
recDate = datetime.date(int(fields[5]),1,2)
make = fields[4]
DOTrecord = recordNum,mfr, recDate,make
print DOTrecord 
```

# c++ - boost::archive::binary_iarchive 无效签名

> ID：13151007
> 
> 赞同：1
> 
> 时间：2012-10-31T03:49:44.667
> 
> 标签：c++, boost, computer-vision, boost-serialization

当我使用 boost::archive::binary_iarchive 时，出现错误：当我想编译程序时签名无效--cvpr_2012_ffd。你可以从[http://blog.gimiatlicho.webfactional.com/?page_id=38](http://blog.gimiatlicho.webfactional.com/?page_id=38)获得它。我根据它的自述文件编译程序。当我运行这个程序时，我遇到了一些错误。错误是这个

```
l00138375@l00138375:/home/hm/downloads/cvpr_2012_public$ ./FaceForest 1      data/config_ffd.txt data/config_headpose.txt data/haarcascade_frontalface_alt.xml
Image pathdata/index_random_subset.txt
paths to treesdata/trees_ffd/
Image path 
paths to treesdata/trees_headpose/tree_
10 to load.
Archive Exception during deserializing:
invalid signature
it was tree: data/trees_headpose/tree_000.txt
segment fault 
```

我发现这个错误出现在文件中：tree.hpp 像这样的代码

```
224     //check if file exist
225     std::ifstream ifs(path.c_str());
226     if (!ifs) {
227       std::cout << "Tree not found " << path << std::endl;
228       return false;
229     }
230 
231     //load tree
232     try {
233 //      boost::archive::binary_iarchive ia(ifs);
234       boost::archive::binary_iarchive ia(ifs);
235       ia >> *t;
236     } catch (boost::archive::archive_exception& ex) {
237       std::cout << "Archive Exception during deserializing:" << std::endl;
238       std::cout << ex.what() << std::endl;
239       std::cout << "it was tree: " << path << std::endl;
240     } catch (int e) {
241       std::cout << path << "EXCEPTION " << e << std::endl;
242 
243     } 
```

错误发生在行：234

有人遇到这个错误吗？如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T12:16:18.097

我是您尝试编译的程序的作者。问题是您尝试加载的文件是 64 位 linux/mac 二进制文件。

如果您使用的是 32 位 linux 或 32/64 windows，则无法加载文件。

如果您需要 32 位二进制模型，请联系我。

# .htaccess - mod_rewrite 移动浏览器到相同的 URL 与 $_GET 数据

> ID：13151011
> 
> 赞同：1
> 
> 时间：2012-10-31T03:49:55.913
> 
> 标签：.htaccess, mod-rewrite, redirect

当移动浏览器访问它时，我试图简单地将获取数据“？mobile”添加到我的网站 URL 的末尾。我似乎无法弄清楚。这是我到目前为止所拥有的：

```
RewriteCond %{HTTP_ACCEPT} "text\/vnd\.wap\.wml|application\/vnd\.wap\.xhtml\+xml" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sony|symbian|nokia|samsung|mobile|windows ce|epoc|opera" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "mini|nitro|j2me|midp-|cldc-|netfront|mot|up\.browser|up\.link|audiovox"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "blackberry|ericsson,|panasonic|philips|sanyo|sharp|sie-"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "portalmmm|blazer|avantgo|danger|palm|series60|palmsource|pocketpc"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "smartphone|rover|ipaq|au-mic,|alcatel|ericy|vodafone\/|wap1\.|wap2\.|iPhone|android"[NC]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* http://website.com/?m [L,R=302] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:24:03.403

将您的代码更改为：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} !^mobile$ [NC]
RewriteCond %{HTTP_ACCEPT} "text\/vnd\.wap\.wml|application\/vnd\.wap\.xhtml\+xml" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sony|symbian|nokia|samsung|mobile|windows ce|epoc|opera" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "mini|nitro|j2me|midp-|cldc-|netfront|mot|up\.browser|up\.link|audiovox"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "blackberry|ericsson,|panasonic|philips|sanyo|sharp|sie-"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "portalmmm|blazer|avantgo|danger|palm|series60|palmsource|pocketpc"[NC,OR]
RewriteCond %{HTTP_USER_AGENT} "smartphone|rover|ipaq|au-mic,|alcatel|ericy|vodafone\/|wap1\.|wap2\.|iPhone|android"[NC]
RewriteRule (?!^.+\.(?:jpe?g|gif|bmp|png|tiff|css|js)$)^.*$ %{REQUEST_URI}?mobile [L,R=302,QSA] 
```

我已经用 iPhone 测试了这段代码，它工作正常。

# css - 在具有两个右浮动 CSS 的 Div 中居中一个 Div

> ID：13151014
> 
> 赞同：2
> 
> 时间：2012-10-31T03:50:09.253
> 
> 标签：css, html, css-float

我这里有个小问题。我想将红色 div 居中并让两个绿色 div 向右浮动。两个正确的 div 似乎下降了？

[http://jsbin.com/ewihuh/1/edit](http://jsbin.com/ewihuh/1/edit)

HTML

```
<div class="headertop">
 <div class="centerblock">Centered</div>
 <div class="right1">right 1</div>
 <div class="right2">right 2</div> 
</div> 
```

CSS

```
.headertop {
 width:100%;
 height:30px;
 background:black;
}

.centerblock {
 color:white;
 text-align:center;
 background:red;
 width: 200px;
 margin: 0px auto;
}

.right1, .right2 {
 color:white;
 float:right; 
 width:100px;
 background:green;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:23:45.807

[现场演示](http://jsfiddle.net/rohitazad/Y9597/10/)

嗨，**现在更改**为`your html code`并更改为`css`

**CSS**

```
 .headertop {
    width:100%;
    background:black;
    text-align:center;
}
.centerblock {
    color:white;
    text-align:center;
    background:red;
    width: 200px;
    margin:0 auto;
}
.right1, .right2{
    color:white;
    float:right;
    width:100px;
    background:green;
} 
```

**HTML**

```
<div class="headertop">
    <div class="right1">right 1</div>  
    <div class="right2">right 2</div>
    <div class="centerblock">Centered</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:23:50.797

HTML

```
<div class="headertop">
  <div class="centerblock">Centered</div>
  <div class="rights">
    <div class="right1">right 1</div>
    <div class="right2">right 2</div> 
 </div>
</div> 
```

CSS

```
 .headertop {
  width:100%;
  height:30px;
  background:black;
  text-align:center;
  position:relative;
  }

 .centerblock {
  color:white;
  text-align:center;
  background:red;
  width: 200px;
  margin: 0 auto;
 }

.rights {
 position:absolute;
 right:0;
 top:0;
 width:100px;
}

.right1, .right2 {
 color:white;
 width:50px;
 background:green;
 float:left;
 } 
```

演示：http: [//jsbin.com/ewihuh/7/edit](http://jsbin.com/ewihuh/7/edit)

# c - 微软采访——图片位图

> ID：13151019
> 
> 赞同：1
> 
> 时间：2012-10-31T03:51:05.043
> 
> 标签：c, algorithm

我正在处理旧的 MS 问题并遇到了这个问题：

> 一张图片有一个与之关联的位图和一个 256 长的原始调色板数组。现在我们有一个更改列表，其中一些旧颜色映射到新颜色。编写代码以更改原始调色板。现在，如果必须更改原始位图，请编写将扫描图片以及更改的调色板数组的代码。代码应该是 O(N) 而不是 O(N^2)。可以更改原始调色板的结构来完成此操作。

我无法弄清楚确切的问题。如果有人可以说明问题和标准方法，那就太好了。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:50:54.990

我认为这类问题应该通过与招聘人员的一些互动来解决。

我的方法如下：

```
for each *element* in *image data*
    if *palette value* in *element* contains *old value*
        update *palette value* with *new value*
    end
    process *element*
end 
```

以上可能没有更新某些值（对于图像中不存在某些调色板值的情况），但我认为这是处理此问题的一种简单方法。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:10:01.457

只需根据更改列表通过替换颜色来修改调色板数组。

# recursion - 从 CFG 中删除左递归

> ID：13151021
> 
> 赞同：4
> 
> 时间：2012-10-31T03:52:16.397
> 
> 标签：recursion, context-free-grammar, left-recursion

以下文法有左递归：

```
T -> Tx | TYx | YX | x
X -> xx
Y -> Yy | Yx | y 
```

你如何去删除左递归。我阅读了维基百科的解释，但我对 CFG 相当陌生，所以它没有多大意义。任何帮助表示赞赏？一个简单的英文解释将更加感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:35:49.213

在此示例中，您可以按照 Robert C. Moore 的[通用算法](http://en.wikipedia.org/wiki/Left_recursion#Removing_left_recursion)将左递归规则转换为右递归规则：

```
A -> A a1 | A a2 | ... | b1 | b2 | ...
# converts to
A  -> b1 A' | b2 A' | ...
A' -> e | a1 A' | a2 A' | ...                 # where e = epsilon 
```

*在我们的第一种情况下：* `A=T, a1=x, a2=Yx, b1=y, b2=x` ...（类似的`Y`）

```
T  -> YXT' | xT'
T' -> e | xT' | YxT'
X  -> xx
Y  -> yY'
Y' -> e | yY' | xY' 
```

# css - 隐藏水平 CSS 菜单溢出

> ID：13151024
> 
> 赞同：2
> 
> 时间：2012-10-31T03:52:25.030
> 
> 标签：css, positioning

[我在http://www.stevemoorecpa.dreamhosters.com/](http://www.stevemoorecpa.dreamhosters.com/)有一个水平下拉 CSS 菜单

我的问题是菜单宽度超出了网站的包装，我无法隐藏它。

![问题示例](../Images/9100c5af47498baca904b871e59895cb.png)

你如何防止元素超出站点包装器？这是包装器的代码...

```
#wrapperSkm {
    border-left-style: solid;
    border-right-style:solid;
    border-width: 2px;
    border-color: transparent;
    -moz-box-shadow: 0px 0px 25px #c3c3c3;
    -webkit-box-shadow: 0px 0px 25px #c3c3c3;
    box-shadow: 0px 0px 25px #c3c3c3;
    width:1069px;
    overflow: hidden;
    padding: 0 0px 0 0px;
    margin-left: auto;
    margin-right: auto;
    background:url(images/line1Right.png) repeat-x right 134px;
} 
```

这是水平子菜单导航的代码

```
#access ul ul {
    display: none;
    float: right;
    margin: 0;
    position: absolute;
    top: 181px;
    left: 0;
    width:100%;
    background:#fff url(images/line1Nav.png) repeat-x bottom;
    z-index: 99999;
    text-align:center;
} 
```

我整天都在工作，没有什么能让菜单隐藏它在主站点包装器之外的溢出。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T04:03:13.440

嗨，现在添加`position relative`您的`wrapperSkm` **ID**

像这样

```
#wrapperSkm{
position: relative;
} 
```

**结果是**

![在此处输入图像描述](../Images/192f25ed57ced72320155727ad9deb77.png)

# c# - 打开 PathListBoxScrollBehavior WPF

> ID：13151028
> 
> 赞同：3
> 
> 时间：2012-10-31T03:52:45.170
> 
> 标签：c#, wpf, xaml, wpf-controls, expression-blend

我正在使用 blend 4 和 vs 2010 开发从 iPad 到 Windows 桌面的应用程序端口。我有一个带有 PathListBoxScrollBehavior 的路径列表框，就像 Microsoft 在 PathListBoxUtils 演示中展示的轮播教程一样。

我的路径是一条开放路径（一条线），我不想要一个无限的轮播，而是一个路径列表框，它通过项目但在最后一项或第一项时停止。我说清楚了吗？

类似于 ios 上存在的东西（也类似于封面流效果）

[http://www.youtube.com/watch?v=YIWDlnvHRLw&feature=related](http://www.youtube.com/watch?v=YIWDlnvHRLw&feature=related)

我知道有办法做到这一点，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:41:50.130

有一个名为 WrapItems 的复选框。未选中时，您的路径列表框不会无限旋转。还有一些错误需要解决，但特定于我的项目。希望这个解决方案也能帮助你。

# jquery - Phonegap 应用程序未访问服务器上的数据库

> ID：13151030
> 
> 赞同：0
> 
> 时间：2012-10-31T03:52:55.460
> 
> 标签：jquery, json, web-services, cordova, jsonp

我的ajax调用如下

```
<script type="text/javascript">
    function calling() {
        var user = $('#username').val();
        $.ajax({
            type: 'POST',
            //url: "myfirstwebservice.asmx/GetCustomer",
             url: "http://www.mydomain.com/myfirstwebservice.asmx?op=GetCustomer",
            data: "{'username':'" + user + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            success: function (msg, status) {
                alert("successful");
                console.log(msg.d.password);
                $('#myplace').html("your passowrd is " + msg.d.password);
            },
            error: function (msg, status) {
                alert("failure");
                console.log("failure");
                console.log(msg);
                $('#myplace').html("The status is " + status + " with msg= " + msg + " .<br />" + msg.statusText);
            }
        });
    }
</script> 
```

这是我通过 phonegap 上提供的在线拉链包装的。我的 config.xml 文件是

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
xmlns:gap = "http://phonegap.com/ns/1.0"
id        = "com.phonegap.example"
versionCode="10"
version   = "1.0.0">
<name>PhoneGap Example</name>
<description>
    An example for phonegap build docs.
</description>

<author href="https://build.phonegap.com" email="support@phonegap.com">
    arrest warrant
</author>
<access origin="http://www.mydomain.com/" /> 
```

其他细节是

版本 1.0.0

PhoneGap 2.1.0

有什么我做错了，因为我没有得到输出。数据类型应该是 json 还是 jsonp？对于我的本地机器，我使用的是 json（它是用于数据库访问的跨域并且工作正常）。我的移动设备缺少什么。Web 服务在 .NET 2.0 框架中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:30:46.447

我不会使用 Web 服务来执行此操作。我使用精简的 Web 表单和它的代码隐藏文件来实现您想要做的事情。

这是我的 Handler.aspx 文件内容：

```
<% Page Language="C#" AutoEventWireup="True" CodeFile="Handler.aspx.cs" Inherits="Customer_Handler" %> 
```

您的文件内容会略有不同。我所做的只是在 aspx 文件的第一行之后添加一个新的 Web 表单并删除所有 HTML 标记。无论如何，在 Handler.aspx.cs 文件中是我们执行所有繁重工作的地方。此文件及其 Handler.aspx 文件应放置在您网站上可访问的某个位置。

以下是代码片段，您可以将其粘贴到 Handler.aspx.cs 文件中。

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

public partial class Customer_Handler : System.Web.UI.Page

private String pCallback = "";
private String pOP= "";
private String pUserName = "";

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {

        if (!String.IsNullOrEmpty(Request.QueryString["callback"])) { pCallback = Request.QueryString["callback"]; }
        if (!String.IsNullOrEmpty(Request.QueryString["op"])) { pOP = Request.QueryString["op"]; }
        if (!String.IsNullOrEmpty(Request.QueryString["username"])) { pUserName = Request.QueryString["username"]; }            

        switch (Request.HttpMethod)
        {
            case "GET":
                doGET_Function();
                break;
            case "POST":
                doPOST_function();
                break;
            default:
                break;
        }
    }
} 
```

基于 ajax 类型，我们可以使用上述 switch 语句处理 POST 或 GET 方法。然后基于变量“op”，我们可以使用 GET 和 POST 函数处理程序中的以下 switch 语句进一步扩展我们的功能。

```
private void doGET_Functions()
{
    String R = "";
    Response.Clear();
    Response.ContentType = "text/plain";

    // Each function needs to return a valid JSON String...

    switch (pOP.ToLower())
        {
            case "getcustomer":
                R = doGET_Customer(pUserName);
                break;
            //etc...
            default:
                R = "{\"status\":\"FAILED\", \"statusText\":\"No OP CMD Given...\"}"; 
                break;
        }

    if (!String.IsNullOrEmpty(pCallback)) { R = pCallback + "(" + R + ")"; } 

    Response.Write(R);
}

private void doPOST_functions()
{
    String R = "";
    Response.Clear();
    Response.ContentType = "text/plain";

    // Each function needs to return a vaild JSON String...

    switch (pOP.ToLower())
        {
            case "addcustomer":
                // Save New Customer ..
                //R = doAdd_Customer();
                break;
            //etc...
            default: 
                R = "{\"status\":\"FAILED\", \"statusText\":\"No OP CMD Given...\"}"; 
                break;
        }

    if (!String.IsNullOrEmpty(pCallback)) { R = pCallback + "(" + R + ")"; }

    Response.Write(R);
} 
```

在您的 Get_Customer 函数中，您需要根据传递的用户名进行所需的任何查找。请务必返回有效的 json 字符串值。这是一个非常好的 json 解析器，您可以使用它来帮助调试您的 json 字符串[Online JSON Parser](http://json.parser.online.fr/) 请记住，这将位于您的网站上。

```
private String doGET_Customer(String iUsername){
    String R = "";
    String secret = "";
    // do lookup and set the variable secret ...
    R += "{\"status\":\"OK\", \"password\":\""+ secret +"\"}";
    return R;
} 
```

现在，当我们在 Phonegap 项目中从我们的 javascript 调用 ajax 函数时，我们可以使用这些方法与 Web 服务器上的服务（WebForm）进行通信......

```
<script type="text/javascript">
function calling() {
    var user = $('#username').val();
    $.ajax({
         type: 'GET',
         url: "http://www.mydomain.com/handler.aspx",
         data: {
               op: "GetCustomer",
               username: user
              }
        dataType: "jsonp",
        timeout: 20000,
        async: false,
        success: function (json) {
            alert(json.status);
            if (json.status == 'OK'){
                console.log(json.password);
                $('#myplace').html("your passowrd is " + json.password);
            } else {
                $('#myplace').html("The status is " + json.status + " with msg= " + json.statusText);
            }
        },
        error: function (e) {
            alert("failure: "+e.message);
            console.log("failure: "+e.message);
        }
    });
}
</script> 
```

我可能有一些语法错误，因为我大部分都是从记忆中完成的。我已经在我的几个项目中使用了这种技术，它很好地满足了我的需求。因此，如果您对上述语法有任何问题，我会尽力帮助解决..

另外 - 仅供参考：我不建议通过不安全的 http 协议发送任何未加密的用户信息。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:06:49.903

我用来获取 jsonp 的 url 实际上并没有返回 json 响应。

[单击此处](http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo) 如果有人想尝试，此 url 将返回 json。

# bash - 如何在 bash 函数定义中扩展环境变量？

> ID：13151031
> 
> 赞同：3
> 
> 时间：2012-10-31T03:52:57.880
> 
> 标签：bash

我想在我的 bashrc 中做这样的事情

```
SERVER=abc.com
geta() { scp ${SERVER}:$1 . ;}

SERVER=xyz.com
getx() { scp ${SERVER}:$1 . ;}

declare -f geta getx
geta () 
{ 
    scp ${SERVER}:$1 .
}
getx () 
{ 
    scp ${SERVER}:$1 .
} 
```

我想要将 geta 和 getx 设置为

```
geta () { scp abc.com:$1 . }
getx () { scp xyz.com:$1 . } 
```

有没有办法在函数定义中强制变量扩展？

注意：为澄清起见，我更改了示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:53:19.963

您可以使用`eval`（转义，`$`以免`$1`扩展）

```
SERVER=abc.com
eval "geta() { scp ${SERVER}:\$1 . ;}"
SERVER=xyz.com
eval "getx() { scp ${SERVER}:\$1 . ;}" 
```

的输出`declare -f geta getx`

```
geta () 
{ 
    scp abc.com:$1 .
}
getx () 
{  
    scp xyz.com:$1 .
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:33:41.507

这是使用别名的好时机：

```
get_file() { echo scp "$1":"$2" .; }

SERVER=abc.com
alias geta="get_file $SERVER"

SERVER=xyz.com
alias getx="get_file $SERVER"

geta foo
getx bar 
```

输出

```
scp abc.com:foo .
scp xyz.com:bar . 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T03:57:16.667

```
pserver(){ 
    ping "$1"
} 
```

然后 ：

```
pserver abc.com 
```

那应该可以解决问题=)

# r - 图表的标题大小。PerformanceSummary

> ID：13151033
> 
> 赞同：0
> 
> 时间：2012-10-31T03:53:16.630
> 
> 标签：r

我不是 100% 确定这只是一个错误还是其他问题，但你如何更改包中输出的标题字体`charts.PerformanceSummary()`大小`PerformanceAnalytics`？

这是我的可重现示例，我希望将字体大小增加原来的 6 倍......

```
require(PerformanceAnalytics)
v <- rnorm(100,0.001,0.003)
charts.PerformanceSummary(xts(v,Sys.Date()-(100:1)),main="random title")
charts.PerformanceSummary(xts(v,Sys.Date()-(100:1)),main="random title", cex.main=6) 
```

输出似乎相同，标题大小没有变化......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:10:43.983

`cex.main`在绘制之前设置：

```
par(cex.main = 6)
charts.PerformanceSummary(xts(v,Sys.Date()-(100:1)),main="random title") 
```

### 更新

您可能会尝试的另一种选择（但需要先进行一些测试）是使用该`title()`功能。

```
# Set `main` to `""`
charts.PerformanceSummary(xts(v,Sys.Date()-(100:1)), main = "")
# You'll have to experiment with the best combination of `line` and `cex.main`
title(main="random title", line = -2, outer = TRUE, cex.main=3) 
```

# html - 调整窗口大小时使背景图像从左下角“增长”

> ID：13151036
> 
> 赞同：0
> 
> 时间：2012-10-31T03:53:41.040
> 
> 标签：html, css, image

这有点难以解释正在发生的事情。

[http://easyuniv.com/staging/gonzaga/](http://easyuniv.com/staging/gonzaga/)

如果你去我上面的网站，你可以看到当窗口缩小和水平扩展时背景图像是如何移动的。我希望它使图像的左下角固定在窗口的左下角，而不管窗口大小如何，然后如果它更宽，它将显示更多的图像。我怎样才能做到这一点？我尝试了很多不同的设置变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:58:06.240

将您的背景位置设置为`left bottom`：

```
html {
    background-position: left bottom;
} 
```

* * *

或者，只需使用速记属性将其与您的`background-image`语句结合起来：

```
html {
    background: url("img/background_image.png") no-repeat left bottom;
} 
```

# iphone - NSTimer 没有被触发

> ID：13151047
> 
> 赞同：0
> 
> 时间：2012-10-31T03:55:17.650
> 
> 标签：iphone

我使用下面的代码等待 NSTimer 触发

```
 -(void)timer1Fired :(NSTimer *) timer
    {

    isTriggered=true;

    }

    //----------------------------------------------
    isTriggered=false;

    [NSTimer scheduledTimerWithTimeInterval:1  
                                 target:self
                               selector:@selector(timer1Fired:)
                               userInfo:nil
                                repeats:NO];

    int j1 = 0;
    while ( !isTriggered && j1 <   1000)
    {

        [NSThread sleepForTimeInterval: 0.5];

        j1++;

    }
    //continue to do  something   //b 
```

但看起来 NSTimer 永远不会被触发

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:25:32.060

我不认为`[NSThread sleepFortimeInterval]`你期望它做的事情。你是对的，`isTriggered:`直到你的 500 秒长的 while 循环完成后才会执行。

此外，`NSTimer`并且`NSThread`都是老式的，您应该改用 Grand Central Dispatch（替换它们）。GCD 速度明显更快，使用的资源更少，而且它也更可靠/更强大。

[https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

  // do stuff on background thread

  dispatch_sync(dispatch_get_main_queue(), ^{

    // do stuff on main thread

  });
}); 
```

如果你想避免使用低级 C API，你可以使用`NSOperation`and `NSOperationQueue`，它是 GCD 的高级包装器。

# sqlite - 刚开始收到 AIR SQLite 错误 3182 发生磁盘 I/O 错误

> ID：13151048
> 
> 赞同：5
> 
> 时间：2012-10-31T03:55:25.983
> 
> 标签：sqlite, air

我们的软件有一个新的 beta 版本，有一些变化，但不是围绕我们的数据库层。

我们刚刚开始在我们的服务器日志中报告错误 3128。似乎一旦发生，只要应用程序打开，它就会发生。代码中最明显的部分是我们通过 SQLite 每秒记录数据的地方。仅本月，我们的服务器就产生了 47k 错误。

```
3128     Disk I/O error occurred.   Indicates that an operation could not be completed because of a disk I/O error. This can happen if the runtime is attempting to delete a temporary file and another program (such as a virus protection application) is holding a lock on the file. This can also happen if the runtime is attempting to write data to a file and the data can't be written. 
```

我不知道是什么导致了这个错误。也许是防病毒程序？也许我们的应用程序变得混乱并在彼此之上写入数据？我们正在使用异步连接。

它引起了很多问题，我们不知所措。它发生在我们的旧版本中，但一个月可能发生 100 次，而不是 47,000 次。无论哪种方式，我都想让它发生“0”次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:27:03.223

可能的解决方案：[异常消息：发生某种磁盘 I/O 错误](https://stackoverflow.com/questions/3979322/exception-message-some-kind-of-disk-i-o-error-occurred)

摘要：数据库可能没有问题，但是一旦打开数据库，创建（或删除）临时文件就会出现问题。AIR 可能对数据库具有权限，但不能在目录中创建或删除文件。

> 对我有用的一个答案是使用该**`PRAGMA`**语句将**`journal_mode`**值设置为**`DELETE`**. 您可以通过**`PRAGMA`**以与发出查询语句相同的方式发出语句来执行此操作。

```
PRAGMA journal_mode = OFF 
```

不幸的是，如果应用程序在事务的中间崩溃，并且设置了 OFF 日志模式，那么数据库文件很可能会损坏。¹ .

¹ [http://www.sqlite.org/pragma.html#pragma_journal_mode](http://www.sqlite.org/pragma.html#pragma_journal_mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:09:40.193

解决方案是通过包装一个小包装器来确保数据库删除、更新、插入一次只发生一次。最重要的是，我们必须注意错误 3128 并重试。我认为这是因为我们有一个触发器正在运行，它可以在我们插入数据后锁定数据库。

# jqgrid - 我们如何以编程方式在没有字幕层的情况下实现隐藏网格功能？

> ID：13151050
> 
> 赞同：0
> 
> 时间：2012-10-31T03:55:35.843
> 
> 标签：jqgrid

在我们的页面中，网格将位于手风琴内。所以我想消除字幕层并实现`hiddengrid:true`点击手风琴的功能，而不是点击字幕层图标（特别是打开手风琴）。我怎样才能做到这一点？任何建议，在此先感谢。

主要目的是具有`hiddengrid`选项文档中的功能
`If set to true the grid is initially is hidden. The data is not loaded (no request is sent) and only the caption layer is shown. When the show/hide button is clicked for the first time to show grid, the request is sent to the server`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:09:10.823

您可以使用[jQuery.slideUp](http://api.jquery.com/slideUp/)、[jQuery.slideDown](http://api.jquery.com/slideDown/)或[jQuery.slideToggle](http://api.jquery.com/slideToggle/)来实现接近`hiddengrid:true`.

要实现这一点，您可以将网格放置在 div 中，如下所示

```
<div id="overGrid">
    <table id="list"><tr><td></td></tr></table>
    <div id="pager"></div>
</div> 
```

并使用

```
$("#overGrid").slideToggle("fast"); 
```

如果您需要切换网格。

[演示](http://www.ok-soft-gmbh.com/jqGrid/TougleGridWithoutCapture.htm)演示了这一点。

**更新**：可能您在网格中有一些远`datatype`​​程（“json”或“xml”）并且不想在开头加载网格包含？如果您只需要`datatype: "local"`最初使用并使用`setGridParam`将数据类型更改为`"json"`（或`"xml"`）选项卡的“选择”回调内部。更改数据类型后，您应该调用`trigger("reloadGrd")`从服务器加载数据（或刷新数据）。

# android - 如何为 GCM 创建 API 密钥？

> ID：13151054
> 
> 赞同：18
> 
> 时间：2012-10-31T03:56:02.303
> 
> 标签：android, google-cloud-messaging

我在创建 API 密钥时遇到问题，因为“创建新服务器密钥”和“创建新浏览器密钥”选项不在 API 访问页面中。我是否应该为使用它付费。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T04:18:20.973

通常在创建项目并保存项目后#您单击左侧面板上的服务并打开适用于 Android 的 Google Cloud Messaging。然后你应该看到这个屏幕：![在此处输入图像描述](../Images/5a1d02c7119679e5f5207597ae297f52.png)

点击 API Access 并记下图片上标记的 API Key

![在此处输入图像描述](../Images/4a5db2d662394f23b7f07a7f8b36b90f.png)

**编辑：** 这是详细描述此过程的完整文章的链接： [http ://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and -mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T04:24:45.443

之前发布的屏幕截图提供了很好的视觉效果，但以下是我在设置时采取的步骤：

转到[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

1 - 使用谷歌帐户登录

2 - 如果您尚未这样做，请单击“创建项目...”。

3 - 当您到达带有左侧导航的页面时，请确保选择“服务”

4 - 打开“Android 版 Google 云消息传递”

5 - 单击“适用于 Android 的 Google Cloud Messaging”链接

6 - 单击左侧导航中的“API 访问”链接

7 - 您现在应该能够通过单击相应的按钮来创建新的服务器或浏览器密钥

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-18T14:16:35.253

现在最简单的方法是使用您的帐户登录：[https](https://developers.google.com/mobile/add) ://developers.google.com/mobile/add并使用向导 :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-28T04:42:27.543

首先在 Google 控制台中创建项目[https://accounts.google.com/ServiceLogin?service=cloudconsole&passive=true&continue=https%3A%2F%2Fconsole.developers.google.com%2Fproject<mpl=cloudconsole](https://accounts.google.com/ServiceLogin?service=cloudconsole&passive=true&continue=https%3A%2F%2Fconsole.developers.google.com%2Fproject&ltmpl=cloudconsole)

创建新项目并记下项目编号

在 APIs & auth 下的左窗格中，选择 APIs 并启用适用于 Android 的 Google Cloud Messaging。

然后选择凭据部分。

创建一个新的密钥选择类型作为服务器密钥。输入服务器的 IP。如果您在**localhost**中进行测试，请将 IP 输入为 0.0.0.0/0。

记下 API 密钥

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-17T10:59:51.927

*   转到[谷歌播放控制台](https://console.developers.google.com/project?authuser=0)

*   然后单击创建项目并为此应用程序提供一个 ID。

*   然后您可以看到列表中显示的项目名称。进入您之前创建的项目。

*   在左侧，**Api&Auth** ->Api。你必须打开`Google cloud messaging for android`.

*   对我来说，我必须单击`Credentials`以`Api&Auth`创建一个
    密钥。下面我显示了一个屏幕截图。

    ![在此处输入图像描述](../Images/981a0942499a9495f6f1c72c04978434.png)

*   最后，单击`create new key`为您的应用程序生成密钥。查看此处获取[SHA-1 指纹](https://stackoverflow.com/questions/15727912/sha-1-fingerprint-of-keystore-certificate)

# jquery - jQuery UI 滑块颜色问题

> ID：13151061
> 
> 赞同：2
> 
> 时间：2012-10-31T03:56:53.923
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-slider, jquery-slider

我正在尝试使用盛装背景的滑块

它如何在我的网站上显示而没有任何背景颜色

[该问题与jQuery UI Slider Range-ui](https://stackoverflow.com/questions/12299454/jQuery-ui-slider-range-ui)下面的链接相同

已经尝试在我的代码中添加 range: 'min' 但仍然无法正常工作

```
$("#sliderME").slider({

    min: 7.9, 
    max: 14.0,
    range: "min",
    step: 0.1, 
    value: 11.2   
}); 
```

请帮忙。

# hadoop - 安装 hadoop0.21.0 时出现异常 EventCounter not found 并且无法创建目录

> ID：13151066
> 
> 赞同：3
> 
> 时间：2012-10-31T03:57:28.267
> 
> 标签：hadoop

当尝试根据这个[http://www.thegeekstuff.com/2012/02/hadoop-pseudo-distributed-installation/](http://www.thegeekstuff.com/2012/02/hadoop-pseudo-distributed-installation/)网站在我的笔记本电脑上以伪分发模式安装 hadoop 0.21.0 时，我遇到了这个异常来格式化名称节点：

```
    hadoop@host220:~/hadoop-0.21.0$ bin/hadoop namenode -format
    不推荐使用：不推荐使用此脚本执行 hdfs 命令。
    而是使用 hdfs 命令。

    log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        在 java.lang.Class.forName0（本机方法）
        在 java.lang.Class.forName(Class.java:169)
        在 org.apache.log4j.helpers.Loader.loadClass(Loader.java:179)
        在 org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:320)
        在 org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:121)
        在 org.apache.log4j.PropertyConfigurator.parseAppender（PropertyConfigurator.java:664）
        在 org.apache.log4j.PropertyConfigurator.parseCategory（PropertyConfigurator.java:647）
        在 org.apache.log4j.PropertyConfigurator.configureRootCategory（PropertyConfigurator.java:544）
        在 org.apache.log4j.PropertyConfigurator.doConfigure（PropertyConfigurator.java:440）
        在 org.apache.log4j.PropertyConfigurator.doConfigure（PropertyConfigurator.java:476）
        在 org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
        在 org.apache.log4j.LogManager.(LogManager.java:125)
        在 org.apache.log4j.Logger.getLogger(Logger.java:105)
        在 org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
        在 org.apache.commons.logging.impl.Log4JLogger.(Log4JLogger.java:109)
        在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        在 org.apache.commons.logging.impl.LogFactoryImpl.createLogFromClass(LogFactoryImpl.java:1116)
        在 org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:914)
        在 org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
        在 org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
        在 org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)
        在 org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)
        在 org.apache.hadoop.conf.Configuration.(Configuration.java:153)
        在 org.apache.hadoop.hdfs.server.namenode.NameNode.(NameNode.java:137)
    log4j：错误无法实例化名为“EventCounter”的附加程序。
    12/10/31 10:58:42 信息 namenode.NameNode: STARTUP_MSG:
    /************************************************* ***********
    STARTUP_MSG：启动 NameNode
    STARTUP_MSG：主机=主机220/127.0.0.1
    STARTUP_MSG：args = [-format]
    STARTUP_MSG：版本 = 0.21.0
    STARTUP_MSG：类路径 = /etc/hadoop:/usr/lib/jvm/java-6-sun/lib/tools.jar:/home/hadoop/hadoop-0.21.0/bin/../lib/*.jar
    STARTUP_MSG：构建 = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.21 -r 985326；由“tomwhite”于 2010 年 8 月 17 日星期二 01:02:28 EDT 编译
    ****************************************************** **********/
    12/10/31 10:58:43 INFO namenode.FSNamesystem: defaultReplication = 3
    12/10/31 10:58:43 信息 namenode.FSNamesystem: maxReplication = 512
    12/10/31 10:58:43 信息 namenode.FSNamesystem: minReplication = 1
    12/10/31 10:58:43 信息 namenode.FSNamesystem: maxReplicationStreams = 2
    12/10/31 10:58:43 信息 namenode.FSNamesystem: shouldCheckForEnoughRacks = false
    12/10/31 10:58:43 INFO security.Groups：组映射 impl=org.apache.hadoop.security.ShellBasedUnixGroupsMapping；缓存超时=300000
    12/10/31 10:58:43 信息 namenode.FSNamesystem: fsOwner=hadoop
    12/10/31 10:58:43 INFO namenode.FSNamesystem: supergroup=supergroup
    12/10/31 10:58:43 信息 namenode.FSNamesystem: isPermissionEnabled=true
    12/10/31 10:58:43 INFO namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
    12/10/31 10:58:43 INFO common.Storage: 0 秒内保存的大小为 112 的图像文件。
    12/10/31 10:58:43 INFO common.Storage: 存储目录/tmp/hadoop-hadoop/dfs/name 已格式化成功。
    12/10/31 10:58:43 信息 namenode.NameNode: SHUTDOWN_MSG:
    /************************************************* ***********
    SHUTDOWN_MSG：在host220/127.0.0.1关闭NameNode
    ****************************************************** **********/

```

最后它成功格式化了namenode，尽管有例外。然后我尝试使用“start-all.sh”启动 dfs 和 mapreduce，但失败了。下面是控制台输出：

```
    hadoop@host220:~/hadoop-0.21.0$ bin/start-all.sh
    此脚本已弃用。而是使用 start-dfs.sh 和 start-mapred.sh
    mkdir：无法创建目录`/var/run/hadoop'：权限被拒绝
    启动namenode，登录到/var/log/hadoop/hadoop/hadoop-hadoop-namenode-host220.out
    /home/hadoop/hadoop-0.21.0/bin/../bin/hadoop-daemon.sh：第127行：/var/run/hadoop/hadoop-hadoop-namenode.pid：没有这样的文件或目录
    log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        在 java.lang.Class.forName0（本机方法）
        在 java.lang.Class.forName(Class.java:169)
    本地主机：mkdir：无法创建目录`/var/run/hadoop'：权限被拒绝
    localhost：启动datanode，登录到/var/log/hadoop/hadoop/hadoop-hadoop-datanode-host220.out
    本地主机：/home/hadoop/hadoop-0.21.0/bin/hadoop-daemon.sh：第 127 行：/var/run/hadoop/hadoop-hadoop-datanode.pid：没有这样的文件或目录
    本地主机：log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    本地主机：java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
    本地主机：在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    本地主机：在 java.security.AccessController.doPrivileged（本机方法）
    本地主机：在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    本地主机：在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    本地主机：在 java.lang.Class.forName0（本机方法）
    本地主机：在 java.lang.Class.forName(Class.java:169)
    本地主机：mkdir：无法创建目录`/var/run/hadoop'：权限被拒绝
    localhost：启动secondarynamenode，登录到/var/log/hadoop/hadoop/hadoop-hadoop-secondarynamenode-host220.out
    本地主机：/home/hadoop/hadoop-0.21.0/bin/hadoop-daemon.sh：第 127 行：/var/run/hadoop/hadoop-hadoop-secondarynamenode.pid：没有这样的文件或目录
    本地主机：log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    本地主机：java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
    本地主机：在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    本地主机：在 java.security.AccessController.doPrivileged（本机方法）
    本地主机：在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    本地主机：在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    本地主机：在 java.lang.Class.forName0（本机方法）
    本地主机：在 java.lang.Class.forName(Class.java:169)
    mkdir：无法创建目录`/var/run/hadoop'：权限被拒绝
    启动jobtracker，记录到/var/log/hadoop/hadoop/hadoop-hadoop-jobtracker-host220.out
    /home/hadoop/hadoop-0.21.0/bin/../bin/hadoop-daemon.sh：第127行：/var/run/hadoop/hadoop-hadoop-jobtracker.pid：没有这样的文件或目录
    log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
        在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        在 java.lang.Class.forName0（本机方法）
        在 java.lang.Class.forName(Class.java:169)
    本地主机：mkdir：无法创建目录`/var/run/hadoop'：权限被拒绝
    localhost：启动tasktracker，登录到/var/log/hadoop/hadoop/hadoop-hadoop-tasktracker-host220.out
    本地主机：/home/hadoop/hadoop-0.21.0/bin/hadoop-daemon.sh：第 127 行：/var/run/hadoop/hadoop-hadoop-tasktracker.pid：没有这样的文件或目录
    本地主机：log4j：错误无法实例化类 [org.apache.hadoop.log.metrics.EventCounter]。
    本地主机：java.lang.ClassNotFoundException：org.apache.hadoop.log.metrics.EventCounter
    本地主机：在 java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    本地主机：在 java.security.AccessController.doPrivileged（本机方法）
    本地主机：在 java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    本地主机：在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    本地主机：在 java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    本地主机：在 java.lang.Class.forName0（本机方法）
    本地主机：在 java.lang.Class.forName(Class.java:169)

```

# wordpress - Wordpress：使用 get_template_part 样式 Post_Format loop-single.php？

> ID：13151068
> 
> 赞同：1
> 
> 时间：2012-10-31T03:58:21.190
> 
> 标签：wordpress, templates, post, loops, format

我几乎只想从图库帖子中删除帖子元数据。

**这是我的 index.php//**

```
<?php get_header(); ?>
  <div id="right-content">
     <?php get_template_part( 'loop', get_post_format() ); ?>
  </div>

<div id="left-content">
  <div class="inner"> 
  <?php get_sidebar(); ?>
  </div> 
</div> 
```

**这是我的single.php//**

```
<?php get_header(); ?>
<div id="main-content">     
<?php get_template_part( 'loop', 'single' ); ?>
</div>

<div class="clear"></div>
<?php get_footer(); ?> 
```

我不明白的是如何设置循环或循环单个文件，以便为标准和画廊单个帖子获取单独的模板。

我添加了一个循环和 loop-single.php 文件。

**这是这些文件的粘贴箱//**

[http://pastebin.com/9xSZKnJA-loop.php](http://pastebin.com/9xSZKnJA) _

[http://pastebin.com/WiXwKf7d](http://pastebin.com/WiXwKf7d) - loop-single.php

# **编辑//**

这是此 pastebin 中的新“single-gallery.php”和“loop-gallery.php”文件// [http://pastebin.com/YukyZ9hm](http://pastebin.com/YukyZ9hm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:07:13.100

如果您想为不同类型使用不同的模板，则需要为每种帖子类型创建一个模板。假设您正在使用该`gallery`类型，您可能希望将 的内容复制`single.php`到一个名为`single-gallery.php`并将循环模板部分更改为`get_template_part( 'loop', 'gallery' );`. 然后，您将复制`loop-single.php`到一个名为的文件`loop-gallery.php`并根据需要修改其内容。

您可以在此处找到有关主题开发的更多信息[http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)

# data-structures - 在 Racket 中创建 BST

> ID：13151069
> 
> 赞同：3
> 
> 时间：2012-10-31T03:58:24.997
> 
> 标签：data-structures, lisp, scheme, racket, binary-search-tree

我目前正在尝试编写一个使用 DrRacket 在球拍中查找值的函数。在一些帮助下，我想出了下面这个。`cadr`但是我需要有人向我解释和之间有什么区别`caddr`？同样在 DrRacket 中，我将如何创建 BST？它类似于列清单吗？

```
(define (find-val bst elt)
    (cond ((null? bst) #f)
          ((< elt (car bst))
           (find-val (cadr bst) elt))
          ((> elt (car bst))
           (bst (caddr bst) elt))
          ((equal? elt (car bst))
           #t))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:14:54.673

对于你问题的第一部分，

```
(cadr x) 
```

相当于：

```
(car (cdr x)) 
```

和

```
(caddr x) 
```

相当于：

```
(car (cdr (cdr x))) 
```

你注意到图案了吗？and`d`之间的每个都是 a 的简写，and之间的每个是 a 的简写，按从左到右的顺序排列。`c``r``cdr``a``c``r``car`

[关于您问题的第二部分，在书SICP](http://mitpress.mit.edu/sicp/full-text/book/book.html)中，第[2.3.3](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-16.html#%_sec_2.3.3)节的标题*为二叉树集*下，对如何表示 BST 进行了非常详细的解释。在那里，您将找到创建和操作树所需的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:32:16.770

在 Racket 中，我们可以使用**struct**来定义结构化值的形状。例如：

```
(struct person (name age)) 
```

定义一个`person`结构。它允许我们创建 2 字段结构化值，例如：

```
(define p1 (person "danny" 33))
(define p2 (person "richie" 31)) 
```

我们可以使用其选择器函数访问结构化值的各个字段。

```
;; p: person -> void
(define (say-hi p)
  (printf "hi, my name is ~a, and I am ~a years old\n"
          (person-name p)
          (person-age p)))

(say-hi p1)
(say-hi p2) 
```

还有其他创建结构化值的方法，例如使用普通列表结构。但是对于 Racket 中的大多数应用程序，最好使用**struct 。**以下是几个原因：

1.  访问**结构**中的字段很快——一次取消引用。在列表表示中，字段访问涉及遍历列表结构，这有点昂贵。

2.  **结构**选择器中的类型检查可以更快地检测到传递错误类型数据的错误，并产生适当的错误消息。

然后，创建二叉搜索树涉及定义一个结构来表示树的各个节点。它还需要在构建过程中遵循相当严格的规则，因为节点以一种特殊的方式排序，以使搜索结构可能比顺序列表更快。

一本算法教科书应该介绍一些我们可以遵循的潜在规则集，以创建保证节点之间良好平衡的 BST。其中包括诸如[红黑树之](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)类的东西，当将值插入到树中时，它们可能对如何维护树的结构有特殊的规则。*Racket*并没有具体说明它是如何发生的：它只是我们需要遵循的一般要求才能使平衡发挥作用。

Matt Might 写了一篇关于在 Racket 中实现[的红黑树的非常好的文章。](http://matt.might.net/articles/red-black-delete/)

# java - android java查找X和Y位置

> ID：13151071
> 
> 赞同：-4
> 
> 时间：2012-10-31T03:58:40.177
> 
> 标签：java, android

如何在模拟器上找到某个区域的 X 和 Y？因为我想如果你点击某个地方就会发生一些事情。但是我可以点击 X 和 Y，而不是在那里制作一个不可见的 ImageView。

如何找到 X 和 Y 位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:15:10.943

您可以尝试以下方法来获取触摸事件的 XY 坐标。

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        // MotionEvent object holds X-Y values
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            String text = "You clicked at x = " + event.getX() + " and y = " + event.getY();
            Toast.makeText(this, text, Toast.LENGTH_LONG).show();
        }

        return super.onTouchEvent(event);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:09:47.440

在屏幕上的某个位置绘制一个`canvas`您想要单击的位置，然后设置它的`onClick`属性。

# templates - D中的struct参数推导

> ID：13151072
> 
> 赞同：3
> 
> 时间：2012-10-31T03:58:55.697
> 
> 标签：templates, d, type-inference

只是想知道为什么这不能编译。我认为编译器可以推断参数化结构的类型？

```
void main() {
    auto arr = Arr([1,2,3]);
}

struct Arr(T) {
    private T[] data;
} 
```

错误：

```
junk.d(25): Error: struct junk.Arr(T) is not a function template
junk.d(25): Error: struct junk.Arr(T) cannot deduce template function from argument types !()(int[]) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T04:41:38.533

表格代码：

```
auto arr = Arr([1,2,3]); 
```

`Arr`是对when `Arr`is a的构造函数的调用`struct`。在这种情况下，没有显式构造函数。如果有，它可能已经被模板化，并且参数推断确实适用于模板化构造函数。由于没有构造函数，参数将用于`Arr`按照声明的顺序初始化字段。但是，当然，`Arr`它是一个模板，所以要构造的类型还不知道。

如果您认为这种情况应该有参数推断，请考虑以下几点：

```
struct Arr(T)
{
    static if(is(T == bool))
        BitArray data;
    else
        T[] data;
} 
```

在上面的例子中，在模板实例化之前，字段的类型（也可能是顺序）是未知的……那么它会如何推断呢？

模板必须显式实例化：

```
auto arr = Arr!int([1, 2, 3]); 
```

# eclipse - 带有eclipse项目的git服务器

> ID：13151074
> 
> 赞同：4
> 
> 时间：2012-10-31T03:58:56.410
> 
> 标签：eclipse, git, smartgit, git-bare

我有一台运行 Ubuntu Server 的计算机。在这台计算机上，我有一个名为 mattgit 的用户。
我有另一台运行 Windows 7 的计算机。我在这台计算机上使用 Eclipse 开发 Java 应用程序。

在我的服务器上，我运行了“git init --shared --bare”来为 Eclipse 项目创建一个中央存储库。我为我的 Eclipse 工作区中的每个项目都做了一次，每个项目都在一个单独的文件夹中。

我希望我的 Win7 机器上的 Eclipse 工作区中的每个项目都充当/成为/无论术语是 git 存储库。然后我希望能够将这些文件推送回我服务器上的中央存储库。我该怎么做呢？

我尝试将（最初为空的）中央存储库克隆到我的 Win7 机器到我的 Eclipse 工作区中的一个文件夹，然后在其中创建一个项目，但 Eclipse 拒绝创建它，因为它说目录不为空。

我还尝试在我的工作区中使用 Eclipse 创建项目，然后将存储库克隆到该文件夹​​中，但显然我也不允许这样做。

我试过使用 SmartGit 和 Git 二进制文件，但我越来越困惑。

编辑：请假设我对我需要做什么一无所知。我需要分步说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T08:09:22.120

你将需要三样东西：

*   一个**Git 侦听器服务**，能够侦听您的 git 命令（在这里您根本不需要 gitolite：它是一个授权层）。
    参见**[GitStack](http://gitstack.com/)** for Windows（有免费版本）
*   一个**git Eclipse 插件**，包括在您的 Eclipse 中，以便在您想要执行 Git 操作时不切换上下文：确保[**EGit**](http://www.eclipse.org/egit/)已安装在您的 Eclipse 中。
*   **一些说明**将您现有的 Eclipse 项目导入本地 git 存储库并将您的 Windows GitStack 存储库声明为远程，以便推送到它。

    *   创建一个本地存储库并将[您的 Eclipse 项目导入其中](http://wiki.eclipse.org/EGit/User_Guide#Importing_projects)。
    *   添加您的遥控器并[推送到它](http://wiki.eclipse.org/EGit/User_Guide#Pushing_to_other_Repositories)。

[GitHub上Egit](http://wiki.eclipse.org/EGit/User_Guide#Github_Tutorial)的使用说明相当完整。
Vogella关于[Egit 的教程](http://www.vogella.com/articles/EGit/article.html)也做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T07:58:30.207

更简单的方法是在 Eclipse 中创建新项目，然后右键单击该项目并转到 Team > Share 菜单。该界面将指导您创建一个包含新 Eclipse 项目的新**本地存储库。**在本地 git 存储库上管理您的项目后，Eclipse 将为您提供其他上下文菜单条目以在 Git 上操作该项目。因此，您将能够将您的提交推送到您的**远程**存储库（您在服务器上创建的那个）。

# jquery-mobile - Jquery mobile + Phonegap + Eclipse，无法为索引页面以外的内页调用javascript函数

> ID：13151078
> 
> 赞同：1
> 
> 时间：2012-10-31T03:59:34.203
> 
> 标签：jquery-mobile, cordova

我用 JQM 和 Phonegap 构建了两个页面（index.html 和 second.html），我想知道为什么所有 js 函数都必须在 index.html 上定义，尽管我想在 second.html 上使用它，

我的脚本如下（second.html）：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Loan Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="css/themes/default/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="css/themes/default/jquery.mobile.theme-1.2.0.css" />
<link rel="stylesheet" href="css/themes/default/override.css" />

<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/cordova-2.1.0.js"></script>

<script type="text/javascript" charset="utf-8">
    function test(){alert("hello agent!");}
</script>
</head>

<body>

<div data-role="page" id="agents">

<div data-role="header" data-position="fixed">
    <div class="ui-title">Agents</div>
</div>

<div data-role="content">
    <a href="#" onclick="test();">test</a>
</div>

<div data-role="footer" data-position="fixed">
    <p></p>
</div>

</div>
</body>
</html> 
```

在 Eclipse 中，当我尝试单击触发该功能时，它显示如下消息：

```
file:///android_asset/www/index.html: Line 1 : Uncaught ReferenceError: test is not defined 
```

那肯定是在 second.html 页面上找不到该功能。

除非我把它放在 index.html 中，否则 js 函数 test() 不起作用。

我不希望我的所有移动页面都在一页中加载。

非常感谢您的建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:17:27.370

当您浏览使用 的移动网站时，`jQuery Mobile`该元素中包含的任何脚本 `head`都将在您开始的页面上只读。
因此，您从`index.html` 页面开始，然后运行该页面的 head 元素中的脚本。
如果您使用按钮或导航栏移动到另一个页面，这些页面上的 head 元素中的脚本将被忽略，因为只有 title 元素和包含该`data-role="page"`属性的 div 元素将被解析并带入 DOM。发生这种情况是因为`jqm`使用`Ajax`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T14:09:00.267

如果你想为 PhoneGap 构建*好的*应用程序（尤其是那些有机会在 AppStore 中被接受的应用程序）你需要避免有多个页面，这只会让你头疼。查看一个好的 JS 模板解决方案，例如 handlebars.js [http://handlebarsjs.com/](http://handlebarsjs.com/)并查看 cconraets 优秀的 phonegap 教程[http://coenraets.org/blog/phonegap-tutorial/](http://coenraets.org/blog/phonegap-tutorial/)

在应用程序中重新加载页面确实违背了整个目的，而 JQuery Mobile 是一头野兽，而且对于性能不佳的移动设备来说几乎是好事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T04:39:02.107

问这个问题已经有一段时间了。但是，我有一个答案。在 second.html 中放置`<script src="Paging.js"></script>`Paging.js 将是您编写函数（您可以在 onClick 事件中调用）的文件，该函数将设置 window.location.href = "http:\...\index.html" 并重定向您到 index.html。但请注意，这不是 jQuery Mobile AJAX 调用，它会再次刷新（从 index.html 下载 js 文件，设置元素，...）页面。

Paging.js 示例：

```
function GotoIndex()
{
  window.location.href = "http:\\...\index.html";
} 
```

second.html 示例：...

```
<a href="#" id="lnkSubmitChanges" onclick="GotoIndex()">Submit</a> 
```

...

如果您问自己，但是如何获取/设置 window.location.href 的变量，您可以在 index.html 中使用 localStorage.setItem('PreviousURL', window.location.href) 并将其读取为 localStorage.getItem( 'PreviousURL') 在 second.html 中。那么 Paging.js 将是：

```
function GotoIndex()
{
  window.location.href = localStorage.getItem('PreviousURL');
} 
```

# .net - Entity Framework 4.1 数据库优先依赖注入工作单元

> ID：13151086
> 
> 赞同：1
> 
> 时间：2012-10-31T04:01:45.533
> 
> 标签：.net, entity-framework, dependency-injection, unit-of-work, ef-database-first

好的，有大量示例使用 Code First 的依赖注入的工作单元，使用通用存储库和所有这些好东西。

有没有人有使用数据库优先（edmx 与 dbContext Generator (T4)）、存储过程作为函数导入、具有依赖注入的工作单元的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:33:02.690

code first 或 dbfirst 的上下文将是相同的 (DbContext)。

存储过程映射到您的存储库中，而不是调用 context.Customers 您调用 context.Database.Query("Proc_whatever")。

是否有您需要帮助的特定位置，我可能有一个代码示例，但上面的所有操作都与 di、代码优先、通用存储库等方式相同。实现 UnitOfWork 的唯一更改是确保您的存储库不调用 SaveChanges，您的 UnitOfWork 接口上有一个名为 Save() 的方法，该方法又调用保存更改。

我将在[https://github.com/adamtuliper/EF5-for-Real-Web-Applications](https://github.com/adamtuliper/EF5-for-Real-Web-Applications)更新代码以包含一个工作单元。虽然我不喜欢这种实现，但感觉有些不对劲，因此我相信它让我更倾向于 CQRS。

所以这里的想法是：注入 IUnitOfWork IUnitOfWork 包含一个 IContext，它也被注入并映射到一个上下文。IUnitOfWork 映射到 UnitOfWork 具体实现。UnitOfWork 具体实现参考了存储库：

这部分超出了我的想法，所以请原谅任何编译错误，这是原则上显示的

```
 public class YourContext : DbContext, IContext
{
   //just a regular DbContext class except use IDbSet
   public IDbSet Customers { get; set; }
}

public interface IUnitOfWork
{
     ICustomerRepository CustomerRepository { get; }
     IOrderRepository OrderRepository { get; }
     void Save();
} 

```

```
 public class UnitOfWork : IUnitOfWork, IDisposable
 {
        private readonly IContext _context;
        private ICustomerRepository _customerRepository;
        private IOrderRepository _orderRepository;
        private bool _disposed = false;

        public UnitOfWork(IContext context)
        {
            _context = context;
        }

        public ICustomerRepository CustomerRepository
        {
            get
            {
                if (this._customerRepository == null)
                {
                    this._customerRepository = new CustomerRepository(_context);
                }
                return _customerRepository;
            }
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this._disposed)
            {
                if (disposing)
                {
                    ((IDisposable)_context).Dispose();
                }
            }
            this._disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        } 
```

```
 public class CustomerController : Controller
{
   private readonly IUnitOfWork _unitOfWork;
   public CustomerController(IUnitOfWork unitOfWork)
   {
      _unitOfWork = unitOfWork;
   }

   [AutoMap(typeof(Customer), typeof(CustomerIndexViewModel)]
   public ActionResult Index()
   {
        return _unitOfWork.CustomersRepository.GetAll();
        //or if not using AutoMapper, use the viewmodel directly:
        //return _unitOfWork.CustomersRepository.GetAll().Select(c => new CustomerIndexViewModel
                                                    {
                                                        CustomerId = c.CustomerId,
                                                        Address = c.Address,
                                                        City = c.City,
                                                        State = c.State,
                                                        FirstName = c.FirstName,
                                                        LastName = c.LastName
                                                    }).ToArray(); ;
   }
} 
```

要使用 proc，请在 CustomerRepository 中执行以下操作：

```
 public Customer GetById(int id)
{
      return this.Context.Database.SqlQuery("Proc_GetCustomer @customerID", new SqlParameter("@customerID", id)).Single();
      //instead of:  return this.Context.Customers.Include(o => o.Orders).Single(o => o.CustomerId == id);
} 
```

# objective-c - Setting a value in an array in obj-c

> ID：13151089
> 
> 赞同：0
> 
> 时间：2012-10-31T04:02:14.150
> 
> 标签：objective-c, ios, nsarray

I know this is a really simple thing in obj-c, but I can't seem to find anywhere (on here or google) how to do this. Basically I just want to replace one array value (the value is a NSString) with another, so something like this...

```
[sharedInstance.groundMap objectAtIndex:ii] = myImage; 
```

But I get an error expression is not assignable. I also tried...

```
[[sharedInstance.groundMap objectAtIndex:ii] setValue:(NSString*) myImage]; 
```

But that gives an error too.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:06:51.977

First, your array needs to be *mutable* (i.e. an instance of `NSMutableArray`, not simply `NSArray`). With `NSMutableArray` you can do this:

```
[sharedInstance.groundMap replaceObjectAtIndex:ii withObject:myImage]; 
```

If you have the latest Xcode, you can use the `array[index] = value` syntax as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:06:30.890

You need to be using an `NSMutableArray` to set a value. Use the `replaceObjectAtIndex:withObject:` method or use the new Objective-C syntax:

```
[sharedInstance.groundMap replaceObjecAtIndex:ii withObject:myImage]; 
```

or

```
sharedInstance.groundMap[ii] = myImage; 
```

Neither works with `NSArray`. Only `NSMutableArray`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:08:06.220

This is what you might want

```
[sharedInstance.groundMap replaceObjectAtIndex:11 withObject:[NSString stringWithFormat:@"test"]]; 
```

# eclipse - 删除 Eclipse src 文件夹

> ID：13151092
> 
> 赞同：1
> 
> 时间：2012-10-31T04:02:27.510
> 
> 标签：eclipse

目前，我的项目有一个名为“（默认包）”的文件夹，它位于 Eclipse 的 src 文件夹中。此文件夹具有 Eclipse 中 src 文件夹的符号。当我运行 .scp 时，它抱怨 src 不是常规文件。我认为原因是我的目录结构 - 那么如何删除 src 并将（默认包）作为我的 src 文件夹？

请注意， src 似乎只是保留（默认包）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T04:12:43.900

您可以选择源文件夹而不是默认文件夹。

```
Project Properties >> Java Build Path >> Source Tab 
```

![更改源文件夹](../Images/98a150cded198a7f34fa2e15192e56ef.png)

# c# - 具有 mvp 模式的 Winform 应用程序中的用户控件

> ID：13151102
> 
> 赞同：0
> 
> 时间：2012-10-31T04:03:43.567
> 
> 标签：c#, .net, winforms, user-controls, mvp

我正在使用 MVP 模式开发 winform 应用程序。我的应用程序中有一些之前创建的用户控件。我的问题是：我应该在这些控件中使用 MVP 吗？也就是说，我有改变他们的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:14:39.747

鉴于[http://webformsmvp.com/](http://webformsmvp.com/)实现，我想说您应该更改现有控件并在内部使用 MVP 模式。

原因是用户控件之间的通信应该是一致的。例如，您是否希望它看起来像这样：

![在此处输入图像描述](../Images/ce394589ce64b0dc58eabb4d49df6eb7.png)

或者更优雅和统一：

![在此处输入图像描述](../Images/26cf486779e65116cec49be4225516e2.png)

# python - Instagram 和 oAuth

> ID：13151106
> 
> 赞同：4
> 
> 时间：2012-10-31T04:04:00.433
> 
> 标签：python, oauth, oauth-2.0

我正在编写一个将与 Instagram 集成的应用程序。为了让我访问某些 API，Instagram 要求我使用 oAuth 进行身份验证。我以前*从未*使用过 oAutho，完全迷失了方向。具体来说，我将在 Python（不是我的强语言）中执行此操作，因此不知道从哪里开始。

所以我知道，在任何事情之前，我都需要获得一个 oAuth 令牌。Instagram 网站给了我一个 client_secret 和一个 client_id。但它也给了我一个重定向 URI。我知道这三个东西应该一起使用，但我不知道如何。

由于这是一个桌面应用程序，我是否需要使用某种 Web 组件？

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:13:27.673

您可能需要像[https://github.com/Instagram/python-instagram](https://github.com/Instagram/python-instagram)这样的模块，

网站上的一个例子

```
from instagram.client import InstagramAPI

api = InstagramAPI(client_id='YOUR_CLIENT_ID', client_secret='YOUR_CLIENT_SECRET')
popular_media = api.media_popular(count=20)
for media in popular_media:
    print media.images['standard_resolution'].url 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-31T22:54:46.033

我实际上会建议你使用一段预先存在的代码来帮助你了解很多 python 如何与 Instagram 一起工作。尝试使用

[https://github.com/oh-moore/followpie](https://github.com/oh-moore/followpie)

或者

[https://github.com/marclave/InstaBot](https://github.com/marclave/InstaBot)

使用其中任何一个都可以帮助您了解 oAuth 的工作原理，并且它们已经带有错误消息、调试等。您只需填写空白并从那里开始破解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:11:52.543

有一些不错的 oAuth python 库可以让这很容易。oAuth 网站上推荐的一种是[`python-oauth2`](https://github.com/simplegeo/python-oauth2).

那里有使用 Django 和 twitter API 的示例——这应该很容易适应 Instagram。

# java - GWT中的DataGrid，无法清除

> ID：13151108
> 
> 赞同：6
> 
> 时间：2012-10-31T04:04:06.500
> 
> 标签：java, gwt, datagrid

我通过单击按钮在 GWT 中填充 DataGrid。它工作正常，但如果我尝试重新填充它，**数据会附加**到现有表中。

我正在使用**UI Binder/GWT 2.5**创建 DataGrid。

我已经尝试过这个：

```
 // My list which gets updated with the response of RPC. Initially it is empty.
    List<List<String>> tableRowData = new ArrayList<List<String>>();
    grid.setRowCount(0); // Clears all data.
    grid.setRowCount(tableRowData.size(), true); // Set the size of the new data.
    grid.setRowData(0, tableRowData); // Set the new data.

    Populate tableRowData...

    Populate data grid // works perfect 
```

同样从 GWT 2.1.1 开始，有一个新方法 setRowData(List)

列表 tableRowData 的每个元素又是一个字符串列表。甚至可以**不使用 ListDataProvider**。不过，这是第一次完美运行。
谁能指出我错过了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:10:36.870

管理小部件的最佳方法`Cell`是使用`DataProvider`. GWT 的展示有一些[详细的示例](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellList)`ListDataProvider`，但只要保证您的列表很小，您应该可以使用简单的。

```
ListDataProvider<List<String>> dataProvider = new ListDataProvider<List<String>>();
dataProvider.addDisplay(dataGrid);

List<List<String>> newData = ...;
dataProvider.getList().clear();
dataProvider.getList().addAll(newData); 
```

有关更多信息，请查看[有关数据提供者的新 GWT 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#data-provider)。感谢[这篇文章](https://stackoverflow.com/a/9455506/151365)的调整。

# google-chrome - 将 PPAPI 插件注册到 Chrome

> ID：13151110
> 
> 赞同：2
> 
> 时间：2012-10-31T04:04:25.510
> 
> 标签：google-chrome, ppapi

我正在为 Chrome 开发一个进程外插件，我需要某种可以被多个进程使用的资源管理机制（共享内存）。然后我找到了 Pepper 插件，它看起来很有希望实现我的目标。

[这里](https://code.google.com/p/ppapi/source/browse/trunk/examples/stub/stub.cc)在 ppapi 示例文件夹中提供了一个简单的存根插件。根据[另一个文档](https://sites.google.com/a/chromium.org/dev/developers/design-documents/pepper-plugin-implementation)，我可以通过以下命令加载它：

```
chrome.exe --ppapi-out-of-process --register-pepper-plugins="[chromium_path]\src\build\Debug\ppapi_example_cc_stub.dll;application/x-ppapi-example-stub" 
```

问题是我没有找到一个干净的方法来加载它而不指定 dll 路径和 MIME 类型，因此可以通过启动 Chrome 可执行文件来简单地加载插件。

我想我需要向 Windows 注册表添加新项目或定义 manifest.json 文件，但我不知道如何。有人可以给我一个想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:53:51.380

我在开发我的 PPAPI 插件时遇到了同样的问题。但是打开 chrome://plugins，里面有 3 个 PPAPI 插件。其他是 NPAPI 插件。我修改了 PPAPI 插件 dll (pdf.dll) 的文件名。重启铬。我发现 chrome 内部 pdf 插件不起作用。

我相信PPAPI插件的注册信息是固定在chrome浏览器的可执行二进制文件中的。搜索铬的来源，我找到[了这个](http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/common/chrome_paths.cc&exact_package=chromium&q=libpdf.so&ct=rc&cd=1&sq=)。

```
// File name of the internal PDF plugin on different platforms.
const FilePath::CharType kInternalPDFPluginFileName[] =
#if defined(OS_WIN)
    FILE_PATH_LITERAL("pdf.dll");
#elif defined(OS_MACOSX)
    FILE_PATH_LITERAL("PDF.plugin");
#else  // Linux and Chrome OS
    FILE_PATH_LITERAL("libpdf.so");
#endif 
```

所以也许 npapi 更实用。

# javascript - 如何使用jQuery获取独立于文档结构的最近或上一个对象？

> ID：13151113
> 
> 赞同：2
> 
> 时间：2012-10-31T04:04:47.077
> 
> 标签：javascript, jquery, ajax, json, xhtml

示例 1：

```
<ul>
   <li id="o1" class="elem">foo1</li>
   <li id="o2" class="elem">foo2</li>
   <li id="o3" class="elem">foo3</li>
</ul>

**$('#o2').exactly_previous('.elem') ----> returns #o1** 
```

示例 2：

```
<ul>
   <li id="o1" class="elem">foo1
      <ul>
         <li id="o11" class="elem"></li>
      </ul>
   </li>
   <li id="o2" class="elem">foo2</li>
   <li id="o3" class="elem">foo3</li>
</ul>

**$('#o2').exactly_previous('.elem') ----> returns #o11
$('#o11').exactly_previous('.elem') ----> returns #o1** 
```

示例 3：

```
<ul>
   <li id="o1" class="elem">fooX</li>
</ul>
<ul>
   <li id="o2" class="elem">fooX</li>
</ul>

**$('#o2').exactly_previous('.elem') ----> returns #o1** 
```

示例 4：

```
<a id="o1" class="elem">fooX</a>
<ul>
   <li id="o2" class="elem">fooX</li>
</ul>

**$('#o2').exactly_previous('.elem') ----> returns #o1** 
```

我希望你能理解我的问题！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:11:03.563

像这样的东西：

```
function exactly_previous($this, selector)
{
    var $all = $(selector);
    return $all.eq($all.index($this)-1);
} 
```

测试：

*   [http://jsfiddle.net/mattball/9aU2H](http://jsfiddle.net/mattball/9aU2H)
*   [http://jsfiddle.net/mattball/9N7aQ](http://jsfiddle.net/mattball/9N7aQ)
*   [http://jsfiddle.net/mattball/3VguQ](http://jsfiddle.net/mattball/3VguQ)
*   [http://jsfiddle.net/mattball/VBC87](http://jsfiddle.net/mattball/VBC87)

将其转换为 jQuery 插件留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:14:47.290

为什么不看看 jQuery [.closest()](http://api.jquery.com/closest/) API。可能有你需要的东西。

此外，还可以查看[.find()](http://api.jquery.com/find/) API，它可能有助于遍历 DOM 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:18:09.020

尝试这个

```
 $('#o2').parent().find('li').slice($('#o2').index() -1,$('#o2').index()) 
```

[演示](http://jsfiddle.net/25Gsw/)

# spring - 从骨干网调用网络服务

> ID：13151114
> 
> 赞同：0
> 
> 时间：2012-10-31T04:04:57.123
> 
> 标签：spring, cordova, backbone.js

目前我可以从 phoneGap 应用程序（移动应用程序）调用网络服务。但现在我希望客户端服务器通信使用`Backbone.js`.

我有一个带有用户名和密码字段的用户模型。我想传递这些参数以进行身份​​验证并从服务器获取响应。我试过这个：

```
var User = Backbone.Model.extend({
    urlRoot: 'http://server_ip/projectName/authenticate'
});

var myUser = new User({ 
    username:"nnj",
    password:"nnj"
});

var fetchSuccess = function(data) {
    alert(data);
};

myUser.fetch({success: fetchSuccess}); 
```

这是我的 Spring 端控制器功能：

```
@RequestMapping(value = "authenticate")
    @ResponseBody
    public String testing(){
        String test="123123";
        return "{"+test+":\"123\"}";
    } 
```

但我无法调用网络服务。

我怎样才能做到这一点？任何链接/参考表示赞赏。

谢谢你。

# shell - 下面的 Makefile/shell/sed 行是做什么的？

> ID：13151117
> 
> 赞同：3
> 
> 时间：2012-10-31T04:05:30.903
> 
> 标签：shell, sed, makefile, fullcalendar

此行直接来自 FullCalendar（一个 jQuery 插件）[Makefile](https://github.com/mooballit/fullcalendar/blob/master/Makefile)。我无法理解它，尤其是带有美元符号的部分。我不知道 make、shell 或 sed 是否“处理”它。我也不清楚其他（显然？） sed 命令。

```
DEMO_RE = (<script[^>]*_loader\.js[^>]*><\/script>|<!--\[\[|\]\]-->)[^<]*
DEMO_SED = sed -nE '1h;1!H;$${;g;s/${DEMO_RE}//g;p;}' 
```

1.  1h有什么作用？
2.  美元符号和括号在哪里以及如何解释？
3.  第一个 g 命令和最后一个 p 命令（打印？）做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T05:09:17.130

那是相当牛黄。

`DEMO_RE`是一个正则表达式。粗略地说，这意味着它是对另一个字符序列的描述。任何给定的字符序列要么匹配此正则表达式，要么不匹配。

`DEMO_SED`是一个 sed 命令。在这个阶段，它只是一个 Make 变量，一个字符序列，但稍后可以将其传递给 shell（在 Make 变量扩展之后），shell 会将其解释为 sed 命令。

我不完全理解这个 sed 命令，但这是我最好的尝试。从中间开始：

```
sed 's/${DEMO_RE}//' 
```

Make 将扩展`${DEMO_RE}`为第一行中的 gobbledegook 字符串，查找与正在考虑的任何文本行的匹配，并将匹配的文本更改为空（即删除它）。

```
sed 's/${DEMO_RE}//g' 
```

命令的`g`修饰符`s`意味着对所有匹配项进行替换（在本例中为删除），而不仅仅是找到的第一个匹配项。

```
sed -nE 's/${DEMO_RE}//g;p' 
```

该`-n`方法默认情况下不打印结果。该`p`方法打印模式空间的内容，因此目前这些更改相互抵消。该`E`方法将正则表达式解释为扩展的正则表达式，而不是基本的正则表达式。

```
sed -nE '{s/${DEMO_RE}//g;p}' 
```

花括号将这些命令分组。

```
sed -nE '${;g;s/${DEMO_RE}//g;p;}' 
```

现在事情变得复杂了。Sed 有第二个缓冲区，称为保持空间。该`g`命令将保持空间的内容复制到模式空间（这是人们通常使用的缓冲区，也是大多数人知道的唯一一个）。在我们考虑将把东西*放入*保持空间的其他命令之前，这没有多大意义。这`$`意味着仅当 sed 到达输入的最后一行时才应应用此命令（大括号的内容）。**我认为前导分号没有任何用途，但我不敢说它绝对没有任何作用。**现在，为了便于阅读，我将省略替换命令。

```
sed -nE '$${;g;p;}' 
```

由于 Make 尝试扩展以 开头的内容`$`，并且我们想将 '$' 原封不动地传递给 sed，因此我们用另一个 '$' 对其进行转义。Make 将扩展`$$`并`$`传递`${...`给 shell（它将传递给 sed）。

```
sed -nE '1h;1!H;$${;g;p;}' 
```

这`1h`意味着将输入的第一行复制到保持空间。该方法将除第一行*之外*`1!H`的每一行附加到保留空间。记住; 在 sed 执行花括号中的命令组之前不会打印任何内容，这只会在读入最后一行输入时发生。所以：*`-n`*

 *```
sed -nE '1h;1!H;$${;g;s/${DEMO_RE}//g;p;}' 
```

“将所有输入读入保留空间，不打印任何内容，然后在最后将其全部拉回，切除与（可能扩展的）匹配的所有内容，并打印剩下的所有内容。”

这个答案变得很长；我可以给你一个正则表达式的粗略翻译，但是以一种不会混淆这个媒介的方式这样做是一种痛苦。它似乎想要匹配任何被`script`标签 or`<!--[[`包围的东西`]]-->`，以及所有这些都跟随到下一个标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T04:26:50.183

Beta 在分解 sed 脚本方面做得非常出色，一个逻辑块一个逻辑块。sed 脚本从输入文本中删除某些 JavaScript 块。他的最终总结可能就是你所需要的。如果你想要一个更短的答案，那就去吧。

你提到的令人困惑的部分是美元符号。

```
 ┌ Double $ is actually just an "escaped" $ character
        │       ┌ Starts a variable reference
        │       │
'1h;1!H;$${;g;s/${DEMO_RE}//g;p;}'
          │     │        │      │
          │     └variable┘      │
          └ Stuff run at EOF ───┘ 
```

第一对美元符号构成一个美元符号，sed 将其解释为“在文件末尾”。因此，外部大括号之间的内容在 EOF 处运行。内部大括号采用 的形式`${VARNAME}`，这是 Make 引用变量的方式。它看起来像一个 shell 变量引用，但它不是。

在这种情况下，因为 Make 变量赋值实际上并没有执行任何操作，所以您的`DEMO_SED`变量被分配了其中的内容`DEMO_RE`。具有讽刺意味的是，将其拆分为两个变量的原因是为了使整个过程更具可读性。:-)

请注意，这些实际上都不会*执行*任何操作（即 sed）。它只分配变量。稍后在您的 Makefile 中，您可能有一个目标，其中一行可能类似于：

```
${DEMO_SED} path/to/file.html.orig > path/to/file.html 
```

正是在这一点上，所有这些都变成了功能性的东西。*

# forms - Symfony2 DataTransfomer 取决于第二个值？

> ID：13151122
> 
> 赞同：0
> 
> 时间：2012-10-31T04:06:15.300
> 
> 标签：forms, symfony

我有一个模型，其中 Appointment 对象与 Reminder 对象具有 OneToMany 关系。我想在约会表单中嵌入一组提醒表单。Appointment 对象具有 Appointment.Date 属性。Reminder 对象还有一个属性 Reminder.Date。

我创建了一个名为“IntervalType”的自定义类型，由一个“数字”下拉列表和一个“单位”下拉列表组成，用于 Reminder.Date 输入。这个想法是用户选择一个数字和一个单位（“1小时”，“2天”等）。

然后，我需要将“2 天”转换为 Reminder.Date 的 DateTime 值，该值比 Appointment.Date 早 2 天。我试图弄清楚如何使用名为“IntervalToDateTransformer”的自定义 DataTransformer 来做到这一点。我可以将数据转换器添加到 Reminder 表单或 IntervalType 输入等，但是如何让转换器知道 Reminder 的父 Appointment.Date 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:33:14.450

起初我认为这是不可能的，因为我之前在这个问题上做过一些研究。我决定试一试，我让它工作了。基本上我创建了一个自定义表单类型，它有两个字段问题和选项。然后我设法在数据转换类中获得了这两个值，它们可以用于转换。这是文件。

```
Note that the 'option' field is not used, but I did verify 
it was accessible from the data transformer.

Also, I could not manage to render the validation messages declared 
on the data transform class when transformation fails. I stopped 
there, but if you manage to do it let me know. 
```

第一个表单类型

```
class IssueSelectorType extends AbstractType
{

    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('number', 'text', array(
                // 'mapped' => false
        ));
        $builder->add('option', 'choice', array(
                // 'mapped' => false
        ));

          $transformer = new IssueToNumberTransformer($this->om);
          $builder->addViewTransformer($transformer);
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'invalid_message' => 'The selected issue does not exist',
        ));
    }

    public function getName()
    {
        return 'issue_selector';
    }

    public function getParent()
    {
        return 'field';
    }

} 
```

数据转换器类：

```
class IssueToNumberTransformer implements DataTransformerInterface
{

    /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    /**
     * Transforms an object (issue) to a array .
     *
     * @param  Issue|null $issue
     * @return array
     */
    public function transform($issue)
    {
        if (null === $issue)
        {

            return array(
                'number' => 0,
                'option' => 0
                    );
        }

        return array(
            'number' => $issue->id,
            'option' => 0
        );
    }

    /**
     * Transforms a array  to an object (issue).
     *
     * @param  array $value
     * @return Issue|null
     * @throws TransformationFailedException if object (issue) is not found.
     */
    public function reverseTransform($value)
    {
        if (null === $value)
        {
            return null;
        }

        if (!is_array($value))
        {
            throw new UnexpectedTypeException($value, 'array');
        }
        $number = $value['number'] ;
        $option = $value['option'] ;

        $issue = $this->om
                ->getRepository('AcmeTransformerBundle:Issue')
                ->findOneBy(array('id' => $number))
        ;

        if (null === $issue)
        {
            throw new TransformationFailedException(sprintf(
                            'An issue with number "%s" does not exist!', $number
            ));
        }

        return $issue;
    }
} 
```

# iphone - sqlite中的数据库被锁定错误

> ID：13151128
> 
> 赞同：1
> 
> 时间：2012-10-31T04:07:07.897
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, sqlite

我正在使用 sqlite 数据库来存储我的数据。但是在插入查询时它显示“数据库已锁定”的错误。这是我的代码

```
 sqlite3_stmt    *statement;
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        const char *dbpath = [[defaults objectForKey:@"dbpath"] UTF8String];

        if (sqlite3_open(dbpath, &studentDB22) == SQLITE_OK)
        {
            NSString *insertSQL = [NSString stringWithFormat:@"INSERT INTO Emotion_videos (name) VALUES (\"%@\")",filePath];
            const char *query_stmt = [insertSQL UTF8String];
                if (sqlite3_prepare_v2(studentDB22, query_stmt, -1, &statement, NULL) == SQLITE_OK)
                {
                    NSLog(@"shi h2345");
                    if (sqlite3_step(statement) == SQLITE_ROW)
                    {
                        printf( "could not prepare statement: %s\n", sqlite3_errmsg(studentDB22));

                    }

                }
            sqlite3_finalize(statement);
        }
        else
        {
                   printf( "could not prepare statement: %s\n", sqlite3_errmsg(studentDB22));
        } 
```

我可以插入数据两到三次，但是当它再次运行时，它显示数据库锁定错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:17:08.823

您打开数据库，但没有关闭它。

您不应该使用字符串格式来创建查询。你应该把？然后查询中的占位符绑定正确的值。这会处理诸如正确引用和转义字符串值之类的事情。

```
NSString *insertSQL = @"INSERT INTO Emotion_videos (name) VALUES (?)"; 
```

准备好语句后，调用`sqlite3_bind_text`绑定字符串值。

还。不使用`sqlite3_open`，使用`sqlite3_open_v2`。它更好，并为您提供更多控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:23:51.220

您在创建数据库连接时错过了重要步骤之一：-

如果已建立连接，请在创建连接之前关闭数据库连接。

```
 if (sqlite3_open([[self dataFilePath] UTF8String], &database)
    != SQLITE_OK) { sqlite3_close(database); NSAssert(0, @"Failed to open database");
    } 
```

在函数末尾使用：-

```
sqlite3_close(database); 
```

# silverlight - 绑定Grid的列数和行数

> ID：13151133
> 
> 赞同：0
> 
> 时间：2012-10-31T04:07:28.100
> 
> 标签：silverlight, windows-phone-7, mvvm, binding, grid

我有一个 WP7 应用程序，到目前为止，我已经在 MVVM 框架中实现了。

我现在想扩展这个应用程序，其中一部分涉及一个网格，我不确定我是否可以通过绑定来做我想做的事情。具体来说

将需要可变数量的列 - 我不知道如何通过绑定来做到这一点。如果可以的话，我想根据列数改变列的宽度

与涉及可变数量的行相同。

我可以使用此处所需的所有信息设置一个 VM，但我看不到我可以绑定到 Grid 以使其工作。我还想在网格中包含一些变量数据，但我看不出如何通过绑定来做到这一点。与我刚刚绑定到对象集合的列表框配合得很好，但这是完全不同的。

这是我应该在后面的代码中生成的情况吗？我很高兴这样做......但如果可能的话，我很乐意尝试通过绑定来做到这一点。

*   谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:37:29.183

您可以扩展当前的 Grid 控件并添加一些自定义依赖属性（EG 列和行）并绑定到这些。这将允许您保持 MVVM 模式。

例如

```
public class MyGridControl : Grid
{
    public static readonly DependencyProperty RowsProperty =
        DependencyProperty.Register("Rows", typeof(int), typeof(MyGridControl), new PropertyMetadata(RowsChanged));

    public static readonly DependencyProperty ColumnsProperty =
        DependencyProperty.Register("Columns", typeof(int), typeof(MyGridControl), new PropertyMetadata(ColumnsChanged));

    public static void RowsChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        ((MyGridControl)sender).RowsChanged();
    }

    public static void ColumnsChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        ((MyGridControl)sender).ColumnsChanged();
    }

    public int Rows
    {
        get { return (int)GetValue(RowsProperty); }
        set { SetValue(RowsProperty, value); }
    }

    public int Columns
    {
        get { return (int)GetValue(ColumnsProperty); }
        set { SetValue(ColumnsProperty, value); }
    }

    public void RowsChanged()
    {
        //Do stuff with this.Rows
        //E.G. Set the Row Definitions and heights
    }

    public void ColumnsChanged()
    {
        //Do stuff with this.Columns
        //E.G. Set the Column definitions and widths
    }
} 
```

如果您的 VM 具有“行”和“列”属性，则 XAML 将如下所示：

```
<local:MyGridControl
  Rows="{Binding Rows}"
  Columns="{Binding Columns}">
</local:MyGridControl> 
```

# blackberry - 如何从黑莓中的 P12 文件实例化 X509Certificate

> ID：13151134
> 
> 赞同：1
> 
> 时间：2012-10-31T04:07:34.000
> 
> 标签：blackberry, java-me, keystore, x509, pkcs#12

我有一个有效的 P12 文件。我需要实例化一个 X509certificate 对象，以便可以将其用作客户端证书。

我意识到这里已经回答了一个类似的问题，[How to instantiate javax.security.X509Certficate object from a p12 certificate (contains certificate + private key)](https://stackoverflow.com/questions/4030585/how-to-instantiate-javax-security-x509certficate-object-from-a-p12-certificate)

但是在 Blackberry 中，keyStore 没有 getInstance(String) 方法。它可用于 DeviceKeyStore 和 TrustedKeyStore。但是我们不能将“PKCS12”参数传递给 getInstance() 方法。

DeviceKeyStore 或 TrustedKeyStore 也没有这些`load`方法。他们有`set`方法。但我不确定我们如何将 fileinputstream 参数传递给那个。

有没有人试过这个？你知道有哪些替代方法可用吗？

谢谢你的帮助。

编辑：有一种方法可以为 PEM 文件执行此操作，（[使用 BlackBerry App 安装 SSL 证书](https://stackoverflow.com/questions/9132234/install-ssl-certificate-with-blackberry-app)）这是我最初用来尝试使其工作的方法。但格式不同。PEM 是 Base64 格式，它只包含证书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:26:15.767

You can invoke an external application for doing that. There is a partial solution: [http://supportforums.blackberry.com/t5/Java-Development/Handling-a-p12-certificate-store/td-p/654127](http://supportforums.blackberry.com/t5/Java-Development/Handling-a-p12-certificate-store/td-p/654127)

But for some reason you don't get the import menu! The piece of code:

```
Invocation certInvocation = new Invocation( "path to .p12 on SD Card");
certInvocation.setResponseRequired( false );
certInvocation.setID( BlackBerryContentHandler.ID_MEDIA_CONTENT_HANDLER );
certInvocation.setAction( ContentHandler.ACTION_OPEN );
certInvocation.setType( "application/x-pkcs12" );

Registry registry = Registry.getRegistry( Application.class.getName() );
try {

    registry.invoke( certInvocation );
}
catch (Throwable t) {} 
```

# javascript - 我的 jquery 插件和访问全局似乎不合适。更好的方法？

> ID：13151135
> 
> 赞同：0
> 
> 时间：2012-10-31T04:07:46.040
> 
> 标签：javascript, jquery

我问了一个之前的问题，我觉得我不够简洁。所以，这是我的代码示例和我对全局的访问。我觉得这是一种不好的形式，但是鉴于我的插件格式，我找不到另一种方法来做到这一点。

我相信我可以将我的函数应用于方法 var，然后通过调用中的插件实例化它，但到目前为止 - 我的插件没有像那样设置，并且认为这可能更有效。但我想听听更有经验的 jQuery 插件创建者的意见。

用法：数据是前端加载的。随着动态内容的创建。我狼吞虎咽地收集了一些相关信息，将其捆绑起来，发送一个 ajax 调用 - 然后更新视图。事情是。我的插件可以在一个页面上被多次调用。但问题是我需要在调用我的插件之前获取一些数据对象，这样我就可以对它们进行操作并确定“我需要更新什么”。所以这是我的问题。我需要在插件之外获取一些数据。那我需要把它传进去。这被认为是“合适的”吗？

我希望我可以将数据汇集到插件的一个方法中，然后当我调用它时，我有数据可以做出一些显示选择。

```
if ( typeof Object.create !== 'function' ) {
Object.create = function( obj ) {
    function F() {};
    F.prototype = obj;
    return new F();
};
}
// this is the global that I push each reiteration of data into.
var perLineDataArray = [];
(function( $, window, document, undefined ) {
var Sustainability = {
    _init: function( options, elem ) {
        var self = this;
        self.elem = elem;
        self.$elem = $( elem );
        /* plugin call has all the data I need, I pass it in here */
        self.perLineData = groupedperLineData;
        self.url = 'path_to_url/sustainability';
        self.options = $.extend( {}, $.fn.querysustainability.options, options );
        self._extractUrlData();
        self._cleanup();

    },
            _extractUrlData: function(){
               // this is where I would go thru each of the data objects and 
               // determine WHAT in the view needs updating based on some critera.
            },
    _getsustain: function()
            {
              var self = this;
              $.ajax({
                       // my ajax call data
                            success: function(data){
                                this._buildUpdate(data);
                            }
                  });
            },
    _buildDispaly: function( results ) {
        var self = this;
        self.sustainability = $.map( results, function( obj, i) {
            return $( self.options.wrapDisplay ).append ( obj.text )[0];
        });
    },
            _cleanup: function(){
               // clean out global array for next funneling of grouped up data
               perLineDataArray = [];
            },
    _showMessage: function() {
        var self = this;
        self.$elem[ self.options.transition ]( 500, function() {
             $(this).html( self.sustainability )[ self.options.transition ]( 500 );
        });

    },
};
$.fn.querysustainability = function( options, method ) {
    return this.each(function() {
        var sustainability = Object.create( sustainability );
        sustainability._init( options, this );
        $.data( this, 'querysustainability', sustainability );
    });
};

$.fn.querysustainability.options = {
    display: '<span></span>',
    usedClass : 'uniqueclass',
    transition: 'fadeToggle'
};

 })( jQuery, window, document ); 
```

我还没有完成所有代码，但这就是 jist .. 所以这就是我将数据推送到全局的方式。

```
 //Some reiteration of building of HTML dom element displays.
 perLineDataArray.push(some_per_iteration_obj); 
```

然后，当显示构建完成并且我拥有所需的所有对象时 - 然后我调用插件。

```
 jQuery('#planets').querysustainability({
        groupedperLineData: perLineDataArray
     }); 
```

或者我可以在这里添加全局：

```
 $.fn.querysustainability.options = {
    display: '<span></span>',
    usedClass : 'uniqueclass',
    transition: 'fadeToggle',
    groupedperLineData: perLineDataArray
}; 
```

我的直觉告诉我我希望插件封装所有内容，但我的另一部分感觉我需要传递我需要操作的内容，现在让我的插件检索它。

那么，有没有办法调用插件的子方法，存储数据集，然后当我调用插件时，它已经准备好数据了吗？

你的意见？如果你觉得我应该如何解决这个问题，代码明智？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:29:48.793

好的，正如评论中提到的，以下是我最基本的 jQuery 插件布局模板。从中你可以设计几乎任何你想要的 jQuery 插件，并拥有大量的多功能性。这很不言自明。看看它，如果它有帮助，很好，如果没有让我知道，我会删除它作为答案。

```
/*  Example Plug-in Setup   */
(function($) {
    if (!$.myExample) { // your plugin namespace
        $.extend({
            myExample: function(elm, command, args) {
                return elm.each(function(index){
                    // do work to each element as its passed through
                    // be sure to use something like
                    //      return elm.each(function(e) { dor work });
                    // as your final statement in order to maintain "chainability"
                });
            }
        });
        $.fn.extend({
            myExample: function(command) {
                return $.myExample($(this), command, Array.prototype.slice.call(arguments, 1));
            }
        });
        $.myExample.props = {
            key1: "value",
            key2: "value"
        };
        $.myExample.methods = {
            key1: function(param) {

            },
            key2: function(param) {

            }
        };
        $.myExample.init = function(param) {
            var key = "value",
                key2 = {
                    subKey: "value"
                };
                /*
                /  run any number of initializing functions here
                /  I prefer to make my param a value that can be a
                /   string with a possible object
                /    the string for holding a base configuration
                /    the object for any change in properties or base values for that config
                */
        };
        $.myExample.defaults = {
            key1: "value",
            key2: {
                prop1: {
                    subKey1: "value",
                    subKey2: "value"
                },
                prop2: {
                    subKey1: "value"
                }
            },
            key3: function(param) {

            }
        };
    }
})(jQuery); 
```

# php - Android - 将 sqlite 数据和照片上传到服务器

> ID：13151138
> 
> 赞同：1
> 
> 时间：2012-10-31T04:08:22.037
> 
> 标签：php, android, sqlite, file-upload

您好，我有几个问题。

我有一个应用程序在用户登录或注销时存储用户的日志数据。登录或注销后，系统会提示用户拍照，并将其存储在具有自定义文件名的自定义文件夹中。有关时间戳、文件名、房间、文件路径等的数据存储在 SQLite 数据库中。我知道它已正确存储，因为我能够正确查看 ListView 中的结果。

第二步是将上述数据库与照片一起上传到在线服务器（我猜类似于 CPanel）。在这里，我得到的印象是我需要导出 SQLite 数据库并上传。上述文件夹中的照片也是如此。

所以这是我的问题：

1.  导出 SQLite 数据库的最佳方式是什么，记住它将被上传到在线服务器？我知道可以将 SQLite 导出为 CSV，但是可以将 SQLite 数据库导出为查询吗？
2.  是否可以将智能手机文件夹中的照片上传到服务器中的另一个文件夹？
3.  我是否需要做一些后端 php 脚本来破坏数据库和照片上传到服务器的方式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:15:55.917

> 导出 SQLite 数据库的最佳方式是什么，记住它将被上传到在线服务器？

将数据而不是数据库本身上传到您的 Web 服务器。这可以使用 RESTful Web 服务来完成。

> 我知道可以将 SQLite 导出为 CSV，但是可以将 SQLite 数据库导出为查询吗？

是的，这是可能的，但您必须生成自己的 SQL 查询，因为`SQLite`方言与方言不同`MySQL`。

> 是否可以将智能手机文件夹中的照片上传到服务器中的另一个文件夹？

对的，这是可能的。使用 Web 服务/FTP 服务器/HTTP 文件服务器

> 我是否需要做一些后端 php 脚本来破坏数据库和照片上传到服务器的方式？

是的，您将需要一个 Web 服务来为您完成任务。

# security - 表示密钥长度

> ID：13151140
> 
> 赞同：2
> 
> 时间：2012-10-31T04:08:27.317
> 
> 标签：security, node.js, session, express, sha256

对于用于在连接/表达中加密散列会话数据的密钥长度是否有任何建议？我看到了从 60 多个字符串到规范的“键盘猫”的所有内容。

对于我的直接用例，我打算对整个站点使用 SSL，暴力攻击的回报是中低。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:39:29.487

显然越长越好，但让它 60+ 有点矫枉过正。如果密钥是一个随机字符串（它应该是），那么您是否意识到您可以使用 60 个字符获得多少组合？很多。:)

# groovy - Gremlin 在存储 GremlinGroovyPipeline 并在其上调用 .count() 时

> ID：13151141
> 
> 赞同：2
> 
> 时间：2012-10-31T04:08:27.587
> 
> 标签：groovy, gremlin

这按预期工作：

```
gremlin> root.out.outE.has('size', 4).count()
==>3
gremlin> result = root.out.outE.has('size', 4).count()
==>3
gremlin> result
==>3
gremlin> root.out.outE.has('count', 4).getClass()         
==>class com.tinkerpop.gremlin.groovy.GremlinGroovyPipeline 
```

当我将其存储`GremlinGroovyPipeline`到变量中时，我不能再`count()`这样做了：

```
gremlin> result = root.out.outE.has('size', 4)        
==>e[359:200:36028797018964014][200-sizes->40]
==>e[669:404:36028797018964014][404-sizes->400]
==>e[855:516:36028797018964014][516-sizes->524]
gremlin> result.count()
==>0
gremlin> result.getClass()
==>class com.tinkerpop.gremlin.groovy.GremlinGroovyPipeline 
```

这对我来说很奇怪。似乎一旦分配了变量，结果就消失了。

我在 BDB 上使用 Titan。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-17T12:11:39.550

管道是一个迭代器，所以一旦管道用尽，它就是“空的”。Gremlin 控制台会自动为您迭代管道，因此即使您已将管道存储到变量中，它也会有效地耗尽列表。

为了清楚起见，考虑这个例子

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> pipeline=g.v(1).out
==>v[2]
==>v[4]
==>v[3]
gremlin> pipeline.next()
com.tinkerpop.pipes.util.FastNoSuchElementException
Display stack trace? [yN] n
gremlin> pipeline.count()
==>0 
```

请注意，就像您的示例一样，管道中没有任何内容。所以......如果你想将非迭代管道“存储”在一个变量中以供以后评估，你需要防止控制台自动迭代它：

```
gremlin> pipeline=g.v(1).out;null
==>null
gremlin> pipeline.count()        
==>3 
```

当然，一旦你迭代它......它是空的：

```
gremlin> pipeline.count()
==>0 
```

并且您必须再次初始化该管道：

```
gremlin> pipeline=g.v(1).out;null
==>null
gremlin> pipeline.next()         
==>v[2]
gremlin> pipeline.next()
==>v[4]
gremlin> pipeline.next()
==>v[3]
gremlin> pipeline.next()
com.tinkerpop.pipes.util.FastNoSuchElementException
Display stack trace? [yN] n
gremlin> pipeline.count()        
==>0 
```

因此，如果您想继续使用结果，您可以做的最好的事情就是迭代到一个列表，就像您在回复自己时所做的那样。

```
gremlin> l=[];g.v(1).out.fill(l)    
==>v[2]
==>v[4]
==>v[3]
gremlin> l.size()
==>3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:15:53.377

我发现的一个解决方案是首先将其转换为列表，但似乎并不理想，也没有真正告诉我为什么这个变量的行为不同：

```
gremlin> result = root.out.outE.has('size', 4).toList()
==>e[359:200:36028797018964014][200-sizes->40]
==>e[669:404:36028797018964014][404-sizes->400]
==>e[855:516:36028797018964014][516-sizes->524]
gremlin> result.size()
==>3 
```

# ruby - 耙中止！语法错误，意外的 tLSHFT

> ID：13151144
> 
> 赞同：1
> 
> 时间：2012-10-31T04:09:04.290
> 
> 标签：ruby, rake

我使用山狮，我安装了 ruby​​-1.9.3-p125。我使用`rake new_post['test']`，终端返回信息：

```
rake aborted!
/Users/John/octopress/Rakefile:10: syntax error, unexpected tLSHFT, expecting $end
<<<<<<< HEAD
  ^ 
```

我该如何解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T04:14:19.570

看起来您在上次 git 合并期间发生了冲突，您应该也可以看到类似`======`和`>>>>>>>>`附近的东西。修复合并冲突，然后重试。

# git - Git：将暂存文件与工作树中的文件合并

> ID：13151154
> 
> 赞同：1
> 
> 时间：2012-10-31T04:10:46.947
> 
> 标签：git

我有一个名为`foo`. `M1`我对它进行了一些修改`foo`并暂存。然后我通过从 中检出它在工作树中恢复它，并对它`HEAD`进行另一次修改`M2`。现在我想在提交之前合并这两个修改。如何才能做到这一点？谢谢！

（我知道分支是用于这种工作的。但我想知道是否有办法将暂存文件与工作树中的修改版本合并。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:12:49.273

最好的方法是存储：

```
# modify file
git stash -u
# modify file in a different way
git add -A && git commit -m "M2"
git stash pop
# resolve conflicts
git add -A && git commit --amend -m "M1 and M2 merged" 
```

没有要处理的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:18:19.683

最明显的解决方案是创建两个提交，然后合并它们。这是相当安全的，因为一旦您将更改放入两个不同的提交中，就很难丢失它们，如果合并没有按照您的意愿进行，您可以丢弃合并提交并重试。

对于第一次提交，您已经进行了更改，所以`git commit`应该足够了。

其次，您的工作副本中有一个状态，表示对原始`HEAD`. 但是现在你已经完成了那个提交，有一个介入；`HEAD`是索引中的内容，因此看起来您的工作副本恢复了这些更改。为了解决这个问题，我们需要重置我们的`HEAD`点，而不改变工作副本中的内容。

在此之前，让我们保存一个指向当前`HEAD`:的指针`git branch was-in-index`。现在我们可以使用 重置为之前`HEAD`的（父级`HEAD`）`git reset HEAD^`，并添加并提交我们的更改`git add some stuff; git commit`（或者`git commit -a`，如果您想要所有更改）。

现在我们有两个分支；我们当前的，其中包含来自工作副本的更改，并且`was-in-index`，其中包含索引中的更改。现在您可以根据需要合并它们；`git merge was-in-index`, `git rebase was-in-index`, 或者你有什么。完成后可以删除`was-in-index`分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:44:57.037

最简单的方法是 4 步过程。

1.  `git commit`对 foo 的分阶段更改。
2.  修改 foo，在 M1 之上添加 M2
3.  `git add foo`，将 M2 放在暂存区。
4.  `git commit --amend`，将 M1 与 M2 合并。

这并不完全是您所要求的，但我相信这是获得您所要求的结果的最有效方式。

# .htaccess - 如何让 symfony 跳过报告“解析 url 后为空模块和/或操作”的 url？

> ID：13151160
> 
> 赞同：0
> 
> 时间：2012-10-31T04:11:17.073
> 
> 标签：.htaccess, module, symfony1, action

我无法访问特定的 URL，因为 symfony 假设应该为它设置一个路由。

我在 .htaccess 中指定忽略此目录中的所有 url。除了一个特定的 URL 之外，它似乎可以工作。

在 .htaccess 中，我试图让 symfony 从这个目录中排除这些 URL，方法是：

```
 RewriteRule ^shop/.*$ - [PT,L] 
```

但是，当访问此目录中的特定 URL 时，我继续收到空模块和/或操作错误。

收到的错误是：解析 URL “/shop/modules/checkout/googlecheckout/xml.php” (/) 后的空模块和/或操作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:24:41.727

Symfony 仅在 url 指向未找到的文件时处理请求。确保

```
/shop/modules/checkout/googlecheckout/xml.php 
```

是可以访问的。

使用默认配置，文件的路径应该是

```
symfony2_root/web/shop/modules/checkout/googlecheckout/xml.php 
```

您可以通过在您的 web 目录中创建一个测试文件来测试它，然后尝试通过简单地访问来访问该文件

```
domain/test.php 
```

由于问题中的标签，我假设您正在使用 Symfony2。您提到了模块，但据我所知，模块不是 Symfony2 中使用的术语。

# python - 显示指向创建的新网页的链接

> ID：13151161
> 
> 赞同：3
> 
> 时间：2012-10-31T04:11:33.250
> 
> 标签：python, heroku, flask

我正在用 Python（使用 heroku）建立一个网站，我想创建一个“最新提交”部分。也就是说，当我`@app.route(blah)`在我的 Python 应用程序中创建一个新的应用程序时，我希望一个指向新页面的链接显示在我主页的“最新提交”部分下。

这可能吗？

编辑：这是我的代码

```
import os
import json
from flask import Flask, render_template, url_for
from werkzeug.routing import Map, Rule, NotFound, RequestRedirect, BaseConverter

app = Flask(__name__)

@app.route('/')
def index():
    return  render_template('welcome.html')

@app.route('/about', endpoint='about')
def index():
    return  render_template('about.html')

@app.route('/contact', endpoint='contact')
def index():
    return  render_template('contact.html')

@app.route('/all-links', endpoint='all-links')
def all_links():
    links = []
    for rule in app.url_map.iter_rules():
        url = url_for(rule.endpoint)
        links.append((url, rule.endpoint))
    return render_template('all_links.html', links=links)

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

和 all_links.html 文件

```
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <title>links</title>
    </head>
    <body>
        <ul>
            {% for url, endpoint in links %}
            <li><a href="{{ url }}">{{ endpoint }}</a></li>
            {% endfor %}
        </ul>    
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T15:39:13.883

应用程序的所有路由都存储[`app.url_map`](http://flask.pocoo.org/docs/api/#flask.Flask.url_map)在[`werkzeug.routing.Map`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map). [`Rule`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule)话虽如此，您可以使用以下方法迭代实例[`iter_rules`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map.iter_rules)：

```
from flask import Flask, render_template, url_for

app = Flask(__name__)

@app.route("/all-links")
def all_links():
    links = []
    for rule in app.url_map.iter_rules():
        if len(rule.defaults) >= len(rule.arguments):
            url = url_for(rule.endpoint, **(rule.defaults or {}))
            links.append((url, rule.endpoint))
    return render_template("all_links.html", links=links) 
```

```
{# all_links.html #}
<ul>
{% for url, endpoint in links %}
<li><a href="{{ url }}">{{ endpoint }}</a></li>
{% endfor %}
</ul> 
```

# php - 使用 yii 框架添加注册到主页

> ID：13151163
> 
> 赞同：0
> 
> 时间：2012-10-31T04:11:46.417
> 
> 标签：php, yii, registration

我们正在尝试为我们的 yii 应用程序添加一个新的用户注册到我们的主页。我们已经成功创建了一个连接到 mysql 数据库的单独注册页面，我们现在正尝试将此功能添加到 index.php，而不是视图中的单独 register.php。

我们尝试更改 SiteController 中的 actionIndex() 以发送注册表单：

```
public function actionIndex()
{
    $registerForm = new RegisterForm();
    $this->render('index', array('registerForm'=>$registerForm));
} 
```

我们的 index.php 出现错误：“未定义变量：registerForm” 以下是 index.php 中的相关代码：

```
<?php $form=$this->beginWidget('CActiveForm', array(
'action' => array('site/register'),
'id'=>'registration-form',
'enableClientValidation'=>true,
'clientOptions'=>array(
    'validateOnSubmit'=>true,
        ),
    )); ?>

<?php echo $form->textField($registerForm,'username'); ?>

<?php echo $form->passwordField($registerForm,'password'); ?>

<?php echo CHtml::submitButton('Register'); ?>

<?php $this->endWidget(); ?> 
```

谢谢！

# java - Collections.synchronizedMap(new LinkedHashMap()); 没有使 Map 线程安全

> ID：13151166
> 
> 赞同：6
> 
> 时间：2012-10-31T04:11:54.127
> 
> 标签：java, multithreading, concurrency, thread-safety

我正在使用以下构造来创建 threadsafe `Map`。

```
Collections.synchronizedMap(new LinkedHashMap()); 
```

虽然我遇到了`ConcurrentModificationException`错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T04:14:43.240

没有代码很难猜出真正的问题是什么，但我的猜测是，您没有使用返回的集合来执行操作。根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedCollection%28java.util.Collection%29)

> 为了保证串行访问，对后备集合的所有访问都是通过返回的集合完成的，这一点至关重要。当迭代它时，用户必须手动同步返回的集合：

```
 Collection c = Collections.synchronizedCollection(myCollection);
     ...
  synchronized(c) {
      Iterator i = c.iterator(); // Must be in the synchronized block
      while (i.hasNext())
         foo(i.next());
  } 
```

不遵循此建议可能会导致不确定的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T05:03:12.517

不要贬低这里的任何其他答案，但下面的代码表明并发修改与实际的多线程几乎没有关系。当您说迭代集合但在迭代时对其进行修改时会引起这种情况......

```
 List list = new ArrayList();
  list.add("1");
  list.add("2");

  Iterator i = list.iterator();
  while (i.hasNext()) {
      Object value = i.next();  // throws java.util.ConcurrentModificationException

      list.add("another");  
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T04:30:18.647

长话短说，`ConcurrentModificationException`在您的代码中不包含 a 的解决方案是使用 a`ConcurrentHashMap`而不是`Collections.synchronizedMap(new LinkedHashMap());`. 这里的解释：

*   [ConcurrentHashMap 和 Collections.synchronizedMap(Map) 有什么区别？](https://stackoverflow.com/q/510632/1065197)

正如 Nambari 所说，如果没有实际代码，问题就更难识别。请注意，这`Map`仅保护包含的对象。不过，您可以在方法中修改相同的对象实例：

```
Map<String, Object> map = new ConcurrentHashMap<String, Object();
//fill the map...
map.put("data", new Data());

//and now we have this unsynchronized method that two or more threads can access at the same time
public void modifyData(String key, int newDataIntValue) {
    //this is synchronized by the ConcurrentHashMap
    Data data = map.get(key);
    //this isn't
    //you can get problems here...
    data.setIntValue(newDataIntValue);
} 
```

同步集合**不会**为这些情况保存您的代码。你应该自己同步这个方法。

附加信息：如果您正在尝试实现缓存库或[享元设计模式](http://en.wikipedia.org/wiki/Flyweight)，请不要重新发明轮子并使用经过验证和测试的框架，例如[ehcache](http://ehcache.org/)或[jboss cache](http://www.jboss.org/jbosscache)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T04:17:42.287

请找到java文档

返回由指定映射支持的同步（线程安全）映射。为了保证串行访问，对支持映射的所有访问都是通过返回的映射完成的，这一点至关重要。当迭代其任何集合视图时，用户必须在返回的地图上手动同步：

```
 Map m = Collections.synchronizedMap(new HashMap());
  ...
  Set s = m.keySet();  // Needn't be in synchronized block
  ...
  synchronized(m) {  // Synchronizing on m, not s!
      Iterator i = s.iterator(); // Must be in synchronized block
       while (i.hasNext())
          foo(i.next());
   } 
```

不遵循此建议可能会导致不确定的行为。如果指定的映射是可序列化的，则返回的映射将是可序列化的。

参数： m 要“包装”在同步地图中的地图。返回： 指定地图的同步视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-07T06:44:42.253

Synchronized 与 ConcurrentModificationException 无关，因为如果您在使用列表的 remove 方法迭代列表时尝试删除列表项，它可以在单线程环境中发生。

同步仅保证您的串行访问。

# javascript - Javascript 错误：“null 或不是对象”

> ID：13151171
> 
> 赞同：2
> 
> 时间：2012-10-31T04:12:54.267
> 
> 标签：javascript, null, undefined

我在这里有一个奇怪的问题：http: [//jackyon.com.s146246.gridserver.com/thehappymonk/](http://jackyon.com.s146246.gridserver.com/thehappymonk/)

我正在使用 queryloader2 插件和 maximage2 插件。它适用于所有现代浏览器，但在 IE8 或更低版本上显示 javascript 错误。即使IE9显示错误，但它仍然可以正常运行。

```
js error: 'a.Slide[...].content.length' is null or not an object. 
```

删除任一插件时，页面运行时不会出错。

万谢谢大家！这个问题已经让我发疯了几天。请帮我！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:04:33.327

错误似乎来自 jquery.maximage.min.js，完整版本在这里：[https ://github.com/akv2/MaxImage/blob/master/lib/js/jquery.maximage.js](https://github.com/akv2/MaxImage/blob/master/lib/js/jquery.maximage.js)

寻找什么的一个线索是有一个“使用严格”指令，这对于旨在在不支持严格模式的浏览器中运行的代码来说不是一个好主意。似乎没有任何充分的理由使用它。我想这只是臀部。

有一些基于 UA 字符串的浏览器嗅探（不是一个好兆头）：

```
if($.browser.msie){
  // Stop IE from continually trying to preload images that we already removed
  document.execCommand("Stop", false);
} 
```

无论如何，该错误似乎与第 226 行附近的代码有关：

```
for(var j in $.Slides) {

  // Determine content (if container or image)
  if($.Slides[j].content.length == 0){
    c = '<img src="' + $.Slides[j].url + '" />';

  } else {
    c = $.Slides[j].content;
  }
  ...
} 
```

所以寻找在哪里`Slides[j].content`被赋值，在第 625 行有：

```
 $.Slides = Utils.construct_slide_object(); 
```

并且`construct_slide_object`是：

```
construct_slide_object: function() {
  var obj = new Object(),
      arr = new Array(),
      temp = '';

  $self.children().each(function(i) {
    var $img = $(this).is('img') ? $(this).clone() : $(this).find('img').first().clone(); 
```

这只是一个很长的写作方式`$('<img />')`吗？

```
 // reset obj
    obj = {}; 
```

那么为什么要将它初始化为函数外的对象`each`呢？

```
 // set attributes to obj
    obj.url = $img.attr('src');
    obj.title = $img.attr('title') != undefined ? $img.attr('title') : ''; 
```

这只是一段很长的路要写：

```
 obj.title = $img.attr('title'); 
```

因为`attr`将始终返回一个字符串，并且`$img.attr('title') != undefined`仅当它返回一个空字符串时才为真。

```
 obj.alt = $img.attr('alt') != undefined ? $img.attr('alt') : '';
    obj.theclass = $img.attr('class') != undefined ? $img.attr('class') : '';
    obj.styles = $img.attr('style') != undefined ? $img.attr('style') : '';
    obj.orig = $img.clone();
    obj.datahref = $img.attr('data-href') != undefined ? $img.attr('data-href') : '';
    obj.content = "";

    // Setup content for within container
    if ($(this).find('img').length > 0) { 
```

这是在这段简短的代码中第三次使用。

```
 if($.BrowserTests.cssBackgroundSize) {
        $(this).find('img').first().remove(); 
```

第四，`$(this)`使用了 7 次。

```
 }
        obj.content = $(this).html();
      }

      // Stop loading image so we can load them sequentiallyelse{
      $img[0].src = "";

      // Remove original object (only on nonIE. IE hangs if you remove an image during load)
      if ($.BrowserTests.cssBackgroundSize) { 
```

这似乎是某种浏览器推断：如果 backgrounsize 测试返回 false，则它一定是 IE。

```
 $(this).remove();
      }

      // attach obj to arr
      arr.push(obj);
  });

  if(config.debug) { 
    debug(' - Slide Object - ');
    debug(arr);
  }
  return arr;
}, 
```

填满你的靴子。:-)

# c++ - 将 SDL 表面传递给函数

> ID：13151175
> 
> 赞同：1
> 
> 时间：2012-10-31T04:13:33.070
> 
> 标签：c++, sdl

我有点困惑如何将我的 SDL_Surface 传递给我的函数，以便我可以在 SDL 中设置我的屏幕。

这是我的错误：

```
 No operator "=" matches these operands 
```

我的功能是这样的：

```
void SDL_Start(SDL_Surface screen){
Uint32 videoflags = SDL_SWSURFACE | SDL_DOUBLEBUF | SDL_ANYFORMAT;// | SDL_FULLSCREEN;

// Initialize the SDL library 
    if ( SDL_Init(SDL_INIT_VIDEO) < 0 ) {
         fprintf(stderr, "Couldn't initialize SDL: %s\n",
         SDL_GetError());
         exit(500);
    }   
//get player's screen info
const SDL_VideoInfo* myScreen = SDL_GetVideoInfo();

//SDL screen

int reso_x = myScreen->current_w;
int reso_y = myScreen->current_h;
Uint8  video_bpp = 32;

//setup Screen [Error on the line below]
screen = SDL_SetVideoMode(reso_x, reso_y, video_bpp, videoflags|SDL_FULLSCREEN); 
} 
```

这个函数在我的主函数中被调用，如下所示：

```
SDL_Surface *screen;
SDL_Start(*screen); 
```

任何想法是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:33:15.823

`SDL_SetVideoMode`返回一个`SDL_Surface*`（指针类型），但您将它分配给一个`SDL_Surface`（非指针）。

编辑：这可能就是你想要的。返回指向新表面的指针。

```
SDL_Surface* SDL_Start() {
Uint32 videoflags = SDL_SWSURFACE | SDL_DOUBLEBUF | SDL_ANYFORMAT;// | SDL_FULLSCREEN;

// Initialize the SDL library 
    if ( SDL_Init(SDL_INIT_VIDEO) < 0 ) {
         fprintf(stderr, "Couldn't initialize SDL: %s\n",
         SDL_GetError());
         exit(500);
    }   
//get player's screen info
const SDL_VideoInfo* myScreen = SDL_GetVideoInfo();

//SDL screen

int reso_x = myScreen->current_w;
int reso_y = myScreen->current_h;
Uint8  video_bpp = 32;

//setup Screen [Error on the line below]
return SDL_SetVideoMode(reso_x, reso_y, video_bpp, videoflags|SDL_FULLSCREEN); 
}

// ...

SDL_Surface *screen = SDL_Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:34:23.093

`SDL_SetVideoMode`返回指向 SDL_Surface 的指针。但`screen`不是指针。无论如何，您都不应该按值传递 SDL_Surface 对象，这会弄乱它们的引用计数，并可能会出现其他问题。如我所见，您在这里有两个选择。通过引用传递一个 SDL_Surface 指针：

```
void SDL_Start(SDL_Surface*& screen) {
    ...
    screen = SDL_SetVideoMode(reso_x, reso_y, video_bpp, videoflags|SDL_FULLSCREEN);
} 
```

或者，让函数不带参数，并返回一个指针：

```
SDL_Surface* SDL_Start() {
    ...
    return SDL_SetVideoMode(reso_x, reso_y, video_bpp, videoflags|SDL_FULLSCREEN);
} 
```

# ruby-on-rails - NameError：rspec 中未定义的局部变量或方法，用于 rails 3.2.8

> ID：13151176
> 
> 赞同：0
> 
> 时间：2012-10-31T04:13:51.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

在 rails 3.2.8 应用程序的应用程序控制器中定义了一个方法 assign_user_rights。在 applications_controller_spec.rb 中，有一个方法的测试用例：

```
 it "should assign_user_right" do
      .....
      assign_user_rights
      session[:index_all_users].should be_true
    end 
```

错误：

```
Failure/Error: assign_user_rights
     NameError:
       undefined local variable or method `assign_user_rights' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_4:0x57550e0> 
```

由于 assign_user_rights 是在应用程序控制器中定义的，因此它应该在其规范文件中很容易看到。然而，我们看到的情况并非如此。代码可能有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:38:31.567

尝试`controller.assign_user_rights`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:42:37.460

```
get :assign_user_rights
response.should be_true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:23:30.303

请检查控制器 applications_controller_spec.rb 是 application_controller.rb 的子类。

```
 If it's not a sub class of application controller,  call the method using controller_name.assign_user_rights 
```

# c# - 使用 Microsoft Office Word 加载项创建 Windows 应用程序

> ID：13151178
> 
> 赞同：0
> 
> 时间：2012-10-31T04:14:17.717
> 
> 标签：c#, .net, memory, ms-word

我使用 Microsoft Office Word 插件创建了一个 Windows 窗体应用程序。该应用程序有一个消耗大量内存的庞大进程，但问题是在进程运行时，Microsoft Office Word 会崩溃。有什么解决办法吗？我认为如果我们可以将应用程序的进程分开而不是使用 Microsoft Office Word 的相同内存，则该进程不会崩溃。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T05:07:15.600

```
 public void ReleaseObject(object obj)
       {
           try
           {
               System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
               obj = null;
           }
           catch (Exception)
           {
               obj = null;
           }
           finally
           {
               GC.Collect();
           }
       } 
```

# asp.net-mvc - ValidationMessage 显示在初始 GET 方法上

> ID：13151187
> 
> 赞同：0
> 
> 时间：2012-10-31T04:14:47.930
> 
> 标签：asp.net-mvc, asp.net-mvc-validation

我正在开发一个 MVC 4 项目，该项目即使在一个简单的 GET 方法上也不断显示 ValidationMessage，该方法不进行复杂类型的验证或模型绑定：

```
//location/{locationId}/announcement
[HttpGet]
public ActionResult LocationMakeAnnouncement(int locationId)
{
    var pageViewModel = this.BuildLocationMakeAnnouncementViewModel(locationId);
    return View(pageViewModel);
} 
```

唯一构建 ViewModel并且`BuildLocationMakeAnnouncementViewModel`不触及 ModelState。

然后在视图上我有：

```
<span class="errorArea">@Html.ValidationMessage("ProductText", " ", new { @class = "inputErrorIcon" })</span> 
```

发出：

```
<span class="errorArea"><span class="field-validation-valid inputErrorIcon" data-valmsg-for="ProductText" data-valmsg-replace="false"> </span></span> 
```

输出 ModelState 表明它没有任何错误

```
@ViewData.ModelState.Values.Any(x => x.Errors.Count >= 1) 
```

没有错误时，为什么 ValidatioMessage 会输出？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:40:39.223

如果你想保持启用客户端验证，我有一个类似的问题`ValidationSummary`，但我相信这只是这些东西呈现的方式。您需要做的就是将“有效”内容的样式设置为`display: none`. 在您的情况下，这似乎是：

```
.field-validation-valid { display: none; } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T04:45:07.617

事实证明，如果您启用 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled，就会出现这种情况。

所以将它们设置为 false 解决了我的问题：

```
<add key="ClientValidationEnabled" value="false" />
<add key="UnobtrusiveJavaScriptEnabled" value="false" /> 
```

# wpf - 无需代码隐藏的 WPF 中视图/视图模型之间的可重用/简洁转换方式

> ID：13151190
> 
> 赞同：1
> 
> 时间：2012-10-31T04:15:12.893
> 
> 标签：wpf, mvvm

**什么**

它困扰了我好几个月，但我终于找到了一种在 WPF 中的视图之间转换的通用方法——这种方法允许我使用我想要的任何动画进行转换。不，VisualStateManager 在这里根本没有帮助——它只适用于同一视图中的转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:15:12.893

已经有一些框架和技术，但坦率地说，它们都把我弄糊涂了，或者看起来很笨拙。 [另一个人的解决方案](http://joshsmithonwpf.wordpress.com/2009/04/25/orchestrating-animated-transitions-between-view-and-viewmodel/)还可以，但由于某种原因，我不太喜欢它，这并不能让我彻夜难眠。也许，虽然比大多数简单，但它仍然看起来令人困惑，所以我掌握了它的要点并自己制作了。然而，它确实激发了我的解决方案。

所以我导入了我的帮助程序库，下面是在视图之间进行转换所需的唯一代码。你可以使用任何你想要的动画，而不仅仅是我的淡入/淡出动画。如果有人让我知道上传我的解决方案的好地方，我会很乐意分享。

**编码**

有一个带有红色框（RedGridViewModel）和蓝色框（BlueGridViewModel）的窗口。每个框下方都有一个按钮，可以交替地将框更改为当前不是的颜色。按下按钮时，当前框淡出，新框淡入。转换发生时按钮被禁用，并且可以快速连续按下两个按钮而不会导致程序崩溃。我在这里使用了两个从属 ViewModel，但您可以使用任意多个。

![运行的程序](../Images/9cdeafca2bd4079bb37f12b464953a46.png)

```
<Window x:Class="ViewModelTransitionTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ViewModelTransitionTest"
    xmlns:custom="clr-namespace:CustomTools;assembly=CustomTools"
    Title="MainWindow" Height="350" Width="525"
    DataContext="{x:Static local:StartingDataContext.DataContext}">
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <!--Reference to my helper library with all the goodies that make this whole thing work somehow-->
            <ResourceDictionary Source="pack://application:,,,/CustomTools;component/ViewModelTransition/TransitionCapableViewModelResources.xaml"/>
            <!--DataTemplates for the Red and Blue view models.  Just tack on 
            the TransitionCapableViewModelStyleWithFadeInAndOut style and you're good to go.-->
            <ResourceDictionary>
                <DataTemplate DataType="{x:Type local:BlueGridViewModel}">
                    <Grid
                        Background="Blue"
                        Opacity="0"
                        Style="{StaticResource TransitionCapableViewModelStyleWithFadeInAndOut}"/>
                </DataTemplate>
                <DataTemplate DataType="{x:Type local:RedGridViewModel}">
                    <Grid 
                        Background="Red"
                        Opacity="0"
                        Style="{StaticResource TransitionCapableViewModelStyleWithFadeInAndOut}"/>
                </DataTemplate>
            </ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <ContentPresenter 
        Content="{Binding ViewModelA}"
        Grid.Row="0"
        Grid.Column="0"/>
    <ContentPresenter 
        Content="{Binding ViewModelB}"
        Grid.Row="0"
        Grid.Column="1"/>
    <Button
        Content="Change ViewModel"
        Grid.Row="1"
        Grid.Column="0"
        Command="{Binding ChangeViewModelA}"/>
    <Button 
        Content="Change ViewModel"
        Grid.Row="1"
        Grid.Column="1"
        Command="{Binding ChangeViewModelB}"/>
</Grid> 
```

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Input;
using CustomTools;

namespace ViewModelTransitionTest
{
    /// <summary>
    /// View Model for the main windown.
    /// </summary>
    class MainWindowViewModel : ContainsSwappableViewModelsBase
    {
        /// <summary>
        /// ViewModel properties should always follow this basic format.  You can use a string, 
        /// but I like type-safety and I don't have Visiual Studio 2012, so I use this clunky 
        /// extractPropertyNameMethod to convert the ProeprtyName to a string.
        /// </summary>
        public object ViewModelA
        {
            get
            {
                return viewModels[ExtractPropertyName(() => ViewModelA)];
            }
        }
        public object ViewModelB
        {
            get
            {
                return viewModels[ExtractPropertyName(() => ViewModelB)];
            }
        }

        public TransitionCapableViewModel NewViewModelA
        {
            get
            {
                if (ViewModelA is BlueGridViewModel)
                    return new RedGridViewModel();
                return new BlueGridViewModel();
            }
        }
        public TransitionCapableViewModel NewViewModelB
        {
            get
            {
                if (ViewModelB is BlueGridViewModel)
                    return new RedGridViewModel();
                return new BlueGridViewModel();
            }
        }

        /// <summary>
        /// Each ViewModel property should have a command that changes it.  That command should 
        /// call changeViewModel and check canChangeViewModel as follows.
        /// </summary>
        public ICommand ChangeViewModelA
        {
            get
            {
                return new RelayCommand(
                    x => changeViewModel(() => ViewModelA, NewViewModelA),
                    x => canChangeViewModel(() => ViewModelA, NewViewModelA));
            }
        }
        public ICommand ChangeViewModelB
        {
            get
            {
                return new RelayCommand(
                    x => changeViewModel(() => ViewModelB, NewViewModelB),
                    x => canChangeViewModel(() => ViewModelB, NewViewModelB));
            }
        }

        /// <summary>
        /// In the constructor, you'll want to register each ViewModel property with a starting 
        /// value as follows.  And don't forget to call the base constructor.
        /// </summary>
        /// <param name="viewModelA"></param>
        /// <param name="viewModelB"></param>
        public MainWindowViewModel(object viewModelA, object viewModelB)
            :base()
        {
            addViewModelPropertyAndValueToDictionary(() => ViewModelA, viewModelA);
            addViewModelPropertyAndValueToDictionary(() => ViewModelB, viewModelB);
        }

        /// <summary>
        /// The only method you have to override from the base class is this one which regsiters 
        /// your commands with a corresponding viewmodel so that I can raise the relevant change 
        /// notifications because if you're as bad as me, you'll probably screw it up.
        /// </summary>
        protected override void associateCommandsWithViewModelProperties()
        {
            associateCommandWithViewModelProperty(ExtractPropertyName(() => ChangeViewModelA), ExtractPropertyName(() => ViewModelA));
            associateCommandWithViewModelProperty(ExtractPropertyName(() => ChangeViewModelB), ExtractPropertyName(() => ViewModelB));
        }
    }
} 
```

为了完整起见，这实际上是我为此示例编写的唯一其他代码（不包括对该线程来说有点冗长的非常小的帮助程序集）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using CustomTools;

namespace ViewModelTransitionTest
{
    static class StartingDataContext
    {
        public static MainWindowViewModel DataContext { 
            get 
            { 
                return new MainWindowViewModel(new BlueGridViewModel(), new RedGridViewModel()); 
            } 
        }
    }

    class RedGridViewModel : TransitionCapableViewModel
    {
    }

    class BlueGridViewModel : TransitionCapableViewModel
    {
    }
} 
```

我利用了以下内容：

[WPF 数据管道](https://stackoverflow.com/questions/1083224/pushing-read-only-gui-properties-back-into-viewmodel)

[找不到原始链接，但将 wpf 事件绑定到 VM 命令很重要](http://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/)

[代码合同插件，因为我喜欢代码合同](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)

如果有兴趣，我可以发布管道代码或将整个解决方案上传到某处。它真的没有那么长——两个基类，一个具有两种样式和两个故事板的资源文件。

# https - 如何在 squid3 中配置 HTTPS 支持

> ID：13151192
> 
> 赞同：18
> 
> 时间：2012-10-31T04:15:21.487
> 
> 标签：https, proxy, debian, squid

我有 vps，我想配置我的 squid 支持 HTTPS 代理。我已经配置了 http 代理并且可以工作，但不支持 https。

问题

*   如何在 squid3 中配置 HTTPS 代理？

这是我的 squid.conf 配置细节。

```
acl manager proto cache_object
acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
acl SSL_ports port 443
acl Safe_ports port 80 # http
acl Safe_ports port 21 # ftp
acl Safe_ports port 443 # https
acl Safe_ports port 70 # gopher
acl Safe_ports port 210 # wais
acl Safe_ports port 1025-65535 # unregistered ports
acl Safe_ports port 280 # http-mgmt
acl Safe_ports port 488 # gss-http
acl Safe_ports port 591 # filemaker
acl Safe_ports port 777 # multiling http
acl CONNECT method CONNECT
acl larang url_regex -i "/etc/squid3/larang.txt"
http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localhost
http_access deny larang
http_access allow all
http_port 143 transparent
refresh_pattern ^ftp: 1440 20% 10080
refresh_pattern ^gopher: 1440 0% 1440
refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
refresh_pattern . 0 20% 4320 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T04:30:07.880

此行`http_access deny CONNECT !SSL_ports`阻止与您的非 SSL_ports 的连接。默认情况下 Squid 块：[http ://wiki.squid-cache.org/SquidFaq/SecurityPitfalls#The_Safe_Ports_and_SSL_Ports_ACL](http://wiki.squid-cache.org/SquidFaq/SecurityPitfalls#The_Safe_Ports_and_SSL_Ports_ACL)

您只想允许 SSL 连接到反向代理。假设，把它放在你的 squid.conf 的顶部：

```
https_port 443 cert=/path/to/CertAuth/testcert.cert key=/path/to/CertAuth/testkey.pem defaultsite=mywebsite.mydomain.com vhost
cache_peer 10.112.62.20 parent 80 0 no-query originserver login=PASS name=websiteA

acl sites_server_1 dstdomain websiteA.mydomain.com
cache_peer_access websiteA allow sites_server_1
http_access allow sites_server_1

(extracted from: http://wiki.squid-cache.org/ConfigExamples/Reverse/SslWithWildcardCertifiate) 
```

不过，您将需要阅读所有文档。

以下是有关 squid 和 SSL 的更多信息（必读）：[http ://wiki.squid-cache.org/Features/HTTPS](http://wiki.squid-cache.org/Features/HTTPS)

# vb.net - 如何在 VB.NET 中将对象转换为整数？

> ID：13151196
> 
> 赞同：18
> 
> 时间：2012-10-31T04:15:39.133
> 
> 标签：vb.net, string, casting, integer

我应该如何在 VB.NET中从一个`Object`转换为一个？`Integer`

当我做：

```
Dim intMyInteger as Integer = TryCast(MyObject, Integer) 
```

它说：

> TryCast 操作数必须是引用类型，但 Integer 是值类型。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-31T04:20:19.060

`TryCast`相当于 C# 的`as`运算符。它是一个“安全转换”运算符，如果转换失败，它不会抛出异常。相反，它返回`Nothing`（`null`在 C# 中）。问题是，您不能将`Nothing`( `null`)（引用类型）分配给（`Integer`值类型）。没有`Integer` `null`/之类的东西`Nothing`。

相反，您可以使用`TypeOf`and `Is`：

```
If TypeOf MyObject Is Integer Then
    intMyInteger = DirectCast(MyObject, Integer)
Else
    intMyInteger = 0
End If 
```

这将测试*运行时类型*是否`MyObject`为`Integer`. 有关更多详细信息，请参阅有关[运算符的](http://msdn.microsoft.com/en-us/library/0ec5kw18.aspx)[MSDN 文档。`TypeOf`](http://msdn.microsoft.com/en-us/library/0ec5kw18.aspx)

你也可以这样写：

```
Dim myInt As Integer = If(TypeOf myObj Is Integer, DirectCast(myObj,Integer), 0) 
```

此外，如果具有默认值（如 0）的整数不适合，您可以考虑使用`Nullable(Of Integer)`类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-10T11:02:38.587

你可以使用这个：

```
Dim intMyInteger as Integer

Integer.TryParse(MyObject, intMyInteger) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T04:21:14.123

使用 Directcast 并捕获 InvalidCastException

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T16:57:52.233

**TryCast**的等价物是**[CType](https://msdn.microsoft.com/en-us/library/4x2877xb.aspx)**。如果可能，两者都会进行类型转换。相比之下，**[DirectCast](https://msdn.microsoft.com/en-us/library/7k6y2h6x.aspx)**只会转换已经*是*该类型的类型。

为了说明，您可以使用**CType**将 String、Short 或 Double 转换为 Integer。**如果你这样做， DirectCast**通常会给你一个语法/编译错误；但是，如果您尝试使用类型 Object 来绕过错误（这称为“装箱”和“拆箱”），它将在运行时引发异常。

```
 Dim OnePointTwo As Object = "1.2"
    Try
        Dim temp = CType(OnePointTwo, Integer)
        Console.WriteLine("CType converted to: " & temp.ToString & " (type: " & temp.GetType.ToString & ")")
    Catch ex As Exception
        Console.WriteLine("CType threw exception")
    End Try
    Try
        Dim temp = DirectCast(OnePointTwo, Integer)
        Console.WriteLine("DirectCast converted to: " & temp.ToString & " (type: " & temp.GetType.ToString & ")")
    Catch ex As Exception
        Console.WriteLine("DirectCast threw exception")
    End Try 
```

这将输出：

```
 CType converted to: 1 (type: System.Int32)
    DirectCast threw exception 
```

因此，为了最严格地遵循**TryCast**语义，我建议使用这样的函数：

```
Shared Function TryCastInteger(value As Object) As Integer?
    Try
        If IsNumeric(value) Then
            Return CType(value, Integer)
        Else
            Return Nothing
        End If
    Catch ex As Exception
        Return Nothing
    End Try
End Function 
```

为了说明它的效果：

```
Shared Sub TestTryCastInteger()
    Dim temp As Integer?

    Dim OnePointTwo As Object = "1.2"
    temp = TryCastInteger(OnePointTwo)
    If temp Is Nothing Then
        Console.WriteLine("Could not convert to Integer")
    Else
        Console.WriteLine("TryCastInteger converted to: " & temp.ToString & " (type: " & temp.GetType.ToString & ")")
    End If

    Dim NotANumber As Object = "bob's your uncle"
    temp = TryCastInteger(NotANumber)
    If temp Is Nothing Then
        Console.WriteLine("Could not convert to Integer")
    Else
        Console.WriteLine("TryCastInteger converted to: " & temp.ToString & " (type: " & temp.GetType.ToString & ")")
    End If
End Sub 
```

运行 TestTryCastInteger() 将输出：

```
 TryCastInteger converted to: 1 (type: System.Int32)
    Could not convert to Integer 
```

还有诸如 null/Nothing 整数之类的东西，或任何其他静态类型，称为“可空”类型，有关更多信息，请参阅*变量*声明*[问号。](https://stackoverflow.com/questions/3208606/variable-declaration-question-mark)*但这也不能真正使它成为“参考”类型。

# javascript - 销毁一个元素会破坏该元素上的绑定吗？

> ID：13151201
> 
> 赞同：1
> 
> 时间：2012-10-31T04:16:46.270
> 
> 标签：javascript, jquery

基本上，我试图通过随时取消绑定元素来优化我的 jQuery 代码，或者我需要重新绑定它们，但我有一个问题，“破坏”一个元素是否也会破坏附加到该元素的事件？

```
$(element).bind("click", function(){...});
$(element).parent().html(""); 
```

另外我不确定这是否是用 .html("") 完成的，我是否必须使用 .remove() 才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:48:12.870

只要您使用 jQuery 方法添加/删除元素和绑定事件，一切都应该没问题。当您将事件绑定到元素（或使用类似的东西`.data()`）时，jQuery 将此信息存储在一个名为`$.cache`. 当你使用 jQuery 方法来操作 DOM 时，jQuery 负责清理这些东西——因为元素和`$.cache`. 因此，如果您在页面中添加了一个 div，`click`使用 jQuery 将一个事件绑定到它，然后使用 删除它`node.parentNode.removeChild(node);`，`$.cache`则不会被清理。如果您想要证据，请在 jQuery 源代码中查找`html`、和类似方法，您会发现这样的调用`remove`：`replaceWith`

```
jQuery.cleanData( elem.getElementsByTagName("*") );
jQuery.cleanData( [ elem ] ); 
```

这有效地清理了一切，`$.cache`以便一切都得到照顾。关键是，如果您将库用于（所有）您所做的事情，则不必担心这些事情。

不过使用`html`起来很棘手——小心你传递给它的东西。如果你想传递一个新的 DOM 结构，比如

```
var div = $("<div>")
              .attr("id", "div1")
              .click(function () {
                  alert("clicked");
              }); 
```

使用类似的东西`$("#container").html(div);`实际上不会绑定该单击事件处理程序。`.append`虽然使用类似 will 的东西。只是想指出这一点。（这与销毁/移除元素无关）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:22:18.053

如果您删除该元素，DOM 将不再监听该元素内的点击。

.remove 应该可以解决问题。

```
$(element).parent().remove(); 
```

将从 DOM 中删除元素。

# c# - 如何重新填充动态添加的 asp.net 表？

> ID：13151202
> 
> 赞同：-1
> 
> 时间：2012-10-31T04:16:50.940
> 
> 标签：c#, asp.net

我有 asp.net 表和一个“添加”按钮。在每个添加按钮上单击我在 asp.net 表中添加了用户控件。但是当我单击窗体上的任何其他控件时，我的 asp.net 表就会​​消失。如何将 Asp.net 表放入视图状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:41:21.840

而不是使用 Page_Load，使用

```
 override protected void OnInit(EventArgs e)
    {
         LoadDynamicControls()
    }

    private void LoadDynamicControls()
    {
        //Load your table here
    } 
```

# iphone - UIImageView 在我的 UINavigationBar 下方被“压扁”

> ID：13151208
> 
> 赞同：1
> 
> 时间：2012-10-31T04:17:45.953
> 
> 标签：iphone, ios, uinavigationcontroller

我正在尝试将 a 放置`UIImageView`在我的情节提要视图控制器 ( `UIViewController`) 的顶部并在其`UITableView`下方放置 a 。在 Interface Builder 中，一切看起来都很棒。图像为 320x150，正对着`UITableView`. 但是，当我在模拟器或设备上运行它时，图像会被导航栏的大小挤压。我弄乱了调整大小选项（要填充的方面等），有些似乎更好，但没有一个只是将所有视图推到导航栏下方。我究竟做错了什么？

奇怪的是，它看起来像是在下推所有内容，然后在为完整图像保留的空间内挤压图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:41:30.897

从问题中我可以感觉到，您的 UI 组件向下推了一点（按 UINavigation 栏的大小，即大约 44 像素）。这是因为在界面生成器中，您的视图中不能有 UINavigationBar。转到界面生成器，然后选择“顶部栏”到导航栏。现在相应地设置您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:20:13.990

尝试使用`-resizableImageWithCapInsets:`of创建可拉伸的图像`UIImage`。

# jquery - 如何使用 jQuery/Coffeescript 将变量设置为特定页面元素的文本？

> ID：13151215
> 
> 赞同：0
> 
> 时间：2012-10-31T04:19:35.273
> 
> 标签：jquery, coffeescript

我正在尝试使用 Coffeescrip/jQuery 遍历页面上的每个跨度，如果该跨度的 id 等于变量，则返回包含在特定跨度标签之间的文本`elemId`。这是我所拥有的：

```
elemValue = $('span').each ->
  $(@).text() if $(@).attr("id") is elemId 
```

`[object Object]`但是，出于某种原因，这只会返回`elemValue`我输出到页面的 ，即使我在我知道与 that 有跨度的页面上测试它时也是如此`elemId`。知道我哪里出错了吗？

另外，如何设置默认值`elemValue`，以防页面上没有跨度的 id 与`elemId`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:28:52.330

如果您知道 id 那么为什么要迭代整个跨度。只需使用 id 获取文本

```
 $("#" +elemId ).text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:35:31.667

以下是对您有用的方法，并且更有意义：

```
$('#' + elemId).each(function () {
   console.log('$(this).text());
}); 
```

要设置默认值，您需要执行以下操作：

```
if (document.indexOf(elemId) < 0) {
    var elemValue = "whatever you want"
} 
```

# android - R.color.green 在更改背景颜色时显示错误

> ID：13151216
> 
> 赞同：0
> 
> 时间：2012-10-31T04:19:52.993
> 
> 标签：android, textview

我正在尝试更改文本视图的背景颜色，如下所示：

```
 for(int i=0; i<arrBool.length; i++) {
        arrBool[i] = r.nextBoolean();
        if(arrBool[i]==true) {
            textView[i].setBackgroundResource(R.color.darkgrey);
        }
    } 
```

我收到 R.color.darkgrey 的错误。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:24:58.873

您需要提供`getResources()`方法，然后再提供调用`getColor()`方法。

```
textView[i].setBackgroundResource(getResource().getColor(R.color.darkgrey));
                                  ^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:23:28.673

在 color.xml 中使用颜色时，您必须调用该[`getResource()`](http://developer.android.com/reference/android/content/res/Resources.html#getColor%28int%29)方法。

将您的代码更改为

```
for(int i=0; i<arrBool.length; i++) {
    arrBool[i] = r.nextBoolean();
    if(arrBool[i]==true) {
        textView[i].setBackgroundResource(getResource().getColor(R.color.darkgrey));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T04:51:34.067

设置背景颜色，如果它的颜色是：

```
textView[i].setBackgroundColor(getResources().getColor(R.color.darkgrey)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T04:28:44.387

正如其他人所说，如果代码是活动的一部分，您可能应该使用。

```
for(int i=0; i<arrBool.length; i++) {
    arrBool[i] = r.nextBoolean();
    if(arrBool[i]==true) {
        textView[i].setBackgroundResource(getResource().getColor(R.color.darkgrey));
    }
} 
```

请注意`getResource()`是一种`ContextWrapper`使用方法

```
mContext.getResource().getColor(R.color.darkgrey) 
```

如果需要，`mContext`a在哪里`Context`？

# android - 使用 Intent 和 Intent 过滤器启动另一个应用程序

> ID：13151218
> 
> 赞同：1
> 
> 时间：2012-10-31T04:19:56.860
> 
> 标签：android

所以我是什么很简单，但我无法弄清楚。我正在尝试使用意图和意图过滤器启动另一个应用程序。

在我的第一个应用程序中，当用户单击按钮时，我希望它在单独的应用程序中启动另一个活动。这是我在第一个带有按钮的应用程序中使用的意图。

```
Intent notificationIntent = new Intent("foo"); 
```

在我的第二个应用程序中，我试图通过在清单中定义一个 Intent 过滤器来捕捉该意图，如下所示：

```
 <activity
       android:name=".MainActivity"
       android:label="@string/app" >
       <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <action android:name="foo" />

         <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
   </activity> 
```

MainActivity 不应该抓住意图并启动吗？它似乎没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:38:47.573

如果您想从您的应用程序打开新应用程序，那么您必须提供包名称才能启动

听到是一个示例代码

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("your package name");
startActivity(LaunchIntent);` 
```

`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T04:23:03.913

要启动新的应用程序，您需要提供整个包名称和活动名称。参考[这个](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)，你可以找到相同的。

# html - MVC3 应用程序的浏览器兼容性

> ID：13151222
> 
> 赞同：-1
> 
> 时间：2012-10-31T04:21:07.657
> 
> 标签：html, asp.net-mvc-3, razor, jqgrid

我在我的页面中使用 Jqgrid。在 IE 中查看时它会转到屏幕的右侧角落，但对于 Chrome 和 Mozilla 来说没问题。

这是我的`<head/>`代码部分。我计划在我的应用程序的所有页面中包含此内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>@ViewBag.Title</title>
<link href="../../Content/css/bootstrap.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="../../Content/css/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="../../Content/css/ui.jqgrid.css" />
 <script type="text/javascript" src="../../Scripts/js/jquery.min.js"></script>
<script type="text/javascript" src="../../Scripts/js/bootstrap-dropdown.js"></script>
<script type="text/javascript" src="../../Scripts/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../../Scripts/js/grid.locale-en.js"></script>
<script type="text/javascript" src="../../Scripts/js/jquery.jqGrid.src.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:03:21.250

浏览器可能有不同的 JavaScript 引擎，渲染 Html 和 css 不同，但 ASP 与浏览器无关。

# ruby - 在 Ubuntu 上从源代码安装 Ruby 1.9.3

> ID：13151225
> 
> 赞同：0
> 
> 时间：2012-10-31T04:21:19.660
> 
> 标签：ruby, linux, ubuntu

我刚刚在 Ubuntu 上完成了看起来非常成功的 Ruby 1.9.3 安装，但是当我执行 ruby​​ -v 时，我仍然得到旧的 Ruby。我的安装：

```
./configure
make 
make install 
```

一切看起来都很顺利，但仍然没有 Ruby 1.9.3。我是否需要做一些额外的事情。我在 /etc 中找不到要配置的任何 Ruby 配置文件，只能在 /usr/bin 中找到旧的 Ruby 1.9.1。我在我的主目录中进行了安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:24:19.733

我强烈推荐使用[rvm](https://rvm.io/)来管理你的 Ruby 安装，而不是从源代码安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:27:31.510

您需要更改 PATH 环境变量（查找可执行文件的有序路径列表），以确保在标准系统之前找到您安装的 Ruby 可执行文件。例如，

```
PATH=/usr/local/bin:$PATH 
```

在`/usr/local/bin`所有其他位置之前添加。有关如何始终修改此环境变量的更多信息，[请阅读此](http://www.troubleshooters.com/linux/prepostpath.htm).

如果您想查看命名的各种文件`ruby`可能在您的系统上的位置，您可以使用：

```
locate -b ruby      # Files with "ruby" anywhere in the name
locate -b -r ^ruby  # Files that start with "ruby"
locate -b -r ^ruby$ # Files named exactly "ruby" 
```

# php - 通过表单 PHP 传递数组值

> ID：13151226
> 
> 赞同：0
> 
> 时间：2012-10-31T04:21:26.727
> 
> 标签：php, arrays, forms, variables, post

我有一个包含以下代码的表单：

```
<?php    
echo '<form action="nba-agent-process-bet.php" method="post">';  
echo '<table cellpadding="0" cellspacing="0" border="1" bordercolor="#585858" width=100%>';      
echo '<tr>';  
echo '<th>Date</th>';  
echo '<th>#</th>';  
echo '<th>Team</th>';  
echo '<th>Money</th>';  
echo '<th>Spread</th>';  
echo '<th>Total</th>';  
echo '</tr>';       
for($i=0 ; $i<10;){  
$AwayTeamSpread = " ";  
$HomeTeamSpread = " ";  
foreach ($xml->Game as $Game) {   
$Date[] = $Game->Date; $AwayTeam[] = $Game->AwayTeam; $HomeTeam[] = $Game->HomeTeam; $AwayRotation[] = $Game->AwayRotation;  
$HomeRotation[] = $Game->HomeRotation; $Total[] = $Game->Total; $OverPrice[] = $Game->OverPrice;  
$UnderPrice[] = $Game->UnderPrice; $Line[] = $Game->Line; $AwayTeamPrice[] = $Game->AwayTeamPrice;  
$HomeTeamPrice[] = $Game->HomeTeamPrice; $AwayTeamMoneyLine[] = $Game->AwayTeamMoneyLine; $HomeTeamMoneyLine[] = $Game->HomeTeamMoneyLine;  
}  
foreach ($xml2->events->event as $event) {  
$Spread = $event->periods->period[0]->spread;  
$TotalPoints = $event->periods->period[0]->total;   
$AHomeRotNum = $event->participants->participant[1];   
$AVisitingRotNum = $event->participants->participant[0];  
$AHomeParticipantName = $event->participants->participant[1];  
$AVisitingParticipantName = $event->participants->participant[0];  
$MoneyLine = $event->periods->period[0]->moneyline;   
$AwayLine[] = $Spread->spread_visiting;   
$HomeLine[] = $Spread->spread_home;  
$UnderAdjust[] = $TotalPoints->under_adjust;   
$OverAdjust[] = $TotalPoints->over_adjust;  
$ATotalPoints[] = $TotalPoints->total_points;  
$VisitingRotNum[] = $AVisitingRotNum->rotnum;  
$HomeRotNum[] = $AHomeRotNum->rotnum;  
$VisitingParticipantName[] = $AVisitingParticipantName->participant_name;  
$HomeParticipantName[] = $AHomeParticipantName->participant_name;  
$AwayMoneyLine[] = $MoneyLine->moneyline_visiting;   
$HomeMoneyLine[] = $MoneyLine->moneyline_home;  
$AwaySpreadAdjust[] = $Spread->spread_adjust_visiting;   
$HomeSpreadAdjust[] = $Spread->spread_adjust_home;  
}     
echo '<tr>';  
echo "<td>$Date[$i]</td><td><table><tr><td>$VisitingRotNum[$i]</td></tr><tr><td>$HomeRotNum[$i]</td></tr></table></td><td><table><tr><td>$VisitingParticipantName[$i]</td></tr><tr><td>$HomeParticipantName[$i]</td></tr></table></td><td><table><tr><td><input type='checkbox' name='AwayMoneyLine' value='$AwayMoneyLine[$i];$HomeParticipantName[$i]'/> $AwayMoneyLine[$i]</td></tr><tr><td><input type='checkbox' name='HomeMoneyLine' value='$HomeMoneyLine[$i];$AwayParticipantName[$i]'/>$HomeMoneyLine[$i]</td></tr></table></td><td><table><tr><td><input type='checkbox' name='$AwaySpreadAdjust[$i]' value='$AwayLine[$i]'/> $AwayLine[$i] ($AwaySpreadAdjust[$i])</td></tr><tr><td><input type='checkbox' name='$HomeSpreadAdjust[$i]' value='$HomeLine[$i]'/> $HomeLine[$i] ($HomeSpreadAdjust[$i])</td></tr></table></td><td><table><tr><td><input type='checkbox' name='AwayTotalPoints' value='$TotalPoints[$i]'/> Over $ATotalPoints[$i]</td></tr><tr><td><input type='checkbox' name='HomeTotalPoints' value='$ATotalPoints[$i]'/> Under $ATotalPoints[$i]</td></tr></table></td>";  
echo '</tr>';  
$i++;  
}  
echo '<tr>';  
echo '<td colspan="3"><input type="submit" name="send" value="Submit"></td><td colspan="3"><input type="button" name="Clear" value="Clear" /></td>';  
echo '</tr>';  
echo ' </table>';  
?> 
```

基本上，for 循环贯穿我的 xml 项目。foreach 循环将值分配给数组。数组打印在表格中，循环中的每个 $i 代表表格中的一行。当一个复选框被选中并提交时，我想通过复选框中的值传递所选 $i 的多个数组。我在表单操作中有以下代码：

例如，我尝试传递 $HomeMoneyLine 并回显该值，但没有运气。任何帮助将不胜感激！

```
<?php session_start(); ?>  
<?php  
if($_POST['AwayMoneyLine'] == $_POST['$AwayMoneyLine']){  
     $bet_type="Moneyline";  
     $HomeTeam=$_POST['$HomeMoneyLine[$i]'];  
     echo $HomeTeam;  
}   
else {   
header("Location: http://www.mainurl.com/");   
}   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:25:24.320

```
if($_POST['AwayMoneyLine'] == $_POST['$AwayMoneyLine']){  
                                     ^--            ^-- 
```

这些可能不是您要查找的引号，除非您在表单中使用字面量、、、`$`等`A`...`w`作为字段名称。

# linux - Jetty Web 服务器实例会共享同一个 JVM 吗？

> ID：13151229
> 
> 赞同：1
> 
> 时间：2012-10-31T04:22:16.057
> 
> 标签：linux, jetty, web-deployment

早上好 。

如果克隆现有的 Linux 机器以创建它的另一个实例，

它会有相同的JVM实例吗？

我问这个问题是因为当我们通过 Linux 脚本进行生产部署时，它会创建 5 次代码战争并将它们部署到 5 个 Jetty Web 服务器实例中，我观察到代码共享相同的 JVM？

这怎么可能？？

我正在使用 Jetty 8 并且拥有 Jetty 服务器的机器是 Ubuntu 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:21:50.100

不同的物理（或虚拟）机器会有不同的jvm

然而，可以将多个战争部署到一个码头实例中，并让所有这些 webapps 在 on jvm 中运行

也可以使用 jetty 在同一个 jvm 内启动多个 jetty 服务器

但是 jvm 只是操作系统的进程，并且 5 个不同的 linux 安装实例不会在它们之间共享 jvm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:28:24.287

[Java 5 有一个称为类数据共享](http://docs.oracle.com/javase/1.5.0/docs/guide/vm/class-data-sharing.html)的内部特性。您可以手动创建转储并使用它们。这个stackoverflow[答案](https://stackoverflow.com/questions/4692076/speed-up-application-start-by-adding-own-application-classes-to-classes-jsa)可能会有所帮助。如果你想提高启动时间，你可以使用[nailgun](http://www.martiansoftware.com/nailgun/)。Nailgun 是一个 JVM 服务器，用于从命令行运行 Java 程序，而不会产生 JVM 启动开销。

# automation - 如何解决这种上下文无关语法

> ID：13151232
> 
> 赞同：2
> 
> 时间：2012-10-31T04:22:39.717
> 
> 标签：automation, context-free-grammar, pushdown-automaton

给出一个上下文无关的语法

> { **w** | **w**是 {a, b, c, d}* 的元素，使得 # of a+ # of b = # of c + # of D}
> 
> 我该如何处理这个问题......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:56:05.230

这个怎么样：

```
S -> A C S     
S -> A S C                   
S -> S A C                 

S -> C A S     
S -> C S A                   
S -> S C A

S -> 
A -> a|b
C -> c|d 
```

（可能有更优雅的解决方案......）

*至于**如何**处理这些，在我看来，关键的见解通常是在分组中（这里是 A 和 C），但我认为最好的学习方法是查看大量示例并尝试大量问题——例如[这个](https://stackoverflow.com/a/12934367/1240268)。*

# php - MySQL Sum(Total) 和 Sum(User) 与 ROLLUP

> ID：13151235
> 
> 赞同：2
> 
> 时间：2012-10-31T04:22:54.493
> 
> 标签：php, mysql, subquery, sum, rollup

我在处理复杂的 MySQL 查询时遇到了一些麻烦。我正在尝试从此查询中获取 3 列。程序的名称、每个程序的站点总数以及每个程序的医师总数（用户总数）。我正在链接 2 个表，`procedures`并且`tbl_syn_procedure`.

只有一个条件可以获得我的医师总数（用户总数）`procedures.phys_id = '##'`，但我不确定如何将其合并到查询中。

我目前有一个大型查询，可以提供我需要的一半数据。

```
SELECT  
  IFNULL( Synoptic, 'Total Count') AS Synoptic, Total
FROM ( 
SELECT  
  Synoptic, 
  SUM( Data ) AS Total
FROM ( 
      SELECT 
        tbl_syn_procedure.name AS 'Synoptic',
        COUNT(*) AS Data
        FROM procedures 
        JOIN tbl_syn_procedure ON 
        procedures.proc_synoptic_id = tbl_syn_procedure.name_id 
        GROUP BY procedures.proc_synoptic_id 
     ) AS stats 
  GROUP BY Synoptic WITH ROLLUP
) AS stats 
```

这给了我一个看起来像这样的两列表：

> 概要 -------------- 总计
> 
> APBI 设备插入 ---------- 1328
> 
> MRI 引导活检 ------------- 71
> 
> 立体定向活检 ------------- 10504
> 
> 总数 ---------- 11903

但正如您所见，它缺少医师总数（用户总数）。如果有人可以就如何将第三列添加到查询中给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:12:48.603

尝试这个

```
select
count(p.proc_synoptic_id), p.proc_synoptic_id, name, num_phys_procedures
from
procedures p
inner join tbl_syn_procedure on p.proc_synoptic_id = tbl_syn_procedure.name_id
left join
(
    select count(proc_synoptic_id) as num_phys_procedures, proc_synoptic_id from procedures
    where phys_id = ##
    group by proc_synoptic_id
) phys_procedures on p.proc_synoptic_id = phys_procedures.proc_synoptic_id

group by proc_synoptic_id, name; 
```

它首先获取程序总数，然后加入一个派生表，该表`phys_procedures`具有特定医生的程序数量。

# c++ - 模板元编程 GCC 错误

> ID：13151245
> 
> 赞同：0
> 
> 时间：2012-10-31T04:24:16.307
> 
> 标签：c++, gcc, compiler-construction

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

GCC 4.5.3 中似乎存在一个错误：

```
#include <type_traits>

template <bool isFundamentalType, bool isSomething>
struct Foo
{
    template <typename T>
    static inline void* Do(size_t size);
};

template <>
struct Foo<true, false>
{
    template <typename T>
    static inline void* Do(size_t size)
    {
        return NULL;
    }
};

template <>
struct Foo<false, false>
{
    template <typename T>
    static inline void* Do(size_t size)
    {
        return NULL;
    }
};

class Bar
{
};

template <typename T>
int Do(size_t size)
{
    // The following fails
    return (int) Foo<std::is_fundamental<T>::value, false>::Do<T>(size);
    // This works -- why?
    return (int) Foo<false, false>::Do<T>(size);
}

int main()
{
    return Do<Bar>(10);
} 
```

编译 `g++ bug.cpp -std=c++0x`

错误：

```
bug.cpp: In function ‘int Do(size_t)’:
bug.cpp:37:65: error: expected primary-expression before ‘&gt;’ token 
```

是否有已知的解决方法可以让我绕过这个问题？

编辑：MSVC 2010 设法编译这个就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:29:27.303

您需要添加`template`：

```
return (int) Foo<std::is_fundamental<T>::value, false>::template Do<T>(size); 
```

MSVC 2010 编译代码是因为它不能正确处理模板。

**边注**

`size_t`由于长期存在的错误，MSVC 还注入了全局命名空间。从技术上讲，您需要在其他编译器中包含正确的标头。

# scala - -Xdisable-assertions 和 -Xelide-below 不关闭断言

> ID：13151246
> 
> 赞同：3
> 
> 时间：2012-10-31T04:24:17.797
> 
> 标签：scala, compilation, sbt, assert, scalac

我目前正在开发一个使用 SBT 的 Scala 项目，并且我正在尝试生成生产构建设置，其中一个条件是所有断言都已关闭。我只是将这一行添加到我的 build.sbt 中：

```
scalacOptions ++= Seq(..., "-Xdisable-assertions") 
```

我在调试时运行 logLevel，我看到选项被传递给编译器，但是当我运行我们的程序（它的长期运行程序分析）时，我遇到了一个断言。尽管从所有迹象来看，*所有*断言都应该被编译掉。我已经用 diable-assertions 和 elide-below 尝试了这个，但没有结果。如果有人能给我一些关于我做错了什么的指示，那就太好了。我写了很多 Scala，但除了一些基本项目之外，我并没有使用过多的 SBT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:32:06.240

编辑后是否在 sbt 中运行“重新加载” `build.sbt`？因为我尝试构建一个小项目，并且所有断言都被愉快地编译掉了。作为记录，我正在使用 sbt `0.12.0`。

* * *

这是我使用的示例项目：

```
btest/
├── [  86]  build.sbt
└── [  45]  Main.scala 
```

构建.sbt：

```
scalacOptions ++= Seq("-deprecation", "-unchecked", "-Xlint", "-Xdisable-assertions") 
```

Main.scala：

```
object Main extends App {
  assert(1 != 1)
} 
```

# mysql - 检查 value IS NOT NULL AND TRIM(value) != '' AND value != 0

> ID：13151252
> 
> 赞同：3
> 
> 时间：2012-10-31T04:24:51.450
> 
> 标签：mysql, operators

我如何检查是否`value IS NOT NULL AND TRIM(value) != '' AND value != 0`？

如果我检查 a`'string' != 0`它总是返回 false，所以它不起作用。

它适用于不知道其查询的列类型的通用查询。

我需要做类似的事情`(value IS NUMERIC TYPE AND value != 0)`

`value`可以是字符串、日期、时间、blob、数字等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:28:47.270

也许`CAST(value AS int) <> 0`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:38:45.133

我以前在使用记录集进行 SQL 数据迁移时做过类似的事情。

if trim(fields(0).value & "") > "" then '我们有一个值

所以如果它为空，它就变成一个空字符串，如果它不为空，它就变成一个修剪后的字符串。最有效的方法......可能不是，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:19:21.990

在不了解列类型的情况下，您可以借助正则表达式来确定是根据字符串还是数字列数据进行处理：

```
value IS NOT NULL AND 
IF(value REGEXP '^-?[0-9]+(\.[0-9]+)?$', value <> 0, TRIM(value) <> '') 
```

根据正则表达式的结果，它将比较反对`0`或反对`''`。

**警告**字符串包含`'0'`将被视为空，但在搜索 MySQL 网站后，我找不到合适的解决方法。

# php - 如何发送 Facebook 应用程序请求以检索接受数据？

> ID：13151253
> 
> 赞同：0
> 
> 时间：2012-10-31T04:24:51.170
> 
> 标签：php, facebook, facebook-graph-api

需要发送一个 Facebook 应用程序的请求，以便当用户接受请求时，我需要检索发送它的人的姓名和接受它的人的姓名。有人可以分享一下 codr 的例子吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:37:12.893

在发送邀请时，您可以添加任何要跟踪的数据，假设您要发送`sender_name`，因此您的发送请求功能将如下所示：

```
FB.ui({
        method: 'apprequests',
        message: "has invited you to the app",
        filters:['app_non_users'],
        data: sender_name
    }, function (response) {
    }); 
```

当接收者来到您的应用程序点击发送的请求通知时，您可以检索数据并删除 php 中的请求，如下所示：

```
if(isset($_GET['request_ids']))
   {
       $request_ids = $_GET['request_ids'];
       $request_ids = explode(",", $request_ids);
       foreach($request_ids as $request_id)
            {
                 $request_object = $facebook->api($request_id);
                 if(isset($request_object['data'])) $req_data = $request_object['data'];//you can now use the sent $req_data your way
                 $full_request_id = $request_id."_".$current_user_fbid;
                 $facebook->api("$full_request_id","DELETE");
            }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:07:32.817

我假设您将使用数据库。当用户邀请朋友时，发送的请求的响应将包含 response.request 和 response.to。将此 request_id 与用户和用户朋友 id（受邀朋友）一起存储。

```
function inviteuser(){
    FB.ui({
        method: 'apprequests',
        message: "Apllications message goes here",
        exclude_ids: [1, 2, 3],
        filters:['app_non_users'],
        data: "optional additional data you may pass for tracking"
    }, function (response) {
        if (response && response.to) {
        //callback function, will be called after user invites his friend, response object will contain list of all users invited
        //save response.to and response.request in database
        }
    });
} 
```

当用户接受邀请时，即通过单击应用程序请求通知进入您的应用程序画布页面，Facebook 在“request_ids”参数中发送逗号分隔的 id。您可以获取此请求 ID 并与您的数据库进行比较以获取所需的信息。

# jquery - 使用带有 jQ uery .on() 方法的 Google 快速按钮

> ID：13151261
> 
> 赞同：2
> 
> 时间：2012-10-31T04:25:23.857
> 
> 标签：jquery

我已经在我的移动应用程序上实现了[https://github.com/alexblack/google-fastbutton](https://github.com/alexblack/google-fastbutton)并且它运行良好，但是我在徘徊它是否可以与 jQuery`.on()`方法一起使用。

像这样的东西

```
$(document).on('fastClick', '.element', function() { }); 
```

我已经尝试了上述方法，但它似乎不起作用。

以前有没有人遇到过这个问题，你让它工作了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:35:02.300

如果您使用的是 google-fastbutton，这就是这样做的方法

```
$('#your-button').fastClick(function(e) {
    alert('fast clicked!');
}); 
```

# sharepoint - SharePoint 2010 CSOM (JavaScript) 和 MicrosoftAjax.js 的 TypeScript 类型定义

> ID：13151267
> 
> 赞同：1
> 
> 时间：2012-10-31T04:26:51.637
> 
> 标签：sharepoint, typescript, csom

SharePoint 2010 JavaScript 文件（例如 SP.JS）是否存在类型定义文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:20:43.203

我们的库可以为 Sharepoint 2010 生成 Typescript，不确定 2013。它是相当新的，因此可以在此错误报告中找到有关它的最多信息 :) 但此后此错误已得到修复（请使用来自 git 的最新版本）。

*   [https://github.com/jaydata/jaydata/issues/55](https://github.com/jaydata/jaydata/issues/55)
*   [https://gist.github.com/3972900](https://gist.github.com/3972900)

我们很快就会有一篇关于这个的博文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:42:19.960

刚刚发布[http://sptypescript.codeplex.com/](http://sptypescript.codeplex.com/)

大多数定义都适用于 SharePoint 2010

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:03:50.257

从你问这个问题以来已经过去的几个小时来看，我猜不是。但是你可以自己写一个。它非常简单易行。只需从您知道和使用的功能开始，然后继续扩展它。

# sql-server - 如何实现自定义复制功能？

> ID：13151274
> 
> 赞同：0
> 
> 时间：2012-10-31T04:27:41.383
> 
> 标签：sql-server, database-replication

这是我的问题。

我在少数客户端上安装了一个服务器数据库和一个本地 SQL Express 数据库。每 2 小时我需要将记录从服务器数据库提取到本地数据库。但问题是我希望服务器数据库中的值从一个特定的数字开始，然后直到可用的记录结束 [编辑] 并且过程继续。

比如说：

[编辑] 一开始，服务器数据库说有以下数据。

10 20

在本地数据库上（在使用更新的事务复制之后）我将拥有以下数据。

10 20

左说，在服务器数据库上 2 小时后，数据将跟随......

10 20 30 40 50

现在，在 2 小时后，在我的本地 SQLExpress DB 上，我应该只复制 30 40 50 的数据值，而更早的值，即 10 和 20 应该只在本地 SQL EXPRESS DB 上删除。

除此之外，如果正在复制的 Db 上编辑值，则应该将其影响回服务器 DB。

~~我看过这个链接[我如何实现这种复制？](https://stackoverflow.com/questions/11075905/how-do-i-achieve-this-sort-of-replication)但我还没有充分考虑，因为我的架构与此时使用事务复制不同。~~

~~目前我计划将数据从服务器数据库获取到数据集，然后将其转储到我的本地数据库。~~

[编辑]

**我确实遵循了使用事务复制和事务复制以及本文中提供的更新的建议。虽然复制工作正常，但现在的问题是如果我从我的 SQL Express DB 中删除行/数据，行/数据也会在我的 SQL Server DB 上被删除，我不想要 - 如何解决这个问题。**

对此的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:34:59.867

您应该查看事务复制。它完全符合您的要求。在这里查看我的介绍系列：[SQL Server 复制的阶梯](http://www.sqlservercentral.com/stairway/72401/)

# python - 自动将键添加到 Python dict

> ID：13151276
> 
> 赞同：5
> 
> 时间：2012-10-31T04:28:05.360
> 
> 标签：python

如果它们不存在，我想自动将键添加到 Python 字典中。例如，

```
a = "a"
b = "b"
c = "c"

dict = {}
dict[a][b] = c # doesn't work because dict[a] doesn't exist 
```

如果密钥不存在，如何自动创建密钥？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-31T04:30:17.540

使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
def recursively_default_dict():
    return collections.defaultdict(recursively_default_dict)

my_dict = recursively_default_dict()
my_dict['a']['b'] = 'c' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-18T12:00:23.910

```
from collections import defaultdict
d = defaultdict(dict)
d['a']['b'] = 'c' 
```

另外，使用时请小心`dict`-它在python中具有含义：[https ://docs.python.org/2/library/stdtypes.html#dict](https://docs.python.org/2/library/stdtypes.html#dict)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-20T05:07:19.607

对于简短的脚本，您还可以使用这一行：

```
d = {}
d.setdefault(a, {})[b] = c 
```

# mysql - 将 MySQL 连接到 ColdFusion10 时出错

> ID：13151278
> 
> 赞同：3
> 
> 时间：2012-10-31T04:28:33.370
> 
> 标签：mysql, coldfusion, coldfusion-10

我无法让我的 ColdFusion 10 数据源连接到 MySql v5.xx

对于连接器类型，我使用的是：MySQL (4/5)

我收到此错误：

```
Connection verification failed for data source: cfMySqlDSN
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.
The root cause was that: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up. 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:28:06.940

我有同样的东西，用 Adob​​e 提出的，没有人可以复制它。

最后，我回滚到 CF9 附带的 MySQL 驱动程序版本，并且它工作正常。可能尝试一下。

有问题的文件是`[ColdFusion dir]/WEB-INF/cfusion/lib/mysql-connector-java-commercial-[some version number]-bin.jar`

# c# - 处理 SQL Server 2012 表中的空间数据类型

> ID：13151280
> 
> 赞同：1
> 
> 时间：2012-10-31T04:28:41.090
> 
> 标签：c#, sql-server, sql-server-2012, sqldatatypes, sqlclient

一些背景：

我在两个不同的 VM 上运行两个不同的 SQL Server 安装。我正在尝试从我的代码（为 SQL Server 2008 R2 编写）连接到它们。我当前的 .NET 框架版本是 4.0。我的 Microsoft SQL Server 2008 R2 安装正在运行为其设计的 AdventureWorks，而我的 SQL Server 2012 Express 安装正在运行更新的 AdventureWorks2012 数据库。我正在查询 Person.Address。

目前我遇到了一个异常，说“DataType 不能为空”。我通过查看返回的架构推断出问题来自 SQL Server 2012 返回

Microsoft.SqlServer.Types.SqlGeography

数据类型。似乎 Type.GetType 无法将其转换为可用的东西并引发异常。我松了一口气，我什么都没做，但我也很困惑，因为这段代码应该可以通用。请记住，此代码在 SQL Server 2008 R2 上完美运行（因为它缺少空间数据类型）。

我可以想出 100 种不好的方法来处理这个问题。但是，我想向你们寻求建议。将 .NET 升级到 4.5 会解决这个问题吗？我是否必须更改我的代码以适应新的数据类型？如果我的应用程序不处理空间数据类型，我应该担心它们吗？我该如何处理，因为显然 SqlClient 和 Type.GetType 做得不好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:06:59.183

如果您使用的是 2012 和 2008 R2，我建议您强制使用 SQL 2012 SqlGeography 类型。

您可能会考虑添加程序集重定向，因此任何尝试加载 2008 R2 SqlGeograph 的 .NET 代码都将被视为 SQL 2012 SqlGeography。SQL 库在序列化时通常是向后兼容的（只要可能，即当不使用 SQL 2012 特定功能时，例如 CurvePolygon）。

```
<runtime>
  <assemblyBinding>
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-10.0.0.0" newVersion="11.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

# gdb - 需要来自更新源的 rpmbuild 的 GLIBC 调试信息

> ID：13151281
> 
> 赞同：0
> 
> 时间：2012-10-31T04:28:41.967
> 
> 标签：gdb, glibc, rpmbuild

我正在努力`RHEL WS 4.5`。

我已经获得了匹配这个系统的 glibc 源 rpm，打开它使用 rpm2cpio 获取它的内容。

在该树中工作，我为 mtrace.c 创建了一个补丁（我想添加更多堆栈回溯级别）并将其合并到规范文件中，并创建了一组新的 RPM，包括 debuginfo rpm。

我将所有这些都安装在一个测试虚拟机上（从相同的 RH 基础映像创建），并且可以确认我的更改已包含在内。

但是对于更复杂的执行，我在 mtrace.c 中崩溃了……但是 gdb 找不到调试信息，所以我没有得到行号信息，我实际上无法调试失败。

根据日期，我想我可以确认在 /usr/src/debug/glibc-2.3.6/ 中的测试系统上安装了调试信息

我在 gdb 中尝试过 `sharedlibrary libc*` ，它告诉我符号已经加载。

我的测试包括一个本地构建的 python，并且为 python 找到了完整的符号。

我的感觉是 glibc 可能不是在启用调试的 rpmbuild 下构建的。我已经查看了 glibc.spec 文件，甚至使用

_enable_debug_packages

定义为 1 看起来可能会影响结果。我对 rpmbuild 构建步骤中调用的配置脚本的审查没有给我任何提示。

嗯..刚刚找到 /usr/lib/debug/lib/libc-2.3.4.so.debug 和 /usr/lib/debug/lib/tls/i486/libc-2.3.4.so.debug 但这两个报告为被 file 命令剥离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:12:11.187

您似乎正在安装不匹配的 RPM：

> /usr/src/debug/glibc-2.3.6
> 刚刚找到 /usr/lib/debug/lib/libc-2.3.4.so.debug

没有相同的版本；它们不可能来自相同的 -debuginfo RPM。

> 这两个都被文件命令报告为剥离。

这些不应*显示*为已剥离。要么它们没有正确构建，要么你的`strip`被破坏了。

另请注意，您实际上不必让所有这些工作来调试您的问题。在`RPMBUILD`目录中，您应该能够找到 glibc 构建目录，带有 full-debug `libc.so.6`。只需将该库复制到您的 VM 中，您就不必担心`debuginfo`RPM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:46:42.143

尝试验证`mtrace.c`确实存在调试信息。首先查看 GLIBC 的单独调试信息是否知道名为的编译单元`mtrace.c`：

```
$ eu-readelf -w /usr/lib/debug/lib64/libc-2.15.so.debug  > t
$ grep mtrace t
           name                 (strp) "mtrace.c"
             name                 (strp) "mtrace"
 1     0     0         0         mtrace.c
 [10480]  "mtrace.c"
 [104bb]  "mtrace"
 [5052] symbol: mtrace, CUs: 446 
```

然后看看 GDB 是否真的从 glibc-debuginfo RPM 中找到了源文件：

```
(gdb) set pagination off
(gdb) start # pause your test program right after main()
(gdb) set logging on
Copying output to gdb.txt.
(gdb) info sources 
```

退出 GDB，然后在 gdb.txt 中 grep for mtrace，你应该会找到类似的东西`/usr/src/debug/glibc-2.15-a316c1f/malloc/mtrace.c`

这适用于 GDB 7.4。我不确定 RHEL 4.5 附带的 GDB 版本是否支持上面使用的所有命令。不过，从源代码构建上游 GDB 实际上比 Python 更容易。

尝试将 strack 跟踪添加到 mtrace 时，请确保不要`malloc()`在 GLIBC malloc 挂钩中直接或间接调用。

# c# - 如何在 UI 线程无模式之上的后台线程中显示对话框？

> ID：13151289
> 
> 赞同：0
> 
> 时间：2012-10-31T04:29:47.937
> 
> 标签：c#, winforms

有没有办法在后台线程中显示表单，但您总是可以在 UI 线程前面看到它是无模式的？

例如 UI 线程使用 parentForm 运行，并且有一个 backgroundworker 线程使用 childForm 在顶部运行。我可以在无模式的顶部使用 parentForm 和 childForm，这意味着我总是可以看到我的 childForm 但不会阻止我的 parentForm。

似乎 childForm.ShowDialog(parentForm) 会阻塞 UI 线程，我不想在 UI 线程中调用 childForm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:40:20.127

我不确定你是什么意思，但`Show()`如果你想在不阻塞主 UI 的情况下显示表单，你总是可以尝试在特定表单中运行

**例子**

```
Form2 _Form2 = new Form2();
_Form2.Show(); 
```

或者，如果您想异步运行一个新表单作为应用程序的主表单，您可以尝试创建一个新`Thread`表单并在其中运行该表单

**例子**

```
public void RunThread()
{
    Thread thread = new Thread(new ThreadStart(RunForm)); //Create a new thread to execute RunForm()
    thread.Name = "NewForm"; //Name the new thread (Not required)
    thread.Start(); //Start executing RunForm() in the new thread
}

public void RunForm()
{
    try
    {
        Application.Run(new Form2()); //Run Form2() as the main form of the application
    }
    catch (Exception ex)
    {
        //DoSomething
        //MessageBox.Show(ex.Message);       
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

# java - Android AlarmManager 不工作

> ID：13151290
> 
> 赞同：1
> 
> 时间：2012-10-31T04:29:49.753
> 
> 标签：java, android, alarmmanager

在我的主要活动中，我正在执行此操作：

```
 Calendar calendar = Calendar.getInstance();

        // 9:45 PM 
        calendar.set(Calendar.HOUR_OF_DAY, 21);
        calendar.set(Calendar.MINUTE, 45);
        calendar.set(Calendar.SECOND, 0);
        AlarmManager am = (AlarmManager) this.getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        PendingIntent pi = PendingIntent.getService(this.getApplicationContext(), 0, new Intent(this.getApplicationContext(), MorningReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pi);

        Toast msg = Toast.makeText(NotificationScanner.this,
                "Scheduled: " + calendar.getTime(), Toast.LENGTH_LONG);
        msg.show(); 
```

这是我的接收器

```
public class MorningReceiver extends BroadcastReceiver { 
@Override
public void onReceive(Context context, Intent intent) {
    MediaPlayer mMediaPlayer = new MediaPlayer();
    Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM); 
    try {
        mMediaPlayer.setDataSource(context, alert);
        final AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.start();
            PackageManager packageManager = context.getPackageManager();
            Intent skype = packageManager.getLaunchIntentForPackage("com.skype.raider");
            context.startActivity(skype);
        }
    }catch(Exception e){
        Toast msg = Toast.makeText(context,
                "Exception thrown", Toast.LENGTH_LONG);
        msg.show();
    }
} 
```

}

主活动中的 Toast 显示，所以我知道警报正在设置，但接收器从未被调用（铃声从未播放，也没有 Toast 异常消息）。有谁知道我的 AlarmManager 在这里做错了什么？我应该在我的清单中做些什么来让接收器工作吗？

谢谢

# mysql - 使用 Where 子句从视图中选择以引用另一个数据库 - 未知列错误

> ID：13151296
> 
> 赞同：2
> 
> 时间：2012-10-31T04:30:37.273
> 
> 标签：mysql, view

我正在尝试从我创建的视图中选择某些值。声明如下：

```
SELECT * FROM dashboard.team
WHERE ac2012.acx_users.id = 1; 
```

如您所见，这里引用了 2 个数据库：

1.  仪表板数据库，团队表
2.  ac2012 数据库，acx_users.id 表

ac2012.acx_users.id 是原始 Create View 语句中的正则表达式，我正在使用它，因为我当然不能在 Where 子句中使用 ALIAS ......但是，这显示了一个错误：

```
Error Code 1054: Unknown column 'ac2012.acx_users.id' in 'where clause' 
```

我不确定如何让它工作，因为在这种情况下我需要引用另一个数据库，但它无法识别数据库。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:37:05.263

由于您从视图中进行选择，因此基础数据库不再可见。您只能看到视图呈现的内容，作为视图所在的数据库的一部分，因此 try`WHERE acx_users.id = 1`或您在视图定义中将该字段别名的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:45:26.023

```
 SELECT * FROM dashboard.team
    LEFT OUTER JOIN ac2012 ON ac2012.CommonColumnName=dashboard.CommonColumnName
    WHERE ac2012.acx_users.id = 1; 
```

======================
请用原始列名替换...

# facebook - 使用 javascript api 在页面中的 Facebook 自动提要帖子

> ID：13151298
> 
> 赞同：1
> 
> 时间：2012-10-31T04:30:47.220
> 
> 标签：facebook, facebook-javascript-sdk

如何在 facebook 页面中发布提要？我已经在我的墙帖中完成了，但我不知道如何使用 javascript api 在页面中进行墙帖。其实我想要喜欢![在我的 Facebook 墙上发帖](../Images/40c44db060cdf8c26f3fbbe2f512c648.png)

我从 facebook api 找到了代码。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T07:29:29.027

试试这个：

```
<body>
<div id='fb-root'></div>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<p>
    <a href="javascript:;" onclick='postToFeed(); return false;'>Post to Group</a>
</p>
<p id='msg'></p>

<script> 
  FB.init({appId: "Yourappid", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
      FB.api('/Pageid/feed', 'post', 
              { 
                  // for the newer versions of the Facebook API you need to add the access token
                  access_token: 'page access token'
                  message     : "It's awesome ...",
                  link        : 'Link',
                  picture     : 'Imageurl',
                  name        : 'Featured of the Day',
                  to: 'Pageid',
                  from: 'Pageid',
                  description : 'Your description'
          }, 
          function(response) {

              if (!response || response.error) {
                  alert(JSON.stringify(response.error));
              } else {
                  alert('Post ID: ' + response.id);
              }
          });
  }

</script>
</body> 
```

放入您的 HTML 正文标记中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:31:39.423

[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

使用以下文本搜索提要标题：

> 您可以通过向 PAGE_ID/feed 连接发出 HTTP POST 请求来创建链接、帖子或状态消息
> 
> 要在发布到墙上时模拟页面（即作为页面而不是当前用户发布），您必须使用具有 manage_pages 和 publish_stream 权限的页面 access_token，如上面的页面访问令牌中所述。

# json - JSON 数组和 Jquery

> ID：13151301
> 
> 赞同：0
> 
> 时间：2012-10-31T04:31:22.670
> 
> 标签：json, web-services, jquery

我正在使用 j-query 调用 ASP.Net Web 服务（.asmx），我的响应是一个 json 数组，如下所示

我的jQuery代码是：

```
$.ajax({
type: "POST",
contentType: "application/json; charset=utf-8",
dataType: "json",
    url: "http://localhost:1000/WebSite2/Service.asmx/HelloWorld",
    data: '{}',
    success: function(msg) {
        alert(msg.d);
    },
    error: function() {  
        alert("Error");   
    }
}); 
```

我的回答是：

```
 [
       {
          "id":1,
          "name":"a",
          "place":"b"
       },
       {
          "id":2,
          "name":"c",
          "place":"d"
       },
       {
          "id":3,
          "name":"e",
          "place":"f"
       }
    ] 
```

我想使用 j-query 将数组中的每个对象添加到列表中。我尝试了很多方法但失败了谁能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:43:58.940

您必须使用[**jquery.parseJSON**](http://api.jquery.com/jQuery.parseJSON/)将 json 字符串转换为 json 对象。然后，您可以使用每个数组对象的属性名称。

**[现场演示](http://jsfiddle.net/HeyNS/)**

```
var jsonString =  '[{"id":1,"name":"a","place":"b"},{"id":2,"name":"c","place":"d"}, {  "id":3,"name":"e","place":"f"}]';

jsonArray = $.parseJSON(jsonString );

for(i=0; i < jsonArray.length; i++)
{
    alert(jsonArray[i].id);
    alert(jsonArray[i].name);
    alert(jsonArray[i].place);
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:44:14.650

我已将数组中的对象添加到 ul ...

```
var data =[
   {
      "id":1,
      "name":"a",
      "place":"b"
   },
   {
      "id":2,
      "name":"c",
      "place":"d"
   },
   {
      "id":3,
      "name":"e",
      "place":"f"
   }
]​;

var html = '<ul>';

$.each(data, function(i) {
    html += '<li id="' + data[i].id + '">Name = '+ data[i].name + ' Place = ' + data[i].place + '</li>'; 
});
html += '</ul>';

$('#divList').append(html); 
```

换成应该就好了`data`..`msg.d`

**[检查小提琴](http://jsfiddle.net/sushanth009/dD7YR/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T04:49:14.103

像这样的东西应该适合你。没有承诺，但这是一个开始：

JS

```
success: function(msg) {
    var len = msg.d.length;
    var message = msg.d;
    for (var i=0; i < len; i++)
       {
        $('ul.container').append('<li id="' +message[i].id+  '" place="' +  message[i].place +  '">' +  message[i].name +  '</li>);
       }
}, 
```

HTML

```
<ul class="container">

</ul> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T04:52:50.693

**[演示](http://jsfiddle.net/dD7YR/2/)**

```
var jsondata =[
{
  "id":1,
  "name":"a",
  "place":"b"
},
{
  "id":2,
  "name":"c",
  "place":"d"
},
{
  "id":3,
  "name":"e",
  "place":"f"
}
];

$.each(jsondata, function(key,val) {
 $.each(val, function(k,v){   
      alert(v);
 });
}); 
```

# asp.net-mvc-3 - Web 应用程序在 Web 服务器上工作，但从其他机器给出错误

> ID：13151302
> 
> 赞同：0
> 
> 时间：2012-10-31T04:31:26.303
> 
> 标签：asp.net-mvc-3, web-deployment-project

我有一个 ASP.Net MVC 3 应用程序。我已经为它创建了一个设置并安装在我的网络服务器上。

当我从 Web 浏览器访问应用程序时`"http://localhost/myapp"`，它可以工作。

但是当我从另一台机器上尝试时，就像`"http://mywebserver/myapp"`它给出了一个错误：

> 传入字典的模型项的类型为“System.Web.Mvc.HandleErrorInfo”，但此字典需要 myapp.Models.ErrorModel 类型的模型项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:52:21.487

根据：http: [//blogs.msdn.com/b/dataaccesstechnologies/archive/2012/08/09/error-quot-the-underlying-provider-failed-on-open-quot-in-entity-framework-application .aspx](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2012/08/09/error-quot-the-underlying-provider-failed-on-open-quot-in-entity-framework-application.aspx)

这可能是新服务器上的权限问题等

```
解决方案1：在现有的连接字符串中删除“user Instance=true”，它就可以工作了。

问题的可能原因如下：
用户实例无法附加数据库，因为用户没有所需的权限。用户实例在打开连接的用户的上下文中执行，而不是普通的 SQL Server 服务帐户。打开用户实例连接的用户必须对连接字符串的 AttachDbFilename 选项中指定的 .mdf 和 .ldf 文件具有写入权限。

另一个常见问题是当数据库附加到 SQL Server Express 实例时成功打开数据库文件，但在尝试从 Visual Studio IDE 打开时失败。这可能是因为 SQL Server Express 实例以“NT AUTHORITY\NETWORK SERVICE”运行，而 IDE 以 Windows 帐户运行。因此，权限可能不起作用。

此问题的一个变体是当打开用户实例连接的用户对数据库文件具有读取权限但没有写入权限时。如果您收到一条消息说数据库以只读方式打开，则需要更改数据库文件的权限。

用户实例的另一个主要问题是因为 SQL Server 以独占访问权限打开数据库文件。这是必要的，因为 SQL Server 在其内存中管理数据库数据的锁定。因此，如果多个 SQL Server 实例打开同一个文件，则可能会损坏数据。如果两个不同的用户实例使用同一个数据库文件，一个实例必须先关闭该文件，另一个实例才能打开它。关闭数据库文件有两种常用方法，如下所示。

用户实例数据库设置了自动关闭选项，因此如果 8-10 分钟没有与数据库的连接，数据库将关闭并关闭文件。这会自动发生，但可能需要一段时间，尤其是在为您的连接启用连接池的情况下。

通过调用 sp_detach_db 从实例中分离数据库将关闭文件。这是 Visual Studio 用来确保在 IDE 在用户实例之间切换时关闭数据库文件的方法。例如，您正在使用 IDE 设计启用数据的网页。您按 F5 运行应用程序。IDE 分离数据库，以便 ASP.NET 可以打开数据库文件。如果您将数据库连接到 IDE 并尝试从浏览器运行 ASP 页面，ASP.NET 将无法打开数据库，因为 IDE 仍在使用该文件。

```

# css - 我可以在一个 .css 文件中编写所有 Spark CSS 和 MX CSS 吗？

> ID：13151304
> 
> 赞同：1
> 
> 时间：2012-10-31T04:31:37.940
> 
> 标签：css, apache-flex, air, adobe, flex-spark

我可以在一个 .css 文件中编写所有 Spark CSS 和 MX CSS 吗？
Spark CSS：`s:`类似的`s:TextInput`
CSS MX CSS：类似的`mx:`CSS `mx:TextInput`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:41:44.813

是的你可以！更多细节在[这里解释。](http://cookbooks.adobe.com/post_How_to_use_the_new_CSS_syntax_in_Flex_4-15726.html)只要确保使用正确的命名空间

```
mx|Button
   {
   color:#ffffff;
   }
s|Button 
   {
   color:#000000;
   } 
```

肯定会工作。

# ruby-on-rails - 我的课有问题

> ID：13151309
> 
> 赞同：0
> 
> 时间：2012-10-31T04:31:52.687
> 
> 标签：ruby-on-rails, model

你能帮我解决以下问题吗？我知道这是基本的，但我似乎缺少一些非常基本的东西。当我问 SectionEdit.new 时，尽管我指向正确的类名，但事情似乎出错了。谢谢你的帮助。

这是我得到的错误。

```
$ edit = SectionEdit.new
NameError: undefined local variable or method `class_name' for #<Class:0x103675008>
    from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
    from /Users/seydoukonate/Sites/simple_cms/app/models/section_edit.rb:3
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `load'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:469:in `load_file'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:468:in `load_file'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:353:in `require_or_load'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:192:in `const_missing'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `each'
    from /Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:190:in `const_missing'
    from (irb):14 
```

**我已将我的模型“页面”定义如下**

```
class SectionEdit < ActiveRecord::Base
  attr_accessible :admin_user_id, :section_id, :summary
  belongs_to :editor, class_name => "AdminUser", :foreign_key => 'admin_user_id'
  belongs_to :section
end 
```

**管理员用户**

```
class AdminUser < ActiveRecord::Base
   attr_accessible :first_name, :last_name, :email, :username

  has_and_belongs_to_many :pages
  has_many :section_edits

  scope :named, lambda{|first,last| where(:first_name => first,:last_name => last)}
end 
```

**部分**

```
class Section < ActiveRecord::Base
  attr_accessible :name, :position, :visible, :content_type, :content
  belongs_to :page
  has_many :section_edits
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T04:37:49.030

更改`class_name`为`:class_name`

```
belongs_to :editor, class_name => "AdminUser", :foreign_key => 'admin_user_id' 
```

到

```
belongs_to :editor, :class_name => "AdminUser", :foreign_key => 'admin_user_id' 
```

对于 Rails 3

```
belongs_to :editor, class_name: "AdminUser", foreign_key: 'admin_user_id' 
```

# c# - 从数据库中加载图片框中的图像

> ID：13151319
> 
> 赞同：0
> 
> 时间：2012-10-31T04:33:53.427
> 
> 标签：c#, winforms, picturebox, windows-applications

我已经尝试使用以下代码从数据库中加载图片框中的图像。但每次，我都会收到类似“ **`paramater is not valid`**”的错误。

```
buttonSave()
            {
                .......
                .......
                img = Image.FromFile(strFileName);
                byte[] byteImg = ImageToByteArray(img);
                objEmp.Picture = byteImg;
                .......
                .......
            } 

public byte[] ImageToByteArray(Image img)
        {
            System.IO.MemoryStream ms = new System.IO.MemoryStream();
            img.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            return ms.ToArray();
        }  

Display()
       { 
           .......
           .......
           Byte[] bytePicData = (Byte[])dt.Rows[0]["PICTURE"];                
           MemoryStream stmPicData = new MemoryStream(bytePicData);
           PicBox.Image = Bitmap.FromStream(stmPicData);} 
           .......
           .......
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:03:54.877

图像已损坏。错误来自 FromStream 方法。您可以写入磁盘并查看是否可以在图像视图中打开它。如果没有，请检查您将其插入数据库的代码

```
Byte[] bytePicData = (Byte[])dt.Rows[0]["PICTURE"];
// Save
File.WriteAllBytes("out.bmp", bytePicData);

MemoryStream stmPicData = new MemoryStream(bytePicData);
PicBox.Image = BitMap.FromStream(stmPicData); 
```

# excel - 计算值的出现次数

> ID：13151320
> 
> 赞同：12
> 
> 时间：2012-10-31T04:33:54.753
> 
> 标签：excel, count, excel-formula, pivot-table, countif

我有一列带有重复值的文本值。我想创建一个新的唯一值列（不重复）和一个列，其中包含每个值的频率。

最简单的方法是什么？效率不是什么大问题，因为它不到 10,000 行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T16:03:10.973

为了答案而不是评论，将列（比如 A）复制到 B（比如），仅对于 B 数据 > 数据工具 - 删除重复项，然后在 C2 中输入：

```
=COUNTIF(A:A,B2) 
```

并根据需要复制下来

或（首选选项）

使用数据透视表作为@Tim：

![SO13151320 示例](../Images/508083d6eae294d2df6cc76d4fd344f2.png)

# vb.net - 如何在 VB.NET 中引发异常

> ID：13151322
> 
> 赞同：54
> 
> 时间：2012-10-31T04:34:11.180
> 
> 标签：vb.net, exception

在 VB.NET 中应该如何引发异常？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-31T04:36:11.783

你会抛出一个新的异常。

看看[Throw 语句（Visual Basic）](http://msdn.microsoft.com/en-us/library/ty79csek%28v=vs.100%29.aspx)

> Throw 语句引发异常，您可以使用结构化异常处理代码 (Try...Catch...Finally) 或非结构化异常处理代码 (On Error GoTo) 进行处理。您可以使用 Throw 语句来捕获代码中的错误，因为 Visual Basic 会向上移动调用堆栈，直到找到适当的异常处理代码。

**编辑**

通过请求和链接

```
Throw New System.Exception("An exception has occurred.") 
```

# css - 平滑的 CSS 渐变

> ID：13151331
> 
> 赞同：15
> 
> 时间：2012-10-31T04:35:04.200
> 
> 标签：css, css-gradients

我正在学习如何使用 CSS 渐变。

我的问题是从上到下的渐变。您可以*看到*颜色变化中的“停止”。

![在此处输入图像描述](../Images/fa4959dd8dc9d65157c1ca9dab64de2a.png)

这是我的 CSS 代码

```
#header { 
   width:1000px; 
   height:250px; 
   background:-moz-linear-gradient(top, #BF7A30 30%, #EDD599); 
   background:-webkit-linear-gradient(top, #BF7A30 30%, #EDD599); 
} 
```

有没有办法平滑从上到下渐变中的停靠点？（在我看来，这在从左到右或从右到左的渐变中不是很明显）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2021-01-15T22:38:19.980

这种弯曲效果的主要原因实际上是颜色的线性混合，这对人眼来说并不那么和谐。

Andreas Larsen 在 css-tricks.com (2017) 上写了一篇非常详尽的文章。 [https://css-tricks.com/easing-linear-gradients/](https://css-tricks.com/easing-linear-gradients/)

它通过定义近似回旋曲线的多个色标来描述非线性渐变的概念。

会产生这样的结果（.gradient-clothoid）：

```
.gradient-wrp {
  display: flex;
}

.header {
  width: 100%;
  height: 250px;
  flex: 0 0 none;
}

.gradient-linear {
  background-image: linear-gradient(#bf7a30 30%, #edd599);
}

.gradient-smooth {
  background-image: linear-gradient(#bf7a30 25%, 75%, #edd599);
}

.gradient-clothoid {
  background-image: linear-gradient(
    rgba(191, 122, 48, 1) 0%,
    rgba(191, 122, 48, 0.3) 50%,
    rgba(191, 122, 48, 0.15) 65%,
    rgba(191, 122, 48, 0.075) 75.5%,
    rgba(191, 122, 48, 0.037) 82.85%,
    rgba(191, 122, 48, 0.019) 88%,
    rgba(191, 122, 48, 0) 100%
  );
}
```

```
<div class="gradient-wrp">
  <div class="header gradient-linear"></div>
  <div class="header gradient-smooth"></div>
  <div class="header gradient-clothoid"></div>
</div>
```

这个概念也被称为“稀松布”。

恕我直言，不太适合像原始示例那样“开始”颜色停止：

*   渐变的前 30% 应具有 100% 的颜色强度。可能是为了确保标题的文本可读性更好
*   剩下的 70% 应该有一个平滑的颜色过渡。

我实际上更喜欢 Amelia Bellamy-Royds 的建议（评论下方的文章），使用（得到很好支持的）渐变平滑，通过添加没有颜色定义的停止，如下所示：

```
.gradient-smooth{
   background-image:linear-gradient(#BF7A30 25%, 75%, #EDD599); 
} 
```

这将使 25% 到 75% 之间的渐变平滑到基于底部样条的而不是线性的。

```
.gradient-linear{
   background-image:linear-gradient(#BF7A30 30%, #EDD599); 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-08T05:59:58.340

看一下这个：

```
background-color: #bf7a30;
background-image: linear-gradient(0deg, #bf7a30 0%, #edd599 46%, #bf7a30 100%); 
```

我很容易从[www.gradientcss.com生成它](http://www.gradientcss.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-10T10:16:24.123

正如@nighthawk2534 提到的，为渐变添加更多颜色是可行的方法。显然，这些必须是“正确”的颜色。

我不太了解色彩理论，但偶然发现了一个很好的工具： [https ://mycolor.space/gradient](https://mycolor.space/gradient)

对于您的示例，它给出了：

```
background-image: linear-gradient(to right top, #bf7a30, #ca9148, #d5a861, #e1bf7d, #edd599); 
```

看起来像这样： [图片](https://i.stack.imgur.com/xcZ2t.png)

（我知道这个线程很老，但仍然可能有帮助）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-31T04:54:11.657

想想下面的css将满足您的需要。

**CSS：**

```
#header {
    width:1000px;
    height:250px;
    /* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(bottom, #EDD799 0%, #BF7F37 100%);
    /* Mozilla Firefox */ 
background-image: -moz-linear-gradient(bottom, #EDD799 0%, #BF7F37 100%);
    /* Opera */ 
background-image: -o-linear-gradient(bottom, #EDD799 0%, #BF7F37 100%);
    /* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #EDD799), color-stop(1, #BF7F37));
    /* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(bottom, #EDD799 0%, #BF7F37 100%);
    /* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to top, #EDD799 0%, #BF7F37 100%);
} 
```

[http://jsfiddle.net/xPLPH/](http://jsfiddle.net/xPLPH/)

**了解有关线性渐变的更多信息：** [https ://developer.mozilla.org/en-US/docs/CSS/linear-gradient](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)

# python - lxml 中的 POST 方法表单使用 submit_form 引发 TypeError

> ID：13151333
> 
> 赞同：10
> 
> 时间：2012-10-31T04:35:07.793
> 
> 标签：python, python-3.x, lxml

我正在尝试使用 lxml 提交 POST 方法表单，但我收到了 TypeError。这是引发此错误的最小示例：

```
>>> import lxml.html
>>> page = lxml.html.parse("http://www.webcom.com/html/tutor/forms/start.shtml")
>>> form = page.getroot().forms[0]
>>> form.fields['your_name'] = 'Morphit'
>>> result = lxml.html.parse(lxml.html.submit_form(form))
    Traceback (most recent call last):
          File "<stdin>", line 1, in <module>
            File "/usr/lib/python3.3/site-packages/lxml/html/__init__.py", line 887, in submit_form
              return open_http(form.method, url, values)
            File "/usr/lib/python3.3/site-packages/lxml/html/__init__.py", line 907, in open_http_urllib
              return urlopen(url, data)
            File "/usr/lib/python3.3/urllib/request.py", line 160, in urlopen
              return opener.open(url, data, timeout)
            File "/usr/lib/python3.3/urllib/request.py", line 471, in open
              req = meth(req)
            File "/usr/lib/python3.3/urllib/request.py", line 1183, in do_request_
              raise TypeError(msg)
          TypeError: POST data should be bytes or an iterable of bytes. It cannot be of type str. 
```

我在网上其他地方找到了确切的错误，但我没有看到它像这样从 lxml 内部生成。有谁知道这是一个错误，还是预期的行为以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T21:58:51.187

来自[https://github.com/lxml/lxml/pull/122/files](https://github.com/lxml/lxml/pull/122/files)：

“在 python3 中，urlopen 需要 POST 数据的字节流。这个补丁在传输之前将数据编码为 utf-8。” 在 src/lxml/html/__init__.py 中，更改第 918 行，

```
data = urlencode(values) 
```

到

```
data = urlencode(values).encode('utf-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T22:03:47.510

它是 Python 3，所以你应该写

```
form.fields['your_name'] = b'Morphit' 
```

或者

```
form.fields['your_name'] = 'Morphit'.encode('utf-8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-25T08:51:41.183

```
def myopen_http(method, url, values):
   if not url:
      raise ValueError("cannot submit, no URL provided")
   ## FIXME: should test that it's not a relative URL or something
   try:
      from urllib import urlencode, urlopen
   except ImportError: # Python 3
      from urllib.request import urlopen
      from urllib.parse import urlencode
   if method == 'GET':
      if '?' in url:
         url += '&'
      else:
         url += '?'
         url += urlencode(values)
         data = None
   else:
      data = urlencode(values).encode('utf-8')

   return urlopen(url, data)

result = lxml.html.parse(lxml.html.submit_form(form, open_http=myopen_http)) 
```

# hadoop - Hadoop MapReduce 如何在 mapper 和 reducer 之前处理相同的键/值对？

> ID：13151334
> 
> 赞同：0
> 
> 时间：2012-10-31T04:35:08.547
> 
> 标签：hadoop, mapreduce

它会留下一个并删除其他的，还是将它们全部传递给mapper和reducer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:49:42.477

Hadoop 框架不会忽略/删除任何重复的 KV 对。对 KV 对的任何忽略/修改都必须在用户定义的 map 和 reduce 函数中完成。

框架读取输入数据并调用用户定义的映射函数，输入数据为 KV 对，映射函数经过一些处理后发出 KV 对。这些中间 KV 对被排序/合并，并且用户定义的 reducer 函数被一次又一次地调用每个键，reduce 函数将再次发出 KV 对。

建议获取[Hadoop: The Definitive Guide, 3rd Edition](http://shop.oreilly.com/product/0636920021773.do)，以便更清楚地了解 MapReduce 和 Hadoop。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:50:52.930

相同的键值对

* * *

## 地图阶段

*由于键值对彼此独立，因此 Mapper 永远不会查找/知道相同的键值对*

前任：

```
key  value
1       2
1       2
2       5
3       19

map(k,v)
{
 emit(k,v)
} 
```

发射：1,2 1,2 2,5 3,19

* * *

## 减少阶段

*通过对 Key 上的值进行排序来处理相同的 Key-Value 对，因此与 Key 关联的值被忽略，因此每个值都被视为**唯一的**。*

前任：

```
key    value 
1      {2,2}
2      {5}
3      {19} 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T10:05:25.447

正如@saurabh 提到的，MapReduce 模型将在 Map 阶段独立读取它们，并在 Reduce 阶段按 Key 进行分组

# c# - 使用 NAudio 播放带有自定义编解码器的 WAV

> ID：13151338
> 
> 赞同：3
> 
> 时间：2012-10-31T04:35:51.407
> 
> 标签：c#, wav, codec, naudio

我有一个使用自定义编解码器录制的 WAV 文件。编解码器已安装在我的机器上，WAV 文件在我的机器上使用 Windows Media 播放器可以正常播放。我正在使用 NAudio 例程尝试通过一些 C# 代码播放 WAV 文件。自定义格式的值看起来很奇怪，但我通过分析 WAV 文件头煞费苦心地检查了它们。这是我想出的用于播放文件的最佳 C# 代码：

```
WaveFormat wfOKI = WaveFormat.CreateCustomFormat(WaveFormatEncoding.DialogicOkiAdpcm, 8000, 1, 3000, 48, 3);
WaveStream wsRaw = new WaveFileReader(txtFileName.Text);
wsRaw = WaveFormatConversionStream.CreatePcmStream(wsRaw);    // Line A
wsRaw = new BlockAlignReductionStream(wsRaw);                 // Line B
WaveStream wsOKI = new RawSourceWaveStream(wsRaw, wfOKI);

WaveOut woCall = new WaveOut();
woCall.Init(wsOKI);    // <-- This line gives an error.
woCall.Play();

while (woCall.PlaybackState == PlaybackState.Playing)
{
    System.Threading.Thread.Sleep(300);
} 
```

Init() 导致以下错误：在 NAudio.dll 中发生“NAudio.MmException”类型的未处理异常。附加信息：WaveBadFormat 调用 waveOutOpen。

该代码是使用自定义编解码器播放 WAV 的正确策略吗？我已经尝试了在 A 行和 B 行中注释/注释的所有四种组合（与错误消息没有区别）。

我正在使用 Windows 7 64 位、Visual Studio 2010 专业版（项目设置为 x86）和 NAudio 1.6 版。我对 NAudio 很陌生，但确实有几行播放“标准”WAV（即不使用自定义编解码器的文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:31:17.610

如果您有 WAV 文件，则不需要`RawSourceWaveStream`. 您可以直接播放转换后的流。

```
var wsRaw = new WaveFileReader(txtFileName.Text);
wsRaw = WaveFormatConversionStream.CreatePcmStream(wsRaw);
WaveOut woCall = new WaveOut();
woCall.Init(wsRaw);
woCall.Play(); 
```

此外，如果您使用 WaveOut，则不应调用 thread.sleep 来等待它完成。如果您不是从带有 GUI 的应用程序中使用它，请尝试使用 WaveOutEvent。

# html - 如何在 webkit 中删除损坏图像周围的边框？

> ID：13151340
> 
> 赞同：16
> 
> 时间：2012-10-31T04:36:00.610
> 
> 标签：html, css, webkit, html-email

有人可以建议我吗？WebKit 浏览器继续在禁用的图像周围放置一个灰色的 1px 边框。我需要删除它的原因是为了在电子邮件客户端禁用图像时进行电子邮件优化。在 Firefox 中运行良好，但 WebKit 浏览器一直显示边框。

我已经尝试过`border:none !important`包括内联在内的所有地方，但 Chrome/Safari 很固执。

编辑：这是带有内联 css 的示例 html

```
<img style="outline:none;text-decoration:none;display:block;border:none;-webkit-border:0;" border="0" src="images/rm_bnk.gif" width="10" height="10" alt="test" /> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-12-10T15:22:52.737

阿米特的回答很好，但有一个小建议：使用**可见性：隐藏；**而不是**显示：无；**

```
img:not([src]) {
   visibility: hidden;
} 
```

*   所以你可以保存 img 块的大小和其他元素的位置。它在大多数情况下很有用，我在我的网站上使用它来*延迟*加载图像，并在图像加载之前只显示空白块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-28T09:26:23.907

如果`img` `src`不存在或损坏，则使用以下`css`代码

```
img:not([src]){ display:none; } 
```

这个 css 隐藏图像直到`img` `src`没有完全加载。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-27T07:46:31.000

无法删除它，但我将图像包装在一个元素中，该元素在其样式中具有溢出隐藏属性。

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Hide Broken Image border</title>
  <style>
    body{
      background-color:azure;
    }
    .image-container{
      width:100px;
      height:100px;
      overflow:hidden;
      display:block;
      background-color:orange; /*not necessary, just to show the image box, can be added to img*/
    }
    .image-container img{
      margin:-1px;
    }
  </style>
</head>
<body>
  <span class="image-container">
    <img src="path-to-image" alt="I'm Broken :(" width="102" height="102">
  </span>
</body>
</html> 
```

看看这个 bin [http://jsbin.com/OpAyAZa/1/edit](http://jsbin.com/OpAyAZa/1/edit)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T04:49:27.753

浏览器似乎并没有真正为您提供删除该边框的方法。您最简单的解决方案是将您的 img 更改为 div 并将图像用作背景。

这样，如果没有 src，您将不会得到损坏的图像图标和边框。

更新：Microsoft Outlook 使事情变得困难，治愈几乎比疾病更糟糕：矢量标记语言、形状元素、图像数据元素等。如果你在周围搜索一下，你会看到如何使用它们[http://blog.oxagile。 com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/](http://blog.oxagile.com/2010/04/23/background-images-for-outlook-2007-and-outlook-2010-beta/)

Outlook 用户可能只需要不使用该图像，这样您就可以收工了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T04:47:45.397

尝试使用一些 JavaScript 来删除损坏的图像。这是唯一的方法

```
var images = document.getElementsByTagName("img");
for (i = 0; i < images.length; i++) {
    var self  = images[i];
    self.onerror = function () {
        self.parentNode.removeChild(self);
    }
} 
```

因为损坏图像的渲染因浏览器而异，并且无法更改。

PS：`onerror`图片未加载时会触发

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-01-13T05:46:59.110

您可以尝试使用此代码来删除 webkit 中损坏图像周围的边框。

```
 var images = document.getElementsByTagName("img");

for (i = 0; i < images.length; i++) {
    var self  = images[i];
    self.onerror = function () {
        self.parentNode.removeChild(self);
    }
} 
```

# xcode4.5 - Xcode - 文件读取模拟器和设备之间的差异

> ID：13151342
> 
> 赞同：0
> 
> 时间：2012-10-31T04:36:13.210
> 
> 标签：xcode4.5

我已经在 iPod、iPad 和 iPhone 的模拟器 4.3、5.0、5.1 和 6.0 上测试了我的应用程序。它按预期工作。但在我所有的设备上它都不起作用。

我知道在设备上文件名区分大小写。使用的常量DATA_FILE和类型都是小写，打开后文件句柄不为nil。如我所见，正确定位文件后没有实际读取。为什么不？

这是代码，减少到最低限度以显示问题。

```
NSLog(@"getData, index = %lu", index);
NSFileHandle *fhIndex = [NSFileHandle fileHandleForReadingAtPath: [[NSBundle mainBundle] pathForResource: DATA_FILE ofType:@"idx"]];

u_char indexData[4];
NSLog(@"index*4 = %lu", (index * 4));
[fhIndex seekToFileOffset: (index * 4)];
unsigned long long test = [fhIndex offsetInFile];
NSLog(@"FilePos = %llu",test);
[[fhIndex readDataOfLength: 4] getBytes: indexData length: 4];
test = [fhIndex offsetInFile];
NSLog(@"FilePos = %llu",test);
NSLog(@"indexData = %i %i %i %i", indexData[0], indexData[1], indexData[2], indexData[3]); 
```

为例程提供一个索引（无符号长整数），在本例中为 index=62825。程序搜索到 index*4 的位置，然后读取接下来的四个字节。在设备上，这四个字节不会被读取！

模拟器中的调试器输出：

```
 2012-10-31 10:46:24.557 program[469:12003] getData, index = 62825
    2012-10-31 10:46:24.559 program[469:12003] index*4 = 251300
    2012-10-31 10:46:24.559 program[469:12003] FilePos = 251300
    2012-10-31 10:46:24.580 program[469:12003] FilePos = 251304
    2012-10-31 10:46:24.581 program[469:12003] indexData = 0 73 130 174 
```

...在设备上：

```
 2012-10-31 10:41:57.776 program[2942:907] getData, index = 62825
    2012-10-31 10:41:57.780 program[2942:907] index*4 = 251300
    2012-10-31 10:41:57.782 program[2942:907] FilePos = 251300
    2012-10-31 10:41:57.783 program[2942:907] FilePos = 251300
    2012-10-31 10:41:57.784 program[2942:907] indexData = 248 10 18 0 
```

正如您在设备上的输出中看到的那样，读取后文件位置没有改变，这意味着实际上没有读取！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:16:31.340

错误的文件大小引导我朝着正确的方向前进。删除 Build 目录后，程序现在正在模拟器和设备上运行。

# matlab - 以一定的间隔循环（Matlab）

> ID：13151343
> 
> 赞同：1
> 
> 时间：2012-10-31T04:36:28.967
> 
> 标签：matlab, loops, time, intervals

如标题所述。我想为每个循环设置一定的间隔时间，比如 60 秒。

我的问题是我在循环中有一个代码可以使用外部设备执行测量。此测量需要 5-10 秒。所以我不能简单地在循环内使用 pause(60) ，因为间隔时间取决于每次测量需要多长时间。

有没有办法固定循环的时间间隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:58:24.483

听起来您可以使用并行线程来实现您想要的。一个线程每六十秒启动一次测量，使用一个工作线程，这样测量就不会阻塞时间间隔。

也许尝试使用以下[`batch`](http://www.mathworks.com.au/help/distcomp/batch.html)功能：

```
while(True)
    hBatch = batch(@doMeasurement);
    pause(60);
    measurement = fetchOutputs(hBatch){1}
end 
```

* * *

最好使用以下[`timer`](http://www.mathworks.com/help/matlab/ref/timer.html)功能：

```
t = timer('TimerFcn', @doMeasurement, 'Period', 60.0);
start(t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:52:51.227

你想要这样的东西：

```
k=1; % or any value except 0
time1=clock;
while ~(k==0)
time2=clock;
k=etime(time2,time1);
% your statements
loop 
```

# java - 远程访问 websphere 8 管理控制台

> ID：13151349
> 
> 赞同：0
> 
> 时间：2012-10-31T04:37:27.287
> 
> 标签：java, websphere, websphere-7, websphere-6.1, websphere-8

我正在Linux机器上测试WAS 8的环境设置。有人能告诉我安装后如何远程访问管理控制台吗？或者更确切地说需要做什么才能远程访问管理控制台？

如果有人可以提供一些关于在 linux 上安装 WAS 8 的链接，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:47:21.667

如果您已将 WebSphere 服务器安装在支持 Internet 的服务器上，那么您必须拥有该服务器的 IP。使用 IP 地址，您可以通过以下方式访问 WebSphere 管理控制台：

```
 https://<Server IP Address>:9090/admin 
```

或使用主机名：

```
 https://<Server Host Name>:9090/admin 
```

请在此处找到安装文档：--> [**WebSphere 8 Installation**](http://pic.dhe.ibm.com/infocenter/rsahelp/v8/index.jsp?topic=/com.ibm.xtools.installation.rsaws.doc/topics/t_install_was8.html)

# c# - C#没有找到合适的覆盖方法

> ID：13151350
> 
> 赞同：0
> 
> 时间：2012-10-31T04:37:37.290
> 
> 标签：c#, abstract

嗨，这是我的基类

```
public abstract class IEnvelopeFactory {

        public Queue<IEnvelopeFactory> m_Queue;
        //public Queue<IEnvelopeFactory> m_Queue<IEnvelopeFactory>;

        public IEnvelopeFactory(){

        }

        ~IEnvelopeFactory(){

        }

        public virtual void Dispose(){

        }

        /// <summary>
        /// Parsing
        /// </summary>
        /// <param name="input"></param>
        /// <param name="envelope"></param>
        public abstract bool Parse(string input, out Envelope envelope);

        /// <summary>
        /// Formatting
        /// </summary>
        /// <param name="env"></param>
        /// <param name="envStr"></param>
        public abstract bool Format(Envelope env, out string envStr);

    } 
```

子类如下

```
public class XMLTYPE4Factory : IEnvelopeFactory
    {

        public XMLTYPE4 m_XMLTYPE4;

        public XMLTYPE4Factory()
        {

        }

        ~XMLTYPE4Factory()
        {

        }

        public override void Dispose()
        {

        }

        /// <summary>
        /// Parsing
        /// </summary>
        /// <param name="input"></param>
        public override Envelope Parse(string input)
        {

            return null;
        }

        /// <summary>
        /// Formatting
        /// </summary>
        /// <param name="env"></param>
        public override string Format(Envelope env)
        {

            return "";
        }

    } 
```

我收到以下错误

```
'XMLTYPE4Factory' does not implement inherited abstract member 
'IEnvelopeFactory.Format(CCN.MSG.ENV.Envelope, out string)' 

'XMLTYPE4Factory' does not implement inherited abstract member 
'IEnvelopeFactory.Parse(string, out CCN.MSG.ENV.Envelope)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:40:15.627

方法签名不匹配：

```
public abstract bool Parse(string input, out Envelope envelope);
public override Envelope Parse(string input) 
```

此外，如果它不是接口，你不应该在类名前加上 I 前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:41:22.700

是的，签名与您在基类中定义的不匹配。格式是否应该返回一个字符串并有一个字符串作为输出参数？

此外，C# 接口中的标准命名约定以 I 开头。您应该从基类中删除 I 前缀。

```
public class XMLTYPE4Factory : IEnvelopeFactory {

    public XMLTYPE4 m_XMLTYPE4;

    public XMLTYPE4Factory()
    {

    }

    ~XMLTYPE4Factory()
    {

    }

    public override void Dispose()
    {

    }

    /// <summary>
    /// Parsing
    /// </summary>
    /// <param name="input"></param>
    public override Envelope Parse(string input, out string envStr)
    {
envStr= null;
        return null;
    }

    /// <summary>
    /// Formatting
    /// </summary>
    /// <param name="env"></param>
    public override string Format(Envelope env, out string envStr)
    {
        envStr = null;
        return "";
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T04:44:18.677

您还没有使用正确的参数实现方法

```
Envelope env;
string s;

public override Envelope Parse(string input,out Envelope env)
{
    env = new Envelope();
    return env;
}

public override string Format(Envelope env,out string s)
{
    s="somestring";
    return s;
} 
```

# php - CodeIgniter php 脚本运行时间不超过 2 分钟？

> ID：13151353
> 
> 赞同：0
> 
> 时间：2012-10-31T04:38:00.313
> 
> 标签：php, codeigniter

我的 Code Igniter 应用程序中有一个 PHP 脚本，它在服务器上运行并获取一些数据，但运行时间大约不超过 2 分钟。当我在不使用代码点火器的情况下运行它时，它可以正常工作。这可能是背后的原因这？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:29:52.927

感谢@air4x 的作品。通过在**system/core/CodeIgniter.php**中设置**set_time_limit(300)**

 **```
if (function_exists("set_time_limit") == TRUE AND @ini_get("safe_mode") == 0)
{
    @set_time_limit(300);
} 
```

设置此代码脚本运行良好后..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:43:47.647

在运行代码之前尝试添加：`set_time_limit(0);`

更多信息： http: [//php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

如果这不起作用，您将需要共享您正在运行的代码以及停止运行时会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T05:58:54.457

必须有，Set_time_limit - 设置脚本的最大执行时间。

```
bool set_time_limit ( int $seconds ) 
```

`When set_time_limit()`叫。它将计数器归零。换句话说，如果默认限制是 30 秒，并且在脚本执行 25 秒后`set_time_limit(20)`调用，那么脚本将在完成之前运行总共 45 秒。

请访问[http://php.net/manual/fr/function.set-time-limit.php](http://php.net/manual/fr/function.set-time-limit.php)了解更多信息。**

# asp.net-mvc - 如何检查 mvc 3 中的唯一属性？

> ID：13151359
> 
> 赞同：0
> 
> 时间：2012-10-31T04:38:50.030
> 
> 标签：asp.net-mvc

我在表单中有一个用户名文本框，当用户输入用户名时，我需要检查该用户名是否已经在数据库中。我正在考虑捕捉文本框的模糊事件并编写一个javascript函数来查询和签入数据库。我正在尝试这样的事情：

```
@html.textboxfor(x=>x.UserName, new{@id="UserName"})

<script type="text/javascript">
$(document).ready(function(){$('#UserName').blur("then some code here");})

</script> 
```

现在我需要知道我是否遵循正确的方法？如果是这样，那么请让我知道如何调用将在模糊函数中与数据库交互的操作方法，或者什么是正确的方法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:49:01.097

是的，看起来没错。您可以使用 JQuery Ajax 调用以及`Url.Action`辅助方法。

```
$(document).ready(function(){
    $('#UserName').blur(function() {
        var name = this.value;
        $.get(@Url.Action("VerifyUsername") + "?name=" + value, function(result) {
            if (result.ok == false) {
                $("#message").text("Username '" + name + "' is already taken, please try another");
            }
        });
    });
}); 
```

`VerifyUsername`这将在当前控制器中调用一个动作。它假定该操作返回 JSON 之类`{ok:true}`的以验证名称：

```
public ActionResult VerifyUsername(string name)
{
    bool isOk;
    // check the database
    return new JsonResult() {
        Data = new { ok: isOk },
        JsonRequestBehavior = JsonRequestBehavior.AllowGet
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:50:00.110

您可以在 MVC3 [http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx中使用远程验证](http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx)

# expressionengine - 挥之不去的购物车Throb 会议

> ID：13151360
> 
> 赞同：2
> 
> 时间：2012-10-31T04:38:52.697
> 
> 标签：expressionengine, cartthrob

我遇到了一个关于 CartThrob 的奇怪问题。谷歌搜索和 CartThrob 论坛尚未透露答案。

购物车发送到支付网关后，它会向模板返回“授权”、“处理”、“拒绝”或“失败”的“状态”。

我发现这种“状态”在浏览器刷新后仍然存在，包括完全（无缓存）浏览器刷新。

这主要是“授权”消息的问题。当订单已 100% 完成时，会出现“已授权”消息。

我看到的是，如果我立即开始另一个订单并转到此代码所在的模板，“授权”消息仍然存在。消息最终消失了……可能在 10/20 分钟左右之后。但在我看来，它应该立即消失，对吧？订单完成。清除一切。

这个“状态”是否存储在 CartThrob 会话中？我可以强制清除 CartThrob 会话吗？

```
 {exp:cartthrob:submitted_order_info}
            {if authorized}
                   Order complete!
             {if:elseif processing}
                   Your order is being processed!
             {if:elseif declined}
                   Your credit card was declined: {error_message}
             {if:elseif failed}
                   Your payment failed: {error_message}
             {/if}
        {/exp:cartthrob:submitted_order_info} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:09:25.200

我有时发现这有助于清除购物车，它的工作方式类似于 {redirect="blah/blah"}

```
{exp:cartthrob:clear_cart return="about/stuff" } 
```

当然，如果需要通过链接触发，细分可以提供帮助

```
{if segment_3 == "foo"}
{exp:cartthrob:clear_cart return="about/stuff" }
{/if} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:43:23.017

如果您只希望此信息显示在结帐后页面上，最简单的选择是将一个`order_status`段添加到您的网关返回 URL，然后仅在`submitted_order_info`该段存在时才输出标签。

我相当确定这`clear_cart`只是删除购物车内容而不是完全刷新 CT 会话数据（我认为这只是通过注销触发的）。

# actionscript-3 - Amfphp 使用 Flex-4 运行缓慢

> ID：13151363
> 
> 赞同：2
> 
> 时间：2012-10-31T04:39:20.643
> 
> 标签：actionscript-3, apache-flex, amfphp

好吧，我正在尝试在使用 httpservice 的项目中使用远程对象（Amfphp）。我听说它会让我的申请更快。但是当我在数据网格中尝试 Amfphp 以进行测试时，我发现它比 httpservice 需要更多时间。这是我到目前为止所做的。

调用 php 函数的 AS-3 代码：

```
public function init():void{
            var params:Array = new Array();
            params.push("1234");
            _amf = new RemoteObject;
            _amf.destination = "dummyDestination";
            _amf.endpoint = "http://insight2.ultralysis.com/Amfphp/Amfphp/";//http://insight2.ultralysis.com
            _amf.source = "manager1";                       
            _amf.addEventListener(ResultEvent.RESULT, handleResult);
            _amf.addEventListener(FaultEvent.FAULT, handleFault);
            _amf.init(params);

        }

        public function handleResult(event:ResultEvent):void{
            myGrid.dataProvider = event.result.grid;
        } 
```

以及从 mysql 数据库中获取数据的 php 函数：

```
class output{
public $grid;
public $week;
}

function form()
{

    $arrayOut = new output();
    $arrayOut->grid = $this->gridValue();
    $arrayOut->week= $this->getAllWeek($this->ThisYear);
    return $arrayOut; 
```

}

一切正常。但是获取和渲染 280 行数据需要将近 5 秒的时间。任何人都可以帮我尽可能快地完成它吗？我已经尝试过[silexlabs的优化技巧](http://www.silexlabs.org/amfphp/documentation/optimizing-amfphp)

我使用了数据包嗅探器，统计数据如下。它说延迟大部分时间消耗大约 5 秒。什么是延迟？需要帮助的家伙。请：

![在此处输入图像描述](../Images/96d568091a87683c7e1444f508789b4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:49:58.263

尝试使用`amfphp 1.9`.

`amfphp 2.x`不幸的是，版本比`1.9`

# android - 如何在 EditText 中放置按钮

> ID：13151366
> 
> 赞同：51
> 
> 时间：2012-10-31T04:39:46.810
> 
> 标签：android, android-layout, android-edittext, imagebutton

我想在 EditText 中放置一个图像按钮，但我没有 Idea 请告诉我如何操作，如图所示。谢谢

![在此处输入图像描述](../Images/e4108046db497f22620f7b286248c31b.png)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-31T04:43:25.237

如果您不想单击该图像，则可以使用`drawableRight`EditText 的属性..

```
android:drawableRight="@drawable/icon" 
```

如果你想点击然后使用下面的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Enter search key" />

    <ImageButton
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/search"
        android:layout_centerVertical="true"
        android:layout_margin="5dp"
        android:text="Button"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-31T04:49:19.873

如果你想要这样的布局并且图像也是可点击的，那么你可以做这样的事情

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true" >

    </EditText>
     <ImageView
        android:id="@+id/imageView1"
        android:padding="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/editText1"
        android:layout_alignBottom="@+id/editText1"
        android:layout_alignRight="@+id/editText1"
        android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

输出：

![在此处输入图像描述](../Images/ac75052fa88fce7fed8c60cec2de2b7d.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-06-02T12:12:33.933

在 Material 中，EditText 下有下划线。在大多数应用程序中，图标出现**在**该下划线内。

[![在此处输入图像描述](../Images/067b3e389f7b01cb2394eb3299e54890.png)](https://i.stack.imgur.com/t3pUD.png)

为此，只需使用填充

```
android:paddingEnd = "@dimen/my_button_size" 
```

不要忘记子 4.2 版本的 paddingRight。

```
<RelativeLayout ....>
   ...
   <EditText
   ...
   android:id="@+id/my_text_edit"
   android:textAlignment = "viewStart"
   android:paddingEnd = "@dimen/my_button_size"
   android:paddingRight = "@dimen/my_button_size"
   .../>

   <ImageButton 
   ....
   android:layout_width="@dimen/my_button_size" 
   android:layout_height="@dimen/my_button_size"
   android:layout_alignEnd="@id/my_text_edit"
   android:layout_alignRight="@id/my_text_edit"/>
   ...
</RelativeLayout> 
```

它将文本限制为图像，并且图像不会与文本重叠，无论文本有多长。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-01T21:04:28.290

我的解决方案将适合所有屏幕尺寸，而不会`editText`“落后” `imageButton`. 这也使用了android资源，因此您不需要提供自己的图标或字符串资源。将此代码段复制并粘贴到您想要搜索栏的任何位置：

```
 <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal">

   <EditText
        android:layout_margin="8dp"
        android:id="@+id/etSearch"
        android:hint="@android:string/search_go"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"/>

    <ImageView
        android:id="@+id/ivSearch"
        android:background="@color/transparent_black"
        android:padding="2dp"
        android:layout_width="wrap_content"
        android:layout_margin="8dp"
        android:src="@android:drawable/ic_menu_search"
        android:layout_height="wrap_content"
        tools:ignore="contentDescription" />

</LinearLayout> 
```

**结果：**

![在此处输入图像描述](../Images/4abfd6e17dcbf7b95b55ad7159e8fa85.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-31T04:43:03.950

您可以使用以下代码：

**`android:drawableRight="@android:drawable/ic_menu_search"`**

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-08-31T15:56:55.410

将它放在这样的 RelativeLayout 中怎么样？：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <!-- EditText for Search -->
    <EditText android:id="@+id/inputSearch"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="Search whatever..."
            android:textSize="14dp"
            android:textStyle="italic"
            android:drawableLeft="@drawable/magnifyingglass"
            android:inputType="textVisiblePassword"
            android:theme="@style/EditTextColorCustom"/>

         <Button
            android:id="@+id/btn_clear"
            android:layout_width="14dp"
            android:layout_height="14dp"
            android:layout_marginTop="10dp"
            android:layout_alignRight="@+id/inputSearch"
            android:layout_marginRight="5dp"
            android:background="@drawable/xbutton"
            android:visibility="gone"/>
    </RelativeLayout> 
```

同样通过这种方式，您将能够在代码中处理 Button (GONE / VISIBLE) 的可见性。

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-31T04:45:29.237

将您的 EditText 放置在线性布局（水平）内，并在其旁边添加一个图像按钮（0 填充）。设置 EditText 和 ImageButton 的背景颜色将融入其中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-22T11:10:33.950

有可点击复合可绘制的解决方案。它工作得很好 - 我已经测试过了

[解决方案](https://stackoverflow.com/a/7295931/1592183)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-09T11:59:25.107

我觉得这很简单。使用相对布局作为父布局。将editText放在左边，ImageButton放在右边，使用任一，

*   ImageButton 的 alignRight 属性
*   通过指定每个字段的布局权重

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-15T15:13:26.387

在接受的答案中，涟漪效应不起作用，它停留在后面的按钮后面。

此示例在文本框中有 2 个按钮。涟漪效应有效，因为父布局有

```
 android:background="@android:color/transparent" 
```

为确保波纹起作用并且不会留在背面，请将 imagebutton 的父背景设置为透明。

```
 <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:focusableInTouchMode="true"
            android:layout_margin="4dp">

            <EditText
                android:id="@+id/editText"
                style="@android:style/TextAppearance.Medium"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="2dp"
                android:layout_marginRight="2dp"
                android:background="@drawable/shape_textbox"
                android:hint="text"
                android:imeOptions="actionDone"
                android:importantForAutofill="no"
                android:inputType="text" />

            <ImageButton
                android:id="@+id/btn1"
                android:layout_width="44dp"
                android:layout_height="44dp"
                android:layout_centerVertical="true"
                android:layout_margin="5dp"
                android:layout_toStartOf="@+id/btn2"
                android:background="?android:selectableItemBackgroundBorderless"
                android:src="@drawable/ic_btn1" />

            <ImageButton
                android:id="@+id/btn2"
                android:layout_width="44dp"
                android:layout_height="44dp"
                android:layout_alignParentEnd="true"
                android:layout_centerVertical="true"
                android:layout_margin="5dp"
                android:background="?android:selectableItemBackgroundBorderless"
                android:contentDescription="@string/clear"
                android:src="@drawable/ic_btn2" />

        </RelativeLayout> 
```

或者您也可以将按钮包装在框架布局中：

```
<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent"
    android:layout_alignParentEnd="true"
    android:layout_centerVertical="true"
    >
<ImageButton ... />
</FrameLayout> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-16T12:48:59.947

我不知道你为什么要放置`ImageButton`来实现，这可以通过简单的属性来完成`EditText`

> android:drawableRight="你的drawable"

它不能为你工作吗？

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-10-31T04:42:50.853

使用 EditText 上的 android:drawableLeft 属性。

```
<EditText
    ...     
    android:drawableLeft="@drawable/my_icon" /> 
```

# eclipse - RTX 内核移植

> ID：13151367
> 
> 赞同：2
> 
> 时间：2012-10-31T04:39:59.383
> 
> 标签：eclipse, porting, keil, rtx

我们有一个项目，`KEIL IDE`其中`LPC2148`包含`RTX`内核程序以及其他程序。现在我们需要将 IDE 从更改`KEIL`为`Eclipse`. 当我们尝试在 Eclipse GCC 编译器中编译它时，它在文件中显示错误。`RTX_Config.c`是否`RTX_Config.h`有任何解决方案可以在 Eclipse IDE 中编译这个项目？

提前致谢。

# tinymce - tinyMce 使用 html 标签重新加载数据

> ID：13151373
> 
> 赞同：2
> 
> 时间：2012-10-31T04:40:45.717
> 
> 标签：tinymce

我对 TinyMCE 有疑问。

保存编辑器的内容并重新显示后，所有 HTML 标记都可见。

这就是我初始化编辑器的方式：

```
// Tinymce Config
tinyMCE.init({
    // General options
    mode : "specific_textareas",
    editor_selector : "mceEditor",
    language : "<?php echo $tinyMceLang?>",
    setup : function(ed) {
        ed.onActivate.add(tinyOnEdit);
    },
    theme : "advanced",
    plugins : "table",
    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,fontsizeselect,|,forecolor,backcolor,|,table,row_before,row_after,delete_row,col_before,col_after,delete_col,code",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_path : false,
    theme_advanced_resizing : true,
    convert_fonts_to_spans : true,
    //font_size_style_values : "0.7em,0.8em,1em,1.2em,1.5em,2em,3em",
    //font_size_style_values : "8pt,10pt,12pt,14pt,18pt,24pt,36pt",

    // content CSS (should be your site CSS)
    content_css : "/css/tiny_content.css"
}); 
```

如果我粘贴这样的内容（使用 HTML 标签）：

```
<p><span style="color: #ff0000;">testing tinymce contents</span></p> 
```

重新显示为：

`<p><span style="color: #ff0000;">testing tinymce contents</span></p>`（带有html标签）

但例外的结果是：

测试tinymce内容（红色文本）（不允许html标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:12:16.397

打开 HTML 源代码编辑器。

将您的内容（带有 HTML 标记）粘贴到 html 源代码编辑器中的所需位置。点击更新。

而已。

回应您的评论在您的插件列表中添加粘贴，还包括此插件选项

```
plugins : "table,paste",
paste_remove_styles: true, 
```

在你的 tinyMCE.init 中

```
// Tinymce Config
tinyMCE.init({
// General options
mode : "specific_textareas",
editor_selector : "mceEditor",
language : "<?php echo $tinyMceLang?>",
setup : function(ed) {
    ed.onActivate.add(tinyOnEdit);
},
theme : "advanced",

plugins : "table,paste",
paste_remove_styles: true,

// Theme options
theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,fontsizeselect,|,forecolor,backcolor,|,table,row_before,row_after,delete_row,col_before,col_after,delete_col,code",
theme_advanced_buttons2 : "",
theme_advanced_buttons3 : "",
theme_advanced_buttons4 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
theme_advanced_path : false,
theme_advanced_resizing : true,
convert_fonts_to_spans : true,
//font_size_style_values : "0.7em,0.8em,1em,1.2em,1.5em,2em,3em",
//font_size_style_values : "8pt,10pt,12pt,14pt,18pt,24pt,36pt",

// content CSS (should be your site CSS)
content_css : "/css/tiny_content.css"
}); 
```

希望这会有所帮助，干杯！！

# magento - Magento 从表 sales_flat_order 中删除了订单

> ID：13151375
> 
> 赞同：0
> 
> 时间：2012-10-31T04:40:54.983
> 
> 标签：magento, orders

Magento 向客户发送了带有订单号的收据，但我在 Magento 中找不到该订单号。我调查了表 sales_flat_order 并注意到 entity_id 列不是连续的（自动递增列），这表明某些记录已被删除。在我开始怀疑这是一种入侵之前，Magento 有没有类似的东西？IE 从 sales_flat_order 中删除订单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:23:57.673

在标准的 magento 安装中，无法删除订单。您只能在数据库中手动完成或安装扩展。

# download - iPhone 没有从 TestFlight 安装 ipa build

> ID：13151382
> 
> 赞同：1
> 
> 时间：2012-10-31T04:42:12.850
> 
> 标签：download, iphone-5, testflight

即使在下载 80% 的应用程序后设备具有权限，我也有一个`ipa`文件，它给出了一个错误。`TestFlight`请看图片。

![在此处输入图像描述](../Images/5793aae4789c877935aec40823c826a7.png)

# java - 为什么我的面板没有出现在 JFrame 中

> ID：13151383
> 
> 赞同：3
> 
> 时间：2012-10-31T04:42:48.343
> 
> 标签：java, swing, jframe, jpanel, visibility

```
public class InputPanel extends JPanel{
    public static int shapeType; //1: Rectangle; 2: Oval; 3: Line
    public static boolean isFilled; //whether or not the shape is filled
    public static Color color; //color of the shape

    public InputPanel(){

        JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        panel.setBackground(Color.GRAY);
        setPreferredSize(new Dimension(200,500));

        JButton rect = new JButton("Rectangle");
        JButton oval = new JButton("Oval");
        JButton line = new JButton("Line");
        JRadioButton fill = new JRadioButton("Filled:");
        JButton color1 = new JButton("Color..");

        rect.addActionListener(new rectListener());
        oval.addActionListener(new ovalListener());
        line.addActionListener(new lineListener());
        isFilled = fill.isSelected();
        color1.addActionListener(new colorListener());

        panel.add(rect);
        panel.add(oval);
        panel.add(line);
        panel.add(fill);
        panel.add(color1);

        this.setVisible(true);

    }
}

public class PaintPanel extends JPanel{

    public static int x1, y1, x2, y2;

    ArrayList<Shape> shapeList = new ArrayList<Shape>();

    public PaintPanel(){

        JPanel panel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        panel.setBackground(Color.WHITE);
        setPreferredSize(new Dimension(500, 500));

        this.addMouseListener(new MouseAdapter() {
        @Override public void mousePressed(MouseEvent e) {
            PaintPanel.x1 = e.getX();
            PaintPanel.y1 = e.getY();
        }

        @Override public void mouseReleased(MouseEvent e) {
            PaintPanel.x2 = e.getX();
            PaintPanel.y2 = e.getY();
            if(InputPanel.shapeType == 1){
                shapeList.add(new Rectangle(PaintPanel.x1, PaintPanel.y1, PaintPanel.x2, PaintPanel.y2, InputPanel.isFilled));
            }
            if(InputPanel.shapeType == 2){
                shapeList.add(new Oval(PaintPanel.x1, PaintPanel.y1, PaintPanel.x2, PaintPanel.y2, InputPanel.isFilled));
            }   
            if(InputPanel.shapeType == 3){
                shapeList.add(new Line(PaintPanel.x1, PaintPanel.y1, PaintPanel.x2, PaintPanel.y2));
            }
            repaint();
        }
      });

     this.setVisible(true);   
    }

    @Override 
    public void paintComponent(Graphics g){
        super.paintComponent(g);

        for(Shape s : shapeList){
            s.draw(g);
        }
    }

}

public class PaintGUI {

    public static void main(String[] args){

        JFrame frame = new JFrame("Shape Drawer!");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new InputPanel());
        frame.add(new PaintPanel());

        frame.pack();

        frame.setVisible(true);

    }

} 
```

我很肯定我已经正确地创建了 JFrame 并且我的所有其他类都可以工作，但是这里肯定有一些东西我错过了......当我运行 main 方法时，我得到的只是一个灰色的盒子，它显然是一个正方形（500x500，在 PaintPanel 类中实例化。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:15:07.050

除了 Andrew 提到的，我注意到在*InputPanel*和*PaintPanel*中，您正在创建一个新的 JPanel。当然，您正在向此面板添加新组件，但最后您不会将此 JPanel 本身添加到您的*InputPanel*或*PaintPanel*中。因此，请确保在这些面板的构造函数中`add(panel)` 最后有一个。

另外，作为旁注，请记住 Swing 中的大多数操作都不是线程安全的，因此请在创建/与 UI 组件交互之前阅读[“Swing 中的并发性”。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)换句话说，用户界面的任何更新都必须发生在事件调度线程上，例如应用程序的启动：

```
public static void main(String[] args){

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame("Shape Drawer!");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            //set the layout, add your panels

            frame.pack();
            frame.setVisible(true);             
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:17:12.420

JFrame 默认使用 BorderLayout。

```
frame.add(new InputPanel());
frame.add(new PaintPanel()); 
```

相当于说，

```
frame.add(new InputPanel(), BorderLayout.CENTER);
frame.add(new PaintPanel(), BorderLayout.CENTER); 
```

最终结果是最后添加的面板将是可见的，前提是您的其余代码工作正常。

# delphi - 将邮件项目从一个文件夹移动到另一个文件夹

> ID：13151386
> 
> 赞同：3
> 
> 时间：2012-10-31T04:42:59.543
> 
> 标签：delphi, email, delphi-2010, indy10

如何将邮件从一个邮箱（用户文件夹）移动到同一邮件帐户中的另一个邮箱（用户文件夹）。我们的邮件服务器支持 IMAP 和 POP3 协议。我使用的是 Delphi 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:40:51.273

只有 IMAP 协议可以在文件夹之间移动消息。Indy 确实有一个`TIdIMAP4`组件。

但是，IMAP 协议没有定义移动消息的单个命令。您必须首先将邮件复制到所需的邮箱（使用`TIdIMAP4.CopyMsg()`或`TIdIMAP4.UIDCopyMsg()`方法），然后删除原始邮件（使用`TIdIMAP4.DeleteMsgs()`or`TIdIMAP4.UIDDeleteMsg()`方法，然后`TIdIMAP4.ExpungeMailBox()`在准备好时使用该方法）。

# jquery - jquery拼写检查几个输入

> ID：13151388
> 
> 赞同：1
> 
> 时间：2012-10-31T04:43:15.283
> 
> 标签：jquery, spell-checking

我在表单上使用[https://github.com/badsyntax/jquery-spellchecker](https://github.com/badsyntax/jquery-spellchecker)，我想将它应用于多个文本输入而不是一个文本区域。

总体思路是这样的：

```
var spellchecker = new $.SpellChecker('.my-class', {
    lang: 'en',
    parser: 'text',
    engine: {
      path: '/path/to/engines/php/spellchecker.php',
      driver: 'google'
    }
  }); 
```

如何在没有拼写检查器将所选建议分配给所有输入的情况下单独定位每个输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:45:32.293

我是该插件的作者，并添加了对多个字段的支持。

您可以这样做：

```
(function() {

  var fields = $('input:text,textarea');

  // Init the text spellchecker
  var spellchecker = new $.SpellChecker(fields, {
    lang: 'en',
    parser: 'text',
    webservice: {
      path: '../php/spellchecker.php',
      driver: 'pspell'
    },
    suggestBox: {
      position: 'above'
    },
    incorrectWords: {
      position: function(container) {
        this.after(container);
      }
    }
  });

  // Bind spellchecker handler functions
  spellchecker.on('check.success', function() {
    alert('There are no incorrectly spelt words.');
  });

  // Check the spelling
  $("#check-textarea").click(function(e){
    spellchecker.check();
  });
})(); 
```

*   [花式演示](http://jquery-spellchecker.badsyntax.co/multiple-fields.html)
*   [基本演示](http://jquery-spellchecker.badsyntax.co/basic/multiple-fields.html)

[下载](https://github.com/badsyntax/jquery-spellchecker/downloads)最新版本的插件（当前为 0.2.1）以获取此新功能。

# sql - 使用 ORACLE 在超过 2 个表上加入 SQL

> ID：13151393
> 
> 赞同：2
> 
> 时间：2012-10-31T04:43:32.070
> 
> 标签：sql, join

假设我有三个表，A、B 和 C。
我在表 A 和表 B 上进行了联接，现在我想对结果 AB 和表 c 进行联接。
我需要创建视图然后加入还是需要通过嵌套查询来完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T04:45:32.010

你没有说你正在使用哪个数据库，所以语法可能是错误的，但是多表连接实际上与连接两个表并没有什么不同：

```
SELECT ...
FROM a
JOIN b ON ...
JOIN c ON ...
JOIN d ON ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T04:45:47.113

不，你会这样做

```
SELECT  *
FROM    A [INNER/LEFT/RIGHT/OUTER] JOIN
        B   ON  [a/b].IDCols = [a/b].IDCols [INNER/LEFT/RIGHT/OUTER] JOIN
        C   ON  [a/b/c].IDCols = [a/b/c].IDCols 
```

具体连接（INNER/LEFT/RIGT/OUTER）将取决于您的要求。

查看[JOIN 简介 – JOIN 基础](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)以获得概述

s的标准`JOIN ON`也将取决于表之间的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T09:23:54.803

你可以使用这样的东西：

```
select *
from A, B, C
where A.id = B.id
and A.id = C.id 
```

或者你可以使用这样的东西：

```
select *
from A INNER JOIN B ON (A.id = B.id)
       INNER JOIN C ON (A.id = C.id) 
```

你如何加入当然取决于表之间的关系，那么 A、B、C 的主键和外键是什么。根据我们的数据，您也可以使用 OUTER JOIN 而不是 INNER JOIN。

# r - 如何为三维表创建 prop.table()？

> ID：13151394
> 
> 赞同：8
> 
> 时间：2012-10-31T04:43:43.200
> 
> 标签：r

你能告诉我如何在`three dimensional`表格中获得百分比吗？我知道如何`two dimensional`通过运行以下命令在表格中创建百分比

```
p <-with(mtcars,tapply(carb,list(cyl,vs),length))
prop.table(p,2) # by column 
```

但是，如果我可以尝试添加另一个变量，我不知道该怎么办？

```
p <- with(mtcars,tapply(carb,list(cyl,vs,gear),length)) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T05:13:14.760

您可以为`prop.table`函数指定多个级别的输入，其中 1=row、2=column、3=strata 等

简单的例子：

```
test <- 1:8
dim(test) <- c(2,2,2)
test
, , 1

     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    6    8 
```

然后您可以执行以下操作：

```
# % of all values in each stratum/sub-table
prop.table(test,3)

# row % within each stratum/sub-table
prop.table(test,c(3,1))

# column % within each stratum/sub-table
prop.table(test,c(3,2)) 
```

可能有一种简单的方法来处理`NA`s，但一个迂回的版本是将它们设置为`0`s 然后重置为`NA`s：

```
# set one of the values to NA as an example
test[7] <- NA

# do the procedure
nas <- is.na(test)
test[nas] <- 0
result <- prop.table(test,c(3,2))
result[nas] <- NA

result
, , 1

          [,1]      [,2]
[1,] 0.3333333 0.4285714
[2,] 0.6666667 0.5714286

, , 2

          [,1] [,2]
[1,] 0.4545455   NA
[2,] 0.5454545    1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:30:08.710

尝试使用`reshape2`和`acast`创建您的三维表。这将`0`代替`NA`那些没有数据的值。

```
library(reshape2)
tables  <- acast(mtcars, cyl~vs~gear,value.var = 'carb', fun.aggregate = 'length')
 tables
, , 3

   0 1
4  0 1
6  0 2
8 12 0

, , 4

  0 1
4 0 8
6 2 2
8 0 0

, , 5

  0 1
4 1 1
6 1 0
8 2 0

prop.table(tables, 2:3)

, , 3

  0         1
4 0 0.3333333
6 0 0.6666667
8 1 0.0000000

, , 4

  0   1
4 0 0.8
6 1 0.2
8 0 0.0

, , 5

     0 1
4 0.25 1
6 0.25 0
8 0.50 0 
```

你也可以使用`table`而不是你的`tapply`电话

```
with(mtcars,table(cyl, vs ,gear))

, , gear = 3

   vs
cyl  0  1
  4  0  1
  6  0  2
  8 12  0

, , gear = 4

   vs
cyl  0  1
  4  0  8
  6  2  2
  8  0  0

, , gear = 5

   vs
cyl  0  1
  4  1  1
  6  1  0
  8  2  0 
```

然后`prop.table`在适当的尺寸上使用

# c# - 将选定的值存储在转发器内的隐藏字段中

> ID：13151396
> 
> 赞同：0
> 
> 时间：2012-10-31T04:43:52.170
> 
> 标签：c#, asp.net

我有一个中继器，我有一些控件，如下拉列表和文本框我如何捕捉下拉选择的值和在文本框中输入的值并将它们存储在隐藏字段中？

它就像一个公式`Left(c1+c2)*c3`，格式是这样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:27:11.507

**中继器代码：**

```
 <asp:Repeater ID='myRepeater' runat="server" OnItemDataBound='myRepeater_OnItemDataBound'>
          <ItemTemplate>
            <asp:HiddenField ID='myHidden' runat="server" />
            <asp:DropDownList ID="GeneralDDL" runat="server" AutoPostBack="True" />

          </ItemTemplate>
    </asp:Repeater>

**Code behind :**
    protected void myRepeater_OnItemDataBound(object sender, RepeaterItemEventArgs e)
        {
                var myHidden = (HiddenField)e.Item.FindControl("myHidden");

               foreach(RepeaterItem dataItem in 'myRepeater.Items)
               {
                  myHidden.Value  = ((DropDownList)'myRepeater.FindControl("GeneralDDL")).SelectedItem.Text; 

                 // Same like for Text box              
               }     
         } 
```

# windows-8 - 播放 DRM 歌曲

> ID：13151402
> 
> 赞同：0
> 
> 时间：2012-10-31T04:44:28.310
> 
> 标签：windows-8, winjs

我有一个这样的音频标签：

```
<audio id="myAudio" msaudiocategory="BackgroundCapableMedia"></audio> 
```

我将 src 属性设置为

```
URL.createObjectURL(file, { oneTimeOnly: true }); 
```

然后打电话

```
myAudio.play(); 
```

这适用于我的个人 mp3，但通过 Xbox 音乐通行证下载的歌曲（我认为它受 DRM 保护）根本无法播放。没有音频，“timeupdate”事件永远不会触发。我在“输出”窗口中看不到任何异常或消息。

我尝试使用 VLC 播放这些相同的歌曲，但在进度条正常前进时没有音频。

是否可以在官方应用程序之外播放这些歌曲？

编辑：如果不是，我们是否可以检测音乐文件是否经过 DRM 处理以防止其在我们的应用程序中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:50:12.757

这些是 DRM 文件，因此它们需要 DRM 密钥等。

由于这些是应用程序私有的，因此无法在这些应用程序之外播放 DRM 内容。

# android-audiomanager - 如何创建 android 应用程序来改变声音，比如会说话的汤姆？

> ID：13151403
> 
> 赞同：3
> 
> 时间：2012-10-31T04:44:39.933
> 
> 标签：android-audiomanager, android-audiorecord

我正在为简单的语音转换器创建应用程序。我需要知道如何调制不同类型的声音，比如会说话的汤姆。有人可以在这里帮助我吗？提前致谢。

# erlang - 在 Erlang 中处理 TLV 的任何库或正式方法？

> ID：13151414
> 
> 赞同：0
> 
> 时间：2012-10-31T04:45:40.357
> 
> 标签：erlang, tlv

我正在研究一种有点复杂的协议处理数据交换，然后我发现 TLV 是我需要的。有没有一种正式的方法可以在 erlang 中读写 TLV？或者一些处理这个的lib /代码示例？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:09:41.097

Erlang 中的“默认”是 LTV 而不是 TLV，但它很容易处理：

```
case gen_tcp:recv(Socket, 8) of
  <<Type:32/integer, Len:32/integer>> ->
      Payload = gen_tcp:recv(Socket, Len),
      {type_of(Type), Payload};
  ...
end, 
```

您将需要被动套接字才能使其工作，但这很容易做到。如果您可以自由选择格式，LTV 编码会更好，因为您可以将套接字置于`{active, once}`模式，这意味着底层会为您解码内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T23:27:18.897

我实际上并没有使用它，但是这个怎么样：[https ://github.com/essiene/smpp34pdu/blob/master/src/tlv.erl](https://github.com/essiene/smpp34pdu/blob/master/src/tlv.erl)

# c# - 如何在数据表中的行旁边添加一个复选框以便能够选择每一行

> ID：13151419
> 
> 赞同：0
> 
> 时间：2012-10-31T04:46:35.487
> 
> 标签：c#, wpf, datatable, wpfdatagrid

我使用 SqlCeDataAdapter 来填充表数据。但之后我想为用户添加复选框以选择某些行，然后获取主键列表并执行某些操作。我似乎无法弄清楚该怎么做

我正在使用 Windows 窗体 (WPF)，并且正在使用 DataGridView 来显示 DataTable。.NetFramework 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:30:05.000

就像在 datatable.columns 集合中添加一个新的 Column 对象一样简单

# python - 蝴蝶图像的特征提取

> ID：13151428
> 
> 赞同：5
> 
> 时间：2012-10-31T04:47:23.067
> 
> 标签：python, image-processing, opencv, image-segmentation

我有一组蝴蝶图像，用于训练我的系统从给定的输入图像中分割出蝴蝶。为此，我想提取诸如边缘、角落、区域边界、局部最大/最小强度等特征。

我发现了许多特征提取方法，例如 Harris 角点检测、SIFT，但是当图像背景与蝴蝶的身体/边界颜色相同时，它们效果不佳。

任何人都可以告诉是否有任何好的特征提取方法适用于蝴蝶分割？我正在使用 OpenCV 的 Python 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:04:16.820

你愿意编写自己的图像处理逻辑吗？

您最好的选择可能是针对您的问题优化分割/特征提取，而不是使用以前的实现，例如用于更一般用例的 opencv。

我发现在嘈杂/低对比度环境中运行良好的一个选项是使用滑动窗口（即 10x10 像素）并构建梯度方向直方图。从这个直方图中，您可以识别出更多优势边缘的存在（它们在直方图中累积）及其方向（允许检测角等事物）并查看局部最大值/最小值。（如果需要我可以提供更多细节）

如果您对整体分割和用户交互感兴趣，我建议您使用图形切割或抓取切割。在图形切割中，用户将能够微调分割。抓取剪切已经在 opencv 中，但可能会导致相同的问题，因为它需要用户的单个输入，然后自动分割图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-13T11:39:10.490

您可以尝试通过将训练数据（butterlys 的图像）上传到[demo.nanonets.ai](http://demo.nanonets.ai/ImageCategorization/?utm_source=so&utm_content=41120092&utm_medium=so)（免费使用）来构建模型

1) 在此处上传您的训练数据：

[演示.nanonets.ai](http://demo.nanonets.ai/ImageCategorization/?utm_source=so&utm_content=41120092&utm_medium=so)

2）然后使用以下（Python代码）查询API：

```
import requests
import json
import urllib
model_name = "Enter-Your-Model-Name-Here"
url = "https://i.ytimg.com/vi/xT6UsQwZyy0/maxresdefault.jpg"
files = {'uploadfile': urllib.urlopen(url).read()}
url = "http://demo.nanonets.ai/classify/?appId="+model_name
r = requests.post(url, files=files)
print json.loads(r.content) 
```

3）响应看起来像：

```
{
  "message": "Model trained",
  "result": [
    {
      "label": "Black Swallowtail",
      "probability": 0.97
    },
    {
      "label": "Orange Sulphur",
      "probability": 0.025
    },
    {
      "label": "Monarch",
      "probability": 0.005
    }
  ]
} 
```

# perl - 需要 perl 脚本来查找在网络日志中找到的图像数量

> ID：13151430
> 
> 赞同：2
> 
> 时间：2012-10-31T04:47:44.397
> 
> 标签：perl, web, counter

我有网络日志文件，我遇到了很多麻烦，因为我是 perl 的新手。我只需要一个脚本来查找找到的每个图像的计数。我能够列出它们，但我不确定如何计算，比如“查看了 x jpg 和 x gif”。

到目前为止，我的代码如下所示：

```
use warnings;
open FILE, "jan28.log";
while ($line = <FILE>) { 

    if ($line =~ /.jpg/) {

        print $line;
    } 
    elsif ($line =~ /.gif/) {

        print $line;
    }
    elsif ($line =~ /tiff/) {

        print $line; 
    }
} 
```

Web 日志如下所示。

```
24.131.83.162 - - [28/Jan/2007:00:00:00 -0500] "GET /~taler/images/index_09.jpg   HTTP/1.1" 200 1563
207.46.98.53 - - [28/Jan/2007:00:00:04 -0500] "GET /%7Edist/programs/PhD/PhDGuide/guideA.htm HTTP/1.0" 200 19090
74.6.74.184 - - [28/Jan/2007:00:00:12 -0500] "GET /%7Embsclass/hall_of_fame/myicon.ico HTTP/1.0" 200 760
58.68.24.3 - - [28/Jan/2007:00:00:16 -0500] "GET /~dtipper/tipper.html HTTP/1.1" 200 5896
58.68.24.3 - - [28/Jan/2007:00:00:16 -0500] "GET /~dtipper/gifs/head.jpg HTTP/1.1" 200 18318 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T04:57:09.303

```
use strict;
use warnings;
use feature qw( say );
use URI qw( );

my $jpegs = 0;
my $gifs  = 0;
while (<>) {
   chomp;
   my ($req, $code) = /^(?:\S+\s+){3}\[[^\]]*\] "([^"]*)"\s*(\S+)/
      or next;

   $code >= 200 && $code < 300
      or next;

   my ($meth, $url) = split(' ', $req);
   $url = URI->new($url, 'http');

   my $path = $url->path;
   if    ($path =~ /\.jpe?g\z/i) { ++$jpegs; }
   elsif ($path =~ /\.gif\z/i  ) { ++$gifs; }
}

say "There were $jpegs jpgs and $gifs gifs viewed"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:55:55.343

尝试这样做（在外壳中）：

```
perl -wane '
    END{
        print "there\047s was $hash{$_} items for $_\n" for sort keys %hash;
    }

    $key = $1 if m!.*\.(jpe?g|gif|ico)\b!i;
    $hash{$key}++
' filename.txt 
```

如果您想要一个具有相同逻辑的真实脚本，该`Deparse`模块将有所帮助：

```
$ perl -MO=Deparse -wane '
END{
    print "there\047s was $hash{$_} items for $_\n" for sort keys %hash;
}

$key = $1 if m!.*\.(jpe?g|gif|ico)\b!i;
$hash{$key}++
' filename.txt 
```

“Deparsed”结果脚本：

```
BEGIN { $^W = 1; }
LINE: while (defined($_ = <ARGV>)) {
    our(@F) = split(' ', $_, 0);
    sub END {
        print "there's was $hash{$_} items for $_\n" foreach (sort keys %hash);
    }
    $key = $1 if /.*\.(jpe?g|gif|ico)\b/i;
    ++$hash{$key};
}
-e syntax OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:45:14.420

这是一个基本示例，但 CPAN 中可能有一些 Log Parser 模块。

```
use File::Open::OOP qw(oopen);
use Data::Dump qw(dump);

my $fh = oopen 'log';
my %hash;
while ( my $row = $fh->readline ) {
  $row =~ s/.*\"GET\ \/.*\.(\w+)\ .*\n$/$1/;
  $ext = $row;
  $hash{$ext} += 1;
}
dump(%hash); 
```

样品的输出：

$ perl script.pl

("html", 1, "ico", 1, "jpg", 2, "htm", 1)

$

# android-progressbar - android进度条仅第一次准确

> ID：13151432
> 
> 赞同：2
> 
> 时间：2012-10-31T04:47:46.860
> 
> 标签：android-progressbar

我第一次为移动 android 运行进度条时，它运行良好，并且该行的填充与完成我的“while...”代码所需的时间成正比。但是所有成功的运行都使用相同的变量，条形图填得太快。我看不出运行中的变量之间有任何区别。/////下面的代码

```
private Runnable myThread = new Runnable(){

      @Override
      public void run() {

        while (myProgress <= secondsforbar)

        {
        try{
         myHandle.sendMessage(myHandle.obtainMessage());
         Thread.sleep(1000);
        }
        catch(Throwable t){
        }
       }
      }

      Handler myHandle = new Handler(){

       @Override
       public void handleMessage(Message msg) {
                myProgressBar.setProgress(myProgress);
       }
      };
        };

//****** 
```

# c# - 如何在指定的天数/小时内归档日志？

> ID：13151435
> 
> 赞同：0
> 
> 时间：2012-10-31T04:48:05.863
> 
> 标签：c#, .net, logging, archive, nlog

这在 n-log 中是否可行，或者是否应该在需要时提出功能请求。我确实考虑过关于[每 x 分钟记录到电子邮件](https://stackoverflow.com/questions/6531287/nlog-email-logs-every-x-minutes)而没有任何启发的问题。

# android - 查询所有彩信地址条目

> ID：13151444
> 
> 赞同：3
> 
> 时间：2012-10-31T04:49:17.520
> 
> 标签：android, mms

有没有办法在一个查询中获取所有 mms addr 条目，而不是一次一个条目（或一组条目）？即类似的东西：

```
Uri uri = Uri.parse("content://mms/addr");
Cursor cur = cr.query(uri, null, null, null, null); 
```

我不能以正常方式执行此操作，因为我需要 addr 表中的所有记录，并且有时没有所有消息 ID 来构建 URI。

# java - Android java查找位置并点击那里

> ID：13151447
> 
> 赞同：0
> 
> 时间：2012-10-31T04:49:45.820
> 
> 标签：java, android

所以，我使用了这段代码

```
 public void loadLevel(float x, float y)
   {
      if(PopUpsGone == true)
      {
          if(x > 106 && x < 243 && y > 375 && y < 465)
           {
               Toast.makeText(getApplicationContext(), "1",
                        Toast.LENGTH_LONG).show();
           }
           if(x > 7 && x < 215 && y > 83 && y < 245)
           {
               Toast.makeText(getApplicationContext(), "2",
                        Toast.LENGTH_LONG).show();
           }
           if(x > 306 && x < 458 && y > 66 && y < 212)
           {
               Toast.makeText(getApplicationContext(), "3",
                        Toast.LENGTH_LONG).show();
           }
           if(x > 461 && x < 620 && y > 9 && y < 127)
           {
               Toast.makeText(getApplicationContext(), "4",
                        Toast.LENGTH_LONG).show();
           }
      }

   } 
```

要点击某些区域，当我在模拟器上进行操作时效果很好，但是当我在另一部手机上进行操作时，它就不行了，或者我必须点击很多次。

为不同屏幕点击特定区域的最佳方式是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:41:34.800

确保将屏幕密度考虑在内。您在一台设备上点击的位置可能与另一台设备上的坐标完全不同，因为它们具有不同的屏幕密度（每平方英寸有更多像素）。

获取设备密度：

```
float density = getResources().getDisplayMetrics().density; 
```

然后尝试将您正在检查的坐标乘以密度：

```
public void loadLevel(float x, float y)
{
    float density = getResources().getDisplayMetrics().density;
    x*=density;
    y*=density;
    ...
} 
```

这应该有助于点击在设备之间更加一致。

# uitabbarcontroller - 在 Xcode 4.5（iOS6）中使用 UITabBarController 旋转接口？

> ID：13151448
> 
> 赞同：0
> 
> 时间：2012-10-31T04:49:48.660
> 
> 标签：uitabbarcontroller, ios6, osx-lion, xcode4.5, uiinterfaceorientation

我用新的 Xcode 4.2 创建了一个新的“标签栏项目”。使用 UITabBar 的“新”方式有所不同：Xcode 不创建 xib 文件（使用 UITabBarController），但它通过代码完成所有工作。好的，让我们一起做。

所以我在 didFinishLaunchingWithOptions 中的代码是这样的：

```
UIViewController *viewController1, *viewController2, *viewController3;
UINavigationController *nav1, *nav2, *nav3;

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

   viewController1 = [[gemboy_iphone alloc] initWithNibName:@"vc1" bundle:nil];
   viewController2 = [[concerti_iphone alloc] initWithNibName:@"vc2" bundle:nil];
   viewController3 = [[discografia_iphone alloc] initWithNibName:@"vc3" bundle:nil];

   nav1 = [[UINavigationController alloc] initWithRootViewController:viewController1];
   nav2 = [[UINavigationController alloc] initWithRootViewController:viewController2];
   nav3 = [[UINavigationController alloc] initWithRootViewController:viewController3];

}
else {
  //same thing for the iPad version
}
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1, nav2, nav3, nil];
self.window.rootViewController = self.tabBarController;
[self.window addSubview:self.splash.view];
[self.window makeKeyAndVisible];
return YES; 
```

它有效。

我的三个 .m 文件 vc1.m、vc2.m 和 vc3.m（还有我的 iPad UIViewControllers）都有这个方法

```
- (BOOL)shouldAutorotate {

  return YES;
} 
```

问题是当我旋转 iPhone 时，它​​没有旋转。

任何人请告诉我我在哪里做错了，有什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:19:10.440

你应该继承 uitabbarcontroller 和 implementn

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskAll;
} 
```

# java - 写入相同数据量的多个文件与写入相同数据量的单个大文件

> ID：13151451
> 
> 赞同：2
> 
> 时间：2012-10-31T04:50:05.680
> 
> 标签：java, hadoop, mapreduce

我想将一个大文件写入本地磁盘。我将大文件分成许多小文件，并尝试将其写入磁盘。但我观察到，当我拆分文件并尝试写入时，磁盘写入时间大幅增加。

另外，我从磁盘复制文件并将其写入另一台计算机的磁盘（减速器）。我观察到阅读时间也有很大的增加。任何人都可以解释我的原因吗？我正在使用hadoop。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:04:41.217

这是由于底层文件系统和硬件造成的。

除了内容之外，每个文件都有开销，例如 NTFS 的 MFT（在 Windows 上）。所以对于单个大文件，文件系统可以做更少的簿记。因此它更快。

根据您的操作系统的安排，单个大文件往往会尽可能写入硬盘的连续扇区，但多个小文件可能会也可能不会这样写入。因此，增加的查找时间可能会导致许多小文件的读取时间增加。

您的操作系统的效率也可能发挥重要作用。例如是否预取文件内容，如何使用缓冲区等。对于许多小文件，操作系统更难以有效地使用缓冲区（并处理其他问题）。（在不同的场景下，它的行为可能会有所不同。）

编辑：至于您提到的复制过程，通常您的操作系统按以下步骤进行操作：

从磁盘读取数据->将数据写入缓冲区->从缓冲区读取->写入（可能是另一个）磁盘

这通常在多个线程中完成。当处理许多小文件时，操作系统可能无法有效地协调这些线程（一些线程非常忙，而另一些则必须等待）。对于单个大文件，操作系统不必处理这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T05:25:06.640

**每个文件系统都定义了一个最小单元（不可共享）来存储名为 page 的数据。**例如，在文件系统中，页面大小为 4KB。现在，如果您保存一个 8 KB 的大文件，它将占用磁盘上的 2 页。但是如果将文件分成 4 个文件，每个文件大小为 2KB，那么它将占用磁盘上的 4 个半满页，占用大小为 16KB 的磁盘空间。

同样，如果您将文件分成 8 个小文件，每个大小为 1KB，那么它将占用磁盘中的 8 个页面，尽管部分已被填充，并且您的 32KB 磁盘空间被占用。

读取开销也是如此。如果你的文件为几页，那么可能是分散的。这将导致寻道时间/访问时间的高开销。

# deployment - 安装 msi 文件时如何检查 Sqlserver 和 Visual Studio 软件是否安装

> ID：13151452
> 
> 赞同：0
> 
> 时间：2012-10-31T04:50:11.260
> 
> 标签：deployment, wix, windows-installer, wix3.6

我正在使用 Visual Studio 创建 msi 文件。但在安装 msi 之前，我需要知道如何测试 .Net Framework 和 SQL 服务器是否已安装。

是否有任何设置（或）任何 Windows 安装程序可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:49:25.250

Windows Installer 建议将引导程序用于这些目的。您将 MSI 打包到 Setup.exe 并设置所需的先决条件，在您的情况下为 .NET FW 4 和 SQL。当用户启动 Setup.exe 时，它​​会检查是否安装了 .NET 和 SQL，如果没有安装它们，然后运行您的 MSI。您可以在 setup.exe 中包含 .NET 或 SQL 的安装文件，或设置安装下载位置的链接。

有更多关于[Windows Installer Bootstrapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367832%28v=vs.85%29.aspx)的信息。

# php - 动态网页内容

> ID：13151454
> 
> 赞同：0
> 
> 时间：2012-10-31T04:50:36.430
> 
> 标签：php, jquery, html, css, ajax

我有一个带有 jQ​​uery UI 导航的网站，并且我有 ajax 可以在 html 文件之间动态更改内容。我基本上只是用其他 div id 的内容替换某些 div id 的内容。这仍然需要大量的 HTML 文件，我想知道是否有一种方法可以拥有一个 html 文件并将内容从它加载到主页中？xml文件呢？

感谢您提供有关最佳实践和可能解决方案的提示和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:16:42.633

**使用 HTML：**

模板视图——使用这种方法，您可以为您希望能够动态加载的网站的每个部分创建单独的 html 文件。这更有效，但这意味着您需要能够正确管理您的文件。

单一视图——此方法涉及再次加载整个页面，并提取所需数据以更新页面。这不是很优雅或高效，我不推荐它。

**使用 XML/JSON**

这通常涉及对数据进行 ajax 请求并使用它在客户端上呈现页面。

XML/JSON 通常比 html 标记更轻量级，这会减少服务器上使用的 CPU 时间和带宽，但它确实需要您的用户拥有能够处理一些 DOM 操作的计算机。

这也要求您有一种组织 ajax 模块的好方法。我使用的模式看起来像这样。

$PROJ_DIR/ajax/{MODULENAME}.php

然后一个名为 calendar 的模块可能会接受诸如 getYears、getTerms、setCurrTerm 之类的操作。

在该脚本中，您切换操作以输出正确的数据，或进行正确的数据库更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:59:21.477

如果你的结构很好，多个视图的 html 文件并不是一件坏事。

# haskell - Haskell 程序复制 List 中的元素

> ID：13151456
> 
> 赞同：4
> 
> 时间：2012-10-31T04:50:49.097
> 
> 标签：haskell

我是 Haskell 的新手。我正在尝试编写一个程序，该程序将列表作为输入复制列表中的每个元素 k 次，其中`k`= 列表中元素的位置。

例如`replic[5,6,7]`给`[[5],[6,6],[7,7,7]]`.

另一个条件是解决方案必须使用`map`函数。

到现在我写的代码是：

```
replic [] = [] 
replic (x:xs) =  map (replicate 2 ) [x] ++ replic xs 
```

这会将每个元素复制两次，因为复制具有输入参数`2`。

我需要的是`replicate`函数应该像`1 ,2 ,3`连续调用一样被输入。所以我需要一个柜台。我怎样才能在那里使用计数器或做任何其他可以给我元素位置的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T05:08:54.763

扩展 Satvik，符号

```
[1..] 
```

给你一个无限的数字列表。

函数`zip`associates 允许您将两个列表合并为一个元组列表

```
zip :: [a] -> [b] -> [(a,b)] 
```

例如

```
> zip [1..] [5,6,7] 
[(1,5),(2,6),(3,7)] 
```

此代码将列表中的每个值与其在列表中的位置相关联

现在

```
replicate :: Int -> a -> [a] 
```

重复一个值任意次数。给定这两个组件，我们可以设计一个简单的函数

```
replic xs = map (\(a,b) -> replicate a b) (zip [1..] xs) 
```

我会写 pointfree 为

```
replic :: [a] -> [[a]]
replic = map (uncurry replicate) . zip [1..] 
```

这正是你想要的

```
> replic [5,6,7]
[[5],[6,6],[7,7,7]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T04:56:34.763

有很多方法可以做到这一点

这是一个类似于您尝试做的解决方案。用 list 压缩列表`[1..]`会给你想要的计数器。

```
replic = repl . zip [1..]

repl [] = []
repl ((x,y):xs)  = (replicate x y) : (repl xs) 
```

另一个解决方案只使用`map`

```
replic = map f . zip [1..]
    where
        f (c,l) = replicate c l 
```

如果您不喜欢使用的想法，`zip`您也可以使用`mapAccumL`

```
import Data.List

replic = snd . mapAccumL f 1
    where
        f a v = (a+1,replicate a v) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T09:57:17.633

通常你会写：

```
replic = zipWith replicate [1..] 
```

现在您可以`zipWith`使用以下方式自己编写`map`：

```
zipWith' f xs ys = map (uncurry f) $ zip xs ys 
```

请注意，您不一定需要索引，例如

```
import Data.List

replic xs = reverse $ transpose (tail $ inits $ reverse xs) 
```

`map`使用显式递归时，您可以执行以下操作：

```
replic = f . map return where
  f [] = []
  f (x:xs) = x : f (map (\(x:xs) -> x:x:xs) xs) 
```

# php - php 正则表达式 preg_match 重复字符

> ID：13151457
> 
> 赞同：3
> 
> 时间：2012-10-31T04:50:52.840
> 
> 标签：php, regex, preg-match

我在php中有一个这样的字符串。

```
$string = "123451" 
```

其中包含 的非连续重复字符`1`。如何使用 preg_match 匹配重复的字符。

我四处浏览发现`preg_match('/(.)\1\1/', $string))`，但它只适用于重复的连续字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:41:32.890

怎么样的东西

```
(\d+).*\1 
```

如果你得到任何匹配，就会有一个重复的数字。

# java - Apache POI，创建新单元格会覆盖行样式

> ID：13151462
> 
> 赞同：17
> 
> 时间：2012-10-31T04:52:00.577
> 
> 标签：java, excel, apache-poi

我正在使用 Apache POI 将数据导出到 .xlsx 文件，并且我想设置文件中包含的一些行和单元格的样式。

我正在使用 XSSF，因为该文件将在 Excel 2007+ 中读取。

基本上，我的问题是我正在尝试设置如下示例中的行样式，它将索引 0 处的整行设置为黑色前景色。它工作正常，但是每当我创建一个新单元格时，新创建的单元格没有样式，就好像它覆盖了我指定的行样式。

这是一个代码片段来演示我在做什么：

```
XSSFWorkbook wb = new XSSFWorkbook();
XSSFSheet sheet = wb.createSheet("mySheet");
XSSFRow row = sheet.createRow(0);

XSSFCellStyle myStyle = wb.createCellStyle();           

myStyle.setFillForegroundColor(new XSSFColor(new Color(255, 255, 255)));
myStyle.setFillPattern(CellStyle.SOLID_FOREGROUND);

row.setRowStyle(myStyle); //This works, the whole row is now black

row.createCell(0); // This cell doesn't have a style, the rest of the line stays stylized
row.getCell(0).setCellValue("Test"); 
```

我也试过 *row.createCell(0, Cell.CELL_TYPE_STRING);*，但它没有改变任何东西。

完成我想做的事情的正确方法是什么？我想这样做，所以我不必在创建每个单元格后设置它的样式，因为同一行上的所有单元格都具有相同的样式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T05:11:58.377

将样式设置到新创建的单元格中，例如如下：

```
 XSSFCell newCell = row.createCell(0);
    newCell.setCellStyle(myStyle); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-31T05:33:37.513

即使您创建具有样式的行，它也不会影响其创建的单元格。创建单元格有自己的单元格样式。`row style`不会`cell style`自动覆盖。如果您想在单元格中使用行样式，则必须重新设置。

即使你设置`row style`在最后，它也不会影响到单元格。

例子

```
CreationHelper createHelper = wb.getCreationHelper();
Sheet sheet = wb.createSheet("new sheet");
Row r = sheet.createRow(0);
r.setRowStyle(rowStyle);

Cell c1 = r.createCell(0);
c1.setCellValue("Test 1");
c1.setCellStyle(rowStyle); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-26T14:37:04.867

我同意“setRowStyle”不能正常工作。

我创建了自己的函数来将样式应用于范围（可以是一行或多行）

```
public void applyStyleToRange(Sheet sheet, CellStyle style, int rowStart, int colStart, int rowEnd, int colEnd) {
    for (int r = rowStart; r <= rowEnd; r++) {
        for (int c = colStart; c <= colEnd; c++) {
            Row row = sheet.getRow(r);

            if (row != null) {
                Cell cell = row.getCell(c);

                if (cell != null) {
                    cell.setCellStyle(style);
                }
            }
        }
    }
} 
```

# c# - 如何在 C# 中替换字符串？

> ID：13151467
> 
> 赞同：0
> 
> 时间：2012-10-31T04:52:47.100
> 
> 标签：c#, asp.net

我有字符串`string test="http://www.test.com//web?testid=12"`。

**我需要将字符串中的//**替换为**/**。

问题是如果我使用`string a=test.replace("//","/")`我得到**http:/www.test.com/web?testid=12**全部带有单斜杠（/）但我需要**http://www.test.com/web?testid=12**。

我只需要第二个**//**附近的**web**，而不是第一个**//**靠近**www**。

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:56:44.980

您可以进行第二次替换

```
string test="http://www.test.com//web?testid=12";
string a=test.Replace("//","/").Replace("http:/","http://"); 
```

=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:59:27.767

```
string test = @"http://www.test.com//web?testid=12";
test = test.Substring(0, test.LastIndexOf(@"//") - 1) 
       + test.Substring(test.LastIndexOf(@"//")).Replace(@"//", @"/"); 
```

或者因为它是一个[Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)，你可以这样做：

```
Uri uri = new Uri(test);
string newTest = uri.Scheme + @"//" + uri.Authority 
                                    + uri.PathAndQuery.Replace(@"//",@"/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:01:54.703

```
string test="http://www.test.com//web?testid=12"
string[] test2 = test.Split('//');

string test = test2[0] + "//" + test2[1] + "/" + test2[2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T05:02:38.747

```
Regex.Replace(test, "[^:]//", "/"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T05:05:49.503

您也可以使用 stringbuilder 。

StringBuilder b =new StringBuilder();

b.Replace("/","//",int startindex,int count);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T05:07:16.077

只需使用以下命令删除最后一个斜杠`String.Remove()`：

```
string test="http://www.test.com//web?testid=12";
string output = test.Remove(test.LastIndexOf("//"), 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T05:07:25.203

```
var http = "http://someurl//data";
var splitindex = http.IndexOf("/") + 1;
var res = http.Substring(splitindex+1, (http.Length-1) - splitindex).Replace("//","/");
http = "http://" + res; 
```

或者

```
StringBuilder strBlder = new StringBuilder();
strBlder.Append("http://someurl//data");
//use the previously used variable splitindex
strBlder.Replace("//", "/", splitindex + 1, (http.Length) - splitindex); 
```

# jquery - 调整大小时图像地图/区域坐标更新

> ID：13151469
> 
> 赞同：4
> 
> 时间：2012-10-31T04:52:53.927
> 
> 标签：jquery, html

我正在制作一个带有不同链接的主控制页面，现在唯一的问题是我希望图像适合整个页面并重新调整大小（窗口），如果他们缩小它（到一定程度）并放大它。

```
<img src ="image/main.jpg" style="width:100%;height:100%; min-width:600px; min-height:400px;" alt="Main" usemap="#MainMap">

<map name="MainMap">
<area id="login" class="login" shape="circle" coords="91,677,92">
<area id="money_management" class="money" shape="circle" coords="598,680,92">
<area id="withdraw_history" shape="circle" coords="596,304,67">
<area id="transaction_history" shape="circle" coords="784,624,67" href="History.html">
<area id="cart" shape="circle" coords="396,698,67,92">
<area id="buy" shape="circle" coords="898,352,92">
<area id="sell" shape="circle" coords="718,438,92">
<area id="new" shape="circle" coords="570,132,92" href="New.html">
</map> 
```

我之前有这个，当我将图像设为静态并让它在其他东西上工作时，我希望在他们重新调整窗口大小后更新坐标我知道如何在 jquery 中检测重新大小我找不到任何语法更新坐标的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T08:18:07.883

这是一个很棒的 jQuery 插件，它完全符合您的要求：

[响应式图像映射 jQuery 插件](http://mattstow.com/experiment/responsive-image-maps/rwd-image-maps.html)

```
/*    
* rwdImageMaps jQuery plugin v1.4    
*    
* Allows image maps to be used in a responsive design by recalculating 
* the area coordinates to match the actual image size on load and 
* window.resize     
*    
* Copyright (c) 2012 Matt Stow    
* https://github.com/stowball/jQuery-rwdImageMaps    
* http://mattstow.com    
* Licensed  under the MIT license
*/ 
```

希望有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-28T20:03:45.623

David Bradshaw 写了一个很好的小库来解决这个问题。它可以与 jQuery 一起使用，也可以不与 jQuery 一起使用。

可在此处获得：[https ://github.com/davidjbradshaw/imagemap-resizer](https://github.com/davidjbradshaw/imagemap-resizer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T23:02:14.590

我最终刮掉了图像映射并使用带有绝对超链接的分区，并根据分区调整它的大小。想避免这种情况，但猜测什么有效，总比没有好。

# javascript - 覆盖 url 并在 Backbone 集合中解析

> ID：13151470
> 
> 赞同：0
> 
> 时间：2012-10-31T04:53:08.467
> 
> 标签：javascript, jquery, ajax, model-view-controller, backbone.js

我想覆盖用于开发目的的集合（从 JSON var 或 JSON 文件返回假 json 结果）。但是我在下面做错了`url`

[http://jsfiddle.net/qhoc/uZhM8/](http://jsfiddle.net/qhoc/uZhM8/)

```
GET http://fiddle.jshell.net/_display/[object%20Object],[object%20Object] 404 (NOT FOUND) 
```

但是，如果我使用`parse`，似乎因为我的两个结果都显示相同的东西而立即`parse`执行`initialize``console.log`

[http://jsfiddle.net/qhoc/uZhM8/1/](http://jsfiddle.net/qhoc/uZhM8/1/)

**那么如何覆盖，`url`以便 fetch 可以在某个时候添加另一个 JSON（在单独的函数中）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:46:31.323

[`url`集合](http://backbonejs.org/#Collection-url)的应该返回一个 URL，该 URL 将用于与`$.ajax`服务器对话：

> **网址** `collection.url`或`collection.url()`
> 
> 在集合上设置**url**属性（或函数）以引用其在服务器上的位置。集合中的模型将使用**url**来构造它们自己的 URL。

您的`url`方法返回一个数组，而 Backbone 将其视为 URL 字符串，因此产生 404 的奇怪 URL。

你有一些选择：

*   使用一个使用[jsfiddle 的 AJAX 存根](http://doc.jsfiddle.net/use/echo.html)工具的 URL 来生成必要的 JSON。
*   覆盖[`sync`](http://backbonejs.org/#Sync)以使用一些内联 JSON 而不是`$.ajax`调用。
*   覆盖[`fetch`](http://backbonejs.org/#Collection-fetch)以使用一些内联 JSON 而不是调用`sync`.

如果您只关心获取数据，那么这三个都应该工作，如果您需要模拟保存或删除，那么您可能最终会覆盖`sync`.

# jquery - 更改 CSS 以使图像填充 jQuery 选项卡

> ID：13151472
> 
> 赞同：0
> 
> 时间：2012-10-31T04:53:23.490
> 
> 标签：jquery, css, jquery-ui-tabs

我正在使用 jQuery Tabs 来显示图像。

也[可以在 jfiddle 上查看](http://jsfiddle.net/8Cmuf/2/)的 HTML如下：

```
<div id="dgTabs" style="width: 500px;">
    <ul>
        <li><a id="a1" href="tab-1"> 
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
        <li><a id="a2" href="tab-2">
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
              <li><a id="a3" href="tab-1"> 
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
        <li><a id="a4" href="tab-2">
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
            <li><a id="a5" href="tab-1"> 
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
        <li><a id="a6" href="tab-2">
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
              <li><a id="a7" href="tab-1"> 
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /></a></li>
        <li><a id="a8" href="tab-2">
            <img src="http://images.smh.com.au/2012/10/30/3754903/umbrella_tn-90x60.jpg" /> </a></li>
    </ul>
</div> 
```

​</p>

如何更改 CSS 以使图像填充整个选项卡？我需要更新哪个 CSS 文件中的哪个元素？基本上，我不想要填充。

![填充图像](../Images/79947fdd753e9acba6a480d8b5bd7451.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:05:09.037

此填充存在于`jquery-ui.css`文件中，您需要覆盖下面的填充

```
#tabs .ui-tabs .ui-tabs-nav li a {
  float: left;
  padding: .5em 1em;
  text-decoration: none;

 } 
```

**更新**

要设置宽度，您必须执行以下操作

```
#tabs ul li, #tabs ul li a {
  width: 15px;
 } 
```

# python - 为什么我的 Django 项目同时显示在子域和本地主机中？

> ID：13151482
> 
> 赞同：4
> 
> 时间：2012-10-31T04:55:19.540
> 
> 标签：python, django, mod-wsgi

问题是我在 localhost 的子域中安装了一个 django 项目，同时我有 localhost 用于其他没有 Django 的东西。

每当我访问 a1.localhost 时，它都会显示我的 django 欢迎页面，但是当我只想访问 localhost 时，它也会显示相同的 django 欢迎页面而不是 index.html。

到目前为止，这就是我所拥有的：

```
Hosts:
127.0.0.1       localhost
127.0.0.1       a1.localhost

vhosts.conf:
#-- a1.localhost
<VirtualHost *:80>
    ServerName a1.localhost
    WSGIScriptAlias / "C:/workspace/website1/apache/django.wsgi"
    <Directory "C:/workspace/website1/apache">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

#-- localhost
<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "C:/workspace/website1/django_project"
</VirtualHost>

django.wsgi

import os
import sys

path = "C:/workspace/website1/apache/django_project"
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings'

import django.core.handlers.wsgi 
```

我想要实现的是在 localhost 中显示我的普通 index.html 文件，在 a1.localhost 中显示我的 django 项目。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:01:10.303

我认为这里发生的是第一个虚拟主机接受到端口 80 的所有流量并将其重定向到 django 应用程序。第二个虚拟主机根本没有接收流量。当它们是不同的端口时，整个事情都会起作用，因为在这种情况下，apache 知道哪个虚拟主机应该接收流量。

正如 Kay Zhu 所说，您可能需要在这些声明之前添加一行来设置虚拟主机命名：

名称虚拟主机 *:80

有关更多信息，请参阅本文：http: [//digitalpbk.blogspot.com/2007/01/making-subdomains-on-localhost.html](http://digitalpbk.blogspot.com/2007/01/making-subdomains-on-localhost.html)

# html - 通过html动作调用struts2动作

> ID：13151485
> 
> 赞同：1
> 
> 时间：2012-10-31T04:55:37.023
> 
> 标签：html, struts2

大家好。我想要如何从普通的 HTML 动作标签调用 struts2 动作文件的代码。可以打电话吗？任何人都可以解释我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:13:57.540

是的，这是可能的，因为所有struts2标签在提交表单时都会被转换成普通的html标签。所以你也可以为Struts2提交普通的html。

**HTML：**

```
<form action="Login">
// your stuff goes here for input
</form> 
```

**Struts XML：**

```
<struts>
<package name="default" extends="struts-default">
<action name="Login" class="packagename.actionclassname">
<result name="input">/login.jsp</result>
<result name="success">/success.jsp</result>
</action>
</package>
</struts> 
```

# c# - 如何在列表视图中获取 kendoui 下拉列表选定值的值

> ID：13151486
> 
> 赞同：0
> 
> 时间：2012-10-31T04:55:41.520
> 
> 标签：c#, asp.net-mvc-3, kendo-ui

我有一些由 kendoui 下拉列表组成的 kendoui 列表视图，我想获取这些下拉列表中的选定值。为此，我正在尝试，

```
 $("#cnty1").val(); 
```

这是我的下拉列表，即来自数据库表的国家列表，

```
<input select STYLE="width:90px;height:auto" id ="cnty1" data-bind="value:cnty1" 
name="cnty1" data-type="string" data-text-field="cnty" 
data-value-field="cntyid" data-source="sourcedata1" class="k-d"   
data-role="dropdownlist" />

<span data-for="cnty1" class="k-invalid-msg"></span> 
```

这里 cnty1 是下拉列表的 id，但没有得到值，而是得到了选定值的“id”，而不是选定值。

而且，如果未选择该值，则通过使用获取第一个值 id`$("#cnty1").val();`

所以，请给我建议一个解决方案，以便，1）我应该只获取 Selected 值和 2）下拉列表的值只有当用户从列表中选择一个值，但不选择时不获取列表的值.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:28:11.490

使用以下 jquery 获取选定的值/文本：

对于**价值**：
`$("#cnty1 option:selected").val();`

对于**文本**使用：
`$("#cnty1 option:selected").text();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T06:48:30.293

试试这个。

```
<select STYLE="width:90px;height:auto" id ="cnty1" data-bind="value:cnty1" 
data-text-field="cnty" data-value-field="cntyid" data-source="sourcedata1" data-role="dropdownlist" data-change="cntySelect" data-option-label="Select"></select>

function cntySelect(e) {                                                
          var dropDownVal = $("#cnty1").val();
            alert(dropDownVal);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:44:08.270

尽管此代码用于 KendoUI 网格中的 FK JSON 对象，但想法是相似的。您必须在下拉值选择中绑定对象。下拉列表本质上包含作为您的值 ID 的选项，而不是对象本身。因此，您必须遍历数据源以查找已选择的对象，然后在数据模型中进行替换。

```
/**
 * KendoDropDownEditor Class
 * */
var KendoDropDownEditor = Class({

    initialize: function (schema, gridId, readUrl) {

        var readUrl = readUrl || base + schema.entityName + "/read";
        this.dataSource = DataSourceGenerator.crudDS(schema, gridId, readUrl);

        this.dataTextField = schema.model.dropDownTextField;
        this.dataValueField = schema.model.id;
    },

    /**
     *
     * */
    do:function (container, options) {
        var self = this;
        var a = $('<input data-text-field="' + self.dataTextField + '" data-value-field="' + self.dataValueField + '" data-bind="value:' + options.field + '"/>')
            .appendTo(container)
            .kendoDropDownList({
                autoBind:false,
                dataSource:self.dataSource,
                close:function (e) {
                    $.each(self.dataSource.data(), function(key, value) {
                        if (value[self.dataValueField] == e.sender.value()) {
                            options.model[options.field] = value;
                            return false;
                        }
                    });
                }
            });
    }
}); 
```

也看看[Knockout-Kendo](http://rniemeyer.github.com/knockout-kendo/web/DropDownList.html)，它可以让你的生活更轻松。

# php - 验证密码返回 0 行，预期获得 1 行

> ID：13151494
> 
> 赞同：0
> 
> 时间：2012-10-31T04:56:40.377
> 
> 标签：php, mysql, codeigniter

我目前正在进行验证过程以检查用户的旧密码，但问题是我无法理解为什么我的查询返回零行，而预期它有 1 行。还有一件事是，即使我没有将密码文本转换为 md5，散列密码仍然得到正确答案，我不知道为什么会发生这种情况。到目前为止，这是我的代码：

```
public function validate_oldpassword($username,$password)
    {
            $this->db->select('user_salt');
            $query = $this->db->get_where('login',array('username' => $username));

            if ($query->num_rows() == 1)
            {
               foreach ($query->result() as $row)
               {
                  $password2 = hash("sha256",$password.$row->user_salt);
                  $this->db->flush_cache();
                  $query = $this->db->get_where('login', array('username' => $username, 'password' => $password2));

                  //return $this->db->last_query();
                  return $query->num_rows();

                  if($query->num_rows()==1){
                    return "YEHEY";
                  }else{
                    return "NO";
                  }

               }
            } 

    } 
```

我还检查了查询，它返回正确的查询，即：

```
SELECT * FROM (`login`) WHERE `username` = 'kahel' AND `password` = 'f91d20d381426ea56e57da9ab23d0c568b8f934c3ff313e1bbf6c28a4fee758a' 
```

我的密码是`test`盐`XgvT7F~(CYr#*0E1^UI@xkqJ5GcAO8BHsotZpf+WQ!4&ja2y%NdelLmhPSnRw9)zDK63VMuib`，存储的密码是`f91d20d381426ea56e57da9ab23d0c568b8f934c3ff313e1bbf6c28a4fee758a`

最困扰我的是，在我的登录页面功能中，一切正常。这是我的登录代码功能：

```
public function get_login_credentials($username,$password)
    {
            $this->db->select('user_salt');
            $query = $this->db->get_where('login',array('username' => $username));

            if ($query->num_rows() == 1)
            {
               foreach ($query->result() as $row)
               {
                  $password = hash("sha256",md5($password).$row->user_salt);
                  $query = $this->db->get_where('login', array('username' => $username, 'password' => $password));
                  return $query->num_rows();
               }
            } 
    } 
```

我真的不明白为什么它返回零行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:01:48.027

在您正在设置的登录功能中：

```
$password = hash("sha256",md5($password).$row->user_salt); 
```

并在 validate_oldpassword 中设置：

```
$password2 = hash("sha256",$password.$row->user_salt); 
```

你没有在上面做 md5 哈希

# data-binding - JFace 数据绑定异常

> ID：13151497
> 
> 赞同：0
> 
> 时间：2012-10-31T04:57:02.577
> 
> 标签：data-binding, jface

我是 Jface 数据绑定的新手。我正在尝试使用数据绑定填充表。当任何人单击行时，值将显示在映射的文本字段中。当我这样做时，我得到异常。（“java.lang.IllegalArgumentException：在类 com.swt.pro.model.Employee 中找不到名称为 name 的属性") 下面是类结构。

我有 3 个模型类，它们负责填充 1 个 GUI 表

```
public class WorkplaceDetail extends AbstractModelObject {

private int code;
private String plant;
private String compRegNum;
private final List <Employee> m_employee = new ArrayList();
}

public class Employee extends AbstractModelObject{

private String empName;
private int empNumber;
private List<Address> address = new ArrayList();
}

public class Address extends AbstractModelObject{

private String primaryPhone;
private String secPhone;
}

In main class I am populating value of these models

List<WorkplaceDetail> m_workplace = new ArrayList();

public void initializeModels() {
m_workplace.add(new WorkplaceDetail(1,"IBM","12-02-033",));
WorkplaceDetail workplace= new WorkplaceDetail();
workplace.addEmployee(new Employee ("Prashant",0));
Employee employee= new Employee();
employee.addAddress(new Address("010-674634",null,"010-748347",null,null,null,null,null,null)); 
}

Databinding method

ObservableListContentProvider simpleTableViewerContentProviderList = new ObservableListContentProvider();
IObservableMap[] simpleTableViewerLabelProviderMaps = PojoObservables.observeMaps(simpleTableViewerContentProviderList.getKnownElements(), WorkplaceDetail.class, new String[]{"code","plant", "compRegNum"});
m_workplaceViewer.setLabelProvider(new ObservableMapLabelProvider(simpleTableViewerLabelProviderMaps)); 
m_workplaceViewer.setContentProvider(simpleTableViewerContentProviderList);

WritableList smListWritableList = new WritableList(m_workplace, WorkplaceDetail.class);
m_workplaceViewer.setInput(smListWritableList);

IObservableMap[] _simpleTableViewerLabelProviderMaps = PojoObservables.observeMaps(simpleTableViewerContentProviderList.getKnownElements(), Employee.class, new String[]{"name"});
m_workplaceViewer.setLabelProvider(new ObservableMapLabelProvider(_simpleTableViewerLabelProviderMaps));

IObservableMap[] simpleTableViewerLabelProviderMaps_2 = PojoObservables.observeMaps(simpleTableViewerContentProviderList.getKnownElements(), Address.class, new String[]{ "phone1", "phone2"});
m_workplaceViewer.setLabelProvider(new ObservableMapLabelProvider(simpleTableViewerLabelProviderMaps_2)); 
```

当我运行它时，我得到异常“java.lang.IllegalArgumentException：在类 com.swt.pro.model.Employee 中找不到名称为名称的属性”

请帮我解决异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:41:42.203

您的类必须遵循[Java Beans](http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/)规范（注意这是不同的“Enterprise Java Beans”又名 EJB）。基本上，您需要添加访问器方法（参见第 7 节）并支持 PropertyChangeListeners 在模型更新时通知 UI。

# javascript - jQuery clone( true ) 不适用于动态元素

> ID：13151500
> 
> 赞同：1
> 
> 时间：2012-10-31T04:57:21.050
> 
> 标签：javascript, jquery, clone

举个例子：

```
$.fn.foo = function() {

    var $input = $('<input type="text"/>');
    var $button_one = $('<button>One</button>');
    var $button_two = $('<button>Two</button>');

    $button_one.click(function(){
        $input.val('hey');
    });

    $button_two.click(function(){
        $input.replaceWith( $input.val('').clone( true ) );
    });

    this.append( $input, $button_one, $button_two );

}; 
```

查看演示：http: [//jsbin.com/ezexah/1/edit](http://jsbin.com/ezexah/1/edit)

现在单击“一个”，您应该在输入中看到“嘿”。接下来点击“二”，再点击“一”，还是不行。即使使用`true`选项`clone`来复制所有事件，它仍然不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:01:57.180

你没有更新`$input`。它仍然指的是您刚刚删除的元素，这意味着`$input.val('hey');`将更新现在从 DOM 树中分离出来的 DOM 元素的值。
`.clone`或`.replaceWith`不自动更新现有参考：

```
var $clone = $input.val('').clone( true )
$input.replaceWith($clone);
$input = $clone; 
```

这与选项 btw 无关`true`，因为您没有将任何事件处理程序绑定到`$input`.

[**演示**](http://jsbin.com/ezexah/7/edit)

# seam2 - h:selectOneMenu 未填充“选定”项目

> ID：13151501
> 
> 赞同：2
> 
> 时间：2012-10-31T04:57:25.077
> 
> 标签：seam2, selectonemenu

当支持 bean 上已经设置了某些内容时，我遇到了 h:selectOneMenu 没有选定项目的问题。我正在使用接缝并指定了客户转换器。在我的“创建”页面上工作时，一切正常，可以从菜单中选择某些内容，提交页面时，也会分配正确的值并将其保存到数据库中。
但是，当我在“编辑”页面上工作时，菜单的默认选择不是当前选择。我已经通过并确认某些东西肯定是设置的等等。

我的 selectOneMenu 看起来像这样：

```
<h:selectOneMenu id="selVariable" 
     value="#{customer.variableLookup}" 
     converter="#{variableLookupConverter}">
    <s:selectItems var="source" 
        value="#{customerReferenceHelper.variableLookups()}" 
        label="#{source.name}" />
</h:selectOneMenu> 
```

转换器在下面。它非常简单，只需将 id 从 string 转换为 int 并返回等：

```
@Name( "variableLookupConverter" )
public class VariableLookupConverter implements Serializable, Converter {

 @In
 private CustomerReferenceHelper customerReferenceHelper;

 @Override
 public Object getAsObject( FacesContext arg0, UIComponent arg1, String arg2 ) {
    VariableLookup variable= null;
    try {
        if ( "org.jboss.seam.ui.NoSelectionConverter.noSelectionValue".equals( arg2 ) ) {
            return null;
        }
        CustomerReferenceHelper customerReferenceHelper = ( CustomerReferenceHelper ) Contexts.getApplicationContext().get(
                "customerReferenceHelper" );
        Integer id = Integer.parseInt( arg2 );
        source = customerReferenceHelper.getVariable( id );
    } catch ( NumberFormatException e ) {
        log.error( e, e );
    }
    return variable;

 }

 @Override
 public String getAsString( FacesContext arg0, UIComponent arg1, Object arg2 ) {
    String result = null;
    VariableLookup variable= ( VariableLookup ) arg2;
    Integer id = variable.getId();
    result = String.valueOf( id );
    return result;
 }
} 
```

我已经看到了一些关于它可能是类上的 equals() 方法的事情，（这并不能与其他所有工作相加，但我还是覆盖了它，如下所示，其中哈希码只是 id（id 是每个项目的唯一标识符）。

等于方法：

```
@Override
public boolean equals( Object other ) {
    if ( other == null ) {
        return false;
    }
    if ( this == other ) {
        return true;
    }
    if ( !( other instanceof VariableLookup ) ) {
        return false;
    }
    VariableLookup otherVariable = ( VariableLookup ) other;
    if ( this.hashCode() == otherVariable.hashCode() ) {
        return true;
    }
    return false;
} 
```

我对此束手无策，我找不到我可能错过的东西？！任何帮助将非常感激。

更新：据我了解，在构建列表时，它会检查每个项目的绑定值，以查看它们是否匹配以设置所选项目。在equals方法中放入一些debug语句显示，由于与空对象的比较，在构建列表过程中的所有比较都失败了，但是查看seam调试页面，它表明该值肯定是设置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:32:42.757

尝试这个;

```
<h:selectOneMenu id="selVariable" 
 value="#{customer.variableLookup}">
<s:selectItems var="source" 
    value="#{customerReferenceHelper.variableLookups()}" 
    label="#{source.name}" itemValue="#{source}/>
<s:convertEntity />
</h:selectOneMenu> 
```

我对我的几乎所有实体都使用这种表示法。

**编辑**

Omnifaces 有一个[SelectItemsConverter](http://showcase.omnifaces.org/converters/SelectItemsConverter)它可以解决你的问题。

# android - 读取 Sqlite 数据库时出现 NullPointerException

> ID：13151502
> 
> 赞同：1
> 
> 时间：2012-10-31T04:57:36.673
> 
> 标签：android, sqlite

我必须从 SQLite 数据库中读取值，但`NullPointerException`在执行时获取

```
 private final String DB_NAME = "UserDb";
   private final String TABLE_NAMES = "tbluser"; 
   SQLiteDatabase sampleDB;
   Cursor c=null;
   String deviceDec;  
   c= sampleDB.rawQuery("SELECT * from " +TABLE_NAMES+" where did='"+deviceDec+"' ",null); 
```

请建议我为什么会出现异常，因为在一个函数中它正在运行，但在其他函数中它不是，而且我正在获取我在 Log.xml 中检查的 deviceDec 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:00:06.043

可能是你的`sampleDB;`为空。

所以首先你初始化那个对象，就像

```
SQLiteDatabase sampleDB = new SQLiteDatabase(Your Param); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:12:55.767

你需要启动数据库..

```
SQLiteDatabase sampleDB=context.getReadableDatabase(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T05:30:19.820

在从中选择数据之前打开数据库。

```
public SQLiteDatabase openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);

    return myDataBase;
} 
```

这将返回数据库.. 然后使用 returnedDb.rawQuery("");

# c# - 实体框架 - 在子关系上存储父引用（一个 -> 多个）

> ID：13151503
> 
> 赞同：1
> 
> 时间：2012-10-31T04:57:38.037
> 
> 标签：c#, entity-framework, entity-framework-5

我有这样的设置：

```
[Table("tablename...")]
public class Branch
{
    public Branch()
    {
        Users = new List<User>();
    }
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public List<User> Users { get; set; }
}

[Table("tablename...")]
public class User
{
    [Key]
    public int Id {get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    [ForeignKey("ParentBranch")]
    public int? ParentBranchId { get; set; } // Is this possible?
    public Branch ParentBranch { get; set; } // ???
} 
```

用户是否可以知道它属于哪个父分支？上面的代码不会填充 ParentBranch。

实体框架版本 5.0 .NET 4.0 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:01:54.797

尝试使导航属性虚拟化，

```
[Table("tablename...")]
public class Branch
{
    public Branch()
    {
        Users = new List<User>();
    }
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual List<User> Users { get; set; }
}

[Table("tablename...")]
public class User
{
    [Key]
    public int Id {get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    [ForeignKey("ParentBranch")]
    public int? ParentBranchId { get; set; } // Is this possible?
    public virtual Branch ParentBranch { get; set; } // ???
} 
```

# php - 这个json必须做什么？

> ID：13151504
> 
> 赞同：-4
> 
> 时间：2012-10-31T04:57:50.100
> 
> 标签：php, javascript, jquery, json

嗨，我搜索了很多从 php 返回的响应，如果该响应可以做某事，如果它的错误做其他事情（！！！！！！！！！当我从那个 PHP 获得其他输出时！！！！！！）这是我的索引文件

```
<head>
<script src="jquery-1.7.2.js" type="text/javascript"></script>
<script src="js.js" type="text/javascript"></script>
</head>
<body>
<p> click </p>
<input type="text" id="who">
<br>
<input type="text" id="why">
<div id="bg" align="center">
</div>
</body> 
```

这是我的 JS 文件

```
$(document).ready(function(){
    $('p').click(function(){
        var who = $('input#who').val();
        var why = $('input#why').val();     
        $.post('file.php',{who:who,why:why},function(data) {
    if(data.success){
         alert(data.message);
    }
    else{ alert('ERROR:' + data.message);
    }
});

    });
}); 
```

这是我的file.php

```
<?php
$response = array('success' => 'true', 
    'code' => "jQuery('#bg').html('\"Javascript\", \"json\", \"PHP\"');");
echo json_encode($response);
?> 
```

我的问题：1-为什么这不起作用我收到警报（错误：未定义）2-当它有其他输出时，我如何从该 php 文件中获得一些结果：

```
<?php
echo "1";
echo "2";
echo "3";
and now echo that json
?> 
```

谢谢 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:11:56.893

> 为什么这不起作用我收到警报（错误：未定义）

你必须告诉 jQuery 响应是 JSON。您可以通过`'json'`作为第四参数传递给[`$.post` *^([docs])*](http://api.jquery.com/jQuery.post/)或通过在 PHP 中设置正确的响应标头来做到这一点：

```
header('Content-Type: application/json'); 
```

或者，您可以使用[`jQuery.parseJSON` *^([docs])*](http://api.jquery.com/jQuery.parseJSON/)自己解析响应。

> 当它有像这样的其他输出时，我如何从该 php 文件中获得一些结果

没有简单的方法。响应不再是有效的 JSON，因此您必须以某种方式自己解析它。您应该避免这样做并将所有内容都返回为 JSON。

# android - 使用动画师类在视图中为可绘制动画制作动画的最佳方法是什么？

> ID：13151505
> 
> 赞同：7
> 
> 时间：2012-10-31T04:57:57.890
> 
> 标签：android, animation, drawing, hardware-acceleration

我已经阅读了有关[属性动画](http://developer.android.com/guide/topics/graphics/prop-animation.html)和[硬件加速](http://developer.android.com/guide/topics/graphics/hardware-accel.html#layers-anims)的信息，但我仍然不确定使用动画师类的最有效方法是什么。（为了这个问题，我不需要在 Honeycomb 之前支持设备。所以我想使用动画师类。）

例如，假设我有一个视图。在这个视图中，我有一个想要淡入的 BitmapDrawable。视图中还有许多其他元素不会改变。

动画师最好使用什么属性或对象？可绘制的？我在 onDraw 中绘制位图的颜料？还有什么？

如何通过硬件加速最有效地做到这一点？这是否需要为动画的每个步骤调用 invalidate 或者是否有一种方法可以仅对可绘制对象进行动画处理而不会导致动画的每个步骤都完全重绘视图的其余部分？

我想我想一个最佳情况是视图的其余部分不必在软件中完全重绘，而是硬件加速有效地淡化可绘制对象。

对推荐方法有任何建议或指示吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T15:03:24.623

使用对象属性动画器，基本上它们只是数学函数，每 X 毫秒重复调用一次“setN()”方法，其中“N”是您要更改的属性。

在 alpha 示例中提供的示例中，两者都需要调用`invalidate()`来重绘您正在制作动画的视图。不同之处在于，当您调用对象时，它会调用`setAlpha()`您。如果您要将目标 Object 设置为用于绘制可绘制对象的对象，您仍然需要调用它，以便它将使用新参数重绘。`View``invalidate()``Paint``invalidate()``View``Paint`

理想情况下，您希望将目标设置为您可以设置的最高级别的子级，以便重绘仅发生在您要设置动画的视图上。例如，如果您将目标设置为根视图，它将调用`invalidate()`整个 ViewGroup 中的每个子视图，然后依次调用 ViewGroup 中的每个子视图`draw()`。如果将其设置为顶级`ImageView`，则只会`ImageView`重绘。

为了最好地利用硬件，您需要使用图层属性。首先，您需要决定要设置动画的最顶层父视图是什么。如果您只想淡化`Drawable`，那么它将是`Drawable`或 包含`View`。如果您想淡化所有内容，那么它将是根视图。无论您决定制作什么动画，都将立即应用于`View`整体。

`setLayerType()`在启动 Animator 之前在父视图上使用。将其设置为`View#LAYER_TYPE_HARDWARE`。然后设置一个`AnimationListener`并将 LayerType 重置为`View#LAYER_TYPE_SOFTWARE`或`View#LAYER_TYPE_NONE`在动画师完成时。

```
myParentView.setLayerType(View.LAYER_TYPE_HARDWARE, null);
myObjectAnimator.addListener(new ViewAnimator.AnimatorListener() {
  public void onAnimationEnd(Animator animation) {
    myParentView.setLayerType(View.LAYER_TYPE_NONE);
  }
  public void onAnimationRepeat(Animator animation) {
  }
  public void onAnimationStart(Animator animation) {
  }
  public void onAnimationCancel(Animator animation) {
    myParentView.setLayerType(View.LAYER_TYPE_NONE, null);
  }
}
myObjectAnimator.start(); 
```

在这种情况下，如果您要`myParentView`使用该`translateX`属性进行翻译，那么它会将图层`myParentView`及其所有子级放入一个平面中。放入硬件内存。一次翻译整个视图。然后，完成后，`myParentView`从内存中删除。

**编辑：**

最后一点，Alpha 对 CPU 造成严重破坏。如果你有一些半 alpha 的东西并在 View 中翻译它，它会比你简单地翻译 View 更难渲染。谨慎使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:59:40.370

也许，您可以在原始视图上叠加一个新视图（仅包含动画师）。新视图设置为透明。

你应该做的重置是无效的，没有原始视图的新视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:45:28.667

在完成您的查询后，我建议您仔细阅读此[标准文档](http://developer.android.com/guide/topics/graphics/2d-graphics.html)，该文档很简洁，可以让您了解如何`invalidate()`正确使用。其次，android API 已经提供了不同的方式来处理不同情况下的动画。

[在这里](http://developer.android.com/guide/topics/graphics/index.html)，我希望您的大部分疑问都将得到解决。请浏览他们提到的小节和相关博客。

希望这会帮助你。

# asp.net - ASP.Net Web 应用程序 - 服务器端取消提交 PostBackUrl 如果不是（！）Page.IsValid

> ID：13151506
> 
> 赞同：1
> 
> 时间：2012-10-31T04:58:01.493
> 
> 标签：asp.net, validation-controls

`PostBackUrl`我有一个 Web 应用程序，如果表单有效，提交使用来显示数据。

我需要使用不同的（服务器端）验证组，具体取决于`radiobutton`选择的内容。也就是手动调用

```
Page.Validate('ValidationGroupA'). 
```

`Page.IsValid`就正确分配的真或假而言，验证本身工作正常。

但是，如果页面无效，页面将重定向到`PostBackUrl`提交按钮上指定的页面，在该页面发现页面无效，客户端重定向回：

```
if (!PreviousPage.IsValid){Response.Redirect("DataEntryPage.aspx");}) 
```

但是，通过反复来回，所有表单数据都会丢失，并且不会显示相关的验证控件和摘要。

是否有任何等效的 JavaScript`evt.preventDefault()`或其他方式，一旦在手动调用后检测到验证失败，`Page.Validate`将表单发回并显示适当的验证错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:42:18.553

**使用 ASP.Net 客户端验证。**

*jQuery 代码*（在提交按钮的 onclick 上调用它）：

```
 $("#SubmitButtonID").click(function (e) {
      Page_ClientValidate('ValidationGroupA');
      if (!Page_IsValid)
      {
         e.preventDefault();
      }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:21:40.447

我最终删除了 PostBackUrl 指令，并为提交按钮使用了 onclick 事件

```
protected void Submit_Click(object sender, EventArgs e)
{
   if (chartTypeRadio.Text != "bolus") { Page.Validate("age"); }
   if (Page.IsValid) { Server.Transfer("~/PatientSpecificDrugChart.aspx", true); }
} 
```

# jquery - 淡出菜单在 IE8 中不起作用

> ID：13151508
> 
> 赞同：2
> 
> 时间：2012-10-31T04:58:27.373
> 
> 标签：jquery, internet-explorer-8, fadeout

我在我的网站上使用了这个脚本。但它不适用于 IE8 或更低版本。是否可以在所有浏览器中完美运行？

```
<script type="text/javascript" src="/web/upload/js/jquery-1.3.2.js"></script>
    <script type="text/javascript">
        $(function() {
            $(window).scroll(function(){
                var scrollTop = $(window).scrollTop();
                if(scrollTop != 0)
                    $('#header').stop().animate({'opacity':'0'},400);
                else    
                    $('#header').stop().animate({'opacity':'1'},400);
            });

            $('#header').hover(
                function (e) {
                    var scrollTop = $(window).scrollTop();
                    if(scrollTop != 0){
                        $('#header').stop().animate({'opacity':'1'},400);
                    }
                },
                function (e) {
                    var scrollTop = $(window).scrollTop();
                    if(scrollTop != 0){
                        $('#header').stop().animate({'opacity':'0'},400);
                    }
                }
            );
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:39:20.647

在文档准备好后尝试在顶部使用它：

因为您使用的是 jquery 1.3，所以使用此代码

```
$(function() {
    $('#header').css("opacity","0");
   // then all your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:05:46.413

实际上，由于您使用的是 jquery，因此它会在不透明的情况下解决跨浏览器问题，因此我认为您无需执行任何操作。

尝试使用：

`$("yourid").css({ opacity: 0.0 }).animate( {opacity:0}, 400);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:34:53.390

这是 jQuery 1.3.2 中的一个错误，您可以在此处获取更多详细信息[Jquery Bugs](http://bugs.jquery.com/ticket/5033)，尝试使用更新的 jquery。

[http://code.jquery.com/jquery-1.8.0.min.js](http://code.jquery.com/jquery-1.8.0.min.js)

# json - rpc（远程过程调用）和webservices之间的区别

> ID：13151510
> 
> 赞同：0
> 
> 时间：2012-10-31T04:58:44.273
> 
> 标签：json, jax-ws, rpc

我想知道 rpc 和 webservices 之间的基本区别。这应该是首选。我想在 json-rpc 和 jax-ws 之间进行选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:24:30.383

**网络服务**：

Web 服务通常是通过超文本传输​​协议 (HTTP) 访问并在托管所请求服务的远程系统上执行的应用程序编程接口 (API) 或 Web API。Web 服务往往属于两个阵营之一：大型 Web 服务和 RESTful Web 服务。

**RPC**：

远程过程调用。它使系统能够透明地通过网络调用诸如 NFS 之类的程序，使每个系统都能够将调用解释为就好像它们是本地调用一样。在这种情况下，它会使导出的文件系统看起来好像它们是本地的。

**哪一个更可取**：

RPC 将仅用于您对客户端和服务器代码都有影响的内部/内部服务器。最常见的情况是转发仅存在于少数机器上的服务。例如，将请求转发到中央机器所需的许可证数量或支持开销最小化，或提供对其他操作系统特定软件的访问（例如，需要使用仅在 SGI 上可用的旧程序的 Linux 程序。 ) 另一种情况是降低启动成本。

我们可以识别出两大类 Web 服务，即符合 REST 的 Web 服务，其中服务的主要目的是使用一组统一的“无状态”操作来操作 Web 资源的 XML 表示；和任意 Web 服务，其中服务可以公开任意一组操作

愿对你有所帮助...

# objective-c - 如何打破Objective-C中的块循环？

> ID：13151511
> 
> 赞同：4
> 
> 时间：2012-10-31T04:58:58.463
> 
> 标签：objective-c, ios, iteration, block, break

我在头文件中有这些声明：
**注意：** *我不会解释整个代码，我认为它很容易理解*

```
typedef void (^loopCell)(id cell);
-(id)allCells:(loopCell)cell; 
```

以及**allCells**函数实现：

```
-(id)allCells:(loopCell)cell
{
    for (AAFormSection *section in listSections)
    {
        for (id _cell in section.fields) {
            cell(_cell);
        }
    }
    return nil;
} 
```

**allCells**函数的用法：

```
-(void)setFieldValue:(NSString *)value withID:(int)rowID
{    
    [self allCells:^(id cell) {
        if([cell isKindOfClass:[AAFormField class]]) {
            AAFormField *_cell = (AAFormField *)cell;
            if(_cell.rowID == rowID) {
                _cell.value = value;
                //return; Here I want to terminate loop
            }
        }
    }];
} 
```

**我的问题是**，我无法在中间**终止**allCells 循环（实际上当我在循环中找到我需要的对象时，我不想遍历其他对象）

如何在中间停止 allCells 循环？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T05:07:25.643

查看`NSArray enumerateObjectsUsingBlock:`. 他们设置块签名以获取 BOOL 指针。将 stop BOOL 设置为 YES 以导致迭代停止。

```
typedef void (^loopCell)(id cell, BOOL *stop);

-(id)allCells:(loopCell)cell {
    BOOL stop = NO;
    for (AAFormSection *section in listSections) {
        for (id _cell in section.fields) {
            cell(_cell, &stop);
            if (stop) {
                break;
            }
        }
        if (stop) {
            break;
        }
    }

    return nil;
}

-(void)setFieldValue:(NSString *)value withID:(int)rowID {    
    [self allCells:^(id cell, BOOL *stop) {
        if([cell isKindOfClass:[AAFormField class]]) {
            AAFormField *_cell = (AAFormField *)cell;
            if(_cell.rowID == rowID) {
                _cell.value = value;
                if (stop) {
                    *stop = YES;
                }
            }
        }
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:04:37.810

你不能脱离`setFieldValue`，但你可以脱离`allCells`。

由您使用的调用块的方法（`allCells`在本例中）来提供停止循环的机制。通常，它是块的参数。

如果 allCells 是您的，并且您不介意修改它，则修改块签名以获取指向 BOOL 的指针，初始化为 YES，并检查块是否将其修改为 NO。

（注意：您可以`break`从 for in 循环中。）

# python - matplotlib 绘图窗口不会出现

> ID：13151514
> 
> 赞同：18
> 
> 时间：2012-10-31T04:59:10.590
> 
> 标签：python, plot, matplotlib, 64-bit, pandas

我正在使用 64 位的 Python 2.7.3。我为 64 位安装了 pandas 和 matplotlib 1.1.1。现在，我的情节都没有显示。在尝试从几个不同的数据帧进行绘图后，我沮丧地放弃了，并尝试了[http://pandas.pydata.org/pandas-docs/dev/visualization.html](http://pandas.pydata.org/pandas-docs/dev/visualization.html)中的以下第一个示例：

**输入：**

```
import matplotlib.pyplot as plt
ts = Series(randn(1000), index=date_range ('1/1/2000', periods=1000))
ts = ts.cumsum()
ts.plot()
pylab.show() 
```

**输出：**

```
Axes(0.125,0.1;0.775x0.8) 
```

并且没有出现绘图窗口。我读过的其他 StackOverflow 线程表明我可能缺少 DLL。有什么建议么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-31T09:40:42.137

我根本不相信这是熊猫问题。

做

```
import matplotlib.pyplot as plt
plt.plot(range(10))
plt.show() 
```

提出一个阴谋？

如果不：

你是如何安装 matplotlib 的？它是从源代码还是从包管理器/预构建的二进制文件安装的？

我怀疑如果你运行：

```
import matplotlib            
print matplotlib.rcParams['backend'] 
```

结果将是一个非 GUI 后端（几乎可以肯定是“Agg”）。这表明您没有合适的 GUI 工具包可用（我个人使用 Tkinter，这意味着我的后端报告为“TkAgg”）。

解决方案取决于您的操作系统，但如果您可以安装 GUI 库（Tkinter、GTK、QT4、PySide、Wx 之一），那么`pyplot.show()`应该希望为您弹出一个窗口。

高温下，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T18:32:41.953

在 virtualenv 中工作时我遇到了这个问题。

### 原因

问题的原因是当你`pip install matplotlib`，它找不到任何后端（即使它们安装在你的机器上），所以它使用“agg”后端，它不做任何绘图，只是写入文件。要确认是这种情况，请转到：`python -c "import matplotlib; print matplotlib.get_backend()"`，您可能会看到`agg`。

但是，我可以在系统上（在 virtualenv 之外）成功使用 matplotlib。由于各种不同的原因，我也未能安装 PySide、PyQt 或让它为 TkAgg 工作。

### 解决方案

我最终只是链接到我的 matplotlib 系统版本（从 venv 外部开始）：

```
...$ pip install matplotlib
...$ cd /to/my/venv/directory
...$ source venv/bin/activate
(venv) .... $ pip uninstall matplotlib
(venv) .... $ ln -s /usr/lib/pymodules/python2.7/matplotlib $VIRTUAL_ENV/lib.python*/site-packages 
```

之后，我可以使用 matplotlib 并显示图表。您本地版本的 matplotlib 可能位于不同的位置。要查看它在哪里，请转到（在 venv 之外，在 python 中）

```
...$ python -c 'import matplotlib; matplotlib.__file__' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-20T11:20:29.917

尝试安装这些库，它对我有用：

```
$ sudo apt-get install tcl-dev tk-dev python-tk python3-tk 
```

# c# - 并非 global.asax C# 捕获的所有错误

> ID：13151519
> 
> 赞同：0
> 
> 时间：2012-10-31T04:59:55.783
> 
> 标签：c#, error-handling, global-asax, elmah

我试图在 global.asax 文件中捕获除**“404-File not found”**错误之外的所有错误并写入服务器中的文本文件，但是很多错误都被遗漏了，例如 FormatException 错误、Sessionout 错误和**“错误黄页” “**出现了！

我怎样才能在这里捕获所有错误。

```
void Application_Error(object sender, EventArgs e) 
{
    CT.Bussiness.DevCommonFunctions devTools = new CT.Bussiness.DevCommonFunctions();
    HttpContext ctx = HttpContext.Current;
    //ctx.Response.
    // Get page url
    if (ctx != null)
    {
        string pageName = ctx.Request.Url.ToString();

        Exception ex = Server.GetLastError().GetBaseException();
        HttpException checkException = (HttpException)ex;
        if (checkException.GetHttpCode() != 404)
        {
            string errorDate = DateTime.Now.ToString();
            //string pageName =pageName;
            string errorMessage = ex.Message;
            string errorSource = ex.Source;
            //string errorInnerException=ex.InnerException.ToString();
            string errorData = ex.Data.ToString();
            string errorTarget = ex.TargetSite.ToString();
            string errorStack = ex.StackTrace.ToString();
            devTools.WriteErrorsIntoErrorLog(errorDate, pageName, errorMessage, errorSource, "InnerException", errorData, errorTarget, errorStack);
            //devTools.SendErrorMail("developer3@devwebservices.net,developer4@devwebservices.net,developer5@devwebservices.net,hr@devwebservices.net", errorDate, pageName, errorMessage, errorSource, "InnerException", errorData, errorTarget, errorStack);
            //Response.TrySkipIisCustomErrors = true;
            Response.Redirect("~/Error.aspx");
            //Response.Redirect("Error.aspx");

        }
    }
} 
```

**解决了**

我按照 KPL 的建议如下：

1.  实施 Elmah
2.  排除 Global.asax 和
3.  在 web.config 中编写重定向代码。

从而解决！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:10:51.200

采用：

**1.) web.config "customErrors" 标签以避免"黄页错误"：**

```
<customErrors mode="On" defaultRedirect="~/Error.aspx">
      <error statusCode="400" redirect="/error/400-bad-request/" />
      <error statusCode="404" redirect="/error/404-file-not-found/" />
      <error statusCode="500" redirect="/error/500-server-error/" />
</customErrors> 
```

2.) 也尝试使用[Elmah](http://code.google.com/p/elmah/)来记录错误。

**ELMAH（错误记录模块和处理程序）**是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

将 ELMAH 放入正在运行的 Web 应用程序并进行适当配置后，您无需更改任何一行代码即可获得以下功能：

*   记录几乎所有未处理的异常。
*   用于远程查看重新编码异常的整个日志的网页。
*   用于远程查看任何记录的异常的完整详细信息的网页，包括彩色堆栈跟踪。
*   在许多情况下，即使关闭了 customErrors 模式，您也可以查看 ASP.NET 为给定异常生成的原始黄屏死机。
*   每个错误发生时的电子邮件通知。
*   来自日志的最后 15 个错误的 RSS 提要。

# java - 将 ID 列表与主列表进行比较，并根据找到/未找到创建或删除主列表记录

> ID：13151521
> 
> 赞同：0
> 
> 时间：2012-10-31T05:00:12.663
> 
> 标签：java, algorithm, data-structures

我有一个 ID 列表：`List<Integer> updatedIds`.

我有一个主列表（比如说，取自数据库）`List<Records> masterList`：。

我想做以下事情：

1.  对于 中的每个 ID `updatedIds`，检查它是否在 中`masterList`。如果没有，请将记录添加到`masterList`.
2.  对于 中的每条记录`masterList`，检查它是否在 中`updatedIds`。如果不是，它已过时，因此将其从`masterList.`

简单的代码如下：

```
for (Integer updId : updatedIds) {
    boolean hasMapping = false;
    for (Record rec : masterList) {
        if (rec.getId() == updId) { hasMapping = true; break; }
    }
    if (!hasMapping) {
        //TODO add updId to masterList
    }
}
for (Record rec : masterList) {
    boolean isObsolete = true;
    for (Integer updId : updatedIds) {
        if (rec.getId() == updId) { isObsolete = false; break; }
    }
    if (isObsolete) {
        //TODO remove rec from masterList
    }
} 
```

第一个循环处理需求 1，第二个处理需求 2。它看起来非常低效，我想我可能为这类任务使用了错误的数据结构。

有没有更有效的方法来实现上述算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:08:18.497

你可以`HashMap<Integer,Records>`代替`List<Records>`. 你会在哪里得到不断的查找`O(1)`。HashMap -> Integer - id 和 Records - 对应的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:12:18.277

如果您对两个列表（例如使用 Collections.sort）、以自然顺序排列的 updatedID 和按 ID 排序的 masterList 进行排序，您可以设置一个循环来遍历它们。如果记录来自数据库，您可以按排序顺序*检索记录，然后跳过该步骤。*

```
Collections.sort(masterList, myComparator);
Collections.sort(updatedIDs);

Iterator m_it = masterList.iterator();
Iterator u_it = updatedIDs.iterator();

// * Some code here to deal with the possibility that either list is empty

Record rec    = m_it.next();
int    u      = u_it.next();
bool   done   = false;

while (! done) {
  if (rec.getID() < u) {
    // rec's ID was missing from updatedIDs
    m_it.remove();

    if (m_it.hasNext()) {
      rec = m_it.next();
    } else {
      done = true;
      // * add u and all subsequent updated IDs to master list
    }
  } else if (rec.getID() > u) {
    // u is new - doesn't occur in masterList
    // * add u to masterList (or probably to a separate list that you
    //   later append to masterList)

    if (u_it.hasNext()) {
      u = u_it.next();
    } else {
      done = true;
      // * remove rec and all remaining records from the master list
    }
  } else {
    // rec's ID matches u: proceed to next pair of items
    bool m_nx = m_it.hasNext(), u_nx = u_it.hasNext();
    if (m_nx && u_nx) {
      rec = m_it.next();
      u = u_it.next();
    } else if ((! m_nx) && (! u_nx)) {
      done = true;
    } else if (m_nx && (! u_nx)) {
      done = true;
      // * remove all subsequent records from the master list
    } else if ((! m_nx) && u_nx) {
      done = true;
      // * add all subsequent integers in updatedIDs to the master list
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T05:03:12.467

使用`HashSet`. 这会给你一个恒定的时间查找。但是，您的集合中的每个项目都应该是唯一的。那么您也可以将该数字用作哈希码，并且您可以进行`O(1)`查找，而在 List 中您有`O(n)`查找时间。

# python - 正确导入类

> ID：13151522
> 
> 赞同：0
> 
> 时间：2012-10-31T05:00:13.783
> 
> 标签：python

我有以下文件夹结构：

```
root
   folder1
       file1.py
       file2.py
   folder2
       file3.py 
```

如果我想导入它，导入`file1.py`会是什么样子`file3.py`？我尝试了不同的变体：、、、`from folder1.file1 import *`和类似的变体，不幸的是没有成功`from .folder1.file1 import *`。`from folder1 import file1`我需要在`__init__.py`某处创建文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:01:34.687

yes`__init__.py`应该出现在`root`,`folder1`和`folder2`

这些`__init__.py`文件是使 Python 将目录视为包含包所必需的，它们只是一个空文件

那么你可以做

```
from folder1 import file1 
```

如果一个包的`__init__.py`代码定义了一个名为 的列表，它被认为是遇到`__all__`时应该导入的模块名称的列表`from package import *`

# svn - 自动构建以从乌龟 SVN 获取最新信息？

> ID：13151523
> 
> 赞同：0
> 
> 时间：2012-10-31T05:00:18.833
> 
> 标签：svn, batch-file, tortoisesvn

## AutoBuild.bat

```
@echo off
echo Setting the directory.....
set LocalPath="C:\Appli.Net\CPAMEMO52"
set SVNPath="svn://servername/MT5_2/trunk/"
echo Getting the latest source code
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/"CPA memotech Suite" %LocalPath%\CPA52
echo Getting the latest SQL
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/Sql %LocalPath%\CPA52SQL
echo Getting the latest Templates
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/Templates %LocalPath%\CPA52Templates
echo Starting Build...
"C:\WINDOWS\Microsoft.NET\Framework\v3.5\Msbuild.exe" "C:\Appli.Net\CPAMEMO52\CPA52\CPA memotech Suite.sln"
pause 
```

我每天都在使用 Autobuild.bat 文件来获取文件并构建应用程序。
但问题是，如果本地文件修订号 SVN 存储库修订号不同，则它正在替换文件而不是合并或离开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:08:29.487

使用该`UPDATE`命令而不是每次`CHECKOUT`存储库时使用该命令可能是一个好主意。

`Checkout`仅用于第一次结帐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T05:25:30.060

```
@echo off
echo Setting the directory.....
set LocalPath="D:\Appli.Net\5.2"
set SVNPath="svn://servername/MT5_2/trunk/"

(dir /b /a "%LocalPath%" | findstr . ) > nul && (echo Getting the latest source code
"C:\Program Files\TortoiseSVN\bin\svn.exe" update %SVNPath%/"CPA memotech Suite" %LocalPath%\CPA52
echo Getting the latest SQL
"C:\Program Files\TortoiseSVN\bin\svn.exe" update %SVNPath%/Sql %LocalPath%\CPA52SQL
echo Getting the latest Templates
"C:\Program Files\TortoiseSVN\bin\svn.exe" update %SVNPath%/Templates %LocalPath%\CPA52Templates) || (echo Getting the latest source code
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/"CPA memotech Suite" %LocalPath%\CPA52
echo Getting the latest SQL
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/Sql %LocalPath%\CPA52SQL
echo Getting the latest Templates
"C:\Program Files\TortoiseSVN\bin\svn.exe" checkout %SVNPath%/Templates %LocalPath%\CPA52Templates)

echo Starting Build...
"C:\WINDOWS\Microsoft.NET\Framework\v3.5\Msbuild.exe" "D:\Appli.Net\5.2\CPA52\CPA memotech Suite.sln"
pause 
```

我正在使用批处理文件，如果其他情况像他第一次这样做那么它将结帐并且它已经存在然后它会更新

# java - Java示例中的双重调度

> ID：13151524
> 
> 赞同：2
> 
> 时间：2012-10-31T05:00:22.847
> 
> 标签：java, double-dispatch

[我正在阅读关于DD](http://en.wikipedia.org/wiki/Double_dispatch)的 Wikipedia 文章，然后跳到最后给出的[“Java 中的双重调度和示例”](http://www.javaperformancetuning.com/articles/ddispatch.shtml)链接。以下 Serializable 示例的描述对我来说似乎相当混乱：

```
A a = new A();
ObjectOutputStream oos = new ObjectOutputStream();
oos.writeObject( a); 
```

这是描述：

> 为了序列化A，`ObjectOutputStream`首先查看该方法是否`writeObject( ObjectOutputStream oos)`存在。如果是这样，那么它以自身作为参数调用该方法。然后该`writeObject`方法将调用分派回`ObjectOutputStream`（从而使其成为双重分派）。在进行这个非常简单的回调时，`ObjectOutputStream`他说：“我将把你的状态写入这个流的责任委托给你”。在做出这个简单的选择时，`ObjectOutputStream`它已经从我们的对象中解耦了`A`。对象`A`反过来说好的，这是我想写在流上的一些状态。如果该值是一个原始值，那么它可以通过 write 方法的重载来处理。如果没有，则可以在对象图中的下一个级别继续来回，直到所有有用的状态都已放置在流上。

我猜测描述可能会令人困惑，因为所描述的是幕后发生的事情，而不是呈现的代码，否则它似乎没有多大意义。以下是让我感到困惑的部分：

*   “`ObjectOutputStream`首先查看该方法是否`writeObject( ObjectOutputStream oos)`存在”。为什么`ObjectOutputStream`需要检查这个方法是否存在，因为它是它自己的方法？
*   “如果是这样，那么它会以自身作为参数调用该方法”。在我看来，它`writeObject`使用实例`A`作为参数调用。回到上一项，如果它是用 的实例调用的，为什么还要寻找`writeObject`带有 arg 的签名？`ObjectOutputStream``A`
*   “`writeObject`然后该方法将调用分派回`ObjectOutputStream`（从而使其成为双重分派）”。同样，该`writeObject`方法属于`ObjectOutputStream`该类，因此我看不到它是如何“派回的`ObjectOutputStream`”，因为那似乎是原始目的地。

我只是在这里遗漏了一些基本的东西，还是这是一个写得不好/描述得不好的例子？如果这是一个不好的例子，我想更改 Wikipedia 文章以指向更好的文章，因此请随时提供建议。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:08:18.150

按顺序回答您的问题：

1.  `ObjectOutputStream.writeObject(Object)`检查其参数（使用反射）以确定对象是否实现`writeObject(ObjectOutputStream)`. 也就是说，它或多或少地问对象，“你知道如何将你的结构写到一个? 中`ObjectOutputStream`？”

2.  如果答案是“是”，则`ObjectOutputStream`调用*对象的* `writeObject(ObjectOutputStream)`方法，将自身（`ObjectOutputStream`不是对象）作为参数传递。它基本上说，“好。把你的结构写给我。”

3.  对象中的实现`writeObject(ObjectOutputStream)`调用了`ObjectOutputStream`写入自身的元素。它不应该`oos.writeObject(this)`再次调用。

例如，假设我有一个像这样的对象：

```
class A {
    int x;
} 
```

如果我想让它自己写入一个`ObjectOutputStream`，我可以像这样扩展它：

```
class A implements Serializable {
    int x;
    private void writeObject(ObjectOutputStream stream) throws IOException {
        stream.writeInt(x);
    }
} 
```

然后这段代码：

```
A a = new A();
ObjectOutputStream oos = . . .;
oos.writeObject(a); 
```

将使用`writeObject`类中的方法`A`来写入`a`，而不是使用反射来写入 A 的所有（非瞬态）字段。（但是，在这种情况下，没有区别。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:14:54.603

从[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口的文档中：

> 在序列化和反序列化过程中需要特殊处理的类必须实现具有这些确切签名的特殊方法：
> 
> private void writeObject(java.io.ObjectOutputStream out) throws IOException private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException; private void readObjectNoData() 抛出 ObjectStreamException；

如果你想让你的类可序列化，实现接口就足够了。但是，如果你想让（类的）对象本身告诉输出流如何序列化它自己的状态，那么它应该实现这些方法。

# arrays - 将数组索引循环到屏幕会话中

> ID：13151527
> 
> 赞同：0
> 
> 时间：2012-10-31T05:00:28.070
> 
> 标签：arrays, bash, gnu-screen

```
#!/bin/bash

IFS=$'\n'
fortune_lines=($(fortune | fold -w 30))
Screen_Session=$"{mainscreen}"
Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff "`printf "say   ${fortune_lines[@]}\r"`")

for var in "${Screen_OneLiner[@]}"
  do
    echo -e "${var}"
done 
```

上面的脚本只打印出第 1 行之一

```
IFS=$'\n'
fortune_lines=($(fortune | fold -w 30)) 
```

而不是循环遍历“fortune_lines”的整个索引不知道如何使这项工作。有任何想法吗？

仅供参考，我只使用

```
echo -e 
```

对此脚本进行故障排除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:17:16.073

```
#!/bin/bash
#OLDIFS=$IFS
IFS=$'\r'
    fortune_lines=($(cat /etc/passwd | fold -w 30))
    #Screen_Session=$"{mainscreen}"
        Screen_Session=`screen -ls|grep "\."|grep "("|awk '{print $1}'`
    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff "`printf "say   ${fortune_lines[@]}\r"`")
#IFS=$OLDIFS;
    for var in "${Screen_OneLiner[@]}"
      do
        echo -e "${var}"
    done 
```

对我来说很好，我将 IFS 更改为 \r 并抽出 /etc/passwd 与 \n 一样，它只打印第一行

# infragistics - Infragistics Web 数据网格标题复选框事件问题

> ID：13151528
> 
> 赞同：2
> 
> 时间：2012-10-31T05:00:44.123
> 
> 标签：infragistics, webdatagrid

问题

我是基础设施的新手，我在我的页面中使用 webdatagrid。我的网格有一个复选框作为字段之一。标题字段也是一个复选框。

在标头复选框的服务器端事件中（我需要在服务器事件中没有客户端事件:)）。我需要绑定网格。

如果选中标题复选框，我只需要显示活动记录，如果未选中，我需要显示所有记录。

我正在标题复选框的服务器功能中实现此逻辑，并且在此事件中网格未绑定（即值未更改）。

我正在为这个修复工作一个多星期。请帮忙

请看下面的代码............

ASPX

```
<ig:WebDataGrid ID="WebDataGrid1" runat="server" EnableDataViewState="true" ViewStateMode="Enabled" Height="100%" Width="100%" AutoGenerateColumns="False" OnColumnSorted="WebDataGrid1_ColumnSorted" DataKeyFields="Id">
<Columns>
<ig:BoundDataField DataFieldName="Id" Hidden="True" Key="Id">
<Header Text="BoundColumn_0" />
</ig:BoundDataField>
<ig:BoundDataField DataFieldName="Name" Key="Name">
<Header Text="Name"></Header>
</ig:BoundDataField>
<ig:BoundDataField DataFieldName="ShortName" Key="ShortName">
<Header Text="ShortName"></Header>
</ig:BoundDataField>
<ig:BoundDataField DataFieldName="IsoCode" Key="IsoCode">
<Header Text="IsoCode"></Header>
</ig:BoundDataField>
<ig:TemplateDataField Key="IsActive" Header-Text="IsActive">
<HeaderTemplate>
<asp:CheckBox ID="chkChildIsActive" runat="server" Checked="true" 
Text="IsActive" AutoPostBack="True" 
oncheckedchanged="chkChildIsActive_CheckedChanged">
</asp:CheckBox>
</HeaderTemplate>
<ItemTemplate>
<asp:CheckBox ID="chkHIsActive" runat="server" Checked='<%# DataBinder.Eval(((Infragistics.Web.UI.TemplateContainer)Container).DataItem, "IsActive") %>'>
</asp:CheckBox>
</ItemTemplate>
<Header Text="IsActive" />
</ig:TemplateDataField>
</Columns>
<ClientEvents Click="WebDataGrid1_SingleClick" DoubleClick="WebDataGrid1_DoubleClick" />
<Behaviors>
<ig:Paging PageSize="15" QuickPages="9">
<PagerTemplate>
<uc1:CustomerPagerControl ID="CustomerPager" runat="server" />
</PagerTemplate>
</ig:Paging>
<ig:Sorting>
</ig:Sorting>
<ig:RowSelectors>
</ig:RowSelectors>
<ig:Selection RowSelectType="Single" CellClickAction="Row" CellSelectType="None">
</ig:Selection>
</Behaviors>
</ig:WebDataGrid> 
```

ASPX.cs

// 页面加载绑定数据到网格

```
protected void Page_Load(object sender, EventArgs e)

{
if (!IsPostBack)
{
List<Port> port = PortManager.PortListTestPaging(true);
WebDataGrid1.DataSource = port;
WebDataGrid1.DataBind();
}
}

//Checkbox Event

protected void chkChildIsActive_CheckedChanged(object sender, EventArgs e)
{

CheckBox chkChildIsActive = (CheckBox)sender;

List<Port> port = PortManager.PortListTestPaging(chkChildIsActive.Checked);

WebDataGrid1.DataSource = port;
WebDataGrid1.DataBind();

} 
```

我从 Infragistics 论坛尝试的修复：

1.  EnableDataViewState = false ：如果我们将此属性赋予网格，那么在复选框事件中，网格的所有数据都会被清除（并且不会触发复选框事件）。

2.  EnableDataViewState = true 和 WebDataGrid1.ClearDataSource(): 然后我在复选框事件“找到具有相同 ID 'xyz0_4' 的多个控件”时出现以下错误我已经通过以下链接进行修复但失败。http://www.infragistics.com/community/forums/p/65065/329361.aspx

3.  WebDataGrid1.Rows.Clear() & //WebDataGrid1.Columns.Clear() ：两者都不起作用。

4.  我想知道问题出在哪里，所以对带有按钮的按钮事件尝试了相同的代码，并且它起作用了。所以我认为我可能错误地给出了 webdatagrid 中的一些属性的一些问题。我已经完成了所有可能的工作。

谢谢，桑卡迪普五世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:39:45.713

最简单的解决方案是将重新绑定网格的逻辑从 CheckChanged 事件处理程序移动到 Page_PreRender 事件。为此，您需要存储是否触发了 CheckChanged 事件以及复选框的值在页面的私有变量中，然后在 PreRender 事件中检查它们。这应该与您在单击按钮时所做的相同。

# coordinates - 网格上的指南针方向

> ID：13151529
> 
> 赞同：0
> 
> 时间：2012-10-31T05:00:57.967
> 
> 标签：coordinates

我正在开发一个使用网格系统的游戏（想想棋盘）。棋盘上的每个图块都有一个位置（行/列）。还有一个方向的概念（N，E，S，W，NE，SE，NW，SW）。

给定两个位置，我正在计算 3 个方向的东西：

*   方向（N、E、S、W、NE、SW、NW、SW、NONE 或 null。Null 是指瓦片没有在一个方向上完全对齐）。
*   大方向（如果不是特定方向之一，则属于 NE、SE、NW、SW 大方向）。
*   最近的方向（如果有平局，则为空）。

例如， (0, 0) -> (4, 3) 有：

*   零方向
*   SE的总体方向
*   SE最近的方向

和 (0, 0) -> (4, 1) 有：

*   零方向
*   SE的总体方向
*   S的最近方向

该代码有效，但非常难看。我确信必须有一种更简洁的算法来设置值，并且重复次数要少得多。关于减少重复代码的方法有什么想法吗？

```
public final class Dimension
{
    private final int rowDistance;
    private final int columnDistance;
    private final Direction direction;
    private final Direction generalDirection;
    private final Direction closestDirection;

    public Dimension(final Location locationA,
                     final Location locationB)
    {
        if(locationA == null)
        {
            throw new IllegalArgumentException("locationA cannot be null");
        }

        if(locationB == null)
        {
            throw new IllegalArgumentException("locationB cannot be null");
        }

        rowDistance    = locationB.getRow()    - locationA.getRow();
        columnDistance = locationB.getColumn() - locationA.getColumn();

        // not moving at all
        if(rowDistance == 0 && columnDistance == 0)
        {
            direction        = Direction.NONE;
            generalDirection = Direction.NONE;
            closestDirection = Direction.NONE;
        }
        else
        {
            final int absoluteDifference;

            absoluteDifference = Math.abs(Math.abs(rowDistance) - Math.abs(columnDistance));

            // North Westish
            if(rowDistance <= 0 && columnDistance <= 0)
            {
                final int north;
                final int west;
                final int northWest;

                if(absoluteDifference == 0)
                {
                    direction        = Direction.NORTH_WEST;
                    generalDirection = Direction.NORTH_WEST;
                }
                else if(rowDistance == 0)
                {
                    direction        = Direction.WEST;
                    generalDirection = Direction.WEST;
                }
                else if(columnDistance == 0)
                {
                    direction        = Direction.NORTH;
                    generalDirection = Direction.NORTH;
                }
                else
                {
                    direction        = null;
                    generalDirection = Direction.NORTH_WEST;
                }

                north     = Math.abs(columnDistance);
                west      = Math.abs(rowDistance);
                northWest = Math.abs(
                               Math.abs(Math.max(rowDistance, columnDistance)) - 
                               Math.abs(Math.min(rowDistance, columnDistance)));

                if(northWest < west && northWest < north)
                {
                    closestDirection = Direction.NORTH_WEST;
                }
                else if(west < northWest && west < north)
                {
                    closestDirection = Direction.WEST;
                }
                else if(north < northWest && north < west)
                {
                    closestDirection = Direction.NORTH;
                }
                else
                {
                    closestDirection = null;
                }
            }
            // North Eastish
            else if(rowDistance <= 0 && columnDistance >= 0)
            {
                final int north;
                final int east;
                final int northEast;

                if(absoluteDifference == 0)
                {
                    direction        = Direction.NORTH_EAST;
                    generalDirection = Direction.NORTH_EAST;
                }
                else if(rowDistance == 0)
                {
                    direction        = Direction.EAST;
                    generalDirection = Direction.EAST;
                }
                else if(columnDistance == 0)
                {
                    direction        = Direction.NORTH;
                    generalDirection = Direction.NORTH;
                }
                else
                {
                    direction        = null;
                    generalDirection = Direction.NORTH_EAST;
                }

                north     = Math.abs(columnDistance);
                east      = Math.abs(rowDistance);
                northEast = Math.abs(
                               Math.abs(Math.max(rowDistance, columnDistance)) -             
                               Math.abs(Math.min(rowDistance, columnDistance)));

                if(northEast < east && northEast < north)
                {
                    closestDirection = Direction.NORTH_EAST;
                }
                else if(east < northEast && east < north)
                {
                    closestDirection = Direction.EAST;
                }
                else if(north < northEast && north < east)
                {
                    closestDirection = Direction.NORTH;
                }
                else
                {
                    closestDirection = null;
                }
            }
            // South Westish
            else if(rowDistance >= 0 && columnDistance <= 0)
            {
                final int south;
                final int west;
                final int southWest;

                if(absoluteDifference == 0)
                {
                    direction        = Direction.SOUTH_WEST;
                    generalDirection = Direction.SOUTH_WEST;
                }
                else if(rowDistance == 0)
                {
                    direction        = Direction.WEST;
                    generalDirection = Direction.WEST;
                }
                else if(columnDistance == 0)
                {
                    direction        = Direction.SOUTH;
                    generalDirection = Direction.SOUTH;
                }
                else
                {
                    direction        = null;
                    generalDirection = Direction.SOUTH_WEST;
                }

                south     = Math.abs(columnDistance);
                west      = Math.abs(rowDistance);
                southWest = Math.abs(
                               Math.abs(Math.max(rowDistance, columnDistance)) - 
                               Math.abs(Math.min(rowDistance, columnDistance)));

                if(southWest < west && southWest < south)
                {
                    closestDirection = Direction.SOUTH_WEST;
                }
                else if(west < southWest && west < south)
                {
                    closestDirection = Direction.WEST;
                }
                else if(south < southWest && south < west)
                {
                    closestDirection = Direction.SOUTH;
                }
                else
                {
                    closestDirection = null;
                }
            }
            // South Eastish
            else
            {
                final int south;
                final int east;
                final int southEast;

                if(absoluteDifference == 0)
                {
                    direction        = Direction.SOUTH_EAST;
                    generalDirection = Direction.SOUTH_EAST;
                }
                else if(rowDistance == 0)
                {
                    direction        = Direction.EAST;
                    generalDirection = Direction.EAST;
                }
                else if(columnDistance == 0)
                {
                    direction        = Direction.SOUTH;
                    generalDirection = Direction.SOUTH;
                }
                else
                {
                    direction = null;
                    generalDirection = Direction.SOUTH_EAST;                    
                }

                south     = Math.abs(columnDistance);
                east      = Math.abs(rowDistance);
                southEast = Math.abs(
                              Math.abs(Math.max(rowDistance, columnDistance)) - 
                              Math.abs(Math.min(rowDistance, columnDistance)));

                if(southEast < east && southEast < south)
                {
                    closestDirection = Direction.SOUTH_EAST;
                }
                else if(east < southEast && east < south)
                {
                    closestDirection = Direction.EAST;
                }
                else if(south < southEast && south < east)
                {
                    closestDirection = Direction.SOUTH;
                }
                else
                {
                    closestDirection = null;
                }
            }
        }
    }

    public int getRowDistance()
    {
        return (rowDistance);
    }

    public int getColumnDistance()
    {
        return (columnDistance);
    }

    public Direction getDirection()
    {
        return (direction);
    }

    public Direction getGeneralDirection()
    {        
        return (generalDirection);
    }

    public Direction getClosestDirection()
    {        
        return (closestDirection);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:09:53.103

我会像你一样计算距离，然后我会将正交距离传递给 Math.Atan2 以计算可以缩放 (int)Math.Round(H * 4 / Math.PI) 到 0- 范围内的航向 H 7 作为一个散列，从 N 开始通过罗盘点顺时针计数，假设您顺时针枚举，您可以直接将其投射到您的枚举中。

# wcf - MSMQ 的 WCF 服务侦听器 - 挂起的消息

> ID：13151531
> 
> 赞同：4
> 
> 时间：2012-10-31T05:01:42.127
> 
> 标签：wcf, msmq

我创建了一个 WCF 服务，它监听私有 MSMQ 的作业。我限制了我的服务，使其一次只能处理一项工作（maxConcurrentInstances = 1）。我遇到的问题是，当提交两条消息并通过计算机管理控制台检查队列时，它是空的。我希望有一条待处理的消息。当我提交三条消息时，我会在 MSMQ 中看到一条待处理的消息。从阅读 MSDN 来看，看起来 ServiceHost 正在内存中保存下一个作业，直到当前作业完成，但我找不到关闭它的方法，以便它不会将消息保存在内存中。有谁知道一种方法可以使 ServiceHost 不会将待处理的消息保存在内存中并将其留在队列中？谢谢！

```
 <configuration>
  <system.serviceModel>
    <services>
      <service
          name="MyService"
          behaviorConfiguration="DefaultServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/MyService/"/>
          </baseAddresses>
        </host>
        <endpoint 
                  address="net.msmq://localhost/private/MyService"
                  binding="netMsmqBinding" bindingConfiguration="MsmqBindingNoSecurity"
                  contract="IMyService" />
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="DefaultServiceBehavior">
          <serviceMetadata httpGetEnabled="True"/>
          <serviceThrottling 
            maxConcurrentCalls="1"
            maxConcurrentSessions="1"
            maxConcurrentInstances="1"
          />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <netMsmqBinding>
        <binding name="MsmqBindingNoSecurity"
             useActiveDirectory="false"
             exactlyOnce="false">
          <security mode="None">
            <transport
               msmqAuthenticationMode="None"/>
          </security>
        </binding>
      </netMsmqBinding>
    </bindings>

  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:14:26.633

我还注意到 netMsmqBinding 中的这种行为，据我所知，它无法从服务端寻址。

如果您不使用事务队列，这只是一个问题，您的服务中的故障可能会导致内存中的消息被永久删除。

如果您使用事务队列，即使消息已从入站队列中读取，它实际上仍在队列中（但它变得“不可见”）。如果此时您的服务出现故障，则消息将重新排队，然后在您恢复时进行处理。

如果您不能使用事务队列，那么解决此问题的唯一方法是从客户端执行此操作，这意味着在进行另一次调用之前检查消息是否已传输。这可以使用 System.Messaging 来完成，或者我假设您可以将其烘焙到自定义行为中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T16:09:16.540

如果您不能使用事务队列（例如，如果您正在使用 netMessagingBinding），您可以使用 ReceiveContext 属性进行更细粒度的控制。Juval Lowy 在他的书中很好地解释了这一点：

[http://books.google.co.uk/books?id=PvNrurEhmiEC&pg=PA500&lpg=PA500&dq=ReceiveContext&source=bl&ots=ChDvHuH_Jq&sig=XHhiz2ebmXuu0QNYcBYhtlN99p4&hl=en&sa=X&ei=XgYmUo3kHOOH0AW--oHoCg&ved=onepage&q=](http://books.google.co.uk/books?id=PvNrurEhmiEC&pg=PA500&lpg=PA500&dq=ReceiveContext&source=bl&ots=ChDvHuH_Jq&sig=XHhiz2ebmXuu0QNYcBYhtlN99p4&hl=en&sa=X&ei=XgYmUo3kHOOH0AW--oHoCg&ved=0CFsQ6AEwCTgK#v=onepage&q=ReceiveContext&f=false)

另请参阅此 MSDN 文章以了解它在 netMessagingBinding 场景中的具体用途（我知道这与您的问题没有直接关系，但主体仍然成立）

[http://msdn.microsoft.com/en-us/library/hh532034(VS.103).aspx](http://msdn.microsoft.com/en-us/library/hh532034(VS.103).aspx)

# php - php中的file_put_contents

> ID：13151533
> 
> 赞同：0
> 
> 时间：2012-10-31T05:01:52.720
> 
> 标签：php

我只是尝试使用它`file_put_contents`。代码是：

```
$file = 'list.txt';
$subject = "Mail Subject\n";
file_put_contents($file, $subject); 
```

但它没有放任何内容。`file_get_contents`正在工作。

**更新：问题解决了。我不确定。我刚刚将 chmod 更改为 777。但我有疑问。我正在检查日志错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:05:56.407

检查事项：

*   您的文件路径是相对的。因此，您的文件可能不在您认为的目录中。
*   检查您是否有权在包含文件的目录中创建文件，或者您是否有权覆盖现有文件。
*   最后，`file_put_contents`返回写入的字节数或错误时返回 false。将返回值保存到一个变量中，看看你得到了什么。

# android - 无法进行下一个活动

> ID：13151541
> 
> 赞同：0
> 
> 时间：2012-10-31T05:02:55.117
> 
> 标签：android, pdf

我正在创建一个应用程序来查看 pdf 文件。我在我的应用程序的主页上使用了 pdfviewer.jar，它会显示我存储在内部存储中的 pdf 文件，但是当我单击该项目时，应用程序崩溃了。

在我的 MainActivity.java

```
package com.example.pdf;

import java.io.File;
import java.io.FilenameFilter;

import net.sf.andpdf.pdfviewer.PdfViewerActivity;

import android.os.Bundle;
import android.os.Environment;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends ListActivity {

    String[] pdflist;
    File[] imagelist;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        File images = Environment.getExternalStorageDirectory();
        imagelist = images.listFiles(new FilenameFilter() {
            public boolean accept(File dir, String name) {
                return ((name.endsWith(".pdf")));
            }
        });
        pdflist = new String[imagelist.length];
        for (int i = 0; i < imagelist.length; i++) {
            pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, pdflist));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        String path = imagelist[(int) id].getAbsolutePath();
        openPdfIntent(path);
    }

    private void openPdfIntent(String path) {
        try {
            final Intent intent = new Intent(MainActivity.this,DefaultActivity.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

在我的 DefaultActivity.java

```
package com.example.pdf;

import android.os.Bundle;
import net.sf.andpdf.pdfviewer.PdfViewerActivity;

public class DefaultActivity extends PdfViewerActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }

    public int getPreviousPageImageResource() {
        return R.drawable.left_arrow;
    }

    public int getNextPageImageResource() {
        return R.drawable.right_arrow;
    }

    public int getZoomInImageResource() {
        return R.drawable.zoom_in;
    }

    public int getZoomOutImageResource() {
        return R.drawable.zoom_out;
    }

    public int getPdfPasswordLayoutResource() {
        return R.layout.pdf_file_password;
    }

    public int getPdfPageNumberResource() {
        return R.layout.dialog_pagenumber;
    }

    public int getPdfPasswordEditField() {
        return R.id.etPassword;
    }

    public int getPdfPasswordOkButton() {
        return R.id.btOK;
    }

    public int getPdfPasswordExitButton() {
        return R.id.btExit;
    }

    public int getPdfPageNumberEditField() {
        return R.id.pagenum_edit;
    }
} 
```

这是我的日志猫输出

```
10-31 12:57:30.580: E/AndroidRuntime(1163): FATAL EXCEPTION: main
10-31 12:57:30.580: E/AndroidRuntime(1163): java.lang.NoClassDefFoundError: com.example.pdf.DefaultActivity
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.example.pdf.MainActivity.openPdfIntent(MainActivity.java:50)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.example.pdf.MainActivity.onListItemClick(MainActivity.java:45)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3180)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.View.dispatchTouchEvent(View.java:5541)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.View.dispatchPointerEvent(View.java:5721)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:859)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.os.Looper.loop(Looper.java:137)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at android.app.ActivityThread.main(ActivityThread.java:4446)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at java.lang.reflect.Method.invokeNative(Native Method)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at java.lang.reflect.Method.invoke(Method.java:511)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-31 12:57:30.580: E/AndroidRuntime(1163):     at dalvik.system.NativeStart.main(Native Method) 
```

我检查了我是否在清单文件中声明了所有活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:14:18.573

这些是将您的 jar 文件应用到您的项目的步骤：-

1.  只需右键单击您的项目并选择属性
2.  转到java构建路径
3.  然后选择订单和出口标签
4.  检查标记（复选框）您的 pdfviewer.jar 并单击 OK...现在清理您的项目并运行...。

# android - 一项活动与另一项活动之间的延迟

> ID：13151546
> 
> 赞同：3
> 
> 时间：2012-10-31T05:03:40.877
> 
> 标签：android, listview, android-activity, delay

我在 Android 中开发了一个应用程序。其中包含如此多的数据（字符串）和图像。字符串数据来自`database`，图像来自`/res`文件夹。

在我的应用程序中，第一个活动显示书籍的类别。然后我选择其中任何一个，然后跳转到下一个活动，该活动显示所有书籍图像和所选类别的简要说明，这些所有数据都来自具有查询操作的数据库，并用`ArrayAdapter`. 这些正在工作并显示我想要的所有东西。

**但问题**是，当我从一项活动中单击类别时，显示第二项活动需要超过 1 分钟的时间（所选类别的详细信息）。所以，这里的用户被卡住了。这对我的应用程序不利。

那么有没有办法解决这些或任何想法来显示一个活动到第二个活动之间的活动加载过程？

提前致谢。

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T05:13:05.610

使用 AsyncTask 作为

```
public class My_Game_Task extends AsyncTask<String, Void, Void> {

        @Override
        protected void onPreExecute() {
            //put a preloder
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            find data from database

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            dismiss preloader
                            set adapter here
            super.onPostExecute(result);

        }

    } 
```

调用 oncreate 作为 new My_Game_Task().execute(); 这将立即显示下一个活动，并将显示一个预加载器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:05:09.693

首先，您在哪里测试应用程序。如果它在模拟器上，然后在实际设备上检查它，您就会知道实际发生了多少延迟。！我有类似的问题，它在模拟器上需要几分钟，但在实际设备上运行得非常好。显示只需 1 秒。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T08:00:24.723

试试这个，它会在执行任何其他操作之前延迟一秒钟，

```
 try {
    Thread.sleep(1000);
      } catch (InterruptedException e)
      {
    e.printStackTrace();
       } 
```

# java - SSL 握手过程

> ID：13151549
> 
> 赞同：0
> 
> 时间：2012-10-31T05:04:03.793
> 
> 标签：java, security, encryption, ssl

我开始了解安全性并阅读有关 SSL 握手场景的信息。在这篇[文章](https://stackoverflow.com/questions/3936071/how-does-browser-generate-symmetric-key-during-ssl-handshake)中，回复者提到对称密钥是在浏览器上生成的，使用服务器的公钥加密并发送到服务器。

但是，在其他文章中，他们提到生成并发送了一个 pre-master secret 来代替计算对称密钥。

我可以知道哪个是正确的解释，以及这个 pre-master secret 是如何生成并用于生成对称密钥的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:03:51.570

您链接到的帖子中的描述只是对协议的简化解释。

客户端生成预主密钥，并在握手过程中使用服务器的公钥对其进行加密。然后双方根据[RFC 6101](https://www.rfc-editor.org/rfc/rfc6101#section-6.2.1)中的方法导出对称密钥材料，包括 IV 和 MAC 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T07:37:11.393

下面是一篇描述 SSL/TLS 握手的优秀文章的链接（包括客户端和服务器都使用 pre-master secret 生成 master secret，用于生成一组用于 MAC 和加密的会话密钥):

[HTTPS 连接的最初几毫秒](http://www.moserware.com/2009/06/first-few-milliseconds-of-https.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:14:16.993

说浏览器生成对称密钥只是一种简化（至少比说加密是用证书完成的要好）。您可能对 Security.SE 上的[这个答案感兴趣，以了解更多详细信息：](https://security.stackexchange.com/a/19555/2435)

然后密码套件确定这些对称密钥最终如何共享。SSL/TLS 握手的直接目的是在客户端和服务器之间建立一个共享的*pre-master secret 。*这被更广泛地称为[密钥交换（参见 RFC 4346 附录 F.1.1，也许还有第 7.4.7 节）](https://www.rfc-editor.org/rfc/rfc4346#appendix-F.1.1)。

这分为两类（不包括匿名密钥交换）：

*   RSA 密钥交换（例如`TLS_RSA_WITH_AES_128_CBC_SHA`）：客户端使用服务器的公钥（在证书中找到）加密预主密钥。
*   DH(E) 密钥交换（例如`TLS_DHE_RSA_WITH_AES_256_CBC_SHA`）：发生 Diffie-Hellman 密钥交换。服务器对其 DH 参数进行签名，客户端根据服务器证书中的公钥验证签名。（拥有基于 RSA 的证书并不意味着 RSA 密钥交换。）

在握手结束时，无论使用这两个步骤中的哪一个，客户端和服务器都拥有一个共同的*pre-master secret*，它们从中派生一个*主密钥*（参见[RFC 4346 第 8.1 节](https://www.rfc-editor.org/rfc/rfc4346#section-8.1)）。

[如RFC 4346 第 6.3 节](https://www.rfc-editor.org/rfc/rfc4346#section-6.3)中所述，双方都可以从该*主密钥*导出加密密钥（和 MAC 密钥） 。

# ios - iOS 6 AVAudioSession 问题

> ID：13151550
> 
> 赞同：3
> 
> 时间：2012-10-31T05:04:05.487
> 
> 标签：ios, avaudiosession

在我的应用程序中，我使 [audioSession setCategory:AVAudioSessionCategoryPlayback] 在后台播放音频，并在我的应用程序中播放歌曲时静音其他音频播放。我正在使用 AVPlayer 播放音频，并且我有 UIWebView 用于在同一应用程序中播放视频。当我使用 AVPlayer 播放 web 视图中的视频和音频时，就会出现问题。在这种情况下，音乐混合在一起。在 iOS 6 之前，当我恢复相同的情况时，一个音频会自动暂停并且不会发生混音。所以请提出一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:20:55.307

尝试设置

> 所需的背景模式 -> 应用播放音频

在 Info.plist 中。

# sencha-touch - Sencha Touch 2.0 List Paging 插件在一个列表上工作，但不是另一个

> ID：13151556
> 
> 赞同：0
> 
> 时间：2012-10-31T05:04:49.313
> 
> 标签：sencha-touch, extjs

我在 2 个单独的选项卡中有两个列表，都连接到服务器端数据库。我正在尝试设置列表分页，并在其中一个列表上完全按照应有的方式运行。对于另一个列表，模型和商店具有与正确分页的列表相同的所有设置，但没有“加载更多...”文本显示在此列表的底部。

关于列表分页插件，两个列表基本上完全相同（即商店、模型、“列表”视图），但其中一个列表不起作用。有谁知道可能是什么原因造成的？

编辑更多信息：

我正在使用 Chrome 进行开发。看着网络，我似乎得到了看起来正确的 JSON，对于那个不工作的它返回 8 条记录，返回的总属性是 13（这是有道理的，因为我的页面大小设置为 8）。

**列表中的商店不起作用**

```
 Ext.define("IdeaBank.store.SharedProblems", {
extend: "Ext.data.Store",
required: "IdeaBank.model.SharedProblem",
config: {
    model: "IdeaBank.model.SharedProblem",
    clearOnPageLoad: false,
    pageSize: 8,
    proxy: {
        type: 'ajax',
        api: {
            create:      "http://mywebsite.com/submitProblem.php?action=create",
            read: "http://mywebsite.com/submitProblem.php?action=read",
            update: "http://mywebsite.com/submitProblem.php?action=update",
            destroy: "http://mywebsite.com/submitProblem.php?action=delete",
        },
        reader: {
            type: 'json',
            rootProperty: "problems",
            totalProperty: "total",
        }
    },
    autoLoad: true
}
 }); 
```

**确实有效的列表中的商店**

```
Ext.define("IdeaBank.store.SharedSolutions", {
extend: "Ext.data.Store",
required: "IdeaBank.model.SharedSolution",
config: {
    model: "IdeaBank.model.SharedSolution",
    clearOnPageLoad: false,
    proxy: {
        type: 'ajax',
        api: {
            create: "http://mywebsite.com/submitSolution.php?action=create",
            read: "http://mywebsite.com/submitSolution.php?action=read",
            update: "http://mywebsite.com/submitSolution.php?action=update",
            destroy: "http://mywebsite.com/submitSolution.php?action=delete",
        },
        reader: {
            type: 'json',
            rootProperty: "solutions",
            totalProperty: "total",
        }
    },
    pageSize: 8,
    autoLoad: true
}
}); 
```

**来自不起作用的列表视图**

```
Ext.define("IdeaBank.view.SharedProblemsList", {
extend: 'Ext.dataview.List',
alias: 'widget.sharedproblemslist',
requires: ['Ext.plugin.ListPaging'],
config: {
    autoLoad: true,
    plugins: [
        {
            xclass: 'Ext.plugin.ListPaging',
            autoPaging: true

        }
    ],
    loadingText: "Loading...",
    emptyText: [
                "</pre><div class='notes-list-empty-text'  style = 'padding: 2em;'>",
                "<p>There are no problems listed for the category you have selected.</p>",
                "</div><pre>"
                ].join(""),
    onItemDisclosure: true,
    itemTpl: [
            "</pre>",
                "<div class = 'list-item-title'><span style = 'margin-right: 5px; color: #25E014; font-size: 0.7em;'>{rating}</span> {problem}</div>",
            "<pre>"
            ].join(""),
}

}); 
```

**来自有效的列表视图**

```
Ext.define("IdeaBank.view.SharedSolutionsList", {
extend: 'Ext.dataview.List',
alias: 'widget.sharedsolutionslist',
requires: ['Ext.plugin.ListPaging'],
config: {
    autoLoad: true,
    plugins: [
        {
            xclass: 'Ext.plugin.ListPaging',
            autoPaging: true
        }
    ],
    loadingText: "Loading...",
    emptyText: [
                "</pre><div class='notes-list-empty-text'  style = 'padding: 2em;'>",
                "<p>There are no published solutions for the category you have selected.<p>",
                "</div><pre>"
                ].join(""),
    onItemDisclosure: true,
    itemTpl: [
            "</pre>",
                "<div class = 'list-item-title'><span style = 'margin-right: 5px; color: #25E014; font-size: 0.7em;'>{rating}</span> {title}</div>",
            "<pre>"
            ].join(""),
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:07:15.170

确保在服务器端代码中实现分页逻辑。您必须提供逐页发送的功能。也许“submitSolution.php”没有部分发送数据。

# clojure - Clojure ring wrap-json-params 弄乱了 JSON 数组

> ID：13151561
> 
> 赞同：6
> 
> 时间：2012-10-31T05:05:40.340
> 
> 标签：clojure, compojure, ring

我目前正在 clojure 中做一些 REST API 的工作，我正在使用带有 compojure 的 ring.middleware.format 库将 JSON 转换为 clojure 数据结构和从 clojure 数据结构转换。

我遇到了一个大问题，因为发布到 ring 应用程序的 JSON 将所有数组替换为数组中的第一个项目。IE 它将把这个 JSON 从

```
{
    "buyer":"Test Name",
    "items":[
        {"qty":1,"size":"S","product":"Red T-Shirt"},
        {"qty":1,"size":"M","product":"Green T-Shirt"}
    ],
    "address":"123 Fake St",
    "shipping":"express"
} 
```

对此

```
{
    "buyer": "Test Name",
    "items": {
        "qty": 1,
        "size": "M",
        "product": "Green T-Shirt"
    },
    "address": "123 Fake St",
    "shipping": "express"
} 
```

它适用于任何数组，包括当数组是根元素时。

我在 clojure 中使用以下代码返回 json：

```
(defroutes app-routes
  (GET "/"
       []
       {:body test-data})
  (POST "/"
        {data :params}
        {:body data}))
        ;{:body (str "Printing " (count (data :jobs)) " jobs")}))

(def app
  (-> (handler/api app-routes)
      (wrap-json-params)
      (wrap-json-response))) 
```

GET 路由对数组和正确输出没有问题，因此它必须是我获取数据的方式或`wrap-restful-params`中间件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:14:24.880

我对 ring-json-params 有类似的问题。所以我最终使用了原始请求正文并自己解析了 JSON 字符串。

我使用了以下代码：

```
(defroutes app-routes
(POST "/"
    {params :body}
    (slurp params))) 
```

我使用 clj-json.core 库来解析 JSON。

希望这可以帮助。如果您找到更好的方法，请分享。我是 Clojure/Compojure 新手！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-18T23:06:39.650

我最近遇到了这个问题，实际上发现了问题所在：你的`wrap-nested-params`中间件在你的中间件之后被评估`wrap-json-params`，这导致存储在 JSON 数组/Clojure 向量中的对象通过抓取其中包含的第一个元素来展平。

```
user=> bod-map
{:address "100 Bush Street", :contacts [{:name "Dudely Mcdooderson", :title "engineer", :tax_id "555"}], :name "Dudely Inc.", :tax_id "5234234"}
user=> (ring.middleware.nested-params/nested-params-request {:params bod-map})
{:params {"tax_id" "5234234", "name" "Dudely Inc.", "contacts" {:name "Dudely Mcdooderson", :title "engineer", :tax_id "555"}, "address" "100 Bush Street"}} 
```

您可以通过确保在中间件排序中首先评估 wrap-nested-params 来解决此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T20:38:39.480

我知道已经有一段时间了，但我确实偶然发现了同样的问题。我让它工作的唯一方法是`ring.middleware.format/wrap-restful-format` **在**`compojure.handler/api`. 我不知道为什么会这样，但如果我把`compujure.handler/api`包装器放在第一位，它会弄乱数组参数

# java - 线性化数值序列的数学方程

> ID：13151564
> 
> 赞同：0
> 
> 时间：2012-10-31T05:05:50.713
> 
> 标签：java, math, linearization

我正在寻找一个数学公式（或逻辑/java编程方法，但最好是原始数学），它将采用给定的、唯一的、一系列数字并将它们线性化。

例如：`1,2,4,7,10 ==> 0,1,2,3,4`。

*   `{0=1,1=2,2=4,3=7,4=10}, 10,2,7,4,1 ==> 4,1,3,2,0`线性化顺序必须表示从最小到最大，以便使用与原始值具有相同关联的相同示例数字。
*   数字的范围是范围内的常数，`[n,m]`并且会有`c`数字。
*   `n`并且`m`可以是任何大于 0 的正数，但是`m>n`. 和`m-n != c`。

这与 java 一起使用，以获取与构造函数关联的唯一 ID 字符串并将它们排序为 0、1、2、3、4，以便可以将它们分配到排序数组中，而无需实际排序，只需派生它们的基数和执行错误检查以避免两次填充元素或留下空白。

这被用来提供关于这些唯一数字在 size 数组中的位置的“最佳猜测” `n`。在这样做时，我希望实现一种更强大的排序算法，该算法可以在很短的时间内处理，因为它实际上不需要多次遍历数组（最大值和最小值在最初填充数组时确定）。

根据要求，附加输入/输出：

```
int n=1350,m=1500,c=5;
/**
* Note that the items in output are the results,
*respective to element, of the mathematical 
*function applied against the elements of input.
**/
int[] input = {1350,1500,1365,1450,1490};
...some f(input[x]) happens here...
int[] output= {0   ,4   ,1   ,2   ,3   }; 
```

当然，我知道您需要 5 个以上的元素才能以任何准确度来确定该项目的位置，但是在制作副本之前四舍五入结合检查元素是否为空仍然比对整个元素进行排序更快通过比较排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:11:34.663

我会研究一个好的线性回归算法。

这有一些示例的链接，只需将所有权重设置为 1：

> [Java中的加权线性回归](https://stackoverflow.com/questions/5684282/weighted-linear-regression-in-java)

或者这里有更多代码

> [http://introcs.cs.princeton.edu/java/97data/LinearRegression.java.html](http://introcs.cs.princeton.edu/java/97data/LinearRegression.java.html)

只需将独立值插入 x 并将依赖值插入 y 和瞧！

如果您在将数据解释为线性形式时遇到任何问题，y=mx+b：

> [http://en.wikipedia.org/wiki/Simple_linear_regression](http://en.wikipedia.org/wiki/Simple_linear_regression)

# postgresql - 无法在 PostgreSQL 中更新视图？

> ID：13151566
> 
> 赞同：11
> 
> 时间：2012-10-31T05:06:03.857
> 
> 标签：postgresql, sql-update, sql-view

我的网站是使用在 Ubuntu 11.10 上的 Postgresql 8.3 服务器上运行的 Drupal 6 开发的。还有 webmin 版本 1.590。

现在我想更新表中的记录，但是当我运行时：

```
UPDATE uac_institution_view SET status = '2' WHERE nid = '9950' 
```

它给了我一个错误，例如：

> 执行 SQL 失败：SQL UPDATE uac_institution_view SET status = '2' WHERE nid = '9950' 失败：错误：无法更新视图 提示：您需要一个无条件的 ON UPDATE DO INSTEAD 规则。

问题是只有`SELECT`查询有效。`UPDATE`，`INSERT`并且`DELETE`命令不起作用；他们因上述错误而失败。

这是权限问题吗？语法错误？还有什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-31T05:14:54.477

默认情况下，PostgreSQL 视图不可更新。您必须告诉 PostgreSQL 您希望如何更新视图。

使用“无条件`ON UPDATE DO INSTEAD`规则”（如您粘贴的错误消息所述）或最好在 PostgreSQL 9.1 及更高版本上使用视图触发器执行此操作。[我在对您之前的帖子的回答中](https://stackoverflow.com/a/13151381/398670)提供了所有这些内容的链接，但这里有更多信息：

*   [PostgreSQL 9.1 中使用`INSTEAD OF`触发器的可更新视图](http://vibhorkumar.wordpress.com/2011/10/28/instead-of-trigger/)
*   [可更新的视图（对于 Pg 9.0 及以下使用规则）](http://wiki.dandascalescu.com/howtos/how_to_update_postgresql_views)
*   [`CREATE TRIGGER`](http://www.postgresql.org/docs/current/interactive/sql-createtrigger.html)
*   [`CREATE VIEW`](http://www.postgresql.org/docs/current/interactive/sql-createview.html)
*   [规则与触发器](http://www.postgresql.org/docs/current/interactive/rules-triggers.html)
*   [规则](http://www.postgresql.org/docs/current/interactive/rules.html)
*   [PL/pgSQL 中的触发器](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)

在许多情况下，最好将视图保留为只读并仅更新基础表。由于您没有提供视图的定义，因此很难说这实际上会涉及什么。`\d uac_institution_view`使用运行的输出更新您的问题`psql`并评论说您已经这样做了；也许我可以指出一种直接在基础表上运行更新的方法。

您使用的是非常过时的 PostgreSQL (8.3) 版本，因此您不能使用首选`INSTEAD OF`触发器方法，您必须使用规则或直接更新基础表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-19T22:09:13.463

仅供参考，在发布涉及规则/触发器的答案后，PostgreSQL 9.3 推出了自动更新视图。9.3 版在 2013 年 6 月 27 日处于 beta 2 中，所以它还不是 GA。

这是一个示例：[https ://web.archive.org/web/20160322164044/http://michael.otacoo.com/postgresql-2/postgres-9-3-feature-highlight-auto-updatable-views/](https://web.archive.org/web/20160322164044/http://michael.otacoo.com/postgresql-2/postgres-9-3-feature-highlight-auto-updatable-views/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-03T04:23:52.893

我在 postgres 9.5 上，默认情况下视图是可更新的。例子 ：

```
CREATE TABLE UP_DATE (id number, name varchar2(29));
insert into up_date values(1, 'Foo');
select * from up_date;
CREATE OR REPLACE VIEW UPDATE
AS
Select 
name from up_date;
select * from update;
insert into update values('Bar');
select * from update; 
```

将推出 Foo 和 Bar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T23:10:54.127

正如 Jeff French 所指出的，一切都从 PG 9.3 开始工作......除了一些例外（下面的更多信息）。

## 简单的例子

您可以在 PostgreSQL 上测试此代码。完成后使用级联删除（使用表格删除视图）。

```
-- create table
--DROP TABLE user_table CASCADE;
CREATE TABLE user_table (
    id serial,
    lastname varchar(100),
    user_type varchar(2) DEFAULT 'nn',
    PRIMARY KEY (id)
);
-- initial data
INSERT INTO user_table(lastname) VALUES('Foo');
SELECT * FROM user_table;

-- simple view (note, no id here)
CREATE OR REPLACE VIEW user_view
AS
    SELECT lastname, user_type 
    FROM user_table
;

-- check view (will have initial data)
SELECT * FROM user_view;

-- insert into user_table via view
INSERT INTO user_view VALUES('Bar');
-- check (both will have both records)
SELECT * FROM user_view;
SELECT * FROM user_table;
-- you can run above many times
-- (id will auto-increment even though it is not in the view)

-- update user_table via view
UPDATE user_view SET user_type='v' WHERE lastname = 'Bar';
SELECT * FROM user_table; 
```

## 限制

不过有一些限制，这取决于你的 PG 版本。

*   在[PG 9.3 视图](https://www.postgresql.org/docs/9.3/sql-createview.html)中不能有任何表达式等。也只允许一个表......所以或多或少是一个简单的选择限制、重新排序或重命名列。
*   在[PG 9.4 中，视图](https://www.postgresql.org/docs/9.4/sql-createview.html#SQL-CREATEVIEW-UPDATABLE-VIEWS)可以部分更新。所以你可以有表达，但你不能更新它们（至少不是开箱即用的）。

如果你有`WHERE`你的观点，那么你可能会得到一些奇怪的结果。所以这仍然适用于插入：

```
CREATE OR REPLACE VIEW user_view
AS
    SELECT lastname as last_name, user_type
    FROM user_table
    WHERE user_type = 'v'
;
INSERT INTO user_view VALUES('Bar'); 
```

但更新可能不起作用。至少这不起作用，因为它将更新 0 行：

```
UPDATE user_view SET user_type='v'; 
```

因为实际上这将等同于以下查询（如果您考虑一下，这很有意义）：

```
UPDATE user_view SET user_type='v' WHERE user_type = 'v'; 
```

我想知道他们是否会在某个时候支持联接...但是在撰写本文时，PG 14 已经发布，并且它不支持在视图中加入表格（我的意思是更新）。

## 备择方案

您仍然可以使用`INSTEAD OF`触发器，尤其是对于更复杂的视图。而且您可以使用规则...但是（如[CREATE RULE 文档](https://www.postgresql.org/docs/14/sql-createrule.html)中所述）自动更新的视图将比手动创建的规则更快。

# php - 我如何分开这些部分？（刮，但应该是简单的循环/foreach）

> ID：13151567
> 
> 赞同：0
> 
> 时间：2012-10-31T05:06:21.473
> 
> 标签：php, html, loops, simple-html-dom, scrape

我正在使用 SIMPLE HTML DOM 来抓取网站，并且得到以下代码...

**$GameSummary**

```
<dl class="ismSummary ismHomeSummary">
    <dt>Goals scored</dt>
    <dd><a class="ismViewProfile" href="#438">Gallas</a></dd>
    <dd><a class="ismViewProfile" href="#458">Defoe</a></dd>
    <dt>Assists</dt>
    <dd><a class="ismViewProfile" href="#443">Vertonghen</a></dd>
    <dd><a class="ismViewProfile" href="#447">Lennon</a></dd>
    <dt>Yellow cards</dt>
    <dd><a class="ismViewProfile" href="#438">Gallas</a></dd>
    <dd><a class="ismViewProfile" href="#439">Walker</a></dd>
    <dd><a class="ismViewProfile" href="#450">Huddlestone</a></dd>
    <dt>Saves</dt>
    <dd><a class="ismViewProfile" href="#433">Friedel</a> (3)</dd>
</dl> 
```

我正在尝试将每个部分剪切为其特定部分...我正在尝试按以下顺序获取以下信息...

```
Heading1: Goals Scored
  Entry: Gallas
  Entry: Defoe
Heading2: Assists
  Entry: Vertongen
  Entry: Lennon
etc.... 
```

这是我可以获取标题的代码...

```
foreach ($GameSummary->find('dt') as $HeadingType)
  {
  echo $HeadingType;
  } 
```

给我所有标题...并获取每个标题的内容..

```
foreach ($GameSummary->find('dd') as $PlayerNames)
  {
  echo $PlayerNames;
  } 
```

* * *

我想知道的是......我如何将这些分成不同的组？我可以分别获取所有标题和所有内容，但我不知道如何获取它，以便每个标题都包含其内容。

有什么想法吗？这应该很容易，但我的大脑无法弄清楚。

谢谢！

示例：http: [//fantasypl.com/results.php](http://fantasypl.com/results.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:43:04.463

大致应该是：

```
 $i=1;
   foreach ($GameSummary->find('dl')->children() as $element)
    {
       if ($element->tag == "dt")  { echo "Heading$i: $element"; $i++; }
       if ($element->tag == "dd") echo "Entry: $element";

    } 
```

[编辑] 实际工作代码，来自以下评论：

```
 foreach ($GameSummary->children() as $test) 
     { 

        if ($test->tag == "dt") { echo "Heading$i: ".$test->innertext."<br>"; $i++;} 
        if ($test->tag == "dd") { echo "Player: ".$test->innertext."<br>";} 
      } 
```

# c - 为什么这个野牛代码会产生意外的输出？

> ID：13151570
> 
> 赞同：2
> 
> 时间：2012-10-31T05:06:54.150
> 
> 标签：c, bison, flex-lexer

弹性代码：

```
 1 %option noyywrap nodefault yylineno case-insensitive
  2 %{
  3 #include "stdio.h"
  4 #include "tp.tab.h"
  5 %}
  6 
  7 %%
  8 "{"             {return '{';}
  9 "}"             {return '}';}
 10 ";"             {return ';';}
 11 "create"        {return CREATE;}
 12 "cmd"           {return CMD;}
 13 "int"           {yylval.intval = 20;return INT;}
 14 [a-zA-Z]+       {yylval.strval = yytext;printf("id:%s\n" , yylval.strval);return ID;}
 15 [ \t\n]
 16 <<EOF>>         {return 0;}
 17 .               {printf("mistery char\n");}
 18 
```

野牛代码：

```
 1 %{
  2 #include "stdlib.h"
  3 #include "stdio.h"
  4 #include "stdarg.h"
  5 void yyerror(char *s, ...);
  6 #define YYDEBUG 1
  7 int yydebug = 1;
  8 %}
  9 
 10 %union{
 11     char *strval;
 12     int intval;
 13 }
 14 
 15 %token <strval> ID
 16 %token <intval> INT
 17 %token CREATE
 18 %token CMD
 19 
 20 %type <strval> col_definition
 21 %type <intval> create_type
 22 %start stmt_list
 23 
 24 %%
 25 stmt_list:stmt ';'
 26 | stmt_list stmt ';'
 27 ;
 28 
 29 stmt:create_cmd_stmt         {/*printf("create cmd\n");*/}
 30 ;
 31 
 32 create_cmd_stmt:CREATE CMD ID'{'create_col_list'}'    {printf("%s\n" , $3);}
 33 ;
 34 create_col_list:col_definition
 35 | create_col_list col_definition
 36 ;
 37 
 38 col_definition:create_type ID ';' {printf("%d , %s\n" , $1, $2);}
 39 ;
 40 
 41 create_type:INT {$$ = $1;}
 42 ;
 43 
 44 %%
 45 extern FILE *yyin;
 46 
 47 void
 48 yyerror(char *s, ...)
 49 {
 50     extern yylineno;
 51     va_list ap;
 52     va_start(ap, s);
 53     fprintf(stderr, "%d: error: ", yylineno);
 54     vfprintf(stderr, s, ap);
 55     fprintf(stderr, "\n");
 56 }
 57 
 58 int main(int argc , char *argv[])
 59 {
 60     yyin = fopen(argv[1] , "r");
 61     if(!yyin){
 62         printf("open file %s failed\n" ,argv[1]);
 63         return -1;
 64     }
 65 
 66     if(!yyparse()){
 67         printf("parse work!\n");
 68     }else{
 69         printf("parse failed!\n");
 70     }
 71 
 72     fclose(yyin);
 73     return 0;
 74 }
 75 
```

测试输入文件：

```
create cmd keeplive
{
    int a;
    int b;
}; 
```

测试输出：

```
root@VM-Ubuntu203001:~/test/tpp# ./a.out t1.tp 
id:keeplive
id:a
20 , a;
id:b
20 , b;
keeplive
{
    int a;
    int b;
}
parse work! 
```

我有两个问题：

1) 为什么第 38 行的操作会打印标记 ';'？例如，“20 , a;” 和“20, b;”

2) 为什么第 32 行的操作打印“keeplive { int a; int b; }”而不是简单的“keeplive”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T20:13:26.343

简短的回答：

```
yylval.strval = yytext; 
```

你不能这样用`yytext`。它指向的字符串是词法分析器私有的，并且会在 flex 操作完成后立即更改。您需要执行以下操作：

```
yylval.strval = strdup(yytext); 
```

然后你需要确保你之后释放内存。

* * *

更长的答案：

`yytext`实际上是指向包含输入的缓冲区的指针。为了使 yytext 像 NUL 终止的字符串一样工作，`flex`框架在执行操作之前用 a 覆盖标记后面的字符`NUL`，然后在操作终止时替换原始字符。所以`strdup`在动作内部可以正常工作，但在动作外部（在您的野牛代码中），您现在有一个指向以令牌开头的缓冲区部分的指针。后来情况变得更糟，因为`flex`会将源的下一部分读入同一个缓冲区，现在您的指针指向随机垃圾。有几种可能的情况，具体取决于`flex`选项，但没有一个是漂亮的。

所以黄金法则：`yytext`只在动作结束之前有效。如果您想保留它，请将其复制，然后确保在不再需要时为该副本释放存储空间。

在我编写的几乎所有词法分析器中，ID 令牌实际上在符号表中找到标识符（或将其放在那里）并返回指向符号表的指针，这简化了内存管理。但是你仍然有本质上相同的内存管理问题，例如，字符串文字。

# actionscript-3 - Flash 和 ActionScript 3：根据光标的 x 轴位置更改帧

> ID：13151576
> 
> 赞同：0
> 
> 时间：2012-10-31T05:07:31.017
> 
> 标签：actionscript-3, flash, actionscript, flash-cs6

如果你导航到[这个 Flash 网站](http://www.au.movie.tintin.com/main/)上的画廊页面，你可以看到丁丁按照我的描述进行操作。我用谷歌搜索了几次，但没有找到任何东西。非常感谢任何帮助，谢谢！

编辑：虽然，只是改变符号的位置而不是当前帧也可以。无论哪种方式，我只想知道如何执行链接显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:36:54.230

使用线性函数计算给定开始和结束比例的所有点。在此示例中，动画剪辑`myMc`将根据给定这两个对的光标更改其 x 位置：在`mouseX = 0`它将为 100 像素，在`mouseY = stage.stageWidth`它将为 300 像素。请记住，这是一个线性函数，因此比例继续超出给定限制！

```
function onEnterFrame(e:Event){
    myMc.x = solveLinearFunction(0, 100, this.stage.stageWidth, 300, this.stage.mouseX);
}
function solveLinearFunction(x1:Number, y1:Number, x2:Number, y2:Number, xx:Number):Number{
    //linear f(x) = mx + b;
    var mypos:Number = (y1 - y2) / (x1 - x2);
    var bypos:Number = y1 - (mypos * x1);
    return mypos * xx + bypos;
}
this.addEventListener(Event.ENTER_FRAME, onEnterFrame); 
```

以下是有关线性函数的更多信息，它们非常方便制作滚动条和视差滚动效果：[http ://earthmath.kennesaw.edu/main_site/review_topics/linear_functions.htm](http://earthmath.kennesaw.edu/main_site/review_topics/linear_functions.htm)

# css - CSS浮动而不移动其他浮动

> ID：13151585
> 
> 赞同：1
> 
> 时间：2012-10-31T05:08:23.963
> 
> 标签：css, css-float

我想将 5 张图片并排放置；在其中任何一个悬停时，我希望悬停在图像上的图像宽度增加，而不会将其旁边的图像推离它。我希望一切都保持原位，但图片被悬停在上面以增大尺寸。我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:13:38.887

***[现场演示](http://tinkerbin.com/C0GECjNF)***

嗨，现在习惯了这个没有浮动的 CSS

**CSS**

```
.parent{
border:solid 1px red;
  width:100px;
  white-space:nowrap;
  font-size:0;
}
.parent img{
border:solid 1px black;
  vertical-align:top;
} 
```

**HTML**

```
<div class="parent">
<img src="http://www.gravatar.com/avatar/8193632933d351ea68ec1eae12f82057?s=32&d=identicon&r=PG">
<img src="http://www.gravatar.com/avatar/8193632933d351ea68ec1eae12f82057?s=32&d=identicon&r=PG">
  <img src="http://www.gravatar.com/avatar/8193632933d351ea68ec1eae12f82057?s=32&d=identicon&r=PG">
    <img src="http://www.gravatar.com/avatar/8193632933d351ea68ec1eae12f82057?s=32&d=identicon&r=PG">
      <img src="http://www.gravatar.com/avatar/8193632933d351ea68ec1eae12f82057?s=32&d=identicon&r=PG">
</div> 
```

***[现场演示](http://tinkerbin.com/C0GECjNF)***

## ---------------

* * *

***[更新的演示](http://tinkerbin.com/Sj7IpB2v)***

# php - 在javascript中安全地存储连接凭据？

> ID：13151587
> 
> 赞同：0
> 
> 时间：2012-10-31T05:08:41.353
> 
> 标签：php, javascript, mysql, security

[我正在尝试使用此 api](https://github.com/alecgorge/jsonapi/wiki)为 mincraft 服务器制作网络聊天应用程序。我想要做的[演示脚本以纯文本形式显示连接信息，从任何客户端计算机都可以轻松看到。](https://github.com/alecgorge/jsonapi/blob/master/sdk/js/test/test1.html)有什么方法可以安全地存储它，同时仍然具有相同的功能？最好使用 php 从 mySQL 中检索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:49:02.020

设置一个代理，将敏感的连接详细信息添加到请求中。我不知道怎么做你在 javascript 中问的事情。

一些关于 JSON 跨域代理的教程可能会对您有所帮助，因为它们与您的问题相似。

# jquery - tinyscrollbar.js 的键盘控制

> ID：13151588
> 
> 赞同：2
> 
> 时间：2012-10-31T05:08:42.310
> 
> 标签：jquery, keyboard-events, tinyscrollbar

我想为微小的滚动条脚本添加键盘控制。我不是很擅长 javascript。我知道我可以使用 jquery keypress() 函数来拦截箭头键(38,40)，然后通过更改其 css top 属性来滚动概览 div。

我可以在 tinyscrollbar 插件之外执行此操作，但我很想使用插件中已有的功能来执行此操作。

任何关于如何开始的方向都会有很大的帮助。谢谢。

有关更多信息，请[在此处查看 tinyscrollbar 代码](http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js)。更多信息和[演示在这里](http://baijs.nl/tinyscrollbar/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:55:42.560

我在插件中添加了一个新功能，并用它来更新 keydown 事件的滚动。

添加到插件的代码：

```
// define the added function
 jQuery.fn.tinyscrollbar_updatescroll = function(sScroll)
{
    return jQuery( this ).data( 'tsb' ).updatescroll( sScroll ); 
};
// end of added function definition

function Scrollbar( root, options )
{
    var oSelf       = this
    ,   oWrapper    = root
    ,   oViewport   = { obj: jQuery( '.viewport', root ) }
    ,   oContent    = { obj: jQuery( '.overview', root ) }
    ,   oScrollbar  = { obj: jQuery( '.scrollbar', root ) }
    ,   oTrack      = { obj: jQuery( '.track', oScrollbar.obj ) }
    ,   oThumb      = { obj: jQuery( '.thumb', oScrollbar.obj ) }
    ,   sAxis       = options.axis === 'x'
    ,   sDirection  = sAxis ? 'left' : 'top'
    ,   sSize       = sAxis ? 'Width' : 'Height'
    ,   iScroll     = 0
    ,   iPosition   = { start: 0, now: 0 }
    ,   iMouse      = {}
    ,   touchEvents = 'ontouchstart' in document.documentElement
    ;

    function initialize()
    {
        oSelf.update();
        setEvents();

        return oSelf;
    }

    // the new added function using the wheel function
    this.updatescroll = function( sScroll )
    {
        if( oContent.ratio < 1 )
        {

            iScroll -= sScroll;
            iScroll = Math.min( ( oContent[ options.axis ] - oViewport[ options.axis ] ), Math.max( 0, iScroll ));

            oThumb.obj.css( sDirection, iScroll / oScrollbar.ratio );
            oContent.obj.css( sDirection, -iScroll );

        }
    };
    // end of added function 
```

插件外的代码：

```
jQuery('body').keydown(function (event) {
    if (event.keyCode == 38) {
      // up arrow
      $('#scrollbar1').tinyscrollbar_updatescroll(40);
    } else if (event.keyCode == 40) {
     // down arrow
     $('#scrollbar1').tinyscrollbar_updatescroll(-40);
    }
  }); 
```

tinyscrollbar_updatescroll 将内容滚动到当前位置加上发送给它的数量。原始的 tinyscrollbar_update 函数将内容滚动到以像素为单位的特定位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:28:46.787

您必须扩展此插件以支持 keydown 和 keyup 事件，并添加根据这些按键进行滚动的功能。插件中的当前滚动功能直接与使用鼠标或鼠标滚轮更改拖动相关联。

或者，您可以使用其他内置键盘事件的东西。例如[https://github.com/adaburrows/jquery.ui.scrollbar](https://github.com/adaburrows/jquery.ui.scrollbar)

# mysql - 获取按日期分组的字段和另一个字段的总数

> ID：13151589
> 
> 赞同：2
> 
> 时间：2012-10-31T05:08:43.530
> 
> 标签：mysql, sql, group-by

我有一个数据表如下，

```
detectDate      |isp    |infection  | count
--------------------------------------
2012-10-02 01:00|aaaa   |malware    |3
2012-10-02 01:30|bbbb   |malware    |2
2012-10-02 01:33|bbbb   |spy-eye    |2
2012-10-02 01:45|aaaa   |DDos       |1
2012-10-03 01:50|cccc   |malware    |2
2012-10-03 02:00|dddd   |TDSS       |2
2012-10-03 04:50|dddd   |TDSS       |3 
```

我需要像这样按日期和感染分组，

```
detectDate      |infection  | count
--------------------------------------
2012-10-02      |malware    |5
2012-10-02      |spy-eye    |2
2012-10-02      |DDos       |1
2012-10-03      |malware    |2
2012-10-03      |TDSS       |5 
```

我知道如何使用组，但不是他的远:(你能帮我吗？我需要按日期和感染分组，并得到如图所示的计数字段的总数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:13:53.417

使用[`SUM`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)函数对列求和`count`，使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数仅按日期分组。

```
SELECT DATE_FORMAT(detectDate, '%Y-%m-%d') AS detectDate
      ,infection 
      ,SUM(`COUNT`) as `count`
FROM myTable
GROUP BY DATE_FORMAT(detectDate, '%Y-%m-%d'), infection 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/c51b8/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:18:28.913

您应该使用[DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date) mySql 函数从日期/时间列中提取日期部分：

```
select DATE(detectDate),infection, sum(count) 
from t group by DATE(detectDate),infection
order by  DATE(detectDate); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T05:15:06.000

```
select detectDate, infection, sum(count) as count
from table_name
group by detectDate, infection 
```

# java - 为什么一个列表给了我一个价值，而另一个没有？

> ID：13151594
> 
> 赞同：0
> 
> 时间：2012-10-31T05:08:58.967
> 
> 标签：java, list

```
public class INode
{
    private int value;
    private INode right, down;
    private int row, col;

    public INode(int value)
    {
        this.value = value;
    }

    public int getValue() 
    {
        return value;
    }

    public void setValue(int value) 
    {
        this.value = value;
    }

    public INode getRight() 
    {
        return right;
    }

    public void setRight(INode right) 
    {
        this.right = right;
    }

    public INode getDown() 
    {
        return down;
    }

    public void setDown(INode down)
    {
        this.down = down;
    }

    public int getRow() 
    {
        return row;
    }

    public void setRow(int row) 
    {
        this.row = row;
    }

    public int getCol() 
    {
        return col;
    }

    public void setCol(int col) 
    {
        this.col = col;
    }

} 
```

我可以得到 a = 8 的值，但是对于 head，即使我使用构造函数进行设置，仍然给我 value = null ......不知道为什么。

司机是：

```
import java.util.*;
public class List
{
public static INode head;
public List()
{
    head = new INode(8);

}
public static void main (String[] args)
{
    INode a = new INode(8);
    int data = a.getValue();
    System.out.println(data);
    System.out.println(head.getValue());
}

} 
```

请帮我一把。不明白为什么当我使用构造函数时，我无法将值分配给节点，但是当我创建实例时，我可以......

谢谢各位，爱你们！很大的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:14:54.303

您不实例化类`List`。将您的代码更改为

```
public INode head; // remove static
public List() {
    head = new INode(8);
} 
```

并修改您的主要方法：

```
public static void main (String[] args) {
    INode a = new INode(8);
    int data = a.getValue();
    System.out.println(data);

    List l = new List(); // create new List instance
    System.out.println(l.head.getValue()); // get the head from List instance
} 
```

另一种有效的替代方法是仅更改一行：

```
public static INode head = new INode(8); // create instance during class initialization 
```

我建议查看类（静态）和实例变量之间的区别，例如在[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)中（摘录如下）：

> *   实例变量（非静态字段） 从技术上讲，对象将它们各自的状态存储在“非静态字段”中，即没有使用 static 关键字声明的字段。非静态字段也称为实例变量，因为它们的值对于类的每个实例（换句话说，对于每个对象）都是唯一的；一辆自行车的 currentSpeed 独立于另一辆自行车的 currentSpeed。
>     
>     
> *   类变量（静态字段） 类变量是使用 static 修饰符声明的任何字段；这告诉编译器存在这个变量的一个副本，无论该类被实例化了多少次。定义特定类型自行车的齿轮数量的字段可以标记为静态，因为从概念上讲，相同数量的齿轮将应用于所有实例。代码 static int numGears = 6; 会创建这样一个静态字段。此外，可以添加关键字 final 来表示齿轮的数量永远不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:15:48.677

您应该在声明点或在静态初始化程序块中初始化静态变量。而不是在构造函数中。

构造函数只会在你实例化你的`List`类时使用，你没有在任何地方做。`static initializer`当类被加载到 memoty 中时，block 被执行。因此，您`INode`将在加载类时初始化。

```
public static INode head;
static {
    head = new INode(8);
} 
```

要不就： -

```
public static INode head = new INode(8); 
```

*   `static`变量对所有实例都是通用的。如果对一个实例进行了更改，它将反映在所有实例中。因此，请确保在使用它们之前，您确实需要它。如果可能，将您的声明`INode`为`non-static`变量。`List class`并在使用之前实例化你的 。

    ```
    public INode head = new INode(8); 
    ```

然后在您的主要方法中，您可以像这样访问它：-

```
List list = new List();
System.out.println(list.head.getValue()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:16:01.983

您必须在 main 方法中初始化 List 对象

```
 public static void main (String[] args)
 {
   new List();
     INode a = new INode(8);
     int data = a.getValue();
    System.out.println(data);
    System.out.println(head.getValue()); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T05:27:28.963

你可以用任何一种方式做到这一点..你可以创建一个类列表的实例，或者你可以初始化 head 以指向 INode 的对象。这取决于您需要的业务逻辑

```
public static void main(String[] args) {
    INode a = new INode(8);
    int data = a.getValue();
    System.out.println(data);
    List list = new List();
    System.out.println(list.head.getValue());

    head = new INode(6);
    System.out.println(head.getValue());
} 
```

# batch-file - 将文件从 FTP 移动到远程，但有特殊字符密码问题

> ID：13151597
> 
> 赞同：0
> 
> 时间：2012-10-31T05:09:25.563
> 
> 标签：batch-file

我正在编写 1 个脚本来将文件从 ftp 移动到远程。

它在命令提示符下运行良好，但是当我编写批处理脚本时，它没有正确执行，首先给我错误提示用户未登录，可能是因为我的密码中有特殊字符。代码如下，这是一个紧迫的问题.. 寻找快速答案尝试将 pswd 放在 diff 中。文件。用^^尝试过输出是正确的，但仅在回声中

我的密码是 **^xinPS032**

```
echo ^^caret^^

@Echo Off
setlocal EnableDelayedExpansion
Set _FTPServerName=ftp.us.benfieldgroup.com
Set _UserName=FtpTemp0013
Set _Password>ftpcmd.dat
echo quit>> ftpcmd.dat
Set _LocalFolder=FtpTemp0013
Set _RemoteFolder=D:\Informatica\9.5.0\server\infa_shared\BWParam
Set _Filename=*.zip
Set _ScriptFile=scrip
:: Create script
>"%_ScriptFile%" Echo ftp %_FTPServerName%
>>"%_ScriptFile%" Echo %_UserName%
>>"%_ScriptFile%" Echo %_Password%
>>"%_ScriptFile%" Echo lcd %_LocalFolder%
>>"%_ScriptFile%" Echo cd %_RemoteFolder%
>>"%_ScriptFile%" Echo binary
>>"%_ScriptFile%" Echo get %_Filename%
>>"%_ScriptFile%" Echo quit
:: Run script
ftp -s:"%_ScriptFile%"
Del "%_ScriptFile%" 
```

错误信息

> ftp> ftp ftp.us.benfieldgroup.com 命令无效。ftp> FtpTemp0013 命令无效。ftp> xiPS032Set _LocalFolder= 无效命令。ftp> lcd FtpTemp0013 FtpTemp0013：找不到文件 ftp> cd D:\Informatica\9.5.0\server\infa_shared\BWParam 未连接。ftp> binary 未连接。ftp> get *.zip 未连接。ftp>退出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:12:20.407

您的第一个命令应该是`open`. ftp 脚本旨在像您直接将它们键入`ftp>`“shell”一样运行。在那个“shell”中，您使用“open”而不是“ftp”启动连接，例如：

```
ftp> ftp ftp.adobe.com
Invalid command.
ftp> open ftp.adobe.com
Connected to ftpgen.wip4.adobe.com.
220-ftp.adobe.com
220-Adobe Systems, Inc. 
```

# java - 手写识别Java

> ID：13151599
> 
> 赞同：9
> 
> 时间：2012-10-31T05:09:45.820
> 
> 标签：java, handwriting

我知道还有其他关于此的帖子，但我似乎找不到一个严格用于手写的帖子。我将有一个表格，我需要阅读的是左角的 8 个方格，其中有 3 个字母和 5 个数字。

大多数帖子的问题在于，人们要么发布有关在屏幕上书写的软件，要么发布尚不能识别笔迹的软件。我更喜欢在 java 中使用一些东西，但是在另一种语言中使用一些简单的东西会起作用。

真正可行的是，如果人们可以扫描他们的文档并只需输入文档名称的工作编号，但显然他们不能这样做......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:28:09.753

能改一下表格吗？如果您可以将表单更改为更易于机器阅读的内容，*这个*问题将大大简化。识别任意笔迹既*困难*又容易出错。

我想到的是这样的表格：

[表单示例 http://shareworldonline.com/w3/testprep/images/test%20form.jpg](http://shareworldonline.com/w3/testprep/images/test%20form.jpg)

* * *

但是，如果您必须手写，请查看[此线程](https://stackoverflow.com/questions/768664/recommendations-for-handwriting-recognition-libraries-packages-in-java)中的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:28:47.677

如果我没听错，你正在做离线 hwr，

当我在做离线 hwr 时，我发现在 word 中分离字符最困难，好像你把它们放在正方形里，所以你需要做的就是找到你的盒子（即使用直方图）

并将您的框的内容与您的字符数据库中的每个元素进行比较（我为此使用了 levenshtein 距离）

我知道这可能不是很有帮助，但可能会让你走上正轨。

# pyqt - pyqt：停靠在堆叠的 qdockwidgets 一侧

> ID：13151601
> 
> 赞同：2
> 
> 时间：2012-10-31T05:10:13.320
> 
> 标签：pyqt, qdockwidget

![多码头](../Images/a25f05a24d90be431c31ccf7f8e9f0f2.png)

我制作了一个多停靠窗口。为此，我隐藏了中央小部件，我明白了。但我有一个问题（或者更多的事情？）。如果停靠小部件堆叠在另一个之上，我无法将一个停靠在它们的一侧。如上图所示，我只需要停靠在码头之间。我该如何调整它？这就是我的全部代码。

```
from PyQt4 import QtCore, QtGui

class Window(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)        
        self.resize(800, 600)
        self.setWindowTitle(QtGui.QApplication.translate("self", "self", None, QtGui.QApplication.UnicodeUTF8))
        self.setDockOptions(QtGui.QMainWindow.AnimatedDocks)
        self.centralwidget = QtGui.QWidget(self)
        self.centralwidget.hide()
        self.setCentralWidget(self.centralwidget)        
        self.menubar = QtGui.QMenuBar(self)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))
        self.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(self)
        self.setStatusBar(self.statusbar)
        self.dock1Widget = QtGui.QDockWidget(self)
        self.dock1Widget.setFeatures(QtGui.QDockWidget.AllDockWidgetFeatures)
        self.dock1Widget.setWindowTitle(QtGui.QApplication.translate("self", "dock1", None, QtGui.QApplication.UnicodeUTF8))
        self.dock1WidgetContents = QtGui.QWidget()
        self.dock1Widget.setWidget(self.dock1WidgetContents)
        self.addDockWidget(QtCore.Qt.DockWidgetArea(1), self.dock1Widget)
        self.dock2Widget = QtGui.QDockWidget(self)
        self.dock2Widget.setFeatures(QtGui.QDockWidget.AllDockWidgetFeatures)
        self.dock2Widget.setWindowTitle(QtGui.QApplication.translate("self", "dock2", None, QtGui.QApplication.UnicodeUTF8))
        self.dock2WidgetContents = QtGui.QWidget()
        self.dock2Widget.setWidget(self.dock2WidgetContents)
        self.addDockWidget(QtCore.Qt.DockWidgetArea(1), self.dock2Widget)
        self.dock3Widget = QtGui.QDockWidget(self)
        self.dock3Widget.setFeatures(QtGui.QDockWidget.AllDockWidgetFeatures)
        self.dock3Widget.setWindowTitle(QtGui.QApplication.translate("self", "dock3", None, QtGui.QApplication.UnicodeUTF8))
        self.dock3WidgetContents = QtGui.QWidget()
        self.dock3Widget.setWidget(self.dock3WidgetContents)
        self.addDockWidget(QtCore.Qt.DockWidgetArea(1), self.dock3Widget)
        self.dock4Widget = QtGui.QDockWidget(self)
        self.dock4Widget.setFeatures(QtGui.QDockWidget.AllDockWidgetFeatures)
        self.dock4Widget.setWindowTitle(QtGui.QApplication.translate("self", "dock4", None, QtGui.QApplication.UnicodeUTF8))
        self.dock4WidgetContents = QtGui.QWidget()
        self.dock4Widget.setWidget(self.dock4WidgetContents)
        self.addDockWidget(QtCore.Qt.DockWidgetArea(1), self.dock4Widget)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:39:03.077

没有一个`centralWidget`可以`dockWidgetArea`一路扩展，使所有其他码头区域都无法进入。

一种可能的解决方案是使用嵌套码头 ( [`AllowNestedDocks`](http://qt-project.org/doc/qt-4.8/qmainwindow.html#DockOption-enum))。这将允许您更自由地堆叠停靠小部件。这不是完全相同的行为，但可能更灵活。像这样设置您的停靠选项：

```
self.setDockOptions(QtGui.QMainWindow.AnimatedDocks | QtGui.QMainWindow.AllowNestedDocks) 
```

顺便说一句，如果你不想要一个中央小部件，你可以*不设置*它。默认值是`NULL`，这与设置虚拟小部件和隐藏具有相同的效果。

# javascript - (SyntaxError): 内存不足

> ID：13151602
> 
> 赞同：0
> 
> 时间：2012-10-31T05:10:32.607
> 
> 标签：javascript, gwt, web-applications

一位用户从我们的一个带有大量 GWT（因此是 Javascript）的 Java Web 应用程序中报告了这个错误。

![在此处输入图像描述](../Images/de6dba63b7ae5477bd6209e80bbd49b3.png)

我以前从未见过这个错误，也无法复制它，谷歌搜索也没有发现任何东西。我确信这个错误消息不在我们的代码中（我检查了源代码中“内存”这个词的每个实例）。有没有人知道这可能意味着什么？

# c# - C#/WPF - 获取 ScrollViewer 滚动位置？

> ID：13151603
> 
> 赞同：24
> 
> 时间：2012-10-31T05:10:43.557
> 
> 标签：c#, wpf

好了，至此，大家都知道如何设置ScrollViewer的滚动位置了。整篇文章和博客文章都是关于`ScrollViewer.ScrollToVerticalOffset()`的，这里有几百个关于它的问题的答案。

所以，我输入：

```
myScrollViewer.ScrollToVerticalOffset(280); 
```

...它非常友好地滚动到那个位置。

问题是，*现在什么属性包含 280*，所以我可以稍后检索它？

（提示：`myScrollViewer.VerticalOffset`and`ContentVerticalOffset`都是 0；`myScrollViewer.ScrollInfo`只是普通的不存在。）

编辑：显然我需要更详细的演示。

```
private void btnTest_Click(object sender, RoutedEventArgs e) {
  double scrollTarget = 280;
  MessageBox.Show("Target: " + scrollTarget.ToString());
  myScrollViewer.ScrollToVerticalOffset(scrollTarget);
  MessageBox.Show("Now: " + myScrollViewer.VerticalOffset);
} 
```

我必须重申，这确实按预期**滚动。**正好去我想要的地方。但是，`myScrollViewer.VerticalOffset`设置为 0。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-04T05:58:33.693

解决方法是手动调用`myScrollViewer.UpdateLayout()`after `myScrollViewer.ScrollToVerticalOffset()`。那么，`myScrollViewer.VerticalOffset`就会有期望值了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T06:00:39.240

确保在触发 LayoutUpdated 事件后，您的 VerticalScrollBarVisibility="Visible" 和 VerticalScrollOffset 将为 280。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:14:56.817

我认为您正在窗口的构造函数中调用 myscrollViewer 。

您可以在单击按钮或在窗口的加载方法中调用它们，以便在垂直偏移值中更新值。也就是说，这些值会在您初始化窗口后更新！

# c# - 如何在列表视图中为特定列设置字体颜色？

> ID：13151608
> 
> 赞同：2
> 
> 时间：2012-10-31T05:11:12.400
> 
> 标签：c#, winforms, visual-studio-2010

如何在列表视图中为特定列设置字体颜色？我在列表视图中有两列，我想将第二列中的字体设置为红色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:40:59.440

使用`ListView.DrawColumnHeader`事件

```
private void listView1_DrawColumnHeader(object sender, DrawListViewColumnHeaderEventArgs e)
    {
            // Draw the header text. 
            using (Font headerFont =
                        new Font("Helvetica", 10, FontStyle.Bold, FontColor.Red))
            {
                e.Graphics.DrawString(e.Header.Text, headerFont, 
                        Brushes.Black, e.Bounds, sf);
            }
    } 
```

# xml - xslt 信息捕获

> ID：13151611
> 
> 赞同：0
> 
> 时间：2012-10-31T05:11:24.313
> 
> 标签：xml, xslt

我有一个如下的 xml 输入：

```
<food>
  <fruit>Orange</fruit>
    isGood
  <fruit>Kiwi</fruit>
    isGood
  <fruit>Durian</fruit>
    isBad
</food> 
```

我想将其转换为如下的 html 语句：

*橙色*很好。*猕猴桃*不错。*榴莲*不好。

请注意，水果元素都是斜体。

我拥有的代码如下所示。但它有问题。

```
 <xsl:template match="/" >
    <food>
   <xsl:apply-templates select="food"/>
    </food>
  </xsl:template>

  <xsl:template match="food">
    <xsl:element name="fruit"> 
       <xsl:value-of select="fruit" /> 
    </xsl:element>        
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:23:25.437

看起来您的 XSLT 正在尝试重现原始输入，而不是像您想要的那样生成 HTML 输出。

这是一种方法的示例...

**XML 输入**

```
<food>
    <fruit>Orange</fruit>
    isGood
    <fruit>Kiwi</fruit>
    isGood
    <fruit>Durian</fruit>
    isBad
</food> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" method="html"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="food">
        <html>
            <p><xsl:apply-templates/></p>
        </html>
    </xsl:template>

    <xsl:template match="fruit">
        <i><xsl:value-of select="."/></i>
        <xsl:value-of select="concat(' ',normalize-space(following-sibling::text()),'. ')"/>
    </xsl:template>

    <xsl:template match="text()"/>

</xsl:stylesheet> 
```

**HTML 输出**（原始）

```
<html>
   <p><i>Orange</i> isGood. <i>Kiwi</i> isGood. <i>Durian</i> isBad. 
   </p>
</html> 
```

**HTML 输出**（浏览器显示）

*橙色*很好。*猕猴桃*不错。*榴莲*不好。

# objective-c - 如何让 Chrome 在 Objective-C 中使用 ScriptingBridge 打开一个 URL？

> ID：13151619
> 
> 赞同：2
> 
> 时间：2012-10-31T05:12:14.097
> 
> 标签：objective-c, google-chrome, safari, scripting-bridge

我有使用 ScriptingBridge 使 Safari 打开 URL 的 Objective-C 代码。就像是：

```
#import "Safari.h"  /* created by executing "sdef /Applications/Google\ Chrome.app | sdp -fh --basename GoogleChrome" */
if ((safariApp = [SBApplication applicationWithBundleIdentifier:@"com.apple.Safari"]) == nil) {
    NSLog(@"couldn't access Google Chrome");
} else {
    NSString *theUrl = [NSString stringWithUTF8String:"http://www.ford.com"];
    NSDictionary *theProperties = [NSDictionary dictionaryWithObject:theUrl forKey:@"URL"];
    SafariDocument *doc = [[[safariApp classForScriptingClass:@"document"] alloc] initWithProperties:theProperties];
    [[safariApp documents] addObject:doc];
} 
```

我想创建类似的代码，为 Chrome 而不是 Safari 做同样的事情。显然，我需要将“Safari.h”更改为“GoogleChrome.h”，将“com.apple.Safari”更改为“com.google.Chrome”。我不确定如何更改最后三行 - GoogleChrome.h 中没有“GoogleDocument”的定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:22:53.547

```
GoogleChromeApplication *application = [SBApplication applicationWithBundleIdentifier:@"com.google.Chrome"];
GoogleChromeWindow *window = [[[application classForScriptingClass:@"window"] alloc] initWithProperties:nil];
[application.windows addObject:window];
window.activeTab.URL = @"http://www.example.com";
[window release];
[application activate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:02:04.480

我发现获得所需内容的唯一方法是使用 AppleScript。

```
NSString *script = @"tell application \"Google Chrome\" to \
                    open location \"http://www.ford.com\"";
NSAppleScript* appleScript = [[NSAppleScript alloc] initWithSource: script];
[appleScript executeAndReturnError:nil]; 
```

这也适用于*Safari*和*Firefox*（当然您需要`\"Google Chrome\"`使用`\"Safari\"`或进行更改`\"Firefox\"`）。

# objective-c - Clang 错误：退出代码 1 失败（使用 -v 查看调用）

> ID：13151622
> 
> 赞同：0
> 
> 时间：2012-10-31T05:12:52.027
> 
> 标签：objective-c, ios, xcode

我正在尝试使用带有 SUP 后端的 Objective c 在 xcode 中开发一个应用程序。当我构建我的项目时，我遇到了一个错误，例如

> ld /Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Products/Debug-iphonesimulator/New_App.app/New_App normal i386 cd /Users/chairman/Desktop/New_App/New_App setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH " /Users/chairman/Desktop/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Users/chairman/Desktop/Xcode.app/Contents/Developer/usr/bin:/usr/bin :/bin:/usr/sbin:/sbin" /Users/chairman/Desktop/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Users/chairman/Desktop/ Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1。sdk -L/Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Products/Debug-iphonesimulator -L/Users/chairman/Desktop/New_App/New_App/../../MAC_IOS/importing_Libraries/库/Debug-iphoneos -L/Users/chairman/Desktop/New_App/New_App/../../MAC_IOS/importing_Libraries/Libraries/Debug-iphonesimulator -L/Users/chairman/Desktop/New_App/New_App/../。 ./MAC_IOS/importing_Libraries/Libraries/Release-iphoneos -L/Users/chairman/Desktop/New_App/New_App/../../MAC_IOS/importing_Libraries/Libraries/Release-iphonesimulator -L/Users/chairman/Desktop/New_App/ New_App/../../New_App_Data/importing_Libraries/Libraries/Debug-iphonesimulator -F/Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Products/Debug-iphonesimulator -filelist /Users/chairman/Library/Developer/Xcode/DerivedData /New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Intermediates/New_App.build/Debug-iphonesimulator/New_App.build/Objects-normal/i386/New_App.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs - D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -lstdc++.6 -lz.1.2.5 -licucore。A -framework Security -framework QuartzCore -framework CoreFoundation -framework AddressBook -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Products/Debug-iphonesimulator/New_App .app/New_App
> 
> ld：重复符号 _OBJC_IVAR_$_dev_BhaskarG_com_igate_shipping_v1KeyGenerator._remoteId 在 /Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Intermediates/New_App.build/Debug-iphonesimulator/New_App.build/Objects-1GGenerator/i386/Objects-KeyGenerator/i386/ .o 和 /Users/chairman/Library/Developer/Xcode/DerivedData/New_App-brpimxjxwxsuimcjcfjjrmpnextw/Build/Intermediates/New_App.build/Debug-iphonesimulator/New_App.build/Objects-normal/i386/dev_BhaskarG_com_igate_shipping_v1KeyGenerator copy.o for architecture i386 clang ：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:18:43.177

重复符号意味着您在项目（或其包含的库）的两个位置定义了相同的符号（类、变量等）。

查看错误消息...看起来您在项目中包含了两次相同的文件：

dev_BhaskarG_com_igate_shipping_v1KeyGenerator dev_BhaskarG_com_igate_shipping_v1KeyGenerator 副本

# c# - 如何获取本地化的特殊文件夹名称？

> ID：13151623
> 
> 赞同：3
> 
> 时间：2012-10-31T05:12:54.183
> 
> 标签：c#, winapi, shell, localization, globalization

我使用`SHGetFileInfo()`or`GetDisplayNameOf()`来获取特殊文件夹的名称。

如果本地化操作系统更改设置“非 Unicode 程序的当前语言”，这些函数将返回一个值“????????????”。

用户遇到的这种设置组合。

shell32 不完全兼容 unicode？

```
Shell32.STRRET STRRET;
STRRET.uType = (uint)Shell32.STRRET_TYPE.STRRET_WSTR;
if (Windows.S_OK != ishellfolder_parent.GetDisplayNameOf(ptr_pidllast, (uint)Shell32.SHGNO.SHGDN_NORMAL | (uint)Shell32.SHGNO.SHGDN_INFOLDER, out STRRET))
                return null;

StringBuilder sbuilder = new StringBuilder(260);
Shell32.StrRetToBuf(ref STRRET, ptr_pidllast, sbuilder, (uint)sbuilder.Capacity); 
```

怎么了？

***稍后添加另一个示例来演示我的问题：

```
public static partial class Program
{
    const Int32 CSIDL_DESKTOP = (0x0000);
    const uint SHGFI_DISPLAYNAME = 0x000000200;     // get display name
    const uint SHGFI_PIDL = 0x000000008;     // pszPath is a pidl

    [StructLayout(LayoutKind.Sequential)]
    public struct SHFILEINFO
    {
        public static int NAMESIZE = 80;
        public IntPtr hIcon;
        public int iIcon;
        public uint dwAttributes;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)]
        public string szDisplayName;
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 80)]
        public string szTypeName;
    };

    [DllImport("shell32.dll")]
    static extern IntPtr SHGetFileInfo(IntPtr pidl, uint dwFileAttributes, ref SHFILEINFO psfi, uint cbFileInfo, uint uFlags);
    [DllImport("shell32.dll")]
    public static extern IntPtr SHCloneSpecialIDList(IntPtr hwnd, Int32 CSIDL, bool create);

    [STAThread]
    static void Main(string[] args)
    {
        IntPtr pidl = SHCloneSpecialIDList(IntPtr.Zero, CSIDL_DESKTOP, false);
        SHFILEINFO shfi = new SHFILEINFO();
        if (IntPtr.Zero != SHGetFileInfo(
                    pidl,
                    0,
                    ref shfi,
                    (uint)Marshal.SizeOf(typeof(SHFILEINFO)),
                    SHGFI_PIDL | SHGFI_DISPLAYNAME))
        {
            System.Windows.Forms.MessageBox.Show(shfi.szDisplayName);
        } 
```

此代码不正确。某些情况下返回值错误，如上所述。谁能帮我举一个正确代码的例子，完全兼容 Unicode 并使用非默认系统设置？

* * *

谢谢你们！经过一番实验，找到了解决办法。我的错误在这里：

```
Shell32.StrRetToBuf(ref STRRET, ptr_pidllast, sbuilder, (uint)sbuilder.Capacity); 
```

签名应该是：

```
[DllImport("shlwapi.dll", CharSet=CharSet.Unicode, EntryPoint="StrRetToBufW")]
public static extern Int32 StrRetToBufW( ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:47:46.043

有人问了同样的问题。您可以使用那里的代码示例。

[如何获取实际（本地化）文件夹名称？](https://stackoverflow.com/questions/5145394/how-to-get-the-actual-localized-folder-names)

# javascript - 使用 jquery 或其他东西根据 URL 加载不同的 css 文件

> ID：13151627
> 
> 赞同：0
> 
> 时间：2012-10-31T05:13:02.217
> 
> 标签：javascript, jquery, html, css

是否可以根据您所在的“url”引入特定于 id 的样式或加载不同的 css 文件？

像这样的东西：

```
<script>
 if(location.href == 'http://jpftest2.tumblr.com/about'){ 
document.write('<style type='text/css'>
.social {
  display:none;
}

</style>'); 
} 

</script> 
```

所以当用户离开根 url 到“/about”页面时。我想介绍一下风格：

```
 .social {
  display:none;
} 
```

如果还可以根据 URL 完全加载不同的 CSS 文件会更好吗？

tumblr 上的不同页面共享相同的头部，所以我不能在不同的页面上引入不同的 css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:20:58.497

假设您的网站使用 AJAX 之类的东西（正确吗？），（否则您会将样式表放在`<head>`文件的 HTML 中），您可以这样做：

```
window.onpopstate = function() {
    if(window.location.path == '/about'){ 
        var css = document.createElement('style');
        css.type = 'text/css';
        css.rel = 'stylesheet';
        css.innerHTML = '.social{display:none;}';
        document.getElementsByTagName('head')[0].appendChild(css);
    }
} 
```

但是我不会推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:25:54.610

您可以使用以下方法

```
<script type="text/javascript">
    $(document).ready(function(){

    if(your_url_condition){
            //for IE compatibility
            if (document.createStyleSheet){
                document.createStyleSheet('style.css');
            }
            else {
                $("head").append($("<link rel='stylesheet' href='style.css' type='text/css' media='screen' />"));
            }
        }
    });
</script> 
```

这将起作用并且可能对您有所帮助。

问候！

# c++ - Clang 不工作。未定义的符号错误。代码在 gcc 中编译得很好

> ID：13151630
> 
> 赞同：2
> 
> 时间：2012-10-31T05:13:29.910
> 
> 标签：c++, clang, llvm-clang

我决定尝试一下 Clang，因为我听说过关于它的好消息，并且我想尝试 C++11 的一些特性。所以，像往常一样，我从一个简单的 hello world 程序开始。

```
#include <iostream>
using namespace std;

int main()
{   
    cout << "Hello, world" << endl;
    return 0;
} 
```

使用 GCC 编译得很好的东西不能在 Clang 中编译。相反，我得到了这个错误。

```
Apple clang version 4.1 (tags/Apple/clang-421.11.65) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name test.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 134.9 -v -resource-dir /usr/bin/../lib/clang/4.1 -fmodule-cache-path /var/folders/js/j_8fpm_j0vl1d_2r_lsxlddm0000gn/T/clang-module-cache -fdeprecated-macro -fdebug-compilation-dir /Users/alexanderstein/Desktop/build -ferror-limit 19 -fmessage-length 80 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/js/j_8fpm_j0vl1d_2r_lsxlddm0000gn/T/test-4P1Ij1.o -x c++ /Users/alexanderstein/Desktop/Programming/Sandbox/C_C++/test.cpp
clang -cc1 version 4.1 based upon LLVM 3.1svn default target x86_64-apple-darwin12.2.0
ignoring nonexistent directory "/usr/include/c++/4.2.1/i686-apple-darwin10/x86_64"
ignoring nonexistent directory "/usr/include/c++/4.0.0"
ignoring nonexistent directory "/usr/include/c++/4.0.0/i686-apple-darwin8/"
ignoring nonexistent directory "/usr/include/c++/4.0.0/backward"
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.2.1
 /usr/include/c++/4.2.1/backward
 /usr/local/include
 /usr/bin/../lib/clang/4.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o a.out /var/folders/js/j_8fpm_j0vl1d_2r_lsxlddm0000gn/T/test-4P1Ij1.o -lSystem /usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "std::ostream::operator<<(std::ostream& (*)(std::ostream&))", referenced from:
      _main in test-4P1Ij1.o
  "std::ios_base::Init::Init()", referenced from:
      ___cxx_global_var_init in test-4P1Ij1.o
  "std::ios_base::Init::~Init()", referenced from:
      ___cxx_global_var_init in test-4P1Ij1.o
  "std::cout", referenced from:
      _main in test-4P1Ij1.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in test-4P1Ij1.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      _main in test-4P1Ij1.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T22:02:55.187

根据评论中的要求：

您需要使用`clang++`，就像`clang`C 编译器一样。

# javascript - 子窗口关闭时的回调函数调用

> ID：13151634
> 
> 赞同：13
> 
> 时间：2012-10-31T05:13:50.440
> 
> 标签：javascript

单击按钮时，我打开了子窗口。在此窗口中，我将一些数据保存到数据库中。我想在子窗口关闭时调用另一个 java 脚本函数。

我已经尝试过[在 javascript 解决方案中将回调函数设置为新窗口，](https://stackoverflow.com/questions/2797560/set-a-callback-function-to-a-new-window-in-javascript)但它不起作用。

那么请告诉我如何调用回调函数？

成功保存后，我还在子窗口中设置了一个隐藏字段。我尝试提醒这个隐藏值，但在更新之前它会提醒。

```
function open_child()
{
    $("#child_succ").val(0);
    alert($("#child_succ").val());
    window.open("child.php","Ratting","width=550,height=300,left=150,top=200,toolbar=1,status=1");
    alert($("child_succ").val());
} 
```

**回调函数**

```
function test()
{
    alert("called from child window");
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T05:29:22.520

您可以通过这种方式从子窗口调用父函数：

```
window.opener.your_function() 
```

在父窗口中调用子函数：

```
var w = window.open(somelocation,''); //has a function on `window` called "test"
w.test(); 
```

如果这些提示中的任何一个对您有帮助，您可以向我们展示您是如何使用回调方法的。

希望这对您有所帮助。

问候！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T05:31:41.347

在您给我们的示例中，该函数在加载事件时被调用，因此您必须使用关闭事件来更改它：

```
// This function is defined in the child window
var RunCallbackFunction = function() { }; //reference holder only

// ---------------------------------------------------------------------------

// This code should appear in the parent window
//random function you want to call

function myFunc() { alert("I'm a function in the parent window"); }

//to actually open the window..
var win = window.open("window.html");
win.onclose = function() { win.RunCallbackFunction = myFunc; }; 
```

# scons - 在命令行中将值参数传递给 scons？

> ID：13151640
> 
> 赞同：1
> 
> 时间：2012-10-31T05:14:29.037
> 
> 标签：scons

你们如何将有价值的参数传递给 scons ？我浏览了它的[文档](http://www.scons.org/documentation.php)，不幸的是我仍然不清楚。我以前从未使用过它。

请考虑**[这个](https://github.com/mongodb/mongo/blob/master/SConstruct)**构建脚本。

这是其中的代码片段

```
add_option( "boost-version", "boost version for linking(1_38)" , 1 , True , "boostVersion" )

boostVersion = GetOption( "boostVersion" )
if boostVersion is None:
    boostVersion = ""
else:
    boostVersion = "-" + boostVersion 
```

我尝试打电话`scons --boost-version=1.51`并尝试过`scons --boostVersion=1.51`，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:26:34.300

您可以使用参数：

你`scons boost-version=1.51`在命令行上调用

然后，获取 SConscript 中的值：

```
boostVersion = defaultBoostVersion
if 'boost-version' in ARGUMENTS: 
  boostVersion = ARGUMENTS["boost-version"] 
```

或者，正如[elmo](https://stackoverflow.com/users/259371/elmo)建议的那样：

```
boostVersion = ARGUMENTS.get("boost-version", defaultBoostVersion) 
```

scons 文档有[更多信息](http://www.scons.org/doc/1.1.0/HTML/scons-user/x2361.html)，同一页面还描述了如何使用 `AddOption`您之前尝试过的命令。它也可以使用，但参数（至少对我而言）更容易理解。

# javascript - 在 ES6 (ECMAScript 6) 中访问 [[NativeBrand]] / [[Class]]

> ID：13151643
> 
> 赞同：7
> 
> 时间：2012-10-31T05:14:53.617
> 
> 标签：javascript, ecmascript-harmony

我正在阅读 ES6 的草稿，并在以下`Object.prototype.toString`部分中注意到了这个注释：

> 历史上，此函数偶尔用于访问 [[Class]] 内部属性的字符串值，该属性在本规范的先前版本中用作各种内置对象的标称类型标记。toString 的这种定义保留了将其用作那些特定类型的内置对象的可靠测试的能力，但它没有为其他类型的内置或程序定义的对象提供可靠的类型测试机制。

通过阅读es-discuss 上的[这个帖子](https://mail.mozilla.org/pipermail/es-discuss/2012-June/023676.html)，听起来好像在 ES6 草案`[[Class]]`中被替换为`[[NativeBrand]]`，以便他们可以将其指定为不可扩展（至少是[Allen Wirfs-Brock 的想法](https://mail.mozilla.org/pipermail/es-discuss/2012-June/023713.html)）。

好奇，我在 FireFox 和 Chrome 中进行了快速测试（启用了实验性 JavaScript）：

```
Object.prototype.toString.apply(new WeakMap());
=> '[object WeakMap]' 
```

`"WeakMap"`不是`[[NativeBrand]]`ES6 草案中指定的 s 之一。但是，此测试`"[object WeakMap]"`在两种浏览器上都返回。

所以我很困惑。我有几个问题。

* * *

**1\. Chrome 和 Firefox 的行为是否正确？**

从阅读草稿的一种方式来看，它们听起来应该返回`[object Object]`（所有这些都是相当新的，所以在这些浏览器的未来版本中看到这种变化我不会感到惊讶）。但是，我很难理解草案这一部分的意图，特别是因为有些地方带有`"???"`.

有没有更热心关注es-discuss的人有相关信息？或者任何可以更好地理解草案语言的人？

* * *

**2\. 有替代品`Object.prototype.toString`吗？**

从上面引用的注释来看，它听起来好像`Object.prototype.toString`是出于遗留原因而保留的，好像现在应该使用一些新的东西。尤其是节点中读取的部分`"it does not provide a reliable type testing mechanism for other kinds of built-in ... objects"`。这是否意味着未来的内置插件无法使用此方法进行测试？

让我们用一个具体的例子。

如果我想确保从未知来源收到的对象是一个`String`对象（实际构造的`String`对象，而不是原始字符串），我可以这样做：

```
if (Object.prototype.toString.apply(unknownObject) != '[object String]')
    throw new TypeError('String object expected.'); 
```

这让我知道它是否`unknownObject`是一个`String`对象，无论它是在什么框架中构建的。

我的问题是，这应该是我进入 ES6 所采用的方法吗？还是有替代方案？像`Object.getNativeBrandOf`什么？

* * *

**3\. 既然`[[NativeBrand]]`它似乎不包括未来类型的对象，那么如何测试这些对象？**

这行得通吗？

```
if (Object.prototype.toString.apply(unknownObject) != '[object Symbol]')
    throw new TypeError('Symbol expected.'); 
```

...假设`Symbol`是私有名称的最终名称。

我应该使用这个吗？

```
if (Object.prototype.toString.apply(unknownObject) != '[object WeakMap]')
    throw new TypeError('WeakMap expected.'); 
```

... 或者是其他东西？

* * *

我问的原因是我目前正在编写我希望能够在可能的一两年内尽可能轻松地转换到 ES6 的代码。如果有替代品`Object.prototype.toString`，那么我可以将其填入并从那里继续。谢谢！

* * *

# 更新

**benvie**的回答为我提供了正确的术语来搜索和理解我的问题的答案。

我[在 es-discuss 上找到了一封来自 Allen Wirfs-Brock 的](https://mail.mozilla.org/pipermail/es-discuss/2012-September/025344.html)关于此问题的电子邮件。

这是我发现的，对于其他提出相同问题的人：

**1\. Chrome 和 Firefox 的行为是否正确？**

是的，为什么在下面解释。

**2\. 有替代品`Object.prototype.toString`吗？**

*就像现在一样，在可能性*的意义上会有几个“替代品” ，但在*替代*的意义上不会。

**一个。** *使用`@@toStringTag`符号。*但是，我的理解是`Object.prototype.toString`仍然应该使用它。`@@toStringTag`提供以允许扩展可以从`Object.prototype.toString`. 如果您有一个想要添加自己的字符串标签的原型，您可以使用`@@toStringTag`将值设置为任何字符串。`Object.prototype.toString`将返回此值，除非此值是 ES5 内置函数之一，在这种情况下，字符串标记将带有 '~' 前缀。

**湾。** *在用户定义的对象上使用私有符号。*我读过一封电子邮件，宣传这是对用户定义的对象进行相同类型检查的最佳方式。但是，我看不出这如何真正解决问题，因为我无法理解它如何成为跨框架解决方案，并且它不允许您检查 ES6 内置插件。

因此，即使有一些替代方案，`Object.prototype.toString`现在坚持下去并继续前进也是一件好事，但有一个警告：

它可以确保你有一个内置的 ES5，例如`String`，但确保你有一个内置的 ES6 并不是万无一失的，因为它们可以被欺骗`@@toStringTag`。我不确定为什么会这样，我可能会遗漏一些东西，或者它可能会随着规范的发展而改变。

**3\. 既然`[[NativeBrand]]`它似乎不包括未来类型的对象，那么如何测试这些对象？**

如上所述，`Object.prototype.toString`仍然可以在 ES6 内置程序上使用，但它不是万无一失的，因为任何有权访问该`@@toStringTag`符号的人都可以欺骗它。但是，也许不应该有一个*万无一失的*方法，因为`Object.prototype.toString(weakmap) == '[object WeakMap]'`这并不意味着`weakmap instanceof WeakMap`（也不应该！）。`weakmap`可能来自另一个框架，也可能是用户创建的类似弱图的对象。您真正知道的唯一一件事是它报告在功能上等同于 WeakMap。

似乎确实提出了一个问题，为什么您不能拥有一个用户定义的对象，该对象报告在功能上等同于 a `String`or `Array`（没有前缀`"~"`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:14:47.930

这目前是 ES6 规范中的一个移动目标。对于现有的对象集，出于各种原因（包括兼容性）维护现有机制。[在10 月 26 日发布](http://wiki.ecmascript.org/lib/exe/fetch.php?id=harmony%3aspecification_drafts&cache=cache&media=harmony%3aworking_draft_ecma-262_edition_6_10-26-12-nomarkup.pdf)的最新 ES6 规范中，您可以找到一些关于潜在未来方向的提示

> **15.4.6.2.4** *ArrayIterator.prototype.@@toStringTag*
> @@toStringTag 属性的初始值为字符串值“Array Iterator”。
> 
> **15.14.5.13** *Map.prototype.@@toStringTag*
> @@toStringTag 属性的初始值是字符串值“Map”。

您可以在 es-discuss 上[的此线程](https://mail.mozilla.org/pipermail/es-discuss/2012-June/023722.html)中找到最初的讨论

# sql - SQL 也将 INSERT SELECT 转换为 UPDATE

> ID：13151650
> 
> 赞同：2
> 
> 时间：2012-10-31T05:15:09.870
> 
> 标签：sql, sql-server, sql-server-2005

我写了一些 SQL 来解决我的问题，但还没有准备好。几天来我一直在尝试不同的查询，但运气不佳。仅供参考，我继承了这个数据库，所以它可能比我习惯的要先进一些。

使用桥表 FormulaColor 在 Formula 和 Color 之间存在多对多关系。FormulaColor 具有列（FormulaId、ColorId、Percentage）。

我的业务问题，我们正在将所有使用颜色 A 的公式转换为颜色 B(1%)、C(2.8%) 和 D(96.2%)。因此，如果一个公式当前使用颜色 A 作为公式的 50%，那么我将为该公式添加一行，颜色为 B，百分比为 0.5%，为 C 颜色添加一行，百分比为 1.4% 和一行对于 D 颜色，百分比为 48.1%。

但问题是，给定的公式包含颜色 A，也可能已经包含一种或多种颜色 B、C 或 D。在这种情况下，我需要通过简单地添加上面计算的内容来更新百分比。

到目前为止，我的实际 sql 如下。*请注意，这仅用于处理 1 种新颜色 (ColorId=2594)

```
INSERT INTO FormulaColor (FormulaId, ColorId, Percentage) 
SELECT FormulaId, 2594 as ColorId, round((.01*FormulaColor.Percentage),2) as Percentage
FROM FormulaColor WHERE ColorId=2595;
DELETE FROM FormulaColor WHERE ColorId = 2595; 
```

我在想使用 @@rowscount 的 upsert 方法是我需要的吗？如果是这样，我无法弄清楚如何进行更新以将计算出的金额添加到百分比中。

任何帮助或资源表示赞赏！

**更新**

我最终使用了 Andriy M 的解决方案。如果它可以帮助其他人，我将发布我使用的实际 SQL。

```
DECLARE @DeletedColor int;
DECLARE @Replacement TABLE (ColorId int, Percentage float);

-- old ColorId getting replaced
SET @DeletedColor = 2595

-- new ColorId's and the percentages needed to recalculate
INSERT INTO @Replacement (ColorId, Percentage) VALUES (2594, .01)
INSERT INTO @Replacement (ColorId, Percentage) VALUES (2521, .028)
INSERT INTO @Replacement (ColorId, Percentage) VALUES (2533, .962)

SELECT
  fc.FormulaId,
  r.ColorId,
  Percentage = round(fc.Percentage * r.Percentage, 2)
INTO #FormulaColor
FROM FormulaColor fc
CROSS JOIN @Replacement r
WHERE fc.ColorId = @DeletedColor
;

UPDATE old
SET old.Percentage = old.Percentage + new.Percentage
FROM FormulaColor old
INNER JOIN #FormulaColor new
 ON old.FormulaId = new.FormulaId
AND old.ColorId   = new.ColorId
;

INSERT INTO FormulaColor (FormulaId, ColorId, Percentage)
SELECT new.FormulaId, new.ColorId, new.Percentage
FROM #FormulaColor new
LEFT JOIN FormulaColor old
 ON old.FormulaId = new.FormulaId
AND old.ColorId   = new.ColorId
WHERE old.FormulaId IS NULL
;

DELETE FROM FormulaColor WHERE ColorId = @DeletedColor; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:09:49.893

让我们`@DeletedColor`成为要删除的颜色的 ID，以及`@Replacement`替换颜色的表，声明如下：

```
DECLARE @DeletedColor int;
DECLARE @Replacement TABLE (ColorId int, Percentage float); 
```

解决问题的一种方法是这样的：

1.  准备要添加到每个公式的实际颜色值：

    ```
    SELECT
      fc.FormulaId,
      r.ColorId,
      Percentage = fc.Percentage * r.Percentage
    INTO #FormulaColor
    FROM FormulaColor fc
    CROSS JOIN @Replacement r
    WHERE fc.ColorId = @DeletedColor
    ; 
    ```

    这是为每个包含`@DeletedColor`. 替换表中为每种替换颜色指定的百分比由每个公式的百分比计算，`@DeletedColor`以形成替换颜色的最终百分比。

2.  `FormulaColor`从刚刚创建的行集中更新现有颜色：

    ```
    UPDATE old
    SET old.Percentage = old.Percentage + new.Percentage
    FROM FormulaColor old
    INNER JOIN #FormulaColor new
     ON old.FormulaId = new.FormulaId
    AND old.ColorId   = new.ColorId
    ; 
    ```

3.  将新行集中的颜色插入到不包含这些颜色的公式中：

    ```
    INSERT INTO FormulaColor (FormulaId, ColorId, Percentage)
    SELECT new.FormulaId, new.ColorId, new.Percentage
    FROM #FormulaColor new
    LEFT JOIN FormulaColor old
     ON old.FormulaId = new.FormulaId
    AND old.ColorId   = new.ColorId
    WHERE old.FormulaId IS NULL
    ; 
    ```

自然，由于您使用多个语句修改实际表，因此最好在事务中执行修改以确保它们的原子性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:54:20.213

```
CREATE TABLE [dbo].[ReplacementInfo](
[OldColorId] [int] NULL,
[NewColorID] [int] NULL,
[Percentage] [float] NULL
) ON [PRIMARY] 
```

* * *

```
Declare @KillColor int
Select @KillColor=1

Select FormulaId 
into #tmp
from dbo.FormulaColor 
where ColorId=@KillColor

Select t1.FormulaId,Coalesce(FC.ColorId,RI.NewColorID) as ColorID,Coalesce(FC.Percentage*RI.Percentage,RI.Percentage) as Percentage
into #tmpInsert
from dbo.ReplacementInfo RI
join #tmp t1 on 1=1
left join dbo.FormulaColor FC on FC.ColorId=RI.NewColorID and t1.FormulaId=FC.FormulaId

Delete FormulaColor  
from #tmpInsert
where #tmpInsert.FormulaId=FormulaColor.FormulaId and #tmpInsert.ColorId=FormulaColor.ColorId

Delete FormulaColor  where ColorId=@KillColor

insert into FormulaColor
Select * from #tmpInsert

Drop Table #tmp
Drop Table #tmpInsert 
```

# python - 模板中的Django外键对象图像

> ID：13151652
> 
> 赞同：0
> 
> 时间：2012-10-31T05:15:19.383
> 
> 标签：python, django, web

好的，我知道有一千个人问过这个问题，但我在这个网站上到处查看都没有成功（也是谷歌）这是我的 models.py

```
VENUE_IMAGE_PATH = os.path.join('images', 'venue_profiles/%Y/%m/%d')

 class Venue(models.Model):

    .....................
   name = models.CharField(max_length=100)
   address = models.CharField(max_length=100)
   city = models.CharField(max_length=100)
   ...........................

class VenueImage(models.Model):
  venue = models.ForeignKey(Venue, related_name="venue")
  image = models.ImageField(upload_to=VENUE_IMAGE_PATH, max_length=255) 
```

这是我的意见.py

```
def list(request):
  venues = Venue.objects.all()
  images=VenueImage.objects.all()

 return render_to_response('venues/list.html', {'venues':venues,'images':images}, 
  context_instance = RequestContext(request)) 
```

这是我的模板

```
{% for v in venues %}

<a href='#'>{{v.name}}</a>
<a href="{% url edit v.id %}" style="position:relative;left:10px;">edit</a>

{% if images %}
<img class='venue_image' src='images/venue_profiles/2012/10/25/{{images.url}}' 
    alt=''>
    {% endif %}
    {% endfor %} 
```

现在我已经尝试过`{{images.images.url}}`和`{{images.url}}`. `{{MEDIA_URL}}images/venue_profiles/%Y/%m/%d/{{image.url}}`. 我也试过了`{%for i in images %} {{i.url}} {% endfor %}`。我也尝试过不使用该`'images/venue_profiles/2012/10/25'`前缀，但似乎没有任何效果。有人可以帮我看看我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:42:44.433

```
# In models.py

class Venue(models.Model):
    ....
    name = models.CharField(max_length=100)
    ....
    images = models.ForeignKey(VenueImage)

class VenueImage(models.Model):
    image = models.ImageField(upload_to=VENUE_IMAGE_PATH)

# In views.py

def list(request):
    venues = Venue.objects.all()
    return render(request,
                  'venues/list.html',
                  {'venues': venues'})

# In template

{% for venue in venues %}
<a href '#'>{{ venue.name }}</a>
...
{% for image in venue.images %}
<img class='venue_image' src=''{{ image.url }}' alt=''>
{% endfor %}
{% endfor %} 
```

# eclipse - 在 64-Ubuntu 上安装 ia32-libs 后，Android 模拟器无法正常工作

> ID：13151660
> 
> 赞同：1
> 
> 时间：2012-10-31T05:16:19.707
> 
> 标签：eclipse, android-emulator, 64-bit, ubuntu-12.04, x86

我在 64 位 Ubuntu 12.04 桌面上安装了 64 位 eclipse。android SDK 和 ADT 安装正确，我可以在我的 android 设备上执行应用程序。但是，当我尝试启动模拟器时，它会冻结。我该如何克服这个问题？谢谢。

# ruby - 如何在 ruby 1.8.6 中使用 n 值的 n 幂

> ID：13151665
> 
> 赞同：0
> 
> 时间：2012-10-31T05:16:35.207
> 
> 标签：ruby

ruby 1.8.6 中是否有任何方法可用于计算 n 值 n 功率？

就像 2 有 5 次方，那么答案是 32，5 有 3 次方，那么答案是 125？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:43:04.370

2**5 会给你结果 32。

# android - 如何使用自定义 URI 打开活动？

> ID：13151670
> 
> 赞同：1
> 
> 时间：2012-10-31T05:16:47.880
> 
> 标签：android

我正在尝试从我的服务返回的自定义 uri 在我的应用程序中启动一项活动。

例如，我的服务将返回给我类似：“activity2”。基本上我想启动具有正确过滤器侦听“activity2”意图的活动。我有点坚持我将如何做到这一点。谁能给我举个例子吗？

在我的 Activity2 声明中，我把它作为一个意图过滤器，但它似乎不起作用：

```
<intent-filter> 
    <action android:name="activity2"/> 
    <category android:name="android.intent.category.DEFAULT" />
    <data android:scheme="foo"/> 
</intent-filter> 
```

# java - 注释处理器上具有 Diagnostic.Kind.NOTE（和其他）级别的消息

> ID：13151678
> 
> 赞同：7
> 
> 时间：2012-10-31T05:17:32.170
> 
> 标签：java, maven, annotation-processing

我有两个 Maven 项目：

*   第一个定义了**注解**、**注解处理器**和**提供者配置文件**以通过 ServiceLoader API 触发注解处理器。
*   另一个依赖于第一个并定义了一些**类和接口**，其中一个**使用第一个项目中定义的注解进行了注解**。

我用 调用第二个项目的构建（在构建并安装了第一个项目之后）`mvn clean && mvn compile`，只是为了确保编译将发生并且注释处理将运行。它按预期工作：简单的注释处理器只是在`target/classes/`包含一些虚拟数据的目录中生成一个资源文件。

当我尝试使用输出一些信息时，`processingEnv.getMessager().printMessage(...)`我开始遇到一些麻烦。如果我使用`Diagnostic.Kind.ERROR`，则构建停止并打印消息，正如我所期望的那样。但是，**与任何其他`Kind`（例如`NOTE`或`WARNING`），消息不会写在屏幕上**！

关于我的环境的一些信息：

```
Kubuntu 12.10
Linux 3.5.0-17-generic
Apache Maven 3.0.4 (r1232337; 2012-01-17 06:44:56-0200)
Java version: 1.7.0_09, vendor: Oracle Corporation 
```

我没有明确声明`maven-compiler-plugin`任何地方的版本，所以它必须使用默认版本（2.3.2？我不确定）。

如何`Kind`在此设置中启用所有消息的输出？（即通过maven启动注解处理器）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:43:56.603

显然，这是 maven-compiler-plugin 中的一个尚未修复的错误：[MCOMPILER-66 - Compiler 吞下来自注释处理器的消息](http://jira.codehaus.org/browse/MCOMPILER-66)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-16T23:09:47.950

尝试添加以下行：

```
<configuration>
  <showWarnings>true</showWarnings>
</configuration> 
```

进入项目的 pom.xml 中的 maven 编译器插件定义。这个解决方案对我有用。

见： [https ://gist.github.com/esamson/0777b97adde4c2f9bc31](https://gist.github.com/esamson/0777b97adde4c2f9bc31)

# crystal-reports - 删除 Crystal Report 中的字母表

> ID：13151683
> 
> 赞同：2
> 
> 时间：2012-10-31T05:17:44.250
> 
> 标签：crystal-reports, crystal-reports-2008

嗨，我是 Crystal Reports 的新手，我正在使用 Crystal Reports 2008，我想知道如何删除字符串中的字母字符，而只保留数字。有这个功能吗？

例如：Point 231 / Point 323 / USP 342 输出：231 / 323 / 342

谢谢，船长16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T11:07:36.110

使用以下公式

```
stringvar str;
stringvar str1;
numbervar counter;
numbervar leng;

leng := len({Your_Field});
if leng>0 then
 (
    for counter := 1 to leng do
    (
        If (Mid({Your_Field}, counter, 1)) in "a" to "z" Then
        (
            str1:=str1 + Mid({Your_Field}, counter, 1)
        )
        else
        (
            str := str + Mid({Your_Field}, counter, 1)
        )
    );
str
 ) 
```

在这里，`str`将获得非字母，并且`str1`只会获得给定字符串中的字母。`{Your_Field}`可以是包含字符串的字段或参数。通过打印`str`字母可以删除......

`231 / 323 / 342`这是我为您的给定输入得到的输出！

希望这会有所帮助，尝试并获得结果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:17:12.893

抱歉，我无法评论 Hariharan Anbazhagan 的代码（我似乎没有足够的声誉）。这是很好的代码，但我会添加 LCASE 来捕获所有大写字母。

```
If LCASE(Mid({?sample}, counter, 1)) in "a" to "z" Then 
```

如果您只想识别数字，还有一个 IsNumeric() 函数。

# c++ - 如何处理滞后峰值

> ID：13151688
> 
> 赞同：0
> 
> 时间：2012-10-31T05:18:55.000
> 
> 标签：c++, opengl, visual-studio-2012

我的应用程序出现延迟峰值，我想知道如何轻松找到导致峰值的代码

该应用程序只是第三人称游戏（没有网络）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:00:45.460

分析您的代码，检测瓶颈并进行优化。

对于 Windows，请查看用于分析代码的工具的问题和答案：[什么是 Windows 最好的免费 C++ 分析器？](https://stackoverflow.com/q/67554/476681)

无论瓶颈是否在 GPU 上，您都可以使用[gDEBugger](http://www.opengl.org/sdk/tools/gDEBugger/)

# windows-7 - windows被锁定时如何知道windows 7的锁定过程

> ID：13151689
> 
> 赞同：1
> 
> 时间：2012-10-31T05:19:07.980
> 
> 标签：windows-7, locking

我正在做项目：Windows 7 使用蓝牙锁定和解锁。对于这个项目，我想知道检查窗口锁定过程的方法。当我锁定窗户时，我正在使用 LockWorkstation() 函数。我怎样才能知道进程的状态？

谢谢你。

# python - 从一组整数中随机抽样

> ID：13151690
> 
> 赞同：2
> 
> 时间：2012-10-31T05:19:17.420
> 
> 标签：python, list, if-statement, random

我正在使用 python 3.2，我花了很多时间解决这个问题，但我似乎仍然无法将我的大脑包裹在它周围。

`number = random.randint ( x0 ,xn )`

我正在生成一个随机数。它的目的是让我的代码每次都以不同的方式出现在我身上。

例如，我写了 10 个文本变量。我已经解决了在每个程序运行时这些变量没有以相同的顺序出现的问题。

我遇到的问题是它们现在每次都随机出现。它每次都从 10 中选择一个，而不是第一次 10 和下一个 9。我似乎不知道如何排除以前的。

```
thelist = [0]

while i < x
     if number in thelist:
         >>>repeat<<<
     else:
         thelist.append (number)
         if ( number == x0 ):
             >>>something<<<
         elif ( number == x1 ):
             >>>something<<< 
```

这就是我想象的代码的样子，每次你循环一个更多的数字被附加到列表中，所以每次它选择一个已经在列表中的数字时，它都会再次重复循环，直到它使用了所有随机的数字.randint 可以拉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:36:52.657

这是一个洗牌功能：

```
import random

max = 15
x = list(range(max+1))

for i in range(max, 0, -1):
    n = random.randint(0, i)
    x[n], x[i] = x[i], x[n] 
```

这从一个排序的数字列表开始`[0, 1, ... max]`。

然后，它从索引 0 到索引 max 中选择一个数字，并将其与索引 max 交换。

然后，它从索引 0 到索引 max-1 中选择一个数字，并将其与索引 max-1 交换。

依此类推，对于 max-2, max-3, ... 1

正如 yosukesabai 正确指出的那样，这与 call 具有相同的效果`random.sample(range(max+1), max+1)`。这会从 中选择`max + 1`唯一的随机值`range(max+1)`。换句话说，它只是打乱了顺序。文档：[http ://docs.python.org/2/library/random.html#random.sample](http://docs.python.org/2/library/random.html#random.sample)

如果您想要更符合您提出的算法的内容，您可以这样做：

```
import random

max = 15
x = range(max+1)
l = []

for _ in range(max+1):
    n = random.randint(0,max)
    while n in l:
        n = random.randint(0,max)
    l.append(n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:07:54.200

根据我对您的描述和示例代码的理解，您希望以随机顺序`thelist`结束每个整数。如果是这样，您可以使用 非常简单地实现这一点，它将列表打乱：`x0``xn``random.shuffle()`

```
import random

x0 = 5
xn = 15

full_range = list(range(x0, xn))
print(full_range)
random.shuffle(full_range)
print(full_range) 
```

# ios - Milkman Games iOS 应用内购买 Adob e AIR 示例从未在应用商店完成购买

> ID：13151691
> 
> 赞同：0
> 
> 时间：2012-10-31T05:19:24.957
> 
> 标签：ios, air, in-app-purchase

我从 Milkman Games 购买了 Adob​​e Flash/AIR 的 iOS 应用内购买原生扩展，但遇到了问题，也许其他人在测试中看到了它（我与作者对应，但听起来不像他遇到的东西）。

当我仔细按照示例和说明进行非消耗性应用内购买时，它会问我（在我的 iPad 上）：

1.  确认您的应用内购买 [环境沙盒]
2.  获取我的 Apple ID/密码
3.  需要验证 [环境：沙盒]
4.  再次输入密码
5.  进入应用商店
6.  带有 [Environment: Sandbox] 的对话框，背景框显示“正在加载...”</li>
7.  再次输入密码...

然后它无休止地重复第 6 步和第 7 步，从未完成购买。我知道我的密码是正确的，因为当我输入错误时，我会收到一条警告消息。

有没有人见过这样的东西？感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T06:22:44.600

您需要先在 ipad 的设置中退出 iTunes。然后，当您登录您的应用程序时，请使用您的测试帐户。它不会要求您查看付款信息或任何其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:25:20.080

这可能是一个疯狂的尝试，但您使用的是真实的 Apple id 帐户还是测试的 Apple id 帐户？

当我设置应用内购买（虽然不使用 ANE）时，我记得类似的事情。

iTunes 连接、管理用户、测试用户。创建一个用户帐户并使用这些设置进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T17:52:23.377

当您不使用美国测试帐户时，会发生此密码循环。

创建一个美国测试帐户重置 ipad 并选择美国。

测试。

# c# - ASP.net 应用程序中的奇怪错误屏幕

> ID：13151692
> 
> 赞同：1
> 
> 时间：2012-10-31T05:19:25.707
> 
> 标签：c#, asp.net, error-handling

我正在开发一些 ASP.NET 应用程序。如果出现故障或错误，我会收到一些奇怪的错误屏幕。错误页面显示如下内容：

```
��`I�%&/m�{J�J��t��`$ؐ@�������iG#)�*��eVe]f@�흼��{����{����;�N'���?
\fdl��J�ɞ!���?~|?"��Ey�')=��y6�����h��贮
�:�V�˼n��E:��,m�Wy�����&lt;�ӶJ�e;~|W^�`4�u�A:�f��/> 
```

等等....

该应用程序当前处于测试阶段，因此我已从 web.config 中看到错误屏幕。有谁遇到过同样的问题，并得到了问题和解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:30:59.243

感谢 Rick Strahl 的解决方案，以及 @Andrew Sklyarevsky 的参考：D

参考和完整说明：[http ://www.west-wind.com/weblog/posts/2011/May/02/ASPNET-GZip-Encoding-Caveats](http://www.west-wind.com/weblog/posts/2011/May/02/ASPNET-GZip-Encoding-Caveats)

我解决了这个问题，因此解决方案是将以下代码添加到`Global.asax`：

```
protected void Application_Error(object sender, EventArgs e)
{
    // Remove any special filtering especially GZip filtering
    Response.Filter = null;
…
} 
```

甚至更好

```
protected void Application_PreSendRequestHeaders()
{
// ensure that if GZip/Deflate Encoding is applied that headers are set
// also works when error occurs if filters are still active
HttpResponse response = HttpContext.Current.Response;
if (response.Filter is GZipStream && response.Headers["Content-encoding"] != "gzip")
    response.AppendHeader("Content-encoding", "gzip");
else if (response.Filter is DeflateStream && response.Headers["Content-encoding"] != "deflate")
    response.AppendHeader("Content-encoding", "deflate");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:33:55.047

检查您正在处理的 ASP.NET 应用程序是否使用某种形式的自动 GZip 压缩，您的错误页面非常让人想起 Rick Strahl 在这里描述的内容：[http ://www.west-wind.com/weblog/posts/2011 /May/02/ASPNET-GZip-Encoding-Caveats](http://www.west-wind.com/weblog/posts/2011/May/02/ASPNET-GZip-Encoding-Caveats)。该博客文章中也有一个解决方案。

# node.js - 将参数传递给要求（加载模块时）

> ID：13151693
> 
> 赞同：133
> 
> 时间：2012-10-31T05:19:30.757
> 
> 标签：node.js, express

使用 require 加载模块时是否可以传递参数？

我有提供登录功能的模块 login.js。它需要一个数据库连接，我希望在我的所有模块中使用相同的数据库连接。现在我导出一个函数 login.setDatabase(...) 让我指定一个数据库连接，它工作得很好。但我宁愿在加载模块时传递数据库和任何其他要求。

```
var db = ...
var login = require("./login.js")(db); 
```

我对 NodeJS 很陌生，通常使用 Java 和 Spring 框架进行开发，所以是的......这是一个构造函数注入 :) 是否可以做类似我上面提供的代码的事情？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-10-31T17:00:12.797

根据您在[此答案](https://stackoverflow.com/a/13151726/379538)中的评论，我会做您想做的事情：

```
module.exports = function (app, db) {
    var module = {};

    module.auth = function (req, res) {
        // This will be available 'outside'.
        // Authy stuff that can be used outside...
    };

    // Other stuff...
    module.pickle = function(cucumber, herbs, vinegar) {
        // This will be available 'outside'.
        // Pickling stuff...
    };

    function jarThemPickles(pickle, jar) {
        // This will be NOT available 'outside'.
        // Pickling stuff...

        return pickleJar;
    };

    return module;
}; 
```

我几乎所有的模块都是这样构建的。似乎对我很有效。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2017-04-14T20:03:25.390

我不确定这是否仍然对人们有用，但是使用 ES6 我有一种方法可以做到这一点，我觉得它干净且有用。

```
class MyClass { 
  constructor ( arg1, arg2, arg3 )
  myFunction1 () {...}
  myFunction2 () {...}
  myFunction3 () {...}
}

module.exports = ( arg1, arg2, arg3 ) => { return new MyClass( arg1,arg2,arg3 ) } 
```

然后你得到你预期的行为。

```
var MyClass = require('/MyClass.js')( arg1, arg2, arg3 ) 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-10-31T05:22:58.150

是的。在您的`login`模块中，只需导出一个以`db`为参数的函数。例如：

```
module.exports = function(db) {
  ...
}; 
```

# c# - Azure 缓存 System.Runtime.InteropServices.SEHException

> ID：13151695
> 
> 赞同：3
> 
> 时间：2012-10-31T05:19:42.253
> 
> 标签：c#, azure, azure-storage, azure-web-roles, azure-caching

我遵循了[Windows Azure 缓存入门，](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/#header-2)并且不断收到 System.Runtime.InteropServices.SEHException: External component has throw an exception on the line：

```
var myCache = new DataCache("default"); 
```

我已将 WindowsAzure1 项目设置为启动项目。我试图在调试中运行时从 MVC API 项目访问缓存，但它不断出错。有谁知道我可能做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T05:14:45.843

我只是遇到了完全相同的错误，只是它发生在应用程序启动而不是点击特定命令时。经过几个小时并做了许多不同的教程后，我终于找到了我的项目不再在模拟器中运行的事实。

IE。对于 Azure 项目中的缓存（包括使用缓存的会话状态），您必须在模拟器中进行调试。对我来说，我在云项目上按 f5。由于某种奇怪的原因，这停止了工作。
在解决方案属性-> 通用属性-> 启动下进行修复。选择“单一启动项目”——选择你的 Azure 云项目。
然后在您的 azure 项目上按 f5 开始。

这对我们来说是固定的。我们实际上得到了一个新的错误错误，即在部署中找不到[缓存集群角色名称]。一旦我看到这个错误，通过将 [cache cluster role name] 替换为我们的 Cache Worker 角色名称就很容易解决。

# python - i array[n][i] = 0 如何作为python中的追加

> ID：13151696
> 
> 赞同：0
> 
> 时间：2012-10-31T05:19:52.767
> 
> 标签：python, multidimensional-array, python-3.x, append, insert-into

我有以下代码：

```
for i in range(w[n], W):
    array[n][i] = v[n] 
```

在 python 中，这给出了一个超出索引的错误，因为我没有使用 append...为了在 python 中工作，我将如何纠正上述内容？

所有帮助将不胜感激！谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:25:19.197

首先，您不应该将名称“array”用于数组。尽管它不是 python 中的保留名称，但它被认为是不好的编程习惯。一种做你想做的事情的方法是这样的：

```
myArr = [[0 for col in range(n)] for row in range(W)]
for i in range(w[n], W):
            myArr[n][i] = v[n] 
```

第一行创建了一个初始化为 0 的 [n][W] 元素数组。这是在 python 中实现这一点的最简单方法，无需添加额外的依赖项。

# mysql - 如何更改视图中的数据类型？

> ID：13151697
> 
> 赞同：4
> 
> 时间：2012-10-31T05:20:09.620
> 
> 标签：mysql, sql, view, type-conversion

在 MySQL 中，有没有一种方法可以更改字段的数据类型，而不是原始数据类型，而无需中间表参与？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T05:21:51.487

看看[12.10。转换函数和运算符](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

> 该`CAST()`函数接受任何类型的表达式并生成指定类型的结果值，类似于`CONVERT()`.
> 
> `CAST(expr AS type)`
> 
> 和
> 
> `CONVERT(expr,type)`,`CONVERT(expr USING transcoding_name)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-12T16:04:08.470

CAST(expr AS type) 仅限于转换为以下类型：

*   二进制
*   字符
*   日期
*   约会时间
*   签
*   时间
*   未签名

如果您需要转换为其他值，例如布尔值 (BIT (1))，以下将起作用。使用您需要的返回类型定义一个函数，并在函数体内计算您的值。

如果您从视图列的定义中调用此函数，则该列的类型将是您的函数的返回类型。

# excel - Excel从列中提取和平均值

> ID：13151698
> 
> 赞同：3
> 
> 时间：2012-10-31T05:20:09.730
> 
> 标签：excel, excel-formula

如果我有一列有名字，另一列有工资，有可能吗？IE

```
约翰 120 美元  
约翰 100 美元  
莎莉 $90  
莎莉 100 美元  
莎莉 $80
```

从第 2 列中提取 John 和 Sally 的值，然后将它们平均并将结果放入另一列的两个单元格中？我可以使用电子表格命令还是需要 VBA 自动执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:26:13.910

你可以使用

1.  `AVERAGEIFS`（适用于 xl07 及更高版本）
2.  数据透视表请参阅[Debra 的网站](http://www.contextures.com/xlfaqPivot.html)以获得很好的参考

如果您的数据在其中，`A2:B6`则此公式`D1`（在 中带有“John” `C1`）有效
`=AVERAGEIFS($B$2:$B$6,$A$2:$A$6,D1)`

![在此处输入图像描述](../Images/4146573c9b797000d79db199969d580b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:32:10.323

如果您需要您的电子表格使用早于 2007 年的 Excel 版本，您也可以使用以下公式：

```
=SUM(($D$1=$A$2:$A$6)*($B$2:$B$6)) / COUNTIF($A$2,$D$1) 
```

这是一个数组公式，因此您需要在输入时按 CTRL+SHIFT+ENTER 而不是 ENTER。

该公式适用于*brettdj*答案中的示例表，其中

*   姓名列表在 A2:A6 中
*   值列表在 B2:B6 中
*   “约翰”在 D1
*   这个公式进入 E1 （或任何地方，实际上）。

它的工作原理是计算 B2:B6 中对应的 A2:A6 值为 John 的值的总和，然后将其除以 A2:A6 中的 John 总数，返回平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:18:25.627

如果您使用分号 (;) 而不是逗号 (,)，它会完美运行，如下所示：

```
=AVERAGEIFS($B$2:$B$6,$A$2:$A$6,D1) - it doesn't work,
=AVERAGEIFS($B$2:$B$6;$A$2:$A$6;D1) - it works! 
```

# android - 在 Spinner 上设置文本

> ID：13151699
> 
> 赞同：9
> 
> 时间：2012-10-31T05:20:13.377
> 
> 标签：android, android-spinner

这是 AccountListView，它检索并显示我在列表视图中添加到数据库中的数据，我添加了现金和银行账户，当我在列表视图中单击现金时，它打开交易意图，其中有一个微调器添加了哪些现金和银行，我希望它显示我在列表视图上单击的数据。请注意，只有微调器才能成功显示现金和银行余额。

```
public class AccountListActivity extends Activity implements OnClickListener, OnItemClickListener {

private ListView AccountListView;
private Button addNewAccountButton;

private ListAdapter AccountListAdapter;

private ArrayList<AccountDetails> pojoArrayList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    AccountListView = (ListView) findViewById(R.id.AccountListView);
    AccountListView.setOnItemClickListener(this);
    registerForContextMenu(AccountListView);
    addNewAccountButton = (Button) findViewById(R.id.namesListViewAddButton);
    addNewAccountButton.setOnClickListener(this);

    pojoArrayList = new ArrayList<AccountDetails>();

    AccountListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());

    AccountListView.setAdapter(AccountListAdapter);

}
@Override  
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Menu");  
    menu.add(0, v.getId(), 0, "Update");  
    menu.add(0, v.getId(), 0, "Delete");
    menu.add(0, v.getId(), 0, "Cancel");

}  

public List<String> populateList(){

    List<String> AccountList = new ArrayList<String>();

    DatabaseAdapter openHelperClass = new DatabaseAdapter(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query(DatabaseAdapter.TABLE_ACCOUNT, null, null, null, null, null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {

        String aBNAME = cursor.getString(cursor.getColumnIndex(DatabaseAdapter.KEY_BANKNAME));
        String aBTYPE = cursor.getString(cursor.getColumnIndex(DatabaseAdapter.KEY_TYPE));
        String aAccNum = cursor.getString(cursor.getColumnIndex(DatabaseAdapter.KEY_ACCNUM));
        String aBal = cursor.getString(cursor.getColumnIndex(DatabaseAdapter.KEY_BALANCE));
        String aEDate = cursor.getString(cursor.getColumnIndex(DatabaseAdapter.KEY_EXPIRYDATE));

        AccountDetails ugPojoClass = new AccountDetails();
        ugPojoClass.setaBankName(aBNAME);
        ugPojoClass.setaAccountType(aBTYPE);
        ugPojoClass.setaAccountNumber(aAccNum);
        ugPojoClass.setaBalance(aBal);
        ugPojoClass.setaDate(aEDate);

        pojoArrayList.add(ugPojoClass);

        AccountList.add(aBNAME);    
    }

    sqliteDatabase.close();

    return AccountList;
}

    @Override
public void onItemClick( AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    Toast.makeText(getApplicationContext(), "Clicked on :" + arg2, Toast.LENGTH_SHORT).show();

    Intent updateDeleteAccountIntent = new Intent(this, Transaction.class);

    AccountDetails clickedObject =  pojoArrayList.get(arg2);

    Bundle dataBundle = new Bundle();
    dataBundle.putString("clickedBankName", clickedObject.getaBankName());
    dataBundle.putString("clickedBankType", clickedObject.getaAccountType());
    dataBundle.putString("clickedBankNumber", clickedObject.getaAccountNumber());
    dataBundle.putString("clickedBankBalance", clickedObject.getaBalance());
    dataBundle.putString("clickedExpiryDate", clickedObject.getaDate());

    updateDeleteAccountIntent.putExtras(dataBundle);

    startActivity(updateDeleteAccountIntent);

} 
```

当事务意图打开时，它获取 Transaction.java 的值

```
public class Transaction extends Activity implements OnClickListener{

 private Spinner Category, Account, typerp;
 private TextView tvSaveNew, tvDisplayDate;
 private EditText ItemName, Amount, Notes;
 private EditText Balance, Result;
 private ImageButton TransDate, ImageButton1;
 private Button save, newt;

private String bundledBankName;
private String bundledBankType;
private String bundledBankNumber;
private String bundledBankBalance;
private String bundledBankDate;
private String BankNameValue;
private String NewBankBalanceValue;
private String BankTypeValue;
private String BankNumberValue;
private String BankBalanceValue;
private String BankDateValue;

 private int year;
 private int month;
 private int day;
 static final int DATE_DIALOG_ID = 999;

 private ArrayList<TransactionDetails> TransactionDetailsObjArrayList;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.transaction);

    save = (Button) findViewById(R.id.TbtnSave);
    newt = (Button) findViewById(R.id.btnNewTran);
    TransDate = (ImageButton) findViewById(R.id.transDate);
    Category = (Spinner) findViewById(R.id.Tcategory);
    Account = (Spinner) findViewById(R.id.TAccount);
    typerp = (Spinner) findViewById(R.id.TypeR);
    ItemName = (EditText) findViewById(R.id.TransItemName);
    Amount = (EditText) findViewById(R.id.TransAmount);
    Notes = (EditText) findViewById(R.id.tranNote);
    Balance = (EditText) findViewById(R.id.RetrieveBalance);
    Result = (EditText) findViewById(R.id.ResultBalance);
    tvDisplayDate = (TextView) findViewById(R.id.ttvDisplayDate);

    save.setOnClickListener(this);
    newt.setOnClickListener(this);
    setCurrentDateOnView();
    TransDate.setOnClickListener(this);

    TransactionDetailsObjArrayList = new ArrayList<TransactionDetails>();
    loadSpinnerData();

    Bundle takeBundledData = getIntent().getExtras();

    bundledBankName = takeBundledData.getString("clickedBankName");

    bundledBankBalance = takeBundledData.getString("clickedBankBalance");

    Account.setSelection(0);
    Balance.setText(bundledBankBalance);

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-28T19:21:35.380

不久前使用包含字符串列表的微调器对此进行了测试，似乎工作正常。可能会帮助某人。

```
public void setSpinText(Spinner spin, String text)
{
    for(int i= 0; i < spin.getAdapter().getCount(); i++)
    {
        if(spin.getAdapter().getItem(i).toString().contains(text))
        {
            spin.setSelection(i);
        }
    }

} 
```

:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T05:25:05.797

使用以下代码的微调器的第一个 SetAdapter。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(PaymentTerms_NewInvoice_Activity.this, android.R.layout.simple_spinner_item, mTempArray);
mSpnTermsCode.setAdapter(adapter); 
```

现在使用以下代码将 Spinner 的第一项显示为选定项。

```
mSpnTermsCode.setSelection(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-27T15:52:13.900

如果您使用的是 Kotlin，这是一个扩展功能，可根据 user3786552 的[回答设置微调器的文本](https://stackoverflow.com/a/24470136/6319681https://)

```
fun Spinner.setSpinnerText(text: String) {
        for (i in 0 until this.adapter.count) {
            if (this.adapter.getItem(i).toString().contains(text)) {
                this.setSelection(i)
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T05:26:25.703

对于 Spinner，您必须设置 Adapter 来绑定您的数据

```
 Spinner Account;
     ArrayAdapter<String> productaddapter;
     List<String> productname=new ArrayList<String>();
     //Fill your data in productname arraylist..          

     productaddapter = new ArrayAdapter<String>(getApplicationContext(),android.R.layout.simple_spinner_dropdown_item, productname);

     Account.setAdapter(productaddapter); 
```

在适配器中，您必须设置您的列表。

# stored-procedures - 如果我使用 FOR UPDATE 子句如何解锁一行

> ID：13151701
> 
> 赞同：1
> 
> 时间：2012-10-31T05:20:23.490
> 
> 标签：stored-procedures, plsql, oracle10g, oracle11g, plsqldeveloper

在程序中，如果我们使用`FOR UPDATE`子句，它将锁定特定行并只允许一个客户端更新，而其他客户端此时只能获取同一行中的数据。

我的问题是它什么时候会解锁行，在编写程序时我们应该怎么做才能解锁行？以这个例子为例，我使用`FOR UPDATE`了 client_count 的子句，当它在这个过程中解锁特定的行时。

```
create or replace PROCEDURE newprocedur(inMerid IN VARCHAR2,outCount OUT NUMBER) AS 
CURSOR c1 IS 
  select CLIENT_COUNT 
    from OP_TMER_CONF_PARENT 
   where MER_ID = inMerid 
   FOR UPDATE OF CLIENT_COUNT;
BEGIN
  Open c1;
  loop
    fetch c1 into outCount;
    exit when c1%NOTFOUND;
    outCount:=outCount+1;
    update OP_TMER_CONF_PARENT 
       set CLIENT_COUNT = outCount 
     where current of c1;
  end loop;
  close c1;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:47:07.100

更新的行将在提交后解锁。

# php - 使用php的苹果推送通知服务

> ID：13151702
> 
> 赞同：1
> 
> 时间：2012-10-31T05:20:30.540
> 
> 标签：php, iphone

我使用以下代码获取推送通知。但我收到类似 **警告的错误：stream_socket_client() [function.stream-socket-client]：无法连接到 ssl://gateway.sandbox.push.apple.com:2195（无法找到套接字传输“ssl " - 您在配置 PHP 时是否忘记启用它？) 在第 21 行的 D:\xampp\htdocs\push_test\push_test.php 连接失败：5 无法找到套接字传输“ssl” - 您是否忘记启用当你配置 PHP 的时候呢？** 我不知道该怎么办。请帮忙..

```
// Put your device token here (without spaces):
$deviceToken = 'xxxxxxxxxxxxxxxxxxxxxx';

// Put your private key's passphrase here:
$passphrase = 'xxxxxxxxx';

// Put your alert message here:
$message = 'My first push notification!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert',      'server_certificates_bundle_sandbox.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.sandbox.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:39:01.423

它表明您尚未在服务器上启用 OpenSSL 支持，请检查并告诉我。

# java - ASM 树 API 插入 InsnList 会导致 StackOverflowError？

> ID：13151709
> 
> 赞同：1
> 
> 时间：2012-10-31T05:21:18.353
> 
> 标签：java, compiler-construction, jvm, bytecode, java-bytecode-asm

我正在尝试遵循 ASM 用户手册 (http://download.forge.objectweb.org/asm/asm4-guide.pdf) 第 112 页上的委托示例。到目前为止，我有一些看起来像这样的东西：

```
class MyMethodAdapter extends MethodVisitor {
    MethodVisitor next;
    public MyMethodAdapter(int access, String name, String desc,
                           String signature, String[] exceptions, MethodVisitor mv) {
        super(
            Opcodes.ASM4,
            new MethodNode(access, name, desc, signature, exceptions)
        );
        next = mv;
    }

    @Override public void visitEnd() {
        MethodNode mn = (MethodNode) mv;

        mn.instructions.insert(new MethodInsnNode(INVOKESTATIC, "runtime/Recorder", "checkBytecodes", "()V"));

        mn.accept(next);
    }
} 
```

不幸的是，当我运行它时，它失败了：

```
*** java.lang.instrument ASSERTION FAILED ***: "!errorOutstanding" with message transform method call failed at ../../../src/share/instrument/JPLISAgent.c line: 844
*** java.lang.instrument ASSERTION FAILED ***: "!errorOutstanding" with message transform method call failed at ../../../src/share/instrument/JPLISAgent.c line: 844

Exception: java.lang.StackOverflowError thrown from the UncaughtExceptionHandler in thread "main" 
```

这只发生在`mn.instructions.insert(`线路存在时，所以大概我的转换管道的其余部分工作。我在这里有什么遗漏吗？我实际上是将我的转换放在`// put your transformation code here`手册中标出的区域中，由此产生的错误是完全无法理解的。

`add()`将指令添加到方法指令列表的末尾似乎运行良好，但这不是我想要的。我希望新的静态调用成为方法体中的第一件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:12:50.343

如果没有堆栈跟踪，很难说这是否与 ASM API 有关。

您仍然可以使用以下命令在指令列表的开头插入您的呼叫：

```
mn.instructions.insertBefore(mn.instructions.getFirst(), 
    new MethodInsnNode(INVOKESTATIC, "runtime/Recorder", "checkBytecodes", "()V")); 
```

# mysql - Activerecord - 如何做到这一点？

> ID：13151710
> 
> 赞同：0
> 
> 时间：2012-10-31T05:21:19.103
> 
> 标签：mysql, ruby, activerecord

每天，我需要运行脚本并向我的所有用户发送“考试”或一组问题。我已将其建模为 ActiveRecord::Base 的子类“考试”。现在，我如何发送用户的考试实例？

我在想的是创建一个名为“ExamInstance”的新类，它将引用“Exam”和用户。

我是 SQL 和 ActiveRecord 的新手，所以如果有人可以帮助我更好地对此进行建模，以便我以后可以避免出现问题，或者只是给我一些见解，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:42:40.483

我建议只使用为和之间的多对多关系`has_many :through`创建模型`UserExam``exam``user`

```
class User < ActiveRecord::Base
  has_many :users_exams
  has_many :exams, :through => :users_exams
end

class UserExam < ActiveRecord::Base
  belongs_to :users
  belongs_to :exams
end

class Exam < ActiveRecord::Base
  has_many :users_exams
  has_many :users, :through => :users_exams
end 
```

有关更多信息[`has_many :through`](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:46:54.857

添加“ExamUser”模型以跟踪考试和相应的用户参考。模型骨架看起来像：

```
 class ExamUser < ActiveRecord::Base
  belongs_to :exam
  belongs_to :user
end 
```

然后，您可以遍历此表的记录以发送您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:39:37.833

你可以像这样设计你的新模型..

```
 class ExamUser < ActiveRecord::Base
   belongs_to :user  # user has many exams
   belongs_to :exam  #  exam has many users
  end 
```

# java - 将文本文件读入Java中的char数组

> ID：13151714
> 
> 赞同：7
> 
> 时间：2012-10-31T05:21:42.800
> 
> 标签：java, arrays, file-io, char, bufferedreader

我正在读取一个文本文件并尝试将它逐个字符存储到一个数组中。我的方法（如下）预先定义了`char`一个初始长度为 100000 的数组（我的主要问题）。因此，如果文件包含的字符少于该数量（如果字符多于该数量，也会出现问题），那么我的数组中有空值。我想避免这种情况。有没有办法预先确定文本文件中存在的字符数量？还是有更好的方法来按字符存储文件？

```
char buf[] = new char[100000];
FileReader fr = new FileReader(filename);
BufferedReader br = new BufferedReader(fr);
br.read(buf);
for(int i = 0; i < buf.length; i++)
{
     //Do stuff here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T05:23:36.170

使用 ArrayList of Characters 来接受这些值。之后将 ArrayList 转换为 Array 为

```
 char[] resultArray = list.toArray(new char[list.size()]); 
```

您应该使用 br.readLine() 而不是 br.read()，如下所示：

```
String str;
while((str = br.readLine())!=null){
        str.tocharArray();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T05:26:42.003

改用扫描仪！

我会使用扫描仪并逐行读取而不是逐字符读取，然后将其存储为字符串。如果您真的想要一个 char 数组，那么之后更容易将其取出。

这在功能上做同样的事情：

```
String theString = "";

File file = new File("data.txt");
Scanner scanner = new Scanner(file);

theString = scanner.nextLine();
while (scanner.hasNextLine()) {
       theString = theString + "\n" + scanner.nextLine();
}

char[] charArray = theString.toCharArray(); 
```

这样做的好处是您可以利用 Java 的 String 类型，它为您处理所有讨厌的长度和连接业务。并且 String.toCharArray() 方法已经内置以返回一个数组，该数组会根据您的需要自动调整大小。

# javascript - 简单的 impress.js 不起作用

> ID：13151719
> 
> 赞同：2
> 
> 时间：2012-10-31T05:21:54.130
> 
> 标签：javascript, html, slideshow, impress.js

不知何故，即使是最简单的 impress.js 幻灯片也不适合我:( [http://dl.dropbox.com/u/655237/events/GTG.zip](http://dl.dropbox.com/u/655237/events/GTG.zip) ... ，总是必须使用你的例子。

```
<html lang="en">
    <head>
        <title>Impress Demo</title>
    </head>
    <body>
        <div id="impress">
            <div id="start">
                    <p style='width:1000px;font-size:80px;
                text-align:center'>Creating Stunning Visualizations</p>
                <p>Impress.js </p>
                </div>

            <div id="slide2" data-x="-1200" data-y="0">
                    <p style='width:1000px;font-size:80px;'>
                First Slide Moves From Left To Right</p>
                <p>Impress.js </p>
                </div>
        </div>
        <script type="text/javascript">impress().init();</script>
        <script type="text/javascript" src="js/impress.js"></script>
    </body>
</html> 
```

我在 js 目录下有 impress.js 文件。最新的浏览器仍然没有显示幻灯片。我正在使用 Firefox 16。 ![在此处输入图像描述](../Images/b16c4ef5abff4e21c86e752b7e79662e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T05:33:54.670

您在加载库之前调用 impress，尝试切换脚本标签的顺序：

```
<script type="text/javascript" src="js/impress.js"></script>
<script type="text/javascript">impress().init();</script> 
```

或者使用准备好的处理程序函数来初始化您的页面脚本，例如`window.onload`或 jquery 的`ready()`. 有关这方面的更多信息，请参阅[此问题](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload)。

此外，通过[印象深刻的示例](https://github.com/bartaz/impress.js/blob/master/index.html)，在最简单的情况下，演示的每个步骤都应该是元素内部的一个`#impress`元素，其类名为`step`.

# facebook - 多个facebutton按钮，例如具有不同的值

> ID：13151720
> 
> 赞同：1
> 
> 时间：2012-10-31T05:21:53.860
> 
> 标签：facebook, wordpress, facebook-like, facebook-opengraph

一个页面中是否可以有多个 og:title(etc)？

我在同一页面上有 4 种不同的产品（网址：site/#theblock） 我希望我的用户在他们的 FB 上通过正确的链接分享产品。

我尝试了 jquery，但它不起作用。我使用的是 wordpress cms。

知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:27:00.663

您需要使用一些服务器端技术来根据查询字符串参数动态更改 og 标签。哈希标签将不起作用，因为它们仅由浏览器使用并且不会发送到服务器。

设置 og 标签服务器端的原因是因为 Facebook 的爬虫不运行 JavaScript，因此您的服务器需要在提供页面时制作正确的标签。

# android - TYPE_MAGNETIC_FIELD Android 无数据

> ID：13151723
> 
> 赞同：2
> 
> 时间：2012-10-31T05:22:01.930
> 
> 标签：android, android-sensors

我为 Galaxy Tab 7 编写了一些简单的代码来显示 TYPE_MAGNETIC_FIELD 数据。不幸的是，这没有提供任何数据。

我可以看到一个 TYPE_MAGNETIC_FIELD 传感器（已检查它是否存在）。我可以成功地向它添加一个事件侦听器，但是我从未从中获取任何数据。其他传感器工作正常，例如光和加速度计。这是在 Galaxy Tab 7 上。

`onSensorChanged(SensorEvent event)`永远不会被解雇 `case Sensor.TYPE_MAGNETIC_FIELD:`

因此，我没有从磁场传感器获得数据。

还有其他人遇到这个问题或知道解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-28T11:05:06.413

我也遇到过这个问题。在我的情况下，磁传感器不起作用。在安装了一些指南针应用程序和[https://play.google.com/store/apps/details?id=scd.atools](https://play.google.com/store/apps/details?id=scd.atools)后，我确定了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:48:40.127

原来是传感器坏了。=((

# android - 在主屏幕上创建 android 应用程序的快捷方式

> ID：13151724
> 
> 赞同：1
> 
> 时间：2012-10-31T05:22:30.460
> 
> 标签：android

> **可能重复：**
> [Android 在主屏幕上创建快捷方式](https://stackoverflow.com/questions/6337431/android-create-shortcuts-on-the-home-screen)

一旦我的应用程序安装在 android 设备中，我想在主屏幕上创建我的 android 应用程序的快捷方式。我该怎么做呢..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:29:53.563

作为@Kailash 的回答：

您可以使用下面对我有用的代码：

```
Intent shortcutIntent = new Intent();
shortcutIntent.setClassName("WRITE YOUR PACKAGE NAME", "WRITE HERE YOUR CLASS NAME");

Intent addIntent = new Intent();
addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "WRITE HERE YOUR SHORTCUT NAME");
addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
Intent.ShortcutIconResource.fromContext(context, R.drawable.icon));
addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
            context.sendBroadcast(addIntent); 
```

您必须**在 AndroidManaifest.xml 中使用以下权限**

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" /> 
```

希望能帮助到你。

# javascript - AngularJS 与 jQuery 有何不同

> ID：13151725
> 
> 赞同：389
> 
> 时间：2012-10-31T05:22:42.320
> 
> 标签：javascript, jquery, angularjs

我只知道一个 js 库，那就是[jQuery](http://jquery.com/)。
但是我在小组中的其他编码人员正在将[AngularJS](http://angularjs.org/)更改为他们在新项目中的默认库。

我对此一无所知。它与 jQuery 有何不同？
我已经为 jQuery 中的类似任务完​​成了一组函数。我还能在 AngularJS 中使用 jQuery 的东西吗？

* * *

## 回答 #1

> 赞同：414
> 
> 时间：2012-10-31T05:33:17.597

1.  Angular 1 是一个框架，而 Angular 2 是一个**平台**。（[参考](http://www.webdesignermag.co.uk/angular-creator-misko-hevery-reveals-what-lies-ahead-for-the-framework/)）

对于开发人员，Angular2 提供了一些除了在屏幕上显示数据之外的功能。例如，使用 angular2 cli 工具可以帮助您“预编译”您的代码并生成必要的 javascript 代码（[tree-shaking](https://auth0.com/blog/2016/05/06/ng-conf-summary-day-2/)）以将下载大小缩小到 35Kish。

2.  Angular2 模拟了 Shadow DOM。（[参考](http://victorsavkin.com/post/118372404541/the-core-concepts-of-angular-2)）

这为服务器渲染打开了一扇门，可以解决 SEO 问题并使用在浏览器上不起作用的 Nativescript 等。

*   [官方文档网站](https://angular.io/)

*   [ng-conf 2016 的第一天主题演讲](https://youtu.be/gdlpE9vPQFs?list=PLOETEcp3DkCq788xapkP_OU-78jhTf68j)

*   [资源链接](https://github.com/AngularClass/awesome-angular2) **原文：** 基本上，jQuery 是您操纵和控制 DOM 元素的绝佳工具。如果您只关注 DOM 元素而没有数据 CRUD，例如构建网站而不是 Web 应用程序，那么 jQuery 是顶级工具之一。（您也可以为此目的使用 AngularJS。）

AngularJS 是一个**框架**。它具有以下特点

1.  双向数据绑定
2.  MVW 模式（MVC 风格）
3.  模板
4.  自定义指令（可重用组件、自定义标记）
5.  REST 友好
6.  深度链接（为任何动态页面设置链接）
7.  表单验证
8.  服务器通信
9.  本土化
10.  依赖注入
11.  完整的测试环境（单元，e2e）

检查这个[演示文稿](http://sberan.github.com/angularTalk/)和这个[很棒的介绍](http://www.yearofmoo.com/2012/08/use-angularjs-to-power-your-web-application.html)

不要忘记阅读官方[开发者指南](http://docs.angularjs.org/guide/)

或者从这些很棒的[视频教程中学习](http://egghead.io/)

如果您想观看更多教程视频，请查看这篇文章，[收集 60 多个最佳 AngularJS 教程](http://www.thesocialmediatoday.com/collection-of-best-60-angularjs-tutorials/)。

您可以毫无问题地将 jQuery 与 AngularJS 一起使用。

事实上，AngularJS 在其中使用了 jQuery lite，这是一个很棒的工具。

来自[常见问题](http://docs.angularjs.org/misc/faq)

> Angular 是否使用 jQuery 库？
> 
> 是的，如果在引导应用程序时，Angular 存在于您的应用程序中，则 Angular 可以使用 jQuery。如果 jQuery 不在您的脚本路径中，Angular 将回退到它自己的 jQuery 子集实现，我们称之为 jQLite。

但是，不要尝试使用 jQuery 来修改 AngularJS 控制器中的 DOM，而是在你的指令中进行。

**更新：**

Angular2 已发布。**[这](https://github.com/AngularClass/awesome-angular2)**是初学者的资源清单

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-07-14T05:46:02.273

我想从开发人员的角度添加一些关于**AngularJS**与**jQuery的区别的内容。**

在 AngularJS 中，你必须对你想要完成的事情有一个非常**结构化的视图和方法。**完成任务几乎没有遵循**线性**方式，而是各种对象之间的交换处理请求和动作，因此这是必要的，因为 Angular 是基于**MVC 的**框架。它还需要最终应用程序的至少通用蓝图，因为编码很大程度上取决于您希望如何完成交互。

jQuery 就像一首**免费**的诗歌，您可以写下几行字，并保持一些适合您完成任务的关系和动力。

虽然，在 Angular JS 中，你应该遵循一些规则，同时保持适当的动力和关系，也许它更像是古典斯宾塞十四行诗（一位著名的古典诗人），其诗歌是结构性的，并且与许多规则相关联。

与 AngularJS 相比，jQuery 更像是代码和函数的集合（如前所述，这非常适合 DOM 操作和快速实现效果），而 AngularJS 是一个真正的框架，它使开发人员能够构建企业 Web -在组织良好的路由和管理中具有大量数据绑定和交换的应用程序。

此外，AngularJS 不**依赖 jQuery**来完成其任务。它有两个非常出色的特性，在任何意义上都没有在 jQuery 中找到：

**1-** Angular JS 教你如何编写代码并完成一个目标，而不仅仅是通过任何方式完成一个目标。值得一提的是，AngularJS 充分利用了 Javascript 的核心和核心，并为您在应用程序中融入 DI（依赖注入）等技术铺平了道路。要使用 angularJS，您应该（或必须）学习更多使用 Javascript 进行编码的高级技术。

**2-** Angular JS 完全独立于处理指令和构建您的应用程序；然后您可能会简单地声称 jQuery 可以做同样的事情（独立性），但实际上，AngularJS，正如在上面几行中多次提到的那样，以最优秀的基于 MVC 的结构方式具有独立性。

最后一点是，没有名字的战争，因为有偏见或主观是非常令人不安的。jQuery 的巨大和伟大已经得到了证明，但是它们的使用和限制（任何框架或软件）是讨论和类似辩论的关注点。

**更新：**

使用 AngularJS 是决定性的，因为它的实现成本很高，但它为应用程序的未来扩展、转换和维护奠定了坚实的基础。AngularJS 适用于 Web 的新世界。它的目标是构建具有最少资源消耗（仅从服务器加载必要资源）、快速响应时间以及高度可维护性和可扩展性围绕结构化系统的应用程序。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-12-01T07:38:56.733

**AngularJS：** AngularJS 用于开发繁重的 Web 应用程序。如果在引导应用程序时，AngularJS 存在于 Web 应用程序中，则 AngularJS 可以使用 jQuery。如果它不存在于脚本路径中，那么 AngularJS 会退回到它自己的 jQuery 子集的实现。

**JQuery：** jQuery 是一个小型、快速且功能丰富的 JavaScript 库。它使 HTML 文档遍历和操作、事件处理、动画和 Ajax 等事情变得更加简单。jQuery 简化了 JavaScript 中的许多复杂事物，例如 AJAX 调用和 DOM 操作。

在此处阅读更多详细信息：[angularjs-vs-jquery](http://www.rrpowered.com/2014/04/angularjs-vs-jquery/)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-06-29T20:23:21.090

我认为[这](https://www.airpair.com/angularjs/posts/jquery-angularjs-comparison-migration-walkthrough)是一个很好的图表，简而言之描述了差异。快速浏览它会显示大部分差异。

[![在此处输入图像描述](../Images/9ff20d70095558199d67fd811b30ffca.png)](https://i.stack.imgur.com/3kJEq.png)

我想补充的一件事是，**AngularJS**可以遵循**MVVM**设计模式，而**jQuery**不遵循任何标准的面向对象模式。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-10-27T13:49:06.330

他们在不同的层次上工作。

**从初学者的角度来看**，查看差异的最简单方法是[jQuery](https://jquery.com/)本质上是 JavaScript 的抽象，所以我们为 JavaScript 设计页面的方式几乎就是我们为[jQuery](https://jquery.com/)设计的方式。从 DOM 开始，然后在其之上构建一个行为层。[Angular.Js](https://angularjs.org/)并非如此。这个过程实际上是从头开始的，所以最终的结果就是想要的视图。

使用[jQuery](https://jquery.com/)，您可以进行 dom 操作，使用[Angular.Js](https://angularjs.org/) ，您可以创建整个 Web 应用程序。

* * *

[jQuery](https://jquery.com/)的构建是为了抽象出各种浏览器特性，并与 DOM 一起工作，而无需添加 IE6 检查等。随着时间的推移，它开发了一个很好的、健壮的 API，它允许我们做很多事情，但它的核心是处理 DOM、查找元素、更改 UI 等等。将其视为直接使用螺母和螺栓。

[Angular.Js构建为](https://angularjs.org/)[jQuery](https://jquery.com/)之上的一个层，用于将[MVC](https://blog.codinghorror.com/understanding-model-view-controller/)概念添加到前端工程中。[Angular.Js](https://angularjs.org/)不是为您提供使用 DOM 的 API，而是为您提供数据绑定、模板、自定义组件（类似于[jQuery UI](https://jqueryui.com/)，但声明式而不是通过 JS 触发）等等。将其视为更高级别的工作，您可以将组件连接在一起，而不是直接在螺母和螺栓级别。

**此外**，[Angular.Js](https://angularjs.org/)为您提供适用于各种项目的结构和概念，例如控制器、服务和指令。[jQuery](https://jquery.com/)本身可以用多种（无数）方式来做同样的事情。值得庆幸的是，使用[Angular.Js](https://angularjs.org/)的情况要少得多，这使得进入和退出项目变得更加容易。它为多人为同一个项目做出贡献提供了一种理智的方式，而无需从头开始重新学习系统。

* * *

**一个简短的比较可以是这样的——**

## [jQuery](https://jquery.com/)

*   对 CSS 选择器有适当了解的人可以轻松使用
*   它是一个用于 DOM 操作的库
*   与模型无关
*   轻松操作网页内容
*   应用样式以使 UI 更具吸引力
*   简单的 DOM 遍历
*   效果和动画
*   简单的 AJAX 调用和
*   实用程序可用性
*   没有双向绑定功能
*   当项目规模增加时变得复杂且难以维护
*   [有时您必须编写更多代码才能实现与Angular.Js](https://angularjs.org/)中相同的功能

## [Angular.Js](https://angularjs.org/)

*   它是一个 MVVM 框架
*   用于创建 SPA（单页应用程序）
*   它具有路由、指令、双向数据绑定、模型、依赖注入、单元测试等关键特性
*   是模块化的
*   可维护，当项目规模增加时
*   快
*   双向数据绑定 REST 友好的基于 MVC 的模式
*   深度链接
*   模板
*   内置表单验证
*   依赖注入
*   本土化
*   完整的测试环境
*   服务器通信

以及更多

[![在此处输入图像描述](../Images/bd8dea5e5d6ddc35787fcdcc1c3d1368.png)](https://i.stack.imgur.com/rXDtX.png)

认为这有帮助。

**可以找到更多**-

*   [jQuery 与 AngularJS：比较和迁移演练](https://www.airpair.com/angularjs/posts/jquery-angularjs-comparison-migration-walkthrough)
*   [“在 AngularJS 中思考”如果我有 jQuery 背景？](https://stackoverflow.com/questions/14994391/thinking-in-angularjs-if-i-have-a-jquery-background/14994393)
*   [jQuery 和 AngularJS 之间的主要区别是什么？](https://www.quora.com/What-are-the-key-differences-between-jQuery-and-AngularJS)
*   [jQuery 与 AngularJS——一个很好的比较](http://www.codeproject.com/Articles/1044334/jQuery-Vs-AngularJS-A-Good-Comparison)
*   [jQuery 和 AngularJS 有什么区别？](https://www.codecademy.com/en/forum_questions/55a6c6d776b8fed4fa0006b9)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-03T09:11:27.193

**jQuery :-**

```
jQuery is a lightweight and feature-rich JavaScript Library that helps web developers
by simplifying the usage of client-side scripting for web applications using JavaScript.
It extensively simplifies using JavaScript on a website and it’s lightweight as well as fast.

So, using jQuery, we can:

easily manipulate the contents of a webpage
apply styles to make UI more attractive
easy DOM traversal
effects and animation
simple to make AJAX calls and
utilities and much more… 
```

**AngularJS：-**

```
AngularJS is a product by none other the Search Engine Giant Google and it’s an open source
MVC-based framework(considered to be the best and only next generation framework). AngularJS
is a great tool for building highly rich client-side web applications.

As being a framework, it dictates us to follow some rules and a structured approach. It’s
not just a JavaScript library but a framework that is perfectly designed (framework tools
are designed to work together in a truly interconnected way).

In comparison of features jQuery Vs AngularJS, AngularJS simply offers more features:

Two-Way data binding
REST friendly
MVC-based Pattern
Deep Linking
Template
Form Validation
Dependency Injection
Localization
Full Testing Environment
Server Communication 
```

# objective-c - 在 iOS 中修改 BOOL 内部方法

> ID：13151727
> 
> 赞同：0
> 
> 时间：2012-10-31T05:23:11.563
> 
> 标签：objective-c, ios, parameter-passing, pass-by-reference

我有一个`UITableView`显示带有图像的单元格。在`cellForRowAtIndexPath`我启动连接以获取图像的方法上。我想跟踪已经请求了哪些图像，以避免多次请求相同的图像。

我设置了这样的方法

```
+(void) setImageFromURL:(NSURL*) url fromImage:(UIImage*) srcImage to:(UIImageView*) dstImage wasRequested:(BOOL*) requested; 
```

并这样称呼它

```
[Utils setImageFromURL:event.thumbURL fromImage:event.thumbImage to:cell.image wasRequested:event.thumbRequested]; 
```

其中 event.thumbRequested 是一个 BOOL 属性。该方法看起来像这样

```
+(void) setImageFromURL:(NSURL*) url fromImage:(UIImage*) srcImage to:(UIImageView*) dstImage wasRequested:(BOOL*) requested{
    if (srcImage != nil) {
        dstImage.image = srcImage;
    } else if (!requested) {
        requested = YES;
        @try {
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                NSData * data = [[NSData alloc] initWithContentsOfURL: url];
                if ( data == nil )
                    return;
                dispatch_async(dispatch_get_main_queue(), ^{
                    __block UIImage* srcImage = [UIImage imageWithData: data];
                    dstImage.image = srcImage;
                });
                [data release];
            });
        }
        @catch (NSException *exception) {
            NSLog(exception.debugDescription);
        }
    }
} 
```

我的问题是`BOOL`由于在`Objective-C`. 谁能推荐一种能够`BOOL`从方法内部更新事件对象的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T05:30:47.673

该行：

```
requested = YES; 
```

需要是：

```
if (requested) {
    *requested = YES;
} 
```

支票只是以防`nil`万一`requested`。

编辑：电话应该是：

```
BOOL requested = event.thumbRequested;
[Utils setImageFromURL:event.thumbURL fromImage:event.thumbImage to:cell.image wasRequested:&requested];
event.thumbRequested = requested; 
```

# batch-processing - 构建批处理以从 txt 读取信息并决定如何处理视频文件

> ID：13151728
> 
> 赞同：1
> 
> 时间：2012-10-31T05:23:16.170
> 
> 标签：batch-processing, batch-file

第三天！

新的输出文件 txt：

```
Filename          : %FILENAME%.%EXTENSION%
Sizes             : 1.66 GiB for 1h 58mn 0s 615ms at 2 014 Kbps
Writing_App       : VirtualDubMod 1.5.10.2 (build 2542/release)

Video_#0          : DivX 5 MPEG-4 Visual at 1 812 Kbps, with 1.49 GiB (90%)
Aspect            : 704 x 368 (1.913) at 23.976 fps
Writing_App_V     : DivX 6.8.5 (UTC 2009-08-20)

Audio_#0          : AC3
Mode_#0           : Constant
Sample_#0         : 48000
Channels_#0       : 2
Size_#0           : 162 MiB (10%)
Title_#0          : 

Audio_#1          : MP3
Mode_#1           : Constant
Sample_#1         : 44100
Channels_#1       : 2
Size_#1           : 101 MiB (11%)
Title_#1          : 
```

* * *

```
rem Required to use Delayed !Variable! Expansion
setlocal EnableDelayedExpansion
rem Create all text files (copied from your example)
rem for %%T in ("*.avi") do "C:\Meus Programas\MEDIA\MediaInfo CLI\MediaInfo.exe" --output=file://"C:\Meus Programas\MEDIA\MediaInfo CLI\luis4.csv" --logfile="%%~nT.cod" "%%T"
rem echo.>TXTCollector.lst
rem for %%Z in ("*.cod") do type "%%~Z">>TXTCollector.lst && echo ===========================================>>TXTCollector.lst && echo.>>TXTCollector.lst
rem ren TXTCollector.lst TXTCollector.txt
rem Process each file
for %%F in (*.cod) do (
   rem Delete variables that may not exist in certain files
   set Audio_#1=
   rem Read variables from this text file (explained above)
   for /F "usebackq tokens=1* delims=:" %%a in ("%%F") do (
      for %%c in (%%a) do set %%c=%%b
      set %%c=!%%c:~1!
   )
   ECHO VirtualDub.Open("r:\\%%~nF.avi","",0);>"%%~nF.vcf"
   ECHO VirtualDub.RemoveInputStreams();>>"%%~nF.vcf"
) 
```

写完所有的bat文件，开始调试。我的前两行开始出现问题。这批是创建一个脚本文件 (.vcf) 并且使用 >> 的重定向不再起作用。
ECHO VirtualDub.Open("r:\%%~nF.avi","",0);>"%%~nF.vcf"
使用参数 %%~nF.vcf 创建了一个名称正确但已刷新的文件在文件中所有由
for /F "usebackq tokens=1* delims=:" %%a in ("%%F")
ECHO VirtualDub.RemoveInputStreams();>>"%%~nF.vcf" 生成的工作一个名为 %~nF.vcf 的文件（这意味着该参数不再起作用。）
尝试关闭 EnableDelayedExpansion，结果相同。也许是因为括号。
又卡住了！

* * *

第二天！

好的，@Aacini，谢谢...将尝试恢复...我有很多文件要处理...我为每个文件生成一个 .txt。我正在尝试做一个批处理来读取每个 .txt 并决定如何处理原始文件。

文本文件：

```
General
ORIGINAL_FILENAME.avi
818 MiB for 1h 46mn 25s 14ms
AVI-Mux GUI 1.16.11, Dec 15 2004  14:51:34

Video #0
XviD MPEG-4 Visual, with 624 MiB (76%),  at 23.976 fps
XviD 1.2.1 (UTC 2008-12-04)

Audio #0
MPEG Audio Version 1 Layer 3
Variable
44.1 KHz
2 channels
85.8 MiB (10%)
Portuguese BR - 3LT0N
LAME3.93a

Audio #1
MPEG Audio Version 1 Layer 3
Variable
48.0 KHz
2 channels
97.5 MiB (12%)
English - 3LT0N
LAME3.98r 
```

* * *

到目前为止我一直在考虑的批次...

```
IF DOESNT EXIST "Audio #1" in TXT goto :ONEAUDIO
IF EXIST "AC-3" in TXT goto :AC3

Set Value 0 from txt line 02 = filename

"for audio 1"
Set Value 1 from txt line 12 = Variable OR Constant
Set Value 2 from txt line 13 = 44.1 OR 48.0

"for audio 2"
Set Value 3 from txt line 21 = Variable or Constant
Set Value 4 from txt line 22 = 44.1 or 48.0

if value 1 = variable goto :variable1 ELSE goto :constant1

:variable1
(will execute some commands here)
if value 2 = 44.1 goto :22 ELSE goto :24

:22
(will execute some commands here)
goto :jump24

:24
(will execute some commands here)

:jump24
if value 3 = variable goto :variable2 ELSE goto :constant2

:variable2
(will execute some commands here)
if value 4 = 44.1 goto :44 ELSE goto :48

:44
(will execute some commands here)
goto :end

:48
(will execute some commands here)
goto :end

:constant1
(will execute some commands here)
goto :end

:constant2
(will execute some commands here)
goto :end

:ONEAUDIO
later
goto :end

:AC3
later
goto :end

:end 
```

这会遇到一些麻烦...我只了解 FOR (LOOP) 并且据我所知它不能与 GOTO 一起使用：EXAMPLE。也许使用两个批处理文件工作......调用第二批解析filename.txt的循环

我在想的另一种方法是批量为每个视频文件生成一个“批处理模型”，然后读取视频文件的 .txt，然后替换“批处理模型”中的字符串。但这对我来说太先进了。

* * *

第一天：

我需要帮助才能将我的批处理文件合并到一个文件中，并为该批处理添加读取文件 .txt 并决定同一目录中一堆视频的后续步骤的能力。这一切都是关于将音频从 avi 转换为生成与编辑程序的兼容性......

步骤是：

1) 为每个视频文件生成一个 .txt，其中包含有关视频和音频的基本信息。

```
for %%a in ("*.avi") do "C:\Meus Programas\MEDIA\MediaInfo CLI\MediaInfo.exe" --output=file://"C:\Meus Programas\MEDIA\MediaInfo CLI\luis.csv" --logfile="%%~na.txt" "%%a" 
```

或生成一个包含所有小文件的大文件：

```
for %%a in ("*.avi") do "C:\Meus Programas\MEDIA\MediaInfo CLI\MediaInfo.exe" --output=file://"C:\Meus Programas\MEDIA\MediaInfo CLI\luis.csv" --logfile="%%~na.txt" "%%a"
echo.>TXTCollector.lst
for %%i in ("*.txt") do type "%%~i">>TXTCollector.lst && echo ===========================================>>TXTCollector.lst && echo.>>TXTCollector.lst && del "%%~i"
ren TXTCollector.lst TXTCollector.txt 
```

输出文件示例：

```
General           : ORIGINAL NAME FOR THE VIDEO FILES.avi
Format            : 820 MiB for 1h 26mn 38s 777ms at 1 324 Kbps
Writing App.      : VirtualDubMod 1.5.10.2 (build 2540/release)

Video #0          : XviD MPEG-4 Visual at 925 Kbps, with 574 MiB (70%)
Aspect            : 608 x 336 (16:9) at 23.976 fps
Writing App.      : XviD 1.2.1 (UTC 2008-12-04)

Audio #0          : 119 MiB (15%), AC-3  ,  
Infos             : Constant at 192 Kbps, 48.0 KHz, 1 channel
Writing App.      : , 

Audio #1          : 110 MiB (12%), MPEG Audio Version 1 Layer 3,  
Infos             : Constant at 128 Kbps, 48.0 KHz, 2 channels
Writing App.      : LAME3.97 , -m j -V 4 -q 2 -lowpass 17 -b 128 
```

* * *

2）从那里，从文件中读取音频格式，我将文件移动到特定文件夹并在该文件夹中执行批处理以运行转换。

以蝙蝠为例。

```
REM @echo off
:: create the virtual drives and go to the root of drive r:
set ORIGINALDIR=%~d0
subst r: "%cd%"
md JobDone
subst s: "%cd%\JobDone"
r:
cd\
for %%w in ("*.avi") do ECHO VirtualDub.Open("r:\\%%~w","",0);>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.RemoveInputStreams();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetSource(0x73647561,0,1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].DeleteComments(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].AddComment(0x00000003,"","Portuguese");>>"%%~nw.vcf"
REM for %%w in ("*.avi") do ECHO VirtualDub.stream[0].AddComment(0x00000003,"","English");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].AdjustChapters(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetMode(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetInterleave(1,500,1,0,0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetClipMode(1,1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetConversion(0,0,0,0,0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetVolume();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].SetCompression(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].EnableFilterGraph(0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[0].filters.Clear();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetSource(0x73647561,1,1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].DeleteComments(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].AddComment(0x00000003,"","English");>>"%%~nw.vcf"
REM for %%w in ("*.avi") do ECHO VirtualDub.stream[1].AddComment(0x00000003,"","Portuguese");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].AdjustChapters(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetMode(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetInterleave(1,500,1,0,0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetClipMode(1,1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetConversion(0,0,0,0,0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetVolume();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].SetCompression(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].EnableFilterGraph(0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.stream[1].filters.Clear();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.DeleteComments(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.AddComment(0x00000002,"ISFT","VirtualDubMod 1.5.10.2 (build 2542/release)");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.AdjustChapters(1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.SetDepth(24,24);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.SetMode(0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.SetFrameRate(0,1);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.SetIVTC(0,0,-1,0);>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.SetCompression();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.video.filters.Clear();>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.SaveAVI("s:\\%%~nw.avi");>>"%%~nw.vcf"
for %%w in ("*.avi") do ECHO VirtualDub.Close();>>"%%~nw.vcf"

:: Execute the script file just created
for %%a in ("*.vcf") do "C:\VirtualDubMod\VirtualDubMod.exe" /r /s"%%~fa" /x && del "%%~fa"

:: go back to previous folder and delete the virtual drives.
%ORIGINALDIR%
REM %~d0
subst r: /d
subst s: /d

:end 
```

我有一个文件夹和每个作业的批次。基本上它是 3 个不同的过程： 带有 AC3 音频的视频文件需要不同的方法......带有 MP3 的视频文件将所有内容转换为恒定比特率和 48000 采样率。具有恒定比特率的视频文件不需要转换，只需重新混合即可。

```
ONE AUDIO
+AC3 AUDIO
--2 CHANNELS
--6 CHANNELS
+MP3 AUDIO
--44100 SAMPLING RATE
--48000 SAMPLING RATE
+JUST REMUX AUDIO

TWO AUDIOS
+AC3
--2ch-2ch
--2ch-6ch
--6ch-2ch
--6ch-6ch
+1ST AUDIO ONLY
--44100
--48000
+2ND AUDIO ONLY
--44100
--48000
+44100-44100
+44100-48000
+48000-41000
+48000-48000
+INVERT AUDIO (just change the order of the audio tracks, no converting)
+JUST REMUX 
```

* * *

这是乐趣开始的地方：

只有一个音频的视频文件很少见……可以排除在批次之外。如果...有一个 bat 文件可以完成所有操作...那么 (*.avi) 的 LOOP 将不再起作用，因为每个视频文件都有自己的属性...然后再次...批处理将具有根据文件名创建脚本（或创建脚本的新 bat）。

```
Audio #0          : 119 MiB (15%), AC-3  ,  
Infos             : Constant at 192 Kbps, 48.0 KHz, 1 channel
Writing App.      : , 
```

只是想......如果它只是一个音频......那么：有ac3（有2ch做2通道转换；如果没有做6通道转换）如果不是ac3（有常数->只是remux->否则（如果48.0进行 48.0 转换；否则进行 41000 转换）

这“很简单”但是文件有两个音频……现在对我来说很难。

```
Audio #0          : 119 MiB (15%), AC-3  ,  
Infos             : Constant at 192 Kbps, 48.0 KHz, 1 channel
Writing App.      : , 

Audio #1          : 110 MiB (12%), MPEG Audio Version 1 Layer 3,  
Infos             : Constant at 128 Kbps, 48.0 KHz, 2 channels
Writing App.      : LAME3.97 , -m j -V 4 -q 2 -lowpass 17 -b 128 
```

* * *

让我解释一下：“Just remux”和“MP3s conversions”使用来自视频文件的内部音频。“AC3转换”并不是那么简单。必须从文件中提取音频，与其他应用程序进行第一次转换，然后在原始程序中进行第二次转换。

```
md audio1
for %%x in ("*.avi") do "C:\VirtualDubMod\ffmpeg.exe" -i "%%x" -vn -map 0:1 -acodec copy "%%~dpxaudio1\%%~nx.audio1.ac3"

md audio2
for %%u in ("*.avi") do "C:\VirtualDubMod\ffmpeg.exe" -i "%%u" -vn -map 0:2 -acodec copy "%%~dpuaudio2\%%~nu.audio2.ac3"

cd audio1
for %%y in ("*.ac3") do "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core( -input "%%~fy" -output "%%~dpy%%~ny.wav" -2ch ) -azid( -c light ) -ota( -hybridgain ) && del "%%~y"

cd..
cd audio2
for %%y in ("*.ac3") do "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core( -input "%%~fy" -output "%%~dpy%%~ny.wav" -2ch ) -azid( -c light -L -3db ) -ota( -hybridgain ) && del "%%~y" 
```

为转换生成的脚本可以分成几部分：1）要处理的视频文件2）第一个音频和转换obs的选项：mp3（不需要指定文件，它是内部音频的代码）AC3（有指定 .wav 文件名）3）第二个音频和转换选项 4）视频和转换选项 5）保存新文件的文件名 6）在进程结束时关闭应用程序的命令。

批处理可以创建一个脚本（或一个新的批处理来生成脚本）一个一个地粘贴这些和平。并且该批次可以有一个“目录”，并通过有关音频的信息选择正确的一个....

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:18:18.223

好的。我会*尝试*从所有这些混乱中弄清楚一些事情......

您向我们展示了文本文件的两种不同格式。第一个（在输出文件示例下）更容易处理。我想您可以修改此文件，以便通过插入下划线或数字（作为有效的批处理变量名称）使每行的标题是唯一的并且没有空格。这是我的程序所需格式的示例文件：

```
General           : ORIGINAL NAME FOR THE VIDEO FILES.avi
Format            : 820 MiB for 1h 26mn 38s 777ms at 1 324 Kbps
Writing_App       : VirtualDubMod 1.5.10.2 (build 2540/release)

Video_#0          : XviD MPEG-4 Visual at 925 Kbps, with 574 MiB (70%)
Aspect            : 608 x 336 (16:9) at 23.976 fps
Writing_App_V0    : XviD 1.2.1 (UTC 2008-12-04)

Audio_#0          : 119 MiB (15%), AC-3  ,  
Infos_A0          : Constant at 192 Kbps, 48.0 KHz, 1 channel
Writing_App_A0    : , 

Audio_#1          : 110 MiB (12%), MPEG Audio Version 1 Layer 3,  
Infos_A1          : Constant at 128 Kbps, 48.0 KHz, 2 channels
Writing_App_A1    : LAME3.97 , -m j -V 4 -q 2 -lowpass 17 -b 128 
```

以下代码将读取前一个文件并使用右侧的值定义冒号左侧的变量：

```
rem Read each line from the text file
for /F "tokens=1* delims=:" %%a in (thefile.txt) do (
   rem Eliminate spaces from variable name
   for %%c in (%%a) do set %%c=%%b
   rem Eliminate first character (space) from variable value
   set %%c=!%%c:~1!
) 
```

上一个循环结束后，您可以直接获取每个变量的值。例如，**ECHO !Format!** 或**IF NOT DEFINED Audio_#1 ECHO 一个音频**或**IF "!Audio_#0:AC-3=!" EQU "!Audio_#0!" ECHO Audio #0 不是 AC-3"**等。

这是将所有部分放在一起的第一次尝试：

```
@echo off
rem Required to use Delayed !Variable! Expansion
setlocal EnableDelayedExpansion
rem Create all text files (copied from your example)
for %%a in ("*.avi") do "C:\Meus Programas\MEDIA\MediaInfo CLI\MediaInfo.exe" --output=file://"C:\Meus Programas\MEDIA\MediaInfo CLI\luis.csv" --logfile="%%~na.txt" "%%a"
rem Process each file
for %%f in (*.txt) do (
   rem Delete variables that may not exist in certain files
   set Audio_#1=
   rem Read variables from this text file (explained above)
   for /F "usebackq tokens=1* delims=:" %%a in ("%%f") do (
      for %%c in (%%a) do set %%c=%%b
      set %%c=!%%c:~1!
   )
   rem Identify each case
   set AC-3=NO
   if "!Audio_#0:AC-3=!" neq "!Audio_#0!" set AC-3=YES
   if not defined Audio_#1 (
      rem One Audio
      if !AC-3! equ YES (
         rem Process One Audio with AC-3
      ) else (
         rem Process One Audio with no AC-3
      )
   ) else (
      rem Two Audios
      if "!Audio_#1:AC-3=!" neq "!Audio_#1!" set AC-3=YES
      if !AC-3! equ YES (
         rem Process Two Audios with AC-3
      ) else (
         rem Process Two Audios with no AC-3
      )
   )
) 
```

试着理解这段代码并做几个测试，然后发布你的新问题。

安东尼奥

***附录*：**关于“从变量名中消除空格”的解释

如果这个 FOR 命令：

```
for /F "tokens=1* delims=:" %%a in (thefile.txt) do (
   set %%a=%%b
) 
```

阅读这一行：

```
General           : ORIGINAL NAME FOR THE VIDEO FILES.avi 
```

那么执行的 SET 命令是这样的：

```
 set General           = ORIGINAL NAME FOR THE VIDEO FILES.avi 
```

这样，变量名正好是“General<11个空格>”，所以

```
echo %General%               does NOT work
echo %General           %    OK 
```

为了避免这种混乱，必须删除变量名中的空格。

你必须知道，如果你执行这个命令：

```
for %%a in (    one        two         threee      ) do echo "%%a" 
```

结果是：

```
"one"
"two"
"three" 
```

因此可以使用 FOR 命令来消除空格。好的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:09:22.253

该批次正在运行，并针对所有类型的文件进行了测试。感谢所有的帮助。这批正在做预期的事情，但它还有一些工作要做。它可以清洗很多。之后...

```
@echo off
rem create the virtual drives needed to VirtualDubMod work
set ORIGINALDRIVE=%~d0
subst r: "%cd%"
md JobDone
subst s: "%cd%\JobDone"
r:
cd\
rem Required to use Delayed !Variable! Expansion
setlocal EnableDelayedExpansion
rem Create all text files (copied from your example)
for %%T in ("*.avi") do "C:\Meus Programas\MEDIA\MediaInfo CLI\MediaInfo.exe" --output=file://"C:\Meus Programas\MEDIA\MediaInfo CLI\luis4.csv" --logfile="%%~nT.cod" "%%T"
rem Create "catalogue" from all INFOs created.
echo.>TXTCollector.lst
for %%Z in ("*.cod") do type "%%~Z">>TXTCollector.lst && echo ===========================================>>TXTCollector.lst && echo.>>TXTCollector.lst
ren TXTCollector.lst TXTCollector.txt
rem Process each file
for %%F in (*.cod) do (
   rem Setting the variables needed!
   set NAMEFILE=%%~nF
   rem Delete variables that may not exist in certain files
   set Audio_#1=
   rem Read variables from this text file (explained above)
   for /F "usebackq tokens=1* delims=:" %%a in ("%%F") do (
      rem Eliminate spaces from variable name?????????
      for %%c in (%%a) do (
         set %%c=%%b
         rem Eliminate first character (space) from variable value
         set %%c=!%%c:~1!
      )
   )
   ECHO VirtualDub.Open^("r:\\!NAMEFILE!.avi","",0^);>"!NAMEFILE!.vcf"
   ECHO VirtualDub.RemoveInputStreams^(^);>>"!NAMEFILE!.vcf"
   rem PROCESS FIRST AUDIO
   if !Audio_#0! equ AC3 (
      rem PROCESS AC3
      if !Channels_#0! equ 6 (
         rem Process AC3 6 Channels
         ECHO -=-=-=-=-=-=-=-=-=-=-
         ECHO AC3_1 HAS 6 CHANNELS
         ECHO -=-=-=-=-=-=-=-=-=-=-
         "C:\VirtualDubMod\ffmpeg.exe" -i "!NAMEFILE!.avi" -vn -map 0:1 -acodec copy "r:\!NAMEFILE!.audio1.ac3"
         "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core^( -input "r:\!NAMEFILE!.audio1.ac3" -output "r:\!NAMEFILE!.audio1.wav" -2ch ^) -azid^( -c light -L -3db ^) -ota^( -hybridgain ^)
         del "r:\!NAMEFILE!.audio1.ac3"
      ) else (
         rem Process AC3 2 or 1 Channels
         ECHO -=-=-=-=-=-=-=-=-=-=-
         ECHO AC3_1 HAS 2 CHANNELS
         ECHO -=-=-=-=-=-=-=-=-=-=-
         "C:\VirtualDubMod\ffmpeg.exe" -i "!NAMEFILE!.avi" -vn -map 0:1 -acodec copy "r:\!NAMEFILE!.audio1.ac3"
         "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core^( -input "r:\!NAMEFILE!.audio1.ac3" -output "r:\!NAMEFILE!.audio1.wav" -2ch ^) -azid^( -c light ^) -ota^( -hybridgain ^)
         del "r:\!NAMEFILE!.audio1.ac3"
      )
      ECHO VirtualDub.stream[0].SetSource^("r:\\!NAMEFILE!.audio1.wav",0x00000201^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].AddComment^(0x00000003,"","Portuguese"^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetMode^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetVolume^(^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].SetCompression^(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA"^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[0].filters.Clear^(^);>>"!NAMEFILE!.vcf"
   ) else (
      rem PROCESS MP3
      if !Mode_#0! equ Constant (
         rem JUST REMUX AUDIO
         ECHO VirtualDub.stream[0].SetSource^(0x73647561,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].AddComment^(0x00000003,"","Portuguese"^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetMode^(0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetVolume^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetCompression^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].filters.Clear^(^);>>"!NAMEFILE!.vcf"
      ) else (
         rem REDO AUDIO
         ECHO VirtualDub.stream[0].SetSource^(0x73647561,0,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].AddComment^(0x00000003,"","Portuguese"^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetMode^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetVolume^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[0].SetCompression^(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA"^);>>"!NAMEFILE!.vcf"
         if !Sample_#0! equ 44100 (
            rem REDO 44100 AUDIO
            ECHO VirtualDub.stream[0].EnableFilterGraph^(1^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Clear^(^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Add^("input"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Add^("resample"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Connect^(0, 0, 1, 0^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.instance[1].SetInt^(0, 48000^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.instance[1].SetInt^(1, 64^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Add^("output"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Connect^(1, 0, 2, 0^);>>"!NAMEFILE!.vcf"
         ) else (
            rem REDO 48000 AUDIO
            ECHO VirtualDub.stream[0].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[0].filters.Clear^(^);>>"!NAMEFILE!.vcf"
         )
      )
   )
   rem PROCESS SECOND AUDIO
   if !Audio_#1! equ AC3 (
      rem PROCESS AC3
      if !Channels_#1! equ 6 (
         rem Process AC3 6 Channels
         ECHO -=-=-=-=-=-=-=-=-=-=-
         ECHO AC3_2 HAS 6 CHANNELS
         ECHO -=-=-=-=-=-=-=-=-=-=-
         "C:\VirtualDubMod\ffmpeg.exe" -i "!NAMEFILE!.avi" -vn -map 0:1 -acodec copy "r:\!NAMEFILE!.audio2.ac3"
         "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core^( -input "r:\!NAMEFILE!.audio2.ac3" -output "r:\!NAMEFILE!.audio2.wav" -2ch ^) -azid^( -c light -L -3db ^) -ota^( -hybridgain ^)
         del "r:\!NAMEFILE!.audio2.ac3"
      ) else (
         rem Process AC3 2 or 1 Channels
         ECHO -=-=-=-=-=-=-=-=-=-=-
         ECHO AC3_2 HAS 2 CHANNELS
         ECHO -=-=-=-=-=-=-=-=-=-=-
         "C:\VirtualDubMod\ffmpeg.exe" -i "!NAMEFILE!.avi" -vn -map 0:2 -acodec copy "r:\!NAMEFILE!.audio2.ac3"
         "c:\Meus Programas\AUDIO\BeSweet\BeSweet.exe" -core^( -input "r:\!NAMEFILE!.audio2.ac3" -output "r:\!NAMEFILE!.audio2.wav" -2ch ^) -azid^( -c light ^) -ota^( -hybridgain ^)
         del "r:\!NAMEFILE!.audio2.ac3"
      )
      ECHO VirtualDub.stream[1].SetSource^("r:\\!NAMEFILE!.audio2.wav",0x00000201^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].AddComment^(0x00000003,"","English"^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetMode^(1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetVolume^(^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].SetCompression^(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA"^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
      ECHO VirtualDub.stream[1].filters.Clear^(^);>>"!NAMEFILE!.vcf"
   ) else (
      rem PROCESS MP3
      if !Mode_#0! equ Constant (
         rem JUST REMUX AUDIO
         ECHO VirtualDub.stream[1].SetSource^(0x73647561,1,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].AddComment^(0x00000003,"","English"^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetMode^(0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetVolume^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetCompression^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].filters.Clear^(^);>>"!NAMEFILE!.vcf"
      ) else (
         rem REDO AUDIO
         ECHO VirtualDub.stream[1].SetSource^(0x73647561,1,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].DeleteComments^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].AddComment^(0x00000003,"","English"^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetMode^(1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetInterleave^(1,500,1,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetClipMode^(1,1^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetConversion^(0,0,0,0,0^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetVolume^(^);>>"!NAMEFILE!.vcf"
         ECHO VirtualDub.stream[1].SetCompression^(85,48000,2,0,16000,1,12,"AQAEAAAAgAEBAAAA"^);>>"!NAMEFILE!.vcf"
         if !Sample_#0! equ 44100 (
            rem REDO 44100 AUDIO
            ECHO VirtualDub.stream[1].EnableFilterGraph^(1^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Clear^(^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Add^("input"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Add^("resample"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Connect^(0, 0, 1, 0^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.instance[1].SetInt^(0, 48000^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.instance[1].SetInt^(1, 64^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Add^("output"^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Connect^(1, 0, 2, 0^);>>"!NAMEFILE!.vcf"
         ) else (
            rem REDO 48000 AUDIO
            ECHO VirtualDub.stream[1].EnableFilterGraph^(0^);>>"!NAMEFILE!.vcf"
            ECHO VirtualDub.stream[1].filters.Clear^(^);>>"!NAMEFILE!.vcf"
         )
      )
   )
   ECHO VirtualDub.video.DeleteComments^(1^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.AddComment^(0x00000002,"ISFT","VirtualDubMod 1.5.10.2 (build 2542/release)"^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.AdjustChapters^(1^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.SetDepth^(24,24^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.SetMode^(0^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.SetFrameRate^(0,1^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.SetIVTC^(0,0,-1,0^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.SetCompression^(^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.video.filters.Clear^(^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.SaveAVI^("s:\\!NAMEFILE!.avi"^);>>"!NAMEFILE!.vcf"
   ECHO VirtualDub.Close^(^);>>"!NAMEFILE!.vcf"
   "C:\VirtualDubMod\VirtualDubMod.exe" /r /s"R:\!NAMEFILE!.vcf" /x
   rem del "!NAMEFILE!.vcf"
   del "!NAMEFILE!.cod"
   rem del "!NAMEFILE!.audio1.wav"
   rem del "!NAMEFILE!.audio2.wav"
)
rem go back to original folder and delete the virtual drives.
%ORIGINALDRIVE%
subst r: /d
subst s: /d 
```

# magento - 在 magento 中集成 facebook like 按钮（以编程方式）

> ID：13151735
> 
> 赞同：0
> 
> 时间：2012-10-31T05:24:14.393
> 
> 标签：magento, facebook-like, meta-tags, product

我想在 category-product-view 中添加 Facebook like 按钮。
我在 head.phtml 中添加了以下部分：

```
<?php
$product = Mage::registry('current_product');
if($product)
{
?>
<meta property="og:title" content="<?php echo trim($product->getName()); ?>"/>
<meta property="og:url" content="<?php echo $this->helper('core/url')->getCurrentUrl();?>"/>
<meta property="og:type" content="product"/>
<meta property="og:image" content="<?php echo $this->helper('catalog/image')->init($product, 'image') ;?>"/>
<?php
}
?> 
```

并在 addto.phtml (template/catalog/product/view/addto.phtml)(line:31) 中添加以下代码：

```
<ul class="add-to-links">
<li>
<div class="fb-like" data-href="<?php echo $this->helper('core/url')->getCurrentUrl();?>" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true">
</div>
</li> 
```

我得到了点赞按钮，但点击它会在图像部分显示问号，而点赞部分没有效果（即点赞未完成）。
它一次又一次地要求确认。
在我的 fb 个人资料中添加同一页面没有更新。
我想要图像、标题、描述单击按钮并在 fb 个人资料页面中反映相同。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:11:37.477

使用这个，它在 magento 1.7 中对我有用

```
<a href="http://www.facebook.com/sharer.php?u=<?php echo $_product->getProductUrl()  ?>&t=Check+this+out" target="_blank" title="Share on Facebook"><img src="<?php echo $this->getSkinUrl()."images/icon-f.png" ?>" alt="Share on Facebook"> <a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:06:49.187

问题在于在当地工作。
当它处于活动状态时，它会检索正确的图像、描述。
谢谢你的支持。

# android - Android - 如何在所有活动上使用相同的控件实例

> ID：13151737
> 
> 赞同：0
> 
> 时间：2012-10-31T05:24:35.173
> 
> 标签：android, android-layout, design-patterns, custom-controls

我有一个自定义用户控件，它包含在所有活动中，其中包含一个进度条控件。当此控件在屏幕中可见时，进度条将更新为当前进度。

我想让这个控件成为“单实例”类型的控件，这样如果进度条的进度在特定屏幕中更新，它也会反映在新屏幕中。

我可以通过将当前进度存储在`SharedPreferences`一个`static`变量中来做到这一点，并检查它以在新屏幕中显示进度。

但是我想知道是否有更好的方法来设计和布局这样的控件，或者有一种可以包含在多个屏幕中的“单实例”（记住内存泄漏）控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:53:55.397

您可以使用[Fragment](http://developer.android.com/guide/components/fragments.html)来实现此目的。

“Fragment 表示 Activity 中的一种行为或用户界面的一部分。您可以在单个 Activity 中组合多个 Fragment 以构建多窗格 UI 并在多个 Activity 中重用一个 Fragment”

# iphone - 在 iphone 中导入不必要的文件时出现任何问题？

> ID：13151739
> 
> 赞同：1
> 
> 时间：2012-10-31T05:24:49.577
> 
> 标签：iphone

您好我正在开发 iphone/ipad 应用程序。我拿了一个 header.h 并`ViewControllers`在该 header.h 中导入所有导入。然后我只在所有类中导入 header.h 。

喜欢`header.h`包含

`#import "loginViewController.h"`

`#import "signupviewController.h"`

`header.h`我已经导入了所有必要的#import `view-controllers`。

如果我这样做，是否发生任何内存问题？

我知道，在C语言中，如果我们像上面那样做，所有不必要的代码都必须包含在内，那么在objective-c中呢？

我用谷歌搜索，但我没有找到所需的答案。

请告诉任何人。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:36:56.770

`#import`跟踪已包含哪些标头，如果在编译单元中多次导入标头，则将其忽略。

这使得没有必要使用标头保护。

该`#import`行仅在第一次遇到时被名称文件的内容替换。

底线只是使用`#import`，`Objective-C`如果您多次导入标头，请不要担心。 `#import`确保文件只包含一次，这样您就不会遇到递归包含的问题。但这与#include 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:43:54.187

您应该只导入您需要的标题。假设您有 1 到 10 个视图控制器。只有当每个视图控制器都需要每个其他视图控制器时，您所做的才有意义。这是不太可能的。

这也会减慢编译速度。每个视图控制器最终都会编译每个视图控制器的头文件。为什么要引入所有不需要的细节？

你正在做的事情不会使用更多的内存，但它浪费了编译器时间，而且它不是自我记录的。通过让每个类只导入需要的内容，您可以更好地查看实际的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:54:52.297

**是的，您可以像下面这样的常量**文件轻松访问这种类型的头文件 。

这是我的`constant.h`文件，它是**Objective-C 协议**模板（文件）。我只是导入此文件，然后访问我在此文件中定义的所有文件和密钥...

```
#import <Foundation/Foundation.h>
#import "AppDelegate.h"
#import "yourViewControllers.h"
...etc....
/// you can also use some APIKey globally 

@protocol constant <NSObject> 

@end 
```

# arm - 如何使用霓虹灯创建 1/255 f32 矢量？

> ID：13151745
> 
> 赞同：0
> 
> 时间：2012-10-31T05:25:45.233
> 
> 标签：arm, neon

当我计算 alpha blending 时，我需要将 8bit alpha 转换为 float，即 alpha/255。因为 NEON 没有分频器，所以我想要 alpha * 1/255。那么如何在 q1 中生成 1/255 向量呢？

vmov.f32 q1,#0.003921569 总是报错。

vmov.u32 q1, #255 vrecpe.u32 q1, q1 在 f32 中总是生成 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:18:36.397

你很亲密。在取倒数之前，您需要将 255 的向量转换为浮点数。

```
vmov.u32        q0, #255
vcvt.f32.u32    q0, q0
vrecpe.f32      q1, q0 
```

请注意，它`vrecpe`有少量错误，但它应该足够接近 Alpha 混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T05:13:16.003

对于微不足道的 alpha 混合，您真的不需要为浮点数烦恼。鉴于：

```
y = rint(x * a / 255.0); 
```

对于任何没有浮点的 8 位输入，您可以使用以下方法获得相同的结果：

```
t = x * a;
t += (t + 0x80) >> 8;
y = (t + 0x80) >> 8; 
```

类似于：

```
; given eight 8-bit x in d0, and eight 8-bit a in d1
    vmull.u8 q2, d0, d1
    vrsra.u16 q2, q2, #8
    vrshrn.u16 d2, q2, #8
; result is eight 8-bit (s*a/255) in d2 
```

通常，最后两个操作实现了从 16 位输入到 8 位输出的全面除以 255；但它们依赖于 8×8 乘法的有限范围。如果 16 位中间值不仅仅是乘法的结果，那么可能需要进行钳位，并且由于没有`vqrsra`序列变得更长：

```
; given eight 8-bit x in d0, and eight 8-bit a in d1
    vmull.u8 q2, d0, d1
    ???
    vrshr.u16 q3, q2, #8
    vqadd.u16 q2, q2, q3
    vqrshrn.u16 d2, q2, #8
; result is eight 8-bit (s*a/255) in d2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:26:15.510

不是 100% 的答案，但由于到目前为止你没有得到任何其他答案，我想我会帮助你开始；

据我记得，您可以使用的浮点子集`vmov.f32`非常有限，因此如果您想加载任意浮点数，您需要将其存储为常量并使用`vldr`. 像这样的事情应该这样做；

```
ldr r1,=floats 

vldr.32 s0,[r1]     @1/256

floats:
.float 0.003921569 
```

“不是 100%”部分是我没有查看向量指令，所以我不确定您是否可以`s0`立即在此代码中替换，或者您是否需要在加载后`q1`移至。`s0``q1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T15:13:23.503

可能你想要 float32x4_t x = vdupq_n_32(1.0f / 255);

编译器负责计算常数，vdup 指令将值广播到向量的所有四个通道

vdup 指令支持 NEON 标量和 ARM 寄存器作为源操作数

# jakarta-ee - 我们需要在 netbeans 中编辑 ApplicationConfig.java 吗？

> ID：13151749
> 
> 赞同：1
> 
> 时间：2012-10-31T05:26:29.463
> 
> 标签：jakarta-ee, netbeans, jetty

我正在使用 netbeans，在我的应用程序 Applicationconfig.java 中说

> /** * 不要修改此方法。它由 NetBeans REST 支持自动生成。*/

现在，我正在尝试将基于 netbeans+glassfish 的基于休息的服务部署到码头上的本地机器上，但部署后我无法访问服务。所以我怀疑问题出在 ApplicationConfig.java 中，因为我没有使用任何 web.xml 进行 servlet 映射。

Applicationconfig.java 是否也在生成的 .war 中自动更新？感谢帮助...

这就是我的 applicationconfig.java 的样子：

```
package org.netbeans.rest.application.config;
import java.util.Set;
import javax.ws.rs.core.Application;
@javax.ws.rs.ApplicationPath("webresources")
public class ApplicationConfig extends Application {

    public Set<Class<?>> getClasses() {
        return getRestResourceClasses();
    }

    /**
     * Do not modify this method. It is automatically generated by NetBeans REST support.
     */
    private Set<Class<?>> getRestResourceClasses() {
        Set<Class<?>> resources = new java.util.HashSet<Class<?>>();
        resources.add(cribservice.Cribservice.class);
        return resources;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:55:10.790

因此，在使用 netbeans 在码头上部署项目之前。首先确保您拥有所有相关的 jetty-web.xml 和其他必需文件。

为了生成这些文件，为netbeans安装码头插件，从互联网下载码头服务器创建一个新项目，选择码头作为服务器并将其指向码头的位置。然后创建您的项目，在将生成的 .war 粘贴到 /webapps 文件夹后对其进行测试和部署

# javascript - 这可以用 ExtJs 3.4 创建无限网格吗？

> ID：13151755
> 
> 赞同：1
> 
> 时间：2012-10-31T05:27:13.783
> 
> 标签：javascript, extjs

我在 ExtJs 3.4 上有一个应用程序，我需要创建大约 30 000 行的网格。[我在sencha 网站上](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/infinite-scroll.html)看到了一个例子。但是有使用 ExtJs 4.1。当我尝试使用 ExtJs 3.4 执行此操作时，出现错误：

```
TypeError: Ext.require is not a function
TypeError: Ext.Loader is not a function 
```

我可以使用 ExtJs 3.4 做这样的事情吗？或者我应该在 ExtJs 4.1 上重写整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:56:01.140

据我所知，这只是 4.1 功能。在以前的版本中，有一个名为 LiveGrid 的产品，但它可能不是免费的。

# android - android中的米数计算？

> ID：13151760
> 
> 赞同：1
> 
> 时间：2012-10-31T05:27:49.417
> 
> 标签：android, distance, google-places

我想在android程序中显示两个城市之间的里程，为此我编写了以下代码：

```
package com.example.distancebcities;

import java.io.IOException;
import java.util.List;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends  MapActivity {  
    //extending the MapActivity here
    Geocoder geocoder = null;  
    MapView mapView = null;

    @Override  
    //location display 
    protected boolean isLocationDisplayed() {  
        return false;  
    }  

    @Override  
    protected boolean isRouteDisplayed() {  
        return false; 
    }

    @Override  
    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);  
        mapView = (MapView) findViewById(R.id.geoMap);  
        mapView.setBuiltInZoomControls(true); 

        // lat/long of Jacksonville, FL  
        int lat = (int) (30.334954 * 1000000);
        int lng = (int) (-81.5625 * 1000000);  

        GeoPoint pt = new GeoPoint(lat, lng);  
        mapView.getController().setZoom(10);  
        mapView.getController().setCenter(pt);  
        geocoder = new Geocoder(this);              
    }  

    public void doClick(View arg0) {                              
        try {  
            EditText loc = (EditText) findViewById(R.id.location);  

            //getting the dittext id 

            String locationName = loc.getText().toString();  
            List<Address> addressList = geocoder.getFromLocationName(locationName, 5);  
            if (addressList != null && addressList.size() > 0) {  
            int lat = (int) (addressList.get(0).getLatitude() * 1000000);  
            int lng = (int) (addressList.get(0).getLongitude() * 1000000); 

            //getting the lat and long postions of the cities  

            GeoPoint pt = new GeoPoint(lat, lng);  
            mapView.getController().setZoom(15);  
            mapView.getController().setCenter(pt);

            //zooming and display the place of the edit text entered value .
        }  

        catch (IOException e){  
            e.printStackTrace();  
        }  
    }  
} 
```

我得到了这些地方，但现在我想显示两个城市之间的距离。

我该如何继续这个程序，或者有没有其他方法可以实现这个？请向我发送任何有用的链接，以便我继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:14:49.443

有内置代码来查找两个位置之间的距离，

`distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results)`

[请参阅此链接以获取位置类](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:35:28.393

要查找两个位置之间的距离，请使用以下代码。

```
public double CalculationByDistance(Location Start, Location End)
{
        double Radius = 6371;
        double lat1 = Start.getLatitude();
        double lat2 = End.getLatitude();
        double lon1 = Start.getLongitude();
        double lon2 = End.getLongitude();
        double dLat = Math.toRadians(lat2 - lat1);
        double dLon = Math.toRadians(lon2 - lon1);
        double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
                + Math.cos(Math.toRadians(lat1))
                * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 2)
                * Math.sin(dLon / 2);
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        double km = Radius * c;
        return km * 1000;
} 
```

这个距离将返回`Meters`

# asp.net-mvc - MVC：如何知道来自 HttpPostedFileBase 的输入值

> ID：13151761
> 
> 赞同：3
> 
> 时间：2012-10-31T05:27:51.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

让我先尝试尽可能简单地解释我的情况：

假设我有一个包含多个 [input type='File'] 的页面。其中一些可能会被选中，而另一些则不会。

在我的 httppost 方法中，我知道我需要使用像“IEnumerable files”这样的参数来获取文件名，并且每个 [input] 名称我应该定义 = 'files' 或 'files[0]','files[1]' ， ETC.....

我的问题是：在获取 HttpPostedFileBase 列表时，如何确定哪个文件属于哪个输入控件？因为某些输入可能会留空。

此外，因为这些 [input] 是动态创建的，并且没有固定数量，所以我无法在 httppost 方法中为它们中的每一个硬编码参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:18:17.760

试试这个解决方案：

看法：

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file1" />
    <input type="file" name="file2"/>
    <input type="file" name="file3"/>
    <input type="file" name="file4"/>
    <input type="file" name="file5"/>

    <input type="submit" value="go" />
} 
```

控制器：

```
 var uploaded = Request.Files.AllKeys
      .Select(x => new {file = Request.Files[x], name = x})
            .Where(x => x.file.ContentLength > 0).ToList(); 
```

“上传的”匿名类型将包含属于输入控件名称的文件，并且仅包含选择的输入名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:58:14.840

您可以使用此代码

```
 [HttpPost]
    public ActionResult Index(IEnumerable<HttpPostedFileBase> files) {
    foreach (var file in files) {
             if (file.ContentLength > 0) {
               var fileName = Path.GetFileName(file.FileName);
               var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
               file.SaveAs(path);
             }
    }
    return RedirectToAction("Index");
    } 
```

在这里，对于每个文件，您都可以检查文件是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:11:47.653

如果您有固定数量的文件上传控件，那么您可以定义您的模型，例如

```
 public class FileUpload
        {
            public HttpPostedFileBase FileUpload1 { get; set; }
            public HttpPostedFileBase FileUpload2 { get; set; }
            public HttpPostedFileBase FileUpload3 { get; set; }
        } 
```

然后从行动中你可以像下面一样访问它们

```
 public ActionResult Index(Mvc4Application.Models.FileUpload objFileUpload)
    {
          // Do some code like here you can check for each 3 files like
          if(objFileUpload.FileUpload1 != null)
          {
             // Some code
          }
        return View();
    } 
```

更多您可以点击[这里](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# sdk - Rally SDK：使用查询作为属性创建饼图

> ID：13151762
> 
> 赞同：1
> 
> 时间：2012-10-31T05:27:54.050
> 
> 标签：sdk, rally, pie-chart

我一直在尝试使用带有以下代码的 rally sdk 创建饼图：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>Pie Chart Example</title>
 <meta name="Name" content="Component Example: Pie Chart" />
 <meta name="Version" content="1.32" />
 <meta name="Vendor" content="Rally Software" />
 <script type="text/javascript" src="/apps/1.32/sdk.js"></script>
 <script type="text/javascript">

 function showPie() {

   var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__',
                           '__PROJECT_OID__',
                           '__PROJECT_SCOPING_UP__',
                           '__PROJECT_SCOPING_DOWN__');
   var pieConfig = {
        type : "TestCaseResult",
       attribute: "Verdict",
        query: 'TestSet.Name="Alpha"'
     };
   var pieChart = new rally.sdk.ui.PieChart(pieConfig, rallyDataSource);
   pieChart.display("pieChartDiv");
 }

 rally.addOnLoad(showPie);
 </script>
</head>
<body>
   <div id="pieChartDiv" style="height:225px; width:250px"></div>
</body>
</html> 
```

这是行不通的。它说“没有数据”代替饼图。但是，如果我删除以下行...

```
query: 'TestSet.Name="Alpha"' 
```

...然后我看到饼图，但这是项目中的所有测试用例结果。我只需要为来自特定测试集的测试用例结果创建饼图。我该如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:55:45.840

如果您使用开发人员门户中的[示例](http://developer.rallydev.com/help/pie-chart)作为初学者，则它使用的是旧版本的 SDK (1.23)，其中不支持查询属性。升级到最新版本 (1.32) 后，我就能让您的代码正常工作。我将更新该示例，以便其他人不会遇到同样的问题。

# c - 无法编写归并排序代码

> ID：13151763
> 
> 赞同：0
> 
> 时间：2012-10-31T05:27:54.717
> 
> 标签：c, algorithm, mergesort

我正在尝试为合并排序编写以下代码，任何人都可以告诉我代码有什么问题：-

```
#include<stdio.h>
#include<stdlib.h>

int arr[100];

void merge(int low,int mid,int high)
{
    int temp[100],lowind = low,highind = mid+1,i=0;
    while(lowind <= mid && highind<=high)
    {
        if(arr[lowind]<arr[highind])
        {
            temp[i] = arr[lowind];
            i++;
            lowind++;
        }
        else
        {
            temp[i] = arr[highind];
            i++;
            highind++;
        }
    }

    while(lowind<=mid)
    {
        temp[i] = arr[lowind];
        i++;
        lowind++;
    }

    while(highind<=high)
    {
        temp[i] = arr[highind];
        i++;
        highind++;
    }

    for(i=low;i<=high;i++)
        arr[i] = temp[i-low];
}

void divider(int low,int high)
{
    int mid = (low+high)/2;
    if(low<mid)
    {
        divider(low,mid);
        divider(mid+1,high);
        merge(low,mid,high);
    }
}

int main()
{
    int i,j,temp;

    for(i=0;i<20;i++)
        arr[i] = rand()%21;

    for(i=0;i<20;i++)
        printf("%d ",arr[i]);
    printf("\n");

    divider(0,19);

    for(i=0;i<20;i++)
            printf("%d ",arr[i]);
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:55:23.483

在`void divider(int low,int high)`中，它应该`if(low<high)`不是`if(low<mid)`您所写的。

要知道为什么，试着理解像 low=2, high=3 这样的情况，这里 mid=(low+high)/2=5/2=2。因此，您的条件失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:05:16.963

只需使用`if(low<high)`而不是更改除法器功能中的条件检查`if(low<mid)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T06:29:02.420

1、arr[i] = rand()%21; 是否有可能获得真正的系列随机数？请使用 srand (time(0)) 然后使用 rand ()。在其他一些语言中，rand（时间）也是可以接受的。2、在分频器中，如果（低

# objective-c - 根据第一个所做的选择填充第二个表视图

> ID：13151764
> 
> 赞同：1
> 
> 时间：2012-10-31T05:28:00.803
> 
> 标签：objective-c, xcode, uitableview

我是 xcode 和 Objective-C 编程的新手，需要一些帮助。

我希望为 ios 创建一个基本程序，该程序在一个视图中使用数据数组和 2 个 UITableView。我希望第二个 UITableView 由一个数组填充，该数组基于第一个表中所做的选择。我有第二个表的数组数组。但是当在第一个表中选择索引 0 处的数据时，无法理解如何将数组放在索引 0 处。

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [technologyData count];

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    // Change UITableViewCellStyle
    cell = [[[UITableViewCell alloc] 
             initWithStyle:UITableViewCellStyleSubtitle 
             reuseIdentifier:CellIdentifier] autorelease];
}

if (tableView == technologyTable)
{

[[cell textLabel] setText:[technologyData objectAtIndex:indexPath.row]];
} 

if (tableView == experienceTable)
{
    cell.textLabel.text = [[experience objectAtIndex:indexPath.row]objectAtIndex:indexPath.row];
    [experienceTable reloadData];
}
return cell ;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (tableView == technologyTable)
{
    experienceTable = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row];

    selectTechnology.text = [technologyData objectAtIndex:indexPath.row];
    self.technologyList.hidden = YES;

}
if(tableView == experienceTable)
{
    self.experienceList.hidden = YES;
    selectExperience.text = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row];
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:41:40.000

好问题，您可以在一个视图控制器中使用一组委托方法来控制两个表。

您首先为这两个表创建一个 UITableView 类型的属性或 IVAR，并将它们连接到 IB 中它们受尊重的表。

然后在任何委托方法中（检查以查看哪个表正在调用该特定方法（例如）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

 if (tableView == table1) {

   self.arrayIndex = indexPath.row;
   [table2 reloadData];

 } else if (tableView == table2) {

  //Secondary task

 } else {/* If necessary */}

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     if (tableView == table1) {
     //Configure the top array as you need

     } else if (tableView == table2) {

      if(self.arrayIndex) {
        [arrayOfArrays objectAtIndex:self.arrayIndex [subArray objectAtIndex:indexPath.row]];
       } else {
        //figure something out
       }

     } else {/* If necessary */}

    }

} 
```

如果您需要有关代码的帮助，请发布一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:57:06.207

在**didSelectRowAtIndexPath:**方法中

```
- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (tv == table1) {
      arrForSecondTable = [arrayOfArrays objectAtIndex:indexPath.row];
      [table2 reloadData];
    }
    else if (tv == table2) {
         // Do Something
     }
     else { // Do Something}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:37:59.020

在`didSelectRowAtIndexPath`的方法上`UITableView`，您可以`[tbl reloadData]`通过传递目标数组来重新加载表数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T05:33:05.927

`didSelectRowAtIndexPath`使用from找到您希望第二个 tableview 填充的目标数组`UITableViewDelegate`。之后重新加载第二个表格视图。那应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T09:20:38.873

正如我在您的代码中观察到的，问题出在此方法上：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [technologyData count];
} 
```

您应该像这样检查此方法中的条件：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  if(tableView == table1)
      return [technologyData count];
  else
      return [experience count];
} 
```

**编辑：**

在您的 didSelectRowAtIndexPath 中：

只需在该行放置一个断点

```
experienceTable = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row];
and
selectExperience.text = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row]; 
```

并调试它。我很确定，你找到了崩溃的原因。

希望能帮助到你。

# android - 清除列表视图中的 Android 编辑文本

> ID：13151765
> 
> 赞同：2
> 
> 时间：2012-10-31T05:28:09.947
> 
> 标签：android, listview, android-listview, android-arrayadapter, android-edittext

我的列表视图中有一个编辑文本和一个保存按钮。当用户单击保存按钮时，我必须清除文本。我试过像

```
txtDescription.setText(""); 
```

但没有奏效。任何人都知道为什么它不起作用？适配器类已附加

请帮助我，在此先感谢！

```
private class ListAdapters extends ArrayAdapter<ApplicationBean> {
    private ArrayList<ApplicationBean> items;
    private int position;

    public ListAdapters(Context context, int textViewResourceId,
            ArrayList<ApplicationBean> mTitleList) {
        super(context, textViewResourceId, mTitleList);
        this.items = mTitleList;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        this.position = position;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.applicationlistitem, null);
        }

        final ApplicationBean o = (ApplicationBean) items.get(position);

        if (o != null) {

            txtDescription = (EditText) v
                    .findViewById(R.id.description_text);

            submitButton = (Button) v.findViewById(R.id.submit_btn);
            submitButton.setTag(position);
            submitButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                        PostRequest p = new PostRequest(Integer.parseInt(v
                                .getTag().toString()));
                        p.execute();
                }

            });
        }
        return v;
    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getViewTypeCount() {
        // TODO Auto-generated method stub
        return items.size();
    }

}

private class PostRequest extends AsyncTask<Void, Void, String> {
    ProgressDialog dlgprogress;
    int position;

    public PostRequest(int selectedIndex) {
        position = selectedIndex;
    }

    @Override
    protected void onPostExecute(String result) {
        dlgprogress.dismiss();
        final Dialog dlg = new AlertDialog.Builder(mContext)
                .setTitle("Message")
                .setMessage(result)
                .setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                dlgprogress.dismiss();
                                dlgprogress.cancel();
                                txtDescription.setText("");
                            }
                        }).create();
        dlg.show();
        super.onPostExecute(result);
    }

    @Override
    protected void onPreExecute() {
        dlgprogress = ProgressDialog.show(mContext, "", "Please wait");
        // dlgprogress.show(mContext, "", "Please wait");
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(Void... arg0) {
        //do something.............
        //..........................
        dlgprogress.dismiss();
        return rsponse;
    }

} 
```

应用程序列表项.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:background="#FFFFFF">

    <LinearLayout
        android:id="@+id/lineatlayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DESCRIPTION : "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/description_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="true"
            android:ems="10"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:inputType="textMultiLine" 
            android:textColor="#000000">
        </EditText>
    </LinearLayout>

    <Button
        android:id="@+id/submit_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="SUBMIT" />

   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:32:23.320

维护列表视图的自定义适配器类

```
 public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row=null;
        Context context = getApplicationContext();
        LayoutInflater inflater=cntx.getLayoutInflater();
        row=inflater.inflate(R.layout.search_list_item, null);

        EditText txtDescription=    (EditText)row.findViewById(R.id.txtDescription);
        Button Savebtn  =   (Button)row.findViewById(R.id.SaveBtn);

        Savebtn.setOnClickListener(new OnClickListener(){

            public void onClick(View v) 
            {
                txtDescription.setText("");
                // And your additional coding
            }
        });
   } 
```

如果您不熟悉列表视图的自定义适配器，请[在此处查看](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:48:52.203

您还可以将任何设置`object`为 TAG 到您的按钮视图。

所以在你的`getView()`方法中这样做，我想它会起作用。

```
 //EDIT
         txtDescription.setTag(position); // set position to edittext

         submitButton = (Button) v.findViewById(R.id.submit_btn);
         submitButton.setTag(txtDescription); // set the current edittext object 

         submitButton.setOnClickListener(new OnClickListener() {        
                @Override
                public void onClick(View v) {
                       EditText tv = (EditText)v.getTag(); // get edittext object
                       tv.setText("");
                             //Edit
                       PostRequest p = new PostRequest(Integer.parseInt(tv
                                .getTag().toString())); // get position from edittext
                    }
                }); 
```

**编辑发送完整视图**

我没有对此进行测试，但我想如果它不起作用，那么它也会在您发送editext时将复选框发送给构造函数。

```
class PostTask extends AsyncTask<Void,Void,Void>
{
    CheckBox cb;
    EditText et;
    int pos;
    PostTask(int pos,View view)
    {
        cb = view.findViewById(R.id.cbox1);
        et = view.findViewById(R.id.et1);
        pos = Integer.parseInt(et.getTag().toString());
    }
} 
```

//现在在getView中改变

```
submitButton.setOnClickListener(new OnClickListener() {     
            @Override
            public void onClick(View v) {
                   PostRequest p = new PostRequest((View)v.getParent()); // get position from edittext
            }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:57:06.790

您在每个列表项上都有 editText 和提交按钮？

好吧，listView 具有转换视图的系统...它不会像数组大小那样创建视图，但只会创建足够的内容以在屏幕上显示用户，然后它会在您滚动时开始转换它们但是您想要的...所以如果你清除一个editText，你可以看到它充满了其他的值......所以我建议你有另一个数组来提供你的listView，就像你保存你的editText值并在提交按钮上单击你删除它们并在适配器上您应该使用此数组设置 editText 的文本，因此如果该值已提交，它将为空。

这是您的问题的解决方案：

尝试使用与您的列表相同大小的数组：

```
ArrayList<String> texts = new ArrayList<String>();
for(int i = 0; i < items.size(); i++)
texts.add(“”); 
```

所以你所有的editTexts一开始都是空的......然后你在你的自定义适配器的getView方法上设置它们：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    this.position = position;
    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.applicationlistitem, null);
    }

    final ApplicationBean o = (ApplicationBean) items.get(position);

    if (o != null) {

        txtDescription = (EditText) v
                .findViewById(R.id.description_text);

    // you should set your every views’ editText here
    txtDescription.setText(texts.get(position));

    // here you save texts also they changes
    txtDescription.addTextChangedListener({
         @Override
         public void afterTextChanged(Editable s) {
            texts.remove(position);
            texts.add(position, s.toString());
         }

         @Override
         public void beforeTextChanged(CharSequence s, int start, int count,
            int after) { }

         @Override
         public void onTextChanged(CharSequence s, int start, int before,
            int count) { }
     });

        submitButton = (Button) v.findViewById(R.id.submit_btn);
        submitButton.setTag(position);
        submitButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
        texts.remove(position);
        texts.add(position, “”);

                    PostRequest p = new PostRequest(Integer.parseInt(v
                            .getTag().toString()));
                    p.execute();
            }

        });
    }
    return v;
} 
```

# asp.net - 如何使用asp.net vb代码更改警报框的标题栏

> ID：13151767
> 
> 赞同：-1
> 
> 时间：2012-10-31T05:28:13.173
> 
> 标签：asp.net

我使用代码在 asp.net 中显示消息框，如下所示

Dim myscript As String = "alert('请输入患者住院号');window.location.replace(window.location.href);" Page.ClientScript.RegisterStartupScript(Me.GetType, "MyScript", myscript, True)

这将显示带有消息的警报框“请输入住院患者编号”，但消息框的标题栏显示 Windows Internet Explorer 是否可以更改此名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:24:23.610

从技术上讲，您可以更改警报功能的功能，但不能更改警报框的标题和其他内容。我建议您不要使用警告框，而是使用 jQuery 功能，即对话框。查看以下链接。 [自定义警报框](http://www.developer2blog.com/post/2012/10/30/Custom-alert-box.aspx) 您需要做一些很小的更改，并确保您会得到您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:36:05.277

您不能真正更改警报框的标题。但是您可以做的是覆盖警报功能并使用某些 div 显示您的自定义消息。这样，您将完全控制消息框的外观。

检查此链接以了解其实现方式。 [使用 Javascript 自定义警报](https://stackoverflow.com/questions/3391864/custom-alert-using-javascript)

-->新编辑

粘贴您在 .aspx 页面中给出的代码，然后在您的 .cs 文件中使用以下代码调用警报。

```
Dim myscript As String = "alert2('Please Enter The Patients Inpatient number','Message From My Custom page','Ok');    window.location.replace(window.location.href);"
 Page.ClientScript.RegisterStartupScript(Me.GetType, "MyScript", myscript, True) 
```

# security - 将 CSRF 过滤器与 tomcat 6.0.32 一起使用时出现 403 错误

> ID：13151768
> 
> 赞同：5
> 
> 时间：2012-10-31T05:28:45.950
> 
> 标签：security, tomcat, csrf

这是我在 web.xml 中的文件管理器配置

```
<filter>
    <filter-name>CSRFPreventionFilter</filter-name>
    <filter-class>org.apache.catalina.filters.CsrfPreventionFilter</filter-class>
    <init-param>
        <param-name>entryPoints</param-name>
        <param-value>/login<param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>CSRFPreventionFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter> 
```

我错过了什么吗？在 tomcat 中启用 csrf 保护是否需要进行任何代码更改

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:58:26.713

请注意，如果未提供随机数并且过滤器需要随机数，则**403**是[CSRFPreventionFilter响应。](http://svn.apache.org/repos/asf/tomcat/tc7.0.x/tags/TOMCAT_7_0_0/java/org/apache/catalina/filters/CsrfPreventionFilter.java)

我不知道**CSRFPreventionFilter**的当前状态，但根据[这个线程](http://www.mail-archive.com/users@tomcat.apache.org/msg88601.html)，您需要单独指定每个**entryPoint**资源（无通配符） - 或者将过滤器应用于不包含**/login的路径**

所以：

```
<filter>
<filter-name>CSRFPreventionFilter</filter-name>
<filter-class>org.apache.catalina.filters.CsrfPreventionFilter</filter-class>
<init-param>
    <param-name>entryPoints</param-name>
    <param-value>/login/login.html,/login/image.png,/login/style.css</param-value>
</init-param>
</filter> 
```

或者：

```
<filter-mapping>
<filter-name>CSRFPreventionFilter</filter-name>
<url-pattern>/csrf/*</url-pattern>
</filter-mapping> 
```

**2012 年 12 月更新：**

Tomcat [7.0.32修复了](http://tomcat.apache.org/security-7.html#Fixed_in_Apache_Tomcat_7.0.32)**CSRFPreventionFilter**中的一个安全漏洞

# f# - 在 Mac 上的 Mono 3.0 上构建 NaturalSpec

> ID：13151769
> 
> 赞同：0
> 
> 时间：2012-10-31T05:28:49.103
> 
> 标签：f#, mono, f#-3.0

构建 NaturalSpec 在 Mono 上遇到了 NUnit 障碍。有什么方法可以通过那里的 NUnit 测试？

[https://github.com/forki/NaturalSpec](https://github.com/forki/NaturalSpec)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:34:31.770

错误是找不到文件；原来是 NaturalSpec.fsproj 中的 fsc.exe。我编辑了项目，即 FscToolPath，指向 fsc 的根目录，并在 shell 中导出 FscToolExe 是正确的，之后它确实构建了。

# linux - 符号查找错误：/usr/local/lib/libsvn_subr-1.so.0：未定义符号：apr_atomic_xchgptr

> ID：13151772
> 
> 赞同：2
> 
> 时间：2012-10-31T05:28:58.193
> 
> 标签：linux, svn

我使用 yum 安装 svn

百胜安装 mod_dav_svn 颠覆

现在当我运行 svn 命令时，我遇到了以下问题

符号查找错误：/usr/local/lib/libsvn_subr-1.so.0：未定义符号：apr_atomic_xchgptr

你能帮我解决这个问题吗，因为我无法签出我的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T09:07:09.567

那么您安装的 subversion`yum`应该在其中，`/usr`因此导致您的问题的库`/usr/local`可能来自从源代码编译的不同版本。

如果您不再需要它们，那么最简单的解决方案就是从其`/usr/local`子目录中删除所有颠覆痕迹。

# c# - EF4.1 急切加载查询

> ID：13151773
> 
> 赞同：0
> 
> 时间：2012-10-31T05:29:01.750
> 
> 标签：c#, entity-framework

我正在使用 EF 实现搜索功能以在网站上搜索汽车。它工作正常，但我想优化性能。汽车有品牌和型号，以及许多图像。使用 .Include() 包含品牌和型号很容易，但是我在处理图像时遇到了问题……目前，正在执行主查询，然后 EF 查询数据库以获取每个搜索结果以获取图片。我想将这一切都包含在一个查询中。我可以使用 .Include()，但这显然会加载所有图像，而我实际上只想要一个（任何）图像。有没有办法做到这一点？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:37:06.627

您必须对图像使用单独的查询。例如：

```
context.Configuration.LazyLoadingEnabled = false;
var cars = context.Cars.Include(c => c.Model).Where(c => c.Type == "abc").ToList();
var images = context.Images.Where(i => i.Car.Type == "abc" && ...).ToList(); 
```

现在，如果您正确设置了所有内容，EF 应该修复汽车和图像之间的关系，并且每辆汽车都应该具有其导航属性，用于仅填充由第二个查询加载的图像的图像。

# jquery - 用 jquery 保存 XML 文件

> ID：13151774
> 
> 赞同：1
> 
> 时间：2012-10-31T05:29:01.583
> 
> 标签：jquery, xml, ajax, save

我想将 XML 文件保存在“abbrxml.xml”中。我想把像“'Hello world'”这样的句子，然后保存XML。这是代码。当我尝试这个时，没有任何反应。如何使用要放入 xml 的句子保存 XML 文件？

`type: 'button',`

```
 id: 'btnFind',
                    align: 'left',
                    style: 'width:100%',
                    label: 'add',

                    onClick: function () {

                        $.ajax({
                            type: "get",
                            url: "abbrxml.xml",
                            dataType: "xml",
                            success: function (xml) {
                                $(xml).find('root').each(function () {
                                    var test = $(this).find("entry").text();
                                    var abbr = '<xml><message>Hello world</message></xml>';
                                    $("test").append(abbr);
                                });
                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:33:56.293

Javascript 无法在服务器上写入文件，因为它是在本地下载和运行的。您需要通过 AJAX 将您的 javascript 编辑的 XML 发送到为您保存它的 PHP 文件，或类似的东西。

# javascript - jquery TypeScript定义文件中缺少.top？

> ID：13151776
> 
> 赞同：7
> 
> 时间：2012-10-31T05:29:14.033
> 
> 标签：javascript, jquery, typescript

我正在使用以下代码：

```
$('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top }); 
```

打字稿给我一条错误消息说：

```
The property 'top' does not exist on value of type 'Object' 
```

我猜想 jQuery 定义文件中缺少一些东西。有没有其他人看到过这个问题，或者这是不是 jQuery 通常不使用的东西？这是我以前从未见过的。

了解更多信息。这是使用它的代码：

```
 $.fn.buildTableOfContent = function () {
        "use strict";
        var h2 = this.find('h2');
        if (h2.length > 0) {
            var h1 = this.find('h1:first');
            if (h1.length === 0) {
                h1 = this.prepend('<h1>Help</h1>').children(':first');
            }
            var menu = h1.wrap('<div class="h1 with-menu"></div>')
                    .after('<div class="menu"><img src="/Content/images/menu-open-arrow.png" width="16" height="16"><ul></ul></div>')
                    .next().children('ul');
            h2.each(function (i) {
                this.id = 'step' + i;
                menu.append('<li class="icon_down"><a href="#step' + i + '">' + $(this).html() + '</a></li>');
            });
            menu.find('a').click(function (event) {
                event.preventDefault();
                $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top });
            });
        }
        return this;
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T07:06:32.007

从 jquery.d.ts 文件（我的版本中的第 374 行）：

```
interface JQuery {
   ...
   offset(): Object;
   offset(coordinates: any): JQuery;
   offset(func: (index: any, coords: any) => any): JQuery;
   ...
} 
```

通过调用不带参数的函数，类型定义期望函数返回一个`Object`类型。我查看了 jQuery 的文档，你是对的，返回的对象应该有它`top`的`left`属性。

不幸的是，由于没有基于返回类型的重载，您将无法将另一个成员添加到`JQuery`接口上。因为，在这种特殊情况下，类型定义并不像应有的那样具体，我建议您简单地修改您的 jquery.d.ts 文件并更改返回类型，使其看起来如下（可能是字符串而不是数字？）：

```
offset(): { top : number; left : number; }; 
```

如果您不想修改此文件，您还可以选择`any`在访问其上的任何属性之前将结果转换为，例如：

```
$('html, body').animate({ scrollTop: (<any> $($(this).attr('href')).offset()).top }); 
```

缺点是每次调用不带参数的函数时都需要强制转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:33:00.003

而不是这个

```
 $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top }); 
```

尝试这个

```
 $('html, body').animate({ scrollTop: $(this).offset().top }); 
```

# windows-7 - 为什么 openDJ 的 import-ldif 抱怨 Windows 7 上的文件权限？

> ID：13151778
> 
> 赞同：0
> 
> 时间：2012-10-31T05:29:51.707
> 
> 标签：windows-7, file-permissions, updates, opendj

我在 Windows 7 上使用 openDJ，尝试运行 import-ldif，我收到以下消息。该文件夹中的文件不是只读的。对此有何补救措施？

我收到的消息是：
[31/???/2012:07:05:53 +0200] severity="SEVERE_WARNING" msgCount=12 msgID=8519808 message="为后端设置文件权限时出错数据库目录 C:\Users\inor\OpenDJ\db\userRoot: org.opends.server.types.DirectoryException: 对 C:\Users\inor\OpenDJ\db\userRoot 的文件权限的一次或多次更新失败，但在至少一次更新成功。文件的某些权限可能已被更改“

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:52:48.783

此消息表明，当 OpenDJ 服务器在导入期间创建数据库文件时，服务器无法以一致的方式设置所有文件的权限。

这似乎表明用户没有执行这些更改的权利，或者某些文件不属于用户。强烈建议以具有管理员权限的用户身份在 Windows 上运行 OpenDJ。

亲切的问候，

卢多维奇

# asp.net - 在两种超时情况下应用程序将用户重定向到登录页面时的会话超时和身份验证超时值

> ID：13151780
> 
> 赞同：0
> 
> 时间：2012-10-31T05:29:54.670
> 
> 标签：asp.net, asp.net-mvc-3, session-timeout

在我的 Asp.Net MVC 3 应用程序中，我有一个自定义会话过期处理程序属性过滤器，它在调用控制器操作之前检查会话是否过期。

如果会话已过期，自定义过滤器将用户从表单身份验证中注销，并将用户重定向到登录页面。我也知道，当用户访问授权内容时授权失败，将会发生相同的操作流程。

在这种情况下，会话或身份验证超时会产生相同的效果（用户退出表单身份验证并重定向到登录页面），主要关心的是 Timeout(Session) 是大于还是小于 Timeout(验证）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:27:16.163

如果我正确理解您的问题，您的授权属性可能是这里的看门人。问题是当您的会话在您的表单身份验证令牌之前超时时，例如在应用程序池重新启动的情况下。听起来您正在处理这个问题（如果没有，我已经为此编写了代码）。在相反的情况下，您需要确保您不依赖会话中的任何内容来进行非身份验证页面/操作，否则当用户可以匿名访问该页面时，您将面临期望会话值的风险。除此之外，我想不出其他情况是否会导致问题。

您的 auth 属性应始终捕获这种情况并重定向到再次启动会话的登录页面。

但要注意会话——同时针对该用户的多个请求（即 Ajax 请求）访问会话对象一次只会处理一个，因为默认情况下该用户的会话是锁定的。

其他请求将真正挂起，直到访问会话对象的其他请求完成。如果只有主请求访问会话，而该用户的其他重叠请求（如果有的话）没有，这不是问题。

# c# - 禁用标签的抗锯齿渲染

> ID：13151781
> 
> 赞同：2
> 
> 时间：2012-10-31T05:30:00.953
> 
> 标签：c#, winforms, fonts, antialiasing

我有一个 C# Winform 应用程序，在我的表单上我有一个标签控件。有没有办法可以仅为该标签禁用抗锯齿渲染？我正在使用条形码字体，黑白字体上的抗锯齿正在为字体添加颜色。

# python - 重新映射字典列表中的键名

> ID：13151785
> 
> 赞同：6
> 
> 时间：2012-10-31T05:30:16.097
> 
> 标签：python

将相同键字典列表中的每个字典键重新映射到不同键名的pythonic方法是什么？例如，

```
[{'type_id': 6, 'type_name': 'Type 1'}, {'type_id': 12, 'type_name': 'Type 2'}] 
```

必须转变为

```
[{'type': 6, 'name': 'Type 1'}, {'type': 12, 'name': 'Type 2'}] 
```

（我需要进行转换以匹配我正在处理的 API 的输出规范。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T05:42:39.253

Python >= 2.7（使用[字典理解](http://www.python.org/dev/peps/pep-0274/)）：

```
transform = {"type_id": "type", "type_name": "name"}
new_list = [{transform[k]: v for k, v in d.items()} for d in old_list] 
```

Python >= 2.4（使用[dict](http://docs.python.org/2/library/stdtypes.html#dict)构造函数）：

```
transform = {"type_id": "type", "type_name": "name"}
new_list = [dict((transform[k], v) for k, v in d.items()) for d in old_list] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:08:03.170

就地修改怎么样？

```
>>> transform = {"type_id": "type", "type_name": "name"}    
>>> for D in L:
    for k,k_new in transform.items():
        D[k_new] = D.pop(k)             
>>> L
[{'type': 6, 'name': 'Type 1'}, {'type': 12, 'name': 'Type 2'}] 
```

* * *

甚至更好：

```
>>> for D in L:
    for k,k_new in transform.items():
        value = D.pop(k,None)
        if value is not None:
            D[k_new] = value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T05:40:20.270

只需使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
>>> d = [{'type_id': 6, 'type_name': 'Type 1'}, {'type_id': 12, 'type_name': 'Type 2'}]
>>> print [{'type':x['type_id'],'name':x['type_name']} for x in d]
[{'type': 6, 'name': 'Type 1'}, {'type': 12, 'name': 'Type 2'}]
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T05:42:54.763

新的用户友好，易于阅读的方式：

```
>>> list2 = []
>>> for d in list1:
...     x = dict()
...     for k,v in d.iteritems():
...        x[k.split('_')[1]] = v
...     list2.append(x)
...
>>> list2
[{'name': 'Type 1', 'id': 6}, {'name': 'Type 2', 'id': 12}] 
```

# internationalization - Google Apps 脚本国际化 (i18n)

> ID：13151787
> 
> 赞同：9
> 
> 时间：2012-10-31T05:30:23.620
> 
> 标签：internationalization, google-apps-script

文档似乎没有提及任何内容 - 是否有关于如何在 Google Apps 脚本中执行 i18n 的推荐方法？特别是那些作为 WebApp 发布的？有没有办法找出用户的语言环境？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-14T21:28:28.860

Session.getActiveUserLocale() 应该返回语言环境。

[https://developers.google.com/apps-script/reference/base/session#getActiveUserLocale()](https://developers.google.com/apps-script/reference/base/session#getActiveUserLocale%28%29)

# c# - 将列表视图行限制为 1？

> ID：13151788
> 
> 赞同：1
> 
> 时间：2012-10-31T05:30:30.787
> 
> 标签：c#, listview

是否可以将列表视图中的行数限制为 1？我需要将在 VB6 中创建的用户控件模仿到 .Net（C#，4.0）中，它看起来像一个文本框，但允许将项目放入文本框中，并显示一个带有小图标的项目（表示文件类型）和文件名。当你添加更多时，它们会紧挨着其他 - 太多会使它们滚动到一边。

我打算用 ListView 试试这个 - 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:46:14.870

为什么不以编程方式限制项目的数量 - 或者如果您想要拖放 - 然后使用 DragOver 事件。

# windows-8 - Windows 8 SDK 中的 IdleDetectionMode

> ID：13151789
> 
> 赞同：2
> 
> 时间：2012-10-31T05:30:36.950
> 
> 标签：windows-8, mediaelement

windows 8 sdk 中是否有与 IdleDetectionMode 方法等效的方法？我试图弄清楚如何在播放视频时防止屏幕锁定。我假设该方法与 windows phone 7 中的方法相同。

# objective-c - 如何获取 AMPathPopUpButton 值？

> ID：13151790
> 
> 赞同：3
> 
> 时间：2012-10-31T05:30:42.760
> 
> 标签：objective-c, macos, cocoa, automator

我正在制作一个需要向用户展示选择输出目录的方法的应用程序。目前，我的视图中有一个 AMPathPopUpButton，看起来很棒。但是，无论我尝试什么，我都无法从中获得路径。

到目前为止我已经尝试过：

1.  使用控制器键“selection”和模型键路径 savePath 将 AMPathPopUpButton 的路径值绑定到对象控制器，显示消息“Xcode 无法解析输入的键路径，即使键已添加到对象控制器。对象控制器是然后绑定到我需要使用该值的类的实例中的字典。字典在`-(void)awakeFromNib`.
    *   结果：从返回空值`[filePathDict objectForKey:@"savePath"]`
2.  将 AMPathPopUpButton 的路径值直接绑定到类实例中的字符串，该类实例也在`-(void)awakeFromNib`.
    *   `-[AMPathPopUpButton hasVariableForm]: unrecognized selector sent to instance 0x10050e1b0`结果：应用程序在启动时吐出并崩溃。
3.  使用插座将 AMPathPopUpButton 连接到类的实例
    *   结果：Automator.framework 中的任何地方都没有 AMPathPopUpButton 的定义，所以我得到了错误`Unknown type name 'AMPathPopUpButton'`

我不知道接下来要尝试什么。我确信我无法让绑定工作的事实是基本的（我之前没有使用过绑定，除了与共享用户默认控制器一起使用，然后仅用于文本字段和颜色：p）

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:54:22.067

我刚刚结束了使用 NSPathControl。看起来不太好，但它有效：p

# scala - 针对 Scala 2.10 RC1 构建项目时出现 scala.reflect.internal.MissingRequirementError

> ID：13151792
> 
> 赞同：4
> 
> 时间：2012-10-31T05:31:22.400
> 
> 标签：scala, build, gradle, scala-2.10

我正在尝试针对 Scala 2.10.0 RC1 构建我们的旧项目。这是我这样做时遇到的错误：

```
rahul@acb70333:~/Projects/Vayana/gryphon-camel-scala> gradle build
:compileJava UP-TO-DATE
:compileScala
[ant:scalac] scala.reflect.internal.MissingRequirementError: object scala.beans.BeanInfo in compiler mirror not found.
[ant:scalac]    at scala.reflect.internal.MissingRequirementError$.signal(MissingRequirementError.scala:16)
...
[ant:scalac]    at org.gradle.launcher.GradleMain.main(GradleMain.java:26)

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileScala'.
> Compile failed because of an internal compiler error (object scala.beans.BeanInfo in compiler mirror not found.); see the error output for details.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 24.7 secs 
```

此处的完整堆栈跟踪：[https](https://www.refheap.com/paste/6228) ://www.refheap.com/paste/6228 。

这个错误信息是什么意思？我错过了类路径上的一些库吗？

# jquery - 带有数据的jquery自动弹出窗口

> ID：13151800
> 
> 赞同：1
> 
> 时间：2012-10-31T05:32:36.667
> 
> 标签：jquery

我不知道为什么当我在html中添加js时弹出窗口不能自动弹出，js会检查数据以获取“错误”/“过期”并会弹出全屏消息，任何人都可以帮忙吗？

这是弹出js：

```
(function ($) {
    $(function () {

            $.get("http://www.theonionism.com/webcontrol/check.php?client=www.theonionism.com", function(data){
                console.log(data);
                if(data == "error"){
                    alert("Web site error, please contact us");
                    return false;
                }

                if(data == "expired"){

                    $("body").append('<div class="expried-background"></div><div class="expried-nav">Website already expired, please contact us to resolve the matter.</div>');

                    $("body").css("margin", "0px");
                    $(".expried-background").css({
                    "position":"absolute",
                    "top":"0px",
                    "left":"0px",                   
                    "background-color":"black",
                    "opacity": "0.8",
                    "z-index": "99999",
                    "width": $(document).width(),
                    "height": $(document).height()
                    });

                    $(".expried-nav").css({
                        "position":"absolute",
                        "top": "45%",
                        "height":"40px",
                        "width":"100%",
                        "background-color":"#fff",
                        "z-index": "999999",
                        "font-family":"Arial",
                        "font-weight":"bold",
                        "text-align":"center",
                        "color":"red",
                        "padding-top":"20px",
                    });
                    return false;               
                }

        });

    }); 
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:49:58.850

尝试使用这个：

尝试在外面使用

```
function($){}() // remove it and try

$(function(){
   // put your stuff here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:26:50.000

嗨，我在本地尝试过，它按照您需要的方式工作：

```
$(function () {

    $.get("http://localhost/jq/1.php?client=www.get.com", function(data){
        if(data == "err"){
           alert("Data Loaded: " + data);

           $("body").append('<div class="expried-background"></div><div class="expried-nav">'+data+'Website already expired, please contact us to resolve the matter.</div>');

           $("body").css("margin", "0px");
           $(".expried-background").css({
             "position":"absolute",
             "top":"0px",
             "left":"0px",                   
             "background-color":"black",
             "opacity": "0.8",
             "z-index": "99999",
             "width": $(document).width(),
             "height": $(document).height()
             });

             $(".expried-nav").css({
               "position":"absolute",
               "top": "45%",
               "height":"40px",
               "width":"100%",
               "background-color":"#fff",
               "z-index": "999999",
               "font-family":"Arial",
               "font-weight":"bold",
               "text-align":"center",
               "color":"red",
               "padding-top":"20px"
             });
                return false;               
          }

        });

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:00:35.407

您是否尝试过这种方式：

```
if(data == '("error");'){

 // do your stuff in case of error

}

and

if(data == '("expired");'){

 // do your stuff in case of expiration

} 
```

让我知道**这是否可以解决**问题。请不要忘记**接受它作为答案**。

谢谢

# knockout-2.0 - KnockoutJS 中的嵌套无容器 foreach

> ID：13151801
> 
> 赞同：0
> 
> 时间：2012-10-31T05:32:51.663
> 
> 标签：knockout-2.0

我在使用嵌套在表中的普通 foreach 绑定中的无容器 foreach 时遇到问题。`<tbody>` [在这里找到](https://stackoverflow.com/questions/8115896/knockout-js-containerless-foreach-not-working-with-table?lq=1)的添加您自己的解决方案不起作用，如本[jsFiddle 所示](http://jsfiddle.net/ZLXJm/2/)。

HTML

```
<table style="border: solid 1px black;">
    <thead>
        <tr>
            <th>Name</th>
            <!-- ko foreach: data -->
            <th data-bind="text: $data.name"></th>
            <!-- /ko -->
        </tr>
    </thead>
    <tbody data-bind="foreach: names">
        <tr>
            <td data-bind="text: $data.name"></td> 
            <!-- ko foreach: data -->
            <td data-bind="text: $data.abbr"></td>
            <!-- /ko -->            
        </tr>
    </tbody>
</table> 
```

JS

```
var data = {
    names: [
        { name: 'Rick' },
        { name: 'Bob'},
        { name: 'Sue' },
    ],
    data:[
        { name: 'object1', abbr: 'obj1' },
        { name: 'object2', abbr: 'obj2' },
        { name: 'object3', abbr: 'obj3' },
        { name: 'object4', abbr: 'obj4' }
    ]
};

var model = function( data ){
    this.names = ko.observableArray( data.names );
    this.data = ko.observableArray( data.data );
}
ko.applyBindings( new model( data ) );
​ 
```

表格在第一次发生`names.abbr`绑定后停止渲染......我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:36:40.157

你应该使用它`<!-- ko foreach: $parent.data -->` 因为你在 a 中使用它`foreach:names`，并且 names 没有任何属性`name`，并且你想访问它的父数据，所以，使用`$parent`它来访问它的父

像

```
<tbody data-bind="foreach: names">
    <tr>
        <td data-bind="text: $data.name"></td> 
        <!-- ko foreach: $parent.data -->
        <td data-bind="text: $data.abbr"></td>
        <!-- /ko -->            
    </tr>
</tbody> 
```

检查此**[演示](http://jsfiddle.net/ZLXJm/3/)**

# powershell - Powershell脚本未从批处理文件运行

> ID：13151803
> 
> 赞同：1
> 
> 时间：2012-10-31T05:32:56.923
> 
> 标签：powershell, batch-file

我编写了以下脚本来将用户添加到 MS Live：

```
$pass = Get-Content D:\PSScripts\pass.txt | ConvertTo-SecureString
$cred = New-Object System.Management.Automation.PSCredential "user@domain.com", $pass
Connect-MsolService -Credential $cred
New-MsolUser -userprincipalname test@domain.com -Displayname "Johny Tester2" 
```

我可以将命令逐行复制并粘贴到 PowerShell 并成功创建一个新用户，但我不知道如何从命令行全部运行它们。

我将以上 4 行保存在 D:\PSScripts\script2.ps1 的文件中

我创建了一个文件：D:\PSScripts\runall.bat，其内容如下：

powershell.exe "&'D:\PSScripts\script2.ps1'"

（我也试过不带 & 符号，不带引号，不带 'exe'，带 -command 开关）

看起来它通过了前两行，然后在“Connect-MsolService”和“New-MsolUser”上抛出错误：

*术语“Connect-MsolService”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。*

我需要能够从另一个程序执行这些命令，并且运行 bat 文件是我最好的选择。请帮忙。

在 Win Server 2008 R2、PowerShell 版本 2.0 上运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:35:02.307

PowerShell 2 不执行动态模块加载，但这是 PowerShell 3 中的一项新功能。要解决您的问题，您可以使用 Import-Module cmdlet 手动将模块导入会话。这是完整的修复。

```
Import-Module MSOnline
$pass = Get-Content D:\PSScripts\pass.txt | ConvertTo-SecureString
$cred = New-Object System.Management.Automation.PSCredential "user@domain.com", $pass
Connect-MsolService -Credential $cred
New-MsolUser -userprincipalname test@domain.com -Displayname "Johny Tester2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:59:30.537

尝试添加

```
import-module MSOnline 
```

在您的`D:\PSScripts\script2.ps1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:02:41.223

在此处查看完整主题：[无法在 PowerShell 上导入 MSOnline（Connect-MsolService 错误）](https://stackoverflow.com/questions/16018732/msonline-cant-be-imported-on-powershell-connect-msolservice-error/16018733#16018733)

我为解决这个问题所做的是：

从源中复制名为 MSOnline 和 MSOnline Extended 的文件夹

> C:\Windows\System32\WindowsPowerShell\v1.0\Modules\MSOnline

到文件夹

> C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules

然后在 PS 中运行`Import-Module MSOnline`，它会自动获取模块：D

# sql - 如何针对存储过程测试查询

> ID：13151804
> 
> 赞同：0
> 
> 时间：2012-10-31T05:33:01.940
> 
> 标签：sql, stored-procedures, sql-server-2008-r2, ssms

```
-- =============================================

ALTER PROCEDURE [dbo].[NST_GetCboCurrencyAfterUpdate]
@AccCurrency nvarchar(3)='',

@AccSgroup nvarchar(6)= '',

@AccInternalCie int=null

AS

BEGIN

SET NOCOUNT ON;

    IF @AccInternalCie is not null and @AccCurrency <> '' and @AccSgroup <> ''
    Begin
    SELECT * FROM TblAccounts Where 
   AccInternalCie = @AccInternalCie and AccCurrency = @AccCurrency and AccSgroup = @AccSgroup ORDER BY AccDescription

   End 

    Else if @AccInternalCie is not null and @AccCurrency <> ''
   Begin
   SELECT * FROM TblAccounts Where 
   AccInternalCie = @AccInternalCie and AccCurrency = @AccCurrency ORDER BY AccDescription
   END

   Else if @AccInternalCie is not null and @AccSgroup <> ''
   Begin
   SELECT * FROM TblAccounts Where 
   AccInternalCie = @AccInternalCie and AccSgroup = @AccSgroup ORDER BY AccDescription
   END

    Else if @AccCurrency <> '' and @AccSgroup <> ''
   Begin
   SELECT * FROM TblAccounts Where 
   AccCurrency = @AccCurrency and AccSgroup = @AccSgroup ORDER BY AccDescription
   END
  Else if @AccSgroup <> '' 
   Begin
   SELECT * FROM TblAccounts Where 
    AccSgroup = @AccSgroup 
    Print @AccSgroup
   END
    Else if @AccCurrency <> '' 
   Begin
   SELECT * FROM TblAccounts Where 
    AccCurrency = @AccCurrency ORDER BY AccDescription
   END
     Else if @AccInternalCie is not null 
   Begin
   SELECT * FROM TblAccounts Where 
   AccInternalCie = @AccInternalCie 
   END

end 
```

我有以下存储过程，我如何在 SQL SERVER MANAGEMENT STUDIO 中进行调试测试如何执行特定查询

```
Select * from TblAccounts where AccSGroup = '1000' 
```

只说 AccSGroup 不等于 '' 所以

```
 Else if @AccSgroup <> ''       
    Begin
    SELECT * FROM TblAccounts 
    Where AccSgroup = @AccSgroup 
    Print @AccSgroup
   END 
```

应该执行查询并且必须绕过休息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:14:14.183

我认为您应该更改存储过程以将输入参数设置为 null，只要它们等于 ''

所以在你的任何逻辑执行之前在你的程序开始时这样做。

```
if @AccCurrency ='' 
BEGIN
     set @AccCurrency = null
END
if @AccSgroup ='' 
BEGIN
     set @AccSgroup = null
END 
```

然后更改您的逻辑以删除对 <> '' 的检查，而不是检查是否为空

所以改变如下线..

```
IF @AccInternalCie is not null and @AccCurrency <> '' and @AccSgroup <> '' 
```

到这个..

```
IF @AccInternalCie is not null and @AccCurrency  is not null and @AccSgroup  is not null 
```

然后使用此测试您的存储过程..

```
exec [dbo].[NST_GetCboCurrencyAfterUpdate]
@AccCurrency =null,
@AccSgroup = 'your value',
@AccInternalCie =null 
```

这应该会得到你需要的结果！！

更改您的 DB 层代码以检查空值/空白值，并在设置参数值时传递 DBNull.Value。例子

```
if(AccCurrency.Trim().Equals(string.Empty))
{
    ParameterAccCrurrency.Value = DBNull.Value;
}
else
{
    ParameterAccCrurrency.Value = AccCurrency;
} 
```

# ruby-on-rails-3.2 - ROR：未定义的方法“验证”

> ID：13151806
> 
> 赞同：1
> 
> 时间：2012-10-31T05:33:12.817
> 
> 标签：ruby-on-rails-3.2, change-password

我想在我的 Rails 应用程序中添加“更改密码”功能，我从这里研究它 (207.44.138.58/~roreexper/viewtopic.php?t=690&highlight=&sid=16f7417dcbb3cb8960912c8134351fd9)

在我的视图页面中，我添加：-

```
 = form_tag :action => 'update' do
   - flash.each do |key, value|
     %div.TxtRed{:class => "flash #{key}"}= value
   %p
     %label Current password
     %br
     = password_field_tag "user[current_password]", nil
   %p
     %label New password
     %br
     = password_field_tag "user[password]", nil
   %p
     %label Confirm password
     %br
     = password_field_tag "user[password_confirmation]", nil
   %P
     = button_tag "Save", :class => "btn-custom ML10", :type => :submit 
```

在控制器中：-

```
 def update
    return unless request.post?
    @user = Refinery::User.find_by_id(current_user.id)
    if current_user = Refinery::User.authenticate(@user.username, params[:user][:current_password])

       if (params[:user][:password] == params[:user][:password_confirmation])

          current_user.encrypted_password = crypted_password(params[:user] [:password] ,current_user.salt)

          flash[:notice] = current_user.save ?"Password changed" :"Password not changed"
          redirect_to my_page_path

       else

          flash[:notice] = "Password mismatch"
          @current_password = params[:current_password]

       end

    else

       flash[:notice] = "Wrong password"

    end
 end

 def crypted_password(password, salt)
   string_to_hash = password + "nyros" + salt
   Digest::SHA1.hexdigest(string_to_hash)
 end 
```

但它不能正常工作并给出错误：“未定义的方法 `authenticate' for #”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T07:07:28.450

如果调用它的对象为 nil，则 authenticate 方法将引发异常。也就是说，什么`find_by`时候没有找到匹配的用户。

在结构体的条件下测试@user 不为nil `if`，而不是在if 条件下调用authenticate 方法。所以改变：

```
@user = Refinery::User.find_by_id(current_user.id)
if !@user.nil?
    current_user = Refinery::User.authenticate(@user.username, params[:user][:current_password])
.
.
. 
```

至

```
@user = Refinery::User.find_by_id(current_user.id)
current_user = Refinery::User.authenticate(@user.username, params[:user][:current_password]) 
```

# javascript - 为什么`Object.prototype.toString`总是返回`[object *]`？

> ID：13151809
> 
> 赞同：3
> 
> 时间：2012-10-31T05:33:32.657
> 
> 标签：javascript, ecmascript-5

如果你调用`Object.prototype.toString.call(anything)`result is always `[object Something]`， where`Something`可能是几件事之一。我的问题是为什么“对象”部分在那里？总是把它放在那里似乎是多余的。它不会告诉您有关传入的参数的任何信息。

```
Object.prototype.toString.call(null);
=> [object Null]

Object.prototype.toString.call(undefined);
=> [object Undefined] 
```

由于`null`and `undefined`are not objects (and failed `CheckObjectCoercible`)，“object”部分真的，真的看起来毫无意义。

我不得不认为最初将“对象”部分放在那里是有原因的，即使从那以后这个原因已经丢失了，现在只是出于历史原因而保留了下来。

任何人都可以帮助阐明这一点吗？

* * *

需要明确的是，我已经知道如何`Object.prototype.toString`用于获取`[[Class]]`对象的（类型）。我的问题涉及返回字符串格式的原因——特别是开头的“对象”部分。我想知道这部分是否有原因，或者这部分是否有可能的未来原因。也许将来它可以返回“对象”以外的东西？我可以期望它总是返回“对象”吗？如果是这样，为什么它甚至返回它？无论输入是什么，谁想要一个函数总是返回相同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:05:50.457

[ES5.1 规范的附件 F 说明了](http://ecma-international.org/ecma-262/5.1/#sec-F)这一点`Object.prototype.toString`：

> 15.2.4.2：第 5 版处理 undefined 和 null 因为此值导致现有代码失败。修改规范以保持与此类代码的兼容性。新的步骤 1 和 2 添加到算法中。

这是在 ES5.1 规范中进行的更正。在 ES5 之前，将 null 或 undefined 传递给 toString 总是会导致传递全局对象。ES5 中与严格模式相关的更改会导致 null 和 undefined 不加修改地传递。如 ES5 中所述，传递 null 或 undefined 会`Object.prototype.toString`导致 TypeError 异常。这个异常破坏了一些现有的代码，所以我们必须修复规范以在这种情况下不抛出。

那么`toString`null 和 undefined 应该返回什么？事实证明，许多现有代码还期望`Object.prototype.toString`总是返回一个格式为 的字符串`"[object *]"`。所以，我们决定让 null 和 undefined 产生`"[object Null]"`and `"[object Undefined]"`。

这似乎奏效了，并且通常允许现有的基于 ES3 的代码在 ES5/5.1 中与严格模式相关的更改存在的情况下继续工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:49:12.950

Okay, think of it like this:

1.  All values in JavaScript are actually instances of a class. Even `undefined` and `null` are implemented as singleton objects in the interpreter. For example `undefined` is actually `Undefined.instance` in Rhino (implemented in Java).
2.  The `toString` method defined exposes the class name of the JavaScript value. However since the value is not the class itself but an instance of the class, `toString` returns the a string of the form `[object ClassName]`.
3.  Yes, the `[object *]` form is redundant. However someone wanted it to be like that and so we're stuck with it. Now that it's there it will cause a lot of problems if it's suddenly changed. Old code that depends upon it may break.

**Edit:** It's important to note when JavaScript ends and the interpreter begins. For example when you call a function in JavaScript the interpreter creates a new execution context, which is an object in the language in which the JavaScript interpreter is written (not JavaScript itself).

Similarly, the `[[Class]]` of a JavaScript value is the class in the language in which the JavaScript interpreter is written, which is used to create instances of that class. For example, in Rhino functions are instances of the class [`org.mozilla.javascript.BaseFunction`](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/BaseFunction.java "mozilla/rhino"). This class has a method called `getClassName` which [returns](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/BaseFunction.java#L40 "mozilla/rhino") `Function` (the `[[Class]]` of the instances of `BaseFunction`).

Similarly there's a class called [`org.mozilla.javascript.Undefined`](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/Undefined.java "mozilla/rhino") which has a static property called `instance` which is the [singleton instance](https://github.com/mozilla/rhino/blob/master/src/org/mozilla/javascript/Undefined.java#L18 "mozilla/rhino") of `Undefined`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T07:11:40.013

这是 ES5 所说的：

> [15.2.4.2 Object.prototype.toString()](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4.2)
> 
> 当调用 toString 方法时，会执行以下步骤：
> 
> 1.  如果 this 值未定义，则返回“[object Undefined]”。
> 2.  如果 this 值为 null，则返回“[object Null]”。
> 3.  令 O 为调用 ToObject 并将 this 值作为参数传递的结果。
> 4.  令 class 为 O 的 [[Class]] 内部属性的值。
> 5.  返回作为连接三个字符串“[object”、class 和“]”的结果的 String 值。

所以`toString`首先处理`undefined`and `null`，然后将参数转换为一个对象，然后返回该对象的内部`[[Class]]`属性。请注意，`toString`它旨在由对象继承，因此它的行为就像它一样是公平的。

在 ECMAScript 中，一切都是对象。基元只是为了方便避免以下事情：

```
// Create number objects with the same value
var a = new Number(7);
var b = new Number(7);

a == b; // false

a.valueOf() == b.valueOf(); // true 
```

JavaScript 的主要目标是简单。松散的打字让生活更轻松，但这也意味着有一些弱点需要学习。

# msbuild - MSBuild 在清理时删除文件

> ID：13151811
> 
> 赞同：2
> 
> 时间：2012-10-31T05:33:51.357
> 
> 标签：msbuild, msbuild-task

我有以下称为 AfterBuild 的目标

```
<Target Name="CopyAppDeployableArtifacts">
    <ItemGroup>
      <MyFiles Include="App_DeployableArtifacts\**\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(MyFiles)" DestinationFiles="@(MyFiles->'$(OutputPath)\%(RecursiveDir)%(Filename)%(Extension)')" />
  </Target> 
```

我注意到清理我的解决方案会在 bin 中留下由该命令复制的文件夹。

反转此副本并在清理时删除这些文件夹的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:30:19.200

扩展 msbuild 的内置清洁功能，请参阅 Sayeds 博客：[http ://www.sedodream.com/PermaLink,guid,670b78b1-4968-46b1-905b-3ae903f3d9cb.aspx](http://www.sedodream.com/PermaLink,guid,670b78b1-4968-46b1-905b-3ae903f3d9cb.aspx)

# regex - .htaccess 301 重定向目标 URL 中的瑞典语字符

> ID：13151817
> 
> 赞同：2
> 
> 时间：2012-10-31T05:34:27.247
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我需要编写 301 重定向，例如如果 URL 有 /faq 那么它应该重定向到 /frågor-svar

我将重定向规则写为

```
redirect 301 /faq <siteURL>/frågor-svar 
```

经测试，它会重定向到指定的 URL，但我输入的瑞典语字符已更改。似乎 URL 被编码并变成`/fr%E5gor-svar/`

但是在浏览器的地址栏中，我需要该 URL 保持`/frågor-svar/`不变`/fr%E5gor-svar/`

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:54:49.577

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^faq/?$ frågor-svar [R=301,L,NE] 
```

# javascript - IE Javascript 样式显示不起作用

> ID：13151819
> 
> 赞同：2
> 
> 时间：2012-10-31T05:34:47.400
> 
> 标签：javascript, html, css

我有两个 div，一个的显示属性默认是块，另一个是无。当您单击一个按钮时，显示会切换，因此一个隐藏而另一个显示。它适用于除 IE 之外的所有浏览器。知道为什么会这样吗？是不是和IE的innerHTML问题有关？我将粘贴js和html

**JavaScript**：

```
function show(id, elm){
    var hide = document.getElementById(id);
    var show;
    var closeIcon = document.getElementById("closeIcon");
    if(id.substring(0, 3) != "set"){
        elmName = "set"+id.substring(0, 1).toUpperCase() + id.substring(1, id.length); 
        if(id != "video")   hide.style.display = "none";
        show = document.getElementById(elmName);
        show.style.display = "block";
        $("#instruccionBox").hide();
        $("#flechaEdit").hide();
    }else{
        elmName = id.substring(3, 4).toLowerCase() + id.substring(4, id.length); 
        hide.style.display = "none"; 
        show = document.getElementById(elmName);
        show.style.display = "block";
        $("#instruccionBox").show();
        $("#flechaEdit").show();
        skipStep();
    }

    if(id.substring(0, 3) != "set" && id != "meta" && id != "fechaLimite"){
        $('#closeIcon').show();
        closeIcon.style.left = $(show).width() - 45 + "px";
        closeIcon.style.top = "0px";
        show.appendChild(closeIcon); //alert(show.id);
    }

} 
```

**HTML**：

```
<div class="grid_4 proyectoDonaciones" id="meta">
    <img src="images/edit-icon.png" alt="" class="editIcon" style="position:absolute; display:none"  id="editMeta" onclick="show('meta')"/>
    <h1 class="letter border1-pad2">META</h1>
    <!--div class="triangulo_izq_claro"></div-->
    <div> 
        <img src="images/cabezaIguana.png" alt="" width="70" class="editIcon" style="position:relative; left:12px;" onclick="show('meta')" id="cabezaMeta"/>
        <div class="donacionesBarra">
            <div style="margin:0 0 -60px 40%;"><h2 id="porcentajeMeta">0%<h2></div>
            <table width="100%">
                <tr height="45">
                    <td id="metaLeft" bgcolor="#a4c547" width="0%"></td>
                    <td id="metaRight" bgcolor="#FFFFFF" width="100%"></td>
                    <td><img src="images/colaIguana.png" alt="" width="70" style="position:absolute; left:250px;"/></td>
                </tr>
                <tr>
                    <td colspan="2"><span style="float:right;"><h3 style="color:#839e38;">$</h3></span></td>
                </tr>
                <tr>
                    <td colspan="2"><span style="float:right; font-size:15px;">of $<span id="metaText">9000</span> Goal</span></td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div class="grid_4 proyectoDonaciones" style="margin-top:10px; display:none;" id="setMeta">
    <h2 style="margin:10px;">Escriba la meta</h2>
    <div style="margin:10px 25px 10px 10px;"> 
        <input type="text" id="inputMeta" value="9000" style="width:100%;" class="pro_form2" / >
        <br />
        <center>
            <input type="button" value="ACTUALIZAR" class="pro_btn pro_warning" onclick="show('setMeta', document.getElementById('closeIcon'))" />
        </center>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T08:50:06.963

您的按钮正试图显示隐藏它的 div！

您需要定位正确的 div 例如

```
<div id="firstDiv" style="border:1px solid red;">
    first div here
    <input type="button" value="show second" onclick="$('#secondDiv').show();$('#firstDiv').hide()" />
</div>
<div id="secondDiv" style="display: none; border:1px solid blue;">
    second div here
    <input type="button" value="show first" onclick="$('#firstDiv').show();$('#secondDiv').hide()" />
</div> 
```

# c# - 运行时的 RadGrid 超链接列

> ID：13151822
> 
> 赞同：1
> 
> 时间：2012-10-31T05:34:59.943
> 
> 标签：c#, datatable, telerik, radgrid

我正在使用 Telerik rad Grid 控件，它绑定到后面代码中的数据表。我想在运行时将每个单元格更改为超链接字段并配置 NavigateUrl。当我单击每一行时，会显示一个新页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:36:43.073

请尝试使用以下代码片段。

**.aspx**

```
<telerik:RadGrid ID="RadGrid2" runat="server" 
    onneeddatasource="RadGrid2_NeedDataSource" 
    onitemdatabound="RadGrid2_ItemDataBound">
</telerik:RadGrid> 
```

**.aspx.cs**

```
protected void RadGrid2_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    DataTable dt = new DataTable();
    dt.Columns.Add("Shipper", typeof(string));
    dt.Rows.Add("Shipper1");
    dt.Rows.Add("Shipper2");
    dt.Rows.Add("Shipper3");

    RadGrid2.DataSource = dt;
}

protected void RadGrid2_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem item = e.Item as GridDataItem;
        TableCell tb = item["Shipper"];
        HyperLink lnk = new HyperLink();
        lnk.ID = "lnk";
        lnk.Text = (item.DataItem as DataRowView)["Shipper"].ToString();
        lnk.NavigateUrl = "https://www.google.co.in/";
        tb.Controls.Clear();
        tb.Controls.Add(lnk);
    }
} 
```

# html - 麻烦定位按钮和背景渐变

> ID：13151823
> 
> 赞同：1
> 
> 时间：2012-10-31T05:35:00.967
> 
> 标签：html, button, background

`enter code here`我是 html 和所有网页的新手……但通过反复试验，我设法创建了一个带有游戏插件的本地站点。别介意游戏或插件。

我在定位某些按钮时遇到了麻烦，特别是“高分”和“个人最佳”按钮，我尝试将它们与其他按钮放在一起，但它们会重叠。

有什么建议吗？

我也在尝试向背景添加颜色渐变，我在谷歌上尝试了一些，但代码格式似乎不同。

请记住，我所做的一切都只是通过反复试验，我对代码设计或编码 ettiqutte 一无所知，所以如果我的代码有点混乱且难以理解，请原谅。

```
<html>
<head>
<title>ORBIT COLLISION</title>

<p>

<font size="7" face="Georgia, Arial" color="ffff00">
    <center>OSUPER-DUPER-ORBITER-er</center>

</p>

</head>

<body bgcolor=
"00ff00"
>

<FORM 
METHOD="LINK" 
ACTION="index3.html">
<INPUT TYPE="submit" 
VALUE="High Scores"
style="position: absolute; left: 700px; top: 680px; " >
</FORM>

<FORM 
METHOD="LINK" 
ACTION="index4.html">
<INPUT TYPE="submit" 
VALUE="Personal best"
style="position: absolute; left: 500px; top: 680px; " >
</FORM>

</body>

<center>
<EMBED SRC="Broken Promises.mp3" 
HIDDEN="False" 
AUTOSTART="False" 
width="500" height="500">
</center>

<center>
<button type=>Start 
<button type=>Pause  
<button type=>Save
<button type=>Load

</html> 
```

# ios - 在用户点击屏幕的任何位置创建一个 UITextField

> ID：13151836
> 
> 赞同：0
> 
> 时间：2012-10-31T05:37:00.920
> 
> 标签：ios, ipad, uitextfield

我正在制作一个 iPad 应用程序，它能够识别用户在视图中点击的位置并在该位置创建 UITextField。对此进行编程的最有效方法是什么？它适用于多个文本字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:53:27.903

我认为就 UI 而言，您的想法听起来有点靠不住，但您可能希望使用`UITapGestureRecognizer`. 代码看起来像这样：

```
// In viewDidLoad
UITapGestureRecognizer *tapRecognizer = [UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tappedInView:)];
[self.view addGestureRecognizer:tapRecognizer];

- (void)tappedInView:(UIGestureRecognizer *)gestureRecognizer
{
     CGPoint pointForTextField = [gestureRecognizer locationInView:gestureRecognizer.view];
     // Add the UITextField to your view. You could use the pointForTextField as either the origin or center of the text field
    UITextField *textField = [UITextField alloc] initWithFrame:CGRectMake(pointForTextField.x,pointForTextField.y,100,44)];
    [self.view addSubview:textField];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:02:36.040

```
//text field move where you touch in screen
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *myTouch = [touches anyObject];
    point = [myTouch locationInView:self.view];
    NSLog(@"%f,%f",point.x, point.y);
    yourTextField.frame = CGRectMake(point.x, point.y, width,height);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:03:35.717

做这个：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   CGPoint locationPoint = [[touches anyObject] locationInView:self.view];
   if(locationPoint)
   {
     //add UITextField
     yourTextField.frame = CGRectMake(locationPoint.x, locationPoint.y, 40,40); //change height and width according
   }

} 
```

# mysql - 在 MySQL 中，为什么在使用未提交读取时从选择中设置变量会获得锁？

> ID：13151837
> 
> 赞同：8
> 
> 时间：2012-10-31T05:37:02.467
> 
> 标签：mysql, locking, transaction-isolation, read-uncommitted

我们在 MySQL 中有一个使用 InnoDB 的表，并且我们使用未提交读的事务隔离级别。为什么`@x`如图所示设置会获得锁？

```
mysql> set @x = (select userID from users limit 1);
Query OK, 0 rows affected (0.02 sec)

mysql> 
```

尝试从另一个提示更新此表会导致超时错误：

```
mysql> update users set userID = 1;
ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-01T18:09:39.843

对于它的价值，这种锁定不限于`READ-UNCOMMITTED`：

```
mysql1> show variables like '%isolation%';
+---------------+-----------------+
| Variable_name | Value           |
+---------------+-----------------+
| tx_isolation  | REPEATABLE-READ |
+---------------+-----------------+
mysql1> BEGIN;
mysql1> SET @x := (SELECT x FROM foo LIMIT 1);

mysql2> UPDATE foo SET x = x+1;
[gets a lock wait]

mysql3> SHOW ENGINE INNODB STATUS;
...
---TRANSACTION 228746, ACTIVE 22 sec
2 lock struct(s), heap size 360, 1 row lock(s)
MySQL thread id 58, OS thread handle 0x7fc262a1c700, query id 8163
  192.168.56.1 root cleaning up
TABLE LOCK table `test`.`foo` trx id 228746 lock mode IS
RECORD LOCKS space id 801 page no 3 n bits 80 index `PRIMARY` 
  of table `test`.`foo` trx id 228746 lock mode S
... 
```

正如您在记录的错误中所讨论的，[错误 #67452 Setting a variable from a select 在使用 read uncommitted 时获取锁](http://bugs.mysql.com/bug.php?id=67452)，这种行为可能是设计使然。它似乎`SELECT`与其结果用于修改数据的语句属于同一类别，如下所述：

[http://dev.mysql.com/doc/refman/5.6/en/innodb-locks-set.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-locks-set.html)

> 当在结构中使用 SELECT 时`REPLACE INTO t SELECT ... FROM s WHERE ...`，`UPDATE t ... WHERE col IN (SELECT ... FROM s ...)`InnoDB 在 table 的行上设置共享的 next-key 锁`s`。

使用 next-key locks 的原因是为了让`SELECT`结果更稳定。也就是说，我们不希望与 匹配的行在`SELECT`用于一个`UPDATE`或其他数据修改语句时发生变化。

即使 tx_isolation 是`REPEATABLE-READ`，这也很重要，因为 InnoDB 不支持`REPEATABLE-READ`语句`SELECT`作为任何类型的`UPDATE`.

* * *

回复您的评论：

无论文档如何，都会发生以下情况：

当您执行普通`SELECT`语句时，InnoDB 不会在任何事务隔离中锁定任何东西，除了`SERIALIZABLE`.

如果您执行`SELECT ... LOCK IN SHARE MODE`or `SELECT ... FOR UPDATE`，它当然会锁定。

但是，当您`SELECT`作为数据修改语句的一部分执行时，如`INSERT INTO...SELECT`或在 a 的子查询中或在 a 中`UPDATE`找到时`SET @variable := (SELECT...)`，它使用共享锁来确保数据在更新过程中不会更改。

文档可能不完整。更好地测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:46:17.313

~~Your first statement executes a SELECT on the table, therefore the transaction acquires a read lock on one row.~~

The second transaction tries to acquire a write lock on the same table (on all rows, since there is no `WHERE` clause), but cannot.

~~You need to issue a `COMMIT` (or `ROLLBACK`) command after the `SET @x = (...)`, so that it releases the read lock.~~

*The above is wrong. I keep this post just because the below comments might be of interest.*

# android - 使用 GPS 获取当前位置时不显示地图

> ID：13151838
> 
> 赞同：0
> 
> 时间：2012-10-31T05:37:20.427
> 
> 标签：android, map, gps, wifi

我面临一个奇怪的问题。当我使用 WIFI 时，我的应用程序在地图上显示当前位置，但是当我关闭 WIFI 以使用 GPS 进行检查时，它仍然显示当前位置但没有显示地图。它使地图消失并显示当前位置。有人可以告诉我为什么会这样吗？这是我的代码：

```
@Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);

        mapView.setBuiltInZoomControls(true);

        mapController = mapView.getController();
        me = new MyLocationOverlay(this, mapView);
        me.enableMyLocation();
        mapView.getOverlays().add(me);
        mapController.setZoom(10); 
        mapView.invalidate();

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    //  locationManager.requestLocationUpdates(
      //  LocationManager.NETWORK_PROVIDER, 0, 0, new GeoUpdateHandler());

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 0, 0, new GeoUpdateHandler());

    }

    @Override
    protected void onDestroy() {
        me.disableMyLocation();
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        super.onPause();
        me.disableMyLocation();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class GeoUpdateHandler implements LocationListener {

        // @Override
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);
            GeoPoint point = new GeoPoint(lat, lng);
            Toast.makeText(getApplicationContext(), "lat and lng"+lat+lng  , Toast.LENGTH_SHORT).show();
            mapController.setZoom(18);
            mapController.animateTo(point); // mapController.setCenter(point);
            mapView.invalidate();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:39:24.873

GPS 与互联网无关，但如果你想显示 MAP 以便你有互联网......你可以在没有互联网的情况下获得 GPS......所以不用担心

# css - 如何在 iPad 上保持背景图像大小

> ID：13151843
> 
> 赞同：1
> 
> 时间：2012-10-31T05:37:53.920
> 
> 标签：css, html, ipad

我的网站上有一个 2px X 4px 背景图像，它通过 X 和 Y 重复。

当我在 iPad 上查看它时，背景缩小或其他什么，它看起来只是粗糙。如何保持清晰并在 iPad 上实现 2px X 4px？多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:37:34.130

模糊很可能是由 iPad 视网膜显示屏试图放大您的小背景图像引起的。iPhone 4 与 iPhone 3 以及较新的 android 设备上也会发生同样的情况。在您的 CSS 中使用以下代码来解决此问题。您将需要一个 2 像素 x 4 像素的图像作为原始背景，以及双分辨率（4 像素 x 8 像素）的相同图像。该`@media`查询允许您调整图像的@2x 版本的大小，然后使用 css 将其“缩小”回预期大小`background-size: 4px;`。

```
body {
    background: url(test-image.png) repeat;
}

@media only screen and (-webkit-min-device-pixel-ratio: 2),
       only screen and (-moz-min-device-pixel-ratio: 2),
       only screen and (-o-min-device-pixel-ratio: 2/1),
       only screen and (min-device-pixel-ratio: 2) {
           body {background: url(test-image@2x.png) repeat; background-size: 4px;}
} 
```

我已经在我的 iPad 视网膜上测试了这个片段，它修复了模糊。我希望这对你有帮助，如果你有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T22:25:58.420

好的，如果我做了什么。

将视口设置为

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

这解决了图像问题。但我不能放大和缩小了。但这对这个项目来说不是必需的。：） 谢谢您的帮助

# android - 如何在 Android 中将图像添加到微调器

> ID：13151847
> 
> 赞同：16
> 
> 时间：2012-10-31T05:38:04.697
> 
> 标签：android, android-layout, android-spinner

我想向我尝试过的微调器添加图像：

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/myImage" /> 
```

但是使用此代码，微调器上的向下箭头符号变得不可见，请告诉我如何解决该问题！我想做与这张图片中的完全一样的事

![在此处输入图像描述](../Images/4ff36b7b651ce40c440d1b57632ea7ad.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T05:42:13.123

在**.** _ `/res/layout/`_ 设置每一行的布局。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/icon"/>
    <TextView
    android:id="@+id/weekofday"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

并在 Java 文件中将此代码添加为

```
 Spinner mySpinner = (Spinner)findViewById(R.id.spinner);
  ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    R.layout.row, R.id.weekofday, YourArrayHere);
  mySpinner.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-29T08:29:07.977

在我的例子中，我刚刚对微调器项目使用了标准布局，并且只覆盖了一点 ArrayAdapter。

```
private class PaymentTypeArrayAdapter extends ArrayAdapter<PaymentType> {

    public PaymentTypeArrayAdapter(Context context) {
        super(context, android.R.layout.simple_spinner_item);

        addAll(PaymentType.getPaymentTypes());
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView label = (TextView) super.getView(position, convertView, parent);

        PaymentType paymentType = getItem(position);
        label.setText(paymentType.getStringResourceId());
        label.setCompoundDrawablesWithIntrinsicBounds(0, 0, paymentType.
                getImageResourceId(), 0);

        return label;
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        TextView label = (TextView) super.getDropDownView(position, convertView, parent);

        PaymentType paymentType = getItem(position);
        label.setText(paymentType.getStringResourceId());
        label.setCompoundDrawablesWithIntrinsicBounds(0, 0, paymentType.
                getImageResourceId(), 0);

        return label;
    }
} 
```

然后为您的微调器设置适配器：

```
mPaymentTypeArrayAdapter = new PaymentTypeArrayAdapter(getContext());
    setAdapter(mPaymentTypeArrayAdapter); 
```

在这种方法中，关键是使用[setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds(int,%20int,%20int,%20int))作为标签

# tcl - 无线仿真问题

> ID：13151851
> 
> 赞同：0
> 
> 时间：2012-10-31T05:39:18.307
> 
> 标签：tcl, wireless, ns2

我无法运行此模拟：

```
set pairs [lindex $argv 0]

# ====================================
# Define options
# ====================================
set val(chan)           Channel/WirelessChannel    ;# channel type
set val(prop)           Propagation/TwoRayGround   ;# radio-propagation model
set val(netif)          Phy/WirelessPhy            ;# network interface type
set val(mac)            Mac/802_11                 ;# MAC type
set val(ifq)            Queue/DropTail/PriQueue    ;# interface queue type
set val(ll)             LL                         ;# link layer type
set val(ant)            Antenna/OmniAntenna        ;# antenna model
set val(ifqlen)         50                         ;# max packet in ifq
set val(nn)             $pairs                     ;# pair of mobilenodes
set val(rp)             DSDV                       ;# routing protocol

# ======================================
# Main Program
# ======================================

#
# Initialize Global Variables
#

set ns [new Simulator]
set tracefd [open wl.tr w]

$ns use-newtrace
$ns trace-all $tracefd 

# set up topography object
set topo [new Topography]
#1000x1000m terrain
$topo load_flatgrid 1000 1000

#
# Create General Operations Director
#

set god_ [ create-god $val(nn) ]

Mac/802_11 set RTSThreshold_ 3000

#
#  Create the specified number of mobilenodes [$val(nn)] and "attach" them
#  to the channel. 

# configure node

        $ns  node-config -adhocRouting $val(rp) \
             -llType $val(ll) \
             -macType $val(mac) \
             -ifqType $val(ifq) \
             -ifqLen $val(ifqlen) \
             -antType $val(ant) \
             -propType $val(prop) \
             -phyType $val(netif) \
             -channel [new $val(chan)] \
             -topoInstance $topo \
             -agentTrace ON \
             -routerTrace ON \
             -macTrace OFF \
             -movementTrace OFF

    for {set i 0} {$i < [expr {2*$val(nn)}] } {incr i} {
        set node_($i) [$ns node]    
        $node_($i) random-motion 0  ;# disable random motion
    }

#
# Provide initial (X,Y, Z=0) co-ordinates for mobilenodes
#
set rng [new RNG]
$rng seed 0

set unit 10.0;
set even_x 50.0;
set even_y 50.0;
set odd_x 50.0;
set odd_y 0.0;
for {set i 0} { $i < [expr {2*$val(nn)}] } {incr i} {
    set residue [expr {$i%2}];
#puts $residue
    set rand [expr [$rng uniform 0 1] + [ns-random 0] % 100];
    if { $residue ==0 } {

        $node_($i) set X_ [expr {$even_x + $rand}];
        $node_($i) set Y_ [expr {$even_y }]
        $node_($i) set Z_ 0.0;
    } else {
        $node_($i) set X_ [expr {$odd_x + $rand}];
        $node_($i) set Y_ [expr {$odd_y}];
        $node_($i) set Z_ 0.0;
    }
}

for {set i 0} { $i < $val(nn) } {incr i} {  
    set null_($i) [new Agent/Null]
    $ns attach-agent $node_([expr {($i*2)+1}]) $null_($i)
    set udp_($i) [new Agent/UDP]
    $ns attach-agent $node_([expr {2*$i}]) $udp_($i)
    set cbr_($i) [new Application/Traffic/CBR]
    $cbr_($i) set packetSize_ 1440  
    $udp_($i) set packetSize_ 1440
    $cbr_($i) set rate_ 500k
    $cbr_($i) attach-agent $udp_($i)
    $ns connect $udp_($i) $null_($i) 
}

for {set i 0} {$i < $val(nn)} {incr i} {
        $ns at 0.0 "$cbr_($i) start"
        $ns at 120.0 "$cbr_($i) stop"
}
$ns at 120.0 "$ns halt"
$ns run
$ns flush-trace
close $tracefd
puts "Starting Simulation..."
$ns run 
```

我得到这个错误任何人都可以帮助我！！！

```
MAC_802_11: accessing MAC cache_ array out of range (src 33, dst 32, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 33, dst 32, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 33, dst 32, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
MAC_802_11: accessing MAC cache_ array out of range (src 32, dst 33, size 20)!
[suppressing additional MAC cache_ warnings] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:54:25.190

以下行导致问题：

> 设置神_ [创建神$val(nn)]

god_ 告诉为 nn 个节点做准备。但几行之后：

> 对于 {set i 0} {$i < [expr {2*$val(nn)}] } {incr i} {

您创建 2*nn 个节点。要么 create-god [expr {2*$val(nn)}] 要么去掉它出现在代码中的 2* 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:25:18.580

根据[http://www.isi.edu/nsnam/archive/ns-users/webarch/2001/msg04753.html](http://www.isi.edu/nsnam/archive/ns-users/webarch/2001/msg04753.html)，试试

设置神_ [创建神 [expr $val(nn) + 20]]

或一些变化。这会创建更多的 GOD 对象（+20），严格来说你应该弄清楚你需要多少。我认为整数是定义的节点数。

# asp.net - 如何使用资源文件设置按钮文本

> ID：13151856
> 
> 赞同：9
> 
> 时间：2012-10-31T05:39:29.960
> 
> 标签：asp.net, localization

我在测试项目下创建了资源文件，但不在 App_GlobalResources 下。如何使用资源文件设置按钮文本。例如：

```
<asp:Button ID="btnTest" runat="server" Text="<%:TestProject.TestResource.Test%>" /> 
```

当我使用上面的代码时，我在按钮中得到空白文本。

**注意 - 我不想在代码后面设置文本。如何在 aspx 文件中实现这一点。**

谢谢您的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T12:25:22.180

假设您的 Resourcesfile 被称为：

```
/App_GlobalResources/TestResource.resx 
```

和资源字符串`Test`，这应该工作：

```
<asp:Button ID="btnTest" runat="server" Text="<%$ Resources: TestResource, Test %>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:28:33.370

为您的页面提供资源的最佳方法是在您的情况下使用自定义资源提供程序，因为您不想使用 App_GlobalResources，并将所有资源数据存储在代码隐藏中的 Viewdata 或 Session 数据中，然后检索它们并将其与您的按钮文本相关联你的 aspx 页面。

这是一篇关于它的msdn文章（这篇文章还解释了使用来自外部程序集的资源）：

[http://msdn.microsoft.com/en-us/library/aa905797.aspx](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:43:10.863

在你的资源文件中说你有这样的东西

`MyButtonText`------> `WhateverText`

然后你可以设置文本如下

```
<asp:Button ID="mybtn" runat="server" Text="<%$Resources:MyButtonText%>" 
```

**[参考样本文章](http://www.aspspider.com/resources/Resource1245.aspx)**

# wpf - 如何使用 prism WPF 在注入的用户控件中访问父用户控件的 datacontext.property

> ID：13151857
> 
> 赞同：0
> 
> 时间：2012-10-31T05:39:33.387
> 
> 标签：wpf, mvvm, prism, prism-4

嗨，我正在使用 WPF PRISM 架构。

我有两个用户控件： UCParent--UCParentVM UCChild -- UCChildVM 两者都有自己的视图模型。现在我已经将 UCChild 注入 UCParent。但我想访问父用户控件 UCParent 中的属性（“UCParent.DataContext.ProeprtyForChild”）。我怎样才能获得父母的 DataContext.Property？

我尝试了一些相对的源和元素名称绑定。我想我完全错了。那么有什么线索吗？

提前致谢

# php - 当另一个 ajax 调用更改 div y 的内容时，如何自动更改 div x 的内容（使用 ajax）？

> ID：13151859
> 
> 赞同：1
> 
> 时间：2012-10-31T05:39:43.170
> 
> 标签：php, javascript, ajax

我已经为此工作了几个小时并且遇到了很多困难 - 无法找到解决方案。

我有两个div。div3 必须在 div2 更改时相应更改其内容。div2 是通过 ajax 更改的，因此当发生这种情况时，它必须触发另一个 ajax 调用来更改 div3。

**以下是详细信息：**

1.  我有 main.html，其中包含几个不同的可点击按钮。onclick，这些按钮中的每一个都会触发一个ajax函数加载，在div2中输出一个php文件。
2.  此 php 脚本输出数据库查询的结果，根据单击 main.html 中的哪个按钮而有所不同。

3.  我有一个 div- div3，它应该显示当前 div 3 输出的一部分数据的内容。

4.  因此，从逻辑上讲，每当 div2 发生变化时，div3 的内容也必须相应地发生变化。

5.  最初我认为我可以将函数调用放在 php 文件末尾的第二个 ajax 函数，这样它总是会在 php 文件之后立即加载，但显然无法从 ajax 输出中读取 java。

**这是我尝试过的：**

1.  尝试在 php 文件末尾的 javascript 标记中放置函数调用`<script>`，但由于上述原因没有工作。
2.  我试图将该函数调用为`onload`php 文件的最后一个 div 的事件，但它不起作用。
3.  我尝试添加`onchange`到 div2 元素，以便每当通过 ajax 更改内容时，第二个 ajax 脚本就会运行，但它不起作用。
4.  我试图从第一个 ajax 函数的最后调用我的第二个 ajax 函数，但这阻止了我的第一个函数正常工作。
5.  奇怪的是，如果我将该函数附加到`onclick`php 文件中的一个事件，并在 php 加载后从 div2 中单击它，它就可以工作，并更新 div3 内容。

我需要做的就是找到一种方法，`onclick`在 php 页面加载或 div2 内容更改时自动将该函数调用转换为自动调用。

**附加说明：** 1\. 如果可以的话，我想远离`eval`它，因为我试图学习它，但开发适当的正则表达式的方法和所有其他细节对我来说似乎非常复杂。我可能需要几个小时来开发一种合适的方法，即使那样也可能不起作用....我更愿意坚持我忽略或可能没有正确实施的所有可能的简单选项。2\. 我会像鹰一样看这篇文章，所以如果您需要更多详细信息，请随时提出要求。我没有发布我的代码，因为它相当冗长且难以在更简短的示例中封装问题的性质。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:47:05.013

如果我理解正确，你可以尝试这样的事情：

```
$.ajax({
  type:'post',
  url:'url goes here',
  data:{<insert data being passed>},
  success:function(ret)
  {
      $('div y').html(ret); // populate div y

      $.ajax({
        type:'post',
        url:'second url goes here',
        data:{<insert data being passed>},
        success:function(ret2)
        {
         $('div x').html(ret2); // populate div x                
        }
      });    
  }
}); 
```

当然，这是我非常喜欢的一种 jquery 方法

# mysql - 在 MySQL 中获取最后插入的 ID 表单存储过程

> ID：13151861
> 
> 赞同：29
> 
> 时间：2012-10-31T05:39:53.713
> 
> 标签：mysql

**如何获取最后插入的 id？**

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_insertzonemsg`

   (IN User_Id INT(10),
    IN zid INT(10),
    IN update_titles VARCHAR(50),
    IN textarea1s TEXT,
    IN filupload1s TEXT,
    IN audio1s VARCHAR(100),
    OUT out_id INT(10))
        BEGIN
        INSERT INTO zone_message_master
        **(user_id,ZoneID,update_title,textarea1,filupload1,
        audio1,LastUpdate)**
        VALUE
        **(User_Id,zid,update_titles,textarea1s,
        filupload1s,audio1s,NOW());**

SELECT **id** as **out_id**
FROM **zone_message_master** LAST_INSERT_ID();
END$$ 
```

我需要以`out_id`表格形式返回最后插入的 ID`zone_message_master`吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-31T06:59:49.873

您需要使用 SET 语句。例如 -

桌子：

```
CREATE TABLE table1(
  id INT(11) PRIMARY KEY AUTO_INCREMENT,
  column1 VARCHAR(10),
  column2 VARCHAR(10)
); 
```

程序主体：

```
BEGIN
  INSERT INTO table1(column1, column2) VALUES ('value1', 'value2');
  SET out_param = LAST_INSERT_ID();
END 
```

请注意，该 ID 字段未在 INSERT 语句中指定。该值将自动插入；当然，这个 ID 字段必须有 AUTO_INCREMENT 选项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-11-26T12:20:17.177

您可以借助以下代码获取最后插入 ID：-

只需创建一个存储过程：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `add_enquiry`(
IN EnquiryNo varchar(40),
IN OpeningDate date,
IN ClosingDate date,
IN  CreatedOn date,
OUT LID int(11)
)

BEGIN

INSERT into `enquiries` SET `enquiry_no`=EnquiryNo ,`opening_date`=OpeningDate ,`closing_date`=ClosingDate,`created_on` =CreatedOn;

SET LID = LAST_INSERT_ID();
END 
```

调用 PHP：

```
$rs = $dbh->query('CALL add_enquiry("ENQ" ,"2016-08-19","2016-08-18", "2016-11-23",@LID)'); 

$rs2 = $dbh->query("SELECT @LID as id");
$row = $rs2->fetchObject();
echo $row->id; 
```

# prism - 使用 Prism 在 IIS 上出现 Silverlight 5 错误“依赖项解析失败”

> ID：13151862
> 
> 赞同：0
> 
> 时间：2012-10-31T05:39:54.933
> 
> 标签：prism, unity-container, silverlight-5.0

我正在编写一个基于 silverlight 5 和 MVVM 框架和 Prism 库的应用程序。我使用带有统一容器的棱镜。

当我在 VS 2010 中测试我的应用程序时，它可以正常工作，但是当我在 IIS 上加载它时，我经常收到以下错误消息：

![在此处输入图像描述](../Images/757a63cd32ff953f1dc49625e18fb1b6.png)

> 依赖项解析失败，type = ...

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:55:23.557

不知道为什么你有时只得到它，但可能是在你的 ViewModule 中你设置了一个分配给私有方法的委托 - IIRC PRISM 事件订阅委托必须是公共的。我认为这是 Silverlight 的限制，因为它不适用于 WPF。

# java - getCursor() 在我的 actionListener 中不起作用

> ID：13151864
> 
> 赞同：0
> 
> 时间：2012-10-31T05:40:04.123
> 
> 标签：java, swing, cursor, mouseevent, actionlistener

所以我只是把我作业的最后细节放进去，我注意到了 getCursor(); 当我运行我的程序时工作，但后来在程序中（在两个 actionListeners 中）它不会转向 fahrenheitTB。我想知道我是否可以得到一些输入。非常感谢。这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Part3Question1 extends JPanel
{
private JTextField fahrenheitTB;
private JTextField celsiusResultTB;
private JButton tryAgain;

public Part3Question1()
{
    Color color=new Color(255,0,0);  

    JLabel fahrenheitLabel = new JLabel ("Enter Fahrenheit temperature:");
    add (fahrenheitLabel);

    fahrenheitTB = new JTextField (5);
    fahrenheitTB.setHorizontalAlignment(fahrenheitTB.CENTER);
    //Works here!
    fahrenheitTB.getCursor();
    add (fahrenheitTB);

    JLabel celsiusLabel = new JLabel ("Temperature in Celsius: ");
    add (celsiusLabel);

    celsiusResultTB = new JTextField (5);
    celsiusResultTB.setForeground(color);
    celsiusResultTB.setEditable(false);
    celsiusResultTB.setHorizontalAlignment(celsiusResultTB.CENTER);
    add (celsiusResultTB);

    JButton convertButton = new JButton("Convert!");
    add (convertButton);

    tryAgain = new JButton("Try Again!");
    tryAgain.setVisible(false);
    add (tryAgain);

    convertButton.addActionListener (new myFirstActionListener());
    tryAgain.addActionListener (new mysecondActionListener());
}
private class myFirstActionListener implements ActionListener
{
  public void actionPerformed (ActionEvent event)
  {
          int fahrenheitTemp, celsiusTemp;
          String text = fahrenheitTB.getText();
          try
          {
              fahrenheitTemp = Integer.parseInt (text);
              celsiusTemp = (fahrenheitTemp-32) * 5/9;
              celsiusResultTB.setText (Integer.toString (celsiusTemp));
              tryAgain.setVisible(true);

          }
          catch (NumberFormatException e)
          {
              String myException="Invalid entry. Please enter Integers Only";
              JOptionPane.showMessageDialog(null,myException);
              fahrenheitTB.setText("");
              //doesn't work here!
              fahrenheitTB.getCursor();
          }
      }
}
private class mysecondActionListener implements ActionListener
{
  public void actionPerformed (ActionEvent event)
  {
          fahrenheitTB.setText("");
          //doesn't work here!
          fahrenheitTB.getCursor();
          celsiusResultTB.setText("");
      }
}

public static void main (String[] args)
{
    JFrame myFrame = new JFrame ();
    myFrame.setTitle("Fahrenheit to Celsius Converter");
    myFrame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    myFrame.setPreferredSize(new Dimension(300,150));
    myFrame.setLocation(400,300);
    Part3Question1 panel = new Part3Question1();
    myFrame.getContentPane().add(panel);
    myFrame.pack();
    myFrame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T05:50:17.750

一个很好的起点是阅读本教程：[“如何使用焦点子系统”](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)。对于您的情况，您可以尝试调用[`requestFocusInWindow()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)您的组件

这是您更新的代码：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Part3Question1 extends JPanel {
    private JTextField fahrenheitTB;
    private JTextField celsiusResultTB;
    private JButton tryAgain;

    public Part3Question1() {
        Color color = new Color(255, 0, 0);

        JLabel fahrenheitLabel = new JLabel("Enter Fahrenheit temperature:");
        add(fahrenheitLabel);

        fahrenheitTB = new JTextField(5);
        fahrenheitTB.setHorizontalAlignment(fahrenheitTB.CENTER);
        // updated
        fahrenheitTB.requestFocusInWindow();
        add(fahrenheitTB);

        JLabel celsiusLabel = new JLabel("Temperature in Celsius: ");
        add(celsiusLabel);

        celsiusResultTB = new JTextField(5);
        celsiusResultTB.setForeground(color);
        celsiusResultTB.setEditable(false);
        celsiusResultTB.setHorizontalAlignment(celsiusResultTB.CENTER);
        add(celsiusResultTB);

        JButton convertButton = new JButton("Convert!");
        add(convertButton);

        tryAgain = new JButton("Try Again!");
        tryAgain.setVisible(false);
        add(tryAgain);

        convertButton.addActionListener(new myFirstActionListener());
        tryAgain.addActionListener(new mysecondActionListener());
    }

    private class myFirstActionListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            int fahrenheitTemp, celsiusTemp;
            String text = fahrenheitTB.getText();
            try {
                fahrenheitTemp = Integer.parseInt(text);
                celsiusTemp = (fahrenheitTemp - 32) * 5 / 9;
                celsiusResultTB.setText(Integer.toString(celsiusTemp));
                tryAgain.setVisible(true);

            } catch (NumberFormatException e) {
                String myException = "Invalid entry. Please enter Integers Only";
                JOptionPane.showMessageDialog(null, myException);
                fahrenheitTB.setText("");
            }finally{
                // updated
                fahrenheitTB.requestFocusInWindow();
                    }
        }
    }

    private class mysecondActionListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {
            fahrenheitTB.setText("");
            // updated
            fahrenheitTB.requestFocusInWindow();
            celsiusResultTB.setText("");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame myFrame = new JFrame();
                myFrame.setTitle("Fahrenheit to Celsius Converter");
                myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                myFrame.setPreferredSize(new Dimension(300, 150));
                myFrame.setLocation(400, 300);
                Part3Question1 panel = new Part3Question1();
                myFrame.getContentPane().add(panel);
                myFrame.pack();
                myFrame.setVisible(true);

            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:56:12.580

问题出在您的`myFirstActionListener`，从未开始调用焦点请求。

异常块仅在有异常时才会执行，否则将被忽略。

代替...

```
} catch (NumberFormatException e) {
    String myException = "Invalid entry. Please enter Integers Only";
    JOptionPane.showMessageDialog(null, myException);
    fahrenheitTB.setText("");
    //doesn't work here!
    fahrenheitTB.requestFocusInWindow();
} 
```

你需要使用

```
} catch (NumberFormatException e) {
    String myException = "Invalid entry. Please enter Integers Only";
    JOptionPane.showMessageDialog(null, myException);
    fahrenheitTB.setText("");
    //doesn't work here!
} finally {
    fahrenheitTB.requestFocusInWindow();
} 
```

在我的测试中，“再试一次”按预期工作

就个人而言，您可能还想`selectAll`在请求焦点后打电话`fahrenheitTB.selectAll`。这是个人的事情，但现在用户不需要手动清除该字段来输入下一个值......;）

# emacs - 有没有办法在当前缓冲区中重新绑定“Ch”键？

> ID：13151865
> 
> 赞同：2
> 
> 时间：2012-10-31T05:40:05.463
> 
> 标签：emacs

我的 init.el 中有这个：

```
(global-set-key (kbd "C-h") 'backward-delete-char) 
```

Matlab 模式将我的全局设置重置回“帮助”，并且我无法在缓冲区中使用“本地设置键” - 当我按下 Ch 时它不会结束键序列，等待输入下一个字符( `C-h-`)。

有没有办法交互式地修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:45:31.477

一种策略是为您的 matlab 模式添加一个钩子：

```
(add-hook 'matlab-mode-hook
  (lambda ()
    (local-set-key (kbd "C-h") 'backward-delete-char))) 
```

至于以交互方式修复它，无论如何我都不知道以交互方式将 Ch 作为输入`local-set-key`...

# python - Tkinter 不会更新列表框选择

> ID：13151874
> 
> 赞同：0
> 
> 时间：2012-10-31T05:41:54.543
> 
> 标签：python, object, tkinter

这是一个正在给我麻烦的应用程序的一部分：当我单击“选择类别”时，选择“奶酪”时应该输出1，但它总是输出0。我知道我应该将其组织为一个对象，但我想将“类别”视为主要 Tkinter 对象的属性。我是 python 和 Tkinter 的新手，不知道如何访问属性。谢谢。

```
import Tkinter

root = Tkinter.Tk()
root.title('Test App')
mainFrame = Tkinter.Frame(root)

def mainWindow():
    categories = [['Bread','Rye','Wheat'],['Cheese','Feta']]

    categoryListbox = Tkinter.Listbox()
    for category in categories:
            categoryListbox.insert('end', category[0])
    categoryListbox.pack()

    activeIndex = categoryListbox.index('active')

    selectCategoryButton = Tkinter.Button(text="Select Category", command= lambda: selectCategory(activeIndex))
    selectCategoryButton.pack()

def selectCategory(activeIndex):
    print activeIndex

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:54:39.450

您只检索一次选定的索引：

```
activeIndex = categoryListbox.index('active') 
```

所有未来的选择都参考这个指数。您可以更改您的 lambda，以便它检索当前选定的索引而不是引用旧索引：

```
selectCategoryButton = Tkinter.Button(text="Select Category", command= lambda: selectCategory(categoryListbox.index('active'))) 
```

# android - Activity 不会在 Android 应用程序项目中启动

> ID：13151875
> 
> 赞同：0
> 
> 时间：2012-10-31T05:41:58.947
> 
> 标签：android, eclipse, android-activity, avd

我正在使用 Eclipse，并且正在构建一个 Android 应用程序。我创建了一个新的 Android 应用程序项目，在其中创建了一个空白活动（只需选中复选框）。该应用程序是一个基本的 Hello World，我没有对默认创建的应用程序进行任何更改。我通过单击 run as -> Android Application 来启动应用程序。Android 虚拟设备启动，但活动没有启动。任何想法可能是错误的。

这是控制台输出：

```
[2012-10-31 06:39:28 - newand] ------------------------------
[2012-10-31 06:39:28 - newand] Android Launch!
[2012-10-31 06:39:28 - newand] adb is running normally.
[2012-10-31 06:39:28 - newand] Performing com.example.newand.MainActivity activity launch
[2012-10-31 06:39:28 - newand] Automatic Target Mode: launching new emulator with compatible AVD 'androidEMP'
[2012-10-31 06:39:28 - newand] Launching a new emulator with Virtual Device 'androidEMP' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:56:12.647

有时 AVD 已启动但无法加载应用程序。尝试先启动 avd，然后在其中运行应用程序。

如果仍然失败，您可以尝试从命令行重新启动 adb 服务器（您需要为此安装 adb 工具）：

```
 adb kill-server
 adb start-server 
```

有时，即使一个处于活动状态，另一个 AVD 也会打开。在这种情况下，关闭旧的 avd 并打开新的。然后尝试杀死并重新启动 adb 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T06:08:36.727

在您的 AndroidManifest.xml 文件中添加条目为

```
 <activity android:name=".yourActivityName">
    <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

内部应用程序标签。

这应该可以解决您的问题。

# ruby-on-rails-3 - 未创建回形针样式

> ID：13151876
> 
> 赞同：0
> 
> 时间：2012-10-31T05:42:11.657
> 
> 标签：ruby-on-rails-3, paperclip

Paperclip 在我的 rails 3 应用程序中工作正常，但它只创建一个文件。原始文件为 1600x1280，仅创建一个大小为 200 的文件。

```
 :styles => { :preview => "500x500>", :full => "100%", :pdf_thumbnail => ["200x200>", :jpg] }, 
```

正在创建的样式是 pdf_thumbnail。而且，由于某种原因，回形针并没有创造出原创作品。

```
 paperclip (3.3.0)
 rails 3.2.8
 heroku, s3 
```

3.3.0 有什么变化吗？任何人都知道为什么回形针不创建文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:27:20.580

我对管理员感到尴尬，我在六个项目中有回形针，我能够忽略这一点。我在道路上没有风格。因此，每种样式都在创建，但会覆盖先前创建的图像（因为它们都将具有相同的名称）。结果，仅创建了具有最后一种样式的图像。将 :style 添加到我的路径修复了所有允许创建每个图像的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:57:37.710

尝试在您的 gemfile 中添加 rmagick gem

# meteor - 发布 Meteor.users 的某些信息和 Meteor.user 的更多信息

> ID：13151879
> 
> 赞同：34
> 
> 时间：2012-10-31T05:42:21.987
> 
> 标签：meteor

我想对所有用户的特定字段集进行客户端访问，而我希望仅对当前用户访问更多字段。我该如何编写发布代码来完成此任务？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-31T05:50:53.207

Right from [Meteor documentation](http://docs.meteor.com/#meteor_user):

```
Meteor.publish("userData", function () {
    return Meteor.users.find({_id: this.userId},
        {fields: {'other': 1, 'things': 1}});
}); 
```

And also:

```
Meteor.publish("allUserData", function () {
    return Meteor.users.find({}, {fields: {'nested.things': 1}});
}); 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-04T04:02:13.133

如上所述，

```
Meteor.publish("userData", function () {
    return Meteor.users.find({_id: this.userId},
        {fields: {'other': 1, 'things': 1}});
}); 
```

和

```
Meteor.publish("allUserData", function () {
  return Meteor.users.find({}, {fields: {'nested.things': 1}});
}); 
```

发布函数将从用户集合中推送数据。

订阅

```
Tracker.autorun(function () {
    Meteor.subscribe("userData");
    Meteor.subscribe("allUserData");
}); 
```

并且附加数据将自动进入用户集合并在`Meteor.user()`对象中可用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-25T02:25:16.683

我的故事：我按照文档所述进行，但遇到了奇怪的行为。我有发布功能，在这里我为当前用户（比如说`userData`）发布了整个个人资料和电子邮件对象，并为其他用户发布了一些子集（`allUserData`）。

当我有 -

```
Meteor.subscribe("allUserData");
Meteor.subscribe("userData"); 
```

在用户登录后，在客户端，我只收到了`allUserData`数据。这意味着即使对于我的登录用户（该用户看不到他自己的电子邮件地址）。当**我刷新浏览器**时，错误已得到修复，`allUserData`除了一个登录的用户之外，我得到了正确的所有用户，它有他的正确`userData`（带有提到的电子邮件地址）。

有趣的是，如果我更改了订阅的顺序，错误就得到了修复。：

```
Meteor.subscribe("userData");    
Meteor.subscribe("allUserData"); 
```

投入`Meteor.autosubscribe(function () { })`并没有改变任何东西。最后，我尝试将该订阅放入`Deps.autorun(function() { })`并显式添加反应性，并且序列的问题得到了解决..：

```
Deps.autorun(function() {
  Meteor.subscribe("allUserData", Meteor.userId());
  Meteor.subscribe("userData", Meteor.userId());
  // or
  // Meteor.subscribe("userData", Meteor.userId());
  // Meteor.subscribe("allUserData", Meteor.userId());
}); 
```

在发布功能中，我只是`this.userId`用`userId`from 参数替换。

我遇到的下一个错误是，我在配置文件用户的对象中有秘密的 systemData 对象，并且只能看到管理员，而不是常规登录用户。但是，尽管使用`'profile.systemData': 0`该秘密对象的正确设置发布功能可以看到查看他的个人资料对象的所有登录用户。可能是因为我的发布功能以某种方式干扰了 Meteor Account 包中的发布功能：

```
// Publish the current user's record to the client.
Meteor.publish(null, function() {
 if (this.userId) {
   return Meteor.users.find(
     {_id: this.userId},
     {fields: {profile: 1, username: 1, emails: 1}});
 } else {
   return null;
 }
}, /*suppress autopublish warning*/{is_auto: true}); 
```

无论如何，我在方法的帮助下解决了它， `Account.onCreateUser()`并将 systemData 添加到配置文件对象旁边，而不是配置文件中。我的其他问题开始了 :) 请参阅[Meteor.loginWithPassword 回调未在用户帐户文档中提供自定义对象](https://stackoverflow.com/questions/21322509/meteor-loginwithpassword-callback-doesnt-provide-custom-object-in-user-accounts)

PS：如果我一开始就知道，我已经将 systemData 对象放入特殊集合中。

# excel-2007 - 每次保存时添加新数据覆盖 Excel 文件

> ID：13151882
> 
> 赞同：0
> 
> 时间：2012-10-31T05:42:38.740
> 
> 标签：excel-2007

我有一个像下面这样的代码，它为我的记录生成一个 Excel 文件，我想每次运行我的程序时都会检查使用的最后一行，如果最后一行不为空，那么它将在新的数据中插入新数据排。但是，我的代码没有得到想要的结果。任何人都可以帮助我吗？谢谢

```
Microsoft.Office.Interop.Excel.Application xla = new Microsoft.Office.Interop.Excel.Application();
        string file = "TestingAccounts.xls";
        Workbook wb = new Workbook();
        Worksheet ws = new Worksheet();

        object misValue = System.Reflection.Missing.Value;
        try
        {
            wb = xla.Workbooks.Open(file, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            ws = (Worksheet)wb.Worksheets.get_Item(1);
            xla.Workbooks.Open(file);

            Range last = ws.Cells.SpecialCells(XlCellType.xlCellTypeLastCell, Type.Missing);
            Range range = ws.get_Range("A1", last);

            int lastUsedRow = last.Row + 1;
            ws.Cells[lastUsedRow, 1] = "abc";

            xla.DisplayAlerts = false;
            wb.SaveAs(file, XlFileFormat.xlAddIn, Type.Missing, Type.Missing, Type.Missing,
            Type.Missing, XlSaveAsAccessMode.xlNoChange, Type.Missing,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing);

            wb.Close(true, misValue, misValue);

            xla.Quit();

            releaseObject(ws);
            releaseObject(wb);
            releaseObject(xla);
        }
        catch
        {
            MessageBox.Show("The excel file is not exist. Click ok to create new one");
            wb = xla.Workbooks.Add(XlSheetType.xlWorksheet);
            ws = (Worksheet)xla.ActiveSheet;

            xla.DisplayAlerts = false;
            wb.SaveAs(file, XlFileFormat.xlAddIn, Type.Missing, Type.Missing, Type.Missing,
            Type.Missing, XlSaveAsAccessMode.xlNoChange, Type.Missing,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing);

            wb.Close(true, misValue, misValue);

            xla.Quit();

            releaseObject(ws);
            releaseObject(wb);
            releaseObject(xla);

        } 
```

如果发现最后使用的行不为空，假设我上面的代码想要在下一行添加“abc”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:28:06.837

这是 VBA 代码，但您应该了解解决方案的要点。循环遍历单元格，直到找到空白单元格并将数据插入其中。解决方案的关键是 a) 将 Range 对象设置为工作表中的某个起始单元格（在本例中为“A1”）和 b) 通过使用 Range.Offset(1,0) 偏移每一行来循环遍历单元格) 来“移动”一行。

```
' select start range
Set rangePaste = Range("A1")

' loop until you find a blank cell in column A
Do Until rangePaste.Value = ""
  Set rangePaste = rangePaste.Offset(1, 0) ' move down row
Loop

'set cell value
rangePaste.Value = "abc" 
```

# objective-c - NSManagedObject 总是在同一个 ManagedObjectContext 上创建

> ID：13151888
> 
> 赞同：0
> 
> 时间：2012-10-31T05:43:18.057
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我已经处理这个问题一段时间了（[https://stackoverflow.com/questions/12982012/unit-testing-core-data-to-many-relationship](https://stackoverflow.com/questions/12982012/unit-testing-core-data-to-many-relationship)），但我终于能够辨别出什么真正的问题是。无论我尝试做什么，我都有一个始终在主 managedObjectContext 上创建的实体。我的所有其他实体都工作正常，但这个实体似乎特别有问题。自从我用新名称提出上一个问题后，我已经重建了整个数据模型，但问题仍然存在。我尝试搜索并看到一个问题（[为什么我的一些核心数据对象已将 managedObjectContext 设置为 nil？](https://stackoverflow.com/questions/3639228/why-do-some-of-my-core-data-objects-have-managedobjectcontext-set-to-nil)）引用了一个类似的问题，他被设置为 nil。

我正在尝试做的是为导入数据以在后台运行创建一个新的上下文。

以下是解释一切的日志

首先是[self managedObjectContext]。我正在使用它从 AppDelegate 中调用 MOC，它的代码直接来自基于 Apple 的 Core Data 应用程序。

```
- (NSManagedObjectContext *)managedObjectContext
{
    return [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
} 
```

在 LoginVC 中使用 main managedObjectContext

```
Deal *testdeal = [NSEntityDescription insertNewObjectForEntityForName:@"Deal" inManagedObjectContext:[self managedObjectContext]];
TriageAnswer *testtriage = [NSEntityDescription insertNewObjectForEntityForName:@"TriageAnswer" inManagedObjectContext:[self managedObjectContext]];
NSLog(@"moc is %@", [self managedObjectContext]);
NSLog(@"testdeal.moc = %@", testdeal.managedObjectContext);
NSLog(@"testtriage.moc = %@", testtriage.managedObjectContext);   

2012-10-30 17:51:19.134 myApp[6507:11603] moc is <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:51:19.134 myApp[6507:11603] testdeal.moc = <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:51:19.134 myApp[6507:11603] testtriage.moc = <NSManagedObjectContext: 0x84ace20> 
```

在我的更新类中使用多个 managedObjectContexts。importContext2 只是我为测试目的而提出的一个。

```
NSManagedObjectContext *importContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[importContext setParentContext:[self managedObjectContext]];
[importContext setUndoManager:nil];

NSManagedObjectContext *importContext2 = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSConfinementConcurrencyType];
[importContext2 setParentContext:importContext];

Deal *importDeal = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([Deal class]) inManagedObjectContext:importContext];
Deal *importDeal2 = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([Deal class]) inManagedObjectContext:importContext2];
Deal *importDeal3 = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([Deal class]) inManagedObjectContext:[self managedObjectContext]];
TriageAnswer *importTriage = [NSEntityDescription insertNewObjectForEntityForName:NSStringFromClass([TriageAnswer class]) inManagedObjectContext:importContext];
NSLog(@"importcontext is %@", importContext);
NSLog(@"importcontext 2 is %@", importContext2);
NSLog(@"self managedobjectcontext is %@", [self managedObjectContext]);
NSLog(@"deal is %@", importDeal.managedObjectContext);
NSLog(@"deal2 is %@", importDeal2.managedObjectContext);
NSLog(@"deal3 is %@", importDeal3.managedObjectContext);
NSLog(@"triage moc is %@", importTriage.managedObjectContext);

2012-10-30 17:54:16.571 myApp[6507:11603] importcontext is <NSManagedObjectContext: 0x84b3ce0>
2012-10-30 17:54:20.403 myApp[6507:11603] importcontext 2 is <NSManagedObjectContext: 0x14163890>
2012-10-30 17:54:22.876 myApp[6507:11603] self managedobjectcontext is <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:54:24.296 myApp[6507:11603] deal is <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:54:25.017 myApp[6507:11603] deal2 is <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:54:25.646 myApp[6507:11603] deal3 is <NSManagedObjectContext: 0x84ace20>
2012-10-30 17:56:34.221 myApp[6507:11603] triage moc is <NSManagedObjectContext: 0x84b3ce0> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:05:29.757

我会为自己回答这个问题，以防万一有人犯了我犯的错误。但是我所有的 NSManagedObject 子类都有为它们创建的类别，在某些时候我天真地把

```
- (NSManagedObjectContext *)managedObjectContext
{
    return [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
} 
```

在我的类别中。我正在制作另一种方法来执行自定义获取请求，并认为我需要它来访问 MOC，我显然不需要。实现它是完全可以接受的，因此它被埋在类别中而被遗忘了。因此，每当我的 Deal 对象试图访问它的 MOC 时，该调用被覆盖并且主 MOC 被返回。

# cocoa-touch - 使用 CAGradientLayer 自定义导航栏颜色

> ID：13151891
> 
> 赞同：0
> 
> 时间：2012-10-31T05:43:44.123
> 
> 标签：cocoa-touch, uikit

我试图使用以下代码为导航栏设置渐变，但应用程序在最后一行崩溃并出现 EXC_BAD_ACCESS 错误。

```
UIColor* topColor = [UIColor colorWithRed:245.0/255 green:245.0/255 blue:245.0/255 alpha:1.0];
UIColor* bottomColor = [UIColor colorWithRed:200.0/255 green:200.0/255 blue:200.0/255 alpha:1.0];
CAGradientLayer* navBarGradientLayer = [CAGradientLayer layer];
[navBarGradientLayer setFrame:CGRectMake(0, 0, self.navigationController.navigationBar.bounds.size.width, self.navigationController.navigationBar.bounds.size.height)];
NSArray* gradientColors = @[topColor, bottomColor];
navBarGradientLayer.colors = gradientColors;
[self.navigationController.navigationBar.layer insertSublayer:navBarGradientLayer atIndex:0]; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:20:39.023

试试这个，它对我有用

```
UINavigationBar *navigationBar= [[self.navigationController.navigationBar subviews]objectAtIndex:0];

UIView* gradientViewnavigationBar = [[UIView alloc] initWithFrame:CGRectMake(0,0,navigationBar.frame.size.width,navigationBar.frame.size.height)];

CAGradientLayer * gradientLayernavigationBar = [[[CAGradientLayer alloc] init] autorelease];

gradientLayernavigationBar.frame = gradientViewnavigationBar.bounds;
gradientLayernavigationBar.colors = [NSArray arrayWithObjects:(id)[startColornavigationBar CGColor], (id)[endColornavigationBar CGColor], nil];

gradientLayernavigationBar.opacity=1.0; 
```

//设置渐变角度

```
 [CustomNavBar setAngleForGradients:gradientLayernavigationBar angle:[[nav_header_Element attributeForName:@"angle"]stringValue]];

[gradientViewnavigationBar.layer insertSublayer:gradientLayernavigationBar atIndex:0];
[navigationBar insertSubview:gradientViewnavigationBar atIndex:0];
[gradientViewnavigationBar release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T07:13:46.833

```
// get navigation bar objc
UINavigationBar *navigationBar= [[self.navigationController.navigationBar subviews]objectAtIndex:0];

//create uiview 
        UIView* gradientViewnavigationBar = [[UIView alloc] initWithFrame:CGRectMake(0,0,navigationBar.frame.size.width,navigationBar.frame.size.height)];

// create layer of gradient color 
CAGradientLayer * gradientLayernavigationBar = [[CAGradientLayer alloc] init];

gradientLayernavigationBar.frame = gradientViewnavigationBar.bounds;
gradientLayernavigationBar.colors = [NSArray arrayWithObjects:(id)[[UIColor redColor] CGColor], (id)[[UIColor  blackColor] CGColor], nil];

gradientLayernavigationBar.opacity=1.0;

// add layer on view 
// then add view on navigation bar   
[gradientViewnavigationBar.layer insertSublayer:gradientLayernavigationBar atIndex:0];
[navigationBar insertSubview:gradientViewnavigationBar atIndex:0]; 
```

i hope it will help you!

# c# - 将 HTML 表格内容更改为图像格式

> ID：13151892
> 
> 赞同：1
> 
> 时间：2012-10-31T05:43:45.710
> 
> 标签：c#, asp.net

我想对我的任务有所了解。我想将我的 HTML 表格内容代码更改为图像格式。我确实有任何想法。任何人都可以给我一个想法..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:09:36.587

资料来源：[达林·季米特洛夫的回答](https://stackoverflow.com/a/769363/770710)

> 您首先需要一个能够处理 HTML 以及可选的 javascript 和 css 的渲染引擎（如果您想支持它们）。可以使用[WebBrowser](http://www.dreamincode.net/code/snippet2539.htm)控件，但可能有更好的方法。

还有一些其他选项，请参阅以下链接：
[Html table (text) to image using C#](https://stackoverflow.com/questions/769310/html-table-text-to-image-using-c-sharp)
[How to convert a block of html to an image (eg jpg) in asp.net](https://stackoverflow.com/questions/3165318/how-to-convert-block-of-html-to-an-image-e-g-jpg-in-asp-net)
[Convert a HTML Control (Div or Table) to an image使用 C#](https://stackoverflow.com/questions/1972739/convert-a-html-control-div-or-table-to-an-image-using-c-sharp)
[渲染 HTML（转换为位图）](https://stackoverflow.com/questions/2632280/render-html-convert-to-bitmap)

代码片段：

```
public Bitmap GenerateScreenshot(string url)
{
    // This method gets a screenshot of the webpage
    // rendered at its full size (height and width)
    return GenerateScreenshot(url, -1, -1);
}

public Bitmap GenerateScreenshot(string url, int width, int height)
{
    // Load the webpage into a WebBrowser control
    WebBrowser wb = new WebBrowser();
    wb.ScrollBarsEnabled = false;
    wb.ScriptErrorsSuppressed = true;
    wb.Navigate(url);
    while (wb.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }

    // Set the size of the WebBrowser control
    wb.Width = width;
    wb.Height = height;

    if (width == -1)
    {
        // Take Screenshot of the web pages full width
        wb.Width = wb.Document.Body.ScrollRectangle.Width;
    }

    if (height == -1)
    {
        // Take Screenshot of the web pages full height
        wb.Height = wb.Document.Body.ScrollRectangle.Height;
    }

    // Get a Bitmap representation of the webpage as it's rendered in the WebBrowser control
    Bitmap bitmap = new Bitmap(wb.Width, wb.Height);
    wb.DrawToBitmap(bitmap, new Rectangle(0, 0, wb.Width, wb.Height));
    wb.Dispose();

    return bitmap;
} 
```

# android - 目标客户 ContactManger 样本？

> ID：13151895
> 
> 赞同：0
> 
> 时间：2012-10-31T05:44:10.217
> 
> 标签：android, android-contacts

我已经导入 ContactManager Sample 并成功运行。在添加新联系人的添加表单中，我找到了一个名为“目标客户”的字段。

你能给我解释一下吗：

*   什么是目标账户？
*   这有什么用途？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:09:32.607

那`Target Account`是您在设备中拥有的帐户。它们代表设备的每个用户。如您所知，每台设备都至少有一个 gmail 帐户可以启动。当您在真实设备中运行此示例时，目标帐户微调器将显示您拥有的所有帐户。 ![在此处输入图像描述](../Images/823b342e5092ce0856e32e2563e7e229.png)
如果您想在此[问题之后在模拟器中创建帐户](https://stackoverflow.com/q/3260868/1050058)

# c - 在 C 中操作字符串

> ID：13151896
> 
> 赞同：0
> 
> 时间：2012-10-31T05:44:28.390
> 
> 标签：c, strlen, strcpy, strcat

我正在尝试编写一种方法来删除字符串的第一个字母并将其附加到字符串的末尾，然后附加“ay”。我使用的是链表结构，它可以工作，但不是 100%，我不知道为什么。它有时会做不应该做的事情，但它似乎会随机添加先前单词的部分内容。例如，输入“到底怎么回事”应该是“hatway hetay ellhay siay rongway”的输出，但它给了我“hatway hetwayay ellhayayay silhayayayay rongway”

这是似乎有错误的部分：

```
typedef struct  wordNodeType
{
    char word[MAX_CHARS];
    struct wordNodeType *next;// pointer to next node
}WordNode;

struct wordNodeType *tempP;

WordNode* translateWord (WordNode* nextWord)
{
    strcpy(e,nextWord->word);
    strcpy(p, &e[strlen(e)-(strlen(e)-1)]);// remove first letter
    // remove newline char if there
    if(p[strlen(p)-1] == '\n')
        p[strlen(p)-1] = '\0';
    p[strlen(p)] = e[0];//move first char of e to last char of p ***the problem seems to happen here
    strcat(p,"ay");// append "tay" to end
    strcpy(tempP->word,p);
    return tempP;
} 
```

我为节点分配了内存，并且节点确实在“word”中有一个值。我的其余代码工作正常，除了这个让我发疯的小错误！有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:58:25.383

需要进行一些更改才能解决此问题。这是更改后的代码：

```
WordNode* translateWord (WordNode* nextWord)
{
    strcpy(e,nextWord->word);
    strcpy(p, &e[strlen(e)-(strlen(e)-1)]);// remove first letter
    // remove newline char if there
    if(p[strlen(p)-1] == '\n')
        p[strlen(p)-1] = '\0';
int sizeofP = strlen(p);   /////Change Here
    p[strlen(p)] = e[0];//move first char of e to last char of p ***the problem seems to happen here
p[sizeofP + 1] = '\0';  /////Change Here
    strcat(p,"ay");// append "tay" to end
    strcpy(tempP->word,p);
    return tempP;
} 
```

问题是，当您在 末尾写入第一个字符时`p`，您覆盖了该`'\0'`字符，因此无法到达字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:52:59.950

在我看来， p 和 e 并没有被完全清除，而 strcpy 只是根据需要将尽可能多的字符覆盖到 p 中。它在手册页中使用的算法，但本质上，如果未清除字符数组 p 并写入较短的字符串，则在迄今为止写入的最长内容的长度之后，才会存在空终止。（这也是 strlen 误导你的原因！）

如果您不喜欢每次都清除 p（您应该这样做），您可以通过附加 a 来欺骗机器，

字符新字符 = 0

每次为 p 赋值之后

# java - 通过java中的mpj库并行BFS

> ID：13151906
> 
> 赞同：3
> 
> 时间：2012-10-31T05:45:31.373
> 
> 标签：java, mpi, mpj-express

我目前正在 MPJ Express 的帮助下使用 Java 进行并行广度优先搜索。

我想知道一个处理器是否从任何处理器中找到元素或节点（标签），我怎样才能让其他处理器停止进一步的处理。

我对那里需要什么类型的通信（阻塞或非阻塞）感到困惑。我已经使用命令`MPI.COMM_WORLD.Send`遍历完整的图，但是我想知道当找到所需的数据时，所有处理都会结束吗？

在 MPJ 中执行此功能需要哪些方法？

执行此操作的程序是什么？

# python - 寻找特定的 python gui 模块来执行以下任务

> ID：13151907
> 
> 赞同：1
> 
> 时间：2012-10-31T05:45:36.997
> 
> 标签：python, graph, matplotlib, tkinter, wxwidgets

我正在寻找一个最适合以下工作的 GUI python 模块：我正在尝试绘制一个包含许多列（可能数百列）的图形，每列代表一个人。用户应该能够拖动列并将它们放到不同的列上以切换两者。此外，还会在列上绘制额外的点，通过将鼠标悬停在这些点上，用户应该会看到与这些点对应的值。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:06:07.590

[Chaco](http://code.enthought.com/projects/chaco/)是一个绘图工具箱，它明确具有交互式数据可视化功能。虽然我发现它比 matplotlib 更难运行，但它的交互功能可能更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:58:54.883

你可以用 Tkinter 做你想做的事，尽管没有特定的小部件可以满足你的要求。有一个通用的画布小部件，允许您绘制对象（矩形、圆形、图像、按钮等），并且添加拖动这些项目的能力非常容易。

# pattern-matching - 检索文本值并将其用作 xquery 函数中的参数

> ID：13151908
> 
> 赞同：0
> 
> 时间：2012-10-31T05:45:42.597
> 
> 标签：pattern-matching, xquery

我希望对 XML 文档中的特定元素的值使用 XQuery 的匹配函数，该文档将 2 个字符串作为参数。我需要将元素的文本值作为参数传递给函数。但是当我使用 $title/text() 它不接受它作为字符串并给出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:17:39.520

我猜（由于缺乏更多信息......）你打算做类似的事情：

```
let $doc := <doc>
  <title>Abc</title>
  <title>Cde</title>
  </doc>
for $title in $doc/title
return matches($title, "Cde") 
```

我猜相反，你做了类似的事情：

```
let $doc := <doc>
  <title>Abc</title>
  <title>Cde</title>
  </doc>
        (: oh no! :)
let $title := $doc/title
return matches($title, "Cde") 
```

这导致一个`$title`包含*两个* `text()`项目序列的变量；但是因为 [`fn:contains()`](http://www.xqueryfunctions.com/xq/fn_contains.html)只接受`xs:string?`而不是`xs:string+`因为它的论点，它会失败，抱怨（例如在BaseX中）：

```
[XPTY0004] Single item expected, (<title>...</title>, <title>...</title>) found. 
```

# javascript - Google Apps 脚本 - JDBC 连接失败

> ID：13151909
> 
> 赞同：1
> 
> 时间：2012-10-31T05:45:43.810
> 
> 标签：javascript, mysql, jdbc, google-apps-script, connection-string

[我正在尝试使用 Google Apps 开发人员参考 ( https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc) )中的示例代码从 Google Apps 电子表格打开连接但没有成功

```
function insert() {
    var conn = Jdbc.getConnection("jdbc:mysql://localhost:3306/test", "a", "a"); 
```

错误：无法建立数据库连接。检查连接字符串、用户名和密码。（第 56 行）

我尝试用我的特定 IP 地址替换“localhost”。

我能够使用 Access、ODBC 和上述凭据成功连接到我的数据库，所以我知道这是 JDBC / Google-apps-script 问题。

CLASSPATH 指向正​​确的 jar 文件，如下所示：

```
C:\>echo %CLASSPATH%
.;C:\Program Files\Java\mysql-connector-java-5.1.22\mysql-connector-java-5.1.22-
bin.jar 
```

我不确定是否必须在我的脚本或 google-doc-spreadsheet 中或在 Windows 中执行其他任何操作才能正确设置。

我从我读过的一件事中了解到，没有必要像这样安装 JDBC 驱动程序，但我希望能确认一下。

我花了很长时间在互联网上搜索解决方案，但无济于事。

我无法诊断问题出在哪里，并且非常感谢任何人在这方面可能有的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:24:48.677

问题是它`localhost`被用作主机。Google Apps 脚本在 Google 服务器而不是本地计算机上执行。这意味着脚本无法访问`localhost`并且错误是合乎逻辑的。

要消除该错误，必须让 SQL Server 可以在本地网络（Internet 上的公共网络）之外访问。它可以是在防火墙后面转发的 MySQL 端口或第三部分公共 SQL 服务。

[在互联网上搜索](https://www.google.com/search?q=MySQL%20public)，我发现了一些公共 MySQL 服务器，但我不知道它们是否在线（[链接 #1](http://cgd.jax.org/cgdsnpdb/utils/public_mysql.php)，[链接 #2](http://cgd.jax.org/cgdsnpdb/utils/public_mysql.php)，[链接 #3](http://www.ensembl.org/info/data/mysql.html)）

**更新 00**：JDBC 服务有一个[错误](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1856)，无法将主机名解析为 IP。我尝试使用以下代码进行测试。它与数据库建立连接。

```
function test() {
  var connection = Jdbc.getConnection("jdbc:mysql://193.62.203.76:3306/", "anonymous", "");
  debugger;
} 
```

# cluster-computing - 协调集群中服务器之间单个周期性任务的执行

> ID：13151912
> 
> 赞同：6
> 
> 时间：2012-10-31T05:46:17.820
> 
> 标签：cluster-computing, distribution, high-availability, task-queue

（在清楚地描述情况的同时，我会尽量保持这个问题的简短。如果有任何遗漏，请发表评论。）

**情况**

*   我在同一个数据中心运行一个包含三台服务器的集群
*   为了简化部署，每台服务器运行完全相同的应用程序代码

**目标**

*   由单个服务器每分钟运行一个任务（称为*Task X ）。*

**在这些条件下**

*   集群保持分布式和高可用性
*   每台服务器都在运行相同的应用程序代码。换句话说，不存在“将代码 A 部署到*主服务器*并将代码 B 部署到所有*辅助服务器*”这样的事情。

我不想区分服务器类型的原因是为了保持高可用性（避免所谓的主服务器宕机时出现问题）、冗余（分配负载），以及避免创建需要部署不同服务器的复杂部署过程应用到不同类型的服务器。

为什么这么难？如果我要添加每 5 分钟执行一次此任务的代码，那么每个服务器都会执行它，因为每个服务器运行相同的应用程序代码。因此，他们需要能够协调在每个滴答期间哪个服务器将运行相同。

我能够使用分布式消息传递机制，例如`Apache Kafka`或`Redis`。如果使用这样的机制来协调这样的任务，那么这样的“算法”将如何工作？

我向其他人提出了这个问题，他的回答是使用任务队列。然而，这似乎并没有解决问题，因为问题仍然存在：哪个服务器将任务添加到任务队列？如果所有服务器都将任务添加到队列中，则会导致重复条目。此外，哪个服务器将执行队列中的下一个任务？所有这些都需要通过集群内部的协调来决定，而不需要区分不同类型的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T18:11:40.553

听起来您正在寻找分布式锁。Redis 用`setnx`. 如果将其与`expire`then 结合使用，则可以创建每 N 秒释放一次的全局锁。

`setnx`如果键不存在，只会写入值并返回 true。Redis 操作是原子的，因此只有在`setnx`密钥过期后调用的第一个服务器才能继续运行任务。

这是一个红宝石的例子：

```
# Attempt to get the lock for 'Task X' by setting the current server's hostname
if redis.setnx("lock:task:x", `hostname`.chomp)
  # Got the lock, now I set it to expire after 5 minutes
  redis.expire("lock:task:x", 60 * 5)
  # This server has the go ahead to execute the task
  execute_task_x
else
  # Failed to get the lock. Another server is doing the work this time around
end 
```

有了这个，您仍然依赖于调用一台服务器`Redis Master`，除非您利用`redis-sentinel`. 查看[redis-sentinel 文档](http://redis.io/topics/sentinel)以获取有关如何配置自动故障转移的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T16:43:53.837

您也可以使用[JGroups](http://www.jgroups.org/)来实现这一点。示例实现可以在[这里找到](http://speakingjava.blogspot.in/2014/10/how-to-execute-singleton-task-in-cluster.html)

# android - 如何将动态壁纸设置为默认壁纸？

> ID：13151913
> 
> 赞同：0
> 
> 时间：2012-10-31T05:46:20.443
> 
> 标签：android, live-wallpaper

我创建了一个动态壁纸应用程序，例如我们如何在主屏幕上获取默认壁纸，即使在我的 Android 手机重启后如何将动态壁纸设置为默认壁纸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:02:45.483

设置动态壁纸是为平台应用保留的，例如设备绑定的动态壁纸选择器（权限`android.permission.SET_WALLPAPER_COMPONENT`定义为`signatureOrSystem`）。

如果不生根设备，您将无法执行此操作。您可以使用以下代码向用户显示壁纸选择器：

```
Intent intent = new Intent();
intent.setAction(WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag
startActivity(intent); 
```

您可以在新墙纸可用时（或在系统启动时）向用户显示通知，并且当用户单击该通知时，使用上述代码启动选择器，以便他可以选择您的墙纸。

# google-app-engine - 如何在 Google App Engine 中使用虚拟文件系统？

> ID：13151916
> 
> 赞同：1
> 
> 时间：2012-10-31T05:46:40.320
> 
> 标签：google-app-engine

任何人都可以帮助如何在 GAE 中使用虚拟文件系统。我想存储一些从服务器返回的数据。我试图将它存储到 '/war/WEB_INF' 但它给出错误：

```
access denied ("java.io.FilePermission" "/war/WEB-INF/home" "write") 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T07:21:28.030

在 Google App Engine 中，您无法访问本地文件系统。您可以使用其他选项来存储数据，例如 Datastore 或 Blobstore。这取决于您的具体需求、文件大小等。

有关更多信息，请查看[数据存储存储选项](https://developers.google.com/appengine/docs/java/datastore/)和[Blobstore Java API](https://developers.google.com/appengine/docs/java/blobstore/)。

希望这可以帮助。

# android - 如何在android的谷歌地图中找到从当前位置到给定位置的路线

> ID：13151917
> 
> 赞同：0
> 
> 时间：2012-10-31T05:46:52.877
> 
> 标签：android, google-maps, overlay, android-mapview, draw

> **可能重复：**
> [谷歌地图输出=公里损坏？](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken)
> [为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo)

我只是谷歌地图的新手，刚刚开始使用谷歌地图我现在在叠加层上做了当前位置，我正在尝试如何在谷歌地图中找到从当前位置到给定位置的路线，它们也在地图上的地图上显示路线Overlay android，我阅读了很多文章，但我确实得到了好的一篇，如果有人有好的教程请与我分享或有好的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:53:11.207

您可以使用以下代码直接调用内置的谷歌地图应用程序。

```
 String uri = "http://maps.google.com/maps?f=d&hl=en&saddr="+curretnlatitude+","+currentlongitude+"&daddr="+destlocation.getLatitude()+","+destlocation.getLongitude();
  Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
  intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
  startActivity(intent); 
```

# ruby-on-rails-3 - Sphinx 是否提供提取索引信息而不是访问数据库的功能？

> ID：13151921
> 
> 赞同：0
> 
> 时间：2012-10-31T05:47:08.913
> 
> 标签：ruby-on-rails-3, full-text-search, sphinx, thinking-sphinx

成功搜索后，将能够访问 sphinx 索引数据，而不是访问数据库。

Thinking Sphinx 提供了一种仅通过 搜索和检索文档 id 的方法`ThinkingSphinx.search_by_ids`。它是否提供了一个 API 来仅检索索引数据而不访问数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:29:34.253

不完全是所有索引字段，但您可以利用[sql_attr_string](http://sphinxsearch.com/docs/current.html#conf-sql-attr-string)

[从文档：](http://sphinxsearch.com/docs/current.html#conf-sql-attr-string)

“字符串属性可以存储附加到每个文档的任意字符串。每个值有 4 MB 的固定大小限制。

请注意，使用 sql_attr_string 声明的属性不会被全文索引；您可以为此使用[sql_field_string](http://sphinxsearch.com/docs/current.html#conf-sql-field-string)指令。”

希望这会有所帮助！

* * *

@凤凰：

您不能使用索引器作为数据库的替代品，因为字段的原始内容未存储在 Sphinx 索引中。

从文档：

“请注意，字段的原始内容不存储在 Sphinx 索引中。您发送给 Sphinx 的文本会被处理，并且全文索引（一种可以快速搜索关键字的特殊数据结构）是从中构建的“

您可以[参考文档以获取更多详细信息](http://sphinxsearch.com/docs/2.0.6/fields.html)：

# vbscript - Novell 使用 VBScript 为用户搜索

> ID：13151922
> 
> 赞同：2
> 
> 时间：2012-10-31T05:47:09.493
> 
> 标签：vbscript, novell

我搜索了很多地方，但没有找到我想要的东西..

我正在尝试通过 vbs 运行搜索以查找用户详细信息并进行修改。

我知道使用 GUI 进行修改很容易......但在我的工作中，我必须从电子表格中修改 160 个用户，如果我可以通过脚本进行修改，那就太好了？

我们的系统现在使用活动目录和 Novell...

AD 我可以做我需要但 Novell / 控制台我不能..

# c# - 渲染后更新文本框的值

> ID：13151925
> 
> 赞同：0
> 
> 时间：2012-10-31T05:47:32.737
> 
> 标签：c#, asp.net, reporting-services

我的页面.aspx：

```
<asp:TextBox ID="txtPageCount" runat="server" EnableViewState="true" ></asp:TextBox>
<rc:ReportControl id="ReportControl1" runat="server" /> 
```

报告控制.ascx：

```
<div>
            <rsweb:ReportViewer ID="ReportViewer1" runat="server" CssClass="ReportViewer" AsyncRendering="false"
                OnPreRender="RptViewer_PreRender" EnableViewState="true" Width="100%" PageCountMode="Actual"
                WaitMessageFont-Size="1.2em" ShowToolBar="true" Visible="true"
                InteractiveDeviceInfos="(Collection)">  
                <LocalReport></LocalReport>           
            </rsweb:ReportViewer>

</div> 
```

在报告处理（`RptViewer_PreRender`）之后，`Render`如果发生`MyPage.aspx`，我正在更新 的值`txtPageCount`。

```
protected override void Render(HtmlTextWriter writer)
{
    base.Render(writer);
    TextBox pageCount = new TextBox();
    pageCount = (TextBox)RtDialysisSummary.FindControl("txtPageCount");

    pageCount.Text = Convert.ToString(ReportViewer1.TotalPages);
} 
```

文本框的值没有更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:55:32.210

您确定您在 mypage.aspx 的呈现事件中获得了正确的页数吗？因为据我了解，mypage.aspx 的渲染事件将在您的 ascx 控件的渲染事件之前发生，因此 pagecount 值仍然会更旧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:51:08.547

Try updating the value before you call `base.Render(writer);` like below

```
protected override void Render(HtmlTextWriter writer)
{
    TextBox pageCount = new TextBox();
    pageCount = (TextBox)RtDialysisSummary.FindControl("txtPageCount");

    pageCount.Text = Convert.ToString(ReportViewer1.TotalPages);
    base.Render(writer);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:58:10.707

可以移动 base.Render(writer); 到最后一行。如果它在渲染后你唯一要做的就是删除一些 javascript 来更新它。还有为什么？我认为问题是页数不正确，但您设置了 PageCountMode.Actual。那你应该好吗？

[http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer.pagecountmode%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer.pagecountmode%28v=vs.100%29.aspx)

# mysql - 在列中显示具有重复值的记录的第一个实例

> ID：13151928
> 
> 赞同：3
> 
> 时间：2012-10-31T05:48:06.370
> 
> 标签：mysql, sql

我在一个名为的表中有这些值`galley_images`：

```
id    gallery_id    image_id
1             1            1
2             1            2
3             1            3
4             2            4 
5             2            5 
6             2            6 
7             2            7
8             3            8 
```

我想返回这样的结果：

```
id    gallery_id    image_id
1             1            1
4             2            4
8             3            8 
```

基本上我只想要任何具有唯一性的记录的第一个实例`gallery_id`。

我有一个使用 Access DB 的解决方案，但需要一个 MySQL 解决方案，Access 解决方案是：

```
SELECT id, First(gallery_id) AS FirstOfgallery_id,  
           First(image_id) AS FirstOfimage_id
FROM galley_images 
GROUP BY id 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:50:51.057

The idea behind the subquery is to select the *minimum* `ID` for each `gallery_ID`. Then join it against itself to get all the columns of the table (*if any*).

```
SELECT  a.*
FROM    gallery_images a
        INNER JOIN
        (
            SELECT gallery_ID, MIN(image_ID) minID
            FROM gallery_images 
            GROUP BY gallery_ID
        ) b
            ON a.gallery_ID = b.gallery_ID AND
                a.image_ID = b.minID 
```

*   [**SQLFiddle Demo**](http://sqlfiddle.com/#!2/1b1f0/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:50:19.973

try this:

```
 SELECT * 
  FROM   galley_images t
  JOIN 
       ( SELECT gallery_id,
                MIN(image_id) as image_id
         FROM   galley_images
         GROUP BY gallery_id )a
  ON   t.gallery_id    =a.gallery_id    
  AND  t.image_id=a.image_id 
```

# [SQL Fiddle Demo](http://www.sqlfiddle.com/#!2/0c0f8/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T05:51:27.983

```
SELECT id, gallery_id, image_id FROM galley_images WHERE id IN (
        SELECT MIN(ID) 
        FROM gallery_images 
        GROUP BY gallery_ID
    ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T06:33:18.557

John Woo 解决方案的一些补充：

```
SELECT  a.*
FROM    gallery_images a
    INNER JOIN
    (
        SELECT gallery_ID, MIN(id) id
        FROM gallery_images 
        GROUP BY gallery_ID
    ) b
        ON a.gallery_ID = b.gallery_ID AND
            a.id = b.id 
```

我们必须通过最小记录 id 而不是通过 min(image_id) 获得，因为 image_id 可以以不同的顺序出现。

# javascript - javascript freemarker springmvc spring.ftl

> ID：13151932
> 
> 赞同：1
> 
> 时间：2012-10-31T05:48:41.770
> 
> 标签：javascript, validation, spring-mvc, freemarker

如何使用javascript调用spring freemarker宏？

```
<@spring.formInput "message.title" 'id="message1" size="10" name="message1"'/> 
<@spring.showErrors "<br>", "error"/>`

alert(document.getElementsById("message1")); 
```

做不到？

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:15:50.923

因为这不是 freemarker 的工作方式，所以在使用`<@spring.formInput/>`实际发生的情况时：

```
<#macro formInput path attributes="" fieldType="text">
    <@bind path/>
    <input type="${fieldType}" id="${status.expression}" name="${status.expression}" value="<#if fieldType!="password">${stringStatusValue}</#if>" ${attributes}<@closeTag/>
</#macro> 
```

所以id将是（在你的情况下）'title'并且有时它不会发生我的建议是添加类属性并按类获取你的元素以避免与freemarker发生任何冲突

所以你应该这样：

```
<@spring.formInput "message.title" 'class="myClass" size="10"'/> 
<@spring.showErrors "<br>", "error"/>`

alert(document.getElementsByClass("myClass")); 
```

这肯定会奏效。我希望这会有所帮助

# java - 我的tictactoe 游戏中的每个按钮都有相同的代码。如何使这个简短？

> ID：13151936
> 
> 赞同：4
> 
> 时间：2012-10-31T05:49:01.527
> 
> 标签：java, swing, debugging, jbutton, tic-tac-toe

这个tictactoe程序是一个2人游戏。在我开始编码之后，我制作的 GUI 是框架和按钮。实际上我的程序正在使用这种编码。

```
private String letter= " ";
private int count= 0;

    private void btn7ActionPerformed(java.awt.event.ActionEvent evt) {                                     
        count++;
                if(count == 1 || count == 3 || count == 5 || count == 7 || count == 9){

                letter = "X";

                } else if(count == 2 || count == 4 || count == 6 || count == 8 || count == 10){

                letter = "O";

                }

        if(evt.getSource() == btn1){

                        btn1.setText(letter);

                } else if(evt.getSource() == btn2){

                        btn2.setText(letter);

                } else if(evt.getSource() == btn3){

                        btn3.setText(letter);

                } else if(evt.getSource() == btn4){

                        btn4.setText(letter);

                } else if(evt.getSource() == btn5){

                        btn5.setText(letter);

                } else if(evt.getSource() == btn6){

                        btn6.setText(letter);

                } else if(evt.getSource() == btn7){

                        btn7.setText(letter);

                } else if(evt.getSource() == btn8){

                        btn8.setText(letter);

                } else if(evt.getSource() == btn9){

                        btn9.setText(letter);

    }         
    }                                    

    private void btn1ActionPerformed(java.awt.event.ActionEvent evt) {                                     
    count++;
                if(count == 1 || count == 3 || count == 5 || count == 7 || count == 9){

                letter = "X";

                } else if(count == 2 || count == 4 || count == 6 || count == 8 || count == 10){

                letter = "O";

                }

        if(evt.getSource() == btn1){

                        btn1.setText(letter);

                } else if(evt.getSource() == btn2){

                        btn2.setText(letter);

                } else if(evt.getSource() == btn3){

                        btn3.setText(letter);

                } else if(evt.getSource() == btn4){

                        btn4.setText(letter);

                } else if(evt.getSource() == btn5){

                        btn5.setText(letter);

                } else if(evt.getSource() == btn6){

                        btn6.setText(letter);

                } else if(evt.getSource() == btn7){

                        btn7.setText(letter);

                } else if(evt.getSource() == btn8){

                        btn8.setText(letter);

                } else if(evt.getSource() == btn9){

                        btn9.setText(letter); 
```

是的，它实际上正在工作，但我对这些代码的问题是我需要将代码放在每个按钮中，例如 button7、button1（这些只是我的按钮的示例），这些代码是按钮执行的操作。

我只需要每个按钮执行一个命令，并且我不想在每个按钮中复制粘贴，因为它们是相同的代码。我认为有一个代码可以做到这一点，你怎么看？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:34:28.447

我真的不知道您如何尝试解决此游戏逻辑，尽管您的代码可以压缩为这种形式：

```
int count = -1;
String letter = "";  
JButton[] button = new JButton[9];  // These three being your Instance Variables
for (int i = 0; i < 9; i++, counter++)
{
    final int counter = i;
    button[i] = new JButton("");
    button[i].addActionListener(new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            count++;
            if (count % 2 != 0)
                letter = "X";
            else
                letter = "O";
            button[counter].setText(letter); 
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:07:59.973

所以基本上，你想把你的逻辑折叠成一个单一的处理程序。此处理程序需要对它正在操作的按钮的单个引用...

就像是...

```
public class ActionHandler implements ActionListener {

    private JButton master;

    public ActionHandler(JButton master) {
        this.master = master;
    }

    protected void setText(String text) {
        master.setText(text);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        String text = null;

        count++;
        if (count / 2f == Math.round(count / 2f)) {
            text = "O";
        } else {
            text = "X";
        }

        setText(text);

    }

} 
```

现在您的设置代码可能与此不同，这只是一个示例...

```
buttons = new JButton[9]; // You can use this to reset the board ;)
setLayout(new GridLayout(3, 3));
for (int index = 0; index < 9; index++) {
    JButton btn = new JButton(Integer.toString(index));
    buttons[index] = btn;
    btn.addActionListener(new ActionHandler(btn));
    add(btn);
} 
```

基本思想是，当您创建一个新按钮时，您将分配给它自己`ActionHandler`，并传递给它一个按钮的引用。这允许动作处理程序根据游戏状态控制按钮。

# c# - 无法在 WPF 中使用字符串变量存储组合框项

> ID：13151938
> 
> 赞同：1
> 
> 时间：2012-10-31T05:49:03.403
> 
> 标签：c#, .net, wpf, mvvm, combobox

我是一名 C++ 开发人员，刚刚开始研究 WPF。在 MVVM 之后，我正在处理组合框，我必须在其中添加项目。好吧，在其中添加项目似乎很容易，但我遇到了一个简单的问题，我无法弄清楚该怎么做。这是代码：

**XAML：**

```
<ComboBox Grid.Row="0" ItemsSource="{Binding DaughterBoardBoxList}" SelectedItem="{Binding SelectedDaughterBoardBoxList, Mode=TwoWay}" SelectedIndex="0" />
<ComboBox Grid.Row="1" ItemsSource="{Binding DaughterVersionBoxList}" SelectedItem="{Binding SelectedDaughterVersionBoxList, Mode=TwoWay}" SelectedIndex="0" />
<ComboBox Grid.Row="2" ItemsSource="{Binding DaughterSerialBoxList}" SelectedItem="{Binding SelectedDaughterSerialBoxList, Mode=TwoWay}" SelectedIndex="0" /> 
```

**视图模型类：**

```
public ObservableCollection<string> DaughterBoardBoxList
    {
        get { return _DBoardBoxList; }
        set
        {
            _DBoardBoxList = value;
            OnPropertyChanged("DaughterBoardBoxList");
        }
    }

    public string _SelectedDBoardBoxList;
    public string SelectedDaughterBoardBoxList
    {
        get { return _SelectedDBoardBoxList; }
        set
        {
            _SelectedDBoardBoxList = value;
            OnPropertyChanged("SelectedDaughterBoardBoxList");
        }
    }

// Similarly for other 2 comboboxes 
```

我在每个组合框中添加了如下项目：

*   DaughterBoardBoxItems = “S1010013”、“S1010014”、“S1010015”等
*   DaughterVersionBoxItems = “001A”、“001B”、“001C”等
*   DaughterSerialBoxItems = 1 到 499

我从 1 - 499 添加如下：

```
for (int j = 1; j < 500; j++)
{
      _DSerialBoxList.Add(j.ToString());
} 
```

现在在执行一些操作时，我需要执行一些语句，如下所示：

```
String daughterBoard = "S1010015001A0477"; // Hardcoded value for check
String boardName = daughterBoard.Substring(0, 8);
DaughterBoardBoxList = boardName;

String version = daughterBoard.Substring(8, 12);
DaughterVersionBoxList = version;

int serialvalue = Convert.ToInt32(daughterBoard.Substring(12, 16));
String serialNo = Convert.ToString(serialvalue);
DaughterSerialBoxList = serialNo;

longlabel += daughterBoard; 
```

当我执行上面的代码时，它会抛出`String version = daughterBoard.Substring(8, 12);`异常`Argumentoutofrange. Index and length must refer to a location within the string.`

要求：

*   现在，我很困惑如何设置 和组合框中的值，`boardName`而不必面对任何异常。我不认为组合框有 settext 属性。他们是实现这一目标的另一种替代解决方案吗？`version``serialNo`

*   即使我输入从 0 到 499 的值，它也应该显示为 4 位值，即如果添加 77，它应该显示为 0077。正如我在上面的代码中提到的。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:15:44.057

首先，异常即将到来，因为您正在超出字符串范围。

`String version = daughterBoard.Substring(8, 4)`

..是你所追求的，8 号之后没有 12 个字符可用。第二个参数是您需要的第一个参数的长度，而不是开始。

然后检查字符串是否在列表中。

```
if (DaughterVersionBoxList.Contains(version))
{
     SelectedDaughterVersionBoxList = version;
} 
```

设置 SelectedDaughterVersionBoxList 会将其应用于组合框。

正如您对选定项所做的那样，双向绑定是设置列表框选定项的最佳方式。

有几种方法可以格式化您希望显示的文本。有时您可以在 xaml 中使用[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)属性。另一种是使用[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

在您的情况下，快捷方式是在填充列表时格式化您的字符串。

```
for (int j = 1; j < 500; j++)
{
      _DSerialBoxList.Add(j.ToString("D4"));
} 
```

这将确保您始终在组合框中获得 4 位数字。[在这里](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)查看更多信息。如果情况需要您将列表项实际处理为数值，那么您最好将 ObservableCollection 转换为 ObservableCollection 并使用我之前提到的转换器。

# windows - mocha + webstorm - 错误信息损坏

> ID：13151940
> 
> 赞同：1
> 
> 时间：2012-10-31T05:49:09.773
> 
> 标签：windows, node.js, phpstorm, mocha.js

我尝试在 win 7 上将 mocha 与 webstorm 测试运行器一起使用。

我有这些配置参数：

*   节点路径：

    ```
    C:\Program Files (x86)\nodejs\node.exe 
    ```

    工作目录：

    ```
    D:\creation\software developer\projects\dev\document root\ 
    ```

    节点应用 js 文件的路径：

    ```
    C:\Users\inf3rno\node_modules\mocha\bin\_mocha 
    ```

    应用参数：

    ```
    test 
    ```

我在 webstorm 控制台中收到以下错误消息

```
✖ 1 of 1 test failed: 
```

但没有关于哪个测试失败的信息。:S

如何解决？

（在 git bash 中我得到了详细的错误信息，所以 mocha 安装得很好）

尝试了不同的记者，但他们似乎都没有工作。问题出在我认为的错误对象上。其他一切都显示得很好。

编写了一个自定义报告器，发现堆栈是否显示在 webstorm 控制台上是完全随机的。最好的选择是使用 process.stderr.write 打印它，使用 console.log 或 process.stdout.write 什么都不会出现。我不知道为什么会这样。也许是某种超时，但我将超时设置为 9999999。:S :S :S 嗯，也许 webstorm runner 有超时，这取决于那个，而不是 mocha 超时设置......

经本记者测试：

```
exports = module.exports = WebStorm;

/**
 * Initialize a new `WebStorm` test reporter.
 *
 * @param {Runner} runner
 * @api public
 */

 //decribe -> suite
 //it -> test

function WebStorm(runner) {
  var buffer = [];
  var suites = [];
  var fails = [];

  runner.on("suite", function(suite){
     suites.push(suite.title || "''");
  });

  runner.on("suite end", function(suite){
     if (fails.length > 0)
         buffer.push("describe "+suites.join(".")+"\n"+fails.join("\n"));
     fails = [];
     suites.pop();
  });

  runner.on("fail", function(test, err){
      fails.push("  it fail "+test.fullTitle() + err.message);
  });

  runner.on("end", function (){
      process.stderr.write(buffer.length+"\n");
      //process.stderr.write(buffer.join("\n"));
  });
} 
```

我发现输出文本有多长并不重要，只是在显示它之前必须等待多长时间。所以我仍然认为这是一个超时问题，而不是标准输出错误。webstorm 控制台返回：“进程以退出代码 59 完成”，这意味着“发生了意外的网络错误”。

更改为 jasmine-node，它正在工作。

# 编辑：

我改成 jasmine2，在 windows 上也有同样的问题。最简单的解决方法是推迟`process.exit`例如 1 毫秒。所以它不能在`stdout.write`. （手动刷新标准输出并仅在此之后调用 exit 也可能是一个可行的解决方案。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-25T15:50:13.230

虽然更大的权力正在[讨论解决这个问题的方法和原因](https://github.com/joyent/node/issues/3584)，但较小的凡人可以诉诸这种解决方法：

*   创建一个名为 testRunner.js（或其他）的文件
*   向其中添加以下代码行
*   修改每个项目的测试文件列表
*   在 webstorm 中，运行`testRunner.js`来运行你的测试

**testRunner.js**

```
var testFiles=["test/_helper.js","test/tests.js","test/tests.coffee"];

var Mocha = require('mocha');

var mocha = new Mocha;

mocha.reporter('spec').ui('bdd');

for (var i =0;i<testFiles.length;i++){
 mocha.addFile(testFiles[i]);
}

var runner = mocha.run(function(){
                console.log('finished');

}); 
```

礼貌：[http ://wuntusk.blogspot.com/2012/06/using-webstorm-or-phpstorm-and-mocha.html](http://wuntusk.blogspot.com/2012/06/using-webstorm-or-phpstorm-and-mocha.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T15:38:56.853

它是由[已知的 Windows 特定节点问题](https://github.com/joyent/node/issues/1669)引起的，该问题也[记录在 JetBrains 问题跟踪器](http://youtrack.jetbrains.com/issue/WI-12344)中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-13T20:07:06.820

即使在实施了 Mrchief 的回答之后，我仍然在输出中得到混乱的报告。我最终在终端窗口中运行测试。作为参考；

确保 mocha 已全局安装。

> ```
> npm install -g mocha 
> ```

打开终端窗口（Alt-Minus）并切换到测试脚本所在的目录

运行摩卡

> 摩卡 -R 规格 *.js

# jquery - Jquery and ajax form submission to mysql double entries in database

> ID：13151945
> 
> 赞同：0
> 
> 时间：2012-10-31T05:49:48.397
> 
> 标签：jquery, mysql, ajax, codeigniter

I have this jquery ajax form submitting script which i wrote for creating and editing items in the DB.

The issue is that whenever i create an item 2 items are created.

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#new_item').on('hidden', function () {
            $(".alert").hide();  // remove errors…when the modal form closes
        });
        $(".showedit").click(function(){
            var edit = $(this).attr('id').split("_");// get the edit id
            var id = edit[1];

            var values = $('#data_'+id+' td').map(function(_, td) {
                return $(td).text();
            }).get();
            // populate the form with the database field
            var name    = $("input[name=name]").val(values[1]);
            var model   = $("select[name=model]").val(values[2]);
            var brand   = $("select[name=brand]").val(values[3]); 
            $('#new_item').modal();
        });

        $("#submit_button").click(function( e ) {
            e.preventDefault();

            var name    = $("input[name=name]").val();
            var amount  = $("input[name=amount]").val();
            var model   = $("select[name=model]").val();
            var brand   = $("select[name=brand]").val(); 

            $.ajax({            
                    type: "POST",                   
                    url: "<?=base_url()?>items/create",                 
                    cache: false,
                    dataType: "json",
                    data: 'name='+name+'&amount='+amount+'&model='+model+'&brand='+brand,
                    success: function(result){
                        if(result.error) {
                            $(".alert").addClass('alert-error');
                            $(".alert").fadeIn('slow').html(result.message);
                          } 
                          else 
                          {                 
                            $(".alert").addClass('alert-success');
                            $(".alert").fadeIn('slow').html(result.message);
                          }

                    }
            }); 

        });
    });
</script> 
```

Please help me solve this. I will be greatful!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:56:12.697

```
$("#submit_button").click(function( e ) {
            e.preventDefault(); 
```

这意味着它将阻止按钮默认操作

你必须把它改成

```
$("form").submit(function( e ) {
            e.preventDefault(); 
```

或者您可以将 ID 添加到表单中

# c++ - How to concate values in messagebox text using C++ win32 API?

> ID：13151947
> 
> 赞同：0
> 
> 时间：2012-10-31T05:50:14.623
> 
> 标签：c++, windows, winapi, dialog

i want to show the messsagebox using win32 API...

`int pwdexpirydays=5; MessageBox(hdlg,(LPCSTR)("Your password will expire in %d days",&pwdexpirydays),(LPCSTR)"Logon Message",MB_OK | MB_ICONINFORMATION);`

But i cant get the value...

How to i concate the `pwdexpirydays` values into `"Your password will expire in %d days"` this string.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T05:59:45.700

如果您经常这样做，您可能需要考虑一个使其快速简便的功能。

```
int MsgBoxPrint(HWND hWnd, int Type, char *Caption, char *Format, ...)
{
    va_list ArgList;
    char Temp[4096];

    va_start(ArgList, Format);
    vsnprintf(Temp, 4096, Format, ArgList); 
    va_end(ArgList);

    return MessageBox(hWnd, Temp, Caption, Type);
} 
```

然后你会这样称呼它：

```
MsgBoxPrint(hdlg, MB_OK | MB_ICONINFORMATION, "Logon Message", \
     "Your password will expire in %d days", pwdexpirydays); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T05:52:33.703

您可以使用`snprintf`或 std::string 进行连接。

# javascript - How to add a attribute to a dropped element in Drag and Drop using jquery?

> ID：13151951
> 
> 赞同：0
> 
> 时间：2012-10-31T05:50:30.260
> 
> 标签：javascript, jquery, drag-and-drop

HI all i have an menu buider app using drag and drop...

**what i want to do is when ever i am adding a child to a parent menu i want to add a attirbute to the droped child element "parent=Mens"..i.e

```
 suppose i had dropped "Mens" as main menu and I am dropping child "Shoe" as its child

                  <ol class="ui-droppable">
                      <li><a id="1001"> Mens</a>
                              <ol class="ui-droppable">
                                    //now here i am dropping child shoe
                                    //and here i want to add an attrbute parent
                                     <li><a id="2001" parent="Mens">Shoe</a> </li>

                                 </ol>
                              </li>
                      </ol> 
```

so this is want i want to achieve can any one help me in doing this

here is my drag and droppable code for Menu Building

```
 var i = 1;
    var z = 1;
    $(document).ready(function () {
        $("button[id='columnadd']").click(function () {
            // create the element
            var domElement = $('<div id="shoppingCart' + i++ + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here <img src="../Images/delete.png" id="shoppingCart' + z++ + '" style="float: right; cursor:pointer;" onclick="removecolumn(this.id)"/></h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></div>');
            var holder = "#columnholder";
            $("#columnholder").append(domElement);
            //$(this).after(domElement);

            // at this point we have domElement in our page

            // make it droppable
            domElement.find("ol").droppable({
                activeClass: "ui-state-default",
                accept: '.small_box li',
                greedy: true,
                drop: function (event, ui) {
                    makeItDroppableToo(event, ui, this);
                }
            });
        });
        function makeItDroppableToo(e, ui, obj) {
            $(obj).find(".placeholder").remove();
            var draggedID = ui.draggable.attr('id');
            alert(draggedID);
            //var placeholder = $("<ol><li>Add Sub Menu here</li></ol>");
            var placeholder = $("<ol><li class='submenuholder'>Drop SubMenu here</li></ol>");
            $("<li></li>").append('<a id="' + draggedID + '" draggable="true" droppable=true>' + ui.draggable.text() + '</a>').append(placeholder).appendTo($(obj));

            // this is the same as the previous one
            placeholder.droppable({
                greedy: true,
                // put options here
                drop: function (event, ui) {
                    makeItDroppableToo(event, ui, this);
                }
            });
        }
        $(".small_box li").draggable({
            appendTo: "body",
            helper: "clone"
        });
    }); 
```

please can any one help me out here

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:26:17.590

您可以像这样为丢弃的孩子添加属性

```
 function makeItDroppableToo(e, ui, obj) {
     $(ui.draggable).attr("parent","MENS");
 } 
```

看看这个[JQFAQ.com](http://jqfaq.com/)，它将对 jQuery 开发者很有帮助。

# php - Get unique values of a SQL column

> ID：13151952
> 
> 赞同：1
> 
> 时间：2012-10-31T05:50:33.723
> 
> 标签：php, sql, unique

Say I have a table with some columns as

-conversation_id,

-col2,

-user_id.

I want to grab all the rows corresponding to user_id. There could be, say, 20 rows returned for a particular, but there are only say 3 unique conversation_id values.

What is the fastest way to get these values, rather than going through each one and figuring out the unique ones?

I must say, I mean this in PHP!

Thankss!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:57:09.553

你可以试试这个

```
select distinct conservation_id,user_id
from table 
group by user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:53:46.120

```
$query = "SELECT DISTINCT conversation_id 
          FROM conversations 
          WHERE user_id='2'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:54:35.673

```
SELECT conversation_id, user_id
      FROM conversations
      GROUP BY user_id, conversation_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T06:07:11.083

```
SELECT DISTINCT conversation_id FROM conversations WHERE user_id = userID 
```

[使用zend函数从表中获取不同的记录？](https://stackoverflow.com/questions/6110284/get-distinct-record-from-table-using-zend-functions)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T06:23:17.940

DISTINCT 关键字用于从结果集中仅选择唯一项。

如果是zend，则为ex：

> $db->select()->distinct('u.conversation_id')->from(array('u'=>'user'))->where('u.user_id = ?',$user_id);

# c++ - GDI+ initialization crashes the app, why?

> ID：13151956
> 
> 赞同：2
> 
> 时间：2012-10-31T05:50:44.007
> 
> 标签：c++, windows, winapi, gdi+, gdi

I have the following C++ line that obtains the GDI+ handle out of GDI's device context:

```
//HDC hDC = device context from GDI
if(hDC)
{
    //Obtain graphics handle for GDI++
    Graphics* pgrpx = new Graphics(hDC);    //I get invalid memory exception here

    //Code continues
    //...

    //Free object
    delete pgrpx;
    pgrpx = NULL;
} 
```

It works just fine in my tests.

But recently I received a crash dump for the app, with the "thread referenced memory location that it has no access to" exception at the line I pointed above in the code -- right where the Graphics object is supposed to be initialized.

What could be the issue here? And how to address it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:45:16.990

你检查 GDI+ 的初始化了吗？我不确定问题是否出在此处，但您可以尝试一下。

```
Gdiplus::GdiplusStartupInput    gdiplusStartupInput;
ULONG_PTR                       gdiplusToken;
if(GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL) != Gdiplus::Ok)
{
    MessageBox(NULL, TEXT("GDI+ failed to start up!"),
        TEXT("Error!"), MB_ICONERROR);
    return -1;
} 
```

# ruby-on-rails - 如何以一种形式编辑多个模型？

> ID：13151960
> 
> 赞同：6
> 
> 时间：2012-10-31T05:50:59.397
> 
> 标签：ruby-on-rails, ruby, scaffolding

我从我的教练那里得到了一个任务。我想以一种形式编辑两个模型。例如，我们有两个实体 student 和 address。在新学生部分，我想添加学生详细信息和地址。我如何通过 ruby​​ on rails 中的脚手架来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T06:25:15.050

您可以使用[accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)和[fields_for](http://guides.rubyonrails.org/form_helpers.html)来构建一个表单以同时创建两个模型，因此您也可以对其进行编辑。这种形式称为`nested form`。

这是一个关于[嵌套表单](http://asciicasts.com/episodes/196-nested-model-form-part-1)的参考，。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:20:50.503

我们可以像这样编辑多个模型..

# 在学生/edit.rhtml

# 编辑学生

```
 <%= error_messages_for :student %>

 <%= start_form_tag :action => 'update', :id => params[:id] %>

 <p>
  Student Name:
  <%= text_field :student, :name %>
  </p>

 <h2>Address</h2>
  <% for @address in @student.addresses %>
  <%= error_messages_for :address %>
  <% fields_for "address[]" do |f| %>
  <p><%= f.text_field :name %></p>
  <% end %>
  <% end %>

 <p><%= submit_tag 'Update' %></p>
  <%= end_form_tag %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T07:49:07.653

我不确定脚手架，但可以通过使用 form_tag 而不是 form_for 来实现预期的行为。

```
<%= form_tag :url => , :html => {:id=> , :method => , :class => ""} do %>
  <% text_field_tag <id>, <default_value>, :name=>"student[name]" %>
  <% text_field_tag <id>, <default_value>, :name=>"student[age]" %>
  <% text_field_tag <id>, <default_value>, :name=>"address[street]" %>
  <% text_field_tag <id>, <default_value>, :name=>"address[city]" %>
  <% text_field_tag <id>, <default_value>, :name=>"address[state]" %>
  <% text_field_tag <id>, <default_value>, :name=>"address[country]" %>
  <%= submit_tag 'save' %>
<% end %> 
```

然后参数将很好地分组在一个哈希中

```
{'student' => {'name' => , 'age' => }, 'address' => {'street' => , 'city' =>  . . .}} 
```

您可以对其进行解析以更新两个模型

# c - getpwnam getpwnam_r

> ID：13151961
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:06.083
> 
> 标签：c, linux, data-structures, systems-programming

I am trying to update a password structure in a function. This function gets a pointer to password structure, into which I have to update details.

I get a `struct passwd*` to a function as an argument and my requirement is to update it's members to someother user's(user2) information and caller of this function should have all these updated details.

I tried following, can you please help me by suggesting what is an ideal way to do it.

My function is like this:

```
struct passwd* myfunc(struct passwd *pw) 
```

To this `pw`, I have to update details.

> Try1:

Using `getpwnam()` get details of user2 into passed `struct passwd *pw`.

```
pw = getpwnam("user2");
return pw; 
```

Does not work, as we are not updating pw members rather we are just pointing `pw` to some other struct, pointer members of `pw`, still point to older data. And thus parent of `myfunc()` does not get updated details.

We have to write into members.

> Try2:

Using `getpwnam()` get details of user2 into a temp `struct passwd*`. Do a `memcpy(pw, temppasswd, sizeof(struct passwd))`

Does not work as `memcpy` is a shallow copy and consequent `getpwnam()` (although the return is not given to `temppasswd`) will over write static buffer area, and `pw` may have different values.

> Try3:

Tried `getpwnam_r()` which writes details into buffer passed as an argument to it rather than into a static data area (like `getpwnam`).

Can not use this, as I don't have `pw`, I have `*pw`. So, I can not pass address of memory allocated to `pw` to `getpwnam_r`.

> Try 4:

I can do member by member copy in Try2, but it can result in memory leaks if I don't free `pw` structure pointer members before copying data into them.

Is there any other way to copy details to passed `pw*` without free-ing all struct `pw*` pointer members.

It is a bit confusing, I hope I make sense to someone.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:23:44.333

您可以将前两个选项组合为`*pw = *getpwnam("user2");`. 尽管如此，它仍然是一个浅拷贝。

至于您的问题，如果您可以将原型更改为，`struct passwd* myfunc(struct passwd **pw)`那么您可以自己分配结构和所有需要的字段。然后有一个单独的函数，用户必须调用它来释放所有分配的数据。

# c# - How to Generate a PDF in Metro app?

> ID：13151962
> 
> 赞同：3
> 
> 时间：2012-10-31T05:51:05.393
> 
> 标签：c#, xaml, pdf, microsoft-metro, pdf-generation

> **Possible Duplicate:**
> [Looking for a PDF Writer for Windows 8 Metro Apps](https://stackoverflow.com/questions/11109427/looking-for-a-pdf-writer-for-windows-8-metro-apps)

I wanted to know how to generate a PDF in my Metro App.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:08:04.857

您最好的选择是使用 html 模板和 html-to-pdf（例如 EO.PDF）转换器或转换为 xps 然后使用 xps-to-pdf 转换器（例如 ABCPDF）的 xaml 模板。

还有其他替代方法，例如 ITextSharp，允许您通过一些构建器对象以编程方式创建 pdf。

您必须意识到 PDF 不是基于标记的。写入 PDF 的每个字母都以特定的 x/y 坐标结束 - PDF 专为设计工作/打印而设计。标记标签中单词的简单概念很容易解释，同时在 PDF 中，只有通过基于邻近度的单词分类算法才能知道单词中的几个字母。

不幸的是，如果您想在商业上使用 PDF，您可能需要为此付费。另一种选择是为您的用户提供打印选项并让他们使用 PDF 打印机（基本上每页制作一张图像并将其保存到 PDF 文件） - 我听说 PDF 打印解决方案是自动化的并在网络上使用.

对于 Metro 应用程序，我可能会选择 XPS 和 XPS-To-PDF 路线。

# c# - Web用户控件的中继器如何绑定

> ID：13151966
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:20.393
> 
> 标签：c#, asp.net, repeater, webusercontrol

我真的很困惑。浪费了一整天的时间，但仍然无法修复。我制作了一个（Repeater.ascx）web 用户控件（里面有Repeater），然后像这样将它拖到aspx页面（Info.aspx）上。

```
 <uc1:Repeater runat="server" ID="Repeater" /> 
```

这是用户控制代码。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Repeater.ascx.cs" Inherits="DBG.Website.Billing.Repeater" %>
 <asp:Repeater ID="repeaterInvoicesPaid"    OnItemCommand="ClientNameClicked" runat="server">
               <HeaderTemplate>
            <table id="PaidInvoicesTable" cellspacing="0" cellpadding="0" style="width: 100%; font-size: 11px; border-right-width: 0; border-bottom-width: 0;"
            class="dxgvControl grid dxgvTable">
                    <thead>
                        <tr>
                            <td style="width: 150px;" class="dxgvHeader">Invoice #
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Client Name
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Invoice Date
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Due Date
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Total
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Payment Method
                            </td>
                            <td style="width: 150px;" class="dxgvHeader">Status

                        </tr>
                    </thead>
              <tbody>
            </HeaderTemplate>

            <ItemTemplate>
                <tr class="dxgvDataRow">
                    <td class="dxgv">
                    <asp:Label ID="lblInvoiceID" Text='<%#Eval("InvoiceID")%>' runat="server" /> 
                    </td>
                    <td class="dxgv">
                   <asp:LinkButton ID="btnClientName"  CommandName="NameClicked"  Text='<%#Eval("ClientName")%>' CommandArgument='<%#Eval("InvoiceReapterCustomerID") %>' runat="server"/>

                    </td>

                    <td class="dxgv">
                        <asp:Label ID="lblAddedDate" Text='<%#Eval("AddedDateAndTime")%>' runat="server" />
                    </td>
                    <td class="dxgv">
                   <asp:Label ID="lblCloseDate" Text='<%#Eval("CloseDateOnly") %>' runat="server" />

                    </td>
                    <td class="dxgv">
                    <asp:Label ID="lblRecurringCharge" Text='<%#Eval("RecurringCharge") %>' runat="server" />

                    </td>
                    <td class="dxgv">
                      <asp:Label ID="lblPaymentMethodID"  Text='<%#Eval("PaymentMethodIDInvoices")%>' runat="server" />

                    </td>
          <td class="dxgv">

           <asp:Label ID="lblStatus"   ForeColor="Green"  Text=' <%#Eval("StatusType") %>' runat="server" />

          </td>
                        <td class="dxgv">

           <asp:Label ID="lblCustomerid"   Visible="false"  Text=' <%#Eval("InvoiceReapterCustomerID") %>' runat="server" />

          </td>
                </tr>
            </ItemTemplate>

   <FooterTemplate>

            </tbody> 

       </table>
        </FooterTemplate>
        </asp:Repeater> 
```

现在我的问题是我想在 info.cs 文件中绑定 Web 用户控件的转发器，但我不知道如何在 info.cs 上获取用户控件和转发器 ID 并绑定它。

注意：我需要将转发器与从 info.cs 的方法返回的数据源（列表）绑定。

请帮忙 。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:56:43.453

您可以在控件中创建公共方法并从页面调用它。

**在 ASCX**

```
public void BindRepeater()
{
    //.....
    repeaterInvoicesPaid.DataSource = datatableOrDataSet;
    repeaterInvoicesPaid.DataBind();
} 
```

**在 ASPX 中**

```
uc1.BindRepeater(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T05:58:31.563

通常对于 vanilla ASP.NET，如果您指定一个 ID 和 runat="server" 属性，您可以从 aspx 页面的代码访问控件。在创建控件的位置访问 post initialize 很重要 - 您最好的选择是在 OnLoad 事件中。

您必须记住的是，当您设置数据源/项目源时，您必须调用 .Bind() 或 .DataBind() 方法来进行实际绑定。

# android - Image content can not read during zoom

> ID：13151970
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:38.500
> 
> 标签：android, bitmap, image-gallery, android-gallery

When i zoom image by pinch , i can not read the content of image . This is my code:-

```
if(!(it.isEmpty() )) {
    Collections.sort(it); 
    for(int i=0; i<it.size();i++) {
        ImageViewTouch imageView = new ImageViewTouch(GalleryTouchTestActivity.this);
        imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    final Options options = new Options();
     options.outHeight = (int) scaleHeight; // new smaller height
        options.outWidth = (int) scaleWidth;   // new smaller width
       options.inScaled = true;
        options.inPurgeable = true;
        options.inSampleSize = 8;
        String photoURL = it.get(i);

        Bitmap bitmap = BitmapFactory.decodeFile(photoURL,options);
        imageView.setImageBitmap(bitmap);

        arrayAdapter.add(imageView); 
    } 
```

May any one help me . i have checked it many items but unable to read content . thank you for checking this code and giving me your important time

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:03:06.277

使用此函数代替 BitmapFactory.decodeFile(photoURL,options);

```
public Bitmap getBitmaplarge(String url,int size) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFilelarge(f, size);
    if(b!=null)
        return b;

    //from web
    try 
    {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils2.CopyStream(is, os);
        os.close();
        bitmap = decodeFilelarge(f, 800);
        return bitmap;
    } catch (Exception ex)
    {
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFilelarge(File f,int size)
{
    try
    {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=size;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true)
        {
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } 
    catch (FileNotFoundException e) {}
    return null;
} 
```

删除您的 oprion 变量。这个乐趣会自动调整..

包 com.lazyloading；

导入java.io.File；导入android.content.Context；

公共类文件缓存 {

```
private File cacheDir;

public FileCache(Context context)
{
    //Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))

        cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"SingpostCache");
    else

        cacheDir=context.getCacheDir();

    if(!cacheDir.exists())
        cacheDir.mkdirs();
}

public File getFile(String url)
{
    //I identify images by hashcode. Not a perfect solution, good for the demo.
    String filename=String.valueOf(url.hashCode());
    //Another possible solution (thanks to grantland)
    //String filename = URLEncoder.encode(url);
    File f = new File(cacheDir, filename);
    return f;

}

public void clear()
{
    File[] files=cacheDir.listFiles();
    if(files==null)
        return;
    for(File f:files)
        f.delete();
}

} 
```

将文件缓存类的对象设为 FileCache fileCache=new FileCache(context);

和复制流的乐趣

```
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:39:21.090

您可以`WebView`为此使用：

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(true);
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file:/"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadData(html, "text/html","utf-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T05:55:49.147

尝试在此处将值更改为 2

```
options.inSampleSize = 2; 
```

# vb.net - Send File Via Ftp Using VB.Net In .Net 2003

> ID：13151971
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:42.117
> 
> 标签：vb.net, ftp

I want to send the file via FTP on server using vb.net(Vs 2003,framework 1.1) is throwing an exception

> AN EXCEPTION OCCURED DURING THE WEBCLIENT REQUEST

The same code is working fine in .Net 2008\. I have no Idea why its throwing the exception.

```
Imports System.Data.SqlClient
Imports System.Text
Imports Microsoft.VisualBasic
Imports System.Net.WebRequest
Imports System.Net.WebClient
Imports System.Net
Imports System.IO

If (Directory.Exists(directoryPath)) Then
    arrFileList = Directory.GetFiles(directoryPath) '''Getting All files 
Else
    MessageBox.Show("Directory not Exist")
End If

    For i As Integer = 0 To i < arrFileList.Length - 1

            Try
                Dim fileName As String = arrFileList.GetValue(i)
                Dim toUpload As New FileInfo(fileName)
                Dim client As New WebClient

                Dim nc As New NetworkCredential("xxxx", "xxxx") 

                Dim addy As Uri
                addy = New Uri("ftp://1xx.xx.xxx.xxx/HYPOSII_FTP/Test/" & toUpload.Name.ToString())               

                client.Credentials = nc
                Dim arrReturn As Byte() = client.UploadFile(addy.ToString(), fileName) //This Line Throwing error
                MessageBox.Show("File Uploaded Sucessfully")
                FLAG = True                
            Catch ex As Exception
                MessageBox.Show(ex.Message)
            End Try
        Next 
```

# spring - Mybatis + Spring , Service is Intailized but Dao are null

> ID：13151972
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:43.313
> 
> 标签：spring, mybatis

Mybatis + Spring

When I Autowire a Dao into service and calling service in Junit Test the Service Object is Intailized but The Dao Object are null.

```
springTest/springcontext-datasource.xml
-----------------------------------------------------------------------

<?xml version="1.0" encoding="gb18030"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:aop="http://www.springframework.org/schema/aop"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xmlns:jdbc="http://www.springframework.org/schema/jdbc"
     xmlns:context="http://www.springframework.org/schema/context"
     xsi:schemaLocation="
     http://www.springframework.org/schema/context 
     http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/jdbc 
     http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
     http://www.springframework.org/schema/tx 
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
     http://www.springframework.org/schema/aop 
     http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:springTest/config.properties</value>
        </property>
    </bean>     

    <!-- define the mysql dataSource -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${driverClassName}" />
        <property name="url" value="${url}" />
        <property name="username" value="${username}" />
        <property name="password" value="${password}" />
    </bean> 

    <!-- transaction manager -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

     <aop:config>  
         <aop:advisor pointcut="execution(* com.service..*.*(..))" advice-ref="txAdvice"/>  
     </aop:config>
     <tx:advice id="txAdvice" transaction-manager="transactionManager">  
         <tx:attributes>  
             <tx:method name="get*" read-only="true"/>  
             <tx:method name="find*" read-only="true"/>  
             <tx:method name="*"  propagation="REQUIRED"/>  
        </tx:attributes>  
     </tx:advice>       

      <!-- enable component scanning and autowire (beware that this does not enable mapper scanning!) -->    
    <context:component-scan base-package="com.service" />

     <!-- define the SqlSessionFactory -->
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="typeAliasesPackage" value="com.domain" />
        <property name="mapperLocations" value="classpath*:com/dao/*.xml" />
    </bean>

   <!-- scan for mappers and let them be autowired -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.dao" />
    </bean>

    <bean id="productService" class="com.service.ProductService" >
    </bean>

</beans>

DAO
-----------------------------------------------------------------------
package com.dao;

import com.domain.Author;

public interface AuthorMapper {

    int deleteByPrimaryKey(Integer authorId);
}

domain
-----------------------------------------------------------------------
package com.domain;

public class Author {
    private Integer authorId;

    private String sourceId;

    private String name;

    private String personalName;

    private Integer revision;

    private String lastModified;

    public Integer getAuthorId() {
        return authorId;
    }

    public void setAuthorId(Integer authorId) {
        this.authorId = authorId;
    }

    public String getSourceId() {
        return sourceId;
    }

    public void setSourceId(String sourceId) {
        this.sourceId = sourceId == null ? null : sourceId.trim();
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name == null ? null : name.trim();
    }

    public String getPersonalName() {
        return personalName;
    }

    public void setPersonalName(String personalName) {
        this.personalName = personalName == null ? null : personalName.trim();
    }

    public Integer getRevision() {
        return revision;
    }

    public void setRevision(Integer revision) {
        this.revision = revision;
    }

    public String getLastModified() {
        return lastModified;
    }

    public void setLastModified(String lastModified) {
        this.lastModified = lastModified == null ? null : lastModified.trim();
    }
}

package com.service;
ProductService
-----------------------------------------------------------------------

@Service
public class ProductService{
    @Autowired
    private AuthorMapper authorMapper;

    public Author selectAuthorByPrimaryKey(Integer authorId) {
        Author author = null;
        try{
            System.out.println("authorMapper:"+authorMapper);
            author = authorMapper.selectByPrimaryKey(authorId);
            System.out.println("Author Obj:"+author);
            return author;
        }catch(Exception e){
            log.info(e.getMessage()+" selectAuthorByPrimaryKey authorId:"+authorId);
        }
        return author;
    }
}

package com.test;
ProductServiceTest
-----------------------------------------------------------------------

@ContextConfiguration(locations = {"classpath:springTest/springcontext-*.xml"})
@Controller
public class ProductServiceTest extends AbstractTransactionalJUnit4SpringContextTests {

    @Autowired
    private ProductService productService;

    @Test
    public void test01_selectAuthor(){
        try{
        System.out.println("productService:"+productService);
            Author author = productService.selectAuthorByPrimaryKey(1);

        }catch(Exception e){
            e.printStackTrace();
        }
    }
}

AuthorMapper.xml
-----------------------------------------------------------------------

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.AuthorMapper" >

  <resultMap id="BaseResultMap" type="com.domain.Author" >
    <id column="author_id" property="authorId" jdbcType="INTEGER" />
    <result column="source_id" property="sourceId" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="personal_name" property="personalName" jdbcType="VARCHAR" />
    <result column="revision" property="revision" jdbcType="INTEGER" />
    <result column="last_modified" property="lastModified" jdbcType="VARCHAR" />
  </resultMap>

  <sql id="Base_Column_List" >
    author_id, source_id, name, personal_name, revision, last_modified
  </sql>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from author_t
    where author_id = #{authorId,jdbcType=INTEGER}
  </select>  
</mapper>

config.properties
-----------------------------------------------------------------------

driverClassName = com.mysql.jdbc.Driver
url = jdbc:mysql://localhost:3306/test
username =root
password =satish

author_t Table
-----------------------------------------------------------------------

CREATE TABLE `author_t` (
  `author_id` int(15) NOT NULL AUTO_INCREMENT,
  `source_id` varchar(15) NOT NULL,
  `name` varchar(1000) NOT NULL,
  `personal_name` varchar(1000) DEFAULT NULL,
  `revision` int(3) DEFAULT NULL,
  `last_modified` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`author_id`),
  UNIQUE KEY `source_id` (`source_id`)
) ENGINE=InnoDB

OutPut Of Junit Test
----------------------------------------------------------------------
productService:com.service.ProductService@ee9867d
authorMapper:null
Author Obj:null

pom.xml
-----------------------------------------------------------------------
<dependencies>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.6.11</version>
    </dependency>           
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>   
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>   
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>   
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>   
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>   
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.0.5.RELEASE</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>       

    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis</artifactId>
        <version>3.0.5</version>
    </dependency>
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis-spring</artifactId>
        <version>1.0.1</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.17</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils-core</artifactId>
        <version>1.8.3</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2.2</version>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T22:24:48.750

要使用带有注释的自动装配，应包含`<context:annotation-config/>`在 applicatonContext.xml 中

# image - 在画布上选择图像时遇到问题

> ID：13151973
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:47.547
> 
> 标签：image, html, canvas, edit

我正在使用 HTML5 画布和 JS 创建一个绘图应用程序。我允许用户上传图片并用于`context.drawImage();`在画布上绘制它。但是当我尝试编辑图片时，我失败了。如果我想使用鼠标（键盘或其他任何东西）在画布上拖动和缩放图片，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:45:45.693

为此，您可以使用**http://fabricjs.com/** (fabric.js) 在 HTML5 的 canvas 元素上对图像进行移动、缩放、调整大小、转置等。这个 javascript 库为您提供全面支持，适用于大多数现代浏览器。只需通过它，您就可以完成所有提到的活动。干杯。

# jquery - text-transform css not support in tablet browser

> ID：13151974
> 
> 赞同：3
> 
> 时间：2012-10-31T05:51:48.373
> 
> 标签：jquery, html, css

I am using text-transform:uppercase in input box. it is not support in tablet browser.

Here is my HTML:

```
<html>
<body>
<input type="text" class="isCapital">
</body>
</html> 
```

And CSS:

```
.isCapital{text-transform:uppercase;} 
```

anybody have solution for this. please update your answers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:53:15.997

你有：

```
 <!-- v--- this was misspelled -->
<input type="text" class="isCaptial"> 
```

它应该是：

```
<input type="text" class="isCapital" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:48:01.453

您不应该期望`text-transform`影响表单字段的值，因为这些值不是 HTML 元素内容的一部分。我惊讶地发现，在我测试的浏览器（Firefox、Chrome、IE、Opera on Win 和 Android）中，它实际上会影响值，无论是在`value`属性中指定还是由用户输入。但是这种行为在 CSS 规范中没有指定。

以这种方式转换数据也可能会造成混淆和误导。用户键入“foo”但看到“FOO”，表单提交时实际发送的数据是“foo”。

如果您真的希望使页面以这种方式运行，那么最跨浏览器的方法可能是使用（除了`text-transform`属性之外）JavaScript 代码，在输入字符时将字符转换为大写，但也存储原始输入，并且拦截表单提交，以便提交由 JavaScript 代码创建的另一个表单，而不是实际表单，作为原始表单的不可见副本，但输入的数据按原样存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:00:57.907

我怀疑它是否有帮助，但你想试试这个吗？使用 Javascript / jQuery：

```
<script>
jQuery(function(){
  jQuery(".isCapital").html().toUpperCase();
});
</script> 
```

快乐编码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T05:56:20.540

你拼错了资本。

替换`isCaptial`为`isCapital`。

# excel - VBA在选择一个而不是放回后找到组合

> ID：13151975
> 
> 赞同：1
> 
> 时间：2012-10-31T05:51:49.950
> 
> 标签：excel, vba, combinations

我之前的问题在这里：[Filtering in VBA after find combination](https://stackoverflow.com/questions/12957778/filtering-in-vba-after-finding-combinations) 。我现在想尝试更多细节。

我现在有一个这样的组合列表：

> A
> B
> AB
> C
> AC
> BC
> ABC
> D
> AD
> BD
> CD
> E
> AE
> BE
> CE

我想要一个新的宏做的是获取这些信息并找出有多少选项可以选择所有字母。因此，例如选项 1 将导致：

> ABCDE
> 
> 乙二胺四乙酸
> 
> ETC.......

您选择一个盒子，您会发现拥有所有盒子所需的可能性。这是我尝试过的另一个代码，但是由于计算时间长，它不能很好地工作：

```
Public Text, Alpha, Beta, Temp_Result, Temp_Stack, Wgt, Hgt, Stack, Stack_Sum
Public Max_Wgt As Double, Max_Hgt As Double, Crt_Wgt, Crt_Hgt, Next_Row As Long, Next_Col As Long
Sub ListCombinations()
    Dim Str_Len As Integer, Len_Text As Integer, TotalComb As Integer
    Len_Text = Worksheets("Sheet1").Range("A65536").End(xlUp).Row - 1
    Worksheets("Sheet2").Range("A2:IJ65536").Clear
    Next_Row = 1
    Next_Col = 1
    Stack = 0
    Max_Wgt = Worksheets("Limits").Range("B1")
    Max_Hgt = Worksheets("Limits").Range("B2")

    ReDim Alpha(1 To Len_Text)
    For j = 1 To Len_Text
            Alpha(j) = Worksheets("Sheet1").Cells(j + 1, 1)
    Next j

    For i = 1 To Len_Text
        Str_Len = i

        ReDim Temp_Result(1 To Str_Len)

        AddCombination Len_Text, Str_Len

    Next i
    Find_Stacks
End Sub

Private Sub AddCombination(Optional PopSize As Integer = 0, _
                          Optional SetSize As Integer = 0, _
                          Optional NextMember As Integer = 0, _
                          Optional NextItem As Integer = 0)

Static iPopSize As Integer
Static iSetSize As Integer
Static SetMembers() As Integer
Dim i As Integer

If PopSize <> 0 Then
    iPopSize = PopSize
    iSetSize = SetSize
    ReDim SetMembers(1 To iSetSize) As Integer
    ReDim Crt_Wgt(1 To iSetSize) As Double
    ReDim Crt_Hgt(1 To iSetSize) As Double
    NextMember = 1
    NextItem = 1
End If

For i = NextItem To iPopSize
    SetMembers(NextMember) = i
    Crt_Wgt(NextMember) = Worksheets("Sheet1").Cells(i + 1, 2)
    Crt_Hgt(NextMember) = Worksheets("Sheet1").Cells(i + 1, 3)
    If NextMember <> iSetSize Then
        AddCombination , , NextMember + 1, i + 1
    Else
        If (Application.WorksheetFunction.sum(Crt_Wgt) > Max_Wgt) Or _
            (Application.WorksheetFunction.sum(Crt_Hgt) > Max_Hgt) Then

        Else
            If Stack = 0 Then
                SavePermutation SetMembers(), iSetSize
            Else
                SaveStack SetMembers(), iSetSize
            End If

        End If
    End If
Next i

End Sub 'AddCombination

Sub SavePermutation(Set_Member, Str_Len As Integer)
For i = 1 To Str_Len
    Temp_Result(i) = Alpha(Set_Member(i))
Next i

If Next_Row > 65535 Then
    Next_Row = 1
    Next_Col = Next_Col + 4
End If

Worksheets("Sheet2").Cells(Next_Row + 1, Next_Col) = Join(Temp_Result, "")  Worksheets("Sheet2").Cells(Next_Row + 1, Next_Col + 1) = Application.WorksheetFunction.sum(Crt_Wgt)
Worksheets("Sheet2").Cells(Next_Row + 1, Next_Col + 2) = Application.WorksheetFunction.sum(Crt_Hgt)
Action = Find_Number()
Next_Row = Next_Row + 1

End Sub

Function Find_Number()
    Text = Worksheets("Sheet2").Cells(Next_Row + 1, Next_Col)
    Sum_Char = 0
    For i = 1 To Len(Text)
        iChar = Left(Text, 1)
        Sum_Char = Sum_Char + Worksheets("Sheet1").Cells(WorksheetFunction.Match(iChar, Worksheets("Sheet1").Range("A:A"), 0), 4)
        Text = Right(Text, Len(Text) - 1)
    Next i
    Worksheets("Sheet2").Cells(Next_Row + 1, Next_Col + 3) = Sum_Char
End Function

Sub Find_Stacks()
Dim Len_Text As Integer, Str_Len As Integer
Stack_Sum = WorksheetFunction.sum(Worksheets("Sheet1").Range("D:D"))
Len_Text = Worksheets("Sheet2").Range("D65536").End(xlUp).Row - 1
Stack = 1
Next_Row = 1
ReDim Alpha(1 To Len_Text)
ReDim Beta(1 To Len_Text)
For j = 1 To Len_Text
    Alpha(j) = Worksheets("Sheet2").Cells(j + 1, 1)
    Beta(j) = Worksheets("Sheet2").Cells(j + 1, 4)
Next j
Worksheets("Sheet4").Range("A1:B65536").Clear
For i = 2 To Len_Text
    Str_Len = i
    ReDim Temp_Result(1 To Str_Len)
    ReDim Temp_Stack(1 To Str_Len)
    AddCombination Len_Text, Str_Len
Next i
End Sub

Sub SaveStack(Set_Member, Str_Len As Integer)
    For i = 1 To Str_Len
        Temp_Result(i) = Alpha(Set_Member(i))
        Temp_Stack(i) = Beta(Set_Member(i))
    Next i
    If (Application.WorksheetFunction.sum(Temp_Stack) = Stack_Sum) Then
        Crt_Text = Join(Temp_Result, "")
        Len_Char = Len(Crt_Text)
        For i = 1 To Len_Char
            Crt_Char = InStr(2, Crt_Text, Left(Crt_Text, 1))
            If (Crt_Char > 1) Then
                GoTo End_Loop
            End If
            Crt_Text = Right(Crt_Text, Len(Crt_Text) - 1)
        Next i
        Worksheets("Sheet4").Cells(Next_Row + 1, 1) = Join(Temp_Result, ",")
        Next_Row = Next_Row + 1
    End If
End_Loop:
End Sub 
```

这段代码我们在表 1 上有高度和重量的框，表 2 应该提供所有选项，表 3 是限制，表 4 是最终选项。这个执行时间很长。我想减少这个，有人可以帮我吗？

如果您需要更多信息，请给我留言！

* * *

编辑

这是另一个代码，这比上面的代码更受欢迎吗？这是我上一个问题的结果。我只是想了解哪个更适合我使用。为了减少我的执行时间并朝着上面解释的最终结果宏前进，对齐所有可能的选项。

```
Function stackBox()
    Dim ws As Worksheet
    Dim width As Long
    Dim height As Long
    Dim numOfBox As Long
    Dim optionsA() As Variant
    Dim results() As Variant
    Dim str As String
    Dim outputArray As Variant
    Dim i As Long, j As Long
    Dim currentSymbol As String
    '------------------------------------new part----------------------------------------------
    Dim maxHeight As Double
    Dim maxWeight As Double
    Dim heightarray As Variant
    Dim weightarray As Variant
    Dim totalHeight As Double
    Dim totalWeight As Double
    '------------------------------------new part----------------------------------------------

    Set ws = Worksheets("Sheet1")
    With ws
        'clear last time's output
        height = .Cells(.Rows.Count, 1).End(xlUp).row
        If height > 3 Then
            .Range(.Cells(4, 1), .Cells(height, 1)).ClearContents
        End If

        numOfBox = .Cells(1, 1).Value
        width = .Cells(1, .Columns.Count).End(xlToLeft).Column
        If width < 2 Then
            MsgBox "Error: There's no item, please fill your item in Cell B1,C1,..."
            Exit Function
        End If

        '------------------------------------new part----------------------------------------------
        maxHeight = .Cells(2, 1).Value
        maxWeight = .Cells(3, 1).Value
        ReDim heightarray(1 To 1, 1 To width - 1)
        ReDim weightarray(1 To 1, 1 To width - 1)
        heightarray = .Range(.Cells(2, 2), .Cells(2, width)).Value
        weightarray = .Range(.Cells(3, 2), .Cells(3, width)).Value
        '------------------------------------new part----------------------------------------------

        ReDim optionsA(0 To width - 2)
        For i = 0 To width - 2
            optionsA(i) = .Cells(1, i + 2).Value
        Next i

        GenerateCombinations optionsA, results, numOfBox

        ' copy the result to sheet only once
        ReDim outputArray(1 To UBound(results, 1) - LBound(results, 1) + 1, 1 To 1)
        Count = 0
        For i = LBound(results, 1) To UBound(results, 1)
            If Not IsEmpty(results(i)) Then
                'rowNum = rowNum + 1
                str = ""
                totalHeight = 0#
                totalWeight = 0#
                For j = LBound(results(i), 1) To UBound(results(i), 1)
                    currentSymbol = results(i)(j)

                    str = str & currentSymbol 'results(i)(j) is the SYMBOL e.g. A, B, C

                    'look up box's height and weight , increment the totalHeight/totalWeight
                    updateParam currentSymbol, optionsA, heightarray, weightarray, totalHeight, totalWeight

                Next j
                If totalHeight < maxHeight And totalWeight < maxWeight Then
                    Count = Count + 1
                    outputArray(Count, 1) = str
                End If

            '.Cells(rowNum, 1).Value = str
            End If
        Next i
        .Range(.Cells(4, 1), .Cells(UBound(outputArray, 1) + 3, 1)).Value = outputArray
    End With

End Function

Sub updateParam(ByRef targetSymbol As String, ByRef symbolArray As Variant, ByRef heightarray As Variant, ByRef weightarray As Variant, ByRef totalHeight As Double, ByRef totalWeight As Double)
Dim i As Long
Dim index As Long
index = -1
For i = LBound(symbolArray, 1) To UBound(symbolArray, 1)
    If targetSymbol = symbolArray(i) Then
        index = i
        Exit For
    End If
Next i

If index <> -1 Then
    totalHeight = totalHeight + heightarray(1, index + 1)
    totalWeight = totalWeight + weightarray(1, index + 1)
End If
End Sub

Sub GenerateCombinations(ByRef AllFields() As Variant, _
                                             ByRef Result() As Variant, ByVal numOfBox As Long)

  Dim InxResultCrnt As Integer
  Dim InxField As Integer
  Dim InxResult As Integer
  Dim i As Integer
  Dim NumFields As Integer
  Dim Powers() As Integer
  Dim ResultCrnt() As String

  NumFields = UBound(AllFields) - LBound(AllFields) + 1

  ReDim Result(0 To 2 ^ NumFields - 2)  ' one entry per combination
  ReDim Powers(0 To NumFields - 1)          ' one entry per field name

  ' Generate powers used for extracting bits from InxResult
  For InxField = 0 To NumFields - 1
    Powers(InxField) = 2 ^ InxField
  Next

 For InxResult = 0 To 2 ^ NumFields - 2
    ' Size ResultCrnt to the max number of fields per combination
    ' Build this loop's combination in ResultCrnt

    ReDim ResultCrnt(0 To NumFields - 1)
    InxResultCrnt = -1
    For InxField = 0 To NumFields - 1
      If ((InxResult + 1) And Powers(InxField)) <> 0 Then
        ' This field required in this combination
        InxResultCrnt = InxResultCrnt + 1
        ResultCrnt(InxResultCrnt) = AllFields(InxField)
      End If
    Next

    If InxResultCrnt = 0 Then
        Debug.Print "testing"
    End If
    'additional logic here
    If InxResultCrnt >= numOfBox Then
        Result(InxResult) = Empty

    Else
         ' Discard unused trailing entries
        ReDim Preserve ResultCrnt(0 To InxResultCrnt)
        ' Store this loop's combination in return array
        Result(InxResult) = ResultCrnt
    End If

  Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:17:09.030

为了满足您减少执行时间的愿望，请应用这些简单的原则作为开始

1.  不要在循环内引用工作表。有许多替代方案，包括
    1.  将范围复制到 a`variant array`然后循环遍历数组
    2.  使用`Find`、`AutoFilter`或`SpecialCells`来限制所需的引用数量。
2.  不要`ReDim`在循环内排列数组，或者至少限制你做的次数。

    1.  如果可能，在循环之前计算所需的大小，或者
    2.  `Dim`到大尺寸，比如 100 或 1000，`Redim`一旦使用该尺寸。 `Redim`循环后到最终的实际大小。

这两种技术将产生最大的影响。其他也可以提供帮助的包括：

1.  `Dim` *你所有*的变量（`Option Explicit`用来强迫自己这样做）
2.  `Variant`除非有特殊需要，否则 不要使用数据类型。
3.  使用`Long`而不是`Integer`
4.  与其重复引用`Worksheets`集合，不如将一个变量贴`Set`到所需的工作表上，然后在其他代码中使用它。特别是当这些工作表在循环内被引用时。

    ```
    Dim ws as Worksheet
    Set ws = Worksheets("Sheet2")
    ....
    ws.Range(...)
    ws.Cells(...) etc 
    ```

5.  使用`Range`参考格式`.Range(.Cells(r1, c1), .Cells(r2, c2))`而不是`.Range("StringRange")`

# java - 使用 ajax 在检票口中添加下拉选择的工具提示

> ID：13151978
> 
> 赞同：3
> 
> 时间：2012-10-31T05:51:58.047
> 
> 标签：java, ajax, wicket

我正在使用 Wicket 和 ajax 框架。下拉菜单通过检票口填充`onchnage`，下拉菜单通过`ajax`.
当用户从下拉列表中选择值时，我想`title`在下拉列表中添加动态。
代码如下：

```
DropDownChoice attrDDC = new DropDownChoice("dropDownField", 
    new PropertyModel(this, "modelObject"), 
    entityList, 
    new ChoiceRenderer(element.getEntity().getNameField()));
attrDDC.setNullValid(true);
attrDDC.add(new AjaxFormComponentUpdatingBehavior("onchange") {

    @Override
    protected void onUpdate(AjaxRequestTarget target) {
        if (getModelObject() != null)
            nodeAttribute.setIdCodeValue(getModelObject().getId());
        else
            nodeAttribute.setIdCodeValue(null);
        // thisDDC.add(new AttributeAppender("onmouseover", 
                new Model("Tip('" + ((WorkflowRules)getModelObject()).getRuleName() + "');"), ";"));
        // thisDDC.add(new AttributeModifier("title", true, new Model(((WorkflowRules)getModelObject()).getRuleName())));
        if (elmntIdDDCMap != null && elmntIdDDCMap.containsKey(thisElmnt.getId()))
        {
            List<DropDownChoicePanel> ddcPanelList = elmntIdDDCMap.get(thisElmnt.getId());
            for (DropDownChoicePanel ddcPanel : ddcPanelList)
            {
                ddcPanel.setEntityList(attributesList);
                target.addComponent(ddcPanel.getThisDDC());
            }
        }

    }

});
add(attrDDC);
thisDDC = attrDDC; 
```

**PS：**注释行是我尝试过的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:40:21.127

我认为你应该用“jQuery”重新标记你的问题。如果您使用的是 Wicket 6.xx，那么您实际上已经在使用 jQuery 了；）

Wicket 基本上是一个服务器端框架。您想要做的是客户端问题。我认为 Wicket 内部没有解决方案。但是使用 jQuery 很容易解决它，并且 Wicket 可以很好地与 jQuery 配合使用。

例如，请参阅那些解决方案如何使用 jQuery 向下拉列表项添加工具提示：http:
[//integrant.com/2010/07/23/how-to-add-a-tooltip-to-dropdownlist-items/](http://integrant.com/2010/07/23/how-to-add-a-tooltip-to-dropdownlist-items/)
[jquery tooltip从下拉选择值显示全文](https://stackoverflow.com/q/8817511/1448704)

塞巴斯蒂安

# java - 将 ImageIcon 添加到 NetBeans 中的 jbutton 时出现空指针异常

> ID：13151979
> 
> 赞同：10
> 
> 时间：2012-10-31T05:51:59.163
> 
> 标签：java, swing, jbutton, imageicon

使用 NetBeans 将 ImageIcon 添加到按钮属性。

```
 print.setFont(new java.awt.Font("Serif", 0, 14)); 
    print.setIcon(new javax.swing.ImageIcon(getClass().getResource("/project/print.gif"))); 
    print.setMnemonic('P');
    print.setText("Print");
    print.setToolTipText("Print"); 
```

编译时显示

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:205)
    at project.Editor.initComponents(Editor.java:296) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T06:20:54.240

您收到 NullPointerException 的原因是由于某种原因无法找到您尝试指定的图像文件。所以该`getResource()`方法返回一个空值。

首先，您可以在此链接中阅读有关添加图标的信息：[“如何使用图标”](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

他们建议的方法之一是创建一个方法：

```
/** Returns an ImageIcon, or null if the path was invalid. */
protected ImageIcon createImageIcon(String path,
                                           String description) {
    java.net.URL imgURL = getClass().getResource(path);
    if (imgURL != null) {
        return new ImageIcon(imgURL, description);
    } else {
        System.err.println("Couldn't find file: " + path);
        return null;
    }
} 
```

使用此方法的优点是，*除了作为一种实用方法，您可以在添加图标时多次使用之外*，它还会在图像无法位于指定路径的情况下向您显示错误。

我强烈怀疑这与您提供的路径有关。看看文件夹结构会很好。尝试将路径作为“project/print.gif”传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-18T15:52:09.873

表达方式`getClass().getResource("/project/print.gif")`调用方法 getClass （间接继承自类 Object ）以检索对表示“编辑器类”（您的类）声明的 Class 对象的引用。然后使用该引用调用 Class 方法 getResource，该方法将图像的位置作为 URL 返回。ImageIcon 构造函数使用 URL 来定位图像，然后将其加载到内存中。JVM 使用类加载器将类声明加载到内存中。类加载器知道它加载的每个类在磁盘上的位置。方法 getResource 使用 Class 对象的类加载器来确定资源的位置，例如图像文件。因此，您会收到 NullPointerException，并且图像文件必须存储在与“Editor.class”文件相同的位置。

因此，您应该将“print.gif”文件移动到“/projectName/bin/packageName”文件夹并尝试

`print.setIcon(new javax.swing.ImageIcon(getClass().getResource("print.gif")));`

代替

`print.setIcon(new javax.swing.ImageIcon(getClass().getResource("/project/print.gif")));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T17:05:54.177

这是由于图像文件不在指定目录中的原因。您可能以某种方式输入了错误的名称或名称已更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-30T10:00:23.747

解决方案：您需要在资源结构中添加图像文件夹，如下所示 src/main/resources/Images/youricon.jpg[检查此图像](https://i.stack.imgur.com/ryBB2.jpg)

# visual-studio-2010 - 不支持 SQL 项目类型

> ID：13151984
> 
> 赞同：6
> 
> 时间：2012-10-31T05:53:07.960
> 
> 标签：visual-studio-2010

当我尝试打开解决方案时收到此消息，所有项目都已正确加载，除了一个（.sqlproj）。我已经安装了 VS2010 SP1、Sql Server-2008 R2 SP1、MVC3、VS2010 SP1 Tools for SQL Server Compact 4.0 ENU

![在此处输入图像描述](../Images/342b4e665475f2289f62dd149f34c459.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:13:24.180

.sqlproj 是 SSDT (Sql Server Data Tools) 使用的项目文件的扩展名

因此，您需要从 SQL Server 2012 DVD 或 Web 平台安装 SSDT

[http://msdn.microsoft.com/en-us/data/tools.aspx](http://msdn.microsoft.com/en-us/data/tools.aspx)

如果您只需要数据库支持而不支持 SSAS 、 SSIS 和 SSRS 。较新版本的 VS（肯定是 2013 版）默认包含此功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T19:21:23.790

通过 Web 平台安装程序安装“SQL Server Data Tools **2010 ”解决。**我遇到了完全相同的错误，看不出 VS2012 与任何事情有什么关系——在我正在处理的任何项目中，与 2012 年没有任何关系。SSDT 是关键，但您需要相应版本的 Visual Studio 的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T11:01:50.880

这个问题在安装 VS-2012 时得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T18:19:30.680

我已经安装了VS2010。然后，我安装了 VS 2012 并开始无法打开 .sqlproj 文件。然后我从[http://msdn.microsoft.com/en-us/jj650014下载](http://msdn.microsoft.com/en-us/jj650014)**了适用于 Visual Studio 2010 的 SQL Server Data Tools，**并在 VS2010 中再次工作。

# verilog - Verilog中的算术右移

> ID：13151991
> 
> 赞同：0
> 
> 时间：2012-10-31T05:53:42.377
> 
> 标签：verilog, bit-shift, xilinx

作为处理器设计的一部分，我正在使用 Verilog 实现一个简单的行为右移器。

移位器输入一个 32 位变量，并根据变量（输入）选择输出右逻辑移位或右算术移位。

以下是代码：

```
 module ShiftRight(
  input signed[31:0] inp,
  input [31:0] shamt,
  output [31:0] out,
  input choice
  );

  assign out = (choice)? (inp>>>shamt):(inp>>shamt);

 endmodule 
```

这会导致正确的行为实现，但会在综合过程中发出以下警告：

```
Unit ShiftRight : the following signal(s) form a combinatorial loop: out_shift0000<31>. 
```

（括号中的系数基本上是 inp 的最重要位，在我的例子中是 31）。所以我想知道这是否与 inp bein 签名有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T21:52:46.780

我猜你的合成器一想到必须将向量算术移位 2^32 位（4,294,967,296）就爆炸了，并且在它的内部 RTL 到门合成中，它最终以循环循环结束。

既然我猜你不需要移动 40 亿位，也许你可以为你的移动量使用一个合理的数字？

# linux - shell中的数字文件名匹配

> ID：13151994
> 
> 赞同：0
> 
> 时间：2012-10-31T05:53:49.947
> 
> 标签：linux, shell

我有一堆文件，例如：

```
0000
0100
0200
0300
0400
0500
0600
0700
0800
0900
1000
1100
1200
1300
1400 
```

如果我指定输入8，如何匹配0800以下的文件？我在ubnutu上使用shell。

**更新**

对不起，也许我不清楚。

我有一个命令，它有一个用于指定一堆输入的参数，例如 tt***.txt 或 rrr???.txt。我想要的是指定那些低于 0800 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:05:45.527

使用 awk：

```
awk -v x=8 'BEGIN{x=sprintf("%04d",x*100);}$1<x' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:23:53.253

```
n=8
printf -v filename "%02d00" $n   # 0800
param='????'
for f in $param; do
    [[ $f > $filename ]] && continue
    # do something with $f
    echo $f
done 
```

唯一的条件是注意将文件名与目标文件进行字符串比较，而不是数字比较——默认情况下，“0800”和“0900”将被视为八进制，当然它们是无效的八进制数。如果要使用数字比较，请注意指定基数：

> `(( 10#$f > 10#$filename )) && continue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T06:26:42.147

Bash（假设这里是其他名称的文件）

```
c=0;
for file in [0-9][0-9][0-9][0-9];
    do 
       if [[ $file> 0800 ]];
       then 
           ((c++));
       fi;
     done;
echo $c; 
```

如果这里有超过 4 位数的文件，则使用`for file in [0-9][0-9][0-9][0-9]*;`（它也可以获取 0000aaaa 之类的文件：（）

# java - 从标准 apache ssl 证书生成 java 密钥库（用于码头）

> ID：13151996
> 
> 赞同：0
> 
> 时间：2012-10-31T05:54:00.777
> 
> 标签：java, apache, ssl, keystore

从 Apache2 的 mod_ssl 我有以下工作的配置文件：

```
 SSLCertificateFile      x (certificate)
 SSLCertificateKeyFile   y (rsa private key)
 SSLCertificateChainFile z.crt 
```

从这些文件中，我想生成一个 Java 密钥库，可以将其传递给码头进行 SSL。我做了很多阅读，但我对我在这里实际拥有的内容以及将这些文件转换为密钥库所需的步骤感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:04:24.890

您不能直接将私钥导入密钥库。但是您可以使用 openssl 将密钥和证书转换为 pkcs#12 存储。`-importkeystore`然后，您可以通过使用 option和 option将整个 pkcs#12 导入到默认的 java 密钥库中`-srcstoretype pkcs12`。

（您也可以通过提供 storetype 'pkcs12' 直接使用 pkcs12 存储）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T14:44:25.070

假设您想使用别名“domain.com”将密钥和证书存储在密钥库中，您可以使用以下命令完成工作：

```
keytool -keystore keystore.jks -import -alias root -file z.crt -trustcacerts 
```

这将导入您的根证书（或链文件）。然后你可以导入你的证书：

```
keytool -keystore keystore.jks -import -alias domain.com -file x -trustcacerts 
```

最后，您使用 openssl 工具将私钥转换为 pkcs12，并将其导入密钥库。

```
openssl pkcs12 -export -in x -inkey y -out domain.pkcs12
keytool -importkeystore -srckeystore domain.pkcs12 -srcstoretype PKCS12 -destkeystore domain.com 
```

# php - 您如何使用两个数据库列作为 ion auth（codeigniter 库）中的身份？

> ID：13151998
> 
> 赞同：0
> 
> 时间：2012-10-31T05:54:28.133
> 
> 标签：php, codeigniter, authentication, identity, ion-auth

Ion Auth 允许您选择一个身份，该身份基本上是用于登录的数据库列。我希望能够在 Ion Auth 中为我的身份选择两个数据库列，因为我希望用户使用他们的用户名或电子邮件登录，类似于 Twitter 的工作方式。我该怎么做呢？以下是我要完成的示例代码：

```
<?php
$config['identity'] = 'email && username'; // A database column which is used to login with ion auth
?> 
```

如您所见，我想要用户名和电子邮件，但我不知道如何在配置中添加两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-29T00:51:01.133

在`ion_auth_model.php`登录方法中，在此代码之后：

```
$query = $this->db->select($this->identity_column . ', username, email, id, password, active, last_login')
      ->where($this->identity_column, $identity)
      ->limit(1)
      ->order_by('id', 'desc')
      ->get($this->tables['users']); 
```

添加以下代码：

```
if($query->num_rows() == 0){
    $query = $this->db->select($this->identity_column . ', username, email, id, password, active, last_login')
          ->where('username', $this->db->escape_str($identity))
          ->limit(1)
          ->get($this->tables['users']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:32:02.107

您必须修改库的核心才能实现这一点。如果您不知道该怎么做，请向 Ben Edmunds 寻求帮助，我相信他会知道的。