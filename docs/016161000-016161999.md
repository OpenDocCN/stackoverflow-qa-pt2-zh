# StackOverflow 问答 16161000-16161999

# c# - 将对象向下转换为“类型”变量中指定的类型

> ID：16161001
> 
> 赞同：0
> 
> 时间：2013-04-23T04:30:51.237
> 
> 标签：c#, reflection

参考下面的代码：

```
Void Work(object obj,Type objType)
{
   //code to downcast obj to type speciied in objType
} 
```

我是 C# 中的反射的新手。如果有人能指导我如何将 obj 转换为 objType 中指定的类型，我将不胜感激。是可能的，还是我的方法是错误的？

参考 Casting [a variable using a Type variable](https://stackoverflow.com/questions/972636/casting-a-variable-using-a-type-variable)，

```
public T CastExamp1<T>(object input) 
{   
   return (T) input;   
} 
```

可能是一个可能的解决方案，但我如何将 objType 变量中的类型传递给？

# c++ - 内存管理：数组和使用 new 运算符的动态分配

> ID：16161004
> 
> 赞同：0
> 
> 时间：2013-04-23T04:30:52.107
> 
> 标签：c++, memory-management, memory-leaks, assignment-operator

内存管理：数组和使用 new 运算符的动态分配

Q. 在内存管理方面，会发生什么错误？

```
class String
{
public:
 String(const char right[]);
 String& operator= (const String& right);
 int length() const;
private:
 char* buffer;
 int len;
}

int String::length() const {return len;}

String::String(const char right[])
{
 len = 0;
 while (right[len] != '\0')
   len++;
 buffer = new char[len+1];
 for (int i = 0; i < len; i++)
   buffer[i] = right[i];
 buffer[len] = '\0';
}

String& String::operator= (const String& right)
{
 if (this != &right)
  { 
    delete[] buffer;
    len = right.length();
    char* buffer = new char[len + 1];
    for (int i = 0; i < len; i++)
      buffer[i] = right[i];
    buffer[len] = '\0';
  }
  return *this;
} 
```

回答。我不知道...你能帮帮我吗？这个好像也还行。新的，它也被删除。内存泄漏在哪里？

请告诉我。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:34:31.677

您需要提供一个分配指针成员的构造函数（实际上*您的类的所有构造函数都应该这样做*）和释放它的析构函数。

此外，您需要提供一个复制构造函数来执行指针成员的深层复制。

```
String::String(const String& obj)
{
   ....
} 
```

好读：
[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

此外，`String`对于一个类来说，这是一个糟糕的名字，特别是因为存在一个`std::string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:38:37.380

[规则三](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)：如果一个类定义了析构函数或复制构造函数或复制赋值运算符，它可能必须定义所有这三个。

您的代码违反了此规则，因为在提供复制赋值运算符时未提供析构函数和复制构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:23:23.177

当您的 String 对象被销毁时，将调用默认构造函数，因为您没有定义一个。默认析构函数不会为您删除 [] 您的 char 数组，您必须声明并定义一个析构函数来执行此操作。

此外，您会发现使用 strcpy()/strncpy() 比复制每个字符的简单循环要快得多。（至少在使用 GCC 编译时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T08:45:07.703

您的代码有 4 个问题。

1.  您的赋值运算符具有以下行：`char* buffer = new char[len + 1];`这是声明一个新的指针变量，而不是使用类成员。这会将内存分配给一个指针，然后超出范围并且永远不能被删除，并且将是内存泄漏并使您的类无法运行。
2.  缺少析构函数意味着您的类会泄漏内存。您的析构函数负责释放您分配的内存`new[]`。
3.  缺少复制构造函数意味着您的 String 类不能在许多情况下使用，包括在 STL 容器中。STL 容器要求类型具有公共复制构造函数、赋值运算符和析构函数。
4.  面对异常，您没有强制执行您的类不变量。目标是使您的类[异常安全](http://en.wikipedia.org/wiki/Exception_safety)。在我所做的更改中，我试图实现强大的异常保证并在面对异常时保留类状态。考虑异常安全是创建自己的类的一个重要方面——尤其是像 String 这样的库类。

这是尝试修复所有这些问题的代码。为了保持代码简短，我将实现放入类中而不是分离它。当然，在实际代码中你应该使用 std::string。

```
class String
{
public:
    String() : len(0), buffer(nullptr)
    {}

    String(const char right[]) : len(0), buffer(nullptr)
    {
        if(!right)
            return;

        int temp_len = strlen(right);
        buffer = new char[temp_len+1];
        len = temp_len; // only set the length after the allocation succeeds
        strcpy(buffer, right);
    }

    // a copy constructor is essential for this class
    String(const String& right) : len(0), buffer(nullptr)
    {
        String temp(right.buffer);
        swap(temp);
    }

    // must have a destructor to avoid leaks
    ~String()
    {
        if(buffer) // only delete if it has been allocated
            delete[] buffer;
    }

    String& operator= (const String& right)
    {
        String temp(right.buffer);
        swap(temp);
        return *this;
    }

    int length() const
    {
        return len;
    }
private:
    void swap(String& rhs)
    {
        std::swap(buffer, rhs.buffer);
        std::swap(len, rhs.len);
    }
    char* buffer;
    int len;
}; 
```

# asp.net - 在 ASP.NET 中使用 DELEGATES 在两个网页之间进行通信

> ID：16161010
> 
> 赞同：0
> 
> 时间：2013-04-23T04:31:59.190
> 
> 标签：asp.net

我被要求在 Asp.Net 中的两个网页之间显式地使用委托进行通信。

# ios - 如何使用 iOS 应用程序中的按钮打开网页？

> ID：16161011
> 
> 赞同：0
> 
> 时间：2013-04-23T04:32:12.987
> 
> 标签：ios, objective-c

我正在尝试通过将 URL 链接到按钮来从 DashboardViewController 打开网页。我有以下代码：

```
- (IBAction)facebook:(id)sender {
    [[DashboardViewController sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com"]];
} 
```

但是，这会引发错误：

```
[DashboardViewController sharedApplication]: unrecognized selector sent to class 0xaba8
2013-04-22 23:23:35.264 LoginScreen[37692:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[DashboardViewController sharedApplication]: unrecognized selector sent to class 0xaba8' 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:38:01.580

这是您问题的已解决答案-

1.  [按下按钮从应用程序打开网页](https://stackoverflow.com/questions/1240372/press-button-to-open-web-page-from-app)

2.  [在 iOS 应用程序中打开网页](https://stackoverflow.com/questions/8120417/open-web-page-inside-ios-application)

使用 UIWebView，您可以将其作为子视图添加到任何其他视图，然后使用您的 URL 调用 loadRequest。

# ios - segue.identifier isEqualToString:@"segue1" 始终为空。IOS 6.1 故事板

> ID：16161012
> 
> 赞同：0
> 
> 时间：2013-04-23T04:32:20.173
> 
> 标签：ios, xcode, ios6, storyboard, segue

我不明白为什么我的 segue.identifier 总是返回 null。我在 Storboard 中设置了 segue 标识符。

视图控制器1

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     NSLog(@"prepared %@",segue.identifier);
     if([[segue identifier] isEqualToString:@"segue1"] ){
     NSLog(@"segue is equal to 1");
     }
 } 
```

视图控制器2

```
- (IBAction)unwindFromSegue:(UIStoryboardSegue *)segue {

    NSLog(@"unwinded %@",segue.identifier);
} 
```

日志消息始终为空，因此 if 语句永远不会为真。有什么想法为什么我无法获得标识符？

编辑：

我做了一个全新的测试项目。这是一个带有 ViewController 和 SecondViewController 的单视图应用程序。在情节提要中，我从 View Controller 中的一个按钮到 SecondViewController 建立了一个弹出框 segue 连接，并将 segue 标识符设置为 segue1。

在 SecondViewController 上，我制作了一个后退按钮并将其连接到我的 ViewController 中的 unwindFromSegue。我还在 SecondViewController 中添加了 prepareForSegue。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
- (IBAction)unwindFromSegue:(UIStoryboardSegue *)segue {
NSLog(@"unwinded %@",segue.identifier);
}
@end 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)
 nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
//was just testing unwindFromSegue here. Didn't mean to post here, 
//but I will keep it in with an answer referring to it
//- (IBAction)unwindFromSegue:(UIStoryboardSegue *)segue{
//NSLog(@"unwind in second %@",segue.identifier);
//}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
NSLog(@"prepare %@",segue.identifier);

}

@end 
```

希望这可以帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:35:23.057

当您在情节提要中设置 segue 时，您还必须为其分配一个标识符。在你的情况下“segue1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:33:16.263

为什么在 SecondViewController 中有一个 unwindFromSegue: 方法？您没有展开到该控制器，它与 ViewController 中的名称相同。那可能是你的问题。把那个拿出来看看能不能解决问题。

# c - 由于结构，for循环中的分段错误？

> ID：16161014
> 
> 赞同：0
> 
> 时间：2013-04-23T04:32:28.333
> 
> 标签：c, arrays, struct, segmentation-fault, typedef

我有一个已经可以工作的程序，现在必须将使用的 4 个数组更改为 1 个，所以我使用了 typedef 结构并创建了一个名为 stuff 的数据类型。然后制作了一组数据类型的东西，称为一切。一切都包含四个数组：

```
typedef struct structure
{
char names[13][9];
int scores[13][4];
float average[13];
char letter[13];
} stuff; 
```

稍后在程序中，fopen 是这样调用的：

```
FILE *student, *score;
student = fopen("student.dat", "r");
score = fopen("scores.dat", "r"); 
```

之后使用 fscanf ：

```
for(i=0; i<13; i++)
{
    for(j=0; j<4; j++)
    {
    fscanf(score, "%d", everything[i].scores[i][j]);
    }
}
fclose(score); 
```

完成整个程序后，我不断收到分段错误，并且不确定它来自哪里，所以我注释掉了所有内容并逐个取消注释，以查看分段错误开始发生的位置。它开始再次出现在这里，我不知道为什么。我该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:36:18.670

你在这行有错误`fscanf(score, "%d", everything[i].scores[i][j]);`。

最好用这个

`fscanf(score, "%d", &everything[i].scores[i][j]);`. 你忘`&`了这一行。您必须告诉`mem address`存储扫描值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:39:37.767

据我所知，问题是所有内容都不包含 13 个结构实例，因此当它试图通过 for 循环时，它无法在内存中找到存储数据的相关位置。

# ruby-on-rails - rails 3中的link_to_remote属性/参数

> ID：16161015
> 
> 赞同：1
> 
> 时间：2013-04-23T04:32:28.740
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, unobtrusive-javascript, rails-3-upgrade

我正在尝试从 rails 2.3 升级到 3.0，我发现`link_to_remote`在 rails 2 中应该更改为`link_to`in rails 3 with `:remote => true`attribute。

和不显眼的javascript（UJS）`:before, :loading, :failure, :update`

但我也有一些属性，比如`:url, :href, :title` **我应该如何改变它**？

这是我正在尝试升级的 rails 2.3 代码

```
 <%= link_to_remote column.label,
  { :url => sort_params,
    :before => "addActiveScaffoldPageToHistory('#{href}', '#{controller_id}')",
    :loading => "Element.addClassName('#{column_header_id}','loading');",
    :failure => "ActiveScaffold.report_500_response('#{active_scaffold_id}')",
    :update => active_scaffold_content_id,
    :method => :get },
  { :href => href ,
   :title => column.header_info}%> 
```

我分析了很多网站和 Rails 文档，但没有具体说明这些属性`link_to`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:55:02.953

您可以在 Rails 3 中将回调绑定到远程链接，其余属性可以作为选项分配。

```
link_to column.label,
  sort_params,
  remote: true,
  title: column_header.info,
  id: 'my_remote_link',
  data: {
    href: href,
    controller_id: controller_id,
    column_header_id: column_header_id,
    active_scaffold_id: active_scaffold_id
  } 
```

我们将使用回调的数据属性。

```
$('#my_remote_link').bind('ajax:beforeSend, function() {
  addActiveScaffoldPageToHistory($('#my_remote_link').data('href'), $('#my_remote_link').data('controller_id'));
}); 
```

有关不同 ajaxEvents 的描述，请参阅[http://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)。

# java - JLayeredPane 中的顶层未显示

> ID：16161021
> 
> 赞同：0
> 
> 时间：2013-04-23T04:33:17.140
> 
> 标签：java, swing, jpanel, jlayeredpane

我正在尝试创建一个面板，该面板使用 JLayeredPane 使面板居中于另一个更大的面板之上。我似乎无法让较小的面板显示。关于我做错了什么的任何想法？

```
import java.awt.Dimension;

import javax.swing.BoxLayout;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;

public class MainPanel extends JPanel {
private JLayeredPane pane;
private AllPlayersPanel players; //Larger panel, uses circleLayout
private GamePanel game; //Smaller panel, simple BorderLayout

public MainPanel(){
    super();
    setSize(900, 900);
    setLayout(new BoxLayout(this,  BoxLayout.PAGE_AXIS));       

    pane = new JLayeredPane();
    pane.setPreferredSize(new Dimension(900, 900));     

    players = new AllPlayersPanel();
    players.setPreferredSize(players.getPreferredSize());
    players.setLocation(0,0);
    //players.setOpaque(false);
    pane.add(players, new Integer(0));

    game = new GamePanel();
    game.setPreferredSize(game.getPreferredSize());
    game.setLocation(385, 405);
    //game.setOpaque(false);        
    pane.add(game, new Integer(2));

    add(pane);
}

public static void main(String[] args) {
    JFrame frame = new JFrame();
    JComponent newPane = new MainPanel();
    newPane.setOpaque(true);
    frame.setContentPane(newPane);
    frame.pack();
    frame.setVisible(true);
}

} 
```

我已经尝试了所有我能想到的 .setOpaque() 组合。

CircleLayout 可以在[这里找到](http://www.java2s.com/Tutorial/Java/0240__Swing/CircleLayout.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:47:36.520

基本上，你在`setSize`不应该和`preferredSize`不需要的时候使用......

例如。

在`MainPanel`您调用的构造函数中，`setSize(900, 900);`当您应该覆盖`getPreferredSize`您要添加到`JLayeredPane`您正在调用的面板`setPreferredSize`但`JLayeredPane`没有用于检查此值的布局管理器时，这些面板的大小保持为 0x0。

此外，我不确定您希望从调用中获得什么`players.setPreferredSize(players.getPreferredSize());`，这基本上会将首选大小设置为 0x0 ：P

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.BoxLayout;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class MainPanel extends JPanel {

    private JLayeredPane pane;
    private JPanel players; //Larger panel, uses circleLayout
    private JPanel game; //Smaller panel, simple BorderLayout

    public MainPanel() {
        super();
//        setSize(900, 900);
//        setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
        setLayout(new BorderLayout());

        pane = new JLayeredPane();
//        pane.setPreferredSize(new Dimension(900, 900));
        pane.setBorder(new LineBorder(Color.RED));

        players = new JPanel();
        players.setBackground(Color.RED);
        players.setSize(getPreferredSize());
        players.setLocation(0, 0);
        //players.setOpaque(false);
        pane.add(players, new Integer(0));

        game = new JPanel();
        game.setSize(game.getPreferredSize());
        game.setBackground(Color.BLUE);
        game.setLocation(385, 405);
        //game.setOpaque(false);        
        pane.add(game, new Integer(2));

        add(pane);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(900, 900);
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JComponent newPane = new MainPanel();
        newPane.setOpaque(true);
        frame.setContentPane(newPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# c++ - C++ 数据验证无法正常工作和 PDB 错误？

> ID：16161024
> 
> 赞同：0
> 
> 时间：2013-04-23T04:33:31.843
> 
> 标签：c++, runtime-error, validation, pdb

晚上大家。

我有一个计划，该计划旨在提供票价，并让父母和儿童筹款活动来打折机票。该程序很简单，但我还应该进行数据验证，以确保用户只输入 20、25 或 30 作为票价。否则，该程序有机会重新进入。但是，当我运行程序时，无论我输入什么，它都会返回一个错误，即使它是正确的数字。另外，如果我碰巧注释掉循环，它运行良好，但会自行关闭并说：

```
'High School Dance.exe': Loaded 'C:\Users\Shaidi\Documents\Visual Studio 2010\Projects\High School Dance\Debug\High School Dance.exe', Symbols loaded.
'High School Dance.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'High School Dance.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'High School Dance.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'High School Dance.exe': Loaded 'C:\ProgramData\Norton\{0C55C096-0F1D-4F28-AAA2-85EF591126E7}\NIS_20.2.0.19\Definitions\BASHDefs\20130412.001\UMEngx86.dll', Cannot find or open the PDB file
'High School Dance.exe': Loaded 'C:\Windows\SysWOW64\msvcp100d.dll', Symbols loaded.
'High School Dance.exe': Loaded 'C:\Windows\SysWOW64\msvcr100d.dll', Symbols loaded.
The thread 'Win32 Thread' (0xa5c) has exited with code -1073741510 (0xc000013a).
The thread 'Win32 Thread' (0x304c) has exited with code -1073741510 (0xc000013a).
The program '[10896] High School Dance.exe: Native' has exited with code -1073741510 (0xc000013a). 
```

任何人都可以帮忙吗？这是程序：

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>

using namespace std;

//Prototypes
void studentTicket (void);
void parentFund(void);
void childFund(void);
void totalCosts(void);
void displayTotal (void);
void highestCost (void);
void process (void);

//Global Variables
double ticketPrice, candySold, magsSold, parentDiscount = 0, studentDiscount = 0,     schoolCost = 0;

int main(void)
{
    process();
    return 0;
}

void process(void){
    studentTicket();
    parentFund();
    childFund();
}

void studentTicket(void){
    double ticketPrice;
    cout << "How much does the ticket cost?" <<endl;
    cin >> ticketPrice;

    cout << endl;

    while (ticketPrice != 20 || ticketPrice != 25 || ticketPrice != 30){
        cout << "Invalid amount. A ticket can only cost $20, $25, or $30\. Please re-enter a valid amount: " <<endl;
        cin >> ticketPrice;
    }

}

void parentFund(void){

    cout << "How many magazines did the parent sell?" <<endl;
    cin >> magsSold;

    if (magsSold >= 0 && magsSold <= 9){
        parentDiscount = 0;
    } else if (magsSold >= 10 && magsSold <= 15){
        parentDiscount = ticketPrice * .05;
    } else if (magsSold >= 16 && magsSold <= 30){
        parentDiscount = ticketPrice * .15;
    } else if (magsSold >= 31 && magsSold <= 49){
        parentDiscount = ticketPrice * .30;
    } else if (magsSold >= 50){
        parentDiscount = ticketPrice * .50;
    } else {
        cout << "The value entered in invalid." << endl;
    }
    cout <<endl;
    cout << "****************************************************************" <<endl;
    totalCosts();
    cout << "****************************************************************" <<endl;
}

void childFund(void){

    string studentName;
    cout << endl;
    cout << "****************************************************************" <<endl;

    cout << "Enter the student name: " <<endl;
    cin >> studentName;

    cout << endl;
    cout << "How many candies did " <<studentName << " sell?" <<endl;
    cin >> candySold;

    if (candySold > 50){
        studentDiscount = (candySold - 50) * .25;
        studentDiscount += candySold * 15;
    } else  if (candySold >= 1 && candySold <= 50){
        studentDiscount = candySold * .15;
    } else {
        cout << "The number entered is invalid. Please try again." <<endl;
    }
    cout << "****************************************************************" <<endl;
    cout << endl;
    cout << "****************************************************************" <<endl;
    totalCosts();
    cout << "****************************************************************" <<endl;
}

void totalCosts (void){
    schoolCost = studentDiscount + parentDiscount;
    cout << "Parent Cost: " << ticketPrice - parentDiscount << endl;
    cout << "Student Cost: " << ticketPrice - studentDiscount << endl;
    cout << "School Cost: " << schoolCost << endl;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:47:23.607

```
while (ticketPrice != 20 || ticketPrice != 25 || ticketPrice != 30){
    cout << "Invalid amount. A ticket can only cost $20, $25, or $30\. Please re-enter a valid amount: " <<endl;
    cin >> ticketPrice;
} 
```

无论票价是多少，这些条款中至少有两个是正确的。如果是 20，则不是 30。如果是 25，则不是 20。因此，这三个中至少有两个将始终为真，因此整个 OR 子句将始终为真。所以你的代码是一样的：

```
while (true){
    cout << "Invalid amount. A ticket can only cost $20, $25, or $30\. Please re-enter a valid amount: " <<endl;
    cin >> ticketPrice;
} 
```

显然你永远无法退出这个`while`循环。

# javascript - 创建一个无限的页面内容循环

> ID：16161025
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:33:39.713
> 
> 标签：javascript, ajax, jquery

我正在尝试创建一个加载时执行以下操作的（笑话）网站：

1.  开始以 x 速度向底部滚动
2.  不断加载相同的内容并将其附加到页面底部
3.  连续滚动超过额外加载的内容，而不会停止

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:37:48.283

从理论上讲，您可以使用 javascript 来跟踪 div，因为它滚动到它的 y 位置，并使用 jQuery 加载相同的 data/html/php 到每 N 个像素附加的子 div 中。

我想我得试一试，看看我能想出什么。

这是我想出的，似乎在基本水平上有效

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        function keepGoing(counter) {
            var objTo = document.getElementById('foreverDiv')
            var divtest = document.createElement("moreStuffDiv" + counter);
            divtest.setAttribute("id", "moreStuffDiv" + counter);
            divtest.innerHTML = "new div " + counter + "<br>";
            objTo.appendChild(divtest);
            document.getElementById('moreStuffDiv' + counter).scrollIntoView();
            counter = counter +1;
        }
        jQuery(document).ready( function() {
            setInterval( 'keepGoing(1)', 10 );
        });
    </script>
    <div id="contentDiv">
        <h1>Content</h1>
        <div id="foreverDiv">

        </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:10:07.910

**注意事项：**

1.  这里的诀窍是不要在动画函数上使用默认的摆动缓动来使动画无缝。

2.  此外，您不能[简单地动画到页面底部](https://stackoverflow.com/q/1890995/584192)，而是动画到当前滚动顶部的下一步。

**jQuery：**

```
$(function() {
    // every 1 seconds, check + update
    setInterval(appendContent, 800);
    setInterval(continueScrolling, 1000);
});

var b = $('body');

// if almost at bottom, append more content
function appendContent() {
    if($(window).scrollTop() + $(window).height()*2 > $(document).height()) {

        // Load/append your new content here.
        // I am doubling the content for demostration purposes.
        b.html(b.html() + b.html());
    }    
}

// continue scrolling linearly
function continueScrolling() {

    // get current scroll position
    y = $(window).scrollTop();

    // stop previous animation, animate to the next 1000 pixels
    // to make it scroll faster, increase the constant after the y
    $("html, body").stop()
    .animate({ scrollTop: y+1000 }, {
        duration: 1000, // you won't want to scroll too quickly
        easing: 'linear', // cannot use the default 'swing' here
        queue: false
    });
} 
```

**演示：**

`[***SEE LIVE DEMO***](http://jsfiddle.net/samliew/JRbpG/)`

# c++ - 旅行商的递归动态规划方法

> ID：16161026
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:33:44.157
> 
> 标签：c++, algorithm, recursion, dynamic-programming

我希望有人能解释这个页面上的代码是如何工作的：[TSP-Recursive](https://gist.github.com/KuoE0/3872341#file-gt-tsp-dp-cpp-L16)

伪代码难以解释，动态编程方法使其特别难以理解。为什么需要移位？如何推广这种方法（例如，给定位置坐标，我们能否采用这种方法来解决该问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:27:18.477

该变量`graph`是一个映射（在数学意义上）。给定两个城市，A 和 B，`graph[A][B]`是从 A 到 B 的距离。

变量`dp`是另一个映射。给定一*组城市* **S**和一个城市 A，是访问**S**中每个城市并在 A 结束`dp[S][A]`的最短旅程。

 **一旦`graph`填写完毕并选择了最终城市，该函数`init`将填写 中的一些距离`dp`：对于每个城市 A，从 A 开始并仅访问 B 的最短路程显然只是`graph[A][B]`。

该函数给出了访问**S**`TSP( S, X )`中的每个城市并在 X 结束的最短旅程的长度。如果该距离已在 中列出，则返回该距离。否则，对于 S 中的每个城市 A **，**计算访问**S中的每个***其他*城市的最短旅程的长度，然后是 A，然后是 X。其中最短的是答案，因此该函数将其记录并返回它。**`dp`*****`dp`*******

 ******** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:17:29.700

位移是因为代码使用 int 来表示一个集合，特别是访问城市的集合。如果您有 32 位整数，则一个 int 可以表示一组最多 32 个项目。

基本操作是

```
// add n to set
set |= 1 << n;

// remove n from set
set &= ~(1 << n);

// test set for n
if ((set&(1 << n)) != 0)
    ... 
```*********

# jquery - 动态禁用 Jquery 插件/功能

> ID：16161029
> 
> 赞同：2
> 
> 时间：2013-04-23T04:34:13.583
> 
> 标签：jquery, responsive-design, slideshow, responsive-slides

所以我在网站上有一个幻灯片，当窗口大小是移动时，我想只打开一个列表。我在想是否有办法禁用 jquery 插件或窗口调整大小的功能以禁用滑动并为幻灯片列表创建移动样式。

您认为最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:10:49.977

使用带有`teardown()`or`destroy()`方法的幻灯片，该方法能够删除它创建的任何元素和事件侦听器。

任何使用 jQuery UI 小部件工厂的 jQuery 插件都会有这个，但不幸的是许多其他插件没有。你可以试试这个轮播[https://github.com/richardscarrott/jquery-ui-carousel](https://github.com/richardscarrott/jquery-ui-carousel)，一定要包含 jQuery 小部件工厂：http: [//jqueryui.com/widget/](http://jqueryui.com/widget/)

其次，不要试图嗅探设备是否是移动设备，不要停留在设备方面的思考。如果用户想在手机上查看轮播怎么办？如果他们的设备被错误地解释为移动设备怎么办？做出假设可能会反过来咬你。检测特征和属性更安全，应该更适合未来。

想想您要解决的问题，如果它是“如果在小视口上以列表的形式呈现此幻灯片效果会更好”，然后继续检查窗口的大小或`matchMedia()`在实例化插件之前测试媒体查询（为什么做所有的工作只是为了再次撤消它）如果视口调整大小或设备方向发生变化，则再次撤消。

在纯 JS（以及相对最新的浏览器）中，可能类似于：

```
var slideshowControl = function(element, breakpoint) {

    var api;

    var initSlideshow = function() {
        api = new Slideshow(element);
    };

    var removeSlideshow = function() {
        api.teardown();
        api = undefined;
    };

    // Test media query
    return function() {

        // Test if match media is available
        var matchMedia = window.matchMedia || window.msMatchMedia;

        if ( ! matchMedia) {
            return;
        }

        if (matchMedia('all and (max-width:' + breakpoint + ')').matches && ! api) {
            return initSlideshow();
        }

        if (matchMedia('all and (min-width:' + breakpoint + ')').matches && api) {
            return removeSlideshow();
        }
    };

}(document.querySelector('.slideshow'), 640);

window.addEventListener('resize', slideshowControl);
window.addEventListener('DOMContentLoaded', slideshowControl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:44:25.100

在调用插件之前检查窗口大小。例如：

```
height = $(window).height();
width = $(window).width();
if(height > 300 || width > 200) {
  // Initialize plugin
} 
```

或者，如果您想启动它，然后在窗口变得太小时停止它（假设插件将有办法自行禁用）：

```
$(window).resize(function() {
  height = $(window).height();
  width = $(window).width();
  if(height < 300 || width < 200) {
    // Stop plugin
  }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T04:39:42.990

检查请求是否来自 $_SERVER['HTTP_USER_AGENT'] 并​​检查 user_agent 是移动浏览器还是使用插件来完成这部分。

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

如果请求来自手机，那么。重定向到您的移动页面。

# android - 为什么 Touch 在谷歌地图 v2 上不起作用？

> ID：16161031
> 
> 赞同：2
> 
> 时间：2013-04-23T04:34:33.200
> 
> 标签：android, google-maps-android-api-2

我正在研究谷歌地图 v2。

我需要在地图触摸上做一些事情，但我无法获得 Google Maps v2 的触摸监听器。

我正在膨胀包含片段 XML 的 XML。

我的代码如下：

```
 public class MapViewHelper {

    private FragmentActivity objactivity;
    public GoogleMap myMap=null;

    public MapViewHelper(FragmentActivity objactivity) {
        this.objactivity = objactivity;
    }

    /*
     * @return view of map
     * 
     * @author Sandeep Tiwari
     */
    public View getMapView() {
        View objView = View.inflate(objactivity, R.layout.homemapview, null);
        return objView;
    }

    public GoogleMap getMap()
    {
        if (myMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            myMap = ((SupportMapFragment)this.objactivity.getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
    }
        return myMap;
    }

       public class MySupportMapFragment extends SupportMapFragment {
        public View mOriginalContentView;
        public TouchableWrapper mTouchView;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup parent,
                Bundle savedInstanceState) {
            mOriginalContentView = super.onCreateView(inflater, parent,
                    savedInstanceState);
            mTouchView = new TouchableWrapper(getActivity());
            mTouchView.addView(mOriginalContentView);
            return mTouchView;
        }

        @Override
        public View getView() {
            return mOriginalContentView;
        }
    }

  public class TouchableWrapper extends FrameLayout {

    public TouchableWrapper(Context context) {
        super(context);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            ((MainActivity) objactivity).MotionDown(ev);
            break;

            case MotionEvent.ACTION_POINTER_DOWN:
                ((MainActivity) objactivity).MotionPointerDown(ev);
                break;

            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                ((MainActivity)objactivity).MotionUp(ev);
                break;

            case MotionEvent.ACTION_MOVE:
                ((MainActivity)objactivity).ActionMove(ev);
                break;

            }
            return super.dispatchTouchEvent(ev);
        }
    }
} 
```

这是我在其中膨胀 xml 的 java 类：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

     <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"
        />

</RelativeLayout> 
```

但是当我触摸地图放大缩小地图时，没有任何动作可以指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:24:11.173

我将我的 xml 更改为：-

```
 <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.fd.viewhelper.MapViewHelper"
        /> 
```

这里 com.fd.viewhelper.MapViewHelper 是扩展 SupportMapFragment 并覆盖其方法的类名，这里运行该类的代码：-

```
package com.fd.viewhelper;

public class MapViewHelper extends SupportMapFragment {

    private FragmentActivity objactivity;
    public GoogleMap myMap = null;
    private FlashDeaOverlay itemizedoverlay;
    private List<GroupDealModle> objgroupdeallist;
    private ArrayList<FlashDeaOverlay> objflashdealoverlay = new ArrayList<FlashDeaOverlay>();
    private Bitmap objbitmap;
    private double lat = 0, lng = 0;
    private Context objcontext;

    public MapViewHelper()
    {
    }
    public MapViewHelper(FragmentActivity objactivity) {
        this.objactivity = objactivity;
    }

    /*
     * @return view of map
     * 
     * @author Sandeep Tiwari
     */
    public View getMapView() {
        View objView = View.inflate(objactivity, R.layout.homemapview, null);
        return objView;
    }

    public GoogleMap InstantiateMapView() {
        if (myMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            myMap = ((SupportMapFragment) this.objactivity
                    .getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
        }
        return myMap;
    }

    public View mOriginalContentView;
    public TouchableWrapper mTouchView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent,
            Bundle savedInstanceState) {
        mOriginalContentView = super.onCreateView(inflater, parent,
                savedInstanceState);
        mTouchView = new TouchableWrapper(getActivity());
        mTouchView.addView(mOriginalContentView);
        return mTouchView;
    }

    @Override
    public View getView() {
        return mOriginalContentView;
    }

    public class TouchableWrapper extends FrameLayout {

        public TouchableWrapper(Context context) {
            super(context);
            objcontext = context;
        }

        @Override
        public boolean dispatchTouchEvent(MotionEvent ev) {
            switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                ((MainActivity) objcontext).MotionDown(ev);
                break;

            case MotionEvent.ACTION_POINTER_DOWN:
                ((MainActivity) objcontext).MotionPointerDown(ev);
                break;

            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                ((MainActivity) objcontext).MotionUp(ev);
                break;

            case MotionEvent.ACTION_MOVE:
                ((MainActivity) objcontext).ActionMove(ev);
                break;

            }
            return super.dispatchTouchEvent(ev);
        }
    }

    // Map Activity must implement this interface
    public interface UpdateMapAfterUserInterection {
        public void onUpdateMapAfterUserInterection();
    }
} 
```

# objective-c - 获取 NSArray JSON 值

> ID：16161033
> 
> 赞同：0
> 
> 时间：2013-04-23T04:34:35.997
> 
> 标签：objective-c, json, cocoa-touch

我正在使用 JSON 加速器 ( [http://nerdery.com/json-accelerator](http://nerdery.com/json-accelerator) ) 将 JSON 字符串解析为 obj-c 类。

但是，我在获取 JSON NSArray 值时遇到了问题。

这是 JSON 字符串值：

```
{
    "status": {
        "code": 200,
        "description": "OK"
    },
    "message": "",
    "data": {
        "app_id": 1,
        "name": "metrodummy",
        "description": "dummies are dummies",
        "website": "metrofy.com",
        "twitter": "twittwat",
        "facebook": "faceycace",
        "homepage": {
            "homepage_id": 1,
            "background": "bg",
            "icon": "homepageico",
            "image_position": "Top",
            "image_position_param": "value;",
            "image_position_value": "Top;",
            "text": "lalilulala",
            "text_position": "Left Top",
            "text_position_param": "value;",
            "text_position_value": "LeftTop;",
            "text_color": "green",
            "layout": {
                "layout_id": 0,
                "layout_name": null,
                "layout_thumbnail": null,
                "layout_code": "codecode",
                "device_type": "iOS",
                "layout_template": null
            }
        },
        "app_design": {
            "application_design_id": 1,
            "icon": "ico",
            "background": "bg",
            "splash_screen": "splashy",
            "primary_font": "Courier New",
            "primary_font_param": "",
            "primary_font_value": "",
            "secondary_font": "Verdana",
            "secondary_font_param": "",
            "secondary_font_value": "",
            "layout": {
                "layout_id": 0,
                "layout_name": null,
                "layout_thumbnail": null,
                "layout_code": "codecode",
                "device_type": "iOS",
                "layout_template": null
            }
        },
        "components": [
            {
                "component_id": 1,
                "name": "berita nyos",
                "background": "bg",
                "icon": "ico",
                "image_position": "Top",
                "image_position_param": "value;",
                "image_position_value": "Top;",
                "enable_facebook": true,
                "enable_email": true,
                "enable_twitter": true,
                "enable_like": true,
                "enable_rate": true,
                "enable_comment": true,
                "endpoint_api": "api",
                "layout": {
                    "layout_id": 0,
                    "layout_name": null,
                    "layout_thumbnail": null,
                    "layout_code": "codecode",
                    "device_type": "iOS",
                    "layout_template": null
                }
            },
            {
                "component_id": 2,
                "name": "berita lama",
                "background": "bg",
                "icon": "ico",
                "image_position": "Top",
                "image_position_param": "value;",
                "image_position_value": "Top;",
                "enable_facebook": true,
                "enable_email": true,
                "enable_twitter": true,
                "enable_like": true,
                "enable_rate": true,
                "enable_comment": true,
                "endpoint_api": "api",
                "layout": {
                    "layout_id": 0,
                    "layout_name": null,
                    "layout_thumbnail": null,
                    "layout_code": "codecode",
                    "device_type": "iOS",
                    "layout_template": null
                }
            },
            {
                "component_id": 5,
                "name": "product component",
                "background": "bg",
                "icon": "ico",
                "image_position": "Top",
                "image_position_param": "value;",
                "image_position_value": "Top;",
                "enable_facebook": true,
                "enable_email": true,
                "enable_twitter": true,
                "enable_like": true,
                "enable_rate": true,
                "enable_comment": true,
                "endpoint_api": "api",
                "layout": {
                    "layout_id": 0,
                    "layout_name": null,
                    "layout_thumbnail": null,
                    "layout_code": "codecode",
                    "device_type": "iOS",
                    "layout_template": null
                }
            }
        ],
        "is_current": true,
        "is_published": false
    }
} 
```

当我想访问“component_id”值（在“components”数组中）时，使用这行代码：

```
NSDictionary *jsonContent = [NSJSONSerialization JSONObjectWithData:response options:0 error:&jsonParsingError];

MTJsonBaseModel *baseClass = [MTJsonBaseModel modelObjectWithDictionary:jsonContent];

NSArray *dataComponents = [NSArray arrayWithArray:baseClass.data.components];

[[self.dataComponents objectAtIndex:0] valueForKey:@"component_id"] 
```

它只是得到一个错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<MTComponentsModel 0x7566c20> valueForUndefinedKey:]: this class is not key value coding-compliant for the key component_id.' 
```

我是否已经正确使用“valueForKey:”访问 JSON 数组值？为什么我收到错误消息，但是当我将 'valueForKey:' 值更改为：@"icon" 或 @"background" 时，它就可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:38:16.893

```
NSDictionary *jsonContent = [NSJSONSerialization JSONObjectWithData:response options:0 error:&jsonParsingError];
NSArray *arr = [[jsonContent objectForKey:@"data"] objectForKey:@"components"];

// To read array Components
[arr enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop){
    NSLog(@"%@",[object valueForKey:@"component_id"]);
}]; 
```

# java - Java：如何从 String 创建一个类的列表

> ID：16161034
> 
> 赞同：4
> 
> 时间：2013-04-23T04:34:36.240
> 
> 标签：java, class, reflection

我想创建一个从字符串中键入类名称的列表。例如，

```
String nameOfClass = "com.my.list.class";
List list = new ArrayList<nameOfclass>(); 
```

我只知道要在运行时以文本格式插入 List 的类的类型。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T04:36:10.870

不。

泛型类型注释仅在编译时发生，它们会从运行时中删除。当程序执行时，ArrayList 不知道它的泛型类型。

因此，类型注释只对编译器有用。如果您在编译时（程序设计时）不知道类型，那么您将无法使用它们。

# javascript - javascript：如何删除最后一个条目？

> ID：16161037
> 
> 赞同：0
> 
> 时间：2013-04-23T04:35:09.220
> 
> 标签：javascript

假设我有以下 JS 代码，我只能在收到不可接受的字符时删除整个字符：

```
function checkInput() {
    document.getElementById("message").setAttribute('maxlength', (456));
    for (var i = 0; i < document.fr_upload.message.value.length; i++) {
        if (!checkLatin(document.fr_upload.message.value)) {
            alert("Your entry does not contain latin type.\n Please try again.")
            document.fr_upload.message.value = '';
            document.fr_upload.char_left.value = 0;
            return false;

        }
    }
}

function checkLatin(arg) {
    var latin = /^[\u0020-\u007E]*$/;
    if (arg.match(latin)) {
        return true;
    } else {
        return false;
    }
} 
```

因此，我怎样才能只删除不可接受的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:07:21.507

尝试

```
function checkInput() {
    document.getElementById("message").setAttribute('maxlength', (456));

    var value = document.fr_upload.message.value;
    if (value && !/[^\u0020-\u007E]/.test(value)) {
        alert("Your entry contains non latin characters.\n Please try again.");
        document.fr_upload.message.value = value.replace(
                /[^\u0020-\u007E]/g, '');
        document.fr_upload.char_left.value = document.fr_upload.message.value.length;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:17:24.833

要替换非拉丁字符，您可以使用：

```
function removeNonLatin(arg) {
    var nonlatin = /!(^[\u0020-\u007E]*$)/g;
    arg = arg.replace(nonlatin , '');
    return arg;
} 
```

# android - Android：使用 redirect_uri 调用 httpget

> ID：16161040
> 
> 赞同：0
> 
> 时间：2013-04-23T04:35:25.400
> 
> 标签：android, facebook, redirect, uri

我想通过android应用程序发出httpget请求，

```
 URL = https://www.facebook.com/dialog/oauth?client_id=<number>&redirect_uri=<SOME_URL>&scope=email 
```

上面的 URL 在浏览器上运行良好，它在服务器端给了我正确的结果，但是当我从应用程序进行 http 调用时它不起作用，得到 200 响应，但它不会给我结果。

代码片段：

```
 HttpParams httpParams = new BasicHttpParams();
    httpParams.setParameter(CoreProtocolPNames.PROTOCOL_VERSION,                        HttpVersion.HTTP_1_1);
   HttpConnectionParams.setConnectionTimeout(httpParams,
                            CONN_TIMEOUT);
    HttpGet httpGet = new HttpGet(URL);
    Log.d(TAG,"URL :"+ httpGet.getURI().toURL().toString());            
    DefaultHttpClient client = new DefaultHttpClient(httpParams);

    HttpResponse httpResponse = client.execute(httpGet);            

    //Log.d(TAG,"httpResponse :" +EntityUtils.toString(httpResponse.getEntity()));
    res = httpResponse.getStatusLine().getStatusCode();
    Log.d(TAG, "Response : " + res); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:51:01.553

这是因为

```
200 response code "OK"
The request has succeeded. The information returned with the response is dependent on the method used in the request,if there is some result request code will 204 
```

# php - 分页链接在第二页-codeigniter 上消失

> ID：16161041
> 
> 赞同：0
> 
> 时间：2013-04-23T04:35:27.663
> 
> 标签：php, codeigniter, pagination

大家好。我的 Codeigniter 项目中有分页问题。我正在使用分页库，并且有一个搜索表单。当我搜索某些内容时，结果会显示在页面上。当结果行超过限制时，我会显示分页链接。但是当我点击 2 号链接转到第二页时，分页链接消失了。我的搜索代码如下...

控制器功能：

```
function search_branch()
{
                   $this->load->library('pagination');
        $search_this=$this->input->post('inputsearchbranch');

        $limit = 20;
        $data['fields'] = array(
            'branch_name' => 'Branch Name',
            'city'=>'City',
            'district'=>'District',
            'tahsil'=>'Tahsil',
            'Branch_manager'=>'Branch Manager'
                );

        $this->load->model('mod_user');
        $searchbranch=$this->mod_user->search_branch($search_this,$limit);
        $data['searchbranch'] = $searchbranch;

        $config = array();
        $config['base_url'] = site_url("ctl_home/search_branch/");
        $config['total_rows'] = count($searchbranch);
        $config['per_page'] = $limit;
        $config['uri_segment'] = 3;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();

        $this->load->view('view_searchbranch',$data);
} 
```

我的观点：

```
<center>
    <form class="userinfo" action="" method="post">
        //table in which search record display
    </form>
</center>
    <?php if (strlen($pagination)): ?>
<div class="pagination">
    <?php echo $pagination; ?>
</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:41:16.933

尝试更改`"$config['uri_segment'] = 3;"`为`$config['uri_segment'] = 5`;

你用有限的记录来计算总数。总计数值将与所有记录一起计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:41:20.330

```
 function search_branch()
{
        $this->load->library('pagination');
        $search_this=$this->input->post('inputsearchbranch');

        $limit = 20;
        $data['fields'] = array(
            'branch_name' => 'Branch Name',
            'city'=>'City',
            'district'=>'District',
            'tahsil'=>'Tahsil',
            'Branch_manager'=>'Branch Manager'
                );

        $this->load->model('mod_user');
        $searchbranch=$this->mod_user->search_branch($search_this,false);
        $config['total_rows'] = count($searchbranch);

        $searchbranch=$this->mod_user->search_branch($search_this,$limit);
        $data['searchbranch'] = $searchbranch;

        $config = array();
        $config['base_url'] = site_url("ctl_home/search_branch/");

        $config['per_page'] = $limit;
        $config['uri_segment'] = 3;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();

        $this->load->view('view_searchbranch',$data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:56:14.127

& 也使用

```
$offset = $this->uri->segment(4); 
```

向 search_branch 函数添加新参数并将其传递给 db..

```
$searchbranch=$this->mod_user->search_branch($search_this,$limit,$offset); 
```

示例函数($where,$limit,$offset)

```
 $this->db->where($where);
$query = $this->db->get('mytable', $limit, $offset); 
```

# java - 如何使用 Java 的 Comparable 比较树中的通用对象？

> ID：16161046
> 
> 赞同：2
> 
> 时间：2013-04-23T04:35:47.750
> 
> 标签：java, comparable, compareto

现在我正在尝试做一个涉及创建一个可以接收任何通用对象的堆的分配，并且节点可以通过实现 Comparable 接口来相互比较。问题是，我找不到像这样比较通用对象的方法。

到目前为止，这是我对 Node 类所做的：

```
private class Node<E> implements Comparable<E>
{
    private E data;
    private Node left;
    private Node right;

    //constructors
    public Node(E data)
    {
        this.data = data;
        left = null;
        right = null;
    }

    public Node(E data, Node left, Node right)
    {
        this.data = data;
        this.left = left;
        this.right = right;
    }

   //returns current data
    public Object getData()
    {
        return this.data;
    }

    public int compareTo(E other)
    {
        return data.compareTo(other);
    }
} 
```

当我尝试编译时，它显示“找不到符号 - 方法 compareTo(E)”。compareTo() 方法在 Comparable 接口中，所以我不明白为什么会这样，也不知道如何解决。有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T04:47:29.720

您还需要`E`定义`Comparable`：

```
private class Node<E extends Comparable<E>> implements Comparable<E> 
```

此外，让您的 Node 类与自身具有可比性可能更有意义：

```
private class Node<E extends Comparable<E>> implements Comparable<Node<E>>
...
public int compareTo(Node<E> other)
{
    return data.compareTo(other.data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:50:40.320

好的，你的代码有几件事：

```
// E needs to be restricted to the Comparable interface
// Also, You probably mean for Nodes to be comparable with each other
public class Node<E extends Comparable<E>> implements Comparable<Node<E>>
{
    private E data;
    // Remember to specify your generic parameter in references to Node as well!
    private Node<E> left;
    private Node<E> right;

    //constructors
    public Node(E data)
    {
        this.data = data;
        left = null;
        right = null;
    }

    public Node(E data, Node<E> left, Node<E> right)
    {
        this.data = data;
        this.left = left;
        this.right = right;
    }

    //returns current data
    // This should return your E generic type, not Object.
    public E getData()
    {
        return this.data;
    }

    // This now compares to a Node.
    public int compareTo(Node<E> other)
    {
        return data.compareTo(other.getData());
    }
} 
```

# ios - IOS - 如何在属性列表中加载数组

> ID：16161047
> 
> 赞同：-3
> 
> 时间：2013-04-23T04:35:59.953
> 
> 标签：ios, nsmutablearray, nsarray, plist

从 plist 加载数据的大多数示例是字典。但是我在一级数据中有一个带有数组的 plist，例如：

```
<plist version="1.0">
<array>
....
....
....
</array>
</plist> 
```

我的问题是如何将数据加载到 NSMutableArray 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:39:24.220

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Level1" ofType:@"plist"];
    NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:02:44.963

```
NSString *pListPath = [[NSBundle mainBundle] pathForResource:@"plistName" ofType:@"plist"];
NSMutableArray *contentArray = [[NSMutableArray alloc] initWithContentsOfFile:pListPath]; 
```

# c - c语言计算机计算能力的上限

> ID：16161056
> 
> 赞同：0
> 
> 时间：2013-04-23T04:36:48.850
> 
> 标签：c, windows, compiler-construction, operating-system

我对计算机通常用于计算的字节数有疑问。首先，我想让你看看下面的源代码。

**源代码**

```
printf("%d\n", sizeof(444444444));
printf("%d\n", 444444444);

printf("%d\n", sizeof(4444444444));
printf("%llu\n", 4444444444); 
```

**输出**

```
4
444444444
8
4444444444 
```

如您所见，计算机永远不会失去价值。如果它太大而无法放入 int 中，计算机本身会自动扩展它的类型。我认为计算机永远不会失去价值的原因是因为它最初是在至少比 8 位容器大的大型类型上运行的。

大佬能告诉我整体机制吗？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:40:11.823

**这与“计算机的计算能力”无关。**

您的示例与您在编译阶段处理的整数文字的大小有关。`int`在*大多数*平台上， an是四个字节（32 位）。它的最大值为 0x7FFF_FFFF 或 2147483647。An 的`unsigned int`最大值为 0xFFFF_FFFF 或 4294967295。

对于大多数整数文字，编译器通常会默认`int`为（与 4 字节示例一样）。您的下一个值是 0x1_08e8_d71c 这对于 来说太大了`int`，因此文字被提升为 8 字节文字，`long long`.

这可能是对大多数编译器的警告。

GCC，（在 32 位模式下，`-m32`）给出以下警告，因为`long`只有 4 个字节：

> 警告：整数常量对于 'long' 类型来说太大了

输出

> `sizeof(int)=4, sizeof(long)=4, sizeof(long long)=8`

然而，在 64 位模式下， ( `-m64`) GCC 很酷，因为它`long`是 8 字节。

> `sizeof(int)=4, sizeof(long)=8, sizeof(long long)=8`

为了解决这个问题，您应该使用`LL`后缀：

```
long long val = 4444444444LL; 
```

*   [C/C++ 中的 long long](https://stackoverflow.com/questions/1458923/long-long-in-c-c)

# paypal - 我们如何在贝宝定期付款中传递送货地址？

> ID：16161057
> 
> 赞同：1
> 
> 时间：2013-04-23T04:37:00.273
> 
> 标签：paypal, payment, recurring

我在 Paypal 中使用直接付款进行定期付款。我们如何传递收货地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:49:30.580

尝试将地址传递给送货地址字段：

```
SHIPTONAME     
SHIPTOSTREET
SHIPTOSTREET2
SHIPTOCITY
SHIPTOSTATE
SHIPTOZIP
SHIPTOCOUNTRYCODE
SHIPTOPHONENUM 
```

例如如下：

```
SHIPTONAME=mr+alexSHIPTOSTREET=berlin+street&SHIPTOSTREET2=highway+no+43&SHIPTOCITY=newyork&SHIPTOSTATE=AL&SHIPTOZIP=12603&SHIPTOCOUNTRY=US&SHIPTOPHONENUM=1111111111 
```

您可以查看：
[Payments Pro - 直接付款 - 定期付款](https://www.x.com/developers/paypal/forums/website-payments-pro/payments-pro-direct-payments-recurring-payments)
[Payments Pro - 直接付款 - 定期付款 - IPN](https://www.x.com/developers/paypal/forums/website-payments-pro/payments-pro-direct-payments-recurring-payments-ipn)

# android - 屏幕开/关的广播接收器不起作用

> ID：16161062
> 
> 赞同：7
> 
> 时间：2013-04-23T04:37:30.300
> 
> 标签：android, broadcastreceiver, android-broadcast

我正在尝试使用 BroadcastReceiver 但它不起作用，请帮我解决这个问题。MyReceiver.java

```
package com.example.broadcast_receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Log.i("[BroadcastReceiver]", "MyReceiver");

        if(intent.getAction().equals(Intent.ACTION_SCREEN_ON)){
            Log.i("[BroadcastReceiver]", "Screen ON");
        }
        else if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF)){
            Log.i("[BroadcastReceiver]", "Screen OFF");
        }
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.broadcast_receiver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <receiver android:name=".MyReceiver" 
            android:enabled="true"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.SCREEN_ON"/>
                <action android:name="android.intent.action.SCREEN_OFF"/>
            </intent-filter>
        </receiver>

        <activity
            android:name="com.example.broadcast_receiver.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

BroadcastReceiver 不工作，也没有做任何日志，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T05:24:07.597

嘿尝试使用广播的动态调用，我试过这个它会很好地工作......

```
public class MainActivity extends Activity {

    //Create broadcast object
    BroadcastReceiver mybroadcast = new BroadcastReceiver() {    
        //When Event is published, onReceive method is called
        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            Log.i("[BroadcastReceiver]", "MyReceiver");

            if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
                Log.i("[BroadcastReceiver]", "Screen ON");
            }
            else if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
                Log.i("[BroadcastReceiver]", "Screen OFF");
            }

        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        registerReceiver(mybroadcast, new IntentFilter(Intent.ACTION_SCREEN_ON));
        registerReceiver(mybroadcast, new IntentFilter(Intent.ACTION_SCREEN_OFF));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-15T21:23:42.900

If you want this receiver to be called by the system, you would need to export it. You set exported = "false", change this to true or remove exported entirely and this will start working. Normally this would be insecure, but as both SCREEN_ON and SCREEN_OFF are protected-broadcasts, and you verify the actions, only more trusted system code can send them too you, so it's pretty safe.

Sadly this wont work in this case as the intents broadcast have the following flags: Intent.FLAG_RECEIVER_REGISTERED_ONLY | Intent.FLAG_RECEIVER_FOREGROUND

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T04:57:53.967

您可以尝试获取电池值吗：

```
public class Broadcast extends Activity {
    //Create broadcast object
    BroadcastReceiver mybroadcast = new BroadcastReceiver() {

        //When Event is published, onReceive method is called
        @Override
        public void onReceive(Context context, Intent intent) {
            //Get battery percentage
            int batterylevel = intent.getIntExtra("level", 0);    
            //get progressbar
            ProgressBar myprogressbar = (ProgressBar) findViewById(R.id.progressbar);
            myprogressbar.setProgress(batterylevel);
            TextView tv = (TextView) findViewById(R.id.textfield);
            //Set TextView with text
            tv.setText("Battery Level: " + Integer.toString(batterylevel) + "%");
        }
    });

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_broadcast);   
        registerReceiver(mybroadcast, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    }
} 
```

# c++ - Eclipse Juno CDT：与 C++11 不兼容和调试问题

> ID：16161063
> 
> 赞同：1
> 
> 时间：2013-04-23T04:37:31.743
> 
> 标签：c++, eclipse, c++11, eclipse-cdt, eclipse-juno

从 Indigo 切换后，Ubuntu 12.04 中的最新 Eclipse Juno 面临各种问题。
我在以下位置设置了标志：
项目 -> 属性 -> C/C++ 构建 -> 设置 -> 工具设置 -> 跨 G++ 编译器

*   -> 杂项：`-std=c++11`
*   -> 预处理器：（`__GXX_EXPERIMENTAL_CXX0X__`也在 C/C++ General -> Paths and Symbols 中设置）

目前，我正在编译在 Indigo 中使用 C++03 编译良好的代码。更改为 C++11 后，我确实遇到了一些可能是由于 g++ 扩展引起的错误，我已经修复了它们。

现在这里是我要解决的问题：

1.  如果我切换回正常的 C++ 编译，那么我会收到一个错误： `This file requires compiler and library support for the \ ISO C++ 2011 standard. This support is currently experimental, and must be \ enabled with the -std=c++11 or -std=gnu++11 compiler options.`来自文件`c++0x_warning.h`. 即使使用干净的构建或重新启动 Eclipse，该错误也不会消失。
2.  调试没有按预期工作。执行确实在给定的断点处停止，但是当我将鼠标悬停在变量上时，它不会显示任何值。在 Indigo 中，它曾经展示过它。在 Eclipse 的各种设置中做了很多试验和错误，但没有运气。还检查了 Window -> Preferences -> C/C++ -> Hovers，但无法在那里更改任何内容。
3.  包括`<unrodered_map>`工作正常，但如果 `std::unordered_map<>`使用，那么它开始给出错误。目前，我最不关心这个问题。

如果有人可以建议一个链接或方法来使用 Eclipse (Juno) 进行有效的调试，那么它也将对未来的访问者有很大的帮助。

注意：我在 SO 中提到了几个线程，但它们都没有帮助：
[Eclipse CDT C++11/C++0x support](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)
[Cannot set Eclipse Juno C++ with std=c++11](https://stackoverflow.com/questions/11420336/cannot-set-eclipse-juno-c-with-std-c11)
[Eclipse CDT Juno - Toolchain issue](https://stackoverflow.com/questions/11375823/eclipse-cdt-juno-toolchain-issue)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:19:24.500

首先，我从全新安装开始，作为未来参考，我想展示如何从头开始安装和使用 GCC 和 Eclipse。

首先到Ubuntu软件中心，下载最新版本的GCC，即GCC 4.8。现在，您这样做可能会遇到问题，因此我建议您在`gcc-4.8`尝试查找软件时输入。与 g++ 相同，您输入`g++4.8`即可获得所需的内容。确保您拥有正确的版本。由于 Linux 的开源特性，往往存在很多涉及版本的问题。

-> : 按回车

现在，打开您的终端，然后输入以下内容：

*   `sudo su -`-> 这会给你特殊的root权限。
*   现在它会询问您的密码，输入->
*   ！警告，这部分不要出错，因为root会造成很大的伤害！
*   现在更改您的目录，输入`cd /usr/bin`->
*   输入`ls -l gcc* g++* cpp*`->
*   这将向您显示这些数据类型可用的符号链接
*   输入`ln -s g++-4.8 g++`->
*   输入`rm cpp gcc`->
*   `ln -s gcc-4.8 gcc`->
*   `ln -s cpp-4.8 cpp`->
*   现在`CTRL`+ `D`，两次，这将使您离开终端。

现在，打开eclipse。转到首选项>新建 CDT 向导（或类似的） ![在此处输入图像描述](https://i.stack.imgur.com/31XvA.png) 确保选择了 Linux GCC。使按`Make Toochains preferred`。现在，当您打开一个项目时，请确保您转到项目属性，然后执行以下操作：

*   C/C++ 构建 > 设置 > 杂项。> 在其他标志下添加这个`-std=c++11`。 ![在此处输入图像描述](https://i.stack.imgur.com/Wna9O.png)

*   与 GCC C 编译器相同，但这次，您添加`-std=gnu11`

这应该设置一切。不要使用 Cross GCC，它总是给我带来问题。

# jquery - 在 cakephp 中发布使用 ajax

> ID：16161070
> 
> 赞同：1
> 
> 时间：2013-04-23T04:38:05.523
> 
> 标签：jquery, cakephp, post, cakephp-2.0

```
$(document).ready(function ()
{
    $(".addquestion").unbind('click').click(function(e){
        e.preventDefault();
        alert(1);console.log(this);
        var context = $(this).parent();
        var question = $("#QuestionName",context).val();
        var sid = $("input[name='sid']",context).val();
        var location = $("input[name='Image']",context).val();
        var options = [];
        options[0] = $("input[name='TextOption1']",context).val();
        options[1] = $("input[name='TextOption2']",context).val();
        options[2] = $("input[name='TextOption3']",context).val();
        options[3] = $("input[name='TextOption4']",context).val();
        options[4] = $("input[name='TextOption5']",context).val();
        var answer = $('input:radio[name=Option]:checked').val();
        var data = {"Question":question,"options":options,"answer":answer,"sid":sid,"Location":location}

        alert(JSON.stringify(data));
        var successCallBack= function()
        {
        alert('saved');

        };
        var errorCallBack=function()
        {
        alert('errorCallBack');

        };

        $.ajax({
                url: "questions/add/19",
                contentType: 'application/json',
                dataType: 'json',
                data: data,
                type: "POST",
                success: successCallBack,
                error: errorCallBack
         });

    });
}); 
```

我的控制器中应该有什么。捕获他发布的字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:27:45.467

您可以使用 jquery 提交表单

在这里查看代码

[http://lab.yogeshsaroya.com/submit-form-using-ajax-in-php/](http://lab.yogeshsaroya.com/submit-form-using-ajax-in-php/)

# jsf - 如何显示 facelets 代码

> ID：16161075
> 
> 赞同：0
> 
> 时间：2013-04-23T04:38:45.830
> 
> 标签：jsf, jsf-2, syntax-highlighting

我想展示像 primefaces 展示的代码：http: [//www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf)

我使用[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/whatsnew.html) ，当我在 pre 标记中包含 facelets 文件时，它工作正常。但是当我显示短代码时：`<h:outputtext value="test"/>` 我代码：

```
 <pre class="xml" name="code" ><h:outputtext value="test"/></pre> 
```

它将显示html代码，jsf编译和渲染后的代码。我希望 jsf 不编译为 html 代码。如果我使用 html 特殊字符，则代码似乎更冗长。如何配置或使用更多代码来做到这一点。

**（对不起我的英语不好）**

感谢您的关注 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:41:42.730

您需要将 < 换成 < 和 > 由 >。

在其他情况下，它将被视为 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:24:46.240

直接在 XHTML 模板中编写代码时，如果您打算按原样呈现 XML 实体，则确实需要手动转义它们。

```
<pre class="xml" name="code">&lt;h:outputtext value="test"/&gt;</pre> 
```

难以阅读？也许对于初学者来说，但对于高级者来说不是。

或者，您可以将它们存储在某个`String`位置，如有必要，可以从文本（属性）文件甚至数据库中填充。

```
String code = "<h:outputText value=\"test\" />"; 
```

*（请注意，当您想将其硬编码为 Java 字符串时，您需要转义双引号；当它存储在文本文件或数据库中时，您不需要转义任何内容）*

Facelets 会自动转义它：

```
<pre class="xml" name="code">#{bean.code}</pre> 
```

# python - Flask 没有接收到 HTML POST 的数据

> ID：16161078
> 
> 赞同：2
> 
> 时间：2013-04-23T04:38:51.073
> 
> 标签：python, flask

```
@app.route('/', methods=['GET', 'POST'])
def login():
    if request.method == 'GET':
        if 'USER_TOKEN' in session:
            return make_response(render_template('index.html'))
        return make_response(render_template('login.html'))
    if request.method == 'POST':
        print 'data :', request.form
        return make_response(render_template('index.html')) 
```

我`HTML`的是

```
 <form class="form-horizontal" action="/" method="POST">
    <div class="control-group">
      <label class="control-label" for="email">Email</label>
      <div class="controls">
        <input type="text" id="email" placeholder="Email">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="password">Password</label>
      <div class="controls">
        <input type="password" id="password" placeholder="Password">
      </div>
    </div>
    <div class="control-group">
      <div class="controls">
        <button type="submit" class="btn">Sign In</button>
      </div>
    </div>
  </form> 
```

当我从 HTML 页面提交数据时，我看到

```
data : ImmutableMultiDict([]) 
```

为什么数据丢失？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T04:47:13.390

您缺少字段名称（这是 的键`ImmutableMultiDict`，这就是为什么提交表单时它似乎为空的原因）。

改变

```
<input type="text" id="email" placeholder="Email"> 
```

至

```
<input name="<whatever_email_name>" type="text" id="email" placeholder="Email"> 
```

和

```
<input type="password" id="password" placeholder="Password"> 
```

至

```
<input name="<whatever_password_name>" type="password" id="password" placeholder="Password"> 
```

# php - 离线fb发布不起作用

> ID：16161079
> 
> 赞同：0
> 
> 时间：2013-04-23T04:38:56.600
> 
> 标签：php, facebook, offlineapps

当他离线时，我必须在用户墙上发帖。我查看了发布的数量并检查了下面编写的代码似乎没问题，也没有抛出错误并成功完成，但我无法在用户墙上看到发布。请帮忙。

```
$facebook = new Facebook(
                array(
                   'appId'  => "446262598768110",
                   'secret' => "<REMOVED>",
                )
            );

 $facebook->setAccessToken("<REMOVED>");
//create message with token gained before
echo " lets try posting";

$access_token = $facebook->getAccessToken();
$user_id = $facebook->getUser();
echo "\ndone3..... $access_token.-----.$user_id.----new\n";

$post = array(
           'message' => 'This message is posted with access token - ' . date('Y-m-d H:i:s')
        );

//and make the request
$res = $facebook->api("/me/feed", 'GET', $post); //have tried both Post and Get method but result remain same 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:05:14.863

离线访问在几个月前就被删除了。此外，每次您想要发布某些内容时，您都必须“发布”到 Facebook 图表。

没有看到 facebook 图表的结果，根本不可能帮助你。

尽管如此：请仔细检查您是否使用了正确的访问令牌。您必须自己扩展短期访问令牌（[https://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)），以便访问令牌本身在您要发布时仍然有效计划任务。

如果您尝试使用应用访问令牌发帖，则根本不能使用“/me/feed”。

# python - 在 Python 中将字符串转换为浮点数

> ID：16161082
> 
> 赞同：3
> 
> 时间：2013-04-23T04:39:26.310
> 
> 标签：python, string, floating-point

我有一个 csv 文件，我正在尝试绘制一些内容，并且需要将字符串转换为浮点数。我的问题如下：

当我运行下面的代码时，

```
with open('meteors.csv', 'rU') as csvfile:
    reader=csv.reader(csvfile)
    for row in reader:    
        print row[6] 
```

我得到这个输出：

```
58.58333 
```

当我尝试

```
print type(row[6]) 
```

我得到这个输出：

```
<type 'str'> 
```

但是当我尝试

```
 print float(row[6]) 
```

我收到此错误：

```
ValueError: could not convert string to float: coordinate_1 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:46:11.260

您很可能会看到第一行，它在 CSV 文件中有列标题，并且`coordinate_1`是标题。

您可以跳过第一行：

```
with open('meteors.csv', 'rU') as csvfile:
    reader=csv.reader(csvfile)
    reader.next() # skips the first (header) row
    for row in reader:    
        print row[6] 
```

或者，使用[`DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader)，像这样：

```
with open('meteors.csv', 'rU') as csvfile:
    reader=csv.DictReader(csvfile)
    for row in reader:    
        print row['coordinate_1'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:44:07.460

您的 CSV 文件可能有一个标题，其中列出了每列的名称。您无法将这些名称转换为`float`s，因此这就是您的错误的来源。

您必须先使用标头：

```
with open('meteors.csv', 'rU') as csvfile:
    reader = csv.reader(csvfile)
    header = next(reader)

    for row in reader:
        print float(row[6]) 
```

# java - 以编程方式添加后无法从 JPanel 中删除 JLabel

> ID：16161083
> 
> 赞同：2
> 
> 时间：2013-04-23T04:39:27.357
> 
> 标签：java, swing, jpanel, jlabel

我有一个名为 LMSPanel 的类，它**扩展了 JPanel**。这个类有以下两个方法：

```
/**
 * A method to add an informative temporary label to the Panel until
 * the second Sensor is added.
 * 
 * @param zoneid   - The ID of the Zone.
 * @param sensorid - The ID of the Sensor.
 */
public void justAddedLbl(String zoneid, String sensorid)
{
    infoLbl = new JLabel("Sensor: " + zoneid + sensorid + " added. Please Add 2nd Sensor.");
    add(infoLbl);
    revalidate();
}

/**
 * A method to remove the temporary informative label.
 * Only called when second sensor has been added.
 */
public void removeInfoLbl()
{
    remove(infoLbl);
    revalidate();
} 
```

添加方法工作正常，但是当我尝试调用`removeInfoLbl`标签时，标签会保留并消失。我已经尝试过`repaint()`在网上找到的各种组合，但仍然无法删除 JLabel。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:16:26.180

我很快就尝试了这个，调用 repaint() 而不是 revalidate() 对我有用。我认为标签没有消失的原因是面板没有重新粉刷。

如果您总是只显示一个标签，为什么不像 Andrew Thompson 建议的那样使用 setText()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:44:19.070

```
 public void removeInfoLbl()
    {
  remove(infoLbl);
  revalidate();
  repaint();
  SetVisible(true);
 } 
```

SetVisbile(true) 这将显示您当前可用的视图.. 所以试试这个..

# javascript - jquery select2 - 通过 AJAX php 格式化结果

> ID：16161086
> 
> 赞同：1
> 
> 时间：2013-04-23T04:39:59.183
> 
> 标签：javascript, ajax, jquery-select2

我使用select2，我想格式化我的结果

**名字**，第一。

```
$("#id").select2({
    minimumInputLength : 0,
    allowClear: true,
    ajax : {
        url : "Form/page.php",
        dataType : 'json',
        data : function (term, page) {
            return {
                q : term
            };
        },
        results: function (data, page) {
            return { results : data.ex};
        },
        formatResult :  function formatResult(ex) {
            return '<b>' + ex.name + '</b>';
        }
    } 
```

});

我的 php 文件喜欢

```
 while($r=mysql_fetch_array($m)) {
        $rows['id']=$r['id'];
        $rows['text']=$r['name'];
        $rows['first']=", ". $r['first'];
        $rows2[]=$rows;
    }
    print json_encode($rows2); 
```

我该怎么做，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T16:25:08.473

从 Select2 转发的 PHP 示例 - 源示例：

[https://github.com/ivaynberg/select2/wiki/PHP-Example](https://github.com/ivaynberg/select2/wiki/PHP-Example)

在 JS 中：

```
$('#categories').select2({
        placeholder: 'Search for a category',
        ajax: {
            url: "/ajax/select2_sample.php",
            dataType: 'json',
            quietMillis: 100,
            data: function (term, page) {
                return {
                    term: term, //search term
                    page_limit: 10 // page size
                };
            },
            results: function (data, page) {
                return { results: data.results };
            }

        },
        initSelection: function(element, callback) {
            return $.getJSON("/ajax/select2_sample.php?id=" + (element.val()), null, function(data) {

                    return callback(data);

            });
        }

    }); 
```

在 PHP 中：

```
<?php 
    $row = array();
    $return_arr = array();
    $row_array = array();

    if((isset($_GET['term']) && strlen($_GET['term']) > 0) || (isset($_GET['id']) && is_numeric($_GET['id'])))
    {

        if(isset($_GET['term']))
        {
            $getVar = $db->real_escape_string($_GET['term']);
            $whereClause =  " label LIKE '%" . $getVar ."%' ";
        }
        elseif(isset($_GET['id']))
        {
            $whereClause =  " categoryId = $getVar ";
        }
        /* limit with page_limit get */

        $limit = intval($_GET['page_limit']);

        $sql = "SELECT id, text FROM mytable WHERE $whereClause ORDER BY text LIMIT $limit";

        /** @var $result MySQLi_result */
        $result = $db->query($sql);

            if($result->num_rows > 0)
            {

                while($row = $result->fetch_array())
                {
                    $row_array['id'] = $row['id'];
                    $row_array['text'] = utf8_encode($row['text']);
                    array_push($return_arr,$row_array);
                }

            }
    }
    else
    {
        $row_array['id'] = 0;
        $row_array['text'] = utf8_encode('Start Typing....');
        array_push($return_arr,$row_array);

    }

    $ret = array();
    /* this is the return for a single result needed by select2 for initSelection */
    if(isset($_GET['id']))
    {
        $ret = $row_array;
    }
    /* this is the return for a multiple results needed by select2
    * Your results in select2 options needs to be data.result
    */
    else
    {
        $ret['results'] = $return_arr;
    }
    echo json_encode($ret);

    $db->close();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:04:46.207

我认为php代码必须是这样的：

```
while($r=mysql_fetch_array($m)) {
    $rows['id']=$r['id'];
    $rows['name']=$r['name'];
    $rows['first']=$r['first'];
    $rows2[]=$rows;
}
print json_encode($rows2); 
```

因此，您传递了一个带有 id、name 和 first 的 json 对象数组。

*将formatResult*的返回更改为：

```
return '<b>' + ex.name + '</b>, ' + ex.first; 
```

# java - jsp页面中如何根据名称显示名称

> ID：16161089
> 
> 赞同：0
> 
> 时间：2013-04-23T04:40:10.333
> 
> 标签：java, javascript, ajax, jsp, servlets

我有一个页面editpatient.jsp，其中包括一个页面patientlist.jsp。当您运行 editpatient.jsp 时，它会显示数据库中存在的所有记录。我有一个下拉菜单和一个搜索字段来指定搜索。因此，当我运行 editpatient.jsp 时，它会以存储在 DB 中的方式显示所有记录。所以我想根据名称和显示对其进行排序。所以请告诉我如何做同样的事情。当您点击姓名或电子邮件或城市时，它会相应地排序

病人列表.jsp

```
<%@ page import="java.util.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="DB.*" %>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style type="text/css">
.evenRow{
                height: 50px;
                background-color: white;
                text-transform: none;
                text-shadow: none;
                color: black;
        }

        .evenRow:hover 
        {
            background-color: #C2FEF0;
        }

            .row{
                height: 50px;
                background-color: #E4E6E6;
                text-transform: none;
                text-shadow: none;
                color: black;
                }

            .row:hover {
            background-color: #C2FEF0;
            }
</style>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>

<table style="border-collapse: collapse;overflow-x: scroll; width:97%">
                            <tr style="background-color:grey;height:50px"> 
                                <th style="min-width: 100px">
                                    NAME    
                                </th>
                                <th style="min-width: 100px">
                                    CITY    
                                </th>
                                <th style="min-width: 100px">
                                    LAST VISIT  
                                </th>
                                <th style="min-width: 100px">
                                    MOBILE  
                                </th>
                                <th style="min-width: 100px">
                                    EMAIL   
                                </th>
                                <th style="min-width: 100px">
                                    STATUS  
                                </th>
                                <th style="min-width: 100px">
                                    VIEW    
                                </th>
                                <th style="min-width: 100px">
                                    EDIT    
                                </th>
                            </tr>
            <%
                DataBaseConnection db = new DataBaseConnection();
                Connection con = db.connet();
                PreparedStatement pt = con
                        .prepareStatement("select * from Patient");
                ResultSet rs = pt.executeQuery();

                String searchBy = request.getParameter("searchBy");
                String searchElement = request.getParameter("searchElement");

                int count = 0;
                int index = -1;
                boolean name = false;
                if ("city".equalsIgnoreCase(searchBy))
                    index = 9;//change the index to the index of the city
                else if ("firstName".equalsIgnoreCase(searchBy))
                    index = 1;
                else if ("lastName".equalsIgnoreCase(searchBy))
                    index = 2;
                else if ("name".equalsIgnoreCase(searchBy)) {
                    index = 1;
                    name = true;
                }

                while (rs.next()) {
                    if (searchElement == null
                            || ((searchElement.equals(rs.getString(index)) && !name) || (name && searchElement
                                    .equalsIgnoreCase(rs.getString(index) + " "
                                            + rs.getString(index + 1))))) {

                    if (count++ % 2 == 0) {
            %>

                                <tr class="evenRow" >
                                    <td>
                                        <%=rs.getString(1)%>
                                    </td>
                                    <td>
                                        <%=rs.getString(2)%>                                        
                                    </td>
                                    <td>
                                        <%=rs.getString(3)%>
                                    </td>
                                    <td>
                                        <%=rs.getString(4)%>                                        
                                    </td>
                                    <td>
                                        <%=rs.getString(5)%>                                        
                                    </td>
                                    <td>
                                        <%=rs.getString(6)%>                                        
                                    </td>
                                    <td>
<form action="getPatientDetails.jsp"><input type="hidden" name="hidden" value="<%=count%>"/><input type="submit" value="view"></form>
                                    </td>
                                    <td>
                                        <a onclick="renderEdit(<%out.println("edit");%>)"><%
                                            out.println("edit");
                                        %></a>
                                    </td>
                                </tr>   
                <%
                        } else {
                    %>
                                <tr class="row">
                                    <td>
                                                                                <%=rs.getString(1)%>

                                    </td>
                                    <td>
                                                                                <%=rs.getString(2)%>

                                    </td>
                                    <td>
                                                                                <%=rs.getString(3)%>

                                    </td>
                                    <td>
                                                                                <%=rs.getString(4)%>

                                    </td>
                                    <td>
                                                                                <%=rs.getString(5)%>

                                    </td>
                                    <td>
                                                                                <%=rs.getString(6)%>

                                    </td>
                                    <td>
                                        <a onclick="renderView(<%out.println("view");%>)"><%
                                            out.println("view");
                                        %></a>
                                    </td>
                                    <td>
                                        <a onclick="renderEdit(<%out.println("edit");%>)"><%
                                            out.println("edit");
                                        %></a>
                                    </td>
                                </tr>
                            <%
                                }
                    }
                }
                            %>
                        </table>
</body>
</html> 
```

编辑病人.jsp

```
 <%@ page import="java.util.*" %>
    <!DOCTYPE html 
         PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
        <head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script>
    $(function() {
    $( "#datepicker" ).datepicker();
    });
        </script>
        <script type="text/javascript">
var request;

function getRequestObject()
{
    if (window.ActiveXObject) 
    {
        return(new ActiveXObject("Microsoft.XMLHTTP"));
    } 
    else if (window.XMLHttpRequest) 
    {
        return(new XMLHttpRequest());
    }
    else {
        return(null);
    }
}

function sendRequest() 
{
    request = getRequestObject();
    request.onreadystatechange = handleResponse;
    var address =  "patientList.jsp?searchBy=" + document.getElementById("searchBy").value + "&searchElement="+ document.getElementById("searchElement").value;
    request.open("GET", address, true);
    request.send(null);
}

function handleResponse() 
{
    if (request.readyState == 4 && request.status == 200)
    {
        document.getElementById("table").innerHTML = request.responseText;
    }
}
</script>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Edit Patient</title>
        <link rel="stylesheet" type="text/css" href="styles.css" />
    </head>
    <body>
        <form id="f1" name="f1" method="post" onsubmit="ccheck();" >
        <script>
          $(document).ready(function() {
            $("#datepicker").datepicker();
          });
        </script>
        <section id="page" > <!-- Defining the #page section with the section tag -->
            <header > <!-- Defining the header section of the page with the appropriate tag -->
                    <hgroup align="center">
                        <h3>Edit Patient</h3>
                    </hgroup>
            </header>
            <section id="articles"> <!-- A new section with the articles -->
                <!-- Article 1 start -->
                <div class="line"></div>  <!-- Dividing line -->
                <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                    <div class="articleBody clear">
                        search:
                        <select id="searchBy">
                            <option value="lastName">Last Name</option>
                            <option value="firstName">First Name</option>
                            <option value="name">Name</option>
                            <option value="city">City</option>
                        </select>
                        <input id="searchElement"/> 
                        <input type="button" value="Search" onclick="sendRequest();"/>
                    </div>
                </article>
                        <div id="table" align="center">
                            <jsp:include page="patientList.jsp" />
                        </div>
                </article>
            </section>
            <footer> <!-- Marking the footer section -->
               <div class="line"></div>
               <a href="#" class="up">Go UP</a>
            </footer>   
        </section> <!-- Closing the #page section -->
            <!-- JavaScript Includes -->
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
            <script src="jquery.scrollTo-1.4.2/jquery.scrollTo-min.js"></script>
            <script src="script.js"></script>
      </form>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:18:57.213

看看这个链接是否对你有帮助。

[http://tympanus.net/codrops/2009/10/03/33-javascript-solutions-for-sorting-tables/](http://tympanus.net/codrops/2009/10/03/33-javascript-solutions-for-sorting-tables/)

[http://www.allmyscripts.com/Table_Sort/](http://www.allmyscripts.com/Table_Sort/)

如果您已经尝试过任何东西，也请告诉我们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:13:24.857

1.首先将下拉/搜索值存储在模型类中（使用setter）。2.当您触发查询以从数据库中获取详细信息时，附加存储在模型类中的下拉/搜索值（使用 getter）。3.从数据库中获取值后渲染 dataTable 。建议：请遵循任何一种 MVC 架构（如 Spring MVC 架构）以避免项目的复杂性。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:14:17.960

这并不完全是问题的答案。
尝试像[jqGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)这样的网格，它可以处理`sorting`,`searching`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:51:43.127

ASFAIK，您的问题的解决方案是，您可以在 jsp 代码中使用 jquery，这样您就可以找到所有库并包含在其中。无需担心排序和编辑。Jquery 具有`Data Tables`内置的 API 来对列出的表中的数据进行排序，它可以编辑表中的数据。 [参考编辑](http://www.datatables.net/blog/Inline_editing) [参考排序](http://datatables.net/api#fnSort) [jsp页面中如何使用数据表](http://fabianosoriani.wordpress.com/2011/05/06/adding-dynamic-ajax-data-to-datatable-a-jquery-table-plugin/)

# android - 在 Android 应用程序中启用或禁用应用程序的权限

> ID：16161092
> 
> 赞同：2
> 
> 时间：2013-04-23T04:40:20.300
> 
> 标签：android, permissions

我是android开发的新手。我写了一个循环，它遍历所有已安装的应用程序。它列出了每个应用程序使用的权限。现在我试图允许用户禁用或启用权限。例如，如果一个应用程序使用 SEND_SMS，那么用户应该能够为该应用程序禁用该权限。并且如果他/她想要它，用户应该能够启用它。有人可以为我提供有关如何处理此问题的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:42:42.190

无法在运行时动态添加或删除权限。您必须在清单中声明它们。

也许你可以做一件事。您可以让用户希望启用禁用功能并自行处理。对于这种情况，我认为不需要动态更改权限。假设用户从设置中禁用短信发送，那么就不要从您的应用程序发送短信。为什么您需要为此更改权限？

另一个例子。假设您需要接收需要许可的广播。所以禁用广播接收器只需取消注册接收器。

因此，在所有情况下，您都可以禁用或启用您的功能。所以主要问题是启用/禁用功能而不是启用/禁用权限

# java - 调用 Java 关键字 super

> ID：16161093
> 
> 赞同：2
> 
> 时间：2013-04-23T04:40:26.223
> 
> 标签：java, super

我最近在一项潜在工作的测试中使用了以下代码。

```
class Point {
    protected final int x, y;
    private final String name;

    Point(int x, int y) {
        this.x = x;
        this.y = y;
        name = makeName();
    }

    protected String makeName() {
        return "[" + x + "," + y + "]";
    }

    public final String toString() {
        return name;
    }
}

public class ColorPoint extends Point {
    private final String color;

    ColorPoint(int x, int y, String color) {
        super(x, y);
        this.color = color;
    }

    protected String makeName() {
        return super.makeName() + ": " + color;
    }

    public static void main(String[] args) {
        System.out.println(new ColorPoint(4, 2, "purple"));
    }
} 
```

测试询问程序员打算打印出什么，即 [4, 2]：紫色。它还询问实际打印出来的内容，即 [4: 2]: null。我想知道的是为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:46:05.673

在子类中调用`ColorPoint`超类的构造函数时，`Point`变量的值`color`尚未赋值。因此，当`makeName()`调用方法时，`color`实际上是`null`，因此`name`变量变为`[4,2]:null`，这就是您在打印时看到的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T05:01:12.170

观察创建新实例时发生的`ColorPoint`情况：

*   为`ColorPoint`实例分配内存
*   `x`,`y`并`name`设置为其默认值
*   `ColorPoint`构造函数被调用
*   构造`ColorPoint`函数调用`Point`构造函数
*   `Point`构造函数分配给`x`和`y`
*   `Point`构造函数调用`makeName`方法。
*   `this.makeName`解决为`ColorPoint.makeName`
*   `ColorPoint.makeName`来电`Point.makeName`
*   `Point.makeName`观察`x`并`y`已设置，并按要求行事
*   `ColorPoint.makeName`观察`color`到`null`，并据此行事
*   `Point`构造函数赋值并`name`返回
*   `ColorPoint`构造函数赋值并`color`返回。糟糕，为时已晚。

关键字确保特定字段或变量将`final`被分配一次（编译器会这样做；仍然可以通过反射进行更改）。编译器还确保在写入之前不会读取局部变量。对于类字段，没有这样的先写后读规定。

这就是为什么，如前所述，您永远不应该调用可以从构造函数中覆盖的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T04:53:44.757

原因在代码中很明显。

该`ColorPoint` `makeName`方法是从`Point`类的构造函数中调用的。此时`private final variable color`尚未初始化。

# javascript - 获取嵌入式 PDF 的坐标

> ID：16161094
> 
> 赞同：1
> 
> 时间：2013-04-23T04:40:30.920
> 
> 标签：javascript, jquery, python, django, pdf

我想在网页中嵌入 PDF。当用户单击嵌入 PDF 中的某个坐标时，我想知道它相对于 PDF（而不是浏览器窗口）对应的坐标。然后，我将计划将文本插入 PDF 服务器端，以便用户可以单击 PDF 的一部分并通过网页向其中添加文本。

有人知道任何 JS 或其他解决方案可以做到这一点吗？我正在为网站使用 Django。

# php - 我如何为 imagemagick 提供图像库路径

> ID：16161102
> 
> 赞同：3
> 
> 时间：2013-04-23T04:41:21.353
> 
> 标签：php, codeigniter

我在 CodeIgniter 中使用 ImageMagick 库来使用图像库重新调整图像大小和旋转图像。但它产生错误。错误是-“您的图像库的路径不正确。请在图像首选项中设置正确的路径。”

```
$config = array();
$config['image_library']  = 'ImageMagick';
$config['source_image']   = $file;
$config['new_image']      =  $file;
$config['create_thumb']   = FALSE;
$config['maintain_ratio'] = TRUE;
$config['width']          = 50;
$config['height']         = 50;
$this->image_lib->initialize($config);  

if ( !$this->image_lib->resize())
{
    echo "resize -".$this->image_lib->display_errors();
} 
$this->image_lib->clear(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T10:48:15.860

下面给了我预期的结果。希望你也能得到同样的结果。

```
 $this->load->library('image_lib');

    //For resizing of image in size of dilog
    $config['image_library']  = 'ImageMagick';
    $config['library_path'] = 'C:\\ImageMagick\\';

    $config['source_image'] = $source_filepath;
    $config['new_image'] = $new_filepath;

    $config['width'] = 128;
    $config['height'] = 128;
    $config['quality'] = '100%';
    $config['maintain_ratio'] = TRUE;

    $this->image_lib->initialize($config);

    if (! $this->image_lib->resize()) {
        $error_msg = $this->image_lib->display_errors();
        print_r($error_msg);
    }
    else {
        echo "Done";
    } 
```

这里

```
$config['library_path'] = 'C:\\ImageMagick\\'; 
```

是安装 imageMagick 应用程序的窗口的路径。（尝试安装在这样的文件夹中，我们可以轻松地将其映射到库路径）。将图像库更改为：

```
$config['image_library']  = 'ImageMagick'; 
```

&其他所有配置保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:45:40.120

我认为您没有给出正确的路径，基本上 imagemagick 理想地安装在 /user/bin 中的某个位置。当我工作时，我曾经这样给予

```
imageMagickConvert = /usr/bin/convert 
imageMagickComposite = /usr/bin/composite 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T11:02:29.760

```
$config['library_path'] = '/usr/bin'; 
```

在您的配置中添加这一行。

# objective-c - 目标 C：无符号整数比较

> ID：16161107
> 
> 赞同：10
> 
> 时间：2013-04-23T04:42:29.453
> 
> 标签：objective-c, nsarray

所以我在工作中遇到了一个大问题，因为我的代码中有这样的东西：

```
 int foo = -1;
    NSArray *bar = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
    if (foo > [bar count]){
        NSLog(@"Wow, that's messed up.");
    } else {
        NSLog(@"Rock on!");
    } 
```

正如您可能已经知道我发布的那样，输出是：

***“哇，搞砸了。”***

据我所知，目标 C 正在将我的负数转换为“有符号”整数，从而扼杀我的比较。

我看到了其他有关此的帖子，他们都说明了问题所在，但没有人提出任何简单的解决方案来使这种比较真正起作用。另外，我很震惊没有编译器警告，因为这些给我带来了严重的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T05:07:39.047

**问题**

您遇到的问题是，因为`foo`是有符号整数并`-[NSArray count]`返回无符号整数，`foo`所以正在进行隐式类型转换为无符号整数。有关详细信息，请参阅[隐式类型转换](https://stackoverflow.com/q/3884468/643383)。[此外，这里](http://www.cs.wfu.edu/~torgerse/Kokua/More_SGI/007-0701-150/sgi_html/ch05.html)还有关于 C 中类型转换规则的更多信息。

**解决方案**

`-[NSArray count]`返回一个无符号值，因为数组永远不能有负数的元素；可能的最小值是 0。将数组的计数与 -1 进行比较没有多大意义——计数将*始终*大于任何负数（尽管存在符号问题）。

因此，正确的解决方案以及避免此类问题的方法是使用与 的返回值匹配的类型`-[NSArray count]`，即`NSUInteger`（U 代表*unsigned*）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T04:48:20.770

**试试这个**

```
- (IBAction)btnDoSomething:(id)sender {
        int foo = -1;
        NSArray *bar = [[NSArray alloc] initWithObjects:@"1",@"2",@"3", nil];
        if ( foo > (signed)[bar count] ) {
            NSLog(@"Wow, that's messed up.");
        } else {
            NSLog(@"Rock on!");
        }
    } 
```

* * *

**工作**

如果您正在比较两种不同类型的变量，那么它将隐式地将两个变量的数据类型转换为它们的更高类型。

在这个例子中，
变量 foo 是有*符号 int*类型，数组 count 是*unsigned int*，
所以它会将 foo 的数据类型转换为*unsigned int*
然后 foo 的值将变成一个大数字，它小于数组 count 3。

所以在这个例如，您需要将数组计数向下转换为*signed int*。

* * *

**问题**

当您的数组计数超过有符号 int 的最大限制时，在转换后它将像 [ -(negative) max limit -> 0 -> + max limit ] 一样四舍五入，这是意想不到的结果。

**解决方案**

*   如果您不确定最大数组长度，请避免类型转换。
*   如果您确定有限制，请进行强制转换（最大数组长度不会超过带*符号的 int*最大限制）。

* * *

有关更多详细信息，请查看此
[http://visualcplus.blogspot.in/2006/02/lesson-4-casting-data-types.html](http://visualcplus.blogspot.in/2006/02/lesson-4-casting-data-types.html)

# google-app-engine - 数据存储读/写操作

> ID：16161108
> 
> 赞同：3
> 
> 时间：2013-04-23T04:42:40.933
> 
> 标签：google-app-engine

刚才，我的应用程序达到了 Datastore Read 操作的免费配额限制。`0.05 Million Opts`. 我只是用它在线编辑文档。

所以我开始意识到处理读/写操作计数非常重要。那么 Datastore 是如何计算读/写操作的呢？根据`put()`或或根据或？`get()`_`Entity``getProperty``setProperty``Entity`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T04:47:31.673

`put()`，`get()`并且查询`fetch()`操作将导致您的数据项从数据存储整体传输到前端实例的内存。一旦你把它记在你的记忆中，你就不会为它的属性的操作付费。

但是请注意，对`put()`和的收费`get()`可能并非微不足道。例如，`put()`您无需为一次写入操作付费，而且还为与写入项目关联的每个索引支付一堆索引写入操作（每个 IIRC 的 1/10 费用）。

[此链接](https://developers.google.com/appengine/docs/python/datastore/entities#Understanding_Write_Costs)解释了写入操作的费用。

# mongodb - Mongodb ObjectIds 是 GUID 吗？

> ID：16161111
> 
> 赞同：14
> 
> 时间：2013-04-23T04:43:04.170
> 
> 标签：mongodb, guid

存储在每个文档的 _id 字段中的自动生成的 BSON ID，它是 GUID 吗？文档说它“最有可能是独一无二的”，所以我有点困惑。为什么他们会使用不能保证唯一的 id？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:14:11.867

它的唯一性是基于概率的。与@mattexx 答案不同：

> 它不是“保证”是唯一的，因为 MongoDB 不强制唯一性来节省时间。

MongoDB 确实在 上强制执行唯一性`ObjectId`，它实际上在`_id`字段上有一个唯一索引。当谈到节省时间时，`ObjectId`这种方式是历史性的，因为它是在 MongoDB 没有确认任何写入的时代设计的，并且需要 99% 的机会能够插入新的唯一记录而无需客户端等待确认（ObjectIds是在客户端生成的）。

它们不是 GUID，但正如@Asya 所说，它们保证具有高水平的唯一性。

只要时间永不倒退，它仍有 99% 的机会永远独一无二。好的，正如@Devesh 所说，有 1 万亿分之一（？还没有计算过），甚至 GUID 也有可能被复制，但我认为你不会很快达到这个概率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T05:37:36.680

它在大多数需求中都是唯一的，它由时间戳、机器的唯一标识符（机器主机的哈希）、进程标识符和最后的增量编号组成。[http://docs.mongodb.org/manual/reference/object-id/](http://docs.mongodb.org/manual/reference/object-id/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-11T08:42:15.900

**理论上**，ID 冲突的可能性几乎接近于零，可以假定为典型的 Web 应用程序。许多现实世界的系统（Mongo 与否）确实依赖于 GUID 的这一属性，尽管对于安全/关键任务系统来说这不是一个好的假设。

实际上，如果存在配置错误或第三方库错误，确实存在可能出错的情况**。**这些不应该排除这个概念，但重要的是要意识到这些风险并尽可能避免它们。

这里对可能导致碰撞的实际问题进行了一些[很好的分析。](https://stackoverflow.com/a/5694803/18706)尤其是：

> 一些 Mongo 驱动程序使用随机数而不是递增计数器字节的数字。在这些情况下，有 1/16,777,216 的机会生成非唯一 ID，但前提是这两个 ID 在同一秒内（即在 ID 的时间段更新到下一秒之前），在同一时间机器，在相同的过程中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:38:33.920

ObjectId 在[此处](http://docs.mongodb.org/manual/reference/object-id/)的文档中进行了说明。它不是“保证”是唯一的，因为 MongoDB 不强制唯一性来节省时间。它只是相信复杂的生成算法可能永远不会在同一个数据存储中生成两个相同的 ObjectId。所以从技术上讲，它不是一个 GUID，但几乎一样好。

# javascript - 如何摆脱 HTML 页面上的无用选择

> ID：16161113
> 
> 赞同：1
> 
> 时间：2013-04-23T04:43:28.443
> 
> 标签：javascript, jquery, html, selection

我有一个非常奇怪的问题。每当我拖动单击并将鼠标从页面底部拖动到顶部时。屏幕上的所有东西都被选中。包括空标签空间。是否有任何解决方案可以仅选择文本？

![问题图片](https://i.stack.imgur.com/2y3cJ.png)

# sql - 使用 VB 更新 SQL 记录

> ID：16161114
> 
> 赞同：2
> 
> 时间：2013-04-23T04:43:34.713
> 
> 标签：sql, vba, vb6

我有一个包含以下 SQL 更新的 VB 代码：

```
UPDATE table_A SET UPD_FLG = 'N' WHERE UPD_FLG = 'Y' 
```

我需要在单独的变量/记录集中找出上述查询更新的行数。目前我正在使用选择查询来获得相同的结果。但是有没有一种方法可以使用像 EXECUTE 这样的 VB 函数来完成呢？

我正在使用 VB 6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:59:14.613

```
 Set gCommand = New ADODB.Command
        gCommand.CommandType = adCmdText
        gCommand.CommandText = sSql1
        gCommand.ActiveConnection = gconDb
        gCommand.Execute (cnt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:49:47.713

为此，您可以对简单的程序进行如下操作：

```
CREATE PROCEDURE UpdateTables
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    DECLARE @RowCount1 INTEGER
    DECLARE @RowCount2 INTEGER
    DECLARE @RowCount3 INTEGER
    DECLARE @RowCount4 INTEGER

    UPDATE Table1 Set Column = 0 WHERE Column IS NULL
    SELECT @RowCount1 = @@ROWCOUNT
    UPDATE Table2 Set Column = 0 WHERE Column IS NULL
    SELECT @RowCount2 = @@ROWCOUNT
    UPDATE Table3 Set Column = 0 WHERE Column IS NULL
    SELECT @RowCount3 = @@ROWCOUNT
    UPDATE Table4 Set Column = 0 WHERE Column IS NULL
    SELECT @RowCount4 = @@ROWCOUNT

    SELECT @RowCount1 AS Table1, @RowCount2 AS Table2, @RowCount3 AS Table3, @RowCount4 AS Table4
END 
```

**参考：**

[返回受 UPDATE 语句影响的行数](https://stackoverflow.com/questions/1103260/return-number-of-rows-affected-by-update-statements)

**或者**

[如何获取受存储过程影响的记录数？](https://stackoverflow.com/questions/1201358/how-can-i-get-the-number-of-records-affected-by-a-stored-procedure)

**在 VB 中使用此过程：**

[http://www.dbforums.com/microsoft-sql-server/993294-how-get-return-value-number-rows-affected-update-command.html](http://www.dbforums.com/microsoft-sql-server/993294-how-get-return-value-number-rows-affected-update-command.html)

# data-structures - 显示家庭成员关系的类

> ID：16161115
> 
> 赞同：-6
> 
> 时间：2013-04-23T04:43:49.083
> 
> 标签：data-structures

我想创建一个可以动态添加家庭成员及其与该成员的关系的**类。**

例如：

在一个家庭中，父亲是成员之一，他的妻子是另一个成员，他们有孩子。但是每个家庭的孩子数量是不同的（例如只有一个儿子/只有一个女儿/一个儿子一个女儿等等）。因此，儿童人数在运行时间决定了。

我有一张桌子：

*   **成员表**：将存储所有成员的详细信息，例如 member_reference_number、姓名、地址、电话号码等。member_reference_number 是一个主键，用于标识数据库中的唯一成员。此表适用于任何成员（父亲、母亲、儿子、女儿等）。

我想使用该 member_reference_number 来显示关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:51:08.787

面向对象+继承可以帮助你。我认为您的意思是这种结构：

```
class Person
{};

class Father : public Person
{};

class Mother : public Person
{};

class Child : public Father, public Mother
{};

class Son : public Child
{};

class Daughter: public Child
{};

class Family
{
  Father father;
  Mother mother;
  std::vector<Child> children;
}; 
```

```
 +------------------+               
              |       Person     |               
              +------------------+               
                ^             ^                  
                |             |                  
                |             |                  
                \             \                  
 +------------------+      +------------------+  
 |     Father       |      |     Mother       |  
 +------------------+      +------------------+  
                 ^            ^                  
                 |            |                  
                 |            |                  
                 |            |                  
                 \            \                  
              +------------------+               
              |     Child        |               
              +------------------+               
                 ^           ^                   
                 |           |                   
                 |           |                   
                 \           \                   
 +------------------+      +------------------+  
 |     Son          |      |    Daughter      |  
 +------------------+      +------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:57:17.173

我认为您可以使用 FamilyTreeNode 拥有树。

FamilyTreeNode（结构）可以在哪里

-> 男性--`String`

-> 女性--`String`

-> NumberOfChildern --`int`

-> Children——FamilyTreeNodes 数组（动态数组）。

在这里，如果有人未婚，则将 opp 性别设为 null。

# hadoop - 修改表后 Hbase state=PENDING_OPEN

> ID：16161120
> 
> 赞同：0
> 
> 时间：2013-04-23T04:44:13.833
> 
> 标签：hadoop, hbase

我的 Hbase (CDH4) 有问题。我想在表中添加一个列族。但是安装是在没有快速压缩的情况下完成的。但我不小心复制粘贴了提到 SNAPPY COMPRESSION 的脚本。

我禁用了表，然后更改了表。它告诉我桌子已经改变了。现在，当我再次尝试启用该表时，它显示**org.apache.hadoop.hbase.TableNotDisabledException**

当我尝试禁用它时说：**org.apache.hadoop.hbase.TableNotEnabledException**

我看到了 HbaseMaster UI。它将表的区域服务器显示为：

> 表,,1350624529725.05b804a85c63beef408e8795e85e6a5c。状态=PENDING_OPEN，ts=2013 年 4 月 23 日星期二 10:49:02 IST 2013（945 秒前），服务器=XXXHOSTNAME

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:52:57.417

我不确定问题是什么，但我可能有两件事是

1.  试试看hbck能不能修复（`hbase hbck -fix`）
2.  尝试安装 snappy （`yum install snappy`然后还将 snappy jar 复制到 hbase lib 目录）

# css - 我面临更改简单电子邮件表单模块布局的障碍如何自定义布局？

> ID：16161125
> 
> 赞同：0
> 
> 时间：2013-04-23T04:44:49.957
> 
> 标签：css, joomla2.5, joomla-extensions

```
 // uses $this->_labelAlign, $this->_col2space, $this->_errorTxtColor, $this->_field, $this->_maxFields
// if $this->_field[$x]['rows'] > 0 assumes text area
public function formatRow () 
{
    $output = '';
    for ($x = 1; $x <= $this->_maxFields; $x++) 
    {           
        if ($this->_field[$x]['active'] == 'Y' || $this->_field[$x]['active'] == 'R') {
            $name = 'mod_simpleemailform_field' . $x . '_' . $this->_instance;
            $value = (isset($_POST[$name])) ? htmlspecialchars($_POST[$name]) : '';
            // prevents Joomla from reformatting using javascript
            if (strpos($value, '@')) {
                $value = str_replace('@', '&#64;', $value);
            }
            // 2011-12-03 DB: added CSS classes for input, table, row, th and td
            $row = '';
            $row .= '<tr' . $this->_trClass   . '>';
            // labels
            $row .= "<th" . $this->_thClass    . " align='" . $this->_labelAlign . "'>" . $this->_field[$x]['label'] . "</th>";
            // space between cols
            $row .= "<td" . $this->_spaceClass . " width='" . $this->_col2space  . "'>&nbsp;</td>";
            // input field
            $row .= "<td" . $this->_tdClass    . ">";
            // check to see if text area
            if ($this->_field[$x]['rows'] > 0) {
                $row .= sprintf('<textarea name="%s" id="%s" rows="%d" cols="%d" %s>%s</textarea>',
                                $name,
                                $name,
                                $this->_field[$x]['rows'],
                                $this->_field[$x]['cols'],
                                $this->_inputClass,
                                $value);
            } else {
                $row .= sprintf('<input type="text" name="%s" id="%s" size="%d" value="%s" maxlength="%d" %s/>',
                                $name,
                                $name,
                                $this->_field[$x]['size'],
                                $value,
                                $this->_field[$x]['maxx'],
                                $this->_inputClass);
            }
            $row .= ($this->_field[$x]['error']) 
                  ? $this->formatErrorMessage($this->_errorTxtColor, $this->_field[$x]['error']) 
                  : '';
            $row .= "</td>";
            $row .= "</tr>\n";
            $output .= $row;
        }
    }
    return $output;
} 
```

这是我的输出模块代码，它以表格格式显示，我不希望这种类型的布局作为输出...我还尝试使用 tr、td 和 th 标签进行更改，但未能正确输出。 ..所以请如果有人帮我解决这个问题。

**错误的格式输出我得到的**

![在此处输入图像描述](https://i.stack.imgur.com/WFhPf.png)

**正确的格式输出我想要的**

![在此处输入图像描述](https://i.stack.imgur.com/7EKTF.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:56:39.417

好的，这就去。你有一系列

标签间隔...输入字段

所以用一个替换表

```
<div class='form-x' 
```

并在css中根据需要设置其宽度，即

```
div.form-x {width:450px; padding:12px;} 
```

然后您要替换单元格：第一个 th 将成为标签，第一个 td 将被完全删除，第二个将仅保留其内容（即输入或文本区域）。

为了让您的生活更轻松，请将每对标签输入分组在一个 div 中，以便：

```
<div class='formelement'>
  <label for='element-1'><?php echo $this->_labelAlign ?></label>
  <input ... or <textarea...
</div> 
```

在CSS中

```
div.formelement {padding:20px 0 0 0}
div.formelement label {display:block;}
div.formelement input, div.formelement textarea {width:100%} 
```

最后提交按钮应该放在一个div中

```
div.submitbutton {text-align:center} 
```

关于输入类型=文件的样式，忘记它。每个浏览器的呈现方式都不同，虽然有一些解决方法，但那是另一回事。

# nested-lists - Sencha touch 嵌套列表无数据

> ID：16161128
> 
> 赞同：1
> 
> 时间：2013-04-23T04:45:01.273
> 
> 标签：nested-lists, sencha-touch-2.1

我是煎茶触摸的新手。我使用 mvc 方法。请在下面查看我的代码

主.js

```
Ext.define('test.view.Main', {
    extend: 'Ext.tab.Panel',
    xtype: 'main',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'Ext.dataview.NestedList'
    ],
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                title: 'Welcome',
                iconCls: 'home',

                styleHtmlContent: true,
                scrollable: true,

                items: {
                    docked: 'top',
                    xtype: 'titlebar',
                    title: 'Welcome to Sencha Touch 2'
                },

                html: [
                    "You've just generated a new Sencha Touch 2 project. What you're looking at right now is the ",
                    "contents of <a target='_blank' href=\"app/view/Main.js\">app/view/Main.js</a> - edit that file ",
                    "and refresh to change what's rendered here."
                ].join("")
            },
            {

                title: 'Get Started',
                iconCls: 'action',

                items: [
                    {
                        docked: 'top',
                        xtype: 'titlebar',
                        title: 'Getting Started'
                    },
                    {
                        xtype: 'nestedlist',

                    }
                ]
            }
        ]
    }
}); 
```

嵌套列表.js

```
 Ext.define('bluebutton.view.NestedList', {
    extend: 'Ext.NestedList',
    xtype: 'nestedlist',
    requires: [
        'Ext.field.Select',
        'Ext.field.Search',

        'Ext.plugin.ListPaging',
        'Ext.plugin.PullRefresh',

    ],
    config: {

          store : { xclass : 'Test.store.data'},
        detailContainer: detailContainer,
        detailCard: true,

    },

}); 
```

测试存储数据

```
Ext.define('Test.store.data', {
    extend: 'Ext.data.TreeStore',

    config: {
        model: 'Test.model.data',
        defaultRootProperty: 'items',
        root: {
            items: [
            {
                text: 'Drinks',
                items: [
                    {
                        text: 'Water',
                        items: [
                            { text: 'Still', leaf: true },
                            { text: 'Sparkling', leaf: true }
                        ]
                    },
                    { text: 'Soda', leaf: true }
                ]
            },
            {
                text: 'Snacks',
                items: [
                    { text: 'Nuts', leaf: true },
                    { text: 'Pretzels', leaf: true },
                    { text: 'Wasabi Peas', leaf: true }
                ]
            }
        ]
        }
    }
}); 
```

模型.js

```
 Ext.define('Test.model.data', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['text']
    }

}); 
```

但是嵌套列表无法获取数据。我得到空列表。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:47:05.147

如果您在商店中提供内联数据，它不应该是`data`属性而不是`root`？

```
Ext.define('Test.store.data', {
    extend: 'Ext.data.TreeStore',

    config: {
        model: 'Test.model.data',
        defaultRootProperty: 'items',
        data: {
            items: [
            {
                text: 'Drinks',
                items: [
                    {
                        text: 'Water',
                        items: [
                            { text: 'Still', leaf: true },
                            { text: 'Sparkling', leaf: true }
                        ]
                    },
                    { text: 'Soda', leaf: true }
                ]
            },
            {
                text: 'Snacks',
                items: [
                    { text: 'Nuts', leaf: true },
                    { text: 'Pretzels', leaf: true },
                    { text: 'Wasabi Peas', leaf: true }
                ]
            }
        ]
        }
    }
}); 
```

# php - PHP 中没有 API 的工作选项

> ID：16161130
> 
> 赞同：-4
> 
> 时间：2013-04-23T04:45:11.350
> 
> 标签：php

目前有一个网站没有独立的搜索或 API 产品，我需要一个 PHP 页面，它可以通过另一种方式获取信息。本站有手动搜索拉取数据的功能，有没有办法让我的页面到该站，点击我需要的搜索参数，拉取结果到我的页面中？也许有更好的方法？

例子。

realestate.com.au，我希望用户在我的 php 文件中输入相同的搜索字段，转到 realestate.com.au，在该站点中插入这些搜索参数，然后当我的搜索结果通过时，例如，马里兰州郊区的 3 间卧室，2 间浴室，我得到所有结果的价格，并在我的页面中计算中间价，然后该字段在我的屏幕上输出给用户。

现在我没有代码，因为我什至不知道如何开始。如果我能找到一种方法来开始，让 php 访问 realestate.com.au（不将用户重定向到那里，只是连接到网站）并进行搜索，我将无法完成大部分工作。

我希望我说得通。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:52:45.537

这有点复杂......比我可以在这里介绍的要多。但这里是涉及的一般步骤：

**1) 构建您的 URL** 从您的目标站点，找出 URL 在搜索结果页面上的样子。这应该告诉您如何为以后构建您的 URL。

**2) 使用 CURL 检索您的自定义结果页面** 使用您在上面看到的格式，使用 CURL 为该页面发出请求。只有您会将访问者的搜索字词替换为 URL。

**3) 抓取结果页面** CURL 将从搜索结果页面中获取 HTML。然后，您必须遍历该结果并使用 DIV ID 和类提取所需的数据。

**4）将最终结果提供给您的访问者** 将抓取的数据放入您自己的页面并发送到浏览器。

另见：http: [//voices.yahoo.com/how-scrape-web-page-using-php-curl-5442987.html](http://voices.yahoo.com/how-scrape-web-page-using-php-curl-5442987.html)

注意：我会确保您有权抓取该网站。

# c# - 从任务工厂调度的线程更新 WPF 中的 UI 的正确方法是什么？

> ID：16161131
> 
> 赞同：1
> 
> 时间：2013-04-23T04:45:14.470
> 
> 标签：c#, wpf, multithreading, .net-4.0, task-parallel-library

我正在尝试从通过`Task.Factory`. 我很难正确更新我的 UI。

这是我观察到的行为：

```
Task.Factory.StartNew(() =>
    {
        // UI does get updated from here.
    }).ContinueWith(task =>
        {
            // UI does *not* get updated from here.
        }); 
```

在调度的线程中更新 UI 的正确方法是什么`Task Factory`？

这是我的实际代码供您参考：

```
private string CurrentProcess
{
    set { _eventAggregator.GetEvent<CurrentProcessUpdatedEvent>().Publish(value); }
}

private double ProgressPercentage
{
    set
    {
        _eventAggregator.GetEvent<ProgressPercentageUpdatedEvent>()
                        .Publish(Utilities.GetProgressPercentage(value));
    }
} 
```

* * *

```
TaskScheduler uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
var tasks = new List<Task<DataTable>>();

string siteCollectionUrl;
string connectionString;

try
{
    Dictionary<string, object> session = ApplicationContext.Current.Session;

    try
    {
        if ((double) session["ProgressPercentage"] > 0) return;
    }
    catch
    {
    }

    siteCollectionUrl = (string) session["SiteCollection"];
    connectionString = (string) session["Database"];
}
catch
{
    return;
}

_eventAggregator.GetEvent<IsProcessingChangedEvent>().Publish(true);
CurrentProcess = "Loading resources.";

Task<DataTable> spTask = Task<DataTable>.Factory.StartNew(() =>
    {
        using (ChannelFactory<ISharePointService> service = Utilities.GetSharePointService())
        {
            ISharePointService sharePointService = service.CreateChannel();
            DataTable spDatatable = sharePointService.GetResources(siteCollectionUrl);

            Task.Factory.StartNew(() => { ProgressPercentage = 10; }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);

            return spDatatable;
        }
    });

tasks.Add(spTask);

Task<DataTable> buildTableTask = Task<DataTable>.Factory.ContinueWhenAll(tasks.ToArray(), t =>
    {
        DataTable spDatatable = t[0].Result;

        double percent = 10/spDatatable.Rows.Count;

        var columnMap = new Dictionary<string, string>
            {
                {"IsValid", null},
                {"Reason", null},
                {"SPID", "ID"},
                {"DBID", "EXTID"},
                {"Name", "Title"},
                {"Account", "SharePointAccount"},
                {"Email", "Email"},
                {"Generic", "Generic"},
                {"Department", "Department"},
                {"TempDept", "TempDept"},
                {"Role", "Role"},
                {"TempRole", "TempRole"},
                {"HolidaySchedule", "HolidaySchedule"},
                {"WorkHours", "WorkHours"}
            };

        DataTable spResources = BuildDataTable(columnMap);

        foreach (DataRow dataRow in spDatatable.Rows)
        {
            DataRow row = spResources.NewRow();

            foreach (var pair in columnMap)
            {
                try
                {
                    row[pair.Key] = dataRow[pair.Value];
                }
                catch
                {
                }
            }

            spResources.Rows.Add(row);

            Task.Factory.StartNew(() => { ProgressPercentage = percent; }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);
        }

        return spResources;
    });

tasks.Add(buildTableTask);

Task<DataTable> dbTask = Task<DataTable>.Factory.StartNew(() =>
    {
        using (var sqlConnection = new SqlConnection(connectionString))
        {
            using (var sqlCommand = new SqlCommand(SQL, sqlConnection))
            {
                sqlConnection.Open();
                using (SqlDataReader sqlDataReader = sqlCommand.ExecuteReader())
                {
                    var dataTable = new DataTable();
                    dataTable.Load(sqlDataReader);

                    Task.Factory.StartNew(() => { ProgressPercentage = 10; }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);

                    return dataTable;
                }
            }
        }
    });

tasks.Add(dbTask);

Task.Factory.ContinueWhenAll(tasks.ToArray(), t =>
    {
        DatabaseResources = t[2].Result;
        DataTable sharePointResources = t[1].Result;

        if (sharePointResources != null)
        {
            int resourceIndex = 1;
            int totalResources = sharePointResources.Rows.Count;
            double percentPoint = 70/totalResources;

            foreach (DataRow row in sharePointResources.Rows)
            {
                DataRow currentRow = row;

                Task.Factory.StartNew(() =>
                    {
                        CurrentProcess = string.Format("[{0}/{1}] Processing: {2}",
                                                        resourceIndex++, totalResources,
                                                        currentRow["Name"]);
                    }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);

                bool isValid = true;
                var reasons = new List<string>();

                DataRow[] dataRows =
                    _databaseResources.Select(string.Format("ResourceID = {0}", row["DBID"]));
                if (dataRows.Any())
                {
                    DataRow dataRow = dataRows[0];

                    string tempDept = (row["TempDept"] ?? string.Empty).ToString();
                    string dept = (row["Department"] ?? string.Empty).ToString();

                    string tempRole = (row["TempRole"] ?? string.Empty).ToString();
                    string role = (row["Role"] ?? string.Empty).ToString();

                    string hs = (row["HolidaySchedule"] ?? string.Empty).ToString();
                    string dbhs = (dataRow["HolidaySchedule"] ?? string.Empty).ToString();

                    string wh = (row["WorkHours"] ?? string.Empty).ToString();
                    string dbwh = (dataRow["WorkHours"] ?? string.Empty).ToString();

                    if (string.IsNullOrEmpty(dept))
                    {
                        if (!dept.Equals(tempDept))
                        {
                            isValid = false;
                            reasons.Add("Department does not match Temp Dept");
                        }
                    }

                    if (string.IsNullOrEmpty(role))
                    {
                        if (!role.Equals(tempRole))
                        {
                            isValid = false;
                            reasons.Add("Role does not match Temp Role");
                        }
                    }

                    if (string.IsNullOrEmpty(hs))
                    {
                        if (!hs.Equals(dbhs))
                        {
                            isValid = false;
                            reasons.Add("Holiday Schedule does not match Holiday Schedule from database");
                        }
                    }

                    if (string.IsNullOrEmpty(wh))
                    {
                        if (!wh.Equals(dbwh))
                        {
                            isValid = false;
                            reasons.Add("Work Hours does not match Work Hours from database");
                        }
                    }
                }
                else
                {
                    isValid = false;
                    reasons.Add("Resource does not exist in database");
                }

                row["IsValid"] = isValid;
                row["Reason"] = string.Join("\n", reasons.ToArray());

                Task.Factory.StartNew(() => { ProgressPercentage = percentPoint; }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);
            }

            SharePointResources = sharePointResources;
        }

        _eventAggregator.GetEvent<ProgressPercentageUpdatedEvent>()
                        .Publish(Utilities.ResetProgressPercentage());
        _eventAggregator.GetEvent<IsProcessingChangedEvent>().Publish(false);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:49:44.077

> // UI 确实从这里更新

您应该在 WPF 中启动一个`new Action(() =>`直通`DispatcherObject`

```
Task.Factory.StartNew(() =>
    {
        // UI does get updated from here
        this.Dispatcher.BeginInvoke(new Action(() => 
        { 
```

请搜索Alexandra Rusina 的系列“.NET Framework 4 中的并行编程”的 “[第 1 部分 - 入门”中的最后一行](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)

我相信你会进一步享受这个参考的所有续集。

[第 2 部分 - 任务取消](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/18/parallel-programming-task-schedulers-and-synchronization-context.aspx)演示了如何改用任务调度程序：

```
var ui = TaskScheduler.FromCurrentSynchronizationContext();
Task.Factory.ContinueWhenAll(tasks.ToArray(),
    result =>
    {
        var time = watch.ElapsedMilliseconds;
        label1.Content += time.ToString();
    }, CancellationToken.None, TaskContinuationOptions.None, ui); 
```

代替：

```
Task.Factory.ContinueWhenAll(tasks.ToArray(),
      result =>
      {
          var time = watch.ElapsedMilliseconds;
          this.Dispatcher.BeginInvoke(new Action(() =>
              label1.Content += time.ToString()));
      }); 
```

# 回应评论

> “首先，我使用的是 PRISM。所以，在我的 ViewModwl 中，我必须使用 Dispatcher.Current.BeginInvoke --- 我试过了。它没有帮助”

请查看[“WPF Dispatcher 是多线程问题的解决方案吗？”的答案。](https://stackoverflow.com/a/486798/2031316)与在 Prism 中使用调度程序和访问 UI 相关：

```
// Not a UI component
public class MyDomainService : IMyDomainService
{
   private readonly IDispatcher _dispatcher;

   public MyDomainService(IDispatcher dispatcher) 
   {
      _dispatcher = dispatcher;
   }

   private void GotResultFromBackgroundThread()
   {
       _dispatcher.Dispatch(() => DoStuffOnForegroundThread());
   }
} 
```

“[您需要确保您调用的是实际的 UI Dispatcher，而不一定是 Current](https://stackoverflow.com/questions/8577872/how-to-invoke-a-method-on-the-ui-thread-from-within-a-worker-thread/8577922#8577922) ”

您可以使用[PRISM 事件聚合器](http://neverindoubtnet.blogspot.ru/2009/05/event-aggregator-in-prism-explorer.html)以确保您在 UI 线程或基本[Dispatcher.CheckAccess 方法上](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.checkaccess.aspx)

如果您使用 TaskScheduler，那么您应该进入`TaskScheduler.FromCurrentSynchronizationContext`UI 线程（例如，在 Window.Loaded 事件处理程序中，您将继续双击您的表单）并传递/共享到/与任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:33:31.203

更新 UI 的最简单方法是通过[SynchronizationContext.Post](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx) / [Send](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)方法。SynchronizationContext 隐藏底层 UI 库（WPF 或 WinForms）并确保您指定的操作在正确的线程上执行。

发送块，直到 UI 完成对操作的处理，而 Post 异步执行操作。

要以异步方式更新 UI，您可以使用如下代码：

```
SyncrhonizationContext.Current.Post(value=>myTextBox.Text=(string)value,"23455"); 
```

一个类似的选项是在 ContinueWith 中指定 TaskScheduler.FromCurrentSynchronizationContext() 以让您的延续在 UI 线程中执行：

```
.ContinueWith(t=>{
    myTextBox.Text="Some Value";
 }); 
```

这相当于调用 SynchronizationContext.Current.Send

您还提到您使用 MVVM 和 PRISM，并且异步操作在 ViewModel 中执行。除非属性或您的异步代码也引发 NotifyPropertyChanged 事件，否则对 ViewModel 属性的更改不会出现在视图中。这是一个 PRISM 问题，而不是 TPL 问题。

我还注意到您发布了属性更改事件，而不是引发 NotifyPropertyChanged 事件。数据绑定取决于从源属性接收 NotifyPropertyChanged。除非您添加代码以某种方式引发适当的事件，否则不会更新视图控件。

PRISM 中的 ViewModels 通常继承自实现 INotifyPropertyChanged 接口的[NotificationObject 。](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.viewmodel.notificationobject%28v=pandp.40%29.aspx)尝试调用 RaisePropertyChanged 方法以在您的属性中引发 NotifyPropertyChanged 事件，看看这是否能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:57:43.663

看看这个视频。[斯蒂芬·图布的 DNRTV 剧集](http://www.dnrtv.com/default.aspx?showNum=188)。它专注于随后即将推出的 .NET 4.5 功能，但在最初的回顾中，它很好地涵盖了使用任务调度程序从任务中编组 GUI 的主题。

# css - 我可以在我的 .btn Bootstrap 类中添加什么以消除浮肿？

> ID：16161134
> 
> 赞同：0
> 
> 时间：2013-04-23T04:45:21.433
> 
> 标签：css, twitter-bootstrap

我想覆盖 .btn（和 btn-success、btn-info 等），以便所有背景渐变都消失（保留阴影）。

```
.btn{
    //what goes here to remove the background gradient?
    //must work with the other colors
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:11:42.263

这应该为你做。

```
.btn {
 background-image:none;
} 
```

# java - Freemarker 可以渲染的数据量是否有限制？

> ID：16161135
> 
> 赞同：0
> 
> 时间：2013-04-23T04:45:33.650
> 
> 标签：java, freemarker, stripes

我正在使用带有条纹的 Freemarker。在其中一种情况下，我有一个要渲染的表，它有 17 列和一些 13-15 行，它的整体不会立即渲染。没有抛出错误/异常，只是表的最后一部分被截断并出现一系列点 (...)。

这是默认行为吗？可以从某个地方增加要渲染的数据大小吗？我完全被这个困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:54:17.803

FreeMarker 本身没有输入数据或输出大小限制。我想您正在使用一些特殊的指令来呈现该表，并且该指令实现了这种限制。展示如何渲染该表可能会有所帮助。

# unit-testing - 如何只测试一项基准功能？

> ID：16161142
> 
> 赞同：37
> 
> 时间：2013-04-23T04:46:11.777
> 
> 标签：unit-testing, go, benchmarking

在我的 Go 包中有几个基准文件，例如`map1_benchmark_test.go`和`map2_benchmark_test.go`. 在每个`*_benchmark_test.go`文件中，都有多个基准函数，例如`func BenchmarkMapTravel(b *testing.B)`and `func BenchmarkMapGet(b *testing.B)`。

问题是，我怎样才能只测试一个基准函数？

我试图阅读一些手册，但通过运行`go help test`.

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-23T05:26:36.073

> [测试标志说明](https://golang.org/cmd/go/#hdr-Description_of_testing_flags)
> 
> ```
> -test.bench pattern
>     Run benchmarks matching the regular expression.
>     By default, no benchmarks run.
> 
> -test.run pattern
>     Run only those tests and examples matching the regular
>     expression. 
> ```
> 
> 为方便起见，测试二进制文件的这些`-test.X`标志中的每一个也可用作`-X`' `go test`' 本身的标志。

求助，

```
$ go help testflag 
```

例如，

```
go test -test.bench MapTravel
go test -test.bench MapGet 
```

或者

```
go test -bench MapTravel
go test -bench MapGet 
```

要绕过测试功能，请包含一个`-test.run`过滤掉每个测试的模式。例如，

```
go test -test.bench MapTravel -test.run=thisexpressionwontmatchanytest 
```

或者

```
go test -bench MapTravel -run=^$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-24T04:09:28.930

您无法提供任何标志，它将仅运行基准测试（或仅运行一个基准测试）。与这些相关的[唯一标志](https://golang.org/cmd/go/#hdr-Description_of_testing_flags)是：

> -bench regexp 运行与正则表达式匹配的基准。默认情况下，不运行任何基准测试。要运行所有基准测试，请使用“-bench”。或“-bench=.”。
> 
> -run regexp 只运行那些匹配正则表达式的测试和示例。

因此，如果您只想运行一个基准测试，您可以这样做：

```
go test -bench=nameOfYourBenchmark -run=^a 
```

这将导致仅运行以`a`. 而且因为每个测试都应该命名为`Test<something>`，所以不会有要运行的测试。

仅运行基准测试：

```
go test -bench=. -run=^a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T02:32:46.147

仅测试**TestFuncOne**

```
$>> go test -run TestFuncOne 
```

> stuff_to_test.go

```
TestFuncOne() {
}

TestFuncTwo() {
} 
```

# mysql - MYSQL - 不同数据库中的两个表

> ID：16161144
> 
> 赞同：1
> 
> 时间：2013-04-23T04:46:29.673
> 
> 标签：mysql, database, search

我需要检查电话号码以查看它们是否匹配，但问题是，一个表在数据库 A 中，而另一个表在数据库 B 中。

我想知道是否可以进行这样的搜索：

```
update `chk_dup`, new set chk_dup.dup='Y' WHERE chk_dup.phone = new.phone; 
```

但我想我需要做这样的事情：

```
update `A.chk_dup`, B.new set A.chk_dup.dup='Y' WHERE A.chk_dup.phone = B.new.phone; 
```

我任何人都知道如何在完全不同的数据库中搜索两个表，这会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:05:35.260

我认为在你的第二个中你有一个语法错误，试试这个：

```
UPDATE `A`.`chk_dup`, `B`.`new` 
SET `A`.`chk_dup`.`dup`='Y' 
WHERE `A`.`chk_dup`.`phone` = `B`.`new`.`phone`; 
```

# node.js - Grunt 警告：未找到源文件

> ID：16161145
> 
> 赞同：1
> 
> 时间：2013-04-23T04:46:29.763
> 
> 标签：node.js, npm, gruntjs

我第一次尝试使用 Grunt。我认为我正确地按照说明安装和使用带有插件的 Grunt (grunt-text-replace)。（例如，请参阅[Grunt 的页面](http://gruntjs.com/getting-started)和[插件的](https://npmjs.org/package/grunt-text-replace).）但是我无法成功运行任何东西——相反，我一直收到同样的错误。我一直在根据 Grunt 和插件的说明检查我的代码，但我看不到我做错了什么。

这是我的 package.json 文件：

```
{
  "name": "brink-prototype",
  "version": "0.0.0",
  "devDependencies": {
    "grunt": "~0.4.1",
    "grunt-contrib-jshint": "~0.1.1",
    "grunt-contrib-nodeunit": "~0.1.2",  
    "grunt-text-replace": "~0.3.2"
  }
} 
```

这是我的 Gruntfile.js：

```
module.exports = function(grunt) {
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    replace: {
      src: ['components/bootstrap/less/navbar.less'],
      dest: 'build/',
      replacements: [{
        from: /\.box-shadow.*$/g,
        to: ''
      }]
    }
  });
  grunt.loadNpmTasks('grunt-text-replace');
  grunt.registerTask('default', ['replace']);
}; 
```

当我在命令行中运行“grunt”时，出现以下错误：

```
Running "replace:src" (replace) task
Warning: No source files found Use --force to continue.    
Aborted due to warnings. 
```

我还用另一个插件（grunt-regex-replace）尝试了这个过程，并得到了完全相同的错误消息。

我哪里出错了？

更新：

以下是文件结构的相关部分：

*   项目/
    *   Gruntfile.js
    *   包.json
    *   成分/
        *   引导程序/
            *   较少的/
                *   navbar.less
    *   节点模块/
        *   咕噜/
        *   咕噜文本替换/

我一直在尝试从 Gruntfile.js 所在的 project/ 目录运行命令。

也许我的路径`src`应该相对于其他东西？我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:51:50.430

grunt-text-replace 插件需要你指定一个子任务。

```
replace: {
  aSubtaskName: {
    src: ['components/bootstrap/less/navbar.less'],
    dest: 'build/',
    replacements: [{
      from: /\.box-shadow.*$/g,
      to: ''
    }]
  }
} 
```

# jakarta-ee - 不同 Jboss 服务器上的应用程序的单一身份验证

> ID：16161147
> 
> 赞同：0
> 
> 时间：2013-04-23T04:46:45.500
> 
> 标签：jakarta-ee, authentication, jboss

我正在一个在 JBOSS 应用程序服务器上运行的 javaEE 项目中工作，场景是这样的，我有两个应用程序 App1.ear 和 App2.ear 将部署在两个不同的服务器 Jboss1 和 Jboss2 上，它们的域将相同作为 jboss1.xyz.com 和 jboss2.xyz.com。现在的问题是，如果用户通过 App1 登录，那么只有他应该能够访问 App2，因此在 App1 处的身份验证将只有一次。我已经通过了 jboss 上的单号阀，但这个解决方案对我不起作用，请针对这种情况提出任何好的解决方案，因为应用程序应该非常安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:17:39.000

您可以选择使用令牌存储 cookie，并在存储有关这些令牌的信息的应用程序之间共享一个持久存储。所以当用户进行切换时，App2 可以获取 cookie 并在存储中检查其是否有效。如果是，则用户将被允许使用 App2。

但是，您必须维护存储，例如在用户注销或会话超时时清理令牌。

# javascript - 在 javascript/jQuery 中动态创建数组对象

> ID：16161150
> 
> 赞同：-2
> 
> 时间：2013-04-23T04:47:04.377
> 
> 标签：javascript, jquery, arrays, multidimensional-array

我想创建一个看起来像这样的变量：

```
var projects = [
  {
    value: "jquery",
    label: "jQuery",
    desc: "the write less, do more, JavaScript library"        
  },
  {
    value: "jquery-ui",
    label: "jQuery UI",
    desc: "the official user interface library for jQuery"
  },
  {
    value: "sizzlejs",
    label: "Sizzle JS",
    desc: "a pure-JavaScript CSS selector engine"
  }
]; 
```

如何动态创建这样的变量？我会在一个循环中写这个，我想继续向声明的变量添加值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:51:19.657

尝试

```
var data = [];
var objPush = {};
objPush.value = "jquery";
objPush.label = "jQuery";
objPush.desc = "the write less, do more, JavaScript library";

data.push(objPush); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:51:17.503

为什么不

```
var projects = [];
projects.push({
    value : "<some-value>",
    label : "<some label>",
    desc : "<description>"
});
projects.push({
    value : "<some-value>",
    label : "<some label>",
    desc : "<description>"
});
.... 
```

# java - 如何在js上为Java小程序设置自动焦点

> ID：16161154
> 
> 赞同：2
> 
> 时间：2013-04-23T04:47:23.080
> 
> 标签：java, javascript, applet, focus

我做了一个小程序。它在加载网页时开始。但是applet失去了焦点，当网页也失去了焦点，需要点击applet的区域才能获得焦点。我尝试过变体，但没有帮助

```
document.getElementById(appletId).focus();
document.getElementById(appletId).requestFocus(); 
```

java - 如何在Java脚本中将焦点设置为小程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:53:03.460

*   确保 HTML 中的小程序元素声明`scriptable=true`
*   向调用`requestFocusInWindow()`.
*   使用 JavaScript 调用该方法。
*   确保打开 JS 控制台以进行运行时调试。

# ruby-on-rails - Coffeescript 意外终止错误

> ID：16161156
> 
> 赞同：0
> 
> 时间：2013-04-23T04:47:24.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript

我的**/assets/javascripts/leads.js.coffee中有这个**

```
jQuery ->
  getRowColour = (status) ->
    switch status
    when "rejected" then return '#FFA500'
    when "confirmed" then return '#C0C0C0'
    when "didn't connect" then return '#90EE90'
    else return '#FFFFFF' 
```

这在我的**/views/leads/index.html.erb**

```
<%= f.select(:status, ["to call","didn't connect","confirmed","rejected"], {:selected => lead.status}, :onchange => "$('#lead_form_#{lead.id}').submit();document.getElementById('lead_row_#{lead.id}').style.backgroundColor=getRowColour(#{lead.status});") %>
        <% end %> 
```

可以看出我在 f.select 中的 onchange 函数有一个 javascript，它调用我的咖啡脚本文件中的函数。

请告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T04:50:50.643

`when`and`else`语句需要比 switch 多缩进一级。

```
jQuery ->
  getRowColour = (status) ->
    switch status
      when "rejected" then return '#FFA500'
      when "confirmed" then return '#C0C0C0'
      when "didn't connect" then return '#90EE90'
      else return '#FFFFFF' 
```

此外，`switch`是 CoffeeScript 中的一个表达式，也是函数中的最后一个表达式，您不需要在`return`后面添加`when`.

# c - 为什么这个链表有序插入段错误？

> ID：16161162
> 
> 赞同：-3
> 
> 时间：2013-04-23T04:47:33.220
> 
> 标签：c, linked-list, segmentation-fault

我正在开发一个按排序顺序插入链接列表的程序，但它不断出现段错误，我不知道为什么。我怀疑它与指针有关，但我不能说，因为在我的编程生涯的这一点上，这些对我来说仍然有点混乱。另外，我必须保持插入原型相同。我无法将节点参数更改为双指针。谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include<stdio.h>
#include<conio.h>

typedef struct node {
    int data;
    struct node  *next;
};

int main ()
{
    struct node* first;  
    int temp,x,y;
    struct node *create (struct node *first);
    first = NULL;     
    void display (struct node *first);
    printf ("\n\nCreating a Linked List\n");
    printf ("\nEnter Element: ");
    scanf ("%d", &x);
    y=x;
    while(y>0)
    {
        scanf ("%d", &x);
        insert_sorted_linked_list(first,x); 
        y--;
    }

    printf ("\nThe list after creation is: ");
    display (first);

    printf ("\nThe sorted list is: ");
    display (first);
    return(0);
}   /*END OF MAIN*/

insert_sorted_linked_list(struct node* head, int val)
{
    struct node* pCur;
    struct node* pNew = (struct node*) (malloc(sizeof(struct node)));

    pNew -> data = val;
    pNew ->next = NULL;
    pCur = head;

    if( pCur->data == NULL )
    {
        head->data = pNew->data;
        head->next = NULL;
    }
    else if (pNew->data  <   pCur->data)
    {
        pNew ->next = pCur ;
        head = pNew;
    }
}

void display (struct node *first)
{   struct node *save;         /*OR sort *save     */
    if (first == NULL)
        printf ("\nList is empty");
    else
    {  save = first;
        while (save != NULL)
        {   printf ("-> %d ", save->data);
            save = save->next;
        }
        getch();
    }
    return;
} 
```

编辑：将 main 更改为 int。调试器不喜欢以下行：

struct node* pNew = (struct node*) (malloc(sizeof(struct node)));

如果（pCur-> 数据 == NULL）

不知道有什么问题。

**编辑2：**

我决定在明天早上之前我不会按照他要求的原始方式让它工作，所以我在这里发布了一个修改版本。那个没有段错误，但事实证明也有逻辑错误。

```
#include <stdio.h>
#include <stdlib.h>
#include<stdio.h>
#include<conio.h>

typedef struct s
{
    int data;
    struct s  *next;
}node;

void insert_sorted_linked_list(node **head, int val);
void display (node **first);
void freeList(node **first);

int main ()
{
    node* first;
    int x,y;

    first = NULL;

    printf ("\n\nCreating a Linked List\n");
    printf ("\nEnter number of elements: ");
    scanf ("%d", &x);
    y=x;
    while(y>0)
    {
        scanf ("%d", &x);
        insert_sorted_linked_list(&first,x);
        y--;
    }
    printf ("\nThe sorted list is: ");
    display (&first);
    freeList(&first);
    return 0;
}

void insert_sorted_linked_list(node **head, int val)
{
    node* pCur;
    node* pNew = (node*) (malloc(sizeof(node)));
    pNew->data = val;
    pNew->next = NULL;
    pCur = (*head);

    if( pCur == NULL )
    {
        (*head) = pNew;
    }
    else if(pNew->data  <   pCur->data)
    {
        pNew->next = pCur;
        (*head) = pNew;
    }
    else
    {
    while(pCur->next!=NULL && pNew->data  >  pCur->next->data)
        pCur = pCur->next;
    pNew->next = pCur->next;
    pCur->next = pNew;
    }
}

void display (node **first)
{
    node *lisprint;         /*OR sort *lisprint     */
    if (*first == NULL)
    printf ("\nList is empty");
    else
    {
        lisprint = *first;
        while (lisprint != NULL)
        {
            printf ("-> %d ", lisprint->data);
            lisprint = lisprint->next;
        }
        getch();
    }
}   /*END OF FUNCTION DISPLAY*/

void freeList(node **first)
{
    node *i;
    i = *first;
    while(i !=NULL)
    {
        (*first) = (*first)->next;
        free(i);
        i = *first;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:11:47.060

请正确格式化您的代码！只是为了看看错误在哪里，真是痛苦！照原样，

```
/*PROGRAM TO CREATE & THEN DISPLAY THE LINKED LIST IN SORTED FORM*/
#include <stdio.h>
#include <stdlib.h>
#include<stdio.h>
#include<conio.h>

typedef struct s
{
    int data;
    struct s  *next;
}node; 
/* your declaration for typedef was incorrect. We use typedef in C for structures so   that we do not have to repeat struct s everytime. Using typedef, we can write node as we do in c++ */

void insert_sorted_linked_list(node **head, int val); /* do not need to return anything, as well as see the parameter. When we want to change a pointer, we pass the address to the pointer, as it results in passing by value */
void display (node **first); /* same here and below */
void freeList(node **first); /* if you don't do this, memory leak!!! */

int main ()
{
    node* first;  /*OR sort *first,*list,*pass  */
    int temp,x,y;

    first = NULL;      /*OR sort *create()  */

    printf ("\n\nCreating a Linked List\n");
    printf ("\nEnter number of elements: "); /* specify what you want the user to enter */
    scanf ("%d", &x);
    y=x;
    while(y>0)
    {
        scanf ("%d", &x);
        insert_sorted_linked_list(&first,x); /*CALLING CREATE FUNCTION, notice the &first*/
        y--;
    }
    printf ("\nThe list after creation is: ");
    display (&first);
    printf ("\nThe sorted list is: ");
    display (&first);
    freeList(&first);
    return 0;
}   /*END OF MAIN*/

void insert_sorted_linked_list(node **head, int val)
{
    node* pCur;
    node* pNew = (node*) (malloc(sizeof(node)));
    pNew->data = val;
    pNew->next = NULL;
    pCur = (*head);

    if( pCur == NULL )
    {
        (*head) = pNew;
    }
    else if (pNew->data  <   pCur->data)
    {
        pNew->next = pCur ;
        (*head) = pNew;
    }
}

/*DISPLAY FUNCTION*/
void display (node **first)
{
    node *save;         /*OR sort *save     */
    if (*first == NULL)
    printf ("\nList is empty");
    else
    {
        save = *first;
        while (save != NULL)
        {
            printf ("-> %d ", save->data);
            save = save->next;
        }
        getch();
    }
}   /*END OF FUNCTION DISPLAY*/

void freeList(node **first)
{
    node *i;
    i = *first;
    while(i !=NULL)
    {
        (*first) = (*first)->next;
        free(i);
        i = *first;
    }
} 
```

# python - Pygame 在碰撞检测时停止移动

> ID：16161169
> 
> 赞同：5
> 
> 时间：2013-04-23T04:47:48.430
> 
> 标签：python, pygame, rect

我本质上是在尝试用 pygame 制作一个“实体”对象。目标是在玩家接触时击退玩家。我目前正在使用（但不能正常工作）如下：

```
keys_pressed = pygame.key.get_pressed()
if 1 in keys_pressed:
    if keys_pressed[K_w]:
        self.player_l[1] += -2
        if self.player_r.colliderect(self.tower_r): self.player_l[1] -= -2
    if keys_pressed[K_a]:
        self.player_l[0] += -2
        if self.player_r.colliderect(self.tower_r): self.player_l[0] -= -2
    if keys_pressed[K_s]:
        self.player_l[1] += 2
        if self.player_r.colliderect(self.tower_r): self.player_l[1] -= 2
    if keys_pressed[K_d]:
        self.player_l[0] += 2
        if self.player_r.colliderect(self.tower_r): self.player_l[0] -= 2 
```

这样做的问题是玩家被“卡”在了塔 Rect 内，尽管返回到他们在碰撞开始之前的位置，玩家 Rect 总是会被拉回塔内，并且碰撞将继续扳机。在最初接触塔矩形后，玩家将无法向任何方向移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-23T04:50:00.983

我在我的一个 pygame 游戏中做了同样的事情。您要做的是创建一个所有对象都将使用的移动功能。它使得不可能通过渲染更新组中的任何精灵，称为一切。如果一个精灵不是一切的一部分，它就不会发生碰撞。这是功能。这会产生一定量的碰撞阻力。基本上，在推动一个物体时，它会推回一定的量。任何不调用move函数的物体即使被推也不会移动，所以只有最初可以移动的物体才能被推，而墙壁等物体在推时不会滑过板面。

```
 def moveRelative(self,other,speed):                                   #This function is a function the one you need uses, which you may find useful. It is designed to move towards or a way from another sprite. Other is the other sprite, speed is an integer, where a negative value specifies moving away from the sprite, which is how many pixels it will move away from the target. This returns coordinates for the move_ip function to move to or away from the sprite, as a tuple
            dx = other.rect.x - self.rect.x
            dy = other.rect.y - self.rect.y
            if abs(dx) > abs(dy):
                    # other is farther away in x than in y
                    if dx > 0:
                            return (+speed,0)
                    else:
                            return (-speed,0)
            else:
                    if dy > 0:
                            return (0,+speed)
                    else:
                            return (0,-speed)

    def move(self,dx,dy):
            screen.fill((COLOR),self.rect)                                 #covers over the sprite's rectangle with the background color, a constant in the program
            collisions = pygame.sprite.spritecollide(self, everything, False)
            for other in collisions:
                    if other != self:
                            (awayDx,awayDy) = self.moveRelative(other,-1)  #moves away from the object it is colliding with
                            dx = dx + 9*(awayDx)                           #the number 9 here represents the object's resistance. When you push on an object, it will push with a force of nine back. If you make it too low, players can walk right through other objects. If you make it too high, players will bounce back from other objects violently upon contact. In this, if a player moves in a direction faster than a speed of nine, they will push through the other object (or simply push the other object back if they are also in motion)
                            dy = dy + 9*(awayDy)
            self.rect.move_ip(dx,dy)                                       #this finally implements the movement, with the new calculations being used 
```

它有很多代码，您可能希望根据自己的目的对其进行更改，但这是一种非常好的方法。如果您想消除反弹功能，您可以考虑将任何朝向对象的移动设置为零，并且只允许远离它的移动。但是，我发现反弹功能对我的游戏有用且更准确。

# iphone - 如何从特定位置或全球检索 x 条最近的公开推文？

> ID：16161173
> 
> 赞同：-2
> 
> 时间：2013-04-23T04:48:14.057
> 
> 标签：iphone, ios, objective-c, twitter

在 Twitter API v 1.0 中。有这个特殊的 API -`GET statuses/public_timeline`返回 x 条最新的公共推文。

然而，他们似乎[已经摆脱了它](https://dev.twitter.com/docs/api/1/get/statuses/public_timeline)。我正在制作一个 iOS Twitter 应用程序，它显示来自世界各地或特定位置的最新推文（取决于用户的选择）。我可以做些什么来获取满足这些标准的公共时间表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:35:01.507

`"There's not really a direct analogue. There's a streaming API called statuses/sample that you could open for a few seconds to kind of get a sudden burst of tweets -- though we don't recommend connecting over cellular networks. The Search API supports searches with geo coordinates."`- 通过 Twitter 开发者讨论的 Taylor Singletary

# ruby-on-rails - 时区混乱（休息 1 小时）

> ID：16161178
> 
> 赞同：4
> 
> 时间：2013-04-23T04:48:50.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, time, timezone

```
Time.use_zone('Pacific Time (US & Canada)') do
  p Time.zone.now
end 
```

我得到以下信息：`=> Sun, 14 Apr 2013 20:30:53 PDT -07:00`

然而，当我做 Rails Time Zone Select.... 它说`-8:00`得很清楚。为什么一个区域是-7，另一个区域是-8？

其他时候，像`Hawaii`这样的时区`-10:00`不会偏移一个小时。

我认为这与 DST 有关，但我更好奇这是否意味着它工作*正常*或*不正确*，还有我需要做的其他事情。

最终我在日期选择器中使用它，我发现当我使用`Time.zone.parse`（连同过滤器周围的时区）时，它会将所有内容偏移 1 小时。

谢谢

**编辑**

这是我刚刚在另一段代码中遇到的类似问题

```
2.0.0-p0 :006 >
2.0.0-p0 :006 > u.meetups.in_future.first.meetup_time
  Meetup Load (0.4ms)  SELECT `meetups`.* FROM `meetups` WHERE `meetups`.`user_id` = 1 AND (meetup_time >= '2013-04-23 04:46:48') ORDER BY meetup_time ASC LIMIT 1
 => Tue, 23 Apr 2013 05:43:00 UTC 00:00
2.0.0-p0 :007 > 
```

请注意与 where 子句相比结果的差异。

**编辑**

它似乎适用于 CST，但 PST 关闭了约 1 小时？我觉得这都是同一个问题，我只是缺少一块拼图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:01:26.800

输出是正确的。太平洋夏令时间的偏移量为 -7，而太平洋标准时间的偏移量为 -8。我的猜测是“Rails Time Zone Select”（无论是什么）只是向您显示“标准”偏移量，而不是当前偏移量。这在时区选择器中很常见。

夏威夷不实施任何类型的夏令时，因此可以解决您的第二点问题。

关于您的第三点，我必须更多地了解您的数据库平台才能回答为什么将这些值转换为 UTC。鉴于这些是事件时间，我会说它们*应该*是 UTC。它们也可能位于“聚会”位置的时区，但前提是还存储了与 UTC 的偏移量。但是它们永远不应该在服务器的时区中。

关于你的第四点，如果没有更多细节，很难说出你的意思。如果您觉得有必要，请展开。

# android - PayPal 意外错误

> ID：16161186
> 
> 赞同：1
> 
> 时间：2013-04-23T04:49:41.107
> 
> 标签：android, paypal

我正在使用`PayPal SDK`. 一切似乎都很好，但是在我成功登录后出现错误。由于没有日志，因此很难弄清楚。它只是一条消息说“意外错误”。非常感谢任何帮助。请参阅下面的代码和屏幕截图。

```
PayPalPayment newPayment = new PayPalPayment();
        newPayment.setSubtotal(new BigDecimal("0.99"));
        newPayment.setCurrencyType("USD");
        newPayment.setRecipient("xxxxx@gmail.com");
        newPayment.setMerchantName("xxxxx");
        newPayment.setPaymentType(PayPal.PAYMENT_TYPE_PERSONAL);
        newPayment.setCustomID("8873482296");
        newPayment.setMemo("Hi! I'm making a memo for a simple payment.");

        Intent paypalIntent = PayPal.getInstance().checkout(newPayment, MainActivity.this.getApplicationContext());
        this.startActivityForResult(paypalIntent, 1); 
```

![在此处输入图像描述](https://i.stack.imgur.com/bI0CH.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T12:26:31.757

许多是您使用的无效电子邮件，未注册为有效的贝宝帐户。因此，如果您在沙盒帐户中进行测试，则可以使用此帐户：tharrahunmein@gmail.com

```
newPayment.setSubtotal(new BigDecimal(1));
newPayment.setCurrencyType("USD");
newPayment.setRecipient("tharrahunmein@gmail.com"); 
```

# python - 过滤数据并显示按序号排序的结果。帖子的

> ID：16161187
> 
> 赞同：1
> 
> 时间：2013-04-23T04:49:42.297
> 
> 标签：python, django, python-2.7

在 Django 中，我需要过滤数据并显示结果。例如

```
Company3(20)
Company1(12)
Company2(3) 
```

这里*“Company1,Company2,Company3”*是公司名称，括号内的*“20,12,3”*是no。特定公司发布的职位。

```
models.py

class User(models.Model):
     first_name= forms.CharField(max_length=30,widget=forms.TextInput())
     last_name = forms.CharField(max_length=30,widget=forms.TextInput())
     username = forms.CharField(max_length=30,widget=forms.TextInput())
     email = forms.EmailField(widget=forms.TextInput())
     password = forms.CharField(widget=forms.PasswordInput())
     companyname = forms.CharField(max_length=30,widget=forms.TextInput())

class jobs(models.Model):
     emp = models.ForeignKey(User, unique=False)
     title = models.CharField(max_length=30)
     referencecode = models.CharField(max_length=30)
     jobsummary = models.TextField()
     jobdetails = models.TextField()
     key_skills = models.CharField(max_length=30) 
```

我试图给views.py就像

```
def search_result(request):

     details=User.objects.filter(jobs__isnull=False).select_related()
     return render_to_response('searchresult.html', {'details': details})

templates
<ul>
{% for d1 in details %}
<li>{{ d1.companyname }}({{ d1.count }})</li>
{% endfor %}
</ul> 
```

给出一些想法来显示结果，如上所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:07:54.483

您应该改为使用`d1.jobs_set.count`来获取作业数。

因此，将您的模板更新为：

```
<ul>
{% for d1 in details %}
    <li>{{ d1.companyname }}({{ d1.jobs_set.count }})</li>
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:20:58.043

也许更有效的看起来像

```
details = User.objects.filter(jobs__isnull=False).annotate(job_count=Count('jobs'))\
                   .order_by('job_count') 
```

然后在模板中

```
<ul>
{% for d1 in details %}
    <li>{{ d1.companyname }}({{ d1.job_count }})</li>
{% endfor %}
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:08:55.487

你真的应该有一个`Company`模型；[在聚合 api](https://docs.djangoproject.com/en/1.5/topics/db/aggregation/)的帮助下，这将成为一项简单的任务；但对于您的情况，您需要在您的视图中执行此操作：

```
from collections import defaultdict

from django.shortcuts import render

def search_result(request):

    company_count = defaultdict(int)
    for obj in User.objects.filter(jobs__isnull=False).select_related():
        company_count[obj.companyname] += 1

    return render(request, 'searchresult.html', {'details': company_count}) 
```

您的模板将变为：

```
{% for company_name in details %}
    {{ company_name }}({{ details.company_name }})
{% endfor %} 
```

# php - 如何升级 SugarCRM 6.3.0RC2(sugar CRM 企业版)

> ID：16161195
> 
> 赞同：2
> 
> 时间：2013-04-23T04:50:54.520
> 
> 标签：php, content-management-system, sugarcrm

我正在使用 6.3.0RC2（糖 CRM 企业）并想升级到 6.5.12（糖 CRM 企业）。这意味着整合它并保留所有旧数据我该怎么办？我期待尽快看到您的回复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:52:05.193

您可以使用这些升级包到达那里...

SugarEnt-Upgrade-6.3.0RC1-to-6.3.0.zip SugarEnt-Upgrade-6.3.x-to-6.4.6.zip SugarEnt-Upgrade-6.4.x-to-6.5.12.zip

这些都可以在您的客户下载门户中找到。

# php - 如何将动态创建的文本框值发布到 php 中的下一页？

> ID：16161198
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:51:02.630
> 
> 标签：php, jquery

我是 php、jquery 和 ajax 的新手。我在 jquery 中有一个代码，可以在单击按钮时动态添加和删除文本框。我想将动态创建的文本框值的值发布到下一页并在下一页显示这些值。非常感谢任何帮助。在此先感谢。

我已经粘贴了下面的代码..

您还可以查看链接[http://jsfiddle.net/NSePb/1/](http://jsfiddle.net/NSePb/1/)

```
 $(document).ready(function () {

            var counter = 1;

            $("#addButton").click(function () {

            if(counter>7){
                alert("Only 7 textboxes allow");
                return false;
                }   

        var newTextBoxDiv = $(document.createElement('div'))
     .attr("id", 'TextBoxDiv' + counter);

        newTextBoxDiv.after().html('<label>Product #'+ counter + ' : </label>' +
      '<input type="text" size="22" name="product' + counter + 
      '" id="product' + counter + '" value="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\
          <label>Quantity #'+ counter + ' : </label>' +
      '<input type="text" size="1" name="qty' + counter + 
      '" id="qty' + counter + '" value="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\
          <label>Rate #'+ counter + ' : </label>' +
      '<input type="text" size="2" name="rates' + counter + 
      '" id="rates' + counter + '" value="" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n\
          <label>Total #'+ counter + ' : </label>' +
      '<input type="text" size="3" name="total' + counter + 
      '" id="total' + counter + '" value="" > ');

        newTextBoxDiv.appendTo("#TextBoxesGroup");

        counter++;
        });

        $("#removeButton").click(function () {
        if(counter==0){
        alert("No more textbox to remove");
        return false;
        }   

        counter--;

        $("#TextBoxDiv" + counter).remove();

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:04:10.417

您需要使用 $_POST 超全局变量，并使用 HTML 元素的 id。

考虑一下：

```
<form action="foobar.php" method="post">
<input type="text" id="an_element" name="an_element" />
</form> 
```

如果您想使用 PHP 显示它，您将转到 action 属性指向的页面（在我们的例子中为`foobar.php`），并使用 $_POST 超全局变量。

所以 PHP 代码看起来像这样：

```
<?php
echo $_POST['an_element'];
?> 
```

因此，以您的`rates`文本框为例，您可能希望这样做：

```
<?php
echo $_POST['rates'];
?> 
```

**请注意**，如果您将`action`属性设置为`get`，则需要使用`$_GET`而不是`$_POST`。

此外，只需查看您的代码，您`form`的 HTML 中就会缺少该元素。而不是 using `$(document.createElement('div')) .attr("id", 'TextBoxDiv' + counter);`，您可能想要使用它：

```
$(document.createElement('form'))
.attr({
id: 'TextBoxDiv' + counter,
action: 'foobar.php',
method: 'post'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:08:11.793

当您动态创建文本框时，我假设您的文本框名称是动态的，我在这里看不到。因此，将动态字段名称存储在数组中

```
$request = array(#field names#) // comma separated
$requestJson = json_encode($request); 
```

经过

```
$requestJson as an hidden field in the form and submit the form. 
```

在下一页，即在操作页面中，接收隐藏字段并对其进行解码

```
$requestArr = json_decode($_REQUEST['requestFields']); 
```

循环数组并接收值

```
for($i=0; $i < count($requestArr); $i++)
{
        $value = $requestArr[$i]; // get the field name
        $content = $_REQUEST[$value]; // get the input value
            $fetchedResult = array($content); // Store the text field value 

}

Now your $fetchedResult will have the values to your future usage. 
```

更新 - 根据评论的最新问题

```
var queryArr = [];

newTextBoxDiv.appendTo("#TextBoxesGroup"); // after this line add 
queryArr.push(product' + counter + '); // alert OR print in console to check the array values as and when the button is clicked.

$("#TextBoxDiv" + counter).remove(); //after this add
var removeItem = product' + counter + ' // #removed id#;
y = jQuery.grep(queryArr, function(value) {
  return value != removeItem;
});

$('<input>').attr({
    type: 'hidden',
    id: 'foo',
    name: 'bar',
    value : queryArr
}).appendTo('form'); 
```

# bpel - bpel bpel:doXslTransform 的正确语法

> ID：16161204
> 
> 赞同：2
> 
> 时间：2013-04-23T04:51:25.157
> 
> 标签：bpel

我正在尝试对 bpel 赋值语句中的 xml 结构进行 XSL 转换。存在语法问题，但我无法找到官方文档。[互联网上](http://docs.wso2.org/wiki/display/BPS300/Usage+of+XslTransform+Function)到处都有例子，但我没有找到明确的解释。这是我最好的镜头。最后两个参数有什么作用？为什么 eclipse 说第一个参数必须是文字，即使 test3.xsl 是一个字符串？

```
<bpel:assign validate="yes" name="Assign">
    <bpel:copy keepSrcElementName="no">
        <bpel:from>
            <![CDATA[bpel:doXslTransform("test3.xsl", $personalInfoServiceOutput.parameters), "middle", $positionSkillManagementInput]]>
        </bpel:from>
        <bpel:to variable="positionSkillManagementInput"></bpel:to>
    </bpel:copy>
</bpel:assign> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:05:12.637

doXSLTransform 的签名如下所示：

`object bpel:doXslTransform(string, node-set, (string, object)*)`

第一个参数是 XSLT 脚本的名称，第二个参数是标识源文档的 XPath（例如，变量、部分、节点集、节点）。第三个和第四个参数是一个键值对，字符串是键，对象是值。这些对被映射到脚本的参数上下文中，以便您可以通过脚本中的名称访问这些值。这些对可以有任意数量。

查找此类内容的最佳资源是[WS-BPEL 2.0 规范](http://docs.oasis-open.org/wsbpel/2.0/wsbpel-v2.0.html)，doXSLTransform 在 Sect 中进行了描述。8.4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T11:35:37.023

我遇到了同样的问题。同意 NGoyal。在 BPEL 中显示错误，但在部署时有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T07:19:47.583

当我使用以下代码时：

```
<bpel:copy keepSrcElementName="no">
<bpel:from>
<![CDATA[bpel:doXslTransform("parseSample.xsl", $output.payload)]]>
</bpel:from>
<bpel:to variable="output"></bpel:to>
</bpel:copy> 
```

我也得到错误，第一个参数必须是文字字符串。

但是，当我将我的服务（有错误）部署到 wso2 bps 时，它工作正常。

你可以试试这个。

# web-services - 用于将 C++ 编译器集成到网站的在线 API

> ID：16161211
> 
> 赞同：0
> 
> 时间：2013-04-23T04:52:12.407
> 
> 标签：web-services, api, compiler-construction, online-compilation

我想制作一个在线代码编辑器，并将 C++ 编译器集成到我的网站中。是否有任何 API 可以做同样的事情。任何允许编译和执行用户代码的服务。

更具体地说，有没有像 ideone.com 这样的服务，我可以免费嵌入到我的网站上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T05:02:09.627

ideone ( [`ideone.com`](http://ideone.com)) 免费提供其 API 和服务 ( [`ideone.com/api`](http://ideone.com/api))。你应该试试看。

# eclipse - Eclipse juno + cuda 插件错误

> ID：16161212
> 
> 赞同：0
> 
> 时间：2013-04-23T04:52:14.847
> 
> 标签：eclipse, plugins, path, cuda, makefile

我正在使用 Eclipse Juno 并行版本。我已经安装了
cuda 插件。但是在构建示例 cuda helloworld
程序时，我遇到了错误-

```
 make all      
    make: *** No rule to make target `exe_cuda', needed by `all'.  Stop.      

    ******Makefile snapshot************** 
     all: exe_cuda   

    # Tool invocations             
@echo 'No tool found that can build the extension specified with the build       
    artifact name $@'         
    # Other Targets    
    clean:     
-$(RM) $(OBJS)$(C_DEPS) exe_cuda    
-@echo ' ' 
```

任何建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:27:30.310

我同意工具链似乎没有为 C 项目正确设置。

我的建议是：

*   而是创建一个 C++ 项目。这似乎行得通。
*   请改用[Nsight Eclipse 版](http://docs.nvidia.com/cuda/nsight-eclipse-edition-getting-started-guide/index.html)。它与 linux CUDA 5 软件包一起自动安装（只需`nsight`从终端窗口键入）。
*   您可以将问题报告给该 cuda 插件的开发者 fixstars 公司。他们似乎自 2011 年以来就没有更新它，所以我不知道它是否得到积极维护。但是帮助页面在[这里](http://ydl.net/eclipse_cuda_plugin/userdoc.shtml)，其中包含一个您可以使用的邮件列表的链接。

# jquery - $(e.target) != divObject

> ID：16161213
> 
> 赞同：0
> 
> 时间：2013-04-23T04:52:17.590
> 
> 标签：jquery

我正在尝试查看 $(e.target) != 是否指向我创建的 div 对象。

这是我的对象

```
var newDiv = $("<div>").addClass("dropDown"); 
```

我正在尝试将该对象与我的点击命令匹配。

```
$(document).on("click", function(e){
    if(!$(e.target) == newDiv)
    {
         //Do something
    }
}); 
```

我如何引用两者可以匹配或不匹配的某种名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:56:07.407

您可以使用`is`方法：

```
$(document).on("click", function (e) {
    if ( !$(e.target).is(newDiv) ) {
      // ...
    }
}); 
```

[http://jsfiddle.net/eRPfr/](http://jsfiddle.net/eRPfr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T04:57:36.787

这行代码：

```
if(!$(e.target) == newDiv) 
```

正在比较两个单独的 jQuery 对象，看看它们是否是同一个对象。这永远不会是真的，因为它们不是同一个对象。这种比较不会查看每个 jQuery 对象中的 DOM 对象是否相同，但您可以这样做：

```
if(e.target != newDiv[0]) 
```

# php - 数组中的最大和最小整数，不包括 NULL 或 ZERO 值

> ID：16161214
> 
> 赞同：0
> 
> 时间：2013-04-23T04:52:26.450
> 
> 标签：php, arrays

我正在使用以下 php 函数从我的数组中获取最高和最低整数值。

`min($output[$k])`和`max($output[$k])`

问题：我想从该数组中获取最大和最小整数值，不包括`ZERO`s 和`NULL`values

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T04:56:16.750

用于[`array_diff()`](http://php.net/manual/ru/function.array-diff.php)过滤数组：

```
<?php
header('Content-Type: text/plain');

$buffer   = array(null, 0, 1, 2, 3, 0, null, 1);
$filtered = array_diff($buffer, array(null, 0));

$max = max($filtered);
$min = min($filtered);

var_dump($max, $min);
?> 
```

显示：

```
int(3)
int(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:54:22.223

利用

```
max(array_filter($output[$k)); 
```

# web-services - 我们如何从ui调用restful webservice post()方法

> ID：16161215
> 
> 赞同：0
> 
> 时间：2013-04-23T04:52:35.590
> 
> 标签：web-services, rest

我对宁静的网络服务很陌生。我需要`post()`从我的应用程序表单中调用一个 restful webservice 方法。

我们如何`post()`从用户界面调用restful webservice方法。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:59:04.617

您将不得不使用[`ajax`](http://www.w3schools.com/ajax/). 阅读更多关于它的信息。

# c# - 文件上传控件无法返回正确的内容。正在附加额外的字符

> ID：16161221
> 
> 赞同：3
> 
> 时间：2013-04-23T04:53:24.977
> 
> 标签：c#, asp.net

我有一个文件上传控件。我必须读取文件内容。

实际文件内容是

```
CREATE PROCEDURE dbo.ws_Device_Update
(
    @ApplicationId uniqueidentifier   ,
    @OriginalApplicationId uniqueidentifier   ,
    @DeviceIMEI nvarchar (50)  ,
    @OriginalDeviceIMEI nvarchar (50)  ,
    @ModelId int   ,
    @DeviceName nvarchar (50)  ,
    @DeviceDescription nvarchar (255)  ,
    @DeviceState int   ,
    @IsExpired bit   ,
    @IsSuspended bit   ,
    @LastAccessed datetime   ,
    @ClientSeqNo bigint   ,
    @ServerSeqNo bigint   ,
    @ModelCode varchar (50)  ,
    @PushToken varchar (512)  ,
    @PushLastAlive datetime   ,
    @PushLastDead datetime   ,
    @DeviceType int   
)
AS 
```

我正在使用下面的程序

```
int fileLength = fileUpload.PostedFile.ContentLength;            
Byte[] contentInBytes = new Byte[fileLength];
using (Stream streamContent = fileUpload.FileContent)
{
  streamContent.Read(contentInBytes, 0, fileLength);
}
var xx = ASCIIEncoding.ASCII.GetString(contentInBytes); 
```

我得到的输出是

```
???CREATE PROCEDURE dbo.ws_Device_Update
(
    @ApplicationId uniqueidentifier   ,
    @OriginalApplicationId uniqueidentifier   ,
    @DeviceIMEI nvarchar (50)  ,
    @OriginalDeviceIMEI nvarchar (50)  ,
    @ModelId int   ,
    @DeviceName nvarchar (50)  ,
    @DeviceDescription nvarchar (255)  ,
    @DeviceState int   ,
    @IsExpired bit   ,
    @IsSuspended bit   ,
    @LastAccessed datetime   ,
    @ClientSeqNo bigint   ,
    @ServerSeqNo bigint   ,
    @ModelCode varchar (50)  ,
    @PushToken varchar (512)  ,
    @PushLastAlive datetime   ,
    @PushLastDead datetime   ,
    @DeviceType int   
)
AS 
```

一些额外的**？？？**人物来了……我不知道从哪里来？

产生的字节数组是

```
239,187,191,67,82,69,65,84,69,32,80,82,79,67,69,68,85,82,69,32,100,98,111,46,119,115,95,68,101,118,105,99,101,95, 85,112,100,97,116,101,13,10,40,13,10,9,64,65,112,112,108,105,99,97,116,105,111,110,73,100,32,117,110,105,113,117,               101,105,100,101,110,116,105,102,105,101,114,32,32,32,44,13,10,9,64,79,114,105,103,105,110,97,108,65,112,112,108,                105,99,97,116,105,111,110,73,100,32,117,110,105,113,117,101,105,100,101,110,116,105,102,105,101,114,32,32,32,44,                13,10,9,64,68,101,118,105,99,101,73,77,69,73,32,110,118,97,114,99,104,97,114,32,40,53,48,41,32,32,44,13,10,9,64,                79,114,105,103,105,110,97,108,68,101,118,105,99,101,73,77,69,73,32,110,118,97,114,99,104,97,114,32,40,53,48,41,32,                32,44,13,10,9,64,77,111,100,101,108,73,100,32,105,110,116,32,32,32,44,13,10,9,64,68,101,118,105,99,101,78,97,109,                101,32,110,118,97,114,99,104,97,114,32,40,53,48,41,32,32,44,13,10,9,64,68,101,118,105,99,101,68,101,115,99,114,105,                112,116,105,111,110,32,110,118,97,114,99,104,97,114,32,40,50,53,53,41,32,32,44,13,10,9,64,68,101,118,105,99,101,83,                116,97,116,101,32,105,110,116,32,32,32,44,13,10,9,64,73,115,69,120,112,105,114,101,100,32,98,105,116,32,32,32,44,13,                10,9,64,73,115,83,117,115,112,101,110,100,101,100,32,98,105,116,32,32,32,44,13,10,9,64,76,97,115,116,65,99,99,101,115,                115,101,100,32,100,97,116,101,116,105,109,101,32,32,32,44,13,10,9,64,67,108,105,101,110,116,83,101,113,78,111,32,98,105,                103,105,110,116,32,32,32,44,13,10,9,64,83,101,114,118,101,114,83,101,113,78,111,32,98,105,103,105,110,116,32,32,32,44,13,                10,9,64,77,111,100,101,108,67,111,100,101,32,118,97,114,99,104,97,114,32,40,53,48,41,32,32,44,13,10,9,64,80,117,115,104,84,                111,107,101,110,32,118,97,114,99,104,97,114,32,40,53,49,50,41,32,32,44,13,10,9,64,80,117,115,104,76,97,115,116,65,108,105,                118,101,32,100,97,116,101,116,105,109,101,32,32,32,44,13,10,9,64,80,117,115,104,76,97,115,116,68,101,97,100,32,100,97,116,                101,116,105,109,101,32,32,32,44,13,10,9,64,68,101,118,105,99,101,84,121,112,101,32,105,110,116,32,32,32,13,10,41,13,10,65,83 
```

我不知道“239,187,191”是从哪里来的......关于如何解决这个问题的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:07:59.090

`239 187 191`表示`UTF-8` [字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)

试试[`StreamReader Constructor (String, Encoding, Boolean)`](http://msdn.microsoft.com/en-us/library/akzyzwh9.aspx)它有参数来检测编码

```
StreamReader reader = new StreamReader(fileUpload.FileContent, 
                  Encoding.Unicode, true);

string fromFile= reader.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T05:00:33.300

它是 unicode 字节顺序标记。
使用`var xx = Encoding.UTF8.GetString(contentInBytes);`.

# php - 如何将php变量值分配为java脚本

> ID：16161222
> 
> 赞同：-5
> 
> 时间：2013-04-23T04:53:28.757
> 
> 标签：php

```
<script>
var id=`$`php;
</script> 
```

我已将 php 变量存储添加为 JavaScript。但我的代码有些问题。有什么问题请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T04:54:45.007

您需要在变量名周围使用 PHP 标记，并且需要使用它`echo`来打印出值

```
<script>
  var id = <?php echo $whatever; ?>;
</script> 
```

如果是字符串，请使用引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:57:57.167

```
<script type="text/java script">
var id='<?php echo $id;?>';
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:54:59.627

以这种方式尝试

```
<script>
var id=<?php echo $var;?>
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T04:55:24.933

尝试这个

```
<script>
    var id= <?php echo $php;?>;
</script> 
```

# android - 活动恢复时 GPS 不工作

> ID：16161225
> 
> 赞同：0
> 
> 时间：2013-04-23T04:53:39.590
> 
> 标签：android

我需要在用户登录之前计算用户当前的经度和纬度。我已经在我的移动设备中测试了我的代码，但它似乎不起作用。这是我的代码：

```
 LocationManager mlocManager=null; 
     LocationListener mlocListener=null;

     @Override
     public void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);        
     mlocListener = new MyLocationListener();
     }

     @Override protected void onResume() {    
     super.onResume();    
     mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES,MIN_DISTANCE_CHANGE_FOR_UPDATES, mlocListener);
     }

     @Override  protected void onPause() {    
     super.onPause();    
     mlocManager.removeUpdates(mlocListener); //<8>     
     } 

     /* Class My Location Listener */ 
     public class MyLocationListener implements LocationListener 
     { 

      @Override 
      public void onLocationChanged(Location loc) 
      {         
        Toast.makeText(getApplicationContext(),"In onchange", Toast.LENGTH_SHORT).show();
        if(loc!=null){                                                                  

            latitude=loc.getLatitude(); 
            longitude=loc.getLongitude(); 

            if(loc.getLatitude()!=0.0 || loc.getLongitude()!=0.0){       

                Toast.makeText(getApplicationContext(),"Location not null",    Toast.LENGTH_SHORT).show();
                SharedPreferences prefsSaveLatLong = context.getSharedPreferences("prefsSaveLatLong",Context.MODE_PRIVATE);     
                SharedPreferences.Editor e = prefsSaveLatLong.edit();
                e.remove("LAT");
                e.remove("LONG");
                e.putString("LAT",Double.toString(loc.getLatitude()));
                e.putString("LONG",Double.toString(loc.getLongitude()));
                e.commit();

                String Text = "My current location is: " + "Latitude = " +   loc.getLatitude() + "Longitude = " + loc.getLongitude(); 
                Toast.makeText(getApplicationContext(),Text+" "+latitude+" "+longitude, Toast.LENGTH_SHORT).show();

            }else{

                SharedPreferences prefsSaveLatLong = context.getSharedPreferences("prefsSaveLatLong",Context.MODE_PRIVATE);
                if(prefsSaveLatLong.contains("LAT") && prefsSaveLatLong.contains("LONG")){

        SharedPreferences.Editor e1 = prefsSaveLatLong.edit();
                    e1.remove("LAT");
                    e1.remove("LONG");
                    e1.commit();
                }
            }
            // set latitude longitude to label
            setLatLongLabel();

        }else{
            latLongLabel.setTextColor(Color.parseColor("#FF0000"));
            latLongLabel.setText("Latitude-Longitude not available");

            SharedPreferences prefsSaveLatLong = context.getSharedPreferences("prefsSaveLatLong",Context.MODE_PRIVATE);
            if(prefsSaveLatLong.contains("LAT") && prefsSaveLatLong.contains("LONG")){
                SharedPreferences.Editor e1 = prefsSaveLatLong.edit();
                e1.remove("LAT");
                e1.remove("LONG");
                e1.commit();
            }
        }
    } 

    @Override 
    public void onProviderDisabled(String provider) 
    { 
        gpsEnabled=false;               
        if(!gpsEnabled){            
             Toast.makeText( getApplicationContext(),"Gps Disabled", Toast.LENGTH_SHORT ).show();
            showSettingsAlert();
        }    
    } 

    @Override 
    public void onProviderEnabled(String provider) 
    { 
        gpsEnabled=true;        
        Toast.makeText(getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show(); 
    } 

    @Override 
    public void onStatusChanged(String provider, int status, Bundle extras) 
    { 
        if(status==0){
            Toast.makeText(getApplicationContext(),"OUT_OF_SERVICE",Toast.LENGTH_SHORT).show();
            SharedPreferences prefsSaveLatLong = context.getSharedPreferences("prefsSaveLatLong",Context.MODE_PRIVATE);
            if(prefsSaveLatLong.contains("LAT") && prefsSaveLatLong.contains("LONG")){
                SharedPreferences.Editor e1 = prefsSaveLatLong.edit();
                e1.remove("LAT");
                e1.remove("LONG");
                e1.commit();
            }
        }
        else if(status==1){
            Toast.makeText(getApplicationContext(),"TEMPORARILY_UNAVAILABLE",Toast.LENGTH_SHORT).show();            
        }else if(status==2){
            Toast.makeText(getApplicationContext(),"AVAILABLE",Toast.LENGTH_SHORT).show();
        }    
    }   

    }/* End of Class MyLocationListener */enter code here

` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:58:51.780

尝试这样的事情

```
public class ShowLocationActivity extends Activity implements LocationListener {
      private TextView latituteField;
      private TextView longitudeField;
      private LocationManager locationManager;
      private String provider;

    /** Called when the activity is first created. */

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
          System.out.println("Provider " + provider + " has been selected.");
          onLocationChanged(location);
        } else {
          latituteField.setText("Location not available");
          longitudeField.setText("Location not available");
        }
      }

      /* Request updates at startup */
      @Override
      protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
      }

      /* Remove the locationlistener updates when Activity is paused */
      @Override
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
      }

      @Override
      public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
      }

      @Override
      public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

      }

      @Override
      public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

      }

      @Override
      public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
      }
    } 
```

看[这个](http://www.vogella.com/articles/AndroidLocationAPI/article.html)教程

# ios - 获取 ios 每次更改的电池状态

> ID：16161228
> 
> 赞同：0
> 
> 时间：2013-04-23T04:53:48.493
> 
> 标签：ios, batterylevel

我想在 iOS 中显示我设备的电池状态。

我正在编写以下代码来显示电池状态。

```
UIDevice *myDevice = [UIDevice currentDevice];

[myDevice setBatteryMonitoringEnabled:YES];
double batLeft = (float)[myDevice batteryLevel] * 100;
NSLog(@"%.f",batLeft);
NSString * levelLabel = [NSString stringWithFormat:@"%.f%%", batLeft];
lblLabel.text =levelLabel; 
```

应用程序运行时，它显示电池状态良好。但是，当应用程序处于后台时，它不会采用更新的值。我想每次都显示设备的电池状态。我还想在电池电量耗尽 2% 到 3% 时发出通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:07:29.833

为了实现您想要执行的应用程序，您需要获得运行后台的权限。为应用程序在后台运行所做的唯一规定是需要播放背景音频的应用程序，例如音乐播放器或 VOIP 客户端。如果这只是一个测试应用，并且您不打算通过应用商店发布它，您可以使用 AVAudioSession 获取后台权限并轮询电池状态。如果您打算发布应用程序，您的应用程序获得后台权限的场景必须使用户受益。即它必须播放音乐或处理电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:12:25.947

这是一个每秒检查一次电池的示例。您需要检查电池状态何时更改，但我认为您当前的代码在 viewDidLoad 中只读取一次。

```
- (void)viewDidLoad {
    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(checkBattery) userInfo:nil repeats:YES];
}

- (void)checkBattery {

    [myDevice setBatteryMonitoringEnabled:YES];
    double batLeft = (float)[myDevice batteryLevel] * 100;
    NSLog(@"%.f",batLeft);
    NSString * levelLabel = [NSString stringWithFormat:@"%.f%%", batLeft];
    lblLabel.text =levelLabel;

} 
```

# asp.net-mvc - 在 Knockout 绑定数据之前查看渲染

> ID：16161240
> 
> 赞同：1
> 
> 时间：2013-04-23T04:55:17.043
> 
> 标签：asp.net-mvc, knockout.js, breeze, single-page-application, durandal

我确信以前有人问过这个问题，但很遗憾我找不到它 - 任何能帮助我指出正确方向的帮助都将不胜感激。

我正在使用 Durandal 加载视图/视图模型，并且在激活方法期间，我要求获取单个记录然后显示。我正在取回记录（检查了 XHR 响应并且所有数据都恢复正常），但我只能假设视图在数据准备好显示之前正在加载。没有 JS 错误，完全没有错误，但我的屏幕中间只有一个大空白，即使我知道数据应该显示......

视图模型：

```
define(['durandal/system', 'services/logger', 'services/datacontext'], function (system, logger, datacontext) {
    var aForm = ko.observable();
    var initialized = false;

    function activate(routeData) {
        var id = parseInt(routeData.id);
        return refresh(id);
    };

    function refresh(id) {
        return datacontext.getaFormById(id, aForm);
    }

    var vm = {
        activate: activate,
        aForm: aForm,
        title: "THE TITLE DISPLAYS JUST FINE"
    }
    return vm;
}); 
```

看法 ：

```
<h3 class="page-title" data-bind="text: title"></h3>

<div class="container-fluid" data-bind="with: aForm">
    <div class="row-fluid">
        <div class="span12">
            <strong>Testing</strong>
            <strong data-bind="text: id"></strong>        
        </div>
    </div>

    <h2 data-bind="text: description"></h2>
    <h2 data-bind="text: checkType().description"></h2>
</div> 
```

我投入了强大的测试，它甚至没有渲染，只有标题。谁能指出我正确的方向？我会创建一个小提琴，但是当我对 ViewModel 中的数据进行硬编码时它会起作用。

*编辑 ：*

好吧，在深入研究之后，我可能没有正确返回对象，特别是在 data.entity 返回类型中。这会导致问题吗？

```
 var getaFormById = function (aFormId, aFormObservable) {

        var query = EntityQuery.from('aForms')
            .where('id', '==', aFormId);

        return manager.executeQuery(query)
            .then(querySucceeded)
            .fail(queryFailed);

        function querySucceeded(data) {
            if (aObservable) {
                aObservable(data.entity);
            }
            logger.log('Retrieved selected [aForm] from remote data source', data, system.getModuleId(datacontext), true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:07:14.960

您没有在`executeQuery`成功回调中正确填充 observable，这就是您的 UI 未正确呈现的原因。

从`executeQuery` [文档](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_executeQuery)中`successFunction`调用了以下参数

> 成功函数（[数据]）
> 
> *   **数据**对象
>     *   **结果**实体数组
>     *   ...

所以你需要从`data.results`数组中填充你的 observable 而不是表单`data.entity`（它只是返回未定义）：

```
if (aObservable) {
   aObservable(data.results[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:06:36.567

您可以通过从 activate 函数返回一个 jQuery promise() 来告诉 Durandal 推迟绑定。

有关说明，请参见 Ryan Keeter 的视频：[http ://www.youtube.com/watch?v=w_XjWg6xL8I](http://www.youtube.com/watch?v=w_XjWg6xL8I)

# android - Android 为什么在你已经打开时更新处理程序或异步任务中的 UI

> ID：16161242
> 
> 赞同：2
> 
> 时间：2013-04-23T04:55:30.273
> 
> 标签：android, android-asynctask, handler, message-queue

我很困惑为什么要更新处理程序、异步任务或 runOnUiThread 中的 ui 元素，如果您已经在 UI 线程上，请考虑以下片段，编号从 1 到 4：（出于演示目的，可能有语法错误）

```
// in MainActivity.java #1
public void onCreate(Bundle bundle) {
     setContentView(R.layout.main);
     TextView name = (TextView)findViewById(R.id.name);
     name.setText("Name Changed!!");
}

// in MainActivity.java #2
public void onCreate(Bundle bundle) {
     setContentView(R.layout.main);
     TextView name = (TextView)findViewById(R.id.name);
     handler.post(new Runnable() {
           public void run() {
               name.setText("Name Changed!!");
           }
          });
}

// in MainActivity.java #3
public void onCreate(Bundle bundle) {
     setContentView(R.layout.main);
     TextView name = (TextView)findViewById(R.id.name);
     runOnUiThread(new Runnable() {
           public void run() {
               name.setText("Name Changed!!");
           }
          });
}

// in MainActivity.java #4
public void onCreate(Bundle bundle) {
     setContentView(R.layout.main);
     ...same thing,...update textview in AsyncTask
}

 // in MainActivity.java #5
public void onCreate(Bundle bundle) {
     setContentView(R.layout.main);
      TextView name = (TextView)findViewById(R.id.name);
     name.post(new Runnable() {
           public void run() {
               name.setText("Name Changed!!");
           }
          });
} 
```

正如您从示例 #1 - #4 中看到的那样，我不明白为什么您需要使用 #2、#3 或 #4，因为 #1 您已经在 UI 线程上！！！

换句话说，我说#1-#4 是相同的——即你想在 UI 线程/主线程上执行一些东西，所以告诉我为什么你会使用 #2、#3 或 #4，如果# 1 已经在 UI 线程上。

每个有什么区别？

请提供任何文档或实际用例的引用

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:10:06.037

我发现很难说出你的问题到底是什么，但是关于你的论文的一些注释。

不，#1 到#4 不一样。

*   有效性：是的，*如果*您已经在 UI 线程上*并且*没有昂贵的计算或冗长的 I/O 操作要做，那么没有必要从 #2 到 #4 进行选择。
*   时机：根据情况，#2到#4的效果有一定的概率出现比#1晚一点。
*   复杂性/等待：通常只有#4 能让你干净地等待阻塞 I/O 或进行冗长的计算。根据`Handler`，#2 也可能有效，但这不是 Handlers 的用途。
*   处理程序：在您的#2 中，根本无法保证您使用的是主/UI 线程处理程序*。*该代码可以很好地在非主/ UI 线程上运行。
*   # 3是一种方便的方法。

所以*不，它们与**一般*情况相去甚远。

**附言**

*   优先级：取决于`Thread`您使用 a 时的代码类型，以及在of`Handler`的任何默认情况下，您的代码将以后台优先级运行，并且必须与系统上的所有其他后台线程一起使用 10% 的 CPU 时间，除非你调整优先级。有关[详细讨论，请参见此处](https://stackoverflow.com/a/14217816/1856738)。`doInBackground()``AsyncTask`

**聚苯乙烯**

既然你在评论中问“反过来”：

*   # *如果*您确定自己在 UI 线程上*并且*不进行计算和/或 I/O，则1 是最有效和最直接的

*   # 2 仅在处理程序使用主/UI 线程时有效。为什么要使用它？如果您在代码中的某个位置，与任何可用的`Context`or分离`View`，您仍然可以这样做`newHandler(Looper.getMainLooper())`，这为您`Handler`提供了 UI 线程。

*   # 3 指`View`和`Context`相关的便利方法。只要您手头有这些对象之一，您就可以使用它们在 UI 线程上执行某些操作。

*   # 如果您正在执行昂贵的操作或等待，则必须使用 4。但是，`AsyncTask`这只是一个用于此目的的便利类，旨在用于相对较短的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:08:47.450

`runOnUiThread`如果您已经在 UI 线程上，则无需使用或您描述的任何其他情况。这些是为您不在 UI 线程中的情况提供的。

[在此处](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)阅读开发人员指南。它包括解释如果您尝试在 UI 线程之外的 UI 上执行操作会出现什么问题的示例，并解释了避免它们的各种选项。

但是在您的示例中，简单地说，您在一个活动中并且您没有产生任何其他线程，因此您在 UI 线程中并且不需要任何特殊方法来访问 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:16:24.430

1 这是在 UI 线程中更新 UI 的正确和最直接的方法

*   如果您只想更新 UI，则不需要 #2 #3 和 #4

2当我们需要在单独的线程中执行任务时，专门使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)

3 [runonUI](https://developer.android.com/training/multiple-threads/communicate-ui.html) () 永远不会在 oncreate() 中使用，因为您已经在 UI 线程上。它用于从非 UI 线程更新 UI，例如从异步任务的 doinbackground()

4 [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)不应该只用于更新 UI 元素，其主要目的是仅在活动的后台执行任务。尽管执行前和执行后功能可以更新 UI。

# php - 可以在 GET 请求中发送 0x00 吗？

> ID：16161244
> 
> 赞同：0
> 
> 时间：2013-04-23T04:55:50.383
> 
> 标签：php, hex, urlrequest

我想将十六进制数据作为 GET 请求发送，例如 somesite.com/page.php?test=hex_string。数据是在硬件中生成的数据，然后将 GET 请求发送到 php 文件。

但是当我在请求中有**0x00 (NULL)**字符时，它会失败并显示 400 错误请求消息。

有没有办法可以在 GET 请求中发送 NUL 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:58:28.370

是的。`/?hexdecimal_nullbyte=%00`

它失败了，因为另一端的 Web 服务器阻止了[`null-byte attacks`](http://hakipedia.com/index.php/Poison_Null_Byte). 所以，网络服务器说你是一个`400 bad request`，不要这样做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:42:33.717

我以前也有同样的问题。我找到的唯一解决方案是在**page.php**读取之前将这些空字节转换为十进制，然后在**page.php 中将**其转换回字节，然后再将其发送到硬件。

# jsf - 以编程方式创建的 jsf 组件在刷新时消失

> ID：16161246
> 
> 赞同：0
> 
> 时间：2013-04-23T04:55:56.627
> 
> 标签：jsf, primefaces

输出面板（primefaces 3.4.1）具有绑定属性

```
<p:outputPanel layout="block" autoUpdate="true" binding="#{bean.outputPanel}"/> 
```

在 bean htmlInputText 中动态创建并附加输出面板

输出面板 Getter 方法

```
private OutputPanel outputPanel=new OutputPanel();

public final OutputPanel getOutputPanel() {
        outputPanel = (OutputPanel) app
                .createComponent(OutputPanel.COMPONENT_TYPE);
        return outputPanel;
    } 
```

htmlInputText 绑定

```
outputPanel.getChildren().add(new HTMLInputText()); 
```

这会完美地生成一个输入文本，但是在创建一个输入文本之后，如果我刷新页面，它就会消失。如果我更新输出面板组件消失，即使是 ajax 请求。

# objective-c - objectForKey VS valueForKey - objectForKey 和 valueForKey 的区别

> ID：16161259
> 
> 赞同：0
> 
> 时间：2013-04-23T04:57:08.143
> 
> 标签：objective-c

早上好朋友
我是IOS开发的新手，我想知道objectForKey和valueForKey有什么区别。谁是表现最好的？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:03:51.107

`valueForKey`并且`objectForKey`两者都将返回给定键的对象。但这里`valuForKey`是键值编码。

如果`key`不以“@”开头，则调用`objectForKey`:。如果键确实以“@”开头，则去掉“@”并`[super valueForKey:]`使用键的其余部分调用。

# php - 通过 GET（Url）从两个查询中发送两个值一个值失败

> ID：16161264
> 
> 赞同：0
> 
> 时间：2013-04-23T04:57:29.170
> 
> 标签：php, mysql

大家好，我想通过 GET 方法将两个查询中的两个值发送到另一个页面

一个值发送正确但第二个值失败意味着我只收到一个值

但不是第二个，我需要在新查询的其他页面中使用这两个值，并且

执行一个动作

请问有人吗？？？？？？

这是我的代码：

```
 <?php
    require_once('db.php');
    if(isset($_POST['property']))
    {
    $property=$_POST['property'];
    $propertyquery = "SELECT PropertyID, PropertyImageID, PropertyName, PropertyStatus, PropertyLocation, PropertyRegion FROM properties WHERE PropertyImageID =$property";
     $propertyquery_run= mysql_query($propertyquery);
    if (mysql_num_rows($propertyquery_run) > 0) 
    {
        while ($propertyrow = mysql_fetch_array($propertyquery_run)) 
          {
        $imagequery ="SELECT PropertyImageID, ImagePath FROM propertyimages WHERE PropertyImageID='".$propertyrow['PropertyImageID']."' LIMIT 1";
         $imagequery_run=mysql_query($imagequery);        
    ?>
            <table style="margin-left:348px;">
    <tr><td>PropertyID:</td><td><span style="color:#0F0; font-weight:bold;"><?php echo $propertyrow['PropertyID'] ?></span></td></tr><tr><td>PropertyName:</td><td><span style="color:#0F0; font-weight:bold;"><?php echo $propertyrow['PropertyName'] ?></span></td></tr>
    <tr><td>PropertyStatus:</td><td><span style="color:#0F0; font-weight:bold;"><?php echo $propertyrow['PropertyStatus'] ?></span></td></tr>
    <tr><td>PropertyLocation:</td><td><span style="color:#0F0; font-weight:bold;"><?php echo $propertyrow['PropertyLocation'] ?></span></td></tr>
    <tr><td>PropertyRegion:</td><td><span style="color:#0F0; font-weight:bold;"><?php echo $propertyrow['PropertyRegion'] ?></span></td></tr>
            </table>
        <center>
    <?php }
                if(mysql_num_rows($imagequery_run) > 0)  
                {
                    while ($imagerow = mysql_fetch_array($imagequery_run))  
                    {
                    ?>
                       <div style="border:solid 2px #9F0; border-radius:5px; height:222px; width:544px;">

<!-- sending value started -->  

    <a href="DisplayImages.php?PropertyImageID=<?php echo $imagerow['PropertyImageID']     ?>&PropertyID=<?php echo $propertyrow['PropertyID'] ?>"> 

                       <img src="<?php echo $imagerow['ImagePath'];  ?>" width="544" height="222" ></a>    <!-- sending value Ended -->

                       </div><br />    
                    <?php
                    }

                }
            }
    }
    else
    {
        echo 'Go Back And Set Your Session.Thanks';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T05:19:19.163

可能是这个工作检查

```
<a href="DisplayImages.php?PropertyImageID=<?php echo $imagerow['PropertyImageID']; ?>&PropertyID=<?php echo $propertyrow['PropertyID']; ?>"> 
```

在上面的代码中，你错过了两个回声';'

# python - 如何在 python 中使用 matplotlib 从 .txt 文件数据创建条形图

> ID：16161267
> 
> 赞同：-1
> 
> 时间：2013-04-23T04:57:37.547
> 
> 标签：python, matplotlib

我们有一个文本文件数据如下：

正面：20

负数：10

中性：30

正、负、中性是标签，20、10、30 是计数。我的要求是为上述数据绘制条形图。X 轴应该是标签，Y 轴应该是计数。那么你能告诉我如何在 python 中使用 matplotlib 来做到这一点。

我已经尝试过这段代码，但出现了一些错误

```
f=open('/var/www/html/form/tweetcount.txt','r')

line = (f.next() for i in range(4))
pieces = (lin.split(':') for lin in line)

labels,values = zip(*pieces)

N=len(values)

ind = arange(N)

plt.bar(ind,labels) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:53:22.117

I think your problem was that you were trying to plot the wrong values.

This code should do what you want:

```
import matplotlib.pyplot as plt
import numpy as np

# Collect the data from the file, ignore empty lines
with open('data.txt') as f:
    lines = [line.strip().split(': ') for line in f if len(line) > 1]

labels, y = zip(*lines)

# Generate indexes
ind = np.arange(len(labels))

# Convert the y values from str to int
y = map(int, y)

plt.figure()
plt.bar(ind, y, align='center')
plt.xticks(ind, labels)
plt.show() 
```

You can see the final result [here](http://i.imgur.com/SJqYCcX.png).

# php - 单页 Yii PHP 中多个控制器的多个视图

> ID：16161285
> 
> 赞同：0
> 
> 时间：2013-04-23T04:59:20.700
> 
> 标签：php, architecture, yii

我在架构师方面遇到问题。我有两个页面顺序和注册，他们分别使用这些视图和控制器工作。

> 1.registration(view)、RegistrationForm(Form Model)和RegistrationConroller(Controller)。
> 
> 2.order(view)、OrderForm(Form Model)和OrderController(Controller)。

现在的问题是我有新的要求，即在单个页面中显示订单和注册视图。当用户提交时，它将注册用户并在验证后下订单。

这个要求的问题是哪个控制器将在那里处理请求，因为每个视图（注册和订单）都有单独的控制器。现在我应该制作一个新的控制器然后它需要重复代码。请建议我最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:08:04.700

Yii 有一个选项，您可以通过它导入/服务在其他控制器中定义的操作。

[http://www.yiiframework.com/doc/api/1.1/CController#actions-detail](http://www.yiiframework.com/doc/api/1.1/CController#actions-detail)

上面的链接详细说明了在控制器中定义外部操作的过程。

所以本质上，你可以在不复制代码的情况下引用订单控制器中定义的动作。

# ios - 使 UIscrollview 移动到选定区域

> ID：16161290
> 
> 赞同：0
> 
> 时间：2013-04-23T04:59:53.807
> 
> 标签：ios

嗨，我遇到了一个简单的问题，即我添加了一个 uiscollview 来查看并从数组中动态地添加按钮，我将它们从超级视图中删除，并在加载之前再次将它们添加到视图中，如代码所示

```
- (void)loadGroups {

    if(scroll!=nil){
        if([scroll isDescendantOfView:self.view]){

            [scroll removeFromSuperview];

        }
    }
     NSUInteger n=[self.resultSet.dataObjectList count];
    scroll = [[UIScrollView alloc]init];
    scroll.delegate=self;
    scroll.frame = CGRectMake(0, 0, 320, (height+25));
    [scroll setContentSize:CGSizeMake((width-30)*n, height+25)];
    [scroll setContentOffset:CGPointMake(0, 0) animated:NO];
    scroll.backgroundColor=[UIColor clearColor];
    //scroll.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"GP-BG.png"]];
    [scroll setCanCancelContentTouches:NO];
    scroll.indicatorStyle=UIScrollViewIndicatorStyleWhite;
    scroll.bounces=NO;
    scroll.scrollEnabled=YES;
    scroll.pagingEnabled=NO;
    scroll.showsHorizontalScrollIndicator=NO;
    for(int i=0;i<n;i++)
    {
        MODELRoom *room = [self.resultSet.dataObjectList objectAtIndex:i];
        CGRect rectForTitleButton = CGRectMake(i*(width-30), 0, width-30, height+25);
        int buttonTag =10000+i;
        UIButton *titleButton = [self getButton:room tag:buttonTag ];
        titleButton.tag=buttonTag;
        [titleButton setFrame:rectForTitleButton];
        titleButton.backgroundColor=[UIColor clearColor];
        [scroll addSubview:titleButton];

        CGRect rectForLabel = CGRectMake(i*(width-30), padding-5, width-35, height-20);
        UILabel *label = [[UILabel alloc]init ];
        label.frame=rectForLabel;
        MODELRoom *room1 = [self.resultSet.dataObjectList objectAtIndex:i];
        label.text=(room1).name;
        label.textColor=[UIColor whiteColor];
        label.textAlignment=NSTextAlignmentCenter;
        label.backgroundColor=[UIColor clearColor];
        label.font = [UIFont fontWithName:@"Helvetica" size:14];
        [scroll addSubview:label];

        CGRect rectForImageView = CGRectMake(27.5+(width-30)*i, padding+25, width-90, height-20);
        UIImageView *imageView = [[UIImageView alloc]init ];
        imageView.frame=rectForImageView;
        imageView.backgroundColor=[UIColor clearColor];
        imageView.image=[UIImage imageNamed:@"Group-icon.png"];
        [scroll addSubview:imageView];

    }
    [self.view addSubview:scroll];

    } 
```

我的问题是，当我在滚动后选择一个按钮时，它会重新调整到第一个按钮，但我需要在我选择按钮的地方。请帮助我在哪里做错了......

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:13:51.507

尝试使用这个我希望这会很好......

```
[scroll setContentOffset:CGPointMake(titleButton.frame.origin.x, titleButton.frame.origin.y) animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:08:32.427

一旦看到这个，

每次 scollview contentOffset 值为 (0,0) 时尝试更改该值，然后您将得到您的要求，

```
[scroll setContentOffset:CGPointMake(x-value, y-value) animated:NO]; 
```

# c - 什么样的非致命代码通常会触发防病毒软件？（误报）

> ID：16161291
> 
> 赞同：6
> 
> 时间：2013-04-23T04:59:54.160
> 
> 标签：c, ansi, antivirus, false-positive

我不知道为什么，但是我以前没有问题，现在突然之间，我很久以前写的这个非常古老，可怕的新手程序，触发了 Malwarebytes ... :(

这个问题不是重复的，因为有问题的程序是（ANSI）C而不是Delphi......

[这是病毒总扫描 (5 / 45)](https://www.virustotal.com/en/file/f0eb097cbcea2426c34b32f0019802d4e34f8392ba942ceddb231f77a5fc997d/analysis/1366691829/)

[Jotti 的恶意软件扫描 (1 / 22)](http://virusscan.jotti.org/en/scanresult/9f6a98f859991a3c48c09f1ea859e0a08538e804)

这是我糟糕的旧源代码：P

```
#include <stdio.h>
#include <string.h>
/* This script is by Joe DF*/
main()
{
    char input[999];
    int charcount = 100;
    gets(input);
    printf("%d\n", strlen(input));
    printf("%d", numlen(charcount));
}

numlen(int num)
{
    char temp[999];
    sprintf(temp, "%d", num);
    int count = strlen(temp);
    return count;
} 
```

这可能只是一个简单的错误……但为什么呢？对我来说，这似乎无害！即使这只是一个错误，通常会触发误报的原因是什么？它只是文件的签名吗？时间戳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:04:39.730

我相信您编译的代码已被病毒破坏，并自行复制。这与您的代码无关。如果您再次编译代码并重新扫描，恶意软件警告将消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-06-27T21:55:59.383

如果您确定您的代码不是恶意的并且是误报，您应该获得证书并签署您的应用程序，它确实有效！

大多数情况下，病毒总标记由编译器产生的空 exe，例如 1 到 5……但是当您使用有效证书签署代码时，它们就会消失！

# datatables - 如何将 datatables.js 中的搜索框定位在列的标题/标题下？

> ID：16161292
> 
> 赞同：1
> 
> 时间：2013-04-23T05:00:08.363
> 
> 标签：datatables, jquery-datatables

我想在我的表格标题下的 datatables.js 中包含搜索框。我浏览过很多论坛，包括这个论坛，到目前为止，它似乎被放置在页脚或页眉上方。即在桌子上。

# c# - 使引号（'或“）成为可能的字符串？

> ID：16161293
> 
> 赞同：0
> 
> 时间：2013-04-23T05:00:09.137
> 
> 标签：c#

我正在使用代码编辑器，我想知道如何将引号转换为字符串。

我使用类似这样的参数：

```
 if (token == "letterX" || token.StartsWith("x") || token.StartsWith("X"))
            {
                int length = line.Length - (index - start);
                string commentText = rtb.Text.Substring(index, length);
                rtb.SelectionStart = index;
                rtb.SelectionLength = length;
                lb.Visible = true;
                int i = commentText.IndexOf(token); 

            } 
```

我想知道如何将字母 X 替换为引号，就像这个正则表达式中显示的那样：

```
Regex singlequote = new Regex("\'[^\"]*\'"); 
```

我想要实现的输出是当我输入单引号并以另一个单引号（关闭）结束时，引号内的文本将变为栗色（但我已经有了相应的代码）。与以 double 开头然后以 another1 结尾的 doublequote 相同。

我只想问如何使 single(') 和 doublequote(") 成为一个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:02:22.797

如果你要`"`在一个字符串中，你可以使用`\`.

```
token.StartsWith("\""); 
```

# mysql - MySQL 查询（连接）

> ID：16161294
> 
> 赞同：0
> 
> 时间：2013-04-23T05:00:16.433
> 
> 标签：mysql, join

我有一个带有 2 张桌子的酒店系统

**预订表**

```
reservation_id pk
Start_Date
End_Date
Customers_Customer_id fk
Rooms_Room_id fk 
```

**客房表**

```
Room_id pk
type
floor
price 
```

我有这个`query`来检索**可用**的房间

```
$sql="SELECT Room_id,type,room_floor,price FROM rooms
LEFT JOIN reservation
ON rooms.Room_id = reservation.Rooms_Room_id
where rooms.type='$_POST[type]'
and Start_Date !='$_POST[from]'
and End_Date !='$_POST[to]'" 
```

所以结果很好，但它只是给了我预订表中的房间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:04:11.967

当您在 where 子句中的左外连接表上添加条件时，它的行为类似于内连接，这应该修复您当前的查询，

```
$sql="SELECT Room_id,type,room_floor,price FROM rooms
LEFT JOIN reservation
ON rooms.Room_id = reservation.Rooms_Room_id
and Start_Date !='$_POST[from]'
and End_Date !='$_POST[to]'
where rooms.type='$_POST[type]'" 
```

但是您不会返回正确的结果，您可能希望将查询更改为此

```
$sql="SELECT Room_id,type,room_floor,price FROM rooms 
WHERE room_id not in 
(
   --find all rooms that are unavailable
   SELECT Room_id FROM rooms
   INNER JOIN reservation ON rooms.Room_id = reservation.Rooms_Room_id
   WHERE NOT ('$_POST[to]' < start_date or '$_POST[from]' > end_date)
   AND rooms.type='$_POST[type]'
) AND type='$_POST[type]'" 
```

# apache-flex - 如何更改 Flex 4 中文本区域的文本格式？

> ID：16161295
> 
> 赞同：2
> 
> 时间：2013-04-23T05:00:20.433
> 
> 标签：apache-flex, flex4.6

我在文本区域采用了富文本编辑器。当我编辑文本并执行粗体、斜体等操作时，它不会影响文本。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:21:02.853

它必须工作，您能否向我们发布一些有关您如何做到这一点的示例代码，我不知道。

您可以使用 TLF 检查这些示例在 Textarea 中执行此操作。

[Flex 示例中的 TLf 编辑器](http://blog.flexexamples.com/2009/07/25/exporting-a-textflow-object-in-flex-4/)

[TLF 编辑器](http://asciiworks.net/2010/08/simple-tlf-text-editor-released/)

[富文本编辑器 Adob​​e Docx](http://livedocs.adobe.com/flex/3/html/help.html?content=textcontrols_10.html)

# android - 按钮的单击事件在列表视图中没有响应

> ID：16161296
> 
> 赞同：1
> 
> 时间：2013-04-23T05:00:26.220
> 
> 标签：android, listview, button, onclicklistener

我有一个由每行中的文本和按钮组成的列表视图。我必须为驻留在行中的每个按钮实现单击侦听器，但我无法这样做。我也检查了与 SO 不同的地方，但无法得到想要的结果。为此，我将自定义适配器实现为：

```
public class CategoryAdapter extends BaseAdapter {

    Context mContext;
    LayoutInflater mInflater;
    String[] strings = { "jjacj", "kpomkn", "jjbjbj nk", "njbhvh",
            "mknkn", "mnknlhn", "lknkn", "mknkn"};
    Holder holder = null;

    public CategoryAdapter(Context context) {
        this.mContext = context;
    }

    @Override
    public int getCount() {
        return strings.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @SuppressWarnings("static-access")
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            mInflater = (LayoutInflater) mContext
                    .getSystemService(mContext.LAYOUT_INFLATER_SERVICE);
            holder = new Holder();
            convertView = mInflater.inflate(R.layout.layout_child_category,
                    null);
            holder.mTxtTitle = (TextView) convertView
                    .findViewById(R.id.txt_notification);
            holder.mButtonTag = (Button) convertView
                    .findViewById(R.id.btnNotify);
            holder.mLayoutMain = (RelativeLayout) convertView
                    .findViewById(R.id.layout_main);
            // convertView.setOnClickListener(callback);
            convertView.setTag(holder);
        } else {
            holder = (Holder) convertView.getTag();
        }

        holder.mTxtTitle.setText(strings[position]);
        holder.mButtonTag.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                btnSelection();
            }
        });

        if (position == 0) {
            holder.mLayoutMain.setBackgroundResource(R.drawable.bg_table_top);
        } else if (position == getCount() - 1) {
            holder.mLayoutMain
                    .setBackgroundResource(R.drawable.bg_table_bottom);
        } else {
            holder.mLayoutMain
                    .setBackgroundResource(R.drawable.bg_table_middle);
        }

        return convertView;
    }

    OnClickListener callback = new OnClickListener() {

        @Override
        public void onClick(View v) {
            btnSelection();
        }
    };

    private void btnSelection() {
        if (holder.mButtonTag.getTag().equals("no")) {
            holder.mButtonTag.setTag("yes");
            holder.mButtonTag.setText("NEI");
            holder.mButtonTag.setPadding(20, 0, 0, 0);
            holder.mButtonTag.setBackgroundResource(R.drawable.ic_btn_nei);
            holder.mButtonTag.setTextColor(Color.BLACK);
        } else {
            holder.mButtonTag.setTag("no");
            holder.mButtonTag.setText("JA");
            holder.mButtonTag.setPadding(0, 0, 20, 0);
            holder.mButtonTag.setBackgroundResource(R.drawable.ic_btn_ja);
            holder.mButtonTag.setTextColor(Color.WHITE);
        }
    }

    static class Holder {
        Button mButtonTag;
        TextView mTxtTitle;
        RelativeLayout mLayoutMain;
    }
} 
```

列出子布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_main"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:background="@drawable/bg_table_middle" >

    <TextView
        android:id="@+id/txt_notification"
        style="@style/textview_layout"
        android:textColor="@android:color/black" />

    <Button
        android:id="@+id/btnNotify"
        style="@style/button_layout" />

</RelativeLayout> 
```

这是我的看法：

![在此处输入图像描述](https://i.stack.imgur.com/9EB3q.png)

任何人都可以让我知道我缺少的地方，或者应该做任何更改以在列表中的每个按钮上至少祝酒。任何形式的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:47:22.103

像这样在函数中将视图作为参数传递

```
private void btnSelection(View button) {
    if (button.getTag().equals("no")) {
        button.setTag("yes");
        ((Button)button).setText("NEI");
        button.setPadding(20, 0, 0, 0);
        button.setBackgroundResource(R.drawable.ic_btn_nei);
        ((Button)button).setTextColor(Color.BLACK);
    } else {
        button.setTag("no");
        ((Button)button).setText("JA");
        button.setPadding(0, 0, 20, 0);
        button.setBackgroundResource(R.drawable.ic_btn_ja);
        ((Button)button).setTextColor(Color.WHITE);
    }
} 
```

并在`getView`方法中更改`OnClickListener`为

* * *

在点击监听器之前添加`getView`

```
if (holder.mButtonTag.getTag() == null)
  holder.mButtonTag.setTag(""); 
```

* * *

```
holder.mButtonTag.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            btnSelection(v);
        }
    }); 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:06:24.180

更改您的 xml 文件，如下所示。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout_main"
        android:layout_width="fill_parent"
        android:layout_height="40dp" 
        android:descendantFocusability="blocksDescendants"  
        android:background="@drawable/bg_table_middle" > 

     <TextView
           android:id="@+id/txt_notification"
           style="@style/textview_layout"
           android:focusable="false"
           android:textColor="@android:color/black" />

      <Button
            android:id="@+id/btnNotify"
            style="@style/button_layout" 
            android:focusable="false" /> 
```

并将`android:descendantFocusability="blocksDescendants"` 您的列表视图 xml 文件放入主布局中。同时放入`android:focusable="false"`列表视图。

```
holder.mButtonTag.setId(position);
holder.mButtonTag.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                btnSelection();
            }
        }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T05:22:34.890

将按钮代码更改为

```
<Button
android:id="@+id/btnNotify"
style="@style/button_layout" 
  android:focusable="false"
  android:focusableInTouchMode="false"/> 
```

# cocos2d-iphone - Cocos2d - 默认 iPhone5 支持 -wide / -widehd 不起作用

> ID：16161297
> 
> 赞同：0
> 
> 时间：2013-04-23T05:00:33.100
> 
> 标签：cocos2d-iphone

相信现在 Cocos2D 2.1 及以上 支持 iPhone5 带图片扩展名 -widehd.png

我使用相同但在我的游戏中没有工作。刚刚在cocos2d中搜索，在CCFileUtils.h中找到了这些

```
- iPhone: ""
- iPhone HD: "-hd"
- iPhone5 : "-wide"
- iPhone5 HD: "-widehd"
- iPad: "-ipad"
- iPad HD: "-ipadhd"
- Mac: ""
- Mac HD: "-machd" 
```

这表明 cocos2d 现在默认支持 iPhone5。为什么不为我工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T16:08:51.697

CCFileUtils 可以选择不使用 Suffix 搜索文件夹中的资源，而且比后缀更干净。为此，请使用以下代码将搜索模式从后缀更改为目录：

```
CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
[sharedFileUtils setSearchMode:kCCFileUtilsSearchDirectoryMode]; 
```

然后，至少创建以下文件夹之一：

```
resources-iphone5hd (for iPhone 5 retina resources )
resources-iphone5 (for iPhone 5 non-retina resources )
resources-iphonehd (for iPhone retina resources )
resources-iphone (for iPhone non-retina resources )
resources-ipadhd (for iPad retina resources )
resources-ipad (for iPad non-retina resources )
resources-mac (for OS X resources)
resources-machd (for OS X retina resources. N/A yet) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:25:32.803

在 Cocos2d 3.0 中，它使用 -iphone5hd 扩展

```
 imageName-iphone5hd.png  // For iPhone5 wide screen image 
```

# ios - 在 iOS 上重用 https 连接

> ID：16161301
> 
> 赞同：0
> 
> 时间：2013-04-23T05:00:45.310
> 
> 标签：ios, https

我编写了一个简短的 iOS 应用程序，它通过通常的方式联系服务器：

```
NSString *URLString = @"http://mysite/script.php?foo=1";
NSURL *getURL = [NSURL URLWithString:URLString];
NSURLRequest *getRequest = [NSURLRequest requestWithURL:getURL];
NSURLResponse *response = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:getRequest returningResponse:&response error:&error]; 
```

这可以正常工作，但是当我使用 的各种值相对频繁地访问该网站时`foo`，并且当我们计划迁移到 时，人们提出了关于每次`https`设置和拆除电话的开销的问题。`NSURLConnection`我看到[这个答案说该类处理缓存](https://stackoverflow.com/a/888101/1270789)，但这也是真的`https`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T05:51:25.610

根据我的测试，是的，NSURLConnection 类在某种程度上确实缓存了 https。我确实喜欢评论中提到的[AFHTTPClient](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html)的外观，但是由于各种问题，我无法在这个项目中使用它。

# javascript - 当内容改变高度时动态改变容器div的高度

> ID：16161311
> 
> 赞同：0
> 
> 时间：2013-04-23T05:01:37.570
> 
> 标签：javascript, jquery, css

我有一个包含不同部分的网站，每个部分都设置为浏览器窗口的高度。在某些情况下，内容比浏览器窗口高，我使用一个函数来检查这一点，并将 div 的高度设置为其内容的高度，使用以下函数：

```
$('.container').each(function() {
        var _this = $(this);
        var this_ = this;
        var windowH = $(window).height();
        var textH = $('.text', this).height();
        if(windowH < textH) {                            
            $(this).css({'height': textH + 'px'});
        }
        else {
            $(this).css({'height': windowH + 'px'});
        }
        $(window).resize(function(){
            var windowH = $(window).height();
            var textH = $('.text', this_).height();
            if(windowH < textH) {
                _this.css({'height': textH + 'px'});
            }
            else {
                _this.css('height', windowH + 'px');
            }

        });         
    }); 
```

我遇到的问题是我想动态隐藏和显示内容，当新内容高于 div 的当前高度时，我希望 div 扩展以包含它。我正在使用该功能，

```
$('#container').on('click', 'p', function () {
    $(this).height('300px');
    var windowH = $(window).height();
    $('#container').css({
        'height': ($('#container .text').height() + 'px')
    });
    var textH = $('#container').height();
    if (windowH < textH) {
        $('#container').css({
            'height': textH + 'px'
        });
    } else {
        $('#container').css('height', windowH + 'px');
    }

}); 
```

但没有成功。我创建了一个小提琴，[http://jsfiddle.net/wDRzY/](http://jsfiddle.net/wDRzY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:06:29.630

使用嵌套 div，限制外部 div 的高度，让内部 div 保持内容的高度。当需要外层div作为内容的高度时，可以设置外层div高度等于内层div高度。

虽然，我不确定你为什么需要这样做。我建议多阅读 CSS 并将其用于这样的显示目的。

# jsf - UserWizard 中具有动态值选择查询的可编辑数据表

> ID：16161313
> 
> 赞同：0
> 
> 时间：2013-04-23T05:01:38.337
> 
> 标签：jsf, primefaces, datatable, wizard

启动.xhtml

我正在使用 primefaces 向导来显示应用程序的顺序流程。在成员详细信息选项卡之一中，我有一个可编辑的数据表。对于名称列，我希望用户从可用的用户列表中选择名称单击按钮时具有名称，名称，部门

我在单击按钮时在对话框中使用另一个数据表。

但是如何在单击添加按钮后更新原始数据表中的选定值。

```
 <h:body>
        <h:form id="compositionmaster">
            <p:growl id="growl" sticky="true" showDetail="true"/>
            <p:wizard widgetVar="wiz" flowListener="#{userWizard.onFlowProcess}" step="address" >
                 <p:tab id="address" title="Member Details">
                    <p:panel header="Member Selection" >
                        <h:messages errorClass="error"/>

                        <p:dataTable id="outputtable" var="membertable" value="#{tableBean.compositionRoles}" editable="true" editMode="cell" >

                            <p:column headerText="Role" >
                                <h:outputText value="#{membertable.role}" />

                            </p:column>

                            <p:column headerText="Type">
                                <p:cellEditor>
                                <f:facet name="input">
                                    <p:selectOneMenu value="#{userWizard.user.type}"> 
                                    <f:selectItem itemLabel="--Select--" itemValue="0" />  
                                    <f:selectItem itemLabel="Internal" itemValue="1" />
                                    <f:selectItem itemLabel="External" itemValue="2" />
                                    </p:selectOneMenu>
                                </f:facet>
                                <f:facet name="output">
                                    <h:outputText value="#{userWizard.user.type}" />
                                </f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column id="namecol" headerText="Name">

                                <p:commandButton id="basic" value="..." onclick="dlg.show();" type="button" />

                                <h:outputText value="#{userBean.selectedUser.name}" />

                            </p:column>

                            <p:column id="divcol" headerText="Section/Division">
                            <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{userBean.selectedUser.division}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText value="#{userBean.selectedUser.division}" />
                            </f:facet>
                            </p:cellEditor>
                            </p:column>

                        </p:dataTable>

                        <p:dialog id="dialog" header="UserList" widgetVar="dlg" >
                            <h:form id="userform">
                                <p:dataTable  var="user" value="#{userBean.users}" selection="#{userBean.selectedUser}" rowKey="#{user.name}" >
                                    <p:column selectionMode="single"/>
                                    <p:column headerText="Name">
                                        <h:outputText value="#{user.name}" />
                                    </p:column>
                                    <p:column headerText="Division">
                                        <h:outputText value="#{user.division}" />
                                    </p:column>
                                    <f:facet name="footer">
                                        <p:commandButton update=":compositionmaster:namecol" ajax="true" onclick="dlg.hide()" value="Add" id="addmember"/>
                                    </f:facet>  
                                </p:dataTable>
                            </h:form>
                        </p:dialog> 
```

用户向导.java

```
package committee;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.event.ActionEvent;
import javax.faces.context.FacesContext;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import org.primefaces.event.FlowEvent;
import java.io.Serializable;
import javax.faces.bean.ViewScoped;
import office.UserBean;

@ManagedBean
@ViewScoped
public class UserWizard implements Serializable{

private User user = new User();
private Committee comm =new Committee();
private boolean skip;
private UserBean userbean;

private static final Logger logger = Logger.getLogger(UserWizard.class.getName());

public UserBean getUserbean() {
    return userbean;
}

public void setUserbean(UserBean userbean) {
    this.userbean = userbean;
}

public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
}

    public Committee getComm() {
        return comm;
    }

    public void setComm(Committee comm) {
        this.comm = comm;
    }

public void save(ActionEvent actionEvent) {
    //Persist user
    FacesMessage msg = new FacesMessage("Successful", "Welcome :" + user.getName());
    FacesContext.getCurrentInstance().addMessage(null, msg);
}

public boolean isSkip() {
    return skip;
}

public void setSkip(boolean skip) {
    this.skip = skip;
}

public String onFlowProcess(FlowEvent event) {
        System.out.println(event.getOldStep());
        System.out.println(event.getNewStep());
        System.out.println(skip);
    logger.log(Level.INFO, "Current wizard step:{0}", event.getOldStep());
    logger.log(Level.INFO, "Next step:{0}", event.getNewStep());
            return event.getNewStep();

} 
```

} UserBean.java

```
package office;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import java.io.Serializable;
import committee.User;
import committee.UserDataModel;
import java.util.List;
import java.util.ArrayList;

@ManagedBean
@ViewScoped
public class UserBean implements Serializable{

private List<User> users;

public UserBean() {

users = new ArrayList<User>();
users.add(new User("Kanika","Development"));
users.add(new User("Shreya","Development"));
users.add(new User("Tushti","Development"));
users.add(new User("abc","Marketing"));

}
public List<User> getUsers() {
return users;
}

public void setUsers(List<User> users) {
    this.users = users;
}

private User selectedUser;

private UserDataModel userDataModel;

public UserDataModel getUserDataModel() {
    return userDataModel;
}

public void setUserDataModel(UserDataModel userDataModel) {
    this.userDataModel = userDataModel;
}

public User getSelectedUser() {
    return selectedUser;
}

public void setSelectedUser(User selectedUser) {
    this.selectedUser = selectedUser;
} 
```

}

# java - JDBC Derby JPA 持久性测试问题“内部异常：java.sql.SQLSyntaxErrorException：语法错误：遇到'USER'”

> ID：16161314
> 
> 赞同：6
> 
> 时间：2013-04-23T05:01:42.273
> 
> 标签：java, testing, derby, jboss-arquillian

我有一个名为的实体类`User`，当我使用 Arquillian 进行持久性测试时，我总是遇到错误......

> `Internal Exception: java.sql.SQLSyntaxErrorException: Syntax error: Encountered "USER" at line 1, column 13.`

...因为类名“ `User`”。我假设`User`是保留关键字。当我将实体名称更改为它时，`User_`它工作正常。

我必须更改我的实体名称吗？我还能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T08:11:12.173

是的，[`USER`](http://db.apache.org/derby/docs/10.10/ref/rrefsqlj42476.html)是 Derby 中的一个内置函数。您必须为 JPA 实体指定不同的表名（通常通过 @Table 注释完成）。

# java - 从执行石英调度程序调用管理器方法时出现 NullPointerException

> ID：16161316
> 
> 赞同：0
> 
> 时间：2013-04-23T05:01:53.543
> 
> 标签：java, nullpointerexception, quartz-scheduler

我在我的 JSP Struts/Hibernate 应用程序的不同 java 文件中加入了石英调度程序。我的执行方法如下所示：

```
public void execute(JobExecutionContext jExeCtx) throws JobExecutionException {
       try {
        userDetailManager = new UserDetailManagerImpl();
        userDetailManager.sendMailTxnDetailsEveryNight();
    } catch (ApplicationException ex) {
        java.util.logging.Logger.getLogger(JobClass.class.getName()).log(Level.SEVERE, null, ex);
    }
 } 
```

然后我调用 sendMailTxnDetailsEveryNight 方法，看起来像：

```
public void sendMailTxnDetailsEveryNight() throws ApplicationException{
    List<RemittanceTransactionBean> rBean = remittanceTransactionDao.getTodayTxnSummary();
return rBean;
} 
```

我在给定点收到 nullpointerException ：

```
java.lang.NullPointerException
at com.mtmrs.business.user.impl.UserDetailManagerImpl.sendMailTxnDetailsEveryNight(UserDetailManagerImpl.java:754)
at com.mtmrs.util.common.JobClass.execute(JobClass.java:44) 
```

我需要如何调用 getTodayTxnSummary(); 这样我就不会收到任何错误。我也在 applicationContext 中定义了 remittanceTransactionDao：

```
<bean id="userDetailManager" parent="abstractTxDefinition">
    <property name="target">
        <bean class="com.mtmrs.business.user.impl.UserDetailManagerImpl">
        <property name="remittanceTransactionDao" ref="remittanceTransactionDao"></property>
        </bean>
    </property>
</bean> 
```

我调试了一下，remittanceTransactionDao 为空。在调用方法 remittanceTransactionDao 之前，我还尝试了以下设置。这样，在 sendMailTxnDetailsEveryNight 中使用的会话变量为空。我被困在这里。

```
remittanceTransactionDao = new RemittanceTransactionDaoHibernate(RemittanceTransaction.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:32:48.310

我删除了这些类并在我的应用程序上下文 Dao.xml 中配置了以下内容。

```
<bean name="runMeJob" class="org.springframework.scheduling.quartz.JobDetailBean">

    <property name="jobClass" value="com.mtmrs.util.common.RunMeJob" />

    <property name="jobDataAsMap">
        <map>
            <entry key="userDetailManager" value-ref="userDetailManager" />
        </map>
    </property>

</bean>
<bean id="cronTrigger"
      class="org.springframework.scheduling.quartz.CronTriggerBean">

    <property name="jobDetail" ref="runMeJob" />
    <property name="cronExpression" value="0 0 10,12,14,16,18,20,22,23 * * ?" />
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="jobDetails">
        <list>
            <ref bean="runMeJob" />
        </list>
    </property>

    <property name="triggers">
        <list>
            <ref bean="cronTrigger" />
        </list>
    </property>
</bean> 
```

然后我删除了关于石英实现代码的所有内容，无论我试图做什么，并添加了这个类：

```
package com.mtmrs.util.common;
import com.mtmrs.business.user.UserDetailManager;
import com.mtmrs.util.logger.MTMRSLogger;
import com.mtmrs.util.logger.ApplicationException;
import java.util.logging.Level;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.springframework.scheduling.quartz.QuartzJobBean;

public class RunMeJob extends QuartzJobBean {

UserDetailManager userDetailManager;

public UserDetailManager getUserDetailManager() {
    return userDetailManager;
}

public void setUserDetailManager(UserDetailManager userDetailManager) {
    this.userDetailManager = userDetailManager;
}

@Override
protected void executeInternal(JobExecutionContext context)
        throws JobExecutionException {
    System.out.print("Entering Class: Job Class , method: execute");
    try {
        userDetailManager.sendMailTxnDetailsEveryNight();
    } catch (ApplicationException ex) {
        java.util.logging.Logger.getLogger(RunMeJob.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.print("Exiting Class: Job Class , method: execute");

}

} 
```

我也将石英罐的版本降级为 1.x。我需要使用 userDetailManager（即 sendMailTxnDetailsEveryNight）对象中的方法作为触发器中指定的每 2 小时运行一次的作业。

基本上我点击了这个链接：[Mykong](http://www.mkyong.com/spring/spring-quartz-scheduler-example/) 希望这可以对某人有所帮助。

# java - 显示矩阵数据

> ID：16161318
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:02:06.193
> 
> 标签：java, matrix

我想像矩阵一样显示矩阵值

像这样

```
0 0 1 0 0
0 1 1 1 1
0 0 0 0 0 
```

当我制作这段代码时，它垂直显示

```
for (int i = 0; i < mat.length; i++)
                for (int j = 0; j < mat[i].length; j++)
                    System.out.println(mat[i][j]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:03:31.370

`System.out.println`打印一条线**和**一条断线。您可能希望使用`System.out.print`它只打印数据。

```
for (int i = 0; i < mat.length; i++) {
    for (int j = 0; j < mat[i].length; j++) {
        System.out.print(mat[i][j]);
    }
    System.out.println();
} 
```

但是现在的问题是，同一*行*的所有数据都打印出来了，没有空格。您可以使用`System.out.print(mat[i][j] + " ");`，但这有点笨拙。最好的选择是用于`System.printf`允许格式化将在控制台上打印的文本：

```
for (int i = 0; i < mat.length; i++) {
    for (int j = 0; j < mat[i].length; j++) {
        //assuming mat[i][j] content is int...
        System.out.printf("%3d", mat[i][j]);
    }
    System.out.println();
} 
```

有关格式化的更多信息`System.out.printf`：[格式化字符串语法](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:03:23.230

试试这个：`print`在内部循环中使用，它将在一行中打印一行。`println`在将分隔每一行的外循环中使用。

```
for (int i = 0; i < mat.length; i++){
    for (int j = 0; j < mat[i].length; j++)
        System.out.print(mat[i][j]);
    System.out.println();
} 
```

# android - 地图标记重载虚拟机？

> ID：16161324
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:02:59.053
> 
> 标签：android, map, bitmap, google-maps-markers

我在数据库游标while循环中有以下片段，所以为了查看我可以将多少标记加载到内存中，我删除了游标 movetonext() 并运行它直到它使 VM 过载，所以使用 .icon() 我得到大约 1060 个标记没有我得到大约 160000，所以我想知道的是所有标记只有 3 个不同的位图，所以你必须为每个标记加载位图还是有更有效的方法来做到这一点，标记的数量我需要的应用程序远远超过 1060，谢谢你的时间....

```
 marker = map.addMarker(new     MarkerOptions().position(latlng));//.icon(BitmapDescriptorFactory
                     // .fromBitmap(knife))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:29:03.740

为我要使用的三个标记的每个位图制作一个 BitmapDescriptor，然后在添加标记时加载它解决了这个问题

# openssl - 当我用 gcc 编译 openssl_aes.c 时找不到 openssl/evp.h

> ID：16161327
> 
> 赞同：0
> 
> 时间：2013-04-23T05:03:27.670
> 
> 标签：openssl

好的，我已经安装了 openssl-1.0.1e，我想编译一个关于 AES 的程序，比如这个 [http://saju.net.in/code/misc/openssl_aes.c.txt](http://saju.net.in/code/misc/openssl_aes.c.txt)

文档提示我应该向编译器输入什么

**gcc -Wall openssl_aes.c -lcrypto**

但是有一个错误：

**openssl_aes.c:13:25: **致命错误：openssl/evp.h: 没有这样的文件或目录编译终止。****

那我该怎么办？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:00:57.840

您需要将 openssl/evp.h 定位到您的程序中。所有头文件都复制到您在 Makefile 中提到的文件夹中。

您的程序必须使用该路径。

使用 -I 选项指定包含路径。

```
 gcc -Wall -Ipath_to_openssl_headerfiles openssl_aes.c -lcrypt. 
```

# android - 底部的 jQuery Mobile Navigation 错误消息

> ID：16161330
> 
> 赞同：0
> 
> 时间：2013-04-23T05:03:37.490
> 
> 标签：android, cordova, jquery-mobile

我正在使用 jQuery Mobile 运行 PhoneGap 应用程序。我将 html 文件放在 www 文件夹中，它工作得很好。

但问题是，当我试图浏览页面时。我在底部收到以下错误。一切正常。我想知道如何禁用这个烦人的消息。

![在此处输入图像描述](https://i.stack.imgur.com/aeazN.png)

# jquery - 删除 .ajaxStop 使用的事件处理程序

> ID：16161335
> 
> 赞同：7
> 
> 时间：2013-04-23T05:03:59.183
> 
> 标签：jquery

如果我像这样使用 .ajaxStop 附加事件处理程序：

```
$(document).ajaxStop(function() {
    //Some code
}); 
```

如何删除该事件处理程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-18T19:40:28.880

Try unbinding it, like so:

```
$(document).ajaxStop(function () {
    $(this).unbind("ajaxStop");
    //Some code
}); 
```

It's how I've been doing it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T05:06:17.087

使用[.off()](http://api.jquery.com/off/)

> 删除事件处理程序。

```
$("#elementID").off() 
```

这将从所选元素中删除所有事件处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T11:11:23.800

如果您需要确保 ajaxStop() 方法中的处理程序代码在被删除**之前**执行，我建议如下：

```
$(document).ajaxStop(function(){    
    // Functions there

    $(this).unbind("ajaxStop");
}); 
```

如果您在同一页面中有各种可能的 $.ajax 并且您想控制在何处执行 ajaxStop() 代码，则特别有用。然后，您只需在所需的 jQuery 函数中使用此代码。

# java - 无法在 Java 程序中读取马拉地语文本中的 pdf 文件

> ID：16161337
> 
> 赞同：-5
> 
> 时间：2013-04-23T05:04:06.630
> 
> 标签：java

我在线程“AWT-EventQueue-0”中遇到了这个异常

> java.lang.NoClassDefFoundError: org/bouncycastle/asn1/DEREncodable 在 com.lowagie.text.pdf.PdfEncryption.(Unknown Source) at com.lowagie.text.pdf.PdfReader.readDecryptedDocObj(Unknown Source) at com.lowagie.text .pdf.PdfReader.readDocObj(Unknown Source) at com.lowagie.text.pdf.PdfReader.readPdf(Unknown Source) at com.lowagie.text.pdf.PdfReader.(Unknown Source) at com.lowagie.text.pdf。 PdfReader.(未知来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:10:04.950

看起来您正在关注`Getting started with iText Guide`. 我敢说你会发现[这个问题的答案](https://stackoverflow.com/questions/10391271/itext-bouncycastle-classnotfound-org-bouncycastle-asn1-derencodable-and-org-boun)非常有用。

# python - 不退出 ssh_tunnel，打开新终端

> ID：16161343
> 
> 赞同：0
> 
> 时间：2013-04-23T05:04:31.537
> 
> 标签：python, wxpython, paramiko, pexpect

我正在为 gui 使用 Python 和 wxpython。我正在尝试连接 ssh 隧道。连接到 ssh 后，想要打开一个新终端，并且必须在本地机器上继续我的操作。如何做到这一点？

我尝试了 subprocess、pexpect 和 paramiko，但都能够连接到 ssh 但无法打开新终端

下面是我用 pexpect 尝试过的代码：

```
import time
import sys
import pexpect
c = pexpect.spawn("ssh -Y -L xxxx:localhost:xxxx user @ host.com")
time.sleep(0.1)
c.expect("[pP]aasword")
c.sendline("xxxxxx")
time.sleep(0.2)
c.interact()
c.pexpect([user@host.com~]$)
# here after its connects to ssh then command wont be executed
c.sendline("xfce4-terminal") 
```

在 2013 年 4 月 24 日，我可以打开新终端，但是当新终端从 gui 中打开控件时，会发生这种情况。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:59:42.337

打开一个新的本地终端并将现有进程连接到它有点复杂。至少有以下三种方法：

1.  在开始连接之前打开终端，并运行所有尝试从其中建立连接的代码。这是最简单的。主要缺点是即使连接失败也会出现终端，这可能是您想要避免的。

2.  `tmux`使用or的会话运行连接尝试，`screen`如果您检测到连接成功，则将该会话重新附加到新终端。

3.  让你的 Python 程序提供一个终端可以附加到的 pty——你的程序需要在远程连接和 pty 之间传递输入和输出[。](http://docs.python.org/2/library/pty.html)

# playframework-2.0 - Playframework scala模板变量定义

> ID：16161345
> 
> 赞同：0
> 
> 时间：2013-04-23T05:04:45.733
> 
> 标签：playframework-2.0, scala-template

我的 play scala 模板中有一个手风琴组，第一个手风琴体需要在“崩溃”类中（例如：class="accordion-body in collapse"），其他手风琴需要有 class="accordion-body 在崩溃”。如何在 scala 模板中定义变量，以便我可以根据它是否是第一条记录来适当地设置手风琴类。

```
@for(t <- tests) {
   <div class="accordion-group">
       <div class="accordion-heading">
   <a class="accordion-toggle" data-toggle="collapse" data-parent="#basic-accordion" href="#Test-@t.getId()">@t.getName()</a>
       </div>
       <div id="collapse-@t.getId()" class="accordion-body in collapse">
          <div class="accordion-inner">
          <p>@t.getDescription()</p>
          <p> The demo will get expired on - @t.getEndDate() </p>
      </div>
    </div>
   </div>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:38:30.157

您可以`@for`像这样在 Scala 模板上使用循环：

```
@for((t, index) <- tests.zipWithIndex) {
    @if(index == 0) {
        // first index
        ...
    } else {
        ...
    }
} 
```

对于从第一个索引开始的每个循环，该`index`变量会自动分配和递增。`0`

# php - 如何为 opencart 多商店使用单独的语言文件？

> ID：16161348
> 
> 赞同：3
> 
> 时间：2013-04-23T05:05:10.630
> 
> 标签：php, opencart, shopping-cart

我正在使用 opencart 版本 1.5.5.1。我们有一个使用 opencart 框架编码的网站。该站点还使用 opencart 多商店功能。所有商店都使用英语。

现在的问题是，是否可以为不同的商店使用不同的语言标签？例如：一家商店与体育用品有关，另一家与手表有关。因此，我们需要在一个商店中使用与运动项目相关的语言标签，而在另一家商店中使用与手表相关的语言标签。

我不确定这是否可能，因为在 opencart 中，我们通过每个模块的控制器文件加载语言文件。

请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:42:16.770

不确定这是否是最优雅的方式，但首先想到的是一个 hack：

1.  在 Admin 中创建多种语言，即`English_sports`,`English_watches`等`French_sports`。
2.  在`catalog/comtroller/module/language.php`添加条件语句以捕获和过滤掉不需要的语言：

找到第 32 行：

```
$results = $this->model_localisation_language->getLanguages(); 
```

添加：

```
$store_id = $this->config->get('config_store_id'); 
```

在数据填充循环中添加您的条件和字符串清理代码：

```
foreach ($results as $result) {
    if ($store_id == "0" && $result['name'] == 'English_sports'){continue;} 
    $strings = array("_sports","_watches");
        if ($result['status']) {
            $this->data['languages'][] = array(
                //clean name strings for output
                'name'  => str_replace($strings,'',$result['name']),
                'code'  => $result['code'],
                'image' => $result['image']
            );  
        }
    } 
```

# wordpress - 对于 the_content() WordPress

> ID：16161349
> 
> 赞同：0
> 
> 时间：2013-04-23T05:05:11.003
> 
> 标签：wordpress

我在类别中有一个帖子，我`the_content()`在我的循环中使用。之后，结果输出：Follower（有任何posts），只有我用echo `get_the_content(`）的时候要显示的内容。为什么`the_content()`不工作？

请照亮...

这是代码

```
 <div id="ani-content">
     <?php 
        $gallery = new WP_Query('post_type=gallery');
        while($gallery -> have_posts()) : $gallery -> the_post();
     ?>
     <div class="wrap-frame">
         <div class="frame">
             <h2><?php the_title() ;?></h2>
             <div class="image">
               <?php if(has_post_thumbnail()) {the_post_thumbnail('p_images_gallery'); }?>
             </div>
             <div class="p_content">
                <?php echo get_the_content(); ?>
             </div>
             <div class="readmore"><a href="<?php the_permalink(); ?>">Readmore</a></div>
         </div>
     </div>
    <?php endwhile;wp_reset_query(); ?>
  </div> 
```

# php - 如何使用正则表达式在特定 div 和特定锚标记内获取 img 标记值

> ID：16161350
> 
> 赞同：2
> 
> 时间：2013-04-23T05:05:14.987
> 
> 标签：php, regex, html-parsing

我是正则表达式的新手，我尝试了很多方法来获取锚标记 html 中的图像标记值，这是我的 html 表达式

```
<div class="smallSku" id="ctl00_ContentPlaceHolder1_smallImages">
                                <a title="" name="http://www.playg.in/productImages/med/PNC000051_PNC000051.jpg" href="http://www.playg.in/productImages/lrg/PNC000051_PNC000051.jpg" onclick="return showPic(this)" onmouseover="return showPic(this)">
    <img border="0" alt="" src="http://www.playg.in/productImages/thmb/PNC000051_PNC000051.jpg"></a>    <a title="PNC000051_PNC000051_1.jpg" name="http://www.playg.in/productImages/med/PNC000051_PNC000051_1.jpg" href="http://www.playg.in/productImages/lrg/PNC000051_PNC000051_1.jpg" onclick="return showPic(this)" onmouseover="return showPic(this)">
    <img border="0" alt="PNC000051_PNC000051_1.jpg" src="http://www.playg.in/productImages/thmb/PNC000051_PNC000051_1.jpg"></a>
                        </div> 
```

我只想返回图像标签的 src 值，我在“preg_match_all()”中尝试了一个匹配模式，该模式是

```
"@<div[\s\S]class="smallSku"[\s\S]id="ctl00_ContentPlaceHolder1_smallImages"\><a title=\"\" name="[\w\W]" href="[\w\W]" onclick=\"[\w\W]" onmouseover="[\w\W]"\><img[\s\S]src="(.*)"[\s\S]></a><\/div>@" 
```

请帮助我为此尝试了很多时间也尝试使用此链接[使用正则表达式匹配未嵌套在锚标记中的图像标记](https://stackoverflow.com/questions/13244249/match-image-tag-not-nested-in-an-anchor-tag-using-regular-expression)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:30:44.880

正则表达式不是解析 HTML 的正确工具。请参阅此常见问题解答：[如何解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml)

以下是有关如何`src`使用您的示例获取属性的示例：

```
$doc = new DOMDocument();
$doc->loadHTML($your_html_string);
$xpath = new DOMXPath($doc);

foreach ($xpath->query('//div[@class="smallSku"]/a/img/@src') as $attr) {
    $src = $attr->value;
    print $src;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T09:16:33.943

试试这个太阳

```
 $content = file_get_contents('your url'); 
    preg_match_all("|<div class='items'>.*</div>|", $content, $arr, PREG_PATTERN_ORDER);  
preg_match_all("/src='([^']+)'/", $arr[0][0], $arrr, PREG_PATTERN_ORDER); 
    echo '<pre>'; 
    print_r($arrr); 
```

# javascript - 限制在提示框中输入

> ID：16161359
> 
> 赞同：6
> 
> 时间：2013-04-23T05:05:51.283
> 
> 标签：javascript, jquery, html

我希望我的提示框最多输入 10 个字符。如果用户在此之后按下任何键，则不应输入任何文本。

目前我使用的代码使用 while 条件来检查输入是否在限制范围内。如果超出限制，它会接受文本但一直提示用户，直到输入在限制范围内。值将分配给 person1 变量和代码仅当输入在限制范围内时才会继续。

我希望输入框在第一个位置本身不接受超过指定的输入..

请帮忙。

代码如下：

```
 person1=prompt("Please enter your data 1(Maximum limit 20)","Sample 1");
      while(person1.length > 20){
         alert("Keep the message length to 20 chars or less")
         person1 = prompt("Please enter your data 1(Maximum limit 20)","Sample 1");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:30:14.517

我能想到的只是使用 do...while 来在用户的文本超过指定数量时重新出现提示。希望有帮助。

```
var n = 0, msg = "Please enter your data 1(Maximum limit 20)";
do {
    n++;
    if(n > 1) msg = "You had too many characters! \nPlease enter your data 1(Maximum limit 20).";
    person1=prompt(msg, "Sample1");

}
while (person1.length > 20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:34:08.990

恐怕是个悲伤的消息-无法解决`prompt()`

[但是你可以使用jQuery Dialogs](http://jqueryui.com/dialog/)做类似的事情

您不必使用 jQuery - 但也许看看就会明白。基本上，这种方式你将有一个正常的 HTML 方法（所以你可以使用 maxlength 或 javascript 来限制输入）

如果您使用模态对话框，那么您将获得非常相似的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T05:02:09.793

使用提示框无法完全解决此问题。要解决此问题，您必须制作一个**jQuery UI 自定义对话框**。

基本上，您在表单标签内制作了一个文本框和两个按钮“OK”和“Cancel”，并将代码嵌入到 Jquery 中，使它们像提示框一样弹出。

我已在此页面[http://jqueryui.com/dialog/#default](http://jqueryui.com/dialog/#default)上使用具有默认功能的对话框作为我的基础...

最后给出代码的解释..

这是执行此操作的完整代码...

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Dialog - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>
$(document).ready(function ()
{   
    $('#dialog').dialog({
        autoOpen: false,
        width: 250,
        height: 180,
        modal : true,
        resizable: false,
    show:"slow"
    });

$('#put').click(function() {
       $( "#dialog" ).dialog( "open" );
   });
 });

 function getPdata( arg ) {             //Function called when Cancel button is pressed
 var f = document.getElementById( 'pForm' );
  // exit immediately
 close();
 return;
 }

function close(){
$( "#dialog" ).dialog( 'close' );
 }

 var cnt=1;
  function getPdata1() {       //function called when ok button is pressed
  var f = document.getElementById( 'pForm' );
  var n = $("input[name='name']").val();

  alert(n.length);
  if (n.length <= 10) {
       $('<div />',{id:"div" + cnt }).html(n).appendTo('body');  //crated div will have an id as `div`+ count;
  } else {
        alert('the data you have enterd is not in limit.Please try again');
         return;

  }
    close();
    if (cnt < 5) {
         f.name.value = "";
          $("#dialog").dialog('open');
          cnt++;
    }

}

function show()
   {
    document.getElementById("but1").style.visibility="visible";    

    }

     </script>
     </head>
     <body>

     <div>
    <button type="button" id="put" >Insert data</button>
    </div>

    <div id="dialog" title="Input Data"> <!--the actual contebts of dialog box-->
    <form id="pForm" >
     name: <input type="text" name="name" width='50' height='100' maxlength="10"   placeholder="Fill in your data" /><br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="button" value="OK" onclick="getPdata1()" />
    <input type="button" value="cancel" onclick="getPdata( this.value )" />
   </form>
   </div> 
   </body>
    </html> 
```

代码说明..

*   网页上会显示一个按钮。Onclick 将显示一个弹出对话框，其中包含一个文本框和 2 个命令按钮。
*   输入限制为 10 个字符。
*   输入的内容将打印在按钮下方的网页上作为输出。
*   输入将被占用 5 次，因为计数器已经指定，直到 5..

上面的代码可以根据个人需要完全修改..希望这个答案有帮助。如有任何疑问，请随时询问..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:23:44.363

你不能。

避免`prompt()`, 及其亲属`alert()`和`confirm()`. 正如您所发现的，它们的功能都非常有限。它们还经常阻止用户在浏览器中执行其他任务，例如切换到其他选项卡。为了获得类似的效果，您可以改用页内模式。有关此类示例，请参阅[Bootstrap modals 。](http://twitter.github.io/bootstrap/javascript.html#modals)

# iphone - 如何捕获 EXC_BAD_ACCESS（代码=1，地址=0x00XXXXXX）？

> ID：16161362
> 
> 赞同：3
> 
> 时间：2013-04-23T05:06:01.097
> 
> 标签：iphone, ios, objective-c, exception, signals

我正在尝试记录我的应用程序中发生的所有崩溃。我写了一个signalHandler 和一个exceptionHandler。我正在为 sys/signal.h 文件中定义的所有信号注册 signalHandler。我在 SIGABRT、SIGUSR1 等上调用了我的 signalHandler 方法。

问题是，我有时会收到一些奇怪的信号，这些信号并没有调用我的 signalHandler。一个示例是 EXC_BAD_ACCESS（代码=1 或 2，地址='某个内存地址'）。我已经用 signalHandler 注册了 SIGSEGV；事实上，我已经在 sys/signal.h 文件中注册了所有定义的信号。

如果您想创建这个 EXC_BAD_ACCESS (code=1, address=0x00XXXXXX) 信号，只需在您的应用程序中编写以下代码行，

```
NSLog(@"Stupid Log %@ %@"); 
```

有人可以帮我捕捉这些信号吗？

提前致谢，

苏拉杰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:17:25.857

您可以参考以下链接：

[EXC_BAD_ACCESS 自动处理](https://stackoverflow.com/questions/10315526/exc-bad-access-automatic-handling)

还要调查一下：

[如何防止 EXC_BAD_ACCESS 使应用程序崩溃？](https://stackoverflow.com/questions/15513864/how-to-prevent-exc-bad-access-from-crashing-an-app)

# java - java.lang.StringIndexOutOfBoundsException：来自 java.util.regex.Matcher

> ID：16161365
> 
> 赞同：0
> 
> 时间：2013-04-23T05:06:14.853
> 
> 标签：java, regex

我正在尝试使用正则表达式删除 nbsp；从我的字符串。以下是程序。

```
 import java.util.regex.Matcher;
    import java.util.regex.Pattern;

     public class MyTest {

    private static final StringBuffer testRegex = 
        new StringBuffer("<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#ff6600\">Test</font></p><br><p>" +
        "<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#ff6600\">Test</font></p><br><p>" +
        "<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#ff6600\">Test</font>" +
        "<BLOCKQUOTE&nbsp;style=\"MARGIN-RIGHT:&nbsp;0px\"&nbsp;dir=ltr><br><p>Test</p><strong>" +
        "<FONT&nbsp;color=#333333>TestTest</font></strong></p><br><p>Test</p></blockquote>" +
        "<br><p>TestTest</p><br><BLOCKQUOTE&nbsp;style=\"MARGIN-RIGHT:&nbsp;0px\"&nbsp;dir=ltr><br><p>" +
        "<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#ffcc66\">TestTestTestTestTest</font><br>" +
        "<p>TestTestTestTest</p></blockquote><br><p>" +
        "<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#003333\">TestTestTest</font></p><p>" +
        "<FONT&nbsp;style=\"BACKGROUND-COLOR:&nbsp;#003399\">TestTest</font></p><p>&nbsp;</p>");

    //"This&nbsp;is&nbsp;test<P>Tag&nbsp;Tag</P>";

    public static void main(String[] args) {
        System.out.println("***Testing***");
        String temp = checkRegex(testRegex);
        System.out.println("***FINAL = "+temp);

    }

    private static String checkRegex(StringBuffer sample){
        Pattern pattern = Pattern.compile("<[^>]+?&nbsp;[^<]+?>");      
        Matcher matcher = pattern.matcher(sample);      
        while (matcher.find()) {
            int start = matcher.start();
            int end = matcher.end();
            String group = matcher.group();
            System.out.println("start = "+start+" end = "+end+"" +"***GROUP = "+group);

            String substring = sample.substring(start, end);
            System.out.println(" Substring = "+substring);
            String replacedSubString = substring.replaceAll("&nbsp;"," ");  
            System.out.println("Replaced Substring = "+replacedSubString);

            sample.replace(start, end, replacedSubString);
            System.out.println(" NEW SAMPLE = "+sample);

        }
        System.out.println("********WHILE OVER ********");
        return sample.toString();
    }

} 
```

我正在`java.lang.StringIndexOutOfBoundsException`排队`while (matcher.find())`。我目前正在使用 java Pattern 和 Matcher 来查找`nbsp`；并将其替换为`" "`. 有谁知道这是什么原因？我应该怎么做才能删除多余的`nbsp`；从我的字符串？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:17:38.013

`matcher.reset();`之后使用`sample.replace(start, end, replacedSubString);`

这是因为当你替换字符串**sample**时，`end`会指向一个 **无效**的位置。所以，你需要 `matcher.reset();`在 every 之后使用`replace`。

例如，如果 start 是 0 并且 end 是 5 并且当您替换`&nbsp;`为 时`，end 将指向无效位置，然后如果 end 指向字符串长度之外的位置，则`find`方法将引发异常。`StringIndexOutOfBoundsException``

 `* * *

如果字符串很大，重置可能会导致主要的性能瓶颈，因为`reset`会再次从头开始匹配。您可以改用

```
 matcher.region(start,sample.length()); 
```

这将从最后匹配的位置开始匹配！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:36:35.037

```
// change the group and it is source string is automatically updated 
```

没有办法改变Java中的任何字符串，所以你要求的是不可能的。

可以通过调用来实现用字符串删除或替换模式

```
someString = someString.replaceAll(toReplace, replacement); 
```

转换匹配的子字符串，如您的行所示

```
m.group().replaceAll("something",""); 
```

最好的解决方案可能是使用 a`StringBuffer`作为结果

```
Matcher.appendReplacement and Matcher.appendTail. 
```

例子：

```
String regex = "ipsum";
String sourceString = "lorem ipsum dolor sit";

Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(sourceString);
StringBuffer sb = new StringBuffer();

while (m.find()) {
    // For example: transform match to upper case
    String replacement = m.group().toUpperCase();
    m.appendReplacement(sb, replacement);
}

m.appendTail(sb);

sourceString = sb.toString();

System.out.println(sourceString); // "lorem IPSUM dolor sit" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:38:23.037

您需要创建一个新`StringBuffer`的来保存替换的字符串，然后使用类中的[`appendReplacement(StringBuffer sb, String replacement)`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)和[`appendTail(StringBuffer sb)`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendTail%28java.lang.StringBuffer%29)方法`Matcher`来进行替换。可能有办法就地执行此操作，但上述方法是执行此操作的最直接方法。

这是您`checkRegex`重写的方法：

```
private static String checkRegex(String inputString){
    Pattern pattern = Pattern.compile("<[^>]+?&nbsp;[^<]+?>");      
    Matcher matcher = pattern.matcher(inputString);

    // Create a new StringBuffer to hold the string after replacement
    StringBuffer replacedString = new StringBuffer();

    while (matcher.find()) {
        // matcher.group() returns the substring that matches the whole regex
        String substring = matcher.group();
        System.out.println(" Substring = "+substring);

        String replacedSubstring = substring.replaceAll("&nbsp;"," "); 
        System.out.println("Replaced Substring = "+replacedSubstring);

        // appendReplacement is a clean approach to append the text which comes
        // before a match, and append the replacement text for the matched text

        // Note that appendReplacement will interpret $ in the replacement string
        // with special meaning (for referring to text matched by capturing group).
        // Matcher.quoteReplacement is necessary to provide a literal string as
        // replacement
        matcher.appendReplacement(replacedString, Matcher.quoteReplacement(replacedSubstring));

        System.out.println(" NEW SAMPLE = "+replacedString);
    }

    // appendTail is used to append the text after the last match to the
    // replaced string.
    matcher.appendTail(replacedString);

    System.out.println("********WHILE OVER ********");
    return replacedString.toString();
} 
````

# c# - 给定字符串集合，计算每个单词在 List 中出现的次数

> ID：16161371
> 
> 赞同：2
> 
> 时间：2013-04-23T05:06:50.333
> 
> 标签：c#, .net, regex, linq

输入 1: `List<string>`，例如：

> “你好”、“世界”、“堆栈”、“溢出”。

输入2：（`List<Foo>`两个属性，字符串a，字符串b），eg：

> Foo 1：a：“你好！” b：字符串。空
> 
> Foo 2：a：“我喜欢 Stack Overflow” b：“这是有史以来最好的网站！”

所以我想以`Dictionary<string,int>`. 单词，以及它在 中出现的次数`List<Foo>`，在`a` **或**`b`字段中。

当前的第一遍/我的头代码，这太慢了：

```
var occurences = new Dictionary<string, int>();
foreach (var word in uniqueWords /* input1 */)
{
    var aOccurances = foos.Count(x => !string.IsNullOrEmpty(x.a) && x.a.Contains(word));
    var bOccurances = foos.Count(x => !string.IsNullOrEmpty(x.b) && x.b.Contains(word));
    occurences.Add(word, aOccurances + bOccurances);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:22:18.253

大致：

1.  从第一个输入构建字典 ( `occurrences`)，可选择使用不区分大小写的比较器。
2.  对于`Foo`第二个输入中的每个，`RegEx`用于拆分`a`和`b`成词。
3.  对于每个单词，检查键是否存在于`occurrences`. 如果存在，则递增并更新字典中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:22:27.400

您可以尝试连接两个字符串 a + b。然后做一个正则表达式将所有单词提取到一个集合中。然后最后使用按查询分组进行索引。

例如

```
void Main()
{
    var a = "Hello there!";
    var b =  "It's the best site ever!";

    var ab = a + " " + b;

    var matches = Regex.Matches(ab, "[A-Za-z]+");
    var occurences = from x in matches.OfType<System.Text.RegularExpressions.Match>()
                    let word = x.Value.ToLowerInvariant()
                    group word by word into g
                    select new { Word = g.Key, Count = g.Count() };
    var result = occurences.ToDictionary(x => x.Word, x => x.Count);
    Console.WriteLine(result);
} 
```

建议进行一些更改的示例...编辑。只需重新阅读要求....有点奇怪，但是嘿...

```
void Main()
{
    var counts = GetCount(new [] {
        "Hello there!",
        "It's the best site ever!"
    });
    Console.WriteLine(counts);
}

public IDictionary<string, int> GetCount(IEnumerable<Foo> inputs)
{
    var allWords =      from input in inputs
                        let matchesA = Regex.Matches(input.A, "[A-Za-z']+").OfType<System.Text.RegularExpressions.Match>()
                        let matchesB = Regex.Matches(input.B, "[A-Za-z']+").OfType<System.Text.RegularExpressions.Match>()
                        from x in matchesA.Concat(matchesB)
                        select x.Value;
    var occurences = allWords.GroupBy(x => x, (x, y) => new{Key = x, Count = y.Count()}, StringComparer.OrdinalIgnoreCase);

    var result = occurences.ToDictionary(x => x.Key, x => x.Count, StringComparer.OrdinalIgnoreCase);
    return result;
} 
```

# css - 在标题中插入换行符而不是移动它

> ID：16161372
> 
> 赞同：0
> 
> 时间：2013-04-23T05:06:50.777
> 
> 标签：css

我有一个侧边栏和一个像这样的标题：

![](https://i.stack.imgur.com/IBcVe.png)

两者都没有浮动，因为我希望我的文本环绕侧边栏。问题是，当标题太长时，它就会不合适：

![](https://i.stack.imgur.com/zUdFp.png)

我希望它留在同一个地方，但只是分成两行：

![](https://i.stack.imgur.com/87PmY.png)

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:09:16.723

为标题设置一个固定宽度，如果这不能解决它，然后参考[这个](https://stackoverflow.com/questions/502500/css-word-wrapping-in-div)

* * *

编辑：由于 OP 不想指定固定宽度

您可以指定最大宽度，以便侧边栏扩展至一定宽度，然后使文本换行。请记住，浏览器对此属性的支持并不普遍：请参阅此[图表](http://caniuse.com/minmaxwh)以了解兼容性。

[IE 中的最大宽度](https://stackoverflow.com/questions/5968779/how-to-make-ie-support-min-width-max-width-css-properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:17:00.433

我的建议是`float: left`侧边栏。然后标题应该没有问题地换行。它可以完成，并且将是最好的方法，即使 HTML 必须被重新设计以适当地嵌套。

或者，您也可以使用 jQuery 来完成此操作：

```
$(window).resize(function() {
  doc_width = $(document).width();
  doc_width = doc_width.replace("px","");
  sidebar_width = $("#sidebar").width();
  sidebar_width = sidebar_width.replace("px","");
  $("#header").css("max-width", (doc_width - sidebar_width) + "px");
}); 
```

看看这是否适合你。如果没有实际的 HTML，很难给出具体的答案。

# jquery - jQuery 动画裁剪

> ID：16161375
> 
> 赞同：0
> 
> 时间：2013-04-23T05:06:55.353
> 
> 标签：jquery, jquery-animate, crop

我得到了这个代码：

```
<img id="img" src="img.png"/>
<button onclick="crop();">Click me!</button> 
```

当用户单击按钮时，我想为图像的裁剪过程设置动画。图像在几秒钟内从宽度和高度为 100% 变为宽度和高度为 50%（请注意，我说的不是拉伸，而是裁剪）。

我发现的所有裁剪插件都需要相当长的时间来裁剪，因此不能用于动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:28:31.780

试试这些链接：（可能有帮助）

[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-jquery-image-cropping-plugin-from-scratch-part-i/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-jquery-image-cropping-plugin-from-scratch-part-i/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:11:57.517

```
$("#img").animate({'width':'50%', 'height':'50%'}, {queue:false, duration:300}); 
```

# fonts - 在 Ubuntu 操作系统中不支持“Gill san MT”字体

> ID：16161377
> 
> 赞同：1
> 
> 时间：2013-04-23T05:07:01.703
> 
> 标签：fonts, kendo-ui

我正在做一个基于 kendo ui 控件的项目。在我的应用程序中，我正在为全身应用“Font-Family:”Gill san MT“”字体。它在 Windows 7 中工作。但是当我们在 Ubuntu 上运行我的应用程序时，字体显示为“Times New Roman”。它只在 Ubuntu 中发生。为什么会发生？Ubuntu 是否支持 Gill san MT 字体？有人回复我吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:12:55.310

首先，字体叫“ [Gill Sans](http://en.wikipedia.org/Gill_Sans) ”，而不是“Gill san”。

其次，不，如果没有安装字体将无法正确显示。Gill Sans 甚至没有默认安装在 Windows 上。除非用户自己出去安装它，否则它肯定不会安装在 Ubuntu 上。为了应对这种情况，您的网站应该指定适当的后备字体：

```
font-family: "Gill Sans", sans-serif; 
```

如果您的设计依赖于Gill Sans ，您可能想要考虑获得[Gill Sans 的网络字体版本。](http://www.webtype.com/font/gill-sans-family/)但请注意：它不是免费的。

# haskell - 非法实例声明/重叠实例

> ID：16161384
> 
> 赞同：2
> 
> 时间：2013-04-23T05:07:20.073
> 
> 标签：haskell, overlapping-instances

给定类 X 和 Y，创建彼此类的实例最惯用的方法是什么？例如 -

```
instance (X a) => Y a where ...
instance (Y a) => X a where ... 
```

我想避免扩展。另外，我知道这可能会导致一些讨厌的无限递归，所以我愿意采用完全不同的方法来完成同样的事情并保持相对干燥。下面给出了一些关于我遇到的确切问题的背景 -

```
data Dealer = Dealer Hand
data Player = Player Hand Cash

class HasPoints a where
    getPoints :: a -> Int

class (HasPoints a) => CardPlayer a where
    getHand :: a -> Hand

    viewHand :: a -> TurnIsComplete -> Hand

    hasBlackjack :: a -> Bool
    hasBlackjack player = getPoints player == 21 &&
                          (length . getCards . getHand) player == 2

    busts :: a -> Bool
    busts player = getPoints player > 21 
```

我想这样做——

```
instance (CardPlayer a) => HasPoints a where
    getPoints = getPoints . getHand 
```

但看来我必须这样做——

```
instance HasPoints Dealer where
    getPoints = getPoints . getHand

instance HasPoints Player where
    getPoints = getPoints . getHand 
```

**编辑**

似乎我最喜欢的方法是保留类型类`HasPoints`并改为实现。`CardPlayer``data`

```
data CardPlayer = Dealer Hand | Player Hand Cash

instance HasPoints CardPlayer where
    getPoints = getPoints . getHand

getCash :: CardPlayer -> Maybe Cash
getHand :: CardPlayer -> Hand
viewHand :: CardPlayer -> TurnIsComplete -> Hand
hasBlackjack :: CardPlayer -> Bool
busts :: CardPlayer -> Bool

-- I wanted HasPoints to be polymorphic
-- so it could handle Card, Hand, and CardPlayer

instance HasPoints Hand where
    getPoints Hand { getCards = [] } = 0

    getPoints hand = if base > 21 && numAces > 0
                     then maximum $ filter (<=21) possibleScores
                     else base
      where base = sum $ map getPoints $ getCards hand
            numAces = length $ filter ((Ace==) . rank) $ getCards hand
            possibleScores = map ((base-) . (*10)) [1..numAces]

instance HasPoints Card where
    -- You get the point 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T13:51:33.110

> 给定类 X 和 Y，创建彼此类的实例最惯用的方法是什么？

鉴于您的示例代码，*最*惯用的方法是在它们没有做任何有用的事情时首先不使用类型类。考虑类函数的类型：

```
class HasPoints a where
    getPoints :: a -> Int

class (HasPoints a) => CardPlayer a where
    getHand :: a -> Hand
    viewHand :: a -> TurnIsComplete -> Hand
    hasBlackjack :: a -> Bool
    busts :: a -> Bool 
```

他们有什么共同点？它们都将类参数类型的一个值作为第一个参数，因此给定这样的值，我们可以将每个函数应用于它并获得所有相同的信息，而无需打扰类约束。

因此，如果您想要一个好的、惯用的 DRY 方法，请考虑以下几点：

```
data CardPlayer a = CardPlayer
    { playerPoints :: Int 
    , hand :: Hand
    , viewHand :: TurnIsComplete -> Hand
    , hasBlackjack :: Bool
    , busts :: Bool
    , player :: a
    }

data Dealer = Dealer
data Player = Player Cash 
```

在此版本中，类型`CardPlayer Player`和`CardPlayer Dealer`等同于您拥有的`Player`和`Dealer`类型。这里的`player`记录字段用于获取特定于玩家类型的数据，并且在您的类约束中具有多态性的函数可以简单地对 type 的值进行操作`CardPlayer a`。

尽管对于常规函数（如您的默认实现）可能更有意义`hasBlackjack`，`busts`除非您真的需要对不受二十一点标准规则影响的玩家进行建模。

从这个版本开始，`HasPoints`如果你有非常不同的类型应该是它的实例，你现在可以单独定义一个类，尽管我对它的实用性持怀疑态度，或者你可以应用相同的转换来获得另一个层：

```
data HasPoints a = HasPoints
    { points :: Int
    , pointOwner :: a
    } 
```

但是，这种方法随着您嵌套这样的专业化而迅速变得笨拙。

我建议`HasPoints`完全放弃。它只有一个函数，它只是提取一个`Int`，所以任何`HasPoints`一般处理实例的代码都可以只使用`Int`s 并完成它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T05:56:37.640

一般来说，[如果不进行类型检查 undecidable ，就不可能将一个类的所有实例声明为另一个类的实例](https://stackoverflow.com/questions/8461029/declare-all-instances-of-a-typeclass-are-in-another-typeclass-without-modifying/8461108)。因此，您提出的定义仅适用于`UndecidableInstances`启用：

```
{-# LANGUAGE FlexibleInstances, UndecidableInstances #-}

instance (CardPlayer a) => HasPoints a where
    getPoints = getPoints . getHand 
```

虽然可以走这条路，但我建议重构代码如下：

```
data Hand = ...

handPoints :: Hand -> Int
handPoints = ...

data Dealer = Dealer Hand
data Player = Player Hand Cash

class CardPlayer a where
  getHand :: a -> Hand
  ...

instance CardPlayer Dealer where ...
instance CardPlayer Player where ...

playerPoints :: (CardPlayer a) => a -> Int
playerPoints = handPoints . getHand 
```

# php - 如何在不使用 settimeout 的情况下更新页面？settimeout 正在减慢 chrome 中的页面速度。是否有任何 api

> ID：16161386
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:07:24.243
> 
> 标签：php, jquery, real-time

我尝试使用 Settimeout 更新页面，它在 Mozilla 中运行完美，但在 Google Chrome 中降低了页面速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:06:49.817

确实有 AJAX 的替代品。老实说，其中一些相当惊人。

我在一家名为 Realtime ( [http://www.realtime.co](http://www.realtime.co) ) 的公司工作，我们开发了一个非常酷的框架来处理实时数据。

它在云上运行，我们提供了许多不同的 API，您无需安装任何东西，您可以获得一个免费帐户（每月有 1.000.000 条免费消息和 30.000 个用户）。它允许您将数据推送到浏览器，这意味着您不会使用 AJAX 请求来敲击您的服务器。

在浏览器上，它使用 websockets（如果可用）。对于较旧的非 websocket 浏览器，我们将透明地回退到您的浏览器可以使用的任何内容。

查看[http://www.realtime.co](http://www.realtime.co)和[http://www.xrtml.org](http://www.xrtml.org)以获取下载和文档。如果您需要任何帮助，请告诉我，因为我是 Realtime 的开发人员宣传员。

# java - Java 连接池耗尽错误

> ID：16161389
> 
> 赞同：0
> 
> 时间：2013-04-23T05:07:46.290
> 
> 标签：java, connection, pool

我通常知道错误是否发生，我的意思是`org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool exhausted`，这意味着连接过载。但在这种情况下，我很确定没有连接到我的本地 mysql 服务器（我使用了“show processlist”命令）。

有没有其他地方会导致这个错误？

下面是我的代码：

```
try {
    // Obtain a connection
    InitialContext ctx = new InitialContext();
    DataSource ds = (DataSource) ctx.lookup(jndiSrc);
    _log.info("==============" + jndiSrc + " is bound to " + ds + "=====================");
    return ds.getConnection(); 
} 
```

# cassandra - 'sstableloader' 未被识别为内部或外部命令，

> ID：16161390
> 
> 赞同：1
> 
> 时间：2013-04-23T05:07:49.640
> 
> 标签：cassandra, command-line-interface

我`SSTables`从团队中的某个人那里得到了很多东西。现在我正试图将它们推`SSTABLES`入`Cassandra database`.

我成功创建了相应的键空间和列族。

现在，只要我执行`SSTableLoader`命令，我总是会遇到异常？

```
S:\Apache Cassandra\apache-cassandra-1.2.3\bin>sstableloader
C:\CassandraClient-LnP\201304050000\profileks\PROFILECF 'sstableloader' is
not recognized as an internal or external command, operable program or
batch file. 
```

谁能告诉我我在这里做错了什么？我正在运行 Cassandra 1.2.3。这是我第一次与`SSTableLoader`. 我在windows环境下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:39:37.427

`SSTableLoader`是一个 Unix 可执行文件，不能在 windows 下运行（据我所知）。

您可以尝试将表导出为`json`并重新导入它们（使用[**json2sstable**](http://www.datastax.com/docs/1.0/references/sstable2json)），但要使用 sstableloader，您需要 linux/mac/solaris 等。

# ruby-on-rails - Solr在rails中的多个表中搜索

> ID：16161393
> 
> 赞同：0
> 
> 时间：2013-04-23T05:07:54.370
> 
> 标签：ruby-on-rails, solr

我有三个表，分别是品牌、网站和项目类别。我想同时在所有三个表中执行搜索功能。我使用 solr 进行搜索。以前我是一次搜索一个。这意味着如果用户输入“阿迪达斯”，那么我在品牌表中搜索，如果没有得到，那么我在网站表中搜索，依此类推。根据获得的结果，我在其他一些表中搜索说 main_nav_url 使用该brand_id 或 site_id 或 category_id 并从 main_nav_url 表中获取所需的列。后来我遇到了这种冲突，例如如果品牌和网站表中都存在“阿迪达斯”名称，我只能得到品牌的搜索结果。

请帮我解决这个问题，我可以同时在所有三个表中搜索，根据获得的结果提取它们的brand-id和site_id category_id，并在main_nav_url表中再执行一次搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:30:43.020

我得到了答案。

分别执行 solr 搜索以检索他们的brand_id、site_id 和 category_id。将对应的 id 存储在一个数组中。例如

```
@storesearch.results.each do |result|
    siteids << result.id
end 
```

根据brandids、siteids、catids的长度在main_nav_url表中执行solr搜索。在这种情况下，必须对 9 种不同的情况执行 solr 搜索。其中1个案例如下所示。

if(siteids.length == 0 && brandids.length != 0 && catids.length != 0) @searchresults=MainNavigationUrl.search 用 :brand_id 做 any_of，brandids[0..brandids.length] 用 :main_category_id, catids [0..catids.length] end end

# c# - 如何在 MVC 中实现两个控制器

> ID：16161399
> 
> 赞同：2
> 
> 时间：2013-04-23T05:08:14.140
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, model-view-controller

我正在尝试在我的 StudentController 中实现 ApiController，但问题是我也必须实现 BaseController。

当我这样做时，它不起作用

```
public class StudentController : BaseController, ApiController 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:09:32.483

使您的`BaseController`派生自`ApiController`.

```
public class BaseController: ApiController
{
...

public class StudentController : BaseController
{
... 
```

如果你想在同一个应用程序中使用 WebApi 和 MVC，你可以使用不同的命名空间。

```
namespace Applicationrootns.Controllers
{
    public class StudentController : Controller
    {
        ....
    }
}

namespace Applicationrootns.Controllers.Api
{
    public class StudentController : ApiController
    {
       ....
    }
} 
```

现在有了这个你可以访问

`applicaitonbase/student/` 和`applicaitonbase/api/student`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T05:21:05.687

你不能。C# 中不允许多重继承。其他答案为您提供了可能的解决方法，但您不能从多个基类派生。C# 只允许一个继承链。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:11:09.760

让你的基础控制器首先从 ApiController 继承，然后从你的学生控制器继承你的基础控制器。

```
public class BaseController : ApiController

public class StudentController : BaseController 
```

# sql - 错误：在 Oracle 上创建索引时缺少右括号

> ID：16161400
> 
> 赞同：0
> 
> 时间：2013-04-23T05:08:19.110
> 
> 标签：sql, oracle, oracle10g

我正在尝试创建一个带有索引的表，但它导致 ORA-00907 错误，表示我缺少右括号。这是导致错误的示例 sql。

```
create table example
(
   id number(12, 0) not null using index (create index example_idx on example(id))
); 
```

也许是因为非空关键字，但我不明白为什么它要求一个右括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:12:03.077

[`create table`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm)并且[`create index`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_5012.htm)是单独的语句，您不能像那样混合它们（尽管您可以隐式或显式创建索引来备份您在线定义的唯一或主键约束）。

您需要分两步执行此操作，作为两个单独的语句：

```
create table example (id number(12, 0) not null);
create index example_idx on example(id); 
```

* * *

您从[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm)显示的示例：

```
CREATE TABLE a (
 a1 INT PRIMARY KEY USING INDEX (create index ai on a (a1))); 
```

在标题为“指定与约束关联的索引”的部分中，并且正在创建索引作为主键约束的一部分。[此处](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#sthref5311)描述了该`using index`子句。

在您的代码中，您创建了一个非空约束，它不受索引的支持，因此该子句在此处无效。如您提供的链接所述，如果要支持唯一键或主键，则只能使用这种创建索引的方法。

# ios - 如何获取远程通知计数

> ID：16161401
> 
> 赞同：1
> 
> 时间：2013-04-23T05:08:20.560
> 
> 标签：ios, push-notification, apple-push-notifications

我想问是否有办法在启动应用程序时获取远程通知计数。

我可以通过在方法中检查字典的`[UIApplication sharedApplication].applicationIconBadgeNumber`值或检查`[@"aps"][@"badge"]`值来做到这一点`userInfo``application:didReceiveRemoteNotification:`

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:16:51.440

如果您在收到通知时使用`UITabar`增加该`badge count`特定选项卡的选项，您可以减少用户执行的特定操作。即使您也可以通过阅读该项目的徽章计数来获得活动未读通知的数量`tabbar`。

# amazon-web-services - AWS 负载均衡器行为异常

> ID：16161404
> 
> 赞同：0
> 
> 时间：2013-04-23T05:08:37.503
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing

我在负载均衡器后面运行 4 台生产服务器，2 台大型在 1a 上，2 台大型在新加坡地区的 1b 上。我已经为它禁用了 STICKY SESSION。我的问题是：负载均衡器将更多流量分配到 1b 区域，这使得这些实例以 100% CPU 运行，而 1a 区域实例成为空闲 CPU。它在网站上引起了很多问题。如何摆脱这个？

# php - cakephp 1.2 带有下拉菜单的多个更新复选框

> ID：16161407
> 
> 赞同：0
> 
> 时间：2013-04-23T05:08:57.393
> 
> 标签：php, cakephp, cakephp-1.2

我试图通过从下拉菜单中选中复选框来更新学生班级列表。我选择了四个复选框。因此，调试正确显示 248,268,244,1220。`Warning (2): Illegal string offset 'id' [APP/controllers/customers_controller.php, line 728]`但由于“classroom_id”而出现错误。无论如何只显示选定复选框ID的列表吗？

我正在尝试通过选中复选框来更新多个记录/行。如何将多个选定的 ID 发送到控制器？

任何帮助将不胜感激。

```
<?php echo $form->input('classroom_id', array('type' => 'select','empty' => '-- Select --','label' => false,'style'=>'width:254px;', 'options' => $classesfiltered,'validate'=>'required:true','div'=>'formfield')); ?>

<?php foreach ($students as $student) { ?>
<?php echo $form->input('Customer.'.$student['Customer']['id'].'.id', array('type' => 'checkbox', 'id' => "admin_checkbox_".$student['Customer']['id'], 'label' => false)); ?> 
<?php } ?> 
```

控制器

```
foreach($this->data['Customer'] as $key => $item) {
    if ($item['id']) {
            Debugger::Dump($this->data['Customer'][$key]);
    }
} 
```

输出

```
Warning (2): Illegal string offset 'id' [APP/controllers/customers_controller.php, line 728]

"classroom_id"

248

268

244

1220 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:36:12.457

您获得 5 个值而不是 4 个值的原因是因为教室 ID 输入：

```
<?php echo $this->Form->input('classroom_id', array('type' => 'select','empty' => '-- Select --','label' => false,'style'=>'width:254px;', 'options' => $classesfiltered,'validate'=>'required:true','div'=>'formfield')); ?> 
```

由于您没有在输入名称中包含模型名称（例如 Customer.classroom_id），因此假设您希望将其包含在当前模型中（假设您没有在表单元素中手动指定模型，课程）。

这是正确返回 5 个值。

但是，在您的控制器中，您假设您要获得的唯一数据是复选框而不是选择框。您正在遍历所有“客户”表单数据，而不仅仅是复选框。

我们有两种方法可以解决这个问题：

选项 #1：（推荐）修改表单输入，然后更新循环

```
<?php
echo $this->Form->input('Customer.classroom_id', array('type' => 'select','empty' => '-- Select --','label' => false,'style'=>'width:254px;', 'options' => $classesfiltered,'validate'=>'required:true','div'=>'formfield'));

foreach ($students as $student) {
    echo $this->Form->input('Customer.id.'.$student['Customer']['id'], array('type' => 'checkbox', 'id' => "admin_checkbox_".$student['Customer']['id'], 'label' => false));
}
?> 
```

注意：我将输入的第一个参数从 切换`'Customer.'.$student['Customer']['id'].'.id'`为`'Customer.id.'.$student['Customer']['id']` 这允许您访问数组中的 POST 数据。生成的表单输入将如下所示（`<student id>`您的实际学生 ID 在哪里）：

```
<div class="input checkbox">
    <input type="hidden" name="data[Customer][id][<student id>]" id="admin_checkbox_<student id>_" value="0">
    <input type="checkbox" name="data[Customer][id][<student id>]" id="admin_checkbox_<student id>" value="1">
</div> 
```

然后，您可以遍历控制器中单独的每个复选框，它应该类似于：

```
foreach ($this->data['Customer']['id'] as $id => $checked) {
    if ($checked) {
        Debugger::Dump($this->data['Customer'][$id]);
    }
} 
```

建议使用选项 #1，因为它可以确保您的数据被正确分离。然后，您可以只循环访问所需的数据，这样更快。

选项 #2：我不推荐的另一个选项是使用 isset() 循环遍历所有数据，但只对您想要的数据进行操作

```
foreach ($this->data['Customer'] as $key => $item) {
    if (isset($item['id']) && $item['id']) {
        Debugger::Dump($this->data['Customer'][$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:49:45.273

```
Instead of creating single single check boxes you should use proper format of cakephp. Please check below:

echo $this->Form->input('Model.field', array(
    'type' => 'select',
    'multiple' => 'checkbox',
    'options' => $students
    )
));

In above code $students is holding your check boxes values like [0]=male, [1]=female.

In your controller, you will one value same like you get value of textbox. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:16:44.020

如果您确定警告不重要，请使用`error_reporting(E_ERROR);`

# c# - Crystal 报告 2010 中的运行时错误

> ID：16161412
> 
> 赞同：0
> 
> 时间：2013-04-23T05:09:20.193
> 
> 标签：c#, visual-studio-2010, visual-studio, crystal-reports, crystal-reports-2010

当我尝试从我的开发机器在另一台计算机上运行使用 Crystal 报告 2010 的程序（VS2010、.net4.0 完整配置文件）时，我收到此错误：

混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载。

我尝试谷歌如何解决问题，但编辑 config.app 没有用。我的配置应用程序：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings />
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
    <supportedRuntime version="v2.0.50727"/> 
  </startup>
</configuration> 
```

我认为水晶报告在这里遇到了一些问题，当我第一次尝试在另一台机器上运行带有报告的应用程序时，它没有找到 crdb_adoplus.dll，因为它甚至不存在于它应该存在的位置。我必须创建一个新文件夹并将一些文件从 C:\Program Files\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86\dotnet' 复制到 ...dotnet1。我解决的错误是：

我收到此丢失文件错误：“无法加载文件或程序集文件：///C:\Program Files\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86\dotnet1\crdb_adoplus。 dll 或其依赖项之一。系统找不到指定的文件。

如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T07:24:22.060

我认为您应该在 IIs 中将 asp.net 的版本从第 4 版更改为第 2 版...试试看

# intuit-partner-platform - 按客户 ID PHP Devkit 过滤发票

> ID：16161413
> 
> 赞同：0
> 
> 时间：2013-04-23T05:09:29.260
> 
> 标签：intuit-partner-platform

我正在尝试过滤使用 QuickBook IPP 和 PHP devkit 收到的发票，但由于某种原因，quickbooks 不断发回一个空结果。我的代码如下：

```
$query = '<ContactIdSet><Id>340</Id></ContactIdSet>';
$invoices = $invoiceService->findAll($quickbooks->Context, $quickbooks->creds['qb_realm'], $query, 1, 999); 
```

使用此代码，我的请求（减去 Oauth 信息）是：

```
POST https://services.intuit.com/sb/invoice/v2/538361885 HTTP/1.1
Content-Type: text/xml
Authorization: OAuth realm="",  oauth_signature_method="HMAC-SHA1",  oauth_signature="",  oauth_nonce="GAmtH",  oauth_timestamp="1366692972", oauth_token="", oauth_consumer_key="",  oauth_version="1.0"
Content-Length: 298

<?xml version="1.0" encoding="UTF-8"?>
<InvoiceQuery xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.intuit.com/sb/cdm/v2">
    <StartPage>1</StartPage>
    <ChunkSize>999</ChunkSize>
        <ContactIdSet>
            <Id>340</Id>
        </ContactIdSet>
      </InvoiceQuery> 
```

但即使该客户 ID 下有发票，响应也没有发票：

```
HTTP/1.1 200 OK
Date: Tue, 23 Apr 2013 05:06:39 GMT
Server: Apache/2.2.22 (Unix)
ContextInitTime: 9
Response-Id: cb8b6eaa-f810-4fad-9f69-3485f400680d
IdRestateTime: 4
HeaderQueryTime: 4
Content-Encoding: gzip
HeaderDAOTime: 4
Response-App-Time: 62
Response-Routing-Time: 67
Content-Length: 133
Connection: close
Content-Type: text/xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><RestResponse xmlns="http://www.intuit.com/sb/cdm/v2"><Invoices/></RestResponse> 
```

关于为什么 quickbooks 不会返回与该客户关联的发票的任何想法？

这是当我使用 ->findAll() 时显示发票存在的 XML 响应

```
HTTP/1.1 200 OK
Date: Tue, 23 Apr 2013 17:44:02 GMT
Server: Apache/2.2.22 (Unix)
LineQueryTime: 35
ContextInitTime: 94
Response-Id: 9b3d4e46-a6b5-4f90-81f4-3c42b0462330
AssemblingTime: 0
HeaderQueryTime: 91
Content-Encoding: gzip
HeaderDAOTime: 91
LineDAOTime: 35
Response-App-Time: 271
Response-Routing-Time: 276
Content-Length: 930
Connection: close
Content-Type: text/xml

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><RestResponse xmlns="http://www.intuit.com/sb/cdm/v2"><Invoices><Invoice><Id idDomain="NG">681891</Id><SyncToken>3</SyncToken><MetaData><CreateTime>2013-04-18T03:13:26.796Z</CreateTime><LastUpdatedTime>2013-04-23T03:49:05.800Z</LastUpdatedTime></MetaData><ExternalKey idDomain="QB">1189</ExternalKey><Synchronized>true</Synchronized><Header><DocNumber>WEB000126</DocNumber><TxnDate>2013-02-28T00:00:00Z</TxnDate><Status>Paid</Status><CustomerId idDomain="QB">340</CustomerId><CustomerName>Test, Ray &amp; Teryl</CustomerName><RemitToId idDomain="QB">340</RemitToId><RemitToName>Test, Ray &amp; Teryl</RemitToName><ShipDate>2013-02-28T00:00:00Z</ShipDate><SubTotalAmt>375</SubTotalAmt><TaxRate>0</TaxRate><TaxAmt>0</TaxAmt><TotalAmt>375</TotalAmt><ToBePrinted>true</ToBePrinted><ToBeEmailed>false</ToBeEmailed><ARAccountId idDomain="QB">64</ARAccountId><ARAccountName>Accounts Receivable</ARAccountName><SalesTermId idDomain="QB">8</SalesTermId><SalesTermName>Due on 1st</SalesTermName><DueDate>2013-03-01T00:00:00Z</DueDate><BillAddr><Id idDomain="QB">00000000000001cg</Id><Line1>Ray &amp; Teryl Test</Line1><Line2>3290 Test Test</Line2><City>Stone Mountain</City><CountrySubDivisionCode>GA</CountrySubDivisionCode><PostalCode>30087</PostalCode><Default>true</Default><Tag>Billing</Tag></BillAddr><ShipAddr><Id idDomain="QB">00000000000003rW</Id><Default>false</Default><Tag>Shipping</Tag></ShipAddr><BillEmail>Test@Test.com</BillEmail><Balance>0</Balance></Header><Line><Id idDomain="QB">1191</Id><Desc>Conservatory Registration Fee</Desc><Amount>125</Amount><Taxable>false</Taxable><ItemId idDomain="QB">14</ItemId><ItemName>Artios Conservatory</ItemName><ItemType>Service</ItemType><UnitPrice>125</UnitPrice><Qty>1</Qty><SalesTaxCodeId idDomain="QB">2</SalesTaxCodeId><SalesTaxCodeName>Non</SalesTaxCodeName></Line><Line><Id idDomain="QB">1192</Id><Desc>Preparatory Registration Fee</Desc><Amount>125</Amount><Taxable>false</Taxable><ItemId idDomain="QB">142</ItemId><ItemName>Elem Prep Reg (5/1-8/31)</ItemName><ItemType>Service</ItemType><UnitPrice>125</UnitPrice><Qty>1</Qty><SalesTaxCodeId idDomain="QB">2</SalesTaxCodeId><SalesTaxCodeName>Non</SalesTaxCodeName></Line><Line><Id idDomain="QB">1193</Id><Desc>Preparatory Registration Fee</Desc><Amount>125</Amount><Taxable>false</Taxable><ItemId idDomain="QB">142</ItemId><ItemName>Elem Prep Reg (5/1-8/31)</ItemName><ItemType>Service</ItemType><UnitPrice>125</UnitPrice><Qty>1</Qty><SalesTaxCodeId idDomain="QB">2</SalesTaxCodeId><SalesTaxCodeName>Non</SalesTaxCodeName></Line><Line><Id idDomain="QB">1194</Id><Desc>PayPal Convenience Fee</Desc></Line></Invoice></Invoices></RestResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T11:53:49.453

要添加问题的答案，API 的 v2 中不支持该特定过滤器。您需要在您的应用程序中进行过滤

谢谢贾里德
_

# asp.net - 如何在 asp.net 中动态更改 url 的名称

> ID：16161417
> 
> 赞同：0
> 
> 时间：2013-04-23T05:09:53.053
> 
> 标签：asp.net

```
I am trying to create a blog which hardly has 3 pages
1)EnterPost.aspx(To Enter a Post)
2)Posts.aspx(To display all the posts datewise)
3)Comments.aspx(Which displays a full post including comments)

        Now when user clicks on a post title it will redirect him 
to comments.aspx where he can see full post and comment on it.

Example: Path is 
          1)http://localhost:3214\MyBlog\comments.aspx?postid=1
          2)http://localhost:3214\MyBlog\comments.aspx?postid=2 
```

我想要的是而不是 comments.aspx?postid=?.我想将 url 名称显示为帖子的标题。

例子：

1)\MyBlog\ {帖子标题}.aspx

```
 In Comments.aspx on Page_Load()

    int id=int.Parse(Request.QueryString["pid"].ToString());
    string str = "select * from posts where postid='" + id + "'";
    dv_post.DataSource = DbHelper.getdata(str);
    dv_post.DataBind(); 
```

在 Posts.aspx 中

```
protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        Literal l = (Literal)e.Item.FindControl("Literal1");
        if (l.Text.Length > 100)
        {
            l.Text = l.Text.Substring(0, 400) + "<a href=comments.aspx?pid="+ DataBinder.Eval(e.Item.DataItem ,"postid")+">Read More</a>";
        }
    } 
```

# c# - 自定义依赖属性没有获得绑定输入

> ID：16161418
> 
> 赞同：1
> 
> 时间：2013-04-23T05:09:59.803
> 
> 标签：c#, xaml, wpf-controls

我正在创建一个带有 DependencyProperty 的 UserControl，但 DependencyProperty 没有获得调用者传入的值。

我在自己的调查中发现了以下内容

*   如果我使用内置的用户控件，例如 TextBlock，一切正常。这将问题缩小到我的 UserControl 的实现（而不是调用 UserControl 的代码）

*   我注册的属性更改回调甚至没有被调用（嗯......至少断点没有被命中）

*   如果只在我使用绑定提供依赖属性时看到这个问题，那么**这不起作用**：

    ```
    <common:MyUserControl MyDP="{Binding MyValue}"/> 
    ```

    但是如果我摆脱绑定并对值进行硬编码，我就没有问题，所以**这是**可行的：

    ```
    <common:MyUserControl MyDP="hardCodedValue"/> 
    ```

**这是我的UserControl背后的代码：**

```
public partial class MyUserControl : UserControl
{
    public string MyDP
    {
        get { return (string)GetValue(MyDPProperty); }
        set { SetValue(MyDPProperty, value); }
    }

    public static readonly DependencyProperty MyDPProperty =
        DependencyProperty.Register(
            "MyDP", 
            typeof(string), 
            typeof(MyUserControl),
            new FrameworkPropertyMetadata(
                "this is the default value",
                new PropertyChangedCallback(MyUserControl.MyDPPropertyChanged)));

    public static void MyDPPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        ((MyUserControl)obj).MyDP = (string)e.NewValue;
    }

    public MyUserControl()
    {
        InitializeComponent();
        this.DataContext = this;
    }
} 
```

**这是xaml**

```
<Grid>
    <TextBlock Text="{Binding MyDP}"/>
</Grid> 
```

**由于我能够使用 TextBlock 等内置用户控件，因此我认为错误不在我的主机代码中，但在这里，只是为了让您有一个完整的画面：**

```
<StackPanel>
    <common:MyUserControl MyDP="{Binding MyValue}"/>
</StackPanel>

public class MainWindowViewModel
{
    public string MyValue { get { return "this is the real value."; } }
}

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = new MainWindowViewModel();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:21:03.780

UserControl 中的这一行是错误的：

```
this.DataContext = this; 
```

这使得 UserControl 成为自己的 DataContext，因此绑定正在 UserControl 上查找名为 MyValue 的属性，而该属性不存在。您希望 DataContext 成为您的视图模型。如果您没有明确设置它，它将从其容器（在本例中为 Window）继承 DataContext。

删除那条线，你会更接近。你也不需要那个回调；也删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:19:26.617

您可以像这样更新控件的视图代码：

```
 <Grid>
        <TextBlock x:Name="_textBlock"/>
    </Grid> 
```

并在 MyDPPropertyChanged 方法中设置 _textBlock 的文本属性：

```
public static void MyDPPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var control = ((MyUserControl)obj);
        control.MyDP = (string)e.NewValue;
        control._textBlock.Text = control.MyDP;
    } 
```

那会成功的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:22:14.803

请在控件和视图模型中实现 INotifyPropertyChanged 和 PropertyChangedEventHandler。其次使用 SetCurrentValue 方法设置控件类内部的值，而不是直接设置它

# sql-server - 存储过程中的外键约束 - SQL Server

> ID：16161425
> 
> 赞同：1
> 
> 时间：2013-04-23T05:10:42.113
> 
> 标签：sql-server, tsql

我有以下存储过程，我这里有两个表，电影和导演。当创建或添加新电影时，两者都需要更新。您如何处理存储过程中的 FK？在这种情况下，FK 是`director_id`。它是一个主键，`Director`但是一个 FK`Movie` 我需要像这样指定它两次吗？我收到冲突错误

```
CREATE PROCEDURE Book_Book_Creation
    @Book_id_arg DECIMAL(12),    
    @author_id_arg DECIMAL(12),    
    @type_id_arg DECIMAL(12),     
    @title_arg VARCHAR(64),      -
    @copyright_arg DECIMAL(4),   
    @dauthor_id_2_arg DECIMAL(12),    
    @author_fname_arg VARCHAR (64), 
    @author_lname_arg VARCHAR (64)  
AS
BEGIN 
    INSERT INTO Book(Book_id, author_id,genre_id, title, copyright)
    VALUES (@author_arg, @author_id_arg,  @type_id_arg, @title_arg, @copyright_arg);
    INSERT INTO Author(author_id, author_fname, author_lname)
    VALUES (@director_id_2_arg, @director_fname_arg, @director_lname_arg)
END;

EXECUTE Book_Book_Creation 32,32,1,'Tempting',2013,32,'Taylor','Mendez'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T05:20:51.083

基本上，您只需要这样做：

*   先插入`Director`表格
*   从该表中获取新插入的 ID（假设该`Director_Id`列是您的主键并且类型为`INT IDENTITY`）
*   `Movie`然后使用该新 ID插入表中

像这样的东西：

```
DECLARE @NewDirectorID INT

INSERT INTO Director (Director_id, Director_fname, director_lname)
VALUES (@director_id_2_arg, @director_fname_arg, @director_lname_arg)

SELECT @NewDirectorID = SCOPE_IDENTITY()

INSERT INTO Movie (Movie_id, director_id,genre_id, title, copyright)
VALUES (@movie_id_arg, @NewDirectorID,  @genre_id_arg, @title_arg, @copyright_arg); 
```

我不明白您为什么要将导演的 ID 作为参数传递 - 两次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:29:07.470

试试这个——

```
ALTER PROCEDURE dbo.Movie_Movie_Creation12

    @movie_id_arg DECIMAL(12),  
    @director_id_arg DECIMAL(12),
    @genre_id_arg DECIMAL(12), 
    @title_arg VARCHAR(64),
    @copyright_arg DECIMAL(4),  
    @director_fname_arg VARCHAR (64), 
    @director_lname_arg VARCHAR (64) 

AS BEGIN 

    INSERT INTO dbo.Director (Director_id, Director_fname, director_lname)
    SELECT @director_id_arg, @director_fname_arg, @director_lname_arg

    INSERT INTO dbo.Movie (Movie_id, director_id,genre_id, title, copyright)
    SELECT @movie_id_arg, @director_id_arg,  @genre_id_arg, @title_arg, @copyright_arg

END

EXECUTE dbo.Movie_Movie_Creation12  
            @movie_id_arg = 32 
        ,   @director_id_arg = 32
        ,   @genre_id_arg = 1
        ,   @title_arg = 'Argo'
        ,   @copyright_arg = 2012
        ,   @director_fname_arg = 'Ben'
        ,   @director_lname_arg = 'Affleck' 
```

# kendo-ui - Kendo UI Grid Batch Save-在服务器上发布后模型为空

> ID：16161426
> 
> 赞同：0
> 
> 时间：2013-04-23T05:10:42.130
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

我正在尝试在 Kendo 的网格上设置批量编辑，就像他们的演示站点上的示例一样 - [http:](http://demos.kendoui.com/web/grid/editing.html) //demos.kendoui.c​​om/web/grid/editing.html 。一切似乎都设置正确，并且将数据正确（看起来）从网格发布到服务器。当我在 firebug 中查看 post 数据时，一切都是正确的，但是在服务器上调试时，发回的模型都包含 null 或空字符串值。.Count 中正确显示了模型的数量，但它们是空的。这是我的代码和输出，抱歉我还不能发布图片，现场还没有足够的积分：

页面：

```
<%: Html.Kendo().Grid<Thread.Site.Models.ModelSummary>()
            .Name("Grid")
            .Columns(columns =>
            {
                columns.Bound(m => m.ModelID).Hidden();
                columns.Bound(m => m.ModelNumber).Width(100).ClientTemplate("#= (ModelNumber === 'null') ? ' ' : ModelNumber #");
                columns.Bound(m => m.ModelName);
                columns.Bound(m => m.Content).Width(160);
                columns.Bound(m => m.Bullet1);
                columns.Bound(m => m.Bullet2);
                columns.Bound(m => m.Bullet3);
                columns.Bound(m => m.Bullet4);
                columns.Bound(m => m.Bullet5);
                columns.Bound(m => m.Bullet6);
                columns.Bound(m => m.AlertCount).ClientTemplate("# if (AlertCount > 0) { # <span class='icons icons-alert viewCheck' title='#= AlertCount # Alert(s)'></span> #}#").Title("Attention");//"#= (AlertCount === 0) ? ' ' : AlertCount #").Title("Attention");//
            })
            .Pageable()
            .ToolBar(
                toolbar => {toolbar.Save();}
            )
            .Editable(edit => { edit.Mode(Kendo.Mvc.UI.GridEditMode.InCell); })
            .Navigatable(n => { n.Enabled(true);})
            .Sortable()
            .Scrollable(s=>s.Height(500)) 
            .Selectable(selectable => selectable.Mode(Kendo.Mvc.UI.GridSelectionMode.Single))
            .Filterable()
            .Events(events =>
            {
                events.DataBound("dataBound");
                events.Edit("edit");
                events.Change("change");
            })
            .DataSource(dataSource => dataSource
                .Ajax()
                .Batch(true)
                .ServerOperation(false)
                .PageSize(15)
                .Events(events => events.Error("error_handler"))
                .Model(model =>
                {
                    model.Id(j => j.ModelID);
                    model.Field(j => j.ModelID).Editable(false);
                    model.Field(j => j.ModelNumber).Editable(false);
                })
                .Read(read => read.Action("ModelList_Read", "Models", new { jobID = job.JobID }))
                .Update(update => update.Action("ModelList_SaveAll", "Models").Type(HttpVerbs.Post))
            )
        %> 
```

控制器：

```
[Authorize]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult ModelList_SaveAll([DataSourceRequest] DataSourceRequest request, [Bind(Prefix = "models")] IEnumerable<Thread.Site.Models.ModelSummary> modelSummary)
{
    if (modelSummary != null)
    {
        foreach (Thread.Site.Models.ModelSummary _modelSummary in modelSummary)
        {
            ModelRepository.SetModelCopies(CurrentUser.ProfileID, modelCopiesSend);
        }
    }
    return Json(new[] { modelSummary }.ToDataSourceResult(request, ModelState), JsonRequestBehavior.AllowGet);
} 
```

将数据发布到服务器：

```
models[0][ActiveFlag]   false
models[0][AlertCount]   0
models[0][Bullet1ID]    0
models[0][Bullet1]      test bullet 1
models[0][Bullet2ID]    0
models[0][Bullet2]      test bullet 2
models[0][Bullet3ID]    0
models[0][Bullet3]  
models[0][Bullet4ID]    0
models[0][Bullet4]  
models[0][Bullet5ID]    0
models[0][Bullet5]  
models[0][Bullet6ID]    0
models[0][Bullet6]  
models[0][CompanyID]    16
models[0][Complete]     false
models[0][ContentID]    0
models[0][Content]      test description here 
```

在服务器上调试模型（控制器中的_modelSummary），所有数据为空或null：

```
modelSummary.Count = 1

Bullet1 null    string
Bullet1ID   0   int
Bullet2 null    string
Bullet2ID   0   int
Bullet3 null    string
Bullet3ID   0   int
Bullet4 null    string
Bullet4ID   0   int
Bullet5 null    string
Bullet5ID   0   int
Bullet6 null    string
Bullet6ID   0   int
CompanyID   0   int 
```

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T22:32:46.107

我修改了您的数据源模型。您的主 ID 必须是 defaultvalue 。

```
.Model(model =>
                {
                    model.Id(j => j.ModelID);
                    model.Field(p => p.ModelID).DefaultValue(16000000);
                    model.Field(j => j.ModelID).Editable(false);
                    model.Field(j => j.ModelNumber).Editable(false);
                }) 
```

# php - 对具有相同键值的多维数组中的值求和

> ID：16161427
> 
> 赞同：1
> 
> 时间：2013-04-23T05:11:07.650
> 
> 标签：php, php-5.3

我有一个多维数组，我需要总结具有相同键的值。
print_r($输入)

```
Array
(
    [0] => Array
        (
            [id] => colors
            [power] => Array
                (
                    [green] => 12
                    [red] => 5
                    [orange] => 9
                    [black] => 6
                    [white] => 5
                    [blue] => 11
                )

        )

    [1] => Array
        (
            [id] => colors
            [power] => Array
                (
                    [green] => 20
                    [red] => 40
                    [orange] => 80
                    [black] => 60
                    [white] => 100
                    [blue] => 110
                )

        )
    [2] => Array
        (
            [id] => glossycolor
            [power] => Array
                (
                    [green] => 20
                    [red] => 40
                    [orange] => 80
                    [black] => 60
                    [white] => 100
                    [blue] => 110
                )

        )

) 
```

我需要结果像

```
Array
(
    [0] => Array
        (
            [id] => colors
            [power] => Array
                (
                    [green] => 32
                    [red] => 45
                    [orange] => 89
                    [black] => 66
                    [white] => 105
                    [blue] => 121
                )

        )

    [1] => Array
        (
            [id] => glossycolor
            [power] => Array
                (
                    [green] => 20
                    [red] => 40
                    [orange] => 80
                    [black] => 60
                    [white] => 100
                    [blue] => 110
                )

        )

) 
```

我尝试使用 array_shift 对值进行排序并对子数组值求和，但我失败了

```
$finalRate = array_shift($inputs);
                foreach ($inputs as $val) {
                    foreach ($val as $key => $val) {
                        $finalRate[$key] += $val;
                    }
                } 
```

但失败并返回空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:57:18.857

假设您的数组始终具有相同的结构，我会使用：

```
$outcome = array();
foreach ($colors as $array) {
    $id = $array['id'];

    if (array_key_exists($id, $outcome)) {
        foreach ($array['power'] as $color => $value) {
            $outcome[$id]['power'][$color] += $value;
        }
        continue;
    }
    $outcome[$array['id']] = $array;
}
array_values($outcome); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:57:01.040

```
$array1 = array_slice($input,0,1);  //slicing first value of $input i.e Array([0]=>array)
$array2 = array_slice($input,1,1);  //slicing second value of $input i.e Array([1]=>array)
$array = array_sum_values($array1,$array2); //summing values of two arrays
$input = array_splice($input,0,2,$array) //Removing [0] and [1] from $input and replacing with $array. 
```

请参阅 PHP 手册以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:33:34.530

这可能不是解决此问题的最有效方法..但它有效且易于实现：

```
$arr = array(
    0 => array(
        'id' => 'colors',
        'power' => array(
            'green' => 12,
            'red' => 5,
            'orange' => 9,
            'black' => 6,
            'white' => 5,
            'blue' => 11,
        ),
    ),
    1 => array(
        'id' => 'colors',
        'power' => array(
            'green' => 20,
            'red' => 40,
            'orange' => 80,
            'black' => 60,
            'white' => 100,
            'blue' => 110,
        ),
    ),
    2 => array(
        'id' => 'glossycolors',
        'power' => array(
            'green' => 20,
            'red' => 40,
            'orange' => 80,
            'black' => 60,
            'white' => 100,
            'blue' => 110,
        ),
    ),
);

foreach ( $arr as $k1 => $v1 ) {
    foreach ( $arr as $k2 => $v2 ) {
        if ( $k1 === $k2 ) continue;
        if ( ! isset( $arr[ $k1 ] ) || ! isset( $arr[ $k2 ] ) ) continue;
        if ( $v1['id'] === $v2['id'] ) {
            foreach ( $v2['power'] as $power_k => $power_v ) {
                $arr[$k1]['power'][$power_k] += $power_v;
            }
            unset( $arr[$k2] );
        }
    }
}

print_r( $arr ); 
```

这导致：

```
Array
(
    [0] => Array
        (
            [id] => colors
            [power] => Array
                (
                    [green] => 32
                    [red] => 45
                    [orange] => 89
                    [black] => 66
                    [white] => 105
                    [blue] => 121
                )

        )

    [2] => Array
        (
            [id] => glossycolors
            [power] => Array
                (
                    [green] => 20
                    [red] => 40
                    [orange] => 80
                    [black] => 60
                    [white] => 100
                    [blue] => 110
                )

        )

) 
```

所以基本上，它遍历同一个数组两次并对常见的“id”元素的值求和，然后从数组中删除第二个副本，只留下原始的和后面的总和。干杯

# floating-point - 将单精度浮点数转换为半精度 MIPS

> ID：16161431
> 
> 赞同：1
> 
> 时间：2013-04-23T05:11:30.233
> 
> 标签：floating-point, mips, precision

我有一个家庭作业如下：

“在 MIPS 汇编语言中实现半精度浮点加法。提示用户输入两个浮点（十进制）数并计算并显示总和。

在半精度格式中，16 位用于表示浮点数。指数字段为 5 位宽，而有效数字字段为 10 位。

您需要将单精度浮点数转换为半精度浮点数，然后执行计算。”

我将如何在 MIPS 中从单精度浮点转换为半精度浮点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:06:33.910

要将 IEEE-754 32 位二进制浮点对象转换为 16 位：

*   分隔符号、指数和有效数字字段。
*   如果数字是 NaN（指数全为 1 位且有效位字段非零），则返回 NaN。（使用相同的符号位，将指数字段设置为全1，将新有效位的高位设置为旧有效位的高位[通常用于指示信令/安静]，并保留所有其他位你喜欢旧的有效位，只要新的有效位不为零。）
*   如果指数字段不全为零，则将 2 ^(23)添加到有效数字字段。如果指数字段全为零，则将其加 1。（此步骤标准化次正规数。）
*   从指数中减去 127 可去除 32 位格式的偏差，加 15 可添加 16 位格式的偏差。
*   如果指数字段小于 -11，则返回零，符号与输入相同。
*   如果指数字段小于 1：将临时值设置为左移位数等于 1 减去指数字段的有效位。将有效位右移该位数加 13。如果临时值超过 2 ^(23)，则将有效位字段加一（向上舍入）。如果该加法未将有效数增加到 2 ^(10)，则将指数设置为零并返回由符号位、零指数和有效数组成的次正规数（或零）。如果有效数字确实增加到 2 ^(10)，则返回由符号位、1 的指数字段和零有效数字组成的数字。
*   如果有效数字的低 13 位超过 2 ^(12)或等于 2 ^(12)并且下一个高位是 1，则将 2 ^(13)添加到有效数字。将有效位右移 13 位。如果不小于 2 ^(11)，则将指数加 1 并将有效位右移一位。
*   如果指数字段大于 30，则返回无穷大，符号与输入相同。
*   否则，返回由符号位、指数和有效数的低十位组成的正常数。

以上是即兴写的；它需要检查。此外，它不包含信号异常的注意事项。

# jquery - jQuery在父元素悬停时触发子元素

> ID：16161435
> 
> 赞同：2
> 
> 时间：2013-04-23T05:11:49.390
> 
> 标签：jquery

我有一个包含嵌套 div 的列表，其中包含两个绝对堆叠在一起的图像。我已经建立了一个悬停效果，可以创建平滑的过渡效果。但是，该效果仅在鼠标悬停在图像上时触发，而在鼠标悬停在链接上方时不会触发。这是我的简短想法的代码：

```
<ul id="shortcuts" class="sitewidth">
    <li>
        <a href="#">
            <div class="shortcuticon box">
                <img src="images/icon-learn.png" alt="" class="a">
                <img src="images/icon-learn-hover.png" alt="" class="b">
            </div>
        </a>
    </li>
    <li>
        <a href="#">
            <div class="shortcuticon box">
                <img src="images/icon-learn.png" alt="" class="a">
                <img src="images/icon-learn-hover.png" alt="" class="b">
            </div>
        </a>
    </li>
    <li>
        <a href="#">
            <div class="shortcuticon box">
                <img src="images/icon-learn.png" alt="" class="a">
                <img src="images/icon-learn-hover.png" alt="" class="b">
            </div>
            <h2>Hello World!</h2>
        </a>
    </li>

    <script type='text/javascript'>
        $(document).ready(function(){
            $("img.a").hover(function() {
                $(this).stop().animate({"opacity": "0"}, "slow");
            }, function() {
                $(this).stop().animate({"opacity": "1"}, "slow");
            });
        });
    </script>
</ul> 
```

我确实意识到应该在`#shortcuts li a`而不是图像本身上完成 hove 功能。但是这段代码是有效的，它会让你大致了解我在寻找什么。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:16:57.010

试试这个：- 不知道你到底想怎么出现，但这是我的尝试。

**只有一张图片***

[http://jsfiddle.net/tQwDk/](http://jsfiddle.net/tQwDk/)

**两个图像**

[http://jsfiddle.net/GcJG5/](http://jsfiddle.net/GcJG5/)

```
 $("#shortcuts li").hover(

function () {
    $('img.a', this).stop().animate({
        "opacity": "0"
    }, "slow");
},

function () {
    $('img.a', this).stop().animate({
        "opacity": "1"
    }, "slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:28:40.180

我的第一个想法是在图像事件中添加一个悬停事件`Hello World` `h2`并调用：`trigger``hover`

```
$("#shortcuts li a h2").hover(function(){
  $(this).parent.find('img.a').trigger('hover');
}); 
```

不幸的是，不可能`trigger`像`hover`.

幸运的是，我相信以下内容将为您提供所需的结果。您可以在父链接上使用`mouseenter`和`mouseleave`，然后找到子图像并为其设置动画。

```
$(document).ready(function(){
    $("#shortcuts li a").mouseenter(
        function() {
            $(this).find('img.a').stop().animate({"opacity": "0"}, "slow");
     }).mouseleave(
        function() {
            $(this).find('img.a').stop().animate({"opacity": "1"}, "slow");
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:31:54.783

尝试

```
$(document).ready(function() {
    $("a").has('img.a').hover(function() {
            $('img.a', this).stop().animate({
                        "opacity" : "0"
                    }, "slow");
        }, function() {
            $('img.a', this).stop().animate({
                        "opacity" : "1"
                    }, "slow");
        });
}); 
```

# combinations - 列出“从 1-100 中选择 10 个不同的数字”的所有组合

> ID：16161437
> 
> 赞同：1
> 
> 时间：2013-04-23T05:11:57.360
> 
> 标签：combinations

已知存在**从 1 到 100 选择 10 个不同数字**的 C(100,10) 种可能性。只要10个数字不同。

如何通过编程列出所有组合？
我不想写10个循环，首选python或c

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:19:35.187

使用 python 和[itertools.combinations](http://docs.python.org/2/library/itertools.html#itertools.combinations)。

**警告**- 打印需要很长时间

```
for i in itertools.combinations(xrange(1,101),10):
    print i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:48:02.980

我的朋友[刘玉杰](http://liuyujie.com)提出了这个想法。使用纯迭代。

```
# select n diff numbers from min - max
def traceArr(arr, min, max, n):
    if n > 0:
        for i in range(min, max-n+2):
            arr1 = arr[:]
            arr1.append(i)
            traceArr(arr1, i+1, max, n-1)
    elif n == 0:
        print arr    

# Demo, select 5 diff numbers from 1-10
traceArr([], 1, 10, 5); 
```

# c - 在 X11 中单击时光标的 XY 坐标

> ID：16161440
> 
> 赞同：0
> 
> 时间：2013-04-23T05:12:02.210
> 
> 标签：c, cursor, position, mouseevent, x11

我浏览了一些文档，但找不到关于如何在单击窗口中获取光标位置（以左上角 0,0 的像素为单位）的很好描述。

任何帮助表示赞赏：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:05:33.087

这是一个报告鼠标点击位置的最小程序。它只是拾取 Button Press 事件，其中包含窗口中鼠标指针的 x,y（左上角为 0,0）位置。

```
#include <stdio.h>
#include <X11/Xlib.h>

int main(int argc, char**argv)
{
    Display *display = XOpenDisplay(NULL);

    Window window = XCreateSimpleWindow(
        display, RootWindow(display,0), 0, 0,
        600, 600, 1, BlackPixel(display, 0),
        WhitePixel(display, 0));

    XMapWindow(display, window);

    XSelectInput(display, window, ButtonPressMask);

    XEvent event;
    while (1)
    {
        XNextEvent(display, &event);
        switch  (event.type) {
        case ButtonPress:
            printf("Clicked at %d,%d\n", event.xbutton.x, event.xbutton.y);
            break;
        }
    }

    return 0;
} 
```

# css - 添加css更改后丢失的位置（jQuery）

> ID：16161443
> 
> 赞同：1
> 
> 时间：2013-04-23T05:12:09.733
> 
> 标签：css, hover, positioning

编辑：我已经得到了一个叉子，可以使用两个代码括号将 CSS 正确分配给 DOM，但是它不再居中在父 div 内。有任何想法吗？

查询：

```
$("#container").hover(function () {
$("#innerFocusPrompt").position({
    my: "center center",
    at: "center center",
    of: "#container"
});
$("#innerFocusPrompt").css({
    "display": "inherit"
}).fadeIn(100);
}); 
```

CSS：

```
#container {
background-color: black;
color: #121212;
height:400px;
width:400px;
margin: 0 auto;
margin-top: 50px;
}
#innerFocusPrompt {
display: none;
background-color: red;
color: black;
height:100px;
width:100px;
} 
```

[http://jsfiddle.net/WASasquatch/7C2dc/1/](http://jsfiddle.net/WASasquatch/7C2dc/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:16:50.687

您正在协助`css`处理`jQuery.position()`程序。

您可以将其分配给 DOM，例如

```
$("#innerFocusPrompt").css({
    "display": "box"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:21:53.690

你的语法不正确。您正在尝试将 .css 分配给元素的 position() 。

**将您的代码更改为**：

```
$("#container").hover(function () {
   $("#innerFocusPrompt").position({
      my: "center center",
      at: "center center",
      of: "#container"
   });
   $("#innerFocusPrompt").css({
      "display": "box"
   });
}); 
```

# javascript - 有人可以向我解释一下这个递归函数是如何工作的吗？

> ID：16161444
> 
> 赞同：4
> 
> 时间：2013-04-23T05:12:16.673
> 
> 标签：javascript, recursion

取自此[链接](http://davidchambersdesign.com/self-caching-functions-in-javascript-and-python/)，我在尝试解决此问题时遇到了该链接。

这是功能（稍作修改以尝试帮助自己理解）：

```
(function(){

    fibonacci = (function () {

        var cache = {};
        return function (n) {
            var cached = cache[n];
            if (cached) {
                console.log('already in the ', cache);
                return cached;
            }
            if (n <= 1) {
                console.log('no 0s or 1s, ', n);
                return n;
            }
            console.log('a brand new ', n, 'consider yourself cached');
            cache[n] = fibonacci(n - 2) + fibonacci(n - 1);
            console.log('current cache: ', cache);
            return cache[n];
        };
    }());

    fibonacci(20);

})(); 
```

我对其进行了一些修改以尝试帮助自己理解，但我迷路了，因为输出趋于 0，然后它从 0 增加。我会认为在这个声明中：

```
cache[n] = fibonacci(n - 2) + fibonacci(n - 1); 
```

`fibonacci(n - 2)`将被评估，然后`fibonacci(n - 1)`在此之后。
但即使是这样，我也不明白 JavaScript 如何将这两个函数加在一起。

任何人都可以帮助我理解它是如何工作的，或者至少，你可以帮助我以一种更容易理解的方式重组它吗？

这是输出：

```
a brand new  20 consider yourself cached 
a brand new  18 consider yourself cached 
a brand new  16 consider yourself cached 
a brand new  14 consider yourself cached 
a brand new  12 consider yourself cached 
a brand new  10 consider yourself cached 
a brand new  8 consider yourself cached 
a brand new  6 consider yourself cached 
a brand new  4 consider yourself cached 
a brand new  2 consider yourself cached 
no 0s or 1s,  0 
no 0s or 1s,  1 
current cache:  Object {2: 1} 
a brand new  3 consider yourself cached 
no 0s or 1s,  1 
already in the  Object {2: 1} 
current cache:  Object {2: 1, 3: 2} 
current cache:  Object {2: 1, 3: 2, 4: 3} 
a brand new  5 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3} 
already in the  Object {2: 1, 3: 2, 4: 3} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8} 
a brand new  7 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21} 
a brand new  9 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55} 
a brand new  11 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144} 
a brand new  13 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377} 
a brand new  15 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987} 
a brand new  17 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597, 18: 2584} 
a brand new  19 consider yourself cached 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597, 18: 2584} 
already in the  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597, 18: 2584} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597, 18: 2584, 19: 4181} 
current cache:  Object {2: 1, 3: 2, 4: 3, 5: 5, 6: 8, 7: 13, 8: 21, 9: 34, 10: 55, 11: 89, 12: 144, 13: 233, 14: 377, 15: 610, 16: 987, 17: 1597, 18: 2584, 19: 4181, 20: 6765} 
```

谢谢，我知道递归可能是一个很大的菜鸟问题，我已经使用过几次了，但是了解它的工作原理让我头晕目眩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:16:23.783

“我不明白 JavaScript 是如何将这两个函数加在一起的。”

JS 不添加函数，它添加从这些函数调用返回的值。假设计算了 f(n-2)，当调用 f(n-1) 时，它将通过以下方式计算：

```
f(n-1) = f(n-2) + f(n-3) 
```

现在，由于我们在等式右侧计算了两个值，因此这两个值都将从缓存中获取。

让我们用一个例子来演示一下，假设我们要计算 f(5)：

```
f(5) = f(4) + f(3) 
```

使用 f(3) 进行递归调用：

```
f(3) = f(2) + f(1) 
```

递归调用：

```
f(1) = 1 and f(2) = cached(f(1)) + f(0) = 1 + 0 = 1 
```

现在我们回到 calc f(3) 并且我们同时缓存了 f(2) 和 f(1) 的值，因此：

```
f(3) = 1 + 1 = 2 
```

回到计算 f(4)

```
f(4) = f(3) + f(2) = 2 + 1 = 3 
```

再次结束：

```
f(5) = f(4) + f(3) = 3 + 2 = 5 
```

密切注意这样一个事实，一旦你到达递归的最深点（f（1）），将使用一路备份的缓存并且不会计算任何值，这使得这个实现非常高效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:05:42.023

如果简化代码并从较小的数字（例如 4）开始，您可能会发现更容易。以下功能与您最初发布的功能相同：

```
var cache = {};

function fibonacci(n) {   // assume n = 4
   var cached = cache[n]; 
```

第一次通过时，cache[4] 将是未定义的，因此以下测试评估为 false：

```
 if (cached) {
        console.log('already in the ', cache);
        return cached;
    } 
```

由于 n = 4，以下也是错误的：

```
 if (n <= 1) {
        console.log('no 0s or 1s, ', n);
        return n;
    } 
```

然后执行以下行：

```
 console.log('a brand new ', n, 'consider yourself cached');  // 4
    cache[n] = fibonacci(n - 2) + fibonacci(n - 1); 
```

这是：

```
 cache[4] = fibonacci(2) + fibonacci(3); 
```

在上面的行中，首先评估左侧，开始创建 '4' 属性`cache`。它实际上还没有创建，因为语句还没有完成，所以你*几乎*有：

```
cache = {4:undefined}; 
```

然后评估右侧以查看将分配的内容。由于存在`+`运算符，因此必须评估两个表达式以查看它是被视为加法还是连接。

接下来`fibonacci(2)`是求值（无论`+`是加法还是串联，求值从左到右进行），所以重复上述过程，创建：

```
 cache[2] = fibonacci(0) + fibonacci(1); 
```

你*几乎*有：

```
cache = {4:undefined, 2:undefined}; 
```

注意到这些属性实际上还没有创建。

现在`fibonacci(0)`进行评估。这次它到达第二个`if`并返回 0，所以没有`cache['0']`创建，现在你有：

```
cache[2] = 0 + fibonacci(1); 
```

同样，在评估`fibonacci(1)`第二`if`条语句时执行并返回`1`，因此您有一个要分配的值，因此创建了一个属性并分配了值：

```
 cache[2] = 0 + 1; // cache = {2:1, 4:undefined}; 
```

现在进入下一行：

```
 console.log('current cache: ', cache);
    return cache[n]; // returns 1;
} 
```

所以现在之前的调用继续：

```
 cache[4] = 1 + fibonacci(3); 
```

它再次到达：

```
 cache[3] = fibonacci(1) + fibonacci(2); 
```

第一个表达式`1`从第一个返回，`if`所以你有：

```
 cache[3] = 1 + fibonacci(2); 
```

第二个表达式到达第一个 if，其中 cache[2] 存在，所以它返回 1（即 cache[2] 的值），你有：

```
 cache[3] = 1 + 1; // cache = {3:1, 3:2, 4:undefined}; 
```

然后返回 cache[3] （即 2），这样你就回到了：

```
 cache[4] = 1 + 2; 
```

现在有 cache = {2:1, 3:2, 3:3}

您可以将上述内容编写为顺序操作（所有递归函数都可以编写为顺序操作），这在速度很重要的情况下很常见，因为顺序操作总是更快。在这种情况下，顺序函数非常简单：

```
function fibonacci2(n) {
  var fibs = {0:0, 1:1};
  var i = 1;
  while (i < n) {
    fibs[++i] = fibs[i-1] + fibs[i-2];
  }
  return fibs;
}

console.log(fibonacci2(4)); 
```

# assembly - 如何在汇编中反转数组的顺序？

> ID：16161445
> 
> 赞同：0
> 
> 时间：2013-04-23T05:12:20.640
> 
> 标签：assembly, x86, intel

现在我的代码给了我 1846 倒退。我不知道如何反转数组以打印出 1846 而不是 6481。我想我需要一个循环来反转它，但我不知道如何去实现它。任何帮助，将不胜感激。谢谢你。

```
.data 

enter_message:
    .ascii "Enter a binary value:\n"

enter_message_length:
    .int 22

name:
    .space 50
buffersize:
    .int 0

someLength:
    .int 50
array:
    .space 50

.text
.global _start

_start:

mov  $1846, %eax

mov $10, %ebx
    mov $0, %edi 
While_Loop:
    cmp $0, %eax                        
    je Convert_to_ASCII                 

    mov $0, %edx                        
    div %ebx                            

    add $48, %edx               
    movb %dl, buffersize(%edi)      
    add $1, %edi
    jmp While_Loop      

Convert_to_ASCII: 
    mov $4, %eax
    mov $1, %ebx
    mov $buffersize, %ecx
    mov %edi, %edx
    int $0x80

mov $1, %eax
int $0x80 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:54:44.487

至少有两个实用/简单的选择

1）从专用于目标字符串的内存区域的末尾开始并递减一个指针（确保字符串以 ascii 零结尾）。

```
 mov ah,[bx];
  dec bx 
```

2）使用堆栈——你需要将操作分成两个循环，每个循环N次

*   第一个循环：推N次
*   下一个循环：弹出 N 次并写入 *bx++

2.1）写入临时字符串（与堆栈相同的机制，但使用更少的空间和更复杂的指令）。

2.5) 使用递归

3) 由于这个问题基本上是关于十进制到 ascii 的转换，因此请使用从最大数开始工作的算法（这通常通过试减法来实现：）

```
int biggest = 10000;
while (biggest) {
  digit='0';
  while (number >= biggest) { number -=biggest; digit++; }
  output(digit);   // tune this to skip leading zeros
  biggest/=10;  // or read next from a table
} 
```

# google-bigquery - 在 Bigquery 中查找一个字符串在另一个字符串中的位置

> ID：16161447
> 
> 赞同：4
> 
> 时间：2013-04-23T05:12:31.437
> 
> 标签：google-bigquery

我在 BigQuery 查询参考中找不到一个函数，该函数在第二个字符串中查找一个字符串并返回该位置的索引。类似于其他 SQL 方言中的 instr() 。是否有任何替代品或任何技术来实现这一目标？

例如：在“abcdef”中查看“de”将返回 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:45:06.170

一种方法是使用正则表达式提取（[请参阅此处](https://developers.google.com/bigquery/docs/query-reference#regularexpressionfunctions)的参考资料）：

```
SELECT
  title, LENGTH(REGEXP_EXTRACT(title, r'^(.*)def.*')) + 1 AS location_of_fragment
FROM
  [publicdata:samples.wikipedia]
WHERE
  REGEXP_MATCH(title, r'^(.*)def.*')
LIMIT 10; 
```

回报：

```
Row title   location_of_fragment     
1   Austrian air defense    14   
2   Talk:Interface defeat   16   
3   High-definition television  6    
4   Talk:IAU definition of planet   10   
5   Wikipedia:Articles for deletion/Culture defines politics    41   
6   Wikipedia:WikiProject Spam/LinkReports/defenders.org    40   
7   Adenine phosphoribosyltransferase deficiency    35   
8   Stay-at-home defenceman 14   
9   Manganese deficiency (plant)    11   
10  High-definition television  6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-14T03:06:59.567

旧答案现已弃用，@carlos 答案有效：

```
STRPOS(string, substring) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-10T17:39:47.477

旧版 SQL INSTR(str1,str2) 函数“返回字符串第一次出现的从 1 开始的索引。” 所以这应该对你有用。

[https://cloud.google.com/bigquery/docs/reference/legacy-sql](https://cloud.google.com/bigquery/docs/reference/legacy-sql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T16:34:18.533

我迟到了，但 BigQuery API 发生了变化，现在正则表达式语法如下：

```
SELECT mydomains FROM `myproject.mydataset.mytable`
       where regexp_contains(mydomains, r'^(.*)example.*'); 
```

要回答这个问题，*例如：在 "abcdef" 中查看 "de" 将返回 4.*，它看起来像：

```
SELECT de FROM `myproject.mydataset.mytable`
       where regexp_contains(de, r'^(.*)abcdef.*'); 
```

根据参考链接，REGEXP_MATCH 现在是*旧版 SQL 函数和运算符的一部分。*

希望它可以帮助一个！:)

# android - 如何制作带圆角的布局..？

> ID：16161448
> 
> 赞同：602
> 
> 时间：2013-04-23T05:12:55.120
> 
> 标签：android, xml, image, layout, android-shapedrawable

如何制作带有圆角的布局？我想将圆角应用到我的`LinearLayout`.

* * *

## 回答 #1

> 赞同：1210
> 
> 时间：2013-04-23T05:17:03.673

1：在drawables中定义**layout_bg.xml ：**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF"/>
    <stroke android:width="3dp" android:color="#B1BCBE" />
    <corners android:radius="10dp"/>
    <padding android:left="0dp" android:top="0dp" android:right="0dp" android:bottom="0dp" />
</shape> 
```

2：`layout_bg.xml`作为背景添加到您的布局

```
android:background="@drawable/layout_bg" 
```

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2015-06-07T10:00:14.520

**对于 API 21+，使用剪辑视图**

`View`API 21中的类中添加了圆形轮廓剪裁。有关更多信息，请参阅此[培训文档](https://developer.android.com/training/material/shadows-clipping.html#Clip)或此[参考](http://developer.android.com/reference/android/view/View.html#setClipToOutline(boolean))。

这种内置功能使圆角非常容易实现。它适用于任何视图或布局，并支持正确的剪辑。

**这是做什么：**

*   创建一个圆形可绘制对象并将其设置为视图的背景： `android:background="@drawable/round_outline"`
*   剪辑到代码中的轮廓：`setClipToOutline(true)`

文档曾经说您可以设置`android:clipToOutline="true"`XML，但[这个错误](https://code.google.com/p/android/issues/detail?id=164125)现在终于解决了，文档现在正确地指出您只能在代码中执行此操作。

**它看起来像什么：**

![带有和不带有 clipToOutline 的示例](https://i.stack.imgur.com/6NlvO.png)

**关于 ImageViews 的特别说明**

`setClipToOutline()`仅当视图的背景设置为可绘制形状时才有效。如果存在此背景形状，View 会将背景的轮廓视为边界，以进行剪切和阴影处理。

这意味着，如果您想用 圆角 ImageView 上的角`setClipToOutline()`，则您的图像必须来自`android:src`而不是`android:background`（因为背景用于圆角形状）。如果您必须使用背景来设置图像而不是 src，则可以使用此嵌套视图解决方法：

*   创建一个外部布局，其背景设置为您的可绘制形状
*   将该布局包裹在您的 ImageView 周围（没有填充）
*   ImageView（包括布局中的任何其他内容）现在将被裁剪为外部布局的圆形。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2013-04-23T05:17:26.130

这是一个 XML 文件的副本，用于创建具有白色背景、黑色边框和圆角的可绘制对象：

```
 <?xml version="1.0" encoding="UTF-8"?> 
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
        <solid android:color="#ffffffff"/>    

        <stroke android:width="3dp"
                android:color="#ff000000"
                />

        <padding android:left="1dp"
                 android:top="1dp"
                 android:right="1dp"
                 android:bottom="1dp"
                 /> 

        <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
    </shape> 
```

save it as a xml file in the drawable directory, Use it like you would use any drawable background(icon or resource file) using its resource name (R.drawable.your_xml_name)

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2015-07-29T01:11:32.603

在 android v7 支持库中使用 CardView。虽然它有点重，但它解决了所有问题，而且很容易。不像 set drawable background 方法，它可以成功地裁剪子视图。

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card_view="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    card_view:cardBackgroundColor="@android:color/transparent"
    card_view:cardCornerRadius="5dp"
    card_view:cardElevation="0dp"
    card_view:contentPadding="0dp">
    <YOUR_LINEARLAYOUT_HERE>
</android.support.v7.widget.CardView> 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2013-04-23T05:30:56.787

我已经这样做了：

检查截图：

[![相对布局背景](https://i.stack.imgur.com/DxWqN.png)](https://i.stack.imgur.com/DxWqN.png)

在可**绘制**文件夹中创建名为的**可绘制**文件：`custom_rectangle.xml`

 **```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="@android:color/white" />

    <corners android:radius="10dip" />

    <stroke
        android:width="1dp"
        android:color="@android:color/white" />

</shape> 
```

现在在**View上应用****Rectangle 背景**：

 **```
mView.setBackground(R.drawlable.custom_rectangle); 
```

**完毕**

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2014-05-14T09:19:48.160

我认为更好的方法是合并两件事：

1.  制作布局的位图，如下[**所示**](http://nadavfima.com/android-snippet-inflate-a-layout-draw-to-a-bitmap/)。

2.  [**从位图制作一个圆形可绘制对象，如此处**](http://rahulswackyworld.blogspot.co.il/2013/04/android-drawables-with-rounded_7.html)所示[](http://rahulswackyworld.blogspot.co.il/2013/04/android-drawables-with-rounded_7.html)

***   在 imageView 上设置可绘制对象。** 

 **这将处理其他解决方案未能解决的情况，例如具有角落的内容。

我认为它对 GPU 也更友好一些，因为它显示的是单层而不是 2 。

唯一更好的方法是制作一个完全自定义的视图，但这需要很多代码并且可能需要很多时间。我认为我在这里提出的建议是两全其美的。

这是如何完成的一个片段：

**RoundedCornersDrawable.java**

```
/**
 * shows a bitmap as if it had rounded corners. based on :
 * http://rahulswackyworld.blogspot.co.il/2013/04/android-drawables-with-rounded_7.html
 * easy alternative from support library: RoundedBitmapDrawableFactory.create( ...) ; 
 */
public class RoundedCornersDrawable extends BitmapDrawable {

    private final BitmapShader bitmapShader;
    private final Paint p;
    private final RectF rect;
    private final float borderRadius;

    public RoundedCornersDrawable(final Resources resources, final Bitmap bitmap, final float borderRadius) {
        super(resources, bitmap);
        bitmapShader = new BitmapShader(getBitmap(), Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
        final Bitmap b = getBitmap();
        p = getPaint();
        p.setAntiAlias(true);
        p.setShader(bitmapShader);
        final int w = b.getWidth(), h = b.getHeight();
        rect = new RectF(0, 0, w, h);
        this.borderRadius = borderRadius < 0 ? 0.15f * Math.min(w, h) : borderRadius;
    }

    @Override
    public void draw(final Canvas canvas) {
        canvas.drawRoundRect(rect, borderRadius, borderRadius, p);
    }
} 
```

**自定义视图.java**

```
public class CustomView extends ImageView {
    private View mMainContainer;
    private boolean mIsDirty=false;

    // TODO for each change of views/content, set mIsDirty to true and call invalidate

    @Override
    protected void onDraw(final Canvas canvas) {
        if (mIsDirty) {
            mIsDirty = false;
            drawContent();
            return;
        }
        super.onDraw(canvas);
    }

    /**
     * draws the view's content to a bitmap. code based on :
     * http://nadavfima.com/android-snippet-inflate-a-layout-draw-to-a-bitmap/
     */
    public static Bitmap drawToBitmap(final View viewToDrawFrom, final int width, final int height) {
        // Create a new bitmap and a new canvas using that bitmap
        final Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        final Canvas canvas = new Canvas(bmp);
        viewToDrawFrom.setDrawingCacheEnabled(true);
        // Supply measurements
        viewToDrawFrom.measure(MeasureSpec.makeMeasureSpec(canvas.getWidth(), MeasureSpec.EXACTLY),
                MeasureSpec.makeMeasureSpec(canvas.getHeight(), MeasureSpec.EXACTLY));
        // Apply the measures so the layout would resize before drawing.
        viewToDrawFrom.layout(0, 0, viewToDrawFrom.getMeasuredWidth(), viewToDrawFrom.getMeasuredHeight());
        // and now the bmp object will actually contain the requested layout
        canvas.drawBitmap(viewToDrawFrom.getDrawingCache(), 0, 0, new Paint());
        return bmp;
    }

    private void drawContent() {
        if (getMeasuredWidth() <= 0 || getMeasuredHeight() <= 0)
            return;
        final Bitmap bitmap = drawToBitmap(mMainContainer, getMeasuredWidth(), getMeasuredHeight());
        final RoundedCornersDrawable drawable = new RoundedCornersDrawable(getResources(), bitmap, 15);
        setImageDrawable(drawable);
    }

} 
```

* * *

编辑：找到了一个不错的替代方案，基于[**"RoundKornersLayouts" 库**](https://github.com/JcMinarro/RoundKornerLayouts)。有一个类将用于您希望扩展的所有布局类，并进行四舍五入：

```
//based on https://github.com/JcMinarro/RoundKornerLayouts
class CanvasRounder(cornerRadius: Float, cornerStrokeColor: Int = 0, cornerStrokeWidth: Float = 0F) {
    private val path = android.graphics.Path()
    private lateinit var rectF: RectF
    private var strokePaint: Paint?
    var cornerRadius: Float = cornerRadius
        set(value) {
            field = value
            resetPath()
        }

    init {
        if (cornerStrokeWidth <= 0)
            strokePaint = null
        else {
            strokePaint = Paint()
            strokePaint!!.style = Paint.Style.STROKE
            strokePaint!!.isAntiAlias = true
            strokePaint!!.color = cornerStrokeColor
            strokePaint!!.strokeWidth = cornerStrokeWidth
        }
    }

    fun round(canvas: Canvas, drawFunction: (Canvas) -> Unit) {
        val save = canvas.save()
        canvas.clipPath(path)
        drawFunction(canvas)
        if (strokePaint != null)
            canvas.drawRoundRect(rectF, cornerRadius, cornerRadius, strokePaint)
        canvas.restoreToCount(save)
    }

    fun updateSize(currentWidth: Int, currentHeight: Int) {
        rectF = android.graphics.RectF(0f, 0f, currentWidth.toFloat(), currentHeight.toFloat())
        resetPath()
    }

    private fun resetPath() {
        path.reset()
        path.addRoundRect(rectF, cornerRadius, cornerRadius, Path.Direction.CW)
        path.close()
    }

} 
```

然后，在您自定义的每个布局类中，添加与此类似的代码：

```
class RoundedConstraintLayout : ConstraintLayout {
    private lateinit var canvasRounder: CanvasRounder

    constructor(context: Context) : super(context) {
        init(context, null, 0)
    }

    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {
        init(context, attrs, 0)
    }

    constructor(context: Context, attrs: AttributeSet, defStyle: Int) : super(context, attrs, defStyle) {
        init(context, attrs, defStyle)
    }

    private fun init(context: Context, attrs: AttributeSet?, defStyle: Int) {
        val array = context.obtainStyledAttributes(attrs, R.styleable.RoundedCornersView, 0, 0)
        val cornerRadius = array.getDimension(R.styleable.RoundedCornersView_corner_radius, 0f)
        val cornerStrokeColor = array.getColor(R.styleable.RoundedCornersView_corner_stroke_color, 0)
        val cornerStrokeWidth = array.getDimension(R.styleable.RoundedCornersView_corner_stroke_width, 0f)
        array.recycle()
        canvasRounder = CanvasRounder(cornerRadius,cornerStrokeColor,cornerStrokeWidth)
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR2) {
            setLayerType(FrameLayout.LAYER_TYPE_SOFTWARE, null)
        }
    }

    override fun onSizeChanged(currentWidth: Int, currentHeight: Int, oldWidth: Int, oldheight: Int) {
        super.onSizeChanged(currentWidth, currentHeight, oldWidth, oldheight)
        canvasRounder.updateSize(currentWidth, currentHeight)
    }

    override fun draw(canvas: Canvas) = canvasRounder.round(canvas) { super.draw(canvas) }

    override fun dispatchDraw(canvas: Canvas) = canvasRounder.round(canvas) { super.dispatchDraw(canvas) }

} 
```

如果您希望支持属性，请按照库中的说明使用：

```
<resources>
  <declare-styleable name="RoundedCornersView">
      <attr name="corner_radius" format="dimension"/>
      <attr name="corner_stroke_width" format="dimension"/>
      <attr name="corner_stroke_color" format="color"/>
  </declare-styleable>
</resources> 
```

* * *

另一种选择，对于大多数用途来说可能更容易：使用 MaterialCardView 。它允许自定义圆角、笔触颜色和宽度以及高度。

例子：

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent" android:clipChildren="false" android:clipToPadding="false"
    tools:context=".MainActivity">

    <com.google.android.material.card.MaterialCardView
        android:layout_width="100dp" android:layout_height="100dp" android:layout_gravity="center"
        app:cardCornerRadius="8dp" app:cardElevation="8dp" app:strokeColor="#f00" app:strokeWidth="2dp">

        <ImageView
            android:layout_width="match_parent" android:layout_height="match_parent" android:background="#0f0"/>

    </com.google.android.material.card.MaterialCardView>

</FrameLayout> 
```

结果：

[![在此处输入图像描述](https://i.stack.imgur.com/UXPtb.png)](https://i.stack.imgur.com/UXPtb.png)

请注意，如果您使用它，笔画的边缘会出现轻微的伪影问题（在那里会留下一些内容像素）。如果你放大你可以注意到它。我已经报告了这个问题[**here**](https://issuetracker.google.com/issues/112064791)。

编辑：似乎是固定的，但不是在 IDE 上。[**在这里**](https://issuetracker.google.com/issues/139935302)报道。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-12-12T19:51:09.030

如果你想让你的布局变得圆润，最好使用 CardView，它提供了许多使设计美观的功能。

```
<android.support.v7.widget.CardView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    card_view:cardCornerRadius="5dp">
      <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight=".3"
                android:text="@string/quote_code"
                android:textColor="@color/white"
                android:textSize="@dimen/text_head_size" />
      </LinearLayout>
</android.support.v7.widget.CardView> 
```

使用此 card_view:cardCornerRadius="5dp"，您可以更改半径。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2014-09-17T12:19:13.113

尝试这个...

**1.创建可绘制的xml** （ custom_layout.xml ）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<solid android:color="#FFFFFF" />

<stroke
    android:width="2dp"
    android:color="#FF785C" />

<corners android:radius="10dp" />

</shape> 
```

2.添加您的视图背景

```
android:background="@drawable/custom_layout" 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-12-23T11:43:31.703

使用材料组件库，您可以使用[**`MaterialShapeDrawable`**](https://developer.android.com/reference/com/google/android/material/shape/MaterialShapeDrawable)来[绘制自定义形状](https://github.com/material-components)。

只需将 LinearLayout 放入您的 xml 布局中：

```
<LinearLayout
    android:id="@+id/linear_rounded"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ..>

    <!-- content ..... -->

</LinearLayout> 
```

然后在您的代码中，您可以应用`ShapeAppearanceModel`. 就像是：

```
float radius = getResources().getDimension(R.dimen.default_corner_radius);

LinearLayout linearLayout= findViewById(R.id.linear_rounded);
ShapeAppearanceModel shapeAppearanceModel = new ShapeAppearanceModel()
    .toBuilder()
    .setAllCorners(CornerFamily.ROUNDED,radius)
    .build();

MaterialShapeDrawable shapeDrawable = new MaterialShapeDrawable(shapeAppearanceModel);
//Fill the LinearLayout with your color
shapeDrawable.setFillColor(ContextCompat.getColorStateList(this,R.color.secondaryLightColor));

ViewCompat.setBackground(linearLayout,shapeDrawable); 
```

[![在此处输入图像描述](https://i.stack.imgur.com/t5A7T.png)](https://i.stack.imgur.com/t5A7T.png)

**注意：：**它需要材料组件库的**1.1.0版本。**

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2020-09-14T08:25:48.057

**步骤 1：在 drawables 文件夹中定义 bg_layout.xml，并将以下代码放入其中。**

**第 2 步：将 bg_layout.xml 作为背景添加到您的布局中，完成。**

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid
        android:color="#EEEEEE"/> <!--your desired colour for solid-->

    <stroke
        android:width="3dp"
        android:color="#EEEEEE" /> <!--your desired colour for border-->

    <corners
        android:radius="50dp"/> <!--shape rounded value-->

</shape> 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2015-07-15T08:59:26.680

最好和最简单的方法是在布局中使用可绘制的**card_background**。这也遵循 Google 的材料设计指南。只需将其包含在您的 LinearLayout 中：

```
android:background="@drawable/card_background" 
```

将此添加到您的可绘制目录并将其命名为**card_background.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
        <shape android:shape="rectangle">
            <solid android:color="#BDBDBD"/>
            <corners android:radius="5dp"/>
        </shape>
    </item>

    <item
        android:left="0dp"
        android:right="0dp"
        android:top="0dp"
        android:bottom="2dp">
        <shape android:shape="rectangle">
            <solid android:color="#ffffff"/>
            <corners android:radius="5dp"/>
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-12-21T11:11:08.777

以编程方式设置拐角半径的功能

```
static void setCornerRadius(GradientDrawable drawable, float topLeft,
        float topRight, float bottomRight, float bottomLeft) {
    drawable.setCornerRadii(new float[] { topLeft, topLeft, topRight, topRight,
            bottomRight, bottomRight, bottomLeft, bottomLeft });
}

static void setCornerRadius(GradientDrawable drawable, float radius) {
    drawable.setCornerRadius(radius);
} 
```

使用

```
GradientDrawable gradientDrawable = new GradientDrawable();
gradientDrawable.setColor(Color.GREEN);
setCornerRadius(gradientDrawable, 20f);
//or setCornerRadius(gradientDrawable, 20f, 40f, 60f, 80f); 

view.setBackground(gradientDrawable); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-04-05T04:20:03.337

使用 CardView 为任何布局获取圆角边缘。使用**card_view:cardCornerRadius="5dp"**为 cardview 获得圆润的布局边缘。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:card_view="http://schemas.android.com/apk/res-auto"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">

      <android.support.v7.widget.CardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        card_view:cardCornerRadius="5dp">
          <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="15dp"
                android:weightSum="1">

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight=".3"
                    android:text="@string/quote_code"
                    android:textColor="@color/white"
                    android:textSize="@dimen/text_head_size" />

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight=".7"
                    android:text="@string/quote_details"
                    android:textColor="@color/white"
                    android:textSize="@dimen/text_head_size" />
            </LinearLayout>
       </android.support.v7.widget.CardView>
   </LinearLayout> 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-04-17T14:22:59.317

更好的方法是：

**背景活动.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:gravity="fill">
        <color android:color="@color/black"/>
    </item>
    <item>
        <shape android:gravity="fill">
            <solid android:color="@color/white"/>
            <corners android:radius="10dip"/>
            <padding android:left="0dip" android:top="0dip" android:right="0dip" android:bottom="0dip" />
        </shape>
    </item>
</layer-list> 
```

这也将在 API 21 下工作，并为您提供如下内容：

[![结果](https://i.stack.imgur.com/FMSFD.png)](https://i.stack.imgur.com/FMSFD.png)

* * *

如果您愿意多花点功夫更好地控制，那么使用`android.support.v7.widget.CardView`它的`cardCornerRadius`属性（并设置`elevation`属性以`0dp`摆脱与 cardView 伴随的任何阴影）。此外，这将在 API 级别低至 15 时起作用。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-03-17T11:48:03.747

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF"/>
    <stroke android:width="3dip" android:color="#B1BCBE" />
    <corners android:radius="10dip"/>
    <padding android:left="3dip" android:top="3dip" android:right="3dip" android:bottom="3dip" />
</shape> 
```

@David，只需将填充值与中风相同，因此无论图像大小如何，边框都是可见的

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-01-12T09:48:29.430

我在@gauravsapiens 的回答中附上了我的评论，让您合理地理解这些参数会产生什么影响。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Background color -->
    <solid android:color="@color/white" />

    <!-- Stroke around the background, width and color -->
    <stroke android:width="4dp" android:color="@color/drop_shadow"/>

    <!-- The corners of the shape -->
    <corners android:radius="4dp"/>

    <!-- Padding for the background, e.g the Text inside a TextView will be 
    located differently -->
    <padding android:left="10dp" android:right="10dp" 
             android:bottom="10dp" android:top="10dp" />

</shape> 
```

如果您只是想创建一个圆角的形状，删除填充和描边就可以了。如果您同时移除实体，您实际上将在透明背景上创建圆角。

为了懒惰，我在下面创建了一个形状，它只是一个带有圆角的纯白色背景 - 享受吧！:)

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Background color -->
    <solid android:color="@color/white" />

    <!-- The corners of the shape -->
    <corners android:radius="4dp"/>

</shape> 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2017-09-26T03:02:03.147

在drawable中创建你的xml，`layout_background.xml`

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
      <solid android:color="@color/your_colour" />
      <stroke
            android:width="2dp"
            android:color="@color/your_colour" />
      <corners android:radius="10dp" />      
    </shape>
 <--width, color, radius should be as per your requirement--> 
```

然后，将其添加到您的`layout.xml`

```
 android:background="@drawable/layout_background" 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-11-20T06:53:34.793

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="@dimen/_10sdp"
android:shape="rectangle">

<solid android:color="@color/header" />

<corners
    android:bottomLeftRadius="@dimen/_5sdp"
    android:bottomRightRadius="@dimen/_5sdp"
    android:topLeftRadius="@dimen/_5sdp"
    android:topRightRadius="@dimen/_5sdp" /> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-30T15:09:16.100

如果你想要的只是一个**简单的圆角矩形**，长话短说。

```
float r=8;
ShapeDrawable shape = new ShapeDrawable (new RoundRectShape(new float[] { r, r, r, r, r, r, r, r },null,null));
shape.getPaint().setColor(Color.RED);
view.setBackground(shape); 
```

[![在此处输入图像描述](https://i.stack.imgur.com/9GvXG.png)](https://i.stack.imgur.com/9GvXG.png)

有关更多详细信息，请阅读[**此答案**](https://stackoverflow.com/a/57974149/7756492)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-05-18T09:06:37.203

我参加聚会有点晚了，但这仍然是个问题。所以我写了一组 OutlineProviders 和 BindingAdapters 用于数据绑定，使您能够从 xml 中剪裁角点。

> 注意：带轮廓的剪裁不支持不同大小的角！

[我在这个 stackoverflow 帖子](https://stackoverflow.com/questions/55959103/android-how-to-clip-only-top-rounded-corners/67582960#67582960)上用代码写了一个详细的响应

使用代码 + 绑定适配器将获得什么：

```
<androidx.constraintlayout.widget.ConstraintLayout
    clipRadius="@{@dimen/some_radius}"
    clipBottomLeft="@{@dimen/some_radius}"
    clipBottomRight="@{@dimen/some_radius}"
    clipTopLeft="@{@dimen/some_radius}"
    clipTopRight="@{@dimen/some_radius}"
    clipCircle="@{@bool/clip}" 
```

这使您可以将视图裁剪为圆形、圆角、一个方向的圆角（左、上、右、下）或单个角。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-07T06:10:10.767

您可以使用自定义视图来执行此操作，例如[RoundAppBar](https://github.com/rezaiyan/Podcast/tree/master/app/src/main/java/com/hezaro/wall/utils/HAppBarLayout.kt)和[RoundBottomAppBar](https://github.com/rezaiyan/Podcast/tree/master/app/src/main/java/com/hezaro/wall/utils/HBottomAppBar.kt)。这里 a`path`用于`clipPath`画布。

[![圆角视图](https://i.stack.imgur.com/HaVVNl.jpg)](https://i.stack.imgur.com/HaVVNl.jpg)******

# android - 从广播接收器中启动的线程显示 Toast

> ID：16161456
> 
> 赞同：0
> 
> 时间：2013-04-23T05:14:01.093
> 
> 标签：android, toast

我有一个广播接收器。在那里我创建了一个新线程。如何在该线程中显示敬酒？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:33:46.240

使用以下代码从非 UI 线程执行 UI 操作

```
new Handler(Looper.getMainLooper()).post(new Runnable() {

            @Override
            public void run() {
                // your stuff to update the UI

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:40:30.060

试试这个代码

```
public void start_insert() {
        pDialog.show();
        new Thread() {
            @Override
            public void run() {
                int what = 0;
                try {
                    // Do Something in Background
                } catch (IllegalArgumentException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (Exception e) {
                    what = 1;
                    e.printStackTrace();
                }
                handler22.sendMessage(handler22.obtainMessage(what));
            }
        }.start();
    }

    private Handler handler22 = new Handler() {
        @Override
        public void handleMessage(Message msg) {
                pDialog.dismiss();

                Toast.makeText(getApplicationContext(), "SuccessFull",
                        10).show();

        }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:30:33.187

```
 Activity_Name.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // your stuff to update the UI

            }
        }); 
```

使用此代码更新 UI 线程或执行任何 UI 相关操作。

# logging - 如何在 7.1.3 版本中配置 jboss 日志记录

> ID：16161459
> 
> 赞同：0
> 
> 时间：2013-04-23T05:14:12.987
> 
> 标签：logging, jboss7.x, slf4j

在 jboss 中配置日志记录的最佳方法是什么，我尝试了 2 种方法（均失败）： 1.）使用 jboss 内置，根据一些文章，我只需要添加对 slf4j-api 的依赖作为提供的范围：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.5</version>
    <scope>provided</scope>
</dependency> 
```

*这里的问题是 Eclipse 控制台中没有显示日志。

2.) 使用 logback，所以我在 jboss-deployment-structure.xml 中排除了 slf4j 和 impl，并在我的 war 项目中包含了 slf4j/logback 依赖项。日志记录有效，但我有一个前缀 DATE LOG_LEVEL，我认为来自 jboss。

我发现了一些奇怪的东西，当我包含 log4j jar 日志记录工作但仅用于 INFO 级别时，调试仍然没有出现。

其他信息：我正在从生产者那里注入日志：

```
@Inject
protected org.slf4j.Logger log;

@Produces
public Logger createLogger(InjectionPoint injectionPoint) {
    return LoggerFactory.getLogger(injectionPoint.getMember().getDeclaringClass().getName());
} 
```

控制台记录器设置：

```
<console-handler name="CONSOLE">
    <level name="DEBUG"/>
    <formatter>
        <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
    </formatter>
</console-handler> 
```

我发现了一些异常：1.）我创建了一个新的耳朵项目，并且日志记录按预期工作。2.）在战争项目中失败，但如果我添加 jboss-deployment-structure.xml 并添加排除：

```
<module name="org.slf4j" />
<module name="org.slf4j.impl" /> 
```

这就是 INFO 日志记录起作用的时候。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T02:55:54.703

The problem in my case is my project's dependency to kettle-engine jar. After I removed it everything worked well. I'm not sure what's in kettle that's causing the problem though.

# java - 使用 simpleframework 的 XML 到 java 对象转换

> ID：16161461
> 
> 赞同：0
> 
> 时间：2013-04-23T05:14:28.530
> 
> 标签：java, xml, simple-framework

我正在使用 simpleframework 将 xml 文件转换为 java 对象。我正在使用泛型，因为我的 xml 的内部节点发生了变化。但是 simpleframework 在转换时会抛出错误。这是我的示例代码：

```
@Root(name = "searchresult", strict = false)
public class ResponseVO<T>
{
    @ElementList(entry = "document", inline = true)
    public List<T> elementVOList = new ArrayList<T>();

    public List<T>  getElementsVOList()
    {
        return elementVOList;
    }

    public void setElementsVOList(List<T>list)
    {
        elementVOList = list;
    }
} 
```

ResponseVO 是各种其他 VO 的容器，如下所示：

```
@Root(name = "document", strict = false)
public class Projects_Display_VO
{

    @Element(name = "projectname")
    private String projectName;

    @Attribute(name = "id")
    private int tmpid;

    public int getTmpid()
    {
        return tmpid;
    }

    public void setTmpid(int tmpid)
    {
        this.tmpid = tmpid;
    }
    /**
     * ProjectId
     */

    @Element(name = "projectid")
    private String projectID;

    public String getProjectName()
    {
        return projectName;
    }

    public void setProjectName(String projectName)
    {
        this.projectName = projectName;
    }

    public int getProjectID()
    {
        return Integer.parseInt(projectID);
    }

    public void setProjectID(String projectID)
    {
        this.projectID = projectID;
    }
} 
```

**XML文件**如下：

```
<searchresult>
  <query>id:(PROJ2 PROJ6)</query>
  <document id="0">
    <projectid>2</projectid>
    <projectname>Redundant Demo Project</projectname>
    <doctype>Projects</doctype>
    <summary>||Demo Project</summary>
    <title>Redundant Demo Project</title>
  </document>
  <document id="1">
    <projectid>6</projectid>
    <projectname>Redundant Demo Project2</projectname>
    <doctype>Projects</doctype>
    <summary>||Main terminal links.</summary>
    <title>Terminal 5 Project</title>
  </document>  
</searchresult> 
```

转换代码如下：

```
ResponseVO<Projects_Display_VO> resp = (ResponseVO<Projects_Display_VO>)  SerializationUtil.deserialize(ResponseVO.class, reader); 
```

在这里，我使用来自 simpleframework 的序列化程序。但它会引发以下错误

```
Exception::Attribute 'id' does not have a match in class java.lang.Object at line 5
org.simpleframework.xml.core.AttributeException: Attribute 'id' does not have a match in   class java.lang.Object at line 5
at org.simpleframework.xml.core.Composite.readAttribute(Composite.java:555)
at org.simpleframework.xml.core.Composite.readAttributes(Composite.java:474)
at org.simpleframework.xml.core.Composite.readSection(Composite.java:387) 
```

我不知道这里出了什么问题。没有泛型它可以正常工作。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:37:18.070

这是由擦除引起的，T 在运行时不可用。Java 不允许这样做。

# android - 如何更改切换视图状态外观：android

> ID：16161463
> 
> 赞同：3
> 
> 时间：2013-04-23T05:14:44.820
> 
> 标签：android

我想更改启用的切换视图并禁用状态外观。有人能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:23:57.577

首先在项目的可绘制文件夹中创建一个选择器

看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_checked="false" android:drawable="@drawable/toggle_off"  />
    <item android:state_checked="true" android:drawable="@drawable/toggle_on"  />
</selector> 
```

不要忘记将 toggle_off.png 和 toggle_on.png 保存在您的可绘制文件夹中。

然后在切换按钮中应用此选择器，如下所示：

```
<ToggleButton 
    android:id="@+id/togglerToggle"
    android:background="@drawable/toggle_indication_selecter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/> 
```

toggle_indication_selecter 是选择器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:23:14.320

[切换按钮](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)具有可以保持状态的选择器文件。您还可以在下面看到切换按钮代码及其选择器文件。

```
<ToggleButton
                    android:id="@+id/toggleAutoChange"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/toggle_sel"
                    android:textOff=""
                    android:textOn="" /> 
```

选择器 toggle_sel.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/switch_off" android:state_checked="false"/>
    <item android:drawable="@drawable/switch_on" android:state_checked="true"/>
    <item android:drawable="@drawable/switch_on" android:state_enabled="true"/>
    <item android:drawable="@drawable/switch_disabled" android:state_enabled="false"/>
</selector> 
```

您可以根据需要更改可绘制对象。但以上是您可以维护的状态。

# c# - 使用 Singleton 类实现关闭客户端应用程序

> ID：16161467
> 
> 赞同：0
> 
> 时间：2013-04-23T05:15:22.900
> 
> 标签：c#, .net, visual-c++

我有一个用 c# 编写的 .net 应用程序。此应用程序是从用 c++ 编写的父应用程序调用的。当父应用程序崩溃或意外关闭时，.net 应用程序仍然运行。但是当父应用程序崩溃或停止时，我也想关闭客户端应用程序。

我的一位同事说，我们可以使用单例类轻松实现这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:21:34.350

您将不得不轮询以查看父应用程序是否仍在运行。

一种方法是通过在 Windows 中配置审计进程跟踪来设置应用程序运行的时间。以下链接可能会帮助您入门：

> [审计过程跟踪](http://technet.microsoft.com/en-us/library/cc775520%28WS.10%29.aspx)
> 
> [如何跟踪我的机器上来来去去的程序？](http://ask-leo.com/how_can_i_track_what_programs_come_and_go_on_my_machine.html)

进程跟踪将在 Windows 事件日志中创建条目，然后您可以使用 C++、C# 和/或 VB.Net 访问这些条目。您可以使用这些日志来查看父应用程序是否正在运行。

编辑：

如果您有权访问 C++ 代码库，则可以尝试在父应用程序崩溃或关闭时捕获异常，例如：

```
Application.ThreadException += new ThreadExceptionEventHandler(ApplicationThreadException);

AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(ApplicationUnhandledException);

private void ApplicationThreadException(object sender, ThreadExceptionEventArgs e)
{
    //Write to a File, Registry, Database flagging the application has crashed
}
private void ApplicationUnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    //Write to a File, Registry, Database flagging the application has crashed
}

private void frmMain_FormClosed(object sender, FormClosedEventArgs e)
{
    //Write to a File, Registry, Database flagging the application has closed
} 
```

否则，您将不得不轮询以查看父应用程序是否列在流程管理器中，例如：

```
StringBuilder sb = new StringBuilder();
ManagementClass MgmtClass = new ManagementClass("Win32_Process");

foreach (ManagementObject mo in MgmtClass.GetInstances())
{
    sb.Append("Name:\t" + mo["Name"] + Environment.NewLine);
    sb.Append("ID:\t" + mo["ProcessId"] + Environment.NewLine);
    sb.Append(Environment.NewLine);
} 
```

如果未列出，请关闭子应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:44:11.733

首先，您必须在父窗口引发异常或关闭时捕获事件。其次，您将发送关闭消息到已由父窗口启动的进程。有关发送关闭消息的信息，您可以在此处参考： [Send message to a Windows process (not its main window)](https://stackoverflow.com/questions/1777668/send-message-to-a-windows-process-not-its-main-window)

或者

[如何从不同的进程关闭窗口](https://stackoverflow.com/questions/4387933/how-to-close-a-window-from-a-different-process?lq=1)

# java - 如何在文本文件（如数据库）中获取和写入数据

> ID：16161468
> 
> 赞同：0
> 
> 时间：2013-04-23T05:15:27.843
> 
> 标签：java

我正在尝试开发一个小程序。我想从一个文本文件中写入和获取数据，就像它是一个数据库一样。我有一些数据例如：

```
User = abc,
Age = 12,
No = 154 
```

我想将该数据写入文本文件中，然后使用`User`. 我不知道该怎么做。谁能告诉如何做到这一点。

```
BufferedWriter writer = null;
try {
    writer = new BufferedWriter(new FileWriter("./output.txt"));
    writer.write("your data here");
} catch (IOException e) {
    System.err.println(e);
} finally {
    if (writer != null) {
        try {
            writer.close();
        } catch (IOException e) {
            System.err.println(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:26:05.350

我可以知道你为什么想要这个..？？因为随着读写请求的增加，你的代码会到达瓶颈。您想要执行繁重的 I/O 操作以获取 lite 数据。磁盘 I/O 的起伏是它自己的并发读取限制。所以我不建议你使用这种方法来获取 lite 数据。您可以使用一些唯一 ID 将一些重数据（例如图像/视频/歌曲等）放入文件中，这将是一个好方法，但像这样我也不会喜欢您..但是您想要这样做而不是去寻找有效的属性文件关于关键和价值。在消费时将值令牌分开和拆分。

# ruby-on-rails - 我们可以在 rails 3.0 中使用 mailchimp 发送用户通知电子邮件吗

> ID：16161470
> 
> 赞同：2
> 
> 时间：2013-04-23T05:15:32.793
> 
> 标签：ruby-on-rails, ruby, mailchimp

我们可以在 Rails 3.0 电子邮件中使用[mailchimp](http://mailchimp.com/http://diy.stackexchange.com)系统，例如密码重置电子邮件、帐户确认电子邮件和其他电子邮件，例如当用户收到来自另一个用户和所有其他系统的消息

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T06:34:48.697

您所指的电子邮件类型称为“事务性电子邮件”，而 MailChimp 用于“批量电子邮件”。所以不，您不能为此使用 MailChimp。这实际上违反了他们的服务条款。

然而，亚特兰大的优秀人士就在去年推出了[Mandrill 。](http://mandrill.com/)Mandrill 处理交易电子邮件就像 Diego Maradona 处理足球一样。

Mandrill 提供了大量的 API 方法和很棒的[文档](https://mandrillapp.com/api/docs/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:37:46.723

我推荐使用 Sengrid - [http://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html](http://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html)。我不熟悉 MailChimp，但我想要通过 MailChimp 发送消息，您必须添加一个联系人到活动、跟进或我认为开销很大的东西。

# ruby-on-rails - 如何在 rspec 集成测试中访问 rails 请求对象？

> ID：16161473
> 
> 赞同：3
> 
> 时间：2013-04-23T05:15:58.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, ruby-on-rails-3.1, integration-testing

在 Rails 3.2.13 中，默认提供子域。因此，我想测试我的应用程序，以便当商家注册时，他默认使用子域“商家”的 root_url，即[https://merchant.lvh.me:3000](https://merchant.lvh.me:3000)。但是，我无法在 RSpec 中进行相同的测试。我的测试如下所示：

```
 describe "Sign in" do
    before { visit signup_path }
    let(:submit) { "Sign up" }

    describe "with invalid information" do
        it "should not create a user" do
            expect { click_button submit }.not_to change(User, :count)
        end
    end

    describe "with valid information" do
        before do
            fill_in "Email", with: "user@gmail.com"
            fill_in "Password", with: "securepassword"
        end

        describe "as a merchant" do
            before { choose("Merchant") }

            it "should create a merchant user" do
                expect { click_button submit }.to change(User, :count).by(1)
            end

            describe "after creating the merchant user" do
                before do
            click_button submit
            request = ActionController::TestRequest.new(:host => "lvh.me:3000")
         end
                let(:merchant) { User.find_by_email('user@gmail.com') }

                expect (request.subdomain).to eq('merchant')
                it { should have_selector 'div.alert.alert-success', text: "Welcome to App!" }
                it { should have_link "Sign out", href: signout_path }
                it { should_not have_link "Sign in", href: signin_path }
                it { should have_content merchant.email }
          it { should have_selector "title", text: full_title(merchant.email) }
            end
        end

        describe "as a user" do
            before do
          choose("User")
          request = ActionController::TestRequest.new(:host => "lvh.me:3000")
        end

            it "should create a normal user" do
                expect { click_button submit }.to change(User, :count).by(1)
            end

            describe "after creating the normal user" do
                before { click_button submit }
                let(:user) { User.find_by_email('user@gmail.com') }

                expect (request.subdomain).to eq('user')
                it { should have_selector 'div.alert.alert-success', text: "Welcome to App!" }
                it { should have_link "Sign out", href: signout_path }
                it { should_not have_link "Sign in", href: signin_path }
          it { should have_content user.email }
          it { should have_selector "title", text: full_title(user.email) }
            end
        end
    end
  end 
```

错误是：

```
19:58:54 - INFO - Guard::RSpec is running, with RSpec 2!
19:58:54 - INFO - Running all specs
Running tests with args ["--drb", "-f", "progress", "-r", "/usr/local/lib/ruby/gems/1.9.1/gems/guard-rspec-1.2.1/lib/guard/rspec/formatters/notification_rspec.rb", "-f", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--failure-exit-code", "2", "spec"]...
Exception encountered: #<NameError: undefined local variable or method `request' for #<Class:0x007fe0d8058848>>
backtrace:
/home/app/spec/requests/user_pages_spec.rb:46:in `block (5 levels) in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
/home/app/spec/requests/user_pages_spec.rb:39:in `block (4 levels) in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
/home/app/spec/requests/user_pages_spec.rb:32:in `block (3 levels) in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
/home/app/spec/requests/user_pages_spec.rb:26:in `block (2 levels) in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
/home/app/spec/requests/user_pages_spec.rb:16:in `block in <top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/dsl.rb:18:in `describe'
/home/app/spec/requests/user_pages_spec.rb:3:in `<top (required)>'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `block in load'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:245:in `load'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
/usr/local/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/test_framework/rspec.rb:11:in `run_tests'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:13:in `block in run'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/forker.rb:21:in `block in initialize'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/forker.rb:18:in `fork'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/forker.rb:18:in `initialize'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `new'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `run'
/usr/local/lib/ruby/gems/1.9.1/gems/spork-0.9.2/lib/spork/server.rb:48:in `run'
/usr/local/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
/usr/local/lib/ruby/1.9.1/drb/drb.rb:1508:in `perform'
/usr/local/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
/usr/local/lib/ruby/1.9.1/drb/drb.rb:1582:in `loop'
/usr/local/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop'
Done. 
```

我试图打印请求对象以查看是否有任何东西，但它是空白的。如何在 RSpec 集成测试中访问请求对象，或者集成测试是测试这种行为的正确位置？请建议。

**编辑：更多信息**我的数据模型仅包含单个用户表，默认情况下都是普通用户。然而，也有一些是商人。现在，当某人以用户身份登录时（使用登录表单中的单选按钮进行区分），他应该被重定向到 user.lvh.me，如果他以商家身份登录，他应该被重定向到 Mercer.lvh 。我。这就是我要在集成测试中测试的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:28:37.073

您可以使用模拟请求

```
ActionController::TestRequest.new() 
```

例如

```
request = ActionController::TestRequest.new(:host => test_domain) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:16:56.843

我不太清楚您要在这里测试什么行为。

您似乎有一个注册表单，商家可以在其中注册。注册后，他们应该获得自己的子域（merchant1.lvh.me、merchant2.lvh.me）。那正确吗？

如果这是正确的，那么您似乎正在尝试测试是否应设置注册**请求的子域。**我不认为它是这样工作的——客户端控制着向服务器发出请求的域。我怀疑您想要做的是在成功注册到适当的 subdomian 后执行重定向。因此，您要测试**响应**是否重定向到子域。

# php - 获取html中的内容不起作用

> ID：16161476
> 
> 赞同：0
> 
> 时间：2013-04-23T05:16:21.487
> 
> 标签：php, file-get-contents

我正在尝试从网站内部提取 html 内容。我只想要标签内的内容。

```
 //$validLink is a link with .htm extension, source code is rather large 
    //contains 24,000 lines of html code

    $thehtml = file_get_contents($validlink);
    $thehtml = preg_match("/<body.*?>(.*?)<\/body>/is", $thehtml); 
```

我还可以做些什么？$thehtml 是空的......我正在尝试将其插入到 wordpress 帖子中......但 $thehtml 是空的......出于某种奇怪的原因。是否有可能的超时问题或什么？？？

不可能有超时问题.....因为我注意到如果我只输出 file_get_contents($validlink); 由于某种原因没有找到BODY.....

另一种可能的解决方案是获取文档中第一个 div 和最后一个 div 之间的内容....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:47:15.510

```
$thehtml = file_get_contents($validlink);
$thehtml = preg_match("/<body.*?>(.*?)<\/body>/is", $thehtml,$matches);
$thehtml = $matches[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:53:31.870

这是正确的代码：

```
$thehtml = file_get_contents($validlink);
preg_match('/<body.*?>(.*?)<\/body>/is', $thehtml, $matches);
$thehtml = $matches[1]; 
```

但我建议您改用[DOM 解析器](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:26:20.083

使用标签开始和结束的'strpos（）'获取字符串位置，然后使用子字符串方法，即带有此位置的substr（）

# wpf - 移动 GridSplitter 后，布局无法正常工作

> ID：16161480
> 
> 赞同：0
> 
> 时间：2013-04-23T05:16:35.510
> 
> 标签：wpf, tabcontrol, gridsplitter

我的目的是：双击`TabItem`名为“Tab”中的“Tab” `TabControl`，然后`TabControl`将其折叠起来，再双击导致展开。但是在我移动`GridSplitter`并双击要折叠的“Tab”之后，它不能正常工作，列的高度`TabControl`不等于列的高度，`TabControl`换句话说，**`GridSplitter`不要跟随“选项卡控件”**。

![在此处输入图像描述](https://i.stack.imgur.com/NFDyJ.jpg)

**.xaml**

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto" MinHeight="20"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid Grid.Column="1">
                <Label>
                    Nothing
                </Label>
            </Grid>
        </Grid>
        <GridSplitter Grid.Row="1" 
                      HorizontalAlignment="Stretch" 
                      VerticalAlignment="Center" 
                      Height="6" />
        <TabControl Grid.Row="2" 
                    TabStripPlacement="Bottom" 
                    VerticalAlignment="Stretch">
            <TabItem Header="Tab" 
                     MouseDoubleClick="TabItemDoubleCilck">
                <!--ListView-->
                <ListView Grid.Row="1"
                          xmlns:sys="clr-namespace:System;assembly=mscorlib">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="AA " 
                                        Width="100"
                                        DisplayMemberBinding="{Binding [0]}" />
                            <GridViewColumn Header="BB" 
                                        Width="100"
                                        DisplayMemberBinding="{Binding [1]}" />
                            <GridViewColumn Header="CC" 
                                        Width="100"
                                        DisplayMemberBinding="{Binding [2]}" />
                            <GridViewColumn Header="DD" 
                                        Width="100"
                                        DisplayMemberBinding="{Binding [3]}" />
                        </GridView>
                    </ListView.View>
                    <ListViewItem>
                        <x:Array Type="sys:String" >
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                        </x:Array>
                    </ListViewItem>
                    <ListViewItem>
                        <x:Array Type="sys:String" >
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                            <sys:String>2000/01/01</sys:String>
                        </x:Array>
                    </ListViewItem>
                </ListView>
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

**。CS**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication7
{
    /// <summary>
    /// MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        const double dBottomTabMinHeight = 20.0;

        private bool isBottomTabUnfold;

        public MainWindow()
        {
            InitializeComponent();
            isBottomTabUnfold = true;
        }

        private void TabItemDoubleCilck(object sender, MouseButtonEventArgs e)
        {
            TabItem tabItm = sender as TabItem;
            if (isBottomTabUnfold)
            {
                ((FrameworkElement)tabItm.Parent).Height = dBottomTabMinHeight;
            }
            else
            {
                ((FrameworkElement)tabItm.Parent).Height = Double.NaN;

            }
            isBottomTabUnfold = !isBottomTabUnfold;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:01:00.550

试试这个，希望这是你所期望的

```
 private void TabItemDoubleCilck(object sender, MouseButtonEventArgs e)
    {
        TabItem tabItm = sender as TabItem;
        if (isBottomTabUnfold)
        {
            ((FrameworkElement)tabItm.Parent).Height = dBottomTabMinHeight;
            ((FrameworkElement)tabItm.Parent).VerticalAlignment = System.Windows.VerticalAlignment.Bottom;
        }
        else
        {
            ((FrameworkElement)tabItm.Parent).Height = Double.NaN;
            ((FrameworkElement)tabItm.Parent).VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
        }
        isBottomTabUnfold = !isBottomTabUnfold;
    } 
```

编辑：

像这样呢？

```
 private void TabItemDoubleCilck(object sender, MouseButtonEventArgs e)
    {
        TabItem tabItm = sender as TabItem;
        if (isBottomTabUnfold)
        {
            dUnfoldedHeight = ((FrameworkElement)tabItm.Parent).ActualHeight;
            ((FrameworkElement)tabItm.Parent).Height = dBottomTabMinHeight;
            rowTab.Height = new GridLength(1, GridUnitType.Auto);
        }
        else
        {
            ((FrameworkElement)tabItm.Parent).Height = double.NaN;
            rowTab.Height = new GridLength(dUnfoldedHeight);

        }
        isBottomTabUnfold = !isBottomTabUnfold;
    } 
```

注意：

*   rowTab 是第 3 个行定义的名称，dUnfoldedHeight 是一个私有成员，用于在折叠之前跟踪展开的选项卡的高度。

*   您可能会发现在选项卡折叠时向上拖动拆分器或向下拖动拆分器直到选项卡看起来像展开时会出现奇怪的行为，要解决此问题，您可能必须使用拆分器的 DragDelta 和 DragCompleted 事件来决定是否最后标签应被视为折叠与否

# python - 具有多个服务类的云端点

> ID：16161488
> 
> 赞同：5
> 
> 时间：2013-04-23T05:16:52.577
> 
> 标签：python, google-app-engine, google-cloud-endpoints

我开始使用 Google Cloud Endpoints，但在指定多个服务类时遇到了问题。知道如何让它工作吗？

```
ApiConfigurationError: Attempting to implement service myservice, version v1, with multiple classes that aren't compatible. See docstring for api() for examples how to implement a multi-class API. 
```

这就是我创建端点服务器的方式。

```
AVAILABLE_SERVICES = [
  FirstService,
  SecondService
]

app = endpoints.api_server(AVAILABLE_SERVICES) 
```

对于每个服务类，我都这样做：

```
@endpoints.api(name='myservice', version='v1', description='MyService API')
class FirstService(remote.Service):
...

@endpoints.api(name='myservice', version='v1', description='MyService API')
class SecondService(remote.Service):
... 
```

这些中的每一个都可以完美地单独工作，但我不确定在组合它们时如何让它们工作。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T23:01:06.347

正确的方法是创建一个`api`对象并使用`collection`

```
api_root = endpoints.api(name='myservice', version='v1', description='MyService API')

@api_root.collection(resource_name='first')
class FirstService(remote.Service):
  ...

@api_root.collection(resource_name='second')
class SecondService(remote.Service):
  ... 
```

其中资源名称将插入方法名称的前面，以便您可以使用

```
 @endpoints.method(name='method', ...)
  def MyMethod(self, request):
    ... 
```

代替

```
 @endpoints.method(name='first.method', ...)
  def MyMethod(self, request):
    ... 
```

# 将其放入 API 服务器：

该`api_root`对象相当于一个用`remote.Service`装饰的类`endpoints.api`，因此您可以简单地将其包含在`endpoints.api_server`列表中。例如：

```
application = endpoints.api_server([api_root, ...]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:22:02.550

如果我没记错的话，您应该为每项服务提供不同的名称，这样您就可以访问两者，每个服务都有特定的“地址”。

```
@endpoints.api(name='myservice_one', version='v1', description='MyService One API')
class FirstService(remote.Service):
...

@endpoints.api(name='myservice_two', version='v1', description='MyService Two API')
class SecondService(remote.Service):
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T11:45:33.850

我已经成功地部署了在两个类中实现的单个 api。您可以尝试使用以下代码段（几乎直接来自谷歌[文档](https://developers.google.com/appengine/docs/python/endpoints/create_api#creating_an_api_implemented_with_multiple_classes)）：

```
an_api = endpoints.api(name='library', version='v1.0')

@an_api.api_class(resource_name='shelves')
class Shelves(remote.Service):
...

@an_api.api_class(resource_name='books', path='books')
class Books(remote.Service):
...

APPLICATION = endpoints.api_server([an_api],
                               restricted=False) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T22:32:23.987

对于本地开发，我正在使用临时解决方法，即禁用异常（我知道我知道......）

在我的 sdk 中`google_appengine/google/appengine/ext/endpoints/api_backend_service.py`大约第 97 行：

```
 elif service_class != method_class:
          pass
#          raise api_config.ApiConfigurationError(
#              'SPI registered with multiple classes within one '
#              'configuration (%s and %s).  Each call to register_spi should '
#              'only contain the methods from a single class.  Call '
#              'repeatedly for multiple classes.' % (service_class,
#                                                    method_class))
    if service_class is not None: 
```

结合我使用的构造：

```
application = endpoints.api_server([FirstService, SecondService, ...]) 
```

同样，这在生产中不起作用，在那里你会得到同样的异常。希望这个答案将被未来的修复所淘汰。

确认它现在已经过时（针对 1.8.2 进行了测试）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-06T03:24:49.923

如果是Java...

```
https://developers.google.com/appengine/docs/java/endpoints/multiclass 
```

云更不容易。

# php - json解码改变值

> ID：16161501
> 
> 赞同：-2
> 
> 时间：2013-04-23T05:17:26.223
> 
> 标签：php, arrays, json

我有以下 json 数组。

```
{"entries":[{"uid":155551338258538,"photo":"https:\/\/m.ak.fbcdn.net\/profile.ak\/hprofile-ak-prn1\/323887_155551338258538_1152153357_q.jpg","type":"user","text":"shikhadamodar","path":"\/shikha.damodar.1","category":"Madiun","names":["shikhadamodar"],"index_rank":-1,"needs_update":true,"non_title_tokens":"madiun"},{"uid":155551332173428,"photo":"https:\/\/m.ak.fbcdn.net\/profile.ak\/hprofile-ak-snc3\/273318_155551332173428_2131571532_q.jpg","type":"user","text":"shreya damodar","path":"\/my.devprofile","category":"Nilai","names":["shreyadamodar"],"index_rank":-1,"needs_update":true,"non_title_tokens":"nilai"},{"uid":155555587232111,"photo":"https:\/\/m.ak.fbcdn.net\/profile.ak\/hprofile-ak-prn1\/41332_155555587232111_3158_q.jpg","type":"user","text":"neha neha","path": "\/neha.neha34","category":"New York, New York","names":["Neha neha"],"index_rank":-1,"needs_update":true,"non_title_tokens":"new york, new york"}],"token":"1333551453-7","display_token":5,"display_ttl":1333541132} 
```

当我解码这个 json 数组时，我得到了，

```
array(4){["entries"]=>array(3){[0]=>array(10){["uid"]=>float(1.5555133825854E+14)["photo"]=>string(90) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-prn1/323887_155551338258538_1152153357_q.jpg"["type"]=>string(4) "user"["text"]=>string(13) "shikhadamodar"["path"]=>string(17) "/shikha.damodar.1"["category"]=>string(6) "Madiun"["names"]=>array(1){[0]=>string(13) "shikhadamodar"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(6) "madiun"}[1]=>array(10){["uid"]=>float(1.5555133217343E+14)["photo"]=>string(90) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-snc3/273318_155551332173428_2131571532_q.jpg"["type"]=>string(4) "user"["text"]=>string(14) "shreya damodar"["path"]=>string(14) "/my.devprofile"["category"]=>string(5) "Nilai"["names"]=>array(1){[0]=>string(13) "shreyadamodar"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(5) "nilai"}[2]=>array(10){["uid"]=>float(1.5555558723211E+14)["photo"]=>string(83) "https://m.ak.fbcdn.net/profile.ak/hprofile-ak-prn1/41332_155555587232111_3158_q.jpg"["type"]=>string(4) "user"["text"]=>string(9) "neha neha"["path"]=>string(12) "/neha.neha34"["category"]=>string(18) "New York,New York"["names"]=>array(1){[0]=>string(9) "Neha neha"}["index_rank"]=>int(-1)["needs_update"]=>bool(true)["non_title_tokens"]=>string(18) "new york,new york"}}["token"]=>string(12) "1333551453-7"["display_token"]=>int(5)["display_ttl"]=>int(1333541132)} 
```

json 中的第一个 UID 是 `"uid":155551338258538,`

当涉及到数组时，它变成了`["uid"]=>float(1.5555133825854E+14)`

为什么会这样？？

获得结果后`1.5555133825854E+14`，我可以将其更改为真实的 UID`155551338258538` 吗？

希望一些伟大的编码器可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:37:12.283

我发现您的问题的解决方案 UID 字符串很长，因此 json_decode 将其转换为科学记数法。尝试这个

```
print_r(json_decode($arr, false,512, JSON_BIGINT_AS_STRING)); 
```

# c++ - 如何将现有代码/位图分配给 MFC

> ID：16161507
> 
> 赞同：0
> 
> 时间：2013-04-23T05:17:45.537
> 
> 标签：c++, windows, mfc, dice

所以我写了一个模拟骰子游戏的程序，几乎就像掷骰子的游戏。我想把这个普通的控制台应用程序变成一个基于对话的 MFC。所以我会创建一个标记为“滚动”的按钮，窗口会显示两个骰子正在滚动。这是我为 condole 应用程序提供的代码。它工作得很好，但我很困惑如何将代码分配给按钮以及如何将模具面分配给其各自的位图。感谢您的帮助！

```
//Game of chance "Craps"

#include "stdafx.h"
using namespace std;

void dice(void)
{
    //variables
    string  input;
    int     i,roll,gamePoint,val,val_1,val_2,roll_1,roll_2,sumRoll;
    long    winnings,losses,wager,odds,oddsNumer,oddsDenom;
    bool    A=false;
    //declarations
    roll=0;gamePoint=0;val=0;val_1=0;val_2=0;roll_1=0;roll_2=0;sumRoll=0;
    //user input
    cout<<"Enter your odds ratio:\nNumerator: ";
    cin>>oddsNumer;
    cout<<setw(8)<<"Denominator: ";
    cin>>oddsDenom;
    cout<<"Enter your wager for the game: ";
    cin>>wager;
    odds=abs((oddsNumer/oddsDenom)+1);
    winnings=abs(odds*wager-wager);
    cout<<winnings;
    //dice output
    do
    {
        srand (unsigned(time(NULL)));
        sumRoll=0;
        for(i=0;i<2;i++)
        {
            val_1=rollDice();
            //cout<<"***test1***";
            switch (val_1)
            {//start switch
                case 1:
                    dieFace(val_1);
                    break;
                case 2:
                    dieFace(val_1);
                    break;
                case 3:
                    dieFace(val_1);
                    break;
                case 4:
                    dieFace(val_1);
                    break;
                case 5:
                    dieFace(val_1);
                    break;
                case 6:
                    dieFace(val_1);
                    break;
            }//end switch
            sumRoll=val_1+sumRoll;
        }//end for loop dice roll
        cout<<endl<<endl<<"\tYou rolled a: "<<sumRoll<<endl;
        system("pause");
        if (sumRoll==7 ||sumRoll==11)
        {
            cout<<"Hurray! You win!\n"<<
            "Your total winnings: $"<<winnings<<endl;
            A=true;
            system("pause");
        }//and if winner statement
        else if(sumRoll==2 ||sumRoll==3||sumRoll==12)
        {
            losses=abs(odds*wager);
            cout<<"Sorry, you lose. The house wins. Total lost is $"<<
            losses<<endl;
            A=true;
            system("pause");
        }
        else
        {

            gamePoint=sumRoll;
            roll=0;

            do
            {
                srand (unsigned(time(NULL)));
                sumRoll=0;
                roll++;
                for(i=0;i<2;i++)
                {
                    val_1=rollDice();

                    switch (val_1)
                    {//start switch
                        case 1:
                            dieFace(val_1);
                            break;
                        case 2:
                            dieFace(val_1);
                            break;
                        case 3:
                            dieFace(val_1);
                            break;
                        case 4:
                            dieFace(val_1);
                            break;
                        case 5:
                            dieFace(val_1);
                            break;
                        case 6:
                            dieFace(val_1);
                            break;
                    }//end switch
                    sumRoll=val_1+sumRoll;
                }//end for loop dice roll
                cout<<endl<<endl<<"\tYou rolled a: "<<sumRoll<<endl;
                system("pause");
                if (sumRoll==7)
                {
                    losses=abs(wager*roll*odds);
                    cout<<"Sorry, you lose. The house wins."<<
                    "Total lost is $"<<losses<<endl;
                    A=true;
                    system("pause");
                }
                else if(sumRoll==gamePoint)
                {
                    winnings=abs(wager*roll*odds-wager);
                    cout<<"Hurray! You win!\n"<<
                    "Your total winnings are $"<<winnings<<endl;
                    A=true;
                    system("pause");
                }
            }while(A==false);
        }
    }while(A==false);
    system("pause");
    system("cls");
    return ;
}

int rollDice(void)
{
    //srand (unsigned(time(0)));
    return((rand()%6)+1);
}
void dieFace(int val)
{

    switch (val)
    {//start switch
        case 1:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *     O     *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;
        case 2:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     *         O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O         *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;
        case 3:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     *         O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *     O     *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O         *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;
        case 4:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;  
        case 5:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     *     O     *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;
        case 6:
            cout<<endl<<endl<<endl;
            cout<<"     *************"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *           *"<<endl;
            cout<<"     * O       O *"<<endl;
            cout<<"     *************"<<endl<<endl;

            break;
    }
    return  ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:37:28.723

您需要添加一个事件处理程序来处理按钮控件的鼠标单击。假设您在对话框中添加了一个按钮并为其指定了资源 id `IDC_ROLLDICE`。要添加事件处理程序，请右键单击您添加的按钮并选择“添加事件处理程序”。将弹出一个窗口，要求您填写一些信息。在“消息类型”下确保`BN_CLICKED`已选中。这将告诉 MFC 消息调度程序您对该特定事件感兴趣。在标有“函数处理程序名称”的字段中为其命名。添加完所有信息后，单击“添加和编辑”。这将为您的 CDialog 派生类添加一个成员函数，并在消息映射中添加一个条目以确保它被调用。它应该如下所示

```
void CMyDialog::OnBnClickedRolldice()
{
// TODO: Add your control notification handler code here
} 
```

现在，每当您单击按钮时，MFC 都会调用`OnBnClickedRolldice`. 只需开始添加代码以将骰子掷入该成员函数并根据需要添加成员变量。

基本上，您将通过成员变量和函数将整个应用程序移动到 CDialog 派生类中。

# java - 为什么这个字段没有被序列化？

> ID：16161510
> 
> 赞同：0
> 
> 时间：2013-04-23T05:18:00.070
> 
> 标签：java, rest, jax-ws, jax-rs

我的`Issue`实体是从具有多个字段（id 等）的数据库表创建的。每个问题都有一个文章列表作为字段，这些文章存储在单独的数据库表中。文章有一个`int issueID`字段，用于将它们映射到适当的问题（表中没有对应的列`issues`）：最终，当构造问题对象时，我将让它拉出所有 issueID 匹配的文章它的 ID，以便我可以返回包含问题数据的单个序列化对象以及表示其文章列表的 JSONArray。

不过，此时我只是在做一些测试——创建一些虚拟的 Article 对象并将它们添加到文章集合中。问题是，当我在 Issue 对象上测试 GET 请求时，返回的 JSONObject 仅包含存储在数据库中的字段（id 等）——没有 Article 集合的迹象。这是为什么？

我同样有兴趣知道您需要查看哪些其他代码来回答这个问题：我刚刚开始自学如何编写 Web 服务，并且仍处于思考广泛概念的阶段，所以弄清楚哪些移动部件会影响哪些行为 - 以及在哪里需要哪些注释 - 最终是我想要做的。

在这种情况下，欢迎更广泛的建议。

```
@Entity
@Table(name = "issues")
@XmlRootElement
public class Issue implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "id")
    private Integer id;
    ....//other fields 
    @OneToMany(mappedBy = "issueID")
    private Collection<Articles> articlesCollection;

    public Issue() {
    articlesCollection = new ArrayList<Articles>();
    Articles a = new Articles();
    a.setHeadline("butt cheese");
    articlesCollection.add(a);
    Articles b = new Articles();        
    articlesCollection.add(b);
    Articles c = new Articles();        
    articlesCollection.add(c);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:32:08.820

默认情况下，关系初始化是惰性的，因此当`Issue`加载对象时，`articlesCollection`除非使用，否则不会获取。

在您的情况下，情况似乎相同。

如果您不打算显式加载，请探索[OpenEntityManagerInViewFilter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/jpa/support/OpenEntityManagerInViewFilter.html)`articlesCollection`。当您的对象序列化时，`articlesCollection`如果您配置了`OpenEntityManagerInViewFilter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:03:30.213

您的文章类是否也有@XmlType 或@XMLRootElement 标记？`List<T>`像jaxb这样的任何泛型类都期望`T`用`@XMLType`or注释`@XMLRootElelemt`

# php - 如何将php代码转换为jquery

> ID：16161513
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:18:21.770
> 
> 标签：php, jquery

这条线是什么意思

```
$country = isset($_GET['country']) && !empty($_GET['country']) ? urlencode($_GET['country']) : 'us'; 
```

我也想要它的jquery版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:20:52.363

尽可能简单，

这个意思 ，

> 如果设置了 $_GET['country'] 并且它不为空
> $country = urlencode($_GET['country']);
> 否则
> $国家=我们

这些被称为 if else 三元运算符 ..here is the [link](http://davidwalsh.name/php-shorthand-if-else-ternary-operators) to read more about it

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:32:47.580

```
<script type="text/javascript">
    var country = 'us';
    var getQueryPairs = location.search.split('&');
    var getQueryVar;
    for (var i = 0; i < getQueryPairs.length; i++) {
      getQueryVar = getPairs[i].split('=');
      if (getQueryVar[0] == 'country' && getQueryVar[1]) country = getQueryVar[1];
    }
    alert(country);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:20:45.093

这意味着如果确保您有 $_GET['country'] 超全局变量并且它不为空。如果不是，那么它将对该变量进行 urlencoding，否则将设置 $country = us。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:22:53.610

意思是：如果`country`已经通过 GET 传递到页面并且`country`里面有东西，它应该设置`$country`为适当的国家代码。它将默认为“我们”。

您将无法单独通过 jQuery 执行此操作，因为`$_GET`您无法在客户端使用数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T05:43:36.573

这不是您想要回答的问题的答案，但它确实回答了您标题中的问题（在一定程度上）。万一有人最终在这里寻找它，有一个名为 phpQuery 的 php 库，它试图模拟 jQuery 样式语法（尤其是方法链接）和基于选择器的 DOM 操作。正如评论中所指出的，PHP 是一种服务器端语言，因此您不会完全拥有在实际 jQuery 中演示的浏览器控制级别；但是如果你主要做 jQuery 开发客户端，我可以看到为你的服务器端代码使用类似的语法可能更有用/更舒适/更容易。

顺便说一句，当这篇文章第一次让我想起这个库时，我以为它被称为 pQuery - google 告诉我这是一个类似的项目，它可以让 perl 更加 jQuery-y。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T05:20:05.727

那只是测试提交的名为 country 的表单元素是否已设置且不为空，如果是则设置国家，否则设置默认值“我们”

这是一个三元 IF 语句，如果为真，则将冒号左侧的代码分配给 $country，如果为假，则将右侧的代码分配给 $country 变量。

$this = (1 == 1) ? "它是一个" : "它不是一个";

# java - 函数必须使用前缀 -jsp

> ID：16161515
> 
> 赞同：0
> 
> 时间：2013-04-23T05:18:45.677
> 
> 标签：java, jsp, tomcat, jelastic

我在这里问了类似[的问题 当未指定默认命名空间时，函数“”必须与前缀一起使用](https://stackoverflow.com/questions/9312476/the-function-must-be-used-with-a-prefix-when-a-default-namespace-is-not-spec)。但我的背景不同。

我有一个 Spring Web 应用程序，其中包含一个 jsp，它从控制器获取创建的对象的数组列表（使用帮助类），并且这些对象值呈现在一个表中。我的Controller、Jsp页面、Helping类如下

控制器

```
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/", method = RequestMethod.GET)
        public String home( Model model) {
            logger.info("Welcome home! the client locale is ");

            ArrayList<TrendSign> ts=new ArrayList<TrendSign>();
             for(int i=0;i<5;i++)
             {
                TrendSignDAO actor = new TrendSignDAO();
                actor.setPhrase("phrase"+i);
                actor.setHitCount(i);
                 actor.setWordCount(i);
                 actor.setCharCount(i);
                 ts.add(actor);
             }

            model.addAttribute("ts", ts );

            return "home";
    }

} 
```

JSP页面如下：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
    <html>
    <head>
        <title>Home</title>
        </head>
    <body>
        <table border=1>
            <thead>
                <tr>
                    <th>Phrase</th>
                    <th>hit count</th>
                    <th>wordcount</th>
                    <th>char count</th>
                </tr>
            </thead>
            <tbody>
                <c:forEach var="row" items="${ts}">
                    <tr class="odd gradeX">
                         <td><c:out value="${row.getPhrase()}"/></td>
                         <td><c:out value="${row.getHitCount()}"/></td>
                         <td><c:out value="${row.getWordCount()}"/></td>
                         <td><c:out value="${row.getCharCount()}"/></td>
                    </tr>
                </c:forEach>
        </tbody>
    </table>
    </body>
</html> 
```

助学班

```
public class TrendSign {

 private String phrase;
 private int hitCount;
 private int wordCount;
 private int charCount;

 public void setPhrase(String phrase)
 {
     this.phrase = phrase;
 }
 public String getPhrase()
 {
     return (this.phrase);
 }
 public void setHitCount(int hitCount)
 {
     this.hitCount = hitCount;
 }
 public int getHitCount()
 {
     return (this.hitCount);
 }
 public void setWordCount(int wordCount )
 {
     this.wordCount = wordCount;
 }
 public int getWordCount()
 {
     return (this.wordCount);
 }
 public void setCharCount(int charCount )
 {
     this.charCount = charCount;
 }
 public int getCharCount()
 {
     return (this.charCount);
 }

public TrendSignDAO() {
    // TODO Auto-generated constructor stub
     this.phrase = "Phrase";
     this.hitCount = 5;
     this.wordCount = 1;
     this.charCount = 1;
}

} 
```

这在我的本地主机（java 6 Tomcat 6）中工作正常但是当我部署到 jelastic（java 6 Tomcat 6）时，出现错误 WEB-INF/views/home.jsp(26,8) 函数 getPhrase 必须与未指定默认命名空间时的前缀。在 jelastic 上访问网络应用程序的 URL 是[http://lovedmusic.jelastic.servint.net/](http://lovedmusic.jelastic.servint.net/)。谁能帮我调试一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:27:52.547

您的 DAO 看起来不太像 DAO，但尽管如此，使用 JSP-EL，您应该能够在没有方法语法的情况下访问您的 getter。只需使用属性名称：

```
<td><c:out value="${row.phrase}"/></td>    
<td><c:out value="${row.hitCount}"/></td>
<td><c:out value="${row.wordCount}"/></td>
<td><c:out value="${row.charCount}"/></td> 
```

# c - 为什么我不能传入变量来实现交换函数？

> ID：16161516
> 
> 赞同：-2
> 
> 时间：2013-04-23T05:18:47.603
> 
> 标签：c, function, pointers

我刚开始学习C，我很困惑**为什么我必须使用指针来实现交换功能？**

交换不起作用的版本：

```
#include <stdio.h>

void swap(int i, int j) {
   int t = i;
   i = j;
   j = t;
}

int main() {
   int a = 23, b = 47;
   printf("Before. a: %d, b: %d\n", a, b);
   swap(a,b);
   printf("After.  a: %d, b: %d\n", a, b);
   return 0;
} 
```

交换工作的版本：

```
#include <stdio.h>

void swap(int *i, int *j) {
   int t = *i;
   *i = *j;
   *j = t;
}

void main() {
   int a = 23, b = 47;
   printf("Before. a: %d, b: %d\n", a, b);
   swap(&a, &b);
   printf("After . a: %d, b: %d\n", a, b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:21:41.657

默认情况下，函数参数在 C 和 C++ 中**按值传递。**这基本上意味着在函数中接收到传递参数的副本。此副本与传递的变量不同，并且此副本的任何更改都不会反映回传递的参数。

所以你的第一个片段实际上交换了传递参数的副本，而不是参数本身。

为了将交换反映回传递的参数，您需要**通过引用传递**，在 C 中，这是通过使用指针来实现的。参数的地址被传递给函数并且函数实际上对传递给它的内存地址进行操作，即：传递值的原始变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:31:13.177

```
swap(a,b);

void swap(int i, int j) {
   int t = i;
   i = j;
   j = t;
} 
```

上面的代码失败是因为变量 i 和 j 是函数的**局部**`swap`变量，这意味着变量的作用域仅限于函数`swap`，一旦函数终止，它们的生命就会消失。

一种解决方法是使用按地址传递，如下面的代码所示...

```
swap(&a,&b);

void swap(int* i, int* j) {
   int t = *i;
   i* = *j;
   j* = t;
} 
```

现在变量 i 和 j 是指向原始变量 a 和 b 的指针，这意味着它们代表 a 和 b 进行操作，因此即使指针在函数内的范围有限，它们也能够间接修改变量 a 和湾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:32:24.017

你为什么要背靠背展示两个程序？那是两个独立的程序。第一个程序，尽管有所有关于`void main()`和东西的谬误，打算（**但不是，因为它处理局部变量**）通过使用一个函数来交换值传递整数变量的副本和。`a`这`b`是`pass-by-value`。事实上，C只有局部变量值的变化不会显示在.`pass-by-value``printf()``swap()``main()`

```
void swap(int i, int j) {
int t = i;
i = j;
j = t;
printf("After. a:%d,b:%d",i,j);
} 
```

他可能声称使用的第二个程序`pass-by-reference`本质`pass-by-value`上是传递变量地址副本的地方，而不是实际地址本身。再说一次，尽管它是不可移植的怪癖`void main()`，但它确实交换了`a`和的值`b`。

```
void swap(int *i, int *j) {
int t = *i;
*i = *j;
*j = t;
} 
```

**输出**之前。a:23 b:47 之后。一个：47 乙：23

我运行它。`CodeBlocks`但是你的作者`Mr.Void Main`一定建议你使用 16 位 Turbo C 是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:05:36.407

你不能这样交换：

```
void swap(int i, int j) {
   int t = i;
   i = j;
   j = t;
} 
```

因为`i`和`j`是按值传递的。这意味着它与局部变量相同`tmp`。因此，修改`i`and`j`并不会实际修改您传递的变量，因为`i`and 的本地副本`j`不存在于 function 之外`swap()`。

正因为如此，如果你需要修改`i`和`j`from `main()`，你必须传递到和的`swap()`地址。这就是为什么以下版本实际上有效的原因。`i``j``main()`

```
void swap(int *i, int *j) {
    int t = *i;
    *i = *j;
    *j = t;
} 
```

**编辑：**为了更好地理解这些东西，我想向你推荐斯坦福讲座`Programming Paradigms`，可以在 YouTube 上找到。

# jquery - jQuery onclick 不隐藏 div

> ID：16161518
> 
> 赞同：1
> 
> 时间：2013-04-23T05:19:02.693
> 
> 标签：jquery

```
$(document).ready(function(){
    /* The following code is executed once the DOM is loaded */

  $('.box-wrap').bind("click",function(){
        $(this).find('.card').addClass('flipped').bind('click',function(){
          $(this).removeClass('flipped');
        });
    });  
      return false;
}); 
```

如果我重新单击该 div 它可以工作，但是第二次单击另一个 div 整个脚本不起作用。控制台或错误中没有任何迹象。我是 jQuery 新手，无法弄清楚这一点。

```
$(this).find('.card').addClass('flipped').mouseleave(function(){ 
```

这段代码有效，但不是我要找的。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:20:58.660

您想要该`.toggleClass`方法（[在此处](http://api.jquery.com/toggleClass/)描述）。现在，在您第二次单击该框后，它有两个事件处理程序 - 一个用于`flipped`在单击时添加类，另一个用于删除它。它执行第一个，然后执行另一个，然后添加一个新的处理程序以在每次新单击时将其删除。

您可以通过使用单个处理程序大大简化这一点，如下所示：

```
$(document).ready(function(){
  $('.box-wrap').bind("click",function(){
        $(this).find('.card').toggleClass('flipped');
  });  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:22:09.730

你可以简单地做：

```
$(this).find('.card').toggleClass("flipped"); 
```

IE

```
$('.box-wrap').bind("click",function(){
   $(this).find('.card').toggleClass("flipped");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:54:22.250

```
$(document).ready(function(){
    /* The following code is executed once the DOM is loaded */

  $('.box-wrap').click(function(){
        $(this).find('.card').addClass('flipped');

        });
    },
      function(){
      $(this).find('.card').removeClass('flipped');
}); 
```

# c# - 如何限制最终用户下载文件？

> ID：16161521
> 
> 赞同：0
> 
> 时间：2013-04-23T05:19:20.823
> 
> 标签：c#, asp.net, .net

我有一个项目要求，限制从最终用户下载文件（视频、pdf、doc、ppt 文件类型）。最终用户只能从我的网站查看，但他们无法下载该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:25:40.193

由于您提到 asp.net，您将通过网络提供文件。
视频、pdf、doc和ppt文件下载到客户端。然后浏览器启动相应的应用程序，以便用户可以查看它们。

如果您以这些格式提供数据，用户将能够保存它们。
您无法阻止用户下载它们。

对于视频等格式，您可以将它们流式传输，从而使用户难以保存它们。
Ppt 和文档可以在基于 html 的站点内查看器中进行转换和显示。这样你可以告诉浏览器不要缓存内容，但用户仍然可以保存 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:32:51.553

有几种方法可以使它难以下载但不能阻止是

1）禁用右键单击您的网页（您不能完全做到这一点，但至少会让普通用户更难）

2）动态创建URL路径，并在一段时间后使其失效，使最终用户难以获取和下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:25:56.353

您可以尝试使用以下 javascript 函数：

```
function checkButton(){
    if(event.button != 1){
        document.oncontextmenu=new Function ("return false") ;
        //if NS6
        if (window.sidebar){
            document.oncontextmenu=disableselect
        }
    }
} 
```

此功能会禁用您的另存为功能。

**有关其参考，请参阅：**

[http://discuss.joelonsoftware.com/default.asp?dotnet.12.592427.15](http://discuss.joelonsoftware.com/default.asp?dotnet.12.592427.15)

# iis-7 - IIS 7 错误 500 ASP 中的内部服务器错误

> ID：16161525
> 
> 赞同：2
> 
> 时间：2013-04-23T05:19:53.890
> 
> 标签：iis-7, asp-classic

我有一个通过 IIS 运行的 ASP Web 应用程序...如果我从我的系统以表单形式插入数据..应用程序连接到 SQL Server 2008 并插入数据..我能够插入...如果我也这样做通过我的网络系统处理..我收到错误“ **500 - 内部服务器错误。您要查找的资源有问题，无法显示**”..如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:36:59.787

首先，您必须激活详细的服务器错误（例如，请参阅[IIS7 上的经典 ASP：拒绝将错误发送到浏览器上的 500 内部服务器错误](https://stackoverflow.com/questions/1453791/classic-asp-on-iis7-refusing-to-send-errors-to-browser-on-500-internal-server-e?rq=1)），以查看导致错误的原因。

它*可能*是数据库错误，但也可能是脚本语法错误或其他问题。经典的 ASP 没有被编译，所以即使是简单的语法错误也只有在执行代码时才会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:59:40.000

首先检查您是否可以使用您在 asp 应用程序中提供的凭据成功连接到 SQl2008。然后检查用户是否有权将数据插入数据库。

当上述任何一种情况为真时，通常会出现此错误。祝你好运

# jquery-ui - 在数据加载时显示进度条 Knockoutjs

> ID：16161526
> 
> 赞同：1
> 
> 时间：2013-04-23T05:20:01.870
> 
> 标签：jquery-ui, knockout.js, progress-bar

在将 JqueryUI 的加载进度条集成到从 KO 的 Observable 数组加载数据时，我需要一些帮助。我创建了一些 JsFiddles

```
fiddle for KnockOut : http://jsfiddle.net/neodescorpio/HksCA/

fiddle for JqueryUI Progress bar : http://jsfiddle.net/neodescorpio/NAs3V/ 
```

我需要将这两者结合起来，以便在加载敲除时显示带有百分比的进度条，并在数据加载 100% 后消失。如果使用任何其他进度条，我可以接受。我只想显示一个进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:58:24.317

您应该进行自定义绑定以从淘汰绑定中操作 jQuery 进度条。例如类似的东西（非常做作的例子）：

```
ko.bindingHandlers.progress = {
   init: function(element, valueAccessor) {
      $(element).progressbar({
         value: 0
      });
   },
   update: function(element, valueAccessor) {
      var val = ko.utils.unwrapObservable(valueAccessor());
      $(element).progressbar("value", parseFloat(val));
   }
}; 
```

*现在，您可以使用进度*绑定从 div 创建进度条并通过可观察值（应该返回一个数字或表示数字的字符串，范围从 1 到 100）命令它- 例如：

```
<div data-bind="progress: percentComplete"></div> 
```

我更新你的小提琴来展示一个例子：http: [//jsfiddle.net/HksCA/2/](http://jsfiddle.net/HksCA/2/)

# hadoop - hbase集群需要多个数据节点

> ID：16161531
> 
> 赞同：0
> 
> 时间：2013-04-23T05:20:17.423
> 
> 标签：hadoop, hbase

根据hbase官方教程，配置hbase分布式集群时，需要在hbase-sit.xml文件中配置hbase.rootdir属性指向hdfs集群地址。并且，所有 hbase 数据都将保存在 hdfs 上。在这种情况下，hbase 集群是否需要多个数据节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:16:26.890

Hbase 与您拥有的 DN 数量无关。但是，DN 数量越多，您获得的性能和可用性就越好，因为复制实际上发生在 HDFS 级别。因此，如果您只有 1 个节点，您的所有 Hbase 数据都将发送到那里，如果该服务器已关闭，您就处于茫茫人海中。不过，拥有多个 DN 有几个优点，例如机器上的负载相对于单台机器上的所有负载更小且更平衡、更高的并行性、高可用性等。

# codeigniter - 如何检查用户在特定时间内是否处于非活动状态？

> ID：16161534
> 
> 赞同：0
> 
> 时间：2013-04-23T05:20:40.437
> 
> 标签：codeigniter, logout

如果他在特定时间内不活动，我想注销用户。在配置文件中使用 sess_expiration，它给出了从登录而不是从非活动状态开始的时间。那么如何使用 codeigniter 来做到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:24:47.473

当用户像这样登录时，您可以将时间存储在会话中：

```
$_SESSION['loginTime'] = time(); 
```

并且当用户在系统中进行任何操作时，检查用户是否超过了指定的时间

```
if($_SESSION['loginTime'] < time()+$yourtime){
    logout();
}else{
    $_SESSION['loginTime'] = time();
} 
```

# python - 调用在python中接受多个输入参数的perl脚本

> ID：16161553
> 
> 赞同：3
> 
> 时间：2013-04-23T05:21:55.480
> 
> 标签：python

在将 perl 脚本与主要 python 脚本集成时需要帮助。

我有一个名为 perl 的脚本：`GetHostByVmname.pl`

```
./GetHostByVmname.pl –server 10.0.1.191 –username Administrator –password P@ssword1 –vmname RHTest 
```

我需要从我的 python 主脚本中调用上面的脚本。在下面尝试，但不起作用：

```
param = "--server 10.0.1.191 --username Administrator --password P@ssword1 --vmname RHTest"

pipe = subprocess.Popen(["perl", "./GetHostByVmname.pl", param ], stdout=subprocess.PIPE) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:36:00.967

您可以提供一个 shell 命令

```
Popen("./GetHostByVmname.pl –server 10.0.1.191 ...", ...) 
```

或者一个数组，其中第一个元素是程序，其余的是 args。

```
Popen(["./GetHostByVmname.pl", "–server", "10.0.1.191", ... ], ...) 
```

目前，您正在执行与以下 shell 命令等效的操作：

```
perl ./GetHostByVmname.pl '–server 10.0.1.191 ...' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:41:56.153

我认为拆分字符串会更好

```
./GetHostByVmname.pl –server 10.0.1.191 –username Administrator –password P@ssword1 –vmname RHTest 
```

到一个列表，然后用这个列表作为第一个参数调用 Popen。例子：

```
import shlex, subprocess
args_str = "./GetHostByVmname.pl –server 10.0.1.191 –username Administrator –password P@ssword1 –vmname RHTest"
args = shlex.split(args_str)
p = subprocess.Popen(args, stdout=subprocess.PIPE) 
```

# asp.net - 如何删除asp.net中的只读文件夹，c#

> ID：16161555
> 
> 赞同：0
> 
> 时间：2013-04-23T05:22:09.967
> 
> 标签：asp.net

我想删除只读文件夹。我确实喜欢这个

```
 //Remove Read-only for the Folder
File.SetAttributes(folderpath, File.GetAttributes(folderpath) & ~FileAttributes.ReadOnly);
//Delete Folder
      FileInfo myfileinf = new FileInfo(folderpath);
        myfileinf.Delete(); 
```

但我收到此错误“拒绝访问路径 'E:\Working Folder\RPEssential\RPEssential\ResourcePlus-PL\RDLReports\t'”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:10:30.960

正如我之前评论的那样，问题是您在删除文件时尝试删除文件夹。

您应该使用 Directory.Delete 方法删除文件夹。

在下面的链接中有一个很好的例子来说明如何使用它

[http://msdn.microsoft.com/en-au/library/fxeahc5f(v=vs.100).aspx](http://msdn.microsoft.com/en-au/library/fxeahc5f(v=vs.100).aspx)

```
public static void Main() 
{
    // Specify the directories you want to manipulate.
    string path = @"c:\MyDir";
    string subPath = @"c:\MyDir\temp";

    try 
    {
        // Determine whether the directory exists.
        if (!Directory.Exists(path)) 
        {
            // Create the directory.
            Directory.CreateDirectory(path);
        }

        if (!Directory.Exists(subPath)) 
        {
            // Create the directory.
            Directory.CreateDirectory(subPath);
        }

        // This will succeed because subdirectories are being deleted.
        Console.WriteLine("I am about to attempt to delete {0}", path);
        Directory.Delete(path, true);
        Console.WriteLine("The Delete operation was successful.");

    } 
    catch (Exception e) 
    {
        Console.WriteLine("The process failed: {0}", e.ToString());
    } 
    finally {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:37:43.723

拒绝只读的原因可能有很多。文件夹在使用吗？在控制台中打开？运行可执行文件？所有这些事情你都应该检查。即使它有权限，如果该目录正在使用中，它也不允许你删除它。

# ios - 在 DidselectRowAtIndexPath 中应用条件

> ID：16161556
> 
> 赞同：0
> 
> 时间：2013-04-23T05:22:10.977
> 
> 标签：ios, uitableview

我有一个 UITableView，其中包含不同类型的文件和文件夹，对，我设置了一个方法，一旦单击一行，就会传递给另一个视图控制器。我需要的是，一旦单击一行，它就会检查该行中的文件类型，然后在此基础上连接到不同的 uiviewcontroller。

我的 UiTableView 每个单元格中有两个项目一个单元格标签和单元格详细信息文本标签

DetailTextLabel 包含主题类型，即文件夹（用于文件夹）和文件（用于 jpeg. 、 png. 等文件）

我想在 didselectrowatindexpath 中使用 if 条件来区分文件和文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:28:09.707

您可以通过检查`cell.detailTextLabel.text`以下值来做到这一点：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.detailTextLabel.text;

    if ([str isEqualToString:@"Folder"])
    {
        // Open Folder Detail View. For Example:
        FolderViewController* objVC = [[FolderViewController alloc] initWithNibName:@"FolderViewController" bundle:nil];
        [self.navigationController pushViewController:objVC animated:YES];
    }
    else if ([str isEqualToString:@"File"])
    {
        // Open File Detail View. For Example:
        FileViewController* objVC = [[FileViewController alloc] initWithNibName:@"FileViewController" bundle:nil];
        [self.navigationController pushViewController:objVC animated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:41:19.053

在 .h 文件中

```
 #import "FolderViewController.h"
    #import "FileViewController.h"

    @interface mainViewController : UIViewController {
            FolderViewController *folderViewObj;
            FileViewController *fileViewObj;
    } 
```

在 .m 文件中

```
 - (void)viewDidLoad {
            [super viewDidLoad];

            folderViewObj = [[FolderViewController alloc] initWithNibName:@"FolderViewController" bundle:nil];
            fileViewObj = [[FileViewController alloc] initWithNibName:@"FileViewController" bundle:nil];
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

            UITableViewCell * cell = [tblObj cellForRowAtIndexPath:indexPath];
            NSString *lblText = cell.DetailTextLabel.text;

            if ([lblText isEqualToString:@"Folder"])  {
                    [self.navigationController pushViewController:folderViewObj animated:YES];
            }
            else if ([lblText isEqualToString:@"File"])
            {
                    [self.navigationController pushViewController:fileViewObj animated:YES];
            }
    }

    -(void) dealloc {
            [folderViewObj release];
            [fileViewObj release];
            [super dealloc];
    } 
```

使用这种方式，当用户可以选择 uitableview 的行时，FolderViewController 和 FileViewController 的对象只创建一次，而不是所有时间。

# oracle - 如何创建触发器以从单独的表中删除相应的元组？

> ID：16161569
> 
> 赞同：0
> 
> 时间：2013-04-23T05:23:24.230
> 
> 标签：oracle, triggers, sqlplus

例如，您删除了一个表中的一行，它链接到相应表中的条目。此触发器应在从第一个表中删除元组时从第二个表中删除元组（假设它们的外键匹配的位置）。换句话说，级联删除。假装无法将级联删除选项添加到表中。

我正在使用 Oracle/SQL Plus，这是我的尝试：

```
CREATE OR REPLACE TRIGGER delCascade
    BEFORE DELETE ON student
    REFERENCING OLD AS oldRow
    FOR EACH ROW    
BEGIN
    DELETE FROM taking
    WHERE taking.studentnum = oldRow.studentnum;
END;
/ 
```

我不断收到警告：

```
Warning: Trigger created with compilation errors. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:27:58.333

尝试这个

```
CREATE OR REPLACE TRIGGER delCascade
    BEFORE DELETE ON student
    REFERENCING OLD AS oldRow
    FOR EACH ROW    
BEGIN
    DELETE FROM taking
    WHERE taking.studentnum = :oldRow.studentnum;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T02:58:14.323

给定一个

```
STUD(rollno, name, birthdate)
RESULT(rollno, marks) 
```

1）编写一个触发器，`RESULT`如果​​学生记录被删除，则从表中删除所有相关记录。

```
create or replace trigger del_trg
after delete on stud_trg
for each row
begin
    if deleting then
        delete from result where stud_trg.rollno=result.rollno;
    end if;
end; 
```

# regex - 提取字符向量中两个特定单词之间的所有单词

> ID：16161573
> 
> 赞同：7
> 
> 时间：2013-04-23T05:23:45.217
> 
> 标签：regex, string, r

有没有更有效的方法？没有我怎么能做到这一点`stringr`？

```
txt <- "I want to extract the words between this and that, this goes with that, this is a long way from that"

library(stringr)
w_start <- "this"
w_end <- "that"
pattern <- paste0(w_start, "(.*?)", w_end)
wordsbetween <- unlist(str_extract_all(txt, pattern))
gsub("^\\s+|\\s+$", "", str_sub(wordsbetween, nchar(w_start)+1, -nchar(w_end)-1))
[1] "and"                "goes with"          "is a long way from" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T05:32:42.470

这是我在 qdap 中使用的一种方法：

**使用 qdap：**

```
library(qdap)
genXtract(txt, "this", "that")

## > genXtract(txt, "this", "that")
##         this  :  that1         this  :  that2         this  :  that3 
##                " and "          " goes with " " is a long way from " 
```

**没有附加包：**

```
regmatches(txt, gregexpr("(?<=this).*?(?=that)", txt, perl=TRUE))

## > regmatches(txt, gregexpr("(?<=this).*?(?=that)", txt, perl=TRUE))
## [[1]]
## [1] " and "                " goes with "          " is a long way from " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:50:44.407

Here's another rough attempt using `strsplit`, though it can probably be refined further:

```
txtspl <- unlist(strsplit(gsub("[[:punct:]]","",txt),"this|that"))
txtspl[txtspl!=" "][-1]

#[1] " and "                " goes with "          " is a long way from " 
```

# android - MapView 应该是 Android 中的 View 还是 ViewGroup？

> ID：16161579
> 
> 赞同：2
> 
> 时间：2013-04-23T05:24:21.157
> 
> 标签：android, google-maps, maps, customization

在过去的一个月里，我用地图API写了一个应用程序，例如Google Map api和我国家的其他api。它们封装得很好，易于使用。然后我想弄清楚这个api是如何构建和组织的。

在这个过程中，我发现了三个开源项目，osmand、mapsforge 和 osmdroid。随着学习的进行，我遇到了一些问题。

![帮助解释](https://i.stack.imgur.com/oQvps.png)

图片是安卓谷歌地图应用程序的截图，它显示了一个基本地图、一些标记和一个信息窗口。众所周知，用户可以触摸标记和信息窗口，并且可以响应触摸手势。

* * *

第一个问题来了。

**1.标记和信息窗口是View/ViewGroup还是刚刚绘制在底图上的图片元素？哪个选择更好？**

*   在 osmand 中，标记是图片元素，而信息窗口是自定义对话框。

![奥斯曼](https://i.stack.imgur.com/viWWr.png)

*   在 mapsforge 中，只有标记，标记是一个图片元素。

![地图锻造](https://i.stack.imgur.com/oNQIk.png)

*   在osmdroid中，它们都是图片元素。

![osmdroid](https://i.stack.imgur.com/y2Z1x.png)

* * *

至于标记和信息窗口的触摸事件。

*   在osmand中，用户可以在地图上长按，会出现信息窗口。用户也可以通过触摸窗口做进一步的事情。当长按事件激活时，其中一个图层会拦截该事件并通过那些抽象层进行调度，直到遇到可以消耗它的特定层。经过复杂的计算和处理，该点会出现信息窗口。标记可以稍后放置，触摸不响应。

*   mapsforge 没有为标记实现触摸事件。

*   至于 osmdroid ，我还没有深入研究。

这三者的marker和信息窗口的触摸事件句柄实现不如google map api和我之前使用的其他api那么完整。

* * *

这是我的想法？

如果它们是视图，则 MapView 应该是 ViewGroup 或者是容器（ViewGroup）和 BaseMap（View）的组合。

*   好处：也许处理触摸事件更容易。
*   缺点：地图移动时要考虑好MapView与它们的相对关系。

如果是图片元素，MapView 可以只是 View（或 ViewGroup）。

*   好处：上面所说的相对关系不是问题
*   缺点：触摸事件要计算好，处理好。

目前：

*   [Mapsforge 中的 MapView 是 ViewGroup](https://code.google.com/p/osmand/source/browse/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java)

*   [OsmandMapTileView 类似于 Osmand 中的 MapView 是 SurfaceView](https://code.google.com/p/osmand/source/browse/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java)

*   [osmdroid 中的 MapView 是 ViewGroup](https://code.google.com/p/osmdroid/source/browse/trunk/osmdroid-android/src/main/java/org/osmdroid/views/MapView.java)

那么第二个问题来了：</p>

**2.我们应该如何选择Marker和MapView的基类组合？每种组合的优点和缺点是什么？**

[在 mapsforge google 组中的讨论](https://groups.google.com/forum/?fromgroups=#!topic/mapsforge-dev/gvoMh5jhm5E)

***如果您分享您的想法，我将不胜感激！***

# android - android 中高 iowait 的 ANR

> ID：16161580
> 
> 赞同：3
> 
> 时间：2013-04-23T05:24:24.220
> 
> 标签：android, iowait

我正在运行 youtube 应用程序并获得 ANR 并且设备响应缓慢。

我得到 iowait 64%

```
E ActivityManager: 98% TOTAL: 12% user + 20% kernel + 64% iowait + 0% irq + 1.1% softirq 
```

那么我们如何识别导致iowait的应用程序或者它可以通过内核端的IO调度来处理。

# php - 如何解决 dns_get_record 返回误报的问题

> ID：16161585
> 
> 赞同：3
> 
> 时间：2013-04-23T05:25:12.757
> 
> 标签：php

我一直在尝试使用 dns_get_record($domain) 之类的函数来检查域的有效性。问题是，如果它不是一个有效的域，它会将它附加到我所在站点 IP 的域前面。我不能依赖任何 gethostbyname、dns_get_record 等函数，因为它们不能像我期望的那样工作。

如果域不存在，我希望这些函数中的任何一个都返回失败的结果。它不是。我注意到使用 'ping' 命令与 PHP 函数的作用相同，但 'host' 命令按预期工作。

我编写了一个 C 程序来使用 gethostbyname，它按预期工作。与 python 'socket.gethostbyname' 相同。他们都在使用无效域的查找时失败。

PHP函数发生了什么？为什么他们的行为也不像我预期的那样，并且在无效的域名上失败了？

在域名为 example.com 的主机上使用以下内容给出以下内容。

```
dns_get_record('something')

Array
    (
        [0] => Array
            (
                [host] => somthing.example.com
                [type] => A
                [ip] => some ip address
                [class] => IN
                [ttl] => 600
            )

    ) 
```

这不是我想要的。如果有错误，请提供错误链接，谢谢

更新：

正如@Barmar 正确指出的那样，这是设置 DNS 记录的方式。我发现在我的家用电脑上，它上面有 PHP，函数 gethostbyname() 和朋友完全按预期工作。

这就引出了一个问题，即当您的 DNS 设置为启用通配符时，如何可靠地检查域是否有效。我发现的唯一方法是使用命令行收费并从 PHP 调用它们。我不喜欢这个选项，但它是我目前唯一的一个，而且它不是一个经常调用的操作，幸运的是。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T01:06:13.760

您可以通过在要搜索的域上附加句点来禁用本地域的自动搜索，*例如：*

```
dns_get_record("something.") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:35:54.687

这是因为您的域中有通配符记录。当名称查找失败时，会在附加您的本地域的情况下重试（基于 中的`domain`or`search`选项`/etc/resolv.conf`）。通常这会失败，因此整个查找都会失败。但是，如果您的域中有通配符，则重试成功，并将作为结果返回。

# jquery - Jquery Cycle 插件 - 幻灯片图像在鼠标悬停 IE8 上移动

> ID：16161586
> 
> 赞同：0
> 
> 时间：2013-04-23T05:25:17.067
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我对 jquery 还很陌生，并且在 jquery 的循环插件方面遇到了一个非常令人沮丧的问题。

出于某种奇怪的原因，在 Win-XP 上的 IE8 中（在 IE8 Win-7 上似乎可以正常工作）如果我将鼠标移到幻灯片图像上，整个幻灯片会向下跳约 80 像素，然后跳回到它的意思当我将鼠标移开时。

这是测试站点： [http ://www.petsdomain.com.au/natures_test/index.html](http://www.petsdomain.com.au/natures_test/index.html)

奇怪的是它也发生在 Win8 IE-10 上。我对此感到很困惑。一如往常，IE让我心痛！

有帮手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:32:52.333

设置`position: absolute`您的`ul.nav`应该可以解决您的问题。您也应该将其宽度设置`100%`为。

# wordpress - WordPress、网站管理和测试

> ID：16161590
> 
> 赞同：0
> 
> 时间：2013-04-23T05:25:32.957
> 
> 标签：wordpress, testing, project-management

我有一个非常新的问题。主要是关于自托管 Wordpress 的正确程序。

我是一名初级网页设计师，当然——为了练习——我提出重新设计我的一些朋友网站。

我也有自己的自托管 Wordpress 网站。

如何设置它，以便我可以生成多个站点作为我站点的子目录 - 供我的朋友查看我的设计（为每个站点使用不同的主题）。

如果他们喜欢我所做的 - 然后我想将它迁移到他们的主机上。

我确实有一个使用 MAMP 的 Wordpress 本地实现——但我的大多数朋友都在另一个州——我必须能够通过网络向他们展示设计。此外，一些 Wordpress 插件（如 Jetpack）只能在实时站点上运行。

请告知正确的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:09:41.863

最简单的方法是将 WordPress 安装在您要编码的每个站点的 Web 服务器上的子目录中，并使用它自己的 MySQL 数据库。使用多站点没有任何麻烦，并且在准备上线时易于备份和移植到新的虚拟主机。

`http://your-url.com/friend-site-directory/`

# android - 如何在simpleadapter中添加复选框

> ID：16161600
> 
> 赞同：1
> 
> 时间：2013-04-23T05:26:22.163
> 
> 标签：android

如何在我的 gridview 中添加复选框？下面是我的代码，但我想添加复选框并根据选中的复选框执行操作我该怎么做？如何在简单适配器中添加复选框？因为 SimpleAdapter 是默认适配器我如何更改它们？请帮帮我

```
 SimpleAdapter simpleAdapter;
 GridView gridView;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

File photos = new File(getFilesDir(),"photos");
photos.mkdirs();

File root1 = new File("/data/data/com.newsoftwares.folderlock/files/");

currentParent = root1;
currentFiles = root1.listFiles();

currentFilePath = new String[currentFiles.length];
int count = 0;

for(File f:currentFiles)
{   
    currentFilePath[count] = f.getAbsolutePath();
    count++;
}

 gridView =(GridView)findViewById(R.id.grid);
 gridView.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View view, int 
    position,long id) {

    if(currentFiles[position].isDirectory())
    {
        root = new File("/data/data/com.myexample.folderlock
     /files/"+FileName(currentFilePath[position])+"/");

        Log.e("Root first",root+ " ");

        currentFiles = root.listFiles();

        inflateListView(currentFiles);
    }
    else if(currentFiles[position].isFile())
    {
          inflateListView(currentFiles);    
               }

    private void inflateListView(File[] files){

 List<Map<String,Object>> listItems = new ArrayList<Map<String,Object>>();

 for(int i=0;i<files.length;i++)
  {       
    Map<String, Object> listItem = new HashMap<String, Object>();

    if(files[i].isDirectory())
    {
        listItem.put("icon", R.drawable.folder);
    }
    else
    {
        listItem.put("icon", R.drawable.file);
    }

    listItem.put("fileName", files[i].getName());
    listItems.add(listItem);
}

simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new String[] 
 {"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
gridView.setAdapter(simpleAdapter); 
```

# android - 如何在android中生成扩展文件？

> ID：16161611
> 
> 赞同：2
> 
> 时间：2013-04-23T05:27:37.907
> 
> 标签：android, apk, apk-expansion-files

我有超过 50MB 的项目。我在 raw 文件夹中有一些图像和视频。如何生成扩展文件？我已经浏览了开发人员文档，但对我来说并不清楚。它令人困惑。任何人都可以在这方面帮助我。

我应该从项目中复制原始文件夹并将其粘贴到桌面上，然后使用谷歌文档中给出的名称格式压缩整个文件夹吗？例如：我的包名称为“com.my.package”，版本代码为 1 和主扩展文件。我是否必须压缩整个原始文件夹并将名称命名为“main.1.com.my.package.zip”

创建后，我需要从项目文件夹中删除原始文件夹，然后我需要更改项目中的代码以从存储位置访问文件。我怎样才能做到这一点？

我使用以下代码访问原始文件夹中的文件。如何更改此设置以访问存储在 SD 卡中的扩展文件中的文件？

```
String path1 = "android.resource://" + getPackageName() + "/" + R.raw.e4; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:39:48.043

尽量减小尺寸。您可以在发布模式下启用 proguard。ProGuard 工具通过删除未使用的代码并使用语义模糊名称重命名类、字段和方法来缩小、优化和混淆您的代码。**结果是更难以逆向工程的更小尺寸的 .apk 文件**。

您可以查看下面的链接。

[http://developer.android.com/google/play/expansion-files.html#ZipLib](http://developer.android.com/google/play/expansion-files.html#ZipLib)

从 ZIP 文件中读取

使用 APK 扩展 Zip 库时，从 ZIP 读取文件通常需要以下内容：

```
// Get a ZipResourceFile representing a merger of both the main and patch files
ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(appContext,
    mainVersion, patchVersion);

// Get an input stream for a known file inside the expansion file ZIPs
InputStream fileStream = expansionFile.getInputStream(pathToFileInsideZip); 
```

[http://developer.android.com/google/play/expansion-files.html#StorageLocation](http://developer.android.com/google/play/expansion-files.html#StorageLocation)

[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

编辑：

在链接中查看教程

[http://ankitthakkar90.blogspot.in/2013/01/apk-expansion-files-in-android-with.html](http://ankitthakkar90.blogspot.in/2013/01/apk-expansion-files-in-android-with.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:29:00.230

您可以将文件压缩成一个文件，如果超过 2 GB，则压缩成 2 个文件（每个文件最多 2GB）。

另一种方法是您创建自己的算法，将所有文件放在一个文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T12:43:29.787

有两种类型的扩展文件，主要和补丁。您可以将所有数据（图像/文件）放在一个文件夹中。将其命名为 `main.1.com.my.package`. 这里 main 表示它的主要扩展文件。如果它的补丁比名称它`patch.1...`
1 是清单中的版本代码而不是包名称 压缩此文件并使用 .obb 扩展名重命名该压缩文件。从末尾删除 .zip，现在您的扩展文件已准备好名称 `main.1.com.my.package.obb`

您必须使用市场上的虚拟应用程序上传此文件。比您必须使用编码下载该文件（您可以从下载库中获取示例`sdk/extras/google/play_apk_expansion`）
此文件在移动设备中的位置下载`mnt/sdcard/android/obb`

您可以使用该文件并解压缩文件并将其保存在任何其他位置并使用它。

如果您使用的是扩展文件，您将无法再从 Raw 文件夹中获取文件。

我自己已经成功地做到了这一点。希望它可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T07:02:42.173

以下是在 Android 中设置扩展文件所需的步骤：

1.  首先，打开Android SDK Manager，展开Extras并下载：

    *   Google Play 许可库包
    *   Google Play APK 扩展库包
2.  在 AndroidManifest.xml 中声明以下权限

    ```
    <!-- Required to access Google Play Licensing -->  
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />

    <!-- Required to download files from Google Play -->  
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- Required to keep CPU alive while downloading files (NOT to keep screen awake) -->  
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- Required to poll the state of the network connection  
        and respond to changes -->
    <uses-permission  
        android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- Required to check whether Wi-Fi is enabled -->  
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

    <!-- Required to read and write the expansion files on shared storage -->  
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
    ```

3.  集成库

    *   将下载器库的源代码复制`<sdk>/extras/google/play_apk_expansion/downloader_library/src`到您的项目中。
    *   将源代码复制`<sdk>/extras/google/play_licensing/library/src`到您的项目中。
    *   将源代码复制`<sdk>/extras/google/google_market_apk_expansion/zip_file/`到您的项目中。
4.  现在，创建一个名为扩展的新包并`DownloaderService.java`在包内创建。

    ```
    // DownloaderService.java
    public class DownloaderService extends com.google.android.vending.expansion.downloader.impl.DownloaderService {  
        public static final String BASE64_PUBLIC_KEY = "<<YOUR PUBLIC KEY HERE>>"; // TODO Add public key
        private static final byte[] SALT = new byte[]{1, 4, -1, -1, 14, 42, -79, -21, 13, 2, -8, -11, 62, 1, -10, -101, -19, 41, -12, 18}; // TODO Replace with random numbers of your choice

        @Override
        public String getPublicKey() {
            return BASE64_PUBLIC_KEY;
        }

        @Override
        public byte[] getSALT() {
            return SALT;
        }

        @Override
        public String getAlarmReceiverClassName() {
            return DownloaderServiceBroadcastReceiver.class.getName();
        }
    } 
    ```

5.  创建`DownloaderServiceBroadcastReceiver.java`扩展`BoradcastReceiver`，如果需要下载文件，它将启动下载服务。

    ```
    // DownloaderServiceBroadcastReceiver.java
    public class DownloaderServiceBroadcastReceiver extends android.content.BroadcastReceiver {  
        @Override
        public void onReceive(Context context, Intent intent) {
            try {
                DownloaderClientMarshaller.startDownloadServiceIfRequired(context, intent, DownloaderService.class);
            } catch (PackageManager.NameNotFoundException e) {
                e.printStackTrace();
            }
        }
    } 
    ```

6.  如果扩展文件不可用，则从您的活动开始下载

    ```
    Intent launchIntent = MainActivity.this.getIntent();
    Intent intentToLaunchThisActivityFromNotification = new Intent(MainActivity.this, MainActivity.this.getClass());
    intentToLaunchThisActivityFromNotification.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intentToLaunchThisActivityFromNotification.setAction(launchIntent.getAction());

    if (launchIntent.getCategories() != null) {
        for (String category : launchIntent.getCategories()) {
            intentToLaunchThisActivityFromNotification.addCategory(category);
        }
    }

    // Build PendingIntent used to open this activity from notification
    PendingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this, 0, intentToLaunchThisActivityFromNotification, PendingIntent.FLAG_UPDATE_CURRENT);
    // Request to start the download
    int startResult = DownloaderClientMarshaller.startDownloadServiceIfRequired(this, pendingIntent, DownloaderService.class); 
    ```

有关完整的详细信息和代码，请查看[如何设置 Android 应用程序以支持扩展文件](http://sapandiwakar.in/how-to-set-up-android-app-to-support-expansion-files/)。

# sql - 如何在选择查询中放置数组

> ID：16161612
> 
> 赞同：0
> 
> 时间：2013-04-23T05:27:39.933
> 
> 标签：sql, database, vb6

我试图通过在 Select 查询中放置一个数组来填充网格视图。每次我尝试这个我都会得到一个错误：运行时错误：3705“对象打开时不允许操作”。我明白为什么我会收到这个错误，但是有没有其他方法可以在选择查询中放置一个数组。我正在使用的代码如下：

```
Public con1 As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim q As String
Dim i As Integer
Dim trainIds(30) As String
Public Sub con()
Set con1 = New ADODB.Connection
con1.Open ("tts123")
End Sub

Public Sub opentable(sql As String)
    Set rs = New ADODB.Recordset
    rs.Open sql, con1
End Sub

Private Sub Command1_Click()
    trainIds(0) = "HM2"
    trainIds(1) = "HM2"
    trainIds(2) = "HM1"
    For i = 0 To 2
          q = "Select * from TrainTable Where TrainId ='" & trainIds(i) & "'"
          rs.CursorType = adOpenStatic
          rs.CursorLocation = adUseClient
          rs.LockType = adLockOptimistic
          rs.Open q, con1
          If rs.RecordCount > 0 Then
              Set DataGrid1.DataSource = rs
          Else
                MsgBox "No record found "
                rs.Close
           End If
     Next
End Sub

Private Sub Form_Load()
      Set con1 = New ADODB.Connection
      con1.ConnectionString = "Provider = Microsoft.Jet.OLEDB.4.0; Data Source =   E:\VBnewProject\TrainTimeSchedule"
con1.Open ("dsn=tts123")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:51:49.167

您应该使用 IN 进行查询

```
Select * from TrainTable Where TrainId IN {List of train ids to check} 
```

另请查看使用 SqlParameter 对象传递参数，您当前的代码打开了 SQL 注入，请查看[此](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)示例

# c# - 使用 Response.Redirect 时附加 URL

> ID：16161613
> 
> 赞同：0
> 
> 时间：2013-04-23T05:27:48.087
> 
> 标签：c#, asp.net

我有一个网址说`/Registration/GetName.aspx/?language=English`

当我单击同一页面上的 Asp.net 按钮并说 `Response.Redirect("CheckLoginName.aspx");`

它给了我一个奇怪的网址

```
/Registration/GetName.aspx/CheckLoginName.aspx 
```

我应该怎么办

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:31:49.120

您应该在重定向中使用“~/”

所以你的代码看起来像这样

```
Response.Redirect("~/CheckLoginName.aspx"); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:15:12.540

您应该删除`/`查询字符串之前的尾随，因为它没有任何作用。您的网址应该是`/Registration/GetName.aspx?language=English`. 另一种选择是让`Response.Redirect("../CheckLoginName.aspx");`这也应该工作。

我认为使用相对路径的解决方案更好，因为它与位置无关。如果您将这两个文件移动到另一个 URL，则无需更改代码。

# ember.js - 根据模型选择视图类型

> ID：16161614
> 
> 赞同：3
> 
> 时间：2013-04-23T05:27:51.217
> 
> 标签：ember.js

我有一个我想用 Ember 显示的项目列表。对于这些项目中的每一个，我希望能够根据每个模型中的“message_type”字段动态选择用于显示它的视图类型。

我目前有这样的东西，它非常糟糕并且不可扩展：

```
{{#each message in controller}}

  {{#if message.isImage}}
    {{view App.ImageMessageView}}
  {{/if}}

  .... 

  {{#if message.isVideo}}
    {{view App.VideoMessageView}}
  {{/if}}

{{/each}} 
```

如何在 Ember 中根据模型的字段动态选择视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T12:50:58.480

这是一个类似的问题，展示了两种方法：[Collection of objects of multiple models as the iterable content in a template in Ember.js](https://stackoverflow.com/questions/15866899/collection-of-objects-of-multiple-models-as-the-iterable-content-in-a-template-i/15869936#15869936)

## 根据属性或其类型呈现项目

我知道有两种方法可以做到这一点：

1.  为每个对象添加一个布尔属性并使用把手`{{#if}}`来检查该属性并呈现正确的视图
2.  扩展`Ember.View`并使用计算属性根据正在渲染的对象类型切换渲染哪个模板（基于[使用 Ember.js 按模型类型/对象值选择视图模板](https://stackoverflow.com/questions/9999064/ember-js-select-view-template-by-model-type-object-value)）

### 方法一

JS：

```
App.Post = Ember.Object.extend({
  isPost: true
});

App.Bookmark = Ember.Object.extend({
  isBookmark: true
});

App.Photo = Ember.Object.extend({
  isPhoto: true
}); 
```

模板：

```
<ul>
  {{#each item in controller.stream}}
      {{#if item.isPost}}
        <li>post: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
      {{#if item.isBookmark}}
        <li>bookmark: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
      {{#if item.isPhoto}}
        <li>photo: {{item.name}} {{item.publishtime}}</li>
      {{/if}}
  {{/each}}
   </ul> 
```

### 方法二

JS：

```
App.StreamItemView = Ember.View.extend({
  tagName: "li",
  templateName: function() {
    var content = this.get('content');
    if (content instanceof App.Post) {
      return "StreamItemPost";
    } else if (content instanceof App.Bookmark) {
      return "StreamItemBookmark";
    } else if (content instanceof App.Photo) {
      return "StreamItemPhoto";
    }
  }.property(),

  _templateChanged: function() {
        this.rerender();
    }.observes('templateName')
}) 
```

模板：

```
<ul>
{{#each item in controller.streamSorted}}
    {{view App.StreamItemView contentBinding=item}}
{{/each}}
 </ul> 
```

[JSBin 例子](http://jsbin.com/asimel/3/edit)——未排序的列表用方法一渲染，排序后的列表用方法二渲染

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:18:00.707

它可能需要更多的思考，但这是我很快想到的：

```
var get = Ember.get,
    isGlobalPath = Ember.isGlobalPath,
    normalizePath = Ember.Handlebars.normalizePath;

var getProp = function (context, property, options) {
    if (isGlobalPath(property)) {
        return get(property);
    } else {
        var path = normalizePath(context, property, options.data);
        return get(path.root, path.path);
    }
};

Ember.Handlebars.registerHelper('detect', function (definition, instance, options) {
    Ember.assert("You must pass exactly two argument to the detect helper", arguments.length === 3);
    Ember.assert("You must pass a block to the detect helper", options.fn && options.fn !== Handlebars.VM.noop);

    var path = '_detect_' + definition.replace('.', '_').toLowerCase();
    context = (options.contexts && options.contexts[0]) || this;
    definition = getProp(context, definition, options);
    instance = getProp(context, instance, options);
    context.set(path, definition.detectInstance(instance));

    return Ember.Handlebars.helpers.boundIf.call(options.contexts[0], path, options);
}); 
```

然后你可以使用这样的助手：

```
{{#detect App.Definition instance}}
    DETECTED
{{else}}
    NOT DETECTED
{{/detect}} 
```

# listview - 我可以为 Marionette 的复合视图创建 2 个 itemViewContainers 吗？

> ID：16161622
> 
> 赞同：0
> 
> 时间：2013-04-23T05:28:12.340
> 
> 标签：listview, marionette, two-column-layout

我正在实现一个 2 列布局视图，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/71Z2X.png)

然而，当我定义我的木偶复合视图时，似乎只允许使用一个 itemViewContainer。

我可以做这样的事情吗？

```
class List.Muse extends Marionette.ItemView
  template: JST["backbone/templates/muses/index"]

class List.Muses extends Marionette.CompositeView
  template: JST["backbone/templates/muses/list"]
  itemView: List.Muse
  itemViewContainer: ".left_col"
  itemViewContainer: ".right_col"

//list template
.muses_container.two_col_wrapper.hide
  .left_col
  .right_col
  .clearfix
.loading_container 
```

本质上，我想在我的列表模板中的“左”和“右”列中交替插入缪斯。这可以在复合视图中定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:34:07.780

为此，您应该使用 Layout 而不是 CompositeView。布局允许您定义任意数量的区域，然后在每个区域中独立显示一个 ItemView（或任何其他类型的 View）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:35:33.970

您要在此处使用的`Marionette`视图构造是[`Layout`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.layout.md). 您可以将 a`Layout`视为`ItemView`具有内置区域用于将子视图渲染到的区域。像这样的东西就是你所追求的（在 JS 中。对不起，我真的不知道 CS）：

```
List.Muses = Marionette.Layout.extend({
  template: JST["backbone/templates/muses/list"],
  regions : {
    leftColRegion : ".left_col",
    rightColRegion : ".right_col"
  },

  onRender : function () {
    this.leftColRegion.show(new List.Muse({model : someMuseModel}));
    this.rightColRegion.show(new List.Muse({model : someOtherMuseModel}));
  }
}); 
```

# php - SQL 按日期、时间排序

> ID：16161627
> 
> 赞同：-3
> 
> 时间：2013-04-23T05:29:02.143
> 
> 标签：php, sql

我的数据库中有（时间）列，它是 DATETIME 类型，我需要存储在注册时从用户捕获的时区。

我使用以下内容来存储日期和时间。

```
date_default_timezone_set('Etc/GMT-3');
$time =  date('D j\, M Y h:i:s a'); 
```

我需要通过使用获取数据库中的最新日期

```
$query = "SELECT * FROM user ORDER_BY date, time WHERE ID='$_SESSION[email]'"; 
```

这是对的吗 ？

# javascript - ng-view 与 ng-animate 一起执行指令两次

> ID：16161629
> 
> 赞同：9
> 
> 时间：2013-04-23T05:29:03.707
> 
> 标签：javascript, angularjs, ng-animate

当我从 angularjs 1.1.4 玩 ng-view 和 ng-animate 时，我注意到指令被执行了两次。一次用于进入屏幕的视图中的元素，再次用于离开屏幕的视图中的元素（当视图进入屏幕时，该指令已经为元素执行）。

据我了解，指令应该只对进入屏幕的元素执行，而不是对离开的元素执行。还是我错过了什么？

```
<div ng-app="app">
    <div ng-controller="AppCtrl">
        <div class="btn-group">
            <a class="btn btn-primary" href="./">foo</a>
            <a class="btn btn-primary" href="bar/">bar</a>
        </div>
        <span class="btn btn-success">{{count}}</span>
        <div class="view" ng-view ng-animate="{enter: 'view-enter', leave: 'view-leave'}"></div>
    </div>
</div> 
```

```
var app = angular.module('app', []);

app.config(function ($routeProvider, $locationProvider) {
    $routeProvider
        .when('/', {
            template: '<h1 color>foo</h1>'
        })
        .when('/bar', {
            template: '<h1 color>bar</h1>'
        })
        .otherwise({
            redirectTo: '/'
        });

    $locationProvider.html5Mode(true);
});

app.controller('AppCtrl', function ($scope) {
    $scope.count = 0;
    $scope.incrementCount = function () {
        $scope.count++;
    }
});

app.directive('color', function () {
    return {
        restrict: 'A',
        link: function ($scope, $element, $attrs) {
            // executed once the app inits but
            // twice when you change the view
            $scope.incrementCount();
        }
    }
}); 
```

我已经为此[http://jsfiddle.net/mediastuttgart/f4FPj/1/设置了一个jsfiddle](http://jsfiddle.net/mediastuttgart/f4FPj/1/)

如您所见，应用程序启动时计数器显示为 1。但如果您开始导航，计数器会增加 2。

干杯迈克尔

**编辑**

当然，一种解决方法可能是向元素添加一个类并在指令中检查它——但我想这不是应该完成的方式。

```
link: function ($scope, $element, $attrs) {
    if ($element.hasClass('processed')) return;
    $element.addClass('processed');
    $scope.incrementCount();
} 
```

[http://jsfiddle.net/mediastuttgart/f4FPj/2/](http://jsfiddle.net/mediastuttgart/f4FPj/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T12:27:36.340

它将为指令处理的每个事件触发指令。看到这个小提琴，如果你删除离开事件，它只会触发一次。

```
<div class="view" ng-view ng-animate="{enter: 'view-enter'}"></div> 
```

[http://jsfiddle.net/WmSP8/1/](http://jsfiddle.net/WmSP8/1/)

注意文档说“event1 和 event2 属性是指特定于已分配指令的动画事件。”（[http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngAnimate](http://code.angularjs.org/1.1.4/docs/api/ng.directive:ngAnimate)）

它本质上是说您可以使用并非所有指令中都存在的自定义事件来构建指令，并且动画器服务将允许您的指令知道当这些事件在您的指令中触发时要运行哪些动画。但是，这意味着您的指令可能会为您的 ng-animate 属性中处理的每个事件执行。因此，当您同时配置进入和离开时，指令都会为它们执行。

我实际上并没有编写任何代码来测试这一点，这只是我对文档的解释，jsfiddle 似乎证实了一般前提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T05:53:08.157

angular 1.1.5 似乎解决了这个问题。猜猜这个提交已经修复了它`ngView: accidentally compiling leaving content (9956baed)` [https://github.com/angular/angular.js/commit/9956baedd73d5e8d0edd04c9eed368bd3988444b](https://github.com/angular/angular.js/commit/9956baedd73d5e8d0edd04c9eed368bd3988444b)

# asp.net - 在 IIS 中部署网站时出错：IListSource 不包含任何数据源

> ID：16161632
> 
> 赞同：0
> 
> 时间：2013-04-23T05:29:19.260
> 
> 标签：asp.net

我在 IIS 6 上部署我的网站时遇到问题。这是使用 Visual Studio 2010 完成的，当我检查网站时，这是我得到的错误。

“/”应用程序中的服务器错误。

IListSource 不包含任何数据源。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Web.HttpException：IListSource 不包含任何数据源。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[HttpException (0x80004005): IListSource 不包含任何数据源。] System.Web.UI.DataSourceHelper.GetResolvedDataSource(Object dataSource, String dataMember) +12495275 System.Web.UI.WebControls.ReadOnlyDataSource.System.Web.UI。 IDataSource.GetView(String viewName) +52 System.Web.UI.WebControls.Repeater.ConnectToDataSourceView() +248 System.Web.UI.WebControls.Repeater.GetData() +18 System.Web.UI.WebControls.Repeater.CreateControlHierarchy (Boolean useDataSource) +374 System.Web.UI.WebControls.Repeater.OnDataBinding(EventArgs e) +164 Default2.Page_Load(Object sender, EventArgs e) in c:\Users\Nino\Documents\Visual Studio 2010\WebSites\VipMall \Default.aspx.cs:18 System.Web.UI.Control.LoadRecursive() +71 System.Web.UI.Page.ProcessRequestMain(布尔包括StagesBeforeAsyncPoint,布尔型 includeStagesAfterAsyncPoint) +3178

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034

# php - 如何仅使用 PhpExcel Codeplex 仅读取指定的列

> ID：16161633
> 
> 赞同：0
> 
> 时间：2013-04-23T05:29:23.073
> 
> 标签：php

我正在使用来自的 php 库

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

用于读取 .xls、.xlsx 和 .csv 。

而且我还必须处理大尺寸文件。它给出了内存不足的问题。我已经增加了 php.ini 中的内存限制。

我不确定，但据我所知，内存消耗大小取决于 excel 中的单元格数量。

在我的excel文件中没有。行非常大，但我只需要读取 5-6 列。所以我只想读取那些指定的列，这样空白列就不会消耗脚本的内存。

所以我的问题是，我怎样才能通过使用这个库只读取指定的列。

例如：- 如果我只想阅读前五列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:19:42.753

我使用 phpexcel 和 10MB 文件，它工作正常。但是，如果你想指定范围，你可以去[http://www.contao-docs.org/docs/PHPExcel/html/index.html](http://www.contao-docs.org/docs/PHPExcel/html/index.html)。我想你需要

```
PHPExcel_Worksheet::rangeToArray 
```

# java - Foreach 参数性能

> ID：16161636
> 
> 赞同：0
> 
> 时间：2013-04-23T05:29:43.617
> 
> 标签：java, performance, foreach

我想知道使用方法调用作为获取集合的 foreach 参数的性能。让我们看一个例子：

```
for (Entry<K, V> entry : map.entrySet()) {
    doing.stuff();
} 
```

我想JVM在开始循环之前只会调用一次map.entrySet（），获取第一个元素，获取他的迭代器并对其进行迭代，不再调用map.entrySet（），或者如果数组只是使用本地创建的迭代它int 迭代器（或类似的东西），但我不知道 JVM 是如何工作的，所以我想确定 - 它是否以这种方式工作，或者最好在循环之前保存集合并将其作为本地 var 传递，而不是调用循环内的吸气剂？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T05:34:33.650

来自[Java 语言规范：增强的 for 语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)：

> 增强的 for 语句具有以下形式：

```
 for ( FormalParameter : Expression ) Statement 
```

> 增强的 for 语句等效于以下形式的基本 for 语句：

```
 for (I #i = Expression.iterator(); #i.hasNext(); ) {
        VariableModifiersopt TargetType Identifier =
            (TargetType) #i.next();
        Statement
    } 
```

基于此，该`map.entrySet()`集合将仅被检索**一次**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:49:18.453

```
for(Object e : collection) {
} 
```

相当于

```
Iterator i = collection.iterator();
while(i.hasNext()) {
    Object e = i.next();
} 
```

所以它涉及 Iterator 对象的创建。此外 Iterator.next() 涉及对并发修改的额外检查。因此，如果`ArraList`通过索引访问元素可能更有效

```
for(int i = 0; i < list.size(); i++) {
    Object e = list.get(i);
} 
```

# jquery - 获取文档中的元素并添加子元素

> ID：16161643
> 
> 赞同：0
> 
> 时间：2013-04-23T05:30:11.830
> 
> 标签：jquery, html, css

`item-group-button`我的DOM 层次结构中调用了一组元素。我使用以下 jQuery 代码获取上述指定元素并将新内容附加到元素的内部 HTML。

```
 function getMajorGroups(){
    var element = $(".item-group-button");
    $.get("http://localhost:9157/getAllMajorGroups", function(data){
        if(data.majorGroups.length != 0){
            $('.panel_list').empty();

        }
        for(var i = 0; i < data.majorGroups.length; i++){
            element[i].appendChild("<h3>" + data.majorGroups[i] + "</h3>");
            $('.panel_list').append(element);
        }
    });
} 
```

元素代码如下。

```
<div class="item-group-button">
    <!-- Item Group Selection Button -->
        <h3>Beverage</h3>
</div> 
```

但是当我运行代码时，元素不会被清除，并且新内容也会附加当前内容。

我正在尝试做的是连接到 Web 服务并根据收到的数据填充 html 元素。如果有人有更好的建议，请赐教！

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:42:28.863

您必须在控制台中遇到错误，`appendChild`在 jquery 中没有。

`$('.panel_list').appendChild(element);`

应该

`$('.panel_list').append(element);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:45:36.777

我认为你应该使用`.clone()`，因为从我在你的代码中看到的，你`element`一次又一次地追加，产生一些重复的值。

```
function getMajorGroups(){
  var element = $(".item-group-button");
  $.get("http://localhost:9157/getAllMajorGroups", function(data){
    if(data.majorGroups.length != 0){
      $('.panel_list').empty();
    }
    for(var i = 0; i < data.majorGroups.length; i++){
      var clone = element.clone();
      clone.append("<h3>" + data.majorGroups[i] + "</h3>");
      $('.panel_list').append(clone);
    }
  });
} 
```

# url - 请求 URI 太大 :: IBM HTTP Server

> ID：16161645
> 
> 赞同：0
> 
> 时间：2013-04-23T05:30:19.770
> 
> 标签：url, uri, ibmhttpserver

我们正在使用 IBM HTTP Server 7.0 版

我在网页上收到以下错误消息

> **请求 URI 太大**
> 
> **请求的 URL 的长度超过了此服务器的容量限制**
> 
> **IBM_HTTP_Server 在 WIN2K862 端口 80**

[LimitRequestLine](http://httpd.apache.org/docs/2.2/mod/core.html#limitrequestline)有用吗？

我需要做哪些更改来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T13:19:01.850

LimitRequestLine 显然需要增加。

# android - 无线电流与 android 中的原始流不匹配？

> ID：16161647
> 
> 赞同：0
> 
> 时间：2013-04-23T05:30:21.600
> 
> 标签：android, android-mediaplayer, audio-streaming, shoutcast

我正在使用简单`MediaPlayer`的流式传输无线电流..

```
try {
     MediaPlayer media = new MediaPlayer();
     media.setAudioStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
     media.setDataSource("http://indiespectrum.com:9000");
     media.prepareAsync();
     media.start();
   }        
catch(Exception e)
  {
   //Getting Exception
  } 
```

这工作正常，但播放的音频有点慢，然后原始音频流式传输，即如果一首歌曲最初是在 2:15，则媒体播放器在 2:05 播放。大约有 10 秒的差异。为什么会有差异，可能是什么完成删除这个？

# ios - iOS：动态添加 Picker Ui 元素

> ID：16161648
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:30:24.020
> 
> 标签：ios, uiview, picker

我是 iO 的新手，并尝试将选取器 UI 元素动态添加到 UI。在类 - UIPickerView 中，我没有看到任何将选择器添加到视图的方法。有没有人试过这样做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:35:08.757

您将选择器添加到视图中，就像您要添加的 UIView -> addSubview 方法一样。

```
UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0,200,320,200,)]];
pickerView.delegate = self;
[self.view addSubview:pickerView]; 
```

不要忘记设置它的委托并实现它以实现它的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:41:53.113

首先将内存分配给您的选择器视图。

```
UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 265, 320, 216)]; 
```

然后设置委托和数据源。

```
pickerView.dataSource=self;
pickerView.delegate=self; 
```

之后将选择器视图添加到您的主视图。

```
[self.view addSubview:pickerView]; 
```

之后你应该实现pickerview的方法。

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{    
     return [array count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
        return [array objectAtIndex:row];
} 
```

我希望这会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:34:41.590

和其他的一样，你需要 alloc+initWithFrame。

```
UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 100, 0, 0)]; 
```

然后将其添加到您的目标视图。

```
[yourView addSubview:pickerView]; 
```

您还需要设置它的委托和数据源，这将在选择器视图中显示您的所有元素。

```
pickerView.dataSource=self;
pickerView.delegate=self; 
```

和所有其他定制为：

```
pickerView.showsSelectionIndicator=YES; 
```

* * *

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
  return [array objectAtIndex:row];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:39:07.580

> 我没有看到任何将选择器添加到视图的方法

UIPickerView 是 UIView 的子类，因此您可以使用与将任何子视图添加到视图中相同的方法，即`-addSubview:`，如下所示：

```
UIPickerView *picker = [[UIPickerView alloc] initWithFrame:theFrame];
picker.delegate = self;
picker.dataSource = self;
[self.view addSubview:picker]; 
```

我在这里假设该代码位于视图控制器中，该控制器既充当了选择器的代表和数据源。

# forms - Symfony2 更新表单集合中的特定字段

> ID：16161649
> 
> 赞同：1
> 
> 时间：2013-04-23T05:30:25.280
> 
> 标签：forms, symfony, collections

我有一个有趣的问题。我在 stackoverflow 和谷歌中找不到任何解决方案。我有一个实体`User`并且`User`有一些元数据。所以我创建了一个`UserMeta`Entity 和`UserMetaValue`. 在用户表单中有很多选项卡。我在标签中使用了这些元数据。其中一些在第一个选项卡中，其中一些在其他选项卡中。所有选项卡都有自己的形式。当我在活动选项卡上绑定表单时，活动选项卡元数据更新，其他更改为 NULL。

**StudentPersonalType.php**

```
namespace ATL\UserBundle\Form\Type;

use ATL\CommonBundle\Utils\Shortcut;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form\FormBuilderInterface;

class StudentPersonalType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options){
        $builder->add("first_name", null, array(
                "label" => "İsim",
                "required" => true,
                "attr" => array(
                    "class" => "span10"
                )
            ))->add("last_name", null, array(
                "label" => "Soyisim",
                "required" => true,
                "attr" => array(
                    "class" => "span10"
                )
            ))->add("username", null, array(
                "label" => "Öğrenci Numarası",
                "required" => true,
                "attr" => array(
                    "class" => "span10"
                )
            ))->add("email", null, array(
                "label" => "Email",
                "required" => true,
                "attr" => array(
                    "class" => "span10"
                )
            ))->add('metas', 'collection', array(
                'label' => "Metas",
                'type' => new UserMetaType()
            ));
    }

    public function getName(){
        return "personal";
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver){
        $resolver->setDefaults(array(
            "data_class" => "ATL\UserBundle\Entity\User"
        ));
    }
} 
```

**StudentEducationType.php**

```
namespace ATL\UserBundle\Form\Type;

use ATL\CommonBundle\Utils\Shortcut;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form\FormBuilderInterface;

class StudentEducationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options){
        $builder->add('metas', 'collection', array(
                'label' => "Metas",
                'type' => new UserMetaType(),
                'by_reference' => false
            ));
    }

    public function getName(){
        return "education";
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver){
        $resolver->setDefaults(array(
            "data_class" => "ATL\UserBundle\Entity\User"
        ));
    }
} 
```

**和树枝**

```
 <div id="personal-info" class="tab-pane row-fluid active">
       <form style="margin:20px 0 0 0;" class="ajaxForm form-horizontal form-row-seperated" action="{{ formAction }}">
            {{ form_row(form.first_name) }}
            {{ form_row(form.last_name) }}
            {{ form_row(form.email) }}
            {{ form_row(form.username) }}
            {% for meta in form.metas %}
                {% if meta.value.vars.label in formValues.personal %}
                    {{ form_widget(meta) }}
                {% endif %}
            {% endfor %}
            {{ form_row(form._token) }}
            <div class="form-actions" style="margin-bottom:0;">
                <button class="btn blue" type="submit"><i class="icon-ok"></i> Kaydet</button>
            </div>
        </form>
    </div>
    <div id="education-info" class="tab-pane row-fluid">
        <form style="margin:20px 0 0 0;" class="ajaxForm form-horizontal form-row-seperated" action="{{ formAction }}">
            {% for meta in educationForm.metas %}
                {% if meta.value.vars.label in formValues.education %}
                    {{ form_widget(meta) }}
                {% endif %}
            {% endfor %}
            {{ form_row(educationForm._token) }}
            <div class="form-actions" style="margin-bottom:0;">
                <button class="btn blue" type="submit"><i class="icon-ok"></i> Kaydet</button>
            </div>
        </form>
    </div> 
```

我通过使用 IF 语句在 twig 文件中检查集合字段来过滤集合字段。

我再次问我的问题，我怎样才能在同一页面中使用不同形式的元而不影响其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:59:26.710

您已经完成了过滤不相关字段以进行渲染的一半工作。但是您还需要过滤掉与表单绑定无关的字段。

当您将请求绑定到表单时，它期望**每个** 实体的值，因为集合`UserMeta`中的所有实体都有一个字段。`UserMetaType`您需要删除所有与`UserMetaType`您提交的值之一不对应的表单。最好有一个`FormEvents::PRE_BIND`听众。

您可以在表单中看到一个更简单的示例[：避免将 null 设置为未提交的字段](https://stackoverflow.com/questions/11687760/form-avoid-setting-null-to-non-submitted-field)。它对您来说会稍微复杂一些，因为您必须遍历`UserMetaType`表单集合并删除您不想绑定的表单。

# algorithm - 具有以价格和距离为约束的多条路线的节点之间的优化

> ID：16161651
> 
> 赞同：0
> 
> 时间：2013-04-23T05:30:40.493
> 
> 标签：algorithm, graph-algorithm, mathematical-optimization

我正在设计一个 Android 应用程序，我试图在这种情况下找到最佳解决方案：

假设我们在源和目的地之间有几条不同的路线，每条路线都有不同的价格和距离。我们如何才能找到距离和价格都最优的最优路线？

也就是说，如果我们在 S 和 D 之间有 5 条路线 R1、R2、R3、R4、R5

```
distances    R2 30 miles ,        
             R3 40 miles ,                   
             R1 50 miles ,                   
             R5 60 miles ,                   
             R4 70 miles ,                   
             R6 80 miles                  

Price for  R1  $5 , 
           R6  $8 , 
           R3  $9 ,
           R5  $11 ,
           R2  $13 ,
           R4  $15 
```

S和D之间的最佳路线是什么？

我见过像 Dijkstra's 和其他一些像旅行商问题这样的算法，但我无法将它们中的任何一个与此联系起来。

这类问题有一些算法、公式或模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:39:51.837

这可以通过 A*/Dijkstra 算法解决，该算法旨在在给定节点、边及其成本的列表的情况下，在图上找到从 A 到 B 的最佳（最低总成本）路线。

A* 使用贪心方法只找到最佳路径，而 Dijkstra 算法则找到从图上的一个点到其他任何地方的最佳路径。它们基本上是相同的算法，只是应用有点不同。

由于您对最低价格和最低距离都感兴趣，因此您的“成本”应该是一个涵盖这两个方面的数学公式（例如，使用燃油价格将距离转换为价格，然后将其与价格相结合），或者您应该运行每个参数算法两次。

[http://en.wikipedia.org/wiki/A*_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:04:51.267

简短的回答：可能没有单一的最佳解决方案。

长答案：如果有两个相互冲突的目标，例如价格和距离，并且较短的路线是更昂贵的路线，那么实际上所有路线都是最优的。它们被称为[帕累托最优](http://en.wikipedia.org/wiki/Pareto_efficiency)。如果您无法确定此类冲突目标之间的先验可行权重，则必须推迟选择解决方案。但是您可以使用帕累托优势原则来始终获得最小的帕累托最优解集。

帕累托支配将客观空间中两点之间的可能状态分为支配或非支配。当一种解决方案支配另一种解决方案时，它至少在一个目标上更好，而在其他目标上则相同。当两个解决方案是非支配的时，第一个在至少一个目标上更好，但第二个在另一个目标上更好。因此，如果您平等地对待所有目标，则没有先验最优候选者，两者都是最优的。

例如，您经常会看到谷歌地图在询问路线时会显示替代路线。这些路线距离较短，但行驶时间较长。通常它首先选择最快的路线，所以他们的先验选择只是时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:44:17.593

您想找到“**最佳距离和最佳价格组合**”，但是最佳距离和最佳价格可以有两种不同的方式，例如（A，B，C，D），我们想找到从A到D的最佳方式

1.  A --> B，距离 10，价格 10
2.  B --> D，距离 10，价格 10
3.  A --> C，距离 20，价格 5
4.  C --> D，距离 20，价格 5

因此，您可以通过使用两个差异度量来获得两种不同的方式。

但是通过使用一些数学，可以简化这个问题：

```
cost = distance * p1 + price * p2;
// p1 and p2 are some rate that can be learned,guessed .EG, p1 = 0.3, p2 = 0.7 
```

所以使用dij或其他一些图算法来解决这个问题是合适的。

# php - 如何检查字符串中的单字节片假名

> ID：16161654
> 
> 赞同：0
> 
> 时间：2013-04-23T05:30:42.853
> 
> 标签：php

我正在使用双字节日语字符网站，我需要检查用户输入的单字节片假名。在 php 平台上开发的网站。

这是我用来检查 '/[\x{3040}-\x{309F}]/u' 的预匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:49:34.813

# log4j - logger.IsDebugEnabled() 总是返回 false

> ID：16161655
> 
> 赞同：2
> 
> 时间：2013-04-23T05:30:44.750
> 
> 标签：log4j

我是 log4j 的新手，我的 java 应用程序中有以下 log4j.properties 文件我正在 websphere 6.1 中处理这个

## log4j.properties 文件

log4j.rootLogger=信息，控制台

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout

log4j.package_name=调试

但是，如果我只使用一个项目作为我的应用程序的一部分，这是可行的。如果有多个项目并且我想使用日志记录工具，logger.isDebugEnabled() 总是返回 false .. 有人可以为此提出解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:15:13.453

Websphere 对每个 EAR 使用默认的类加载器。如果您有多个 Web 模块或 EJB 模块以及多个用于 log4j 的文件，则类加载器只会加载一个。

请参阅[功能强大、易于使用的日志记录系统](http://websphere.sys-con.com/node/43413)，以在 EAR 中使用多个项目配置 log4j。

```
# Set root logger level to INFO and appender to STDOUT.
log4j.rootLogger=INFO, STDOUT

#------------------------------------STDOUT-----------------------------------#
# STDOUT is set to be a ConsoleAppender.
log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender

# STDOUT uses PatternLayout.
log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
log4j.appender.STDOUT.layout.ConversionPattern=%d %-5p (%c.java:%L).%M - %m%n

log4j.appender.STDOUT.Encoding=UTF-8

#-----------------------------------------------------------------------------#

# Specify the logging level for loggers from other libraries

log4j.logger.org.apache.commons.beanutils.BeanUtils=DEBUG

log4j.logger.org.apache.struts.action=DEBUG

log4j.logger.org.apache.struts.tiles=DEBUG

log4j.logger.org.apache.struts.util.ModuleUtils=DEBUG
log4j.logger.org.apache.struts.util.RequestUtils=DEBUG
log4j.logger.org.apache.struts.util.PropertyMessageResources=ERROR

log4j.logger.com.ibm._jsp=DEBUG 
```

可能您缺少`log4j.logger.`每个特定包的前缀。

[在http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)中查看更多 log4j

# android - 合并两张图片（一张是透明的，没有人脸，第二张图片只是来自sdcard的人脸）

> ID：16161657
> 
> 赞同：1
> 
> 时间：2013-04-23T05:30:48.113
> 
> 标签：android

我有两张图片，一张包含没有脸的身体，一张包含只有脸的图片...

现在我想合并这两个图像......第一个只包含没有脸的身体的图像是因为脸是透明的......

那么我怎样才能检测到透明区域并将脸放在透明区域中呢？

我将两个图像与下面的代码组合在一起..但是将脸放在透明区域上不是正确的方法

我的代码如下，

```
public Bitmap combineImages(Bitmap c, Bitmap s) {
    Bitmap cs = null;

    int width, height = 0;

    if (c.getWidth() > s.getWidth()) {
        width = c.getWidth() + s.getWidth();
        height = c.getHeight();
    } else {
        width = s.getWidth() + s.getWidth();
        height = c.getHeight();
    }

    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

    Canvas comboImage = new Canvas(cs);

    comboImage.drawBitmap(c, 0f, 0f, null);
    comboImage.drawBitmap(s, 0f, 0f, null);

    return cs;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:36:50.063

使用 Canvas 在 android 中合并两个或多个图像，使用下面的代码可以简单地合并图像，首先为要合并的特定图像创建位图。

获取要合并图像的区域的 X 和 Y 轴位置。

```
 mComboImage = new Canvas(mBackground);

   mComboImage.drawBitmap(c, x-axis position in f, y-axis position in f, null);

    mComboImage.drawBitmap(c, 0f, 0f, null);
    mComboImage.drawBitmap(s, 200f, 200f, null);

    mBitmapDrawable = new BitmapDrawable(mBackground);
    Bitmap mNewSaving = ((BitmapDrawable)mBitmapDrawable).getBitmap(); 
```

在 imageview 中设置这个新的位图。imageView.setImageBitmap(mNewSaving);

在此方法中，两个图像位图组合在一个位图中，返回新合并图像的位图。也将此图像保存在 sdcard 上。如下代码

```
public Bitmap combineImages(Bitmap c, Bitmap s) {
    Bitmap cs = null; 

    int width, height = 0; 

    if(c.getWidth() > s.getWidth()) { 
      width = c.getWidth(); 
      height = c.getHeight() + s.getHeight(); 
    } else { 
      width = s.getWidth(); 
      height = c.getHeight() + s.getHeight(); 
    } 

    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 

    Canvas comboImage = new Canvas(cs); 
    comboImage.drawBitmap(c, new Matrix(), null);
    comboImage.drawBitmap(s, new Matrix(), null);

    // this is an extra bit I added, just incase you want to save the new image somewhere and then return the location.

    return cs; 
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T04:59:25.617

这是合并两个位图的正确方法：

```
 public Bitmap combineImages(Bitmap topImage, Bitmap bottomImage) {
        Bitmap overlay = Bitmap.createBitmap(bottomImage.getWidth(), bottomImage.getHeight(), bottomImage.getConfig());
        Canvas canvas = new Canvas(overlay);
        canvas.drawBitmap(bottomImage, new Matrix(), null);
        canvas.drawBitmap(topImage, 0, 0, null);
        return overlay;
    } 
```

# vb.net - 在一个与 / End With block，是否有关键字可以访问 直接地？

> ID：16161661
> 
> 赞同：1
> 
> 时间：2013-04-23T05:31:26.060
> 
> 标签：vb.net, with-statement

在 VB.NET 中，只是想知道是否有一种“this”关键字，可以通过它访问正在使用的对象 in `With <obj>`...`End With`块。例如：

```
With myObj
  .thisMethod()
  someFunction(<this>) ' Where "<this>" refers to myObj
  .thatMethod()
End With 
```

如果可能的话，它会很方便，在那些时候你想通过 myObj 而不离开 With 块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:39:58.910

你不能直接这样做。我能想到的唯一方法是扩展您的对象以包含对自身的引用作为只读属性：

```
Public Class TextBoxExtended
    Inherits TextBox
    Public ReadOnly Property ObjRef As TextBox
        Get
            Return Me
        End Get
    End Property
End Class 
```

然后，您可以在您的 with Block 中执行此操作：

```
With myObj
  .thisMethod()
  someFunction(.ObjRef)
  .thatMethod()
End With 
```

但是，我不得不质疑您为什么要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:36:50.547

我不太关注你。为什么可以引用对象？

例如，如果那是一个文本字段。

```
With textbox1
.visible = true
.text = textbox1.text
End with 
```

那仍然有效。

事实上，这也行得通。

```
.text = .text 
```

也许不是最好的，因为你永远不会看到变化......

让我们再尝试一个相关的...

```
' The function to send to.
Function myfunction(thestring As String) As String
    thestring += "moretext"
    Return thestring
End Function

' The with statement
With Textbox1
.Text = myfunction(.Text)
End With 
```

文本框文本将变为原始文本+“moretext”。

# javascript - Kendo UI：在按钮单击时获取文本框值

> ID：16161662
> 
> 赞同：2
> 
> 时间：2013-04-23T05:31:27.997
> 
> 标签：javascript, mvvm, kendo-ui

我有一个表单，它由几个文本框和一个按钮组成。

我正在使用 Kendo UI MVVM 格式。单击按钮时，如何获取每个文本框的值并将其存储在对象中？

我是否必须使用普通的 jQuery 来获取值，或者是否有其他方法可以从它们中获取值？

谢谢

哈迪克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:51:27.993

Please take a look at these documentation pages:

[http://demos.kendoui.com/web/mvvm/index.html](http://demos.kendoui.com/web/mvvm/index.html)
[http://docs.kendoui.com/getting-started/framework/mvvm/observableobject](http://docs.kendoui.com/getting-started/framework/mvvm/observableobject)
[http://docs.kendoui.com/tutorials/mvvm-in-kendo-ui](http://docs.kendoui.com/tutorials/mvvm-in-kendo-ui)

These pages contain answers to most of the questions you'll have concerning Kendo UI MVVM. It would be silly and presumptuous of me to think that I could explain it better than the qualified and hard working individuals at Telerik that have so painstakingly compiled these documentation pages.

The gist of it is that you need to create an instance of the `kendo.data.ObservableObject` that has properties for the values you are working with. This is your view-model. Then in your markup for your text boxes, include values for the `data-bind` attribute that reference the properties in your observable object. Create a function in your view-model to handle the button's `click` event. Put a `data-bind` attribute in your button that binds the click event to your function. Finally, call `kendo.bind(<element>, <observable object>)`, and that will connect the wires from your markup to your view-model object.

In your click event-handler, you can take the values of the view-model, and insert them into the object you need. You should not need to use "normal jQuery" for anything besides referencing the element to call `bind` on.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T14:55:11.033

您可以使用 JQuery 以这种方式快速检索值：

```
$('#yourTextBoxID').data('kendoMaskedTextBox').value(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-11T16:46:06.463

您可以使用以下代码：

```
$('#yourTextBoxID').val(); 
```

# c# - 具有复杂 ItemType 的 ASP.NET 强类型 DataControl（Repeater）失败

> ID：16161663
> 
> 赞同：2
> 
> 时间：2013-04-23T05:31:31.363
> 
> 标签：c#, asp.net, repeater

我有一个由三个嵌套转发器组成的结构来呈现一个选项卡，然后在这些选项卡下，一些按标题分组的项目。我一直在标准`IEnumerable`类型上成功使用 .NET 4.5 中的强类型数据控件，但这是我第一次使用`Dictionary<T1,T2>`. 尽管如此，我已经看到另一个[Stackoverflow 问题](https://stackoverflow.com/questions/12250777/strongly-typed-data-binding-and-generics)通过声明 as 成功地`Dictionary`使用a as 。`DataSource``ItemType``KeyValuePair<T1, T2>`

**标记：**

```
<asp:Repeater ID="rptTabs" runat="server"
    ItemType="System.Collections.Generic.KeyValuePair<System.String, System.Collections.Generic.Dictionary<System.String, System.Collections.Generic.List<Sitecore.Data.Items.Item>>>">
        <ItemTemplate>
           <%# Item.Key %>
           <%-- ... more repeaters under but they are commented out for now as it's the outer on that is failing --%>
        </ItemTemplate>
</asp:Repeater> 
```

**代码隐藏：**

```
var myDatasource = new Dictionary<string, Dictionary<string, List<Item>>>();
// add some items
rptTabs.DataSource = myDatasource;
rptTabs.DataBind(); 
```

这是我得到的异常/堆栈跟踪：![黄屏](https://i.imgur.com/SiXPHIV.png)

似乎无法构建页面，因为它无法按`string`名称解析 ItemType。问题是，我得到了智能感知，`<%# Item.Key #%>`所以智能感知引擎可以通过字符串名称解析类型，但运行时不能？

注意：我怀疑它的`Sitecore.Data.Items.Item`类型失败，因为我之前在 IEnumerable 中使用过它，这意味着 ItemType 是`Sitecore.Data.Items.Item`.

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:11:04.170

从我所看到的 ItemType 属性不喜欢`<`尖括号`>`。我读过的答案表明，用各自的方括号替换所有尖括号似乎是可行的。

替换以下内容：

*   `<`和`[`
*   `>`和`]`

所以你得到：

```
ItemType="System.Collections.Generic.KeyValuePair[System.String, System.Collections.Generic.Dictionary[System.String, System.Collections.Generic.List[Sitecore.Data.Items.Item]]] 
```

我遇到了一个类似的错误。但是，就我而言，我发现我试图`<%# Item.Property %>`从`HeaderTemplate`.

# javascript - 从字符串中删除空格、点和特殊字符，并在 jQuery 中用连字符替换

> ID：16161671
> 
> 赞同：9
> 
> 时间：2013-04-23T05:32:27.447
> 
> 标签：javascript, jquery

我有一个字符串，其中可能有特殊字符，我必须用连字符替换

```
var str="123.This is,, :ravi" 
```

上面的字符串应该这样转换

```
var newstr="123-This-is-ravi"; 
```

我一直在尝试这个

```
function remove(str){ str.replace(/\./g, "-"); }  //replaces only dots
function remove(str){ str.replace(/ /g, "-"); }   //replaces only spaces 
```

任何人都可以帮我这样做吗？我需要用连字符替换特殊字符。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-23T05:33:55.497

您[应该一次执行所有正则表达式](http://jsfiddle.net/EZVne/)：

```
"123.This is,, :ravi".replace(/[\. ,:-]+/g, "-") 
```

工作示例：

```
$('p').html("123.This is,, :ravi".replace(/[\. ,:-]+/g, "-"));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p></p>
```

这样它就不会在连字符上加倍。

需要注意的一点是，如果值以句点（点）或什至任何空格结尾，那么它将以连字符结尾。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-28T12:04:59.103

您还可以尝试使用该函数全局替换任何非字母数字字符和空格

```
"123.This is,, :ravi".replace(/[\W_]/g, "-") 
```

/[\W_]/g 这将全局消除任何非字母数字字符和空格，并且可以用您在逗号后选择的任何内容替换，

# android - PerfenceyActivity 无法在 TabHost 中显示

> ID：16161682
> 
> 赞同：1
> 
> 时间：2013-04-23T05:32:53.420
> 
> 标签：android, android-tabhost, preferenceactivity, activitygroup

当我在 TabHost 中放置 PreferenceActivity 时，我遇到了问题。PreferenceActivity 无法显示，TabHost 中的其他 Atcitivites 可以正常显示，并且我已经独立测试了 PreferenceActivity，它可以正常显示，我通过 google 搜索了问题，并且我没有得到答案，有人告诉我原因吗？谢谢。我的 TobHostAcitvity 代码是这样的：

```
public class TabsActivity extends Activity {

protected static final String tag = "maps";

Context context = null;

LocalActivityManager manager = null;

ViewPager pager = null;

TabHost tabHost = null;

protected int currentItemId;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_tabs_pager);
    manager = new LocalActivityManager(this, true);
    manager.dispatchCreate(savedInstanceState);
    context = TabsActivity.this;
    initiaTabHost();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

}

private View getView(String id, Intent intent) {
    return manager.startActivity(id, intent).getDecorView();
}

public void initiaTabHost() {

    tabHost = (TabHost) findViewById(android.R.id.tabhost);
    tabHost.setup();
    tabHost.setup(manager);
    Intent it1 = new Intent(context, WifiSearchAcitivity.class);
    it1.putExtra("name", WifiSearchAcitivity.tag);
    Intent it2 = new Intent(context, MapActivity.class);
    it2.putExtra("name", MapActivity.tag);
    Intent it3 = new Intent(context, MyPreferenceActivity.class);
    it3.putExtra("name", MyPreferenceActivity.tag);

    tabHost.addTab(tabHost.newTabSpec("列表").setIndicator("列表")
            .setContent(it1));
    tabHost.addTab(tabHost.newTabSpec("地图").setIndicator("地图")
            .setContent(it2));
    tabHost.addTab(tabHost.newTabSpec("设置").setIndicator("设置")
            .setContent(it3));
    tabHost.setOnTabChangedListener(new OnTabChangeListener() {
        @Override
        public void onTabChanged(String tabId) {
            log(tag, "onTabChange called id= " + tabId);
            if (WifiSearchAcitivity.tag.equals(tabId)) {
                pager.setCurrentItem(0);
            } else if (MapActivity.tag.equals(tabId)) {
                pager.setCurrentItem(1);
            } else if (MyPreferenceActivity.tag.equals(tabId)) {
                pager.setCurrentItem(2);

            }
        }
    });

    pager = (ViewPager) findViewById(R.id.viewpage);
    final ArrayList<View> list = new ArrayList<View>();
    list.add(getView(WifiSearchAcitivity.tag, it1));
    list.add(getView(MapActivity.tag ,it2));
    list.add(getView(MyPreferenceActivity.tag ,it3));

    pager.setAdapter(new PagerAdapter() {

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            /*
             * log(tag, "destroyItem called arg1="+arg1); ViewPager
             * pViewPager = ((ViewPager) arg0);
             * pViewPager.removeView(list.get(arg1));
             */
        }

        @Override
        public void finishUpdate(View arg0) {
            log(tag, "finishupdate called");
        }

        @Override
        public int getCount() {
            // log(tag, "getcount called");
            return list.size();
        }

        @Override
        public Object instantiateItem(ViewGroup arg0, int arg1) {
            log(tag, " instantiateItem called arg1= " + arg1);
            ViewPager pViewPager = ((ViewPager) arg0);
            if (pViewPager.getChildCount() == 0) {// pViewPager.removeAllViews();
                for (View view : list) {
                    pViewPager.addView(view);
                }
            }
            return list.get(arg1);
        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            // log(tag, "isViewfromObject called " + (arg0 == arg1));
            return arg0 == arg1;
        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
        }

        @Override
        public Parcelable saveState() {
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
        }
    });

    pager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {
            log(tag, "onPageChangeListener called " + arg0);
            currentItemId = arg0;
            tabHost.setCurrentTab(arg0);
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
        }
    });

} 
```

}

# r - 使用 RODBC 访问 Northwind.accdb 文件时遇到问题

> ID：16161686
> 
> 赞同：1
> 
> 时间：2013-04-23T05:33:00.080
> 
> 标签：r, ms-access

我正在尝试使用 Northwind.accdb 文件从 R 中演示 SQL 查询。我访问了[http://office.microsoft.com/en-us/templates/desktop-northwind-2007-sample-database-TC001228997.aspx](http://office.microsoft.com/en-us/templates/desktop-northwind-2007-sample-database-TC001228997.aspx)并能够下载 .accdt 文件。我尝试使用以下两行使用 RODBC 创建数据库连接，但都返回 R 无法找到文件的相同错误，即使我确定它的位置（在桌面上）。

以下是我正在使用的代码行：

```
conn <- odbcConnectAccess2007("Nwind.accdt", uid = "", pwd = "")
conn <- odbcConnectAccess2007("Nwind.accdb", uid = "", pwd = "") 
```

我得到的错误输出如下所示：

```
Warning messages:
1: In odbcDriverConnect(con, ...) :
[RODBC] ERROR: Could not SQLDriverConnect
2: In odbcDriverConnect(con, ...) : ODBC connection failed 
```

非常感谢大家可能有的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:46:14.580

在 64 位 Windows 上使用 32 位驱动程序时会出现一些问题。如果您安装了 ODBC 32 位，并附带旧版本的 Office，请确保您正在运行 32 位 R（在工具下使用 RStudio 很容易）。

或者，对于 64 位驱动程序，使用 64 位 R。

# css - 如何仅复制可见文本

> ID：16161688
> 
> 赞同：0
> 
> 时间：2013-04-23T05:33:19.763
> 
> 标签：css, google-chrome, firefox, webkit

如果文本不在显示位置，当用户使用 ctrl-a 选择文本或全选时，是否有任何方法可以说服浏览器复制仅在屏幕上可见的文本。在下面的示例中，我不想为绝对定位的 div 复制文本。

```
<html>
  <body>
    <div style="position:absolute;top:30;left:-300">This should not be copied</div>
    <div>Only this should be copied</div>
  </body>
</html> 
```

更多信息：

*   理想情况下，我正在寻找 webkit/gtk 的解决方案，但这也适用于 firefox/chrome。两种浏览器都表现出相同的行为。
*   我不控制页面的显示。页面显示在 webkit 窗口中，用于尝试分析页面内容的自动化工具。部分算法通过全选/复制查看可用的文本
*   我可以访问完整的 API webkit/gtk 公开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:36:29.390

为什么不直接做`display: none;`而不是向左移动呢？

```
<html>
  <body>
    <div style="display: none;">This should not be copied</div>
    <div>Only this should be copied</div>
  </body>
</html> 
```

我看不出你为什么需要把它从屏幕上移开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:40:29.333

用户可以随时使用 firebug 复制他们想要的任何内容。

# nhibernate - 使用 NHibernate Envers fluentconfiguration 审计用户

> ID：16161697
> 
> 赞同：3
> 
> 时间：2013-04-23T05:33:56.490
> 
> 标签：nhibernate, nhibernate-envers

我正在尝试使用 NHibernate Envers 来记录一个附加字段“用户”。我遵循了几个代码示例，这些示例在语法方面似乎有所不同，可能是因为其中一些有点过时了。但是我无法让它工作。

我遇到了这个例外：
*只有一个属性可能具有属性 [RevisionNumber]！*

我的自定义修订实体：

```
public class CustomRevisionEntity
{
    public virtual int Id { get; set; }
    public virtual DateTime RevisionTimestamp { get; set; }
    public virtual Guid UserIdentityId { get; set; }

    public override bool Equals(object obj)
    {
        if (this == obj) return true;
        var revisionEntity = obj as CustomRevisionEntity;
        if (revisionEntity == null) return false;

        var that = revisionEntity;

        if (Id != that.Id) return false;
        return RevisionTimestamp == that.RevisionTimestamp;
    }

    public override int GetHashCode()
    {
        var result = Id;
        result = 31 * result + (int)(((ulong)RevisionTimestamp.Ticks) ^ (((ulong)RevisionTimestamp.Ticks) >> 32));
        return result;
    }
} 
```

我的 IRevisionListener：

```
public class RevInfoListener : IRevisionListener
{
    public void NewRevision(object revisionEntity)
    {
        var casted = revisionEntity as CustomRevisionEntity;

        if (casted != null)
        {
            casted.UserIdentityId = Guid.NewGuid(); // TODO
        }
    }         
} 
```

首先我使用代码映射来映射实体：

```
_modelMapper.Class<CustomRevisionEntity>(entity =>
{
    entity.Property(x => x.Id);
    entity.Property(x => x.RevisionTimestamp);
    entity.Property(x => x.UserIdentityId);
}); 
```

然后我配置 Envers 和 NHibernate

```
var enversConf = new FluentConfiguration();
enversConf.SetRevisionEntity<CustomRevisionEntity>(x => x.Id, x => x.RevisionTimestamp, new RevInfoListener());
enversConf.Audit<OrganizationEntity>().Exclude(x => x.Version);
configuration.IntegrateWithEnvers(enversConf); // This is the nh-configuration 
```

最后一行给了我一个例外：
只有一个属性可能具有属性 [RevisionNumber]！

有人有想法么？我自己会推测默认修订实体仍然以某种方式使用，当我尝试注册我的自定义修订实体时会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:30:50.613

出现错误消息是因为 Id 属性被映射了两次。

在我们的映射类中，我们有这个

```
_modelMapper.BeforeMapClass += (modelInspector, type, classCustomizer) => classCustomizer.Id(type.GetProperty("Id"), (idMapper) =>                                                                                                                                     
{
    idMapper.Access(Accessor.Property);
    idMapper.Generator(Generators.GuidComb);
}); 
```

然后我们再次尝试将 Id 映射为 CustomRevisionEntity 的属性

最终映射：

```
_modelMapper.Class<CustomRevisionEntity>(entity =>
{
    entity.Id<int>(x => x.Id, mapper => mapper.Generator(Generators.Identity));
    entity.Property(x => x.RevisionDate);
    entity.Property(x => x.UserIdentityId);
}); 
```

# ios - UIScrollView 和动画图像视图看起来像俯卧撑效果

> ID：16161709
> 
> 赞同：0
> 
> 时间：2013-04-23T05:34:43.227
> 
> 标签：ios, uiscrollview

新的雅虎！向下滚动时，应用程序有效果，图像看起来像是在慢慢向上推。知道这是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:03:49.133

你的意思是视差滚动效果吗？

查看一些开源实现，例如：

[http://maniacdev.com/2013/01/open-source-library-for-adding-a-parallax-scrolling-effect-to-a-stylizable-uitableview/](http://maniacdev.com/2013/01/open-source-library-for-adding-a-parallax-scrolling-effect-to-a-stylizable-uitableview/)

[http://maniacdev.com/2012/11/open-source-ios-control-for-quickly-adding-a-parallax-scrolling-effect-to-your-uiviews/](http://maniacdev.com/2012/11/open-source-ios-control-for-quickly-adding-a-parallax-scrolling-effect-to-your-uiviews/)

# java - “AL lib：alc_cleanup：1 个设备未关闭”是什么意思？

> ID：16161714
> 
> 赞同：9
> 
> 时间：2013-04-23T05:35:02.427
> 
> 标签：java, swing, libgdx

我正在尝试让自己参与到 Libgdx OpenGL 框架中。我曾经`LwjglApplication`创建过一些简单的应用程序来渲染盒子、一些网格和一些纹理。我遇到了 Aurelien Ribon 的创建刚性 Box2D 物体的应用程序。他用来`LwjglCanvas`与 Java 的 Swing 集成。我尝试自己制作一个，我创建了一个`JFrame`然后添加了`LwjglCanvas`. 然后将`JFrame`' 的默认操作设置为 close to `EXIT_ON_CLOSE`。

但是，每次我关闭应用程序时，都会记录到我的控制台：

`AL lib: alc_cleanup: 1 device not closed`.

我不知道这意味着什么，它对我没有任何伤害。我只是想知道这意味着什么。根据`LwjglCanvas`文档：

`All OpenGL calls are done on the EDT. This is slightly less efficient then a dedicated thread, but greatly simplifies synchronization. Note that you may need to call stop() or a Swing application may deadlock on System.exit due to how LWJGL and/or Swing deal with shutdown hooks.`

我应该在哪里绑定`LwjglCanvas.stop()`，我应该将它添加到`EventDispatchThread`队列中还是应该将它绑定到`JFrame.addWindowListener`？

“AL lib：alc_cleanup：1 个设备未关闭”的真正含义是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-17T17:39:10.603

`AL.destroy();`必须在应用程序关闭之前调用。此调用通常包含在 finally 块中，但如果应用程序调用`System.exit(0)`, finally 块将不再执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-02T05:55:24.047

您应该尝试始终使用以下代码关闭您的应用程序：

```
Gdx.app.exit(); 
```

我通常把它放在我的**pause()**方法中，因为我的应用程序没有理由在后台运行。

此静态方法告诉框架您的应用程序正在计划关闭，因此将有效地释放所有资源。您收到的错误是因为 JNI 接口已加载 OpenAL 库，但在该库正确卸载和释放之前系统已关闭。我遇到了和你一样的问题，但这解决了。如 JavaDoc 中所述，exit() 方法：

> Schedule[s] 退出应用程序。在 android 上，这将导致在未来某个时间调用**pause()**和**dispose()**，它不会立即完成您的应用程序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-23T15:59:49.367

AL 库是 Libgdx（OpenAL 变体之一）使用的“音频库”。

我相信这条消息只是意味着音频库正在为您清理一些（在您的情况下只有一个）音频流/句柄。如果您在退出时看到它，它是无害的，因为所有资源都将被操作系统清理。

如果您在退出之前在内部清理了音频，则该消息应该会消失。

有关更多详细信息，请`alc_cleanup`在此处查找： [http ://repo.or.cz/w/openal-soft.git/blob/HEAD:/Alc/ALc.c](http://repo.or.cz/w/openal-soft.git/blob/HEAD:/Alc/ALc.c)

# java - 为什么我们在java中将变量声明为私有

> ID：16161719
> 
> 赞同：2
> 
> 时间：2013-04-23T05:35:14.833
> 
> 标签：java, private, encapsulation, public

通常在 java bean 类中，我们将变量声明为私有的。无论如何，我们将 setter 和 getter 方法声明为公共的。然后我们可以获取和设置属性的值。那么在这里将变量声明为私有有什么用呢？如果我宣布为公开会发生什么？

提前致谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T05:38:56.397

这就是封装的[目的](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

考虑拥有一个`age`财产，并且您想对其进行一些控制。如果您将您的字段简单地公开为公共，您可以从外部访问它并使用它做任何您想做的事情。然后，检查年龄是否*有效*可能会有点麻烦。

话虽如此，例如，使用 setter 方法，您可以拥有一个验证机制。这使您可以控制访问和更改变量的方式和时间。

这同样适用于 getter 方法。想象一下，您有一些不想公开的内部结构，例如，您在内部使用枚举。但是，您不想在课堂外展示这一点。因此，例如，在您的 getter 中，您生成您想要生成的任何值的字符串版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:43:16.523

1.  您可以在为实例变量设置值之前进行验证，如下所示：

    ```
    class HeightBean {

      private int height;
      public int getHeight() {
       return height;
      }
      public void setHeight(int height) {
      if(height<0)
          height=0;
      this.height = height;
      }
    } 
    ```

2.  大多数框架使用 bean setter 和 getter 来访问数据。例如，

    ```
     <jsp:useBean id="name" class="java.lang.String" scope="session">
      </jsp:useBean>
      <jsp:getProperty property="bytes" name="name"/> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:38:48.650

它提供了一个选择。您可能提供也可能不提供 getter 和 setter。

例如，在不可变对象的情况下仅提供 getter 是一种常见的设计选择。

经验法则：尽可能减少能见度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:41:43.637

造成这种情况的主要原因可能是：

限制读写访问和不变性：

1.  如果我想将一个元素设为只读。我会将吸气剂公开并

2.  如果我想在设置值时做任何验证，我只能有一个设置器，使属性可配置和任何验证。

3.  吸气剂可以制作防御性副本。

4.  您可以关联侦听器，以通知 setter 方法中的任何值更改。

5.  如果一个字段依赖于另一个字段，您可以将该逻辑放在 setter 方法中，否则您将始终必须编写一个样板代码来管理它，至少仍然需要一个函数调用。可以将其移至二传手。

但是拥有一个公共属性而不是 setter 和 getter 并没有提供这么多的灵活性。如果不编写额外的函数和调用开销，您将无法执行 1 到 5。

# python - 给对象一个参数

> ID：16161725
> 
> 赞同：2
> 
> 时间：2013-04-23T05:36:01.937
> 
> 标签：python, django

如何为 ModelForm 对象提供额外的参数，如下所示：初始化 ModelForm 对象

```
form = ChangeProfile(request.POST, initial={'first_name':costumer.first_name, 'last_name':costumer.last_name}, extraParameter) 
```

以及如何在此类中获取 extraParameter：

```
class ChangeProfile(ModelForm): 
```

创建这样的构造器不是上帝的想法

```
def __init__(self, request, initial, extraParamter): 
```

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:10:33.960

您可以通过多种方式传递参数，例如简单的 Python 类，您必须小心不要破坏 Django Forms/ModelForms 的默认行为。

```
class YourForm(forms.Form):
    def __init__(self, custom_arg=None, *args, **kwargs):
        # We have to pop the 'another_arg' from kwargs,
        # because the __init__ from 
        # forms.Form, the parent class, 
        # doesn't expect him in his __init__.
        self.another_arg = kwargs.pop('another_arg', None)

        # Calling the __init__ from the parent, 
        # to keep the default behaviour
        super(YourForm, self).__init__(*args, **kwargs)

        # In that case, just our __init__ expect the custom_arg
        self.custom_arg = custom_arg

        print "Another Arg: %s" % self.another_arg
        print "Custom Arg: %s" % self.custom_arg

# Initialize a form, without any parameter
>>> YourForm()
Another Arg: None
Custom Arg: None
<YourForm object at 0x102cc6dd0>

# Initialize a form, with a expected parameter
>>> YourForm(custom_arg='Custom arg value')
Another Arg: None
Custom Arg: Custom arg value
<YourForm object at 0x10292fe50>

# Initialize a form, with a "unexpected" parameter
>>> YourForm(another_arg='Another arg value')
Another Arg: Another arg value
Custom Arg: None
<YourForm object at 0x102945d90>

# Initialize a form, with both parameters
>>> YourForm(another_arg='Another arg value',
             custom_arg='Custom arg value')
Another Arg: Another arg value
Custom Arg: Custom arg value
<YourForm object at 0x102b18c90> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:10:06.960

对于这种情况，您需要覆盖`__init__`.

但是，您的签名`__init__`有一个错误。

你应该做：

```
class ChangeProfile(ModelForm):
    def __init__(self, *args, **kwargs):
        self.extraParameter = kwargs.pop("extraParameter")
        super(ChangeProfile, self).__init__(*args, **kwargs)
        #any other thing you want 
```

从视图：

```
extraParameter = "hello"

#GET request
form=ChangeProfile(initial={'first_name':costumer.first_name, 'last_name':costumer.last_name}, extraParameter=extraParameter)

#POST request
form=ChangeProfile(request.POST ,initial={'first_name':costumer.first_name, 'last_name':costumer.last_name}, extraParameter=extraParameter) 
```

# python - django 中的高效分页和数据库查询

> ID：16161727
> 
> 赞同：18
> 
> 时间：2013-04-23T05:36:23.217
> 
> 标签：python, django, pagination, querying

有一些用于 django 分页的代码示例，我使用了一段时间。我可能错了，但是在查看代码时，它看起来会浪费大量内存。我一直在寻找更好的解决方案，这里是代码：

```
# in views.py
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

... 
...    

def someView():
    models = Model.objects.order_by('-timestamp')
    paginator = Paginator(models, 7)
    pageNumber = request.GET.get('page')

    try: 
        paginatedPage = paginator.page(pageNumber)
    except PageNotAnInteger: 
        pageNumber = 1
    except EmptyPage: 
        pageNumber = paginator.num_pages
    models = paginator.page(pageNumber)

    return render_to_resp ( ..... models ....) 
```

我不确定这段代码的细节，但从它的外观来看，第一行代码从数据库中检索每个模型并将其推入。然后它被传递给 Paginator，它根据用户在 html GET 中所在的页面将其分块。分页器是否以某种方式使其可以接受，或者这完全是内存效率低下的？如果效率低下，如何改进？

还有一个相关的话题。如果有人这样做：

```
 Model.objects.all()[:40] 
```

这段代码是否意味着所有模型都被推入内存，我们拼接出其中的 40 个？哪个不好。或者这是否意味着我们只查询并将 40 个对象推送到内存期？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-23T07:11:25.760

`mymodel.objects.all()`产生一个查询集，而不是一个列表。查询集是惰性的——在你真正尝试使用它们之前，不会发出任何请求，也不会做任何事情。此外，对查询集进行切片不会将整个该死的东西加载到内存中，只是为了获取一个子集，而是在访问数据库之前为 SQL 查询添加限制和偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:58:27.373

使用分页器时没有什么内存效率低下的。查询集是惰性求值的。在您的通话`Paginator(models, 7)`中，`models`是一个到目前为止尚未评估的查询集。所以，到目前为止，数据库还没有被击中。此时内存中也没有包含所有模型实例的列表。

当你想得到一个页面时`paginatedPage = paginator.page(pageNumber)`，在这个查询集上进行切片，只有在这个时候数据库被命中并且数据库返回一个包含模型实例的查询集。然后切片只返回页面上应该存在的对象。因此，只有切片的对象会进入内存中的列表。假设在一页上显示 10 个对象，只有这 10 个对象会留在内存中。

当有人这样做时；

```
Model.objects.all()[:40] 
```

对列表进行切片时，会创建一个新列表。在您的情况下，将创建一个仅包含 40 个元素的列表，并将存储在内存中的某个位置。不会有其他列表，因此不会有任何列表包含`Model`内存中的所有实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-21T22:44:22.407

使用上面的信息我想出了一个视图函数装饰器。json_list_objects 将 djanog 对象转换为 django 对象的已知关系字段的 json-ready python dicts，并将 jsonified 列表作为 {count: results: } 返回。

其他人可能会发现它很有用。

```
def with_paging(fn):
  """
  Decorator providing paging behavior.  It is for decorating a function that 
  takes a request and other arguments and returns the appropriate query
  doing select and filter operations.  The decorator adds paging by examining
  the QueryParams of the request for page_size (default 2000) and 
  page_num (default 0).  The query supplied is used to return the appropriate
  slice. 
  """
  @wraps(fn)
  def inner(request, *args, **kwargs):
    page_size = int(request.GET.get('page_size', 2000))
    page_num = int(request.GET.get('page_num', 0))
    query = fn(request, *args, **kwargs)
    start = page_num * page_size
    end = start + page_size
    data = query[start:end]
    total_size = query.count()
    return json_list_objects(data, overall_count=total_size)
  return inner 
```

# android - 显示 Country 及其调用代码，但使用 Android XML 返回其缩写代码

> ID：16161732
> 
> 赞同：3
> 
> 时间：2013-04-23T05:36:48.053
> 
> 标签：android, xml, country-codes

我正在尝试从 Android XML 开发一个注册屏幕。与每个注册表单一样，我需要显示国家/地区列表。我可以在 strings.xml 文件中使用字符串数组来做到这一点。

问题的很大一部分是，当用户选择一个国家时，它正下方的电话号码字段最初应该填写其各自的国家代码，该代码可能是可编辑的，也可能是不可编辑的。在这里，我的问题是选择国家时如何获取国家代码。我需要使用数据库还是可以使用 xml 本身来实现？

除此之外，当用户提交注册表单时，我必须发送国家的缩写代码，而不是完整的国家名称。现在，这又需要数据库还是 xml？

我的应用程序直到现在才使用数据库，为此目的使用数据库并不是那么好。此外，几乎所有使用注册的应用程序都需要完成此操作，但我找不到任何有关如何在 Android 中执行此操作的资源。

另外，我想告诉你，我的最低 sdk 是版本 7。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:09:26.893

我终于能够在不使用数据库的情况下做到这一点。我正在写下这些步骤，以便它可以帮助其他需要做同样事情的人。

首先我下载了​​ CSV：[https ://github.com/mledoze/countries/blob/master/countries.csv](https://github.com/mledoze/countries/blob/master/countries.csv)

我删除了所有其他字段，除了我需要的那些。它给我留下了 3 个字段：姓名、缩写和呼叫代码。

接下来，我从以下网址下载了 CSVReader：[http ://code.google.com/p/secrets-for-android/source/browse/trunk/src/au/com/bytecode/opencsv/CSVReader.java](http://code.google.com/p/secrets-for-android/source/browse/trunk/src/au/com/bytecode/opencsv/CSVReader.java)

[如如何在 Android 应用程序中解析 CSV 文件中](https://stackoverflow.com/questions/6057695/how-to-parse-the-csv-file-in-android-application)所述，从 CSV 中获取项目？由“Kopfgeldjaeger”作为：

```
String next[] = {};
List<String[]> list = new ArrayList<String[]>();

 try {
      CSVReader reader = new CSVReader(new InputStreamReader(getAssets().open("countries.csv")));
            for(;;) {
                next = reader.readNext();
                if(next != null) {
                    list.add(next);
                } else {
                    break;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

接下来，我为每个值添加了一个 ArrayList，例如：

```
ArrayList<String> countryNames = new ArrayList<String>();
ArrayList<String> countryAbber = new ArrayList<String>();
ArrayList<String> countryCodes = new ArrayList<String>();

for(int i=0; i < list.size(); i++)
{
    countryNames.add(list.get(i)[0]); // gets name
    countryAbber.add(list.get(i)[1]); // gets abbreviation
    countryCodes.add(list.get(i)[2]); // gets calling code
} 
```

然后将其添加到 XML 布局中的微调器中，如下所示：

```
ArrayAdapter<String> countryAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, countryNames);
        spinner.setAdapter(countryAdapter);

// adding event to display codes when country is selected

spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                // display the corresponding country code
                TextView tvCountryCode = (TextView) findViewById(R.id.country_code);
                tvCountryCode.setText("+"+list.get(pos)[2]);
                countryPosition = pos;
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

这样，当从下拉列表中选择一个国家/地区时，我能够在 xml 文件中显示国家/地区代码。

请记住添加 setOnItemSelectedListener() 来实现这一点。

我希望这对将来的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:45:30.937

我建议你使用数据库。API 级别 7 支持 SQLite 数据库（我自己在 android 2.1 中使用过它们）。创建一个包含所有必需信息的表：

```
create table countries (
    _id integer primary key autoincrement,
    country_code    char(2),
    country_name    varchar,
    phone_code      char(4),
    editable        integer
); 
```

然后将您的国家信息存储到此表中。填充国家/地区列表时，请使用此表而不是 XML；显示国家名称并将国家代码与每个相应的列表项相关联。然后在选择时，使用国家代码获取电话代码和“可编辑”标志 - 并根据此信息采取行动。

# asp.net - 在 asp.net 中下载文件和重定向页面

> ID：16161736
> 
> 赞同：0
> 
> 时间：2013-04-23T05:37:02.047
> 
> 标签：asp.net

我想编写一个程序，在单击按钮后页面将被重定向并下载一个 pdf 文件。我正在按钮单击事件下编写以下代码。但它显示错误。

```
Response.TransmitFile("Filename")
Response.Redirect("~/Redirect.aspx")
Response.End() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:46:43.067

这是不可能的，因为文件下载将获得 HTTP 状态 200（有文件作为响应）。重定向为 301/302，但响应中不能包含文件。

此外，当现代浏览器接收文件时，它不会更改当前 URL。

如果你真的想产生这样的效果，你必须在客户端创建一些东西。例如，您可以使用[jquery 文件下载](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)，它在下载后和出错时有事件。更多[示例页面](http://jqueryfiledownload.apphb.com/)

# django - urls.py Django 中的会话值

> ID：16161737
> 
> 赞同：0
> 
> 时间：2013-04-23T05:37:07.713
> 
> 标签：django, django-models, django-views

我有 3 种形式，在第一种形式的基础上，我想显示两种形式中的一种，这意味着我想从 urls.py 传递两种形式中的一种，这是我的 urls.py

```
urlpatterns = patterns('',
    (r'^create/$',createUser),
    (r'^pay/$',payment),
    (r'^pay/mail/$',mail),
    (r'^pay/transaction/(.*)/$',transaction),
    (r'^pay/final/$',final),
    (r'^next/post/$', SomeModelFormPreview(jobpostForm)),
    (r'^post/edit/$', SomeModelFormPreview(jobpostForm)),

) 
```

基于 firstr form post_type 我想将表单传递给 SomeModelFormPreview ..如何在 urls.py 中获取 post_type 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:40:36.483

Django 提供[`FormWizard`](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)了这个确切的目的。控制一系列表单之间的会话。

# iphone - 在 MFMailComposerViewController 中附加多张照片的内存泄漏

> ID：16161740
> 
> 赞同：1
> 
> 时间：2013-04-23T05:37:16.050
> 
> 标签：iphone, ios, multithreading, cgimage, alasset

我正在尝试在 a 中附加多张照片，`MailComposerViewController`并且我正在使用`ALAssetPickerViewController`它来挑选多张照片。我有一个`NSMutableArray`，其中包含所选资产的参考。我正在实现一个`for loop`枚举`array`要获取`NSData`的选定资产`UIImage`并`UIImage`使用`CGImageRef`. 代码如下：

```
@autoreleasepool
{
    NSString *emailTitle = @"Test";
    NSString *messageBody = @"IOS programming is so fun!";
    NSArray *toRecipents = [NSArray arrayWithObjects:@"abc@gmail.com", nil];

    MFMailComposeViewController *tempmcvc = nil;
    tempmcvc = [[MFMailComposeViewController alloc] init];
    tempmcvc.mailComposeDelegate = self;
    [tempmcvc setSubject:emailTitle];
    [tempmcvc setMessageBody:messageBody isHTML:YES];
    [tempmcvc setToRecipients:toRecipents];
    tempmcvc.modalPresentationStyle=UIModalPresentationFullScreen;
    tempmcvc.navigationBar.barStyle = UIBarStyleBlackOpaque;

    for (AlAsset *assets in SelectedAssetsarray) 
    {
        @autoreleasepool
        {
            UIImage *attachImagTemp = nil;
            NSData *myData = nil;
            CGImageRef iref = [assets.defaultRepresentation fullScreenImage];
            NSString *nameOfImgTemp;
            attachImagTemp = [UIImage imageWithCGImage:iref];
            nameOfImgTemp = assets2.defaultRepresentation.filename;                      
            myData = UIImageJPEGRepresentation (attachImagTemp, 1.0);
            [tempmcvc addAttachmentData:myData mimeType:@"image/jpeg" fileName:nameOfImgTemp];

            myData = nil;
            attachImagTemp = nil;
            iref = nil;
            nameOfImgTemp = nil;
            ALAsset *_temp = assets2;
            _temp = nil;

        }
    }
}

dispatch_async(dispatch_get_main_queue(), ^(void) {
    [self presentModalViewController:tempmcvc animated:YES]
}); 
```

我附加的每个资产几乎没有 2 MB，但内存不断减少，我无法正确释放内存；一些内存泄漏，请帮助查找泄漏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T06:08:18.030

尝试使用以下代码释放附件图像 **CGImageRelease(attachImagTemp);** 释放缓存内存，而不是将其设置为 nil。

如果您没有使用过 ARC，也可以按照 Avi 的建议释放 tempmcvc 对象。

# php - 如何检查使用jquery检查的多个复选框？

> ID：16161741
> 
> 赞同：5
> 
> 时间：2013-04-23T05:37:24.367
> 
> 标签：php, javascript, jquery

我是 jquery 的新手，这很有趣，但是我遇到了一个小问题，我正在使用这样的 foreach 循环从数据库中填充多个复选框，

```
<? foreach($cities as $city) { ?>
    <input type="checkbox" name="city[]" value="<?=$city->id?>" id="city[]" />
<? } ?> 
```

我想限制用户检查至少一个复选框，我知道如何只用一个复选框来执行此操作，但是对 jquery 中的这种数组感到困惑，任何帮助将不胜感激！提前谢谢了！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T05:47:49.757

要查找检查了多少个复选框，您可以使用以下内容：

```
var checkedNum = $('input[name="city[]"]:checked').length;
if (!checkedNum) {
    // User didn't check any checkboxes
} 
```

由于您`name`为所有复选框（来自您的 PHP 循环）提供相同的属性，因此您可以使用选择器`input[name="city[]"]`来定位并找到所有复选框。**但是要找出具体检查**了多少，您可以添加`:checked`选择器。另一种方法是使用`$('input[name="city[]"]').filter(":checked")`.

最后，**只有在为 0 时才会**`!checkedNum`通过，因为 0 是错误的。任何其他数字都是真实的，并且不会满足条件。**`checkedNum``!checkedNum`**

 *** * *

**参考：**

*   jQuery 属性等于选择器：[http ://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)
*   `:checked`选择器：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)
*   jQuery`.length`属性：[http ://api.jquery.com/length/](http://api.jquery.com/length/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T05:45:23.380

如果你想至少选中一个复选框，你可以使用这个

```
var somethingChecked = false;
$("input[type=checkbox]").each(function() {
  if(this).is(':checked')) {
    somethingChecked = true;
  }
});
if(!somethingChecked) {
  alert("You haven't checked anything yet");
} 
```

这样做是将变量初始化为 false。然后脚本循环遍历所有复选框类型的输入。如果该项目被选中，则将该变量设置为 true。最后，检查变量是否仍然为假。如果是，则显示错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-29T04:46:16.253

这段代码对我很有效，在这里我将数组转换为字符串**~**

```
 <input type="checkbox" value="created" name="today_check"><strong>Created</strong>
    <input type="checkbox" value="modified" name="today_check><strong>Modified</strong>
 <a class="get_tody_btn">Submit</a>

<script type="text/javascript">
    $('.get_tody_btn').click(function(){
        var vals = "";
        $.each($("input[name='today_check']:checked"), function(){  
            vals += "~"+$(this).val();  
        });
        if (vals){
            vals = vals.substring(1);
        }else{
            alert('Please choose atleast one value.');
        }

    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T05:44:19.137

假设您拥有`#my_form`表单的 ID，您可以这样做

```
$("#my_form input[type=checkbox]:checked"). // ... do something 
```

使用选中的复选框选择并执行某些操作。你也可以做

```
$("#my_form input[type=checkbox]").each(function(idx, elem) {
   var is_checked = $(this).prop("checked");
   // Do something with is_checked
}); 
```

遍历所有复选框并检查它们是否被选中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T05:49:03.707

首先所有`id`的复选框应该是唯一的。

这样做

```
<? 
$checkBoxCount = 0;
foreach($cities as $city) { ?>
    <input type="checkbox" name="city[]" value="<?=$city->id?>" id="chkbox-<?=$checkBoxCount?>" />
<? } ?> 
```

现在在 jQuery 中像这样检查以检查所有复选框。

```
var checkCount = $("input[name='city[]']:checked").length;

if(checkCount == 0)
{
   alert("Atleast one checkbox should be checked.");
} 
```**

# javascript - 如何打印带有黑色背景图像的白色文本

> ID：16161742
> 
> 赞同：0
> 
> 时间：2013-04-23T05:37:25.177
> 
> 标签：javascript, jquery, asp.net, html, css

我正在尝试使用黑色背景图像打印白色文本，但它仅在我们启用“打印背景（颜色和图像）时才有效。有没有办法通过 jquery 或其他解决方法来解决这个问题。这是我的示例代码。

```
<script type="text/javascript">
  $(function () {
    var print = $('.printButton');
    print.bind('mousedown', function () {
             $('.FirstName').attr("style", "background: transparent !important;color:#FFEFD5;-webkit-print-color-adjust: exact;");
              window.print();
             });
         });
</script>

<div >
    <div >
        <asp:Image runat="server" ID="imgIO" ImageUrl="/css/Images/Img-Black.jpg" />
      </div>
      <div class="FirstName">Hello</div>
</div>

<div>
   <div class="printButton">
       <asp:Button runat="server" ID="Button2"  />
   </div>
</div>

.FirstName {
    color: #eee;
    font-size: 11px;
    font-weight: bold;
    position: absolute;
    top: 15px;
    left: 72px;  
}
.printButton {
    margin: 0 -3px 0 0;
    float: right;
    font-family: Arial;
    direction: ltr;
} 
```

我验证了这个链接[我可以强制文本打印为白色吗？](https://stackoverflow.com/questions/10684392/can-i-force-text-to-print-as-white)已经，但我无法找到解决方案。

谁能帮我解决这个问题。

非常感谢安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:35:49.847

解决方法：动态生成图像。服务器中的图像生成非常简单，也相对便宜。想想验证码，但要使用您的颜色、字体、选择的文本等。

即使从动态文本生成也不应该是太大的挑战。动画会更难，但可能是可行的，如果你要打印它，derp！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:42:20.983

不能。网站不能更改浏览器设置。

如果网站上的 javascript 可以改变浏览器中的用户偏好，那将是一个重大的安全漏洞。

*想象一下，如果网站可以在浏览器中启用弹出窗口。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T12:02:01.633

根据 Nenotlep 的建议，我得到了答案。这是我下面的代码来解决我的问题。

```
private void LoadBlackImage(string imageUrl, string firstName, string lastName, string Number, string Date)
        {
            Bitmap bitMapImage = new Bitmap(Server.MapPath(imageUrl));
            Graphics graphicImage = Graphics.FromImage(bitMapImage);
            SolidBrush drawBrush = new SolidBrush(Color.White);

            HtmlGenericControl dynImage = new HtmlGenericControl("img");
            dynImage.ID = "imgBlack";
            dynImage.Attributes.Add("runat", "server");

            //Smooth graphics is nice.
            graphicImage.SmoothingMode = SmoothingMode.AntiAlias;
            //Write your text.
            graphicImage.DrawString(firstName, new Font("Arial", 8, FontStyle.Regular), drawBrush, new Point(50, 70));
            graphicImage.DrawString(lastName, new Font("Arial", 8, FontStyle.Regular), drawBrush, new Point(50, 85));
            graphicImage.DrawString(Number, new Font("Arial", 8, FontStyle.Regular), drawBrush, new Point(50, 100));
            graphicImage.DrawString(Date, new Font("Arial", 8, FontStyle.Regular), drawBrush, new Point(50, 115));

            //Save the new image to the response output stream.
            MemoryStream ms = new MemoryStream();
            bitMapImage.Save(ms, ImageFormat.Jpeg);
            var base64Data = Convert.ToBase64String(ms.ToArray());
            //lblGiftCardRightIO.Src = "data:image/jpeg;base64," + base64Data;
            dynImage.Attributes.Add("src", "data:image/jpeg;base64," + base64Data);
            divControl.Controls.Add(dynImage);

            //Clean house.
            graphicImage.Dispose();
            bitMapImage.Dispose();
        } 
```

谢谢大家的时间和帮助

非常感谢安娜

# c++ - 内存管理：字符数组和 = 运算符

> ID：16161750
> 
> 赞同：0
> 
> 时间：2013-04-23T05:38:07.973
> 
> 标签：c++, memory-management, memory-leaks, copy-constructor, rule-of-three

内存管理：字符数组和 = 运算符

问：在内存管理方面，您使用以下代码会有什么错误？

```
class String
{
public:
 String(const char right[]);
 String& operator= (const String& right);
 int length() const;
private:
 char* buffer;
 int len;
};

int String::length() const {return len;}

String::String(const char right[])
{
  len = 0;
  while (right[len] != '\0')
    len++;
  buffer = new char[len+1];
  for (int i = 0; i < len; i++)
    buffer[i] = right[i];
  buffer[len] = '\0';
}

String& String::operator= (const String& right)
{
  int n = right.length();
  for (int i = 0; i <= n; i++)
    buffer[i] = right.buffer[i];
  return *this;
} 
```

回答。我不知道...你能帮帮我吗？数组大小似乎还可以......新运算符......是因为没有删除运算符而导致悬空指针吗？还是三法则？

我会很感激你的帮助！请告诉我。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:45:12.940

我只能建议

```
~String()
{
    if(buffer)
        delete [] buffer;
    len = 0;
}

String(int length)
{
  buffer = new char[length];
  len = length;
}

String String::operator = (String rhs)
{
    if(this != &rhs)
    {
        delete [] buffer;
        buffer = new char[strlen(rhs.m_str) + 1];
        strcpy(buffer, rhs.buffer);
    }

    return *this;
} 
```

如果您没有析构函数，那么每次在类中新建缓冲区时，都会发生内存泄漏，因为您的代码无法摆脱它。

# perl - Perl 脚本在 Windows7 中运行时不会打开命令提示符

> ID：16161755
> 
> 赞同：0
> 
> 时间：2013-04-23T05:38:37.357
> 
> 标签：perl

当我按 F5 时，我的 Perl 脚本根本不执行。实际上命令提示符也没有出现。请帮我看看有什么问题。以下是 Hello World 脚本。

```
use 5.010;
use strict;
use warnings;

print "Hello World!\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:41:41.033

问题可能是您的程序运行得如此之快，以至于命令提示符打开和关闭的速度比您看到的要快。要查看是否是这种情况并修复它，您可以等待用户输入：

```
print "Press ENTER to quit.\n";
scalar <>; 
```

# postgresql - 如何在 PostgreSQL 中同时运行多个事务

> ID：16161762
> 
> 赞同：2
> 
> 时间：2013-04-23T05:39:08.917
> 
> 标签：postgresql

我想在 PostgreSQL 上做一些基本的实验，例如生成死锁、创建不可重复读取等。但我不知道如何一次运行多个事务来查看这种行为。谁能给我一些想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T05:50:54.910

Open more than one `psql` session, one terminal per session.

If you're on Windows you can do that by launching `psql` via the Start menu multiple times. On other platforms open a couple of new terminals or terminal tabs and start `psql` in each.

I routinely do this when I'm examining locking and concurrency issues, used in answers like:

*   [https://stackoverflow.com/a/12456645/398670](https://stackoverflow.com/a/12456645/398670)
*   [https://stackoverflow.com/a/12831041/398670](https://stackoverflow.com/a/12831041/398670)

... probably more. A useful trick when you want to set up a race condition is to open a third `psql` session and `BEGIN; LOCK TABLE the_table_to_race_on;`. Then run statements in your other sessions; they'll block on the lock. `ROLLBACK` the transaction holding the table lock and the other sessions will race. It's not perfect, since it doesn't simulate offset-start-time concurrency, but it's still very helpful.

Other alternatives are outlined in [this later answer](https://stackoverflow.com/a/17055880/398670) on a similar topic.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T11:44:30.270

pgbench 可能是您的最佳解决方案。它允许您测试不同的复杂数据库资源争用、死锁、多客户端、多线程访问。

要获得解除锁定，您可以简单地纠正一些像这样的脚本（'bench_script.sql）：

```
DECLARE cnt integer DEFAULT 0;
BEGIN;
LOCK TABLE schm.tbl IN SHARE MODE;
select count(*) from schm.tabl into cnt;
insert into schm.tbl values (1 + 9999*random(), 'test descr' );
END; 
```

并使用 -f 参数将其传递给 pgbench。

有关更详细的 pgbench 用法，我建议阅读[postgreSQL pgBench的官方手册](http://www.postgresql.org/docs/9.2/static/pgbench.html)

并熟悉我[最近在这里解决](https://stackoverflow.com/questions/17997070/postgresql-pgbench-tool-running-user-defined-sql-script)的 pgbench 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:47:44.950

Craig Ringer 提供了一种手动开启多个事务的方式，如果你觉得不太方便，可以使用[pgbench](http://www.postgresql.org/docs/9.2/static/pgbench.html)一次运行多个事务。

# php - 关于远程测试服务器的问题

> ID：16161764
> 
> 赞同：4
> 
> 时间：2013-04-23T05:39:21.880
> 
> 标签：php

首先，在编程方面我是一个完全的新手，所以请原谅我无知的问题。

我聘请了两名程序员来完成我的项目。他们说他们需要一个远程测试服务器来测试东西，然后再让它生效，这样在一切都好之前，这些更改才会生效。

**我的问题**：

1.  什么是远程测试服务器？
2.  为什么它们是必要的？
3.  他们可以与普通经销商或共享主机一起设置吗？
4.  你怎么能阻止世界看到它上面的东西？
5.  你需要一个域名吗？
6.  如何设置远程测试服务器？
7.  还有其他全面的文件可以阅读吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:16:28.177

* * *

关于测试服务器

* * *

在网站的情况下，测试服务器用于更改网站（副本）而不向公众显示。这样做是因为，当开发人员更改网页时，由于源代码更改不完整，页面经常会卡住功能或包含错误。通过将这些页面放在远程测试服务器上，开发人员可以使用放置在该服务器上的网站副本进行更改，而不会影响发送给客户端的页面。您实际上可以在本地或远程配置这种服务器，具体取决于您如何权衡利弊。

**远程测试服务器**

您可以在 GoDaddy 或 DynDns 等站点上设置远程测试服务器。这些服务通常将域名与它们的服务器空间打包在一起。这样做的好处是大部分“设置”已经为您完成。此外，正如 Silvertiger 所指出的，这种服务的费用通常很低。这可能是推荐的，因为您的程序员可能需要的大量软件在这些服务器上很容易获得。唯一的缺点是，防止公众查看此（据我所知）的唯一方法是对其进行密码保护。但是，如果您的开发人员计划在您的工作环境之外工作，您可能仍然需要公共访问权限。

**本地测试服务器**

或者，您可以将自己的一台计算机设置为测试服务器。这样做的好处是您需要支付的唯一费用是计算机的成本（它可以是低端计算机）。由于这台计算机将连接到网络，因此您不需要域名，而是使用分配给该计算机的 IP 地址。它不会托管在互联网上，因此更容易阻止其他人看到它。唯一的缺点是您的程序员必须在您的网络内才能工作，并且设置此服务器可能相当复杂（取决于您的程序员的需要）。

您将主要需要下载和配置所有适当的软件（即 Apache、mySQL、PHP）才能使其正常工作。这通常在服务器操作系统（即 Ubuntu Server）上完成，但可以在大多数操作系统上完成。通过安装服务器软件包（即 WAMP、LAMP、MAMP）也可以减轻这个过程的痛苦，这些软件包包括开发人员需要的基本软件组件。我建议使用 Ubuntu。如果您想在设置过程中保持图形界面，您可以使用 Ubuntu Desktop。或者，您可以使用 Ubuntu Server - 通过使用基于终端的用户界面节省大量内存（可能使其更难使用）。

您还可以考虑将名为 FTP 的服务添加到本地服务器。这是一项服务，允许您远程读取和写入服务器上的文件，并且您的 Web 开发人员可能需要他们的某些编辑程序（例如，Dreamweaver 可以使用 FTP 访问文件）。

附带说明一下，大多数开发人员应该熟悉设置基本的服务器软件。事实上，它通常是网页设计课程的一部分。因此，如果您为他们提供计算机，您可以允许他们配置此软件。如果您想自己配置它，您可能会发现下面的一些链接很有帮助。

* * *

信息链接

* * *

**通用网络服务器**

*   [Wikipedia](http://en.wikipedia.org/wiki/Web_server) - 有关 Web 服务器的一般信息
*   [HowStuffWorks](http://www.howstuffworks.com/web-server.htm) - 有关 Web 服务器如何工作的信息

**远程服务器**

*   [Godaddy](http://www.godaddy.com/) - 一个常见的网络托管公司，您可以从中使用他们的服务。
*   [DynDns](http://dyn.com/dns/) - （如前所述）

**本地服务器**

*   [Ubuntu Server](http://www.ubuntu.com/download/server)：一种流行的服务器操作系统
*   [Apache](http://webdesign.about.com/cs/apache/a/aainstallapache.htm)：流行的 HTTP 服务器（又名 Web 服务器）
*   [PHP](http://www.php.net/manual/en/install.unix.php)：Web 开发人员常用的语言
*   [LAMP](http://www.howtoforge.com/ubuntu_lamp_for_newbies)：Linux 基础服务器软件包（Linux Apache mySQL PHP）
*   [WAMP](http://www.wampserver.com/en/)：Windows 的基本服务器软件包（Windows Apache mySQL PHP）
*   [MAMP](http://www.mamp.info/en/mamp-pro/) : 适用于 Mac (Mac .. .. PHP ) 的基本服务器软件包
*   [设置 LAMP](http://net.tutsplus.com/tutorials/php/how-to-setup-a-dedicated-web-server-for-free/)：[步骤 1-5] 一篇关于在 Ubuntu 上设置 Web 服务器的精彩文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:41:15.693

远程测试服务器是可以在其上执行代码的工作 php 服务器。它可以是您可以访问的任何服务器，这意味着任何托管经销商都可以为您提供服务器，但实际上它只是您可以访问的 Web 服务器。我假设您有一个软件要求使用 Dreamweaver 或其他 IDE 等远程测试服务器。

我使用我的 Godaddy 每月 8 美元的托管帐户帐户进行测试..

# php - 如何使用数组将循环文本框值存储在 mysql 数据库中？

> ID：16161765
> 
> 赞同：0
> 
> 时间：2013-04-23T05:39:31.367
> 
> 标签：php, arrays, for-loop, store

我在 for 循环中为文本框、日期和下拉菜单创建代码，并尝试使用数组概念将这些值存储在我的数据库中。我在互联网上搜索了一些代码，但不适用于存储数据。我是 PHP 的新手。任何想法都会很棒。

```
<?php                       
for($i=1;$i<=4;$i++)
{
?>
<tr>
                        <td>Name</td>
                        <td><input type="text" name="col_name[<?php echo $i;?>]" value=""/></td>
</tr>
<tr>
<td >Complete Address (Road Name, City, State, Country, Zip)</td>
<td><textarea name="add[<?php echo $i;?>]" value=""></textarea></td>
</tr>
<td> Date of birth(Ex.: mm-dd-yyyy)</td>
<td><input type="text" name="dob[<?php echo $i;?>]" id="dob<?php echo $i ;?>" value=""/>   
</tr>
<tr>
<td>Sex</td>
<td><input type="radio" name="col_certi[<?php echo $i;?>]" value="Yes"/>&nbsp;&nbsp;Yes&nbsp;
<input type="radio" name="col_certi[<?php echo $i;?>]" value="No"/>&nbsp;No
</td>
<tr>
<td >Country</td>
<td><select name="countryid[<?php echo $i;?>]"/>
<option value="">Select</option>
</select>
</td>
</tr>
<tr>
<td>File Upload</td>
<td><input type="file" name="col_certi_file[<?php echo $i;?>]" value="<?php echo $fir_col_certi_file;?>"/></td>
</tr>
<tr><td align="center" colspan="4"><hr color="#6699CC" width="90%"/></td></tr>
<?php
}
?> 
```

我编写代码以仅使用 php 保存 col_name 数据

```
foreach($col_name as $colname)
$updatecol="update education set col_name='$colname' where employee_id=".$ employee_id;
if(!mysql_query($updatecol)) 
```

这里 $colname 最后一个值只存储在数据库中.. 我想在数据库中存储 4 个值.. 怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:47:23.947

您可以使用 for 循环将类似这样的内容插入数据库

for($i=0;$i<5;$i++) {

插入查询

}

# c++ - G++ 给出了神秘的错误信息，一些指针问题

> ID：16161770
> 
> 赞同：0
> 
> 时间：2013-04-23T05:40:03.227
> 
> 标签：c++, arrays, g++

我是 C++ 新手，正在努力尝试使多文件程序正常工作。我有一个用 C 语言运行的图形库，但在将其转换为 C++ 时遇到了麻烦。g++ 我最大的问题是这个错误信息，

```
error: no match for âoperator=â in â*(((Graph*)this)->Graph::adj +
((long unsigned int)(((long unsigned int)i) * 32ul))) = (operator
new(32u), (<statement>, ((List*)<anonymous>)))â 
```

这是我抱怨的 Graph.cpp 代码部分：

```
Graph::Graph(int n){
    order = n;
    size = 0;
    source = NIL;
    color = static_cast<char*>(calloc(n + 1, sizeof(char)));
    distance = static_cast<int*>(calloc(n + 1, sizeof(int)));
    parent = static_cast<int*>(calloc(n + 1, sizeof(int)));
    adj = static_cast<List*>(calloc(n + 1, sizeof(List*)));
    discover = static_cast<int*>(calloc(n + 1, sizeof(int)));
    finish = static_cast<int*>(calloc(n + 1, sizeof(int)));
    int i;
    for(i = 0; i <= n; i++){
        color[i] = 'w';
        distance[i] = INF;
        parent[i] = NIL;
        adj[i] = new List();
    }
} 
```

正如您所看到的，我在 C 和 C++ 之间使用了一些混合体，但是纯 C++ 实现也不起作用。在我的文件中，我不断收到错误“错误：â->â 的基本操作数具有非指针类型âListâ”，我认为这一切都来自我的声明方式。我在这里环顾四周，发现其他人抱怨这个错误，但我没有看到它有助于分配给数组。帮助会很棒，因为除此之外我知道这一切都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:45:30.373

您已声明`Graph::adj`为 type `List*`（`adj[i]`与做相同`*(adj+i)`），并且取消引用指向 type 的指针`T`将产生 type 的值`T`，即。的类型`adj[i]`是`List`。

如果你真的想做你想做的声明`Graph::adj`as `List**`，那么它将是一个指向一堆指针的指针`List`，而不是一个指向一堆`List`s 的指针。

* * *

**我不明白，你到底想说什么？**

您正在尝试将 a `List*`（由 返回`new List`）分配给 类型的变量`List`。

```
struct List {
  // ... 
};

List ** adj = static_cast<List**> (
  std::calloc (10, sizeof (List*))
);

/* error

   List * adj = static_cast<List*> (
     std::calloc (10, sizeof (List*))
   );

*/

adj[0] = new List; 
```

* * *

**好的，我明白了.. 但是必须有更好的方法来解决这个问题？**

可以肯定的是，使用 c++ 为您提供的东西并抛弃您的旧 C 习惯。

```
List * adj = new List [10]; // create an array of 10 List

adj[i].member_of_List ...;  // example

delete [] adj;              // free up allocated memory when you are done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:46:13.173

线

```
adj = static_cast<List*>(calloc(n + 1, sizeof(List*))); 
```

表明**adj**是**List**对象的数组，而 line

```
adj[i] = new List(); 
```

表明它是一个指针数组。您应该检查**adj**的定义。顺便说一句，错误是指后一行。

**类型**

我将详细阐述这个问题的理论方面，它围绕 C++ 类型系统展开。

在 C++ 中，每个表达式都有一个*类型*，在编译时就知道了。*表单的任何*表达式的类型

```
static_cast<List*>(...) 
```

是

```
List * 
```

也就是说，只要括号中的表达式类型可以静态转换为 List *，编译器就不会报错，表达式的最终类型将是 List *。函数**calloc**返回 void * 可以转换为任何其他指针；事实上，指针转换通常只是告诉编译器*是的，我知道我在做什么，闭嘴的*一种方式。在大多数平台上，所有指针类型都具有相同的位表示，尽管标准没有强制要求这样的事情，因此原则上不需要生成机器代码来实现这种转换。

表达式的类型，例如

```
new List() 
```

或者

```
new List[10] 
```

是

```
List * 
```

并且包含此类指令的指令会为一个**列表**对象或 10 个列表对象分配足够的空间，并返回一个指向该空间的指针。

如果您更换线路，您可能会更好

```
adj = static_cast<List*>(calloc(n + 1, sizeof(List*))); 
```

和

```
adj = new List[n + 1]; 
```

如果**adj**是指针类型，则表达式的类型如

```
adj[i] 
```

或者

```
*(adj + i) 
```

甚至简单地

```
*adj 
```

是指针类型*减去*一个星号；也就是说，如果**adj**的类型是

```
List * 
```

**adj[i]**的类型是

```
List 
```

这就是您在**adj[i] = new List()**行处收到错误的原因；分配没有意义

```
List * 
```

至

```
List 
```

好消息是，如果您使用**new运算符分配****adj**，您可能不需要使用**new**来创建每个元素；**当你用new**分配一个数组时，它的所有元素都会被创建，并且编译器会自动调用它们的构造函数。

 ********可能的解决方案**

由于您的程序的其余部分显然是正确的，您可以简单地擦除该行

```
adj[i] = new List() 
```

一切都应该正常。但是，正如*约翰*指出的那样，您的意图不是很清楚。你真的需要告诉我们你是否想让**adj**成为一个对象数组

```
List *adj; 
```

或指针数组

```
List **adj; 
```

**进阶话题**

使用C方式的实际区别

```
adj = static_cast<List*>(calloc(n + 1, sizeof(List*))); 
```

或 C++ 方式

```
adj = new List[n + 1]; 
```

是不是每个分配的**List**对象的构造函数**都不会**被前一种方法调用。您可能希望在一些指针应用程序中出现这种情况，但通常您不应该混合使用 C 和 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:58:01.093

C 和 C++ 的混合混合实际上比纯 C++ 更难。

在这种情况下，问题似乎是你有

```
class Graph
{
    ...
    List* adj;
    ...
}; 
```

所以

```
adj[i] = new List(); 
```

是错误的，因为`adj[i]`is of type`List`并且`new List()`is of type `List*`。

解决此问题的方法是使用*Placement new*。

```
#include <new>

new (adj + i) List(); 
```

这将构建一个`List`地址`&adj[i]`，我认为这是您想要实现的。

但这是高级 C++ 并且只有在您尝试编写 C 和 C++ 的混合时才有必要。我会尽快放弃 C 部分。

**编辑**

好的，正如 refp 指出的那样（我错过了）你有

```
adj = static_cast<List*>(calloc(n + 1, sizeof(List*))); 
```

只有当这是一个错误并且您打算这样做时，我的回答才是正确的

```
adj = static_cast<List*>(calloc(n + 1, sizeof(List))); 
```******

# ios - 是否可以在不使用滚动视图的情况下获得缩放效果？(iOS)

> ID：16161773
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:40:09.287
> 
> 标签：ios, zooming, scrollview

大家好，作为初学者，我想知道是否可以在不使用 iOS 滚动视图的情况下获得缩放和平移效果？如果是，那我该怎么做？

[提到了这类问题，但没有任何线索](https://stackoverflow.com/questions/9370629/uiscrollview-zoom-in-and-zoom-out-doesnt-work-properly)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:48:03.687

是的，您可以在没有scrollview.plz的情况下做到这一点，请参见下面的链接

[http://mobile.tutsplus.com/tutorials/iphone/uigesturerecognizer/](http://mobile.tutsplus.com/tutorials/iphone/uigesturerecognizer/)

# xpath - Xpath - 使用子条件查找父属性

> ID：16161774
> 
> 赞同：0
> 
> 时间：2013-04-23T05:40:24.650
> 
> 标签：xpath, ssis

需要一些帮助。我在 SSIS 中使用 XML 任务。

在下面的示例中，我试图找到所有价格 >20 的书籍的 ID。
如果我使用`//book[price > '20']/self::*/attribute::id`我能够得到像 `bk101bk108bk109`. 我怎样才能得到解决方案

```
bk101
bk108
bk109 
```

有什么办法可以解决这个问题？有没有比我尝试的更好的方法来获得结果？XML 任务中的 Xpath 操作设置为“Values”

```
<catalog>
           <book id="bk101">
              <author>Gambardella, Matthew</author>
              <title>XML Developer's Guide</title>
              <genre>Computer</genre>
              <price>44.95</price>
              <publish_date>2000-10-01</publish_date>
              <description>An in-depth look at creating applications 
              with XML.</description>
           </book>
           <book id="bk102">
              <author>Ralls, Kim</author>
              <title>Midnight Rain</title>
              <genre>Fantasy</genre>
              <price>5.95</price>
              <publish_date>2000-12-16</publish_date>
              <description>A former architect battles corporate zombies, 
              an evil sorceress, and her own childhood to become queen 
              of the world.</description>
           </book>
    </catalog> 
```

![在此处输入图像描述](https://i.stack.imgur.com/H5OL1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:55:54.360

1) 如果您需要 - 观看此视频如何在 SSIS 中处理 XML：[http ://www.youtube.com/watch?v=PXDexFNj44M](http://www.youtube.com/watch?v=PXDexFNj44M)

2) 此 xPath 将返回价格大于 20 的书籍的 id：

```
//book/price[text() > 20]/../@id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:58:08.413

您可以指定索引：

```
//book[price > '20'][1]/@id
//book[price > '20'][2]/@id
//book[price > '20'][3]/@id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T11:29:30.850

除了使用 XML 任务，我们可以使用 Foreach NodeList Enumerator 并在其中使用脚本任务来输入值。我刚刚做到了，它奏效了。

# java - Java FX：声明性与程序性

> ID：16161781
> 
> 赞同：11
> 
> 时间：2013-04-23T05:40:45.177
> 
> 标签：java, javafx

我有基于 Web 的编程（php、jsf、...）的背景，以及使用 swing 和 swt 的最少背景。

目前我正在为一个新的桌面应用程序寻找 java fx 2.x，我想知道关于构建实际 GUI 的最佳实践。我可以使用 fxml 进行声明性路线，也可以使用程序性路线。目前我正在做一些快速原型设计，但我想知道是否有令人信服的理由使用 fxml。

**更新**

最后，我为一个中等规模的项目选择了 FXML 路线，尽管场景构建器 beta 在我的 linux 系统上仍然有些不稳定，但事实证明它比原始程序原型要好得多。到目前为止，最大的优势是许多元素（尤其是 hbox、vbox、标签、选项卡……）不再使我的代码混乱，因为它们只存在于 fxml 中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T23:04:53.783

**甲骨文建议**

请参阅 Oracle 建议：

1.  [为什么使用 FXML](http://docs.oracle.com/javafx/2/fxml_get_started/why_use_fxml.htm)
2.  [实施 JavaFX 最佳实践](http://docs.oracle.com/javafx/2/best_practices/jfxpub-best_practices.htm)

Oracle 确实建议通过 Java API 使用 FXML 进行布局定义。

**JavaFX 的替代声明性技术**

JavaFX 中的其他声明性部分是[CSS](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)和[3D 模型](http://www.interactivemesh.org/models/jfx3dimporter.html)

[JavaFX Builder API](http://blog.netopyr.com/2012/01/24/advantages-of-javafx-builders/)是一种半声明性方法，但您可能希望避免这种情况，因为[将来的 JavaFX 版本中将不推荐使用 builder api](http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-March/006725.html)。

此外，如果您使用其他语言进行编程，其中一些会嵌入用于 JavaFX 开发的声明性领域特定语言 (DSL)（例如[ScalaFX](http://code.google.com/p/scalafx/)或[GroovyFX](http://groovyfx.org/)）。

一般来说，对于大多数 UI 标记任务，声明式语法的使用主要胜过过程式编程。这可以从 HTML、CSS、FXML、XAML、MXML、XUL 等技术的突出表现中看出。

**低级编程**

对于开发自定义 JavaFX 控件、操作 JavaFX 画布或处理图像数据等低级任务，程序 Java API 最适合而不是使用声明性 FXML——openjfx 中的[JavaFX 代码库](http://openjdk.java.net/projects/openjfx/)都不使用 FXML。

**个人选择和建议**

最后，这里没有正确的答案。选择权留给开发人员选择他们最喜欢的方法。

你也没有理由不能按照你认为合适的方式混合这两种风格。与混合了过程和声明性方法（例如 html + javascript + ajax）的东西相比，使用直接的声明性方法会给您留下非常严格的 UI（例如静态 html 页面） - JavaFX 也是如此在这种情况下用于 html 开发。

对于小程序，我喜欢在 IDE 中编写一些代码，编译和运行它，而无需处理基于 XML 的 FXML 和 Java 代码之间的上下文切换。但我发现这种仅程序化的方法并不能很好地扩展到更大的项目。将视图分离为 FXML 有助于强制分离关注点和模块化。在没有 FXML 要求的人为分离的情况下，将这些视图和逻辑关注点混合起来太容易了。

我不太喜欢 XML 作为 UI 布局语言。我认为来自过时 JavaFX 1.x 分支的现已失效的 FXD 格式要好得多。但是，FXML 是 JavaFX 2 中最容易访问和使用最广泛的声明性 UI 语法。

我经常将 CSS 与 JavaFX 程序一起使用，并且喜欢将它与 FXML 声明性代码和 Java API 过程代码一起使用。在我看来，将样式与代码分开至少与将布局与代码分开一样重要。

使用 CSS 时，最好将样式放在单独的样式表中，而不是在代码中内联样式。

正如另一个答案中所指出的，JavaFX SceneBuilder 可视化设计工具目前仅适用于 FXML，除此之外，这足以让许多人使用 FXML 来定义他们的 JavaFX UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:14:06.897

我使用 fxml 的原因是它可以由 Scene Builder 生成。我不想手动摆弄布局...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T08:50:26.863

如果您将布局 (FXML) 与应用程序代码分开，您可以要求一些 UX 人员仅使用 SceneBuilder 来处理布局，而不是要求他们使用整个 IDE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-17T08:11:33.277

尽管如此，SceneBuilder 还不够完整，无法使用它。我们必须回到手中的 FXML 来了解细节，这并不好。

SceneBuilder 中很少有带有大而详细的 FXML 文件的小错误。

Oracle 必须更新 SceneBuilder 以确保 JavaFX 健康！因为是很好看的工具！

# ios - 在表视图加载之前执行操作，

> ID：16161782
> 
> 赞同：0
> 
> 时间：2013-04-23T05:40:49.857
> 
> 标签：ios, objective-c, uitableview

我正在开发一款基于回合制的 iOS 游戏，并且我正在尝试编写代码以显示`NSArray`从`GKTurnBasedMatches`. 我有一个简单的问题 - 如何将代码添加到能够尽早执行以填充我的表视图的表视图？当我尝试它时`ViewDidLoad`，它为时已晚并且是空的。如果有一个 init 我会把它塞进去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:43:27.113

您有在 viewDidLoad 之前运行的方法。

例如，`init`控制器的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T06:12:43.543

在应用程序委托中做你的事情，并在 ViewDidLoad 的所有内容之前在 ViewDidLoad 的开头使用它

# c# - 使用 C# 从数据库中检索数据的 Web 服务

> ID：16161786
> 
> 赞同：0
> 
> 时间：2013-04-23T05:41:13.957
> 
> 标签：c#, web-services

**我创建了一个网络服务来检索特定公司代码的所有者列表。当我运行这个网络服务时......它工作正常。请帮助我使用 Web 应用程序执行此操作，因为当我执行相同操作时，显示的结果是“SYSTEM.TOSTRING []”
Web 应用程序包含一个用于输入公司代码的文本框和一个用于在下拉列表

```
 public class OwnerWebService : System.Web.Services.WebService
{     
             string ConnectionString = "Data Source=localdb" + ";" + "Initial Catalog=Prod" + ";" +
             "Persist Security Info=True" + ";" +
             "User ID=User1" + ";" +
             "Password=User1" + ";" +
             "enlist=false";

 [WebMethod]
    public string[] dtFetch(string strCompanyCode)
    {
        List<string> messages = new List<string>();
        SqlConnection cnMySQL = new SqlConnection(ConnectionString );
        cnMySQL.Open();
        string sqlquery = string.Format("SELECT OwnerName FROM tbl_Owner WHERE CompanyCode='{0}'", strCompanyCode);
        SqlCommand com = new SqlCommand(sqlquery, cnMySQL);
        SqlDataReader sqlReader = com.ExecuteReader();

        while (sqlReader.Read())
        {
            messages.Add(sqlReader.GetString(0));
        }

        cnMySQL.Close();
        return messages.ToArray();

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:27:16.013

您不能将一组字符串 (string[]) 放入一个文本框中，该文本框只能显示一个字符串。

您的网络服务很好：它返回所有者名称的集合。所以必须修改用户界面。

有几种解决方案：

1.  在您的用户界面中，将所有字符串连接成一个字符串（String.Join(", ", messages)）。不要在您的网络服务中这样做！不应允许网络服务进行 UI 格式化！
2.  在您的用户界面中，将文本框替换为列表框，表明您可以在该列表框中显示多个所有者名称。

最后一个（离题）建议：为您的 SqlConnection 和 SqlDataReader 使用关键字“使用”。这确保它们将被关闭，即使发生异常也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:46:40.203

不要返回 string[] 而是尝试返回逗号分隔的字符串。

返回逗号分隔的字符串修改最后一行

```
return messages.ToArray(); 
```

至

```
return String.Join(',',messages.ToArray()); 
```

还将返回类型更改为`string` 希望它有帮助......

# angularjs - 跨多个控制器的共享服务的计算属性

> ID：16161789
> 
> 赞同：1
> 
> 时间：2013-04-23T05:41:31.687
> 
> 标签：angularjs

我正在跨多个控制器共享服务。我做了这个简化的小提琴来说明它：http: [//jsfiddle.net/ziaxdk/FFgpX/](http://jsfiddle.net/ziaxdk/FFgpX/)

```
app.service("common", function() {
var first = 1, second = 2;
return {
    first: first,
    second: second,
    // {{model.first+model.second}}    calculate this down here??
    calc: function() { return  first + second;  } // This line is not watched
} 
```

});

如何在服务对象上创建计算规则/属性，以便它们反映到视图中？

问候，

肯尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:36:35.933

这并不是真正的 AngularJS 特有的问题，而是闭包在 JavaScript 中对于原始类型的工作方式。基本上，当您对原始类型进行闭包时，您将获得原始值的副本而不是对它们的引用。您正在断开链接。因此，在您的代码中，您一直在更改不同的变量值，然后是用于计算的变量值。

您可以按如下方式修改您的服务：

```
app.service("common", function() {    
    return {
        first: 1,
        second: 2,        
        calc: function() { return  this.first + this.second;  }
    }
}); 
```

你的代码就可以运行了。

这是一个有效的 jsfiddle：http: [//jsfiddle.net/e3nzY/2/](http://jsfiddle.net/e3nzY/2/)

# jquery - ul li 使用 css 的垂直菜单

> ID：16161794
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:41:44.973
> 
> 标签：jquery, css

我需要一个垂直的 ul li 菜单固定宽度。如果 li 被隐藏，当窗口调整大小时，它会像下拉菜单一样显示。

比如chrome开发工具菜单栏。

请任何人帮助我如何制作它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:41:55.713

我希望你明白这一点。要确定更改菜单，我使用媒体查询，下面是代码示例。如果您需要任何帮助，请写信给我。

**代码**

```
<div class="menu">
    <ul>
        <li><a href="#">Item 1</a></li>
        <li><a href="#">Item 2</a></li>
        <li><a href="#">Item 3</a></li>
        <li><a href="#">Item 4</a></li>  
    </ul>
</div> 
```

**CSS 代码**

```
body {
    width:400px;
}
.menu {
    width: 100px;
}
ul {
    padding: 0;
    margin: 0;
}
ul li a {
    display:block;
    padding: 5px 15px;
    color: #999;
    background-color: #e5e5e5;
    border-top: 1px solid #999;
    text-decoration: none;

}
ul li:first-child {
    border: none;
}
ul li a:hover {
    background-color: #f2f2f2;

}
@media only screen 
and (max-width : 600px) {
    .menu {
        width: 40px;
        height: 40px;
        background: #08c9a2 url('http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/32x32/list_bullets.png') no-repeat scroll 50% 50%;
    }
    .menu ul {
        display:none;
    }
    .menu:hover ul {
        display:block;
    }.menu:hover {
        width: 100px;
        height: auto;
    }
} 
```

**演示**

[http://jsfiddle.net/4nBHf/2/](http://jsfiddle.net/4nBHf/2/)

# abap - 给定一个指向表的字段符号，如何将其分配给结构字段符号？

> ID：16161796
> 
> 赞同：4
> 
> 时间：2013-04-23T05:41:48.750
> 
> 标签：abap

我有一个`<lt_something>`指向表格的字段符号。该表有一行作为内容。我如何将表格中的那一行分配给一个新的字段符号，比如说`<ls_something>`？

我试过了 ：

```
READ TABLE <lt_something> INDEX 1 REFERENCE INTO <ls_something>. 
```

但是上面的代码转储，这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:43:13.477

您正在混淆字段符号和数据引用。使用任一

```
DATA lr_foo TYPE REF TO something.
READ TABLE lt_something INDEX 1 REFERENCE INTO lr_foo.
lr_foo->bar = 'baz'. 
```

或者

```
FIELD-SYMBOLS <ls_foo> TYPE something.
READ TABLE lt_something INDEX 1 ASSIGNING <ls_foo>.
<ls_foo>-bar = 'baz'. 
```

但不要合并这两种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T19:30:49.750

Are you sure that your field symbol table is assigned before you perform your read? The general structure of your read table looks OK, but you should use ASSIGNING in your read statement:

```
FIELD-SYMBOLS: <lt_something> TYPE ANY TABLE,
               <ls_something> TYPE ANY.

" ... blah blah presume you did some work on <lt_something>...

IF <lt_something> IS ASSIGNED.

  READ TABLE <lt_something> INDEX 1 ASSIGNING <ls_something>.

  " Check sy-subrc or <ls_something> IS ASSIGNED.
  " Do work.

ENDIF. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T01:12:00.220

field-symbol 需要是表格的线型，而不是表格本身。

```
DATA:  
     i_vbak            type standard table of vbak.

FIELD-SYMBOLS:  
     <i_vbak> type vbak.

READ TABLE i_vbak ASSIGNING <i_vbak>. 
```

# c# - 单击桌面图标时 WPF 应用程序未打开

> ID：16161799
> 
> 赞同：2
> 
> 时间：2013-04-23T05:41:55.323
> 
> 标签：c#, wpf

我正在开发一个 Wpf 应用程序。在安装我的应用程序时，会在桌面和程序菜单中创建快捷方式图标。

当我单击桌面图标时，我的应用程序将打开。现在我在托盘/任务栏中最小化我的应用程序。单击我的桌面图标时，我的应用程序未最大化。它仍然在托盘/任务栏中最小化。例如，您可以查看 Skype、adobe reader 等。

要求 - 应用程序图标出现在 PC 中的任何位置，例如桌面或程序菜单等，当用户单击快捷方式图标时，我的应用程序应该最大化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:48:11.480

每次单击时，桌面链接都会打开一个新应用程序。如果您希望您的应用程序只打开一次并在启动新应用程序后更改原始应用程序的位置/大小，您必须自己执行此操作：

应用程序启动后，请检查另一个版本是否已在运行。向正在运行的应用程序发送消息。结束自己。如果没有其他应用程序启动，则正常运行并查看消息。消息到达时，检查是否最小化，如果是，则最大化（或将大小/位置更改为您需要的任何内容）。

尝试实施它，如果您对任何步骤有非常具体的问题，请来 SO 并提出一个非常具体的问题:)

# jquery-ui - jQuery UI 对话框错误，当对话框调整大小然后关闭在 IE9 上推送 X 时

> ID：16161804
> 
> 赞同：0
> 
> 时间：2013-04-23T05:42:12.697
> 
> 标签：jquery-ui, jquery-ui-dialog

我正在创建一个新的 jQuery UI 对话框，然后将其调整到更高的高度。当我单击关闭按钮 (X) 时，对话框会向上移动到屏幕顶部，而不是自行关闭。

这只发生在 Internet Explorer 中（在我的例子中是 IE9）。

对此有任何解决方法吗？

这是重现此错误的 js 小提琴：http: [//jsfiddle.net/5WJBR/1/](http://jsfiddle.net/5WJBR/1/)

```
$(document).ready(function(){
  $('#dialog').dialog();
  $('#dialog').dialog('option','height', '1000');
}); 
```

我设法通过使用 css overflow-y:hidden 删除垂直滚动条来使其工作，但在我的用例中，我肯定需要激活垂直滚动。

感谢您的帮助，吉米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:13:45.627

好的，这是对那些感兴趣的人的修复（仅适用于 jQuery UI 版本 1.9.1 及以下）：

```
var that = this;
$('.ui-dialog-titlebar-close').on('mousedown', function({
    that.dialog.dialog('destroy');
}); 
```

仅供参考，在“点击”事件上绑定标题栏将不起作用！！Mousedown 可以。

谢谢，-J

# java - 如何在 Android 中使用每个 for 循环

> ID：16161812
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:42:35.413
> 
> 标签：java, android

我正在实现多个时间发送的短信，并且我正在使用每个 for 循环。`sendSms`当我在 for 循环中调用方法时，它显示更改类型为`Number`to `String`。我已经检查了每个数字的`if`长度是否大于一，然后发送短信。这是我的代码。

```
btnSendSms=(Button)findViewById(R.id.button1_SendSms);
btnSendSms.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
        String message="Hi HElooo";
        String[] number={strCellNo1,strCellNo2,strCellNo3,strCellNo4,strCellNo5};
        Log.e("String Array","->"+number);
        for(int i=0 ; i<number.length ; i++) {
            if(i==0) {
                sendSMS(number, stringMessage);
            }
        }
    }
});

public void sendSMS(String number, String message) {
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";
    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);
    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);
    // SmsManager sms = SmsManager.getDefault();
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(number, null, message, sentPI, deliveredPI);  
}

@Override
protected void onStop() {
    unregisterReceiver(sendBroadCastReciever);
    unregisterReceiver(deliveryBroadCastReciever);
    super.onStop();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:45:39.187

您需要提及`String`要从`number`数组中使用的索引。

```
for(int i=0 ; i<number.length ; i++){
    if(i==0){
        sendSMS(number[i], stringMessage); // mentioned the index here.
    }
} 
```

`for`循环不是必需的，除非您有备用流程（可能的语句`else`在 中`for`）。

# python - Python——通过二叉树进行摩尔斯电码翻译

> ID：16161813
> 
> 赞同：0
> 
> 时间：2013-04-23T05:42:43.570
> 
> 标签：python, binary-search-tree, morse-code

我正在编写一个程序，它将创建一个摩尔斯电码字母表（以及一个句号和一个撇号）的二叉树，然后它将读取一行摩尔斯电码并将其翻译成英文。（是的，我知道查找表会更容易，但我需要整理我的二叉树）。我认为我的一个很好的问题是我想按字母顺序将值放入树中，而不是按符号顺序。但肯定有办法做到这一点吗？因为如果我有一百万个这样的非数字值，我就不需要将它们排序为最简单的插入顺序......对吗？

它从一个文本文件中读取，其中每一行都有一个摩尔斯电码句子。- .... .. ... .. ... ..-. ..- -. .-.-.- 例如，“这很有趣”。符号之间的 1 个空格表示它是一个新字母，2 个空格表示它是一个新单词。

就目前而言，我得到了上面给出的那一行的输出“.$$$”，这意味着它正在读取一个句点，然后得到一个由 ('$$$') 表示的错误，这显然是错误的。 ..

就像我之前说的，我知道我很复杂，但是肯定有一种方法可以做到这一点，而无需先对树中的值进行排序，我现在想弄清楚这一点，而不是在某个时间紧缩。

有没有人有任何见解？这是不是太明显了，以至于我问起来会很尴尬？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:28:47.613

欢迎来到 SO 并感谢您提出一个有趣的问题。是的，在我看来，你让事情有点过于复杂了。例如，这里绝对不需要使用类。您可以重用现有的 python 数据结构来表示树：

```
def add(node, value, code):
    if code:
        add(node.setdefault(code[0], {}), value, code[1:])
    else:
        node['value'] = value

tree = {}
for value, code in alphabet:
    add(tree, value, code)

import pprint; pprint.pprint(tree) 
```

这为您提供了一个带有键`.`,的嵌套字典`-`，并且`value`更易于使用。

# mysql - 计算与rails中的条件匹配的连续记录

> ID：16161817
> 
> 赞同：0
> 
> 时间：2013-04-23T05:43:07.600
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3.1, rails-models

我有一个名为 UserAttempt 的 Rails 模型，它`done_correct:boolean`在数据库中有条目。该模型有一个方法调用`delta_tts`它返回一个浮点值。IE。，`user_attempt.delta_tts = some_float_value.`

现在我想计算数据库中 UserAttempts 的连续条目`done_correct = true and delta_tts > 5`。

请给我解决这个问题的可能方法。

我需要连续的条目，假设数据库中的条目是这样的 -

```
1\. done_correct = true, delta_tts = 5.3 
2\. done_correct = true, delta_tts = 6.3 
3\. done_correct = false, delta_tts = 4.5 
4\. done_correct = true, delta_tts = 5.6 
5\. done_correct = true, delta_tts = 6.8 
6\. done_correct = true, delta_tts = 5.8 
```

我希望计数返回 3。因为只有三个最近的连续条目符合条件。

# maven - 强制 Maven 使用 System 的 javac

> ID：16161820
> 
> 赞同：2
> 
> 时间：2013-04-23T05:43:21.377
> 
> 标签：maven, javac

我对 javac 进行了一些代码更改，并希望 maven 使用我更改的 javac 版本。不幸的是，maven 似乎发布了自己的 javac 实现。如何让 maven 使用系统范围的 javac（`javac`在 shell 中运行时执行的那个）编译源代码。

在不知道这些选项的含义的情况下，我尝试提供`fork`, 并`forceJavacCompilerUse`在此处找到：[http](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html) ://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html 但它们似乎没有帮助全部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:51:48.950

你在正确的球场。看这里：

> [http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)
> 
> 为避免硬编码可执行文件的文件系统路径，您可以使用属性。例如：
> 
> `<executable>${JAVA_1_4_HOME}/bin/javac</executable>`
> 
> 然后每个开发人员在 settings.xml 中定义此属性，或设置环境变量，以便构建保持可移植性。

```
<settings>   
    [...]   
  <profiles>
    [...]
    <profile>
      <id>compiler</id>
        <properties>
          <JAVA_1_4_HOME>C:\Program Files\Java\j2sdk1.4.2_09</JAVA_1_4_HOME>
        </properties>
    </profile>   
  </profiles>   
  [...] 
  <activeProfiles>
    <activeProfile>compiler</activeProfile>   
  </activeProfiles> 
</settings> 
```

> 如果您使用不同的 JDK 构建，您可能需要自定义 jar 文件清单。

我相信关键是设置一个明确的`<executable>`. 而且我怀疑它可能是硬编码的，而不会弄乱环境变量或其他子句。

另请参阅此链接，并查看示例中的“可执行文件” `pom.xml`：

[Maven编译器要使用的JDK版本在哪里指定？](https://stackoverflow.com/questions/9603591/where-is-the-jdk-version-to-be-used-by-maven-compiler-specified)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:52:09.240

我相信 maven 会寻找 JVA_HOME 来查找 java.util 文件。因此，当您将其设置为您的特定 java maven 时应该能够使用它

# jquery - InsertText 的 Ckeditor 问题

> ID：16161826
> 
> 赞同：0
> 
> 时间：2013-04-23T05:43:47.350
> 
> 标签：jquery, ckeditor

我正在尝试使用以下命令向 CKEditor 插入文本：

```
CKEDITOR.instances.Body.insertText('$${FIRSTNAME}'); 
```

当光标位于纯文本时，上述命令可以正常工作。当我尝试在具有属性的文本之间插入文本时，它会插入单个 $ 而不是 $${FIRSTNAME} 的 $$。我已将示例上传到 jsbin 以重现该问题

[http://jsbin.com/ahikeh/1](http://jsbin.com/ahikeh/1)

请提出解决此问题的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:42:23.183

这是一个丑陋的错误：DI调试了代码并找到了原因：

[https://github.com/ckeditor/ckeditor-dev/blob/master/core/editable.js#L1616](https://github.com/ckeditor/ckeditor-dev/blob/master/core/editable.js#L1616)

`String#replace`方法视为`$$`一个`$`（[https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)），因此数据应该受到保护。

恐怕现在没有简单的解决方法，因为您无法事先转义数据。根据上下文，`replace`将使用或不使用该方法。

所以最好的选择是使用其他模板模式 - 例如`%%{foo}`- 它会正常工作。从编辑器获取数据时，您可以替换`%%`为`$$`.

门票：[http ://dev.ckeditor.com/ticket/10367](http://dev.ckeditor.com/ticket/10367)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:53:46.843

尝试使用[insertHtml()](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#insertHtml)代替：

```
CKEDITOR.instances.Body.insertHtml('<b>$${FIRSTNAME}</b>'); 
```

**[更新的演示](http://jsbin.com/ikirup/2/)**

# html - 表格样式

> ID：16161827
> 
> 赞同：0
> 
> 时间：2013-04-23T05:43:48.173
> 
> 标签：html, css

大家，早安。我正在处理一个 html 页面，我需要一个与图像中的表单类似的表单。它将从字段的一部分开始，使用 jquery 我将根据需要添加越来越多的内容。我的问题是我不确定我应该如何设计它，我正在考虑使用一个包含三个输入字段的 div，当我按下 Tab 键时，应该使用 JavaScript 添加另一个 div。我需要一个建议或例子我应该怎么做。 ![示例表单在多个字段中的外观](https://i.stack.imgur.com/w7ZH6.jpg)

# c# - Twitter Streaming API 和 Oauth 用于提取标签

> ID：16161828
> 
> 赞同：1
> 
> 时间：2013-04-23T05:43:59.963
> 
> 标签：c#, twitter, oauth

我试图让 Oauth 与 Twitter 流 API 一起工作，但我收到 401 Unauthorized 错误。我找到了一个为 Oauth 身份验证提供代码的博客，但我不得不对其进行调整以使其能够编译。到目前为止，这是我的主要方法中的内容：

```
 HttpWebRequest webRequest = null;
        HttpWebResponse webResponse = null;
        StreamReader responseStream = null;

        String twitterUser = Properties.Settings.Default.TwitterAccount;
        String twitterPassword = Properties.Settings.Default.TwitterPassword;
        String twitterHashtags = Properties.Settings.Default.TwitterHashtags;

        String twitterConsumerKey = Properties.Settings.Default.TwitterConsumerKey;
        String twitterConsumerSecret = Properties.Settings.Default.TwitterConsumerSecret;
        String twitterAccessToken = Properties.Settings.Default.TwitterAccessTokens;
        String twitterAccessTokenSecret = Properties.Settings.Default.TwitterAccessTokenSecret;

        Int32 wait = 250;

        while (true) //Auto retry on error!
        {
            try
            {
                var postData = "track=" + HttpUtility.UrlEncode(twitterHashtags);
                var requestContentBuffer = Encoding.UTF8.GetBytes(postData);

                webRequest = (HttpWebRequest)WebRequest.Create(new Uri("https://stream.twitter.com/1.1/statuses/filter.json"));
                webRequest.Method = "POST";
                webRequest.ContentLength = requestContentBuffer.Length;
                webRequest.ContentType = "application/x-www-form-urlencoded";

                webRequest.UserAgent = "OAuthTwitterStream";
                webRequest.Headers["Accept-Encoding"] = "deflate, gzip";
                webRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;

                OAuthRequestAuthorizer _requestAuthorizer = new OAuthRequestAuthorizer(twitterConsumerKey, twitterConsumerSecret, twitterAccessToken, twitterAccessTokenSecret);

                _requestAuthorizer.Authorize(webRequest, postData);

                using (var dataStream = webRequest.GetRequestStream())
                {
                    dataStream.Write(requestContentBuffer, 0, requestContentBuffer.Length);
                }

                webResponse = (HttpWebResponse)webRequest.GetResponse();
                responseStream = new StreamReader(webResponse.GetResponseStream());

                while (true)
                {
                    string jsonText = responseStream.ReadLine();

                    dynamic o = JsonConvert.DeserializeObject(jsonText);

                    if (o.disconnect == null) //Sometimes you get a disconnect response, we don't want our clients to see this.
                    {
                        //do something with tweet object
                    }
                }

            }
            catch (WebException ee)
            {
                if (ee.Status == WebExceptionStatus.ProtocolError)
                {
                    if (wait < 10000)
                        wait = 10000;
                    else
                    {
                        if (wait < 240000)
                            wait = wait * 2;
                    }
                }

                Console.Error.WriteLine(ee.Message);

            }
            catch (Exception ee)
            {
                Console.Error.WriteLine(ee.Message);
            }
            finally
            {
                if (webRequest != null)
                {
                    webRequest.Abort();
                }
                if (responseStream != null)
                {
                    responseStream.Close();
                    responseStream = null;
                }

                if (webResponse != null)
                {
                    webResponse.Close();
                    webResponse = null;
                }
                Console.WriteLine("Waiting: " + wait);
                Thread.Sleep(wait);
            }
        } 
```

这是 Oauth 类：

```
using System;
using System.Security.Cryptography;
using System.Collections.Generic;
using System.Text;
using System.Web;

namespace OAuth
{
    public class OAuthBase
    {

        /// <summary>
        /// Provides a predefined set of algorithms that are supported officially by the protocol
        /// </summary>
        public enum SignatureTypes
        {
            HMACSHA1,
            PLAINTEXT,
            RSASHA1
        }

        /// <summary>
        /// Provides an internal structure to sort the query parameter
        /// </summary>
        protected class QueryParameter
        {
            private string name = null;
            private string value = null;

            public QueryParameter(string name, string value)
            {
                this.name = name;
                this.value = value;
            }

            public string Name
            {
                get { return name; }
            }

            public string Value
            {
                get { return value; }
            }
        }

        /// <summary>
        /// Comparer class used to perform the sorting of the query parameters
        /// </summary>
        protected class QueryParameterComparer : IComparer<QueryParameter>
        {

            #region IComparer<QueryParameter> Members

            public int Compare(QueryParameter x, QueryParameter y)
            {
                if (x.Name == y.Name)
                {
                    return string.Compare(x.Value, y.Value);
                }
                else
                {
                    return string.Compare(x.Name, y.Name);
                }
            }

            #endregion
        }

        protected const string OAuthVersion = "1.0";
        protected const string OAuthParameterPrefix = "oauth_";

        //
        // List of know and used oauth parameters' names
        //        
        protected const string OAuthConsumerKeyKey = "oauth_consumer_key";
        protected const string OAuthCallbackKey = "oauth_callback";
        protected const string OAuthVersionKey = "oauth_version";
        protected const string OAuthSignatureMethodKey = "oauth_signature_method";
        protected const string OAuthSignatureKey = "oauth_signature";
        protected const string OAuthTimestampKey = "oauth_timestamp";
        protected const string OAuthNonceKey = "oauth_nonce";
        protected const string OAuthTokenKey = "oauth_token";
        protected const string OAuthTokenSecretKey = "oauth_token_secret";

        protected const string HMACSHA1SignatureType = "HMAC-SHA1";
        protected const string PlainTextSignatureType = "PLAINTEXT";
        protected const string RSASHA1SignatureType = "RSA-SHA1";

        protected Random random = new Random();

        protected string unreservedChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~";

        /// <summary>
        /// Helper function to compute a hash value
        /// </summary>
        /// <param name="hashAlgorithm">The hashing algoirhtm used. If that algorithm needs some initialization, like HMAC and its derivatives, they should be initialized prior to passing it to this function</param>
        /// <param name="data">The data to hash</param>
        /// <returns>a Base64 string of the hash value</returns>
        private string ComputeHash(HashAlgorithm hashAlgorithm, string data)
        {
            if (hashAlgorithm == null)
            {
                throw new ArgumentNullException("hashAlgorithm");
            }

            if (string.IsNullOrEmpty(data))
            {
                throw new ArgumentNullException("data");
            }

            byte[] dataBuffer = System.Text.Encoding.ASCII.GetBytes(data);
            byte[] hashBytes = hashAlgorithm.ComputeHash(dataBuffer);

            return Convert.ToBase64String(hashBytes);
        }

        /// <summary>
        /// Internal function to cut out all non oauth query string parameters (all parameters not begining with "oauth_")
        /// </summary>
        /// <param name="parameters">The query string part of the Url</param>
        /// <returns>A list of QueryParameter each containing the parameter name and value</returns>
        private List<QueryParameter> GetQueryParameters(string parameters)
        {
            if (parameters.StartsWith("?"))
            {
                parameters = parameters.Remove(0, 1);
            }

            List<QueryParameter> result = new List<QueryParameter>();

            if (!string.IsNullOrEmpty(parameters))
            {
                string[] p = parameters.Split('&');
                foreach (string s in p)
                {
                    if (!string.IsNullOrEmpty(s) && !s.StartsWith(OAuthParameterPrefix))
                    {
                        if (s.IndexOf('=') > -1)
                        {
                            string[] temp = s.Split('=');
                            result.Add(new QueryParameter(temp[0], temp[1]));
                        }
                        else
                        {
                            result.Add(new QueryParameter(s, string.Empty));
                        }
                    }
                }
            }

            return result;
        }

        /// <summary>
        /// This is a different Url Encode implementation since the default .NET one outputs the percent encoding in lower case.
        /// While this is not a problem with the percent encoding spec, it is used in upper case throughout OAuth
        /// </summary>
        /// <param name="value">The value to Url encode</param>
        /// <returns>Returns a Url encoded string</returns>
        protected string UrlEncode(string value)
        {
            StringBuilder result = new StringBuilder();

            foreach (char symbol in value)
            {
                if (unreservedChars.IndexOf(symbol) != -1)
                {
                    result.Append(symbol);
                }
                else
                {
                    result.Append('%' + String.Format("{0:X2}", (int)symbol));
                }
            }

            return result.ToString();
        }

        /// <summary>
        /// Normalizes the request parameters according to the spec
        /// </summary>
        /// <param name="parameters">The list of parameters already sorted</param>
        /// <returns>a string representing the normalized parameters</returns>
        protected string NormalizeRequestParameters(IList<QueryParameter> parameters)
        {
            StringBuilder sb = new StringBuilder();
            QueryParameter p = null;
            for (int i = 0; i < parameters.Count; i++)
            {
                p = parameters[i];
                sb.AppendFormat("{0}={1}", p.Name, p.Value);

                if (i < parameters.Count - 1)
                {
                    sb.Append("&");
                }
            }

            return sb.ToString();
        }

        /// <summary>
        /// Generate the signature base that is used to produce the signature
        /// </summary>
        /// <param name="url">The full url that needs to be signed including its non OAuth url parameters</param>
        /// <param name="consumerKey">The consumer key</param>        
        /// <param name="token">The token, if available. If not available pass null or an empty string</param>
        /// <param name="tokenSecret">The token secret, if available. If not available pass null or an empty string</param>
        /// <param name="httpMethod">The http method used. Must be a valid HTTP method verb (POST,GET,PUT, etc)</param>
        /// <param name="signatureType">The signature type. To use the default values use <see cref="OAuthBase.SignatureTypes">OAuthBase.SignatureTypes</see>.</param>
        /// <returns>The signature base</returns>
        public string GenerateSignatureBase(Uri url, string consumerKey, string token, string tokenSecret, string httpMethod, string timeStamp, string nonce, string signatureType, out string normalizedUrl, out string normalizedRequestParameters)
        {
            if (token == null)
            {
                token = string.Empty;
            }

            if (tokenSecret == null)
            {
                tokenSecret = string.Empty;
            }

            if (string.IsNullOrEmpty(consumerKey))
            {
                throw new ArgumentNullException("consumerKey");
            }

            if (string.IsNullOrEmpty(httpMethod))
            {
                throw new ArgumentNullException("httpMethod");
            }

            if (string.IsNullOrEmpty(signatureType))
            {
                throw new ArgumentNullException("signatureType");
            }

            normalizedUrl = null;
            normalizedRequestParameters = null;

            List<QueryParameter> parameters = GetQueryParameters(url.Query);
            parameters.Add(new QueryParameter(OAuthVersionKey, OAuthVersion));
            parameters.Add(new QueryParameter(OAuthNonceKey, nonce));
            parameters.Add(new QueryParameter(OAuthTimestampKey, timeStamp));
            parameters.Add(new QueryParameter(OAuthSignatureMethodKey, signatureType));
            parameters.Add(new QueryParameter(OAuthConsumerKeyKey, consumerKey));

            if (!string.IsNullOrEmpty(token))
            {
                parameters.Add(new QueryParameter(OAuthTokenKey, token));
            }

            parameters.Sort(new QueryParameterComparer());

            normalizedUrl = string.Format("{0}://{1}", url.Scheme, url.Host);
            if (!((url.Scheme == "http" && url.Port == 80) || (url.Scheme == "https" && url.Port == 443)))
            {
                normalizedUrl += ":" + url.Port;
            }
            normalizedUrl += url.AbsolutePath;
            normalizedRequestParameters = NormalizeRequestParameters(parameters);

            StringBuilder signatureBase = new StringBuilder();
            signatureBase.AppendFormat("{0}&", httpMethod.ToUpper());
            signatureBase.AppendFormat("{0}&", UrlEncode(normalizedUrl));
            signatureBase.AppendFormat("{0}", UrlEncode(normalizedRequestParameters));

            return signatureBase.ToString();
        }

        /// <summary>
        /// Generate the signature value based on the given signature base and hash algorithm
        /// </summary>
        /// <param name="signatureBase">The signature based as produced by the GenerateSignatureBase method or by any other means</param>
        /// <param name="hash">The hash algorithm used to perform the hashing. If the hashing algorithm requires initialization or a key it should be set prior to calling this method</param>
        /// <returns>A base64 string of the hash value</returns>
        public string GenerateSignatureUsingHash(string signatureBase, HashAlgorithm hash)
        {
            return ComputeHash(hash, signatureBase);
        }

        /// <summary>
        /// Generates a signature using the HMAC-SHA1 algorithm
        /// </summary>      
        /// <param name="url">The full url that needs to be signed including its non OAuth url parameters</param>
        /// <param name="consumerKey">The consumer key</param>
        /// <param name="consumerSecret">The consumer seceret</param>
        /// <param name="token">The token, if available. If not available pass null or an empty string</param>
        /// <param name="tokenSecret">The token secret, if available. If not available pass null or an empty string</param>
        /// <param name="httpMethod">The http method used. Must be a valid HTTP method verb (POST,GET,PUT, etc)</param>
        /// <returns>A base64 string of the hash value</returns>
        public string GenerateSignature(Uri url, string consumerKey, string consumerSecret, string token, string tokenSecret, string httpMethod, string timeStamp, string nonce, out string normalizedUrl, out string normalizedRequestParameters)
        {
            return GenerateSignature(url, consumerKey, consumerSecret, token, tokenSecret, httpMethod, timeStamp, nonce, SignatureTypes.HMACSHA1, out normalizedUrl, out normalizedRequestParameters);
        }

        /// <summary>
        /// Generates a signature using the specified signatureType 
        /// </summary>      
        /// <param name="url">The full url that needs to be signed including its non OAuth url parameters</param>
        /// <param name="consumerKey">The consumer key</param>
        /// <param name="consumerSecret">The consumer seceret</param>
        /// <param name="token">The token, if available. If not available pass null or an empty string</param>
        /// <param name="tokenSecret">The token secret, if available. If not available pass null or an empty string</param>
        /// <param name="httpMethod">The http method used. Must be a valid HTTP method verb (POST,GET,PUT, etc)</param>
        /// <param name="signatureType">The type of signature to use</param>
        /// <returns>A base64 string of the hash value</returns>
        public string GenerateSignature(Uri url, string consumerKey, string consumerSecret, string token, string tokenSecret, string httpMethod, string timeStamp, string nonce, SignatureTypes signatureType, out string normalizedUrl, out string normalizedRequestParameters)
        {
            normalizedUrl = null;
            normalizedRequestParameters = null;

            switch (signatureType)
            {
                case SignatureTypes.PLAINTEXT:
                    return HttpUtility.UrlEncode(string.Format("{0}&{1}", consumerSecret, tokenSecret));
                case SignatureTypes.HMACSHA1:
                    string signatureBase = GenerateSignatureBase(url, consumerKey, token, tokenSecret, httpMethod, timeStamp, nonce, HMACSHA1SignatureType, out normalizedUrl, out normalizedRequestParameters);

                    HMACSHA1 hmacsha1 = new HMACSHA1();
                    hmacsha1.Key = Encoding.ASCII.GetBytes(string.Format("{0}&{1}", UrlEncode(consumerSecret), string.IsNullOrEmpty(tokenSecret) ? "" : UrlEncode(tokenSecret)));

                    return GenerateSignatureUsingHash(signatureBase, hmacsha1);
                case SignatureTypes.RSASHA1:
                    throw new NotImplementedException();
                default:
                    throw new ArgumentException("Unknown signature type", "signatureType");
            }
        }

        /// <summary>
        /// Generate the timestamp for the signature        
        /// </summary>
        /// <returns></returns>
        public virtual string GenerateTimeStamp()
        {
            // Default implementation of UNIX time of the current UTC time
            TimeSpan ts = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0);
            return Convert.ToInt64(ts.TotalSeconds).ToString();
        }

        /// <summary>
        /// Generate a nonce
        /// </summary>
        /// <returns></returns>
        public virtual string GenerateNonce()
        {
            // Just a simple implementation of a random number between 123400 and 9999999
            return random.Next(123400, 9999999).ToString();
        }

    }
} 
```

最后是 OAuthRequestAuthorizer 类：

```
using OAuth;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Web;

namespace LiveTwitter
{
    public interface IRequestAuthorizer
    {
        void Authorize(HttpWebRequest request, string postData);
    }

    public class OAuthRequestAuthorizer : OAuthBase, IRequestAuthorizer
    {
        private readonly string _twitterConsumerKey;
        private readonly string _twitterConsumerSecret;
        private readonly string _twitterAccessToken;
        private readonly string _twitterAccessTokenSecret;

        public OAuthRequestAuthorizer(string twitterConsumerKey, string twitterConsumerSecret, string twitterAccessToken, string twitterAccessTokenSecret)
        {
            _twitterConsumerKey = twitterConsumerKey;
            _twitterConsumerSecret = twitterConsumerSecret;
            _twitterAccessToken = twitterAccessToken;
            _twitterAccessTokenSecret = twitterAccessTokenSecret;
        }

        public override string GenerateNonce()
        {
            return new Nonce().Value;
        }

        private string BuildHeader(HttpWebRequest request, Uri uri)
        {
            var nonce = GenerateNonce();
            var timeStamp = GenerateTimeStamp();

            string normalizedUrl;
            string normalizedRequestParameters;

            var httpMethod = request.Method;
            var signature = GenerateSignature(uri, _twitterConsumerKey, _twitterConsumerSecret, _twitterAccessToken, _twitterAccessTokenSecret,
                                              httpMethod, timeStamp, nonce, out normalizedUrl,
                                              out normalizedRequestParameters);

            // https://dev.twitter.com/docs/auth/authorizing-request
            return
                string.Format(
                    "OAuth oauth_consumer_key=\"{0}\", " +
                    "oauth_nonce=\"{1}\", " +
                    "oauth_signature=\"{2}\", " +
                    "oauth_signature_method=\"HMAC-SHA1\", " +
                    "oauth_timestamp=\"{3}\", " +
                    "oauth_token=\"{4}\", " +
                    "oauth_version=\"1.0\"",

                    UrlEncode(_twitterConsumerKey),
                    UrlEncode(_twitterConsumerKey),
                    UrlEncode(nonce),
                    UrlEncode(signature),
                    UrlEncode(timeStamp),
                    UrlEncode(_twitterAccessToken));
        }

        public void Authorize(HttpWebRequest request, string postData)
        {
            //NOTE: It's a must to collect all param either in the header/querystring or post body
            var baseUri = string.IsNullOrEmpty(postData) || request.Method.ToUpper() == "GET"
                        ? request.RequestUri
                        : new Uri(string.Format("{0}?{1}", request.RequestUri.AbsoluteUri, postData));

            request.Headers["Authorization"] = BuildHeader(request, baseUri);
        }
    }

    public class Nonce
    {
        public string Value { get; set; }

        public Nonce()
        {
            Value = Guid.NewGuid().ToString();
        }
    }
} 
```

我使用了正确的 API 密钥，并且我认为我在应用程序上设置了正确的设置。知道为什么我一直收到 401 吗？另外，如果有更简单的方法可以让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:26:28.290

Temboo 简化了 Twitter 的 OAuth 流程，将其分解为两个调用：

*   `InitializeOAuth`- 返回一个 Twitter 授权 URL，您可以向用户显示该 URL，并让他们授予您的应用程序访问其 Twitter 帐户的权限
*   `FinalizeOAuth`- 返回对 Twitter 流 API 进行身份验证访问所需的访问令牌。

您可以通过下面的链接在您的浏览器中试验 Temboo 的 Twitter OAuth 支持，然后生成在您的应用程序中使用此行为所需的源代码。如果您的语言不受支持（Temboo 当前没有 C# SDK），您可以生成 REST API cURL 命令。

[https://www.temboo.com/library/Library/Twitter/OAuth/](https://www.temboo.com/library/Library/Twitter/OAuth/)

（全面披露：我在 Temboo 工作，所以如果您有任何问题，请告诉我！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T18:05:29.040

我有一个非常相似的问题（我想我可能从同一个博客中获取了相同的代码来查看它）。

我发现如果我使用所有大写字符作为流 API 的 track= 参数的值，那么我将停止收到 401 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T19:36:54.643

您现在可能已经找到了您的错误或找到了另一种解决问题的方法，但如果您还没有，401 错误是由于您的课程中的复制粘贴错误造成的`OAuthRequestAuthorizer`。您在 BuildHeader 函数的 string.format 方法中提交了第一个参数两次。

现在，当我尝试它时，它会返回 406 错误，但至少它已经解决了您的 401 问题！

# c# - 通过 linq 中的 where 子句全选

> ID：16161833
> 
> 赞同：2
> 
> 时间：2013-04-23T05:44:29.050
> 
> 标签：c#, linq, where

这是我的代码，

```
 Name obj = new Name();
 obj = DB.Names.Where(x => x.age == 20 ).SingleOrDefault(); 
```

我想要做的是更新所有`Name`的`age=20`，

```
 obj.Name = " Mr " + obj.Name ;
 DB.SubmitChanges(); 
```

但是`.SingleOrDefault()`只能返回一个值，我想全部用`age=20`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T05:48:30.653

`Where()`已经返回所有匹配的项目。您不需要添加任何其他内容。试试这个：

```
foreach(var item in DB.Names.Where(x => x.age == 20 ))
{
   item.Name = " Mr " + item.Name;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T05:46:52.857

`DB.Names.Where(x => x.age == 20 )`返回一个`IEnumerable<Name>`您可以迭代`foreach`以修改每个条目的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:45:35.560

你为什么使用`SingleOrDefault`？试试这个：

```
var result = DB.Names.Where(x => x.age == 20).ToList() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T05:48:45.800

`Where`将返回列表匹配条件

```
List<Name> nameList = DB.Names.Where(x => x.age == 20);
foreach(var name in nameList )
{
    name.Name = " Mr " + name.Name ;
}
DB.SubmitChanges(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T05:52:50.853

> 但是 .SingleOrDefault() 只能返回一个值，我想用 age=20 得到所有值。

是的，因此删除`SingleOrDefault()`您将获得与条件匹配的所有记录，然后您还可以尝试使用`Foreach`来更新您从初始名称中过滤的每个项目。

试试下面的代码：

```
DB.Names.Where(x => x.age == 20 ).ToList().ForEach(n=>n.Name = " Mr " + n.Name); 
```

# c# - c#mono在静态实例化中调用公共方法失败

> ID：16161836
> 
> 赞同：0
> 
> 时间：2013-04-23T05:44:38.223
> 
> 标签：c#, mono

我有一个基本上如下的线程。问题是 Server 是一个公共类，而 world 是一个静态 World 实例，它有一个名为 Tick() 的公共 void 方法。每次工作线程调用 Server.world.Tick() 时，它都会进入 catch 块并发生 System.TypeLoadException。

此代码在 .NET 4.0 的 Windows 上运行良好，目前仅在 Mono-Develop 的 Mono 调试中失败。

```
 while (!Server.shutdownServer)
        {
            try
            {
                Server.world.Tick();
            }
            catch (Exception e)
            {
            }
         } 
```

如你看到的。非常感谢帮助。

# google-maps - 在此自定义地图上的何处添加天气图层？

> ID：16161839
> 
> 赞同：0
> 
> 时间：2013-04-23T05:44:46.153
> 
> 标签：google-maps, google-maps-api-3, maps, google-weather-api

我需要一些帮助来确定将任何天气层代码放在自定义 Google 地图（API v3）的位置，任何输入将不胜感激:)

我们创建了一个自定义的 Google 地图，在上面我们有 2 个带有简单切换的 Fusion Table 图层。从开发人员文档以及我在此站点上找到的内容中，我可以看到我需要添加这段代码：

```
var weatherLayer = new google.maps.weather.WeatherLayer({
temperatureUnits: google.maps.weather.TemperatureUnit.FAHRENHEIT
});
weatherLayer.setMap(map); 
```

但我完全不知道在哪里放置它，因为每次我尝试添加它（现在 2 天）时，代码都会中断，并且在 F12 控制台窗口中显示一个带有各种错误的空白白页。

我们需要在哪里添加它，我们如何将它添加到切换？这是我们的工作：

```
 <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=weather"></script>
    <script src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
    var map;

    var layer1;
    var tableid = '';

    var layer2;
    var tableid2 = 'xxxxx';

    var layer3;
    var tableid3 = 'xxxxx';

    function initialize() {
      map = new google.maps.Map(document.getElementById('map_canvas'), {
        center: new google.maps.LatLng(31.499, -111.202),
        zoom: 10,
     mapTypeControl: true,
        mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.TOP_CENTER
    },
    panControl: true,
    panControlOptions: {
        position: google.maps.ControlPosition.TOP_LEFT
    },
    zoomControl: true,
    zoomControlOptions: {
        style: google.maps.ZoomControlStyle.LARGE,
        position: google.maps.ControlPosition.LEFT_CENTER
    },
    scaleControl: true,
    scaleControlOptions: {
        position: google.maps.ControlPosition.BOTTOM_LEFT
    },
    streetViewControl: false,
    streetViewControlOptions: {
        position: google.maps.ControlPosition.LEFT_TOP
    }
  });

  var styledMapType = new google.maps.StyledMapType({
    map: map,
    name: 'Styled Map'
  });

  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');

  layer1 = new google.maps.FusionTablesLayer({
    query: {
      select: '',
      from: tableid
    },
    map: map
  });

  layer2 = new google.maps.FusionTablesLayer({
    query: {
      select: 'LOC',
      from: tableid2
    },
    map: map
  });

  layer3 = new google.maps.FusionTablesLayer({
    query: {
      select: 'geometry',
      from: tableid3
    },
suppressInfoWindows:true,
    map: map
  });
}

function changeMap(layerNum) {
  if (layerNum == 2) {
    update(layer2);
  }
  if (layerNum == 3) {
    update(layer3);
  }
}

function update(layer) {
  var layerMap = layer.getMap();
  if (layerMap) {
    layer.setMap(null);
  } else {
    layer.setMap(map);
  }
}

</script>

<style type="text/css">
    #toggle_box { 
        position: absolute; 
        top: 7px; 
        right: 7px; 
        padding: 3px; 
        border: 1px solid #707735; 
        background: #DED9C6; 
        font-family: 'Coda', cursive;
    }
    body { 
        margin: 0px; 
        padding: 0px;
        font-family: 'Coda', cursive;
        }
    #map_canvas {
        position: absolute;
        right: 0;
        top: 0;
        width: 100%;
        height: 100%;
        font-family: 'Coda', cursive;
    }
    </style>
</head>
<body onload="initialize();">
<div id="map_canvas"></div>
<div id="toggle_box"><input type="checkbox" value="2" onclick="changeMap(this.value)" checked="checked" />REFERENCE POINTS
<input type="checkbox" value="3" onclick="changeMap(this.value)" checked="checked" />AZ COUNTIES</div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:17:37.037

将它放在地图初始化的地方，例如在该行之前：

```
var styledMapType = new google.maps.StyledMapType({ 
```

# python - OpenERP 7：客户端域过滤器中的关系字段

> ID：16161840
> 
> 赞同：1
> 
> 时间：2013-04-23T05:45:04.183
> 
> 标签：python, xml, openerp

这里显示了我的错误

```
2013-04-23 05:36:03,877 17001 ERROR demo openerp.sql_db: bad query: SELECT "res_company".id FROM "res_company" WHERE "res_company".id = 'deduction_id.bpl_company_id.id' ORDER BY "res_company"."name"  
Traceback (most recent call last):
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7/openerp/sql_db.py", line 226, in execute
    res = self._obj.execute(query, params)
DataError: invalid input syntax for integer: "deduction_id.bpl_company_id.id"
LINE 1: ...y".id FROM "res_company" WHERE "res_company".id = 'deduction...
                                                             ^

2013-04-23 05:36:03,878 17001 ERROR demo openerp.osv.osv: Uncaught exception
Traceback (most recent call last): 
```

这里显示了我尝试添加域过滤器的代码

```
class estate_bank_deductions(osv.osv):
    _name = 'bpl.estate.bank.deductions'
    _description = 'Estate Bank Deductions'
    _columns = {
                'deduction_id':fields.many2one('bpl.deduction.estate.data', 'Bank Deductions', ondelete='cascade'),
                'name': fields.many2one('bpl.deduction.registration', 'Deduction', domain="[('type','=','bank'),('bpl_company_id.id','=','deduction_id.bpl_company_id.id')]"),
                'bank_id': fields.many2one('bpl.bank.registration', 'Bank Name'),
                'branch_id': fields.many2one('bpl.branch.registration', 'Branch'),
        } 
```

这是我父母的遗产银行扣除课程的一部分

```
_name = 'bpl.deduction.estate.data'
_description = 'BPL Deduction Estate Data'
_columns = {
            'bpl_company_id':fields.many2one('res.company', 'Company', help='Company'), 
```

请帮我解决这个问题。？我的域过滤机制中是否缺少任何内容，或者这种方式不正确。？

* * *

亲爱的奥多尼，

还有一件事要澄清，现在需要将我的领域定义为`fields.function`？

但问题是在添加域过滤器之后，其他不相关的记录也加载到我的下拉列表中（在我添加了 widget="selection" 属性之后）。那么如何限制它们。[我已经发布了那个问题](https://stackoverflow.com/questions/16134784/widget-selection-with-domain-fields-issue)

希望你能就此给我建议......再次非常感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T08:42:31.473

无论哪种方式都行不通。模型字段仅支持两种域过滤器：

*   **服务器端（列表）域**，指定为元组列表：只能是静态的，并且主要用于[**`one2many`**](http://doc.openerp.com/trunk/developers/server/03_module_dev_02/#relational-types)和[**`many2many`**](http://doc.openerp.com/trunk/developers/server/03_module_dev_02/#relational-types)字段。当读取字段的值列表时，这些过滤器将应用于服务器端，并且永远不会在客户端使用。域只能在每个域元素的右侧包含常量。一个有效的服务器端域的示例是：

    ```
    # filter deductions based on an imaginary "confirmed" boolean field
    deduction_ids = fields.one2many('bpl.estate.bank.deductions', 'bank_id',
                                    string="Confirmed Deductions",
                                    domain=[('confirmed', '=', True)]) 
    ```

*   **客户端（字符串）域**，指定为服务器端域的*字符串表示形式*：可以是静态的或动态的，主要用于[**`many2one`**](http://doc.openerp.com/trunk/developers/server/03_module_dev_02/#relational-types)字段，从不在服务器端进行评估。它们被简单地复制到使用该字段的任何视图中，并在客户端进行解释以过滤该字段的可用选项列表。每个域元素的右侧可以通过引用视图中包含的任何其他字段的名称来动态化，并且在评估域时将替换为字段值。字段值将以[`write()`](http://doc.openerp.com/trunk/developers/server/api_models/#openerp.osv.orm.BaseModel.write)保存更改时传递的相同格式返回。有效客户端域的示例是：

    ```
    # only allow choosing a branch that belongs to the right bank registration
    # (here `branch_id` refers to the current value of the `branch_id` field
    # in the form view
    'branch_id': fields.many2one('bpl.branch.registration', 'Branch',
                                 domain="[('branch_id','=',branch_id)]") 
    ```

    **更新：**当心，您不能`widget="selection"`与客户端域结合使用，因为此选项会将您的`many2one`字段转换为假`fields.selection`的，其选项在服务器端进行静态评估。在这种情况下，您的客户端域将被忽略，并且可用值列表永远不会改变。现在，如果您只是想避免用户创建新值，您可以限制访问权限以防止这种情况发生，如果您想避免显示图标来查看/编辑目标对象，您可以添加`options='{"no_open": True}'`到表单视图中的字段。

## **问题**

在您的情况下，您似乎想使用客户端域根据`deduction_id`字段的当前值进行过滤。但是您的域表达式`('bpl_company_id.id','=','deduction_id.bpl_company_id.id')`不正确：

*   左边必须指一个字段或字段路径，而`.id`后缀在这里没用，`bpl_company_id`足以过滤该`many2one`字段。
*   右侧可以是动态的或静态的，具体取决于您将其设为常量还是变量。如果您引用该值，`'deduction_id.bpl_company_id.id'`那么您将`m2o`ID（或`m2o`名称，如果您删除`.id`后缀）与文字字符串 value 进行比较`"deduction_id.bpl_company_id.id"`，当然不是您想要的。
    如果您按照 user2310008 的建议删除引用，您确实会使其动态化，但值`deduction_id`将是所选“扣除”的 ID！您不能`browse_record`像在服务器端那样将其视为（类似 ActiveRecord 的对象），因此当您这样做时，`"deduction_id.bpl_company_id.id"`您会收到错误消息，因为整数没有`bpl_company_id`属性。

## **解决方案**

实现这种过滤的常用方法是[`on_change`](http://doc.openerp.com/trunk/developers/server/06_misc_on_change_tips/#on-change-methods)在字段上添加一个方法，并使用它通过方法可以返回的键`deduction_id`来动态改变列的域。像这样的东西：`name``domain``onchange`

```
 <!-- in the XML view -->
    <field name="deduction_id" on_change="onchange_deduction_id(deduction_id)"/>
    <field name="name"/> 
```

```
 # in the python model
    def onchange_deduction_id(self, cr, uid, ids, deduction_id, context=None):
        if deduction_id:
            deduction = self.pool['bpl.deduction.estate.data'].browse(cr, uid,
                                                                      deduction_id,
                                                                      context)
            return {'domain': {'name': [('bpl_company_id', '=',
                                         deduction.bpl_company_id.id)]}
        return {} # or perhaps a default domain? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:27:03.837

试试这个。

```
('bpl_company_id','=',deduction_id.bpl_company_id.id) 
```

没有引号的第二部分，该字段不能递归完成。

# facebook-opengraph - 打开图形图像标签正在使用“赞”按钮，但不适用于直接共享

> ID：16161844
> 
> 赞同：1
> 
> 时间：2013-04-23T05:45:29.807
> 
> 标签：facebook-opengraph

我在此链接中面临有关在 Facebook 上分享的问题：[http](http://www.voiceamerica.com/channel/247/voiceamerica-business) : //www.voiceamerica.com/channel/247/voiceamerica-business 如果我通过类似按钮分享，那么 og:image 工作正常，但如果我尝试与 Facebook 上的书签或直接链接共享相同的链接，然后它不会从 og:image 标签获取正确的图像。其采摘随机图像。 [美国之音](http://www.voiceamerica.com/channel/247/voiceamerica-business)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T17:07:53.243

[使用https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)调试您的 URL，这将显示您的标签是否有问题。

# wxpython - 如何将 wxcheckbox 条目写入和读取到注册表？

> ID：16161847
> 
> 赞同：0
> 
> 时间：2013-04-23T05:45:36.070
> 
> 标签：wxpython

我正在使用 wxpython 开发一个 GUI，我可以在其中输入不同格式的信息，例如 textctrl、spinctrl、复选框等。我可以将所有这些条目写入和写入注册表，除了复选框。如果有人能告诉我我该怎么做就太好了？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:28:49.157

要读取和写入 Windows 注册表，通常的方法是使用 Python _winreg 模块。我只需将 EVT_CHECKBOX 绑定到处理程序，然后使用 IsChecked() 方法查看它是否被检查。根据返回的内容，您可以使用上述模块将 1 或 0（或 True/False）写入注册表。

以下是 _winreg 上的几个链接：

*   [http://docs.python.org/2/library/_winreg.html](http://docs.python.org/2/library/_winreg.html)
*   [http://www.blog.pythonlibrary.org/2010/03/20/pythons-_winreg-editing-the-windows-registry/](http://www.blog.pythonlibrary.org/2010/03/20/pythons-_winreg-editing-the-windows-registry/)

# javascript - javascript中的ruby变量在rails函数中

> ID：16161850
> 
> 赞同：0
> 
> 时间：2013-04-23T05:45:48.300
> 
> 标签：javascript, html, ruby, ruby-on-rails-3

我正在尝试根据 rails 数据库值更改行的颜色。行内还有一个下拉菜单表格。在更改下拉表单中的选定值时，我通过表单提交将更改的值更新到数据库，然后调用 javascript 函数通过 AJAX 使用新值更改行颜色。

html.erb：

```
<%= f.select(:status, ["to call","didn't connect","confirmed","rejected"], {:selected => lead.status}, :onchange => %Q[$('#lead_form_#{lead.id}').submit();document.getElementById('lead_row_#{lead.id}').bgcolor=Application.getRowColour("#{lead.status}");]) %> 
```

在上面的代码中，正在发生的事情是传递给 getRowColour 的 #{lead.status} 始终相同，即当我第一次加载页面时状态的初始值。所以有多少次我通过下拉菜单更改状态，getRowColour("") 不会改变。

**页面来源：**

```
$('#lead_form_133').submit();document.getElementById('lead_row_133').bgcolor=Application.getRowColour("confirmed"); 
```

可以看出 getRowColour() 采用一个常数值，而不是在每次调用时重新评估它。如何将我的最新状态参数发送到此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:30:21.180

`status`假设选择框的 id`status`考虑使用以下结构：

```
<%= f.select(:status, ["to call","didn't connect","confirmed","rejected"], 
             {:selected => lead.status} %> 
```

然后添加`onchange`处理程序逻辑：

```
<script type="text/javascript">
    $("#status").change(function() {
        $('#lead_form_#{lead.id}').submit();
        $('#lead_row_#{lead.id}')
          .css('background-color', Application.getRowColour($("#status").val())
    }); 
</script> 
```

# java - 如何使 initComponent 对象需要传递一些东西？

> ID：16161851
> 
> 赞同：0
> 
> 时间：2013-04-23T05:45:51.677
> 
> 标签：java, swing, init

我有一个带有 JList 的视图，并且想手动向其中添加内容。
我已经创建了一个 DefaultListModel，就像其他网站上建议的那样，但我无法将它传递给 JList，因为它位于受保护的 initComponents 中。
我尝试通过在记事本++中打开.java文件来手动更改它，但是当我运行我的项目时，我在启动时遇到了“java.lang.IllegalArgumentException：dataModel必须为非空”异常，所以我把它改回来了。
JFrame 属性中是否有一个选项可以让我将 JList 设置为需要传入 DefaultListModel，还是我做错了？

# r - 在循环中保存 R 中的图

> ID：16161852
> 
> 赞同：6
> 
> 时间：2013-04-23T05:45:53.373
> 
> 标签：r, ggplot2

昨天我将 R 升级到 3.0.0 版，将 ggplot2 升级到 0.9.3.1 版（并对我的脚本做了一些小改动）。现在我在尝试保存绘图时遇到错误 - 不幸的是，错误没有用较小的数据框重现，所以我包含了生成相同大小的代码。

```
library("ggplot2")

# Create data frame
# Time interval ID (x)
bin.ts.avg <- as.data.frame(rep(1:18, 31))
names(bin.ts.avg) <- "x"
# Time (sequence of 10 minuter intervals between 7am and 10am)
tt.month.bins <- seq(from=as.POSIXct("2012-01-01 GMT"), to=as.POSIXct("2012-01-01 GMT") + 60*60*24*31, by="10 mins")
tt.month.bins <- tt.month.bins[-length(tt.month.bins)]
temp <- as.numeric(format(tt.month.bins, "%H"))
ind <- which(temp >=7 & temp <= 9)  
tt.month.bins <- tt.month.bins[ind]
bin.ts.avg$dep <- tt.month.bins
# Value (with some NA)
bin.ts.avg$tt <- runif(558, min=2.5, max=5)
bin.ts.avg$tt[trunc(runif(200, min=1, max=558))] <- NA
# Day
bin.ts.avg$depday <- rep(1:31, each=18)

for (i in 1:2){
  if (1){
    hist(rnorm(100))
    dev.print(file="MyHist.png",device=png, bg="white",  width=640, height=352) 

    p <- ggplot(bin.ts.avg, aes(x, tt)) + geom_point() +geom_line() + facet_grid(.~depday)
    p <- p + ggtitle("10 minute averages")+ xlab("Hour") + ylab("Values")    
    p <- p + scale_x_continuous(breaks=c(min(bin.ts.avg$x), max(bin.ts.avg$x)), labels=c("7", "10"))
    print(p)  
    dev.print(file="MyGGPlot.png",device=png, bg="white",  width=640, height=352) 
  }
} 
```

在运行此脚本时，我收到以下错误消息：

> UseMethod（“深度”）中的错误：没有适用于“深度”的方法应用于“NULL”类的对象

但是，如果我逐行运行脚本，一切运行正常（下图）。 ![ggplot 的外观](https://i.stack.imgur.com/kn4Uz.png)现在，如果我更改 for 循环并使用 dev.copy 和 ggsave 而不是 dev.print，如下所示

```
for (i in 1:2){
  if (1){
    hist(rnorm(100))
    dev.copy(file="MyHist.png",device=png, bg="white",  width=640, height=352) 
    dev.off()

    p <- ggplot(bin.ts.avg, aes(x, tt)) + geom_point() +geom_line() + facet_grid(.~depday)
    p <- p + ggtitle("10 minute averages")+ xlab("Hour") + ylab("Values")    
    p <- p + scale_x_continuous(breaks=c(min(bin.ts.avg$x), max(bin.ts.avg$x)), labels=c("7", "10"))
    print(p)  
    ggsave(filename="MyGGPlot.png")
  }
} 
```

在尝试使用 Paint 打开“MyGGPlot.png”时，我收到一条错误消息，指出

```
A sharing violation occurred while accessing <filename> 
```

我使用 RStudio 版本 0.97.449 运行脚本。关于我需要更改以保存当前图的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T06:11:22.400

几点

`graphics.off()`之后使用`dev.copy`。这将关闭所有图形设备。您也可以调用`dev.off()`两次（但`graphics.off()`它是一个包装器，基本上会调用`dev.off()`足够的时间来关闭所有图形设备

`ggsave`不需要`print`ed 对象（这与常见[问题解答 7.22](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f)**无关**）。

默认值`last_plot`是最后`ggplot`创建、修改或打印的对象的值。因此创建`p`足以 `ggsave('filname.png')`保存该对象。

```
for (i in 1:2){
  if (1){
    hist(rnorm(100))
    dev.copy(file="MyHist.png",device=png, bg="white",  width=640, height=352) 
    graphics.off()

    p <- ggplot(bin.ts.avg, aes(x, tt)) + geom_point() +geom_line() + facet_grid(.~depday)
    p <- p + ggtitle("10 minute averages")+ xlab("Hour") + ylab("Values")    
    p <- p + scale_x_continuous(breaks=c(min(bin.ts.avg$x), max(bin.ts.avg$x)), labels=c("7", "10"))
   # no need to print p
   ggsave(filename="MyGGPlot.png")
   # note specifying p is redundant but explicit.
   # ggsave(filename = 'MyGGplot.png', plot = p)
  }
} 
```

# xpath - 端点的动态参数

> ID：16161855
> 
> 赞同：1
> 
> 时间：2013-04-23T05:46:03.940
> 
> 标签：xpath, apache-camel, endpoint

如何将动态值设置为端点的参数？

有效载荷：

```
<person>
<name>john</name>
<acno>9876543210</acno>
</person> 
```

路线 ：

```
<route>
    <from uri="http://localhost:8092/test/"/>
    <setProperty propertyName="acno">
            <xpath resultType="java.lang.String">//person/acno</xpath>
    </setProperty>
    <setProperty propertyName="name">
            <xpath resultType="java.lang.String">//person/name</xpath>
    </setProperty>
    <to uri="https://server/rest/services/test?accountno=${property.acno}&amp;accountname=${property.name}"/>
</route> 
```

要通过 xpath 从有效负载中获取的参数值。非常感谢解决此问题或提供解决方法的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:01:49.663

您不能使用端点 URI 内标头中的动态内容。

您可以做的是通过使用一些 xpath 或其他任何东西来预先构造 URI，并将其放入标头中。然后，您可以使用[收件人列表](http://camel.apache.org/recipient-list.html)构造来使用该动态创建的 URI。

您在链接中有一些示例

**更新：**请参阅克劳斯易卜生在评论中建议的此[链接](http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html)

# linux - 安装 appdynamics 的问题

> ID：16161856
> 
> 赞同：2
> 
> 时间：2013-04-23T05:46:12.493
> 
> 标签：linux, apache, tomcat, appdynamics

我已经在我的服务器上安装了 Appdynamics lite，当我使用 root 用户运行我的 tomcat 实例时它运行良好。但是从我创建一个新用户“Tomcat”并开始使用这个用户执行我的 apache tomcat 开始，我无法运行 appdynamics。我已经将此位置的 javaagent 复制到了 tomcat“/home/tomcat/profiler/AppServerLite”的所有权限（读、写、执行）。它抛出如下异常：

```
 Install Directory resolved to[/home/tomcat/profiler/AppServerLite]
java.lang.RuntimeException: Invalid Agent Installation Directory [/home/tomcat/profiler/AppServerLite]
        at com.singularity.ee.agent.appagent.AgentEntryPoint.addThirdPartyURLs(AgentEntryPoint.java:190)
        at com.singularity.ee.agent.appagent.AgentEntryPoint.premain(AgentEntryPoint.java:144)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:343)
        at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:358)
Install Directory resolved to[/home/tomcat/profiler/AppServerLite]
java.lang.RuntimeException: Invalid Agent Installation Directory [/home/tomcat/profiler/AppServerLite]
        at com.singularity.ee.agent.appagent.AgentEntryPoint.addThirdPartyURLs(AgentEntryPoint.java:190)
        at com.singularity.ee.agent.appagent.AgentEntryPoint.premain(AgentEntryPoint.java:144)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:343)
        at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:358)
18 Apr, 2013 1:57:03 PM org.apache.catalina.core.AprLifecycleListener init 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T02:35:52.930

您应该复制所有文件以运行代理，而不仅仅是 javaagent.jar。

这是一个关于它的线程。[http://appsphere.appdynamics.com/t5/Lite-for-Java/Keep-getting-a-quot-Invalid-Agent-Installation-Directory-quot-on/td-p/1151](http://appsphere.appdynamics.com/t5/Lite-for-Java/Keep-getting-a-quot-Invalid-Agent-Installation-Directory-quot-on/td-p/1151)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:48:17.803

问这个问题的好地方是 AppDynamics 讨论论坛，以便 AppDynamics 支持人员可以直接回答您... [http://appsphere.appdynamics.com/t5/Discussions/ct-p/Discussions](http://appsphere.appdynamics.com/t5/Discussions/ct-p/Discussions)

我猜某处存在权限问题。

# avassetexportsession - 如何更改（修改）视频帧率和比特率？

> ID：16161861
> 
> 赞同：2
> 
> 时间：2013-04-23T05:46:44.613
> 
> 标签：avassetexportsession, avasset

我需要为网站服务重新编码照片库中的视频文件。我尝试了下面的代码，但出现了“视频合成必须有合成说明”之类的错误。

（代码）

```
AVAsset *anAsset = [[AVURLAsset alloc] initWithURL:videoFileUrl options:nil];
NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:anAsset];
if ([compatiblePresets containsObject:AVAssetExportPresetMediumQuality]) {

    self.exportSession = [[AVAssetExportSession alloc]
                          initWithAsset:anAsset presetName:AVAssetExportPresetPassthrough];

    AVMutableComposition* mixComposition = [[AVMutableComposition alloc] init];

    AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, anAsset.duration) ofTrack:[[anAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

    AVMutableVideoCompositionLayerInstruction *FirstlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstTrack];

    AVMutableVideoCompositionInstruction * MainInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    MainInstruction.layerInstructions = [NSArray arrayWithObjects:FirstlayerInstruction,nil];

    AVMutableVideoComposition *MainCompositionInst = [AVMutableVideoComposition videoComposition];
    MainCompositionInst.frameDuration = CMTimeMake(1, 30);    // bit rate
    MainCompositionInst.renderSize = CGSizeMake(640, 480);    // frame rate

    [self.exportSession setVideoComposition:MainCompositionInst];

    NSURL *furl = [NSURL fileURLWithPath:self.tmpVideoPath];

    self.exportSession.outputURL = furl;

    self.exportSession.outputFileType = AVFileTypeQuickTimeMovie;

    CMTime start = CMTimeMakeWithSeconds(self.startTime, anAsset.duration.timescale);
    CMTime duration = CMTimeMakeWithSeconds(self.stopTime-self.startTime, anAsset.duration.timescale);
    CMTimeRange range = CMTimeRangeMake(start, duration);
    self.exportSession.timeRange = range;

    self.trimBtn.hidden = YES;
    self.myActivityIndicator.hidden = NO;
    [self.myActivityIndicator startAnimating];
    [self.exportSession exportAsynchronouslyWithCompletionHandler:^{

        switch ([self.exportSession status]) {
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Export failed: %@", [[self.exportSession error] localizedDescription]);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Export canceled");
                break;
            default:
                NSLog(@"NONE");
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self.myActivityIndicator stopAnimating];
                    self.myActivityIndicator.hidden = YES;
                    self.trimBtn.hidden = NO;
                    [self playMovie:self.tmpVideoPath];
                });

                break;
        }
    }];

} 
```

}

无需更改帧速率和比特率，它就可以完美运行。请给我任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T15:00:37.073

帧率我仍在寻找，但比特率已经通过这种替代解决了`AVAssetExportSession`：[https ://github.com/rs/SDAVAssetExportSession](https://github.com/rs/SDAVAssetExportSession)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:43:56.417

不确定，但有些事情要看。不幸的是，在 AVFoundation 中的这些情况下，错误消息并没有告诉你太多。

一般来说，我会让事情变得简单并慢慢添加功能。首先，确保所有层都从零开始，然后在最后的持续时间结束。对主要构图做同样的事情。无效时间可能会给您这样的错误。**对于您的指示，请确保它同时开始并同时结束**。

# uml - 我是否需要为我使用的所有对象实例和 Microsoft 方法制作类图？

> ID：16161863
> 
> 赞同：0
> 
> 时间：2013-04-23T05:47:06.073
> 
> 标签：uml, sdlc

我在一个名为 MyGrades 的程序中有以下用 C# 制作的类：

```
Menu.cs
Grade.cs
Student.cs 
```

我的学生班有以下实例：

```
 private Grade test = new Grade(300);
 private Grade hwQz = new Grade(700); 
```

在 Menu.cs 中，我分别使用以下 Microsoft 方法和 Microsoft Class：

```
Console.Clear()
Console.WriteLine()
Console.Write()
Console.ReadKey()

ConsoleKeyInfo key = Console.ReadKey(); 
```

在 Grade.cs 中，我使用以下 Microsoft 方法：

```
Console.Clear()
Console.WriteLine()
Console.Write()
Console.ReadKey 
```

我是否需要为控制台以及我的所有类实例制作类图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:53:22.203

编程语言不需要您绘制类图。

如果您的课程讲师要求您绘制图表，您需要确切地询问他们想要什么。

通常，当它们与理解图表相关时，您应该包括其他类。让所有东西都指向 Logging 类是没有用的。如果某些东西特别与可能相关的控制台交互。

# sql - 使用 Excel VBA 将数据导出到 MS Access 表

> ID：16161865
> 
> 赞同：24
> 
> 时间：2013-04-23T05:47:09.510
> 
> 标签：sql, excel, ms-access, vba

我目前正在使用以下代码将数据从工作表导出到 MS Access 数据库，代码循环遍历每一行并将数据插入到 MS Access 表中。

```
Public Sub TransData()

Application.ScreenUpdating = False
Application.EnableAnimations = False
Application.EnableEvents = False
Application.DisplayAlerts = False

ActiveWorkbook.Worksheets("Folio_Data_original").Activate

Call MakeConnection("fdMasterTemp")

For i = 1 To rcount - 1
    rs.AddNew
    rs.Fields("fdName") = Cells(i + 1, 1).Value
    rs.Fields("fdDate") = Cells(i + 1, 2).Value
    rs.Update

Next i

Call CloseConnection

Application.ScreenUpdating = True
Application.EnableAnimations = True
Application.EnableEvents = True
Application.DisplayAlerts = True

End Sub 
```

* * *

```
Public Function MakeConnection(TableName As String) As Boolean
'*********Routine to establish connection with database

   Dim DBFullName As String
   Dim cs As String

   DBFullName = Application.ActiveWorkbook.Path & "\FDData.mdb"

   cs = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & DBFullName & ";"

   Set cn = CreateObject("ADODB.Connection")

   If Not (cn.State = adStateOpen) Then
      cn.Open cs
   End If

   Set rs = CreateObject("ADODB.Recordset")

   If Not (rs.State = adStateOpen) Then
       rs.Open TableName, cn, adOpenKeyset, adLockOptimistic
   End If

End Function 
```

* * *

```
Public Function CloseConnection() As Boolean
'*********Routine to close connection with database

On Error Resume Next
   If Not rs Is Nothing Then
       rs.Close
   End If

   If Not cn Is Nothing Then
       cn.Close
   End If
   CloseConnection = True
   Exit Function

End Function 
```

上面的代码适用于几百行记录，但显然它会导出更多数据，比如 25000 条记录，是否可以在不循环所有记录的情况下导出，只需一条 SQL INSERT 语句即可将所有数据批量插入 Ms.Access一口气上桌？

任何帮助都感激不尽。

**编辑：问题已解决**

仅供参考，如果有人寻求此信息，我进行了大量搜索，发现以下代码对我来说可以正常工作，并且由于 SQL INSERT，它真的很快，（27648 条记录只需 3 秒！！！！ ):

```
Public Sub DoTrans()

  Set cn = CreateObject("ADODB.Connection")
  dbPath = Application.ActiveWorkbook.Path & "\FDData.mdb"
  dbWb = Application.ActiveWorkbook.FullName
  dbWs = Application.ActiveSheet.Name
  scn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & dbPath
  dsh = "[" & Application.ActiveSheet.Name & "$]"
  cn.Open scn

  ssql = "INSERT INTO fdFolio ([fdName], [fdOne], [fdTwo]) "
  ssql = ssql & "SELECT * FROM [Excel 8.0;HDR=YES;DATABASE=" & dbWb & "]." & dsh

  cn.Execute ssql

End Sub 
```

仍在努力添加特定的字段名称而不是使用“Select *”，尝试了各种添加字段名称的方法，但现在无法使其工作。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T08:09:32.630

> 是否可以在不循环所有记录的情况下导出

对于 Excel 中具有大量行的区域，如果您`Access.Application`在 Excel 中创建一个对象，然后使用它将Excel 数据导入 Access *，您可能会看到一些性能改进。*下面的代码位于同一 Excel 文档中的 VBA 模块中，其中包含以下测试数据

![样本数据.png](https://i.stack.imgur.com/KADh4.png)

```
Option Explicit

Sub AccImport()
    Dim acc As New Access.Application
    acc.OpenCurrentDatabase "C:\Users\Public\Database1.accdb"
    acc.DoCmd.TransferSpreadsheet _
            TransferType:=acImport, _
            SpreadSheetType:=acSpreadsheetTypeExcel12Xml, _
            TableName:="tblExcelImport", _
            Filename:=Application.ActiveWorkbook.FullName, _
            HasFieldNames:=True, _
            Range:="Folio_Data_original$A1:B10"
    acc.CloseCurrentDatabase
    acc.Quit
    Set acc = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T16:22:48.923

@艾哈迈德

下面是指定命名范围中的字段以插入 MS Access 的代码。这段代码的好处是，您可以在 Excel 中随意命名字段（如果使用 *，则字段必须在 Excel 和 Access 之间完全匹配），如您所见，我已将 Excel 列命名为“哈哈”即使访问列称为“dte”。

```
Sub test()
    dbWb = Application.ActiveWorkbook.FullName
    dsh = "[" & Application.ActiveSheet.Name & "$]" & "Data2"  'Data2 is a named range

sdbpath = "C:\Users\myname\Desktop\Database2.mdb"
sCommand = "INSERT INTO [main] ([dte], [test1], [values], [values2]) SELECT [haha],[test1],[values],[values2] FROM [Excel 8.0;HDR=YES;DATABASE=" & dbWb & "]." & dsh

Dim dbCon As New ADODB.Connection
Dim dbCommand As New ADODB.Command

dbCon.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sdbpath & "; Jet OLEDB:Database Password=;"
dbCommand.ActiveConnection = dbCon

dbCommand.CommandText = sCommand
dbCommand.Execute

dbCon.Close

End Sub 
```

# iphone - 如何将 Tapku 日历从月视图更改为周视图

> ID：16161870
> 
> 赞同：0
> 
> 时间：2013-04-23T05:47:25.043
> 
> 标签：iphone, tapku

我正在使用在其中显示月视图的 Tapku 日历，我想在单击按钮时在日历中显示周视图。需要进行哪些更改以及在代码中的何处。请指导以上。并询问是否还有其他需要知道的东西来回答这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:02:08.813

在同一个视图控制器中使用

1.  `@property(nonatomic, strong) TKCalendarDayTimelineView *calendarDayTimelineView;`
2.  `@property(nonatomic, strong) TKCalendarMonthTableView *calendarMonthTableView;`
3.  `@property(nonatomic) NSUInteger calendarViewType;`

实施所需的代表：`<TKCalendarDayTimelineViewDelegate>`和`<TKCalendarMonthViewDelegate,TKCalendarMonthViewDataSource>`

之后，制作一个隐藏和显示此视图的方法：

```
- (IBAction)calendarViewAction:(id)sender
{
 if (self.calendarViewType == 1) {
        [self.calendarDayTimelineView setHidden:NO];
    } else {
        [self.calendarDayTimelineView setHidden:YES];     
    }

    if (self.calendarViewType == 0) {
        [self.calendarMonthTableView setHidden:NO];
    } else {
        [self.calendarMonthTableView setHidden:YES];
    }
} 
```

# javascript - 重定向后运行javascript以单击按钮

> ID：16161871
> 
> 赞同：0
> 
> 时间：2013-04-23T05:47:31.683
> 
> 标签：javascript, html, iframe

所以我想做的事情似乎很简单，但我还没有找到办法。

我想加载一个有发布请求的网页。我只想使用 javascript 单击提交按钮，它会提交表单并加载回复。该按钮的 id 为“buttonSubmit”。我可以加载网页（假设它是[https://www.somepage.com/form.aspx](https://www.somepage.com/form.aspx)，我无权访问它运行的服务器）。

如果我在浏览器中加载页面，进入控制台，然后输入以下脚本，它可以工作：

```
document.getElementById('buttonSubmit').click(); 
```

所以我需要把它放到一个可以在我的机器上运行的网页中，这样页面就会加载对发布请求的回复。

我试图编写一个具有 javacript 的 html 页面：

```
window.location.href='https://www.somepage.com/form.aspx';
document.getElementById('buttonSubmit').click(); 
```

但是，此代码不起作用，因为 URL 更改后，它不会执行下一行代码。

所以接下来我尝试将 URL 加载到 iframe 中并尝试在其上运行脚本。

但是，根据以下页面，这不起作用：

[尝试在 JavaScript 中访问 iframe 时出错](https://stackoverflow.com/questions/13446106/error-trying-to-access-a-iframe-in-javascript)

每当我尝试访问 iframe 中的元素时，我都会收到一个错误，指出它是不安全的操作或存在错误。

做这个的最好方式是什么？必须有办法让它发挥作用。

谢谢您的帮助！

# php - 如何在 PHP 中读取从 Android 发送的 JSON 数据？

> ID：16161873
> 
> 赞同：2
> 
> 时间：2013-04-23T05:47:46.463
> 
> 标签：php, android, json

我的 android 模拟器正在向 PHP 脚本发送请求，以访问 MySQL 数据。我通过为 sql 查询提供值来检查 PHP 脚本，并且能够在我的 Android 模拟器中获取它。但我无法在 PHP 中使用我从 Android 发送的 JSON 数据。那么，如何从 PHP 中读取 JSON 数据呢？

获取详细信息.php

if($tag ==..) 块和 if (isset($_POST['pid'])) 块正在执行，但是当我将它与查询一起使用时，我无法从数据库中获取值

```
<?php

$response = array();

$result = array();
$con = mysql_connect("localhost", "root", "system") or die(mysql_error());
mysql_select_db("patient", $con);

$tag = $_POST['tag'];
if ($tag == 'get_details')
{
    if (isset($_POST['pid']))
    { $pid = intval($_POST['pid']); //PATID in Database is in BIGINT
           $mob = $_POST['mob'];         //MOBILE is in VARCHAR
 //$result=mysql_query("SELECT * FROM patientinfo WHERE PATID =13 AND MOBILE=  25");
 $result=mysql_query("SELECT * FROM patientinfo WHERE PATID =$pid AND MOBILE=  $mob");
        if (!empty($result))
        {
        $result = mysql_fetch_array($result);

        $response["success"] = 1;
            $response["patid"] = $result["PATID"];
            $response["name"] = $result["FIRSTNAME"];
            $response["mobile"] = $result["MOBILE"];

            echo json_encode($response);
        }
        else {
            $response["success"] = 2;
            $response["message"] = "No patient found in that PatId";
            echo json_encode($response);
         }
    }
    else {
            $response["success"] = 3;
            $response["message"] = "PatientId Not Set";
            echo json_encode($response); 
         }
}
else
    { $response["success"] = 4;
      $response["message"] = "Tag not matching";
      echo json_encode($response);
    }

  ?> 
```

Main_activity.java

```
public class Main_activity extends Activity {  

String response;    
EditText patid;
EditText mobnum;
TextView loginErrorMsg;

private static String KEY_SUCCESS ="success";   
private static String KEY_PID ="patid";
private static String KEY_MOBNUM ="mobile";
private static String KEY_NAME ="name";
//private static String KEY_CREATED_AT ="created_at";

DatabaseHandler db;
UserFunctions userFunctions;
JSONObject json_user;
JSONObject json;
Intent listview;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button btnLogin = (Button) findViewById(R.id.login_button);
    btnLogin.setOnClickListener( new View.OnClickListener() {

  public void onClick(View arg0) {
  try{                  
    patid = (EditText) findViewById(R.id.patid_field);
        mobnum = (EditText) findViewById(R.id.pswd_field);

   if( (patid!=null && patid.getText().length()!=0) && (mobnum!=null &&      mobnum.getText().length()!=0))
{
userFunctions = new UserFunctions();

json = userFunctions.loginUser(patid.toString(), mobnum.toString());

//Toast.makeText(getBaseContext(), json.getString("success"), Toast.LENGTH_LONG).show();
 //Toast.makeText(getBaseContext(), json.getString("name"), Toast.LENGTH_LONG).show();             
 //Toast.makeText(getBaseContext(), json.getString("mobile"), Toast.LENGTH_LONG).show();

  try{
if(json.getString(KEY_SUCCESS)!=null)                                                                       loginErrorMsg.setText("Authenticated");
int res = Integer.parseInt(json.getString(KEY_SUCCESS)); //Unable to get value in res

  Toast.makeText(getBaseContext(), "Res="+res, Toast.LENGTH_LONG).show();
if(res==1)  //logged in
{                   
            db = new DatabaseHandler(getApplicationContext());
                json_user = json.getJSONObject("user");                                 
                                     userFunctions.logoutUser(getApplicationContext());
                                db.addUser(json_user.getString(KEY_PID),json_user.getString(KEY_NAME),json_user.getString(KEY_MOBNUM), json_user.getString(KEY_CREATED_AT));

                                Toast.makeText(getBaseContext(), "next", Toast.LENGTH_LONG).show();
                                listview= new Intent(Main_activity.this, activity_listview.class);
                                listview.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(listview);

                                Toast.makeText(getBaseContext(), "finish", Toast.LENGTH_LONG).show();
                                finish();                                   
                            }
                            else{
                                Toast.makeText(getBaseContext(), "Invalid ID/Mob", Toast.LENGTH_LONG).show();
                                loginErrorMsg.setText("Invalid Patient-ID/Mobile No.");
                            }
                        }                           
                    }
                    catch(JSONException je)
                    {
                        Toast.makeText(getBaseContext(), "json Exception", Toast.LENGTH_LONG).show();
                        je.printStackTrace();
                    }

                }
                else
                {

                }
              }
              catch(Exception e)
              {
                  Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
              }

        }
    });
}

} 
```

## 对于我在 PHP 中给出的查询值，Toast 显示来自数据库的 patid、name、mobile 和 success=1 的值。但无法将“成功”的值放入变量中。

JsonParser.java

```
public class JsonParser {
static InputStream is= null;
static JSONObject jObj= null;
static String json = "";

public JsonParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) throws Exception
{
    try{
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    }catch(UnsupportedEncodingException e){
        e.printStackTrace();
    }catch(Exception e1){
        e1.printStackTrace();
    }
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8); //or iso-8859-1
        StringBuilder sb= new StringBuilder();
        String line=null;

        while((line = reader.readLine())!=null)
                {
                    sb.append(line+ "\n");  // \n
                }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);

    }catch(Exception e1){
        Log.e("Buffer Error", "Error converting result"+ e1.toString());
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;
}
  } 
```

用户函数.java

```
public class UserFunctions {
private JsonParser jsonParser;

private static String loginUrl ="http://10.0.2.2/hcsapi/get_details.php";
private static String getdetails_tag ="get_details";

public UserFunctions()
{
    jsonParser =new JsonParser();
}
public JSONObject loginUser(String patid, String mobnum)throws Exception
{
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag",getdetails_tag));
    params.add(new BasicNameValuePair("pid",patid));
    params.add(new BasicNameValuePair("mob",mobnum));
    System.out.print(patid);
    JSONObject json= jsonParser.getJSONFromUrl(loginUrl, params);

    return json;
}
 } 
```

如果我要使用，php 中的 json_decode() 我应该如何调用它？非常感谢任何帮助，因为我是 android 的新手。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:40:19.047

我省略了 patid.getText() 和 mobnum.getText() 的 .toString()。所以我应该像下面这样通过。否则 EditText 的名称将被传递。

```
 json = userFunctions.loginUser(patid.getText().toString(), mobnum.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T10:15:50.380

您可以在 PHP API 文件中简单地读取移动发布的 json 数据，如下所示。

```
<?php
$foo = file_get_contents("php://input");
$result=json_decode($foo, true);
print"<pre>";
print_r($result);
?> 
```

# javascript - Javascript 试图让函数出现在警报中

> ID：16161879
> 
> 赞同：0
> 
> 时间：2013-04-23T05:48:10.667
> 
> 标签：javascript, function, alert

我试图通过 JavaScript 在警报中显示 5 个随机字母或数字。

当我跑步时，警报没有出现。

抱歉，我是 JavaScript 新手，任何帮助都会很棒。谢谢。

```
<script language="javascript" type="text/javascript">
 function randomString() {
   var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
   var string_length = 8;
   var randomstring = '';
   for (var i=0; i<string_length; i++) {
    var rnum = Math.floor(Math.random() * chars.length);
    randomstring += chars.substring(rnum,rnum+1);
 }
  document.randform.randomfield.value = randomstring;
}
</script>

<script>
 function myFunction(){
   alert(randomString());
}
</script> 
```

我正在使用这个按钮来调用它。

```
<input type="button" onclick="myFunction()" value="Show alert box"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:52:07.490

放：

```
return randomstring; 
```

在`randomString`函数的最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:52:19.043

返回 的值`randomstring`：

```
function randomString() {
   var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
   var string_length = 8;
   var randomstring = '';
   for (var i=0; i<string_length; i++) {
       var rnum = Math.floor(Math.random() * chars.length);
       randomstring += chars.substring(rnum,rnum+1);
   }
   return randomstring;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:00:59.060

```
<html>
<head>
<script type="text/javascript">
function alertUser(msg) {
alert(msg);
}
</script>
</head>
<body onload="alertUser('Welcome to this AMAZING web page!')">
<div style="text-align:center;padding:10px;">
<h1>Amazing Web Page.</h1>
<p><a href="JavaScript:self.close();">Close</a></p>
</div>
</body>
</html> 
```

# excel - 在列中动态读取

> ID：16161884
> 
> 赞同：3
> 
> 时间：2013-04-23T05:48:46.687
> 
> 标签：excel, vba

我有个问题。我花了几个小时设计一个表格，它非常适合您的所有反馈。今天，一切都出了问题。这样做的原因是简单的。添加了一些新列，显然，我的表单正在读取的数据现在是错误的。

因此，我正在考虑尝试以下...

而不是使用下面的列号

```
TK = Cells(ActiveCell.Row, "S").Value 'everything in the form refers to the active row 
```

我可能会使用第 1 行中的列标题。

那可能吗 ？这样，电子表格可以根据用户的需要添加任意多的列，并且表单将动态扫描正确的标题并以这种方式获取列号。

我的想法是，在打开表格时，阅读所有标题，挑选出我需要的标题并将它们分配给一个变量。然后我使用我的普通代码并将变量替换为列部分。

这听起来很容易，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:26:59.653

使用多功能`Find`为您提供一种快速的方法来检测您的标题在哪里 - 或者它是否丢失

[在此处查找详细信息](http://msdn.microsoft.com/en-us/library/office/ff839746.aspx)

在下面的代码中，我指定搜索必须返回

*   完全匹配 ( `xlWhole`)
*   区分大小写的匹配 ( `False`)

`xlPart`如果您要匹配*Game* out of *Game X* ，则匹配可以是部分匹配 ( )

 ***代码**

```
Const strFind = "Game"

Sub GetEm()
Dim rng1 As Range
Set rng1 = ActiveSheet.Rows(1).Find(strFind, , xlValues, xlWhole, , , False)
If Not rng1 Is Nothing Then
MsgBox "Your column is " & rng1.Column
Else
MsgBox strFind & " not found", vbCritical
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:43:08.803

为什么要使用循环？没必要。

```
Dim col as variant 
Col = application.match("my header", rows(1), 0)
If iserror(col) then
    'not found
Else
    TK = cells(activecell.row, col)
End if 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:56:15.100

为此，我通常使用一个函数，它贯穿标题（在工作表的第一行）并返回包含我搜索的值的列的编号。

```
Public Function FindColumn(HeaderName As String, Sht As String) As Long

Dim ColFound As Boolean
Dim StartingPoint As Range

ColFound = False

Set StartingPoint = Sheets(Sht).Range("A1")
Do While StartingPoint.Value <> ""
    If UCase(Trim(StartingPoint.Value)) = UCase(Trim(HeaderName)) Then
        FindColumn = StartingPoint.Column
        ColFound = True
        Exit Do
    Else
        Set StartingPoint = StartingPoint.Offset(0, 1)
    End If
Loop
If Not ColFound Then FindColumn = 0

End Function 
```

*示例*：如果名为“时间轴”的工作表的第一行包含诸如“日期”(A1)、“时间”(B1)、“值”(C1) 等标题，则调用`FindColumn("Time", "Timeline")`返回 2，因为“时间”是第二列在工作表“时间轴”中

希望这可以帮助你一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T07:12:11.010

你的想法很好。读取列标题以计算地址是避免硬编码的一种方法 - 例如

```
Sub Test()
Dim R As Range

    Set R = ActiveSheet.[A1]
    Debug.Print ColNo(R, "Col1Hdr")
End Sub

Function ColNo(HdrRange As Range, ColName As String) As Integer
    ' 1st column with empty header is returned if string not found
    ColNo = 1
    Do While HdrRange(1, ColNo) <> ""
        If HdrRange(1, ColNo) = ColName Then Exit Do
        ColNo = ColNo + 1
    Loop
End Function 
```

我经常使用的另一种方法 - 我必须承认我更喜欢它，是`Enum`在单独的“定义”模块中为我的所有表定义 's，例如

```
Public Enum T_VPN   ' sheet VPN
    NofHRows = 3    ' number of header rows
    NofCols = 35    ' number of columns
    MaxData = 203   ' last row validated
    GroupNo = 1
    CtyCode = 2
    Country = 3
    MRegion = 4
    PRegion = 5
    City = 6
    SiteType = 7
    ' ....
End Enum 
```

并像使用它一样

```
Sub Test1()
    Debug.Print ActiveSheet(T_VPN.NofHRows, T_VPN.Country)
End Sub 
```

如您所见，用法更简单。尽管这又是“某种”硬编码，但将所有定义集中在一个地方会显着减少维护。*

# mysql - 无法连接到远程 MySQL 服务器并出现错误 61

> ID：16161889
> 
> 赞同：44
> 
> 时间：2013-04-23T05:49:30.970
> 
> 标签：mysql

当我尝试使用命令行`mysql -h <remote-ip> -u any_existing_users -p`或任何其他 mysql 客户端（如 phpmyadmin）连接远程 MySQL 服务器时，它不起作用，错误提示是

```
ERROR 2003 (HY000) Can't connect to MySQL server on '<remote-ip>' (61) 
```

但是，当我尝试`ssh <remote-ip>`通过本地连接 MySQL时`mysql -u root -p`，没有问题。

这是用户表（`SELECT User, Host FROM mysql.user;`）的一部分：

```
+------------------+----------------+
| User             | Host           |
+------------------+----------------+
| root             | %              |
| other_users      | <remote-ip>    |
| root             | localhost      |
+------------------+----------------+ 
```

这是iptable：

```
Chain INPUT (policy ACCEPT)
num  target     prot opt source               destination         
1    RH-Firewall-1-INPUT  all  --  0.0.0.0/0            0.0.0.0/0           

Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination         
1    RH-Firewall-1-INPUT  all  --  0.0.0.0/0            0.0.0.0/0           

Chain OUTPUT (policy ACCEPT)
num  target     prot opt source               destination         

Chain RH-Firewall-1-INPUT (2 references)
num  target     prot opt source               destination         
1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           
2    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0           icmp type 255 
3    ACCEPT     esp  --  0.0.0.0/0            0.0.0.0/0           
4    ACCEPT     ah   --  0.0.0.0/0            0.0.0.0/0           
5    ACCEPT     udp  --  0.0.0.0/0            224.0.0.251         udp dpt:5353 
6    ACCEPT     udp  --  0.0.0.0/0            0.0.0.0/0           udp dpt:631 
7    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:631 
8    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED 
9    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 
10   REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited 
11   ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:3306 
```

所以有什么问题？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-23T06:07:55.903

检查您的 mysql 服务器是否正在使用 netstat 侦听套接字：

```
netstat -tulpen 
```

并搜索 3306。

如果不是或仅在本地主机上，请检查 my.cnf 并搜索该`bind-address`行并将其更改为：

```
bind-address = 0.0.0.0 
```

然后重新启动服务器并重试。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-01-29T01:29:42.960

检查状态：

```
netstat -tulpen 
```

修改你的配置：

```
nano /etc/mysql/my.cnf
# Edit:
bind-address = 0.0.0.0 
```

进入mysql并赋予权限：

```
mysql -umyuser -pmypassword
# Run:
GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'%'IDENTIFIED BY 'mypassword' WITH GRANT OPTION;
FLUSH PRIVILEGES;
exit 
```

重启mysql

```
/etc/init.d/mysql restart 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-10-09T14:35:02.017

随着`MySql 5.7`他们更改文件，`bind-address`现在位于：

```
/etc/mysql/mysql.conf.d/mysqld.cnf 
```

代替：

```
/etc/mysql/my.cnf 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-04-12T16:35:36.477

如果你运行MAMP，别忘了允许访问（mySQL面板，勾选“Allow network access to MySQL”）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-10-25T17:30:44.400

在服务器上安装 Centos 7 后，我遇到了这个问题。我无法通过远程计算机中的 Mysql Workbench 访问它。

问题出在防火墙配置中。最终，解决方案来了：

```
sudo firewall-cmd --zone=public --permanent --add-service=mysql 
```

然后，重启防火墙：

```
sudo systemctl restart firewalld 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T05:55:12.753

这可能是与防火墙有关的问题，或者试试这个：

转到服务器管理 -> MySQL -> 设置 -> 检查：允许网络连接

然后重启MySQL

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T06:02:51.350

查看 MySQL 中的“拒绝访问错误的原因”。

[http://dev.mysql.com/doc/refman/5.1/en/access-denied.html](http://dev.mysql.com/doc/refman/5.1/en/access-denied.html)

可能是您的服务器上的配置失败或其他程序正在使用相同的端口？还是服务器绑定在“127.0.0.1”上？尝试更改 my.cnf 文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-05T06:58:57.583

对于 MacOS：

```
mysql -uroot -p

mysql> use mysql;

# View user's host
mysql> select 'host' from user where user='root';
# Update host to '%'
mysql> update user set host='%' where user='root';

mysql> flush privileges;
mysql> quit 
```

```
vim /usr/local/etc/my.cnf
# Default Homebrew MySQL server config
[mysqld]
bind-address = 0.0.0.0 
```

```
# Restart and reconnect MySQL
mysql.server restart
mysql -uroot -h0.0.0.0 -p 
```

# python - No module named v4.proto.omni

> ID：16161892
> 
> 赞同：1
> 
> 时间：2013-04-23T05:49:44.893
> 
> 标签：python, python-2.7, twisted, pysnmp

I have installed pysnmp-4.x.I am getting following error during running a SNMP program.

I am using pysnmpSE 3.5.2 now but getting same error. I found that pysnmpSE doesn't hav v4 module. I was suggested that following error should resolved if pySNMP SE 3.x is used.

```
Traceback (most recent call last):
  File "C:\Documents and Settings\ggne0622\Desktop\Python\google-python-exercises\babynames\SimpleAgent.py", line 18, in <module>
    from twistedsnmp import agent, agentprotocol, bisectoidstore
  File "C:\Python27\Lib\site-packages\twistedsnmp\agent.py", line 4, in <module>
    from twistedsnmp import datatypes
  File "C:\Python27\Lib\site-packages\twistedsnmp\datatypes.py", line 7, in <module>
    from twistedsnmp.pysnmpproto import v2c,v1
  File "C:\Python27\Lib\site-packages\twistedsnmp\pysnmpproto.py", line 13, in <module>
    from pysnmp.v4.proto.omni import v2c,v1, error, rfc1157, rfc1905
ImportError: No module named v4.proto.omni 
```

Code:

`#!/usr/bin/env python`
`from twisted.internet.iocpreactor import reactor`
`from twisted.internet import error as twisted_error`
`from twistedsnmp import agent, agentprotocol, bisectoidstore`
`#from twisted.internet import interfaces`
`try:`
`from twistedsnmp import bsdoidstore`
`except ImportError:`
`import warnings`
`warnings.warn( """No BSDDB OID Storage available for testing""" )`
`bsdoidstore = None`

`def createAgent( oids ):`
`ports = [161]+range(20000,25000)`
`for port in ports:`
`try:`

```
 `agentObject = reactor.IOCPReactor.listenUDP(port,`   `agentprotocol.AgentProtocol(snmpVersion = 'v2c',agent = agent.Agent(dataStore =`   `bisectoidstore.BisectOIDStore(OIDs = oids,),),),)`  
    `except twisted_error.CannotListenError:`  
        `pass`  
    `else:`  
        `return agentObject, port` 
```

`testingOIDs = {`
`'.1.3.6.1.2.1.1.1.0': 'Some tool out in the field',`
`'.1.3.6.1.2.1.1.2.0': '.1.3.6.1.4.1.88.3.1',`
`'.1.3.6.1.2.1.1.3.0': 558566090,`
`'.1.3.6.1.2.1.1.4.0': "support@somewhere.ca",`
`'.1.3.6.1.2.1.1.5.0': "NameOfSystem",`
`'.1.3.6.1.2.1.1.6.0': "SomeHeadEnd, West Hinterlands, Canada",`
`}`

`def main(oids=testingOIDs):`
`agent, port = createAgent( oids )`

`if __name__ == "__main__":`
`reactor.IOCPReactor.callWhenRunning( main )`
`reactor.IOCPReactor.run()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:58:29.423

TwistedSNMP 似乎不适合与 PySNMP 4.x 一起使用。因此，您应该使用 PySNMP 3.x / PySNMP SE 或切换到具有自己的 Twisted 绑定的 PySNMP 4.x。

# android - Android 使用肥皂向服务器发送数据

> ID：16161894
> 
> 赞同：0
> 
> 时间：2013-04-23T05:49:52.603
> 
> 标签：android

我是android新手，我想通过android中的edittext从用户那里获取数据，并在**soap请求**的帮助下将其发送到服务器，即xml格式，有人可以帮我尽快回复吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:53:26.690

您可以发送 xml 格式的请求，如下面的 xml 所示。根据您的需要进行相同的修改。

例子。（使用 KSOAP2 库）

```
SoapObject request = new SoapObject("http://service.medal.org/", "GetPosts");

        PropertyInfo getpostreq = new PropertyInfo();
        getpostreq.name="GetPostsReq";
        getpostreq.type=String.class;
        getpostreq.setValue("<GetPostsReq>"
        +"<sessionId>"+sessionid+"</sessionId>"
        +"<postedAfter>"+5+"</postedAfter>"
        +"<postedBefore>"+20+"</postedBefore>"
        +"<radius>10</radius>"
        +"<location>"
        +"<latitude>"+lati+"</latitude>"
        +"<longitude>"+longi+"</longitude>"
        +"</location>"
        +"<postedBy>all</postedBy>"
        +"</GetPostsReq>");

        request.addProperty(getpostreq);
SoapSerializationEnvelope envelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelop.setOutputSoapObject(reques 
```

# jquery - 未捕获的类型错误：对象 [object Object] 在“nyromodal”弹出窗口中使用时没有方法“validationEngine”？

> ID：16161908
> 
> 赞同：0
> 
> 时间：2013-04-23T05:51:34.947
> 
> 标签：jquery, jquery-validation-engine, nyromodal

在这里，我有类似以下的情况，我想在 . 中使用 jquery 验证引擎插件`nyromodal`。如果我没有将它与 nyromodal 一起使用，则意味着它在这里工作正常，我所拥有的一些屏幕截图............ ..

**![这将显示验证提示](https://i.stack.imgur.com/Pk9Oo.png) ![这将在 FireBug 中显示错误](https://i.stack.imgur.com/Do2pT.png)**

**这是我的代码：**

```
<?php
require_once'../session.php';
?>
<!DOCTYPE html><html xmlns='http://www.w3.org/1999/xhtml' >
<head>
    <title>HTML Form Builder</title>
    <link rel='stylesheet' type='text/css' href='<?php echo ROOT_PATH;?>css/validationEngine.jquery.css'/> 

<script type="text/javascript" src="<?php echo ROOT_PATH;?>js/jquery.min.1.7.1.js">
</script>
<script type="text/javascript" src="<?php echo ROOT_PATH;?>js/jquery.validationEngine-en.js"></script>
<script type="text/javascript" src="<?php echo ROOT_PATH;?>js/jquery.validationEngine.js"></script>
    <script type='text/javascript'>
    $(function(){
        changeInnerHTML('doctor_id');
        changeInnerHTML('hospital_id');
        changeInnerHTML('clinic_id');
        changeInnerHTML('stockist_id');
        changeInnerHTML('chemist_id');
        changeInnerHTML('bloodbank_id');
        changeInnerHTML('dialysis_id');
        if($('#refSubmit').val() == 'grid')
        {
            $('#submit-form').hide();
        }
        $('form').attr('autocomplete','off');
        //$('form').attr('id','addForm');
        $('form').removeAttr('novalidate');
    });
    function changeInnerHTML(id)
    {
        if($('#dialog_box_'+id).length)
        {
            var tmp=id.split('_');
             $.get('getDataValues.php?ref='+tmp[0],function(data,status){
                $('#dialog_box_'+id).html(data);
            });
        }
    }
    $('#submit-form').live('click',function(){
        $('#preview_form').validationEngine('validate')?subForm():'';
    });
    function subForm()
    {
        $('#preview_form').submit();
    }
    </script>
    </head>
    <body>
    <div id='container'>

        <h1 id="form-name" style="background-color: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.247059) 0px 1px 3px; border: none; margin: 8px 15px;">dfgdfg</h1>
        <form method="POST" action="saveData.php" id="preview_form" novalidate="novalidate">

        <div class="row" style="display: block;"><label class="field" for="textfield_1">textfield_1<div class="rqrd">*</div></label><span class="textField" data=""><input type="text" id="dialog_box_textfield_1" name="textfield_1" class="validate[required]" /></span></div><input type="button" class="button blue" value="Submit" id="submit-form"/><input type='hidden' id='tname' name='tname' value='surveyForm_2' /><input type='hidden' id='refSubmit' name='refSubmit' value='<?php echo $_GET['ref'];?>' /></form></div> <!--container-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:13:50.470

您需要将 jQuery 代码包装在内部`$(document).ready(function() { });`或`$(function() { });`让它看到整个 DOM 以及使用[on()](http://api.jquery.com/on/)而不是`live`因为`live`在 jQuery 版本 1.9+ 中已弃用并完全删除

```
$(document).ready(function() {
    $('#submit-form').on('click',function(){
        $('#preview_form').validationEngine('validate')?subForm():'';
    });    
}); 
```

另一件事是确保所有文件的路径都正确定位。

# mysql - 通过分组优化 SQL 查询

> ID：16161918
> 
> 赞同：2
> 
> 时间：2013-04-23T05:52:07.523
> 
> 标签：mysql, sql

我有一个具有以下结构的 mySQL 表

```
+-------------+------------------+------+-----+---------+----------------+
| Field       | Type             | Null | Key | Default | Extra          |
+-------------+------------------+------+-----+---------+----------------+
| id          | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| make        | varchar(55)      | NO   | MUL | NULL    |                |
| model       | varchar(55)      | NO   | MUL | NULL    |                |
| year        | varchar(4)       | NO   | MUL | NULL    |                |
+-------------+------------------+------+-----+---------+----------------+ 
```

和一些样本数据

```
('Chevrolet', 'Express', '2001'),
('Chevrolet', 'Express', '2002'),
('Chevrolet', 'Venture', '2001'),
('Chevrolet', 'Venture', '2002'),
('Dodge', 'Dakota', '2000'),
('Dodge', 'Dakota', '2001'),
('Ford', 'Flex', '2009'),
('Ford', 'Flex', '2010'), 
```

我想要的是一个快速查询，它可以返回所有模型，并附上所有品牌和年份。因此，以下是我想要返回的示例。

```
Array
(
    [Chevrolet] => Array
        (
            [Express] => Array
                (
                    [0] => 2001
                    [1] => 2002
                )

            [Venture] => Array
                (
                    [0] => 2001
                    [1] => 2002
                )
        )

    [Dodge] => Array
        (
            [Dakota] => Array
                (
                    [0] => 2001
                    [1] => 2002
                )
        )

    [Ford] => Array
        (
            [Flex] => Array
                (
                    [0] => 2009
                    [1] => 2010
                )
        )
) 
```

**我目前在做什么：**

我有一个查询来返回所有独特的品牌：

```
$sql = "select distinct make from listings order by make asc "; 
```

一旦我有了每个make，我就会循环并运行以下查询，使用make：

```
$sql = "select distinct model from listings where make = ? order by model asc "; 
```

我又迈出一步来抓住岁月：

```
$sql = "select distinct year from listings where make=? and model=? order by year desc"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:05:44.493

```
SELECT make, model, year
FROM listings
ORDER BY make, model, year 
```

# opengl-es - Get Current raster position in opengl es 1.1

> ID：16161919
> 
> 赞同：0
> 
> 时间：2013-04-23T05:52:07.807
> 
> 标签：opengl-es, opengl-to-opengles

How we can get Current raster position in opengl es 1.1 like in OpenGl where we do this by calling glGet with argument GL_CURRENT_RASTER_POSITION. Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T19:08:57.880

由于 OpenGL ES 中没有*光栅位置*的概念，因此真的没有什么可获取的。在 ES 中，您需要管理几何体的位置，并在应用程序中跟踪它，而不是让 OpenGL (ES) 为您管理它。

# android - 打开弹出窗口时如何监听键

> ID：16161924
> 
> 赞同：0
> 
> 时间：2013-04-23T05:52:19.273
> 
> 标签：android, back-button, keylistener, popupwindow

我正在编写一个应用程序来动画弹出窗口。它与我的代码配合得很好。

当按下设备上的后退按钮时，我想关闭弹出窗口（即向下滑动）。

但我听不到设备上的任何一个键。我使用`setOnKeyListener`了那个弹出窗口，我什至没有从中获取日志。

我的代码如下：

```
popup_layout = layoutInflater.inflate(R.layout.popup_addchannel, null);
            popupWindow = new PopupWindow(popup_layout, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
subscribeButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {

//                  Log.d(TAG,
//                          "Button is clicked for animation....  Visibility is"
//                                  + subscribeButton.getVisibility());
                    openMenu(view);
                }
            });
popup_layout.setOnKeyListener(new View.OnKeyListener() {

                @Override
                public boolean onKey(View v, int keyCode, KeyEvent event) {
                    Log.d(TAG, "on key button click called.........");
                    return false;
                }

            });

public void openMenu(View view) {
        if (!flag) {
            popupWindow.setAnimationStyle(R.style.PopupWindowAnimation);
            popupWindow.showAtLocation(view.findViewById(R.id.button1),
                    Gravity.CENTER, 0, 0);
            popupWindow.setFocusable(true);
            popupWindow.update();
            flag = true;
        } else {
            popupWindow.dismiss();
            popupWindow.setFocusable(false);
            flag = false;
        }
    } 
```

这背后的问题是什么？

我能达到我的要求吗？

请指导我。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:51:04.223

试试这个....

```
 final PopupWindow popupWindow = new PopupWindow(popupView,
LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,true);
    ...
    popupWindow.getContentView().setFocusableInTouchMode(true);
    popupMenu.getContentView().setOnKeyListener(new View.OnKeyListener() {        
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode ==  KeyEvent.KEYCODE_MENU && 
                    event.getRepeatCount() == 0 && 
                    event.getAction() == KeyEvent.ACTION_DOWN) {
                // ... payload action here. e.g. popupMenu.dismiss();
                return true;
            }                
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:56:52.453

该对话框具有取消后按对话框的属性。

```
dialog.setCancelable(true); 
```

编辑：在此链接上检查 Qberticus 答案：[Android 弹出窗口解除](https://stackoverflow.com/questions/3121232/android-popup-window-dismissal)

您还可以看到：[问题关闭弹出窗口](https://stackoverflow.com/questions/10577596/issue-dismissing-popup-window)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:54:49.270

您应该覆盖您的活动的 onKeyPressed() 方法，如下所示。

```
@Override
public void onBackPressed() {
   super.onBackPressed();
   //your code to close the popup window.
   popupWindow.setAnimationStyle(R.style.PopupWindowAnimation);
   popupWindow.showAtLocation(view.findViewById(R.id.button1),
            Gravity.CENTER, 0, 0);
   opupWindow.setFocusable(true);
   popupWindow.update();
   flag = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:11:29.413

是的，你可以使用这个 dialog_obj.setCancelable(true);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T22:31:51.103

```
popupWindow.getContentView().setOnClickListener(new OnClickListener()) {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        popupWindow.dismiss();
    }
}); 
```

试试这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-09T07:20:50.467

您无法在弹出窗口中收听按键，但是当您收听系统返回键时，您可以覆盖`dismiss()`方法来拦截它。

# c - 链表 - 访问冲突......在哪里？

> ID：16161926
> 
> 赞同：1
> 
> 时间：2013-04-23T05:52:30.417
> 
> 标签：c, visual-studio-2010

我正在尝试在 C 中实现一个链表：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct el{
    int number;
    struct el *next;
} linkedlist;

linkedlist* newel(){
    linkedlist *newelement = (linkedlist*)malloc(sizeof(linkedlist));
    newelement->number = 10;
    newelement->next=NULL;
    return newelement;
}

void add(linkedlist **head, linkedlist *item){
    if(!*head){
        *head = item;
    }
    else{
        item->next = *head;
        *head = item;
    }
}

void prnt(linkedlist *head){
    while(head!=NULL){
        printf("%d\n", head->number);
        head=head->next;
    }
}

int main(){

    linkedlist *hd;
    add(&hd,newel());
    add(&hd,newel());
    add(&hd,newel());
    prnt(hd);

    system("PAUSE");

    return 0;
} 
```

我得到：

```
Unhandled exception at 0x010c14e9 in test.exe: 0xC0000005: Access violation reading location 0xcccccccc. 
```

我尝试调试，问题出在 prnt 函数中。当 head 指向最后一个元素时，它似乎没有看到 NULL ......它只是在继续。我现在不知道如何修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:59:38.933

在您的主要功能中，初始化：

```
linkedlist *hd = NULL; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T06:02:02.163

`linkedlist *hd;`这可能会导致错误。因为最初它可能有一些`garbage`价值。所以你必须为NULL`linkedlist *hd = NULL;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:04:29.513

我认为异常的原因是这`hd`是一个未初始化的变量。在您的环境中，它似乎具有价值`0xcccccccc`。该支票`if(!*head)`可能从未评估为``true`.

# android - Issue with setting locale within app

> ID：16161929
> 
> 赞同：2
> 
> 时间：2013-04-23T05:52:41.930
> 
> 标签：android, locale

In my app, i am asking for language, can be either English or German. The selected language and its iso code is saved into preferences. On the basis of selected language i need to change all the texts into corresponding language.

For this, i have created res/values and res/values-de; each folder containing a strings.xml file. Issues are: 1) I am opening camera as well as a screen using opengl. After navigating via both of them, the texts does not change completely into german(if was chosen). Some text values change into German, rest not even on the same page. 2) Even without going through camera and opengl screens, the results are not achieved 100% always but gives a better result always as compared to case 1.

My implementations: 1) in onResume() of splash screen, i am changing locale based on preferences with the help of config.locale(). 2) in manifest file, each activity is set with activity:configChanges="locale". 3) in camera activity and opengl activity, onConfigurationChanged() is overridden in which i am again setting locale as per preferences.

please guide how to solve the locale issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:41:59.810

*   **检查点 1：** 资源的部分更新。确保您拥有以所有语言正确命名的资源。
*   此外，您可以尝试使用此代码。这就是我更新应用程序语言环境的方式：

    ```
     public void updateLocale(String language) {
        Locale myLocale = new Locale(language);
        Locale.setDefault(myLocale);
        Resources res = getResources();
        DisplayMetrics dm = res.getDisplayMetrics();
        Configuration conf = res.getConfiguration();
        conf.locale = myLocale;
        res.updateConfiguration(conf, dm);
    } 
    ```

让我知道它是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:42:51.853

我相信您需要在您的 AndroidManifest 文件中添加一些内容来指示区域设置更改。这是一个例子：[http ://android.programmerguru.com/android-localization-at-runtime/](http://android.programmerguru.com/android-localization-at-runtime/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T14:44:18.040

我的应用程序也有类似的问题。应用程序具有土耳其语和英语之间的强制语言更改选项。如果我的设备语言是英语并且我使用土耳其语的应用程序，我可以使用以下代码轻松转换语言：

```
public void setAppLanguage(String languageCode) {

        String countryCode;

        if (languageCode.equals("tr")){
            countryCode = "TR";
        }else{
            countryCode = "US";
        }

        Locale locale = new Locale(languageCode, countryCode);
        Locale.setDefault(locale);
        Resources res = getResources();
        DisplayMetrics dm = res.getDisplayMetrics();
        Configuration conf = res.getConfiguration();
        conf.locale = locale;
        res.updateConfiguration(conf, dm);

        loginPrefsEditor.putString("uLang",languageCode);
        loginPrefsEditor.apply();

    } 
```

但是，当我打开相机并从中返回时，应用程序语言会变回默认手机语言。当我打开相机时，应用程序会终止我的活动。从相机返回后，它会刷新所有内容。所以为了解决这个问题，我把我的强制更改语言方法放在每个活动的**onResume()方法中。**

通过这样做，我将能够解决这个问题。

# wpf - 如何从 XAML LinearGradientBrush 的偏移中读取颜色？

> ID：16161931
> 
> 赞同：6
> 
> 时间：2013-04-23T05:52:56.423
> 
> 标签：wpf, xaml, lineargradientbrush

给定一个`LinearGradientBrush`定义如下：

```
 <LinearGradientBrush x:Key="RedYellowGradient">
            <GradientStop Color="Blue" Offset="0.01" />
            <GradientStop Color="Purple" Offset="0.25"/>
            <GradientStop Color="Red" Offset="0.5"/>
            <GradientStop Color="Orange" Offset="0.75"/>
            <GradientStop Color="Yellow" Offset="1.0"/>
        </LinearGradientBrush> 
```

采用该定义并确定由特定偏移量（例如 0.13 或 0.82）表示的颜色而不呈现任何可见的东西需要什么？

这将采用具有如下原型的函数的形式：

```
Function GetColorFromBrushOffset(br as LinearGradientBrush, offset as Single) as SomeColorDataStructure 
```

函数体中需要做什么？我不是在寻找完成的代码（尽管我不会拒绝它！）只是关于使用哪些数据结构和系统调用的一些想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T22:46:53.287

这门课（来自@JonnyPiazzi[的这个问题的答案](https://stackoverflow.com/questions/9650049/get-color-in-specific-location-on-gradient)之一）似乎完全解决了我的问题：

```
public static class GradientStopCollectionExtensions
{
    public static Color GetRelativeColor(this GradientStopCollection gsc, double offset)
    {
        GradientStop before = gsc.Where(w => w.Offset == gsc.Min(m => m.Offset)).First();
        GradientStop after = gsc.Where(w => w.Offset == gsc.Max(m => m.Offset)).First();

        foreach (var gs in gsc)
        {
            if (gs.Offset < offset && gs.Offset > before.Offset)
            {
                before = gs;
            }
            if (gs.Offset > offset && gs.Offset < after.Offset)
            {
                after = gs;
            }
        }

        var color = new Color();

        color.ScA = (float)((offset - before.Offset) * (after.Color.ScA - before.Color.ScA) / (after.Offset - before.Offset) + before.Color.ScA);
        color.ScR = (float)((offset - before.Offset) * (after.Color.ScR - before.Color.ScR) / (after.Offset - before.Offset) + before.Color.ScR);
        color.ScG = (float)((offset - before.Offset) * (after.Color.ScG - before.Color.ScG) / (after.Offset - before.Offset) + before.Color.ScG);
        color.ScB = (float)((offset - before.Offset) * (after.Color.ScB - before.Color.ScB) / (after.Offset - before.Offset) + before.Color.ScB);

        return color;
    }
} 
```

# sql-server - 在 varchar 列中使用 milisec 存储当前日期时间 - mssql

> ID：16161932
> 
> 赞同：0
> 
> 时间：2013-04-23T05:52:58.203
> 
> 标签：sql-server, date, varchar

*在 varchar 列中使用 milisec 存储当前日期时间 - mssql*

我确实有一个 varchar max 列我想在列中存储当前日期和毫秒`day-month-year-h-m-s-ms`

喜欢

```
2304201310151515 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:12:11.433

尝试这个 ：-

```
SELECT REPLACE(CONVERT(varchar(max), getdate(), 103), '/', '')+
REPLACE(CONVERT(varchar(max), getdate(), 114), ':', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:01:06.873

试试这个——

```
DECLARE @date DATETIME
SELECT @date = GETDATE()

SELECT 
    REPLACE(CONVERT(VARCHAR(20), @date, 104), '.', '') + 
    LEFT(REPLACE(CONVERT(VARCHAR(20), @date, 114), ':', ''), 8)

DECLARE @text VARCHAR(20)
SELECT @text  = '2304201310151515'

SELECT 
    CAST(
        SUBSTRING(@text, 5, 4) + 
        SUBSTRING(@text, 3, 2) + 
        SUBSTRING(@text, 1, 2) AS DATETIME) 
    + 
    CAST(
        SUBSTRING(@text, 9, 2) + ':' + 
        SUBSTRING(@text, 11, 2) + ':' + 
        SUBSTRING(@text, 13, 2) + '.' + 
        SUBSTRING(@text, 15, 2) AS TIME) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:26:43.407

我不知道您使用 varchar 列做什么，但我强烈建议您使用 yyyymmddhhmmssmmm 格式，因为它是可排序的。

```
declare @date datetime = '20130423 10:15:15.15' -- Works in SQL 2008
select replace(replace(replace(replace(convert(varchar /* defaults to 30 char*/, @date, 121)
        , '-', '')
        , ':', '')
        , '.', '')
        , ' ', '') 
```

此外，如果您真的想要 2 位数毫秒，则将从转换函数返回的字符限制为 varchar(22)。

```
declare @date datetime = '20130423 10:15:15.15' -- Works in SQL 2008
select replace(replace(replace(replace(convert(varchar(22), @date, 121)
        , '-', '')
        , ':', '')
        , '.', '')
        , ' ', '') 
```

# css - 图像在最小级别使用 bootstrap-responsive.css 停止缩放

> ID：16161936
> 
> 赞同：1
> 
> 时间：2013-04-23T05:53:05.093
> 
> 标签：css, twitter-bootstrap, responsive-design, resolution, screen-resolution

我正在使用 Twitter Bootstrap 制作我的第一个网站，并试图了解为什么一旦屏幕尺寸达到足够小的尺寸，我页面上的徽标图像就会停止缩放并在尺寸上跳跃。

当前的行为使该网站在 iPhone 上看起来很可怕。

图像文件本身是 200 x 500 像素的 .gif

这是一个带有代码的jsfiddle：http: [//www.jsfiddle.net/eugip9/uyGH9](http://www.jsfiddle.net/eugip9/uyGH9)

这是它所在的 div 中的代码：

```
<div class="row">
    <div class="span1">
    <img src="./HomePage/logo-02.gif" center alt>
    </div>
    <div style="text-align:left;padding-top: 5em;text-indent: 5em;"; class="span11">
        <h1>Site Title</h1>
    </div>
</div> 
```

图像可以很好地缩小到一个点，但是一旦屏幕变得足够小，图像就会回到 200px x 500px

我正在使用默认的 bootstrap-responsive.css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:52:09.740

当屏幕小于 767px 时，每个 span 都有 100% 的宽度。因此，由于主题的每个图像都有一个`max-width: 100%`属性，当屏幕小于 767 像素时，您的图像正在调整大小。

我建议您使用 Photoshop（或类似软件）将图像调整为所需的宽度。使用 CSS 调整图像大小并不总是一个好主意。如果您不想这样做，只需在图像中添加一个 id，然后`max-width: 64px`在该徽标中添加一个。

# sql-server-2005 - 如何在 SQL Server 的 where 子句中使用别名列名

> ID：16161938
> 
> 赞同：56
> 
> 时间：2013-04-23T05:53:16.857
> 
> 标签：sql-server-2005

当我尝试在 SQL Server 2005 中执行以下代码时，出现错误

> 无效的列名 DistanceFromAddress

代码：

```
select 
    SQRT(POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +   
    POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)) * 62.1371192 AS DistanceFromAddress 
from 
    tblProgram 
where 
    DistanceFromAddress < 2 
```

我使用 select 语句正确获取值，但是当我尝试检查条件`where DistanceFromAddress < 2`时出现错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-23T06:07:56.930

您不能在`WHERE`子句中使用别名列。您可以尝试使用派生表。也许是这样的（对不起，未经测试）：

```
SELECT * FROM
(SELECT SQRT(POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +   
 POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)) * 62.1371192 
 AS DistanceFromAddress from tblProgram) mytable
WHERE DistanceFromAddress < 2 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-04-23T06:07:10.417

该`WHERE`子句在子句 (*)*之前*`SELECT`处理，因此别名不可用。转而使用子查询或[CTE](http://msdn.microsoft.com/en-gb/library/ms190766%28v=sql.90%29.aspx) - 这是一个 CTE：

```
; with Distances as (
    select SQRT(POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +   
 POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)) * 62.1371192 
 AS DistanceFromAddress
    from tblProgram
)
select * from Distances where DistanceFromAddress < 2 
```

* * *

(*) - 好吧，只要结果“好像” SQL 语句以某种[逻辑顺序](https://msdn.microsoft.com/en-us/library/ms189499.aspx#Logical%20Processing%20Order%20of%20the%20SELECT%20statement)处理，系统就可以自由地重新排序操作。当然，SQL Server 出现问题的地方在于它会因为子句中的行/值转换问题而[产生错误](https://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors)`SELECT`，这些行/值应该被该`WHERE`子句消除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T06:07:37.130

```
select 
  SQRT(
    POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +
    POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)
  ) * 62.1371192 AS DistanceFromAddress 
from tblProgram 
having DistanceFromAddress < 2 
```

可以工作（尽管我认为没有，也没有 group by 子句）。

问题是您只能在`where`子句中选择的表范围内使用名称。`Where`是一个预过滤器，它在选择行之前过滤掉行，因此字段定义中的此类表达式尚未执行，因此别名不可用。

该`Having`子句在分组后用作后过滤器，并且可以使用查询中的别名，尽管恐怕您需要一个实际的`group by`子句（不确定）。

另一种方法是有一个子选择（派生表或在选择中选择），您首先选择每行的距离，然后仅选择与这些结果相关的距离。这将起作用：

```
select d.DistanceFromAddress
from
  (select 
    SQRT(
      POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +
      POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)
    ) * 62.1371192 AS DistanceFromAddress 
  from tblProgram) d
where d.DistanceFromAddress < 2 
```

或者您可以重复该表达式。这会使您的查询更难维护，但在某些情况下，这可能对您有用。例如，如果您不想返回实际距离，而只想返回该距离处的兴趣点的名称。在这种情况下，您*只*需要在`where`子句中使用表达式，在这种情况下，可维护性参数就消失了，这个解决方案是一个完美的选择。

```
select 
  tblProgram.POIname
  /* Only if you need to return the actual value
  , SQRT(
    POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +
    POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)
  ) * 62.1371192 AS DistanceFromAddress */
from tblProgram
where 
  -- Use this if you only want to filter by the value.
  SQRT(
    POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +
    POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)
  ) * 62.1371192 < 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:15:44.467

我认为您只能使用 AS 来显示最终值。要进行比较，选择应该从其中的另一个选择语句返回。

喜欢：

```
SELECT a.disfromaddr FROM
 ( SELECT SQRT(POWER(cast(Program_Latitude as float) - cast('41.5126237' as float), 2) +   
 POWER(cast(Program_Longitude as float) - cast('-81.6516411' as float), 2)) * 62.1371192 
 AS DistanceFromAddress FROM tblProgram) 
a WHERE a.disfromaddr < 2 
```

你可以试试这个。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-06-04T13:46:38.970

```
select 
    t1.*,
    t2.brand_name,
    t3.category_name,
    if(
        t3.parent_category_id=0,
        t3.cat_key,
        (
            select 
              concat(t3b.cat_key,'/',t3.cat_key) 
            from master_category t3b 
            where t3b.category_id=t3.parent_category_id 
        )
    ) as cat_key,
    (
        select min(t4.product_MSP) 
        from trans_products t4  
        where t1.product_id=t4.product_id 
    ) as product_MSP,
    (
        select min(t4.product_MRP) 
        from trans_products t4 
        where t1.product_id=t4.product_id 
    ) as product_MRP 
from master_products t1,
master_brand t2,
master_category t3 
where t1.status=1 
and t2.status=1 
and t2.brand_id=t1.brand_id 
and t3.category_id=t1.category_id 
and t3.display_status=1 
and t1.category_id=6 
and product_MSP between '1000' and '500000' 
```

# excel - EXCEL VBA 过滤用户输入

> ID：16161939
> 
> 赞同：0
> 
> 时间：2013-04-23T05:53:21.917
> 
> 标签：excel, vba

我的输入框允许用户在单元格中输入一个值。因此，我希望过滤一些输入`=SUM(A:A)`，例如`'`不会显示任何内容，以及其他公式或可能会影响实际值的条目。提前致谢。

```
Private Sub testInputBox_Click()
    Dim x As String
    Dim y As String
    Dim yDefault As String
    Dim found As Range

    x = InputBox("Enter Parts No.", "Edit Description")

    If (x <> "") Then
        If (WorksheetFunction.CountIf(Worksheets("Sheet1").Range("E2:E27"), x) > 0) Then
            Set found = Worksheets("Sheet1").Range("E2:E27").Find(x, LookIn:=xlValues)
            yDefault = found.Offset(0, 1).Text
            y = InputBox("Amend Description", "Edit Description", yDefault)
        Else
            MsgBox ("Not found!")
        End If

        If (y <> "") Then 'Filter should be done here
            If MsgBox("Proceed to edit?", vbYesNo, "Confirmation") = vbNo Then
            Else
                found.Offset(0, 1).Value = CStr(y)
            End If

        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:15:31.683

您可以使用不同的尝试来过滤一些或所有必需的值。请记住，您`y variable`是字符串类型。因此，这里有一些想法和一些评论：

```
'tests for starting characters
If y <> "'" And y <> "=" Then
    'test for formulas
    If UCase(Left(y, 4)) <> "=SUM" Then
        'test for any string within other string
        If InStr(1, y, "sum", vbTextCompare) = 0 Then
            '...here your code
        End If
    End If
End If 
```

您可以使用or运算符将它们全部组合成一个`if...then`语句。`and``or`

# java - ExecutorService 与 ThreadPoolExecutor 使用 LinkedBlockingQueue

> ID：16161941
> 
> 赞同：57
> 
> 时间：2013-04-23T05:53:23.987
> 
> 标签：java, multithreading, executorservice, blockingqueue, threadpoolexecutor

我正在开发一个多线程项目，在进行负载和性能测试时，我需要生成多个线程来测量客户端代码的端到端性能。所以我创建了下面使用的代码`ExecutorService`。

下面是代码`ExecutorService`：

```
public class MultithreadingExample {

    public static void main(String[] args) throws InterruptedException {

        ExecutorService executor = Executors.newFixedThreadPool(20);
        for (int i = 0; i < 100; i++) {
            executor.submit(new NewTask());
        }

        executor.shutdown();
        executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
    }
}

class NewTask implements Runnable {

    @Override
    public void run() {
        //Measure the end to end latency of my client code
    }   
} 
```

**问题陈述：**

现在我正在网上阅读一些文章。我发现那里也有`ThreadPoolExecutor`。所以我很困惑我应该使用哪一个。

如果我将上面的代码替换为：

```
ExecutorService executor = Executors.newFixedThreadPool(20);
    for (int i = 0; i < 100; i++) {
        executor.submit(new NewTask());
    } 
```

至：

```
BlockingQueue<Runnable> threadPool = new LinkedBlockingQueue<Runnable>();

ThreadPoolExecutor tpExecutor = new ThreadPoolExecutor(20, 2000, 0L, TimeUnit.MILLISECONDS, threadPool);

tpExecutor.prestartAllCoreThreads();

    for (int i = 0; i < 100; i++) {
        tpExecutor.execute(new NewTask());
    } 
```

这会有什么不同吗？我试图了解我的原始代码使用`ExecutorService`和粘贴的新代码之间有什么区别`ThreadPoolExecutor`。我的一些队友说第二个（ThreadPoolExecutor）是正确的使用方式。

任何人都可以为我澄清这一点吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-23T06:02:25.643

这里是来源`Executors.newFixedThreadPool`：

```
 public static ExecutorService newFixedThreadPool(int nThreads) {
    return new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue<Runnable>());
} 
```

如上所示，它在内部使用`ThreadPoolExecutor`具有默认配置的类。现在有些场景不适合使用默认配置，而不是`LinkedBlockingQueue`需要使用优先级队列等。在这种情况下，调用者可以 `ThreadPoolExecutor`通过实例化它并将所需配置传递给它来直接处理底层。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-23T05:59:24.300

> 那么这会有什么不同吗？

它会使您的代码变得更复杂，但几乎没有什么好处。

> 我试图了解使用 ExecutorService 的原始代码和我粘贴的使用 ThreadPoolExectuor 的新代码之间有什么区别？

几乎没有。 `Executors`创建一个 ThreadPoolExecutor 来完成真正的工作。

> 我的一些队友说第二个（ThreadPoolExecutor）是正确的使用方式？

仅仅因为它更复杂并不意味着它是正确的做法。设计者提供了 Executors.newXxxx 方法来让你的生活更简单，因为他们希望你使用这些方法。我建议你也使用它们。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-23T06:01:36.697

1.  [执行程序#newFixedThreadPool(int nThreads)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/Executors.java#Executors.newFixedThreadPool%28int%29)

    ```
    ExecutorService executor = Executors.newFixedThreadPool(20); 
    ```

基本上是

```
 return new ThreadPoolExecutor(20, 20,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue<Runnable>()); 
```

2.

```
BlockingQueue<Runnable> threadPool = new LinkedBlockingQueue<Runnable>();
ThreadPoolExecutor tpExecutor = new ThreadPoolExecutor(20, 2000, 0L,
    TimeUnit.MILLISECONDS, threadPool); 
```

在第二种情况下，您只是将 maxPoolSize 增加到 2000，我怀疑您是否需要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-21T22:40:13.730

I believe one more advantage is with RejectionHandler. Correct me if wrong

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-19T17:32:37.280

在第一个示例中，您仅使用以下语句创建了 20 个线程

```
ExecutorService executor = Executors.newFixedThreadPool(20); 
```

在第二个示例中，您设置了介于两者之间的线程限制范围`20 to 2000`

```
 ThreadPoolExecutor tpExecutor = new ThreadPoolExecutor(20, 2000, 0L, 
                                     TimeUnit.MILLISECONDS,threadPool); 
```

*更多线程可用于处理。但是您已将任务队列配置为无界队列。*

[如果您自定义了以下许多或全部参数， ThreadPoolExecutor](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html) 会更有效。

```
ThreadPoolExecutor(int corePoolSize, 
               int maximumPoolSize, 
               long keepAliveTime, 
               TimeUnit unit, 
               BlockingQueue<Runnable> workQueue, 
               ThreadFactory threadFactory,
               RejectedExecutionHandler handler) 
```

`RejectedExecutionHandler``max capacity for workQueue`当您设置并且已提交给 Executor 的任务数量超过`workQueue`容量时会很有用。

有关更多详细信息，请查看[ThreadPoolExecutor](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html)中的拒绝任务部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-10T10:03:36.133

2天后`GC out of memory exception`，`ThreadPoolExecutor`救了我的命。:)

正如巴拉吉所说，

> [..] 另一个优势是 RejectionHandler。

就我而言，我有很多`RejectedExecutionException`并指定（如下）丢弃政策解决了我所有的问题。

```
private ThreadPoolExecutor executor = new ThreadPoolExecutor(1, cpus, 1, TimeUnit.SECONDS, new SynchronousQueue<Runnable>(), new ThreadPoolExecutor.DiscardPolicy()); 
```

但小心点！它仅在您**不需要**执行提交给执行程序的**所有**线程时才有效。

有关`ThreadPoolExecutor`查看[Darren 的答案的更多信息](https://stackoverflow.com/a/3518588/5545873)

# php - 试图在wordpress中获取非对象的属性

> ID：16161942
> 
> 赞同：0
> 
> 时间：2013-04-23T05:53:24.313
> 
> 标签：php, wordpress, properties

我的 wordpress`function.php`文件中有 s 函数，它应该通过 slug 而不是 ID 排除页面。`/Users/kailoon/Sites/wordpress/wp-content/themes/ebookie-wp/functions.php`现在它工作正常，但在某些情况下它会导致：尝试在第 128 行获取非对象的属性：

```
array_push($ids, $page->ID) 
```

问题是我无法在自己的本地主机上重现此错误。这个函数的完整代码是这样的。有人可以帮忙吗？

```
function exclude_by_slug($slugs){
    $slugs = preg_split("/,s?/", $slugs);
    $ids = array();

    foreach($slugs as $page_slug){
        $page = get_page_by_path($page_slug);
        array_push($ids, $page->ID);
    }
    return implode(",", $ids);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:45:37.190

该错误意味着有时`get_page_by_path`没有获取页面，因此`$page`为空。在尝试获取其 ID 并推送它之前，您需要进行测试以确保它不为空。

您的拆分正则表达式是可疑的：您正在拆分逗号，后跟可选的小写“s”。你确定你不是指“\s”吗？如果这实际上在您的代码中，那会从任何以它开头的 slug 中去掉“s”，这会导致`get_page_by_path`它失败。

# php - 将所选值分配给变量

> ID：16161946
> 
> 赞同：0
> 
> 时间：2013-04-23T05:53:35.267
> 
> 标签：php, mysql

就像标题说的那样，我需要从下拉框中获取选定的值并将其分配给一个变量。

```
<?php

 $host = "localhost";
 $username = "root";
 $pass = "";
 $database = "database_camcalc";

 $conn = mysql_connect($host, $username, $pass) or die (mysql_error());
 mysql_select_db($database, $conn);

 $query = "SELECT camera FROM camlist";

 $result = mysql_query($query) or die (mysql_error());

 $dropdown = "<select name='cameraDD' onchange='this.form.submit()'>";
 while($row = mysql_fetch_assoc($result)) {
  $dropdown .= "\r\n\<option value='{$row['camera']}'>{$row['camera']}</option>";
 }
 $dropdown .= "\r\n</select>";
 echo ('<form method="POST">');
 echo ($dropdown);
 echo ('</form>');

?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:59:20.547

```
 $var=$_POST['cameraDD']; 
```

如果表单方法是 post AND，

```
 $var=$_GET['cameraDD'] 
```

如果表单方法是get；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:55:11.680

您需要将其放入表单中，然后提交表单。

然后你可以使用类似的东西：

```
$selected = isset($_POST['cameraDD'])?$_POST['cameraDD']:null; 
```

这将保存提交表单时发送的选定选项的值。

您可以通过更改选择以在更改时提交来自动提交表单：

```
 $dropdown = "<select name='cameraDD' onchange='this.form.submit()'>"; 
```

这只有`<select>`在`<form>`标签内时才有效。IE：

```
echo('<form method="post">');
echo($dropdown);
echo('</form>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T05:55:44.950

`$var = $_POST['cameraDD']`或`$var = $_GET['cameraDD']`。

这取决于`<form method="?"></form>`.

* * *

为了：

```
<form action="POST">
    ...
    <select name="cameraDD">...</select>
    ...
</form> 
```

这将是：

```
$var = $_POST['cameraDD']; 
```

* * *

为了：

```
<form action="GET">
    ...
    <select name="cameraDD">...</select>
    ...
</form> 
```

这将是：

```
$var = $_GET['cameraDD']; 
```

* * *

您可以使用以下方法忽略表单方法：

```
$var = $_REQUEST['cameraDD']; 
```

但我不推荐它。

* * *

要显示这种形式，您可以使用：

```
echo '<form action="POST" action="somepage.php">',
     'something else',
     $dropdown,
     'something else',
     '<input type="submit" value="send">',
     '</form>'; 
```

您可以考虑进一步阅读[***表格***](http://www.w3schools.com/php/php_forms.asp)和[***模板***](https://stackoverflow.com/questions/292395/php-templating)。

# r - 如何为在格中使用 splom 绘制的相关系数添加 p 值？

> ID：16161954
> 
> 赞同：4
> 
> 时间：2013-04-23T05:54:14.097
> 
> 标签：r, lattice

我正在使用格子制作散点图矩阵，并在面板的上半部分绘制 12 个变量的相关系数。我还想在相关系数或星号下方添加 p 值，表明它们的显着性水平。这是我的 R 代码。我怎样才能做到这一点？提前谢谢了！

这是我的数据示例

```
d.corr1 = structure(list(maxt1.res = c(-0.944678376630112, 0.324463929632583, 
-1.18820341118942, -0.656600399095673, 0.332432965913295, 0.696656683837386
), maxt2.res = c(1.81878373188327, -0.437581385609662, 0.305933316224282, 
-3.20946216261864, 0.629812177862245, -1.49044366233353), maxt3.res = c(-1.21422295698813, 
-1.31516252550763, 0.570370111383564, 1.73177495368256, 2.18742200139099, 
0.413531254505875), mint1.res = c(0.783488332204165, 0.35387082927864, 
-0.528584845400234, 0.772682308165534, 0.421127289975828, 1.06059010003109
), mint2.res = c(0.262876147753049, 0.588802881606123, 0.745673830291112, 
-1.22383100619312, -1.01594162784602, -0.135018034667641), mint3.res = c(0.283732674541107, 
-0.406567031719476, 0.390198644741853, 0.860359703924238, 1.27865614582901, 
0.346477970454206), sr1.res = c(1.7258974480523, -1.71718783477085, 
3.98573602228491, -4.42153098079411, 0.602511156003456, -3.07683756735513
), sr2.res = c(9.98631829246284, -6.91757809846195, 0.418977023594041, 
-6.10811634134865, 14.6495418067316, 2.44365146778955), sr3.res = c(-3.8809447886743, 
2.35230122374257, 2.8673756880306, 7.1449786041902, 2.07480997224678, 
4.93316979213985), rain1.res = c(0.112986181584307, 0.0445969189874017, 
-0.446757191502526, 1.76152475011467, -0.395540856161192, -0.175756810329735
), rain2.res = c(-0.645121126413379, 1.74415111794381, -0.122876137090066, 
1.68048850848576, -0.570490345329031, 0.00308540146622738), rain3.res = c(-0.202762644577954, 
0.0528174267822909, -0.0616752465852931, -0.167769364680304, 
-0.152822027502996, -0.139253335052929)), .Names = c("maxt1.res", 
"maxt2.res", "maxt3.res", "mint1.res", "mint2.res", "mint3.res", 
"sr1.res", "sr2.res", "sr3.res", "rain1.res", "rain2.res", "rain3.res"
), row.names = c(NA, 6L), class = "data.frame")

attach(d.corr1)
library(lattice)
library(RColorBrewer)
splom(~d.corr1[seq(1:12)], lower.panel = panel.splom,
  upper.panel = function(x, y, ...) {
      panel.fill(col = brewer.pal(9, "RdBu")[ round(cor(x, y) * 4 + 5)])
      cpl <- current.panel.limits()
      panel.text(mean(cpl$xlim), mean(cpl$ylim), round(cor(x, y),2), font=2)
  },

 scales = list(x = list( draw = TRUE, cex=0.1)), type = c("g", "p", "smooth"),layout =           c(1, 1), pscales=0, pch=".",
 main="correlation between the weather variables after removing district F.E and yearly trends")
dev.off()

detach(d.corr1) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T07:24:16.843

另一种选择是使用`panel.text`两次，具有不同的`adj`参数。

例如 ：

```
splom(~d.corr1[seq(1:12)], lower.panel = panel.splom,
      upper.panel = function(x, y, ...) {
        panel.fill(col = brewer.pal(9, "RdBu")[ round(cor(x, y) * 4 + 5)])
        cpl <- current.panel.limits()
        ## translate upward 
        panel.text(mean(cpl$xlim), mean(cpl$ylim), round(cor(x, y),2), font=2,
                   adj=c(0.5,-0.6))
        ## translate downward
        panel.text(mean(cpl$xlim), mean(cpl$ylim), round( cor.test(x,y)$p.value, 2), font=1,
                   adj=c(0.5,0.6),col='blue')
      }, 
```

![在此处输入图像描述](https://i.stack.imgur.com/8qOdg.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T07:04:22.333

下面给出了您问题的基本图形解决方案。

```
panel.cor <- function(x, y, digits = 2, cex.cor, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1))
  # correlation coefficient
  r <- cor(x, y)
  txt <- format(c(r, 0.123456789), digits = digits)[1]
  txt <- paste("r= ", txt, sep = "")
  text(0.5, 0.6, txt)

  # p-value calculation
  p <- cor.test(x, y)$p.value
  txt2 <- format(c(p, 0.123456789), digits = digits)[1]
  txt2 <- paste("p= ", txt2, sep = "")
  if(p<0.01) txt2 <- paste("p= ", "<0.01", sep = "")
  text(0.5, 0.4, txt2)
}

pairs(iris, upper.panel = panel.cor) 
```

我通过修改提供“pairs”功能的示例来做到这一点。 ![](https://i.stack.imgur.com/i1oD7.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:09:45.237

鉴于您没有提供任何数据，我假设您计划在绘图之外进行这些计算。假设您的 p 值位于名为 的向量中`p_vals`。代替`round(cor(x, y),2)`作为文本的第三个参数，使用：

```
paste( round(cor(x, y),2), "\n", p_vals) 
```

使用数据，您可以使用相同的策略在 lattice 内完成所有操作：

```
 paste( round(cor(x, y),2) ,"\n", round( cor.test(x,y)$p.value, 2) ) 
```

# java - 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：10

> ID：16161959
> 
> 赞同：0
> 
> 时间：2013-04-23T05:54:43.390
> 
> 标签：java, arrays, indexing

我正在使用递归方法制作扫雷，以打开与块“0”相邻的所有图块。

一切都很顺利，直到我得到标题中提到的异常。异常被触发`if(removalList[num1][num2] == 1){return;}`，但确保将删除列表中的所有初始值设置为零。（供您参考，`1`表示该项目已被添加到`removalList`供以后删除）。

我还通过做检查它是否在界限内`if(num1 > gameWidth || num2 > gameHeight || num1 < 0 || num2 < 0){return;}. (gameHeight and width are both 10)`，但由于某种原因它认为它超出了界限。

谢谢你的帮助！

```
private void function(int c5, int r5)
{
    int num1 = c5;
    int num2 = r5;

    if(num1 > gameWidth || num2 > gameHeight || num1 < 0 || num2 < 0)
    {
        return;
    }
    if(removalList[num1][num2] == 1)
    {
        return;
    }
    if(blocks[num1][num2] == 0)
    {       
        System.out.println("Added (" + num1 + ", " + num2 + ") to removal list.");
        removalList[num1][num2] = 1;

        function(num1-1, num2);
        function(num1, num2-1);
        function(num1+1, num2);
        function(num1, num2+1);

    }
    else if(blocks[num1][num2] > 0 && blocks[num1][num2] < 9)
    {
        removalList[num1][num2] = 1;
        return;
    }
    else
    {
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:59:25.680

没有看到进一步的代码，特别是 的声明`removalList`，我只能猜测。我的猜测是，它`removalList`有`gameWidth * gameHeight`元素。所以索引从`0`to`gameWidth - 1`和 from `0`to运行`gameHeight - 1`。您的检查允许最高`gameWidth`和的索引`gameHeight`，这将导致您遇到异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:57:35.950

如果数组的大小为 ，则数组中`10`可能的最大可访问索引为`array[size-1]`。如果您尝试访问大于或等于大小的索引，那么您将获得所谓的`ArrayIndexOutOfBoundsException`.

**例如：-**

```
int[] test = new int[5];
test[0] = 1; // Allowed
test[1] = 2; // Allowed
test[2] = 3; // Allowed
test[3] = 4; // Allowed
test[4] = 5; // Allowed
test[5] = 6; // NOT Allowed - You'll get the ArrayIndexOutOfBoundsException here. 
```

因此，在您的情况下，

`removalList[9][9]`是允许的，但`removalList[10][10]`会给出**ArrayIndexOutOfBoundsException**。

# java - 使用 Jackson 反序列化 JSON 数组

> ID：16161968
> 
> 赞同：0
> 
> 时间：2013-04-23T05:55:06.943
> 
> 标签：java, json, jackson

我从第 3 方服务提供商处收到 JSON 响应，其中包含一组对象。当我尝试使用 Jackson api 反序列化 JSON 时。我收到以下异常

```
com.fasterxml.jackson.databind.JsonMappingException: Can not deserialize instance of JacksonFields out of START_ARRAY token
 at [Source: java.io.BufferedReader@1015a9e; line: 5, column: 26] 
```

我的 JSON 响应是

```
{
    "flags" : 1074200577,
    "results" : {
        "id1" : 0,
        "id2" : 0,
        "fields" : [
            {
                "id1" : 19202,
                "id2" : 19202,
                "count" : 0,
                "format" : 8,
                "type" : "name",
                "flags" : 0,
                "group" : 1074,
                "value" : "1074"
            },
            {
                "id1" : 19218,
                "id2" : 19218,
                "count" : 0,
                "format" : 8,
                "type" : "name",
                "flags" : 0,
                "group" : 1075,
                "value" : "1075"
            }
        ]
    }
} 
```

我的 POJO 类看起来像这样

```
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;
class JacksonFields {
    int id1;
    int id2;
    int count;
    int format;
    String type;
    int flags;
    int group;
    String value;

    public JacksonFields(){

    }

    @JsonCreator
    public JacksonFields(@JsonProperty("id1") int id1,
            @JsonProperty("id2") int id2,
            @JsonProperty("count") int count,
            @JsonProperty("format") int format,
            @JsonProperty("type") String type,
            @JsonProperty("flags") int flags,
            @JsonProperty("group") int group,
            @JsonProperty("value") String value){
        this.id1 = id1;
        this.id2 = id2;
        this.count = count;
        this.format = format;
        this.type = type;
        this.flags = flags;
        this.group = group;
        this.value = value;
    }

    public void putId1(int id){
        this.id1=id;
    }

    public void putId2(int id){
        this.id2=id;
    }

    public void putCount(int count){
        this.count=count;
    }

    public void putFormat(int format){
        this.format=format;
    }

    public void putType(String type){
        this.type=type;
    }

    public void putFlag(int flag){
        this.flags=flag;
    }

    public void putGroup(int group){
        this.group=group;
    }

    public void putValue(String val){
        this.value=val;
    }
}

class JacksonResults {
    int id1;
    int id2;
    JacksonFields fields;

    @JsonCreator
    public JacksonResults(@JsonProperty("id1") int id1,
            @JsonProperty("id2") int id2,
            @JsonProperty("fields") JacksonFields fields){
        this.id1 = id1;
        this.id2 = id2;
        this.fields = fields;
    }

    public JacksonResults(){

    }

    public void putId1(@JsonProperty("id1") int id){
        this.id1 = id;
    }

    public void putId2(@JsonProperty("id2") int id){
        this.id2 = id;
    }

    public void putFields(@JsonProperty("fields") JacksonFields fie){
        this.fields = fie;
    }
}

public class JacksonJsonObj{
    Long flags;
    JacksonResults res;

    @JsonCreator
    public JacksonJsonObj(@JsonProperty("flags") long flags, 
            @JsonProperty("results") JacksonResults res){
        this.flags = flags;
        this.res = res;
    }

    public JacksonJsonObj(){

    }

    public void putFlags(@JsonProperty("flags") long flag){
        this.flags = flag;
    }

    public void putResults(@JsonProperty("results") JacksonResults res){
        this.res=res;
    }
} 
```

我正在尝试使用以下代码反序列化 JSON

```
ObjectMapper objmapper = new ObjectMapper();
objmapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
JacksonJsonObj jackobj = objmapper.readValue(new BufferedReader(new inputStreamReader(ipStream)), JacksonJsonObj.class); 
```

如果我尝试做

```
JacksonJsonObj[] jackobj = objmapper.readValue(new BufferedReader(new inputStreamReader(ipStream)), JacksonJsonObj[].class); 
```

它在 BEGIN_OBJECT 本身失败。

如何使用数组读取和反序列化 JSON。我应该编写自己的反序列化器吗？

**编辑** 如果我处理 JSON 字符串而不是流，我可以取回所有 Java 对象。但为了获得更好的表现，我希望杰克逊能够在直播中工作

替代方式

```
List<JsonFields> JsonFieldsJackson = new ArrayList<JsonFields>();
ObjectMapper mapper = new ObjectMapper();
mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
JsonNode nodes = mapper.readTree(strbuffer.toString());
nodes.elements();
Iterator<JsonNode> iter = nodes.path("results").path("fields").elements();
while(iter.hasNext()){
    JsonNode node = iter.next();
    JsonFields fie = mapper.readValue(node.toString(),JsonFields.class);
    JsonFieldsJackson.add(fie);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T09:53:26.123

我正在考虑您已经有 2 个罐子，即 **1\. Jackson Core 2\. Jackson Mapper**

所以从 JSON 解析到你的 POJO

```
 ObjectMapper mapper = new ObjectMapper();
    JavaType javaType=mapper.getTypeFactory().constructType(JacksonFields.class);

    JacksonFields jksnflds = mapper.readValue(jsonString,javaType); 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:07:16.227

要反序列化 JSON，您应该有 3 个类

```
class Field{
int id1;
int id2;
int count;
int format;
String type;
int flags;
int group;
String value;

} 
class Result{
int id1;
int id2;
Field[] fields;
}

class JacksonFields {
String flags;
Result result; 

} 
```

然后你可以编写类似的代码

```
JacksonFields jackobj = objmapper.readValue(new BufferedReader(new inputStreamReader(ipStream)), JacksonFields.class); 
```

然后它将起作用。注意：-我没有为您可以提供的类提供适当的注释。

# python - tornado.locale.Locale.translate 有什么意义？

> ID：16161972
> 
> 赞同：0
> 
> 时间：2013-04-23T05:55:20.603
> 
> 标签：python, web, tornado

文档：[http ://www.tornadoweb.org/en/stable/locale.html?highlight=translate#tornado.locale.Locale.translate](http://www.tornadoweb.org/en/stable/locale.html?highlight=translate#tornado.locale.Locale.translate)

我在一些 html 文件中看到了一个提交按钮：`<input type="submit" value="{{ _("Post") }}"/>`并且对为什么作者设置`value={{ _("Post") }}`而不是仅仅`value="Post"`. 翻译的重点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:36:11.763

在 Tornado 中，模板`_`只是一种调用`translate`已配置语言环境的方法的既定方式，它在任何模板中都是全局可用的（参见[Tornado 的模板翻译函数'_'，它来自哪里？](https://stackoverflow.com/questions/12567969)）。

[tornado.locale.Locale.translate](https://github.com/facebook/tornado/blob/master/tornado/locale.py#L265)是一个抽象方法，`NotImplentedError`如果直接调用就会抛出。它在[GettextLocale](https://github.com/facebook/tornado/blob/master/tornado/locale.py#L442)或[CSVLocale](https://github.com/facebook/tornado/blob/master/tornado/locale.py#L414)类中实现。

# java - Android-与 AndroidManifest.xml 中的 NFC 清单标签混淆

> ID：16161981
> 
> 赞同：0
> 
> 时间：2013-04-23T05:56:23.637
> 
> 标签：java, android, android-manifest, nfc, intentfilter

我想在我的 Android 平板电脑附近显示标签后自动打开我的 MainActivity。我的清单文件如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.nfc"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

    <application

        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
    android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.nfc.MainActivity"
            android:label="@string/app_name" >

<intent-filter>
  <action android:name="android.nfc.action.NDEF_DISCOVERED"/> 
  <category android:name="android.intent.category.DEFAULT"/>
   <data android:mimeType="application/com.example.nfc"/> 
  </intent-filter>       
</activity>
  <activity android:name=".NewConnection">

 </activity>
        </application>

</manifest> 
```

但是当我显示标签时，我的 MainActivity 没有打开。

我需要另一个帮助，当我单击该按钮时，我在 MainActivity 中有一个按钮必须打开 NewConnection Activity。在 NewConnection Activity 中，我需要在 Edittext 中编写一些内容。在我输入内容后，如果我显示标签，则必须编写内容在标签中。

为此，我需要给出我给出的问号

```
 <activity android:name=".MainActivity">
    .
    .
    .
    <intent-filter>

     ????????
     ???????

    </intent-filter>

</activity>

  <activity android:name=".NewConnection">
    .
    .
    .
    <intent-filter>

     ????????
     ???????

    </intent-filter>

</activity> 
```

请帮助我的朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:50:35.570

看这里，这篇文章解释了如何在系统识别出新标签时将 Intent 发送到您的活动。

[如何使用 Android 发现任何 NFC 技术（不仅是标签）？](https://stackoverflow.com/questions/9399383/how-to-discover-any-nfc-tech-not-only-tags-using-android)

# elasticsearch - Elasticsearch jdbc河导入慢

> ID：16161983
> 
> 赞同：0
> 
> 时间：2013-04-23T05:56:37.307
> 
> 标签：elasticsearch, elasticsearch-jdbc-river

我正在尝试使用 jdbc River 将 sqlserver 数据库导入 ES，但导入过程非常缓慢。在日志中，我看到该过程正在逐一进行导入：

```
new bulk [58] of [1 items], 1 outstanding bulk requests
bulk [58] success [1 items] [116ms]
new bulk [59] of [1 items], 1 outstanding bulk requests
bulk [59] success [1 items] 
```

我怎样才能加快这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:17:11.850

问题出在我的 sql 语句上。有一个左连接正在做，查询的性能真的下降了，所以导入也很慢。

# php - 从 JSON API 获取数据到 JS 或 jquery 变量中

> ID：16161986
> 
> 赞同：1
> 
> 时间：2013-04-23T05:56:51.210
> 
> 标签：php, javascript, jquery

我正在尝试从此 api 获取一些数据：

[https://www.bitstamp.net/api/ticker/](https://www.bitstamp.net/api/ticker/)

进入一个 jquery 变量（最终显示在网页上）。它返回一个 JSON 字典（更多信息在这里[https://www.bitstamp.net/api/](https://www.bitstamp.net/api/)）。

我尝试了几个小时完成所有客户端，但意识到我不能，因为 api 不支持跨域请求也不支持 JSONP。所以我然后转到服务器端代码：

我有一个带有以下代码的 php 文件“test.php”：

```
<?php
$homepage = file_get_contents('https://www.bitstamp.net/api/ticker/');
echo $homepage;
?> 
```

然后在我的html页面中，我有以下代码：

```
<script>
var last = JSON.parse(test.php)["last"]
document.getElementById('apidata').innerHTML=last;
</script>
<span id="apidata"></span> 
```

但我不知道为什么它不起作用！任何人都可以对此有所了解吗？

我认为 jquery 可能更简单，但如果有人知道如何用 JS 完成这件事，我也想听听。我也怀疑我的 php 文件是错误的。

编辑：这是我的 php 文件[http://www.buyabitcoin.co.uk/beta/test/test.php](http://www.buyabitcoin.co.uk/beta/test/test.php) 和我的 html 文件[http://www.buyabitcoin.co.uk/beta/test/test 的链接。 html](http://www.buyabitcoin.co.uk/beta/test/test.html)

用户名：'test' 密码：'test123'

编辑：我也试过

```
$.getJSON('test.php', function(response) {$("#apidata").html(response.value); }); 
```

在html中但无济于事。任何人都可以确认我的 php 输出的是 JSON 而不是字符串吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:02:45.867

您可以使用 jQuery ajax 函数从 php 页面获取 JSON

像，

```
$.ajax({
    dataType: "json",
    url: 'test.php',
    data: data,
    success: function(data){
        var last = data.last
        $('#apidata').innerHTML=last;
    }
}); 
```

阅读更多关于`jQuery.ajax` [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T07:31:40.540

像这样修改你的 php 文件：

```
<?php
header('Content-type: application/json');
$homepage = file_get_contents('https://www.bitstamp.net/api/ticker/');
echo $homepage;
?> 
```

[header()](http://www.php.net/header)告诉请求实体它提供什么类型的数据。您请求的 url ( [https://www.bitstamp.net/api/ticker/](https://www.bitstamp.net/api/ticker/) ) 提供了这个 json 字符串：

```
{
    "high": "161.00",
    "last": "154.00",
    "bid": "153.51",
    "volume": "20295.34112055",
    "low": "135.10",
    "ask": "154.00"
} 
```

你的 html 页面有这个 JQuery：

```
$.getJSON('test.php', function(response) {
    // access the response here
    // e.g. get the volume
    var volume = parseInt(response.volume);
    // the numbers are returned as strings (numbers in quotes), thats why parseInt should be used
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:07:07.703

您不需要 jQuery 就可以下载 JSON 字符串并替换 div 的内容！

```
function loadXMLDoc() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            r = JSON.parse(xmlhttp.responseText);
            document.getElementById("apidata").innerHTML=r;
        }
    }

    xmlhttp.open("GET","/beta/test/test.php",true);
    xmlhttp.send();
}

loadXMLDoc(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T04:47:44.730

我设法用下面的代码做我想做的事。这使我可以从 JSON 中“提取”一个值（在本例中为“last”的值），以在单独的 html 文件中用作 JS 变量：

在我的 php 文件中：

```
<?php
$ticker = file_get_contents('https://www.bitstamp.net/api/ticker/');   
$obj = json_decode($ticker,true); // Split the JSON into arrays.
echo json_encode(array("myVariable" => $obj['last']));
?> 
```

在我的 html 文件中：

```
$.getJSON('test.php', function(data) {
var myVar = data.myVariable }); 
```

我希望这可以帮助别人。

# java - 请帮助我了解协议缓冲区

> ID：16161992
> 
> 赞同：2
> 
> 时间：2013-04-23T05:57:16.057
> 
> 标签：java, python, protocol-buffers

我错过了 protobuffers 的一些东西。以下是一些我难以回答的问题。

*   .proto 文件是否足以获取所有数据？在网站上的地址簿示例中，他们似乎将数据写入文件并从文件中使用（与 .proto 文件本身分开）。我知道 proto 序列化了对象结构，并且我知道它可以序列化一条消息，但是我很难找到将数据放在哪里并在一个包含的 .proto 文件本身中检索。

*   如果上面的问题得到了回答，我认为我的假设是一个团队可以创建原型文件并使用 java 序列化数据，而另一个团队可以简单地获取文件并使用 python 反序列化这是正确的假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T06:01:01.110

> .proto 文件是否足以获取所有数据？

该`proto`文件用于定义消息的结构。每个字段都有一个标签号。只要你有正确的`proto`文件，数据就可以正确反序列化。是的，`proto`文件就足够了。

> 一个团队可以创建 proto 文件并使用 java 序列化数据，而另一个团队可以简单地获取文件并使用 python 反序列化这是正确的假设吗？

一个团队可以创建定义发送/接收数据所需的结构，其他团队可以使用该定义进行通信。只要两个团队使用相同的`.proto`文件并且正确分配了标签号，您就可以轻松完成您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:33:55.227

这样想

客户端java代码**-proto编码器**
-- 字节 =======网络======= --字节 -proto**解码器** 服务器端java代码

 ****代替网络，字节可以由一侧写入文件并由另一侧读取。任何。

为了让**proto 编码器**和**proto 解码器**完成它们的工作，他们需要了解传入字节的格式。`proto`文件描述了该格式。

这有点类似于通过网络发送图像：双方都需要知道它是一个`png`文件。如果一个发送`png`而另一个尝试解码`jpg`，事情将无法正常工作。`jpg`与vs`png`描述图像格式的方式相同，`proto`文件描述数据格式。****

# c# - *.designer.cs 文件的手动编辑

> ID：16161994
> 
> 赞同：9
> 
> 时间：2013-04-23T05:57:25.003
> 
> 标签：c#, designer

我知道，该`.designer.cs`文件包含由 Visual Studio 中的可视表单设计器生成的数据。但是，我还有一些额外的方法，我也想将它们放入`.designer.cs`文件中，因为它们负责较低级别的表单处理（例如，我的可视状态管理器的片段）。

文件中的`InitializeComponent`方法`.designer.cs`有注释说明它是自动生成的，用户不应修改。此限制是否仅适用于该方法，还是根本不应该`.designer.cs`由用户编辑文件？我注意到，除其他外，它包含`Dispose()`用户可能想要修改的方法 - 建议第一个选项。不过，我想确定一下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T05:58:44.797

你永远不应该修改`.designer.cs`. 时期。您的更改将被毫不留情地覆盖。

**更新：**为了更有帮助，自 v3 (VS 2008) 以来的 C# 已包含部分方法，许多设计人员现在将使用这些方法来让您实现自定义行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-28T18:53:01.847

我认为其他答案过于简单。

首先，我完全同意编辑 .designer 文件*几乎*总是一个坏主意，但在某些情况下，我这样做了，觉得它是好的和正确的，并且没有被烧毁。

1.  假设我创建了一个标签并意外双击。Designer 在我的主 .cs 文件中创建一个方法，然后我将其删除：

    ```
    private void label1_Click(object sender, EventArgs e)
    {

    } 
    ```

    好吧，现在代码不会构建，除非我从我的 .designer 文件中删除以下内容：

    ```
    this.label1.Click += new System.EventHandler(this.label1_Click); 
    ```

2.  不太常见的是，将事物添加到表单或面板（或菜单！）的顺序很重要，并且在代码中更改此顺序比在 Designer GUI 中更容易。以我的经验，VS 2010 总是会注意到这一点，更新它的 GUI 信息，并重绘它的预览。只要记住关注`Add()`方法——通常声明变量的顺序并不重要。

3.  如果您设置的属性会导致将一行添加到 .designer 文件中，则同上，删除该行会很快被拾取，并且 Designer 会刷新。也许使用 GUI 更改属性更明智/更安全，但我认为删除该行更干净。

4.  不在此区域内的代码，`#region Windows Form Designer generated code`只会生成一次。移动是安全的，正如其他人在其他地方推荐的那样（[https://stackoverflow.com/a/6527072/1593924](https://stackoverflow.com/a/6527072/1593924)） ，如果您正在修改它或添加一个方法，将`Dispose(bool)`方法移出实际上会很有意义`Dispose()`理想情况下应该坐在旁边`Dispose(bool)`。

    ```
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing); 
    ```

免责声明：

1.  也就是说，我只尝试过 VS 2010 Ultimate；您的里程可能会在上述 1-3 上有所不同，但只要 .designer 是 .designer`Dispose(bool)`之外的部分类，4 应该是安全的`#region`。我还确保在弄乱它之前将 .designer 文件的最新好版本提交到源存储库中。

2.  通过承认我遵循了这种`Dispose(bool disposing)`模式，我并不是要推广这种方法。似乎有[充分的](http://blog.stephencleary.com/2009/08/how-to-implement-idisposable-and.html) [理由](http://www.codeproject.com/Articles/29534/IDisposable-What-Your-Mother-Never-Told-You-About)在大多数情况下简单地使用，并且只为非[托管](https://stackoverflow.com/a/7248773/1593924)资源[做更多](https://stackoverflow.com/a/538238/1593924)的事情，每个资源都一对一地封装在专用的 Disposable 对象中。`Dispose()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T06:02:02.610

此说明适用于完整的 Designer.cs 文件。由于其中编写的所有代码都是自动生成的。

您不应该对此文件进行任何修改，因为它可以随时重新创建...这将删除您的方法...

如果您想将代码与表单代码文件分开，那么我建议创建另一个包含部分类的文件，您可以在其中放置所有此类方法...

希望能帮助到你...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T06:25:43.967

让designer.cs安静下来不仅可以防止您的更改被覆盖，而且还可以帮助其他开发人员说不会出现任何意外情况。话虽如此，我至少能想到一个例外，那就是帖子作者提到的一个例外：`Dispose()`方法的扩展。据我所知，此代码 - 一旦生成 - 将不会被覆盖。

但是，在我看来，更好的解决方案是重写该`Dispose`方法而不是调用`base.Dispose()`，这样我们就可以让 Designer.cs 保持干净。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T06:16:28.237

Visual Studio 使用它来放置构建控件所需的所有代码的部分设计器表单类。

方法 InitializeComponent() 不能被覆盖：设计器编辑器使用它来呈现表单的预览！在新项目中尝试：调整表单大小，添加标签和按钮并重命名 InitializeComponent() 方法 + 重新编译。您的表单恢复到默认大小！

如果需要通过表单加载调用代码，只需重写 OnLoad() 虚方法即可，如果需要通过表单显示调用代码，只需重写 OnShown() 虚方法即可。

请记住在覆盖的开头调用 base.Method()。

希望我的这点小经验能帮到你！

# python - 如何从 python 运行一个调用另一个脚本的 shell 脚本？

> ID：16161999
> 
> 赞同：-1
> 
> 时间：2013-04-23T05:57:41.573
> 
> 标签：python, shell, loops

下面是一个 shell 脚本的例子：

```
python command_name.py --shell positional_arg1 positional_arg2 --option optional_arg1 --True_flag 
```

我只想能够从 python 脚本中调用它，这样我就可以遍历脚本，通过每个循环更改不同的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:01:15.953

```
import subprocess
p = subprocess.Popen(["python", "--shell", "positional_arg1", "positional_arg2", 
                      "--option", "optional_arg1", "--True_flag"], shell=True, 
                     stdout=subprocess.PIPE)

out, err = p.communicate() 
```