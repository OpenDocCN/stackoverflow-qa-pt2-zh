# StackOverflow 问答 15791000-15791999

# object - 在 Eclipse Link 设置所有实例变量后在实体中创建对象

> ID：15791000
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:32.903
> 
> 标签：object, jpa, entity, eclipselink, instance

给出了以下 JPA 实体：

```
@Entity(name = "MyEntity")
public class MyEntity {

   @Id
   protected String id = null;

   protected String name = null;

   protected String adress = null;

   @Transient
   protected User user = new User(name, adress);

   // Required by JPA
   protected MyEntity() {
   }

   public MyEntity(String id, String name, String adress) {
   // assign instance variables 
   }

   public String getUser() {
      return user.toString();
   }

   ...

} 
```

在 Eclipse Link 创建的 MyEntity 上调用 getUser() 时，将不会返回所需的字符串。问题是在 Eclipse Link 设置 MyEntity 的实例变量之前实例化了 User。换句话说，用户是使用 name = null 和 address = null 创建的。

如何确保在 Eclipse Link 设置所有实例变量后创建用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:07:49.013

您可以像这样使用[`@PostLoad`注释](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html) ：

```
@PostLoad
private initUser(){
      user = new User(name, adress);
   } 
```

一旦您的实体完全加载并设置了它的字段，该方法将被执行。

# ruby-on-rails-3 - 思考 Sphinx 从同一个连接表中搜索不同的条件？

> ID：15791007
> 
> 赞同：0
> 
> 时间：2013-04-03T15:02:44.517
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

这个问题类似于

[如何从同一个连接表中搜索不同的条件？](https://stackoverflow.com/questions/1573144/how-do-you-search-for-different-conditions-from-the-same-join-table)，但我没有从this.z得到解决方案

我的代码

```
has_one    :insurance_type_link, as: :enumerable, class_name: "Utility::UserDefinedEnumLink",
         conditions: {user_defined_enum_links: {user_defined_enum_id: Utility::UserDefinedEnum.insurance_types.map(&:id)}}
has_one    :payment_duration_link, as: :enumerable, class_name: "Utility::UserDefinedEnumLink",
         conditions: {user_defined_enum_links: {user_defined_enum_id: Utility::UserDefinedEnum.payment_durations.map(&:id)}} 
```

我的 define_index 有这个

```
indexes insurance_type_link.user_defined_enum.enum_value,  as: :it, sortable: :insensitive
indexes payment_duration_link.user_defined_enum.enum_value, as: :pd, sortable: :insensitive 
```

在 development.sphinx.conf 内部生成的 sql 查询是

```
AS `it_sort`, LOWER(IFNULL(`user_defined_enums_user_defined_enum_links`.`enum_value`, '')) 
AS `pd_sort`, IFNULL(`user_defined_enums`.`enum_value`, '') 
```

所以它对这两个关系生成不同的查询，结果只有第一个查询给了我正确的搜索结果。

如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:04:09.387

我使用捷径方法修复它，不确定它是否可以...我定义了第三个关系，其中包括我之前定义的关系，只是为了搜索并在 define_index 方法中使用它。

# highcharts - 范围选择器中的 Highstocks 更新日期

> ID：15791010
> 
> 赞同：1
> 
> 时间：2013-04-03T15:02:52.673
> 
> 标签：highcharts, highstock

有谁知道如何以编程方式更新 rangeSelector 中的日期？

这是我图表的小提琴[http://jsfiddle.net/ibike365/jneQh/1/](http://jsfiddle.net/ibike365/jneQh/1/)

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]
    },function(chart){

          console.log(chart.rangeSelector);

    });
}); 
```

我有一个用例，当我加载图表时，我需要能够为所选范围设置特定的开始和结束日期，但我运气不佳。当我在控制台中检查 chart.rangeSelector 属性时，我什至看不到要更新什么。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:13:02.530

我想到了：

`chart.xAxis[0].setExtremes(startDate.getTime(), endDate.getTime());`

# c - 根据规则标记您从文件中读取的文本

> ID：15791012
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:03:00.317
> 
> 标签：c, tokenize

我有一个任务要编写一个代码，它应该在其中读取一个文本文件，然后编写一个输出文件，显示代码中每个参数的频率，即“整数 = 2，关键字 = 13，标识符 = 3 ...”

我写了一个代码，但我面临的问题是它总是将所有频率输出为 0。好像“整数++”和其他增量都不起作用。

你能告诉我我在这里做错了什么吗？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(void)
{

   FILE *input; //file to read from
   FILE *output; //file to write to
   char *token=NULL;
   int keywords=0, identifier=0, integer=0, real=0, relationOperator=0, ArtOperator=0, lPar=0, rPar=0, semicolon=0, assign=0, comma=0, etc=0; 

   input = fopen("input.txt", "r"); //read from file
   if (input==NULL) {
             printf("I couldn't open input.txt for reading.\n");
             exit(0);
          }

   token=strstr(input, " "); //tokenize

        while (token!=NULL) //start of loop
        {
                if(token=="%s"){
                    if(token=="main"||"a"||"b"){ //if identifier
                        identifier++;
                    }
                    else{ //if keyword
                        keywords++; 
                    }
                  }
                else if(token=="%d"){ //if integer
                    integer++;
                  }
                else if(token=="%f"){ //if real number
                    real++;
                  }
                else if(token==">"||"<"){ //if relation operator
                    relationOperator++;
                  }
                else if(token=="+"||"-"||"*"||"/"){ //if arithmetic operator
                    ArtOperator++;
                  }
                else if(token=="("){ //if left parenthesis
                    lPar++;
                  }
                else if(token==")"){ //if right parenthesis
                    rPar++;
                  }
                else if(token==";"){ //if semicolon
                    semicolon++;
                  }
                else if(token=="="){ //if assignment operator
                    assign++;
                  }
                else if(token==","){ //if comma
                    comma++;
                  }
                else
                { //consider anything else as etc
                    etc++;
                  }
        token=strtok(NULL, " ");
   }//end of loop

   output = fopen("output.txt", "w"); //write to file

       if (output == NULL) {
             printf("I couldn't open output.txt for writing.\n");
             exit(0);
          }

         fprintf(output, "keywords = %d\n" ,keywords);
         fprintf(output, "identifiers = %d\n" ,identifier);
         fprintf(output, "integers = %d\n" ,integer);
         fprintf(output, "real numbers = %d\n" ,real);
         fprintf(output, "relation operators = %d\n" ,relationOperator);
         fprintf(output, "arithmetic operator = %d\n" ,ArtOperator);
         fprintf(output, "left parenthesis = %d\n" ,lPar);
         fprintf(output, "right parenthesis = %d\n" ,rPar);
         fprintf(output, "semicolons = %d\n" ,semicolon);
         fprintf(output, "assignment operators = %d\n" ,assign);
         fprintf(output, "commas = %d\n" ,comma);
         fprintf(output, "other characters = %d\n" ,etc);

         fclose(output); //close output file

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:12:01.747

乍一看您的代码，我很惊讶它甚至可以编译。即使是这样，表格的行：

```
if(token=="+"||"-"||"*"||"/") 
```

不要做你认为他们做的事，你应该把 if 语句重写为

```
if (*token == '+' || *token == '-' || ... || *token == '/') 
```

token 是一个指针，因此您当然需要比较它的*value*，并为条件语句使用正确的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:08:00.733

您不是在读取文件，也不是在进行标记，而是在比较指向字符串文字的指针，这是完全错误的。阅读一下 C 和标准库。

# jquery - jQuery Mobile getJSON base64

> ID：15791013
> 
> 赞同：0
> 
> 时间：2013-04-03T15:03:01.940
> 
> 标签：jquery, mobile, base64, getjson

我对 getJSON 有问题，它发送巨大的参数，比如将带有 base64 编码的图像发送到服务器。

这是我的代码：

```
$.getJSON("upload.php/?jsoncallback=?",
{
    "images" : "iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAADJmSURBVHhe7d0HuCVHcS9w289kbJYMJmixwWSzSIDJLAIDJkkmmqhF5ChMFgKxYAQIMAiRo4TA5CCRsQhLRvCABUwQcckZFl7wAxP8/+EZOG845545596rvXem+vv+37n3nJnp6eqq6urq6uo/+qMqRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiQFGgKFAUKAoUBYoCRYGiwCgpcLW0+jlL4pm574rBH/eg3J/nmoctWY/3u1dwnh71nC7XXHYV9ajrysEZetR1vlxzl1XU9Zjce8Ye9bhkW/DkJet6Ru67bs96zpnrbr1kPWj3hEBf9yl458gl6zom9922TyW5Bk+spp9a+bhKz/o21WV3ztv+Zkn8IvftCPoogAvkulOWrMf7vSm4dA/KninX/MMq6lHXnYI/61HXZXLNq1ZR1xdy77l61OMSQvnDJev6Ze57aPAnPer6y1zzvCXrQbvvBefvUY9LDgk+u2Rd/yv3Pb9nPXjiNUvWMykb3ndwpVUAe9IyI/oDe+CIXPON4D+DJ/ZkLJbGp4NfBycED+lRj3chYP83+FBw/R7UP3uuObyp50f5fFDPeh6c677e3PfofJ63R10H5pp3B/8RvHmBep7d1PO1fPYdVR6Za/cG3wyO6lnXo3Ld/www8TFBHwtqW657Z/B/gl0969FPzwp+3tDigHz+aQ/64aNvB18K+vLeY3PtewO8d1LQR1GzSD7V0OFd+ezLe9rlvfAFGg5aARCwa/boNJecNaB9CfNnAib3SqMLDfz44PvBVwPm6P/oWddNc90nm3sfl8+zrXAfptsWfDj4f8Hrgz7WiUd6/+ODnwVocdVgJSbGVBQNBv5ccPue7VEPAcH0Pw2eFpx5zr2XzO8fCFhcLwn6jrBnybUUtDa5/0bBSnTXpkMD/bQnMDj0LVube36VT1MOymYl2msTAdZPLw7836dQ8A8IKN3PB/84p03MfxahQcS73Sboo5zad7lW/vhIUApgoncQcHvT4ZTASwMjGWJ3C9P/HgEhwYj/Ely4T0831+yXzycFewNa/D4z7qdkCO1zA0zFvL7JAvW4lIXxieB/B8cF1w4ou265UL64W4AxCLE54kUXqItwmP+rhxWgTZ7ZLZTF/sGLAgxsJKIQtbVvuUEuNGLuDVhT1wu6SpSgsnh2BO9p3uvV+UT7vsUzKHmm+Q8Co+xFgq6w4ZHLB08PvhN8uamXsupT0ASvvSNAExbYjYOu38H7bAluFVB+hJ9lw2/Td1DwPtuDUgBTegYTHhYYAQmcOTrNfFDTQYTpDsGxgU7G7C8PMPQ0RTGlit9+ZcS6UnMvYftiYITZEbAkTC0ODphrbwxcQ6i8S1+maus2EhPGU4O9wdsDjsubBayj6wTaZNQ2d1UXK8Mo0deiURehMOIZ+TDxnoAJzcQksBgcU983eF3AHCcs5vHnCBZhYMJuJKfYvO+uwHTiFgEFB5xpLAXXEOCTA4pi0cJ/8MJAX1NWrER1/32AfiwQ9KWIWBmuMU1ZRNF4J20i2Cw9tPlg85zJNrEM/jn4eED4Xav/+vhBJtv9d/mnnUbVFGCCMpjQ6EjQaGEd8ZOG4ObDtO5XAsqBQL0g4PXt412f7AB/Uxjt6M7sUxchN1q9NcC4HGQsDO9CGfT1RHfr2pIv7h38W/DjgB/hk83/6tMmQsKENzLzA5y++5Ae/7erFSwW0yhz2j0BuqHfR5v6KYj3BaYb5wwWEf72NTga7xS8JeCk2xvwx5gPA2upVZwn5G/KZxGFNtncS+Qfo/u/B/pem0yp0NNISvDVTyAfHlAay7Tp7LnvlgFafTegdCbbxOL0nQGKA5DltEyhvCiRmgLMoB7mJwRHB0bgjwVMdZ2xK2BKW4Kh5ReZe3Wrw5BMSiMKwfPsth51nhQwQVkFfZfWZjEE62Z7YAQxwhNG7VEfJXB8YFpz8TVokynSHQMjJ+WlHqDUCOxTAqMxa2YZQWnbSFmzLB4RsCoIoHoot/cHLwnuF1hpWXSUbOtoP5nZtwsoNwpmd1OXfnpbYBpoekahrabopysElONrA4qmbROr4JWBAYqPatlSCqAn5YzslwuYy0xKYF5ihmVHk2lVUyKcYNsDDh31qPNvgnnOtJ5N+d1lnmep7+CmHvVRdhcMFpnGzKuXwBmltamlndHtgACTr0bwu3V7numHUV5dlhcpmK3BahT0tDaeO19eI2Cut/1kOsc6W8s24T3K+IZNPcx/gnuxeYTv8XspgB5EqkuKAkOlQCmAofZstaso0IMCpQB6EKkuKQoMlQKjUQCcQeZpHDNrOWcfKmNUu4ZNATLAL8OBbUVBvMuglwEteVlSEcBhDV9gylo6aobNLtW6oVAAzwtUM/KLuxATYYnUMq0YkMEV66MCHQS2fDOwdvqtQGCI5ZO19HYPjnjVoEFRAK9vCyxTCrwiC98IxGmIxVgmOGrDE0hUlUZbl31QIEpLkI1gFxaBddYqRYGhU8DIL1BNYBnB3xO0cQQiGC0zLxtctqloZ94jXPOrgYg7ARbCT6sUBYZMAb6vEwORl0LX7xWsNlBp09JLAAdfAGKwBgRWVCkKDJkCeJy5b9Czx2X0gx6T55SAA8RutypFgSFTwMYle0mESAuHHn35q1DA7r12p9/oCVIEGDQFzP3x+suCrYNuac/Gia22uYdJ9Iqe99RlRYHNSgH5D0x5bSpbiz0Em5UOv31vO/x4Pm3dBDvIqhQFhkwBPC6Rie3ScgAss8V709PHUoiGXzmQPUUiBXuhR68RN33PVgPmUQCP24ItgapEMJYEycLgg+GEPNoiar+5rbu2btpXTfgth9xzHuXq96LAQChg6c/yN96XT8CWbDJBNsjIIEPkr56GSQYh5NEyiJjnnwcyugh9XG1yiIHwRjVjBBTA6+L9ZZ0S+ksWyIRsRlYJ5DIYXJFhR7ojjaX5pFeSc0/SiCpFgTFS4FKNwPMJkAnywRkuIczgSqsAxDvLGycAokb9wXVzNWhBCrRZmkwLTh2DAjDvl9128E6PBRmhLh8vBciCNGMc4YO3ACgAqZurFAWKAr+nQJsQpBRAcUVRYIQUKAUwwk6vJhcFWgqUAiheKAqMmAKlAEbc+dX0okApgOKBosCIKVAKYMSdX00vCoxGAQj9bQOBqtuLAkWB/04JJhDI4amDXwbUQEdv2wl1eODU1ipFgTFS4KJptO3B9gDYEPcfQ1YAUh3LhmL3k1TIvwikBXeCrJwAFRk4RhEYZ5vxuuzYkoI4VtyGIJ9k48RApOzginPW5f+T/tuBIEcG9gWwCByF7eTdKkWBMVDgFmmk/P8yAzkK/ohGJsiGU6K3DJ0I9jufN3C2u8NCmD6sg/2G3vBq3+gp4CQsJr+8gB8NZAk+TzDIHADzepumu2uwNzAduMe8G+r3osAmpwAeNwV2RN6hgQNzRlvMhRwLZgogVfJxo6VENXwsFHhxGupEoHcH8gGM3vclLbhswKYBbxgLF1Q7R0sBx+Ax/6XCv8hoqTDRcIcjsACcEXh8EaQoMHAKSIvHAtgVXGLgbZ3bPPMfmYJ+GDgxmD+gSlFgyBS4exrHByAN2I5gFAeBTuvQLfmSB9TaZ60CDJnlq22TFLDSZRUAz38gkB17FI5ApwHLgX614ObBowPZgcQBvD/4h+KTosBIKID/DXx43+ejGpkgGwcEgzwt2CkonHxvCxyMwOx3GhBnyMGBfOhVigJjoABeN+C9spEDskAmyIajwwaZMq/NCszZJ/jHkt+DgssHo18KGQPXVxv/Pwrg+f2DhwSWBikAFsHgNwM5DOG+gbnQnxZTFAVGTgEysLVRBDYEDV4BVFbgkXN8NX8qBUaTD6AUQElAUeAPKVAKoLiiKDBiCpQCGHHnV9OLAqUAigeKAiOmQCmAEXd+Nb0oUAqgeKAoMGIKlAIYcedX04sCo1EA0oLfLbh4YH+A89GrFAXGSAG8f+5GFg7L56nBYAOBDknj7ICSAdUegLcEDw0kCj3zGHu/2jxqCpwlrb9c8PDAHgD7AX4Z/Ci45RApsz2Nen3w4eBzgT3R0oDZCXhQcNYhNrraVBSYQoE/y3eyYNsJaG+MlOBkwv+yY11lyFQ7QxrH/HcSiqhA6ZG+FMgNUHsDhtzz1TYUwOO3Cb7a8D6hlyj0YgHZGE2RBvlKgaQIpgV2CMoPWKUoMGQKOA3Izj/mPuvXWQCj9YPReE5IMf/5bmB7cJWiwJApYPsvHxie5/kf1ag/rWMlRnQoiESJ/zrknq+2FQVCAXN8nn5OcGb/6IvDQV8a8AVImVylKDBkCvD4/zw4Idg65Ib2aVv3YJAX9bmprikKbGIKyP7D818Hg4QIsqFKBe6kYGnBpQ2rUhQYMgXuksZZ9sPzjgYbbVpwgRACHhCDScQ0qoCgIbN+tQ0F8PjJDc/jffEAo+H7M6ax5vwEXzZgzhDLIU5JlRy0SlFgDBSQDPRjDe+TAc5vWYLlyTz9UAkgFJin35noHH7W/vcGHICUwmjXQofa4dWumRTA63j+ZcFPG1kgE5SBE4MGGQrcpgVvI/84Q24aCAEu4S9pGRsF8LyQYGHwVgREw7ZKQKTg4EqrAJj7Nw44PwZr7gyu96pB60UBMkAWHBH2qcYKGLQCGHtWYMdA2RLdLgOtF2PVczcXBUaTD2DsCuCp4cufBHZ/2Q5apSiAAqUARsIHpQBG0tELNrMUwIIE26yXr6QAHBr55GB3cO/gqsERwTub74RKW03ZElwouE8gptz17wpMLywxzSocT+cNHhy8r7nPvWAjVp/VGIe8Wrnhy3HfCwMn2u4IvOczg20zXuDC+V67HIDpXjtAXxfcevYrj+aXUgAj6eqVFIDgqNcEvwneFNgk9b1A1JjveIk/G3jG0wOBJL7zm2ssIb0qIGjdYh+67Eu2oNp5Kf7CfS189+mAgM9yzjrT0fq15dxfN/dK6sKf4cx7z/DOjrnuFtMdod7fCix3qdczLAt/ITg2OM+U+8byVSmAkfR0XwVgfZiwPya4dnD74B2B+AlpoxwkSdidNX/dwOj/jcBy0o4ptHTm/HMCUZdfCQ4PCCrcImjzMrAy5KnrloPzhRGbkBv1/e/exwZy2Ylvp4SmKYC/zvcEfG+wJ9Am914vYOFwisoQ9YQp9Y7lq1IAI+npvgqAoNk7zmRnurMODgvsmSDEtpVeJhBdKbmKEbYNLCHo3XLBfEGhGH2PDiaF3DPuGBBi9bp2sghVZfYb+U1R1NvuYz9f/pbXToYbo3pXAZwu390h+HpgpH9A4B6FVeJvMfGtBSJJzBhLKYCR9HpfBSBe/OodmogQa0dLCVUJflv4BJ4UUA7m1d1CyK8ZXCcQctotErMw51kYlwzs1GzLNfKHNWoCbIrQTd0mp8Prg2kKgF+BX0BCWOHfXTNfPVLEvTGQKIOCGGMZjQIwgmEIUYBGt7GVvgrAfJlgTRbmPkH8ZPCPnd+M2kxoZvgb5hDVHJ8zsQWT/JSA8BNivoLJ6ExBXF8LTDm676QqzzsmoHy6FgBTn3+Af+LRM97r/PmeZWHa86w57z60n7X9oOD5AZ8OC23QgUAYlGNrd2ATBKYeU0RgXwXwxNDlLzrc3iqAjzRMM/nzPAXAWjAaE3aj9ecnoD+Y/61jr6sAHpnfmOiY1DOmFc9lQXQVwPXznfdlAXAycnJ2weEpLgLzm9qMoZhCif7TXgqd9UM2BqsAzFEfEZh/YgCOKB5gjqWHBVvG0OtpY18F8M+5tuuMW40C8CwKl7BbAcB0JzW4XT5ZD/pjmgVwVL43gq+kADgh9wZdBXDDfGflYHLFYdbf6n/tCPgAr/OboAvFyKFraZRsmNpdeog0oPHOFVwg2BZY++VYMvLwIt8zmJx3DpEG2rQvFIANVxxtTGzOun8KzOXFDAC6245qBF9WAVASnISzFIAR7iXB5NSj+zdFtH2oHd+0y9TqXsEXG963EYglYIAkG1ZrRpEoVCP/NjAqWcsWmDKGnAD7QgEY/S3DGWFfENiF1i2EjzKepgCs//PdzPIBmMceH7AsugqAA5FDkwLYOaXesX1F4X6w4XkD4BXHIvDTOppn+kaB6QDT1Nr00Mu+UAA875YGCbiRelp5bsOU0xSA9XpzdH4DMQmTqw+edbOgNfO7CuCvmrrNb5m5F5lSuaVA0YmPC6YFEQ2JJ8Q9mE4x+28QkIFRl3YJaCwOoH2hAJiV7QqBSECjjsL0PzAwJbBO/6tgmgKwWmOZzhTB6oRRjOMWrhWYt7fTh64CEEPA1BeghOmPDPS5gvmZvvwdIgQ/E1yh+W2oH5QgXrdSc9GhNnKRdiECojBPT1zkxk167b5QAKZbvPHm/6Zbov0oBE6nXYHlJ2v0ewMrAYRcDMLkXNQ81SjPUtNPT2kg/p8Ph4lvGZEyoCAmixiFnQElQwm8sqkfLTxL/UZFKwlDn/9SpBx/aDBrRaVDvuH+yyFiNNod/CQ4ZrhN/V3L9oUCULl5/z2CTwStF56wfzTwTkZiSgBz+v1+wWTGWvfzExi59FX7DMJvWnFicy+fzqWm9KOpgNFffa2vwTP2Bm8JeMXHIBBPb9qsHw4IJuMtppBt2F9Z52b+MYmYiDIFDb2I+MLsBKwNiW3bzKQW4GMkFLEn/HeyEKx7B3cPugE5hNVcfWdAUKeVM+VLS4meDwJzBGSZIpgOXDmwVOs3f3dHY/9fNXjgxDOE+Yr1F9zFAuBknCXIfBEHBZa62newC9EzJ5XNjNcfxNciLllieB79OVBHV8z9BJvsDPYEewNOqC2jo8TmaPDF8pp3C+4aWKrqFnsDWAYUAIU+bZVhc7R0/d8Sj1OSlmTxviCryb0V6/8G+6gGJuBtgx2BEYC5aT4Jdpcxh6psTApcJa8lis88nwXCYmgLr/7OwKhmfj/L+tiYLds3b8XReXzA7/GdwCauhwQ7AvEx++2b11rfWjVMPDmBN8/ETDzSTMFpc8b1fZt6+iIU2JKLjVp7g48HRnmKAMTuE35+gacFrIUq8ylg1LeV+gMBRUAmyIalVtOkwZU7p0WcPj8MeELNNXmmzza4lg6zQYK2WGqcfq2jUH9a/hMj8OygrLjF+h7v8wmZBrwt+HEw2L0ArQLgBSb4VTYfBTge9SNP9vEN7OLbEWzdfM3ZUG8smOpTY1AAH0oj7UuvUhQoCvyeAiwB06vBWwClAIrtiwJ/SIFSAMUVRYERU6AUwIg7v5peFCgFUDxQFBgxBUoBjLjzF2n6OXLxtsC22csGKy2j2rYrCYtrLdF1t/EuUm9du74UKAWwvvQdzNMFiewOrMHbnSeTz6wNJfYS2FvgWjkX1jrmQr3i/m3osuPvdIOh8mnfkNEoAHEAEiF0U0uf9iTfnDVOKgApuATnzNpQst4KwPPt/qNgJDGVN6DK4hQgCzZpjSIOwJ5w+9DtADNqSBhRpT8FWgUgeYcUXF8IbPOdNvqWAuhP131xJd4nA6Zoxwb2BQw2DsAmETHPYsYl/7An/F2BY6nMa8eQEHQtmKxVAEKq9wR24KGj/fzdsogCMD2w049Jb+OWDSlyCc6y1GwIsodDZmEWwPMC4cJ8DuVrWLmn8Tqel2RlV0AWyATZMECKChxcwVSHBkcEdj8ZuZiwlIJwUsxWZT4FWgVg/m+DjpOCbKx6fNDNL9dXAaC9velStFMoBFqKrhMCisVzuwpaRqEfNde2yUF8ChMe5R73+V33uyvQW0YlSpwM2F9hKkU2HNG2dYFnbcpLjRCSSNg9RvMhhDlkOZHmd+ekArhLLnemgjRf8vx3d5H1UQAScbwj+HlgY48dad8NjEa+w5ysNKnFJ4vNXJMbgzAyRSSxZ/kCZvcjHjfg2fiD958aGBxHmRnIXnKJQMxnvxjUHoHZjNP+MqkAmIpG6FcHzMjjgsksPvMUAGZ0D1+ChJx8CbIGKdcN5PeTuIKgXynoWgHlBJzfX90rrpUvrMjgeTsoTbVGWzAUxpIOjDnJCqiyMgW6CkAaMXNJJjs6ytzTCupKCsA15vDyAlIANwy6FpjMPrZu2/67M+iO7KUAFufWf8ktRn99tf9EXy3+pIHcwfyRIRWTnTiQNq1nM7oKQF0cdxJzMNkl2OTMU1ZSAITdnJMCMAVoR/7uu983X1AuUn518xCWAli8p1uFKiPWtDMSFn/iJr+DAuAUpAAwWZWVKTBNAbjjwMA0ij/FHHOeAjBVeE3AcUcRsCSmFdMMJqtMNQJ+JkspgMW59c25hc+G02/r4rcP7w750TAup9Mxw2vemrdolgKwrCRbrxFdQIm55koWgBGf158CsEQ7a7nv7/KbFZtSAGvTlVZJ9jY03bY2j9y8T5EW/KiAQ8ScCNNWWZkCsxSAOb29ARx3PPJGmHkKwFIiBSBZaymA04bztqea1gkot2I3Nfxp8xb7uBbLgBxQgkcwKweg5ZAKD57fMbMUgDvR1YgtooxCFXcxay+Atf13NgrgnvmctQRrXVoy110BBTNZagowv7+6V+BxUX8sXrz/jMCS+OCDp8z15ZOTAPFVAbPfOijhRwSHRlSZT4GVFIC7LStxCJpnyrrs3D+jfHczEB+AI8D8ZjmqG0TUvknLrM/PF1s7r1cKYH5/TbvCaoo+amMByAKnoNiKQ6bQeblaNthdt8/7EHbryhx+GJQJaoQ5e1ChwP06bJ4CMJLYZyEwyChzSiPkXQXgOg4+PoNvBjz83VFIiu/dgSnavYKzdV6xFEC/Putehdfx/J2afrJ6QybIhr6wMWhwxehvtNFApj/mu3CAiar0p8A8BeBJHIJGfoKLuaZZAK4TBchKEP771sDW4jaQSFDWSxqm/GA+rVl3o9UmFYA+vWj/ZtSVDe9bChRpyRoTgTnYzUCtAvhoGnmjYNa6c3HGyhToowAI6uRGnVkKoHUc7s715qOU82cD+wv2BKILmafqnLZrUz1i2l3H2nDtw4Pa19Gfi/UBWbhlMIrtwJUVuD9zTLuyjwJwn3V94bxGlVkKwHXtvgwh2T8IWA2ud99xwdUDI/2sKRqnY7uXwH21GWi5/h1NQpBSAMsxSHuXuSNvvKOlmPorFaP25QPbdLc1wj7r+gs21wrNdr37+mT5oRx4sQUJuW9rUJu6Fu/jUgCL06zuKAoMhgKlAAbTldWQosDiFCgFsDjN6o6iwGAoUApgMF1ZDSkKLE6BUgCL06zuKAoMhgKjUQB2oNXx4IPh22rIGlFAENYo4gDsV39bIHecLDTdXHNrRM96TFFgw1NAxiVBcWRBLIVgqsFGAt46jZPy2H4AwSYaK8R0Z2AduUpRYEwUsPfiMYG4GLJAJsiG/Is3HSIhpK2yNXVHYNfTSYHIMxFnzwm66aaGSINqU1EABS4Z2F0pAzMZODEQQk027AuwR2bQhdkv4uzRAavAtOBJQU0HBt3t1bhQgNkvMajRHu/vbGRhlJvihJ+a/5j32IQirnwzFLkL5OP37jT31g340jbqyMHgHb1rd5plD8D25vf75HMtw3cp98MDGYq9wyLFxhhnRz42sIFsaOV6aZD0ajZfaaOsWKMtmFD8+O5AcgSacaMXiTMs2di7bfOL93ZAx0YrMs9IFNpuwfbOk4XAU17yAcjLsJZnNN49z5NJ+D3BdRYkjP0NRwe/CE5e8N7NcLndk3uDTwT2T3S3WG+GNqzpO9pD/upAdiB+gY1e5HDDoARHUhN4/QZ8aYzF72KUeUjQtQBKAeybTpP5WvIPqfD1z+jLxUMBudJNAyiCjV44cMQy2AP/3kYRmMtttmQYpQD2Dae9LtUa7CiCzcYza04x5rRYgC8HvKHyBW7kYn4qk5H526eDOwQ/ayADz7RygXzJJD4s4POYZvJtyfe8v65hFnbz8zHnjRaCRe7dXOda2Xwl/piVrMN2XteZS2/tvFxfBYBJTR8cG+ZZbb0yBs3ajjw5BbhJrvubQEo490pAioazmH+RKYDB48aBdGWe7R35kWQ62qjlUXkxTm88zx8weZTbRn3ndXkvDecskr7afM+oeoV1qWntHkqgnhnsbT4JNytA2i0ptaYVefW+GljntQw6TVivku8/EvAr3DWY9AhTBtsDiTY4StHKvB6+EZwQyOt/zk7la+ED0B9PC/SNUWuyXoErhA5NuqVVANr0xOAVwbeb+02ZOMGODa485d6+CgDNpCHbHbRpz5jWYksoYwoTDTZaoeA/HkjD9uJg/0DylsEXjHyu4PzBpQOjgJxzRlACwlO9kVMjG7kJhGSbewIj25aARucP4PSaFdBEyWFO2Xenpcu6X/NMygRjT5Zt+cfUiNVBcJiQLwgIPicbJ+TuAD0ny2oVgMQj+sdUR9ucIqReIPzqlUKMwrK0NVlaBSA9ub6lqN7c3Os5Uod5LsXQXSXoowDwz5sCyuRzAfp6L88WSCO25AnBNOXUedXT/F88zvn6tYYGx+fz4ECbyAZFPkirQIYZJv5RAcb6VEAoeEOPCCytbeTCrGRKE0R5DY3+bdot3xkhj5zRAB3M7JNrTxLIyWJa8dLA6I8+XTowmfcEhMbSWsvU7mNCvr2514g6WVarAKQCUy/fDKfn5HIVRchvo80vDJjik6VVACwGpu5jgjbQC5M/OPhSQIFwUE6WeQoAzZ8bEH7TMEuNrQLyjujFUvJs0adrubrRedWl/9XH+np3QAYMKmSCbBgIZXsaXGmTgjJhjQyE6GXBbYLunHcjNp4pz3NLUI3kbTlv/mB2MuneF0wz51g+Opu1c93ONZfL/0xlI6XfusW8X8ZYo0Y3WpIysHSq7pcHkybvahUAS0Q7Yb8p7yWISyQbi4QZO1laBUAxur+71k0JuJ9yYRlM+hLmKQDCYYRn9u8IugJOMT4jYKGoe6N62vE8H45+M8VCS/042L0ArQJgDppXGr0sqW2Gwmy7VmAUNnJxXLbF6LMzMA34frBtRoOs/1IATw4mR3kjFuFnxlphWKmYPjAVgdCZ+78lMNK+IZiMpFytAph8D/Ua5du6OdoIPjOeAP9t56VbBWAkvuOMBokP4PhlCU5Oe+YpgAfkeqPmnoDynVYOyZf66d3BATOu2ShfU4bXD54TGBgHrwA+lEbyIG+mYj5snk7QvtIw9Y3yCQcH5pt+Myo9fkbDtuf7rwfvDNppACHV8bQ/7/6WKfeyKIxi1w5MAfgD4N+CPcEvm7rXQwGwMAgq64PPoa2bT0C9HJsrKYCVAoEIPROeX2NSoc5TAMx/dHYv67Hth8nPNsTcNdeYQtON+NXf56U4B0sBbMDesdQm2Kf1gs/6JBAfDpih04r5OtPU/JrwM62NUvwgV51xjymClQejgzk3bzqLYXfwruALzXuttQLg46DM+C6YpoRevZ8JCDbnm/dZVgGwYDyHj4Agt2WeAuAvmVwJWalPWGwU52YopQA2aC+dLu/F408QmPAsmF0dYOTdQWsFMIn/eEp7mK+e89AAozPhTw0slYkR6BaWhzn+TwLCx8vNYcrEpkRYBua76zEFUI93pXgoGtaHeo20fBqsnh8FyyoAS8B8HxQJ5m9LXwXg3T4Q7FoBplWcz5uhlALYoL3EgfXYwCjIfJ+2jGc0J/Q800xjAv0nU9ojIIbJ+9bA8tdTAyOqOeC0NWvfY3J+k/sH3eU2z3hWsNYKgM/j/YGRVlumzbWflO9ZMyspANbQjafQAW0wPJ8JZ/Ck13ueAminACfnPktmQymlADZoTzLBOdrM080tZ5Wz5QfeXM5AQj0rGs1KgtGcI21XYGphijGtHJQvjZIsjGkrBNvyPatgrRWAtjDNPffAgBU0WbTtuKD14s9yApquWObrroywbATrcOZp/6Qnf54CsOzXToU4JqcpWtaUftsabIYVJrQtBTBVBPbtlxj/4MBIZa2WQ2xWwWgPDAgNJeBaI2m3iAY0omN8n+5hUk8rzG1TDp5yYcetb8GnOboVBHPztVYAVhOY5tpxaEAhmNKwUlhAvqPk1LuSBeB3ATvM/fbdz5C/twecmKYX1sMnyzwFYCmUM9W7PSK4cNDS2bMJv2VT1onVpq2d52/Uf0sBbMCewTzHBkYqI+1ZVnhHTHjFgNmMOY8OpsUEWPb5WMCfYDrgnlmFo8xym2eaftw8MOrdInhVwMmF0TkfzdMtI7aCttplQJaKEX53cMuAlcLvYBnTSoh6TXl2BWIVJqcn7TIgb72lvjdOvDtGPzHwGzPe0uJkmacAXGtVgg+A8jNFEZiELlYT9JNYDUpCXdOmVp0qN8S/pQA2RDf8/iWMeBieCS6qjONuXmHKshSMfBgQM09zBh6T7zn2nh9snfNQjkIKg8C0Hu9WsARSmZawUPxmCtIue61WAVg/9zxKgELzfIqIcBm9jdwCoCifrwW3nmhHqwBYCe9t2tp67l0vQIhvY5p/oI8CUBXfhykGWrTv5x3FJvieZTUZbzHxehvyz9EoAEyl45mZ3bnlRuoZ72Zk46U3+q5k/rfv7R7xAhQGmLdPG4GMVEx70wF0mFcwB8dh+9x35O/bB5xgRj4rAX7jq2jn4+q9WvM9mneXw/x+38A0xLNby2HyXbbnH+v/lho9nzDvDMQxUHZWCqy1nxLcdOJG70ZpvTYwdbH68e7mGZTC8wLPnla2NM/dk8+Xz7im/fqQ/EEZubalDbOfVbVZ5v54Bg/cKjDVo3BvM6fdm/LnO+etaehW+x+ZvwUEafw0R86mbGS9dFGgJwXwPN6/VkAWrIZwbg5WARgJmI/mvhrJJLSO/Oxgv1ICPdmmLhsCBQg/nrekyZdCFsgE2eAY5eMZZGGWMR81sHUyabz5YNcZNEgCVKOKAqGAuAcxEq3gm+rcrJENKxmjKMwfDi7r67zJbwtW8rKPgijVyMFTAI/zW3BeclZaYRkt329J4+/VaEKe5NsOvvurgWOnAB7nsDT684vNChgbBZ0skQmPFXbKP8A7XKUoMGQKvDCNM9d/X1DT3hBBPLv1bNMAUWVVigJDpoCpLvP/pQF/2OiLdWyRYpYH5637jp5YRYBNTwERnDz+bwgutulbs8oGCEaxKUZYpzRPD17l8+r2osBGp4CIUpGbeN5Gq80SqrzmdBU7b6/22wNbbUWrlUm05mSuB24wCpjyfiL4ZWDKywc2qkA4Go+gHxZIgWSjje2xwken7Z7bYP1Xr1MUWBUF8L+gOHtFRP4JmbYSJjBo0NaAWPQTAx5/8fXW/82FxJELDOomu1gVlevmosAGpgBeF/tP+CkB018yQTYEyNnDMbhi44bRnrnP4//vwVGBXWejDYQYXC9Xg/pSAM/jfduZZU+2MkA2hMcLDhpcaTcDaex9gssGUk0N2uwZXC9Wg9aSAnhffgiy8KDArsvBbgZqFYAYaDugqhQFigK/p4At4nxig1cA9sHbBlylKFAU+D0FRpMQpBRAsX1R4A8pUAqguKIoMGIKlAIYcedX04sCpQCKB4oCI6ZAKYARd341vShQCqB4oCgwYgqMRgEIebx/YCvkRk4LPmJerKafhhQgA7bEHx44jm3wcQD2/dsNJQmI7b/OcKtSFBgjBbal0c5OfEXQngkwWAXgkIyTAgkRhQNLi2QThMwoDgqZdozWGJmi2jx8CuB1B6kYBG2K2xvYG2NrvM1A7elOg6LEudKaKwSiACVGPDpwGIKjnJx+e/CgWluNKQrMpoATp+z8Yw07es6mOKdEEXznQToebdBFMlAKwb5o24HtEnQ81dZBt7oaVxT4bx5nBdsRa1+M1PiOeJt2huTg6XX2tNB579IjSZV8l8G3uBo4dgrgd6f/4Hn87uj1URepkXcFfALOda9SFBgyBY5P40x78fwlhtzQvm2TI002YCaR7MBVigJDpgAex+t4fvQ5MM17nJNGG9KKxw2556ttRYFQoLUA3pW/Lzl2ipj/HBpIg/St4K5jJ0i1f/AUuHtayAfwg4ATfJS5MGX/PXdw60B+AKsATkyRGbVKUWDIFNiaxp0cmAZYCpQQ1yrA4FODW9sU9ScW4HrBwwIRgbKiOidtkIkQh8zJ1balKSAjMOE38DkP44GBA3LIhvyAW5Z+8ga+kdC/JdgVfCXg9bf0JzrwoKCSg27gzqtXW1MK4HXBQByCpr78X2SCbLw+GGTOzDYpqFjnzzWNFwc9+vPR1pS16mGbiQI2AT08eFMgIzBreLB7AVoFIOaZ86POAthMrFrvup4UIAucg6NIC15JQdeTlerZm5UCo8kHUApgs7Jovfd6UqAUwHpSt55dFNjgFCgFsME7qF6vKLCeFCgFsJ7UrWcXBTY4BUoBbPAOqtcrCqwnBUoBrCd169lFgQ1OgVIAG7yD6vWKAutJgVIA60ndenZRYINTYDQKwBnoNwlGmQNtgzNhvd6+oQBZsDNWlOzgQ4F/nUbaBfXpwLkAkoNWKQqMkQK2xD+0EXwyQTYGqwAOTuOM/nY9/Sb4VdNYKcGvPsberzaPmgLb03pbggk8WQCy8cHgBkOkjCOQ/jyQBcgOQJrv68F/BruDaw+x0dWmosAUChyY75wE9Mvgq8GDArkxyYYMQYM/Mk/2EzugrtMIv+woMgLVdKDkZegUYPa3GYE+lr+3B2cOBp8RaFrHUgJORNkbfCOonIBDZ/9qn22/koD8JLh5I/yjpQrvp3MBnJQiK8pLRkuJavhYKIDHHQnG4nUuwOhXw8x9HJJoGvDmsXBBtXO0FCD4Pw8cijv6cwFwwaWCdzcWwItHyxbV8LFQgOCzAJwLICXYqAuvp/PRfhqYF0kbVqUoMGQK8HN9u+H50Z4LoIMtd0gFbjmE+c8PcN4h93y1rSgQCpwveGfD85/Mp+zAZx0DZYz2fx1sC3g/nxKcGsiE6ox0acNH7xAZAyOMvI14HK87DwDvfz54cnCzRjbEyAzytCDx/6KcCLu04I5HthTCAXiN4EwjZ4xq/ngogNfx/CuCvYFjwsgE2eAPc0jI4MrkuQACIJ4ZHBI4ILEOBRlcd1eD5lAAz+P9HY0smA6M5lwAjhBLIHU2QMnJ2Clg/v+XwWFBnQswdm6o9o+WAqPJB1DnAoyWx6vhK1CgFEBP9rBTSgDFNYPbBjcMrhSs9RHLNmfYnOTEVnVI2LC9qfsMPd+172VnzIVWSLTJcdE3Dq4YWBZ1lPpaFR7oLU2bMNztmzYJxlrrHWjaZJqnTTzclrv00wWCtV7tscK0/0Q/XTd/a5NNNmtZ0OjCDc20R7uuGlxwDSopBTCHiJwm1w+eFDhBlbdUDAGLQgzBccE9g/2C1QiNe4Un27TxgkDo5oeD3cGu4HXBEwNKAZOvplAkPL5HBa9t2uTI9FOCtzdtunc+xYyvpk2U2V8EfC8vatqEbjLQaNMbAsuyFA+hWY2A8uvwcO8MXt20idPXspd+Egv/T4FjsFdTT27/rYI8NHhO8NZAm3YH9tk7dfqpwcGBwWE1hdee8npk8MpgV9Me7bKm/6+Bg261adlSCmAG5TAJDW/PdJtAQeQgr6lwSkuLdhKKr/5y8MLgKsEywkkgMS/B/2IgZNOzKQCdLovRjwMbl7yLjEa2dy5TWBf3adqwN5/QCiRG/lpTvyQRQqQpimXadPrcd0Dw3ICTSf4FUZfqwLy7A8uxMtJo5xGBYJVltqeeJ/dZ7aG8LPOik+Wt9wbopX98h6aExrHwy1oel8u9zwiso/+iadNH84knKNEfNXX57sjA+voyCuccuY+l6Wj77wc89dr0vqZd+ATtvhsYHA4OlqFdKYAQblrB9LSr8EkdbUR+QEPo7flkFVhOfHYguQKhNZrS2IswlxGWOfeagILBrJ7p2TpHEgcmH6H3Dq1yeET+XjSGQZsoNMzzs+AdweGBACn1yAij3mMDDO6aNwbXCRaxBFhNdlsatWSe+WZAEdypqcM59ISQIvJ812DkRwVnDxYRGEqa1cQqQz9C7zm3Cpjkgl+EvrLgXKMuCogltWgxtRA/4hnfCSh91s2NgmsH2nTfgEBSBBTeY4NFN99o020CmazURUE+umkThaw/KAcWnAFJVh/Wm7YuqgRKAUzhAgxsDmnEkC+N+WqENqp1i869f0BwdZboKvO1vsXUAXMSNiO9Z1me6RYm8vbg+YEQZvUtysSYhxAYOYzuBKQb/UX4vP/9AsxF4VBIpid9C+sEwxq1WBTaNE0IKJUrB88KWkUhcGsRxYbp39PUZUqBJpTIZJmcihiZtck04UJ9G5TrPOPxzXsS7IcFFw26sSSUPz+KNlESBgdKte/Ss3rQhHLWTxTaTYMtnXfVT6wEioIFh08pNhbeIgq0FMAUJrBGan6HqMwuzr+VNKvOMZdlfhJMgtV3xMTwTMfvBRhMp84qmG3/wIiAOTBx3852nSkGRUMIKLiVLJVWiI3MlAZnZJ+CTt6RlWFEZk3Mizmn8EwNTBNOCM7fp6JcQ1E8rqlHm1gy05R0+zi0ZXW0/XS7nvW4jFLcExht9fU8QWMBUUimiMcHgm/6FKO/d6QQTw04TFfiJdPHQwPKFv1YIX15z/uMRgEYiQj1Q3uACel6BNXZfcwqFkKric0zH96jHu/C9G/NPJ0xrxjdmP+UE6VhJOrTJteZ12NgZqn59rzC1NwVmD9j5j71mFI8r3k/NOybePUxuZZyMl14Qs+6duY6Tr7fBE8LOOfmlcvnAo5cbTq5Zz3abUQnzKwvI3x35O/WS+Fy3rECDAp9eY9Z7/1MO08KtsxpkHpcQ0njCdNEfdCnr1zDumXR4EHWxOAK5xAGWQY64U5Bn1GWOSmmepl63PPm4DI9qG8qcItV1KMuNOma/tOq9j6vWkVdnH8siT4F8xmZl6EfRU3B9VHUpjKmUcvU454fBH0tlB25lgW5TF0UlPfsU1hC/A7L1NPeM1gFwMHGa7sMjCpXCPooAALFwbZMPe7hyOLNnleY7QRz2Xrcx1G5kqncvoMRlQJcti5e8L4rCJfLtUcvWdcxue/AeYRrfjcNoECXbRPr6c971oV3rG4sUxdfUt9pF55YTT95v6cG3rdKUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoUBQoChQFigJFgaJAUaAoMDYK/BctuI4jKZO7LwAAAABJRU5ErkJggg=="
},
function (data) {
    alert (data.success);
}); 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:58:20.560

HTTP`GET`请求有大小限制。`POST`正如一些人已经评论过的，最好使用提交 base64 数据。

正如[StackOverflow 帖子中](https://stackoverflow.com/questions/266322/http-uri-get-limit)所述，最多 2,000 个字符可能是安全的，这是 IE 实现限制，而不是规范限制。

# .net - .NET Membership 删除其他应用程序中不在 web.config 上的属性

> ID：15791015
> 
> 赞同：1
> 
> 时间：2013-04-03T15:03:06.993
> 
> 标签：.net, properties, web-config, profile, membership

我想确保我需要将其标记为风险，因为这是预期的行为。我有几个应用程序可以使用存储的凭据访问一个数据库。如果我将一个新应用程序连接到此数据库并且该应用程序在 web.config 中没有属性（如下所示），则当用户登录时，这些属性将从数据库中删除。

```
<profile enabled="true">
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
      <properties>         
        <add name="base_id"   type="string" />
        <add name="phone"     type="string" />
        <add name="firstname" type="string" />
        <add name="lastname"  type="string" />
      </properties>
    </profile> 
```

有没有办法避免这种情况并防止 web.config 中未声明的属性被删除？

# c# - 从 XSD.exe 创建内部 C# 类

> ID：15791016
> 
> 赞同：5
> 
> 时间：2013-04-03T15:03:12.290
> 
> 标签：c#, xsd.exe

我正在编写一个库，它将接受一个 XML 字符串作为输入，它将反序列化并对其进行一些转换。输出将是具有不同架构的单独 XML 文件。

这个内部 XML 将遵循一个内部模式，我不希望将其暴露给库的用户。该架构是在我的项目中的一个 XSD 文件中定义的，我使用 XSD.exe（与 Visual Studio 捆绑在一起的那个）从中创建 C# 类。

我遇到的问题是 XSD.exe 生成`public`类。我希望它们是隐式或显式`internal`的。

无论如何我可以让 XSD.exe 创建`internal`类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:29:23.063

不，它不会创建`internal`类。XSD.EXE 输出的类旨在由`XMLSerializer`. 唯一支持公共类，因此`XMLSerializer`如果 XSD 输出`internal`类，序列化将失败。

# php - 当apache重启时，php后台进程被杀死

> ID：15791022
> 
> 赞同：0
> 
> 时间：2013-04-03T15:03:26.720
> 
> 标签：php, apache, process, background, kill

我对 apache 和 php 有疑问。

我在 php 中调用这个脚本：

```
exec("nohup sudo QUIET=y sh foo.sh > /home/tmp/log.txt 2>&1 & echo $!", $res); 
```

不久之后，脚本 foo.sh 需要重新启动 apache 以包含新的配置文件：

```
/etc/init.d/apachectl restart 
```

在命令行中，它工作正常，但在我的 php 脚本中，进程在重新启动 apache 的同时被杀死。为什么？我认为 nohup 分离了它的父进程。

（我指出我无法更改 sh 脚本）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:06:59.530

You should use `/etc/init.d/apachectl reload` if the only thing you want is to reread configuration files.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:12:04.550

```
/etc/init.d/apachectl reload 
```

这不会`stop`是服务，而是保持它运行并刷新进程配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:07:14.870

Use `/etc/init.d/apachectl reload` instead if you dont want to kill the process.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T12:31:25.140

由于`apache restart`发送 SIGTERM，而不是 SIGHUP，您应该从`foo.sh`

# php - 如何在像 xampp 这样的网络服务器上部署 phar 文件

> ID：15791027
> 
> 赞同：3
> 
> 时间：2013-04-03T15:03:40.780
> 
> 标签：php, xampp, phar

我正在使用 maven 和 php 并将我的代码打包到 phar 存档并将其部署在 xampp 上。在java中，我们为应用服务器的webapp文件夹复制war文件，如tomcat。我如何在 php 中做到这一点？我只是去把 .phar 放在 xampp/htdocs 文件夹中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:38:07.330

您需要告诉 Apache 它应该`.phar`使用 PHP 运行文件：

```
cat /etc/apache2/mods-enabled/php5.conf |head -n3
<IfModule mod_php5.c>
    <FilesMatch "\.ph(ar|p3?|tml)$">
      SetHandler application/x-httpd-php 
```

有关详细信息，请参阅[http://cweiske.de/tagebuch/phar-webserver.htm 。](http://cweiske.de/tagebuch/phar-webserver.htm)

# java - 使用其他 JInternalFrame 内的按钮将 JInternalFrame 添加到 JDesktopPane

> ID：15791032
> 
> 赞同：3
> 
> 时间：2013-04-03T15:03:46.073
> 
> 标签：java, swing, jinternalframe, jdesktoppane, swingutilities

[我从https://stackoverflow.com/a/6868039/2240900](https://stackoverflow.com/a/6868039/2240900)获得的这段代码

> 如何使用放置在 internal1 某处的按钮将 internal2 添加到 desktoppane1。

在添加到按钮的 ActionListener 中，您可以使用如下代码来获取对桌面窗格的引用：

```
Container container = SwingUtilities.getAncestorOfClass(JDesktopPane.class, (Component)event.getSource());

if (container != null)
{
    JDesktopPane desktop = (JDesktopPane)container;
    JInternalFrame frame = new JInternalFrame(...);
    desktop.add( frame );
} 
```

我的问题是如果按钮位于另一个 JInternalFrame 中，如何添加另一个 JInternalFrame？例如：使用放置在 internal2/internal3/internalX 某处的按钮将 internalX 添加到 desktoppane1，其中每个内部都是使用 internalX 内的按钮而不是使用菜单栏创建的。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T23:58:00.357

我偶然发现我们可以使用 JInternalFrame 的一个方法，即 getDesktopPane()。正如javadoc中提到的：

```
getDesktopPane

    public JDesktopPane getDesktopPane()

Convenience method that searches the ancestor hierarchy for a JDesktop instance. If JInternalFrame finds none, the desktopIcon tree is searched.

Returns:
    the JDesktopPane this internal frame belongs to, or null if none is found 
```

所以我们可以使用如下命令：

```
JDesktopPane desktopPane = internalFrame.getDesktopPane();
desktopPane.add(internalX); 
```

或者如果类扩展 JInternalFrame 只需使用

```
JDesktopPane desktopPane = this.getDesktopPane();
desktoppane.add(internalX); 
```

让 JDesktopPane 在嵌套的 JInternalFrame 中添加另一个 JInternalFrame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:12:47.953

将侦听器外部化到它自己的类中，如果需要，使用适当的参数。然后，您可以在每次创建新框架并将其应用于其按钮时实例化此侦听器。

# sql - 查看表是否启用了页面锁定的 t-sql 是什么？

> ID：15791041
> 
> 赞同：1
> 
> 时间：2013-04-03T15:04:08.810
> 
> 标签：sql, sql-server, sql-server-2008

我在带有 SQL Server 2008 R2 的 Windows Server 2008 R2 上运行 SAP ECC 6.0。

根据 SAP 的 Early Watch 报告，我应该在我们的生产系统中的一些表上禁止页面锁定。

我的开发系统中没有 Early Watch 设置，我想验证他们是否允许页面锁定，然后我开始运行 t-sql 以禁止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:14:21.150

```
SELECT allow_page_locks FROM sys.indexes WHERE object_id = object_id('TableName') AND type IN (0,1) 
```

# asp.net-mvc-3 - MVC3 EF 4.1 包含条件 Linq

> ID：15791044
> 
> 赞同：0
> 
> 时间：2013-04-03T15:04:12.790
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4

抱歉，如果在我学习 EF 4.1 和 LINQ 之前有人问过这个问题，我需要专家意见。我有一个名为 HomeIndexData 的视图模型。我的代码如下所示：

字符串 _categoryIDs = "100,101,102,103,104";

List <int> CategoryIDs = _categoryIDs.Split(',').Select(t => int.Parse(t));

然后我得到了以下视图模型：

```
public class HomeIndexData
{

    public IEnumerable<Genre> Genres { get; set; }
    public IEnumerable<Category> Categories { get; set; }
    public IEnumerable<SubCategory> SubCategories { get; set; }
    public IEnumerable<Country> Countries { get; set; }    

} 
```

目前，在我的控制器中，我有以下代码 -

```
HomeIndexData viewModel = new HomeIndexData
            {

                     Genres = db.Genres
                              .Include(i => i.Categories.Where(i => CategoryIDs.Contains(i.CategoryId)))
                              .Include("Categories.SubCategories")
                              .OrderBy(g => g.DisplaySequence),
                  Countries = db.countries            

            }; 
```

但我收到错误：

```
Cannot convert lambda expression to type 'string' because it is not a delegate type 
```

对于以下行：

```
 .Include(i => i.Categories.Where(i => CategoryIDs.Contains(i.CategoryId))) 
```

你能否让我找到正确的方向，我该如何写 lamda 表达式。

对此的任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:24:32.343

EF 目前不支持 Include 扩展中的复杂表达式，仅支持简单的属性获取器。如果您认为这是 EF 的重要增强方案，请考虑在[http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include投票-扩展方法](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method)。

目前，您最好的选择是在 Select 子句中投影您的过滤器，但是使用通用存储库会变得很棘手。

# java - 如何从 groupbutton 检索 jbuttons 文本

> ID：15791045
> 
> 赞同：0
> 
> 时间：2013-04-03T15:04:13.137
> 
> 标签：java, swing, prepared-statement, jbutton, buttongroup

我正在尝试获取所选按钮的文本名称并将其发送到我的数据库。buttonGroup 是否有办法传递所选按钮名称的文本？因为我想将选定的按钮名称插入到**事务表中**。

```
 try {
      conn = getConnection(); 
      String Transaction = "INSERT  INTO Transaction"
                + "(Currency_type, currency_Amount,Local_Amount,Rate,Tran_type) VALUES"
                + "(?,?,?,?)";

      pst = conn.prepareStatement(Transaction); // create a statement
      pst.setObject(1,DisplayL.getText()); // set input parameter 1
      pst.setObject(2,txt_select.getText()); // set input parameter 2
      pst.setObject(3,txt_amount.getText()); // set input parameter 1
      pst.setObject(4,txt_rate.getText()); // set input parameter 2
      pst.setObject(5,buttonGroup2); // set input parameter 2

      pst.execute();// execute update statement
    } catch (Exception e) {
      e.printStackTrace();
    } finally {
            try {
                pst.close();
            } catch (SQLException ex) {
                Logger.getLogger(connectnm.class.getName()).log(Level.SEVERE, null, ex);
            }
            try {
                conn.close();
            } catch (SQLException ex) {
                Logger.getLogger(connectnm.class.getName()).log(Level.SEVERE, null, ex);
            }
    } 
```

预期产出

**交易**

```
Tran_ID  |Currency_type | currency_Amount|  Local_Amount|   Rate  |Tran_type|
     4   | Euro         |  1200.00       |    1000.00   |   1.120 |**Sell** | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:11:33.627

```
 ButtonModel btnModel = buttonGroup2.getSelection();
if(btnModel !=null)
{
 btnModel.getActionCommand()
} 
```

# c# - CompareValidator 可见性

> ID：15791050
> 
> 赞同：0
> 
> 时间：2013-04-03T15:04:27.223
> 
> 标签：c#, comparevalidator

我在 C# 上遇到了 compareValidator 的问题。
我在验证密码时会显示 2 个错误：
- 新密码和密码不能相同，或者
- 新密码字段必须相同

我使用了两个比较验证器。一个验证当前密码和新密码字段（仅限第一个）。和其他检查新密码字段是否等于确认新密码字段。
所以，问题是当我输入与新密码字段相同的当前密码字段并且我输入与新密码字段不同的确认新密码字段时，因为两个错误都出现了。我需要一次显示一个错误...

有没有办法只用 compareValidator 来解决这个问题？有没有办法获得 comparevalidator 生成的“可见性”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:11:57.070

自定义验证器可能是要走的路。请参阅[http://forums.asp.net/t/1566657.aspx](http://forums.asp.net/t/1566657.aspx)以获取类似的问题以及客户端和服务器端验证功能和标记的示例。

# javascript - HighStocks 阵列系列

> ID：15791053
> 
> 赞同：0
> 
> 时间：2013-04-03T15:04:38.293
> 
> 标签：javascript, arrays, highcharts, highstock

我使用来自雅虎的日期和收盘价创建单线系列图表。我已将日期转换为 JS 时间戳并将它们放入名为 timeStampArray 的数组中，并将收盘价放入名为 closePrices 的数组中。

我可以用如下数据填充图表：

```
data : [
          [ 1361750400000, 442.80],
          [ 1361491200000, 450.81]

       ], 
```

我希望使用我的数组中的数据，API 说要使用一个具有 x 和 y 两个值的数组，就像这样

`data: [[5, 2], [6, 3], [8, 2]]`

因此我可以组合我的两个数组以使它们适合这种格式吗？

我只能找到如何将我的数组组合成这样的键值对的示例`{'test1':'1', 'test2':'2'};`

此外，当我使用硬编码数据创建图表时，它按升序排列日期，但我希望它保持输入的顺序，例如 2 月 25 日之前 2 月 22 日，因为这是显示历史数据。

有没有办法纠正这个问题？

这是我当前代码的 jsFiddle：http: [//jsfiddle.net/mXnZy/](http://jsfiddle.net/mXnZy/)

**更新：**我试过了

```
var timeClose = new Array();
for(var i=0; i<data.query.results.quote.length; i++)
            {
                   timeClose.push( [timeStampArray[i], closePrices[i]] );
            } 
```

但是这个输出`[1361750400000, 442.80, 1361491200000, 450.81]`是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:30:11.477

如果您的意思是希望它们以相反的顺序排序，您可以使用 x 轴上的 'reversed' 属性：

[http://api.highcharts.com/highstock#xAxis.reversed](http://api.highcharts.com/highstock#xAxis.reversed)

如果您的意思是希望它们以输入的任何顺序列出，而不进行排序，那将更加复杂。

您可以提供序数 x 值，并将日期作为附加数据提供。然后，您可以使用轴标签格式化程序来显示您希望的日期。

# javascript - 数组数组或其他使用相同var返回不同值的解决方案？

> ID：15791058
> 
> 赞同：0
> 
> 时间：2013-04-03T15:04:56.087
> 
> 标签：javascript, jquery

我不想像我在代码中那样声明很多不同的数组来访问不同的值。

我应该在函数结构中进行什么更改以具有类似数组数组的内容，或者其他允许我访问它的内容`ipOpts[array]`，例如：`ipOpts[0]`，`ipOpts[1]`。

所以我只需要声明一次。

* * *

JS功能：

```
var ipOpts0 = new Array({"label" : "a", "value" : "a"});
var ipOpts1 = new Array({"label" : "a", "value" : "a"});
var ipOpts2 = new Array({"label" : "a", "value" : "a"});
var ipOpts3 = new Array({"label" : "a", "value" : "a"});
var ipOpts4 = new Array({"label" : "a", "value" : "a"});
var ipOpts5 = new Array({"label" : "a", "value" : "a"});
var ipOpts6 = new Array({"label" : "a", "value" : "a"});

function ipOpts(myField,myArray){
    myArray.splice(0,1);
    $.ajax({
      url: './php/selectBox.php?myField='+myField,
      async: false,
      dataType: 'json',
      success: function (json) {
          for(var a=0;a<json.length;a++){
            obj= { "label" : json[a][0], "value" : json[a][1]};
            myArray.push(obj);
          }
        }
    });
    return myArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:08:00.003

我不明白你为什么用 1 个对象创建数组

```
var ipOpts = [{"label" : "a", "value" : "a"}, 
              {"label" : "b", "value" : "b"}, 
              {"label" : "c", "value" : "c"}]

ipOpts[0]; // {"label" : "a", "value" : "a"} 
```

# r - R：微分方程模型中的时间相关参数

> ID：15791059
> 
> 赞同：2
> 
> 时间：2013-04-03T15:04:56.947
> 
> 标签：r, differential-equations

我有一个微分方程模型（见下文），我正在寻找某种方法来改变某个时间步长或某个状态变量的某个值的某些参数值（或另一种方法，如果它工作得更好）。例如，我想在时间步 5 将 GammaQR 和 GammaQD 从 0 更改为 .02（或者，如果效果更好，当 H > .04 时可能）。我不知道该怎么做，非常感谢任何建议！谢谢！

```
 VS  = 0.01    
VE  = 0.01  
VH  = 0.01  
BSE = 10 #
BSI = 10  #
THE = 1/10      
TEI =  1/3 
DeltaID = .5 
GammaIR = .5 
XIQ = 0.001  
XEQ = 0.01 
XHQ = 0.05 
GammaQR = .02  
GammaQD = .02 

library(deSolve)

pars <- c(VS, VE, VH, BSE, BSI, THE, TEI, DeltaID, GammaIR, XIQ, XEQ, XHQ, GammaQR)

init.values <- c(S = .99 , H = .01 , E = 0 , V = 0, I = 0 , Q = 0 , D = 0 , R = 0 )

times <- seq(0, 60, by = 1)

Smallpox <- function(time, y.values, parameters){
   with(as.list(c(y.values, parameters)), {

    dS.dt = -VS*S - BSI*S*I - BSE*E*S 
    dH.dt = BSI*S*I + BSE*E*S  - THE*H - XHQ*H - VH*H 
    dE.dt = THE*H - XEQ*E - VE*E - DeltaID*E - TEI*E
    dV.dt = VS*S + VE*E + VH*H
    dI.dt = TEI*E - XIQ*I - GammaIR*I - DeltaID*I
    dQ.dt = XHQ*H + XIQ*I + XEQ*E - GammaQR*Q - GammaQD*Q
    dD.dt = DeltaID*I + DeltaID*E + GammaQD*Q
    dR.dt = GammaQR*Q + DeltaID*I

    return(list(c(dS.dt, dH.dt, dE.dt, dV.dt, dI.dt, dQ.dt, dD.dt, dR.dt)))
  })
}

out <- as.data.frame(ode(func = Smallpox, y = init.values, parms = pars, times = times))
tail(out)

matplot(out$time, out[ ,2:9], type = "l", xlab = "time", ylab = "percent of       population", main = "Model Name", lwd = 2, col = c("black", "red", "green", "Blue", "cyan", "purple", "grey", "magenta"), lty = 1:8) 
```

# c# - 在网页中显示正在运行的服务

> ID：15791061
> 
> 赞同：0
> 
> 时间：2013-04-03T15:05:02.567
> 
> 标签：c#, command-line

我需要能够从服务器获取服务并将它们显示在网页中以供测试人员检查，而不是让他们登录远程服务器、打开服务并检查特定服务。

我已经研究了很多在命令行中使用 tasklist、sc 查询甚至是 powershell 中的 get-service 的方法。

我想做的是访问远程服务器并在网页中显示正在运行的服务。是否可以从 ac# 页面执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:08:42.037

我相信您正在寻找的是`ServiceController.GetServices()`：

[http://msdn.microsoft.com/en-us/library/hde9d63a.aspx](http://msdn.microsoft.com/en-us/library/hde9d63a.aspx)

这将允许您获取机器上所有服务的列表。还有一个需要机器名称的重载：http: [//msdn.microsoft.com/en-us/library/s21fd6th.aspx](http://msdn.microsoft.com/en-us/library/s21fd6th.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:13:22.553

[您可以在WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)的帮助下做到这一点，您可以使用命名空间并通过浏览[Win32_Service](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418%28v=vs.85%29.aspx)类`System.Management`尝试使用以下代码：

```
DataTable dt = new DataTable();
dt.Columns.Add("Name");
dt.Columns.Add("InstallDate");
dt.Columns.Add("State");
dt.Columns.Add("ServiceType");

try
{
    ManagementObjectSearcher searcher =
        new ManagementObjectSearcher("root\\CIMV2",
        "SELECT * FROM Win32_Service");

    foreach (ManagementObject queryObj in searcher.Get())
    {
        DataRow dr = dt.NewRow();               

        dr["Name"] = queryObj["Name"];
        dr["InstallDate"] = queryObj["InstallDate"];
        dr["ServiceType"] = queryObj["ServiceType"];
        dr["State"] = queryObj["State"];

        dt.Rows.Add(dr);

    }
    GridView1.DataSource = dt;
    GridView1.DataBind();
}
catch (ManagementException ex)
{
    //"An error occurred while querying for WMI data: " + e.Message;
} 
```

# jquery - jquery-mobile 单选按钮中的数据图标

> ID：15791062
> 
> 赞同：1
> 
> 时间：2013-04-03T15:05:04.353
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-fieldset, jquery-mobile-radio

我希望用[jquery mobile 中的 data-icons 中](http://jquerymobile.com/demos/1.3.0/docs/widgets/icons/)的一些图标替换我的单选按钮的文本。我的代码是这样的，[在 jsfiddle](http://jsfiddle.net/WrNYv/)

```
<div data-role="page">
    <div data-role="content">
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup"><legend>Choose a direction:</legend>
                <input type="radio" name="1" id="1" value="1" />
                <label for="1">Up</label>
                <input type="radio" name="1" id="2" value="2" />
                <label for="2">Down</label>
            </fieldset>
        </div>
    </div>
</div> 
```

我想用 data-icon="arrow-u" 替换“up”，用 data-icon="arrow-d" 替换“down”。 [这个答案](https://stackoverflow.com/a/6747739/678338)显示了如何用外部图像替换，但是数据图标呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:57:51.997

这是一个工作示例：http: [//jsfiddle.net/Gajotres/wL2gQ/](http://jsfiddle.net/Gajotres/wL2gQ/)

我希望这就是你想要的。

## HTML：

```
<div data-role="page" id="radio-icons"> 
    <div data-role="content"> 
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
                <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" />
                <label for="radio-choice-1" ><div id="custom-label"><span class="ui-icon ui-icon-bars ui-icon-shadow up">&nbsp;</span></div></label>

                <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2"  />
                <label for="radio-choice-2"><div id="custom-label"><span class="ui-icon ui-icon-bars ui-icon-shadow down">&nbsp;</span></div></label>
            </fieldset>
        </div>
    </div>
</div> 
```

## CSS：

```
#custom-label {
    width: 18px;    
    height: 18px;
    background-color: rgba(0, 0, 0, 0.4);
    background-image: url("images/icons-18-white.png");
    background-repeat: no-repeat;
    border-radius: 9px 9px 9px 9px;  
}

#custom-label span {
    left: 45px !important;
    margin-top: -7px;
}

#custom-label span.up {
    background-position: -180px -1px !important;    
}

#custom-label span.down {
    background-position: -216px -1px !important;    
} 
```

# onedrive - 使用 SkyDrive API 对文件设置权限

> ID：15791064
> 
> 赞同：2
> 
> 时间：2013-04-03T15:05:11.870
> 
> 标签：onedrive

我们希望将我们的云应用程序与用户 SkyDrive 上的存储接口。有没有人研究过如何使用 SkyDrive API 模拟共享。据我所知，公共 API apis.live.net/v5.0 不支持它，但 SkyDrive 站点本身当然是使用 API 调用来执行此操作的；

```
POST https://skydrive.live.com/API/2/SetPermissions
...
Content-Type:application/x-www-form-urlencoded
...
{"id":"F2720F142345635B!207","entities":[{"role":2,"type":0,"email":"someuser@somedomain.com"}],"requireSignIn":true,"userAction":0}: 
```

据我所知，当我们使用 JavaScript API 时不会发生这种情况。可以使用还是不受支持/非法的黑客攻击`wl.api()`？`skydrive.live.com/api`我非常希望 SkyDrive 团队的联系人对此做出正式回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T18:09:18.040

API 确实提供了一种获取文件的唯一链接以供阅读或编辑的方法

获取[https://apis.live.netv5.0/file.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!126](https://apis.live.netv5.0/file.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!126) /shared_read_link?access_token=ACCESS_TOKEN

或者

获取[https://apis.live.netv5.0/file.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!126/shared_edit_link?access_token=ACCESS_TOKEN](https://apis.live.netv5.0/file.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!126/shared_edit_link?access_token=ACCESS_TOKEN)

# android - Android：滚动 ViewPager 时隐藏视图

> ID：15791081
> 
> 赞同：0
> 
> 时间：2013-04-03T15:05:41.980
> 
> 标签：android, scroll, android-viewpager, swipe

我有一个带有 ViewPager 的布局以及 ViewPager 内的左右箭头，用于手动移动到下一个视图而无需滑动。当用户滑动时，我想隐藏那些箭头（或者当用户向右滑动时可能只显示正确的箭头......）

如何确定用户是否正在滚动 ViewPager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:54:53.157

Found the solution:

Method onPageScrollStateChanged from SimpleOnPageChangeListener

[http://developer.android.com/reference/android/support/v4/view/ViewPager.SimpleOnPageChangeListener.html#onPageScrollStateChanged(int)](http://developer.android.com/reference/android/support/v4/view/ViewPager.SimpleOnPageChangeListener.html#onPageScrollStateChanged(int))

the state argument of onPageScrollStateChanged is 1 when you start draggin, 2 when you let go and 0 when the ViewPager has stopped scrolling

# python - 从列表python中删除前几个元素

> ID：15791084
> 
> 赞同：0
> 
> 时间：2013-04-03T15:05:48.660
> 
> 标签：python, list

我有一个非常大的 1000+ 列表，我想从列表中删除前 319 个元素。我试过了

```
 for i in range(0,320):
     list1.pop(i) 
```

但这不起作用但是当我`list1.pop(0)`单独执行时它确实删除了一个元素我如何才能删除前 319 个元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:06:44.893

`del`在切片上使用：

```
del list1[:319] 
```

这将一次性删除元素 0 - 318（总共 319 个元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:06:47.247

使用切片语法：

```
del list1[0:319] 
```

顺便说一句，`list1.pop`重复调用不起作用，因为每次删除后都会重新索引项目。因此，当您删除第一项时，*下*一项（即第二项）将成为第一项。如果你真的想`pop`在循环中使用，你必须调用`list1.pop(0)`319 次——但这会非常低效。

# android - Rotating an image like a compass (not working)

> ID：15791085
> 
> 赞同：0
> 
> 时间：2013-04-03T15:05:49.020
> 
> 标签：android, gps, rotation, android-imageview, compass-geolocation

I want to rotate a specific image on an acitivity. I found everything where we set the contentview to an image, or drawing something, but again full screen.

sensorChanged method:

```
float[] mGravity2;
  float[] mGeomagnetic2;

  public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
      mGravity2 = event.values;
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
      mGeomagnetic2 = event.values;
    if (mGravity2 != null && mGeomagnetic2 != null) {
      float R[] = new float[9];
      float I[] = new float[9];
      boolean success = SensorManager.getRotationMatrix(R, I, mGravity2, mGeomagnetic2);
      if (success) {
        float orientation[] = new float[3];
        SensorManager.getOrientation(R, orientation);
        azimut = orientation[0]; 
      }
    }
    adjustArrow(azimut);
  } 
```

adjustArrow method:

```
private void adjustArrow(float azz) {
    // TODO Auto-generated method stub
    ImageView myIB = (ImageView) findViewById(R.id.imageView1);
    Matrix matrix=new Matrix();
    myIB.setScaleType(ScaleType.MATRIX); 
    matrix.postRotate((float) azz, 200,200);
    myIB.setImageMatrix(matrix);
} 
```

and in onCreate method i put the initial picture, with any beering or with 0 degrees set:

```
ImageView myIB = (ImageView) findViewById(R.id.imageView1);

    Matrix matrix=new Matrix();
    myIB.setScaleType(ScaleType.MATRIX); 
    matrix.postRotate((float) degree(), 200,200);
    myIB.setImageMatrix(matrix); 
```

but it is not working, and i don't know why. As from the sensorChanged method it have to take azimut and in "adjustArrow" method it have to rotate the picture. Thanks in advance

# ios - Core Data to-Many relationship NSPredicate to fetch

> ID：15791086
> 
> 赞同：1
> 
> 时间：2013-04-03T15:05:51.790
> 
> 标签：ios, objective-c, core-data, nspredicate

I have to fetch all books having tags that selected book has.

```
BOOK <<-->> TAGS 
```

A book can have multiple tags. If suppose i select a book and that has tags "database, algorithms". Then it should select all books that has tags "database", "algorithms", and both "database, algorithms".

My Predicate to fetch from core data is :

```
request.predicate = [NSPredicate predicateWithFormat:@"(ANY %K IN %@)",
                         REL_BOOK_TAG_LIST, tagList]; 
```

where tagList is of selected book's tagList (of type `NSSet`). I also tried using `NSArray` but didn't work. I am going in correct direction of should have to do something differnt? Please help me. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:12:56.637

尝试这个...

```
[request setPredicate:[NSPredicate predicateWithFormat:@"ANY tags IN %@", tagList]]; 
```

应该工作的是 tagList 是一个实际`Tag`对象的数组，并且`tags`是`relationship`从`Book`to的名称`Tag`。

# asp.net - 在提交到数据库之前验证 AWS 访问密钥

> ID：15791089
> 
> 赞同：0
> 
> 时间：2013-04-03T15:05:59.703
> 
> 标签：asp.net, amazon-web-services

我有一个表单，用户将在其中输入 AWS 帐户名称、AWS 访问密钥和 AWS 密钥，然后单击提交以将信息添加到数据库中的表中。在将密钥添加到数据库之前，我将如何验证它们？

![表格演示](https://i.stack.imgur.com/ap2CG.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:12:37.540

不仅确认格式而且确认密钥有效性的唯一可靠方法是使用它们执行操作。

使用 EC2 API 做一些简单的事情，在将它们存储到数据库之前需要所有三个因素。

附带说明，*请*确保您正确保护此数据库。如果它被泄露，那么与您将凭证存储到的 AWS 账户一样多。

# html - CSS Div Padding Issue Internet Explorer

> ID：15791091
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:00.697
> 
> 标签：html, css, internet-explorer

I am trying to use CSS to align numbers in a table when brackets are used to show the number as a negative value. Like you would use decimal tabs in MS Word.

The CSS works in IE6 and up but my problem is for IE6 - IE9 within print preview or when the page is printed the right bracket padding becomes greater than the specified value. Its fine printing within Chrome and Firefox.

Can anyone point me in the right direction to fix this?

The code:

```
<html>
<head>
<title>Example</title>
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.8.1/build/cssreset/cssreset-min.css" />
<style type="text/css">
/* Ignore stuff below */
html{
    font-family: arial, tahoma, sans-serif;
    font-size: 12px;
    line-height: 1.25em;
    color: #333;
    -webkit-font-smoothing: antialiased;
    text-align: center;
    background: #eee;
}
.wrapper{
    width: 780px;
    margin: 10px auto;
    padding: 10px;
    background: #fff;
}
table{
    width: 100%;
    font-size: 24px;
    line-height: 1.25em;
}
h1{
    font-size: 18px;
    line-height: 1.25em;
    text-align: left;
    background: #eee;
    padding: 5px 10px;
}
/* Ignore stuff above */

.pR{
    padding-right: 10px; /* Needs to match width of .bracket below */
}
.bracket{
    width: 10px; /* Needs to match padding-right of .pR above */
    text-align: center;
    display: inline-block;
    /* Fix for inline-block for IE 7 */
    zoom: 1; 
    *display: inline;
}
.right{
    text-align: right;
}
</style>
</head>
<body>

<div class="wrapper">
<h1>With padding</h1>
<table>
<tr>
<td class="right pR">1</td>
</tr>
<tr>
<td class="right"><div class="bracket">(</div>1<div class="bracket">)</div></td>
</tr>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:36:02.843

无需使用 div。使用 span 元素代替 div。

Div 是为什么要创建问题的块元素。

# django - insert json data into MySQL database

> ID：15791092
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:01.983
> 
> 标签：django, json, django-models, django-forms, django-views

1.I want to save data from database(mysql) to .json file format.

Models.py

```
class Author(models.Model):
    author_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    class Meta:
    db_table=u'Author'

    def __unicode__(self):
        return u"%d %s %s %s %d" % (self.pk, self.first_name, self.last_name, self.email,self.age)

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    class Meta:
        db_table = u'Book'

    def __unicode__(self):
        return u'%d %s %s' % (self.pk, self.book_name, self.publisher_name) 
```

views.py is

```
def addbook(request):

    log.debug("test....")
    if request.POST:

        first_name = request.POST.get('first_name')
        last_name = request.POST.get('last_name')
        email = request.POST.get('email')
        age = request.POST.get('age')

    author = Author(first_name = first_name,last_name = last_name,email=email,age=age)
        author.save()

        book_name = request.POST.get('book_name')
        publisher_name = request.POST.get('publisher_name')
        author_info = Author.objects.latest('author_id')

        log.debug("test:%s",author_info.author_id)

    book=Book(book_name=book_name,publisher_name=publisher_name,author_id=author_info.author_id)
    book.save()
    return redirect('/index/')
    else:
        return render_to_response('addbook.html',context_instance=RequestContext(request)) 
```

1) In views.py an addbook function is used to add the related data to database.

2) I have to store the database content to a json file after each entry.

3) Can i get help to code the same.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:31:28.030

[这个链接](https://docs.djangoproject.com/en/dev/topics/serialization/)解释了如何序列化 Django 模型。您必须在模型代码中添加类似这样的内容：

```
from django.core import serializers

class Book(models.Model):
    ...
    def serialize(self): 
        JSONSerializer = serializers.get_serializer("json")
        json_serializer = JSONSerializer()  
        with open("/path/to/file/file.json", "w") as out:
            json_serializer.serialize([self], stream=out) 
```

如果要序列化模型的特定实例，则 [self] 周围的方括号很重要。如果您正在序列化一个查询集，那么您可以将其传入。

# c# - Why do I see this error printing from a .NET app on Citrix?

> ID：15791093
> 
> 赞同：2
> 
> 时间：2013-04-03T15:06:03.450
> 
> 标签：c#, .net, wpf, crystal-reports-2010

We have a .NET application (in-house built) that prints using Crystal Reports for Visual Studio 2010\. It runs in a Citrix XenApp context. If we run an on-screen report, using the Crystal Reports WPF viewer control, we see the report as expected. However, if we then click the Printer icon within the CR WPF viewer, we get the following error:

```
An exception occurred while getting the default printer.
Win32 error: The system cannot find the file specified.
System.Printing
at System.Printing.LocalPrintServer.GetDataFromServer(String property, Boolean forceRefresh)
at System.Printing.LocalPrintServer.get_DefaultPrintQueue()
at SAPBusinessObjects.WPF.Viewer.PrintControl.ShowPrintDialog()
at SAPBusinessObjects.WPF.Viewer.ReportAlbum.PrintReport() 
```

# bash - Bash 删除尾随字符，直到破折号字母数字

> ID：15791098
> 
> 赞同：1
> 
> 时间：2013-04-03T15:06:16.350
> 
> 标签：bash, awk

我的输出如下所示：

```
foo-1_2_3_4_5_bar
foo-6_7_8_9_0_1_2_bar 
```

如何删除尾随字符以便获得以下输出：

```
foo-1
foo-6 
```

我试过：

```
awk 'sub("..........$", "") 
```

但这非常不方便，因为字符串可以有不同的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:08:45.757

如果您的字符串在`variable`然后：

```
echo ${variable%%_*} 
```

有关`bash`内置[字符串操作的附加信息](http://tldp.org/LDP/abs/html/string-manipulation.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:11:50.567

```
sed 's/_.*//' 
```

测试：

```
kent$  echo "foo-1_2_3_4_5_bar
foo-6_7_8_9_0_1_2_bar"|sed 's/_.*//'
foo-1
foo-6 
```

添加一个 awk 单行：

```
awk -F_ '$0=$1' 
```

相同的输入，相同的输出：

```
kent$  echo "foo-1_2_3_4_5_bar
foo-6_7_8_9_0_1_2_bar"|awk -F_ '$0=$1'
foo-1
foo-6 
```

# mysql - multiple rails engines talking to one mySQL server for horizontally scaling application servers

> ID：15791099
> 
> 赞同：2
> 
> 时间：2013-04-03T15:06:16.730
> 
> 标签：mysql, ruby-on-rails, amazon-ec2, horizontal-scaling

I've seen pictures like [this](http://discovr.info/2011/07/scaling-a-rails-webservice-on-awsec2-for-a-1-iphone-and-ipad-app/) where multiple rails engines write to a single mySQL server.

1) Is this possible? Or does Rails want each application server to write to one database server?

2) If this is possible, how is it accomplished? Are there queues and a scheduler between the application servers and the write database server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T02:24:27.317

扩展 mysql 数据库是一件相当困难的事情，但它肯定已经完成了很多次，并且有很多最佳实践可供您利用。您应该知道的第一件事是，在您暂时担心扩展写入之前，您可能需要先扩展读取。

[使用复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)可以很容易地完成扩展读取。有几种工具可以让管理复制变得更加容易，例如[Amazon RDS](http://aws.amazon.com/rds/)。一般来说，许多 Web 服务器可以连接到许多数据库（如其他人所建议的那样），但是一旦您有大量流量、连接或您正在执行的任何其他操作会在服务器上产生负载，您很快就会遇到规模问题。

由于复制的服务器是只读的，您需要根据您正在执行的操作来管理您连接到的服务器。即，如果您有一个用户表，则在创建、更新或删除用户时，您需要使用“写入”数据库（主要的“源”服务器），但在读取用户表时，您可以使用其中一个只读副本。这减少了主写入服务器上的负载（允许它处理更多写入），并且由于您可以在负载均衡器后面拥有多个读取数据库，您可以在很长一段时间内摆脱这种结构并在数十个范围内扩展读取在您遇到任何重大问题之前数据库服务器（但是大多数应用程序都逃脱了 1-3）。

在某些情况下，您需要将写入数据库用于读取操作（尽管您应该尽可能避免使用它），因为由于复制写入数据库查询的延迟，读取副本可能会稍微落后于写入数据库，但是大多数您应该能够编写代码的时间知道读取数据库可能会延迟（即在合理的时间段内排队操作，以便更新将在所有读取服务器上传播）并且只需使用您的读取数据库之一而不是比写数据库。

除此之外，要处理的关键项目是确保您拥有有效的索引并应用其他最佳实践来维护合理的数据结构。您可能还想考虑拥有 3 个不同的数据库服务器“组”。我通常喜欢有写、读和“统计”数据库组。用于创建、更新和删除操作（以及用于更新的选择）的写入组，必须快速返回结果的一般读取项的读取，以及任何将处于高负载且您不依赖的东西的统计信息on 以获得快速响应（这会使对时间不敏感的繁重查询远离您的读取数据库，您需要快速响应以进行一般读取）

一旦遇到无法再购买更大硬件并且接近最大化写入容量的情况，您将需要考虑分片，但这会占用大量流量/数据（所以不要担心）除非您已经完成了上述所有操作）。

# sql-server - How to select the first row of a set of select statements fast

> ID：15791100
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:18.833
> 
> 标签：sql-server, union

I have got a bunch of SQL Statements. They are in a special order so if the first statement returns a row I am done, if not go to the next Statement and return the result. What would be a fast way to do this? I tried to realize it in T-SQL because I am on a MSSQL Server but it's really slow.

It's really important to make this thing as fast as possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:07:59.693

如果您只需要第一行使用[`TOP 1`](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

```
SELECT TOP 1 * FROM ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:13:27.640

尝试这样的事情

```
Select column1 from myTable
if @@ROWCOUNT <> 0 return

Select column1 from myOtherTable
if @@ROWCOUNT <> 0 return

... and so on 
```

# html - xpath - 如何选择 html 元素然后选择另一个（相对）嵌套元素？

> ID：15791101
> 
> 赞同：1
> 
> 时间：2013-04-03T15:06:22.107
> 
> 标签：html, selenium, xpath, css-selectors, parent-child

如何选择 div 元素`"fc-event-time`，然后，相对于它，嵌套相同数量的“下一个”div 元素？

因此，根据`1p - 2p`识别出的 HTML 的这一区域的文本，然后我想获取用户名。

给定以下html：

```
<div class="fc-event-inner fc-event-skin">
  <div class="fc-event-head fc-event-skin">
    <div class="fc-event-time" style="background-color: rgb(120, 182, 229);">
      1p - 2p
    </div>
  </div>
  <div class="">
    <div class="fc-event-title">
      Juan A.*, Zach A.*
    </div>
  </div>
  <div class="fc-event-bg">
  </div>
</div> 
```

我正在尝试以下选择器：

```
//div[@class='fc-event-time'][contains(text(),'1p - 2p')]../../div[2]/div 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:14:04.487

您缺少正斜杠：

```
//div[@class='fc-event-time'][contains(text(),'1p - 2p')]../../div[2]/div
# should be
//div[@class='fc-event-time'][contains(text(),'1p - 2p')]/../../div[2]/div
#                                                        ^ here 
```

您可能会发现这里的工具 (XPathBuilder) 很有帮助： [http ://www.bubasoft.net/product/xpath-builder](http://www.bubasoft.net/product/xpath-builder)

# testing - CircleCi *configure the build* couldn't find commit

> ID：15791105
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:37.173
> 
> 标签：testing, continuous-integration, circleci

If somebody uses CircleCi for test integration ([https://circleci.com/](https://circleci.com/)), today we found next problem (after some months of using):

```
$ configure the build (0s)
 Could not find commit our_last_commit_number in the repo

```

All settings for the git presented in the Circle. Anyone saw this problem? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:00:58.173

这是 CircleCI 的一个临时问题，应该很快就会解决！见[https://twitter.com/circleci/status/319473067481001985](https://twitter.com/circleci/status/319473067481001985)

# javascript - Webpage Section Visible Only For Mobiles

> ID：15791109
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:45.547
> 
> 标签：javascript, css, html

I've built a webpage for a certain web application I've made. I'd like to add a specific option only for smartphone users , and don't want it to be visible for non-smartphone users. Is there any method to define a section ( div ) to be visible only for smartphone users?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:18:32.977

您可以使用响应式设计方法并使用媒体查询仅使用 css 实现您想要的：

```
//THIS CSS CLASS IS APPLIED ALWAYS
div.my-option {
    display: none;
}

//THIS MEDIA QUERY APPLIES ITS STYLES ONLY WHEN THE SCREEN WIDTH IS <= 767, SO IT'S A SMARTPHONE DISPLAY.
//IT OVERRIDES THE ONE ABOVE
@media only screen and ( max-width: 767px ) {
    div.my-option {
        display: inline;
    }
} 
```

如果您对响应式设计感兴趣，两个最扩展的选项是[Bootstrap](http://twitter.github.com/bootstrap/)和[Zurb Foundation](http://foundation.zurb.com/)

# customization - 覆盖 UIAlertView（查看背景）

> ID：15791111
> 
> 赞同：0
> 
> 时间：2013-04-03T15:06:47.293
> 
> 标签：customization, subclass, uialertview, overriding

[我正在用本教程http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uialertview-custom-graphics/)中看到的类似内容覆盖 UIAlertView 类 所以我覆盖了 drawRect ...

我的问题实际上不是自定义警报本身，而是 UIAlertView 本身背后的视图背景颜色现在它是所有 UIAlertViews 都有的标准黑色渐变......关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:34:08.073

我采用了这种方法，似乎可行...在 layoutSubview 中，我正在遍历 superviews 子视图

```
 for (UIView*superSub in self.superview.subviews) {
    if ([superSub isMemberOfClass:[UIImageView class]]) {
        superSub.backgroundColor = [UIColor colorWithRed:30/255\. green:21/255\. blue:4/255\. alpha:1];
        superSub.alpha = 0.77;
    }
} 
```

# c++ - ITK 安装和示例程序

> ID：15791122
> 
> 赞同：3
> 
> 时间：2013-04-03T15:07:34.123
> 
> 标签：c++, visual-c++, image-processing, cmake, itk

我是 ITK 新手，我做了以下步骤来安装 ITK 并使用它在 VS2010 中编程

1.  下载 ITK 4.3.1 并使用 CMAKE 构建它
2.  构建成功，我有一个包含库的 lib->Debug 文件夹。
3.  将 bin 文件夹路径添加到环境变量路径。

以下是我的简单代码...

```
#include <iostream>
#include <Core/Common/include/itkImage.h>

using namespace itk;
using namespace std;

int main()
{
    return 0;
} 
```

上面的代码返回

```
Cannot open include file: 'itkConfigure.h' 
```

我尝试搜索该标题但没有运气。但是在`C:\InsightToolkit-4.3.1\Modules\Core\Common\src`我找到**了 itkConfigure.h.in**文件。我真的对如何处理这个 .in 文件一无所知。任何帮助都是最受欢迎的..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:04:00.283

设置项目的最简单方法是再次使用 CMake。尝试仅使用 CMakeLists.txt 和 main.cpp 创建一个项目。CMakeLists.txt 应具有以下内容：

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(ItkTest)

find_package(ITK REQUIRED)
include(${ITK_USE_FILE})

add_executable(MyTest main.cpp)
target_link_libraries(MyTest ITKCommon) 
```

因此，假设您在名为 ItkProject 的目录中创建这两个文件，然后从*Visual Studio 命令提示符*执行以下操作：

```
cd <path to ItkProject>
mkdir build
cd build
cmake .. -DITK_DIR="<path to build dir of ITK>" 
```

这`<path to build dir of ITK>`是您运行 CMake 以配置 ITK 项目的地方。它将包含 ITK.sln 文件，但重要的是它还应该包含一个名为 ITKConfig.cmake 的文件。在 cmake 命令中搜索的是这个文件`find_package(ITK REQUIRED)`- 如果 CMake 找不到它，配置将失败。

一旦找到，它会设置一堆 CMake 变量，然后您可以在自己的 CMakeLists.txt 中使用这些变量，包括`ITK_USE_FILE`.

然后，当您调用`include(${ITK_USE_FILE})`时，它会继续设置诸如包含路径、库搜索路径和编译器标志之类的内容。该路径`<path to ItkProject>/Core/Common/include`将被添加到包含目录中，因此在您的 main.cpp 中，您只需要执行以下操作：

```
~~#include <Core/Common/include/itkImage.h>~~
#include "itkImage.h"
```

无论如何，运行 CMake 后的最终结果应该`<path to ItkProject>\build\ItkTest.sln`是设置好可以使用 ITK 的解决方案文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T08:26:08.567

我检查了 \ItkConfig.cmake 并且在那里定义的路径应该与物理路径匹配，如果 ITK 构建未被触及（目录未重命名），就是这种情况。

```
# The ITK source tree.
# For backward compatibility issues we still need to define this variable, although
# it is highly probable that it will cause more harm than being useful. 
# Use ITK_INCLUDE_DIRS instead, since ITK_SOURCE_DIR may point to non-existent directory
IF(NOT ITK_LEGACY_REMOVE)
  SET(ITK_SOURCE_DIR "C:/ITK320")
ENDIF(NOT ITK_LEGACY_REMOVE)

# The ITK include file directories.
SET(ITK_INCLUDE_DIRS "C:/ITK320-build;C:/ITK320/Code/Algorithms;C:/ITK320/Code/BasicFilters;C:/ITK320/Code/Common;C:/ITK320/Code/Numerics;C:/ITK320/Code/IO;C:/ITK320/Code/Numerics/FEM;C:/ITK320/Code/Numerics/NeuralNetworks;C:/ITK320/Code/SpatialObject;C:/ITK320/Utilities/MetaIO;C:/ITK320/Utilities/NrrdIO;C:/ITK320-build/Utilities/NrrdIO;C:/ITK320/Utilities/DICOMParser;C:/ITK320-build/Utilities/DICOMParser;C:/ITK320-build/Utilities/expat;C:/ITK320/Utilities/expat;C:/ITK320/Utilities/nifti/niftilib;C:/ITK320/Utilities/nifti/znzlib;C:/ITK320/Utilities/itkExtHdrs;C:/ITK320-build/Utilities;C:/ITK320/Utilities;C:/ITK320/Code/Numerics/Statistics;C:/ITK320/Utilities/vxl/v3p/netlib;C:/ITK320/Utilities/vxl/vcl;C:/ITK320/Utilities/vxl/core;C:/ITK320-build/Utilities/vxl/v3p/netlib;C:/ITK320-build/Utilities/vxl/vcl;C:/ITK320-build/Utilities/vxl/core;C:/ITK320-build/Utilities/gdcm;C:/ITK320/Utilities/gdcm/src")

# The ITK library directories.
SET(ITK_LIBRARY_DIRS "C:/ITK320-build/bin") 
```

# objective-c - 分发时可可保存文本文件

> ID：15791135
> 
> 赞同：0
> 
> 时间：2013-04-03T15:08:13.600
> 
> 标签：objective-c, macos, cocoa

在我正在设计的应用程序中，我有几个文本字段，当应用程序关闭时，每个文本字段都保存到 .txt 文件中，然后在应用程序打开时重新读取；但是，当我尝试分发应用程序（只是将其导出为应用程序并将其拖放给一些朋友）时，我将其发送给的人在他们的计算机上没有我保存到的文件位置，所以文本字段不保存。下载应用程序时，有没有办法可以在他们的计算机上创建 .txt 文件？或者在分发时有比做 .txt 文件更好的保存方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:37:51.453

我只是将初始 .txt 文件打包到您的应用程序包中。检查该文件是否存在于用户的本地文件系统中。如果没有，请将您的捆绑包的 .txt 文件读入一个字符串，然后将该字符串保存到用户文件系统的正确位置。

```
NSError *fileError = nil;
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
    //Read the file
    NSString *fileContents = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&fileError];
    if (fileError) {
        //Handle the error
    }
} else {
    NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"initialFile" ofType:@"txt"];
    NSString *initialFileContents = [[NSString alloc] initWithContentsOfFile:bundlePath encoding:NSUTF8StringEncoding error:&fileError];
    if (!fileError) {
        [initialFileContents writeToFile:filePath atomically:YES encoding:NSUTF8StringEncoding error:&fileError];
        if (fileError) {
            //Handle the error
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:23:30.197

为什么不直接使用 NSUserDefaults 并将（希望相当小的）文本存储在应用程序的首选项数据库中？它保证存在并且可以访问，而不会违反沙盒限制或非标准存储位置。

除此之外，如果您想直接回答您的问题，则需要提供更多信息。具体来说，您使用的确切路径是什么，您收到的确切错误是什么？当您只需要在运行时创建文件时，为什么您觉得需要捆绑空文本文件？

# excel - 将范围内的每个单元格与另一个单元格进行比较

> ID：15791138
> 
> 赞同：1
> 
> 时间：2013-04-03T15:08:22.897
> 
> 标签：excel, foreach, range, vba

我正在尝试编写一个宏来查看一系列时间，将每个时间与基准时间进行比较，然后在每个比较时间旁边生成一个注释。当我运行宏时，它将对范围内的第一个单元格执行此操作，但不会对其余单元格执行此操作。

“ActivityData”工作表中的单元格 C8 是基准时间。要比较的时间从“SIS”工作表的单元格 F12 开始，数量不同。

这是完整的代码：

```
Sub TimeCalc()

Dim wb As Workbook
Dim SIS As Worksheet
Dim Act As Worksheet

Set wb = ActiveWorkbook
Set SIS = wb.Worksheets("SIS")
Set Act = wb.Worksheets("ActivityData")

'Navigate to start times
wb.Worksheets("SIS").Select
Range("f12").Select
SIS.Range(Selection, Selection.End(xlDown)).Select

'Compare start times
For Each rng In Selection
If Act.Range("C8").Value < rng.Value Then
    ActiveCell.Offset(0, -1).Range("A1").Value = "Missed " & Format(Act.Range("c8").Value, "Medium time") & " - " & Format((rng.Value - 0.000694444), "Medium Time")
    Else
    End If
    On Error Resume Next
    Next rng

End Sub 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:34:36.303

假设您要将结果放在正在检查的数据左侧的列中：

```
Option Explicit

Sub TimeCalc()

    Dim wb As Workbook
    Dim SIS As Worksheet
    Dim Act As Worksheet
    Dim myBaseLineRng As Range
    Dim compareRng As Range
    Dim Rng As Range

    On Error GoTo 0

    Set wb = ActiveWorkbook
    Set SIS = wb.Worksheets("SIS")
    Set Act = wb.Worksheets("ActivityData")
    Set myBaseLineRng = Act.Range("C8")
    Set compareRng = SIS.Range(SIS.Range("F12"), SIS.Range("F12").End(xlDown))

    'Compare start times
    For Each Rng In compareRng.Cells
        If myBaseLineRng.Value < Rng.Value Then
            Rng.Offset(0, -1).Value = "Missed " & Format(myBaseLineRng.Value, "Medium time") & " - " & Format((Rng.Value - 0.000694444), "Medium Time")
        End If
    Next Rng

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:29:43.527

您只是将基准列表中的值与活动列表中的第一个值进行比较，如 If 语句中所示。如果我正确理解您的问题，您将需要遍历您的活动列表以检查每一行

即循环遍历活动列表对于活动列表中的每个值循环遍历您的基准时间以检查活动列表中的下一个值。

除非我误解了你的问题。

# java - 参数值 [1] 与预期类型不匹配 [java.lang.Boolean]

> ID：15791139
> 
> 赞同：9
> 
> 时间：2013-04-03T15:08:23.100
> 
> 标签：java, spring, hql

我得到了错误`Exception in thread "main" org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [1] did not match expected type [java.lang.Boolean]; nested exception is java.lang.IllegalArgumentException: Parameter value [1] did not match expected type [java.lang.Boolean]`。

我对此感到困惑，因为它来自下面显示的被注释掉的服务方法。当我将其注释掉时，可以避免错误。该`active`列是`TINYINT(1)`要么`1`要么`0`。

实体：

```
@Entity
@NamedQueries({
        @NamedQuery(name="Workflow.findByUUID", query="SELECT w FROM Workflow w WHERE w.uuid = :uuid"),
        @NamedQuery(name="Workflow.findByActive", query="SELECT w FROM Workflow w WHERE w.active = :active ORDER BY id ASC")
}) 
```

我的仓库：

```
@Repository
public interface WorkflowRepository extends JpaRepository<Workflow, Integer> {
    List<Workflow> findByActive(@Param("active") Integer active);
} 
```

我的服务：

```
@Service
public class WorkflowService {

    @Autowired
    WorkflowRepository workflowRepository;

    /**
     * Get active workflows
     */
    @Transactional(readOnly = true)
    public List<Workflow> findActive() {
        //return workflowRepository.findByActive(1);
        return null;
    } 
```

当我取消注释时

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T15:20:43.067

您似乎已将`Workflow.active`属性映射为`Boolean`. 所以你的存储库应该是这样的：

```
@Repository
public interface WorkflowRepository extends JpaRepository<Workflow, Boolean> {
    List<Workflow> findByActive(@Param("active") Boolean active);
} 
```

呼叫`workflowRepository.findByActive(true)`应该按照您的意愿行事。

事实上，HQL 有时会在数据库和 Java 映射之间产生类型差异，因为在这些环境中类型不同。所以检查你`Entity`的`active`类型以做出适当的`Repository`。

# c# - 为什么在这个 try-catch 块中出现“错误：当前上下文中不存在数据表”？

> ID：15791140
> 
> 赞同：2
> 
> 时间：2013-04-03T15:08:25.057
> 
> 标签：c#, asp.net, try-catch

这是我的有效代码：

```
DataTable myDataTable = new DataTable();
try
{
    // Code Logic
}
catch (Exception exp)
{
    //Handle Exception
}
finally
{
    myDataTable.Dispose();
} 
```

它看起来很好并且没有显示编译错误

但是当我在 try 药水中声明数据表时，它会显示一个错误：

> 当前上下文中不存在名称“myDataTable”

这是尝试这样做的代码：

```
try
{
    DataTable myDataTable = new DataTable();
}
catch (Exception exp)
{
    //Handle Exception
}
finally
{
    myDataTable.Dispose();
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:14:30.573

在块中声明 DataTable 时，它​​是该块的本地对象。您需要在块外声明它才能在块外访问它。

或者，您可以使用`using`which 将在该块执行后处理 DataTable：

```
using(DataTable myDataTable = new DataTable())
{
   try
   { ... }
   catch (Exception exp)
   {
       //Handle Exception
   } 
} 
//data table is disposed after this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:10:09.853

在`try`块内时，它将在“内部”范围内声明。如果你想操纵它，或者用它做任何事情，它必须在`try`.

如果您在`if`子句中声明变量，则以类似的方式。它在该块的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:10:23.930

这是因为您在不同的范围内使用它。您*在*`DataTable`块内，因此*在块内*无法访问。 *`try` *`finally`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:10:24.517

在第二种情况下，您使用 just块部分限制`myDataTable`变量的范围。`try`

你可以像这样修复它：

```
 DataTable myDataTable;
    try
    {
        myDataTable = new DataTable();
    }
    catch (Exception exp)
    {
        //Handle Exception
    }
    finally
    {
        myDataTable.Dispose();
    } 
```**

# couchbase - Couchbase 如何实现强一致性

> ID：15791142
> 
> 赞同：3
> 
> 时间：2013-04-03T15:08:40.167
> 
> 标签：couchbase, membase

我搜索了关于 Couchbase 如何在集群内实现强一致性的解释。所有这些都是使用 membase 的结果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:09:27.047

Couchbase 是 membase 顺便说一句。Couchbase 是一个产品和一个公司，该公司是 NorthScale (Membase) 和 CouchDB 创始人的合并，因此公司和产品的名称都是 Couchbase。

更新操作（replace 和 [forced] set）首先更新 RAM 缓存，随后的读取是新值，这就是一致性模型。

Couchbase 是一种“最终持久化”（EP）架构，其中 CRUD 操作首先更新 RAM 缓存，然后插入 EP 队列以进行磁盘 i/o。同时，当配置副本时，它们会进入副本队列并转移到其他节点。EP 架构允许即时一致性和超高吞吐量，因为磁盘 i/o 是所有系统中最慢的组件。

正如 WiredPrairie 所提到的，单个节点负责/激活给定密钥。密钥被散列，散列的结果是它应该存在的特定分区。sdk 维护的 partition->couchbase-node 映射允许它们直接转到每个分区的活动节点。同样，这减少了延迟，因为它不必通过负载平衡器（它由架构本身进行负载平衡），也不会通过“主”节点，每个节点都是主节点，也不会通过一个“分片主”，其工作是将客户端重定向到特定分片。通过绕过所有这些，延迟减少到最低限度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T18:05:49.627

Couchbase 通过强制对特定数据的所有读取都转到集群中的单个节点来保证强一致性。您无法从副本中读取。如果可以，您最终可能会得到不一致的数据。

使用 2.0 XDCR 时，Couchbase 仅提供最终一致性。

除了他们对软件的特定设计要求之外，我不会说这是任何“结果”。

[这篇博](http://blog.couchbase.com/couchbase-server-20-most-common-questions-and-answers)文中有一些额外的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T11:14:35.520

我不认为它是强一致性，因为如果一个节点主动vbucket重启，数据还没有被复制或者还没有持久化，它会丢失数据；强一致性需要W+R>N，这里R=1，所以我们需要W=N，也就是说所有的replica都应该是ACID；我们可以称之为假强一致性

# c# - 是否有以编程方式远程创建 Exchange 邮箱的权威指南？

> ID：15791143
> 
> 赞同：5
> 
> 时间：2013-04-03T15:08:41.147
> 
> 标签：c#, asp.net, vb.net, exchange-server

我找到了解释如何在 Exchange Server 上运行 PowerShell 脚本的指南，但所有指南都要求计算机已加入域，并且大多数指南似乎使用变通方法，而不是最佳实践。

有没有办法使用 C#.NET 或 VB.NET 远程连接到 Exchange Server？

本质上，我想使用管理员凭据连接到我的 Exchange Server（我将在程序中提供加密的凭据），并使用 PowerShell scriptlet 创建一个邮箱。就这些。

我想将应用程序作为控制台应用程序启动，一旦确认功能，我就可以将其实现到 Web 表单应用程序或 MVC 中。

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:22:13.577

我最近不得不处理一个类似的问题，下面的代码帮助我通过与远程 Exchange 服务器的安全连接来执行该功能。

```
Runspace remoteRunspace = null;
PSCredential psc = null;
// If user name is not passed used the credentials of the current farm account
if (!string.IsNullOrWhiteSpace(username))
{
    if (!string.IsNullOrWhiteSpace(domain))
        username = domain + "\\" + username;
    SecureString secpassword = new SecureString();
    if (!string.IsNullOrEmpty(password))
    {
        foreach (char c in password)
        {
            secpassword.AppendChar(c);
        }
    }
    psc = new PSCredential(username, secpassword);
}

WSManConnectionInfo rri = new WSManConnectionInfo(new Uri(RemotePowerShellUrl), PowerShellSchema, psc);
if (psc != null)
    rri.AuthenticationMechanism = AuthenticationMechanism.Credssp;
remoteRunspace = RunspaceFactory.CreateRunspace(rri);
remoteRunspace.Open();

Pipeline pipeline = remoteRunspace.CreatePipeline();
Command cmdSharePointPowershell = new Command(Commands.AddPSSnapin.CommandName);
cmdSharePointPowershell.Parameters.Add(Commands.AddPSSnapin.Name, MicrosoftSharePointPowerShellSnapIn);
pipeline.Commands.Add(cmdSharePointPowershell);
pipeline.Invoke(); 
```

当然，您将进行一些常用的用户组成员配置、远程安全/不安全远程连接的服务器允许等等。[这篇](http://blog.pedroliska.com/2011/07/28/creating-an-exchange-2010-mailbox-from-a-remote-c-program/)文章可能会有所帮助。

# css - 使用粘性页脚，无法将主要内容的背景拉伸到页脚

> ID：15791145
> 
> 赞同：0
> 
> 时间：2013-04-03T15:08:42.093
> 
> 标签：css, footer, sticky

我读过一篇非常相似的帖子并尝试了所有解决方案，但没有任何乐趣。这就是我所拥有的。我的网站具有全宽（100%）页眉和页脚空间以及一个较小宽度的容器。我使用了 Ryan Fait 粘性页脚，但容器（具有白色背景）不会到达页脚，除非我只是放入一堆换行符，这违背了粘性页脚的目的。

款式：

```
html, body {
height: 100%;}

body    {
margin:0;
padding:0;
}

html {
overflow: -moz-scrollbars-vertical; 
overflow-y: scroll;}

.wrapper {
min-height: 100%;
height: auto !important;
height: 100%;
margin: 0 auto -30px;}

.container {
width:1050px;
margin: 0 auto 0 auto;
min-height: 100%;
height: auto !important;
height: 100%;
padding:0 25px 0 25px;
background-color:#FFF;
    }

 .footer, .push {
height: 30px;}

 .footer {
background-color:#000;
width:100%;
height: 30px;} 
```

和html：

```
<div class="wrapper">
<div class="container">
/* content */
</div>
<!--end container-->
<div class="push"></div>
</div>
<!--end wrapper-->
<div class="footer">
/* footer */
</div>
<!--end footer--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:49:26.087

你可以摆脱`.wrapper`并搬进`.push`你的`.container`

见小提琴：http: [//jsfiddle.net/32WxJ/3/](http://jsfiddle.net/32WxJ/3/)

# javascript - 使用 Firefox“后退”按钮时不执行启动 JavaScript 代码

> ID：15791148
> 
> 赞同：4
> 
> 时间：2013-04-03T15:08:42.780
> 
> 标签：javascript, firefox, back

[这个网站](http://www.vanschneider.com/)有一个奇特的效果：当点击导航链接时，内容淡出，当新页面（在不同的 URL 上）加载时，其内容淡入。

有趣的是，用户点击浏览器的“返回”按钮后，返回到上一页，**内容仍然淡入**。换句话说，前一页不会停留在淡出状态，这是最后一次看到的。根据[这个评论](http://www.dynamicdrive.com/forums/showthread.php?64497-Page-fade-in-code&s=e5a2ccbfcccc37aa40eaa6e301738118&p=260573#post260573)，页面应该保持在最后一次看到的状态。

我尝试了很多方法来重现这种效果，但是在我的测试中，单击“返回”按钮后，上一页仍然没有显示任何内容（内容保持在淡出状态）。有时它适用于某些浏览器，但不适用于其他浏览器。有时它可以工作，但在重新打开浏览器后就不行了。

网站如何实现这种效果，甚至在用户使用“返回”按钮转到上一页后仍然有效？

=== 编辑 1 ===

[这是我的测试页](https://googledrive.com/host/0BwkLXIVz0y59MWEtc04zTHo5bW8/page-1.html)。

=== 编辑 2 ===

上述测试页面已经在三台不同的 PC 上使用 Firefox 进行了测试，并且通过在线跨浏览器测试服务从 Firefox 版本 4 一直到版本 20。结果是一样的：不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T11:49:31.683

**您需要一个非常简单的解决方法：**挂钩`window.unload`事件，以及重新加载页面的特定条件`window.onpageshow`！

* * *

# **火狐修复**

jQuery：

```
$(window).unload(function () { $(window).unbind('unload'); }); 
```

JavaScript：

```
function UnloadHandler() { window.removeEventListener('unload', UnloadHandler, false); }
window.addEventListener('unload', UnloadHandler, false); 
```

# **iOS Safari 修复**

jQuery：

```
$(window).bind('pageshow', function(event) {
    if (event.originalEvent.persisted) {
        window.location.reload() 
    }
}); 
```

JavaScript：

```
window.addEventListener('pageshow', function (event) {
    if (event.persisted) {
        window.location.reload() 
    }
}, false); 
```

# **工作样本**

由于我无权更新您的页面，因此我在[此处上传了一个](http://misc.orangecoding.com/fadingpage.html)。

* * *

**为什么 Firefox 需要`window.onunload`？** [MDN window.unload](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)说：

> 在页面中使用此事件处理程序可防止 Firefox 1.5 将页面缓存在内存 bfcache 中。有关详细信息，请参阅[使用 Firefox 1.5 缓存](https://developer.mozilla.org/En/Using_Firefox_1.5_caching)。

一些用户*可能*不想禁用 Firefox 的 bfcache [请参阅*[页面缓存尽管有卸载和 beforeunload 处理程序](https://developer.mozilla.org/En/Using_Firefox_1.5_caching)*部分），这就是为什么上面的 Firefox 修复程序*取消绑定`onunload`事件**内部**的`onunload`事件*。

**为什么 Safari 需要`window.onpageshow`？**显然没有办法禁用 Safari 的“ *bfcache* ”，我们**必须**在页面显示时刷新页面。

**PS。*bfcache*表示*后向/前向缓存*。**

* * *

完整的 HTML/JavaScript 供参考：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Page</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>

    <div>
        <a href="fadingpage.html?p=1">Page 1</a>
        <a href="fadingpage.html?p=2">Page 2</a>
    </div>

    <div id="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas laoreet imperdiet diam, in sodales velit porta eget. Ut tellus urna, vestibulum vel facilisis eu, blandit sed est. Sed tortor justo, interdum vel iaculis eu, semper ut libero. Morbi porttitor sem eget dolor eleifend fermentum. Mauris lacinia dictum lacus ut pharetra. Proin lacus felis, vestibulum sit amet malesuada id, pretium at lorem. Duis elementum sapien vitae nibh consequat tincidunt. Proin gravida rhoncus metus sed feugiat. Sed ultricies tellus et augue adipiscing dictum. In vitae tellus eget sapien fringilla tincidunt. Vestibulum gravida, velit quis mattis elementum, lacus felis vestibulum neque, et commodo quam orci quis odio. Nunc varius viverra metus, eu dictum massa venenatis vel. Cras suscipit, orci a gravida pretium, erat massa facilisis turpis, quis sodales sem metus vitae ligula. Nunc interdum augue vel arcu vulputate quis aliquet nulla vehicula. Suspendisse eros odio, ultrices hendrerit euismod nec, condimentum sed metus.</p>
        <p>Donec at dolor et arcu aliquam tincidunt. Nulla eu elit sit amet leo facilisis posuere. Etiam non elit ac elit ornare elementum a vitae felis. Aenean semper nunc urna. Ut et interdum mi. Duis mollis est eu leo gravida vitae adipiscing leo commodo. Ut scelerisque cursus nulla, nec bibendum elit molestie sed. Nulla facilisi. Proin neque arcu, aliquam sed sagittis non, ultrices in enim. Fusce vitae nunc neque, ut sodales magna. Proin aliquam lobortis augue sed aliquet. Maecenas sit amet pellentesque mauris. Donec luctus purus hendrerit nisl pharetra eleifend. Mauris a lectus mi. In elit dui, porta a venenatis vel, consectetur id magna. Quisque vehicula leo vel nulla convallis quis sollicitudin sem fringilla.</p>
        <p>Morbi nec mi odio, eget porttitor nisi. Duis luctus blandit lacus. Donec quis sagittis mi. Maecenas id nisl enim. Aliquam erat volutpat. Nulla facilisi. Donec ac velit diam, interdum rutrum mauris. Nullam at odio eget felis tempus elementum. Nam a augue nibh, sed bibendum massa. Vivamus eget sollicitudin mauris. Pellentesque dapibus quam nec ligula blandit scelerisque. In vulputate mauris vel dolor interdum vitae aliquet nisl convallis. In massa mi, consectetur id malesuada at, suscipit vitae libero. Sed a ligula erat.</p>
    </div>

    <script type="text/javascript">
        $(function() {
            $('body').hide().fadeIn(800);
            $('a').click(function() {
                var href = $(this).attr('href');
                $('body').fadeOut(800, function() {
                    window.location = href;
                });
                return false;
            });
        });
        // Firefox fix
        $(window).unload(function () { $(window).unbind('unload'); });
        // iOS Safari fix
        $(window).bind('pageshow', function(event) {
            if (event.originalEvent.persisted) {
                window.location.reload() 
            }
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-27T14:12:57.947

对于任何遇到问题的人来说`Rails`——你的问题不是 bfcache——而是`turbolinks`宝石。[以下](http://blog.flightswithfriends.com/post/53943440505/how-to-disable-turbolinks-in-rails-4)是如何删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:37:42.447

也许这并不完全是您所要求的，但他们以这种方式实现了效果：页面内容开始隐藏。总是这样，即使您单击后退按钮，因为隐藏的内容是在标记中的样式或类中声明的。然后是在 ready 事件之后淡入内容的 javascript 代码：

```
$('#content').fadeIn(800); 
```

# php - Xdebug PHP 从远程 linux 服务器到 Mac OS X DGBp 客户端

> ID：15791151
> 
> 赞同：0
> 
> 时间：2013-04-03T15:08:47.477
> 
> 标签：php, linux, macos, xdebug

我正在尝试在远程 linux 服务器上建立与在 Mac OS X 上运行的本地 IDE (PHPStorm) 的 XDebug 连接。PHP 只是在尝试连接时永远挂起。我很确定这是让 linux 机器可以访问我的 Mac 的问题。我非常熟悉如何使用 PHPStorm 设置 XDebug，并且我已经阅读了这里和其他地方的其他帖子。我认为我需要的是某种测试 DGBp 连接的方法。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T06:52:52.660

xdebug.remote_mode 的值是多少？您将其设置为“req”以始终尝试连接到远程调试器。此外，您可以通过以下设置启用 xdebug 日志记录：http: [//xdebug.org/docs/remote#remote_log](http://xdebug.org/docs/remote#remote_log) - 在运行 php 的 linux 机器上将其设置为 /tmp/xdebug.log 或类似内容，然后重新启动 apache -它应该告诉你发生了什么。

# android - 在 Android 中步行/驾驶时更新位置标记并在 Google Maps V2 上绘制路径

> ID：15791152
> 
> 赞同：0
> 
> 时间：2013-04-03T15:08:49.370
> 
> 标签：android, google-maps

我想在开车或步行时在 Google Maps V2 上绘制路径，但我找不到任何在线资源来帮助我解决这个问题。我正在使用 onLocationChanged 侦听器方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:11:44.853

正如这里所说，您需要使用该`Polyline`对象，您可以收集所有路径点（`LatLng`位置）并使用循环添加地图上的所有道路：

```
Polyline newPolyline;
GoogleMap mMap = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);

for(int i = 0 ; i < directionPoints.size() ; i++) 
{          
    rectLine.add(directionPoints.get(i));
}
newPolyline = mMap.addPolyline(rectLine); 
```

或者在每个位置更新上添加一行，以便将此代码放在`onLocationChanged`

```
Polyline newPolyline;
PolylineOptions rectLine = new PolylineOptions().width(3).color(Color.RED);
rectLine.add(point); //your received location.
newPolyline = mMap.addPolyline(rectLine); 
```

要更新标记的位置，只需删除旧标记并创建一个新标记（使用新坐标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:36:09.250

扩展 OnMyLocationChangeListener。

在地图设置中使用它：

```
mMap.setOnMyLocationChangeListener(this); 
```

覆盖这个：

```
@Override
public void onMyLocationChange(Location location) {
          /* your code here */
} 
```

例如代码可能是这样的（未测试）：

```
 Location lastLocationloc=null;
@Override
public void onMyLocationChange(Location location) {
    if(lastLocationloc == null)
        lastLocationloc = location;
    LatLng lastLatLng= locationToLatLng(lastLocationloc);
    LatLng thisLatLng= locationToLatLng(location);
    mMap.addPolyline(new PolylineOptions().add(lastLatLng).add(thisLatLng).width(3).color(Color.RED));
    lastLocationloc = location;
} 
```

locationToLatLng 可能如下所示：

```
public static LatLng locationToLatLng(Location loc) {
    if(loc != null)
        return new LatLng(loc.getLatitude(), loc.getLongitude());
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:01:54.413

您可以使用 Google 地图中的折线。它获取位置并将它们绘制在地图上。

# c# - 在 .net 中的特定时间做某事

> ID：15791153
> 
> 赞同：1
> 
> 时间：2013-04-03T15:08:54.350
> 
> 标签：c#, .net, datetime, time

我有一个每五分钟运行一次然后休眠的进程。我想知道在一天的晚上 11:45 到午夜之间是否有一种优雅的方式来做某事（任何事情）。

我的第一直觉是做类似的事情......

```
 public bool isItMidNight() {
        return ((DateTime.UtcNow.Hour > 11:54) && DateTime.UtcNow.Hour < 11.59);             
    } 
```

如果该值的计算结果为 true，则执行某些操作。如果没有，请继续睡觉和醒来，顺便说一句，只是伪代码。我认为这不会投入生产。但那是我的想法。有没有更**强文本**优雅的解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:10:39.857

不知道它是否称得上“优雅”，但[Quartz.NET](http://quartznet.sourceforge.net/)肯定是“企业”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:39:02.083

你可以使用`Timer`类，像这样的：

```
new System.Threading.Timer(myScheduledTask, null, new TimeSpan(hh, mm, ss) - DateTime.Now.TimeOfDay, -1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:12:18.117

将时间管理机制留给最适合它的地方——我建议使用[Windows 任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)。

让它在晚上 11:45 触发您的应用程序，然后您的应用程序可以专注于其任务，而无需担心时间以及该应用程序的另一个实例是否已经启动并运行该任务等等。

# android - 设置默认的 adb logcat 输出格式

> ID：15791159
> 
> 赞同：3
> 
> 时间：2013-04-03T15:09:21.377
> 
> 标签：android, logcat, adb

我正在linux系统（Ubuntu 12.04）中开发。我最喜欢的输出格式是`-v time`，但`$ adb logcat -v time`每次我想查看日志消息时都必须输入，这很烦人。

所以，我的问题是：有没有办法将 adb 配置为默认输出时间格式？

我在互联网上寻找一个环境变量来设置首选格式，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:43:42.143

使用别名。

```
alias myalias='adb logcat -v time' 
```

（使用您喜欢的任何内容而不是 myalias。例如，首字母`alvt`）

并把它放在你的`.bashrc`

# asp-classic - Asp Classic 写入 PDf 并在打印时保留文件名

> ID：15791160
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:21.370
> 
> 标签：asp-classic, pdf-generation, filenames, content-type, response-headers

我正在尝试将 pdf 文件写入浏览器，当客户端打印 pdf 时，发送到打印机的文件名是文件的名称。但现在我正在获取发送到浏览器“loadfile.asp”的asp页面的名称

因为我在使用时无法在页面中添加标题`Response.ContentType = "application/pdf"`，所以我添加了一个执行`server.Transfer`.

但是每次代码通过时`Response.ContentType = "application/pdf"`，标题都会被空白。

所以这是我的代码： 第一页：

```
<html>
<head>
<title>
    <%= Request.QueryString("File") & ".PDF" %>
</title>
</head>
<body>

<%

Server.Transfer "loadfileAfter.asp"

%>
</body>
</html> 
```

这是第二页（loadfileAfter.asp）：

```
 Response.ContentType = "application/pdf"
    Response.AddHeader "content-disposition", "Filename=" & Request.QueryString("File") & ".PDF"
    Const adTypeBinary = 1

    strFilePath = "D:\" &  Request.QueryString("File") & ".PDF" 'This is the path to the file on disk. 

    Set objStream = Server.CreateObject("ADODB.Stream")
    objStream.Open
    objStream.Type = adTypeBinary
    objStream.LoadFromFile strFilePath

    Response.BinaryWrite objStream.Read

    objStream.Close
    Set objStream = Nothing 
```

我坚信这条线会有所帮助：

```
Response.AddHeader "content-disposition", "Filename=" & Request.QueryString("File") & ".PDF" 
```

但这并没有改变任何事情。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-30T12:09:42.627

这个对我有用：
`Response.AddHeader "content-disposition", "attachment; filename=""" & fileName & """"`

# android - 底部的 TabPageIndicator

> ID：15791161
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:23.610
> 
> 标签：android, viewpagerindicator

我正在使用[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)和示例 TabsWithIcons。我想要底部的 TabPageIndicator。如果我在 XML 布局中使用页面查看器更改 TabPageIndicator，我总是会遇到异常。

```
 java.lang.ClassCastException: com.viewpagerindicator.TabPageIndicator cannot be cast to android.support.v4.view.ViewPager 
```

如何将 TabPageIndicator 置于底部？

simple_tabs.xml：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    />

<com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />

</LinearLayout> 
```

SampleTabsWithIcons.java：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import com.viewpagerindicator.IconPagerAdapter;
import com.viewpagerindicator.TabPageIndicator;

public class SampleTabsWithIcons extends FragmentActivity {
    private static final String[] CONTENT = new String[] { "Calendar", "Camera", "Alarms", "Location" };
    private static final int[] ICONS = new int[] {
            R.drawable.perm_group_calendar,
            R.drawable.perm_group_camera,
            R.drawable.perm_group_device_alarms,
            R.drawable.perm_group_location,
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_tabs);

        FragmentPagerAdapter adapter = new GoogleMusicAdapter(getSupportFragmentManager());

        ViewPager pager = (ViewPager)findViewById(R.id.pager);
        pager.setAdapter(adapter);

        TabPageIndicator indicator = (TabPageIndicator)findViewById(R.id.indicator);
        indicator.setViewPager(pager);
    }

    class GoogleMusicAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
        public GoogleMusicAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return CONTENT[position % CONTENT.length].toUpperCase();
        }

        @Override public int getIconResId(int index) {
          return ICONS[index];
        }

      @Override
        public int getCount() {
          return CONTENT.length;
        }
    }
} 
```

样本来源：

[SampleTabsWithIcons.java](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/src/com/viewpagerindicator/sample/SampleTabsWithIcons.java)

[simple_tabs.xml](https://github.com/JakeWharton/Android-ViewPagerIndicator/blob/master/sample/res/layout/simple_tabs.xml)

# c++ - 哈希表（线性探测）

> ID：15791171
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:43.377
> 
> 标签：c++

我正在使用线性探测制作一个哈希表，当负载因子即（在哈希表中输入的元素数量）/（哈希表的大小）变得大于 0.5 时，我必须调整数组的大小，我必须调整数组的大小。我正在通过在包含与哈希表相关的函数的类中初始化一个指针来调整大小。我将指针设置为等于大小为 100 的结构（结构仅包含一个字符串）的数组。每次加载因子大于 0.5 ，我通过创建一个两倍于先前大小的新数组并将指针指向新数组来调整数组的大小。我还有一个 int，它存储数组的当前大小，并随着每个使用 resize 函数的实例而更新。每次调用插入函数时，插入的元素数量都会增加。我这样做正确吗？下面是我的代码

```
#include <cstring>
#include <vector>
#include <math.h>
#include <iomanip>

using namespace std;

int power(int a,int b)
{
   for (int i=0;i<b;i++)
   {
       a*=a;
   }
   return a;
};

struct Bucket
{
    string word;
};   

const int size=100;

class LProbing
{
  private:
          int a; //a constant which is used in hashing
          int cursize;  //current size of hash table
          Bucket *Table;  //pointer to array of struct
          int loadfactor; //ratio of number of elements entered over size of hashtable
          int n;  //number of elements entered
          Bucket table[size];   //array of structs
  public:
          LProbing(int A);  //constant is decided by user 
          void resize();
          void insert(string word);
          void Lookup(string word);
};

LProbing::LProbing(int A)
{  
   cursize=size;                   
   a=A;
   Table=table;
   loadfactor=0;  //initially loadfactor is 0 as number of elements entered are 0
   n=0;
}

void LProbing::resize() 
{
    cout<<"resize"<<endl;
    loadfactor=n/cursize;   //ensuring if resize needs to be done
    if (loadfactor<=0.5)
    {
       return;
    }                                      
    const int s=2*cursize;  
    Bucket PTable[s];
    for (int i=0;i<cursize;i++)
    {
        if (Table[i].word.empty())
        continue;

        //rehashing the word onto the new array
        string w=Table[i].word;    
        int key=0;
        for (int j=0;j<w.size();j++)
        {
           unsigned char b=(unsigned char)w[j];
           key+=(int)power(a,i)*b;
        }
        key=key%(2*cursize);
        PTable[key].word=w;  //entering the word in the new array
    }
    Table=PTable;  //putting pointer equal to new array
    cursize=2*cursize;  //doubling the current size of array
}

void LProbing::insert(string word)
{
   cout<<"1"<<endl; 
   n++;  //incrementing the number of elements entered with every call to insert

    //if loadfactor is greater than 0.5, resize array
   loadfactor=n/cursize;
   if (loadfactor>0.5)
   {               
       resize();
    }                
   //hashing the word
   int k=0;
   for (int i=0;i<word.size();i++)
   {
       unsigned char b=(unsigned char)word[i];
       int c=(int)((power(a,i))*b);
       k+=c;
       cout<<c<<endl;
   }

   int key=0;
   key=k%cursize;
   cout<<key<<endl;
   //if the respective key index is empty enter the word in that slot
   if (Table[key].word.empty()==1)
   {
       cout<<"initial empty slot"<<endl;
       Table[key].word=word;
   }
   else  //otherwise enter in the next slot
   {
       //searching array for empty slot
       while (Table[key].word.empty()==0)
       {
        k++;
        key=k%cursize;
       }
       //when empty slot found,entering the word in that bucket
       Table[key].word=word;
       cout<<"word entered"<<endl;
   }
}             

#include "Linear Probing.cpp"
#include <fstream>

using namespace std;

int main() 
{
   LProbing H(35);
   ifstream fin;
   fin.open("dict.txt");
   vector<string> D;

   string d;
   while (getline(fin,d))
   {
       if (!d.empty())
       {
           D.push_back(d);
       }
   }
   fin.close();
   for (int i=0;i<D.size();i++)
   {
       H.insert(D[i]);
   }
   system("PAUSE");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:48:42.507

您可能会在某处发现它有帮助： [http ://www.cs.rmit.edu.au/online/blackboard/chapter/05/documents/contribute/chapter/05/linear-probing.html](http://www.cs.rmit.edu.au/online/blackboard/chapter/05/documents/contribute/chapter/05/linear-probing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:36:45.030

看起来负载因子的计算方式是`int/int`，它会保持 0 直到达到 1。尝试将除法的输入转换为浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:21:03.587

您正在处理大数字并且变量“key”溢出：

```
key += (int)power(a,i)*b 
```

# php - htaccess 在 localhost 上运行良好，在 127.0.0.1 上出现错误

> ID：15791172
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:45.730
> 
> 标签：php, apache, .htaccess

当我查看我的网站时，`localhost`它运行良好。当我尝试在我的网络 ip 上打开它时，我`(192.68.x.x) or 127.0.0.1`收到错误 500 内部服务器错误。我检查了 apache 日志，这是错误：

```
Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

我在 so 上读到了同样的错误，我得到了一些应该可以工作的 htaccess 示例，尝试了所有但我只是不断收到消息，并且在某些情况下`http://localhost`也停止工作。我的 htaccess 将所有内容重定向回 index.php，从我开始我的网站类。

这是我的 htaccess ：

```
RewriteEngine on
RewriteBase /
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)$ index.php?param=$1 [QSA,L] 
```

谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:38:41.680

1/ 检查您的主机文件中是否有此规则：`127.0.0.1 localhost`.

2/ 检查 Apache`rewrite_module`是否被激活。

3/ 确保您的项目位于子文件夹中（以我们`mysite/`为例）。

4/ 设置你的根 htaccess ( `/.htaccess`):

```
Options -Indexes +FollowSymlinks
RewriteEngine On
RewriteBase / 
```

5/ 设置您的项目 htaccess ( `/mysite/.htaccess`) ：

```
RewriteEngine on
RewriteBase /mysite/
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)$ index.php?param=$1 [QSA,L] 
```

# python - python字符串和二进制数据

> ID：15791173
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:47.240
> 
> 标签：python, python-3.x

我的问题是关于 python 3.0 字符串。

1.  我的理解是，对于 line `str = "a"`，字符 'a' 被编码（例如使用 utf-8）并存储在 str 对象中。如果 'a' 的 UTF-8 表示为 1 个字节，则字符串为 1 个字节长。我对吗？

2.  如果上述情况属实，当我们使用 read() 读取二进制文件时会发生什么。假设我有一个包含两个字节二进制数据的两字节文件，我使用读取命令将其读取为字符串

    ```
    open(fileName, mode='rb') 
        str= file.read() 
    ```

    现在`str`将是两个字节长，每个字节将是存储在文件名中的内容。我对吗？

3.  如果我在上述观点上是正确的，那么 str 对象不是任何特定的编码格式（如 UTF 等），那么 python 字符串始终是 unicode 是什么意思？如果我调用 str.encode() 也会发生什么。会没有意义吗？

4.  因为`str`从文件中读取的对象实际上是一个字节数组。有没有办法将它转换为 bytearray 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:27:25.547

你很困惑。“编码”与*字节字符串*有关，而不是与*unicode 字符串*有关。有意义的陈述：“这个字节串是 utf-8 编码的。”，“这个字节串是 2 个字节长。” 无意义的陈述：“这个 unicode 字符串是 utf-8 编码的”，“这个 unicode 字符串是 2 个字节长”

1.  `str = "a"`意思是“创建一个 unicode 字符串 'a' 和一个名为“的引用`str`”。Unicode 字符串当然是以某种编码*存储*的，因为它需要作为字节存在于内存中，但这并不重要。您的所有代码都将其视为根本没有编码 - 它已从字节中抽象出来。一个 unicode 字符串是*一个 unicode 代码点序列*（即表示字符的整数）。
2.  是和不是。`str`这里（的返回值`read()`）是一个*字节字符串*，而不是一个*unicode 字符串*。`"a" != b"a"`.
3.  您的字节字符串`str`具有*未知编码*，必须*解码*以生成 unicode 字符串。字节字符串没有`encode()`方法，因为它没有意义——它们要么已经是 unicode 字符串的编码，要么根本不代表 unicode 字符串（例如图像）。
4.  它不是字节数组，而是字节串。A[`bytearray`](http://docs.python.org/3/library/stdtypes.html#bytearray-objects)是一个*可变*的字节列表。您可以使用 生成字节数组`bytearray(byte_string)`，但字节数组旨在用于相当专业的用途（例如，避免复制发送-接收缓冲区），而不是随意使用。通常你只需要一个字节字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:21:15.297

当您以二进制模式读取文件时，该`read()`方法返回的值是一个[`bytes`](http://docs.python.org/3/library/stdtypes.html#bytes)对象，而不是一个[`str`](http://docs.python.org/3/library/stdtypes.html#str)对象。文档对此进行了深入介绍。

```
>>> with open('foo', mode='rb') as f: s = f.read()
... 
>>> s
b'abc\n'
>>> len(s)
4
>>> type(s)
<class 'bytes'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:22:46.017

Python 字符串存储*Unicode 代码点*。

代码点与字节不同。字节是数字的计算机表示（通常在 0 到 255 之间），这些数字可以通过解码过程转换为代码点，并在编码的另一个方向上转换。Python 3 字符串包含代码点，文本中的每个字符一个。

Python 源代码可以使用一系列字节定义字符串文字，解释器默认使用 UTF-8 编解码器将其解码为 un​​icode，但您可以在文件顶部设置其他编解码器。在磁盘上，UTF-8 编码的字母`a`确实只有一个字节，这就是 UTF-8 标准的本质。

如果您以文本模式读取文件，Python 会自动为您应用解码过程，但是当您以二进制模式打开文件时，不会进行解码，`bytes`而是会得到一个对象。该对象的内容应该准确地反映文件的内容。请注意，它**不是**type `str`，它不是 unicode，甚至不是 Python 字符串。要将字节转换为字符串，您需要使用该`.decode()`方法显式解码。

A`bytearray`是从一个`bytes`值创建的，只需调用`bytesarray()`它。

# filesystems - 文件系统有更正式的定义吗？

> ID：15791176
> 
> 赞同：1
> 
> 时间：2013-04-03T15:09:51.033
> 
> 标签：filesystems, terminology

维基百科说文件系统：

> 文件系统是一种数据存储类型，可用于存储、检索和更新一组文件。该术语可以指用于定义文件的抽象数据结构，也可以指实现抽象概念的实际软件或固件组件。

有更正式的定义吗？是否有术语来处理不同的部分？

是文件系统

*   磁盘（或“存储设备”）上的实际物理位结构？
*   对其进行操作的内核代码？（或通常是软件或固件组件）
*   使用户程序可以使用它的内核 API？
*   心智模型？（即抽象的想法）
*   规范？（它是“抽象数据结构”吗？）

那么构成它的某些部分是否有不同的术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T00:13:14.717

不，文件系统没有更正式的定义，因为上面的定义完全描述了“管理文件的系统”。但是，您的各种要点都有一些术语。

磁盘上的实际物理位结构根据上下文被命名为“块”、“节点”或“物理格式”。“块”标识磁盘寻址的最小单位（实际寻址格式有不同的名称），“节点”标识如果“块”包含文件导航数据时对位的预期解释，“物理格式”标识预期位与整个文件系统设计有关（这个术语很少使用）。

在文件系统上运行的内核代码通常称为“驱动程序”。它读取块，并根据整个文件系统结构解释其中的位。

使用户程序可以使用文件系统的内核 API 通常是“文件系统接口”，它可能会或可能不会公开文件系统实现的细节（取决于操作系统、可能的文件系统抽象层等） .

文件系统的心智模型是文件系统的“模型”或“设计”

规范是描述“模型”或“设计”的书面文件。它通常包含有助于澄清实现是否符合设计的详细信息。不符合设计被认为是对规范的错误实现。规范可能包括所需的数据结构、来自特定 api 调用的所需结果或任何其他要求。

# c# - 在 MasterPage 的超链接中设置动态 Href

> ID：15791182
> 
> 赞同：0
> 
> 时间：2013-04-03T15:09:58.540
> 
> 标签：c#, asp.net, master-pages, webforms

以下将起作用：

```
<%  if (Sql.ToBoolean(HttpContext.Current.Application["CONFIG.SHOW_REPORTING_LINK"])) 
    { 
%>
    <asp:HyperLink ID="hypReporting" ForeColor="white" Text='Reporting' NavigateUrl="#" CssClass="myAreaLink" Runat="server" />
           &nbsp;<font color="white">|</font>&nbsp; 
<% 
    } 
%> 
```

但是，我需要一个动态链接，而不是静态链接。我试过这个：

```
<%  if (Sql.ToBoolean(HttpContext.Current.Application["CONFIG.SHOW_REPORTING_LINK"])) 
    { 
%>
    <asp:HyperLink ID="hypReporting" ForeColor="white" Text='Reporting' NavigateUrl="<%# Eval(HttpContext.Current.Application["CONFIG.REPORTING_URL"]) %>" CssClass="myAreaLink" Runat="server" />
           &nbsp;<font color="white">|</font>&nbsp; 
<% 
    } 
%> 
```

但是，它给了我一个错误，上面写着“服务器标签格式不正确”。

我通常会从代码隐藏中执行此操作，但是 .master 文件中没有代码隐藏，对吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:13:48.483

NavigateUrl 中的双引号导致错误的服务器标记。它应该是：

```
NavigateUrl='<%# Eval(HttpContext.Current.Application["CONFIG.REPORTING_URL"]) %>' 
```

你应该去掉那个`<font>`标签，只使用 CSS。该标签已弃用。

是的，母版页文件中有代码隐藏（右键单击 -> 查看代码；或在解决方案资源管理器中，确保单击“显示所有文件”）。在那里做可能会更容易/更清洁。

# sharepoint-2010 - CAML：无法完成此操作

> ID：15791188
> 
> 赞同：4
> 
> 时间：2013-04-03T15:10:18.037
> 
> 标签：sharepoint-2010, caml

似乎我的以下查询失败并抛出“无法完成此操作”。但是，当我在 CAML 查询生成器中测试此查询时，它工作正常。

```
<Where>
    <And>
       <Or>
         <Eq><FieldRef Name='Participant' /><Value Type='User'>Test1</Value></Eq>
         <Eq><FieldRef Name='Participant' /><Value Type='User'>Test2</Value></Eq>
         <Eq><FieldRef Name='Participant' /><Value Type='User'>Test3</Value></Eq>
        </Or>
      <Eq><FieldRef Name='Department' /><Value Type='Text'>Positioning</Value></Eq>
     </And>
 </Where> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T07:27:00.310

在您的查询中，选项卡上似乎有两个以上的条件。在一个或一个标签`<OR>`内最多只能有两个条件。`<Or>``<And>`

> 该元素可以嵌套在其他 And 和 Or 元素中。服务器支持无限的复杂查询。但是，任何给定的 And 元素只能有两个合取；也就是说，只有两个子元素。如果需要连接三个或更多条件，则必须嵌套 And 元素，如下节的第三个示例所示。

请看这里：[MSDN](http://msdn.microsoft.com/en-us/library/ms196939.aspx)

所以你需要重写你的查询，如：

```
<Where>
  <And>
     <Or>
        <Eq>
           <FieldRef Name='Participant' />
           <Value Type='User'>Test1</Value>
        </Eq>
        <Or>
           <Eq>
              <FieldRef Name='Participant' />
              <Value Type='User'>Test2</Value>
           </Eq>
           <Eq>
              <FieldRef Name='Participant' />
              <Value Type='User'>Test3</Value>
           </Eq>
        </Or>
     </Or>
     <Eq>
        <FieldRef Name='Title' />
        <Value Type='Text'>Postiioning</Value>
     </Eq>
  </And>
 </Where> 
```

# java - MyInternalFrame 无法解析为类型

> ID：15791189
> 
> 赞同：0
> 
> 时间：2013-04-03T15:10:22.610
> 
> 标签：java, swing, class, jinternalframe

直接从 Oracle 的关于制作内部框架的 Java 教程复制并粘贴此代码：（注释是 Oracle 的，不是我的。）在右边距标记错误位置和注释“此处发生错误”。计算机说 MyInternalFrame “无法解析输入”。

```
package components;

import javax.swing.JInternalFrame;
import javax.swing.JDesktopPane;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JMenuBar;
import javax.swing.JFrame;
import javax.swing.KeyStroke;

import java.awt.event.*;
import java.awt.*;

public class InternalFrameDemo extends JFrame 
               implements ActionListener {

    JDesktopPane desktop;

    public InternalFrameDemo() {
        super("InternalFrameDemo");

        //Make the big window be indented 50 pixels from each edge
        //of the screen.
        int inset = 50;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(inset, inset,
                  screenSize.width  - inset*2,
                  screenSize.height - inset*2);

        //Set up the GUI.
        desktop = new JDesktopPane(); //a specialized layered pane
        createFrame(); //create first "window"
        setContentPane(desktop);
        setJMenuBar(createMenuBar());

        //Make dragging a little faster but perhaps uglier.
        desktop.setDragMode(JDesktopPane.OUTLINE_DRAG_MODE);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();

        //Set up the lone menu.
        JMenu menu = new JMenu("Document");
        menu.setMnemonic(KeyEvent.VK_D);
        menuBar.add(menu);

        //Set up the first menu item.
        JMenuItem menuItem = new JMenuItem("New");
        menuItem.setMnemonic(KeyEvent.VK_N);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_N, ActionEvent.ALT_MASK));
        menuItem.setActionCommand("new");
        menuItem.addActionListener(this);
        menu.add(menuItem);

        //Set up the second menu item.
        menuItem = new JMenuItem("Quit");
        menuItem.setMnemonic(KeyEvent.VK_Q);
        menuItem.setAccelerator(KeyStroke.getKeyStroke(
                KeyEvent.VK_Q, ActionEvent.ALT_MASK));
        menuItem.setActionCommand("quit");
        menuItem.addActionListener(this);
        menu.add(menuItem);

        return menuBar;
    }

    //React to menu selections.
    public void actionPerformed(ActionEvent e) {
        if ("new".equals(e.getActionCommand())) { //new
            createFrame();
        } else { //quit
            quit();
        }
    }

    //Create a new internal frame.
    protected void createFrame() {
        MyInternalFrame frame = new MyInternalFrame();  //Error occurs here//
        frame.setVisible(true); //necessary as of 1.3
        desktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {}
    }

    //Quit the application.
    protected void quit() {
        System.exit(0);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Make sure we have nice window decorations.
        JFrame.setDefaultLookAndFeelDecorated(true);

        //Create and set up the window.
        InternalFrameDemo frame = new InternalFrameDemo();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Display the window.
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:13:25.273

从以下[评论](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/InternalFrameDemoProject/src/components/InternalFrameDemo.java)：`InternalFrameDemo.java`

```
/*
 * InternalFrameDemo.java requires:
 *   MyInternalFrame.java
 */ 
```

它说你需要`MyInternalFrame.java`的是[这里](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/InternalFrameDemoProject/src/components/MyInternalFrame.java)。将此文件添加到您的构建路径。

# python - 从文件夹python导入模块动态

> ID：15791191
> 
> 赞同：3
> 
> 时间：2013-04-03T15:10:24.250
> 
> 标签：python, import

我已经阅读了关于在 python 中动态导入模块的其他帖子。他们工作！问题是当我从特定文件夹导入模块时。如果我在同一个文件夹中有主要的 python 代码和模块：

主文件

模块.py

如果我做：

```
var = "module"
module = __import__(var) 
```

它工作得很好。但我的模块位于名为“modules”的特定文件夹中

主文件

模块\module.py

如果我做：

```
var = "a"
module = __import__("modules\\"+var) 
```

它不起作用。我知道我非常接近解决方案，但我无法得到它。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:17:29.277

假设 modules 确实是 python 包并且 var 是你的模块名，你用点分隔目录。

```
var = "module" 
module = __import__("modules.{0}".format(var), globals(), locals(), [], -1) 
```

您可以查看文档：

[**进口**文件](http://docs.python.org/2/library/functions.html#__import__)

您在模块文件夹中创建一个 __init__.py 文件。

# ms-access - 如何使用从报告中提取的自定义名称保存访问报告？

> ID：15791192
> 
> 赞同：0
> 
> 时间：2013-04-03T15:10:24.310
> 
> 标签：ms-access, vba

我需要使用自定义名称保存 PDF 文件。此名称应包含报告中的参数/值。

我需要生成几个这样的报告，所以我需要一个我猜该`Member_ID`领域将提供的差异化。我确实在网上搜索了很多，但我无法实现任何一个。

我现在的代码如下所示：

```
Private Sub Create_PDF_Click()

Dim myPath As String Dim strReportName As String

DoCmd.OpenReport "Proof_Graphs", acViewPreview

myPath = "C:\Proofs\"

strReportName = Proof_Graphs.[MEMBER_ID] + "-" + ".pdf"

DoCmd.OutputTo acOutputReport, "", acFormatPDF, myPath + strReportName, True DoCmd.Close acReport, "Proof_Graphs"

End Sub 
```

我收到一个找不到对象的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:50:13.620

您可以使用 `Reports!ReportName!FieldName`访问报表上的值的控制框。

```
Private Sub Create_PDF_Click()
Dim myPath As String Dim strReportName As String
Dim memberID As String

DoCmd.OpenReport "Proof_Graphs", acViewPreview

memberID = Reports!Proof_Graphs.[MEMBER_ID]'to access the field for the value on the report

myPath = "C:\Proofs\"

strReportName = memberID +  ".pdf"

DoCmd.OutputTo acOutputReport, "", acFormatPDF, myPath + strReportName, True DoCmd.Close acReport, "Proof_Graphs"

End Sub 
```

# sql - Oracle - 在子集中选择具有最小值的行

> ID：15791195
> 
> 赞同：0
> 
> 时间：2013-04-03T15:10:25.470
> 
> 标签：sql, oracle, oracle10g

我有以下日期表：

```
dateID INT (PK),
personID INT (FK),
date DATE,
starttime VARCHAR, --Always in a format of 'HH:MM' 
```

我想要做的是我想为每个人提取具有最低日期（主要条件）和开始时间（次要条件）的行（所有列，包括 PK）。例如，如果我们有

第 1 行（日期 = '2013-04-01' 和开始时间 = '14:00'）

和

row2（日期 = '2013-04-02' 和开始时间 = '08:00'）

将检索 row1 以及所有其他列。

到目前为止，我已经想出了逐步过滤表格，但它相当混乱。有没有更有效的方法来做到这一点？

这是我到目前为止所做的：

```
 SELECT 
    D.id
    , D.personid
    , D.date        
    , D.starttime 
FROM table D 
JOIN (
        SELECT --Select lowest time from the subset of lowest dates
            A.personid, 
            B.startdate, 
            MIN(A.starttime) AS starttime 
        FROM table A 
        JOIN (
                SELECT --Select lowest date for every person to exclude them from outer table
                    personid
                    , MIN(date) AS startdate
                FROM table
                GROUP BY personid
            ) B
        ON A.personid = B.peronid
        AND A.date = B.startdate
        GROUP BY 
            A.personid, 
            B.startdate
    ) C
ON C.personid = D.personid
AND C.startdate = D.date 
AND C.starttime = D.starttime 
```

它有效，但我认为有一种更干净/有效的方法可以做到这一点。有任何想法吗？

编辑：让我扩展一个问题 - 我还需要为每个人提取最大日期（只有日期，没有时间）。

结果应如下所示：

```
id
personid
max(date) for each person
min(date) for each person
min(starttime) for min(date) for each person 
```

它是更大查询的一部分（结果表与其连接），并且结果表必须足够轻量级，以便查询不会执行太长时间。使用此表的单连接（仅对我想要的每个字段使用 min，max）查询大约需要 3 秒，我希望生成的查询不超过 2-3 倍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:14:41.237

你应该能够这样做：

```
select a.dateID, a.personID, a.date, a.max_date, a.starttime
  from (select t.*, 
               max(t.date) over (partition by t.personID) max_date,
               row_number() over (partition by t.personID 
                                  order by t.date, t.starttime) rn
          from table t) a
 where a.rn = 1; 
```

添加到小提琴的示例数据：[http ://sqlfiddle.com/#!4/63c45/1](http://sqlfiddle.com/#!4/63c45/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:25:09.117

这是您可以使用的查询，无需合并到您的查询中。您还可以单独使用@Dazzal 的查询

```
SELECT ID, PERSONID, DATE, STARTTIME
(
SELECT ID, PERONID, DATE, STARTTIME, ROW_NUMBER() OVER(PARTITION BY personid ORDER BY     STARTTIME, DATE) AS RN
FROM TABLE 
) A
WHERE 
RN = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T07:39:24.153

```
select a.id,a.accomp, a.accomp_name, a.start_year,a.end_year, a.company
  from (select t.*, 
               min(t.start_year) over (partition by t.company) min_date,
               max(t.end_year) over (partition by t.company) max_date,
               row_number() over (partition by t.company 
                                  order by t.end_year desc) rn
          from temp_123 t) a
 where a.rn = 1; 
```

# javascript - 使用jquery的json

> ID：15791200
> 
> 赞同：-4
> 
> 时间：2013-04-03T15:10:35.297
> 
> 标签：javascript, jquery

我有一个 json 文件。现在我想使用 jquery 读取它的内容。一种方法是使用 $.getJSON() 方法和其他一些可以使用的 jquery json 方法，但是这些方法会将请求发送到服务器并读取内容并将内容发送到客户端。是否可以在不向服务器发送请求的情况下读取 .json 文件内容？

这是我的 menu.json 文件，它基本上取自 json.org 示例。我需要这个用于简单的演示目的。

```
{
    "menu": {
        "id": "file",
        "value": "File",
        "popup": {
            "menuitem": [
                {"value": "New", "onclick": "CreateNewDoc()"},
                {"value": "Open", "onclick": "OpenDoc()"},
                {"value": "Close", "onclick": "CloseDoc()"}
            ]
        }
    }
} 
```

**更新**

menu.json 文件在我的文件系统中，如下所示

```
projectfolder/
    index.html
    menu.json 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:15:59.657

您的所有文件最初都存储在服务器上。如果您想在客户端访问它们，那么您需要以某种形式或方式向服务器发出请求。`$.getJSON()`是一个很好的方法来做到这一点。

如果这只是您想要存储的数据并且不需要人工编辑或由其他应用程序访问，您可以将其保存为代码中的 javascript 对象

```
var obj = {
    menu: {
        id: "file",
        value: "File",
        popup: {
            menuitem: [
                {value: "New", onclick: CreateNewDoc},
                {value: "Open", onclick: OpenDoc},
                {value: "Close", onclick: CloseDoc}
            ]
        }
    }
}; 
```

由于您显然想在其中存储函数，因此这是一种更好的方法。在客户端上保存为字符串的评估函数被认为不是很好的做法，因为您将数据紧密绑定到您的实现，并且理论上允许将任意函数绑定到此处的 onclick。

# java - UDP支持多个连接到同一个端口，发送和接收

> ID：15791202
> 
> 赞同：1
> 
> 时间：2013-04-03T15:10:45.720
> 
> 标签：java, android, sockets, networking, udp

目前我有一个服务器，它将允许客户端通过发送消息“连接”来连接它，当服务器收到此消息时，它会接收 InetAddress，然后使用该 InetAddress 向客户端发送数据，一旦客户端已连接并收到其 ID 号，它将不断向 UDP 套接字发送数据，以便它可以更新其位置，现在当新客户端想要连接时，它会发送消息“连接”，但很少有新客户端会连接，发生的事情是已经连接的客户端一直保持host.receive函数忙，所以当新客户端去连接时，如果当前连接的客户端没有跳转是幸运的，然后客户端只剩下一个空白屏幕。

我需要帮助的是，如何使用同一端口支持 UDP 套接字上的多个客户端？将连接到服务器的所有客户端都在同一个路由器上，

这是整个服务器代码

```
public class gameServer /*extends Thread*/ extends AsyncTask<String, String, String>{

/**
 * Sets up a server for Android applciation
 */
private static final String TAG = "GameServer";
private DatagramSocket socket;
private int port = 50000;
private int players = 0;
private String[] positions = new String[8];
private ArrayList<InetAddress> addresses = new ArrayList();
private boolean wait = false;
private Context contextHolder = null;

//Make an array, this array will hold all the positions
//the clients sent to it,
//using the ID number, it will store it in a array block
//and the "host" can just return it and use that

public gameServer( Context context ) throws IOException
{
    //Here we take in the clients block,
    //this will be assets[0];
    contextHolder = context;
    socket = new DatagramSocket( port );
    Log.d(TAG, "Server was setup");
}

public DatagramSocket rtnSocket(){ return socket; }

private String getLocalIPAddress()
{
    try
    {
        for (Enumeration<NetworkInterface> nis = NetworkInterface.getNetworkInterfaces(); nis.hasMoreElements();)
        {
            NetworkInterface ni = nis.nextElement();
            Log.v(TAG, "NetworkInterface = " + ni.getDisplayName());
            for (Enumeration<InetAddress> ips = ni.getInetAddresses(); ips.hasMoreElements();)
            {
                InetAddress ip = ips.nextElement();
                String s = ip.getHostAddress();
                Log.v(TAG, "InetAddress = " + s);
                if (!ip.isLoopbackAddress())
                {
                            if(InetAddressUtils.isIPv4Address(s)) return s;
                }
            }
        }
    }
    catch (SocketException e)
    {
            Log.e(TAG,"getLocalIPAddress()", e);
    }
    return null;
}

public void getClientPosition(int xPos, int yPos)
{
    positions[0] = xPos + ":" + yPos;
}

@Override
protected String doInBackground(String... params) {
    InetAddress client = null;
    boolean run = true;
    String data = "";
    DatagramPacket packet = null;
    boolean position = false;
    while( run )
    {
        if( data.equalsIgnoreCase( "" ) )
        {

        }

        //Send some data
        if( data.equalsIgnoreCase( "connect" ) && wait == true )
        {
            Log.d(TAG, "Someone wants to connect");
            //Increase the total players by 1
            players = players + 1;
            //Notify to the host (client) something has change
            //notify client
            //Send a message to the client with the ID
            byte[] bufer = new byte[256];
            //Send a message "connect" to the host
            String msg = Integer.toString( players );
            int msgLength = msg.length();
            bufer = msg.getBytes();
            InetAddress address;
            //Default ip address of the host
            //Take the address from the packet
            addresses.add( packet.getAddress() );
            Log.d(TAG, "Address is " + addresses.get( addresses.size() - 1 ) );
            address = addresses.get( addresses.size() - 1 );
            DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
            //Send packet
            try 
            {
                socket.send( p );
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }

            wait = false;
        }

        if( wait == true && position == true )
        {
            position = false;
            wait = false;
        }

        for(int i = 0;i < positions.length; i++)
        {
            if(positions[i] != null)
            {
            //Log.d(TAG, "X and Y position of asset:"+i+", is:"+ positions[i]);
            }
        }

        //Needs to try and reteive data...
        if( wait == false )
        {
            //Log.d(TAG, "Waiting to retreive data");
            byte[] buf = new byte[256];
            packet = new DatagramPacket( buf, buf.length );
            try 
            {
                socket.receive( packet );
                wait = true;
            } 
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }

            data = new String( buf, 0, packet.getLength() );
            //Log.d(TAG, "Data received from :" + packet.getAddress() + ", holds this value: " + data);
            String[] dataStrings = data.split(":");
            if( dataStrings[0].equalsIgnoreCase( "position" ) )
            {
                position = true;
            }
        }

        //Log.d(TAG, "Data received was :" + data);

        /*try 
        {
            Thread.sleep( 25 );
        } 
        catch (InterruptedException e) 
        {
            // TODO Auto-generated catch block
            Log.d(TAG, "Error with trying to sleep");
            e.printStackTrace();
        }*/
    }
    Log.d(TAG, "Error with while run value");
    return "finished";
}

public int returnPlayers(){ return players; }
} 
```

这是客户端代码

```
public class gameClient extends AsyncTask<String, String, String> 
{

//Variables
private static final String TAG = "gameClient";
private gameServer server;
private boolean rdyForPlay = false;
//Holds all of the over clients blocks
private gameObject[] assets = new gameObject[8];
private int ID = 0;
private int port = 50000;
private Context contextHolder;
//If this client is the host
private boolean host = false;
private DatagramSocket socket = null;
//How many clients are connected to the server
private int totalPlayers = 0;

//Constructor for gameclient
public gameClient( boolean serverTag, Context context )
{
    host = serverTag;
    //Client is host
    if( host == true)
    {
        host = true;
        try 
        {
            //Start the server
            contextHolder = context;
            server = new gameServer( contextHolder );
            this.execute();
        } 
        catch (IOException e) 
        {
            //Error
            Log.d(TAG, "Could not start server");
            e.printStackTrace();
        }
    }
    //Client is not host
    else
    {
        //Connect to the host
        contextHolder = context;
        this.execute();
    }
}

//Connect to the host, to receive and send data to
public void connectToServer()
{
    //Send a connect message to the server
    try {
        //Create a socket
        socket = new DatagramSocket( port );
        byte[] bufer = new byte[256];
        //Send a message "connect" to the host
        String msg = "connect";
        int msgLength = msg.length();
        bufer = msg.getBytes();
        InetAddress address;
        //Default ip address of the host
        address = InetAddress.getByName("192.168.1.59");
        DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
        //Send packet
        socket.send( p );

    } catch (UnknownHostException e2) {
        Log.d(TAG, "Unknown host");
        e2.printStackTrace();
    } catch (SocketException e) {
        Log.d(TAG, "Socket problem");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG, "I/O problem");
        e.printStackTrace();
    }

    //Receive the message back
    byte[] buf = new byte[256];
    DatagramPacket packet = new DatagramPacket( buf, buf.length );
    //Try to receive a packet from the server
    try 
    {
        Log.d(TAG, "Waiting for data");
        socket.receive( packet );
    } 
    //Error
    catch (IOException e) 
    {
        Log.d(TAG, "Error with receiving data");
        e.printStackTrace();
    }

    //Convert the packet to a string
    String data = new String( buf, 0, packet.getLength() );

    //Use the string to find out what ID this client is
    ID = Integer.parseInt( data );
    //Setup the client game
    setUpClient();
}

//Setup the client game/screen
public void setUpClient()
{
    //Setup the client using the ID that was given by the host
    Log.d(TAG, "ID is : " + ID);
    gameObject temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.player), 250, 300);
    assets[ID] = temp;
    for(int i = 0; i < ID; i++)
    {
        temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.new_player), 50*i, 50*i);
        assets[i] = temp;
    }

    //If this client is the host, then pass the client to the server for easy access
    if( host == true )
    {
    server.getClientPosition( assets[ID].returnPosX(), assets[ID].returnPosY() );
    }
}

//When the screen is touched
public void sendTouchEvent(float xSet, float ySet)
{
    assets[ID].setPosition( xSet, ySet );
}

@Override
//Keep the game updated
protected String doInBackground(String... params)
{
    //Connect to the server
    if( host == false ){ while(ID == 0) { Log.d( TAG, "Client will connect to server" ); connectToServer(); } }
    //If the client is host, then start the server thread
    if( host == true ) { setUpClient(); server.execute(); }
    //game us now ready to be played
    rdyForPlay = true;
    boolean run = true;
    boolean setupPlayer = false;

    while( run )
    {
        int players = 0;
        //Tell the server to give position of players
        //if( setupPlayer == true )
        //{
        //  setUpClient();
        //  setupPlayer = false;
        //}
        if( host == true )
        {
            server.getClientPosition( assets[ID].returnPosX(), assets[ID].returnPosY() );
            int newPlayers = server.returnPlayers();
            if( players != newPlayers )
            {
                for(int i = players; i < newPlayers; i++)
                {
                    i = i+1;
                    gameObject temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.new_player), 50*i, 50*i);
                    assets[i] = temp;
                }
                players = newPlayers;
            }

        }

        //If this is a client then do this
        if( host == false )
        {
            try {
                //If the socket is not yet setup, set it up
                if(socket == null)
                {
                    socket = new DatagramSocket( port );
                }
                byte[] bufer = new byte[256];
                //Using the ID given at the start, send X and Y position to the server
                String msg = "position:" + ID +":"+ assets[ID].returnPosX() +":"+ assets[ID].returnPosY();
                int msgLength = msg.length();
                bufer = msg.getBytes();
                InetAddress address;
                address = InetAddress.getByName("192.168.1.59");
                DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
                //Send the data
                socket.send( p );
                Log.d(TAG, "data sent");

            } catch (UnknownHostException e2) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with unknown host");
                e2.printStackTrace();
            } catch (SocketException e) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with socket");
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with sending/receiving data");
                e.printStackTrace();
            }

        }

        //Host data will ofcourse be differnet

    }
    Log.d(TAG, "Error with run value");
    return "finished";
}

//If a new player needs to be added to the array
private void newPlayer( int idOfNewPlayer )
{
    gameObject temp = new gameObject(BitmapFactory.decodeResource(contextHolder.getResources(), R.drawable.new_player), 250, 300);
    assets[ idOfNewPlayer ] = temp;
}

//Update all the assets in the game
private void updateAssets()
{

}

//Return methods
public gameObject[] rtnAssets(){ return assets; }
public int rtnID(){ return ID; }
public boolean rtnRdy(){ return rdyForPlay; }
public gameServer rtnServer(){ return server; }
public boolean rtnHost(){ return host; }
//Stop the client server if host
public void stopServers()
{
    if( host == true )
    {
    socket.close();
    server.rtnSocket().close();
    System.gc();
    }
}

public void stopBackground()
{
    socket.close();
    this.cancel( true );
    System.gc();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:42:28.337

当我们请求连接时，我们将知道一个端口号并请求。因此，请尽量保持该端口空闲。这可以通过使用您系统中的其他免费端口来完成。因此，当客户端请求连接时，回复一个端口号并为该客户端分配该端口号。由于逻辑端口众多，我们的系统最多可支持 10k 连接。所以我认为这对许多用户来说不应该是一个问题。一旦建立连接，用户将在分配给它的端口上进行通信，因此其他用户可以轻松访问您的服务器。

# google-drive-api - 尝试将文件创建到 Google Drive 时出现 503（服务不可用）

> ID：15791203
> 
> 赞同：2
> 
> 时间：2013-04-03T15:10:50.500
> 
> 标签：google-drive-api

自昨天以来，我们在拨打此电话时收到了 503 错误：

```
result = session.execute(
  api_method: drive.files.insert,
  body_object: file,
  media: media,
  parameters: {'uploadType' => 'multipart', 'alt' => 'json'}
  ) 
```

我们有 3 组密钥 - 一个用于我们的开发、登台和生产环境。

上面的调用在我们的开发环境中没有问题，但在登台和生产环境中 100% 的时间都失败了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:39:18.147

根据私下分享的要点，问题似乎是用户代理标头。我能够通过将 UA 设置为与那个类似来重现。我无法将其缩小到 UA 的特定问题，只是它不起作用。其他多行字符串可以工作，如果我替换换行符，其他字符看起来也不错。

无论如何，最简单的做法是将 :application_name 设置为与您现在使用的值不同的值。

# c++ - 现在 Visual C++ 动态运行时库是 Windows 操作系统的一部分吗？

> ID：15791204
> 
> 赞同：14
> 
> 时间：2013-04-03T15:10:58.153
> 
> 标签：c++, windows, visual-studio, visual-c++, msvcrt

Visual C++（更具体地说是 2008）的动态运行时库现在是 Windows 操作系统的一部分吗？我注意到，至少在 Windows 8 上，您不再需要将这些随应用程序一起提供或让用户安装 Microsoft 的可再发行包。

这是真的？如果是这样，这适用于哪些 Windows 版本以及 Visual C++ 的哪些版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-23T15:14:45.187

不，它们从未成为 Windows 发行版的一部分。自己部署它们是一项艰巨的要求。

*看起来*确实是这样。从 system32 目录中的 msvcrt.dll 开始，它与 VS2002（VS6 及更早版本）之前的 Visual Studio 版本中的 C++ 运行时 dll 同名。但是，它是 Windows 可执行文件使用的 CRT 的私有副本。并受到 Windows 中的文件系统保护功能的保护，防止旧安装程序破坏操作系统。

它当然经常是偶然的。有*许多*程序需要 Microsoft CRT，因此用户在安装 DLL 之前运行安装程序的可能性不大。很明显，你不能依赖那次常见的事故。

对于 Windows 8，预安装的 Microsoft.VCLibs.110 包与您使用 C++ 编写的应用商店应用所需的包相匹配。但出于与上述相同的原因，Microsoft Store 程序也是使用 VS2012 构建的，就像您的一样。即将到来的 VS2013 会发生什么现在有点混乱，我们很快就会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:06:42.180

在我看来，答案将是：是和否。

*   **是**：较新的 Windows 操作系统通常预装了 VC 运行时（以及较新版本的 .NET 框架）。这是因为微软在向公众（甚至 MSDN 订阅者）发布 VS 之前使用了最新/更新的 Visual Studio。如果不是这样，无论何时安装某些应用程序（旧版应用程序或某些下载的应用程序），安装程序都会安装所需的 VC++ 运行时。另一种方法是通过自动更新。
*   **否**：如果上述规则均不适用。或者，当 VC 运行时附带新的服务包或补丁时。您可能已经使用更新的补丁/SP 开发了您的应用程序，并且必须安装（当然，作为并排安装）。

# c++ - ncurses - TINFO_SETUP_TERM 如何工作？

> ID：15791205
> 
> 赞同：0
> 
> 时间：2013-04-03T15:11:08.383
> 
> 标签：c++, c, gcc, ncurses

我试图了解 ncurses 的工作原理，因为我们要求`initscr()`ncurses 初始化屏幕

在文件 ncurses lib_initscr.c 中定义的函数并尝试通过 newterm 即 lib_newterm.c 文件打开终端，它使用：

```
if ( TINFO_SETUP_TERM(&new_term, name,fileno(_ofp), &errret, FALSE) != ERR) ){
} 
```

当我打开 curses.priv.h 为：

```
#ifdef USE_TERM_DRIVER
    #define TINFO_SETUP_TERM(tpp, name, fd, err, reuse) \
        _nc_setupterm_ex(tpp, name, fd, err, reuse)
#else

    #define TINFO_SETUP_TERM(tpp, name, fd, err, reuse) \
        _nc_setupterm(name, fd, err, reuse)
#endif 
```

在 lib_setup.c 中，函数定义如下：

```
#ifdef USE_TERM_DRIVER
    NCURSES_EXPORT(int) _nc_setupterm(
            NCURSES_CONST char *tname, int Filedes, int *errret, bool reuse){
            }
#endif 
```

我没有找到`_nc_setupterm_ex()`源代码中定义的函数在哪里，如果`USE_TERM_DRIVER`没有定义，那么它如何链接到`_nc_setupterm();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:04:07.750

`TINFO_SETUP_TERM`在（ncurses 5.9 源代码中的第 577 行）中定义，`ncurses/tinfo/lib_setup.c`您显示的宏将函数的名称设置为`_nc_setupterm`或`_nc_setupterm_ex`。

如果`USE_TERM_DRIVER`已定义，则`TINFO_SETUP_TERM`定义为`_nc_setupterm_ex`并`_nc_setupterm`成为`TINFO_SETUP_TERM`( `nc_setupterm_ex`)的包装器

如果您引用的 USE_TERM_DRIVER `is not defined then`TINFO_SETUP_TERM `is defined as`_nc_setupterm `and the definition of`_nc_setupterm` 没有被编译。

# javascript - jQuery .append 多次发生。我该如何防止这种情况？

> ID：15791206
> 
> 赞同：2
> 
> 时间：2013-04-03T15:11:10.423
> 
> 标签：javascript, jquery, function, methods, frontend

我查看了一些类似的帖子，但没有找到我正在寻找的解决方案。我试图`div#dropdownmenu`只追加一次。但是，当我将鼠标悬停在 div 上时，它继续发生。任何帮助将不胜感激。

```
$(function () {
    if ($('div#dropmenu').length == 0) {
        $('#site_nav > ul > a').live('mouseenter', function () {
            $(this).append("<div></div>");
            $('#site_nav > ul > li a div').attr('id', 'dropmenu');
            $('div#dropmenu').html("<ul></ul>");
            $('div#dropmenu ul').html("<li><a>Mission</a></li><li><a>Story</a></li><li><a>Quality</a></li><li><a>Pledge</a></li><li><a>Bio</a></li>");
        });
    } else {
        $('#site_nav > ul > li > a').append("");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:18:37.703

您可以在执行后删除函数处理程序。我给匿名函数起了一个名字以便于参考。

```
$(function () {
    if ($('div#dropmenu').length == 0) {
        $('#site_nav > ul > a').live('mouseenter', function f() {
            $(this).append("<div></div>");
            $('#site_nav > ul > li a div').attr('id', 'dropmenu');
            $('div#dropmenu').html("<ul></ul>");
            $('div#dropmenu ul').html("<li><a>Mission</a></li><li><a>Story</a></li><li><a>Quality</a></li><li><a>Pledge</a></li><li><a>Bio</a></li>");
            $(this).die('mouseenter', f);
        });
    } else {
        $('#site_nav > ul > li > a').append("");
    }
}); 
```

[http://api.jquery.com/die/](http://api.jquery.com/die/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:21:08.917

您还可以使用`.one()`jQuery 方法来确保事件处理程序只执行一次。

```
$(function () {
    if ($('div#dropmenu').length == 0) {
        $('#site_nav > ul > a').one('mouseenter', function () {
            $(this).append("<div></div>");
            $('#site_nav > ul > li a div').attr('id', 'dropmenu');
            $('div#dropmenu').html("<ul></ul>");
            $('div#dropmenu ul').html("<li><a>Mission</a></li><li><a>Story</a></li><li><a>Quality</a></li><li><a>Pledge</a></li><li><a>Bio</a></li>");
        });
    } else {
        $('#site_nav > ul > li > a').append("");
    }
}); 
```

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:25:04.243

您在附加事件侦听器之前进行检查`$('div#dropmenu').length == 0)`，之后，侦听器已附加并将始终执行。您可以在事件侦听器中移动检查。

```
$(function () {
    $('#site_nav > ul > a').live('mouseenter', function () {
        if ($('div#dropmenu').length == 0) {
            $(this).append("<div></div>");
            $('#site_nav > ul > li a div').attr('id', 'dropmenu');
            $('div#dropmenu').html("<ul></ul>");
            $('div#dropmenu ul').html("<li><a>Mission</a></li><li><a>Story</a></li><li><a>Quality</a></li><li><a>Pledge</a></li><li><a>Bio</a></li>");
        } else {
            $('#site_nav > ul > li > a').append("");
        }
    });
}); 
```

# java - 原始类型的 Java 迭代器

> ID：15791210
> 
> 赞同：9
> 
> 时间：2013-04-03T15:11:16.550
> 
> 标签：java, iterator, primitive, private-members, autoboxing

我有以下形式的 Java 类：

```
class Example {

  private byte[][] data;

  public Example(int s) { data = new byte[s][s]; }

  public byte getter(int x, int y)         { return byte[x][y]; }
  public void setter(int x, int y, byte z) { byte[x][y] = z;    }
} 
```

我希望能够使用这样的迭代器从外部迭代私有数据：

`for(byte b : Example) { ;/* do stuff */ }`

我试图实现一个私有 Iterator 类，但我遇到了问题：

```
private class ExampleIterator implements Iterator {
  private int curr_x;
  private int curr_y;

  public ExampleIterator() { curr_x=0; curr_y=-1; }
  public boolean hasNext() { 
    return curr_x != field.length-1
        && curr_y != field.length-1; //is not the last cell?
  }
  public byte next() { // <-- Error is here: 
                       // Wants to change return type to Object
                       // Won't compile!
    if(curr_y=field.length) { ++curr_x; curr_y=0; }
    return field[curr_x][curr_y];
  }
  public void remove() { ; } //does nothing
} 
```

我将如何为原始类型（不是泛型）实现*外部迭代器？*这在Java中可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T15:13:24.640

迭代器不能产生原始类型的值。但是，它可以产生包装类型的值[`Byte`](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html)。这些值可以[自动拆箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)（`byte`只要它们不是`null`）。

```
private class ExampleIterator implements Iterator<Byte> {
  public boolean hasNext() { ... }
  public Byte next() { ... }
} 
```

然后你可以像这样使用它：

```
for (byte b : example) { ... } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-28T16:18:08.493

Java 8 引入了[原始迭代器](https://docs.oracle.com/javase/8/docs/api/java/util/PrimitiveIterator.html)，允许您在对 int、long 和 double 集合进行迭代期间避免装箱/拆箱。

您可以通过类型安全地实现 generic来创建自己`PrimitiveIterator`的。也将实施。两者都非常简单。`byte``PrimitiveIterator<Byte,ByteConsumer>``ByteConsumer`

`PrimitiveIterator.ofByte`为什么jdk里面没有？可能是因为机器字长，通常不小于 int。或者字节迭代器最好由流等完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:15:03.953

您不能将泛型与基元一起使用，因为泛型需要该类型的类。

您可以做的是遍历包装器类型（整数、字节、布尔值等）...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:14:45.610

实现[Iterable](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)，并返回一个 Byte 对象而不是一个字节原语：

```
class Example implements Iterable<Byte> {

..

    public Iterator<Byte> iterator() {
        return new MyIterator();
    }

    private class MyIterator implements Iterator<Byte> {
        public Byte next() {...}
        ....
    }
} 
```

实现 Iterable 而不是 Iterator 允许您使用 for-each 循环直接循环对象项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:19:25.527

如果你想让你的迭代器实现 java.util.Iterator 那么 next() 将不得不返回 Byte

```
class ByteArrayIterator implements Iterator<Byte> {
    final byte[] a; 
    int i = 0;
    ByteArrayIterator(byte[] a) {
        this.a = a; 
    }

    public boolean hasNext() {
        return i < a.length;
    }

    public Byte next() {
        if (i == a.length) {
            throw new NoSuchElementException();
        }
        return a[i++];
    }

    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

remove 也可以实现。如果您不需要它实现迭代器，那么我们可以更改 next() 以返回字节

```
 class ByteArrayIterator {
...
    public byte next() {
            if (i == a.length) {
                throw new NoSuchElementException();
            }
            return a[i++];
        } 
```

# jquery - 使用 ajax 将视图模型发布到控制器错误

> ID：15791212
> 
> 赞同：0
> 
> 时间：2013-04-03T15:11:19.583
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin

我正在尝试使用淘汰模板绑定来绑定问题列表。我成功获取数据和模板绑定。但是在下一个按钮单击事件上，我试图将视图模型发送到控制器，但它在控制器中给出了空值

我的jquery代码是这样的

```
 $(document).ready(function () {
          $.ajax({
               type: "GET",
                contentType: "application/json",
                url: "/Render/LoadSurveyQuestions?sg=" + getUrlVars()["g"] + "&stg=" +      getUrlVars()["sig"],
                success: function (result) {
                var lstQns = JSON.parse(result);
                viewmodel = ko.mapping.fromJS(lstQns);
                ko.applyBindings(viewmodel, document.getElementById("tblQuestions"));
             }
           });

        $("#btnNext").click(function () { 
              $.ajax({
                     async: true,
                     cache: false,
                     type: 'post',
                     url: "/Render/SaveSurveyQuestionOptions", 
                     data: ko.toJSON(viewmodel),
                     success: function (result) {
                        }
                      }); 
                 });
                });

             function getUrlVars() {
                     var vars = {};
                     var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                        vars[key] = value;
                         });
                  return vars;
                         } 
```

控制器是这样的

```
 [HttpPost]
        public void SaveSurveyQuestionOptions(List<Question> listOfQuestions)
         {
             if (listOfQuestions.Count > 0)
             {
               Question objQuestion = new Question();
                osurveymanager.InsertQuestionAnswers(objQuestion); 

              }
         }  

Here i am getting listOfQuestions as null value 
```

请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:43:51.100

问题是您从客户端发送 JSON 字符串，

```
$("#btnNext").click(function () { 
    $.ajax({
     async: true,
     cache: false,
     type: 'post',
     url: "/Render/SaveSurveyQuestionOptions", 
     data: ko.toJSON(viewmodel),   //toJSON converts your viewModel to JSON string
     success: function (result) {
              }
 }); 
```

因此，您应该在服务器端的字符串变量中接受它，因此您的控制器操作应该是：

```
 [HttpPost]
    public void SaveSurveyQuestionOptions(string listOfQuestions)
    {
         var Questions = JsonConvert.DeserializeObject(listOfQuestions);
         //Now here Questions varibale contains the list Of question passed.. 
         //from the client side
    } 
```

试试这个，让我知道它是否有帮助！

# haskell - 在haskell中剖析java类文件

> ID：15791213
> 
> 赞同：2
> 
> 时间：2013-04-03T15:11:20.157
> 
> 标签：haskell, jvm

我今年早些时候刚刚开始学习 Haskell 语言，并且正在研究一个输入 java 类文件（即 FileName1.class）并剖析该文件以打印出以下内容的项目：

*   类文件定义的类名
*   类的方法数量、名称和类型

我做了一些研究，发现使用 JVM 可以做到这一点，但在这个过程中有点迷失，有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:14:41.387

您需要为 Java 类格式编写解析器。

幸运的是，已经有[图书馆可以做到这一点。](http://hackage.haskell.org/package/language-java-classfile)

解析文件，检查生成的 AST，打印所需信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:48:07.430

试试[秒差距](http://research.microsoft.com/en-us/um/people/daan/download/parsec/parsec.html)。

[http://www.haskell.org/haskellwiki/Parsec](http://www.haskell.org/haskellwiki/Parsec)

这是一个非常好的入门教程：[http ://www.haskell.org/haskellwiki/Parsing_expressions_and_statements](http://www.haskell.org/haskellwiki/Parsing_expressions_and_statements)

也来自真实世界的 Haskell：[http ://book.realworldhaskell.org/read/using-parsec.html](http://book.realworldhaskell.org/read/using-parsec.html)

Parsec 甚至包含一个默认的 Java 语言定义。 [http://hackage.haskell.org/packages/archive/parsec/3.0.0/doc/html/src/Text-Parsec-Language.html#javaStyle](http://hackage.haskell.org/packages/archive/parsec/3.0.0/doc/html/src/Text-Parsec-Language.html#javaStyle)

此外，在检查您的 AST 时，您可能希望使用 Reader monad 来防止您的类型签名被过度污染。

# android - Android - PreferenceActivity - 更改 CheckBoxPreference 的摘要文本的颜色

> ID：15791216
> 
> 赞同：13
> 
> 时间：2013-04-03T15:11:25.380
> 
> 标签：android, android-preferences

我正在尝试更改 CheckBoxPreference 的摘要文本颜色。我通过指定主题更改了标题的文本颜色，但它似乎没有注册到摘要部分。这是我的 theme.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="settings_theme" parent="android:Theme.Light">
        <item name="android:textColor">@color/light_gray</item>
    </style>
</resources> 
```

我在我的设置活动的 onCreate 方法中调用它：

```
setTheme(R.style.settings_theme); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-03T15:16:54.053

将此添加到主题中的 style.xml：

```
<item name="android:textColorSecondary">@color/light_gray</item> 
```

# c++ - 使用 CMake 构建 Google Test

> ID：15791218
> 
> 赞同：0
> 
> 时间：2013-04-03T15:11:28.263
> 
> 标签：c++, cmake, googletest

我正在尝试使用 CMake 来构建 Google Test。正如 Google Test 的 README 中提到的，我发出了以下命令：

```
 mkdir mybuild       # Create a directory to hold the build output.
  cd mybuild
  cmake D:\gtest-1.6.0 # (in the README this was set as:cmake ${GTEST_DIR}, but since on my machine D:\gtest-1.6.0 is where I have downloaded gtest, I have used that in command prompt. 
```

这是我得到的错误： ![在此处输入图像描述](https://i.stack.imgur.com/fBWkh.png)

有什么帮助吗？任何帮助将不胜感激，因为我坚持下去并且无法继续前进......谢谢。附言。我的机器上安装了 Visual Studio 10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:17:15.287

如果将 Visual c++ 编译器与 cmake 一起使用，则必须从 Visual c++ 命令提示符启动它。否则 cmake 将找不到您的编译器。

# javascript - 将 THIS 与 jquery 可排序序列化一起使用

> ID：15791225
> 
> 赞同：0
> 
> 时间：2013-04-03T15:11:46.477
> 
> 标签：javascript, jquery, serialization, jquery-ui-sortable

我有这个代码

```
$('.contentlist_tosort').sortable({
    update: function(event, ui) {
        $.post("ajax.php", { pages: $('.contentlist_tosort').sortable('serialize') } );
    }
}); 
```

但我希望它是通用的，因为我使用类来调用可排序的，并且不想将 id 放在列表中，因为我的数量未知。

我想要这样的东西：

```
$('.contentlist_tosort').sortable({
    update: function(event, ui) {
        $.post("ajax.php", { pages: $(this).sortable('serialize') } );
    }
}); 
```

但这给我留下了“未定义”，所以显然不是这样......

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:14:02.777

使用`ui.item`而不是`this`.

[请参阅 API 文档](http://api.jqueryui.com/sortable/#event-update)

例如：

```
$('.contentlist_tosort').sortable({
    update: function(event, ui) {
        var sortable = $(ui.item).parent('ul');
        $.post("ajax.php", { pages: sortable.sortable('serialize') } );
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:17:46.957

事件目标是 UL ：

```
$('.contentlist_tosort').sortable({
    update: function(event, ui) {
        $.post("ajax.php", { pages: $(event.target).sortable('serialize') } );
    }
}); 
```

# flash - XML to SQLite 不能正常工作

> ID：15791231
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:05.547
> 
> 标签：flash, air

嗨，我是 Flash builder 的新手，对编程非常生疏，我正在尝试连接到嵌入式 XML 文件并能够使用 SQLite 读取它，以便创建搜索栏过滤信息等

好吧，这是我的 DAO

```
package model
{
    import flash.data.SQLConnection;
    import flash.data.SQLStatement;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;

    import model.Loans;

    import mx.collections.ArrayCollection;

    public class LoansDAO
    {
        private var _sqlConnection:SQLConnection;

        public function get sqlConnection():SQLConnection
        {
            if (_sqlConnection)
                return _sqlConnection;
            openDatabase(File.documentsDirectory.resolvePath("EZDemo.db"));
            return _sqlConnection;
        }

        public function findByName(searchKey:String):ArrayCollection
        {
             var sql:String = "SELECT * FROM loans WHERE loan || ' ' || companyName LIKE '%"+searchKey+"%' ORDER BY loan";
             var stmt:SQLStatement = new SQLStatement();
             stmt.sqlConnection = sqlConnection;
             stmt.text = sql;
             stmt.execute();
             var result:Array = stmt.getResult().data;
             if (result)
             {
                 var list:ArrayCollection = new ArrayCollection();
                 for (var i:int=0; i<result.length; i++)
                 {
                     list.addItem(processRow(result[i]));   
                 }
                 return list;
             }
             else
             {
                 return null;
             }
        }

        public function create(loans:Loans):void
        {
            trace(loans.loan);
            var sql:String = 
                "INSERT INTO loans (accountManager, loanManagerEMail, status, loan, companyName, dateCreated, etShipping, rfmApproval, approvalBU, approvalRFM, placementTerm, listPrice, isa, vSapOrderNum, isr, dueDate, shipDate, carrier, tracking) " +
                "VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = loans.loan;
            stmt.parameters[1] = loans.companyName;
            stmt.parameters[2] = loans.dateCreated;
            stmt.parameters[3] = loans.etShipping;
            stmt.parameters[4] = loans.rfmApproval;
            stmt.parameters[5] = loans.approvalBU;
            stmt.parameters[6] = loans.approvalRFM;
            stmt.parameters[7] = loans.vSapOrderNum;
            stmt.parameters[8] = loans.placementTerm;
            stmt.parameters[9] = loans.status;
            stmt.parameters[11] = loans.shipDate;
            stmt.parameters[12] = loans.carrier;
            stmt.parameters[13] = loans.tracking;
            stmt.parameters[14] = loans.listPrice;
            stmt.parameters[15] = loans.dueDate;
            stmt.parameters[16] = loans.loanManagerEMail;
            stmt.parameters[17] = loans.accountManager;
            stmt.parameters[18] = loans.isa;
            stmt.parameters[19] = loans.isr;
            stmt.execute();
            loans.loaded = true;
        }

        protected function processRow(o:Object):Loans
        {
            var loans:Loans = new Loans();
            loans.loan = o.loan == null ? "" : o.loan;
            loans.companyName = o.companyName == null ? "" : o.companyName;
            loans.dateCreated = o.dateCreated == null ? "" : o.dateCreated;
            loans.etShipping = o.etShipping == null ? "" : o.etShipping;
            loans.rfmApproval = o.rfmApproval == null ? "" : o.rfmApproval;
            loans.approvalBU = o.approvalBU == null ? "" : o.approvalBU;
            loans.approvalRFM = o.approvalRFM == null ? "" : o.approvalRFM;
            loans.vSapOrderNum = o.vSapOrderNum == null ? "" : o.vSapOrderNum;
            loans.placementTerm = o.placementTerm == null ? "" : o.placementTerm;
            loans.status = o.status == null ? "" : o.status;
            loans.shipDate = o.shipDate == null ? "" : o.shipDate;
            loans.carrier = o.carrier == null ? "" : o.carrier;
            loans.tracking = o.tracking == null ? "" : o.tracking;
            loans.listPrice= o.listPrice == null ? "" : o.listPrice;
            loans.dueDate = o.dueDate == null ? "" : o.dueDate;
            loans.loanManagerEMail = o.loanManagerEMail == null ? "" : o.loanManagerEMail;
            loans.accountManager = o.accountManager == null ? "" : o.accountManager;
            loans.isa = o.isa == null ? "" : o.isa;
            loans.isr = o.isr == null ? "" : o.isr;

            loans.loaded = true;
            return loans;
        }

        public function openDatabase(file:File):void
        {
            var newDB:Boolean = true;
            if (file.exists)
                newDB = false;
            _sqlConnection = new SQLConnection();
            _sqlConnection.open(file);
            if (newDB)
            {
                createDatabase();
                populateDatabase();
            }
        }

        protected function createDatabase():void
        {
            var sql:String = 
                "CREATE TABLE IF NOT EXISTS loans ( "+
                "loan INTEGER, " +
                "companyName VARCHAR(30), " +
                "dateCreated VARCHAR(20), " +
                "etShipping VARCHAR(20), " +
                "rfmApproval VARCHAR(20), " + 
                "approvalBU VARCHAR(3), " +
                "approvalRFM VARCHAR(3), " +
                "vSapOrderNum VARCHAR(15), " + 
                "placementTerm VARCHAR(25), " +
                "status VARCHAR(21), " +
                "shipDate VARCHAR(20), " +
                "carrier VARCHAR(20), " +
                "tracking VARCHAR(25), " +
                "listPrice VARCHAR(25), " +
                "dueDate VARCHAR(30), " +
                "loanManagerEMail VARCHAR(30), " +
                "accountManager VARCHAR(40), " +
                "isa VARCHAR(40), " +
                "isr VARCHAR(40))";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();         
        }

        protected function populateDatabase():void
        {
            var file:File = File.applicationDirectory.resolvePath("assets/loans.xml");
            var stream:FileStream = new FileStream();
            stream.open(file, FileMode.READ);
            var xml:XML = XML(stream.readUTFBytes(stream.bytesAvailable));
            stream.close();
            for each (var emp:XML in xml.loans)
            {
                var loans:Loans = new Loans();
                loans.loan = emp.loan;
                loans.companyName = emp.companyName;
                loans.dateCreated = emp.dateCreated;
                loans.etShipping = emp.etShipping;
                loans.rfmApproval = emp.rfmApproval;
                loans.approvalBU = emp.approvalBU;
                loans.approvalRFM = emp.approvalRFM;
                loans.vSapOrderNum = emp.vSapOrderNum;
                loans.placementTerm = emp.placementTerm;
                loans.status = emp.status;
                loans.shipDate = emp.shipDate;
                loans.carrier = emp.carrier;
                loans.tracking = emp.tracking;
                loans.listPrice = emp.listPrice;
                loans.dueDate = emp.dueDate;
                loans.loanManagerEMail = emp.loanManagerEMail;
                loans.accountManager = emp.accountManager;
                loans.isa = emp.isa;
                loans.isr = emp.isr;

                create(loans);
            }
        }

    }
} 
```

不知道发生了什么，这没有返回任何东西

如果您需要其他东西，请告诉我，并提前感谢我能得到的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:36:43.030

您发出的请求`SQLStatement`是异步的（默认情况下，Flash / AIR 中的大多数 I/O 或网络操作都是如此）。您需要为`"result"`或`"fail"`事件添加处理程序（请参阅此处：[http](http://help.adobe.com/en_US/air/reference/html/flash/data/SQLStatement.html#event:result) ://help.adobe.com/en_US/air/reference/html/flash/data/SQLStatement.html#event:result ），并从处理程序访问数据.

# django - Django Admin - django-smart-selects 或使用外键进行多对多动态过滤

> ID：15791235
> 
> 赞同：2
> 
> 时间：2013-04-03T15:12:17.740
> 
> 标签：django, django-models, django-admin, many-to-many, foreign-key-relationship

想请教如何在Admin中实现动态过滤。我知道如何在管理员中使用 django-smart-selects 但我猜它只适用于 FK 而不是多对多模型。

我想实现，当我在管理员中创建一个 ART 并选择类别时，它只会过滤属于该类别的艺术家，另外，当我在创建艺术时选择艺术家时，它会过滤属于该艺术家的那些收藏。

我可以让 Artists & Collections 与 django-smart-selects 一起使用，但艺术家和类别不是因为它们是多对多的。

请帮忙。谢谢

模型.py

```
class Category(models.Model):
    title = models.CharField(max_length=200)
    title_url = models.SlugField(max_length=200)

    def __unicode__(self):
        return self.title

class Artist(models.Model):
    category = models.ManyToManyField(Category)
    title = models.CharField(max_length=200)
    title_url = models.SlugField(max_length=200)

    def __unicode__(self):
        return self.title

class Collection(models.Model):
    artist = models.ForeignKey(Artist)
    title = models.CharField(max_length=200)
    title_url = models.SlugField(max_length=200)

    def __unicode__(self):
        return self.title

class Art(models.Model):
    category = models.ForeignKey(Category)
    artist = models.ForeignKey(Artist)
    collection = models.ForeignKey(Collection)
    title = models.CharField(max_length=200)
    title_url = models.SlugField(max_length=200)

    def __unicode__(self):
        return self.title 
```

# php - PHP和JS之间的通信

> ID：15791237
> 
> 赞同：-2
> 
> 时间：2013-04-03T15:12:18.583
> 
> 标签：php, javascript, jquery, sockets

我有一个导入朋友按钮，单击该按钮时会从 Facebook 加载朋友，这是通过对`php`文件的发布请求完成的。

现在我将如何创建一个实时进度条？

我知道如何制作进度条本身，只是不是 100% 确定如何以`php`简单的方式在页面之间进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:57:49.473

将所有朋友加载到 JavaScript 数组中。

```
function import_friends(friend_array)
{
    var response=0;
    var xmlhttp;
    if(window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            response += xmlhttp.responseText;
            update_the_progress_bar(response,friend_array.length);
        }
    }
    for(i=0; i<friend_array.length; i++)
    {
     xmlhttp.open("post","url",true);
     xmlhttp.send(friend_array[i]);
    }
} 
```

您将传递给朋友的 URL 的响应应该是“1”表示成功。然后在更新函数中只是简单的划分来更新条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:12:50.810

在这种情况下，您应该考虑服务器发送的事件。它不需要特殊的服务器。它唯一需要的是一个可以服务 HTTP 请求的服务器，这是 Web 服务器所必需的。

数据将在长期保持的 HTTP 连接中发送。植入 PHP 非常容易。您所需要的只是一个以特定格式回显数据并刷新数据的循环。

服务器发送的事件是服务器和客户端之间的一种单向通信，因此它在您的情况下很有用。

为了简化开发，我为服务器发送的事件创建了一个 PHP 库。可以考虑使用：github.com/licson0729/libSSE-php

希望我的信息可以帮助到你。

# java - Java，将参数从一个类传递到另一类

> ID：15791238
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:20.097
> 
> 标签：java, class, parameters

我想将所有验证方法（电话号码验证、数字验证）保留在一个单独的类中，并让其他类共同访问验证方法。我该怎么做？有人可以帮助我吗？

```
class Validation {

  public static boolean validateQty(String txt) {

        String regx = "^0([1-9]){2}([0-9]){7}$";
        Pattern compile = Pattern.compile(regx, Pattern.CASE_INSENSITIVE);
        Matcher matcher = compile.matcher(txt);
        return matcher.find();
  }

  public static boolean validateLetters(String txt) {

        String regx = "[a-zA-Z]+\\.?";
        Pattern pattern = Pattern.compile(regx, Pattern.CASE_INSENSITIVE);
        Matcher matcher = pattern.matcher(txt);
        return matcher.find();
  } 
```

}

```
class ItemDetails {

  private void addItem() {
        boolean b = validateLetters(txtItemName.getText()); // I want to pass txtItemName value to Class Validation's validateLetters()
        boolean c = validateQty(txtQty.getText());
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:14:11.900

由于这些是静态方法，您可以通过为类名添加前缀来调用它们：

```
 boolean b = Validation.validateLetters(txtItemName.getText()); 
    boolean c = Validation.validateQty(txtQty.getText()); 
```

您可能还会发现将整个项目传递给单个 validate() 方法很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:13:57.183

由于这些是静态方法，您可以像这样访问

```
boolean b = Validation .validateLetters(txtItemName.getText()); 
        boolean c = Validation .validateQty(txtQty.getText()); 
```

或创建一个验证对象

```
Validation v=new Validation ();

boolean b = v .validateLetters(txtItemName.getText()); 
        boolean c =v .validateQty(txtQty.getText()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:16:46.617

```
boolean b = Validation .validateLetters(txtItemName.getText()); 
boolean c = Validation .validateQty(txtQty.getText()); 
```

由于您在 Validation 类方法 validateLetters 和 validateQty 中的方法是静态的，因此您可以这样调用它。否则，您必须先创建验证实例。像

```
Validation v = new Validation();
boolean b = v.validateLetters(txtItemName.getText());
boolean c = v.validateQty(txtQty.getText()); 
```

# css - Firefox CSS 渲染内联样式调用 :not & :not

> ID：15791243
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:27.820
> 
> 标签：css, firefox

我有一个通过 Ajax 加载迷你小部件的页面，除了一个小问题外，一切正常。在其中一个小部件上，（不确定这是否重要，但是）在我的元素之前的样式标签中调用样式。FF 经历了一切，但完全死了一条线。这适用于 webkit，据我所知遵循 CSS3 标准，但 FF 不喜欢！

该行：

```
#Emails .list-row-header td:not(:nth-child(1)):not(:nth-child(2):hover { 
```

关于另一种编写方式的想法，所以我不必使用 jQuery 吗？还是一堆类名（这是样式化动态元素）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:14:43.247

您在`)`第二个否定伪类上缺少右括号

改成：

`#Emails .list-row-header td:not(:nth-child(1)):not(:nth-child(2)):hover`

（假设它不是错字）

# sql - 如何在 SQL Server 2008 中添加小数部分

> ID：15791245
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:30.437
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有一个查询，它产生结果字段价格`23456,34567,3455.66`等。但我想将其显示为`23456.00,34567.00,3455.66`.

我该怎么做？

我的查询是

```
(isnull(sum(TE.Quantity),0) *  isnull(MAX(TE.FullPrice),0) ) As Price, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:18:16.297

将其转换为`decimal`具有两位数精度的 a：

```
cast(...your calculation here... as decimal(10,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:18:24.167

我建议你做一个明确的演员：

```
 select cast(coalesce(sum(TE.Quantity) * MAX(TE.FullPrice),0) as decimal(18, 2)) as Price 
```

或者，如果您愿意`isnull`：

```
select cast(isnull(sum(TE.Quantity) * MAX(TE.FullPrice),0) as decimal(18, 2)) as Price 
```

您可以在乘法之后进行 NULL 比较，因为`0`无论如何您都想要。

# perl - 两个值的时区重置，只需要一个

> ID：15791247
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:32.360
> 
> 标签：perl, datetime

set_time_zone() 是导致问题

```
$messagedate = \Datetime variable\
$messagedate_tz = $messagedate;

$messagedate_tz->set_time_zone('UTC');
$messagedate_tz->set_time_zone('America/Goose_Bay'); 
```

当我执行这个。messagedate 的时间也重置为 America/Goose_Bay。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:53:32.853

假设`\Datetime variable\`您指的是 DateTime 类（或任何其他类，就此而言）的对象，您的问题是`$messagedate_tz = $messagedate;`创建对同一对象的第二个引用，它不会创建新对象。

您应该使用`$messagedate_tz = $messagedate->clone;`（同样，假设它是一个 DateTime 对象；其他类可能有不同的方法名称来创建副本）来创建一个与原始对象相同的新对象，然后可以在不影响原始对象的情况下对其进行修改。

# c# - 将 IEnumerable 转换为表达式树函数中的数组

> ID：15791249
> 
> 赞同：1
> 
> 时间：2013-04-03T15:12:42.080
> 
> 标签：c#, .net-3.5, lambda, expression-trees, func

我有一个具有以下结构的表达式。我从 a 得到它[`Expression.ArrayIndex`](http://msdn.microsoft.com/en-us/library/bb352913.aspx)，所以我不能改变它：

```
Expression<Func<TModel[], TProperty>> expression 
```

之后，我将此表达式与具有此结构的父表达式结合起来：

```
Expression<Func<TDataSource, IEnumerable<TModel>>> dataSourceExpression 
```

所以结果表达式应该是：

```
Expression<Func<TDataSource, TProperty>> 
```

请注意，在组合它们后，我将它们`TDataSource`用作输入并得到`TProperty`结果。但是我不能将它们组合起来，因为`TModel[]`不能转换为`IEnumerable<TModel>`.

组合是这样完成的：

```
Expression<Func<TDataSource, TProperty>> outputWithoutInline = dataSourceExpression.Combine(expression, true);

public static class ExpressionUtils
{
    public static Expression<Func<T1, T3>> Combine<T1, T2, T3>(
        this Expression<Func<T1, T2>> outer, Expression<Func<T2, T3>> inner, bool inline)
    {
        var invoke = Expression.Invoke(inner, outer.Body);
        Expression body = inline ? new ExpressionRewriter().AutoInline(invoke) : invoke;
        return Expression.Lambda<Func<T1, T3>>(body, outer.Parameters);
    }
} 
```

*更多信息`ExpressionRewriter`：[https ://stackoverflow.com/a/1720642/1587864](https://stackoverflow.com/a/1720642/1587864)

我想继续使用`IEnumerable`，我真的需要`Array`在另一个表达式中使用。在合并它们之前，我有什么办法可以以某种方式对这些表达式进行转换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:23:14.800

您可以使用 LINQ[`Enumerable.ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)作为中间表达式。

```
Expression<Func<IEnumerable<TModel>, TModel[]>> toArray = x => x.ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:31:24.510

假设你有：

```
Expression<Func<TDataSource, IEnumerable<TModel>>> first = ...
Expression<Func<TModel[], TProperty>> second = ... 
```

为什么你不能这样做：

```
Expression<Func<IEnumerable<TModel>, TModel[]>> converter = seq => seq.ToArray();

var result = first.Combine(converter, true).Combine(second, true); 
```

如果可能的话，你可以尝试让转换器变得更可爱一点：

```
Expression<Func<IEnumerable<TModel>, TModel[]>> converter 
              = seq => (seq as TModel[]) ?? seq.ToArray(); 
```

# mysql - 是否可以在具有 mysql 版本 4.xx 的服务器上安装 joomla 2.5？

> ID：15791251
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:44.800
> 
> 标签：mysql, joomla2.5

我想这是一个愚蠢的问题，但我不得不问。

我在一家 IT 商店工作，并且经常使用 Joomla，所以我的一个朋友尝试自己用 joomla 2.5 做一个网站，并将钱花在了一台没有 joomla2.5 所需 MySQL 版本的服务器上然后他来问我他现在能做什么，我告诉他租另一台服务器，但他问我是否可以对数据库做任何事情，使其在 MySQL 4.xx 的服务器上仍然适用于 joomla 2.5

我猜他所能做的就是拥有另一台带有数据库的服务器并且他的站点与之连接（可能会降低站点性能），或者他租用另一台具有所有要求的服务器。

但我不完全确定是否有某种忍者技巧使他能够将 joomla2.5 与 MySQL 4.xx 服务器一起使用。

提前致谢; 费尔南多·安德拉德

# jquery - 用 jQuery 读取 XML - 我只想要第一个条目/节点

> ID：15791255
> 
> 赞同：0
> 
> 时间：2013-04-03T15:12:54.960
> 
> 标签：jquery, xml

在我的 XML 文件中，我有多个条目`satz`：

```
var aufz = $(this).find('satz').text() 
```

我怎样才能得到第一个条目/节点？我试过了：

```
var aufz = $(this).find('satz[1]').text() 
```

但它不会工作。谢谢你的帮助！

```
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "saetze.xml",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('kategorie[id="aufzaehlung"]').each(function() {
                var aufz = $(this).find('satz').text()
                $('<p class="aufz"></p>').html(aufz).appendTo('.aufz');
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:24:56.543

未经测试，但我会尝试：

```
$(this).find('satz').eq(0).text(); 
```

# java - 如何获取和使用eclipse项目中文件夹的路径？

> ID：15791257
> 
> 赞同：0
> 
> 时间：2013-04-03T15:13:08.850
> 
> 标签：java, eclipse, serialization, directory

我在我的 Eclipse 项目 Proj 中创建了一个新文件夹 Fold。如何获取 Fold 相对于 Proj 的路径？此文件夹将用作存储序列化对象的地方。我可以使用这个相对路径序列化和反序列化我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:17:41.747

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
URL url = classLoader.getResource("path/folder"); 
```

或者

```
URL url = getClass().getResource("path/folder"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:45:01.893

此代码获取路径 -

```
String absolutePath = new File(".").getAbsolutePath();
System.out.println(absolutePath);// Shows you the path of your Project Folder
int last = absolutePath.length()-1;
absolutePath = absolutePath.substring(0, last);//Remove the dot at the end of path
System.out.println(absolutePath);
String filePath =  "MyFolderInsideEclipseProject\\file.txt";//You know this
System.out.println(absolutePath + filePath);//Get the full path. 
```

# java - 如何将参数传递给静态初始化块

> ID：15791259
> 
> 赞同：6
> 
> 时间：2013-04-03T15:13:11.607
> 
> 标签：java, oop, file-io, singleton, utility-method

我想要做的是将文件（使用 Apache poi 的 excel 文件）中的键/值对加载到将用作查找表的静态映射中。一旦加载表将不会改变。

```
public final class LookupTable
{  
   private final static Map<String, String> map;  
   static {
     map = new HashMap<String, String>();
     // should do initialization here
     // InputStream is = new FileInputStream(new File("pathToFile"));
     // not sure how to pass pathToFile without hardcoding it?
   }

   private LookupTable() {
   }

  public static void loadTable(InputStream is) {
    // read table from file
    // load it into map
    map.put("regex", "value");
  }

  public static String getValue(String key) {
    return map.get(key);
  }
} 
```

理想情况下，我想在静态初始化块中加载地图，但是如何在不对其进行硬编码的情况下传递流呢？我看到使用 loadTable 静态方法的问题是在调用其他静态方法之前可能不会调用它。

```
// LookupTable.loadTable(stream);  
LookupTable.getValue("regex"); // null since map was never populated. 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:21:41.307

您使用的任何东西都必须在启动时可以访问。据我所知，您的选择是：

1.  **硬编码路径。**这很糟糕，原因很明显。
2.  **静态变量或静态方法。**这提出了一个先有鸡还是先有蛋的问题。最终它会被硬编码，但至少您可以使用`static`方法进行搜索。
3.  **使用变量，Java 或环境。**所以，你会使用一些东西`System.getProperty("filename", "/default/filename")`。更好，因为它至少可以`-D`在 JVM 启动时使用环境或参数进行定制。
4.  **使用`ClassLoader` `getResource*`方法。**这可能是正确的答案。具体来说，您可能希望[`getResourceAsStream()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)在当前线程的 context 上使用该方法`ClassLoader` [`Thread.currentThread().getContextClassLoader()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getContextClassLoader%28%29)。（所以，`Thread.currentThread().getContextClassLoader().getResourceAsStream("filename")`总的来说。）然后`ClassLoader`会为你找到你的资源（只要你把它放在你的`CLASSPATH`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:16:20.717

是的，有一个更好的方法，在你必须使用它之前使用工厂设计模式来初始化对象：

[http://www.oodesign.com/factory-pattern.html](http://www.oodesign.com/factory-pattern.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:17:43.153

您不能将信息传递到静态初始化块中——它们应该独立工作。由于您计划通过的流需要在程序开始执行之前知道，因此您`LookupTable`应该也可以找到它。例如，这可能是某种为您提供流的配置实用程序。然后你可以这样写你的初始化程序：

```
static {
    InputStream exelStream = MyConfigUtil.getExcelStreamForLookup();
    loadTable(exelStream);
} 
```

据推测，系统中有一个类可以从已知的源获取您的 Excel 流。源不需要硬编码：它可以从配置文件中读取位置，或者从服务器上预定义的网络位置接收数据。在所有情况下，获取 Excel 流的过程都必须在某个地方“触底”，因为系统中的某些东西需要能够在没有其他参数的情况下找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:29:06.263

这不是直接回答您的问题，但我不明白为什么`map`必须是静态的。您可以更改`map`为非静态并将构造函数更改为`public LookupTable(File file) {...fill map...}`. 如果您有不同的 excel 文件，您甚至可以拥有该类的许多实例；现在可能不是这种情况，但它会“面向未来”您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:16:32.820

这可能是使用延迟加载地图的情况。

但是您需要在第一次`inputFileName`调用之前设置。`getValue()`这将在应用程序的初始化代码中完成。（或者你可以有一个静态方法来设置它。）

这指出了延迟加载的优势。`getValue()`在您第一次调用之前，您不必提供可用的文件名。使用静态初始化程序，您必须将文件名存储在类之外的某个位置，以便在类加载时（但在初始化静态字段之后）可以使用它来加载数据。

```
 public static String inputFileName = null;

 public static String getValue(String key) {
    if (map == null) {
        map = = new HashMap<String, String>();
        // open the file using 'inputFileName'
        loadTable(InputStream is);
    }
    return map.get(key);
  } 
```

如果您的代码是多线程的，请告诉我，我会评论同步问题。

**备用**

您还可以使用 Spring 来注入地图并在其他一些类中构建它——`MapBuilder`例如。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T15:23:08.723

尝试使用 System.getProperty() 并在命令行中使用 -D 传递参数。

```
static String prop;

static {
    prop = System.getProperty("java.home");
}

public static void main(String... args) {

    System.out.println(prop);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T16:11:02.427

如果适合您的情况，我会建议使用[单例枚举方法。](http://my.safaribooksonline.com/book/programming/java/9780137150021/creating-and-destroying-objects/ch02lev1sec3)

```
public enum LookupTable {

    INSTANCE(FileManager.getFileName());

    LookupTable(String fileName){
        props = new HashMap<String,String>();
        //Read from excel and fill the hashmap
    }

    private final Map<String, String> props;

    public String getMapValue(String key){
        return props.get(key);
    }   
} 
```

可以调用哪个

```
LookupTable.INSTANCE.getMapValue("mykey"); 
```

这将按顺序调用这些方法

*   从文件管理器类中获取文件名，该类根据您的需要进行参数化
*   调用构造函数（它是私有的）并从 excel 文件中加载属性
*   getMapValue 获取键并返回

后续调用 LookupTable.INSTANCE.getMapValue("mysecondkey") 只会调用 getMapValue，因为 INSTANCE 是预先初始化的。

# wpf - 无法在 Windows Store App 中设置 ScrollUnit 或 ContentScroll

> ID：15791261
> 
> 赞同：1
> 
> 时间：2013-04-03T15:13:21.197
> 
> 标签：wpf, xaml, windows-runtime, windows-store-apps, winrt-xaml

我有一个水平方向的 VirtualizingStackPanel。我正在寻找一种使 ScrollViewer 滚动到内容而不是按像素滚动的方法。我知道 .NET 4.5 带来了 ScrollUnit 属性，但是我在 WinRT 上找不到它。也没有 ContentScroll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:04:26.273

`ListViewBase`有一个[`ScrollIntoView`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.scrollintoview%28v=win.10%29.aspx)方法可以用来滚动到项目。您可以简单地滚动到列表控件中的任何给定项目。

# silverlight - Silverlight 5 使用 InstallShield 安装项目 - 我应该使用哪一个？

> ID：15791266
> 
> 赞同：0
> 
> 时间：2013-04-03T15:13:26.407
> 
> 标签：silverlight, installshield

好吧，我认为这可能是此 Silverlight 5 项目的最后一个问题。

我刚刚为 Visual Studio 2012 安装了 InstallShield Limited Edition，但我面临着两难境地。使用哪个安装项目？

该项目是一个 Silverlight WCF 应用程序，我希望这是一个足够简单的描述。需要的是客户端看到 Web 环境并且服务器端有 WCF 服务（当然）。

我以前没有使用过这种项目，所以可能会有一些配置某些部分去某些地方，我非常不熟悉这一切是如何工作的。可用的安装程序项目如下：

安装项目、合并模块项目、安装库项目、引导程序项目、C# 自定义操作项目、VB 自定义操作项目、C++ 自定义操作项目

我将使用哪一个来为此 Silverlight 5 WCF 解决方案创建安装程序？

# wcf - 通过 SSL 配置 REST WCF 服务

> ID：15791268
> 
> 赞同：0
> 
> 时间：2013-04-03T15:13:27.440
> 
> 标签：wcf, rest, ssl, https

我正在构建一个 WCF Restful Web 服务，目前，我正在通过 http 传输数据。现在，我想通过 https 安全地传输数据。请问我应该在我的配置文件中更改什么以启用此功能？这是我当前的配置文件：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MyService.DBService" behaviorConfiguration="ServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding" contract="MyService.IDBService" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:19:42.030

您必须通过定义自定义配置传输层安全性，并使用 bindingConfiguration 在端点中引用它。查看[有关](http://msdn.microsoft.com/en-us/library/bb924478.aspx)配置安全性的信息。一旦你有了这个，在你的 IIS 中配置一个 SSL 证书来完成这个。您可以参考[这里](http://msdn.microsoft.com/en-us/library/hh556232.aspx)了解如何使用 IIS 配置 SSL 证书。

# android - 正确关闭GreenDao数据库

> ID：15791270
> 
> 赞同：2
> 
> 时间：2013-04-03T15:13:29.727
> 
> 标签：android, greendao

我一直在寻找使用 GreenDao 时关闭数据库的正确方法。我在不同的地方（例如[1](https://stackoverflow.com/questions/13947068/how-to-know-all-open-connections-of-data-base-using-green-dao)）发现了一些提及，但是我仍然不确定应该如何完成。任何人都可以为扩展应用程序的类发布示例代码，以正确关闭和打开数据库。

谢谢！

# c++ - C++。reinterpret_cast 从 double 到 unsigned char*

> ID：15791272
> 
> 赞同：5
> 
> 时间：2013-04-03T15:13:37.487
> 
> 标签：c++, char, double, reinterpret-cast

今天我在玩 C++ 时遇到了这个问题，我认为这很奇怪，但可能更可能是由于我的误解和最近缺乏纯 C 编码。

我最初想做的是将双精度转换为无符号字符数组。我的理解是，双精度的 64 位（sizeof(double) 为 8）现在将表示为 8 个 8 位字符。为此，我使用了 reinterpret_cast。

所以这里有一些从 double 转换为 char 数组的代码，或者至少我认为这就是它所做的。问题是它从 strlen 返回 15 而不是 8，为什么我不确定。

```
double d = 0.3;

unsigned char *c = reinterpret_cast<unsigned char*> ( &d );

std::cout << strlen( (char*)c ) << std::endl; 
```

所以 strlen 是我的第一个问题。但后来我尝试了以下，发现它返回了 11、19、27、35。这些数字之间的差异是 8，所以在某种程度上是正确的。但是为什么这不返回 15, 15, 15, 15，（因为它在上面的代码中返回 15 ）。

```
double d = 0.3;
double d1 = 0.3;
double d2 = 0.3;
double d3 = 0.3;

unsigned char *c_d = reinterpret_cast<unsigned char*> ( &d );
unsigned char *c_d1 = reinterpret_cast<unsigned char*> ( &d1 );
unsigned char *c_d2 = reinterpret_cast<unsigned char*> ( &d2 );
unsigned char *c_d3 = reinterpret_cast<unsigned char*> ( &d3 );

std::cout << strlen( (char*)c_d ) << std::endl;
std::cout << strlen( (char*)c_d1 ) << std::endl;
std::cout << strlen( (char*)c_d2 ) << std::endl;
std::cout << strlen( (char*)c_d3 ) << std::endl; 
```

所以我查看了字符的地址，它们是。

```
0x28fec4
0x28fec0
0x28febc
0x28feb8 
```

现在这是有道理的，因为我的系统上 unsigned char* 的大小是 4 个字节，但我认为正确的内存量将从演员表中分配，否则 reinterpret_cast 似乎是一件非常危险的事情......此外，如果我愿意

```
for (int i = 0; i < 4; ++i) {
    double d = 0.3;

    unsigned char *c = reinterpret_cast<unsigned char*> ( &d );

    std::cout << strlen( (char*)c ) << std::endl;
} 
```

这将打印 11、11、11、11！

所以这里发生了什么，显然内存在某些地方被覆盖，重新解释演员表没有像我想象的那样工作（即我用错了）。在 C++ 中使用字符串已经很长时间了，有时当你回到原始 char 数组时，你会忘记这些事情。

所以我想这是一个三部分的问题。

为什么 strlen 最初返回 15？为什么 4 个 strlen 调用的大小变大了？为什么循环返回 11、11、11、11？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T15:17:29.377

`strlen`通过迭代它假定传递的`const char*`点的数组来工作，直到找到`char`值为 0 的 a。这是自动添加到字符串文字末尾的空终止字符。构成您的值表示的字节`double`不以空字符结尾。`strlen`它将一直越过`double`对象的末尾，*直到*找到一个值为 0 的字节。

考虑字符串文字`"Hello"`。在内存中，使用 ASCII 兼容的执行字符集，这将存储为以下字节（十六进制）：

```
48 65 6c 6c 6f 00 
```

`strlen`将通读它们中的每一个，直到找到具有值的字节`0`并报告到目前为止它已经看到了多少字节。

IEEE 754 双精度表示`0.3`为：

```
3F D3 33 33 33 33 33 33 
```

如您所见，没有带有 value 的字节`0`，所以`strlen`不知道何时停止。

无论函数返回什么值，都可能只是它在内存中找到 0 之前的距离，但是您已经遇到了未定义的行为，因此对其进行任何猜测都是毫无意义的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:15:58.537

您的问题是您使用`strlen( (char*)c )`，因为`strlen`需要一个指向以空字符结尾的字符串的指针。

似乎您期望在第 8 和第 9 个字节之间存在某种“边界”，因为前 8 个字节最初是`double`.

一旦您将该内存转换为`char*`. 您的代码有责任知道有多少`char`s 是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:18:57.167

有几件事：

1.  `sizeof(double)`可能不是 4。通常是 8。使用运算符而不是硬编码假设。
2.  该指针`reinterpret_cast<unsigned char*>(&d)`不指示指向以空值结尾的“字符串”的指针。`strlen`通过迭代进行操作，直到找到空值。你在那里陷入了未定义的行为。

# vb.net - .NET 3.5 中 WCF 的 ServiceHost 构造函数

> ID：15791274
> 
> 赞同：0
> 
> 时间：2013-04-03T15:13:44.447
> 
> 标签：vb.net, wcf, .net-3.5

我有一个使用 WCF 并针对 .NET 3.5 构建的应用程序。

我无法理解以下调用：

```
Dim myHost As ServiceHost = New ServiceHost(New ClientService()) 
```

其中 ClientService 是：

```
<ServiceBehavior(InstanceContextMode:=InstanceContextMode.Single)> Public Class ClientService
Implements IClientService

    Public Event SystemNotificationEvent As EventHandler(Of SystemNotificationEventArgs)

    Public Sub SendNotification(ByVal message As Message.SystemNotificationMessage) Implements IClientService.SendNotification
        RaiseEvent SystemNotificationEvent(Me, New SystemNotificationEventArgs(message))
    End Sub

End Class 
```

IClientService 是：

```
Public Interface IClientService

    <OperationContract()> _
    Sub SendNotification(ByVal message As Message.ServiceMessage)

End Interface 
```

当我查看 .NET 3.5 的 ServiceHost 构造函数选项的文档时，我看到的只有三个选项：

1.  ServiceHost() - 初始化 ServiceHost 类的新实例。
2.  ServiceHost(Object, Uri()) - 使用指定的服务实例及其基地址初始化 ServiceHost 类的新实例。
3.  ServiceHost(Type, Uri()) - 使用指定的服务类型及其基地址初始化 ServiceHost 类的新实例。

我的示例中的代码使用哪个构造函数？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:04:24.007

第二个。如果您查看[该构造函数的声明](http://msdn.microsoft.com/en-us/library/ms585487%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)，您会看到第二个参数 ( `Uri()`) 是使用`ParamArray`修饰符声明的，这意味着您的调用将一个空的 Uri 数组传递给它。

# iphone - 如何从谷歌地点 API 的地点 ID 中查找经纬度

> ID：15791276
> 
> 赞同：0
> 
> 时间：2013-04-03T15:13:49.970
> 
> 标签：iphone, ios, google-maps-api-3, google-places-api

我有一个地方的 google id，我怎样才能知道那个地方的纬度和经度？

是否有任何谷歌网址，我想要json中的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:07:31.713

谷歌 API

```
http://maps.google.com/maps/geo?q=surat&output=json&key=ABQIAAAAsV7S85DtCo0H9T4zv19FoRTdT40ApbWAnDYRE0-JyP5I6Ha9-xT9G5hCQO5UtOKSH5M3qhp5OXiWaA 
```

您可以传递地名或邮政编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:21:03.533

这应该包含您要查找的所有信息：

[https://developers.google.com/places/documentation/details](https://developers.google.com/places/documentation/details)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T05:53:02.737

我搜索了它，但找不到它！您需要任何类型的搜索 API 调用（即：radarSearch()）提供的**参考**，但我找不到此参考（可能因调用而异）和谷歌地点 ID 之间的链接。

# javascript - 使用javascript和hammerJS防止默认的iOS网页拖动

> ID：15791277
> 
> 赞同：5
> 
> 时间：2013-04-03T15:13:55.903
> 
> 标签：javascript, jquery, ios, hammer.js

我正在创建一个简单的 Web 应用程序，它使用新版本的hammerJS 进行捏缩放。当捏开始时，我遇到了默认的 iOS 页面拖动问题。这个接缝覆盖了我试图捕捉的捏事件。非常感谢在使用hammerJS 时阻止这种情况的任何帮助。

PS：我尝试使用 event.preventDefault() 无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T15:01:34.940

您需要与`preventDefault`您习惯的呼叫方式略有不同。像这样：

```
 $('#your_element').on('pinch', function(event) {
      event.gesture.preventDefault();
 }); 
```

有关另一个示例，请参见[这个hammer.js](https://github.com/EightMedia/hammer.js/blob/9b185183a4c85559b38b4ebe67536cf90b1aa541/examples/drag.html#L57)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:41:44.130

把它放在你的标题中：

```
<meta name="viewport" content="width=device-width,user-scalable=no"> 
```

基本上，用户可缩放的属性控制是否允许用户缩放页面。因此，一旦禁用它，您就可以使用hammerJs 控制缩放。

更多信息在这里[https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag#Viewport_basics](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag#Viewport_basics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T21:23:14.697

你在叫什么 preventDefault ？我通常将@Bertrand 的答案与这样的东西结合起来

```
$(body).on('touchmove', function(e){
    e.preventDefault();
}); 
```

# javascript - 如何从中获取文件（间接）使用 javascript

> ID：15791279
> 
> 赞同：59
> 
> 时间：2013-04-03T15:13:59.777
> 
> 标签：javascript, html

我在非 IE 浏览器中遇到“输入标签”问题

```
<input type="file" ... 
```

我正在尝试编写我的上传器，只使用 javascript 和 asp.net。

我上传文件没有问题。

当我想在非 IE 浏览器中获取我的文件时，我的问题发生了

```
<input type="file" ... 
```

我不想直接使用 from`input`因为它的外观没有正确改变

我编写了这段代码来从硬盘获取文件：

```
function $tag(_str_tag) {
return document.getElementsByTagName(_str_tag);
}

function $create(_str_tag) {
    return document.createElement(_str_tag);
}

function $open_file() {
    _el_upload = $create("input");
    _el_body = $tag("body")[0];
    _el_upload.setAttribute("type", "file");
    _el_upload.style.visibility = "hidden";
    _el_upload.setAttribute("multiple", "multiple");
    _el_upload.setAttribute("position", "absolute");
    _el_body.appendChild(_el_upload);
    _el_upload.click();
    _el_body.removeChild(_el_upload);
    return _el_upload.files;
} 
```

在 IE 中它工作得很好，目前返回我的文件；在 Chrome 和 Firefox 中，加载“文件输入对话框”后，无法返回任何文件。而 Opera 和 Safari 完全出局了。

我可以用这个技巧来修复它，但它基本上并不好。

```
_el_upload.click();
alert(); 
```

我认为“回调”或“等待功能”可以解决这个问题，但我无法处理。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-03T16:29:00.560

如果您要设置文件输入元素的样式，请查看[javascript 中的打开文件对话框](https://stackoverflow.com/questions/2048026/open-file-dialog-box-in-javascript)。如果您要获取与文件输入元素关联的文件，则必须执行以下操作：

```
inputElement.onchange = function(event) {
   var fileList = inputElement.files;
   //TODO do something with fileList.  
} 
```

有关该类型的更多信息，请参阅[此 MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/FileList)`FileList`。

请注意，上面的代码仅适用于支持 File API 的浏览器。例如，对于 IE9 和更早版本，您只能访问文件名。`files`input 元素在非 File API 浏览器中没有属性。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-06-14T04:17:03.927

基于 Ray Nicholus 的回答：

```
inputElement.onchange = function(event) {
   var fileList = inputElement.files;
   //TODO do something with fileList.  
} 
```

使用它也可以：

```
inputElement.onchange = function(event) {
   var fileList = event.target.files;
   //TODO do something with fileList.  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-06T13:34:19.817

上面的答案已经足够了。除了`onChange`，如果您使用拖放事件上传文件，您可以`drop`通过访问`eventArgs.dataTransfer.files`.

# python - Python 中的 os.open 错误

> ID：15791284
> 
> 赞同：2
> 
> 时间：2013-04-03T15:14:03.743
> 
> 标签：python, file-io, atomic

如果文件尚不存在，我正在尝试创建和写入文件，以便在竞争条件下合作安全，并且我遇到了（可能是愚蠢的）问题。首先，这是代码：

```
import os

def safewrite(text, filename):
    print "Going to open", filename
    fd = os.open(filename, os.O_CREAT | os.O_EXCL, 0666) ##### problem line?
    print "Going to write after opening fd", fd
    os.write(fd, text)
    print "Going to close after writing", text
    os.close(fd)
    print "Going to return after closing"

#test code to verify file writing works otherwise
f = open("foo2.txt", "w")
f.write("foo\n");
f.close()
f = open("foo2.txt", "r")
print "First write contents:", f.read()
f.close()
os.remove("foo2.txt")

#call the problem method
safewrite ("test\n", "foo2.txt") 
```

然后问题，我得到异常：

```
First write contents: foo

Going to open foo2.txt
Going to write after opening fd 5

Traceback (most recent call last):
  File "/home/user/test.py", line 21, in <module>
    safewrite ("test\n", "foo2.txt")
  File "/home/user/test.py", line 7, in safewrite
    os.write(fd, text)
OSError: [Errno 9] Bad file descriptor 
```

上面的代码中标记了可能的问题行（我的意思是，它还能是什么？），但我不知道如何解决它。问题是什么？

注意：以上是在 Linux VM 中使用 Python 2.7.3 进行测试的。如果您尝试该代码并且它适用于您，请在您的环境中写下评论。

*至少安全地*做同样事情的替代代码也是非常受欢迎的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:24:45.797

换行：

```
fd = os.open(filename, os.O_CREAT | os.O_EXCL, 0666) 
```

改为：

```
fd=os.open(filename, os.O_CREAT | os.O_EXCL | os.O_WRONLY, 0666) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:29:59.723

您必须使用标志打开文件，以便您可以对其进行写入 ( `os.O_WRONLY`)。

来自[`open(2)`](http://linux.die.net/man/2/open)：

```
DESCRIPTION
       The argument flags must include one of the following access modes: O_RDONLY, O_WRONLY, or O_RDWR.   These  request  opening  the  file  read-only,
       write-only, or read/write, respectively. 
```

来自[`write(2)`](http://linux.die.net/man/2/write)：

```
NAME
       write - write to a file descriptor

...    
ERRORS
       EAGAIN The file descriptor fd has been marked non-blocking (O_NONBLOCK) and the write would block.

       EBADF  fd is not a valid file descriptor or is not open for writing. 
```

# jquery - Grails 不会将 jquery 库放入 HTML

> ID：15791290
> 
> 赞同：0
> 
> 时间：2013-04-03T15:14:13.173
> 
> 标签：jquery, grails

我在我的 GSP`<head>`部分中有这个：

```
<g:javascript library="jquery"/> 
```

但对生成的 HTML 没有影响 - 这是要解决的问题。

jQuery 插件是通过初始 grails 安装安装的：

```
C:\...\qotd>grails install-plugin jquery
| Plugin 'jquery' with version '1.7.2' is already installed 
```

而 GSP 中的这段代码

```
<g:remoteLink action="ajaxRandom" update="quote">Next Quote</g:remoteLink> 
```

结果为 html（调用 jQuery.ajax 方法）：

```
<a href="/qotd/quote/ajaxRandom" onclick="jQuery.ajax({type:'POST', url:'/qotd/quote/ajaxRandom',success:function(data,textStatus){jQuery('#quote').html(data);},error:function(XMLHttpRequest,textStatus,errorThrown){}});return false;" action="ajaxRandom">Next Quote</a> 
```

但是当然没有调用 ajax 方法，并且此链接直接指向另一个 URL，因为该`head`部分中不包含 jQuery。这就是问题。

我哪里做错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:22:48.393

您需要`<r:layoutResources/>`在您的 javascript 库包含后添加。

# c++ - 简单的winapi自旋控制

> ID：15791297
> 
> 赞同：3
> 
> 时间：2013-04-03T15:14:34.207
> 
> 标签：c++, winapi, mfc, wtl

我正在尝试在 WTL &/ winapi 中制作一个简单的旋转控件和编辑框。这不能正常工作，因为我只看到 0 作为初始值并且箭头不起作用，代码在这里：

```
HWND spin = GetDlgItem(IDC_SPIN1);
HWND edit = GetDlgItem(IDC_RANDOM_EDIT);
::SendMessage(spin, UDM_SETBUDDY, (WPARAM)edit, 0); //set buddy
::SendMessage(spin, UDM_SETRANGE, MAKELPARAM(0,100), 0); //interval

::SendMessage(spin, UDM_SETBASE, 10, 0); //initial position 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:34:30.667

你的 wparam 和 lparam 颠倒了。你也有颠倒的低和高词。

```
::SendMessage(spin, UDM_SETRANGE, 0, MAKELPARAM(100,0)); //interval 
```

[`UDM_SETRANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759963%28v=vs.85%29.aspx)请参阅和的定义[`MAKELPARAM`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632661%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:53:43.217

`CUpDownCtrl`在 WTL 中，您有用于上下控制的包装类。所以它就这么简单：

```
CUpDownCtrl Control = ... // e.g. GetDlgItem(IDC_MYCONTROL);
INT nMinValue = 0, nMaxValue = 100;
Control.SetRange(nMinValue, nMaxValue); 
```

# sed - 比较两个参数

> ID：15791302
> 
> 赞同：0
> 
> 时间：2013-04-03T15:14:44.890
> 
> 标签：sed, awk, grep, tr

我有两个参数：

```
security.server.port=8443
security.authorization.enabled=true 
```

我希望每次都检查文件中的这些参数，如果其中一个缺少在下一个或opositive之后添加，或者如果它们根本缺少在“security.server.ip =”之后添加

例如：

如果我们在文件参数中有：

```
security.authorization.enabled=true 
```

预期视图：

```
security.server.port=8443
security.authorization.enabled=true 
```

无法创建整个过程 grep 并在 grep 之后添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:25:39.150

像这样的东西可能是您正在寻找的东西：

```
awk '
BEGIN{
   params["security.server.port=8443"]
   params["security.authorization.enabled=true"]
}

{
   for (param in params)
      if ($0 == param)
         params[param] = 1
   print
}

END {
   for (param in params)
      if (params[param] != 1)
         print param
}
' file 
```

如果没有更具代表性的输入和预期输出，很难说。

# c# - 如何对使用实体框架的存储库模式进行单元测试？

> ID：15791303
> 
> 赞同：18
> 
> 时间：2013-04-03T15:14:45.193
> 
> 标签：c#, entity-framework, unit-testing, repository-pattern

我目前正在尝试对通过实体框架创建的存储库进行单元测试：

我想要发生的是在不实际发送/连接到实际数据库的情况下测试存储库，我希望在不使用任何模拟框架的情况下这样做。

目前我的测试是将数据发送到数据库，我想要发生的是测试添加/删除等方法而不将实际数据发送到数据库，因为它仅用于测试。

这是存储库：

```
namespace AbstractFactory.Repository
{
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Linq;

    /// <summary>
    /// This class serves as the structure of the Author repository using a database
    /// </summary>
    public class DbAuthorRepository : IRepository<AuthorEntity>
    {

        private AbstractFactoryPatternEntities context;

        public DbAuthorRepository(AbstractFactoryPatternEntities context)
        {
            this.context = context;
        }

        /// <summary>
        /// Adds the specified author.
        /// </summary>
        /// <param name="author">The author.</param>
        public void Add(AuthorEntity author)
        {
            context.AuthorEntities.Add(author);
        }

        /// <summary>
        /// Removes the specified author.
        /// </summary>
        /// <param name="author">The author.</param>
        public void Remove(AuthorEntity author)
        {
            this.context.AuthorEntities.Remove(author);
        }

        /// <summary>
        /// Saves this instance.
        /// </summary>
        public void Save()
        {
            this.context.SaveChanges();
        }

        /// <summary>
        /// Gets all.
        /// </summary>
        /// <returns>returns a list of all the authors</returns>
        public IEnumerable<AuthorEntity> GetAll()
        {
            List<AuthorEntity> result = this.context.AuthorEntities.Include(a => a.Books).ToList();

            return result;
        }

        /// <summary>
        /// Gets the author by id.
        /// </summary>
        /// <param name="id">The id.</param>
        /// <returns>returns an entity</returns>
        public AuthorEntity GetById(int id)
        {
            AuthorEntity result = this.context.AuthorEntities.Single(a => a.AuthorId == id);

            return result;
        }
    }
} 
```

这是单元测试的当前代码：

```
[TestMethod]
        public void Add_MethodIsCalled_EntityCountIsIncrementedByOne()
        {
            using (ShimsContext.Create())
            {
                ShimAbstractFactoryPatternEntities context = new ShimAbstractFactoryPatternEntities(new AbstractFactoryPatternEntities());
                DbAuthorRepository repository = new DbAuthorRepository(context);
                repository.Add(new AuthorEntity { FirstName = "Test", LastName = "testing=" });
                var actual = repository.GetAll().Count();
                repository.Save();
                var expected = repository.GetAll().Count();
                Assert.AreNotEqual(actual, expected);
            }

            //AbstractFactoryPatternEntities context = new AbstractFactoryPatternEntities();
            //DbAuthorRepository repository = new DbAuthorRepository(context);
            //var actual = repository.GetAll().Count();
            //repository.Add(new AuthorEntity { FirstName = "Testing", LastName = "MyTest" });
            //repository.Save();
            //var expected = repository.GetAll().Count();
            //Assert.AreNotEqual(actual, expected);
        }

        [TestMethod]
        public void Remove_MethodIsCalled_EntityCountRemainsTheSame()
        {
            AbstractFactoryPatternEntities context = new AbstractFactoryPatternEntities();
            DbAuthorRepository repository = new DbAuthorRepository(context);
            AuthorEntity newAuthor = new AuthorEntity { FirstName = "Testing", LastName = "MyTest" };
            repository.Add(newAuthor);
            repository.Save();
            var actual = repository.GetAll().Count();
            Console.WriteLine(actual);
            repository.Remove(newAuthor);
            var expected = repository.GetAll().Count();
            Console.WriteLine(expected);
            Assert.AreEqual(actual, expected);
        }

        [TestMethod]
        public void Get_MethodIsCalled_CorrectAuthorIsRetrieved()
        {
            AbstractFactoryPatternEntities context = new AbstractFactoryPatternEntities();
            DbAuthorRepository repository = new DbAuthorRepository(context);
            int target = 4;
            AuthorEntity author = repository.GetById(target);
            Assert.AreEqual(target, author.AuthorId);
        } 
```

我想使用 shims/stub/fakes 来进行测试。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T15:48:30.267

实体框架存储库是存储库接口的具体实现。因为它是具体的，所以你不能在没有数据库的情况下对其进行抽象和测试——这个具体实现的重点是将数据写入数据库！

这意味着测试 EF 存储库应该旨在验证存储库是否写入实际数据库 - 在测试的动作阶段，您调用存储库方法，在断言阶段，您使用任何其他方式从数据库中获取数据（ado.net也许？）检查存储库是否完成其工作。

另一个不相关的事情是，您可以拥有另一个使用内存数据存储的存储库实现，并将此类内存存储库注入其他服务允许您在不写入物理数据库的情况下测试这些服务。您甚至可以模拟注入到其他服务的存储库，只是为了执行一些行为测试，即测试您的服务是否正确使用您的存储库。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-09T20:25:01.587

您可以使用内存数据库（例如 Effort）替换与数据库的连接。然后您可以测试您的存储库逻辑。更多细节可以在[这里找到](http://druss.co/2013/03/unit-test-data-access-layer-entity-framework-with-in-memory-database/)

# linux - 在 Windows 上运行以下 linux 命令

> ID：15791305
> 
> 赞同：0
> 
> 时间：2013-04-03T15:14:51.077
> 
> 标签：linux, windows, curl, cmd

我正在尝试在 Windows 上运行以下 Linux 命令。我能够安装 curl.exe 并运行下面两个命令中的第一个命令，但是，`| php`在它的末尾没有，因为添加它会导致`php is not recognized as an internal or external command`错误。

然后，当尝试运行这两个命令的第二个命令时，我得到一个找不到主机的错误。

我是 curl 和 linux 命令行的新手，我想知道是否有人可以帮助我弄清楚如何在我的 Windows 机器上运行第二个命令？

```
$ curl -s http://getcomposer.org/installer | php
$ php composer.phar install 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:17:22.963

> php 未被识别为内部或外部命令

该错误意味着 PHP 没有安装在 Windows 机器上，或者它不在 PATH 中。

如果您还没有安装它。如果您已安装它，请在命令中指定 PHP 的完整路径

> curl -s [http://getcomposer.org/installer](http://getcomposer.org/installer) | C:\安装\路径\php

或确保 PHP 目录位于[PATH 环境变量](http://geekswithblogs.net/renso/archive/2009/10/21/how-to-set-the-windows-path-in-windows-7.aspx)中。

# crud - 如何使用和定义 CRUD？

> ID：15791306
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:14:52.223
> 
> 标签：crud, use-case

我想在同一个用例图中使用多个 CRUD。我可以为每个 CRUD 定义一个名称吗？我怎样才能区分它们？否则，两者都将被命名为 CRUD。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:22:59.727

这取决于模型中使用的用例图描述级别。例如，某个实体的简单高级（例如 1）CRUD 案例使用名称可以是“实体管理”（例如“用户管理”）。

我建议使用（高级）“管理”或“管理”等词而不是 CRUD。

CRUD 技术性太强，用例图和描述是改善利益相关者之间沟通的工件。

# jsp - 在 JSP 中的页面之间传递参数/会话值

> ID：15791308
> 
> 赞同：0
> 
> 时间：2013-04-03T15:15:05.660
> 
> 标签：jsp, servlets

我有一个设置了登录表单的`Login.jsp`页面。`action="session.jsp"`

在登录页面中，会话参数设置为

```
<% String username = request.getParameter("username");
   session.setAttribute("username", username); %> 
```

现在，当我尝试在会话页面中访问这些值时

```
Welcome <%= session.getAttribute("username") %> 
```

我得到一个`Welcome null`

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:20:48.103

如果表单`Login.jsp`在. 一旦被调用，它将仅作为参数可用。如果这不是问题，那么查看更多代码会有所帮助。`username``session.jsp``session.jsp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T12:19:47.207

使用 <%=session.getAttribute("username").toString()%>

# php - 计算多维数组中的行/记录

> ID：15791313
> 
> 赞同：1
> 
> 时间：2013-04-03T15:15:08.237
> 
> 标签：php, arrays, dynamic, count

我有一组嵌套数组。

[data] 是顶级数组。

较低级别的数组都由增量数字标识，动态分配......基本上每个子数组标识信息的行/记录。

我将如何提取子数组的计数？我需要能够将这些数据发布到数据库中。

子数组的数量是动态的，并且可以根据我正在解析的数据而改变。

```
 [data] => Array
        (
            [0] => Array
                (
                    [id] => 3475
                    [name] => Player1
                    [score] => 11870
                    [rank] => 213
                    [total_cities] => 2
                    [crown] => None
                    [alliance_id] => 134
                    [title] => Earl
                    [fame_total] => 509875
                    [fame_rank] => 381
                    [defeated_total] => 3436
                    [defeated_rank] => 376
                    [plunder_total] => 1388754
                    [plunder_rank] => 245
                )

            [1] => Array
                (
                    [id] => 3523
                    [name] => Player2
                    [score] => 1978
                    [rank] => 281
                    [total_cities] => 1
                    [crown] => None
                    [alliance_id] => 134
                    [title] => Baron
                    [fame_total] => 0
                    [fame_rank] => 448
                    [defeated_total] => 0
                    [defeated_rank] => 448
                    [plunder_total] => 0
                    [plunder_rank] => 436
                )

            [2] => Array
                (
                    [id] => 73
                    [name] => Player3
                    [score] => 1308
                    [rank] => 304
                    [total_cities] => 1
                    [crown] => None
                    [alliance_id] => 134
                    [title] => Marquess
                    [fame_total] => 5604153
                    [fame_rank] => 237
                    [defeated_total] => 37270
                    [defeated_rank] => 229
                    [plunder_total] => 68130
                    [plunder_rank] => 335
                ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:23:32.837

我结合使用 Marc B 和 Thanos 强调的方法来获得我想要的结果

这是我使用的代码：

```
$count = 0;
foreach($data as $data=>$inner_array){
   $count = $count+1;
}

echo $count; 
```

我用一个包含 143 个唯一行的测试数据集运行它，我得到了回声，所以生活很美好。

多谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:16:23.130

最简单的方法：

```
$count = 0;
foreach($mainarray as $subarray)
   $count += count($subarray);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:28:55.593

假设 $data 是您的主数组：这个打印每个内部数组的名称（例如，0、1、2...），然后计算每个子数组项：

```
echo "Number of sub-arrays: ".count($online_time); //optional
foreach($data as $inner_array=>$data_of_inner_array) {
echo $inner_array;
echo " --- ".count($data_of_inner_array);
echo "<br/>";
} 
```

我假设输出将是

```
Number of sub-arrays: 3
0 --- 14
1 --- 14
2 --- 14 
```

# svn - 有没有办法将脚本注入 SVN（或其属性..）以通知应用程序（我正在开发的）用户做出了提交？

> ID：15791316
> 
> 赞同：1
> 
> 时间：2013-04-03T15:15:20.910
> 
> 标签：svn, tags, release

我正在构建一个将与开发人员的代码交互的应用程序（一个发布管理应用程序）（计划与我的主管会面，以决定我们是使用应用程序还是 eclipse 插件）。所以我需要知道用户（eclipse 上的开发人员）何时提交（SVN），以便通知应用程序，恢复代码（已提交）并对其应用一些操作。所以我的问题是：有没有办法将脚本注入 SVN（或其属性之一），以便它可以通知我的应用程序已完成提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:24:32.490

正如 ShiDoiSi 所指出的，它可以通过[post-commit hook](https://mikewest.org/2006/06/subversion-post-commit-hooks-101)来完成。但是，对 subversion 存储库所在的文件系统具有写访问权限的用户需要安装它。它可以在任何操作系统上完成。

相反，您可以执行持续集成服务器所做的事情：轮询存储库（或整个存储库本身）中特定项目的修订，然后根据结果采取行动。尝试命令[svn log --xml](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)或类似命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:29:28.773

乍一看，您似乎想至少重新发明[持续集成 (CI)](https://stackoverflow.com/questions/tagged/continuous-integration)或[CommitMontior 。](http://tools.tortoisesvn.net/CommitMonitor.html)

不过，如果您有一些特殊情况并且确实需要开发 Eclipse 插件甚至是独立的应用程序，[Subversion 钩子](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)会有所帮助。

Apache Subversion 能够对某些用户操作执行挂钩脚本。您要寻找的特别是一个[`post-commit`](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.post-commit.html)钩子。基本上，您需要编写一个提交后可执行文件，嗯，它将“通知”您想要通知的任何内容。每次用户提交到存储库或特定存储库文件夹/主干/分支/等时，您的钩子都会运行并完成它的工作。

顺便说一句，您使用的是 Windows 还是 Linux 并不重要。但是，肯定需要一些阅读和研究。我可以建议您从[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)开始。

# c# - 维护安全的 MySQL 连接

> ID：15791320
> 
> 赞同：3
> 
> 时间：2013-04-03T15:15:37.707
> 
> 标签：c#, mysql

我是数据库和所有这些东西的新手。假设我有一个连接到数据库以对用户进行身份验证的应用程序。我有一张学生表（用户）及其各自的密码。要连接到数据库，我需要一个如下所示的 MySQL 连接：

MySqlConnection("server=; database=; uid=; pwd=");

问题是我需要在应用程序中硬编码数据库的 root 密码，因此将数据库的 root 密码分发给应用程序的所有用户。对我来说，这没有意义吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T00:53:04.480

一般来说，你有类似“客户端服务器模型”的东西。客户端（您的 c# 应用程序）连接到服务器。然后服务器连接到数据库（因此只有在服务器端用户/密码是已知的）。

> 客户端 <-> 服务器 <-> mysql

我想说在客户端实现数据库连接是不好的做法。但是，您可以实现每个用户的数据库授权。这意味着客户端需要输入（mysql）用户/密码。但是你需要直接在数据库上给用户一定的“权利”。我的猜测是，你不希望这样。

# .net - 尽管满足先决条件，但无法安装修补程序 2600100

> ID：15791322
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:15:40.943
> 
> 标签：.net, windows-server-2008, hotfix

我已经在 serverfault @ [https://serverfault.com/questions/495419/hotfix-2600100-wont-install-despite-meeting-prerequisites](https://serverfault.com/questions/495419/hotfix-2600100-wont-install-despite-meeting-prerequisites)上添加了这个，但没有得到任何回复，所以在这里重新发布：

我正在尝试在安装了.Net Framework 3.5 SP1 的 Win Server 2k8 机器上安装 Microsoft Hotfix ( [http://support.microsoft.com/kb/2600100 )，但它告诉我](http://support.microsoft.com/kb/2600100)

受此安装影响的任何产品都不会受到影响

已满足所有先决条件，并且它适用于单独安装了 .Net 2.0 Framework 和 .Net 3.5 Framework 的其他 Wind Server 2k8 机器。有没有人遇到过这样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:33:47.380

Microsoft 已在上述页面 ( [http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600100&kbln=en-us](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600100&kbln=en-us) )上发布了适用于 .NET Framework 2.0 - Windows Vista、Windows Server 2008 (CBS) 的新 hotifx现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T15:23:07.467

上面提到的新版本似乎是.msu 格式。有.exe格式吗？

# asp.net - 如何将css文件链接到azure主机中的aspx？

> ID：15791323
> 
> 赞同：1
> 
> 时间：2013-04-03T15:15:46.980
> 
> 标签：asp.net, azure, azure-storage, azure-blob-storage, azure-web-roles

我有我正在尝试上传到 azure 主机的 asp.net 应用程序。首先，我尝试以传统方式与 Css 文件夹链接并链接到它

```
<link href="http://mysite.azurewebsites.net/css/style.css" 
      rel="stylesheet" type="text/css" /> 
```

不工作

**然后我创建 blob 并引用它：**

```
<link href="http://mysite.blob.core.windows.net/scripts/style.css" 
      rel="stylesheet" type="text/css" /> 
```

不工作

现在我没有收到错误，但样式没有发生任何事情（在清空缓存并重新启动站点后）我没有在我的站点中使用母版页，只是普通的 asp.net 页面。我在某些地方看到他们正在使用母版页进行操作，但是没有母版页还有其他方法可以执行此操作。

谢谢。

# arrays - 操作后访问数组元素

> ID：15791324
> 
> 赞同：1
> 
> 时间：2013-04-03T15:15:49.173
> 
> 标签：arrays, matlab, numpy

我习惯于使用 Python 的数组，我可以在计算后直接访问数组元素，而无需将结果定义为单独的数组。（我知道这 100% 令人困惑，这是一个例子：）我可以这样做：

```
>>> x = np.array([1,2,3], dtype=np.double)
>>> y = np.array([4,0,6], dtype=np.double)
>>> x/y
array([ 0.25,  inf,  0.5 ])
>>> (x/y)[np.isfinite(x/y)]
array([ 0.25, 0.5 ]) 
```

我知道它不像定义一个新变量（比如`z = x/y`）那么清楚，但是当我创建`lambda`函数时它很有用。

我想在 Matlab 中做同样的事情，在匿名函数（`@`函数）中使用，但我找不到办法。等效`(x./y)(isfinite(x./y))`显然不起作用，但是还有另一种方法可以从数组中获取元素吗？我不想使用`x(isfinite(x))./y(isfinite(y))`，因为它不会捕获 y 为空的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:03:54.263

正如 yuk 在评论中已经指出的那样，`subsref`是解决实际问题的方法。这解决了问题，但使用的实现通常很难编写、读取和修改。

您实际上可能想要做的是使用快速帮助函数。下面是演示所有这些方法的示例代码。

```
%Setup
x = [1 2 3];
y = [4 0 6];

%Raw computation
x./y

%Temporary variable filtering
temp = x./y;
example1 = temp(isfinite(temp))

%Filtering using subsref call, using "struct" to construct the needed
%referencing operation.  This is equivalent to  
%    "(x./y)(isfinite(x./y)", 
%if that were legal
example2 = subsref(x./y, ...
    struct('type','()','subs',{{isfinite(x./y)}})    )

%More readable implementation, using a quickie helper
keepFinite = @(x) x(isfinite(x));
example3 = keepFinite(x./y) 
```

使用上面的示例，该`keepFinite`函数可用于进一步构造 lambda 函数。例如： `fn = @(x,y)someotherOperation(keepFinite(x./y));`。

# python - DJANGO：如何列出反向外键属性？

> ID：15791330
> 
> 赞同：10
> 
> 时间：2013-04-03T15:16:08.050
> 
> 标签：python, django, foreign-keys, admin, reverse-lookup

我正在构建一个网络应用程序来跟踪一个人签出的图书馆书籍。我有以下型号：

```
class Person(models.Model):
    name = models.CharField(max_length=100)
    def __unicode__(self):
         return self.name

class Book(models.Model):
    name = models.CharField(max_length=100)
    person = models.ForeignKey(Person)
    checkout_date = models.DateTimeField('checkout date')
    def __unicode__(self):
        return self.name 
```

在人员的管理员“更改列表”页面上，我想显示该人拥有的书籍。这是可以做到的吗？如果是这样，怎么做？

管理员.py

```
class BookAdmin(admin.ModelAdmin):
     list_display = ('name', 'checkout_date', 'person' )

class PersonAdmin(admin.ModelAdmin):
    list_display = ('name', 'book__name') 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T15:32:35.493

Django admin 非常灵活，您可以简单地为其添加一个辅助方法。

```
class PersonAdmin(admin.ModelAdmin):
    list_display = ('name', 'books')

    def books(self, obj):
        return ",".join([k.name for k in obj.book_set.all()]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T15:30:46.453

添加[内联模型管理员](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)

```
class BookInline(admin.TabularInline):
    model = book

class PersonAdmin(admin.ModelAdmin):
    inlines = [BookInline, ] 
```

那应该涵盖它。

# mysql - MySQL 无法在子查询中访问别名

> ID：15791331
> 
> 赞同：0
> 
> 时间：2013-04-03T15:16:08.417
> 
> 标签：mysql

所以我有这个查询（不是用于生产用途，只是一个查询以管理从数据库中获取一些数据而不管性能如何）

```
SELECT 
  `guests`.`id`, 
   CONCAT(u.`fname`, '', u.`lname`) "name", 
  `u`.`id` "u", 
   (SELECT COUNT(r.id) FROM reservations r WHERE r.guest_id=guests.id) "reservations", 
   (SELECT COUNT(t.id) FROM tasks t WHERE t.guest_id = guests.id) "tasks", 
   (SELECT COUNT(m.id) FROM scheduled_emails m JOIN reservations r ON (r.guest_id = `guests`.`id` AND m.reservation_id = r.id)) "emails", 
  `guests`.`created` "created", 
  `guests`.`updated` "updated" 
FROM `guests`
JOIN `users` AS u ON u.`id` = `guests`.`user_id` LIMIT 0,25 
```

我得到

```
#1054 - Unknown column 'guests.id' in 'on clause' 
```

导致问题的行是第三个子查询：

```
(SELECT COUNT(m.id) FROM scheduled_emails m JOIN reservations r ON (r.guest_id = `guests`.`id` AND m.reservation_id = r.id)) "emails", 
```

有人知道为什么它在这里失败了吗？我的意思是我没有使用别名，guests 是表的名称，它在 2 个第一个子查询中读取正常。第三个子查询的不同之处在于它使用的是 JOIN ......有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:21:12.620

`JOIN`直接使用所有表，而不是使用相关子查询来执行此操作。像这样的东西：

```
SELECT 
  g.id, 
  u.name, 
  `u`.`id`                  AS u, 
  g.`created`               AS created, 
  g.`updated`               AS updated,
  COUNT(r.id)               AS reservations, 
  COUNT(t.id)               AS tasks, 
  COUNT(m.id)               AS emails, 
FROM `guests`               AS g
INNER JOIN reservations     AS r  ON r.guest_id = g.id
INNER JOIN tasks            AS t  ON t.guest_id = g.id
INNER JOIN scheduled_emails AS m  ON r.guest_id = g.id
                                 AND r.id       = m.reservation_id 
INNER JOIN
(
   SELECT id, CONCAT(u.`fname`, '', u.`lname`) AS name
   FROM `users`          
)AS u  ON u.id       = g.user_id
GROUP BY g.id, 
         u.id,
         u.name, 
         g.created, 
         g.updated
LIMIT 0, 25; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:21:48.650

不知道为什么要以您的方式运行该查询。我建议`join`对所有内容都使用，或者`left outer join`如果您不使用给定表中的结果。

```
SELECT 
  `guests`.`id`, 
   CONCAT(u.`fname`, '', u.`lname`) "name", 
  `u`.`id` "u", 
   COUNT(r.id) "reservations", 
   COUNT(t.id) "tasks", 
   COUNT(m.id) "emails", 
  `guests`.`created` "created", 
  `guests`.`updated` "updated" 
FROM `guests`
    JOIN `users` AS u ON u.`id` = `guests`.`user_id` 
    JOIN reservations r ON r.guest_id=guests.id
    JOIN tasks t WHERE t.guest_id = guests.id
    JOIN scheduled_emails m ON (r.guest_id = `guests`.`id` AND m.reservation_id = r.id)
GROUP BY g.id, u.id, u.name, g.created, g.updated
LIMIT 0,25 
```

# ckeditor - 如何防止 CKEditor 自动设置表单域？

> ID：15791336
> 
> 赞同：0
> 
> 时间：2013-04-03T15:16:25.630
> 
> 标签：ckeditor

我们试图让 CKEditor 4 不更新它所附加的文本区域。

我们只是想从编辑器中取出数据，添加一些额外的文本，然后在字段中提交。

问题是 CKEditor 正在覆盖提交功能，以在最后一分钟使用编辑器的文本更新字段。

如何阻止 CKEditor 自动更新表单域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:27:59.227

设置[`config.autoUpdateElement`](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-autoUpdateElement)为`false`。

或者而不是使用`CKEDITOR.replace`use `CKEDITOR.appendTo`。

# cakephp - CakePHP TranslateBehavior 保存到 i18n 表和模型表

> ID：15791337
> 
> 赞同：1
> 
> 时间：2013-04-03T15:16:28.663
> 
> 标签：cakephp, internationalization

我有一个非常简单的测试设置——一张表（dingos），我从中烘焙了模型、控制器和视图。该模型有两个字段，标题和描述，我已将其添加到模型文件中，用于翻译：

```
var $actsAs = array('Translate' => array('title', 'description')); 
```

向模型表添加一个新行（通过烘焙视图/操作）很好，它会使用当前语言环境在 i18n 中产生两个新行（标题和描述）。

然后我对其进行编辑，但在烘焙编辑操作中添加了一行：

```
$this->Dingo->locale = 'ru_ru'; 
if ($this->Dingo->save($this->request->data)) {
    // etc etc 
```

使用正确的外键将两个新闻行（标题、描述）添加到 i18n。但是，dingos 表中的行**也会**更新。（诚​​然稀疏的）文档似乎表明只有 i18n 会受到影响，所以这是不正确的，我是否忽略了一些东西？

谢谢，

托比

**更新** 似乎与此处报告的问题相同：“[如何更新翻译 cakephp 但不是主表](https://stackoverflow.com/questions/15677279/how-to-update-translation-cakephp-but-not-main-table)”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:54:00.383

万一它对某人有帮助，显然这就是它应该如何工作的方式。

我不完全理解这一点（我想象模型表和 i18n 表之间的关系类似于 *.pot 与 *.po 的关系，但 Mark Storey 回应了 CakePHP 问题跟踪器（[此处](https://cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3737-TranslateBehavior-saves-to-both-i18n-and-model-table)）。

**更新** 正如马克指出的那样，这是[记录在案](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#defining-the-fields)的。我是个傻瓜。

# ios - 浮动比较

> ID：15791339
> 
> 赞同：4
> 
> 时间：2013-04-03T15:16:33.380
> 
> 标签：ios, objective-c

我不好意思问这个问题，但我运行的是 iOS 6.1，以下行返回 False：

```
if ([[UIDevice currentDevice].systemVersion floatValue] >= 6.1) 
```

但以下返回 True：

```
if ([[UIDevice currentDevice].systemVersion floatValue] >= 6.1f) 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:24:51.213

在比较之前将浮点数转换为双精度数。f 表示小数位数。当您更改小数位数时，您正在比较两个不同的数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:25:53.797

在第一个 systemVersion 从 float 转换为 double ，其值取决于您使用多少位来表示它

在第二个中，您正在比较两个浮点数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:24:49.823

经过相当多的阅读，我对其中的原因的理解如下：

• C 将像 1.2 这样的数字视为双精度数，如果使用 f 进行修改，例如 1.2f 作为浮点数 • 双精度数和浮点数都不能在系统内部以 100% 的准确度表示 • 浮点数的表示错误高于双精度数

因此，将浮点数与双精度数进行比较大多会导致误导性结果。对于非关键系统，比较 2 个浮点数就足够了。

# c# - 如何提及使用 Facebook C# SDK 的人？

> ID：15791340
> 
> 赞同：2
> 
> 时间：2013-04-03T15:16:33.677
> 
> 标签：c#, facebook-c#-sdk

我想在使用 Facebook C# SDK 的常规帖子中提及用户名，以便他的名字可点击并引导至他的个人资料。有谁知道怎么做这样的事情？

# java - 可执行jar找不到资源

> ID：15791345
> 
> 赞同：0
> 
> 时间：2013-04-03T15:16:52.843
> 
> 标签：java, maven

这是我的Maven结构：

```
project
  ---src
    ----main
        ----java
            ----App.java
        ----resources
            ----config.properties 
```

这是读取 config.properties 的代码：

```
private static final URL propFile = ClassLoader.getSystemResource("config.properties");

public App() throws IOException {
    props.load(new FileInputStream(propFile.getFile()));
}

public static void main(String[] args) {
    try {
        App app = new App();
        //Something interesting happens here
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

当我跑步时`java -jar MyApp-1.0.jar`，我收到`FileNotFoundException`：

> java.io.FileNotFoundException: file:/home/dragon/JavaProjects/MyApp/target/MyApp-1.0.jar!/config.properties (没有这样的文件或目录)

它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:18:04.343

在您的 java 文件夹中，您应该放置 App.java 和资源目录。然后您可以使用以下代码获取属性文件：

```
private static final URL propFile = getClass().getResourceAsStream("resources/config.properties");

public App() throws IOException {
    props.load(new FileInputStream(propFile.getFile()));
} 
```

所以你的项目结构看起来像：

```
project
  ---src
    ----main
        ----java
            ----App.java
            ----resources
                ----config.properties 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:20:43.057

这些中的任何一个都应该可以正常工作：

```
Properties props = new Properties();
props.load(Thread.currentThread().getContextClassLoader()
        .getResourceAsStream("config.properties"));
// OR
props.load(ClassLoader.getSystemResourceAsStream("config.properties"); 
```

在您的示例中，您尝试通过 a 访问嵌入在 JAR 存档中的文件`FileInputStream`，而您无法直接执行此操作。

# amazon-s3 - 先创建 S3 存储桶还是 Cloudfront Distribution？

> ID：15791347
> 
> 赞同：0
> 
> 时间：2013-04-03T15:16:54.287
> 
> 标签：amazon-s3, amazon-cloudfront

当我最初设置 Cloudfront 时，我首先创建了 Cloudfront Distribution。这非常令人困惑，因为当时我对 S3 管理控制台一无所知。S3 MC 是您创建存储桶的地方。当您创建分发时，Cloudfront 会请求这些存储桶之一。

对于设置全新 S3 帐户的人，正确的顺序是什么：S3 Bucket 然后 Cloudfront Distribution，反之亦然？

创建分发时，是否只需要“源域名”？我已经包含了上半部分分发设置表单的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/MdlBA.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:50:22.280

> 对于设置全新 S3 帐户的人，正确的顺序是什么：

如果您的 CloudFront 内容来自 S3，请先设置您的 S3 存储桶

> 创建分发时，是否只需要“源域名”

可能是的，其余设置的默认值在许多情况下就足够了。如果您想[设置自己的 CNAME ，这里是一步一步的](http://www.hongkiat.com/blog/amazon-cloudfront-how-to-setup-cloudfront-to-work-with-s3/)

CloudFront 分配可能需要 20 分钟才能激活，然后根据需要使用 S3 管理控制台在 S3 存储桶上设置权限和可能的其他选项。

祝你好运！

# jquery - 使用 jQuery 在当前集合中查找元素

> ID：15791351
> 
> 赞同：2
> 
> 时间：2013-04-03T15:17:06.883
> 
> 标签：jquery, jquery-selectors

我正在制作一个 jQuery 插件，如何`.selected`在当前集合中找到一个元素？

```
$('a').selected(); // initial set `a`

$.fn.selected = function() {

 return $('.selected', this); 
 // produces `a .selected` but I want to find `a.selected`

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:18:47.600

您应该改用[**.filter()**](http://api.jquery.com/filter/)：

```
return this.filter('.selected'); 
```

...`this`在 jQuery 原型扩展函数中（`$.fn.selected`在你的情况下）是指 jQuery 对象本身。

# c# - 捕获一个随机数。我需要改变输入的字符并对它们进行编码

> ID：15791352
> 
> 赞同：-2
> 
> 时间：2013-04-03T15:17:10.180
> 
> 标签：c#, encryption, random

所以我需要对给出的任何输入进行编码。就像用户类型：“ABC”它应该转换为“JKL”我知道我们可以通过为每个单词定义一个字符来做到这一点。像 A = J ， B = K 但问题是它每次都会提出相同的编码。那么有没有办法随机转发字符？并且如果可以记录随机数以便可以解码字符串有人知道方法吗？我会很感激的。

# 编辑1：它基本上是我的项目，使用位移加密任何给定文件，然后添加虚拟数据，然后通过矢量量化对其进行压缩。

所以我的第一步是读写一个已经完成的文件。现在我想将字符向前移动，我可以通过将它们转换为二进制然后使用位移来实现，或者我可以向前移动字符。但我想知道是否有任何方法可以**捕获**该随机生成的数字，因此在解码时我可以使用该数字正确解密字符。

我已经大致制作了一个代码..我会尽快更新它。感谢您的反馈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:27:31.523

您可以播种一个随机生成器，这将使它每次返回相同的随机数序列。这样您就可以使用密钥进行加密：

```
int key = 42;
Random rnd = new Random(key); 
```

现在您可以使用随机数转换每个字符。例如对于字符范围 AZ：

```
char c = 'X';

int code = c - 'A'; // Bring the character code into the range 0-25
code = code + rnd.Next(26); // encrypt
code = code % 26; // roll over for codes > 25
c = (char)('A' + code); // convert code to character 
```

除了减去随机数之外，解密将是相同的。

# android - 检测Android应用程序的关闭

> ID：15791358
> 
> 赞同：1
> 
> 时间：2013-04-03T15:17:17.883
> 
> 标签：android, detect

我制作了一个集成到应用程序中的模块，所以我不能使用 OnDestroy 函数来杀死我的 CountDownTimer。

我想检测应用程序何时关闭，因为我使用 CountDownTimer 来更改使用我的模块添加到应用程序的活动的内容。当我退出我的应用程序时，我的 countDownTimer 连续重新加载另一个活动..

在应用程序中，我的模块被调用：

```
interstitial = new ModuleAdView(this); 
```

其中“this”是应用程序的上下文。

例如，可以使用 ActivityManager 检测到这一点吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:25:01.193

您可以覆盖 onStop()，它会在您的应用程序离开屏幕时从系统获得回调。

```
@Override
public void onStop(){
    super.onStop();
    //stop your countdowntimer
} 
```

# css - 三个图像的 css

> ID：15791362
> 
> 赞同：0
> 
> 时间：2013-04-03T15:17:23.580
> 
> 标签：css

我有三个图像`div`，问题是当我重新调整浏览器时，图像会移动并重叠。

[http://jsfiddle.net/XZHzr/](http://jsfiddle.net/XZHzr/)

我尝试了几件事，但在 css 中遗漏了一些东西。你如何让图像在网络浏览器中保持固定（连续），但如果在移动浏览器中打开或最小化浏览器，它们会相互堆叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:24:20.477

这是一个示例，如果将浏览器窗口重新调整为更小的宽度，图像不会重叠和正确堆叠：http: [//jsfiddle.net/sGmjU/](http://jsfiddle.net/sGmjU/)

我基本上删除`div`了每张图片周围的额外标签。

如果您想专门控制桌面浏览器和移动浏览器中的行为，那么您应该研究[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:35:40.173

你可以只删除每个div的宽度，然后效果很好

# treeview - 如何使用 GTK 堆叠列标题？

> ID：15791363
> 
> 赞同：0
> 
> 时间：2013-04-03T15:17:25.237
> 
> 标签：treeview, gtk, pygtk

我使用 PyGTK`gtk.TreeView`并`gtk.TreeViewColumn`构建具有多列的列表。对于我想呈现标准标题的列，但堆叠在另一行跨越多列的标题上。请参阅此图：

![堆叠列标题](https://i.stack.imgur.com/F67wo.png)

与列标题 1 到 4 不同，堆叠的标题不需要任何排序功能。他们只需要包含一个标签。当调整默认标题之一（标题 1-4）的大小时，我希望堆叠的标题与它们一起调整大小，以便它们保持对齐。

GTK可以做到这一点吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:43:49.900

我认为标准`GtkTreeView`小部件不可能做到这一点。这个小部件所能做的就是`GtkCellRenderer`在一个列标题下打包多个 s。

您也许可以创建一个新的小部件，该小部件仅在`GtkTreeView`小部件上方绘制堆叠和跨越的标题

# php - HTML 中可读的嵌套 PHP 循环/Ifs

> ID：15791367
> 
> 赞同：1
> 
> 时间：2013-04-03T15:17:37.263
> 
> 标签：php, html

我正在尝试将我的 PHP 和 HTML 分开。我将一组 PHP 变量传递给我的 HTML 代码。我正在创建一个选择下拉列表并尝试根据我的变量选择一个特定选项。像这样：

```
//example vars from PHP array (uses magic getter and accessed by $this->varName)
//$array = array('aaa' => '123', 'bbb' => '456', 'ccc' => '789');
//$selected = 'bbb';

<select name="name" id="id">
<option value="0">Choose n Option</option>
<?
foreach($this->array as $key => $value)
{
    ?>
    //$selected may not be set
    <option value="<?=$key?>" <? echo isset($this->selected) ? (strcmp($key,$this->selected)==0 ? 'selected' : '') : '' ?> ><?=$value?></option>
    <?
}
?>
</select> 
```

结果是：

```
<select name="name" id="id">
    <option value="0">Choose an Option</option>
    <option value="aaa"  >123</option>
    <option value="bbb" selected >456</option> //'selected' determined by code above
    <option value="ccc"  >789</option>
</select> 
```

有没有更好的方式写应该选择哪个选项？使用 PHP 还是更改我的逻辑？`<? echo isset($this->selected) ? (strcmp($key,$this->selected)==0 ? 'selected' : '') : '' ?>`似乎不太可读。我想知道在 HTML/view 代码需要使用嵌套循环和 if 的情况下是否有更好的方法来编写代码，尤其是在这种情况下的 HTML 标记内。

我想把结果`<? echo isset($this->selected) ? (strcmp($key,$this->selected)==0 ? 'selected' : '') : '' ?>`放入一个变量中，然后我就可以了

```
$newSelectVar = <? echo isset($this->selected) ? (strcmp($key,$this->selected)==0 ? 'selected' : '') : '' ?>;
<option value="<?=$key?>" <?=$newSelectVar?> ><?=$value?></option> 
```

我不想这样做，因为我试图只使用内联 PHP（我读到这使得 HTML 更具可读性和可维护性），但我想我已经用`foreach`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:22:19.767

大多数人会开始对您使用模板系统大喊大叫……但是由于 PHP是模板**系统**，因此这是多余的。与其跳出 PHP 模式来输出几个字符的文本，不如试试类似的方法：

```
foreach($this->array as $key => $value)
   $sel = isset($this->selected) ? (strcmp($key,$this->selected)==0 ? 'selected' : '') : '';
   echo <<<EOL
<option value="{$key}" {$sel}>{$value}></option>
EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:55:48.760

**您永远不应该绑定**您的业务逻辑和表示层（在这种情况下为*HTML 模板）。*你现在所做的一切都已经破坏了[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)。

好吧，为了让这个东西更易于维护，你需要*HTML Helper class*之类的东西。这避免了演示中的任何类型的逻辑。

```
class HTMLHelper
{
   public static function isSelected($actual, $expected)
   {
       if ($actual === $expected){
           print 'selected="selected"';
       }
   }

   public static function isChecked()
   {
      // The same goes for checkbox, but you want
      // checked="checked" instead of selected="selected" here
   }
} 
```

**注意**：您应该对专用于它们的模板使用完整的替代品，而不是`<?php { ... ?>`

然后在您的演示文稿中

```
<select>

<?php foreach($this->array as $key => $value) : ?>

    <option value="<?php echo $key;?>" <?php HTMLHelper::isSelected($this->selected, $key);?> ><?php echo $value; ?></option>

<?php endforeach; ?>

</select> 
```

您获得的主要好处是：

1) 模块化。同样`HTMLHelper::isSelected`也可以用于其他模板。

2）[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)

3) 代码变得易于维护

# c# - 在 WPF 中，SortDirection 总是升序

> ID：15791369
> 
> 赞同：1
> 
> 时间：2013-04-03T15:17:39.583
> 
> 标签：c#, wpf, wpf-4.0

这是我的数据网格片段：

```
<DataGrid Margin="0,4,0,0" Grid.Row="2" CanUserSortColumns="True" x:Name="grvDocs" Sorting="grvDocs_Sorting" AutoGenerateColumns="False">
 <DataGrid.Columns>
                <DataGridTemplateColumn Header="Efile ID" Width="100" SortMemberPath="d.DocumentID">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding DocumentID}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
... 
```

这是 C# 代码：

```
 private void grvDocs_Sorting(object sender, DataGridSortingEventArgs e)
    {
        DataGridColumn column = e.Column;

        ListSortDirection direction = (column.SortDirection != ListSortDirection.Ascending) ? ListSortDirection.Ascending : ListSortDirection.Descending;
        //set the sort order on the column
        column.SortDirection = direction;
        e.Handled = true;

        BindDocuments(0, "LastStatusChangedDateTime", e.Column.SortDirection);

    } 
```

然而，当我检查`e.Column.SortDirection`它时，它总是在上升。知道如何解决这个问题吗？我觉得更像 WTF 而不是 WPF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:10:21.760

它接缝`SortMemberPath="d.DocumentID"`应该是`SortMemberPath="DocumentID"`，由于绑定是`Text="{Binding DocumentID}"`。如果您只想显示文本，也可以使用`DataGridTextColumn`并设置属性，只是提示。`Binding`希望有帮助...

# html - 使用带有浮动元素的文本溢出

> ID：15791376
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:04.790
> 
> 标签：html, css, twitter-bootstrap, css-float

我有三个问题。

1.  需要定义左侧元素的宽度，以使其`text-overflow: ellipsis`生效
2.  浮动到右侧的控件始终在线上可见，并且不会被左侧元素向下推
3.  这组 HTML 的容器可重新调整大小，因此无法固定文章标题的大小。不过，控件将始终为 ~160px。

这组 HTML 的容器可重新调整大小。[拖动这个小提琴](http://jsfiddle.net/TPdch/)的结果窗格正是它在我当前应用程序中的工作方式。

CSS

```
.article-title {
    float: left;
    font-size: 18px;
    font-weight: bold;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 85%;
}
.pull-right {
    float: right;
}
.browse-issue {
    margin-right: 1ex;
} 
```

的HTML

```
<span class="article-title" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris a.">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris a.</span>
<div class="pull-right">
    <button type="button" class="browse-issue btn" style="">Browse Issue</button>
    <button type="button" class="print btn"><i class="icon-print"></i></button>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:37:07.717

我有一个暂定的解决方案，涉及将您的代码段包装在`div`：

```
<div class="wrapper">
    <span class="article-title" title="Lorem ipsum dolor sit amet...">Lorem ipsum dolor sit amet...</span>
    <div class="pull-right">
        <button type="button" class="browse-issue btn" style="">Browse Issue</button>
        <button type="button" class="print btn"><i class="icon-print"></i></button>
    </div>
</div> 
```

其样式如下：

```
.wrapper {
    outline: 1px dotted red;
    position: relative;
    padding-right: 0px;
}
.article-title {
    display: block;
    margin-right: 170px;
    font-size: 18px;
    line-height: 1.5;
    font-weight: bold;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    outline: 1px solid blue;
}
.pull-right {
    position: absolute;
    top: 0;
    right: 0;
    outline: 1px dotted blue;
}
.browse-issue {
    margin-right: 1ex;
} 
```

您可以忽略`outline`样式，我将它们放入以帮助我查看元素框。

诀窍是定义一个`wrapper`块元素并使用`absolute`定位将`pull-right`div 放置在包装器的右侧和顶部。

然后，您`display: block`将`article-title`元素并允许一个`right-margin`足以防止测试在按钮下流动的值。

正在工作，`text-overflow: ellipsis`但由于文本不够长，您没有看到效果。

我也调整了`line-height`，但这是可选的。

这应该非常接近您的需要。

小提琴参考：http: [//jsfiddle.net/audetwebdesign/PmUje/](http://jsfiddle.net/audetwebdesign/PmUje/)

# vba - ShowSeriesName 附加 Y 值标签

> ID：15791377
> 
> 赞同：1
> 
> 时间：2013-04-03T15:18:06.617
> 
> 标签：vba, excel, excel-2010

我正在编写一个循环来在 Excel 2010 中创建和格式化 XY 散点图。在我的循环中，我添加了 .ApplyDataLabels ShowSeriesName:=True 并且系列名称显示在我的图表中，但也添加了 Y 值标签。要删除 Y 值标签，我将 .ApplyDataLabels ShowValue:=False 添加到我的代码中，但这也会关闭系列名称标签。这是我的代码：

```
If (Range("Q" & m) >= 40 And Range("R" & m) >= 40) Then
.ApplyDataLabels ShowSeriesName:=True
.ApplyDataLabels ShowValue:=False 'set to false because it didn't work
End If 
```

基本上我只需要在我的图表中显示系列名称，而不是系列名称和 Y 值标签。有没有其他人遇到过这个问题或知道解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:40:43.680

尝试在一行中设置两个参数，例如：

```
If (Range("Q" & m) >= 40 And Range("R" & m) >= 40) Then
   .ApplyDataLabels ShowSeriesName:=True, ShowValue:=False
End If 
```

如果有任何变化，请向我们提供信息。如果没有，请`With...`在您的代码中添加行。

# joomla - Joomla：登录后现有的会话变量消失了

> ID：15791383
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:21.333
> 
> 标签：joomla, joomla2.5

我在一个组件中有一个多页表单。用户不需要首先登录。但如果他们想保存结果，他们需要在某一时刻登录。

我将模型保存在会话中，以便可以在任何页面上访问它：

```
$session =& JFactory::getSession();
$session->set( 'model', serialize($model) ); 
```

并阅读：

```
$session =& JFactory::getSession(); 
$model = unserialize($session->get( 'model', 'empty' )); 
```

这很好用，但如果我在页面上登录，当前会话将被清除，之后只会填充登录信息。

我检查了不同的来源，但我发现的唯一一件事是会话在注销时被清除，但在登录时没有。

谁能告诉我这种行为来自哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:23:56.380

为什么不首先避免这个问题并使用 cookie？如果需要，您可以直接在后端读取和写入 cookie，这样您就不必重写除了保存/读取 cookie 之外的任何逻辑。

# sql - 如何编写脚本来查找 SQL Server 数据库对象（如存储过程和视图）中使用的数据库？

> ID：15791384
> 
> 赞同：1
> 
> 时间：2013-04-03T15:18:22.460
> 
> 标签：sql, database, object

我们在 SQL Server 2012 中的一个数据库（数据库 A）即将停用。我正在分析使用数据库 A 作为数据源的数据库 B 中的所有视图和 StoredProcs。如何编写查询来检索此信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:38:18.320

我使用以下内容在 SQL Server 2008 中获取对象及其依赖项：

```
select *
from (select referenced_database_name, o.name as ViewName, ed.referenced_entity_name as TableName
      from sys.sql_expression_dependencies ed join
           sys.objects o
           on ed.referencing_id = o.object_id
      where referenced_database_name is not null
     ) vdep 
```

您可以添加过滤器来过滤掉您感兴趣或不感兴趣的数据库：

```
where referenced_database_name = 'A' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:34:18.680

一个非常简单的方法是只查询过程文本

```
select p.name 
from sys.procedures p 
    inner join sys.syscomments c ON (p.object_id = c.id)
where c.text like '%database.%' or c.text like '%[database].%' 
```

也可以进行相同的查询`sys.views`。根据数据库名称和我给你的简单算法，你可能会也可能不会得到很好的结果。

我不确定 sp_depends 是否适用于数据库，但我猜你也可以查询数据库的依赖关系，我只是不知道如何。

# delphi - delphi中调用存储过程并获取结果的示例

> ID：15791388
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:34.163
> 
> 标签：delphi, delphi-7

我是德尔福的初学者。我用delphi 7编程。我在sqlserver中有一个名为 (ExpertResult) 的存储过程，它通过字段返回记录，还得到一个名为 (@id) 的参数。我想将参数发送到 sp 并得到结果。但我不能这样做。我尝试了很多并在谷歌中搜索，但任何代码都无法帮助我。其中一个代码是：

```
ExpertResult.Parameters.ParamByName('@id').Value := XYZ;  //XYZ as integer 
```

请帮帮我 。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-12T16:18:11.403

这是在 Delphi 中的操作方法。因为我不知道您的存储过程中有多少输入和输出，所以我用一个输入（字符串）和一个输出（布尔值）来展示它。在对象检查器中，您可以单击参数，它会向您显示所有输入和输出，左侧有一个数字。

```
 ExpertResult.Close; 
   ExpertResult.Params[0] = 'XYZ';
   ExpertResult.Open;  
   MyBoolean := ExpertResult.Params[1];
   ExpertResult.Close; 
```

# javascript - 使用 fadeToggle 淡入和淡出

> ID：15791391
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:40.600
> 
> 标签：javascript, jquery, html, fade

我正在使用 fadeToggle 在循环中淡入淡出几个图像。有没有办法在图像 1 完成淡出后开始淡入图像 2 等等？

这是我正在使用的代码；

```
$(function() {
    function run_animation($element, delay, duration) {
        $element.delay(delay).fadeToggle(duration, function () {
            run_animation($element, delay, duration);
        });
    }
    run_animation($('.pointer1'), 1000, 1200);
    run_animation($('.pointer2'), 3000, 1200);
    run_animation($('.pointer3'), 4500, 1200);
    run_animation($('.pointer4'), 6000, 1200);
    run_animation($('.pointer6'), 7500, 1200);
    run_animation($('.pointer7'), 9000, 1200);
    run_animation($('.pointer8'), 10500, 1200);
}); 
```

# jquery - 从jQuery中的另一个函数获取参数值

> ID：15791392
> 
> 赞同：1
> 
> 时间：2013-04-03T15:18:42.227
> 
> 标签：jquery, html

下面是我的 JavaScript 函数，它从查询字符串中获取“id”的值。

```
function getQueryStringValue() {
            var name = "id";
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if (results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        } 
```

这是我用来录制视频的 jquery 函数：

```
 $(document).ready(function () {
            $("#webcam").scriptcam({
                fileReady: fileReady,
                cornerRadius: 20,
                cornerColor: 'e3e5e2',
                onError: onError,
                promptWillShow: promptWillShow,
                showMicrophoneErrors: false,
                onWebcamReady: onWebcamReady,
                setVolume: setVolume,
                timeLeft: timeLeft,
                fileName: 'demofilename',//This needs to be taken from "getQueryStringValue()"
                connected: showRecord
            });
            setVolume(0);
            $("#slider").slider({ animate: true, min: 0, max: 100, value: 50, orientation: 'vertical', disabled: true });
            $("#slider").bind("slidechange", function (event, ui) {
                $.scriptcam.changeVolume($("#slider").slider("option", "value"));
            });
        }); 
```

我想从函数“getQueryStringValue”中获取文件名。目前它是硬编码的：

```
fileName: 'demofilename' 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:20:57.617

```
...
fileName: getQueryStringValue(),
... 
```

# javascript - 序列化类似于 $.param 但不调用包含方法的对象

> ID：15791393
> 
> 赞同：1
> 
> 时间：2013-04-03T15:18:45.460
> 
> 标签：javascript, jquery

所以我有一个我想序列化的对象，但是该对象包含非幂等方法。是否有内置的 jQuery 方法来处理这个问题，还是我需要构建一些自定义的东西？

这个问题实际上会回答[$resource update 方法的奇怪行为](https://stackoverflow.com/questions/15779574/resource-update-method-behaving-strangely)，它已经变得如此臃肿，我觉得可能值得提出一个新问题，因为该解决方案可能在原始问题的范围之外有用。

**更新**：

为了澄清，我有以下对象作为 console.log 的输出：

```
Resource {$get: function, $save: function, $query: function, $remove: function, $delete: function…}
id: 1
name: "tits"
__proto__: Resource
$delete: function (a1, a2, a3) {
$get: function (a1, a2, a3) {
$query: function (a1, a2, a3) {
$remove: function (a1, a2, a3) {
$save: function (a1, a2, a3) {
$update: function (a1, a2, a3) { 
```

因此，当我通过 $.param() 传递它时，对象上的所有方法都会作为序列化过程的一部分被触发。相反，我只想序列化不触发任何其他方法的对象的属性。

# ruby - DateTime.parse 在 Jumpstart Labs 的事件管理器中工作 8 次后失败

> ID：15791394
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:45.657
> 
> 标签：ruby, datetime

我正在做 Jumpstart Lab 的事件管理器问题，并且已经解决了一天中的时间问题。推荐的方法#strparse 在第一次输入时给了我这个问题，所以我环顾四周并使用了 DT.parse() 和 #strftime，它解析了前几次但在 8 之后就死了……嗯，你会看到的。

我在 Win 7 和 OSX 10.7 上试过这个。都 Ruby 1.9.3

```
require "csv"
require 'date'

contents = CSV.open "C:\\Users\\...\\Desktop\\event_manager\\event_attendees.csv", headers: true,         header_converters: :symbol

def time_of_day(row, id)
    raw_date = row[:regdate]
    if raw_date[-5] == ' ' #Thought the problem might be related to padding
        #raw_date = raw_date.insert(-5, '0')
        return time_of_day_2(raw_date, id)

    end
    p raw_date + " ID: #{id}"
    new_date = DateTime.parse(raw_date) #Line 48
    new_date = new_date.strftime('%l:%M %p')
    new_date +  "ID: #{id}"
end                            

def time_of_day_2(raw_date, id)
    p raw_date + " ID: #{id}"
    '00:00'
end

contents.each do |row|
    name = row[:first_name].capitalize
id = row[0] 
    time_of_day = time_of_day(row, id) #Line 71
    p time_of_day
end 
```

结果是这样的：

```
"11/12/08 10:47 ID: 1"
"10:47 AM ID: 1"
C:/Users/.../Desktop/event_manager/lib/event_manager.rb:48:in `parse"11/12/08 13:23 ID: 2" #I don't know why it prints this up here
" 1:23 PM ID: 2"
"11/12/08 13:30 ID: 3"
" 1:30 PM ID: 3"
"11/12/08 14:04 ID: 4"
" 2:04 PM ID: 4"
"11/12/08 14:46 ID: 5"
" 2:46 PM ID: 5"
"11/12/08 15:00 ID: 6"
" 3:00 PM ID: 6"
"11/12/08 16:05 ID: 7"
" 4:05 PM ID: 7"
"11/12/08 17:18 ID: 8"
" 5:18 PM ID: 8"
"11/13/08 1:32 ID: 9"
"00:00"
"11/13/08 16:40 ID: 10"
': invalid date (ArgumentError)
    from C:/Users/.../Desktop/event_manager/lib/event_manager.rb:48:in `time_of_day'
    from C:/Users/.../Desktop/event_manager/lib/event_manager.rb:71:in `block in <main>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/csv.rb:1792:in `each'
    from C:/Users/.../Desktop/event_manager/lib/event_manager.rb:59:in `<main>'
[Finished in 2.7s with exit code 1] 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:31:09.783

`DateTime.parse`解释`11/13/08`为 YY/MM/DD。没有第 13 个月。

使用[`Datetime::strptime`](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-c-strptime)which 实现 POSIX[`strptime(3)`](http://linux.die.net/man/3/strptime)格式代码以更好地控制日期/时间解析格式：

```
> DateTime.strptime('11/13/08 16:40','%m/%d/%y %H:%M')
=> #<DateTime: 2008-11-13T16:40:00+00:00 ((2454784j,60000s,0n),+0s,2299161j)> 
```

# jenkins - Java堆问题

> ID：15791399
> 
> 赞同：0
> 
> 时间：2013-04-03T15:18:51.703
> 
> 标签：jenkins, out-of-memory, heap-memory

我们正在使用 jenkins 应用程序进行构建和监控.. 有 64 位 JVM 和 64 位 linux.. 我们正面临 java 堆问题，我们将堆限制增加到 512 Mb 到 6 GB 仍然面临同样的问题.. 我们发现对于 32 位机器 JVM Max mem 只有 2 GB？如果我错了，请纠正我 64 位 linux 机器的 JVM 限制是多少？鉴于这种情况，我应该如何处理这种约束？

我可以使用 java 的命令行选项来增加最大堆大小，但是 JVM 限制会覆盖内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:28:31.510

*   对于 32 位 Windows：小于 2GB
*   对于 32 位 BSD/Linux：<3GB
*   对于 32 位 MacOS X：<4GB

对于 64 位更多，试试这个：[链接](http://viralpatel.net/blogs/jvm-java-increase-heap-size-setting-heap-size-jvm-heap/)

命令看这里：[链接](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)

关于堆：[链接](http://java-espresso.blogspot.com/2011/05/heap-structure-in-jvm.html)

# ruby - OpenSSL 添加 CA 进行证书验证

> ID：15791400
> 
> 赞同：1
> 
> 时间：2013-04-03T15:18:56.190
> 
> 标签：ruby, ubuntu, ssl, openssl, public-key-encryption

尝试使用 ruby​​ ( [https://bank.barclays.co.uk/olb/auth/LoginLink.action](https://bank.barclays.co.uk/olb/auth/LoginLink.action) )连接到 SSL 网站

当我连接时，我收到以下错误：

```
:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate     verify failed (OpenSSL::SSL::SSLError) 
```

我已经尝试了所有现有的解决方案：

*   更新 gem (使用 2.0.3) & openssl (使用 1.0.1-4ubuntu5.8)
*   将“ssl_verify_mode”添加到 .gemrc

我需要使用 SSL 验证和高级安全性，因为我要将安全密码转移到银行。

我认为问题在于接收网站的 SSL CA 不受我的计算机信任。但是，与其将操作系统配置为本地信任证书，不如找到一个不依赖于操作系统的解决方案（最好是我可以在运行时将配置传递给 OpenSSL）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:38:35.047

如果你可以使用[Typhoeus 之](https://github.com/typhoeus/typhoeus)类的东西，你可以这样做：

```
Typhoeus::Request.get(url.to_s, :disable_ssl_peer_verification => true) 
```

# ios - 呈现具有透明度和动画的视图控制器

> ID：15791405
> 
> 赞同：7
> 
> 时间：2013-04-03T15:19:05.197
> 
> 标签：ios, cocoa-touch, animation, uiviewcontroller, transparency

我`self.window.rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext;`在我的 Application Delegate 中进行设置，以便我可以呈现一个视图控制器并使视图透明（参见这个 SO [question](https://stackoverflow.com/questions/587681/how-to-use-presentmodalviewcontroller-to-create-a-transparent-view)）。

这很好用，唯一的说明是当视图控制器出现时我无法动画。有没有人让这个工作？如果没有，我还有什么其他选择？

我展示的视图控制器是一个“演练”，它由一个`UIScrollView`和组成`UIPageControl`，它应该“悬停”在界面上，这样你就可以在边缘稍微看到它的背景。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T17:28:05.350

我最终这样做了：

```
AppDelegate *appDelegate = [AppDelegate sharedAppDelegate];

// Set the root VC modal presentation style
appDelegate.window.rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext;

WalkthroughViewController *walkthroughVC = [[WalkthroughViewController alloc] initWithNibName:nil bundle:nil];

[self presentViewController:walkthroughVC animated:NO completion:nil];

// Manually animate the view
walkthroughVC.view.alpha = 0;
[UIView animateWithDuration:0.5 animations:^{
       walkthroughVC.view.alpha = 1;
}];

// Reset root VC modal presentation style 
appDelegate.window.rootViewController.modalPresentationStyle = UIModalPresentationFullScreen; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:24:42.030

您可以使用基本视图控制器中存在的包含视图。代替呈现模态，将包含视图的定位设置为动画以模拟模态呈现。

例如...

```
TransparentViewController *viewController = [[TransparentViewController alloc] init];
viewController.view.frame = CGRectMake(0, 480, 320, 480);
self.containmnetView = viewController.view; 
```

演示这样做：

```
[UIView animateWithDuration:0.5f animations:^{
    self.containmentView.frame = CGRectMake(0, 0, 320, 480);
}]; 
```

我希望这有帮助。

# postgresql - 以 postgres 身份登录但收到错误 createuser: creation of new role failed: 错误: must be superuser to create superusers

> ID：15791406
> 
> 赞同：6
> 
> 时间：2013-04-03T15:19:07.743
> 
> 标签：postgresql, psql

我需要创建一个超级用户，这样我才能创建一个数据库，但我遇到了麻烦。我以用户 postgres 身份登录：

```
sudo su - postgres 
```

但是当我尝试创建超级用户时，我遇到了以下问题：

```
$createuser glassboard;
Shall the new role be a superuser? (y/n) y 
```

createuser：创建新角色失败：错误：必须是超级用户才能创建超级用户

如果我尝试在 psql 中创建一个新用户然后让他成为超级用户，也会发生这种情况：

```
$ psql -U postgres
psql (9.1.4)
Type "help" for help.

postgres=> create user glassboard
postgres-> ;
ERROR:  permission denied to create role 
```

如何创建超级用户？

`\du`在 postgres 中的输出：

```
postgres=> \du

                             List of roles
 Role name |                   Attributes                   | Member of 
-----------+------------------------------------------------+-----------
 main      | Superuser, Create role, Create DB, Replication | {}
 postgres  |                                                | {} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T18:47:18.260

一些 OSX 软件包不创建`postgres`超级用户数据库帐户。超级用户的名称不同，在您的情况下它是`main`.

当您`psql -U main`不指定数据库时，它默认为与用户相同的名称。如果您没有名为的数据库，请使用该选项`main`指示不同的数据库。`-d`

如果您没有要连接的数据库，请使用`template1`

```
psql -U main -d template1 
```

如果您仍然想授予超级用户权限`postgres`，请在 psql 中登录后执行：

```
alter user postgres superuser; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-18T22:06:38.880

在我的 PostgreSQL 9.2 上，`postgres`创建了超级用户，但是当我从该`postgres`用户创建其他超级用户时，我从未收到提示，`Shall the new role be a superuser? (y/n)`因此新用户是使用默认权限创建的。为了解决这个问题，我只是以用户身份运行了这个命令`postgres`：`ALTER USER myuser WITH SUPERUSER;`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-04T20:01:26.737

# Mac OS 默认安装

默认的超级用户不是`postgres`，而是当前的 mac-os 用户。为了解决这个问题：

1\. 使用您当前的（系统）用户连接到您的数据库。下面的示例连接到名为“postgres”的数据库：

```
psql -d postgres 
```

你应该进入 psql 提示符，比如*`postgres=#`*

2\. 将超级用户授予知名`postgres`用户名：

```
ALTER ROLE postgres superuser; 
```

如果一切顺利，您将看到响应：*`ALTER ROLE`*

3\. 享受！*（**退出）***`\q`**

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T16:09:10.333

我在 macOS Sierra（10.12.2）上使用 PostgreSQL 9.6（并不是说我的解决方案不适用于旧版本或新版本），真正对我有用的是使用以下命令行创建另一个用户：

```
createuser -s anotheruser 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-23T08:29:39.610

在创建数据库并以超级用户身份登录该数据库后，遇到了同样的问题，即无法创建新用户。

这对我有用（不幸的是我没有时间研究为什么），在 Debian 10，Postgresql12

以默认超级用户身份登录系统默认数据库（postgres）（在我的情况下，我刚刚安装了它，所以）。

psql -d postgres

然后我能够创建用户，使用完全相同的命令行在我创建的数据库下登录时不起作用：使用密码'yyyyyy'创建用户xxxx；

然后我在我创建的新数据库上授予了所有权限

将数据库 new_created_database 上的所有权限授予 xxxx；*

# java - Java：将桌面流式传输到 Android

> ID：15791407
> 
> 赞同：0
> 
> 时间：2013-04-03T15:19:15.320
> 
> 标签：java, android, remote-desktop, live-streaming

我需要创建一个将桌面流式传输到 Android（实时）的 Window 应用程序。

我需要一个起点来完成这项工作。

首先，我对 VLCJ 有疑问，但我有 2 个问题。

*   第 1 次：我使用 VLC 播放器进行了探测，通过以下方式将我的桌面流式传输到 Android：

    ```
    :sout=#transcode{vcodec=h264,vb=800,fps=5,scale=1,width=400,height=240,acodec=none}:rtp{sdp=rtsp://:8554/test} :sout-all :ttl=12 :sout-keep 
    ```

    我有一个很大的延迟！像 15 秒。

*   第二个问题是我必须在其中生效才能流式传输。例如：我必须放大。我不知道 VLCJ 是否可行，但我没有找到任何方法来做到这一点。

所以现在我需要另一种方式来完成我的工作。

如果可能的话，有人会通过一些建议或示例代码来帮助我做这件事吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:23:30.263

您可能想查看[VNC](http://en.wikipedia.org/wiki/Virtual_Network_Computing)协议。

# javascript - 使用 dojo 在 dojox.dgauges 中的 textIndicatorPrecision

> ID：15791408
> 
> 赞同：2
> 
> 时间：2013-04-03T15:19:16.543
> 
> 标签：javascript, jquery, css, dojo

Dgauges中添加精度的属性名称是什么，在dojox.gauges中为textIndicatorPrecision，如noChange被interactionArea替换。

我使用 dojox.dgauges 在我的圆形仪表中添加了一个指示器，但我想添加一个精度。

代码 ：

```
 var indicatorText = new dojox.dgauges.TextIndicator(); 
  indicatorText.set("indicator",indicator); 
  indicatorText.set("x", 130); 
  indicatorText.set("y", 154); 
  gauge.addElement("indicatorText", indicatorText); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:24:14.403

此属性没有替代品。您必须定义自己的 labelFunc。例子：

```
var textIndicator = new TextIndicator();
... 
textIndicator.labelFunc = function(v){
    return v.toFixed(2);
} 
```

# c# - WinRT 共享合同的范围

> ID：15791409
> 
> 赞同：1
> 
> 时间：2013-04-03T15:19:18.057
> 
> 标签：c#, windows-8, winrt-xaml

嗨，我如何控制股票合约的范围？

我有一个利用共享文件的 WinRT 应用程序。我想控制哪些应用程序可用。

现在我可以看到 Mail、Skydrive 和我自己的应用程序。但我想从共享合同的目标应用列表中禁用我自己的应用。或者添加一些自定义的东西......

任何指示或资源如何做到这一点都会很棒......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T06:53:49.810

“如果你的应用有内容要分享，那么你的应用就是分享源。如果你的应用可以从其他应用接收内容，那么它就是分享目标。当然，应用可以同时是两个！

注意：如果您的应用既是特定数据格式的源又是目标，那么每次人们从您的应用共享时，它默认显示在共享目标列表中。有时这很棒，有时与自己分享有点傻。如果这很愚蠢，那么您应该显示一条错误消息，提示用户选择不同的目标应用程序。"

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465251.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465251.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:51:35.967

作为共享源应用程序的开发人员，您无法控制哪些应用程序成为可接受的目标。操作系统只会找到与您正在共享的数据类型（如未格式化的文本、图像、文件、URI 等）匹配的共享目标应用程序，并让这些应用程序可供共享。

但是，作为最终用户，您可以选择从共享合同的目标应用列表中禁用应用。打开设置超级按钮，然后从底部选择“更改电脑设置”。选择左侧边栏上的“共享”，然后在右侧的“使​​用这些应用程序共享”下，找到要从共享目标列表中删除的应用程序并将其切换设置为“关闭”。

# cxf - JBOSS 7.1.1 部署 CXF jar

> ID：15791415
> 
> 赞同：0
> 
> 时间：2013-04-03T15:19:42.423
> 
> 标签：cxf, jboss7.x

我对应用服务器非常陌生，最近切换到 JBOSS 7.1.1。

我知道这是随 Apache CXF 一起提供的，但最初没有部署 CXF jar？

我如何部署它们。我想我必须将依赖项插入到 MANIFEST.MF 中。但是哪个清单，即哪个罐子，使用一些研究看起来像是在一个清单中设置依赖项意味着它可以被其他罐子拾取，所以我把它放在哪里重要吗？

另外，一旦我编辑了 MANIFEST，appserver 是否会在重新启动时获取新的依赖关系，有没有办法判断 CXF jars 是否确实已部署？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:08:44.373

CXF jars（即 JBOSS 7.x 术语中的模块）在启动时默认可供您使用。您不需要在 MANIFEST.MF 文件中插入依赖项。如果您还有其他问题，请告诉我。

# opencv - 结合背景减法和光流

> ID：15791417
> 
> 赞同：0
> 
> 时间：2013-04-03T15:19:48.910
> 
> 标签：opencv, background-subtraction, opticalflow

我正在尝试通过缓慢的照明变化（=背景变化）进行一些移动物体检测（从背景中分割前景移动物体）。有时物体的 osme 部分与背景大小相同，因此斑点检测不稳健或不准确。

我认为结合背景减法（颜色和渐变）和光流可以得到更好的结果。从opencv示例中，我尝试了两者的代码并且很容易理解，但我不知道如何将它们结合起来。

欢迎任何提示或建议！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T18:10:11.260

1.  调用 goodfeaturestotrack 获取跟踪点。
2.  使用光流获取下一帧中的对应点。
3.  获取该帧中点的边界框。
4.  选择比您在步骤 3 中获得的边界框稍大的区域 (ROI)。
5.  从相同的投资回报率中减去这个投资回报率，但相对于你的背景。所以它的`currentframeROI - backgroundROI = moving object` where `currentFrameROI = currentFrame(ROI) and backgroundROI = background(ROI).`最好选择第一帧作为背景或物体静止的帧。
6.  这甚至适用于多个移动物体。

# jquery - 将数据和链接属性传递给新的 div

> ID：15791418
> 
> 赞同：1
> 
> 时间：2013-04-03T15:19:51.833
> 
> 标签：jquery

这是我上一个问题的第 2 部分。这是标记：

html

```
<a data-message="my message" href="www.site.com">click here</a>

<div class="new-window">
    <p>(my message)</p>
    <a href="LINK-GOES-HERE">proceed</a>
</div> 
```

js

```
$('a[data-message]').click(function(){
    $('.new-window').fadeIn(300);
    $('.new-window p').text($(this).data('message'));
    return false;
}); 
```

由于页面上有一些链接，我想要一个自定义 div 窗口（而不是标准警报）显示一条消息和传递给新窗口的 url。有没有办法将所选链接的 URL 传递到新窗口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:23:14.890

```
 $('.new-window p').text( this.href ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:23:23.303

这可能会有所帮助：

```
$('a[data-message]').click(function(){
        console.log($(this).attr('href'));
        $('.new-window').fadeIn(300);
        $('.new-window p').text($(this).data('message'));
        return false;
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:26:14.747

后：

```
$('.new-window p').text($(this).data('message')); 
```

添加：

```
$('.new-window a').attr('href', $(this).attr('href')); 
```

# css - 经典 ASP 条件 If 语句损坏样式表

> ID：15791421
> 
> 赞同：1
> 
> 时间：2013-04-03T15:20:00.860
> 
> 标签：css, if-statement, asp-classic

谁能告诉我为什么关于字体大小的条件 if 语句不起作用。此代码来自其他网页使用的 asp/css 样式表。当我取出 IF 语句时，样式表返回到使用 If 语句作为背景颜色。

我认为它看起来是正确的，我无数次地检查了它的语法，但它肯定不起作用。它与一个简单的表单页面一起运行。Response.Cookies("sizeFont") 存储在另一个页面上，我知道这是有效的，因为我将值打印到屏幕上进行测试。

我的 asp/css 样式表中的代码：

```
TH, TD { border: 3px solid black; padding: 1}

<%
bgc= Request.Cookies("choicebgc")
If(bgc = "brown") then
    Response.Write("body{background-color:#D99756}")
ElseIf(bgc = "green") then
    Response.Write("body{background-color:#8EB16A}")
End If
%>
<%
font= Response.Cookies("sizeFont")
If(font= "12") then
    Response.Write("p{font-size:12pt}")
ElseIf(font= "16") then
    Response.Write("p{font-size:16pt}")
End If
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:23:04.290

响应.Cookies？你的意思是Request.cookies吗？

# java - Java clone() 方法使用 new 关键字和复制构造函数而不是 super.clone()

> ID：15791427
> 
> 赞同：0
> 
> 时间：2013-04-03T15:20:32.947
> 
> 标签：java, clone, copy-constructor, deep-copy

在网上搜索如何以多态方式对对象进行深层复制时，我找到了一个声称可以解决该方法的许多问题的解决[方案](http://www.agiledeveloper.com/articles/cloning072002.htm)`clone()`，例如无法克隆`final`字段。该解决方案在实现中结合了受保护的复制构造函数的使用`clone()`，基本上是这样的（从引用页面复制的示例）：

```
public class Person implements Cloneable
{
    private final Brain brain; // brain is final since I do not want 
                               // any transplant on it once created!
    private int age;

    public Person(Brain aBrain, int theAge)
    {
        brain = aBrain; 
        age = theAge;
    }

    protected Person(Person another)
    {
        Brain refBrain = null;
        try
        {
            refBrain = (Brain) another.brain.clone();
            // You can set the brain in the constructor
        }
        catch(CloneNotSupportedException e) {}
        brain = refBrain;
        age = another.age;
    }

    public Object clone()
    {
        return new Person(this);
    }

    …
} 
```

的`clone()`方法`Brain`可以以类似的方式实现。

根据该[方法的](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)[文档`clone()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)，似乎该方法的所有“约定”都“不是绝对要求”，“返回的对象应通过调用获得`super.clone()`”只是一种约定。

那么，这个实现真的不正确吗？为什么？

如果它是正确的，为什么它没有成为一种设计模式？这有什么缺点？？？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:34:55.000

您正在尝试通过实现可克隆接口进行克隆，但未遵循推荐的克隆合同。

您基本上是在使用复制构造函数创建新对象，我的问题是为什么您需要实现可克隆？

如果您正在实施可克隆，那么您必须遵守合同。当您在 clone 方法中使用复制构造函数时，我不会推荐这种方法，因为它的子类的克隆将不是子类的对象，而是 Person 类的对象。

还要指出的是，使用复制构造函数而不是可克隆接口是更面向对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:47:56.823

> 那么，这个实现真的不正确吗？为什么？

这不安全，因为 CloneNotSupportedException 被丢弃。

如果 Brain 不可克隆 new Person 将没有大脑 :) 如果您的对象结构中有一个您无法控制的对象（无法访问源）怎么办？

> 为什么它没有成为一种设计模式

因为并非所有对象都可以仅从相似对象中克隆出来。通常，有些环境对象比它现有的邻居对象更清楚这个特定的新对象会是什么样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:26:29.707

这种方法的缺点（除了 a`CloneNotSupportedException`被删除的事实之外）是，如果子类调用`super.clone()`它们将得到一个实例`Person`而不是他们自己的类的实例，正如他们所期望的那样。

如果您知道子类不会依赖`Object.clone()`（或者如果没有子类） ，您的方法就可以了

# maven-cargo - 使用已部署的 WAR 启动货物

> ID：15791429
> 
> 赞同：0
> 
> 时间：2013-04-03T15:20:34.330
> 
> 标签：maven-cargo

我正在使用一个 Web 应用程序的插件机制，该机制与货物一起在本地部署。所以我主要在插件中进行更改，而不是在应用程序（WAR）本身中进行更改。但是在启动 cargo 时，即使没有任何修改，它每次都会部署 WAR 文件。货物可以这样配置吗，比如说重用已经部署的war文件以节省时间？

我当前的 mvn 文件：

```
<plugin>
   <groupId>org.codehaus.cargo</groupId>
   <artifactId>cargo-maven2-plugin</artifactId>
   ...
    <deployables>
        <deployable>
           <location>${project.build.directory}/${project.build.finalName}</location>
           <pingURL>http://localhost:8080</pingURL>
           <properties>
              <context></context>
           </properties>
         </deployable>
    </deployables> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:16:48.483

找到默认为 true 的 cargo.tomcat.copywars 参数。 [http://cargo.codehaus.org/Configuration+properties](http://cargo.codehaus.org/Configuration+properties)

# c++ - 如果程序在调试时内存损坏，但在发布时运行良好，是否可以？

> ID：15791432
> 
> 赞同：0
> 
> 时间：2013-04-03T15:20:37.930
> 
> 标签：c++, debugging, memory-leaks, heap-memory, corruption

我有一个程序在调试时会导致内存损坏，但在发布时运行得很好。为了增加陌生感，程序在“崩溃”之前完成了它的功能（它将数据保存到文件中）。这是否意味着 Visual Studio 根本不喜欢我的程序，或者这是否意味着我有一个需要修复的严重错误？一般来说，如果调试模式崩溃，是否总是意味着程序有问题，或者是否可能只是程序在调试模式下运行的方式有问题，所以我不必太担心？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:22:35.573

这几乎可以肯定是您的应用程序中的一个错误，需要跟踪和修复。

有许多类型的错误会导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。某些类型的未定义行为（例如内存损坏）可能表现为看似随机的故障，这些故障在程序​​中发生的时间比导致它们的错误要晚得多。

在调试模式下，Visual Studio 会竭尽全力确保此类故障尽早发生并尽可能突出。在发布模式下，重点是性能。

[在https://stackoverflow.com/a/312352/367273](https://stackoverflow.com/a/312352/367273)中有一个很好的总结调试和发布之间的一些差异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:22:41.893

不，这不行。这很可能意味着某些变量或指针未初始化。在调试模式下，此类未初始化的值通常默认为 0，而在发布（优化）代码中不使用这种默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:22:20.970

这意味着您有严重的错误需要修复。最可能的原因是您使用了未初始化的变量。在 VS 中，这是程序在调试和发布时运行方式不同的最常见原因。

# c# - 仅捕获表单一部分的屏幕截图？

> ID：15791433
> 
> 赞同：3
> 
> 时间：2013-04-03T15:20:39.710
> 
> 标签：c#, winforms, screenshot

我目前有一个winform，在运行时，我需要截取其中的一部分并将其保存为图像。特别是，我想要一个名为“panel1”的面板的屏幕截图。我已经能够找到有关如何获取整个网络表单或整个屏幕的屏幕截图的信息……但我很难找到有关仅获取屏幕一部分的信息。

有没有人有任何信息可以为我指明正确的方向？即使是我应该寻找的 MSDN 网站上的文档名称也会有很大的帮助！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:22:28.157

派生的`Control`类有一个方法。你可以用那个。`Panel``DrawToBitmap()`

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:23:15.547

查看[Graphics.CopyFromScreen](http://msdn.microsoft.com/en-us/library/fw1kt6f9.aspx)的文档。您将 2 组 X/Y 坐标传递给它——屏幕上的坐标和位图中的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:13:04.820

```
 #region - Capture & Graphic API  -

        #region GDI32
        public const int SRCCOPY = 0x00CC0020; // BitBlt dwRop parameter

        [DllImport("gdi32.dll")]
        public static extern bool BitBlt(IntPtr hObject, int nXDest, int nYDest,
            int nWidth, int nHeight, IntPtr hObjectSource,
            int nXSrc, int nYSrc, int dwRop);

        [DllImport("gdi32.dll")]
        public static extern bool StretchBlt(
              IntPtr hdcDest,      // handle to destination DC
              int nXOriginDest, // x-coord of destination upper-left corner
              int nYOriginDest, // y-coord of destination upper-left corner
              int nWidthDest,   // width of destination rectangle
              int nHeightDest,  // height of destination rectangle
              IntPtr hdcSrc,       // handle to source DC
              int nXOriginSrc,  // x-coord of source upper-left corner
              int nYOriginSrc,  // y-coord of source upper-left corner
              int nWidthSrc,    // width of source rectangle
              int nHeightSrc,   // height of source rectangle
              int dwRop       // raster operation code
            );

        [DllImport("gdi32.dll")]
        public static extern IntPtr CreateCompatibleBitmap(IntPtr hDC, int nWidth,
            int nHeight);
        [DllImport("gdi32.dll")]
        public static extern IntPtr CreateCompatibleDC(IntPtr hDC);
        [DllImport("gdi32.dll")]
        public static extern bool DeleteDC(IntPtr hDC);
        [DllImport("gdi32.dll")]
        public static extern bool DeleteObject(IntPtr hObject);
        [DllImport("gdi32.dll")]
        public static extern IntPtr SelectObject(IntPtr hDC, IntPtr hObject);
        #endregion

        #region - USER32 -
        [StructLayout(LayoutKind.Sequential)]
        public struct RECT
        {
            public int left;
            public int top;
            public int right;
            public int bottom;
        }

        [DllImport("user32.dll")]
        public static extern IntPtr GetDesktopWindow();
        [DllImport("user32.dll")]
        public static extern IntPtr GetWindowDC(IntPtr hWnd);
        [DllImport("user32.dll")]
        public static extern IntPtr ReleaseDC(IntPtr hWnd, IntPtr hDC);
        [DllImport("user32.dll")]
        public static extern IntPtr GetWindowRect(IntPtr hWnd, ref RECT rect);

        #endregion

    #endregion

   private void run_test()
   {

        Rectangle rc = new Rectangle();
        Image img = ScreenToImage(ref rc, false);

        img.Save(filename, System.Drawing.Imaging.ImageFormat.Jpeg);
        img.Dispose();

   }

    private Image ScreenToImage(ref Rectangle rcDest, bool IsPapaer)
    {
        IntPtr handle = this.Handle;

        //this.Handle
        // get te hDC of the target window
        IntPtr hdcSrc = GetWindowDC(handle);
        // get the size
        RECT windowRect = new RECT();
        GetWindowRect(handle, ref windowRect);
        int nWidth = windowRect.right - windowRect.left;
        int nHeight = windowRect.bottom - windowRect.top;

        if (IsPapaer)
        {
            float fRate = (float)rcDest.Width/nWidth;
            //float fHeight = nHeight * fRate;
            //rcDest.Height = (int)(nHeight * fRate);
            //rcDest.Width = (int)(rcDest.Width);// * fRate);
            rcDest.X = 0;
            rcDest.Y = 0;
            rcDest.Height = (int)(nHeight * fRate);
            //rcDest.Width = (int)(nWidth * fRate);
        }
        else
        {
            rcDest.X = 0;
            rcDest.Y = 0;
            rcDest.Height = nHeight;
            rcDest.Width = nWidth;
        }

        // create a device context we can copy to
        IntPtr hdcDest = CreateCompatibleDC(hdcSrc);
        // create a bitmap we can copy it to,
        // using GetDeviceCaps to get the width/height
        IntPtr hBitmap = CreateCompatibleBitmap(hdcSrc, rcDest.Width, rcDest.Height);
        // select the bitmap object
        IntPtr hOld = SelectObject(hdcDest, hBitmap);
        // bitblt over
        StretchBlt(hdcDest, rcDest.X, rcDest.Y, rcDest.Width, rcDest.Height, hdcSrc, 0, 0, nWidth, nHeight, SRCCOPY);
        // restore selection
        SelectObject(hdcDest, hOld);
        // clean up 
        DeleteDC(hdcDest);
        ReleaseDC(handle, hdcSrc);

        // get a .NET image object for it
        Image img = Image.FromHbitmap(hBitmap);
        // free up the Bitmap object
        DeleteObject(hBitmap);
        return img;
    } 
```

# .net - 带有构造函数的列表的 DotNet XmlSerializer

> ID：15791434
> 
> 赞同：1
> 
> 时间：2013-04-03T15:20:40.633
> 
> 标签：.net, deserialization, xmlserializer

我在 XmlSerializer 中发现了一些意外行为。如果您对列表具有默认构造函数的对象列表进行脱轨，则该列表也会被附加。

**任何人都知道如何解决这个问题？这是一个例子。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.IO;

namespace XmlSerialiserTest
{
    public class Schedule
    {
        public Schedule()
        {
            Days = new List<DayOfWeek>() { DayOfWeek.Monday };
            Time = DateTime.UtcNow;
        }
        public List<DayOfWeek> Days { get; set; }
        public DateTime Time { get; set; }
        public override string ToString()
        {
            return String.Format("{0},{1}", Time.ToShortTimeString(), string.Join(",", Days));
        }

    }

    public class Schedules
    {
        public List<Schedule> ScheduleList { get; set; }
        public Schedules()
        {
            ScheduleList = new List<Schedule>();
        }
        public override string ToString()
        {
            return string.Join(":",ScheduleList);
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            // create a our list of Schedule with one schedule in
            // default constructor will give us Monday by default
            Schedules schedulesOut = new Schedules();
            schedulesOut.ScheduleList.Add(new Schedule());
            // Save
            XmlSerializer s = new XmlSerializer(typeof(Schedules));
            TextWriter writer = new StreamWriter("C:\\xmltest.xml");
            s.Serialize(writer,schedulesOut);
            writer.Close();
            Console.WriteLine(schedulesOut);
            // Output is 15:09,Monday
            // Now saved to disk and read back

            TextReader reader = new StreamReader("C:\\xmltest.xml");
            Schedules schedulesIn = (Schedules)s.Deserialize(reader);
            Console.WriteLine(schedulesIn);
            // Output is 15:09,Monday,Monday
            // schedulesIn in now contains two Mondays ,not one as expected

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:52:46.843

将列表更改为数组。这按预期工作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.IO;

namespace XmlSerialiserTest
{
    public class Schedule
    {
        public Schedule()
        {
           Days = new[] { DayOfWeek.Monday };
           Time = DateTime.UtcNow;
        }
        public DayOfWeek[] Days { get; set; }
        public DateTime Time { get; set; }
        public override string ToString()
        {
            return String.Format("{0},{1}", Time.ToShortTimeString(), string.Join(",",     Days));
    }

 }

public class Schedules
{
    public List<Schedule> ScheduleList { get; set; }
    public Schedules()
    {
        ScheduleList = new List<Schedule>();
    }
    public override string ToString()
    {
        return string.Join(":",ScheduleList);
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        // create a our list of Schedule with one schedule in
        // default constructor will give us Monday by default
        Schedules schedulesOut = new Schedules();
        schedulesOut.ScheduleList.Add(new Schedule());
        // Save
        XmlSerializer s = new XmlSerializer(typeof (Schedules));
        TextWriter writer = new StreamWriter("C:\\xmltest.xml");
        s.Serialize(writer, schedulesOut);
        writer.Close();
        Console.WriteLine(schedulesOut);
        // Output is 15:09,Monday
        // Now saved to disk and read back

        TextReader reader = new StreamReader("C:\\xmltest.xml");
        Schedules schedulesIn = (Schedules) s.Deserialize(reader);
        Console.WriteLine(schedulesIn);
        // Output is 15:09,Monday,Monday
        // schedulesIn in now contains two Mondays ,not one as expected

    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:45:57.653

这是预期的行为。为了能够“实例化”您的对象，它将始终调用无参数构造函数。实际上，为了能够反序列化，您总是需要一个无参数的构造函数。

因为您的构造函数会创建列表并将其添加`Monday`为值，所以默认情况下，反序列化的对象将包含此值。

尽管您确实可以使用数组，但我建议您*分离关注点*并使用工厂方法手动创建`Schedule`对象。然后工厂可以用星期一初始化第一个值。

请注意，您确实需要用于反序列化的公共无参数构造函数。通常在使用工厂模式时，您会希望限制对构造函数的访问。

# inversion-of-control - 共享 MEF 部件/导出以实现模块之间的可重用性

> ID：15791443
> 
> 赞同：2
> 
> 时间：2013-04-03T15:20:54.760
> 
> 标签：inversion-of-control, unity-container, mef, ioc-container, modularity

我正在编写一个 WPF MEF 应用程序。过去，我使用 PRISM 编写了基于 WPF IoC 的应用程序和代码结构模块，如下所示：

*   **Shell** - 主要可执行文件
*   **BusinessArea.Module.Interface** - 包含 BusinessArea 模块的服务、视图模型和视图的所有接口。
*   **BusinessArea.Module** - 包含 PRISM IModule 的实现并实现 BusinessArea.Module.Interface 项目中的接口。
*   **OtherBusinessArea.Module.Interface** - 另一个模块
*   **OtherBusinessArea.Module** - 另一个模块接口

在 IoC 世界中，每个模块在加载时都会向 IoC 容器注册其组件。如果我希望我的两个模块相互重用组件，他们只需要引用我的一个接口项目并注入组件即可。

然而，在 MEF 中，我真的找不到任何好的做法或指导方针来将部件分成模块以及这种类型的模块间重用组件。我有五个问题：

1.  我应该继续为我的所有部分创建接口吗？
2.  我应该在整个应用程序中使用一个共享容器还是每个模块一个共享容器（每个模块都是从 Windows 8 样式的开始菜单启动的一种单独的应用程序）。
3.  如果一个模块想使用另一个模块中的一部分，我该如何保持分离。
4.  如果一个模块想使用另一个容器中的一部分，我该如何保持分离。
5.  如何最好地在具有大量模块的应用程序中保持快速性能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T07:27:37.600

1.  是的你应该。如果您将模块导出为它们自己的实现类型而不是接口，则导入模块的使用模块需要引用包含模块实现的库。使用 IoC 的主要原因之一就是避免这种情况。

2.  是的，你应该有一个容器。如果您的模块包含容器，您将无法使用它导出/导入此模块，因为您需要在容器存在之前拥有该模块的实例。这里没有真正的 MEF 特定问题，它与 Unity 或其他任何东西相同。对于您的 PRISM 应用程序，其想法是将模块的实例化和连接的关注点分离到一个地方，即容器。容器在引导程序中的任何其他内容之前创建，然后创建外壳、模块、服务以及您需要的任何内容。在您的应用程序中使用其他 IoC 容器来管理在完全不同的上下文中的对象的实例化和引用是有意义的，假设不是为了您的 UI，而是为了将复杂的业务对象连接在一起。还有，它**使用 MEF 在主容器*不知道的内部（私有）容器中自行组装模块*可能是有意义的。*比你有一个带有模块的*复合 UI*，这些模块本身就是*复合 UI*。如果您真的需要，请仔细考虑。你很容易遇到这种东西的问题，例如两次加载程序集等等。*

**   和以前一样。Module B 引用 ModuleA 的接口项目，然后导入 IModuleA 类型的字段或参数。容器将解析依赖注入 ModuleA。

    *   如前所述，你真的应该让你的架构直截了当。如果要在模块之间注入依赖项，它们应该在同一个容器中。这就是国际奥委会的想法。

    *   我正在开发一个具有多个 IoC 容器的复杂应用程序。我将 MEF 用于 UI，即 shell 和几个 UI 模块。对于更多与业务逻辑相关的东西，我使用*AutoFac* IoC 容器。主要是因为 Autofac 是一个“真正的”IoC 容器，而 MEF 不是，还因为它更快。Autofac 可以做 MEF 可以做的任何事情，下次我也会在 UI 上使用 Autofac 而不是 MEF。* 

 *很多问题一个问题....

这是我前段时间提出的类似问题的答案，希望对您也有帮助：

我只能在这里原则性地解释该系统，但它可能会为您指明正确的方向。每件事都有很多方法，但这是我理解的最佳实践，也是我在以下方面取得了非常好的经验：

**自举**

与 Prism 和 Unity 一样，这一切都始于 Bootstrapper，它源自`MefBootstrapper`in `Microsoft.Practices.Prism.MefExtensions`。引导程序设置 MEF 容器并因此导入所有类型，包括服务、视图、ViewModel 和模型。

**导出视图（模块）**

这是 MatthiasG 所指的部分。我的做法是 GUI 模块的以下结构：

*   `[Export(typeof(MyModel)]`模型使用属性将自身导出为其具体类型（也可以是接口，参见 MatthiasG） 。标记`[PartCreationPolicy(CreationPolicy.Shared)]`以表示仅创建一个实例（单例行为）。

*   ViewModel 像模型一样将自身导出为其具体类型，并通过构造函数注入导入模型：

    [ImportingConstructor] public class MyViewModel(MyModel model) { _model = model; }

*   View 通过构造函数注入导入 ViewModel，与 ViewModel 导入 Model 的方式相同

*   现在，这很重要：View 使用特定属性导出自身，该属性派生自“标准”`[Export]`属性。这是一个例子：

    [ViewExport(RegionName = RegionNames.DataStorageRegion)] public partial class DataStorageView { [ImportingConstructor] public DataStorageView(DataStorageViewModel viewModel) { InitializeComponent(); 数据上下文 = 视图模型；} }

**[ViewExport] 属性**

属性做了`[ViewExport]`两件事：因为它派生自`[Export]`属性，所以它告诉 MEF 容器导入视图。作为什么？这隐藏在它的定义中：构造函数签名如下所示：

```
public ViewExportAttribute() : base(typeof(UserControl)) {} 
```

通过调用`[Export]`type of的构造函数`UserControl`，每个视图都`UserControl`在 MEF 容器中注册。

其次，它定义了一个属性，该属性`RegionName`稍后将用于决定应将视图插入到 Shell UI 的哪个区域。RegionName 属性是接口的唯一成员`IViewRegionRegistration`。属性类：

```
/// <summary>
/// Marks a UserControl for exporting it to a region with a specified name
/// </summary>
[Export(typeof(IViewRegionRegistration))]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
[MetadataAttribute]
public sealed class ViewExportAttribute : ExportAttribute, IViewRegionRegistration
{
    public ViewExportAttribute() : base(typeof(UserControl)) {}

    /// <summary>
    /// Name of the region to export the View to
    /// </summary>
    public string RegionName { get; set; }
} 
```

**导入视图**

现在，系统的最后一个关键部分是*行为*，您将其附加到外壳的区域：`AutoPopulateExportedViews`行为。这将使用以下行从 MEF 容器中导入所有模块：

```
[ImportMany] 
private Lazy<UserControl, IViewRegionRegistration>[] _registeredViews; 
```

这会从容器中导入所有注册为的类型`UserControl`，如果它们具有实现`IViewRegionRegistration`. 因为您的`[ViewExport]`属性确实如此，这意味着您导入了每个标有 的类型`[ViewExport(...)]`。

最后一步是将视图插入区域，bahvior 在其`OnAttach()`属性中执行此操作：

```
/// <summary>
/// A behavior to add Views to specified regions, if the View has been exported (MEF) and provides metadata
/// of the type IViewRegionRegistration.
/// </summary>
[Export(typeof(AutoPopulateExportedViewsBehavior))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class AutoPopulateExportedViewsBehavior : RegionBehavior, IPartImportsSatisfiedNotification
{
    protected override void OnAttach()
    {
        AddRegisteredViews();
    }

    public void OnImportsSatisfied()
    {
        AddRegisteredViews();
    }

    /// <summary>
    /// Add View to region if requirements are met
    /// </summary>
    private void AddRegisteredViews()
    {
        if (Region == null) return;

        foreach (var view in _registeredViews
            .Where(v => v.Metadata.RegionName == Region.Name)
            .Select(v => v.Value)
            .Where(v => !Region.Views.Contains(v)))
            Region.Add(view);

    }

    [ImportMany()] 
    private Lazy<UserControl, IViewRegionRegistration>[] _registeredViews;
} 
```

注意`.Where(v => v.Metadata.RegionName == Region.Name)`。这使用属性的 RegionName 属性来仅获取为特定区域导出的那些视图，您将行为附加到。

该行为会附加到引导程序中的 shell 区域：

受保护的覆盖 IRegionBehaviorFactory ConfigureDefaultRegionBehaviors() { ViewModelInjectionBehavior.RegionsToAttachTo.Add(RegionNames.ElementViewRegion);

```
var behaviorFactory = base.ConfigureDefaultRegionBehaviors();
behaviorFactory.AddIfMissing("AutoPopulateExportedViewsBehavior", typeof(AutoPopulateExportedViewsBehavior)); 
```

}

我们已经完成了一个完整的循环，我希望这能让您了解 MEF 和 PRISM 是如何实现的。

而且，如果你还不觉得无聊：这是完美的：

[Mike Taulty 的截屏视频](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/12/31/silverlight-4-screencasts-the-managed-extensibility-framework-mef.aspx)*

# perl - Perl - 附加到文件的最后一行

> ID：15791458
> 
> 赞同：11
> 
> 时间：2013-04-03T15:21:26.073
> 
> 标签：perl, append

我是 Perl 新手，有人可以告诉我如何根据当前值附加输出文件的最后一个条目吗？例如，我正在生成一个输出 txt 文件说

```
a b c d 10 
```

通过一些处理，我得到值 20，现在我希望分配这个值 20 并与之前的集合对齐

```
a b c d 10 
```

并使其成为

```
a b c d 10 20 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T15:27:17.093

假设最后一行没有换行符

```
use strict;
use warnings;

open(my $fd, ">>file.txt");
print $fd " 20"; 
```

如果最后一行已经有换行符，则输出将在下一行结束，即

```
a b c d 10
 20 
```

在这两种情况下工作的更长版本将是

```
use strict;
use warnings;

open(my $fd, "file.txt");
my $previous;
while (<$fd>) {
    print $previous if ($previous);
    $previous = $_;
}

chomp($previous);
print "$previous 20\n"; 
```

但是，此版本不会修改原始文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:27:26.740

## 尝试这样做

*单行*版本

```
perl -pe 'eof && do{chomp; print "$_ 20"; exit}' file.txt 
```

脚本版本

```
#!/usr/bin/env perl

use strict; use warnings;

 while (defined($_ = <ARGV>)) {
    if (eof) {
        chomp $_;
        print "$_ 20";
        exit;
    }
}
continue {
    die "-p destination: $!\n" unless print $_;
} 
```

## 样本输出

```
$ cat file.txt
a b c d 08
a b c d 09
a b c d 10

$ perl -pe 'eof && do{chomp; print "$_ 20"; exit}' file.txt
a b c d 08
a b c d 09
a b c d 10 20 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T15:31:37.447

```
perl -0777 -pe 's/$/ 20/' input.txt > output.txt 
```

说明：通过使用 设置输入记录分隔符来读取整个文件，`-0777`对匹配文件结尾或最后一个换行符之前的读取数据执行替换。

您也可以使用该`-i`开关对输入文件进行就地编辑，但这种方法是有风险的，因为它会执行不可逆的更改。它可以与备份一起使用，例如`-i.bak`，但是该备份在多次执行时会被覆盖，所以我通常建议使用 shell 重定向，就像我在上面所做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T11:25:52.950

首先读取整个文件，您可以通过以下子程序来完成`read_file`：

```
sub read_file {
    my ($file) = @_;
    return do {
        local $/;
        open my $fh, '<', $file or die "$!";
        <$fh>
    };
}

my $text = read_file($filename);
chomp $text;
print "$text 20\n"; 
```

# pdf - 在 Joomla 3.0 中强制下载 pdf

> ID：15791461
> 
> 赞同：1
> 
> 时间：2013-04-03T15:21:35.957
> 
> 标签：pdf, joomla, download

我试图在我的 Joomla 网站上找到它，每当有人单击 PDF 的链接，而不是在新选项卡或窗口中打开它时，它会自动打开保存对话框。我已经在网上看到了解决方案，但我不知道在哪里编辑和放入代码。

有人知道代码在哪里编辑吗？

这是我找到的解决方案的链接，我只是不知道将其全部放在哪个文件中。

[http://forum.joomla.org/viewtopic.php?p=2553338](http://forum.joomla.org/viewtopic.php?p=2553338)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:55:11.137

我建议您使用文档管理系统来处理此类问题。[DOCman](http://extensions.joomla.org/extensions/directory-a-documentation/downloads/10958)可能是此类问题使用最广泛的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T08:24:15.393

只需将以下行添加到您的 .htaccess 文件并确保保存它

**AddType 应用程序/八位字节流 .pdf**

# facebook - Facebook 没有使用我的 Open Graph 元数据

> ID：15791469
> 
> 赞同：2
> 
> 时间：2013-04-03T15:21:58.397
> 
> 标签：facebook, facebook-opengraph

我在网页上添加了一个 Facebook 分享按钮，效果很好，但它没有使用正确的数据来分享（主要是图像，选择一个非常小的图像）。

我已将以下内容添加到页面 HEAD 部分：

```
<meta property="og:title" content="MyPageName">
<meta property="og:type" content="website">
<meta property="og:url" content="http://www.example.com">
<meta property="og:image" content="http://www.example.com/images/ShareImage.jpg"> 
```

但 Facebook 分享按钮仍然不使用这些数据。

我使用了 Facebook 调试工具 ( [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) ) 但仍然没有运气，它只显示了它从页面中提取的数据，而不是元标记中的数据并指出：

> **推断属性**'og:url' 属性应该明确提供，即使可以从其他标签推断出一个值。
> 
> **推断属性**'og:title' 属性应该明确提供，即使可以从其他标签推断出一个值。
> 
> **Tiny og:image og:image**引用的所有图像在两个维度上都应至少为 200px，最好是 1500x1500px。（最大图像大小为 5MB。）请检查给定 url 中所有带有标签 og:image 的图像，并确保其符合最小规格。

知道我可能做错了什么吗？

# php - 与数据库不紧密耦合并使用存储过程的 PHP 框架？

> ID：15791471
> 
> 赞同：6
> 
> 时间：2013-04-03T15:22:13.010
> 
> 标签：php, mysql, database, yii

这最近在工作中出现了，而谷歌一直......嗯，用处不大。

我们正在使用 Yii，但公司的政策是所有数据库访问都必须通过 MySQL 存储过程来完成，这“破坏”了 Yii 的相当一部分，并使其一些使生活更轻松的尝试变得无关紧要。（需要明确的是，仅要求 SP 的决定是在 Yii 实施之后做出的。）

是否有任何 PHP 框架可以在此限制下更好地工作？我们正在使用 YiiBooster，因此任何其他框架都必须与 Bootstrap 兼容，否则 UI/UX 部门将开始尖叫。

TLDR 版本：

**从谷歌搜索到这里，我最初的印象是任何其他 PHP 框架都会有完全相同的限制。** 它是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T15:27:15.000

你是对的。任何其他框架也会有这个限制。

这是因为框架本身是对底层语言的抽象。框架抽象了 php 代码，而 orm 抽象了存储在例如 MySQL 中。

您想要的是 ORM 和数据库“管理器”之间的另一个抽象层。恐怕您需要编写自己的 orm 或扩展和 orm 才能完成此任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T16:13:10.067

或者，您可以转向真正只管理控制器的“微框架”，让您可以自由地以符合 SP 的方式编码您的模型，并以符合引导程序的方式编写您的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T19:01:46.783

Yii 本质上是可扩展的，根本不需要数据库连接来运行。

我建议编写自己的 DataProvider 类，看看 CArrayDataProvider [http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider)作为起点。

# c++ - wstring::find() 不适用于非拉丁符号？

> ID：15791473
> 
> 赞同：5
> 
> 时间：2013-04-03T15:22:15.443
> 
> 标签：c++, stl, wstring, setlocale

我的代码中有一个宽字符串（std::wstring），我需要在其中搜索宽字符。

我使用 find() 函数：

```
 wcin >> str;
    wcout << ((str.find(L'ф') != wstring::npos)? L"EXIST":L"NONE"); 
```

`L'ф'`是一个西里尔字母。

但是 find() 在同一个调用中总是返回`npos`。在带有拉丁字母的情况下 find() 可以正常工作。

是这个功能的问题吗？或者我做错了什么？

**UPD**

我使用 MinGW 并将源代码保存为 UTF-8。我还用`setlocale(LC_ALL, "");`. 代码相同`wcout << L'ф';`的工作coorectly。但同样

```
wchar_t w;
wcin >> w;
wcout << w; 
```

工作不正确。

它很奇怪。早些时候，我使用 setlocale() 对编码没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:47:44.633

源文件的编码和执行环境的编码可能大不相同。C++ 对此不做任何保证。您可以通过输出字符串文字的十六进制值来检查这一点：

```
std::wcout << std::hex << L"ф"; 
```

在 C++11 之前，您可以通过使用它们的十六进制值在源代码中使用非 ASCII 字符：

```
"\x05" "five" 
```

C++11 增加了指定它们的 Unicode 值的能力，在你的情况下是

```
L"\u03A6" 
```

如果您要使用完整的 C++11（并且您的环境确保它们以 UTF-* 编码），您可以使用 、 或 中的任何一个`char`，`char16_t`然后`char32_t`执行以下操作：

```
const char* phi_utf8 = "\u03A6";
const char16_t* phi_utf16 = u"\u03A6";
const char32_t* phi_utf16 = U"\u03A6"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:52:07.440

您必须设置控制台的编码。

这有效：

```
#include <iostream>
#include <string>
#include <io.h>
#include <fcntl.h>
#include <stdio.h>

using namespace std;

int main()
{       
    _setmode(_fileno(stdout), _O_U16TEXT);
    _setmode(_fileno(stdin), _O_U16TEXT);
    wstring str;
    wcin >> str;
    wcout << ((str.find(L'ф') != wstring::npos)? L"EXIST":L"NONE");
    system("pause");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:14:30.167

`std::wstring::find()`工作正常。但是您必须正确读取输入字符串。

以下代码在 Windows 控制台上运行良好（使用[**`ReadConsoleW()`**Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684958%28v=vs.85%29.aspx)读取输入的 Unicode 字符串）：

```
#include <exception>
#include <iostream>
#include <sstream>
#include <stdexcept>
#include <string>
#include <windows.h>
using namespace std;

class Win32Error : public runtime_error
{
public:
    Win32Error(const char* message, DWORD error)
        : runtime_error(message)
        , m_error(error)
    {}

    DWORD Error() const
    {
        return m_error;
    }

private:
    DWORD m_error;
};

void ThrowLastWin32(const char* message)
{
    const DWORD error = GetLastError();
    throw Win32Error(message, error);
}

void Test()
{
    const HANDLE hStdIn = GetStdHandle(STD_INPUT_HANDLE);
    if (hStdIn == INVALID_HANDLE_VALUE)
        ThrowLastWin32("GetStdHandle failed.");

    static const int kBufferLen = 200;
    wchar_t buffer[kBufferLen];
    DWORD numRead = 0;

    if (! ReadConsoleW(hStdIn, buffer, kBufferLen, &numRead, nullptr))
        ThrowLastWin32("ReadConsoleW failed.");

    const wstring str(buffer, numRead - 2);

    static const wchar_t kEf = 0x0444;
    wcout << ((str.find(kEf) != wstring::npos) ? L"EXIST" : L"NONE");
}

int main()
{
    static const int kExitOk = 0;
    static const int kExitError = 1;

    try
    {
        Test();
        return kExitOk;
    }    
    catch(const Win32Error& e)
    {
        cerr << "\n*** ERROR: " << e.what() << '\n';
        cerr << "    (GetLastError returned " << e.Error() << ")\n";
        return kExitError;
    }
    catch(const exception& e)
    {
        cerr << "\n*** ERROR: " << e.what() << '\n';
        return kExitError;
    }        
} 
```

输出：

> ```
> C:\TEMP>test.exe
> abc
> NONE
> C:\TEMP>test.exe
> abcфabc
> EXIST 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:54:50.583

这可能是一个编码问题。`wcin`使用与编译器/源代码不同的编码。尝试在控制台/wcin 中输入 ф - 它会起作用。尝试通过 wcout 打印 ф - 它会显示不同的字符或根本没有字符。

没有独立于平台的方法来规避这种情况，但是如果您在 Windows 上，则可以使用`chchp`命令行命令或以编程方式使用[`SetConsoleCP()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686013(v=vs.85).aspx)（输入）和[`SetConsoleOutputCP()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686036(v=vs.85).aspx)（输出）手动更改控制台编码。

您还可以更改源文件/编译器的编码。如何完成取决于您的编辑器/编译器。如果您使用的是 MSVC，此答案可能会对您有所帮助：[https ://stackoverflow.com/a/1660901/2128694](https://stackoverflow.com/a/1660901/2128694)

# ssl - 管理和存储通配符证书

> ID：15791474
> 
> 赞同：0
> 
> 时间：2013-04-03T15:22:16.747
> 
> 标签：ssl, deployment

我已经购买了通配符证书。我如何保证它的安全，同时使其对我需要部署的所有项目普遍可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T21:55:47.047

您的私钥应该使您的通配符证书安全。

根据规则，CSR 必须生成到您要安装证书的位置。您可以将证书安装到不同的服务器类型。知道，对于每台服务器，您都需要生成一个 CSR。对于每个 CSR，您将拥有一个唯一的私钥。

此私钥也受您最初设置的密码的保护。

有一些 CA 提供 Auto-CSR，它们会在其中为您生成 CSR。这更安全，因为他们的私钥的密码将是您最初设置的密码和 CA 设置的密码的组合。

以下是 Auto-CSR 的示例：[https ://www.globalsign.com/support/csr/autocsr_domain_organization.php](https://www.globalsign.com/support/csr/autocsr_domain_organization.php)

希望这可以帮助！

# c# - 解析前过滤LinqToExcel中的空白行（转换/映射）

> ID：15791480
> 
> 赞同：1
> 
> 时间：2013-04-03T15:22:23.823
> 
> 标签：c#, .net, excel, transformation, linq-to-excel

我正在使用 LinqToExcel 将 Excel 行映射到 C#/.NET 项目中的对象。

我将验证代码放在我的转换函数中，这样它们不仅可以转换数据，而且还可以在丢失某些数据时警告用户。例子：

```
excel.AddTransformation<PaymentObject>(x => x.PaymentPeriod, cellvalue =>
{
    if (cellvalue.Length == 0)
    {
        throw new Exception(String.Format(Errors.EmptyField, ColumnNames.PaymentPeriod, ColumnNames.EmployeeNumber, lastCheckedEmployeeNumber));
    }

    return CultureInfo.InvariantCulture.TextInfo.ToTitleCase(cellvalue);
}); 
```

但是，我不希望 Excel 有时在底部添加的空行触发此验证（请参阅[LinqToExcel 空白行](https://stackoverflow.com/questions/14738313/linqtoexcel-blank-rows)）。

我的问题是我不能使用那里提到的解决方案，因为在调用类似的东西时我无法访问原始行数据

```
excel.Worksheet<SomeType>("WorksheetName").Where(row => row.Any(cell => cell != null)); 
```

这是因为首先应用了转换，而 Where 方法将应用于转换结果。

另外 - 在转换函数中，我无法访问行中的其他值，所以我无法检查它是单个空单元格（错误）还是行完全为空。

是否可以在应用转换之前过滤掉空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T18:52:01.760

您可以将强类型工作表与无类型工作表连接起来，然后使用无类型工作表查找完全空白的行：

```
List<T> onlyNonBlankRows = _queryFactory.Worksheet<T>(firstWorksheetWithColumnHeaders)
    // calling ToList here is workaround to avoid Remotion.Data.Linq.Parsing.ParserException for Select((item,index) => ...) - "This overload of the method 'System.Linq.Queryable.Select' is currently not supported, but you can register your own parser if needed."
    .ToList()
    .Select((typedRow, index) => new { typedRow, index })
    // Join the worksheet to an untyped projection of the same worksheet so that we can find totally blank rows
    .Join(
        _queryFactory.Worksheet(firstWorksheetWithColumnHeaders)
    // calling ToList here is workaround to avoid Remotion.Data.Linq.Parsing.ParserException for Select((item,index) => ...)
                    .ToList()
                    .Select(
                        (untypedRow, indexForUntypedRow) =>
                        new { untypedRow, indexForUntypedRow }),
    // join on row index - row 1 matches row 1 etc
        arg => arg.index, arg => arg.indexForUntypedRow,
        (a, b) => new { a.index, a.typedRow, b.untypedRow })
    // Exclude rows where all cells are empty 
    .Where(x => x.untypedRow.Any(cell => cell.Value != DBNull.Value))
    .Select(joined => joined.typedRow).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:26:52.930

只有当整行为空白时，是否有一些单元格为空白？

例如，除了空白行之外，通常有一个始终填充的 Id 列。如果是这种情况，那么以下查询应该适合您。

```
//assuming Id cell is only blank when the whole row is blank
excel.WorkSheet<PaymentObject>().Where(x => x.Id != "");

//the Id cell might be null instead of blank, so use this Where clause instead
excel.WorkSheet<PaymentObject>().Where(x => x.Id != null); 
```

# time - 如何在工作流时间触发器上动态设置时间段？

> ID：15791481
> 
> 赞同：0
> 
> 时间：2013-04-03T15:22:24.437
> 
> 标签：time, triggers, workflow, salesforce

我有一个带有开始和结束日期字段的自定义对象，还有一个状态字段。

创建新记录时，如果指定的开始日期在将来，我希望能够在开始日期为今天时让工作流将状态字段更新为“活动”。但是，我似乎只能选择固定的天数，然后才能触发我的字段更新任务。我想要的是将天数设置为等于开始日期 - 今天的日期。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:41:26.347

好的，我意识到我可以将时间延迟设置为开始日期后的零天。不直观（对我来说），但它是有道理的。

# linux - 以root身份运行sudo时的环境不同？

> ID：15791488
> 
> 赞同：1
> 
> 时间：2013-04-03T15:22:38.373
> 
> 标签：linux, sudo, opensuse, intel-mic

我正在尝试安装 Xeon Phi 协处理器。具体行为可能与所涉及的工具有关-我的问题具有更一般的性质。

当我以 root 身份执行命令时，出现分段错误。当我以 root 身份执行它但（在我看来不必要地） use`sudo`时，它​​可以工作：

```
i72:~ # whoami
root
i72:~ # micctrl -s
Segmentation fault
i72:~ # sudo micctrl -s
[no segfault] 
```

运行的环境有什么不同`micctrl`？

（编辑：）我认为我们排除了环境变量作为下面的选项。

该系统是 SLES 11.2。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:27:55.617

sudo 从环境中删除 LD_LIBRARY_PATH、LD_PRELOAD（我怀疑它对 root 用户和普通用户都是如此）。这可能会导致为程序加载不同的库。

sudo 可以配置它重置/清除的变量 - 请参阅[http://brandonhutchinson.com/wiki/Sudo_and_environment_variables](http://brandonhutchinson.com/wiki/Sudo_and_environment_variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:59:42.653

原来 sudo 只是隐藏了“分段错误”消息。它仍然会发生，但不会显示在终端上。我们发现是因为`micctrl`从来没有给我们任何输出，即使它应该有。

编辑：另外，如果有人遇到问题`micctrl`：在我们的例子中，Phi 没有被系统正确识别。`lspci`找到了，但是没有在`/sys/class/mic`.

# wpf - 将 XamDataGrid 字段定义绑定到视图模型

> ID：15791493
> 
> 赞同：0
> 
> 时间：2013-04-03T15:22:46.373
> 
> 标签：wpf, infragistics, xamdatagrid

我正在尝试构建一个应用程序，该应用程序将在同一个 XamDataGrid 中为不同的项目显示不同的列。这是一个例子：

```
public class Project
{
  public ICollection<Person> People { get; private set; }
  public string DisplaySpec { get; private set; }
}

public class Person{
{
  public Name Name { get; set; }
}

public class Name
{
  ... a bunch of dynamic properties that vary by project...
} 
```

我可以毫无问题地动态查找每个 Name 的属性，如果我编写 Xaml 并在实际的可执行文件中编译它，我可以显示它们。但是每个项目都有不同的要绑定的字段列表，我希望他们能够注入要显示的字段名称。

有什么简单的方法可以让他们指定他们想要使用的字段的名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:35:30.560

字段本身无法绑定。您最好的选择是要么自动生成字段，要么在代码中使用一种方法来动态添加所需的字段。如果您正在寻找一个可以在 XAML 中使用绑定的解决方案，您可以将逻辑添加到网格上的[行为](http://msdn.microsoft.com/en-us/library/ff725476%28v=expression.40%29.aspx)中，该行为公开您可以将列表绑定到的属性。

要自动生成字段，您需要将[FieldLayoutSettings](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=InfragisticsWPF4.DataPresenter.v12.2~Infragistics.Windows.DataPresenter.FieldLayoutSettings~AutoGenerateFields.html)上的 AutoGenerateFields 设置为 True。

# php - 在从数据库返回的术语之间添加 %20

> ID：15791495
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:22:57.737
> 
> 标签：php, mysql, sql

我有一个包含 2 个单词名称的数据库，它们之间有一个空格，但是为了使我的 api 调用正常工作，我需要在第一个和第二个单词之间使用 %20。

目前mysql_query返回Anas platyrhynchos，我需要它返回Anas%20platyrhynchos

任何快速的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:24:45.223

您可以使用 PHP [`urlencode`](http://php.net/manual/en/function.urlencode.php)。那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:24:15.240

您可以使用[replace()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)函数从查询中返回正确的字符串

```
replace(columnname,' ','%20') 
```

或者，您可以使用[urlencode()](http://php.net/manual/en/function.urlencode.php)函数在 PHP 代码中执行此操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:24:47.507

您可以在 PHP 端使用`urlencode`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:25:34.930

您需要对从数据库返回的结果进行[urlencode 。](http://php.net/manual/en/function.urlencode.php)这将添加 %20 和我假设您需要的其他特殊 URL 字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:25:38.887

使用[替换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)功能。

```
Select Replace(colName, ' ', '%20') 
```

# mysql - MySQL：高效的二进制值比较

> ID：15791497
> 
> 赞同：0
> 
> 时间：2013-04-03T15:23:04.843
> 
> 标签：mysql, types, binary

我的表有 8 个 VARCHAR 字段，每个字段都是 64 位的二进制字符串。我的目标是获得 每个寄存器的[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)。我正在使用下一个查询：

```
SELECT 
 BIT_COUNT(CONV(fp.bin_str0, 2, 10 ) ^ CONV('0000000001101111000000000101011100000000001010100000000001111101', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str1, 2, 10 ) ^ CONV('0000000010110001000000001000000000000000011000010000000011110100', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str2, 2, 10 ) ^ CONV('0000000010010100000000000010101100000000110001000000000011100100', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str3, 2, 10 ) ^ CONV('0000000011101011000000000001110000000000101100010000000000011001', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str4, 2, 10 ) ^ CONV('0000000000010000000000000011010100000000111011100000000001001101', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str5, 2, 10 ) ^ CONV('0000000000101111000000000110101000000000000010100000000000101101', 2, 10 )) + 
 BIT_COUNT(CONV(fp.bin_str6, 2, 10 ) ^ CONV('0000000000011000000000000101011000000000001010000000000000001011', 2, 10 )) + 
BIT_COUNT(CONV(fp.bin_str7, 2, 10 ) ^ CONV('0000000000101011000000000011100100000000000100000000000000111010', 2, 10 )) from mytable fp 
```

所以这个查询非常慢。有一些原因：mytable有3M个寄存器，字段`fp.bin_stri`是VARCHAR类型。

*由于 MySQL 具有 BINARY 类型，我可以对 BINARY 类型执行相同的查询`fp.bin_stri`吗？一个怎么样？*

我很困惑，因为当我更改`fp.bin_stri`为 BINARY 时，该字段的数据已显示为 BLOB，现在我不知道查询应该是什么样子。它应该使用`CONV`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:58:48.047

64 位二进制字符串的大小与 MySQL 的`BIGINT`类型相同（现代硬件上的双精度浮点或长整数的标准大小）。使用 a`BIGINT UNSIGNED`来存储每个字段，然后您可以使用`b'1010...'`语法而不是. 与其他位字段进行比较`CONV()`。

```
BIT_COUNT(fp.strN ^ b'0000000001101111000000000101011100000000001010100000000001111101') 
```

应该非常快，因为硬件旨在对 64 位值进行位操作。

# java - 为 OR 逻辑计算 hashCode

> ID：15791498
> 
> 赞同：2
> 
> 时间：2013-04-03T15:23:06.250
> 
> 标签：java, logic, equals, hashcode

我有一个对象作为唯一标识符，它有两个参数，我们称它们为 A 和 B，并具有以下逻辑：

obj1 等于 obj2 当且仅当：

```
obj1.A is equal to obj2.A 
```

*或者*

```
obj1.B is equal to obj2.B 
```

如何为该对象计算符合合同要求的 hashCode()？我是否坚持做“总是返回 0”的低效解决方案？不知道在这里做什么样的数学

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T15:25:46.533

你的`equals`方法不是传递的。它不尊重[基本原则](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))之一：

> equals 方法在非空对象引用上实现等价关系：
> 
> 它是自反的：对于任何非空引用值 x，x.equals(x) 应该返回 true。它是对称的：对于任何非空引用值 x 和 y，当且仅当 y.equals(x) 返回 true 时，x.equals(y) 才应该返回 true。
> 
> 它是可传递的：对于任何非空引用值 x、y 和 z，如果 x.equals(y) 返回 true 并且 y.equals(z) 返回 true，则 x.equals(z) 应该返回 true。
> 
> 它是一致的：对于任何非空引用值 x 和 y，x.equals(y) 的多次调用始终返回 true 或始终返回 false，前提是没有修改对象上 equals 比较中使用的信息。对于任何非空引用值 x，x.equals(null) 应该返回 false。

这种“平等”逻辑使您的对象不适合作为键，您无法通过简单地设计一种`hashCode`方法来解决此问题，

不要将此作为一种`equals`方法，而是使用您自己的语义，例如`isEquivalentTo`.

# ios - Paypal iOS SDK 可以用于构建 iPad POS 吗？

> ID：15791511
> 
> 赞同：0
> 
> 时间：2013-04-03T15:23:25.050
> 
> 标签：ios, sdk, paypal

我正在尝试为慈善活动构建一个快速应用程序。有没有办法在付款完成后立即删除扫描的信用卡，以便我可以使用该应用程序通过 iPad 快速连续进行数百笔付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:43:09.900

在付款完成屏幕上，有一个“忘记这张卡”链接。

但是，对于您描述的用例，[PayPal Here 会更合适](https://github.com/paypal/PayPal-iOS-SDK/issues/1)。

# python - matplotlib 奇怪的子图效果

> ID：15791513
> 
> 赞同：0
> 
> 时间：2013-04-03T15:23:28.113
> 
> 标签：python, matplotlib

我尝试如下绘制我的数据：

第一个子图

```
alpha = ['Joy', 'fear', 'sadness', 'thankful','anger','surprise','love']
fig = pl.figure()
ax = fig.add_subplot(511,title='SGD')
cax = ax.matshow(cm)
fig.colorbar(cax)

ax.set_xticklabels(['']+alpha)
ax.set_yticklabels(['']+alpha) 
```

稍后使用新厘米的第二个子图：

```
ax = fig.add_subplot(521,title='LIBLINEAR')
cax = ax.matshow(cm)
fig.colorbar(cax)

ax.set_xticklabels(['']+alpha)
ax.set_yticklabels(['']+alpha) 
```

稍后使用新厘米的第三个子图：

```
ax = fig.add_subplot(512,title='MNB')
cax = ax.matshow(cm)
fig.colorbar(cax)

ax.set_xticklabels(['']+alpha)
ax.set_yticklabels(['']+alpha) 
```

稍后使用新厘米的第四个子图

```
ax = fig.add_subplot(522,title='BNB')
cax = ax.matshow(cm)
fig.colorbar(cax)

ax.set_xticklabels(['']+alpha)
ax.set_yticklabels(['']+alpha) 
```

最后一个带有新厘米的子图

```
ax = fig.add_subplot(532,title='NC')
cax = ax.matshow(cm)
fig.colorbar(cax)

ax.set_xticklabels(['']+alpha)
ax.set_yticklabels(['']+alpha)
pl.show() 
```

我明白了：

![在此处输入图像描述](https://i.stack.imgur.com/z5we6.jpg)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:36:48.563

您每次都更改子图的布局。你使用`fig.add_subplot(511)`which 是`fig.add_subplot(n_rows, n_columns, index)`. `n_rows`并`n_columns`确定图中子地块的布局，`index`位置（从1开始）。

所以如果你想有五行两列，你让

```
ax = fig.add_subplot(5,2,1)
(...)
ax = fig.add_subplot(5,2,2)
(...)    
ax = fig.add_subplot(5,2,3) 
```

绘制第一行第一列；第一行第二列；第 2 行、第 1 列等

同样，请注意`fig.add_subplot(5,2,1)`和`fig.add_subplot(521)`是等价的。

# jquery - 依次通过 带有 jquery 的元素并突出显示搜索的文本

> ID：15791515
> 
> 赞同：2
> 
> 时间：2013-04-03T15:23:30.583
> 
> 标签：jquery

我有一页搜索结果。给定一个结果列表，我需要能够突出显示输入中的给定文本字符串。给定以下代码，我可以突出显示该术语，但我正在尝试使用结果列表来突出显示该术语。预期结果是突出显示返回结果列表中搜索字符串的每个实例。

HTML

```
<input type="text" id="searchfor" />
<p id="all_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p> 
```

CSS

```
#all_text span {
    text-decoration:underline;
    background-color:yellow;
} 
```

JavaScript

```
$('#searchfor').keyup(function () {

    var page = $('#all_text');
    var pageText = page.text().replace("<span>", "");
    var searchedText = $('#searchfor').val();
    var theRegEx = new RegExp("(" + searchedText + ")", "igm");
    var newHtml = pageText.replace(theRegEx, "<span>$1</span>");
    page.html(newHtml);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:25:30.353

您可以使用 jQuery Highlight 插件

[http://bartaz.github.com/sandbox.js/jquery.highlight.html](http://bartaz.github.com/sandbox.js/jquery.highlight.html)

它在突出显示搜索结果方面做得很好。有一个选项可以传入数组术语以突出显示，而不仅仅是单个术语。这在文档中并不明显，但它在代码顶部的注释中指出。

**更新**

一次传递多个搜索词（来自源代码顶部的注释）：

```
// search for and highlight more terms at once
// so you can save some time on traversing DOM
$('#content').highlight(['lorem', 'ipsum']); 
```

# wordpress - 从图库短代码中获取图像

> ID：15791517
> 
> 赞同：0
> 
> 时间：2013-04-03T15:23:41.913
> 
> 标签：wordpress

我有一个 WordPress 博客，它位于我的网站旁边，两者都使用相同的数据库，我目前正在访问该数据库以将最新的博客文章拉入我的网站。但是，该博客使用的是图库短代码，因此当我将帖子拉入我的页面时，脚本会与我的文章内容一起显示。

```
[gallery columns="1" link="file" ids="195,197"] 
```

有什么方法可以使用它从数据库中获取图像路径？我已经检查过了，它使用的 ID 在数据库中找不到，除非我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T21:41:29.533

老问题，但发布答案以防其他人有同样的问题。

我对这个问题的理解是您有（发布）ID，例如 195 和 197。您在同一数据库上的外部 Web 应用程序想要检索对这些图像的文件名引用。

以下查询将为您提供所需的数据：

`SELECT post_id, meta_value FROM wp_postmeta WHERE post_id IN (195,197) AND meta_key = '_wp_attached_file';`

示例输出：

```
+---------+----------------------+
| post_id | meta_value           |
+---------+----------------------+
|     195 | 2013/12/MK233212.jpg |
|     197 | 2013/12/MK233286.jpg |
+---------+----------------------+ 
```

这些文件位于`wp-content/uploads`目录下的普通 WordPress 配置中。

# mysql - jQuery 自动完成：预缓存查询以提高性能？

> ID：15791518
> 
> 赞同：1
> 
> 时间：2013-04-03T15:23:50.603
> 
> 标签：mysql, json, jquery-ui

我有一个 jQuery 自动完成字段，当用户开始在字段中输入城市名称时，它会查找城市名称和相应的 ZIP（美国邮政编码）。

MySQL 数据库包含大约 44,000 行美国邮政编码。选择所有城市名称和邮政编码时，查询本身会快速运行（0.0002 秒）。

“预缓存”所有结果（SELECT `place_name`，`postal_code`FROM `postal_codes`WHERE `country_code`= 'US'）是否有任何好处，以便用户更快地加载自动完成功能？

编辑：整个 JSON 列表为 600KB，在浏览器中加载 2-3 秒（根据 Google Chrome 控制台）

当前代码：

```
<script type="text/javascript">
$(function() {

$('#from_country').change(function(){
  var val = this.value;
  $("#from_zip").autocomplete({
    source: "json-list-live-production.php?country=" + val,
    minLength: 4,
  });
}).change()

$('#del_country').change(function(){
  var val = this.value;
  $("#del_zip").autocomplete({
    source: "json-list-live-production.php?country=" + val,
    minLength: 4,
  });
}).change()

});
</script>

<input type="text" class="input_text" name="from_zip" id="from_zip"  />

<input type="text" name="del_zip" id="del_zip"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:58:17.873

看起来使用 GeoNames.org webservice + jQuery Autocomplete 来查找邮政编码是最快的方法。

```
$( "#from_zip" ).autocomplete({
  source: function( request, response ) {
    $.ajax({
      url: "http://ws.geonames.org/postalCodeSearchJSON",
      dataType: "jsonp",
      data: {
        featureClass: "P",
        style: "full",
        maxRows: 50,
        placename_startsWith: request.term,
        country: "US"
      },
      success: function( data ) {
        response( $.map( data.postalCodes, function( item ) {
          return {
            label: item.placeName + (item.adminCode1 ? ", " + item.adminCode1 : "") + " (" + item.postalCode + ")",
            value: item.postalCode
          }
        }));
      }
    });
  },
  minLength: 2,
    messages: {
        noResults: null,
        results: function() {}
    },

}); 
```

# macvim - 如何使用工具栏启动 MacVim 7.3 快照 66

> ID：15791519
> 
> 赞同：4
> 
> 时间：2013-04-03T15:23:56.813
> 
> 标签：macvim

我正在使用带有 Mountain Lion 的 Mac OSX，并且正在运行 MacVim 7.3 快照 66，我刚刚安装了它，`brew install macvim`但它并没有从它的工具栏开始，我真的很想要它，我应该怎么做才能每次都设置它我打开 MacVim 它从它的工具栏开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T18:39:40.667

放入`set guioptions+=T`你的 .vimrc。请注意，这会`set guioptions=T`清除所有其他 gui 选项。

# html - Html5 表单模式拉丁字符人声 áéíóú Çç ü

> ID：15791521
> 
> 赞同：1
> 
> 时间：2013-04-03T15:23:58.423
> 
> 标签：html, character-encoding, forms, iso-8859-1

我正在尝试验证输入表单 html5，它可以在我的本地 Web 服务器中运行，但是当上传到主机时无法使用以下字符：重音字符（人声），如 áéíóú。

所以我尝试更改编码，这是最佳做法吗？

```
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;" charset="ISO-8859-1">
<html>
<head></head>
    <body>
        <form>
        Input:<input type="text" pattern="[a-zA-Z0-9ñÑáéíóúü\-_çÇ& ]+"  required />
        <input type="submit" />
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:04:23.537

元标记描述的字符集不是页面的编码，它只是*您*对编码的声明。

页面的实际编码是您在文本编辑器中用于保存文件的任何编码。主机也有可能更改文件的编码，但可能不太可能。

您可能希望您的标签只是：

```
<meta charset="UTF-8"> 
```

请记住确保以 UTF-8 编码保存文件。（通常是“另存为”对话框中的“编码”）

* * *

主机也有可能发送带有字符集的实际 HTTP 标头 - 这将覆盖您拥有的任何元标记。例如，您可以使用 Google Chrome 开发者工具网络选项卡查看是否是这种情况。

# javascript - 如何在 JavaScript 中获取复合组件的子组件的客户端 ID

> ID：15791533
> 
> 赞同：2
> 
> 时间：2013-04-03T15:24:37.123
> 
> 标签：javascript, jsf-2, composite-component

我有一个复合组件，其中包含一些输入字段 ID 的参数，例如：

```
<cc:attribute
    name="addressFieldId"
    required="true" /> 
```

我想使用这样的组件：

```
<amn:singleLocationMap
    id="singleLocationMap"
    addressFieldId="address" .../>
<!-- some code, different ui:define regions -->
<h:inputText
    value=""
    id="address" /> 
```

但是当我在 JavaScript () 中访问 ID 时，显然`var address = '#{cc.attrs.addressFieldId}';`我只得到了 id 参数。`address`但我想访问 JSF 客户端 ID，例如`formId:address`.

有什么方法可以在 JavaScript 中获取 JSF 客户端 ID，或者将 JSF 客户端 ID 传递给复合组件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:43:18.603

用于`binding`将组件绑定到`UIComponent`视图范围内的变量，以便您可以使用[`UIComponent#getClientId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getClientId%28%29)它来打印其实际客户端 ID。

```
<h:inputText binding="#{addressInput}" ... />

...

<h:outputScript>
    var addressInput = document.getElementById('#{addressInput.clientId}');
    // ...
</h:outputScript> 
```

# python - 如何在 python 函数中的“self”旁边添加参数？

> ID：15791535
> 
> 赞同：1
> 
> 时间：2013-04-03T15:24:44.990
> 
> 标签：python, function, arguments, self

我正在尝试修复一个小程序，但看起来我有点过头了。整个代码太长，无法复制到这里，所以我将粘贴有问题的部分。

```
def kontroll(self):
    count=IntVar()
    sisend=sisendivaartus.get()
    print(count)
    if count==1:
        kast.delete(0.0,END)
        sisend.delete(0.0,END)
        count=0
    else:
        kast.delete(0.0,END)
        if sisend=="õige" or sisend=="ÕIGE" or sisend=="Õige":
            if oige==sonake:
                if tahendus==" ":
                    kast.insert(END,"Tubli, õige!"+"\n"+str(oige)+"\n"+str(tahendus))
                    count=1
                else:
                    kast.insert(END,"Tubli, õige!"+"\n"+str(oige)+"\n:"+str(tahendus))
                    count=1
                #skoor+=1
                #skoor=skoor+1
            else:
                if tahendus==" ":
                    kast.insert(END,"Kahjuks eksid. Õige on "+str(oige)+"\n"+str(tahendus))
                    count=1
                else:
                    kast.insert(END,"Kahjuks eksid. Õige on "+str(oige)+":\n"+str(tahendus))
                    count=1
                #vale=vale+1
                #skoor=skoor-1
        else:
            if sisend==oige:
                if tahendus==" ":
                    kast.insert(END,"Tubli, õige!\n"+str(oige)+"\n"+str(tahendus))
                    count=1
                else:
                    kast.insert(END,"Tubli, õige!\n"+str(oige)+":\n"+str(tahendus))
                    count=1
                #skoor=skoor+1
            else:
                if tahendus==" ":
                    kast.insert(END,"Kahjuks eksid. Õige on "+str(oige)+"\n"+str(tahendus))
                    count=1
                else:
                    kast.insert(END,"Kahjuks eksid. Õige on "+str(oige)+":\n"+str(tahendus))
                    count=1
                #vale=vale+1
                #skoor=skoor-1
        #if skoor<0:
         #   skoor=0 
```

现在的问题是我必须向 kontroll() 添加参数，但我不知道如何在 'self' 存在的情况下做到这一点。老实说，我什至不明白为什么我需要那个'self'，因为我没有使用通常使用'self'参数的类......所以无论如何，我用谷歌搜索了我收到的错误没有' self' 在那里添加 'self' 后它开始工作，但我不能在括号中添加 'skoor' 和 'vale' ......现在我只是开始 kontroll，括号中没有任何内容，如下所示：kontroll()。那么我应该如何启动这个函数以及我应该如何向它添加参数呢？我也不能使用全局变量，因为这个 'skoor=skoor+1' 搞砸了一切（等号左侧不能有全局变量）。

谢谢。

编辑：我的程序的 GUI 部分如下所示：

```
raam=Tk()
raam.title("MÄNG")
raam.geometry("430x450")
valik=IntVar()
valik2=IntVar()
C2=Checkbutton(raam,text="f",variable=valik2,command=lambda:ok.config(state=ACTIVE)).place(x=5,y=10)
ok=Button(raam,text="Alusta!",command=alusta,state=DISABLED)
ok.place(x=230,y=20,width=80)
C1=Checkbutton(raam,text="š",variable=valik,command=lambda:ok.config(state=ACTIVE)).place(x=5,y=30)
sisendivaartus=StringVar()
sisend=Entry(raam,textvariable=sisendivaartus)
sisend.place(x=10,y=250,width=200)
sisend.bind("<Return>",kontroll(skoor,vale))
credit=Label(raam,text="2013",font=("Verdana","7"))
credit.place(x=0,y=430)
score=Label(raam,text="Skoor:",font=("Verdana","7"))
score.place(x=380,y=430)
nupp=Button(raam,text="Seaded",command=seaded)
nupp.config()
nupp.place(x=330,y=20,width=80)
kast=Text(raam,wrap=WORD,font=("Verdana",10))
kast.config()
app=App(raam)
kast.place(x=10,y=60,width=400,height=180)
raam.mainloop() 
```

对于 Henry 的建议（不在课堂时如何使用该函数），我开始收到没有根据的不同错误，例如“NameError: global name 'oige' is not defined”。尽管错误说明了什么，但全局名称 'oige' 已定义并且无需参数即可正常工作。如果我将函数定义中的 'skoor' 和 'vale' 替换为 'self' 并在没有任何参数的情况下调用它，一切都会正常工作。没看完整篇估计有点看不懂，所以上传到[这里](http://www.upload.ee/ "这里")，如果有人有一分钟。PS。我之前说过的关于在我的代码中包含 0 个类的内容 - 自从我不断努力以来，这种情况发生了变化。另外请记住，这是测试版的测试版，所以很多东西还不能正常工作。（对于琐事：它测试和训练人在爱沙尼亚拼字法中的能力）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:26:12.283

## 编写你的函数

向函数添加更多参数非常容易；只需将您的函数定义更改为

```
def kontroll(self, skoor, vale):
    # Your code here. 
```

然后成为函数本地的变量名`skoor`，您可以像使用任何其他变量一样使用它们。`vale``kontroll`

至于为什么你需要`self`在函数定义中，那是因为（大概）这个方法实际上是你定义的某个类的实例方法。实例方法**总是**接收*它们绑定的对象*作为它们的第一个参数。这个参数被称为`self`，这就是为什么你必须为它保留一个参数。有关更完整的解释，请参阅[此问题。](https://stackoverflow.com/questions/2709821/python-self-explained)

如果这实际上*不是*某个类的实例方法，请注意，那么您实际上不需要`self`. 一般来说，如果方法不需要对特定对象实例的引用，那么就没有理由让它成为实例方法！

## 调用你的函数

调用你的函数同样简单，但这取决于另一个问题的答案：这实际上是一个实例方法吗？**如果它是在一个类中定义的**（听起来像这样），那么您需要执行以下操作：

```
class C(object):
    def kontroll(self, skoor, vale):
        pass # Your code goes here.

c = C() # Create an instance of the class!
c.kontroll(skoor, vale) # The instance (c) is automatically passed to the method. 
```

另一方面，如果您的函数**未**在类中定义，则您的代码应如下所示：

```
def kontroll(skoor, vale):
    pass # Your code goes here.

kontroll(skoor, vale) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:38:34.920

您需要`self`，因为这几乎可以肯定是一个类的方法，并且您需要在调用时将对象传递给该方法。Self 只是一个约定，从技术上讲，您可以轻松地为此使用其他名称。话虽如此，您似乎需要阅读一些有关 python 中的类的知识，并真正尝试理解对象实例的工作方式。我建议从文档开始：

[http://docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

您的代码片段中似乎有很多可能应该是类变量的全局变量，在`__init__`深入研究之前，您确实需要了解方法之类的工作原理。

# drupal - 如何指向 Drupal 7 中模块的模板文件夹

> ID：15791544
> 
> 赞同：1
> 
> 时间：2013-04-03T15:24:59.853
> 
> 标签：drupal, drupal-7

如何让 Drupal 读取您在模块中创建或覆盖的模板（当您创建在主题文件夹中被覆盖的模板时，Drupal 会自动读取它们）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:09:01.813

当您实现[hook_theme()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_theme/7)或[hook_theme_registry_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_theme_registry_alter/7)时（在您覆盖从另一个模块定义的模板文件的情况下），您使用“路径”属性告诉 Drupal 模板文件在哪里。
这对于 . 尤其重要`hook_theme_registry_alter()`，因为您正在覆盖另一个模块使用的模板文件，并且您希望 Drupal 在您的模块目录中查找模板文件。使用`hook_theme()`，当模板文件不在包含模块（或主题）的目录中，而是在另一个目录中时，使用“路径”属性很重要，例如在包含模块/主题的目录的子目录中.

# eclipse - 如何将 Web 服务 (soap) 与 JUnit 集成

> ID：15791548
> 
> 赞同：0
> 
> 时间：2013-04-03T15:25:09.857
> 
> 标签：eclipse, web-services, junit, soapui

我的网络服务很少，并且可以很好地使用soapUI 工具。我正在尝试作为一个套件运行。我已将soapUI、junit 和所有其他必要的库添加到eclipse 中，系统路径已设置为：`soapUI.Junit = C://Doc and Sett/mkd/soapUI 4.2/bin/`。

我已经编写了@Before、@Test 和@after 方法。在@Test 我有如下代码：

```
@Test
public void somex() {
    SoapUITestCaseRunner runner = new SoapUITestCaseRunner(); 
    runner.setProjectFile( "src/dist/sample-soapui-project.xml" );
    runner.run(); 
} 
```

但是这段代码不起作用。它无法识别`SoapUITestCaseRunner`。有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T10:43:12.180

您应该添加`soapui-a.b.c.jar(e.g. soapui-2.0.2.jar)`到类路径中。然后问题将得到解决。

# c# - 表达混合的替代品

> ID：15791549
> 
> 赞同：2
> 
> 时间：2013-04-03T15:25:11.070
> 
> 标签：c#, .net, wpf, expression-blend, .net-4.5

从*Blend 4*到*Blend for Visual Studio*的过渡让我感到害怕。我已经为 VS2012 Update 2 安装了最新的 CTP，其中包括对内置 Blend 的 WPF 支持（不再使用预览版）。但是，某些功能显然被破坏了：设计时资源解析不再起作用，我的项目 UserControls 甚至不会加载到 XAML 设计器中。我想我已经将问题缩小到我使用导入项目将我的项目的 OutputPath 设置到一个公共位置。即便如此，功能和构建感觉非常不稳定，更糟糕的是，这一切都适用于 Blend 4！但是，我想使用 Blend 4 本身不支持的 .NET 4.5 功能。

对于 WPF 开发人员来说，这变成了一个非常困难的情况。我想要4.5，但我不能使用新版本的Blend。 **有谁知道*Blend for VS*在 .NET 4.5 中进行 WPF 设计工作的任何好的替代方案？**

到目前为止，我的替代方案是直接使用 Visual Studio 2012 设计器，但没有直接支持行为，设计时数据生成，设计器画布不符合标准（严重的是，鼠标滚动不会缩放画布......那有多愚蠢？）我也可以尝试混合和匹配，我的数据处理保存在一个项目中，我的控件定义保存在另一个项目中，并且控件目标为 4.0，以便我可以使用 Blend 4。那就是痛苦，但它可能会起作用。最后，如果您还没有 Blend 4，微软很难完全购买它。不过，我很想听听第三方选项，付费或免费。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:29:34.033

这是我玩过的几个

*   [卡克沙姆](https://github.com/thinkpixellab/kaxaml)
*   [Resharper Xaml 支持](http://www.jetbrains.com/resharper/features/xaml_editor.html)（需要 Visual Studio）
*   [XamlPad](http://msdn.microsoft.com/en-us/library/vstudio/ms742398%28v=vs.90%29.aspx)（与 Blend 相比非常基本）

在这三者中，我最喜欢 Kaxaml。

# c# - 在关注性能时，为 DateTime.Today 使用变量有多重要？

> ID：15791550
> 
> 赞同：15
> 
> 时间：2013-04-03T15:25:11.867
> 
> 标签：c#, performance, datetime

我刚看到[这条点赞的评论](https://stackoverflow.com/questions/591752/get-the-previous-months-first-and-last-day-dates-in-c-sharp#comment403897_591820)

> IIRC`DateTime.Today`是一个非常昂贵的调用，因此您最好先将值存储在变量中。

这是对包含代码的帖子的回应：

```
var first = 
    new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddMonths(-1);
var last = 
    new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddDays(-1); 
```

如果我希望提高性能，将其存储`DateTime.Today`在变量中而不是多次调用它有多重要？大约有多少用途`DateTime.Today`可以证明为它创建一个变量是合理的？

**编辑：**我意识到我应该先测试我的程序，看看是否存在性能问题，然后再担心像这样微不足道的事情。为了这个问题，假设我已经这样做了，并确定需要额外的优化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:29:00.383

> 将 DateTime.Today 存储在变量中有多重要

最好的答案是在您希望代码运行的硬件上进行基准测试。除非您在一个非常紧凑的循环中调用它，否则我怀疑这将是一个问题。

将它存储在变量中的一个更好的理由是，您可能会在两次调用之间从一天滚动到下一天。

**更新**

为了提供一个数量级，@RichardBrown 在他的回答中分享了一个链接，表明`DateTime.Today`测试的成本大约为几百纳秒（在用于该测试的特定硬件上）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:36:21.130

基准测试（在我的机器上，使用 Stopwatch 类）：

```
10,000 DateTime.Today calls and assignment to local variable: 0.0125781 seconds.

10,000 Assignment only operations: 0.0001062 seconds. 
```

代码：

```
var s = new Stopwatch();
DateTime date = DateTime.Today;
DateTime date2 = DateTime.Today;
s.Start();
for (int i=0; i<10000; i++)
    date = DateTime.Today;
s.Stop();
Debug.Print(s.Elapsed.ToString());

s.Reset();
s.Start();
for (int i=0; i<10000; i++)
    date2 = date;
s.Stop();
Debug.Print(s.Elapsed.ToString()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T15:29:01.807

`DateTime.Today`我拒绝接受昂贵电话的前提。如果重要的是它不随时间变化，则应将其存储在变量中。如果此代码在月底的午夜左右运行，您可能会遇到......问题。从性能的角度来看，我*非常*怀疑这将是一个问题。

无论如何，这将是一个微优化。与任何性能问题一样，如果您的*工作*程序太慢，您应该对其进行分析并寻找花费大量时间的部分并专注于优化这些部分，寻找运行时间比您预期更多的代码。如果碰巧这一行代码消耗大量时间，请考虑更改它。在那之前，只为了正确性或可读性而重构它，而不是为了性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T15:30:33.273

有关性能的硬数字，`DateTime`请阅读[此博客文章](http://www.dotnetperls.com/datetime-performance)。正如先前的答案所述，在确定性能时查看您的特定配置和需求非常重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T15:34:35.137

如果您在循环中调用代码，我猜想这是一个问题。但找出答案的最好方法是计时，自己看看需要多长时间。

```
var sw = new Stopwatch();
sw.Start();
today = DateTime.Today();
sw.Stop();
var ts = stopWatch.Elapsed; 
```

[MSDN 秒表参考](http://msdn.microsoft.com/en-us/library/vstudio/system.diagnostics.stopwatch%28v=vs.90%29.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T15:52:28.783

提取为变量的真正原因`DateTime.Today`是为了防止可能出现的错误，因为[墨菲定律](http://en.wikipedia.org/wiki/Murphy%27s_law)**会**出现，但永远不会被隔离和修复。

想法是`Today`实际日期的第一次和第二次使用之间**可能**会发生变化，因此您可以在此处获取例如上一年和新月份：

```
var first = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddMonths(-1); 
```

例如，这可能会导致 in`(January 2013) - 1 month`而不是`(December 2013) - 1 month`.

`first`如果您在分配和分配之间获得日期更改，则更有可能和更邪恶的问题`last`：

```
var first = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddMonths(-1);
var last = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1).AddDays(-1); 
```

这将导致一年多的时间。根据您的逻辑，这可能会导致非常昂贵的损失。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T15:29:20.377

比性能问题更重要的是代码的可读性和可维护性。

除非您没有性能问题，否则我会遵循“注意性能改进”的规则

也许如果你有一个循环而不是一个变量可以用“今天”适当地命名，但只要没有发布性能，我就会关注其他问题

# c++ - Qt：如何将小部件放置在具有 minWidth 和基于百分比的比例的布局中

> ID：15791553
> 
> 赞同：1
> 
> 时间：2013-04-03T15:25:27.200
> 
> 标签：c++, python, qt, pyqt, pyside

我有一个`QHBoxLayout`，我想在里面添加 3 个小部件。

```
QLabel + QLineEdit + Image (QLabel + QImage) 
```

我需要`QLabel`有一个`setMinWidth of 100 pixels` 我需要`QImage`有一个**固定的宽度** 我需要`QLineEdit`使用**中间剩下的所有可用空间**

现在我希望`QLabel`空间为**：**最小100**像素或****15%，以****较大**者为准。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:58:29.303

尝试[setStretchFactor](http://qt-project.org/doc/qt-4.8/qboxlayout.html#setStretchFactor)：

```
layout->setStretchFactor(label, 15)
layout->setStretchFactor(line, 100) 
```

# php - 在mysql中插入多行并限制其中一行只能输入一次

> ID：15791554
> 
> 赞同：0
> 
> 时间：2013-04-03T15:25:28.873
> 
> 标签：php, mysql

我有一个发票表单，它会将多行发布到插入页面以插入多行。我的绊脚石是，当我使用 foreach 语句插入多个订单项目时，我还插入了每一行的发票总额。我将如何仅在我选择的列中插入的最后一行插入例如“发票总金额”。

我已经附上了我用来插入表单的代码，在提到它之前，为了清楚起见，我已经删除了对数据清理函数的调用。

* * *

```
<?php 
  //Lets connect to the database
   if(mysqli_connect_errno()){
       exit("Failed to connect to the database".mysqli_connect_error());}
        //We first insert the header line of the purchase invoice, then we get the insert id and switch to the details table and insert 
         //the purchased items details

       $query ="INSERT INTO acc_posting_headers (company_id,supplier_id,header_ref,header_date,header_type,posting_ref,due_date)
       values
       ('$company_id','$supplier_id','$receipt_ref','$invoice_date','$header_type','$syspost_ref','$due_date')";

        //Execute the $sql query on the server to insert the values
          if ($conn->query($query) === TRUE) {
              $last_post_header_id =  $conn->insert_id;
              $post_header_id = $last_post_header_id;

              /* We have now switched to the details table, so we got the last insert id, we have set the variable
              $post header and now insert each purchased item */

              foreach ($_POST['lst_nominal_code'] as $row=>$id){
                $nominal_code = $_POST['hidden_nominal_code'][$row];
                 $quantity  = $_POST['txt_quantity_'][$row];
                  $item_cost = $_POST['txt_item_cost'][$row];
                   $line_total = $_POST['txt_line_total'][$row];
                    $description = $_POST['txt_description'][$row];
                     $trade_creditors = 2109;
                      $invoice_gross = $_POST['txt_gross'];
                       $vat_line = $_POST['txt_line_vat_'][$row];
                        $nominal_id = $id;
                          $subtotal = $_POST['txt_subtotal'];
                           $vat_total = $_POST['txt_vat_total'];
                            $vat_control = 2200;

           $query = ("INSERT INTO acc_posting_details 
           (post_header_id,nominal_acc_no,quantity,price,line_total,line_vat,vat_total,description,subtotal,debit,credit)
            VALUES 
            ('$post_header_id','$nominal_code','$quantity','$item_cost','$line_total','$vat_line','0','$description','$subtotal','$line_total','0'),
            ('$post_header_id','$vat_control','0','0','0','$vat_total','total VAT','vat content','0','$vat_total','0'),
            ('$post_header_id','$trade_creditors','0','0','0','0','0','trade Creditors','0','0','$invoice_gross')");

             if ($conn->query($query) === TRUE) {

          Header("Location:../add_purchase_invoice.php");

           } else {
   echo 'Error: '. $conn->error;
        }
          }
           }

              $conn->close();
              ?>

                  <?php 
                   // echo "<pre>";
                   // print_r($_POST);
                   // echo "<pre>";
                   //echo "vat control".$vat_control;
                    //echo "vat total is:".$vat_total

                  ?> 
```

解决了，一旦我仔细看了一下，通过改变插入的顺序并从“foreach”中删除，我用下面的代码实现了我想要的。感谢所有帮助。

```
 <?php session_start();?>
      <?php require_once('../Connections/connpay.php'); ?>
      <?php require_once('../functions/global_functions.php'); ?>
      <?php require_once('../functions/account_functions.php'); ?>

<?php 

        $supplier_id = clean_data($_POST['lst_supplier']);
        $receipt_ref = clean_data($_POST['txt_receipt_ref']);
        $invoice_date = clean_data($_POST['txt_receipt_date']);
        $due_date = clean_data ($_POST['txt_receipt_due']);
        $due_date = clean_data($_POST['txt_receipt_due']);
        $company_id = clean_data($_POST['hidden_company_id']);
        $syspost_ref = clean_data($_POST['txt_post_ref']);
        $header_type = "puchase_invoice";
        $nominal_id = clean_data($_POST['lst_nominal_code']);

    ?>

<?php 
  //Lets connect to the database
   if(mysqli_connect_errno()){
       exit("Failed to connect to the database".mysqli_connect_error());}
        //We first insert the header line of the purchase invoice, then we get the insert id and switch to the details table and insert 
         //the purchased items details

          $query ="INSERT INTO acc_posting_headers (company_id,supplier_id,header_ref,header_date,header_type,posting_ref,due_date)
          values
         ('$company_id','$supplier_id','$receipt_ref','$invoice_date','$header_type','$syspost_ref','$due_date')";

        //Execute the $sql query on the server to insert the values
          if ($conn->query($query) === TRUE) {

            // we now get the last insert id, and set it to a variable, we also declare the vat & gross amount variables
              $last_post_header_id =  $conn->insert_id;
              $post_header_id = $last_post_header_id;
              $vat_control = 2200;
              $vat_total = clean_data($_POST['txt_vat_total']);
              $trade_creditors = 2109;
              $invoice_gross = clean_data($_POST['txt_gross']);

               //We are now at the posting details table, we insert the trade creditors and total vat cr amounts first.
               $query = ("INSERT INTO acc_posting_details 
               (post_header_id, nominal_acc_no ,quantity,price,line_total,line_vat,vat_total,description,subtotal,debit,credit)
               VALUES 
               ('$post_header_id','$trade_creditors','0','0','0','0','0','trade Creditors','0','0','$invoice_gross'), 
               ('$post_header_id','$vat_control','0','0','0','$vat_total','0','vat content','0','$vat_total','0')");
                $conn->query($query);   

              // Now that we have inserted the two lines to show the trade creditors and vat CR and DR amounts we 
              //carry on and insert each invoice line from the posted array.
              foreach ($_POST['lst_nominal_code'] as $row=>$id){
              $nominal_code = $_POST['hidden_nominal_code'][$row];
              $quantity  = clean_data($_POST['txt_quantity_'][$row]);
              $item_cost = clean_data($_POST['txt_item_cost'][$row]);
              $line_total = clean_data($_POST['txt_line_total'][$row]);
              $description = clean_data($_POST['txt_description'][$row]);
              $vat_line = clean_data($_POST['txt_line_vat_'][$row]);
              $nominal_id = $id;
              $subtotal = clean_data($_POST['txt_subtotal']);

              $query = ("INSERT INTO acc_posting_details 
              (post_header_id, nominal_acc_no ,quantity,price,line_total,line_vat,vat_total,description,subtotal,debit,credit)
              VALUES 
             ('$post_header_id','$nominal_code','$quantity','$item_cost','$line_total','$vat_line','0','$description','0','$line_total','0')");

              // execute the insert query and push on to the purchase invoice page.
              if ($conn->query($query) === TRUE) {

              Header("Location:../add_purchase_invoice.php");

           } else {
   echo 'Error: '. $conn->error;
        }
          }
           }

              $conn->close();
              ?>

                  <?php 
                    //echo "<pre>";
                   // print_r($_POST);
                   // echo "<pre>";
                   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:46:50.870

听起来您的核心挑战是确定您何时处于 foreach 循环的最后一次迭代，以便您可以修改查询。那正确吗？

您可以使用计数器来提供帮助。这些方面的东西：

```
$i = 0;
$len = count($_POST['lst_nominal_code']);

foreach ($_POST['lst_nominal_code'] as $row=>$id) {
   // Assign (don't forget to sanitize!) all the POST variables
   <snip>

   if ($i == $len - 1) {
      // This is the last line! We want a different query, with $invoice_gross included
      $query = "...";
   } else {
      // This is NOT the last line, use the default query without $invoice_gross
      $query = "...";
   }

   $conn->query($query);

   $i++;
} 
```

# python - numpy.array 无法正常工作？

> ID：15791558
> 
> 赞同：2
> 
> 时间：2013-04-03T15:25:33.997
> 
> 标签：python, arrays, numpy

我正在尝试将列表列表转换为数组，并且发生了一些奇怪的事情。

例如，如果我将列表声明为：

```
a=[]
a.append(['a',1,10,100])
a.append(['b',2,20,200])
a.append(['c',3,30,300])
a.append(['d',4,40,400]) 
```

然后通过转换成向量

```
a=np.array(a) 
```

最终结果是

```
[['a','1','1','1'],['b','2','2','2'],['c','3','3','3'],['d','4','4','4']] 
```

我是一个完全的 Python 初学者，但是根据我使用 np.array 阅读的内容，向量中的所有内容都被转换为字符串（如果我错了，请纠正我）。为什么在这里忽略零，我该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:36:25.970

由于您的数组具有非统一的数据类型，因此您必须指定“结构化”`dtype`

```
In [2]: a = [('a', 1, 10, 100),
   ...:      ('b', 2, 20, 200),
   ...:      ('c', 3, 30, 300),
   ...:      ('d', 4, 40, 400)]

In [3]: a = np.array(a, dtype = "S1, int, int, int")

In [4]: a
Out[4]: 
array([('a', 1, 10, 100),
       ('b', 2, 20, 200),
       ('c', 3, 30, 300),
       ('d', 4, 40, 400)], 
      dtype=[('f0', 'S1'), ('f1', '<i8'), ('f2', '<i8'), ('f3', '<i8')]) 
```

您可以通过以下方式轻松访问：

```
In [5]: a.dtype.names = ['name','x','y','z']

In [6]: a['x']
Out[6]: array([1, 2, 3, 4])

In [7]: a['name']
Out[7]: 
array(['a', 'b', 'c', 'd'], 
      dtype='|S1')

In [8]: a[0]
Out[8]: ('a', 1, 10, 100) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:31:31.650

这是因为数组的结果数据类型（numpy 不得不猜测）是“长度为 1 的字符串”。您需要指定最大项目大小：

```
In [51]: np.array(['a', 10])
Out[51]:
array(['a', '1'],
      dtype='|S1')

In [56]: np.array(['a', 10], dtype=(str, 5))
Out[56]:
array(['a', '10'],
      dtype='|S5')

In [57]: np.array(['a', 123456], dtype=(str, 5))
Out[57]:
array(['a', '12345'],
      dtype='|S5')

In [58]: np.array(['a', 123456], dtype=(str, 6))
Out[58]:
array(['a', '123456'],
      dtype='|S6') 
```

[Numpy 数据类型](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html#data-type-objects-dtype)

你确定你的二维数组不应该是一维记录数组（见 askewchan 的回答）？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T15:36:04.050

使用`np.array`不会将所有内容都转换为字符串。[numpy.array](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)说：

"dtype : data-type, optional 数组所需的数据类型。如果未给出，则类型将被确定为保存序列中对象所需的最小类型。此参数只能用于'upcast'阵列。”

一般来说，使用 numpy 你不应该混合类型。在你的例子中，你做到了。我的猜测是，numpy 试图猜测你的参数的正确类型，这导致向上转换为类似字符串的东西。但它确实出错了。我对 numpy 的经验不足以准确地说出发生了什么。所以也许更聪明的人会解决这个问题。我建议[numpy.dtype](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html#numpy.dtype)进一步阅读。你可以用它做一些魔术。

我的建议是在创建时坚持一种类型`numpy.array`。特别是因为它旨在执行计算，而您试图潜入一些字符串/字符。我不确定你想做什么计算。

编辑：是的，我想我是个麻木的菜鸟。结构化 dtype 似乎是混合类型数组的完美方式。

# java - 如何通过 Ruby 访问“java”db2 本地数据库？

> ID：15791560
> 
> 赞同：0
> 
> 时间：2013-04-03T15:25:38.043
> 
> 标签：java, ruby

我有一个 java 应用程序，它从“云”下载 db2 数据库的本地副本。然后它使用（我认为）db2j.jar 访问它。我知道零 Java，所以我可能会混淆问题。

其中一个日志文件具有：

```
Booting Cloudscape version IBM Corp. - DBMS:db2j - 5.1.2 
```

然后是数据库本地副本的路径。

本地数据库是一个目录。其中的一些文件看起来像 seg0/c10.dat 等。

我的问题是如何从 Ruby 1.9 打开这个数据库（连接到这个数据库）？我在哪里以及如何指定数据库的路径？

我看到很多关于连接到远程 db2 服务器的信息，但对这种特殊风格的 db2 数据库却一无所知。

# oracle - pl/sql 过程中的错误计数（*）

> ID：15791568
> 
> 赞同：2
> 
> 时间：2013-04-03T15:25:54.033
> 
> 标签：oracle, plsql

Oracle 11g 快捷版 11.2.0

表“RIGHT”数据（仅包含 1 行，名称 = Test）：

身份证 | 姓名

1 测试

2 新 2

3 新14

...

从正确的地方选择计数（*）名称='测试'；

**结果 = 1**

我在包 TEST 中有程序：

```
 create or replace
    PACKAGE BODY TEST
    AS
    PROCEDURE FIND_RIGHT(rightName IN VARCHAR2)
    IS
      countrows       NUMBER;
    BEGIN
      SELECT COUNT(*) INTO countrows FROM RIGHT WHERE name = rightName;

    /* DEBUG POINT !!! in this point countrows = 212 !!!! */
    ...
    END;
    END TEST; 
```

并从其他程序运行它：

```
 DECLARE
      rightName VARCHAR2(200);
    BEGIN
      rightName := 'Test';
      TEST.FIND_RIGHT(rightName);
    END; 
```

我在选择后运行调试器（在 Oracle SQL Developer 中）和调试点。我看到countrows = 212。

**为什么Countrows != 1 ???**

**更新：** 所有事务都已提交。仅打开 1 个会话（来自 SQL Developer）。表权限有 3 个索引（表很大，我不会在帖子中写所有列）。程序有许多输入参数（自定义对象），但我删除了额外的信息。

**更新#2：** 我将代码更改为

```
 create or replace
    PACKAGE BODY TEST
    AS
    PROCEDURE FIND_RIGHT(rightName IN VARCHAR2)
    IS
      countrows       NUMBER;
      testVar       VARCHAR2(200);
    BEGIN
      testVar := 'Test';
      SELECT COUNT(*) INTO countrows FROM RIGHT WHERE name = testVar;

    /* in this point countrows = 1  */
    ...
    END;
    END TEST; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T19:48:22.880

我猜你的表包含一个名为“rightName”的列？

如果是这种情况，您的原始查询将比较“name”和“rightName”列，而不是使用过程参数。

尝试更改参数名称。

# javascript - 每个对象实例的 setTimeout

> ID：15791570
> 
> 赞同：0
> 
> 时间：2013-04-03T15:26:00.890
> 
> 标签：javascript, jquery

我有这个对象（这只是它的一部分，显然......）：

```
function room() {
    this.data = {
        sender_name: '',
        room_id: 0
    }
    this.create = function (sender_name) {
        // (code to set this.data)
        this.removeTimer();
    }
    this.removeTimer = function() {
        var t = this;
        console.log(t.data.sender_name) // log #1

        $.tGet('roomInfo', {'room_id': this.data.room_id}, function(edata) {
            console.log(t.data.sender_name) // log #2
            if(edata.exists == 'false') {
                // remove room code...
            }
            else {
                setTimeout(function() {
                    t.removeTimer();
                }, 1000)
            }
        })
    };
} 
```

我像这样从数据库创建它的实例：

```
$.tGet('getRooms', {'user_id': mUser}, function(edata) {
    var i = 0, n;
    for(i = 0; i<edata.length; i++) {
        n = new room();
        n.create(edata[i].sender_name);
    }
}) 
```

现在，问题是控制台打印的只是最后一个创建的房间。我不知道发生了什么...

此代码第一次运行时，日志 #1 是完全正确的。但是，日志 #2 已经存在问题，因为它只给了我数据库中的最后一个空间（或在循环中......），当然，在超时后日志 #1 也变得错误。

这是怎么回事？我真的只是 javascript 的初学者，所以......

* * *

`tGet`功能：

```
$.tGet = function(action, data, callback, error) { 
    $.get('php/ajax.php?action='+action, data, callback, 'json').fail(error); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:03:02.627

```
this.removeTimer = function() {
    console.log(this.data.sender_name) // log #1

    $.tGet('roomInfo', {
                'room_id': this.data.room_id,
                'instance' : this
            }, function(edata) {
        console.log(this.instance.data.sender_name) // log #2
        if(edata.exists == 'false') {
            // remove room code...
        }
        else {
            setTimeout(function() {
                instance.removeTimer();
            }, 1000)
        }
    })
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T15:42:09.797

看起来您正在创建具有相同房间 id 的多个房间实例。如果创建行读取`n.create(edata[i].room_id)`

# iphone - iOS UIImageView 为什么 Instruments 为 ImageWithContentsOfFile 显示较少的活动字节，而不是从 UIImagePickerController 直接分配图像？

> ID：15791571
> 
> 赞同：1
> 
> 时间：2013-04-03T15:26:03.127
> 
> 标签：iphone, objective-c, ios6, uiimageview, memory-profiling

在使用仪器分析我的应用程序时，我偶然发现了一个特殊的实时字节问题。**如果这是任何真正的“优化”或仪器故障，我很感兴趣。**如果整体实际内存占用量保持不变，减少“活动字节”有什么好处吗？对于这两种情况，实际内存使用量保持不变。

我在弹出框控制器中使用 UIImagePicker，它会选择一个大（最大 7mb）图像并将其分配给这样的图像视图：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {

    activeImageView.image = img;

} 
```

这是此操作的分配分析。在 2 次图像分配之后，每个图像的活动字节都增加了（大约 5.4 mb）。您可以在图表下方看到图像的 malloc 块（5.4mb 和 768kb）一旦我用新图像（5.mb 到 768kb）替换其中一个图像，实时字节就会“降级”，如图所示大约在 00:55 的图表：

![在此处输入图像描述](https://i.stack.imgur.com/8im4e.png)

我正在谈论的特点是，**如果获取此图像，将其保存到磁盘，然后我`imageWithContentsOfFile:`在下面的代码中使用，我的实时字节看起来非常不同：**

```
//this is what I use to save image to disk
     -(NSString* )saveImage:(UIImage*)image withID:(int)imageID 
{
        NSString* filepath = [[self imagesFolderPath] stringByAppendingPathComponent:[NSString stringWithFormat:@"%i.png",imageID]];

        BOOL success =   [UIImagePNGRepresentation(image) writeToFile:filepath atomically:YES];

        if(!success)
        {
            DLog(@"failed to write to file: %@",filepath );
        }

        success = [[NSFileManager defaultManager]fileExistsAtPath:filepath];
        DLog(@"file created: %@",success?@"YES":@"NO");
        return filepath;
    }

//this is the popover delegate telling me when the user has dismissed the image picker in popover
        -(void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
        {
                popoverController = nil;

    //take the image from the image view, write it to disk and assign back to the image view
                NSString* imageFilePath = [self saveImage:activeImageView.image withID:self.selectedID];

                if(imageFilePath)
                {
                    //this will work only for an existing icon file, otherwise 
                    imageView.image =[UIImage imageWithContentsOfFile:imageFilePath];
                }
        } 
```

引入此代码后，我的实时字节分配如下图所示。我重复相同的操作（从图像选择器将两个图像分配给 UIImageView，但在这里我添加了一个方法将它们写入磁盘，然后从磁盘读回它们。（三角形斜坡来自当我从图像创建 NSData用于写入磁盘）：

![在此处输入图像描述](https://i.stack.imgur.com/PNCFP.png)

# php - 表不存在

> ID：15791576
> 
> 赞同：0
> 
> 时间：2013-04-03T15:26:17.863
> 
> 标签：php, mysql

我创建了一个查询，它遍历一组表 ID 以获得它们组合值的总和。通过错误处理，我得到一个“表 'asterisk.custom_' 不存在”错误，并且查询显然被终止了。但是如果我删除错误处理，那么我会得到一个“mysql_fetch_array() 期望参数 1 是资源”，并且查询应该完成。提前感谢您的帮助。

```
 include("currentday.php");
    //---used for testing passing variables
    //echo $customID[0];
    //echo "<br>".$numrows;

    $i = 0;
     while($i<=$numrows)
{

mysql_select_db("asterisk") or die(mysql_error()); //This line determines the database to use
    $query = "SELECT  
            vicidial_users.user,
            vicidial_users.full_name,
            sum(vicidial_agent_log.pause_sec) as sumPause,
            sum(custom_$customID[$i].d_amt) as sumDamnt,
            sum(custom_$customID[$i].up_amt) as sumUpamnt,
            sum(custom_$customID[$i].md_amt) as sumMdamnt,
            sum(custom_$customID[$i].s_amount) as sumSamnt,
            sum(vicidial_agent_log.dispo_sec)
        FROM
            vicidial_agent_log
        INNER JOIN
            vicidial_users
        ON
            (vicidial_agent_log.user = vicidial_users.user)
        INNER JOIN
            custom_$customID[$i]
        ON
            (vicidial_agent_log.lead_id = custom_$customID[$i].lead_id)
        WHERE
            vicidial_users.user = 'tcx'
        GROUP BY
            vicidial_users.full_name
        ORDER BY
            vicidial_agent_log.event_time DESC
        ";              

    $queryResult = mysql_query($query);// or die(mysql_error());    

    while ($rowResult = mysql_fetch_array($queryResult)) 
                {

             $pauseResult[] = $rowResult["sumPause"];
             $sumdamntResult[] = $rowResult["sumDamnt"];
             $sumupamntResult[] = $rowResult["sumUpamnt"];
             $summdamntResult[] = $rowResult["sumMdamnt"];
             $sumsamntResult[] = $rowResult["sumSamnt"];

                }
                //print_r($pauseResult);
                //echo $pauseResult[0];

    $i++;       

} 
```

更新：该表存在于数据库中：custom_2346579543413 custom_5466546513564 它们是由拨号软件创建的，我从另一个查询中调用它们，该查询为我提供了表名的数字部分，因此该查询循环遍历 customID 数组中的值以进行查询，再次感谢

更新： Sammitch，谢谢你的建议，但他们没有工作。

解决方案：

谢谢 Marc，您证实了我的怀疑，即它循环正确，但由于某种原因，它循环的次数比我们键入的次数多。所以我回应了 $i 来确认，实际上它正在输出 0,1,2,3 并且因为我知道只有 3 个键，所以最后一个键没有返回任何东西，所以错误处理抓住了它并杀死了整个循环以及为什么关闭错误处理后它看起来是正确的。解决方案实际上相当简单，它在我使用的 while 循环评估字符串中

```
 while($i<=$numrows) 

    while($i<$numrows)//this worked, the equals part of that gave it an extra loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:35:03.070

> 并且查询按原样完成。

不，它没有。“mysql_fetch_array() 期望参数 1 是资源”的意思是“查询失败，在调用 mysql_fetch_array() 之前你没有检查”。

您的问题是字符串内部的变量扩展不喜欢数组索引。你需要改变：

```
"sum(custom_$customID[$i].d_amt) as sumDamnt," 
```

至：

```
"sum(custom_{$customID[$i]}.d_amt) as sumDamnt," 
```

或者：

```
"sum(custom_" . $customID[$i] . ".d_amt) as sumDamnt," 
```

让它正常工作。

# java - 使用 Netbeans 的 MySQL 问题

> ID：15791578
> 
> 赞同：0
> 
> 时间：2013-04-03T15:26:19.770
> 
> 标签：java, mysql, netbeans

好的，所以我在 godaddy.com 上创建了一个 mysql 数据库，我在那里创建了一个管理表，其中包含 3 个字段：ID、用户名和密码。

在我的程序中，我连接到数据库，它向我显示了表，所以我知道它的连接（Netbeans）

我下载了 Java JDBC 驱动程序并将其放入我项目的库中。但是，当我运行程序时，出现此错误：

```
package testdata;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class TestData {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {

    try
    {
    String Name = "rsg";
         String Pass= "dfgd";
        String Host = "blahhhhhhhhhhhhhhh";
        Connection con = DriverManager.getConnection( Host,Name, Pass);

          Statement stmt = con.createStatement (ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);

        String query="DELETE FROM ADMIN";
        stmt.executeUpdate(query);

        String sql = "SELECT * FROM ADMIN";
            ResultSet rs = stmt.executeQuery(sql);

         rs.moveToInsertRow( );

        rs.updateInt("ID", 1 );
        rs.updateString("Username", "CHRIS");
        rs.updateString("Password", "CHRIS");        

         stmt.close();
         rs.close();
    }

    catch(Exception e)
    {
        System.out.println("ERROR");
        e.printStackTrace();
    }

}
} 
```

错误是：

```
 java.sql.SQLException: No suitable driver found for ****THIS IS MY HostName****
at java.sql.DriverManager.getConnection(DriverManager.java:604)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at testdata.TestData.main(TestData.java:28) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:47:51.917

利用

```
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection con = DriverManager.getConnection(DatabaseUrl, DataDaseusername, DatabasePass); 
```

示例`DatabaseUrl`如下

jdbc:mysql://192.168.100.100/databasename

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:38:38.680

您的 JDBC 连接字符串不正确（您不能简单地使用主机名）。您需要使用 JDBC URL，对于 MySQL，它采用以下形式：

```
"jdbc:mysql://<hostname>:<port>/<database>" 
```

如果您的服务器在默认情况下运行，则where`<port>`是可选的，也是可选的。`getConnection`将您的方法更改为：

```
connection = DriverManager.getConnection(String.format(
        "jdbc:mysql://%s:%s/%s", Host, "3306", "YourDBName"),
        Name, Pass); 
```

将“YourDBName”替换为您尝试连接的数据库的名称。您还需要在类路径中包含[MySQL 驱动程序 JAR](http://dev.mysql.com/downloads/connector/j/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:52:55.073

**mysql-connector-java-5.1.22**从[mysql.com下载](http://dev.mysql.com/downloads/connector/j/)

确保您已在项目中添加 jar 文件夹。

我相信它正在寻找`com.mysql.jdbc.Driver`

确保您的连接字符串是正确的示例`"jdbc:mysql://remot-example-mysql999.servage.net:3306/databasename?zeroDateTimeBehavior=convertToNull";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:28:10.010

在您的类路径中添加 mysql 连接器 jar 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:29:15.353

我认为这是您的主机地址的问题。检查它在 MySql 文档中的外观

# asp.net - 这是使用 DevExpress ASPxGridView 编辑列表的最佳/正确方法吗 ?

> ID：15791583
> 
> 赞同：0
> 
> 时间：2013-04-03T15:26:50.500
> 
> 标签：asp.net, devexpress, editing, aspxgridview, ilist

知道DeveExpess ASPxGridView 的人可以看看这个。

这是使用网格编辑列表的最佳/正确方法吗？

我有一个 ItemModel 类型的对象，下面的代码用于允许 ASP.NET 网站用户对 ItemModel 列表执行 CRUD 操作。

我的问题是它看起来太复杂了，我怀疑我没有很好地利用网格。

为简单起见，我留下了将加载和保存 ItemModel 列表的数据库访问代码。

```
 protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        BindGrid();            
    }

    protected void OnRowInserting(object sender, ASPxDataInsertingEventArgs e)
    {
        IList<ItemModel> itemModels = CachedModels;
        int lineID = 0;
        if (itemModels .Count > 0)
        {
            lineID = itemModels[itemModels.Count - 1].LineID + 1;
        }

        ItemModel itemModel = new ItemModel()
        {
             , Code = e.NewValues["Code"] == null ? string.Empty : e.NewValues["Code"].ToString()
             , Name = e.NewValues["Name"] == null ? string.Empty : e.NewValues["Name"].ToString()
             , DateCreated = DateTime.Now
             , DateUpdated = DateTime.Now
        };
        itemModels.Add(itemModel);

        CachedModels = itemModels;

        ASPxGridView aspxGridView = (ASPxGridView)sender;
        aspxGridView.CancelEdit();
        e.Cancel = true;

        BindGrid();
    }
    protected void OnRowUpdating(object sender, ASPxDataUpdatingEventArgs e)
    {
        IList<ItemModel> itemModels = CachedModels;
        int lineID = Convert.ToInt32(e.Keys[0].ToString());

        ItemModel itemModel = null;
        foreach (ItemModel model in itemModels)
        {
            if (model.LineID == lineID)
            {
                itemModel = model;
                break;
            }
        }
        if (itemModel != null)
        {

            itemModel.Code = e.NewValues["Code"] == null ? string.Empty : e.NewValues["Code"].ToString();
            itemModel.Name = e.NewValues["Name"] == null ? string.Empty : e.NewValues["Name"].ToString();
            containerItemModel.DateUpdated = DateTime.Now;

            itemModels[lineID] = itemModel;
            CachedModels = itemModels;
        }
        ASPxGridView aspxGridView = (ASPxGridView)sender;
        aspxGridView.CancelEdit();
        e.Cancel = true;

        BindGrid();
    }
    protected void OnRowDeleting(object sender, ASPxDataDeletingEventArgs e)
    {
        IList<ItemModel> itemModels = CachedModels;

        int lineID = Convert.ToInt32(e.Keys[0].ToString());

        ItemModel itemModel = null;
        foreach (ItemModel model in itemModels)
        {
            if (model.LineID == lineID)
            {
                itemModel = model;
                break;
            }
        }
        if (itemModel != null)
        {
            itemModels.Remove(itemModel);
            CachedModels = itemModels;
        }

        ASPxGridView aspxGridView = (ASPxGridView)sender;
        aspxGridView.CancelEdit();
        e.Cancel = true;

        BindGrid();
    }

    private void BindGrid()
    {
        grdItems.DataSource = CachedModels;
        grdItems.DataBind();
    }
    private IList<ItemModel> CachedModels
    {
        get
        {
            List<ItemModel> models= (List<ItemModel>)Session["ItemModels"];
            if (models == null)
            {
                models= new List<ItemModel>();
                Session["ItemModels"] = models;
            }
            return models;
        }
        set
        {
            Session["ItemModels"] = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:14:41.207

我相信您当前的代码是非常正确的。

这是DX的建议方式：

[ASPxGridView - 如何使用自定义数据源实现 CRUD 操作](http://www.devexpress.com/issue=KA18686)

# java - Java bigDecimal MySQL (Prepared Statement) 小数丢失

> ID：15791585
> 
> 赞同：3
> 
> 时间：2013-04-03T15:26:53.383
> 
> 标签：java, mysql, prepared-statement, bigdecimal

我的问题是，当我将我的保存`BigDecimal`在数据库中（例如：22.21）然后我们从数据库中取回它时`BigDecimal`，小数点不再存在（例如：22）。

我有以下查询

```
String statement ="INSERT INTO " + TABLE_NAME + " (amount) VALUES( ? )";
PreparedStatement stmt = DataBase.getInstance().prepareStatement(statement);
//set data
stmt.setBigDecimal(1, payment.getAmount());
// ... 
```

然后我以这种方式从数据库中取回金额：

```
String q = "SELECT * FROM " + TABLE_NAME + " WHERE project=" + project.getId();
//...
payment.setAmount(rs.getBigDecimal("amount")); // <-- decimal is lost 
```

我的数据库中的金额是：

```
amount NUMERIC NOT NULL 
```

* * *

**回答：**

MySQL 类型应该是`DECIMAL(x,y)`而不是`NUMERIC`.

*（这解决了我的问题，谢谢安德烈）*

# linq - Linq 查询以返回父级或最近的子级

> ID：15791586
> 
> 赞同：0
> 
> 时间：2013-04-03T15:26:57.843
> 
> 标签：linq, entity-framework

我有一个引用自身的类，如下所示：

```
public class Person
{
    int Id { get; set; }
    string Name { get; set; }
    DateTime CreatedOn { get; set; }

    Person Parent { get; set; }
    ICollection<Person> Children { get; set; }
} 
```

我需要的是一个 Linq 查询，它将返回一个列表，该列表仅包含那些有孩子的记录的最新记录（基于“CreatedOn”），或者那些没有孩子的父母本身。查询还需要对整个“家庭”应用一些过滤器。例如，如果我按名称“John”过滤，并且只有父母的名字是“John”，我仍然需要检索它最近的孩子。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:30:52.787

你可以这样做：

```
var results = db.Persons.Where(p => p.Name == "John")
                        .Select(p => p.Children.OrderByDescending(c => c.CreadedOn).FirstOrDefault() ?? p); 
```

或者，如果您更喜欢查询语法

```
var results = 
    from p in db.Persons
    where p.Name == "John"
    select(p => p.Children.OrderByDescending(c => c.CreadedOn).FirstOrDefault() ?? p); 
```

生成的 sql 将如下所示：

```
SELECT 
    (CASE 
        WHEN NOT (EXISTS(
            SELECT TOP (1) NULL AS [EMPTY]
            FROM [Person] AS [t2]
            WHERE [t2].[ParentId] = [t0].[Id]
            ORDER BY [t2].[Id] DESC
            )) THEN 1
        WHEN NOT NOT (EXISTS(
            SELECT TOP (1) NULL AS [EMPTY]
            FROM [Person] AS [t2]
            WHERE [t2].[ParentId] = [t0].[Id]
            ORDER BY [t2].[Id] DESC
            )) THEN 0
        ELSE NULL
     END) AS [value], [t0].[Id], [t0].[ParentId], [t0].[Name], [t0].[CreatedOn]
FROM [Parent] AS [t0]
WHERE [t0].[Name] = @p0
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:33:41.477

不确定使用 Linq-To-Entities，使用 Linq-To-Objects 这应该可以工作：

```
var lastChildOfJohn = persons.Where(p => p.Name == "John" && p.Children.Any())
    .SelectMany(p => p.Children)
    .OrderByDescending(p => p.CreatedOn)
    .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:51:09.940

您可能应该使用**Stack**对象，因为它们使用 LIFO（后进先出基础）。

这是 MSDN 的链接：-

[http://msdn.microsoft.com/en-us/library/system.collections.stack.aspx](http://msdn.microsoft.com/en-us/library/system.collections.stack.aspx)

这对我来说，正是你想要做的。

如果您使用 Stack.Peek 方法，它将自动返回放置在堆栈上的最后一个对象。

您还可以使用 Pop 返回最新的对象，然后将其从堆栈中删除。

> Peek 返回堆栈顶部的对象而不删除它。
> 
> Pop 移除并返回堆栈顶部的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:41:06.587

好吧，经过大量的摸索和反复试验，这是我提出的查询（为了便于阅读，分为 3 行）：

```
var query = db.People.AsQueryable();
query = !string.IsNullOrEmpty(name) ? query.Where(x => x.Name.Contains(name) || x.Ocorrencias.Any(y => y.Name.Contains(name))) : query;
query = query.Select(p => (p.Children.Count == 0 && p.Parent == null) ? p : p.Children.OrderByDescending(c => c.CreatedOn).FirstOrDefault()).Where(x => x != null); 
```

这将返回我需要的内容：将过滤器应用于父级和子级的对象列表（如果有的话）。如果有孩子，只返回最近的一个。我不得不把“Where x != null”放在最后，以过滤掉“FirstOrDefault”返回的空对象。

我打算将 pswg 和 Tim 的评论标记为答案，因为他们让我走上了正确的道路来解决这个问题，但显然我只能将一条评论标记为答案。谢谢您的帮助！

# jquery - 在 Rails 应用程序中显示 Jquery 自动完成功能，但我无法与之交互

> ID：15791589
> 
> 赞同：0
> 
> 时间：2013-04-03T15:27:12.337
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我安装了一个自定义 jquery-ui 安装（1.10.2），其中所有功能都已选择，并且平滑主题样式表。我正在使用 Rails 插件 rails3-jquery-autocomplete。我正在使用的表单查询正在工作并在我键入时显示关联的记录。但是，如果我将鼠标悬停在框上或按下向下键，弹出窗口就会消失，并且框内没有任何内容。

当我在框中键入“00”时，以下内容显示为控制台输出：

```
Started GET "/cabinets/autocomplete_cabinet_name?term=00" for 127.0.0.1 at 2013-
04-03 11:24:06 -0400
Processing by CabinetsController#autocomplete_cabinet_name as JSON
  Parameters: {"term"=>"00"}
   ←[1m←[35mUser Load (1.0ms)←[0m  SELECT `users`.* FROM `users` WHERE `users`.`i
 d` = 2 LIMIT 1
   ←[1m←[36mCabinet Load (9.8ms)←[0m  ←[1mSELECT cabinets.id, cabinets.name FROM
 `cabinets` WHERE (LOWER(cabinets.name) LIKE '00%') ORDER BY cabinets.name ASC LI
 MIT 10←[0m
 Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 10.7ms) 
```

有没有人有这个问题的经验？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:28:46.203

我正在加载 jquery-ui 两次。固定的。

# windows-phone-7 - WMAppManifest.xml 中的包/产品 ID 是强制性的吗？

> ID：15791591
> 
> 赞同：3
> 
> 时间：2013-04-03T15:27:16.177
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, manifest

我需要为另一家公司创建一个应用程序。所以我不会直接提交app，需要让公司自己定制，自己提交。

听说WMAppManifest.xml文件的一些属性被web提交界面自动替换了，其他的没有。以下状态是什么（Microsoft 资源中从未提及）：

*   产品编号
*   作者
*   出版商
*   发布者 ID

我可以让 Visual Studio 在清单中生成的值（然后我假设它们将被 Web 提交界面覆盖），还是我必须向我的客户询问这些字段的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:03:37.660

**ProductID**、**Author**、**Publisher**和**PublisherID**的值仅与本地测试相关，并且在将您的应用程序提交到 Windows Phone 商店时被覆盖...

1.  [关于 Windows Phone 7 和 WMAppManifest.xml 的先前答案](https://stackoverflow.com/a/14486656/247257)
2.  [Windows Phone 8 和新的 PublisherID](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/7e265aed-1719-4158-bc98-5d985e694c4c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:46:20.313

如果另一家公司进行最终构建，那么最初从他们那里获取这些值是有意义的，因此当您交换代码时，数据保持不变。

# asp.net-mvc - 使用 MVC 如何绑定选定单选按钮的列表？

> ID：15791593
> 
> 赞同：1
> 
> 时间：2013-04-03T15:27:21.020
> 
> 标签：asp.net-mvc, model-binding

我有一些用于显示从数据库驱动的问卷的嵌套视图模型。显示问题很简单，但我不知道如何绑定到模型或解析提交时选择的答案。

我的对象看起来像（伪）：

```
public class QuestionSheetViewModel(){
    public list<QuestionViewModel> Questions;
    public string UserName;
}

public class QuestionViewModel(){
    public int QuestionId;
    public string QuestionText;
    public dictionary<int, string> answers;
} 
```

在我看来，我遍历问题，显示每个问题文本，然后将每个答案呈现为单选按钮：

```
 @Html.RadioButton(question.QuestionID, answer.Key()); 
```

通过使用 question.questionId 作为单选按钮名称，它们被组合在一起，将用户限制为每个问题一个答案。

当我提交时，模型的问题列表是空的。是否可以自动将其绑定到我的视图模型？如果没有，我需要做什么来解析提交的表单以找到每个问题的选定答案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:00:55.837

您可以稍微调整您的模型以符合您的要求：

```
public class QuestionSheetViewModel
{
    public List<QuestionViewModel> Questions { get; set; }
    public int QuestionId { get; set; }
}

public class QuestionViewModel
{
    public string QuestionText { get; set; }
    public int SelectedAnswerId { get; set; }
    public List<AnswerViewModel> Answers { get; set; }
}

public class AnswerViewModel
{
    public int AnswerId { get; set; }
    public string Text { get; set; }
} 
```

然后有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new QuestionSheetViewModel
        {
            QuestionId = 1,
            Questions = new[] 
            { 
                new QuestionViewModel
                {
                    QuestionText = "question 1",
                    SelectedAnswerId = 2,
                    Answers = new[] 
                    {
                        new AnswerViewModel { AnswerId = 1, Text = "answer 1" },
                        new AnswerViewModel { AnswerId = 2, Text = "answer 2" },
                    }.ToList()
                },
                new QuestionViewModel
                {
                    QuestionText = "question 2",
                    SelectedAnswerId = 3,
                    Answers = new[] 
                    {
                        new AnswerViewModel { AnswerId = 3, Text = "answer 3" },
                        new AnswerViewModel { AnswerId = 4, Text = "answer 4" },
                    }.ToList()
                },
            }.ToList()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(QuestionSheetViewModel model)
    {
        // When the form is submitted the model will be properly bound
        return View(model);
    }
} 
```

带有相应的视图 ( `~/Views/Home/Index.cshtml`)：

```
@model QuestionSheetViewModel

@using (Html.BeginForm())
{ 
    @Html.HiddenFor(x => x.QuestionId)
    <ul>
        @Html.EditorFor(x => x.Questions)
    </ul>
    <button type="submit">OK</button>
} 
```

以及一个相应的编辑器模板，它将按照惯例为每个问题自动呈现 ( `~/Views/Shared/EditorTemplates/QuestionViewModel.cshtml`)：

```
@model QuestionViewModel

<li>
    @Html.DisplayFor(x => x.QuestionText)
    @Html.HiddenFor(x => x.QuestionText)
    <ul>
        @for (int i = 0; i < Model.Answers.Count; i++)
        {
            <li>
                @Html.HiddenFor(x => x.Answers[i].AnswerId)
                @Html.HiddenFor(x => x.Answers[i].Text)
                @Html.RadioButtonFor(x => x.SelectedAnswerId, Model.Answers[i].AnswerId)
                @Html.DisplayFor(x => x.Answers[i].Text)
            </li>
        }
    </ul>
</li> 
```

# javascript - 打印预览 IE

> ID：15791597
> 
> 赞同：0
> 
> 时间：2013-04-03T15:27:34.183
> 
> 标签：javascript, html, .net, css, asp-classic

Chromes 新的打印预览页面，您可以在其中查看打印前的打印效果，是否可以在 IE 中实现相同的预览或需要完成哪些侧边跳转

我可以选择在新页面中打开带有打印 css 的 html，（但它不是那么漂亮）但我想知道是否还有其他选项可以获得相同的 chrome 外观？

打印视图 atm 见下图： chrome

![在此处输入图像描述](https://i.stack.imgur.com/LPB3W.png)

打印查看atm见下图：IE

![在此处输入图像描述](https://i.stack.imgur.com/JfZ5H.png)

我更喜欢使用 html、css 和 javascript，但我对 .net 解决方案持开放态度

# drupal - Drush install on local server error（命令 pm-enable 需要更高的引导级别）

> ID：15791599
> 
> 赞同：0
> 
> 时间：2013-04-03T15:27:41.667
> 
> 标签：drupal, drush

我在本地 mamp 安装的 Drush 中收到错误消息

```
PDO::__construct(): [2002] Connection refused (trying to connect via tcp://127.0.0.1:3306)             [warning]
environment.inc:517
Command pm-enable needs a higher bootstrap level to run - you will need to invoke drush from a more    [error]
functional Drupal environment to run this command.
The drush command 'en devel' could not be executed.                                                    [error]
Drush was not able to start (bootstrap) the Drupal database.                                           [error]
Hint: This may occur when Drush is trying to:
 * bootstrap a site that has not been installed or does not have a configured database. In this case
you can select another site with a working database setup by specifying the URI to use with the --uri
parameter on the command line. See `drush topic docs-aliases` for details.
 * connect the database through a socket. The socket file may be wrong or the php-cli may have no
access to it in a jailed shell. See http://drupal.org/node/1428638 for details.

Drush was attempting to connect to: 
  Drupal version    : 7.21
  Site URI          : http://default
  Database driver   : mysql
  Database hostname : 127.0.0.1
  Database username : root
  Database name     : geoslate
  Default theme     : garland
  Administration theme: garland
  PHP configuration : /private/etc/php.ini
  Drush version     : 5.8
  Drush configuration: 
  Drupal root       : /Applications/MAMP/htdocs/geoslate
  Site path         : sites/default
  Modules path      : sites/all/modules
  Themes path       : sites/all/themes
  File directory path: sites/default/files
  %paths            : Array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:28:18.000

我的drupal设置需要一个端口，指定在MAMP主页上，对我来说是8889

# r - 在 R 中以具有背景颜色的单元格格式绘制表格

> ID：15791605
> 
> 赞同：2
> 
> 时间：2013-04-03T15:27:57.543
> 
> 标签：r, ggplot2, treemap

我有一个有 2 列的表。第一列是测试名称，第二列是测试的成功/失败。我想以这样一种方式绘制它，即绘图区域被分成正方形/矩形网格，每个测试名称都属于一个正方形/矩形。如果测试成功，则背景颜色应为绿色，否则为红色。基本上是一个树形图，但所有矩形的大小都相同。

```
 ret = data.frame("x" = c("test1","test2","test3","test4"), "y" = c("success","success","failure","success")) 
```

我希望将其绘制成 4 个单元格，测试名称显示在中心。test3 块的背景颜色应为红色和绿色，其余部分应为红色和绿色。我尝试使用树图包和投资组合包的 map.market 函数，但它们都是树图函数，即使在为所有人提供相同的大小参数之后，它们仍然为每个单元格提供不同的大小。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:48:14.083

我会以这种格式获取数据：

```
# > ret
#       x       y xmin xmax ymin ymax
# 1 test1 success    0    3    0    1
# 2 test2 success    0    3    1    2
# 3 test3 failure    3    6    0    1
# 4 test4 success    3    6    1    2 
```

然后这样做：

```
ggplot(ret, aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax)) + 
          geom_rect(colour="white", alpha = 0.5, aes(fill=y)) + 
          scale_fill_manual(values=c("red", "green"), guide=FALSE) + 
          geom_text(aes(x=(xmin+xmax)/2, y=(ymin+ymax)/2, label=x)) + 
          theme_bw() + theme(axis.text.y = element_blank(), 
          axis.text.x = element_blank(), axis.ticks.x = element_blank(), 
          axis.ticks.y = element_blank(), panel.grid.major.x = element_blank(), 
          panel.grid.major.y = element_blank(), panel.grid.minor.x = element_blank(), 
          panel.grid.minor.y = element_blank()) + xlab("") + ylab("") + 
          ggtitle("My tests") 
```

这就是我得到的：

![在此处输入图像描述](https://i.stack.imgur.com/R30ri.png)

我会将您可能寻求的任何进一步的小调整留给您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:56:59.280

也可以使用 treemap 包来完成：

```
ret$index <- factor(ret$x)
ret$area <- 1
ret$color <- factor((ret$x=="test3") + 1, labels=c("Green", "Red"))

tmPlot(ret, index="ind", 
   vSize="value2", 
   vColor="isgreen", 
   type="categorical",
   palette=c("darkolivegreen1", "darksalmon"),
   position.legend="none",
   fontsize.labels=14,       
   title="My test with the treemap package") 
```

![树状图](https://i.stack.imgur.com/uRZTP.png)

但是，一旦您有了 ggplot2 的有效解决方案（如上面的答案），就很难再进行进一步的调整和定制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:19:09.753

一个相当简单的`base`图形解决方案，使用函数`image`：

```
tableplot <- function(ret, nrow, ncol, main){
    m <- matrix(as.integer(ret$y),nrow,ncol)
    image(1:nrow,1:ncol,m,col=c("red","green"),axes=FALSE, xlab="",ylab="",main=main)
    text(row(m),col(m),labels=matrix(ret$x,nrow,ncol))
    } 
```

例子：

```
ret <- data.frame("x" = c("test1","test2","test3","test4"), "y" = c("success","success","failure","success"))
tableplot(ret, 2, 2, "My tests") 
```

![在此处输入图像描述](https://i.stack.imgur.com/XRJFA.png)

# php - 在codeigniter中创建像php这样的查询的最佳实践是什么？

> ID：15791607
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:27:59.057
> 
> 标签：php, codeigniter, treeview

我正在为我的项目创建一个树视图，在我过去的代码中，我使用 php mysql_query（和其他 php 内置函数）来创建一个树视图，现在我想将其更改为 codeigniter，这是我的两个示例代码. 我已经在 ci 中自动加载数据库库

* * *

```
$sql = mysql_query("select * from mytbl") or die(mysql_error());
        while($row = mysql_fetch_array($sql)){
            /*another query here*/
        }
$sql = $this->db->query("select * from mytbl")->result()
           foreach($sql as $data){
             /*another query here*/
    } 
```

* * *

不还是要改变？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:31:17.383

mysql_ php 函数已被弃用，因此您应该停止使用这些函数。

CodeIgniter 有一个 Active Records 类，它使与数据库的通信变得非常简单。请参阅文档：[http ://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:34:30.487

Codeigniter 为查询数据库提供了一些很棒的实用程序。例如，您的查询可以写成：

```
$this->db->select("*")
         ->from("mytbl")->result(); 
```

不过我喜欢先获取**查询**对象，这样你就可以获得有用的信息，比如结果的数量：

```
$query = $this->db->select("*")
         ->from("mytbl")->get();
/* Afterwards you can get the result by: */
$query->result(); 
```

在我看来，这大大提高了查询的可读性。

当然，您可以继续使用旧的 php 风格，但从软件工程的角度来看，为了保持可读代码，您应该开始使用库为您提供的内容。

顺便说一句，您可以在官方文档中找到更多信息：http: [//ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# perl - 如何使用`perl -i`忽略只读文件？

> ID：15791611
> 
> 赞同：12
> 
> 时间：2013-04-03T15:28:14.270
> 
> 标签：perl, file-io, readonly

Perl 的`-i`开关似乎修改了只读文件：

```
$ echo 'foobar' > tmp.txt
$ chmod -w tmp.txt
$ perl -pi -w -e 's/foobar/FOOBAR/' tmp.txt
$ cat tmp.txt
FOOBAR 
```

这是出乎意料的，因为该命令不应该能够根据其权限修改文件。预计，尝试通过其他方式更新它会失败：

```
$ echo 'barbaz' > tmp.txt
-bash: tmp.txt: Permission denied 
```

为什么 Perl 修改只读文件（以及如何修改？），最重要的是：我怎样才能让 Perl 不这样做？

我能在这方面找到的唯一一些信息资源是[Perl FAQ](http://learn.perl.org/faq/perlfaq5.html#Why-does-Perl-let-me-delete-read-only-files-Why-does--i-clobber-protected-files-Isnt-this-a-bug-in-Perl-)：

> 文件的权限说明了该文件中的数据会发生什么。…如果您尝试写入文件，则文件的权限决定您是否被允许。

最终似乎它说它*不*应该能够写入它，因为文件系统说你不能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T15:46:22.487

`@ARGV`在一个`BEGIN`块中过滤：

```
perl -pi -e 'BEGIN{@ARGV=grep{-w $_}@ARGV} s/foobar/FOOBAR/' files 
```

现在，如果命令行上没有可写的文件，`@ARGV`则将为空，并且`ARGV`文件句柄将尝试从`STDIN`. 我可以想出两种方法来避免这个问题：

1.  `STDIN`也在`BEGIN`街区关闭

    ```
    perl -pi -e 'BEGIN{close STDIN;@ARGV=grep{-w $_}@ARGV}s/foobar/FOOBAR/' files 
    ```

2.  始终将此单行重定向输入称为`/dev/null`

    ```
    perl -pi -e 'BEGIN{@ARGV=grep{-w $_}@ARGV}s/foobar/FOOBAR/' files < /dev/null 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:37:55.940

请参阅[perlrun](http://p3rl.org/perlrun)中的文档：

> 重命名输入文件，按原始名称打开输出文件，并选择该输出文件作为 print() 语句的默认文件
> 
> (...)
> 
> 有关文件权限和 -i 问题的讨论，请参阅“为什么 Perl 允许我删除只读文件？为什么 -i 会破坏受保护的文件？这不是 Perl 中的错误吗？” 在 [perlfaq5](http://p3rl.org/perlfaq5)中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T15:36:16.023

从[perlrun](http://perldoc.perl.org/perlrun.html#Command-Switches)：

> **-i**
> 指定由 <> 构造处理的文件将被就地编辑。它通过重命名输入文件、按原始名称打开输出文件并选择该输出文件作为 print() 语句的默认文件来实现这一点。

所以它并没有真正修改文件。它将文件移开（需要目录写入权限，而不是文件写入权限），然后使用旧名称创建一个新文件。

> 我怎样才能让 Perl 不这样做？

我不认为你可以在使用`-i`.

# css - 身体背景 css 固定

> ID：15791613
> 
> 赞同：-1
> 
> 时间：2013-04-03T15:28:29.937
> 
> 标签：css

我想给我的身体一个固定在中间的背景。

这样当我缩小窗口时，它就不会开始切割右侧并保持左侧静止。我希望它同时向左和向右切割。

我希望它像这个例子：www.everythingisnew.pt

在该网站中，您可以清楚地看到背景同时从两侧被窗户“吃掉”。

它背后的css是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:30:02.160

`background-position: center`在`body`元素的 CSS中指定：

```
body {
    background: url('your/background/src.png') no-repeat fixed center
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:49:29.187

这可能会解决您的问题

```
background-image: url(src.jpg);
background-repeat: no-repeat;
background-position: fixed center;
background-size: cover; 
```

# html - 用作后端模板的 html 的设计过程

> ID：15791621
> 
> 赞同：0
> 
> 时间：2013-04-03T15:28:56.590
> 
> 标签：html, css

我正在将模型转换为 HTML + CSS。然后这个会被其他人用作一个PHP系统的模板（其实可以是任何服务器端语言，PHP不重要）

例如，有 10 种不同类型的页面。但是在每个页面中，许多块在许多情况下可能会有所不同。例如，对于匿名用户和登录用户，可以以不同方式显示块。但我不想复制整个 html 文件而只是更改该块并拥有另一个 html 文件。我知道可以编写 php 来包含许多文件中的部分页面。但是我的设计工作流程中还没有 php，我希望在将文件传递给 PHP 人员之前进行完整的 HTML 设计。

基本上，我想要的是用于设计目的的“级联”html 结构。因此，在“容器”html 文件中，我可以包含来自不同 HTML 文件的所有不同部分。

有谁知道设计动态页面的方法/工具/流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:44:55.970

我可以想到两种方法来实现这一点。首先使用 ajax 调用拉入页面上的各个组件，jquery 将使这相对容易。

或者，如果您不想使用 javascript，则使用 iframe。但是 iframes 方法非常容易出现错误，并且在某些布局中不起作用。还要记住，由于您不是直接将 html 注入页面，因此每个页面都必须跟踪自己的样式。

# python - mvc控制器单一职责原则和POST请求

> ID：15791623
> 
> 赞同：3
> 
> 时间：2013-04-03T15:28:58.890
> 
> 标签：python, django, model-view-controller, post, controller

我对我目前正在开发的 django Web 应用程序的正确/标准/建议方法感兴趣。我有编程的实践经验，但我担心我的实现效率，因为我对 MVC 和相关原理没有太多的理论知识。

我有几个表单必须从我的数据库中获取不同数量的信息（通过 AJAX POST 请求），所有这些都与用户将采取的单个操作相关（例如：购买房子，系统需要关于房子的信息，客户、前任所有者、付款方式等）。因此，POST 请求在一页中会非常频繁。

我的问题是：我应该让一个控制器负责每种不同“类型”的 POST 请求（一个控制器用于“房屋”请求，一个控制器用于“客户”等），还是可以拥有一个“销售数据” fetcher”控制器通过每个请求的参数之一处理所有相关的 POST 请求检查并相应地与模型通信？

如果没有正确使用问题系统，我深表歉意，这是我在这里的第一个问题。

**编辑：我的问题完全失效了！！！是的，该应用程序在 PYTHON 中，我确实在以前的项目中使用过 PHP。**

提前致谢！堆栈溢出多次成为救命稻草。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:33:31.073

在一般情况下，您会希望为每种“类型”的请求提供一个单独的控制器。这有助于保持代码简单，无需处理任何“特殊情况”，并且通常更易于重用。

# css - 如何在 CSS 中指定行高？一个全局声明还是特定于每个元素？

> ID：15791628
> 
> 赞同：2
> 
> 时间：2013-04-03T15:29:06.653
> 
> 标签：css

我意识到这可能是一个模糊的问题，但我不确定在创作网站时什么是行高的最佳方法。您是否为整个站点创建一个全局声明，然后为每个单独的元素声明单独的行高？这里有哪些最佳实践？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:39:30.050

最好的办法是在没有单位的身体上全局设置它。（1.5 而不是 1.5em）

这样，行高将是元素字体大小的 1.5 倍，这会导致相对行高有助于您的垂直基线/垂直节奏。

如果通过缩放来增加字体大小，则行高会自行调整为新的字体大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:33:46.133

这仅取决于您的页面上将有多少种行高，如果大多数都相同，请遵循 Lowkase 的建议并在`body`标签上设置默认值，然后在其他标签上设置变体。或者你可以有三个类，比如`.lhs`（行高小），`.lhm`并将`.lhl`这些类放在你的元素上以指定行高。通过这种方式，您可以最大限度地减少指定行高时使用的代码行数。

```
.lhs {
    line-height: 10px;
}
.lhm {
    line-height: 30px;
}
.lhl {
    line-height: 50px;
} 
```

# c# - 使用 DataGridView 在 PostgreSQL 中添加、删除和更新记录

> ID：15791629
> 
> 赞同：0
> 
> 时间：2013-04-03T15:29:11.703
> 
> 标签：c#, postgresql, datagridview

我使用 DataGridView 显示来自 PostgreSQL 的行，效果很好。现在我想要实现的是一个可以添加、编辑和删除行的编辑器`DataGridView`。为此，我创建了事件处理程序来处理这些事件。在处理程序中，我将插入、更新或删除 PostgreSQL 数据库中的行。

```
dgOrderLines.RowsAdded += 
   new DataGridViewRowsAddedEventHandler(dgOrderLines_RowsAdded);
dgOrderLines.RowsRemoved += 
   new DataGridViewRowsRemovedEventHandler(dgOrderLines_RowsRemoved);
dgOrderLines.CellEndEdit += 
   new DataGridViewCellEventHandler(dgOrderLines_CellEndEdit); 
```

但是，如果我运行此代码，我会在第一次填充时看到事件被触发，`DataGridView`如下所示：

```
dgOrderLines.DataSource = Program.DB.GetView("someview"); 
```

（`Program.DB.GetView`返回一个`DataTable`。）

现在，如果我要实现事件处理程序，我将在我的数据库中添加和删除记录，每次我加载我的`DatagridView`. 有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:20:03.020

找到了。

在设置`DataSource`事件处理程序之前设置时，它们不会被调用。

# twig - 不显示欧元符号

> ID：15791630
> 
> 赞同：0
> 
> 时间：2013-04-03T15:29:12.200
> 
> 标签：twig

我有一个像这样在浏览器中显示的字符串

欧元 (&EURO;)

我从树枝打印它的方式是

```
{{ country.display }} 
```

我想将 € 打印为欧元符号。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:45:30.300

```
{{ country.display }}
{{ country.symbol | raw }} 
```

我为符号创建了一个单独的变量，现在我可以应用“原始”过滤器并且它可以工作。

# ruby-on-rails-3.2 - 使用 before_filter 时未定义的局部变量或方法

> ID：15791631
> 
> 赞同：0
> 
> 时间：2013-04-03T15:29:14.233
> 
> 标签：ruby-on-rails-3.2, upgrade, ruby-on-rails-2

我正在将项目从 rails 2.0.2 升级到 3.2.13。我正在使用`before_filter`：`build_menu`像这样

```
class MyController < ApplicationController   
  layout 'main'

  before_filter :build_menu 
  ... 
protected   
  def build_menu
    @menu = []   
  end 
end 
```

现在有了 Rails 3，我得到了错误：

> 未定义的局部变量或方法`build_menu`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T17:44:19.270

我遇到了同样的问题。原来我在文件中不匹配`def`，`end`但由于某些原因，IDE 没有在文件中给我任何错误。仔细检查一下。

# c# - 如何将 Umbraco 项目插入 cshtml 文件中的 url，剃刀？

> ID：15791636
> 
> 赞同：1
> 
> 时间：2013-04-03T15:29:22.843
> 
> 标签：c#, razor, umbraco

我做了一个包含 youtube 链接的 If 语句。

在 umbraco 中，我有一个文本字符串框，允许用户插入 youtube 视频的 ID。

```
<div class="module m-video">
    <div class="regular">
        <div class="graphics video-container">
        <iframe width="100%" src="http://www.youtube.com/embed/<umbraco:Item field="youtubeId" runat="server" />?rel=0" frameborder="0" allowfullscreen></iframe>
    </div>
    </div>
</div> 
```

但是当页面加载时，它会显示`<umbraco:Item field="youtubeId" runat="server" />`而不是用户输入的内容。

解决方法是显示用户在文本字符串框中插入的内容。

*一切都必须用剃刀完成*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:33:55.447

我将创建一个“YoutubeVideo”宏以及它的剃刀脚本“YoutubeVideo.cshtml”。该 cshtml 代码如下所示：

```
@using umbraco.MacroEngines
@inherits umbraco.MacroEngines.DynamicNodeContext

<div class="module m-video">
    <div class="regular">
        <div class="graphics video-container">
            <iframe width="100%" src="http://www.youtube.com/embed/@Model.youtubeId?rel=0" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
</div> 
```

然后在您的 .master 中，您可以像这样包含该 mascroscript：

```
<umbraco:Macro ID="Macro1" Alias="YoutubeVideo" runat="server" /> 
```

如果您将 Umbraco 6+ 与 MVC 一起使用，这种方法可能会有所不同，但否则这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:16:12.157

如果您在 umbraco 模板编辑器中执行此操作，您应该能够`src`用单引号交换表示属性的双引号，并且 umbraco 项不需要更改。

```
<iframe width="100%" src='http://www.youtube.com/embed/<umbraco:Item field="youtubeId" runat="server" />?rel=0' frameborder="0" allowfullscreen></iframe> 
```

# javascript - HTML & CSS：没有滚动条时的固定位置

> ID：15791639
> 
> 赞同：0
> 
> 时间：2013-04-03T15:29:24.923
> 
> 标签：javascript, html, css, scrollbar, css-position

我正在为一个带有“固定页脚块（FF_BLOCK）”、一些内容和一个“背景图像块（BG_BLOCK）”（也有一些内容）的网站制作模板。

内容不多的时候，BG_BLOCK应该放在FF_BLOCK的正上方（位置：固定；底部：0px）。我从不希望 FF_BLOCK 和 BG_BLOCK 之间有间隙。

当有很多内容（和一个滚动条）时，BG_BLOCK 可以像现在一样显示。

仅使用 HTML + CSS 是否可能，还是使用 JS 是不可避免的？

当前的 HTML

```
<div id="navigation">...</div>
<div id="content">...</div>
<div id="BG_BLOCK">...</div>
<div id="FF_BLOCK">...</div> 
```

当前的 CSS

```
#BG_BLOCK {
background: url(../images/background.jpg) repeat-x top center;
height: 380px;
padding-top: 467px;
margin-top: -347px;
}

#FF_BLOCK {
position: fixed;
bottom: 0px;
} 
```

看这张图片：![在此处输入图像描述](https://i.stack.imgur.com/QDFCO.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:33:15.637

你试过`min-height`吗：？

```
BG_BLOCK {
    min-height: 100%;
} 
```

我假设背景图像足够大。如果没有，请使用`background-size: cover`或`background-size: auto 100%`填满整个屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:59.570

您已声明 FF_BLOCK （位置：固定）。您的 FF_BLOCK 已从正常的页面流中删除。使用最小高度和其他一些定位，然后固定。

# c# - web.config 中是否需要两个连接字符串？

> ID：15791643
> 
> 赞同：0
> 
> 时间：2013-04-03T15:29:35.003
> 
> 标签：c#, asp.net-mvc, entity-framework

我的代码有问题。我在 KekantoContext.cs 文件中有这个类

```
 public class KekantoContext : DbContext
{

    public DbSet<Lugar> Lugares { get; set; }
    public DbSet<Categoria> Categorias { get; set; }
    public DbSet<UserMessage> UserMessages { get; set; }

  } 
```

我在 AccountModel.cs 文件中有另一个类：

```
 public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

我想知道我的 web.config 文件中是否需要有 2 个连接字符串。

我有这个：

```
 <connectionStrings>
  <add name="KekantoContext"
 connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Kekanto.mdf;Integrated Security=True"
 providerName="System.Data.SqlClient"/>

   <add name="UsersContext"
 connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Kekanto.mdf;Integrated Security=True"
 providerName="System.Data.SqlClient"/>

</connectionStrings> 
```

该代码不适用于这 2 个连接字符串，但我想知道可能的解决方案是否需要 2 个连接字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:38:37.667

```
 public class UsersContext : DbContext
     {
         public UsersContext()
           : base("UsersContext")
         {
         }

          public DbSet<UserProfile> UserProfiles { get; set; }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:58.257

我认为可以让 tor 参数 uctwo 连接字符串的名称，您只需将要使用的字符串的名称传递给他的字符串。

```
public UsersContext()
        : base("UsersContext")
    {

    } 
```

或者你可以在运行时做

```
 public UsersContext(string connect)
            : base(connect)
        {

        }

UserContext =  new UserContext("UsersContext"); 
```

# silverlight - Silverlight Grid 中子控件的 Tab 键导航

> ID：15791650
> 
> 赞同：0
> 
> 时间：2013-04-03T15:30:15.913
> 
> 标签：silverlight, silverlight-4.0

我正在使用silverlight网格。我有两列。一个是文本列。另一个是模板列。基本上我正在使用网格实现输入表单。

```
Label    Input control
Username TextBox control
Password PasswordBox control 
Enabled  CheckBox control
and so on 
```

标签和输入控件在运行时解析。现在，如果您单击 tab 键，焦点转到单元格。而不是这种行为，我想让控件在按下 tab 键时获得焦点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:09:28.857

在silverlight中，默认选项卡顺序是在网格中设置的一个一个控件，如果要更改选项卡顺序，则可以`tabindex`在每个控件中设置

# xml - 在 VB.Net 中，如何将 XmlNodeReader 与多个相同类型的项目一起使用？

> ID：15791655
> 
> 赞同：0
> 
> 时间：2013-04-03T15:30:35.647
> 
> 标签：xml, vb.net, linq-to-xml

我写了以下代码：

```
Imports System.Xml
Imports System.Security.Cryptography
Imports System.IO

Public Class FormMain

Private Sub btnGo_Click(sender As System.Object, e As System.EventArgs) Handles btnGo.Click
    Dim ds1 As New DataSet
    ds1 = NewGetRecords()
    DataGridView1.DataSource = ds1.Tables(0)
    Label1.Text = ds1.Tables(0).TableName
    If ds1.Tables.Count > 1 Then
        DataGridView2.DataSource = ds1.Tables(1)
        Label2.Text = ds1.Tables(1).TableName
    End If
End Sub
Public Function NewGetRecords() As DataSet
    Dim ds As New DataSet
    Dim xd As New XmlDocument
    xd.LoadXml(TextBox1.Text)
    ds.ReadXml(New XmlNodeReader(xd))
    Return ds
End Function

End Class 
```

这是我正在使用的 XML 数据（这有效）：

```
<?xml version="1.0"?><ABMDataSets><ABDataSet><OwnerLogin>demo</OwnerLogin><OwnerUniqueID>abcd</OwnerUniqueID><OwnerPassword>abcd</OwnerPassword><OwnerName>Demo Owner</OwnerName><Address1>324 East Wisconsin Avenue</Address1><Address2>Suite 423</Address2><Address3></Address3><City>Milwaukee</City><State>WI</State><Country>US</Country><PostalCode>53202</PostalCode><Phone>414-431-8775</Phone><Email>abcd@efg.com</Email><PayPalAccount>abcd@efg.com</PayPalAccount><PercentMarkup>5</PercentMarkup><JoinDate>2012-01-25 00:57:00</JoinDate><ReferredBy></ReferredBy><Active>1</Active></ABDataSet></ABMDataSets> 
```

当我有多条记录时不起作用（例如，有两条类似于上面的记录）：

```
<?xml version="1.0"?><ABMDataSets><ABDataSet><OwnerLogin>demo</OwnerLogin><OwnerUniqueID>abcd</OwnerUniqueID><OwnerPassword>abcd</OwnerPassword><OwnerName>Demo Owner</OwnerName><Address1>324 East Wisconsin Avenue</Address1><Address2>Suite 423</Address2><Address3></Address3><City>Milwaukee</City><State>WI</State><Country>US</Country><PostalCode>53202</PostalCode><Phone>414-431-8775</Phone><Email>abcd@efg.com</Email><PayPalAccount>abcd@efg.com</PayPalAccount><PercentMarkup>5</PercentMarkup><JoinDate>2012-01-25 00:57:00</JoinDate><ReferredBy></ReferredBy><Active>1</Active><OwnerLogin>demo</OwnerLogin><OwnerUniqueID>abcd</OwnerUniqueID><OwnerPassword>abcd</OwnerPassword><OwnerName>Demo Owner</OwnerName><Address1>324 East Wisconsin Avenue</Address1><Address2>Suite 423</Address2><Address3></Address3><City>Milwaukee</City><State>WI</State><Country>US</Country><PostalCode>53202</PostalCode><Phone>414-431-8775</Phone><Email>abcd@efg.com</Email><PayPalAccount>abcd@efg.com</PayPalAccount><PercentMarkup>5</PercentMarkup><JoinDate>2012-01-25 00:57:00</JoinDate><ReferredBy></ReferredBy><Active>1</Active></ABDataSet></ABMDataSets> 
```

第一组数据为我提供了一个名为 ABDataset 的漂亮表，所有字段都按预期列在列中。它只给了我一张桌子和一张记录。第二组数据应该给我相同的两条记录，但给我一些 19 或 20 个表，字段名称、列名称和值之间没有明显的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:15:39.210

我认为您需要一个额外的级别来封装每条记录，我`<rec></rec>`在这里使用过：

```
<?xml version="1.0" encoding="utf-8"?><ABMDataSets><ABDataSet><rec><OwnerLogin>demo</OwnerLogin><OwnerUniqueID>abcd</OwnerUniqueID><OwnerPassword>abcd</OwnerPassword><OwnerName>Demo Owner</OwnerName><Address1>324 East Wisconsin Avenue</Address1><Address2>Suite 423</Address2><Address3/><City>Milwaukee</City><State>WI</State><Country>US</Country><PostalCode>53202</PostalCode><Phone>414-431-8775</Phone><Email>abcd@efg.com</Email><PayPalAccount>abcd@efg.com</PayPalAccount><PercentMarkup>5</PercentMarkup><JoinDate>2012-01-25 00:57:00</JoinDate><ReferredBy/><Active>1</Active></rec><rec><OwnerLogin>demo</OwnerLogin><OwnerUniqueID>abcd</OwnerUniqueID><OwnerPassword>abcd</OwnerPassword><OwnerName>Demo Owner</OwnerName><Address1>324 East Wisconsin Avenue</Address1><Address2>Suite 423</Address2><Address3/><City>Milwaukee</City><State>WI</State><Country>US</Country><PostalCode>53202</PostalCode><Phone>414-431-8775</Phone><Email>abcd@efg.com</Email><PayPalAccount>abcd@efg.com</PayPalAccount><PercentMarkup>5</PercentMarkup><JoinDate>2012-01-25 00:57:00</JoinDate><ReferredBy/><Active>1</Active></rec></ABDataSet></ABMDataSets> 
```

或将每条记录包装在`<ABDataSet></ABDataSet>`

我稍微修改了您的代码，以一次显示所有表格：

```
 Dim miCnt As Integer

            Private Sub btnGo_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
                Dim ds1 As New DataSet
                ds1 = NewGetRecords()
                Dim iTbl As Integer = miCnt Mod ds1.Tables.Count
                DataGridView1.DataSource = ds1.Tables(iTbl)
                Label1.Text = ds1.Tables(iTbl).TableName
                miCnt += 1
            End Sub 
```

感谢您的 NewGetRecords() 代码 - 非常好！

# c# - 如何从组合框中获取值

> ID：15791656
> 
> 赞同：1
> 
> 时间：2013-04-03T15:30:42.430
> 
> 标签：c#, database, combobox, oledb

我无法从组合框中获取值。我的目标是，当我在组合框中选择一个项目时，它会在`txtadres`文本框中显示客户的地址。

当我测试代码时，它给出了一个空引用异常。

我也试过`comboBox1.SelectedItem.ToString();`，但也没有用。我不能使用`comboBox1.Text`，因为显示成员与值成员不同。显示成员是客户名称，值成员是客户代码。

```
private void comboBox1_SelectedValueChanged(object sender, EventArgs e)        
{           
    string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Application.StartupPath + "\\Database1.accdb";           
    string cc = comboBox1.SelectedValue.ToString();          
    string sql = "SELECT * FROM Customers WHERE customercode = '" + cc + "'";

    using (OleDbConnection con = new OleDbConnection(cs))  
    {

        if (cc == "")
        {
            txtadres.Text = "No address found!";
        }
        else
        {
            OleDbCommand com = new OleDbCommand(sql, con);
            con.Open();
            OleDbDataReader DB = com.ExecuteReader();
            if (!DB.Read())
                return;

            txtadres.Text = DB["Adress"].ToString();
            con.Close();
        }
    }
} 
```

**更新**我找到了解决方案，这对我有用：`string cc = Convert.ToString(comboBox1.SelectedValue);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:39:14.513

`SelectedItem`组合框中的,`ListBoxItem`并在[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)上进行了描述。

[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.controls.listboxitem.aspx)包含有关 ListBoxItem 的方法和属性的更多信息。

不过，简而言之，要访问 SelectedItem 的文本，您将使用如下代码：

```
string itemText = (comboBox1.SelectedItem.Content).ToString(); 
```

如果您的 ComboBox 项目不只是文本，这将返回所选对象（无论它是什么类）。如果它只是一个字符串，这将为您提供该字符串。

但是请记住，它`SelectedItem`可以为 null，因此您应该在使用之前对其进行 null 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:39:38.160

老实说，我不知道从哪里开始解决这个问题，但这里的第一个主要问题是您在每次索引更改时都与数据库建立连接，这是一个基本的不。

您需要查看使用数据适配器将数据库查询的内容填充到 DataTable 对象中。然后，您可以将组合框的数据源设置为 DataTable。

从这里，您可以为组合框分配显示和值成员，并在更改的索引上捕获选定的值，而无需对数据库进行任何调用。

这实际上是重新考虑您的解决方案的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:40:49.407

我对组合框也有类似的挫败感。这可能不是最好的，但这就是我所做的：

((ComboBoxItem)ComboBox.SelectedItem).CustomerCode;

将 ComboBoxItem 转换为您填充组合框的任何对象。当然，这仅在您使用您尝试访问的项目填充组合框时才有效。

# c++ - 操作数是否存储在内存中？(C/C++)

> ID：15791660
> 
> 赞同：0
> 
> 时间：2013-04-03T15:30:51.373
> 
> 标签：c++, c, assembly, operators, cpu

给定以下代码：

```
int x=4;
int g=2;
int z=x/g; 
```

据我所知，值“4”存储在内存中属于的位置`x`，“2”存储在`g`内存中的位置。现在，当 CPU 收到`z=x/g`命令时，他首先从内存中获取 和 的值`x`，`g`然后计算结果，并将其存储在`z`. 但是当以下代码运行时会发生什么：

```
int x=4;
int z=x/2; 
```

CPU得到'4'后，他怎么能得到'2'呢？CPU命令可以保存数据而不是地址和操作码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:26:31.193

您可以通过编写代码并查看反汇编来照亮自己。无论如何 - 2 和 4 都存储在寄存器中。然后执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:13:57.017

许多 CPU 命令可以具有嵌入式数据。这称为“立即操作数”。但是，很少有超过一个数据。详细信息因 CPU 架构和单个命令而异。

由于命令本身驻留在内存中，从技术上讲，将数据项嵌入到 CPU 命令中仍然算作“内存中的数据”。为了记录，地址也是一种立即操作数。对于 CPU 来说，这只是另一个数字。

具体除以二通常通过右移 1 操作（按位或算术，取决于）来实现。在我知道的所有 CPU 上，移位命令可以将移位操作数存储为立即数。

# c++ - 时间延迟视觉 C++

> ID：15791665
> 
> 赞同：-3
> 
> 时间：2013-04-03T15:31:07.757
> 
> 标签：c++, visual-c++, loops, opencv

我必须以 5 秒的间隔保存图像形式的网络摄像头，我尝试循环但它不能正常工作.. 我能做什么？？？有计时器吗？？？

```
if(i==0)
{
    cvSaveImage("crop.jpg",tmp);
    cvShowImage( "crop", tmp);
    i++;
    //printf("%d",i);
}
else
{
    i++;
    if(i==1000)
    {
        cvSaveImage("crop1.jpg",tmp);
        cvShowImage("crop1",tmp);
        //printf("%d",i);
    }
    if(i==2000)
        i=0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:35:20.093

使用适当的睡眠功能，而不是用循环破解某些东西。使用的正确功能可能取决于您的操作系统，但在 Windows 上，您可以使用 Sleep，正如 Joachim Pileborg 所建议的：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:35:16.223

你可以用时钟。这是一个例子：

[http://www.cplusplus.com/forum/beginner/76147/#msg408731](http://www.cplusplus.com/forum/beginner/76147/#msg408731)

.NET 框架上实际上有一个 Timer 类。

[http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:10:49.610

我会像 Raul 那样做，使用时钟来检查自上次保存图像以来的时间。有很多方法可以做到这一点，但我将尝试在这里使用时钟来说明这个概念的一个例子：

```
timePassed = (clock() - lastTime) / CLOCKS_PER_SEC;
bool takeNewPicture = timePassed >= minTimeBetweenShots;
if(takeNewPicture)
{
    cvSaveImage("crop.jpg",tmp);
    cvShowImage( "crop", tmp);
    lastTime = clock();
}

//Continue do whatever you want 
```

这种方法的好处是你可以在拍摄之间做你想做的事情，并且你的程序不会因为 minTimeBetweenShots 等于而停止。使用时是这种情况：

```
Sleep(timeToSleep) 
```

除非它在一个单独的线程中。

# r - 将函数应用于多个数据帧 (R)

> ID：15791669
> 
> 赞同：0
> 
> 时间：2013-04-03T15:31:15.197
> 
> 标签：r, loops, dataframe

我有许多数据框，我想对其应用相同的功能。

上下文：我有记录主题时间窗口的数据框，指示符为 0/1，表示在该时间窗口中是否发生了事件。一个例子：

```
ID start stop event
1  0     12   0
1  12    24   0 
1  24    36   1
1  36    48   1
2  0     12   0 
```

等等我有一个函数，它在每个 id 的第一个事件之后删除每个条目，例如，在上面的例子中，ID = 1，开始时间 = 36 的记录。

一个数据集的代码是：（数据集称为 event1 ，IDT 为 ID）

```
list1 <- which(event1$event == 1)

while(length(list1) >= 1){

  id <- event1[ list1[ 1 ] , ]$IDT
  idplus1 <- event1[ ( list1[1] + 1) , ]$IDT
  b <- which( event1$IDT == id )

  if( id == idplus1 ){ 

     event1 <- event1[- ( ( list1[1] + 1 ) : b[ length(b) ] ) , ]   
   }

 list1 <- list1[-1]  

} 
```

现在，如果我有四个数据集；event1, event2, event3, event4，我想将这个函数应用于每一个，有没有办法定义一个函数来做到这一点？我觉得应该有机会在这里使用 lapply ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:50:36.730

如果您的函数被调用`myfunc`，那么将其应用于`event1`您`event4`可以使用的对象

```
lapply(paste0('event',1:4), function(x)  { eventDF <- get(x) ; myfunc(eventDF)   }) 
```

**说明**：

`paste0('event',1:4)`创建要在其上应用函数的对象名称的字符向量。

`lapply`对上述字符向量的每个元素应用内联函数。

`get(x)`返回名称等于的对象`x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:52:40.423

这是一个如何遍历多个数据帧并在所有数据帧上运行相同系列命令的示例

```
# list containing multiple data frames
x <- list( mtcars , iris )

# some function you've defined
myfun <-
    function( df ){

        # find numeric variables
        nv <- sapply( df , is.numeric )

        # return the 10th and 90th percentile of each numeric column
        sapply( df[ , nv ] , quantile , c( 0.1 , 0.9 ) )

    }

# run the function across all data frames
lapply( x , myfun ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:53:59.247

未经测试：

```
evnt.fn <- function(evnt.df)
  list1 <- which(evnt.df$event == 1)
  {while(length(list1) >= 1){
    id <- evnt.df[ list1[ 1 ] , ]$IDT
    idplus1 <- evnt.df[ ( list1[1] + 1) , ]$IDT
    b <- which( evnt.df$IDT == id )
    if( id == idplus1 ){ 
       evnt.df <- evnt.df[- ( ( list1[1] + 1 ) : b[ length(b) ] ) , ]   
     }
   list1 <- list1[-1]  
  } }

lapply(list(event1, event2, event3, event4), evnt.fn) 
```

原理是让它在一个实例上工作，然后把它包装起来：

```
fnname <- function(instance){substitute "instance" for the data object name} 
```

我通常更喜欢使用 "$" 的 "[[" 版本，但在这种情况下，我认为将它留在里面并没有太大的风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:55:55.870

以下是我将如何解决您的问题：

**创建数据集（数据框列表）**

```
dat1 <- read.table(text="ID start stop event
1  0     12   0
1  12    24   0 
1  24    36   1
1  36    48   1
2  12    24   0 
2  24    36   1
2  36    48   1
3  0     12   0", header=TRUE)

dat2 <- dat3 <- dat1
dats <- list(dat1, dat2, dat3) 
```

**将函数应用于数据框列表**

```
#Function to select up to first 1
FUN <- function(x) {
    splitx <- split(x, x$ID)
    out <- do.call(rbind, lapply(splitx, function(x) {
        inds <- c(which(x$event == 0), which(x$event == 1)[1])
        na.omit(x[inds, ])
    }))
    data.frame(out, row.names=NULL)
}

#apply it to all in list
lapply(dats, FUN) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:59:01.810

我将从清理您的示例代码开始，因为在您的示例中我无法让它在没有错误的情况下运行。每当您对某个变量的每个值（在本例中为“每个 ID”）执行某些操作时，您就会看到拆分-应用-组合问题。对于此类问题，我首选的工具是`plyr`包，但它不是唯一的。我会将您的程序重写为：

```
library("plyr")
ddply(event1, .(ID), function(DF) {
  firstevent <- which(DF$event == 1)[1]
  DF[seq(length=firstevent),]
}) 
```

这需要`event1`，按 的唯一值将其拆分`ID`，并且对于其中的每一个，仅保留第一个事件之前的记录。

这可以很容易地包装在一个函数中。

```
truncevent <- function(event1) {
  ddply(event1, .(ID), function(DF) {
    firstevent <- which(DF$event == 1)[1]
    DF[seq(length=firstevent),]
  })
} 
```

扩展`event1`：

```
event1 <- read.table(text=
"ID start stop event
1  0     12   0
1  12    24   0 
1  24    36   1
1  36    48   1
2  0     12   0
2  12    24   1
2  24    36   1", header=TRUE) 
```

我们得到

```
> truncevent(event1)
  ID start stop event
1  1     0   12     0
2  1    12   24     0
3  1    24   36     1
4  2     0   12     0
5  2    12   24     1 
```

现在我们讨论您关于迭代多个数据集的问题。一种方法是创建一个数据集名称向量，对其进行迭代，然后在其中的每一个上运行函数。

```
events <- c("event1", "event2", "event3", "event4")
lapply(events, function(event) {
  truncevent(get(event))
}) 
```

更自然的是将事件本身放入一个列表中，而不必分别跟踪每个名称。然后迭代这个列表就更简单了。

```
events <- list(event1, event2, event3, event4)
lapply(events, truncevent) 
```

这两种方法都会给你一个 data.frames 列表，它们是转换后的版本。

# java - 如何在 Jlist 中很好地列出？

> ID：15791670
> 
> 赞同：-2
> 
> 时间：2013-04-03T15:31:16.227
> 
> 标签：java, json, swing, jlist, cellrenderer

我正在制作一个旅行计划桌面应用程序。我已经到了这么远，所以它只剩下清单了。我想将 Jlist 与 defaultListModel 或其他东西一起使用。但是我如何列出所有这样的？？？

我想得到的结果是这样的：

```
line : Spårvagn 6
direction : Kortedala via Sahlgrenska
Starting Location : Brunnsparken, Göteborg
time : 17:27
date : 2013-04-03
track : E 
Destination : Svingeln, Göteborg
time : 17:56
date : 2013-04-03
track : B 
line : Spårvagn 1
direction : Östra Sjukhuset
Starting Location : Brunnsparken, Göteborg
time : 17:30
date : 2013-04-03
track : D 
Destination : Svingeln, Göteborg
time : 17:36
date : 2013-04-03
track : B 
line : Spårvagn 3
direction : Kålltorp
Starting Location : Brunnsparken, Göteborg
time : 17:35
date : 2013-04-03
track : D 
Destination : Svingeln, Göteborg
time : 17:41
date : 2013-04-03
track : B 
line : Spårvagn 6
direction : Kortedala via Sahlgrenska
Starting Location : Brunnsparken, Göteborg
time : 17:36
date : 2013-04-03
track : E 
Destination : Svingeln, Göteborg
time : 18:05
date : 2013-04-03
track : B 
line : Spårvagn 1
direction : Östra Sjukhuset
Starting Location : Brunnsparken, Göteborg
time : 17:40
date : 2013-04-03
track : D 
Destination : Svingeln, Göteborg
time : 17:46
date : 2013-04-03
track : B 
```

我的代码：

```
JSONObject destination = (JSONObject) jsonObj.get("Destination");
            String dname = (String) destination.get("name");
            String dtime = (String) destination.get("time");
            String ddate = (String) destination.get("date");
            String dtrack =(String) destination.get("track");

            //set the info about the destination
            TripService.getTrip().setDate(date);
            TripService.getTrip().setName(dname);
            TripService.getTrip().setTime(dtime);
            TripService.getTrip().setTrack(dtrack);

            //Sets line and direction for all trips
/*          
            model.addElement("line : " + line);
            model.addElement("direction : " + direction);

            //set the info about the starting location

            model.addElement("Starting Location : " + name);
            model.addElement("Time : " + time);
            model.addElement("Date : " + date);
            model.addElement("Track : " + track);
*/ 
```

但它在我的控制台中返回一个 []。如何做到这一点

所有这些都仅在我的控制台中列出，并带有此输出。但我无法将其转移到我的应用程序中。出了什么问题以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:16:45.107

问题不在于将数据添加到 ListModel。您所要做的就是创建一个包含您想要显示的所有信息的对象并将该对象添加到模型中。

问题是显示所有信息。为此，您将需要一个自定义渲染器。请参阅 Swing 教程中有关[编写自定义单元格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:38:32.413

```
DefaultListModel model = new DefaultListModel();
   JList list = new JList(model); 
```

现在使用 model.addElement() 在模型中添加数据

# typescript - 打字稿。数组中不兼容的类型。如何使用可以采用任何对象数组的方法声明对象？

> ID：15791672
> 
> 赞同：3
> 
> 时间：2013-04-03T15:31:19.647
> 
> 标签：typescript, enyo

如何使用可以采用任何对象数组的方法声明对象？

在代码中：（1）代码有一个编译错误“数组中的类型不兼容”。(2) 没有错误。我想使用（1）。

```
declare var enyo;

// (1). compile error: 'Incompatible types in array'

enyo.kind({
    name: "HelloWidget",
    components: [
        { name: "hello", content: "Hello From Enyo" },
        { kind: "Button", content: "Click Me!", ontap: "helloTap" }
    ]
});

// (2). no erros but have to write <any>

enyo.kind({
    name: "HelloWidget",
    components: [
        <any>{ name: "hello", content: "Hello From Enyo" },
        <any>{ kind: "Button", content: "Click Me!", ontap: "helloTap" }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:14:27.767

最好的解决方法是提供一些类型信息，`enyo`以便编译器可以将上下文类型应用于数组表达式：

```
interface EnyoComponent {
    name?: string;
    content?: string;
    kind?: string;
    ontap?: string;
}

declare var enyo: {
    kind(settings: {
        name: string;
        components: EnyoComponent[];
    });
};

enyo.kind({
    name: "HelloWidget",
    components: [
        { name: "hello", content: "Hello From Enyo" },
        { kind: "Button", content: "Click Me!", ontap: "helloTap" }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:52:05.740

您可以使用`any[]`在您的界面中完成此操作。

```
declare var enyo: {
    kind(settings: {
        name: string;
        components: any[];
    });
};

// The following will now compile without errors

enyo.kind({
    name: "HelloWidget",
    components: [
        { name: "hello", content: "Hello From Enyo" },
        { kind: "Button", content: "Click Me!", ontap: "helloTap" }
    ]
}); 
```

# vba - 未定义用户定义类型 - 在 Outlook 2010 中使用 VBA 将图片导入联系人

> ID：15791688
> 
> 赞同：0
> 
> 时间：2013-04-03T15:32:08.383
> 
> 标签：vba, outlook-2010

我正在尝试在 Outlook 2010 中使用一些 VBA 来为联系人列表引入图片。当我上次在 Outlook 2007 中尝试此操作时，它运行良好。但是现在，我已经升级到 Outlook 2010，它不再工作了。它在 Dim rec as ADODB.record set 行上出错，并给出编译错误：未定义用户定义的类型。

任何想法我需要更改才能使其在 Outlook 2010 中工作？

```
Public Sub UpdateContactPhoto()

Dim myOlApp As Outlook.Application
Dim myNamespace As Outlook.Namespace
Dim myContacts As Outlook.Items
Dim myItems As Outlook.Items
Dim myItem As Object
Set myOlApp = CreateObject("Outlook.Application")
Set myNamespace = myOlApp.GetNamespace("MAPI")

Set myContacts = myNamespace.Folders.Item("Mailbox - Thomas, Susan"). _
                 Folders.Item("Temp Contacts").Items

Dim fs As Object
Set fs = CreateObject("Scripting.FileSystemObject")
For Each myItem In myContacts
    If (myItem.Class = olContact) Then
        Dim myContact As Outlook.ContactItem
        Set myContact = myItem
        Dim strPhoto As String

        Dim rec As ADODB.Recordset
        Dim strSQL As String

        strSQL = "SELECT abcdefg from 123456 Where FullName = '" & myItem & "'"

        Set con = New ADODB.Connection
        con.Open = "Provider=SQLOLEDB;Data Source=ABC;Initial Catalog=XYZ;User ID=867;Password=5309;"
        Set rec = con.Execute(strSQL)

        If Not rec.EOF Then
            TheValue = rec.Fields(3).Value
            strPhoto = "\\picserver\EmployeePics\" & TheValue

            If fs.FileExists(strPhoto) Then
                myContact.AddPicture strPhoto
                myContact.Save
            End If
        End If
    Else

    End If
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:12:09.903

在代码编辑器中，您需要添加对 ADODB 库的引用。

转到**工具 -> 参考**菜单
![访问菜单](https://i.stack.imgur.com/XFrHQ.jpg)

并搜索**Microsoft ActiveX 数据对象**xx**库**- 请注意，版本号将根据您机器上加载的版本而改变

![参考](https://i.stack.imgur.com/03Gb8.jpg)

# ios - sqlite 锁定和 SQLITE_BUSY 故障排除

> ID：15791691
> 
> 赞同：1
> 
> 时间：2013-04-03T15:32:10.030
> 
> 标签：ios, sqlite

我在 iOS 中使用 sqlite，我看到我的一个查询需要很长时间才能返回（几秒钟）。我添加了一个繁忙的处理程序，我看到它正在为 SQLITE_BUSY 条件调用。但是我无法弄清楚当时数据库正在做什么。我还看到内部锁被调用，但返回 SQLITE_BUSY。

我正在使用多个线程来访问数据库，但所有其他线程操作都已返回。

如何排除故障以找出我收到 SQLITE_BUSY 的原因？

# visual-studio-2012 - 捏放大 Visual Studio 2012 IDE（代码视图）不起作用？

> ID：15791692
> 
> 赞同：3
> 
> 时间：2013-04-03T15:32:11.467
> 
> 标签：visual-studio-2012, touch, multi-touch, gestures, pinchzoom

所以我的意思只是代码查看器窗口的东西！（甚至花了 15 分钟试图弄清楚那个窗口叫什么，没有结果）不在设计者视图、模拟等中。

也许最好用一个例子来说明：当我尝试使用我的触摸屏滚动或捏合缩放以向同事展示他感兴趣的代码部分时，它只会像鼠标一样响应。（突出显示文字）

每个 Office 2013 应用程序都有 sublime 集成，但是对于 vs2012 甚至似乎没有插件来添加支持？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T17:32:46.250

除了 Windows 为遗留应用程序提供的非常基本的支持之外，Visual Studio 2012 和 Visual Studio 2013 都不支持触控。

然而，[VSCommands 扩展](http://visualstudiogallery.msdn.microsoft.com/c6d1c265-7007-405c-a68b-5606af238ece)确实使事情变得更加触摸友好——不过，这并不完全符合您的要求。

# datagrid - 获取vb6数据网格中选定字段的值

> ID：15791697
> 
> 赞同：1
> 
> 时间：2013-04-03T15:32:37.523
> 
> 标签：datagrid, vb6

我正在为我的 vb6 项目使用数据网格。我如何知道用户选择了哪条记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-08T04:39:33.050

如果主键在第 3 列，请使用

```
MyDataGrid.Columns(3).Value 
```

这将向您显示所选行的 PK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:59:12.760

的`Text`属性`DataGrid`应该是当前选择的：

```
DataGrid1.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T07:04:06.037

数据网格的 .Col 和 .Row 属性返回数据网格中的活动行和列

# r - 在 R 的光谱上绘制绘图点

> ID：15791698
> 
> 赞同：9
> 
> 时间：2013-04-03T15:32:43.360
> 
> 标签：r, colors, plot

我有一个我想在 R 中的图表上播放的点列表。为了获得 3 个级别的信息（X 轴、Y 轴和另一个），我想在图表上绘制这些点并按比例为它们着色对于第三个变量。对于要显示为第三个变量 (Z) 的每个点，我都有一个百分比值。因此，如果 A 的 Z 值为 0.95，我希望它是鲜红色，但由于 B 只有 Z = 0.65，我希望它从暗红色走向蓝色。值从 NA（我想应该是蓝色的）到 0.99（亮红色）。

样本数据：

```
1   1   0.02937715
2   1   0.05872889
3   1   0.08802983
4   1   0.11725462
5   1   0.14637799
6   1   0.17537475
7   1   0.20421981
8   1   0.23288821
9   1   0.26135518
10  1   0.28959607 
```

第三列给出 Z 值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T16:21:56.240

一些可重现的数据会有所帮助：

```
DF <- expand.grid(x=1:100, y=1:100)
DF$z <- abs(sin(DF$x/34) * cos(DF$y/22)) 
```

`x`并且`y`是从 1 到 100 的网格；`z`范围在 0 和 1 之间（函数没什么特别的，只是保持在 0 和 1 之间并且没有非常简单的结构）。

# 基础图形

```
plot(DF$x, DF$y, col=rgb((colorRamp(c("blue", "red"))(DF$z))/255), pch=19) 
```

![在此处输入图像描述](https://i.stack.imgur.com/jYZO1.png)

# ggplot2

```
library("ggplot2")
ggplot(DF, aes(x, y, colour=z)) +
  geom_point(shape=19) +
  scale_colour_gradient(low="blue", high="red") 
```

![在此处输入图像描述](https://i.stack.imgur.com/CUIyS.png)

# internet-explorer - VBScript 正在打开两个 IE 窗口，但应该只有一个

> ID：15791706
> 
> 赞同：0
> 
> 时间：2013-04-03T15:33:08.093
> 
> 标签：internet-explorer, object, vbscript

我有一个 VBScript 可以 ping 一些服务器并输出结果（此[Pastebin](http://pastebin.com/kenUXybK)中的完整代码）。脚本的一部分显示了一个带有“请稍候”消息的 IE 窗口，但由于某种原因，打开了两个 IE 窗口（并按照我希望通过下面的代码填充），但是当我`Quit`在结束时只有一个关闭脚本。

这是给我带来麻烦的功能。似乎第一行（`objExplorer.Navigate`）正在按要求打开一个窗口，但在此之前`Set objExplorer = CreateObject("InternetExplorer.Application")`也打开一个窗口。

有谁知道我怎样才能阻止这种情况发生？谢谢。

```
' Display the progress box
Set objExplorer = CreateObject("InternetExplorer.Application")

display_progress(objExplorer)
main() ' Do stuff, see Pastebin for full code
close_progress(objExplorer)
output_results() ' Show user the results, see Pastebin for full code

Private Function display_progress(objExplorer)

    objExplorer.Navigate "about:blank"
    objExplorer.ToolBar = 0
    objExplorer.StatusBar = 0
    objExplorer.Left = 600
    objExplorer.Top = 374
    objExplorer.Width = 400
    objExplorer.Height = 152
    objExplorer.Visible = 1

    Dim strText, strButton

    strText = "<div id=""text""><p>Please wait, servers are being pinged.</p><p>Results will be displayed as soon as they are ready.</p></div>"
    strButton = "<div id=""buttons""><input type=""button"" name=""submit"" value=""Cancel"" onclick=""window.open('', '_self', ''); window.close();"" /><div class=""clear""></div></div>"

    objExplorer.Document.Body.Style.Font = "11pt 'Halvetica'"
    objExplorer.Document.Body.Style.Cursor = "wait"
    objExplorer.Document.Title = "Server ping script"
    objExplorer.Document.Body.InnerHTML = strStyle & strText & strButton    

End Function

Private Function close_progress(objExplorer)

    objExplorer.Document.Body.Style.Cursor = "default"
    objExplorer.Quit

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:45:12.723

为什么你的`force_cScript`函数在 sub 内部被`For..Next`调用`Main`？如果脚本没有开始，这个函数只是重新启动脚本，但在开始时和创建 IE 对象**之前**`CScript.exe`只调用一次就足够了。

 **```
Call force_cScript()
Set objExplorer = CreateObject("InternetExplorer.Application")
'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:26:32.193

大卫，您能否在代码中的“wscript.quit”（第 14 行）之前包含以下语句并查看？

```
Set objexplorer = nothing 
```

我还看到在您的函数“force_cscript”中，您使用了一个对象 objshell，然后使用了“wscript.quit”。如果您创建一个对象，请注意在退出脚本之前将其设置为空值或空值。因此，在函数“force_cscript”中，在“wscript.quit”之前包含以下语句。

```
Set objshell = nothing 
```

如果您不这样做，该对象将继续在后台运行。每次运行脚本时，您的计算机都会变得更慢 n 更慢，因为您的对象仍将在后台处于活动状态。**

# javascript - Javascript - 简化代码

> ID：15791709
> 
> 赞同：1
> 
> 时间：2013-04-03T15:33:23.483
> 
> 标签：javascript

我创建了一个网站的粗略版本，它将提取和显示数百个 pdf。一旦用户单击它，我希望能够为每个 pdf 添加书签。我能想到的唯一方法是：

```
<script>
    $(document).ready(function(){
      $(".pdf1").click(function(){
        if ($('#bookmark1').is(':visible')) {
                $("#bookmark1").css("display", "none");
            } else {
                $("#bookmark1").css("display", "inline");
            }                       
      });

      $(".pdf2").click(function(){
        if ($('#bookmark2').is(':visible')) {
                $("#bookmark2").css("display", "none");
            } else {
                $("#bookmark2").css("display", "inline");
            }
      });

      $(".pdf3").click(function(){
        if ($('#bookmark3').is(':visible')) {
                $("#bookmark3").css("display", "none");
            } else {
                $("#bookmark3").css("display", "inline");
            }
      });

      $(".pdf4").click(function(){
        if ($('#bookmark4').is(':visible')) {
                $("#bookmark4").css("display", "none");
            } else {
                $("#bookmark4").css("display", "inline");
            }
      });
    });
</script> 
```

这不是最好的，因为我不想为上面的代码创建一百多个版本，每个版本都有不同的 id。

有什么办法可以更改代码，这样我就不必重复这么多次了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:38:55.860

将类更改为 simple `pdf`（或其他任何对所有元素都相同的），然后使用 HTML5`data-*`属性将每个特定的属性链接到书签元素：

```
<a href="#" class="pdf" data-bookmark="bookmark1">Click me</a>
<div id="bookmark1">Some content</div> 
```

然后是 jQuery：

```
$(document).ready(function() {
    $('.pdf').click(function(e) {
        var bookmarkId = $(this).attr('data-bookmark');
        var bookmark = $('#' + bookmarkId);
        if(bookmark.is(':visible')) {
            bookmark.css('display', 'none');
        }
        else {
            bookmark.css('display', 'inline');
        }
    });
}); 
```

或者，由于您有数百个元素，单个委托事件处理程序可能是更好的选择：

```
$(document).on('click', '.pdf', function(e) {
    var bookmarkId = $(this).attr('data-bookmark');
    var bookmark = $('#' + bookmarkId);
    if(bookmark.is(':visible')) {
        bookmark.css('display', 'none');
    }
    else {
        bookmark.css('display', 'inline');
    }
}); 
```

理想情况下，您应该选择一个包含所有`.pdf`元素并在 DOM 中尽可能靠近它们的元素，而不是使用`document`. 如果你想要别的东西，`document`你还需要将它包装在一个 DOM 就绪 ( `$(document).ready()`) 处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:38.537

通过带有 jquery 的类循环它们，然后通过 $(this) 对象获取 id，如下所示：

```
$( ".pdf" ).each(function() {
    alert(this.id); // will contain the id of each pdf
}); 
```

然后，您可以使用这些 id 来制作个人 pdf。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T15:38:52.523

```
for (var i = 1 ; i < 5 ; ++i) {
    $(".pdf" + i).click(function(){
        var id = $(this).attr("class");
        id = "#bookmark" + id.substring(3);
        if ($(id).is(':visible')) {
                $(id).css("display", "none");
            } else {
                $(id).css("display", "inline");
            }                       
    });
} 
```

请参阅基于@AnthonyGrist 的小提琴的[这个小提琴：](http://jsfiddle.net/SjNRc/3/)

# jquery - AngularJS 和 jQuery Mobile 范围滑块不会更新模型

> ID：15791712
> 
> 赞同：0
> 
> 时间：2013-04-03T15:33:26.407
> 
> 标签：jquery, mobile, angularjs, slider, range

这是我的 AngularJS jQueryMobile 页面：

```
<div data-role="page" id="page1">
    <div data-role="header"><h1>Chart</h1></div>
    <div data-role="content">
        <div id="plotChart" class="myChart"></div>
        <form>
            <input type="range" value="0" min="-10" max="10" ng-init="0" ng-model="value1" ng-change="update()"/>
            <input type="range" value="0" min="-10" max="10" ng-init="0" ng-model="value2" ng-change="update()"/>
            <input type="range" value="0" min="-10" max="10" ng-init="0" ng-model="value3" ng-change="update()"/>
        </form>
        <div class="ui-grid-b">
            <div class="ui-block-a"><div class="ui-bar ui-bar-e" style="height:60px">Value1: {{value1}}</div></div>
            <div class="ui-block-b"><div class="ui-bar ui-bar-e" style="height:60px">Value2: {{value2}}</div></div>
            <div class="ui-block-c"><div class="ui-bar ui-bar-e" style="height:60px">Value3: {{value3}}</div></div>
        </div>
    </div>
</div> 
```

我的更新功能如下所示：

```
function MyCtrl($scope){
    $scope.update = function(){
        console.log("C=" + $scope.value3 + "B="+$scope.value2 + "A="+$scope.value1);
    }
} 
```

移动滑块时页面上的 {{value1-3}} 正确更新 移动滑块时更新函数保持记录为零。

为什么？这里涉及不同的范围吗？

（滑块也有 -10 作为初始值 - 不是定义的 -10）jquery-1.9

*   jquery-1.9.1.min.js
*   jquery.mobile-1.3.0.min.js
*   jquery-mobile-angular-adapter-1.3.1.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:56:26.837

`ng-init=0`不会设置任何范围属性。 [ng-init](http://docs.angularjs.org/api/ng.directive%3angInit)需要一个 Angular 表达式，该表达式是针对范围进行评估的。您可以编写`ng-init='value1 = 0'`，但最好在控制器中初始化模型值：

```
$scope.value1 = 0; 
```

`value = 0`不应与 Angular 表单元素一起使用（除了`type=radio`）。

这是一个仅包含 Angular 的[最小小提琴](http://jsfiddle.net/mrajcok/nBd86/)，仅显示我在上面谈到的更改。

# php - 三路（模型）关系

> ID：15791715
> 
> 赞同：4
> 
> 时间：2013-04-03T15:33:41.200
> 
> 标签：php, foreign-keys, relationship, laravel, eloquent

我有以下[架构和模型](http://paste.laravel.com/mwT)设置，以及这个[种子数据](http://paste.laravel.com/mDi)。

我的目标是实现三向关系，这可能是一个错误的术语，但最后，这就是我所说的。

三通如：

*   支票附有代币
*   附加令牌具有附加值，这些值知道支票->令牌附件。

`Token`问题在于 from to的关系`Value`，当我加载时`Values`，他们没有考虑关联`Cheque`，因此返回属于 a 的所有值`Token`。

我不知道`Value`Schema对于这种三向关系是否正确，因此我也怀疑`Value`模型关系属于`Cheque`并且`Token`正确。

这就是我当前请求模型的方式（摘自设置）：

```
Route::get('test', function()
{
    $cheque = Cheq_Node::with(array('tokens' => function($query) {
        $query->where_sortable(1);
    }, 'tokens.values'))->first();

    dd( $cheques );
}); 
```

* * *

我尝试将`Token`值参考更改为：

```
public function values()
{
    return $this->has_many('Cheq_Value', 'token_id')->where_node_id($this->pivot->id);
} 
```

但这产生了我：

```
Trying to get property of non-object 
```

在返回之前添加一个`Log::dump( dump($this) )`，显示没有加载模型，只是一个空的 Eloquent 模型：

```
object(Cheq_Token)[63]
  public 'attributes' => 
    array (size=0)
      empty
  public 'original' => 
    array (size=0)
      empty
  public 'relationships' => 
    array (size=0)
      empty
  public 'exists' => boolean false
  public 'includes' => 
    array (size=1)
      'values' => null 
```

难怪那里会产生错误。

我如何使这种三向关系发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:53:33.477

我认为您需要使用适当的外键来查看您的数据库架构，以便检索正确的数据。假设你会得到你想要的结果，并不总是最好的方法。

在您的数据库中使用连接将起到作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:58:35.340

我最终选择了不同的[Schema](http://paste.laravel.com/mOg)和不同的[Models](http://paste.laravel.com/mOj)。

这也需要采用不同的插入路径，从而产生以下[测试种子](http://paste.laravel.com/mOl)。

通过以下方式检索所有内容：

```
$nodes = Node::with(array('tokenlinks', 'tokenlinks.token', 'tokenlinks.values'))->get(); 
```

# ios - UITableView - 获取现有的 viewForHeaderInHeaders

> ID：15791718
> 
> 赞同：0
> 
> 时间：2013-04-03T15:33:42.517
> 
> 标签：ios, uitableview

我想在 UITableView 中获取现有的标题视图，以便我可以更新它们的外观。我一直无法找到类似于 visibleCells 的方法来返回标题视图而不是单元格。这可能吗，还是我应该在创建过程中存储这些视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:47:57.330

您应该将它们存储在 NSMutableArray 中。这是一些示例代码：

```
@interface ViewController : UITableViewController (UITableViewDataSource, UITableViewDelegate)
@property (nonatomic, strong) NSMutableArray *sectionHeaderViews;
@end

@implementation ViewController

- (void)viewDidLoad {
  self.sectionHeaderViews = [NSMutableArray array];
  NSInteger numOfSections = [self numberOfSectionsInTableView:self.tableView];
  for(int i=0; i<numOfSections)
  {
     CustomHeaderView *headerView = [[CustomHeaderView alloc] init];

     // customize headerView here
     ...

     [self.sectionHeaderViews addObject:headerView];
  }
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
  return [self.sectionHeaderViews objectAtIndex:section];
}

- (void)updateViewForSection:(NSInteger)section {
  CustomHeaderView *headerView = [self.sectionHeaderViews objectAtIndex:section];

  // update headerView here
  ...

  // reload section
  [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation: UITableViewRowAnimationAutomatic];
}

@end 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:38:34.353

```
[tableView headerViewForSection:sectionNum]; 
```

# python - Python - 类型错误

> ID：15791723
> 
> 赞同：1
> 
> 时间：2013-04-03T15:34:06.090
> 
> 标签：python

```
abir=float(15.67)
aiki=float(17.23) 
auc=float(0.75)
adort=float(93.2)
abes=float
be=float
an=float
kn=float
kontrol=1
x=float
def giris():
        print("Yari-Deneysel Kutle Formulunden Yararlanarak Baglanma Enerjisini Bulmak Icin :")       
        an=input("Atom Numarasini Giriniz  : ")
        global kn
        global x
        kn=an
        x=an*3
        print(an,kn,x)
        a=float(abir*kn)
        b=float(aiki*(kn**(2.0/3.0)))
        c=float(auc*(an**2)/(kn**(1.0/3.0)))
        d=float(adort*((kn-(2*an))**2)/kn)
        e=float(abes/(kn**(0.5)))
        be=a-b-c-d+e
        nb=float(be/kn)
        print("Atom Numarasi :",kn)
        print("Kutle Numarasi :",an)
        print("Toplam Baglanma Enerjisi : ",be," MeV'dir.")
        print("Nukleon Basi Baglanma Enerjisi : ",nb," MeV'dir.")
        print(kn)
        kn+=1
def nokontrol():
        if kn>0:
                if an>0:
                        if kn%2==0:
                                if an%2==0:
                                        abes=12
                                        formul()
                                        kontrol=0
                                else:
                                        abes=0
                                        formul()
                                        kontrol=0
                        else:
                                if an%2==0:
                                        abes=0
                                        formul()
                                        kontrol=0
                                else:
                                        abes=-12
                                        formul()
                                        kontrol=0
                elif an<0:
                        print("Atom Numarasi Sifirdan Kucuk Olamaz.")
                else:
                        print("Atom Numarasi Sifir Olamaz.")
        elif kn<0:
                print("Kutle Numarasi Sifirdan Kucuk Olamaz.")
        elif kn==0 and an==0:
                print("Kutle Numarasi ve Atom Numarasi Sifir Olamaz.")
while kontrol==1:        
        giris()
        while an==x:
                nokontrol() 
```

这是错误：

```
Traceback (most recent call last):
    a=float(abir*kn)
TypeError: can't multiply sequence by non-int of type 'float' 
```

结果：Yari-Deneysel Kutle 公式 Yararlanarak Baglanma Enerjisini Bulmak Icin ; Atom Numarasini Giriniz : 28 28 28 282828

```
28 * 3 = 282828 ??? correct : 28 * 3 = 84? 
```

请帮帮我，我刚开始用 Python 学习物理。如果您纠正我的错误，我将不胜感激。代码在 python 3.3 中。参数为原子序数`an`、质量数`kn`。`"an==3*kn"`将继续增加，直到为 1 kn。它扩展到所有“formul()”实现结果的打印。浮点类型错误。d 的孤独。我无法修复这个错误是一个 kin 我能做什么？我的英语不好，对不起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:42:20.037

在第五行`giris`

```
kn=an 
```

你设置`kn`为字符串，这是序列，python 抱怨。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:42:35.093

您将几个变量（`abes`、`be`、`an`、`kn`和`x`）分配给 function `float`，而不是实际的浮点值。然后，当您尝试将此乘以其他任何值时，您会得到 a，`TypeError`因为您无法将`type`对象相乘。如果要在函数外部初始化这些值，只需将它们设置为`0`or `None`。

当然，您的*具体*问题是，您`kn=an`在分配给呼叫`an`中的字符串后重新分配。`input`这就是 Python 抱怨“序列”的原因。但就像我说的，你有比这更大的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:37:56.720

以下内容不符合您的预期：

```
abes=float
be=float
an=float
kn=float 
```

如果您只是想将它们初始化为零，请编写

```
abes=0.0 
```

ETC

此外，该

```
abir=float(15.67) 
```

可以写成

```
abir=15.67 
```

等`float()`电话是多余的。

这同样适用于

```
a=float(abir*kn) 
```

等等

最后，在代码中的某个地方你没有显示你正在`abir`变成一个序列（例如一个列表或一个元组）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:47:17.687

老实说，我不知道你想在那里做什么......

第一步：在修复它的路上（以及您的 Python 经验）：删除所有那些“浮点数”，那里...... Python 是动态类型的，无需声明类型。

如果你写了类似'i=float'的东西，你不会声明i的类型为float，但是你将值'float'（它是一种类型）分配给名称'i'。如果你跟进 5*i，你的程序本质上意味着“5 次类型浮点”，这没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T15:43:20.660

如果你得到 28*3 = 282828，那么实际上 28 是一个字符串。“28”*3 是“282828”。您可以将字符串更改为 int with`int('28')`或 float with`float('28')`

通过查看您的代码，我认为这正在发生

```
an=input("Atom Numarasini Giriniz  : ") 
```

尝试将其更改为

```
an=int(input("Atom Numarasini Giriniz  : ")) 
```

# oracle - Oracle Designer 9i - 导出 ERD 的布局信息

> ID：15791727
> 
> 赞同：0
> 
> 时间：2013-04-03T15:34:19.517
> 
> 标签：oracle, migration, data-modeling, designer, erd

我们有一个包含数百个具有特定布局的实体关系图的存储库，我们必须将它们迁移到 Oracle Data Modeler，**包括**布局信息。

实际上，由于缺少包括布局信息在内的自动导入功能，我们必须手动重绘所有图表。

是否可以在 Oracle Designer 9i 中导出实体关系图的布局信息（通过数据库访问或 XML 导出...）？

在此先感谢，多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:58:08.363

Oracle 数据建模器提供了从 Oracle 设计器导入 ERD 的工具。请澄清您在“具有特定布局的实体关系图”中使用的术语“特定布局”

# delphi - Firemonkey 按钮填充样式

> ID：15791728
> 
> 赞同：1
> 
> 时间：2013-04-03T15:34:27.370
> 
> 标签：delphi, firemonkey, delphi-xe3

我正在使用 Delphi XE3 并掌握 Styles 的窍门。我想改变按钮的颜色。我可以更改文本颜色，但在样式检查器中找不到“填充”属性，可能是因为没有 TRectangle，按钮只有 TSubimage 和 TRectAnimation，我能找到的所有帮助都是指 TRectangle。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:42:06.013

在 XE3 中，内置系统样式（Win7、WIN8、Mac、MacHD）使用位图作为样式，而不是从基元构建样式。该样式包含一个 png 图像，该图像分为每个控件的部分以及这些控件的各种状态。TSubImage 用于选择图像的适当部分。这可能有子 TRectAnimations 来更改不同状态的选定区域。

修改这种样式的最佳方法可能是保存内置图像（参见[http://delphihaven.wordpress.com/2012/09/11/inspecting-the-default-platform-fmx-styles-in-xe3/](http://delphihaven.wordpress.com/2012/09/11/inspecting-the-default-platform-fmx-styles-in-xe3/) )，修改它，将其添加到您的自定义样式簿中，并将您的自定义样式的 SubImage 指向它。

但是请记住，您需要为您使用的所有平台复制上述内容，以便样式匹配并在运行时加载适当的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:34:10.340

“buttonstyle”和“Cornerbuttonstyle”都有一个“背景”，它是一个 TRectangle 并且有一个 fill 属性。

我昨天刚遇到一个类似的问题，试图在运行时更改按钮颜色。在我的情况下，当 Kind 设置为渐变时，我尝试更改颜色属性。我需要更改渐变颜色或将 Kind 更改为 bkSolid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-24T12:16:27.677

我使用的是东京，我使用的是水石墨风格，但我还想将蓝色填充更改为另一种颜色。经过一些研究和摆弄，马丁的评论很有帮助，我能够用样式书改变按钮颜色。

1.  右键单击按钮，编辑自定义样式。
2.  找到按钮样式并展开。在我的场景中，样式如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/8l0RE.png)](https://i.stack.imgur.com/8l0RE.png)

对于我的背景矩形下的第一个选定矩形，当我将种类更改为无以外的其他内容时，您就可以随心所欲地使用它。用 Solid 给它一个纯色填充，或者通过将种类更改为 Gradient 给它一个渐变填充。

# c# - 具有单元格边框的 OpenXML SDK

> ID：15791732
> 
> 赞同：14
> 
> 时间：2013-04-03T15:34:31.993
> 
> 标签：c#, openxml-sdk

我有以下代码在 OpenXML SDK 中为该单元格添加一个包含值和数据类型的单元格：

```
Cell cell = InsertCellInWorksheet(column, row, worksheetPart);              
cell.CellValue = new CellValue(index.ToString());
cell.DataType = new EnumValue<CellValues>(CellValues.SharedString); 
```

对于此单元格，如何在每一侧添加边框？我也喜欢在单元格上添加背景颜色。

我有以下但不确定如何将边框添加到单元格：

```
Borders borders1 = new Borders() { Count = (UInt32Value)1U };

Border border1 = new Border();
LeftBorder leftBorder1 = new LeftBorder();
RightBorder rightBorder1 = new RightBorder();
TopBorder topBorder1 = new TopBorder();
BottomBorder bottomBorder1 = new BottomBorder();

border1.Append(leftBorder1);
border1.Append(rightBorder1);
border1.Append(topBorder1);
border1.Append(bottomBorder1);

borders1.Append(border1); 
```

提前致谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T12:58:28.193

我建议安装[Open XML 2.0 生产力工具](http://www.microsoft.com/en-us/download/details.aspx?id=5124)。然后创建一个包含所需边框和颜色的空白 Excel 文档。在生产力工具中打开该文件，然后单击反映代码。然后它将为您提供生成该边框和背景颜色所需的 C# 代码。该代码对于发布来说有点冗长，但如果您按照这些步骤进行操作，您应该能够使用它。

## **编辑**

边框和填充属性存储在一个单独的部分中，称为`WookbookStylesPart`. 在此部分，您将插入要应用于工作簿中单元格的边框、填充、字体等类型。这些属性存储在数组类型结构中，您可以在其中访问通过索引插入的样式。由于您可以将多种样式应用于单元格，`CellFormat`因此对象是存储各种样式的所有索引的地方。一旦你有`CellFormat`一个单元格，它的索引需要通过`StlyeIndex`属性在实际单元格上引用。这就是单元格如何知道如何将各种样式应用于自身的方式。

下面是创建边框的代码：

```
public Border GenerateBorder()
{ 
    Border border2 = new Border();

    LeftBorder leftBorder2 = new LeftBorder(){ Style = BorderStyleValues.Thin };
    Color color1 = new Color(){ Indexed = (UInt32Value)64U };

    leftBorder2.Append(color1);

    RightBorder rightBorder2 = new RightBorder(){ Style = BorderStyleValues.Thin };
    Color color2 = new Color(){ Indexed = (UInt32Value)64U };

    rightBorder2.Append(color2);

    TopBorder topBorder2 = new TopBorder(){ Style = BorderStyleValues.Thin };
    Color color3 = new Color(){ Indexed = (UInt32Value)64U };

    topBorder2.Append(color3);

    BottomBorder bottomBorder2 = new BottomBorder(){ Style = BorderStyleValues.Thin };
    Color color4 = new Color(){ Indexed = (UInt32Value)64U };

    bottomBorder2.Append(color4);
    DiagonalBorder diagonalBorder2 = new DiagonalBorder();

    border2.Append(leftBorder2);
    border2.Append(rightBorder2);
    border2.Append(topBorder2);
    border2.Append(bottomBorder2);
    border2.Append(diagonalBorder2);

    return borders2;
} 
```

这是添加填充的代码：

```
public Fill GenerateFill()
{
    Fill fill = new Fill();

    PatternFill patternFill = new PatternFill(){ PatternType = PatternValues.Solid };
    ForegroundColor foregroundColor1 = new ForegroundColor(){ Rgb = "FFFFFF00" };
    BackgroundColor backgroundColor1 = new BackgroundColor(){ Indexed = (UInt32Value)64U };

    patternFill.Append(foregroundColor1);
    patternFill.Append(backgroundColor1);

    fill.Append(patternFill);

    return fill;
} 
```

您将需要此代码来插入边框并填充到样式部分：

```
public uint InsertBorder(WorkbookPart workbookPart, Border border)
{
    Borders borders = workbookPart.WorkbookStylesPart.Stylesheet.Elements<Borders>().First();
    borders.Append(border);
    return (uint)borders.Count++;
}

public uint InsertFill(WorkbookPart workbookPart, Fill fill)
{
    Fills fills = workbookPart.WorkbookStylesPart.Stylesheet.Elements<Fills>().First();
    fills.Append(fill);
    return (uint)fills.Count++;
} 
```

您需要首先获取对要添加填充和边框的单元格的引用，以“B2”的形式添加到 cellAddress 所在的位置：

```
public Cell GetCell(WorksheetPart workSheetPart, string cellAddress)
{
    return workSheetPart.Worksheet.Descendants<Cell>()
                                .SingleOrDefault(c => cellAddress.Equals(c.CellReference));
} 
```

然后，一旦您获得了您的单元格，您需要获取`CellFormat`属于该单元格的单元格并添加一个新的`CellFormat`：

```
public CellFormat GetCellFormat(WorkbookPart workbookPart, uint styleIndex)
{
    return workbookPart.WorkbookStylesPart.Stylesheet.Elements<CellFormats>().First().Elements<CellFormat>().ElementAt((int)styleIndex);
}

public uint InsertCellFormat(WorkbookPart workbookPart, CellFormat cellFormat)
{
    CellFormats cellFormats = workbookPart.WorkbookStylesPart.Stylesheet.Elements<CellFormats>().First();
    cellFormats.Append(cellFormat);
    return (uint)cellFormats.Count++;
} 
```

一旦你有了，`CellFormat`你现在可以改变填充和边框属性。一旦更改了这些，您需要插入新的`CellFormat`，然后将其索引指向`CellFormat`单元`StyleIndex`格上的。这就是单元格如何知道应用到自己的样式的方式。

```
 public void SetBorderAndFill(WorkbookPart workbookPart, WorksheetPart workSheetPart)
 {
      Cell cell = GetCell(workSheetPart, "B2");

      CellFormat cellFormat = cell.StyleIndex != null ? GetCellFormat(workbookPart, cell.StyleIndex).CloneNode(true) as CellFormat : new CellFormat();
      cellFormat.FillId = InsertFill(workbookPart, GenerateFill());
      cellFormat.BorderId = InsertBorder(workbookPart, GenerateBorder());    

      cell.StyleIndex = InsertCellFormat(workbookPart, cellFormat);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:42:45.077

**SpreadsheetDocument**结构为**WorkbookParts**的集合。其中之一是**WorkbookStylesPart**，包含文档中使用的所有样式。**WorkbookPart**包含您的**Worksheets**。要将样式应用于单元格或单元格区域，您需要将**StyleIndex**属性设置为 WorkbookStylesPart 中的相应样式。

这个答案应该可以帮助您入门： [https ://stackoverflow.com/a/11118442/741326](https://stackoverflow.com/a/11118442/741326)

# java - 使用 Eclipse IDE 编辑 .settings/org.eclipse.wst.common.component

> ID：15791740
> 
> 赞同：3
> 
> 时间：2013-04-03T15:34:56.583
> 
> 标签：java, eclipse

我使用 Eclipse Java EE IDE (Helios SR2) 从旧项目中克隆了一个新项目。
重命名上下文、组件、文件夹、文件名等后...我仍然有以下文件**`.settings/org.eclipse.wst.common.component`**保留旧项目名称：**OLDPROJECT**

```
<wb-module deploy-name="OLDPROJECT"> 
```

和

```
<property name="java-output-path" value="/OLDPROJECT/build/classes"/> 
```

我试图在 Project -> Properties 中寻找它，但失败了。那么，您能告诉我如何使用 Eclipse IDE 编辑文件吗？

**`.settings/org.eclipse.wst.common.component`**

```
 <wb-module deploy-name="OLDPROJECT">

        <wb-resource deploy-path="/" source-path="/WebContent" tag="defaultRootSource"/>

        <wb-resource deploy-path="/WEB-INF/classes" source-path="/src"/>

        <property name="java-output-path" value="/OLDPROJECT/build/classes"/>
        <property name="context-root" value="NEWPROJECT"/>
    </wb-module>

</project-modules> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-13T12:02:40.283

这在[https://stackoverflow.com/a/24890409中得到了回答](https://stackoverflow.com/a/24890409)

右键单击 EAR 项目 > 属性 > 部署程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-10T20:48:38.177

该文件使用属性对话框“部署程序集”进行编辑：[https ://eclipse.org/webtools/releases/3.2.0/NewAndNoteworthy/javaee.php](https://eclipse.org/webtools/releases/3.2.0/NewAndNoteworthy/javaee.php)

如果该对话框未显示在项目属性中，请将 org.eclipse.wst.common.modulecore.ModuleCoreNature 添加到您的 .project 文件中：

[Eclipse 部署程序集未出现在属性中](https://stackoverflow.com/questions/8399885/eclipse-deployment-assembly-does-not-appear-in-properties)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:10:19.333

看起来没有办法从项目属性中编辑此属性。当您重命名项目时，它会正确更新。您将需要直接更新配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-07T14:35:14.617

`containing text`Ctrl-H，文件搜索选项卡，在字段中输入“部署名称” 。点击进入。

然后`org.eclipse.wst.common.component`就会有结果。双击并编辑它。

# app-store-connect - iTunes Connect 中的单元

> ID：15791757
> 
> 赞同：0
> 
> 时间：2013-04-03T15:35:44.547
> 
> 标签：app-store-connect

我正在尝试研究“单位”和“总计”之间的区别，同时在 Itunes Connect 中跟踪我的销售额。它们有什么不同，它们是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T02:14:06.313

## 全部的

是您在该类别（免费、付费、iAP、更新）中销售了多少应用程序。时期。没有更简单的了。

## 单位

是您在指定时间段内销售的应用程序数量与上一个时间段的*差异。*

例如，如果我将时间范围设置为一周，Total 将显示 1,567，这是我在一周内销售的该类别中的应用程序的绝对数量。另一方面，单位将显示我在过去 7 天内售出的应用程序数量减去前一周售出的数量。因此，如果在过去的 7 天里我卖出了 1,567 个应用程序，并且在这之前的 7 天里我卖出了 1,500 个应用程序，那么 Units 将显示 +67。

# gwt - 在启用 https 的情况下运行 gwt？

> ID：15791758
> 
> 赞同：1
> 
> 时间：2013-04-03T15:35:56.443
> 
> 标签：gwt, ssl

我目前正在运行一个没有安全性的 GWT 站点，但需要切换到 HTTPS。

工作的非安全版本使用以下参数运行：

```
-port 8888 -startupUrl ui/index.jsp com.example.EntryPoint 
```

我已经读过，简单地添加 -server :ssl 将导致该站点在启用 HTTPS 的情况下提供服务：

```
-port 8888 -startupUrl ui/index.jsp -server :ssl com.example.EntryPoint 
```

但是，有了这个，我就得到了

```
[ERROR] Unable to load server class ''
[ERROR] java.lang.ClassNotFoundException: 
[ERROR]     at java.lang.Class.forName0(Native Method)
[ERROR]     at java.lang.Class.forName(Class.java:249)
[ERROR]     at com.google.gwt.dev.DevMode$ArgHandlerServer.setString(DevMode.java:108)
[ERROR]     at com.google.gwt.util.tools.ArgHandlerString.handle(ArgHandlerString.java:26)
[ERROR]     at com.google.gwt.util.tools.ToolBase.processArgs(ToolBase.java:225)
[ERROR]     at com.google.gwt.dev.ArgProcessorBase.processArgs(ArgProcessorBase.java:29)
[ERROR]     at com.google.gwt.dev.DevMode.main(DevMode.java:281)
[ERROR] Google Web Toolkit 2.1.0 
```

我不确定我是否做错了什么，或者该方法是否不再有效？是否有人成功运行此命令或使用 SSL 的 gwt？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:49:46.527

假设您尝试使用嵌入式码头服务器，则在[r9628](http://gwt-code-reviews.appspot.com/1324801)中添加了 SSL 支持。您正在使用 GWT 2.1，因此要么尝试更新到更新的版本（至少 GWT 2.3），要么为您的应用程序使用外部 SSL 预配置服务器（选项`-noserver`）。

# postgresql - 如何在 Flask-SQLAlchemy 中执行多个“order_by”？

> ID：15791760
> 
> 赞同：67
> 
> 时间：2013-04-03T15:35:57.990
> 
> 标签：postgresql, sqlalchemy, flask, flask-sqlalchemy

假设我有一个`User`带有字段`popularity`和`date_created`. 我想做以下查询：

```
SELECT * FROM user ORDER BY popularity DESC, date_created DESC LIMIT 10 
```

在 SQLAlchemy 中，对于一个这样的工作：

```
User.query.order_by(User.popularity.desc()).limit(10).all() 
```

我应该添加另一个`order_by()`吗？或者把两者都`popularity`放在`date_created`我的电流中`order_by()`？

我想`popularity`优先`date_created`订购。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-03T15:56:42.583

这应该工作

```
User.query.order_by(User.popularity.desc(), User.date_created.desc()).limit(10).all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-04T09:00:13.810

你还可以做什么：

```
from sqlalchemy import and_, or_
User.query.order_by(and_(User.popularity.desc(), User.date_created.desc())).all() 
```

注意：`and_`and`or_`来自 sqlalchemy 库，而不是来自 flask_sqlalchemy 库。sqlalchemy 是 flask_sqlalchemy 的依赖项，所以你应该很好。

LTS：您可以将 sqlalchemy 库与 flask_alchemy 库混合使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-04T01:33:54.907

你也可以`sqlalchemy.sql.text`这样使用：

```
from sqlalchemy.sql import text

User.query.order_by(text("popularity desc, date_created desc")).limit(10).all() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-25T14:51:35.360

我还有一个例子：

```
user = User.query.order_by(User.id.desc()).limit(10).all()

s.t 
```

用户是我的班级 db.Modle

# php - WordPress 图像调整大小会降低图像质量

> ID：15791764
> 
> 赞同：1
> 
> 时间：2013-04-03T15:36:23.630
> 
> 标签：php, html, image, wordpress

我正在运行一个 WordPress 3.4 版的 WordPress 站点（因此使用了现在已弃用的“image_resize”功能），我发现 WordPress 的图像大小调整能力在质量方面非常缺乏。网上似乎没有关于这个问题的任何内容（如果我错了，请纠正我）。

我的客户端上传的图像可能很大，所以我想使用带有缓存技术的图像调整功能，这样访问者下载需要更小的图像就不会花费很长时间。但是当我使用图像调整大小时，我发现质量显着降低，即使 $jpeg_quality 参数设置为 100。

以下是质量差异的示例：

![图像质量示例](https://i.stack.imgur.com/1rNQa.png)

除了 StackOverflow 可能由于其处理图像而增加的模糊性之外，主要区别在于颜色活力。左边的图片是上传到 WordPress 网站的原始图片，其原生宽度约为 800 像素。它已在 HTML 中手动调整为 200 像素宽。右边的图像是通过 WordPress 的大小调整方法以 100% jpeg 质量将大小调整为 200 像素的图像，使用以下代码：

```
image_resize( "/path/to/image", 200, 0, false, null, null, 100 ); 
```

谁能解释为什么这看起来如此糟糕，以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:31:46.950

根据我们迄今为止的讨论，我会说您遇到的效果与[之前的问题](https://stackoverflow.com/questions/5773032/how-to-stop-gd2-from-washing-away-the-colors-upon-resizing-images)中提到的类似，但我不知道您的 WordPress 3.4 安装是否会在下面使用 GD。

基本上，正在发生的事情是您的图像具有嵌入的 Adob​​e RGB 颜色配置文件，这（可以说，我想）对他们来说是一件完全合理的事情，即使他们正在上网。您可能要记住，如果在不尊重这种颜色管理的浏览器中查看图像，您可能会[看到一些令人惊讶的结果](http://www.petapixel.com/2012/06/25/is-your-browser-color-managed/)，而且通常似乎建议仍然是在网络上更喜欢 sRGB .

我猜你的 WordPress 3.4 安装使用的调整大小过程不尊重颜色配置文件——事实上，可能忽略了它——这就是为什么在调整大小期间颜色被破坏的原因。实际上，它输出的图像仍应位于 Adob​​e RGB 空间中，但丢弃了颜色配置文件，因此图像在 sRGB 中重新解释，这使事情看起来很柔和。

有两种选择，我想说：

*   研究某种尊重图像颜色配置文件的大小调整过程（如前面的问题中所讨论的，升级 GD 库，如果这是正在使用的，或者切换到基于 ImageMagick 的解决方案，比如说。）我没有试过了，但如果你可以在你的服务器上安装 ImageMagick，看起来[这个 WordPress 插件](http://wordpress.org/extend/plugins/imagemagick-engine/)将允许你使用它来相当轻松地调整图像大小。它特别提到在调整大小时尊重颜色配置文件。

*   看看在 sRGB 颜色空间中导出图像是否可以解决调整大小的问题。这可能是最简单的解决方案，如果我认为正在发生的事情就是实际发生的事情，它可能会起作用。尽管图像经过调整大小后可能最终没有嵌入的颜色配置文件，但几乎所有看到它们的东西都会假设它们是 sRGB。

# jquery - 如何将 jQuery each() 隔离到起始元素的父容器的子容器

> ID：15791768
> 
> 赞同：0
> 
> 时间：2013-04-03T15:36:32.937
> 
> 标签：jquery, each

在下面的脚本中，我需要更改 jQuery each()，以便它不使用泛型类，而是从目标元素 #customfield_11071 开始，然后向上爬到最近的“活动窗格”父元素 (.active- pane#tab-5) 并仅将带有 class="text.long-field" 的子元素输入传递给每个？

我认为通过将#tab-5 直接传递给每个它会做到这一点，但是它会拾取与 tab-5 父容器外部的类匹配的文本输入字段并将它们添加到总数中，从而导致计算错误。

```
jQuery(document).ready(function(){

        //iterate through each textboxes and add keyup
        //handler to trigger sum event
        jQuery("#tab-5 input.text.long-field").each(function() {

            jQuery(this).keyup(function(){
                calculateSum();
            });
        });

    });

    function calculateSum() {

        var sum = 0;
        //iterate through each textboxes and add the values
        jQuery("#tab-5 input.text.long-field").each(function() {

            //add only if the value is number
            if(!isNaN(this.value) && this.value.length!=0 && this.id !== "customfield_11071") {
                sum += parseFloat(this.value);
            }

        });
        //.toFixed() method will roundoff the final sum to 2 decimal places
        jQuery("#customfield_11071").val(sum.toFixed(2));
    } 
```

HTML

```
 <div class="tabs-pane active-pane" id="tab-5">
    <div class="field-group">
      <label for="customfield_12370">
        Test Case Estimate
      </label>
      <input class="text long-field" id="customfield_12370" name="customfield_12370" type="text" value="">
      <div class="description">
        Will hold all QA estimates for Test Case preparation/creation efforts.
      </div>
    </div>
    <div class="field-group">
      <label for="customfield_12371">
        Test Analysis Estimate
      </label>
      <input class="text long-field" id="customfield_12371" name="customfield_12371" type="text" value="">
      <div class="description">
        Will hold all QA estimates for testing analysis efforts.
      </div>
    </div>
    <div class="field-group">
      <label for="customfield_11071">
        QA Estimate Total
      </label>
      <input class="text long-field" id="customfield_11071" name="customfield_11071" type="text" value="">
      <div class="description">
        Estimated LOE in Hours
      </div>
    </div>
  </div> 
```

更新：或者，不是将类字符串传递给 each，也许我可以将特定的 id 集合填充到一个数组中并将其传递给 each()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:49:08.637

您的脚本可以单独运行。请参阅[http://jsfiddle.net/jEEKL/](http://jsfiddle.net/jEEKL/)。如果您使用此`jQuery("#tab-5 input.text.long-field")`jQuery 选择器获得额外的字段，请检查您的来源是否有重复的选项卡 ID。

# c# - 如何确定异步套接字服务器中的流结束

> ID：15791769
> 
> 赞同：2
> 
> 时间：2013-04-03T15:36:35.647
> 
> 标签：c#, sockets, asynchronous, stream

我正在尝试在 C# 中编写一个异步套接字。我阅读了很多 msdn 文章并找到了这两个示例：[server](http://msdn.microsoft.com/en-us/library/fx6588te%28v=vs.85%29.aspx)，[client](http://msdn.microsoft.com/en-us/library/bew39x2a%28v=vs.85%29.aspx)。

我理解示例代码并使用它来实现我自己的异步套接字。在示例中，服务器检查`<EOF>`以确定流的结尾并发送响应。我想知道流结束时不检查特殊文字。我的想法是递归地检查`(bytesRead > 0)`和调用。`handler.BeginReceive()`请参阅以下内容：

> 原来的

```
if (bytesRead > 0) {
    // There  might be more data, so store the data received so far.
    state.sb.Append(Encoding.ASCII.GetString(
        state.buffer,0,bytesRead));

    // Check for end-of-file tag. If it is not there, read 
    // more data.
    content = state.sb.ToString();
    if (content.IndexOf("<EOF>") > -1) {
        // All the data has been read from the 
        // client. Display it on the console.
        Console.WriteLine("Read {0} bytes from socket. \n Data : {1}",
            content.Length, content );
        // Echo the data back to the client.
        Send(handler, content);
    } else {
        // Not all data received. Get more.
        handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReadCallback), state);
    }
} 
```

> 我的点子

```
if (received > 0)
{
    state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, received));
    handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0, new AsyncCallback(ReadCallback), state);
}
else
    Send(handler, state.sb.ToString()); 
```

如果我用我的零件替换原始零件，程序将停止运行。我猜客户端在 in 之后执行并`EndSend()`阻止`SendCallback()`线程。我怎么能通过这个？是否有必要使用确定流结束的令牌？`receiveDone.WaitOne()``StartClient()`

还有其他好的示例代码吗？我刚找到那两个。

（证据。服务器应该接收在线客户端并将它们从这个缓冲区中放入一个循环缓冲区，他应该使用多线程读取和处理记录。）

**编辑**

如果我使用以下功能：

```
if (receive > 0)
    state.sb.Append(Encoding.UTF8.GetString(state.buffer, 0, receive));
if (receive == StateObject.BufferSize)
    state.listener.BeginReceive(state.buffer, 0, StateObject.BufferSize, SocketFlags.None, new AsyncCallback(ReceiveCallback), state);
else
    Send(state.listener, state.sb.ToString()); 
```

一切工作正常，我猜。可以吗？还是想念我什么？

如果我将这两个 if 结合起来，它将不再起作用。为什么？

`if(receive > 0 || receive == StateObject.BufferSize)`->`if(receive > 0) // Not working.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:45:57.253

您的代码版本的问题是您`BeginReceive`总是在一种情况下启动，即当`0`收到字节时。事实上，当您收到非零且小于缓冲区大小的数据量（有时恰好是缓冲区大小时）时，大多数情况下会发生传输结束。接收`0`字节永远不会发生，因为这意味着*没有传输*而不是传输*结束*。那是假设发送者通过关闭连接来结束传输。

有多种方法可以指示传输结束：

*   发件人关闭连接
*   发送特殊序列（如 EOF）
*   接收者得到了他所期望的（因为它首先得到了标题）

第一种方法的问题是关闭（和重新打开）连接通常很昂贵。标头的问题是，如果您错过了一个标头（由于某些网络问题），您将丢失 - 您不知道下一个标头何时到来，因为您不知道当前数据包何时结束（丢失标头）。出现问题时最容易的恢复以某种形式提供 EOF。它不一定是字面上的`<EOF>`字符串，它可以是（很可能）不会出现在您的正常数据流中的任何内容。

话虽如此，没有什么能阻止您将标题与`EOF`或包含特殊序列标记记录开头的标题组合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:51:38.537

您可以确定网络流已经结束的情况是远程端正常关闭连接。这将使`EndRead`返回为零。如果您想将数据发送回远程端，这当然不是最佳方法。您基本上必须创建一个返回客户端的新连接，而不是重用初始连接。这当然是您可以做的，但它通常不会很好地工作，例如，如果客户端位于 NAT 路由器后面。

示例代码在检查时执行的操作`EOF`是执行应用程序级协议。底层网络堆栈不了解它传递给您的应用程序的有效负载，因此无法确定概念流已经结束。这是您的应用程序有责任的事情。检查标签或令牌是一种非常简单的方法。

# java - 正则表达式替换两组

> ID：15791775
> 
> 赞同：0
> 
> 时间：2013-04-03T15:36:54.847
> 
> 标签：java, regex, replace

我有这样的模式：`<[a-zA-Z][^>]*(?:poster|src)=(['\"])([^'\"]+)\\1[^>]*>` 在这里我想替换 src 或海报属性的值。

没关系

```
<video src='srcVal' /> 
```

和

```
<video poster='posterVal' src='srcVal' /> 
```

但对于

```
<video poster='posterVal' src='srcVal' /> 
```

仅更改 src 值，因为`matcher.group(2)`仅返回`srcVal`.

```
public class Test {
    public static void main(String[] args) throws Exception {
        String html = "<video poster='posterVal' src='srcVal' />";
        Pattern resourcePattern = Pattern.compile("<[a-zA-Z][^>]*(?:poster|src)=(['\"])([^'\"]+)\\1[^>]*>");
        Matcher matcher = resourcePattern.matcher(html);
        int last = 0;
        StringBuilder sb = new StringBuilder();
        while(matcher.find()) {
            String path = matcher.group(2) + "Changed";
            sb.append( html.substring(last, matcher.start(2)) + path );
            last = matcher.end(2);
        }
        sb.append(html.substring(last));
        System.out.println(sb);
        //outputs <video poster='posterVal' src='srcValChanged' />
        //expecting <video poster='posterValChanged' src='srcValChanged' />
    }
} 
```

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:49:55.570

基本问题在于`[^>]*`表达式的开头附近。因为`*`是贪婪的，所以它会吃掉尽可能多的字符，同时仍然允许表达式的其余部分匹配，所以给定

```
<video poster='posterVal' src='srcVal' /> 
```

将`[^>]*`吞噬`ideo poster='posterVal'`并包括之前的空间`src=`。

我会以不同的方式处理它，而不是尝试编写一个匹配整个标签的正则表达式，只需编写一个匹配您感兴趣的属性的正则表达式，然后替换该表达式的*所有*匹配项

```
html.replaceAll("\\b((?:poster|src)=)(['\"])([^'\"]+)\\1", "$1$2$3Changed$2") 
```

但正如其他发帖人所评论的那样，使用理解语言的适当解析器而不是尝试使用正则表达式来操纵文本表示会更明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:53:18.723

我不会用正则表达式来做这个，但你可以尝试这样的事情：

```
<[a-zA-Z]*[^>]*(?:(poster)|src)=(['\"])([^'\"]+)\\2(?(1)[^>]*(?:src=(['\"])([^'\"]+)\\4)?[^>]*|[^>]*(?:poster=(['\"])([^'\"]+)\\6)?[^>]*)> 
```

虽然我现在没有时间测试它，对不起。

**编辑：**
不太注重性能：

```
<[a-zA-Z]*(?=(?:[^>]*?poster=['\"]([^'\"]+))?)(?=(?:[^>]*?src=['\"]([^'\"]+))?)[^>]*(?:poster|src)[^>]*> 
```

如果您只想匹配视频标签，请将其更改为（因为它会大大改善它）：

```
<video(?=(?:[^>]*?poster=['\"]([^'\"]+))?)(?=(?:[^>]*?src=['\"]([^'\"]+))?)[^>]*(?:poster|src)[^>]*> 
```

**解释：（**我想它一定看起来很令人不安）

我们使用 2 个前瞻来捕捉有趣的东西。Lookaheads 将允许我们检查两次前面的内容，因此忽略顺序。但是，这些前瞻必须始终有效（使用 * 和 ? 来确保这一点），但仍然是贪婪的，同时又是懒惰的（什么？）：我们必须在看到海报/src 时立即停止，但要走得足够远抓住那些。`.*?a?`总是什么也抓不到。所以我们在这里使用`(?:.*?a)?`. 这里的行为是尝试用懒惰来捕捉*a*，而如果它失败了，这不是问题。
正则表达式的最后一部分是确保我们只捕获带有海报或 src 属性的标签，因为我们的前瞻只做那个捕获，当然不能用来做那个。

请注意，我删除了对您的属性的检查，因为无论如何它都没用。

# perl - Perl 模块将数字转换为字母符号

> ID：15791780
> 
> 赞同：5
> 
> 时间：2013-04-03T15:37:24.803
> 
> 标签：perl, perl-module

是否有一个 perl 模块可以将数字转换为字母，反之亦然？

例如

```
1 = A 
2 = B
3 = C
...
27 = AA
28 = AB
29 = AC
...
53 = BA
54 = BB
55 = BC 
```

等等等等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:47:58.853

此代码显示了一个`a2n`可以满足您需要的功能

```
use strict;
use warnings;

printf "%2s = %d\n", $_, a2n($_) for qw/ A B C AA AB AC BA BB BC /;

sub a2n {
  my $n = 0;
  $n = $n * 26 + $_ for map { ord($_) & 0x1F } split //, shift;
  $n;
} 
```

**输出**

```
 A = 1
 B = 2
 C = 3
AA = 27
AB = 28
AC = 29
BA = 53
BB = 54
BC = 55 
```

对应的`n2a`看起来像这样

```
sub n2a {
  my ($n) = @_;
  my @a;
  while ($n > 0) {
    unshift @a, ($n-1) % 26;
    $n = int(($n-1)/26); #Edited for failing corner case
  }
  join '', map chr(ord('A') + $_), @a;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T15:43:03.617

好吧，Perl 可以处理范围内的字母，这可能适合您的需要：

```
my @letters = 'A' .. 'BC'; # A B C ... Z AA AB AC etc. 
```

然后你可以简单地做：

```
my $letter = $letter[$foo - 1];   # 1 -> A, 2 -> B ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T15:42:40.920

操作员有一个可爱的技巧`..`。尝试：

```
print join ",",("A".."ZZ"),"\n" 
```

或者

```
my @a = ("A".."ZZ");
print $a[56],"\n"; 
```

但是，如果您要使用数千个元素，这并不是一个好方法。那么你最好自己为base-26做数学（非常简单的数学）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T15:42:23.500

你真的需要一个模块吗？

```
my $n = 55;
my $s = 'A';
$s++ while --$n;
print "$s\n"; 
```

# c# - 从 Javascript 方法调用 ac# 函数

> ID：15791782
> 
> 赞同：1
> 
> 时间：2013-04-03T15:37:36.877
> 
> 标签：c#, javascript

我正在尝试从 javascript 函数调用 ac# 函数：

在我的**default.aspx**中，我有以下代码：（javascript）

```
<script type="text/javascript">
    function App() {
        var temp;
        temp = PageMethods.Connect();
        alert(temp);
    }
</script> 
```

( **HTML** )

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div class="menuContent">
        <p><a href="#" onclick="App();">blabla!</a></p>
        <div id="navTreeContainer">
            <div id="navtree"></div>
        </div>
    </div>
</asp:Content> 
```

**默认.aspx.cs**

```
[WebMethod]
public static string Connect()
{
    string test;
    test = "test";
    return test;
} 
```

当我尝试这个时，没有任何反应。

我不知道我在这里做错了什么......

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:42:34.897

原因是您的`PageMethods.Connect()`方法中缺少几个参数。

`PageMethods.Connect();`将通过服务器上的 ajax 调用该函数，但它是异步的，因此您必须指定一个回调。

```
PageMethods.Connect(function(resp){ alert(resp); }, 
                    function(err){ alert(err.get_message()); }); 
```

当服务器返回结果且没有错误时调用第一个回调，第二个回调在错误时调用。

更多信息见：

*   [http://www.dotnetjalps.com/2011/12/page-methods-in-aspnet.html](http://www.dotnetjalps.com/2011/12/page-methods-in-aspnet.html)
*   [http://weblogs.asp.net/jalpeshpvadgama/archive/2012/01/07/asp-net-page-methods-with-parameters.aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2012/01/07/asp-net-page-methods-with-parameters.aspx)。

另外，不要忘记添加脚本管理器：

```
<asp:ScriptManager runat="server" EnablePageMethods="true" EnablePartialRendering="true"></asp:ScriptManager> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:39:53.953

是的，那是因为 C# 在服务器端执行而 javascript 在客户端执行，所以当您的 aspx 呈现页面时，“PageMethods.Connect();” 失去了意义……

但是有办法做到这一点，异步请求

见[https://en.wikipedia.org/wiki/Ajax_%28programming%29](https://en.wikipedia.org/wiki/Ajax_%28programming%29)

# c - C GTK+ segfault if 在调用任何函数后调用 gtkfilechooser

> ID：15791784
> 
> 赞同：1
> 
> 时间：2013-04-03T15:37:38.760
> 
> 标签：c, gtk, segmentation-fault, filechooser

```
Linux IBM370 3.5.0-17-generic #28-Ubuntu SMP Tue Oct 9 19:31:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)
ldd (Ubuntu EGLIBC 2.15-0ubuntu20) 2.15
GTK+  2.24.13-0ubuntu2 and 3.2.4-2 - the same behavior 
```

Gnome bugzilla 中有一些报告：
[https](https://mail.gnome.org/archives/gtk-devel-list/2012-June/msg00017.html)
://mail.gnome.org/archives/gtk-devel-list/2012-June/msg00017.html 问题是 gtkfilechooser 在第二次调用甚至第一次调用时崩溃应用程序

```
GLib (gthread-posix.c): Unexpected error from C library during 'pthread_setspecific': Invalid argument.  Aborting.  
Aborted (core dumped) 
```

我发现当我运行后台线程时会出现问题。

```
g_thread_new("vm refresh thread", get_vm_list, (gpointer) session); 
```

这是文件选择器功能

```
char *
gtk_select_dir(char *label)
{
    GtkWidget *select_dir;
    char *dirpath=NULL;
    select_dir = gtk_file_chooser_dialog_new(label, GTK_WINDOW(main_window),
                                          GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
                                          GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL );

    if (gtk_dialog_run(GTK_DIALOG (select_dir) ) == GTK_RESPONSE_ACCEPT)
    {
        dirpath = gtk_file_chooser_get_filename(GTK_FILE_CHOOSER (select_dir) );
    }   
    gtk_widget_destroy(select_dir);
    return (dirpath);
} 
```

没有线程运行时一切正常。在线程运行时，从主线程调用此函数会导致崩溃。线程完成并退出后，对该函数的任何调用都会导致段错误。这是gdb输出

```
(gdb) backtrace 
#0  0x00007f7d4aff6425 in __GI_raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007f7d4aff9b8b in __GI_abort () at abort.c:91
#2  0x00007f7d4b9ed95d in g_thread_abort (status=<optimized out>, function=function@entry=0x7f7d4baad358 "pthread_setspecific")
at /build/buildd/glib2.0-2.34.1/./glib/gthread-posix.c:76
#3  0x00007f7d4ba58215 in g_private_set (key=key@entry=0x7f7d4a192ce0 <current_cancellable>, value=0x1c21a80)
at /build/buildd/glib2.0-2.34.1/./glib/gthread-posix.c:1024
#4  0x00007f7d49e75400 in g_cancellable_push_current (cancellable=<optimized out>) at /build/buildd/glib2.0-2.34.1/./gio/gcancellable.c:203
#5  0x00007f7d49e9c224 in io_job_thread (data=0x1fe1ba0, user_data=<optimized out>) at /build/buildd/glib2.0-2.34.1/./gio/gioscheduler.c:158
#6  0x00007f7d4ba3ee62 in g_thread_pool_thread_proxy (data=<optimized out>) at /build/buildd/glib2.0-2.34.1/./glib/gthreadpool.c:309
#7  0x00007f7d4ba3e645 in g_thread_proxy (data=0x1c0b320) at /build/buildd/glib2.0-2.34.1/./glib/gthread.c:797
#8  0x00007f7d4b386e9a in start_thread (arg=0x7f7d3e240700) at pthread_create.c:308
#9  0x00007f7d4b0b3cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#10 0x0000000000000000 in ?? () 
```

这个问题完全阻止了我使用线程......是描述的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T14:39:55.003

答案是libxml2使用不当

> 根据 libxml2 文档 ( [http://xmlsoft.org/threads.html](http://xmlsoft.org/threads.html) )，我们应该只在“主”线程中调用 xmlInitParser()，但我们会多次调用 xmlInitParser()。使用 xmlCleanupParser 的正确方法应该是在退出之前立即调用，并且只调用一次。但是我们多次调用 xmlCleanupParser。

问题出在忽略它的导入源代码中

# javascript - 上下文菜单上的 jQuery，打开和关闭

> ID：15791789
> 
> 赞同：0
> 
> 时间：2013-04-03T15:37:51.280
> 
> 标签：javascript, jquery, toggle, jquery-events

我最近使用了 jQuery 的`on('contextmenu'...`

但是是否可以像 jQuery 的切换功能一样打开和关闭它？

**例如**

```
$('#option').on('contextmenu', function(){
    $(this).addClass('selected');
});

// on second click removeClass('selected'); 
```

我使用了这个`contextmenu`事件，因为我想要在 a`click`和 a上有不同的行为`rightclick`。

是否可以像关闭那样打开和关闭**它**`toggle`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:43:38.533

使用 jQuery 的`.toggleClass`. 我还添加`return false`了防止上下文菜单实际显示的内容，但这由您决定（如果您需要上下文菜单，请将其删除）：

[http://jsfiddle.net/kjKZ3/](http://jsfiddle.net/kjKZ3/)

另一个注意事项：您的问题中有一个错字；你应该添加 class`'selected'`而不是 class `'.selected'`。

# javascript - 我可以使用 javascript 调用原生 HTML5 输入工具提示吗？

> ID：15791794
> 
> 赞同：2
> 
> 时间：2013-04-03T15:37:56.800
> 
> 标签：javascript, html, validation

在 HTML5 中，您可以使用[输入模式](http://html5pattern.com/)，当输入错误或必需但为空时，您会在该字段上获得特定于浏览器的工具提示。我想知道我是否可以玩它。例如，我可以使用无法使用模式完成的自定义客户端验证。有什么我可以触发的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:42:52.040

您可以通过 JS 将模式属性更改为不可能匹配，因此它总是“失败”，导致它显示工具提示。就像是`a{99999999999}`

我很想知道这是一种什么样的验证，尽管这不能用正则表达式来完成。

# weblogic - 使用 Chef 创建配置文件

> ID：15791798
> 
> 赞同：1
> 
> 时间：2013-04-03T15:38:11.653
> 
> 标签：weblogic, configuration-files, chef-infra

我正在进行的项目正在考虑引入 Chef 来帮助管理部署。这似乎完全合理，因为我们在配置新机器/环境时遇到了问题。然而，他们现在要求我使用 Chef 作为一种机制来为一堆不同的环境创建配置文件，我想知道它是否是适合这项工作的工具。我用谷歌搜索了很多，还没有看到有人像这样使用它......

我有一个带有大量选项的 xml 文件，如下所示（用于配置 weblogic）：

```
<servers>
    <server>
        <name>MANAGED_SERVER_1</name>
        <listenAddress>machine46</listenAddress>
        <listenPort>65501</listenPort>
        <listenPortSecure>65502</listenPortSecure>
        <classpath>/example/test/test.jar.... 
```

我们有 12 个不同的环境，每个环境都有不同的端口、名称等。这意味着创建 12 个单独的 xml 文件，编写一些内容以在每个环境的一个主 xml 中进行搜索和替换，或者可能使用 Chef。

厨师会达到这个目的吗？这真的是应该用来做什么的吗？此刻，它有点被逼到了我们的喉咙里。

将不胜感激修改/创建多个配置文件的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:07:43.197

厨师（和它的喜欢）非常适合这类事情，而且很多厨师食谱已经生成了配置文件。通常，您将在您的食谱中包含一个模板（它实际上是 erb 文件，如评论中所述），并且您的配方将使用服务器和[数据包](http://docs.opscode.com/essentials_data_bags.html)的环境特定变量作为模板的输入，以生成特定于环境的配置文件。根据经验，我会说查看一些现有数据包的源代码是学习如何做到这一点的最佳方式。

# c# - 有东西时 GetChildAtPoint 返回 null

> ID：15791800
> 
> 赞同：1
> 
> 时间：2013-04-03T15:38:24.590
> 
> 标签：c#, winforms

我目前正在编写一个从 xml 动态创建表单的 C# 程序。当前的 xml 包含我需要的 67 个字符串。但是，当 for 循环达到 34 或 35 时，它会返回 null。代码如下

```
for(int x =0; x < 67: x++){
CheckBox sue = (CheckBox)GetChildAtPoint(new Point(760, loc));
loc = loc + 20;
          } 
```

我已经手动检查了表格，那里有一些东西，我正在使用最新的框架。我还发布了用于动态发布复选框和标签的代码。

```
 for (int x = 0; x < cnt; x++)
        {

            /*creating the form*/
            String edit = "e1";
            String template = "t1";
            this.Controls.Add(new Label() {Text = data[x], Width=540,     Name = x.ToString(), Location = new Point(20, loc) });
            this.Controls.Add(new CheckBox() {Checked = true, Width = 20, Name = edit, Location = new Point(560, loc) });
            this.Controls.Add(new CheckBox(){ Width = 20, Name = template, Location = new Point(760, loc)});

            loc = loc + 20; 

        } 
```

在我看来，唯一合乎逻辑的事情是 GetChildAtPoint 是有限制的，而 xml 格式是企业网站的标准 site.xml 文件。无论如何完成这将对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:19:06.857

假设 cnt >= 67

这是枚举控件的一种不寻常的方式，仅按名称查找控件不是更容易吗？

例如，将名称设置为“CheckBoxAtLocx”，然后使用`Controls["CheckBoxAtLocx"]`？

我会考虑这样做的其他方法是在创建时将所有控件添加到列表中。

所以这条线

```
this.Controls.Add(new CheckBox(){ Width = 20, Name = template, Location = new Point(760, loc)}); 
```

变成

```
var TempCheckbox = new CheckBox(){ Width = 20, Name = template, Location = new Point(760, loc)}
MyCheckboxList.Add(TempCheckbox); //Keep a reference for later
this.Controls.Add(TempCheckbox); 
```

或者我会使用标签属性并存储其他信息，例如标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:00.397

是的，GetChildAtPoint 仅适用于可见区域。几乎可以与鼠标位置一起使用。

我认为您将不得不考虑另一种方法：

```
for (int i = 0; i < 67; ++i) {
  foreach (CheckBox c in this.Controls.OfType<CheckBox>()) {
    if (c.Bounds.Contains(new Point(0, loc))) {
      // do something
    }
  }
  loc += 20;
} 
```

您可能需要考虑将控件的高度设置为 20 像素会导致重叠。

另一种方法是检查控件的名称：

```
for (int i = 0; i < 67; ++i) {
  string checkName = "CheckBox" + i.ToString();
  if (this.Controls.ContainsKey(checkName)) {
    CheckBox checkBox = this.Controls[checkName] as CheckBox;
  }
} 
```

您必须将其添加到您的构建器中：

```
this.Controls.Add(new CheckBox() { Name = "CheckBox" + i.ToString(), etc... 
```

# authentication - MySpace OAuth2.0：他们的文档中的端点在哪里？

> ID：15791801
> 
> 赞同：2
> 
> 时间：2013-04-03T15:38:26.067
> 
> 标签：authentication, oauth-2.0, myspace

我有一个客户希望能够使用 MySpace 登录到他的应用程序。我发现一篇博客文章说支持 OAuth2.0，但是，我找不到任何有关授权、令牌甚至用户数据的 restful 端点的文档。

有人知道 myspace 的以下内容吗？

*   范围名称是什么？
*   他们的授权网址是什么？
*   他们的令牌生成网址是什么？
*   他们是否有一个宁静的 API 可以获取唯一的用户 ID？

任何帮助表示赞赏！

# java - 无法安装我自己的 ElasticSearch 插件

> ID：15791812
> 
> 赞同：5
> 
> 时间：2013-04-03T15:38:46.407
> 
> 标签：java, maven, plugins, debian, elasticsearch

前段时间我使用 ES 0.20.1 构建了自己的 ES 插件。工作得很好。今天，我想我会回到那个项目并首先尝试在最新版本（0.20.6）上重新部署它，就像我之前从 0.19.8 到 0.20.1 所做的那样。

所以我更新了依赖项以使用 0.20.6 库，运行我的测试（全部通过）并构建了插件。（我正在使用 Maven）

生成了一个名为`elasticsearch-MyPlugin-0.20.6.zip`wich 的文件，其中包含 jar`myplugin-0.0.1-SNAPSHOT-jar-with-dependencies.jar`

然后像往常一样我使用部署我的插件

```
sudo /usr/share/elasticsearch/bin/plugin -url /path/to/foler/containing/zipfile -install MyPlugin 
```

那个可以工作......但现在它给我抛出了以下错误：

```
-> Installing MyPlugin...
Failed to install MyPlugin, reason: no protocol: /path/to/foler/containing/zipfile 
```

所以我回到了 ES 文档中关于[安装插件](http://www.elasticsearch.org/guide/reference/modules/plugins)的内容。

```
sudo /usr/share/elasticsearch/bin/plugin -url file:///path/to/foler/containing/zipfile -install elasticsearch-MyPlugin-0.20.6 
```

这是输出：

```
-> Installing elasticsearch-MyPlugin-0.20.6...
Trying file:/path/to/foler/containing/zipfile...
Downloading .DONE
failed to extract plugin [/usr/share/elasticsearch/plugins/elasticsearch-MyPlugin-0.20.6.zip]: ZipException[error in opening zip file] 
```

只是为了彻底，我有`es-plugin.properties`指向正确类的文件。

我猜我使用的名称和/或我安装插件的方式有问题，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T16:10:52.247

在盲目尝试多种解决方案后成功了...

```
sudo /usr/share/elasticsearch/bin/plugin -url file:///path/to/the/actual/elasticsearch-MyPlugin-0.20.6.zip -install MyPlugin 
```

# ruby - 如何在 Rails 应用程序中获取配置变量？

> ID：15791814
> 
> 赞同：0
> 
> 时间：2013-04-03T15:38:50.420
> 
> 标签：ruby, ruby-on-rails-3

我想获取所有配置变量，但我不太了解 Rails 配置...

比方说，我`config.myvar`在 test.rb 中有类似的东西，在运行时我会这样做：

```
MyApp::Application.config.myvar           # works
MyApp::Application.config.send("myvar")   # works as well 
```

如果我是正确的，我可以假设它是一个函数，如[doc](http://ruby-doc.org/core-2.0/Object.html#method-i-send)中所指定。然而，打电话`methods`会给我（很多）方法，但不是我的……[`instance_variables`](http://ruby-doc.org/core-2.0/Object.html#method-i-instance_variables)和我可以尝试的任何方法一样。

如果您有任何线索，我显然想念一些东西:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:00:53.387

当我阅读您的问题时，我现在不知道这种机制是如何工作的（尽管我有一个很好的主意。）这就是我想出来的，将源代码读取到 rails：

Rails 应用程序配置位于 rails 源的 rails/railties/lib/rails/application.rb 下的 rails 中。我们可以看到它创建了一个配置对象，如下所示：

```
def config #:nodoc:
  @config ||= Application::Configuration.new(find_root_with_flag("config.ru", Dir.pwd))
end 
```

所以我们可以`Application::Configuration`在 rails/railties/lib/rails/application/configuration.rb 中追踪。

然而，这是一个相当小的类，没有任何东西允许调用任意方法。让我们上链。这是 的一个孩子`::Rails::Engine::Configuration`，所以让我们转到这个文件。（rails/railties/lib/rails/engine/configuration.rb，如果你正确地遵循）。

同样，一个相当小的类具有一组定义的函数。但是，这也有一个父类！`::Rails::Railtie::Configuration`. 所以我们看下这个文件的来源（rails/railties/lib/rails/railtie/configuration）：

最后，我们有流行的[#method_missing](https://github.com/rails/rails/blob/master/railties/lib/rails/railtie/configuration.rb#L89)：

```
 def method_missing(name, *args, &blk)
    if name.to_s =~ /=$/
      @@options[$`.to_sym] = args.first
    elsif @@options.key?(name)
      @@options[name]
    else
      super
    end
  end 
```

阅读本文，我们会看到名称是否包含`=`，我们将类变量选项 hash 设置为等于第一个参数，并将您调用的方法的名称作为键（在符号化之后）。否则，我们在选项哈希中返回该键的内容。但是，因为它以这种方式工作，所以既不工作`#methods`也不`#instance_variables`工作。然而，再次阅读这个文件，我们看到 rails 给了我们一个选项：

```
 def respond_to?(name)
    super || @@options.key?(name.to_sym)
  end 
```

如果已设置密钥，这将返回 true。

要获取列表，您可以：

```
MyApp::Application.config.class_variable_get(:@@options).keys 
```

这将为您提供选项类变量中的键列表

# twitter - 每小时之间搜索推文...使用推特搜索 API

> ID：15791817
> 
> 赞同：0
> 
> 时间：2013-04-03T15:38:58.530
> 
> 标签：twitter

任何人都可以让我知道获取包含某个主题标签的推文的查询，例如每天上午 9 点到 10 点之间的#Twiterrati 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:42:23.313

听起来您需要使用使用 Twitter 搜索功能的 Cron 作业。

[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

根据您的语言，将 cron 设置为在上午 9 点或上午 10 点运行。通过执行以下操作，拥有一个调用 Twitter API 的函数：

[https://api.twitter.com/1.1/search/tweets.json?q=#Twiterrati](https://api.twitter.com/1.1/search/tweets.json?q=#Twiterrati)

请记住，您将需要一个经过身份验证的 Twitter 应用程序来进行搜索。

# c# - “对象引用未设置为对象的实例” - Azure 中的 WCF REST 服务

> ID：15791820
> 
> 赞同：0
> 
> 时间：2013-04-03T15:39:09.540
> 
> 标签：c#, wcf, rest, azure

在我的 winJS 应用程序中调用该方法时遇到问题：

```
[OperationContract]
[WebInvoke(RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.WrappedRequest)]
void newUserAndImageEntry(string pArrayImage,
    string pContentType, string pUserName, string pFileName); 
```

我得到的错误是：

```
 "InnerException":null
 "Message":"Object reference not set to an instance of an object."
 "StackTrace":"
    at WebRoleUploadImages.UploadImagesAJAX.newUserAndImageEntry(String pArrayImage,
       String pContentType, String pUserName, String pFileName)
    at SyncInvokenewUserAndImageEntry(Object , Object[] , Object[] )
    at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance,
       Object[] inputs, Object[]& outputs)
    at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
    at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)
Type:"System.Exception"} 
```

我真的不知道如何找到哪个是空的对象..我检查了我发送的所有变量，它们至少都有一些东西，帮助？

# hibernate - Envers 不使用 JTA Atomikos 在版本表中插入记录

> ID：15791825
> 
> 赞同：1
> 
> 时间：2013-04-03T15:39:34.727
> 
> 标签：hibernate, jta, spring-data-jpa, hibernate-envers, atomikos

我正在使用 Spring 3.1、Spring data jpa 1.2 和 Hibernate 3.5.1 和 envers 3.5.1。问题是使用 envers 时，我的 _AUD 表正在创建，但数据未插入 AUD 表中。我在 Person 实体上使用了 @Audited，并创建了 RevListener 类实现了 RevisionListener。我还创建了 RevEntity 扩展 DefaultRevisionEntity 如 envers doc 中所述。当我尝试通过简单地使用 @Rollback(false) 并使用 PersonRepository 保存方法来运行我的 Spring junit 测试时。它正在数据库中保存新人，但在 Person_AUD 表中没有插入任何内容。下面是我的 spring 配置文件的片段。

```
<bean id="atomikosTransactionManager"   class="com.atomikos.icatch.jta.UserTransactionManager" init-method="init"
                    destroy-method="close">
                    <property name="forceShutdown" value="true" />
                    <property name="startupTransactionService" value="true" />

            </bean> 
<bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp">
            <property name="transactionTimeout" value="1000" />
            </bean>
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
                <property name="transactionManager" ref="atomikosTransactionManager" />
                <property name="userTransaction" ref="atomikosUserTransaction" />
                <property name="transactionSynchronizationName"  value="SYNCHRONIZATION_ON_ACTUAL_TRANSACTION" />
            </bean>

            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" id="PPL_GMRJPAVendorAdapter">
                    <property name="showSql" value="true"/>
                    <property name="generateDdl" value="true"/> 
                    <property name="databasePlatform" value="org.hibernate.dialect.Oracle10gDialect"/>
            </bean>

            <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="PPL_GMR">
                    <property name="dataSource" ref="PPL_GMRDS"></property>
                    <property name="persistenceUnitName" value="PPL_GMR"/>
                    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence-test.xml"/>
                    <property name="jpaVendorAdapter" ref="PPL_GMRJPAVendorAdapter"/>
                    <property name="jpaPropertyMap">
                            <map>
                                <entry key="hibernate.transaction.manager_lookup_class"                                                     

                        value="com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup"/> 
                                        <entry key="hibernate.default_schema" value="${PPL.schema}"/>
                                <entry key="hibernate.hbm2ddl.auto" value="update"/>
                                <entry key="org.hibernate.envers.auditTablePrefix" value=""/>
                                <entry key="org.hibernate.envers.auditTableSuffix" value="_AUD"/>

                                <entry key="hibernate.transaction.flush_before_completion" value="false"/>
                                    <entry key="hibernate.transaction.auto_close_session" value="true"/>
                                    <entry key="hibernate.current_session_context_class" value="jta"/>
                                    <entry key="hibernate.connection.release_mode" value="auto"/>

                            </map>
                    </property>
            </bean> 
```

这是我的persistence.xml的摘录

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
     <property name="hibernate.ejb.event.post-insert"
             value="org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener" />
          <property name="hibernate.ejb.event.post-update"
             value="org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.AuditEventListener" />
          <property name="hibernate.ejb.event.post-delete"
             value="org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener" />
          <property name="hibernate.ejb.event.pre-collection-update"
             value="org.hibernate.envers.event.AuditEventListener" />
          <property name="hibernate.ejb.event.pre-collection-remove"
             value="org.hibernate.envers.event.AuditEventListener" />
          <property name="hibernate.ejb.event.post-collection-recreate"
             value="org.hibernate.envers.event.AuditEventListener" />             
    </properties> 
</persistence> 
```

我也尝试将此属性添加到 entitymanager config "hibernate.transaction.factory_class"value="com.atomikos.icatch.jta.hibernate3.AtomikosJTATransactionFactory" 但现在添加此属性后，数据也没有插入到 person 表中。并且像往常一样在 AUD 表中没有插入数据。创建的人员对象显示但未提交。

这是调试模式下日志的最后几行

```
2013-04-03 11:47:39 DEBUG AbstractEntityManagerImpl:990 - Looking for a JTA transaction to join
2013-04-03 11:47:39 WARN  AbstractEntityManagerImpl:1099 - Cannot join transaction: do not override hibernate.transaction.factory_class
2013-04-03 11:47:40 DEBUG TransactionalRepositoryProxyPostProcessor$CustomAnnotationTransactionAttributeSource:288 - Adding transactional method 'save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2013-04-03 11:47:40 DEBUG JDBCContext:199 - successfully registered Synchronization
2013-04-03 11:47:40 DEBUG SessionImpl:257 - opened session at timestamp: 13650040606
2013-04-03 11:47:40 DEBUG AbstractEntityManagerImpl:990 - Looking for a JTA transaction to join
2013-04-03 11:47:40 WARN  AbstractEntityManagerImpl:1099 - Cannot join transaction: do not override hibernate.transaction.factory_class
2013-04-03 11:47:40 DEBUG AbstractBatcher:410 - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
2013-04-03 11:47:40 DEBUG ConnectionManager:444 - opening JDBC connection
2013-04-03 11:47:40 DEBUG SQL:111 - select GMRPPLD4.PERSON_SEQ.nextval from dual
Hibernate: select GMRPPLD4.PERSON_SEQ.nextval from dual
2013-04-03 11:47:40 DEBUG SequenceGenerator:114 - Sequence identifier generated: BasicHolder[java.lang.Integer[21]]
2013-04-03 11:47:40 DEBUG AbstractBatcher:418 - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
2013-04-03 11:47:40 DEBUG ConnectionManager:427 - aggressively releasing JDBC connection
2013-04-03 11:47:40 DEBUG ConnectionManager:464 - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
2013-04-03 11:47:40 DEBUG SequenceHiLoGenerator:85 - new hi value: BasicHolder[java.lang.Integer[21]]
2013-04-03 11:47:40 DEBUG AbstractSaveEventListener:135 - generated identifier: 1050, using strategy: org.hibernate.id.SequenceHiLoGenerator
Persons: id=[1050] birthDate=[java.util.GregorianCalendar[time=1365004060605,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="America/New_York",offset=-18000000,dstSavings=3600000,useDaylight=true,transitions=235,lastRule=java.util.SimpleTimeZone[id=America/New_York,offset=-18000000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=8,startDayOfWeek=1,startTime=7200000,startTimeMode=0,endMode=3,endMonth=10,endDay=1,endDayOfWeek=1,endTime=7200000,endTimeMode=0]],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2013,MONTH=3,WEEK_OF_YEAR=14,WEEK_OF_MONTH=1,DAY_OF_MONTH=3,DAY_OF_YEAR=93,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=11,HOUR_OF_DAY=11,MINUTE=47,SECOND=40,MILLISECOND=605,ZONE_OFFSET=-18000000,DST_OFFSET=3600000]] 
2013-04-03 11:47:40 WARN  EntityManagerImpl:138 - Entity Manager closed by someone else (hibernate.transaction.auto_close_session must not be used)
2013-04-03 11:47:41 INFO  SessionFactoryImpl:935 - closing
2013-04-03 11:47:41 INFO  SessionFactoryImpl:935 - closing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T13:42:38.897

在我的情况下，从 envers 3.5.1 升级到 3.5.6 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T07:47:53.980

我进行了一些测试，即：JTA + envers +

1.  hibernate 3.6.1 - 提交错误
2.  hibernate 4 - 提交完成没有错误，但数据没有持久化
3.  jpa (hibernate 4) - 一切正常

我使用 JBoss 作为我的容器，使用 Oracle（XA 配置）作为我的数据库。

无论环境版本如何，没有 JTA 的配置都不会产生问题

# magento - 如何从 Magento 站点删除处理？

> ID：15791828
> 
> 赞同：0
> 
> 时间：2013-04-03T15:39:47.740
> 
> 标签：magento, shipping

我想从网站的“运输和处理”行中删除“处理”，我的客户收取运费但从不处理。

如何从网站的前端删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:44:02.760

我假设您使用的`Flat Rate`是 Magento 中的运输方式。

要更改名称，请在 Magento 管理员中执行以下操作：

1.  去`System > Configuration > Shipping Methods`
2.  扩展您的运输方式。示例：`Flat Rate`。
3.  修改`Title`和`Method Name`
4.  清除您的块缓存`System > Cache Management`。

如果不是这个，你需要更清楚地知道这个文本出现在哪里。如果它是模板文件的一部分，您可以使用翻译 CSV 文件来更改文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:40:54.097

我找到了我要找的东西。我想删除网站上“运输和处理”中显示的“处理”一词。这可以通过编辑这个文件来删除：app/code/core/Mage/Sales/Model/Quote/Address/Total/Shipping.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T19:24:21.737

我将在这里给出另一个答案，因为文件的核心更改并不理想，并且接受的答案实际上并没有改变“运输和处理”这一行，而是改变了运输方式。更改行打开 mypackage/mytheme/locale/mylanguage/template/translate.csv 并添加以下内容

```
"Shipping & Handling","Shipping" 
```

# iphone - IOS：如何区分应用程序的自动启动或用户启动？

> ID：15791836
> 
> 赞同：0
> 
> 时间：2013-04-03T15:40:19.253
> 
> 标签：iphone, ios, startup

在 iPhone 应用程序（iOS v4.2 或更高版本）中：

我需要区分应用程序是由用户从手机打开（通过单击桌面手机上的应用程序图标）还是在系统启动时自动执行。

我已经仔细阅读和搜索，但没有找到这个案例的答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:42:42.827

您可以通过询问传递给 willFinishLaunchingWithOptions 的启动选项来确定这一点。从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)中：

> 如果系统出于特定原因启动了您的应用程序，则 launchOptions 字典包含指示启动原因的数据。您的应用应在此字典中查找与您的应用支持的功能相对应的任何键。如果给定键存在，您应该提供适当的响应。
> 
> 如果您的应用程序是为了打开 URL 而启动的，您应该检查 UIApplicationLaunchOptionsURLKey 键的值并返回一个布尔值，指示您的应用程序是否可以实际打开 URL。您不应尝试使用此方法打开 URL。相反，在您的应用程序委托中实现 application:openURL:sourceApplication:annotation: 方法并使用该方法打开 URL。

# php - 使用单个查询在更新时自动增加 MySQL 列字段

> ID：15791838
> 
> 赞同：1
> 
> 时间：2013-04-03T15:40:24.687
> 
> 标签：php, mysql, sql, sql-update

假设我有这个代码：

```
$ids = execute_query("SELECT id FROM table WHERE field = 'value' ORDER BY order_field");
$query = "UPDATE table SET increment = CASE";
for ($i = 0; $i <= sizeof($ids); $i++) {
  $query .= " WHEN id = " . $ids[$i] . " THEN " . $i;
}
$query .= " END WHERE field = 'value'"; 
```

然后我执行那个查询。

有没有一种方法可以将`SELECT`and组合`UPDATE`成一个查询，从而有效地实现完全相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:01:22.520

无法在子选择同一个表时更新表：http: [//dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html) *“目前，您无法更新表并从同一个表中选择一个子查询。”*

我没有在这里运行它，但据我了解，这就是你想要的：

```
SET @ordering = 0;

UPDATE
  table SET increment = (@ordering := @ordering + 1)
WHERE
  field = 'value'
ORDER BY
  order_field; 
```

只要不重新连接到数据库，就可以在单独的查询中执行`SET`and 。`UPDATE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:48:16.967

这可能会做你想要的：

```
update table
    set increment = (select cnt
                     from (select count(*) as cnt
                           from table t
                           where field = 'value' and t.id <= table.id
                          ) a
                    )
    where field = 'value'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T16:22:54.650

```
SET @ordering = 100000;

UPDATE candidate 
    SET regno = (@ordering := @ordering + 1)
    WHERE 
        year = 2014 AND 
        confirm = 1 AND
        e_stat = 1 
    ORDER BY centre_code, `name`; 
```

# xsd - 如何访问 XML 模式中的枚举 ID（使用 xerces-c）？

> ID：15791840
> 
> 赞同：3
> 
> 时间：2013-04-03T15:40:36.850
> 
> 标签：xsd, xerces-c

假设我有一个可能包含以下内容的 XSD：

```
<simpleType name="CELESTIAL_IMPORIUM_CATEGORY">
    <restriction base="integer">
        <enumeration id="BELONGING_TO_THE_EMPEROR" value="8001"/>
        <enumeration id="EMBALMED"                 value="8002"/>
        <enumeration id="TRAINED"                  value="8003"/>
        <enumeration id="SUCKLING_PIGS"            value="8004"/>
    </restriction>
</simpleType> 
```

假设我希望能够同时获取枚举值和它们的名称（在 id 属性中）。我试图弄清楚这是否可能。

再假设一点，我可能正在使用 xerces-c（比如 3.1.1），更具体地说，是使用来自 xercesc/framework/psvi 的类。我已经初步了解了一下，但事情看起来并不乐观：

*   它看起来像`XSSimpleTypeDefinition`通过提供对枚举详细信息的访问`getMultiValueFacets()`
*   但是，这会返回一个`XSMultiValueFacet`，它似乎只提供对值（和注释）的访问。

有没有，也许，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T21:57:35.350

Genericode 是一个很好的例子，说明如何以在 XSD 中仍然有效的方式包含代码、ID 和描述。[https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=codelist](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=codelist)

这是完整列表的快速示例，请访问[此处](http://docs.oasis-open.org/ubl/os-UBL-2.0/xsd/common/CodeList_CurrencyCode_ISO_7_04.xsd)：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ccts="urn:un:unece:uncefact:documentation:2" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:simpleType name="CurrencyCodeContentType">
    <xs:restriction base="xs:token"><xs:enumeration value="AED"><xs:annotation><xs:documentation>
                        <ccts:CodeName>Dirham</ccts:CodeName>
                        <ccts:CodeDescription/>
                    </xs:documentation>
                </xs:annotation>
            </xs:enumeration><xs:enumeration value="AFN"><xs:annotation><xs:documentation>
                        <ccts:CodeName>Afghani</ccts:CodeName>
                        <ccts:CodeDescription/>
                    </xs:documentation>
                </xs:annotation>
            </xs:enumeration><xs:enumeration value="ALL"><xs:annotation><xs:documentation>
                        <ccts:CodeName>Lek</ccts:CodeName>
                        <ccts:CodeDescription/>
                    </xs:documentation>
                </xs:annotation>
            </xs:enumeration><xs:enumeration value="AMD"><xs:annotation><xs:documentation>
                        <ccts:CodeName>Dram</ccts:CodeName>
                        <ccts:CodeDescription/>
                    </xs:documentation>
                </xs:annotation>
            </xs:enumeration><xs:enumeration value="ANG"><xs:annotation><xs:documentation>
                        <ccts:CodeName>Netherlands Antillian Guilder</ccts:CodeName>
                        <ccts:CodeDescription/>
                    </xs:documentation>
                </xs:annotation>
            </xs:enumeration>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:44:44.783

我认为您没有遗漏任何东西（但我不精通 Xerces-C 内部结构）。XSD 规范详细定义了模式验证后信息集和模式组件的抽象结构，但它不要求验证器提供对任何特定部分的访问，更不用说为此指定 API。（在关键时刻，来自一家有影响力的公司的 WG 成员咆哮道：“我们不需要 steening API 规范”，房间里几乎所有的供应商都同意。）所以你能访问什么取决于具体的软件您正在使用的 API，您可以通过它访问它。

然而，即使是最彻底的 API，也不太可能提供对 xsd:enumeration 元素上 ID 属性值的访问——ID 属性不对应于简单类型组件的任何部分，并且几乎所有 API 的设计者模式信息很可能将其视为组件的 XML 表示的附带现象，没有任何内在的兴趣。

如果您有权访问定义您正在使用的架构的架构文档，当然，您总是可以使用普通的 XML 工具来查找您感兴趣的 ID；这就是首先使模式文档成为 XML 文档的原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T11:26:36.030

它适用于带有 <xsd:restriction base="xsd:string"> 的枚举：

```
std::vector<std::basic_string<XMLCh>> values;
if (type->getTypeCategory() == xercesc_3_2::XSTypeDefinition::SIMPLE_TYPE) {
    const auto simpleType = static_cast<xercesc_3_2::XSSimpleTypeDefinition *>(type);
    const auto multiValueFacets = simpleType->getMultiValueFacets();
    for (auto i = 0; multiValueFacets && i < multiValueFacets->size(); i++) {
        const auto el = multiValueFacets->elementAt(i);
        const auto facets = el->getLexicalFacetValues();
        for (auto vi = 0; facets && vi < facets->size(); vi++) {
            values.emplace_back(facets->elementAt(vi));
        }
    }
} 
```

# c# - 在c#中的网页中创建一个浏览按钮

> ID：15791841
> 
> 赞同：1
> 
> 时间：2013-04-03T15:40:38.443
> 
> 标签：c#

我创建了一个网页，并在其中创建了一个名为“BrowseButton”的浏览按钮和一个名为“BrowseTextBox”的文本框

后端代码是：

```
protected void BrowseButtonClick(object sender, EventArgs e)

        {
            FolderBrowserDialog folderBrowserDialog = new FolderBrowserDialog();
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.ShowDialog();
            BrowseTextBox.Text = openFileDialog1.FileName;
        } 
```

但我得到了一个`ThreadStateException`，我不知道如何处理它....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:47:43.240

您说您正在创建一个网页，但您的代码使用`OpenFileDialog`来自 Windows 窗体或 WPF 库的类。这些对话框不能在 Web 应用程序上使用——它们是在编写 Windows 应用程序时使用的。您看到的线程错误是由此产生的直接后果。

你不能对这个异常做任何事情：没有办法在 web 应用程序中使用这些类。相反，如果你想上传一个文件，你也许应该查看`<input type="file"`HTML 的元素，或者也许是 ASP.NET 中的[`FileUpload`控件](http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.fileupload.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:47:52.707

这是行不通的，因为`FolderBrowserDialog`弹出的唯一方法是`Server-Side`程序将永远等待输入。

您应该使用更适合您需要的[Web**控件。**](http://msdn.microsoft.com/en-GB/library/system.web.ui.webcontrols.fileupload.aspx)

**来自 MSDN 示例**

```
 protected void UploadButton_Click(object sender, EventArgs e)
{
    // Save the uploaded file to an "Uploads" directory
    // that already exists in the file system of the 
    // currently executing ASP.NET application.  
    // Creating an "Uploads" directory isolates uploaded 
    // files in a separate directory. This helps prevent
    // users from overwriting existing application files by
    // uploading files with names like "Web.config".
    string saveDir = @"\Uploads\";

    // Get the physical file system path for the currently
    // executing application.
    string appPath = Request.PhysicalApplicationPath;

    // Before attempting to save the file, verify
    // that the FileUpload control contains a file.
    if (FileUpload1.HasFile)
    {
        string savePath = appPath + saveDir +
            Server.HtmlEncode(FileUpload1.FileName);

        // Call the SaveAs method to save the 
        // uploaded file to the specified path.
        // This example does not perform all
        // the necessary error checking.               
        // If a file with the same name
        // already exists in the specified path,  
        // the uploaded file overwrites it.
        FileUpload1.SaveAs(savePath);

        // Notify the user that the file was uploaded successfully.
        UploadStatusLabel.Text = "Your file was uploaded successfully.";

    }
    else
    {
        // Notify the user that a file was not uploaded.
        UploadStatusLabel.Text = "You did not specify a file to upload.";   
    } 
```

我不认为我能比他们解释得更好...

# php - 清除缓存以进行 PHP 语法检查

> ID：15791851
> 
> 赞同：0
> 
> 时间：2013-04-03T15:41:01.123
> 
> 标签：php

在我工作的公司，我们使用 Jenkins 对我们的 PHP 代码进行 CI。我们还使用 PHP CLI 语法检查来查看是否有任何语法错误。命令我们：

`$ php -l`

当一个文件是新的或编辑过的并且这个文件包含一个错误时，PHP 会正确地返回一个错误。第二次运行时，该文件以某种方式被缓存，并且错误不再显示。有没有办法清除这个缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:55:25.227

To answer my own question: The command was generated through an Ant build script. That script cached the result of `php -l`, because of the `<modified />` tag in build.xml file.

# visual-studio - 视觉工作室'iif函数'

> ID：15791853
> 
> 赞同：0
> 
> 时间：2013-04-03T15:41:12.087
> 
> 标签：visual-studio, visual-studio-2005

我正在 Visual Studio 中创建一个显示 4 项的报告：-

*   发票金额
*   支付的金额
*   未付金额
*   其中逾期

如此处所示： ![在此处输入图像描述](https://i.stack.imgur.com/T2b0L.png)

我要到期的是在数据集中的字段上创建一个计算，以在未支付金额超过 30 天时显示我的项目“过期”的金额。

我的数据集在这里： ![在此处输入图像描述](https://i.stack.imgur.com/qpUSd.png)

我试图做这样的事情：

```
=iif((Sum(Fields!DaysOutstanding.Value, "Services")>30, Sum(Fields!BalanceOutstanding.Value, "Services")) 
```

但这显然是行不通的。

谁能指出我正确的方向？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:44:43.467

你需要三个参数。你只有两个。

[http://msdn.microsoft.com/en-us/library/27ydhh0d%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/27ydhh0d%28v=vs.80%29.aspx)

```
Public Function IIf( _
   ByVal Expression As Boolean, _ 
   ByVal TruePart As Object, _ 
   ByVal FalsePart As Object _ 
) As Object 
```

我不确定你为什么在这里使用 SUM。对于您的情况，您需要通过数据来执行以下操作（显然是伪代码）：

```
 iif(
  If the DaysOutstanding.Value is greater than 30,
  then add balanceoutstanding.value to overdueunpaid.value,
  else add nothing
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:27:49.887

以下代码解决了我的问题

```
=iif((
Fields!DaysOutstanding.Value) > 30,
(Fields!BalanceOutstanding.value)  + (Fields!OverdueUnpaid.Value),
 nothing
 ) 
```

# scala - 如何编译我的代码，使其成为可执行的 Jar 并可以在任何计算机上打开和使用？

> ID：15791856
> 
> 赞同：0
> 
> 时间：2013-04-03T15:41:24.820
> 
> 标签：scala, compiler-construction, jar, executable-jar

我有这段代码在 scala REPL 中使用时可以完美运行，但是当我尝试使用 scalac 编译它时，我得到了一堆错误。

这是我的代码（在这里发布太长） - [http://pastebin.com/rkKL3xjH](http://pastebin.com/rkKL3xjH)

我得到的错误是：

```
 error: expected class or object definition 
```

如何编译我的代码，以便它可以在另一台计算机上打开并执行？我是 scala 和编程的新手，所以我还不知道如何做到这一点，也不知道我的文件中需要包含什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:08:02.100

您可以使用 SBT 插件进行组装来做您想做的事。

按照此处的说明进行操作：[https](https://github.com/sbt/sbt-assembly) ://github.com/sbt/sbt-assembly 。

默认情况下，它生成的 fat jar 将包含您在刚刚安装了 java 的计算机上运行 jar 所需的所有类文件。

当然，这一切都基于您创建 SBT 项目并将 SBT 用作构建工具这一事实。

为了使用 SBT 作为构建工具，您可以按照此处的说明进行操作：

[https://github.com/sbt/sbt](https://github.com/sbt/sbt)

编辑：

除了使用 sbt 之外，您还必须以具有“主要”功能的标准方式来构建您的应用程序。

```
object HelloWorld {
  def main(args: Array[String]) {
      //Execute code here
  }
} 
```

虽然这很可怕，但您可能只需将整个程序粘贴到主程序中，它就*可以*工作。

# javascript - Jquery字符数未显示

> ID：15791858
> 
> 赞同：0
> 
> 时间：2013-04-03T15:41:34.227
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, acts-as-commentable

Jquery 字符数没有显示在我的评论表单下，即使它们适用于我的其他表单。任何帮助表示赞赏。

_form.html.erb

```
<%= form_for [@commentable, @comment] do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <div class="field">
    <%= f.text_field :title %>
    <div class="titlecountdown"></div>
    <%= f.text_area :content %>
    <div class="contentcountdown"></div>
  </div>
  <div class="actions">
    <%= f.submit "Post", class: "btn btn-large btn-primary" %>
  </div>
<% end %> 
```

custom.js.coffee

```
$ ->
  updateTitleCountdown = ->
    remaining = 20 - jQuery("#comment_title").val().length
    jQuery(".titlecountdown").text remaining + " characters remaining"

  jQuery ->
    updateTitleCountdown()
    $("#comment_title").change updateTitleCountdown
    $("#comment_title").keyup updateTitleCountdown

$ ->
  updateContentCountdown = ->
    remaining = 120 - jQuery("#comment_content").val().length
    jQuery(".contentcountdown").text remaining + " characters remaining"

  jQuery ->
    updateContentCountdown()
    $("#comment_content").change updateContentCountdown
    $("#comment_content").keyup updateContentCountdown 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:52:46.910

```
jQuery(document).ready(function($) {
    updateCountdown();
    $('.question').change(updateCountdown);
    $('.question').keyup(updateCountdown);
});

function updateCountdown() {
    var remaining = 100 - jQuery('.question').val().length;
    jQuery('.countdown').text(remaining + ' characters remaining.');
} 
```

这对我来说非常有效，虽然不是在咖啡脚本中。

# antlr4 - Antlr4 优先级和关联性

> ID：15791859
> 
> 赞同：4
> 
> 时间：2013-04-03T15:41:43.790
> 
> 标签：antlr4

我对解析诸如`(B32|B5)&B31`. 我的目标是找出这个表达式被评估的顺序。所以我的预期结果将是`B2`那时`|B5`也是最后`&B31`

我的表达式可以有特殊字符。与`*`,`=`和`{`. 所以 exp 可以是`B31*{A1,A2}|B35`. 在这种情况下，我希望`B31*{A1,A2}`作为一个令牌先被评估，然后`B35`.

我创建了以下语法。

```
grammar Expr;   

prog: (expr NEWLINE)* ;

expr: '(' expr ')'
| expr ('&'|'|') expr
| ID
;

NEWLINE:'\r'? '\n' ; 

// lexer/terminal rules start with an upper case letter
ID
  :
    (
    'a'..'z'
    | 'A'..'Z'
    | '0'..'9' | ' '
    | ('+'|'-'|'*'|'/'|'_')
  | '='
  | '~'
  | '('
  | ')'
  | '{'
  | '}'
  | ','
  )+ 
  ;

WS : [ \t]+ -> skip ; 
```

我编译了上面`Expr.g4`的内容，`-visitor`以便生成访问者。然后我创建了一个访问者类来遍历每个表达式并将其捕获到一个列表中。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Stack;

import org.antlr.v4.runtime.tree.ParseTree;

public class EvaluationVisitor extends ExprBaseVisitor<Value> {

  public List<EvalExpression> exprList = new ArrayList<EvalExpression>();
  public HashMap<String, EvalExpression> evalExprMap= new HashMap<String, EvalExpression>();

  public Value visitProg(ExprParser.ProgContext ctx) {
    return visitChildren(ctx);
  }

  public Value visitExpr(ExprParser.ExprContext ctx) {
    if (ctx.getChildCount() == 3) {
      String exprEval = ctx.getText();
      String leftExpr = ctx.getChild(0).getText();
      String token = ctx.getChild(1).getText();
      String rightExpr = ctx.getChild(2).getText();
      //System.out.println(" exprEval =" + exprEval);
      //System.out.println("<" + leftExpr + "> " + token + "  <" + rightExpr + ">");
      EvalExpression evalExprObj = new EvalExpression(exprEval, leftExpr, token, rightExpr);
      exprList.add(evalExprObj);
      evalExprMap.put(exprEval, evalExprObj);
    }
    return visitChildren(ctx);
  }

  public List<EvalExpression> getExprList() {
    return exprList;
  }

  public void setExprList(List<EvalExpression> exprList) {
    this.exprList = exprList;
  }

  public HashMap<String, EvalExpression> getEvalExprMap() {
    return evalExprMap;
  }

  public void setEvalExprMap(HashMap<String, EvalExpression> evalExprMap) {
    this.evalExprMap = evalExprMap;
  }

} 
```

`EvalExpression`类如下

```
public class EvalExpression {
  private String expressionEvaluated;
  private String leftExpr;
  private String token;
  private String rightExpr;

  public EvalExpression(String expressionEvaluated, String leftExpr, String token,
      String rightExpr) {
    super();
    this.expressionEvaluated = expressionEvaluated;
    this.leftExpr = leftExpr;
    this.token = token;
    this.rightExpr = rightExpr;
  }

  public String getExpressionEvaluated() {
    return expressionEvaluated;
  }

  public void setExpressionEvaluated(String expressionEvaluated) {
    this.expressionEvaluated = expressionEvaluated;
  }

  public String getLeftExpr() {
    return leftExpr;
  }

  public void setLeftExpr(String leftExpr) {
    this.leftExpr = leftExpr;
  }

  public String getToken() {
    return token;
  }

  public void setToken(String token) {
    this.token = token;
  } 
```

`Value`如下

```
public class Value {

    public static Value VOID = new Value(new Object());

    final Object value;

    public Value(Object value) {
        this.value = value;
    }

    public Boolean asBoolean() {
        return (Boolean)value;
    }

    public Double asDouble() {
        return (Double)value;
    }

    public String asString() {
        return String.valueOf(value);
    }

    public boolean isDouble() {
        return value instanceof Double;
    }

    @Override
    public int hashCode() {

        if(value == null) {
            return 0;
        }

        return this.value.hashCode();
    }

    @Override
    public boolean equals(Object o) {

        if(value == o) {
            return true;
        }

        if(value == null || o == null || o.getClass() != value.getClass()) {
            return false;
        }

        Value that = (Value)o;

        return this.value.equals(that.value);
    }

    @Override
    public String toString() {
        System.out.println("---------Inside Value to String --------------");
        return String.valueOf(value);
    }
} 
```

现在最后我写了一个测试程序来打印出令牌列表和我需要查看它们的顺序

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import java.util.Stack;

import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.Token;
import org.antlr.v4.runtime.TokenStream;
import org.antlr.v4.runtime.tree.ParseTree;
import org.antlr.v4.runtime.tree.ParseTreeWalker;
import org.antlr.v4.runtime.tree.TerminalNode;

import com.inmedius.antlr.ExprLexer;
import com.inmedius.antlr.ExprParser;
import com.inmedius.antlr.eval.EvalExpression;
import com.inmedius.antlr.eval.EvaluationVisitor;
import com.inmedius.antlr.eval.ExpressionTestVisitor;

public class EvalExprTest {

  /**
   * @param args
   */
  public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub
    try {
      //String src = "(B1=p & A4=p | A8=p) | (A6=p | ~A5=c)";
      String src = "(B32|B5)&B31";

      CharStream stream = (CharStream) (new ANTLRInputStream(src));
      ExprLexer lexer = new ExprLexer(stream);
      TokenStream tokens = new CommonTokenStream(lexer);

      ExprParser parser = new ExprParser(new CommonTokenStream(lexer));
      ParseTree tree = parser.prog();

      if (!src.contains("&") && !src.contains("|")) {
        System.out.print("exp="  + src);
      } else {
        EvaluationVisitor visitor = new EvaluationVisitor();
        visitor.visit(tree);

        List<EvalExpression> exprOrderList = visitor.getExprList();
        HashMap<String, EvalExpression> evalMap = visitor.getEvalExprMap();
        for (EvalExpression eval : exprOrderList) {
          System.out.println(" Expr =" + eval.getRightExpr() + " "
              + eval.getToken());
          if (evalMap.get(eval.getLeftExpr()) == null) {
            System.out.println(" Expr =" + eval.getLeftExpr());
          }
        }
      }

    } catch (Exception e) {
      e.printStackTrace(System.out);
      throw e;
    }

  }

}

      public String getRightExpr() {
        return rightExpr;
      }

      public void setRightExpr(String rightExpr) {
        this.rightExpr = rightExpr;
      }

    } 
```

我的问题是当我运行`EvalExprTest`并在程序中使用`String src = "(B32|B5)&B31"`. 我得到以下结果。

```
 Expr =B31 &
 Expr =B5) |
 Expr =(B32 
```

我的目标是获得优先级，以便首先评估括号中的表达式。但它似乎总是从最右边的表达式穿过树，在这种情况下它是`B31`。

有人可以帮忙吗？语法正确吗？访客实现是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:14:14.510

目前`(`和`)`是 中允许的字符`ID`，因此您的示例字符串将被分解为以下标记：

*   `(B32`
*   `|`
*   `B5)`
*   `&`
*   `B31`

另一个问题是您没有区分表达式规则中的优先级`&`和中的优先级。`|`这意味着表达式 like`X|Y&B`将等同`(X|Y)&B`于您的语言，其中大多数语言会优先`&`使其等同于`X|(Y&B)`.

要更正这些项目，您可能需要执行以下操作。

1.  从规则中删除`'('`和。如果您想要命名令牌，可以选择添加以下内容。`')'``ID`

    ```
    LPAREN : '(';
    RPAREN : ')'; 
    ```

2.  更正`expr`规则分别处理`&`和`|`。

    ```
    expr: '(' expr ')'
        | expr '&' expr
        | expr '|' expr
        | ID
        ; 
    ```

# node.js - NodeJs Hapi 框架文档生成器不工作

> ID：15791865
> 
> 赞同：2
> 
> 时间：2013-04-03T15:42:06.183
> 
> 标签：node.js

我正在使用 nodejs hapi 框架。到目前为止，一切都很好，我想尝试一下文档生成器。我知道它说它仍然可能会改变，但他们网站上的代码对我不起作用（[http://spumko.github.com/resource/api/#documentation-generator](http://spumko.github.com/resource/api/#documentation-generator)）：

```
// Create Hapi server
var http = new Hapi.Server('0.0.0.0', 8080);

var loutConfig = { plugin: { indexTemplatePath: './templates' } };
http.plugin().require('lout', loutConfig, function () {
    http.start(); 
}); 
```

这会引发类型错误，抱怨 plugin() 不是 http（hapi 服务器）的函数。

有什么想法吗？

谢谢，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:22:16.710

我认为您需要在引用 http.plugin 时删除括号，如下所示：

```
// Create Hapi server
var http = new Hapi.Server('0.0.0.0', 8080);

var loutConfig = { plugin: { indexTemplatePath: './templates' } };
http.plugin.require('lout', loutConfig, function () {
    http.start(); 
}); 
```

# css - 尝试在预告片中显示有限数量的图像

> ID：15791866
> 
> 赞同：2
> 
> 时间：2013-04-03T15:42:09.440
> 
> 标签：css, css-selectors

我尝试使用伪选择器为我的网站设置样式，以在我的预告片中显示有限数量的元素（图像）。我一直在通过谷歌做一些研究，找到了使用 nth-child(n) 的最合适的方法。但是我找不到为什么它对我不起作用。如果我使用 nth-child(n+5)，它应该显示前四个图像，不应该显示所有其他图像。它根本不起作用。我认为这是好方法还是问题更复杂？

代码是这样的：

```
.node-teaser .field-type-image  img {
    float: left;
    width: 24.6%;
    padding:0.2%;
}

.node-teaser .field-type-image img:nth-child(n+5){
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:12:18.090

您应该在`-`符号前面使用（负号）`n`来仅指定一些元素。

在您的情况下，如果您只想显示 4 个元素：

```
.node-teaser .field-type-image img{
    display: none;
}

.node-teaser .field-type-image img:nth-child(-n+4){
    display: block;
} 
```

为什么？

> 使用“-n”值似乎有点奇怪，因为如果最终结果为负，则不匹配，因此您需要添加到等式以使其再次恢复为正。事实证明，这是一种相当聪明的技术。您可以使用它通过“-n+3”选择“前 n 个元素”：
> 
> -0 + 3 = 3 = 第三个元素
> 
> -1 + 3 = 2 = 第二个元素
> 
> -2 + 3 = 1 = 第一个元素
> 
> -3 + 3 = 0 = 不匹配

在此处阅读完整的非常好的文章：http: [//css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

# google-app-engine - 部署到 Google App Engine 时忽略 buildout $app/dist/ 文件夹中的 pycrypto

> ID：15791868
> 
> 赞同：0
> 
> 时间：2013-04-03T15:42:10.453
> 
> 标签：google-app-engine, virtualenv, buildout

我在使用 dev_appserver 1.7.6 在带有 buildout 的 virtualenv 中部署我一直在本地开发的应用程序时遇到了一些困难。当我部署时，我的本地 dist 文件夹也被部署，这会导致与应用引擎提供的库发生冲突

我的应用程序依赖于 pycrypto，因此为了在本地运行它，我已将 pycrypto 添加到我的 buildout.cfg 中。这会在 $app/dist/Crypto 中安装 pycrypto。一切都在本地运行良好且花花公子，但是当我部署 $app/dist 文件夹时也部署了。然后，App Engine 在尝试导入 DES3 时抱怨 ImportError

```
File "/path/to/my/app/dist/Crypto/Cipher/DES3.py", line 67, in <module>
    from Crypto.Cipher import _DES3
ImportError: dynamic module does not define init function (init_DES3) 
```

您可以从错误日志中看到它正在尝试使用 $app/dist 中的 pycrypto 而不是 google 提供的版本。

如何在 virtualenv 中使用 pycrypto 并仍然部署到 Google App Engine 而不必从我的 skip_files 部分评论/取消评论 dist/Crypto？

我现在只使用 python 几个月了，所以我认为由于缺乏环境经验，我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:42:19.047

事实证明，由于我对 buildout / virtualenv 的误解，我的本地设置非常糟糕。

解决方案是在我的 buildout.cfg中创建两个单独`parts`的 with 。`recipe = appfy.recipe.gae:app_lib`一部分是应用引擎在您部署但不在本地应用服务器中时包含的项目。这使用了`lib-directory`主应用程序路径的外部。第二部分也是一个`recipe = appfy.recipe.gae:app_lib`，但它使用`lib-directory`部署到应用程序引擎的代码文件夹内部。

# java - Java 中可靠的 JSON 字符串验证器

> ID：15791878
> 
> 赞同：10
> 
> 时间：2013-04-03T15:42:51.080
> 
> 标签：java, json

我需要一些可靠的 JSON 字符串验证器的帮助 - 一种接收字符串并检查它是否是有效 JSON 的方法。示例：如果我通过`{"color":"red"}`或`{"amount":15}`它将通过但类似的东西`"My invalid json"`不会。简而言之，我需要像 www.jsonlint.com 验证器一样可靠的东西。顺便说一句 - 我对反序列化为 java 对象不感兴趣，因为这不是我的要求。我可能会收到一个任意字符串，我所要做的就是验证它是否具有有效的 JSON 格式。

我已经在这个论坛上研究了几篇关于 java JSON 字符串验证的帖子。

到目前为止我做了什么：

我尝试使用这些类：`org.json.JSONObject`并`org.json.JSONArray`以下列方式：

```
private static boolean isValidJSONStringObject(String requestBody){
    try {
        new JSONObject(requestBody);
    } catch (JSONException jsonEx) {
        return false;
    }
    return true;
}

private static boolean isValidJSONStringArray(String requestBody) {
    try {
        new JSONArray(requestBody);
    } catch (JSONException jsonEx) {
        return false;
    }
    return true;
} 
```

但是，以下字符串（整行）仍然通过，它们不应该：

```
{"color":"red"}{"var":"value"}

[1,2,3][true,false] 
```

换句话说，当我在某些父对象中没有任何封装的情况下重复对象/数组时。如果您将这些行粘贴到 www.jsonlint.com 验证器中，它们都会失败。

我知道总是有一个正则表达式选项，但我认为由于 JSON 的递归性质而不能保证 100%，而且这些正则表达式将相当复杂。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:52:26.600

Gson 可以解决这个问题。这是一个例子：

```
public boolean isValid(String json) {
    try {
        new JsonParser().parse(json);
        return true;
    } catch (JsonSyntaxException jse) {
        return false;
    }
}

String json = "{\"color\":\"red\"}{\"var\":\"value\"}";
System.out.println(isValid(json)); 
```

请注意，Gson 确实允许对输入 JSON 进行一些宽大处理，这可能不是我们所希望的。例如，解析器会自动将不带引号的键转换为带引号的键。根据您的预期使用情况，这可能会或可能不会破坏交易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:58:23.290

这是我们目前的解决方案。使用两个不同的库（gson - 第一个私有方法和 jackson - 第二个私有方法）并不理想，但至少我们通过了所有的单元/集成测试。我敢打赌，我们可以只用杰克逊工具做我们需要的一切。

```
public static boolean isStringValidJSON(String jsonString) {
    return (isJSONStringObjectOrArray(jsonString) && isJSONStringParsable(jsonString));
}

private static boolean isJSONStringObjectOrArray(String jsonString) {
    try {
        JsonElement element = new JsonParser().parse(jsonString);

        return (element.isJsonObject() || element.isJsonArray());
    } catch (JsonSyntaxException jsonEx) {
        return false;
    }
}

private static boolean isJSONStringParsable(String jsonString) {
    try {
        org.codehaus.jackson.JsonParser parser = 
          new ObjectMapper().getJsonFactory().createJsonParser(jsonString);
        while(parser.nextToken() != null) {
        }
        return true;
    } catch (JsonParseException e) {
        return false;
    } catch (IOException e) {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-06-20T18:26:46.497

Paste your string [here](http://toolsmother.com/json-validator/). See the output.

EDIT:

The link above does not work anymore, [this](http://jsonlint.com/) is a good alternative.

# c# - C# 使用 RSA 加密 PHP 解密

> ID：15791890
> 
> 赞同：3
> 
> 时间：2013-04-03T15:43:17.320
> 
> 标签：c#, php, rsa, phpseclib

我正在尝试在 C# 和 PHP 之间构建一个简单的 RSA 加密解密过程。我已经使用 phpseclib( [http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/) ) 完成了 PHP 中的加密和 C# 中的 decrpyt。但是，我在第 2103 行收到“C:\xampp\htdocs\Crypt\RSA.php 中的解密错误”这部分：

```
if ($lHash != $lHash2) {
        user_error('Decryption error', E_USER_NOTICE);
        return false;
    } 
```

C# 中的加密我使用了这组代码：

```
RSACryptoServiceProvider rsaCryptoServiceProvider = new RSACryptoServiceProvider(dwKeySize);
        rsaCryptoServiceProvider.FromXmlString(publickey);
        int keySize = dwKeySize / 8;
        byte[] bytes = Encoding.UTF32.GetBytes(inputString);
        // The hash function in use by the .NET RSACryptoServiceProvider here is SHA1
        // int maxLength = ( keySize ) - 2 - ( 2 * SHA1.Create().ComputeHash( rawBytes ).Length );
        int maxLength = keySize - 42;
        int dataLength = bytes.Length;
        int iterations = dataLength / maxLength;
        StringBuilder stringBuilder = new StringBuilder();
        for (int i = 0; i <= iterations; i++)
        {
            byte[] tempBytes = new byte[(dataLength - maxLength * i > maxLength) ? maxLength : dataLength - maxLength * i];
            Buffer.BlockCopy(bytes, maxLength * i, tempBytes, 0, tempBytes.Length);
            byte[] encryptedBytes = rsaCryptoServiceProvider.Encrypt(tempBytes, true);
            // Be aware the RSACryptoServiceProvider reverses the order of encrypted bytes after encryption and before decryption.
            // If you do not require compatibility with Microsoft Cryptographic API (CAPI) and/or other vendors.
            // Comment out the next line and the corresponding one in the DecryptString function.
            Array.Reverse(encryptedBytes);
            // Why convert to base 64?
            // Because it is the largest power-of-two base printable using only ASCII characters
            stringBuilder.Append(Convert.ToBase64String(encryptedBytes));
        }
        string ciphertext = stringBuilder.ToString(); 
```

和我的基本 PHP 代码来 decrpyt：

```
$rsa->loadKeyfromXML($privatekey);  
$ciphertext = file_get_contents('cipher.txt');
$ciphertext = base64_decode(strrev($ciphertext));

//$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);

$plaintext = $rsa->decrypt($ciphertext); 
```

我试过 PKC1 它还在 Crypt/RSA.php 中给出了另一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:57:02.940

是的，我自己找到了解决方案。我更改了加密行：

```
byte[] bytes = Encoding.UTF32.GetBytes(inputString);  ==> byte[] bytes = Encoding.Default.GetBytes(inputString); 
```

正如@Ryan 所说：

```
$ciphertext = base64_decode(strrev($ciphertext));  ==> $ciphertext = strrev(base64_decode($ciphertext)); 
```

感谢您的尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:16:06.443

由于您`Array.Reverse`在 C# 中进行操作，因此我冒昧地猜测`strrev`PHP 是不必要的。

此外，phpseclib 的 Crypt_RSA 没有`loadKeyfromXML`. 你从哪里得到的？做`$rsa->loadKey()`应该就够了。

最后，我的猜测是 PKCS1 是必需的。您使用它时遇到的错误是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:03:57.327

在我看来，在 PHP 中，您正在使用 Base64 编码的密文，将其反转，然后尝试对其进行 Base64 解码？我认为您想先对其进行解码，然后再反转结果。他们不是一回事。

首先是否有必要进行这种逆转，我不能说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T12:51:41.113

我不得不说我没有完全解决你的问题，但它似乎是如何在 C# 和 PHP 中结合 RSA 加密。这样做我也遇到了一些麻烦，对于仍然感兴趣的每个人，我编写了一个工作项目来执行此操作，C# 程序和 PHP 脚本都创建 RSA 密钥并交换它们，然后加密通信（参见[此处](http://csharp-tricks-en.blogspot.de/2015/04/rsa-with-c-and-php_27.html)）。

# d3.js - 如何让人力车将数据聚合到几周而不是几天

> ID：15791907
> 
> 赞同：2
> 
> 时间：2013-04-03T15:44:00.090
> 
> 标签：d3.js, rickshaw

我的 x,y 值由 unix 纪元时间（大约一年）和一个整数组成。我用这个绘制 x 轴：

```
 x_axis = new Rickshaw.Graph.Axis.Time
          graph: graph 
```

结果看起来不错，但刻度线是基于日期的（我假设），我在周末什么都没有发生时会下降。我想按周汇总。人力车是否可以将同一周内所有时间的 y 值组合在一起？

这是一个有效的 jsfiddle：http: [//jsfiddle.net/jTmWC/](http://jsfiddle.net/jTmWC/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:56:33.347

您可以使用以下代码每月汇总数据：

```
var aggregated = d3.nest()
               .key(function(d) { return (new Date(+d.x * 1000)).getMonth(); })
               .rollup(function(d) { return d3.sum(d, function(e) { return +e.y; }); })
               .entries(data)
               .map(function(d) { return {x: +d.key, y: d.values}; }); 
```

[在这里](http://jsfiddle.net/jTmWC/2/)更新了 jsfiddle 。请注意，我还更改了轴的时间单位——您可能需要稍微调整一下以使其显示您想要的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T15:05:48.620

如果您不想使用 d3 来转换数据，您可以随时选择使用 underscorejs。它在大多数 javascript 项目中非常容易理解和有用。我在人力车的截屏视频中做了完全相同的事情：http: [//tagtree.tv/d3-with-rickshaw-and-angular](http://tagtree.tv/d3-with-rickshaw-and-angular)

# visual-studio - Visual Studio 2012 Professional 中缺少 Windows 应用商店模板

> ID：15791910
> 
> 赞同：6
> 
> 时间：2013-04-03T15:44:04.617
> 
> 标签：visual-studio, cordova

我正在尝试按照入门指南为 Windows 8 构建 PhoneGap 应用程序。

指南说要打开模板：已安装 > 模板 > 其他语言 > javascript > windows 商店。但该模板不存在。

我使用的是 Visual Studio 2012 Professional 版本 11.0 Update 1。Visual Studio Express 在安装 Professional 之前已安装在此计算机上，但在安装 Professional 之前已卸载 Express。

我如何获得该模板？

![在此处输入图像描述](https://i.stack.imgur.com/0DSWR.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T19:14:03.190

不支持 Windows 7 操作系统，因此您不能使用这些模板。

引用 MS 文档：

> 仅 Windows 8.1 Preview 和 Windows 8 支持 Visual Studio 中的 Windows 应用商店应用开发。不支持 Windows 7。此外，开发人员许可证不适用于 Windows Server 2012，因此您无法在该操作系统上开发 Windows 应用商店应用程序。

[这也适用于 VS2013](http://msdn.microsoft.com/en-us/library/windows/apps/br211384.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T13:44:12.693

我正在运行 VS express 2012，发现我的 windows 商店模板也丢失了。我发现这个页面指向 Devenv 命令行调用来安装模板所以也许试试这个

[http://msdn.microsoft.com/en-us/library/0fyc0azh.aspx](http://msdn.microsoft.com/en-us/library/0fyc0azh.aspx)

我很想听听您如何一起使用 PhoneGap 和 Windows 8 应用程序...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T07:17:12.903

即使您在 Windows 8 中使用错过了 JS 模板，请在安装此库之前安装此库，关闭您的 VS2012 express

# javascript - 请解释 Date 对象类型转换

> ID：15791912
> 
> 赞同：0
> 
> 时间：2013-04-03T15:44:11.213
> 
> 标签：javascript

我刚刚在 SpiderMonkey 和 V8 javascript 引擎中发现了一个奇怪的行为。建议找到解释对每个人来说都是一所好学校

奇怪的工作代码：

```
 var x = (new Date()).setHours(24, 0, 0, 0);
 typeof x; // "number" 
```

按预期工作的代码：

```
var x = new Date(); 
x.setHours(24, 0, 0, 0);
typeof x; // "object"
x instanceof Date; // true 
```

如果我们找到原因，我们将了解 JavaScript 如何更好地工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:52:26.557

从[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours) setHours 设置日期并返回自 1970 年 1 月 1 日 00:00:00 以来的毫秒数。

因此，在第一个示例中，x 被分配了结果时间戳，它是一个数字。

为了更好地说明，做

```
var y = new Date(),
    x = y.setHours(24,0,0,0)

typeof x // number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:50:22.777

[`Date.setHours`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours)：

> [...] 返回自 1970 年 1 月 1 日 00:00:00 UTC 到更新的 Date 实例表示的时间的毫秒数。

在第一个片段中，`x`的值是一个表示时间戳的数字，因此它的类型是`number`。

```
var x = (new Date()).setHours(24, 0, 0, 0);
typeof x; // "number" 
```

您实例化一个 Date 对象并调用`setHours`它返回分配给的时间戳`x`。

* * *

对于第二个片段：

```
var x = new Date(); 
x.setHours(24, 0, 0, 0);
typeof x; // "object" 
```

`x`是一个`Date`对象，所以这也是预期的行为 - 看看[`typeof`operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof#Description)的可能返回值。

`x`是 的一个实例`Date`，它继承了`Date`构造函数的原型，因此`x instanceof Date`是`true`。

# twitter-bootstrap - 水平形式 - 设置控件标签宽度的最佳方法？

> ID：15791913
> 
> 赞同：6
> 
> 时间：2013-04-03T15:44:14.747
> 
> 标签：twitter-bootstrap

我是 twitter bootstrap 的新手，我正在使用水平表单。我的代码是这样的：

```
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="whatever">Whatever</label>
        <div class="controls">
            <select id="whatever" name="whatever">
                <option value="blah">Blah</option>
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="another">Another</label>
        <div class="controls">
            <select id="something" name="something">
                <option value="MyEntry">MyEntry</option>
            </select>
        </div>
    </div>
    <button type="submit" class="btn">Search</button>
</form> 
```

当我这样做时，表格看起来很好。唯一的问题是控制标签的长度太长了，所以标签左侧有很多空白。有没有办法缩短标签，所以我没有得到尽可能多的空白？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T18:33:10.727

我通过创建几个额外的表单类并根据我需要的大小使用它们来做到这一点。

这是我的CSS：

```
.form-small .control-label {
    width: 100px;
}

.form-small .controls {
    margin-left: 120px;
}

.form-medium .control-label {
    width: 180px;
}

.form-medium .controls {
    margin-left: 200px;
}

.form-xlarge .control-label {
    width: 240px;
}

.form-xlarge .controls {
    margin-left: 260px;
} 
```

所以如果我需要小标签：

```
<form class="form-horizontal form-small">

<!-- form body -->

</form> 
```

当然，您可以根据需要设置自己的宽度`.control-label`和宽度。`.controls`

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T13:25:19.630

```
<form class="form-inline" 
    ng-submit="addCategory(transaction, categoryText)" 
    style='display:inline;'>
    <span class="span2">
        <label style='display:inline; width:140px'>{{param}}</label>
    </span>
    <input type="text" ng-model="categoryText" size="20" placeholder="add category">
</form> 
```

我通常在“span”元素中跨越需要固定大小的元素，但这是为了生成重复的表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T15:47:02.343

尝试使用创建一个容器：

```
<div class="set_inline_block_class_selector">
 <label>
    <input type="radio" name="example_radio">Bootstrap radio button with controlled label
 </label>
</div>

<style>
 .set_inline_block_class_selector label{
     display: inline-block;
  }
</style> 
```

# javascript - 在javascript中生成顺序字符串

> ID：15791915
> 
> 赞同：0
> 
> 时间：2013-04-03T15:44:17.437
> 
> 标签：javascript

我正在制作一个 javascript 游戏，我想生成敌人，但这似乎不起作用

```
var Monster = function(x,y) {
    this.x = x;
    this.y = y;
};

var spawnMonsters = function() {
    for(var i = 0; i < spawn; i++) {
        var name = "Monster";
        name += i;
        name = new Monster(Math.random()*canvas.width-16,0); 
    }     
}; 
```

请帮忙？虽然我可以通过硬编码每个怪物名称来生成多个敌人。比如 Monster2=new Monster(Math.random()*canvas.width-16,0); Monster3=……等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:48:13.370

在 javascript 中，您不能像在 PHP 中那样使用“变量”。

你可以试试这个：

```
var monsters = [];

function spawn(num) {
  for (var i = 0; i < num; ++i) {
    monster.push(new Monster(Math.random() * canvas.width - 16, 0));
  }
} 
```

现在`monsters`将是您生成的所有怪物的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:47:56.167

您可以生成如下字符串：

```
function makeid()
{
var text = "";
var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

for( var i=0; i < 5; i++ )
    text += possible.charAt(Math.floor(Math.random() * possible.length));

return text;
} 
```

# highcharts - highcharts 添加带有图像的情节线标签

> ID：15791918
> 
> 赞同：2
> 
> 时间：2013-04-03T15:44:28.180
> 
> 标签：highcharts

使用 Highchart.js

是否可以将图像添加到情节线标签？如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/AOKAB.png)

我想添加此 (i) 图像和工具提示，但似乎（从[此处](http://api.highcharts.com/highcharts#yAxis.plotLines.label.text)）可用于此元素的有限 html 集不支持图像、div 或标题。

我认为将这个图像和工具提示添加到一个单独的 div（来自图表）上会更容易，找到标签的位置并使用绝对定位来添加这个层。但是我不能向这个元素添加任何 id 或其他东西，所以我找不到它的位置。

有人有类似的问题吗？

**我的解决方案：**

**CSS**

```
.infoMedia {
    position: absolute;
    z-index : 10000;
    width: 30px;
    height: 30px;
    background: url('../img/information.png') center no-repeat;
} 
```

**HTML**

```
<div class='infoMedia' style='left:0px;top:0px;'></div> 
```

**javascript**

```
function processHintPosition() // every resize, call this function
{
   $('.infoMediaENEM').css('top', 0);
        $('.infoMedia').css('left', 0);

        var this_container =  $('#container_line_graph'); 

        var this_container_width = $(this_container).width();
        var this_container_height = $(this_container).height();

        var this_margin_y = 60;
        var this_margin_x = 15;

        $('.infoMedia').css('top', $(this_container).offset().top + $(this_container).height() - this_margin_y);

        // POSITION X
        var x_val = $(this_container).offset().left + this_container_width - this_margin_x; 
        $('.infoMedia').css('left', x_val)

        // POSITION Y
        var this_media = parseFloat(lineGraph.linechart_data.prcMedia);
        var this_max = 100;

        var this_val_posy = Math.ceil( ( this_media * (this_container_height - this_margin_y) ) / this_max );

        var y_val = (($('.infoMedia').offset().top) - this_val_posy) - ($('.infoMedia').height()/2);
        $('.infoMedia').css('top', y_val);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:48:52.097

看起来有一个允许使用图像`useHTML`的配置选项。`yAxis` `labels`

[http://api.highcharts.com/highcharts#yAxis.labels.useHTML](http://api.highcharts.com/highcharts#yAxis.labels.useHTML)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:37:57.763

如果您想获取该元素并进一步修改它，您可以：

1.) 通过图表对象获取：

```
chart.yAxis[0].plotLinesAndBands[0]; 
```

2.) 或者，通过文本本身在 DOM 中找到它：

```
$('#container text:contains("Plot line")') // where container is the ID of the div container and "Plot line" is the text of the plot line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:15:16.823

您还可以使用渲染器并在任何位置添加图像：

[http://api.highcharts.com/highcharts#Renderer.image()](http://api.highcharts.com/highcharts#Renderer.image())

# drupal - Drupal Hook_Menu 访问通配符

> ID：15791920
> 
> 赞同：1
> 
> 时间：2013-04-03T15:44:34.877
> 
> 标签：drupal, menu, hook

我想得到我的通配符，但我不能......

我在 Hook_menu 中的链接：

```
$items = array();

$items['tv8/channel/%'] = array(
    'title' => 'Detail channel Tv8',
    'description' => 'Détails d\'une chaîne Tv8',
    'page callback' => 'tv8_program_channel_detail',
    'access arguments' => array('access content'),
    'page arguments' => array(1),
    'type' => MENU_NORMAL_ITEM,
);

return $items; 
```

我的链接是这样定义的：

```
"<a href='?q=tv8/channel/test'>" . $channel->name ."</a>" , 
```

这里是我的回调函数：

```
 function tv8_program_channel_detail($id)
{
    $content_admin_panel = $id.
                            "<div class='body'>" .
                                "<ul class='admin-list'>" .
                                    "<li>" .

                                        "<div class='description'>" .

                                        "</div>" .
                                    "</li>" .
                                    "<li>" .

                                        "<div class='description'>" .

                                        "</div>" .
                                    "</li>" .
                                "</ul>" .
                            "</div>";

    $content = array
    (
        'content' => array
        (
            '#markup' => t($content_admin_panel),
            '#prefix' => '<div class="admin-panel">',
            '#suffix' => '</div>',
        ),
    );

    return $content;
} 
```

但 id 返回“频道”而不是“测试”。

我认为我做错了，但在 drupal 文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:47:52.427

试试这个 ：

```
$items['tv8/channel/%'] = array(
    'title' => 'Detail channel Tv8',
    'description' => 'Détails d\'une chaîne Tv8',
    'page callback' => 'tv8_program_channel_detail',
    'load arguments' => array(2),
    'access arguments' => array('access content'),
    'page arguments' => array(1),
    'type' => MENU_NORMAL_ITEM,
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:52:10.357

在页面参数中，您需要将其更改为**array(2)**。根据您的路径数组（0）加载“tv8”，数组（1）加载“频道”和数组（2）加载参数％。所以代码如下：

```
$items['tv8/channel/%'] = array(
    'title' => 'Detail channel Tv8',
    'description' => 'Détails d\'une chaîne Tv8',
    'page callback' => 'tv8_program_channel_detail',
    'access arguments' => array('access content'),
    'page arguments' => array(2),
    'type' => MENU_NORMAL_ITEM,
); 
```

链接使用 php 函数 l() 也更好：

```
<?php print l($channel->name, 'tv8/channel/test'); ?> 
```

# c# - 自动从文本文件中定期提取 Bloomberg 数据，加载到数据库中，并从 Excel 中访问数据（类似于 BB 桌面 API）

> ID：15791921
> 
> 赞同：1
> 
> 时间：2013-04-03T15:44:41.487
> 
> 标签：c#, etl, bloomberg, excel-dna

目前，我们使用他们的 Excel 插件访问 Bloomberg 数据。这使我们能够将 BB 函数（例如 BDP、BDH）直接嵌入到基于 Excel/VBA 的分析中，并在必要时导入/刷新数据。

我们现在需要迁移到新的数据传输格式。即，代表我们涵盖的整个证券领域的文本文件，每天在预定时间在 BB 服务器上提供。

我们希望过渡到这种新格式，只需对我们的 Excel 公式进行少量或至少有限的更改。

因此，我们需要开发一种自动方法，用于按计划从文本文件中提取数据、将数据存储在适当的数据库中，以及从 Excel 中访问该数据库中的数据的方法。

对于这个问题，似乎有许多不同的解决方案，有些简单，有些不太简单，使用各种工具，需要不同级别的编程和开发。

例如，有人建议一个简单的 C# 脚本可以承担 ETL 部分的工作。然后我们可以使用 Excel-DNA 开发一个原生 Excel 插件来实现类似于 BDP/BDH 的功能，从数据库中提取数据。

然而，在我们走这条路之前，任何关于我们可能没有考虑过的简单解决方案的想法都将不胜感激。我们在数据建模方面几乎没有经验，因此有关应用程序/平台/编程语言的细节会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:41:34.427

这是您正在进行的概念性工作，但为了维持现状，您正在寻找复制 BDP / BDH 功能。

只要您在 ETL 过程中使用与 Bloomberg 数据相同的字段名称获取数据，那么自定义插件实际上可以与 BDP 一样工作，即`=BDP(Security, Field)`

当您请求数据时，您是否使用任何覆盖？因为您还需要考虑这一点。

就个人而言，在处理类似的事情时，我们采取了将尽可能多的工作转移到数据库的方法，并将特定的数据集输出到 Excel。这确实需要对您当前的设置进行重新设计，但这通常是有益的（并且可以这样出售）作为简化此过程的一种手段。

您可以考虑使用诸如 SSIS（SQL Server 集成服务）之类的东西将您的 ETL 放入数据库中。Excel / 其他应用程序的下游，世界就是你的牡蛎。

# c# - excel 互操作：NumberFormat #,##0.000 不显示预期结果

> ID：15791922
> 
> 赞同：0
> 
> 时间：2013-04-03T15:44:41.597
> 
> 标签：c#, excel, interop, number-formatting

我开发了一个名为 ExcelGenerator 的 C# 实用程序类，它可以生成要 Excel 的对象列表。我想以这种格式显示双数：3 288,523。

NumberFormat = "#,##0.000" 不显示预期结果

这是方法：

```
public void FormatNombre(string frm)
{
_excel.Selection.NumberFormat = frm;
} 
```

这是电话：

eg.FormatNombre("#,##0.000");

数字仍然显示如下：3288,522.542

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:54:48.070

You want to format 3288523.542 to 3 288,523?

Try something like this:

```
[>999]#" "###","###;# 
```

Edit: Just noticed looks like you are trying use French: Try this format.

```
# ##0,000 
```

# actionscript-3 - 全屏 Flash 内容中修饰键的状态

> ID：15791924
> 
> 赞同：1
> 
> 时间：2013-04-03T15:44:46.363
> 
> 标签：actionscript-3, keyboard, fullscreen

我有一个基于浏览器的小型工具，它在全屏时效果最好。我正在添加键盘快捷键，但我遇到了 Flash 的限制：它在全屏模式下会阻止大多数键盘访问。

该`SPACE`键确实有效，并且由于我只有几个半相关的命令，因此可以使它们都与空格键（`SPACE`,`alt+SPACE`等）一起使用。*但是*修改键也不会在全屏模式下发送！

有没有解决的办法？（读取修饰键状态的其他方式？）

（我听说过 flash player 11 中的交互式全屏模式，但这对我没有好处；大多数观众都在使用旧版本，我不想要“允许”消息框）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:08:34.843

恐怕 Flash Player 11.3 或更高版本的交互式全屏模式是您唯一的选择。否则，我相信您只能使用空格键和箭头键。但是，我不会太在意`Allow`进入全屏模式时出现在屏幕顶部的对话框，因为它现在已经很常见了一段时间 - 用户会期待它。

如果您想避免键盘限制和弹出对话框，您还可以考虑分发 AIR 应用程序而不是浏览器驻留的 flash 应用程序。

# php - 添加到有限大小的数组

> ID：15791926
> 
> 赞同：0
> 
> 时间：2013-04-03T15:44:54.303
> 
> 标签：php, arrays, foreach

我有一个非常复杂的情况，我就是想不出一个完美的逻辑。这是我需要做的：我通过 API 获取 10 篇文章，并且我需要以正确的发布顺序显示它们。问题是有时文章会自动更改其顺序。我需要做的是，无论他们是否更改订单或他们在我页面上的订单是否保持不变。例如如果 array('itemA', 'itemB', 'itemC', 'itemD') 变成 array('itemC', 'itemA', 'itemB', 'itemD')

我仍然想按原始顺序显示，即 itemA、B、C 和 D。

我尝试了 in_array() 函数来检查文章是否已经存在，但它似乎无法正常工作。

看一看：

```
$post_array = array();
    foreach ($Info AS $key => $post_array){
        if (!in_array($Info[$key]->postId, $post_array)){
            array_unshift($post_array, $Info[$key]);
            echo '<h2>Added</h2>' ;
        }else {
        echo '<h2>not Added</h2>' ;
        }
    } 
```

它总是显示添加，每次我运行它加上一个警告说

> 警告：array_unshift() 期望参数 1 是数组
> 
> 警告：in_array() 期望参数 2 是数组

我真正想做的是，最初将所有 10 篇文章添加到 $post_array，然后在开始时仅将新/唯一文章添加到 $post_array。并显示 $post_array 中的 10 个项目。

另外，我不认为我可以通过这个实现我想要的。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:50:37.933

似乎相当多余：

```
 if (!in_array($Info[$key]->postId, $post_array)){ 
```

在您运行它时，$post_array 已经与 $Info[$key] 的值相同，因为您的 foreach 是：

```
 foreach ($Info AS $key => $post_array){ 
```

假设那些 $Info[$key] 值是子数组，那么你的 in_array 调用是向后的，语法是

```
in_array($array, $value_to_find) 
```

但你在做

```
in_array($value_to_find, $array); 
```

# knockout.js - KnockoutJs ko.utils.arrayForEach

> ID：15791928
> 
> 赞同：1
> 
> 时间：2013-04-03T15:44:56.823
> 
> 标签：knockout.js

我试图让我的头脑围绕 Knockout 并遇到这种情况。

为什么这行不通？？

计算使用：ko.utils.arrayForEach

[http://jsfiddle.net/pradeepdhi/vX88g/](http://jsfiddle.net/pradeepdhi/vX88g/)

*删除以下内容的那一刻，它呈现没有任何错误（但当然也没有给出总数）

```
ko.utils.arrayForEach(this.children(), function(item) {
        total += parseFloat(ko.utils.unwrapObservable(item.age));
    }); 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:47:33.270

问题在于您的`this`范围。

检查这个[工作小提琴](http://jsfiddle.net/vX88g/1/)

或者

```
this.totalAge = ko.computed(function() {
        var total = 0;
        ko.utils.arrayForEach(this.children(), function(item) {
            total += parseFloat(ko.utils.unwrapObservable(item.age));
        });
        return total;
}, this); 
```

来自 ko[文档](http://knockoutjs.com/documentation/computedObservables.html)：

> 如果您想知道 ko.computed 的第二个参数是什么（我们在前面的代码中传递 this 的位），它在评估计算的 observable 时定义了 this 的值。如果不传递它，就不可能引用 this.children() [*在你的情况下*]。

# html - 在 CSS 中附加多个网络字体

> ID：15791929
> 
> 赞同：4
> 
> 时间：2013-04-03T15:45:00.783
> 
> 标签：html, css, caching, webfonts

谷歌最近在其 Webfont 集合中添加了一种阿拉伯字体。为了使用它，我必须使用`http://fonts.googleapis.com/earlyaccess/droidarabicnaskh.css`，这将是以下代码：

```
/* 
 * Droid Arabic Naskh (Arabic) http://www.google.com/webfonts/earlyaccess
 */
@font-face {
  font-family: 'Droid Arabic Naskh';
  font-style: normal;
  font-weight: 400;
  src: url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Regular.eot);
  src: url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Regular.eot?#iefix) format('embedded-opentype'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Regular.woff2) format('x-woff2'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Regular.woff) format('woff'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Regular.ttf) format('truetype');
}
@font-face {
  font-family: 'Droid Arabic Naskh';
  font-style: normal;
  font-weight: 700;
  src: url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Bold.eot);
  src: url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Bold.eot?#iefix) format('embedded-opentype'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Bold.woff2) format('x-woff2'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Bold.woff) format('woff'),
       url(//themes.googleusercontent.com/static/fonts/earlyaccess/droidarabicnaskh/v4/DroidNaskh-Bold.ttf) format('truetype');
} 
```

他们为什么要这样做？在 CSS 中附加多个网络字体是否有效？我认为每种字体大约为 50Kb。在这种情况下缓存将如何工作？

谢谢纳瓦尔
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:05:10.287

我不确定如何解释“多个网络字体”，所以我将回答两种可能性：

# 为什么同一字体的不同权重会有两个字体文件？

这就是字体的工作原理。目前，所有主要字体文件类型仅支持每个文件一种样式或字体粗细。

Arial 就是一个很好的例子。在 MS Word 等典型的文字编辑器中，您可能习惯于选择`bold`字体来更改其显示，这似乎只是在更改您的字体的某些内容，而不是切换到全新的字体。然而，在幕后，它实际上*正在*加载一个完全独立的字体文件。Windows 计算机带有`arial.ttf`、`arialbd.ttf`、`ariali.ttf`等，它们作为一个集合组成了 Arial、Arial Bold、Arial Italic 以及它们的所有组合。

通常，您必须为每种字体加载的字体文件总数等于您想要为该字体使用的不同样式的数量。

# 为什么 Webfonts 为每个给定的重量采购这么多不同的文件？

浏览器支持`font-face`目前是有限的，一些浏览器只支持某些文件类型。这就是为什么您的每个字体权重都为同一字体提供多种文件类型。要深入了解浏览器对不同文件类型的支持，[请查看这个方便的指南。](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)

但是当谈到网络字体时，还有更多要说的。如果你碰巧是一个注重效率的程序员，你可能会忽略使用谷歌建议的他们的 webfonts 实现，它看起来像这样：

```
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans|Lora|Roboto|Lobster+Two'> 
```

您可能会考虑从 URL 复制代码并将其粘贴到您的样式表中，希望通过删除 HTTP 请求来减少页面的加载时间。但情况可能不一定如此！

碰巧的是，Google webfont 服务器仅在通过元素调用时**为您提供所需的字体。**`link`

`.eot`因此，举个例子，如果您在 Firefox 中，您将永远不会收到该文件。它只为您提供可以在您的特定浏览器中使用的字体文件。最重要的是，对 webfont cdn 的调用速度非常快。

有关其工作原理的更多信息，请参阅[Google webfonts 文档。](https://developers.google.com/webfonts/docs/technical_considerations#Serving)

对于您的其他问题：

# 在 CSS 中附加多个网络字体是否有效？

它是最大效率的吗？嗯，不。为了尽可能高效，请坚持使用用户机器上已有的网络安全字体。但是考虑到今天的互联网速度，从 Google Webfonts 加载的性能影响应该不明显，所以我不会担心。

# 在这种情况下缓存将如何工作？

像往常一样，浏览器将处理缓存。由于现在许多网站都在使用 Google Web Fonts（尤其是 Open Sans），因此用户很有可能将字体缓存在他们的机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:55:19.397

如果我正确理解了您的问题，那么与其说是效率不如说是多样性..

目的是允许 font-family 使用不同的 font-faces `Droid Arabic Naskh`... 不是每个 font-family 都有一个[font-face 来表示每个 font-weight 或相关的 font-property](http://www.w3.org/TR/css3-fonts/#font-face-rule)并且自己添加这些规则可能会有风险，因为某些浏览器（ Safari iOS, Chrome 25) 可以将默认情况下已经是粗体/斜体的某些字形双斜体和双粗体。谷歌只是为这个家族提供字体。这些是唯一可以使用的面孔。

字体的缓存方式与其他 Web 资源的缓存方式相同

# openstack - 使用 openstack 仪表板创建卷时出错

> ID：15791931
> 
> 赞同：1
> 
> 时间：2013-04-03T15:45:02.533
> 
> 标签：openstack, cinder, volumes

在安装 openstack 后，尝试通过 openstack 仪表板创建卷时出现错误： `https://github.com/mseknibilel/OpenStack-Folsom-Install-guide/blob/master/OpenStack_Folsom_Install_Guide_WebVersion.rst`

实际上卷已经创建，可以用 cmd 显示`lvdisplay`。但是，出现了问题，`cinder/utils.py`因此仪表板显示并出现错误。

错误登录在`/var/log/cinder/cinder-volume.log`这里： http: [//pastebin.com/NSn493Dk](http://pastebin.com/NSn493Dk)

对此的任何想法表示赞赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T09:58:44.693

编辑

```
vim /etc/cinder/cinder.conf 
```

检查卷组是否与命令“vgdisplay”中的卷组相同

我的是“堆栈卷”

```
[lvmdriver-1]
volume_group = stack-volumes
volume_driver = cinder.volume.drivers.lvm.LVMISCSIDriver
volume_backend_name = lvmdriver-1 
```

如果使用 devstack

```
./unstack.sh
./rejoin_stack.sh 
```

当您重新启动机器或在 vgdisplay 下没有任何显示时：

```
sudo losetup -f /opt/stack/data/stack-volumes-backing-file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:56:30.827

我自己解决了。

这是由`iscsitarget`服务中断引起的。我使用的是 Ubuntu，所以只需使用 apt-get 重新安装服务，这将解决错误代码为 145 且带有 message 的问题`connection refused`。

命令在这里：

`apt-get install iscsitarget-dkms --reinstall`

`apt-get install iscsitarget --reinstall`

他们将重新安装内核模块`iscsi_trgt`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T05:01:34.060

此链接帮助我在 Ubuntu 18.04（LTS）上修复了相同的卷/实例创建问题。我收到 STATUS=ERROR 创建实例，因为 VOLUME 创建失败。

> 错误：无法对实例“Instance-Instance2”执行请求的操作，该实例有错误状态：请稍后再试[错误：实例 979693c2-faf9-4f62-9e4e-aab3d274721d 的构建中止：卷 8649e851-28c4-489f-即使在我们等待 5 秒或 2 次尝试之后，b115-0df5aa3e63a4 也没有完成创建。其状态为错误。]。

我发现 volume_group 显示 stack-volumes-lvmdriver-1 而 vgdisplay 显示`stack-volume-default`.

```
/etc/cinder/cinder.conf ( volume_group = stack-volumes-lvmdriver-1) 
vgdisplay output = volume_group = stack-volumes-default

UnInstall Openstack:
----------------
https://nguyentrihai.com/?p=481

Install Openstack again after updating the packages.
Install:
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade   
sudo apt-get install python-pip
sudo pip install --upgrade pip
sudo apt-get install -y python-systemd
sudo useradd -s /bin/bash -d /opt/stack -m stack
echo "stack ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/stack
sudo su -l stack 
git clone https://git.openstack.org/openstack-dev/devstack -b stable/queens
cd /opt/stack/devstack

local.conf entry:

[[local|localrc]]
############################################################
# Customize the following HOST_IP based on your installation
############################################################
HOST_IP=<Your system IP>
SERVICE_HOST=<Your System IP>
ADMIN_PASSWORD=devstack
DATABASE_PASSWORD=devstack
RABBIT_PASSWORD=devstack
SERVICE_PASSWORD=devstack
SERVICE_TOKEN=devstack

( On Ubutntu 18.04)
FORCE=yes ./stack.sh

VGDISPLAY and /etc/cinder/cinder.conf entry:

--- Volume group ---
  VG Name               stack-volumes-lvmdriver-1

stack@speedo:~$ grep -i Volume_group /etc/cinder/cinder.conf 
volume_group = stack-volumes-lvmdriver-1
stack@speedo:~$ 

If vgdisplay showing no entry , as mentioned in above post, use below command:

sudo losetup -f /opt/stack/data/stack-volumes-default-backing-file 
```

# java - ArrayList 元素的嵌入式排序

> ID：15791933
> 
> 赞同：0
> 
> 时间：2013-04-03T15:45:05.633
> 
> 标签：java, sorting, collections, arraylist

我需要根据两个参数`rank`和`dist`（嵌入式排序）对元素进行排序。首先，元素必须按照`rank`值降序排列。其次，这些有序元素必须根据`dist`值以降序重新排序。

例子：

```
rank = [8.0, 2.0, 8.0, 5.0, 2.0]
dist = [1.2, 2.2, 3.1, 1.1, 0.8]

Step 1: ordered rank = [8.0, 8.0, 5.0, 2.0, 2.0], indexes = [0, 2, 3, 4, 1]

Step 2: ordered dist = [3.1, 1.2, 1.1, 2.2, 0.8], indexes = [2, 0, 3, 1, 4] 
```

所以，最终结果是`indexes = [2, 0, 3, 1, 4]`。这个想法是，在第 2 步中，我们只能交换那些具有相同等级的元素。

我当前的代码版本如下：

```
public static void main(String[] args) {    
    ArrayList<Double> rank = new ArrayList<Double>();
    rank.add(8.0);
    rank.add(2.0);
    rank.add(5.0);
    rank.add(1.0);
    rank.add(2.0);
    rank.add(8.0);

    ArrayList<Double> dist = new ArrayList<Double>();
    dist.add(1.8);
    dist.add(2.8);
    dist.add(1.1);
    dist.add(2.1);
    dist.add(2.2);
    dist.add(1.5);

    ArrayList<ArrayList<Double>> result = new ArrayList<ArrayList<Double>>();
    result.add(0,rank);
    result.add(1,dist);

    System.out.println(result.get(0));

    ArrayList<Double> nstore1 = new ArrayList<Double>(result.get(0));
    Collections.sort(result.get(0));
    int[] indexes1 = new int[result.get(0).size()];
    for (int n = 0; n < result.get(0).size(); n++){
        indexes1[n] = nstore1.indexOf(result.get(0).get(result.get(0).size()-n-1));
    }
    System.out.println(Arrays.toString(indexes1));

} 
```

`dist`我被第2步卡住了。如何在考虑等级顺序的同时对元素进行重新排序？任何直观的例子都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:48:40.640

您需要创建自己的对象和[比较器](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)来帮助您进行排序，而不是使用原语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:49:32.523

好的，这就是我发明的：

```
package test;

import java.util.ArrayList;
import java.util.Arrays;

public class Test {

   public static void main(String[] args) {
      ArrayList<Double> r = new ArrayList<Double>();
      r.add(8.0);
      r.add(2.0);
      r.add(5.0);
      r.add(1.0);
      r.add(2.0);
      r.add(8.0);
      ArrayList<Double> d = new ArrayList<Double>();
      d.add(1.8);
      d.add(2.8);
      d.add(1.1);
      d.add(2.1);
      d.add(2.2);
      d.add(1.5);
      Double[] rank = r.toArray(new Double[r.size()]);
      Double[] dist = d.toArray(new Double[d.size()]);
      Arrays.sort(rank);
      int fromIndex = -1;
      int indexes = 0;
      double lastValue;
      for (int a = 0; a < rank.length; a++) {
         lastValue = rank[a];
         if (lastValue == rank[a]) {
            if (fromIndex == -1) {
               fromIndex = a;
            }
            indexes++;
         } else {
            Arrays.sort(rank, fromIndex, indexes);
            fromIndex = -1;
            indexes = 0;
         }
      }
      System.out.println("Rank: " + Arrays.toString(rank));
      System.out.println("Dist: " + Arrays.toString(dist));
   }
} 
```

我不确定这是否是您的想法，因此请告诉我是否可以。编写以递减方式对数组进行排序的比较器将是您的任务（因为您的问题是家庭作业问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:19:56.540

```
import java.util.Arrays;

public class SortObject {

    public static void main(String args[]) {

        Student[] students = new Student[4];

        Student one = new Student(8.0, 1.8);
        Student two = new Student(2.0, 2.8);
        Student three = new Student(5.0, 1.1);
        Student four = new Student(1.0, 2.1);

        students[0] = one;
        students[1] = two;
        students[2] = three;
        students[3] = four;

        // Arrays.sort(students, Student.StudentComparator); // to sort on basis
        // of both rank and dist

        Arrays.sort(students);

        int i = 0;
        for (Student temp : students) {
            System.out.println("fruits " + ++i + " : " + temp.getRank()
                    + ", Quantity : " + temp.getDist());
        }

    }
} 
```

复制并尝试这个。让我知道它是否解决了问题。

```
import java.util.Comparator;

public class Student implements Comparable<Student> {

    private Double rank;
    private Double dist;

    public Student(double rank, double dist) {

        this.rank = rank;
        this.dist = dist;

    }

    public Double getRank() {
        return rank;
    }

    public Double getDist() {
        return dist;
    }

    public int compareTo(Student student) {

        return (int) (student.rank - this.rank);

    }

    public static Comparator<Student> StudentComparator = new Comparator<Student>() {

        public int compare(Student student1, Student student2) {

            Double first = student1.dist;
            Double second = student2.dist;

            return (int) (second - first);

        }

    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:01:30.697

由于这显然是一个家庭作业问题，我不会给你一个完整的答案。

我同意其他人说你必须编写自己的`Comparator`s 的观点。我认为这实际上是一个很好的问题，可以迫使您以面向对象的方式思考。您需要首先考虑这个问题中的基本数据单元（基本 Java 类）是什么。提示：它与数据的呈现方式完全正交。

# javascript - jQuery parent() 函数不起作用

> ID：15791934
> 
> 赞同：0
> 
> 时间：2013-04-03T15:45:06.747
> 
> 标签：javascript, jquery, parent, markup

考虑以下 HTML

```
<fieldset>
    <legend>FOO</legend>
    <div> <!-- this is not static code...it's generated by jQuery-->
        <input type="checkbox" id="chkBox" />
    </div>
</fieldset> 
```

当我运行这个 jQuery

```
console.log($("#chkBox").parent()); 
```

我得到`[Fieldset]`而不是预期的`[div]`......我不知道为什么！？

**编辑：**这里只是一个简短的点......`<div>`标签是由jQuery生成的......所以实际上，字段集是父级（硬编码）......那么我将如何获得动态创建的父级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:06:06.013

您提到`<div>`标签是动态生成的。如果复选框也不是动态生成的，则会导致添加的`<div>`标签无法正确包装复选框。

在 Chrome 的**Inspect Element**工具或任何其他浏览器的等效工具（即 FireBug）中查看内容，并确保动态生成的内容会更改 DOM 以创建您在上述问题中发布的预期输出。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:48:11.513

您的 HTML 中有错字

```
<legend>FOO</ledgend> 
```

这可能会导致解析错误，这意味着您的 DOM 不是您认为的那样。

# c# - 是否可以以编程方式隐藏单选按钮列表的特定列表项？

> ID：15791936
> 
> 赞同：11
> 
> 时间：2013-04-03T15:45:11.970
> 
> 标签：c#, asp.net, gridview, radiobuttonlist

我在我的 aspx 页面中使用了 gridview。在其中我有一个列表，其中在一个水平对齐的单个单元格中有六个单选按钮。

我需要隐藏第一个单选按钮。如何以编程方式实现这一目标？

```
<asp:GridView ID="CrowdRatingGrid" runat="server" AutoGenerateColumns="false" AllowPaging="true" PageSize="4" OnPageIndexChanging="CrowdRatingGrid_PageIndexChanging" ViewStateMode="Enabled">

<PagerSettings Mode="Numeric" PageButtonCount="4" />
<Columns>
<asp:TemplateField>
   <HeaderTemplate>
    Rating
    </HeaderTemplate>
    <ItemTemplate>
     <asp:RadioButtonList runat="server" ID="Rating" SelectedValue='<%# Bind("rating_id") %>'
                            RepeatDirection="Horizontal">
                            <asp:ListItem Value="0" />
                            <asp:ListItem Value="1" />
                            <asp:ListItem Value="2" />
                            <asp:ListItem Value="3" />
                            <asp:ListItem Value="4" />
                            <asp:ListItem Value="5" />
                        </asp:RadioButtonList>
                    </ItemTemplate>
                </asp:TemplateField>
         </Columns>
        </asp:GridView> 
```

我需要隐藏 value=0 的列表项。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T15:58:56.200

[`Enabled`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.enabled.aspx)是的，您可以通过将其属性设置为来隐藏一个`false`：

```
Rating.Items[0].Enabled = false; 
```

* * *

根据 OP 的评论进行编辑。要完全摆脱它，您需要这样做：

```
Rating.Items.RemoveAt(0); 
```

然后当你想要它回来时，你需要这样做：

```
Rating.Items.Insert(0, "0"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T16:17:21.830

编辑：好的，我对此进行了更深入的研究，并了解当您将 RadioButtonList 控件设置为“水平”时 .NET 如何呈现它（它是一个`<td>`每个项目都带有 's 的表）。

尝试这个：

```
var bli = Rating.Items[ 0 ];
bli.Attributes.Add( "hidden", "hidden" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T07:13:50.740

它工作正常。

```
RadioButtonList.Items[index].Enable=True/False; 
```

前任：

```
rdTypePackage.Items[1].Enabled = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T10:49:21.133

```
radioListID.Items[index].Enabled = true/false; 
```

它将 100% 工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T21:19:01.477

```
ListItem li = Rating.Items(0);
Rating.Items.Remove(li); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-12T08:31:10.290

旧线程，尽管要实现这一点，您可以执行以下操作：

```
//Ensure the item is disabled    
rblRating.Items[0].Enabled = false;
//Ensure the item is not selected
rblRating.Items[0].Selected = false;
//next row of code is hiding your radio button list item through css
rblRating.Items[0].Attributes[HtmlTextWriterStyle.Visibility] = "hidden"; 
```

# php - 用php更新表字段

> ID：15791937
> 
> 赞同：0
> 
> 时间：2013-04-03T15:45:23.013
> 
> 标签：php, javascript, jquery, html

我创建了一个股票投资组合来尝试学习 PHP，并且我试图让价格字段每 30 秒自动更新一次。 **我可以显示价格，但它们都显示在同一行的一个价格字段中。我想在每一行上显示它们。我附上了它现在的样子的截图。**

我创建了投资组合表并填写了用户拥有的所有股票。这是显示投资组合的代码。

```
<table class="table">
        <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Shares</th>
        <th>Last Price</th>
        <th>Market value</th>
        </tr>
<?php foreach ($shares as $row): ?>

        <tr >
        <td><?php echo $row["symbol"];?></td>
        <td><?php echo $row["name"];?></td>
        <td><?php echo $row["shares"];?></td>
        <td id="price">$<?php echo number_format($row["price"],2);?></td>    
        <td>$<?php echo number_format($row["total"],2);?></td>
        </tr>

<?php endforeach; ?>

<tr>
    <td>Portfolio Value</td>
    <td></td>
    <td></td>
    <td></td>
    <td>$<?php echo number_format($value, 2);?></td>

</tr>
<tr>
    <td>Cash available</td>
    <td></td>
    <td></td>
    <td></td>
    <td>$<?php echo number_format($cash[0]["cash"], 2);?></td>
</tr>

</table>

<script type="text/javascript" src="js/update.js" ></script> 
```

然后，我创建了一个名为 update.js 的 javascript 文件，该文件每 30 秒调用一次 update.php 文件以更新价格。这是 update.js 的代码

```
$(document).ready(function(){
    var updater = setTimeout(function(){
        $('#price').load('update.php', 'update=true');
    },10);   
}); 
```

update.php 使用用户的股票创建一个 $shares 数组并将其发送到portfolio_update.php 以显示它。这是 update.php 的代码

```
<?php

require("../includes/functions.php"); 
require("../includes/config_update.php");

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);
$cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);
        //create array to store the shares
    $shares = array();

    //for each of the user info

    foreach($rows as $row){

        $stock = lookup($row["symbol"]);

        if($stock !== false){

            $shares[] = array(

                "price" => $stock["price"],
                "total" => $row["shares"]*$stock["price"]
            );         
        }
    }
    $size = count($shares);
    $value = 0;
        for($i = 0; $i < $size; $i++){

            $value  += $shares[$i]["total"];             
        }      

            extract($shares); 

require("../templates/portfolio_update.php");

?> 
```

在portfolio_update.php 中，我正在显示价格，但它们都显示在一个价格字段中。我想在每一行上显示它们。这是portfolio_update.php 代码。

```
 <?php

            foreach ($shares as $rows ) {

            echo "<tr>";
            echo "<td>";
            echo number_format($rows["price"],2);  
            echo "</td>";           
            echo "</tr>";

            }               
    ?> 

<script type="text/javascript" src="js/update.js" ></script> 
```

![截屏](https://i.stack.imgur.com/dwoj8.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:38:17.530

`id`将您的 s更改为`class`es。HTML中不能有重复`id`的 s。并相应地修改 jQuery 中的选择器（`jQuery('.price')`）。

附带说明一下，update.php 的第 6 行和第 7 行看起来*很*容易发生[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。我看不到有什么`query`作用，所以我不确定。

# iphone - 将 iPhone 应用程序转换为通用应用程序

> ID：15791940
> 
> 赞同：1
> 
> 时间：2013-04-03T15:45:38.740
> 
> 标签：iphone, ios, objective-c, ipad

我正在尝试将我的 iPhone 应用程序转换为通用应用程序，因此我为 iPad 添加了一个新的 Storyboard。使用设备检查和代码修改现有的 VC 来处理 iPad 是否更好，或者我应该复制这些 ViewController 并修改它们以兼容 iPad？

谢谢！

编辑：

抱歉信息不足。我不确定我需要提供什么样的额外信息。我正在使用最新版本的 6.1。

除了将针对屏幕空间进行优化外，这些视图基本相同。这是结构：

1.  登录控制器（几乎完全相同，除了一个小细节）
2.  主视图控制器在 iPhone 中，它只是一个推送详细视图的 TableView（来自分页的 3 个 VC） 在 iPad 中，我想使用一个拆分视图，在一个屏幕上使用 TableView 和详细视图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:34:26.503

由你决定。就个人而言，我喜欢对相同的视图使用相同的视图控制器，即使它们彼此之间的关系不同。例如，TidBITS News 应用程序在 iPhone 上具有导航控制器、主视图（故事标题表）和详细视图（单个故事），但在 iPad 上包含主视图和详细视图的拆分视图控制器。有两个故事板，但只有一个 MasterViewController 类文件和一个 DetailViewController 类文件。现在，当然，这些文件包含一些条件代码（如果我们在 iPhone 上运行，则做一件事，如果在 iPad 上运行，则做另一件事）。我讨厌这样，但你能做什么？

如果您只是从 Master-Detail 模板开始创建一个新的 Universal 项目，我想您会看到它就是这样工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:08:15.273

由于您在 iPhone 上使用 TableView 并在 iPad 上使用 SplitViewController，因此您将需要不同的 ViewController 类。对于登录控制器，您可以为两个设备重用您的视图控制器。由于您能够在每个视图的基础上引用您的视图控制器，因此您可以选择对两个设备系列重用视图控制器有意义的位置。您可能需要考虑为登录视图控制器使用 .XIB，因为如果您使用 AutoLayout，您可能能够拥有单个视图定义。

# javascript - 使用 JavaScript 从 Dropbox 下载文件

> ID：15791947
> 
> 赞同：5
> 
> 时间：2013-04-03T15:46:03.917
> 
> 标签：javascript, dropbox, dropbox-api

## 我有

我有一个网站试图向客户提供一项服务，以便能够从 Dropbox 下载文件。为了简化开发，我使用[Dropbox 选择器](https://www.dropbox.com/developers/chooser)。为此，我启用了我希望从中下载的域，并将`<script>`Dropbox 本身建议的标签（带有相应的`data-app-key`）包含到我的 HTML 页面中。一切都很甜蜜。

## 问题

现在我需要下载用户选择的文件。 [Dropbox 选择器](https://www.dropbox.com/developers/chooser)似乎没有为此提供任何功能，它所做的只是检索有关文件的信息。在我的情况下，这是一个`direct link`, 来下载文件。

在我看来，要下载文件，我需要使用`Dropbox.Client`在[//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.9.1/dropbox.min.js的另一个 Dropbox javascript 库中定义的文件](http://cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.9.1/dropbox.min.js)

所以使用那个库我运行这样的代码：

```
//OPTIONS FOR DROPBOX CHOOSER
var options = {
        linkType: "direct",

        // THIS FUNCITON RUNS WHEN USER SELECTS SOMETHING
        // FROM DOPBOX_CHOOSER
        success: function (files) {

            // DEFINE APP KET FOR DROPBOX_CLIENT (KEY, SECRET...), WHICH I GET
            // BY CREATING NEW "CORE API" TYPE:Full Dropbox APPLICATION ON 
            // DROPBOX APP CONSOLE 
            var appKey = { key: 'APP KEY', secret: 'CLIENT SECRET', sandbox: true };

            //INIT CLIENT
            var client = new Dropbox.Client(appKey);

            //TRY TO AUTHENTICATE IT
            client.authenticate(function (error, client) {
                if (error) {
                    console.log(error);
                }
                if (client.isAuthenticated()) {

                    //READ FILES 
                    for (var i = 0; i < files.length; i++) {
                        var file = files[i];
                        client.readFile(file.link, function (error, data) {
                            if (error) {
                                return console.log(error);  // Something went wrong.
                            }

                            alert(data);  // data has the file's contents
                        });
                    }
                } else {
                    console.log("Error on authentication");
                }
            });

        },
        cancel: function () {

        }
    };

    //OPEN DROPBOX_CHOOSER
    Dropbox.choose(options); 
```

但这一切都没有报告我：

![在此处输入图像描述](https://i.stack.imgur.com/RbA5Z.png)

如果我*不打电话* `client.authenticate`，我将无法下载文件，因为收到“未授权错误”通知。

## 问题

我该如何解决这个问题。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T04:34:27.900

一个简单直接的解决方案是使用 XMLHTTP，如下所示

```
function readDropbox(sURL) 
{
    var oRequest = new XMLHttpRequest();
    oRequest.open("GET",sURL,false);
    oRequest.onreadystatechange = function(oEvent) 
    {  
        if (oRequest.readyState === 4) 
        {  
            if (oRequest.status === 200) 
            {  
                console.log(oRequest.responseText)  
            } 
            else  
            {  
                console.log("Error", oRequest.statusText);  
            }  
        } 
    } 
    oRequest.setRequestHeader("User-Agent",navigator.userAgent); 
    try 
    {
        oRequest.send(null)
    } 
    catch (err) 
    {
        alert(err);
    }
    if (oRequest.status == 200) 
    {
        return oRequest.responseText;
    }
    else 
    {
        alert("Error - File not found in Dropbox public folder");
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:10:30.023

您无需使用 Dropbox.js 从选择器返回的链接下载文件。Dropbox.js 是一个用于连接 Dropbox Core API 的库，它独立于选择器。client.readFile 函数旨在获取授权 Dropbox 帐户中文件的路径，而不是您拥有的文件的 URL。

由于您已经拥有不需要身份验证的所需文件的直接链接，因此您可以通过平台可用的任何方式直接下载它。（一个简单的例子可能是在你的终端中使用 curl。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T19:55:23.267

如果您想从客户端 javascript 代码访问 Dropbox 文件的内容，我建议您使用服务器端获取内容并将它们发送回客户端（使用 Ajax 似乎最优雅）。通常不可能从 javascript 代码访问当前域之外的任何 URL 的内容（例外是对外部 javascript 代码的引用）。

# jquery - 剔除检查绑定不会通过 jquery“更改”事件更改模型值

> ID：15791948
> 
> 赞同：1
> 
> 时间：2013-04-03T15:46:16.257
> 
> 标签：jquery, knockout.js

我在这里找到了这个[输入链接描述](https://stackoverflow.com/questions/7767635/knockoutjs-property-doesnt-update-when-changing-value-with-jquery)，但这对我没有好处。

我希望能够在不触发“点击”事件的情况下更改模型值。因此，现在当用户更改值（不在小提琴中）时，一些代码会生成“更改”事件。但是模型并没有改变它的价值。

所以我有一个

模型

```
 function AppViewModel() {
    //Common
    this.TimeType = ko.observable(0);
    }

$(document).ready(function () {
     viewModel = new AppViewModel();    
    ko.applyBindings(viewModel, $("#testId")[0]);

    $("#change").click(function () {
         $("#third").attr('checked', 'checked');
         $("#third").change();
         alert(viewModel.TimeType());
    });   
}); 
```

HTML

```
<div id="testId" class="holder main-holder">
        <div class="holder">
           <input checked="checked" data-bind="checked: TimeType" id="Time" name="Type" type="radio" value="0"><label for="Time" class=" ">First</label>
        </div>
        <div class="holder">
            </div><input data-bind="checked: TimeType" id="TimeWithTypeDay" name="Type" type="radio" value="1"><label for="TimeWithTypeDay">Second</label>
        </div>
        <div class="holder">
            <input id="third" data-bind="checked: TimeType" id="TimeWithDaysOfWeek" name="Type" type="radio" value="2"><label for="TimeWithDaysOfWeek" >Third</label>
        </div>
    </div>
            <input id="change" type="button" value ="Change"/> 
```

小提琴：

[http://jsfiddle.net/skiff/4Wnmu/3/](http://jsfiddle.net/skiff/4Wnmu/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:35:16.727

在与单选按钮的敲除检查绑定中，该属性应等于单选按钮的值。并且值始终是字符串。检查这个工作小提琴：

[**工作小提琴**](http://jsfiddle.net/4Wnmu/10/)。

*JS*

```
var vm = new AppViewModel();

$("#change").click(function () {
    vm.TimeType("2");
    alert(vm.TimeType());
});   

function AppViewModel() {
    this.TimeType = ko.observable("1");
}

ko.applyBindings(vm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:01:41.410

[那](http://jsfiddle.net/damienobringer/4Wnmu/7/)就是你要找的东西？

```
viewModel.TimeType.subscribe(); 
```

# html - 将文本框拉伸到页面的整个宽度，边距为 5px

> ID：15791951
> 
> 赞同：6
> 
> 时间：2013-04-03T15:46:26.783
> 
> 标签：html, css, input, width, margin

我正在创建一个简单的 HTML 文档，其中包含一个我打算用作Firefox 附加组件中[面板内容的表单。](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html)目前该文档包含一个标签和文本框，我希望它可以拉伸页面的整个宽度，两边的边距为 5px。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Phrase Indexer</title>
  <style type="text/css" media="all">
  body {
    font: 10pt arial, helvetica, sans-serif;
    padding: 0;
    margin: 5px;
    position: fixed;
    width: 100%;
  }
  div {
    width: inherit
  }
  #phrase {
    width: inherit;
  }
  </style>

</head>

<body>

<div>
<label for="phrase">Passphrase</label><br />
<input type="text" id="phrase" />
</div>

</body>

</html> 
```

这主要是有效的，除了我在右边缺少一个 5px 的边距 - 文本框一直延伸到页面的边缘。我怎样才能解决这个问题？

[这是我的问题的小提琴。](http://jsfiddle.net/NgXjW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:06:13.350

你可以这样做：

```
body
{
   font: 10pt arial, helvetica, sans-serif;
}

div
{
    padding: 0.5em;
}

div > *
{
    width: 100%;
} 
```

这是 JS Bin 演示：http: [//jsbin.com/utabul/1](http://jsbin.com/utabul/1)

* * *

更多信息：[设置 CSS 100% 宽度减去填充和边距](http://www.ikelin.com/set-css-width-100-percent-minus-padding-and-margin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:02:35.337

你应该试试盒子尺寸。我只是将边距添加到包装表单元素的 div 中，从正文中删除了位置并将 box-sizing 添加到输入中。

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box;         /* Opera/IE 8+ */

body {
  font: 10pt arial, helvetica, sans-serif;
  padding: 0;
  margin:0;
  /* position: fixed; */
}
div {
  display:block;
  margin:5px;
}
#phrase {
  width: 100%;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:51:53.827

你应该这样尝试：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Phrase Indexer</title>
  <style type="text/css" media="all">
  *{
      margin:0;
      padding:0;
  }
  body {
  }
  div {
  }
  #phrase {
    width: 100%;
    margin:5px;
  }
  </style>

</head>

<body>

<div>
<label for="phrase">Passphrase</label><br />
<input type="text" id="phrase" />
</div>

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:10:31.227

设置 body padding: 5px 而不是 margin，摆脱固定位置并将 div 宽度设置为 100% 而不是 body - [http://jsfiddle.net/xX8yA](http://jsfiddle.net/xX8yA)

```
body {
font: 10pt arial, helvetica, sans-serif;
padding: 5px;
}
div {
width: 100%;
}
#phrase {
width: inherit;
} 
```

# database - 从一组功能依赖项中识别 relvar 的键

> ID：15791957
> 
> 赞同：1
> 
> 时间：2013-04-03T15:46:48.603
> 
> 标签：database, functional-dependencies

目前在读数据库理论课，在讲解函数依赖时生病了。这门课程没有教科书，所以到目前为止我不得不使用谷歌。我有一个任务，给定一个 relvar 和一个函数依赖项列表，它要求：

*   识别 relvar 的键
*   将 revlar 分解为 3NF 中的 relvar

这是作业中的几个问题

```
a. R = ABCD, F = {AB>C, C>D, D>A}

b. R = ABCDE, F = {AB>C, C>D, D>B, D>E} 
```

至少密钥似乎是一个简单的过程，但我没有算法！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:37:17.717

我们可能在同一个班，因为我有同样的任务......

我确实在一个相关问题上找到了这个答案，这有助于我理解查找密钥的过程。希望能帮助到你。

[https://stackoverflow.com/a/10164535](https://stackoverflow.com/a/10164535)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:10:11.967

经过一些非常令人沮丧的搜索，终于找到了一个简单的方法！UHCL 的这位教授制作了一系列精彩的视频来解决这个主题：

[http://www.youtube.com/watch?v=s1DNVWKeQ_w](http://www.youtube.com/watch?v=s1DNVWKeQ_w)

他还涵盖了 2NF、3NF、BCNF：

[http://www.youtube.com/watch?v=nUbp9MRN0To](http://www.youtube.com/watch?v=nUbp9MRN0To)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:58:56.117

好吧，把所有东西都变成 2 个属性表，你就有了 5NF。胡乌扎！！

# javascript - 保存 JQuery UI droppable 的顺序

> ID：15791958
> 
> 赞同：1
> 
> 时间：2013-04-03T15:46:55.723
> 
> 标签：javascript, jquery, jquery-ui

根据给出的示例，我目前有一个基本的 Jquery UI 可放置购物车：http: [//jqueryui.com/droppable/#shopping-cart](http://jqueryui.com/droppable/#shopping-cart)

我的问题是我如何从本质上将已拖入购物车的项目转换为可发布的表单，该表单将项目保存在购物车中，以及它们所在的顺序。

我研究了对购物车项目进行排序，并将其放入隐藏的表单元素中，但我似乎无法序列化列表。

欢迎任何帮助/建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:57:12.127

您可以使用输入类型隐藏字段来包含已删除的项目并提交。为此，您需要编写一些 jquery 代码，以 Web 服务器期望的格式将删除的项目内容复制到隐藏字段值中。

格式可以是逗号分隔或 json 字符串或任何其他格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:57:21.097

可能不是最好的方法，但我一直为此填充隐藏的输入字段。我猜你可能知道如何进行编码，但如果需要我可以提供帮助。

```
// On drop of the items or onsubmit of form
// Create a <input type="hidden" id="id of your item" />
// Post that instead 
```

# watir-webdriver - 确保按钮被点击

> ID：15791959
> 
> 赞同：1
> 
> 时间：2013-04-03T15:46:56.900
> 
> 标签：watir-webdriver

我有一个按钮（type = "radio"），这个按钮上有 Javascript。
我使用 xpath 找到了按钮：

```
browser.element(:xpath, n2).wait_until_present  
browser.element(:xpath, n2).fire_event "onclick" 
```

假设我必须在一个循环中单击同一个按钮 100 次，并且 80%​​ 的时间都失败了。它有时可以正常工作。单击按钮后，当我向下移动浏览器进行其他单击时，此按钮本身不会单击（清除）。当我在那个页面上时，我需要这个按钮一直保持点击状态。

我尝试添加延迟，但没有帮助。有没有其他方法可以处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:50:09.677

Watir 提供了与单选按钮类型输入元素交互的特定方法，请参阅[http://rubydoc.info/gems/watir-webdriver/Watir/Radio](http://rubydoc.info/gems/watir-webdriver/Watir/Radio)

除非您别无选择，否则不要将 xpath 用作定位器，它丑陋、如果操作不当则易碎且难以理解。对于单选元素，您通常通过值或文本来识别

[--使用http://www.echoecho.com/htmlforms10.htm](http://www.echoecho.com/htmlforms10.htm)中的示例

设置 Cheese 收音机

```
browser.radio(:value => "Cheese").set 
```

要检查它的状态，请使用 .set？它将返回真假

```
puts browser.radio(:value => "Cheese").set? 
```

请注意，如果页面上有 javascript，取决于它采取的操作，它可能会取消设置收音机。但是，在您对该页面执行其他操作后，您始终可以让您的脚本检查它的状态。

# entity-framework - 实体框架 Fluent Mapping 可选一对一

> ID：15791961
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:03.547
> 
> 标签：entity-framework, mapping, fluent

我需要建立一个目前是一对多的关系：

```
public class Foo
{
    public int FooId { get; set; }
    public int? BarId { get; set; }
    ...
    public virtual Bar Bar { get; set; }
}

public class Bar
{
    public int BarId { get; set; }
    ...
    public virtual ICollection<Foo> Foos { get; set; }
}

public FooMap()
{
    HasKey(e => e.FooId);
    Property(e => e.FooId.IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    Property(e => e.BarId).IsOptional();
    ...
    HasOptional(e => e.Bar).WithMany(Foos).HasForeignKey(e => e.BarId);
}

public BarMap()
{
    HasKey(e => e.BarId);
    Property(e => e.BarId.IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    ...
    HasMany(e => e.Foos).WithOptional(e => e.Bar).HasForeignKey(e => e.BarId);
} 
```

然而，实际上，Bar 只能分配给单个 Foo。是否可以设置它，以便我在 Bar 中有一个 Foo 导航属性，而不是 Foos 的集合？我仍然希望我的表格呈现：

```
Foos
- FooId
- BarId (null)
- ...

Bars
- BarId
- ... 
```

我希望我的课程是：

```
Foo
- FooId
- BarId
- ...
- Bar

Bar
- BarId
- ...
- Foo 
```

我一直在摆弄 WithOptionalDependant 和 WithOptionalPrincipal，但找不到正确的组合。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:19:38.213

对可选的 1 : 1 关联进行建模的常用方法是 (in `FooMap`)

```
HasOptional(f => f.Bar).WithRequired(b => b.Foo); 
```

但它不会产生你想要的模型。它不需要`Foo.BarId`，因为`Bar.BarId`既是主键又是外键`Foo.FooId`。

如果你有`Foo.BarId`它应该有一个唯一的约束，以确保它只在 FK 关联中使用一次。所以你不妨使用已经可用的唯一字段，即主键。

**编辑**

我不清楚您是否希望关联的双方都是可选的。您可以通过 (in `BarMap`) 实现：

```
HasOptional(b => b.Foo).WithOptionalPrincipal(f => f.Bar)
                       .Map(m => m.MapKey("BarId")); 
```

这将为您带来您在帖子中显示的数据模型。

# touch - 带有触摸事件的 Webdriver

> ID：15791962
> 
> 赞同：3
> 
> 时间：2013-04-03T15:47:03.693
> 
> 标签：touch, webdriver

我想使用适用于 iOS iPad 或 Android 平板电脑的 Java 代码在 Selenium WebDriver 中使用触摸/点击事件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:06:51.777

是的，您可以使用 AndroidDriver 在 Android 设备上测试 Web 应用程序/网站。
链接：适用于 iOS 的[Android WebDriver](https://code.google.com/p/selenium/wiki/AndroidDriver)
，有适用于 iPhone 的 WebDriver
链接：[iPhone WebDriver](https://code.google.com/p/selenium/wiki/IPhoneDriver)
另外，请检查： [适用于移动浏览器的 WebDriver](https://code.google.com/p/selenium/wiki/WebDriverForMobileBrowsers)

因为，驱动程序用于自动测试 Web 视图/页面，它们没有开箱即用的触摸/点击事件，如原生应用自动化框架。
您应该尝试使用[jQuery Mobile](http://jquerymobile.com/) API 在网页上执行触摸/点击事件。使用selenium webdriver 的[JavascriptExecutor](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/JavascriptExecutor.html)并使用 executor 执行 jquery。
检查这个：[jQuery Mobile Tap](http://api.jquerymobile.com/tap/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:24:47.170

对于 Android TouchEvents 可用。

下面是一个代码片段，它可以在 Google 搜索结果页面上移动一个滑块以了解旧金山的天气情况。我不能保证你会得到与谷歌决定的搜索查询相同的结果:) 但是我希望这个例子足以让你开始。

此示例使用 Junit 4 测试运行器，您可以调整代码以在 Junit 3 和其他测试运行器等中运行。

```
package org.example.androidtests;

import static org.openqa.selenium.support.ui.ExpectedConditions.visibilityOfElementLocated;

import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.Point;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.android.AndroidDriver;
import org.openqa.selenium.interactions.touch.TouchActions;
import org.openqa.selenium.support.ui.Wait;
import org.openqa.selenium.support.ui.WebDriverWait;

public class AndroidDemoTest {

    @Test 
    public void test() throws InterruptedException {
        AndroidDriver driver = new AndroidDriver();
        Wait<WebDriver> wait = new WebDriverWait(driver, 20);

        driver.get("http://www.google.co.uk");
        WebElement q = driver.findElement(By.name("q"));
        q.sendKeys("weather in san francisco");
        q.submit();

        WebElement slider = wait.until(visibilityOfElementLocated(By.className("wob_shi")));

        Point location = slider.getLocation();
        Dimension size = slider.getSize();

        // Find the center of this element where we we start the 'touch'
        int x = location.getX() + (size.getWidth() / 2);
        int y = location.getY() + (size.getHeight() / 2);

        new TouchActions(driver).down(x, y).move(150, 0).perform();

    }
} 
```

注意：如果您想在 iOS 和 Android 平台上进行测试，您将需要另一种方法，也许使用 JQuery Mobile，如您问题的另一个答案中所建议的那样。以下文章还介绍了如何使用 JQuery 模拟 iOS 的触摸事件[http://seleniumgrid.wordpress.com/2012/06/01/how-to-simulate-touch-actions-using-webdriver-in-iphone-or -ipad/](http://seleniumgrid.wordpress.com/2012/06/01/how-to-simulate-touch-actions-using-webdriver-in-iphone-or-ipad/)

# msbuild - 为多个 .vdproj 文件调用 devenv.exe

> ID：15791964
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:09.610
> 
> 标签：msbuild

我有一个包含多个 vdproj 文件的解决方案。我在 build.proj 文件中创建了一个项目组：

```
<ItemGroup>
<SetupProjectFiles Include="$(MSBuildProjectDirectory\**\*.vdproj">
</SetupProjectFiles> 
```

现在我想在其中的每一个上调用 devenv.exe？

```
<Exec Command="devenv.exe %(SetupProjectFiles)"></Exec> 
```

不行。。。请问有大神指点一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:07:18.470

有几件事值得仔细检查。检查此列表并查看下面的代码片段以获取工作示例。

1.  确保 vdproj 文件的路径正确。尝试将消息写入每个文件路径的日志，以便验证包含哪些 vdproj 文件。

2.  确保 vdproj 包含在解决方案的所需构建配置中；如果您正在构建“调试”配置，请确保在解决方案的构建[配置管理器](http://msdn.microsoft.com/en-us/library/kwybya3w%28v=vs.100%29.aspx)中为“调试”配置组合检查 vdproj。您可以全局设置它，也可以为每个`SetupProjectFiles`项目的元数据中指定的每个 vdproj 设置它（参见下面的代码片段）。

3.  确保使用完整的 devenv.exe 路径。您可以使用环境变量来帮助解决这个问题。

4.  确保[MSBuild Exec 任务语法](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)和[devenv.exe 语法](http://msdn.microsoft.com/en-us/library/xee0c8y7%28v=vs.100%29.aspx)正确，例如，使用`/build`开关和使用`&quot;`带有空格字符的环绕路径。

* * *

**编辑**：更正了代码中的错别字

* * *

```
<ItemGroup>
  <SetupProjectFiles Include="$(MSBuildProjectDirectory)\**\*.vdproj">
    <Configuration>Release</Configuration>
  </SetupProjectFiles>
</ItemGroup>

<PropertyGroup>
  <!-- VS110COMNTOOLS is for VS2012\. VS100COMNTOOLS is for VS 2010\. VS90COMNTOOLS is for VS2008 -->
  <DevEnvLocation>$(VS100COMNTOOLS)..\IDE\devenv.exe</DevEnvLocation>
</PropertyGroup>

<Message Text="vdproj file:  %(SetupProjectFiles.FullPath)" />

<Exec Command="&quot;$(DevEnvLocation)&quot; &quot;%(SetupProjectFiles.FullPath)&quot; /build &quot;%(SetupProjectFiles.Configuration)&quot;" /> 
```

# javascript - Javascript 循环范围和按钮

> ID：15791966
> 
> 赞同：0
> 
> 时间：2013-04-03T15:47:11.990
> 
> 标签：javascript, loops, button, dynamic, scope

所以我想要一个基于数组元素动态创建的按钮，但是在尝试将参数传递给 onclick 函数时遇到错误

```
function bringforward(maincourse){
  var newdiv = document.createElement('div');
  newdiv.id="Current class" 
  newdiv.style="background-color:#207420;height:440px;width:440px";

for(var i = 0;i<maincourse.gradingareas.length; i++){

 var gradeplace = document.createElement('p');
 gradeplace.id = grades;
 newdiv.appendChild(gradeplace);

 var button = document.createElement('button');
 button.innerHTML = 'Add Grade';
 button.onclick = function myfunc(){AddGrade(maincourse.gradingareas[i])};
 gradeplace.appendChild(button);
} 
```

AddGrade 函数是一个简单的警报，它将推送给定的值

```
function AddGrade(toadd){
var newgrade=prompt("Please enter a grade scaled up to 100 points","0 - 100");
if (newgrade!=null){
  toadd.grades.push(newgrade);
  }
} 
```

课程和评分区“对象”：

```
function Course(name, gradingareas, finalgrade) {
    this.name = name;
    this.gradingareas = gradingareas;  //array of gradingareas
    this.finalgrade = finalgrade;
}
function GradingArea(name, weight, grades){
    this.name = name;
    this.weight = weight;
    this.grades = grades;  //array of grades
} 
```

我认为将函数包装在 onClick 中可以解决范围问题，但我在 Addgrade 中收到错误消息，说它正在尝试访问未定义变量的字段。谢谢您的帮助

# javascript - 我正在尝试在 JQuery 滑块中为 DIV 设置动画

> ID：15791967
> 
> 赞同：0
> 
> 时间：2013-04-03T15:47:15.687
> 
> 标签：javascript, jquery, css, html

我有一个 JQuery 滑块，其中包含一个包含标题和简短摘录的 DIV 的主图像。你可以在[这里看到它的作用。](http://www.chazart.co.za/bulkmatech)

我想为包含标题和简短专家的 DIV 设置动画（从底部淡入淡出或盲目效果）。我已经设法让 DIV 在页面加载时淡入，但是一旦滑块启动，它就会再次消失。我怎样才能让它在每张幻灯片上淡入淡出？

这是DIV的CSS

```
#postsnip {
position:absolute;
margin-top:-70px;
width:843px;
padding:0px;
background-color:#135086;
opacity:0.8;
filter:alpha(opacity=80); /* For IE8 and earlier */
line-height:14px;
font-size:11px;
color:#fff;
height:40px;
padding:15px;
display: none; 
```

这是JS

```
$slider = {
context: false,
tabs: false,
timeout: 7000,      // time before next slide appears (in ms)
slideSpeed: 3000,   // time it takes to slide in each slide (in ms)
tabSpeed: 300,      // time it takes to slide in each slide (in ms) when rotating through tabs
fx: 'scrollLeft',   // slide control: fade, scrollLeft, right etc.

init: function() {
    // set the context to help speed up selectors/improve performance
    this.context = $('#slider');

    // set tabs to current hard coded navigation items
    this.tabs = $('ul.slides-nav li', this.context);

    // remove hard coded navigation items from DOM 
    // because they aren't hooked up to jQuery cycle
    this.tabs.remove();

    // prepare slider and jQuery cycle tabs
    this.prepareSlideshow();
},

prepareSlideshow: function() {
    // initialise the jquery cycle plugin -
    // for information on the options set below go to: 
    // http://malsup.com/jquery/cycle/options.html
    $('div.slides > ul', $slider.context).cycle({
        fx: $slider.fx,
        timeout: $slider.timeout,
        speed: $slider.slideSpeed,
        fastOnEvent: $slider.tabSpeed,
        pager: $('ul.slides-nav', $slider.context),
        pagerAnchorBuilder: $slider.prepareTabs,
        before: $slider.activateTab,
        pauseOnPagerHover: true,
        pause: true
    });          
},
prepareTabs: function(i, slide) {
    // return markup from hardcoded tabs for use as jQuery cycle tabs
    // (attaches necessary jQuery cycle events to tabs)
    return $slider.tabs.eq(i);

},
activateTab: function(currentSlide, nextSlide) {
    // get the active tab
    var activeTab = $('a[href="#' + nextSlide.id + '"]', $slider.context);

    // if there is an active tab
    if(activeTab.length) {
        // remove active styling from all other tabs
        $slider.tabs.removeClass('on');
        // add active styling to active button
        activeTab.parent().addClass('on');
    }            
} }; $(function() {
// add a 'js' class to the body
$('body').addClass('js');    
// initialise the slider when the DOM is ready
$slider.init(); }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:34:24.363

不确定我是否理解，但我会尝试，将 div 放在滑块之外，并在其高度的顶部给它一个负边距，然后将它们放在一个容器中，

```
#container>div 
{
    opacity: 0
} 
```

和代码

```
$(/*Next Button*/).click(function () {
    $(/*this or the div*/).css('opacity','0').delay(/*Sliding time*/).animate({opacity:'1'})
 )} 
```

# c# - 有效的 linq 包含匿名类型

> ID：15791971
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:19.613
> 
> 标签：c#, linq, entity-framework, contains, anonymous-types

我有一个这样创建的匿名对象集合：

```
var srcCategories = srcSet.Categories.Select(c => new
{
     ApplicationId = c.IsGLobal ? (long?)null : c.App.Id,
     c.Name
}); 
```

请注意，此集合*并非*来自我的数据上下文；它是从外部系统的输入生成的。我需要同时映射*数据库* `ApplicationId`中的实体和`Name`实体。到目前为止，这是我能够成功使其工作的唯一方法：

```
var trgCategoryIds =
    (from c in core.Domain.Categories.AsEnumerable()
     let ci = new { c.ApplicationId, c.Name }
     where srcCategories.Contains(ci)
     select c.Id)
    .ToArray(); 
```

但这需要我`Categories`先将整个表拉入内存。我正在寻找一种更有效的方法来执行此操作，最好是在单个查询中。我已经尝试了以下所有选项，它们都不能转换为sql：

```
// Removed .AsEnumerable()
var trgCategoryIds =
    (from c in core.Domain.Categories 
     let ci = new { c.ApplicationId, c.Name }
     where srcCategories.Contains(ci)
     select c.Id)
     .ToArray();

// Use .Any() instead of .Contains()
var trgCategoryIds =
    (from c in core.Domain.Categories
     where srcCategories.Any(s => s.ApplicationId == c.ApplicationId && s.Name == s.Name)
     select c.Id)
    .ToArray();

// Use Tuples instead of anon types
var srcCategories = srcSet.Categories.Select(c => Tuple.Create(...));
var trgCategoryIds =
    (from c in core.Domain.Categories
     let ci = Tuple.Create(c.ApplicationId, c.Name)
     where srcCategories.Contains(ci)
     select c.Id)
    .ToArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:23:01.997

您想要做的事情实际上是不可能的，因为一开始就没有简单的 SQL。实际上，您想要：

```
select * from Catagories where (ApplicationID = 1 and Name = "Foo") 
                            or (ApplicationID = 2 and Name = "Bar") 
                            or (ApplicationID = 2345 and Name = "Fizbuzz")
                            or ... 
```

据我所知，Entity Framework 无法自动创建这种类型的查询。`Contains()`它可以通过转换为来处理单个测试，但是当你不能时，`IN (...)`没有简单的 SQL 用于 anded 。但是，您可以使用[Predicate Builder](http://www.albahari.com/nutshell/predicatebuilder.aspx)库来构造这种类型的查询。页面上的第二个示例应该正是您所需要的。`IN``join``OR`

适合您的使用：

```
var predicate = PredicateBuilder.False<Category>();

  foreach (var cat in srcCategories)
  {
    var temp = cat;
    predicate = predicate.Or (p => p.ApplicationId == temp.ApplicationId && p.Name == temp.Name);
  }
  return core.Domain.Categories.AsExpandable().Where (predicate);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:14:54.163

如果这两个`Categories`集合来自不同的数据库上下文，则无法绕过将两个集合之一拉入内存。

如果他们共享数据库上下文，那么您要做的就是简单地连接两个表：

```
var query =
    from domainCat in srcCategories
    join sourceCat in srcSet.Categories
    on new { domainCat.ApplicationId, domainCat.Name } equals
        new { sourceCat.ApplicationId, sourceCat.Name }
    select sourceCat.Id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:14:26.177

如何调整以下代码，将 ks 作为格式化类别（Id + “-” + Name）。

```
using System;
using System.Linq;
using System.Data.Entity;
using System.Collections.Generic;
using System.Data.Entity.ModelConfiguration;
using System.Data.Objects.SqlClient;

namespace testef {
    //Model
    public class CObj {
        public CObj() {
        }
        public Int32 Id { get; set; }
        public String SomeCol { get; set; }
    }

    //Configuration for CObj
    public class CObjConfiguration : EntityTypeConfiguration<CObj> {
        public CObjConfiguration() {
            HasKey(x => x.Id);
        }
    }

    public class TestEFContext : DbContext {
        public IDbSet<CObj> objects { get; set; }

        public TestEFContext(String cs)
            : base(cs) {
            Database.SetInitializer<TestEFContext>(new DropCreateDatabaseAlways<TestEFContext>());
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            base.OnModelCreating(modelBuilder);

            modelBuilder.Configurations.Add(new CObjConfiguration());
        }
    }

    class Program {
        static void Main(String[] args) {
            String cs = @"Data Source=ALIASTVALK;Initial Catalog=TestEF;Integrated Security=True; MultipleActiveResultSets=True";                

            using (TestEFContext c = new TestEFContext(cs)) {
                c.objects.Add(new CObj { Id = 1, SomeCol = "c"});
                c.SaveChanges();
            }

            IEnumerable<String> ks = new List<String> { String.Format("{0,10}-c", 1) };
            foreach (var k in ks) {
                Console.WriteLine(k);
            }

            using (TestEFContext c = new TestEFContext(cs)) {
                var vs = from o in c.objects
                         where ks.Contains(SqlFunctions.StringConvert((Decimal?)o.Id, 10) + "-" + o.SomeCol)
                         select o;

                foreach (var v in vs) {
                    Console.WriteLine(v.Id);
                }
            }

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T15:51:23.833

```
var trgCategoryIds =
    (from c in core.Domain.Categories.AsEnumerable()
     where sourceCategories.Any(sc=> sc.ApplicationId == c.ApplicationId 
                     && sc.Name == c.Name)
     select c.Id)
    .ToArray(); 
```

# excel - excel vba编码将数据粘贴到预先选择的范围内

> ID：15791973
> 
> 赞同：0
> 
> 时间：2013-04-03T15:47:22.017
> 
> 标签：excel, vba

如果答案很明显，这里的新手会很高兴

我的电子表格有一个单元格列表，为了争论，A1 到 A10，其中包含数据和格式以某种方式。

我希望能够为每个单元格创建 10 个宏 - 1 个，这将允许我将此特定单元格的数据和格式粘贴到任何预先选择的单元格或范围中：

为了争论：我选择单元格范围b3：b10，我希望能够运行一个宏，它将单元格a1的内容剪切并粘贴到这个范围（b3：b10）中。

干杯

威尔姆斯塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:21:49.383

为此，您只需要一个宏。

输入框会询问您要复制哪个单元格。

单元格将被粘贴到当前选择的任何范围。

```
Sub CopyCellToRange()
Dim clAddress As String
Dim cl As Range
Dim rng As Range

Set rng = Range(Selection.Address)
clAddress = InputBox("Enter the address of the cell you want to copy", "Input Range", "A1")
Set cl = Range(clAddress)
cl.Copy
ActiveSheet.Paste
End Sub 
```

# c - 是否有一个 pthreads API 可以识别互斥锁所有者的句柄？

> ID：15791975
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:26.050
> 
> 标签：c, pthreads, mutex

是否有一个 pthreads API 可以识别互斥锁所有者的句柄？我宁愿使用 pthread API 而不是在 pthreads API 上构建自己的结构和锁定/解锁 API。我正在使用 pthreads 库的 C 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:07:09.730

我不知道这方面的任何 API，但是，它可以很容易地完成。您需要做的是创建一个全局变量，该变量将保存持有互斥锁的 pthread 句柄。每次线程锁定互斥体时，它都会将此变量（在互斥体锁定时）设置为`pthread_self()`.

这样，如果互斥锁被锁定，您可以轻松查看全局变量以查看是谁锁定了它。

# c - 在 C 中编辑文本文件的内容

> ID：15791977
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:32.427
> 
> 标签：c

我正在为即将到来的考试学习 C，我正在为此苦苦挣扎。

工作是使用以下规则编辑文本文件：

*   , 之前没有空格。！: ; ?
*   , 之后只有一个空格。！: ; ?
*   之后的第一个字母。！? 缪斯是大写的

主文件

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>

int main()
{
int i=0,size;
char ch,source_file[100],*buffer;
FILE *source, *target;

printf("Enter name of file to copy\n");
gets(source_file);

source = fopen(source_file, "r");

if(!source)
{
    printf("File does not exist !");
    exit(EXIT_FAILURE);
}

target = fopen("test1.txt", "w");

/*
    Edit for rule number 2 and 3
 */
while( ( ch = fgetc(source) ) != EOF )  {
    if(i!=0)    {
        if(ch == ' ')   {
            if(i== 1)   {
                    fputc(ch,target);
                    i=2;
            }
            else if(i==2)   {
                    continue;
            }
        }
        else    {
            if(isalpha(ch)) {
                ch= toupper(ch);    
            }
            fputc(ch,target);
            i=0;
        }
    }
    else    {
        fputc(ch,target);
        if(ch==',' || ch=='.' || ch=='!' || ch==':' || ch==';' || ch=='?'){
            i=1;
        }
        else    {
            i=0;
        }
    }
}

 /**
 * Reverse and put text content into an array.
 * Then read array bottom up,put in source file
 * for requiment number 1 :
 */
fseek(target, 0, SEEK_END);
size = ftell(target);

buffer = (char *) malloc (size+1);
target= freopen("test1.txt","r",target);
for (i=(size-1); i>=0; i--)
{
    buffer[i] = fgetc(target);
}
buffer[size] = 0;

source =freopen(source_file,"w",source);
int state=0;
for(int k=(size-1);k>=0;k--)    {
    if(buffer[k]== EOF) {
        continue;
    }
    if(state== 1)   {
        if(buffer[k]== ' ') {
            continue;   
        }   
        else    {
            fputc(buffer[k],source);
            state= 0;
        }       
    }
    else    {
        if(buffer[k]== ',' || buffer[k]== '.' || buffer[k]== '!' || buffer[k]== ':' || buffer[k]== ';' || buffer[k]== '?')  {
            state= 1;   
        }
        fputc(buffer[k],source);
    }
}
printf("File copied successfully.\n");

  /**
   * Close all file
   */
fclose(source);
fclose(target);
if(remove("test1.txt")== 0) {
    printf("\nDelete successfully");
}
else {
    printf("\n Error");
}
return 0;
    } 
```

我确实解决了规则 2 和 3。

但是使用第一条规则，结果与我的代码不同。在转换为规则 2 和 3 后，我反转内容，然后对其进行编辑，然后再次将其反转并放入 source_file。

我设置了一个状态，1 表示前一个字符是 , 。！: ; ?,0 是普通字符 结果是 , 之后的所有空格。！: ; ? 是删除，但在 , 之前有空格。！: ; ? 仍然存在。

我的代码哪里出了问题，请帮帮我，对不起，长篇大论:(

编辑（工作）：

```
 /* Rules:
  ** NO space before punctuation.
  ** only ONE space after punctuation
  ** after a .?! the next alpha character should be Capitalised
  */

  #include <stdio.h>
  #include <string.h>
  #include <ctype.h>
  #include <stdlib.h>

  #define STATE_INITIAL 0
  #define STATE_WORD 1
  #define STATE_KOMMA 2
  #define STATE_PERIOD 3
  #define STATE_EOF -1

  int main(void)
  {
unsigned spacecount;
int i=0,state;
char ch,source_file[100];
FILE *source, *target;

    spacecount= 0;

printf("Enter name of file to copy\n");
gets(source_file);

source = fopen(source_file, "r");

if(!source)
{
    printf("File does not exist !");
    exit(EXIT_FAILURE);
}

target = fopen("test1.txt", "w");

for (state=STATE_INITIAL; state != STATE_EOF; ) {
    ch = fgetc(source);
    switch(ch) {
    case ':' : case ',' : case ';' :
            spacecount=0;
            state = STATE_KOMMA;
            break;
    case '!' : case '.' : case '?' :
            spacecount=0;
            state = STATE_PERIOD;
            break;
    case ' ': spacecount++; continue;
    case EOF: state = STATE_EOF; continue;
    default:
            if (state == STATE_KOMMA || state == STATE_PERIOD) spacecount = 1;
            for( ;spacecount > 0; spacecount--) { fputc( ' ',target); }
            if (state == 3 && isalpha(ch))  ch = toupper(ch);
            state = STATE_WORD;
            break;
            }
    fputc(ch,target);
    }

  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:52:03.737

极简状态机。请注意，不需要缓冲以前的字符，只需记住它们（通过`state`and `spacecount`）

```
/* Rules:
** NO space before punctuation.
** only ONE space after punctuation
** after a .?! the next alpha character should be Capitalised
*/

#include <stdio.h>
#include <string.h>
#include <ctype.h>

#define STATE_INITIAL 0
#define STATE_WORD 1
#define STATE_KOMMA 2
#define STATE_PERIOD 3
#define STATE_EOF -1

int main(void)
{
unsigned spacecount;
int state,ch;

spacecount=0;
for (state=STATE_INITIAL; state > STATE_EOF; ) {
        ch = getc(stdin);
        switch(ch) {
        case ':' : case ',' : case ';' :
                spacecount=0;
                state = STATE_KOMMA;
                break;
        case '!' : case '.' : case '?' :
                spacecount=0;
                state = STATE_PERIOD;
                break;
        case ' ': spacecount++; continue;
        case EOF: state = STATE_EOF; continue;
        default:
                if (state == STATE_KOMMA || state == STATE_PERIOD) spacecount = 1;
                for( ;spacecount > 0; spacecount--) { putc( ' ', stdout); }
                if (state == 3 && isalpha(ch))  ch = toupper(ch);
                state = STATE_WORD;
                break;
                }
        putc(ch, stdout);
        }

return 0;
} 
```

# backbone.js - 数据来自数据库的骨干js上的crud操作

> ID：15791979
> 
> 赞同：0
> 
> 时间：2013-04-03T15:47:43.047
> 
> 标签：backbone.js

我想在数据来自数据库的骨干 js 中创建一个 crud 操作。我不明白我在骨干示例中将 ajax 调用放在哪里。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:45:59.457

听起来您还没有探索“主干方式”。在 Backbone 中，您（一般而言）不要在代码中的任何位置放置任何 AJAX 调用，因为您需要的所有 AJAX 逻辑都已经在 Backbone 的代码中。

您的代码需要提供的是使您的应用程序独一无二的“缺失部分”。例如，假设您想在 Backbone 中“获取”（即执行“CRUD”中的“R”）ID 为 55 的 Foo。你会像这样创建一个 Foo 类：

```
var Foo = Backbone.Model.extend({
    url: 'www.example.com/yourServerPathForFoos'
}); 
```

然后你会创建它的一个实例：

```
var foo55 = new Foo({id: 55}); 
```

然后你可以通过调用 fetch 命令让 Backbone 为你做 AJAX 工作：

```
foo55.fetch(); 
```

这将使 Backbone 启动一个 AJAX 请求，并且当该请求返回时，Backbone 将填充返回的`foo55`任何数据。您可以提供任何 jQuery AJAX 选项，Backbone 会将它们传递给 jQuery，或者执行类似于 jQuery 对它们所做的事情。

例如，要在 AJAX 调用解析时执行某些操作，您可以执行以下操作：

```
foo55.fetch({success: doSomething}); 
```

CRUD 的其他部分也有类似的 Backbone 方法：

C - 保存

R - 获取

U - 保存（带 `{patch: true}`参数）

D - 破坏

# java - 由 Spring MVC 支持的 Freemarker 中基于枚举的单选按钮

> ID：15791987
> 
> 赞同：1
> 
> 时间：2013-04-03T15:47:52.777
> 
> 标签：java, spring, jsp, spring-mvc, freemarker

是否可以根据绑定属性的 Enum 类型，使用 Sping MVC JSP tag-Freemarker 宏在 Freemarker 中输出单选按钮列表？我[认为这可以](https://stackoverflow.com/questions/6014280/select-in-spring-mvc-by-enum)使用`<form:select>`JSP 中的标签来实现，但是可以使用单选按钮和 Freemarker 来完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:07:44.047

你可以这样做。最简单的做法是将枚举值数组放入模型中：

```
model.put("myEnum", MyEnum.values()); 
```

在您的 FTL 中，您只需遍历这些：

```
<#-- handy macro for this -->
<#macro enumSelect selectName enumValues>
    <select name="${selectName}">
        <#list enumValues as enum>
        <option value="${enum}">${enum.description}</option>
        </#list>
    </select>
</#macro>

<#-- calling the macro -->
<@enumSelect "myEnumSelectName" myEnum/> 
```

此代码假定`MyEnum`有一个名为`getDescription`. 您可以做任何您喜欢的事情来支持选项文本。您还可以添加到此宏，以便支持“选定”选项等。

# php - Objective-C 方法对象参数

> ID：15791993
> 
> 赞同：0
> 
> 时间：2013-04-03T15:48:00.160
> 
> 标签：php, objective-c, oop

我对方法中的参数有疑问，如下所示： `- (BOOL)myMethod:(NSObject*)objectInput;`

这是我试图在 PHP 中解释的内容以及如何在 Objective-C 中实现这一点：

```
<?php
class MyObject {
    public function myFunction($inputObject) {
        return $inputObject->someVariable;
        // get another member from some object not related
        // to this object.
    }
}
?> 
```

我的 Objective-C 标头：( `MyObject.h`)

```
@interface MyObject : NSObject

- (BOOL)myMethod:(NSObject*)inputObject;

@end 
```

Obj-C 实现：( `MyObject.m`)

```
#import <Foundation/Foundation.h>
#import "MyObject.h"

@implementation MyObject

- (BOOL)myObject:(NSObject*)inputObject {
    return inputObject.boolMember;
}

@end 
```

问题是，当我在 Objective-C 中尝试时，Xcode 说不存在这样的成员。另外，我想要做什么？我对 Objective-C 及其所有的怪异仍然有点陌生。但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:52:59.707

您正在引用 NSObject 上不存在的属性。您需要创建自己的 NSObject 子类并添加一个属性。

```
@property (nonatomic, assign) BOOL boolMember 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:51:12.243

您试图从 中获取调用`boolMember`的东西`NSObject*`，它没有调用的方法或变量。你要么需要传递一个更具体的对象，它肯定有一个`boolMember`，要么使用内省/反射来确定对象是否有一个叫做`boolMember`.

我更熟悉在 Java 中使用反射，但从我能找到的内容来看，我认为您会想要[Apple 的 Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)中的方法。如果您特别想要一个变量，您应该能够使用[class_getProperty](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_getProperty)方法获取它。

# c++ - 双向通信 Python 和 C++

> ID：15791996
> 
> 赞同：2
> 
> 时间：2013-04-03T15:48:02.887
> 
> 标签：c++, python

是否有可能让 C++ dll 调用 Python 脚本，同时在最初创建 python 实例的 C++ dll 中有一个 python 脚本调用函数？

我可以使用什么库？如果没有，是否有任何最佳实践？使用共享内存进行通信是最好的还是我应该使用某种能够处理事情的服务？

我的目标平台是 Windows

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:27:35.683

您可以使用该[`ctypes`](http://docs.python.org/2/library/ctypes.html)模块在 Python 中使用用 C/C++ 编写的外部库。请注意，尽管 C++ 会[破坏](https://blogs.oracle.com/petesh/entry/c_name_mangling_and_function)函数名称，并且 ctypes 只能使用已声明的函数`extern "C"`！（参见例如[这个问题](https://stackoverflow.com/questions/145270/calling-c-c-from-python)）

要从 C++ 调用 Python 脚本，您有两种选择：

*   使用脚本名称作为参数启动一个新的 Python 进程。在 Windows 上，您可以例如为此使用[CreateProcess 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)
*   正如 Janne Karila 提到的，在 C++ 应用程序中[嵌入Python。](http://docs.python.org/2/extending/embedding.html)

*请注意，这些事情与程序之间的通信*没有太大关系。

图书馆并没有真正沟通，因为它不是一个过程。它只是提供功能和数据供进程*使用*。

您可以从另一个进程启动一个进程，而无需它们之间进行任何通信。

要在进程之间进行通信，请使用进程间通信。[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)列出了在 Windows 上执行此操作的不同方法。

# c++ - 如何从模板化流运算符中调用 std 流运算符？

> ID：15791997
> 
> 赞同：0
> 
> 时间：2013-04-03T15:48:04.687
> 
> 标签：c++, templates, iostream

我有许多向量类，我想为其实现一个通用流运算符，如下所示：

```
template <typename T>
std::ostream& operator<<(std::ostream& os, const T& v)
{
    for (int i = 0; i < T::num_elems; ++i)
    {
        os << " " << v.a[i];
    }
    return os;
} 
```

这几乎可以工作，除了我`os << " " << ...`当然会得到一个错误，因为它是模棱两可的。我怎样才能消除歧义并强制`<<`操作员`std::`在这里使用？

或者，如何将这个模板化流运算符的使用限制为我的向量类？我已将向量类和流运算符放入单独的命名空间中，但这似乎还不够。

实际错误消息的开始：

```
foo.cpp:73: error: ambiguous overload for 'operator<<' in 'os << " "'
/usr/include/c++/4.2.1/ostream:169:0 /usr/include/c++/4.2.1/ostream:169: note: candidates are: std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long int) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
/usr/include/c++/4.2.1/ostream:177:0 /usr/include/c++/4.2.1/ostream:177: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>] <near match>
/usr/include/c++/4.2.1/ostream:185:0 /usr/include/c++/4.2.1/ostream:185: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(bool) [with _CharT = char, _Traits = std::char_traits<char>]
... 
```

进一步澄清：流运算符仅用于测试工具（UnitTest ++），它不是公共 API 的一部分。向量类也是小的自定义固定大小向量（实际上只是简单的数组），而不是 C++ 向量。

我需要使用它的向量类之一的精简示例：

```
struct VectorClass {
    enum { num_elems = 16 };
    int32_t a[num_elems];
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:55:42.547

> 大约有 20 个类似的类，具有不同的 POD 类型和数组大小，但其他方面相同。

创建一个执行通用工作的命名函数。

```
template <typename T>
std::ostream& SendVectorToOstream(std::ostream& os, const T& v)
{
    for (int i = 0; i < T::num_elems; ++i)
    {
        os << " " << v.a[i];
    }
    return os;
} 
```

现在您可以将您的`operator<<`功能转发给它。

```
std::ostream& operator<<(std::ostream& os, const VectorClassA & v)
{
    return SendVectorToOstream( os, v );
}

std::ostream& operator<<(std::ostream& os, const VectorClassB & v)
{
    return SendVectorToOstream( os, v );
}

std::ostream& operator<<(std::ostream& os, const VectorClassC & v)
{
    return SendVectorToOstream( os, v );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:13:29.563

我认为你看错了方向。模板不是解决方案。你想要的是继承。像这样的东西

```
template< typename T>
struct VectorClass {

    enum { num_elems = 4 };
    T* a;

};

template< typename T>
std::ostream& operator<<(std::ostream& os, const VectorClass<T>& v)
    {
        for (int i = 0; i < VectorClass<T>::num_elems; ++i)
        {
            os << " " << v.a[i];
        }
        return os;
    }

template< typename T>
class DerivedClass : public VectorClass<T> {

};

int main(){

    DerivedClass<int> v;

    int* tmp = new int[VectorClass<int>::num_elems];

    for (int i = 0; i < VectorClass<int>::num_elems; ++i) {
        tmp[i] = i;
    }

    v.a = tmp;

    cout << v;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T16:33:18.733

IIRC，您可以使用 SFINAE（如 Drew Dormann 的回答）或使用命名空间的参数相关名称查找：

```
namespace all_my_vectors
{
    struct myVector1 { int a; };
    struct myVector2 { int a; };

    template < typename Vector >
    std::ostream& operator<< (std::ostream& o, Vector const& v)
    {
        o << v.a; // look up name in std::ostream, namespace std, global namespace, namespace of v.a
        return o;
    }
}

int main()            
{
    all_my_vectors::myVector1 v1;
    all_my_vectors::myVector2 v2;

    std::cout << v1 << v2; // look up name in std::ostream, namespace std, global namespace, namespace all_my_vectors

    return 0;
} 
```

编辑：如果他们共享一个共同的基类，你应该使用 stardust_ 的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:30:06.210

如果您的所有矢量类都有一个共同的属性，例如`num_elems`，您可以使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)来实现它。

```
template <typename T,          size_t SFINAE = T::num_elems >
// The only difference is here ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
std::ostream& operator<<(std::ostream &os, const T& v)
{
    for (int i = 0; i < T::num_elems; ++i)
    {
        os << " " << v.a[i];
    }
    return os;
} 
```

此更改强制此`ostream <<`仅适用于`T`定义`T::num_elems`可转换为的类型`size_t`，例如您的枚举。

*此解决方案假定使用 C++11 编译器。*

# c# - 标记之间的 XML 读取字符串值

> ID：15791998
> 
> 赞同：1
> 
> 时间：2013-04-03T15:48:05.347
> 
> 标签：c#, xml

假设，我有以下 XML：

```
 <SplitterLayoutDataSet xmlns="http://tempuri.org/SplitterLayoutDataSet.xsd"> 
        <SplitterLayout> 
            <SplitterName>mainSplitContainerControl</SplitterName>
            <SplitterPosition>0.2213375796178344</SplitterPosition>
        </SplitterLayout> 
    </SplitterLayoutDataSet> 
```

我需要一种方法来获取 SplitterPosition 值，在这种情况下：0.2213375796178344。是否有任何收据可以在不使用 Linq-to-XML 或结合这些方式的情况下达到此解决方案？此 XML 在 SplitterLayoutDataset.xsd 文件中设计。或者我如何使用 C# 工具直接读取该文件的字段*SplitterPosition ？*谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:01:09.637

这是使用`XmlDocument`and的解决方案`SelectSingleNode`：

```
var xml = @"
<SplitterLayoutDataSet xmlns=""http://tempuri.org/SplitterLayoutDataSet.xsd""> 
   <SplitterLayout> 
       <SplitterName>mainSplitContainerControl</SplitterName>
       <SplitterPosition>0.2213375796178344</SplitterPosition>
   </SplitterLayout> 
</SplitterLayoutDataSet>";

//Create XmlDocument
var xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xml);

//Create NamespaceManager (for XPath)
var nsMgr = new XmlNamespaceManager(xmlDoc.NameTable);
nsMgr.AddNamespace("dn", "http://tempuri.org/SplitterLayoutDataSet.xsd");

//Get inner text of SplitterLayout/SplitterPosition
var xPath = "//dn:SplitterLayout/dn:SplitterPosition";
Console.WriteLine(xmlDoc.SelectSingleNode(xPath, nsMgr).InnerText); 
```

或者根据@AlexeiLevenkov 的建议，您可以`NamespaceManager`通过使用以下 XPath 来消除：

```
var xPath = "//*[local-name()='SplitterPosition']";
Console.WriteLine(xmlDoc.SelectSingleNode(xPath).InnerText); 
```

当然，你也可以使用`XDocument`：

```
var xdoc = XDocument.Parse(xml);
XNamespace ns = @"http://tempuri.org/SplitterLayoutDataSet.xsd";
Console.WriteLine(xdoc.Descendants(ns + "SplitterPosition").First().Value); 
```

或使用`XDocument`and `XPathSelectElement`：

```
var xdoc = XDocument.Parse(xml);
var xPath = "//*[local-name()='SplitterPosition']";
Console.WriteLine(xdoc.XPathSelectElement(xPath).Value); 
```