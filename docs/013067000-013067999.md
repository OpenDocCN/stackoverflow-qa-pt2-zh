# StackOverflow 问答 13067000-13067999

# python - 根据连通性和坐标分离两个图

> ID：13067000
> 
> 赞同：1
> 
> 时间：2012-10-25T10:52:43.760
> 
> 标签：python, graph, connectivity

我想将顶点和边的现有数据分成两个或多个未连接的图。我想举以下例子：

想象两个六边形彼此重叠，但位于不同的 Z 轴上。

六边形 1 有以下顶点 A(0,0,1), B(1,0,2), C(2,1,2), D(1,2,1), E(0,2,1) , F(-1,2,1)。连通性如下：AB、BC、CD、DE、EF、FA。图 1 的这一部分，因为所有顶点都在该层中连接。

Hexagon2有以下顶点A1(0,0,6), B1(1,0,7), C1(2,1,7), D1(1,2,8), E1(0,2,7), F1(-1,2,6)。连接方式如下：A1-B1、B1-C1、C1-D1、D1-E1、E1-F1、F1-A1。这是图 2 的一部分

我的数据采用以下形式：我可以用来形成图形的顶点列表和边列表。我想消除图 2 并仅将图 1 的顶点和连接性提供给我的算法的多边形确定部分。我的真实数据包含大约 1000 个连接的多边形，如图 1 和大约 100 个（面积大得多）多边形，如图 2。我想消除图 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:57:19.150

您描述的问题与[连接的组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)有关。

Python [Networkx](http://networkx.lanl.gov/index.html)模块具有处理此类图形问题的功能。您正在寻找返回所有组件的[connected_components](http://networkx.lanl.gov/reference/generated/networkx.algorithms.components.connected.connected_components.html#networkx.algorithms.components.connected.connected_components)函数，然后您可以选择适当的组件（可能由顶点数决定）。

# google-app-engine - App Engine + objectify：未找到过滤器类

> ID：13067001
> 
> 赞同：1
> 
> 时间：2012-10-25T10:52:50.250
> 
> 标签：google-app-engine, objectify

我已将 objectify 添加到我的项目中（确认它工作正常），但我也尝试按照[此处](http://code.google.com/p/objectify-appengine/wiki/Setup)的建议在 web.xml 中添加过滤器映射，但出现此错误：

```
WARNING: EXCEPTION 
java.lang.ClassNotFoundException: com.googlecode.objectify.ObjectifyFilter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:207)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:81)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:662)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:202)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:248)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
Oct 25, 2012 10:45:33 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed ObjectifyFilter: javax.servlet.UnavailableException: com.googlecode.objectify.ObjectifyFilter
Oct 25, 2012 10:45:33 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@1acaf0ed{/,C:\Users\mshaham\eclipse\test2510\war}
javax.servlet.UnavailableException: com.googlecode.objectify.ObjectifyFilter
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:81)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:662)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:202)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:248)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 
```

我在eclipse上使用GAE 1.7.2的最新objectify

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:25:28.613

您可能正在使用 Objectify3 jar，但遵循 Objectify4 文档。我建议从 maven 存储库中获取最新的 Objectify4 jar（即将正式发布）。如果您犹豫不决，Objectify3 文档位于 Wiki 侧边栏中。

# java - 正则表达式一次或多次JAVA

> ID：13067002
> 
> 赞同：0
> 
> 时间：2012-10-25T10:52:52.650
> 
> 标签：java, regex, string, pattern-matching

嗨，我正在尝试将字符串与模式匹配

这是可能的字符串

```
signal CS, NS, dl: stateType := writeOrRead0; 
signal CS, pS : stateType := writeOrRead0; 
signal dS : stateType := writeOrRead0; 
```

我只关心第一个冒号的模式。

但是定义的信号数量可能不止一个，也可能是三个或四个，即使这是我拥有的正则表达式

```
^signal\\s*(\\w+),*\\s*(\\w+)\\s*: 
```

它会接收第二个信号，但是对于第二个信号，它会接收 CS 和 pS，但是当我使用下一个信号时，它会接收 d 和 S

```
matcher.group() 
```

分别上来

谁能给我一个表达式，无论是一二三还是更多，都会选择所有信号名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:00:52.240

如果您想为每个信号名称设置一个组，那是不可能的（除非您有信号数量的上限，否则您可以写出整个内容，但这会非常难看）。

因此，您必须使用包含名称的一组，用逗号分隔。然后您可以对其进行后处理以获取真实的信号名称。

那会给出类似的东西

```
^signal\s+((?:\w+(?:,\s*)?)*)\s*: 
```

（请注意，我没有将它作为 Java 字符串转义。）

第 1 组是你的名字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T11:00:43.327

我会做接下来的事情：

1- 获取完整的信号组：CS、NS、dl（例如）

2-解析它们

你的例子：

1-`^signal\\s((\\w*)(?:,\\s)?)+`

2- 现在你在一个像“CS，NS，dl”这样的组中有一个字符串，现在用一个简单的分割“，”你可以把它们放在一个数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:00:59.550

你可以使用这个正则表达式：

> ^信号\s([\w,\s]*(?=:))

以信号开头，后跟一个空格，捕获一个单词的零次或多次出现，后跟一个逗号和一个空格。在“：”处结束捕获，但不将其包含在匹配中。

为了不将信号本身包含在匹配中，您可以使用如下所示的lookbehind：

> ^(?<=信号)\s([\w,\s]*(?=:))

# python - 线程不适用于 pygtk 并且总是挂起

> ID：13067004
> 
> 赞同：0
> 
> 时间：2012-10-25T10:53:02.493
> 
> 标签：python, multithreading, user-interface, pygtk

这是我的问题的一个小实现。当我单击“按下”按钮时，它会挂起，有时不会。如何克服这个问题？这是我的代码。

安装 Sane “sudo apt-get install python-imaging-sane”

```
import gtk
import gtk.glade
import threading
import os
import sane
gtk.gdk.threads_init()
class process(threading.Thread):
    def __init__(self,main_object):
        self.main_object = main_object
        threading.Thread.__init__(self)

    def run(self):
        sane_version = sane.init()
        sane_devices = sane.get_devices()
        gtk.threads_enter()
        self.main_object.pb.set_fraction(self.main_object.value)
        gtk.threads_leave()
        self.main_object.value = self.main_object.value + .1

class main():
    def __init__(self):
        #GUI
        window = gtk.Window()
        window.set_default_size(200,200)
        vbox = gtk.VBox(False,0)

        self.pb = gtk.ProgressBar()
        button = gtk.Button("Press me ")
        button.connect("clicked",self.fun_to_call)
        vbox.pack_end(self.pb)
        vbox.pack_end(button)
        button.show()
        self.pb.show()
        vbox.show()
        window.add(vbox)

        self.value = .1
        window.show()

    def fun_to_call(self,data=None):
        pro = process(self)
        pro.start()

main()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:20:21.430

查看[有关该主题的 PyGTK 常见问题解答](http://faq.pygtk.org/index.py?req=show&file=faq20.006.htp)，您似乎缺少一步；（虽然整个常见问题解答条目很有趣）

> ...你必须用 gtk.threads_enter()/gtk.threads_leave() 包裹你的主循环，像这样：
> 
> gtk.threads_enter()
> gtk.main()
> gtk.threads_leave()

他们也有一些建议如何使用`finally`以确保`gtk.threads_leave()`即使代码抛出异常也始终运行。

请注意，尽管使用这种 GUI 线程不一定是可移植的，但某些操作系统可能会在非主线程运行 GUI 操作时遇到问题，即使使用正确的锁定也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:25:43.587

标准 python 实现（“cpython”）的内部不是线程安全的。

因此使用锁（[全局解释器锁](http://wiki.python.org/moin/GlobalInterpreterLock)）来确保一次只运行一个 python 线程。例如，当正在运行的线程执行 I/O 时，此锁会被释放。但是如果锁没有被释放，其他线程就没有机会运行。

我怀疑这是问题的根源。这取决于健全绑定的实现。

您可以尝试使用[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)模块而不是`threading`. 多处理为长时间运行的任务启动了一个完全不同的进程，因此它不受 GIL 的约束。但是您必须使用`multiprocessing`like提供的工具`Queue`并`Pipe`在进程之间交换信息。

# asp.net-mvc - ASP.net MVC - 使用自定义文化 - 未加载资源

> ID：13067008
> 
> 赞同：1
> 
> 时间：2012-10-25T10:53:05.380
> 
> 标签：asp.net-mvc, localization

我有一个 ASP.net MVC 站点，我想使用几个资源文件来设置一些字符串。

我有一个包含我的视图模型的类库，我在那里添加了一个资源文件（ValidationMessages），带有一个字符串（称为测试），然后在我的视图模型中具有这样的属性：

```
 public string TestResource
        {
            get
            {
                return ValidationMessages.Test;
            }
        } 
```

当我的视图输出如下时，这很好用：

```
<div>@Model.TestResource</div> 
```

如果我将 ValidationMessages.en-au.resx（我的默认值为 en-gb）文件添加到我的类库并创建不同版本的测试字符串，然后在我的 global.asax 中有以下内容：

```
 protected void Application_AcquireRequestState(object sender, EventArgs e)
 {
     Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo("en-au");
     Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("en-au");
 } 
```

这也很好用。

我想要做的是添加自定义文化'en-gb-ly' - 我已经在我的机器上注册了这种文化（使用[这里](https://stackoverflow.com/questions/1304507/create-custom-culture-in-asp-net)的代码）。当我在 global.asax 中将当前文化设置为“en-gb-ly”并在我的类库中包含 ValidationMessages.en-gb-ly.resx 时，输出已恢复为测试的“基本”版本字符串，而不是我的英文资源中的那个。

有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:40:17.570

首先要检查的是，en-ly 卫星组件是否按预期部署。不幸的是，如果您的自定义文化没有安装在您的构建机器上，那么它甚至不会被构建！

# magento - 获取自定义价格magento的自定义标签

> ID：13067010
> 
> 赞同：0
> 
> 时间：2012-10-25T10:53:08.877
> 
> 标签：magento, label

如果没有特价，我想以特价或正常价格获得定制标签。我只能以特价获得自定义标签，但对于价格我不能，我不知道从哪里开始，也许还有其他如果。如果只有价格得到价格，如果特价得到特价，我需要帮助来构建选择。

```
<?php 
        // Get the Special Price
        $specialprice = Mage::getModel('catalog/product')->load($_product->getId())->getSpecialPrice() >= 500;
        // Get price
        $price = Mage::getModel('catalog/product')->load($_product->getId())->getPrice()>= 500;
        // Get the Special Price FROM date
        $specialPriceFromDate = Mage::getModel('catalog/product')->load($_product->getId())->getSpecialFromDate();
        // Get the Special Price TO date
        $specialPriceToDate = Mage::getModel('catalog/product')->load($_product->getId())->getSpecialToDate();
        // Get Current date
        $today =  time();

        if ($specialprice):
            if($today >= strtotime( $specialPriceFromDate) && $today <= strtotime($specialPriceToDate) || $today >= strtotime( $specialPriceFromDate) && is_null($specialPriceToDate)):
    ?>
            <img src="picture/shipping.png" align="right" width="120" height="30" class="onsaleicon" />
    <?php  
            endif;
        endif;
    ?> 
```

添加解决方案：

```
 <?php
    $specialprice = Mage::getModel('catalog/product')->load($_product->getId())->getFinalPrice();

    if ($specialprice >= 500):
    ?>

    <img src="picture/shipping.png" align="right" width="120" height="30" class="onsaleicon" />

    <?php
    endif;
    ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:15:34.823

您正在将字符串（`$specialPriceFromDate 是一个字符串）与 int 进行比较（time() 返回一个 int ...

此外，特价的 from_date 和 to_date 是可选的（您可以同时拥有，也可以不拥有或只拥有其中之一）。

我的建议是：

*   Magento 提供`$product->getFinalPrice()`获取最终价格的功能
*   比较 special_price 是否存在以及是否与 special_price 相等
*   如果这两个相同（最终价格和特价）显示特价图片

# android - 如何调整列表视图中的微调器

> ID：13067011
> 
> 赞同：1
> 
> 时间：2012-10-25T10:53:12.757
> 
> 标签：android, listview, spinner

我在 ListView 中有一些微调器（左侧一些文本和右侧微调器），像这样

![在此处输入图像描述](../Images/cc83be8e114159397f621f71545bdf84.png)

一切都很好，但我希望微调器像这样对齐

![在此处输入图像描述](../Images/fc2781de1933f460bc6e86814779e61a.png)

有人可以帮忙调整意见..,。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:18:21.900

```
<Spinner android:id="@+id/spinner" 
 android:layout_width="150dp"//==> Set the width of the spinner. 
 android:layout_height="wrap_content" 
 android:layout_marginRight="10sp" 
 android:layout_alignParentRight="true"
 android:layout_centerVertical="true" 
 android:focusable="false" 
 android:focusableInTouchMode="false" 
 android:visibility="gone" /> 
```

# r - 用于绘制时间序列数据的 x 轴刻度的日期格式

> ID：13067012
> 
> 赞同：7
> 
> 时间：2012-10-25T10:53:14.507
> 
> 标签：r, date, plot, zoo

数据文件的日期是时间序列数据的格式，即 1975M1、1975M2、... 2011M12。使用 R 绘制此数据时，我希望 x 轴在刻度轴上显示月份。

为了正确读取日期，我尝试将 M 替换为 - 以获取 %Y-%m 格式，但这对于 hydroTSM 包中的 drawTimeAxis 似乎并不好，它可能需要 %Y-%M-%d 格式。它给出了错误，即刻度维度的维度数不正确。

另一种解析和格式化数据的方法，`x$newdate <- strptime(as.character(x$date), "%Y-%m")`然后`format(x$newdate,""%Y-%m")` 也不读取日期并给出错误......所有NA。

date <- as.Date(data[,1] 字符串不是标准明确格式和 ts <- read.zoo(xts, as.yearmon(x[,1])) 的错误在数据上给出了错误的 enries行。

请给出如何使用日期信息读取此数据的解决方案。

数据文件的一小部分

```
date    x   x2
1975M1  112.44  113.12
1975M2  113.1   114.36
1975M3  115.04  114.81
1975M4  117.65  115.35
1975M5  119.5   116.92
1975M6  121.4   118.56
1975M7  120.64  118.97
1975M8  119.12  119.84
1975M9  118.91  120.59
1975M10 120.58  122.3
1975M11 121.26  123.35
1975M12 122.34  123.33 
```

更新：到目前为止的答案通过在 xts 包中使用 %YM%m 或添加获取标准格式的日期来解决正确读取日期的问题。刻度轴的自定义仍然是一个问题。drawTimeAxis 给出尺寸错误，并且绘图命令未显示超过一年数据的每月标签或其他数据。自定义刻度轴的任何方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T11:33:42.913

也许您没有`as.yearmon()`正确使用，因为以下内容对我有用（使用`dat`来自 Gavin 的回答）：

```
library(zoo)
dat$date <- as.yearmon(dat$date, "%YM%m") 
```

因此，努力让事情正确绘制：

1.  您的数据：

    ```
    dat <- read.table(text = "date    x   x2
    1975M1  112.44  113.12
    1975M2  113.1   114.36
    1975M3  115.04  114.81
    1975M4  117.65  115.35
    1975M5  119.5   116.92
    1975M6  121.4   118.56
    1975M7  120.64  118.97
    1975M8  119.12  119.84
    1975M9  118.91  120.59
    1975M10 120.58  122.3
    1975M11 121.26  123.35
    1975M12 122.34  123.33", header = TRUE) 
    ```

2.  从“动物园”包转换为`xts`使用。`as.yearmon()`

    ```
    library(xts) # Will also load zoo
    dat.xts <- xts(dat[-1], 
                   order.by = as.yearmon(dat$date, "%YM%m"))
    dat.xts
    #               x     x2
    # Jan 1975 112.44 113.12
    # Feb 1975 113.10 114.36
    # Mar 1975 115.04 114.81
    # Apr 1975 117.65 115.35
    # May 1975 119.50 116.92
    # Jun 1975 121.40 118.56
    # Jul 1975 120.64 118.97
    # Aug 1975 119.12 119.84
    # Sep 1975 118.91 120.59
    # Oct 1975 120.58 122.30
    # Nov 1975 121.26 123.35
    # Dec 1975 122.34 123.33 
    ```

3.  绘制数据：

    ```
    plot.zoo(dat.xts) 
    ```

    ![在此处输入图像描述](../Images/c6aacc2377f381b9a7c9ed5464eece82.png)

    ```
    plot.zoo(dat.xts, 
             plot.type="single", 
             col = c("red", "blue")) 
    ```

    ![在此处输入图像描述](../Images/ae99da5be93560d4c39825add5782d08.png)

# 更新：指定自己的轴

这是一些可以使用的示例数据（在 SO 上提问时分享这些示例数据通常很好，因为它可以让其他人更容易复制和解决您的问题）。请注意，对于此示例，我们已跳过使用“xts”包，因为它并不是真正必要的。

```
set.seed(1)
dat <- data.frame(date = paste0(rep(1975:1977, each = 12), 
                                "M", rep(1:12, times = 3)),
                  x1 = runif(36, min = 100, max = 140),
                  x2 = runif(36, min = 100, max = 140))
library(zoo) # xts is actually unnecessary if this is all you're doing
# Convert your data to a `zoo` object
dat.z <- zoo(dat[-1], order.by = as.yearmon(dat$date, "%YM%m")) 
```

这是使用 获得的默认图`plot(dat.z, screen = 1, col = 1:2)`：

![在此处输入图像描述](../Images/ddbead6a0f126a18a8f99fb2129c66b7.png)

根据您的评论，听起来您想要每月标签之类的东西。

1.  绘制数据，但抑制 x 轴`xaxt = "n"`

    ```
    plot(dat.z, screen = 1, col = 1:2, xaxt = "n") 
    ```

2.  做一些设置工作，每个月都有一个标签。（请参阅`?plot.zoo`，从哪里修改。）

    ```
    tt <- time(dat.z)
    # The following is just the sequence 1:36\. 
    #   If you wanted only every third month plotted,
    #   use a sequence like ix <- seq(1, length(tt), 3)
    ix <- seq_along(tt) 
    # What format do you want for your labels.
    #   This yields abbreviated month - abbreviated year
    fmt <- "%b-%y" 
    labs <- format(tt, fmt) # Generate the vector of your labels 
    ```

3.  将您的轴添加到您的情节中。可能需要进行一些实验才能找到适合所有物品的尺寸。`las = 2`使标签垂直于轴，如果您*确实*需要为每年的每个月添加标签，则需要这样做。

    ```
    axis(side = 1, at = tt[ix], labels = labs[ix], 
         tcl = -0.7, cex.axis = 0.7, las = 2) 
    ```

这是最后的情节：

![在此处输入图像描述](../Images/2b603e3f64440278fdc6727c77c6bc3c.png)

顺便说一句，如果您收到诸如此类的日期`1977.15`，您可能需要通读[此问题](https://stackoverflow.com/questions/10302261/forecasting-time-series-data)的一些答案，例如，查看@joran 对`pretty()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:12:29.037

使用您的数据：

```
dat <- read.table(text = "date    x   x2
1975M1  112.44  113.12
1975M2  113.1   114.36
1975M3  115.04  114.81
1975M4  117.65  115.35
1975M5  119.5   116.92
1975M6  121.4   118.56
1975M7  120.64  118.97
1975M8  119.12  119.84
1975M9  118.91  120.59
1975M10 120.58  122.3
1975M11 121.26  123.35
1975M12 122.34  123.33", header = TRUE) 
```

您缺少的是您需要在日期中添加一天，以便它们成为`as.Date()`. 该位可以通过附加`"-01"`到 的每个元素来完成`date`。我们需要添加`"-"`分隔符以清楚地划分月份与我们添加的新日期。

```
paste0(as.character(date), "-01") ## temporary step, not needed 
```

现在我们有了类似的东西

```
> with(dat, paste0(date, "-01"))  ## temporary step, not needed
 [1] "1975M1-01"  "1975M2-01"  "1975M3-01"  "1975M4-01"  "1975M5-01" 
 [6] "1975M6-01"  "1975M7-01"  "1975M8-01"  "1975M9-01"  "1975M10-01"
[11] "1975M11-01" "1975M12-01" 
```

我们可以写出一个合适的格式，`as.Date()`可以使用：`"%YM%m-%d"`. 请注意，我们`"M"`在 day part 之前包含文字和分隔符`"-"`。

将其与`transform()`将结果重新插入`dat`我们有：

```
## full solution
dat <- transform(dat, date = as.Date(paste0(date, "-01"), format = "%YM%m-%d")) 
```

这使

```
> dat
         date      x     x2
1  1975-01-01 112.44 113.12
2  1975-02-01 113.10 114.36
3  1975-03-01 115.04 114.81
4  1975-04-01 117.65 115.35
5  1975-05-01 119.50 116.92
6  1975-06-01 121.40 118.56
7  1975-07-01 120.64 118.97
8  1975-08-01 119.12 119.84
9  1975-09-01 118.91 120.59
10 1975-10-01 120.58 122.30
11 1975-11-01 121.26 123.35
12 1975-12-01 122.34 123.33 
```

# cryptography - 使用 opensl 以编程方式将 rsa 私钥从 .DER 格式转换为 .PEM 格式

> ID：13067013
> 
> 赞同：1
> 
> 时间：2012-10-25T10:53:15.390
> 
> 标签：cryptography, openssl, key, rsa

如何使用 openssl api 以编程方式将 rsa 私钥从 .DER 格式转换为 .PEM 格式。手动我可以使用 openssl exe 进行转换。请以编程方式建议如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:07:24.240

C OpenSSL API 中有一些函数，其名称`i2d_*`用于将内部类型（对于 c 编程语言是名称为 X509、RSA 的结构）解析为 DER 并将`d2i_*`DER 解析为内部类型，这就是您可以如何转换x509 证书文件从 DER 格式到 PEM 使用 c 编程语言。

```
#include <stdio.h>
#include <openssl/x509.h>

int main(int argc,char* argv[]){
    if(argc != 3) {
        printf("Usage: der2pem derfile pemfile\n");
        return 1;
    }
    // try open the derfile
    FILE* derfile = fopen(argv[1],"r");
    if(derfile) {
        // try open or create the pemfile
        FILE* pemfile = fopen(argv[2],"w+");
        if(pemfile) {
            // parse DER to internal X509 structure
            // d2i is d for DER and i for internal which means c data
            X509* internal = d2i_X509_fp(derfile,NULL);
            if(internal) {
                // write from the internal X509 to pemfile
                PEM_write_X509(pemfile,internal);
            }
            else {
                printf("wasn't possible to parse to X509 from the 'derfile'\n");
            }
            fclose(pemfile);
        }
        else {
            printf("can't create or open the 'pemfile' file\n");
            return 1;
        }
        fclose(derfile);
    }
    else {
        printf("can't open the 'derfile' file\n");
        return 1;
    }
    return 0;
} 
```

X.509 数字证书是一种至少包含以下字段的数据结构：

*   公钥所有者的专有名称，也称为主题名称
*   证书颁发者的专有名称，也称为颁发者的名称
*   公钥本身
*   证书有效的时间段，也叫有效期
*   颁发者指定的证书序列号
*   发行人的数字签名。

来源[http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.icha700/xcerts.htm](http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.icha700/xcerts.htm)

这意味着此示例不适用于任何类型的私钥、证书请求、证书吊销列表。如果您需要从这些类型的 DER 文件进行转换，则必须深入研究 OpenSSL API，因为例如私钥与加密和解密有关。

@owlstead 说的是真的……PEM 格式是`base64`DER 格式加上页眉和页脚的编码。然后我又用 c 写了一个例子，但是你需要知道正确的页眉和页脚才能创建一个完整的 PEM 文件：

```
#include <stdio.h>
#include <string.h>
#include <sys/stat.h>
#include <openssl/bio.h>
#include <openssl/evp.h>

int main(int argc,char* argv[]){
    if(argc != 5) {
        printf("Usage: der2pem_simple derfile pemfile \"-----BEGIN CERTIFICATE-----\" \"-----END CERTIFICATE-----\"\n");
        return 1;
    }
    // to create a buffer as small as possible
    // we need the size of the input file
    struct stat fistat;
    if(stat(argv[1],&fistat)<0) {
        printf("derfile not found\n");
        return 1;
    }
    // open the derfile
    FILE* derfile = fopen(argv[1],"r");
    if (!derfile){
        printf("can't open derfile\n");
        return 1;
    }
    char buff[fistat.st_size];
    // write the derfile to the buffer
    fread(buff,fistat.st_size,1,derfile);
    fclose(derfile);
    // open pemfile
    FILE* pemfile = fopen(argv[2],"w+");
    if (!pemfile){
        printf("can't open or create pemfile\n");
        return 1;
    }
    // create a BIO context with base64 filter
    BIO* bio_base64 = BIO_new(BIO_f_base64());
    // create a BIO for the pemfile
    BIO* bio_out = BIO_new_fp(pemfile,BIO_NOCLOSE);
    // write the header
    BIO_write(bio_out,argv[3],strlen(argv[3]));
    BIO_write(bio_out,"\n",1);
    // combine bio_base64->bio_out : enables base64 filter
    bio_out = BIO_push(bio_base64,bio_out);
    // write the buffer
    BIO_write(bio_out,buff,fistat.st_size);
    // flush before disable base64 filter
    BIO_flush(bio_out);
    // uncombine bio_base64 X bio_out : disables base64 filter
    bio_out = BIO_pop(bio_base64);
    // write the footer
    BIO_write(bio_out,argv[4],strlen(argv[4]));
    // flush to free the BIO resources
    BIO_flush(bio_out);
    BIO_free_all(bio_out);
    fclose(pemfile);
} 
```

这个Java示例：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import org.apache.commons.codec.binary.Base64;
//import org.apache.commons.codec.binary.Base64OutputStream;

public class der2pem {
    public static void main(String args[]) {
        if(args.length < 4) {
            System.out.println("Usage: der2pem_simple derfile pemfile \"-----BEGIN CERTIFICATE-----\" \"-----END CERTIFICATE-----\"");
            return;
        }
        FileOutputStream pemfile;
        try {
            // open the pemfile
            pemfile = new FileOutputStream(args[1]);
        } catch (FileNotFoundException e) {
            try {
                // try to create if not found
                new File(args[1]).createNewFile();
            } catch (IOException e1) {
                System.out.println(e1.getMessage());
                return;
            }
            try {
                // if created open it
                pemfile = new FileOutputStream(args[1]);
            } catch (FileNotFoundException e1) {
                e1.printStackTrace();
                return;
            }
        }
        FileInputStream derfile;
        try {
            // open the derfile
            derfile = new FileInputStream(args[0]);
        } catch (FileNotFoundException e) {
            // if not found print error and get out
            System.out.println(e.getMessage());
            try {
                pemfile.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            return;
        }
        try {
//---- last part
        // write the header to pemfile
        pemfile.write(args[2].getBytes());
        pemfile.write('\n');
        // get the size of the derfile and create a buff that fits to this file
        int derf_size = (int) new File(args[0]).length();
        byte[] buffer = new byte[derf_size];
        // read from derfile and write to buffer
        derfile.read(buffer);
        // create the Base64 object for the encoding
        Base64 base64 = new Base64(64,"\n".getBytes());
        // encode and write to pemfile
        pemfile.write(base64.encode(buffer));
        // write the footer to pemfile
        pemfile.write(args[3].getBytes());
        // flush to cleanup
        pemfile.flush();
        pemfile.close();
        derfile.close();
//---- last part end
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我尝试使用一种方法，`Base64OutputStream`但对 PEM 文件有一些意外结果。如果你想检查只是`last part`用这个替换：

```
 // write the header to pemfile
        pemfile.write(args[2].getBytes());
        pemfile.write('\n');
        // get the size of the derfile and create a buff that fits to this file
        int derf_size = (int) new File(args[0]).length();
        byte[] buffer = new byte[derf_size];
        // read from derfile and write to buffer
        derfile.read(buffer);
        // create the Base64OutputStream object for the encoding
        Base64OutputStream b64f_pemfile = new Base64OutputStream(pemfile,true,64,"\n".getBytes());
        // write to b64f_pemfile which encodes to base64
        b64f_pemfile.write(buffer);
        // flush before write the footer
        b64f_pemfile.flush();
        // write the footer
        pemfile.write('\n'); 
        pemfile.write(args[3].getBytes());
        // flush to cleanup
        pemfile.flush();
        b64f_pemfile.close();
        pemfile.close();
        derfile.close(); 
```

我编译它：

```
javac der2pem.java -classpath "$CLASSPATH:/usr/share/java/commons-codec.jar" 
```

并运行：

```
java -classpath "$CLASSPATH:/usr/share/java/commons-codec.jar" der2pem test.der tttttt "-----BEGIN CERTIFICATE-----" "-----END CERTIFICATE-----" 
```

您必须在系统中执行类似的操作。

# android - 检查光标对象是否关闭

> ID：13067015
> 
> 赞同：0
> 
> 时间：2012-10-25T10:53:25.303
> 
> 标签：android, cursor, android-sqlite

我是android的新手。是否有任何语句可用于检查游标对象和数据库是否关闭。我有两个活动 A 和 B。当我在 A 中执行某些操作时，它将转到 B。A 的数据库对象和光标对象在活动 A 中关闭。当我在 B 中按下后退按钮时，活动强制关闭。我知道这个错误是由于我的游标对象关闭造成的。有没有办法重新打开游标和数据库对象，或者我们可以检查两者是否都关闭。如果是这样，请帮助我。

我的 logcat 视图如下所示：

```
10-25 16:02:15.152: ERROR/AndroidRuntime(458): Caused by:java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT * FROM tbl_sec) 
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.sqlite.SQLiteCursor.onMove(SQLiteCursor.java:255)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:188)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:248)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at com.nagainfo.firstAp.showTime.onResume(showTime.java:84)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.app.Activity.performResume(Activity.java:3823)
10-25 16:02:15.152: ERROR/AndroidRuntime(458):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:06:52.187

`Cursor`尝试在 Activity A 中打开您的`onResume()`或`onStart()`而不是`onCreate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:06:56.177

要关闭数据库实例，请在退出活动之前执行以下操作：

```
if(db.isOpen()){
    db.close();
} 
```

要检查 Cursor 是否可用，请执行以下操作：

```
if (cursor1.isClosed())
    //Do something here 
```

# c# - 比较日期范围季度sql server

> ID：13067018
> 
> 赞同：0
> 
> 时间：2012-10-25T10:53:36.847
> 
> 标签：c#, sql, sql-server

我在系统中有策略

```
PolRef       Start            End
POL123     22/11/2012      23/12/2014
POL212     24/09/2012      23/10/2012
POL214     23/08/2012      29/09/2012 
```

我要求用户提供报告日期，用户输入 24/10/2012 这变成`@StartDate`

由此我得出季度按月计算：

```
set @currentMonth = Month(@StartDate)

if @currentMonth = 1 or @currentMonth = 2 or @currentMonth = 3 begin set @startmonth = 1 set @endmonth = 3 end

if @currentMonth = 4 or @currentMonth = 5 or @currentMonth = 6 begin set @startmonth = 4 set @endmonth = 6 end

if @currentMonth = 7 or @currentMonth = 8 or @currentMonth = 9 begin set @startmonth = 7 set @endmonth = 9 end

if @currentMonth = 10 or @currentMonth = 11 or @currentMonth = 12 begin set @startmonth = 10 set @endmonth = 12 end 
```

然后我得到一个日期范围：

```
@quarterStartDate = CAST(CAST(YEAR(@StartDate) AS varchar) + '-' + CAST(@startMonth AS varchar) + '-' + '01') AS Date)

@quarterEndDate = CAST(CAST(YEAR(@EcdDate) AS varchar) + '-' + CAST(@endMonth AS varchar) + '-' + '31') AS Date) 
```

这将给我 01-10-2012 和 31-12-2012。基本上我需要一个脚本来仅恢复本季度的政策。该政策不必跨越整个季度日期范围，只需存在于季度日期范围内。

预期的结果是

```
PolRef       Start            End
POL123     22/11/2012      23/12/2014
POL212     24/09/2012      23/10/2012 
```

出现 Pol123 是因为它跨越了季度日期范围。Pol212 存在是因为它在该季度日期范围内到期。Pol214 没有出现，因为它既没有跨越、过期也没有在本季度开始。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:59:43.653

```
Select *
  From policies
 Where Start <= @quarterEndDate
   And @quarterStartDate <= [End] 
```

如果两个开始都在另一个结束之前，那么你有一个重叠（即存在于四分之一）

但是，我会删除变量并使用这个更准确的范围：

```
Select *
  From policies
 Where Start < dateadd(q,1+datediff(q,0,getdate()),0)
   And dateadd(q,datediff(q,0,getdate()),0) <= [End] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:57:37.933

你可以试试这个

```
select * from policies where start>=@quarterStartDate
 and end<=@quarterenddate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:57:56.613

```
select *
from policies
where 
    [Start] <= @quarterEndDate and
    [End] >= @quarterStartDate 
```

要查找季度的开始和结束，您可以使用

```
declare @date datetime, @quarterStartDate datetime, @quarterEndDate datetime

select @date = convert(datetime, convert(nvarchar(8), getdate(), 112), 112)

select @quarterStartDate = dateadd(qq, datepart(qq, @date) - 1, dateadd(dd, -datepart(dy, @date) + 1, @date))
select @quarterEndDate = dateadd(dd, -1, dateadd(mm, 3, @quarterStartDate)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:57:57.840

如果 startdate 和 enddate 是日期，而不是日期时间...

```
Select * 
from policies 
where StartDate<=@quarterenddate
and EndDate>=@quarterstartdate 
```

您可能还会发现`datepart(q,getdate())`有用。

计算季度开始和结束日期

```
select @quarterstartdate = convert(varchar(4),year(@d))+'-' + CONVERT(varchar(2),(DATEPART(Q,@d))*3-2)+'-1',
       @quarterenddate= dateadd(day,-1,DATEADD(month,3, @quarterstartdate)) 
```

# php - 将 RGB 值转换为 HSV/HSL

> ID：13067024
> 
> 赞同：0
> 
> 时间：2012-10-25T10:54:04.587
> 
> 标签：php, colors, rgb, hsv, hsl

> **可能重复：**
> [PHP 中的 RGB 到 HSV](https://stackoverflow.com/questions/1773698/rgb-to-hsv-in-php)

请帮忙，我用谷歌搜索了很多脚本，但都不起作用..有人可以告诉我如何编写一个函数来进行转换吗？

# android - 在真实设备上使用 Eclipse 调试 Android 应用程序

> ID：13067026
> 
> 赞同：2
> 
> 时间：2012-10-25T10:54:12.247
> 
> 标签：android, eclipse, debugging

我已经在 Eclipse 上附加了我的真实 Android 设备并运行调试模式，应用程序在真实设备上启动并运行。添加了切换断点，但即使假设该行已经运行，它似乎也没有命中。

Error is no fix --> Source Not found --> Edit Source Lookup Path -> Project -> Select the project -> ok

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:32:31.503

遵循的一般说明：

1.  在命令提示符下执行 adb devices - 你能看到设备吗 - 是的，那很好，否则重新启动 adb 设备/重新连接设备/检查驱动程序
2.  更改项目的运行配置（右键单击->属性->运行方式->运行配置->目标）以在每次运行时提示设备。设备应启用 USB 调试。
3.  单击工具栏中的调试图标，然后选择您的设备进行调试 - 放置断点，瞧，它应该可以工作了。确保您的断点位于生成代码的位置。有时代码可能不会被命中，因为代码就是这样

这适用于 Google 认可的设备。

# .net - 在.net中获取键值对的内置方法？

> ID：13067028
> 
> 赞同：0
> 
> 时间：2012-10-25T10:54:16.320
> 
> 标签：.net

我有一个这样的字符串：

“我的财产=价值”

有没有一种快速的方法（使用内置的.net）将其转换为可用的 keyValuePair（或类似对象）？

一种解决方案是使用拆分，但我正在寻找比项目列表更具体的东西，因为只存在 2 个键 + 值。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:55:07.457

手动拆分它们并将它们粘贴在`Dictionary<String, String>`：

```
static void Main(string[] args)
{
    var input = @"Key1=Value1
                    Key2=Value2
                    Key3=Value3=Value4
                    FooBar";

    var result = CreateKeyValuePairs(input);

    foreach (var kvp in result)
    {
        Console.WriteLine("{0} = {1}", kvp.Key, kvp.Value);
    }

    // Access specific item by key:
    Console.WriteLine(result["Key2"]);
}

private static Dictionary<String, String> CreateKeyValuePairs(string input)
{
    var result = new Dictionary<String, String>();

    foreach (var line in input.Split('\n'))
    {
        var kvp = line.Trim();
        if (!String.IsNullOrEmpty(kvp))
        {
            int equals = kvp.IndexOf('=');
            if (equals > 0)
            {
                var key = kvp.Substring(0, equals);
                var value = kvp.Substring(equals + 1);

                // You might want to trim the key and value
                result.Add(key, value);
            }
            else
            {
                // Invalid key/value-pair
            }
        }
    }

    return result;
} 
```

# ios - YouTube iframe API seekTo 在 iOS 6 / iPad 3 上不起作用

> ID：13067029
> 
> 赞同：0
> 
> 时间：2012-10-25T10:54:16.910
> 
> 标签：ios, ios6, youtube-api

请参阅[http://jsfiddle.net/rCGSB/4/](http://jsfiddle.net/rCGSB/4/)。

使用`seekTo`YouTube iframe api 中的方法在 iOS 6 下使用 iPad 3 的移动 Safari 中不起作用。

视频刚开始播放。一旦视频播放完毕，seekTo 方法就会起作用。但是，如[https://developers.google.com/youtube/iframe_api_reference#Playback_controls](https://developers.google.com/youtube/iframe_api_reference#Playback_controls)对于 seekTo 方法所述：

*"寻找视频中的指定时间。如果调用该函数时播放器暂停，则保持暂停状态。如果从另一个状态（正在播放、视频提示等）调用该函数，播放器将播放视频。”*

因此，即使没有播放，视频也应该在指定时间开始播放。而且由于我通过点击进行交互，因此移动 Safari 下禁用的自动播放应该不是问题。

它适用于我测试过的所有桌面浏览器（FF、Safari、Mac OS 下的 Chrome）。

这在iOS下是​​否有效？随意编辑和更新小提琴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:03:56.723

能够从某个时间点播放 YouTube 视频是我长期以来一直感兴趣的事情。

我发现这一点基于 iframe 的标记是有效的，至少在 iOS 6 上是这样：

```
<iframe width="480" height="270" src="http://www.youtube.com/embed/n1-OKPmQyh4?fs=1&feature=oembed&start=533" frameborder="0" allowfullscreen="1"></iframe> 
```

诀窍是您用于 iframe 的 URL 中的“开始”参数

我也希望“自动播放”参数能够工作，但据我了解，Apple 会阻止这种情况发生，以避免用户查看网络内容时产生过多的数据费用。

# machine-learning - 机器学习的概率基础

> ID：13067030
> 
> 赞同：5
> 
> 时间：2012-10-25T10:54:19.530
> 
> 标签：machine-learning, probability

我最近开始学习机器学习，发现我需要刷新概率基础知识，例如条件概率、贝叶斯定理等。

我正在寻找可以在机器学习中快速复习概率概念的在线资源。

我偶然发现的在线资源要么非常基础，要么太高级。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T08:10:54.103

这可能会有所帮助：[http ://www.cs.cmu.edu/~tom/10601_fall2012/lectures.shtml](http://www.cs.cmu.edu/~tom/10601_fall2012/lectures.shtml)

以上链接来自 Tom Mitchell 的机器学习课程 @ CMU。视频也可用。如果您浏览所有视频，您将对 ML 概念有很好的理解。（或者只是条件概率、贝叶斯定理等的前几个视频）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:27:11.743

条件概率和贝叶斯定理的概念本身是非常基本的。您可能会说，它没有比概率建模更基础的了。这表明您没有很好地查看您找到的内容，或者根本没有真正进行任何搜索。

在我的脑海中，我可以列举两个资源：首先，任何涉及概率或机器学习的[Coursera课程（参见 AI、Statistics One 或概率图形模型）都包含这些预备知识。](https://www.coursera.org/)其次，网上有很多关于统计的书籍，例如[信息论、推理和学习算法](http://www.inference.phy.cam.ac.uk/mackay/itila/book.html)。

# java - 如何从片段 Android 访问活动变量

> ID：13067033
> 
> 赞同：72
> 
> 时间：2012-10-25T10:54:27.013
> 
> 标签：java, android, android-activity, fragment

在活动中我有：

```
public class tabsmain extends Activity{
    public static Context appContext;

    public boolean lf_ch=false;

    public void onCreate(Bundle savedInstanceState){ 
```

我想从 tabsmain 中的片段访问并可能更改 lf_ch；

```
public class tabquests extends Fragment{ 
    public CheckBox lc;
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)//onCreateView
    { 
lc.setChecked(//set it to lf_ch); 
```

但是，我似乎无法访问 lf_ch 的值。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-25T10:58:35.607

尝试这个：

```
public View onCreateView(...){
  tabsmain xxx = (tabsmain)getActivity();
  lc.setChecked(xxx.lf_ch);
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-03-21T19:04:39.793

我知道这是一个老问题，但是这是一个简单的答案，无需跳过任何环节即可工作。在您的片段中定义一个变量，该变量是片段将在其中的活动，然后在 onCreateView 中将变量连接到活动，然后您有一个可以访问主活动中任何公共变量的引用。当我结束这里时，我已经忘记了。由于您需要找到正在显示的确切片段，因此执行其他方式有点困难。但是，有了这个，您就不需要以其他方式进行操作，因为您可以轻松地来回传递事物。我希望这对遇到它的人有所帮助。

```
public Quiz_Avtivity mainQuiz;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.fragment_quiz, container, false);

mainQuiz = (Quiz_Avtivity) getActivity();
//Below is where you get a variable from the main activity
mainQuiz.AnyPublicVariable = whatEver;
//also
whatEver = mainQuiz.AnyPublicVariable 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2020-01-10T05:19:07.453

如果您使用的是 Java，则可以使用

```
((YourActivityName)getActivity()).variableName 
```

访问，如果你使用 Kotlin，你可以使用

```
(activity as YourActivityName).variableName 
```

如果变量在 kotlin 中定义为 null，您还必须尝试以下每种方法：-

```
(activity as? YourActivityName).variableName

(activity as? YourActivityName)!!.variableName 
```

或者如果可能的话，必须使用 let 块。

为您选择正确的！

希望，它会有所帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-01-27T14:45:49.477

# 制作一个通用的 Result 接收器

[![在此处输入图像描述](../Images/cd186912ad24d95745c7dee46a3583a8.png)](https://i.stack.imgur.com/uXZ1s.png)

您可以为此任务创建一个接口，该接口将从任何活动中获取字符串数据到您的片段。按着这些次序。

**创建接口**

```
public interface MyResultReceiver{

      public String getResult();     

} 
```

**成为`MyResultReceiver`您的 Fragment 的成员**

```
public class tabquests extends Fragment{ 

    public CheckBox lc;
    public MyResultReceiver resultreceiver;

    @Override
    public void onAttach(Context context){
         super.onAttach(cotext);
         resultreceiver = (MyResultReceiver)context;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)//onCreateView
    { 

           YourFragment code code

           Boolean result = resultreceiver.getResult();
           lc.setChecked(result);

     }

} 
```

**`MyResultReceiver`在Activity中实现并覆盖方法**

```
public class tabsmain extends Activity implements MyResultReceiver{

        public boolean lf_ch=false;

        // Activity code

        @Override
        public boolean getResult(){
             return lf_ch;
        }

 } 
```

## 免责声明：

对于这种情况，您可能会发现它有点冗长。但是这种方法的优点是，如果您想将此代码重用于另一个活动。您将不必再次编写相同的逻辑。只需`MyResultReceiver`在您的活动中实现，覆盖该方法，您就可以开始了。

**提示：**为了能够获取任何类型的数据，请将接口中的方法定义
**从** `public String getResult();` **更改为** `public Object getResult();`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-07-17T11:11:42.703

取片段中的 Activity 值。

((MainActivity) getActivity()).mGoogleApiClient;

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-06T13:35:55.947

从活动中获取数据的另一种方法是通过以下方式访问活动的意图：

```
getActivity.getIntent().getExtras(); 
```

等等。

如果您在 xml 中使用片段开始活动，并且希望以某种方式控制片段的 onCreate() 行为，这将很有用。

PS：当然你应该先把一些东西放在意图上

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-19T05:46:35.557

您可以尝试以下方法：

```
lc.setChecked(((yourpackagename)getActivity()).lf_ch); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-06T20:34:57.503

try this

```
public boolean lf_ch=false;
public class tabsmain extends Activity{

    public static Context appContext;
    public void onCreate(Bundle savedInstanceState){ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-25T11:00:58.040

尝试`tabsmain.appContext.lf_ch`会给你该变量的值。

也在那个活动集中`appContext = this`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-30T13:49:39.457

请注意，您的片段在活动之前加载。所以，你必须打电话给

```
tabsmain tabsm=(tabsmain) getActivity(); 
```

线入`onActivityCreated()`法

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-31T09:01:57.573

尝试这样的事情：

```
 ViewPager mViewPager = (ViewPager) getActivity().findViewById(R.id.m_view_pager); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-29T12:45:04.827

访问片段中的活动变量以使用静态关键字，如下所示：

**MainActivity.java**

```
public static boolean lf_ch=false; 
```

**tabquestsFragment.java**

```
boolean if_value=MainActvity.lf_ch; 
```

希望对你有帮助

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-08T07:07:22.820

解决方案：你可以试试这个。

在 tabquests Fragment 中使用这个，

```
public class tabquests extends Fragment{ 
    private tabsmain tabsmainActivity;
    public CheckBox lc;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup 
         container,Bundle savedInstanceState)//onCreateView
    { 
        tabsmainActivity = (tabsmain)getActivity; //typecasting 
        //now you can access the variables of tabsmain activity and make 
        //sure you give them public access in the activity`
        tabsmainActivity.lf_ch; //or do whatever operation you want here.
        lc.setChecked(//set it to lf_ch);
    } 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-07-09T22:03:27.680

更改： `public boolean lf_ch=false;`至：`public static boolean lf_ch=false;` 您可以通过以下方式访问/更改值：`tabsmain.lf_ch`

# javascript - 此代码似乎不会触发此按钮。怎么了？

> ID：13067034
> 
> 赞同：11
> 
> 时间：2012-10-25T10:54:30.350
> 
> 标签：javascript, jquery, advertisement-server

我正在为一个客户做一些事情，一个代理机构已经构建了一点 jQuery 来触发一个 DoubleClick Floodlight 代码，但由于某种原因该代码不起作用：

```
<script type="text/javascript">
$(function () {

    //var origOnClick = $('#trackingButton').attr("onclick");
    $('#trackingButton').click(fireFloodlight);
    function fireFloodlight() {
        if (Page_IsValid) {
            var axel = Math.random() + "";
            var a = axel * 10000000000000;
            $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
            //eval(origOnClick);
        }
    }

});
</script> 
```

对我来说，这个脚本看起来不错，但在实时环境中，`ad.doubleclick.net`从来没有调用过“”？任何帮助将非常感激。奇怪的是，标签一直工作到本周末，但现在没有记录任何动作？

编辑：我做了一个`console.log(Page_IsValid)`返回的`True`.

编辑：这是相关按钮的 HTML：

```
<input type="submit" name="ctl00$ctl00$ctl00$BodyPlaceHolder$BodyPlaceHolder$WizardContentPlaceHolder$WizardCollectBasicSMEInfo$trackingButton" value="Get your quick quote" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ctl00$ctl00$BodyPlaceHolder$BodyPlaceHolder$WizardContentPlaceHolder$WizardCollectBasicSMEInfo$trackingButton&quot;, &quot;&quot;, true, &quot;Form&quot;, &quot;&quot;, false, false))" id="trackingButton" class="button" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T23:00:57.410

您已经准备好文档上的函数，您的问题是您以错误的方式调用该函数，如果您想这样调用该函数，您应该将其声明为函数表达式（[有关更多信息，请参阅此链接中的函数表达式](http://javascript.info/tutorial/functions-declarations-and-expressions)):

```
$(function () {

var fireFloodlight = function()  {
    if (true) {
        var axel = Math.random() + "";
        var a = axel * 10000000000000;
        $("body").append('<img src="http://tejedoresdesuenos.com.mx/wp-content/uploads/2011/06/google.jpg" width="50" height="10" alt=""/>');
        alert('ello');
    }
}

$('#trackingButton').click(fireFloodlight);

}); 
```

一个工作[示例](http://jsfiddle.net/VH7xS/8/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T17:10:19.657

尝试这个：

```
 //var origOnClick = $('#trackingButton').attr("onclick");
        $('#trackingButton').live("click", function(){

            if (Page_IsValid) {
                var axel = Math.random() + "";
                var a = axel * 10000000000000;
                $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
                //eval(origOnClick);
            }
         }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T20:03:27.220

如果此代码在`head`您的 HTML 文件的标记中，它将无法正常工作。JavaScript 将在页面完成呈现之前尝试执行。因此，当代码执行时，`input`根据解析器，标签将不存在。您可以将它放在[文档就绪函数](http://api.jquery.com/ready/)中，或者您可以简单地将`script`标签放在 HTML 文档的末尾（结束`body`标签之前）。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#trackingButton').click(fireFloodlight);
        function fireFloodlight() {
            if (Page_IsValid) {
                var axel = Math.random() + "";
                var a = axel * 10000000000000;
                $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
            }
        }
    });
</script> 
```

此外，除非您`fireFloodlight`在其他 onclick 函数中使用该函数，否则您可以将其作为匿名函数传入。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#trackingButton').click(function() {
            if (Page_IsValid) {
                var axel = Math.random() + "";
                var a = axel * 10000000000000;
                $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
            }
        });
    });
</script> 
```

最重要的是，如果您使用的是最新版本的 jQuery，您需要`.on()`使用`.live()`,`.delegate()`或`.click()`. 前两个现在在最新版本的 jQuery 中在技术上已被弃用（尽管我非常怀疑它们会在一段时间内被删除）并且，如果我没记错`.click()`的话，它`.on()`只是`.on()`.

我会给你两个例子来说明如何使用`.on()`.

第一个示例是在`#trackingButton`最初加载页面后简单地将事件添加到元素。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#trackingButton').on('click',function() {
            if (Page_IsValid) {
                var axel = Math.random() + "";
                var a = axel * 10000000000000;
                $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
            }
        });
    });
</script> 
```

这里的第二个示例通过将事件附加到父元素并在`bubbles`将 DOM 向上传递到父元素之后执行函数来工作，并且目标元素与第二个参数中提供的选择器匹配。它通常用于将事件附加到可能在初始加载后动态添加/删除/重新添加到页面的元素。

```
<script type="text/javascript">
    $(document).ready(function () {
        $(document).on('click','#trackingButton',function() {
            if (Page_IsValid) {
                var axel = Math.random() + "";
                var a = axel * 10000000000000;
                $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
            }
        });
    });
</script> 
```

我希望这些例子有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T22:01:02.203

此代码触发`onclick`事件以及*绑定*到选择器的`click`事件：*`#trackingButton`*

 *您可以移动`onclick`事件以触发函数，而不是使其内联：

```
<input type="submit" onclick="myPostBack()" name="ctl00$ctl00$ctl00$BodyPlaceHolder$BodyPlaceHolder$WizardContentPlaceHolder$WizardCollectBasicSMEInfo$trackingButton" value="Get your quick quote" id="trackingButton" class="button" /> 
```

....然后是js：

```
function myPostBack() {
/*
    WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$ctl00$ctl00$BodyPlaceHolder$BodyPlaceHolder$WizardContentPlaceHolder$WizardCollectBasicSMEInfo$trackingButton", "", true, "Form", "", false, false))
*/
    alert("postback executed")
} 
```

**注意**：我设置了一个警报作为示例，以验证该`myPostBack`功能是否已执行。

如果`WebForm_DoPostBackWithOptions`未执行，请检查您是否有语法错误（使用`&quot;`触发器 js 错误）并且您传递了正确的参数...[检查此](http://forums.asp.net/p/1130615/1791269.aspx)以获取更多信息。

...js（继续）

```
function fireFloodlight() {
    if (Page_IsValid) {
        var axel = Math.random() + "";
        var a = axel * 10000000000000;
        $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
        //eval(origOnClick);

        // append another image for verification purposes
        $("body").append('<img src="http://www.devaldi.com/wp-content/uploads/2009/10/jquery-logo.gif" alt="jquery" />')
    }
}

$(function() {
  // using .on() requires jQuery 1.7+
    $('#trackingButton').on("click", function() {
        fireFloodlight();
    });
}); 
```

假设那`Page_IsValid`应该`true`可以工作...[查看 JSFIDDLE](http://jsfiddle.net/kr8Xk/)示例...如果一切顺利，您应该会看到回发警报以及 jQuery 图像；）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-30T11:04:01.753

您实际上已经为同一个事件分配了两个事件处理程序给同一个元素。据我所知，这应该是不可能的。

此外，您应该将函数调用包装在匿名函数中，如下所示：

```
$('#trackingButton').click( function() {

    fireFloodlight();

}); 
```

您可能希望避免直接在 HTML 标记中分配事件处理程序，这通常被认为是一种不好的做法。

确保您的 #trackingButton 在您调用时已存在于 DOM 中，尝试为其分配点击事件处理程序。

还要确保控制台日志中没有错误，并且在您尝试分配事件处理程序时没有其他插件或脚本正在修改 DOM。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-31T10:01:25.253

您的 html 节点具有显式`onclick`属性，根据您的代码，该属性未停用。

做什么`WebForm_DoPostBackWithOptions`？如果在某些配置中，此函数返回`false`，它将阻止调用其他处理程序。

如果您可以对生成 html 的代码采取行动，我建议您`onclick`从节点中删除此属性，并将其声明为 jquery click 处理程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T07:10:56.050

提交按钮可能正在触发请求，因此您永远看不到图像被添加到正文中。 `event.preventDefault()`可能会解决这个问题。

```
$('#trackingButton').click(function(event) {
    event.preventDefault();
    if (Page_IsValid) {
        var axel = Math.random() + "";
        var a = axel * 10000000000000;
        $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
        //eval(origOnClick);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-25T11:07:22.197

你如何添加你的#trackingButton？如果您是通过 jQuery 执行此操作，请使用**on**而不是**click**

```
 $('body').on('click','#trackingButton',function(){
      console.log("Page_IsValid: "+Page_IsValid);
      if (Page_IsValid) {
        var axel = Math.random() + "";
        var a = axel * 10000000000000;
        $("body").append('<img src="https://ad.doubleclick.net/activity;src=2499215;type=axa_l124;cat=lpg_g263;ord=' + a + '?" width="1" height="1" alt=""/>');
      }
    }); 
```

Page_IsValid 应该是 true，并且你的 img 应该被添加到 DOM 中。

它奏效了吗？*

# web-services - UTL_DBWS - SOAPException：解析信封时出错

> ID：13067037
> 
> 赞同：1
> 
> 时间：2012-10-25T10:54:48.200
> 
> 标签：web-services, oracle, parsing, soap, envelope

我希望有一个人可以帮助我。我的问题是我似乎无法从 Oracle 调用任何 Web 服务（Oracle 数据库 10g 企业版版本 10.2.0.5.0。）

我正在处理的 Web 服务可以从浏览器界面调用，但是当从 Oracle 调用时，我收到以下错误消息：

> 11:12:10 ORA-29532：Java 调用被未捕获的 Java 异常终止：java.rmi.RemoteException：java.rmi.RemoteException：；嵌套异常是：
> 
> 11:12:10 动态调用错误：javax.xml.soap.SOAPException: Error parsing envelope
> 
> 11:12:10 ORA-06512：在“SYS.UTL_DBWS”，第 404 行
> 
> 11:12:10 ORA-06512：在“SYS.UTL_DBWS”，第 401 行
> 
> 11:12:10 ORA-06512：在“SYS.ADD_NUMBERS”，第 39 行

所以我找到了一个使用公共可用网络服务的示例。但我仍然得到同样的错误。

[http://www.oracle-base.com/articles/9i/sumption-web-services-9i.php](http://www.oracle-base.com/articles/9i/consuming-web-services-9i.php)

我发现了另一个带有此错误的 stackoverflow 主题。但解决方案是完成java安装。但是我找不到更多关于该做什么或如何知道安装何时出现问题的信息。

[UTL_DBWS - 从 Oracle 调用 Web 服务](https://stackoverflow.com/questions/6493433/utl-dbws-calling-a-web-service-from-oracle)

任何想法如何解决这一问题？

# javascript - 有没有办法删除只读且不可配置的属性？

> ID：13067040
> 
> 赞同：1
> 
> 时间：2012-10-25T10:54:56.740
> 
> 标签：javascript, defineproperty

我认为答案是“不”，除了删除对包含对象的所有引用并允许垃圾收集最终删除包含对象的所有内容。

[**实时示例**](http://www.sanbarcomputing.com/flat/forumPosts/src/testROProperties/testROProperties.html)（使用控制台查看日志输出（在 Chrome 中按 F12 等））

代码：

```
(function () {

    var nameValue = "uninitialized";

    Object.defineProperty(this, "name", {
        enumerable: true,
        configurable: false,
        get: function () {
            return nameValue;
        },
        set: function () {
            console.log("This is a read-only property");
        }
    });
    console.log(nameValue);
    nameValue = "George";
    delete this.name;
    this.name = "";
    console.log(this.name);
})(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-09-16T08:12:44.713

这个答案恰好是对 TypeScript 的同一查询的第一个结果，所以我将在 TypeScript 的情况下添加它，使用如下类：

```
export default class Demo {
  public readonly demo: string = 'demo';

  public clear() {
    delete this.demo;
  }
} 
```

你会从 TypeScript 中得到这个错误：*删除操作符的操作数不能是只读属性*。

不幸的是，一个解决方法是经典的：`delete (this as any).demo`.

…这当然是除非你愿意让你的财产读写。

我还应该补充一点，这与 JavaScript 案例非常不同，因为 TypeScript 不会发出`Object.defineProperty`，它会发出`this.demo = 'value'`，所以你不是在解决 OP 的运行时问题，而是在编译时，它是 TS 编译器，它是类型系统寻找你而不是 JS 运行时。

这两种情况在谷歌搜索时恰好重合的原因只是它们共享相同的命名法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T13:05:29.677

> **当且仅当可以更改此属性描述符的类型并且可以从相应对象中删除该属性时，才可**配置为 true。**默认为假。**
> 
>  **[MDN 上的 Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)**

 **所以我同意你的观点，这是不可能的。

正如您所提到的，您可以删除整个对象，如果您首先复制所有可配置的属性，那么实际上已经删除了它们。如果这样做，请注意对原始对象的任何其他引用都不会受到影响。**

# php - 连接数据库时出现PHP错误

> ID：13067042
> 
> 赞同：0
> 
> 时间：2012-10-25T10:55:03.303
> 
> 标签：php, database, database-connection

我正在尝试连接到使用此代码创建的数据库：

```
<?php
function Conectarse()
{
    $host="localhost";
    $user="root";
    $password="root";
    $bda="toobebe_catalogo";

    if (!($link=mysql_connect($host,$user,$password)))
    {
        echo "Error conectando a la base de datos.<br>";
        exit();
    }
    else
    {
        echo "Éxito conectando con la base de datos.<br>";
    }

    if (!mysql_select_db($bda,$link))
    {
        echo "Error seleccionando la base de datos.<br>";
        exit();
    }
    else
    {
        echo "Éxito al encontrar la base de datos.<br>";
    }
    return $link;
}

$conn=Conectarse();

$sql="SELECT * FROM toobebe-octubre";
$db_fila = mysql_query($sql,$conn);
$ok=1;

while (($row = mysql_fetch_array($db_fila)) && $ok) 
{
    $valor=mysql_query($sql,$conn);

if(!$valor)
{
    $ok=0;
}   
} 
```

?>

但是当我执行它时它会引发这个错误：

```
 Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in ... 
```

我一直在搜索，并且知道： - 数据库存在

*   权限是正确的

*   表存在

*   表不为空

知道为什么会发生这个错误吗？

**编辑：** 添加了错误的图像： ![图像错误](../Images/5360c821f4ba936bf1b2cf9a898e8b2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:59:02.357

错误不在于连接到数据库，而在于您的查询。您的表名中有一个连字符，因此您应该尝试将其括起来，如下所示：

```
$sql = "SELECT * FROM `toobebe-octubre`";
$db_fila = mysql_query($sql, $conn);
$ok = 1;

while(($row = mysql_fetch_array($db_fila)) && $ok) 
{
    $valor=mysql_query($sql, $conn);
    if(!$valor)
    {
       $ok=0;
    }   
} 
```

只是一些提示，`mysql_*`现在严重不推荐使用。你真的应该`mysqli_*`至少使用 PDO。

此外，`SELECT *`这通常被认为是一种不好的做法，因为我真的怀疑你确实需要桌子上的*所有东西*。

# wordpress - 就 SERP 而言，静态 URL 是否优于动态 URL？

> ID：13067045
> 
> 赞同：0
> 
> 时间：2012-10-25T10:55:08.223
> 
> 标签：wordpress, seo

我一直在阅读 SEO 以及如何在获得更好的 SERP 方面构建我的链接。

我使用 WordPress 作为我网站的框架，并使用自定义模板从我的数据库中检索数据。

使 URL 动态化的原因是`?`和的使用`&`。不多也不少。Google 建议我的 URL 中不应包含太多属性 - 这是可以理解的。

动态：`www.mysite.com/?id=123&name=some+store+name&city=london`
静态：`www.mysite.com/london/some+store+name/123`

Q1：我不觉得在这个静态 URL 中添加商店 ID 看起来不错。但我确实需要它才能从数据库中获取数据，对吧？

阅读各种博客，我看到许多 SEO（专家）在说不同的事情，但我觉得大部分只是谈论而没有实际证明他们的陈述。我们都同意静态 URL 在可用性（和可读性）方面是好的。

Q2：但许多人声称静态 URL 可以防止重复内容。我不同意这一点，因为我所有的内容都有唯一的 ID。任何人都可以对此发表评论吗？

Q3：最后，对于谷歌搜索引擎（和其他）来说，URL 是静态的还是动态的并不重要。但是，既然 Google 正在努力开发用户友好的内容，那么这是拥有静态 URL 的唯一理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:19:48.687

1) 在静态 URL 旁边使用 DB id 没有问题。许多大型电子商务和其他商业网站都这样做（亚马逊、eBay……见鬼，每个人都是真的。）

2) 静态 URL 本身并不能防止重复内容。发生重复的方式有数百种（子页面、外部副本、javascript、表单字段、ajax、存档部分......列表中的敌人。）

3）索引是静态的还是动态的都没关系。但就排名而言，具有信息量（并且与目标关键字相关）搜索的静态 URL 非常有益。我所做的多变量测试表明，用户通常也会通过看起来干净的 URL 在可用性方面得到保证。

如果你再给我一些例子，我可能会提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:48:24.193

没有参数的网址总是更好。它不会绝对杀死 SEO - 但最好不要拥有它们。

!0 年前，Google 会忽略参数，并对带有参数的 URL 进行处罚。今天他们真的很擅长弄清楚这些数据库参数——但并不完美。除其他事项外，Google 必须尝试找出哪些 URL 参数重要，哪些不重要，以及参数顺序是否重要。

例如，您可能有存储用户偏好、导航状态等的 URL 参数。这只会增加 Google 必须尝试解码的 URL。所以你应该做的是：

1.  在生成 URL 之前，至少对参数进行排序。
2.  将重要的参数转换成看起来不像参数的东西。因此，如果我有一家鞋店，其网址为[http://mystore.com/mypage?category=boots&brand=great&color=red](http://mystore.com/mypage?category=boots&brand=great&color=red)我会将其重写为[http://mystore.com/mypage/category/boots/品牌/伟大/颜色/红色](http://mystore.com/mypage/category/boots/brand/great/color/red)甚至更好： http: [//myscore.com/mypage/boots/great/red](http://myscore.com/mypage/boots/great/red)

然后可以在最后添加与页面内容无关的参数。谷歌会发现它们无关紧要。

修复 URL 的另一个原因是 Goolge 在 SERP 中将它们显示给用户，人们更有可能点击可读的 URL，而不是数据库 URL。

为什么像亚马逊这样的大商店使用数据库 URL？因为它们是巨大的，糟糕的 url 不会伤害它们，而且它们的系统如此庞大和复杂，这是管理它的唯一方法。但是对于产品较少的小型网站，可读的 URL 是可以实现的，并且是小型网站相对于大型网站的少数优势之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T09:54:08.617

如果有人仔细观察 Google SERP 结果肯定会发现 SERP 结果的某些部分也被突出显示和粗体。现在注意到进一步可以很容易地发现“搜索查询”在“标题”、“描述”和“URL”中被突出显示或加粗，他们也在标题、描述和 URL 中使用相同的“搜索查询”。

现在的问题是，如果任何网站 URL 是动态的并且带有参数 ID，它们也会丢失标题、描述和 URL 中的关键字。

前任：

[http://www.johnzaccheofineart.com/catagory-2/?id=4](http://www.johnzaccheofineart.com/catagory-2/?id=4)

[http://www.johnzaccheofineart.com/painting/johnzaccheo](http://www.johnzaccheofineart.com/painting/johnzaccheo)

样品搜索 : 出售绘画

现在我们可以很容易地理解静态和动态 URL 性能之间的区别。一个 URL 带有没有搜索值的此类词，另一个 URL 带有类别名称以及画家名称。

因此，作为用户，我将优先考虑从 URL 本身可以理解的第二个。

# sql - 如何在 SQL 中获取最大的复合数据？

> ID：13067047
> 
> 赞同：0
> 
> 时间：2012-10-25T10:55:15.157
> 
> 标签：sql, sql-server, nested, max, composite

```
SELECT "Name""Month","Year","Value" 
from Table
WHERE 
    "Name" LIKE '%JERRY%'
AND "Year" = 
    (SELECT MAX("Year") FROM Table where "Name" LIKE '%JERRY%')
AND "Month"= 
    (SELECT MAX("Month") FROM Table 
     where 
        "Name" LIKE '%JERRY%' 
    AND "Year"= (SELECT MAX("Year") FROM Table where "Name" LIKE '%JERRY%')) 
```

表 -->

```
Name  | Year | Month | Value
-----------------------------
JERRY   2012    9        100           
JERRY   2012    9        120         
JERRY   2012    9        130           
JERRY   2012    8         20        
JERRY   2011    12        50 
```

所以我想要前三行作为输出。至于最近一年的最近一个月，我需要所有的值。有人可以建议一个更好的更清洁的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:39:16.293

如果表中还有其他人，那么您可能想要使用排名功能：类似于：

```
 DECLARE @sample TABLE (
      [Name] VARCHAR(255)
    , [Year] INT
    , [Month] INT
    , [Value] INT
    )

INSERT @sample ([Name], [Year], [Month], [Value])
VALUES ('JERRY', 2012, 9, 100)           
     , ('JERRY', 2012, 9, 120)
     , ('JERRY', 2012, 9, 130)
     , ('JERRY', 2012, 8, 20)
     , ('JERRY', 2011, 12, 50)
     , ('FRED', 2011, 12, 50)
     , ('FRED', 2011, 12, 120)
     , ('FRED', 2011, 7, 150)

SELECT *
FROM (
    SELECT *
         , RANK() OVER (PARTITION BY [Name] ORDER BY [Year] DESC, [Month] DESC) AS [rnk]
    FROM @sample
    )
    AS samp
WHERE
    samp.[rnk] = 1 
```

这给出了结果：

```
名称 年 月 值 rnk
------------- ----------- ----------- --- -------- ------
弗雷德 2011 12 50 1
弗雷德 2011 12 120 1
杰瑞 2012 9 100 1
杰瑞 2012 9 120 1
杰瑞 2012 9 130 1

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:22:54.970

```
select * from @t where
[Year] = (select max([year]) from @t) and 
[Month] = (select max([Month]) from @t where [Year]=(select max([year]) from @t)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:23:09.257

```
DECLARE @t Table(Name Varchar(30),[Year] Int, [Month] Int,Value Int)
Insert Into @t Values('JERRY' ,  2012,    9,        100 )
Insert Into @t Values('JERRY',   2012,    9 ,       120)         
Insert Into @t Values('JERRY' ,  2012,    9 ,       130)           
Insert Into @t Values('JERRY',   2012 ,   8 ,        20)        
Insert Into @t Values('JERRY',   2011,    12 ,       50) 

Declare @LatestYr Int 
Declare @LatestMonth Int

Select @LatestYr= Max([Year])From @t
Select @LatestMonth = Max([Month]) From @t Where [Year] = @LatestYr

Select * From @t
Where ([Year] = @LatestYr And [Month] = @LatestMonth) 
```

**结果**

![在此处输入图像描述](../Images/9e7973e97a85dc3d2169582a995f1843.png)

上述查询仅适用于单个用户。并且对于多个用户将失败，或者在平局的情况下。例如，考虑以下场景

![在此处输入图像描述](../Images/a14c43dc1082853b0b11be69090ca930.png)

在这种情况下，所需的输出将是

![在此处输入图像描述](../Images/0b6ba17521283ad11400062d0b19999a.png)

因此，为了处理这种情况，我提出以下解决方案

**解决方案 1**

```
Select t.* 
From @t t
Join
(
    Select x.Name,x.Max_Year,y.Max_Month
    From
        (   SELECT Name,Max_Year = Max([Year])
            From @t
            Group By Name
        )x
    Join
        (   SELECT Name,[Year],Max_Month= Max([Month])
            From @t
            Group By Name,[Year]
        )y On x.Name = y.Name And x.Max_Year = y.[Year]
)x
On t.Name = x.Name 
And t.[Year] = x.Max_Year 
And t.[Month] = x.Max_Month 
```

或者

**解决方案 2 (Sql Server 2005+)**

```
Select Name,[Year],[Month],Value
From
(
    Select *,Rn = Rank() Over(Partition By Name Order By [Year] desc, [Month] Desc) 
    From @t
)X Where X.Rn =1 
```

**解决方案 3（Sql Server 2005+）**

```
Select Name,[Year],[Month],Value
From
(
    Select *,Rn = Dense_Rank() Over(Partition By Name Order By [Year] desc, [Month] Desc) 
    From @t
)X Where X.Rn =1 
```

ddl如下

```
DECLARE @t Table(Name Varchar(30),[Year] Int, [Month] Int,Value Int)
Insert Into @t Values('JERRY' ,  2012,    9,        100 )
Insert Into @t Values('JERRY',   2012,    9 ,       120)         
Insert Into @t Values('JERRY' ,  2012,    9 ,       130)           
Insert Into @t Values('JERRY',   2012 ,   8 ,        20)        
Insert Into @t Values('JERRY',   2011,    12 ,       50) 
Insert Into @t Values('FERRY' ,  2010,    9,        100 )
Insert Into @t Values('FERRY',   2010,    9 ,       120) 
Insert Into @t Values('FERRY',   2010,    8 ,       120) 
Insert Into @t Values('JERRY1' ,  2012,    9,        100 )
Insert Into @t Values('JERRY1',   2012,    9 ,       120)         
Insert Into @t Values('JERRY1' ,  2012,    9 ,       130)           
Insert Into @t Values('JERRY1',   2012 ,   8 ,        20)        
Insert Into @t Values('JERRY1',   2011,    12 ,       50) 
```

希望这可能会有所帮助。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T02:38:44.553

```
select * 
from    your_table
where   "Name" LIKE '%JERRY%' 
and     year*100+month 

in(
    select top 1 year*100+month 
    from your_table
    where 
    "Name" LIKE '%JERRY%' 
    order by cast(year*100+month as int) desc) 
```

# [点击演示](http://www.sqlfiddle.com/#!3/d0a03/7)

# javascript - 相对定位粘贴（固定）元素

> ID：13067056
> 
> 赞同：0
> 
> 时间：2012-10-25T10:55:37.187
> 
> 标签：javascript, html, css

如何通过处理调整大小事件将`fixed`元素定位在左侧？`div`

这是示例：http: [//jsfiddle.net/yHERk/10/](http://jsfiddle.net/yHErk/10/)

现在我的屏幕分辨率`.skicked`就在`.container`. 但如果我只是调整结果窗口的大小，它就会改变。有没有一种简单的方法来做我想做的事情？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:01:40.927

目前，您的`.sticked`div 没有相对父级来保存它，因此它会根据重新调整大小移动。

`.sticked` `div`在里面添加`container div.`

**CSS**

```
.container {
    width: 300px;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid;
    background: #dedede;
    padding: 10px; position:relative
}

.sticked {
    position: absolute;
    top: 100px;
    left: -50px;
    border: 1px solid;
    border-radius: 5px;
    padding: 10px;
    background: white;
} 
```

​<strong> [DEMO](http://jsfiddle.net/yHErk/11/)

# html - 自定义字体在 webkit 浏览器上不起作用

> ID：13067061
> 
> 赞同：0
> 
> 时间：2012-10-25T10:56:08.543
> 
> 标签：html, css, font-face, webfonts

有人可以帮我解决这个问题吗：我有这个字体：

```
@font-face {
    font-family: 'Museo500Regular';
    src: url('MuseoSans_500-webfont.eot');
    src: local('?'), 
    url('MuseoSans_500-webfont.woff') format('woff'), 
    url('MuseoSans_500-webfont.ttf') format('truetype'), 
    url('MuseoSans_500-webfont.svg#webfontr3rD8cn7') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

这在 webkit 浏览器上不起作用，我不明白为什么...... O 其他浏览器，如 firefox 或 IE，它工作得很好，但只有在 webkit 上渲染不好。

在这里，您在带有下拉菜单的测试页面上有一个示例，例如，只需查看其他浏览器和 google chrome 上的字体。

[http://mainpage.ueuo.com/](http://mainpage.ueuo.com/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:51:01.893

我已经下载了你的 MuseoSans_500-webfont.ttf.. 看起来它不是一个有效的字体......或者没有在服务器上正确上传......请重新上传......

或转到以下链接并生成您的字体 css... [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

```
@font-face {
    font-family: 'Museo500Regular';
    src: url('museosans_500-webfont-webfont.eot');
    src: url('museosans_500-webfont-webfont.eot?#iefix') format('embedded-opentype'),
         url('museosans_500-webfont-webfont.woff') format('woff'),
         url('museosans_500-webfont-webfont.ttf') format('truetype'),
         url('museosans_500-webfont-webfont.svg#_.regular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:53:29.873

去掉字体名称中的单引号，不需要单个字体，只需要多个字体

```
font-family: Museo500Regular; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:10:32.230

您的 CSS 定义在第 11 行`@font-face`有一个狂野（请参阅 参考资料）。这可能会给您带来一些问题。`}``default.css`

另外，请，请，请不要使用 a`table`为您的布局！

# java - Java中的嵌套正则表达式匹配

> ID：13067062
> 
> 赞同：1
> 
> 时间：2012-10-25T10:56:11.733
> 
> 标签：java, regex, nested, pattern-matching

我有一个场景，我想在 Java 中进行嵌套表达式匹配。

考虑以下表达式：

```
SUM_ALL(2:3,4:5)>20 
```

where`SUM_ALL`在应用程序中具有保留的运算符含义。现在，我想从给定的表达式中提取运算符名称及其参数。为了做同样的事情，我定义了我的模式表达式如下：

```
Pattern testPattern = Pattern.compile("[^a-zA-Z]*([a-zA-Z_]+)\\s*\\(\\s*([0-9:,]+)\\s*\\).*"); 
```

如果表达式仅限于上述内容，则此方法可以正常工作。这是相同的输出：

```
Group 1: SUM_ALL
Group 2: 2:3,4:5 
```

现在，在给定的表达式中，我可能不知道存在的此类运算符的数量。例如考虑以下情况：

```
SUM_ALL(4:5,6:7)>MAX(2:3,4:4)+MIN(3:4,5:7) 
```

现在，我想提取上述每个运算符及其各自的参数，以根据它们的保留含义执行计算，然后计算一个简单的数学表达式。

如果 Java 模式匹配器中有嵌套功能，那么一旦解析了运算符，就可以通过考虑表达式的其余部分来帮助逐个提取运算符。我知道可以通过在一个单独的组中捕获表达式的其余部分然后在该组值上运行匹配器并继续这样做直到我们到达表达式的末尾来做到这一点，但我更想知道是否模式匹配器具有相同的固有功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:09:29.440

好吧，有这个：

`(?:(SUM_ALL|MAX|MIN|addmorehere)\\(((?:\d+:\d+,?){2})\\)[+-><*/addmorehere]?)+`

它并没有真正适用于 java 或任何语言，但你明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:12:52.510

你可以使用这样的代码：

```
String str = "SUM_ALL(4:5,6:7)>MAX(2:3,4:4)+MIN(3:4,5:7)";
Matcher m = 
    Pattern.compile("(?i).*?([a-z_]+)\\s*\\(\\s*([\\d:,]+)\\s*\\)").matcher(str);
while (m.find())
   System.out.printf("%s :: %s%n", m.group(1), m.group(2)); 
```

**输出：**

```
SUM_ALL :: 4:5,6:7
MAX :: 2:3,4:4
MIN :: 3:4,5:7 
```

# asp.net-mvc-3 - MVC3 @Html.ActionLink 显示文本和地址

> ID：13067066
> 
> 赞同：1
> 
> 时间：2012-10-25T10:56:21.013
> 
> 标签：asp.net-mvc-3

我不知道我做错了什么，但我所有的@Html.ActionLinks 都显示预期的文本以及超链接而不是单独的文本。

```
@Html.ActionLink("About", "About", "Home") 
```

显示为

```
About(Home/About) 
```

代替

```
About 
```

在意见中，

```
 @Html.ActionLink("Edit", "Edit", new { id = item.Id }) 
```

显示

```
Edit(Home/Edit/4) 
```

而不是文字

```
Edit 
```

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:11:03.710

您可能有一个扩展或 DisplayTemplate 会改变默认行为。

看起来您的第二个示例缺少一个参数（html 属性的最后一个 null，我还在这里包含了控制器）

```
@Html.ActionLink("Edit", "Edit", "Home", new { id = item.Id }, null) 
```

# ajax - 使用 Ajax 更新组件导致异常

> ID：13067070
> 
> 赞同：0
> 
> 时间：2012-10-25T10:56:32.160
> 
> 标签：ajax, jsf-2, primefaces

似乎我根本无法理解使用 Ajax 更新组件的工作原理。我不断收到异常“找不到标识符为“：menu-item-container”的组件，引用自“j_idt12:0:j_idt16:j_idt76”。

这是我的代码：

```
<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
    <h:head>
        <title><ui:insert name="pageTitle"></ui:insert></title>
    </h:head>

    <h:body>
        <h:outputStylesheet library="css" name="style.css" />
        <div class="menu-navigation">
            <ul>
                <li>Menu</li>
                <ui:repeat var="category"
                    value="#{restaurantsBean.restaurant.categories}">
                    <h:form>
                        <li><p:commandLink update=":menu-item-container">
                                <div>
                                    #{category.name}
                                    <f:setPropertyActionListener              value="#{category.id}"
                                        target="#                   {restaurantMenuBean.selected}" />
                                </div>
                            </p:commandLink></li>
                    </h:form>
                </ui:repeat>
            </ul>
        </div>

        <div id="menu-item-container">

            <ui:repeat var="category"
                value="#{restaurantsBean.restaurant.categories}">
                <p:outputPanel>
                    <h:panelGroup id="pangroup" layout="block"
                        rendered="#{restaurantMenuBean.active(category.id)}">
                        <div class="some-heading">
                            <h2>#{category.name}</h2>
                        </div>
                        <div class="category-description">#{category.description}</div>

                        <ui:repeat var="item" value="#{category.items}">
                            <p:outputPanel
                                rendered="#{restaurantMenuBean.needLightbox(item)}">
                                <ui:include src="/lightbox-item.xhtml"></ui:include>
                            </p:outputPanel>
                            <p:outputPanel
                                rendered="#{!restaurantMenuBean.needLightbox(item)}">
                                <ui:include src="/nolightbox-item.xhtml"></ui:include>
                            </p:outputPanel>
                        </ui:repeat>

                    </h:panelGroup>
                </p:outputPanel>
            </ui:repeat>

        </div>
    </h:body>
    </f:view>
    </html> 
```

这是 html 源输出的相关区域，它告诉我，我的“menu-item-container”就在根目录下，而更新属性只需要在其 id 前面有一个分隔标记“：”。

```
<div id="menu-item-container"><span id="j_idt17:0:j_idt64"></span><span id="j_idt17:1:j_idt64"><div id="j_idt17:1:pangroup">
                        <div class="some-heading"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:35:50.403

要更新的组件使用 中描述的算法进行解析[`UIViewRoot#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#findComponent%28java.lang.String%29)。很明显，它只能找到完全有价值的 JSF 组件。

然而，您`menu-item-container`是一个纯 HTML`<div>`元素，因此在 JSF 组件树中不可用。

将其替换为完全值得的 JSF 组件。

```
<h:panelGroup id="menu-item-container" layout="block"> 
```

默认情况下`<h:panelGroup>`呈现 a`<span>`并将`layout="block"`其转换为 a `<div>`。

# three.js - Three.js 中的加法反射

> ID：13067079
> 
> 赞同：2
> 
> 时间：2012-10-25T10:56:53.160
> 
> 标签：three.js

我在three.js 中加载了一个网格，并将已经在照明中烘焙的灰色纹理加载到了THREE.MeshBasicMaterial 中。然后我用 THREE.ImageUtils.loadTextureCube 加载了一个黑白环境贴图，将反射率设置为 0.4 并将其与 THREE.MixOperation 混合。

现在的问题是，环境贴图的黑色部分使网格更暗，这不是我想要的。我只想要白色部分的反射，比如加法混合或镜面反射（但仍然来自环境贴图）。

我可以通过将黑色更改为灰色来伪造它，但随后模型变得相当平坦。

我尝试使用本教程（http://bkcore.com/blog/3d/webgl-three-js-animated-selective-glow.html）中的一些渲染通道来做到这一点，但后来我得到了一些抗锯齿间隙我也有一些小的几何线条。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:57:09.357

目前不支持...

您介意将其作为功能请求发布在这里吗？
[https://github.com/mrdoob/three.js/issues](https://github.com/mrdoob/three.js/issues)

# css - mod_pagespeed 正在重写但不合并

> ID：13067083
> 
> 赞同：0
> 
> 时间：2012-10-25T10:57:22.697
> 
> 标签：css, apache, mod-pagespeed

我有以下问题。

我安装了 mod_pagespeed 但我没有得到我想要的结果！

它确实重写了我的 css 并将其更改为缓存 url，但它不合并 css 文件。

我已经为它搜索了 web 和 stackoverflow，但没有找到解决方案。

这里是标签

```
<link media="all" type="text/css" href="http://domain.com/assets/css/bootstrap.min.css.pagespeed.ce.Iz3TwZXylG.css" rel="stylesheet">
<link media="all" type="text/css" href="http://domain.com/assets/css/W.jquery-ui-1.8.24.custom.css.pagespeed.cf.9yjmvb9yjz.css" rel="stylesheet">
<link media="all" type="text/css" href="http://domain.com/assets/css/W.bootstrap.extend.css.pagespeed.cf.VelsS-YQRX.css" rel="stylesheet">
<link media="all" type="text/css" href="http://domain.com/assets/css/W.base.css.pagespeed.cf.QO1yNADs1p.css" rel="stylesheet">
<link media="all" type="text/css" href="http://domain.com/assets/css/W.style.css.pagespeed.cf.tRzIhRbblc.css" rel="stylesheet"> 
```

按照要求：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:58:03.753

如果你在错误日志中搜索，可能会有一些关于为什么 mod_pagespeed 没有结合你的资源的信息（你可能需要`LogLevel info`临时设置 Apache 的）。但是，我的猜测是某些 CSS 文件包含的部分 mod_pagespeed 无法解析，因此它无法安全地组合 CSS 文件。这可能是因为他们使用了不受支持的 CSS3 或专有的 CSS2 结构。如果不查看 CSS 文件本身，就无法确定。如果您发送邮件[https://groups.google.com/forum/?fromgroups#!forum/mod-pagespeed-discuss](https://groups.google.com/forum/?fromgroups#!forum/mod-pagespeed-discuss)，我们可以帮助您弄清楚发生了什么。

# c# - C++/CLI com-Interop：向 VBA 公开引用类型属性

> ID：13067085
> 
> 赞同：0
> 
> 时间：2012-10-25T10:57:27.767
> 
> 标签：c#, vba, c++-cli, com-interop

在对将接受引用类型的 C# 属性公开给 VBA 进行长时间的调查后，我得出结论认为这是不可能的。简而言之，double[] 类型的 C# 属性甚至是对象都不能像这样在 VBA 中使用：

```
' Compile Error: Function or interface marked as restricted,
' or the function uses an Automation type not supported in Visual Basic
oComExposedEarlyBinding.ObjectArray = VBArray

' Run-time error 424: Object required
oComExposedEarlyBinding.PlainObject = VBArray 
```

或了解更多详细信息： [暴露给 VBA (COM) 的 C# 属性：运行时错误“424”：需要对象](https://stackoverflow.com/questions/12976506/c-sharp-property-exposed-to-vba-com-run-time-error-424-object-required)

> 我想知道 C++/CLI 是否支持这样的选项？即允许将引用类型的属性暴露给VBA，这样像上面这样的语法是有效的。

注意您可以通过使用后期绑定来实现这一点，但不能选择失去智能感知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:54:48.270

这在 C++/CLI 中是可能的，因为 C++/CLI 中的属性由两个函数组成，一个 get 和一个 set，而在 C++/CLI 中，您可以有一个引用函数（相对于一个指针）。

在 C# 中以类似方式公开的相同属性将不起作用。

此属性按预期向 COM 公开，并且在设置或进入 VBA 时不会出现问题：

```
private:
    Object ^_myProp;
public:
property Object %MyProp { 
    virtual Object %get() 
    {
        return *_myProp;
    }
    virtual void set(Object %value) 
    {
        _myProp = %value;
    }
}; 
```

# ruby-on-rails - 将标记传递到 Rails 部分

> ID：13067089
> 
> 赞同：1
> 
> 时间：2012-10-25T10:57:34.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, templates, erb, partial

有没有办法做一些与此等价的事情：

```
<%= render partial: 'shared/outer'  do %>
    <%= render partial: 'shared/inner' %>
<% end %> 
```

导致

```
<div class="outer">
    <div class="inner">
    </div>
</div> 
```

显然，需要一种标记“shared/outer.html.erb”的方法来指示传入的部分应该在哪里呈现：

```
<div class="outer">
     <% render Here %>
</div> 
```

在我的具体情况下，我有一个通用页眉，由页眉和子页眉组成，在所有页面之间共享，但希望将特定于页面的标记传递给该页眉的选项，以在标题和副标题下方呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:09:08.953

我会使用`content_for`：

```
<% content_for :subheader do %>
    <%= render partial: 'shared/inner'  do %>
<% end %>

<%= render partial: 'shared/outer' %> 
```

然后在 shared/outer 中：

```
<div class="outer">
  <%= yield(:subheader) %>
</div> 
```

您可以将任何您想要的内容放入`content_for`块中，并根据需要多次使用它，只需更改键名（此处`subheader`）

# asp.net - 在 asp.net mvc razor 中制作 id'less url

> ID：13067092
> 
> 赞同：1
> 
> 时间：2012-10-25T10:57:40.867
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在使用 URL 路由，并且遇到了一些问题。我希望我的网址是这样的：

www.domain.com/p/myproduct

但我也希望能够在不访问数据库的情况下检索产品的 ID。我想过有一个像这样的网址：

www.domain.com/p/myproduct/1

但是如果我能隐藏ID就更好了。

那么，我该怎么做最简单的方法呢？

目前我的 Global.asax 有以下路线：

```
 routes.MapLocalizedRoute("Product",
                        "p/{productId}/{SeName}",
                        new { controller = "Catalog", action = "Product", SeName = UrlParameter.Optional },
                        new { productId = @"\d+" },
                        new[] { "Nop.Web.Controllers" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:17:12.167

如果您只有 url，那么如果您想阅读它，则必须在其中包含 ID。

隐藏它的唯一方法是，如果您有来自表单帖子的 ID，假设它们来自前一页。然后，您可以存储选定的 Id 并作为请求的一部分发布到 url。

# ruby-on-rails - 处理传入的邮件并解析出原始文本

> ID：13067100
> 
> 赞同：1
> 
> 时间：2012-10-25T10:58:04.950
> 
> 标签：ruby-on-rails, email

我继承了一个 Rails 论坛（我认为是 Rails 2.3.2），它会提醒人们他们正在观看的论坛或主题的新帖子/回复。为了让人们更容易回答线程，我想启用回复帖子，类似于 basecamp 和一堆其他论坛和工具。我会在原始电子邮件中添加分隔符文本（例如“----在此行上方添加您的回复-----”）。我需要：

*   处理传入的电子邮件
*   将新文本（在分隔线上方）提取为纯文本
*   理想情况下，去掉一些邮件客户端自动添加的“on ... forums@mysite.com 写道：”之类的文本
*   识别此电子邮件所指的线程（使用传入地址或主题行）
*   识别发件人
*   将内容发布为新回复

关于如何开始的任何建议？有什么好的插件吗？我看到很多人提到 Mailman 和 Fetcher，还有其他的吗？哪一个最适合这个小功能？

谢谢！

# visual-studio-2010 - ReSharper 添加二进制引用而不是项目引用

> ID：13067105
> 
> 赞同：9
> 
> 时间：2012-10-25T10:58:18.010
> 
> 标签：visual-studio-2010, visual-studio-2012, resharper

我们遇到了 ReSharper (7/VS2010) 的问题：当您使用它在同一解决方案中添加从一个项目到另一个项目的引用时，有时它会添加对所引用项目的输出的二进制引用，而不是项目引用。可以禁用此行为吗，理想情况下，它只添加项目引用但不能完全禁用添加引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T15:29:38.757

在提出原始问题后不久，JetBrains 就知道了这个错误（[请参见此处](http://youtrack.jetbrains.com/issue/RSRP-333116#tab=Similar%20Issues)）。它说它已在 ReSharper 8.0.14+ 中修复。JetBrains 有时会过于热衷于宣布关闭错误。*但是，有一个类似的错误（请参阅上面链接中的列表）据称已在 R# 8.2 中修复，因此很有可能该*版本不再存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:41:52.707

这绝对是 ReSharper 中的一个错误，您需要为他们打开一个问题，正如@wal 在这里指出的那样：http: [//devnet.jetbrains.net/community/resharper](http://devnet.jetbrains.net/community/resharper)

# python - 在 django 中读取本地文件

> ID：13067107
> 
> 赞同：27
> 
> 时间：2012-10-25T10:58:25.593
> 
> 标签：python, django, path

我很坚持这个！我正在编写一个从外部数据库读取数据的 Django 视图。为此，我使用标准 MySQLdb 库。现在，要加载数据，我必须执行一个非常长且复杂的查询。我可以在我的视图中对该查询进行硬编码，并且效果很好。但我认为这不切实际；我希望将来能够更改查询，因此我尝试从文本文件加载语句。我的问题是我不知道在哪里存储以及如何打开该文件。无论我在哪里，都会收到“没有这样的文件或目录”错误。即使将其保存在与视图代码相同的目录中也会失败。

请注意，这不是上传的文件；它只是一个完成我的代码的外部文件。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-25T11:09:17.997

将文件保存在 django 项目根目录中，并在 settings.py 文件中添加以下内容。

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__)) 
```

然后在视图中执行此操作。

```
import os
from django.conf.settings import PROJECT_ROOT

file_ = open(os.path.join(PROJECT_ROOT, 'filename')) 
```

更新：

在较新的 Django 版本`BASE_DIR`中，已经在 settings.py 文件中定义了。因此，您可以执行以下操作。

```
import os
from django.conf import settings

file_ = open(os.path.join(settings.BASE_DIR, 'filename')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T11:10:48.797

为此，我将其放在设置模块中。在`settings.py`中，添加例如`MY_LONG_QUERY = 'from FOO select BAR...'`。然后，在您的视图中，只需从设置中加载它，如下所示：

```
from django.conf import settings
settings.MY_LONG_QUERY 
```

但是，这并不能真正回答你的问题。假设权限并且一切都正确，请在您的设置中保留对项目根目录的引用，如下所示：

```
ROOT_PATH = os.path.split(os.path.abspath(__file__))[0] 
```

然后再次在您的视图中，像这样打开您的文件：

```
from django.conf import settings

def read_from_database(request):
    f = open(os.path.join(settings.ROOT_PATH, 'myfile.db'))
    # Do something with f 
```

# iphone - 有没有办法通过界面生成器更新按钮的大小？

> ID：13067110
> 
> 赞同：1
> 
> 时间：2012-10-25T10:58:37.653
> 
> 标签：iphone, xcode, ios5, uibutton

当 iPhone 5 在屏幕上启动时，我希望我的按钮两倍大，有没有办法使用界面生成器来做到这一点？还是我必须务实地这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:09:24.053

我认为 Interface Builder 中没有这样的解决方案。务实是您的选择。

但是你为什么需要它？

**编辑：**

您可以通过( - - )`View`中的子菜单管理间距。请参阅旁边的自动调整大小和示例窗口。`Show and Size Inspector``Option / Alt``Command``5`

![在此处输入图像描述](../Images/c654229c4644e468a9e3ae73a556849c.png)

以下是 Apple 关于此主题的文档（第 8.f 点）：[Xcode 快速入门指南 - UI](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html)

# java - Android - 动态构建视图块并将其附加到布局

> ID：13067111
> 
> 赞同：0
> 
> 时间：2012-10-25T10:58:38.167
> 
> 标签：java, android, android-layout, android-view

我有一个`Views`包含 a `ImageView`、 a`Button`和 a的块`TextView`。我想在`Java`代码中动态创建这个块。有没有办法在 XML 中定义这个块，改变`src`/`text`属性并将其附加到我的当前`layout`？

谢谢！

罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:28:40.900

我使用以下技术：

```
<!-- content.xml -->
<merge>
  <ImageView android:id="@+id/image />
  <Button android:id="@+id/button />
  <TextView android:id="@+id/text />
</merge> 
```

然后使用 a 充气[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)：

```
View block = inflater.inflate(R.layout.content, root, attach);
(TextView) textView = (TextView) block.findViewById(R.id.text);
textView.setText(text); 
```

当您编写自定义`View`扩展 a `ViewGroup`（例如`LinearLayout`or `RelativeLayout`）并且想要在声明性 XML 中定义内容时，我发现这特别有用。例如

```
public class MyWidget extends LinearLayout {

  // Invoked by all of the constructors
  private void setup() {
    Context ctx = getContext();
    inflate(ctx, R.layout.content, this);
    ((TextView) findViewById(R.id.text)).setText(
        ctx.getString(R.string.hello_world)
    );
  }
} 
```

A possible variation is using a `Layout` instead of `<merge>` if you don't need it. The `LayoutInflater` can be obtained by [`Activity.getLayoutInflater()`](http://developer.android.com/reference/android/app/Activity.html#getLayoutInflater%28%29) or by any `Context` via [`getSystemService()`](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29) (you have to cast the result to a `LayoutInflater` object in the latter case.

# robotium - 我们可以在 Robotium 脚本中使用 If...else 条件吗？请举任何例子

> ID：13067112
> 
> 赞同：0
> 
> 时间：2012-10-25T10:58:44.280
> 
> 标签：robotium

我可能会在必须使用 if..else 条件的地方流动。请向我提供如何使用的简要想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:55:36.087

```
 Button answer_a = (Button) solo.getView(R.id.answer_a);
        Button answer_b = (Button) solo.getView(R.id.answer_b);
        if (answer_a.getText().toString().equals("my_text_a")) {
            solo.clickOnView(answer_a);
        } else {
            solo.clickOnView(answer_b);
        } 
```

# http - HTTPS 页面上的 Magento HTTP 规范标签

> ID：13067116
> 
> 赞同：1
> 
> 时间：2012-10-25T10:58:55.037
> 
> 标签：http, magento, https, seo, canonical-link

我在为客户开发的网站上收到了一些 SEO 反馈。

基本上，该网站同时索引 http 和 https 页面。

我在后端打开了规范标签。为了消除重复，我们建议我们删除引用 https 页面的规范标签，并将其替换为相应的 http 规范标签。

这是 Magento 的内置功能，还是我必须创建自己的模块，检查页面请求类型并以这种方式插入标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:06:51.773

因为我只是扩展 Mage_Catalog_Block_category_View 我只需要 _prepareLayout 功能。我的代码如下

```
protected function _prepareLayout()
{
parent::_prepareLayout();

$this->getLayout()->createBlock('catalog/breadcrumbs');

if ($headBlock = $this->getLayout()->getBlock('head')) {
  $category = $this->getCurrentCategory();
  if ($title = $category->getMetaTitle()) {
    $headBlock->setTitle($title);
  }
  if ($description = $category->getMetaDescription()) {
    $headBlock->setDescription($description);
  }
  if ($keywords = $category->getMetaKeywords()) {
    $headBlock->setKeywords($keywords);
  }
  if ($this->helper('catalog/category')->canUseCanonicalTag()) {
    if(isset($_SERVER['HTTPS'])) {
      $pattern        = '/((ht){1}(tps://))/';
      $replacement    = 'http://';
      preg_replace($pattern, $replacement, $category->getUrl());
      $headBlock->addLinkRel('canonical', $category->getUrl());
    } else {
      $headBlock->addLinkRel('canonical', $category->getUrl());
    }
  }
  /*
  want to show rss feed in the url
  */
  if ($this->IsRssCatalogEnable() && $this->IsTopCategory()) {
      $title = $this->helper('rss')->__('%s RSS Feed',$this->getCurrentCategory()->getName());
      $headBlock->addItem('rss', $this->getRssLink(), 'title="'.$title.'"');
  }
}

return $this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:48:10.523

默认情况下，Canonical 标签仍应为 http，尽管您的浏览器的地址栏是 https。

要对此进行测试，请在浏览器的地址栏中输入 https 和 http 版本，然后查看每个版本的页面源并在标题部分搜索规范标签（href 值）。它们应该相同，而不是 https。

如果您有问题，请告诉我您使用的是什么版本的 magento。

扩展块做

```
<?xml version="1.0"?>
<config>
    <modules>
        <RWS_ProductCanonical>
            <version>0.1.0</version>
        </RWS_ProductCanonical>
    </modules>

    <global>
        <blocks>
            <productcanonical>
                <class>RWS_ProductCanonical_Block</class>
            </productcanonical>
            <catalog>
                <rewrite>
                    <category_view>RWS_ProductCanonical_Block_Category_View</category_view>
                </rewrite>
            </catalog>
        </blocks> 
        <helpers>
            <productcanonical>
                <class>RWS_ProductCanonical_Helper</class>
            </productcanonical>
        </helpers>
    </global>
</config> 
```

创建块 app/code/local/RWS/ProductCanonical/Block/Category/View.php （我扩展了 Mage_Core_Block_Template 并复制了所有代码，因为在扩展 Mage_Catalog_Block_Category_View 时，它向标题添加了多个标签）

```
class RWS_ProductCanonical_Block_Category_View extends Mage_Core_Block_Template
{
    protected function _prepareLayout()
    {
        parent::_prepareLayout();

        $this->getLayout()->createBlock('catalog/breadcrumbs');

        if ($headBlock = $this->getLayout()->getBlock('head')) {
            $category = $this->getCurrentCategory();
            if ($title = $category->getMetaTitle()) {
                $headBlock->setTitle($title);
            }
            if ($description = $category->getMetaDescription()) {
                $headBlock->setDescription($description);
            }
            if ($keywords = $category->getMetaKeywords()) {
                $headBlock->setKeywords($keywords);
            }
            if ($this->helper('catalog/category')->canUseCanonicalTag()) {
                ////// add to header here
                $headBlock->addLinkRel('canonical', $category->getUrl() . '?limit=all');
            }
            /*
            want to show rss feed in the url
            */
            if ($this->IsRssCatalogEnable() && $this->IsTopCategory()) {
                $title = $this->helper('rss')->__('%s RSS Feed',$this->getCurrentCategory()->getName());
                $headBlock->addItem('rss', $this->getRssLink(), 'title="'.$title.'"');
            }
        }

        return $this;
    }

    public function IsRssCatalogEnable()
    {
        return Mage::getStoreConfig('rss/catalog/category');
    }

    public function IsTopCategory()
    {
        return $this->getCurrentCategory()->getLevel()==2;
    }

    public function getRssLink()
    {
        return Mage::getUrl('rss/catalog/category',array('cid' => $this->getCurrentCategory()->getId(), 'store_id' => Mage::app()->getStore()->getId()));
    }

    public function getProductListHtml()
    {
        return $this->getChildHtml('product_list');
    }

    /**
     * Retrieve current category model object
     *
     * @return Mage_Catalog_Model_Category
     */
    public function getCurrentCategory()
    {
        if (!$this->hasData('current_category')) {
            $this->setData('current_category', Mage::registry('current_category'));
        }
        return $this->getData('current_category');
    }

    public function getCmsBlockHtml()
    {
        if (!$this->getData('cms_block_html')) {
            $html = $this->getLayout()->createBlock('cms/block')
                ->setBlockId($this->getCurrentCategory()->getLandingPage())
                ->toHtml();
            $this->setData('cms_block_html', $html);
        }
        return $this->getData('cms_block_html');
    }

    /**
     * Check if category display mode is "Products Only"
     * @return bool
     */
    public function isProductMode()
    {
        return $this->getCurrentCategory()->getDisplayMode()==Mage_Catalog_Model_Category::DM_PRODUCT;
    }

    /**
     * Check if category display mode is "Static Block and Products"
     * @return bool
     */
    public function isMixedMode()
    {
        return $this->getCurrentCategory()->getDisplayMode()==Mage_Catalog_Model_Category::DM_MIXED;
    }

    /**
     * Check if category display mode is "Static Block Only"
     * For anchor category with applied filter Static Block Only mode not allowed
     *
     * @return bool
     */
    public function isContentMode()
    {
        $category = $this->getCurrentCategory();
        $res = false;
        if ($category->getDisplayMode()==Mage_Catalog_Model_Category::DM_PAGE) {
            $res = true;
            if ($category->getIsAnchor()) {
                $state = Mage::getSingleton('catalog/layer')->getState();
                if ($state && $state->getFilters()) {
                    $res = false;
                }
            }
        }
        return $res;
    }
} 
```

# iphone - 如何初始化 AVCaptureMetadataOutput 对象？

> ID：13067117
> 
> 赞同：2
> 
> 时间：2012-10-25T10:58:57.053
> 
> 标签：iphone, ios, avfoundation, avcapturesession

我正在尝试在我的 ios 6 应用程序中使用 Apple 的新功能[AVMetadataFaceObject](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVMetadataFaceObject_Class/Reference/Reference.html)，它可以让您识别人脸。基本上他们想要实现的是创建`AVCaptureMetadataOutput`对象并将其设置为现有的`AVAVCaptureSession`作为输出。所以，我从这个[链接得到了 squarecam Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)

我试图创建这样的对象：

```
 CaptureObject = [[AVCaptureMetadataOutput alloc]init];
objectQueue =       dispatch_queue_create("VideoDataOutputQueue", NULL);//dispatch_queue_create("newQueue", NULL);
[CaptureObject setMetadataObjectsDelegate:self queue:objectQueue]; 
```

我在这里将输入添加到会话中：

```
- (void)setupAVCapture 
```

{ NSError *error = nil;

```
AVCaptureSession *session = [AVCaptureSession new];
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    [session setSessionPreset:AVCaptureSessionPreset640x480];
else
    [session setSessionPreset:AVCaptureSessionPresetPhoto];

// Select a video device, make an input
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput *deviceInput = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
require( error == nil, bail );

isUsingFrontFacingCamera = NO;
if ( [session canAddInput:deviceInput] )
    [session addInput:deviceInput];

// Make a still image output
stillImageOutput = [AVCaptureStillImageOutput new];
[stillImageOutput addObserver:self forKeyPath:@"capturingStillImage" options:NSKeyValueObservingOptionNew context:AVCaptureStillImageIsCapturingStillImageContext];
if ( [session canAddOutput:stillImageOutput] )
    [session addOutput:stillImageOutput ];
    **[session addOutput:CaptureObject];//////HERE///////**

     // Make a video data output
videoDataOutput = [AVCaptureVideoDataOutput new];

// we want BGRA, both CoreGraphics and OpenGL work well with 'BGRA'
NSDictionary *rgbOutputSettings = [NSDictionary dictionaryWithObject:
                                   [NSNumber numberWithInt:kCMPixelFormat_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
[videoDataOutput setVideoSettings:rgbOutputSettings];
[videoDataOutput setAlwaysDiscardsLateVideoFrames:YES]; // discard if the data output queue is blocked (as we process the still image)

// create a serial dispatch queue used for the sample buffer delegate as well as when a still image is captured
// a serial dispatch queue must be used to guarantee that video frames will be delivered in order
// see the header doc for setSampleBufferDelegate:queue: for more information
videoDataOutputQueue = dispatch_queue_create("VideoDataOutputQueue", DISPATCH_QUEUE_SERIAL);
[videoDataOutput setSampleBufferDelegate:self queue:videoDataOutputQueue];

if ( [session canAddOutput:videoDataOutput] )
    [session addOutput:videoDataOutput];
[[videoDataOutput connectionWithMediaType:AVMediaTypeVideo] setEnabled:NO];

effectiveScale = 1.0;
previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
[previewLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
[previewLayer setVideoGravity:AVLayerVideoGravityResizeAspect];
CALayer *rootLayer = [previewView layer];
[rootLayer setMasksToBounds:YES];
[previewLayer setFrame:[rootLayer bounds]];
[rootLayer addSublayer:previewLayer];
[session startRunning]; 
```

}}

所以基本上委托应该调用这个方法：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputMetadataObjects:(NSArray *)metadataObjects fromConnection:(AVCaptureConnection *)connection{ 
```

}

但没有发生。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:53:27.863

建议您将主队列用于元数据。这是我唯一能看到的可能是错误的。

```
AVCaptureMetadataOutput *metadataOutput;
metadataOutput = [AVCaptureMetadataOutput new];
[metadataOutput setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];
[session addOutput:metadataOutput]; 
```

# c# - 将数据从 SqlDataReader 放入 HTML 表

> ID：13067119
> 
> 赞同：2
> 
> 时间：2012-10-25T10:59:00.050
> 
> 标签：c#, asp.net, html, c#-4.0, sqldatareader

我在一个数据库中有一些数据，我用`SqlDataReader`.

我想把这些放在我的 ASP.NET 站点的 HTML 表中，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:37:22.740

您可以使用网格视图。它是一个 asp.net 控件，您只需将 datareader 绑定到您的 gridview，它将显示从您的数据库返回的每一行作为 html 表行。您甚至可以组合两列或更多列，并添加图片或链接，而不仅仅是使用模板行显示数据。谷歌它，你会发现很多例子！

# php - MySQL：从 INSERT SELECT 获取返回结果

> ID：13067121
> 
> 赞同：1
> 
> 时间：2012-10-25T10:59:02.457
> 
> 标签：php, mysql, insert

我有查询 INSERTS 显式值和 SELECTd 内容。我也在做基本的递增。

```
INSERT INTO `table` (`myID`, `myVal1`, `myVal2`) SELECT `myID` + 1, 'explValHere', 'otherValThere')
FROM `table` ORDER BY `myID` DESC LIMIT 0,1 
```

我这样做是因为表有多个 id 并在特定列中递增。因此，正如您首先要说的那样，我不能使用自动递增和 insert_id。

问题当然是插入不返回选择，但可以吗？有没有办法运行这个插入查询并返回任何结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:36:42.190

由于您的查询有，`LIMIT 1`您可以将“结果”存储在[会话/用户定义的变量](https://dev.mysql.com/doc/refman/5.0/en/user-variables.html)中。仍然有两个查询但可重入；每个连接都是它自己的会话。

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
setup($pdo);

$query = "
    INSERT INTO tbl1 (myID, myVal1, myVal2)
    SELECT @foo:=myID+1, 'val1', 'val2' FROM tbl2 WHERE x=0 LIMIT 1
";
$pdo->exec($query);
foreach( $pdo->query('SELECT @foo as foo') as $row ) {
    echo $row['foo'];
}

function setup($pdo) {
    $pdo->exec('CREATE TEMPORARY TABLE tbl1 (myID int, myVal1 varchar(16), myVal2 varchar(16))');
    $pdo->exec('CREATE TEMPORARY TABLE tbl2 (myID int, x int)');
    $pdo->exec('INSERT INTO tbl2 (myID, x) VALUES (1,1),(2,1),(3,0),(4,0),(5,1)');
} 
```

tbl2 中 x=0 的“第一条”记录是 (myID=3,x=0) 并且脚本打印`4`.

除此之外和存储过程等（据我所知）没有什么像 SQLServer 的[OUTPUT](http://msdn.microsoft.com/de-de/library/ms177564.aspx)或 postgresql 的 MySQL 的[RETURNING](http://www.postgresql.org/docs/8.3/static/sql-insert.html)子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:04:15.270

您可以（在事务中）首先读取值，然后执行插入语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:09:34.010

在正常插入后尝试这样

```
INSERT INTO `table` (`myID`, `myVal1`, `myVal2`) values ('xxx','xxxx','xxxx'); 
```

然后使用执行queryget last inser id

```
$id=mysql_insert_id(); 
```

然后更新插入的行如下

```
mysql_query("update table set myid=$id where id=$id"); 
```

# iphone - 证书问题

> ID：13067123
> 
> 赞同：0
> 
> 时间：2012-10-25T10:59:06.220
> 
> 标签：iphone, xcode, iphone-developer-program

我的应用程序可以毫无问题地为模拟器构建。它工作得很好。

但它在为存档而构建时失败了。

我检查了原因，它说我没有正确的证书。

我的问题：

1.  我是否需要付费才能获得“开发者证书”？
2.  我可以在不付费的情况下构建存档吗？
3.  钥匙串访问应该写什么？我有一个叫做“Apple Code Sigining Certification Authority”的东西，它与它有什么关系吗？

如果有人可以解释我的设备问题的整个测试以及我应该在哪里注册或类似的任何东西，我会很高兴。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:04:02.673

只有注册开发者（每年 99 美元）才能获得开发者证书（需要提交到 App Store）。检查 developer.apple.com

# json - JAX-RS Web 服务使用 GET 接收的 JSON 对象的最大长度是多少？

> ID：13067124
> 
> 赞同：0
> 
> 时间：2012-10-25T10:59:05.297
> 
> 标签：json, web-services, jakarta-ee, jax-rs

我正在尝试将 JSON 对象作为参数发送。

```
localhost:8080/HelloWorldApplication/webresources/helloworld/get/{param} 
```

在这个过程中，我发送了一个大的 JSON 对象，类似于：

```
{"follow_request_sent": false, "profile_use_background_image": true, "contributors_enabled": false, "id": 200, "verified": false, "profile_image_url_https": "https://si0.twimg.com/sticky/default_profile_images/default_profile_4_normal.png", "profile_sidebar_fill_color": "e0ff92", "is_translator": false, "profile_text_color": "000000", "followers_count": 869, "profile_sidebar_border_color": "87bc44", "id_str": "200", "default_profile_image": true, "listed_count": 0, "status": {"favorited": false, "contributors": null, "truncated": false, "text": "http://goo.gl/OkfpC", "created_at": "2010-12-07T05:58:01", "retweeted": false, "in_reply_to_status_id": null, "coordinates": null, "source_url": "http://mobile.twitter.com", "source": "Mobile Web", "in_reply_to_status_id_str": null, "in_reply_to_screen_name": null, "in_reply_to_user_id": null, "id": 12023002585628672, "place": null, "retweet_count": 0, "geo": null, "in_reply_to_user_id_str": null, "possibly_sensitive": false, "id_str": "12023002585628672"}, "utc_offset": -28800, "statuses_count": 6, "description": "", "friends_count": 4, "location": "", "profile_link_color": "0000ff", "profile_image_url": "http://a0.twimg.com/sticky/default_profile_images/default_profile_4_normal.png", "notifications": false, "show_all_inline_media": false, "geo_enabled": true, "profile_background_color": "9ae4e8", "profile_background_image_url": "http://a0.twimg.com/images/themes/theme1/bg.png", "name": "Dalbir Singh", "lang": "en", "profile_background_tile": false, "favourites_count": 0, "screen_name": "dalbirsingh", "url": null, "created_at": "2006-04-29T01:00:27", "profile_background_image_url_https": "https://si0.twimg.com/images/themes/theme1/bg.png", "time_zone": "Pacific Time (US & Canada)", "protected": false, "default_profile": false, "following": false} 
```

我的代码运行良好，直到参数数量很少，但没有像上面提到的那样大的对象。通过http请求发送的JSONobject或其他参数的长度是否有限制，如果有，那么如何修改它。

代码：

```
@GET 
    @Path("/get/{empno}")// this method process GET request from client
    @Produces("application/json")   // sends JSON
    public String getJson(@PathParam("empno") JSONObject p) {  // empno represents the empno sent from client   
        JSONObject obj = p;
        String x = obj.toString();
        System.out.println(x);
        //some function
        return "x";

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:30:40.430

是的，网址长度有限制。然而，它依赖于浏览器和 Web 服务器（它通常是可配置的，但我认为更改它是一个坏主意......）。

通常，如果您的网址少于 2000 个字符，它应该始终有效。你也可以看看这个线程[什么是不同浏览器中 URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url) 以及其他一些链接[最大长度的 HTTP GET 请求？](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request), [http://www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)。

无论如何，您正在做的是一种不好的做法。你不应该在 url 中传递 json，json 应该用作 post 请求的主体。将 json 作为请求参数并不是真正的 REST 风格，如果 url 参数对于 REST apis 来说是可以的，有讨论，但它是可分割的......

**编辑** 带有帖子并使用具有数据绑定支持的库的球衣示例：

下载 genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)，当它在您的类路径中时，将为球衣自动启用 json 数据绑定。定义对应于 json 输入的类（我称之为 ARequestBean）和包含将被序列化为 json 的响应的 AResponseBean。

```
@POST 
@Path("/post")
@Consumes(("application/json") // consumes JSON
@Produces("application/json")   // sends JSON
public AResponseBean getJson(ARequestBean request) {
  return ...;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:29:23.230

过去 IE 浏览器将 GET 请求限制为大约 2k 个字符。从那时起，浏览器似乎有了一些发展，限制也随之增加。

在回答有关 GET 请求大小的问题时（请参阅此处：[是否有 GET 请求的长度限制？](https://stackoverflow.com/questions/266322/http-uri-get-limit)），有人回答如下：

*我在服务器端对 IE8、IE9、FF14、Opera11、Chrome20 和 Tomcat 6.0.32（全新安装）、Jersey 1.13 进行了更多测试。我使用了 jQuery 函数 $.getJson 和 JSONP。结果：所有浏览器最多允许大约 5400 个字符。FF 和 IE9 最多处理了大约 6200 个字符。以上所有内容都返回“400 Bad request”。我没有进一步调查 400 的原因。我发现的最大值很好，因为我需要大约 2000 个字符。– 寰宇一家 7 月 30 日 18:58*

所以你的问题的答案是它不是 JSON 限制，而是 GET 限制。如果您发布您的对象而不是将其放在 URL 上，您应该没问题。

如果您的设计迫使您将所有内容都放在 URL 中并且它是一个非常大的 URL，您应该重新检查您的设计，也许您应该在服务器端保存一些状态并且只传递一个 id。

# java - 当我只有最终的 .jar 时，如何使用 maven 部署工件？

> ID：13067125
> 
> 赞同：2
> 
> 时间：2012-10-25T10:59:05.313
> 
> 标签：java, maven, deployment, nexus

我有一个 jenkins 构建管道，其中第一个作业调用 mvn clean package 来编译和构建我的 java 项目。该工件随后被复制到一堆测试作业中，以确保我的构建质量。链中的最后一个作业应该将工件部署到我的 nexus 存储库。

我现在的问题是，当我只有带有 maven 的最终 jar myproject-1.2.0-SNAPSHOT.jar 时，如何将文件部署到 nexus？

我试过了

```
mvn deploy:deploy-file 
```

但是这个插件需要获取有关 groupId、artifact id、版本等的信息。我不想在我的部署作业中知道这些信息。jar中的信息不是存储在某些maven文件中吗？我只想说nexus，这里有神器，拿去吧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:09:22.707

使用 Maven 构建的 jar 在`META-INF/maven/`目录中包含此信息。有完整`pom.xml`的文件在下找到`META-INF/maven/[groupId]/[artifactId]/pom.xml`。

所以你可以做的是编写一个小程序来提取这些信息并`mvn deploy:deploy-file`使用正确的参数进行调用。

不幸的是，您必须知道`groupId`and`artifactId`才能获取文件，因此您无法轻松打开和解析它。但当然，您可以获得（唯一）目录`META-INF/maven`的名称以及该目录的（唯一）子目录的名称。这有点麻烦，但它应该可以工作。

注意：还有一个`pom.properties`包含最重要信息的文件，它可能比`pom.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:06:41.800

在我看来，这一切都倒退了。我会将周围的流程更改为

1.  运行 `mvn clean deploy`以将库部署到存储库管理器（Nexus 左右）或本地存储库（如果您有多个构建节点，则不太理想）
2.  让测试作业从存储库中获取工件作为依赖项（或脚本 wget 或其他）
3.  你已经完成了..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T11:38:19.787

使用您用来生成 jar 文件的 pom.xml 文件。将该文件保留为工件的一部分，当您需要手动部署时，您可以使用它

# jquery - 使用 JavaScript 的 Jquery 日期格式

> ID：13067127
> 
> 赞同：-1
> 
> 时间：2012-10-25T10:59:15.190
> 
> 标签：jquery

我正在使用 jQuery 并想格式化日期。我不想为 jQuery 导入另一个插件。我找到了一个适用于 JavaScript 的解决方案，即

```
var now = new Date(); 

var curr_date = d.getDate();

var curr_month = d.getMonth();

curr_month++;

var curr_year = d.getFullYear();

$('##optionButtons').append('<a href="##"class="btn">' 
+ curr_date + "-" + curr_month + "-" 
+ curr_year + '</a> </ br>'); 
```

但是，当我添加下面示例中显示的日期时，我收到以下错误，为什么？

```
var d = value.CREATED;

var curr_date = d.getDate();

var curr_month = d.getMonth();

curr_month++;

var curr_year = d.getFullYear();

$('##optionButtons').append('<a href="##">' 
+ curr_date + "-" + curr_month + "-" 
+ curr_year + '</a> </ br>'); 
```

错误#################### d.getDate 不是一个函数##################### ######

“value.CREATED”的值为 2012 年 10 月 25 日 00:00:00+0000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:04:52.287

我建议您从服务器以毫秒为单位发送日期，然后在 javascript 中将日期对象创建为 new Date(milliseconds)。

请参阅此处的参考：http: [//www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

或者

```
var d = new Date(value.created); //new Date('October, 25 2012 00:00:00+0000') 
```

编辑：考虑到你的 value.created 是一个字符串，我可以在这里的[DEMO](http://jsfiddle.net/y6bcR/)中解析它。

我希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:08:57.700

代码：`var d = value.CREATED;`不（以某种方式）返回 a `Date`。这就是为什么你调用它的一个函数`var curr_date = d.getDate();`是非法的。如果您在示例中显示变量`value`的来源，我们也许能够找到错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:11:04.023

您使用的日期格式无效。

```
var d = new Date('October, 25 2012 00:00:00'); 
```

# sql - PostgreSQL - 确定总数的百分比

> ID：13067133
> 
> 赞同：7
> 
> 时间：2012-10-25T10:59:37.493
> 
> 标签：sql, postgresql, pgadmin, psql

我有一张桌子

```
ID    |    NUMBER
------|----------
1     |      102
2     |      145
3     |      512
4     |      231
5     |       94 
```

我想对所有的 'NUMBER' 求和，并从总计中返回一个 % 值到每一行。结果应如下所示：

```
ID    |    NUMBER    |   PERC
------|--------------|-------
1     |      102     |   9.4
2     |      145     |  13.4
3     |      512     |  47.2
4     |      231     |  21.3
5     |       94     |   8.7 
```

到目前为止，我有类似的东西：

```
SELECT (number/sum(number)*100) AS perc
FROM mytable; 
```

但正如你肯定知道的那样，那个“数字”必须出现在 GROUP BY 或聚合函数中，所以我不能使用它。怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-25T11:00:46.380

您可以`sum`与`over`子句一起使用：

```
SELECT  100.0 * number / sum(number) over () as perc
FROM    mytable; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!1/e7be8/4/0)

# bash - bash脚本中的错误格式十进制

> ID：13067148
> 
> 赞同：3
> 
> 时间：2012-10-25T11:00:21.527
> 
> 标签：bash, format

> **可能重复：**
> [如何让 bc(1) 打印前导零？](https://stackoverflow.com/questions/8402181/how-do-i-get-bc1-to-print-the-leading-zero)

我有这个问题：

```
x=$(echo "0.81+0.02" |bc)
echo $x 
```

结果**.83**

我想看到 0.83，但我没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:05:12.867

`echo`对浮点数一无所知，它只知道字符串和整数。

您可以使用它`printf`来处理其他数据类型并指定精确的格式选项：

```
printf '%.2f\n' $x 
```

例子：

```
imac:barmar $ x=$(echo "0.81+0.02" |bc)
imac:barmar $ printf '%.2f\n' $x
0.83 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:32:58.413

只需一行：

```
printf '%.2f\n' $(echo 0.82+0.01 | bc) 
```

或者

```
echo 0.82+0.01 | printf '%.2f\n' $(bc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:08:47.723

最简单的解决方案是将结果附加到已经包含“0”字符的字符串中。

```
x=0
x+=$(echo "0.81+0.02" |bc)
echo $x 
```

如果您希望能够处理数字可能大于 1 的情况，您可以改用参数替换

```
x=$(echo "1.81+0.02" | bc )
x=${x/^./0.}
echo $x 
```

不幸的是，以前的代码不起作用。第二行的意思是用 string 替换第一个字符，如果它是一个点，`0.`但显然我犯了语法错误。我对正则表达式不是很了解，但这应该正是您正在寻找的。

以下是更麻烦的，但防御性的作品。

```
x=$(echo "1.81+0.02" | bc )
if [[ $x == .* ]]; then
   x=0$x
fi 
```

# jquery-plugins - 在struts2中弹出时添加自定义按钮 - jquery grid plugin

> ID：13067150
> 
> 赞同：0
> 
> 时间：2012-10-25T11:00:25.163
> 
> 标签：jquery-plugins, struts2-jquery

当用户单击按钮并弹出一个弹出窗口时如何添加自定义按钮。在该弹出窗口中我想添加一个自定义按钮。Struts2 jquery grid 是我正在使用的插件的名称。我想在同一个插件中添加这个自定义按钮。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:09:42.913

如果您正在谈论对话插件，您可以通过发布它正在收听的主题来弹出它。

```
<sj:dialog 
            id="itemDialog" 
            openTopics="openDialog" 
            closeTopics="closeDialog"
            autoOpen="false"
            modal="true" 
            resizable="false"
            position="['center',150]"
            title="My Dialog"
            buttons="{
                    'OK':function() { dosomething();$.publish('closeDialog'); },
                    'Cancel':function() { $.publish('closeDialog'); }
                    }"      

        >
            Please confirm

        </sj:dialog> 
```

在此示例中，发布`openDialog`以便弹出对话框。

# javascript - 如何在表单的id中写

> ID：13067156
> 
> 赞同：1
> 
> 时间：2012-10-25T11:00:42.357
> 
> 标签：javascript, jquery

我必须在 textarea 中写入，但我有两个相等的“id”，因为我创建了用于更改数据的表单。如果表格是：

```
<form method="GET" name="formparam" id="formparam" action="${nextstep}">
    <label>ID</label></td><td>
    <textarea class="expand" name="inputp'+v+'_id" id="inputp'+v+'_id">
    </textarea>
</form> 
```

对于呼叫我使用这个脚本：

```
function qs(key) {
    key = key.replace(/[*+?^$.\[\]{}()|\\\/]/g, "\\$&"); // escape RegEx control chars
    var match = location.search.match(new RegExp("[?&]" + key + "=([^&]+)(&|$)"));
    return match && decodeURIComponent(match[1].replace(/\+/g, " "));
}

function Pcompila(v){
var i;
var Listparam=['_id','_description','_info','_type','_value'];
for (i=0;i<Listparam.length;i++)
{
var a ='inputp'+v+ Listparam[i];
alert(a);
    if (location.search) {
    var p=qs(a);
    alert(p);
            $('#'+a).text(p);

    }
}

        return;
    } 
```

哪里`$('#'+a).text(p);`不对，因为不写。
如何更改以调用表单中的 id ？？？。
我试试这个：

```
$("formparam").$('#'+a).text(p); 
```

这是绝对错误的！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:13:57.573

我认为问题在于您更新 textarea 值的方式。

它应该是：

```
$('#'+a).val(p); 
```

请确保没有 2 个元素具有相同的 id。

编辑：如果你真的需要多个元素来拥有相同的 id，你将不得不通过不同的路径。

```
$('#formparam').find('textarea.expand').val(p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:23:54.833

`$("formparam")`不正确是因为`formparam`不是元素类型，应该是`#formparam`搜索一个ID。在另一个元素中搜索一个元素的方法是使用`.find()`，例如`$("#formparam").find("#"+a)`。但是由于 ID 必须是唯一的，因此您实际上不需要说明在哪里搜索它们，因此您可以使用`$("#"+a)`，就像 Pulkit Mittal 的回答一样。

# python - SQLAlchemy 与 PostgreSQL Unicode 问题

> ID：13067176
> 
> 赞同：1
> 
> 时间：2012-10-25T11:02:16.133
> 
> 标签：python, mysql, postgresql, unicode, orm

我需要使用 SQLAlchemy 创建并连接到数据库 PostgreSQL 9.2。到目前为止，我能够在 UTF-8 中创建完整的数据库，但我无法将非 ASCII 字符放入其中。这就是我连接到数据库的方式：

> url = URL(drivername=s'postgresql', username='uname', password='pwd', host='localhost', port='5432', database='postgres')
> self.engine = create_engine(url)

然后我创建新的数据库，切换到它，并开始填充它：一切正常。我明白了：

> entercursor.execute(statement, parameters) sqlalchemy.exc.DataError
> : (DataError) invalid byte sequence for encoding "UTF8": 0xec2d43
> 'INSERT INTO Province (codice_regione, codice, tc_provincia_id, nome, sigla) VALUES (%(codice_regione)s, %(codice)s, %(tc_provincia_id)s, %(nome)s, %(sigla)s) RETURNING Province.id' {'nome': 'Forl\xec-Cesena', 'codice': 40, 'codice_regione '：8，'tc_provincia_id'：34，'sigla'：'FC'}

我对 MySQL 5 上的同一个数据库有相同的代码，它工作得很好。我不知道出了什么问题。我为 unicode 注册了 postgres 的扩展，但这不起作用。我很困惑，我需要更有经验的人的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:45:38.063

根据错误日志，该`0xec2d43`序列在 iso-8859-1 中对应于`ì-C`名称“Forlì-Cesena”的 3 个字符。

所以程序发送的是有效的 iso-8559-1，而不是 UTF-8，而服务器需要 UTF-8。

解决问题的最简单方法是通过在客户端发出以下 SQL 语句来通知服务器实际编码：

```
SET client_encoding=latin1; 
```

要么将数据转换为 UTF-8，然后再将其传递给数据库，这是@Tometzky 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:52:27.820

确保您的数据（可以包含国际字符）是 Unicode 字符串。`'Forl\xec-Cesena'`您尝试插入的字符串采用`Latin1`( `ISO-8859-1`) 编码。所以使用

```
unicode('Forl\xec-Cesena','Latin1') 
```

将其转换为 unicode 字符串。

# javascript - Google 地图 API - 未捕获的 ReferenceError：未定义方向服务

> ID：13067178
> 
> 赞同：4
> 
> 时间：2012-10-25T11:02:18.330
> 
> 标签：javascript, google-maps, google-maps-api-3, map-directions

我正在尝试在我的网站上使用的地图上使用方向，但是有一个错误不断弹出，我不知道如何摆脱它！

***未捕获的 ReferenceError：未定义方向服务***

这是我使用的代码

```
$(window).load(function () {
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;
});
$(window).load(function () {
        initialize();
    });

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var mapOptions = {
    zoom:7,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: chicago
  }
  map = new google.maps.Map(document.getElementById("map"), mapOptions);
  directionsDisplay.setMap(map);
  directionsDisplay.setPanel(document.getElementById("directionsPanel"));
}

function calcRoute() {
  var start = new google.maps.LatLng(54.986136, -1.537945);
  var end = new google.maps.LatLng(41.850033, -87.6500523);

  var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode.DRIVING
  };
  console.log(request);
  if (request==true)
  {
    console.log("REQUEST");
  }
  console.log(JSON.stringify(request)); 
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        if (!response.routes[0].copyrights) { 
        response.routes[0].copyrights = "Copyrights unknown."; 
        }
        console.log("ALL GOOD!");
      directionsDisplay.setDirections(result);
    }
    else
    {
        console.log("NOT-GOOD!");
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T11:18:03.523

删除此行中的 var 关键字：

```
var directionsService = new google.maps.DirectionsService(); 
```

当您使用 var 关键字时，该变量`directionsService`仅在函数内部可见，但您需要一个全局变量（从任何范围可见）

# c# - 新用户首次登录网站

> ID：13067181
> 
> 赞同：0
> 
> 时间：2012-10-25T11:02:23.767
> 
> 标签：c#, javascript

我正在尝试注册一个人并验证他。每当新用户第一次登录我的网站时验证后，我希望他重定向到 Default.aspx 页面，否则他的仪表板。那么我如何知道一个人是否是第一次登录我的网站呢？我们可以通过网络知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:04:54.310

`seen_welcome_msg`在数据库的用户表中添加一个（布尔）列（例如）。

当用户登录时，如果设置为`false`，则重定向用户。

当用户访问`Default.aspx`时，将列值设置为`true`

# html - 如何使用黑莓5防止输入字段中文本的水平滚动

> ID：13067183
> 
> 赞同：1
> 
> 时间：2012-10-25T11:02:31.043
> 
> 标签：html, forms, blackberry, input

我正在创建一个需要为旧移动设备用户工作的 html 表单。

我遇到的问题是，当使用较旧的黑莓设备（例如 2 岁的 9300）时，如果您使用触控板移动到文本字段的右侧，则文本会向左滚动并隐藏。

有没有办法防止这种行为，甚至在输入失去焦点后重新对齐文本？

即使使用如此简单的表格，问题也很明显。

`<form> <input type="text" name="testit" /> </form>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:56:21.877

如果它对其他人有帮助，我已经找到了解决这个问题的方法 - 但如果有人能想到更好的解决方案，我很乐意听到它。

我只需清除文本字段，然后在鼠标离开输入时将值重写到文本字段。

```
<script type="text/javascript">
function updateTheText()
{
  var boxVal = $('#testit').val();
  $('#testit').val('');
  $('#testit').val(boxVal);
}
</script> 
```

然后在输入中添加一个 onmouseout

```
<form>
<input type="text" id="testit" name="testit" onmouseout="updateTheText()" />
</form> 
```

# sql-server-2008-r2 - SQL Server 运行时版本中的 Management Studio

> ID：13067186
> 
> 赞同：0
> 
> 时间：2012-10-25T11:02:44.827
> 
> 标签：sql-server-2008-r2

SQL Server 的运行时版本是否有 Management Studio？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-26T03:21:42.073

SQL Server 运行时是一个 ISV 解决方案。他们通过 SQL Server 销售他们的产品，并且只有有限的许可权才能将该 SQL 实例与他们的软件一起使用。它不能被任何其他产品使用或访问。它是 SQL Server 的完整版本，是的，因此您应该能够使用 Management Studio。它仍然按设备/用户或按内核许可。

# ruby - mongodb计数相等对象

> ID：13067189
> 
> 赞同：1
> 
> 时间：2012-10-25T11:03:03.420
> 
> 标签：ruby, mongodb, count

我有一个 MongoDB 数据库，其中包含包含过滤器字段的文档。文件如下所示：

```
{
   "_id": ObjectId("503208f5b5db0135387d9249"),
   "name": "name1",
   "filter": "facebook"
}          {
   "_id": ObjectId("503208f5b5db0135387d9249"),
   "name": "name2",
   "filter": "twitter"
}  
{
   "_id": ObjectId("503208f5b5db0135387d9249"),
   "name": "name3",
   "filter": "twitter"
} 
```

我想按类型计数。这个例子应该是这样的：

```
facebook => 1, twitter => 2 
```

使用 ruby​​ 代码，计数非常慢。

过滤器是一个字符串，可以是任何东西。例如：

```
{facebook : 1203, twitter : 201, wherever : 200, othertype : 400} 
```

我正在使用 mongo 映射器（红宝石驱动程序）。

============== 编辑3

最后它的工作。这是红宝石驱动程序的代码：

```
def map  
    'function(){  
        emit(this.plataforma, 1);
    }'  
end   
def reduce   
    '
    function(prev, current) {  
        var n = 0;
        current.forEach(function(v){
            n+=v;
        });
        return n; 
    }'
end 

def build  
    Mention.collection.map_reduce(map, reduce, :query => {})  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:36:24.200

我问了这个问题，但没有任何答案。因此，如果您只有 2 种过滤器的可能性：facebook 和 twitter，您可以通过两个查询来做到这一点：

```
db.yourcollection.count({
  'filter' : 'facebook'
}) 
```

这将返回你 1

```
db.yourcollection.count({
  'filter' : 'twitter'
}) 
```

这将返回你 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:53:36.080

这类似于：[http ://cookbook.mongodb.org/patterns/count_tags/](http://cookbook.mongodb.org/patterns/count_tags/)

它在哪里显示了如何像这样运行 MR：

```
var map = function(){
    emit(this.filter,1);
}

var reduce  = function(previous,current){
    var count = 0;

    for (index in current) {
        count += current[index];
    }

    return count;
} 
```

然后它将输出到另一个集合（如果需要，可以内联）格式的文档：

```
{
    _id: facebook,
    value: 1,
    _id: twitter,
    value: 2
} 
```

这是用 JS 的 MongoDB 控制台语言编写的。MongoDB 有一个内置的 JavaScript 解析器 (spidermonkey) 可以解析 MR 函数。在 Ruby 中，您可以像这样封装您的函数：

```
map = BSON::Code.new "function() { emit(this.filter, 1); }" 
```

然后像这样运行 MR：

```
col.map_reduce(map, reduce,
        {
            :out => 'summary_collection',
            :raw => true
        }
      ) 
```

然后，您只需通过提供字符串表示形式来查询该过滤器的摘要集合，`_id`或者执行简单的操作`find()`以获取所有结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:42:15.243

如果你说过滤器可以是任何东西——那么你应该使用 mapreduce。 [http://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

这是一个工作代码，将其放在 mongo 控制台中，然后将其转换为 ruby​​。

首先创建地图功能：

```
var map = function(){
  emit(this.filter, 1);
} 
```

减少功能：

```
var reduce = function(key, value){
  var n = 0;
  value.forEach(function(v){
     n+=v;
  });
  return n;
}; 
```

因为您使用的是旧版本的 mongo，所以您必须执行以下操作：

```
res = db.runCommand({
  'mapreduce' : 'YOURCOLLECTION',
  'map' : map,
  'reduce' : reduce,
  'out' : 'tmp'
});
db.tmp.find(); 
```

这将返回你

```
{'_id' : 'facebook', 'value' : 1},
{'_id' : 'twitter', 'value' : 2} 
```

# javascript - jQuery - 每 x 秒向下滚动一次，然后滚动到顶部

> ID：13067190
> 
> 赞同：5
> 
> 时间：2012-10-25T11:03:06.967
> 
> 标签：javascript, jquery

我有一个可滚动的 div，我想每 X 秒向下滚动 50 个像素。这很好并且工作。

我还有一个单独的函数，当它到达底部时，它会将 div 滚动回顶部。也很好；在职的。

现在，我需要将两者结合起来，这样向下滚动就会被忽略，直到我们再次滚动到顶部。

我在这里有一个“工作”示例，您会看到它有一些非常疯狂的行为：http: [//jsfiddle.net/JVftf/](http://jsfiddle.net/JVftf/)

```
window.setInterval(scrollit, 3000);

function scrollit() {
    $('#scroller').delay(2000).animate({ scrollTop: $("#scroller").scrollTop() + 50 }, 'slow');
}

$('#scroller').bind('scroll', function () {
    if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
        $('#scroller').delay(2000).animate({ scrollTop: 0 }, 1000);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:24:53.697

我的版本：

```
var scrollingUp = 0;

window.setInterval(scrollit, 3000);

function scrollit() {
    if(scrollingUp == 0) {
        $('#scroller').delay(2000).animate({ scrollTop: $("#scroller").scrollTop() + 50 }, 'slow');
    }
}

$('#scroller').bind('scroll', function () {
    $('#status').html(scrollingUp);

    if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
        scrollingUp = 1;      
        $('#scroller').delay(2000).animate({ scrollTop: 0 }, 1000, function() {
            scrollingUp = 0;    
        });
    }
});​ 
```

演示：http: [//jsfiddle.net/EFmeK/](http://jsfiddle.net/EFmeK/)

顺便说一句，在你的 jsfiddle 中，它滚动 60px 而不是 50px，我在我的示例中“修复”了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:16:32.247

尝试这样的事情：http: [//jsfiddle.net/JVftf/3/](http://jsfiddle.net/JVftf/3/)

```
window.setInterval(scrollit, 1000);

function scrollit() {
    console.log(($("#scroller").scrollTop() + $("#scroller").innerHeight()))
    console.log($("#scroller")[0].scrollHeight)

    if(($("#scroller").scrollTop() + $("#scroller").innerHeight()) >= $("#scroller")[0].scrollHeight)   
        $('#scroller').animate({ scrollTop: 0 }, 100).delay(900);  
    else   
        $('#scroller').animate({ scrollTop: $("#scroller").scrollTop() + 60 }, 'slow',function(){

    });
} 
```

# python - 我可以控制 StyledTextCtrl 边缘的字体大小吗？

> ID：13067191
> 
> 赞同：1
> 
> 时间：2012-10-25T11:03:11.460
> 
> 标签：python, wxpython

我稍微减小了[StyledTextCtrl](http://www.wxpython.org/docs/api/wx.stc.StyledTextCtrl-class.html)的字体大小，但它并没有影响文本控件边缘的字体大小，即行号字体：

![例子](../Images/bdfecbd990bd7c816a2d36a61f4dab50.png)

**有什么方法可以控制页边距的字体大小吗？**

* * *

对于那些感兴趣的人，这是我的子类：

```
class CustomTextCtrl(StyledTextCtrl):
    """A `StyledTextCtrl` subclass with custom settings."""
    def __init__(self, *args, **kwargs):
        StyledTextCtrl.__init__(self, *args, **kwargs)

        # Set the highlight color to the system highlight color.
        highlight_color = wx.SystemSettings.GetColour(wx.SYS_COLOUR_HIGHLIGHT)
        self.SetSelBackground(True, highlight_color)

        # Set the font to a fixed width font.
        font = wx.Font(12, wx.FONTFAMILY_TELETYPE, wx.FONTSTYLE_NORMAL,
                       wx.FONTWEIGHT_NORMAL, False, 'Consolas',
                       wx.FONTENCODING_UTF8)
        self.StyleSetFont(0, font)

        # Enable line numbers.
        self.SetMarginType(1, wx.stc.STC_MARGIN_NUMBER)
        self.SetMarginMask(1, 0)
        self.SetMarginWidth(1, 25)

    def SetText(self, text):
        """Override of the `SetText` function to circumvent readonly."""

        readonly = self.GetReadOnly()
        self.SetReadOnly(False)
        StyledTextCtrl.SetText(self, text)
        self.SetReadOnly(readonly)

    def ClearAll(self):
        """Override of the `ClearAll` function to circumvent readonly."""

        readonly = self.GetReadOnly()
        self.SetReadOnly(False)
        StyledTextCtrl.ClearAll(self)
        self.SetReadOnly(readonly) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:09:36.760

您为 StyleSetFont 使用了错误的样式编号。您可能打算使用：

```
self.StyleSetFont(wx.stc.STC_STYLE_DEFAULT,font) 
```

其值为 32 而不是 0。如果要单独设置行号的字体，请使用：

```
self.StyleSetFont(wx.stc.STC_STYLE_LINENUMBER,font) 
```

有关详细信息，请参阅[wxStyledTextCtrl - 样式和样式定义](http://www.yellowbrain.com/stc/styling.html)。

# html - CSS：内容边框穿过固定的页脚边框

> ID：13067194
> 
> 赞同：2
> 
> 时间：2012-10-25T11:03:22.647
> 
> 标签：html, css, fixed

我有一个固定的页脚 div 和一个内容 div。内容 div 是 100% 的高度，我希望它不通过页脚，尽管我不想给出小于 100% 的百分比值。

```
<!-- fixed --><div id="footer" style="border:4px solid black;">
<div>

<!-- crosses the footer thus fails --><div id="content" style="border:4px solid blue;">
</div> 
```

这是一个 JSFiddle 链接：http: [//jsfiddle.net/TAVmF/2/](http://jsfiddle.net/TAVmF/2/)

蓝色框的底部边框应位于黑框边框的顶部，并且不应越过它。

接下来是我想要的结果：http: [//i49.tinypic.com/2hs3mna.jpg](http://i49.tinypic.com/2hs3mna.jpg)

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:09:03.550

从页脚中删除并交换和div`position:fixed`的 html 代码。`container``footer`

**[演示](http://jsfiddle.net/TAVmF/3/)**

* * *

**[演示 2](http://jsfiddle.net/TAVmF/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:21:30.960

You need to set content `max-height` at run time using `jquery` and add `overflow:auto` in content style.

Suppose your `content max-height = screenheight - footer height.`

Hope this formula help you.

# jquery - Phonegap - 向右滑动 Facebook 风格的导航/布局

> ID：13067198
> 
> 赞同：3
> 
> 时间：2012-10-25T11:03:43.290
> 
> 标签：jquery, ios, html, cordova, jquery-mobile

有谁知道是否可以使用 Phonegap for IOS 复制“向右滑动通知菜单”Facebook 风格的功能？

它将是一个标准的 Phonegap 应用程序，而不是在任何时候添加右滑动，这将始终在通知菜单中显示幻灯片。虽然不知道如何设置...

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T18:14:37.050

您可以尝试使用[App UI](http://triceam.github.com/app-UI/)，它提供了您需要的功能。如果您查看视频，您将看到与 iOS Facebook 菜单基本相同的“滑动视图”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:17:05.287

与Phonegap 配合使用的jQuery Mobile 测试版具有内置的面板功能。在这里查看：http: [//jquerymobile.com/demos/1.3.0-beta.1/](http://jquerymobile.com/demos/1.3.0-beta.1/)

但是，请查看这个类似的线程，如上所述： [Jquery-mobile slide in menu solution](https://stackoverflow.com/questions/13064816/jquery-mobile-slide-in-menu-solution/13064919#13064919)

那个自定义实现了它，使用旧版本的 jQuery 移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:15:57.413

我在这里可能错了，但是从标准的 phonegap 项目来看，该功能很难实现，因为 phonegap 使用 webview 和一堆 javascript 库来链接到设备的功能。

如果您足够勇敢，您可以做的是将 UISwipeGestureRecognizer 附加到在应用程序委托上调用的 webview。当它检测到这一点时，您需要为 webview 设置动画以显示其背后的另一个视图（facebook 使用的 tableview）。

老实说，你最好用原生的方式编写它，而不是覆盖 phonegap 给你的东西。

# android - 在同一视图中使用常规 Admob + 自定义发布者

> ID：13067200
> 
> 赞同：1
> 
> 时间：2012-10-25T11:03:53.593
> 
> 标签：android, admob

我正在使用**Admob SDK**和**Tobonet SDK**。

在单独的视图控件中使用它们中的每一个都可以正常工作。

现在我正在使用中介 - 在为自定义事件实现代码之后 - 工作正常，但仍然使用单独的视图。现在我的目标是使用一个视图控件。但是**Admob**和**Tobonet**有不同的视图声明，其中不包含广告。

在屏幕上的同一位置有两个视图并根据当前广告进行不可见/可见切换是个好主意吗？

如果有人设法使用一个视图控件 - 请帮助我！

**更新**托管解决如何在同一位置使用展位提供者。仍然不知道 Admob 是否使用相同的视图/用于自定义服务器横幅/或切换广告视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:56:16.747

有关实现自定义事件的完整说明，请参阅[本指南](https://developers.google.com/academy/apis/ads/mobile-ads-sdk/mediation/custom-events/banners)。

当您实施自定义事件时，您从 3rd 方广告网络（在本例中为 Tobonet）请求广告，当广告网络返回广告时，您调用：

```
MediationBannerListener.onReceivedAd(View); 
```

AdMob SDK 只是在一个容器中显示该视图`AdView`。所以视图层次结构如下所示：

```
YourMainLayout
--com.google.ads.AdView (mediation container view with no ad)
----Tobonet ad View (contains the ad) 
```

通过中介网络获取 AdMob 广告时，您的视图层次结构实际上如下所示：

```
YourMainLayout
--com.google.ads.AdView (mediation container view with no ad)
----com.google.ads.AdView (contains the ad) 
```

AdMob 中介会为您处理视图切换 - 在刷新时，它会删除中介容器内的所有视图，并将其替换为来自下一个广告网络的新视图。您不需要自己处理视图的可见性。

# android - facebook错误配置登录android应用程序

> ID：13067201
> 
> 赞同：0
> 
> 时间：2012-10-25T11:03:58.267
> 
> 标签：android, facebook

我开发了一个具有 facebook 身份验证的 android 应用程序。问题是，当我在市场上发布应用程序并且用户安装应用程序并想要登录时，他从 facebook 收到一条消息，上面写着“应用程序为 facebook 配置错误”。

为了在市场上发布我的应用程序，我使用密钥库对应用程序进行了签名。下一步是将哈希键放入 facebook 开发者控制台。

这些是签署应用程序的步骤：

1）在我的本地计算机上，我使用以下命令生成了一个 .keystore 文件：

```
$ keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -validity 10000 
```

2) 从 Eclipse 中，我使用步骤 1 中生成的密钥库文件将应用程序导出到 .apk 文件中。

3) 我将文件上传到 GooglePlay 并发布。

在我的本地计算机和平板电脑上，此问题不会重现。我尝试在安卓手机上安装，问题确实重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:01:42.370

您放在仪表板上的密钥哈希是您的调试密钥。通过使用您自己的密钥签名以上传到 Google Play，您需要获取用于签署应用程序的密钥库的密钥哈希并将其放入您的仪表板。

# java - JSF PrettyFaces 导致过滤器链“中断”

> ID：13067204
> 
> 赞同：3
> 
> 时间：2012-10-25T11:04:14.233
> 
> 标签：java, jsf, servlet-filters, chaining, prettyfaces

首先，在处理我的问题之前，我将向您介绍我的测试用例。我的基本 Maven Web 应用程序中有几个组件：

*   page.xhtml：用于生成我的请求/回复（启动过滤）
*   Pretty Faces：用于根据客户的需要重新定义 URL
*   FirstFilter：在 Pretty Faces 之前执行（在这个体育场进行测试）
*   ThirdFilter：在 Pretty Faces 之后执行（在这个体育场进行测试）
*   web.xml：定义我的完整过滤器链的行为

我将分享重要组件的代码。

**漂亮的配置.xml**

```
<url-mapping id="page">
    <pattern value="/page" />
    <view-id value="/page.xhtml" />
</url-mapping> 
```

**FirstFilter.java**

```
@WebFilter
public class FirstFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        System.out.println("FirstFilter, request: " + 
                ((HttpServletRequest)request).getRequestURL().toString());
        chain.doFilter(request, response);
        System.out.println("FirstFilter, response");
    }

    // override init and destroy
} 
```

**第三过滤器.java**

```
@WebFilter
public class ThirdFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        System.out.println("ThirdFilter, request: " + 
                ((HttpServletRequest)request).getRequestURL().toString());
        chain.doFilter(request, response);
        System.out.println("ThirdFilter, response");
    }

    // override init and destroy
} 
```

**web.xml**

```
<filter>
    <filter-name>FirstFilter</filter-name>
    <filter-class>nl.mhoogeveen.nl.rootapplication.FirstFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>FirstFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>Pretty Filter</filter-name>
    <filter-class>testingapplications.filterchaining.PrettyFilter</filter-class>
    <async-supported>true</async-supported>
</filter>
<filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
    <dispatcher>ASYNC</dispatcher>
</filter-mapping>
<filter>
    <filter-name>ThirdFilter</filter-name>
    <filter-class>testingapplications.filterchaining.ThirdFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ThirdFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**情况**

*调用 localhost:8080/page.xhtml （因此不激活 Pretty Faces 重定向）*

```
INFO: FirstFilter, request: http://localhost:8080/page.xhtml
INFO: ThirdFilter, request: http://localhost:8080/page.xhtml
INFO: ThirdFilter, response
INFO: FirstFilter, response 
```

*调用 localhost:8080/page （从而激活 Pretty Faces 重定向）*

```
INFO: FirstFilter, request: http://localhost:8080/page
INFO: FirstFilter, response 
```

**问题**

是什么导致我的链条不完整的这种情况？它不会被切断，因为我仍然会在 FirstFilter 上得到回复。似乎它永远不会到达 ThirdFilter。

我的有什么问题吗`web.xml`，我错过了一个`dispatcher`吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T11:59:28.380

您的调度程序设置不正确。让我解释一下会发生什么：

的请求`/page`进来并首先由 处理`FirstFilter`。之后 PrettyFaces 拦截请求并将其转发给`/page.xhtml`. 这个转发的请求被作为一个新请求处理，因此再次通过过滤器链。但是您的过滤器没有任何与 setting 相同的调度程序设置`<dispatcher>REQUEST</dispatcher>`。在此配置中，过滤器仅适用于常规请求，但不适用于转发请求。

如果您还想对转发的请求应用过滤器，则必须添加`<dispatcher>FORWARD</dispatcher>`到过滤器配置。

这也是为什么您通常必须调整 MyFaces Tomahawk / PrimeFaces 等 3rd 方过滤器的调度程序设置的原因。请参阅常见问题解答中的问题 2：

[http://ocpsoft.org/prettyfaces/#section-16](http://ocpsoft.org/prettyfaces/#section-16)

# javascript - 在 MongooseJs 中查找特定类型的平均值

> ID：13067208
> 
> 赞同：0
> 
> 时间：2012-10-25T11:04:15.867
> 
> 标签：javascript, node.js, mongodb, mongoose

我有一个 MongoDB 集合“标记”，如下所示

```
 _id   Student_id   Subject  Mark
   1    111          AAA      9
   2    111          BBB      5
   3    111          CCC      7
   4    222          AAA      10
   5    222          CCC      6
   6    222          BBB      8 
```

我需要使用**MONGOOSEJS**在 3 个科目中找到 student_id=111 的平均分数。我有一个解决方案

```
var Mark = mongoose.model('mark', new Schema({
  Student_id: Number,
  Subject: String,
  Mark: Number
}));

Mark.aggregate([
    { $group: {
        _id: '$Student_id',
        markAvg: { $avg: '$Mark'}
    }}
], function (err, results) {
    if (err) {
        console.error(err);
    } else {
        console.log(results);
    }
}
); 
```

输出是

```
 [ { _id: 222, markAvg: 8 }, { _id: 111, markAvg: 7 } ] 
```

只有`{_id:111,markAvg:7}`当我将 student_id:111 作为参数传递时，我才想要。请任何人提出答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:45:15.740

您需要在[`$match`](http://docs.mongodb.org/manual/reference/aggregation/match/#_S_match)管道顶部添加一个元素，以将集合的文档过滤为您想要作为输入的文档`$group`：

```
Mark.aggregate([
    { $match: { Student_id: 111 } },
    { $group: {
        _id: '$Student_id',
        markAvg: { $avg: '$Mark'}
    }}
], function (err, results) {
    if (err) {
        console.error(err);
    } else {
        console.log(results);
    }
}); 
```

# objective-c - GKMatchmakerViewController 不处理触摸

> ID：13067210
> 
> 赞同：0
> 
> 时间：2012-10-25T11:04:23.697
> 
> 标签：objective-c, cocos2d-iphone, game-center, gamekit, gkmatchmaker

我正在展示这个 modalView，它不处理触摸。我正在使用 cocos2d-iphone。

```
mControllerView= [[UIViewController alloc] init];
//mControllerView.view = [[CCDirector sharedDirector] openGLView];  
//this was the old method, it worked, but since ios6 it crashes

[[[CCDirector sharedDirector] openGLView] addSubview:mControllerView.view];

theClass = [[TheClass alloc] init: mControllerView]; 
// this shows the     GKMatchmakerViewController inside mControllerView 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:49:21.840

我已将 cocos2d 更改为较新的版本，并没有检查更改了什么，或者我应该在 appDelegate 中重构什么。现在它起作用了。

# crystal-reports-2008 - 单击它时将框架像边框一样带到段落。仅用于将 CrystalReport 导出到 Worddocument

> ID：13067212
> 
> 赞同：0
> 
> 时间：2012-10-25T11:04:24.907
> 
> 标签：crystal-reports-2008

当我试图导出`crystalreport`到`worddocument`然后我点击了该段落时，它显示了该段落的边框。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:14:27.287

Crystal 报表将每个文本对象导出为 word 中的文本框，因此它将始终为每个段落或文本插入多个文本框。如果你想运行带有设置的文本，那么你必须编写代码来生成这个 word 文件。

# android - SQLite 不适用于安卓

> ID：13067214
> 
> 赞同：0
> 
> 时间：2012-10-25T11:04:33.197
> 
> 标签：android, sqlite, cordova

我尝试将 SQLite 添加到我的项目中，但是当我尝试在模拟器上运行我的应用程序时，它会显示这些错误，我对此一无所知！

```
[2012-10-25 14:16:29 - DeviceMonitor] Adb connection Error:An existing connection was                   forcibly closed by the remote host 
[2012-10-25 14:16:29 - Unexpected error while launching logcat. Try reselecting the device.] An existing connection was forcibly closed by the remote host
java.io.IOException: An existing connection was forcibly closed by the remote host
at sun.nio.ch.SocketDispatcher.read0(Native Method)
at sun.nio.ch.SocketDispatcher.read(Unknown Source)
at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)
at sun.nio.ch.IOUtil.read(Unknown Source)
at sun.nio.ch.SocketChannelImpl.read(Unknown Source)
at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:395)
at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109)
at java.lang.Thread.run(Unknown Source)

   [2012-10-25 14:16:30 - DeviceMonitor] Connection attempts: 1 
```

我遵循了本教程： [http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

我的处理程序类：

```
 public class DatabaseHandler extends SQLiteOpenHelper {

 // All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "PHM";

// Contacts table name
private static final String TABLE_USERS = "Users";

// Users Table Columns names
private static final String KEY_ID = "_id";
private static final String KEY_NAME = "name";
private static final String KEY_PASS = "password";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_USERS_TABLE = "CREATE TABLE " + TABLE_USERS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PASS + " TEXT" + ")";
    db.execSQL(CREATE_USERS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_USERS);

    // Create tables again
    onCreate(db);

}

public void addUser(User user) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, user.get_name()); // User Name
    values.put(KEY_PASS, user.get_pass()); // User Phone Number

    // Inserting Row
    db.insert(TABLE_USERS, null, values);
    db.close(); // Closing database connection
}
// Getting single User
public User getUser(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_USERS, new String[] { KEY_ID,
            KEY_NAME, KEY_PASS }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    User user = new User(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));
    return user;
}

 public List<User> getAllUsers() {
        List<User> contactList = new ArrayList<User>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_USERS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                User user = new User();
                user.set_id(Integer.parseInt(cursor.getString(0)));
                user.set_name(cursor.getString(1));
                user.set_pass(cursor.getString(2));
                // Adding contact to list
                contactList.add(user);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    }

// Getting users Count
    public int getUsersCount() {
        String countQuery = "SELECT  * FROM " + TABLE_USERS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }

    // Updating single contact
    public int updateContact(User user) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, user.get_name());
        values.put(KEY_PASS, user.get_pass());

        // updating row
        return db.update(TABLE_USERS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(user.get_id()) });
    }

    // Deleting single user
    public void deleteUser(User user) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_USERS, KEY_ID + " = ?",
                new String[] { String.valueOf(user.get_id()) });
        db.close();
    }
} 
```

这是我通过以下命令将其添加到我的 JavaScript 界面的类：

```
mean db= new mean(this, appView);
appView.addJavascriptInterface(db, "database"); 
```

班级：

```
 public class mean implements Cloneable{
private WebView mAppView;
private static DroidGap mGap;
DatabaseHandler db = new DatabaseHandler(mGap);  
  public mean(DroidGap gap, WebView view)
  {
    mAppView = view;
    mGap = gap;
  }

  public void AddUser(String name,String pass ){
        User user=new User(name,pass);
        db.addUser(user);
  }
  public String getAllUsers(){
        String ret="ajab";
        List<User> toShow=db.getAllUsers();
        for(User a :toShow){
            ret+=a.get_name();
        }
        return  ret;

  }
  public String Generate(){
      QRCodeGenerator.getQRCode ("pic.JPG", "Hamed Mahsa Pouya");
      return "BEHI";
  }
} 
```

在我的 JavaScript 中，我这样调用我的函数：

```
function AddUser(name,pass){
    alert(name+"::::::"+pass);
    window.database.AddUser(name,pass);
    alert("pass");
} 
```

我应该提一下，有时我会看到第二个警报，但大多数时候我会看到这个异常。

```
Uncaught Error: Error calling method on NPObject. at file:///android_asset/www/code.js:12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:13:50.180

**编辑**这将解决第一个错误-感谢 Selvin 指出
关闭 eclipse
运行命令“adb kill-server”
杀死 adb 进程的所有正在运行的实例
重新启动 eclipse

# c - 如何在 C 中打印一个字符串，使其显示 \n、\o 等字符？

> ID：13067216
> 
> 赞同：0
> 
> 时间：2012-10-25T11:04:40.947
> 
> 标签：c, string, special-characters

我需要检查我的程序是否在我的字符串中正确输入了这些字符，那么我如何才能看到这些字符未解析但实际显示的“原始”字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:06:38.850

如果您读取输入（来自文件或来自用户），则*不会*解析特殊转义码。*编译器*仅对源代码中的字符串和字符文字进行特殊处理。

**编辑：**带有输入和输出的简单示例程序来显示我在说什么。

```
#include <stdio.h>
#include <string.h>

int main(int ac, char *av[])
{
    char input[32];

    printf("Enter input: ");
    fgets(input, sizeof(input), stdin);

    /* Remove trailing newline */
    if (input[strlen(input) - 1] == '\n')
        input[strlen(input) - 1] = '\0';

    printf("input is \"%s\"\n", input);

    return 0;
} 
```

上述程序的示例运行：

```
输入输入： foo\nbar\thello
输入是“foo\nbar\thello”

```

该函数`fgets`将实际的换行符留在字符串的末尾。但是，输入中的序列`\n`和`\t`输入不会*被*转换为换行符或制表符（分别）。那是因为处理这些特殊字符序列的不是输入或输出函数，而是编译器。

如果您在源代码中的字符串或字符文字中有这些序列，那么编译器会识别这些序列并将它们更改为适当的换行符、制表符或您编写的任何内容。但是，由于编译器对从文件或用户读取的输入一无所知，因此*不会*翻译这些序列。

**编辑 2：**如果您想知道如何在字符串中显示*文字*特殊字符，请查看此程序：

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

void print_raw_string(const char *str)
{
    while (*str != '\0')
    {
        if (isprint(*str))
            fputc(*str, stdout);
        else
        {
            switch (*str)
            {
                /* First check for known special sequences */
            case '\0':
                printf("\\0");
                break;
            case '\a':
                printf("\\a");
                break;
            case '\b':
                printf("\\b");
                break;
            case '\t':
                printf("\\t");
                break;
            case '\n':
                printf("\\n");
                break;
            case '\v':
                printf("\\v");
                break;
            case '\f':
                printf("\\f");
                break;
            case '\r':
                printf("\\r");
                break;

            default:
                /* None of the above, print it out as a hex escape sequence */
                printf("\\x%02x", *str);
                break;
            }
        }

        str++;
    }
}

int main(int ac, char *av[])
{
    char input[32];

    printf("Enter input: ");
    fgets(input, sizeof(input), stdin);

    printf("Input is: ");
    print_raw_string(input);
    printf("\n");

    return 0;
} 
```

运行程序时：

```
输入输入：foo bar
输入是： foo\tbar\n

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:45:45.137

一种可能的解决方案是打印字符串中内容的[ASCII](http://www.asciitable.com/)值，无论它是固定字符串还是来自`stdin`：

```
char str[] = "A\tBC1\n";
int j;
for(j = 0; j<strlen(str); str++)
  printf("%#x ", str[j]); 
```

输出：

```
>>0x41 0x9 0x42 0x43 0x31 0xA 
```

从标准输入：

```
fgets(str, 5, stdin);
for(j = 0; j<strlen(str); j++)
  printf("%#x ", str[j]); 
```

输入输出：

```
>> 1   2         <---- That's a tab between 1 and 2
>> 0x31 0x9 0x32 0xA 
```

您可以花哨并转义字符以显示`\t`(0x9) 和`\n`(0xA) 而不是原始值，但如果您只是想验证您是否正在获取它们，这应该可以工作（并且更快）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:07:57.190

您可以转义字符，也可以编写自己的特殊例程，如下所示：

```
void print_raw(const char *ch)
{
   char *d = ch;
   while(*d){
     switch(*d){
       case '\n':
           printf("\\n");
       break;
       case '\v':
           printf("\\n");
       break;
       case '\r':
       printf("\\r");
           break;
       case '\a':
       printf("\\a");
           break;
       case '\?':
       printf("\\?");
           break;
       case '\"':
       printf("\"");
           break;
       case '\t':
       printf("\\t");
           break;
       case '\b':
       printf("\\b");
           break;
       case '\f':
       printf("\\f");
           break;
       case '\\':
       printf("\\");
           break;
       case '\'':
       printf("\'");
           break;
       default:
          putchar(d);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:10:37.217

只需将字符串打印为字符序列，例如：

str 是您的字符串：

```
char *ptr = str;
while(*ptr != 0)
{
   print("%02X", *ptr);
   ptr++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T11:23:13.740

Printf 没有对 \n 等做任何特别的事情。这些字符序列由编译器解释。试试这个：

```
$ cat foo.c
#include <stdio.h>
#include <string.h>

int
main(int argc, char **argv)
{
    if (argc != 2)
        return 1;
    printf("%d\n", (int)strlen(argv[1]));
    printf("%d\n", (int)strlen("\n"));
    printf("[%s]\n", argv[1]);

    return 0;
}
$ cc -Wall -O2 -o foo foo.c && ./foo '\n'
2
1
[\n]
$ 
```

请注意，我在调用 foo 时转义了 \n ，因为如果没有转义，shell 会解释 \ （不同）。

# c# - C#应用程序插入数据库

> ID：13067217
> 
> 赞同：1
> 
> 时间：2012-10-25T11:04:49.400
> 
> 标签：c#, sql-server-ce

我正在使用 SQL Server CE 数据库编写 C# 应用程序。

我有这个插入代码：

```
this.Validate();
this.documentacionBindingSource.EndEdit();
this.documentacionTableAdapter.Update(baseDatosDataSet.Documentacion); 
```

但它不起作用。我试试这个，它有效：

```
this.Validate();
this.documentacionBindingSource.EndEdit();
this.documentacionTableAdapter.Insert(....); 
```

如果没有行的gridview第一个工作但表格不起作用

为什么？

# cakephp - CakePHP 插件实现不路由

> ID：13067223
> 
> 赞同：0
> 
> 时间：2012-10-25T11:05:11.603
> 
> 标签：cakephp, plugins

我正在尝试为 CakePHP (CakePHP 2.2.3) 编写一个名为 LinkElement 的插件，它可以获取一个 url 并返回一个渲染的元素。我的示例使用 Ajax 选项卡表（如果有更好的方法，请说）。我无法从 URL 加载它。

例子：

本地主机/LinkElement/链接/

抛出：

```
Error: LinkElementController could not be found.

Error: Create the class LinkElementController below in file: app\Controller\LinkElementController.php

<?php
class LinkElementController extends AppController { } 
```

我的布局如下：

```
/app
    /Plugin
        /LinkElement
            /Controller
                LinkElementAppController.php
                LinksController.php
            /Model
                LinkElementAppModel.php
            /View
                Links/
                    index.ctp 
```

LinkElementAppController.php

```
<?php class LinkElementAppController extends AppController { } 
```

链接控制器.php

```
<?php App::uses('LinkElementAppController', 'LinkElement.Controller');

class LinksController extends LinkElementAppController {} 
```

LinkElementAppModel.php

```
<?php class LinkElementAppModel extends AppModel {} 
```

Links/index.ctp（只是一个假人，直到我可以让 URL 正常工作）

```
<h2>Working</h2> 
```

还有routes.php

```
CakePlugin::routes();
CakePlugin::load(array('LinkElement')); 
```

我意识到这可能很简单，但我现在看不到它，查看其他答案也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:47:22.843

您不应该在 URL 中使用大写字母。:)

Cake 访问插件中的控制器的方法是使用下划线表示法：

`/plugin_name/controller_name/action`

所以在你的情况下：

`localhost/link_element/links/<action>`

参考：[http ://book.cakephp.org/2.0/en/plugins.html#plugin-tips](http://book.cakephp.org/2.0/en/plugins.html#plugin-tips)

# c++ - C 或 C++ 中的函数类型

> ID：13067227
> 
> 赞同：3
> 
> 时间：2012-10-25T11:05:38.457
> 
> 标签：c++, c, function, pointers, typechecking

我有一个简单的问题：

> C或C++中的函数类型是什么

由于我们可以在 C 或 C++ 中拥有指向函数的指针，这意味着函数应该具有特定的类型，否则在创建函数的指针期间进行类型检查是没有意义的。

有人可以解释一下，我是否在正确的道路上？

如果我走在正确的道路上，我怎样才能找到函数的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T11:17:44.177

## 函数指针的语法

C/C++ 中的函数类型包括`return type`和`types of input parameters`.

考虑以下函数声明：

```
int function(char, float); 
```

指向该函数的指针具有以下类型：

```
int (*funptr)(char, float); 
```

一般情况下类似：

```
returntype function (argtype1, argtype2, argtype3) 
```

指向此类函数的相应指针是

```
returntype (*ptr) (atgtype1, atgtype2, atgtype3); 
```

有许多不同类型的函数。在此处找到[**有关函数指针的有用参考**](http://www.eskimo.com/~scs/cclass/int/sx10.html)。

此外，此分类基于`return type and argument types`. 功能*也可以根据其可访问性的范围进行分类。*像全局函数、静态函数等。请参阅此处[了解简短介绍](http://www.dreamincode.net/forums/topic/239347-static-functions-and-variables-in-c/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T11:15:36.037

因为每个函数都有它的类型，

例如，函数

```
double foo(bar& f, const const baz*) 
```

有一种

```
function, that accepts reference to bar and constant pointer to baz and return double 
```

它可以写成

```
double ()(bar&, const baz*) 
```

指向该函数类型变量的指针将具有类型（可以存储指向该函数的指针的变量）

会有类型

```
double (*)(bar&, const baz*) 
```

或者，如果您想 typedef 指向该类型函数的指针，您可以编写

```
typedef double (*func_ptr)(bar&, const baz*) 
```

再次，

```
func_ptr is a type of pointer to function, that accepts reference to bar and constant pointer to baz and return double 
```

这里的一件事是函数衰减为指向函数的指针，因此您可以编写

```
func_ptr f = &foo; 
```

和

```
func_ptr g = foo; 
```

它会是一样的。

* * *

现在想象一下，你有

```
struct A
{
    double goo(bar& f, const const baz*);
}; 
```

现在`goo`有一种类型

```
function of struct A, that accepts reference to bar and constant pointer to baz and return double 
```

指向此函数的指针将具有类型

```
double (A::*)(bar&, const baz*) 
```

请注意，它的类型*不同于*自由函数的类型`foo`。它们根本不兼容。

但是，如果`goo`是`static`函数，那么它所属的事实`struct A`是不够的（就成员函数需要隐式`this`参数而`static`函数不需要）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T11:10:32.613

它实际上`function signature`应该与`declaration`或与匹配`function pointer`

函数签名包含参数类型、参数数量和返回类型等所有内容。

直接像变量一样，您不能说特定函数是`int`类型或`float`类型`char`等

永远记住它`signature`就像我上面所说的那样。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-25T11:12:29.227

每对两个类型 (A,B) 都有一个特定的函数类型 A->B。如果我们选择 A=int, B=float，那么函数类型将变为：

```
float my_function(int a); 
```

# asp-classic - 如何使用 vbscript 创建动态验证码

> ID：13067228
> 
> 赞同：0
> 
> 时间：2012-10-25T11:05:41.097
> 
> 标签：asp-classic, captcha

验证码中通常会显示一个单词，用户只需输入该单词即可验证验证码。但在这种情况下，我想要的是我的验证码将包含一个口号（即一个句子），并且每次计算机都会询问...输入口号中的第一个单词..下次它询问时，输入第三个词等等随机......谁能告诉我这个是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T03:20:21.820

以下是我过去在 Classic ASP 中创建验证码的方式。当表单显示给用户时，我会生成一个随机数以及一个问题和答案。

随机数用作存储问题答案的会话变量的名称。我还添加了一个带有随机数值的隐藏字段。这个随机数允许一个用户在不同的窗口/选项卡中显示多个表单，而无需使用相同的会话变量。这也意味着任何试图破解该页面的人都必须先检索该页面，然后才能将其发布到该页面，这样就更难破解了。

当用户提交表单时，我得到隐藏字段值，然后得到存储在会话变量中的答案，并且会话变量被删除，因此'机器人无法多次尝试猜测答案。然后可以将用户的答案与用户输入的内容进行比较。如果他们不正确，则再次显示表单，并生成新的随机数和答案。

生成表单时的代码将是这样的：

```
'get your question and answer
strQuestion = "My question"
strAnswer = "answer"

Randomize
strVarName = Int((999999 - 100000 + 1) * Rnd() + 100000)
Session(strVarName) = strAnswer

<input type="hidden" name="varname" value="<%= strVarName %>" /> 
```

提交表单时的代码可能是这样的：

```
strVarName = Request.Form("varname")
strUserAnswer = Request.Form("answer")
strRealAnswer = Session(strVarName)
Session.Items.Remove(strVarName)

If strUserAnswer <> strRealAnswer Then
    'invalid response
    'show form again with new answer and session
End If 
```

# python - 为什么 dict 上的迭代会改变输出中的键顺序？

> ID：13067229
> 
> 赞同：3
> 
> 时间：2012-10-25T11:05:43.993
> 
> 标签：python

> **可能重复：**
> [为什么 python 像这样订购我的字典？](https://stackoverflow.com/questions/526125/why-is-python-ordering-my-dictionary-like-so)

为什么要在这个 dict 上迭代

```
d = {'tors':None,
     'head':None,
     'armr':None,
     'arml':None,
     'legl':None,     
     'legr':None}

for k in d.keys():
    print k 
```

将以不同的顺序输出键：

```
head
legl
armr
arml
tors
legr 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T11:07:19.830

在 python`dict`中被实现为哈希映射，没有人不能保证键的顺序。从文档

> CPython 实现细节：键和值以非随机的任意顺序列出，在 Python 实现中有所不同，并且取决于字典的插入和删除历史。

如果您需要继续订购，请`collections.OrderedDict`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:04:39.287

这应该做的工作：

```
import collections

ordered_d = collections.OrderedDict([('banana', 3),('apple',4),('pear', 1),('orange', 2)])
for k in ordered_d.keys():
    print k 
```

结果：

```
banana
apple
pear
orange 
```

# objective-c - Objective-C：使用 gdata 解析 XML

> ID：13067231
> 
> 赞同：0
> 
> 时间：2012-10-25T11:05:54.200
> 
> 标签：objective-c, xml-parsing, gdata

我正在尝试使用 GdataxmlNode 目标 c 库解析一个巨大的 xml 文档（描述 3d 模型）。

这是阻止我的 XML 示例：

```
<library_effects>
    <effect name="Love_Love-fx" id="Love_Love-fx">
        <profile_COMMON>
            <newparam sid="sexy-surface">
                <surface type="2D">
                    <init_from>sexy</init_from>
                    <format>A8R8G8B8</format>
                </surface>
            </newparam>
            ....
        </profile_COMMON>
    </effect>
    ....
</library_effects> 
```

**我的目标**：

1.  获得效果名称 (*Love_Love-fx*) : 完美

2.  获取 init_from ( *sexy* ) 的内容：根本不起作用

这是我解析它的方式：

```
xmlGetData = [xmlDoc.rootElement elementsForName:@"library_effects"];   

//Effects infos
int eff_c;
NSMutableArray *eff_ids = [[NSMutableArray alloc] init];  //effect names
NSMutableArray *eff_src = [[NSMutableArray alloc] init];  //efects sources

for (GDataXMLElement *e in xmlGetData)
{
    eff_c = [[e elementsForName:@"effect"]count];        
    NSArray *eff_node  = [e elementsForName:@"effect"];
    for (int i = 0; i < eff_c; i++)
    {
        //get the effect name (id & name are the same)
        [eff_ids addObject:[[eff_node objectAtIndex:i]attributeForName:@"id"]];
        //get the content of init_from
        [eff_src addObject:[[eff_node objectAtIndex:i]elementForName:@"init_from"]];
    }
} 
```

**我的问题**：我在最后一行 ( `[eff_src addObject.........`) 上有一个 SIGABRT，所以我无法获取“init_from”的内容

（因为`[[eff_node objectAtIndex:i]elementForName:@"init_from"]]`返回 Nil。？）

有人可以帮我吗？（有没有清晰完整的文档？我只看到博客文章解释了其中的一部分）

**恶心的解决方案**：使用`[[[[[[eff_node objectAtIndex:i]childAtIndex:0]childAtIndex:0]childAtIndex:0]childAtIndex:0]stri‌​ngValue];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:21:05.250

`eff_node`是 XML 节点`effect`。我的猜测是该`elementForName:`方法不能递归工作并且返回 nil 因为`init_from`不是`effect`.

要么是这样，要么你`effect`的 XML 中有没有`init_from`包含在其中的节点的 s。

基本上，您不能将 nil 添加到 an 中，`NSMutableArray`因此您需要测试您的两个`addObject:`参数是否为 nil，例如

```
id idAttr = [[eff_node objectAtIndex:i]attributeForName:@"id"];
if (idAttr != nil)
{
    [eff_ids addObject:idAttr];
}
GDataXMLElement* initFrom = [[eff_node objectAtIndex:i]elementForName:@"init_from"];
if (initFrom != nil)
{
    [eff_src addObject: initFrom];
} 
```

另请注意，该行

```
NSArray *eff_node  = [[NSArray alloc] init]; 
```

不必要地实例化一个空数组，并且在手动引用计数世界中是内存泄漏。

* * *

我刚刚查看了 GDataXML API，它是 a) 未记录的（从某种意义上说，他们无法编写文档，而不是私有 API 的意义）和 b) 有限。

您使用的方法不执行递归搜索，因此您有两个选择，要么实现您自己的递归搜索，要么使用 XPath API。填充应该得到你想要的节点：

```
 NSError* myError = nil;
 NSArray* initFromNodes = [[eff_node objectAtIndex: i] nodesForXPath: @"//init_from" error: &myError]; 
```

XPath的`//`部分意味着“树下的任意数量的级别”

# linux - 从具有一些隐藏目录的目录创建iso

> ID：13067236
> 
> 赞同：0
> 
> 时间：2012-10-25T11:06:20.103
> 
> 标签：linux, bash, shell

我有一个目录，其中包含许多文件和文件夹（有些是隐藏的）。我尝试了以下命令来创建 ISO： cd /path/of/content/dir/ && mkisofs -o /path/of/iso/file.iso * **[在这种情况下，它会留下隐藏的目录]**

&&

cd /path/of/content/dir/ && mkisofs -o /path/of/iso/file.iso ./{*,.[^.]*} **[在这种情况下，ISO 正在以完全意想不到的结构构建]**

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:31:30.927

用您的 CD 标签和目录替换斜体部分，当然：

```
mkisofs -V LABEL -r DIRECTORY | gzip > cdrom.iso.gz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:24:25.440

以下对我来说很好：

```
mkisofs -allow-leading-dots -o /tmp/test.iso ./ 
```

# c# - 在 WPF 中单击动态生成的 RadioButton 时动态生成标签

> ID：13067237
> 
> 赞同：0
> 
> 时间：2012-10-25T11:06:22.620
> 
> 标签：c#, .net, wpf, mvvm, radio-button

我是一名 C++ 开发人员，最近搬到了 wpf。我似乎遇到了一个棘手的情况，我必须根据单选按钮单击动态生成标签。在这里，我将首先向您展示我是如何生成 4 个单选按钮的。

XAML：

```
<Grid Grid.Row="0">           

        <ItemsControl ItemsSource="{Binding Children}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"
                    IsItemsHost="True" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <RadioButton Content="{Binding RadioBase}" Margin="0,10,0,0" IsChecked="{Binding BaseCheck}" Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>          

    </Grid>

<Grid Grid.Row="1">
    <Label Content="{Binding name}" HorizontalAlignment="Center" VerticalAlignment="Center" />      
</Grid> 
```

视图模型：

```
private bool sBaseCheck;
    public bool BaseCheck
    {
        get { return this.sBaseCheck; }
        set
        {
            this.sBaseCheck = value;                
            this.OnPropertyChanged("BaseCheck");
        }
    }

    private int _ID;
    public int ID
    {
        get
        {
            return _ID;
        }

        set
        {
            _ID = value;
            OnPropertyChanged("ID");
        }
    }

    private string _NAme;
    public string name
    {
        get
        {
            return _NAme;
        }

        set
        {
            _NAme= value;
            OnPropertyChanged("name");
        }
    }

    private string _RadioBase;
    public string RadioBase
    {
        get
        {
            return _RadioBase;
        }

        set
        {
            _RadioBase = value;
            OnPropertyChanged("RadioBase");
        }
    } 
```

另一个ViewModel 类：

```
public ObservableCollection<FPGAViewModel> Children { get; set; }

    public FPGARadioWidgetViewModel()
    {
        Children = new ObservableCollection<FPGAViewModel>();
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0", ID = 0 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x40", ID = 1 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x80", ID = 2 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0xc0", ID = 3 });            
    } 
```

这给了我 4 个带有上述内容的单选按钮。现在我想在每次单击单选按钮时生成 8 个标签。我在我的 C++ 应用程序中这样做了，如下所示：

```
for(i = 0; i < 0x40 / 8; i++)
{
    reg = (i * 8);
    m_registerLabel[i] = new Label(String::empty, String("Reg 0x") + String::toHexString(reg));
    addAndMakeVisible(m_registerLabel[i]);
} 
```

如果您注意到，它将创建 8 个带有值 as `Reg 0x0, Reg 0x8, Reg 0x10, Reg 0x18`etc 的标签，因为 reg 已转换为十六进制字符串。`Base 0x0`当我点击启动时，我想生成这样的东西。

我怎样才能在我的应用程序中实现这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:07:28.253

在您的`this.sBaseCheck`设置器中，您可以执行此代码。

```
private bool sBaseCheck;
public bool BaseCheck
{
    get { return this.sBaseCheck; }
    set
    {
        this.sBaseCheck = value;                
        Generatelabels(this)
        this.OnPropertyChanged("BaseCheck");
    }
} 
```

添加 2 个新属性...

```
 private string[] registerLabels = new string[8];
  public string[] RegisterLabels { get { return registerLabels; } }

  private bool isRegisterItemsVisible = false;
  public bool IsRegisterItemsVisible { 
       get { return isRegisterItemsVisible ; }
       set { 
           isRegisterItemsVisible = value; 
           OnPropertyChanged("IsRegisterItemsVisible"); 
           OnPropertyChanged("RegisterLabels"); 
       }
  } 
```

填充这些值...

```
private static void Generatelabels(FPGAViewModel currentItem)
{
  for(i = 0; i < 0x40 / 8; i++)
  {
       reg = (i * 8);
       currentItem.RegisterLabels[i] = "Reg 0x" + String::toHexString(reg);
       currentItem.IsRegisterItemsVisible = true;
   }
} 
```

在您的 GUI 上，将它们与现有 ItemsControl 中的`ItemsControl`另一个绑定。`ItemTemplate`

```
 <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <RadioButton 
                       Content="{Binding RadioBase}"
                       Margin="0,10,0,0"
                       IsChecked="{Binding BaseCheck}" 
                       Height="15" Width="80" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"/>
                    <ItemsControl 
                           Visibility="{Binding IsRegisterItemsVisible,
                                Converter={StaticResource BoolToVisibilityConv}}" 
                           ItemsSource="{Binding RegisterLabels}">   
                       <ItemsControl.ItemTemplate>
                          <DataTemplate>
                             <TextBlock Text="{Binding}"/>
                           </DataTemplate>
                       </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate> 
```

# c# - 如何让我的 asp.NET 在 iPhone UIWebView 上正确呈现？

> ID：13067239
> 
> 赞同：2
> 
> 时间：2012-10-25T11:06:25.257
> 
> 标签：c#, asp.net, ios, ios5, uiwebview

我正在 iOS 中开发一个安全的 Web 浏览器应用程序，我可以正确显示任何页面，但是使用 .NET（aspx、C#、Framework 2 和 4）内部开发的页面显示不正确。就像页面没有样式，也没有 javascript 功能。

我可以看到应用程序从服务器正确获取了 .css 和 .js 文件，但 UIWebView 不应用这些文件。

我已经测试了诸如“UIWebview 和 iPhone 内容不回发（ASP.NET 浏览器功能问题）”之类的解决方案以及其他与 *.browser 文件相关的解决方案，但它对我不起作用。

任何其他 .net 页面（来自 Sharepoint）都可以在 UIWebView 上完美运行，但不是我们内部开发的应用程序。

有什么线索吗？谢谢！

# c# - 在 c# BringWindowToTop 和 ShowWindow DLL 中不适用于所有应用程序

> ID：13067240
> 
> 赞同：2
> 
> 时间：2012-10-25T11:06:29.567
> 
> 标签：c#, showwindow

我在某些应用程序中遇到“BringWindowToTop”和“ShowWindow”问题，但不是全部。

问题是，如果我的应用程序被最小化到任务栏，并且当我一个一个打开应用程序时，除了 Outlook 之外，它们都打开了。

在 Outlook 的情况下，我发现使用 GetWindowPlacement dll，它返回它的 x 、 y 和 height 、 width 0 值。

在 Outlook 中，如果我的应用程序处于恢复模式/最大化模式，则 process.MainWindowHandle 具有不同的值，而处于最小化模式时 MainWindowHandle 具有不同的值。

下面是代码：

```
foreach (var process in System.Diagnostics.Process.GetProcessesByName("outlook"))
{
    ForceForegroundWindow1(process.MainWindowHandle, 2);                           
}

private static void ForceForegroundWindow1(IntPtr hWnd, int Status)
{
    uint foreThread = GetWindowThreadProcessId(GetForegroundWindow(), IntPtr.Zero);

    uint appThread = GetCurrentThreadId();

    int SW_SHOW = 5;
    if (Status == 0)
        SW_SHOW = 3;
    else if (Status == 2)
        SW_SHOW = 9;

    //SW_SHOW = 1;

    const int SW_RESTORE = 9;

    if (foreThread != appThread)
    {
        AttachThreadInput(foreThread, appThread, true);

        BringWindowToTop(hWnd);

        ShowWindow(hWnd, SW_SHOW);
        //  ShowWindowAsync(hWnd, SW_RESTORE);

        AttachThreadInput(foreThread, appThread, false);
    }
    else
    {
        BringWindowToTop(hWnd);

        ShowWindow(hWnd, SW_SHOW);
        // ShowWindowAsync(hWnd, SW_RESTORE);
    }

} 
```

你能帮我把所有应用程序的窗口都放在首位吗？

# paypal - 在 PayPal 中收款超过 29 天

> ID：13067243
> 
> 赞同：2
> 
> 时间：2012-10-25T11:06:40.453
> 
> 标签：paypal, payment

有没有办法如何在 PayPal 中获取/持有超过 29 天的资金？

最初的问题是我必须在某个特定的期限内获取资金，该期限可能超过 29 天。如果发生某些情况（项目的业务逻辑），将释放捕获的资金而无需任何税。是否可以使用 PayPal 实现它？

提前致谢。

-维克托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:39:02.330

不幸的是，默认情况下，PayPal 仅在 3 天内兑现 100% 的授权资金。您可以在 4 到 29 天内使用它，但您必须重新授权才能捕获。更多信息在这里：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_admin_authcapture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T01:02:06.800

您可以查看延迟的链式付款。（[https://www.x.com/developers/paypal/how-to-guides/how-make-delayed-chained-payment-using-adaptive-payments](https://www.x.com/developers/paypal/how-to-guides/how-make-delayed-chained-payment-using-adaptive-payments)）

链式支付涉及两个接收方：主要和次要。钱从发件人转移到主要付款人，然后一部分（高达 100%）的付款从主要付款人转移到次要付款。您可以将第二次转账最多延迟 90 天，让您有机会在将资金发放给二级收款人之前验证您的条件是否得到满足。

然而，它有两个缺点。1) 这笔钱实际上是从一开始就向用户收取的，由主要收款人持有。如果您需要全额退款，总体上您将损失 0.30 美元 2) 主要收款人对交易负责。如果买方决定提出索赔并获胜，那么主要就处于困境中。

所以是的，这是可能的，但请注意：）

# reporting-services - SQL Server Reporting Services - 行的平均值

> ID：13067254
> 
> 赞同：1
> 
> 时间：2012-10-25T11:07:26.503
> 
> 标签：reporting-services, reportingservices-2005, ssrs-tablix

我有一个 tablix，它产生如下数据：

```
ID | Name | Term1 | Term2
01 | RDA  | 2.9   | 3.9
02 | RDA  | 3.2   | 3.5 
```

我想在 tablix 的末尾有一列平均每行的值。

我尝试了以下方法：

```
 =(Sum(CDec(Fields!term1.Value),"DataSet1") + 
     Sum(CDec(Fields!term2.Value),"DataSet1"))/2 
```

但是，它添加了（2.9、3.9、3.2 和 3.5）的所有值，而不仅仅是 2.9 + 3.9 /2 的那一行。

是否可以计算每行的平均值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:00:46.623

我刚刚使用以下内容复制了您的数据和报告，它`sum()`按应有的方式执行：

```
=(sum(cdec(Fields!TERM1.Value)) + sum(cdec(Fields!TERM2.Value))) / 2 
```

我`,"DataSet1"`从计算中删除了。这会为数据添加一个范围，当应用范围时，它会聚合整个数据集 - 来自[MSDN](http://msdn.microsoft.com/en-us/library/ms155830%28v=sql.90%29.aspx)：

> 范围（字符串）
> 
> 包含要应用聚合函数的报表项的数据集、分组或数据区域的名称。如果指定了 Scope，则聚合函数适用于数据集、分组或数据区域中的所有数据。指定范围的所有组表达式必须包含简单的字段引用。有关 Scope 参数的详细信息，请参阅在表达式中使用报表函数 (Reporting Services)。

# java - GWT 强制滚动面板在手动滚动时呈现（带有描述情况的视频）

> ID：13067255
> 
> 赞同：2
> 
> 时间：2012-10-25T11:07:28.643
> 
> 标签：java, html, gwt, drag-and-drop, scroll

我在手动滚动滚动面板时遇到问题。下图显示了3种情况：

我有两个并排的网格，我使用树和[gwtqueryplugins](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)手动制作，因为拖放选项和其他不值得在这里解释的东西。

![在此处输入图像描述](../Images/43f400f99788770ac018cbe66c92ba19.png)

我想在网格之间拖动元素。
在案例 ( **1** ) 中什么都没有发生。
在案例 ( **2** ) 中，我将网格 2 中的一个元素（名为 Teresa）拖到网格 1 上的元素上，该元素变为红色。到目前为止一切正常。
现在，在 case( **3** ) 上，我遇到了麻烦。当箭头指示的面板上有一个可拖动的面板时，会在网格上触发滚动事件。滚动网格后，我想将可拖动的 Paulo 拖到 Cristina 上。但正如你所看到的，只有当 Paulo 远低于实际位置时，Cristina 才会悬停。

如果我离开浏览器页面（导致主页上出现滚动条）并返回“Cristina”就可以了。这让我相信直到我最终放下可拖动元素或页面被迫重新呈现并因此在其旧位置引用可放置对象时才会呈现 HTML...

**[在此处](http://www.youtube.com/watch?v=8v1ucBxcnbs)观看视频以全面了解问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:44:58.347

当您手动滚动区域时，滚动插件似乎无法处理您的事件。但是，当您拖出窗口时，它确实可以处理这种情况。

通常，它应该重新初始化所有 droppables。作为一种解决方法，您可以手动执行此操作 - 就在您滚动该区域之后：

```
DragAndDropManager.getInstance().initialize(draggableLabel.getElement(), null); 
```

# javascript - 防止 jquery 滑块被点击一百次 = 100 个动画

> ID：13067256
> 
> 赞同：0
> 
> 时间：2012-10-25T11:07:29.697
> 
> 标签：javascript, jquery, html

我正在构建我的第一个简单的手风琴类型的东西（没有任何网络 tuts），我拥有的 js 是这样的：

```
jQuery(document).ready(function($){

    $('#one').css("height", "25");
    $('#dtwo').css("height", "25"); 
    $('#three').css("height", "25");   
        $('#one').click(function() {
          if ($('#one').hasClass("extended")) {
            $('#one').animate({height: '25px'},500);
            $('#one').removeClass("extended");
            $('#a1').animate({opacity: '1'},500);
          } else {
            $('#one').animate({height: '120px'},500);
            $('#one').addClass("extended");
            $('#a1').animate({opacity: '0'},300);
          }
    });
}); 
```

哪个工作正常。

但是，您可以单击它 200 次，它会执行 200 次，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:13:00.633

如果你在谈论动画排队，你可以使用[stop()](http://api.jquery.com/stop/)方法。像这样的东西：

```
$('#a1').stop(true).animate({opacity: '1'},500); 
```

`true`作为第一个参数传递将清除队列。

> **clearQueue**一个布尔值，指示是否也删除排队的动画。默认为假。

如果由于 clearQueue 布尔值导致动画中途停止时遇到问题，您可以尝试`stop(true, true)`改用。

> **jumpToEnd**一个布尔值，指示是否立即完成当前动画。默认为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:19:17.517

尝试以下方法（未经测试，但您大致了解）：

```
if ($('#one').hasClass("extended")) {
        if ($('#one').data("inProgress")) return;
        $('#one').data("inProgress", true);
        $('#one').animate({height: '25px'},500);
        $('#one').removeClass("extended");
        $('#a1').animate({opacity: '1'},500);
        $('#one').data("inProgress", false);
      } else {
        if ($('#one').data("inProgress")) return;
        $('#one').data("inProgress", true);
        $('#one').animate({height: '120px'},500);
        $('#one').addClass("extended");
        $('#a1').animate({opacity: '0'},300);
        $('#one').data("inProgress", false);
      } 
```

# php - javascript 通过单击外部使 div 变为空白

> ID：13067257
> 
> 赞同：1
> 
> 时间：2012-10-25T11:07:32.073
> 
> 标签：php, javascript, ajax, html

我有许多搜索/文本框，它们使用 AJAX 搜索数据库表并将结果/搜索建议放在类似于谷歌搜索的 div 中。现在除了重新加载页面之外，没有办法清空这些 div。我想这样做，如果您退格以使文本框像在谷歌搜索中一样空白，则 div 会清空。现在，当您一直退格时，它会将其视为在“”上搜索并返回所有结果。或者让您在框外单击以清空它。否则，我最终会在页面上填充 div，这会使它变得混乱。我在想我要么需要更改查询，因此如果字符串为空，它不会返回任何内容，或者如果您在框外单击，则该框会变为空。感谢您的任何建议：

这是缩写代码：

Javascript

```
function getHints(str) {
...
document.getElementById("results").innerHTML=xmlhttp.responseText;//places output in results div
...
xmlhttp.open("GET","search.php?searchterm="+str,true);
xmlhttp.send();
} 
```

html

```
<input type="text" id="search" onkeyup="getHints(this.value)">Search<div id="results"></div> 
```

php

```
$str = $_REQUEST['str'];
$sql = "SELECT * FROM table WHERE name LIKE '%$str%'";
search database and echo out results. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:10:30.553

使用[jQuery](http://jquery.com/)，它会在做这样的事情时帮助你很多，AJAX，操作 DOM 等。

```
function getHints(str) {
    ...
    if (str === "")
    {
        document.getElementById("results").innerHTML = "";
    }
    else
    {
        document.getElementById("results").innerHTML=xmlhttp.responseText;
        ...
        xmlhttp.open("GET","search.php?searchterm="+str,true);
        xmlhttp.send();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:09:58.207

只需检查一个空字符串并相应地处理：

```
function getHints(str) {
    if (str == "") {
        document.getElementsById("results").innerHTML = "";
    }
    else {
    ...
    }
} 
```

# c# - 如何将新数据添加到 solr 服务器

> ID：13067259
> 
> 赞同：-2
> 
> 时间：2012-10-25T11:07:36.097
> 
> 标签：c#, javascript, jquery, asp.net, solr

我是 solr 的新手。

我有一个 solr 服务器。我想在服务器中添加一些新数据。

这个怎么做？我知道这是一个简单的问题。我在谷歌上搜索并没有找到任何合适的结果。

请分享一些好的链接来学习新数据到 solr 服务器并更新现有数据。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:30:19.133

谷歌搜索“solr 添加文档”给了我第一个有用的结果：

[http://wiki.apache.org/solr/UpdateXmlMessages](http://wiki.apache.org/solr/UpdateXmlMessages)

您需要将 XML 消息发布到 Solr 服务器。您可以使用 C# 中的 curl 库来做到这一点，但也许有任何好的库可以提供 API 来与 Solr 进行通信，就像 PHP 一样。

我找到了一个 5 秒的谷歌搜索：[http ://code.google.com/p/solrnet/](http://code.google.com/p/solrnet/)

# ios - iOS：如何处理当前用户位置的周期性更新

> ID：13067260
> 
> 赞同：0
> 
> 时间：2012-10-25T11:07:37.810
> 
> 标签：ios, xcode, geolocation, ios6

其实我有两个问题：

1) 你们会建议什么教程来在 iOS 中实现地理定位跟踪？我找到了这个[http://www.vellios.com/2010/08/16/core-location-gps-tutorial/](http://www.vellios.com/2010/08/16/core-location-gps-tutorial/)这似乎很不错，但因为它是两年前写的，我不知道是不是偶然使用了一些已弃用的 API。

2）假设我已经回答了第一个问题：你们将如何实现当前用户位置的周期性更新？是否可以在后台运行一个线程，每 n 分钟更新一次用户位置？有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:13:17.263

这是一个很好的教程，如何从 Apple 开始使用 Core Location：

[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

回答你的第二个问题：你的类应该支持 CLLocationManagerDelegate。当用户位置更改时，将调用下一个方法，您可以在其中实现所需的一切：

```
-(void)locationManager:(CLLocationManager *)manager
  didUpdateLocations:(NSArray *)locations {...} 
```

# cordova - JQM Gallery 与 phonegap 的滑动功能

> ID：13067261
> 
> 赞同：1
> 
> 时间：2012-10-25T11:07:43.030
> 
> 标签：cordova

我正在寻找一个不错的图片库插件，它支持PhoneGap jQuery mobile 中的滑动功能。它应该与[http://www.tn3gallery.com/](http://www.tn3gallery.com/)类似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:54:17.120

我没有在 PhoneGap 中尝试过，但我已经在 jquery 移动网页上实现了它：

[http://www.idangero.us/sliders/swiper/](http://www.idangero.us/sliders/swiper/)

# javascript - Jquery - 将对象转换为字符串

> ID：13067262
> 
> 赞同：1
> 
> 时间：2012-10-25T11:07:45.100
> 
> 标签：javascript, jquery

我有这个功能：

```
function create_image(){
        <?php if(isset($avatar)) : ?>
            var brojac = 4;
        <?php else: ?>
            var brojac = 5;
        <?php endif; ?>
        var broj_slike = (5 - brojac) + 1,
        slike;
        for (var i = 0; i <= brojac; i++) {
            slike += $('<label for="image'+ broj_slike +'">Slika ' + broj_slike + '</label><input type="file" name="userfile" id="image' + broj_slike + '" />');
            broj_slike++;
        };
        return slike;
     } 
```

它正在返回：

**未定义[对象对象][对象对象][对象对象][对象对象][对象对象]**

我怎样才能把它转换成字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:10:01.827

如果您想处理 HTML 字符串……不要将每个字符串转换为 jQuery 对象。

摆脱`$(`和`)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:10:05.443

为什么需要创建 jQuery 对象？

```
var broj_slike = (5 - brojac) + 1,
    slike = "";   // don't forget to init the string

for (var i = 0; i <= brojac; i++) {
    slike += '<label for="image'+ broj_slike +'">Slika ' + broj_slike + '</label> \
              <input type="file" name="userfile" id="image' + broj_slike + '" />';

    broj_slike++;
}; 
```

# asp.net - 为什么除了使用服务的类库之外，Web 应用程序中还需要服务引用？

> ID：13067267
> 
> 赞同：0
> 
> 时间：2012-10-25T11:07:57.737
> 
> 标签：asp.net, visual-studio-2010, visual-studio, visual-web-developer, visual-web-developer-2010

我打算通过类库为 ASP.NET Web 应用程序提供对 Web 服务的访问，并且一直在尝试一个简单的天气服务。

如果它有所作为，我正在使用 Visual Web Developer 2010 Express。

Web 应用程序和类库之间的接口是一个简单的字符串传递和字符串返回到单个类的单个方法，例如

```
String forecast = LibClassInstance.GetForecast("Madrid"); 
```

我将服务引用添加到类库中`AddServiceReference`，并通过自动生成的代理类创建了对服务的调用。到目前为止，一切都很好。

然后，我`GetForecast`从我的 Web 应用程序中调用我的简单方法，并收到一条长错误消息，大意是该服务可能尚未在我的项目`Web.config`文件中配置。将服务引用也添加到我的应用程序项目后，一切都按预期工作。我希望类库代码背后的服务对其客户隐藏。

> 谁能告诉我为什么需要向 Web 应用程序和类库添加服务引用才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:43:18.667

> 谁能告诉我为什么需要向 Web 应用程序和类库添加服务引用才能使其正常工作？

这是没有必要的。但是您确实需要在 Web.Config 中配置服务 - 作为起点，您可以复制`system.serviceModel`添加服务参考时在类库的 app.config 中生成的部分。

# python - 带有图像的简单 GUI

> ID：13067269
> 
> 赞同：0
> 
> 时间：2012-10-25T11:08:02.187
> 
> 标签：python, windows, image, user-interface, tkinter

我试图在我的简单 GUI 上显示一些卡片，但它没有显示出来。

我已经上传了一个带有我要上传的 .gif 的工作文件，并且代码很接近但不正确。 [http://www.filedropper.com/cardgameproblem](http://www.filedropper.com/cardgameproblem)大小：0Kb，类型：.zip

*   包含 1 个 .py 和 1 个 .gif

要查看的行从 257-266 开始。我知道这只是一个小错误，但我看不到它。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:00:00.313

经过一番修补后，我发现图像在存储在 GUI 的变量中时可以正确显示，即使用`self`

```
self.gif1 = PhotoImage(file='1.gif')
self.canvas.create_image(0, 0, image=self.gif1, anchor=NW) 
```

~~我不知道为什么，但是~~`gif1`这有效，而只是（或任何其他名称）命名变量，没有`self`, 没有。在您的代码和最小示例中进行了测试。

**更新：**正如@Bryan 指出的那样，垃圾收集器在完成`PhotoImage`时处理实例`__init__`。您必须在构造函数范围之外保留对实例的引用，例如 using`self`或`global`。考虑到手头的问题，最好创建一个`dict`，使用卡片名称作为键来存储图像。

# javascript - jQuery脚本触发两次？也许现场活动会触发两次？

> ID：13067272
> 
> 赞同：2
> 
> 时间：2012-10-25T11:08:05.937
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用最新版本的 PhoneGap、jQM 和 jQuery 1.8.0 构建应用程序。到目前为止一切顺利，除了我遇到的这个小而​​烦人的问题。

我的 show.html 从包含以下代码的 index.html 链接：

```
<div id="search"> contains search bar and submit button </div>
<div id="list" style="display:none;"> 
      <ul data-role="listview" data-filter="true"> </ul>
</div> 
```

ul 标记为空，因为单击提交按钮时列表将使用 ajax 动态附加到它。一开始我不想显示#list div，所以我将显示设置为无。

所以这很好用，当点击提交按钮时，它会向服务器发送一个 ajax 请求并将项目附加到列表中。它还将隐藏搜索 div。这也可以！

现在问题来了，我添加了一个 window.scroll 函数来检测何时到达页面底部。

这是我的 jQuery 代码：

```
$(document).on("pageshow", "#pageID", function() {
    $("#submit").click(function() {
        $.ajax({
                success: function(data, status){
                  $('#search').hide();
                  $('#list').show();
                //append to list div and refresh list here
                }
        });
    });
    //detects bottom of page
    $(window).scroll(function () {
        if ($(window).scrollTop()+200 >= ($(document).height() - ($(window).height()))) {       
            console.log('end of the page');
                        lastPostFunc(); //infinite scroll function
        } 
    });  
}); 
```

这会在萤火虫控制台上打印两次“页面结尾”！此脚本存在于 head 标签之间。

反正有没有让它打印一次？我需要这个，因为我实现了自己的无限滚动功能，问题是导致我的 ajax 请求两次发布到服务器。该函数运行良好，但不是问题的原因，因为即使我将 lastPostFunc() 注释掉，它仍然会打印到控制台两次！

**编辑：**就个人而言，我不认为到目前为止给出的答案是错误的，它们是正确的，但它们并不能帮助我解决问题。也许我需要更好地改写事情。我复制了我的代码并将其粘贴在一个独立的页面上，它只打印一次，所以我的代码实际上没有任何问题，它的工作方式应该是这样的。

因此，我想知道是否还有其他原因导致它在提交表单后打印两次。我的表格和我的结果页面在**同一**页面上。这是否意味着它导致现场活动进行了两次？因此，导致它在 pageshow 上两次打印到控制台？如果我是正确的，有没有办法解决这个问题并让它只打印**一次**？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:20:11.797

Okay I finally solved it.

Apparently all I have to do is to add this line of code to it:

```
 $(window).scroll(function (e) {
        if (reach bottom) {
            e.stopImmediatePropagation();
            console.log('End of the Page');
        } 
    }); 
```

And it works! Stopped printing twice for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:47:57.913

May this will solve your problem

```
jQuery(window).scroll(function() {
    if( (jQuery(document).height() < (jQuery(window).scrollTop() + jQuery(window).height() + 200))&&(jQuery(document).height() > (jQuery(window).scrollTop() + jQuery(window).height() + 99))) {        
    console.log('test')                                         
    }
}); 
```

//Update

```
 var lastlogtime= null;
jQuery(window).scroll(function() {
        if( (jQuery(document).height() < (jQuery(window).scrollTop() + jQuery(window).height() + 200))&&(jQuery(document).height() > (jQuery(window).scrollTop() + jQuery(window).height() + 99))) {
        if(((lastlogtime+600)<(+new Date())) || (lastlogtime== null)){
            //your scroll logic
            console.log('test')         ;
            lastlogtime=    +new Date();                            
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:28:17.230

您的函数实际上会将输出写入控制台两次以上。问题在于您的情况：

```
if ($(window).scrollTop()+200 >= ($(document).height() - ($(window).height()))) 
```

因为对于该区域内的每个滚动，条件都会评估为真。您可以将其更改为：

```
if ($(window).scrollTop() == ($(document).height() - ($(window).height()))) 
```

# android - 如何为 DownloadManager 请求设置图标？

> ID：13067273
> 
> 赞同：2
> 
> 时间：2012-10-25T11:08:09.073
> 
> 标签：android

我正在尝试为我创建的 DownloadManager 请求设置一个图标，但我无法做到这一点。我阅读了有关创建广播接收器的信息，但我想知道如果没有它是否可以做到这一点。这是我的 DownloadManager 请求代码：

```
final String filename = getIntent().getExtras().getString("id") + ".apk";

            DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
            request.setTitle(filename);
            request.setDescription("Downloading...");
            request.setMimeType("application/vnd.android.package-archive");
            // in order for this if to run, you must use the android 3.2 to compile your app
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                request.allowScanningByMediaScanner();
                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
            }
            request.setDestinationInExternalPublicDir("/Library", filename);
            // get download service and enqueue file
            DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
            manager.enqueue(request);

            Toast.makeText(LinkActivity.this, "Download has started.", Toast.LENGTH_LONG).show(); 
```

这是它现在的样子的一个例子： ![在此处输入图像描述](../Images/50cb621fddfd2b50538bf4a0f76f2a6a.png)

我的目标是更改左侧通知ImageView的图像。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:36:04.310

您不能覆盖此图标。而且，如果我没记错的话，这样做没有多大意义，因为下载管理器可以运行多个下载，并且仍然需要一个通知槽来指示...

# sql-server - SSMS 中未显示数据库

> ID：13067276
> 
> 赞同：1
> 
> 时间：2012-10-25T11:08:19.467
> 
> 标签：sql-server

我正在使用 SQL Server 2012，但遇到了一个奇怪的问题。

我试图将数据库快照还原到数据库。通常恢复不会花太多时间，但现在花了 5 分钟，还在恢复中，所以我停止了查询执行。它试图停止查询执行超过 5 分钟，所以我使用任务管理器关闭了 SSMS。

然后我尝试使用`KILL`.

![在此处输入图像描述](../Images/6a5dcf642b8d8a26c8ecf22e91cc9d0c.png)

现在我可以连接到该服务器，但数据库列表未打开。我的意思是：无论谁连接到此服务器，他们都无法获取数据库。当我检查`sysprocesses`表格时，它显示`lastwaittype`为`LCK_M_S`。

我的用户都看不到数据库。看来我有点搞砸了。我无法重新启动 SQL Server，因为其他人已连接到服务器。

我该如何解决这个问题？请帮忙。

**编辑：** 我尝试[了这种方法](http://blog.sqlauthority.com/2011/02/15/sql-server-lck_m_xxx-wait-type-day-15-of-28/)，当我检查时

```
select db_name(dbid), * from sysprocesses where blocked <> 0 
```

我有两个记录，

![在此处输入图像描述](../Images/f64a046f9fc5f9f7d6f8c6420e01ef71.png)

您是否认为因为这两个过程的其余部分被锁定了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:20:53.820

我猜`sysdatabases`主数据库中的表上仍然有一些隐藏的锁。这很可能是由`KILL`restore 命令引起的。

这里的文章可能会对您有所帮助：

[http://ellisweb.net/2012/02/clearing-out-a-mysterious-table-lock-lck_m_s-in-sql-server-2008/](http://ellisweb.net/2012/02/clearing-out-a-mysterious-table-lock-lck_m_s-in-sql-server-2008/)

它基本上建议您确定隐藏锁的来源，然后`KILL`在该进程 ID 上发出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:08:28.943

尝试重新启动实例。如果您的用户无论如何都看不到任何数据库，也不会受到伤害。

# ios6 - 查找在 ViewController 中调用的 segue

> ID：13067277
> 
> 赞同：0
> 
> 时间：2012-10-25T11:08:20.680
> 
> 标签：ios6, uistoryboard, segue

我正在使用情节提要并有一个包含事件的 UITableView，单击该事件时会加载另一个包含更多详细信息的视图。我在该列表上还有一个“添加”按钮，该按钮转到同一页面，但不会预先填充信息并更改横幅按钮。

我通过使用以下方法设置详细信息项来做到这一点，然后在 configureView 方法中我只是检查详细信息项是否存在。

```
- (void)setDetailItem:(id)newDetailItem {
    if (self.detailItem != newDetailItem) {
        _detailItem = newDetailItem;
        [self configureView];
    } } 
```

这工作正常，但我认为可能有更好的方法来区分方法，例如通过在这个新的视图控制器中获取 segue 标识符并使​​用它。有没有一种简单的方法可以做到这一点，或者我是否需要将此信息作为 prepareForSegue 方法的一部分传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:55:07.130

使用`prepareForSegue:`似乎是正确的。一般来说，如果方法在参数中不明确，那么关心它们被调用的条件是一个坏主意。

# ajax - 如何在不使用 AJAX 或任何循环检查方法的情况下自动更新我的数据？

> ID：13067279
> 
> 赞同：0
> 
> 时间：2012-10-25T11:08:26.033
> 
> 标签：ajax, database, http

我有一个必须在数据库更新后立即更新的数据表页面。我不允许使用任何循环检查方法，包括 AJAX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:10:07.553

假设您能够检测到数据库服务器端的插入，通常的解决方案是像 StackOverflow 一样使用[websockets](http://en.wikipedia.org/wiki/WebSocket)。

它们允许您以很少的开销将数据从服务器*推送到浏览器，没有无用的拉取请求，也没有客户端循环。*

# mysql - MySQL 查询（条件）

> ID：13067282
> 
> 赞同：1
> 
> 时间：2012-10-25T11:08:52.473
> 
> 标签：mysql

我想实现一件事，但我不确定它是否可能。因此，假设我有一个包含几列的表，但现在我只对其中两个感兴趣。表格示例：

```
Column 1  | Column 2 
blabla    | blablahhhhh
wor154    | blablahhhhh
word123   | word12435564
something | some4565 
```

我想要实现的是选择第 2 列值的前 5 个或更多符号与第 1 列值的前 5 个或更多符号不匹配的所有字段。所以我不想选择 5 或第 1 列值的更多符号匹配第 2 列值的 5 个或更多符号。例如，查询应该只返回第 2 行和第 4 行所以，是否有可能，如果有，如何实现。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:12:49.267

我会选择[`SUBSTRING()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)：

```
SELECT col1 FROM table WHERE SUBSTRING(col1, 1, 5) <> SUBSTRING(col2, 1, 5); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T11:13:01.283

您可以使用类似的东西：

```
select *
from table1
where substring(column1, 1, 5) != substring(column2, 1, 5) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a030b/3)

# asp.net-mvc - 实体框架所需的外键 = db.SaveChanges 上的验证错误

> ID：13067288
> 
> 赞同：2
> 
> 时间：2012-10-25T11:09:10.727
> 
> 标签：asp.net-mvc, entity-framework

我的公司实体有这些课程

```
 public class Company
    {
        public Company()
        {
            this.Users = new HashSet<User>();
            this.Tools = new HashSet<Tool>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public string Address { get; set; }

        public virtual ICollection<User> Users { get; set; }
        public virtual ICollection<Tool> Tools { get; set; }
        [Required]
        public virtual CompanyGroup CompanyGroup { get; set; }
    }

    public class CompanyDto
    {
        public string Name { get; set; }
        public string Address { get; set; }
    } 
```

在 CompaniesController 中，我添加了一个带有 Id 参数的附加类，用于像这样的编辑/更新方法

```
 public class CompanyViewEditModel : CompanyDto {
        public int Id { get; set; }
    } 
```

编辑方法如下所示：

```
 [HttpPost]
        public ActionResult Edit(CompanyViewEditModel companyViewModel)
        {
            if (ModelState.IsValid)
            {
                var company = db.Companies.Find(companyViewModel.Id);
                company.InjectFrom(companyViewModel);
                db.Entry(company).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(companyViewModel);
        } 
```

InjectFrom 方法来自 ValueInjecter。

由于验证异常，只有 db.SaveChanges 调用失败，一切都按预期工作。通过对异常的一些挖掘，我发现他认为公司无效，因为字段 CompanyGroup 是必需的，但是如果我使用调试器查看公司变量，即使在 InjectFrom 调用之后一切似乎都很好。相应的公司集团就在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:12:54.447

考虑更改您的模型，因为您不必根据需要标记导航属性。而是像这样添加一个 FK。

```
public class Company
{
    public Company()
    {
        this.Users = new HashSet<User>();
        this.Tools = new HashSet<Tool>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public int CompanyGroupId { get; set; }

    public virtual ICollection<User> Users { get; set; }
    public virtual ICollection<Tool> Tools { get; set; }
    public virtual CompanyGroup CompanyGroup { get; set; }
} 
```

# javascript - setTimeout / setInterval 手机浏览器计算cpu效率

> ID：13067289
> 
> 赞同：0
> 
> 时间：2012-10-25T11:09:15.547
> 
> 标签：javascript

如何使用setTimeout/setInterval计算手机浏览器的cpu效率？

```
function fn() {
    var start = new Date();
    setInterval(function () {
        var _s = new Date();
        console.info(_s - start);
        start = _s;
    }, 1000/60)
}
fn() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:48:27.323

您可以使用控制台时间：

```
function someFunction(){
    console.timeEnd('someFunction timer');
    //this function's code goes here...
    console.time('someFunction timer');
} 
```

这将为您提供执行函数所需的时间。这是你需要的吗？

或者也许这个？

```
var start = new Date().getTime();

//your code
var end = new Date().getTime();
var time = end - start;
alert('Execution time: ' + time); 
```

# ios - iOS 文档中关于 UIView 的 alpha 属性的错误？

> ID：13067296
> 
> 赞同：3
> 
> 时间：2012-10-25T11:09:35.830
> 
> 标签：ios, alpha

我刚刚注意到 UIView 的类参考中有一些奇怪的东西。在 alpha 下，它指出：

> 此值仅影响当前视图，不影响其任何嵌入的子视图。

但正如你肯定知道的那样，情况并非如此。如果您更改超级视图的 alpha，所有子视图也会应用新的 alpha。

这是文档中的错误还是我误解了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:58:51.227

> 此值仅影响当前视图，不影响其任何嵌入的子视图。

我将其理解为：

> 更改视图上的 alpha 值不会更改任何子视图上的 alpha 值。同样，虽然子视图似乎已经改变了它们的 alpha，但它们的`.alpha`属性值不会在父视图改变时`.alpha`改变。

# jsf - primefaces 取消按钮未导航到上一页

> ID：13067297
> 
> 赞同：1
> 
> 时间：2012-10-25T11:09:43.357
> 
> 标签：jsf, primefaces

我有一个`p:commandButton`，当我点击它时，我希望它带我到上一页。这是我使用的代码 -

```
<p:commandButton id="cancel" value=" Cancel" action="cancel" ajax="false"  process="@this"/> 
```

但是，当我单击取消时，没有任何反应。请让我知道如何让我的按钮导航到上一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T14:03:13.820

您可以在按钮的 oncomplete 事件中使用 javascript。

> oncomplete = "window.history.back();"

# php - 单击行以填充 php 中的文本框 - 数组与 ajax

> ID：13067300
> 
> 赞同：1
> 
> 时间：2012-10-25T11:10:00.570
> 
> 标签：php

我有一个用 php 编码的表，它从 mysql 数据库中提取数据并将其显示在 html 表中。现在，当我单击一行时，我需要填充某些文本框。

最好的方法是什么：是使用数组还是 ajax、html 和 php，

```
<?php
$default = "<img src='http://localhost/on.png' width='24' height='24'/>";
 $default1 = "<img src='http://localhost/of.png' width='24' height='24'/>";
 $con = mysql_connect("*****","******","******");
if (!$con){
 die("Can not connect: " . mysql_error());
}
 mysql_select_db ("*****",$con);
$sql= "select act.*
 from audit_activity as act
  inner join (
      select user_id, max(timestamp) as max_ts
      from activity
      group by user_id) as a on act.user_id=a.user_id and act.timestamp=a.max_ts";
 $mydata = mysql_query($sql,$con);

 echo "<table id='tfhover',table border=0>
<tr>
 <th>Users</th>
 <th>Status<th>
</tr>";
while($record = mysql_fetch_array($mydata)){
echo "<tr>";
echo "<td>" . $record['user_id'] . "</td>";
if (strtolower(trim($record['activity']))!=strtolower('LOGIN')){ 
echo "<td>" . $default1  . "</td>";
}else{

 echo "<td>" . $default  . "</td>";
}

echo "</tr>";
}
echo "</table>";
;

mysql_close($con);

?>

<html>
<script type="text/javascript">
window.onload=function(){
var tfrow = document.getElementById('tfhover').rows.length;
var tbRow=[];
for (var i=1;i<tfrow;i++) {
    tbRow[i]=document.getElementById('tfhover').rows[i];
    tbRow[i].onmouseover = function(){
      this.style.backgroundColor = '#ffffff';
    };
    tbRow[i].onmouseout = function() {
      this.style.backgroundColor = '#d4e3e5';
    };
}
 };
  </script>
 <head>

 </head>
 <body>

  Total exams taken  : <br>
<input type="text" name="fname"/>
</body>

</html> 
```

# youtube-api - 带有 php 的 Youtube-Channel 参数（Age、Description、Upload-Count...）

> ID：13067305
> 
> 赞同：1
> 
> 时间：2012-10-25T11:10:10.297
> 
> 标签：youtube-api

我想编写一个包含一些 youtube 频道信息的网站。我得到以下参数：

**订户：**

```
<?php
        $json = file_get_contents("http://gdata.youtube.com/feeds/api/users/*username*?alt=json");
        $data = json_decode($json, true);
        echo '' . $data['entry']['yt$statistics']['subscriberCount'];
        ?> 
```

**香奈儿-观点：**

```
<?php
        $json = file_get_contents("http://gdata.youtube.com/feeds/api/users/*username*?alt=json");
        $data = json_decode($json, true);
        echo '' . $data['entry']['yt$statistics']['viewCount'];
        ?> 
```

**总浏览：**

```
<?php
        $json = file_get_contents("http://gdata.youtube.com/feeds/api/users/*username*?alt=json");
        $data = json_decode($json, true);
        echo '' . $data['entry']['yt$statistics']['totalUploadViews'];
        ?> 
```

但是我怎么能得到**上传视频的数量**。我只想显示该用户上传了多少视频。

我想显示**他加入 youtube 的年龄、描述、片段和日期**。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:51:18.950

给定 YouTube 频道中的公共视频数量可以通过该`openSearch$totalResults->$t`频道的上传供稿的属性获得。这是一个示例`GoogleDevelopers`：

[http://gdata.youtube.com/feeds/api/users/googledevelopers/uploads?v=2&alt=json](http://gdata.youtube.com/feeds/api/users/googledevelopers/uploads?v=2&alt=json)

```
"openSearch$totalResults": {
  "$t": 1458
} 
```

您要查找的大部分其他信息（关于频道创建者的个人详细信息）不再在 YouTube.com 上或通过 API 公开。

# c# - 在字符串中每 4(th) 个字符输入一个字符

> ID：13067306
> 
> 赞同：-4
> 
> 时间：2012-10-25T11:10:14.810
> 
> 标签：c#, asp.net, string

我有一个字符串，它现在的格式将用作序列号：

XXX1XXX2XXX3XXX4

我希望它格式化为：

XXX1-XXX2-XXX3-XXX4

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:14:07.933

你试过`string.insert`吗？

> [MSDN：String.Insert 方法](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)

我相信你可以用它创建一些逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:24:33.287

有很多方法可以做到这一点。:)

这是另一个：

```
string s = "XXX1XXX2XXX3XXX4";
StringBuilder sb = new StringBuilder();

for (int i = 0; i < s.Length; ++i)
{
    sb.Append(s[i]);

    if ((i < s.Length-1) && ((i+1) % 4) == 0)
    {
        sb.Append('-');
    }
}

s = sb.ToString();
Console.WriteLine(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:20:45.207

```
string str="0123567236359783590203582835";
 str.ToCharArray()
 .Aggregate("",
 (result, c) => result += ((!string.IsNullOrEmpty(result) && (result.Length+1) % 5 == 0)
                              ? "-" : "")
                             + c.ToString()
 );

// --> 0123-5672-3635-9783-5902-0358-2835 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:21:57.127

```
StringBuilder init = new StringBuilder("XXX1XXX2XXX3XXX4");

string insertVal = "-";

for(int i=4, i<init.length;i=i+5)
{
    init.insert(i, inserVal, 1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T11:23:58.103

尝试使用`Linq`如下...

```
 var s = "XXX1XXX2XXX3XXX4xx5x";
    var list = Enumerable
        .Range(0, s.Length/4)
        .Select(i => s.Substring(i*4, 4))
        .ToList();
    var res = string.Join("-", list);
    Console.WriteLine("{0}",res); 
```

# xml - 从 DLL 将数据写入 XML

> ID：13067319
> 
> 赞同：0
> 
> 时间：2012-10-25T11:11:07.370
> 
> 标签：xml, visual-c++, dll, file-handling

我正在尝试遍历 std::list 并将数据从 DLL 中的线程写入 xml。但是，如果我将更多对象字段转储到 XML 中，则不会创建我的 XML。下面是我的课程的详细信息以及我用来将数据写入 XML 的代码。

```
class MyClass{
private:
    BSTR member1;
    BSTR member2;
    BSTR member3;
    BSTR member4;
public:
    MyClass();
    ~MyClass();
    BSTR getMember1()
    {
        return member1;
    }
    BSTR getMember2()
    {
        return member2;
    }
    BSTR getMember3()
    {
        return member3;
    }
    BSTR getMember4()
    {
        return member4;
    }
    //Corresponding setters are also present
};

std::list<MyClass> myList;
std::list<MyClass>::iterator iterator;

ofstream outputFile;
outputFile.open("C:\\test.xml",ios::out);
outputFile << "<root>" << endl;
for(iterator=myList.begin();iterator != myList.end();++iterator)
{
     //Not working if more values are dumped
     USES_CONVERSION;
     outputFile << "<Object>" << endl;
     outputFile << "<Member1>" << W2A(CString((*iterator).getMember1())) << "</Member1>" << endl;
     outputFile << "<Member2>" << W2A(CString((*iterator).getMember2())) << "</Member2>" << endl;
     outputFile << "<Member3>" << W2A(CString((*iterator).getMember3())) << "</Member3>" << endl;
     outputFile << "<Member4>" << W2A(CString((*iterator).getMember4())) << "</Member4>" << endl;
     outputFile << "</Object>" << endl;
}
outputFile << "</root>";
outpuFile.close(); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:45:25.390

我找到了原因，这是因为我正在写入文件而不检查值是否为NULL。对于某些对象，所有成员都未填充。

```
 outputFile << "<Member3>" << W2A(CString((*iterator).getMember3())) << "</Member3>" << endl; 
```

在写入文件之前，我应该检查**getMember3()是否提供任何数据或 NULL :)。**

/哈雷什

# sharepoint - 是否可以为 .NET 3.5 和 .NET 4.5 提供单个（便携式？）库？

> ID：13067320
> 
> 赞同：2
> 
> 时间：2012-10-25T11:11:09.400
> 
> 标签：sharepoint, .net-4.5, portable-class-library, sharepoint-2013

我们有一个针对 SharePoint 2010/.NET 3.5 的大型项目，针对 SharePoint.dll 构建，我们计划扩展它以支持 SharePoint 2013，但新的 SharePoint 使用在 .NET 4.5 中编译的 SharePoint.dll。

是否有可能以某种方式在 .NET 3.5 和 .NET 4.5 项目之间共享代码，例如可移植类库，但在 .NET 3.5 和 4.5 之间？或者唯一的解决方案是为 .NET 4.5 启动新项目并使用第一个 .NET 3.5 项目中的引用文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:15:26.327

.NET 构建目标是针对每个项目的，因此 4.5 解决方案可以包含针对 3.5 的项目库。您可以拥有一个 4.5 库，在需要时扩展 3.5 解决方案，并且您的主要解决方案可以构建到 4.5 并包含 4.5 库。

因此，3.5 解决方案和 4.5 解决方案都使用相同的 3.5 SharePoint 代码库，但 4.5 解决方案可以扩展您的 SharePoint 库以利用 2010 和 .Net 4.5 中不可用的新功能

# delphi - 数据资源管理器中缺少 SQLite 选项

> ID：13067322
> 
> 赞同：1
> 
> 时间：2012-10-25T11:11:25.853
> 
> 标签：delphi, sqlite, dbexpress, delphi-xe3

我正在使用*Delphi XE3（终极版）*创建一个应用程序，它将利用嵌入式 SQLite 数据库。我观看了与它相关的各种视频，我注意到我的数据资源管理器与视频不匹配。起初我的数据资源管理器是空的，只有`dbExpress`. 我也试过几次重新运行安装程序，出现`DataSnap`, `DBXPool`, ,但这不是因为重新运行安装。无论如何，我该怎么做才能让 SQLite 选项出现在我面前？`DBXTrace``IBToGo``InterBas`

这是我的数据资源管理器目前的样子：

![数据浏览器](../Images/f16587dbce3debf58e14073aca232164.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:15:41.313

检查 dbxdrivers.ini 和 dbxconnections.ini 以了解 dbexpress 配置。您可能需要为 Sqlite dbexpress 配置添加一个条目。

# asp.net-mvc - HttpContextBase 对 IPrincipal 的依赖？

> ID：13067324
> 
> 赞同：0
> 
> 时间：2012-10-25T11:11:29.243
> 
> 标签：asp.net-mvc, castle-windsor

我有以下温莎设置：

```
 container.Register(
            Component.For<HttpContextBase>().
                UsingFactoryMethod(() => new HttpContextWrapper(HttpContext.Current)).LifeStyle.PerWebRequest);

        container.Register(
            Component.For<IPrincipal>().
                UsingFactoryMethod(() => HttpContext.Current.User).LifeStyle.PerWebRequest); 
```

然后，我尝试在设置 HttpContext.Current.User 属性之前解析 HttpContextBase。在解析 HttpContextBase 期间，windsor 尝试解析为 null 的 IPrincipal，并引发异常。

如果我用我认为应该做的事情来代替决心，即

```
new HttpContextWrapper(HttpContext.Current) 
```

然后我的代码有效。

有人可以解释为什么 Windsor 会尝试为 HttpContextBase 解析 IPrincipal 吗？我可以阻止它这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:04:30.203

Windsor 也尝试注入属性依赖项。你必须明确地说，你不想。

```
Component.For<HttpContextBase>().Properties(PropertyFilter.IgnoreAll))... 
```

# ssis - 使用提供程序的 SSIS OLE DB 源

> ID：13067325
> 
> 赞同：1
> 
> 时间：2012-10-25T11:11:37.277
> 
> 标签：ssis, export-to-excel

我正在使用一个过程，该过程使用表变量从我的数据库中获取相关数据，然后将该表变量中存储的任何内容返回到我的数据流。

我的 OLE DB 源仅设计用于运行 SQL 命令 EXEC FetchData_prc。

它在源代码编辑器中显示了所需的列，它还允许我进行映射、预览和所有这些操作。

然而，在运行包时，它会引发错误：`[OLE DB Source [1]] Error: A rowset based on the SQL command was not returned by the OLE DB provider.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:48:59.063

您可以尝试`set nocount on`在存储过程上阻止服务器返回行数。这可能会被 SSIS 误认为是返回的结果集。 [看到这个](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)

# jsp - 可用的各种转发选项之间的区别

> ID：13067326
> 
> 赞同：1
> 
> 时间：2012-10-25T11:11:42.147
> 
> 标签：jsp, requestdispatcher

有谁能告诉我
1) response.sendRedirect()
2) jsp:forward
3) RequestDispatcher .forward
4) RequestDispatcher .include之间的
区别，它们可以具体使用的不同情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:56:25.840

**1) response.sendRedirect()**

*---当用户因密码错误而登录失败时，您可以再次重定向到登录页面，无需任何参数或属性*

response.sendRedirect 使用指定的重定向位置 URL 向客户端发送临时重定向响应。此方法可以接受相对或绝对 URL。Servlet 容器在向客户端发送响应之前将相对 URL 转换为绝对 URL。如果该位置是相对的，没有前导“/”，则容器将其解释为相对于当前请求 URI。如果位置与前导“/”相对，则容器将其解释为相对于 servlet 容器根。

**2）重定向和转发的区别**

Servlet 重定向和 servlet 转发都用于处理对其他 URL/Servlet 的请求处理，但它的工作方式有很大不同。主要区别在于 Servlet 重定向始终向客户端发送 HTTP 状态代码 303 以及重定向 URL。客户端然后向 URL 发送一个新请求。因此 response.sendRedirect() 比转发多一次往返，因为 servlet 转发只是将请求转发到服务器上的另一个资源，它不需要完整的往返，这就是转发的原因有时称为服务器端重定向。另一个区别是您可以将请求重定向到另一个站点上的某个其他 URL，但您不能将请求转发到不同站点上的某个其他 URL。Servlet forward 将现有请求转发到另一个 JSP 或 Servlet，因此所有请求参数和属性都可用于目标 servlet。但是通过重定向，浏览器会向指定的 URL 发送新请求，因此旧的请求参数和属性将无法用于目标资源。浏览器完全不知道 servlet 转发，因此浏览器地址栏中的 URL 将保持不变。当使用 servlet 重定向时，浏览器地址栏中的 URL 将更改为新 URL。

**3) jsp:forward , jsp:include 和 RequestDispatcher .forward , RequestDispatcher .include 相同**

*Jsp 内部转换为 Servlet ，所以 Jsp Forward 和 Servlet Forward 没有区别。*

当你想转发你的响应和请求 RequestDispatcher .forward 很有用

当您想包含一些结果时 RequestDispatcher .include 很有用

# html - CSS3：白线不应该在带有图标的按钮内吗？

> ID：13067327
> 
> 赞同：0
> 
> 时间：2012-10-25T11:11:43.067
> 
> 标签：html, css

这是一个屏幕截图，您可以在图标顶部看到一条白线，**如红色箭头所示？**

我在 Illustrator 上检查过，没有白线？图标大小为 20 倍宽 x 15 像素高。

[![对齐顶部](../Images/f590d8d7c9ee91e1ae088bd6fbda7426.png "工具提示")](https://i.stack.imgur.com/r3dKb.png "工具提示")

按钮的 CSS3 代码：

```
.blue_small {
height: 40px;
width: 40px;
margin-left:16px;
margin-bottom:6px;
background-color:#003F5F;
-moz-border-radius: 50%; 
-webkit-border-radius: 50%; 
border-radius: 50%;
border: 3px solid #fff;
-webkit-box-shadow: 0px 2px 6px rgba(64,80,85,0.8);  
box-shadow: 0px 2px 6px rgba(64,80,85,0.8);} 
```

更新了该部分的 HTML5，我已经包含了**css/normalize.css**但它没有任何区别：

```
 <button class="blue_small"></button> 
```

明明是个小故障，不知道怎么解决？

已解决：带有背景：url（../images/index_video_small2.svg）不重复左5px顶部7px；

[![对齐顶部](../Images/af367b949af1e7d2277523cb5c889712.png "工具提示")](https://i.stack.imgur.com/3elB3.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/line_ok.png)）]

# php - 我如何在php中将表单值发送到邮件

> ID：13067330
> 
> 赞同：1
> 
> 时间：2012-10-25T11:11:53.837
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 发送邮件？](https://stackoverflow.com/questions/634029/how-to-send-mail-using-php)
> [无法使用 smtp.gmail.com 发送 php 邮件](https://stackoverflow.com/questions/7331006/php-mail-cannot-be-sent-with-smtp-gmail-com)

我在使用该`mail()`函数在 PHP 中发送邮件时遇到一些问题。这是我的php代码

```
<html>
<body>

<?php
if (isset($_REQUEST['email']))
//if "email" is filled out, send email
  {
  //send email
  ini_set("SMTP", "ssl://smtp.gmail.com");
  $email = $_REQUEST['email'] ;
  $subject = $_REQUEST['subject'] ;
  $message = $_REQUEST['message'] ;
  mail("mr.choudhary_2008@rediff.com",$subject,$message,"From:" .$email);
  echo "Thank you for using our mail form";
  }
else
//if "email" is not filled out, display the form
  {
  echo "<form method='post' action='email.php'>
  Email: <input name='email' type='text' /><br />
  Subject: <input name='subject' type='text' /><br />
  Message:<br />
  <textarea name='message' rows='15' cols='40'>
  </textarea><br />
  <input type='submit' />
  </form>";
  }
?>

</body>
</html> 
```

我得到的错误是：

```
Warning: mail() [function.mail]: Failed to connect to mailserver at "ssl://smtp.gmail.com" port 25, verify your "SMTP" and "smtp_port" setting in php.ini or use ini_set() in D:\xampp\htdocs\email.php on line 14

Thank you for using our mail form 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:21:26.293

The mail settings are wrong. Use these settings.

```
smtp.auth=true
smtp.ssl=true
smtp.tls=true
smtp.username=unm
smtp.password=pwd
smtp.server="smtp.gmail.com";
smtp.port="465" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:17:37.277

检查`/usr/sbin/sendmail`并`/usr/lib/sendmail`首先。确保你有发送邮件基本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:23:22.957

尝试这个;

```
ini_set( SMTP, "ssl://smtp.gmail.com" ); 
ini_set( smtp_port, 425 );
ini_set("username","<youremail>");  
ini_set("password","<yourpassword>"); 
```

# c# - 从 ListView 控件向 ListBox 控件添加项目

> ID：13067331
> 
> 赞同：0
> 
> 时间：2012-10-25T11:11:56.997
> 
> 标签：c#

在我的项目中，我试图将`SelectedItems`控件`ListView`（仅项目而不是子项目）添加到`ListBox`控件中。添加后，控件的选定项目`ListView`应被删除。我非常接近，但我认为我的代码做错了，导致`ListView`控件中的单个选定项目。

```
ListView --> lvEmpDetails
ListBox  --> lbxEmpName 
```

我尝试了以下代码：

```
for (int intCount = 0; intCount < lvEmpDetails.SelectedItems.Count; intCount++)
{
     lbxEmpName.Items.Add(lvEmpDetails.SelectedItems[intCount].Text);  
     lvEmpDetails.SelectedItems[intCount].Remove();                  
} 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:18:10.217

不要删除您正在迭代它们的同一循环中的项目。将它们添加到列表中，然后删除它们：

```
var itemsToRemove = new List<ListViewItem>();

for (int intCount = 0; intCount < lvEmpDetails.SelectedItems.Count; intCount++)
{
     lbxEmpName.Items.Add(lvEmpDetails.SelectedItems[intCount].Text);  
     itemsToRemove.Add(lvEmpDetails.SelectedItems[intCount]);
}

foreach (var item in itemsToRemove)
{
    item.Remove();                  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:26:56.707

您可以采取另一种方式：

```
for (int intCount = 0; intCount < lvEmpDetails.SelectedItems.Count; intCount++)
{
     lbxEmpName.Items.Add(lvEmpDetails.SelectedItems[intCount].Text);  
     lvEmpDetails.SelectedItems[intCount].Remove();    
     //Every time remove item, reduce the index           
     intCount--;   
} 
```

# android - 是否可以在清单文件中提及要过滤的设备的 Android 版本？

> ID：13067336
> 
> 赞同：3
> 
> 时间：2012-10-25T11:12:29.930
> 
> 标签：android, android-manifest

我了解到我可以通过使用清单文件中的某些条件过滤掉我的 android 应用程序可用的设备。

但是是否可以指定设备中使用的 Android 版本作为过滤器？

**设想 ：**

我实际上想根据设备中使用的 Android 版本来限制设备。例如，在 Galaxy S3 中，android 版本是 4.0.4 ......

因此，如果我进行配置，只有 Android 版本 4.0.4 的设备才能在 Google 商店中下载我的应用程序。

如果是这样，请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:22:05.020

You use this element in the manifest fo accomplish that, have a look at the Android developer's site:

[`<uses-sdk>`](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

> Lets you express an application's compatibility with one or more versions of the Android platform, by means of an API Level integer. The API Level expressed by an application will be compared to the API Level of a given Android system, which may vary among different Android devices.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:49:09.880

Your question is unclear to me.

This is how you can set which version of Android can install your app.

```
<uses-sdk android:minSdkVersion="integer" 
          android:targetSdkVersion="integer"
          android:maxSdkVersion="integer" /> 
```

Note: The version numbers are SDK version NOT the Android versions.

[Refer docs for more details. Here](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html) you can also see what SDK Level corresponds to which Android Platform version.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T14:01:31.777

是的，就像上面建议的答案一样，我们可以限制使用`uses-sdk`

下面的屏幕显示，哪个 API 级别代表哪个 Android 版本。这应该对某些人有用。

![在此处输入图像描述](../Images/22d8ece8980cc225c327b9993f98ab6c.png)

这可以在 android SDK Manager 中看到。

# jquery - jQuery浮动动画问题

> ID：13067337
> 
> 赞同：0
> 
> 时间：2012-10-25T11:12:31.750
> 
> 标签：jquery, animation

我正在尝试制作动画。演示：http: [//jsfiddle.net/pVTR7/9/](http://jsfiddle.net/pVTR7/9/)

```
$('a.hide').click(function(){
    $('.left').animate({'width':'0%'}, 1000);    
    $('.right').animate({'width':'100%'}, 1000);
});

$('a.reset').click(function(){
    $('.left').animate({'width':'50%'}, 1000);    
    $('.right').animate({'width':'50%'}, 1000);
}); 
```

描述： 2 个不同的区域，在 50% 宽度处具有不同的内容。单击“单击”时，左侧区域将隐藏，右侧区域将占据全宽。单击“重置”时，左侧区域将滑入，两个区域的宽度均为 50%。（见演示）

**问题**：当隐藏左侧区域时，右侧区域在动画期间跳下！！在重置时一切正常，两个区域之间没有任何空间（应该是这样）

根据浏览器的不同，处理方式也有所不同。Safari -> 右侧区域跳下。Firefox -> 区域之间的空间

我可以使用绝对位置，但是我需要始终检查内容的高度并将这个高度添加到容器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:33:15.513

这是交易：

[http://jsfiddle.net/pVTR7/19/](http://jsfiddle.net/pVTR7/19/)

我需要将宽度更改为 0，而不是 0%

```
$('a.hide').click(function(){
    $('.left').animate({'width':'0'}, 1000);    
    $('.right').animate({'width':'100%'}, 1000);
}); 
```

.right 必须设置为 float:left;

```
.right {
    width: 50%;
    height: 50%;
    float: left;
    background: #ccc;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:28:43.917

你可以用这个

```
$('a.hide').click(function(){
    var the_width = $(this).parent().width();
    $('.left').animate({'width':the_width-the_width}, 1000);    
    $('.right').animate({'width':the_width}, 1000);
});

$('a.reset').click(function(){
    var the_width = $(this).parent().width() / 2;
    $('.left').animate({'width':the_width }, 1000);    
    $('.right').animate({'width': the_width}, 1000);
});​ 
```

[http://jsfiddle.net/raghurocks/pVTR7/18/](http://jsfiddle.net/raghurocks/pVTR7/18/)

当您使用浮动时，您不应该给出直接值，最好使用变量给出希望这有助于 D：

# actionscript-3 - 在 AS3 中使用补间类将对象移动到多个地方？

> ID：13067339
> 
> 赞同：0
> 
> 时间：2012-10-25T11:12:40.417
> 
> 标签：actionscript-3, tween

嗨，我正在尝试制作一个对象，在本例中为“ship_mc”，移动到屏幕上的 3 个不同点，但我想使用补间类。我不确定为什么它不起作用，任何帮助将不胜感激。我的代码看起来像这样

```
 import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

var myTween01:Tween = new Tween(this, "x", Regular.easeIn, 1416, 973, 4, true);
var myTween02:Tween = new Tween(this, "y", Regular.easeIn, 206, 446, 4, true);
var myTween03;
var myTween04;
var myTween05;
var myTween06;

myTween01.addEventListener(TweenEvent.MOTION_FINISH, onFinish);
function onFinish(e:TweenEvent):void {
myTween03:Tween = new Tween(this, "x", None.easeIn, 973, 695, 4, true);
myTween04:Tween = new Tween(this, "y", None.easeIn, 446, 222, 4, true);

}

myTween04.addEventListener(TweenEvent.MOTION_FINISH, onFinish1);
function onFinish1(e:TweenEvent):void {
myTween05:Tween = new Tween(this, "x", None.easeIn, 695, 374, 4, true);
myTween06:Tween = new Tween(this, "y", None.easeIn, 222, 239, 4, true);
} 
```

这是我得到的错误

```
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 15 1067: Implicit coercion of a value of type fl.transitions:Tween to an unrelated type Class.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 15 1188: Illegal assignment to class Tween.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 16 1067: Implicit coercion of a value of type fl.transitions:Tween to an unrelated type Class.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 16 1188: Illegal assignment to class Tween.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 22 1067: Implicit coercion of a value of type fl.transitions:Tween to an unrelated type Class.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 22 1188: Illegal assignment to class Tween.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 23 1067: Implicit coercion of a value of type fl.transitions:Tween to an unrelated type Class.
Symbol 'ship_mc', Layer 'Actions', Frame 1, Line 23 1188: Illegal assignment to class Tween. 
```

谢谢，我知道人们会建议使用 tweenlite，但我想知道这里有什么问题，否则我不会学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:19:40.123

您收到的错误消息会告诉您出现问题的行：15、16、22 和 23：

```
15: myTween03:Tween = new Tween(this, "x", None.easeIn, 973, 695, 4, true);
16: myTween04:Tween = new Tween(this, "y", None.easeIn, 446, 222, 4, true);

22: myTween05:Tween = new Tween(this, "x", None.easeIn, 695, 374, 4, true);
23: myTween06:Tween = new Tween(this, "y", None.easeIn, 222, 239, 4, true); 
```

您的前两个补间代码工作正常，那么前两个补间和其余补间之间的唯一区别是什么？你声明它们的方式。您需要将 、 和 声明`myTween03`为`myTween04`补间以防止引发错误，因为它认为您正在尝试将默认类初始化为补间`myTween05`。`myTween06`改变：

```
var myTween03;
var myTween04;
var myTween05;
var myTween06; 
```

至

```
var myTween03:Tween;
var myTween04:Tween;
var myTween05:Tween;
var myTween06:Tween; 
```

并以与第一个和第二个补间相同的方式初始化它们：

```
myTween03 = new Tween(this, "x", None.easeIn, 973, 695, 4, true);
myTween04 = new Tween(this, "y", None.easeIn, 446, 222, 4, true); 
```

这基本上表明变量将在稍后的代码中初始化为补间，并将防止抛出这些错误。

# drive - 查找任何驱动器序列号、型号、类型

> ID：13067347
> 
> 赞同：0
> 
> 时间：2012-10-25T11:13:03.123
> 
> 标签：drive, serial-number

我无法以编程方式找到连接到我的系统的驱动器的序列号、型号和类型。

那么，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:18:50.663

转到运行... 键入 cmd 以调出命令提示符。

进入

```
wmic bios get serialnumber
wmic csproduct get name 
```

希望这可以帮助。

# translation - 如何更新 transifex 源文件？

> ID：13067352
> 
> 赞同：0
> 
> 时间：2012-10-25T11:13:25.280
> 
> 标签：translation

我的主机上有 Transifex 开放翻译平台，其中有 1 个资源，当我推送更新的源文件 (POT) 时，transifex 中使用的语言消失了。有人有这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:17:42.750

你定义了任何团队吗？

如果没有，并且新的源文件不与现有的源文件共享任何字符串，则所有现有的翻译都将被删除，Transifex 不会显示它们的任何统计信息。

# javascript - 如果前面的脚本失败，JavaScript 片段执行或不执行

> ID：13067354
> 
> 赞同：24
> 
> 时间：2012-10-25T11:13:27.003
> 
> 标签：javascript, jquery, error-handling, jquery-events

我刚刚了解了一个关于在抛出错误时执行 Javascript 的重要事实。在我开始对此做出结论之前，我最好验证一下我是否正确。

给定一个包含 2 个脚本的 HTML 页面：

```
<script src="script1.js" />
<script src="script2.js" /> 
```

脚本1：

```
doSomething(); 
```

脚本2：

```
doSomeOtherThing(); 
```

这有效地导致单个脚本作为一个单元处理：

```
doSomething();
doSomeOtherThing(); 
```

特别是，如果`doSomething`抛出错误，则执行会中断。'script2' 永远不会被执行。

这是我的**“第 1 课”** ——有人可能会认为，因为它是一个单独包含的文件，它不受 script1 的影响。~~但它是。~~ **=> 请参阅下面的“延迟更新”**

* * *

现在，如果我们改变 script2 如下（假设我们在上面的某个地方包含了 jQuery）：

```
$(document).ready({ doSomeOtherThing(); }); 
```

并将脚本放在 script2 之前：

```
<script src="script2.js" />
<script src="script1.js" /> 
```

执行顺序实际上仍然是“doSomething()”，然后（有时）是“doSomeOtherThing()”。

然而，它以两个“单元”执行：

*   `doSomething`作为文档的 java 脚本的一部分提前执行
*   `doSomeOtherThing`在处理 document.ready 事件时执行。

如果`doSomeOtherThing`抛出异常，它**不会**破坏第二个处理“单元”。

（我避免使用该术语`thread`，因为我认为所有脚本通常由同一个线程执行，或者更准确地说，这可能取决于浏览器。）

所以，我的**第 2 课**：即使 JavaScript 错误可能会阻止任何后续脚本执行，它也不会停止事件循环。

* * *

**结论 1**

`$(document).ready()`在定义应该独立于任何其他脚本成功执行的 JavaScript 代码块方面做得很好。

或者，换句话说：如果你有一段 JavaScript 并且想要确保即使其他脚本失败也能执行它，将它放在一个`$(document).ready()`.

这对我来说是新的，因为如果脚本依赖于完全加载的文档，我只会使用该事件。

* * *

**结论 2**

更进一步，将*所有*脚本包装在 a中可能是一个很好的架构决策，`$(document).ready()`以确保所有脚本都“排队”执行。在上面的第二个示例中，if`script2.js`包含*在* `script1.js`示例 1 之后：

```
<script src="script1.js" />
<script src="script2.js" /> 
```

script1.js 中的错误`doSomeOtherThing()`甚至会阻止注册，因为该`$(document).ready()`函数不会被执行。

但是，如果 script1.js 也使用`$(document).ready()`了 ，则不会发生这种情况：

```
$(document).ready(function() { doSomething(); });
$(document).ready(function() { doSomeOtherThing(); }); 
```

这两行都将被执行。然后稍后将执行事件循环，该循环会`doSomething`中断，但`doSomeOtherThing`不会受到影响。

这样做的另一个原因是渲染页面的线程可以尽快返回，并且可以使用事件循环来触发代码执行。

* * *

**批评/问题：**

*   我弄错了吗？
*   有什么原因需要立即执行一段代码*，*即不将其包装到事件中？
*   它会显着影响性能吗？
*   是否有另一种/更好的方法来实现相同而不是使用文档就绪事件？
*   如果所有脚本都只是将其代码注册为事件处理程序，是否可以定义脚本的执行顺序？事件处理程序是否按照它们注册的顺序执行？

期待任何有用的评论！

**延迟更新：**

就像 Briguy37 正确指出的那样，我的观察首先肯定是错误的。（“我是不是弄错了——是的！”）。以他的简单示例为例，我可以在所有主流浏览器甚至 IE8 中重现，即使 script1 抛出错误，也会执行 script2。

仍然@Marcello 的出色答案有助于深入了解执行堆栈等的概念。似乎这两个脚本中的每一个都在单独的执行堆栈中执行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T16:02:34.560

JS 处理错误的方式取决于 JS 处理脚本的方式。它与线程无关（或很少）。因此，您必须首先考虑 JS 如何通过您的代码工作。

首先，JS 将依次读取每个脚本文件/块（此时您的代码仅被视为文本）。

比 JS 开始解释文本块并将它们编译成可执行代码。如果发现语法错误，JS 将停止编译并继续执行下一个脚本。在这个过程中，JS 将每个脚本块/文件作为单独的实体处理，这就是为什么脚本 1 中的语法错误不一定会中断脚本 2 的执行。代码将被解释和编译，但此时不会执行，所以一个`throw new Error`命令不会破坏执行。

编译完所有脚本文件/块后，JS 会遍历代码（从代码中的第一个代码文件/块开始）并构建所谓的执行堆栈（函数 a 调用函数 b 调用函数 d 和 c.... ) 并按给定的顺序执行它。如果在任何时候发生或以编程方式抛出处理错误（`throw new Error('fail')`），则该堆栈的整个执行将停止，并且 JS 将返回到该堆栈的开头并开始执行下一个可能的堆栈。

也就是说，你的onload函数在script1.js出错后仍然执行的原因，不是因为新线程什么的，只是因为一个事件建立了一个单独的执行堆栈，JS可以跳转到，之后上一个执行堆栈发生错误。

来回答你的问题：

> 有什么原因需要立即执行一段代码，即不将其包装到事件中？

我建议您在您的网络应用程序中根本没有“立即”调用的代码。最佳实践是在应用程序中有一个在 onload 事件内部调用的单一入口点

```
$(document).ready(function () {App.init()}); 
```

然而，这与错误处理等无关。错误处理本身绝对应该在您的代码中使用条件`if(typeof myValue !== 'undefined')`或 try/catch/finally 块来完成，您可能会想到潜在的错误。这也使您有机会在 catch 块内尝试第二种方式或在 finally 中优雅地处理错误。

如果您可以构建您的应用程序事件驱动（当然不是出于错误处理的原因），请这样做。JS 是一种事件驱动语言，在编写事件驱动代码时，您可以充分利用它...

> 它会显着影响性能吗？

恕我直言，事件驱动的方法将使您的应用程序性能更好，同时使其更加可靠。事件驱动代码可以帮助你减少内部处理逻辑的数量，你只需要进入它。

> 是否有另一种/更好的方法来实现相同而不是使用文档就绪事件？

如前所述：try/catch/finally

> 如果所有脚本都只是将其代码注册为事件处理程序，是否可以定义脚本的执行顺序？事件处理程序是否按照它们注册的顺序执行？

如果您在同一个对象上注册相同的事件，则会保留顺序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T13:16:55.167

您认为它们作为一个脚本运行的第一个假设是不正确的。即使 Script1 抛出错误，Script2 仍将执行。对于一个简单的测试，实现以下文件结构：

```
-anyFolder
--test.html
--test.js
--test2.js 
```

test.html的内容：

```
<html>
   <head>
       <script type="text/javascript" src="test.js"></script>
       <script type="text/javascript" src="test2.js"></script>
   </head>
</html> 
```

test.js 的内容：

```
console.log('test before');
throw('foo');
console.log('test after'); 
```

test2.js的内容：

```
console.log('test 2'); 
```

打开 test.html 时的输出（在控制台中）：

```
test before test.js:1
Uncaught foo test.js:2
test 2 
```

从这个测试中，您可以看到 test2.js 仍然运行，即使 test.js 抛出错误。但是，test.js 在遇到错误后会停止执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T12:31:53.200

我不确定语法错误，但您可以使用它`try {} catch(e) {}`来捕获错误并保持其余代码运行。

**不会跑到最后**

```
var json = '{"name:"John"'; // Notice the missing curly bracket }

// This probably will throw an error, if the string is buggy
var obj = JSON.parse(json);

alert('This will NOT run'); 
```

**会跑到最后**

```
var json = '{"name:"John"'; // Notice the missing curly bracket }

// But like this you can catch errors
try {
  var obj = JSON.parse(json);
} catch (e) {
  // Do or don'
}

alert('This will run'); 
```

**更新**

我只是想展示如何确保在发生错误时执行其余代码。

> 有什么原因需要立即执行一段代码，即不将其包装到事件中？

表现。每个这样的事件都会填满事件队列。不是说会很痛，只是没必要……如果现在可以做，为什么还要以后做呢？例如 - 浏览器检测和东西。

> 它会显着影响性能吗？

如果你每秒这样做很多次，那么是的。

> 是否有另一种/更好的方法来实现相同而不是使用文档就绪事件？

是的。见上面的例子。

> 如果所有脚本都只是将其代码注册为事件处理程序，是否可以定义脚本的执行顺序？事件处理程序是否按照它们注册的顺序执行？

是的，我很确定他们是。

# asp.net - telerik radgrid 无法显示所有记录

> ID：13067365
> 
> 赞同：0
> 
> 时间：2012-10-25T11:14:16.223
> 
> 标签：asp.net, ajax, telerik, radgrid

我需要在没有页面大小的情况下显示 Telerik radgrid 中的所有记录。

默认情况下，它只需要 10 条记录作为页面大小。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:55:25.987

如果在绑定之前以编程方式设置 PageSize 会怎样？

```
RadGrid1.PageSize = myCollection.Count;
RadGrid1.DataSource = myCollection;
RadGrid1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:27:46.443

您正在指定`PagerStyle`哪些可能启用分页......所以不要。另外，不要指定`AllowPaging="True"`.

```
 <telerik:RadGrid ID="ResultGrid" runat="server" ClientSettings-Scrolling-AllowScroll="true"
      GridLines="Vertical" AlternatingItemStyle-BackColor="#E3EEFE" BorderColor="#E3EEFE"
      HeaderStyle-BorderColor="#E3EEFE" HeaderStyle-BackColor="#C8DCF2" AllowSorting="true"
      AllowPaging="False" AllowFilteringByColumn="false">
          <ClientSettings>
               <Scrolling AllowScroll="false"/>
          </ClientSettings>
 </telerik:RadGrid> 
```

此外，一件好事是固定您的高度`RadGrid`以适合您的屏幕。然后使用这些设置：

```
 <ClientSettings>
       <Scrolling AllowScroll="True" UseStaticHeaders="True" SaveScrollPosition="True" />
  </ClientSettings> 
```

这种方式应该更加用户友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:43:37.740

听起来您只需要从 radgrid 中删除分页。您可以通过将 aspx 中 radgrid 上的“AllowPaging”属性设置为 false 来执行此操作。

```
<telerik:RadGrid ID="RadGrid1" runat="server" AllowPaging="false">
</telerik:RadGrid> 
```

# xml - 正则表达式：count连续出现xquery

> ID：13067368
> 
> 赞同：3
> 
> 时间：2012-10-25T11:14:32.683
> 
> 标签：xml, regex, xquery

我有一个这样的 xml 元素序列：

```
<addr>via roma</addr>
<addr>via milano</addr>
<addr>via napoli</addr>
... 
```

我想检查是否存在包含相同连续地址 3 次或更多次的地址序列，例如：

```
<addr> via napoli</addr>
<addr>via roma</addr>
<addr>via roma</addr>
<addr>via roma</addr>
<addr>via milano</addr>
.... 
```

这个 xml 元素的输入序列是 xquery 的结果。我想我应该使用该`fn:matches()`函数，但我无法编写与该序列匹配的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:21:38.587

**此查询（和 Xpath 3.0 表达式）`true()`恰好在序列`$seq`包含 $n 或更多具有相同字符串值的连续项时产生**：

```
 boolean($seq
              [some $i in 1 to count($seq) -($n -1)
                 satisfies
                    not(distinct-values(subsequence($seq, $i, $n))[2])
              ]
             ) 
```

**因此，在这种特定情况下**：

```
let $n := 3,
    $seq := /*/addr
 return
        boolean($seq
                  [some $i in 1 to count($seq) -($n -1)
                     satisfies
                        not(distinct-values(subsequence($seq, $i, $n))[2])
                  ]
                 ) 
```

**生产**

```
true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:34:08.997

不需要正则表达式。如果`$addrs`是一个`addr`元素序列，那么

```
for $a at $i in $addrs
  let $text := string($a)
  where string($addrs[($i + 1)]) eq $text and string($addrs[($i + 2)]) eq $text
  return ($i, $a) 
```

为您提供三个相等的连续地址的子序列开始的元素和索引`$addrs`，在这种情况下`(2, <addr>via roma</addr>)`。

请注意，当此类长度 >4 的子序列存在于`$addrs`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:35:50.713

使用正则表达式模式

```
<addr>([^<>]*)<\/addr>\s*<addr>\1<\/addr>\s*<addr>\1<\/addr> 
```

# winforms - 添加引用并从另一个项目调用一个winform项目

> ID：13067369
> 
> 赞同：0
> 
> 时间：2012-10-25T11:14:48.127
> 
> 标签：winforms, visual-studio-2010

我有 2 个项目：P1：Winform 项目和 P2：类库项目。我想从 P2 调用 P1 的方法，所以我这样做：

1.  右键点击P2
2.  选择添加参考
3.  选择项目 P1

然后在 P2 中，我添加

```
using P1; 
```

并在 P2 中声明 P1 的 MyP1Class 类

```
public P1.MyP1Class p1class; 
```

VisualStudio 响应消息：

> 错误 1 ​​程序集生成失败 -- 引用的程序集“P1”没有强名称

希望有人可以帮助我，任何帮助表示感谢，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:52:27.710

你可以在`Strong-Named Assemblies` [这里](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)阅读。

这是[如何：使用强名称签署程序集](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)。

# sql - 将excel工作表转换为sql脚本

> ID：13067370
> 
> 赞同：10
> 
> 时间：2012-10-25T11:14:53.210
> 
> 标签：sql, excel

我有一个 Excel 工作表 (.xls)。我需要将其转换为 sql 脚本。单个 Excel 工作表由多个表格组成。所以生成的脚本应该有多个创建表和插入语句。我尝试了各种工具，例如[http://www.sqlconverter.com/](http://excel2sql.esy.es/)，但我无法获得合适的解决方案。我还有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T13:38:12.897

我注意到您的评论说使用导入向导的解决方案比您想要的更复杂，因此您必须尝试加载数据。

你可以试试`BULK INSERT`：

首先，在每张纸上执行另存为并将它们转换为 CSV 文件。对于要导入的每张工作表，您应该有一个 CSV 文件。

接下来，制作一个与您将引入的数据类型和长度相似的表格。典型的 Excel 单元格是 VARCHAR(255)，（如果您想具体一点，可能更像 NVARCHAR(255)，但我们会此解决方案避免使用 unicode）。

因此，如果您的 excel 工作表有 5 列：

```
CREATE TABLE Sheet1
(Column1 VARCHAR(255)
, Column2 VARCHAR(255)
, Column3 VARCHAR(255)
, Column4 VARCHAR(255)
, Column5 VARCHAR(255)
) 
```

然后你可以写一个简单的批量插入到表中，前提是你有网络共享上的文件或本地到 SQL 实例所在的服务器/机器。例如，如果您的机器上有文件，并且想尝试将文件推送到网络上的服务器，SQL 会认为`C:\`下面脚本中的文件在服务器上，而不是在您的机器上。您必须共享一个文件夹并通过网络访问它：`\\MyMachineName\SharedFolder\Sheet1.csv`

```
BULK INSERT dbo.Sheet1
FROM 'C:\LocalFolder\WhereTheFileIs\Sheet1.csv'
WITH (
FIELDTERMINATOR = ','
, ROWTERMINATOR = '\n'
) 
```

如果文件和表中存在相同数量的列，这应该将数据放入该表中。

它不漂亮，但很简单。这`BULK INSERT`是一种经过验证的基本快速加载方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T21:54:33.290

还有一种从 Excell 中对插入进行分组的简单方法：只要您的数据位于单独列中的 B、C 和 D 列中，创建公式：="insert into values('" &B1 &"','" & C1 & "' ,'"&D1&"')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T06:44:15.380

这是由 vamsi krishna mysore 创建的 1.应该使用 apache apoi 它应该添加到我在这个项目中使用的文件和系统中 apache apoi

```
 package excelread;
    import java.io.File;
    import java.io.FileOutputStream;
    import java.util.LinkedList;
    import java.util.List;
    import java.util.Scanner;
    import jxl.Cell;
    import jxl.Sheet;
    import jxl.Workbook;
    import org.apache.poi.xwpf.usermodel.ParagraphAlignment;
    import org.apache.poi.xwpf.usermodel.UnderlinePatterns;
    import org.apache.poi.xwpf.usermodel.XWPFDocument;
    import org.apache.poi.xwpf.usermodel.XWPFParagraph;
    import org.apache.poi.xwpf.usermodel.XWPFRun;

    public class ExcelRead 
    {

        public static void main(String[] args) throws Exception
        {
           try
        {
            FileOutputStream output=new FileOutputStream("result.docx");
      FileOutputStream output=new FileOutputStream("result.sql");//sql script in the script
      FileOutputStream output=new FileOutputStream("result.xlxs");
    FileOutputStream output=new FileOutputStream("result.csv");
            XWPFDocument doc=new XWPFDocument();
            XWPFParagraph para=doc.createParagraph();
            para.setAlignment(ParagraphAlignment.CENTER);
            XWPFRun pararun=para.createRun();
            pararun.setBold(true);
            pararun.setFontSize(20);
            pararun.setText("Database Tables\n\n");
            File f= new File("C:\\Users\\admin\\Desktop\\BUILDING_TB.xls");//file location where it is stored in the system
            Workbook wb= Workbook.getWorkbook(f);
            int sheets=wb.getNumberOfSheets();
            for(int s1=0;s1<sheets;s1++)
            {
                   System.out.println("for sheet"+s1);
                   Sheet s= wb.getSheet(s1);
                   String tbname=s.getName();
                   XWPFParagraph para1=doc.createParagraph();
                   para1.setAlignment(ParagraphAlignment.LEFT);
                   pararun=para1.createRun();
                   pararun.setText(tbname);
                   pararun.setFontSize(16);
                   pararun.setUnderline(UnderlinePatterns.WORDS);
                   int rows=s.getRows();
                   int cols=s.getColumns();
                   int indexrows=0;
                   int cols1=0;
                   int indexcols=0;
                   int pk=1000,dt=1000,cn=1000,ci=1000,dd=1000,n=1000,com=1000;
                   int ava=0;
                   List <String> comments= new LinkedList <String>();
                   List <String> sequence= new LinkedList <String>();
                   List <String> cid= new LinkedList <String>();
                   String createQuery="create table " +tbname+"(";
                   System.out.println(rows+" "+cols);
                    for(int j=0;j<rows;j++)     //TO AVOID EMPTY ROW AND COLUMNS
                    {
                    sequence.clear();
                    for(int i=0;i<cols;i++)     //TO GET ONE ROW DETAILS
                    {
                    indexcols=0;
                    cols1=0;
                    Cell c=s.getCell(i,j);
                    sequence.add(c.getContents());
                    }
                    for(int i=0;i<cols;i++)
                    {
                        if(sequence.get(i)=="")
                        {
                            cols1= ++indexcols;
                        }
                        else
                        {
                            ava=1;
                            indexrows=j;
                            break;
                        }  
                    }
                    if(ava==1)
                       break;
                    }
            for(;indexcols<cols;indexcols++)        //TO ARRANG DATA IN REQUIRED ORDER
            {
                    if(sequence.get(indexcols).toLowerCase().contains("PK".toLowerCase()))
                    {
                        pk=indexcols;   
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("Column_id".toLowerCase()))
                    {
                        ci=indexcols;
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("Column_Name".toLowerCase()))
                    {
                        cn=indexcols;
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("nullable".toLowerCase()))
                    {
                        n=indexcols;
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("Data_TYpe".toLowerCase()))
                    {
                        dt=indexcols;
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("Default".toLowerCase()))
                    {
                        dd=indexcols;
                    }
                    else if(sequence.get(indexcols).toLowerCase().contains("comments".toLowerCase()))
                    {
                        com=indexcols;    
                    }
            }
            indexrows++;
            int rows1=indexrows;
            for(;indexrows<rows;indexrows++)        //PREPARING QUERY(For excel rows which contain data)
            {
                       indexcols=cols1;
                         for(;indexcols<cols;indexcols++)   //for all columns
                         {

                            Cell c=s.getCell(indexcols, indexrows);
                            String item=c.getContents();
                            //adding Column name to query
                              if(indexcols==cn)
                               {   if(!(item.equals("")) &&  indexrows!=rows1)   
                                   createQuery =createQuery+" ,"+item;
                                    else if(item.equals(""))
                                    break;
                                    else
                                    createQuery =createQuery+" "+item;
                                }
                              //adding data type to query
                                 if(indexcols==dt)
                                    {
                                        createQuery =createQuery+" "+item;
                                    }
                            //adding data default to query
                                   else if(indexcols==dd)
                                    {    
                                        if(item=="")
                                        continue;
                                        else
                                        createQuery =createQuery+" "+"default "+item;
                                    }
                                //addig primary key constaint to query
                                    else if(indexcols==pk)
                                      {
                                        if(item.equalsIgnoreCase("true"))
                                        createQuery =createQuery+" "+"primary key";
                                        else
                                        createQuery =createQuery+" "+"";
                                      }
                                //adding not null constraint to query
                                    else if(indexcols==n)
                                    {
                                        if(item.equalsIgnoreCase("no"))
                                        createQuery =createQuery+" "+"not null";
                                        else
                                        createQuery =createQuery+" "+"";
                                    }
                                    //adding comments
                                    else if(indexcols==com)
                                        {
                                            if(item!="")
                                            {
                                            comments.add(item);
                                            }
                                            else 
                                            {
                                            comments.add("comments empty");
                                            }
                                        }   
                                      else if(indexcols==ci)
                                        {
                                            if(item!=null)
                                            {
                                            cid.add(item);
                                            }

                                        }

                          }//column loop close
                 }//row looop close
                        createQuery=createQuery+")";
                        System.out.println(createQuery);
                        XWPFParagraph para2=doc.createParagraph();
                        para2.setAlignment(ParagraphAlignment.LEFT);
                        pararun=para2.createRun();
                        pararun.setFontSize(14);
                        pararun.setText(createQuery+";");
                        System.out.println("table created successfully");
                       }//sheets loop closse

            doc.write(output);  //writing data into ouptu file
            output.close();
         }//try block close
         catch(Exception e)
            {
                 System.out.println(e.toString());
        }

         }//main close
       }//class close 
```

# c# - 具有属性的 C# 字典在 C# 中给出错误？

> ID：13067371
> 
> 赞同：-4
> 
> 时间：2012-10-25T11:15:01.797
> 
> 标签：c#, properties, dictionary

我有一个包含结构作为键的字典，我必须为字典创建一个属性

**项目1**

```
namespace ClassLibrary2
{
  public class Class1
  {
    public Dictionary<string, Cs> mdic;
    public Class1()
    {
        mdic = new Dictionary<string, Cs>();
        mdic.Add("Welcome", new Cs() { m1 = "12",m2="32"});
    }

    public Dictionary<string, Cs> Dic
    {
        get {return mdic;}
        set { value = mdic; }
    }

    public struct Cs
    {
        public string m1{get;set;}
        public string m2{get;set;}
    }
} 
```

当我尝试设置此值时，`project 1`它显示错误...

像这样我设置

**项目2**

```
namespace WindowsFormsApplication20
{
  public partial class Form1 : Form
  {
     public Form1()
     {
        InitializeComponent();
     }

     private Dictionary<string, Cs> Dic
     {
        get;
        set;
     }

     struct Cs
     {
         public string m1 { get; set; }
         public string m2 { get; set; }
     }

     private void button1_Click(object sender, EventArgs e)
     {
        ClassLibrary2.Class1 css = new ClassLibrary2.Class1();
        Dic = css.Dic;
     }
 } 
```

我有问题 `css.Dic` `..... System Generic Collections`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:20:44.097

ClassLibrary2.Class1.Cs 结构和 WindowsFormsApplication20.Form1.Cs 结构是 2 种不同的类型，因此您不能将 a 分配给`Dictionary<string, ClassLibrary2.Class1.Cs>`type 的变量`Dictionary<string, WindowsFormsApplication20.Form1.Cs>`。尝试从 Form1 中删除 Cs 声明，如下所示：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private Dictionary<string, ClassLibrary2.Class1.Cs> Dic
    {
        get;
        set;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ClassLibrary2.Class1 css = new ClassLibrary2.Class1();
        Dic = css.Dic;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:22:40.483

Your dictionary definition in Form1 should be -

```
private Dictionary<string, ClassLibrary2.Class1.Cs> Dic
{
    get;
    set;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:24:19.700

您已经在您的 privious 问题评论中收到了答案。

你的`ClassLibrary2.Class1.CS`和`WindowsFormsApplication20.Form1.CS`是不同的结构。

在 WindowsFormsApplication20 中，您不应声明新的 CS 结构。只需使用 ClassLibrary2 命名空间。

```
using ClassLibrary2;

namespace WindowsFormsApplication20
{
  public partial class Form1 : Form
  {
     public Form1()
     {
        InitializeComponent();
     }

     private Dictionary<string, Class1.Cs> Dic
     {
        get;
        set;
     }

     private void button1_Click(object sender, EventArgs e)
     {
        ClassLibrary2.Class1 css = new ClassLibrary2.Class1();
        Dic = css.Dic;
     }
 } 
```

# java - 将休眠中的会话转换为 plein JDBC 连接

> ID：13067372
> 
> 赞同：1
> 
> 时间：2012-10-25T11:15:04.090
> 
> 标签：java, hibernate, session, jdbc

我正在从休眠转换回纯 JDBC，以克服使用休眠产生的开销。我想知道如何处理与休眠相关的会话。我应该如何转换回纯 JDBC，以便我的所有会话都替换为JDBC 连接。如果我认为用连接替换会话会转换回普通 JDBC 的想法有误，请告诉我，因为我不精通这些概念，也不知道我是否走对了路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:30:30.510

我在高性能任务中广泛使用了 Hibernate，包括批量插入数百万条记录。您的问题不在于 Hibernate，而在于您使用它的方式。

最重要的是，不要将 Hibernate 用作持久状态管理器；将它用作原始 SQL 之上的薄层，您不会抱怨性能。

1.  总是喜欢`StatelessSession`（它适用于你需要的一切，除了`save`操作）`;
2.  永远不要使用延迟获取，对所有内容都使用显式连接；
3.  永远不要获取整个对象，使用 SELECT 来获取你需要的东西；
4.  在单个语句中尽可能多地获取，不惜一切代价避免 n+1 选择；
5.  对于大型结果集，切勿使用`list`、使用`iterate`或`scroll`。

清单还在继续，但这是我此刻想出的。

至于您的直接问题，这取决于应用程序。如果它是一个 Spring 应用程序，那么你肯定会想要使用它的声明式事务管理。基本上，您只需放置几行 XML 配置，您的 DAO 代码中就会有一个开放的 DataSource 可供使用，而无需您进行任何管理。

如果你正在做一些更原始的事情，那么一定要使用连接池库，比如伟大的 BoneCP。您从它获取连接，然后将它们返回给它，同样没有显式管理。

最后，如果您真的想要一个简单、不安全且不可扩展的方法，那么您可以直接从 JDBC 驱动程序创建连接。这种方法实际上只适用于学校作业，即使在最小的具有生产价值的项目中也不推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:30:59.197

Hibernate 会话不仅仅是一个 JDBC 连接。它包含多个这样的连接（通常通过回收 JDBC 连接实例的 JDBC 连接池管理）、一组附加到所述会话并由所述会话和其他事物（缓存等）管理的实体。

删除 Hibernate 并仅使用 JDBC API 做所有事情将意味着不仅仅是用一个或多个 JDBC 连接替换 Hibernate Session 实例，然后将 Hibernate 代码复制到类似的 JDBC API 调用中。如果您只这样做，您将白白做很多工作，因为您将失去 Hibernate 的所有优势（更少冗长的代码、更高级别的抽象等），并且无法获得 JDBC 的优势（更少使用的堆内存，更少的方法调用（是的，即使使用 Hibernate 的 Javassist 魔法，在某些情况下这仍然会影响性能），对数据库交互的更细粒度的控制等）。

我的建议是首先真正研究您的应用程序存在的问题（显然是由于 Hibernate），至少对于主要问题，首先尝试看看您是否无法在不摆脱 Hibernate 的情况下对其进行优化。是的，Hibernate 可能会变得很重并且需要大量内存，但通常情况下，性能问题来自于对框架的不当使用（您确定要在一个查询中获取所有必要的关联实体，还是让 Hibernate后台隐藏连接或伪连接？您是在数据库端进行数据操作，还是在执行超出必要的通用 Hibernate 查询以获取数据后在 Java 代码中完成一些操作？等等。 )

如果您真的需要摆脱 Hibernate（也许您需要使用数据库的一些非常特定的功能，这些功能不是标准 SQL 并且 Hibernate 不允许您访问，例如 MySQL 通过自定义平面导入大量数据的能力-file 格式）然后确保您用它替换它（普通的 JDBC，或者可能是其他一些 ORM，如 EclipseLink）可以解决问题并以更高效的方式解决它。在开始重新拖拉代码之前做一个小的 POC 来测试这些可以为您节省大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:57:21.500

虽然我强烈建议您听从 Marko 和 Shivan 的建议，但您可以使用 hibernate 来管理您的连接/会话/事务并执行您的 SQL 查询，而不会产生太多开销。

一个快速的谷歌搜索在从休眠会话中执行 SQL 时产生了这一点。

[http://www.informit.com/guides/content.aspx?g=java&seqNum=575](http://www.informit.com/guides/content.aspx?g=java&seqNum=575)

虽然我同意前面的两个答案，但如果您真的想走直接执行 SQL 的道路，我会出于两个原因考虑这个选项。

1）您的会话已经到位。如果您没有休眠加载所有实体，我看不出休眠将如何产生那么多开销。

2）如果问题是速度，而不是我之前遇到的开销，您可以实现它以在您的问题区域快速执行本机 SQL 并保留所有休眠 ORM 好东西。

说了这么多，我还敦促您深入研究 hibernate 的文档。我已经将 hibernate 用于几个高性能的解决方案，并取得了巨大的成功。虽然一开始可能很难处理细微差别，但使用 hibernate（或至少遵循 JPA 标准的东西）的好处远远超过在可扩展性方面不这样做的成本。

# sql - TADOQuery 不返回任何记录

> ID：13067374
> 
> 赞同：2
> 
> 时间：2012-10-25T11:15:06.570
> 
> 标签：sql, oracle, delphi, delphi-7, ado

我正在使用 Delphi 7，并且我有一个名为的表`Table_1`，其中有两个字段，例如 , `IMageCode Varchar(50)`，`ActImage [Blob in Oracle, VarBinary(Max) in SQL Server]`它插入了四个记录，包括图像和相应的图像代码。

当我在 Oracle 中编写如下 SQL 时：

```
Select * from Table_1 where Upper(ImageCode) ='SUNSET' 
```

TADOQuery 不返回任何记录，当我检查`TADOQuery.RecordCount`它显示`0`时，当我尝试查看`TADOQuery.IsEmpty`它时说`True`。然后，当我在 Oracle 编辑器中执行相同的查询时，它按预期返回一条记录，但在 delphi 中，TADOQuery 不返回任何记录。

但是当我为 oracle 数据库编写以下简单的 sql 时，它使用 TADOQuery 返回所有四条记录：

```
Select * from Table_1 
```

正如上面使用 TADOQuery 所讨论的，我在 SQL Server 数据库中没有发现任何问题。

```
ADOConnection.Connected := False; 
ADOConnection.LoginPrompt := False; 
ADOConnection.ConnectionString := <Connection String>; 
ADOConnection.Connected := True; 
ADOQuery1.Connection := ADOConnection; 
with ADOQuery1 do begin 
  Active := False; 
  SQL.Clear; 
  //SqL.Add('Select * from Table_1 where Upper(ImageCode) = ' +    QuotedStr(Uppercase(Trim(edtImageCode.Text)))); 
  SqL.Add('Select * from Table_1 where Upper(ImageCode) = ''SUNSET'''); 
  Active := True; 
end; 
```

有人能把重点放在可能是什么问题上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:08:23.537

问题已解决，我尝试将“ImageCode”作为主键，现在 TADOQuery 正在返回 peroper 记录计数，即 1 如预期的那样。以前没有主键，但是，如果有主键，TADOQuery 应该返回所需的数据集。

有什么猜测吗？

# php - Magento 1.6.2 事件观察器不起作用

> ID：13067376
> 
> 赞同：1
> 
> 时间：2012-10-25T11:15:20.420
> 
> 标签：php, magento

我正在尝试在我的模块（app/code/community/Test/Shipping）中实现观察者。

我的文件是：**app/code/community/Test/Shipping/etc/config.xml**仅全局部分

```
<global>
    <models>
        <test_shipping>
            <class>Test_Shipping_Model</class>
        </test_shipping>
    </models>
    <events>
        <checkout_type_onepage_save_order_after>
            <observers>
                <Test_Shipping_Observer>
                    <type>singleton</type>
                    <class>test_shipping/observer</class>
                    <method>checkout_type_onepage_save_order_after</method>
                </Test_Shipping_Observer>
            </observers>
        </checkout_type_onepage_save_order_after>
    </events>
</global> 
```

**app/code/community/Test/Shipping/Model/Observer.php**我替换了 curl 中的一些值，但它经过测试并使用正确的值。

```
<?php 
```

类 Test_Shipping_Model_Observer {

```
public function checkout_type_onepage_save_order_after(Varien_Event_Observer $observer) {
    $requests = array(
        "username" => "test",
        "password" => "test",
        "environment" => "development",
        "action" => "ship",
        "service_id" => "1"
    );
    $url = "";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($requests));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $response = curl_exec($ch);
    curl_close($ch);
} 
```

}

**app/etc/modules/Test_Shipping.xml**带有开始和结束配置标签，无法在我的代码示例中获取它们。

```
<modules>
    <Test_Shipping>
        <active>true</active>
        <codePool>community</codePool>
    </Test_Shipping>
</modules> 
```

但是观察者不起作用，有人可以帮助我吗？有没有办法检查方法是否被调用所以我会知道观察者工作但我的 curl 没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:33:17.637

你能告诉我们`<config>/<modules>`你的 config.xml 的一部分吗？

无论如何，除了您的观察者的函数名称对 magento 不友好之外，它应该可以工作（您应该调用 like `executeCurlAfterOrderSave()`）

确保它被称为：

*   在后台激活日志功能（菜单系统/配置/开发人员/日志设置

*   `Mage::log('event just dispatched');`在后面添加一个

    Mage::dispatchEvent('checkout_type_onepage_save_order_after', array('order'=>$order, 'quote'=>$this->getQuote()));

在`Mage_Checkout_Model_Type_Onepage`（或者`Mage_Checkout_Model_Cart_Api`您正在使用 API）中调用的注释：恢复此更改仅用于调试目的，因为您不得修改核心文件。

*   `Mage::log('even should be captured here');`在 Observer 方法的开头添加一个

*   测试您的代码并查看 var/log 文件夹以查看是否发生了什么（已记录的内容）

祝你好运

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T11:33:31.310

您的 config.xml 错误，

```
<global>
<models>
    <test_shipping>
        <class>Test_Shipping_Model</class>
    </test_shipping>
</models>   
</global>

 <events>
    <checkout_type_onepage_save_order_after>
        <observers>
            <Test_Shipping_Observer>
                <type>singleton</type>
                <class>test_shipping/observer</class>
                <method>checkout_type_onepage_save_order_after</method>
            </Test_Shipping_Observer>
        </observers>
    </checkout_type_onepage_save_order_after>
</events> 
```

# iphone - 带有 iOS 的 Oracle 表单

> ID：13067378
> 
> 赞同：-1
> 
> 时间：2012-10-25T11:15:28.407
> 
> 标签：iphone, ios, ipad, oracle, oracleforms

我搜索了很多适用于 iOS 设备的 oracle 表单，但我没有找到办法。有没有在 iPhone 或 iPad 中使用 oracle 表单？我在网站上某处读到 oracle 表单需要 JRE，因为 iOS 设备没有 JRE，所以这是不可能的。但是使用 oracle 表单的应用程序很少，所以必须有一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:34:00.833

有一家名为[OraPlayer](http://oraplayer.com/)的公司承诺从任何移动设备运行表单。

# ruby-on-rails - 设计：用户每次关闭浏览器时都必须重新登录

> ID：13067382
> 
> 赞同：1
> 
> 时间：2012-10-25T11:15:36.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我正在使用 Devise 和 Omniauth 进行用户身份验证。

我希望用户在身份验证后保持登录状态 2 周。但是，每当用户关闭浏览器窗口并重新打开它时，他都会再次进入登录屏幕。

即使在浏览器关闭并重新打开后，用户保持连接的正确配置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T10:16:49.527

在 Devise 的 wiki 上查看此页面：

[https://github.com/plataformatec/devise/wiki/Omniauthable,-sign-out-action-and-rememberable](https://github.com/plataformatec/devise/wiki/Omniauthable,-sign-out-action-and-rememberable)

基本上，Devise 在使用omniauth 时默认不会调用rememberable。如果您希望这样做，只需简单地调用`remember_me(@user)`您的omniauth 回调，Devise 就会为您完成工作。它还将使用您的设计初始化程序中设置的所有配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:31:58.843

您必须扩展设计 SessionsController 以在登录和注销时添加 cookie，因此控制器将如下所示：

```
class SessionsController < Devise::SessionsController
  # POST /resource/sign_in
  def create
    cookies[:sign_in] = "Sign in info you want to store"
    # add this for expiration { :expires => 2.weeks.from_now }
    super
  end

  # GET /resource/sign_out
  def destroy
    cookies[:sign_out] = "Sign out info you want to store"
    super
  end
end 
```

然后您必须将以下内容添加到您的 routes.rb 中：

```
devise_for :users, :controllers => { :sessions => "sessions" } 
```

您也可以将 cookie 过期时间设置为 2 周。

# iphone - 使用 Storyboard 将 Facebook SDK 添加到我的 xCode 项目中

> ID：13067383
> 
> 赞同：0
> 
> 时间：2012-10-25T11:15:42.660
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我正在关注[iOS v3.1 的 Facebook SDK 入门，](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)以将 Facebook SDK 添加到我的 xCode 项目中`Storyboard`。

我做了那里描述的所有步骤。

我们在 Facebook SDK 的 Sample 文件夹中有一个 HelloFacebookSample。它包括以下代码：

```
- (void)viewDidLoad {    
    [super viewDidLoad];

    // Create Login View so that the app will be granted "status_update" permission.
    FBLoginView *loginview = [[FBLoginView alloc] init];

    loginview.frame = CGRectOffset(loginview.frame, 5, 5);
    loginview.delegate = self;

    [self.view addSubview:loginview];

    [loginview sizeToFit];
}

// Post Status Update button handler; will attempt to invoke the native
// share dialog and, if that's unavailable, will post directly
- (IBAction)postStatusUpdateClick:(UIButton *)sender {
    // Post a status update to the user's feed via the Graph API, and display an alert view
    // with the results or an error.
    NSString *name = self.loggedInUser.first_name;
    NSString *message = [NSString stringWithFormat:@"Updating status for %@ at %@",
                         name != nil ? name : @"me" , [NSDate date]];

    // if it is available to us, we will post using the native dialog
    BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self
                                                                    initialText:nil
                                                                          image:nil
                                                                            url:nil
                                                                        handler:nil];
    if (!displayedNativeDialog) {

        [self performPublishAction:^{
            // otherwise fall back on a request for permissions and a direct post
            [FBRequestConnection startForPostStatusUpdate:message
                                        completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                            [self showAlert:message result:result error:error];
                                            self.buttonPostStatus.enabled = YES;
                                        }];

            self.buttonPostStatus.enabled = NO;
        }];
    }
} 
```

然后示例工作正常，但是当我想在自己的项目中使用它时，我遇到了这个问题：

它已成功将 FBLoginView 添加到我的 self.view 中。但是当我`Login`想发布一些东西时，我就去这个页面：

![在此处输入图像描述](../Images/85b557401c33562b29faa17b292ed886.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:19:03.747

最后我发现了问题。我需要将这些代码添加到我的 AppDelegate 中：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    // attempt to extract a token from the url
    return [FBSession.activeSession handleOpenURL:url];
}

- (void)applicationWillTerminate:(UIApplication *)application {
    // FBSample logic
    // if the app is going away, we close the session object
    [FBSession.activeSession close];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
    // FBSample logic
    // We need to properly handle activation of the application with regards to SSO
    //  (e.g., returning from iOS 6.0 authorization dialog or from fast app switching).
    [FBSession.activeSession handleDidBecomeActive];
} 
```

链接中没有描述它们。让新用户知道这些细节可能会更好。

# blackberry - 没有画布的黑莓列表字段

> ID：13067388
> 
> 赞同：0
> 
> 时间：2012-10-25T11:16:16.013
> 
> 标签：blackberry, canvas, listfield, browserfield

是否可以在 BB 中创建一个自定义列表字段，其中每行将有 4 个不同的标签和一个位图字段，而无需实现 drawListRow 方法？

由于 drawListRow 使用画布，我想避免它。因为，我需要在列表行中显示一个浏览器字段。或者是否可以在列表行中添加标签字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:11:45.817

您可能无法以您想要的方式实现这一点 - 尝试一次在屏幕上放置多个 BrowserField，您很快就会遇到多个问题。我建议创建一个自定义字段来代替一行，或者尝试使用字段管理器获得所需的外观和感觉。

# drupal - 如何在 drupal 7 中动态更改登录/注销菜单链接？

> ID：13067395
> 
> 赞同：1
> 
> 时间：2012-10-25T11:16:43.260
> 
> 标签：drupal, drupal-7, drupal-modules

我在 drupal 7 中创建了一个带有登录链接的菜单。即使用户登录，它也保持不变。如何将其更改为已通过身份验证的用户注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:52:35.133

我不得不使用 2 个菜单来克服这个问题。一个用于经过身份验证的用户的菜单，另一个用于匿名用户。然后我使用[menu_block](http://drupal.org/project/menu_block) contrib 模块根据用户登录状态在同一个地方打印出两个菜单。

希望这对您有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:47:48.167

它保持不变的原因可能是因为您提供了登录的绝对网址。为了在同一菜单中创建**登录**和**注销链接，请按照以下步骤操作。**

1.  对于登录菜单链接标题：“登录”路径：“用户/登录”

2.  对于注销菜单链接标题：“注销”路径：“用户/注销”

现在它应该像预期的那样工作。登录链接将显示给匿名用户，注销链接将显示给经过身份验证的用户。

为了以编程方式创建此类菜单项，

```
$item = array(
  'link_path' => 'user/login',
  'link_title' => t('Sign In'),
);
menu_link_save($item);
$item = array(
  'link_path' => 'user/logout',
  'link_title' => t('Logout'),
);
menu_link_save($item); 
```

还有更多可用的选项可以传递给 menu_link_save，请查看[此链接](http://api.drupal.org/api/drupal/includes!menu.inc/function/menu_link_save/7)以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T16:01:08.587

默认情况下，核心菜单带有用户菜单。它包含当前登录用户的 /user，但不显示匿名访问。为此，您可以：

1.  进入用户菜单：admin/structure/menu/manage/user-menu。
2.  添加一个带有路径的新链接：user/login。
3.  添加您需要的标题。
4.  节省

查看[用户模块上的 hook_menu 实现以](https://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_menu/7)获取更多详细信息，但本质上它只对匿名用户显示。

希望这可以帮助

# c# - 仅在 datagridview 中更改特定列标题颜色很热？

> ID：13067398
> 
> 赞同：6
> 
> 时间：2012-10-25T11:16:48.657
> 
> 标签：c#, winforms, datagridview, visual-studio-2005, c#-2.0

用途：VS 2005、C#、DataGridView、WinForms；

我需要为特定列的标题部分的字体/背景着色。我看到它只能对整个列列表的标题而不是单个列进行。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T11:54:24.427

首先在 DataGridView 中，您需要将 EnableHeadersVisualStyles 设置为 false。完成后，您可以在每列上设置单独的标题样式。

```
 DataGridViewColumn dataGridViewColumn = dataGridView1.Columns[0];
        dataGridViewColumn.HeaderCell.Style.BackColor = Color.Magenta;
        dataGridViewColumn.HeaderCell.Style.ForeColor = Color.Yellow; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-01T01:55:56.677

这样做

```
DataGridViewTextBoxColumn col = new DataGridViewTextBoxColumn();
{
     col.Name = "ColumnName";
     col.HeaderText = "HeaderName";
     col.DefaultCellStyle.ForeColor = Color.White;
     col.HeaderCell.Style.BackColor = Color.Red; //Column Header Color
     this.dataGridView1.Columns.Add(col);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-27T10:18:01.910

创建一个名为 SetUpDataGridView 的方法名称

```
private void SetUpDataGridView()
{
  dataGridView1.Columns[0].HeaderText = "Emp.Id";         
  dataGridView1.Columns[0].HeaderCell.Style.BackColor = Color.Chartreuse;
  dataGridView1.Columns[1].HeaderText = "Emp. Name";
  dataGridView1.Columns[1].HeaderCell.Style.BackColor = Color.Fuchsia;
} 
```

在 Form_Load 中添加方法。您可以为每个标题添加不同的颜色

# actionscript-3 - 动态文本字段有问题？AS3

> ID：13067400
> 
> 赞同：0
> 
> 时间：2012-10-25T11:17:05.427
> 
> 标签：actionscript-3

我有一个更新我的动态字段的函数，但什么也没发生……关于什么可能出错的任何想法？

```
function updateBar(){
    progressBar.scaleX = percentToLevel;
    levelText.text = level.toString();
    expText.text = String(currentExp);
    nextLvlText.text = String(baseLevelExp);
} 
```

progressBar 行有效。其余的都没有。没有错误。我检查了文本字段的实例名称，它们都是正确的......它可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:28:39.283

问题是我没有嵌入字体。当我做的时候一切都很好。

# file - CMake 检查本地文件是否存在

> ID：13067401
> 
> 赞同：78
> 
> 时间：2012-10-25T11:17:05.830
> 
> 标签：file, cmake, file-exists

在我的 CMake 脚本中，我想查看我的系统上是否有文件，如果有的话，用它做一些事情，否则用一个默认文件做一些事情。这是代码：

```
find_file(
          ${project_name}_${customer}_config 
          ${ROOT}/configuration/${customer}/configuration.${project_name}.xml
)

if(NOT ${${project_name}_${customer}_config} STREQUAL
   ${project_name}_${customer}_config-NOTFOUND )
        configure_file(${ROOT}/configuration/${customer}/configuration.${project_name}.xml
                       ${CMAKE_CURRENT_BINARY_DIR}/conf/configuration.xml)
else()
    configure_file(${FAPP_ROOT}/configuration/Default/configuration.${project_name}.xml
                   ${CMAKE_CURRENT_BINARY_DIR}/conf/configuration.xml)
endif() 
```

但似乎，这行不通。

检查CMake中是否存在文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-10-26T14:59:52.773

如果您已经知道文件的完整路径名，则检查文件是否存在的正确方法很简单：

```
if(EXISTS "${ROOT}/configuration/${customer}/configuration.${project_name}.xml")
   ...
else()
   ...
endif() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T12:29:42.263

你应该可以使用

```
if(NOT ${project_name}_${customer}_config) 
```

从[文档](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3aif)：

> `if(<constant>)`
> 
> 如果常数为 1、ON、YES、TRUE、Y 或非零数字，则为真。如果常量为 0、OFF、NO、FALSE、N、IGNORE、“”或以后缀“-NOTFOUND”结尾，则为 False。

但是，如果使用 找到该文件*，*该[`find_file`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3afind_file)值将被缓存，随后的 CMake 运行将不会尝试再次找到它。要在每次运行时强制重新检查，请在`find_file`调用之前执行以下操作：

```
unset(${project_name}_${customer}_config CACHE) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-16T03:49:10.220

我相信这`if (EXISTS <path>)`是一个很好的解决方案。我想分享一个我最近遇到的场景，尽管在大多数情况下你可能不会关心这个场景。

请注意，如果有效用户无法访问该文件，此解决方案将不会返回 true。该文件确实存在，但它只是不可读。

如果您确实关心文件是否真的存在，则这种情况的解决方法是调用`execute_process(COMMAND ls /dev/fb0 RESULT_VARIABLE result OUTPUT_QUIET ERROR_QUIET)`然后检查`result`如下：

```
if (result)
    message("/dev/fb0 doesn't exist.")
endif() 
```

**编辑**：添加`ERROR_QUIET`，`execute_process`否则当文件不存在时，您将从 ls 收到错误消息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-30T09:45:07.770

从条件语法[文档](https://cmake.org/cmake/help/v3.16/command/if.html)：

> `if(EXISTS path-to-file-or-directory)`
> 
> 如果指定的文件或目录存在，则为真。**行为仅对完整路径进行了明确定义**。解析符号链接，即如果指定的文件或目录是符号链接，如果符号链接的目标存在，则返回 true。

如果您要查找的文件位于当前的 cmakelist 文件中，则一种解决方案可能是：

`if(EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${FILE_WORKING_ON})` ...

# javascript - 将地理编码器结果保存到数组 - 关闭问题

> ID：13067403
> 
> 赞同：1
> 
> 时间：2012-10-25T11:17:11.853
> 
> 标签：javascript, google-maps-api-3, closures

好的，所以我已经搜索了一段时间来解决这个问题，但我没有找到任何具体的解决方案。在您向我指出 Google 的服务条款之前，请阅读到问题的结尾！

所以这里的想法是：我想使用谷歌的地理编码器将地址的纬度和经度保存到一个数组中。我设法正确计算了所有值，但似乎无法将其保存到数组中。我已经使用匿名函数将地址传递给函数，但保存仍然不起作用。请帮忙！

关于 Google 的服务条款：我知道我可能不会将此代码保存在任何地方，也不会在 Google 地图中显示它。但我需要将其保存为 kml 文件，以便稍后输入谷歌地图。我知道，只创建地图会更方便，但由于其他原因，这是不可能的。

adressdaten[] 是一个包含地址数据的二维数组 这是代码：

```
for (i=1; i<adressdaten.length-1; i++)  {
//Save array-data in String to pass to the Geocoder
var adresse = adressdaten[i][3] + " " + adressdaten[i][4];
var coordinates;
var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': adresse}, (function (coordinates, adresse) {
        return function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
               var latLong = results[0].geometry.location;
               coordinates = latLong.lat() + "," + latLong.lng();

        } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        }
    })(coordinates, adresse));
    adressdaten[i][6] = coordinates;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:12:14.233

这是一个常见问题解答。地理编码是异步的。您需要将结果保存在从服务器返回时运行的回调函数中。

类似的东西（未测试）

更新为使用函数闭包

```
function geocodeAddress(address, i) {
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
       var latLong = results[0].geometry.location;
       coordinates = latLong.lat() + "," + latLong.lng();
       adressdaten[i][6] = coordinates;
    } else {
       alert('Geocode of '+address+' was not successful for the following reason: ' + status);
    }
  });
}

var geocoder = new google.maps.Geocoder();
for (i=1; i<adressdaten.length-1; i++)  {
  //Save array-data in String to pass to the Geocoder
  var adresse = adressdaten[i][3] + " " + adressdaten[i][4];
  var coordinates;
  geocodeAddress(addresse, i); 
```

}

# opencv - 使用硬件加速将原始单声道 8 位字节数组转换为 jpeg

> ID：13067407
> 
> 赞同：3
> 
> 时间：2012-10-25T11:17:28.173
> 
> 标签：opencv, compression, hardware, jpeg

首先我要说的是我对编程非常陌生。而且，我遇到了一个非常愚蠢的问题：我需要以至少 200FPS（实时）的速率将原始单声道 8 位字节数组灰度图像压缩为 Jpeg（以节省空间）。图像大小为 1280x1024px，所以我需要每秒处理大约 2.6Gigapixels！我尝试使用 imagemagick，但它无法以如此高的速率处理数据。我只是想知道是否有一种有效的方法来处理这个问题。我可以使用 GPU 或 CPU，无论哪种效果最好。我不知道如何完成这项工作。任何帮助表示赞赏！

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:32:49.657

您绝对应该尝试一下[libjpeg-turbo](http://libjpeg-turbo.virtualgl.org/)。它具有 CPU 加速处理（MMX、SSE2 或 NEON），可提供令人印象深刻的[性能](http://www.libjpeg-turbo.org/About/Performance)。

# qt - 与 Qwt 相比，QCustomPlot 的优点/缺点是什么？

> ID：13067411
> 
> 赞同：17
> 
> 时间：2012-10-25T11:17:45.067
> 
> 标签：qt, plot, qwt, qcustomplot

我现在使用 Qwt 两年了。我喜欢它的面向对象的类，这使得调整绘图和功能变得非常容易。这些天来，QCustomPlot 变得越来越流行并与 Qwt 竞争。当然，我确实比较了 API。不过，我对这两个图书馆有经验的用户的证词很感兴趣。什么是方便？什么不是？有什么陷阱吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T20:17:14.247

我不会称自己为“有经验的”，因为我只使用了几个月的 Qwt 和几周的 QCustomPlot。话虽如此，我的印象是：

*   QCustomPlot 目前似乎开发得更加积极。最后一次发布是在 2012 年 8 月（而 Qwt 的最后一次发布可以追溯到 2011 年）。主观上，它的界面似乎更符合 Qt 框架。
*   另一方面，Qwt 似乎更成熟、更有特色。例如，当前版本的 QCustomPlot 没有直接的方法来设置轴矩形的颜色背景（仅支持将背景设置为用户提供的像素图）。另一个例子 - Qwt 具有特殊的类和方法，可以方便地绘制和放大具有大量点的曲线。我在 QCustomPlot 中没有找到类似的东西。

编辑：QCustomPlot 的作者[意识到](http://www.workslikeclockwork.com/index.php/components/qt-plotting-widget/comment-page-8/#comment-3326)缺少设置绘图背景的功能，并承诺在即将发布的版本中添加它。

QCustomPlot 和 Qwt 之间还有另一个重要区别 - 许可。- Qwt 是 LGPL，因此您可以将其链接到非 GPL 项目。QCustomPlot 是 GPL v.3，很多人（包括我自己）觉得它太严格了。如果您需要 LGPL 许可证，QCustomPlot 作者邀请与他联系。

EDIT2（2013 年 3 月 25 日）：Qwt 分支 5.* 和 6.* 的新版本于 11 月出现，这取消了 QCustomplot “更积极开发”的优势

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-10T12:47:58.917

我无法比较这两个库，因为我只使用 QCustomPlot（现在一年），但我相信我的评论可能对其他人有用。

**QCustomPlot 的优点**：

*   在 Gitorious 上公开发布，
*   愿意提供帮助的生活用户群（包括作者本人），
*   对 LGPL 许可的开放性（以我为例，以换取捐赠），
*   非常干净简洁的界面，
*   很容易找到错误（如果存在）（我的错误修复很少超过一行）
*   易于扩展；
*   非常容易破解您想从笛卡尔绘图库中粉碎的任何内容，
*   良好的文档，
*   以 1 .h 和一个 .cpp 文件的压缩形式提供 - 便于快速集成或专门构建的一个小部件，
*   非常好的性能（在我所有的用例中），
*   很明显，作者喜欢漂亮的代码，并且可以产生一个，
*   深思熟虑的路线图（很长一段时间）。

**QCustomPlot 的缺点**：

*   非常严格的笛卡尔坐标（阅读：没有饼图），
*   在我的情况下，花了一些时间来掌握所有重要的事情（如果有人喜欢实施与基础相当质量的扩展），
*   也许发展有点慢（就像许多其他*忙碌*的人项目一样），
*   仅在主线程中可用（即当您需要在多线程网络服务器中生成图片时，您需要在主线程中运行此库，无论这对您的实现意味着什么）。

如果需要 LGPL-ish 许可证，可能没有免费选项（取决于作者的考虑）。鉴于图书馆的质量和可用性，我公司为换取 LGPL 许可协议而提供的捐赠并没有不当。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-11T04:03:27.490

当绘制很多点时。并且用户将点集中到整个情节。即（x，y轴被像素完全覆盖）

（点数 = 下面给出的计算）

拖动情节时：

*   Qwt 提供了比**QCustomPlot**更好的性能。
*   QCustomPlot 拖动/重新绘制比 Qwt 滞后*得多*，这对 UI 不利。
*   Qwt 滞后是可以忽略的并且是可以接受的。
*   Qwt 需要较少的处理。

我注意到的是：在拖动时，Qwt 只拖动绘图区域，然后将其拖放到该区域上。而 QCustomPlot 尝试在删除之前重新绘制。（请注意，但这可以帮助 QCustomPlot 人做得更好。）

* * *

此外，Qwt 提供了可以在外部管理的原始缓冲区选项。我能够将（QcustomPlot）150Mb 减少到小于（Qwt）40Mb。保持，

QCustomPlot 强制用户将内存分配给 X 轴 (errorbar+ , errorbar-), y 轴 (errorbar+, errorbar-) (2 * 2 * sizeof(double)) 内存浪费了 3 * 2 * sizeof(double) 即 32byte out 48 字节是浪费的（对于 1 个样本），因为一个样本（对于 x 和 y）只有 Qwt 需要 16 字节。

afai 明白了，在Qwt中也可以实现errorbar

*   相同的点数（96KiloSamples/sec * 10 秒缓冲 = 96 * 1000 * 10 = ~1M）
*   在 QCustomPlot 中禁用抗锯齿并在 Qwt中**启用**
*   相同的重新绘图算法。（以相同的时间间隔从设备获取数据，然后重新绘制）

即使启用了抗锯齿，Qwt 的性能也要好得多。

* * *

笔记：

*   Qwt 成熟、高效。
*   QCustomPLot 提供更好的外观和感觉。（略好于 Qwt。）

将背景更改为白色、启用抗锯齿和网格后，Qwt 可以变得更好看

测试：

*   为 Qt5 编译的 Qwt 6.1.0
*   为 Qt5 编译的 QCustomPLot 1.2.1
*   Qt5.2.1
*   Linux localhost.localdomain 3.13.11-100.fc19.x86_64 #1 SMP Wed Apr 23 20:10:57 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
*   i3-3120M CPU @ 2.50GHz x 4

此外，QCustomPlot 在 Qt4 上的表现相同。

这些是我的发现，可能因条件而异。

我已经切换回Qwt。希望这有助于其他人选择。:)

* * *

次要的：

*   Con QCustomPLot 需要单独下载 qmake 文件。（对于初学者来说令人沮丧）
*   Con Qwt 有多个文件要编译。
*   Pro QCUstomPlot 只有两个文件：source 和 header
*   两个频道都没有 IRC 频道（至少在 Freenode 上没有）
*   Con QCustomPlot 将多个示例推送到一个可执行文件中。
*   Pro Qwt 有许多分布在许多可执行文件上的示例
*   Con QCustomPlot 没有任何 QtCreator 插件
*   Con QCustomPlot 在 repo 中不可用（至少在 Fedora 19 上不可用）
*   Pro Qwt 还有很多其他的好东西
*   Con Qwt 很笨重：p
*   Pro Qwt 支持 CMake
*   Pro Qwt 更加灵活（afaif）

如果我在某些方面错了，请纠正我。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-05T04:15:02.857

**优点：**

*   易于上手 IMO（API 直观且有据可查）
*   平移和缩放时具有良好的绘图质量和快速响应。
*   单个 .h/.cpp 文件（即无需引用 QT 以外的编译库）

**缺点：**

*   GPL（不是 LGPL）
*   内部使用的数据结构为每个数据点存储 6`double`秒，即使您只需要`X`和`Y`
*   在内部，它使用 a`QMap`来存储数据点并保持它们的排序。平移和缩放非常有效，但当样本数量很大（例如 1,000,000 个数据点）时填充速度很慢

# javascript - 从片段标识符中删除 #

> ID：13067422
> 
> 赞同：0
> 
> 时间：2012-10-25T11:18:21.433
> 
> 标签：javascript, jquery

删除片段标识符后，我尝试从 url 中删除“#”。

例如：

```
var myUrl = location.href; // example.com/#abc
alert(location.hash);      // #abc
location.hash = ''; 
alert(myUrl);              // example.com/# 
```

现在我尝试删除# WITHOUT a page reload。我尝试使用替换功能，但是当我尝试删除“#”时，页面将重新加载。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:22:30.153

You should use HTML5 History API for this: [http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html) You won't be using hashes anymore, but you can still load pages without reloading.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:27:12.667

看看这个问题：

*   [如何在不刷新页面的情况下使用 JavaScript 从 window.location 中删除哈希？](https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh)
*   [从 url 中删除哈希](https://stackoverflow.com/questions/4508574/remove-hash-from-url)

# sublimetext2 - 崇高的phpstorm配色方案

> ID：13067425
> 
> 赞同：8
> 
> 时间：2012-10-25T11:18:45.950
> 
> 标签：sublimetext2, phpstorm, color-scheme

我已经使用 phpstorm 很长时间了，现在我也在 sublime 中工作，因为它有利于快速编辑和最好的速度感。

我想要崇高的 phpstorm 的默认配色方案。是不是已经建好了？或者我该如何开始创建这样的配色方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T02:55:13.967

对于那些使用 Darcula 的人，您可以通过包控制安装它。 [https://packagecontrol.io/packages/Darkula%20Color%20Scheme](https://packagecontrol.io/packages/Darkula%20Color%20Scheme)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-25T22:00:09.247

你在这里试过吗？

偏好 >

或命令 + n (alt+n)

![崇高的色彩主题](../Images/589e8caf9d2c37169f7bac069d6efc97.png)

# php - PHP过滤一个特定的词

> ID：13067427
> 
> 赞同：1
> 
> 时间：2012-10-25T11:18:50.680
> 
> 标签：php, web, filter

我的 mysql 数据库输出如下所示： ***icon-search icon-white*** (来自引导框架)

现在我想要，它只显示没有***图标白色***字符串的图标***搜索。***

 *我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:21:36.887

If `$var` contains **icon-search icon white**, try it this way:

```
$var = str_replace(' icon-white', '', $var); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:46:37.763

如果您不再需要文本 icon-white，只需更新数据库中的值：

```
UPDATE you_table SET you_column = REPLACE(you_column, ' icon-white', '') WHERE you_conditional; 
```

这将提高您的应用程序的性能，但如果您仍然需要文本，则使用 E​​dd 的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:21:04.873

```
echo str_replace("icon-white", "", $your_output); 
```

或者为了更加迂腐地了解删除此类图标的白色字符串也会起作用

```
echo preg_replace("/(class=[\'\"].*?)(\s*icon\-white\s*)(.*?[\'\"])/i", "\\1\\3", $your_output); 
```*

# javascript - 通过单击一次淡入 6 个 div 的倍数

> ID：13067428
> 
> 赞同：0
> 
> 时间：2012-10-25T11:18:51.463
> 
> 标签：javascript, jquery, loops, fadein

我在下面有这段代码，它基本上获取了一些元素并将它们停止在 6 个项目上。然后我有一个按钮，单击该按钮会在剩余的 div 中加载。

我只希望它一次加载 6 个 div。有谁知道前进的道路吗？

这是javascript：

```
function click_load() {
    var count = 0;
    var item = $('.newsmainimages');
    //var itemClick = $('<a href="#">Load More</a>');

    $(item).each(function() {
        if (++count == 6) {
            $(this).parent().append('<div class="nextClick"><a href="#">Load More</a></div>');
        }
        else if (count > 6) {
            $(this).css('display','none');
        }
    });

    $('.nextClick a').click(function() {
        $(item).each(function(item) {
            $(this).delay(200*item).fadeIn("slow");
        });
        alert(item);
        return false;
    });
} 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:42:24.633

您可以将 slice 用于此类事情

[演示](http://jsfiddle.net/Dcnj9/8/)

```
 $(function(){

       var count = 6;
       showListItems(0 , count);

       $('button').click(function() {
           showListItems(0, ($('ul li:visible').length) + count);

       });

       function showListItems(firstNumber, lastNumber) 
       {
          $('ul li').slice(firstNumber, lastNumber).fadeIn("slow"); 
       }       

    });​ 
```

# windows - OpenSSL的交叉编译

> ID：13067430
> 
> 赞同：-2
> 
> 时间：2012-10-25T11:18:53.367
> 
> 标签：windows, linux, macos, openssl, cross-platform

> **可能重复：**
> [如何在 Windows 中使用 MinGW 构建 OpenSSL？](https://stackoverflow.com/questions/9379363/how-to-build-openssl-with-mingw-in-windows)

我已经从他们的网站下载了 OpenSSL 源代码（openssl-1.0.1c）。我需要构建/编译这个源，这样我就可以在 Windows、MAC 和 Linux 环境中使用它。我用谷歌搜索并阅读了一些博客，但对我来说没有任何用处。如果有人工作过或有相关知识，请帮助我！

**编译一次，在所有三个不同的环境中使用相同的。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:16:45.587

这是不可能的，也不是交叉编译的意思。交叉编译意味着（例如）在 Linux 环境中运行时为 Windows 编译。这并不意味着编译可以在 Linux 和 Windows 下运行的东西。

没有办法构建可以在所有三个操作系统上使用的单个可执行文件。

您必须为 Windows 编译一次库，为 Linux 编译一次，为 Mac 编译一次。

# c++ - C ++中的快速函数对象？

> ID：13067432
> 
> 赞同：3
> 
> 时间：2012-10-25T11:18:56.737
> 
> 标签：c++, performance, function, object, functional-programming

我正在编写一个科学计算程序，我最感兴趣的（在正确性之后）是速度。最近我注意到我也需要可读的代码。:)

而不是写

```
for (int k=0;k!=10;k+=1)
   array[k] = fun(a, k); 
```

我在考虑写

```
class fun_t {
private:
   type a;
public:
   fun_t(type in) : a(in) {};

   type operator() (int k) {
      ...computation...
   }
};
...
fun_t fun(a);
for (int k=0;k!=10;k+=1)
   array[k] = fun(k); 
```

函数对象样式会和第一个例子一样快吗？我可以期望两者都有相同的内联吗？有没有更好的方法？（请注意，我只是在这里提出这个想法，这不是我的实际代码。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:39:34.170

我想繁重的计算是在你的函数内部执行的。相比之下，直接函数调用和成员函数调用之间的差异应该是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:56:57.037

您可以从合理的编译器中获得相同的内联。调用的目的地`operator()`在编译时是已知的，就像调用`fun(a,k)`.

我看到的区别在于对`a`. 在函数的情况下`fun`，您将*某些*内容作为参数传递 - 如果没有声明，`fun`则无法查看这是否是 的副本`a`、对 的引用`a`或由 构造的其他类型`a`。

在仿函数的情况下`fun_t`，您复制`a`一次以构造仿函数。您（名义上）将 a 传递给，然后`fun_t*`作为访问。一旦所有内容都被内联并且优化器完成后，额外的间接可能会被忽略，但同样可能不会。您必须检查特定情况，可能通过检查编译器发出的指令。`this``operator()``a``this->a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:41:25.323

您可以通过更改循环结构进行一些小的优化，但这些优化的主要目的不是为了提高速度。

如果你想提高速度，你需要分析。如果`fun(a,k)`特别是一个缓慢的操作并且每次运行不依赖于其他运行，您应该考虑拆分成线程并在自己的线程上运行每个线程。

有新的 API 将并行而不是串行地对集合进行操作。激动人心的时刻即将到来。

# jboss-tools - 无法实例化 Seam 组件：注册

> ID：13067433
> 
> 赞同：4
> 
> 时间：2012-10-25T11:19:03.180
> 
> 标签：jboss-tools, jboss-seam

我正在尝试通过 JBoss 工具在 JBoss Seam 2.3中运行注册示例[http://docs.jboss.org/seam/2.3.0.Beta1/html/tutorial.html 。](http://docs.jboss.org/seam/2.3.0.Beta1/html/tutorial.html)

我使用 JBoss Tools 而不是命令行创建了项目。然后我按照教程制作了 User.java、Register.java、RegisterAction.java 和相关的 xml 页面。连接mysql数据库成功。

应用程序被部署并运行。我去 register.seam 页面并填写表格。单击“注册”按钮时，它不会转到已注册的.xml，而是会打开调试页面并主要显示这些错误。

```
Exception during request processing:
Caused by javax.servlet.ServletException with message: "Could not instantiate Seam component: register"
Caused by javax.naming.NameNotFoundException with message: "RegisterAction/local -- service jboss.naming.context.java.RegisterAction.local" 
```

部署日志： http: [//pastebin.com/mb87qUAi](http://pastebin.com/mb87qUAi)

点击注册后登录

```
16:27:06,033 ERROR [org.jboss.seam.exception.Exceptions] (http-localhost-127.0.0.1-8080-1) handled and logged exception: javax.servlet.ServletException: viewId:/register.seam - View /register.seam could not be restored.
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.CR1]
    at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) [jboss-seam.jar:2.3.0.CR1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_37]
Caused by: javax.faces.application.ViewExpiredException: viewId:/register.seam - View /register.seam could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    ... 31 more 
```

注册.java

```
package org.domain.magica.session;

import javax.ejb.Local;

@Local
public interface Register {
    public String register();
} 
```

这是什么意思以及如何解决问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-07T10:45:19.157

问题的根本原因`javax.faces.application.ViewExpiredException: viewId:/register.seam - View /register.seam could not be restored.`是例如在 Java EE 服务器重新启动后访问网站引起的。

# java - 从另一个 java 类调用方法会创建重复的 JPanel？

> ID：13067435
> 
> 赞同：3
> 
> 时间：2012-10-25T11:19:14.273
> 
> 标签：java, swing, debugging, jpanel, cubrid

当我尝试从中调用方法时`JPanel2`，按下按钮后`JPanel4`它不会显示任何更改`JFrame`，但是当我尝试将按钮放入时`JPanel2`，一切正常。所以我的问题是，正如我在标题中所说 - 我创建了一个副本`JPanel`吗？我对java相当陌生，所以任何帮助表示赞赏。

**主要的**

```
package tellimine;

import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;

public class Tellimine extends JFrame{

public Tellimine(){
      super("Tellimine");
}

public void looFrame() throws Exception{

   this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   this.setPreferredSize(new Dimension(800, 310));
   this.setLayout(new GridBagLayout());
   GridBagConstraints c = new GridBagConstraints();

    JPanel2 panel2 = new JPanel2();
    c.fill = GridBagConstraints.HORIZONTAL;
    c.insets = new Insets(0,0,0,0);
    c.weightx = 1.0;
    c.gridx = 0;
    c.gridy = 1;
    this.add(panel2, c);

    JPanel4 panel4 = new JPanel4();
    c.fill = GridBagConstraints.HORIZONTAL;
    c.ipady = 0;
    c.weighty = 1.0;
    c.anchor = GridBagConstraints.PAGE_END;
    c.gridx = 0;
    c.gridwidth = 2;
    c.gridy = 3;
    this.add(panel4, c);

    this.setVisible(true);
    this.pack();

}

public static void main(String[] args) throws Exception{

    Class.forName("cubrid.jdbc.driver.CUBRIDDriver");

   final Tellimine raam = new Tellimine();
    EventQueue.invokeLater(new Runnable() {
        @Override
    public void run() {
            try {
                raam.looFrame();
            } catch (Exception ex) {
                Logger.getLogger(Tellimine.class.getName()).log(Level.SEVERE, null, ex);
            }
            }
         });
   }
} 
```

**JPanel2**

```
package tellimine;

import java.awt.GridLayout;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.swing.JFormattedTextField;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class JPanel2 extends JPanel{

private Connection conn;
Integer suurus;
JLabel tellimus, tk_nr;
JFormattedTextField tellija, kuupaev;
Statement stmt = null;
ResultSet rs = null;

public JPanel2() throws SQLException{
    super();
 panel2();
}

    public static Connection connect() {

    Connection conn = null;

    try{    
        conn = DriverManager.getConnection("jdbc:cubrid:localhost:33000:Access::","dba","qwerty");
    }
    catch ( Exception e ) {

       System.err.println("SQLException : " + e.getMessage());
    }
    return conn;
}

public void panel2() throws SQLException{

    conn=connect();
    stmt = conn.createStatement();
    rs = stmt.executeQuery("SELECT * FROM yldandmed");
    rs.next();
    tellimus = new JLabel();
    tk_nr = new JLabel();
    tellija = new JFormattedTextField();
    kuupaev = new JFormattedTextField();

    yldandmed();

    this.setLayout(new GridLayout(3,5));
    this.add(new JLabel("Tellimuse ID"));
    this.add(tellimus);
    this.add(new JLabel("Tellija:"));
    this.add(tellija);
    this.add(new JLabel(""));
    this.add(new JLabel("Sissekandekuupäev"));
    this.add(kuupaev);
    this.add(new JLabel("Töökäsu nr:"));
    this.add(tk_nr);
    this.add(new JLabel(""));
    this.add(new JLabel("Tellimise Detailid"));
    this.add(new JLabel(""));
    this.add(new JLabel(""));
    this.add(new JLabel(""));

}

public void yldandmed() throws SQLException{

    tellimus.setText(rs.getString("tel_id"));
    System.out.println(rs.getString("tellija"));
    tellija.setText(rs.getString("tellija"));
    kuupaev.setText(rs.getString("kuupaev"));
    tk_nr.setText(rs.getString("tk_nr"));
  }
} 
```

**JPanel4**

```
package tellimine;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JPanel;

public class JPanel4 extends JPanel{

JPanel2 paneel = new JPanel2();

    public JPanel4() throws Exception{
    super();
 panel4();
}

    private void panel4() throws SQLException{

        JButton uuenda = new JButton("<");
        this.add(uuenda);
        uuendanupp uuendus = new uuendanupp();
        uuenda.addActionListener(uuendus);

        JButton lisa = new JButton(">");
        this.add(lisa);
        lisanupp lisamine = new lisanupp();
        lisa.addActionListener(lisamine);       
    }

    private class uuendanupp implements ActionListener{

        public void actionPerformed(ActionEvent e){

            System.out.println("<");

        }

}
    private class lisanupp implements ActionListener{

        public void actionPerformed(ActionEvent e){
            try {   
                paneel.rs.next();
                paneel.yldandmed();
                System.out.println(">");    
            } catch (SQLException ex) {
                Logger.getLogger(JPanel4.class.getName()).log(Level.SEVERE, null, ex);
            }

        }        
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:34:57.527

```
public class JPanel4 extends JPanel{

JPanel2 paneel = new JPanel2(); 
```

在这里，您正在创建 JPanel2 的新实例。您应该通过构造函数或通过 settor 方法将 main 方法中创建的 JPanel2 实例传递给 JPanel4。

# java - 使用 PDFBox 保护 PDF

> ID：13067437
> 
> 赞同：7
> 
> 时间：2012-10-25T11:19:17.170
> 
> 标签：java, pdf, pdfbox

我真的在为 PDFBox 的文档苦苦挣扎。对于这样一个受欢迎的图书馆，信息似乎有点薄（对我来说！）。

无论如何，我遇到的问题与保护 PDF 有关。目前我想要的只是控制用户的访问权限。具体来说，我想阻止用户修改 PDF。

如果我省略访问权限代码，一切都会完美运行。我正在阅读来自外部资源的 PDF。然后我正在阅读和填充字段，在保存新 PDF 之前添加一些图像。这一切都完美无缺。

当我添加以下代码来管理访问时，问题就来了：

```
/* Secure the PDF so that it cannot be edited */
try {
    String ownerPassword = "DSTE$gewRges43";
    String userPassword = "";

    AccessPermission ap = new AccessPermission();
    ap.setCanModify(false);

    StandardProtectionPolicy spp = new StandardProtectionPolicy(ownerPassword, userPassword, ap);
    pdf.protect(spp);
} catch (BadSecurityHandlerException ex) {
    Logger.getLogger(PDFManager.class.getName()).log(Level.SEVERE, null, ex);
} 
```

当我添加此代码时，所有文本和图像都从传出的 pdf 中删除。这些字段仍然存在于文档中，但它们都是空的，并且原始 PDF 的一部分以及在代码中动态添加的所有文本和图像都消失了。

更新：好的，尽我所能告诉问题来自与表单字段相关的错误。我将尝试一种没有表单字段的不同方法，看看它给出了什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-13T03:25:24.313

我找到了解决这个问题的方法。看起来如果 PDF 来自外部来源，有时 PDF 会受到保护或加密。

如果在从外部源加载 PDF 文档并添加保护时得到空白输出，则您可能正在使用加密文档。我有一个处理 PDF 文档的流处理系统。所以下面的代码对我有用。如果您只是使用 PDF 输入，那么您可以将以下代码与您的流程集成。

```
public InputStream convertDocument(InputStream dataStream) throws Exception {
    // just acts as a pass through since already in pdf format
    PipedOutputStream os = new PipedOutputStream();
    PipedInputStream is = new PipedInputStream(os);

    System.setProperty("org.apache.pdfbox.baseParser.pushBackSize", "2024768"); //for large files

    PDDocument doc = PDDocument.load(dataStream, true);

    if (doc.isEncrypted()) { //remove the security before adding protections
        doc.decrypt("");
        doc.setAllSecurityToBeRemoved(true);
    }
    doc.save(os);
    doc.close();
    dataStream.close();
    os.close();
    return is;
} 
```

现在获取返回的 InputStream 并将其用于您的安全应用程序；

```
 PipedOutputStream os = new PipedOutputStream();
   PipedInputStream is = new PipedInputStream(os);

   System.setProperty("org.apache.pdfbox.baseParser.pushBackSize", "2024768");
   InputStream dataStream = secureData.data();

   PDDocument doc = PDDocument.load(dataStream, true);
   AccessPermission ap = new AccessPermission();
   //add what ever perms you need blah blah...
   ap.setCanModify(false);
   ap.setCanExtractContent(false);
   ap.setCanPrint(false);
   ap.setCanPrintDegraded(false);
   ap.setReadOnly();

   StandardProtectionPolicy spp = new StandardProtectionPolicy(UUID.randomUUID().toString(), "", ap);

   doc.protect(spp);

   doc.save(os);
   doc.close();
   dataStream.close();
   os.close(); 
```

现在这应该返回一个没有空白输出的正确文档！

诀窍是首先删除加密！

# python - svn - python 2.5 - ImportError：DLL加载失败

> ID：13067438
> 
> 赞同：3
> 
> 时间：2012-10-25T11:19:17.580
> 
> 标签：python, visualsvn-server, python-2.5

当svn中有提交时，我有一个用于自动邮件的python脚本，但是当我运行该脚本时，它给出了以下错误：

```
Traceback (most recent call last):
  File "E:\AutoSms-Svn-Repo\test-repo-is\hooks\mailer.py", line 41, in <module>
    import svn.fs
    File "C:\Python25\Lib\site-packages\svn\fs.py", line 19, in <module>
    from libsvn.fs import *
  File "C:\Python25\Lib\site-packages\libsvn\fs.py", line 5, in <module>
    import _fs
ImportError: DLL load failed: The specified module could not be found. 
```

我什至为依赖的 dll 和 python 路径添加了必需的路径变量，但我仍然收到这条消息，即使是从命令提示符

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:43:12.637

`Windows 7`我在for下安装颠覆时遇到了同样的问题`Python 2.7`。

解决方案很简单，并且已经过测试。（但很难找到和分析）

1.  [从Subversion](http://alagazam.net)下载并安装二进制文件
2.  确保二进制文件夹（默认：）`c:\Program Files (x86)\subversion\bin`在您的`PATH`系统中
3.  `Python`从第 1 点中提到的站点下载文件（ [Subversion](http://alagazam.net)）
4.  解压`libsvn`并`svn`放入`Python`'s`site-packages`文件夹
5.  打开`cmd`（Win​​dow 的命令行控制台）并输入：`python`. 然后尝试导入`svn`模块。

它应该看起来像（没有发生错误）：

```
C:\>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from svn import core
>>> 
```

# mysql - 如何在数据库设计中对属性单元进行建模？

> ID：13067440
> 
> 赞同：4
> 
> 时间：2012-10-25T11:19:19.273
> 
> 标签：mysql, database, database-design, normalization, database-normalization

我需要设计一个大多数属性都有单位的数据库表。例如：

```
Readings
--------

id   load (kW)   fuel_consumption (tonnes) - etc
1    1154        89.4
2    1199        54.2 
```

在设计中捕捉单位的推荐方法是什么？例如，我可以：

*   **在属性名称中存储单位，**例如 load_kW 和fuel_consumption_tonnes
*   **将单位存储在单独的表中，**例如，每个值都成为另一个表的外键，其中包含值和单位列。
*   **存储在数据库之外：**例如在业务逻辑中，或在文档中
*   **还有其他人吗？**

我碰巧在使用 MySQL，但我认为这是一个通用的数据库规范化问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:12:10.467

这最终取决于您打算或需要对您的数量做什么。

如果（在不太可能的情况下）您将要做的只是记录值以供以后反流，那么您对单位做什么并不重要，因为标量值对您的模型没有语义意义。

更有可能是系统中的标量对您的系统具有一定的重要性。例如，这可能是因为您正在对它们执行计算。在这种情况下，您的单位非常重要。

您需要自己回答的下一个问题是，单位是否始终保持一致且不得更改。在大多数情况下，我会说这是一个冒险的结论。这可能是您通过系统强加的业务规则，但业务规则有一个令人讨厌的改变习惯。

出于这个原因，我建议使用代表实际测量的每个标量存储一个测量单位。以这种方式显式会占用一些磁盘空间，但它会为您提供清晰性和灵活性。

我过去做过的事情是扩展度量单位模型以包括 UOM 类型，如长度、温度、体积、时间等。保留将每个 UOM 映射到 UOM 类型的表允许您还存储转换因子. 这样，如果有人带着必和必拓和磅读数来找您，您就会知道如何处理它以及如何将其与您以千瓦和吨为单位的典型条目进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:22:13.793

有趣的问题...

有两条明显的路线：

```
id   load_kW     fuel_consumption_tonnes
--------------------------------------------------
1    1154        89.4
2    1199        54.2 
```

这对人类来说很容易阅读，而且相当合乎逻辑。但是，如果某些读数以“公斤”为单位，而其他读数以“吨”为单位，则您必须将这些读数转换为适合“读数”表；这个过程必须是“无损的”，并且是幂等的。例如，“89403 公斤”的读数不是“89.4 吨”，即使企业为了方便可能会选择从公斤到吨四舍五入。通常会发生一些违反直觉的四舍五入的事情......

如果是这种情况，您可以更改架构：

```
id      load load_unit    fuel_consumption fuel_consumption_unit
--------------------------------------------------
1    1154  kW          89403              kg
2    1199  kW          54.2               t 
```

如果需要，使用“单位”表：

```
unit_id    unit_name
--------------------
kg         kilogramme
t          Tonne 
```

但是，此模型容易出现人为故障 - 很容易更改“load_unit”列而不修改“load”列，从而破坏数据。您实际上无法对数据模型做任何事情来避免这种情况。它还使常见查询变得相当棘手：想象一下尝试以一致的度量单位检索“负载”的总数。

我建议在这种情况下，您有两个表：“raw_readings”，原始数据采用上述格式，“normalized_readings”，通过将所有读数转换为一致的测量单位来填充。

# c# - 尝试在 C# 中使用 Firebird 客户端创建新的 Firebird 用户时出错

> ID：13067441
> 
> 赞同：4
> 
> 时间：2012-10-25T11:19:19.407
> 
> 标签：c#, firebird, firebird2.5

我正在尝试从我的 C# 应用程序为 Firebird 2.5 DB 创建新的 DB 用户，并收到错误“添加记录错误无权限插入/写入表用户”。我已向用户授予 rdb$admin 角色，使用此角色创建了与 DB 的连接，但我仍然收到此错误。对我来说最奇怪的是，当我尝试使用相同的用户设置和角色（rdb$admin）在 IBExpert 中为我的数据库创建新用户时，它运行良好并且我没有遇到任何错误。

可能是什么问题呢？为什么我不能执行在 USERS 表中更新/插入的 SQL 查询和过程，尽管我有适当的角色，我正在使用建立连接？

我正在使用最新的 FirebirdClient - ADO.NET 数据提供程序。

到 DB 的连接字符串如下所示：

```
`"User=developer;Password=*****;Database=C:\DB.fdb;DataSource=*****;Port=*****;Dialect=3;Charset=NONE;Role=rdb$admin;Connection lifetime=15;Pooling=True;MinPoolSize=0;MaxPoolSize=50;Packet Size=8192;ServerType=0;"` 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:13:11.807

我找到了一个解决方案 - 问题是我忘记将 GRANT ADMIN ROLE 授予执行过程的用户，因此我无法管理数据库用户。

所以 GRANT ADMIN ROLE 给用户解决了这个问题。

# jquery - 根据标题长度动态调整（宽度）jquery对话框？

> ID：13067446
> 
> 赞同：0
> 
> 时间：2012-10-25T11:19:45.987
> 
> 标签：jquery, jquery-ui

我想根据标题长度更改 jquery 对话框的宽度，并添加了所有必要的 js 和 css 文件，包括可调整大小的 js 和 css。

我试图增加宽度，但仍然无法正常工作

请帮助解决这个问题。

对话框的div：

```
<div id="dialog" title=""
    style="display: none; font-size: 15px; width: 600; height: 400"></div>
<div align="center"> 
```

javascript：

```
function showMsg(title,content)
  {

      if($(title).width()>600)
          {
          $("#dialog").dialog({ width: $(title).width()+20 });
           }
      else
          {
         $("#dialog").dialog({ width: 600 });
          }

      $("#dialog").dialog({ height: 400 });
      $("#dialog").css('display', '');
      $( "#dialog" ).css('line-height','25px');
      $( "#dialog" ).dialog( "option", "title",title );
      $("#dialog").html(content);
      $( "#dialog" ).dialog({ show: { effect: 'drop', direction: "up" } });
      $("#dialog").dialog();

  } 
```

html内容：

```
<a href="javascript:showMsg('dynamictitle','dynamicontent');"> 
```

样式 css：

```
ui-widget { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1.1em/*{fsDefault}*/; }
.ui-widget .ui-widget { font-size: 1em; }
.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif/*{ffDefault}*/; font-size: 1em; }
.ui-widget-content { border: 1px solid #aaaaaa/*{borderColorContent}*/; background: #ffffff/*{bgColorContent}*/ url(images/ui-bg_flat_75_ffffff_40x100.png)/*{bgImgUrlContent}*/ 50%/*{bgContentXPos}*/ 50%/*{bgContentYPos}*/ repeat-x/*{bgContentRepeat}*/; color: #222222/*{fcContent}*/; }
.ui-widget-content a { color: #222222/*{fcContent}*/; }
.ui-widget-header { border: 1px solid #aaaaaa/*{borderColorHeader}*/;  background: #cccccc/*{bgColorHeader}*/ url(images/ui-bg_highlight-soft_75_cccccc_1x100.png)/*{bgImgUrlHeader}*/ 50%/*{bgHeaderXPos}*/ 50%/*{bgHeaderYPos}*/ repeat-x/*{bgHeaderRepeat}*/;   color: brown/*{fcHeader}*/;    font-size: medium; }
.ui-widget-header a { color: #222222 /*{fcHeader}*/; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:56:45.750

对于基于标题长度动态调整大小（宽度）jquery 对话框，请通过此 url - 可能对您获得正确的解决方案有帮助：http: [//docs.jquery.com/UI/API/1.8/Dialog](http://docs.jquery.com/UI/API/1.8/Dialog)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:14:42.140

您不能通过调用 $(title).width() 直接计算字符串宽度。

使用此函数计算标题字符串宽度：

```
 function textWidth(text){
     var calc = '<span style="display:none">' + text + '</span>';
     $('body').append(calc);
     var width = $('body').find('span:last').width();
     $('body').find('span:last').remove();
     return width;
    }; 
```

像这样使用这个函数：width = textWidth(title);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T17:44:33.093

这是我在任何事件初始化后调整 jQuery 对话框大小的解决方案：假设 - 如果您有元素的 id 来初始化对话框（{...}）；

举个例子，

```
$("#dialog_element_id").dialog(
{
  autoOpen: true,
  height: 400,
  width: 360,
  modal: true,
  buttons:
  {
   . . .
  }   
});

$(...).live("click, function()  
{
  var dialogElementParent = $("#dialog_element_id").parent();
  //do some logic
  //...

  //resize
  dialogElementParent.width("...");
  dialogElementParent.height("...");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T14:55:49.120

以下对 Harish Anchu 答案的修改允许您传递一个 jQuery 选择器，并将返回与选择器具有相同字体样式的文本宽度。

```
function textWidth(text, clone_element){
    var calc = '<span>' + text + '</span>';
    var span = $('body').append(calc).find('span:last');
    var clone = $(clone_element);
    if(clone.length > 0){
        var styles = window.getDefaultComputedStyle(clone[0]);
        for(var i = 0; i < styles.length; i++){
            if(styles[i].indexOf("font") >= 0){
                span.css(styles[i],clone.css(styles[i]));
            }
        }
    }
    span.css('display','none');
    var width = span.width();
    span.remove();
    return width;
}; 
```

# sql - sql同名但值不同

> ID：13067447
> 
> 赞同：3
> 
> 时间：2012-10-25T11:19:51.760
> 
> 标签：sql, sql-server

如何检索所有具有相同名称但具有不同值的行？例如，我有这张表：

```
Name|Value|Description
Rob |Val1 |Text1
Alex|Val1 |Text2
Alan|Val2 |Text3
Alex|Val2 |Text4
Alex|Val2 |Text5  
Alan|Val2 |Text6 
```

我希望查询只返回多次出现但具有不同值的人。所以结果将是：

```
Alex|Val1 |Text2 
Alex|Val2 |Text4 
Alex|Val2 |Text5 
```

**编辑：**我在初始表中添加了另一行。一些查询也将返回 Alan 作为结果的一部分。我不希望那样，因为显然它具有相同的价值。如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:22:02.273

Try to use `join` and `sybquery` with `having`:

```
 select p.Name,p.Value,p.Description
    from persons P
    join ( select Name,Value
           from persons
            group by Name,Value
            having count(1)>1
          ) c on p.Name = c.Name
              and p.Value = c.Value
    order by p.Name; 
```

or the same `subquery` in `exists` clause:

```
select p.Name,p.Value,p.Description
from persons P
where exists
     ( select Name,Value
       from persons c
        where p.Name = c.Name
        group by Name,Value
        having count(1)>1
      ) 
order by p.Name 
```

## [SQL Fiddle](http://sqlfiddle.com/#!3/42c97/5/0) Demo

Solution for updated problem

```
select * 
from Persons c
where name in 
(
select  Name   from(
       select Name,Value 
       from persons        
        group by Name,Value) T

group by Name
  having count(1)>1
) 
```

## [SQL Fiddle](http://sqlfiddle.com/#!3/9f64d/36/0) Demo

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:50:17.193

只是为了好玩......交叉连接可能会起作用（我还没有测试过）：

```
select distinct 
    p1.*
from 

    Persons p1 
cross join 
    Persons p2 
where 
        p1.Name = p2.Name 
    and p1.Value <> p2.value
    and p1.Description <> p2.Description 
```

现在你可以开始讨论这将是多么有效......（但我不会参与其中......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T11:49:31.410

Here is a simple working solution:

```
SELECT t.Name, t.Value, t.Description
FROM t_table AS t
JOIN (
    SELECT Name
    FROM (
       SELECT Name FROM  t_table GROUP BY Name,Value
    ) AS sub1
    GROUP BY Name
    HAVING COUNT(*)>1
) AS sub2 ON (t.Name=sub2.Name)
ORDER BY t.Name, t.Value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:49:42.843

你可以做类似的事情

> SELECT * FROM TABLE1 AS A WHERE 1 = CASE WHEN (SELECT COUNT(*) FROM TABLE1 AS B WHERE B.NAME = A.NAME ) > 1 THEN 1 ELSE 0 END

# php - 解析错误：语法错误，文件意外结束

> ID：13067454
> 
> 赞同：-2
> 
> 时间：2012-10-25T11:20:25.270
> 
> 标签：php, parsing

你能帮我解决一下 Parse 错误：语法错误，C:\xampp\htdocs\xampp\form-to-email.php 中第 42 行的文件意外结尾想知道你是否可以帮我解决这个问题我很困惑...

```
<?php    {   
    if(!isset($_POST['submit']))
    {
    //This page should not be accessed directly. Need to submit the form.
    echo "error; you need to submit the form!";

    $name = $_POST['name'];
    $attend = $_POST['attend'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $office = $_POST['office'];
    $starter = $_POST['starter'];
    $mainmeal = $_POST['mainmeal'];
    $specialdietaryrequirements = $_POST['specialdietaryrequirements'];
    $otherdietaryrequirements = $_POST['otherdietaryrequirements'];
    $nameofguest = $_POST['nameofguest'];
    $starterguest = $_POST['starterguest'];
    $mainmealguest = $_POST['mainmealguest'];
    $guestspecialdietaryrequirements = $_POST['guestspecialdietaryrequirements'];
    $guestotherdietaryrequirements = $_POST['guestotherdietaryrequirements'];
    //email body
    $email_from = 'my@email.com';
    $email_subject = "Christmas Part Submission";
    $email_body = "You have received a new message from the user $name.\n".
    "Are you attending: $attend \n".
    "Email address from the person: $email \n".
    "Contact number: $phone \n".
    "Office: $office \n".
    "Starter: $starter \n".
    "Main Meal: $mainmeal \n".
    "Special Dietary Requirements: $specialdietaryrequirements \n".
    "Other Dietary Requirements: $otherdietaryrequirements \n".
    "Name of Guest: $nameofguest \n".
    "Guest Starter: $starterguest \n".
    "Guest Main Meal: $mainmealguest \n".
    "Guest Special Dietary requirements: $guestspecialdietaryrequirements \n".
    "Guest other Dietary requirements: $guestotherdietaryrequirements \n".
    // who it is being sent too (edit this)
    $to = "my@email.com";
    $headers = "From: $email_from \r\n";
    mail($to,$email_subject,$email_body,$headers);
    {   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:23:46.377

替换这个：

```
<?php    {   
if(!isset($_POST['submit']))
{ 
```

和

```
<?php  
if(!isset($_POST['submit']))
{ 
```

并且`{`在您的长代码的最后应该是`}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:22:35.827

By the looks of it, you forgot to close your if statement and whatever came before that. Try replacing

```
{ 
```

at the end of your file with

```
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:23:09.370

末尾的最后一个左大括号必须更改为右大括号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:24:35.903

仅第一行

```
<?php 
```

不 {

最后一行：你必须关闭IF标签而不打开它！

}

```
<?php       
    if(!isset($_POST['submit']))
    {
    ...
    mail($to,$email_subject,$email_body,$headers);
    }   
?> 
```

# tridion - 如何从 Tridion 中的关键字获取完整的类别路径

> ID：13067457
> 
> 赞同：3
> 
> 时间：2012-10-25T11:20:36.753
> 
> 标签：tridion, tridion-2011

任何人都可以帮助我从给定的关键字中获取完整的类别路径。我举一个例子如下，

例子：

类别 1----> 关键字 1 -----> 关键字 11，

从元数据中说我得到了“关键字 11”的值，但我需要整个路径，即 /Category 1/Keyword 1/Keyword 11。

任何人都可以帮助我如何使用 c# 在模板构建块中实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:41:00.840

也许您可以尝试使用以下方法之一：

*   keyword.ParentKeywords 递归创建您正在寻找的路径。
*   组织项 oi = 关键字。组织项；// 获取所有组织项
*   关键字.OwningRepository

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T14:20:37.047

下面的代码应该可以帮助您获取路径。

```
bool isRecursive = false;
KeywordField kwdField = (KeywordField)metaFields["kwdField"];
Keyword curKwd = new Keyword(kwdField.Value.Id, engine.GetSession());
string kwdPath = curKwd.Title;
while (!isRecursive) {
  if (curKwd.ParentKeywords.Count > 0){
     foreach (Keyword kwd in curKwd.ParentKeywords) {
        kwdPath = kwd.Title + "/" + kwdPath;
     }
     curKwd = curKwd.ParentKeywords[0];
  } else {
     isRecursive = true;
  }
}
kwdPath = curKwd.OrganizationalItem.Title + "/" + kwdPath; 
```

# java - Path() - 智能彩色段

> ID：13067459
> 
> 赞同：6
> 
> 时间：2012-10-25T11:20:42.647
> 
> 标签：java, android, graphics, maps, android-mapview

**背景**

我正在开发一个在地图上显示路径的应用程序（谷歌地图和 OpenStreet 地图）。下面是一个输出示例：

![小路](../Images/ef13aaf44d5cb632d8d3a0ee66fc5db6.png)

要绘制上述路径，我使用以下方法：

```
private void drawWithoutElevation(Canvas canvas, Projection projection){
    if(rebuildRequired)
        pathBuild();
    else{ //check if path need to be offset
        if(offsetRequired){
            path.offset(offset.x, offset.y);
        }
    }
    canvas.drawPath(path, paint); 
} 
```

上面的方法大约需要 1.5ms 来绘制 10.000 个点，这是可以接受的。

但是，我还想根据点高度使用不同的颜色显示路径。下面是一个输出示例：

![路径 2](../Images/d42cc1e41e8a5915ace59cd9fa57c385.png)

由于我找不到为每个路径段定义不同颜色的方法，我尝试了以下方法：

**方法一**

最明显的解决方案是`canvas.drawLine()`在路径中的每个点之间使用 a。示例如下：

```
private void drawWithElevation(Canvas canvas, Projection projection){
    for(int i=1; i<geoArrList.size(); i++){
            paint.setColor(geoArrList.get(i));
            canvas.drawLine(pPrev.x, pPrev.y, p1.x, p1.y, paint);
            pPrev.set(p1.x, p1.y);
        }
    }
} 
```

对于相同的 10.000 个点，这导致了大约 80 毫秒的非常令人失望的时间。

**方法二**

以离散的步骤分割高度，并建立一个`Path`对象列表，每个高度段变化一个。下面的代码示例：

```
private void drawWithElevation(Canvas canvas, Projection projection){
    if(rebuildRequired)
        pathBuild();
    for(int i=0; i<pathSegments.size(); i++){
        if(needOffset){
            pathSegments.get(i).path.offset(offsetX, offsetY);
        }
        paint.setColor(pathSegments.get(i).color);
        canvas.drawPath(pathSegments.get(i).path, paint); 
    }
} 
```

对于相同的 10.000 个点，这导致了大约 5 毫秒的令人失望的时间。

**问题**

虽然最后一种方法显示出显着的改进，但与第一种方法相比，我想进一步改进它。

是否有任何其他方法可用于以更有效的方式（速度和/或内存使用）绘制每段不同颜色的路径？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:27:50.170

查看 google 的 MyTracks 的来源，这可能会带来一些灵感

# wpf - 将 WPF 中的 ICON 转换为绘图

> ID：13067464
> 
> 赞同：1
> 
> 时间：2012-10-25T11:21:00.747
> 
> 标签：wpf, datatemplate, resourcedictionary

我有一个使用树视图的 GUI，它将数据对象呈现为行，包括用于表示每行的对象类型等的图标。我注意到将图标文件添加到每一行会减慢负载并渲染很多，所以我玩弄将图标重写为绘图的想法。我已经完成了一个概念验证并模仿了一个带有以下内容的图标

```
<Border Width="15" Height="15" BorderThickness="0" CornerRadius="4,4,4,4" Background="#22bb22" VerticalAlignment="Center">
            <Path StrokeThickness="1.5" Stroke="#FFFFFFFF" Data="M 2,4 C 2,4 10,4 9,12 M 2,7 C 2,7 7,7 6,12 M 2,10.5 L 4,10.5"/>
        </Border> 
```

但是我看不到如何将其作为静态资源包含在我的 XAML 中。我想加载此绘图一次并在整个应用程序中重复使用它，而不必每次都重新绘制。我对图像做了类似的事情，创建了一个资源字典，然后有一个 StaticResourceExtension 类，通过该字典中的键查找缓存中的图像，并将其绑定到图像标记的源。例如

```
<Image Source="{y:ImageStaticResource {Binding IconString}}" Margin="0,0,0,0"></Image> 
```

ImageStaticResource 是我的自定义类，datacontext 的 IconString 属性是在字典中查找的键，它返回图像位置的字符串。这很有效，而且效果很好。但我想用这些图纸做类似的事情，但不知道怎么做。我创建了一个新的静态资源扩展，它的功能完全相同，但加载了不同的资源字典，其第一个条目如下

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"                     
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

        <Border x:Key="Default" Width="15" Height="15" BorderThickness="0"></Border>

        <Border x:Key="..\Resources\Images\AccountOnly.ico" Width="15" Height="15" BorderThickness="0" CornerRadius="4,4,4,4" Background="#22bb22" VerticalAlignment="Center">
            <Path StrokeThickness="1.5" Stroke="#FFFFFFFF" Data="M 2,4 C 2,4 10,4 9,12 M 2,7 C 2,7 7,7 6,12 M 2,10.5 L 4,10.5"/>
        </Border>

    </ResourceDictionary> 
```

所以我希望通过按键查找这个带边框的绘图（因为所有图标都可以由绘图周围的边框表示，但不知道该怎么做。有人可以提供建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:43:14.187

要在可视化树的某个位置“放置”资源中的边框……使用 ContentControl 或 ContentPresenter……并引用您的键控资源。

```
<ContentControl Content="{StaticResource Default}"/> 
```

或者

```
<ContentControl Content="{StaticResource ..\Resources\Images\AccountOnly.ico}"/> 
```

（注意你在第二个边框上使用的键名有点不合常规）

但是，一旦您尝试多次使用边框，即“指定的元素已经是另一个元素的逻辑子元素”，就会遇到问题。

您可以用 标记资源`x:Shared="False"`，以便为每个引用创建一个新实例……但是您可能会回到原点，即低效渲染。

您也可以考虑创建自己的`FrameworkElement`派生类，专门针对呈现“图标”所需的最低要求，并优化任何共享数据。

如果您不需要模板的灵活性，请尽量避免使用任何重量级的“控制”派生类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:45:34.480

您可以通过使用定义为资源的 DrawingBrush 填充 Rectangle 控件来实现相同的视觉效果：

```
<Window.Resources>
    <DrawingBrush x:Key="SomeIcon" Stretch="None">
        <DrawingBrush.Drawing>
            <DrawingGroup>
                <GeometryDrawing Brush="#22bb22">
                    <GeometryDrawing.Geometry>
                        <RectangleGeometry Rect="0,0,15,15" RadiusX="4" RadiusY="4"/>
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
                <GeometryDrawing Geometry="M 2,4 C 2,4 10,4 9,12 M 2,7 C 2,7 7,7 6,12 M 2,10.5 L 4,10.5">
                    <GeometryDrawing.Pen>
                        <Pen Brush="#FFFFFFFF" Thickness="1.5"/>
                    </GeometryDrawing.Pen>
                </GeometryDrawing>
            </DrawingGroup>
        </DrawingBrush.Drawing>
    </DrawingBrush>
</Window.Resources>

...

<Rectangle Width="15" Height="15" Fill="{StaticResource SomeIcon}"/> 
```

# mysql - How can I perform an AND operation on a single column?

> ID：13067472
> 
> 赞同：3
> 
> 时间：2012-10-25T11:21:34.927
> 
> 标签：mysql, sql, database, boolean-logic

I have a table with two columns;

```
CREATE TABLE IF NOT EXISTS `QUESTION_CATEGORY_RELATION` (
  `question_id` int(16) NOT NULL,
  `category_id` int(16) NOT NULL,
  KEY `category_id` (`category_id`),
  KEY `question_id` (`question_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `QUESTION_CATEGORY_RELATION` (`question_id`, `category_id`) VALUES
(1, 2),
(1, 3),
(2, 1),
(2, 2); 
```

![enter image description here](../Images/29495d48b28b93aefa91422f6cbf4672.png)

I want to create a query that will search for a question_id with content_id 2 and content_id 3

e.g.:

```
SELECT *  
FROM `QUESTION_CONTENTS_REL` 
WHERE `content_id` = 2 AND `content_id` = 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:24:55.423

```
SELECT question_id
FROM QUESTION_CONTENTS_REL
WHERE content_id in (2, 3)
group by question_id
having count(distinct content_id) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:52:04.030

你可以试试这个：

```
SELECT q1.question_id 
FROM `QUESTION_CONTENTS_REL` q1
JOIN `QUESTION_CONTENTS_REL` q2 on q1.question_id=q2.question_id
WHERE q1.`content_id` = 2 
AND q2.`content_id` = 3 
```

这不是最好的解决方案，因为它有一个 JOIN，例如在 Oracle 中，我会这样做：

```
SELECT q.question_id 
FROM `QUESTION_CONTENTS_REL` q
GROUP BY q.`question_ID`
HAVING SUM(case when q.`content_id` = '2' then 1 else 0 end)>0 
AND SUM(case when q.`content_id` = '2' then 1 else 0 end)>0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:27:07.530

我可能会误解，但我认为您正在寻找`OR`相反，因为 content_id 是关键

```
SELECT * FROM QUESTION_CONTENTS_REL WHERE `content_id`= 2 OR `content_id` = 3 
```

# iphone - 如何通过在焦点集中时将其移动到键盘顶部/视图中心来突出显示滚动视图中的焦点 UITextField

> ID：13067477
> 
> 赞同：0
> 
> 时间：2012-10-25T11:21:47.330
> 
> 标签：iphone, objective-c, uiscrollview, uitextfield, uitextview

在我看来，我在滚动视图中有 14 个文本字段。

要在键盘出现/消失时向上/向下移动视图，我已经设置了滚动视图框架大小

```
#pragma mark - Text field view delegate methods
- (void)textFieldDidBeginEditing:(UITextField *)textField; 
{
      //To move the scroll view up to avoid keybord covers the text field
      [UIView beginAnimations:nil context:NULL];
      [UIView setAnimationDelegate:self];
      [UIView setAnimationDuration:0.3];
      [UIView setAnimationBeginsFromCurrentState:YES];
      //scrollView.frame = CGRectMake(scrollView.frame.origin.x, (scrollView.frame.origin.y - 45), scrollView.frame.size.width, scrollView.frame.size.height);

      [scrollView setContentSize:CGSizeMake(200, 1100)];

      [UIView commitAnimations];

}

- (void)textFieldDidEndEditing:(UITextField *)textField;       
{   
      //To move the view down 
      [UIView beginAnimations:nil context:NULL];
      [UIView setAnimationDelegate:self];
      [UIView setAnimationDuration:0.3];
      [UIView setAnimationBeginsFromCurrentState:YES];
       [scrollView setContentSize:CGSizeMake(200, 900)];
      //scrollView.frame = CGRectMake(scrollView.frame.origin.x, (scrollView.frame.origin.y + 45), scrollView.frame.size.width, scrollView.frame.size.height);
      [UIView commitAnimations];

} 
```

返回键盘专注于下一个字段和最后一个字段键盘辞职

```
- (BOOL) textFieldShouldReturn:(UITextField *)textField
{

      if(textField == nameField) {
            [emailText becomeFirstResponder];
      } else if(textField == emailText) {
            [mobileText becomeFirstResponder];
      }
      else if(textField == mobileText) {
            [iPhoneText becomeFirstResponder];
      }
      else if(textField == iPhoneText.value) {
            [companyText becomeFirstResponder];
      }
      else if(textField == companyText) {

       [roleText becomeFirstResponder];
  }

...
......
...........
  else if(textField == lastfield) { // Last fiels
        [textField resignFirstResponder];
  }

      return YES;
} 
```

但我的意图是**，当文本字段被聚焦时，文本字段会向上移动到键盘顶部或视图中心**

怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:37:51.743

我在我的应用程序中使用[了 TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)，它似乎对我来说非常有效，也许可以试一试。

# iphone - 是否可以将标题添加到工具栏按钮，声明为 UIBarButtonSystemItem

> ID：13067478
> 
> 赞同：0
> 
> 时间：2012-10-25T11:21:54.203
> 
> 标签：iphone, xcode, button, toolbar, title

我想在我的导航工具栏中设置一些按钮，并且为了让用户不会对每个按钮的作用感到困惑，我想为每个按钮添加标题，显示在它下面。是否有可能做到这一点？

按钮声明：

```
UIBarButtonItem *changeFiltersButton = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(refreshButton)] autorelease]; 
```

``...

```
[self setToolbarItems:[NSArray arrayWithObjects: flexible,
                           changeFiltersButton, flexible, flexible,
                           refreshFiltersList, flexible, flexible,
                           more, flexible, nil]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:39:53.423

使用带有名称的图像，例如下面的示例

```
 NSMutableArray *toolBaritems = [[NSMutableArray alloc] init];

    [toolBaritems addObject:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]];
    [toolBaritems addObject:[[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"img.png"] style:UIBarButtonItemStylePlain target:self action:@selector(refresh)]];
    [toolBaritems addObject:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]];
    [toolBaritems addObject:[[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"img2.png"] style:UIBarButtonItemStylePlain target:self action:@selector(change)]];

    [toolbar setItems:toolBaritems animated:NO]; 
```

# joomla - Joomla 路由器新组件

> ID：13067479
> 
> 赞同：0
> 
> 时间：2012-10-25T11:21:54.377
> 
> 标签：joomla, router

我有这个 url 来显示属性：

```
index.php?option=com_jea&view=properties&city=2:citta&Itemid=164 
```

和`sef: sito.it/2-citta.html`

此 url 显示属性：

```
index.php?option=com_jea&view=property&city=2:citta&id=1:trivano&Itemid=164 
```

和`sef: sito/1-trivano/2-citta.html`

但我想

`sito.it/2-citta/1-tivano.html`

这是路由器：

```
function JeaBuildRoute(&$query){
$segments = array();

if(isset($query['view'])) {
    unset( $query['view'] );
}

if (isset($query['layout'])) {
    $segments[] = $query['layout'];
    unset( $query['layout'] );
}

if(isset($query['id'])) {
    $segments[] = $query['id'];
    unset( $query['id'] );
};
if(isset($query['city'])) {
    $segments[] = $query['city'];
    unset( $query['city'] );
};

return $segments;

function JeaParseRoute($segments)
{ $vars = array();
   $app =& JFactory::getApplication();
   $menu =& $app->getMenu();
   $item =& $menu->getActive();
   // Count segments
   $count = count( $segments );
   //Handle View and Identifier
   switch( $item->query['view'] )
   {
           case 'properties':
                   if($count == 1) {
                           $vars['view'] = 'properties';
                            $id   = explode( ':', $segments[$count-1] );
                            $vars['city']   = (int) $id[0];
                   }
                   if($count == 2) {
                           $vars['view'] = 'property';
                   }
                   $id = explode( ':', $segments[$count-1] );
                   $vars['id'] = (int) $id[0];
                   break;
           case 'property':
                   $id   = explode( ':', $segments[$count-1] );
                   $vars['id']   = (int) $id[0];
                   $vars['view'] = 'property';
                   break;
   }
   return $vars;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:29:43.493

也许您可以尝试颠倒这两个 if 的顺序

```
 if(isset($query['city'])) {
        $segments[] = $query['city'];
        unset( $query['city'] );
    };

  if(isset($query['id'])) {
        $segments[] = $query['id'];
        unset( $query['id'] );
    }; 
```

# java - Sun 的 Web 服务规范的默认实现？

> ID：13067486
> 
> 赞同：0
> 
> 时间：2012-10-25T11:22:13.243
> 
> 标签：java, web-services, jakarta-ee, jax-ws

Sun 的 Web 服务规范的默认实现是什么？我该如何开始呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:24:44.300

JAX-WS 的参考实现是[Metro](http://jax-ws.java.net/)。

开始使用 JAX-WS 进行编程的最简单方法是[遵循 Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnayl.html)。

您应该使用哪种 JAX-WS 实现取决于您的情况。如果您将 NetBeans 与 Glassfish 一起使用，Metro 将与 IDE 和 Java EE 服务器捆绑在一起。例如，如果您想使用其他实现的特殊功能，您可以轻松地将 Metro 换成 CXF。

来自[CXF 网站](https://cxf.apache.org/)：

> CXF 实现了 JAX-WS API（符合 TCK）。与参考实现相比，CXF JAX-WS 支持包括对标准的一些扩展，使其更易于使用：它将自动为请求和响应 bean 类生成代码，并且对于简单的情况不需要 WSDL。

如果您需要这些扩展，请使用 CXF。

# c# - 我应该如何在 Unity 中注册这种具有参数化构造函数的类型？

> ID：13067496
> 
> 赞同：1
> 
> 时间：2012-10-25T11:22:37.827
> 
> 标签：c#, .net, dependency-injection, tdd, unity-container

我正在尝试注册一个具有构造函数方法的类型，例如：

```
public Foo (int myNumber, IBar bar) {...} 
```

我通过 Unity 容器生成 IBar 实例。我应该如何注册和解决 Foo？

关于下面的示例，我如何用统一寄存器和解析方式替换 new Foo... 行？

```
public interface IBar
{

  public void SayNumber();

}

public class Bar : IBar
{
    public void SayNumber()
    {
        Coonsole.Write("Number : ");
    }
}

public interface IFoo
{
    void int GetMyNumberTimesTwo();
    public int MyNumber{get;}
    public IBar Bar {get;}
}

public class Foo : IFoo
{

    private IBar _bar;
    private readonly int _myNumber;

    public Foo (int myNumber, IBar bar)
    {
        _myNumber = myNumber;
        _bar = bar;
    }

    public void GetMyNumberTimesTwo() {return _myNumber * 2; }
    public IBar { get{ return _bar; } }
}

public static void Main(string[] args)
{

     var container = new UnityContainer();
     container.RegisterType<IBar, Bar>();

     // QUESTION: So how should I Register and Resolve the container to achive 
       //  the line below? 

      IFoo f = new Foo(999, container.ResolveType<IBar>()); // This should be replaced upon your answer

     Console.WriteLine(f.Bar.SatNumber + f.GetMyNumberTimesTwo());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:38:59.597

注册类型为

```
container.RegisterType<IFoo, Foo>(new InjectionConstructor(999, typeof(IBar))); 
```

# java - 从 Java 调用时数据库中的过程不起作用

> ID：13067502
> 
> 赞同：1
> 
> 时间：2012-10-25T11:22:55.140
> 
> 标签：java, sql, oracle, jakarta-ee, jdbc

我有一个在 Weblogic 服务器上运行并连接到 Oracle 11g DB 服务器的 Java 应用程序。

在应用程序中，我调用了一个 DB 过程并将一个参数传递给它，该参数与多个其他过程进行通信和调用。

当我独立测试程序时，它可以按预期完美运行。

当我从 Java 应用程序调用过程时，问题就来了。

该过程给出了一个错误：

> ORA-06508: PL/SQL: 找不到被调用的程序单元

Backtrace 导致调用另一个模式中存在的过程，并且在我当前的模式中具有同义词。

如果其他人遇到相同或类似的问题，请提供帮助。

编辑#1：调用 DB Proc 的示例代码

```
CallableStatement cstmt = null;
private Connection dbConn = null;
HashMap hashMap = new HashMap();
hashMap.put(DBDRIVER, driverType);
hashMap.put(USERID, userName);
hashMap.put(PASSWORD, password);
hashMap.put(SID, dbName);
hashMap.put(IPADDRESS, intDBServer);
hashMap.put(PORT, dbPort);
dbConn = (Connection)cmmObj.connect(hashMap);
cstmt = dbConn.prepareCall(queryToRun);
cstmt.setString(1, ReqId);
cstmt.executeUpdate(); 
```

Proc 调用是 { call Proc_CALL(?) }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:21:13.423

在我看来，您的同义词好像是错误的方式 - 调用模式需要被调用过程的同义词 + 执行权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:10:14.463

我可能已经发现了这个问题。虽然听起来很奇怪，但它似乎有效：

我正在使用的系统有 3 个 Schema 连接。

一种是从中进行所有调用的暂存模式。其次是调用的主模式。被调用的过程存在于此模式中。

第三个是另一个模式，其中存在从主模式过程调用的过程。

简化：

> StageSchema.Caller(同义词)-->>
> 
> MainSchema.Proc_Call(过程)-->>
> 
> CoSchema.insideCall（过程）。

CoSchema 的赠款可用于 Main Schema，但不适用于 Stage Schema。

尽管根据理论，如果将任何过程授予模式，那么对任何其他过程的所有内部调用都无关紧要。

但是在这种情况下，当我将授权授予 Stage Schema 时，一切似乎都运行良好。

如果有人对此有解决方案，请分享相同的原因。

# python - How to tell Numpy to print time in UTC and not local timezone?

> ID：13067504
> 
> 赞同：2
> 
> 时间：2012-10-25T11:23:06.517
> 
> 标签：python, string, numpy, timezone

How to tell Numpy to print datetime64 in UTC and not in local timezone?

For example, I get:

```
>>> np.datetime64('2012-01-01T00:00Z')
Out[111]: numpy.datetime64('2012-01-01T02:00+0200') 
```

But I prefer to get:

```
>>> np.datetime64('2012-01-01T00:00Z')
Out[110]: numpy.datetime64('2012-01-01T00:00+0000') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:51:16.517

部分解决方案：

```
>>> np.set_printoptions(formatter={'datetime':np.datetime_as_string})
>>> print np.array(['2012-01-02T01:02Z'], dtype='datetime64')
[2012-01-02T01:02Z] 
```

唯一的问题是标量仍以本地时区打印：

```
>>> print np.array(['2012-01-02T01:02Z'], dtype='datetime64')[0]
2012-01-02T03:02+0200 
```

# jquery - elFinder - asp.net connector global.asax configuration

> ID：13067505
> 
> 赞同：0
> 
> 时间：2012-10-25T11:23:07.330
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-ui, asp.net-mvc-4

I want to integrate elFinder into asp.net mvc 4\. I've seen the wiki for elFinder ASP.NET Connector. But I can't understand some of the config.

First of all is the

In Application_Start add Autofac registration:

```
// register IoC
var builder = new ContainerBuilder();
// add other registrations...
// add elFinder connector registration
builder.RegisterElFinderConnector();
// create container
_container = builder.Build();
// need also to set container in elFinder module
_container.SetAsElFinderResolver(); 
```

_container is undefined, should I just create the variable?

IContainer _container;

Where should I put this definition?

I've tried defining the container, and run the project inside visual studio, elFinder said "unable to connect to backend"

and

firebug returned this

![enter image description here](../Images/23d6a4cb266ed1c8e3c3a2f7dcfdb7f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:12:39.370

“无法连接到后端”可能是由于：

*   您忘记忽略路由，MVC 路由无法解析此路径（因为它不应该这样做）

    ```
    routes.IgnoreRoute("elfinder.connector"); 
    ```

确保这是在 MapRoute 语句之前指定的。

*   您的 web.config 中没有定义 HttpHandler

IContainer 是[http://api.autofac.org/html/BE4CF761.htm](http://api.autofac.org/html/BE4CF761.htm)，您可以在构建容器的地方实例化它

```
// register IoC
var builder = new ContainerBuilder();
// add other registrations...
// add elFinder connector registration
builder.RegisterElFinderConnector();
// create container
IContainer _container = builder.Build();
// need also to set container in elFinder module
_container.SetAsElFinderResolver(); 
```

# windows - 用于 Windows 的 HDFS“客户端”？重新导出为 CIFS？

> ID：13067512
> 
> 赞同：0
> 
> 时间：2012-10-25T11:23:21.120
> 
> 标签：windows, hdfs, cifs

虽然之前已经提出过 Windows 上 hadoop/HDFS 的一般问题，但我还没有看到任何人提出我认为对 Windows 支持最重要的用例：Windows 终端站如何参与 HDFS 环境并使用存储在高清文件系统。

特别是，假设我们有一个很好的基于 Linux 的 HDFS 环境，其中有很多节点和正在运行的分析作业等，一切都很愉快。Windows 桌面如何也使用这些文件？假设我们的分析从数百万几乎不感兴趣的文件中找到有趣的文件。现在我们想将它们带入桌面应用程序以进行可视化等。桌面使用它们的最自然方式是通过 Windows 共享，希望通过 Windows 服务器。

Windows 的 CIFS 实现比 Samba 好几个数量级——我说的是事实，而不是争论的焦点。这并不是说 Samba 不能正常工作，只是有充分的理由强烈倾向于将这个 HDFS 文件系统本质上导出为 CIFS。

可以通过一些工作流程来做到这一点，我们有一个后端流程来获取有趣的文件并复制它们。但这在许多情况下很麻烦，并且无法让受 Windows 束缚的分析师轻松地自行探索文件。

因此，我真正要寻找的是：

*   视窗服务器
*   HDFS 作为“挂载”文件系统；Windows 被认为是 HDFS “客户端”
*   将此文件系统从 Windows 导出为 CIFS 服务器
*   在 Windows 桌面上使用文件
*   让所有常见的 Windows 组权限正常工作（例如，通过映射到 NFSv4 ACL）。

顺便说一句，如果我们在这个问题中将“HDFS”替换为“GPFS”，那么一切都会奏效。目前，这是我的环境中 HDFS 和 GPFS 之间的关键区别。是的，还有很多比较点，但我现在一般不关注 GPFS 与 HDFS。

有人可以添加#GPFS 标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:42:27.317

> 特别是，假设我们有一个很好的基于 Linux 的 HDFS 环境，其中有很多节点和正在运行的分析作业等，一切都很愉快。Windows 桌面如何也使用这些文件？

[HDFS 通过WebHDFS](http://hadoop.apache.org/docs/r1.0.3/webhdfs.html)和[HttpFS](http://hadoop.apache.org/docs/current/hadoop-hdfs-httpfs/index.html)为各种操作提供了 REST API 。可以从多种语言务实地访问 REST API。另请注意，这些语言还具有可轻松针对 REST API 进行编程的库。

还没有尝试过，但是根据 Hadoop 文档，应该可以[将](http://wiki.apache.org/hadoop/MountableHDFS)HDFS 安装到 Windows 机器上。

# javascript - 如何先执行 commandLink'actionListener 函数，然后只执行 JavaScript 提示？

> ID：13067516
> 
> 赞同：0
> 
> 时间：2012-10-25T11:23:40.247
> 
> 标签：javascript, jsf-2, facelets, managed-bean

基本上我有一个记录列表。`alertFlag`每条记录（VO bean）都将附加一个警报标志 ， 。当 alertFlag 为 true 时，会提示一个警告框。否则不会提示。

VO 豆：

```
@ManagedBean(name = "theVo")
@SessionScoped
public class TheVO {
   private boolean alertFlag;

   /** getter and setter **/
} 
```

这是 XHTML 代码：

```
<t:dataTable var="theRecord" value="#{theVo.theList}">

  <t:column>
    <h:commandLink value="#{theRecord.recNo}" 
      actionListener="#{theEnquiry.doSetAlertFlag(theRecord.paramKey)}" 
      immediate="true" 
      action="#{theDetail.doShowDetailsPage(theRecord)}" 
      onclick="readAlertFlag(#{theEnquiry.alertFlag})"/>
    </h:commandLink>
  </t:column>

  ...
  ...
</t:dataTable> 
```

这是`theEnquiry`豆：

```
@ManagedBean(name = "theEnquiry")
@SessionScoped
public class Enquiry {

   private boolean alertFlag = false;

   /** getter and setter of alertFlag **/

   public void doSetAlertFlag(Integer theParamKey) {

      // check whether the alert flag is true or false.
      // if alert flag is true, otherwise set it false
   }
} 
```

这是 JavaScript 代码：

```
function readAlertFlag(alertFlag) {

  if( alertFlag == "true" )
    alert('alertFlag is true');
  else
    alert('alertFlag is false');
} 
```

我目前的情况是 JavaScript 警告框总是先执行然后才被 `doSetAlertFlag()`执行。但我的期望是先执行`doSetAlertFlag()`，因为我希望在提示之前先完成检查。如果这不能在 JavaScript 提示符下完成，我愿意接受替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:29:21.760

让 JSF 有条件地渲染脚本。将 替换`onclick`为`<h:outputScript rendered>`。

```
<h:commandLink ... />
<h:outputScript rendered="#{theEnquiry.alertFlag}">showAlert()</h:outputScript> 
```

# php - Windows server 2008 上的 PHP APC (PHP 5.4.3 - x64)

> ID：13067521
> 
> 赞同：3
> 
> 时间：2012-10-25T11:23:55.120
> 
> 标签：php, windows, apache, apc, windows-server-2008-x64

尝试安装 php apc：

下载[http://www.mediafire.com/?53jwxu6irk48ow1](http://www.mediafire.com/?53jwxu6irk48ow1)

检查了所有规格：

```
x64
Php 5.4.3
Thread safe 
```

但是apache仍然给出错误：

`PHP Startup: Unable to load dynamic library 'Z:/php_apc.dll'`

有什么建议吗？搜索了谷歌和stackoverflow，但没有找到解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:05:44.507

这是因为 apc 没有针对您使用的特定版本的 php 编译 - 我上周遇到了同样的问题！确保完全匹配的版本解决了这个问题。

# .net - 从 C++ 应用程序创建 .NET COM 对象

> ID：13067526
> 
> 赞同：1
> 
> 时间：2012-10-25T11:24:16.640
> 
> 标签：.net, c#-4.0, com, c++builder

以下是事实：

1) 我有一个 .NET 应用程序，其中包含一个具有公开 COM 接口的类。

2) 我有几个 C++ 应用程序实例化这个 .NET COM 类的一个实例。

3) 所有 C++ 应用程序都可以在我的开发 PC 上成功创建 COM 对象。

4) 在每台其他 PC 上，我的一个 C++ 应用程序无法创建 COM 对象失败并出现错误：“不支持此类接口”。其余的 C++ 应用程序不会失败。

问题：

A) 我的开发 PC 上如何支持接口，而不是其他特定 C++ 应用程序的接口？所有机器上的可执行文件完全相同。

B) 我所有的 C++ 应用程序如何成功地实例化 COM 对象，但不能。它实际上是在每个应用程序中重用的相同代码。

C）我该如何解决这个问题？有一些我可以调整的配置设置吗？

谢谢。

# c++ - 使用c ++的密码到期日期？

> ID：13067529
> 
> 赞同：3
> 
> 时间：2012-10-25T11:24:21.490
> 
> 标签：c++, windows, winapi, active-directory

我想使用 c++ win32 API 显示密码到期对话框...

我使用 System.directoryservice 命名空间完成了它......

但现在我需要 Win32 API ..

那里有获取密码到期日期的功能吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:53:04.843

您可以使用以下函数获取密码到期日期：

```
HRESULT GetPasswordExpirationDate(LPTSTR lpszPathName, LPSYSTEMTIME lpExpirationDate)
{
    HRESULT hr;
    IADsUser *pUser;
    hr = ADsGetObject(lpszPathName, IID_IADsUser, (void**) &pUser);
    if(SUCCEEDED(hr))
    {
        DATE expirationDate;
        hr = pUser->get_PasswordExpirationDate(&expirationDate);
        if (SUCCEEDED(hr))
            VariantTimeToSystemTime(expirationDate, lpExpirationDate);

        pUser->Release();
    }

    return hr;
} 
```

where`lpszPathName`是[LDAP](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746384%28v=vs.85%29.aspx)或[WinNT](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746534%28v=vs.85%29.aspx)路径，`lpExpirationDate`是指向[`SYSTEMTIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)结构的指针。

请注意，您必须包含`Windows.h`,`Iads.h`和并与and`Adshlp.h`链接才能使其工作。`ADSIid.Lib``ActiveDS.Lib`

示例用法：

```
CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);

SYSTEMTIME expirationDate;
HRESULT hr = GetPasswordExpirationDate(_T("WinNT://ComputerName/UserName,user"),
    &expirationDate);

if (SUCCEEDED(hr))
{
    //TODO: do whatever you want with the expirationDate here
}

CoUninitialize(); 
```

您可能希望使用以下 API 调用之一来检索当前用户和计算机/域名：[`GetUserName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724432%28v=vs.85%29.aspx)、、、[`GetComputerName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724295%28v=vs.85%29.aspx) [`GetUserNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435%28v=vs.85%29.aspx)[`NetWkstaUserGetInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370670%28v=vs.85%29.aspx)

如果您需要检索多个域用户的密码到期日期，最好使用[`ADsBuildEnumerator`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772177%28v=vs.85%29.aspx)而不是[`ADsGetObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772184%28v=vs.85%29.aspx)（参见 MSDN 上的示例）。

# awk - awk 与运算符

> ID：13067532
> 
> 赞同：17
> 
> 时间：2012-10-25T11:24:32.780
> 
> 标签：awk

关于 AND 逻辑运算符的基本问题。我正在尝试根据第 1 列和第 2 列的值在我的数据文件 niveles.csv 中提取一些字段。我想写一个 awk 句子说“当 field1=date 和 field2=area 然后打印字段 3 到 5” .

我的数据文件看起来像

```
01-08-12;1;0;0;0
01-08-12;2;1;1;1
01-08-12;3;0;0;1
................ 
```

bash 脚本中的 awk 语句是

```
date=01-08-2012
area=8
awk 'BEGIN {FS=";"}  $1 ~ /'$date'/ && $2 ~ /'$area'/ { print $1 " " $2 " "  $3 " " $4 " " $5 }' niveles-rams.cs 
```

但这只是为区域编号内部为 8（8,18 和 28）的三种情况提供字段，而我只想要区域 8 数据

```
01-08-2012 8 0 0 0
01-08-2012 18 2 2 1
01-08-2012 28 2 1 0 
```

提前感谢您的关注，对于有经验的用户来说，这是一个简单的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T11:34:13.813

未测试：

```
awk 'BEGIN {FS=";"}  $1 ~ /'$date'/ && $2 == '$area'{......}' 
```

$2 ~ /8/ -> 这意味着如果第二个字段包含 8

$2 == 8 -> 这意味着如果第二个字段等于 8

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-25T12:00:55.213

使用 awk 的`-v`选项来创建包含 shell 变量的 awk 变量。

```
awk -v date="$date" -v area="$area" '$1 == date && $2 == area { ... }' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-13T13:47:30.727

[由于这个问题因其标题而受到广泛关注，所以让我发布一个更通用的答案，涵盖如何`AND`在`awk`.]

假设您有一个文件`myfile`：

```
a 1 2 3
b 4 5 6
c 7 8 9 
```

如果您正在寻找一种使用`AND`运算符进行多项检查的方法，则需要`&&`像这样使用：

```
awk '$2 < 10 && $3 > 2' myfile 
```

哪个会返回：

```
b 4 5 6
c 7 8 9 
```

* * *

一般来说，您可以根据需要使用任意数量的条件，同时考虑到

```
AND --> &&
OR  --> || 
```

因此，您可以组合多个逻辑表达式，例如：

```
awk '($2 < 10 || $3 > 2) && ($2 > 10 || $3 < 2)' myfile
#    ^^^^^^^^^^^^^^^^^^^    ^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:24:32.787

这应该没问题，我给它做了一个小测试：

```
date="01-08-12"
area=8
awk -F\; '$1 == "'$date'" && $2 == '$area' { print $3 " " $4 " " $5 }' niveles-rams.csv 
```

如果您想要其中的日期和区域字段，那么 awk 语句如下所示：

```
awk -F\; '$1 == "'$date'" && $2 == '$area' { print $1 " " $2 " " $3 " " $4 " " $5 }' niveles-rams.csv 
```

# javascript - 使用 sessionStore 和 webSockets，还需要 cookie 吗？

> ID：13067536
> 
> 赞同：0
> 
> 时间：2012-10-25T11:24:39.587
> 
> 标签：javascript, session, cookies, websocket

如果满足以下条件：

1.  所有页面都是静态的（例如，要通过 websocket 数据填写的模板）

2.  所有页面都是公开的

3.  通过 websocket 通信的会话 ID 和状态

4.  通过 sessionStorage 和/或 localStorage 存储的客户端会话状态

还需要饼干吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:39:08.193

localStorage/sessionStore 确实可以替代cookie Storage。两者都在客户端上。

cookie 的巧妙之处在于它们会自动附加到任何 HTTP 请求中。从编码的角度来看，绝对没有什么可做的。但是由于您想使用 websockets，所以它不适用 - 您仍然需要使用存储在 localStorage 中的 sessionid 进行连接。

因此，您的问题的答案是“否”，您的场景中不需要 cookie

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:45:47.313

如果页面是 100% 静态的，那么就没有状态，所以这个问题变得没有实际意义，因为根本不需要任何机制来跨请求保留状态。

但是，如果页面的任何部分是动态的，则可能仍然需要 cookie 来跨多个会话保存状态。由于 cookie 存储在客户端，但随着每个请求传递给服务器，它们是一种用于同步客户端和服务器状态的机制。当然，如果您愿意，您可以自己通过 AJAX 请求和 localStorage 来实现这一点。

# django - Django：按值查找列表中的元素

> ID：13067537
> 
> 赞同：0
> 
> 时间：2012-10-25T11:24:40.167
> 
> 标签：django, list, django-templates

我有一个排序的对象列表，我希望我的用户从中选择一个范围。为此，我在网页中添加了两个`select`元素（称为`from`和）。直接从列表中填充，如下所示：`to``from`

```
<select id="from">
    {% for el in el_list %}<option>{{el.number}}</option>{% endfor %}
</select> 
```

一旦在中选择了一个值，`from`我想填充`to`从所选值到最后一个值的值。

该列表按`number`python 一侧的属性排序，所以我想我需要做的就是在列表中找到选定的元素，相应地对列表进行切片，然后使用其余的来填充我的第二个`select`.

我已经搜索了文档和几个片段，但到目前为止，我只发现过滤器给了我列表的最后一个或第一个元素。我也知道我可以使用 来检查所选值是否在我的列表中`in`，但是我怎样才能获得该对象的索引？

我知道我可能可以使用`for`...遍历整个列表`if`，但我几乎可以肯定那里有更优雅的方法，我只是还没有找到。

如果你们中的任何人都可以为我提供一些关于如何更优雅地解决这个问题的建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:41:03.743

我不知道您为什么要为此查看模板标签。他们无济于事：当用户看到要从`from`select 中选择某些内容的页面时，模板已经被渲染。您需要使用 Javascript。

# javascript - 使用ajax从svn服务器获取文件的方法

> ID：13067543
> 
> 赞同：1
> 
> 时间：2012-10-25T11:24:59.297
> 
> 标签：javascript, ajax, svn, cron, same-origin-policy

我正在构建一个简单的网页，该网页将在连接到大型电视的计算机上运行，​​为通过它的人显示一些相关信息。

该页面将（以某种方式）获取一些位于 svn 服务器上的文本文件，然后将它们呈现为 html。

所以我有两种选择如何做到这一点：

1.  设置一个`cron`定期检查 svn 服务器是否有任何更改的作业，如果是，则从 svn 更新文件，并（以某种方式）更新页面。这存在违反[Access-Control-Allow-Origin 策略](https://developer.mozilla.org/en-US/docs/HTTP_access_control)的问题，因为文件现在存在于本地，并且刷新以全屏模式运行的页面的好方法是什么？

2.  让 javascript 完成整个工作：将其设置为定期 ajax 直接从 svn 服务器请求文件，检查差异，然后渲染页面。这在某种程度上似乎并不那么优雅。

**更新**[Access-Control-Allow-Origin 策略](https://developer.mozilla.org/en-US/docs/HTTP_access_control) 在Web 服务器上运行时似乎不是问题，即使内容位于同一个域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:36:34.873

我最终所做的是两者之间的分裂：

1.  一个`cron`作业从 svn 更新文件。
2.  javascript 会定期使用`window.setInterval`并打开`ifModified`ajax 请求上的标志来请求文件，以便仅在发生更改时更新 html。

# java - OverlaidXYPlotDemo1：更改系列颜色

> ID：13067549
> 
> 赞同：1
> 
> 时间：2012-10-25T11:25:22.503
> 
> 标签：java, jfreechart

我设法更改了[OverlaidXYPlotDemo1](http://code.google.com/p/swing-ui-hxzon/source/browse/trunk/jfreechart/org/jfree/chart/demo/OverlaidXYPlotDemo1.java?spec=svn65&r=65)中条形的颜色，其中：

```
XYItemRenderer xir = plot.getRenderer();
xir.setSeriesPaint(0, Color.BLUE); 
```

但是，我不能改变第二个系列的颜色

```
xir.setSeriesPaint(1, Color.GREY); 
```

所以我可能错过了一些东西。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:48:21.207

我想到了。正确的方法是使用渲染器：

```
renderer1.setSeriesPaint(0, Color.YELLOW);
renderer2.setSeriesPaint(0, Color.GREY); 
```

# .net - 使用多个模板进行 WPF 控件创作

> ID：13067555
> 
> 赞同：3
> 
> 时间：2012-10-25T11:26:02.850
> 
> 标签：.net, wpf, controls, datatemplate

我正在尝试创建一个自定义 WPF 控件，该控件具有多个 UI 元素以在不同时间在不同情况下显示，因此无法在同一可视化树中明智地创建它们。我为每个元素创建了依赖属性，类型为`UIElement`. 这运作良好。

当涉及到样式控制时，它的效果并不好。虽然我可以为设置自定义属性的控件定义样式，但该样式只实例化一次。因此，如果我的自定义控件的多个实例使用相同的样式，则只有最后一个要定义的实例才能获得可视化树。我知道这是因为样式`UIElement`直接设置而不是使用模板，并且模板基础结构在其中定义了树的多个实例（请参阅[https://stackoverflow.com/a/8702180/1453269](https://stackoverflow.com/a/8702180/1453269)）

我的问题是，我如何定义一个采用多个模板的控件，以便应用它们？我尝试创建类型的依赖对象`DataTemplate`。如果我使用 a`ContentPresenter`来显示模板，它只会将 DataTemplate 的类型名称显示为文本。我希望它以与 WPF 的其余部分一致的方式将模板值应用于我的第一个依赖项属性。我曾假设有一种方法可以利用 WPF 中的模板基础结构，但我找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:18:20.633

关键是[FrameworkTemplate上的](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.aspx)[LoadContent](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.loadcontent.aspx)方法（DataTemplate 派生自该方法）。此方法创建模板内容的副本。

因此，为了实现多个模板，我为我想要的每个模板化 UI 属性创建了一个 Content 和一个 Template 对依赖属性。我注册了关于 XXXTemplate 依赖属性的更改通知。事件处理程序调用了一个方法，该方法将匹配的 XXXContent 依赖属性设置为在新模板值上调用的 LoadContent 的返回值。

在包含对象的控件模板中，我可以使用绑定到所需 UIElement 的 XXXContent 属性的 ContentPresenter。

# javascript - java脚本中的参数

> ID：13067556
> 
> 赞同：-3
> 
> 时间：2012-10-25T11:26:03.777
> 
> 标签：javascript

如何从 javascript 中的参数对象中删除一个参数？

我希望最终的参数是一个参数对象而不是数组。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:43:27.957

```
var a = function () {
  var args;
  var b = function () {
    args = arguments;
  };

  var orig = Array.prototype.slice.call(arguments);
  orig.splice(1, 1); // remove one argument
  b.call(this, orig);

  console.log(args); // [ 1, 3 ]
};

a(1, 2, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:44:34.573

您可以像下面这样删除第一个参数

```
function addMe(){
   var arg = Array.prototype.slice.call(arguments);

   var first_arg = arg.shift(); //remove first argument
   alert(arg); //new arguments
}

addMe(1,2,3,4,5,6,7,8,9,10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:32:19.587

从包装的函数中调用您的函数，并保留第一个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:29:12.783

```
var args = toArray.apply(null, arguments);
args = args.slice(1, args.length); // here you have an arguments array minus the first

myFinalFunction.apply(null, args); // call your second function this way

// helper function
var toArray = function() {
    var args = [];
    for(var i=0; i<arguments.length; i++) args.push(arguments[i]);

    return args;
} 
```

# android - 如何取消注册活动中的接收者？

> ID：13067557
> 
> 赞同：2
> 
> 时间：2012-10-25T11:26:04.380
> 
> 标签：android

我正在使用聊天应用程序。

在 onPause() 和 onResume() 中，我注册了接收器。

我无法在 onPause() 中取消注册接收器，因为在接收器中我正在检查网络连接

在 onPause 和 onResume 我必须监控网络

然后我很困惑在哪里注销接收器？

谁能帮帮我。

```
protected void onPause(){
        backfacekey=1;

        //unregisterReceiver(mConnReceiver); 
        super.onPause();
        registerReceiver(mFacebookReceiver, 
                  new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    }

    protected void onResume(){

        backfacekey=0;
        super.onResume();

        registerReceiver(mFacebookReceiver, 
                 new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

    }

    private BroadcastReceiver mFacebookReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {

                 NetworkInfo info = (NetworkInfo)intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO); 

                 if (info.getState().equals(NetworkInfo.State.DISCONNECTED)) {
                  Toast.makeText(getApplicationContext(), "Network disconnected",Toast.LENGTH_LONG).show();

                 }
                  key=2;

                 }

                   if (info.getState().equals(NetworkInfo.State.CONNECTED)) {

                     if(key==2){

                                Toast.makeText(getApplicationContext(), "Network connected ",Toast.LENGTH_LONG).show(); 
                key=0;

                        }
                     }
                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:37:32.800

您可以在`onStop()`or`onDestroy()`方法中取消注册您的接收器。

# php - 在线注意工作 RewriteEngine

> ID：13067560
> 
> 赞同：0
> 
> 时间：2012-10-25T11:26:18.350
> 
> 标签：php, get, rewrite

我使用重写链接

在本地，此代码工作正常，但注意在线工作

htaccess 代码：

```
RewriteEngine On
RewriteRule ^page/([^/]+)/$ page.php?id=$1 
```

php代码：

```
<?php
if (isset($_GET['id']) && $_GET['id'] !=""){
echo $_GET['id'];
} else {
echo "Empty"
} 
```

在主机错误 EMPTY 但在本地回显获取 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:40:47.570

这是因为您的服务器配置。

**您的服务器中可能未启用**mod_rewrite**模块或不支持**rewrite_url****

 **使用[phpinfo()](http://php.net/manual/en/function.phpinfo.php)检查您的服务器 appache 配置。

联系您的托管支持。如果您的托管支持是**BIGROCK**，他们会注意支持此功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T11:31:32.423

此错误表单服务器

经理设置 apache 并解决了这个错误**

# ruby-on-rails - 在数据库中存储正则表达式

> ID：13067564
> 
> 赞同：2
> 
> 时间：2012-10-25T11:26:26.307
> 
> 标签：ruby-on-rails, regex, activerecord, eval

我需要使用 ActiveRecord 在数据库表中存储与其他字段相关的正则表达式。

我在 Regexp 类中找到了[to_s方法，该方法指出](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-to_s)

> 返回包含正则表达式及其选项的字符串（使用 (?opts:source) 表示法。此字符串可以反馈到 Regexp::new 到具有与原始语义相同的正则表达式。（但是，Regexp# == 在比较两者时可能不会返回 true，因为正则表达式本身的来源可能不同，如示例所示）。Regexp#inspect 生成通常更易读的 rxp 版本。

所以这似乎是一个可行的解决方案，但它会以不寻常的语法存储 exp，为了获取要存储的字符串，我需要使用`/my-exp/.to_s`. 此外，我可能无法直接编辑为正则表达式。例如一个简单的正则表达式产生：

```
/foo/i.to_s # => "(?i-mx:foo)" 
```

另一种选择是评估字段内容，因此我可以将纯表达式存储在 db 列中，然后执行`eval(record.pattern)`以获得实际的正则表达式。这是有效的，因为我是唯一负责管理正则表达式记录的人，所以除了应用程序错误之外，这样做应该没有问题;-)

我还有其他选择吗？我宁愿不在 db 字段上执行 eval，但另一方面我不想使用我不知道的语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:00:17.617

用于`serialize`存储您的正则表达式“原样”

```
class Foo < ActiveRecord::Base
  serialize :my_regex, Regexp
end 
```

请参阅[API 文档](http://apidock.com/rails/ActiveRecord/Base/serialize/class)以了解有关此内容的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T11:30:53.227

不确定我是否完全理解您的限制。

如果你在 db 中存储一个字符串，你可以从中创建一个正则表达式：

```
a = 'foo'
=> "foo" 
/#{a}/
=> /foo/
Regexp.new('dog', Regexp::EXTENDED + Regexp::MULTILINE + Regexp::IGNORECASE) 
=> /dog/mix 
```

还有其他构造函数，[请参阅 doc](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-new)。

不使用 eval'd 代码的最佳解决方案是将正则表达式部分存储在字符串列中，并将标志存储在单独的整数列中。通过这种方式，可以使用以下方式构建正则表达式：

```
record = Record.new pattern: 'foo', flags: Regexp::IGNORECASE
Regexp.new record.pattern, record.flags # => /foo/i 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T11:38:00.467

您可以在正则表达式中使用 #{} 来插入变量，因此您可以通过将“foo”作为字符串存储在 record.pattern 下的数据库中来插入经过仔细清理的正则表达式，然后使用以下命令对其进行评估：

```
/#{record.pattern}/ 
```

因此，在数据库中，您将存储：

```
"pattern" 
```

在您的代码中，您可以执行以下操作：

```
if record.other_field =~ /#{record.pattern}/
  # do something
end 
```

这会从数据库中您可以更改的动态字符串编译正则表达式，并允许您在代码中使用它。出于安全原因，我不推荐它，请参见下文：

显然这可能很危险，因为正则表达式可以包含 ruby​​ 代码，所以这更简单，但就危险而言，它类似于 eval：

```
a = "foo"
puts a
=> foo
b = "#{a = 'bar'}"
a =~ /#{b}/ 
puts a 
=> bar 
```

您可能会更好地考虑是否值得将您的正则表达式测试分解为您可以映射到您在代码中编写的方法的东西，这样您就可以将键存储在数据库中以进行约束，例如：

'字母，数字'等

然后根据存储的密钥进行硬编码测试。也许在这里查看 rails 验证以获取提示，尽管它们存储在代码中，但这可能是最好的方法（概括您的要求，并将代码保留在数据库之外）。即使您认为现在不需要安全性，您也可能会在以后需要它，或者忘记这一点并授予恶意人员访问权限。

# cordova - 如何将数据从控制器传递到视图

> ID：13067566
> 
> 赞同：1
> 
> 时间：2012-10-25T11:26:43.663
> 
> 标签：cordova, extjs, sencha-touch-2

我在选项卡面板的列表视图中有以下侦听器：

```
listeners: {
    itemtap: function (list, index, item, e) {
    var record = list.getStore().getAt(index);
    this.fireEvent('showListCommand', this, record);
} 
```

这是我的控制器的配置：

```
config: {
    refs: {
        mainView: "mainview",
        activeLists: "activelists",
        listView: "listview"
        // I deleted some code for easier reading
    },
    control: {
        activeLists: {
            showListCommand: "onShowListCommand"
        }
    }
}, 
```

这是 onShowListCommand 函数和它调用的函数，都在控制器中：

```
onShowListCommand : function (list, record) {
    this.activateListView(record);
},

slideLeftTransition: { type: 'slide', direction: 'left' },

activateListView: function (record) {
    var listView = this.getListView();
    listView.setRecord(record);
    console.log(record.get('id'));
    Ext.Viewport.animateActiveItem(listView, this.slideLeftTransition);
}, 
```

控制台日志在这里按预期工作，它记录被点击的列表项的 id。我也知道 setRecord 函数有效，它在 listView 的表单文本字段内显示模型中的标题、id 和预算字段。

现在，我在过去 10 小时内试图成功的是将这些模型字段传递给 listView**并能够在表单之外使用它们**，例如在标题或 html 中。所以基本上我在选项卡面板中有一个列表，在 itemtap 上我使用 Ext.Viewport.animateActiveItem 显示另一个视图。

ListView 是“Ext.form.Panel”，它目前有一个工具栏和一个通过 initialize() 函数的字段集，但我想用一些普通的 html 替换字段集，但我不能在任何情况下使用来自 setRecord() 的数据方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:24:15.337

我解决了这个问题。主要问题是我试图显示尚未传递的数据，因为所有这些都在初始化函数中。我也想出了一种通过视口传递数据的方法。

下面是我的函数如何显示我想将数据传递给现在的视图：

```
activateListView: function (record) {
        Ext.Viewport.animateActiveItem( {xtype: 'listview', data: record.data}, {type: 'slide', direction: 'left'} );
    } 
```

以下是我在视图中使用数据的方式：

```
var datafield = this.getData();
console.log(datafield .id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:11:29.453

我希望我正确地理解了你，但我不太确定这会对你有所帮助。

无论如何，在我的应用程序中，我有一个面板，该面板通过该函数从控制器中的侦听器函数 (onListTap) 进行更新`setData()`。这反过来`updatedata`在面板上/从面板上触发一个事件，该事件也在控制器中获取，然后用于更改面板子级。

updatedata 监听器示例：

```
onMyPanelUpdate: function(component, newdata, options) {
    var holder = component.child("#innerContainer");

    holder.child("#detailsText").setData(newData);
    holder.child("#detailImg").setSrc(newData.imgUrl);
    holder.child("#detailsTitle").setData(newData);
    holder.child("#extras").setHtml(newData.extraHtml);
} 
```

希望这对您有所帮助，如果您需要其他帮助或我误解了您的问题，请返回评论。

# php - 在opencart中获得第三级类别

> ID：13067567
> 
> 赞同：1
> 
> 时间：2012-10-25T11:26:47.557
> 
> 标签：php, opencart

我想`foreach`在 OpenCart 类别模块中进行第三级，这里是只生成 2 级类别的代码，请帮助和修改，以便它生成第三级：

```
<ul id="menu">
    <?php foreach ($categories as $category) { ?>
    <li><a href="<?php echo $category['href']; ?>"><?php echo $category['name']; ?></a>
      <?php if ($category['children']) { ?>
        <?php for ($i = 0; $i < count($category['children']);) { ?>
        <ul>
          <?php $j = $i + ceil(count($category['children']) / $category['column']); ?>
          <?php for (; $i < $j; $i++) { ?>
          <?php if (isset($category['children'][$i])) { ?>
          <li><a href="<?php echo $category['children'][$i]['href']; ?>"><?php echo $category['children'][$i]['name']; ?></a></li>
          <?php } ?>
          <?php } ?>
        </ul>
        <?php } ?>
      <?php } ?>
    </li>
    <?php } ?>
  </ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:00:56.700

为此，您首先需要编辑 Header Controller：

转到目录->控制器->common->header.php

编辑创建 $categories 变量的部分。通过以下脚本更新：

```
$categories = $this->model_catalog_category->getCategories(0);

        foreach ($categories as $category) {
            if ($category['top']) {
                $children_data = array();

                $children = $this->model_catalog_category->getCategories($category['category_id']);

                foreach ($children as $child) {

                    $sec_children_data = array();
                    $sec_children = $this->model_catalog_category->getCategories($child['category_id']);

                    foreach ($sec_children as $sec_child) {
                        $sec_children_data[] = array(
                        'name'  => $sec_child['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                        'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $sec_child['category_id'])  
                           );
                        }
                    $data = array(
                        'filter_category_id'  => $child['category_id'],
                        'filter_sub_category' => true
                    );

                    $product_total = $this->model_catalog_product->getTotalProducts($data);

                    $children_data[] = array(
                        'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                        'href'  => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id']), 'children' => $sec_children_data 
                    );                      
                }

                // Level 1
                $this->data['categories'][] = array(
                    'name'     => $category['name'],
                    'children' => $children_data,
                    'column'   => $category['column'] ? $category['column'] : 1,
                    'href'     => $this->url->link('product/category', 'path=' . $category['category_id'])
                );
            }
        } 
```

然后更新视图文件以显示第三级类别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:59:23.763

你可以试试这个，它并不优雅，但应该可以：

```
 <ul id="menu">
    <?php foreach ($categories as $category) : 
        echo '<li><a href="'.$category['href'].'">'.$category['name'].'</a>';
        if (!empty($category['children'])) : 
            echo '<ul>';
            foreach ($category['children'] as $category_level2) :
                echo '<li><a href="'.$category_level2['href'].'">'.$category_level2['name'].'</a>';
                if (!empty($category_level2['children'])) :
                    echo '<ul>';
                    foreach ($category_level2['children'] as $category_level3) :
                        echo '<li><a href="'.$category_level3['href'].'">'.$category_level3['name'].'</a></li>';
                    endforeach;
                    echo '</ul>';
                endif;
                echo '</li>';
            endforeach;
            echo '</ul>';
        endif;
        echo '</li>';
    endforeach;
    echo '</ul>';
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:55:26.663

假设您已经完成了管理方面的工作，那么您应该检查是否有一些类别低于 2 级。如果是，则进行`for`构造（或`foreach`）并将它们显示为第 3 级。

您将生成三重`<ul></ul>`构造。它应该在 CSS 下风格化。

您甚至可以使用递归函数创建无穷大的子类别。

如果你不明白，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T04:16:02.703

首先从[这里](https://code.google.com/archive/p/vqmod/downloads)下载 vqmod然后解压它。现在 vqmod 文件夹保存在您的站点根目录中。然后去浏览器写你的站点 url 然后 "/vqmod/install" 并按 Enter 然后你会收到一条消息，你可以在你的站点中成功安装 vqmod。[现在你在这里](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=21351)下载一个扩展表格并解压它。并在您的站点中保留提取文件指示folder exm：menu3rdlevel-opencart-2_2\vqmod\xml/Menu3rdLevel.xml 文件在您的站点中，例如：vqmod\xml/Menu3rdLevel.xml 它们带有“menu3rdlevel”文件夹的其他文件。来自您的扩展文件夹“javascript”到您的站点文件夹“javescript”，扩展文件夹“image”到站点文件夹“image”扩展文件夹“stylsheet”到站点文件夹“stylsheet”。

注意：仅传输 xml 文件和文件夹中的其他文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-16T09:41:23.227

要编辑第三级菜单，请在 header.php 控制器文件中进行以下更改。

```
 foreach ($sec_children as $sec_child) {
                    $sec_children_data[] = array(
                        'name'  => $sec_child['name'] . ($this->config->get('config_product_count') ? '' : ''),
                        'href'  => $this->url->link('product/category', 'path=' . $child['category_id'] . '_' . $sec_child['category_id'])
                    );

                } 
```

并对 header.tpl 文件进行以下更改。

```
?php if (isset($category['children'][$i]['level3'])) {  
          $level3menus = $category['children'][$i]['level3'];
          ?>
          <ul class="level3">
          <?php
                foreach( $level3menus as $level3menu) {
          ?>
                <li><a href="<?php echo $level3menu['href']; ?>" class=""><?php echo $level3menu['name'];?></a></li>
          <?php } ?> 
```

请参考我的教程一步一步的解释和演示。

[http://www.pearlbells.co.uk/third-level-category-menu-opencart/](http://www.pearlbells.co.uk/third-level-category-menu-opencart/)

# iphone - 如何在 iOS6 中将图像缩放到 0.25 或将图像大小调整为 478*640

> ID：13067570
> 
> 赞同：0
> 
> 时间：2012-10-25T11:26:57.790
> 
> 标签：iphone, objective-c, ios6, xcode4.5

在我的应用程序中，我**的图像**尺寸为**1936*2592**，大小最大为 6 MB。我需要**将图像缩放到 0.25**或**将图像调整为 478*640**，然后将其上传到服务器。我在ios6中尝试了很多方法，但都失败了

```
imageData= UIImagePNGRepresentation(self.cl_PriviewImage);
UIImage *temp = [[UIImage alloc] initWithData: imageData];
ScaledImage = [temp resizedImage:CGSizeMake(478, 640) interpolationQuality:kCGInterpolationHigh];
ScaledData = UIImagePNGRepresentation( ScaledImage); 
```

//self.cl_PriviewImage 是我的图像，它显示**resizedImage 方法未找到**。我也尝试过使用**ScaleToSize**方法，但它显示**相同的错误**。

我也试过

```
ScaledImage = [UIImage imageWithCGImage:self.cl_PriviewImage.CGImage scale:0.25f orientation:self.cl_PriviewImage.imageOrientation];
ScaledData = UIImagePNGRepresentation(ScaledImage); 
```

在这种情况下，没有错误，但我的目的没有实现，即上传的图像在比例/大小上没有改变。

**iOS 6**中还有其他方法吗？或者我在哪里错了？请给我建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:28:27.970

```
- (UIImage*) image:(UIImage *) image scaledToSize:(CGSize)newSize;
{
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 1);
    CGContextSetInterpolationQuality(UIGraphicsGetCurrentContext(), kCGInterpolationHigh);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

您也可以将此方法添加到`UIImage`类别中，这将是一个更好的解决方案。

# javascript - Opera浏览器更改禁用文本框的颜色

> ID：13067571
> 
> 赞同：1
> 
> 时间：2012-10-25T11:27:02.733
> 
> 标签：javascript, forms, html, textbox

我有一个文本框，我在单击按钮时禁用它

我的示例代码是：

```
var inputBox = document.getElementById("inputBox");
inputBox.value='';
inputBox.disabled=true; 
```

我在所有浏览器（chrome、mozilla、opera）中打开了我的文件，只有歌剧正在改变禁用文本框的颜色。有没有办法不将文本框更改为灰色或者它是歌剧的默认属性？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:45:21.853

更改禁用框的颜色是所有浏览器的默认行为，不是吗？您当前的 CSS 似乎正在重置所有其他浏览器的外观。我猜 Opera 是唯一一个将背景设置为灰色的。

搜索类似的东西

```
input:disabled{
  /*.. Some CSS Code..*/
} 
```

并将背景更改为所需的颜色。

```
input:disabled{
  /*.. Some CSS Code..*/      
  // Change to white...
  background-color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:35:34.420

无论歌剧的行为如何，您始终可以设置禁用按钮的样式 -

```
[disabled]{ background: gray; } 
```

# sql - Arel：如何在 arel speak 中写 attr = NULL？

> ID：13067573
> 
> 赞同：4
> 
> 时间：2012-10-25T11:27:03.647
> 
> 标签：sql, ruby-on-rails-3, activerecord, arel

我对 arel 有疑问：我想使用 Arel 强制执行类似“attr = NULL”的操作。Arel 允许我做这样的事情：

```
table = obj.arel_table # obj has attr
table[:attr].eq(nil) # returns ''objs'.'attr' IS NULL' 
```

这是公平的，因为在查询中这是正确的做法。但是在更新时，我希望能够将某些内容设置为 NULL，并且最好不必自己编写 SQL（AR 中的 update_all 不支持集合上的类似 ARel 的功能：objs.things.update_all(:created_at => nil ）。这打破了）。我基本上是在尝试在 update_all 调用中重复执行 arel 和 to_sql 功能的代码块。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-06T15:32:51.063

你只需要传递`nil`给`eq`：

```
table[attr].eq(nil) 
```

产生`where attr is not null`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-15T12:20:45.137

我知道做这样的事情的唯一方法是使用 SqlLiteral 类似的东西：

```
table[attr].eq(Arel::Nodes::SqlLiteral.new("NULL")) 
```

这将迫使 arel 跳过处理器`nil`并进行简单的相等

# php - codeigniter：我在数据库中有行（想像博客文章、标题、postbody 等）。有什么方法可以呈现表单+保存提交？

> ID：13067578
> 
> 赞同：0
> 
> 时间：2012-10-25T11:27:29.687
> 
> 标签：php, mysql, forms, codeigniter, edit

基本上我使用的是codeigniter，并且在数据库表的每一行中都有很多字段。

（对于这个例子，我将假装它是一个只有标题/帖子正文的博客条目，但这只是为了保持简单）

我知道我可以手动编写如下代码：

（伪代码）

```
if (!$submitted) {
   $data = get_existing_data_from_db();
$showform=true;
}
if ($submitted) {

   if (process_and_save_data_if_all_valid_data()) {

       echo "done";

   }
else {

$data = get_data_from_submitted_data();
$showform=true;

}

}

if ($showform) {

echo "<form>";
echo "<input type='text' name='title' value='{$data->title}' />";

} 
```

但是是否有任何 CI 类或库可以让我做更多的事情（再次，伪代码）

```
$fields_to_edit = array('title','postbody');
$this->form_helper->edit_table_with_fields('posts', $fields_to_edit); 
```

并且 form_helper 会自动验证（显然是 id 设置规则）+ 向用户显示表单，如果一切正确，则保存（更新 mysql）

代码igintor是否存在类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:13:35.337

此表单生成器可能会让您更轻松。[http://formigniter.org/](http://formigniter.org/)

我认为您正在寻找的是“codeigniter CRUD 生成器”，只需谷歌一下，您就会找到很多。选择一个取决于你。[例 1](http://www.grocerycrud.com/)例[2](http://code.google.com/p/ci-scaffold/) ...

# android - 如何获取应用内购买数据

> ID：13067583
> 
> 赞同：1
> 
> 时间：2012-10-25T11:27:47.780
> 
> 标签：android, in-app-purchase

我将inappPurchase代码集成到我的android应用程序中。它工作正常，但我需要处理购买数据，因为如果用户在卸载后购买我的产品，几天后他再次安装在senario中，无需再次购买。为此如何处理数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:37:06.713

当用户卸载文件时，您放置的大部分数据都会被删除，因此基本上在手机或 SD 卡上以加密格式创建一个包含其帐户详细信息的文件或文件夹（最好使用手机存储）

但是如果用户在他的手机上恢复出厂设置，那么所有信息都将丢失

所以

创建一个网络服务并传递所有帐户信息，您可以使用电话 IMEI 号码作为唯一 ID 或使用用户的登录信息，这样即使他或她更换了手机，您也可以识别他或她。

或使用 Google 的 GCM 定位个人客户

编辑

雅还原是否有[Android 应用内计费 RESTORE_TRANSACTION 使用情况](https://stackoverflow.com/questions/11563796/android-in-app-billing-restore-transaction-usage)

但是，如果您没有使用内置，而是使用 paypal SDK 或其他一些方法，那么我们有上述选项怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:40:42.717

您应该在服务器端为每台设备维护所有购买数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:46:04.493

您必须使用 RestoreTransactions 功能来获取特定用户的购买数据。

```
mBillingService.restoreTransactions(); 
```

在 ResponseHandler.java 文件中，您将获得所有详细信息

```
public static void purchaseResponse(final Context context,
            final PurchaseState purchaseState, final String productId,
            final String orderId, final long purchaseTime,
            final String developerPayload, final String purchaseToken) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:50:42.983

每个用户帐户管理的项目每个用户帐户只能购买一次。当按用户帐户管理项目时，Google Play 会永久存储每个用户的每个项目的交易信息。这使您可以使用 RESTORE_TRANSACTIONS 请求查询 Google Play 并恢复特定用户已购买的商品的状态。

参考这个链接：

[http://developer.android.com/guide/google/play/billing/billing_admin.html](http://developer.android.com/guide/google/play/billing/billing_admin.html)

并阅读“选择购买类型”部​​分。

# android - 如果创建数据库的 android 应用程序随后被卸载，会发生什么情况？

> ID：13067585
> 
> 赞同：0
> 
> 时间：2012-10-25T11:28:01.457
> 
> 标签：android, database, sqlite, uninstallation

我开发并安装了一个创建 sqlite 数据库的 android 应用程序。如果我卸载此应用程序，数据库将自动删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:33:21.630

数据库是私有存储 ( /data/data/{package.name}/databases/db.file ) 中的文件，当您卸载应用程序时 /data/data/{package.name}/ 将被删除，或者用户关联到应用程序是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:39:14.657

是....
创建数据库后，它将位于`data/data/YourPackage/mydatabase.db`。
当您在模拟器或手机上安装应用程序时，它将在文件资源管理器中可见。
当您卸载应用程序时，此`mydatabase.db`文件将被删除，但如果您重新安装此应用程序，则会再次创建此数据库文件，并将在您的私人文件夹中可用。

**编辑**

假设您想在数据库（[SQLite](http://developer.android.com/reference/android/database/sqlite/package-summary.html)）中存储一些值，为此您需要创建一个类似的 java 类`MySQLiteHelper`，然后您可以简单地将值写入数据库。
如果您卸载您的应用程序，那么您的值和数据库将被删除，但如果您再次重新安装您的应用程序，那么您的数据库将再次创建，但之前的值将丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:33:49.990

我认为是这样，数据库将与您应用程序的私有文件夹中的所有文件一起删除:)

# codeigniter - 以 codeIgniter 样式查询

> ID：13067586
> 
> 赞同：1
> 
> 时间：2012-10-25T10:17:04.850
> 
> 标签：codeigniter

我有以下查询：

```
SET @sql = NULL ;
SELECT GROUP_CONCAT( DISTINCT CONCAT(  'select latitude,longitude,max(serverTime) as serverTime,', deviceID,  ' AS device from  d', deviceID,  '_gps' ) 
SEPARATOR  '  UNION ALL  ' ) 
INTO @sql 
FROM devices
WHERE accountID =2;
PREPARE stmt FROM @sql ;
EXECUTE stmt; 
```

有人可以帮我以 codeIgniter 风格编写上述查询....

另一件事是：以 1 和 2 格式编写查询有什么区别

```
1\. $query = $this->db->query('YOUR QUERY HERE'); 

 2\. $this->db->select("...");  
    $this->db->from(); 
    $this->db->where(); 
```

如果我们使用 2nd 样式，它会对性能有什么影响吗...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:51:58.883

嗯，这取决于你所说的性能。

在 PHP 端，它需要一点点处理（因为它必须通过数据库抽象库）。

在 SQL 方面，它没有任何区别。CodeIgniter 的活动记录类将编译 SQL 语句然后运行它，因此只要您正确编写语句，您最终会得到与之前相同的查询。

# sql - 使用目标列表上的值列表进行sql更新

> ID：13067593
> 
> 赞同：0
> 
> 时间：2012-10-25T11:28:30.653
> 
> 标签：sql, set, sql-update

我想使用值列表更新项目列表，例如：

```
$fruits = "apple,banana,orange";
$prices = "10,15,20";
$sql = "UPDATE stuff SET fruit =?? ($fruits) where price in ($prices) 
```

我知道“update x set a=b where c in (d)”部分有效，但我不知道我可以使用项目列表作为 b 的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:29:55.410

您可以使用`CASE`表达式：

```
UPDATE x
SET a = CASE c
           WHEN 'c1' THEN 'b1'
           WHEN 'c2' THEN 'b2'
           ...
        END
WHERE c in ('c1', 'c2', ...) 
```

# xml - 有没有办法从未转换的 XML 文件中获取 \r （回车）？

> ID：13067594
> 
> 赞同：4
> 
> 时间：2012-10-25T11:28:31.240
> 
> 标签：xml, xml-parsing

XML 规范声明这必须是处理任何“外部解析实体”的行为。但这也适用于元素内部的 CDATA 部分？为什么？有没有办法通过在解析器代码中添加 1/2 条件而不是更改`\r`为`&#13;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:39:08.100

情况确实如此。为什么？这是为了简化将处理 XML 文件输出的应用程序的生命周期——它们根本不需要担心换行符的格式，增加了应用程序的兼容性（考虑 Linux 和 Windows 之间简单文本编辑器的兼容性——它们几乎总是错误地显示文件，在 Windows 中最常见的是单行）。

当然，如果您出于任何原因需要未转换的 \r，则采用任何现有的 XML 解析器实现并对其进行修改是很简单的。在 tinyxml 中，您需要修改 TiXmlBase::ReadText() 函数，或者您可以获取它的旧版本，因为它曾经保持空白不变。

另一方面，从设计的角度来看，通过字符替换功能运行解析器输出并将所有“\n”替换为“\r\n”会更简洁。

当然，最好的办法是按原样使用输出，现在我无法想象任何需要这样做的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:46:55.223

CDATA 没有被命名为字符数据。处理您的情况的唯一优雅方法是编码为 Base64。

Base64 将所有 255 个可能的字符编码为 64 个可打印字符。在 64 个选项中获得 255 种可能性会使文本更大一些，但这将是您唯一的选择，除了将您的 XML 布局更改为类似

```
<TEXT>
  <CHAR>13</CHAR>
  <CHAR>255</CHAR>
</TEXT> 
```

但在我看来，这比`&#13;`你现在得到的更糟糕。

[http://www.ibm.com/developerworks/xml/library/x-cdata/](http://www.ibm.com/developerworks/xml/library/x-cdata/) 访问此站点以获取有关在 XML 中处理二进制数据的更多信息。

希望它可以帮助你。

# java - 如何避免从linkedin重复授权到同一个应用程序

> ID：13067601
> 
> 赞同：0
> 
> 时间：2012-10-25T11:29:02.037
> 
> 标签：java, oauth, linkedin, linkedin-j

```
final LinkedInOAuthService oauthService = LinkedInOAuthServiceFactory.getInstance().createLinkedInOAuthService(consumerKeyValue, consumerSecretValue);
LinkedInRequestToken requestToken = oauthService.getOAuthRequestToken(callbackUrl);
session.setAttribute("requestToken", requestToken);
String authUrl = requestToken.getAuthorizationUrl(); 
return new ModelAndView("redirect:" + authUrl); 
```

我正在使用上面的代码块让用户从 LinkedIN 向我的应用程序授予权限。 每次我将用户重定向到具有相同默认范围的**authURL**时，都会出现授权屏幕。无法弄清楚我是否在这里遗漏了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:46:52.793

您应该将 OAuth 端点从[https://www.linkedin.com/uas/oauth/authorize](https://www.linkedin.com/uas/oauth/authorize)更改为[https://www.linkedin.com/uas/oauth/authenticate](https://www.linkedin.com/uas/oauth/authenticate)。这应该适合你。

# cordova - 在手机上存储敏感数据有哪些选择？

> ID：13067606
> 
> 赞同：4
> 
> 时间：2012-10-25T11:29:28.313
> 
> 标签：cordova, sencha-touch-2

我即将使用 phonegap 和 sencha touch 为 ios 和 android 开发一个应用程序。该应用程序将存储敏感数据（个人详细信息），因此需要对其进行保护。据我所知，sencha 和 phonegap 没有任何加密库。理想情况下，我想用密码保护 sql lite 数据库，但我似乎找不到任何关于这是否可能的提及。

我发现的唯一选择是使用 javascript 即时进行加密，这是唯一的选择吗？有没有其他人这样做过？我很好奇应用程序如果必须即时加密/解密所有内容的响应速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:20:55.183

是的，据我所知，sencha 或 phonegap 没有提供加密机制，您需要即时进行加密......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T20:51:20.943

关闭应用程序后，localStorage 已加密且不可用。因此，您可以使用 SJCL 为运行时加密您的 localStorage。

更好的方法可能是使用 Oauth 并在需要时请求敏感数据。

但这不是特定的 Javascript 问题。一旦一个人拥有了应用程序、手机并访问了您的代码，这可能会发生在 Android 应用程序上。

您可以通过使用适当的白名单和 https 来最大限度地保护您。构建应用程序以供发布（而非调试）后，数据将尽可能保存。

你能指出一个你需要更多保护的场景吗？

最坏的情况是小偷

*   有电话
*   运行应用程序
*   可以向应用程序添加脚本以提取数据

# javascript - AngularJS 客户端 MVC 模式？

> ID：13067607
> 
> 赞同：72
> 
> 时间：2012-10-25T11:29:36.433
> 
> 标签：javascript, model-view-controller, client-side, angularjs, server-side

到目前为止，我主要使用,`Struts 2`技术栈来构建 Web 应用程序。关键是，提到的堆栈使用服务器端模式。Web 浏览器的主要作用仅限于请求/响应周期（+ 客户端验证）。数据检索、业务逻辑、布线和验证是服务器端的主要职责。`Spring``JQuery``MVC`

*我对AngularJS*框架有几个问题，这些问题的灵感来自我读过的以下引用：

* * *

来自[*AngularJS 教程*](http://docs.angularjs.org/tutorial/step_02)：

> 对于 Angular 应用程序，我们鼓励使用模型-视图-控制器 (MVC) 设计模式来解耦代码并分离关注点。

来自*[维基百科模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller)*：

> 模型-视图-控制器 (MVC) 是一种将信息表示与用户与之交互分离的架构。模型由应用程序数据和**业务规则**组成，控制器调解输入，将其转换为模型或视图的命令

* * *

*AngularJS*使用客户端`MVC`模式。所以我想没有其他选择可以以某种方式在客户端也包含验证逻辑？

**编写健壮的 AngularJS 应用程序的最佳方式是什么？客户端的 MVC 和服务器端的某种 MC（模型、控制器）？**

这是否意味着 MODEL 和 CONTROLLER 以一种方式重复（客户端/服务器）？

我知道我的问题有点奇怪，但我认为原因是，我在某种程度上习惯了传统的服务器端 MVC 模式。我确信有人已经完成了相同的过渡。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-25T13:47:21.997

这根本不是一个奇怪的问题——我一直在尝试将 Angular 推销给很多 Java 开发人员，他们会问这个问题。我在学习的时候自己问过（我还在学习，顺便说一句）

如果您采用您所描述的“传统”java webapp 并对其进行 Angular 化，您必须首先采用您的服务器并将其设为 RESTful API。删除 JSP 等。这实际上是 IMO 编写 Angular 应用程序的难点——正确获取 REST API。对我来说，决定哪些逻辑需要进入服务器的关键是**将其视为纯 api，暂时忘记它会有前端**。

这个问题真的帮助了我——如果有人试图保存给定的资源并且该资源没有有效数据，则没有前端可以告诉他们——他们直接访问 API，因此 API 需要拒绝它。因此，后端负责深度验证。这也适用于您的业务逻辑。假设有人只使用*API*，那么您的服务器需要做什么就很清楚了。

服务器还需要（可能）以 json 格式出售数据（我使用 Spring MVC + Jackson），因此它负责将模型暴露给 Angular，并与数据库进行通信。

那么 Angular 方面的 MVC 是什么？

*   **模型**：来自 REST API 的数据。如果 API 正在出售 JSON，那么这些对象将已经是 1 类 javascript 对象。
*   **视图**：HTML，以及需要操作 DOM 时的指令
*   **控制器**：（以及您从控制器中提取的自定义服务..）
    *   查询 REST API 并将视图所需的内容放在 $scope 上
    *   为指令提供回调以响应可能需要回调服务器的事件。
    *   验证：通常通过对指令的回调。 *可能会与您已经在服务器中放置的一些验证重叠*，但您不希望您的用户等待服务器验证所有内容 - 客户端应该知道*一些*关于验证的信息以便给用户即时反馈。
    *   业务逻辑：与验证几乎相同。

但是为什么在客户端和服务器中存在重复的逻辑呢？主要是因为您不是在编写一个应用程序，而是在编写两个独立的东西：

1.  一个 REST API，需要在没有前端的情况下保持健壮和可用
2.  需要立即向用户提供反馈而不必等待服务器的 GUI。

所以，简短的回答 - 通过忘记会有一个 UI 来获得正确的 REST API，并且进入 Angular 的内容会更加清晰。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-25T13:55:29.067

我认为术语“业务逻辑”在这里有点用词不当。客户端应用程序的“业务”是处理用户界面的业务。它不会是诸如安全规则和专有逻辑或其他敏感知识产权之类的东西。

所以在 Angular 中，划分是（通常）：

*   **控制器**（controller）：用于操作 UI 背后的数据（范围）。
*   **指令**：用于设置 DOM 以通过范围与控制器进行通信，*以及*用于操作 DOM。
*   **模板**（视图）：将指令分配给 DOM 的元素。
*   **范围**（模型或视图模型）：用于在系统的所有部分之间承载数据。
*   **服务**：可注入、可重用的代码。通常用于处理 Ajax、cookie 或其他 I/O 等依赖项。

它实际上几乎是 MVVM 而不是 MVC。

至于您的“业务”逻辑或规则……任何需要安全的东西都必须始终在服务器级别进行保护。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-18T18:43:11.003

重要的是要理解，在 MVC 模式的某些版本中，*数据*以及*操作*数据的逻辑都驻留在“模型”层中（“控制器”层除了绑定什么都不做）。然而，在 AngularJS 中，数据（$scope）单独驻留在“模型”层中，而操作数据的逻辑（$scope）驻留在“控制器”层中。

![AngularJS](../Images/66904bad003f8066312804442124410c.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-28T09:49:48.933

我喜欢@Roy TrueLove 所说的话。但是让我说这是使用 angularjs 的终极方式。当然，如果你想获得 Angular 的最大好处，你必须学会​​用这种方式来做你的应用程序。我祈祷有一天能在那里。

同时，在你学习的过程中，以及在你过渡到完全使用 angularjs 作为你的客户端主要做事方式的过程中，你可以开始到处使用它来完成一些小任务，并逐渐习惯它和它的方式。思维。

我鼓励逐渐拥抱它，慢慢地慢慢走，但我保证，当然。

Angularjs 旨在服务于这种方法，因为它可以处理最小的任务，也可以处理最大的任务。例如，我第一次使用 angular 只是为了在用户键入 id 时显示名称。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-10T13:00:54.137

我同意这里的答案。还有一些评论。当您编写应用程序时，您首先需要专注于问题域。并创建一些真实业务的软件模型。例如，如果您的问题域是购物，您需要建模的一些需求可能包括：

*   信用卡应该是有效的。
*   如果您使用品牌 X 的信用卡付款，您将获得 10% 的折扣。
*   购物车应至少包含一项以执行结帐
*   商品必须有库存才能让用户将它们添加到购物车

这些需求的实现将为您的问题域建模，这是您的业务逻辑。

Angular 是一个前端框架和工具包。它是一个*网络*前端。如果您在 Web 前端实现此功能，您将错过从其他前端或界面（如移动或桌面应用程序）重用模型的机会。因此，理想情况下，您的业务逻辑实现需要与任何用户界面框架分离，也需要与任何持久性框架分离。然后，您将拥有将处理用户界面问题并与您的业务逻辑对象通信的界面对象。这可以是 Spring MVC 控制器，和/或 Angular 控制器或服务。

您可以查看一个[示例应用程序，它遵循此处提到的原则。](http://www.copypasteisforword.com/notes/angularjs)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-21T00:50:12.900

我似乎也有这个问题，因为一些组织只是热衷于新技术——“我想要云……等等，我想要轻量级”，很难证明它是否值得转向更轻量级的框架。

我一直使用 Spring/JBoss seam/JSF 和 MVC 框架开发 Web 应用程序。大多数情况下，java 脚本将驻留在表示层验证中，而主要的操作类/实体和业务逻辑将驻留在 Java 代码中。在对 Angular 进行了一些基本的实践之后，我开始理解 MVC 的含义，因为他们在表示层上抽象了另一个层次，我们可以在前端拥有自己的视图和控制器。要回答您的问题，就像每个人的评论一样，最好的方法是将其放在表示层上。

至于安全角度，我认为繁重或敏感的业务规则应该驻留在服务器端，因为我们不想将其暴露给世界。如果业务逻辑开发不好，很容易找到我们代码的弱点并加以利用。

这是我对像 Angular 这样的框架的想法，就像一个小商店/SOHO 处理客户，他们有几个人，非常高效和快速。他们很好地满足了面临业务和高效交付/接收货物的客户（REST，JSON）。他们确实有指定的角色和任务，但有些工人执行的不仅仅是任务。这家商店也容易受到小偷或强盗的攻击，因为他们通常不强调严密的安全性。

至于像 Spring/Struts 2 这样的服务器端框架，想象一个现代公司（CMM 5 级），具有不同的管理水平并能够处理更大的业务（批处理作业、Web 服务、企业总线）。他们确实与客户打交道，但不是直接的，经常通过经纪人甚至零售店。安全方面，公司更强大，通常前门有证券，或重要信息被保护在保险箱中（加密/登录）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-19T06:45:38.397

我的方法始终是自下而上的方法。从数据库设计开始，在需要时使用正确构造/相关的表和存储过程，然后将实体框架添加到解决方案中，或者如果不能选择 EF，则使用 ADO.Net。然后开发业务逻辑和模型以将数据输入和输出数据库。

建立模型后，我们现在可以走两条路线：开发 MVC 控制器和/或开发 WebAPI 控制器。两个控制器都可以访问模型，这只是实例化类和调用方法的问题。

您现在可以选择设置由 MVC 控制器控制的 MVC 视图，或者完全独立的 HTML 页面集或 SPA（NodeJS 上托管的单页应用程序）。

对于完全独立的 HTML 页面集，您将需要使用 WebAPI 控制器，以及 Get、Post、Put 和 Delete 方法，并确保来回包含令牌以识别您的客户端，并启用 CORS（用于跨域请求)

使用 MVC 视图，您可以使用控制器属性和/或会话来识别您的客户端，而无需担心 CORS，如果需要，您甚至可以将视图设为强类型。不幸的是，如果您有一组 UI 开发人员，他们将不得不使用相同的 MVC 解决方案。

在这两种情况下，您都可以使用 AngularJS 在控制器之间来回传输数据。

恕我直言，AngularJS 控制器的概念与 C# MVC 或 C# WebAPI 控制器不同。AngularJS 控制器包含所有 javascript 逻辑以及通过“ApiFactory”对端点的调用，而 C# 控制器只不过是服务器端接受和响应 UI 请求的端点。

# smack - SMACK：如何监听用户可用性状态变化？

> ID：13067610
> 
> 赞同：4
> 
> 时间：2012-10-25T11:29:42.893
> 
> 标签：smack, asmack

如何订阅以收听 SMACK 中的用户可用性状态更改？

要获取用户的可用性状态，我使用以下命令：

```
XMPPConnection.getRoster().getPresence(name).isAvailable(); 
```

但是如何订阅以便在状态更改时收到一些通知？（所以我不必投票）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T20:45:01.593

[您为 Roster 和 Presence 更改设置了一个侦听器](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/roster.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-17T09:33:40.813

此代码可以帮助您：

```
roster.addRosterListener(new RosterListener() {
                // Ignored events public void entriesAdded(Collection<String> addresses) {}
                public void entriesDeleted(Collection<String> addresses) {}
                public void entriesUpdated(Collection<String> addresses) {}
                public void presenceChanged(Presence presence) {
                    System.out.println("Presence changed: " + presence.getFrom() + " " + presence);
                }
                @Override
                public void entriesAdded(Collection<String> arg0) {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-03T11:09:42.113

```
roster.addRosterListener(new RosterListener() {
            // Ignored events public void entriesAdded(Collection<String> addresses) {}
            public void entriesDeleted(Collection<String> addresses) {}
            public void entriesUpdated(Collection<String> addresses) {}
            public void presenceChanged(Presence presence) {

                Log.e(TAG, presence.getStatus());
                    Log.e(TAG,presence.getFrom());
                    Log.e(TAG, presence.getLanguage());
                    Log.e(TAG,presence.getDefaultLanguage());
                    Log.e(TAG, presence.getType().toString());
            }
            @Override
            public void entriesAdded(Collection<String> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

# javascript - 我的总结果中未计算小数

> ID：13067611
> 
> 赞同：0
> 
> 时间：2012-10-25T11:29:47.503
> 
> 标签：javascript, decimal, calculator

为什么在我的[jsfiddle](http://jsfiddle.net/Manna/CSkLu/23/)中，BASE`#subtotal`不是用小数计算的，如果你尝试在数字中输入一个带小数的数字（点击数字，它是可编辑的），BASE不会将结果与小数相加

这是我编辑的代码

```
$('#subtotal').html(total.toFixed(2));
var vat = parseFloat((0.21 * total).toFixed(2));  
var irpf = parseFloat((0.15 * total).toFixed(2)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:33:24.123

你有一条线

```
total += parseInt($(this).text()); 
```

总计是一个整数......所以没有小数。

`parseFloat`如果您需要 int 结果，请替换该行，或者使用另一个 var。

[更新了 jsFiddle](http://jsfiddle.net/CSkLu/24/)

# python - 从对象列表中获取属性的最大值

> ID：13067615
> 
> 赞同：53
> 
> 时间：2012-10-25T11:29:54.943
> 
> 标签：python, list, attributes, max

我有这个具有 ax 和 ay 参数（以及其他一些东西）的对象列表。

```
path.nodes = (
    <GSNode x=535.0 y=0.0 GSLINE GSSHARP>,
    <GSNode x=634.0 y=0.0 GSLINE GSSHARP>,
    <GSNode x=377.0 y=706.0 GSLINE GSSHARP>,
    <GSNode x=279.0 y=706.0 GSLINE GSSHARP>,
    <GSNode x=10.0 y=0.0 GSLINE GSSHARP>,
    <GSNode x=110.0 y=0.0 GSLINE GSSHARP>,
    <GSNode x=189.0 y=216.0 GSLINE GSSHARP>,
    <GSNode x=458.0 y=216.0 GSLINE GSSHARP>
) 
```

我需要有这个列表的最大值。虽然，我试过这个：

```
print(max(path.nodes, key=y)) 
```

我得到这个错误：

```
NameError: name 'y' is not defined 
```

我对 Python 有点陌生，[文档](http://docs.python.org/library/functions.html#max)没有给我任何线索。我认为我在关键字上做错了，因为如果像这样遍历节点：

```
for node in path.nodes:
    print(node.y) 
```

我会得到 y 的值。有人可以给我一个解释吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-25T11:32:29.730

要获得最大值而不是整个对象，您可以使用生成器表达式：

```
print(max(node.y for node in path.nodes)) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-25T11:31:20.090

有一个内置的帮助解决这种情况。

```
import operator

print(max(path.nodes, key=operator.attrgetter('y'))) 
```

或者：

```
print(max(path.nodes, key=lambda item: item.y)) 
```

编辑：但是 Mark Byers 的回答是最 Pythonic 的。

```
print(max(node.y for node in path.nodes)) 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-10-17T17:46:50.223

何时使用“Pythonic”样式 #1 与 lambda 样式 #2 有一个重要区别：

```
max(node.y for node in path.nodes)  # (style #1) 
```

相对

```
max(path.nodes, key=lambda item: item.y)  # (style #2) 
```

如果您仔细观察，您会发现样式 #1 返回属性的最大值，`y`而样式 #2 返回`node`具有最大值的属性`y`。这两个不相同，如果您想要迭代属性值或迭代拥有该属性的对象，代码用法很重要。

例子：

```
class node():
    def __init__(self,x):
        self.x = x
        self.y = self.x + 10

node_lst = [node(1), node(2), node(3), node(4), node(5)]
print([(e.x,e.y) for e in node_lst])

>>> [(1, 11), (2, 12), (3, 13), (4, 14), (5, 15)] 
```

现在：

```
maxy = max(node.y for node in node_lst)
print(maxy)
>>> 15

max_node = max(node_lst, key=lambda node: node.y)
print(max_node.y)
>>> 15 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-25T11:31:20.007

```
from operator import attrgetter
print(max(path.nodes, key=attrgetter("y"))) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-29T19:38:00.693

也可以为`__gt__`对象实现比较运算符，而不是在`max`没有键函数的情况下使用：

```
class node:
    def __init__(self, y):
        self.y = y
    def __gt__(self, other):
        return self.y > other.y 
```

而不是类似的东西：

```
ls = [node(3), node(5), node(11), node(0)]
print(max(ls).y) 
```

应该输出*11*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T11:33:00.213

`y`未定义为变量；它是单个`GSNode`对象的属性；您不能单独将其用作名称。

要访问各个属性，您可以使用类似`key=lambda x: x.y`或`attrgetter()`来自`operator`模块的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-15T12:24:00.197

*如果`y`是一个属性属性*，那么你甚至不需要 import `operator.attrgetter`。您可以改用[`fget`](https://docs.python.org/library/functions.html#property)方法：

```
my_node = max(path.nodes, key=Node.y.fget) 
```

这将返回`Node`从哪里获得最大值的实例`y`只是`my_node.y`

# jinja2 - 在 Jinja 上显示递归内容

> ID：13067618
> 
> 赞同：1
> 
> 时间：2012-10-25T11:30:08.203
> 
> 标签：jinja2

我想在网页中显示字典的内容。字典结构是递归的。我不能让它像那样工作。相反，我必须“手动展开”递归。可能，我没有正确理解文档。

不使用递归的代码（并且有效）。

```
{% extends "base.html" %}
{% block body %}
<form action="">
{% for account in account_list['account_list'] %}
<ul>
    <input type="checkbox" id="{{ account['id'] }}" value="{{ account['name'] }}" type="{{ account['type'] }}"> {{ account['name'] }} <br>
    {% for key, value in account.items() %}
        {% if value is not string %}
            {% for acc in value %}
                {% if acc is mapping %}
                    <ul> 
                        <input type="checkbox" id="{{ acc['id'] }}" value="{{ acc['name'] }}" type="{{ acc['type'] }}"> {{ acc['name'] }} <br>
                        {% for ke, va in acc.items() %}
                            {% if va is not string %}
                                {% for ac in va %}
                                    {% if ac is mapping %}
                                        <ul>
                                            <input type="checkbox" id="{{ ac['id'] }}" value="{{ ac['name'] }}" type="{{ ac['type'] }}"> {{ ac['name'] }} <br>
                                        </ul>
                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
</ul>
{% endfor %}
</form>
{% endblock %} 
```

带有递归的代码，但它不起作用。

```
{% extends "base.html" %}
{% block body %}
<form action="">
{% for account in account_list['account_list'] %}
<ul>
    <input type="checkbox" id="{{ account['id'] }}" value="{{ account['name'] }}" type="{{ account['type'] }}"> {{ account['name'] }} <br>
    {% for key, value in account.items() recursive %}
        {% if value is not string %}
            {% for acc in value %}
                {% if acc is mapping %}
                    <ul> 
                        <input type="checkbox" id="{{ acc['id'] }}" value="{{ acc['name'] }}" type="{{ acc['type'] }}"> {{ acc['name'] }} <br>
                        {% loop(acc.items()) %}
                    </ul>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
</ul>
{% endfor %}
</form>
{% endblock %} 
```

相关文档： http: [//jinja.pocoo.org/docs/templates/](http://jinja.pocoo.org/docs/templates/)（查找递归）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:44:06.970

变量`loop`总是指最内层（最近）的循环。在这里，它指的是循环`{% for acc in value %}`。为了引用外部循环，我们应该在`{% for key, value in account.items() recursive %}`循环之后立即重新绑定它，通过编写如下内容：

```
{% set outer_loop = loop %} 
```

然后，我们得到想要的结果，通过使用

```
outer_loop(acc.items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:53:46.313

您*可能*需要更改`{% loop(acc.items()) %}`为简单`{% loop(acc) %}`的，因为外部循环需要映射，而不是列表（并且调用`.items`列表将导致错误。）

如果更改调用*确实*解决了问题，那么我将在 Jinja2 项目中提交一个错误 - 这*应该*会因错误而爆炸，而不是默默地吞下它（因为`acc.items` *将*是一个可迭代的）。

# android - 从没有特定索引或字符串键的意图中提取所有数据

> ID：13067622
> 
> 赞同：1
> 
> 时间：2012-10-25T11:30:14.443
> 
> 标签：android, android-intent

我正在尝试从来自其他应用程序的 SHARE BUTTON 的 Intent 中提取数据。不管是文本还是更复杂的数据。例如，我想在不知道 Android 联系人应用程序使用的密钥的情况下提取从联系人应用程序共享的数据到我的应用程序。

是否有循环或迭代 Intent 的方法，我尝试使用`for`循环并通过`intent.getExtras(n)`但它给了我空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:06:32.047

```
Bundle extras = intent.getExtras();
if (extras != null){
   Log.d("EXTRAS", extras.toString());
} 
```

我已经更新了示例，这样更容易理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:18:16.673

试试这个：

```
getIntent().getExtras().get("android.intent.extra.STREAM")
getIntent().getClipData() 
```

在我的设备上，这些对象是：

```
getIntent().getExtras().get("android.intent.extra.STREAM") = {android.net.Uri$HierarchicalUri@830027572808}"content://com.android.contacts/contacts/as_vcard/2574i5f5fc0900f5c945c"

getIntent().getClipData() = {android.content.ClipData@830027557696}"ClipData { text/x-vcard {U:content://com.android.contacts/contacts/as_vcard/2574i5f5fc0900f5c945c} }" 
```

如果你得到类似的东西，这是 URI，所以这是你的联系人。如何从这个 uri 中提取数据是另一个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T11:32:51.583

您可以启用调试器，在指令上设置断点，然后查看 Intent extra 在指定时间包含的内容。

或者你按照你说的做，然后循环，直到你得到一个 NullPointerException。

# android - 更改精灵和引擎的图像

> ID：13067627
> 
> 赞同：2
> 
> 时间：2012-10-25T11:30:30.950
> 
> 标签：android, andengine

嗨，我正在使用 Andengine 制作游戏应用程序

因为我想在单击该精灵时更改精灵的背景图像。任何机构都可以帮助我如何做到这一点。

```
this.mFaceTextureRegionBackOn = TextureRegionFactory.extractFromTexture(this.mTextureBackOn);
this.mFaceTextureRegionBackOff = TextureRegionFactory.extractFromTexture(this.mTextureBackOff);

final ButtonSprite back = new ButtonSprite(centerXBack, centerYBack, this.mFaceTextureRegionBackOn, this.getVertexBufferObjectManager());
scene.attachChild(back);
back.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(ButtonSprite arg0, float arg1, float arg2) {
        MainActivity.this.mFaceTextureRegionBackOn = TextureRegionFactory.extractFromTexture(MainActivity.this.mTextureBackOff);
    }
}); 
```

当我单击该按钮时有一个精灵按钮，我正在更改它的纹理区域，但它无法帮助我更改该精灵的图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:34:55.847

AndEngineExamples 中有类似的用法，见[https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/UpdateTextureExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/UpdateTextureExample.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:39:48.650

为什么不能只创建两个精灵并切换它们的可见性？我以这种方式打开/关闭声音按钮：

```
soundOnBtn = new Sprite(TILE_SIZE/2, 0, TILE_SIZE, TILE_SIZE, gameResources.getSoundOnTR())
    {
        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY)
        {
            soundOn = !soundOn;
            soundOnBtn.setVisible(soundOn);
            soundOffBtn.setVisible(!soundOn);
            return true;
        }
    };
    mainScene.registerTouchArea(soundOnBtn);
    soundOffBtn = new Sprite(TILE_SIZE/2, 0, TILE_SIZE, TILE_SIZE, gameResources.getSoundOffTR());
    soundOffBtn.setVisible(false);
    bottomPanelLayer.attachChild(soundOnBtn);       
    bottomPanelLayer.attachChild(soundOffBtn); 
```

# c# - 套接字通信需要很长时间

> ID：13067629
> 
> 赞同：0
> 
> 时间：2012-10-25T11:30:34.943
> 
> 标签：c#, sockets

我在计算机和服务器之间的 Socket 通信上有问题。发生的情况是，仅当我单击特定按钮时，我才通过套接字建立通信。在第一次沟通中，一切都发生得很完美。如果我再次单击，则不会执行代码。我放了一个断点来查看发生了什么，并看到在给定的行上，他只是在尝试执行该行，但是执行了很长时间。（我总是传递相同的参数）。

**长时间处理的线路**

`serverStream.Read(inStream, 0, (int)clientSocket.ReceiveBufferSize);`

**客户代码**

```
 private void Form1_Load(object sender, EventArgs e)
    {
        msg("Client Started");
        clientSocket.Connect("server_ip", 8855);
        //clientSocket.Connect("127.0.0.1", 8873);
        label1.Text = "Client Socket Program - Server Connected ...";
        this.imprimir();
    }

    protected void imprimir()
    {
        NetworkStream serverStream = clientSocket.GetStream();
        byte[] inStream = new byte[10025];

        //// LINE THAT PROCESS FOR A LONG TIME IN THE SECOND TIME.
        serverStream.Read(inStream, 0, (int)clientSocket.ReceiveBufferSize);

        string returndata = System.Text.Encoding.ASCII.GetString(inStream);
        int ponto = returndata.IndexOf('.');
        returndata = returndata.Substring(0, ponto);
        string[] quebraretorno = returndata.Split(';');

        ServiceReference1.bematechSoapClient bema = new ServiceReference1.bematechSoapClient();
        string r = bema.InformacoesImovelBematech(quebraretorno[0], quebraretorno[1]);
        int retorno = -1;

        retorno = IniciaPorta("COM7");

        if (retorno == 1)
        {
            ConfiguraModeloImpressora(7);
            BematechTX(r);
            AcionaGuilhotina(1);
            FechaPorta();
        }

        clientSocket.Close();
    } 
```

**服务器代码**

```
 public void btnImprimeBematech_Locacao()
        {
            Utilidade.QuebraToken tk = new Utilidade.QuebraToken();
            int Credenciada = Convert.ToInt32(tk.CarregaToken(1, HttpContext.Current.Request.Cookies["token"].Value));
            TcpListener serverSocket = new TcpListener(8855);
            int requestCount = 0;
            TcpClient clientSocket = default(TcpClient);
            serverSocket.Start();
            clientSocket = serverSocket.AcceptTcpClient();

            requestCount = 0;

            while ((true))
            {
                try
                {
                    requestCount = requestCount + 1;
                    NetworkStream networkStream = clientSocket.GetStream();
                    string serverResponse = Request.QueryString["id"] + ";" + Credenciada.ToString() + ".";
                    Byte[] sendBytes = Encoding.ASCII.GetBytes(serverResponse);                          
                    networkStream.Write(sendBytes, 0, sendBytes.Length);
                    networkStream.Flush();                    
                }
                catch (Exception ex)
                {                    
                }
            }

            clientSocket.Close();
            serverSocket.Stop();            
        } 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:55:38.350

似乎在第一次通信时，服务器接受了一个新的套接字并进入了 while 循环。但是在第二次通信期间，它不会返回到 serverSocket.AcceptTCPClient() 即不会退出 while 循环并且不接受任何新套接字。

您需要编辑服务器端代码，以便在当前连接的套接字断开连接时返回到 AcceptTCPClient()（只需添加另一个循环）。并且您需要为已有的 While 循环提供退出条件。

```
 TcpClient clientSocket = default(TcpClient);
            serverSocket.Start();

            while(True)
           {
                clientSocket = serverSocket.AcceptTcpClient()
                requestCount = 0;
                while ((clientSocket.Connected == true))
                {
                  try
                  {
                    requestCount = requestCount + 1;
                    NetworkStream networkStream = clientSocket.GetStream();
                    string serverResponse = Request.QueryString["id"] + ";" + Credenciada.ToString() + ".";
                    Byte[] sendBytes = Encoding.ASCII.GetBytes(serverResponse);                          
                    networkStream.Write(sendBytes, 0, sendBytes.Length);
                    networkStream.Flush();                    
                  }
                  catch (Exception ex) { }
                }
           } 
```

# asp.net - 谷歌地图业务搜索

> ID：13067632
> 
> 赞同：-2
> 
> 时间：2012-10-25T11:30:46.323
> 
> 标签：asp.net, html, google-maps-api-3, html-helper

我正在为客户建立一个网站，他想要一个搜索功能，这样您就可以查看英国的所有扑克场所，我认为这将非常简单，因为它都位于谷歌地图搜索周围，我正在努力。

基本上，我追求的是与此相同的东西；

[http://www.redtoothpoker.com/league.asp](http://www.redtoothpoker.com/league.asp)

我可以从哪里开始的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:47:23.220

Google 地图是您包含在任何页面中的 javascript 库，现在您可以从 google 中包含简单的搜索。

你可以从这里做：[http ://www.gmodules.com/ig/creator?synd=open&url=http%3A//www.gstatic.com/ig/modules/mapsearch/localsearch_v2.xml&pt=%26context%3Dd %26type%3Dgadgets%26synd%3Dig%26lang%3Den%26.lang%3Den%26country%3Dnl%26.country%3Dnl%26start%3D0%26num%3D1%26target%3DytxS%26objs%3D&sn=&lang=en](http://www.gmodules.com/ig/creator?synd=open&url=http%3A//www.gstatic.com/ig/modules/mapsearch/localsearch_v2.xml&pt=%26context%3Dd%26type%3Dgadgets%26synd%3Dig%26lang%3Den%26.lang%3Den%26country%3Dnl%26.country%3Dnl%26start%3D0%26num%3D1%26target%3DytxS%26objs%3D&sn=&lang=en)

并在您的页面中嵌入代码。

而你有更复杂的部分，如果你的数据库中有自己的数据并且你想要进行自定义查询，那么这个部分。

正如我看到你有 .asp 页面，所以我假设你在 MSSQL 中使用 asp，首先你需要在这个结构中创建你的数据结构和搜索查询，当客户来到你的网站并搜索时，你必须通过拨打电话ajax 到数据库检索所有“扑克场所”记住你需要这些地方的地址，在 Javascript 中设置它们并将它们推送到地图。

最佳起点在这里：[https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

谷歌地图需要基本的 html 和 javascript 知识。

快乐编码！:)

# android - 我在图像按钮上看不到文字？

> ID：13067637
> 
> 赞同：-6
> 
> 时间：2012-10-25T11:31:09.587
> 
> 标签：android, text

> **可能重复：**
> [如何在 ImageButton 上显示文本？](https://stackoverflow.com/questions/4457030/how-to-show-the-text-on-a-imagebutton)

xml有什么问题，我在按钮上看不到我的文字

```
 <ImageButton
    android1:id="@+id/btnShowLocation"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignParentBottom="true"
    android1:layout_centerHorizontal="true"
    android1:contentDescription="@string/empty"
    android1:layout_marginBottom="40dp"
    android1:src="@drawable/blue_button"
    android1:background="@null"
    android1:text = "@string/here_and_now"
    android1:textColor="@string/black_color"
    android1:gravity="center"
   /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:32:52.117

您不能`android:text`用于 ImageButton。所以只需使用一个按钮并为其设置背景。

例如：

```
<Button 
   android1:id="@+id/btnShowLocation"
   android:layout_height="wrap_content"
   android:layout_width="wrap_content"
   android:layout_gravity="center"
   android:padding="10dp"
   android1:text = "@string/here_and_now"
   android:background="@drawable/blue_button"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T11:37:09.287

我在 ImageButton 标记下找不到 android:text 属性。

您应该使用按钮并使用“背景”属性将图像放在按钮上。

```
<Button android:id="@+id/friendsListButton" android:gravity="center"
        android:layout_height="wrap_content" android:layout_width="wrap_content"
        android:text="@string/friendsListScreen" android:background="@drawable/blue_button"/> 
```

如果您想要按钮上的图像，只需按上述定义即可。

# sql - SQL 将一列与另一表列连接起来

> ID：13067646
> 
> 赞同：0
> 
> 时间：2012-10-25T11:31:50.053
> 
> 标签：sql, sql-server, join

我正在创建一个表，我有一个像 NAME 这样的字段，我想将这个 NAME 与另一个表列名加入我该怎么做？

```
 create table History_Table
(
  TempID int FOREIGN KEY REFERENCES SV_templates(TemplateID),
  Name varchar(50) ????
  RunDate datetime,
  RunBy varchar(50)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:33:28.607

```
select * 
from History_Table H
join another_table T
on H.Name=T.Name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:29:18.433

首先，想想你想要的结果是什么数据。我们有很多选择：

1.  如果您想要两个表中的数据，那么您可以使用`INNER JOIN`.

    ```
    SELECT *
    FROM History_Table AS A INNER JOIN OTHER_TABLE AS B ON A.NAME = B.NAME 
    ```

2.  如果您想要第一个表的所有记录，那么您可以使用`LEFT OUTER JOIN`.

    ```
    SELECT *
    FROM History_Table AS A LEFT OUTER JOIN OTHER_TABLE AS B ON A.NAME = B.NAME 
    ```

# c# - 访问测试类中的方法（缺少指令或程序集引用）？

> ID：13067647
> 
> 赞同：2
> 
> 时间：2012-10-25T11:31:54.577
> 
> 标签：c#, methods, static, void, accessor

我只是在我的基础 c# 编程中，我目前遇到了以下问题。

我不断收到错误消息“缺少指令或程序集引用。

测试类：

```
public void method1()
{
      //forwhile loop

      int num = 0;

      while(1<11)
      {
      Console.Write ("The num is ");

      Console.WriteLine (num);

      num++;
      }
} 
```

主类：

```
static void main(string[] args)
{
      method1 mtd = new method1();
      mtd.method1();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:41:37.343

*   `new`运算符从不用于方法名称。它与类名一起用于创建其对象。

    ```
    method1 mtd = new method1(); // WRONG 
    ```

代替`method1`你应该使用它所在的类。

*   您的 while 条件不正确，（是类型）

    ```
    while(1<11) // WRONG 
    ```

它应该是`while(num < 11)`

您的所有方法都应包含在类中。我想，您将方法与类混淆了。

例如：

```
class MainClass
{
    public static void Main(string[] args)
    {
        // implementation
    }
} 
```

`MainClass`是类，`Main`是其中的一个方法。你可以做`new MainClass()`，但永远做不到`new Main()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:37:35.957

您不能创建方法的对象。

这样做： -
**测试类：**

```
public class Test
{ 
    public void method1()
    {
       //forwhile loop

       int num = 0;

      while(1<11)
      {
      Console.Write ("The num is ");

      Console.WriteLine (num);

      num++;
      }
   }
} 
```

**主类：**

```
static void main(string[] args)
{
      Test obj = new Test();
      obj.method1();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:04:38.533

您不能在方法上使用“新”关键字。'new' 关键字用于创建类的实例。

您可以将方法放在类（Test）中，并在“main”中创建该类的实例（t），并使用该实例（t）调用该方法：

```
public class Test

 {

   public void method1()

   {

      int num = 0;

      while(1<11)
      {
        Console.Write ("The num is ");

        Console.WriteLine (num);

        num++;
      }
    }
 }      

static void main(string[] args)
{
   Test t = new Test();
   t.method1();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:36:15.183

你需要做：

```
ClassName cls = new ClassName();
cls.Method1(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T11:44:42.043

您在 while 中使用了错误的条件

```
while(1<11) //this is wrong
while(num<11) //this is right .. 
```

试试这个

# .net - 实体框架架构中的有界 (Db) 上下文

> ID：13067650
> 
> 赞同：5
> 
> 时间：2012-10-25T11:32:23.297
> 
> 标签：.net, entity-framework, architecture, domain-driven-design

我刚刚观看了 Julie Lermans 关于在 EF 中使用有界上下文的视频（http://www.pluralsight.com/training/Courses/TableOfContents/efarchitecture），我现在正在尝试找出实现它的最佳方法（使用 POCO） . 我看到的两个选项是要么拥有一个定义所有内容的 edmx 模型，然后手工制作 DbContexts 以包含适当的实体，要么为每个上下文拥有单独的 edmx 模型并使用自动创建的 DbContexts。

有没有人知道哪个是最好的或任何一个的优点/缺点？

恕我直言：对于单个模型，它的类要少得多，代码重用要多得多（尽管这些类是自动创建的，所以实际上它只会是手动复制的额外功能），但我会有很多一个地方的类和需要专门化的类，每个类都必须有不同的名称。例如，客户、客户功能 X、客户功能 B。

使用单独的模型，我可以对上下文中的内容更加严格，因为删除属性不需要是一个全新的实体，并且我可以根据需要命名所有内容（即所有模型都可以使用 Customer 对象，即使它在模型之间有所不同），但现在每个上下文都有完全不同的实体，即使它们都只是映射到同一个表 - 这也可能使在上下文之间传递它们变得更加困难（但这不应该经常需要，否则它表示上下文定义错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:45:13.830

我们现在正在讨论这个确切的问题，我也看过 Julies 的视频以及研究 DDD。我希望我的数据访问能够反映工作单元，但我们遇到了一个表名不能在多个 EDMX 中使用的问题。

假设我有表 Customer、CustomerOrder、Order、OrderInventory、Item。在一个屏幕上，我只想显示客户信息，因此我的 EDMX 只有客户。现在另一个用例是我为一个客户开出所有发票，在这个用例中我有 Customer、CustomerOrder、Order、OrderInventory 和 Item。我们得到这个例外：CLR 类型到 EDM 类型的映射不明确，因为多个 CLR 类型与 EDM 类型“客户”匹配。以前找到 CLR 类型“A.Customer”，新找到 CLR 类型“B.Customer”。

你们是如何解决这个错误消息的？您是否要重命名在所有 EDMX 文件中重复的每个表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:55:29.457

我也在尝试有界上下文，并且遇到了模式的（小？）问题。我最初创建了两个上下文，一个用于域数据，一个用于审计类型数据（实体更改审计信息和流程信息）。最初，我发现数据库只从一个上下文创建表而忽略了另一个。我假设从基本上下文派生这两个上下文，

```
 public class BaseContext<TContext> : DbContext where TContext : DbContext 
```

会生成完整的数据库，但似乎没有这样做。

解决此问题的一种方法是创建一个引用所有实体的“主”上下文，但不将其公开给模型。这工作正常，但现在 db 模式存在一个小问题。

由于我们的支持人员使用 SSMS 来调试系统，我认为按照与有界上下文相同的方式更改架构是一个好主意，因此我在主上下文中指定了架构（OnModelCreating() 覆盖方法与主语境）：

```
 modelBuilder.Entity<Address>()
            .HasKey(b => new {b.AddressId,b.EffectiveStartDate})
            .ToTable("Addresses", "Esr"); 
```

其中“Esr”是架构。但是，在尝试使用有界上下文写入数据时，会发生错误，表明有界上下文正在使用“dbo”模式。我确信有办法解决这个问题。我确实有一种唠叨的感觉，这可能不值得所有的努力。

当然，有界上下文给应用程序带来了更清晰的感觉，我喜欢构建代码以适应域结构的想法，因为这使整体架构更接近规范，并有助于考虑测试。

另一方面，我的程序员同事在针对单个整体上下文进行编码时是否会难以选择正确的实体？

当应用于支持或 UAT 领域时，上下文的分离更加有用，并且这些人必须在整个业务流程方面与应用程序一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:50:23.493

> 但是现在每个上下文都有完全不同的实体，即使它们都只是映射到同一个表

这表明您实际上可能不需要多个有界上下文 (BC)。BC 的主要目标是[功能内聚](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)，如果您的模型最终在 BC 之间产生大量干扰（即耦合），则可能表明单个 BC 更合适。在隔离不同的 BC 之前，请考虑通过划分为模块（.NET 中的命名空间）是否可以更好地为您的模型提供服务。查看[实现领域驱动设计](http://my.safaribooksonline.com/book/project-management/9780133039900/chapter-9dot-modules/ch09)以了解更多信息。

此外，通常情况下，各种查询要求会让人觉得好像有多个 BC 在起作用，而实际上您只需要不同的方式来查看同一个实体。这与将完全不同的实体放在一起非常不同。考虑使用[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:59:02.537

我建议您阅读有界上下文是什么以及它们试图解决的问题。从有界上下文[定义](http://domaindrivendesign.org/node/91)：

> 明确定义模型应用的上下文。根据团队组织、应用程序特定部分的使用以及代码库和数据库模式等物理表现形式明确设置边界。在这些范围内保持模型严格一致，但不要被外部问题分散注意力或混淆。

拥有一个单一的 EDMX 模型会违反该明确的边界。您可以想象当来自不同环境的团队在同一个 EDMX 模型上工作时可能发生的摩擦。但是，在您的情况下，您可能会觉得上下文之间的明确边界和集成的成本太高。使用[共享内核](http://www.markhneedham.com/blog/2009/03/30/ddd-recognising-relationships-between-bounded-contexts/)将允许您在上下文之间共享您的 EDMX 模型。

# ruby-on-rails - 更合乎逻辑的观点产生这个

> ID：13067651
> 
> 赞同：0
> 
> 时间：2012-10-25T11:32:27.780
> 
> 标签：ruby-on-rails, controller

嗨，我只是想知道是否有更简单/合乎逻辑的方式来实现以下目标

```
def index
  @date = params[:month] ? Date.parse(params[:month]) : Date.today
  @schedule = Schedule.new
  @players = User.where(:team_id => current_user[:team_id]).all

  if current_user.admin?
    @schedules = Schedule.all
  elsif current_user.manager?
    @schedules = Schedule.find_all_by_team_id(current_user[:team_id])
  if @schedules.count < 1
    redirect_to(root_path, :status => 301, :alert => "This team has no upcoming events<br/> You should add your next event, and TeamMNGT will take care of everything else!".html_safe)
    return
  end
  elsif current_user.team_id?
    @schedules = Schedule.find_all_by_team_id(current_user[:team_id])
  elsif @schedules.count < 1 and current_user.team_id?
    redirect_to(root_path, :status => 301, :alert => "You don't have any upcoming events.<br/> Your team manager has not added any upcoming events for #{@team.name}".html_safe)
  return
  else
    redirect_to root_path, :status => 301, :alert => "Please contact your club administrator to be assigned to a team."
  return
  end
  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @schedules }
  end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:49:36.837

你可以使用[范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)。

```
class Schedule < ActiveRecord::Base
  scope :for_user, lambda do |user|
    if user.admin?
      self # return the relation, you can use all if you want
    else
      where( team_id: user.team_id ) 
    end
  end
end 
```

然后在你的控制器中：

```
@schedule = Schedule.for_user current_user

if @schedule.blank?
  if current_user.admin?
    # specific redirect message
  elsif current_user.manager?
    # specific message
  else
    # specific redirect message
  end
end 
```

您还可以使用 on 方法`User`为每种类型的用户显示适当的消息（为什么不使用 I18n 功能）：

```
def blank_schedule_message
  # pick a message according to user type, locale ...
end 
```

所以你只需要这样做：

```
if @schedule.blank?
  redirect_to root_path, status: 301, alert: current_user.blank_schedule_message
  return
end 
```

# profiling - Fortran 分析：获取行执行计数

> ID：13067655
> 
> 赞同：1
> 
> 时间：2012-10-25T11:32:41.897
> 
> 标签：profiling, fortran, intel, gprof

我在 Linux 上使用 Intel Fortran Compiler (v. 12.0.3)。我想执行分析`gprof`并获得一个基本块计数，*所有行都标*有自己的运行计数，但我设法获得的只是程序/子例程/函数级别的计数。我的结论是我的编译器标志错误，但是尽管在网上查看并阅读了`ifort`手册页，但我无法弄清楚我应该做什么而不是我在做什么......

我在编译时使用了以下标志：

```
-w -O0 -g -pg 
```

这就是我调用的方式`gprof`：

```
gprof -l -A -x path/to/exe gmon.out > OUT 
```

起初看起来好像所有行都标有运行频率，但事实证明，每个块/行只是获取过程计数（在下面的简短示例中，该函数被调用 43679 次，'if' 和例如，“else”被标记为 43679，这是没有意义的）：

```
43679 -> function variance_from_index (indices,array)
               ! declarations

   43679 ->    if (ubound(indices,1).eq.2) then
   43679 ->       variance_from_index = array(indices(1),indices(2))
                     else
   43679 ->        do i=1,ubound(indices,1)-1
   43679 ->           do j=i+1,ubound(indices,1)
   43679 ->                items(1:2)  = (/indices(i),indices(j)/) 
```

我已经在英特尔论坛上发布了我的问题，到目前为止，我收到了一条回复，其中指出了英特尔的`codecov`工具。尽管这是一个非常有用的应用程序，但它似乎不适合我当前的需求，因为似乎没有为每一行代码输出运行计数的选项。我更喜欢使用`gprof`，其输出 - 原则上 - 似乎正是我所需要的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:56:13.057

要获取行执行计数，请使用`gcov`，而不是`gprof`。Gprof 是统计分析（它将检查您的程序每秒运行 100 次的位置），而 Gcov 是具有每个基本块粒度的覆盖实用程序（正是您需要的）。

不能说，是否可以直接将gcov与intel fortran编译器一起使用。但是您可以将它与 gfortran/g95 一起使用 - 每行计数执行应该是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T10:23:51.223

据我从测试中了解到，ifort 仅支持使用 gprof 进行功能级分析，因此 gprof 标志 -l 在您的情况下是无用的。另一方面，在最近的版本中，gcc/gfortran 也不再支持使用 gprof 进行行分析，并且如前所述，在这种情况下使用的工具是 gcov（有关更多信息，请参见 man gcc）。但是，据说 gcov 可能与 gcc（当然还有 gfortran）以外的编译器不兼容，因此您可能必须使用 Intel 专有工具进行 ifort 分析。

# coldfusion - cfmail - 电子邮件地址在“to:”中有效，但在“failto:”中无效

> ID：13067669
> 
> 赞同：0
> 
> 时间：2012-10-25T11:33:25.140
> 
> 标签：coldfusion, smtp, coldfusion-9, smtpclient, coldfusion-10

我遇到了特定电子邮件地址的问题。`to`当我在属性中使用该地址时，它可以工作并且电子邮件会通过。但是，当我输入相同的地址`failto`并尝试向不存在的地址发送电子邮件时，我收到以下错误：

![在此处输入图像描述](../Images/e4d6df87fde24e5b8eb9c72e0558dfc1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:07:28.023

`failto`on 属性设置邮件信封上的`CFMail`反向路径。由于垃圾邮件的问题，[大多数邮件服务器都会检查](http://en.wikipedia.org/wiki/Sender_Rewriting_Scheme "下降约 2/3")正在使用的电子邮件地址并禁止无效的电子邮件地址，这可能是发生在您身上的事情。查看这篇文章，[了解邮件服务器是如何做到的](http://en.wikipedia.org/wiki/Callback_verification)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:51:41.040

我的管理员发现这是邮件服务器的问题。他更改了邮件服务器并开始工作。

# vba - 按标识符将数据集分解为单个工作表

> ID：13067673
> 
> 赞同：0
> 
> 时间：2012-10-25T11:33:38.743
> 
> 标签：vba, excel

我有一个大型数据集，每行都有一个标识符。整个数据集大约有 10 个不同的标识符，但这可能是可变的。目的是将主数据集分解为每组标识符的单独工作表。我在下面编写了这段代码，它完成了这项工作，但看起来很笨拙，有一个循环来制作所有工作表，另一个来遍历每一行。

```
 ...

    '--> Get list of Area Codes
    ws1.Range("N:N").Copy
    Set TempWS = Sheets.Add
    With TempWS
        With .Range("A:A")
            .PasteSpecial
            .AdvancedFilter xlFilterInPlace, Unique:=True
            .SpecialCells(xlCellTypeVisible).Copy
        End With
        .Range("B:B").PasteSpecial
        .ShowAllData
        .Range("A:A").Delete
        .Rows(1).Delete
        tmpLR = .Range("A" & Rows.Count).End(xlUp).Row + 1
    End With

    '--> Create Worksheet for Each Code
    i = 1
    Do Until i = tmpLR
    Set ws = Sheets.Add
    ws.Name = TempWS.Cells(i, 1).Text
    ws1.Range("A1").EntireRow.Copy
    ws.Rows("1:1").PasteSpecial
    i = i + 1
    Loop

    TempWS.Delete

    '--> Break Up Main Data Sheet into Area Code Sheets
    Set rng = ws1.Range("N2:N" & LRws1)
    For Each c In rng
        shname = c.Text
        c.EntireRow.Copy
        Set oWS = Sheets(shname)
        oLR = oWS.Range("A" & Rows.Count).End(xlUp).Row + 1
        oWS.Rows(oLR).PasteSpecial
    Next

    ... 
```

有没有更有效的方法来完成这个过程而不是循环多次？

我还注意到，这条线`c.entirerow.copy`不能使用 a`cut`而不是`copy`，这是什么原因？

格式是这样的：

![在此处输入图像描述](../Images/d461444acd8fe44dae2c539cda51b94c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:20:26.970

如果我能很好地阅读，原始主表将以简化形式看起来像这样：

```
HEADER1          HEADER2          HEADER3          AREACODES
Area1_Value1     Area1_Value2     Area1_Value3     Area1
Area2_Value1     Area2_Value2     Area2_Value3     Area2
Area3_Value1     Area3_Value2     Area3_Value3     Area3 
```

您想为每个区域代码（名为 Area1、2、3）创建一个新工作表并填写标题 + 相应的行。
下面写的代码只是我绘制的表格上的一个框架，你可以按照你想要的方式自定义这个代码。

```
Sub Area_Codes()

Dim oRange                  As Range
Dim oRange_Headers          As Range
Dim vArray_Headers          As Variant
Dim oRange_Area             As Range
Dim vArray_Area             As Variant
Dim oRange_Area_Dest        As Range

Dim lRange_Rows             As Long
Dim iRange_Cols             As Integer
Dim vArray                  As Variant

Dim oSheet_Main             As Excel.Worksheet
Dim oSheet                  As Excel.Worksheet
Dim lUse_Row                As Long

Dim lCnt                    As Long
Dim lCnt_B                  As Long
Dim bExists                 As Boolean

Const AreaCodes_Col = 4

Set oSheet_Main = ThisWorkbook.Sheets(1)
Set oRange = oSheet_Main.UsedRange
lRange_Rows = oRange.Rows.Count
iRange_Cols = oRange.Columns.Count
ReDim vArray(1 To lRange_Rows, 1 To iRange_Cols)
vArray = oRange

'load your headers into a separate range 
Set oRange_Headers = oRange.Rows(1)
'Set dimensions of the array equal to dimensions of the range and load range into memory (array) 
ReDim vArray_Headers(1 To 1, 1 To iRange_Cols)
vArray_Headers = oRange
'Clear the range from memory 
Set oRange_Headers = Nothing

'Start as from row 2 (Row 1 = header) 
For lCnt = 2 To lRange_Rows
    'Clear the row containing the area code info from memory - reload on every loop 
    Set oRange_Area = Nothing
    'Exceptional activate
    oSheet_Main.Activate
    'Set row of Area + load into memory 
    Set oRange_Area = oSheet_Main.Range(Cells(lCnt, 1), Cells(lCnt, iRange_Cols))
    ReDim vArray_Area(1 To 1, 1 To iRange_Cols)
    vArray_Area = oRange_Area

    'Check if sheet exists, load result into boolean value 
    bExists = False
    For Each oSheet In ThisWorkbook.Sheets
        If oSheet.Name = vArray(lCnt, AreaCodes_Col) Then
            bExists = True
        End If
    Next oSheet

    'Add sheet if sheet doesn't exist + name 
    Set oSheet = Nothing
    If Not bExists Then
        Set oSheet = Sheets.Add
        oSheet.Name = (vArray(lCnt, AreaCodes_Col))
    Else
        'Define sheet object if sheet already exists 
        Set oSheet = ThisWorkbook.Sheets(vArray(lCnt, AreaCodes_Col))
        oSheet.Activate
    End If

    'Define destination range of headers; You could name this otherwise, to avoid confusion 
    Set oRange_Headers = oSheet.Range(Cells(1, 1), Cells(1, iRange_Cols))
    oRange_Headers = vArray_Headers

    'Check last row used, +1 sets the last row + 1 -> the destination row         
    lUse_Row = oSheet.UsedRange.Rows.Count + 1
    Set oRange_Area_Dest = oSheet.Range(Cells(lUse_Row, 1), Cells(lUse_Row, iRange_Cols))
    'Fill in the destination row 
    oRange_Area_Dest = vArray_Area
Next lCnt

End Sub 
```

# jquery - 如何创建 Speaker 的弹出窗口？

> ID：13067675
> 
> 赞同：0
> 
> 时间：2012-10-25T11:33:44.023
> 
> 标签：jquery, html

我已经在我的站点中实现[了 Projekktor Speakker](http://www.speakker.com/)。我想创建一个弹出窗口，询问您是否要播放音乐。

我怎样才能做到这一点？

谢谢！

* * *

**编辑：**

我想知道的是如何将 Speakker 召回到我的弹出窗口中，而不是如何创建弹出窗口！.. 抱歉，如果我不清楚！我将为此打开一个单独的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:48:57.033

**[See demo](http://jsfiddle.net/4PynD/1/)**

Basically create two `div` one is the `div` that will cover the entire background. Second is the `div` which is your actual popup.

**HTML:**

```
<div id="mask"></div>
<div id="popup"><h2>Do you want to play music?</h2></div>​ 
```

**CSS:**

```
#mask
{
height:100%;
width:100%;
position:absolute;
top:0;
left:0;
background-color:#DDD;
z-index:100;

}
#popup
{
height:200px;
width:300px;
-webkit-border-radius:10px;
border:5px solid #FFAd08;
background-color:#FFD69C;
z-index:101;
position:absolute;
left:50px;
top:100px;
} 
```

*Note:I have used styles just for demonstration you should style the popup as per your needs and position it the same way*

Hope it helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:50:06.980

试试这个：pop 将在页面加载时打开

css

```
.mover {
    width: 250px; 
    height: 150px; 
    background:#000; 
    position:absolute; 
    border:1px solid #f5f5f5; 
    display:none;
    z-index:1001;} 
```

脚本

```
 var myscreen=screen.width;
   var popPos =  (myscreen - 250) /2;   //250 is the width of popup
   $(function() {
    $(window).load( function() {
        $('#special').show();
        $("#special").css({
            marginLeft: popPos+"px",
        });
    });
    }); 
```

html

```
 <div class="mover" id="special"></div> 
```

# django - Django+MongoDB vs Node.js+MongoDB

> ID：13067682
> 
> 赞同：9
> 
> 时间：2012-10-25T11:33:55.910
> 
> 标签：django, node.js, mongodb

我已经启动并运行了一个网站，其中包含使用 Python(Django)+MySQL 构建的同步服务。很长一段时间以来，我一直在寻找 Node.js 和 MongoDB 方面。我即将决定迁移到系统的 MongoDB 部分，该部分托管来自用户桌面客户端的数据，并由同步服务用于在客户端之间同步数据。

我想让系统的其余部分在 Django+MySQL 上运行。

我的问题是我应该在 Node.js 上重写同步服务还是让它在 Django 上运行？Node.js 与 MongoDB 对 Django 有什么优势吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-25T11:55:19.063

如果您正在寻找性能，Node.js 应该比 Django 具有更好的性能。但是 Node.js 是异步运行的，你应该为此准备代码，如果你需要所有东西都同步并启动，也许 Django 是最好的选择，因为你已经让它运行了。

但是，如果您选择 Node.js，请制作一些使蜜蜂异步的事实对您和您的数据一致性没有问题的东西，例如消息队列。

看看这个，各有优缺点

[将 python 切换到 node.js](http://journal.paul.querna.org/articles/2011/12/18/the-switch-python-to-node-js/)

[tornado、django 和 node.js 基准测试](http://swizec.com/blog/benchmarking-node-tornado-and-django-for-concurrency/swizec/1616)

# javascript - highcharts中的条件标记颜色

> ID：13067685
> 
> 赞同：9
> 
> 时间：2012-10-25T11:34:01.440
> 
> 标签：javascript, highcharts, markers

我正在使用 Highcharts，我想用不同的颜色填充折线图中的标记。例如：当变量“a”为 1 时，用红色填充标记，否则用绿色填充。有可能这样做吗？

这是代码：http: [//jsfiddle.net/EnyCJ/1/](http://jsfiddle.net/u9EzG/)

我试图用格式化程序来做到这一点，但它不起作用。有什么建议么？

```
var a=1;

plotOptions: {
 series: {
  marker: {
   fillColor: {
    formatter: function () {
      if (a == 1) {
       return 'red'
      } else {
       return 'green'
      }
    }
   },
  lineWidth: 2,
  }
 }
}, 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T11:49:05.510

尝试：

```
fillColor: a==1 ? "#ff0000" : "#00ff00" 
```

等等

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-07T10:59:40.350

您还使用区域：

```
$(function () {
    $('#container').highcharts({
        series: [{
            data: [-10, -5, 0, 5, 10, 15, 10, 10, 5, 0, -5],
            zones: [
              {
                value: 0,
                color: '#f7a35c'
              }, 
              {
                color: '#90ed7d'
              }
            ]
        }]
    });
}); 
```

[在 jsfiddle.net 中尝试](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/series/color-zones-simple/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T16:12:43.790

如何从图表中删除逻辑并仅将其用于显示数据？

```
var a = 1,
    color = a ? 'red' : 'green';

plotOptions: {
     series: {
         marker: {
             fillColor: color,
             lineWidth: 2,
         }
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-22T21:33:37.490

扩展[Asad Saeeduddin 的回答](https://stackoverflow.com/a/13067931/6331369)：

我在甜甜圈饼图中使用 dataLabels，并且建议的解决方案非常针对特定情况。我想根据条件逻辑更改单个饼图的标签文本颜色，比较值。

只是分享，因为我的搜索把我带到了这里。

```
data: outerData,
dataLabels: {
    formatter:
        function () {
            if ((outerData[this.point.x].y > innerData[this.point.x].y) && (this.point.x != 0)) {
                return this.y > 0.1 ? '<span style="fill: red;">' + this.point.name + ': ' + this.y + '% ' + '</span>' : null;
            } else {
                return this.y > 0.1 ? '<span style="fill: #006400;">' + this.point.name + ': ' + this.y + '% ' + '</span>' : null;
           }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-11T20:47:23.233

我正在做这样的事情，我想我会用 2021 年的回复来更新这篇文章。事实证明，使用 Highcharts 您必须将数组输入数据，但它可以是具有与点关联的参数的对象数组。我试图使点填充的比例与 y 轴不同，如下所示：

```
tempScale(value: any) {
      if(value > 32) {
        return 'red'
      }
      else if(value > 31) {
        return 'orange'
      }
      else if(value > 30) {
        return 'yellow'
      }
      else if(value > 28) {
        return 'green'
      }
      else if(value > 27) {
        return 'blue'
      }
      else {
        return '#99ffff'
      }
  } 
```

我最终找到了这个[codepen](https://jsfiddle.net/BlackLabel/rt9zoxue/)，其中显示了如何输入对象数组并使用键 y、颜色、标记和半径为数组中的每个项目提供属性的示例。

```
 {
      y: 9,
      color: 'green',
      marker: {
        radius: 10
      }
    } 
```

我最终将 2 组合起来，并在将它们推入数组之前计算出它们中的每一个的颜色，这对我的目的非常有用。

```
array.push({
          y: item.attributes.Sal, 
          color: this.tempScale(item.attributes.Temp), 
          marker: {
            lineWidth: 1,
            lineColor: 'black',
          }
        }) 
```

# python - 使用 Python 在所有驱动器中搜索文件

> ID：13067686
> 
> 赞同：9
> 
> 时间：2012-10-25T11:34:00.773
> 
> 标签：python, python-2.7

我使用 python，我需要一个函数或库来搜索我在所有驱动器中的文件，我只给它提供文件的名称，就像`F3`在 Windows 中搜索计算机中的所有文件夹一样。Windows 操作系统，本地驱动器，，我写了一个代码

```
import os
import win32api
paths = 'D:/'
def dir_list_folder(paths):
    for folderName in os.listdir(paths):
        if (folderName.find('.') == -1):
            folderPath = os.path.join(paths,folderName );
            dir_list_folder(folderPath);
        else:
            print ('Files is :'+ folderName ); 
```

它给了我一个很好的结果，但是某些类型给我一个错误，如果我不需要在 .Zip 或 .RAR 文件中搜索，我该怎么做

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T11:55:56.953

在 Windows 上，您最好使用该`os.walk`功能。`os.walk`返回一个递归遍历源树的生成器。下面的示例显示了正则表达式搜索。

```
import os
import re
import win32api

def find_file(root_folder, rex):
    for root,dirs,files in os.walk(root_folder):
        for f in files:
            result = rex.search(f)
            if result:
                print os.path.join(root, f)
                break # if you want to find only one

def find_file_in_all_drives(file_name):
    #create a regular expression for the file
    rex = re.compile(file_name)
    for drive in win32api.GetLogicalDriveStrings().split('\000')[:-1]:
        find_file( drive, rex )

find_file_in_all_drives( 'myfile\.doc' ) 
```

一些注意事项：

1.  我正在使用正则表达式来搜索文件。为此，我提前编译 RE，然后将其作为参数传递。请记住规范化表达式 - 特别是如果文件名来自恶意用户。
2.  `win32api.GetLogicalDriveStrings`返回一个字符串，其中所有驱动程序以 0 分隔。拆分它，然后切出最后一个元素。
3.  在遍历过程中，您可以从 'dirs' 中删除不需要的文件夹，例如 '.git' 或 '.cvs'。参见`os.walk.__doc__`，例如。
4.  为了保持样本简短，我没有传播“找到”。`break`如果要打印所有文件，请删除。如果您想在找到第一个文件后停止，请传播`break`到。`find_file_in_all_drives`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:43:14.970

```
import os
az = lambda: (chr(i)+":\\" for i in range(ord("A"), ord("Z") + 1))
for drv in az():
    for root, dirs, files in os.walk(drv):
        process_the_stuff() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:39:10.550

您需要指定驱动器，例如 c 驱动器。

```
def findall(directory):
    files=os.listdir(directory)
    for fl in files:
        path=os.path.join(directory,fl)
        if os.path.isdir(path):
            findall(path)
        else:
            dosomethingwithfile(path)
    return 
```

基本上你遍历文件树。您必须将驱动器作为根目录传递给此方法。例如。findall('c:/')

# c++ - 将子窗口添加到分层窗口

> ID：13067687
> 
> 赞同：2
> 
> 时间：2012-10-25T11:34:01.580
> 
> 标签：c++, winapi, gdi

这是问题所在。我有一个分层窗口，它代表我的应用程序的主 GUI。我创建了另一个托管 IWebBrowser2 ActiveX 控件的窗口，以显示网站的一部分。我正在尝试将浏览器窗口的 hwnd 添加到主窗口。如果父窗口是普通窗口，一切都很好，但是当我尝试将其创建为 WS_EX_LAYERED 窗口时，添加的浏览器窗口不再出现。我如何向主窗口发出信号来绘制另一个窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:50:52.587

子窗口从父窗口继承透明度设置。你不能有透明的父母和不透明的孩子。可能的解决方法是为父窗口创建非矩形窗口区域 - 为不透明窗口创建孔（但在这种情况下它不是子窗口）。

# javascript - 谷歌地图信息窗口在鼠标悬停监听器上闪烁......如何阻止它闪烁？

> ID：13067693
> 
> 赞同：3
> 
> 时间：2012-10-25T11:34:30.490
> 
> 标签：javascript, google-maps, google-maps-api-3

我创建了一个 jsfiddle 作为示例 [http://fiddle.jshell.net/WBaXx/](http://fiddle.jshell.net/WBaXx/)

在结果面板中，您将看到谷歌地图和文本“abcdefghijk”......当用户将鼠标悬停在这些文本上时，我想要让信息窗口弹出。

我成功编写了脚本，但我有一个小问题，当用户将鼠标从字母“a”移动到“k”时，信息窗口会闪烁。

问题是因为这些文本位于不同的 html 标签中，但我正在听 DIV 的父 html 的鼠标悬停。所以这不应该发生不是吗。

有什么帮助吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:50:06.547

闪烁是由再次打开的“信息窗口”引起的——即使它已经打开了。

您可以使用

`if (!infowindow.getMap())`

检查信息窗口是否已经打开

[http://fiddle.jshell.net/WBaXx/6/](http://fiddle.jshell.net/WBaXx/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:20:18.257

如果您在页面中使用 jQuery，则可以使用 mouseenter/mouseleave 来控制事件的触发。

从api页面@http [://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

> ... mouseover 在指针移入子元素时触发，而 mouseenter 仅在指针移入绑定元素时触发。

您的 jsfiddle 在下面更新

[http://fiddle.jshell.net/WBaXx/26/](http://fiddle.jshell.net/WBaXx/26/)

# java - GWT 定时器性能

> ID：13067694
> 
> 赞同：0
> 
> 时间：2012-10-25T11:34:32.657
> 
> 标签：java, javascript, gwt

我有这个 javascript 代码，我用 JSNI 嵌入到我的应用程序中：

```
 var i=0;
    setInterval(function(){
      data.push(Math.cos(i++/25) - 0.2 + Math.random()*0.3);
      waveform.update({
        data: data
      });
    }, 50); 
```

但是，我想改用纯 GWT 并尝试了以下代码：

```
 new Timer() {
        private long i = 0;
        public void run() {
              long value = (long) ((Math.cos(i++/25) - 0.2 + Math.random() * 0.3)); 
              updateData(value); // just a wrapper for the javascript function above
        }
      }.scheduleRepeating(50); 
```

当我运行我的应用程序时，与 JSNI 函数相比，GWT 计时器非常“滞后”，而且我几乎无法在 UI 中输入 TextBox。我的代码中的数学函数有问题还是`Timer`很慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:41:39.757

首先确保您不是在开发模式下运行 GWT 代码，而是实际构建和部署应用程序。开发模式将您的 Java 代码即时转换为 Javascript，以允许热部署/实时修改，因此非常慢。

还可以尝试在 GWT 编译器上使用“漂亮”参数，以便它生成非混淆的 Javascript，然后检查 GWT 如何将您的 Java 代码转换为 JS，也许那里有问题。

# java - 无法休眠以通过级联删除子实例，这些子实例已从一对多关系中删除

> ID：13067698
> 
> 赞同：0
> 
> 时间：2012-10-25T11:35:12.477
> 
> 标签：java, hibernate, one-to-many, cascade, all-delete-orphan

这里有一个小问题：

我有两个实体类，比方说

```
class Parent {
    Set<Child> children;
}
class Child {
    SomethingElse reference;
} 
```

现在映射本质上是：

```
<class name="Parent" lazy="false">
    <set name="children" lazy="false" cascade="all-delete-orphan">
        <key column="parent_id"/>
        <one-to-many class="Child"/>
    </set>
</class> 
```

（我在这里省略了 id 映射和字段，我使用常规生成的 id）

我基本上需要保持一个干净的数据库，就像当我从父列表中删除元素然后提交父时一样，需要删除相应删除的子数据库条目。Child 实例引用了我以后需要删除的其他实体，因此如果子实例保留在数据库中，我将无法删除那些引用的对象。

到目前为止我发现了什么：如果我要保持 hibernate 的 PersistentCollection 包装器就位，我在下面尝试的任何事情都应该有效。问题是，我的数据库对象来自几层框架，其中包括一个 UI 框架，它使用 bean 属性抽象来调用 setter，以及一个来回克隆和序列化对象的网络通信层。这两个层都在内部替换了集合实例，因此删除了这些 PersistentCollection 包装器。重写这些以不这样做不是一种选择。

也就是说，我尝试过的 8 件事没有奏效：

1) 将关系配置为 cascade="all"，使用 session.update(parent)。

2) 将关系配置为 cascade="all-delete-orphan"，使用 session.update(parent)。

3) 将关系配置为 cascade="all" 并使用 session.merge(parent)

所有这些都会导致休眠执行“UPDATE CHILD SET parent.id = null WHERE parent.id = ...”。这在重新加载父实例时成功地从父列表中删除了子实例，但子实例保留在数据库中并阻止我删除其他引用的实体。

4-6) 使用配置 1-3，同时将父键列定义为非空

这导致休眠不做任何事情。我在另一篇文章中读到，使键列非空会导致删除。听起来可能，因为更新为 null 不再是一种选择，但不起作用。如果我从集合中删除孩子，提交更改并从数据库重新加载实例，孩子会重新出现。

7+8) 父键可空或非空无关紧要，但将关系配置为 cascade=all-delete-orphans 并使用 session.merge(parent)

由于删除了 PersistentCollection 包装器，这会导致 hibernate 抛出异常“具有 cascade="all-delete-orphan" 的集合不再被拥有的实体实例引用”。

为了解决我的问题，我唯一需要的是休眠来执行选项 1-3 中的查询作为删除而不是更新。我希望我只是无法找到以在没有 PersistentCollection 包装器的情况下删除这些映射的方式来配置映射的选项，但在我看来，目前似乎没有这样的选项。有谁知道是否有办法配置这个？

/编辑：为了澄清，我想要发生的事情的例子：

```
Parent parent = new Parent();
parent.setChildren(new HashSet<Child>(Arrays.asList(new Child()))));
session.insert(parent)
// this correctly results in (approximately):
// SQL> INSERT INTO PARENT ...
// SQL> INSERT INTO CHILD ...

parent.setChildren(new HashSet<Child>()); // using .clear() is not an option.
session.update(parent);
// this results in:
// SQL> UPDATE CHILD set parent_id = null WHERE parent_id = ${id.of.parent}
// but i need this to result in:
// SQL> DELETE FROM CHILD WHERE parent_id = ${id.of.parent} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:47:31.617

好吧，我现在显然修好了。问题是我没有分配空集，而是空集。显然，在 session.merge(updated) 的情况下，hibernate 突然区分了空集合和空集合。将 cascade="all-delete-orphan" 和 .merge() 与分配给属性的空集合实例一起使用，分配 null 而不是空集合实例会引发上述异常。无论键列上的可空性约束如何，这都是相同的。

我不知道这是否被认为是故意行为，因为通常空值与空集合的行为方式相同。我会看看我是否能找到更多关于这个的信息，然后可能会提出一个错误报告。

更新：问题在[https://hibernate.atlassian.net/browse/HHH-7726](https://hibernate.atlassian.net/browse/HHH-7726)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T10:44:23.150

这并不能完全回答您的问题，但我希望它可以提供一点帮助。
首先，我建议你看看[这个解释](http://www.mkyong.com/hibernate/inverse-true-example-and-explanation/)，以及[这个](http://www.mkyong.com/hibernate/different-between-cascade-and-inverse/)。

现在，您自己说过子对象不引用父对象，这是一种单向关系。我不知道你想出了什么样的映射，但是这个：

```
Parent parent = new Parent();
parent.setChildren(Collections.singleton(new Child())));
session.save(parent);
// this correctly results in:
// SQL> INSERT INTO PARENT ...
// SQL> INSERT INTO CHILD ... 
```

只有在以下情况下才能工作：

*   `cascade`在集合中的映射被**启用**（例如`cascade="all"`，否则 Hibernate 会抱怨新`Child`对象的未保存的瞬态实例）
*   parent_id 列**可以为空**（否则 Hibernate 会期望您预设此字段，这只有在您映射了关系的另一端时才有可能）

另外，除了您在评论中提到的这两个插入之外，Hibernate 还会生成一个`SQL UPDATE`（您所看到的实际上在我给您的链接中进行了解释）。

希望你能从中有所收获。

# c - 套接字编程中的分段错误

> ID：13067706
> 
> 赞同：0
> 
> 时间：2012-10-25T11:36:02.900
> 
> 标签：c, linux, sockets, unix, segmentation-fault

我正在尝试在 C 上编写一个简单的服务器-客户端通信程序。但是只要客户端尝试连接到服务器，我就会在服务器端不断收到错误消息：

分段故障

服务器端代码是：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<sys/socket.h>
#include<sys/types.h>
#include<netinet/in.h>

void error(char *);

int main(int argc, char *argv[])
{
int sockfd, newsockfd, n, serv_size, cli_size, port_no, bindfd, readfd, writefd, listenfd;
char sbuffer[256];
char *p;
p = &sbuffer[0];    

struct sockaddr_in serv_addr, cli_addr;

if (argc < 2)
    error("No port no. Specified!\n");

//creating sever side socket    
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd == -1)
    error("Server side listening Socket could not be created!\n");

bzero((char *)&serv_addr, sizeof(serv_addr));
port_no = atoi(argv[1]);
serv_addr.sin_family =  AF_INET;
serv_addr.sin_port = htons(port_no);
serv_addr.sin_addr.s_addr = INADDR_ANY;

//binding socket
bindfd = bind(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr));
if  (bindfd == -1)
    error("Failed to bind server side socket!\n");

//listening for incoming connections
listenfd = listen(sockfd, 5);
if (listenfd == -1)
    error("Failed to lisen to incoming connections!\n");

serv_size = sizeof(serv_addr);
cli_size = sizeof(cli_addr);
newsockfd = accept(sockfd, (struct sockaddr *)&cli_addr, &serv_size);
if (newsockfd == -1)
    error("Failed to accept connections from client!\n");

printf("Server received connections from %s  \n", (char *)inet_ntoa(cli_addr.sin_addr));    
while(1)
{   
    bzero(p, sizeof(sbuffer));
    readfd = read(newsockfd, p, sizeof(sbuffer));
    if (readfd == -1)
        error("Sorry. Unable to read message from client!\n");
    printf("Message Received: ");
    puts(sbuffer);

    bzero(p,  sizeof(sbuffer));
    printf("\nEnter Your Message for client: ");
    gets(sbuffer);
    writefd = write(newsockfd, p, sizeof(sbuffer));
    if (writefd == -1)
        error("Sorry. Message Could not be sent to client.\n");
    printf("Congratulations! Message has been sent to client.\n");  
}       

return 0;   
}
void error(char *msg)
{
perror(msg);
exit(1);
} 
```

客户端代码是：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<sys/socket.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<netdb.h>

void error(char *);
int main(int argc, char *argv[])
{
int sockfd, newsockfd, port_no, n, connectfd, readfd, writefd;
char cbuffer[256];
char *ptr = &cbuffer[0];

struct sockaddr_in serv_addr;
struct hostent *he;

if (argc != 3)
    error("Incomplete arguments!\n");

port_no = atoi(argv[2]);
he = gethostbyname(argv[1]);
if (he == NULL)
    error("No Such Host!\n");

sockfd = socket(AF_INET, SOCK_STREAM, 0);
if(sockfd == -1)
    error("Sorry. Socket could not be created!\n");

bzero((char *)&serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(port_no);
serv_addr.sin_addr = *((struct in_addr *)he->h_addr);  

connectfd = connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr));
if (connectfd == -1)
    error("Sorry. Could not connect to server.\n");

while(1)
{   
    bzero(ptr, sizeof(cbuffer));
    printf("\nEnter message for Server: \n");
    gets(cbuffer);
    writefd = write(sockfd, ptr, sizeof(cbuffer));
    if (writefd == -1)
        error("Sorry. Could not send message to Server.");

    printf("Congratulations! Server Successfully Received your message.\n");    

    bzero(ptr, sizeof(cbuffer));
    readfd = read(sockfd, ptr, sizeof(cbuffer));
    if (readfd == -1)
        error("Sorry. Message from server could not be read.\n");

    printf("Message Received: ");
    puts(cbuffer);
}
return 0;
}
void error(char *msg)
{
perror(msg);
exit(1);
} 
```

这是我在编译 serv.c 时的编译时警告：

```
cc -o s serv.c 
serv.c: In function ‘main’:
serv.c:47:52: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

PS：我使用的是 Ubuntu 12.04，我在其中实际编写了这些程序并成功执行了这些程序。但我最近迁移到 Linux Mint 13 Cinnamon。我重新编译了程序。可能他们也成功地在 Mint 上执行了。但现在它似乎以某种方式捕获了这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:15:44.933

如果您在 64 位系统上运行，您的电话；

```
printf("Server received connections from %s  \n", 
    (char *)inet_ntoa(cli_addr.sin_addr)); 
```

...可能会破裂。由于您没有`<arpa/inet.h>`include ，因此您没有 inet_ntoa 的定义。这将使编译器假定它返回一个`int`. 由于`int`不一定是 64 位（实际上大多数机器似乎不是），它不足以存储返回的 char 指针，因此您的 printf 因无效字符串而崩溃。这发生在（例如）64 位 MacOS X 上。

只是简单地放在`#include <arpa/inet.h>`服务器中的包含中就可以解决这个问题。

您也不应该忽略和之间的区别`int`和`socklen_t`解决混淆`cli_size`和的问题`serv_size`，阅读已经存在的评论和答案以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:13:58.863

我会说问题是`inet_ntoa()`.

这让编译器假设它返回`int`。

这会使以下行使应用程序崩溃：

```
printf("Server received connections from %s  \n", (char *)inet_ntoa(cli_addr.sin_addr)); 
```

包含`<arpa/inet.h>`以下代码，即使使用`-Wall`.

```
printf("Server received connections from %s  \n", inet_ntoa(cli_addr.sin_addr)); 
```

# asp.net - 将 silverlight xaml 页面与 asp.net 项目集成

> ID：13067708
> 
> 赞同：0
> 
> 时间：2012-10-25T11:36:06.900
> 
> 标签：asp.net, silverlight

我正在使用 web developer 2010。我关注了这个帖子：[如何将 silverlight 集成到 aspx 中？](https://stackoverflow.com/questions/6099485/how-to-integrate-silverlight-into-aspx).

但它显示 msgbox 说已经添加了参考。当我尝试运行我的 aspx 页面时，我得到一个错误：未知的服务器标签“asp：Silverlight”。我有 .net 框架 4、silverlight 3 和 4。

我在 .aspx 中有代码：

```
 <div><asp:ScriptManager runat="server" ID="ScriptManager"/>
<asp:Silverlight runat="server" ID="silverlightLayout" InstallationMode="Inline" Version="1.1" Source="MainPage.xaml"
        EnableHtmlAccess="true" Windowless="true" Width="844" Height="472" PluginBackColor="Transparent" /> </div> 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:52:54.353

很简单，你能在silverlight bin文件夹中找到TestPage.aspx和.xap文件吗，在silverlight项目中，打开你的aspx文件，你会看到有xap文件的标签在所需项目中以相同的模式使用它并复制那个xap文件您需要项目 bin 文件夹 [单击查看示例](http://www.silverlight.net/archives/videos/add-a-silverlight-application-to-an-aspnet-page)如果有帮助请标记答案

# perforce - 如何在不从 perforce 的更改列表中删除它们的情况下恢复工作区中打开的文件？

> ID：13067709
> 
> 赞同：2
> 
> 时间：2012-10-25T11:36:06.903
> 
> 标签：perforce, revert, shelve, changelist

是否有可能在 perforce（服务器版本 2010.1/265509 (2010/09/23)，所以我没有更新的“git like”服务器功能）中恢复客户端中所有打开的文件而不从更改列表中删除文件他们属于？

默认情况下，如果我打开了一个文件并在更改列表中（非默认），并且我想快速“上下文切换”离开我当前的工作状态，看看别的东西，然后回到我之前的工作状态，我做这个：

*   创建一个新的变更列表
*   将文件添加到新的变更列表 C
*   在更改列表中搁置文件 C
*   还原所有打开的文件
*   做东西
*   还原所有打开的文件
*   取消搁置变更列表 C -c C

在“做事”期间的中间阶段，p4 describe C 显示更改列表中没有文件。这令人不安和烦人，并且使跟踪 C 中的内容变得比应有的更难。

有没有办法“恢复所有打开的文件”，以便“p4 describe C”将所有文件保留在更改列表 C 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:59:23.370

没有直接的方法来做你特别要求的事情（尽管如果你真的想要，你可以编写一个脚本来恢复指定变更集中的文件，然后立即重新打开它们）。

但是，如果您的意图只是列出搁置的变更集*C*中的文件，而不是使用`p4 describe C`，您可以使用`p4 files @=C`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:53:04.723

您可以拥有多个工作区。我经常有几十个工作区。

# c++ - 如何使用 C++ TMP 实现 MultiUnitValue 类

> ID：13067712
> 
> 赞同：6
> 
> 时间：2012-10-25T11:36:24.303
> 
> 标签：c++, template-meta-programming

我在 VC++ 中编写了这个类，这显然不符合标准（TBH 似乎很奇怪，标准不允许它）

1.  如何将其转换为标准 C++11？

代码：

```
#include <functional>
template <typename T, typename U, typename T_to_U >
class MultiUnitValue  //Multi for now == 2 :)
{
    const T t;
    T_to_U conversion_function;
public:
    MultiUnitValue()    : t(0)
    {}
    MultiUnitValue(T t_): t(t_)
    {}
    template<typename V>
    V in() const
    {
        BOOST_STATIC_ASSERT(0);
        // "you are trying to call in with type(unit) not supported"
    }
    template<>
    T in<T>() const
    {
        return t;
    }
    template<>
    U in<U>() const
    {
        return conversion_function(t);
    }
}; 
```

用法：

```
auto f = [](int i){return i*2.54;};

MultiUnitValue<int, float,decltype(f)> muv(10);
auto rv = muv.in<float>(); 
```

2.  我放了 BOOST_STATIC_ASSERT 以防止不正确的使用，
    但看起来 MSVC 如果不使用它就不会实例化它（就像我期望的那样），但是在尝试将它移植到 g++4.7 时，即使模板没有被实例化，它也会触发？用 static_assert 替换它不起作用......

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T23:48:45.790

您的解决方案不“符合标准”，因为成员函数不能专门用于类模板。这是因为函数不能被部分特化的一般规则 - 所以即使成员函数模板的“完全”特化实际上也是部分特化，因为不是完全特化的类。

* * *

我的解决方案：

## C++11 版本

您以我的版本为例，我相信这就是您想要的：

```
int main(){
  auto f1 = [](int i){return i*2.54;};
  auto f2 = [](int i){ std::stringstream ss; ss << i; return ss.str(); };
  MultiUnitValue<int, float, std::string>  vv(1, f1, f2);
  std::cout << vv.in<int>() << "\n";
  std::cout << vv.in<float>() << "\n";
  std::cout << vv.in<std::string>() << "\n";
  // std::cout << vv.in<long>() << "\n"; // error to compile
} 
```

首先 - 您需要特殊的转换基类，对于单个转换，您将在下一个代码片段中看到通过基类函数调用转换会导致“未指定”转换，像这样的 for`long`不会编译。

```
template <class T, class U>
class Conversion {
public:
    Conversion(const std::function<U(const T&)>& f) : f(f) {}
    U convert (const T& v) const { return f(v); }
private:
   std::function<U(const T&)>  f;
};
template <class T>
class Conversion<T,T> {
public:
    T convert (const T& v) const { return v; }
}; 
```

你的班级使用可变参数模板：

```
template <class T, class... V> // V... means all desired conversions
class MultiUnitValue : private Conversion<T,T>, private Conversion<T,V>... {
// allowed conversion:         ^^^^^^^^^^^^^^^^^        ^^^^^^^^^^^^^^^^^^
public:
   MultiUnitValue(T v, const std::function<V(const T&)>&... f) : Conversion<T,V>(f)..., v(v) {}

   template <class U>
   U in() const
   {
      // this static assert is not needed - but just to show the message
      static_assert(std::is_base_of<Conversion<T,U>, MultiUnitValue<T,V...>>::value, 
                   "Not allowed conversion");

      // static_assert is not needed 
      // since if you MultiUnitValue does not derive from Conversion<T,U> 
      // - then this call will not compile too
      return this->Conversion<T,U>::convert(v);
   }

private:
   T v;
}; 
```

LVS 示例： http: [//liveworkspace.org/code/05b6ada146cc8f05d027a5536859a087](http://liveworkspace.org/code/05b6ada146cc8f05d027a5536859a087)

## 没有可变参数模板的版本：

我还准备了没有可变参数模板的解决方案，因为 VC++ 仍然不支持它们。

第二：转换和覆盖限制现在应该在您的 T_to_U 类型中。

与 C++11 版本相比，使用这种方法会稍微不方便：

```
int main(){
  auto f1 = [](int i){return i*2.54;};
  auto f2 = [](int i){ std::stringstream ss; ss << i; return ss.str(); };
  // next 2 lines differ from C++11 version
  typedef ConvertFunctions2<int, float, std::string> CF_f1_f2; 
  MultiUnitValue<int, CF_f1_f2>  vv(1, CF_f1_f2(f1, f2));
  std::cout << vv.in<int>() << "\n";
  std::cout << vv.in<float>() << "\n";
  std::cout << vv.in<std::string>() << "\n";
  // std::cout << vv.in<long>() << "\n"; // error to compile
} 
```

`MultiUnitValue`将比您的示例更简单，甚至在我的 C++11 版本中也更简单，但会`class CF`复杂得多：

```
template <class T, class CF>
class MultiUnitValue {
public:
   MultiUnitValue(T v, const CF& cf) : v(v), cf(cf) {}

   template <class U>
   U in() const
   {
      return cf.Conversion<T,U>::convert(v);
   }

private:
   T v;
   CF cf;
}; 
```

简单的“帮助”转换类将与 C++11 版本中的相同：

```
template <class T, class U>
class Conversion {
   ...
};
template <class T>
class Conversion<T,T> {
   ...
}; 
```

以及 VC++ 中的可变参数模板替代方案（以及 C++03 的旧时代）：

```
template <class T>
class ConvertFunctions0 : public Conversion<T,T> {};

template <class T, class V1>
class ConvertFunctions1 : public Conversion<T,T>, public Conversion<T,V1> {
public:
  ConvertFunctions1(std::function<V1(const T&)> f1) : Conversion<T,V1>(f1) {}
};

template <class T, class V1, class V2>
class ConvertFunctions2 : public Conversion<T,T>, public Conversion<T,V1>, public Conversion<T,V2> {
public:
  ConvertFunctions2(std::function<V1(const T&)> f1, std::function<V2(const T&)> f2) 
  : Conversion<T,V1>(f1), Conversion<T,V2>(f2) 
  {}
}; 
```

正如你所看到的 - 添加`ConvertFunctions3`,`ConvertFunctions4`不是那么大的麻烦......

[ideone](http://ideone.com/qhsDSR)的完整示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:18:10.330

第一个问题是您不能在类中专门化成员函数模板，也不能在（模板）类之外专门化它们，因为那样它们将是部分函数专门化。解决此问题的最简单方法是使用私有成员函数重载：

```
private:
    T in(T *) const { return t; }
    U in(U *) const { return conversion_function(t); }
    template<typename V> V in(V *) const {
        static_assert((V *)0, "you are trying to call in with type(unit) not supported");
    }
public:
    template<typename V> V in() const { return in((V *)0); } 
```

这也演示了如何解决`static_assert`始终触发的问题；您需要使其断言表达式依赖于模板参数。

下一个问题是您的模板不会使用 lambda 类型模板参数进行实例化，因为 lambdas（甚至是无捕获 lambdas）不是默认可构造的。您可以通过返回传统函子 ( `struct`with `operator()`) 或将 lambda 类型转换为调用 lambda 的默认可构造类型来解决此问题。

一种策略是在调用时间接使用 void 指针，因为无捕获 lambda 不应该关心它们的`this`指针是什么：

```
template<typename L> struct default_constructible_lambda {
  template<typename... Args> auto operator()(Args &&...args) const
    -> decltype(std::declval<L>()(std::forward<Args>(args)...)) {
      return (*(L *)(0))(std::forward<Args>(args)...); }
};
MultiUnitValue<int, float, default_constructible_lambda<decltype(f)>> muv(10); 
```

不过，这仍然是未定义的行为；它与将 lambda 函数指针存储在闭包类型中的标准一致，在这种情况下，这将导致通过 void 指针进行调用。

# semantic-web - XHTML5 UTF-16 微数据 RDFa 1.1 microformat2 草案

> ID：13067715
> 
> 赞同：3
> 
> 时间：2012-10-25T11:36:44.467
> 
> 标签：semantic-web

随着 (X)HTML5 规范趋于标准化，我更喜欢在任何适用于自动工具的地方使用微数据，其次是 RDFa，因为微数据的个人感觉就像简洁一样具有限制性，其次是 microformat2 草案，用于使用 XSLT 为我的工作的用户提供服务，例如 hAtom2Atom .xsl 虽然谷歌搜索将我发送到 blog.whatwg.org/xhtml5-in-a-nutshell ，它臭名昭著地声称我的问题是垃圾邮件，然后是 www.jenitennison.com/blog/node/165 似乎禁用评论，所以如果我我在这里不合适，仍然请指导我。抱歉 Tim Berners-Lee 爵士，我的声誉不足以为语义网添加链接数据标签。

我希望使用 hAtom2Atom.xsl 使用微格式 hAtom 为我的网站主页提供联合提要。XML MIME 类型 application/xhtml+xml 通过我的托管服务提供商控制面板界面设置为 .xhtml 文件的虚拟目录。对于向搜索引擎提供元数据，我想使用[http://www.w3.org/TR/2010/WD-xhtml-rdfa-20100422/#document-conformance](http://www.w3.org/TR/2010/WD-xhtml-rdfa-20100422/#document-conformance)使之成为可能的 schema.org RDFa . 作为马哈拉施特拉邦的居民，我使用 xml:lang="mr-IN" 作为我们作为南亚金融首都普及的国家语言 孟买的官方语言是马拉地语，国家是印度，所以我的编码是 UTF-16，所以我的非英文标签，例如告诉我姓氏正确发音的标题，可以按预期工作。那么下面的标记是正确的 XHTML5+RDFa 1.1 吗？

```
<?xml version="1.0" encoding="UTF-16"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.1//EN"
      "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    version="XHTML+RDFa 1.1"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:foaf="http://xmlns.com/foaf/0.1/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.w3.org/1999/xhtml
                        http://www.w3.org/MarkUp/SCHEMA/xhtml-rdfa-2.xsd"
    lang="en"
    xml:lang="en">
    <head>

        <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-16"/>
    <title xml:lang="mr-IN">चवाथे&lt;/title>
    <link rel="icon" href="/img/icons/me.ico" type="image/x-icon" />
    </head>
    <body>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:20:04.967

它是错误的，但有效！doctype 使其成为比 xhtml5 更旧的 xhtml 实现，这将阻止使用微数据。[但是，如果按照http://bnode.org/blog/2010/01/26/microdata-semantic-](http://bnode.org/blog/2010/01/26/microdata-semantic-markup-for-both-rdfers-and-non-rdfers)中的说明将它们的标记转换为微数据，那么自动化工具在最不希望出现的情况下会忽略诸如知识共享许可之类的东西[rdfers 和非 rdfers 的标记](http://bnode.org/blog/2010/01/26/microdata-semantic-markup-for-both-rdfers-and-non-rdfers)。启用 RDFa 的正确方法是使用`<head>... <link rel="profile" href="http://www.w3.org/profile/html-rdfa-1.1" /> ...</head>`此外，这允许为前缀和属性等属性跳过 rdf 前缀，但到目前为止，似乎没有人致力于实现 rel="profile" 支持，因此很明显 rdf 要么保留 xhtml 要么历史性的 html，而不是 html5！版本属性也将不使用，如在[http://www.w3.org/TR/rdfa-in-html/#additional-rdfa-processing-rules](http://www.w3.org/TR/rdfa-in-html/#additional-rdfa-processing-rules) 此外，xmlns 大多是冗余的，前缀由[http://www.w3给出的初始上下文定义.org/2011/rdfa-context/rdfa-1.1.html](http://www.w3.org/2011/rdfa-context/rdfa-1.1.html)和[http://www.w3.org/2011/rdfa-context/html-rdfa-1.1](http://www.w3.org/2011/rdfa-context/html-rdfa-1.1)

# math - 围绕任意锚点的 OpenGL 变换

> ID：13067717
> 
> 赞同：0
> 
> 时间：2012-10-25T11:36:49.677
> 
> 标签：math, opengl, 3d

我正在使用可编程管道（OpenGL 4）。问题如下。我有称为“平面”的默认原语，它有 4 个顶点 - 在剪辑空间坐标 [-1, 1] 范围内定义。我从不直接移动它们来缩放平面，而是将比例应用于模型矩阵。因此，例如，要获得宽度 =100，高度 = 50 的平面，我缩放平面：

```
_modelMatrix.scale(100/2,50/2,1); 
```

我还有一个锚点，它定义了平面的中心，并且可以四处移动以偏移局部中心。问题：一切正常，直到我在移动枢轴后开始缩放平面。例如，如果平面 width=100 和 height=100 ，我想将中心偏移到平面的左上角我将模型矩阵转换为当前位置 + 添加 x 和 y 偏移值（50 和 -50）。我让中心在那里正常。但是，当我再次缩放平面时，枢轴中心不会保持相对于新的比例，但由于它不随对象一起缩放而发生偏移。确保定义的锚点相对于新比例进行调整的正确方法是什么？我知道在固定管道中，通过添加锚点偏移很容易解决通过 API 调用定义顶点时，直接到顶点，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:08:22.867

这是一个[标准的变换顺序问题](https://nicolbolas.github.io/oldtut/Positioning/Tut06%20Fun%20with%20Matrices.html)。*解决方案是以正确的顺序*应用转换。如果你想缩放然后偏移，那么就这样做。如果要偏移然后相对于新偏移进行缩放，请这样做。两者都不是“正确的”；这一切都取决于你想要什么。

对于您的情况，您需要先应用比例，然后再进行翻译。假设您正在与列主矩阵进行右乘，这意味着您*最后*提供比例。

# arduino - 如何处理 Arduino 退货

> ID：13067720
> 
> 赞同：1
> 
> 时间：2012-10-25T11:37:06.540
> 
> 标签：arduino

不得不问这个问题我感到非常愚蠢，但是我该如何处理返回值呢？

例如，我有这个代码：

```
int x = 0;

void setup(){
  Serial.begin(9600);
}

void loop(){
  int y = calc(x);
  Serial.println(y);

  delay(500);
}

int calc(int nmbr){
 int i = nmbr + 1;
 return i; 
} 
```

我如何使它 x 上升？基本上，我想看到它变成 0、1、2、3、4、5 等等，我知道这很容易用 for() 完成，但我想知道如何处理返回值，而不是如何处理创建一个计数器。

解决方案可能很简单，当我看到它时我会捂脸，但过去 30 分钟我一直在看我的屏幕，我完全被困在这个问题上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:46:35.550

你没有改变`x`，你正在改变另一个变量`nmbr`，因为你是`x`按值传递的，这是一个副本`x`，你可以通过引用传递它，或者因为`x`是全局的，你可以这样做：

```
int calc() {
 return x++;
} 
```

但实际上，您应该只使用 for 循环 :)

```
int x;
for (x=0; x<10; x++) {
  Serial.println(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:55:05.457

Mux的回答很好。我会添加更多的品种。首先，只需将函数返回值分配回`x`：

```
loop() {
    x = calc( x );
    Serial.println( x );
} 
```

其次，使用按引用调用，在其中传递一个指针`x`而不是`x`.

```
void loop() {
    int y = calc( &x );
    Serial.println( y );
}

int calc( int *nmbr ) {
    *nmbr++;
} 
```

[阅读“C 编程语言”](http://en.wikipedia.org/wiki/The_C_Programming_Language)以了解该语言及其可能性真的很有帮助。祝你好运 ：-）

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:51:50.277

尝试：

```
int y = 0;

void setup(){
  Serial.begin(9600);
}

void loop(){
  y = calc(y);
  Serial.println(y);

  delay(500);
}

int calc(int nmbr){
 int i = nmbr + 1;
 return i; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T07:44:20.200

您可以声明为静态 int ，而不是声明为 int 。

```
#include <stdio.h>

void func() {
    static int x = 0; // x is initialized only once across three calls of func() and x will get incremented three 
                          //times after all the three calls. i.e x will be 2 finally
    printf("%d\n", x); // outputs the value of x
    x = x + 1;
}

int main() { //int argc, char *argv[] inside the main is optional in the particular program
    func(); // prints 0
    func(); // prints 1
    func(); // prints 2
    return 0;
} 
```

# perl - lftp安装失败

> ID：13067722
> 
> 赞同：0
> 
> 时间：2012-10-25T11:37:09.403
> 
> 标签：perl, installation, centos, centos6, lftp

我尝试在我们的 CentOS 6 服务器上安装 lftp。

首先我尝试了这个：

```
yum install lftp 
```

但我得到：“没有可用的软件包 lftp”

其次，我下载了 rpm 并尝试安装它。

```
rpm -Uvh /root/src2/lftp-4.3.8-1.el6.rfx.x86_64.rpm 
```

我得到：“错误：依赖失败：lftp-4.3.8-1.el6.rfx.x86_64 需要 perl(String::CRC32)”

我试图通过以下方式解决这个问题：

```
perl -MCPAN -e shell 
```

和

```
install String::CRC32 
```

（还有另一个问题，但我也可以通过安装 YAML 模块来解决它）

终于成功了。

现在安装的模块列表（instmodsh）： 安装的模块有： ExtUtils::MakeMaker Geography::Countries IP::Country Mail::SPF Mail::SpamAssassin Net::DNS::Resolver::Programmable Perl String::CRC32 YAML razor -代理

如果我尝试重新运行 rpm install，我会收到相同的错误消息。“错误：依赖失败：lftp-4.3.8-1.el6.rfx.x86_64 需要 perl(String::CRC32)”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:11:01.220

必须通过安装 String::CRC32 的预打包版本来满足依赖关系。对于 CentOS 6，这似乎是 perl-String-CRC32-1.4-9.el6.x86_64.rpm（您可用的软件包可能有不同的版本号）。

# javascript - 网页元素的交互式指南？

> ID：13067730
> 
> 赞同：0
> 
> 时间：2012-10-25T11:37:30.137
> 
> 标签：javascript, css, user-interface, documentation, usability

[pageguide.js](http://tracelytics.github.com/pageguide/)通过在页面上覆盖帮助气球来显示有关网页元素的使用帮助。这个概念很棒，但是 pageguide.js 不支持 IE8，很难自定义（例如字体大小），而且有点慢。

有没有类似的东西会更好，尤其是在 IE8 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:46:32.783

这是链接：[http](http://tympanus.net/codrops/2010/12/21/website-tour/) ://tympanus.net/codrops/2010/12/21/website-tour/ ，可能会有所帮助。

演示链接：[http ://tympanus.net/Development/WebsiteTour/](http://tympanus.net/Development/WebsiteTour/)

下载链接：[http ://tympanus.net/Development/WebsiteTour/WebsiteTour.zip](http://tympanus.net/Development/WebsiteTour/WebsiteTour.zip)

这是一个演示如何使用 jQuery 创建网站导览或演练。如果您开始游览，您将在每个步骤中看到工具提示，解释网站的某个部分。

# android - 为什么我不能在 Eclipse 中使用 Java 7 在 android 上开发？

> ID：13067732
> 
> 赞同：2
> 
> 时间：2012-10-25T11:37:31.753
> 
> 标签：android, eclipse, intellij-idea, java-7

当我尝试在 Java SDK 设置为 1.7 的 Eclipse 中构建 Android 项目时，出现以下错误：

```
Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

我明白，将 SDK 设置为 1.6 是可行的（它是整个堆栈溢出），但这是我的问题：为什么我能够通过 IntelliJ Idea IDEA 使用 JDK 1.7 开发和部署 android 应用程序？

我可以使用多个 catch 块、菱形运算符，在虚拟和真实的 Android 设备上构建并运行它，没有问题。那么，为什么 Eclipse（以及所有社区）试图告诉我，我需要使用 Java 1.6？

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:09:25.590

Android 并未正式支持 Java 7。Java 7 的某些功能可能会编译为 dalvik VM 可以理解的字节码，但不能保证。

# android - 使用 Robolectric 测试 DialogFragments

> ID：13067735
> 
> 赞同：15
> 
> 时间：2012-10-25T11:37:36.667
> 
> 标签：android, unit-testing, robolectric, android-dialogfragment

我有几个关于`DialogFragment`使用 Robolectric 测试课程的问题，因为我在 Internet 上遇到了关于这个主题的完全缺乏信息。

1.  传递给的正确论点是`onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)`什么？
2.  我无法将参数传递给`DialogFragment`，我正在使用以下方法：

    ```
    activity = new Activity();
    dialog = new DialogFragment();
    Bundle bundle = new Bundle();
    dialog.setArguments(bundle);
    FragmentManager fm = activity.getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    ft.add(dialog, "fragment");
    ft.commit(); 
    ```

每当代码尝试访问参数时，它都会以`NullPointerException`.

将高度赞赏有关这些主题的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T05:58:40.757

你用`DialogFragment`错了。您不应该提交片段，而是调用`show`.`DialogFragment`

```
activity = new Activity();
dialog = new DialogFragment();
Bundle bundle = new Bundle();
dialog.setArguments(bundle);
FragmentManager fm = activity.getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
dialog.show(ft, "fragment"); 
```

# asp.net-mvc-3 - 使用淘汰赛和 ajax 应用程序在操作之间共享视图

> ID：13067736
> 
> 赞同：0
> 
> 时间：2012-10-25T11:37:36.637
> 
> 标签：asp.net-mvc-3, knockout.js, asp.net-mvc-4

我有一个应用程序，可以在选项卡控件中同时打开许多视图。

我在所有观点中都使用淘汰赛。

我有两个动作，如下所示：

```
 public ActionResult Edit()
    {
        ViewData["Mode"] = "Edit";
        return PartialView("AddOrEdit", new ParametroModel() { Codigo = "banco", Descricao = "String de conexao do banco de dados" });
    }

    public ActionResult Add()
    {
        ViewData["Mode"] = "Add";
        return PartialView("AddOrEdit", new ParametroModel() { Codigo = "banco", Descricao = "String de conexao do banco de dados" });
    } 
```

两者都共享相同的局部视图“AddOrEdit”，请按照我的观点：

```
@model CCL.Apoio.Web.Models.ParametroModel
@{
    var isEdit = ViewData["Mode"] == "Edit";
    var isAdd = ViewData["Mode"] == "Add";
}

@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "formParametro" }))
{
    @Html.Partial("_FormValidation")
    <fieldset>
        <legend>Dados do parâmetro</legend>
        <dl>
            <dt>
                <label>Código</label></dt>
            @if (isAdd)
            {
                <dd>@Html.TextBoxFor(m => m.Codigo)</dd>
            }
            else
            {
                <dd>@Html.DisplayFor(m => m.Codigo)</dd>
            }
        </dl>
        <dl>
            <dt>
                <label>Descrição</label></dt>
            <dd>
                @Html.TextAreaFor(m => m.Descricao)</dd>
        </dl>
        <dl>
            <dt>
                <label>Valor</label></dt>
            <dd>
                @Html.TextAreaFor(m => m.Valor)
            </dd>
        </dl>

        <dl>
            <dt>&nbsp;</dt>
            <dd>
                <input type="submit" value="Cadastrar" onclick="" /></dd>
        </dl>
    </fieldset>
}

<script type="text/javascript">
    @if (isEdit)
    {
        <text>
        var parametroEditModel = ko.mapping.fromJSON('@Html.Raw(Json.Encode(Model))');
        parametroEditModel.Save = function () {
            ModuloHelper.ajaxPut('/Api/Parametros', parametroEditModel); //Post data
        };
        ko.applyBindings(parametroEditModel, document.getElementById("formParametro"));
        </text>
    }
    else if (isAdd)
    {
        <text>
        var parametroAddModel = ko.mapping.fromJSON('@Html.Raw(Json.Encode(Model))');
        parametroAddModel.Save = function () {
            ModuloHelper.ajaxPost('/Api/Parametros', parametroAddModel);
        };
        ko.applyBindings(parametroAddModel, document.getElementById("formParametro"));
        </text>

    }
</script> 
```

在我看来，我有两个可观察的视图模型，一个用于“添加”模式，另一个用于“编辑”模式。我不能对两种模式使用相同的视图模型，因为打开两个操作时，客户端会有两个同名的对象。我这样做错了吗？

我想知道这是否是实现这一目标的更好方法。有没有人可以提出另一种更好的方法来做我想做的事？

tks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:06:04.033

我不确定我是否完全理解这个问题，但从我收集的信息来看，相同的局部视图可能在选项卡控件的同一页面上存在两次：一个用于添加，一个用于编辑。但是，您只希望他们能够在添加时输入 Codigo 值。编辑是否应该使用现有的 ParametroModel？

首先，我建议您使您的表单 ID 独一无二（也许只需附加一个随机的后缀）。这样，当您将绑定应用到表单时，您始终可以确保您正在对正确的表单执行此操作。其次，看起来除了变量名称之外，添加和编辑之间的 JavaScript 没有区别。你不妨把它浓缩成一个。我注意到的最后一件事是表单元素上没有淘汰数据绑定属性。你得到这个工作了吗？除此之外，只要在您的视图中没有其他地方您`ko.applyBindings(someViewModel)`在此脚本执行后做一个毯子，它就应该可以正常工作。

# javascript - @override 一个方法，谷歌闭包编译器

> ID：13067737
> 
> 赞同：3
> 
> 时间：2012-10-25T11:37:42.063
> 
> 标签：javascript, inheritance, google-closure-compiler, jsdoc

我正在尝试覆盖超类的方法并使用 Google Closure Compiler 编译代码，但我收到有关错误类型的警告。

```
/Users/Jan/dev/cro/public/app/js/LibraryController.js:55: WARNING -
  mismatch of the setState property type and the type of the property it overrides
  from superclass app.Controller
original: function (this:app.Controller, Object): undefined
override: function (this:app.LibraryController, Object, string, string): undefined
app.LibraryController.prototype.setState = function (state, section, article) { 
```

如您所见，我没有更改 super 方法接受的参数类型，也没有更改返回的类型。

有谁知道如何解决这个问题？谢谢。

为了澄清，这里是各个方法的定义。

```
/**
 * @param {!Object} state The new state.
 */
app.Controller.prototype.setState = function (state) { ... };

/**
 * @param {!Object} state The new state.
 * @param {string} section A section ID.
 * @param {string} article An article ID.
 * @override
 */
app.LibraryController.prototype.setState = function (state, section, article) { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T13:07:27.767

被覆盖的方法必须具有相同（或至少非常相似）的签名。具体来说，子类方法必须能够在任何可以使用基类的地方使用。查看完整的讨论：[https ://groups.google.com/d/topic/closure-compiler-discuss/o_CMZAvFOLU/discussion](https://groups.google.com/d/topic/closure-compiler-discuss/o_CMZAvFOLU/discussion)

您在上面发布的错误消息表明，覆盖方法比原始方法具有更多**必需**的参数，这是明确不允许的。但是，您可以有更多**可选**参数。

# c# - 在 C# .NET 中，如何读取具有基于 ascii 的专有编码的文本文件

> ID：13067738
> 
> 赞同：4
> 
> 时间：2012-10-25T11:37:48.723
> 
> 标签：c#, .net, character-encoding, binaryfiles

我的专有文本编码使用所有 256 字节值，较低的 128 字节值与 ascii 基本相同（重要的东西，即控制字符、空格、换行符都完全相同）。我希望能够在 C# .NET 中将这个文件作为字节读取，并且仍然保持逐行读取它并对其进行正则表达式搜索的能力。在 C# .NET 中执行此操作的最佳方法是什么？

我意识到，如果我的编码只使用前 128 字节值，这将很简单。我只是不希望较高的字符意外转换为 unicode 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:40:45.227

听起来您只想实现自己的`Encoding`. 这样做相当简单，然后你可以将它传递给`StreamReader`构造函数（或`File.OpenText`等）。

如果您查看[我（多年前）编写的用于处理 EBCDIC 的代码](http://www.yoda.arachsys.com/csharp/ebcdic/)，您应该能够将其用作合理的起点。

顺便说一句，与 ASCII 的重叠似乎与此无关。

> 我只是不希望较高的字符意外转换为 unicode 值。

每当您将*任何*二进制数据转换为文本时，您都在转换为 Unicode 值。这就是.NET 中文本的定义方式。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-25T11:50:09.407

您可以在 strem 阅读器中读取文件，如下所示：

```
StreamReader sr = new StreamReader("C:\\Details.txt", ASCIIEncoding.ASCII); 
```

# magento - Magento：如何使用布局在网格块中设置参数？

> ID：13067741
> 
> 赞同：1
> 
> 时间：2012-10-25T11:37:54.917
> 
> 标签：magento, layout

我正在尝试使用`<action method='setMyParam'>` 然后设置参数我试图在类块中读取它但未设置参数。

我正在尝试`_prepareLayout()` 在块类中的方法中阅读它我猜这个问题是由这个方法引起的，因为选择错误......

任何的想法 ？

这里XML我的代码（我认为没有错误）

```
<adminhtml_mymod_log>
    <reference name="content">
        <block type="mymod/adminhtml_myblock" name="myname.index" >
            <action method="setLogType">
                <params>ship</params>
            </action>
        </block>
    </reference>
</adminhtml_mymod_log> 
```

**更新：**

问题是该`set`方法是在之后调用的`_prepareLayout()`，我是对的，我应该选择一些不同的方法来读取参数：
- 类似于`AfterPrepareLayout()`...

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:18:18.260

不幸的是，没有什么像函数`AfterPrepareLayout().` 但是，您可以使用`_beforeToHtml()`，它被调用早于`_prepareСolumns()`并且`_prepareСollection()`像这样：

```
protected function _beforeToHtml()
{
    print_r($this->getLogType());die; // display "ship"
    return parent::_beforeToHtml();
} 
```

# python - 转换为 UTF-8（再次）

> ID：13067748
> 
> 赞同：4
> 
> 时间：2012-10-25T11:38:20.677
> 
> 标签：python, utf-8, character-encoding

我有这个字符串`Traor\u0102\u0160`

`Traor\u0102\u0160`应该生产`TraorÃ©`。然后`TraorÃ©`utf-8 解码应该产生`Traorè`

我怎样才能将其转换为`Traorè`？

什么样的字符是`Traor\u0102\u0160`？统一码？

我已经多次阅读此[http://docs.python.org/howto/unicode.html#encodings 。](http://docs.python.org/howto/unicode.html#encodings)但我仍然很困惑。

我通过以下请求获得此数据：

```
import json
import requests

# making a request to get this json
r = requests.get('http://cdn.content.easports.com/fifa/fltOnlineAssets/2013/fut/items/web/199074.json')
print r.json 
```

## 解决方案

```
#! /usr/bin/env python
# -*- coding: utf-8 -*-
import json
import requests

headers = {'Content-Type': 'application/json'}

r = requests.get('http://cdn.content.easports.com/fifa/fltOnlineAssets/2013/fut/items/web/199074.json', headers=headers)

print r.content

#prints
{"Item":{"FirstName":"Lacina","LastName":"Traoré","CommonName":null,"Height":"203","DateOfBirth":{"Year":"1990","Month":"8","Day":"20"},"PreferredFoot":"Left","ClubId":"100766","LeagueId":"67","NationId":"108","Rating":"78","Attribute1":"79","Attribute2":"71","Attribute3":"45","Attribute4":"69","Attribute5":"50","Attribute6":"72","Rare":"1","ItemType":"PlayerA"}} 
```

基本上我需要设置发送正确的标题。

谢谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T13:42:59.767

您需要告诉请求[期望什么编码](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)：

```
>>> import requests
>>> r = requests.get(url)
>>> r.encoding = 'UTF-8'
>>> r.json[u'Item'][u'LastName']
u'Traor\xe9' 
```

否则，你会得到这个：

```
>>> r = requests.get(url)
>>> r.json['Item']['LastName']
u'Traor\u0102\u0160' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T16:09:50.263

您遇到了一个错误`requests`；当服务器未设置显式编码时，`requests`用于[`chardet`](http://pypi.python.org/pypi/chardet)对编码进行有根据的猜测。

在这种特殊情况下，它会出错。`chardet`认为它是`ISO-8859-2`而不是`UTF-8`。该问题已报告给[问题 765](https://github.com/kennethreitz/requests/issues/765)`requests`的维护者。

维护人员关闭了该问题，将问题归咎于服务器没有为响应设置字符编码。解决方法是`r.encoding = 'utf-8'`在访问之前进行设置，`r.json`以便内容正确解码而无需猜测。

但是，正如[JF Sebastian 正确指出的那样](https://stackoverflow.com/a/13069037/100297)，如果响应确实*是*JSON，那么编码必须是 UTF 系列编码之一。[JSON RFC](https://www.rfc-editor.org/rfc/rfc4627#section-3)甚至包括一个关于如何检测所使用的编码的部分。

我已经向执行此操作的项目提交了[拉取请求](https://github.com/kennethreitz/requests/pull/909)`requests`；如果您要求 JSON 解码响应，并且没有设置编码，它将检测使用的正确 UTF 编码而不是猜测。

安装此补丁后，无需显式设置编码即可加载 URL：

```
>>> import requests
>>> r = requests.get('http://cdn.content.easports.com/fifa/fltOnlineAssets/2013/fut/items/web/199074.json')
>>> r.json[u'Item'][u'LastName']
u'Traor\xe9'
>>> print r.json[u'Item'][u'LastName']
Traoré 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T12:52:14.500

对我来说，您的网站返回`"Traor\u00e9"`（[最后一个字符是`é`](http://codepoints.net/U+00E9)）：

```
r = requests.get(url)
print(json.dumps(json.loads(r.content)['Item']['LastName']))
# -> "Traor\u00e9" -> Traoré 
```

`r.json`( `r.text`) 在这里产生不正确的内容。服务器或`requests`两者都使用不正确的编码，导致`"Traor\u0102\u0160"`. JSON 文本的编码完全由其内容定义，因此无论服务器发送什么标头，都可以从[json rfc](https://www.rfc-editor.org/rfc/rfc4627)对其进行解码：

> JSON 文本应以 Unicode 编码。默认编码为
> UTF-8。
> 
> 由于 JSON 文本的前两个字符始终是 ASCII 字符 [RFC0020]，因此可以确定八位字节
> 流是 UTF-8、UTF-16（BE 或 LE）还是 UTF-32（BE 或 LE）通过查看
> 前四个八位字节中的空值模式。

```
 00 00 00 xx  UTF-32BE
       00 xx 00 xx  UTF-16BE
       xx 00 00 00  UTF-32LE
       xx 00 xx 00  UTF-16LE
       xx xx xx xx  UTF-8 
```

在这种情况下，开始时没有零字节，`r.content`否则`json.loads`如果服务器在`Content-Type`标头中发送不正确的字符编码或解决`requests`错误，您需要手动将其转换为 Unicode 字符串

# linux - 如何在没有 X11 的服务器上运行 R 脚本

> ID：13067751
> 
> 赞同：25
> 
> 时间：2012-10-25T11:38:33.297
> 
> 标签：linux, r, x11

我想运行 R 脚本并使用`png()`. Unix 服务器不支持 X11，我收到以下错误消息：

```
Error in X11(paste("png::", filename, sep = ""), g$width, g$height, pointsize,  : 
  unable to start device PNG
Calls: png
In addition: Warning message:
In png("test.png", width = 900, height = 400) :
  unable to open connection to X11 display ''
Execution halted 
```

设置环境变量

```
Sys.setenv("DISPLAY"=":0.0") 
```

或者

```
Sys.setenv("DISPLAY"=":0") 
```

在 R 脚本中没有解决问题。

此代码示例产生上述错误：

```
library(ggplot2)
library(grid)

# Some data
df = data.frame(x = c(1.2,5,3,5.3,2,9,4,6,8,0), y = c(1.5,6,2.5,5.1,2.3,8.7,4.1,6,8,0))

# Base plot
p <- ggplot(df, aes(x,y)) + geom_point() +
   scale_x_continuous(limits = c(0, 8), expand = c(0,0)) +
   scale_y_continuous(limits = c(0, 8), expand = c(0,0)) +
   geom_smooth(method="lm", se=FALSE, formula=y~x, aes(colour="2"), show_guide=TRUE, fill=NA, size=1.2) +
   geom_vline(xintercept = 3) + geom_vline(xintercept = 7) +
   opts(plot.margin = unit(c(1,1,4,1), "lines"))

# Create the text Grobs
Text1 = textGrob("Part 1")
Text2 = textGrob("Part 2")
Text3 = textGrob("Part 3")

# Add the annotations
# Segment 1
p1 = p +
     annotation_custom(grob = linesGrob(), xmin = 0, xmax = 0, ymin = 
-1, ymax = -.75) +
     annotation_custom(grob = linesGrob(), xmin = 0, xmax = 3, ymin = 
-1, ymax = -1) +
     annotation_custom(grob = linesGrob(), xmin = 3, xmax = 3, ymin = 
-1, ymax = -.75) +
     annotation_custom(grob = Text1,  xmin = 0, xmax = 3, ymin = -1.25, 
ymax = -1.25)

# Segment 2
p1 = p1 +
     annotation_custom(grob = linesGrob(), xmin = 3, xmax = 7, ymin = 
-1, ymax = -1) +
     annotation_custom(grob = linesGrob(), xmin = 7, xmax = 7, ymin = 
-1, ymax = -.75) +
     annotation_custom(grob = Text2,   xmin = 3, xmax = 7, ymin = -1.25, 
ymax = -1.25)

# Segment 3
p1 = p1 +
     annotation_custom(grob = linesGrob(), xmin = 7, xmax = 8, ymin = 
-1, ymax = -1) +
     annotation_custom(grob = linesGrob(), xmin = 8, xmax = 8, ymin = 
-1, ymax = -.75) +
     annotation_custom(grob = Text3,  xmin = 7, xmax = 8, ymin = -1.25, 
ymax = -1.25)

png("test.png", width=900, height=400)

# Code to override clipping
gt <- ggplot_gtable(ggplot_build(p1))
gt$layout$clip[gt$layout$name=="panel"] <- "off"
grid.draw(gt)

dev.off() 
```

结果`capabilities()`是：

```
 jpeg      png     tiff    tcltk      X11     aqua http/ftp  sockets 
   FALSE    FALSE    FALSE     TRUE    FALSE    FALSE     TRUE     TRUE 

  libxml     fifo   cledit    iconv      NLS  profmem    cairo 
    TRUE     TRUE    FALSE     TRUE     TRUE    FALSE    FALSE 
```

我正在通过太阳网格引擎运行脚本。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-11-11T22:04:26.363

如果您使用的是 R 3.0，请尝试`options(bitmapType='cairo')` 它对我有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T13:40:47.793

我之前回答过一次——不能制作一个期望 X11 肯定会忘记它的程序，但你可以使用虚拟帧缓冲区来“假装”X11 存在。

因此，有关详细信息和示例，请参阅[这个较旧的 SO 问题。](https://stackoverflow.com/questions/1710853/how-to-run-r-on-a-server-without-x11-and-avoid-broken-dependencies)

# c# - 如何在 javascript 的帮助下终止会话？

> ID：13067753
> 
> 赞同：0
> 
> 时间：2012-10-25T11:38:39.467
> 
> 标签：c#, javascript, asp.net, session

是否可以使用 java 脚本销毁会话？如果是的话怎么做？我正在使用带有 C# 的 Asp.Net。

帮助赞赏！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:40:52.813

如果 cookie（包含用于将用户链接到会话的会话 ID）不是`HttpOnly`，则可以在 JavaScript 中取消设置。

```
function deletecookie(name) {
        var expdate = new Date();
        expdate.setTime(expdate.getTime() - 1);
        document.cookie = name += "=; expires=" + expdate.toGMTString();
} 
```

如果是`HttpOnly`（通常，大多数与身份验证相关的 cookie 应该是！），那么您无法通过 JavaScript 影响它。JavaScript/cookies 的一个很好的描述在[这里](http://www.quirksmode.org/js/cookies.html)。

请记住，这并没有破坏会话，它只是破坏了用户与它的链接，从而有效地将他们注销。如果他们有存储在 cookie 中的 ID 记录，或者第三方截获了它，则可以通过在对您的应用程序的下一个请求中包含该 cookie 来“恢复”（或重用）会话。

更安全的方法是将 AJAX 将注销/会话销毁请求返回到您的应用程序，并实际销毁会话服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T14:50:58.377

由于 JavaScript 无法控制 asp.net 会话，因此您必须调用管理会话的服务器端代码。

您可以通过 ajax 部分调用某些页面，例如

```
$.get('~/ClearForm.aspx'); 
```

**或者**您也可以重定向到具有会话破坏代码的特定页面。例如，在注销时，我们会重定向到会破坏会话的注销页面。

# iphone - 从 NotificationCenter 中删除 LocalNotifications (iOS 6)

> ID：13067755
> 
> 赞同：6
> 
> 时间：2012-10-25T11:38:53.547
> 
> 标签：iphone, ios6, uilocalnotification

我在管理 LocalNotifications 的一个方面遇到问题 - 在 iOS 6 中删除单个通知。

![在此处输入图像描述](../Images/6d8c6ee024bb56b8ae3c45206a219304.png)

我能够创建一个带有文本内容和触发日期的 LocalNotification 并且它可以工作。

在 iOS 5 上，通知在主屏幕上以 AlertView 的形式出现，带有两个按钮，并在触摸任一按钮后消失。我可以使用 取消通知的触发`[[UIApplication sharedApplication] cancelLocalNotification:theNotification]`。这里没有问题。

在 iOS 6 中，通知发生在通知中心，如上图所示。如果我使用 取消它`[[UIApplication sharedApplication] cancelLocalNotification:theNotification]`，它不会触发 - 它可以工作。但是火了之后...

**我的问题：**

我无法从通知中心删除这个单一触发的通知。例如，我希望通知在被触摸后消失，或者在应用程序内部的某些操作完成后消失。

**我尝试了什么：**

*   using `[[UIApplication sharedApplication] cancelLocalNotification:theNotification]`- 取消通知触发（实际上没有必要，因为通知**已经**触发了），但不会从通知中心删除触发的通知
*   从`[[UIApplication sharedApplication] scheduledLocalNotifications]`数组中删除项目 - 不起作用，因为这个函数总是返回空数组，无论设置了多少（工作！）通知（有人知道为什么吗？）

**我现在在做什么**

我正在使用删除所有通知`[[UIApplication sharedApplication] cancelAllLocalNotifications]`-它会取消它们并从通知中心删除，然后再创建它们，而没有我想删除的通知。

如您所见，这是相当愚蠢和多余的解决方案，但到目前为止我找不到更好的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:29:02.990

试试这个.....也许这有帮助......从你想清除所有通知的地方写下这段代码。

```
 [[UIApplication sharedApplication] setApplicationIconBadgeNumber:1];
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
    [[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

删除一个通知

您可以从以下位置获取一系列预定通知：`@property(nonatomic,copy) NSArray *scheduledLocalNotifications`

通过您选择的索引号获取您想要的，然后将 UILocalNotification* 传递给 `- (void)cancelLocalNotification:(UILocalNotification *)notification.`

您可以在本地通知的用户信息中保存唯一的键值。获取所有本地通知，遍历数组并删除特定通知。

代码如下，

```
UIApplication *app = [UIApplication sharedApplication];
NSArray *eventArray = [app scheduledLocalNotifications];
for (int i=0; i<[eventArray count]; i++)
{
    UILocalNotification* oneEvent = [eventArray objectAtIndex:i];
    NSDictionary *userInfoCurrent = oneEvent.userInfo;
    NSString *uid=[NSString stringWithFormat:@"%@",[userInfoCurrent valueForKey:@"uid"]];
    if ([uid isEqualToString:uidtodelete])
    {
        //Cancelling local notification
        [app cancelLocalNotification:oneEvent];
        break;
    }
} 
```

# javascript - 是否可以在主服务器以外的另一台服务器上安装 ExpressionEngine 管理界面？

> ID：13067761
> 
> 赞同：0
> 
> 时间：2012-10-25T11:39:14.660
> 
> 标签：javascript, php, expression, expressionengine

我有一个使用 ExpressionEngine 框架创建的网站。我想知道是否可以让管理员接口连接到主服务器以外的服务器。如果是，请说明如何实施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:40:17.357

您可以考虑一些事情来做到这一点，是的，我已经为客户做到了这一点。

a) 必须设置数据库服务器权限以允许主 Web 服务器（在我们的环境中，F5 负载平衡器后面总是至少有两个 Web 服务器）和您的“管理员”Web 服务器访问同一个数据库，因为它们都需要访问单个EE数据库中的数据。

b) 您的 Web 服务器和“管理”服务器需要能够访问相同的文件结构，在我们的环境中，这将是冗余头 Netapp 存储系统上的 NFS 挂载点，但任何类型的 NFS 或真正共享像 GlusterFS 等文件系统。因为任何文件更改、上传、将模板另存为文件等，所有 Web/管理服务器都需要看到。

已经看到了设置此类配置的几个原因。

a) 如果您的主/公共网络服务器正在处理过多的流量、过载等，您仍然可以登录到管理界面，并通过公共网络服务器上的管理服务器删除对上传文件等内容的处理.

b) 完全锁定来自公共 Internet 的管理访问，在公司防火墙后面设置“管理”服务器，允许内部管理和发布到 EE。

无论如何，这实际上与正常使用 admin.php 没有什么不同，但再次需要正确设置，以便所有 Web 服务器都可以访问相同的文件和相同的单个数据库/数据库服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T15:43:23.400

我很好奇这在技术上是否可行，例如，如果您可以将原始服务器安装为驱动器/卷并具有自定义控制面板模块，该模块可以根据域等限制访问，我想您可能可以做到。但是该站点可能与特定域相关联，因此我不知道它是否会损坏，或者您是否可以破解某些东西以使其正常工作……真的不能说。您也可以阻止服务器端的访问，例如在您的虚拟主机或 htaccess 或原始服务器上的任何配置中，只是切断对控制面板的访问，而在另一台服务器上切断对控制面板中内容之外的所有内容的访问面板（虽然我不确定这将如何工作，如果 CP 依赖于您需要公开的东西......）。

我不知道这是否会导致任何许可问题。

这一切都应该是可能的，问题是涉及多少工作/破解，你会遇到什么警告（与附加组件冲突，CI / EE如何工作......）以及其中有多少是可以/可行的你的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T13:13:09.950

不，这是不可能的。如果您想在单独的域上拥有管理界面，您可以考虑使用 MSM。但是单独的服务器，目前是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:31:25.803

不，它不是 - 您的模板和系统文件必须位于同一台服务器上（尽管您的数据库可能位于不同的服务器上）。

# java - 同步关键字

> ID：13067764
> 
> 赞同：2
> 
> 时间：2012-10-25T11:39:17.213
> 
> 标签：java, android, multithreading

我正在开发一个下载图像并将它们保存到 sdcard 的应用程序。与 sdcard 交互的类看起来像这样......

```
public class SDCardImageManagerImp implements SDCardImageManager {

    private Context context;

    @Inject
    public SDCardImageManagerImp(Context context) {
        this.context = context;
    }

    @Override
    public void saveToSDCard(String id, Bitmap bitmap) throws FileNotFoundException {
        FileOutputStream outputStream = context.openFileOutput(id, Context.MODE_PRIVATE);
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
    }

    @Override
    public Bitmap getImage(String id) throws FileNotFoundException {
        return BitmapFactory.decodeStream(context.openFileInput(id));
    }

    @Override
    public void deleteImage(String id) {
        context.deleteFile(id);
    }

} 
```

这个类是一个单例，因为我读取写入具有多个线程的磁盘会影响性能。但是我确实有多个线程下载数据并将其发送到此类。所以我的问题是这个类中的所有方法都应该对它们进行同步密钥工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:06:16.120

为什么不使用`writerThreadPool = Executors.newFixedThreadPool(numThreads)`. 这样，`writerThreadPool.submit()`当线程可用时，您调用允许图像排队等待写入。线程池将为您处理 io 限制，因为它只允许您创建的给定数量的线程。并且通过使用`Executors.newFixedThreadPool`，您可以通过更改`numThreads`以允许更多或更少的线程获得所需的性能来轻松地使用线程数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:55:36.027

我不知道假设是否有效（您应该限制对 SD 卡的 I/O），但即使是这样，您也可能希望使其可配置，同步关键字不会让您这样做。

像计数[信号量](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)（以及设置许可数量的配置文件）之类的东西怎么样？

# c++ - 在调用析构函数后使用对象

> ID：13067765
> 
> 赞同：1
> 
> 时间：2012-10-25T11:39:17.990
> 
> 标签：c++, exception, destructor

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

**代码：**

```
#include <iostream>
using namespace std;

class B{
    public:
    int b;
    B():b(1){}
    ~B(){cout << "Destructor ~B() " << endl;}
};

class A{
    public:
    B ob;
    A()try{throw 4;}
    catch(...){cout << "Catched in A() handler : ob.b= " << ob.b<<endl;}
};

int main()try{
A t;

}
catch(...){cout << "CATCHED in Main" <<  endl;} 
```

**输出：**

```
Destructor ~B() 
Catched in A() handler : ob.b= 1
CATCHED in Main 
```

我的问题是如何访问其析构函数调用完成`b`的对象的成员变量。`ob`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T11:42:29.143

使用被破坏的对象是未定义的行为。这意味着您现在可能会遇到这种行为，但不能保证您会在其他时候获得这种行为。未定义的行为比常规错误更危险，因为它更难检测，如本例所示。

更新：在一些评论之后，我将解释为什么 OP 的代码会产生该输出。

`try`功能块在 C++ 中是一个有点晦涩的特性。您可以将函数的整个主体包含在`try`块内，并带有对应的`catch`. 这是，而不是：

```
void foo()
{
  try
  {
    //...
  }
  catch (/*whatever*/)
  {
    //...
  }
} 
```

你可以写：

```
void foo()
try
{
    //...
}
catch (/*whatever*/)
{
  //...
} 
```

这实际上并不太有用，但对构造函数可能有点用处，因为这是将初始化列表包含在`try`块内的唯一方法。因此，`A`构造函数的 OP 代码等效于：

```
A()
try
: b()
{
  throw 4;
}
catch(...)
{
  cout << "Catched in A() handler : ob.b= " << ob.b<<endl;
} 
```

我说这只是有点用，因为你不能使用你在`catch`块内构造的对象；如果你在`try`块内抛出异常，则异常将离开构造函数体，因此该对象将永远不会被构造，并且任何构造的数据成员将在进入`catch`块之前立即被破坏。但它可能有一些用于记录目的。

现在，众所周知，构造函数（假设我们没有使用`nothrow`版本）只能做两件事：

1.  返回一个构造对象
2.  抛出异常

在这个构造函数中，我们抛出异常，但异常被捕获在`catch`块中。那么现在会发生什么？调用构造函数的代码会返回什么？我们不能返回一个构造的对象，因为我们没有，所以只有一个选择：`catch`块必须抛出。这实际上是标准在这种情况下的要求。如果我们不显式地抛出，编译器将`throw;`在块的末尾默默地添加一条指令`catch`。因此，详细说明一下，构造函数等效于以下内容：

```
A()
try
: b()
{
  throw 4;
}
catch(...)
{
  cout << "Catched in A() handler : ob.b= " << ob.b<<endl;
  throw;
} 
```

这就是异常被捕获两次的原因：一次在`A`构造函数中，一次在`main()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T11:43:31.717

因为虽然对象已经被销毁，但它所占用的实际内存仍然存在。但是，它是*未定义的行为*，可能有效，也可能无效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T11:55:20.930

这可能是您的编译器中的错误。

当我运行您的代码时，会以正确的顺序调用析构函数。输出是：

```
Catched in A() handler : ob.b= 1
Destructor ~B() 
```

`catch`而且我无法想象执行in的任何原因`main`。异常已经在`A::A()`.

**更新**

我被编辑弄糊涂了。最初，初始化列表的 try/catch 语法有所不同。现在我可以重现 OP 的输出，它确实是 UB。我撞车了。

# cakephp - 在获取之前通过 user.email 搜索保存 cakephp

> ID：13067769
> 
> 赞同：0
> 
> 时间：2012-10-25T11:39:46.047
> 
> 标签：cakephp, add, registering

这是我的公共添加功能，但有一点错误，

如果用户（他的电子邮件或用户名）存在，这个函数无论如何都会保存它！

那么，我如何查询以通过 [user][email] 进行搜索，然后通过 [user][username] 进行搜索以确认将进入数据库的用户名和电子邮件是包含用户名和电子邮件的新数据

```
 public function add() {
    if ($this->request->is('post')) {
       ////here it should be the query !
        $this->User->create();
        if ($this->User->save($this->request->data)) {
    $this->redirect(array('controller' => 'users', 'action' => 'login' ));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('الموقع مش عارف يسيفك يا فقيع, حاول تاني'));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:25:44.463

在您的用户模型中添加验证

```
public $validate = array(
    'username' => array(
        'emailEmpty' => array(
            'rule' => 'notEmpty',
            'message' => 'Sorry, email cannot be empty',
            'last' => true,
        ),
        'email' => array(
            'rule' => array('email'),
            'message' => 'Must be a valid email',
            'last' => true,
        ),
        'emailExists' => array(
            'rule' => 'isUnique',
            'message' => 'Sorry, this email address is already in use',
        ),
    ),

); 
```

# python - 组合正则表达式

> ID：13067776
> 
> 赞同：-2
> 
> 时间：2012-10-25T11:40:32.040
> 
> 标签：python, regex

在Python中，我想结合

```
\s*\(r?["|\'](?P<pattern>[^\'"]+)["|\'],\s*["|\'](?P<view>[^\'"]+)["|\']\), 
```

和

```
\s*url\(r?["|\'](?P<pattern>[^\'"]+)["|\'],\s*["|\'](?P<view>[^\'"]+)["|\']\), 
```

我以为是

```
\s*[url]?\(r?["|\'](?P<pattern>[^\'"]+)["|\'],\s*["|\'](?P<view>[^\'"]+)["|\']\), 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:47:17.740

您使用`[url]`which is `u`or `r`or `l`。

解决方案是使用[非捕获组](http://docs.python.org/howto/regex.html#non-capturing-and-named-groups) `(?:url)`而不是`[url]`.

所以，最后，你的正则表达式看起来像：

```
\s*(?:url)?\(r?["|\'](?P<pattern>[^\'"]+)["|\'],\s*["|\'](?P<view>[^\'"]+)["|\']\), 
```

# c# - 在 C# 中将二进制文件存储到 Oracle Blob 字段

> ID：13067778
> 
> 赞同：0
> 
> 时间：2012-10-25T11:40:36.197
> 
> 标签：c#, oracle, enterprise-library

我们有自己的基于 Microsoft Enterprise Data Access 块的 DataAccess 库。

我有将二进制文件内容作为输入参数并将其存储到数据库中的存储过程。

```
byte[] imageFileByteArray = this.GetByteArrayFromFile(imageFile);
this.dataAccess.AddCmdParameter("DOCIMAGE", System.Data.DbType.Binary, imageFileByteArray); 
```

此代码在使用 SQL 数据库时工作正常，但是当我切换到 Oracle 时，我收到异常说“参数类型错误”

在 oracle db 中，DOCIMAGE 列被声明为 BLOB 字段。

为什么推断 Dbtype.Binary 不适用于 oracle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:45:15.350

您将需要使用带有 OracleType 枚举值 Blob 的 OracleParameter，有关更多信息，请参见此处...

[http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletype.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracletype.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:50:16.427

这可能与 OracleDbType 的不同 Oracle 推断有关`System.Data.DbType`。有对应的`System.Data.DbType.Binary`OracleDbType=Raw。您必须使用`System.Data.DbType.Object`获取 OracleDbType=Blob，有关详细信息，请参阅[http://docs.oracle.com/html/B14164_01/featOraCommand.htm中的表 3-3](http://docs.oracle.com/html/B14164_01/featOraCommand.htm)

# design-patterns - 棱镜单例设置

> ID：13067781
> 
> 赞同：1
> 
> 时间：2012-10-25T11:40:43.463
> 
> 标签：design-patterns, prism, unity-container

想要实现一种基于模式的方法来拥有一个可以在每个模块中使用的设置类。

**我有 ：**

1.  程序集中的业务对象（不引用任何内容）
2.  通用组件（基础设施）
3.  服务模块 - 实现的 IModule（在定义阶段）

**一个设置类：**

```
[Serializable]
public class  Settings
{
    public string DefaultStoreLocation
    { get; set; }
...
} 
```

它应该在应用程序启动的某个地方实例化。并且应用程序将在其生命周期内使用该单例实例。例如这里：**ApplicationSettings**

```
Settings ApplicationSettings = new Settings(); 
```

*我应该把这个设置文件放在哪里？*

*以及如何为此制定策略？*

* * *

**疑点：**

1.  在每个模块中注册类型时应该使用 ContainerControlledlifetimeManager 吗？（不确切知道如何以及何时）。
2.  应该将它放在一个简单的组件中，还是将它放在一个模块中会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:10:45.313

> 想要实现基于模式的方法

不要试图构建一个 GOF 完整的应用程序。模式是从您的代码演变而来的东西。不要仅仅因为你觉得它很酷就强迫你的代码看起来像一个模式。

`Settings`听起来像是属于您的基础设施的东西。把它放在那里。可以从任何模块引用基础结构程序集。

在引导程序中创建并填充设置。您也可以在那里向 Unity 注册它们。

```
var settings = new Settings { Foo = 1, Bar = "abc" };
container.RegisterInstance(settings); 
```

如果您的模块具有接受 Type 参数的构造函数，`Settings`则容器将在创建模块时将设置注入模块。

# mercurial - 使 CruiseControl.NET 项目显示自上次运行以来所做的更改

> ID：13067787
> 
> 赞同：1
> 
> 时间：2012-10-25T11:41:00.807
> 
> 标签：mercurial, cruisecontrol.net

我有一系列 CruiseControl.NET 目标，如下所示。第一个项目从存储库中提取变更集，并对这些变更运行快速单元测试。如果这些单元测试成功，则构建完整的产品，如果成功，则在新编译的产品上运行一个大型测试套件。

```
<project name="pullAndRunUnitTests">
    <triggers>
        <intervalTrigger seconds="300"/>
    </triggers>
    <sourcecontrol repo="$(Repo)" type="hg" revertModifications="true"/>
    <tasks>
        <nant>
            <targetList>
                <target>unitTests</target>
            </targetList>
        </nant>
    </tasks>
</project>
<project name="product">
    <triggers>
        <projectTrigger project="pullAndRunUnitTests"/>
    </triggers>
    <tasks>
        <nant>
            <targetList>
                <target>all</target>
            </targetList>
        </nant>
    </tasks>
</project>
<project name="regressionTests">
    <triggers>
        <projectTrigger project="product"/>
    </triggers>
    <tasks>
        <nant>
            <targetList>
                <target>regressiontests</target>
            </targetList>
        </nant>
    </tasks>
</project> 
```

这种设置的问题在于，只有单元测试才能正确识别出谁破坏了构建；如果链中的成功项目中断，则很难确定谁/是什么真正使事情中断。

有没有办法让 CruiseControl.NET 项目显示自上次运行以来所做的更改，或者从触发它们的项目“继承更改”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:42:02.773

可以让依赖的 CCNET 项目“继承”更改：

1.  将[修改编写器任务](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Modification_Writer_Task)添加到项目`pullAndRunUnitTests`
2.  将[修改阅读器任务](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Modification_Reader_Task)添加到项目`product`

`product`对-`regressionTests`依赖做同样的事情：

1.  将编写器任务修改为项目`product`
2.  将阅读器任务修改为项目`regressionTests`

像这样：

```
<project name="pullAndRunUnitTests">
    ...
    <tasks>
        <modificationWriter>
            <filename>changes-product.xml</filename>
            <path>..</path>
            <appendTimeStamp>True</appendTimeStamp>
        </modificationWriter>
        <nant>...</nant>
    </tasks>
</project>
<project name="product">
    ...
    <tasks>
        <modificationReader>
            <filename>changes-product.xml</filename>
            <path>..</path>
            <deleteAfterRead>True</deleteAfterRead>
        </modificationReader>
        <modificationWriter>
            <filename>changes-regressionTests.xml</filename>
            <path>..</path>
            <appendTimeStamp>True</appendTimeStamp>
        </modificationWriter>
        <nant>...</nant>
    </tasks>
</project>
<project name="regressionTests">
    ...
    <tasks>
        <modificationReader>
            <filename>changes-regressionTests.xml</filename>
            <path>..</path>
            <deleteAfterRead>True</deleteAfterRead>
        </modificationReader>
        <nant>...</nant>
    </tasks>
</project> 
```

# node.js - 路线和景观

> ID：13067792
> 
> 赞同：1
> 
> 时间：2012-10-25T11:41:25.403
> 
> 标签：node.js, routes, express

我正在使用带有express的nodejs。在对根路径的获取请求中，我想路由到索引文件。如果对路径“/game”有获取请求，我想路由到不同的源。

```
app.get('/', function(req, res){
    res.render( "index", {locals : { myLocal : "myValue"}} );
});

app.get('/game', function(req, res){
    res.render("/game/index", {locals : { myLocal : "myValue"}} );
}); 
```

第一个“get”很好，但第二个发送这个异常：

```
500 Error: failed to locate view "/game/index"
at Function.exports.compile (D:\Webstorm\myExpress\node_modules\express\lib\view.js:61:15)
at ServerResponse.res._render (D:\Webstorm\myExpress\node_modules\express\lib\view.js:417:18)
at ServerResponse.res.render (D:\Webstorm\myExpress\node_modules\express\lib\view.js:318:17)
at exports.game (D:\Webstorm\myExpress\routes\index.js:12:9) at callbacks                  (D:\Webstorm\myExpress\node_modules\express\lib\router\index.js:272:11)
at param (D:\Webstorm\myExpress\node_modules\express\lib\router\index.js:246:11)
at pass (D:\Webstorm\myExpress\node_modules\express\lib\router\index.js:253:5)
at Router._dispatch (D:\Webstorm\myExpress\node_modules\express\lib\router\index.js:280:5)
at Object.middleware [as handle] (D:\Webstorm\myExpress\node_modules\express\lib\router\index.js:45:10)
at next (D:\Webstorm\myExpress\node_modules\express\node_modules\connect\lib\http.js:204:15) 
```

这是我的文件夹结构：

```
views
  |--- game
  |      |---index.jade
  |      |---layout.jade
  |---index.jade
  |---layout.jade 
```

更新 ＃＃＃＃＃＃＃＃

我检查了 express 本身（文件：“\express\lib\view.js”，函数：“_render”）并打印出本地“options.root”。值是：“D:\Webstorm\myExpress/views”.. 这似乎不对。但我仍然想知道为什么根请求有效。我改变了这一行：

```
app.set('views', __dirname + '/views'); 
```

对此：

```
app.set('views', __dirname + '\\views'); 
```

没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:42:25.180

因为我在 Windows 机器上工作，所以我必须使用“\”而不是“/”。我对此感到困惑，因为我不必关心请求路径（ app.get("/game",..) ）而不是根索引文件。( res.render("/"); )

解决方案是：

```
app.set('views', __dirname + '\\views'); 
```

和

```
res.render('\\game\\index'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:46:03.137

Try removing the leading slash:

```
res.render("game/index", {locals : { myLocal : "myValue"}} ); 
```

or:

```
res.render("game\\index", {locals : { myLocal : "myValue"}} ); 
```

It is trying to find a file at `/game/index`, instead of `/directory/with/your/views/game/index`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:13:45.920

尝试`locals`从那里删除关键字及其相应的大括号。

# entity-framework - 管理 dbContext 的生命周期

> ID：13067793
> 
> 赞同：12
> 
> 时间：2012-10-25T11:41:29.207
> 
> 标签：entity-framework, asp.net-mvc-4, dbcontext

我想将 dbContext 的生命周期与会话的生命周期联系起来，例如，能够通过多个请求提交或放弃对 dbcontext 上的一组突变的更改。

有没有其他（更好的？）方法可以做到这一点？如果不是，那么创建和处理上下文的合适机制是什么？我正在考虑在会话结束时进行清理的静态哈希表，但也许我做错了。我也在考虑只保留那些必须处理多个请求的上下文，并保留每个操作的其余部分的想法。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T11:33:44.730

您可以使用**IoC（控制反转）**容器来管理 DBContext 的生命周期，例如**StructureMap**，步骤如下：

1.  为 MVC 4 安装 nuget 包：http: [//nuget.org/packages/StructureMap.MVC4](http://nuget.org/packages/StructureMap.MVC4)

2.  阅读快速入门： [http ://docs.structuremap.net/QuickStart.htm](http://docs.structuremap.net/QuickStart.htm)

3.  设置 DBContext 的范围：http: [//docs.structuremap.net/Scoping.htm](http://docs.structuremap.net/Scoping.htm)

您还可以使用**存储库和工作单元模式**的组合来提交或放弃对多个请求的 dbcontext 上的一组突变的更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T00:21:07.993

这个问题在下面的 SO 帖子中得到了相当优雅的回答：

[StructureMap CacheBy InstanceScope.HttpSession 不起作用](https://stackoverflow.com/questions/497564/structuremap-cacheby-instancescope-httpsession-not-working)

本质上，魔法来自以下代码（针对您的问题和更新的语法进行了调整`StructureMap`）：

```
ObjectFactory.Initialize(factory => {
    factory.For<MyContext>()
           .CacheBy(InstanceScope.HttpSession)
           .Use(new MyContext(_myConnectionString));
}); 
```

然后 - 在您的控制器中，只需使用以下命令创建对象的实例：

```
var db = ObjectFactory.GetInstance<MyContext>(); 
```

因为您的 IoC（控制反转）设置通过`StructureMap`已将实例配置为范围`HttpSession`，所以只要会话相同，您就应该每次检索相同的上下文。

但是 - 请记住，`DbContext`特别是对于对象，**这通常是一个非常糟糕的主意**- 因为您将状态跟踪对象与无状态环境混合在一起，并且很容易让自己进入一个状态，其中一个错误的交易或一个对象处于奇怪状态可能会阻止您进行任何进一步的数据库调用，直到您刷新会话。

`DbContext`物体通常被设计成非常轻巧和一次性的。完全可以让它们退出范围并在您完成它们后立即死亡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T12:04:31.423

让 DbContext 与会话一起生活并不是一个好的 idia。

1.  当您有更多请求时，它会将部分数据从数据库加载到上下文中，这会使上下文变得更大，这意味着内存问题，

2.  并且与上下文中的每个请求相比，您不会更新数据，因为另一个用户（另一个会话）可能已经更新了您已经加载到上下文中的数据。

[每个请求缓存实体框架 DbContexts](https://stackoverflow.com/questions/6580757/caching-entity-framework-dbcontexts-per-request)

并阅读此内容以供您选择，

[Asp.Net MVC 和会话](https://stackoverflow.com/questions/760872/asp-net-mvc-and-session)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T12:15:30.550

通常在这种情况下，您需要在临时存储中保留更改（如会话或 cookie 或数据库）。当您需要保存结果或查看新数据时，您会获取旧数据和更改并构建新对象。更改可以存储为新对象或动作序列。应用更改时要小心，可能会发生数据冲突。当然使用 Context\Request

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T23:20:04.150

理论上，您可以将上下文存储到可以在每个控制器中访问的 Session 字典中。但是，您可能会遇到一些线程问题，因为在存储它时，您与检索它时处于不同的线程中。如果上下文不使用线程静态变量，这可能会起作用（但我不确定），否则不会。无论如何，这是一个糟糕的设计......网络中没有人这样做......为什么要存储上下文？您可以在随后的 http 请求中以低廉的价格重新创建它。如果您需要跟踪属性的变化，还有其他更适合网络的方法。

# azure - NServiceBus 与 Azure 服务总线、全双工和多个发件人

> ID：13067800
> 
> 赞同：1
> 
> 时间：2012-10-25T11:41:45.970
> 
> 标签：azure, nservicebus

我已经实现了一个基于 NServiceBus 包（3.2.8）中的 AzureServiceBusFullDuplex 示例的小示例项目，但差别很小 - 我在云中有监听器，在本地有发送者。在我运行两个本地端点之前，它可以正常工作。当我这样做并且第二个 enapoint 发送消息时，第一个端点会收到回复。当我启动第三个端点并发送消息时，第二个端点会收到回复。

从逻辑上讲，我理解会发生什么，每个端点都订阅了回复消息合同，并且最新注册的端点收到了该类型的所有消息。但是，当我有多个相同消息类型的发送者，而云端只有一个处理程序时，我该如何实现我的场景呢？它类似于本机 Azure 服务总线队列中的会话支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:54:26.037

阿列克谢，

听起来内部端点配置了相同的输入队列，第一个接收回复的人得到它，你能验证这一点并确保它们都在不同的队列上监听吗？

亲切的问候，伊夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:10:38.833

所以我完成了我的原型使用
1) AzureServiceBusQueueConfig 中未
指定队列名称 2) 在代码中指定队列名称

```
 _configure = Configure.With()
           .DefaultBuilder()
           .Log4Net(new log4net.Appender.ColoredConsoleAppender())
           .JsonSerializer()
           .DefineEndpointName(queueName)
           .AzureServiceBusMessageQueue()
           .IsTransactional(false)
           .MessageForwardingInCaseOfFault()
           .UseInMemoryTimeoutPersister()
           .DisableSecondLevelRetries()
           .InMemorySubscriptionStorage()
           .UnicastBus()
               .DoNotAutoSubscribe()
               .LoadMessageHandlers()
           .CreateBus(); 
```

在 AzureServiceBusQueueConfig.cs 中，我发现它使用端点名称作为队列名称，如果未配置队列名称，则使用来自前面配置调用的端点名称。

# regex - 正则表达式替换匹配并删除不匹配

> ID：13067806
> 
> 赞同：0
> 
> 时间：2012-10-25T11:42:09.923
> 
> 标签：regex

有没有办法使用 Notepad++ 替换工具替换部分匹配行并删除所有不匹配的行？

例如：（引号中的字符串应替换为 123）
输入：

```
There is line with "quoted" part
There is another line 
```

预期结果：

```
There is line with "123" part 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:25:00.757

作为模式使用

```
([^"]*?)^(.*?)".*?"(.*)([^"]*$) 
```

并作为替代使用

```
$2"123"$3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T12:41:17.960

我最好的镜头：

寻找

```
(^[^\r\n]*?)("quoted")([^\r\n]*?)$((\r\n)?(?![^\r\n]*?"quoted"[^\r\n]*?$).*?$)+ 
```

用。。。来代替

```
$1"123"$3 
```

对于`""`Ωmega 答案之间的每个模式都很好，这个可以让您替换特定模式，而不是引号之间的所有内容。

解释：

*   `(^[^\r\n]*?)`: 查找任何没有换行符的字符序列（非贪婪地）
*   `("quoted")`: 后跟“引用”
*   `([^\r\n]*?)$`: 直到行尾
    *   `((\r\n)?`: 我们在新行
    *   `(?![^\r\n]*?`：向前看（否定）以避免非换行符序列
    *   `"quoted"[^\r\n]*?$)`: 后跟“引用”
*   `.*?$)+`: 一次或多次

在 np++ v6.1 中测试

# google-apps-script - 使用 myImportRange 自定义电子表格函数 - TypeError: Cannot call method "split" of undefined

> ID：13067811
> 
> 赞同：3
> 
> 时间：2012-10-25T11:42:32.727
> 
> 标签：google-apps-script, google-sheets

我正在尝试使用 ahab 的自定义 Google Apps 脚本，`myImportRange`. 我不熟悉编写自定义脚本，但我按照现有帖子中的说明进行操作，并将以下内容复制并粘贴到脚本编辑器中：

```
// to be used in the spreadsheet like ImportRange, 
// i.e. like this: =myImportRange( "key" ; "sheet!range" ; GoogleClock() )
// the third parameter - GoogleClock() - triggers an automatic update every minute.
// updated 2011-07-17 (ahab): better regex to strip sheetname of *outer* single quotes
function myImportRange(key ,sheetrange) { 
    var shra = sheetrange.split("!") ;
    if (shra.length==1) shra[1]=shra[0], shra[0]="";  

    var sheetstring = shra[0].replace( /^'(.*)'$/g , "$1") // was: replace( /'/g , "") ; updated 2011-07-17 (ahab)

    var rangestring = shra[1] 

    var source = SpreadsheetApp.openById( key )    

    if ( sheetstring.length==0 ) sheet = source.getSheets()[0] ;
    else sheet = source.getSheetByName( sheetstring ) ;

    return  sheet.getRange( rangestring ).getValues(); 
} 
```

我现在收到以下错误：

> TypeError：无法调用未定义的方法“拆分”。（第 6 行）

如果这是一个重复的问题，我很抱歉，我发现了许多与这个主题相关的主题，不幸的是，如果这种事情是如此基础，我的知识，我无法弄清楚其他答案与我的脚本有何关系。

我将非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T04:23:49.407

由于错误不够清楚，如果用户没有将范围作为字符串提供，添加类型检查将改善对用户的反馈。

```
// to be used in the spreadsheet like ImportRange, 
// i.e. like this: =myImportRange( "key" ; "sheet!range" ; GoogleClock() )
// the third parameter - GoogleClock() - triggers an automatic update every minute.
// updated 2011-07-17 (ahab): better regex to strip sheetname of *outer* single quotes
function myImportRange(key ,sheetrange) {
    if (typeof(sheetrange) != "string" throw new Error("range must be a string");

    var shra = sheetrange.split("!") ;
    if (shra.length==1) shra[1]=shra[0], shra[0]="";  

    var sheetstring = shra[0].replace( /^'(.*)'$/g , "$1") // was: replace( /'/g , "") ; updated 2011-07-17 (ahab)

    var rangestring = shra[1] 

    var source = SpreadsheetApp.openById( key )    

    if ( sheetstring.length==0 ) sheet = source.getSheets()[0] ;
    else sheet = source.getSheetByName( sheetstring ) ;

    return  sheet.getRange( rangestring ).getValues(); 
} 
```

# jquery - jQuery：在一个语句中同时选择当前元素和子元素？

> ID：13067813
> 
> 赞同：0
> 
> 时间：2012-10-25T11:42:41.620
> 
> 标签：jquery

我有一个 jquery 代码，要求我对一个元素、它的子元素和它的子元素应用相同的更改。我目前在 3 个语句中这样做：

```
 $(this).animate();      
    $(this).children().animate();       
    $(this).children().children().animate(); 
```

所有三行都执行相同的动画而无需排队。有没有办法在一个单一的声明中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:43:53.817

那个怎么样？

```
$(this).find("*").andSelf().animate(); 
```

# node.js - Node.js 异步编程——复制二进制文件流

> ID：13067814
> 
> 赞同：1
> 
> 时间：2012-10-25T11:42:42.293
> 
> 标签：node.js

我想读取文件 A 中的所有字节，从每个字节中减去 0x80，然后将结果写入文件 B。

这是一些伪代码：

```
try:
    open file A for reading
    open file B for writing

    loop until EOF:
        x = next byte from file A
        x = x - 0x80;
        write x to file B

finally:
   close file A
   close file B 
```

如何在 node.js 中使用**异步**文件系统函数来做到这一点？

我试了一下，但是当我的代码通过回调和异常处理达到六层深度时就放弃了。请教我干净的异步编程。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T04:21:28.087

*“但是当我的代码通过回调和异常处理达到六级深度时放弃了”......*

这就是所谓的“回调地狱”，它是异步编程所固有的。

## 可能的解决方案：

您可以使用我最近开发的一个***非常简单*****的库wait.for来顺序编程（如在您的伪代码中）避免回调地狱。**检查：http: [//github.com/luciotato/waitfor](http://github.com/luciotato/waitfor)

 *您也可以在 Google 上搜索“nodejs promises”、[https://github.com/kriskowal/q](https://github.com/kriskowal/q) 和“nodejs async lib”、[https://github.com/caolan/async](https://github.com/caolan/async) ， 但考虑到 promises 和异步库会增加复杂性，以便减轻回调地狱的痛苦（它们也提供了很多功能，但是以添加新概念和更多复杂性为代价）。

注意：在您的示例的特定情况下，核心节点'fs'模块- [http://nodejs.org/api/fs.html - 对](http://nodejs.org/api/fs.html)***“节点中的任何内容都不应阻塞”***进行了例外处理，并通过提供两个版本来缓解回调地狱几乎所有功能，一个标准异步和另一个阻塞 *同步。*

# javascript - Chrome工作时IOS6上Safari中的会话错误

> ID：13067815
> 
> 赞同：0
> 
> 时间：2012-10-25T11:42:44.273
> 
> 标签：javascript, google-chrome, ios6, mobile-safari

我从 UIWebview 中的构建中调用 Web 应用程序，每次都会收到会话错误，而它在 chrome 上运行良好。该错误可以在我的 iOS6 设备上的 Safari 中重现。在iOS5.1 Safari 运行更稳定。

让我想知道的是，Chrome 运行良好。正如我所读到的，他们甚至使用 UIWebView，那么 Chrome 做对了什么？我可以在我的应用程序中做任何事情来使 UIWebView 更稳定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:22:12.860

解决方案是在 iOS6 上禁用 NSURLCache。

# iphone - 如何使用 Game Center 自定义邀请好友的视图？

> ID：13067820
> 
> 赞同：0
> 
> 时间：2012-10-25T11:42:57.080
> 
> 标签：iphone, xcode, game-center, gamekit

我正在为我的应用程序使用游戏中心，它向我显示了与我的应用程序主题不匹配的游戏中心邀请的标准视图。无论如何我可以自定义邀请朋友的外观作为我的主题？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:46:21.163

看看这两个类：

*   `GKMatchRequest` [文档](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchRequest_Ref/Reference/Reference.html)
*   docs或`GKMatcher` [docs](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmaker_Ref/Reference/Reference.html#//apple_ref/occ/cl/GKMatchmaker)取决于您的应用是否基于回合制`GKTurnBasedMatch` [。](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html#//apple_ref/occ/cl/GKTurnBasedMatch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:54:18.630

简单的答案是否定的。

Game Center UI 无法更改，至少不会被 App Store 拒绝。

# javascript - javascript jquery中的分页样式

> ID：13067827
> 
> 赞同：0
> 
> 时间：2012-10-25T11:43:19.880
> 
> 标签：javascript, jquery, pagination

我有一个分页代码，如下所示。

我想为 span 应用 num_active 类，它指向活动的页面，num 用于非活动的页面。

```
 <div class="pagination"> 
        <div style="clear:both;"></div>
          <span class="prev"></span>
          <span class="num" id="1">1</span> 
          <span class="num_active" id="2">2</span> 
          <span class="num" id="3">3</span> 
          <span class="num" id="4">4</span> 
          <span class="num" id="5">5</span> 
          <span class="num" id="6">6</span> 
          <span class="next"></span>
         </div> 
```

我尝试了下面的代码，但徒劳无功。

```
      $('.pagination span').click(function(){
        $('.pagination span').addClass('num');

        this.addClass('num_active');    
      });

```

我尝试的是在分页 div 中为所有跨度添加 num 类，为我单击的跨度添加 num_active 。

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:47:01.423

```
$(".pagination span").click(function() {
  // Reset all span to `num` class
  $(".pagination span").removeClass("num_active").addClass("num"); 
  // Add `num_active` only to this.
  $(this).addClass("num_active"); 
}); 
```

# google-apps-script - 为什么我的 UiApp 在被其他用户调用时无法显示小部件？

> ID：13067828
> 
> 赞同：1
> 
> 时间：2012-10-25T11:43:21.607
> 
> 标签：google-apps-script

当用户从包含注释的电子表格单元格中删除一个值时，我想显示一个 UiApp。

在以下函数上设置了 onEdit 触发器：

```
function showDialogue() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var r = ss.getActiveCell();
  if (r.getValue() != '') return;
  if (r.getValue() == '' &&  r.getComment() != '') {
    var app = UiApp.createApplication();

    var label = app.createLabel('If you can see this, it has worked correctly.');
    app.add(label);

    var button = app.createButton('Click to Close');
    app.add(button);

    var handler = app.createServerHandler('myClickHandler');
    handler.addCallbackElement(label);
    button.addClickHandler(handler);

    r.setValue(r.getRow());

    ss.show(app);
  }

}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();
  app.close();
  return app;
} 
```

当我这样做时它工作正常，但如果另一个用户打开电子表格，UiApp 将无法正确显示。UiApp 窗口打开，但不显示任何小部件，并打开另存为对话框，提示用户保存 userAppPanel。

我已经在[这个简化的电子表格](https://docs.google.com/a/ahrosters.com/spreadsheet/ccc?key=0Ahyb6KRL_mwrdGZPekpTWnZIOTdTeVhLaDdzTVYtcVE#gid=0)中复制了这个问题，该电子表格与任何拥有链接（可以编辑）的人共享。

# ruby-on-rails - 在不实例化类的情况下调用 ruby 方法

> ID：13067831
> 
> 赞同：4
> 
> 时间：2012-10-25T11:43:42.680
> 
> 标签：ruby-on-rails, ruby, instance-methods, class-method

如果我在 Rails 活动模型方法上调用一个方法，如下所示：

```
class Foo < ActiveRecord::Base

end

Foo.first 
```

我会取回第一个活动记录。我不必实例化该类。

但是如果我创建自己的类并调用一个方法，我会得到一个异常：

```
class Person < ActiveRecord::Base
  def greeting
    'hello'
  end
end

Person.greeting 

#EXCEPTION: undefined method `greeting' for Person:Class 
```

我怎样才能让这个问题消失？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T11:47:39.890

有几种方法。最重要的两个是：实例方法和类实例方法。

`Foo.first`是一个类实例方法。它适用于类实例（`Foo`在本例中为 ）。如果它在类中存储一些数据，则该数据将在您的程序中全局共享（因为只有一个名为 Foo 的类（或者`::Foo`，准确地说是 ））。

但是你的`greeting`方法是实例方法，它需要对象实例。例如，如果您的问候方法将使用 Person 的名称，则它必须是实例方法，以便它能够使用实例数据（名称）。如果它不使用任何特定于实例的状态，并且您确实打算将它作为类实例方法，则使用`self`“前缀”。

```
class Person < ActiveRecord::Base
  def self.greeting
    'hello'
  end
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T11:45:26.073

尝试类方法：

```
class Person < ActiveRecord::Base
  def self.greeting
    'hello'
  end
end 
```

或另一种语法：

```
class Person < ActiveRecord::Base
  class << self
    def greeting
      'hello'
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T16:24:51.870

```
class Person < ActiveRecord::Base
  def Person.greeting
    'hello'
  end
end 
```

也会工作。我喜欢它，因为它的作用非常清楚；但是，当您决定重命名 Person 类时，它将导致错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T11:46:09.763

```
class Person < ActiveRecord::Base
    def self.greeting
      'hello'
    end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T11:51:18.803

做一个静态方法试试这个：

```
类 MyModel
    def self.do_something
        提出“这是一种静态方法”
    结尾
结尾

MyModel.do_something # => "这是一个静态方法"
MyModel::do_something # => "这是一个静态方法"

```

# iphone - UITableView 的值重复

> ID：13067838
> 
> 赞同：0
> 
> 时间：2012-10-25T11:44:08.010
> 
> 标签：iphone, ios, uitableview

我在 IB 中创建了三个不同的单元格，一个带有 UIStepper，一个带有 Switch，一个带有 TextField。当我在其中一个步进器上设置值时，另一个步进器会自动获得相同的值。为什么是这样？这是我的 cellForRowAtIndexPath 方法：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section == 2) {
        UITableViewCell *cell;
        if (indexPath.row == 0 || indexPath.row == 16 || indexPath.row == 15) {
            cell = [self.tableView dequeueReusableCellWithIdentifier:@"TextFieldCell"];
            if (cell == nil)
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"TextFieldCell"];
        }
        else if (indexPath.row == 17) {
            cell = [self.tableView dequeueReusableCellWithIdentifier:@"BoolCell"];
            DCRoundSwitch *roundSwitch = (DCRoundSwitch *)[cell viewWithTag:1];
            roundSwitch.onText = @"Yes";
            roundSwitch.offText = @"No";
        }
        else {
            cell = [self.tableView dequeueReusableCellWithIdentifier:@"StepperCell"];
        }
        UILabel *myLabel = (UILabel *)[cell viewWithTag:3];
        myLabel.text = [[_tableArray objectAtIndex:2] objectAtIndex:indexPath.row];
        if (cell == nil) {
            NSLog(@"cell er nil");
            return [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"StepperCell"];
        }
        return cell;
    } 
```

只有第二部分有足够的行，这给我带来了麻烦。UILabels 显示正确，但步进器以某种方式连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:58:35.500

您正在重用已经存在的 StepperCells，这很好，但是当它被重用时，您需要为该单元格中的所有内容设置正确的值。

# objective-c - 如何通过仅更改高度而不更改宽度来调整 UILabel 的大小？

> ID：13067839
> 
> 赞同：39
> 
> 时间：2012-10-25T11:44:16.550
> 
> 标签：objective-c, uilabel, xcode4.5

```
[self.Review sizeToFit]; 
```

sizeToFit 之前的结果：

```
NSStringFromCGRect(self.Review.frame): {{90, 20}, {198, 63}} 
```

sizeToFit 后的结果：

```
NSStringFromCGRect(self.Review.frame): {{90, 20}, {181, 45}} 
```

我希望宽度保持不变。我只是想改变高度。自动遮罩是

```
(lldb) po self.Review
(UILabel *) $1 = 0x08bb0fe0 <UILabel: 0x8bb0fe0; frame = (90 20; 181 45); text = 'I'm at Mal Taman Anggrek ...'; clipsToBounds = YES; opaque = NO; autoresize = LM+RM+H; userInteractionEnabled = NO; layer = <CALayer: 0x8bb68b0>> 
```

我知道有一种方法可以做到这一点： [如何调整 UILabel 的宽度并使其适合文本大小？](https://stackoverflow.com/questions/4094753/how-to-adjust-and-make-the-width-of-uilabel-fit-to-the-text-size/9091664#comment17749346_9091664)

答案要么很奇怪（我们需要重新提供字体信息）。或者不清楚。

> 您还需要定义最大宽度，并告诉您的程序如果 sizeToFit 为您提供的宽度大于该最大值时该怎么做。

我将使用 using 的奇怪解决方案`sizeWithFont`。这很奇怪，因为 UILabel 已经知道标签中的字体。

实际上 sizeToFit 的行为如何？它如何决定我们需要更薄还是更高的 UILabel？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-23T11:11:06.103

您可以使用 sizeThatFits 获得相同的结果。

```
CGSize size = [label sizeThatFits:CGSizeMake(label.frame.size.width, CGFLOAT_MAX)];
CGRect frame = label.frame;
frame.size.height = size.height;
label.frame = frame; 
```

或者，使用 sizeToFit。

```
CGRect frame = label.frame;
[label sizeToFit];
frame.size.height = label.frame.size.height;
label.frame = frame; 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-25T12:23:08.100

这就是它的完成方式。因为标签已经包含字体信息，所以在这个方法调用中包含它是微不足道的。

```
CGSize size = [label.text sizeWithFont:label.font
                     constrainedToSize:CGSizeMake(maxWidth, MAXFLOAT)
                         lineBreakMode:UILineBreakModeWordWrap]; 
CGRect labelFrame = label.frame;
labelFrame.size.height = size.height;
label.frame = labelFrame; 
```

使用更新的 Swift 版本`boundingRectWithSize`：

```
let maxHeight = CGFloat.infinity
let rect = label.attributedText?.boundingRectWithSize(CGSizeMake(maxWidth, maxHeight), 
       options: .UsesLineFragmentOrigin, context: nil)
var frame = label.frame
frame.size.height = rect.size.height
label.frame = frame 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-12-12T13:52:27.337

sizeToFit 效果很好。唯一的问题是它基于控件的当前大小。

例如，如果您正在回收带有标签的表格视图单元格，则标签的宽度可能已在前一个单元格中减小，因此对 sizeToFit 的调用可能看起来不可靠。

只需在发送 sizeToFit 消息之前重置控件的原始宽度。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-09T04:55:31.787

Swift 3 这个问题的简单扩展。

```
extension UILabel {
    func sizeToFitHeight() {
        let size: CGSize = self.sizeThatFits(CGSize.init(width: self.frame.size.width, height: CGFloat.greatestFiniteMagnitude))
        var frame:CGRect = self.frame
        frame.size.height = size.height
        self.frame = frame
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-15T23:35:03.507

我认为你不应该使用`NSString`'s`size...`方法，`UILabel`正如@vatrif 指出的那样，已经有一个 API （内部可能只使用`NSString`'s 方法）。

不过我认为`UILabel`'s API 可以改进。这就是为什么我认为类别将是最优雅的解决方案：

```
//  UILabel+Resize.h
@interface UILabel (Resize)
- (void)sizeToFitHeight;
@end

//  UILabel+Resize.m
@implementation UILabel (Resize)
- (void)sizeToFitHeight {
    CGSize size = [self sizeThatFits:CGSizeMake(self.frame.size.width, CGFLOAT_MAX)];
    CGRect frame = self.frame;
    frame.size.height = size.height;
    self.frame = frame;
}
@end 
```

只有一件事：我不确定该方法的适当名称：

*   sizeToFitHeight?
*   高度适合？

非常感谢评论，谢谢！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-16T15:54:58.970

同意的 API 将从这一添加中受益。让您的生活更轻松，并为 Swift 中的 UILabel 类添加扩展，如下所示：

```
extension UILabel {

    func sizeToFitHeight() {
        let size:CGSize = self.sizeThatFits(CGSizeMake(self.frame.size.width, CGFloat.max))
        var frame:CGRect = self.frame
        frame.size.height = size.height
        self.frame = frame
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-19T22:07:35.230

# 回答2017...

**c = CGSize(width: yourWidth, height: CGFloat.greatestFiniteMagnitude)
结果 = sizeThatFits(c).height**

所以...

```
let t = .... your UITextView
let w = .... your known width of the item

let trueHeight = t.sizeThatFits(
                   CGSize(width: t, height: CGFloat.greatestFiniteMagnitude)).height 
```

就是这样。

* * *

很多时候，您想知道**与“正常”单行条目相比的高度*****差异***。

如果您正在制作某种与 UTableView 无关的单元格（例如，某种自定义堆栈视图），则尤其会出现这种情况。您必须在某些时候手动设置高度。在您的故事板上，使用任何短字符串（例如“A”）的示例文本按照您的意愿构建它，在任何正常情况下当然只有一行。然后你做这样的事情......

```
func setTextWithSizeCorrection() { // an affaire iOS

    let t = .... your UITextView
    let w = .... your known width of the item

    let oneLineExample = "A"
    let actualText = yourDataSource[row].description.whatever

    // get the height as if with only one line...

    experimental.text = oneLineExample
    let oneLineHeight = t.sizeThatFits(
               CGSize(width: w, height: CGFloat.greatestFiniteMagnitude)).height

    // get the height with the actual long text...
    // (note that usually, you do not want a one-line minimum)

    experimental.text = (actualText == "") ? oneLineExample : actualText
    let neededHeight = t.sizeThatFits(
              CGSize(width: w, height: CGFloat.greatestFiniteMagnitude)).height

    experimental.text = actualText

    let delta = neededHeight - oneLineHeight

    set the height of your cell, or whatever it is(standardHeight + delta)
} 
```

* * *

最后一点：iOS 中真正愚蠢的事情之一是 UITextView 内部有一种奇怪的边距。这意味着您不能只在 UITextViews 和标签之间进行交换；它会导致许多其他问题。截至撰写本文时，Apple 尚未解决此问题。解决这个问题很困难：以下方法通常是可以的：

```
@IBDesignable class UITextViewFixed: UITextView {
    override func layoutSubviews() {
        super.layoutSubviews()
        setup()
    }
    func setup() {
        textContainerInset = UIEdgeInsets.zero;
        textContainer.lineFragmentPadding = 0;
    }
} 
```

来自Apple的破碎，无法使用的UITextView......

[![在此处输入图像描述](../Images/d499f15d5c209039421dacd0ed2305a9.png)](https://i.stack.imgur.com/4s7P6.png)

`UITextViewFixed`在大多数情况下，这是一个可以接受的修复：

[![在此处输入图像描述](../Images/bf08279fb5af9c37f7c862969b8930a0.png)](https://i.stack.imgur.com/MS5V4.png)

（为清楚起见，添加了黄色。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-11T13:36:06.450

**SWIFT 3 的固定解决方案**

用于`CGFloat.greatestFiniteMagnitude`最大高度。

```
let size = CGSize.init(width: yourLabel.frame.size.width,
                       height: CGFloat.greatestFiniteMagnitude)
let rect = errorLabel.attributedText?.boundingRect(with: size, options: .usesLineFragmentOrigin, context: nil)
var frame = errorLabel.frame
frame.size.height = (rect?.size.height)!
errorLabel.frame = frame 
```

或创建`UIlabel`扩展，并调用方法`yourLabel. sizeToFitHeight()`

```
extension UILabel {

    func sizeToFitHeight() {
        let maxHeight : CGFloat = CGFloat.greatestFiniteMagnitude
        let size = CGSize.init(width: self.frame.size.width, height: maxHeight)
        let rect = self.attributedText?.boundingRect(with: size, options: .usesLineFragmentOrigin, context: nil)
        var frame = self.frame
        frame.size.height = (rect?.size.height)!
        self.frame = frame
    }

} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-17T00:02:54.937

我相信我有一个更简单的解决方案：

```
let oldWidth = self.frame.size.width
label.sizeToFit()
label.frame.size.width = oldWidth 
```

只需存储旧的宽度，`sizeToFit()`适用于宽度和高度，然后将宽度重置回原来的值，只改变标签的高度。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-16T02:59:01.813

Swift 3 版本的[Mundi](https://stackoverflow.com/a/13068498/3514372)的回答：

```
let maxHeight: CGFloat = 10000
let rect = label.attributedText!.boundingRect(with: CGSize(width: maxWidth, height: maxHeight),
                                                           options: .usesLineFragmentOrigin,
                                                           context: nil)
var frame = labe.frame
frame.size.height = rect.size.height
label.frame = frame 
```

# java - 在两个线程之间共享一个 Scanner

> ID：13067840
> 
> 赞同：1
> 
> 时间：2012-10-25T11:44:19.870
> 
> 标签：java

如何在两个线程之间共享 Scanner 对象，以便我可以在一个线程中将值传递给标准 i/p 流并在另一个线程中显示？

我创建了两个线程，如下所示：

在**Thread1 中**，我使用了以下代码：

```
while(true)
{

//Thread.currentThread().sleep(5000); // if I used this it is printing ABCD
str = System1Class.scan.nextLine();
System.out.println(str);
} 
```

在**Thread2**我使用下面的代码：

```
String st = "ABCD";
InputStream is = new ByteArrayInputStream(st.getBytes());
System.setIn(is);
ThreadMainClass.scan  = new Scanner(System.in); // here I am trying to refresh the     global object "scan" 
```

这里的“扫描”对象是在类 ThreadMainClass 中全局创建的：

```
public static Scanner scan = new Scanner(System.in); 
```

两个线程都在访问它。我的要求是：我想在从 Thread2 传递的 Thread1 中显示“ABCD”。它正在显示如果我放了一些延迟，以便在 Thread1 中的行之前创建 Scanner 对象：

```
str = System1Class.scan.nextLine(); 
```

但我不希望两个使用任何延迟。那么我有什么办法吗？我想在从 Thread2 传递的那一刻显示“ABCD”。与此同时，Thread1 应该等待来自控制台的数据，即 Thread1 不应该等待来自 Thread2 的任何通知。如果数据是从 Thread2 传递的，只需获取它并打印它，否则它应该只从控制台等待。

我想我需要一种从 Thread2 刷新“扫描”对象的方法，但我不确定。:)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:04:34.607

要显示它传递的同一个实例，您需要调用类中的一个方法，将`AtomicBoolean`变量设置为`true`. 您将必须编写一个循环并检查该变量的真值的方法。如果是`true`，则立即打印。

还要确保您正在`synchronize`读取和写入线程

您也可以通过**在 Java 中创建自己的事件来做到这一点**

从本教程中阅读有关此方法的所有信息：

[如何在 Java 中创建自己的事件](http://castever.wordpress.com/2008/07/31/how-to-create-your-own-events-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:12:29.790

您可以使用 wait() 和 notify() 方法同步 2 个线程。

在全局类中：

```
Object wh = new Object(); 
```

在thread1的代码中：

```
while(true)
{

//Thread.currentThread().sleep(5000); // if I used this it is printing ABCD
//Wait thread2 to notify
// Prevent IllegalMonitorStateException occurs
synchronized(wh) {
    wh.wait();
}catch (InterruptedException e) {
    e.printStackTrace();
}
str = System1Class.scan.nextLine();
System.out.println(str);
} 
```

在thread2的代码中：

```
String st = "ABCD";
InputStream is = new ByteArrayInputStream(st.getBytes());
System.setIn(is);
ThreadMainClass.scan  = new Scanner(System.in); // here I am trying to refresh the     global object "scan"
//Notify thread1
// Prevent IllegalMonitorStateException occurs
synchronized(wh) {
    wh.notify();
}catch (InterruptedException e) {
    e.printStackTrace();
} 
```

HTH。

# json - Json.NET：将嵌套数组反序列化为强类型对象

> ID：13067842
> 
> 赞同：6
> 
> 时间：2012-10-25T11:44:33.813
> 
> 标签：json, json.net, deserialization, multidimensional-array

我正在编写客户端应用程序，它应该处理服务器响应。响应采用 JSON 格式。我决定使用 Json.NET 来反序列化它们。而且我无法简化或修改这些响应（在服务器端）。这个特定 JSON 响应的特别困难是不同的对象类型在同一个数组中：哈希和文件数组。所以，我想直接将这个数组反序列化为强类型对象，而不是对象数组。我认为应该可以用 实现`CustomCreationConverter`，但我不知道如何实现。

JSON：

```
{
    "files":
    [
        "hash string",
        [
            ["first file name", 12],
            ["second file name", 34]
        ]
    ]
} 
```

我试图实现的对象结构：

```
public class RootObject
{
    [JsonProperty("files")]
    public FilesContainer Container
    {
        get;
        set;
    }
}

public class FilesContainer
{
    public string Hash
    {
        get;
        set;
    }

    public File[] Files
    {
        get;
        set;
    }
}

[JsonConverter(typeof(FileJsonConverter))]
public class File
{
    public string Name
    {
        get;
        set;
    }

    public int Size
    {
        get;
        set;
    }
}

class FileJsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        File obj = new File
        {
            Name = reader.ReadAsString(),
            Size = reader.ReadAsInt32().GetValueOrDefault()
        };

        reader.Read();

        return obj;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T06:36:37.323

我终于想出了如何做到这一点。我需要使用`serializer.Deserialize`inside of `JsonConverter`。因此，这是一个工作示例。

```
class Program
{
    static string json = @"{
                                ""files"":
                                [
                                    ""hash string"",
                                    [
                                        [""first file name"", 12],
                                        [""second file name"", 34]
                                    ]
                                ]
                            }";

    static void Main(string[] args)
    {
        RootObject container = JsonConvert.DeserializeObject<RootObject>(json);
    }
}

public class RootObject
{
    [JsonProperty("files")]
    public FilesContainer Container
    {
        get;
        set;
    }
}

[JsonConverter(typeof(FilesContainerJsonConverter))]
public class FilesContainer
{
    public string Hash
    {
        get;
        set;
    }

    public File[] Files
    {
        get;
        set;
    }
}

public class FilesContainerJsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        FilesContainer obj = new FilesContainer();
        obj.Hash = reader.ReadAsString();
        reader.Read(); // to StartArray
        obj.Files = serializer.Deserialize<File[]>(reader);
        reader.Read(); // to EndArray

        return obj;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
}

[JsonConverter(typeof(FileJsonConverter))]
public class File
{
    public string Name
    {
        get;
        set;
    }

    public int Size
    {
        get;
        set;
    }
}

class FileJsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        File obj = new File
        {
            Name = reader.ReadAsString(),
            Size = reader.ReadAsInt32().GetValueOrDefault()
        };

        reader.Read(); // to EndArray

        return obj;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
} 
```

# r - data.frame 中相等的行数

> ID：13067849
> 
> 赞同：3
> 
> 时间：2012-10-25T11:45:00.397
> 
> 标签：r, dataframe, plyr

我有一个看起来像这样的数据框：

```
df <- data.frame(
  Logical = c(TRUE,FALSE,FALSE,FALSE,FALSE,FALSE),
  A = c(1,2,3,2,3,1),
  B = c(1,0.05,0.80,0.05,0.80,1),
  C = c(1,10.80,15,10.80,15,1)) 
```

看起来像：

```
 Logical A    B    C
1    TRUE 1 1.00  1.0
2   FALSE 2 0.05 10.8
3   FALSE 3 0.80 15.0
4   FALSE 2 0.05 10.8
5   FALSE 3 0.80 15.0
6   FALSE 1 1.00  1.0 
```

我想添加一个新变量 ，`D`它是基于以下规则的整数：`0`如果`df$Logical`是`TRUE`，或者对于所有变量行都相同的整数，`A`并且`B`大约`C`是（因为它们是双精度数，所以在一个浮点误差）相等，从 开始`1`。

这里的预期输出：

```
 Logical A    B    C D
1    TRUE 1 1.00  1.0 0
2   FALSE 2 0.05 10.8 1
3   FALSE 3 0.80 15.0 2
4   FALSE 2 0.05 10.8 1
5   FALSE 3 0.80 15.0 2
6   FALSE 1 1.00  1.0 3 
```

第一行是`0`因为`Logical`is `TRUE`，第二行和第四行`1`是因为变量`A`，`B`并且`C`在那里近似相等，第二行和第五行相同。第六行得到 a `3`，因为它是下一个唯一的行。请注意，分配的整数顺序`D`无关紧要，除了`0`. 例如，也可以分配第 2 行和第 4 行`2`，只要该整数在`D`.

* * *

我考虑过使用聚合函数。例如使用`ddply`：

```
library("plyr")
df$foo <- 1:nrow(df)
foo <- dlply(df,.(A,B,C),'[[',"foo")
df$D <- 0
for (i in 1:length(foo)) df$D[foo[[i]]] <- i
df$D[df$Logical] <- 0 
```

有效，但我不确定这对浮点错误有多大影响（我想我可以在此调用之前对此处的值进行四舍五入，但它应该相当稳定）。使用循环很容易：

```
df$D <- 0
c <- 1
for (i in 1:nrow(df))
{
  if (!isTRUE(df$Logical[i]) & df$D[i]==0)
  {
    par <- sapply(1:nrow(df),function(j)!df$Logical[j]&isTRUE(all.equal(unlist(df[j,c("A" ,"B", "C")]),unlist(df[i,c("A" ,"B", "C")]))))
    df$D[par] <- c
    c <- c+1
  }
} 
```

但这对于较大的数据帧来说非常慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:26:18.803

根据下面 Matthew Dowle 的评论，可以对数值进行分组，并用公差`data.table`区分它们。`.Machine$double.eps^.5`考虑到这一点，`data.table`解决方案应该有效：

```
library(data.table)

DT <- as.data.table(df)

DT[, D := 0]

.GRP <- 0

DT[!Logical, D := .GRP <- .GRP + 1, by = "A,B,C"]

#    Logical A    B    C foo D
# 1:    TRUE 1 1.00  1.0   1 0
# 2:   FALSE 2 0.05 10.8   2 1
# 3:   FALSE 3 0.80 15.0   3 2
# 4:   FALSE 2 0.05 10.8   4 1
# 5:   FALSE 3 0.80 15.0   5 2
# 6:   FALSE 1 1.00  1.0   6 3 
```

正如 Matthew Dowle 在[这里](https://stackoverflow.com/a/13019561)所写，`.GRP`在 data.table 1.8.3 中实现，但我仍然使用 1.8.2

* * *

跟进评论，这是 1.8.2 的 NEWS 项目。将添加到`?data.table`，感谢突出显示！

> `double`现在允许在键和临时 by 中使用 数字列（类型）。`J()`并且`SJ()`不再强求`double`。与数字类型不匹配的连接列被强制以静默方式匹配 的连接列的类型。**默认情况下，如果两个浮点值的差异在 sqrt(.Machine$double.eps) 范围内，则认为两个浮点值相等（通过分组和二分搜索连接）**。请参见 中的示例。完成 FR #951、#1609 和 #1075。这为其他使用的原子类型（例如和）铺平了道路。感谢 Chris Neff 进行 beta 测试并发现两个数字列的键的问题（错误 #2004），已修复并添加了测试。`integer``i``x`**`?unique.data.table``double``POSIXct``bit64`**

# c# - LightSwitch - 使用 FindControl 获取 AutoCompleteBox，在转换时变为 null

> ID：13067864
> 
> 赞同：2
> 
> 时间：2012-10-25T11:45:32.350
> 
> 标签：c#, silverlight, visual-studio-lightswitch, findcontrol, autocompletebox

我正在尝试在`AutoCompleteBox`我的一个屏幕上访问。当我这样做时，我可以看到它`FindControl()`已经找到了控件`var testControl = FindControl("MyControl");`

但是，当我尝试将其转换为它应该是的控件类型以便我可以操纵它时，结果是`null`.

这就是我正在做的事情：

```
System.Windows.Controls.AutoCompleteBox testBox = new System.Windows.Controls.AutoCompleteBox();
testBox = testControl as System.Windows.Controls.AutoCompleteBox; 
```

`testBox`将为空。

它肯定说控件`AutoCompleteBox`在屏幕上，我不确定我做错了什么。任何人都可以帮忙吗？

编辑：感谢 Yann，我能够使用以下代码解决此问题：

```
this.FindControl("MyControl").ControlAvailable += (p, e) =>
        {
            //For every  use I can just cast like ((System.Windows.Controls.AutoCompleteBox)e.Control)
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:54:20.153

如果`as`返回 null，则您试图转换为错误的类型。换句话说，`testControl`不是类型`AutoCompleteBox`。

在第二行放一个断点，看看`testControl`运行时真正的类型是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:30:08.400

正如您所发现的，您从中获得的对象`FindControl`只是一个*代理对象。**获得**真正*控制的方法分两步完成：

1.  将代码添加到**screen**的`Created`方法中（在 screen 的方法运行之前，控件不保证可用`Created`）。
2.  然后将处理程序添加到代理的`ControlAvailable`方法。

```
Private Sub ScreensName_Created

      FindControl("ControlsName"). AddressOf ControlsName_ControlAvailable

End Sub

Private Sub ControlsName_ControlAvailable(sender as Object, e as ControlAvailableEventArgs)

    'do whatever you want in here
    'you can cast e.Control to whatever is the type of the underlying Silverlight control.

End Sub 
```

当然，您需要将“ScreensName”和“ControlsName”替换为您自己的名称。

（由于某种原因，我无法成功地将两种方法的整个文本格式化为代码）

# oracle - Oracle 函数中的数值或值错误

> ID：13067867
> 
> 赞同：2
> 
> 时间：2012-10-25T11:45:38.370
> 
> 标签：oracle, plsql

```
create or replace
FUNCTION REPORT_GENERATION(  
 IN_STATUS IN VARCHAR2
 ,IN_USERID IN varchar2
)  RETURN CLOB AS 

  FINAL_RESULT CLOB:=null;
  OUTPUT_RESULT CLOB:=null;
 BEGIN
   /* My implementation. OUTPUT_RESULT contains large XML string */   
   FINAL_RESULT:=FINAL_RESULT||''||OUTPUT_RESULT; 
   FINAL_RESULT:=FINAL_RESULT||''||'</EXCEL_MAIN>'; 
   RETURN FINAL_RESULT; 
END REPORT_GENERATION; 
```

当我执行此功能时，我收到一个错误

```
ORA-06502: PL/SQL: numeric or value error 
```

返回 FINAL_RESULT 时出现该错误。FINAL_RESULT 的长度为 38123。如果我用一些小字符串替换 FINAL_RESULT，它可以正常工作。

我该如何解决这个问题。请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:26:24.193

尝试以下操作：

```
create or replace
FUNCTION REPORT_GENERATION(  
 IN_STATUS IN VARCHAR2
 ,IN_USERID IN varchar2
)  RETURN CLOB AS 

  FINAL_RESULT  CLOB := EMPTY_CLOB();
  OUTPUT_RESULT CLOB := EMPTY_CLOB();
 BEGIN
   DBMS_LOB.APPEND(FINAL_RESULT, OUTPUT_RESULT); 
   DBMS_LOB.APPEND(FINAL_RESULT, '</EXCEL_MAIN>'); 
   RETURN FINAL_RESULT; 
END REPORT_GENERATION; 
```

几点注意事项：

1.  使用 LOB（CLOB 或 BLOB）时，您应该*始终*将它们初始化为 EMPTY_CLOB 或 EMPTY_BLOB。不这样做会导致一堆问题。使用上面的代码，将 EMPTY_CLOB 更改为 NULL 看看会发生什么。

2.  如果您已完成 #1，则无法将 CLOB 或 BLOB 与 NULL 进行比较，因为它不是 null。将空的 CLOB/BLOB 与 EMPTY_CLOB()/EMPTY_BLOB() 进行比较。

分享和享受。

# php - PHP插入数据库

> ID：13067869
> 
> 赞同：-1
> 
> 时间：2012-10-25T11:45:43.507
> 
> 标签：php, javascript

我有一个 Web 表单，它在 3 个拆分文本框中保存了一个部件号。我想将此零件号作为零件号的 id 号保存到数据库中。有什么方法可以将数字连接起来，然后与 id 值进行比较并在插入语句中使用？我在某处读到你可以使用内爆函数来做到这一点。好吧，我确实使用内爆来存储日期，但到目前为止，关于这个问题，它没有帮助。

```
 <td onmouseover="document.getElementById(\'id_nr_1\').focus();">
 St&uuml;cklistennummer'.$pflicht_id_nr.'
    </td>
    <td align="left" onmouseover="document.getElementById(\'id_nr_1\').focus();">
    <input type="text" class="'.$html_klasse_id_nr_1.'" id="id_nr_1"   name="id_nr_1" size="2" maxlength="4" value="'.htmlspecialchars($_REQUEST["id_nr_1"]).'" onfocus="this.focus();" onkeyup="FocusWeiter(this.id, \'id_nr_2\');">
    <input type="text" class="'.$html_klasse_id_nr_2.'" id="id_nr_2" name="id_nr_2" size="1" maxlength="3" value="'.htmlspecialchars($_REQUEST["id_nr_2"]).'" onfocus="this.focus();" onkeyup="FocusWeiter(this.id, \'id_nr_3\');">
                                <input type="text" class="'.$html_klasse_id_nr_3.'" id="id_nr_3" name="id_nr_3" size="1" maxlength="3" value="'.htmlspecialchars($_REQUEST["id_nr_3"]).'" onfocus="this.focus();" onkeyup="FocusWeiter(this.id, \'id_nr_4\');">

    </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:49:36.010

要在 PHP 端执行此操作，只需连接数字。假设它们是通过客户端名称 id1-3 上的表单中的三个文本框提交的：

```
$id=$_REQUEST["id1"].$_REQUEST["id2"].$_REQUEST["id3"];
//Further processing?
$query="INSERT INTO `tablename` (`id`, `column2`, `column3`) VALUES ('$id', '$value2', '$value3')";
//Query the database 
```

如果这对您来说太不具体，那是因为我没有实际的代码可以使用，也不了解您的数据库设置。

# yii - yii中的多个ajax请求

> ID：13067873
> 
> 赞同：2
> 
> 时间：2012-10-25T11:46:03.090
> 
> 标签：yii, yii-extensions

通过 ajax 在另一个视图中渲染后，我的 ajax 链接不起作用。我使用 ajax 的委托函数来防止它。在第一个视图中它运行良好，但在第二页中它发送多个点击请求。

这是我的代码：

```
$i=0;
foreach($contents as $conts){

   echo CHtml::ajaxLink(conts->name, 
       array('frontend/dataView','id'=> $conts->content_id,'cat_id'=>$cat->parent_id ), 
       array('update'=>'#level3rd','beforeSend'=>'function(){$(\'body\').undelegate(\'#cont'.$i.'\', \'click\');}',),
       array('id'=>'cont'.$i,'onclick'=>"makeContactive(this.id);"));
$i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:33:21.517

onclick 事件不适用于动态加载的内容。

在旧的 jQuery 中，你用 .live('click') 绑定你的点击（1.7 之前） 现在从 jQuery 1.7 开始你可以使用 .on('click')。

虽然你应该确保你不会犯和我一样的错误。

`$('#myAnchor').on('click', myclickFunction)`

这适用于页面加载，但不适用于动态内容。正确的做法是。

`$('#parentElement').on('click', '#myAnchor', 'customEvenName', myclickFunction)`

这里的父元素应该是非动态加载的

**所有这一切的实际好处是，您可以将 .on('click') 事件放在任何地方，通常是在您包含的 js 脚本中的某个地方，以便所有事件只加载一次。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:31:03.980

我不确定情况是否如此，但是......在页面加载后，有些事情与 jquery 相关联。

例如我使用选择。我有一个函数将所选下拉列表与具有特定类的所有下拉列表联系起来。现在，如果我将代码与 Ajax 一起使用，则这些下拉列表不会使用 selected，因为将它们绑定在一起的函数在开始时都运行了 1 次。如果我想让下拉菜单再次与 selected 一起使用，那么在我进行 ajax 调用后，我需要重新运行与 selected 相关联的函数。

您确定您的 ajax 链接也不是这种情况吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T13:09:37.260

您可能正在以这种方式呈现您的视图：

```
$this->renderPartial($view, $params); 
```

尝试这个：

```
$this->renderPartial($view, $params, false, true); 
```

# erlang - Erlang：获取多主机集群上所有节点的列表

> ID：13067878
> 
> 赞同：3
> 
> 时间：2012-10-25T11:46:22.590
> 
> 标签：erlang, distributed

您可以使用`net_adm:names()`获取主机的 epmd 上所有节点的名称。但是，如果您的集群包含第二台主机（因此还有第二台 epmd），该怎么办。你怎么能得到两台主机上所有节点的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:27:01.070

`net_adm:world/0`可能会有帮助。

它“调用`names(Host)`在 Erlang 主机文件中指定的所有主机`.hosts.erlang`，收集回复，然后`ping(Node)`对所有这些节点进行评估。返回已成功 ping 的所有节点的列表。

更多信息：[http ://erlang.org/doc/man/net_adm.html#world-0](http://erlang.org/doc/man/net_adm.html#world-0)

# code-coverage - TFS Build 2012 代码覆盖率，无需在 bulid 机器上安装 VS2012

> ID：13067883
> 
> 赞同：2
> 
> 时间：2012-10-25T11:46:34.087
> 
> 标签：code-coverage

我们已经迁移到 TFS 2012，并认为代码覆盖率是分离的，可以通过 TFS 构建获得，而无需在构建机器上安装 Visual Studio。

但是，当我在默认构建模板中启用它时，会在构建过程中生成以下消息： `Code coverage is enabled for the test run. Install Visual Studio on the following build machine to get code coverage results: XXXXX.`

我们真的还需要在构建机器上安装 Visual Studio 以获取基本的 ALM 内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:31:00.853

根据 Microsoft 论坛的 John Qiao 的说法，不幸的是，这仍然是需要的。 [http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/8d962eff-f966-4aea-82fc-cb01a79f628a/](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/8d962eff-f966-4aea-82fc-cb01a79f628a/)

# c# - 为什么我的 foreach 中的代码无法访问？（经过单元测试的工作代码的精确副本）

> ID：13067886
> 
> 赞同：4
> 
> 时间：2012-10-25T11:46:42.060
> 
> 标签：c#, wcf, foreach, unreachable-code

下面的代码是完美运行的代码的精确副本。不同之处在于此代码被放置在 WCF 服务应用程序项目中，而工作代码来自 Windows 窗体应用程序项目。foreach 中的代码无法访问，这很奇怪，因为我之前测试过代码并且它可以工作，返回正确的值

```
public IEnumerable<Employee> GetStudentDetails(string username,string password)
    {
        var emp = agrDb.LoginAuthentication(username, password);//procedure in the database thats returning two values
                                                                //Namely: EmployeeFirstName and EmployeeLastName
        List<Employee> trainerList = new List<Employee>();

        foreach (var item in emp)
        {
            //unreachable code here
            Employee employ = new Employee();
            employ.EmployeeFirstName = item.EmployeeFirstName;
            employ.EmployeeLastName = item.EmployeeLastName;
            trainerList.Add(employ);
            //trainerList.Add(item.EmployeeLastName);
        }
        return trainerList;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T12:21:48.387

如果直到运行时才初始化数组或集合，则 foreach 循环中的代码可能无法访问。

```
List<Employee> emp;

// Run when program starts, called from Program.cs
private void InitialiseApplication()
{
    emp = new List<Employee>;

    // Gather data for employees from... somewhere.
    DataAccess.GetEmployees(emp);
}

private void DoStuff()
{
    foreach (var item in emp)
    {
         // Do something.
    }
} 
```

上面的代码将带回警告，因为“emp”在设计时没有初始化。

我在代码中收到了相同的警告，包括在构造函数中的各个阶段。但是，运行时流程不受影响，因为此时“emp”已初始化。

您的代码可能就是这种情况。检查程序“emp”在何时何地被初始化。如果视觉上不明显，您可能需要“进入”程序来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:09:12.287

该代码是可访问的，但如果它没有被执行，这意味着它`emp`是空的。您必须验证您正在使用的值是否存在并且`username`正在返回一个值。`password``agrDb.LoginAuthentication(username, password)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:57:21.943

也许您总是返回一个新的空数组，`agrDB.LoginAuthentication()`并且您的 IDE 知道它`foreach loop`永远不会迭代任何项目。

# php - 用户如何将图像下载到他们的移动图库？

> ID：13067887
> 
> 赞同：0
> 
> 时间：2012-10-25T11:46:43.910
> 
> 标签：php, mobile, safari, mobile-website

这是我的代码，

```
<?php
$file_name = "coupon.png";
$file_path = $_GET['path'];
$file_size = filesize($file_path);
header('Pragma: public');
header('Expires: 0');
header('Last-Modified: ' . gmdate('D, d M Y H:i ') . ' GMT');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Cache-Control: private', false);
header('Content-Type: application/octet-stream');
header('Content-Length: ' . $file_size);
header('Content-Disposition: attachment; filename="' . $file_name . '";');
header('Content-Transfer-Encoding: binary');
readfile($file_path);
?> 
```

PS`$_GET['path']`为图片路径url

在 PC 的浏览器中，那些编码可以顺利运行。但是，如果用户使用他们的移动浏览器下载，它将显示一个新的网页选项卡。

用户有什么方法可以下载图像并自动存储到他们的移动图库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:13:41.033

试试这样：

```
<?php
$file_name = "coupon.png";
$file_path = $_GET['path'];
$file_size = filesize($file_path);
header('Pragma: public');
header('Expires: 0');
header('Last-Modified: ' . gmdate('D, d M Y H:i ') . ' GMT');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Cache-Control: private', false);
header('Content-Type: application/force-download'); // Browser cant identifiy the type. so it will force to download
header('Content-Length: ' . $file_size);
header('Content-Disposition: attachment; filename="' . $file_name . '";');
header('Content-Transfer-Encoding: binary');
readfile($file_path);
?> 
```

因为手机浏览器不知道怎么打开文件，所以强制下载。

# objective-c - self.object 和 self->object 的区别

> ID：13067889
> 
> 赞同：0
> 
> 时间：2012-10-25T11:46:48.053
> 
> 标签：objective-c, ios

`self.object`我想知道和有什么区别`self->object`？我们如何能够使用 ARC 释放内存`self`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:54:03.263

`self`是一个指针，所以`self->object`正确引用`object`.

`self.object`然而，它是 Objective-C 的*语法糖*，`[self object]`并且将调用 getter 方法 ( ) （或者，如果您正在分配，则为`-(Object *)object`setter 方法）。`[self setObject:]`

如果您使用的是 ARC，那么您不需要明确地执行任何操作来释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:52:09.490

`self.object`调用 setter 方法，该方法进行内存管理，例如保留对象。`self->object`直接设置/访问不做任何内存管理的对象。通常，您不想直接访问对象的 ivar，因此只需创建 setter/getter`object`并使用`self.object`.

# vb.net - 需要帮助翻译 vb.net 行以严格证明

> ID：13067893
> 
> 赞同：1
> 
> 时间：2012-10-25T11:47:14.690
> 
> 标签：vb.net, strict

我在将此 vb.net 行翻译成严格证明时遇到问题

```
[Enum].GetValues(GetType(ReferenceOutput))(DataGrid1.SelectedIndex) 
```

ReferenceOutput 是一个类， datagrid1.selectedindex 是在 datagrid 中选择的。我如何将其转化为严格的证明行。我现在收到以下错误。

```
Error   1   Option Strict On disallows late binding. 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:05:09.137

最稳健的方法是使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd991317.aspx)新的通用方法：

```
Dim refOutput As ReferenceOutput
Dim enumValue = DataGrid1.SelectedIndex.ToString()
If [Enum].TryParse(enumValue, refOutput) Then
    Console.WriteLine("Converted '{0}' to {1}.", enumValue, refOutput.ToString())
Else
    Console.WriteLine("{0} is not a member of the ReferenceOutput enumeration.", enumValue)
End If 
```

这是旧的冗长、未经检查的拆箱方法：

```
Dim refOutput As ReferenceOutput = DirectCast([Enum].Parse(GetType(ReferenceOutput), DataGrid1.SelectedIndex.ToString(), True), ReferenceOutput) 
```

# c# - 如何将 ItemsSource 绑定到多个集合？

> ID：13067895
> 
> 赞同：5
> 
> 时间：2012-10-25T11:47:18.297
> 
> 标签：c#, .net, wpf, data-binding

我有一些公开`ObservableCollection<MyData>`属性的来源。现在我想绑定`ListBox.ItemsSource`到所有这些并支持`CollectionChanged`通知、排序和过滤。怎么做？`CompositeCollection`不支持过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:51:05.160

您可以同时使用 CompositeCollection 和 CollectionViewSource。使用 CompositeCollection 组合所有集合，然后从该 CompositeCollection 创建集合视图源。您可以在 CollectionViewSource 中使用过滤器属性

在这里寻找样品

[如何处理具有 CollectionView 功能的 CompositeCollection？](https://stackoverflow.com/questions/2079553/how-to-handle-a-compositecollection-with-collectionview-features)

# facebook - 为什么我的活动中只显示一个 OpenGraph 实例？

> ID：13067899
> 
> 赞同：1
> 
> 时间：2012-10-25T11:47:30.410
> 
> 标签：facebook, facebook-opengraph

每当我使用facebook的[调试工具](https://developers.facebook.com/tools/explorer)在对象上发布“动作”时，我确实为每个动作获得了不同的**id ，但在 facebook 上只看到一个帖子。**这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:26:22.690

是的，每个 og 对象都应该有不同的 URL。无论如何，每个 og 对象都需要有不同`og:xxxxxx`的标签。考虑 RottenTomatoes 上的这些 og 对象：

[http://www.rottentomatoes.com/celebrity/tom_hanks](http://www.rottentomatoes.com/celebrity/tom_hanks)

[http://www.rottentomatoes.com/celebrity/meg_ryan](http://www.rottentomatoes.com/celebrity/meg_ryan)

查看这些页面的来源，您会看到`og:image`和其他`og:`标签。

这些也是动态网页的好例子。

### 要在评论中回答您的后续问题：

您可以通过改变标签来制作`x.php?a=0`不同的对象，它会很好地通过[FB 调试器。](https://developers.facebook.com/tools/debug)`x.php?a=1``<meta>`

例如，我创建了这些动态对象：

[http://plooza.com/og/dynamic1.php?obj=0](http://plooza.com/og/dynamic1.php?obj=0)

[http://plooza.com/og/dynamic1.php?obj=1](http://plooza.com/og/dynamic1.php?obj=1)

当我将这些 og 对象/URL 输入调试器时，它会抓取并解析它们并将它们识别为不同的对象，因为我在网络服务器上执行此操作：

```
$obj_number = (int)$_REQUEST['obj'];
echo '<meta property="og:url" content="http://www.plooza.com/og/dynamic1.php?obj='.$obj_number.'" />';

switch ($obj_number) {
  case 1:
    $url = 'http://img2.10bestmedia.com/Images/Photos/68906/bar-one-exterior_6_400x400.jpg';
    break;
  default:
    $url = 'http://cdn.ghacks.net/wp-content/uploads/2010/06/microsoft-default-manager22.png';
    break;
}
echo '<meta property="og:image" content="'.$url.'" />'; 
```

请注意，我已经更改`og:url`并`og:image`基于`obj`in的值`dynamic1.php?obj=`

当我提交`http://plooza.com/og/dynamic1.php?obj=1`给调试器时，它显示的与`og:image`何时不同`obj=0`

# wordpress - wp-admin head 中的 TinyMCE 不起作用

> ID：13067902
> 
> 赞同：1
> 
> 时间：2012-10-25T11:47:44.467
> 
> 标签：wordpress, tinymce, admin

我想在我的 wp-admin 中使用 tinyMCE 来替换 textareas。更具体地说，对于我想简单地使用而不是更复杂的 tinymce 特定 php 代码的自定义元框。

因此，我将 tinymce 放在 wp-admin 文件夹中，并将其加载到 admin-header.php 中，当我转到其中一个编辑页面页面时，它会成功加载它，除了它不是将 textareas 转换为 tinymce 编辑器，它使文本区域（除了一个，出于某种原因？）变得不可见。控制台给我的唯一错误是 tiny-mce.js 中的“未定义不是函数”，而 load-scripts.js 中的“ajaxurl 未定义”。

我可能做错了什么？tinymce 的 javascript 是最基本的：

```
<script type="text/javascript" src="/wp-admin/tinymce/jscripts/tiny_mce/tiny_mce.js" >     </script >
<script type="text/javascript" >
tinyMCE.init({
    mode : "textareas",
    theme : "simple"   //(n.b. no trailing comma, this will be critical as you experiment later)
});
</script > 
```

只有我能想到的事情：

1.  在 admin-header.php 中不能正常工作
2.  我制作的 metaboxes 文件认为 tinymce 是一个糟糕的选择
3.  ？？？

但这并没有真正给我任何选择......而且我厌倦了试图让 tinymce 在我的 metaboxes 文件中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:33:49.077

*再次*替换 wp-admin 和 wp-includes 文件夹使其工作，不知道为什么它不是第一次。解决了！

# php - 如果图像很大，则图像无效 CodeIginiter

> ID：13067903
> 
> 赞同：0
> 
> 时间：2012-10-25T11:47:49.373
> 
> 标签：php, codeigniter, download

我正在使用此代码下载文件：

```
if ($file_name) {
    $file_url = $file_name;
    header('Content-Type: application/octet-stream');
    header("Content-Transfer-Encoding: Binary");
    header("Content-disposition: attachment; filename=\"" . $file_url . "\"");
    ob_clean();
    flush();
    readfile($file_url);
} 
```

它可以正确下载小文件，但是当文件很大时，对于图像文件（如`.jpg`）说`Invalid Image`. 而对于`.pdf`它来说`invalid format`。我正在使用 CodeIgniter 框架。

**$file_name**以`https://`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T03:08:17.510

使用 Codeigniter 下载帮助程序。在您的控制器中：

```
$this->load->helper('download');
$data = file_get_contents($filePath); 
$extension = end(explode(".", $filePath);
$name = "myfile" . "." . $extension;

force_download($name, $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:01:15.573

检查你的 php.ini 文件

```
ini_set(); //memory limit 
```

# python - Complete representation of a dict extended superclass

> ID：13067905
> 
> 赞同：1
> 
> 时间：2012-10-25T11:47:52.173
> 
> 标签：python, object, serialization

Given this code:

```
class XmlObj(dict):
    def __init__(self,xml,*args,**kwargs):
        super(dict,self).__init__(*args,**kwargs)
        if xml.firstChild.nodeName == '#text':
            self.__setattr__( 'text', xml.firstChild.nodeValue )
            return
        else:
            for node in xml.childNodes:
                if self.has_key( node.nodeName ):
                    item = self.__getitem__(node.nodeName)
                    if type( item ) is not type( [] ):
                        item = [item]
                        item.append( XmlObj( node ))
                    self.__setitem__(node.nodeName, item )
                else:
                    self.__setitem__(node.nodeName, XmlObj(node) )

    def __str__(self):
        if hasattr(self,'text'):
            return self.__getattribute__('text')
        else:
            return "%s"%super(dict,self).__str__()

text = """<?xml version="1.0"?><response><success>true</success><message>Metric List</message><page>1</page><rpp>50</rpp><total>9</total><pages>1</pages></response>"""
obj = XmlObj( parseString( text ).documentElement )
print obj
print obj['rpp']

>>> {u'rpp': {}, u'success': {}, u'pages': {}, u'message': {}, u'total': {}, u'page': {}}
>>> 50 
```

I'd like to get :

```
>>> {u'rpp': '50', u'success': True, u'pages': 4, u'message': 'Some message', u'total': 90, u'page': 1} 
```

I just wonder how Python handles the `__repr__` call of the objects just to get the obj parameters inside display the `text` attribute instead the empty dict.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:56:27.697

经过一番谷歌搜索终于找到了答案，仅供参考，我将在此处发布答案

[http://effbot.org/pyfaq/how-can-i-get-a-dictionary-to-display-its-keys-in-a-consistent-order.htm](http://effbot.org/pyfaq/how-can-i-get-a-dictionary-to-display-its-keys-in-a-consistent-order.htm)

```
class XmlObj(dict):
    def __init__(self,xml,*args,**kwargs):
        super(dict,self).__init__(*args,**kwargs)
        if xml.firstChild.nodeName == '#text':
            self.__setattr__( 'text', xml.firstChild.nodeValue )
            return
        else:
            for node in xml.childNodes:
                if self.has_key( node.nodeName ):
                    item = self.__getitem__(node.nodeName)
                    if type( item ) is not type( [] ):
                        item = [item]
                        item.append( XmlObj( node ))
                    self.__setitem__(node.nodeName, item )
                else:
                    self.__setitem__(node.nodeName, XmlObj(node) )

    def __repr__(self):
        if hasattr(self,'text'):
            return self.__getattribute__('text')
        else:
            result = ["%r: %r" % (key, self[key]) for key in sorted(self)]
            return "{" + ", ".join(result) + "}"

    __str__ = __repr__ 
```

无论如何谢谢大家:)

# python - How to add member to Google Group

> ID：13067910
> 
> 赞同：1
> 
> 时间：2012-10-25T11:48:06.673
> 
> 标签：python, google-groups, google-groups-api, google-admin-settings-api

I have an appengine project where I am attempting to add a user to a Google group.

I am using a `GroupsProvisioningClient` in order to do so. When I add a certain user to the group the code appears to work (no error is reported) but the user doesn't show up in the groups front end, not if I loop through `RetrieveAllMembers`.

When I attempt to `RetrieveGroupMember('group_email', 'user_email')` I get an error:

```
<error errorCode="1301" invalidInput="user@gmail.com" reason="EntityDoesNotExist" /> 
```

But when I attempt to manually add this user in the groups front end I also get an error:

```
user@gmail.com is already in this group 
```

So I'm not sure what's going in, is or isn't my user in the group? How can I check? Is my code wrong?

```
client = gdata.apps.groups.client.GroupsProvisioningClient(domain=settings.DOMAIN)
client.ssl = True
client.auth_token = gdata.gauth.OAuthHmacToken(settings.OAUTH_CONSUMER_KEY, settings.OAUTH_CONSUMER_SECRET, access_token.token, access_token.token_secret, gdata.gauth.ACCESS_TOKEN)
client.AddMemberToGroup('group_email', 'user_email')
client.RetrieveGroupMember('group_email', 'user_email') 
```

# iphone - How to set the textfield value to picker in iPhone?

> ID：13067913
> 
> 赞同：0
> 
> 时间：2012-10-25T11:48:21.213
> 
> 标签：iphone, objective-c

I have an application in which I have a textfield where I am displaying values in it from database. There is a button besides the textfield. I have picker which contain 4 values in it viz Custom,Walk,Run,Jog.

If the textfield contains a value i.e if contains 'Walk' in it then on the click of button I am showing the picker with the 4 values populated in it. But my problem is when the button is clicked the value 'Walk' should be set on the picker.

This is my code.

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    currentarray = [[NSMutableArray alloc] initWithObjects:@"Custom",@"Walk",@"Run",@"Jog",nil];
       // Do any additional setup after loading the view from its nib.
} 
```

This is my button action which when clicked will open the picker:

```
-(IBAction)choose
{
    actionsheet = [[UIActionSheet alloc]initWithTitle:[currentarray objectAtIndex:0] delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];

    [actionsheet setTitle:@"Picker"];

    pickerView = [[UIPickerView alloc]initWithFrame:CGRectMake(0, 40, 0, 0)];
    pickerView.dataSource=self;
    pickerView.delegate=self;
    pickerView.showsSelectionIndicator=YES;
    [actionsheet addSubview:pickerView];
    [actionsheet showInView:self.view];
    [pickerView selectRow:[txtTextfield.text intValue ]-1 inComponent:0 animated:YES];        
    [actionsheet showInView:[[UIApplication sharedApplication]keyWindow]];
    [actionsheet setBounds:CGRectMake(0, 0, 320, 485)];        
}

-(NSString*)pickerView:(UIPickerView*)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{      
    NSString *string;
    string = [NSString stringWithFormat:@"%@",[currentarray objectAtIndex:row]];
    return string;      
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

-(NSInteger)pickerView:(UIPickerView*)pickerView numberOfRowsInComponent:(NSInteger)component{
    return [currentarray count];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:58:42.677

你可以像这样设置pickerView，

```
 [pickerView setObject:textField.text]; 
```

看看下面的链接，

[http://iphonedevsdk.com/forum/iphone-sdk-development/11594-set-selected-row-of-uipickerview-in-applicationdidfinishlaunching.html](http://iphonedevsdk.com/forum/iphone-sdk-development/11594-set-selected-row-of-uipickerview-in-applicationdidfinishlaunching.html)

# dvcs - Bazaar undoing pull from wrong location

> ID：13067919
> 
> 赞同：1
> 
> 时间：2012-10-25T11:48:34.020
> 
> 标签：dvcs, bazaar, pull

I've accidentally pulled to my local bazaar repo from a wrong location. Fortunately my files have not been overwritten, as bazaar recognized the difference:

```
bzr: ERROR: These branches have diverged. Use the missing command to see how.  
Use the merge command to reconcile them.` 
```

However the object packs have been pulled, and I suspect they may cause conflicts if I don't clean them up now.

[I saw that with git you can do this](https://stackoverflow.com/questions/9754564/undoing-a-pull-from-the-wrong-github-repository) via `git reset --hard HEAD^`.

[Bazaar doc](http://doc.bazaar.canonical.com/migration/en/survival/bzr-for-git-users.html) says there's only partial support for that. What is the proper way of resolving this mistake with bazaar? Is `bzr revert` enough?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:39:57.573

如果您收到一条消息：

```
bzr: ERROR: These branches have diverged. Use the missing command to see how.  
Use the merge command to reconcile them. 
```

然后，您无需执行任何操作。集市不要拉任何会导致你问题的东西。

# outlook - Themeless Citrix + Kerio + Outlook Programming

> ID：13067920
> 
> 赞同：0
> 
> 时间：2012-10-25T11:48:37.947
> 
> 标签：outlook, mapi, citrix, outlook-redemption

Does anybody know something about the constellation of Outlook on Themeless Citrex server and integrated kerio ?

We use some outlook api for retreving and sending mails with outlook.-

But we got some weired problems.

For example Some times we gert a "MAPI NOT FOUND" exception when trying to create mails. Or sometimes outlook tells me that it has connection problems (without further details),

Sometimes we get a -2147216347 as error result and so on..

Can someone give some good points to look after? Any hints or anybody with similar problems?

Some problems can simple be reproduced when using VB Script which sends mails or uses GetEntryById with MAPI / Redemption.

Outlook uses the clustered featured and may not be running on the same server as the host process.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:37:48.990

You really need to be more specific - waht is the relevant snippet of your code that produces teh problem? I will respod to your personal e-mail and send you the debug version of the dll.

# jar - Struts2: Unable to load configuration

> ID：13067922
> 
> 赞同：2
> 
> 时间：2012-10-25T11:48:48.010
> 
> 标签：jar, struts2, struts

I get following Stacktrace when trying to start Tomcat7. It shows me the path, but everthing including the content of the jar is placed correctly.

This error does only occur on this particular computer. All other computers are able download the same project from the repository and run it smoothly.

I deleted and reinstalled Tomcat, Eclipse and workspace. This Version from the repository worked fine some days ago and suddenly without any change or update it throws this exception. If I revert to a version without the named jar it starts to work again on this computer - but as I said, it did work :)

Looking for the solution for two days now.

`

```
25.10.2012 13:34:38 org.apache.catalina.core.StandardContext filterStart
SCHWERWIEGEND: Exception starting filter struts2
Unable to load configuration. - [unknown location]
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:273)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:254)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:372)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:98)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4562)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5240)
    at org.apache.catalina.core.StandardContext$2.call(StandardContext.java:5235)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: Unable to load configuration. - [unknown location]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:69)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:380)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:424)
    ... 14 more
Caused by: Unable to load jar:file:/C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FIS/WEB-INF/lib/struts2-bootstrap-plugin-1.5.1.jar!/struts-plugin.xml - [unknown location]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:909)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:154)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:121)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:179)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    ... 16 more
Caused by: Connection timed out: connect - [unknown location]
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:904)
    ... 20 more
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at javax.xml.parsers.SAXParser.parse(Unknown Source)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 21 more
25.10.2012 13:34:38 org.apache.catalina.core.StandardContext startInternal
SCHWERWIEGEND: Error filterStart
25.10.2012 13:34:38 org.apache.catalina.core.StandardContext startInternal
SCHWERWIEGEND: Context [/FIS] startup failed due to previous errors 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:58:59.137

假设您没有部署它两次（因为您的项目在某些机器上运行，而不仅仅是一次），也许这是一个机器问题。

然后我会检查互联网设置、代理（有例外）、防火墙等......

最简单的方法是将它们与软件运行的完全相同的机器进行比较，而不是一个一个地分析它们......

我知道这很明显，但是您发布的信息确实不足以尝试特定的东西，即使发布了struts config，如果至少有一个软件可以工作的地方，我认为这是一个环境配置问题，而不是软件问题...

# groovy - Gradle: testDependents and testNeeded

> ID：13067925
> 
> 赞同：4
> 
> 时间：2012-10-25T11:48:53.920
> 
> 标签：groovy, gradle

With the gradle java plugin you get the following tasks which are very neat:

buildDependents
buildNeeded

I would like to have similar tasks for running tests only.

testDependents - runs the unit tests for this project and all projects that depend on it.
testNeeded - runs the unit tests for this and all projects it depends on.

Can I somehow create such custom tasks in gradle?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:32:48.273

从 gradle 论坛得到以下答案。

```
allprojects {
    apply plugin:'java'
    task testDependents{
        dependsOn (configurations.testRuntime.getTaskDependencyFromProjectDependency(false, "testDependents"))
        dependsOn test
    }
    task testNeeded{
        dependsOn (configurations.testRuntime.getTaskDependencyFromProjectDependency(true, "testNeeded"))
       dependsOn test
    }
} 
```

# c# - Will Azure Mobile Services allow me to exchange targeted messages between apps?

> ID：13067927
> 
> 赞同：3
> 
> 时间：2012-10-25T11:48:57.080
> 
> 标签：c#, sockets, ssl, azure-mobile-services

I am creating (in the formative, smoke-coming-out-of-ears stage) a pair of apps, one Windows 8, its companion WP8\. Communication needs to take place between the pair, but only between those invited to participate in the conversation (invitation sent by the Windows 8 app) and those who have agreed (using the WP8 app).

IOW, it may look like this:

```
Windows8 app, User = Billy-Bob
    WP8 app users who were invited by Billy-Bob and accepted = Miley, Wiley, Kiley, and Riley

Windows8 app, User = Rory
    WP8 app, users who were invited by Rory and accepted = Gerry, Lou, Rod, Ted 
```

Billy-Bob is the only person who receives messages from Miley, Wiley, Kiley, and Riley. Rory is the only person who receives messages from Lou, Rod, Gerry, and Ted.

I'm thinking Windows Azure Mobile Services might be the best way to implement this, using raw WNS push notifications. But I don't know if this is feasible with WAMS, or if I'd be trying to force an octogonal object into a trapezoidal receptacle.

Would this be practical? If not, why? If so, how do I proceed?

My other option is to use ssl sockets, but I'd prefer to avoid that if possible.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:59:30.457

是的，可以使用推送通知（是否通过 Azure 移动服务）来做到这一点，但请记住，没有推送通知系统 - 无论是 Windows 通知服务（WNS，适用于 Windows 8）、Microsoft 推送通知服务（MPNS，适用于 Windows Phone） ) 甚至 Apple 推送通知服务（APNS，适用于 iOS 设备和 MacOS 应用程序） - 保证消息的传递 - 大多数都以“尽力而为”模式行事。此外，根据您要交换的消息和要访问的设备，您可以“推送”的内容可能有大小限制（我不了解 MPNS，但对于 APNS，有效负载不能超过 256 个字节） .

纯推送机制可能还有其他替代方案。正如您所提到的，套接字可能是一个（尽管这可能会受到某些防火墙的限制）。Azure 移动服务空间中的某些东西可以通过将消息存储在某种模拟队列（甚至是真正的队列，例如服务总线提供的队列）的表中，并使用推送通知仅通知应用程序有新的消息可用（这也可以解决离线故事，当推送通知无法到达目的地时，但应用程序可以在它上线时轮询新消息）。

# authentication - Authenticate against Active Dir on remote machine using C#

> ID：13067930
> 
> 赞同：2
> 
> 时间：2012-10-25T11:49:04.180
> 
> 标签：authentication, azure, active-directory

How can i access Active directory on remote machine. I have created a win server 2008 R2 with AD installed in Azure. Hostname: MyVMachine, DNS: myapp.cloudapp.net. I can access the machine using remote desktop connection from my laptop.

I want to authenticate users against that AD. Should i use ContextType.Domain or ContextType.Machine and what about LDAP, how to constrauct it in order to contact that AD? This code is in a WCF service application in my laptop. The following is not working:

```
 using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "LDAP://MyVMachine.testenv.local/ou=Users,dc=testenv,dc=local"))
        {
            // validate the credentials
            bool b = pc.ValidateCredentials("Administrator", "password");
            return true;
        } 
```

i want here to authenticaate the user Administrator whiich i see exsists in Users node in testenv.local node i AD machine.

with this code i am getting "The server could not be contacted." with principalServerDownExceptioan.

I need help please.

Thank you all

My AD Machine in Azure: ![enter image description here](../Images/b1402b4680fc9c78ae757e0ee3410800.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:42:44.037

您当前请求的方案是不可能的，也不支持。到目前为止，唯一受支持的选项（并且仍处于 PREVIEW 中）是Azure 中的[Active Directory REPLIC](http://www.windowsazure.com/en-us/manage/services/networking/replica-domain-controller/) A。这意味着您必须拥有本地 AD 并将 Azure 用作副本。

为了复制副本，您必须配置[Azure 虚拟网络](http://www.windowsazure.com/en-us/manage/services/networking/add-a-vm-to-a-virtual-network/)以在本地计算机和 Windows Azure 虚拟网络之间建立 VPN。

***我的猜测和猜测***：

可能的原因之一（我的猜测）是当前在 Windows Azure 虚拟网络中，尽管您自己定义了子网，但所有 VM都**必须**具有 DHCP 分配的 IP 地址。而主域控制器必须具有静态 IP 地址。

**更新**

如果您只想使用中所述的 LDAP 功能，`LDAP://MyVMachine.testenv.local/`则必须在 Windows Server Firewll 和 Windows Azure 虚拟机输入端点中打开 LDAP 端口（可从新门户配置，当您选择 VM 时，会出现“端点”菜单项在上面）。对于 SSL ，它应该是[（默认）端口 389 或 636 上的 TCP 协议](http://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocolhttp://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)。并且您还必须安装服务器的 LDAP 功能并对其进行配置。但这些是更多的 AD/LDAP 细节，如果你不知道更好地询问[serverfault](https://serverfault.com/)。

# linux - tcpdump ：匹配确切的数据包长度

> ID：13067939
> 
> 赞同：3
> 
> 时间：2012-10-25T11:49:46.063
> 
> 标签：linux, tcpdump

我需要捕获长度等于 16 字节的数据包

我离得越近是这样的：

```
tcpdump -ni lo -ttt dst port 1337 and greater 16 
```

如果我添加其他过滤器以符合我的意愿：

```
tcpdump -ni lo -ttt dst port 1337 and greater 16 and not greater 17
tcpdump -ni lo -ttt dst port 1337 and \(greater 16 and not greater 17\)
tcpdump -ni lo -ttt dst port 1337 and greater 16 and less 16 
```

它根本不显示任何数据包。

虽然，使用：

```
tcpdump -ni lo -ttt dst port 1337 and less 16 
```

似乎也不起作用，如果较少的过滤器起作用，我实际上是在徘徊......

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-10T02:00:15.213

正如 Barry Margolin 所指出的，`greater`操作员检查整个数据包的长度，包括所有标头。例如，16 字节的 TCP 有效负载加上 20 字节的 TCP 报头（这是最小的 TCP 报头长度，没有选项）加上 20 字节的 IPv4 报头（这是最小的 IPv4 报头长度，没有选项）加上 14 字节的以太网报头，例如， 70 字节。

我从“lo”猜测您正在 Linux 上捕获并在环回接口上捕获，在这种情况下，数据包具有（假）以太网标头。

68 字节是旧版本 tcpdump 中的默认快照长度，当在没有 IPv6 支持的情况下构建时，因此报告为 68 的长度可能是*捕获*的长度，最后 2 个字节被截断。尝试使用标志运行 tcpdump `-o 0`（除非它是 tcpdump 的*真正*旧版本，否则快照长度为 0 将意味着“将快照长度设置得非常高，这样数据包就不会被切断）。

# ssis - 没有结果集时执行 SQL 任务失败

> ID：13067941
> 
> 赞同：4
> 
> 时间：2012-10-25T11:49:54.403
> 
> 标签：ssis

在我的包中，我有执行 SQL 任务，它从存储过程中获取一些数据，一切正常，直到 SP 向我返回一些结果集/单行。

但是在某些情况下，存储过程不会返回任何结果集/单行。现在，当 SP 没有返回数据但我不希望这样时，我的 Execute SQL 任务会失败。

我希望如果没有结果集，我可以处理其他事情而不是失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:41:01.560

您在这里有几个选择。您可以将约束从 Execute SQL Task 更改为 next on 以完成，而不是 Success。或者，您为任务执行 SQL 任务创建一个 On Error 事件处理程序，该任务将处理获取零行。或者，您可以使用属性窗口中的 ForceExecutionResult 属性来执行 SQL 任务 (F4)。

你也可以[在这里阅读更多](http://sqlblog.com/blogs/rushabh_mehta/archive/2008/04/24/gracefully-handing-task-error-in-ssis-package.aspx)

# java - 在特定目录中运行 Inix 命令

> ID：13067949
> 
> 赞同：1
> 
> 时间：2012-10-25T11:50:30.927
> 
> 标签：java, unix, runtime.exec

我想使用 Kava 解压缩特定目录和子目录中的所有文件。如果我打开终端，我可以使用这个：

```
find . -name '*.zip' -exec unzip {} \\ 
```

我想在我的 Java 应用程序中的某个点和某个目录中运行它，所以我使用它：

```
public void unzip() {
    try {
    Runtime unzipProcess = Runtime.getRuntime();
    unzipProcess.exec("find . -name '*.zip' -exec unzip {} \\");
    } catch(Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

这运行。我不知道它是否有效，因为我无法设置工作目录。我需要能够做类似的事情`unzipProcess.setWorkingDirectory("/Users/abc/")`。但是当然这种方法不存在，我认为我做错了什么。

如何在特定目录中运行此命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:53:47.187

你需要*要么*

*   使用[三参数版本`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)并将所需的工作目录作为`File`参数传入，*或者*
*   在调用之前切换到[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)并调用。[`directory(File)`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#directory%28java.io.File%29)[`start()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#start%28%29)

我个人强烈建议使用它，`ProcessBuilder`因为它有更好的 API。

一般来说，我建议阅读[When Runtime.exec() won't](https://encrypted.google.com/search?rlz=1C1_____enAT460AT460&aq=f&oq=when%20runtim&sugexp=chrome,mod=0&sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&q=when%20runtime%20exec%20doesn%27t&qscrl=1)获取有关常见`Runtime.exec()`陷阱的信息（大部分信息也同样适用于较新的`ProcessBuilder`API）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:53:37.640

您可以将`find`参数更改为所需的目录`find /Users/abc -name '*.zip' -exec unzip {} \`

或按照 Joachim Sauer 的建议切换到`ProcessBuilder`课堂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:07:05.777

为什么不替换起始目录“。” 在查找命令中？：

```
public void unzip(String workingDrirectory) {
  try {
    Runtime unzipProcess = Runtime.getRuntime();
    unzipProcess.exec("find " + workingDrirectory + " -name '*.zip' -exec unzip {} \\");
  } catch(Exception e) {
    System.out.println(e.getMessage());
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:54:26.453

在命令中，您可以提供`[-d exdir]`参数`exdir`并将具有解压缩的文件。

# html - 溢出时滚动条消失：自动应用

> ID：13067950
> 
> 赞同：0
> 
> 时间：2012-10-25T11:50:33.420
> 
> 标签：html, css, scrollbar, overflow

我有一个页脚和一个内容框。页脚是固定的，因此它在滚动的任何点都可见。内容框的高度为 100%，但它的上升在页脚开始之前结束（这样它就不会越过页脚框而失败。）

```
<div id="footer" style="border:4px solid black;"></div>
<div id="content" style="border:4px solid blue;"></div> 
```

一个问题来了。#content 有一个 overflow:auto 参数，它会破坏浏览器右侧的滚动条。在我的真实示例中，结果变得更加可怕（当#content 图片覆盖滚动条使其不可见时，应用了拉伸背景）。

这是一个 JSFiddle 链接：http: [//jsfiddle.net/TAVmF/7/](http://jsfiddle.net/TAVmF/7/)

请注意，我希望滚动条位于正确的位置，而不仅仅是出现在窗口的#content 部分。

谢谢你们。

编辑：

从这张照片可以看出问题：

![](../Images/1c64203681dc7e508afa6a7b16ea1993.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:16:29.867

```
html
{
    height:100%; 
    max-height:100%;  
    padding:0; 
    margin:0; 
} 
```

改成

```
html
{ 
    padding:0; 
    margin:0; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:02:57.760

改变 #content{ 高度：98%; } 尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T12:31:31.047

如果您的`#content`高度设置为 100%，但您将其从底部向上推 170px，则顶部 170px 将始终离开页面顶部。您需要设置一个小于 100% - 170px 的不同高度，或者您可以[在此处尝试此答案的方法 3](https://stackoverflow.com/a/13036019/1408356)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:12:03.407

也许尝试：

```
#content
{
    display:block;
    top:0;
    width: 100%;
    left:0;
    bottom:170px;
    overflow:auto;
    position:absolute;
} 
```

并从中删除边框`<div id="content">`

完整示例：http: [//jsfiddle.net/EQV6S/13/](http://jsfiddle.net/EQV6S/13/)

编辑：我认为这就是你想要的：http: [//jsfiddle.net/EQV6S/15/](http://jsfiddle.net/EQV6S/15/) 请检查一下 :)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T11:58:12.173

为什么内容 div 有 left:250px ？尝试删除`left:250px;`

**[演示](http://jsfiddle.net/TAVmF/11/)**

# wpf - 基于 DependencyProperty 绑定的 WPF 样式 DataTrigger

> ID：13067952
> 
> 赞同：0
> 
> 时间：2012-10-25T11:50:39.580
> 
> 标签：wpf, binding, styles, datatrigger

我正在开发 WPF 表单设计器，您可以在其中将标签、文本框、组合框等控件拖放到设计图面上，然后通过属性网格用户可以为每个控件设置数据绑定。我需要为那些没有为给定属性设置绑定的控件显示红色背景。

我最初的想法是创建一个 HasBindingConverter，它将获取调用元素本身并检查它是否具有与某个属性的绑定。在这种情况下`TextBox.TextProperty`

```
public class HasBindingConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        FrameworkElement fe = value as FrameworkElement;
        if(fe != null)
        {
            Binding binding = BindingOperations.GetBinding(fe, TextBox.TextProperty);
            return binding != null;
        }
        return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

然后我将一个与 TextBox 控件类型关联的样式添加到我的表单的资源部分，它是一个用户控件：

```
<UserControl.Resources>
    <Style TargetType="TextBox">
        <Style.Resources>
            <Converters:HasBindingConverter x:Key="HasBindingConv"/>
        </Style.Resources>
        <Style.Triggers>
            <DataTrigger
            Binding="{Binding,
            RelativeSource={RelativeSource Self},
            Converter={StaticResource HasBindingConv}}"
            Value="False">
                <Setter Property="TextBox.Background" Value="Red" />
                </DataTrigger>
 <DataTrigger Binding="{Binding 
            RelativeSource={RelativeSource Self},
            Converter={StaticResource HasBindingConv}}"
            Value="True">
                <Setter Property="TextBox.Background" Value="White" />
        </Style.Triggers>
    </Style> 
```

因此，如果 TextBox 没有为 TextBox.TextProperty 设置数据绑定，那么它将其背景设置为红色。这部分工作正常，问题是当用户为此控件设置 TextBox.TextProperty 绑定时，我的 Converter 不再被调用，因此背景保持红色。

任何人都知道在设置此控件的绑定后如何调用触发器？或任何其他建议，我可能以错误的方式处理问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:19:52.720

发生这种情况的原因是`Binding`不会再次作为源调用，即它`TextBox`本身一旦创建就永远不会改变！

假设您专注于`TextBox`.

1.  因此，将 Container ( `Window`/ `UserControl`) 的 Tag 属性设置为当前控件。

    ```
    myWindow.Tag = FocusManager.GetFocusedElement(myWindow); 
    ```

2.  用这个改变触发器`Binding`。

    ```
    <DataTrigger
        Binding="{Binding,
        Path=Tag,
        RelativeSource={RelativeSource AncestorType=Window},
        Converter={StaticResource HasBindingConv}}" .. > 
    ```

3.  刷新`Tag`的属性`Window`。

    ```
    myWindow.Tag = null;
    myWindow.Tag = FocusManager.GetFocusedElement(myWindow); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:13:59.143

我找到了另一种方法来解决这个问题。

我创建了一个 ControlHasBindingBehavior Attached 属性，最初将其设置为 false。

```
public class ControlHasBindingBehavior
{
    #region DependencyProperty HasBinding

    /// <summary>
    /// Registers a dependency property as backing store for the HasBinding property
    /// Very important to set default value to 'false'
    /// </summary>
    public static readonly DependencyProperty HasBindingProperty =
        DependencyProperty.RegisterAttached("HasBinding", typeof(bool), typeof(ControlHasBindingBehavior),
        new FrameworkPropertyMetadata(false,FrameworkPropertyMetadataOptions.AffectsRender));

    /// <summary>
    /// Gets or sets the HasBinding.
    /// </summary>
    /// <value>The HasBinding.</value>
    public static bool GetHasBinding(DependencyObject d)
    {
        return (bool)d.GetValue(HasBindingProperty);
    }

    public static void SetHasBinding(DependencyObject d, bool value)
    {
        d.SetValue(HasBindingProperty, value);
    }

    #endregion
} 
```

然后在我的 FormDesigner 视图中，我为所有 TextBoxes 创建了一个样式和触发器，因此当 Textbox 'HasBinding' 附加属性为 false 时，它​​会将背景变为红色：

```
 <Style TargetType="TextBox">
        <Style.Triggers>
            <Trigger Property="Behaviors:ControlHasBindingBehavior.HasBinding" Value="False">
                <Setter Property="Background" Value="Red"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

最后，当用户为给定控件成功设置绑定时，我将附加属性设置为“真”：

```
 ControlHasBindingBehavior.SetHasBinding(SelectedObject,true); 
```

[发生这种情况时，我的 TextBox.Background 再次变为白色 :) 最初我想以通用方式将样式触发器应用于所有 UIElements、FrameworkElements 或控件，但根据这个线程](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/ffa27da3-5b76-4b3b-9a76-977f5061f51c/)似乎这是不可能的

希望有人觉得它有用

# php - 如何使用 PHP 计算小时和分钟的日期差异？

> ID：13067953
> 
> 赞同：0
> 
> 时间：2012-10-25T11:50:41.847
> 
> 标签：php, math, date, operation

我有这个代码，他计算日期差异，到目前为止它一直很好，但我有问题，我想从较低的数字中减去高数字并在负数上显示值，这个代码会自动找到哪个数字更高我不想要那个。

```
$to_time = strtotime("2012-10-25 10:42:00");
$from_time = strtotime("2012-10-26 10:21:00");
echo round(abs($to_time - $from_time) / 60,2). " minute"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:53:18.237

尝试

```
echo round(($to_time - $from_time) / 60,2). " minute"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:53:34.140

尝试这个

```
$to_time = strtotime("2012-10-25 10:42:00");
$from_time = strtotime("2012-10-26 10:21:00");
echo round(($to_time - $from_time)/60,2). " minute"; 
```

# xml - XSLT - 适合这项任务吗？

> ID：13067956
> 
> 赞同：3
> 
> 时间：2012-10-25T11:50:47.257
> 
> 标签：xml, xslt, parallel-processing, transformation, text-processing

我需要将一个*巨大*的XML 文档转换为多个 HTML 文档。XML如下：

```
<society>
  <party_members>
    <member id="1" first_name="" last_name="O'Brien">
      <ministry_id>1</ministry_id>
      <ministry_id>3</ministry_id>
    </member>
    <member id="2" first_name="Julia" last_name="">
      <ministry_id>2</ministry_id>
    </member>
    <member id="3" first_name="Winston" last_name="Smith">
      <ministry_id>1</ministry_id>
    </member>
  </party_members>
  <ministries>
    <ministry>
      <id>1</id>
      <short_title>Minitrue</short_title>
      <long_title>Ministry of truth</long_title>
      <concerns>News, entertainment,education and arts </concerns>      
    </ministry>
    <ministry>
      <id>2</id>
      <short_title>Minipax</short_title>
      <long_title>Ministry of Peace</long_title>
      <concerns>War</concerns>
    </ministry>
    <ministry>
      <id>3</id>
      <short_title>Minilove</short_title>
      <long_title>Ministry of Love</long_title>
      <concerns>Dissidents</concerns>      
    </ministry>
  </ministries>
</society> 
```

潜在的党员人数可能非常多——数百万，而部委的数量很少，大约 300-400 个。对于每个党员，应该有一个包含以下内容的输出 HTML：

```
<html>  
  <body>
    <h2>Party member: Winston Smith</h2>
    <h3>Works in:</h3>
    <div class="ministry">
      <h4>Ministry of truth</h4> - Minitrue
      <h5>Ministry of truth <i>concerns</i> itself with <i>News, entertainment,education and arts</i></h5>  
    </div>
  </body>
</html> 
```

输出文件的数量应该==党员的数量。

我现在正在努力使用 XSLT，但无法让它工作。

请帮助我确定 XSLT 是否是这项工作的好工具，如果是，请提示我如何实现它，应该使用哪些 XSLT 构造等。

当然，我可以简单地用程序语言编写小型转换，但我正在寻找一种“*应用转换模板*”的方法，而不是程序解析和修改，以便能够将模板交给其他用户进行进一步修改（CSS、格式ETC）。

我正在使用 ruby​​ + nokogiri（这是一组与 libxslt 的绑定），但可以使用任何语言。

如果 XSTL 不适合这项任务，那么在这里可以使用哪些其他工具，前提是我必须在几分钟内转换约 1M 的用户，并且内存消耗很少？

额外的好处是能够并行处理。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:04:22.187

好吧，使用纯 XSLT 1.0，您无法使用您似乎想要做的单个转换来创建多个结果文档。为此，您需要使用 XSLT 2.0 处理器（如 Saxon 9 或 AltovaXML）和 XSLT 2.0 指令`[xsl:result-document][1]`，或者您需要使用 XSLT 1.0 处理器（如实现[http://www.exslt.org/exsl/elements/document的 xsltproc/libxslt） /index.html](http://www.exslt.org/exsl/elements/document/index.html)。如果您可以使用其中之一，那么 XSLT 非常适合您的任务。

[编辑] 分别用 libxslt xsltproc 如下样式表代码

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="exsl"
  extension-element-prefixes="exsl"
  version="1.0">

<xsl:output method="html" indent="yes"/>

<xsl:key name="ministry-by-id" match="ministry" use="id"/>

<xsl:template match="/">
  <xsl:apply-templates select="society/party_members/member" mode="doc"/>
</xsl:template>

<xsl:template match="member" mode="doc">
  <exsl:document href="member{@id}.xml">
    <html>
      <body>
        <h2>Party member: <xsl:value-of select="concat(@first_name, ' ', @last_name)"/></h2>
        <h3>Works in</h3>
        <xsl:apply-templates select="key('ministry-by-id', ministry_id)"/>
      </body>
    </html>
  </exsl:document>
</xsl:template>

<xsl:template match="ministry">
  <div class="ministry">
    <h4><xsl:value-of select="long_title"/></h4>
    <h5><xsl:value-of select="long_title"/> <i>concerns</i> itself with <i><xsl:value-of select="concerns"/></i></h5>
  </div>
</xsl:template>

</xsl:stylesheet> 
```

展示了如何使用`exsl:document`一个转换输出多个结果文档。它还使用密钥来提高性能。让我们知道该代码是否适用于您的大量输入数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:29:37.413

为了达到这个结果（生成几个 html 文件），您肯定需要 XSLT 2.0。我建议为此使用撒克逊语。

在这里，您有一个示例 XSL，它可以生成您需要的内容（为每个成员创建一个 html 文件，所有成员都在系统根目录的“html”文件夹中，并返回一份关于它创建内容的报告）。您可能需要稍微调整一下以满足您的需求。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" method="html"/>
    <xsl:variable name="target-dir" select="'/html'"/>
    <xsl:key name="ministries" match="/society/ministries/ministry" use="id"/>
    <xsl:strip-space elements="*"/>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="/">
        <Output>
            <xsl:apply-templates select="*"/>
        </Output>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="*">
        <xsl:apply-templates select="*"/>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="member">
        <Html path="{concat($target-dir,'/',@id,'.html')}">
            <xsl:result-document href="{concat($target-dir,'/',@id,'.html')}">
                <html>
                  <body>
                    <h2><xsl:value-of select="concat('Party member: ',@first_name,' ',@last_name)"/></h2>
                    <h3>Works in:</h3>
                    <xsl:apply-templates select="ministry_id"/>
                  </body>
                </html>
            </xsl:result-document>
        </Html>
    </xsl:template>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <xsl:template match="ministry_id">
    <xsl:variable name="ministry" select="key('ministries',.)"/>
    <div class="ministry">
        <h4><xsl:value-of select="$ministry/long_title"/></h4> - <xsl:value-of select="$ministry/short_title"/>
        <h5><xsl:value-of select="$ministry/long_title"/> <i>concerns</i> itself with <i><xsl:value-of select="$ministry/concerns"/></i></h5>
    </div>
    </xsl:template>
</xsl:stylesheet> 
```

这里有一个示例输出：

```
<html>
   <body>
      <h2>Party member:  O'Brien</h2>
      <h3>Works in:</h3>
      <div class="ministry">
         <h4>Ministry of truth</h4> - Minitrue
         <h5>Ministry of truth<i>concerns</i> itself with <i>News, entertainment,education and arts </i></h5>
      </div>
      <div class="ministry">
         <h4>Ministry of Love</h4> - Minilove
         <h5>Ministry of Love<i>concerns</i> itself with <i>Dissidents</i></h5>
      </div>
   </body>
</html> 
```

关于性能，数百万是大量数据。我想 xsl 就足够了，但恐怕你需要先试一试才能确定。

我希望这可以帮助你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:04:13.900

使用 XSLT 编写所需的转换应该很简单，但我认为一次性处理如此大的 XML 不是正确的技术：它将整个数据加载到内存中并从那里工作，这对这么大的数据集。

如果每个 HTML 文档对应于整个文档的一个小的连续部分，我建议使用程序（使用不会将整个文档加载到内存中的 XML 解析器）拆分大 XML 文件，然后使用一个 XSLT。

如果每个 HTML 文档包含来自文件和/或聚合的不同部分的数据（例如匹配某些条件的成员总数），我建议解析 XML 并将其数据加载到 SQL 数据库中，然后生成 HTML从此数据库中读取的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:17:11.880

大部分工作肯定可以在 XSLT 1.0 中完成，尽管正如 Martin 所说，您只能生成一个包含所有 HTML 摘录的文档。由此，您可以使用 XPath 技术选择每个 html 节点并返回每个节点的 OuterXml，以便您将其写入文件/数据库等。

然而，由于内存限制，一次处理所有党员可能不可行。

由于党员不依赖于其他成员（仅依赖于部委），我建议您一次处理 1000 个左右的党员，所有部委都存在于 XML 文档中。您还可以将部委拆分为单独的 xml 文件，并`xsl:document`在处理每个党员 xml 文件期间用于加载部委。

**编辑**：[xsl:document reference](http://www.w3.org/TR/xslt#function-document)和使用示例[在这里](https://stackoverflow.com/questions/12832545/how-to-merge-two-xml-file-using-xslt1-0)

**以下 XSLT**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0"
                >

    <xsl:output method="xml" omit-xml-declaration="no" indent="yes" />

    <xsl:template match="/society">
        <root>
            <xsl:apply-templates select="party_members/member" />
        </root>
    </xsl:template>

    <xsl:template match="member">
        <html>
            <body>
                <h2>
                    Party member: <xsl:value-of select="@first_name"/><xsl:text xml:space="preserve"> </xsl:text><xsl:value-of select="@last_name"/>
                </h2>
                <h3>Works in:</h3>
                <div class="ministry">
                    <xsl:for-each select="ministry_id">
                        <xsl:variable name="ministryId" select="./text()" />
                        <xsl:apply-templates select="/society/ministries/ministry[id=$ministryId]" mode="partymember"/>
                    </xsl:for-each>
                </div>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="ministry" mode="partymember">
        <h4>
            <xsl:value-of select="long_title"/>
        </h4> -     <xsl:value-of select="short_title"/>
        <h5>
            <xsl:value-of select="long_title"/><i>concerns</i> itself with <i>
                <xsl:value-of select="concerns"/>
            </i>
        </h5>
    </xsl:template>

</xsl:stylesheet> 
```

产生以下输出（经过漂亮的打印）：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <html>
        <body>
            <h2>
                Party member:  O'Brien
            </h2>
            <h3>Works in:</h3>
            <div class="ministry">
                <h4>Ministry of truth</h4> -        Minitrue<h5>
                    Ministry of truth<i>concerns</i> itself with <i>News, entertainment,education and arts </i>
                </h5>
            </div>
        </body>
    </html>
    <html>
        <body>
            <h2>
                Party member: Julia
            </h2>
            <h3>Works in:</h3>
            <div class="ministry">
                <h4>Ministry of Peace</h4> -        Minipax<h5>
                    Ministry of Peace<i>concerns</i> itself with <i>War</i>
                </h5><h4>Ministry of Love</h4> -        Minilove<h5>
                    Ministry of Love<i>concerns</i> itself with <i>Dissidents</i>
                </h5>
            </div>
        </body>
    </html>
    <html>
        <body>
            <h2>
                Party member: Winston Smith
            </h2>
            <h3>Works in:</h3>
            <div class="ministry">
                <h4>Ministry of truth</h4> -        Minitrue<h5>
                    Ministry of truth<i>concerns</i> itself with <i>News, entertainment,education and arts </i>
                </h5>
            </div>
        </body>
    </html>
</root> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T15:20:24.667

“巨大”有多大？如果有 100 万个成员，我猜测 Saxon 的 TinyTree 的大小约为 100Mb，这在内存中肯定是可行的。但是您可能非常危险地接近无法进行主内存转换的地步，然后您必须考虑进行流式转换。

幸运的是，这并没有使使用 XSLT 成为不可能，尽管它确实限制了您可能使用的 XSLT 处理器的范围。

Saxon-EE 支持基于 XSLT 3.0 规范草案的流转换，但是，您通常必须以稍微不同的方式编写代码。在此示例中，要使用流式传输，您首先需要将“部委”数据拆分到一个单独的文件中 - 您可以将拆分作为带有两个结果文档的流式转换进行。然后在主转换中，您可以使用 Carles Sala 建议的键对“成员”数据进行流式处理，以及对“部委”数据进行内存处理。

流式 XSLT 是尖端技术，因此我们总是非常愿意帮助决定尝试它的用户。

# php - 如果表值不存在回显文本？

> ID：13067958
> 
> 赞同：0
> 
> 时间：2012-10-25T11:50:54.880
> 
> 标签：php, mysql

请有人向我解释一下我如何调整我的代码来制作它，以便如果 mysql 表中不存在记录/值，它将回显一段文本？谢谢你。

```
<?php

$reviews_set = get_reviews();

 ?>
<h3>Latest Reviews</h3>
<?php
while ($reviews = mysql_fetch_array($reviews_set)) {
 ?>
 <div class="prof-content-box" id="reviews">
 <div class="message_pic">
 <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\"  src=\"{$prof_photo}\"></a>";?>
 <?php echo "<strong>Review from  {$reviews['display_name']}:</strong><br /><br/> {$reviews['content']}     <br />";

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:53:23.060

使用三元运算符 '?:'

样本：

```
$you_var ?: 'you_text_if_not_exists' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:53:25.587

像这样检查你的变量：

```
<?php (isset($reviews['display_name']) ? $reviews['display_name'] : "entry doesn't exists"; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:59:54.030

```
<?php
    $reviews_set = get_reviews();
    ?>
    <h3>Latest Reviews</h3>
    <?php
    if(mysql_num_rows($reviews_set) > 0) {
        while ($reviews = mysql_fetch_array($reviews_set)) {
            ?>
            <div class="prof-content-box" id="reviews">
             <div class="message_pic">
             <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\"  src=\"{$prof_photo}\"></a>";?>
             <?php echo "<strong>Review from  {$reviews['display_name']}:</strong><br /><br/> {$reviews['content']}     <br />";
        <? 
        }
    }else{
      echo "No Data";
    }

    ?> 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:55:37.437

```
 <?php

     $reviews_set = get_reviews();

   ?>
   <h3>Latest Reviews</h3>
   <?php
    if(mysql_num_rows($reviews =  mysql_fetch_array($reviews_set))>=1)
    {
    while ($reviews = mysql_fetch_array($reviews_set)) {
    ?>
    <div class="prof-content-box" id="reviews">
    <div class="message_pic">
    <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\"  src=\"{$prof_photo}\"></a>";?>
    <?php echo "<strong>Review from  {$reviews['display_name']}:</strong><br /><br/>    {$reviews['content']}     <br />";
    }
    } else {
    echo 'No reviews available';
    }

    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T11:55:43.513

如果要检查表是否有行，请使用以下内容：

```
$num_rows = mysql_num_rows($reviews_set); 
```

`$num_rows`将包含行数。

# c++ - Visual Studio：链接 CreateILockBytesOnHGlobal() 时出现未解决的令牌错误

> ID：13067961
> 
> 赞同：1
> 
> 时间：2012-10-25T11:51:09.343
> 
> 标签：c++, visual-studio, visual-c++

我无法在我的 Visual Studio 项目中链接[CreateILockBytesOnHGlobal()方法。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378977%28v=vs.85%29.aspx)链接时出现未解决的令牌错误。我的项目是一个普通的 Windows 窗体项目。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:56:11.857

正如页面底部的表格中所说，您应该与`Ole32.lib`图书馆链接。将其添加到 Linker + Input + Additional Dependencies 设置。

# mdx - MDX CurrentMember 对计算成员的评估 - 奇怪的结果

> ID：13067967
> 
> 赞同：0
> 
> 时间：2012-10-25T11:51:22.803
> 
> 标签：mdx

我正在使用 SQL Server 分析服务。

我有一个经过计算的成员，目前，它只是这样做：

```
[MyDimension].[MyOnlyHierarchy].CurrentMember.Properties("MEMBER_UNIQUE_NAME") 
```

之前，我刚刚写过`[MyDimension].[MyOnlyHierarchy].CurrentMember.UniqueName`。无论如何，它们应该是相同的。

现在，我使用 SQL Profiler 来获取我的应用程序问题的查询。对于一个简单的计算成员，`[MyDimension].[MyOnlyHierarchy]`它只是对不同的成员求和，比如 ID 为 401 和 402，我得到以下结果：

```
[MyDimension].[MyOnlyHierarchy].&[401][MyDimension].[MyOnlyHierarchy].&[402] 
```

换句话说，就好像 AS 评估基础成员并连接结果，而不是给我计算成员的唯一名称......

对我来说真正奇怪的是，当我接受原始查询时，并在前面加上以下内容：

```
WITH MEMBER [Measures].[GiveMeCalculatedMemberUniqueName]
AS
(
[MyDimension].[MyOnlyHierarchy].CurrentMember.Properties("MEMBER_UNIQUE_NAME")
) 
```

...查询的其余部分

我使用第二个措施得到了正确的结果！上下文是相同的（至少对我而言）。一切都是一样的......但是在项目文件中声明的度量给出的结果与这个内联计算成员不同。

这里发生了什么？请注意，我已经重新部署了 10000 次，并且我已经检查了服务器上多维数据集中的实际定义以及所有内容。这对我来说没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:15:36.447

根据求解顺序评估计算。可能是因为你把它移了下来，它是解决顺序应该如何工作的，它给了你正确的结果。我在[这里](http://codeperfect.wordpress.com/2009/10/02/how-can-solve-order-effect-your-mdx-calculations/)有一个关于解决订单的小博客，但互联网上还有更多文章。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:09:06.610

有趣...我已经坐了大约 2-3 个小时，探索每一个想法；然后，在我发布这个问题后，我决定再尝试一件事：

**将计算成员定义移动到项目中计算成员脚本文件的底部。**

这现在给出了正确的结果。

# wordpress - 主题中的 add_filter 函数（wordpress）

> ID：13067968
> 
> 赞同：0
> 
> 时间：2012-10-25T11:51:26.453
> 
> 标签：wordpress, themes, rewrite, add-filter

我有一个加密内容的功能：

```
function rewrite_text( $article, $case_sensitive=false ) {

    $workwith=$article;
    *(hide line code for copyright)....(hide line code for copyright)*
    $codul='<script type="text/javascript">
document.write(String.fromCharCode('.$numbers.'));
</script>';
        $workwith=$codul;
        }
    return $workwith;
}
add_filter('the_content', 'rewrite_text', 100); 
```

在我的 wordpress 主题（deTube wordpress 主题）中有一个显示 youtube 播放器的功能（在 theme_name/functions.php 中）：

```
function dp_video($post_id, $autoplay = false) {    
    $file = get_post_meta($post_id, 'dp_video_file', true);
    $file = !empty($file) ? explode("\n", $file) : array();
    $url = trim(get_post_meta($post_id, 'dp_video_url', true));
    $code = trim(get_post_meta($post_id, 'dp_video_code', true));
    if(!empty($code)) {
        $code = do_shortcode($code);
        if(function_exists('jwplayer_tag_callback'))
            $code = jwplayer_tag_callback($code);
        $code = extend_video_html($code, $autoplay);        
        echo '<div class="video-wrap">'.$code.'</div>';
    } elseif(!empty($url)) {
        $youtube_id = getYouTubeIdFromURL($url);
        $video = "<div class=\"video-wrap\"><embed src=\"http://www.youtube.com/v/".$youtube_id."?modestbranding=1&version=3&hl=vi_VN&rel=0&autoplay=1&showsearch=0&iv_load_policy=3&theme=light\" type=\"application/x-shockwave-flash\" allowFullScreen=\"true\" allowScriptAccess=\"always\" width=\"100%\" height=\"100%\"/></div>";
        echo $video; 
```

我想通过 add_filter 函数 dp_video 加密 youtube 链接（youtube 播放器代码），使用：

```
add_filter('dp_video', 'rewrite_text', 100); 
```

但它不工作！你能帮我为 dp_video 功能添加过滤器吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:06:15.063

如果你这样做`add_filter('dp_video')`，一定有一个`apply_filters('dp_video')`地方。例如，如果您想过滤 $video，您可以将最后一行更改为

```
echo apply_filters('dp_video', $video); 
```

# wpf - 带有 SQL 数据的 WPF Datagrid，订单列

> ID：13067971
> 
> 赞同：0
> 
> 时间：2012-10-25T11:51:41.500
> 
> 标签：wpf, datagrid

我有一个 Datagrid，其中包含来自 SQL 数据库（WPF 应用程序）的数据，

```
PRCEntities vPRCEntities = new PRCEntities();

var All = from a in vPRCEntities.tblCars
         select a;

myDataGrid_Cars.ItemsSource = All; 
```

到目前为止，这是有效的，

如果我输入 CanUserReorderColumns="True" 和 CanUserSortColumns="True"，那么我可以单击列标题，但它不会对列本身进行排序。

有没有办法订购？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:56:12.583

您是否有 AutoGenerateColumns="False" 并且您的列设置如下：

```
<my:DataGridTextColumn Binding="{Binding Path=ColumnName}" Header="Column Name" /> 
```

# javascript - 保护 HTTP 流量不被嗅探

> ID：13067974
> 
> 赞同：1
> 
> 时间：2012-10-25T11:51:52.857
> 
> 标签：javascript, asp.net, security, ssl

抱歉，如果有人问这个问题，但我还没有找到确切的问题。我有以纯文本形式提交的 HTML 表单。我知道有带有 SSL 的 HTTPs，但我不想购买证书。是否有可能以某种方式加密表单数据？我在想两件事：

*   通过 javascript 散列表单数据 - 事实上我只想发送密码，所以我不需要知道它的原始值。
*   RSA - 不确定它是否可以在 javascript 中实现。你有什么建议？还有其他变种吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:56:27.523

无论您执行何种浏览器端加密，都需要使用加密密钥——攻击者可以使用该密钥。因此，虽然您的密码将对不经意的观察者进行加密，但没有针对有针对性的攻击提供额外的安全性。

在这种情况下，散列是无用的，因为密码的散列版本成为用于授权/注册用户的密码。

这个问题的唯一解决方案是 SSL 证书——它们非常便宜！

[http://en.gandi.net/ssl/grid](http://en.gandi.net/ssl/grid)（无附属链接）

您甚至可以使用[自签名证书](http://en.wikipedia.org/wiki/Self-signed_certificate)（如果您可以教育您的用户相信将出现的浏览器警告）。由于自签名证书没有“证书颁发机构”来证明证书是合法获得的（例如，不是由远程主机在[中间人攻击中提供的](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)）浏览器（和用户）他们将他们斥为“不安全”时非常大声。

[Matasano Security](http://www.matasano.com/articles/javascript-cryptography/)上有一篇关于 Javascript 安全的好文章：

> 将 Javascript 安全地传送到浏览器是一个先有鸡的问题。
> 
> 浏览器 Javascript 对密码学是敌对的。
> 
> Javascript 的“查看源代码”透明度是虚幻的。
> 
> 在这些问题得到解决之前，Javascript 并不是一个严肃的加密研究环境，并且会因此而受苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:56:22.803

*   散列是一种单向过程。您无法从散列中找到原始值。
*   有一个[用于 javascript 的河豚加密库，](http://dren.ch/js_blowfish/)但我真的看不出这样做的目的，因为（就像安迪在他的回答中所说的那样）您用于加密的密钥将以发送给客户端的明文形式提供。

执行此操作的标准（并且仅限 btw）方法是 https。您可以使用自己的证书来启用 ssl，无需购买。但是.. 浏览器可能会警告访问者证书尚未由已知机构签署。

# gwt - GWT 和 JScience

> ID：13067985
> 
> 赞同：0
> 
> 时间：2012-10-25T11:52:39.933
> 
> 标签：gwt, jscience

在我的 GWT 应用程序中，我制作了一个控件来显示/编辑具有关联单位的数值（例如转换米 <-> 英尺）。

如何在客户端部分使用 JScience 库（jsr-275 实现）？

我尝试将它添加到我的项目中，但它没有编译：

```
No source code is available for type java.text.ParsePosition 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:35:05.903

这不是 JScience 库本身的问题。

GWT 将 java 编译为 javascript，因此需要访问 java*源*代码。此外，并非所有 JDK 类都在 GWT 仿真库中可用，并且`ParsePosition`（实际上所有JDK 类`java.text.*`）都是其中之一......

从您的堆栈跟踪摘录中不清楚您是`ParsePosition`直接使用还是使用 JScience 库，但无论哪种方式，您都必须重写代码以不在客户端使用该类（如果可能）或执行转换服务器端，GWT JRE 限制不适用。

查看[JRE Emulation Reference](https://developers.google.com/web-toolkit/doc/2.4/RefJreEmulation)以获得对您可用的功能的完整概述。

干杯和好运，