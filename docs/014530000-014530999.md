# StackOverflow 问答 14530000-14530999

# gwt - 用 nbsp 填充的 GWT HtmlPanel；字符（GWT 的 SafeHTML？）

> ID：14530012
> 
> 赞同：3
> 
> 时间：2013-01-25T20:39:25.970
> 
> 标签：gwt, gwt2

我在我的一个新项目中使用 GWT 2.5 并遇到了一个小障碍。以前版本的 GWT 禁用了 HTMLPanel 的 SafeHTML，这意味着如果我在 HTMLPanel 中放置一大块文本，它会像普通 HTML 一样响应，所有双 + 空格都将被删除，所有换行符都将被删除。在 GWT 2.5 中，我所有的空格都被替换为 nbsp；并且忽略了我所有的 CSS 规则，屏幕上出现了长行

```
<ui:style>
    .justify {
        text-align: justify;    
    }
</ui:style>
<g:HTMLPanel styleName="{style.justify}">

LARGE BLOCK OF TEXT THAT 
SOMETIMES GOES FAR OUT OF MY IDE AND OTHER TIMES
ONLY DO
THIS

</g:HTMLPanel> 
```

上面的示例在 GWT 2.4 中将如下所示（显然是合理的）：

```
LARGE BLOCK OF TEXT THAT 
SOMETIMES GOES FAR OUT OF 
MY IDE AND OTHER TIME 
ONLY DO THIS 
```

在 GWT2.5 中，上面的示例看起来像这样（所有空格都替换为“& nbsp;”，即使启用了自动换行也会导致其容器溢出）：

```
LARGE BLOCK OF TEXT THAT 
SOMETIMES GOES FAR OUT OF MY IDE AND OTHER TIMES
ONLY DO
THIS 
```

任何想法如何在 GWT 2.5 中为 HTMLPanels 禁用 SafeHTML 或任何关于如何将“自然 HTML”放入我的页面而不用“& nbsp;”替换我的空间的替代想法 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:12:09.760

在记录一个错误后得到了谷歌支持的回复，他们说他们无法重现我遇到的问题，并建议我看看我的代码包含哪些空间（这是我从未想过的非常明显的事情）。事实证明，出于某种奇怪的原因，我的 IDE 正在添加 U+00A0 类型的空格，而不是 U+0020，然后将其转换为 nbsp；

因此，如果您确实看到了 nbsp; 在您的输出中，查看您的 IDE 插入的空间类型。非常感谢谷歌支持指出这一点！！

# jquery - 我正在使用 json 在 asp.net 中实现自动完成文本框，并且正在获取 Object xml http 请求。我已经推荐了一个博客来实现

> ID：14530013
> 
> 赞同：0
> 
> 时间：2013-01-25T20:39:25.587
> 
> 标签：jquery, asp.net, vb.net, json, web-services

我正在使用 json 在 asp.net 中实现自动完成文本框，并且收到 Object xml http request error 。我已经推荐了一个博客来实现它是[http://www.aspdotnet-suresh.com/2012/08/using-jquery-autocomplete-with-aspnet.html](http://www.aspdotnet-suresh.com/2012/08/using-jquery-autocomplete-with-aspnet.html)，你能告诉我哪里做错了吗。我已根据参考站点正确添加。提前致谢。

# python - Python 3.3 远程登录问题

> ID：14530014
> 
> 赞同：1
> 
> 时间：2013-01-25T20:39:27.327
> 
> 标签：python, python-3.x, telnet

我一直在疯狂地试图完成这项工作。我想从 python 收集一个 telnet 日志。在普通的 telnet 上，我只需打开 telnet 并使用：

```
set logfile test.xml 
```

问题是使用 python 我无法弄清楚如何首先传递这个命令。当我运行这个

```
try:
    tn = telnetlib.Telnet()
    tn.write(b"set logfile test.xml" + b"\r")
    tn.open(IP, 223, 8192)
except socket.timeout:
    print ("socket timeout")
    sulk() 
```

我收到此错误：

```
Traceback (most recent call last):
  File "C:xxxxxxxx.py", line 18, in <module>
    tn.write(b"set logfile test.xml" + b"\r")
  File "C:\Python33\lib\telnetlib.py", line 282, in write
    self.sock.sendall(buffer)
AttributeError: 'NoneType' object has no attribute 'sendall' 
```

如果我在不设置日志文件的情况下打开 IP/端口，脚本运行良好。为了解决我使用 python 写入文件的问题。但由于某种原因，这需要很长时间 5 分钟以上。如果我只是通过 telnet 运行命令，则需要不到 10 秒...

```
telnet
set logfile test.xml
o xxx.xxx.xxx.xxx xxx
>>commandx
>>commandy

All the data I need is here and in the log file 
```

那么在打开 IP/端口之前我可以做些什么来设置日志文件吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:59:16.190

你这是在倒退。我假设您正在尝试将其记录到文件中，以便您可以将其读入 Python 脚本并对其进行处理。您应该做的是在变量中捕获 telnet 会话的输出。然后你可以进一步处理它，如果你愿意，甚至可以将它写入文件，等等。

```
import telnetlib

host    = "host.example.com"
port    = 223
timeout = 9999

try:
    session = telnetlib.Telnet(host, port, timeout)
except socket.timeout:
    print ("socket timeout")
else:
    session.write("command1\n")
    session.write("command2\n")
    output = session.read_all()
    # output now contains the text you want
    # so now you can do something with it:
    with open("test.xml", "w") as logfile:
        logfile.write(output) 
```

如果输出可能很大，您可以分块读取它：

```
import time, telnetlib

host    = "host.example.com"
port    = 223
timeout = 9999

try:
    session = telnetlib.Telnet(host, port, timeout)
except socket.timeout:
    print ("socket timeout")
else:
    session.write("command1\n")
    session.write("command2\n")
    with open("test.xml", "w") as logfile:
        output = session.read_some()
        while output:
            logfile.write(output)
            time.sleep(0.1)  # let the buffer fill up a bit
            output = session.read_some() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:44:56.743

没有。

`set logfile`不是 telnet 协议的一部分，它是您最喜欢的 telnet 客户端的命令。现在您正在使用telnet 客户端的*另一个实现*，它没有这样的命令（没有理由尝试将其发送到*远程*系统）。

据我所知，python 中没有内置的日志记录工具`telnetlib`可以推荐作为替代品。

# android - 每个资源的末尾都会出现空方块

> ID：14530015
> 
> 赞同：0
> 
> 时间：2013-01-25T20:39:38.660
> 
> 标签：android, android-2.3-gingerbread, nexus-s

在**Nexus S，Android 2.3.3**页面上每个资源的末尾都会出现一个小空方块。
资源来自**Visual Studio 2010**`.resx`中的文件。 我验证了，末尾没有空格或换行符。 有人知道为什么吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:47:36.863

`<br>`标记中的资源后面有一个。
使 sur 保持**资源和标记在同一行**。

**好的**

```
<%= Resources.ResourceName %><br> 
```

**坏的**

```
<%= Resources.ResourceName %>
<br> 
```**

# python - 避免 Google Scholar 阻止抓取

> ID：14530019
> 
> 赞同：0
> 
> 时间：2013-01-25T20:39:44.927
> 
> 标签：python, web-crawler

我使用以下 python 脚本从 python 爬取谷歌学者：

```
import urllib

filehandle = urllib.urlopen('http://www.techyupdates.blogspot.com')

for lines in filehandle.readlines():
   print lines

filehandle.close() 
```

但我反复这样做，所以我被网站谷歌学者阻止说：

> 当 Google 自动检测到来自您的计算机网络的请求似乎违反了[服务条款时，](http://www.google.com/accounts/TOS)就会出现此页面。该块将在这些请求停止后不久到期。与此同时，解决....

有没有一种简单的方法可以避免这种情况？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:52:43.163

*[编辑]*

在您的脚本中加入某种限制，以便您轻松加载 Google Scholar（例如，在查询之间等待 60 秒或 600 秒或 6000 秒）。

我的意思是**轻轻**加载 Google Scholar。如果缓存 Google Scholar 结果是可能的，那也将减少 Google Scholar 的负载。

您还应该查看批处理，这样您就可以在夜间以稳定但缓慢的速度运行爬网。

目标是 Google Scholar 不应该关心您的额外查询，从而实现 ToS 的精神，如果不是文字的话。但如果你能同时满足两者，那将是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:44:44.730

将文件存储在本地？您还可以编写一个快速的 Python 网络服务器来提供文件，以防您需要 HTTP 连接。是的，我同意，阅读并尝试理解错误消息也有帮助......

# visual-studio-2010 - 使用 Visual Studio 编译的英特尔 MKL Pardiso 求解器

> ID：14530024
> 
> 赞同：1
> 
> 时间：2013-01-25T20:40:16.550
> 
> 标签：visual-studio-2010, linker, fortran, intel-mkl, pardiso

我正在尝试创建一个简单的示例，以便在 MKL 英特尔库中使用 Pardiso 求解器。我一直在按照提供的示例进行操作，但是如果我将对 Pardiso 的调用放在子例程中，它将不起作用。恐怕这与 INCLUDE 语句或链接方面有关。

所有子程序使用的数组都包含在一个名为 variables 的模块中

```
MODULE variables
INTEGER :: M        ! Lines
INTEGER :: N        ! Columns
REAL*8, DIMENSION(:,:), ALLOCATABLE :: MATRA ! original matrix
INTEGER, DIMENSION(:), ALLOCATABLE :: ROWSA,COLSA ! ia and ja in pardiso
REAL*8,    dimension(:), ALLOCATABLE :: VALSA, RHSVC, SOLVC ! a, b, x
END MODULE variables 
```

包含程序的文件如下：

```
INCLUDE 'mkl_pardiso.f90'
program PardisoFortran
use variables
use mkl_pardiso
implicit none

! do some stuff to create the matrices
call create_matrices

call INITPARDISO

end program 
```

最后是文件 initpardiso

```
subroutine INITPARDISO
USE VARIABLES
USE mkl_pardiso

! pardiso variable declaration    
TYPE(MKL_PARDISO_HANDLE), ALLOCATABLE  :: pt(:)
INTEGER maxfct, mnum, mtype, phase, nrhs, error, msglvl
INTEGER, ALLOCATABLE, DIMENSION(:) :: iparm
INTEGER i, idum
REAL*8 waltime1, waltime2, ddum

! --- then I allocate and fill the variables

! Finally I can call pardiso
phase = 11 ! only reordering and symbolic factorization phase

CALL pardiso_64 (PT, maxfct, mnum, mtype, phase, M, VALSA, COLSA, &
              ROWSA, idum, nrhs, iparm, msglvl, ddum, ddum, error)

end subroutine 
```

现在，我还在 Visual Studio 项目配置中添加了 Additional Include Directories（即

```
C:\Program Files (x86)\Intel\ComposerXE-2011\mkl\include;
C:\Program Files (x86)\Intel\ComposerXE-2011\mkl\lib\intel64;
C:\Program Files (x86)\Intel\ComposerXE-2011\mkl\lib\ia32) 
```

如果我评论对 pardiso 的调用，一切正常，否则它将停止编译并出现此错误：

错误 1 ​​错误 #6285：此通用子例程调用没有匹配的特定子例程。[PARDISO_64] ....PardisoFortran\initpardiso.f 144

有什么想法吗？这是顶部的 INCLUDE 语句的问题吗？我应该在哪里包括它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:48:48.323

我相信这`pardiso_64`是一个使用 64 位整数的子程序版本。您的代码片段没有显示您已采取措施确保您的整数是 64 位的证据。我想您可能已经使用编译器选项或其他方式告诉编译器默认为 64 位整数。

您发布的错误消息是您在调用库泛型过程时虚拟参数和实际参数不匹配时收到的典型错误消息。假设您的整数只有 32 位，那么编译器正在寻找但未能找到一个名为的例程，该例程`pardiso_64`采用 32 位整数参数。

我认为该错误与该`include`声明无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:24:04.830

我在您的代码中看到一个问题。参数“ddum”是一个标量。它应该是一个维度数组（M，nrhs）。可能还有更多问题。我需要查看整个代码以提供帮助。

像往常一样，询问英特尔 MKL 相关问题的最佳地点是 MKL 论坛： http: [//software.intel.com/en-us/forums/intel-math-kernel-library](http://software.intel.com/en-us/forums/intel-math-kernel-library)。在那里发布您的问题，并附上您的整个程序。你会更快得到答案！

# javascript - 如何从 javascript 函数加载新的测验 Q

> ID：14530031
> 
> 赞同：0
> 
> 时间：2013-01-25T20:40:39.547
> 
> 标签：javascript, google-maps, load

我正在用地图进行地理测验。我有这个功能可以随机加载不同的国家名称。

```
<h1>Can you locate

<script type="text/javascript">

generateCountry();

function generateCountry(){

filenames = [ "Greece", "France", "Italy", "United Kingdom", "Germany" ];

filename = filenames[Math.floor(Math.random()*filenames.length)];

document.write(filename);
}

</script>
on the map?
</h1> 
```

我正在使用谷歌地图，当我点击具有功能的正确国家时，我会收到关于我是对还是错的警报。

```
 function getCountry(latLng) {
              geocoder.geocode( {'latLng': latLng},
                function(results, status) {
                  if(status == google.maps.GeocoderStatus.OK) {
                    if(results[0]) {
                      for(var i = 0; i < results[0].address_components.length; i++) {
                        if(results[0].address_components[i].types[0] == "country") {
                          if(results[0].address_components[i].long_name == filename) {
                              alert("right");

                                generateCountry();

                           } else {
                              alert("wrong");

                           }
                        }
                      }
                    }

                    else {
                      alert("No results");
                    }
                  }
                  else {
                    alert("Status: " + status);
                  }
                }
              );
      } 
```

当测验加载时，我看到第一个问题，例如：你能在地图上找到法国吗？并且地图反应良好。当我点击右边的那个时，之后的地图似乎在文件名变量中识别出一个新的国家，因为当我点击其他国家时，我终于在德国获得了一个权利。所以地图似乎是正确的。问题是上述问题中的名称并没有从法国更改为德国。我需要做什么才能在第一个问题的右侧警报上单击“确定”后加载一个新的国家/地区名称，而无需重新加载整个页面？我知道我可能没有使用最好的方法来做到这一点，所以任何帮助和指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:45:31.173

[不要使用 document.write。](https://stackoverflow.com/a/802943/246847)相反，在文本中放置一个空跨度并给它一个 id，如下所示：

```
<h1>Can you locate <span id="country"></span> on the map?</h1> 
```

然后，当您想要更改它时，使用 DOM 获取元素并更改文本：

```
document.getElementById('country').textContent = "Germany"; 
```

这样做的另一个好处是脚本不必位于 ; 的中间`h1`。您可以将其移动到`head`或 的末尾`body`，具体取决于您的喜好。

# sql - sp_change_users_login '自动修复', ' '

> ID：14530034
> 
> 赞同：0
> 
> 时间：2013-01-25T20:40:55.707
> 
> 标签：sql, sql-server, sql-server-2008

如何执行 sp_change_users_login 以便自动修复所有本地 sql 帐户？

换句话说，我可以运行命令来查看所有本地帐户：

```
select * from sys.database_principals
where type = 's'; 
```

我现在希望在 sp_change_users_login 过程中使用这些用户列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:45:52.810

您可以使用游标来获取名称列表，然后遍历游标结果。在循环中，您可以执行以下操作： exec sp_change_users_login 'auto-fix', @nameVariable

您将在 @@FETCH_STATUS = 0 时循环。当您从游标中获取所有行时，它返回非零值。

这里有更多细节：

```
declare @userVar varchar(30)
declare users cursor for select name from sys.database_principals where type = 's';

open users
fetch next from users into @userVar
while @@FETCH_STATUS = 0
begin
    exec sp_change_users_login 'auto_fix', @userVar
    fetch next from users into @userVar
end

close users
deallocate users 
```

# database - 插入和更新 BYTEA 行时可能出现瓶颈？

> ID：14530037
> 
> 赞同：0
> 
> 时间：2013-01-25T20:41:24.177
> 
> 标签：database, postgresql, concurrency, insert, locking

该项目需要将二进制数据存储到 PostgreSQL（项目要求）数据库中。为此，我们制作了一个包含以下列的表格：

```
id   : integer, primary key, generated by client
data : bytea, for storing client binary data 
```

客户端是一个 C++ 程序，在 Linux 上运行。必须插入行（用一大块二进制数据初始化），然后更新（将额外的二进制数据连接到数据字段）。简单的测试表明，这会产生更好的性能。

根据您的输入，我们将让客户端使用并发线程来插入/更新数据（具有不同的数据库连接），或者只有一个数据库连接的单线程。

我们在 PostgreSQL 方面没有太多经验，所以您能否帮助我们提供一些关于可能出现瓶颈的指针，以及使用多线程插入数据是否比使用单线程更好。

谢谢 ：）

**编辑1：**

更详细的信息：

*   将只有一个客户端访问数据库，只使用一个 Linux 进程
*   数据库和客户端在同一台高性能服务器上，但这并不重要，无论机器如何，客户端都必须快速，无需额外的客户端配置
*   我们将每 10 秒获得新的数据流，流将每 0.5 秒提供新的 16000 字节（CBR，但我们可以使用缓冲，并且最多每 4 秒插入一次）
*   流将持续 10 秒到 5 分钟之间的任何时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:47:48.360

如果您使用`bytea`.

PostgreSQL 的 MVCC 设计意味着 an`UPDATE`在逻辑上等价于 a`DELETE`和 an `INSERT`。当您插入行然后更新它时，发生的情况是您插入的原始元组被标记为已删除，并且写入的*新元组*包含旧数据和添加数据的连接。

我质疑您的测试方法 - 您能否更详细地解释您如何确定插入然后附加更快？这没有道理。

除此之外，我认为这个问题写得太宽泛，无法真正说出很多用处。你没有提供任何细节或数字；没有二进制数据大小、行数估计、客户端计数估计等的估计。

`bytea`插入性能与 PostgreSQL 中的任何其他插入性能调整没有什么不同。所有相同的建议都适用：批量处理事务，使用多个并发会话（但不要太多；经验法则是 number_of_cpus + number_of_hard_drives）插入数据，避免事务使用彼此的数据，因此您不需要`UPDATE`锁，使用async commit 和/或 commit_delay 如果您没有具有安全回写缓存的磁盘子系统（如电池供电的 RAID 控制器等）。

鉴于您在主评论线程中提供的更新统计数据，您想要使用的数据量听起来完全适用于适当的硬件和应用程序设计。如果您必须提交每个进入的块，即使在普通硬盘驱动器上也可以实现峰值负载，因为它每秒需要大约 60 个事务。您可以使用 a`commit_delay`来实现组提交并显着降低 fsync() 开销，或者`synchronous_commit = off`如果您可以承受在崩溃的情况下丢失事务的时间窗口，甚至可以使用。

使用回写式缓存存储设备，如电池支持的缓存 RAID 控制器或具有可靠断电安全缓存的 SSD，这种负载应该很容易应对。

我没有为此对不同的场景进行基准测试，所以我只能笼统地说。如果我自己设计这个，我会担心 PostgreSQL 的检查点停顿，并且想确保我可以缓冲一些数据。听起来你可以，所以你应该没问题。

这是我测试、基准测试和负载测试的第一种方法，因为在我看来它可能是最实用的：

每个数据流一个连接，`synchronous_commit = off`+ a `commit_delay`。

`INSERT`每条 16kb 记录进入一个临时表（如果可能`UNLOGGED`，或者`TEMPORARY`如果你能承受丢失不完整的记录）并让 Pg 同步和分组提交。当每个流结束时，读取字节数组，将它们连接起来，然后将记录写入最终表。

为了获得这种方法的绝对最佳速度，请实现一个`bytea_agg`聚合函数`bytea`作为扩展模块（并将其提交给 PostgreSQL 以包含在未来版本中）。实际上，您很可能可以通过读取数据来避免在应用程序中进行 bytea 连接，或者使用相当低效和非线性缩放：

```
CREATE AGGREGATE bytea_agg(bytea) (SFUNC=byteacat,STYPE=bytea);

INSERT INTO final_table SELECT stream_id, bytea_agg(data_block) FROM temp_stream_table; 
```

您需要确保调整检查点行为，并且如果您使用普通表或`UNLOGGED`表而不是`TEMPORARY`表来累积那些 16kb 记录，则需要确保它被非常积极地`VACUUM`编辑。

也可以看看：

*   [将批量插入 Postgres 的最快方法是什么？](https://stackoverflow.com/q/758945/398670)
*   [如何加快 PostgreSQL 中的插入性能](https://stackoverflow.com/q/12206600/398670)

# jquery - Spin.js - 加载时禁用元素

> ID：14530040
> 
> 赞同：2
> 
> 时间：2013-01-25T20:41:40.333
> 
> 标签：jquery, css, ajax, spin.js

当用户在我的网站上执行操作时，我想使用 spin.js 库，但我没有看到如何或是否可以禁用微调器所在的元素。例如，当我的网格正在加载时，我不希望用户单击网格本身的任何位置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:45:05.387

Spin.js 只是一个动画旋转动画。如果您想关闭“背后”的所有其他内容，我假设它位于模式窗口中，在这种情况下，您只需要一个 100% 的宽度和高度 div，其 z-index 高于带有微调器的所有其他元素在上面。

所以像

```
<div style="width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:9999;">
SPIN STUFF with z-index 10000;
</div> 
```

这将覆盖每个元素并阻止他们点击它。

如果我读错了你的问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T15:39:48.660

史蒂文的回答可以禁用页面 - 但是，我发现如果我使用该方法，页面上的其他元素仍然被阻止并且无法单击。您可以根据需要通过隐藏和显示元素来解决它 - 但是，当我这样做时，我发现 SpinJS 微调器停止居中并最终位于左上角。

最后，我将 SpinJS 与[JQuery BlockUI Plugin](http://jquery.malsup.com/block/)结合起来，它会在页面上临时覆盖并防止任何点击，并提供一些可自定义的选项。

所以最后，我的代码看起来像......

```
var target = document.getElementById("centre");
var spinner = new Spinner(opts).spin(target);
$.blockUI({ message: null, overlayCSS: { backgroundColor: '#ddd' } });

//Things things things  

spinner.stop();
$.unblockUI(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T12:50:59.913

我在 spin.js 中添加了块 UI，它使用引导 css，因为这是我使用的，但您可以根据自己的需要调整它。

[自旋背景](https://github.com/weisssean/spin.backdrop)

# ios - 在多个 iOS 应用之间共享信息

> ID：14530043
> 
> 赞同：2
> 
> 时间：2013-01-25T20:41:57.593
> 
> 标签：ios, appstore-approval, data-sharing

“合法”是指 App Store 将接受的方法。

我读过这个，但我觉得它可能已经过时了（一个问题和大多数答案都可以追溯到 2008 年）

[如何在 iPhone 应用程序之间共享自定义数据？](https://stackoverflow.com/questions/220630/how-to-share-custom-data-between-iphone-applications)

这些提供了最少的信息：

[在 iOS 设备上的应用程序之间共享文件](https://stackoverflow.com/questions/13136183/sharing-files-between-apps-on-ios-devices)

[在同一 iOS 设备中的不同应用程序之间共享数据](https://stackoverflow.com/questions/8372639/sharing-data-between-different-apps-in-the-same-ios-device)

据我了解，这些方法是

**完全合法**

1) UIApplication openURL

2) 如果两个应用程序是由同一团队开发的，则可以使用 Keychain

3) 如果两个应用程序由同一团队开发，则可以使用 iCloud

**灰色地带**。

4）全局通知使用CFNotificationCenterGetDarwinNotifyCenter、CFNotificationCenterAddObserver、CFNotificationCenterPostNotification

5) 使用 TCP/IP 套接字（如果应用程序之一在后台运行）

6) 使用 Unix 套接字（如果应用程序之一在后台运行）

7) 使用自定义 UIPasteBoard

有没有人被拒绝或接受谁使用这个？

有人知道**其他方法**吗？

**-- 更新 1--**

两个应用程序将在同一设备上运行。

其中一个应用程序有可能在后台运行 (VOIP)

应用程序将由不同的团队开发（不会使用相同的证书进行签名）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:49:12.390

使用Dropbox之类的服务怎么样？它被相当多的应用程序使用，我认为它们提供了丰富的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:45:01.777

我建议使用 icloud，因为苹果将文件发送到所有设备，您可以使用它在两个应用程序中获取文件。如果你想用别人的应用程序来做，你必须问那个开发者。但 icloud 可能是最简单和最快的方法。

# python - Python：find_closest 返回的元组中只有一个元素返回

> ID：14530052
> 
> 赞同：2
> 
> 时间：2013-01-25T20:42:47.383
> 
> 标签：python, canvas, tkinter, tuples, closest

我有这段代码，它创建一个矩形，如果他附近有其他东西，可以说：

```
def creaRect(event):
    #rect = Rectangle.Rectangle(canvas, event, CanWidth=Width, CanHeight=Height)
    width, height = 25, 25
    x, y = event.x, event.y
    x1 = int(x-width/2)
    y1 = int(y-height/2)
    x2 = int(x+width/2)
    y2 = int(y+height/2)
    rect = canvas.create_rectangle((x1, y1, x2, y2), outline="red", width=1, tags="bloc")
    Rectangle.OidRect.append(rect)

    near = canvas.find_closest(x, y, 200)
    print(len(near)) 
```

但是 find_closest 返回的元组的长度每次都是 1，而我在同一位置或非常接近的位置创建了许多矩形。对我来说，find_closest 应该返回一个元组，其中 x、y 坐标范围内的所有项目的 id 都在 200 范围内。这是我不理解还是做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:53:12.717

从关于`find_closest()` [这里的文档](http://tkinter.unpythonic.net/pydoc/Tkinter.Canvas.html)

> find_closest(self, x, y, halo=None, start=None)
> 
> 返回 X、Y 处最接近像素的项目。如果有多个匹配项，则取最顶部。所有比 HALO 更近的项目都被认为是重叠的（都是最接近的）。如果指定了 START，则使用该标签下面的下一个。

所以`find_closest()`只会给你一个最接近的项目。如果您想在距某个点的距离内找到多个项目（这听起来像是您想要的），请尝试：

> find_overlapping(x1, y1, x2, y2)
> 查找与给定矩形重叠或完全被它包围的所有项目。
> x1 - 左边缘。
> y1 - 上边缘。
> x2 - 右边缘。
> y2 - 下边缘。
> 返回：
> 包含所有匹配项的元组。

# php - 密码保护多个页面，每个页面使用不同的密码

> ID：14530055
> 
> 赞同：0
> 
> 时间：2013-01-25T20:43:01.357
> 
> 标签：php, session

我正在为 php 页面使用简单的会话登录。我希望某些页面有一个密码，而某些页面有另一个密码。

如果我使用 login.php，我可以将它应用到需要这个 ONE 密码的所有页面，但我想为不同的页面设置不同的密码......

这是我的 login.php

```
<?php
//sha1() encrypted password - current: 'superman'
$password = '18c28604dd31094a8d69dae60f1bcd347f1afc5a';
session_start();
if (!isset($_SESSION['loggedIn'])) {
    $_SESSION['loggedIn'] = false;
}

if (isset($_POST['password'])) {
    if (sha1($_POST['password']) == $password) {
        $_SESSION['loggedIn'] = true;
    } else {
        die ('Incorrect password');
    }
} 

if (!$_SESSION['loggedIn']): ?>
<!DOCTYPE html>
<html lang="en">
<head>
<title>Login</title>
<style>
body{font-family:sans-serif;}
h1{color:red;font-size:24px;}
input{padding:5px;}
label,input{font-size:16px;}
.login{
width:420px;
margin:0 auto;  
text-align:center;
}
</style>
</head>
  <body>
  <div class="login">
    <h1>You need to login to view this file.</h1>
    <form method="post">
      <p>
        <label for="password">Enter Password Below: </label>
        </p><p>
<input name="password" type="password" maxlength="10" autofocus></p>
      <p><input type="submit" name="submit" value="Login"></p>
    </form>
    </div>
  </body>
</html>

<?php
exit();
endif;
?> 
```

如何添加需要不同登录名的第二个密码 REQUIRE(login.php)？我是否需要为每个页面设置不同的 ID 或其他 ID 以使它们独一无二？

# qt - Qt Creator 2.5.2 中缺少移动 Qt 应用程序

> ID：14530056
> 
> 赞同：0
> 
> 时间：2013-01-25T20:43:04.487
> 
> 标签：qt, ubuntu, qt-creator

在新的**Qt Creator 2.5.2**上，我不再看到在启动新项目时创建**移动 Qt 应用程序的选项。**

我在 Ubuntu 12.10 上，我从存储库安装了 Qt Creator。

![在此处输入图像描述](../Images/00c72c8067a178b698f981e0853e432e.png)

这就是我在**Qt Creator 2.4.1**上看到的。这是在 Windows 上，但 Mobile Qt 应用程序过去也可以在 Ubuntu 上使用：

![在此处输入图像描述](../Images/e83758e09222c571595af3c039934c3f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:55:26.617

这些选项出现在与诺基亚 Qt SDK 捆绑在一起的 Creator 中（是的，它包含旧版本的 Qt Creator 以及桌面和移动 Qt 框架），您可以从[这里下载](http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html)

# java - 如何在 Android 的蓝牙打印机上打印图像？

> ID：14530058
> 
> 赞同：57
> 
> 时间：2013-01-25T20:43:10.307
> 
> 标签：java, android, bitmap, bytearray, bitmapfactory

我必须在热敏蓝牙打印机上打印一些数据，我正在这样做：

```
String message="abcdef any message 12345";
byte[] send;
send = message.getBytes();
mService.write(send); 
```

它适用于文本，但不适用于图像。我想我需要获取`byte[]`图像数据的。我尝试以这种方式获取图像的数据：

```
Bitmap bitmap=BitmapFactory.decodeResource(getResources(), R.drawable.qrcode);
ByteArrayOutputStream stream=new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 90, stream);
byte[] image=stream.toByteArray(); 
```

不幸的是，打印机打印了很多奇怪的字符（大约 50 厘米的纸）。我不知道如何打印图像。

我想尝试获取位图的像素，然后将其转换为 a`byte[]`并发送，但我不知道该怎么做。

谢谢

**更新：**

经过这么长时间，我正在这样做：我有一个名为 print_image(String file) 的方法，它获取我要打印的图像的路径：

```
private void print_image(String file) {
    File fl = new File(file);
    if (fl.exists()) {
        Bitmap bmp = BitmapFactory.decodeFile(file);
        convertBitmap(bmp);
        mService.write(PrinterCommands.SET_LINE_SPACING_24);

        int offset = 0;
        while (offset < bmp.getHeight()) {
            mService.write(PrinterCommands.SELECT_BIT_IMAGE_MODE);
            for (int x = 0; x < bmp.getWidth(); ++x) {

                for (int k = 0; k < 3; ++k) {

                    byte slice = 0;
                    for (int b = 0; b < 8; ++b) {
                        int y = (((offset / 8) + k) * 8) + b;
                        int i = (y * bmp.getWidth()) + x;
                        boolean v = false;
                        if (i < dots.length()) {
                            v = dots.get(i);
                        }
                        slice |= (byte) ((v ? 1 : 0) << (7 - b));
                    }
                    mService.write(slice);
                }
            }
            offset += 24;
            mService.write(PrinterCommands.FEED_LINE);
            mService.write(PrinterCommands.FEED_LINE);          
            mService.write(PrinterCommands.FEED_LINE);
            mService.write(PrinterCommands.FEED_LINE);
            mService.write(PrinterCommands.FEED_LINE);
            mService.write(PrinterCommands.FEED_LINE);
        }
        mService.write(PrinterCommands.SET_LINE_SPACING_30);

    } else {
        Toast.makeText(this, "file doesn't exists", Toast.LENGTH_SHORT)
                .show();
    }
} 
```

我是根据这篇[文章做的](http://android-essential-devtopics.blogspot.com/2013/02/sending-bit-image-to-epson-printer.html)

这是类 PrinterCommands：

```
public class PrinterCommands {
public static final byte[] INIT = {27, 64};
public static byte[] FEED_LINE = {10};

public static byte[] SELECT_FONT_A = {27, 33, 0};

public static byte[] SET_BAR_CODE_HEIGHT = {29, 104, 100};
public static byte[] PRINT_BAR_CODE_1 = {29, 107, 2};
public static byte[] SEND_NULL_BYTE = {0x00};

public static byte[] SELECT_PRINT_SHEET = {0x1B, 0x63, 0x30, 0x02};
public static byte[] FEED_PAPER_AND_CUT = {0x1D, 0x56, 66, 0x00};

public static byte[] SELECT_CYRILLIC_CHARACTER_CODE_TABLE = {0x1B, 0x74, 0x11};

public static byte[] SELECT_BIT_IMAGE_MODE = {0x1B, 0x2A, 33, -128, 0};
public static byte[] SET_LINE_SPACING_24 = {0x1B, 0x33, 24};
public static byte[] SET_LINE_SPACING_30 = {0x1B, 0x33, 30};

public static byte[] TRANSMIT_DLE_PRINTER_STATUS = {0x10, 0x04, 0x01};
public static byte[] TRANSMIT_DLE_OFFLINE_PRINTER_STATUS = {0x10, 0x04, 0x02};
public static byte[] TRANSMIT_DLE_ERROR_STATUS = {0x10, 0x04, 0x03};
public static byte[] TRANSMIT_DLE_ROLL_PAPER_SENSOR_STATUS = {0x10, 0x04, 0x04};
} 
```

正如在 print_image 方法中看到的那样，我正在调用一个名为 convertBitmap 的方法，并且我正在发送一个位图，这是代码：

```
 public String convertBitmap(Bitmap inputBitmap) {

    mWidth = inputBitmap.getWidth();
    mHeight = inputBitmap.getHeight();

    convertArgbToGrayscale(inputBitmap, mWidth, mHeight);
    mStatus = "ok";
    return mStatus;

}

private void convertArgbToGrayscale(Bitmap bmpOriginal, int width,
        int height) {
    int pixel;
    int k = 0;
    int B = 0, G = 0, R = 0;
    dots = new BitSet();
    try {

        for (int x = 0; x < height; x++) {
            for (int y = 0; y < width; y++) {
                // get one pixel color
                pixel = bmpOriginal.getPixel(y, x);

                // retrieve color of all channels
                R = Color.red(pixel);
                G = Color.green(pixel);
                B = Color.blue(pixel);
                // take conversion up to one single value by calculating
                // pixel intensity.
                R = G = B = (int) (0.299 * R + 0.587 * G + 0.114 * B);
                // set bit into bitset, by calculating the pixel's luma
                if (R < 55) {                       
                    dots.set(k);//this is the bitset that i'm printing
                }
                k++;

            }

        }

    } catch (Exception e) {
        // TODO: handle exception
        Log.e(TAG, e.toString());
    }
} 
```

这是我正在使用的[打印机，分辨率：8 点/毫米，576 点/行](http://www.rgprt.com/En/Products_show_53.html)

这就是我喜欢做的事情（我使用同一台打印机，但使用从 Play 商店下载的应用程序） ![我要打印的图像](../Images/f4bbf887d276c8f7c4ce457385fbc5f1.png)

这就是我现在得到的 ![我的印刷尝试](../Images/503eaf11c504f176895338824080760b.png)

更接近： ![更近的部分](../Images/132f234f7568bf950388732a6fe2e4dc.png)

关闭器2： ![在此处输入图像描述](../Images/afa0e50eaea1d0cbe6a502e3c4aaaaf5.png)

可以看到一小部分图像，所以我认为我更接近可以打印图像......

我正在使用的图像是这个（576x95）：![在此处输入图像描述](../Images/83e5de5edbcda871ff67b4674267d3fd.png)

这是转换后的图像（我用上面的代码转换它）： ![转换后的图像](../Images/b2e9dbf210d3ddb764ef8cb597512cdf.png)

![倒](../Images/47bcc0673c73d7105bdfa223dc806f41.png)

所以，答案是：我做错了什么？，我认为错误出在这个命令中：

```
 public static byte[] SELECT_BIT_IMAGE_MODE = {0x1B, 0x2A, 33, -128, 0}; 
```

但是，我怎样才能为我的图像计算正确的值？，谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-02-07T09:22:05.147

**我解决了将位图转换为字节数组的问题。请记住，您的图像必须是黑白格式。**

完整源代码： [https ://github.com/imrankst1221/Thermal-Printer-in-Android](https://github.com/imrankst1221/Thermal-Printer-in-Android)

[![在此处输入图像描述](../Images/5b808fdc08a886a9f0302dfc15cf0bce.png)](https://i.stack.imgur.com/n8xqP.jpg)

```
 public void printPhoto() {
        try {
            Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                    R.drawable.img);
            if(bmp!=null){
                byte[] command = Utils.decodeBitmap(bmp);
                printText(command);
            }else{
                Log.e("Print Photo error", "the file isn't exists");
            }
        } catch (Exception e) {
            e.printStackTrace();
            Log.e("PrintTools", "the file isn't exists");
        }
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-22T08:41:37.557

我也试过这个，我得到了我自己的解决方案，我想我弄清楚了这个`SELECT_BIT_IMAGE_MODE`命令是如何工作的。

`public static byte[] SELECT_BIT_IMAGE_MODE = {0x1B, 0x2A, 33, 255, 3};`类中的命令`PrinterCommands`是图像打印的 POS 命令。

前两个非常标准，接下来的三个确定要打印的图像的模式和尺寸。为了这个解决方案，我们假设第二个元素（33，我们的索引为零）总是 33。

该 byte[] 的最后两个元素是指您要打印的图像的**Width（以像素为单位）**`nL`属性，元素 3 有时称为，元素 4 有时称为`nH`。它们实际上都是指 Width，`nL`是`Low Byte`while`nH`是`High Byte`. 这意味着我们最多可以拥有一个宽度为 1111 1111 1111 1111b（二进制）的图像，即 65535d（十进制），尽管我还没有尝试过。如果 nL 或 nH 未设置为正确的值，则将与图像一起打印垃圾字符。

不知何故，Android 文档告诉我们字节数组中一个字节的值的限制是 -128 和 +127，当我尝试输入 255 时，Eclipse 要求我将其转换为字节。

无论如何，回到 nL 和 nW，对于您的情况，您有一个宽度为 576 的图像，如果我们将 576 转换为二进制，我们会得到两个字节，如下所示：

`0000 0010 0100 0000`

在这种情况下，低字节是`0100 0000`，而高字节是`0000 0010`。将其转换回十进制，我们得到`nL = 64`和`nH = 2`。

就我而言，我打印了一个宽度为 330 像素的图像，将 330 转换为二进制我们得到：

`0000 0001 0100 1010`

现在在这种情况下，低字节是`0100 1010`，高字节是`0000 0001`。转换为十进制，我们得到`nL = 74`和`nH = 1`。

有关更多信息，请查看以下文档/教程：

[星亚移动打印机文档](http://www.starasia.com/dl/manual/mobilecom_epm%28STAR%20Command%20Specification%20for%20Mobile%20Printer_V1.0%29.pdf)

[ECS-POS 编程指南 - 非常广泛](http://nicholas.piasecki.name/blog/wp-content/uploads/2009/12/ESC-POS-Programming-Guide.pdf)

[另一个文档](http://www.zlgmcu.com/ZLG/Print/pdf/ZLG-ESCPOS_en.pdf)

[上面代码的扩展版本，有更多解释](http://android-essential-devtopics.blogspot.com/2013/02/sending-bit-image-to-epson-printer.html)

[上面代码的解释](http://nicholas.piasecki.name/blog/2009/12/sending-a-bit-image-to-an-epson-tm-t88iii-receipt-printer-using-c-and-escpos/)

希望这些有所帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-06-04T16:35:49.713

解决了！，我正在做一个错误的打印机初始化......正确的方法是：

```
 public static byte[] SELECT_BIT_IMAGE_MODE = {0x1B, 0x2A, 33, 255, 3}; 
```

所以，通过这种方式，图像打印得非常好

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-23T06:55:55.303

**编辑**：根据阅读您的问题进行更新：[https ://stackoverflow.com/questions/16597789/print-bitmap-on-esc-pos-printer-java](https://stackoverflow.com/questions/16597789/print-bitmap-on-esc-pos-printer-java)

我假设您要打印的打印机与上面的打印机相同，即 Rego 热敏打印机。正如您所注意到的，这支持[ESC/POS 页面描述语言](http://www.zlgmcu.com/ZLG/Print/pdf/ZLG-ESCPOS_en.pdf)。

* * *

打印机将流向它们的数据解释为标记的文档（以类似于浏览器解释 HTML 的方式）。在某些情况下，打印机实际上将文档作为程序（例如 PostScript）运行。链接：[页面描述语言](https://en.wikipedia.org/wiki/Page_description_language)。

常用语言有：

*   **你**的：[ESC/POS](http://www.zlgmcu.com/ZLG/Print/pdf/ZLG-ESCPOS_en.pdf)。
*   [后记](https://en.wikipedia.org/wiki/PostScript)
*   [PCL](https://en.wikipedia.org/wiki/Printer_Command_Language)
*   [ZPL](https://en.wikipedia.org/wiki/Zebra_(programming_language))

您需要阅读打印机的规格以确定要使用的语言 - 如果您需要支持*任何*打印机，那么您面临的工作量非常大:(

在 ESC/POS 中，您将需要使用`GS v 0`命令（记录在 p33 中）。为此，您可以通过`0x1D7630`串行链路发送字符，后跟一组参数：

```
ASCII:       Gs   v  0 
Decimal:     29 118 48 m xL xH yL yH [d]k 
Hexadecimal: 1D  76 30 m xL xH yL yH [d]k 
```

参数定义：

*   米：
    *   0,48：正常模式（1:1 比例）
    *   1,49：双宽
    *   2,50：双高
    *   3,51：双宽+双高
*   xL, xH 指定位图水平方向的 (xL + xH × 256) 字节。
*   yL, yH 指定位图垂直方向的 (yL + yH × 256) 个点。
*   [d]k 指定位图数据（光栅格式）。
*   k表示位图像数据的数量。k是解释参数；因此，它不需要传输。

笔记：

*   当数据 [d]k 为 1 时，指定打印为 1 且不打印为 0 的位。
*   如果光栅位图超过一行打印区域，则不打印超出的数据。
*   无论 ESC 2 或 ESC 3 的设置如何，此命令都会执行打印位图所需的进纸量。
*   打印位图后，该命令将打印位置设置为行首，并清空缓冲区。
*   执行该命令时，数据同步传输和打印。因此不需要其他打印命令。

还有几个更广泛的阐述：

*   [http://nicholas.piasecki.name/blog/2009/12/sending-a-bit-image-to-an-epson-tm-t88iii-receipt-printer-using-c-and-escpos/](http://nicholas.piasecki.name/blog/2009/12/sending-a-bit-image-to-an-epson-tm-t88iii-receipt-printer-using-c-and-escpos/)
*   [在 C# 中的 SO 上](https://stackoverflow.com/a/14099717/1395668)。虽然不是 Java，但它足够接近成为模板。

* * *

不幸的是，Android 中没有打印机 API。如果您对此有强烈的感觉，请遵循以下问题：

*   [https://code.google.com/p/android/issues/detail?id=40486](https://code.google.com/p/android/issues/detail?id=40486)
*   [https://code.google.com/p/android/issues/detail?id=1148](https://code.google.com/p/android/issues/detail?id=1148)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-14T11:53:33.230

我是 ESC/POS 的新手，并且正在为此苦苦挣扎。我遇到了这个页面，它似乎有一些有用的功能：[http](http://code.taobao.org/p/printer/src/trunk/prtest/src/com/enjar/plugins/PrintTools_58mm.java) ://code.taobao.org/p/printer/src/trunk/prtest/src/com/enjar/plugins/PrintTools_58mm.java 虽然它是中文的，但是可能值得经历。如果有人想通了，我也想开悟……

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-26T19:53:57.883

我知道 evolute 和 AMDL 蓝牙打印机。首先阅读打印机的协议定义文档，告诉您设备需要哪些特定字节-

```
public void connect() throws Exception 
{

    BluetoothDevice printer = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(connParams);

    Method m = printer.getClass().getMethod("createInsecureRfcommSocket",new Class[] { int.class });
    sock = (BluetoothSocket)m.invoke(printer, Integer.valueOf(1));
    sock.connect();
    os=sock.getOutputStream();
    in=sock.getInputStream();

} 
```

通过上述代码连接后，您将获得套接字的输出流。然后通过打印机提供的工具将您的图像转换为相应的字节，您会得到类似的东西

```
public byte[] Packet1={
        (byte)0X8A,(byte)0XC6,(byte)0X94,(byte)0XF4,(byte)0X0B,(byte)0X5E,(byte)0X30,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X04,(byte)0X24,(byte)0X01,(byte)0X0C,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X01,(byte)0X08,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X04,(byte)0X24,(byte)0X05,(byte)0X0C,(byte)0X00,(byte)0X60,(byte)0X00,(byte)0X18,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X30,(byte)0X1E,(byte)0X10,(byte)0X60,(byte)0X00,(byte)0X18,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X70,(byte)0X3F,(byte)0X18,(byte)0XF0,(byte)0X00,(byte)0X3E,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X70,(byte)0X3C,(byte)0X39,(byte)0XF1,(byte)0X80,(byte)0X3E,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0XF8,(byte)0X7C,(byte)0X9F,(byte)0XF1,(byte)0X80,(byte)0X7F,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0XF9,(byte)0X9E,(byte)0X1C,(byte)0XFF,(byte)0XC2,(byte)0X7E,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0XF9,(byte)0X9E,(byte)0X1C,(byte)0XE7,(byte)0XE2,(byte)0X7E,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0XFB,(byte)0X1E,(byte)0X1C,(byte)0XFF,(byte)0XE7,(byte)0XBE,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X7B,(byte)0X16,(byte)0X1C,(byte)0XFF,(byte)0XDF,(byte)0X3E,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X71,(byte)0X12,(byte)0X1C,(byte)0XE7,(byte)0XF7,(byte)0X34,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X51,(byte)0X12,(byte)0X1C,(byte)0XF7,(byte)0XF7,(byte)0X24,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X49,(byte)0X12,(byte)0X1C,(byte)0XFF,(byte)0XF3,(byte)0X24,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X49,(byte)0X12,(byte)0X3F,(byte)0XFD,(byte)0XF3,(byte)0X24,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0X49,(byte)0X96,(byte)0X3F,(byte)0XFC,(byte)0XF3,(byte)0X24,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X05,(byte)0X49,(byte)0X80,(byte)0X00,(byte)0X08,(byte)0X10,(byte)0X5E,(byte)0X28,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X30,(byte)0X25,(byte)
        0X01,(byte)0X5E,(byte)0X03,(byte)0X24,(byte)0X06,(byte)0XE0,(byte)0X74,(byte)0XA9,(byte)0X33,(byte)0X23,(byte)0X26,(byte)0X5E,(byte)0X27,(byte)0X25,(byte)0X04
        }; 
```

其中 8A 是起始字节 C6 是模式字节（智能卡、刷卡和指纹不同），94 是字体字节，最后一个字节 04 是结束字节，告诉硬件这是数据包的结尾。取决于图像的大小获取其中几个长度为 256 字节的数据包（大多数打印机）。将它们写入 outputStream。

```
os.write(Packet1) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-19T19:20:57.193

这对我有用：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inTargetDensity = 200;
options.inDensity = 200;
Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), img, options); 
```

在使用 BitmapFactory.Options 之前，我只能打印 60X60 尺寸的图像，现在我也可以打印更大尺寸的图像。

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2013-05-29T12:36:03.890

使用此代码：

```
public static void print(Context context) {

    String examplePath = "file:///sdcard/dcim/Camera/20111210_181524.jpg";

    Intent sendIntent = new Intent(Intent.ACTION_SEND);
    sendIntent.setType("image/jpeg");
    sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Photo");
    sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(examplePath));
    sendIntent.putExtra(Intent.EXTRA_TEXT, "Enjoy the photo");
    context.startActivity(Intent.createChooser(sendIntent, "Email:"));
} 
```

# spring - 运行 Ant junit batchtest 时如何重用 Spring 上下文

> ID：14530065
> 
> 赞同：1
> 
> 时间：2013-01-25T20:43:40.193
> 
> 标签：spring, ant, junit4

我正在将我们的应用程序升级到 JUnit4。我已经设法使用 Spring 注释启动并运行我们的测试用例

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration 
```

然后我们使用 Ant 执行所有测试

```
<junit ...>
  <batchtest fork="yes" todir="tmp">
    <fileset dir="${testsrc.dir}">
      <include name="**/Test*.java"/>
    </fileset>
  </batchtest> 
```

但是，根据我们的日志文件，似乎为每个测试类重新创建了 Spring 上下文。因此，总执行时间太长了。什么是让 Spring 上下文只加载一次的正确方法？

谢谢西蒙尼德伯格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:59:10.993

也许是因为 fork 参数？似乎 ant 正在为每个测试创建一个分支。我猜通常会弹出 junit runner 尝试重用上下文。

# wpf - WPF：通过 ItemsControl 中的样式设置器设置自定义控件的附加属性

> ID：14530067
> 
> 赞同：0
> 
> 时间：2013-01-25T20:43:42.847
> 
> 标签：wpf, xaml, styles, wpf-controls, attached-properties

我有 ItemsControl，其中 ItemsPanel 是 Canvas。数据模板是一个包裹在边框中的画布，其中包含额外的矩形。这是 ItemsControl XAML：

```
<ItemsControl x:Name="Items" ItemsSource="{Binding TileResources, ElementName=ResourceWindow}" >
                <ItemsControl.ItemsPanel >
                    <ItemsPanelTemplate>
                        <Canvas Background="SkyBlue" Width="500" Height="500"  IsItemsHost="True" Loaded="Canvas_Loaded_1" MouseDown="Canvas_MouseDown" MouseUp="Canvas_MouseUp" MouseMove="Canvas_MouseMove"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <local:ResourceBorderControl x:Name="ResRect" BorderThickness="2"
                                MouseDown="selectionBox_MouseDown" MouseUp="selectionBox_MouseUp" >
                            <Canvas Width="{Binding Width, ElementName=ResRect}"  Height="{Binding Height, ElementName=ResRect}" Background="White" Opacity="0.1">
                                <Rectangle Stroke="Red" StrokeThickness="2"
                                    Canvas.Left="{Binding CollisionX, ElementName=ResRect}" 
                                    Canvas.Top="{Binding CollisionY, ElementName=ResRect}"
                                    Width="{Binding CollisionWidth, ElementName=ResRect}"
                                    Height="{Binding CollisionHeight, ElementName=ResRect}"
                                    />

                            </Canvas>

                        </local:ResourceBorderControl>

                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsSelected}" Value="true">
                                <Setter Property="BorderBrush" Value="Purple" TargetName="ResRect"/>
                            </DataTrigger>

                            <DataTrigger Binding="{Binding IsSelected}" Value="false">
                                <Setter Property="BorderBrush" Value="SeaGreen" TargetName="ResRect"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemContainerStyle>
                    <Style>
                        <Setter Property="Canvas.Left" Value="{Binding X}" />
                        <Setter Property="Canvas.Top" Value="{Binding Y}" />
                        <Setter Property="FrameworkElement.Width" Value="{Binding Width}" />
                        <Setter Property="FrameworkElement.Height" Value="{Binding Height}" />
                        <Setter Property="local:ResourceBorderControl.CollisionX" Value="{Binding CollideX}" />
                        <Setter Property="local:ResourceBorderControl.CollisionY" Value="{Binding CollideY}" />
                        <Setter Property="local:ResourceBorderControl.CollisionWidth" Value="{Binding CollideWidth}" />
                        <Setter Property="local:ResourceBorderControl.CollisionHeight" Value="{Binding CollideHeight}" />
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl> 
```

如您所见，我正在使用自定义边框控件 - ResourceBorderControl。它有 4 个附加属性来描述内部矩形： CollisionX CollisionY CollisionWidth CollisionHeight

如果我只是在 XAML 中对附加属性（CollisionX 等）进行硬编码，它就可以正常工作 - Canvas 中的 Rectangle 按我想要的方式呈现。

我希望使用样式（或任何其他方式，如果可能的话）设置它，因为我需要用来自 ItemsSource 的渲染对象的值填充它。

它就是行不通。我什至无法在 WPF 树可视化工具中调试它——当我尝试查看 ResourceBorderControl 对象时，我看不到碰撞值。当我运行该程序时，我可以看到带画布的边框渲染（我可以看到不透明度），但里面什么都没有。我想这些值在被样式设置器设置后会丢失。

所以我的问题是——我在这里做错了吗？或者只是 WPF 不允许使用样式设置自定义附加值，我应该使用另一种方法？如果是后者，我还能怎么做？

编辑：这是绑定到 ItemsSource 的 ObservableCollection 中实例的类的代码

```
public class ResourceModelBase : IResourceModel
{
    private String _name, _defaultLayer;
    private double _x, _y, _width, _height, _collideX, _collideY, _collideWidth, _collideHeight;
    private bool _isSelected;

    public ResourceModelBase(double x, double y, double width, double height)
    {
        X = x;
        Y = y;
        Width = width;
        Height = height;

        CollideX = 1;
        CollideY = 1;
        CollideWidth = 100;
        CollideHeight = 100; 

        IsSelected = false;

        Name = "RES_" + width.ToString() + height.ToString();
    }

    public void Select()
    {
        IsSelected = true;
    }

    public void Deselect()
    {
        IsSelected = false;
    }

    public new String ToString()
    {
        return Name;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public String Name
    {
        get
        {
            return _name;
        }

        set
        {
            if (value != _name)
            {
                _name = value;
                NotifyPropertyChanged();
            }
        }
    }

    public String DefaultLayer
    {
        get
        {
            return _defaultLayer;
        }

        set
        {
            if (value != _defaultLayer)
            {
                _defaultLayer = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double X
    {
        get
        {
            return _x;
        }

        set
        {
            if (value != _x)
            {
                _x = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double Y
    {
        get
        {
            return _y;
        }

        set
        {
            if (value != _y)
            {
                _y = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double Width
    {
        get
        {
            return _width;
        }

        set
        {
            if (value != _width)
            {
                _width = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double Height
    {
        get
        {
            return _height;
        }

        set
        {
            if (value != _height)
            {
                _height = value;
                NotifyPropertyChanged();
            }
        }
    }

    public bool IsSelected
    {
        get
        {
            return _isSelected;
        }

        set
        {
            if (value != _isSelected)
            {
                _isSelected = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double CollideX
    {
        get
        {
            return _collideX;
        }

        set
        {
            if (value != _collideX)
            {
                _collideX = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double CollideY
    {
        get
        {
            return _collideY;
        }

        set
        {
            if (value != _collideY)
            {
                _collideY = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double CollideWidth
    {
        get
        {
            return _collideWidth;
        }

        set
        {
            if (value != _collideWidth)
            {
                _collideWidth = value;
                NotifyPropertyChanged();
            }
        }
    }

    public double CollideHeight
    {
        get
        {
            return _collideHeight;
        }

        set
        {
            if (value != _collideHeight)
            {
                _collideHeight = value;
                NotifyPropertyChanged();
            }
        }
    }
} 
```

如您所见 - 主要是公共属性，以及 INotifyPropertyChanged 接口的实现。

附加属性定义：

```
public static readonly DependencyProperty CollisionX = DependencyProperty.RegisterAttached(
      "CollisionX",
      typeof(double),
      typeof(ResourceBorderControl),
      new FrameworkPropertyMetadata(0.0, FrameworkPropertyMetadataOptions.AffectsRender)
    );

    public static void SetCollisionX(UIElement element, object value)
    {
        element.SetValue(CollisionX, (double)value);
    }

    public static double GetCollisionX(UIElement element)
    {
        return (double)element.GetValue(CollisionX);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T02:28:14.617

您的附加属性看起来不错，但我认为您误解了 ItemTemplate 和 ItemContainerStyle 的关系。看起来您正在尝试设置您在 ItemContainerStyle 中绑定的属性，并将它们显示在 DataTemplate 内的 ResourceBorderControl 上，这些属性将被注入到项目容器中。你现在所拥有的实际上是这样一个可视化树：

```
ItemsControl
 ItemsPresenter
  Canvas
   ContentPresenter for item 1 (ResourceBorderControl.CollisionX = bound value, etc)
    ResourceBorderControl
     Canvas
      ...
   ContentPresenter for item 2 (ResourceBorderControl.CollisionX = bound value, etc)
    ResourceBorderControl
     Canvas
      ... 
```

根据您的最终目标，有两种方法可以处理此问题。如果您只想让属性显示在 ResourceBorderControl 上，您可以通过更改 DP 定义以包含额外的 Inherits 标志来利用属性继承：

```
public static readonly DependencyProperty CollisionX = DependencyProperty.RegisterAttached(
      "CollisionX",
      typeof(double),
      typeof(ResourceBorderControl),
      new FrameworkPropertyMetadata(0.0,
          FrameworkPropertyMetadataOptions.Inherits | FrameworkPropertyMetadataOptions.AffectsRender)
    ); 
```

这将导致在 ContentPresenter ItemContainer 下的每个子项上设置属性，除非被覆盖或清除。

您的另一个选择是派生一个使用 ResourceBorderControl 作为其容器的自定义 ItemsControl。我认为这仅涉及覆盖一些方法，`GetContainerForItemOverride`并且`IsItemItsOwnContainerOverride`是最低限度的。这使您的自定义控件成为 ItemsPanel 的 Canvas 的直接子控件，它可以打开许多不同的布局选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:49:17.683

我想出了一个解决方法，但这是丑陋的黑客，所以如果有人能指出我正确的方向，我将不胜感激:)。我添加了 DataTriggers，所以现在我的 DataTemplate.Triggers XAML 节点如下所示：

```
<DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsSelected}" Value="true">
                                <Setter Property="BorderBrush" Value="Purple" TargetName="ResRect"/>
                            </DataTrigger>

                            <DataTrigger Binding="{Binding IsSelected}" Value="false">
                                <Setter Property="BorderBrush" Value="SeaGreen" TargetName="ResRect"/>
                            </DataTrigger>

                            <!-- very very ugly ugly hack :(-->
                            <DataTrigger Binding="{Binding IsSelected}" Value="true">
                                <Setter Property="Canvas.Left" Value="{Binding CollideX}" TargetName="CollideRect"/>
                                <Setter Property="Canvas.Top" Value="{Binding CollideY}" TargetName="CollideRect"/>
                                <Setter Property="FrameworkElement.Width" Value="{Binding CollideWidth}" TargetName="CollideRect"/>
                                <Setter Property="FrameworkElement.Height" Value="{Binding CollideHeight}" TargetName="CollideRect"/>
                            </DataTrigger>

                            <DataTrigger Binding="{Binding IsSelected}" Value="false">
                                <Setter Property="Canvas.Left" Value="{Binding CollideX}" TargetName="CollideRect"/>
                                <Setter Property="Canvas.Top" Value="{Binding CollideY}" TargetName="CollideRect"/>
                                <Setter Property="FrameworkElement.Width" Value="{Binding CollideWidth}" TargetName="CollideRect"/>
                                <Setter Property="FrameworkElement.Height" Value="{Binding CollideHeight}" TargetName="CollideRect"/>
                            </DataTrigger>
                        </DataTemplate.Triggers> 
```

我对此并不满意，但至少它有效。

# http - 网站如何在无需登录的情况下防止多次投票

> ID：14530074
> 
> 赞同：2
> 
> 时间：2013-01-25T20:44:07.723
> 
> 标签：http, web-applications

我的一个朋友最近向我展示了一个网站，人们可以在该网站上为某事投​​票。不需要登录，但是当我尝试多次（每天）投票时，网站就知道了。有什么可能的方法来做到这一点？

我的第一个想法是 IP 地址，但我认为这行不通。如果我在大型办公楼、工作场所或公共 wifi（星巴克、机场等）中，不是每个共享 IP 地址只有 1 人可以投票吗？

如果我开车在城市里用手机投票会怎样。如果网站只是简单地记录 IP，理论上我不能为我附近的每个手机信号塔投票一次吗？

如果使用 cookie，是不是可以禁用 cookie 并无限投票？

使用什么机制来创建这种类型的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:47:01.393

几乎可以肯定是用饼干做的。

它可能首先测试是否启用了 cookie，然后才允许您投票。

尝试使用两个不同的浏览器进行两次投票。

# javascript - 会员图片随机展示

> ID：14530075
> 
> 赞同：0
> 
> 时间：2013-01-25T20:44:10.880
> 
> 标签：javascript, php, html-table

如果我有 50 个点的数组，每个点包含 5 张图像，我想以表格格式随机显示每个点。每行一个点（5 张图像），总共 50 行。不使用数据库！

```
<?php
$allImages = array('Image1.jpg','Image2.jpg','Image3.jpg','Image4.jpg');
echo '<table>';
// loop for 12 rows
for($j=0; $j<12; $j++) {
    echo '<tr>';
    // loop to make 5 columns, 1 column for each image
    for($i=0; $i<5; $i++) {
        echo '<td>';
        $img = $allImages[rand(0,3)];
        echo '<img src="'.$img.'">';
        echo '</td>';
    } echo '</tr>';
}
echo '</table>';

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:03:59.530

try this:

```
<?php

$allImages = array('Image1.jpg','Image2.jpg','Image3.jpg','Image4.jpg',
                   'Image2.jpg','Image3.jpg','Image4.jpg','Image2.jpg',
                   'Image3.jpg','Image4.jpg','Image2.jpg','Image3.jpg',
                   'Image4.jpg'); 
shuffle ( $allImages );
echo '<table><tr>'; 
for($j=0; $j<count($allImages); $j++) { 
  echo '<td>'; 
  echo '<img src="'.$allImages[$j].'">'; 
  echo '</td>'; 
  if(($j+1)%5==0) echo "</tr><tr>";
} 
echo '</tr></table>';

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:20:33.377

这个怎么样？

```
<?php
$allImages = array(
        array ('Image01.jpg', 'Image02.jpg', 'Image03.jpg', 'Image04.jpg', 'Image05.jpg'),
        array ('Image11.jpg', 'Image12.jpg', 'Image13.jpg', 'Image14.jpg', 'Image15.jpg'),
        //.... So on upto 50 slots
        array ('Image501.jpg', 'Image502.jpg', 'Image503.jpg', 'Image504.jpg', 'Image505.jpg')
);

$spot_indexes = range(0,2,1); //in your case limit is 50
shuffle($spot_indexes);

foreach($spot_indexes as $index) {
    $spot_images = $allImages[$index];

    foreach($spot_images as $image) {
        echo '<img src ="' .$image. '" height="150px" width="100px" /> ' ;
    }
    echo '<br>';
}
?> 
```

# java - 如何在 Spring 3 中处理客户端取消请求？

> ID：14530081
> 
> 赞同：6
> 
> 时间：2013-01-25T20:44:20.927
> 
> 标签：java, spring-mvc

我有一个控制器，它的方法用@RequestMapping 映射，它返回一个对象是JSON 格式，所以它也有@ResponseBody。在生产者/消费者类型的情况下，获取它应该返回的对象的一部分是对象上的 wait() 。

客户端当然可以随时取消他们的请求，但我希望能够在客户端取消时中断控制器正在执行的 wait() 命令。目前，ajax 请求会抛出一个带有 statusType 超时的客户端错误，我可以在客户端处理它。但它似乎仍然在我想要清理的服务器端留下一个等待的线程。

但是怎么做？

我似乎记得在较旧的 Web 应用程序中出现 Socket Closed 类型的错误，我没有看到 WebLogic 10.3 上的这个 Spring 3 应用程序发生这种情况

当控制器处于等待（）时取消客户端请求时，我看到这样的日志记录：

“ <[STUCK] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)' 已经忙了“623”秒来处理请求等......”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-16T19:03:41.320

我建议将您的控制器逻辑包含在 try/catch 中，并尝试杀死 catch 块中的线程。

# canvas - JavaFX GraphicsContext 更改文本大小

> ID：14530089
> 
> 赞同：8
> 
> 时间：2013-01-25T20:45:08.563
> 
> 标签：canvas, fonts, javafx, pane, graphicscontext

我希望能够在调用 strokeText() 方法之前更改字体大小以及可能的字体本身。我可以更改颜色，但无论如何我都看不到更改字体。

```
Pane canvas = new Pane();
GraphicsContext gc = canvas.getGraphicsContext2D();
gc.setStroke(Color.WHITE);
gc.strokeText("Hello", 1, 1); 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T00:15:27.487

[您可以通过在调用 strokeText 之前调用setFont](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/GraphicsContext.html#setFont%28javafx.scene.text.Font%29)方法来设置 GraphicsContext 的字体和字体大小。

```
gc.setFont(new Font(fontName, fontSize)); 
```

# java - Android（Java）倒计时计时器转换为文本

> ID：14530090
> 
> 赞同：2
> 
> 时间：2013-01-25T20:45:07.790
> 
> 标签：java, android, timer

基本上，我有一个倒计时，对吧？我需要在文本中显示计时器的剩余时间。我已经这样做了，但是计时器的时间有点过时，因为它需要将剩余的秒数转换为小时和分钟，就像在常规数字手表上显示 00:05:00 并且倒计时到 00:04 一样： 59\. 我今天做了很多事情，现在我的头很疼，所以我不能完全去想它。所以我的猜测是我需要使用 60 的倍数。帮助？

代码：

```
int timeinminutes=1;

    new CountDownTimer(timeinminutes*100000, 1000) {

        TextView mTextField = (TextView) findViewById(R.id.textView1);

         public void onTick(long millisUntilFinished) {
             long hrs=0;
             long mnts=0;
             long scnds=0;
             scnds=(millisUntilFinished/1000);
             if (scnds>59) {
                 mnts=(scnds/60);
                 if (mnts!=Math.floor(mnts)) {
                     mnts=0;
                 }

             }
             if (mnts>59) {
                 hrs=(mnts/60);
                 if (hrs!=Math.floor(hrs)) {
                     hrs=0;
                 }
             }
             mTextField.setText(hrs + ":" + mnts + ":" + scnds);
         }

         public void onFinish() {
             mTextField.setText("00:00:00");
         }
      }.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:50:05.053

其中很多已经完成。如果您阅读有关[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)的信息，它应该可以帮助您解决这个问题。

[您也可以在此处](https://stackoverflow.com/questions/3504986/java-date-time-format)找到更多信息。

[在这里](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)查看 java.util.Timer 。

这些应该可以解决您的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:57:15.367

您应该有一个单独的类来进行倒计时并将剩余时间（以毫秒为单位）作为一个字段。该类可以有一个方法来启动一个休眠 1000 毫秒的线程，然后以毫秒为单位从原始时间中减去 1000，直到剩余时间为 0。

然后，您可以使用另一个线程每 1000 毫秒更新一次 TextView，并使用 SimpleDateFormat 从倒计时对象中获取剩余时间并对其进行格式化。

# android - Android 布局和图标/视图大小

> ID：14530094
> 
> 赞同：0
> 
> 时间：2013-01-25T20:45:18.737
> 
> 标签：android, android-layout

我有很大的布局，在一项活动中，我有高度为 270dp 和图标 48x48dp 的 listView。在平板电脑（nexus7）上看起来不错。现在我正在为普通屏幕和小屏幕设计布局。而且这个图标 48x48dp 和 270dp listview 看起来很大。如何根据屏幕尺寸缩小它们。使用什么尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:02:29.823

In your project you have 4 drawable/ folders, u need to use them in order to get the desired result. Scale your icon to 24x24dp or similiar and place it in drawable-mdpi/ folder. For scaling you can use paint or photoshop. For more info read [this](http://developer.android.com/guide/practices/screens_support.html#range). Hope this will help. however it is good to use match_parent with listView instead of dp.

# function - 在 Lisp 模式下扩展时的选择函数注释

> ID：14530098
> 
> 赞同：3
> 
> 时间：2013-01-25T20:45:33.090
> 
> 标签：function, emacs, comments, selection

我正在使用绑定到的键盘快捷键：

```
er/expand-region, which is an interactive Lisp function in `expand-region-core.el'. 
```

扩大区域。

例如，当我想选择一个函数并移动它时。

我的问题是，如果我想选择任何功能，比如：

```
;; some comment related to the function
(defn foo [x]
  ...) 
```

我不能“扩展”以包括“;;一些评论”。一旦我扩展的功能超过了函数（没有注释），它就会消耗整个缓冲区。

虽然我希望它首先扩展以包含函数和注释，然后是完整的缓冲区。

这让我非常困扰，以至于我暂时将其作为一种解决方法：

```
(defn foo [x]
  ;; some comment
  ...) 
```

如何修改 er/expand-region （或其他函数），以便在扩展为完整函数后，在扩展为整个缓冲区之前扩展函数正上方的注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:58:55.133

From Magnar Sveen, the creator of the package expand-region, taken from his [github](https://github.com/magnars/expand-region.el):

> Example:
> 
> Let's say you want expand-region to also mark paragraphs and pages in text-mode. Incidentally Emacs already comes with mark-paragraph and mark-page. To add it to the try-list, do this:

```
 (defun er/add-text-mode-expansions ()   (make-variable-buffer-local
 'er/try-expand-list)   (setq er/try-expand-list (append
                             er/try-expand-list
                             '(mark-paragraph
                               mark-page)))) 
```

> (add-hook 'text-mode-hook 'er/add-text-mode-expansions)
> 
> Add that to its own file, and add it to the expand-region.el-file, where it says "Mode-specific expansions"
> 
> Warning: Badly written expansions might slow down expand-region dramatically. Remember to exit quickly before you start traversing the entire document looking for constructs to mark.

I would say you could add "er/mark-paragraph" to the expand-region list, that should do it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:28:39.307

按照用户*Dualinity 的*建议，我在*clojure-mode-expansions.el*中添加了以下内容（当然，可以为 Clojure 以外的其他模式完成）：

```
;; added this line at the beginning of the file
(require 'org-mode-expansions) 
```

然后我将 er/mark-paragraph 行添加到方法内的展开列表中`er/add-clojure-mode-expansions`：

```
(defun er/add-clojure-mode-expansions ()
  "Adds clojure-specific expansions for buffers in clojure-mode"
  (set (make-local-variable 'er/try-expand-list) (append
                                                  er/try-expand-list
                                                  '(er/mark-clj-word
                                                    er/mark-clj-regexp-literal
                                                    er/mark-paragraph ; added this line
                                                    er/mark-clj-function-literal)))) 
```

我重新启动了 Emacs（不太确定需要什么来确保它被考虑在内，所以我重新启动了整个事情）。

就是这样：现在扩展也选择了“外部”函数注释。

# tabs - 如何使用 Spry 选项卡式面板更改内容而不是选项卡？

> ID：14530101
> 
> 赞同：0
> 
> 时间：2013-01-25T20:45:40.257
> 
> 标签：tabs, spry, tabbed

我有一个主要由 Spry 选项卡式面板组成的网站。

现在，我可以在您单击不同选项卡的地方使用它，并且内容会随着选项卡的变化而变化。但是现在我的标签内容中有链接，我想链接到不同的页面但在同一个标​​签中。我该怎么做呢？

这是我在富国银行网站上谈论的一个例子：

第一个标签： [https ://www.wellsfargo.com/investing/retirement/ira/](https://www.wellsfargo.com/investing/retirement/ira/)

单击选项卡中的链接（但选项卡不会更改）： [https ://www.wellsfargo.com/help/faqs/investing/ira](https://www.wellsfargo.com/help/faqs/investing/ira)

如果您想在我的网站背景下向我展示答案，这里是我的网站：

[http://emilymagnuson.com](http://emilymagnuson.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:54:54.847

我的理解是您想在选项卡式面板中创建页面。解决方案可以是：在 Spry 选项卡式面板中创建另一个 Spry 选项**卡式**面板。

**用示例链接编辑：**这是源代码：

```
<body>
<div id="TabbedPanels1" class="TabbedPanels">
  <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" tabindex="0">Main Tab 1</li>
    <li class="TabbedPanelsTab" tabindex="0">Main Tab 2</li>
    <li class="TabbedPanelsTab" tabindex="0">Main Tab 3</li>
  </ul>
  <div class="TabbedPanelsContentGroup">
    <div class="TabbedPanelsContent">Main Content 1</div>
    <div class="TabbedPanelsContent">Main Content 2
      <div id="TabbedPanels2" class="VTabbedPanels">
        <ul class="TabbedPanelsTabGroup">
          <li class="TabbedPanelsTab" tabindex="0">Sub Tab 1</li>
          <li class="TabbedPanelsTab" tabindex="0">Sub Tab 2</li>
        </ul>
        <div class="TabbedPanelsContentGroup">
          <div class="TabbedPanelsContent">Sub Content 1
              <li><a href="#">Link here</a></li>
              <li><a href="#">Link here</a></li>
              <li><a href="#" onclick="TabbedPanels2.showPanel(1); return false;">Go to Menu 2</a></li>
             </div>
          <div class="TabbedPanelsContent">Sub Content 2</div>
        </div>
      </div>
    </div>
    <div class="TabbedPanelsContent">Main Content 3</div>
  </div>
</div>
<script type="text/javascript">
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
var TabbedPanels2 = new Spry.Widget.TabbedPanels("TabbedPanels2");
</script>
</body> 
```

在您的**CSS**中，添加以下内容：

```
.VTabbedPanels .TabbedPanelsTabGroup {
    display: none;
} 
```

现在，选项*卡式面板内的选项卡已隐藏*。只显示内容。

此外，添加此项以*扩大面板内容内容的宽度*：

```
.VTabbedPanels .TabbedPanelsContentGroup {
    width: 99%;
    height: 100%;
    border: 0;
} 
```

**笔记：**

***为了：***

```
<a href="#" onclick="TabbedPanels2.showPanel(1); return false;">Go to Menu 2</a> 
```

showPanel( **0** ) -**第一个**选项卡；showPanel( **1** ) -**第二个**选项卡，依此类推。

# c - 将 void*(*)(void*) 类型转换为 void(*)(void)

> ID：14530109
> 
> 赞同：4
> 
> 时间：2013-01-25T20:46:35.290
> 
> 标签：c, multithreading, casting, pthreads

作为作业的一部分，我正在尝试创建一个像 pthreads 这样的用户级线程库。

为了处理线程之间的上下文切换，我使用了“swapcontext”函数。在使用它之前，我必须使用“makecontext”函数创建一个上下文。'makecontext' 需要一个具有返回类型`void`和参数类型的函数指针`(void)`。

而线程函数必须是类型`void* thread_func (void*)`

有没有办法进行类型转换？还是有其他方法可以在用户级别进行上下文切换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T21:03:42.817

通过将函数的地址转换为不同的原型并通过结果指针调用它来调用具有不兼容原型的函数是非法的：

```
void *my_callback(void *arg) { ... }

void (*broken)(void *) = (void (*)(void *)) my_callback;
broken(some_arg);   // incorrect, my_callback returns a `void *` 
```

您可以做的是传递给`makecontext`您自己的回调，该回调将调用`thread_func`并忽略其返回值。仅用于调用另一个函数的小函数有时称为[*蹦床*](http://en.wikipedia.org/wiki/Trampoline_%28computing%29)。

```
/* return type is compatible with the prototype of the callback received
   by makecontext; simply calls the real callback */
static void trampoline(int cb, int arg)
{
  void *(*real_cb)(void *) = (void *(*)(void *)) cb;
  void *real_arg = arg;
  real_cb(real_arg);
}

int my_pthread_create(void *(*cb)(void *), void *arg)
{
  ucontext_t *ucp;
  ...
  /* For brevity treating `void *` as the same size as `int` -
     DO NOT USE AS-IS.
     makecontext exposes an annoyingly inconvenient API that only
     accepts int arguments; correct code would deconstruct each
     pointer into two ints (on architectures where pointer is
     larger than int) and reconstruct them in the trampoline. */
  makecontext(ucp, trampoline, 2, (int) cb, (int) arg);
  ...
} 
```

对于奖励积分，您可以修改蹦床以将`void *`回调函数返回的值存储在堆栈上，并让您等效于`pthread_join()`检索它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T21:04:51.213

原则上，您始终可以将任何类型的指针转​​换为任何其他类型的指针，但对于函数指针，我**强烈建议不要**使用.

您`thread_func`会期望堆栈上有一个参数，如果在您的错误转换后调用该参数，则不会提供该参数。更糟糕的是，`thread_func`会在不应该的地方写入返回值，从而破坏你的堆栈。

一种解决方案是将调用包装在它自己的适当类型的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:03:50.720

您可以像变量一样对函数指针进行类型转换。语法更尴尬，但它肯定是可能的（这是否是一个好主意完全是另一个讨论）。

但是，在这种情况下，这可能不是您想要做的。从[手册页`swapcontext`](http://linux.die.net/man/3/swapcontext)：

> 在调用 makecontext() 之前，调用者必须为此上下文分配一个新的堆栈并将其地址分配给 ucp->uc_stack，

您的线程函数需要一个参数。通过您创建的堆栈将该参数传递给新上下文。您传递给的函数`makecontext()`可以是一个包装函数，它从堆栈中检索值并将其作为参数传递给线程函数。单独的类型转换不会提供将参数中的数据向下传递到新上下文中的函数的方法。

# macos - OS-X 应用程序包的行为

> ID：14530110
> 
> 赞同：1
> 
> 时间：2013-01-25T20:46:35.810
> 
> 标签：macos, executable, osx-mountain-lion, nsbundle

位于应用程序包中如何影响二进制可执行文件的运行方式？

为了解释，我为 Mountain Lion 编译了 Emacs。这会生成一个二进制可执行文件，以及一个应用程序包 Emacs.app，它包含完全相同的二进制文件（根据差异，内容相同）以及其他资源。

如果我从终端（或查找器）运行二进制文件本身：

*   Emacs 启动，正确处理我的 init 文件并且看起来不错。
*   但是应用程序菜单仍然显示“终端”并且
*   键盘输入进入终端而不是 Emacs。
*   红色红绿灯按钮也被发送到 Emacs（Emacs 说它没有什么可保存的）但不会终止进程。

相反，如果我运行 Emacs.app，Emacs 会按预期运行。谁能为我解释一下这个区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:02:59.220

当您启动 .app 包时，文件夹根目录下的 Info.plist 会配置许多操作系统特定的行为。

[https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html)

您可以通过这种方式启动*任何*本机可执行文件并具有相同的行为。

# c++ - 没有“windows.h”的GetProcessIdOfThread

> ID：14530111
> 
> 赞同：1
> 
> 时间：2013-01-25T20:46:42.710
> 
> 标签：c++, windows, visual-studio, winapi

我需要手动设置线程的优先级，我使用`GetProcessIdOfThread`. 不幸的是，第 3 方库要求我构建代码，`Use MFC in a Shared DLL`以便我可以使用`afx.h`一些 dll 技巧。

如何使用`GetProcessIdOfThread`without之类的功能`windows.h`？

我试图包含`WinBase.h`，但这会抛出很多废话，编译错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:58:01.197

Provided your downstream linker settings are correct, you can simply add the function declaration to a project header file of your choosing.

Here's the original declaration in `WinBase.h`:

```
WINBASEAPI DWORD WINAPI GetProcessIdOfThread(HANDLE Thread); 
```

If you're not including `Windows.h`, then you're not going to have most of the used preprocessor macros/definitions necessary for that particular declaration. If you're linking against the static library version of the CRT, this is the equivalent definition:

```
unsigned long __stdcall GetProcessIdOfThread(void *Thread); 
```

If you're linking against the DLL version of the CRT, you'll need to prefix the declaration with `__declspec(dllimport)`:

```
__declspec(dllimport) unsigned long __stdcall GetProcessIdOfThread(void *Thread); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T21:11:16.967

我会通过将包装函数放在单独的 .c(pp) 文件中来解决这个问题：

```
 #include <windows.h>

 DWORD GetPidFromThread(HANDLE thread)
 {
     return GetProcessIdOfThread(thread);
 } 
```

您可能仍需要替换`DWORD`和`HANDLE`一些您也可以在其他文件中使用的类型[并使用 的原型制作头文件`GetPidFromThread`，但至少您可以合理地安全地隔离这些位。

# matplotlib - 用对数刻度设置刻度

> ID：14530113
> 
> 赞同：76
> 
> 时间：2013-01-25T20:46:59.297
> 
> 标签：matplotlib, plot, logarithm

似乎`set_xticks`不适用于对数比例：

```
from matplotlib import pyplot as plt
fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 200, 500])
plt.show() 
```

可能吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-25T21:43:55.587

```
import matplotlib
from matplotlib import pyplot as plt
fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 200, 500])
ax1.get_xaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter()) 
```

或者

```
ax1.get_xaxis().get_major_formatter().labelOnlyBase = False
plt.show() 
```

[![结果图](../Images/5c500d70c25b1cc81d647a40c24b71e7.png)](https://i.stack.imgur.com/stHYk.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-04T21:37:40.550

我将添加一些图并展示如何删除次要刻度：

OP：

```
from matplotlib import pyplot as plt

fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 300, 500])
plt.show() 
```

[![在此处输入图像描述](../Images/29b770cd7ee1acbb2a074706e86fa5e9.png)](https://i.stack.imgur.com/wwlsr.png)

[正如tcaswell](https://stackoverflow.com/users/380231/tcaswell)指出的那样， 要添加一些特定的刻度，您可以使用[`matplotlib.ticker.ScalarFormatter`](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.ScalarFormatter)：

```
from matplotlib import pyplot as plt
import matplotlib.ticker

fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 300, 500])
ax1.get_xaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter())
plt.show() 
```

[![在此处输入图像描述](../Images/75cd5f95c89e32842a4ce43572f06808.png)](https://i.stack.imgur.com/AIDlR.png)

要删除次要刻度，您可以使用[`matplotlib.rcParams['xtick.minor.size']`](http://matplotlib.org/users/customizing.html)：

```
from matplotlib import pyplot as plt
import matplotlib.ticker

matplotlib.rcParams['xtick.minor.size'] = 0
matplotlib.rcParams['xtick.minor.width'] = 0

fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 300, 500])
ax1.get_xaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter())

plt.show() 
```

[![在此处输入图像描述](../Images/006ad694f0365bfdd3c9829b5110b0d2.png)](https://i.stack.imgur.com/pyzs5.png)

您可以改用 [`ax1.get_xaxis().set_tick_params`](http://matplotlib.org/api/axis_api.html)，它具有相同的效果（但仅修改当前轴，并非所有未来的数字都与 不同`matplotlib.rcParams`）：

```
from matplotlib import pyplot as plt
import matplotlib.ticker

fig1, ax1 = plt.subplots()
ax1.plot([10, 100, 1000], [1,2,3])
ax1.set_xscale('log')
ax1.set_xticks([20, 300, 500])
ax1.get_xaxis().set_major_formatter(matplotlib.ticker.ScalarFormatter())

ax1.get_xaxis().set_tick_params(which='minor', size=0)
ax1.get_xaxis().set_tick_params(which='minor', width=0) 

plt.show() 
```

[![在此处输入图像描述](../Images/006ad694f0365bfdd3c9829b5110b0d2.png)](https://i.stack.imgur.com/pyzs5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-28T04:32:40.050

最好`np.geomspace`用作 xticks

```
ax = sns.histplot(arr, log_scale=True)
ax.xaxis.set_major_formatter(matplotlib.ticker.ScalarFormatter())
ax.set_xticks( np.geomspace(1, 1500 ,15).round() ) 
```

[![在此处输入图像描述](../Images/9f0d52cb6502455955ed4a949ff8a4ae.png)](https://i.stack.imgur.com/p0GkD.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-13T07:25:12.437

```
from matplotlib.ticker import ScalarFormatter, NullFormatter
for axis in [ax.xaxis]:
    axis.set_major_formatter(ScalarFormatter())
    axis.set_minor_formatter(NullFormatter()) 
```

这删除了指数符号

# javascript - 有条件地加载 jQuery 自定义脚本

> ID：14530116
> 
> 赞同：0
> 
> 时间：2013-01-25T20:47:08.497
> 
> 标签：javascript, jquery

首先，我使用的是 jQuery-1.8.2 ...

我想知道如何从其他服务器和主服务器加载自定义脚本作为备份。

就像加载 jquery 或 jquery 工具或 jquery ui... 等等。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="<?php echo $siteURL; ?>/js/jquery-1.8.2.min.js"%3E%3C/script%3E'))</script> 
```

我不确定如何为自定义脚本执行此操作...例如下面的链接。

```
<script src="//dvL-den.net/custom/random-script.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:48:58.740

第一个代码片段通过检测是否`jQuery`已创建全局对象来工作。就这样。（它假定没有其他脚本正在创建任何名为“jQuery”的全局变量，但这是一个合理的——尽管不是绝对可靠的——假设。）

您需要做同样的事情——检查您的自定义脚本中是否存在某些*唯一的*全局变量、对象或属性，如果不存在，则假定该脚本尚未被调用。它可以是任何东西，甚至`var window._this_is_a_test = true`是专门为此目的设置的奇异变量。

# c# - ASP.NET MVC 下拉列表数据不插入

> ID：14530118
> 
> 赞同：1
> 
> 时间：2013-01-25T20:47:19.443
> 
> 标签：c#, asp.net-mvc

我有两个模型，我想在数据库中插入一行，并在 DropDownList 中填充外键关系。Item 模型的数据插入没有问题，但 ManufacturerID 没有插入（它插入 null）。我找不到原因。更新：将项目上传到： http: [//mvcapplication2.codeplex.com/](http://mvcapplication2.codeplex.com/)

```
<div class="editor-label">
   @Html.LabelFor(model => model.ManufacturerID,"Manufacturer")
</div>

<div class="editor-field">
   @Html.DropDownList("ManufacturerID",string.Empty)
   @Html.ValidationMessageFor(model => model.ManufacturerID)
</div>

public class Item
{
   public int ItemID { get; set; }
   public string Serial { get; set; }
   public string ItemName { get; set; }
   public int? ManufacturerID { get; set; }
   public Manufacturer Manufacturer { get; set; }
}

public class Manufacturer
{
   public int ManufacturerID { get; set; }
   public string ManufacturerName { get; set; }
   public List<Item> Items { get; set; }
}

public ActionResult Create()
{
   ViewBag.ManufacturerID = new SelectList(db.Manufacturers, "ManufacturerID", "ManufacturerName");
   return View();
} 

[HttpPost]
public ActionResult Create(Item ıtem)
{
   if (ModelState.IsValid)
   {
      db.Items.Add(ıtem);
      db.SaveChanges();
      return RedirectToAction("Index"); 
   }

   return View(ıtem);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:54:01.937

我宁愿不在视图中使用域模型。我会创建一些特定于视图的视图模型。此外，要从操作方法（例如：下拉列表）传输数据，我将使用强类型方法，而不是动态 viewbag/viewdata 方法。

创建视图模型类

```
public class CreateItemVM
{
  public string SerialNumber { set;get;}
  public int SelectedManufactureID { set;get;}
  public List<SelectListItem> Manufacturers { set;get;}
  public CreateItemVM()
  {
     Manufacturers =new List<SelectListItem>();
  }     
} 
```

现在在您的 GET 操作方法中，创建我们的视图模型的对象，初始化相关值并发送到视图。

```
public ActionResult Create()
{
  var vm=new CreateItemVM();
  vm.Manufacturers=GetManufacturerList();
  return View(vm);
}
private List<SelectListItem> GetManufacturerList()
{
    List<SelectListItem> manuList=new List<SelectListItem>();
    manuList=(from p in  db.Manufacturers
                   select new SelectListItem { 
                                               Value=p.ID.ToString(),
                                               Text=p.Name}
              ).ToList();
    return manuList;
} 
```

现在在我们的视图中，我们的视图模型是强类型的，

```
@model CreateItemVM
@using(Html.Beginform())
{
  @Html.DropDownListfor(x=>x.SelectedManufactureID ,
                                      Model.Manufacturers,"select")
  <input type="submit" />
} 
```

最后在我们的 POST 操作方法中，我们将从发布的视图模型中读取值并将其分配为我们的域对象的属性值并保存它。选定的制造商 ID 值将在`SelectedManufactureID`我们的视图模型的属性中。

```
[HttpPost]
public ActionResult Create(CreateItemVM model)
{
  if(ModelState.IsValid)
  {
     Item domainObject=new Item();
     domainObject.ManufacturerID =model.SelectedManufactureID ;
     //set other relevant properties also
      db.Items.Add(ıtem);
      db.SaveChanges();
      return RedirectToAction("Index");
  } 
  // reload the dropdown before returning to the view
  model.Manufacturers=GetManufacturerList();
  return View(model);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:15:37.047

尝试使关系更明确，使属性虚拟并添加属性：

```
public class Item
{
    ...
    [ForeignKey("Manufacturer")]
    public int? ManufacturerID { get; set; }
    public virtual Manufacturer Manufacturer { get; set; }
}

public class Manufacturer
{
    ...
    public virtual List<Item> Items { get; set; }
} 
```

**编辑：**

您可以使用更紧密的方式来构建下拉列表：

```
@Html.DropDownListfor(x=>x.SelectedManufactureID ,
                                  ViewBag.ManufacturerID as SelectList,"Choose one") 
```

**编辑2：**

更好的方法是为视图制作一个特定的模型（称为 ViewModel）来表示数据并像@Shyju 所说的那样构建视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T23:04:13.650

发现了问题。我发送到视图的 Viewbag 应该命名为 ManufacturerID，我发送的是 Manufacturers，尽管它填充了下拉列表，但不知何故它不匹配。

# php - 如果某个 var 为真，则加入字符串 php

> ID：14530124
> 
> 赞同：0
> 
> 时间：2013-01-25T20:47:42.547
> 
> 标签：php, string

假设我们有代码

```
$somestring = "amazing text" . $something . "lol"; 
```

是否有可能仅在某些情况下以某种方式添加 $something 部分

```
$myvar == true 
```

但没有做：

```
if ($myvar) 
   $somestring = "amazing text" . $something . "lol";
else
   $somestring = "amazing text" . "lol"; 
```

像内联的东西

```
$somestring = "amazing text" . if($myvar) $something . "lol"; 
```

这会很不错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:49:58.740

```
$somestring = "amazing text".($myvar ? $something : "")."lol"; 
```

[文档](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:50:36.797

```
$somestring = "amazing text" . ($myvar?$something:'') . "lol"; 
```

# javascript - 如果输入字段在数组中找到值，请执行此操作（jQuery/Javascript）

> ID：14530126
> 
> 赞同：2
> 
> 时间：2013-01-25T20:47:56.477
> 
> 标签：javascript, jquery

我有一个包含几个输入字段的页面。

我需要找到具有值数组的字段，如果是，`.remove()`则`closest('tr')`

标记类似于此

```
<table>
  <tr>
    <td>
      <input type="text" value="this">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" value="that">
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" value="them">
    </td>
  </tr>
</table> 
```

我需要找到“这个”和“那个”，如果他们在那里，删除他们的`<tr>`容器（和他们自己），所以我最终会得到：

```
<table>
  <tr>
    <td>
      <input type="text" value="them">
    </td>
  </tr>
</table> 
```

我试过这个：

```
jQuery(document).ready(function($){
    var badfields = ['this', 'that'];
    var fieldvalue = $('input[type="text"]').val();

    if($.inArray(fieldvalue, badfields) > -1){
        $(this).closest('tr').remove();   
    }
}); 
```

但它似乎不想工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:52:06.677

您需要使用 遍历所有字段`.each`，因此如下所示：

```
$('input[type="text"]').each(function() {
    var fieldvalue = $(this).val();

    if ($.inArray(fieldvalue, badfields) > -1) {
        $(this).closest('tr').remove();   
    }
}); 
```

示例：[jsfiddle](http://jsfiddle.net/cpVrG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:54:03.520

有时使用 jQuery 可以非常简洁。jQuery 具有可用于此类目的的内容选择器：

`$("input[type=text][value=this], [value=that]").parents("tr").remove();`

由于您不一定知道`this`或`that`事先知道，因此您可以执行以下操作：

```
var badfields = ['this', 'that'];
$(badfields).each(function(i) { 
    $("input[type=text][value=" + this + "]").parents("tr").remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:54:53.863

您可以使用 each 来遍历选择器。`this`在您的`inArray`范围内不是您正在寻找的元素。

演示：http: [//jsfiddle.net/](http://jsfiddle.net/)

html:

```
<table>
 <tr>
  <td>
  <input type="text" value="this">
  </td>
 </tr>
 <tr>
  <td>
   <input type="text" value="that">
  </td>
 </tr>
 <tr>
  <td>
   <input type="text" value="them">
  </td>
 </tr>
</table> 
```

js：

```
jQuery(document).ready(function($){
 var badfields = ['this', 'that'];
    $('input[type="text"]').each(function(){
        if( $.inArray(this.value, badfields) > -1 ){
            $(this).closest('tr').remove();
        }
    });
}); 
```

# android - 在不创建位图的情况下获取 Drawable 的字节 []

> ID：14530128
> 
> 赞同：2
> 
> 时间：2013-01-25T20:47:59.057
> 
> 标签：android, bitmap, drawable

我需要将 PNG 发送到服务器。一个非常简单的解决方案是使用以下代码创建 a`Bitmap`并将其转换为 a ：`byte[]`

```
final Bitmap bitmap = BitmapFactory.decodeResource(res, R.drawable.some_image);
final ByteArrayOutputStream os = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.PNG, 100, os);
final byte[] data = os.toByteArray(); 
```

因为我想节省时间和内存，我想在不需要创建位图的情况下实现这一点。

一个想法是访问`Drawable`as a`File`但我不知道如何获得正确的路径。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:12:27.303

harism 给了我最后的提示：使用其中一种`Resoureces.openRawResource`方法。

这是我的最终解决方案：

```
private byte[] fetchImageData(Resources res) throws IOException {
    final AssetFileDescriptor raw = res.openRawResourceFd(R.drawable.some_image);
    final FileInputStream is = raw.createInputStream();

    // there are plenty of libraries around to achieve this with just one line...
    final ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    int nRead;
    final byte[] data = new byte[16384];

    while ((nRead = is.read(data, 0, data.length)) != -1) {
        buffer.write(data, 0, nRead);
    }

    buffer.flush();

    return buffer.toByteArray();
} 
```

在我的情况下，我有一个 250x200 像素的 PNG 和一个 42046 字节的文件大小。该`Bitmap`方法需要大约 500 毫秒，原始方法需要 3 毫秒。

希望有人可以使用此解决方案。

# aix - 拥有x86/x64服务器，如何在AIX6/7下在C++上最好地开发软件？

> ID：14530129
> 
> 赞同：0
> 
> 时间：2013-01-25T20:48:01.947
> 
> 标签：aix, qemu, powerpc, bochs, simics

拥有x86/x64服务器，如何在AIX6/7下在C++上最好地开发软件？有人亲自尝试过，并根据个人经验提出建议：可以有任何 IBM 的 x64 编译器，以确保 PowerPC AIX 上的可移植性编译，或者可以在 Windwos x64 下拥有虚拟机，并模拟 PowerPC x64 来安装 AIX 并在其下编译，或者可能更好地购买 AIX 的云服务来开发，我在哪里可以做？

据我所知，QEMU 不支持 AIX。你对 Simics、OVPSim 和 Bochs 或其他有什么看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:02:14.440

我不清楚这个问题，但如果您没有 AIX 包含文件，那么您将无法尝试开发可在 AIX 上编译的代码。AIX 经常抛出一些需要在包含文件中解决的奇怪问题。

至于哪个编译器，我使用 gcc。首先从 IBM 下载 gcc：[http](http://www-03.ibm.com/systems/power/software/aix/linux/toolbox/ezinstall.html) ://www-03.ibm.com/systems/power/software/aix/linux/toolbox/ezinstall.html 然后选择一个 GCC 并使用您下拉的 GCC 编译它。然后使用新的 GCC 进行开发。另一种方法是从 perzl 中删除 GCC：[http](http://www.perzl.org/aix/index.php?n=Main.Gcc) ://www.perzl.org/aix/index.php?n=Main.Gcc - 我从未尝试过，但我听说过关于它们的好消息.

希望这可以帮助

更新到亚历克斯：

是的。如前所述，IBM 提供的 gcc 可以满足您的需求，但它足以编译您自己的 gcc，这将非常稳定。我已经使用 C++ for AIX 编写了设备驱动程序，使用了 g++，并包含了 Boost 的一部分。

如果编译正确，用于 AIX 的 gcc/g++ 非常稳定和完整。除了那个项目，我还有大约 50 个在 AIX 上工作的开源包。大多数是 C 而不是 C++，但一般来说，如果你在做开源，AIX 上的 gcc 会给你带来比 xlc 更少的障碍。不是xlc的错。这正是开发人员所假设的。像 perzl 一样，我曾经将我的图像作为 installp 安装图像上传，但没有用户，所以我停止了。

最后：习惯上的警告是*不要*使用 GNU 的 ld。使用 AIX 的 ld 和 assembler (as) 但您可以找到与此相矛盾的线程。我没有认真尝试过 GNUs ld，尽管大约 6 个月前我尝试过一次，然后被跟踪了。

你可能想看看我的两个项目：

[https://github.com/pedz/aix-build-scripts](https://github.com/pedz/aix-build-scripts) - 这是一组（可能难以理解）从零开始的脚本，让您在 AIX 上滚动编译开源项目。

[https://github.com/pedz/aixbin](https://github.com/pedz/aixbin) -- 这是一组两个脚本，我现在对此有矛盾的感觉。许多开源项目（尤其是 Ruby）需要这些脚本，但其他项目（GNU Emacs）如果使用它们就会失败。

# powershell - Powershell 仅返回集群资源的值

> ID：14530142
> 
> 赞同：0
> 
> 时间：2013-01-25T20:48:56.070
> 
> 标签：powershell, windows-server-2008-r2, sql-server-agent

我正在尝试使用 powershell 评估集群服务器上 SQL 代理设置的 powershell 命令的值。我对 Powershell 非常陌生，但我们想设置一个监视器以确保我们所有的 Windows Server 2008 r2 集群都具有正确的设置。

我确实通过在 PS 提示符下使用以下内容找到了有问题的设置...

```
cluster resource 'SQL Server Agent' /prop : RestartAction 
```

问题是我希望它只返回以下输出中 Value 列下的数字（1 或 1(0x1) 都可以）。

```
Listing properties for 'SQL Server Agent':

T  Resource             Name                           Value
-- -------------------- ------------------------------ -----------------------
D  SQL Server Agent     RestartAction                  1 (0x1) 
```

因为这将是一个监视器，所以我需要能够评估 Value 是否 = 1，然后在不是时报告。如果我能让 powershell 只返回简单的值，我就可以在 T-SQL 中完成其余的设置监视器。

我一直在互联网上寻找答案，但一切都与 cmdlet 和函数有关，我想要的只是要返回的 windows 服务器值。也许它并不是真的那么简单，但我想在进行漫长的脚本冒险之前检查一下。

我感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:28:00.293

如果无法加载 failoverclusters 模块并且无需解析，则可以使用 WMI：

```
gwmi -ComputerName cluster1 -Authentication PacketPrivacy -Namespace "root\mscluster" -Class MSCluster_Resource -Filter "name LIKE 'SQL Server Agent%'" |
select -ExpandProperty RestartAction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:00:39.923

您可以使用 FailoverClusters 模块吗？

```
(Get-ClusterResource -Cluster Cluster1 -Name 'SQL Server Agent').RestartAction 
```

如果没有，字符串解析它：

```
PS> $clus = cluster /cluster:cluster1 resource 'SQL Server Agent' /prop:RestartAction
PS> $clus[10]
D  SQL Server Agent     RestartAction                  1 (0x1)    

PS> $clus[10] -replace '^.+\((.+)\)$','$1'
0x1 
```

# c++ - 如何克服 C++ 头文件的命名空间邪恶？

> ID：14530144
> 
> 赞同：6
> 
> 时间：2013-01-25T20:49:00.360
> 
> 标签：c++, header, namespaces, typedef, using

通过我的一个项目，我将进入 C++ 领域。基本上我来自 Java 背景，想知道 Java 包的概念是如何在 C++ 世界中实现的。这让我想到了命名空间的 C++ 概念。

到目前为止，我对命名空间非常满意，但是当涉及到头文件时，对于完全限定的类名、使用指令和使用声明来说，事情变得有点低效。

Herb Sutter的[这篇](http://www.gotw.ca/publications/migrating_to_namespaces.htm)文章很好地描述了这个问题。

据我了解，这一切都归结为：如果您编写头文件，请始终使用完全限定的类型名称来引用其他命名空间中的类型。

这几乎是不可接受的。由于 C++ 标头通常提供类的声明，因此最大的可读性具有最高优先级。完全限定来自不同名称空间的每种类型会产生大量视觉噪音，最终会降低标头的可读性，从而引发是否使用名称空间的问题。

尽管如此，我还是想利用 C++ 命名空间，因此对这个问题提出了一些想法：如何克服 C++ 头文件的命名空间邪恶？经过一些研究，我认为 typedefs 可能是解决这个问题的有效方法。

接下来你会发现一个 C++ 示例程序，它演示了我想如何使用公共类作用域的 typedef 从其他命名空间导入类型。该程序在语法上是正确的，并且可以在 MinGW W64 上正常编译。到目前为止一切顺利，但我不确定这种方法是否会愉快地从标题中删除 using 关键字，但会带来另一个我根本不知道的问题。就像 Herb Sutter 所描述的事情一样棘手。

那就是我恳请所有对 C++ 有透彻了解的人检查下面的代码，并让我知道这是否应该工作。谢谢你的想法。

**我的FirstClass.hpp**

```
#ifndef MYFIRSTCLASS_HPP_
#define MYFIRSTCLASS_HPP_

namespace com {
namespace company {
namespace package1 {

class MyFirstClass
{
public:
    MyFirstClass();
    ~MyFirstClass();

private:

};

} // namespace package1
} // namespace company
} // namespace com

#endif /* MYFIRSTCLASS_HPP_ */ 
```

**我的FirstClass.cpp**

```
#include "MyFirstClass.hpp"

using com::company::package1::MyFirstClass;

MyFirstClass::MyFirstClass()
{
}

MyFirstClass::~MyFirstClass()
{
} 
```

**MySecondClass.hpp**

```
#ifndef MYSECONDCLASS_HPP_
#define MYSECONDCLASS_HPP_

#include <string>
#include "MyFirstClass.hpp"

namespace com {
namespace company {
namespace package2 {

    /*
     * Do not write using-declarations in header files according to
     * Herb Sutter's Namespace Rule #2.
     *
     * using std::string; // bad
     * using com::company::package1::MyFirstClass; // bad
     */

class MySecondClass{

public:
    /*
     * Public class-scoped typedefs instead of using-declarations in
     * namespace package2\. Consequently we can avoid fully qualified
     * type names in the remainder of the class declaration. This
     * yields maximum readability and shows cleanly the types imported
     * from other namespaces.
     */
    typedef std::string String;
    typedef com::company::package1::MyFirstClass MyFirstClass;

    MySecondClass();
    ~MySecondClass();

    String getText() const; // no std::string required
    void setText(String as_text); // no std::string required

    void setMyFirstInstance(MyFirstClass anv_instance); // no com::company:: ...
    MyFirstClass getMyFirstInstance() const; // no com::company:: ...

private:
    String is_text; // no std::string required
    MyFirstClass inv_myFirstInstance; // no com::company:: ...
};

} // namespace package2
} // namespace company
} // namespace com

#endif /* MYSECONDCLASS_HPP_ */ 
```

**MySecondClass.cpp**

```
#include "MySecondClass.hpp"

/*
 * According to Herb Sutter's "A Good Long-Term Solution" it is fine
 * to write using declarations in a translation unit, as long as they
 * appear after all #includes.
 */
using com::company::package2::MySecondClass; // OK because in cpp file and
                                             // no more #includes following
MySecondClass::MySecondClass()
{
}

MySecondClass::~MySecondClass()
{
}

/*
 * As we have already imported all types through the class scoped typedefs
 * in our header file, we are now able to simply reuse the typedef types
 * in the translation unit as well. This pattern shortens all type names
 * down to a maximum of "ClassName::TypedefTypeName" in the translation unit -
 * e.g. below we can simply write "MySecondClass::String". At the same time the
 * class declaration in the header file now governs all type imports from other
 * namespaces which again enforces the DRY - Don't Repeat Yourself - principle.
 */

// Simply reuse typedefs from MySecondClass
MySecondClass::String MySecondClass::getText() const
{
    return this->is_text;
}

// Simply reuse typedefs from MySecondClass
void MySecondClass::setText(String as_text)
{
    this->is_text = as_text;
}

// Simply reuse typedefs from MySecondClass
void MySecondClass::setMyFirstInstance(MyFirstClass anv_instance)
{
    this->inv_myFirstInstance = anv_instance;
}

// Simply reuse typedefs from MySecondClass
MySecondClass::MyFirstClass MySecondClass::getMyFirstInstance() const
{
    return this->inv_myFirstInstance;
} 
```

**主文件**

```
#include <cstdio>
#include "MySecondClass.hpp"

using com::company::package2::MySecondClass; // OK because in cpp file and
                                             // no more #includes following
int main()
{
    // Again MySecondClass provides all types which are imported from
    // other namespaces and are part of its interface through public
    // class scoped typedefs
    MySecondClass *lpnv_mySecCls = new MySecondClass();

    // Again simply reuse typedefs from MySecondClass
    MySecondClass::String ls_text = "Hello World!";
    MySecondClass::MyFirstClass *lpnv_myFirClsf =
            new MySecondClass::MyFirstClass();

    lpnv_mySecCls->setMyFirstInstance(*lpnv_myFirClsf);

    lpnv_mySecCls->setText(ls_text);
    printf("Greetings: %s\n", lpnv_mySecCls->getText().c_str());

    lpnv_mySecCls->setText("Goodbye World!");
    printf("Greetings: %s\n", lpnv_mySecCls->getText().c_str());

    getchar();

    delete lpnv_myFirClsf;
    delete lpnv_mySecCls;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T20:53:43.837

通过降低复杂性来减轻痛苦。您正在将 C++ 转换为 Java。（这和尝试另一种方式一样糟糕。）

一些提示：

*   删除“com”命名空间级别。（这只是你不需要的java-ism）
*   删除“公司”命名空间，可能替换为“产品”或“库”命名空间（即 boost、Qt、OSG 等）。只需选择与您正在使用的其他库不同的东西。
*   您不需要完全声明与您所在的同一命名空间中的名称（警告：模板类，请参阅注释）。只需避免`using namespace`标题中的任何指令。（如果有的话，在 C++ 文件中小心使用。内部函数是首选。）
*   考虑命名空间别名（在函数/cpp 文件中），即`namespace bll = boost::lambda;`. 这会创建非常简洁的快捷方式。
*   [此外，通过使用pimpl](http://herbsutter.com/gotw/_100/)模式隐藏私有成员/类型，您的标头可以公开的类型更少。

PS：感谢@KillianDS 评论中的一些很好的提示（当我将它们编辑到问题中时被删除。）

# vba - Excel VBA - 将用户窗体组合框的值分配给全局变量

> ID：14530146
> 
> 赞同：2
> 
> 时间：2013-01-25T20:49:05.680
> 
> 标签：vba, variables, global, userform

我有一个带有基本组合框和命令按钮的用户窗体。当用户点击命令按钮时，我希望关闭用户窗体，并将组合框的值保存在一个变量中，该变量可由“ThisWorkbook”中包含的子例程访问。

在用户窗体代码中：

```
Public employee_position As String    
Public Sub CommandButton1_Click()

    employee_position = Me.ComboBox1.Value
    Unload Me

End Sub 
```

在“ThisWorkbook”代码中

```
Private Sub GetUserFormValue()
    Call Userform_Initialize
    EmployeePosition.Show
    MsgBox employee_position
End Sub 
```

当“GetUserFormValue()”运行时，用户窗体出现，您可以在组合框中选择一个值并按下命令按钮，但是当 MsgBox 出现时，它显示“”（无）

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T05:10:08.463

当 you 时`Unload Me`，我认为您会丢失与模块相关的所有信息（包括全局变量）。但是如果您使用 Me.Hide 而不是 Me.Unload，那么您可以在例程返回后访问表单的值。所以试试这个：

-- 用户表单代码包括：

```
Public Sub CommandButton1_Click()
    Me.Hide
End Sub 
```

-- 主要模块包括：

```
Private Sub GetUserFormValue()
    Call Userform_Initialize
    EmployeePosition.Show
    MsgBox EmployeePosition.ComboBox1.Value
    Unload EmployeePosition
End Sub 
```

我认为这应该有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-02T13:45:01.740

我遇到了同样的问题，这就是我解决它的方法：

如果主代码在工作表中，并且该变量在该工作表中声明为公共（例如在 Microsoft Excel 对象 -> Sheet1 (Sheet1) 中），则“卸载我”的结果不能从用户窗体传递到工作表代码.

所以为了解决我的问题，我插入了一个新模块，并在那里声明了我的公共变量。我什至不必将我的代码从工作表移动到模块......只需声明公共变量。

我希望这也适用于你！

安德鲁

# jquery - jQuery：取消绑定后重新绑定默认表单操作？

> ID：14530149
> 
> 赞同：0
> 
> 时间：2013-01-25T20:49:15.187
> 
> 标签：jquery, forms, unbind

在我的表单中，我绑定了一个函数来提交表单：

```
 $(document).ready(function() {
            // Bind the submission to the form
            $('form').bind('submit', onsubmit_action);
        }); 
```

在 onsubmit_action() 我取消绑定提交事件，这样人们就不能再次点击，并在事件上调用 preventDefault 因为我在做一些 AJAX 废话：

```
 function onsubmit_action(event) {
            if (initiator == "form.buttons.finish") {
                $('form').unbind('submit', onsubmit_action);
                event.preventDefault();
                sendRequest();
            } else {
                this.submit();
            }
        } 
```

函数 sendRequest() 在这里做真正的 AJAX 工作。如果 sendRequest 失败，我只需重新绑定表单，一切都很好。但如果它成功，我需要重新绑定表单，但不是到 onsubmit_action() 而是到表单的原始操作：

```
<form action="/carry_on" method="post"></form> 
```

sendRequest() 方法及其处理程序：

```
handleResponse = function(data, code, jqXHR) {

switch (data.status) {
    case "SUCCESS":
        // This doesn't work because "submit" is unbound
        $('#form-buttons-finish').click();
        // Same with this
        $('form').submit()
        break;

    case "ERROR":
        alert('error')
        break;

    case undefined:
        alert('undefined');
        break;

    default:
        alert("Some kind of horrible error occurred: " + data.status);
        break;
    }
};

sendRequest = function() {

// Poll the the server for a response
$.ajax({
    type: "POST",
    cache: "false",
    url: "/json/get_status",
    dataType: "json",
    data: { ref_token: token },
    success: handleResponse,
    error: handleError
});
}; 
```

我要做的是重新绑定表单的提交事件，但将其绑定到表单的默认操作：/carry_on 而不是 onsubmit_action 函数。我想我需要做一些类似的事情：

```
$('form').on('submit', function() {
 post(this.action, this.serialize(), null, "script");
}); 
```

或者其他的东西。（我猜测上面的语法）任何有用的想法都值得赞赏。

* * *

有其他东西干扰了我的提交。表单实际上仍然绑定到它的默认操作，因为我只解除了 onsubmit_action 的绑定。

对不起，噪音。但是，我想对我关于使用 post() 的最后一个建议的反馈。另外，如果默认操作未绑定，您会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:14:07.500

这里的代码将事件处理程序绑定到链接，没有 unbind() 而是一个简单的开关和一个[jQuery data()](http://api.jquery.com/data/)， my_process() 应该将“状态”设置为“正常”。

```
$(document).ready(function(){

    $('a').bind('click', function(e){
        var status = $(this).data('status');
        switch(status){
            case 'processing':
                e.preventDefault();
                $(this).data('status', 'processing');
                break;
            case 'normal':
                break;
            default: /* First click */
                e.preventDefault();
                my_process($(this));  
        } /* end of switch */
    });/* end of bind() */
});/* end of ready() */ 
```

示例：http: [//jsbin.com/etuqig/4/edit](http://jsbin.com/etuqig/4/edit)

## 事件处理程序的逻辑

使用 data() 函数，它检测链接状态并采取相应措施：

1.  如果是第一次触发：
    *   它触发我们的自定义函数
    *   它可以防止默认
2.  如果在我们的自定义函数工作时触发它
    *   它可以防止默认
3.  它是在我们的函数完成后触发的
    *   它什么都不做，并且发生默认行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:02:38.080

I think `.data('events')` lists all bound events on an element set. Perhaps you can get that, find the submit event handle, and cache it for later rebinding?

Found it while Googling around here: [http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/](http://james.padolsey.com/javascript/things-you-may-not-know-about-jquery/)

# c# - MOSS 2007 在 XP 机器上使用 C# 导出文档

> ID：14530153
> 
> 赞同：2
> 
> 时间：2013-01-25T20:49:34.277
> 
> 标签：c#, sharepoint, sharepoint-2007

我查看了论坛和一些博客以找到我的答案，但无法在此处发布。

我们有 MOSS 2007 和一个存储文档的库，我想运行一个客户端实用程序，它运行一天并导出当天导入的所有文档以及元数据（列名）

我不想在 VHD 或我的开发环境上安装 SharePoint 服务器，因为我不认为仅仅因为这个原因我需要拥有 Dev SharePoint 环境。我不想在我的开发 SharePoint 环境中开发它并将它交给我的 SharePoint 团队以在服务器上部署，因为我觉得我应该能够只在我的 XP 机器上做。

由于 SharePoint 对象模型可用，为什么我不能从服务器获取丢失的 dll 并编写一个小的 C# 实用程序来将文档导出到文件系统？我假设我应该能够使用 SharePoint Web 服务来做到这一点，但我的问题是我可以在我的 XP 机器上使用 SharePoint 对象模型吗？我不想让我的管理员使用 stsadm 作为脚本的一部分来完成所需的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:59:01.580

在 SharePoint 2007 中，**不支持**客户端访问（服务器）对象模型。您必须使用 Web 服务来满足您提出的要求。

此外，在没有安装 SharePoint 的情况下，无法将 SharePoint DLL 带到客户端计算机，并使用它们编译（甚至运行）代码。实现可编译性是*可能*的，但是这个过程很乏味，而且根本没有意义，因为它永远不会*在*这样的机器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:57:35.830

您不需要 SharePoint 2007 中的任何 DLL 即可使用 Web 服务。

仅获取 DLL 对开发来说很痛苦 - 您将能够编译代码，但要运行/调试，您仍然需要完整安装 SharePoint。

请注意，有专门针对 SharePoint 问题的[https://sharepoint.stackexchange.com/ 。](https://sharepoint.stackexchange.com/)

# php - 更改图像 onclick - Javascript 按钮和 AJAX？

> ID：14530154
> 
> 赞同：1
> 
> 时间：2013-01-25T20:49:46.047
> 
> 标签：php, javascript, ajax

我有一个 wordpress 安装，我有 2 个自定义字段，它们都存储图像（或者更确切地说是图像的 url）。

然后我有一个 div，我想在其中显示图像。但我想显示第一张图像，然后有一些不错的按钮可以滚动到下一张图像。

到目前为止，我的代码如下：

```
<div>
        <?php 
        $front_cover = get_post_meta($post->ID, 'front_cover', true);
        $back_cover = get_post_meta($post->ID, 'back_cover', true);
        $artwork = $front_cover;

        if ($back_cover === '') {
            echo '<img src="'.$artwork.'" />';
        } else {
            echo '<img src="'.$artwork.'" />';

        ?>
                    <div class="artwork_controls">
                        <a href="#" class="sliderBtnPrev">Previous</a>
                        <a href="#" class="sliderBtnNext">Next</a>
                        <span class="sliderPagination">1 of 3</span>
                    </div>

        </div> 
<?php } ?> 
```

如你看到的。我的 If 语句检查 back_cover 是否有任何内容......如果没有，它只显示 front_cover。如果 back_cover 确实有内容，它应该显示封面，然后是用户单击以加载封底的按钮。

我的想法是我可以获得“上一个”和“下一个”按钮来动态更改 $artwork 变量，但我不相信这是可能的，因为 PHP 已经被处理了？

这段代码可能完全错误，但希望你能看到我想要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:14:06.933

一种方法是在单击“上一个”和“下一个”按钮时进行 AJAX 调用并获取图像。但是，您可以将所有图像放入最终的 html 中，然后使用 javascript 和一些 css 完成所有其余操作。

因此，如果您只是将这两个图像放在 html 中，假设它们具有“正面图像”和“背面图像”的 ID，那么您就有了

```
<img id="front-image" src="imgs/front-cover.jpg"/>
<img id="back-image" src="imgs/back-cover.jpg" style="visiblity: hidden"/> 
```

注意`style="visibility: hidden"`. 从那时起，您可以在`onClick`“上一个”和“下一个”按钮上设置处理程序，它们只是设置两个图像的可见性。

```
clickHandlerPrev() {
    document.querySelector("#front-image").style.visibility = "";
    document.querySelector("#back-image").style.visibility = "hidden";
}

clickHandlerNext() {
    document.querySelector("#front-image").style.visibility = "hidden";
    document.querySelector("#back-image").style.visibility = "";
} 
```

然后你的按钮看起来像这样

```
<a href="#" class="sliderBtnPrev" onclick="clickHandlerPrev">Previous</a>
<a href="#" class="sliderBtnNext" onclick="clickHandlerNext">Next</a> 
```

虽然如果我的目标正确，我认为你的按钮最好简单地命名为“封面”和“封底”，因为你没有迭代很多图像，而只是切换这两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:15:00.200

```
<div>
    <?php $front_cover = get_post_meta($post->ID, 'front_cover', true); ?>
    <?php $back_cover = get_post_meta($post->ID, 'back_cover', true); ?>
    <?php $artwork = $front_cover; ?>

    <?php if ($back_cover === '') { ?>
        <img src="<?php echo $artwork; ?>" />
    <?php } else { ?>

        <img id="imgA" src="<?php echo $artwork; ?>" />
        <img id="imgB" src="<?php echo $back_cover; ?>" style="display:none;"/>
        <div class="artwork_controls">
            <span class="sliderBtnPrev" onClick="document.getElementById('imgA').style.display='none';document.getElementById('imgB').style.display='';">Show B</span>
            <span class="sliderBtnNext" onClick="document.getElementById('imgB').style.display='none';document.getElementById('imgA').style.display='';">Show A</span>
        </div>

    <?php } ?>
</div> 
```

# c# - 后台线程/进程

> ID：14530157
> 
> 赞同：2
> 
> 时间：2013-01-25T20:49:56.880
> 
> 标签：c#, asp.net, multithreading, asynchronous, backgroundworker

我有一个允许用户上传文件的应用程序。上传完成后，必须在服务器上完成许多处理步骤（解压缩、存储、验证等），因此稍后会在一切完成后通过电子邮件通知用户。

我见过一些例子，其中 System.ComponentModel 中的 BackGroundWorker 用于允许在另一个线程中完成异步工作。但是，似乎它们会导致用户最终得到响应。在我们的例子中，不需要 Web 响应 - 代码最多可能需要 30 分钟才能完成。

有没有另一种方法来启动一个完全独立的线程/进程，即使在用户完全关闭他们的会话后也会继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:53:53.217

编写将在 ASP.NET 服务器上运行的 Windows 服务。以可以接受和排队作业请求的方式对其进行架构。队列将允许您在 ThreadPool 中创建最佳线程数，以同时执行排队作业的子集。使用 .NET Remoting 或 WCF 将作业提交到 Windows 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:55:50.170

如果不需要立即响应，您希望卸载到其他进程来完成繁重的工作。我会将其转储到数据库、文件夹或发布到消息队列中。工作进程（Windows 服务？）将处理文件，从数据库、文件系统或队列中读取。工作完成后，如果您的工作进程需要知道何时完成，它可以调用您的 ASP 应用程序（webhook 样式）。只是一个建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:55:52.400

如果处理可能需要长达 30 分钟，我建议跳过使用 Web 工作进程中的后台线程并改用 Windows 服务之类的东西，或者使用 Windows 调度程序按计划运行控制台应用程序。

上传文件后，您可以将其添加到某种队列中（在数据库中，或者如果您喜欢冒险，可以使用[RabbitMQ等消息队列系统）。](http://www.rabbitmq.org/ "兔MQ")然后您的 Web 请求可以立即返回并让用户知道文件正在处理中，后台服务将从队列中取出项目并继续处理，完成后通过电子邮件发送给用户。

# java - Java - 可以在运行时创建一个没有字节码的新类吗？

> ID：14530161
> 
> 赞同：0
> 
> 时间：2013-01-25T20:50:08.730
> 
> 标签：java

我想知道是否可以在没有字节码操作的情况下在运行时创建一个新的类文件。（例如 ASM、BCEL 等）。我正在考虑将 txt 文件转换为 .java 文件，然后进行编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:54:04.133

您可以创建一个 .java 文件并在运行时编译它。例如：

```
String fileToCompile = "test" + java.io.File.separator +"MyClass.java";
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
int compilationResult = compiler.run(null, null, null, fileToCompile);
    if(compilationResult == 0){
        System.out.println("Compilation is successful");
    }else{
        System.out.println("Compilation Failed");
    }
} 
```

不过，这仅在运行时环境是 JDK 时才有效。您当然可以使用 javac 函数来处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:53:02.827

看看[Javassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)。

> 与其他类似的字节码编辑器不同，Javassist 提供了两个级别的 API：源代码级别和字节码级别。如果用户使用源级 API，他们可以在不了解 Java 字节码规范的情况下编辑类文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:54:13.523

考虑使用[动态代理](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)。从文档中：

> 动态代理类（以下简称为代理类）是一个实现类创建时在运行时指定的接口列表的类，其行为如下所述。代理接口就是这样一个由代理类实现的接口。代理实例是代理类的实例。每个代理实例都有一个关联的调用处理程序对象，该对象实现了接口 InvocationHandler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T21:01:00.060

是的，这是可能的，但这实际上取决于您选择的技术。它可能不涉及编写实际的 Java 代码。例如，您可以编写任何一种在 JVM 上运行的脚本语言：Groovy、Scala、Clojure、Jython、jRuby、Javascript，并且这些可以编译为字节码。Groovy 是最接近 Java 语法的东西。这里最大的优势是它们可以被修改和重新运行，而无需重新加载它们的字节码，因为它们是被解释的。但是大多数选项都有字节码编译以提高速度。

# asp.net - 如何为 VS 解决方案（ASP.NET）安装 JuiceUI？

> ID：14530163
> 
> 赞同：0
> 
> 时间：2013-01-25T20:50:14.310
> 
> 标签：asp.net

问题是我无法为 VS 解决方案安装[JuiceUI 。](http://juiceui.com/)

我的行动：

1) 使用 Visual Studio 2010 创建一个新的 WebApplication。 2) 通过 Nudget 安装 JuiceUI。3) 之后，我在 Web.config 中找到以下字符串：

```
 <pages>
      <controls>
...
        <add assembly="JuiceUI" namespace="Juice" tagPrefix="juice" />
      </controls>
    </pages> 
```

4）但是“果汁”不起作用。我猜这是因为 bin 文件夹中缺少 juice.dll 或类似的东西。

但是我在哪里可以找到这个 dll 以及为什么它没有被自动复制？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:31:24.503

我敢肯定，详细说明什么不起作用会帮助某人回答这个问题。您选择在项目上安装它的路径是正确的。

你也可以考虑使用一个名为[Brew的新分支](http://shellscape.org/#brew)

# php - 在数组中打开和关闭 div

> ID：14530166
> 
> 赞同：0
> 
> 时间：2013-01-25T20:50:25.463
> 
> 标签：php, mysql, html

我正在显示来自 mysql 的列表。(http://www.jetcleandrives.co.uk/Areas_Covered.php)

这是代码，

```
if ($rows['area_shire'] != $area_shire && isset ($rows['area_shire'])){   
        $area_shire = $rows['area_shire'];
            $area_shire_url = str_replace(' ', '_', $area_shire);
        echo '<div class="area_name"><h2><a href=Driveway_Cleaning_'.$area_shire_url.'>'.$area_shire.'</a></h2></div><br>';

    }  

    echo '<div class "areas_column">';     
    if ($rows['area_district'] != $area_district && isset ($rows['area_district'])){
        $area_district = $rows['area_district'];
        $area_district_url = str_replace(' ', '_', $area_district);
        echo '<div class="area_name"><h3><a href=Driveway_Cleaning_'.$area_district_url.'>'.$area_district.'</a></h3></div><br>';

    }  

    if ($rows['area_name'] != $area_name &&  isset ($rows['area_name'])){
        $area_name = $rows['area_name'];
        $area_name_url = str_replace(' ', '_', $area_name);
        echo '<div class="area_name"><a href=Driveway_Cleaning_'.$area_name_url.'>'.$area_name.'</a></div><br>'; 
```

但是我不希望它是一个长的垂直列表。我希望每个地区（例如伯明翰、桑德韦尔等）使用 div 和 float:left 在右侧开始一个新的“列”但是我不知道从哪里开始和关闭 div。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:59:00.677

尝试这样的事情：

```
$area_district = null; // set this to null initially, so you can identify the first iteration
if ($rows['area_shire'] != $area_shire && isset ($rows['area_shire'])){   
    $area_shire = $rows['area_shire'];
    $area_shire_url = str_replace(' ', '_', $area_shire);
    echo '<div class="area_name"><h2><a href=Driveway_Cleaning_'.$area_shire_url.'>'.$area_shire.'</a></h2></div><br>';

}  

if ($rows['area_district'] != $area_district && isset ($rows['area_district'])){
    if($area_district!==null) echo '</div>'; // only close the previous div if this isn't the first
    echo '<div class "areas_column">'; // open the div only when the district changes
    $area_district = $rows['area_district'];
    $area_district_url = str_replace(' ', '_', $area_district);
    echo '<div class="area_name"><h3><a href=Driveway_Cleaning_'.$area_district_url.'>'.$area_district.'</a></h3></div><br>';

}  

if ($rows['area_name'] != $area_name &&  isset ($rows['area_name'])){
    $area_name = $rows['area_name'];
    $area_name_url = str_replace(' ', '_', $area_name);
    echo '<div class="area_name"><a href=Driveway_Cleaning_'.$area_name_url.'>'.$area_name.'</a></div><br>';
}
echo '</div>'; // close the last div 
```

# android - 将 ArrayList 存储为持久数据 android

> ID：14530174
> 
> 赞同：1
> 
> 时间：2013-01-25T20:51:00.550
> 
> 标签：android, arraylist, sharedpreferences

我有一个数组列表。我需要将它们存储为持久数据。我怎样才能在android中实现这一点？共享偏好有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:13:57.243

我同意codeMagic。这取决于数据是什么以及您将如何处理它。

以下是在什么时间使用哪个存储选项的简要说明：

**共享首选项：**这些基本上适用于存储应用程序首选项和其他少量数据。SharedPreferences 是一种键/值存储，您可以在其中将数据保存在某个键下。要从存储中读取数据，您必须知道数据的键。因此，读取数据变得容易。但是对于大型数据集，这可能会变得有点困难，因为您必须为数据集中的每个键定义一个唯一键。例如：在 SharedPreferences 中存储用户登录的会话密钥。

**内部存储**：这有利于存储用户不需要访问的应用程序数据。可能适用于存储日志或应用程序将创建/更新/删除的任何内容。

**SQLite**：大量相同的结构化数据应存储在 SQLite 数据库中，因为数据库是为此类数据设计的。由于数据是由数据库结构化和管理的，因此可以使用 SQL 等查询语言对其进行查询以获取符合特定条件的数据子集。在这里搜索变得很容易。虽然 SQLite 的扩展性可能不如专用数据库那么大，但对于较小的应用程序（如 Android 应用程序）来说，它非常快速和方便。例如：存储您的列表视图项目或存储食谱应用程序的食谱。

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:57:18.427

有几种方法取决于数据是什么以及您打算用它做什么。SharedPrefs、SQLite DB 和内部存储都是可选的。但就像我说的，这取决于你要做什么。**[文档](http://developer.android.com/guide/topics/data/data-storage.html)**解释了所有这些，您需要决定什么最适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:23:07.773

我认为您无法以简单的方式（即使无论如何）将**SharedPreferences**用于**ArrayList ，因为**[SharedPreference.Editor](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)类中没有某些`putObject()`或`putSerializable()`方法。

但是还有其他几个[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。

# php - 当 (column)Rank 为 x 时，如何删除任何早于 x 天的 SQL 行？

> ID：14530176
> 
> 赞同：0
> 
> 时间：2013-01-25T20:51:10.140
> 
> 标签：php, sql, rank

我建立了一个等级系统，其中 5 是管理员，4 是终身捐助者，3 是捐助者，2 是广告商，1 是用户。
我无法弄清楚如何刷新以下所有行：
-一周大，如果他们是用户（排名：1）
-两周大，如果他们是广告客户（排名：2）
-2 个月大，如果他们是捐赠者（排名：3 )

同时将所有管理员和终身捐助者留在表中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:56:43.827

像这样的东西可以解决问题：

```
DELETE 
FROM Test
WHERE (TestDate < NOW() - INTERVAL 1 WEEK AND Rank = 1) 
      OR (TestDate < NOW() - INTERVAL 2 WEEK AND Rank = 2) 
      OR (TestDate < NOW() - INTERVAL 2 MONTH AND Rank = 3) 
```

还没有测试。在运行此查询以测试它是否删除了正确的数据而不是**DELETE**之前，请放置**SELECT**并查看出现了哪些行，然后运行此查询。

```
SELECT * FROM Test 
WHERE (TestDate < NOW() - INTERVAL 1 WEEK AND Rank=1)
  OR (TestDate < NOW() - INTERVAL 2 WEEK AND Rank = 2)
  OR (TestDate < NOW() - INTERVAL 2 MONTH AND Rank = 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:02:54.897

我可能会使用三个单独的查询来查询数据库并删除行。

第一个查询 - 排名 1（用户）：

```
$query = "DELETE FROM table WHERE rank=1 AND time > UNIX_TIMESTAMP()-604800"; 
```

第二个查询 - 排名 2（广告商）：

```
$query = "DELETE FROM table WHERE rank=2 AND time > UNIX_TIMESTAMP()-1209600"; 
```

第三个查询 - 等级 3（捐赠者）：

```
$query = "DELETE FROM table WHERE rank=3 AND time > UNIX_TIMESTAMP()-2592000"; 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:40:15.730

您需要在表中放置一列作为值 datetime 并使用以下 wuery 根据条件删除记录

```
CREATE TABLE IF NOT EXISTS `test` (
`id` int(10) NOT NULL AUTO_INCREMENT,
`rank` int(10) NOT NULL,
`timestamp` datetime NOT NULL,
 PRIMARY KEY (`id`)
 )  

DElETE 
FROM test
WHERE (week( `timestamp` ) >= 1 AND Rank = 1) 
  OR (week( `timestamp` ) >= 2  AND Rank = 2) 
  OR (week( `timestamp` ) >= 4  AND Rank = 3) 
```

# sql - 基于另一个表对多条记录进行分组和更新sql

> ID：14530179
> 
> 赞同：1
> 
> 时间：2013-01-25T20:51:21.177
> 
> 标签：sql, sql-server-2008, tsql

我一直试图找出一种方法来对字段“因子”上的整个表执行更新。

“因子”由具有相同“位置”和“日期”的重复记录的数量确定。

有一个因子计算表：

```
Location - Count - Factor
   X     -   1    -   1.0
   X     -   2    -   0.8
   X     -   3+    -  0.5 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:53:54.073

尝试这个：

```
UPDATE A
SET Factor = CASE WHEN B.N = 1 THEN 1.0
             WHEN B.N = 2 THEN 0.8
             WHEN B.N >= 3 THEN 0.5 END
FROM YourTable A
INNER JOIN (SELECT Location, COUNT(*) N
            FROM YourTable
            GROUP BY Location) B
    ON A.Location = B.Location 
```

另一种方式：

```
;WITH CTE AS
(
    SELECT *, COUNT(*) OVER(PARTITION BY Location) N
    FROM YourTable
)
UPDATE CTE
SET Factor = CASE WHEN N = 1 THEN 1.0
             WHEN N = 2 THEN 0.8
             WHEN N >= 3 THEN 0.5 END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:58:28.663

使用带有 OVER 子句的派生表

```
UPDATE x
SET x.Factor = x.NewFactor
FROM (   
      SELECT Factor,
             CASE COUNT(*) OVER (PARTITION BY Location, [date]) 
               WHEN 1 THEN 1.0 
               WHEN 2 THEN 0.8 
               ELSE 0.5 END AS NewFactor               
      FROM dbo.test30
      ) x 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/76687/1/1)上的演示[](http://sqlfiddle.com/#!3/76687/1/1)

# html5boilerplate - H5BP Ant 构建脚本 - 事件处理程序名称更新

> ID：14530180
> 
> 赞同：0
> 
> 时间：2013-01-25T20:51:26.200
> 
> 标签：html5boilerplate

我读过 H5BP Ant 构建脚本“更新您的 HTML 以引用 [已编译] 超优化 CSS + JS 文件”。这是否包括 HTML 中对名称已被缩小过程更改的事件处理程序的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:08:34.973

看来我可以通过在使用 ADVANCED_OPTIMIZATIONS 标志时从脚本中导出名称（如[https://developers.google.com/closure/compiler/docs/api-tutorial3#export中所述）来完成此操作。](https://developers.google.com/closure/compiler/docs/api-tutorial3#export)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:57:07.853

Ant 构建脚本对您的内联事件处理程序一无所知。它的构建着眼于使用像 jQuery 这样的库来不显眼地处理事件绑定的常用方法，因此即使闭包编译器提供了一些导出，您也必须自己调整构建脚本以执行一些重写内联事件处理程序的任务。

# php - 上传表单错误

> ID：14530188
> 
> 赞同：0
> 
> 时间：2013-01-25T20:52:14.850
> 
> 标签：php, forms, file-upload, upload

您好，我复制了 1 个带有上传进度条
的上传文件源代码，如果我删除 foreach 并制作 1 个文件进行上传
，但我想在我的表单中有 5 个文件字段，
这是我现在的代码：

```
$upload_directory = "$fUllp/";
//5M
$allowsize = 5242880;
foreach($_FILES as $file) {
$n = $file['name'];
$s = $file['size'];
$t = $file['type'];
$tmp = $file['tmp_name'];
if (is_array($n)) {
  $c = count($n);
  for ($i=0; $i < $c; $i++) {
    if($s <= $allowsize){
    $filename = explode('.',$n);
    $filetype = $filename[1];

    if(!isset($filename[2])){
        $glast = mysql_query("select id from up_guest order by id desc limit 1");
        $flast = mysql_fetch_array($glast);
        if($flast['id'] == '' or $flast['id'] <= 0){
            $flast = 1;
        }
        else{
            $flast = $flast['id'] + 1;
        }
        $time = time();
        $filename = $flast.'.'.$filename[1];

        if(in_array($t,$allow)){

            if (move_uploaded_file($tmp, $upload_directory . $filename)) {
                //insert db
                //img full
                $fullurl = $siteurl.'/'.$upload_directory.$filename;
                //for sql
                $fullurlsq = '/'.$upload_directory.$filename;
                $fullurlsqt = '/'.$upload_directory.'t/'.$filename;
                //img resize
                $image = new SimpleImage();
                $image->load($upload_directory.'/'.$filename);
                $image->resizeToHeight(100);
                $image->resizeToWidth(100);
                $image->save($upload_directory.'/t/'.$filename);
                //img koochik
                $imgt = $upload_directory.'/t/'.$filename;
                mysql_query("insert into up_guest(name,name_t,type,time,ip) values('$fullurlsq','$fullurlsqt','$filetype',$time,'$ip')");
                print '<br><div class="system-message"><ul class="index_info"><li>توضیح: <span>فایل با موفقیت آپلود شد<bR /><div class="thumb_img">';
                print "<a href=\"$fullurl\" onclick=\"window.open(this.href,\"_blank\");return false;\"><img src=\"$imgt\"></a></div>";
                //tbl1
                print '<table border="0" width="100%" cellspacing="0" cellpadding="0" class="up_box_input"><tbody><tr><td class="btitle">لینک تصویر کوچک</td><td class="all_box_link"><textarea readonly="readonly" rows="2" cols="40" class="up_input" tabindex="1" onclick="this.select();">';
                print "[url=$siteurl/][img]$imgt [/img][/url]</textarea></td></tr></tbody></table>";
                //tbl2
                print 'echo file detaid for user';

            }//file upload she
            else{
                echo '<div class="site_error_msg">cant up</div>';
            }
        }//age allow bood un file
        else{
            echo '<div class="site_error_msg">extention not allowed</div>';
        }
    }//if noghte vasatesh nabood
    else{
        echo '<div class="site_error_msg">you not must have . in file name</div>';
    }
}//if sizesh mojaz bood
else{
    echo '<div class="site_error_msg">uploaded file is more than 5 MB</div>';
}//end my code 
```

但如果
我的意思是它在第一次运行

```
if(in_array($t,$allow)){ 
```

并运行这个

```
else{
    echo '<div class="site_error_msg">uploaded file is more than 5 MB</div>';
}//end my code 
```

所以这些行肯定有问题，而且它设置的文件名大小不正确

```
foreach($_FILES as $file) {
$n = $file['name'];
$s = $file['size'];
$t = $file['type'];
$tmp = $file['tmp_name'];
if (is_array($n)) {
  $c = count($n);
  for ($i=0; $i < $c; $i++) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:01:02.333

好的，找到我的 nooblish 问题！我必须像这样在 For 下输入我的文件大小和名称

```
foreach($_FILES as $file) {
$n = $file['name'];
$s = $file['size'];
$t = $file['type'];
$tmp = $file['tmp_name'];
if (is_array($n)) {
  $c = count($n);
  for ($i=0; $i < $c; $i++) {
      $ss = $s[$i];
      $tmpp = $tmp[$i];
      $nn = $n[$i];
      $tt = $t[$i];
    if($ss <= $allowsize){
    $filename = explode('.',$nn);
    $filetype = $filename[1];

    if(!isset($filename[2])){
        $glast = mysql_query("select id from up_guest order by id desc limit 1");
        $flast = mysql_fetch_array($glast);
        if($flast['id'] == '' or $flast['id'] <= 0){
            $flast = 1;
        }
        else{
            $flast = $flast['id'] + 1;
        }
        $time = time();
        $filename = $flast.'.'.$filename[1];

        if(in_array($tt,$allow)){ 
```

谢谢大家 :D

# networking - 无法让我的路由器将端口转发到我的树莓派网络服务器

> ID：14530190
> 
> 赞同：0
> 
> 时间：2013-01-25T20:52:20.217
> 
> 标签：networking, nginx, port, raspberry-pi, portforwarding

我正在设置一个树莓派用作网络服务器，但我似乎无法让端口转发从我的路由器工作到我的 pi。我已将路由器设置为端口 1 - 9999 的所有端口，只是为了查看它是否有效，但我无法使用公共 IP 地址 ssh 到我的 pi 上，只有我的本地地址有效，而且我也无法访问我的 nginx 网络服务器在我的圆周率上。我的 pi 和路由器都有一个静态 ip 地址，我坚决转发到树莓派上的正确 ip。我有一个 d-link DSL2680 路由器，想知道是否有其他人遇到过同样的问题或知道我可能遗漏的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:25:31.967

如果连接来自公共接口，大多数路由器只会触发端口转发。您需要尝试从网络外部 ssh'ing。不仅使用公共 IP 地址，还使用需要通过路由器上的公共接口进入网络的设备。

# html - 触摸右上角的用户名

> ID：14530191
> 
> 赞同：-1
> 
> 时间：2013-01-25T20:52:20.380
> 
> 标签：html, css, twitter-bootstrap

如何使此文本触摸屏幕的右侧......我给了边距，但它没有移动到右侧......希望我的用户 nmae 处于正确的极端

[http://jsfiddle.net/KthYy/embedded/result/](http://jsfiddle.net/KthYy/embedded/result/)

用户信息：test1@defie.co

```
<div class="companyLogo">
                <a class="brand" href="http://intra.defie.co/%3C?=%20HOME_URL%20;?%3E" style="">
                Company LOGO
                </a>
                <div class="nav-collapse collapse"></div><!--/.nav-collapse -->
            </div>

            <div class="login-container">

                <span class="userInfo"><span class="mailId">User info: test1@defie.co</span><span><a href="http://intra.defie.co/Account/logout">[LOG OUT]</a></span></span>
                        </div>          <div class="clear"></div>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:00:51.360

您在 CSS 规则中为您的 userInfo SPAN 设置了 133 像素的右填充：

```
padding-right: 133px; 
```

这会阻止它显示在最右边。删除该声明或将其设置为 0。您可能还希望为您的登录容器将 text-align 属性设置为“right”：

```
.login-container {text-align:right;} 
```

你是这么想的？

干杯!

# ios - 如何在 TableView 中嵌入 CollectionView？

> ID：14530196
> 
> 赞同：1
> 
> 时间：2013-01-25T20:52:53.413
> 
> 标签：ios, header, tableview, collectionview

我`UICollectionView`在表格的*标题*中放了一个，但是当我测试它时，我看到的只是一个黑色矩形，我的*收藏*应该在哪里。我必须做什么才能看到它？我做了一些研究并找到了一种名为 的方法`viewForHeaderInSection`，但我没有找到任何解释，所以我什至不知道这是否是我需要的或如何处理它。

另一个问题是我在哪里放置*集合*的相关方法？（新文件？）

如果它很重要，那就是在 iPad 屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:21:19.880

我遇到了同样的问题...在情节提要的视图中选择实际的集合视图。检查背景颜色。如果您将其更改为“清除颜色”，您可能会看到您的收藏视图！在测试时，要查看您的“项目”，请选择它，并将其颜色设置为白色，或视图背景颜色以外的其他颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:06:36.300

In your `UICollectionView` `Class` do something like the method below to see which item was selected and then you can do whatever you want with selected object.

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
        [self performSelector:@selector(singleTapOnCell:) withObject:indexPath];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:42:56.733

在您的 CellForRowAtIndexPath 中，添加类似这样的内容。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString* CellIdentifier = @"Cell";

UITableViewCell* cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
LiteratureScrollViewController* cv = [self.storyboard instantiateViewControllerWithIdentifier:@"collectionViewID"];

[cell.contentView addSubview:cv.view];
[cell setSelectionStyle:UITableViewCellSelectionStyleNone];
[cv didMoveToParentViewController:self];

return cell; 
```

}

# eclipse-plugin - Eclipse Jobs API：如何跟踪另一个作业安排的作业的进度？

> ID：14530200
> 
> 赞同：3
> 
> 时间：2013-01-25T20:53:16.333
> 
> 标签：eclipse-plugin, progress, jobs, progressmonitor

为安排和加入另一个 Eclipse 作业的 Eclipse 作业使用进度监视器的正确方法是什么？我希望子任务与主要任务相关联。

理想情况下，我希望能够告诉子任务使用`SubProgressMonitor`从主监视器创建的运行，但是我看不到这样做的方法。我查看了该`Job.setProgressGroup(..., ...)`方法，但文档表明该组应该使用`IJobManager.createProgressGroup()`.

这是上下文的代码片段：

```
@Override
protected IStatus run(final IProgressMonitor monitor) {
    try {
        monitor.beginTask("My Job A", 100);

        MyJobB subtask = new MyJobB();

        // how how should subtask's progress be tracked?
        subtask.schedule();
        subtask.join();

        return Status.OK_STATUS;

    } catch (Exception ex) {
        // return error status
    } finally {
        monitor.done();                 
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T22:37:34.367

要回答原始问题 - 您可以这样做：

```
public class MyJobA extends Job {

    private IProgressMonitor pGroup = Job.getJobManager().createProgressGroup();

    public MyJobA() {
        super("My Job A");
        setProgressGroup(pGroup, 50);
    }

    @Override
    protected IStatus run(IProgressMonitor monitor) {
        MyJobB subtask = new MyJobB();
        subtask.setProgressGroup(pGroup, 50);

        pGroup.beginTask("My Jobs", 100);
        try {
            monitor.beginTask("My Job A", 10);
            try {
                // do work
                monitor.worked(...);
            } finally {
                monitor.done();
            }

            subtask.schedule();
            subtask.join();
        } finally {
            pGroup.done();
        }
        return Status.OK_STATUS;
    }
} 
```

如果您在外部创建进度组，它会更优雅一点：

```
 IProgressMonitor group = Job.getJobManager().createProgressGroup();
    try {
        group.beginTask("My Tasks", 200);

        MyJobB b = new MyJobB();
        b.setProgressGroup(group, 100);
        b.schedule();

        MyJobC c = new MyJobC();
        c.setProgressGroup(group, 100);
        c.schedule();

        b.join();
        c.join();
    } finally {
        group.done();
    } 
```

请注意，尚未计划的作业将显示为“已完成”：

![进度视图](../Images/3b9535a537a85826bc0b68a4bc48f357.png)

如果可能的话，我会考虑合并两个 Jobs 并使用[SubMonitor](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FSubMonitor.html "子监视器 JavaDoc")。

# javascript - 为什么我无法访问设置？

> ID：14530201
> 
> 赞同：0
> 
> 时间：2013-01-25T20:53:17.517
> 
> 标签：javascript, jquery, scope

我需要一些范围帮助。下面是我的代码（简化）。在 buildDropdownOptions 内的 ajax 调用成功事件内的函数内...（满嘴）。

我正在尝试在与 buildDropdownOptions 处于同一级别的设置对象中设置某些内容，但我无法访问它（可能是因为 AJAX 调用？）。

有谁知道如何让这个东西工作？

```
var settings = {},
buildDropdownOptions = function () {

                    var success = function (clinics, settings) {
                        var dropdownOptions = [];

                        $.each(clinics, function (i, clinic) {
                            dropdownOptions.push('<option value="' + clinic.ClinicId + '">' + clinic.Name + '</option>');
                        });

                        settings.dropdown.options = dropdownOptions;
                    };

                    $.ajax({
                        'url': settings.dropdown.source,
                        'success': function (clinics, settings) {
                            success(clinics);
                        }
                    });
                }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T20:56:14.437

通过包含`settings`作为函数参数，您隐藏了更高级别的`settings`变量。

实际上，在这种情况下，您将其隐藏在`undefined`.

删除`settings`参数列表中提到的，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:55:43.793

您似乎无法访问 settings.dropdown 属性。尝试将代码的第一行更改为：

```
var settings = {dropdown: {}}: 
```

# vba - 无法在 MS Access 中转到连续表单上的特定记录

> ID：14530202
> 
> 赞同：0
> 
> 时间：2013-01-25T20:53:27.733
> 
> 标签：vba, ms-access, ms-access-2010

搜索和搜索，找不到解决方案。我有一个包含许多连续表单子表单的表单。当我在其中一个子窗体上更改值时，比如说 FIELD_A，我在其他几个子窗体上运行计算，然后焦点返回到 FIELD_A。然而，在计算过程中，父表格的更新发生了，并且需要发生。因此，当我将焦点返回到原始子表单时，子表单上的第一条记录具有焦点。然后我需要去看我正在制作的唱片。

我尝试了几种选择，但没有任何效果。但是，如果我在代码中移动到指定记录的行设置了一个 DEBUG 断点，然后从该行物理运行代码，它就可以工作！我试过在那里设置等待时间，但无济于事。

这是代码片段：

```
Call common.CalculateAllLoadTotals _
    (Me, Me.AffiliateID, Me.ClientID, Me.FacilityID, Me.ProposalRevision)

Me.Recordset.FindFirst "[AffiliateID] = '" & Me.AffiliateID & "'" & _
                 " AND [ClientID] = " & Me.ClientID & _
                 " AND [FacilityID] = " & Me.FacilityID & _
                 " AND [ProposalRevision] = " & Me.ProposalRevision & _
                 " AND [EquipmentID] = " & currItemID 
```

我也试过这个：

```
dim currRecord as Long
currRecord = Me.CurrentRecord

' >>> REST OF CODE HERE <<<

Call common.CalculateAllLoadTotals _
    (Me, Me.AffiliateID, Me.ClientID, Me.FacilityID, Me.ProposalRevision)

Me.Form.Recordset.Move = currRecord 
```

正如我所说，如果我通过调试暂停代码然后继续执行，则代码可以工作（任何一个）。奇怪的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-19T19:40:27.613

我怀疑您正在更新父表单下的记录集。这会导致父表单自动重新查询，因此子表单位置返回到第一条记录。解决方案是更新父窗体上的控件：

```
Me.Parent!Controlname = XXXX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T19:54:56.530

抱歉，这不是一个完整的答案，但评论很多。关于您的第一个解决方案-我建议您尝试 Me.Recordset.Requery 以在不移动位置的情况下刷新主窗体中的当前记录。

关于您的第二个选项-我建议您查看书签-在更新记住书签之前，进行一些计算，然后将位置移动到保存的书签。像这样的东西-

```
 Dim rs As DAO.Recordset

  Set rs = Me.RecordsetClone
  rs.FindFirst "[MyPK]=" & Me!cmbFindByPK
  If Not rs.NoMatch Then
     If Me.Dirty Then
        Me.Dirty = False
     End If
     Me.Bookmark = rs.Bookmark
  End If
  Set rs = Nothing 
```

取自这里[为什么要克隆 MS-Access 记录集？](https://stackoverflow.com/questions/2366358/why-clone-an-ms-access-recordset)

# iphone - 在地图上显示用户位置并停止位置

> ID：14530209
> 
> 赞同：1
> 
> 时间：2013-01-25T20:54:02.687
> 
> 标签：iphone, ios, objective-c, mapkit, core-location

这是我的目标：每次他打开具有 MapView 的视图然后停止位置以节省电池时，我都必须在地图上显示用户位置和他的地址。到目前为止我可以做到，但如果用户移动到另一个区域并进入视图（离开后），位置不会改变。

这是我的代码：

```
- (void)viewDidLoad
{
    mapView.mapType = MKMapTypeStandard;
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    [super viewDidLoad];

}

- (void)viewDidAppear:(BOOL)animated{

    if(!self.locationManager){
        self.locationManager = [[CLLocationManager alloc] init];
    }

    [self.locationManager startUpdatingLocation];

}

-(void)viewDidDisappear:(BOOL)animated{

    self.locationManager = nil;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    MKCoordinateRegion viewRegion =
    MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 2000, 2000);
    MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion];
    [mapView setRegion:adjustedRegion animated:YES];

    [manager stopUpdatingLocation];

    MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc]
                                   initWithCoordinate:newLocation.coordinate];
    geocoder.delegate = self;
    [geocoder start];    
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark {

    MapLocation *annotation = [[MapLocation alloc] init];
    annotation.streetAddress = placemark.thoroughfare;
    annotation.city = placemark.locality;
    annotation.state = placemark.administrativeArea;
    annotation.zip = placemark.postalCode;
    annotation.coordinate = geocoder.coordinate;

    [mapView addAnnotation:annotation];

    geocoder.delegate = nil;
}

- (void)openCallout:(id<MKAnnotation>)annotation {

    [mapView selectAnnotation:annotation animated:YES];
}

- (MKAnnotationView *) mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>) annotation {
    static NSString *placemarkIdentifier = @"Map Location Identifier";
    if ([annotation isKindOfClass:[MapLocation class]]) {
        MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[theMapView dequeueReusableAnnotationViewWithIdentifier:placemarkIdentifier];
        if (annotationView == nil)  {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:placemarkIdentifier];
        }
        else{
            annotationView.annotation = annotation;
        }
        annotationView.enabled = YES;
        annotationView.canShowCallout = YES;
        annotationView.image = [UIImage imageNamed:@"rescue"];
        [self performSelector:@selector(openCallout:) withObject:annotation afterDelay:0.5];

        return annotationView;

    }
    return nil;
} 
```

我在另一个视图上有一个 CLLocationManager，它可以在没有地图的情况下获取用户位置（这里的位置工作得很好）。如果在该视图上开始位置并返回带有地图的视图，则它会更新。为什么？

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T23:16:38.710

```
- (void)loadView {
    MKMapView *mv = [[MKMapView alloc]init];
    mapView.showsUserLocation=YES;
    mv.delegate=self;
}
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation{
    [mapView setCenterCoordinate:mapView.userLocation.location.coordinate animated:YES];
    mapView.showsUserLocation=NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:12:21.040

很好地显示在地图上

```
MKMapView *mv = [[MKMapView alloc]init];
CLLocationCoordinate2D c = CLLocationCoordinate2DMake(locationManager.location.coordinate.latitude, locationManager.location.coordinate.longitude);
[mv setCenterCoordinate:c animated:YES]; 
```

并停止更新

```
[locationManager stopUpdatingLocation]; 
```

# objective-c - 将 UILabel 附加到图像缩略图底部（不同的高度）

> ID：14530210
> 
> 赞同：0
> 
> 时间：2013-01-25T20:54:03.247
> 
> 标签：objective-c, uilabel

我有一个带有图像视图和标签的视图。图像视图显示不同大小的图像，它固定在顶部（见图） 我想动态地将文本标签粘贴到每个图像的底部，图像缩略图和 UILabel 之间没有任何空格。

![](../Images/f38ac6d77564c459fd987c36d7135c9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:30:08.433

你可以通过编程来做到这一点。我假设您已将 UILabel 附加到“label”并将图像附加到“imageView”变量。

```
CGRect labelFrame = label.frame;

labelFrame.origin.y = imageView.frame.origin.y + imageView.frame.size.height + any_space_you_want_between_image_and_label;

label.frame = labelFrame; 
```

这将改变标签在 imageView 下方的位置。我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:00:09.173

因为正如您提到`UIViewContentModeScaleAspectFit`的，您使用内容模式解决方案有点困难。您必须实际计算图像的最终高度（UIImageView 内图像的实际大小）：

```
 //UIImage *img = ...; UIImageView *imgView = ....
    CGFloat imageWidth = img.size.width;
    CGFloat imageHeight = img.size.height;
    CGFloat viewWidth = imgView.frame.size.width;
    CGFloat viewHeight = imgView.frame.size.height;
    float actualHeight = imageHeight * viewWidth / imageWidth;
// this is the actual height of the UIImage inside the UIImageView
    CGRect labelFrame = label.frame;
    labelFrame.origin.y = imageView.frame.origin.y + actualHeight + any_space_you_want_between_image_and_label;
    label.frame = labelFrame; 
```

# javascript - 获取在线用户 facebook api

> ID：14530217
> 
> 赞同：1
> 
> 时间：2013-01-25T20:54:20.260
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我如何在他们的 API 中获取我的好友列表@Facebook 上的 20 个随机在线用户的列表？

在文档中找不到任何关于 select * from users where online = 1 'ish

```
FB.api('/me/friends', function(response) { 
    if(response.data) {
        $.each(response.data,function(index,friend) {
            //friend.id;
        });
    } 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:07:01.777

使用 FQL，您可以轻松获取这些数据 -

```
SELECT uid,name,online_presence FROM user WHERE
  online_presence = 'active'
  AND uid IN (
    SELECT uid2 FROM friend where uid1 = me()
  ) ORDER BY rand() LIMIT 20 
```

请记住，您需要`friends_online_presence`获得查看用户朋友聊天状态的权限。

# magento - 完成付款后停止 Magento 发送自动发票

> ID：14530226
> 
> 赞同：2
> 
> 时间：2013-01-25T20:55:15.073
> 
> 标签：magento, paypal, payment, invoice

问题是，我想通过 API 手动发送它们，因为在我的国家，发票是受法律约束的订单。有没有办法做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T22:11:46.773

转到系统->配置->销售电子邮件并禁用“发票”。

欢呼西蒙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-19T12:09:11.277

我不认为接受的答案是处理问题的最佳方法。如果您从后端完全禁用自动交易电子邮件，您也无法手动触发它们或在您的自定义模块中使用它们。这意味着，如果您需要在另一点将其作为 magento 标准发送，则必须创建从头开始禁用的每封交易电子邮件，这也是事后需要进行的大量维护工作。

我想出的解决方案是以编程方式禁用在创建发票时发送电子邮件，并在自定义观察者事件中利用默认发件人类。在我们的例子中，我们希望在创建货件时发送发票电子邮件。

您可以通过覆盖 \Magento\Sales\Model\InvoiceOrder 来做到这一点。找到线路

```
$this->notifierInterface->notify($order, $invoice, $comment); 
```

并删除它。如果您想触发电子邮件，您仍然可以使用 InvoiceSender 中的标准“发送”功能从任何您想要的地方执行此操作。在我们的例子中，我们触发来自观察者的电子邮件，如下所示：

```
<?php

namespace Vendor\Module\Observer;

use Magento\Framework\Event\ObserverInterface;
use Magento\Sales\Model\Order;
use Magento\Sales\Model\Order\Email\Sender\InvoiceSender;

class SendInvoiceWithShipment implements ObserverInterface
{
    protected $_invoiceSender;

    public function __construct(
        InvoiceSender $invoiceSender
    ) {
        $this->_invoiceSender = $invoiceSender;
    }

    public function execute(\Magento\Framework\Event\Observer $observer)
    {
        $order = $observer->getShipment()->getOrder();
        $invoices = $order->getInvoiceCollection();
        foreach ($invoices as $invoice) {
             // this is where the magic happens
             $this->_invoiceSender->send($invoice);
        }               

    }
} 
```

观察者由事件 sales_order_shipment_save_after 触发

```
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Event/etc/events.xsd">
    <event name='sales_order_shipment_save_after'>
        <observer name='SendInvoiceWithShipment' instance='Vendor\Module\Observer\SendInvoiceWithShipment'
        />
    </event>
</config> 
```

您可以对每封交易电子邮件执行此操作。

# php - vqcache 文件 OpenCart 中的错误

> ID：14530231
> 
> 赞同：0
> 
> 时间：2013-01-25T20:55:28.313
> 
> 标签：php, opencart

我有一个 OpenCart 安装，我刚刚启用了 SEO URL，并安装了 SEO Pack，但是，当单击一个类别时，我收到此错误：

解析错误：第 214 行 ../shop/vqmod/vqcache/vq2-catalog_controller_product_category.php 中的语法错误、意外的 ','、期待 ')'

不知道该怎么做，如果有帮助，请附上 PHP 文件以供参考。

```
<?php 
class ControllerProductCategory extends Controller {  
public function index() { 
    $this->language->load('product/category');

    $this->load->model('catalog/category');

    $this->load->model('catalog/product');

    $this->load->model('tool/image'); 

    if (isset($this->request->get['sort'])) {
        $sort = $this->request->get['sort'];
    } else {
        $sort = 'p.sort_order';
    }

    if (isset($this->request->get['order'])) {
        $order = $this->request->get['order'];
    } else {
        $order = 'ASC';
    }

    if (isset($this->request->get['page'])) {
        $page = $this->request->get['page'];
    } else { 
        $page = 1;
    }   

    if (isset($this->request->get['limit'])) {
        $limit = $this->request->get['limit'];
    } else {
        $limit = $this->config->get('config_catalog_limit');
    }

    $this->data['breadcrumbs'] = array();

    $this->data['breadcrumbs'][] = array(
        'text'      => $this->language->get('text_home'),
        'href'      => $this->url->link('common/home'),
        'separator' => false
    );  

    if (isset($this->request->get['path'])) {
        $path = '';

        $parts = explode('_', (string)$this->request->get['path']);

        foreach ($parts as $path_id) {
            if (!$path) {
                $path = (int)$path_id;
            } else {
                $path .= '_' . (int)$path_id;
            }

            $category_info = $this->model_catalog_category->getCategory($path_id);

            if ($category_info) {
                $this->data['breadcrumbs'][] = array(
                    'text'      => $category_info['name'],
                    'href'      => $this->url->link('product/category', 'path=' . $path),
                    'separator' => $this->language->get('text_separator')
                );
            }
        }       

        $category_id = (int)array_pop($parts);
    } else {
        $category_id = 0;
    }

    $category_info = $this->model_catalog_category->getCategory($category_id);

    if ($category_info) {
        $this->document->setTitle($category_info['name']);
        $this->document->setDescription($category_info['meta_description']);
        $this->document->setKeywords($category_info['meta_keyword']);

        $this->data['heading_title'] = $category_info['name'];

        $this->data['text_refine'] = $this->language->get('text_refine');
        $this->data['text_stock'] = $this->language->get('text_stock');
        $this->data['text_instock'] = $this->language->get('text_instock');
        $this->data['text_empty'] = $this->language->get('text_empty');         
        $this->data['text_quantity'] = $this->language->get('text_quantity');
        $this->data['text_manufacturer'] = $this->language->get('text_manufacturer');
        $this->data['text_model'] = $this->language->get('text_model');
        $this->data['text_price'] = $this->language->get('text_price');
        $this->data['text_tax'] = $this->language->get('text_tax');
        $this->data['text_points'] = $this->language->get('text_points');
        $this->data['text_compare'] = sprintf($this->language->get('text_compare'), (isset($this->session->data['compare']) ? count($this->session->data['compare']) : 0));
        $this->data['text_display'] = $this->language->get('text_display');
        $this->data['text_list'] = $this->language->get('text_list');
        $this->data['text_grid'] = $this->language->get('text_grid');
        $this->data['text_sort'] = $this->language->get('text_sort');
        $this->data['text_limit'] = $this->language->get('text_limit');

        $this->data['button_cart'] = $this->language->get('button_cart');
        $this->data['button_wishlist'] = $this->language->get('button_wishlist');
        $this->data['button_compare'] = $this->language->get('button_compare');
        $this->data['button_continue'] = $this->language->get('button_continue');

        if ($category_info['image']) {
            $this->data['thumb'] = $this->model_tool_image->resize($category_info['image'], $this->config->get('config_image_category_width'), $this->config->get('config_image_category_height'));
        } else {
            $this->data['thumb'] = '';
        }

        $this->data['description'] = html_entity_decode($category_info['description'], ENT_QUOTES, 'UTF-8');
        $this->data['compare'] = $this->url->link('product/compare');

        $url = '';

        if (isset($this->request->get['sort'])) {
            $url .= '&sort=' . $this->request->get['sort'];
        }   

        if (isset($this->request->get['order'])) {
            $url .= '&order=' . $this->request->get['order'];
        }   

        if (isset($this->request->get['limit'])) {
            $url .= '&limit=' . $this->request->get['limit'];
        }

        $this->data['categories'] = array();

        $results = $this->model_catalog_category->getCategories($category_id);

        foreach ($results as $result) {
            $data = array(
                'filter_category_id'  => $result['category_id'],
                'filter_sub_category' => true
            );

            $product_total = $this->model_catalog_product->getTotalProducts($data);             

            $this->data['categories'][] = array(
                'name'  => $result['name'] . ($this->config->get('config_product_count') ? ' (' . $product_total . ')' : ''),
                'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '_' . $result['category_id'] . $url)
            );
        }

        $this->data['products'] = array();

        $data = array(
            'filter_category_id' => $category_id, 
            'sort'               => $sort,
            'order'              => $order,
            'start'              => ($page - 1) * $limit,
            'limit'              => $limit
        );

        $product_total = $this->model_catalog_product->getTotalProducts($data); 

        $results = $this->model_catalog_product->getProducts($data);

        foreach ($results as $result) {
            if ($result['image']) {
                $image = $this->model_tool_image->resize($result['image'], $this->config->get('config_image_product_width'), $this->config->get('config_image_product_height'));
            } else {
                $image = false;
            }

            if (($this->config->get('config_customer_price') && $this->customer->isLogged()) || !$this->config->get('config_customer_price')) {
                $price = $this->currency->format($this->tax->calculate($result['price'], $result['tax_class_id'], $this->config->get('config_tax')));
            } else {
                $price = false;
            }

            if ((float)$result['special']) {
                $special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')));
            } else {
                $special = false;
            }   

            if ($this->config->get('config_tax')) {
                $tax = $this->currency->format((float)$result['special'] ? $result['special'] : $result['price']);
            } else {
                $tax = false;
            }               

            if ($this->config->get('config_review_status')) {
                $rating = (int)$result['rating'];
            } else {
                $rating = false;
            }
            if ($result['quantity'] <= 0) {
                $rstock = $result['stock_status'];
            } elseif ($this->config->get('config_stock_display')) {
                $rstock = "Stoc: " . $result['quantity'];
            } else {
            $rstock = "In stock";
            }

$stock_status = $result['stock_status'];
$stock_qty = $result['quantity'];
            $this->data['products'][] = array(

    'quantity' => $result['quantity'], 'stock' => $result['stock_status'], 'model' => $result['model'],
                'product_id'  => $result['product_id'],
                'thumb'       => $image,
                'name'        => $result['name'],
                'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
                'price'       => $price,
                'quantity'    => $result['quantity'],
                'stock_status'=> $result['stock_status'],
                'special'     => $special,
                'tax'         => $tax,
                'rating'      => $result['rating'],
                'stock_status'       => $stock_status,
                'stock_qty'       => $stock_qty,
                'reviews'     => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
                'href'        => $this->url->link('product/product', 'path=' . $this->request->get['path'] . '&product_id=' . $result['product_id'])
            );
        }

        $url = '';

        if (isset($this->request->get['limit'])) {
            $url .= '&limit=' . $this->request->get['limit'];
        }

        $this->data['sorts'] = array();

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_default'),
            'value' => 'p.sort_order-ASC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=p.sort_order&order=ASC' . $url)
        );

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_name_asc'),
            'value' => 'pd.name-ASC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=pd.name&order=ASC' . $url)
        );

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_name_desc'),
            'value' => 'pd.name-DESC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=pd.name&order=DESC' . $url)
        );

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_price_asc'),
            'value' => 'p.price-ASC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=p.price&order=ASC' . $url)
        ); 

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_price_desc'),
            'value' => 'p.price-DESC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=p.price&order=DESC' . $url)
        ); 

        if ($this->config->get('config_review_status')) {
            $this->data['sorts'][] = array(
                'text'  => $this->language->get('text_rating_desc'),
                'value' => 'rating-DESC',
                'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=rating&order=DESC' . $url)
            ); 

            $this->data['sorts'][] = array(
                'text'  => $this->language->get('text_rating_asc'),
                'value' => 'rating-ASC',
                'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=rating&order=ASC' . $url)
            );
        }

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_model_asc'),
            'value' => 'p.model-ASC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=p.model&order=ASC' . $url)
        );

        $this->data['sorts'][] = array(
            'text'  => $this->language->get('text_model_desc'),
            'value' => 'p.model-DESC',
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . '&sort=p.model&order=DESC' . $url)
        );

        $url = '';

        if (isset($this->request->get['sort'])) {
            $url .= '&sort=' . $this->request->get['sort'];
        }   

        if (isset($this->request->get['order'])) {
            $url .= '&order=' . $this->request->get['order'];
        }

        $this->data['limits'] = array();

        $this->data['limits'][] = array(
            'text'  => $this->config->get('config_catalog_limit'),
            'value' => $this->config->get('config_catalog_limit'),
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=' . $this->config->get('config_catalog_limit'))
        );

        $this->data['limits'][] = array(
            'text'  => 25,
            'value' => 25,
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=25')
        );

        $this->data['limits'][] = array(
            'text'  => 50,
            'value' => 50,
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=50')
        );

        $this->data['limits'][] = array(
            'text'  => 75,
            'value' => 75,
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=75')
        );

        $this->data['limits'][] = array(
            'text'  => 100,
            'value' => 100,
            'href'  => $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&limit=100')
        );

        $url = '';

        if (isset($this->request->get['sort'])) {
            $url .= '&sort=' . $this->request->get['sort'];
        }   

        if (isset($this->request->get['order'])) {
            $url .= '&order=' . $this->request->get['order'];
        }

        if (isset($this->request->get['limit'])) {
            $url .= '&limit=' . $this->request->get['limit'];
        }

        $pagination = new Pagination();
        $pagination->total = $product_total;
        $pagination->page = $page;
        $pagination->limit = $limit;
        $pagination->text = $this->language->get('text_pagination');
        $pagination->url = $this->url->link('product/category', 'path=' . $this->request->get['path'] . $url . '&page={page}');

        $this->data['pagination'] = $pagination->render();

        $this->data['sort'] = $sort;
        $this->data['order'] = $order;
        $this->data['limit'] = $limit;

        $this->data['continue'] = $this->url->link('common/home');

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/category.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/product/category.tpl';
        } else {
            $this->template = 'default/template/product/category.tpl';
        }

        $this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'
        );

        $this->response->setOutput($this->render());                                        
    } else {
        $url = '';

        if (isset($this->request->get['path'])) {
            $url .= '&path=' . $this->request->get['path'];
        }

        if (isset($this->request->get['sort'])) {
            $url .= '&sort=' . $this->request->get['sort'];
        }   

        if (isset($this->request->get['order'])) {
            $url .= '&order=' . $this->request->get['order'];
        }

        if (isset($this->request->get['page'])) {
            $url .= '&page=' . $this->request->get['page'];
        }

        if (isset($this->request->get['limit'])) {
            $url .= '&limit=' . $this->request->get['limit'];
        }

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_error'),
            'href'      => $this->url->link('product/category', $url),
            'separator' => $this->language->get('text_separator')
        );

        $this->document->setTitle($this->language->get('text_error'));

        $this->data['heading_title'] = $this->language->get('text_error');

        $this->data['text_error'] = $this->language->get('text_error');

        $this->data['button_continue'] = $this->language->get('button_continue');

        $this->data['continue'] = $this->url->link('common/home');

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/error/not_found.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/error/not_found.tpl';
        } else {
            $this->template = 'default/template/error/not_found.tpl';
        }

        $this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'
        );

        $this->response->setOutput($this->render());
    }
}
  }
?> 
```

关注的店铺是[http://www.luof.co.uk/shop](http://www.luof.co.uk/shop)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:41:39.367

您的 vQmod 之一（很可能是添加此行的那个）

```
 'stock_qty'       => $stock_qty, 
```

导致php错误。一个一个地禁用你的vQmods并重新加载直到错误消失（vqmod_opencart.xml除外）。那是罪魁祸首，您应该与开发人员联系以修复它

# java - 在 Eclipse 中使用共享资源嵌套项目

> ID：14530233
> 
> 赞同：2
> 
> 时间：2013-01-25T20:55:43.073
> 
> 标签：java, eclipse, project

我有一个自定义 Web 应用程序项目，其中`project`Eclipse`webapp`项目在哪里。假设结构如下

```
/project
    /webapp
        /_src
            /com.webapp.servlets
            /com.webapp.domain
            /com.webapp.services 
```

现在我想创建基于 java 命令行的工具来模拟 servlet 的操作。这将需要我的`domain`包中的类。我还需要将此命令行应用程序从 Web 应用程序项目中分离出来。我还需要将这些共享类提取到另一个项目中。

我想要这种类型的结构

```
 /project
        /webapp
            /_src
                /com.webapp.servlets                 
                /com.webapp.services
        /commandline
             /_src
                 /com.commandline.simulation
        /shared
             /_src
                /com.webapp.domain 
```

如何在 Eclipse (Indigo) 中使用共享资源实现这种嵌套项目结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:44:05.403

这很简单。在您的根项目项目中创建一个新文件夹。然后创建一个 Java 项目，但不要使用默认位置，使用您创建的新文件夹。这将在您的项目资源管理器中创建一个新条目，但在文件系统上您将拥有嵌套项目。

在需要其他项目资源的项目中，只需通过添加您需要的项目来配置构建路径，

# linux - 如何使用 unix 工具将两个输入文件随机合并到一个输出文件？

> ID：14530234
> 
> 赞同：3
> 
> 时间：2013-01-25T20:55:43.507
> 
> 标签：linux, unix

我有两个不同大小的文本文件，我想将它们合并到一个文件中，但内容是随机混合的；这是为一些单元测试创​​建一些真实的数据。一个文本文件包含真实案例，而另一个包含虚假案例。

我想使用标准的 Unix 工具来创建合并的输出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:58:15.453

使用随机排序`-R`：

```
$ sort -R file1 file2 -o file3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T21:25:34.510

我的版本`sort`也不支持`-R`。因此，这是一种替代方法`awk`，通过在每行前面插入一个随机数并根据这些数字进行排序，然后去掉该数字。

```
awk '{print int(rand()*1000), $0}' file1 file2 | sort -n | awk '{$1="";print $0}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:24:44.713

这会在每行的开头添加一个随机数`awk`，并根据该数字进行排序，然后将其删除。如果您有重复项（如 choroba 所指出的）并且跨平台稍微多一些，这甚至会起作用。

```
awk 'BEGIN { srand() } { print rand(), $0 }' file1 file2 |
    sort -n |
    cut -f2- -d" " 
```

# java - 循环组发生器

> ID：14530237
> 
> 赞同：2
> 
> 时间：2013-01-25T20:55:49.247
> 
> 标签：java, cryptography, goto, algebra

我正在尝试实现一种算法来搜索循环组 G 的生成器：
n 是组 G 的顺序，而 Pi 是将 n 分解为素数，例如 n = P1^e1 x P2^e2 ... .x Pk^ek
这是算法：

第 1 步：从 G 中选择一个元素 g
第 2 步：对从 1 到 k 的每个 i 执行
第 2.1 步：b <- pow ( g , n / Pi )
第 2.3 步：如果 b =1 转到第 1
步 第 3 步：返回 g

这是我在 java 中的实现，我想使用 goto 但它会产生错误：

```
public int getGenerateur(){
    List<Integer> facteur=new ArrayList<Integer>();
    facteur=this.getFacteur(nombre);    

    double b;
    int generateur=0;   

    boolean etape = true;
       while(etape){
        etape = false;
        System.out.println("generateur aleatoire:");
        generateur =(int) (Math.random() * (nombre - 2)) + 2;
        System.out.println(generateur);

            for(int s=0;s<facteur.size();s++){      
                b=Math.pow(generateur,(nombre/facteur.get(s)))%(nombre+1);
                System.out.println("b= "+b);
                if(b==1){
                   etape = true;
                   break;

                }

            }   
     }
     return generateur;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:20:37.517

如果您使用外部循环和 break 语句，您应该能够做您想做的事情。它看起来像这样

```
 boolean etape = true;
   while(etape){
    etape = false;
    System.out.println("Entrer un generateur :");
    generateur = sc.nextInt();

        for(int s=0;s<facteur.size();s++){      

            b=Math.pow(generateur,(nombre/facteur.get(s)))%(nombre+1);
            System.out.println("b= "+b);
            if(b==1){
               etape = true;
               break;

            }

        }   
 }
 return generateur; 
```

# php - 根据条件更改元素的显示

> ID：14530245
> 
> 赞同：9
> 
> 时间：2013-01-25T20:56:36.640
> 
> 标签：php, mysql

我希望用户能够区分他们是否已投票（通过加粗）或尚未投票（未加粗）。

例如：

```
       已投票 未投票
*投票数：*  77 ↑ ↓ 12 ↑ ↓

```

这是我的数据库的设置方式：

## 介绍

包含消息

```
    message_id 介绍 user_id up_vote
     10 投给后 5 77
     11 未投票 5 12

```

## 表决

包含投票

```
    Voting_id message_id_fk user_id
     18 10 5   
     19 10 3     

```

## 用户

包含用户名

```
    名字用户 ID
     鲍勃 5

```

我不知道如何正确查询数据库，然后做出正确`if statement`的区分投票和未投票的帖子。

这是我到目前为止所拥有的：

```
$sql = mysql_query("SELECT * FROM intro
         INNER JOIN users ON intro.user_id = users.user_id
         ORDER BY `up` DESC ");

echo $row['first_name'] . " " .  $row['intro'];

if( ??? ) {
  echo "<strong>" . $row['up_vote'] . "</strong>";
} else {
  echo $row['up_vote'];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T10:33:56.190

左加入投票表并检查是否找到任何相应的项目：

```
SELECT intro.message_id, intro.intro, intro.user_id, intro.up_vote,
    IF(Voting.user_id IS NULL, 0, 1) AS has_voted
FROM intro
INNER JOIN users ON intro.user_id = users.user_id
LEFT JOIN Voting ON Voting.message_id_fk=intro.message_id
    AND Voting.user_id = 5
ORDER BY `up` DESC 
```

然后在 PHP 中：

```
if($row['has_voted'){
    echo "<strong>".$row['up_vote']."</strong>";
}else {
    echo $row['up_vote'];
} 
```

一些解释：

*   如果没有找到匹配的行，则`LEFT JOIN`ed 表中的列`NULL`
*   `IF()`是一个函数，如果第一个参数的值为真，则返回第二个参数，否则返回第三个参数。作为一个函数，它可以很容易地在`SELECT`子句中使用
*   我替换`SELECT *`为显式选择所需的列，这被认为是最佳实践，在这种情况下是必要的，因为列名不明确
*   当然，您必须将文字替换为`5`您当前的用户 ID。使用准备好的语句或像这样连接查询：`"...Voting.user_id = " . intval($current_user_id) . "..."`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:16:02.523

如果您只想获得当前登录用户（例如 user_id = 3 的用户）投票的帖子，您可以使用以下查询：

```
SELECT u.first_name,
       m.message_id,
       m.message,
       m.up_vote,
       v.Voting_id
FROM Users u,
     Messages m
LEFT JOIN Voting v ON v.message_id_fk = m.message_id AND v.user_id = 3
WHERE u.user_id = m.user_id; 
```

在您的代码中，使用正确的过程将上面的 3 替换为当前登录用户的 user_id。

[SQL小提琴](http://www.sqlfiddle.com/#!2/8a962/8/0)

如果您执行此查询，您会注意到我在结果中添加了一个列：voting_id。

如果用户**对**这篇文章投了赞成票，它将显示投票的**id**。如果用户**没有**投票，它将显示**NULL**值。

然后，您可以在代码中检查此字段是否为*空*，然后您就完成了！

# java - 在 Java 中的多个类之间访问变量

> ID：14530249
> 
> 赞同：3
> 
> 时间：2013-01-25T20:56:48.763
> 
> 标签：java, oop, variables, methods

假设我有 3 个不同的课程：

**班人**、 **班室**、 **班房**。

它们是这样链接的：

在教室**里**我做：`Room room = new Room();` 在教室里**我**做：`Person person = new Person();`

亲自我有这个方法：

```
public String getName(){
 return name;
} 
```

如何从类**House**访问此方法？

我现在这样做的方法是在**Room**类中重复该方法，例如：

```
public String getName(){
 return person.getName();
} 
```

所以在**House**我`getName()`从**Room**调用方法，在**Room**我`getName()`从**Person**调用方法。所以名称变量然后从**Person**通过**Room**传递到**House**！

但是这样我就复制了我需要在 House 中访问的 Person 的所有方法。这不可能是对的....我想过“扩展”，但这没有意义。有人可以向我解释一下（我现在在我的代码中复制了很多方法）。它可能是基本的 OOP 东西，但我似乎无法弄清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:59:19.887

> 但是这样我就复制了我需要在 House 中访问的 Person 的所有方法。这不可能……

你是对的。你不需要这样做。那不是正确的方法。

由于您在课堂上有`Person`参考`Room`，因此您只需要为以下内容定义一个“getter” `person`：-

```
public Person getPerson() {
    return person;
} 
```

然后组成您的`House`班级，您可以获得`person`姓名和其他详细信息，如下所示：-

```
room.getPerson().getName();
room.getPerson().getAge(); 
```

因此，基本上，您将在您的班级中`person`获得您的实例的参考副本（而不是个人实例本身的副本） 。然后使用该引用，就好像它仅在类中定义一样。`room``House``House`

还有一点，我看到你的吸气剂是私人的。你不应该那样做。将它们公开，否则它们将无法在外部访问。`getters`并且`setters`应该几乎总是公开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:00:53.687

将人暴露为房间的财产。

你所拥有的有点奇怪，因为人们会期望 room.getName() 返回房间的名称。

相反 Room 应该有一个 getPerson() 方法，所以当需要一个人名时， room.getPerson().getName()

# javascript - 角度js模型关系

> ID：14530251
> 
> 赞同：29
> 
> 时间：2013-01-25T20:56:56.127
> 
> 标签：javascript, model-view-controller, orm, frameworks, angularjs

在过去的几天里，我一直在尝试 Angular JS，但我无法弄清楚的一件事是如何处理模型之间的关系。

我正在处理的项目有一个用户模型和一个帐户模型。我在我的数据库上设置了每个帐户都有一个名为“ownedBy”的字段，它是对拥有该帐户的用户 ID 的外键引用。

在 Angular 中，我在名为 main.js 的文件中设置了以下内容

```
var myApp = angular.module('myApp', ['ngResource']);

var Users = myApp.factory('Users', function($resource) {
    var User = $resource('http://api.mydomain.ca/users/:id',
        {id:'@id'},
    {});
    return User;
});

var Accounts = myApp.factory('Accounts', function($resource) {
    var Accounts = $resource('http://api.mydomain.ca/accounts/:id',
        {id:'@id'},
    {});
    return Accounts;
});

function UsersCtrl($scope, Users) {
    $scope.users = Users.query();
}

function AccountsCtrl($scope, Accounts) {
    $scope.accounts = Accounts.query();
} 
```

和以下模板

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Angular Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css?v=2.2.1">
</head>
<body>
<div ng-app="myApp">
    <div ng-controller="UsersCtrl">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in users">
                    <td>{{user.id}}</td>
                    <td>{{user.firstName}}</td>
                    <td>{{user.lastName}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div ng-controller="AccountsCtrl">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Owned By</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="account in accounts">
                    <td>{{account.id}}</td>
                    <td>{{account.ownedBy}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular-resource.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js?v=2.2.1"></script>
<script src="js/main.js"></script>
</body>
</html> 
```

这是有效的。它从我的 REST 服务器中提取 JSON 资源并将其显示在表格中。我需要采取什么下一步才能得到一个显示用户及其帐号的表格？（相当于数据库 JOIN？）对于一对多关系是否有不同的方法？（即……一个账户有很多交易）

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-25T21:15:29.057

`$resource`不包含任何处理服务器未处理的关系的方法，但它非常简单`$http`：

```
module.factory( 'UserService', function ( $http, $q ) {
  return {
    get: function getUser( id ) {
      // We create our own promise to return
      var deferred = $q.defer();

      $http.get('/users/'+id).then( function ( user ) {
        $http.get('/accounts/'+user.id).then( function ( acct ) {

          // Add the account info however you want
          user.account = acct;

          // resolve the promise
          deferred.resolve( user );

        }, function getAcctError() { deferred.reject(); } );
      }, function getUserError() { deferred.reject(); } );

      return deferred.promise;
    }
  };
}); 
```

然后在您的控制器中，您可以像使用任何其他承诺一样使用它：

```
UserService.get( $scope.userId ).then( function ( user ) {
  $scope.user = user;
}); 
```

它可用于您的模板！

```
<div>
    User: "{{user.firstName}} {{user.lastName}}" with Acct ID "{{user.acct.id}}".
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T05:17:49.573

如果我需要 UI 中的关系，我会使用[js-data 。](http://www.js-data.io)该库通常非常优雅地处理关系和数据建模。即使您只是在寻找一个不错的 API 接口，我也发现它更易于使用。我更喜欢 ngResource。

在您的情况下，您将有一个用户模型和帐户模型

`src/app/data/account.model.coffee`

```
angular.module 'app.data' #this can be your module name
  .factory 'Account', (DS) ->
    DS.defineResource
      name: 'account'
      endpoint: 'accounts'
      relations:
        belongsTo:
          user:
            localKey: 'userId'
            localField: 'user' 
```

`src/app/data/user.model.coffee`

```
angular.module 'app.data'
  .factory 'User', (DS) ->

    DS.defineResource
      name: 'user'
      endpoint: 'users'
      relations:
        belongsTo:
          account: #make sure this matches the 'name' property of the other model
            foreignKey: 'userId'
            localField: 'account' 
```

# delphi - 如何复制/替换 DLL？

> ID：14530252
> 
> 赞同：8
> 
> 时间：2013-01-25T20:56:57.543
> 
> 标签：delphi, dll, delphi-xe2, access-denied, file-copying

我有一个实用程序，它通过简单地复制/替换可执行文件来更新应用程序。现在，我有一些 DLL 文件也需要更新。但是，有时 Windows 不会让我替换它，因为某些东西正在使用它，有时使用 DLL 的东西太多，我不能保证它会被我解锁来替换它。

目前，我唯一的解决方法是先重命名现有的 DLL，然后我可以复制新的 DLL。但是，旧的 DLL 会留下一个更改的文件名。

在这种情况下，如何以编程方式替换 DLL？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T21:07:10.823

您的方法很好 - 只需重命名文件并将新的 DLL 复制到正确的位置。完成后，您可以使用 Windows API 函数[MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)注册旧文件，以便下次重新启动机器时删除。从 MSDN 文档：

> 如果 dwFlags 指定 MOVEFILE_DELAY_UNTIL_REBOOT 并且 lpNewFileName 为 NULL，则 MoveFileEx 注册 lpExistingFileName 文件，以便在系统重新启动时删除。如果 lpExistingFileName 引用一个目录，则系统仅在目录为空时才会在重新启动时删除该目录。

所以你会想做这样的事情：

```
MoveFileEx(szSrcFile, NULL, MOVEFILE_DELAY_UNTIL_REBOOT); 
```

我没有与 Delphi 合作太多。假设您可以导入正确的 Windows API 函数并直接从 Delphi 进行此调用，或者编写一个小的 C++ 程序，您可以调用它来为您处理这个问题。

# reporting-services - 写后延迟报告

> ID：14530254
> 
> 赞同：1
> 
> 时间：2013-01-25T20:57:08.087
> 
> 标签：reporting-services, timedelay

我正在使用 SSRS 更新表。我有一系列参数，用户将在运行报告之前从标题中选择这些参数。该报告在执行存储过程以更新表后运行。我的问题是，在某些情况下，并非所有情况下都会发生写入，但报告不会显示任何结果。我可以检查表格并且信息已正确更新。

我想知道的是是否有办法将报告延迟到写入存储过程之后。

这是调用的存储过程：

```
USE [InvoiceSHC]
GO
/****** Object:  StoredProcedure [dbo].[MasterDataUpdate]    Script Date: 01/25/2013 14:07:58 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Tim Vavra
-- Create date: 1/15/2013
-- Description: This procedure is designed to update the table MasterData 
-- with information entered into SSRS report by Production Assistants.
-- this information will be used to create the invoice for SHC and provide metric 
-- information.
-- =============================================
ALTER PROCEDURE [dbo].[MasterDataUpdate]
    -- Add the parameters for the stored procedure here

    @Ref float,
    @Phase nvarchar(255),
    @Page nvarchar(255),
    @PageType nvarchar(255),
    @Percent int,
    @ChangeType nvarchar(255),
    @UserName varchar(MAX)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    Insert into MasterData 
    (Ad,Page,[Page Type],[Percent],Phase,[Change Type],LstChng, [UID])

    values( @Ref, @Page, @PageType, @Percent, @Phase, @ChangeType, GETDATE(), @UserName)

end

    update MasterData
    set [Base Page] =
        Case 
            When [Page] like '[1-99]' then [Page]
            When [Page] like '%[A-Z]' then left([Page],1)+((ASCII(convert(varchar,(RIGHT([Page],1))))-64)*.01)
            When[Page] like '%-%' then LEFT([Page],1)+(cast(RIGHT([page],2)as int)*.01)+.26

end         

    update MasterData 
    set [Alt Type] =
        Case
            When [Page] like '[1-99]' then 'B'
            When [Page] like '%[A-Z]' then 'A'
            When[Page] like '%-%' then 'T'

END 
```

这是我在报告中使用的数据集的查询：

```
SELECT     MasterData.Ad, MasterData.Page, MasterData.[Page Type], MasterData.[Percent], MasterData.Phase, MasterData.[Change Type], MasterData.LstChng, 
                  PageCost.Amt AS PageCost, VersionCost.Amt AS VersionCost
FROM         MasterData INNER JOIN
                      PageCost ON MasterData.[Page Type] = PageCost.PageType INNER JOIN
                      VersionCost ON MasterData.[Change Type] = VersionCost.ChangeType
WHERE     (MasterData.Ad = @Ref) AND (MasterData.Phase = @Phase) AND (MasterData.Page = @Page) 
```

我希望这是足够的信息来帮助某人提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:08:34.100

我建议创建一个函数，在执行过程后返回`ref_cursor`你的表。`MasterData`我的作品中有许多可以捕捉历史价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:57:05.163

对于我的回答，您必须确保您拥有一个合法的 SSRS 服务器来托管您的报告，以访问其 Web 服务上的功能。

数据驱动订阅可以将报告发送到基于标准的格式。您可以设置一个作业来更新代码，可能将上次成功运行的数据存储在数据库表中，查询该输出恰好生成报告。这是关于它的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/89197b9b-7502-4fe2-bea3-ed7943eebf3b#bkmk_startwizard](http://msdn.microsoft.com/en-us/library/89197b9b-7502-4fe2-bea3-ed7943eebf3b#bkmk_startwizard)

一种更简单的方法可能是在夜间工作之后发生的每日增量设置标准订阅，当两者都设置为静态时间时。

老实说，这两种方法都可能适合您，但第一种方法需要更多时间来设置，但会更灵活。第二种方法更加根深蒂固，但更容易设置和维护。

# java - Places API 缺少标签 Android

> ID：14530255
> 
> 赞同：0
> 
> 时间：2013-01-25T20:57:11.623
> 
> 标签：java, android, xml-parsing, google-api, google-places-api

我正在使用 Google Places api，我正在尝试解析 XML 数据以获取包括评级在内的许多内容。唯一的问题是有时没有评级标签（如下所示）。我该如何解决这个问题？

```
<name>Zari</name>
<type>restaurant</type>
<type>food</type>
<type>establishment</type>
<formatted_address>212-214 Ifield Drive,            Crawley, United Kingdom</formatted_address>
<geometry>
<location>
 <lat>51.1218980</lat>
   <lng>-0.2135630</lng>
 </location>
 </geometry>
<rating>3.3</rating>
 </result>

 <result>
<name>Happy Meeting</name>
<type>restaurant</type>
<type>food</type>
<type>establishment</type>
<formatted_address>
<geometry>
<location>
<lat>51.1161600</lat>
<lng>-0.1844890</lng>
</location>
</geometry>
</result>
<result> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T08:37:53.087

只需检查您是否收到口粮。例如，如果您正在解析这样的数据

```
 String temp=null;
    int rating;
        if (localName.equals("rating")){ //this code won't work if rating tag is
                                        // not present thus temp will be null

                    temp = attributes.getValue("rating");
                    rating = Integer.parseInt(temp);
    } 
```

现在进一步检查您的代码

```
if(temp==null){
rating=0; //or any that you want
} 
```

# ruby - 如何在避免被零除的同时按比率排序？

> ID：14530264
> 
> 赞同：2
> 
> 时间：2013-01-25T20:57:29.253
> 
> 标签：ruby, algorithm, sorting

考虑一个类 Team，类变量为“wins”和“losses”。我希望按胜负比对一组团队进行排序，例如：

5:0 > 3:0 > 1:0 > 3:1 > 5:5 > 3:3 > 1:3 > 0:1 > 0:3 > 0:5

我已经有一个我不满意的（部分）破解的解决方案，我想知道是否有更清洁/更优雅/更简单的方法来解决这个问题。

```
def ratio
    if @losses == 0 then 
        return 1000000+@wins
    end
    if @wins == 0 then
        return 0-@losses
    end
    return @wins/@losses
end 
```

（这不能解决 5:5 > 3:3）

这将在 Team 类中，可以像这样使用：

```
teams.sort! { |a, b| b.ratio <=> a.ratio } 
```

解决这个问题的最简单方法是什么？（解决方案不一定是 Ruby，我对 OO 的任何东西都很满意）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:23:59.690

我不会说 Ruby，但是可以提供所需结果的 Python 方法将使用元组作为键（在 decorate-sort-undecorate “Schwartzian transform” 成语中。）

例如，您可以按获胜分数、获胜次数和（负）失败次数进行排名，这将给出您想要的排序：

```
>>> wl = [[3, 0], [3, 1], [0, 5], [3, 3], [0, 3], [5, 5], [1, 3], [5, 0]]
>>> 
>>> def rank(wl):
...     win, loss = wl
...     return (1.0*win/(win+loss) if win+loss > 0 else 0), win, -loss
... 
>>> sorted(wl, key=rank)
[[0, 5], [0, 3], [1, 3], [3, 3], [5, 5], [3, 1], [3, 0], [5, 0]]
>>> sorted(wl, key=rank)[::-1]
[[5, 0], [3, 0], [3, 1], [5, 5], [3, 3], [1, 3], [0, 3], [0, 5]] 
```

不幸的是，我不知道 Ruby 等价物是什么，但我认为有一种`sort_by`方法在某处浮动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:08:20.030

与其定义一个使用 with 的方法`sort_by`，不如重写`<=>`它来处理比较，然后你可以避免创建一个数字，而是做类似的事情

```
def <=>(other)
  if losses == 0
    -1
  elsif other.losses == 0
    1
  else
    # do ratio logic here
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:04:11.210

为每支球队设定一个胜率并对其进行排序。在每个胜率中，您应该按总比赛场次进行排序，确保根据球队的总胜率低于或高于 50% 来确定总场数的好坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T21:07:41.150

```
(@wins * 3 + 1) / (@losses * 3 + 2)

5:0 8.00
3:0 5.00
3:1 2.00
5:5 0.94
3:3 0.91
1:3 0.36
0:3 0.09
0:5 0.06 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T21:10:11.320

根据上面的评论，我同意一个可排序的数字会很好用。也许是这样的：

```
def win_loss_ranking
  (@wins *2 ) - (@losses * 2) + (@wins + @losses)
end 
```

这为您提供了一个数字，该数字考虑了所玩的游戏以及输赢。因此，在您有 5:5 和 3:3 的情况下，5:5 的 win_loss_ranking 为 10，而 3:3 的团队为 6。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T21:56:28.843

~~比率（在与您的目的相关的意义上）将随着**差异**单调增加。~~为什么不使用差异来实现它？

```
class Team
  def difference; @wins - @losses end
end

teams.sort!{|a, b| a.difference <=> b.difference} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-14T01:34:48.280

添加[DSM 的 Python 版本的 Ruby 版本](https://stackoverflow.com/a/14530620/298607)。

鉴于：

```
> a=["0:1", "5:0", "3:3", "0:3", "1:3", "3:0", "1:0", "0:5", "5:5", "3:1"] 
```

你可以做：

```
def rank(wl)
    w, l = wl.split(/:/).map(&:to_f)
    [w/(w+l > 0 ? -(w+l) : 0), -w, l]
    end
> a.sort { |a,b| rank(a)<=>rank(b) }
["5:0", "3:0", "1:0", "3:1", "5:5", "3:3", "1:3", "0:1", "0:3", "0:5"] 
```

然后，如果您想以 oo 格式使用它，可能类似于：

```
class Wl 
   def initialize(win_loss)
       @wl=win_loss
   end
   def wl()
      @wl
   end 
   def rank()
      w, l = @wl.split(/:/).map(&:to_f)
      [w/(w+l > 0 ? -(w+l) : 0), -w, l]
   end
   def to_s
       @wl
   end
   def inspect
       @wl 
   end 
   def <=>(other)
      rank <=> other.rank
   end 
end

> b=a.map{ |e| Wl.new(e) }
[0:1, 5:0, 3:3, 0:3, 1:3, 3:0, 1:0, 0:5, 5:5, 3:1]
> b.sort
[5:0, 3:0, 1:0, 3:1, 5:5, 3:3, 1:3, 0:1, 0:3, 0:5] 
```

# android - Android：读取文件：第一次选择文件时不打开。当我再次尝试时，它会打开文件

> ID：14530265
> 
> 赞同：0
> 
> 时间：2013-01-25T20:57:29.467
> 
> 标签：android

所以这是我的代码。发生的情况是，当我第一次启动应用程序时，我尝试选择一个文件，结果代码为 0。第二次单击按钮打开资源管理器时，我选择了文件，结果代码为 -1，所以它成功了打开文件。知道第一次会发生什么吗？我似乎无法理解为什么它给我代码 0？多谢你们。PS 这是糟糕的编码，但我只是想了解 Android 中的文件打开过程。谢谢。

```
public class MainActivity extends Activity implements OnClickListener {

final int ACTIVITY_CHOOSE_FILE = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button my_button = (Button) findViewById(R.id.activity);
    my_button.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType("file/");
        startActivityForResult(intent, ACTIVITY_CHOOSE_FILE);

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.v("onActivityResult","requestCode is: " + requestCode + " resultCode" + resultCode);
    if ((requestCode == ACTIVITY_CHOOSE_FILE) && (resultCode == RESULT_OK)) {
        Log.v("onActivityResult","Passes through if statement");
        //String fileSelected = data.getStringExtra("fileSelected");

        String FilePath = data.getData().getPath();
        TextView my_text = (TextView) findViewById(R.id.textView1);
        my_text.setText(FilePath);
        StringBuilder text = null;

        try{
            Scanner input = new Scanner(FilePath);
            //File dir = Environment.getExternalStorageDirectory();
            //File yourFile = new File(dir, FilePath);

            //Read text from file
            text = new StringBuilder();

            try {
                BufferedReader br = new BufferedReader(new FileReader(FilePath));
                String line;

                while ((line = br.readLine()) != null) {
                    text.append(line);
                    text.append('\n');
                }
            }
            catch (IOException e) {
                //You'll need to add proper error handling here
            }
        }catch(Exception e){
            Log.v("file not opened","THE FILE WAS NOT OPENED");
        }

        my_text.setText(text);
    }                   
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:27:59.767

此类错误是第 3 方错误，请尝试在另一台设备上使用该应用程序或使用模拟器，看看它是如何进行的。

# ios - 应用程序委托和视图控制器之间的 NSUserDefaults

> ID：14530266
> 
> 赞同：0
> 
> 时间：2013-01-25T20:57:33.700
> 
> 标签：ios, uiviewcontroller, nsuserdefaults, appdelegate

如果我使用

```
settings = [NSUserDefaults standardUserDefaults]; 
```

在我的视图控制器中，将使用

```
settings = [NSUserDefaults standardUserDefaults]; 
```

在我的应用程序委托（2个不同文件中的2个不同属性）中有这个

```
[settings objectForKey:@"location"]; 
```

返回相同的值？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:58:48.170

是的。这就是standardUserDefaults 的目的。

# asp.net - PostBack 和功能问题

> ID：14530268
> 
> 赞同：0
> 
> 时间：2013-01-25T20:57:34.693
> 
> 标签：asp.net, vb.net

不使用 jQuery 或 Javascript，因为这是对现有站点的修复，并且不是那样设计的。Well I have gotten to a point where when the DropDownList is selected and does it's postBack I do my logic of setting the textBox readOnly status to true or false. 我现在遇到的问题是 selectValue 不一致。它在 selct 字段中显示的内容不是发布回页面的内容。假设我有 None, 5.00, 10.00, 15.00, 20.00 作为我的选择。我首先选择 10.00 并返回 None 然后我选择 20.00 它显示 10.00。它回发先前的选择值。整个网站是从页面背后的代码编写的。aspx 页面完全是从 .vb 页面写入的。一切都写入asp标签。这是代码；

```
 If Page.IsPostBack Then
                If product_option_is_required > 0 then
                    myTextBox.ReadOnly= true
                Else
                    myTextBox.ReadOnly= false
                End if
                For Each child_control As Control In productOptions.Controls
                    If TypeOf child_control Is DropDownList Then
                        Dim child_ddl As DropDownList = child_control
                        tempName = products.getProductDependant("product_option_name",product_option_id)
                        tempSelectText = products.getProductSelectDependant("product_option_detail_name",child_ddl.SelectedValue)
                        priceDependant.Text ="here" & child_ddl.ID & " " & child_ddl.SelectedIndex & " " & child_ddl.SelectedValue & " --" & tempSelectText
                        If child_ddl.Text = "None" then
                            myTextBox.ReadOnly = true
                            myTextBox.Text = "If selected above enter name"
                        Else
                            myTextBox.ReadOnly = false
                            myTextBox.Text = ""
                        End if
                    End If

                next
            End if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:41:28.847

在您的代码中，您使用dependantProd 就像一个字符串值。

```
dependantProd = tempName.Replace(" ", "_") & "_" & product_option_id 
```

如果它是一个字符串，你不能这样做 -

> 如果dependantProd.SelectedIndex > 0 那么

此外，如果您动态创建控件，则需要在回发中检索。否则，您将无法检索其发布的价值。

[https://stackoverflow.com/a/14462040/296861](https://stackoverflow.com/a/14462040/296861)

[https://stackoverflow.com/a/14449305/296861](https://stackoverflow.com/a/14449305/296861)

# java - Activity disappear when press Home Android

> ID：14530279
> 
> 赞同：-2
> 
> 时间：2013-01-25T20:58:02.350
> 
> 标签：java, android, android-activity

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent(this, Main.class);
    startActivity(intent);

} 
```

}

this is my main luncher activity (MainActivity) i am trying to start new activity called Main. so far so good the application load successfully but when i press the Home btn and return to desktop the application closed without any error and i cant return to it. also when i see the background apps my app isnt there

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:09:41.440

如果您的“不保留活动”复选框处于打开状态，请检查您的模拟器/手机中的开发人员设置。设置 > 开发人员选项 - 底部的应用程序部分。如果选中，则取消选中。你的解释不足以解决这个问题。

# html - HTML Agility Pack Parsing

> ID：14530280
> 
> 赞同：2
> 
> 时间：2013-01-25T20:58:06.107
> 
> 标签：html, asp.net-mvc, html-agility-pack

I am very new to HTML Agility Pack. I am trying to find some documentation but having some issues.

I have the following code:

```
<div class="person">
<a href="blah1.html">Person 1</a>
</div>
<div class="person">
<a href="blah2.html">Person 2</a>
</div>
<div class="person">
<a href="blah3.html">Person 3</a>
</div>
<div class="person">
<a href="blah4.html">Person 4</a>
</div> 
```

Using the parser, how can I only grab links within a div that has a class person?

Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:03:25.023

With [Html Agility Pack](http://htmlagilitypack.codeplex.com/) (available on NuGet):

```
HtmlDocument html = new HtmlDocument();
html.Load(path_to_html); // or html.LoadHtml(html_string)           
var links = html.DocumentNode.SelectNodes("//div[@class='person']/a")
                .Select(n => n.GetAttributeValue("href", null)); 
```

Returns:

```
"blah1.html"
"blah2.html"
"blah3.html"
"blah4.html" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:03:29.220

The following XPath corresponds to your description:

```
//div[@class='person']/a/@href 
```

It will return the `href` attributes of the first `a` elements that reside directly under any `div` element with the `class` attribute that is equal to `person`.

If you are more comfortable with jQuery style selectors, take a look at using [CsQuery](https://github.com/jamietre/CsQuery) instead of the HTML Agility Pack.

# javascript - 防止页面上每个 Dojo xhr 请求中的缓存

> ID：14530284
> 
> 赞同：0
> 
> 时间：2013-01-25T20:58:20.330
> 
> 标签：javascript, caching, dojo, xmlhttprequest, intercept

我可以使用*IO 管道主题*拦截 Dojo 1.6.1 xhr 请求，如下所述：

[Dojo - 拦截 XHR 调用](https://stackoverflow.com/questions/4781018/dojo-intercepting-xhr-calls)

我想在 URL (fe `&time=12345`) 中添加一个时间参数，以防止在某些（或所有）xhr GET 请求中缓存源自`dojox.data.JsonRestStore`（我想要实现的细节在[这里](https://stackoverflow.com/questions/14519695/how-to-disable-cache-in-extlib-rest-control-which-uses-dojox-data-jsonreststore)）。我的代码如下所示：

```
dojo.subscribe("/dojo/io/send", function(deferred) {

    if (deferred.ioArgs.url.indexOf("restService1") > -1) {
        deferred.cancel();
        deferred.ioArgs.url += '&time=12345' // test value at this point
        dojo.xhrGet(deferrred.ioArgs);
    }
}); 
```

基本上我正在尝试取消请求，向 URL 添加一个字符串，然后使用修改后的 URL 发出请求。

这根本不起作用：带有修改 URL 的请求不会最终到达服务器，并且我在浏览器控制台中收到很多这些错误：

![铬错误](../Images/9b275c7a710af992d7190dfe6a806658.png)

错误发生在 dojo.js 的第 14 行。在这些错误之后，Chrome 选项卡最终会崩溃。

我也试过只是修改`deferred.ioArgs.url`并且什么都不做，但这没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:09:34.037

两者`dojo/io/script`都有`dojo/xhr`一个`preventCache`参数，它完全符合您的要求。`preventCache: true`因此，您可以添加到请求参数中，而不是尝试拦截吗？

[http://dojotoolkit.org/reference-guide/1.6/dojo/io/script.html#dojo-io-script](http://dojotoolkit.org/reference-guide/1.6/dojo/io/script.html#dojo-io-script)

[http://dojotoolkit.org/reference-guide/1.6/dojo/xhrGet.html#dojo-xhrget](http://dojotoolkit.org/reference-guide/1.6/dojo/xhrGet.html#dojo-xhrget)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T09:57:36.870

**Sven Hasselbach**再次给出了答案：

```
/**
 * Cache Prevention for Dojo xhr requests
 *
 * Adds no-cache header and enables dojo's preventCache feature
 * for every dojo xhr call. This prevents the caching of partial
 * refreshs.
 *
 * @author Sven Hasselbach
 * @version 0.3
 *
 **/
dojo.addOnLoad(
    function(){
        if( !dojo._xhr )
        dojo._xhr = dojo.xhr;

        dojo.xhr = function(){        
            try{
                var args = arguments[1];   
                args["preventCache"] = true;
                args["headers"] = { "cache-control": "no-cache" };
                arguments[1] = args;
          }catch(e){}

          dojo._xhr( arguments[0], arguments[1], arguments[2] );
        }
    }
) 
```

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests](http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests)

尝试了一下，它通过向`&dojo.preventCache=1359366392301`xhr URL 添加参数完全符合我的要求。它似乎也添加了一个*缓存控制*标头。

# c# - C# 图形和位图

> ID：14530285
> 
> 赞同：1
> 
> 时间：2013-01-25T20:58:19.863
> 
> 标签：c#

我正在尝试将图像添加到 C# 项目并且它始终设置为 NULL，并且我收到此警告“Snake_Game.Form3.GFX”从未分配给，并且始终具有其默认值 null。这是我试图做的。

```
private Graphics GFX;

public Form3()
        {
            InitializeComponent();
            this.CreateGraphics();
        } 
```

在其他功能中我添加了这个：

```
GFX.DrawImage(Bitmap.FromFile(@"C:\C#\Buton.png"), new Point(0, 0)); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:01:46.417

您需要在使用前初始化您的 Graphics 对象

```
 public Form3()
    {
        InitializeComponent();
        GFX = this.CreateGraphics();
    } 
```

那么当您尝试将它用于 DrawImage 时，它​​不为空，您可以调用它的方法。但是，让我说这是错误的方法。您在表单的生命周期内保留一个 Graphics 对象，消耗宝贵的系统资源。
在使用前创建对象并在使用后立即销毁它是一种很好的做法

所以去掉表单构造函数中的初始化和全局级别的声明

```
 public Form3()
    {
        InitializeComponent();
    } 
```

并且，当您需要对象调用时

```
 using(Graphics GFX = this.CreateGraphics())
    {
         GFX.DrawImage(Bitmap.FromFile(@"C:\C#\Buton.png"), new Point(0, 0));

         .... // Other graphic code here

    } // This close brace destroy the GFX object releasing its resources. 
```

一些对您有用的链接

[CreateGraphics](http://msdn.microsoft.com/en-us/library/yh598w02%28v=VS.80%29.aspx)
[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=VS.80%29.aspx)

# c# - DataView RowFilter with TimeSpan DataType

> ID：14530286
> 
> 赞同：3
> 
> 时间：2013-01-25T20:58:22.677
> 
> 标签：c#, timespan, dataview, rowfilter

I try to use the `DataView` `RowFilter` for a column with DataType "TimeSpan" as following:

```
dv.RowFilter = ("Convert([time],System.String) LIKE '17:12:00'") 
```

I've found that the search Parameter `"%17% or %12%`, for the double Zeros i have to use a single one: %0%, works fine, now im not sure about the `Convert(timespan, System.String)` Format... . I know that the `TimeSpan` have a Special Format like `(17,12,0)` or `{17}{12}{0}` but as a not specified convert to string it should be: `hh:mm:ss` like `timespan.ToString()` - but with the `DataView's` RowFilter i can't get this to work!

I'm using Visual Studio 2008 Pro with .NET 3.5.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-27T13:39:47.777

问题在于转换为字符串。它产生一个以非常奇怪的方式格式化的字符串。为了说明，让我们使用以下 C# 代码创建一个表：

```
 var table = new DataTable();
        table.Columns.Add("span", typeof(TimeSpan));
        table.Rows.Add(new object[] { new TimeSpan(1, 2, 3) });
        table.Rows.Add(new object[] { new TimeSpan(4, 5, 6) });
        table.Columns.Add("asstring");
        table.Columns["asstring"].Expression = "Convert(span, 'System.String')"; 
```

在我们将它分配给一个网格控件后，它看起来像这样：

[![在此处输入图像描述](../Images/fa095c2b22e5018f08c7c4d4a7a6a512.png)](https://i.stack.imgur.com/eIufe.png)

在微软自己的文档中，他们说查看文档`Expression`以了解`Convert(span, 'System.String')`. `RowFilter`这意味着它将 TimeSpan 转换为您在屏幕截图中看到的确切内容 -`01:02:03`变为`PT1H2M3S`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-30T14:55:07.517

总而言之，您可以使用以下方法来过滤`TimeSpan`a`DataTable`中特定值的类型列。背后的想法是将存储`TimeSpan`的动态转换为其“数据库”字符串表示形式，这反过来又使您能够`TimeSpan`在将其转换为其“数据库”字符串表示形式后立即与您选择的值进行字符串比较。

创建值的“数据库”字符串表示`TimeSpan`需要特别注意具有零值的时间段。它的规范可以用以下模式来描述：

```
PT[<hours>H][<minutes>M]<seconds>[.<fraction>]S 
```

其中`<fraction>`指的是百万分之一秒，请参阅 MSDN 文档的“自定义时间跨度格式字符串”。除秒外，需要省略具有零值的时间段。此外，小数部分预计不包含任何尾随零位。最后，字符串由前缀`PT`和后缀括起来`S`。

这导致以下格式字符串创建正确的“数据库”字符串表示：

```
TimeSpan oTimeSpan;  // TimeSpan value of your choice
string strTimeSpan =
    string.Format("PT{0}{1}{2}{3}S",
        (oTimeSpan.Hours == 0
            ? ""
            : string.Format("{0:%h}H", oTimeSpan)),
        (oTimeSpan.Minutes == 0
            ? ""
            : string.Format("{0:%m}M", oTimeSpan)),
        string.Format("{0:%s}", oTimeSpan),
        string.Format(".{0:fffffff}", oTimeSpan).TrimEnd('0', '.')) 
```

`TimeSpan`为某些值过滤a中的类型列的表达式`DataTable`现在可以是：

```
string strExpr =
    "Convert([ColumnName], '" + typeof(string).ToString() + "')" 
    + "='" + strTimeSpan + "'"; 
```

其中`ColumnName`是指包含值的`DataTable`列的名称。`TimeSpan`

请注意，此方法基于字符串比较，因此，只有比较相等才能提供可靠的结果。其他比较操作，如“大于”或“小于”，很可能会产生意想不到的结果。

# backbone.js - 对 Backbone 集合的视图特定修改

> ID：14530296
> 
> 赞同：2
> 
> 时间：2013-01-25T20:58:55.353
> 
> 标签：backbone.js, handlebars.js, backbone-relational

我有一个主干模型（我们称之为`Foo`），其中包含*n*个子模型（我们称之为它们`Bar`）的集合，在一个特定的视图中，我只想显示这些子模型中的*m*个，以及沿线的消息“ *（nm）*剩余”。

现在，我得到的是这样的：

```
var FooView = Backbone.View.extend({
    ...
    render: function() {
        this._barViews = [];
        var bars = this.model.get("bars");

        var that = this;
        _.each(bars.first(maxToShow), function(bar) {
            that._barViews.push(new BarView({model:bar}));
        }

        var remaining = bars.length - maxToShow;
        this.model.set("remaining", remaining > 0 ? remaining : undefined;

        var json = this.model.toJSON();
        $(this.el).html(this.template(json));

        _(this._holdViews).each(function(hv) {
            holdList.append($(hv.render().el));
        });
    }
}); 
```

这行得通，但感觉很hacky，因为我将“remainingMessage”注入到模型中，即使这是特定于这个特定视图的。（另一个视图可能显示所有的`bars`，或者一个都不显示，并且可能有也可能没有剩余的消息。）我对嵌套视图也不是很兴奋，因为它们意味着创建一个额外的模板文件并且必须记住包含它（FWIW，我使用 Handlebars.js 作为模板，带有服务器端编译）。

有没有更好的方法来 (1) 将`bars`集合过滤到`maxShown`项目，以及 (2) 生成/包含视图中剩余的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T22:07:46.137

您需要一个“视图模型”——一个专门用于处理有关将使用它的特定视图的问题的模型。幸运的是，这在 JavaScript 中非常简单。

使用`Object.create`您可以获得一个新的对象实例，该实例继承自您作为参数传入的原始对象。这使我们能够用新代码“装饰”原始模型，而无需实际更改原始模型。

在您的情况下，我们想用剩余的信息装饰“foo”模型。不过，我们只需要`toJSON`结果中的该信息，因此我们只会将其添加到该方法中。

```
 function buildFooViewModel(model){
  var foovm = Object.create(model);

  foovm.toJSON = function(){
    // call the original model's toJSON
    var args = Array.prototype.slice.apply(arguments);
    var json = model.toJSON.apply(this, args);

    // add the needed "remaining" data using your calculations, here
    json.remaining = bars.length - maxToShow;

    // send the json data back
    return json;
  }

}

var FooView = Backbone.View.extend({

  initialize: function(){
    // use the view model instead of the original
    this.model = buildFooViewModel(this.model);
  },

  render: function(){
    // your normal render stuff here... calling this.model.toJSON
    // will return your JSON data with the `remaining` field in it already
  }

}); 
```

我经常使用需要这样计算的视图来执行此操作。您可以在[http://ravenhq.com](http://ravenhq.com)上看到它，例如，在数据库管理屏幕中，显示已使用/剩余百分比以及类似的其他值。

# multithreading - asp.net mvc 3 app需要先写一行，然后等待行更新再更新UI

> ID：14530301
> 
> 赞同：2
> 
> 时间：2013-01-25T20:59:08.753
> 
> 标签：multithreading, asp.net-mvc-3, asynchronous

我正在开发一个 MVC 3 Web 应用程序（.NET Framework 4、IIS7），它充当基于某些遗留技术构建的自定义 ID 卡打印机的前端。无需过多介绍详细信息，当单击“打印”时，Web 应用程序会将带有卡片信息的行写入数据库并返回。然后后端的服务获取该行并处理卡片的实际打印。后端服务完成后，它会使用指示成功或失败的状态列更新该行。

现在，应用程序 POST 数据（通过 jquery ajax），一旦将行写入数据库，控制器就会返回成功，并显示给用户。由于我所描述的设置，这可能会或可能不会真正反映现实，因为服务或卡片打印机可能有问题。

我们有一个新要求，即根据服务对行的更新，使 UI “等待”更新或成功或失败。它已经通过 jquery ajax 调用在客户端以异步方式设置，我不担心在前端处理它。我看过 SignalR 之类的，并涵盖了它的这一部分。

我正在寻找的是有关如何在 Web 服务器端正确处理它的信息（链接和文章，而不是解决方案）。我不想在从早期请求定期轮询数据库时阻止传入的打印请求。从高层次来看，我想知道设置控制器和必要的后台进程的最佳方法是什么：

1.  接受请求并将行写入数据库
2.  设置后台轮询进程，然后将控制权返回给 ASP.net
3.  经常轮询数据库，直到行被更新（或达到超时）
4.  回复客户

我不是线程方面的专家，但我知道如果这样做不正确，我会处于危险的境地。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:36:47.857

我会发表评论，但我没有足够的代表。

为什么将重点放在服务器推送到 UI 上？您说表单将行写入数据库，然后在屏幕上显示“成功”，这可能不是真实的状态。在打印过程中的任何时候，您都可以查询数据库并找到最新状态吗？

是否有什么东西阻止您让 UI 每 X 秒更新一次具有最新状态的页面部分？让 UI 拉取信息而不是服务器将其推出。

我有一个页面显示来自数据库的日志记录。每天都会有一个进程开始向日志写入更多记录，并且具有自动刷新功能来监视该进程很有用。在那个页面上，我有一个 Ajax 表单，它向控制器发出请求，控制器在局部视图中输出一个新表。这个局部视图被放入`UpdateTargetId`Ajax 表单中。对于自动刷新，我利用 javascript`setInterval()`函数每 X 秒提交一次 Ajax 表单。还可以指定其他回调，例如`OnSuccess`您可以在哪里检查特定的返回条件。

[Ajax.BeginForm 的 AjaxOptions 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.aspx)

[示例表格](http://pratapreddypilaka.blogspot.com/2012/01/htmlbeginform-vs-ajaxbeginform-in-mvc3.html)

[w3schools 的 setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:31:03.960

这是我完成它的方式的一些伪代码。我已经测试过它不会阻止额外的传入请求，并且在处理多个并发请求时表现正确。但是，这确实会在 task.Wait() 处阻塞，因此在负载下，我想如果线程池配置不正确，它会遇到性能问题。根据我对 merekel 的评论，最后我可能会使用客户端轮询解决方案，而不是这样：

```
public class MyController : AsyncController 
{
    public void SaveAndPrintAsync(CardData data)
    {
        if (data == null)
            throw new ArgumentNullException("data", "data cannot be null");

        // 1\. Accept the request and write the row to the database
        var result = _databaseFacade.Save(data);
        AsyncManager.Parameters["result"] = result;

        // 2\. set up a background polling process, then return control to ASP.net
        AsyncManager.OutstandingOperations.Increment();
        var task = _databaseFacade.GetPrintStatusAsync(data);
        task.ContinueWith(t =>
        {
            AsyncManager.OutstandingOperations.Decrement();
        });
        task.Wait();
        AsyncManager.Parameters["status"] = task.Result;
    }

    public JsonResult SaveAndPrintCompleted(PrintResult result, PrintStatus status)
    {
        try // return an answer to the client
        {  
            if (status == PrintStatus.Printed)
                return Json(result);

            throw new ApplicationException("An error occurred while printing. Please try again.");
        }
        catch (Exception ex)
        {
            return FormatError(ex); // returns Json
        }
    }
}

public class DatabaseFacade 
{
    public Task<PrintStatus> GetPrintStatusAsync(CardData data)
    {
       var task = Task.Factory.StartNew(() =>
           {
               var counter = 0;
               var status = PrintStatus.Waiting;
               do
               {
                   ++counter;
                   var queue = _myDBContext.FindById<CardData>(data.ID);

                   if (queue != null)
                       status = (PrintStatus)Enum.Parse(typeof (PrintStatus), queue.PrintStatus.ToString());

                   if (status == PrintStatus.Waiting || status == PrintStatus.Printing)
                       Thread.Sleep(1000);

               } while (counter < 5 && (status == PrintStatus.Waiting || status == PrintStatus.Printing));
               return status;
           }, TaskCreationOptions.LongRunning);
       return task;
    }
} 
```

# conventions - 数据集中标签输入的 scikit-learn 约定

> ID：14530303
> 
> 赞同：0
> 
> 时间：2013-01-25T20:59:16.940
> 
> 标签：conventions, scikit-learn

scikit-learn 数据集中的标签输入是否有任何通用格式？我看到它有用于输出的标签列表`target_names`。我想遵循 scikit 约定并在输入变量（例如性别）中保留一些关于标签的数据。这有什么约定吗？像这样的东西

```
>>> data_set.inputs["sex"]
{'male': 1, 'female': 0} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:19:19.097

没有存储分类特征名称信息的约定。你可以自由地做你想做的事。

或者，您可以使用原始格式存储原始数据，并在需要从数据构建模型时即时使用 DictVectorizer / FeatureHasher 和 LabelBinarizer。

# ruby-on-rails-3 - Rails 3 - 嵌套模型 - has_many - jquery 文件上传

> ID：14530307
> 
> 赞同：5
> 
> 时间：2013-01-25T20:59:36.783
> 
> 标签：ruby-on-rails-3, carrierwave, nested-attributes, jquery-file-upload

我有一个 Post 模型，它 has_many :photos。在用户创建新帖子时，用户还应该能够为给定帖子选择照片。

我使用 RAILS 3.2.9、nested_form、carrierwave 和 jquery-fileupload-rails gem 和 ryan [bates railscasts](http://railscasts.com/episodes/381-jquery-file-upload)作为指南。

一切似乎都设置正确，但问题是，当用户选择一张照片（触发 fileupload() 函数）时，会创建新的帖子和新的照片记录。一旦我按下“创建帖子”，就会再次创建另一个帖子记录。

任何帮助/想法表示赞赏。

非常感谢。

彼得

```
class Post < ActiveRecord::Base
  has_many :photos, as: :attachable, :dependent => :destroy
  accepts_nested_attributes_for :photos, :allow_destroy => true
end

class Photo < ActiveRecord::Base
  belongs_to :attachable, polymorphic: true
  attr_accessible :image, :description, :post_id, :attachable_id, :attachable_type
  mount_uploader :image, PhotoUploader
end

# Post Controller
def create
  @post = Post.new(params[:post])
  @post.save
end

# _form.html.erb
<%= nested_form_for @post, :html => { :multipart => true } do |f| %>
  <%= f.fields_for :photos do |photo| %>
    <% if photo.object.new_record? %>
      <%= photo.file_field :image, id: "fileupload" %>
      <%= photo.hidden_field :id %>
      <%= photo.hidden_field :attachable_id %>
      <%= photo.hidden_field :attachable_type %>
    <% else %>
      <%= image_tag(photo.object.image.url(:thumb)) %>
      <%= photo.check_box :_destroy %>
    <% end %>
  <% end %>
<% end %>

#application.js
$('#fileupload').fileupload(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T19:54:26.733

[https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.fileupload.js#L140](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.fileupload.js#L140)

文件上传插件会在您选择文件后立即通过 Ajax（创建帖子）提交表单（请参阅链接文件以获取源代码）。这将在他们选择它后立即创建您的对象。

为什么需要文件上传插件？您不需要通过 AJAX 提交它们，因此嵌套表单应该能够解决您的问题。只需将 link_to_add 和 link_to_remove 与常规文件字段一起使用。

编辑：

假设您想保留文件字段插件（您似乎这样做了），那么您需要有一种接收它们的方法。

最好的方法是在帖子视图页面中，将文件上传代码嵌套在照片的表单中，*而不是*嵌套在帖子的嵌套表单中。这样，每张照片都会发布到照片创建选项，然后您可以在照片控制器中提供一个 javascript 回调，该回调使用隐藏字段更新发布表单，告诉它哪些 photo_ids 已上传到该帖子（显然确保这一点！）。

我个人不喜欢这种方法，因为您将在用户创建帖子表单*之前*上传并接受文件（这意味着他们可以离开并在您的服务器上留下 5-10 张不与任何帖子绑定的照片）。 ..但如果您希望他们能够使用 AJAX（又名文件上传插件）上传照片，这是一个必要的先决条件。

没有一种非常好的方法可以做到这一点，文件上传工作通常很混乱。我不知道有任何 jQuery 插件可以在文件字段上工作并允许您将多个文件字段输入集转换为包含每个单独文件的隐藏字段。

# ruby-on-rails - Rails jQuery将数据库表中的一行添加到显示表的最后一行

> ID：14530311
> 
> 赞同：1
> 
> 时间：2013-01-25T20:59:48.553
> 
> 标签：ruby-on-rails

是否可以使用 jQuery 将数据库表中的最后一条记录添加到 html 表的最后一行？

像这样的东西：

```
 $(".save-expense .btn").click ->
    $('#expense_table').append( Expenses.last ) 
```

并指明使用哪些字段。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:29:27.263

首先是好消息：**是的，有可能:)**

您想要的是向您的服务器发送一个 ajax 请求，该请求返回最后的费用信息。所以你的javascript应该看起来像这样。

应用程序.js

```
$(".save-expense .btn").live('click', function(){
  $.ajax({
    type: 'GET',
    url: '/your_controller/last_expense/', # make sure this url is correct
    data: '', # you can also send data if you want
    dataType: "script"
  });
 }; 
```

你的控制器需要知道如何响应这个请求，所以：

your_controller.rb

```
def last_expense
  # if you send data you can access it via params hash
  # e.g. params[:my_data]
  @last_expense = Expense.last
  respond_to do |format|
      format.js render 'last_record.js.erb'
  end
end 
```

模板看起来像：

_last_record.js.erb

```
$('#expense_table').append( <%= j(content) %>)
# or with a partial
$('#expense_table').append( <%= j(render partial: 'expense'), locals: @last_expense %>) 
```

PS我不确定“并指出要使用的字段”是什么意思。我有点赶时间，所以不要相信语法（尤其是 javascript ;)）

希望这可以帮助！如果您需要更多帮助，明天将再次检查。

# cron - 为什么包含 php mail() 的第五个参数时，cron 作业无法发送电子邮件？

> ID：14530313
> 
> 赞同：3
> 
> 时间：2013-01-25T20:59:52.230
> 
> 标签：cron, php

我有一个 cron cron 作业设置来发送电子邮件。它使用以下命令执行：

```
/usr/bin/php -q /var/www/vhosts/domain.com/cron/job.php 
```

当我从浏览器执行 php 脚本时，脚本会按预期发送电子邮件。由 cron 作业运行时失败。

我在邮件日志中看不到任何错误。唯一的区别在于“从”行。从浏览器执行脚本时，日志显示：

```
Jan 25 12:24:39 VMW01 qmail-remote-handlers[1001]: from=sender@domain.com 
```

但是当 cron 作业执行脚本时，“from”行变为：

```
Jan 25 12:15:01 VMW01 qmail-queue-handlers[1000]: from=anonymous@VMW01.server.net 
```

奇怪的是，当我删除 mail() 行的第五个参数时，cron 作业将发送电子邮件。

```
mail($email, $subject, $body, $headers, '-fsender@domain.com'); 
```

我会简单地接受这个，但如果我删除参数，电子邮件通常会被服务器拒绝 - 我认为这是因为未设置参数。

知道为什么会发生这种情况以及如何解决吗？我很乐意为这个问题添加更多细节，以便找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T22:47:51.930

正如@Michael 所说，您的 cron 工作很可能正在使用不同的 php.ini 文件。您可以使用该`php_ini_loaded_file()`函数查看脚本中加载了哪些文件 - 然后从命令行或您的 cron 运行它以查看与 Web 执行的区别。

我的猜测是问题的出现是因为 cron 作业（与命令行相同）的 php.ini 设置了 safe_mode，在这种情况下，您不应该使用`mail()`函数的最后一个参数，因为它可能会失败。作为证据，如果您查看[`PHPMailer`该类](http://svn.codespot.com/a/apache-extras.org/phpmailer/trunk/class.phpmailer.php)，则有一个`mail_passthru()`方法可以简单地调用 PHP`mail()`函数。请注意，它在不在时省略了额外的参数`safe_mode`：

```
private function mail_passthru($to, $subject, $body, $header, $params) {
    if ( ini_get('safe_mode') || !($this->UseSendmailOptions) ) {
        $rt = @mail($to, $this->EncodeHeader($this->SecureHeader($subject)), $body, $header);
    } else {
        $rt = @mail($to, $this->EncodeHeader($this->SecureHeader($subject)), $body, $header, $params);
    }
    return $rt;
} 
```

从命令行（或您的 cron 作业）调用 php 时，您可以加载特定的 php.ini 文件，如下所示：

```
/usr/bin/php -q /var/www/vhosts/domain.com/cron/job.php -c /path/to/php.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T21:07:37.260

我遇到了同样的问题，我发现将我的 cron 命令更改为 wget -O/dev/null [http://myurl.com/](http://myurl.com/)就像在浏览器中一样执行它并发送电子邮件。

# php - 开发 PHP 应用程序时的错误处理

> ID：14530315
> 
> 赞同：-1
> 
> 时间：2013-01-25T21:00:03.707
> 
> 标签：php, macos, apache

当我在 PHP 开发期间出现运行时错误而不是获取行号（如在 Java 中）时，我只会收到 HTTP 500 内部服务器错误。

![在此处输入图像描述](../Images/5c0f8c18c95dc0599c2170dea24a8d6e.png)

为了了解错误发生在哪一行，我必须注释掉每一行代码，直到应用程序运行。这是 PHP 开发人员的正常做法还是我遗漏了什么。

我尝试了以下但没有成功：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

我在 Mac OS 10.7 Apache Web 服务器上进行本地开发。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T21:08:48.473

不知道为什么不赞成，但这是解决方案。谢谢ceejayoz。

```
ini_set('display_errors', true); 
```

# asp.net-mvc-3 - Asp.net MVC 3 & Ajax，表单发布两次

> ID：14530318
> 
> 赞同：2
> 
> 时间：2013-01-25T21:00:23.750
> 
> 标签：asp.net-mvc-3, jquery

目前我的表单正在通过 ASP.NET 以及 AJAX 提交，但我只希望它通过 AJAX 提交（而且我不想使用 Ajax.BeginForm，因为它很臭）。

请注意，我将表单中的数据或多或少地剥离为仅涉及的元素。

```
 @using (Html.BeginForm("Action", "Controller", FormMethod.Post))
    {
    <div style="width:275px;">
        <a href="#" id="edit_licenses" class="grayBtn left">Edit</a>
        <a href="#" id="cancel_licenses" style="display:none;" class="grayBtn left">Cancel</a>
        <input id="submit_licenses" type="submit" style="display:none;" value="Save" class="redBtn right" />
    </div>
    }
    <br />
</div>

<script type="text/javascript">
    $('#edit_licenses').click(function () {
        swap_licenses(false);
        return false;
    });

    $('#cancel_licenses').click(function () {
        swap_licenses(true);
        $('form').resetForm();
        return false;
    });

    $('form').submit(function (e) {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {

                }
            });
        }
        return false;
    });

    var swap_licenses = function (bool) {
        $('.licenses').each(function () { $(this).attr('disabled', bool); });
        $('#submit_licenses, #edit_licenses, #cancel_licenses').toggle();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:02:57.673

您是否尝试使用该`preventDefault`方法阻止正常的表单提交？

```
$(function(){ 

   $('#submit_licenses').click(function (e) {
        e.preventDefault();
        var _this=$(this);
        swap_licenses(false);           
        PostForm(_this.closest("form"));
   });

});

function PostForm(postedForm)
{
   //postedForm will be the form object here. You may do your validation here

     $.ajax({
              url: postedForm.attr("action"),
              type: postedForm.attr("method"),
              data: postedForm.serialize(),
              success: function (result) {               
            }
      });
 }

function swap_licenses(someParameter)
{
   //This method does something useful
} 
```

现在您不需要表单提交事件的事件处理程序，因为我们已经将其绑定到提交按钮。

表单提交/发布也应该始终是 **HTTP Post**方法。所以你可以`PostForm`像这样简化你的方法

```
function PostForm(postedForm)
{
    $.post(postedForm.attr("action"),postedForm.serialize(),function(data){
       //do something with the response
    });          
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T06:07:30.340

在我看来，这是因为您使用的是提交按钮。将其转换为类型按钮，它将完美地工作。

# input - Mootools DatePicker 手动输入

> ID：14530329
> 
> 赞同：2
> 
> 时间：2013-01-25T21:01:00.140
> 
> 标签：input, datepicker, mootools

可以扩展标准 DatePicker 以允许您手动键入输入日期吗？面板是否出现并不重要。

如果是这样，有什么提示吗？

blockKeydown 选项不起作用，（可能已过时）调试也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T12:41:39.180

使用选项：`blockKeydown: false;`

```
blockKeydown: (*boolean*, defaults to true) 
    Whether it should block keydown events, 
    so the user can type into the input field or not. 
```

来源：[https ://github.com/arian/mootools-datepicker/#options-2](https://github.com/arian/mootools-datepicker/#options-2)

# c# - 更新保存到数据库的对象列表

> ID：14530333
> 
> 赞同：1
> 
> 时间：2013-01-25T21:01:18.397
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-4

我有一个包含两个对象的列表，我想更新每个对象中的同一列并将其保存到数据库中。我已经尝试过了，但它不起作用。正确的对象在列表中，因为我设置了一个下拉框来检查它们是否存在。

```
List<Fighter> item = fight.Fighters.ToList<Fighter>();
item.ToList().ForEach(c => c.Draw++);
            db.SaveChanges(); 
```

有任何想法吗？

* * *

我在战斗和战士之间有一个多对多的关系，两个战士属于一个战斗。

编辑：

```
[HttpPost]
    public ActionResult HandleResult(Fight fight)
    {

        List<Fighter> item = fight.Fighters.ToList<Fighter>();

        ... //Code here that isnt related

        foreach (var i in item)
                {
                    item.ToList().ForEach(c => c.Draw++);
                    db.Fighters.Add(i);
                }

                db.SaveChanges();
     } 
```

因此，正如您在 httpPost 中看到的，我想获取参与战斗的战士，并将 1 加到战士实体中的属性 Draw。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:06:26.753

您正在尝试保存它而不实际将其添加到数据库表中。看起来您正在使用实体框架。假设是这样，您将执行以下操作。

```
List<Fighter> item = db.fight.Fighters.ToList<Fighter>();
item.ToList().ForEach(c => c.Draw++);
foreach (var i in item)
{
    db.fight.Fighters.AddObject(i);
}

db.SaveChanges(); 
```

编辑：更新语法。这是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:07:58.950

在执行 db.SaveChanges(); 之前，您必须执行类似 db.Add(object) 的操作；

# ios - 通过 Storyboard 中的模态序列检索和传递注释数据

> ID：14530336
> 
> 赞同：2
> 
> 时间：2013-01-25T21:01:35.133
> 
> 标签：ios, ios6, mkannotation, uistoryboardsegue

我有一个程序，它使用 UI Detail Disclosure 按钮创建地图注释，该按钮使模式 segue 到注释的详细视图。该应用程序是使用情节提要创建的。

这是定义注释的代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    MKPinAnnotationView *pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"PIN"];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    [button addTarget:self action:@selector(myMethod) forControlEvents:UIControlEventTouchUpInside];

    if ([annotation isKindOfClass:[MKUserLocation class]]) {
        pin.animatesDrop = YES;
        return nil;
    }

    else {
        [pin setPinColor:MKPinAnnotationColorPurple];
    }

    pin.rightCalloutAccessoryView = button;
    pin.animatesDrop = YES;
    pin.canShowCallout = YES;

    return pin;
} 
```

这是`calloutAccessoryControlTapped`方法：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control
{

    NewClass *annView = view.annotation;

    AnnotationView *detailView = [[AnnotationView alloc]init];

    detailView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    detailView.buildingName = [NSString stringWithFormat:@"my dictionary is %@", annView.title];

    detailView.desciptionText = annView.title;

    [self presentViewController:detailView animated:YES completion:nil];

} 
```

最后，`prepareForSegue`方法如下：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if([segue.identifier isEqualToString:@"ShowMoreInfo"]){

        AnnotationView *destViewController = segue.destinationViewController;

        //destViewController.buildingName = ; set to name of building of selected annotation

        //destViewController.desciptionText = ; set to description of building of selected annotation (from an array or from passed data)

        destViewController.picName = ;

    }
} 
```

如何从`callOutAccessoryControlTapped`方法中获取信息并将方法中的值设置`prepareForSegue`为这些值？

当我使用断点跟踪数据值时，`annView.title`保存一个字符串值，但它从未分配给注释详细视图的详细视图控制器中的值。

任何有关如何将数据从选定注释传递到准备 segue 方法的信息都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-04T23:18:07.547

使用获取注释的标题

```
let someTitle = sender!.title!! 
```

然后使用 someTitle 搜索/过滤图片、建筑物名称（或您要查找的任何其他内容）的数据。

# python - Django维护模式方法

> ID：14530338
> 
> 赞同：2
> 
> 时间：2013-01-25T21:01:45.537
> 
> 标签：python, django, maintenance, mode

我在我的 django 项目中使用维护模式的方法：

在设置中，我在 urls.py 中导入设置文件后声明了一个名为：MAINTENANCE_MODE 的变量，我使用与维护模式变量相关的条件：

```
if MAINTENANCE_MODE:
    urlpatterns = ...
else:
    urlpatterns = ... 
```

*我根据MA​​INTENANCE_MODE 变量的真假*语句*调试*不同的视图。

 *您如何看待这种方法？

谢谢。*

# oracle - oracle日期时间函数错误

> ID：14530344
> 
> 赞同：0
> 
> 时间：2013-01-25T21:02:09.293
> 
> 标签：oracle, datetime

我正在关注 sql 并在日期部分不断出错

我得到的错误是：- ORA-01861：文字与格式字符串不匹配

```
 SELECT COUNT(*) 
  FROM  STGDBA.INTERACTIONS
  WHERE APP_ID='Home Depot'
  AND PEGA_ID ='0'
  AND TO_CHAR(to_date(END_TIME))BETWEEN TO_DATE('2012-AUG-01', 'YYYY-MON-DD')AND TO_DATE
('2012-AUG-31', 'YYYY-MON-DD') 
```

这是日期在数据库中的存储方式：- 2011-10-24 08:46:31.621

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:22:32.270

首先，您永远不应该使用`VARCHAR2`数据类型将日期或时间戳数据存储在表中。您应该始终使用正确的数据类型（`date`、`timestamp`、`timestamp with time zone`等）。以错误的数据类型存储数据会导致性能问题（优化器的基数估计通常会变得不那么准确，并且索引列变得更加成问题）以及当某些应用程序无意中存储字符串时难以发现的错误表中的错误格式导致各种查询开始抛出错误，或者执行计划的细微变化导致错误突然开始（或停止）出现。

其次，假设`end_time`表中每一行中的每个字符串（是否满足其他两个谓词）的格式为`YYYY-MM-DD HH24:MI:SS.FFF`

```
SELECT COUNT(*) 
  FROM  STGDBA.INTERACTIONS
  WHERE APP_ID='Home Depot'
  AND PEGA_ID ='0'
  AND to_date(substr(END_TIME,1,length(end_time)-4), 
              'YYYY-MM-DD HH24:MI:SS' ) BETWEEN TO_DATE('2012-AUG-01', 'YYYY-MON-DD')
                                            AND TO_DATE('2012-AUG-31', 'YYYY-MON-DD') 
```

您总是希望将日期与日期进行比较，将字符串与字符串进行比较，因此您不想将表达式的左侧用`to_char`. 当您调用 时，您总是希望指定一个明确的格式掩码`to_date`，这就是我在这里所做的。而且 a`date`没有亚秒级精度，因此您必须去掉小数秒（如果您声明`end_time`为 a ，这将不是问题`timestamp(3)`）。

# firefox - Dotted outline around div element in table

> ID：14530349
> 
> 赞同：0
> 
> 时间：2013-01-25T21:02:42.960
> 
> 标签：firefox, html, border, outline, dotted-line

I have a **table element**, containting a custom usercontrol (contained in a "td" tag), that is a RadGrid from telerik. When i click anywhere in the div/cell zone (not a link, not an image, but inside a cell of the grid, anything that has not a a:link) and **there is a dotted line around the border of that div/cell**.

I succeeded of removing the equivalent **"orange" line that Chrome produce** in that case with css style

```
*:focus { outline:none;} 
```

In **IE, i don't have the dotted line**, but i still **gotta remove that line in Firefox**. I tried css style:

```
div 
{
  border-style:none; 
  outline-style:none;
} 
```

or

```
outline:0; 
```

but no result so far. Any idea?

![DottedOutlineImage](../Images/71c945d00b9825370004a173464d96d1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T10:34:55.470

用css写

```
:focus {outline:none;}
::-moz-focus-inner {border:0;} 
```

# tcl - stdout redirection

> ID：14530354
> 
> 赞同：3
> 
> 时间：2013-01-25T21:03:05.413
> 
> 标签：tcl

I am working with a procedure in tcl over which I have no control. It puts out a lot of verbose on the output window like:

```
Response:<?xml version='1.0' encoding='UTF-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><soapenv:Fault><faultcode>soapenv:Server</faultcode><faultstring>Item not valid: The specified Standard SIP1 Profile was not found</faultstring><detail><axlError><axlcode>5007</axlcode><axlmessage>Item not valid: The specified Standard SIP1 Profile was not found</axlmessage><request>updatePhone</request></axlError></detail></soapenv:Fault></soapenv:Body></soapenv:Envelope> 
```

Is there any way i can redirect this stdout to a variable? I am new to tcl and am not aware how i can do this.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T14:59:07.003

如果您使用的是 Tcl 8.6，则可以`stdout`通过添加合适的转换来捕获所有输出[`chan push`](http://www.tcl.tk/man/tcl8.6/TclCmd/chan.htm#M32)：

```
# Use a class to simplify the capture code
oo::class create CapturingTransform {
    variable var
    constructor {varName} {
        # Make an alias from the instance variable to the global variable
        my eval [list upvar \#0 $varName var]
    }
    method initialize {handle mode} {
        if {$mode ne "write"} {error "can't handle reading"}
        return {finalize initialize write}
    }
    method finalize {handle} {
        # Do nothing, but mandatory that it exists
    }

    method write {handle bytes} {
        append var $bytes
        # Return the empty string, as we are swallowing the bytes
        return ""
    }
}

# Attach an instance of the capturing transform
set myBuffer ""
chan push stdout [CapturingTransform new myBuffer]

# ... call the problem code as normal ...

# Detach to return things to normal
chan pop stdout 
```

需要注意的事项：这会捕获通道上的*所有*输出，无论是如何产生的（它甚至可以跨线程工作或在 C 级别生成输出的位置），并且这会将*字节*放入`myBuffer`，因为在转换为通道的配置编码后应用捕获. 它需要8.6；相关的 API 在早期版本中没有暴露给脚本（尽管它的 C 等效项被某些扩展用于诸如 SSL 支持之类的东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:39:26.437

总是同一个问题。。

你有几个选择：

*   用 C 语言编写一个暴露[`Tcl_SetStdChannel`](http://www.tcl.tk/man/tcl8.5/TclLib/GetStdChan.htm)于脚本级别的 Tcl 扩展。可能是更好的解决方案之一，但并不那么容易。

*   重命名和替换`puts`. 对于大多数来自写入标准输出的库而不被要求这样做的输出应该足够好。但是还有很多其他方法可以让某人将某些内容写入标准输出，例如`chan puts`, . 我认为很难重写所有可能使用通道的地方。`fcopy``exec echo foo >@stdout`

*   从 interp 中删除 stdout。缺点是你没有得到输出。程序运行后，您可以取回标准输出。例如：

    ```
    set tint [interp create]
    interp transfer {} stdout $tint
    ... call your stuff here...
    interp share $tint stdout {}
    interp delete $int 
    ```

    请注意，您可能不应该在每次需要时都创建 interp。创建一次，然后重复使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T03:30:02.597

这是一个古怪的解决方法：通过`exec`第二次调用脚本并捕获输出。这是一个简化的示例：

```
#!/usr/bin/env tclsh

# How can I call a procedure, which produces stdout output, and capture
# stdout?

proc produce_output {} {
    puts "Goodbye Friday"
    puts "Hello, weekend"    
}

if {[lindex $::argv 0] == "-run"} {

    # If command line contains a special flag, run the procedure in
    # question
    produce_output

} else {

    # By default, we will run this script again, with a special flag
    # and capture the output

    set output [exec tclsh [info script] -run]
    puts "Output: >$output<"

} 
```

这种方法很古怪，因为两次运行脚本可能不是一个好主意。例如，如果部分脚本更新了一些数据库表......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T05:44:22.077

如果 tcl 过程使用 puts 写入标准输出，那么重新定义 puts 就很简单了。在编码之后，如果您要求输入变量是全局的，那就更简单了；然而，它会通过它所在的堆栈帧更改正确的变量。

```
proc stdout2var { var } { 
    set level [ info level ]
    # we may have called stdout2var before so this allows only one variable at a time
    # and preserves tcls original puts in putsorig 
    if { [ string length [info commands "putsorig" ] ]  == 0 } { 
        rename ::puts ::putsorig
    } 
    eval [subst -nocommands {proc ::puts { args } { 
    set fd stdout 
    # args check 
    switch -exact -- [llength \$args ] {
        1 { 
        set fd stdout
        } 
        2 { 
        if { ![string equal \"-nonewline\" [lindex \$args 0 ] ] } {
            set fd [lindex \$args 0 ]
        }
        }
        3 {
        set fd [lindex \$args 1 ]
        }
        default { 
        error \"to many or too few args to puts must be at most 3 ( -nonewline fd message )\" 
        }
    }
    # only put stdout to the var 
    if { [string equal \"stdout\" \$fd ] } {
           # just level and var are subst 
        set message [lindex \$args end ]
        uplevel [expr { [info level ] - $level + 1 } ] set $var \\\"\$message\\\"
    } else {
        # otherwise evaluate with tcls puts 
        eval ::putsorig \$args 
    }
    } } ]
} 

proc restorestdout { } {
    # only do rename if putsorig exists incase restorestdout is call before stdout2var or 
    # if its called multiple times
    if {  [ string length [ info commands "putsorig"] ] != 0  } { 
    rename ::puts ""
    rename ::putsorig ::puts 
    } 
}

# so for some test code . because we cannot write to stdout we need to write to stderr. 
# puts on level 1 
proc myproc { a b } { 
    puts "$a $b " 
} 
# example with some deeper levels now puts is on level 2 
proc myUberProc { c } {
    myproc "a" $c
}
# this prints Ya Hoo to stdout
myproc "Ya" "Hoo"
set x ""
stdout2var x 
#puts "====\n[ info body putter ]\n===="
puts stdout " Hello" 
puts stderr "x = $x"; # x = Hello\n
puts -nonewline stdout " Hello" 
puts stderr "x = $x"; # x = Hello
myproc "Ya" "Hoo" 
puts stderr "x = $x" ; # x = Ya Hoo\n
set y "" 
stdout2var y
myUberProc "Zip"
puts stderr "y = $y , x = $x" ; # y = a Zip , x = Ya Hoo\n
restorestdout 
# now writes to stdout 
puts "y = $y , x = $x" ; # y = a Zip , x = Ya Hoo\n 
```

输出应该是：

```
Ya Hoo 
x =  Hello
x =  Hello
x = Ya Hoo 
y = a Zip  , x = Ya Hoo 
y = a Zip  , x = Ya Hoo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T21:29:10.490

取决于您所说的“将...放在输出窗口上”的意思。

如果它“将...放在输出窗口上”，即*打印*数据，则可以[捕获输出](https://stackoverflow.com/q/14324357/720999)。

如果它仅产生该值，并且通过其他方式打印，请执行@Edu 的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T21:29:33.593

```
set output "[procedure_that_creates_the_output]" 
```

方括号之间的任何内容都是一个被评估的嵌套命令，其结果用于外部命令。因此，在上面，过程的输出被插入在引号之间，从而形成了一个字符串，然后将其保存到输出变量中。

```
proc addition {x y} {                                                           
    return [expr $x+$y]                                                         
}                                                                               

set result [addition 2 3]                                                       
puts $result 
```

在这里，我们首先使用 x 为 2 和 y 为 3 来解析`[addition 2 3]`运行 proc 加法的值。它返回它们的总和，该总和在另一个嵌套表达式中计算，然后结果 5`[addition 2 3]`在外部脚本中替换为`set result 5`.

# linux - 是否可以在 64 位架构上将 mongodb 数据库文件从 32 位（操作系统）复制/粘贴到 64 位（操作系统）并继续？

> ID：14530355
> 
> 赞同：1
> 
> 时间：2013-01-25T21:03:09.550
> 
> 标签：linux, mongodb, 64-bit, 32-bit

正如主题所涉及的那样，是否有可能没有未来的问题？基本上我发布这个线程以供将来参考，所以人们可以观看场景。mongodb被限制为2Gb的原因是什么？您能否指出参考资料，以便像我这样的菜鸟可以深入了解？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:33:16.790

> mongodb被限制为2Gb的原因是什么？

因为它使用内存映射文件，请参阅[常见问题解答](http://docs.mongodb.org/manual/faq/fundamentals/#what-are-the-limitations-of-32-bit-versions-of-mongodb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:42:54.770

您可以将数据文件从 32 位复制到 64 位，这样就可以了。文件大小限制在 32 位的原因是由于 32 位内存地址空间的限制。

# php - 使用 tinymce 编辑器的问题

> ID：14530357
> 
> 赞同：3
> 
> 时间：2013-01-25T21:03:17.880
> 
> 标签：php, tinymce

我使用 tinymce 作为我网站的文本编辑器。

每当我尝试使用它添加内容时，它都能完美运行，但如果 `'`文本中有一个（例如：“Can't”），我会收到以下错误：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:04:53.473

您没有使用准备好的语句。这意味着 ' 等特殊字符会干扰您的 SQL 语句。最终，这意味着您的代码对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)是开放的。研究使用[PDO](http://php.net/manual/en/book.pdo.php)的 Prepared Statements 。[这是手册](http://php.net/manual/en/pdo.prepared-statements.php)中的一个简单示例：

```
<?php
$stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
$stmt->bindParam(':name', $name);
$stmt->bindParam(':value', $value);

// insert one row
$name = 'one';
$value = 1;
$stmt->execute();

// insert another row with different values
$name = 'two';
$value = 2;
$stmt->execute();
?> 
```

# postgresql - PostgreSQL 中的 ROW EXCLUSIVE 到底是什么？

> ID：14530360
> 
> 赞同：12
> 
> 时间：2013-01-25T21:03:29.017
> 
> 标签：postgresql, insert, locking

我知道 PostgreSQL 插入使用 ROW EXCLUSIVE 锁，这是否意味着插入可以并行，并且一个插入不会锁定整个表？

有问题的表有一个在数据库之外生成的主键并且没有额外的索引（但我很好奇如果不是这种情况会发生什么）。

**编辑1：**

根据文档，ROW EXCLUSIVE 与 CREATE INDEX 获得的 SHARE 冲突。

这是否意味着如果表有索引，insert 会锁定整个表？

还是只有在第一次创建索引时才会锁定表？

另外，据我所知，主键也是索引，对吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T01:16:36.617

并发插入不应相互阻塞，除非它们将冲突的键插入唯一索引，在这种情况下，第二个插入将等待包含第一个事务的事务被提交或回滚，然后中止或继续。主键被实现为唯一索引。

非唯一索引不应导致额外的锁冲突。创建索引将阻止对表的插入和更新，尽管您可以添加`concurrently`到命令中以避免这种情况，但会降低速度。

# css - 使用 SVG 的条纹椭圆

> ID：14530363
> 
> 赞同：1
> 
> 时间：2013-01-25T21:03:47.353
> 
> 标签：css, svg, raphael

我在 CSS 中构建了一个带边框和条纹的椭圆，我想用 SVG 做一些类似的事情。我对 SVG 完全陌生，我尝试过使用 Raphael。这是据我所知（见小提琴[here](http://jsfiddle.net/ubW49/1/)）：

```
var paper = Raphael(150, 150, 320, 320);
var oval = paper.rect(0, 0, 100, 50, 25);
oval.attr('fill', 'crimson');
oval.attr('stroke', 'transparent'); 
```

与 CSS 类似，我如何使用 SVG 进行条纹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:23:40.457

Raphael 似乎不支持模式，但它确实支持线性渐变作为填充属性的值：

> # 渐变
> 
> “‹angle›-‹colour›[-‹colour›[:‹offset›]]*-‹colour›”，例如：“90-#fff-#000”——从白色到黑色的90°渐变或“0- #fff-#f00:20-#000” – 从白色到红色（20%）到黑色的 0° 渐变。

因此，使用 Raphael 文档中描述的线性渐变格式，我们可以创建条纹渐变。创建一个为您生成条纹渐变字符串的函数可能很有意义。

```
function gradientString(color1, color2, step) {
    var gradient = '0-' + color1,
        stripe = false,
        i;

    for (i = 0; i < 100; i += step) {
        if (stripe) {
            gradient += '-' + color1 + ':' + i + '-' + color2 + ':' + i;
        } else {
            gradient += '-' + color2 + ':' + i + '-' + color1 + ':' + i;
        }

        stripe = !stripe;
    }

    return gradient;
}

var paper = Raphael(150, 150, 320, 320);
var oval = paper.rect(0, 0, 100, 50, 25);
oval.attr('fill', gradientString('white', 'crimson', 2));
oval.attr('stroke', 'crimson'); 
```

**见：http:** [//jsfiddle.net/p4Qgw/](http://jsfiddle.net/p4Qgw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:24:18.937

您可以在 <ellipse> 元素中使用 fill 属性或 <filter> 元素。

以下链接包含这两个示例：

[http://srufaculty.sru.edu/david.dailey/svg/newstuff/filtermatrixPattern1.svg](http://srufaculty.sru.edu/david.dailey/svg/newstuff/filtermatrixPattern1.svg)

过滤器的解释在这里：

[http://srufaculty.sru.edu/david.dailey/svg/SVGOpen2010/Filters2.htm](http://srufaculty.sru.edu/david.dailey/svg/SVGOpen2010/Filters2.htm)

# jquery - 在投票中更改 div 顺序的方法

> ID：14530370
> 
> 赞同：0
> 
> 时间：2013-01-25T21:04:03.603
> 
> 标签：jquery

寻找一种使用 JQuery 根据投票重新排序 div 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:08:46.013

注意这个[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)，希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:13:16.027

检查这个： http: [//james.padolsey.com/javascript/sorting-elements-with-jquery/](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)它将帮助您对 div 进行排序。比较函数可以使用从您的 ajax 控制器返回的投票数组

# jquery - handsOnTable 单元格着色

> ID：14530375
> 
> 赞同：3
> 
> 时间：2013-01-25T21:04:40.577
> 
> 标签：jquery, handsontable

我有一个 Handsontable 表，里面装满了数据并且已经渲染了

检查单元格后，我找到了几个感兴趣的单元格并想为它们着色 - 有没有使用 Handsontable 代码的好方法？

请注意，这是在加载和渲染表格之后

编辑：

该表使用基本选项呈现：

```
$container.handsontable({
    startRows: 8,
    startCols: 6,
    rowHeaders: true,
    colHeaders: true,
    minSpareRows: 1,
    minSpareCols: 1,
    //contextMenu: false,
    cells: function (row, col, prop) {
    }
  }); 
```

数据通过 Ajax 加载，decode_file.php 读取一个 excel 表并以 JSON 格式返回数据：

```
 $.ajax({
      url: "decode_file.php",
      type: 'GET',
      success: function (res) {
        handsontable.loadData(res.data);
        console.log('Data loaded');
      },
      error: function (res) {
        console.log("Error : " + res.code);
      }
    }); 
```

加载数据后，用户单击“处理”按钮，代码会查找带有文本“Hello world”的单元格。假设代码在单元格第 4 行/第 5 列中找到文本“Hello World”，**并将单元格****第 4 行/第 5 列**的背景颜色更改为**红色**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:02:27.157

主页为您的目的提供了一个很好的示例：

[http://handsontable.com/demo/renderers.html](http://handsontable.com/demo/renderers.html)

只需修改条件（在本例中为上/左角）。

```
cells: function (row, col, prop) {
  if (row === 0 && col === 0) {
    return {type: {renderer: greenRenderer}};
  }
} 
```

你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T16:51:02.183

1.  使用 handsontable('getSelected') 获取选定单元格的坐标

2.  如果选择不为空：

    一个。在所有单元格上循环以使用 handsontable('getCellMeta') 和 meta.renderer 收集每个单元格的渲染器，然后将它们存储在一个数组中（这应该只做一次）

    湾。使用 handsontable("updateSettings") 和 cellProperties.renderer 更新表格：

    *   对于选定坐标内的单元格，应用选定的渲染器并在 2.a. 中更新渲染器的名称。大批

    *   对于所有其他单元格，应用存储的渲染器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T14:20:06.007

我正在使用一种有点奇怪的方法，它实际上很快并且工作正常：

```
afterRender: function(){
    render_color(this);
} 
```

ht是handsontable的实例，而render_color：

```
function render_color(ht){
  for(var i=0;i<ht.countRows();i++){
    for(var p=0;p<ht.countCols();p++){
      cell_color = "#000";
      font_color = "#fff";
      $(ht.getCell(i,p)).css({"color": font_color, "background-color": cell_color})
    }
  }
} 
```

# arrays - 用于修改 C 数组的汇编程序子例程

> ID：14530377
> 
> 赞同：0
> 
> 时间：2013-01-25T21:04:43.103
> 
> 标签：arrays, sorting, assembly, x86-64, subroutine

我正在尝试与我的朋友将用于对数字进行排序的汇编子程序与 C 代码链接以进行小组作业，但我们无法使其正常工作。排序算法（Shellsort）之前已经作为一个单独的程序进行了测试，应该可以工作。

我们使用 mysort 方法来调用修改数组的例程：

```
void mysort (uint32_t array[], uint32_t len); 
```

我们将文件中的输入数字读入数组：

```
len = read(f, array, ARRAY_SIZE*4); 
```

我们这样调用排序例程：

```
 mysort(array, len>>2); 
```

最后，我们将数组写回文件。问题是我们的输出是一个数组，其中包含按相同顺序排列的原始数字，而不是按照应有的顺序进行排序。我们通过 RCX 寄存器将指向数组的指针传递给数组，因为这是在 Intel-64 中传递函数参数的方式。由于老师给了我们C源代码，我们怀疑我们的汇编代码做错了什么。

任何意见，将不胜感激。提前致谢！

这是我们的日常：

```
section .text

global mysort

mysort:
    push rbp
    mov rbp,rsp
    sub rsp, 8
    mov r10, rcx    ; r10 -> pointer to array
    mov r11, rdx    ; r11 -> length
; The gaps
    add rsp, 800
    mov r13, 10
    mov [rsp], r13
    mov r13, 4
    mov [rsp+8], r13
    mov r13, 1
    mov [rsp+16], r13
    xor rax, rax             ; l := 0
gaploop:
    mov rbx, [rsp+4*rax]   ; rbx -> current gap value
    mov rcx, rbx             ; rcx -> i
insertionsort_outerloop:
    cmp rcx, r11    ; compare i with n
    jge endouterloop
    mov edx, [r10+4*rcx];edx -> temp
    mov rsi, rcx        ;rsi -> j
insertionsort_innerloop:
    mov rdi, rsi    ;
    sub rdi, rbx    ;rdi -> j-gap
    mov r8d, [r10+4*rdi]
    cmp rsi, rbx    ; compare j with gap
    jl endofloop    ; jump to end of loop if j < gap
    cmp r8d, edx    ; compare a[j-gap] with temp
    jna endofloop   ; jump to end of loop if a[j-gap] not greater than temp
    mov [r10+4*rsi], r8d
    sub rsi, rbx
    jmp insertionsort_innerloop 
endofloop:
    mov [r10+4*rsi], edx        ; a[j] := temp
    inc rcx     ; i++
    jmp insertionsort_outerloop
endouterloop:
    inc rax     ; l++
    cmp rax, 1  ; cmp eax with length of gaps
    jle gaploop
    mov rsp,rbp
    pop rbp
    ret 
```

和 C 代码：

```
#define ARRAY_SIZE 32768
void mysort (uint32_t array[], uint32_t len);

int main(int argc, char *argv[])
{
    int f,n;
    uint32_t array[ARRAY_SIZE];
    uint64_t len;
    if (argc < 2) {
        printf("Usage: %s input_file output_file\n", argv[0]);
        exit (0);
    }
    printf("Opening %s\n", argv[1]);
    f = open(argv[1], O_RDONLY);
    printf("Input file opened\n");
    len = read(f, array, ARRAY_SIZE*4);
    printf("File size is %u bytes (%lu numbers)\n", len, len/4);
    close (f);
    printf("Sorting...");
    mysort(array, len>>2);
    printf("done\n");
    printf("Opening %s for writing\n", argv[2]);
    f = open(argv[2], O_WRONLY | O_CREAT, 0644);
    printf("File descriptor %d; errno = %d\n", f, errno);
    n = write(f, array, len);
    printf("Written %d bytes; errno = %d\n", n, errno);
    close(f);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:56:48.240

你似乎遵循微软的调用约定，你在 Windows 上吗？

无论哪种方式，这看起来都非常错误：`add rsp, 800`. 你是不是想`sub`分配一些空间？（但你一开始就已经有了`sub`，所以你可以在那里调整值）。

如果它仍然不起作用，请使用调试器单步执行代码并查看哪里出错了。

# linux - HAProxy 不支持 SSL

> ID：14530384
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:00.067
> 
> 标签：linux, load, load-balancing, haproxy

有没有办法将 HAProxy 与 SSL 结合使用？我知道新版本应该支持它，但它有多稳定？使用 https 设置负载均衡器时我需要考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:22:30.603

我将它用于 ssl。将其配置为 tcp。并使用 ssl-hello-chk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:36:15.990

来吧，它正在开发中，没有人会保证它足够安全和​​稳定，可以在生产中使用它。

开发版对我来说足够稳定，我已经使用了一段时间。但是，正如我所说，测试、使用或信任其他人是您的决定。您可以尝试英镑等替代品并等待稳定发布。如果您确定稳定版本会更安全:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:46:59.813

FWIW，1.5-dev17 + 最新修复似乎相当稳定，当然，这并不意味着没有任何错误。或者，如果您真的不需要担心跟踪错误修复，您可以选择商业支持的版本（甚至是设备），它涉及一个开发版本的分支，所有修复都向后移植。

# testing - 使用 FsCheck 时的异常

> ID：14530385
> 
> 赞同：1
> 
> 时间：2013-01-25T21:05:04.410
> 
> 标签：testing, f#, xunit, fscheck

使用 xUnit 运行 FsCheck 中最简单的测试

```
open FsCheck

[<Property>]
let revRevIsOrig (xs:list<int>) = 
        List.rev(List.rev xs) = xs 
```

我收到异常

```
---- System.InvalidCastException : Unable to cast object of type 'FsList@303[System.Int32]' 
to type 'FsCheck.Arbitrary`1[Microsoft.FSharp.Collections.FSharpList`1[System.Int32]]'. 
```

我试图捕捉异常并调试，但发生在之前有人知道如何解决这个问题吗？

**重现方式：**

*   做一个新项目
*   安装 FsCheck.xUnit NUget
*   将该代码放入 fs 文件中
*   运行测试

# iis - 如何覆盖 WebAPI 中的所有标准错误页面

> ID：14530387
> 
> 赞同：12
> 
> 时间：2013-01-25T21:05:08.217
> 
> 标签：iis, error-handling, asp.net-web-api

我漂亮的 REST Web 服务运行良好。除非我访问类似的页面`~/`，它会返回默认的 IIS 403 Forbidden 页面（即使使用 Fiddler 并仅指定`Accept: application/json`）。我只想要 JSON 或 XML 错误。有没有办法用自定义异常处理程序覆盖所有异常？还是一个默认控制器来处理所有未知请求？处理此问题的最简单、最正确（如果不同）的方法是什么，以便客户端只需要解析 REST API 友好的 XML 数据报或 JSON blob？

示例请求：

```
GET http://localhost:7414/ HTTP/1.1
User-Agent: Fiddler
Host: localhost:7414
Accept: application/json, text/json, text/xml 
```

响应：（我不喜欢，请注意这`text/html`不是接受的响应类型之一）

```
HTTP/1.1 403 Forbidden
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/8.0
X-SourceFiles: =?UTF-8?B?QzpcaWNhcm9sXENoYXJpdHlMb2dpYy5pQ2Fyb2wuQXBp?=
X-Powered-By: ASP.NET
Date: Fri, 25 Jan 2013 21:06:21 GMT
Content-Length: 5396

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>IIS 8.0 Detailed Error - 403.14 - Forbidden</title> 
<style type="text/css"> 
<!-- 
... 
```

回应（我更喜欢）：

```
HTTP/1.1 403 Forbidden
Cache-Control: private
Content-Type: application/json; charset=utf-8
Date: ...
Content-Length: ....

{
  "error":"forbidden",
  "status":403,
  "error_description":"Directory listing not allowed."
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T22:43:26.080

**编辑 1/26/14：**微软刚刚在最新的 WebAPI 2.1 更新中添加了“[全局错误处理”。](http://www.asp.net/web-api/overview/releases/whats-new-in-aspnet-web-api-21#global-error)

* * *

好的，我想我明白了。它有几个部分。

首先：为您的错误创建一个控制器。我根据 HTTP 错误代码命名了我的操作。

```
public class ErrorController : ApiController {
    [AllowAnonymous]
    [ActionName("Get")]
    public HttpResponseMessage Get() {
        return Request.CreateErrorInfoResponse(HttpStatusCode.InternalServerError, title: "Unknown Error");
    }

    [AllowAnonymous]
    [ActionName("404")]
    [HttpGet]
    public HttpResponseMessage Status404() {
        return Request.CreateErrorInfoResponse(HttpStatusCode.NotFound, description: "No resource matches the URL specified.");
    }

    [AllowAnonymous]
    [ActionName("400")]
    [HttpGet]
    public HttpResponseMessage Status400() {
        return Request.CreateErrorInfoResponse(HttpStatusCode.BadRequest);
    }

    [AllowAnonymous]
    [ActionName("500")]
    [HttpGet]
    public HttpResponseMessage Status500() {
        return Request.CreateErrorInfoResponse(HttpStatusCode.InternalServerError);
    }
} 
```

接下来，我创建了一个`GenericExceptionFilterAttribute`检查是否填充了 HttpActionExecutedContext.Exception 以及响应是否仍然为空。如果这两种情况都为真，那么它会生成一个响应。

```
public class GenericExceptionFilterAttribute : ExceptionFilterAttribute {
    public GenericExceptionFilterAttribute()
        : base() {
        DefaultHandler = (context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.InternalServerError, "Internal Server Error", "An unepected error occoured on the server.", exception: ex);
    }

    readonly Dictionary<Type, Func<HttpActionExecutedContext, Exception, HttpResponseMessage>> exceptionHandlers = new Dictionary<Type, Func<HttpActionExecutedContext, Exception, HttpResponseMessage>>();

    public Func<HttpActionExecutedContext, Exception, HttpResponseMessage> DefaultHandler { get; set; }

    public void AddExceptionHandler<T>(Func<HttpActionExecutedContext, Exception, HttpResponseMessage> handler) where T : Exception {
        exceptionHandlers.Add(typeof(T), handler);
    }

    public override void OnException(HttpActionExecutedContext context) {
        if (context.Exception == null) return;

        try {
            var exType = context.Exception.GetType();
            if (exceptionHandlers.ContainsKey(exType))
                context.Response = exceptionHandlers[exType](context, context.Exception);

            if(context.Response == null && DefaultHandler != null)
                context.Response = DefaultHandler(context, context.Exception);
        }
        catch (Exception ex) {
            context.Response = context.Request.CreateErrorInfoResponse(HttpStatusCode.InternalServerError, description: "Error while building the exception response.", exception: ex);
        }
    }
} 
```

在我的例子中，我使用了一个通用处理程序，我可以注册对每种主要异常类型的支持，并将这些异常类型中的每一种映射到特定的 HTTP 响应代码。现在在你的全局注册你的异常类型和处理程序这个过滤器`global.asax.cs`：

```
// These filters override the default ASP.NET exception handling to create REST-Friendly error responses.
var exceptionFormatter = new GenericExceptionFilterAttribute();
exceptionFormatter.AddExceptionHandler<NotImplementedException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.InternalServerError, "Not Implemented", "This method has not yet been implemented. Please try your request again at a later date.", exception: ex));
exceptionFormatter.AddExceptionHandler<ArgumentException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, exception: ex));
exceptionFormatter.AddExceptionHandler<ArgumentNullException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, exception: ex));
exceptionFormatter.AddExceptionHandler<ArgumentOutOfRangeException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, exception: ex));
exceptionFormatter.AddExceptionHandler<FormatException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, exception: ex));
exceptionFormatter.AddExceptionHandler<NotSupportedException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, "Not Supported", exception: ex));
exceptionFormatter.AddExceptionHandler<InvalidOperationException>((context, ex) => context.Request.CreateErrorInfoResponse(System.Net.HttpStatusCode.BadRequest, "Invalid Operation", exception: ex));
GlobalConfiguration.Filters.Add(exceptionFormatter) 
```

接下来，创建一个包罗万象的路由，将所有未知请求发送到新的错误处理程序：

```
config.Routes.MapHttpRoute(
    name: "DefaultCatchall",
    routeTemplate: "{*url}",
    defaults: new {
        controller = "Error",
        action = "404"
    }
); 
```

并且，总结一下，让 IIS 通过 ASP.NET 处理所有请求，方法是将其添加到您的`web.config`：

```
<configuration>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true" />
    </system.webServer>
</configuration> 
```

或者，您还可以使用 的`customErrors`部分`web.config`将所有错误重定向到新的错误处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T00:41:37.093

在 IIS 管理器中，您可以[编辑自定义错误](http://technet.microsoft.com/en-us/library/cc771076%28v=ws.10%29.aspx)：

> 打开 IIS 管理器并导航到要管理的级别。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。有关导航到 UI 中的位置的信息，请参阅 IIS 管理器中的导航 (IIS 7)。
> 
> 在功能视图中，双击错误页面。
> 
> 在错误页面页面上，单击以选择要更改的错误。
> 
> 在“操作”窗格中，单击“编辑”。
> 
> 在“编辑自定义错误页面”对话框中，选择以下选项之一： 如果您的错误内容是静态的，例如 .html 文件，则将静态文件中的内容插入到错误响应中。
> 
> 如果您的错误内容是动态的，例如 .asp 文件，请在此站点上执行 URL。
> 
> 如果您将客户端浏览器重定向到不同的 URL，请使用 302 重定向进行响应。
> 
> 如果将静态文件中的内容插入到错误响应中是选择的路径类型，则在文件路径文本框中键入自定义错误页面的路径。如果使用在此站点上执行 URL 或使用 302 重定向路径类型响应，请键入自定义错误页面的 URL。单击确定。

另请参阅[Rick Strahl 的文章](http://www.west-wind.com/weblog/posts/2009/Apr/29/IIS-7-Error-Pages-taking-over-500-Errors)，其中包含一些屏幕截图。

但是，我认为这不会解决响应中的内容类型标头——它只是概述了如何更改*内容*部分，您可以将其更改为 JSON 格式。我不知道如何在不做更多自定义的情况下改变它，但如果内容仍然是 JSON，一些客户端将能够处理错误的内容类型，所以这可能就足够了（如果是这样，可能是你最简单的选择） . 因此，这不是一个完整的答案，但它可能会对您有所帮助。

还有其他更多代码密集型选项——比如自定义 HTTP 模块或使用服务器端代码/配置（例如 .Net）来处理所有请求并构建正确的响应 + 标头（请参阅[ASP.NET 重写自定义错误不发送内容类型标头](https://stackoverflow.com/questions/7418021/asp-net-rewritten-custom-errors-do-not-send-content-type-header)或[http://www.iis.net/learn/develop/runtime-extensibility/developing-iis-modules-and-handlers-with-the-net-framework](http://www.iis.net/learn/develop/runtime-extensibility/developing-iis-modules-and-handlers-with-the-net-framework)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T15:08:10.403

它可能不适用于所有情况，但大多数情况下。
一个更简单的解决方案：

```
<system.webServer>
    <httpErrors errorMode="Detailed" />
</system.webServer> 
```

由我们的代码管理的 404（对不存在的 REST 实体的真正访问）适用于该配置。

您还可以从 IIS 管理控制台中编辑该设置，在“错误页面”区域右侧的“编辑功能设置...”链接中。 [![在此处输入图像描述](../Images/bd2c639ebf5467b42878b00cbf0d5fc1.png)](https://i.stack.imgur.com/BI2mK.png)

# asp.net - 使用具有计算列的 LINQ 查询填充下拉列表

> ID：14530388
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:08.047
> 
> 标签：asp.net, linq

我正在使用一个函数来返回从日期时间列计算的年数，并且在尝试填充下拉列表时无法弄清楚如何引用计算的列。

这是我的 Linq 查询：

```
 var q = (from a in db.Applications
          where a.uID == ID
          select a.date.Year).Distinct();
 return q.ToList(); 
```

所以，当我去填充下拉...

```
Dropdown1.DataTextField = ????? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:13:32.567

当值类型列表用作 DataSource 时，不需要设置`DataTextField`和属性。`DataValueField`

见下文：

```
private List<int> GetYears()
{
    var q = (from a in db.Applications
             where a.uID == ID
             select a.date.Year).Distinct();

    return q.ToList();
} 
```

然后下拉菜单将像这样初始化：

```
Dropdown1.DataSource = GetYears();
// Dropdown1.DataTextField = null;  // Does not need to be set
// Dropdown1.DataValueField = null; // Does not need to be set 
```

# javascript - 将变量从 url 传递到 flowplayer

> ID：14530391
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:29.013
> 
> 标签：javascript, url, flowplayer

我正在尝试从我的 url 中读取变量并将它们传递给 flowplayer。例如，如果我的链接是：“http://someurl/flowplayer.html?video=mymovie.mp4&time=180”

我想使用视频变量和时间变量创建视频 src 链接。我尝试使用 javascript，但出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:23:49.197

我使用此函数从 JavaScript 中的 url 读取参数：

```
function getParam( sParamName ){
  sLocation = location.href;
  aLCQS = sLocation.split("?");
  if (aLCQS.length > 1){ // there are a querystring
    aParams = aLCQS[1].split("&");
    for( f=0; f<aParams.length; f++ ){
      aParam = aParams[f].split("=");
      if( aParam[0] == sParamName ){
        return aParam[1]; // return the value
      }
    }
  }
} 
```

如何使用：

```
video=getParam("video");
time=getParam("time");
// do what you want.. 
```

# ios - 使用约束以内容视图为中心的子视图

> ID：14530393
> 
> 赞同：3
> 
> 时间：2013-01-25T21:05:38.603
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

我有一个带有两个子视图的内容视图。我将子视图垂直堆叠并在内容视图中水平居中（x 轴）：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[buttonView]-[label]" options:NSLayoutFormatAlignAllCenterX metrics:nil views:NSDictionaryOfVariableBindings(buttonView, label)]]; 
```

现在我想将它们垂直居中（y 轴）。我希望 buttonView 顶部和标签视图底部的空间相等。

我怎样才能做到这一点？具有优先级的顶部和底部约束？

编辑：

斯科特，这是您建议的代码的外观：

![buttonView 太高了](../Images/15f71474148885aa17eef3d072af820d.png)

我尝试在 buttonView 和 label 之间设置间距，`-1-`但没有帮助。这就是我需要它的样子：

![在此处输入图像描述](../Images/7ca0ee03583c0b3bdf22a6b4ca0db861.png)

这是我用来实现它的代码：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-13-[buttonView]-[label]-10-|" options:NSLayoutFormatAlignAllCenterX metrics:nil views:NSDictionaryOfVariableBindings(buttonView, label)]]; 
```

我的约束有效，但是是硬编码的，如果可能的话，我宁愿远离。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T23:20:41.780

要准确获得所需的内容，您需要指定一些特定的约束。一个天真的尝试可能从**（不要使用以下行）**开始：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[buttonView]-[label]-|" options:NSLayoutFormatAlignAllCenterX metrics:nil views:NSDictionaryOfVariableBindings(buttonView, label)]]; 
```

但这会导致按钮和标签被拉伸以满足约束。因此，我们只需要告诉系统我们想要什么。我们将从您的代码开始，因为这为我们提供了基本的对齐方式。

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[buttonView]-[label]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(buttonView, label)]];
[contentView addConstraint:[NSLayoutConstraint constraintWithItem:buttonView attribute:NSLayoutAttributeBottom relatedBy:NSLayoutRelationEqual toItem:contentView attribute:NSLayoutAttributeCenterY multiplier:1.0 constant:-4.0]];
[contentView addConstraint:[NSLayoutConstraint constraintWithItem:button attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:contentView attribute:NSLayoutAttributeCenterX multiplier:1.0 constant:0.0]];
[contentView addConstraint:[NSLayoutConstraint constraintWithItem:label attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:contentView attribute:NSLayoutAttributeCenterX multiplier:1.0 constant:0.0]]; 
```

那个4.0是从哪里来的？它是默认子视图间距 (8) 的一半`-`，将底部与中心 Y 对齐，但稍微向上一点以让中间对齐。

另外，您会注意到我删除了`NSLayoutFormatAlignAllCenterX`，因为此时它没有做任何有意义的事情，并且实际上并没有将视图与超级视图的中心 X 对齐，只是彼此对齐。

编辑：

我做了一个简单的示例应用程序，它有一个 ViewController 和一个添加到视图的按钮和标签。[将代码视为要点](https://gist.github.com/4675763)。这会产生以下输出：

![带有我的约束的示例应用程序](../Images/89db83c57ce6b0a1daa3d00d55b1f54d.png)

作为比较，这里只是在此应用程序中使用您的原始约束（这就是我认为`NSLayoutAlignAllCenterX`没有进行居中的原因）：

![带有提问者约束的示例应用](../Images/081149ffe20cfe722cf1116a321b74ea.png)

我想知道您的按钮是否还有更多功能（它是自定义类吗？）和`contentView`.

# c# - VS2010 中的 HLSL（.fx 文件）语法高亮？

> ID：14530394
> 
> 赞同：3
> 
> 时间：2013-01-25T21:05:44.433
> 
> 标签：c#, visual-studio-2010, syntax, hlsl

有什么方法可以在 Visual Studio 2010 中为 fx 文件获得语法高亮显示（可能类似于“格式文档”）？没有它很难调试更复杂的 HLSL 着色器代码。我知道我可以使用 fx 作曲家，但我不想在不同的开发环境之间切换 :-) 此外，我经常在 VS2010 中使用#region pragma。在 VS2010 中编辑 HLSL 着色器代码有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:51:36.870

你应该看看[CodePlex 上的 NShader 项目](http://nshader.codeplex.com/)。它是 Visual Studio 2010 的一个扩展，它就是这样做的：为各种着色语言添加语法高亮。

关于`#region`编译指示，我认为正如[在 SO 上的答案中](https://stackoverflow.com/a/1921636/1374267)所解释的那样，宏可以解决问题。[这也是另一个例子](http://www.kynosarges.org/RegionTools.html)。

# c - 用宏连接字符串

> ID：14530395
> 
> 赞同：4
> 
> 时间：2013-01-25T21:05:46.550
> 
> 标签：c, macros

> **可能重复：**
> [用于在 C 中连接两个字符串的宏](https://stackoverflow.com/questions/2191316/macro-for-concatenating-two-strings-in-c)

如何用宏连接两个字符串？

我试过这个，但它没有给出正确的结果：

```
#define CONCAT(string) "start"##string##"end" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T21:06:45.650

您需要省略`##`:[相邻字符串文字自动连接](http://ideone.com/LZBt61)，因此此宏将以您想要的方式连接字符串：

```
#define CONCAT(string) "start"string"end" 
```

对于两个字符串：

```
#define CONCAT(a, b) (a"" b) 
```

这是[ideone 上演示的链接](http://ideone.com/ycifEk)。

# php - MYSQL JOIN 所有子行并仅显示一次父行

> ID：14530396
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:54.357
> 
> 标签：php, mysql, sql, database, join

我有一个简单的文章和评论系统，其中包含下表：

文章表：

```
id | writer | text
 1 | Bob    | first article
 2 | Marley | second article 
```

评论表：

```
id | article_id | comment
 1 |      1     |  i love this article
 2 |      1     |  good one
 3 |      2     |  waiting for more 
```

我想选择每篇文章及其下方的评论。我使用以下查询：

```
SELECT * FROM articles LEFT JOIN comments ON articles.id = comments.article_id 
```

我得到的结果：

```
 articles.id   | articles.writer | articles.text  | comments.id | comments.article_id | comments.comment
 1             | Bob             | first article  |    1        |         1           | i love this article
 1             | Bob             | first article  |    2        |         1           | good one  
 2             | Marley          | second article |    3        |         2           | waiting for more 
```

我想要的是：

```
articles.id   | articles.writer | articles.text  | comments.id | comments.article_id | comments.comment
 1            | Bob             | first article  |    1        |         1           | i love this article
NULL          | NULL            |    NULL        |    2        |         1           | good one  
 2            | Marley          | second article |    3        |         2           | waiting for more 
```

那么如何选择每篇文章及其评论并只显示一次文章而不是每条评论

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:14:33.953

您可以在 MySQL 中使用用户变量来执行此操作：

```
SELECT 
  case when rownum =1 then id else null end id,
  case when rownum =1 then writer else null end writer,
  case when rownum =1 then text else null end text,
  comment
FROM
(
  SELECT a.id, a.writer, a.text,
    c.article_id, c.comment, 
    @rownum := case
                when @prev = a.id
                  and @prev_art = c.article_id
                then @rownum+1 else 1 end rownum,
    @prev := a.id p_id,
    @prev_art := c.article_id p_art
  FROM articles a
  LEFT JOIN comments c
    ON a.id = c.article_id 
  ORDER BY a.id, article_id
) src 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/c5639/13)。

结果是：

```
|     ID | WRITER |           TEXT |             COMMENT |
----------------------------------------------------------
|      1 |    Bob |  first article | i love this article |
| (null) | (null) |         (null) |            good one |
|      2 | Marley | second article |    waiting for more | 
```

编辑，如果您需要`comment.id`，那么您可以将其添加到结果中：

```
SELECT 
  case when rownum =1 then id else null end id,
  case when rownum =1 then writer else null end writer,
  case when rownum =1 then text else null end text,
  commentid,
  article_id,
  comment
FROM
(
  SELECT a.id, a.writer, a.text,
    c.article_id, c.comment, c.id commentid,
    @rownum := case
                when @prev = a.id
                  and @prev_art = c.article_id
                then @rownum+1 else 1 end rownum,
    @prev := a.id p_id,
    @prev_art := c.article_id p_art
  FROM articles a
  LEFT JOIN comments c
    ON a.id = c.article_id 
  ORDER BY a.id, article_id
) src 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/c5639/17)。结果是：

```
|     ID | WRITER |           TEXT | COMMENTID | ARTICLE_ID |             COMMENT |
-----------------------------------------------------------------------------------
|      1 |    Bob |  first article |         1 |          1 | i love this article |
| (null) | (null) |         (null) |         2 |          1 |            good one |
|      2 | Marley | second article |         3 |          2 |    waiting for more | 
```

# mongodb - mongodb 配置文件

> ID：14530397
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:54.457
> 
> 标签：mongodb

我的配置文件有一个奇怪的问题：

当我尝试添加以下任何条目时，服务器不再启动，我尝试将它们全部添加在一起并一一添加。

```
fork = true
bind_ip = 127.0.0.1
port = 27017 
```

如果我只有标准条目

```
dbpath
logpath
auth
rest 
```

没有问题。

这是在 Windows 7 64 位系统上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T09:54:23.907

`fork`不是有效的 Windows 参数。有关更完整的描述，请参阅此问题：[mongodb fork in windows](https://stackoverflow.com/questions/15185012/mongodb-fork-in-windows)

您可能需要考虑为您的配置文件使用 YAML 格式。随着您的配置增长，它们将更具可读性：http: [//docs.mongodb.org/manual/reference/configuration-options/](http://docs.mongodb.org/manual/reference/configuration-options/)

# tapestry - 如何将使用 Tapestry5 编写的页面添加到已经使用 Tapestry4 编写的 Web 应用程序？

> ID：14530398
> 
> 赞同：0
> 
> 时间：2013-01-25T21:05:55.540
> 
> 标签：tapestry

我正在尝试将使用 Tapestry5 编写的页面添加到在 Apache Tomcat 上使用 Tapestry 4 编写的 Web 应用程序中。假设我在 $tomcat/shared/lib 中有必要的 jar。

[我按照此处](http://jumpstart.doublenegative.com.au/jumpstart/examples/input/forms1)的示例制作了一个基本的表单模板和相应的 java 类进行测试，然后用新的替换现有的 html 文件，但是我遇到了由页面规范 (.page) 文件引起的 DocumentParseException每当我尝试通过 tomcat 访问页面时，都会出现“'-//Apache Software Foundation//Tapestry Specification 5.3//EN' 的意外公共 ID”。如果我将页面规范文件中的那一行改回“Tapestry Specification 4.0//EN”，我会得到一个不同的异常，说我需要在 java 类中实现 IPage 接口。

这是我第一次从事涉及 Tapestry 的项目，我在网上找不到任何特定于这个问题的东西，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:30:48.630

我已经为一个遗留应用程序做到了这一点，这个过程花了大约 3 个月的时间来迁移所有服务并运行第一页。这是一个概述。由于各种原因，我无法发布代码。

1.  更新到挂毯 4.1.6。（如果你没有，可能会很长很痛苦）。
2.  确保tapestry4 servlet url-pattern 类似于/t4/* 并且t5 忽略的路径包含/t4/.*。
3.  为 t4 请求初始化 t5 请求全局变量。（子类 t4 servlet 并覆盖 doService 方法）。
4.  为 t5 请求初始化 hivemind 和 t4 请求全局变量。（在“after:StoreIntoGlobals”和“before:EndOfRequest”之间的 t5 模块中贡献一个 HttpServletRequestFilter）。
5.  为 hivemind 为 t5 服务创建一个 ObjectProvider。
6.  将所有服务迁移到 t5 ioc。（这可能很棘手，因为您不能直接使用 hivemind 服务，但您可以在幕后使用 hivemind 注册表）。
7.  （可选）为tapestry4 和t5 创建链接组件，自动为您提供具有相同名称和处理激活上下文的tapestry4 或tapestry5 页面的链接。您可以将 PageRenderLinkSource 用于 t5 链接，将外部服务用于 t4。
8.  为每个有状态的服务创建 hivemind 的包装器。

如果您的代码库不大或非常复杂，恕我直言，这绝对不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T18:38:36.570

您可以并排运行 Tapestry 4 和 Tapestry 5（包名称不同，正是因为这个原因）......但它们彼此一无所知，并且不能直接交互。这就像您可以拥有具有多个 servlet 的单个 WAR 一样；不同的应用程序只能通过 URL 或 HttpSession 中的共享状态进行通信。

# ruby-on-rails - Rails 使用 before_filter 通过 GET 参数进行身份验证...是否正确？

> ID：14530403
> 
> 赞同：1
> 
> 时间：2013-01-25T21:06:21.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3, permissions, controller

我目前在我的 ApplicationController 中有一个 before_filter 用于凭据验证。我还希望能够在我直接访问 url 时验证用户凭据（即，从脚本而不是从浏览器登录表单/会话）。通过 GET 请求接受用户凭据是否存在问题？

application_controller.rb

```
before_filter :login_required

def login_required
    reset_session if session[:last_seen] < Rails.configuration.admin_timeout.minutes.ago rescue nil
    return true if session[:user]
    if (!params[:login].nil? && !params[:password].nil?) && session[:user] = User.authenticate(params[:login], params[:password])
        return true
    else
        render :nothing => true, :status => 401
        return false
    end
    flash[:alert] = 'Please login to continue'
    redirect_to login_url and return false
end 
```

如果这不是可接受的做法，我希望只能在某些“安全”控制器操作上执行此操作。例如：

product_controller.rb

```
before_filter :do_something
permit_login_via_get :only => [:index]

def index
    # Do some stuff in here. This should be accessible via http://mydomain.com/products?login=admin&password=yeahlikeidtellyouthat
end 
```

所以现在我的 login_requred 函数需要修改，以便“permit_login_via_get”方法可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:14:15.033

问题是凭据将在 URL 中传递，因此非常可见，并且可能也缓存在用户的浏览器历史记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:26:57.857

好的，所以我考虑了一下，并决定最好为我的每个应用程序创建 API 密钥，并使用 Net::HTTP 请求，设置一个包含 API 密钥的自定义标头。这样就没有通过 URL 发送的用户凭据。现在，关于这种方法什么是“安全”或不安全，或者我需要做些什么来使其安全是另一回事。但这是我到目前为止所做的事情，它似乎正在工作：

* * *

application.rb（管理器应用程序）

```
# API Keys
config.api_key = "somelongstringofcharacters"
config.pos_api_key = "anotherlongstringofcharacters"
config.website_api_key = "yetANOTHERlongstringofcharacters" 
```

POS 和网站应用程序中的 application.rb 与上述示例类似。

* * *

application_controller.rb（所有应用程序）

```
before_filter :login_required

def login_required
    reset_session if session[:last_seen] < Rails.configuration.admin_timeout.minutes.ago rescue nil
    return true if session[:user]
        unless request.headers["X-API-Key"].nil?
        if request.headers["X-API-Key"] == Rails.configuration.api_key
            return true
        else
            render :nothing => true, :status => 401
            return false
        end
        end
    flash[:alert] = 'Please login to continue'
    redirect_to :controller => :users, :action => :login
    return false
end 
```

* * *

这样，所有方法都是私有的（除了那些具有 skip_before_filter :login_required 的方法），并且如果您通过使用表单使用登录名/密码组合登录会话，或者如果您发出的请求具有“ X-API-Key”标头带有正确的应用程序密钥。

以下是通过 Manager 应用程序运行的示例 Rake 任务；它从受 login_required 方法保护的 POS 服务器请求 JSON 文件：

```
desc "Test Task so that larger projects don't need to be run through"
task :testing => :environment do

    require "net/http"
    require "uri"

    url = URI.parse("http://myposdomain/items.json?all=true&category=Wines")
    req = Net::HTTP::Get.new(url.path)
    req.add_field("X-API-Key", Rails.configuration.pos_api_key)
    res = Net::HTTP.new(url.host, url.port).start do |http|
    http.request(req)
    end
    myposdomain_wines = res.body

end 
```

# javascript - 如何正确处理 Three.js 场景？(r55)

> ID：14530405
> 
> 赞同：10
> 
> 时间：2013-01-25T21:06:34.533
> 
> 标签：javascript, memory-leaks, three.js

似乎 Three.js 没有很好的方法来处理`THREE.Scene`该场景中的一个和所有对象。

目前我正在做以下事情：

```
 $.each(scene.__objects, function(idx, obj) {                               
    scene.remove(obj);                                                                                     
    if (obj.geometry) {                                                                                    
      obj.geometry.dispose();                                                                              
    }                                                                                                      
    if (obj.material) {                                                                                    
      if (obj.material instanceof THREE.MeshFaceMaterial) {                 
        $.each(obj.material.materials, function(idx, obj) {                 
          obj.dispose();                                                                                   
        });                                                                                                
      } else {                                                                                             
        obj.material.dispose();                                                                            
      }                                                                                                    
    }                                                                                                      
    if (obj.dispose) {                                                                                     
      obj.dispose();                                                                                       
    }                                                                                                      
  }); 
```

查看 Chrome 堆分析器，仍有许多对象没有被清理（纹理、着色器材质、向量等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:56:11.677

我同意 arriu 的观点，认为应该有一种更简洁通用的方式来处理 three.js 中的内存，可能从场景节点开始，一直向下遍历。我还认为应该扩展他上面的通用函数以处理更多类型的内存分配。

*   查看示例`webgl_test_memory.html`，它对示例做了一些非常具体的事情，并在分配后立即释放内存。
*   查看`webgl_test_memory2.html`这个示例还做了一些非常具体的事情，即向数组添加网格，然后遍历并处理数组的元素。此方法无法处理在函数调用中进行的许多内存分配。

我并不是说这两个示例不会释放内存。我认为场景节点应该有一个方法来释放它下面的所有内存。

# php - 获取数组结果类型，来自 PDO 的查询方法

> ID：14530407
> 
> 赞同：0
> 
> 时间：2013-01-25T21:06:44.103
> 
> 标签：php, mysql, pdo

当我们`WHERE`在查询中有条件时`SELECT`，我们可以使用 PDO 的准备语句：

```
 $sth = $db->prepare("SELECT name FROM mytable WHERE id > :id");
    $sth->execute( array(":id"=>2) );
    $result = $sth->fetchAll(PDO::FETCH_ASSOC); 
```

`$result`所以我们获得了类型为 的变量`array`。

但是当我们没有`WHERE`条件时，我们不需要准备语句对吗？我们只使用`query`

```
$result = $db->query("SELECT name FROM books"); 
```

但是现在，`$result`类型不是`array`，而是`pdostatement`。

在这种情况下获得`array`类型（而不是`pdostatement`）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:08:39.773

```
$result = $db->query("SELECT name FROM books")->fetchAll(PDO::FETCH_ASSOC); 
```

换句话说，`$db->query()`两者`prepare()`和`execute()`

# android - OCR，将识别的文本放在相机视图上

> ID：14530411
> 
> 赞同：3
> 
> 时间：2013-01-25T21:06:51.620
> 
> 标签：android, tesseract

我正在尝试在相机视图上打印识别的文本。我收到此错误：

无法在未调用 Looper.prepare() 的线程内创建处理程序

我对这个问题做了一些研究，但即使我不能解决它可能是因为经验的运气（我第一次尝试使用 openCV 和 tesseract 构建应用程序，我遇到了很多我以前从未见过的错误）。请宽容。我想在其中使用 Toast 的代码添加如下：

```
import android.content.Context;
import android.graphics.Bitmap;
import org.opencv.core.Mat;
import android.os.Environment;

import android.util.Log;
import android.widget.Toast;

import com.googlecode.tesseract.android.TessBaseAPI;

public class justOCR {
    Bitmap bitmap;
    protected Context context;

    public justOCR(Context context){
        this.context = context;
    }

        public static final String DATA_PATH = Environment
                .getExternalStorageDirectory().toString() + "/sdcard/CameraTest/";
        private static final String lang = null;

    public void numPlateOCR(Mat plate){ 

        bitmap=Bitmap.createBitmap(plate.width(), plate.height(), Bitmap.Config.ARGB_8888);
        org.opencv.android.Utils.matToBitmap(plate, bitmap);
        bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
        // Convert to ARGB_8888, required by tess
        //byteArray = byteArray.copy(Bitmap.Config.ARGB_8888, true);

    // _image.setImageBitmap( bitmap );

    Log.v("baseApi", "Before baseApi");

    TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    //baseApi.init(DATA_PATH, lang);
    baseApi.init("/sdcard/CameraTest/", "eng");
    baseApi.setVariable("tessedit_char_whitelist", "1234567890");
    baseApi.setImage(bitmap);

    String recognizedText = baseApi.getUTF8Text();

    baseApi.end();

    // You now have the text in recognizedText var, you can do anything with it.
    // We will display a stripped out trimmed alpha-numeric version of it (if lang is eng)
    // so that garbage doesn't make it to the display.

    Log.v("NUMBER", "OCRED TEXT: " + recognizedText);

    //if ( lang.equalsIgnoreCase("eng") ) {
    //  recognizedText = recognizedText.replaceAll("[^a-zA-Z0-9]+", " ");
    //}

    recognizedText = recognizedText.trim();

    if ( recognizedText.length() != 0 ) {
        //TODO print or save to xml//

        Toast.makeText(this.context, "***"+recognizedText+"***", Toast.LENGTH_SHORT).show();

    }
}

} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-31T03:13:39.110

另一个人说，您正在尝试不在 UIThread 上制作 Toast。

但是看看这个，对你很重要：[如何问](https://stackoverflow.com/help/how-to-ask)

# ios - 如何在不使用情节提要的情况下创建 UICollectionView？

> ID：14530416
> 
> 赞同：5
> 
> 时间：2013-01-25T21:07:39.787
> 
> 标签：ios, objective-c, uicollectionview

我在网上找到了一些不错的 UIcollectionview 教程

[http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

[http://ashfurrow.com/blog/uicollectionview-example](http://ashfurrow.com/blog/uicollectionview-example)

是否可以在没有情节提要的情况下使用 collectionview？

将故事板与collectionview一起使用的优缺点是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T21:33:51.167

是的。它可以通过任何一种方式完成。请参考以下示例。

更新：这个（第一个）例子更适合这个问题.. [http://adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial/](http://adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial/)

[http://blogs.captechconsulting.com/blog/paul-dakessian/ios-6-tutorial-getting-started-collection-views](http://blogs.captechconsulting.com/blog/paul-dakessian/ios-6-tutorial-getting-started-collection-views)

[http://invasivecode.tumblr.com/post/34581461219/an-introduction-to-collection-views](http://invasivecode.tumblr.com/post/34581461219/an-introduction-to-collection-views)。

我不太确定，但除了易于实现之外，使用故事板应该没有任何优点和缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T15:56:33.527

事实上，故事板很容易。从上面的教程中，您可以了解如何设置故事板。完成此操作后，您需要再次转到故事板，在集合视图中选择单元格，然后在**身份检查**器（第三个检查器）的右侧视线栏中输入您的子类视图单元格。然后转到**属性检查员**（第 4 个检查员）。顶部有一个字段“Collection Reusable View” - Identifier。输入您的可重用标识符字符串，与您将提供给**dequeueReusableCellWithReuseIdentifier**的字符串相同。

就这样。一旦你这样做，你会发现它超级简单。

# python - Python：尝试发送电子邮件 文章内容

> ID：14530417
> 
> 赞同：0
> 
> 时间：2013-01-25T21:07:40.787
> 
> 标签：python, beautifulsoup, scrape

下面的代码是从 ESPN/college-football 中提取头条新闻。我进入文章本身并提取`p`内容并将它们打印到控制台就好了，但我也想通过电子邮件发送内容。由于某种原因，它不会发送内容。这是代码：

```
from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import datetime
import smtplib

# Copy all of the content from the provided web page
webpage = urlopen('http://espn.go.com/college-football').read()
soup = BeautifulSoup(webpage)
now = datetime.datetime.now()

# to get the contents of <ul> tags w/ attribute class="headlines":
for i in soup.findAll('ul', {'class': 'headlines'}):
    for tag in i.findAll('li'):
        for a in tag.findAll({'a' : True, 'title' : False}):            
            print a.text
            print a['href']           
            print "\n"

            articlePage = urlopen(a['href']).read() # Grab all of the content from original article

            # Pass the article to the Beautiful Soup Module
            soup1 = BeautifulSoup(articlePage)

            # Tell Beautiful Soup to locate all of the p tags and store them in a list
            paragList = soup1.findAll('p')

            # Print all of the paragraphs to screen
            for z in paragList:
                print z.text

            print "\n" 

            # -*- coding: utf-8 -*-
            from email.header    import Header
            from email.mime.text import MIMEText

            msg = MIMEText(a.text + "\n" + str(a.get('href') + "\n" + z.text), 'plain', 'utf-8')
            msg['Subject'] = Header('ESPN Scrape from: '+ now.strftime("%Y-%m-%d %H:%M"), 'utf-8')
            msg['From'] = 'FROM'
            msg['To'] = 'TO'
            print(msg.as_string())   

            # Credentials (if needed)
            username = 'username'
            password = 'password'

            from smtplib import SMTP_SSL

            # send it via gmail
            s = SMTP_SSL('smtp.gmail.com')
            s.set_debuglevel(1)
            try:
                s.login(username, password)
                s.sendmail(msg['From'], msg['To'], msg.as_string())
            finally:
                s.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:23:46.370

在将 paraglist 的每个成员打印到控制台时，您使用 for 循环，但是在创建 msg 时，您只需添加 z.text 而不循环 paraglist。

不过，这可能是复制粘贴错误。

# php - 带有 CSS 的选择列表中的颜色样本：在伪元素之前。仅适用于 Firefox

> ID：14530421
> 
> 赞同：0
> 
> 时间：2013-01-25T21:08:02.683
> 
> 标签：php, html, css, pseudo-element

我正在开发一个自定义的偷窃配置器，可以在这里查看：[stoles.com/stoles](http://stoles.com/stoles) 该网站受密码保护，用户名是：“alex”，密码是：“superman”。

我有一个标准的 html 选择列表，用于窃取颜色、修剪颜色和文本颜色。我正在尝试在每个选择选项的左侧添加色样。我已经实现了一个 CSS 伪元素 ":before" 来实现这一点。问题是它只能在 Firefox 中运行，不能在 chrome、safari 或 IE 中运行。我需要它至少在 chrome、safari、IE9+ 和 Firefox 中工作。有没有办法在我的选择选项旁边获得一个颜色样本，而无需使用疯狂的 jquery 列表来选择插件类型？我真的很想在这里坚持一个标准的选择列表。

这是我的代码：

```
<select class="" name="stoleColor" id="stoleColor">
                    <option value="">...</option>
                    <option class="colorSwatch cAntiqueGold" value="antique-gold">Antique Gold</option>
                    <option class="colorSwatch cBlack" value="black">Black</option>
                    <option class="colorSwatch cBrown" value="brown">Brown</option>
                    <option class="colorSwatch cEmeraldGreen" value="emerald-green">Emerald Green</option>
                    <option class="colorSwatch cGold" value="gold">Gold</option>
                    <option class="colorSwatch cGreen" value="green">Green</option>
                    <option class="colorSwatch cHunterGreen" value="hunter-green">Hunter Green</option>
                    <option class="colorSwatch cLightBlue" value="light-blue">Light Blue</option>
                    <option class="colorSwatch cMaroon" value="maroon">Maroon</option>
                    <option class="colorSwatch cNavyBlue" value="navy-blue">Navy Blue</option>
                    <option class="colorSwatch cOrange" value="orange">Orange</option>
                    <option class="colorSwatch cPink" value="pink">Pink</option>
                    <option class="colorSwatch cPurple" value="purple">Purple</option>
                    <option class="colorSwatch cRed" value="red">Red</option>
                    <option class="colorSwatch cRoyalBlue" value="royal-blue">Royal Blue</option>
                    <option class="colorSwatch cSilver" value="silver">Silver</option>
                    <option class="colorSwatch cWhite" value="white">White</option>
                </select> 
```

这是我的CSS：

```
 option.colorSwatch:before {
    content: " ";
    height: 10px;
    width: 20px;
    border-radius: 0px;
    border:2px solid #ebebeb;
    margin-right:10px;
    display: inline-block;
}

option.cAntiqueGold:before {
    background:#9C6600;
} 
```

# jquery - 从 jquery 自动完成中捕获选择

> ID：14530422
> 
> 赞同：2
> 
> 时间：2013-01-25T21:08:02.867
> 
> 标签：jquery, autocomplete, selection, capture

我对 jQuery 很陌生。

我正在使用 jQuery 自动完成框。有人可以告诉我如何捕捉访问者在一个框中所做的选择，以便我可以在下一个框中使用它。

示例：我有一个表格。在第一个文本框中，访问者选择德克萨斯州。我需要知道他选择了什么，以便在下面的下一个文本框中，我不会向他提供佛罗里达州的城市，而只提供德克萨斯州的城市。

谢谢你。

# android - 在新 SDK(3.0) 中使用 Android 上的 facebook API 设置电子邮件权限

> ID：14530423
> 
> 赞同：1
> 
> 时间：2013-01-25T21:08:12.930
> 
> 标签：android, facebook, api, email, authentication

我正在使用适用于 Android 的新 Facebook SDK（3.0 版）。我打开一个新的 facebook 会话的代码如下，

```
if (!session.isOpened() && !session.isClosed() && session.getState()==SessionState.OPENING) {
            session.openForRead(new Session.OpenRequest(this)
                    .setCallback(statusCallback).setPermissions(Arrays.asList("email")));
        } else {

            Session.openActiveSession(getActivity(), this, true,
                    statusCallback);
        } 
```

如上所示，使用 openForRead 打开会话时，我可以设置访问电子邮件的权限。如果我打开已经活跃的会话怎么办。?

是否有关于如何使用的适当文档，

```
session.requestNewReadPermissions(newPermissionsRequest) 
```

# teamcity - 设置 TeamCity 状态可视化工具

> ID：14530424
> 
> 赞同：11
> 
> 时间：2013-01-25T21:08:19.643
> 
> 标签：teamcity

我想在大电视屏幕上显示 TC 构建状态，但是默认的 TeamCity 主页包含太多详细信息，并且我想仅显示基本信息并在构建状态标记为失败时将背景着色为红色。你知道任何不错的 TC 可视化工具吗？我尝试从[http://userscripts.org/scripts/review/92241](http://userscripts.org/scripts/review/92241)获取greasemonkey 和脚本，但我收到 jquery 错误 - 脚本本身有点过时了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-26T01:29:19.843

有几个用于大屏幕可视化的 TeamCity 插件。不同的插件（或独立应用程序）具有不同的依赖关系（因为编程语言），并且它们似乎都显示略有不同的信息，因此您需要查看屏幕截图并从显示您想要的内容开始。

~~有关列表，请参阅[TeamCity 插件页面的通知/可视化工具部分](http://confluence.jetbrains.net/display/TW/TeamCity+Plugins#TeamCityPlugins-Notification%2FVisualizers)。~~

JetBrains 现在在其[插件存储库](https://plugins.jetbrains.com/category/95-notification-visualizers/teamcity)中维护该列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-03T09:35:26.180

有几个适用于 Chrome 的 TeamCity 仪表板插件可用作大屏幕可视化。

*   [构建反应器](https://chrome.google.com/webstore/detail/buildreactor/agfdekbncfakhgofmaacjfkpbhjhpjmp)
*   [TeamCity 状态监视器](https://chrome.google.com/webstore/detail/teamcity-status-monitor/ojkkaphfgjpbckihnbbminnoenhndeje)

# macos - 来自 AVFoundation 的这条消息是什么意思

> ID：14530431
> 
> 赞同：1
> 
> 时间：2013-01-25T21:08:41.677
> 
> 标签：macos, avfoundation, osx-mountain-lion

我已经设置了一个例程来记录屏幕的某些部分。我关注[这个 Q@A](http://developer.apple.com/library/mac/#qa/qa1740/_index.html)。它工作正常。但是，我在控制台上收到此消息：

```
AVF info: Successfully connected to the Intel plugin, offline Gen6 
AVF encoder info: AVF_SetParam kAVF_Encoder1_ProfileLevelUpdateParam, reset profile_level from 100:50 to 77:31 
```

第二个是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-12T17:03:51.140

这是来自 AV Foundation 设置 h264 编码器的嘈杂调试输出（由屏幕录制逻辑在幕后触发）。在这种情况下，很可能是通过 AV Foundation Intel 插件加速的硬件。第二行表示 h264 编码配置文件和/或级别已更改 - 考虑到您为屏幕录制请求的输出编码，这也可能自动发生。

# c# - 使用 C# 究竟如何解析这个有趣的 xml 文档

> ID：14530432
> 
> 赞同：1
> 
> 时间：2013-01-25T21:08:44.650
> 
> 标签：c#, .net, xml, xml-parsing, xmldocument

从下面的文件中，

```
 <?xml version="1.0" ?> 
- <XMLScreen xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <CX>80</CX> 
  <CY>24</CY> 
  <Formatted>true</Formatted> 
- <Field>
  <Location position="1" left="1" top="0" length="61" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  *DIU DISPATCH INQUIRY AND UPDATE 
  </Field>
- <Field>
  <Location position="63" left="63" top="0" length="17" /> 
  <Attributes Base="204" Protected="true" /> 
  12:34:48 01/25/13 
  </Field>
- <Field>
  <Location position="80" left="0" top="1" length="5" /> 
  <Attributes Base="204" Protected="true" /> 
  TECH: 
  </Field>
- <Field>
  <Location position="86" left="6" top="1" length="4" /> 
  <Attributes Base="234" Protected="false" FieldType="High" /> 
  0001 
  </Field>
- <Field>
  <Location position="91" left="11" top="1" length="6" /> 
  <Attributes Base="204" Protected="true" /> 
  DATE: 
  </Field>
- <Field>
  <Location position="98" left="18" top="1" length="4" /> 
  <Attributes Base="234" Protected="false" FieldType="High" /> 
  0126 
  </Field>
- <Field>
  <Location position="103" left="23" top="1" length="6" /> 
  <Attributes Base="204" Protected="true" /> 
  TYPE: 
  </Field>
- <Field>
  <Location position="110" left="30" top="1" length="2" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="113" left="33" top="1" length="6" /> 
  <Attributes Base="204" Protected="true" /> 
  RESN: 
  </Field>
- <Field>
  <Location position="120" left="40" top="1" length="2" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="123" left="43" top="1" length="10" /> 
  <Attributes Base="204" Protected="true" /> 
  GEO CODE: 
  </Field>
- <Field>
  <Location position="134" left="54" top="1" length="1" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="136" left="56" top="1" length="9" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="146" left="66" top="1" length="11" /> 
  <Attributes Base="204" Protected="true" /> 
  DISP STAT: 
  </Field>
- <Field>
  <Location position="158" left="78" top="1" length="1" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="160" left="0" top="2" length="58" /> 
  <Attributes Base="204" Protected="true" /> 
  OPEN/UNTS:00001 00015 CMPL/UNTS:00000 00000 UNABLES:0000 
  </Field>
- <Field>
  <Location position="219" left="59" top="2" length="5" /> 
  <Attributes Base="204" Protected="true" /> 
  SPA: 
  </Field>
- <Field>
  <Location position="225" left="65" top="2" length="4" /> 
  <Attributes Base="234" Protected="false" FieldType="High" /> 
  8155 
  </Field>
- <Field>
  <Location position="230" left="70" top="2" length="4" /> 
  <Attributes Base="234" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="235" left="75" top="2" length="4" /> 
  <Attributes Base="234" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="240" left="0" top="3" length="11" /> 
  <Attributes Base="204" Protected="true" /> 
  TECH NOTES: 
  </Field>
- <Field>
  <Location position="252" left="12" top="3" length="65" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  </Field>
- <Field>
  <Location position="318" left="78" top="3" length="2" /> 
  <Attributes Base="204" Protected="true" /> 
  </Field>
- <Field>
  <Location position="320" left="0" top="4" length="80" /> 
  <Attributes Base="204" Protected="true" /> 
  TYPE RESN JOB # ST/TME ADDRESS TIME UN ZIP CODE DATE 
  </Field>
- <Field>
  <Location position="400" left="0" top="5" length="2" /> 
  <Attributes Base="204" Protected="true" /> 
  01 
  </Field>
- <Field>
  <Location position="403" left="3" top="5" length="19" /> 
  <Attributes Base="206" Protected="true" FieldType="High" /> 
  AF 01 437804 
  </Field>
- <Field>
  <Location position="423" left="23" top="5" length="1" /> 
  <Attributes Base="226" Protected="false" FieldType="High" /> 
  R 
  </Field>
- <Field>
  <Location position="425" left="25" top="5" length="4" /> 
  <Attributes Base="206" Protected="true" FieldType="High" /> 
  0753 
  </Field>
- <Field>
  <Location position="480" left="0" top="6" length="60" /> 
  <Attributes Base="206" Protected="true" FieldType="High" /> 
  CUST REQ: Y 
  </Field>
- <Field>
  <Location position="541" left="61" top="6" length="5" /> 
  <Attributes Base="207" Protected="true" FieldType="Hidden" /> 
  2000 
  </Field>
- <Field>
  <Location position="547" left="67" top="6" length="13" /> 
  <Attributes Base="207" Protected="true" FieldType="Hidden" /> 
  0360 
  </Field>
- <Field>
  <Location position="560" left="0" top="7" length="3" /> 
  <Attributes Base="207" Protected="true" FieldType="Hidden" /> 
  </Field>
- <Unformatted>
  <Text>*DIU DISPATCH INQUIRY AND UPDATE 12:34:48 01/25/13</Text> 
  <Text>TECH: 0001 DATE: 0126 TYPE: RESN: GEO CODE: DISP STAT:</Text> 
  <Text>OPEN/UNTS:00001 00015 CMPL/UNTS:00000 00000 UNABLES:0000 SPA: 8155</Text> 
  <Text>TECH NOTES:</Text> 
  <Text>TYPE RESN JOB # ST/TME ADDRESS TIME UN ZIP CODE DATE</Text> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text /> 
  <Text>PF6=NOTE/RESL PF7=BWD PF8=FWD PF9=NEXT PF11=OPEN W/OS NO MORE W/OS</Text> 
  <Text>DIU22E-PAGING ERROR, ONLY ONE PAGE</Text> 
  </Unformatted>
  </XMLScreen> 
```

我正在尝试仅解析带有文本的行，例如最后两行：

```
 <Text>PF6=NOTE/RESL PF7=BWD PF8=FWD PF9=NEXT PF11=OPEN W/OS NO MORE W/OS</Text> 
  <Text>DIU22E-PAGING ERROR, ONLY ONE PAGE</Text> 
```

我想我已经接近我的最新代码，但我是 XML 解析的新手：

```
public static string GetTextByLocationIdNoNull(XmlDocument xmlDoc, int nodeId)
{
    string field;
    XmlNode node = xmlDoc.SelectSingleNode(String.Format(@"//Location[@position='{0}']", nodeId));
    if (node != null)
    {
        return field = node.ParentNode.InnerText;
    }
    return "Null";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:17:49.357

选择条件不明确。假设您在空文本元素之后需要文本元素（使用 Linq to Xml 的解决方案）：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var query = xdoc.Root.Element("Unformatted")
                .Elements("Text")
                .SkipWhile(t => !t.IsEmpty)
                .SkipWhile(t => t.IsEmpty)
                .Select(t => (string)t); 
```

回报：

```
"PF6=NOTE/RESL PF7=BWD PF8=FWD PF9=NEXT PF11=OPEN W/OS NO MORE W/OS"
"DIU22E-PAGING ERROR, ONLY ONE PAGE" 
```

# javascript - 淘汰赛：将映射扩展到复杂的 JSON

> ID：14530435
> 
> 赞同：1
> 
> 时间：2013-01-25T21:08:57.390
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我从服务器收到一个复杂的 JSON。让它成为下一个：

```
var data = [{
    name: "name1",
    items:[
        {
        name:"name11",
        subItems:[{
                name:"name111",
                children[
                    {id:1,name:"child1111",status:"good"},
                    {id:2,name:"child1112",status:"bad"},
                    {id:3,name:"child1113",status:"good"}
                ]},
                {
                name:"name112",
                children[
                    {id:4,name:"child1121",status:"good"}]
                }]
        },
        {
        name:"name12",
        subItems:[{
                name:"name121",
                children[
                    {id:5,name:"child1211",status:"bad"}]
                }]
        }]
    },
    {
    name: "name2",
    items:[
        {
        name:"name21",
        subItems:[{
                name:"name111",
                children[
                {id:7,name:"child2111",status:"good"}
                ]}]
        }]
    }]; 
```

所以我有一个对象列表，每个对象都包含名称和项目属性。Items 是类似对象列表的属性，每个对象都包含 name 和 subItems 属性。subItems 属性与上一个相同，并具有 name 和 children 属性。children 是我的实体列表。我使用[映射](http://knockoutjs.com/documentation/plugins-mapping.html)来填充我的 ViewModel。首先，我无法想象如何`id`在我的实体中设置为键。我想知道如何“潜入”它。此外，我需要扩展我的实体。像下一个示例一样添加计算属性：

```
computProp: ko.computed(function() {return name+status;}) 
```

我不想创建 js 类，因为在这种情况下我看不到映射的好处。在这种情况下，我可以实现手动映射。对我来说会更清楚。

因此，欢迎任何想法、建议或批评。

PS：我已经搜索/阅读过类似的[主题](https://stackoverflow.com/questions/12219238/extending-dynamic-and-mapped-data-in-knockout)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:20:18.570

您必须显式声明子视图模型才能获得此行为，但您仍然可以从完成所有映射中受益

[http://jsfiddle.net/uXMhA/](http://jsfiddle.net/uXMhA/)

```
ChildViewModel = function(data) {
    ko.mapping.fromJS(data, {}, this);
    this.computProp = ko.computed(function() {
        return this.name() + this.status();
    }, this);
}; 
```

# sharepoint - 使用对象模型覆盖主要版本

> ID：14530442
> 
> 赞同：1
> 
> 时间：2013-01-25T21:09:44.623
> 
> 标签：sharepoint, sharepoint-2010, versioning, object-model

我在 SharePoint 2010 列表中启用了版本控制和签入/签出，并且出于与业务相关的原因，想要更新字段中的信息：以类似的方式覆盖所有版本的字段数据，以便版本号执行不变。

如果我调用 SPListItemVersion.ListItem.UpdateOverwriteVersion()，它会失败，说明我需要在对其进行更改之前签出该项目。说得通。因此，我在更新语句之前使用 SPListItemVersion.ListItem.CheckOut() 语句，尝试更新，并收到无法覆盖已发布版本的错误。我还尝试在签出之前使用 SPSite.AllowUnsafeUpdates = true，在更新调用后将其设置回 false，但后一个错误仍然发生。有任何想法吗？

剥离代码如下：

```
foreach (SPListItemVersion itemVersion in item.Versions){
  itemVersion.ListItem.File.CheckOut(SPFile.SPCheckOutType.Online, itemVersion.ListItem.File.TimeLastModified.ToString());
  site.AllowUnsafeUpdates = true;
  itemVersion.ListItem["FieldName"] = "changed value here";
  itemVersion.ListItem.UpdateOverwriteVersion();
  site.AllowUnsafeUpdates = false;
  itemVersion.ListItem.File.CheckIn("Updated list item version", SPCheckinType.OverwriteCheckIn);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:05:39.333

对于可能发现自己面临此问题的任何人，您无需切换 AllowUnsafeUpdates 字段。对我有用的是`itemVersion.ListItem.UpdateOverwriteVersion()`用`itemVersion.ListItem.SystemUpdate(false)`. 传入的参数告诉 SharePoint 在更新时不要创建新版本。

**编辑：**此答案仅再次更新当前项目。SPListItemVersion 字段引用仅可通过`get`；看来这在对象模型中是不可能的。

# java - 存储过程与单例 Java

> ID：14530447
> 
> 赞同：2
> 
> 时间：2013-01-25T21:10:05.337
> 
> 标签：java, sql, performance, stored-procedures, singleton

目前我以这种方式连接到数据库：

**MyClass.java**

```
try {
    DataSource datasource = JNDILoader.getDataSourceObject(pathToSource);
    Class.forName("net.sourceforge.jtds.jdbc.Driver");
    connection = datasource.getConnection();
    stmt = connection.prepareStatement("{call storageProcedureXXX(?,?)}");
    stmt.setString(1, "X");
    stmt.setString(2, "Y");            
    result = stmt.executeQuery();
}catch (SQLException){
    //TODO
}catch(Exception){
    //TODO
} 
```

这适用于发出数据请求的 1 个类，但是，如果我创建一个单例类并从中获取连接会更好吗？（性能？，可维护性？，简单性？）。哪个选项会更好：Singleton vs StorageProcedures per each request？。

注意：最后，应用程序（Restful Web Service）将需要连接到不同的数据库来为不同的专业类加载数据，甚至，这些类需要从纯文本中加载数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:46:47.507

首先，您混合了两种不同的东西：单例和存储过程。[单例](http://en.wikipedia.org/wiki/Singleton_pattern)是设计模式，[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)是在数据库上执行的过程，通常封装了一些业务逻辑。

您所写的并不是连接到数据库的真正首选方式。如果您有很多请求并为每个请求子创建一个连接，那么您将遇到与数据库连接过多的问题。您应该使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。Java 最著名的是[DBCP](http://commons.apache.org/dbcp/)。另一个是[c3p0](http://sourceforge.net/projects/c3p0/)。

For connection on different databases you should use something like [Hibernate](http://www.hibernate.org/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:27:47.323

存储过程在数据库上执行。您通过连接向/从它传递/检索数据。

您必须检查它是否是线程安全的（我不这么认为），是否会进行并发调用。

通常一个存储过程 = 1 个事务发生在数据库中。

你为什么首先使用存储过程？

# sql - 使用 mysql_real_escape_string() 后返回回车

> ID：14530448
> 
> 赞同：0
> 
> 时间：2013-01-25T21:10:07.017
> 
> 标签：sql, mysql-real-escape-string, carriage-return

我正在完成我的网站，并希望使其非常安全 sql 注入。其中一个主要部分是在任何潜在的用户输入上通过和使用 mysql_real_escape_string() 。

这对大多数事情都很好，我只需要使用“stripslashes”来返回原始内容以显示在页面上。但是，我似乎无法返回回车。

有几个地方用户可能会提交带有回车的片段（消息就是一个例子，例如以“Hi John”开头，然后返回两次到主消息）。我怎样才能解决这个问题？Stripslashes 只是返回带有 rnrn 的消息，这是不好的。

作为一个例子（我试图测试所有可能的输入）。

本文：

```
Once upon a time there was a guy named "steve" or 'john' or backslash (\)

Then, two lines later, he left. 
```

在 SQL 数据库中是这样保存的：

```
Once upon a time there was a guy named \"steve\" or \'john\' or backslash (\\)\r\n\r\nThen, two lines later, he left. 
```

并使用 stripslashes 让它像这样（注意我正在执行以下操作以将其打印到 html - ：

```
Once upon a time there was a guy named "steve" or 'john' or backslash (\)rnrnThen, two lines later, he left. 
```

我试过nl2br，但由于某种原因它什么也没做。会喜欢这里的任何想法，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:28:31.427

有很多事情搞砸了。

1.  mysql_real_escape_string() 与 sql 注入和用户输入无关。
2.  不应该有无条件的stripslashes，而只是故意的。
3.  正确使用时，转义不会进入数据库。检索时不需要带斜杠。
4.  如果数据库中有斜线，则说明您有过多的转义。您的代码添加了两次斜杠，或者您使用的是占位符，这使得转义无用

# javascript - 咖啡脚本类

> ID：14530450
> 
> 赞同：2
> 
> 时间：2013-01-25T21:10:18.900
> 
> 标签：javascript, class, inheritance, coffeescript, kineticjs

当我用新的 Kinetic.Stage 替换新的画廊时，代码正常工作当我使用驱动类时，它不起作用。

为什么从 Kinetic.Stage 派生的画廊类型是错误的？

```
width = window.innerWidth   || document.documentElement.clientWidth || document.body.clientWidth || 0
height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || 0

class Gallery extends Kinetic.Stage
  constructor: (config) -> 
      super(config)

window.onload = -> 
  list_of_photos = jQuery('#_image img')
  x_pos = width/4
  y_pos = height/4
  stage = new Gallery
                container: "gallery_container"
                width: width
                height: height
  images_layer = new Kinetic.Layer()

  for image in list_of_photos
    imageObj = new Image()
    imageObj.src = image.src
    x_pos = x_pos + 100
    y_pos = y_pos + 10
    ori = new Kinetic.Image
                x: x_pos 
                y: y_pos
                image: imageObj
                draggable: true
                width: 200
                height: 200
    images_layer.add ori
  stage.add images_layer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T11:21:57.067

**问题**- Kineticjs 对象与咖啡脚本类不“兼容”。

**解决**- 您必须使用其他方式调用“超级”

```
class Gallery extends Kinetic.Stage
    constructor : (config) ->
        Kinetic.Stage.call(@, config) 
```

这里的例子：http: [//jsfiddle.net/lavrton/w2EQD/4/](http://jsfiddle.net/lavrton/w2EQD/4/)

**UPD**：我发现这个问题只存在于“构造函数”方法中。对其他人来说还可以：

```
class Gallery extends Kinetic.Stage
  constructor: (config) -> 
    Kinetic.Stage.call(@, config)
  add : (item) ->
    console.log(item)
    super item 
```

# jquery - jQuery没有选择列表项

> ID：14530453
> 
> 赞同：-1
> 
> 时间：2013-01-25T21:10:40.327
> 
> 标签：jquery, html

我正在读取一个 cookie 以在页面加载时选择一个列表项（cookie 回来了——只是为了确保，我对其进行了硬编码并且选择仍然不起作用）。什么都没有被选中。这是代码：

**HTML**

```
<select id="Carriers" size="20">
            <option value="0">Anaheim</option>
            <option value="0">CCMSI</option>
            <option value="0">City of Newport Beach</option>
            <option value="0">City of Santa Ana</option>
            <option value="0">Guard</option>
            <option value="1">Staffmark</option>
    </select> 
```

**JS**

```
$(document).ready(function () {
        var cookie = getCookie(CookieName);
        if (cookie != null) {
            $("#Carriers").val(cookie);
        }
    }); 
```

**编辑：**它在 IE8 或 Chrome 中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:17:29.840

使用唯一值...

[http://jsfiddle.net/QdHB9/](http://jsfiddle.net/QdHB9/)

```
<select id="Carriers" size="20">
    <option value="0">Anaheim</option>
    <option value="1">CCMSI</option>
    <option value="2">City of Newport Beach</option>
    <option value="3">City of Santa Ana</option>
    <option value="4">Guard</option>
    <option value="5">Staffmark</option>
</select>

$(document).ready(function () {
    var cookie = 2;
    if (cookie != null) {
        $("#Carriers").val(cookie);
    }
}); 
```

# c# - 如何在 Silverlight 中为 Tooltip 定义数据模板？

> ID：14530454
> 
> 赞同：0
> 
> 时间：2013-01-25T21:10:42.997
> 
> 标签：c#, silverlight-4.0

如何在 Silverlight 中为 Tooltip 定义数据模板？

我能够找到有关创建控件模板并将其分配给工具提示模板属性的示例，但是如何创建工具提示数据模板并分配它？

# oracle - 从经典 asp 访问 Oracle 11g 客户端

> ID：14530456
> 
> 赞同：0
> 
> 时间：2013-01-25T21:10:51.077
> 
> 标签：oracle, asp-classic, oracle11g, webserver, oracleclient

我们在 asp 中有一个网页，它使用 oracle 客户端访问 Oracle 数据。我们无法让 asp 访问 Oracle 11g 的 oracle 客户端。在 Oracle 10g 中，我们必须授予匿名身份验证用户访问 OracleXE 客户端文件夹的权限。这将使 asp 页面可以访问 oracle 客户端。使用 oracle 11g 客户端很难判断哪些文件夹需要访问。我们已授予对所有可以找到的 oracle 文件夹的访问权限，但 asp 页面仍然无法访问 oracle 11g 客户端。

也许 asp 页面必须访问 oracle 11g 客户端的其他内容。有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:39:44.847

安装 Oracle 客户端软件后是否重新启动？也许 IIS 没有发现该软件在 PATH 中。

# assembly - 第一个操作系统，一些流水线解释

> ID：14530461
> 
> 赞同：4
> 
> 时间：2013-01-25T21:11:24.407
> 
> 标签：assembly, x86, bootloader, bios

我正在使用 NASM 编写我的第一个操作系统引导扇区。我让它工作了，它只显示“Hello OS world！” 用红色字母。很简单。我已将 boot.asm 转换为 boot.bin，然后将其转换为 boot.img。我正在使用 VMWare 播放器，我将 boot.img 安装为软盘驱动器并从那里启动，它工作得很好。但是有几行这个汇编代码的目的我不明白。

```
 org  07c00h                         
       mov  ax, cs
       mov  ds, ax
       mov  es, ax
       call DispStr         
       jmp  $           
   DispStr:
       mov  ax, BootMessage
       mov  bp, ax 
       mov  cx, 16  
       mov  ax, 01301h      ; 
       mov  bx, 000ch       ;
       mov  dl, 0           ;
       int  10h             ;
       ret
   BootMessage:     db  "Hello, OS world!"
       times    510-($-$$)  db  0   
       dw   0xaa55              ; 
```

以分号结尾的行是我不明白的行。我已经做了很多谷歌搜索，并且能够找出其他的东西。我在编写汇编方面相当胜任。因此，例如，我知道`mov ax,01301h`将 移动`01301h`到`AX`寄存器中。但我不明白为什么或如何`01301h`重要。我猜它们有点像格式化字符串的参数，但这只是一个猜测。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T21:13:11.353

查看[有关 INT 10H 的此页面](http://www.ctyme.com/intr/rb-0210.htm)以获取更多信息。这些数字是控制该中断行为的参数。在你的情况下：

```
ax = 0x1301 -> ah = 0x13 al = 0x01
bx = 0x000c -> bh = 0x00 bl = 0x0c
cx = 16
dl = 0x00 
```

意思是“`AH=0x13`写字符串”，还有其他各种控制参数：

```
AL = write mode -> 1
BL = color -> 0x0c = light red
BH = page number -> 0
CX = string length -> = 16
DH = row -> 0
DL = column -> 0
ES:BP = offset of string -> pointer to BootMessage string 
```

# boost - Boost Spirit - 解析器捕获不需要的文本

> ID：14530462
> 
> 赞同：1
> 
> 时间：2013-01-25T21:11:25.753
> 
> 标签：boost, boost-spirit

我有一个简单的结构

```
// in namespace client
struct UnaryExpression
{
    std::string key;
    SomeEnums::CompareType op;
}; 
```

`SomeEnums::CompareType`是一个枚举，我在其中定义了一个符号表：

```
struct UnaryOps : bsq::symbols<char, SomeEnums::CompareType>
{
    UnaryOps() : bsq::symbols<char, SomeEnums::CompareType>(std::string("UnaryOps"))
    {
        add("exists", SomeEnums::Exists)
          ("nexists", SomeEnums::NotExists);
    }
}; 
```

[我有两种不同的方式来解析结构，我在另一个线程](https://stackoverflow.com/questions/14514983/boost-spitirt-single-struct-multiple-rules)中询问并开始工作（大部分）。

我的语法如下所示：

```
template<typename Iterator>
struct test_parser : bsq::grammar<Iterator, client::UnaryExpression(), bsq::ascii::space_type>
{
    test_parser()
        : test_parser::base_type(unaryExp, std::string("Test"))
    {
        using bsq::no_case;

        key %= bsq::lexeme[bsq::alnum >> +(bsq::alnum | bsq::char_('.'))];

        unaryExp %= unaryE | unaryF;
        unaryE %= key >> no_case[unaryOps];
        unaryF %= no_case[unaryOps] >> '(' >> key >> ')';
    };

    UnaryOps unaryOps;

    bsq::rule<Iterator, std::string(), bsq::ascii::space_type> key;
    bsq::rule<Iterator, client::UnaryExpression(), bsq::ascii::space_type> unaryExp;
    bsq::rule<Iterator, client::UnaryExpression(), bsq::ascii::space_type> unaryE;
    bsq::rule<Iterator, client::UnaryFunction(), bsq::ascii::space_type> unaryF;
}; 
```

我正在使用以下逻辑解析代码：

```
bool r = phrase_parse(iter, end, parser, bsq::ascii::space, exp);

if (r && iter == end)
{
    std::cout << "-------------------------\n";
    std::cout << "Parsing succeeded\n";
    std::cout << "key: " << exp.key << "\n";
    std::cout << "op : " << exp.op << "\n";
    std::cout << "-------------------------\n";
} 
```

如果我输入 like`foo exists`并且 exp.key 等于“foo”并且 exp.op 等于相应的枚举值（在本例中为 0），这一切都可以正常工作。类似的东西`foo1 nexists`也有效。

但是，第二条规则并不像我预期的那样起作用。如果我给它输入，`nexists(foo)`那么我得到以下输出：

```
-------------------------
Parsing succeeded
key: nexistsfoo
op : 1
------------------------- 
```

似乎枚举值设置得当，但我无法弄清楚为什么“nexsts”会被添加到密钥字符串之前。有人可以告诉我如何修复我的规则，以便密钥与第二条规则相等吗？

我在这里发布了一份精简代码的副本，说明了我的问题：http: [//pastebin.com/402M9iTS](http://pastebin.com/402M9iTS)

# php - 如何通过 PHP Web 服务仅将“更新”数据从 mysql 发送到移动设备？

> ID：14530465
> 
> 赞同：0
> 
> 时间：2013-01-25T21:11:31.970
> 
> 标签：php, android, mysql, ios, web-services

我想知道如何只向移动设备发送“更新”数据。假设我为 iOS 和 Android 构建了使用 PHP Web 服务获取数据的移动应用程序。当我们第一次启动应用程序时，它使用 json 从 mysql 数据库中获取所有数据。但是当我们第二次启动它时，我不想删除我移动设备上的旧数据并再次获取所有数据。我宁愿只从我的数据库中使用 php webservices 下载“更新”。任何想法如何实现这一目标？

# php - 从 Doctrine2 和 Symfony2 的集合中获取独特的属性？

> ID：14530470
> 
> 赞同：1
> 
> 时间：2013-01-25T21:12:05.003
> 
> 标签：php, mysql, symfony, doctrine, doctrine-orm

我在实体之间有一个多对多关联：（产品和类别）在 Symfony2 中，使用 Doctrine2。

我想列出每个类别，然后列出该类别中的每个*唯一*产品名称。每个产品显然可以分为许多类别（有些类别是空的）。

这是我必须使用基本实体管理器方法等的方法。注释是 PHPStorm 的提示，以便代码自动完成工作。：

```
 $repository = $this->getDoctrine()->getRepository('SomeRandomBundle:Category');
    $categories = $repository->findAll();

    $response = '';

    /** @var $category Category  */
    foreach ($categories as $category){

        $products = $category->getProducts();

        if (!$products->isEmpty()){

            $productArr = array();

            /** @var $product Product */
            foreach ($products as $product){
                $productArr[] = $product->getName();
            }
            $productArr = array_unique($productArr);

            $response .= $category->getName() . "\n";

            foreach ($productArr as $prod){
                $response .= "\t$prod\n";
            }
        }
    } 
```

这在 DB 上有 30 次点击。（29 个类别）所以没关系。我的问题是想从 \Doctrine\Common\Collections\Collection 中获取唯一的产品名称

你可以看到我复杂的代码循环遍历产品名称，将它们放在一个数组中，然后在其上调用 array_unique。当然可以，但必须有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T01:27:49.890

您可以在存储库中创建一个特殊查询并使用该`Group By`语句。这将使您的代码在`EntityManager`. 在您的存储库中的代码下方：

## 编辑

```
namespace Acme\PersonalBundle\Repository;

use Doctrine\ORM\EntityRepository;

class CategoryRepository extends EntityRepository
{
    /**
     * Fetch unique product names
     *
     */
    public function fetchUniqueProductNames()
    {
        $query = $this->getEntityManager()
            ->createQuery('
        SELECT c.name, p.name FROM AcmePersonalBundle:Category c
        JOIN c.products p
            GROUP BY p.name'
        )
        try
        {
            return $query->getResult();
        }
        catch (\Doctrine\ORM\NoResultException $e)
        {
            return null;
        }
    } 
```

`DICTINCT`也可以帮助你，但`GROUP BY`更强大：

```
 $query = $this->getEntityManager()
            ->createQuery('
        SELECT DISTINCT p.name FROM AcmePersonalBundle:Category c
        JOIN c.products p'
        //.... 
```

W3 不是一个很好的文档，但至少你明白了：

*   [通过...分组](http://www.w3schools.com/sql/sql_groupby.asp)
*   [清楚的](http://www.w3schools.com/sql/sql_distinct.asp)

# android - Android 应用程序无法在手机上打开套接字

> ID：14530473
> 
> 赞同：0
> 
> 时间：2013-01-25T21:12:27.380
> 
> 标签：android, sockets, permissions

我正在开发一个利用网络连接的应用程序。我已经添加`<uses-permission android:name="android.permission.INTERNET"> </uses-permission>`到 AndroidManifest.xml 并且应用程序在 Eclipse 的模拟器中运行良好。一旦我把它转移到我的手机上，那部分就坏了，我不能再打开客户端套接字。

任何想法表示赞赏。提前致谢！

# c# - 为什么 HttpWebRequest ReadWriteTimeout 设置为 5 分钟？

> ID：14530476
> 
> 赞同：6
> 
> 时间：2013-01-25T21:12:38.940
> 
> 标签：c#, httpwebrequest, timeout

HttpWebRequests 的 ReadWriteTimeout 似乎默认为 5 分钟。

有这么高的原因吗？我试图将 API 调用的超时设置为 10 秒，但它旋转了超过 2 分钟。

当我将其设置为 30 秒时，它现在会在合理的时间内超时。

设置得太低有危险吗？

我无法想象在我的应用程序中花费超过 20-30 秒的时间（小的 2-30kb 有效负载）。

参考：http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.readwritetimeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.readwritetimeout.aspx)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-02T21:36:22.613

当然，5分钟超时是有原因的。它看起来像这样：

![在此处输入图像描述](../Images/039bec467769eb2f58694031ad1c0247.png)

这个装置是国际射电天文学研究中心使用的自动磁带检索系统。它存储 32.5 PB 的历史数据。当它的服务器收到一个 HttpWebRequest 时，机器会发送机器人来检索带有数据的磁带。正如您可能想象的那样，这需要一段时间。

这些系统在十年前相当普遍，大约在 .NET 设计的时候。今天没有那么多，硬盘存储容量的不懈改进使它们几乎过时了。尽管超过 5 PB 的 SAN 存储仍然会让您花掉一大笔钱。如果速度不是必需的，那么磁带很难被击败。

显然，当.NET 对线路另一端发生的事情一无所知时，它不可能可靠地声明超时。所以默认值很高。如果您有充分的理由相信您的特定设置存在上限，那么请不要犹豫，降低它。一定要让它成为一个可编辑的设置，你无法预测未来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T07:38:41.000

您不可能知道用户连接到您网站的连接速度。作为该框架的创建者，您也不知道开发人员将托管什么。这个类已经存在于 .NET 1.1 中，所以存在了很长时间。那时用户的速度也较慢。

找到一个好的默认值是非常困难的。您不想将其设置得太高以防止安全漏洞，也不想将其设置得太低，因为这会导致一百万个（夸大的）线程和有关中止请求的请求。

对不起，我不能给你任何官方消息，但这只是合理的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T20:18:42.327

为什么是 5 分钟？为什么不？ [JustAnotherUserYouMayKnow](https://stackoverflow.com/a/14577898/286114)给你解释得很好。但是像往常一样，您可以自由地将这个默认值更改为适合您的情况的值，因此请随意遵循[Christian](https://stackoverflow.com/users/2031936/christian-buisson)指出的路径。

当我们谈论数百万用户并且可能涉及数百万可能的场景时，设置默认值根本不是一件容易的事。

最重要的是，为什么它是 5 分钟并不重要，而是如何根据自己的需要调整它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:37:04.653

好吧，通过将其设置得如此之低，您可能会或可能会引入一系列问题。由于您可能能够在合理的时间内到达该站点，因此其他人可能无法到达。

一个完美的例子是 Verizon，他们调用了一系列`Proxy Servers`可以大大减慢连接速度的方法。我提出这样一个例子的原因；`Timeout`是我们的应用程序在抛出异常前一分钟指定的。

我们的服务器对大量请求没有问题，它很容易处理它们。但是，我们在世界各地的一些用户收到此错误：**错误 10060**。

问题可能来自不正确的路由`Proxy Configuration`或`Invalid Registry Key`实际处理`Timeout`请求的路由。

您会认为一分钟确实足够快，但实际上并非如此。与这个客户的特定网络一样，它不能足够快地虹吸数据 - 因此会导致错误。

所以你问：

> **为什么 HttpWebRequest ReadWrite Timeout 默认为五分钟？**

他们试图解释最小的公分母。

简单地说，每个网络和客户端在移动到所需位置时可能会有大量流量或延迟。如果它无法在您的端口理想套接字请求中到达目的地，您的用户将遇到异常。

关于网络的一些非常重要的事情：

*   某些配置的网络具有有限的跳数/生存时间。
*   过滤数据和安全性很重的代理和防火墙可能会延迟您的流量。
*   有些地区没有高速光纤或电缆。他们可能依赖 Satellite 或 DSL。
*   每个网络协议都是不同的。

这些是您必须考虑的一些变量。如果我们谈论的是互联网；每个客户端都有一个家庭网络；连接到 ISP；连接到互联网；连接到你。因此，您需要聚合多种形式的流量。

如果我们谈论的是 Intranet，使用大多数现代技术，您的时间成为问题的可能性很小，但仍有可能。

此外，每台单独的计算机都可能参与或导致问题。在 Windows 8 中，为浏览器指定的默认`Timeout`值为一分钟；在某些情况下，这些用户可能会在您的应用程序、站点或其他方面遇到异常。因此，您将手动更改注册表中的`ServerTimeOut`and`TimeOut`键以分配更长的值。

简而言之：

*   客户端计算机在您分配的时间内到达您的站点可能会造成问题。
*   网络 / ISP 可能会给某些用户带来问题。
*   您的服务器可能配置不正确或未分配正确的时间。

这些都是需要考虑的变量；因为它们会影响对您的应用程序的访问。不幸的是，在它启动并且用户开始使用您的网站之前，您无法确定。

不幸的是，您不知道您指定的时间是否足够；但它默认为更高的数字，因为世界各地存在如此多的变化，以至于它试图考虑最小的公分母。因为您的目标是接触尽可能多的人。

顺便说一句，非常好的问题，到目前为止也有一些很好的答案。

# google-cloud-storage - 我无法将大 (> 2GB) 文件上传到 Google Cloud Storage 网络用户界面

> ID：14530480
> 
> 赞同：4
> 
> 时间：2013-01-25T21:12:51.487
> 
> 标签：google-cloud-storage, gsutil

我一直在使用[Google API 控制台](https://code.google.com/apis/console/?#%3astorage)`Google Cloud Storage Manager`上的链接来上传我的文件。

这适用于大多数文件：1KB、10KB、1MB、10MB、100MB。但是昨天我无法上传 3GB 的文件。知道有什么问题吗？

将大文件上传到 Google Cloud Storage 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:12:51.487

Web UI 仅支持小于 2^32 字节 (4 GigaBytes) 的上传。我相信这是一个 javascript 限制。

如果您需要传输许多或大文件，请考虑使用[gsutil](https://developers.google.com/storage/docs/gsutil)：

1.  GSUtil 上传和下载任何大小的文件。
2.  GSUtil[恢复上传](https://developers.google.com/storage/docs/developer-guide#resumable)并恢复中途失败的[下载。](https://developers.google.com/storage/docs/reference-headers#range)
3.  GSUtil 计算[MD5 校验和](https://developers.google.com/storage/docs/reference-headers#contentmd5)以验证每个文件的内容是否正确传输。
4.  GSUtil 可以同时上传和下载多个文件。
    *   `gsutil -m cp /path/to/*thousands-of-files* gs://my-bucket/*`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-20T20:31:10.450

以我的经验，接受的答案是不正确的——也许是正确的，但有些东西已经改变了。

我刚刚使用 Windows 8.1 上的 Chrome 42 上的 Web 界面将大小为 2.2GB 的文件上传到 GCS。

我还要指出，问题是关于文件 > 2GB，答案提到 2GB，但从 2^32 得到，即 4GB，而不是 2。所以也许限制真的是 2^32（4GB） - 我没有没试过那么大的东西。

（对大文件使用 gsutil 仍然是个好主意。）

# java - 如何获取字符串链接中的最后 3 个字符？

> ID：14530483
> 
> 赞同：-1
> 
> 时间：2013-01-25T21:13:05.713
> 
> 标签：java

如何获取字符串链接中的最后 3 个字符？

我有这样的链接：

`"http://www.google.com"`

我怎样才能得到**“com”**？并将这些字符放入变量“字符串数据类型”中？

注意：我是 java 新手，我正在开发 android 应用程序，必须获取此代码，请：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:32:44.243

假设`url`遗嘱以`.XXX`(continuous extension)结尾

```
String[] splitted = url.split("\\.");
return (splitted[splitted.length-1]); //will return the last string after the last "." 
```

`url`你在哪里`url`（`www.google.com`在这种情况下）。

**请注意**，如果`url`是，`http://www.google.com/`则代码将返回`.com/`。因此，您需要检查结果是否包含`/`字符。（提示：`contains`在 String API 中查找）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:15:08.830

获取字符串的长度，从位置length-4开始制作子字符串，取3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:15:46.877

获取字符 '.' 的最后一个索引，从那里递增一次，然后一直到没有其他字符或到达 '/' 字符。

# google-apps-script - 应用脚本电子表格错误

> ID：14530487
> 
> 赞同：1
> 
> 时间：2013-01-25T21:13:27.573
> 
> 标签：google-apps-script

部署到 Google App Scripts 时，是否有人看到“意外错误”的原因...... doPost 中的某些内容？运行该函数不会产生错误。

```
function doGet() { 
  var app = UiApp.createApplication(); 
  var form = app.createFormPanel(); 
  var flow = app.createFlowPanel(); 
  flow.add(app.createTextBox().setName("textBox")); 
  flow.add(app.createListBox().setName("listBox").addItem("option 1").addItem("option 2")); 
  flow.add(app.createSubmitButton("Submit")); 
  form.add(flow); 
  app.add(form); 
  return app; 
} 

function doPost(eventInfo) { 

  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.getActiveSpreadsheet();

  ss.getRange("A1:A1");
  ss.getActiveRange().setValue("hello");  

  return app; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:20:58.140

`SpreadsheetApp.getActiveSpreadsheet()`仅适用于电子表格容器绑定脚本。否则，您需要使用`SpreadsheetApp.openById`并指定要获取的电子表格密钥。

当您“运行函数”时，您只是在运行 doGet 吗？如果您在下拉列表中选择 doPost 并运行它，如果这不是电子表格绑定脚本，您应该会看到一个错误。

# c# - 当列表的子集存在时，如何管理处置 IList 对象？

> ID：14530489
> 
> 赞同：2
> 
> 时间：2013-01-25T21:13:33.977
> 
> 标签：c#, design-patterns, idisposable

很难用语言来描述这个问题，所以这里是代码：

```
public class Item : IDisposable
{
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private bool _disposed;
    protected virtual void Dispose(bool disposing)
    {
        if (_disposed) return;
        _disposed = true;
        if (disposing)
        {
            //dispose managed resources
            if (_group != null) _group.Dispose();
            _stream.Close(); //or some legitimate thing that needs cleaned up
        }
        //dispose unmanaged resources
    }

    ItemList _group;
    public ItemList Group { get{return _group;} set{_group = value;}}
    public int SomeValue {get; set;}
}

public class ItemList : IList<Item>, IDisposable
{
    public ItemList(IList<Item> list) : base(list)
    {
        list.ForEach(i => i.Group = this);
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private bool _disposed;
    protected virtual void Dispose(bool disposing)
    {
        if (_disposed) return;
        _disposed = true;
        if (disposing)
        {
            //dispose managed resources
            this.ForEach(i => i.Dispose());
        }
        //dispose unmanaged resources
    }

    public ItemList CreateSubSet(int value)
    {
        return new ItemList(this.Where(i => i.SomeValue == value));
    }
} 
```

因此，如果您从 , 开始`ItemList`并调用`ItemList.CreateSubSet(2)`，您将获得第二个实例，`ItemList`其中包含`Item`原始 ItemList 中的一些相同实例。那么你怎么去调用`Dispose()`任何一个实例`ItemList`，因为一旦你这样做了，你实际上会处理它们两个？

我考虑过让make`Item`不负责处置`_group`，但即便如此，如果您调用`Dispose()`的一个实例`ItemList`，您最终还是会处置`Item`构成另一个 ItemList 的一些对象。

您是否必须在 内进行某种引用计数`Item`，并且仅在仅剩 1 个引用时才处理它？与此结合，如果您知道它是一个子集，也许`ItemList`在调用之前清空对象？`Dispose()`或者也许可以创建一个`ItemSubsetList`相同`ItemList`但不是一次性的课程？如果`ItemSubsetList`逃脱了 的范围`ItemList`，那么你将如何清理它？

任何设计模式或指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:12:23.240

对象是可变的还是不可变的，与它们相关的成本是多少？

一般来说，我建议可变对象在任何给定时间几乎总是有一个可清晰识别的所有者，*无论它们是否拥有任何资源*。`IList<T>`存在对可变对象的许多引用是完全可以接受的，但是在一个持有对其拥有的对象的引用的实体和持有对其`IList<T>`他人拥有的对象的引用的实体之间应该有明显的区别（后者例如，实体可能已经获得了引用，以便它可以将一些数据复制到其中以获取所有者的利益）。

我唯一期望`IDisposable`对象的所有权在像您这样的情况下会出现问题的情况是，如果对象本身是不可变的，除了是一次性的（这意味着它们的状态可以改变的唯一方法是在它们被处置时）。如果这种情况适用，我认为您的情况是极少数情况之一，如果*您*能确保（1）您知道成本是多少，并且它们是可以接受的，并且（2）您使用字典`WeakReference`或一些类似结构来回收尚未被识别为符合最终确定条件的实例。这种方法并不漂亮，但在某些情况下可能是最好的。

# visual-studio-2010 - 将非 gac 程序集添加到 Visual Studio 项目和项模板

> ID：14530491
> 
> 赞同：3
> 
> 时间：2013-01-25T21:13:41.823
> 
> 标签：visual-studio-2010, itemtemplate, project-template

我已经看到了将 GAC 中的程序集引用添加到 Visual Studio 2010 项目或项目模板的示例。是否可以在我的自定义项目或项目模板中添加对非 GAC 程序集的引用？

我将所有常用程序集都存储在本地文件夹（在开发环境中）中，我想在我的自定义项目和项目模板中引用这些程序集。我该怎么做？

```
<Reference>        
  <Assembly>MyWebUtils, Version=8.3.842.0, Culture=neutral, PublicKeyToken=</Assembly> 
</Reference> 
```

当我尝试添加本地 dll 时，我收到错误消息说它无法引用程序集。

# mysql - 如何强制命令行中的 MySQL 命令不提示 y/n？

> ID：14530492
> 
> 赞同：13
> 
> 时间：2013-01-25T21:13:46.587
> 
> 标签：mysql, database

我有一个执行以下操作的 shell 脚本

```
mysql -uuser -ppass -e "DROP DATABASE IF EXISTS database" 
```

但是，如果您确定要执行此操作 [Y/N]，则会出现提示。我需要在脚本中使用它，所以有没有办法强制它执行？`--force`文档中的选项谈到不因错误而停止。

编辑：`mysql`客户端实际上不会生成提示。事实证明，我`mysqladmin`接到了正在生成提示的客户电话。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T21:18:52.173

很明显，shell 脚本正在等待 Y/N 响应，而不是 MySQL 客户端。

您应该能够通过复制/粘贴直接执行该行

```
mysql -uuser -ppass -e "DROP DATABASE IF EXISTS database" 
```

在 Linux 命令提示符下。

如果您愿意，在此命令出现的地方，只需从 shell 脚本中注释掉 Y/N 响应即可。

我的下一个建议是让您查看您的 my.cnf。

查看是否有一个`[mysql]`或`[client]`部分包含以下内容：

```
[mysql]
i-am-a-dummy
safe-updates 
```

或者

```
[client]
i-am-a-dummy
safe-updates 
```

这些是真正的选择：请参阅MySQL 文档中的[**安全更新和 i-am-a-dummy**](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_safe-updates)

# 更新 2013-01-25 16:48 EDT

我的下一个猜测是操作系统。为什么 ？？？

如果`root`您`sudo`以`DROP DATABASE IF EXISTS`. 在操作系统级别，mysqld 会尝试丢弃数据库的文件夹。

例如，如果 datadir 是`/var/lib/mysql`并且你执行`DROp DATABASE IF EXISTS rolando;`，mysqld 将尝试运行`rm -rf /var/lib/mysql/rolando`。

if you are not `root` or `sudo`'d as `root`, I would expect the OS to echo that message. In fact, I have seen a message from the OS ask to delete a PID file when I was not logged in as root and attempted `service mysql stop`.

# UPDATE 2013-01-25 16:54 EDT

[**mysqladmin**](http://dev.mysql.com/doc/refman/5.5/en/mysqladmin.html) does not cause prompting either, except for passwords. Here are all its options:

```
[root@***]# mysqladmin --help
mysqladmin  Ver 8.42 Distrib 5.1.47, for redhat-linux-gnu on x86_64
Copyright 2000-2008 MySQL AB, 2008 Sun Microsystems, Inc.
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL license

Administration program for the mysqld daemon.
Usage: mysqladmin [OPTIONS] command command....
  -c, --count=#       Number of iterations to make. This works with -i
                      (--sleep) only.
  --debug-check       Check memory and open file usage at exit.
  --debug-info        Print some debug info at exit.
  -f, --force         Don't ask for confirmation on drop database; with
                      multiple commands, continue even if an error occurs.
  -C, --compress      Use compression in server/client protocol.
  --character-sets-dir=name
                      Directory for character set files.
  --default-character-set=name
                      Set the default character set.
  -?, --help          Display this help and exit.
  -h, --host=name     Connect to host.
  -b, --no-beep       Turn off beep on error.
  -p, --password[=name]
                      Password to use when connecting to server. If password is
                      not given it's asked from the tty.
  -P, --port=#        Port number to use for connection or 0 for default to, in
                      order of preference, my.cnf, $MYSQL_TCP_PORT,
                      /etc/services, built-in default (3306).
  --protocol=name     The protocol to use for connection (tcp, socket, pipe,
                      memory).
  -r, --relative      Show difference between current and previous values when
                      used with -i. Currently only works with extended-status.
  -O, --set-variable=name
                      Change the value of a variable. Please note that this
                      option is deprecated; you can set variables directly with
                      --variable-name=value.
  -s, --silent        Silently exit if one can't connect to server.
  -S, --socket=name   The socket file to use for connection.
  -i, --sleep=#       Execute commands repeatedly with a sleep between.
  --ssl               Enable SSL for connection (automatically enabled with
                      other flags). Disable with --skip-ssl.
  --ssl-ca=name       CA file in PEM format (check OpenSSL docs, implies
                      --ssl).
  --ssl-capath=name   CA directory (check OpenSSL docs, implies --ssl).
  --ssl-cert=name     X509 cert in PEM format (implies --ssl).
  --ssl-cipher=name   SSL cipher to use (implies --ssl).
  --ssl-key=name      X509 key in PEM format (implies --ssl).
  --ssl-verify-server-cert
                      Verify server's "Common Name" in its cert against
                      hostname used when connecting. This option is disabled by
                      default.
  -u, --user=name     User for login if not current user.
  -v, --verbose       Write more information.
  -V, --version       Output version information and exit.
  -E, --vertical      Print output vertically. Is similar to --relative, but
                      prints output vertically.
  -w, --wait[=#]      Wait and retry if connection is down.
  --connect_timeout=#
  --shutdown_timeout=# 
```

# HEY, I STAND CORRECTED

`--force` does prompt for DROP DATABASE

OK I guess you located the culprit. I learned something today because I do not use `mysqladmin` to drop databases.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-25T21:22:46.857

Might have to pipe the 'yes' into the command. [This site](http://www.unix.com/shell-programming-scripting/134303-override-mysqladmin-drop-table-asking-keypress.html) offers an idea on how to do this.

```
yes | mysqladmin -u[username] -p[password] drop [database] 
```

But here is another wrinkle via [this post](https://stackoverflow.com/questions/2050581/how-to-delete-mysql-database-through-shell-command).

```
mysqladmin -u[username] -p[password] -f drop [database] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:30:26.620

In general, you can pass any query to mysql from shell with -e option.

```
mysql -u username -ppassword -D dbname -e "DROP DATABASE" 
```

Or you can Store your password in my.cnf but its less secure.

```
[client]
host     = localhost
user     = username.
password = password
socket   = /var/lib/mysql/mysql.sock 
```

# javascript - 全局监听 Backbone.js Model.save

> ID：14530496
> 
> 赞同：3
> 
> 时间：2013-01-25T21:14:15.917
> 
> 标签：javascript, events, backbone.js

我想在 Backbone 的本机`Model.save()`方法中附加一个记录成功和错误的自定义日志记录方法。我知道在每个模型的基础上我可以调用类似的东西：

```
myModel.save().success(function() {
    // do something cool
}); 
```

但是，我不想调整对各种模型的保存事件的每次调用，我想简单地监听*任何*模型上的保存事件。我想我想避免的一种方法实际上是修改`Backbone.Model.prototype.save`方法（尽管如果有人有一种优雅的方法来做到这一点，我愿意接受）。

关于如何创建这样一个事件监听器的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T23:44:10.237

如果您的所有模型/集合都使用默认的 Backbone.sync 方法，您可以创建一个新的同步方法来进行日志记录。

```
 var originalSync = Backbone.sync;
   var loggingSync = function(method, model, options) {
         // call original Backbone.sync
         var promise = originalSync(method, model, options);
         promise.done(function() {
            // if method is 'update' or 'create', log success
         });
         promise.fail(function() {
            // if method is 'update' or 'create', log failure
         });
         return promise;
      };
   Backbone.sync = loggingSync; 
```

默认情况下，Model.sync 和 Collection.sync 都代理到 Backbone.sync，因此如果您使用默认同步，则此更改会处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:29:29.243

```
var GlobalModel = Backbone.Model.extend({
save: function() {

}
});

myModel = GlobalModel.extend({
//..your model
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T01:49:33.747

如果您只想记录 AJAX 成功/失败，那么实际上有一种更好的方法，它甚至根本不涉及 Backbone `$.ajaxComplete`：.

jQuery 有一个很棒的函数`ajaxComplete`，它接受一个函数参数，然后在每次`$.ajax`调用完成（失败或成功）时运行该函数。通过使用此方法（即“将事件处理程序绑定到 ajaxComplete 伪事件”），您：

A) 不必与 Backbone 内部构件混为一谈

B) 保证捕获每个 AJAX 请求（即使是那些没有 Backbone 的请求）

C) 将此日志记录代码与您的其他代码完全分开

我可能还缺少其他一些好处，但你明白了。

另一方面，如果您真的只关心`save`而不只是关心 AJAX 请求，那么......那么您仍然可以使用`$.ajaxComplete`并在其中进行一些过滤以忽略非保存。但是您也可以创建自己的模型基类（如@salexch 建议的那样），或者更糟糕的是，您*可以*使用 Backbone 的内部结构，例如。通过替换`Backbone.Model.prototype.save`or `Backbone.sync`（正如@Paul Hoenecke 建议的那样），但是您正在为将来的 Backbone 升级或您可能想要使用的第 3 方 Backbone 库设置麻烦。

如果您有兴趣，这里是文档页面`ajaxComplete`： [http ://api.jquery.com/ajaxComplete/](http://api.jquery.com/ajaxComplete/)

哦，还有一些类似命名的`$.ajaxSomething`方法（例如`ajaxError`）仅针对失败/成功/请求启动/等。

# r - 如何在 R 中使用重复生成正数

> ID：14530497
> 
> 赞同：4
> 
> 时间：2013-01-25T21:14:20.690
> 
> 标签：r, function, repeat

我写了下面的代码。目的是仅获得正数。所以，`rnorm(5,2,2)`也可以产生负数，但我希望它只产生正数。为此，我使用`repeat`了 in `R`，但它不能正常工作。你有什么建议来修复它？这是代码：

```
for (i in 1:5){
repeat{
x <- rnorm(5,2,2)
if ((length(which(x<0)))==0){break}
print(x)
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:48:58.437

您的原始代码有效。您可能对不代表最终结果的 print(x) 感到困惑

```
repeat {
    x <- rnorm(5,2,2)
    if ((length(which(x<0)))==0){break}
}
x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:22:53.597

好吧，我不确定你为什么这样做或者你想要达到什么，但是如果你想从（2,2）正态分布中迭代地采样 100 个值并重复直到所有值都是正的，你可以做一些事情像 ：

```
v <- rnorm(100,2,2)
nb <- sum(v<0)
while (nb>0) {
  v[v<0] <- rnorm(nb,2,2)
  nb <- sum(v<0)
} 
```

# android - xml / linearlayout 未在设备上正确显示

> ID：14530498
> 
> 赞同：3
> 
> 时间：2013-01-25T21:14:28.617
> 
> 标签：android, xml, eclipse

很抱歉，如果这个问题已经被问过，但我找不到任何答案。这是一些背景背景：

我正在我的 Nexus 4 上测试我的应用程序以修复一些小错误。然而，就在 eclipse 启动它的时候，该区域突然断电，我的电脑关机了。最终，一旦电源恢复，我想我会在再次运行我的应用程序之前通过 .setTypeFace() 设置一个字体，但这使我的应用程序在我运行它时崩溃。因此，在摆弄代码并没有找到修复后，我决定摆脱整个字体，只运行带有错误修复的应用程序。但是，这使我的应用看起来像[这样](http://imgur.com/j1jDKeC.png)。

现在在 Eclipse 上，图形布局显示了[这个](http://i.imgur.com/qhWCC7L.jpg)。今天之前我的应用程序显示的图形布局非常好。eclipse上没有出现错误。

为什么会发生这种情况，我该如何解决？我会损坏整个文件吗？谢谢。

编辑：xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/testbg"
    android:orientation="vertical"
    android:weightSum="100" >

    <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="33" >

    ---- bunch of textviews ----

    </RelativeLayout>

    <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="57" >

    ---- More Textviews ----

    </RelativeLayout>

    <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10"
    android:orientation="horizontal"
    android:weightSum="3" >

    ---- three buttons ----

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:10:38.530

我终于弄明白了——那是背景。我一定是在某个地方搞砸了 9.png，因为一旦我摆脱了背景，它就会自行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:29:50.093

通常，当我更改字体时，我的应用程序会发生这种情况，有些字体在布局中会出现这样的情况，我使用的一些游戏是在制表符空间后添加一个字符或一个点，它可以工作，但是再次检查字体问题，尝试重新设置字体或设置其他字体。

# ruby - 安装了 Ruby 1.9.3 但 ruby -v 每个新终端都显示 1.8.7

> ID：14530503
> 
> 赞同：1
> 
> 时间：2013-01-25T21:14:57.560
> 
> 标签：ruby, macos, rvm

尽管我通过 RVM 安装了 Ruby 1.9.3，但每次打开新终端并运行“ruby -v”时，我都会得到：

```
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0] 
```

“rvm 列表”显示：

```
rvm rubies

   ruby-1.9.3-p362 [ x86_64 ]
=* ruby-1.9.3-p374 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

我试过输入“rvm use 1.9.3 --default”，但它只适用于当前的终端会话。打开新终端总是恢复到 1.8.7。

我还确保我的 ~/.bash_profile 最后包含：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

我该怎么做才能不必每次打开终端时都输入“rvm use 1.9.3”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:18:56.047

确保您的`.rvm`目录在您的`PATH`

# inno-setup - 如何通过从文件中读取来声明 Inno Setup 预处理器变量

> ID：14530504
> 
> 赞同：13
> 
> 时间：2013-01-25T21:15:00.173
> 
> 标签：inno-setup

好的，我知道您可以在 Inno Setup 中执行此操作：

```
#define AppVer "0.0.11" 
```

然后像这样使用它

```
[Setup]
AppVerName={#AppVer} 
```

现在想象我有一个名为`VERSION`“0.0.11”的文件。

有没有办法以某种方式将文件内容`VERSION`放入 Inno Setup 预处理器变量？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T12:38:53.290

使用ISPP 的`GetFileVersion`功能是首选方法（毕竟您的安装程序版本应该与您的应用程序版本匹配）。因此，如果这是您真正想要做的，您应该接受 jachguate 的回答。

如果您确实想从文本文件而不是可执行文件中读取版本，则有两种可能性：

第一个：如果您可以修改文件的内部格式，那么您可以通过使其看起来像一个 INI 文件来大大简化事情：

```
[Version]
Ver=0.0.11 
```

鉴于此，您可以使用 ISPP 的`ReadIni`函数来检索版本：

```
#define AppVer ReadIni("ver.ini", "Version", "Ver", "unknown") 
```

如果您无法更改文件格式，则第二种选择是使用`FileOpen`、`FileRead`和`FileClose`ISPP 函数，例如：

```
#define VerFile FileOpen("ver.txt")
#define AppVer FileRead(VerFile)
#expr FileClose(VerFile)
#undef VerFile 
```

不过，我再说一遍：最好从可执行文件本身获取应用程序版本。一方面，这有助于确保一切都匹配。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T21:59:15.770

您可以使用 Inno Setup Pre Proccessor (ISPP)`GetFileVersion`功能直接从可执行文件中获取版本，如下所示：

```
[Setup]
#define AppVersion GetFileVersion("MyFile.exe")
#define AppName "My App name"

AppName={#AppName}
AppVerName={#AppName} {#AppVersion}
VersionInfoVersion={#AppVersion}

; etc 
```

如果您正在使用定义，那么您已经在使用 ISPP。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-25T21:29:44.883

如果您想在安装程序的运行时执行此操作（@jachguate 的答案涵盖了另一种可能性，并且可能是您正在寻找的那个 - 我会留下它以防它在某些时候对其他人有所帮助），您可以使用它的 Pascal 脚本来做到这一点。像这样的东西应该工作：

```
[Setup]
AppVer={code:MyVersion}

[Files]
// Other files
Source: "YourVersionFile.txt"; DestDir: "{app}"

[Code]
function MyVersion(Param: String): String;
var
  VersionValue: string;
  VersionFile: string;
begin
  // Default to some predefined value.
  Result := '0.0.0';
  VersionFile := '{app}\YourVersionFile.txt';
  if LoadStringFromFile(VersionFile, VersionValue) then
    Result := VersionValue;
end; 
```

有关更多信息，请参阅帮助文件主题“Pascal 脚本”，包括受支持的内置函数的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T22:53:47.963

来自：[http ://www.jrsoftware.org/ishelp/](http://www.jrsoftware.org/ishelp/)

支持类似 C 的 #include 指令，它将单独文件中的行拉入脚本中 #include 指令的位置。语法是：

```
#include "filename.txt" 
```

如果文件名不是完全限定的，编译器将在与包含该`#include`指令的文件相同的目录中查找它。文件名可能以 为前缀`compiler:`，在这种情况下，它会在 Compiler 目录中查找文件。

# image - 压缩图像 GUI

> ID：14530506
> 
> 赞同：0
> 
> 时间：2013-01-25T21:15:18.870
> 
> 标签：image, user-interface, compression, command-line-interface

是否有用于压缩图像的开源 GUI？

我发现的只是 CLI，所以我想构建一个简单的在线 UI 来压缩图像。

我必须为此使用什么编程语言？我希望使用 PHP，但我不知道。

# javascript - 选择框 onchange 事件只有一个

> ID：14530507
> 
> 赞同：3
> 
> 时间：2013-01-25T21:15:28.710
> 
> 标签：javascript

onchange 事件效果很好，并且可以很好地填充我的输入（文本框），但是当 onchange 事件应用于只有一个选项的下拉框时，它不起作用。即使有一个或多个项目，我如何才能触发 onchange？

```
<!DOCTYPE html>

<html>

<head>

<style type="text/css">

</style>

<script type="text/javascript">
function test(x) {

    var x = document.getElementById(x).options[document.getElementById(x).selectedIndex].text

    document.getElementById('output').value = x

}//end of function
</script>

</head>

<body>
<select id="drop1" onchange="test(this.id)">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
<br><br>
<select id="drop2" onchange="test(this.id)">
  <option value="volvo">Volvo</option>
</select> 
<br><br>
<input type="text" id="output">

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:23:32.260

您可以在每个选择框的顶部添加一个空选项，或者可以添加一个仅显示 -Select- 的选项。然后，如有必要，更改您的脚本以忽略空选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:18:51.300

如果只有一项，它永远不会改变。试试`onblur`吧。或者也许`onclick`，取决于您*实际*尝试做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T15:45:25.967

我正在回答这个问题，以防它可以在 2020 年帮助某人。我在将数据库中的数据填充到只有单个数据的表单中时遇到了同样的问题，我能够以这种方式解决。在示例中，我将使用[jquery](https://jquery.com/)进行插图。

首先，您必须使用[.empty()](https://api.jquery.com/empty/)函数清空选择元素。

```
$('#drop2').empty(); 
```

[其次，使用.append()](https://api.jquery.com/append/)在选择中添加一个空值

```
$('#drop2').append("<option value='0'>Select</option>"); 
```

之后，现在您可以继续将数据添加到选择元素中，因为它们将是两个选项，一个为空，另一个承载数据。

最后使用成功函数中的[ajax](https://api.jquery.com/jquery.ajax/)以这种方式从服务器填充您的数据

```
success:function(response){
                        $('#drop2').empty().append("<option value='0'>Select</option>");
                        response.forEach((item)=>{
                            $('#drop2').append("<option value='"+item[]+"'>"+item[1]</option>");

                        }); 
```

我使用了[箭头功能](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions) `.forEach()`

# security - 使用 ASP .NET 网站管理工具创建用户。Silverlight 业务应用程序

> ID：14530514
> 
> 赞同：0
> 
> 时间：2013-01-25T21:15:49.667
> 
> 标签：security, silverlight-5.0

我的 ASP .NET 网站管理工具缺少某些东西，我没有看到“安全问题”或“安全答案”。

根据“演练：将身份验证服务与 Silverlight 业务应用程序一起使用”（[http://msdn.microsoft.com/en-us/library/ee942449(v=vs.91).aspx](http://msdn.microsoft.com/en-us/library/ee942449(v=vs.91).aspx)），这是我在创建时应该看到的一个新用户：

[![图片](../Images/04c986db11cc4e73aa01a3722d11c26b.png)](https://i.stack.imgur.com/ZOH8m.jpg)

但这是我看到的：

[![图 2](../Images/2368e19f2763e9201298e66fd63ecf97.png)](https://i.stack.imgur.com/BbxKM.jpg)

缺少“安全问题”和“安全答案”。我可能没有安装什么？，我正在使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:09:07.773

对于那些感兴趣的人，您必须进行自定义会员提供者设置，例如：

```
 <membership
        defaultProvider="SqlProvider"
        userIsOnlineTimeWindow="20">
        <providers>
            <clear/>
            <add name="SqlProvider"
                 type="System.Web.Security.SqlMembershipProvider"
                 connectionStringName="LocalSqlServer"
                 enablePasswordReset="true"
                 requiresQuestionAndAnswer="true"
                 requiresUniqueEmail="false"
                 maxInvalidPasswordAttempts="5"
                 passwordAttemptWindow="10"
                 passwordFormat="Hashed"
                 minRequiredPasswordLength="7"
                 enablePasswordRetrieval="false"
                 applicationName="/" />
        </providers>
    </membership> 
```

在 web.config 文件中。注意 requiresQuestionAndAnswer="true" 设置。

# tastypie - Tastypie 网址和过滤器

> ID：14530516
> 
> 赞同：0
> 
> 时间：2013-01-25T21:15:49.757
> 
> 标签：tastypie

我想使用带有一些稍微不同的网址的美味派。我希望他们是这样的：

/api/v1/city/London/make_default /api/v1/city/Paris/make_default /api/v1/city/Singapore/remove_city

城市本身可以是我数据库中城市表中的任何城市，资源名称是我要执行的方法。每种方法都有自己的资源。在美味派中，网址似乎给我带来了一些麻烦。我一直给我一个 301 重定向的 prepend_urls。

```
class CityResource(Resource):
    class Meta

     def make_default(self, request, city_name):
        return super(ViewTemplateResource, self).get_object_list(request)\
                        .filter(name=city_name, client=request.user).update(default=True)

    def prepend_urls(self):
        return [
            url(r"^city/(?P<city_id>[\w\d_.-]+)/(?P<resource_name>%s)/$" % self._meta.resource_name,
                                   self.wrap_view('make_default')),
                ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:45:19.230

所以为了解决这个问题，我做了一些不同的事情：

首先，包裹视图避免了美味派的正常路径，而不是添加到它：

```
def dispatch_default(self, request, city_name, **kwargs):
    self.queryset = City.objects.filter(name=city_name, client=user)
    return self.dispatch('detail', request, **kwargs)  # could use super here too instead of copying the normal code

def prepend_urls(self):
        return [
            url(r"^city/(.+)/(?P<resource_name>%s)$" % self._meta.resource_name,
                                   self.wrap_view('dispatch_detail')),
                ] 
```

# php - 自动循环 API Json 响应

> ID：14530518
> 
> 赞同：0
> 
> 时间：2013-01-25T21:15:59.027
> 
> 标签：php, mysql, json, api

我正在尝试插入来自 JSON API 结果的所有结果，他们限制了每页最多 200 个结果，尽管它们提供了要访问的下一个 url 以获取下一个 200 个结果，这是一个结果示例API 提供。

```
{
  "count": 200,
  "total": 31108,
  "nextUrl": "https://**/api/v1/***/orders?secure_auth_key=****&offset=200",
  "orders": [
    {
      "number": 40026,
      "paymentStatus": "ACCEPTED",
      etc....
    }
   ],
 } 
```

这是我当前获取这 200 个结果并将它们存储在 mySQL 中的代码

```
$url = "https://****/api/v1/***/orders?secure_auth_key=*****";
$json = file_get_contents($url, 0, null, null);
$result = json_decode($json, true)
foreach($result['orders'] as $order) {
   mysql_query("INSERT INTO blah blah");
} 
```

我如何创建它，以便它自动从下一页获取数据，例如：offset=200 并将所有数据添加到数据库中，就像我在第一个结果中所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:36:51.753

假设如果没有更多结果，他们不会提供下一个 200 的 URL，为什么不将其用作检查。

例如。保存简单后是否检查最后一个结果是否有nexturl？

```
if(isset($result['nextUrl'])){
$url = $result['nextUrl'];
$json = file_get_contents($url, 0, null, null);
$result = json_decode($json, true)
foreach($result['orders'] as $order) {
   mysql_query("INSERT INTO blah blah");

}
} 
```

理想情况下，将其移动到一个您可以在需要的地方不断调用的函数中......

# c# - 如何在解决方案C#中获取另一个项目的绝对路径

> ID：14530519
> 
> 赞同：8
> 
> 时间：2013-01-25T21:15:59.700
> 
> 标签：c#, .net, file, asp.net-mvc-4, path

我有一个包含两个项目的解决方案。一个项目只做所有的数据工作，另一个是启动项目，做所有的网络工作。

![解决方案](../Images/32bbbf49baf3b8007fcaf50ddab7e7be.png)

现在我想通过首先获取项目根目录从 TaskManagerHelpers 类中获取 TasksDataBase.xml。但我得到的只是 TaskManager.Web 根目录。（我从 TaskManager.Web 中的控制器调用 TaskManagerHelpers.cs 中的方法）

当我在同一个项目的一个类中时，如何获取 TaskManager.Data 根目录？

我已经尝试过这些方法和类似的方法。

*   HttpContext.Current.Request.PhysicalApplicationPath；
*   System.IO.Path.GetFullPath();
*   AppDomain.CurrentDomain.BaseDirectory;

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T21:19:42.070

一种可能性是使用[`embed the XML file into the assembly`](http://support.microsoft.com/kb/319292)类库，然后将其作为 Web 应用程序中的资源读取。请记住，当您将 Web 应用程序发布到 Web 服务器时，包中的所有内容都将是该 Web 应用程序的文件。与此 Web 应用程序所属的 Visual Studio 解决方案中可能存在的某些项目没有物理关系。

您可以查看[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)允许您从引用的程序集中读取嵌入式 XML 的方法。

这是一个例子：

```
// you could use any type from the assembly here
var assembly = typeof(TaskManagerHelper).Assembly;
using (var stream = assembly.GetManifestResourceStream("TaskManager.Data.DataBase.TasksDataBase.xml"))
using (var xmlReader = XmlReader.Create(stream))
{
    // ... do something with the XML here
} 
```

请记住，由于文件嵌入到程序集中，您将无法修改它。它是只读的。如果您需要修改它，那么另一种方法是将这个文件复制到您的 Web 应用程序中。例如一个好地方是`App_Data`特殊文件夹。您甚至可以设置一个后编译步骤，将 XML 文件复制到此位置。

然后你可以很容易地引用它：

```
string xmlFile = HostingEnvironment.MapPath("~/App_Data/TasksDataBase.xml");
using (var xmlReader = XmlReader.Create(xmlFile))
{
    // ... do something with the XML here
} 
```

在这种情况下，由于 XML 文件现在物理上是 Web 应用程序的一部分并且位于硬盘驱动器上，因此您也可以对其进行修改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T21:30:06.947

仅仅因为这两个项目在开发过程中位于同一个文件夹树中，就没有说明它们在运行时的位置。这完全有可能在不同的机器上。

“不，”你说。它们肯定会在同一个 c:\inetpub 树中的同一台机器上。这可能是真的，但这是您的*政策*，而不是要求。

如果您要制定关于它们所在位置的硬性*政策*，那么您可以将其硬编码到您的代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:25:20.807

右键单击 XML 文件并选择属性，然后将 Copy to Output Director 更改为“Do Not Copy”以外的其他设置之一。这会将文件与其他项目输出一起放入您的 \bin\ 文件夹中。然后，您可以将其`AppDomain.CurrentDomain.BaseDirectory`用作基本路径

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T21:26:48.170

如果您正在运行一个 Web 项目，所有引用的 dll 文件都将复制到 bin 目录（除非它们在 GAC 中）并从那里使用，无论您是否添加对另一个项目的引用，Visual Studio 首先编译它然后将其复制到 web 项目的 bin 文件夹。您可以将您的 xml 文件标记为内容（编译操作）并使用始终复制选项，因此它始终将其复制到 bin 目录....问题是它有时会在 bin 文件夹之外查找这些文件，但我认为你可以处理这个。

# jquery - 如何获取 jQuery 更改的 HTML 片段的句柄？

> ID：14530521
> 
> 赞同：0
> 
> 时间：2013-01-25T21:16:41.847
> 
> 标签：jquery, ajax

我正在使用 ajax 来获取这样的 HTML 片段：

```
<表 id='x'>
   <tr>
      <td>
          <a href='http://www.google.com>点我</a>
      </td>
   </tr>
</table>
```

在显示 HTML 之前，我想将目标属性添加到锚标记。

```
 xhr = $.ajax({
            dataType: 'html',
            type: 'get',
            url: ajaxUrl,
            data: {},
            success: function (data, textStatus) {
                //The next line is the important bit
                $(data).filter('#x').attr({target:'_blank'});
                myDiv
                    .html(data)
                    .fadeIn('slow');                                             
            },
            error: function (x, txt, e) {
                //handle error                    
            }
        }); 
```

这不起作用。获取被操纵对象的句柄并使用它来设置 div 的 html 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:22:44.873

```
 var html = $(data);
  html.find('#x').attr('target', '_blank');

  myDiv.html(html); // ... 
```

# python - CapWords 约定：get_MyClass 或 get_my_class

> ID：14530524
> 
> 赞同：6
> 
> 时间：2013-01-25T21:16:49.670
> 
> 标签：python, coding-style

这是一个样式约定问题。

类定义的 PEP8 约定类似于

```
class MyClass(object):
    def __init__(self, attri):
        self.attri = attri 
```

所以说我想写一个模块范围的函数，它接受一些数据，处理它，然后创建一个 MyClass 的实例。

PEP8 说我的函数定义应该有 lowercase_underscore 样式名称，比如

```
def get_my_class(arg1, arg2, arg3):
    pass 
```

但我的倾向是明确表示我在谈论 MyClass 实例

```
def get_MyClass(arg1, arg2, arg3):
    pass 
```

对于这种情况，my_class 和 MyClass 之间的关联看起来很明显，但在某些情况下并不那么明显。例如，我从电子表格中提取数据并有一个 SpreadsheetColumn 类，该类采用标题属性和数据列表属性的形式。但是，如果您不知道我说的是 SpreadsheetColumn 类的一个实例，您可能会认为我说的是原始单元格列，因为它们可能出现在 Excel 工作表中。

我想知道违反 PEP8 使用`get_MyClass`. 作为 Python 新手，我不想养成不良命名约定的习惯。

我搜索了 PEP8 和 Stack Overflow 并没有看到任何解决该问题的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T21:19:31.807

根据函数的使用情况，将其变为 a[`classmethod`](http://docs.python.org/2/library/functions.html#classmethod)或可能更合适`staticmethod`。那么它与 的关联`class`是很清楚的，但你不违反任何命名约定。

例如：

```
class MyClass(object):
     def __init__(self,arg):
         self.arg = arg

     @classmethod
     def from_sum(cls,*args):
         return cls(sum(args))

inst = MyClass.from_sum(1,2,3,4)
print inst.arg  #10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T00:35:25.133

让我们退后一步。*通常，您根本*不想这样做，因此命名约定是您最不必担心的。

首先，通常情况下，您并不关心实际的类或类型是什么。这就是鸭子打字的意义所在。你不想要一个`SpreadsheetColumn`实例，你想要一些可以用作电子表格列的东西。它可能是 的实例，也可能是子类的实例，也可能是`SpreadsheetColumn`某个代理类的实例，或者是用于测试的某个模拟类的实例——不管它是什么，你都不在乎，只要它看起来和工作起来像一列。

请注意，即使在 Java 和 C# 等静态语言中，工厂函数（或对象）通常也不会创建特定*类*的实例，它们会创建*实现特定接口的任何类*的实例。在 Python 中，这通常是隐含的。（而且，如果不是，通常是因为您使用的是 PEAK 或 Twisted 之类的东西，您应该遵循它们的协议或接口编码风格。）

所以，你的工厂函数应该被调用`get_column`，而不是`get_SpreadsheetColumn`.

当函数更像是“替代构造函数”而不是工厂时，那么 mgilson 的答案就是要走的路。See `chain()`and `chain.from_iterable()`in `itertools`from 一个好的标准库示例。

但请注意，这在标准库、PyPI 上的大多数流行模块等中并不常见。这是有充分理由的。通常，您可以只使用带有默认值参数、关键字参数或最坏情况的单个构造函数`*args`和`**kwargs`. 如果这使得 API 对人类读者来说太混乱，或者对代码来说太模糊，那么你就需要一个替代的构造函数。否则，你不会。

有时，您确实*需要*一个创建具体类型对象的工厂，并且该具体类型是调用者需要了解的接口的一部分。正如我上面提到的，这在静态语言中也很少见，在 Python 中甚至更罕见，但它确实出现了。然后，您确实需要原始问题的答案。

在这种情况下，我想我*会把*这个函数命名为丑陋和不寻常的东西，比如`get_MyClass`or `get_MyClass_instance`。它应该立即突出，因为任何阅读我的代码的人都可能需要弄清楚为什么我明确地得到 a`MyClass`而不是 a`thing`以便理解我的其余代码。

# django - Django 找不到记录器“城市”的处理程序

> ID：14530526
> 
> 赞同：6
> 
> 时间：2013-01-25T21:17:01.720
> 
> 标签：django

我正在尝试使用以下命令设置 Django-Cities [https://github.com/coderholic/django-cities ：](https://github.com/coderholic/django-cities)

```
sudo python manage.py cities --force --import=all 
```

大约 10 分钟后，终端打印：

```
No handlers could be found for logger "cities" 
```

然后什么也没有发生，我等了几个小时。我检查了数据库，没有数据被添加到由syncdb生成的数据库中。

我的一些设置.... 设置

```
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
TIME_ZONE = 'Europe/London'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-GB'

# List of plugins to process data during import 
```

CITIES_PLUGINS = [ 'cities.plugin.postal_code_ca.Plugin', # 加拿大邮政编码需要重新映射区域代码以匹配地理名称]

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',
    'django.contrib.flatpages',
    'django.contrib.admin',
    'django.contrib.gis',
    'accounts',
    'userena',
    'guardian',
    'easy_thumbnails',
    'events',
    'cities',

    )

# Django-guardian settings

ANONYMOUS_USER_ID = -1
AUTH_PROFILE_MODULE = 'accounts.Profile'

# GEOS Library
GEOS_LIBRARY_PATH='/opt/local/lib/libgeos_c.dylib'
CITIES_POSTAL_CODES = ['GB']

    LOGGING = {
        'version': 1,
        'disable_existing_loggers': False,
        'filters': {
            'require_debug_false': {
                '()': 'django.utils.log.RequireDebugFalse'
            }
        },
        'handlers': {
            'mail_admins': {
                'level': 'ERROR',
                'filters': ['require_debug_false'],
                'class': 'django.utils.log.AdminEmailHandler'
            }
        },
        'loggers': {
            'django.request': {
                'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True,
                },
            }
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T22:18:49.940

这应该输出到屏幕。

```
 LOGGING = {
        'version': 1,
        'disable_existing_loggers': False,
        'filters': {
            'require_debug_false': {
                '()': 'django.utils.log.RequireDebugFalse'
            }
        },
        'handlers': {
            'mail_admins': {
                'level': 'ERROR',
                'filters': ['require_debug_false'],
                'class': 'django.utils.log.AdminEmailHandler'
            },
            'console':{
                'level': 'DEBUG',
                'class': 'logging.StreamHandler'
            },
        },
        'loggers': {
            'django.request': {
                'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True,
                },
            'cities': {
                'handlers': ['console'],
                'level': 'INFO'
            },

            }
    } 
```

# java - Spring MVC - 从 JSP 提交对象

> ID：14530529
> 
> 赞同：2
> 
> 时间：2013-01-25T21:17:04.067
> 
> 标签：java, spring, spring-mvc

我有一个提供客户列表的 JSP（ArrayList searchResults）。我希望能够选择其中之一，并将其​​提交给 Spring MVC 控制器。但是，似乎我无法传递所选对象，只能传递它的一个属性，例如 customerId。我真的需要传递整个对象。

在 Spring 3.x 中有没有标准的方法来做到这一点？

```
<c:forEach items="${searchResults}" var="searchResult">
    <tr>
        <td><c:out value="${searchResult.customerId}" /></td>
        <td><c:out value="${searchResult.firstName}" /></td>
        <td><c:out value="${searchResult.lastName}" /></td>
        <td>
            <form method="POST" ACTION="./customercare">
                <input type="SUBMIT" value="Select This Customer"/>
                <input type="hidden" name ="searchResult" value="${searchResult}"/>
            </form>
        </td>
    </tr>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:21:39.163

您可以使用[Spring 的`form`taglib](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html#view-jsp-formtaglib)而不是 plain`<form>`来回发到 Spring MVC 控制器，然后它将值绑定回您指定的模型。

```
<form:form method="post" action="addContact.html">

<table>
<tr>
    <td><form:label path="firstname">First Name</form:label></td>
    <td><form:input path="firstname" /></td> 
</tr> 
```

...

```
@RequestMapping(value = "/addContact", method = RequestMethod.POST)
public String addContact(@ModelAttribute("contact")
                        Contact contact, BindingResult result) { 
```

看到这篇文章：http: [//viralpatel.net/blogs/spring-3-mvc-handling-forms/](http://viralpatel.net/blogs/spring-3-mvc-handling-forms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:42:02.967

您可能需要考虑为每个标签和嵌套标签提供**id**以区分要发布的行

```
<c:forEach items="${searchResults}" var="searchResult">
    <tr> 
....
            <form:form id="${searchResults.key}-form" method="POST" ACTION="./customercare">
                <form:input id="${searchResults.key}-btn" type="SUBMIT" value="Select This Customer"/>
                <form:input id="${searchResults.key}-hidden" type="hidden" name ="${searchResults.key}" value="searchResult['${searchResults.key}']"/>
            </form:form>

    </tr> 
```

在后端，您必须按照@PatBurke 的建议编写控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:33:23.017

每个客户可以有 1 个表单，其中包含很多隐藏的输入。选择该客户后，您可以发布该表单。然后 Spring 可以将所有隐藏的输入绑定到您的客户对象。

（通常，我只会发送 id 并将客户信息作为实体从数据库加载。但是，我认为您必须有充分的理由不想这样做）

# apache-camel - 使用spring-ws客户端的骆驼路由偶尔会抛出javax.xml.transform.stax.StAXSource异常

> ID：14530533
> 
> 赞同：4
> 
> 时间：2013-01-25T21:17:13.463
> 
> 标签：apache-camel, spring-ws

我有一个骆驼'seda'路线，大致包含代码：

```
JaxbDataFormat jaxb = new JaxbDataFormat(false);
jaxb.setContextPath("com.example.data.api");

from("seda:validate")
   .marshal(jaxb)
   .to("spring-ws:" + getDataServiceURL())
   .unmarshal(jaxb) 
```

我从 com.example.data.api 发送一个对象，JaxbDataFormat 格式化程序将其设置为 SOAP 请求，并将它传递给 wo spring-ws 以实际发送到我的服务。大多数时候，这就像一个魅力。

我说“大多数”是因为 spring-ws 时不时地抛出一个异常，如下所示：

```
org.springframework.ws.client.WebServiceTransformerException: Transformation error: Can't transform a Source of type javax.xml.transform.stax.StAXSource; nested exception is javax.xml.transform.TransformerException: Can't transform a Source of type javax.xml.transform.stax.StAXSource
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:608)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:492)
    at org.springframework.ws.client.core.WebServiceTemplate.sendSourceAndReceive(WebServiceTemplate.java:479)
    at org.springframework.ws.client.core.WebServiceTemplate.sendSourceAndReceive(WebServiceTemplate.java:470)
    at org.apache.camel.component.spring.ws.SpringWebserviceProducer.process(SpringWebserviceProducer.java:81)
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73) 
```

其核心是此错误消息：“无法转换 javax.xml.transform.stax.StAXSource 类型的源”。

这些都没有意义。Jaxb 编组已经确保所讨论的对象是一个 XML 字符串（根据我所做的任何调试日志记录）。此外，这个确切的代码大部分时间都可以工作，只是偶尔会失败。它看起来是随机的。

例如，几分钟前我运行了一个测试，我在我的路由中发送了一条消息并收到了这个错误。然后我重新启动我的服务并重新发送*完全相同的*消息......它就像一个魅力。相同的代码；相同的环境；同样的测试——两​​个不同的结果。

正是这种随机性让这一切变得如此令人抓狂。我应该寻找什么以确保这*永远不会*发生的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T10:34:32.937

问题不在于 Camel，而在于 Spring-WS。修改 WS 模板配置中的 transformerFactoryClass 将起作用

```
<bean id="baseCamelMarshallerWSTemplate" class="org.springframework.ws.client.core.WebServiceTemplate" scope="prototype">
        <constructor-arg ref="messageFactory" />
        <property name="messageSender">
            <ref bean="httpSender"/>
        </property>
        <property name="checkConnectionForError" value="true"/>
        **<property name="transformerFactoryClass" value="com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl"/>**
    </bean> 
```

如果您仍然遇到问题，请分享 spring WS 配置和测试用例

# java - Android java.lang.IllegalStateException：无法执行活动的方法

> ID：14530535
> 
> 赞同：21
> 
> 时间：2013-01-25T21:17:19.060
> 
> 标签：java, android

您好，我是学习 android 的新手，我正在尝试在学习 Android 的同时制作一个半有用的应用程序（对我自己），我基本上是在获取有用的 Java 代码（ping X，端口扫描）并添加他们到我的应用程序，我无法弄清楚*为什么*会发生这个错误，我相信这与代码的第 77 行有关，但我想了解它为什么不起作用，以便下次我可以更好地帮助自己。抱歉这个冗长的问题，我不知道什么时候该闭嘴。

```
01-25 20:42:42.139: E/AndroidRuntime(1307): FATAL EXCEPTION: main
01-25 20:42:42.139: E/AndroidRuntime(1307): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.view.View$1.onClick(View.java:3597)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.view.View.performClick(View.java:4202)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.os.Looper.loop(Looper.java:137)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:42:42.139: E/AndroidRuntime(1307): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:42:42.139: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:42:42.139: E/AndroidRuntime(1307):     at android.view.View$1.onClick(View.java:3592)
01-25 20:42:42.139: E/AndroidRuntime(1307):     ... 11 more
01-25 20:42:42.139: E/AndroidRuntime(1307): Caused by: java.lang.NullPointerException
01-25 20:42:42.139: E/AndroidRuntime(1307):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:77)
01-25 20:42:42.139: E/AndroidRuntime(1307):     ... 14 more
01-25 20:44:42.549: E/MPL-storeload(511): calData from inv_save_mpl_states, size=2
01-25 20:45:39.759: E/InputDispatcher(511): channel '41b55368 com.seven.up/com.seven.up.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 20:45:50.279: E/AndroidRuntime(1625): FATAL EXCEPTION: main
01-25 20:45:50.279: E/AndroidRuntime(1625): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.view.View$1.onClick(View.java:3597)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.view.View.performClick(View.java:4202)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.os.Looper.loop(Looper.java:137)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:45:50.279: E/AndroidRuntime(1625): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:45:50.279: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:45:50.279: E/AndroidRuntime(1625):     at android.view.View$1.onClick(View.java:3592)
01-25 20:45:50.279: E/AndroidRuntime(1625):     ... 11 more
01-25 20:45:50.279: E/AndroidRuntime(1625): Caused by: java.lang.NullPointerException
01-25 20:45:50.279: E/AndroidRuntime(1625):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:78)
01-25 20:45:50.279: E/AndroidRuntime(1625):     ... 14 more
01-25 20:46:32.409: E/InputDispatcher(511): channel '416e8e78 com.seven.up/com.seven.up.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 20:46:35.449: E/AndroidRuntime(1830): FATAL EXCEPTION: main
01-25 20:46:35.449: E/AndroidRuntime(1830): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.view.View$1.onClick(View.java:3597)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.view.View.performClick(View.java:4202)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.os.Looper.loop(Looper.java:137)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:46:35.449: E/AndroidRuntime(1830): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:46:35.449: E/AndroidRuntime(1830):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:46:35.449: E/AndroidRuntime(1830):     at android.view.View$1.onClick(View.java:3592)
01-25 20:46:35.449: E/AndroidRuntime(1830):     ... 11 more
01-25 20:46:35.449: E/AndroidRuntime(1830): Caused by: java.lang.NullPointerException
01-25 20:46:35.449: E/AndroidRuntime(1830):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:77)
01-25 20:46:35.449: E/AndroidRuntime(1830):     ... 14 more
01-25 20:47:40.119: E/AndroidRuntime(2009): FATAL EXCEPTION: main
01-25 20:47:40.119: E/AndroidRuntime(2009): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.view.View$1.onClick(View.java:3597)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.view.View.performClick(View.java:4202)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.os.Looper.loop(Looper.java:137)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:47:40.119: E/AndroidRuntime(2009): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:47:40.119: E/AndroidRuntime(2009):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:47:40.119: E/AndroidRuntime(2009):     at android.view.View$1.onClick(View.java:3592)
01-25 20:47:40.119: E/AndroidRuntime(2009):     ... 11 more
01-25 20:47:40.119: E/AndroidRuntime(2009): Caused by: java.lang.NullPointerException
01-25 20:47:40.119: E/AndroidRuntime(2009):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:77)
01-25 20:47:40.119: E/AndroidRuntime(2009):     ... 14 more
01-25 20:49:29.979: E/InputDispatcher(511): channel '414e7770 com.seven.up/com.seven.up.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 20:49:30.149: E/jdwp(2216): Failed sending reply to debugger: Broken pipe
01-25 20:49:41.599: E/MPL-storeload(511): calData from inv_save_mpl_states, size=2
01-25 20:50:12.539: E/InputDispatcher(511): channel '41c0a160 com.seven.up/com.seven.up.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 20:50:13.629: E/InputManager-JNI(511): An exception was thrown by callback 'interceptKeyBeforeQueueing'.
01-25 20:50:13.629: E/InputManager-JNI(511): java.lang.NullPointerException
01-25 20:50:13.629: E/InputManager-JNI(511):    at com.android.internal.policy.impl.PhoneWindowManager.interceptKeyBeforeQueueing(PhoneWindowManager.java:3948)
01-25 20:50:13.629: E/InputManager-JNI(511):    at com.android.server.wm.InputMonitor.interceptKeyBeforeQueueing(InputMonitor.java:337)
01-25 20:50:13.629: E/InputManager-JNI(511):    at com.android.server.input.InputManagerService.interceptKeyBeforeQueueing(InputManagerService.java:1346)
01-25 20:50:13.629: E/InputManager-JNI(511):    at dalvik.system.NativeStart.run(Native Method)
01-25 20:50:13.899: E/InputManager-JNI(511): An exception was thrown by callback 'interceptKeyBeforeQueueing'.
01-25 20:50:13.899: E/InputManager-JNI(511): java.lang.NullPointerException
01-25 20:50:13.899: E/InputManager-JNI(511):    at com.android.internal.policy.impl.PhoneWindowManager.interceptKeyBeforeQueueing(PhoneWindowManager.java:3948)
01-25 20:50:13.899: E/InputManager-JNI(511):    at com.android.server.wm.InputMonitor.interceptKeyBeforeQueueing(InputMonitor.java:337)
01-25 20:50:13.899: E/InputManager-JNI(511):    at com.android.server.input.InputManagerService.interceptKeyBeforeQueueing(InputManagerService.java:1346)
01-25 20:50:13.899: E/InputManager-JNI(511):    at dalvik.system.NativeStart.run(Native Method)
01-25 20:50:19.759: E/InputDispatcher(511): channel '41419b38 com.seven.up/com.seven.up.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
01-25 20:51:49.459: E/WeatherXmlParser(2522): Couldn't parse Yahoo weather XML
01-25 20:51:49.459: E/WeatherXmlParser(2522): java.lang.NumberFormatException: Invalid float: ""
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.lang.StringToReal.invalidReal(StringToReal.java:63)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.lang.StringToReal.parseFloat(StringToReal.java:289)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.lang.Float.parseFloat(Float.java:300)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at com.cyanogenmod.lockclock.weather.WeatherXmlParser.getFloatForAttribute(WeatherXmlParser.java:86)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at com.cyanogenmod.lockclock.weather.WeatherXmlParser.parseWeatherResponse(WeatherXmlParser.java:108)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at com.cyanogenmod.lockclock.weather.WeatherUpdateService$WeatherUpdateTask.doInBackground(WeatherUpdateService.java:210)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at com.cyanogenmod.lockclock.weather.WeatherUpdateService$WeatherUpdateTask.doInBackground(WeatherUpdateService.java:126)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-25 20:51:49.459: E/WeatherXmlParser(2522):   at java.lang.Thread.run(Thread.java:856)
01-25 20:52:24.619: E/MPL-storeload(511): calData from inv_save_mpl_states, size=2
01-25 20:57:07.229: E/AndroidRuntime(2410): FATAL EXCEPTION: main
01-25 20:57:07.229: E/AndroidRuntime(2410): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.view.View$1.onClick(View.java:3597)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.view.View.performClick(View.java:4202)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.os.Looper.loop(Looper.java:137)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:57:07.229: E/AndroidRuntime(2410): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:57:07.229: E/AndroidRuntime(2410):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:57:07.229: E/AndroidRuntime(2410):     at android.view.View$1.onClick(View.java:3592)
01-25 20:57:07.229: E/AndroidRuntime(2410):     ... 11 more
01-25 20:57:07.229: E/AndroidRuntime(2410): Caused by: java.lang.NullPointerException
01-25 20:57:07.229: E/AndroidRuntime(2410):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:77)
01-25 20:57:07.229: E/AndroidRuntime(2410):     ... 14 more
01-25 20:59:12.549: E/AndroidRuntime(3168): FATAL EXCEPTION: main
01-25 20:59:12.549: E/AndroidRuntime(3168): java.lang.IllegalStateException: Could not execute method of the activity
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.view.View$1.onClick(View.java:3597)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.view.View.performClick(View.java:4202)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.view.View$PerformClick.run(View.java:17340)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.os.Handler.handleCallback(Handler.java:725)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.os.Looper.loop(Looper.java:137)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.app.ActivityThread.main(ActivityThread.java:5191)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at dalvik.system.NativeStart.main(Native Method)
01-25 20:59:12.549: E/AndroidRuntime(3168): Caused by: java.lang.reflect.InvocationTargetException
01-25 20:59:12.549: E/AndroidRuntime(3168):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 20:59:12.549: E/AndroidRuntime(3168):     at android.view.View$1.onClick(View.java:3592)
01-25 20:59:12.549: E/AndroidRuntime(3168):     ... 11 more
01-25 20:59:12.549: E/AndroidRuntime(3168): Caused by: java.lang.NullPointerException
01-25 20:59:12.549: E/AndroidRuntime(3168):     at com.seven.up.MainActivity.OnClickPort(MainActivity.java:76)
01-25 20:59:12.549: E/AndroidRuntime(3168):     ... 14 more
01-25 21:01:13.939: E/MPL-storeload(511): calData from inv_save_mpl_states, size=2 
```

```
package com.seven.up;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.*;

import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {
    EditText ip_address_field;
    TextView scan_out;
    TextView port_results;
    EditText startPort;
    EditText stopPort;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ip_address_field = (EditText) findViewById(R.id.ip_address_field);
        ip_address_field.getText();
        scan_out = (TextView) findViewById(R.id.scan_out);

        Button scan_button = (Button) findViewById(R.id.scan_button);
        scan_button.setOnClickListener(this);
    }

    public void onClick(View v) {
        Editable host = ip_address_field.getText();

        switch (v.getId()) {

        case R.id.scan_button:
            try {
                String pingCmd = "ping -c 5 " + host;
                String pingResult = "";
                Runtime r = Runtime.getRuntime();
                Process p = r.exec(pingCmd);
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        p.getInputStream()));
                String inputLine;
                while ((inputLine = in.readLine()) != null) {
                    System.out.println(inputLine);
                    scan_out.setText(inputLine + "\n" + "\n");
                    pingResult += inputLine;
                    scan_out.setText("/n" + pingResult);
                }
                in.close();
            }// try
            catch (IOException e) {
                System.out.println(e);
            }
            break;

        default:
            break;
        }

    }

    public void OnClickPort(View v) {
        switch (v.getId()) {
        case R.id.button1:

        int startPortRange = Integer.parseInt(startPort.getText().toString());
        int stopPortRange = Integer.parseInt(stopPort.getText().toString());

        for (int i = startPortRange; i <= stopPortRange; i++) {
            try {
                Socket ServerSok = new Socket("192.168.0.1", i);

                Toast.makeText(getApplicationContext(), "Port in use: " + i, Toast.LENGTH_LONG).show();

                ServerSok.close();
            } catch (Exception e) {
            }
            System.out.println("Port not in use: " + i);
        } 
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return super.onCreateOptionsMenu(menu);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T21:21:16.037

这一行抛出一个，在异常链中`NPE`产生一个：`IllegalStateException`

```
int stopPortRange = Integer.parseInt(stopPort.getText().toString()); 
```

因为你没有在你的方法中初始化`stopPort`（或`startPort`） 。`onCreate`你应该有类似的东西：

```
stopPort = (EditText) findViewById(R.id.stop_port_field); 
```

The statement

```
EditText stopPort; 
```

simply *declares* the variable which is `null` by default. Only instances that have been instantiated can have their methods invoked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T09:42:18.900

Kind of late reply but still, @Pheonix2105, As mentioned by Reimeus,

```
EditText startPort, stopPort; 
```

just declares the variables. This does not initialize the values for these declared variables. Hence the value of these variables are currently 'null'.

```
stopPort = (EditText) findViewById (R.id.stop_port_field) 
```

initializes (or in your terms, ties the stopPort to a UI component) the value of stopPort, thereby avoiding the NullPointerException (which in turn causes the IllegalStatementException in your case).

Hope that clarifies your doubt.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T00:22:51.330

Either

*   Didn't initialise a variable or
*   Initialised a variable and overwrote it when you were declaring them

Often people duplicate the same line in anticipation to change one variable name in each line, to try and make it faster for you, but might forget one line, or miss one word change

```
EditText stopPort; 
```

That is your problem

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-25T18:53:59.917

I had the same issue:

Just initialize/declare you View fields below these lines in the onCreate Fuction:

```
 super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
```

E.g.

```
protected void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    bart = (ImageView) findViewById(R.id.bartView);
    homer = (ImageView) findViewById(R.id.homerView);
} 
```

# php - 在 PHP 中检索 JSON 数据的代码

> ID：14530536
> 
> 赞同：0
> 
> 时间：2013-01-25T21:17:23.200
> 
> 标签：php, iphone, json

我在 Objective-C 应用程序中有一个 JSON 字符串，我想将它发送到服务器上的 PHP 脚本。

我应该使用什么 PHP 代码来接收和解析这些数据？

```
- (IBAction)send:(id)sender{

NSString *jsonString = [selectedPerson.jsonDictionary JSONRepresentation];

NSLog(@"ESE ES EL JSON %@", jsonString);

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init    ];
NSString*post = [NSString stringWithFormat:@"&json=%@", jsonStri    ng];
NSData*postData = [post dataUsingEncoding:NSASCIIStringEncoding     allowLossyConversion:NO];

NSLog(@"ESTO ES DATA %@", postData);

[request setURL:[NSURL URLWithSt    ring:@"http://www.mydomine.com/recive.php"]];    
[request setHTTPMethod:@"POST"];    
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-    type"];
[request setHTTPBody:postData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:18:43.057

如果你看：

```
NSString*post = [NSString stringWithFormat:@"&json=%@", jsonString]; 
```

您将看到 JSON 将包含在名为 json 的 POST 变量中。

**接收.php**

```
$json = $_POST['json'];
$decoded = json_decode($json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T17:55:45.880

```
If your are sending your JSON in POST method , It can be received in PHP with the below code

<?php $handle = fopen('php://input','r');
                $jsonInput = fgets($handle);
                // Decoding JSON into an Array
                $decoded = json_decode($jsonInput,true);
?> 
```

# sql - 从 vb.net 中的数据表返回数据

> ID：14530537
> 
> 赞同：0
> 
> 时间：2013-01-25T21:17:27.437
> 
> 标签：sql, vb.net, datatable

DTName 是`DataTable`在下面的代码中返回行...当我通过循环从 0 迭代它到它的计数时。仅显示第一行中的数据。

如何获取结果中显示的数据表的所有行？

```
DTName = GetClientNames()

   If Not DTName Is Nothing Then

      For i = 0 to DTName.Rows.count

         strName = DTName.Rows(i).Item("Client Name").Tostring()

      Next i

   End if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:24:06.323

`For i = 0 to DTName.Rows.count``IndexOutOfRangeException`当值`i`等于时最终会抛出错误`DTName.Rows.count`，限制应该是`DTName.Rows.count - 1`。

要从所有数据行中获取所有值，请将它们存储在`List`：

```
 Dim strName As New List(Of String)

    For i = 0 to DTName.Rows.count - 1

       strName.Add(DTName.Rows(i)("Client Name").Tostring())

    Next i 
```

或者，您可以`Foreach`像这样使用：

```
 For Each DR As DataRow In DTName.Rows

       strName.Add(DR("Client Name").Tostring())

    Next 
```

我还建议您删除多余的检查，如果`DTName.Rows.Count > 0`

**编辑：**您可以声明`strName`为`string`并将行值附加到它：

```
 For i = 0 to DTName.Rows.count - 1

        strName &= (DTName.Rows(i)("Client Name").Tostring() & ",")

    Next i

    Response.Write(strName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:03:10.867

加倍检查`ColumnName`列的实际值。

```
For Each item As DataRow In dataTable.Rows
    strName = item("Client Name").ToString()
    Console.WriteLine(strName)
Next 
```

# iphone - 在 iOS 应用程序中为 Tesseract 使用 tesseract-ocr-3.02.equ.tar

> ID：14530539
> 
> 赞同：0
> 
> 时间：2013-01-25T21:17:34.713
> 
> 标签：iphone, ios, xcode, ocr, tesseract

我最近下载了“tesseract-ocr-3.02.equ.tar”，它在打开时包含一个 .traineddata 文件，可以与 Tesseract OCR 引擎一起使用。我想知道如何将此文件用于 iOS 应用程序（即 - 在 xCode 中） - 类似于示例项目，例如“PocketOCR”，其中有多个文件存储在“tessdata”文件夹中。

任何帮助将不胜感激？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:41:51.387

放入文件夹并调用 Tesseract `equ.traineddata`，`tessdata`语言参数设置为“equ”。

# node.js - 如何避免 node.js + mongoose 应用程序中的胖模型？

> ID：14530541
> 
> 赞同：8
> 
> 时间：2013-01-25T21:17:59.483
> 
> 标签：node.js, model-view-controller, design-patterns, mongoose

该应用程序正在使用 express 3。这是从数据库获取数据的路由的准系统示例：

```
var Post = mongoose.model('Post')

app.get('post/:id/loompas', function(req, res) {
    Post.getLoompas(function(err, data){
        res.render('x', data)
    })
}) 
```

其中在`Posts.getSomeData`中定义为[实例方法](http://mongoosejs.com/docs/guide.html#methods)，`/models/post.js`有时会访问外部 API：

```
PostSchema.method('getLoompas', function(callback){
    var post = this
    API.get('y', function(x){
        this.save(x)
        callback(x)
    })
}) 
```

这开始有味道了，看起来它不属于 Schema 定义。方法的集合可能会变得非常大。

建议使用哪些设计模式来分离这些问题并避免过于肥胖的模型？用于外部 API 调用的服务层？有什么有趣的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:00:13.197

这确实有点味道。我会使用仅将您的 Web 应用程序视为您的应用程序视图的方法。

确保这一点的最佳方法是*永远不要*使用 webapp 中的 mongoose 模型。您可以让您的 web 应用程序存在于一个进程中，而您的模型特定逻辑则存在于另一个进程中。第二个过程的工作是处理您的业务逻辑和持久层（mongoDB），使其成为MVC 中的**M。**

访问外部 API 将在该模型层中进行，我们可以将其与持久性实现分开。

有一种我喜欢的节点进程之间的通信方式，它是[dnode](http://substack.net/posts/85e1bd/DNode-Asynchronous-Remote-Method-Invocation-for-Node-js-and-the-Browser)。设置完成后，您似乎正在与自己的进程中的对象和回调进行通信。我会让 webapp 和业务应用程序通过它进行通信以获取数据。webapp 不需要处理实际数据，而是将消息发送到模型层（如 MVC 模式所述）。

这确保了控制器/视图（webapp）和模型+持久性之间的完全分离。

这种组织的一个副作用是您可以轻松编写应用程序的其他客户端，例如 CLI 客户端或 RESTful API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:25:33.447

您是否尝试从 url (post/:id/:somedata) 获取 id 和 somedata ？构建模式？

理想情况下应该使用：

```
app.post('/reg', function(request, response){

console.log(request.body.name);
console.log(request.body.email);
...
} 
```

这是在“reg”HTML 表单页面上提交表单时，您可以在其中设置对象中的所有变量（名称、电子邮件）。在 app.post 中，您可以从请求本身获取架构定义，而无需扫描 url 来获取变量。

如果您仍然想知道如何从 url 中获取变量，请在 app.get 中执行此操作：

```
vars=request.url.split('/');
//vars contains all the variables you have to use.
//use vars to create schema 
```

在您获取/创建模式后，直接将其传递给函数/或遍历调用该函数的对象元素。

# ios - Apple 发送的关于缺少推送通知权利的电子邮件

> ID：14530542
> 
> 赞同：2
> 
> 时间：2013-01-25T21:18:21.933
> 
> 标签：ios, apple-push-notifications

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:19:56.523

在网站上的开发人员门户中查看您的应用程序是否设置了推送通知，但您只是不记得这样做并且没有使用它。你可以在那里禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:31:11.573

仅当您尝试注册以删除推送通知时，用户才会看到警报。那么，你在你的应用程序中调用这个（或类似的东西）吗？：

`[[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound];`

如果是，那么您的用户将看到警报。如果没有，那么他们将不会看到警报。

# ios - ios 6自动布局约束错误

> ID：14530545
> 
> 赞同：0
> 
> 时间：2013-01-25T21:18:31.947
> 
> 标签：ios, objective-c, ipad, ios6, autolayout

我的 iPad 项目出现自动布局约束错误。当我将设备旋转到横向时，我在 IB 中创建的自定义 UICollectionViewCell 会发生这种情况。问题是没有一个约束是可删除的。我仍在学习自动布局，所以我确信这可能只是添加一些限制并删除一些默认限制的问题，但我被卡住了。我的自定义单元格肯定会发生这种情况-当我删除它并使用普通的旧 UICollectionViewCell 时，我没有收到任何错误。

我四处搜索并尝试将自定义单元格上的 translatesAutoresizingMaskIntoConstraints 设置为 NO，但随后出现以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 -layoutSubviews 后仍需要自动布局。UICollectionView 的 -layoutSubviews 实现需要调用 super.'

在我的自定义单元格的子视图上将其设置为 NO 可以正常工作，但是当我在单元格本身上设置它时，它会出错。

这是我得到的自动布局约束错误 - 这是通常的错误：

> 以下列表中的至少一个约束可能是您不想要的。试试这个：（1）查看每个约束并尝试找出您不期望的；(2) 找到添加了一个或多个不需要的约束的代码并修复它。（注意：如果您看到不理解的 NSAutoresizingMaskLayoutConstraints，请参阅 UIView 属性 translatesAutoresizingMaskIntoConstraints 的文档）
> 
> (
> "NSAutoresizingMaskLayoutConstraint:0x76bf950 h=-&- v=-&- CMAGalleryCollectionViewCell:0x7687690.height == UICollectionView:0x9161e00.height - 875",
> 
> "NSAutoresizingMaskLayoutConstraint:0x76693c0 h=--& v=--& V:[UIView:0x7665470(704)]",
> 
> "NSLayoutConstraint:0x7665850 UICollectionView:0x9161e00.bottom == UIView:0x7665470.bottom",
> 
> “NSLayoutConstraint:0x7665740 V:|-(0)-[UICollectionView:0x9161e00]（名称：'|':UIView:0x7665470）”）
> 
> 将尝试通过打破约束来恢复 NSLayoutConstraint:0x7665850 UICollectionView:0x9161e00.bottom == UIView:0x7665470.bottom

非常感谢任何帮助或建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:47:37.027

我已经打了很多。当您旋转设备/应用程序时，视图的宽度/高度会更改以适应新的方向屏幕，这通常会破坏“宽度 = 320”类型的约束。

我发现上面的异常是不可读的，直到我读到这个：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html "视觉格式语言")

...这类似于显示的格式，然后很容易看出问题所在。

您看到的不可删除约束可以更改。您可以将优先级从 1000 降低到可以破坏的东西，或者您可以将它们替换为有效的东西。一种（不完美的）方法可能是制定规则 >= 320 以便横向拉伸，或者您可以添加自己的约束来提供（也许将视图绑定到它的超级视图，然后宽度约束应该是可删除的。）说，这不是一个好的解决方案。

我建议您通常尝试在可能对主视图的形状/大小做出反应的东西（例如大型集合视图）上删除宽度和高度限制，因为这些宽度/高度通常是错误的 50%的方向。

综上所述，这是说单元格高度是集合高度减去 875 吗？

CMAGalleryCollectionViewCell:0x7687690.height == UICollectionView:0x9161e00.height - 875",

这个单元格是集合视图的子视图，而不是单元格的模板吗？我也遇到了界面构建器和集合的问题。我不得不在 IB 中从头开始重建集合视图，以免添加虚假的子单元格。

# android - 如何突出显示像 Android 拼写检查器这样的文本？

> ID：14530546
> 
> 赞同：2
> 
> 时间：2013-01-25T21:18:37.150
> 
> 标签：android, android-edittext, textview

如何在 Android 文本字段中为文本添加下划线，就像此屏幕截图中的拼写检查器所做的那样：

![在此处输入图像描述](../Images/178969d8455c4de23430a8901ecb787b.png)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:21:09.973

你使用 Spanables。Spanables 是包含样式的字符序列。为此，请使用 UnderlineSpan

# android - AlertDialog，杀死活动点击“NO”

> ID：14530551
> 
> 赞同：-6
> 
> 时间：2013-01-25T21:18:53.957
> 
> 标签：android, eclipse, android-alertdialog

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:29:52.563

您需要提供一个`OnClickListener`可以`finish()`为您的活动打电话的地方。

```
.setNegativeButton(android.R.string.no, new OnClickListener() {
    @Override
        public void onClick(DialogInterface dialog, int which) {
        //replace MainActivity with your activity's name
        MainActivity.this.finish();
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:22:17.710

调用`finish()`活动。

# ios - 是否可以通过应用程序或仅通过 APN 更新存折中的通行证？

> ID：14530554
> 
> 赞同：4
> 
> 时间：2013-01-25T21:19:05.200
> 
> 标签：ios, passbook

如果我有一个创建通行证的应用程序并且用户将其添加到存折中，那么应用程序是否可以稍后更新该通行证的内容。

即，当应用程序运行时，它可以使用新的时间触发器和新内容更新通行证，然后当触发器触发时，用户会收到通知。

或者现有的通行证只能由 APN 更新而没有别的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T05:37:45.097

我不确定为什么上面的答案被接受，因为它不正确。

应用程序可以在*没有*推送通知的情况下更新通行证，前提是它具有 passTypeIdentifier 的权限并且知道通行证序列号。

通行证需要在您的应用程序外部的服务器上创建和签名，但是一旦您的应用程序收到新的 .pkpass 包，它可以使用 PKPassLibrary 类的 replacePassWithPass 方法更新通行证。

从上面链接的文件。

> 您的应用程序从您的服务器下载新通行证并使用 PKPassLibrary 类的 replacePassWithPass: 方法来安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:23:11.327

仅由 apn AFAIK - 需要重新签名，以便签名对新内容有效

请参阅：[https ://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW1](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Apps.html#//apple_ref/doc/uid/TP40012195-CH6-SW1)

编辑：正如用户 PassKit 所说，当然不需要推送通知来更新通行证，但
APN（这里：您的接入点 => 您的服务器）必须创建通行证的新数据。

# haskell - 创建单例列表的两个函数之间的区别

> ID：14530555
> 
> 赞同：10
> 
> 时间：2013-01-25T21:19:06.030
> 
> 标签：haskell, hlint

在我的程序上运行 hlint 时，它报告了一个**错误**

```
\x -> [x] 
```

并提出了另一种形式

```
(: []) 
```

根据关于第一种形式的 hlint有什么**错误**，因此我为什么要使用（可读性较差的）第二个选项？

### 编辑

（在问题中明确添加了 hlint）

我的问题不在于从词汇的角度来看有什么区别（我确实理解它们）。我的问题是我不明白为什么 hlint 将其标记为**错误**。例如，懒惰有区别吗？此外，为什么hlint之前的想法是**错误**`\x -> Just x`的，而只会提出警告。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T22:43:10.297

一个常见问题，我刚刚在[HLint 手册](http://community.haskell.org/~ndm/darcs/hlint/hlint.htm#error_vs_warning "HLint 手册")中添加了一个答案。它说：

> 每个提示都有一个严重级别：
> 
> *   **错误** - 例如`concat (map f x)`建议`concatMap f x`作为“错误”严重性提示。从风格的角度来看，您应该始终将`concat`和的组合`map`替换为`concatMap`。请注意，这两个表达式是等效的 - HLint 报告的是样式错误，而不是代码中的实际错误。
> *   **警告**- 例如`x !! 0`建议`head x`作为“警告”严重性提示。通常`head`是表达列表第一个元素的一种更简单的方法，尤其是在您以归纳方式处理列表时。但是，在表达式`f (x !! 4) (x !! 0) (x !! 7)`中，将中间参数替换为 head 会使模式更难遵循，并且可能是个坏主意。警告提示通常是值得的，但不应盲目应用。
> 
> 错误和警告之间的区别是个人品味之一，通常是我的个人品味。如果你已经对 Haskell 风格有很好的理解，你应该忽略其中的区别。如果您是初学者 Haskell 程序员，您可能希望在警告提示之前关注错误提示。

虽然区别在于个人品味，但有时我会改变主意。查看此线程中的两个示例，`(:[])`似乎是一个相对“复杂”的提示-您正在分解 to 的语法糖`[x]`，`x:[]`如果您从不进行模式匹配，则在某些方面将列表的抽象剥离为通用容器它。相比之下`\x -> Just x`，`Just`总是似乎是个好主意。因此，在 HLint-1.8.43（刚刚发布）中，我将第一个警告，第二个错误。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-25T21:27:40.103

没有真正的区别。HLint 关注风格问题；最终，它们只是关于如何使您的代码看起来更好的提示。

通常，将 lambda 与类似的构造函数或函数一起使用是多余的，并且会使代码*更难*阅读。举个极端的例子，以构造函数 like`Just`为例：`Just`比较`\ x -> Just x`. 这些是等价的，但第二个版本肯定会让事情变得更加混乱！作为一个更接近的例子，大多数人会选择`(+ 1)`over `\ x -> x + 1`。

在您的特定情况下，这是一个不同的故事，因为列表具有特殊的语法。因此，如果您`\ x -> [x]`更喜欢该版本，请保留它。但是，一旦您习惯了操作符部分，您可能会发现该`(: [])`版本很容易阅读（如果不是更容易的话），因此即使现在也要考虑使用它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-26T09:16:12.187

我可能会考虑使用`return`or`pure`为此：

```
ghci> return 0 :: [Int]
[0]

ghci> import Control.Applicative
ghci> pure 0 :: [Int]
[0] 
```

我需要包含类型注释 ( `:: [Int]`) 因为我在 GHCi 中工作。在一堆其他代码中间，您可能不需要它。

# python - 将 pandas 中的时间序列重新采样为每周间隔

> ID：14530556
> 
> 赞同：28
> 
> 时间：2013-01-25T21:19:09.790
> 
> 标签：python, date, pandas, numpy, interpolation

如何将 pandas 中的时间序列重新采样为每周从任意一天开始的每周频率？我看到有一个可选的关键字库，但它只适用于短于一天的间隔。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-25T22:11:16.890

您可以将[锚定偏移量](http://pandas.pydata.org/pandas-docs/stable/timeseries.html#anchored-offsets)传递给[`resample`](http://pandas-docs.github.io/pandas-docs-travis/timeseries.html#timeseries-resampling)，以及它们涵盖这种情况的其他选项。

例如从星期一开始的每周频率：

```
ts.resample('W-MON') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-18T16:20:35.563

根据天数重新采样然后每 7 天切片一次，您会更安全，例如：

```
ts.resample('D').interpolate()[::7] 
```

在 github 上的这个 open pandas issue 中查看其他方法的潜在问题：

[https://github.com/pandas-dev/pandas/issues/16381](https://github.com/pandas-dev/pandas/issues/16381)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-02-25T22:19:51.720

Andy Haydens 和 denfromufas 的回答都没有对我有用，但确实如此： `df.resample('W', label='left', loffset=pd.DateOffset(days=1))`

如该答案所述：[https ://stackoverflow.com/a/46712821/1743551](https://stackoverflow.com/a/46712821/1743551)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T15:27:48.567

您可能需要仔细检查您的结果。loffset 似乎是用于更改采样索引上的*标签*，而不是用于重新采样的实际基础时间段。如果您阅读最新的文档，不推荐使用 loffset 参数，他们建议在重新采样后修改索引，这再次指向更改标签而不是如何计算结果值。offset 关键字似乎适用，但我对此并不走运。

[https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.DataFrame.resample.html](https://pandas.pydata.org/pandas-docs/dev/reference/api/pandas.DataFrame.resample.html)

# r - 在 R 中，通过矢量化有效地计数

> ID：14530557
> 
> 赞同：-2
> 
> 时间：2013-01-25T21:19:14.133
> 
> 标签：r

我有一个函数结果，它接受一个 71x2446 数据帧并返回一个 2x2446 双矩阵。2446 对中的每一个中的第一个数字代表一个整数 1-6，这基本上是该线适合的类别，第二个数字是该类别的损益。我想计算每个类别的利润总和，同时计算每个类别的频率。我的问题是我写它的方式是否是对向量的有效使用

```
 vec<-as.data.frame(t(apply(theData,1,theresults)))
  vec[2][vec[1]==1]->successCrossed
  vec[2][vec[1]==2]->failCrossed
  vec[2][vec[1]==3]->successFilled
  vec[2][vec[1]==4]->failFilled
  vec[2][vec[1]==5]->naCount
  vec[2][vec[1]==6]->otherCount 
```

然后在汇总结果时会调用一堆长度（）和平均值（）。

结果以这种方式引用原始数据框

```
 theresults<-function(theVector)
  {
       if(theVector[['Aggressor']]=="Y")
       {
      if(theVector[['Side']]=="Sell")
      {choice=6}
      else
     {choice=3}
     if(!is.na(theVector[['TradePrice']])&&!is.na(theVector[['L1_BidPri_1']])&&!is.na(theVector[['L1_AskPri_1']])&&!is.na(theVector[['L2_BidPri_1']])&&!is.na(theVector[['L2_AskPri_1']]))
{
  Profit<-  switch(choice,                           
                  -as.numeric(theVector[['TradePrice']]) + 10000*as.numeric(theVector[['L1_AskPri_1']])/as.numeric(theVector[['L2_BidPri_1']]),
                  -as.numeric(theVector[['TradePrice']]) + 10000*as.numeric(theVector[['L1_BidPri_1']])/as.numeric(theVector[['L2_BidPri_1']]), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:29:34.680

您可以尝试将 2x2446 向量组合成表示类型和利润状态的字符串向量......然后在其上调用“table”。

这是一个例子：

```
data = cbind(sample(1:6, replace=T, 30),
     sample (c("profit", "loss"), replace=T, 30))

x = apply(data, MARGIN=1, paste, collapse="")

table(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T14:08:15.263

我很确定，对于这种类型的操作，即使数据集在数十万行中，正确的答案是使用 Uwe 格言；这段代码足够快，不会成为程序的瓶颈。（作为对另一个答案的回应，相对于我当前的解决方案， cbind 很慢且内存密集。）

# jquery - 为什么 Ajax AdCall 会覆盖 html 内容？

> ID：14530559
> 
> 赞同：0
> 
> 时间：2013-01-25T21:19:23.923
> 
> 标签：jquery, html, ajax, jsp

我正在使用 JQuery 来调用使用 Ajax 的 jsp 页面。当我在 JSP 中只放一个 DateTime 并且 Ajax 调用能够显示该 JSP 的内容（即 DateTime）时，它工作正常，但是当我将 Ad 代码放在显示 DateTime 的同一个 JSP 中时，我得到一个页面，它只是显示广告，其余内容消失。

如果用户更改页面中的某个字段（例如价格），我希望使用 Ajax 调用将广告显示在页面的特定位置。

以下是我的要求： PageA.jsp ---> 如果用户使用 JQUery 或任何 JavaScript 框架从 PageA.jsp 页面更改文本框中的价格，则调用 Ajax 调用---> AdCall.jsp 页面在某个特定时间加载PageA.jsp 页面上的 div。

下面是我正在使用的代码：

```
 function makeAnAdCall(field) {

  $.ajax({
        url : "AdCall.jsp",
        success : function (data) {
        $("#content").html(data);
        }
    });
} 
```

这是我展示广告的区域：

```
<div id="content" style="color:blue;font:bold 14px arial;padding-top:140px;"> Here!
        </div> 
```

它只显示广告的原因之一可能是因为广告试图写入完整的文档写入对象，而不仅仅是写入特定区域。但我确信必须解决它:) 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:15:03.923

I was able to solve this problem by using the [writeCapture](https://github.com/iamnoah/writeCapture/wiki/Usage) JavaScript framework. The framework has plugin for JQuery but it can be used without JQuery as well. The only change you have to do is instead of calling the JQuery `$("#content").html(data);` use `$('#content').writeCapture().html(data);`

# php - 如何在 Laravel 4 上设置不同的环境？

> ID：14530560
> 
> 赞同：4
> 
> 时间：2013-01-25T21:19:27.137
> 
> 标签：php, laravel, laravel-4

我正在尝试在 Laravel 4 应用程序上设置多个环境，并且根据我们所处的环境自然会设置不同的数据库。

对于我的本地机器，我为“local.elders.dev”设置了一个虚拟主机

不幸的是，由于某种原因，以下代码不起作用。

```
$env = $app->detectEnvironment(array(
    'local' => array('http://local.elders.dev'),
)); 
```

也许我需要运行一个工匠命令或其他东西。我觉得我很接近了，但还没有到那里！

谢谢大家 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-14T18:05:05.417

另一种方法是使用项目所在文件夹的名称。这适用于控制台和 Web。如果不同的环境托管在同一台服务器上，我发现这是唯一可靠的方法。

```
$env = $app->detectEnvironment(array(
  'staging'     => strpos(getcwd(), '/staging')>-1, 
  'acceptance'  => strpos(getcwd(), '/acceptance')>-1, 
  'production'  => strpos(getcwd(), '/production')>-1, 
)); 
```

一个很大的优势是，您可以通过简单地重命名或复制项目文件夹而不更改文件、数据库记录或环境变量来将登台移动到生产环境。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T18:56:57.437

我知道这已得到解答，但对于其他正在寻找解决方案的人...

我的环境检测设置如下所示：

```
$env = $app->detectEnvironment(array(

// Development
// any machine name with the term "local" will use the local environment
'local' => array('*local*'),

// Stage
// any machine name with the term "stage" will use the stage environment
'stage' => array('*stage*')

// Production
// production is default, so we don't need to specify any detection 
```

));

这很方便，因为只要我使用“本地”进行开发（如“localhost”、“localhost:8000”、“my.app.local”等），它就可以在任何项目上工作。“舞台”也是如此。并且生产是默认的，所以没有“本地”或“阶段”的任何东西都适用于生产。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-16T03:12:02.433

# 使用 Laravel 4x 在同一台机器上处理多个环境

如果您想在同一台机器上运行多个具有相同名称的环境——例如，一个**登台**和**生产**和**本地**环境，该怎么办？

在 Laravel 4x 中处理环境有一个更好的解决方案，可以通过向您的 vhosts 文件或 .htaccess 添加一个衬里来完成：

# 设置本地环境变量

在 vhost 或 .htaccess 中为您的本地安装添加，对于**staging**，例如添加：

```
SetEnv LARAVEL_ENV staging 
```

在您的**生产**.htaccess 或 vhost 中也是如此：

```
SetEnv LARAVEL_ENV production 
```

然后是 start.php 中通常的 detectEnvironment() 函数。

```
$env = $app->detectEnvironment(function()
{
// Default to local if LARAVEL_ENV is not set
return getenv('LARAVEL_ENV') ?: 'local';
}); 
```

我们没有忘记**本地**...这是很酷的部分——如果在 vhost 或 .htaccess 中都找不到环境变量，您的安装将默认为本地，因为它们会在其他安装中找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T10:31:22.833

好的 ！我刚刚解决了这个问题......代码实际上工作正常！问题是我正在使用

```
$_SERVER['DB1_HOST'] //for Pagodabox. 
```

当然，这不是在我的本地环境中设置的，这几乎破坏了应用程序......

我通过简单地修复：

```
isset($_SERVER['DB1_HOST']) ? $_SERVER['DB1_HOST'] : ''; 
```

感谢@jeroen 和@theshiftexchange :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T21:26:16.453

尝试用 替换它`'local.elders.dev'`，我不是 100% 确定，但它可能匹配主机名，而不是完整路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-16T00:41:52.110

Laravel 4 通过“bootstrap/start.php”文件中指定的机器名来检测环境。

例如，在我的情况下，配置变为：

```
$env = $app->detectEnvironment(array(
  'local' => array('Victor.local', 'Victor-PC'),
)); 
```

这意味着 Laravel 将为两台机器使用“本地”环境设置：“Victor.local”（Mac）和“Victor-PC”（Windows）。

为了知道当前机器名，可以使用下面的 PHP 代码：

`<?php echo gethostname(); ?>`

对于每个环境，您可以在 app/config 中创建一个文件夹并替换所需的配置文件和属性。

问候！

# vb.net - vb.net 使用 Post 方法登录网站

> ID：14530570
> 
> 赞同：1
> 
> 时间：2013-01-25T21:20:06.123
> 
> 标签：vb.net, post, httprequest

下面的代码给了我一个“NullReferenceException 未处理。对象引用未设置为对象的实例。” 错误在`RichTextBox1.Text = thepage`

是什么导致了这个错误？

可能是不正确的用户名和/或密码？

可能是因为我收到此消息“您请求的加密页面包含一些未加密的信息。您在此页面上看到或输入的信息很容易被第三方读取。” 当我在浏览器中访问登录网页时？

提前致谢！

```
Imports System.Net
Imports System.Text
Imports System.IO

Public Class Form1
Dim logincookie As CookieContainer

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim postData As String = "__MOID__=1688&__FH__=LoginForm&backUrl=http%3A%2F%2Fwww.reuters.com%2F&backParameterEncoded=false&source=portfolio&trackingSource=&loginName=johnnordeen1%40gmail.com&password=gromit+1&flag=true"
    Dim tempCookies As New CookieContainer
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)

    Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("https://commerce.us.reuters.com/login/pages/login/login.do?backUrl=http%3A%2F%2Fwww.reuters.com%2F&backParameterEncoded=false&source=portfolio&flow=PORTFOLIO&entry_source=registration"), HttpWebRequest)
    postReq.Method = "POST"
    postReq.KeepAlive = True
    postReq.CookieContainer = tempCookies
    postReq.ContentType = "application/x-www-form-urlencoded"
    postReq.Referer = "https://commerce.us.reuters.com/login/pages/login/login.do?backUrl=http%3A%2F%2Fwww.reuters.com%2F&backParameterEncoded=false&source=portfolio&flow=PORTFOLIO&entry_source=registration"
    postReq.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.2.3) Gecko/20100401 Firefox/4.0 (.NET CLR 3.5.30729)"
    postReq.ContentLength = byteData.Length

    Dim postreqstream As Stream = postReq.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()

    Dim postresponse As HttpWebResponse

    postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
    tempCookies.Add(postresponse.Cookies)
    logincookie = tempCookies
    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

    Dim thepage As String = postreqreader.ReadToEnd

    RichTextBox1.Text = thepage

End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    WebBrowser1.DocumentText = RichTextBox1.Text
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:26:29.610

我确定这与安全性或权限无关。最有可能的是您的标记没有名为“RichTextBox1”的控件，或者它没有按预期自动实例化。如果您在导致异常的那一行中断调试器并评估 RichTextBox1，您应该会发现它为空。仔细检查您的页面是否有一个 ID="RichTextBox1" 的控件，并且它正在按预期进行实例化。

# javascript - 角JS。如何禁用自动滚动到我的页面顶部

> ID：14530572
> 
> 赞同：9
> 
> 时间：2013-01-25T21:20:16.360
> 
> 标签：javascript, angularjs

请告诉我，我怎样才能禁用自动上升到我的页面顶部？如果我使用哈希导航：

```
<a href="#/index">Goto index</a> 
```

我的页面不超过顶部，但如果我使用 AngularJS：Html：

```
<a ng-href="#/index">Goto index</a> 
```

JS：

```
$routeProvider.
      when('/index', {
          template:'...',
          controller: 'RouteCtrl'
      }) 
```

我的页面滚动到顶部。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-26T05:20:30.210

我觉得你的平原`href`不滚动和`ng-href`滚动有点奇怪，我以为是相反的......

但是，对于解决方案；由浏览器滚动哈希更改，因此通常要禁用它，您需要拦截`preventDefault()`事件，然后自己更改位置。使用 Angular 时，您可以为`<a>`元素定义一些属性指令，也可以只定义您自己的`a`指令。

如果您使用`ng-view`，它依赖于`$anchorScroll`带有视图更新的服务来模拟浏览器通常会执行的行为，因为 Angular 已经拦截了该事件。您可以通过提供自己的`$anchorScroll`不执行任何操作来防止滚动视图加载：

```
angular.module('yourModule', []).value('$anchorScroll', angular.noop); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T16:31:21.547

如[AngularJS 文档](http://docs.angularjs.org/api/ng.%24anchorScroll)中所示，正确的方法是：

```
angular.module('yourModule',[]).config( ['$anchorScrollProvider', 
    function($anchorScrollProvider) {
        $anchorScrollProvider.disableAutoScrolling();
    }]
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-18T12:58:01.763

试试看嘛

```
assessmentApp.run(['$anchorScroll', function($anchorScroll) {
    $anchorScroll = angular.noop;
}]) 
```

# javascript - 从所有匹配的表单元素中删除一个类..最干净的方式？

> ID：14530579
> 
> 赞同：1
> 
> 时间：2013-01-25T21:20:34.617
> 
> 标签：javascript, jquery, performance, methods, chaining

I'm trying to clear a bunch of error styling on form elements whenever top level radio buttons are checked. 我试图找到：

*   提高性能的替代方法和结构
*   一种用于查找所有表单元素的链接方法，因此我不会进行太多调用..（不确定是否可能）。

    // 在调用下面的函数之前定义的全局变量或作用域变量..

JS

```
var target = jQuery("#cachedElement");

function functionWithManyReferencesToTarget() {
    target.find("input").each(function() {
    $(this).removeClass("formError error-state");
});
target.find("label").each(function() {
    $(this).removeClass("formError error-state");
});
target.find("select").each(function() {
    $(this).removeClass("formError error-state");
});
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:23:16.170

```
$target.find('input, label, select').removeClass('formError error-state'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:24:00.687

[`removeClass`](http://api.jquery.com/removeClass/)遍历所有匹配的元素，[您可以使用逗号 ( `,`) 分隔多个选择器](http://api.jquery.com/multiple-selector/)，因此您的调用可以简化为：

```
$('#cachedElement').find('input, label, select').removeClass('formError error-state'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T21:24:02.473

你不能做类似的事情：

```
$('.formError').removeClass('formError error-state'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T21:48:36.403

这使它成为一个单线：

```
jQuery("#cachedElement").find("input, label, select").removeClass("formError error-state"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T21:25:14.827

这个怎么样？

```
(function($){
    var $target = $('#cachedElement'); // This is confusing

    $target.find('input, label, select').removeClass('formError error-state');
}(jQuery)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T21:27:50.590

使用 jQuery 的超级`chaining`特性，代码可以清理如下：

```
 jQuery("#cachedElement").find("input, label, select").each(function() {
      $(this).removeClass("formError error-state");
   }); 
```

这很难使它成为一个单行javascript代码。希望这可以帮助您更好地维护您的代码。

# c# - LINQ 一对多：如何删除具有引用的实体

> ID：14530584
> 
> 赞同：0
> 
> 时间：2013-01-25T21:21:02.067
> 
> 标签：c#, linq, one-to-many

我的数据库中有 2 个表：

```
[Table]
public class Names: INotifyPropertyChanged, INotifyPropertyChanging
{        
    public Names()
    {
        this._namesCar = new EntitySet<Coord>(this.OnCarAdded, this.OnCarRemoved);
    }

    private int _id;
    private string _name;
    private EntitySet<Cars> _namesCar;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync= AutoSync.OnInsert)]
    public int Id
    {
        get { return _id; }
        set
        {
            if (_id != value)
            {
                NotifyPropertyChanging("Id");
                _id = value;
                NotifyPropertyChanged("Id");
            }
        }
    }

    [Column]
    public string Name
    {
        get { return _name; }
        set
        {
            if (_name != value)
            {
                NotifyPropertyChanging("Name");
                _name = value;
                NotifyPropertyChanged("Name");
            }
        }
    }

    [Association(Storage = "_namesCar", ThisKey = "Id", OtherKey = "NamesId")]
    public EntitySet<Cars> NamesCar
    {
        get { return _namesCar; }
        set
        {
            if (_namesCar != value)
            {
                NotifyPropertyChanging("NamesCar");
                _namesCar = value;
                NotifyPropertyChanged("NamesCar");
            }
        }
    }

    private void OnCarAdded(Cars car)
    {
        car.Name= this;
    }

    private void OnCarRemoved(Cars car)
    {
        car.Name= null;
    } 
```

和

```
[Table]
public class Cars: INotifyPropertyChanged, INotifyPropertyChanging
{

    private int _id;
    private int _nameid;
    private string _cars;        
    private EntityRef<Names> _carNames = new EntityRef<Names>();

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int Id
    {
        get { return _id; }
        set
        {
            if (_id != value)
            {
                NotifyPropertyChanging("Id");
                _id = value;
                NotifyPropertyChanged("Id");
            }
        }
    }

    [Column(DbType = "Int")]
    public int NameId
    {
        get { return _nameid; }
        set
        {
            if (_nameid != value)
            {
                NotifyPropertyChanging("NameId");
                _nameid = value;
                NotifyPropertyChanged("NameId");
            }
        }
    }

    [Association(Storage = "_carNames", ThisKey = "NameId", OtherKey = "Id", IsForeignKey = true)]
    public Names Names
    {
        get { return this._carNames.Entity; }
        set
        {
            NotifyPropertyChanging("Names");
            this._carNames.Entity = value;
            if (value != null)
            {                    
                this._nameid = value.Id;
            }
            NotifyPropertyChanged("Names");
        }
    } 
```

它们属于相同的数据上下文：

```
public class CarsDataContext : DataContext
{
    // Pass the connection string to the base class.
    public CarsDataContext(string connectionString)
        : base(connectionString)
    { }

    // Specify a table for the items.
    public Table<Names> RecNames;
    public Table<Cars> RecCars;

} 
```

我可以添加一个新名称，然后添加与该名称关联的新车。我也可以从一个名字中删除汽车。但是，当我尝试删除名称时，我遇到了异常。我相信这是因为有与该名称相关的汽车。删除包含与其关联的汽车的名称的最佳方法是什么？我的意图是先删除所有汽车，然后再删除名称。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:26:31.417

尝试使用[`DeleteRule`](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.associationattribute.deleterule.aspx)属性的`Association`属性，特别是使用备注中指示的“CASCADE”：

> 如果设置为 null，则不添加删除行为。例如，“CASCADE”会将“ON DELETE CASCADE”添加到外键关系中。

# gis - 计算相似像素之间的距离 - 欧几里得距离 - ArcGIS 10.1 - Erdas Imagine

> ID：14530586
> 
> 赞同：0
> 
> 时间：2013-01-25T21:21:10.577
> 
> 标签：gis, arcgis, euclidean-distance

我有一个无符号的 1 位主题森林覆盖栅格 (.img)。1 = 森林，0 = 非森林。我想计算森林斑块之间的距离。似乎 ArcGIS 中的欧几里得距离工具可以做到这一点，但我得到的输出全为 0。

有没有人有过这方面的经验？我做错了什么吗？我是否必须编写脚本来处理它？

我可以使用 ArcGIS 或 Erdas Imagine。哪个最容易。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:06:18.133

它应该与值为 0 和 1 的栅格一起使用。将您的 .img 导出为 .tiff 并使用 8 位无符号并重试。

# ruby - 在 Rake 中通过 node.js 运行 r.js 会导致文件锁定错误

> ID：14530588
> 
> 赞同：3
> 
> 时间：2013-01-25T21:21:23.177
> 
> 标签：ruby, node.js, rake, r.js

我正在使用 Rake 在节点中运行 r.js 优化器。这是 rake 命令

```
sh %{node.exe lib/dist/requireJS/2.1.1/r.js -o app.build.js} do |ok, status|
    ok or fail "r.js build failed"
end 
```

这会导致以下错误

```
node.exe lib/dist/requireJS/2.1.1/r.js -o app.build.js
Error: EBUSY, resource busy or locked
    at Object.fs.readSync (fs.js:381:19) 
```

如果我在命令行中在 rake 之外运行相同的命令，我不会收到错误消息。这看起来像一个文件锁定错误，但我不知道什么文件被锁定或为什么被锁定。也许它甚至是一条红鲱鱼。如果您有任何见解，我将不胜感激。

提前致谢

# jquery - 使用 jQuery 提交带有链接的表单

> ID：14530589
> 
> 赞同：0
> 
> 时间：2013-01-25T21:21:26.703
> 
> 标签：jquery

我有一个小型搜索表单，可以执行两种类型的搜索：

```
<form id="form-navbar-search" class="navbar-search pull-left" action="index.cfm?fuseaction=Search.output" method="post">
   <div class="input-append">
      <input type="text" name="header_search_criteria" title="Criteria to search" placeholder="search" class="search-query span9" />
      <input type="submit" name="quick" value="Quick" title="Search on task ID or task name" class="btn btn-inverse" />
      <a href="index.cfm?fuseaction=Search.home" id="navbar-search-full" title="Start a full search" class="btn btn-inverse" />Full</a>
   </div>
</form> 
```

1.  如果按下“快速”提交按钮，表单将提交到默认操作属性 ( `index.cfm?fuseaction=Search.output`)。这行得通。
2.  如果按下“完整”按钮（实际上是`a`我使用 Bootstrap 将其设置为按钮的样式），我想阻止链接打开新页面，将表单的操作更改为`index.cfm?fuseaction=Search.home`，然后提交表单。我为此编写了这个 jQuery：

```
$('#navbar-search-full').click( function(event) {
   event.preventDefault(); //don't let the link open a new page
   $('#form-navbar-search').attr('action',  $(this).attr('href')).submit(); //instead, change the search form action, then submit it
})
.attr('href','#navbar-search-full'); 
```

正如[您在此 JSFiddle 中看到的](http://jsfiddle.net/jhfrench/cgcDy/)， preventDefault() 似乎没有拦截链接操作。**我需要做哪些调整才能做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:24:01.987

```
return false; 
```

这将为您工作...

**编辑**

您可以拥有锚点 href="#"，然后使用“data-”属性来存储您的 URL。然后锚不会有任何动作，您可以使用 .attr("data-").. 以相同的方式检索属性，无论您决定调用它..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:36:19.600

我看到了一个不同的问题：您在`#navbar-search-full`触发点击处理程序之前更改了 href 。

在提交表单之前尝试在处理程序`.attr('href','#navbar-search-full')`内部移动，或者完全删除它。`click`

# c - 在自定义 libc 中实现线程本地存储

> ID：14530590
> 
> 赞同：8
> 
> 时间：2013-01-25T21:21:29.300
> 
> 标签：c, linux, x86-64, libc, thread-local-storage

我正在`libc`为非常小的静态链接程序实现一小部分，我认为添加 TLS 支持将是一个很好的学习体验。我使用[Ulrich Drepper 的 TLS 文档](http://www.akkadia.org/drepper/tls.pdf)作为参考。

我设置了两个字符串来尝试一下：

```
static __thread const char msg1[] = "TLS (1).\n"; /* 10 bytes */
static __thread const char msg2[] = "TLS (2).\n"; /* 10 bytes */ 
```

编译器生成以下指令来访问它们：

```
mov    rbx, QWORD PTR fs:0x0 ; Load TLS.
lea    rsi, [rbx-0x14]       ; Get a pointer to 'msg1'. 20 byte offset.
lea    rsi, [rbx-0xa]        ; Get a pointer to 'msg2'. 10 byte offset. 
```

假设我将 TCB 放在堆栈上的某个位置：

```
struct tcb {
    void* self; /* Points to self. I read that this was necessary somewhere. */
    int errno;  /* Per-thread errno variable. */
    int padding;
}; 
```

然后将 TLS 区域放在它旁边`tls = &tcb - tls_size`。然后我将 FS 寄存器设置为指向`fs = tls + tls_size`，并将 TLS 初始化映像复制到`tls`.

但是，这不起作用。`tls_image`我已通过将 20 个字节写入to 来验证我正确定位了 TLS 初始化映像`stdout`。这要么让我相信我错误地放置了 TCB 和/或 TLS 区域，要么我不符合 ABI。

*   我使用`arch_prctl(2)`. 我需要以`set_thread_area(2)`某种方式使用吗？
*   我没有`dtv`. 我假设这不是必需的，因为我是静态链接的。

关于我做错了什么的任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T21:50:31.870

> 我正在为非常小的静态链接程序实现一小部分 libc，我认为添加 TLS 支持将是一个很好的学习体验。

真棒的想法！我不得不在项目中实现自己的 TLS，因为我无法使用任何常见的线程库，例如 pthread。对于您的问题，我没有完整的解决方案，但分享我的经验可能会很有用。

> 我使用 arch_prctl(2) 设置 FS 寄存器。我需要以某种方式使用 set_thread_area(2) 吗？

答案取决于您实际使用的架构。如果您使用的是 x86-64 位，则应仅使用[arch_prctl](http://man7.org/linux/man-pages/man2/arch_prctl.2.html)将 FS 寄存器设置为要用作 TLS 的内存区域（它允许您寻址大于 4GB 的内存区域）。而对于 x86-32，您**必须**使用[set_thread_area](http://man7.org/linux/man-pages/man2/set_thread_area.2.html)，因为它是内核支持的唯一系统调用。

我的实现背后的想法是为每个线程分配一个私有内存区域并将其地址保存到`%GS`寄存器中。这是一个相当简单的方法，但在我的情况下，它工作得很好。每次您想访问线程的私有区域时，您只需将保存的值`%GS`和标识内存位置的偏移量用作基地址。我通常为每个线程分配一个内存页面（4096），并将其划分为 8 个字节的块。因此，我为每个线程设置了 512 个私有内存插槽，可以像索引从 0 到 511 的数组一样访问它们。

这是我使用的代码：

```
#define _GNU_SOURCE 1 

#include "tls.h"
#include <asm/ldt.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <sys/prctl.h>
#include <asm/prctl.h>
#include <sys/syscall.h> 
#include <unistd.h> 

void * install_tls() {
  void *addr = mmap(0, 4096, PROT_READ|PROT_WRITE,
                       MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
  if (syscall(SYS_arch_prctl,ARCH_SET_GS, addr) < 0) 
      return NULL;

   return addr;
}

void freeTLS() {
    void *addr;
    syscall(SYS_arch_prctl,ARCH_GET_GS, &addr);  
    munmap(addr, 4096);
}

bool set_tls_value(int idx, unsigned long val) {
    if (idx < 0 || idx >= 4096/8) {
      return false;
    }
    asm volatile(
        "movq %0, %%gs:(%1)\n"
        :
        : "q"((void *)val), "q"(8ll * idx));
    return true;
}

unsigned long get_tls_value(int idx) {
    long long rc;
    if (idx < 0 || idx >= 4096/8) {
      return 0;
    }
    asm volatile(
        "movq %%gs:(%1), %0\n"
        : "=q"(rc)
        : "q"(8ll * idx));
    return rc;
  } 
```

这是带有一些宏的标题：

```
#ifndef TLS_H
#define TLS_H

#include <stdbool.h>

void *install_tls(); 
void freeTLS();
bool set_tls_value (int, unsigned long); 
unsigned long get_tls_value(int ); 

/*
 *macros used to set and retrieve the values 
 from the tls area
*/ 

#define TLS_TID 0x0
#define TLS_FD  0x8 
#define TLS_MONITORED 0x10

#define set_local_tid(_x) \
    set_tls_value(TLS_TID, (unsigned long)_x)

#define set_local_fd(_x) \
    set_tls_value(TLS_FD, (unsigned long)_x)

#define set_local_monitored(_x) \
    set_tls_value(TLS_MONITORED, (unsigned long)_x)

#define get_local_tid() \
    get_tls_value(TLS_TID)

#define get_local_fd() \
    get_tls_value(TLS_FD)

#define get_local_monitored() \
    get_tls_value(TLS_MONITORED)

#endif /* end of include guard: TLS_H */ 
```

每个线程要完成的第一个动作是安装 TLS 内存区域。一旦 TLS 被初始化，每个线程都可以开始使用这个区域作为私有 TLS。

# mysql - SQL 选择最小结果集，其总和涵盖给定值

> ID：14530592
> 
> 赞同：3
> 
> 时间：2013-01-25T21:21:36.250
> 
> 标签：mysql, sql

我需要 SQL 才能选择总和 >= 260 的最小最旧记录集。

我在数据库中有这样定义的数据：

```
CREATE TABLE record (
  id bigint(20) NOT NULL AUTO_INCREMENT,
  function varchar(10) NOT NULL,
  amount decimal(4,2) NOT NULL,
  timestamp datetime NOT NULL,
  journal int NOT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB;

insert into record(journal,function, amount, timestamp) values (1, 'debit', 81.15, '2013-01-01 01:01:02');
insert into record(journal,function, amount, timestamp) values (2, 'debit', 23.33, '2013-01-01 01:01:04');
insert into record(journal,function, amount, timestamp) values (1, 'debit', 68.19, '2013-01-01 01:01:06');
insert into record(journal,function, amount, timestamp) values (2, 'debit', 29.93, '2013-01-01 01:01:08');
insert into record(journal,function, amount, timestamp) values (1, 'debit', 71.01, '2013-01-01 01:01:10');
insert into record(journal,function, amount, timestamp) values (2, 'debit', 71.62, '2013-01-01 01:01:12');
insert into record(journal,function, amount, timestamp) values (1, 'debit', 88.94, '2013-01-01 01:01:14');
insert into record(journal,function, amount, timestamp) values (2, 'debit', 82.72, '2013-01-01 01:01:16');
insert into record(journal,function, amount, timestamp) values (1, 'debit', 44.26, '2013-01-01 01:01:18');
insert into record(journal,function, amount, timestamp) values (2, 'debit', 69.04, '2013-01-01 01:01:20');
insert into record(journal,function, amount, timestamp) values (1, 'debit', 96.83, '2013-01-01 01:01:22');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 81.27, '2013-01-01 01:01:01');
insert into record(journal,function, amount, timestamp) values (2, 'credit', 30.86, '2013-01-01 01:01:03');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 95.62, '2013-01-01 01:01:05');
insert into record(journal,function, amount, timestamp) values (2, 'credit', 16.20, '2013-01-01 01:01:07');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 50.28, '2013-01-01 01:01:09');
insert into record(journal,function, amount, timestamp) values (2, 'credit', 44.42, '2013-01-01 01:01:11');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 43.83, '2013-01-01 01:01:13');
insert into record(journal,function, amount, timestamp) values (2, 'credit', 10.40, '2013-01-01 01:01:15');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 79.35, '2013-01-01 01:01:17');
insert into record(journal,function, amount, timestamp) values (1, 'credit', 79.02, '2013-01-01 01:01:19');
insert into record(journal,function, amount, timestamp) values (2, 'credit', 82.31, '2013-01-01 01:01:21'); 
```

我努力了：

```
mysql> select * 
       from record 
       where journal=1 and function='credit' 
       having sum(amount) >= 260 
       order by timestamp asc; 
```

但是，该查询仅返回我想要的集合的第一行。所需的结果集如下所示：

```
+----+----------+--------+---------------------+---------+
| id | function | amount | timestamp           | journal |
+----+----------+--------+---------------------+---------+
| 27 | credit   |  81.27 | 2013-01-01 01:01:01 |       1 |
| 29 | credit   |  95.62 | 2013-01-01 01:01:05 |       1 |
| 31 | credit   |  50.28 | 2013-01-01 01:01:09 |       1 |
| 33 | credit   |  43.83 | 2013-01-01 01:01:13 |       1 |
+----+----------+--------+---------------------+---------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:40:16.520

尝试这个

```
SELECT ID, FUNCTION,AMOUNT, timestamp, journal 
FROM (
    select r.*,
    @sum := if(@journal = journal,@sum,0) + amount as SumAmount,
    @journal:=journal,
    @start := if(@sum > 260,@start + 1,0)  as start
    from record r, 
    (SELECT @journal := 0, @sum := 0, @start = 0) S 
    where journal=1 and function='credit' 
    order by timestamp asc
) V 
WHERE start <=1; 
```

[SQL 演示在这里](http://sqlfiddle.com/#!2/ea25e/35)

# iphone - 带背景图像的小型 FPS

> ID：14530597
> 
> 赞同：0
> 
> 时间：2013-01-25T21:21:53.940
> 
> 标签：iphone, ios, cocos2d-iphone

我的应用程序有一个大问题。我距离我的应用程序结束还有几步之遥，今天我想添加一张背景图片。在黑色背景下，我的正常 FPS 为 180，当我为尺寸为 960/640 的 iphone 4 添加背景时，我的 FPS 变为 20-30，因此无法播放。接下来发生的事情是，当我的玩家和敌人发生碰撞时，他们会停止行动，但前提是有我的背景。我正在使用 SpaceManager，所以可能是因为它的形状。那么有谁知道如何在 SpaceManager 中以另一种方式添加背景以不减慢我的 FPS？这是我尝试添加背景的方式：

```
-(id) init
{
CCSprite *background = [CCSprite spriteWithFile:@"Background.png"];

background.anchorPoint = ccp(0, 0);

[self addChild:background z:-1];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:24:50.823

fps 下降的最可能原因是因为图片是为视网膜显示器设计的，并且由于它是一个大文件，它会降低应用程序的速度。您使用的设备也会影响游戏的运行速度，因此如果它仅在 3gs 或类似的设备上运行缓慢，请放弃对它的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:34:57.993

所以我的对象是统计质量，所以我没有 [sm addcollision] 但我有这段代码

```
-(void) KolizeHraceSProtiHracem
{
if (player.position.x - enemy.position.x < 40 )
{

[enemy stopAllActions];
[player stopAllActions];

[player runAction:[CCMoveTo actionWithDuration:0.2 position:ccp(player.position.x + 40, 10)]];

[enemy runAction:[CCMoveTo actionWithDuration:0.1 position:ccp(enemy.position.x - 10, 10)]];
} 
```

我不认为，这段代码不好，因为如果我没有背景，这段代码可以工作，但如果我这样做，这段代码会停止所有操作。

# wpf - 分层 XamDataGrid XamComboEditor 绑定/DataContext 祖先

> ID：14530598
> 
> 赞同：1
> 
> 时间：2013-01-25T21:21:57.107
> 
> 标签：wpf, xamdatagrid

我认为这应该很容易，但我无法将 itemssource 值绑定到作为分层 XamDataGrid 一部分的组合框列上。我的 datacontext 在包含数据网格的 GRID 上设置为一个集合。

层次结构高层如下所示：

表（根）--> 字段（此处定义的组合框集合）--> 映射（此处的组合框列）

每个字段都可以有自己的映射，映射上的目标值对于每个字段都是唯一的。

在后面的代码中，我建立了我的集合并将 DataContext 设置为 Grid： DataGridTransformations.DataContext = MapColl;

这是一个可以帮助我理解的屏幕：

![问题示例](../Images/7b2317078e457d1a281efd85dee28e1e.png)

这是 XAML：

```
<Grid x:Name="GridTransformations" Background="#FFFAFADB" DataContext="MSC_Conversion_Tools.Models.MapSourceColl">
                <Custom:XamDataGrid x:Name="DataGridTransformations" DataSource="{Binding TableEntities}" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="600" Width="966" Loaded="DataGridTransformations_Loaded">
                    <Custom:XamDataGrid.FieldLayouts>
                        <Custom:FieldLayout>
                            <Custom:FieldLayout.Fields>
                                <Custom:Field Name="TableEntities"/>
                            </Custom:FieldLayout.Fields>
                        </Custom:FieldLayout>

                        <Custom:FieldLayout Key="TableEntities">
                            <Custom:FieldLayout.Fields>
                                <Custom:Field Name="EntityName" Label="Table Name"></Custom:Field>
                                <Custom:Field Name="Fields"/>
                            </Custom:FieldLayout.Fields>

                        </Custom:FieldLayout>

                        <Custom:FieldLayout Key="Fields">
                            <Custom:FieldLayout.Fields>
                                <Custom:Field Name="FieldName" Label="Field"></Custom:Field>
                                <Custom:Field Name="DefaultValue" Label="Default Value"></Custom:Field>
                                <Custom:Field Name="DefaultOnlyNonNullValues" Label="Default: Include Null Fields?" Width="300"></Custom:Field>
                                <Custom:Field Name="FunctionWrapName" Label="Function"></Custom:Field>
                                <Custom:Field Name="Mappings"></Custom:Field>
                            </Custom:FieldLayout.Fields>
                        </Custom:FieldLayout>

                        <Custom:FieldLayout Key="Mappings">
                            <Custom:FieldLayout.Fields>
                                <Custom:Field Name="SourceValue" Label="Source Vaue"></Custom:Field>
                                <Custom:Field Name="TargetValue" Label="Target Value" >
                                    <Custom:Field.Settings>
                                        <Custom:FieldSettings EditorType="{x:Type igEditors:XamComboEditor}" AllowEdit="True">
                                            <Custom:FieldSettings.EditorStyle>
                                                <Style TargetType="{x:Type igEditors:XamComboEditor}">
                                                    <Setter Property="ItemsSource" Value="{Binding Path=DataContext.MappingTargetCmbValues, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Custom:XamDataGrid}}}" />
                                                    <Setter Property="DisplayMemberPath" Value="Name"/>
                                                    <Setter Property="ValuePath" Value="Id" />
                                                </Style>
                                            </Custom:FieldSettings.EditorStyle>

                                        </Custom:FieldSettings>
                                    </Custom:Field.Settings>
                                </Custom:Field>

                            </Custom:FieldLayout.Fields>
                        </Custom:FieldLayout>

                    </Custom:XamDataGrid.FieldLayouts>
                </Custom:XamDataGrid>
            </Grid> 
```

这也是我的 Field 类，其中包含我的组合框值集合 MappingTargetCmbValues（我可能也没有这样做）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;

namespace MSC_Conversion_Tools.Models
{
    class Field
    {
        public Field(string Name)
        {
            FieldName = Name;
            DefaultOnlyNonNullValues = false;
        }
        public string FieldName { get; set; }
        public string DefaultValue { get; set; }
        public Boolean DefaultOnlyNonNullValues { get; set; }
        public string FunctionWrapName { get; set; }
        public ObservableCollection<Mapping> Mappings { get; set; }
        public ObservableCollection<MappingTargetCmbValue> MappingTargetCmbValues;
    }
} 
```

任何帮助将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:31:59.223

我可能弄错了，但看起来**MappingTargetCmbValues**是一个字段而不是一个属性。顺便说一句，使用 Self 的 RelativeSource 绑定到 Host.DataContext.MappingTargetCmbValues 可能比 FindAncestor 绑定更好。

# networking - 这是在 NAT 后面的两台主机之间建立 P2P 连接的合理技术吗？

> ID：14530600
> 
> 赞同：2
> 
> 时间：2013-01-25T21:22:08.803
> 
> 标签：networking, udp, p2p, firewall, nat

为了让两个不同 NAT 后面的两个主机能够建立 P2P 连接，它们必须都具有彼此的公共端点（地址/端口）。为了让每个主机知道它自己的公共端点，它可以与一个已知的公共服务器通信，该服务器将它的公共端点返回给主机，如服务器所见。参见 STUN (RFC5389)。

为了使此机制起作用，NAT 必须始终将相同的私有端点转换为相同的公共端点，而不管目标端点如何。

实现一个依赖于这种特定 NAT 行为的 P2P 应用程序是否是一个好主意（即它是否足够普遍）？Skype 和/或其他流行的 P2P 应用程序是否有其他回退机制？

编辑：它看起来像一个 NAT，其中每个目标选择不同的端口被称为“对称 NAT”。此外，一些对称 NAT 会增加端口号，从而可以猜测正确的端口。

现在我想问题是：大约有多少百分比的 NAT 是对称 NAT，其中有多少百分比使用随机端口分配与递增之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T06:55:11.743

您可以使用 IETF 的标准 STUN/TURN/ICE 协议： [http ://rtcbits.blogspot.com/2012/10/what-is-ice-interactive-connectivity.html](http://rtcbits.blogspot.com/2012/10/what-is-ice-interactive-connectivity.html)

根据 Google Gtalk 统计，这些机制在 92% 的情况下解决了 P2P 连接而无需中继流量。 [https://developers.google.com/talk/libjingle/important_concepts](https://developers.google.com/talk/libjingle/important_concepts)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-18T02:53:35.963

STUN 只能处理 85% 的情况！TURN 可以处理 100%，但使用起来确实很昂贵。那么用什么呢？两者都不是

使用冰。它是STUN服务器和TURN服务器的直接组合！这样，您将拥有 100% 的可靠性，但您只能在服务器上中继 15% 的流量。

# c++ - 在 Unicode 中转换变量

> ID：14530601
> 
> 赞同：3
> 
> 时间：2013-01-25T21:22:10.033
> 
> 标签：c++, winapi, variables, unicode

我是一名 Javascript 开发人员，所以请放轻松！我正在尝试只编写一个 C++ 补丁来启用在框架上的打印。我正在使用 Unicode 进行编译，根据我的研究，这让我很困惑。

我认为这是一个相对简单的事情，我过于复杂了。该应用程序有一个`std::string`包含当前打印机名称的名称。该脚本首先检查它是否未设置（如果它使用`GetDefaultPrinter`了哪个输出 a `LPTSTR`）。最后，脚本采用 than`std::string`或 the`LPTSTR`并将其转换为`LPCTSTR`for `CreateDC`。

这是我的代码：

```
std::string PrinterName = window->getPrinter();
LPDWORD lPrinterNameLength;
LPWSTR szPrinterName;
LPCTSTR PrinterHandle;

if (PrinterName == "unset") {
    GetDefaultPrinter( szPrinterName, &lPrinterNameLength );
    PrinterHandle = szPrinterName; //Note sure the best way to convert here
} else {
    PrinterHandle = PrinterName.c_str();
}
HDC hdc = CreateDC( L"WINSPOOL\0", PrinterHandle, NULL, NULL); 
```

编译时，我只会收到转换错误。如

> 无法将参数 2 从 LPDWORD * 转换为 LPDWORD (GetDefaultPrinter)

和

> 无法从“const char *”转换为“LPCTSTR”（在 PrinterHandle = PrinterName.c_str() 行）

我对此进行了相当多的 SO 研究，但还没有提出具体的解决方案。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:30:12.037

首先，正如评论中提到的，正确的方法是制作一个`DWORD`并传递地址：

```
DWORD lpPrinterNameLength;
...
GetDefaultPrinter(..., &lpPrinterNameLength); 
```

之所以会这样，是因为它可以使用和更改一个数字：

> 在输入时，指定 pszBuffer 缓冲区的大小（以字符为单位）。在输出时，接收打印机名称字符串的大小（以字符为单位），包括终止空字符。

它只需要一个`DWORD`，但函数会更改传入的变量中的数字，因此函数需要更改变量的地址，以便这些更改反映回调用者。

* * *

其次，由于`window->getPrinter()`返回一个窄字符串并且您正在使用`UNICODE`，这使得函数采用宽字符串，您应该从窄字符串转换为宽字符串。有几种方法可以做到这一点（例如在 ildjarn 的评论中提到的非常简单的一种），即使是这个在 C++11 上也稍微好一些，尽管前面提到的注释更适用于此，但我将使用`MultiByteToWideChar`和 C ++03：

```
std::wstring narrowToWide(const std::string &narrow) {
    std::vector<wchar_t> wide;

    int length = MultiByteToWideChar(CP_ACP, MB_ERR_INVALID_CHARS, narrow.c_str(), -1, NULL, 0);
    if (!length) {
        //error
    }

    wide.resize(length);
    if (!MultiByteToWideChar(CP_ACP, MB_ERR_INVALID_CHARS, narrow.c_str(), -1, &wide[0], length)) {
        //error, should probably check that the number of characters written is consistent as well
    }

    return std::wstring(wide.begin(), wide.end());
}

...

std::wstring PrinterName = narrowToWide(window->getPrinter());
//rest is same, but should be L"unset"
CreateDC( L"WINSPOOL\0", PrinterHandle, NULL, NULL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T00:16:40.467

即使您是为“Unicode”（宽字符串）编译的，您也可以调用 API 函数的“ANSI”（窄字符串）版本。Windows 将为您进行转换，并在后台调用宽字符版本。

例如，对于大多数 Windows API，例如`CreateDC`，实际上并没有具有该名称的函数。相反，有一个名为的宏`CreateDC`扩展为`CreateDCA`or `CreateDCW`，它们是实际的函数名称。当您为“Unicode”编译时，宏扩展为`-W`版本（这是所有现代操作系统版本中的本机版本。无论您是否为 Unicode 编译，没有什么能阻止您显式调用任一版本。在大多数情况下，该`-A`版本会简单地将窄字符串转换为宽字符串，然后调用相应的`-W`版本。（这里有一些与创建窗口有关的警告，但我认为它们不适用于 DC。）

```
std::string PrinterName = window->getPrinter();
if (PrinterName == "unset") {
  char szPrinterName[MAX_PATH];  // simplified for illustration
  DWORD cchPrinterNameLength = ARRAYSIZE(szPrinterName);
  GetDefaultPrinterA(szPrinterName, &cchPrinterNameLength);
  PrinterName = szPrinterName;
}

HDC hdc = CreateDCA("WINSPOOL", PrinterName.c_str(), NULL, NULL); 
```

# database-schema - postgreSQL：将模式 FOO 中所有表的选择授予 FOOROLE

> ID：14530604
> 
> 赞同：2
> 
> 时间：2013-01-25T21:22:31.430
> 
> 标签：database-schema, privileges, grant, postgresql-9.2

编辑：找到了。我认为 USAGE 是一种解释，而不是关键词。:-)

除了

```
 GRANT SELECT ON ALL TABLES    IN SCHEMA FOO to FOOROLE 
```

为了让 FOOROLE 能够从 FOO.CUSTOMER 中进行选择？是否还必须授予一些通用模式访问权限？

FOOROLE 是使用 LOGIN 创建的，可以登录数据库，但被拒绝：

```
 ERROR:  permission denied for schema foo
   LINE 1: select * from foo.customer

   ********** Error **********

   ERROR: permission denied for schema foo
   SQL state: 42501
   Character: 15  (caret points to the first character of "foo") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:30:24.983

USAGE 是我正在寻求的通用许可。

# asp.net-mvc-3 - ASP.NET MVC 3 的 Tincr

> ID：14530615
> 
> 赞同：2
> 
> 时间：2013-01-25T21:23:28.963
> 
> 标签：asp.net-mvc-3, google-chrome-devtools, livereload

我正在尝试在 chrome 中使用[tincr](http://tin.cr/)扩展。它允许您刷新 css 和 javascript，而无需再次重新加载页面。我在让它工作时遇到了一些麻烦，希望能提供任何帮助。

## 我的设置

源码根目录： **C:\dev\tfs\MyApp\Development Branches\3.3.0.0\Presentation\MyApp**

IIS网站目录指向上面的根目录。上面文件夹路径下的 Scripts 目录包含我正在更改的 js 文件。

我创建了一个 tincr.json 文件并将其放在根目录中

## tincr.json

```
{
    "toFile" : [],
    "fromFile" : [
        {"from": "C:\\\\dev\\\\tfs\\\\MyApp\\\\Development Branches\\\\3.3.0.0\\\\Presentation\\\\MyApp\\\\Scripts\\\\(.+\\.js)",
         "to": "http://localhost/MyApp/Scripts/$1"}
    ]
} 
```

**它是否正确？**有没有人设法让 tincr 与 ASP.NET MVC 3 一起工作？感谢您的帮助。

***PS*** -*我没有创建 tincr 标签的代表，所以如果有人可以将其添加到此标签中，其他人也可以更轻松地发布有关它的问题。谢谢。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:09:38.420

在玩耍和阅读谷歌群组和其他网站之后，我拼凑了以下内容

*   Tincr 不适用于 windows 中的查询参数（例如，common.js?var=1 将失败）
*   您需要小心附加到来自对 ajax 代码的引用的 js 文件的 url 的 ajax 查询。使用 Fiddler 并观看 URL。我必须确保将 js 文件添加到 _Layout.cshtml 文件中，然后它会在没有查询参数的情况下出现。

[我在我的网站http://aboutdev.wordpress.com/2013/01/26/using-tincr-with-asp-net-mvc-in-windows-7/](http://aboutdev.wordpress.com/2013/01/26/using-tincr-with-asp-net-mvc-in-windows-7/)上提供了更详细的 Tincr 方法，但这里是你需要。

我使用的 tincr.js 文件如下所示：

```
{
    "toFile" : [],
    "fromFile" : 
    [
        {
            "from": "\\\\Scripts\\\\([a-zA-Z]+)\\.js",
            "to": "/MyApp/Scripts/$1.js"
        }
    ]
} 
```

该文件不会更新磁盘上的文件，因为未填写“tofile”。该文件将在 Scripts 目录中查找文件，该目录位于您放置 tincr.json 文件的根目录下。

我希望这可以帮助您在项目中使用 Tincr。

# css - 使用内联 CSS 调整宽度

> ID：14530617
> 
> 赞同：1
> 
> 时间：2013-01-25T21:23:35.507
> 
> 标签：css, width, inline

我是 CSS/HTML 的新手，在调整页面宽度时遇到了一些麻烦。我确信解决方案非常简单明了，哈哈。

在此页面上：http: [//www.bodylogicmd.com/appetites-and-aphrodisiacs](http://www.bodylogicmd.com/appetites-and-aphrodisiacs) - 我正在尝试将宽度设置为 100%，以便内容跨越页面的整个宽度。我遇到的问题是，当我尝试添加内联 CSS 时，头部调用的外部样式表正在取代内联。我正在使用 Joomla，所以编辑器让我们编辑主体，而不是头部（除非我创建一个自定义模块来重写头部的代码）。

我不想重新编写/编辑外部（主）样式表，因为我正在使用这个页面进行比赛，它只运行了大约 1 个月。

任何人都知道如何使用内联 CSSS 实现这一目标以及代码是什么？

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:30:14.623

```
#main, #content, .landing-wrapper, #column2 .box2 {width: auto;}
#column2 {width: auto; float: none;} 
```

您应该可以将它放在模板的 index.php 的头部，尽管我会亲自将它添加到主题的主样式表的底部。多长时间没有一个因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:31:12.993

您需要找到#main 选择器并将其设置得更宽。除非您另有明确设置，否则主体将始终为 100% 宽。在您的情况下，#main 容器是整个页面的包装器，这就是您要设置的内容。我还建议查看“盒子模型”并了解它是如何工作的，然后再走得太远。它会让你免于哭泣和咬牙切齿。 [http://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:43:49.170

尝试添加内联 .css {width: 100%; （或自动）} 到： - #main - #content - .landing-wrapper - #column2 .box2

# javascript - 如何在模态中显示用户个人资料信息？

> ID：14530619
> 
> 赞同：2
> 
> 时间：2013-01-25T21:23:57.353
> 
> 标签：javascript, twitter-bootstrap, angularjs, modal-dialog

我有一个注册用户表，并希望通过单击其触发的模式显示他们的个人资料信息`<a href="#">name<a>`。

下面是通过[我的 Plunker工作的代码的一部分](http://plnkr.co/edit/0nIItyNBpyBSNiF6illv)

正如我上面的代码一样，我目前正在使用 Bootstrap 执行模式，但是我正在将我们的很多项目转换为 Angular JS。任何熟悉如何执行此操作的 JS 编码人员？

在此先感谢达罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:35:31.210

几周前我在博客上写过这个。**我的博客文章包含一个 plunkr 示例，该示例使用 twitter 引导模式（并且没有**额外的 UI 指令）几乎完全做到了这一点

[http://willvincent.com/blog/angularjs-and-twitter-bootstrap-playing-nicely](http://willvincent.com/blog/angularjs-and-twitter-bootstrap-playing-nicely)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:26:13.403

我不知道这是否会回答您的问题，但我使用 AngularJS 创建了一个 plunker 演示

[http://plnkr.co/edit/bNzolsIIm5geRd05Jaq6](http://plnkr.co/edit/bNzolsIIm5geRd05Jaq6)

**HTML 文件代码**

```
<!DOCTYPE html>
<html ng-app="angularjs-starter">
<head lang="en">
    <meta charset="utf-8">
    <title>Dynamic User Profile Loading</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="app.js"></script>
  </head>

  <body ng-controller="MainCtrl">
    <table >
      <tr ng-repeat="user in users">
        <td><a ng-click="getUserProfile(user)">{{user.username}}</a></td>
        <td>{{user.profile.fullName}}</td>
        <td>{{user.profile.email}}</td>
        <td>{{user.profile.phone}}</td>
      </tr>
    </table>
  </body>

</html> 
```

**Javascript代码**

```
var app = angular.module('angularjs-starter', []);

app.controller('MainCtrl', function($scope) {

    $scope.users =[{username: 'first'},{username: 'second'}, {username: 'third'},{username: 'fourth'}];  

  $scope.getUserProfile = function(user){
    //Here we have received the user object so search for the object int he array  
    var inx = $scope.users.indexOf(user);
    if(inx >= 0)
    {
      //retrieve user profile from server. 
      //Here we are going to set some values for the demo purpose
      $scope.users[inx].profile = {}; //Initialize profile as an object
      $scope.users[inx].profile.fullName = user.username + ' user';
      $scope.users[inx].profile.email = user.username + '@example.com';
      $scope.users[inx].profile.phone = user.username + ' phone';

    }
  };

}); 
```

# c# - 如何将 C# 对象发送到 PHP 页面？

> ID：14530625
> 
> 赞同：0
> 
> 时间：2013-01-25T21:24:10.210
> 
> 标签：c#, php, .net, web-services

将对象从 C# 传输到 PHP 的最佳方法是什么？

可以说我有这个：

```
class MyClass {
  public string name;
  public int id;
} 
```

然后我想将它发送到 PHP 页面并将其作为对象接收（我有更复杂的数据类型）。

从 C# 端和 PHP 端，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:26:02.600

一种方法是与基于文本的格式（例如 JSON）进行序列化。两种语言都应该有现成的序列化器。如果您愿意，也可以使用 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:32:01.687

您可以在 php 端使用[“nusoap](http://sourceforge.net/projects/nusoap/) ”，在 C# 端使用 xml 序列化程序

# iphone - 我的笔尖无法加载

> ID：14530626
> 
> 赞同：0
> 
> 时间：2013-01-25T21:24:12.357
> 
> 标签：iphone, ios, xcode

由于某种原因，按下 homeButton 后我的笔尖无法加载。但是，NSLog 会正确执行。

```
- (IBAction)homePressed:(id)sender {
    NSLog(@"hi");
  [[NSBundle mainBundle] loadNibNamed:@"rewardViewController" owner:self options:nil];
    NSLog(@"hey");
} 
```

有人知道这段代码有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:29:48.880

您的代码在语法上没有任何问题，但我怀疑您可能误解了 loadNibNamed 将为您做什么。如果您尝试通过加载新的 nib 文件来更改屏幕，那么您想探索 UINavigationController。

您的代码看起来更像这样：

```
 UIViewController *viewController = [[UIViewController alloc] initWithNibName:@"ViewControllerName" bundle:nil];
[self.navigationController pushViewController:viewController animated:YES]; 
```

如果您确实打算像上面那样使用 loadNibNamed，则需要将其分配给某些东西以使其有用。例如，如果您的 nib 包含 UIViewController 的实例，您可能会执行以下操作：

```
UIViewController *viewController = [[NSBundle mainBundle] loadNibNamed:@"rewardViewController" owner:self options:nil]; 
```

这将使用您的 nib 文件的内容创建一个 UIViewController 的新实例。然后你可以用那个 UIViewController 做任何你想做的事情。

# jquery - 无法在 fancybox 中加载日期选择器

> ID：14530633
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:04.583
> 
> 标签：jquery, datepicker, fancybox, lightbox

我将[这个选择器与 jquery 一起](http://code.google.com/p/jquery-datepicker/)使用：

当我使用下面的脚本在花式灯箱内调用选择器时，它不会激活。没有java错误或任何东西，只是没有响应。如果不调用fancybox，它可以正常工作。使用 jquery 1.7.2

```
<script language="JavaScript" type="text/javascript">           
$(function() {
  $( "#datepicker1").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "1900:2013"
  });                                               

  $( "#datepicker2").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "1900:2013"
  });                                               

  $( "#datepicker3").datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "1900:2013"
  });                                               

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:17.333

我错误地调用了fancybox。

# javascript - 位置：由父 div 固定剪辑

> ID：14530635
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:17.097
> 
> 标签：javascript, css, css-position

所以我有一个使用 position:fixed 在样式表中实现的表头。我希望能够让这个标题被它周围的 div 剪裁，但是当它的宽度大于周围 div 的宽度时，设置溢出不会导致它被剪裁。有任何想法吗？

基本代码是：

```
th {
  box-sizing: border-box;
  height: 46px;
}
```

```
<body>
  <div style="overflow: hidden; border: 5px solid black;width: 20%; height: 50%;">
    <table style="width: 1396px; position:fixed">
      <thead>
        <tr>
          <th style="width: 146px;">Name</th>
          <th style="width: 129px;">Company</th>
          <th style="width: 116px;">Address</th>
          <th style="width: 135px;">Spouse</th>
          <th style="width: 141px;">SSN</th>
        </tr>
      </thead>
    </table>
  </div>
</body>
```

我在想也许可以将剪辑属性应用于表格，然后用 JS 调整它，但无论我尝试放置什么剪辑，表格都会消失。我一直在使用 position:absolute ，然后在滚动时使用 javascript 动态调整它，但是即使它确实从其父 div 的表格上得到了正确的剪辑，它看起来也很滞后。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:39:32.967

固定和绝对定位的元素在页面流之外（你可能会说在更高的层上），并且不受页面上其他元素的影响。

在您的内容周围放置一个固定的包装 div，作为固定宽度的容器。

[http://jsfiddle.net/e9vAA](http://jsfiddle.net/e9vAA)

```
.page {
  width: 400px;
  margin: 0 auto;
}

.fixed {
  position: fixed;
  width: 400px;
  height: 80px;
  background-color: #eee;
}

th {
  box-sizing: border-box;
  height: 46px;
}
```

```
<div class="page">
  <div class="fixed">
    <table width="100%">
      <thead>
        <tr>
          <th style="width: 46px;">Name</th>
          <th style="width: 29px;">Company</th>
          <th style="width: 16px;">Address</th>
          <th style="width: 35px;">Spouse</th>
          <th style="width: 41px;">SSN</th>
        </tr>
      </thead>
    </table>
  </div>
</div>
```

# android - 手机和平板电脑上的 Android 应用

> ID：14530638
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:28.560
> 
> 标签：android

我正在开发一个需要在不同屏幕尺寸的标签和智能手机上工作的项目，但我不知道如何实现。我应该为不同的设备使用不同的代码，还是需要用 h/l/m/xhdpi 处理可绘制文件夹，还是有其他方法可以做到这一点？

# php - 需要 OOP 循环帮助

> ID：14530640
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:37.707
> 
> 标签：php, loops

我已经在网上搜索并观看了无尽的 You Tube 视频，但找不到答案。我发现的大部分内容都是针对更复杂的问题，而我只是一个新手。

我正在尝试学习 OOP。我拿了一个旧的 PHP 示例，并决定尝试将其转换为 oop。它只是一个带有计数器的循环。问题是我根本无法解决问题。

我原来的浏览页面是这样的......

```
<html>
<head><title>1 Loop</title></head>
<body>
<h2>1 Loop for age</h2>
<?php
$age=18;
while ($age <= 20)
{ 
echo ("You are " . $age . " years old. <br /> You are not old enough to enter. <br /><br />");
$age++;
}
echo ("You are " . $age . " You may enter!");
?>
</body>
</html> 
```

现在我正在尝试创建一个 class_lib 页面和一个 php 页面。这是我的课程页面：

```
<?php 
class person {

public $age; 

    function __construct($persons_age) { 
        $this->age = $persons_age;    
                   }

function get_age() {

while ($age <= 20)
{ 
echo ("You are " . $age . " years old. <br /> You are not old enough to enter. <br /><br />");
$age++;
}
echo ("You are " . $age . " You may enter!");

return $this->age;  
echo $this->age;   
                       }

         }
?> 
```

最后，我的 php 视图：

```
<html>
<head>
<title>1 Loop</title>
<?php include("class_lib.php"); ?>
</head>
<body>
<h2>1 Loop for age</h2>

<?php

$obj = new person(17);
echo $obj->get_age();

?>

</body>
</html> 
```

有人可以给我一些关于我哪里出错的指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:30:41.287

在您的`get_age()`函数中，您使用`$age`而不是使用`$this->age`. 后者使用类变量，而不是局部变量（不存在）。

删除`echo $this->age;`位于`return`函数 - 语句之后的行。因为您已经打印了年龄，所以它永远不会达到并且似乎没有任何价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:29:46.493

您的 get_age() 函数是错误的，您试图像访问局部变量一样访问 $age 变量，尽管它应该像类变量一样访问。试试这个：

```
function get_age() {

while ($this->age <= 20)
{ 
echo ("You are " . $this->age . " years old. <br /> You are not old enough to enter. <br /><br />");
$this->age++;
}
echo ("You are " . $this->age . " You may enter!");

return $this->age;   
                       } 
```

删除 echo 函数，它的最后一行，因为这将永远不会被调用，因为您在返回调用被解除后的任何代码。此外，您已经在 php 视图中回显了您返回的内容。

# php - PHP MYSQL 构建父模型

> ID：14530644
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:46.860
> 
> 标签：php, sql, codeigniter, inheritance, pdo

为子模型将继承的父模型编写通用插入函数是否常见和/或明智？我在一个非常简单的 CRUD 应用程序上使用 CodeIgniter\PHP，但这个问题确实与语言\框架无关。继承读取（选择）一个值的读取函数效果很好并且感觉正确：父模型

```
public function read($columnSelect,$columnCondition,$value) {
    $query = "SELECT $columnSelect FROM $tableName WHERE $columConditionn=?";
    $res = $this->db->query($query,$columnName);
    if ($res->result()->num_rows()>0)
        return $res->result();
    else 
        return false; 
```

这可以让您检索用户 ID、电子邮件、检查某些列的存在等，我认为这在我的大多数或所有模型中肯定会有用，因此在父模型中编写该函数是个好主意。所有更复杂的读取函数显然都特定于每个模型（例如，读取多个值的查询等） 现在插入呢？除了编写插入一个值、两个值等的函数或编写一个“丑陋”函数来获取参数数组并根据数组构建插入查询之外，我想不出任何通用插入，例如：

```
 public function genericInsert($columnList,$valueList) {

              $query = " INSERT INTO $tableName(
                        //now code that parses columnList and adds ','
                       //and then code that adds VALUES(..) in the same manner 
```

这对我来说绝对不是一种“模式”，而且感觉不对。我忽略了什么吗？你们为您的插入做了什么，它是特定于每个模型的，还是您试图找到一种从父模型继承的方法？此外，如果您愿意，您会发现自己在父模型中添加了哪些功能？（更新、删除等）？

到目前为止，这是我的父模型的样子：

```
class MY_Model extends CI_Model {
    public $tableName;

    public function __construct($tableName) {
        parent::__construct();
        $this->tableName = $tableName;

    }

    public function read($columnSelect,$columnCondition,$value) {
        $query = "SELECT $columnSelect FROM $tableName WHERE $columConditionn=?";
        $res = $this->db->query($query,$columnName);
        if ($res->result()->num_rows()>0)
            return $res->result();
        else 
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T21:05:34.967

只是一些建议，在创建这样的查询时要**非常小心。**我没有看到您的代码中发生任何转义，从而使您的代码为 SQL 注入打开。

例如，如果 $columnSelect 变为；

```
"x'; DROP TABLE members; --" 
```

您的查询变为：

```
"SELECT 'x'; DROP TABLE members; -- FROM $tableName WHERE $columConditionn=?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:50:10.750

讨厌回答我自己的问题，但这就是我正在寻找的 [http://thephpcode.com/blog/codeigniter/a-smart-codeigniter-model](http://thephpcode.com/blog/codeigniter/a-smart-codeigniter-model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:47:47.257

为什么要重新发明[轮子](http://ellislab.com/codeigniter/user-guide/database/active_record.html)？Codeigniter 的标准 db 类已经可以完成您想要创建的父模型所做的一切。如果您正在编写自己的数据库包装类而不使用 CI，那将是有意义的*，*但 CI 已经提供了这些功能，并且可以根据需要进行自定义/扩展。

# java - PreferenceActivity 和空 ImageView

> ID：14530650
> 
> 赞同：0
> 
> 时间：2013-01-25T21:25:56.283
> 
> 标签：java, android, android-activity, live-wallpaper

在我的 PreferenceActivity 活动中，我正在设置 ImageView 新位图，该位图在我的 Gallery 的 onActivityResult 方法中返回。但是当我旋转我的手机（三星 Galaxy Note 2）时，ImageView 变空了。在这种情况下如何正确重新初始化 ImageView ？

附言

onResume() 方法不适用于这种情况。

更具体地说，我用我的代码示例创建了一个主题，这里是[android image crop and wallpaper settings page](https://stackoverflow.com/questions/14487371/android-image-crop-and-wallpaper-settings-page)

你能告诉我有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:30:16.667

当您旋转时，您的活动会被销毁并重新创建。这意味着您的所有视图都被破坏并且所有变量都被清除。有两种方法可以解决这个问题：

1）在您的清单中，将 android:configChanges="orientation" 添加到您的活动中。这告诉 android，当您旋转时，您不希望对活动进行这种破坏行为。这可能足以自行修复它。

2）您需要将图像的文件名保存在变量中。然后您需要实现 onSaveInstanceState 和 onRestoreInstanceState 来保存该数据。然后，您需要在恢复变量时重置图像以使用该文件。

我建议方法一——它更容易。

# php - 如何将 MySQL 数据转换为正确的数组结构

> ID：14530651
> 
> 赞同：0
> 
> 时间：2013-01-25T21:26:01.250
> 
> 标签：php, javascript, mysql

我刚刚通过使用这样的硬编码数组完成了一个脚本的工作：

```
dataArray[0] =[50,10,0.3,0.25,50,"FFF",3];
dataArray[1] =[50,10,0.3,0.2,50,"FFF",3];
....
dataArray[5] =[50,20,0.5,0.7,120,"FF0",4]; 
```

我将 dataArray 的内容放入一个 db 表中，这样我就可以消除硬编码数组。
我正在使用 PHP 从 MySql 返回字符串中的数据，并且数据转储显示值的数量和值本身是正确的。

但是，我显然没有正确编码数据捕获，因为我没有得到像我的硬编码数组这样的数组（我需要维护我的硬编码数组的结构）。

这是数据库读取的代码：

```
function getSomeData(){ 
    $.ajax({
        type: "GET",
        url: "GetSomeData.php",
        dataType: "text",
        success:function(result){
            setSomeData(result);
        }
    });
}

var someDataArray = new Array();
function setSomeData(resultData){ 
    var resData = resultData.split('^');//record split  
    for(var i = 0; i < resData.length; i++){
        someDataArray[i] = resData[i].split('#');//field split
        someDataArray[i].pop();//removes array element occupied by '^'

        if(i == resData.length - 1){
            setDataArray();
        }
    }
} 
```

setDataArray() 中的这个 for 循环不会创建正确的数组结构，因为 someDataArray[x] 只是一个字符串：

```
var dataArray = new Array();
function setDataArray(){ 
    for(var i = 0; i < dataArray.length; i++){
        dataArray[i] = someDataArray[i];
    }
} 
```

所以我尝试将 someDataArray[x] 放在一个数组中，如下所示：

```
dataArray[i] = [someDataArray[i]]; 
```

但这也没有用。

我花了两天时间试图解决这个问题，阅读博客，尝试所有我能想到的东西，但没有运气。我认为这是一个简单的解决方案，但我就是不明白。

帮助？

* * *

* * *

**编辑：**

在了解了一些关于 JSON 和 json_encode 的知识之后，我现在可以运行我的脚本了。我想发布我这样做的方式，以承认我从 Pat Burke 那里得到了一些宝贵的建议。下面的代码可能不是他的想法，但我按摩它直到它起作用。但我真的不明白它为什么会起作用，所以我认为我必须对 json_encode 做更多的阅读。

请注意，在 ajax 调用中使用 dataType:"json" 会引发错误。

//GetSomeData.php

```
$return_arr = array();

$query1 = "SELECT * FROM mytable ORDER BY idx ASC";
$result = mysql_query($query1) or die('Query failed: ' . mysql_error());

while($row = mysql_fetch_array($result)){  
    $resultArray = array();
    $resultArray[] = (int)$row['dc'];
    $resultArray[] = (int)$row['smlspc'];
    $resultArray[] = (float)$row['sclx'];
    $resultArray[] = (float)$row['scly'];
    $resultArray[] = (int)$row['lgspc'];
    $resultArray[] = (int)$row['colr'];
    $resultArray[] = (int)$row['diam'];
    if(count($resultArray) ==  7){
        array_push($return_arr, $resultArray);
    }
}
echo json_encode($return_arr);

mysql_free_result($result); 
```

//新的js

```
function getSomeData(){
    resultData = new Array();
    $.ajax({
        type: "GET",
        url: "GetSomeData.php",
        dataType: "text",
        //dataType: "json", //using this threw an error (see below)
        success:function(result){
            resultData = $.parseJSON(result);
            $("#p1").append("resultData.length =" + resultData.length + "<br />");
            //resultData.length =114 (it's a string not an array)
            $("#p1").append("resultData =" + resultData + "<br />");
            //resultData =
            //[[50,10,0.375,0.25,50,0,0],
            //[50,10,0.3,0.2,50,0,1],
            //[50,10,0.6,0.4,0,0,2],
            //[50,0,0.4,0.4,0,0,3],
            //[50,0,0.4,0.4,0,0,3]]

            for(var i = 0; i < resultData.length; i++){
                $("#p1").append("resultData[" + i + "] =" + resultData[i] + "<br />");
                //data displayed with dataType: "text"
                //resultData[0] =50,10,0.375,0.25,50,0,0
                //resultData[1] =50,10,0.3,0.2,50,0,1
                //resultData[2] =50,10,0.6,0.4,0,0,2
                //resultData[3] =50,0,0.4,0.4,0,0,3
                //resultData[4] =50,0,0.4,0.4,0,0,3

                //data displayed with dataType: "json"
                    //resultData is null
            }
        },
        //this has no effect with either dataType: "text" or dataType: "json"
        contentType: 'application/json'
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:29:32.810

如果 someDataArray[i] 是一串用逗号分隔的值，你可以这样做

dataArray[i] = someDataArray[i].split(',')

# xcode - 如果出现警告，则阻止 Xcode 构建

> ID：14530660
> 
> 赞同：3
> 
> 时间：2013-01-25T21:26:43.520
> 
> 标签：xcode, xcode4.5, compiler-warnings, compiler-flags

我希望我的 Xcode 项目没有警告。我如何配置 Xcode，使其只要有警告就不会构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:28:46.777

`treat warnings as errors = YES`在构建设置中设置

![在此处输入图像描述](../Images/87383d1da4fc99c4c3d7ebd02c950399.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:28:39.227

您可以将`-Werr`开关添加到编译器标志（如果我没记错的话，在构建阶段选项卡上）。这将使编译器将所有警告都视为错误，并且每次警告都会阻塞。

# python - 打印 make_request 内容

> ID：14530663
> 
> 赞同：-1
> 
> 时间：2013-01-25T21:27:09.043
> 
> 标签：python, python-2.x

```
import urllib, urllib2, json
def make_request(method, base, path, params):
    if method == 'GET':
        return json.loads(urllib2.urlopen(base+path+"?"+urllib.urlencode(params)).read())
    elif method == 'POST':
        return json.loads(urllib2.urlopen(base+path, urllib.urlencode(params)).read())
api_key = "5f1d5cb35cac44d3b"
print make_request("GET", "https://indit.ca/api/", "v1/version", {"api_key": api_key}) 
```

这组代码返回应该返回版本和状态，如 {status: 'ok', version: '1.1.0'}

我需要添加什么代码来打印该响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:55:51.700

[如果没有完整的、其他工作的示例](http://sscce.org)（我什至无法解析 host ），很难说出问题所在`indit.ca`，但我可以解释如何自己调试它。逐步分解：

```
import urllib, urllib2, json
def make_request(method, base, path, params):
    if method == 'GET':
        url = base+path+"?"+urllib.urlencode(params)
        print 'url={}'.format(url)
        req = urllib2.urlopen(url)
        print 'req={}'.format(req)
        body = req.read()
        print 'body={}'.format(body)
        obj = json.loads(body)
        print 'obj={}'.format(obj)
        return obj
    elif method == 'POST':
        # You could do the same here, but your test only uses "GET"
        return json.loads(urllib2.urlopen(base+path, urllib.urlencode(params)).read())

api_key = "5f1d5cb35cac44d3b"
print make_request("GET", "https://indit.ca/api/", "v1/version", {"api_key": api_key}) 
```

现在你可以看到哪里出错了。它是否生成正确的 URL？（如果您将该 URL 粘贴到浏览器地址栏`wget`或`curl`命令行中会发生什么情况？）是否`urlopen`返回您期望的对象类型？身体看起来对吗？等等。

理想情况下，这将为您解决问题。如果没有，至少你会有一个更具体的问题要问，并且更有可能得到有用的答案。

# dotnetnuke - DotNetNuke 模块位置和窗格

> ID：14530666
> 
> 赞同：4
> 
> 时间：2013-01-25T21:27:37.763
> 
> 标签：dotnetnuke

我已经使用 DotNetNuke 几个星期了，但有一件事我无法弄清楚。如何找出模块当前所在的窗格。我主要使用版本 7，但我也尝试过版本 6。我在任何地方都找不到这些信息。

当页面在 7.x 中处于编辑模式时，可以通过将鼠标悬停在移动图标上来将模块移动到不同的窗格。DNN 显示一个窗格列表，当鼠标悬停在移动图标上时，模块可以在其中移动。DNN 知道模块当前位于哪个窗格，因为当前窗格已从列表中排除。但是，在模块的设置下，没有属性可以告诉您模块位于哪个窗格中。

这非常重要，因为大多数皮肤都有很多（20 多个）不同的窗格。通常窗格是可折叠的，仅根据页面上模块的位置很难判断模块在哪个窗格中。添加新模块时，需要了解一个模块的当前窗格才能获得正确的布局。

唯一有效的是使用消除过程。如果我可以找到哪个窗格不在我可以移动该模块的窗格列表中，我可以找出模块的当前窗格。如果您尝试通过页面管理管理屏幕使用模块，此方法既乏味又不可用。我是否错过了在哪里可以找到此属性或不可用。如果它不可用，那么是否有更好的方法来定位我丢失的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:54:25.887

布局模式应该向您显示窗格名称。如果您没有窗格名称，那么您使用的皮肤可能隐藏了窗格的名称，但我不知道他们为什么要这样做。

这是在布局模式下我的 MultiFunction 皮肤中的一个窗格的示例（可在 codeplex 上使用）

顶板

# java - 参数化通用 java 事件处理程序的正确方法

> ID：14530671
> 
> 赞同：4
> 
> 时间：2013-01-25T21:27:51.630
> 
> 标签：java, generics

我有一些代码如下（摘录）：

```
public interface Event<S> {
    S getSource();
}

public interface Subscriber<E> {
    void update(E event);
}

public interface EventPublisher<S, E extends Event<S>> {
    void addSubscription(S source, Subscriber<E> subscriber);
    void removeSubscription(S source, Subscriber<E> subscriber);
}

public class SubscriptionManager<S, E extends Event<S>> implements Subscriber<E>, EventPublisher<S, E> {
    ...
}

public class MyEvent implements Event<MyEventSource> {
    ...
} 
```

这一切都很好，但是，我的问题是当我尝试这样的事情时：

```
public class MyEventHandler {
    private final SubscriptionManager<Class<? extends Event<?>>, ? extends Event<?>> subscriptionManager = new SubscriptionManager<>();

    Subscriber<? extends Event<?>> subscriber = ...;
    subscriptionManager.addSubscription(MyEvent.class, subscriber); **// Compile error**
} 
```

我收到以下错误：

```
The method addSubscription(Class<? extends Event<?>>, Subscriber<capture#3-of ? extends Event<?>>) in the type SubscriptionManager<Class<? extends Event<?>>,capture#3-of ? extends Event<?>> is not applicable for the arguments (Class<MyEvent>, Subscriber<capture#5-of ? extends Event<?>>) 
```

谁能告诉我怎么了？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:09:15.153

老实说，我认为您的代码中存在一些设计错误。它几乎看起来像是一个完美设计的模式，但有些东西并没有加起来。您可能可以省略一半的泛型参数并使其更直接。

请考虑下面的代码。整个框架由单个参数参数化。一切都编译并且没有使用原始类型。另外，请注意 MyEvent 从未在框架定义中使用。是便利班。您可以安全地调用 subscriptionManager.update(new MyEvent()); 在您的代码中的某处。

更复杂的安排也是可能的，但我相信这是你需要的。请让我知道这是否适合您。

```
static interface Event<S> {
    S getSource();
}

static interface Subscriber<S> {
    void update(Event<S> event);
}

static interface EventPublisher<S> {
    void addSubscription(Class<S> sourceClass, Subscriber<S> subscriber);
    void removeSubscription(Class<S> sourceClass, Subscriber<S> subscriber);
}

static class SubscriptionManager<S> implements Subscriber<S>, EventPublisher<S> {
    public void addSubscription(Class<S> sourceClass, Subscriber<S> subscriber) {
    }
    public void removeSubscription(Class<S> sourceClass, Subscriber<S> subscriber) {
    }
    public void update(Event<S> event) {
    }
}

static class MyEvent implements Event<String> {
    public String getSource() {
        return null;
    }
}

static class MyEventHandler {
    private final SubscriptionManager<String> subscriptionManager = new SubscriptionManager<String>();
    public MyEventHandler() {
        Subscriber<String> subscriber = null;
        subscriptionManager.addSubscription(String.class, subscriber);
    }
} 
```

# ember.js - Ember pre4 - 嵌套路由

> ID：14530673
> 
> 赞同：5
> 
> 时间：2013-01-25T21:27:54.660
> 
> 标签：ember.js, ember-router

我试图了解如何使用嵌套路由。

我的代码：

```
App.Router.map(function() {
  this.route("site", { path: "/" });
  this.route("about", { path: "/about" });
  this.resource("team", {path:'/team'}, function(){
    this.resource('bob',{path:'/bob'});
  });
}); 
```

我正在尝试通过以下方式访问 Bob 页面：

```
{{#linkTo 'bob'}}bob{{/linkTo}} 
```

我错过了什么？

[jsbin](http://jsbin.com/ecujad/1/edit)

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T22:08:47.040

试试吧

```
{{#linkTo 'team.bob'}}bob{{/linkTo}} 
```

在您之间可以通过这种方式简化您的路由器映射 - 如果它与路由名称不同，您只需要指定路径。

```
App.Router.map(function() {
  this.route("site", { path: "/" });
  this.route("about");
  this.resource("team", function(){
    this.route('bob');
  });
}); 
```

更新

[在此处](http://jsbin.com/ecujad/18/edit)查看一个工作示例

总之，您需要提供 TeamBobRoute 的 renderTemplate 函数的实现，您可以在其中明确指定要呈现模板的位置`bob`。使用渲染选项`into`，您可以覆盖默认行为，渲染到父插座，并选择要渲染到的父模板

```
App.TeamBobRoute = Ember.Route.extend({
  renderTemplate:function(){
    this.render('bob',{
      into:'application',
    });
  }
});

<script type="text/x-handlebars" data-template-name="site-template">
  This is the site template
    {{#linkTo 'about'}}about{{/linkTo}}
     {{#linkTo 'team'}}team{{/linkTo}}
</script>

  <script type="text/x-handlebars" data-template-name="about">
  This is the about page
</script>

    <script type="text/x-handlebars" data-template-name="team">
  This is the team page
    {{#linkTo 'team.bob'}}bob{{/linkTo}}
</script>

  <script type="text/x-handlebars" data-template-name="bob">
  This is the bob page
</script>

<script type="text/x-handlebars">
  This is the application template
  {{outlet}}
</script> 
```

仅供参考，渲染方法支持以下选项：`into, outlet and controller`如下所述。

> `PostRoute`由路由器定义的名称是`post`。
> 
> 默认情况下，渲染将：
> 
> *   渲染`post`模板
> *   使用`post`视图 ( `PostView`) 进行事件处理（如果存在）
> *   和`post`控制器 ( `PostController`)，如果存在
> *   进入模板的`main`出口`application`
> 
> 您可以覆盖此行为：

```
App.PostRoute = App.Route.extend({
  renderTemplate: function() {
    this.render('myPost', {   // the template to render
      into: 'index',          // the template to render into
      outlet: 'detail',       // the name of the outlet in that template
      controller: 'blogPost'  // the controller to use for the template
    });
  }
}); 
```

如果您的应用程序模板中有一个命名模板，那么您将以这种方式定位它

```
App.TeamBobRoute = Ember.Route.extend({
  renderTemplate:function(){
    this.render('bob',{
      into:'application',
      outlet:'team-member',
    });
  }
});

<script type="text/x-handlebars">
  This is the application template
  {{outlet 'team-member'}}
  {{outlet}}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T22:28:16.840

您错过了团队页面中的出口。模板应如下所示。

```
<script type="text/x-handlebars" data-template-name="team">
   This is the team page
   {{#linkTo 'bob'}}bob{{/linkTo}}
   {{outlet}}
</script> 
```

每条路由都被渲染到它的父模板的出口中。

因此，当您进入“团队”时，“团队”将呈现到“应用程序”出口中。

When you go to "bob", the "bob" template is rendered into the "team" outlet.

This can be overridden, but is the default behavior.

Also, each parent resources gives you two model/controller/view/template sets. So when you define:

```
this.resource('team',{path:'/team'}); 
```

You get the "team" template and the "team-index" template.

the "team" template is where stuff that is shared between child routes goes (this is why it needs to have the outlet) and the "team-index" template is where stuff that is specific to your "team index" would go.

# tsql - PLSQL 到 TSQL 的转换

> ID：14530681
> 
> 赞同：0
> 
> 时间：2013-01-25T21:28:41.990
> 
> 标签：tsql, plsql

我是在 SQL Server 方面没有经验的 Oracle 人，并且已被聘为在 SQL Server 中的工作制作 ERD/DDL。我已经完成了 ERD 并提交了 DDL 语句，但现在我还被要求执行应用程序逻辑。我喜欢在 PL/SQL 中做应用程序逻辑，并且认为无需太多学习就可以将逻辑转换为 TSQL 过程对我来说并不难。这是一个准确的信念吗？

我绝对不知道 TSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:35:53.820

TSQL 并不难学。如果你认真对待它，你应该在一天内加快速度。只需学习基础知识，然后学习差异。在网上找了一些教程，做一些练习。

你可以关注这些以及更多

*   条件语句 - IF、循环
*   光标
*   变量声明
*   赋值语句
*   存储过程
*   职能
*   和更多

就像您可以进行全面搜索一样 - TSQL vs PL/SQL，或 PL/SQL 和 TSQL 之间的差异

# android - 是否有处理 Android XML 的 emacs 模式？

> ID：14530689
> 
> 赞同：1
> 
> 时间：2013-01-25T21:29:23.687
> 
> 标签：android, xml, emacs, apk

如果我用 Emacs 打开一个 .apk 文件，它会很好地显示存档，但如果我选择 AndroidManifest.xml 文件，我得到的只是 gobbledegook，因为 XML 是 Android 的二进制 XML 编码。

我的 google-fu 未能找到理解 Android 二进制 XML 的 emacs 模式。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T23:23:48.890

我不相信任何 emacs XML 模式会直接解码二进制 XML 格式。但是，这里有一个小的 perl 脚本可以将二进制 XML 转换为可读的 XML：[http ://code.google.com/p/android-random/source/browse/trunk/axml2xml/axml2xml.pl](http://code.google.com/p/android-random/source/browse/trunk/axml2xml/axml2xml.pl)

在 emacs 中加载二进制 XML 时，我选择整个缓冲区，然后运行“shell-command-on-region”，指定 axml2xml.pl 作为命令。它很笨拙，但它可以工作，至少可以阅读而不是写作。

# android - 对话框中 FindViewById 处的 Android java.lang.NullPointerException

> ID：14530690
> 
> 赞同：1
> 
> 时间：2013-01-25T21:29:26.913
> 
> 标签：android, nullpointerexception

我看到了许多与此类似的问题，但仍然无法解决我的问题。

这是日志：

```
01-26 00:30:49.714: ERROR/AndroidRuntime(616): FATAL EXCEPTION: main
        java.lang.NullPointerException
        at com.app.newItemList.onDialogPositiveClick(newItemList.java:39)
        at com.app.itemDialog$2.onClick(itemDialog.java:39)
        at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method) 
```

以下是相关的 Java 文件：

```
 package com.app;

import android.app.DialogFragment;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;

import java.util.ArrayList;

/**
 * Created with IntelliJ IDEA.
 * User: Aljarhi
 * Date: 1/24/13
 * Time: 10:22 PM
 * To change this template use File | Settings | File Templates.
 */

public class newItemList extends FragmentActivity
        implements itemDialog.NoticeDialogListener{

    public void showNoticeDialog() {
        // Create an instance of the dialog fragment and show it
        DialogFragment dialog = new itemDialog();
        dialog.show(getFragmentManager(), "NoticeDialogFragment");
    }

    // The dialog fragment receives a reference to this Activity through the
    // Fragment.onAttach() callback, which it uses to call the following methods
    // defined by the NoticeDialogFragment.NoticeDialogListener interface
    @Override
    public void onDialogPositiveClick(DialogInterface dialog, int id) {
        // User touched the dialog's positive button
        EditText et = (EditText) findViewById(R.id.editText1);
        adapter.add(et.getText().toString());
    }

    @Override
    public void onDialogNegativeClick(DialogInterface dialog, int id) {
        // User touched the dialog's negative button
        dialog.cancel();
    }

    ArrayAdapter<String> adapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_list);

        ListView lvc = (ListView) findViewById(R.id.listView3);

        adapter = new ArrayAdapter<String>(this, R.id.textView2, new ArrayList<String>());
        lvc.setAdapter(adapter);
    }

    public void addItem(View clickedButton)
    {
        showNoticeDialog();
    }
} 
```

* * *

```
package com.app;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.widget.EditText;

/**
 * Created with IntelliJ IDEA.
 * User: Aljarhi
 * Date: 1/25/13
 * Time: 3:11 PM
 * To change this template use File | Settings | File Templates.
 */
public class itemDialog extends DialogFragment
{

    public interface NoticeDialogListener {
        public void onDialogPositiveClick(DialogInterface dialog, int id);
        public void onDialogNegativeClick(DialogInterface dialog, int id);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.dialog_item, null))
                // Add action buttons
                .setPositiveButton("ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        mListener.onDialogPositiveClick(dialog, id);
                    }
                })
                .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        mListener.onDialogNegativeClick(dialog, id);
                    }
                });
        return builder.create();
    }

    // Use this instance of the interface to deliver action events
    NoticeDialogListener mListener;

    // Override the Fragment.onAttach() method to instantiate the NoticeDialogListener
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        // Verify that the host activity implements the callback interface
        try {
            // Instantiate the NoticeDialogListener so we can send events to the host
            mListener = (NoticeDialogListener) activity;
        } catch (ClassCastException e) {
            // The activity doesn't implement the interface, throw exception
            throw new ClassCastException(activity.toString()
                    + " must implement NoticeDialogListener");
        }
    }
} 
```

这是相关的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" android:orientation="vertical" android:gravity="center_horizontal|top">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Mezzo List"
            android:id="@+id/textView2" android:layout_gravity="center_horizontal|top"/>
    <ListView
            android:layout_width="wrap_content"
            android:layout_height="263dp"
            android:id="@+id/listView3" android:layout_gravity="center_horizontal|top" android:choiceMode="none"/>

    <Button
            android:layout_width="81dp"
            android:layout_height="wrap_content"
            android:text="Add Item"
            android:id="@+id/button4" android:onClick="addItem"/>

</LinearLayout> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:text="Mezzo List"
            android:id="@+id/textView4" android:layout_gravity="center"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Enter Item Name:"
            android:id="@+id/textView5" android:layout_gravity="center" android:textSize="20dp"/>
    <EditText
            android:layout_width="205dp"
            android:layout_height="wrap_content"
            android:text="New EditText"
            android:id="@+id/editText1" android:layout_gravity="center" android:inputType="text"
            android:hint="Item Name"
            />
</LinearLayout> 
```

我发现问题出在无法识别的 edittext1 id 或作为 edittext 中，尽管它出现在选项列表中并且我在那里选择了它。我正在使用 intellij Idea 12.0.2。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:55:53.857

实际上，我找到了解决问题的方法。

为了让 findViewById 正常工作，您必须首先选择膨胀的视图或首先将其内容设置为 corresondong xml 文件的视图。所以，这里是解决方案：

```
final View textEntryView = inflater.inflate(R.layout.dialog_item, null);
EditText et = (EditText) textEntryView.findViewById(R.id.editText1); 
```

感谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:11:31.820

在这一行：

```
adapter = new ArrayAdapter<String>(this, R.id.textView2, new ArrayList<String>()); 
```

你可能不想`R.id.textView2`在那里。您通常希望传入一个包含 textview 的布局（带有另一个 id 参数）。例如

```
adapter = new ArrayAdapter<String>(this, R.layout.somelayout, R.id.someTextViewInThatLayout, new ArrayList<String>()); 
```

# c# - Win8 RT Metro Style App HTTP 响应异步？

> ID：14530696
> 
> 赞同：0
> 
> 时间：2013-01-25T21:29:42.233
> 
> 标签：c#, windows-8, microsoft-metro

我在 WPF 中为我的家庭自动化系统创建了一个 C# 应用程序。我想将其转换为 win8 Modern UI 应用程序只是为了好玩。我不是程序员，甚至不是接近...所以任何指针将不胜感激。

这是我检查其中一台设备状态的旧代码。以下仅检查指示灯的状态代码。1 表示灯打开... 0 表示关闭。

```
 //InitializeComponent();
        WebRequest MasterbedRoomrequest = WebRequest.Create("http://10.10.1.100:3480/data_request?id=lu_variableget&serviceId=urn:upnp-org:serviceId:SwitchPower1&Variable=Status&DeviceNum=7");
        HttpWebResponse MasterbedRoomWebresponse = (HttpWebResponse)MasterbedRoomrequest.GetResponse();
        Stream MasterbedRoomdataStream = MasterbedRoomWebresponse.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader readerMasterBedRoom = new StreamReader(MasterbedRoomdataStream);
        // Read the content.
        string responseFromServerMasterbedRoomdata = readerMasterBedRoom.ReadToEnd();
        // Display the content.
        //Console.WriteLine(responseFromServer);
        if (responseFromServerMasterbedRoomdata == "1")
        {
            MasterBedRoomLamp.Checked = true;
        }
        // Cleanup the streams and the response.
        readerMasterBedRoom.Close();
        MasterbedRoomdataStream.Close();
        MasterbedRoomWebresponse.Close(); 
```

我想在现代 UI 应用程序中做同样的事情。根据我在网上阅读的内容......似乎推荐的方法是使用 HTTP 的 ASYNC 功能？当我将上面的代码放入现代 UI VS 模板之一并尝试编译时，它不起作用。

我见过几个例子，但它们似乎都比我预期的要复杂。

问题。完成上述任务最直接的方法是什么？越短越好。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:01:27.657

这会有点不同。

```
public async Task<bool> IsLampOn(){
    string responseData = await GetDataFromUrl("http://10.10.1.100:3480/data_request?id=lu_variableget&serviceId=urn:upnp-org:serviceId:SwitchPower1&Variable=Status&DeviceNum=7");
    return (responseData == "1")
}

public async Task<string> GetDataFromUrl(string url){
    HttpClient http = new HttpClient();
    HttpResponseMessage response = await(http.GetAsync(new Uri(url)));
    response.EnsureSuccessStatusCode();
    return await response.Content.ReadAsStringAsync();
} 
```

本质上，您只需致电

```
bool val = await IsLampOn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:55:20.767

使用[HttpClient 类](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28VS.110%29.aspx)。这是一个[简单的例子](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)。您可以避免使用[GetStringAsync](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.getstringasync.aspx)进行流工作。

# android - Android maps v2, polygon error

> ID：14530701
> 
> 赞同：0
> 
> 时间：2013-01-25T21:30:04.673
> 
> 标签：android, polygon, indexoutofboundsexception, android-maps-v2

I am having trouble adding my polygon with holes to my google map.

It was working with polylines (and I think once with polygon) but now it doesn't, whether the holes logic is there or not.

Here is all the code and it happens after the map is setup.

> ```
> 01-25 16:22:53.921: E/AndroidRuntime(22986): Caused by: java.lang.IndexOutOfBoundsException:     Invalid index 0, size is 0
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at java.util.ArrayList.get(ArrayList.java:311)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at maps.y.bb.a(Unknown Source)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at maps.y.bb.c(Unknown Source)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at maps.y.bg.a(Unknown Source)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at maps.y.bg.b(Unknown Source)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at maps.y.ae.addPolygon(Unknown Source)
> 01-25 16:22:53.921: E/AndroidRuntime(22986):  at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:152) 
> ```

```
try {

        JSONObject boundaries = new JSONObject("{\"type\":\"MultiPolygon\",\"coordinates\":[[[[-80.735555859,35.0606584407],[-80.7297754512,35.0651878022],[-80.729139294,35.0656818503],[-80.7289250745,35.065900852],[-80.7286221912,35.0660671391],[-80.7282894137,35.066312794],[-80.7275260823,35.0669496861],[-80.7230724393,35.0660242895],[-80.7227950616,35.0661147593],[-80.7218902721,35.0659176785],[-80.722176045,35.0657643995],[-80.720961508,35.0641575183],[-80.7209758716,35.0629317403],[-80.7272283465,35.0628131662],[-80.726641114,35.061423483],[-80.7265854346,35.061015353],[-80.7266510423,35.0606220672],[-80.7235677631,35.0606937582],[-80.7234837301,35.0595787025],[-80.7255096391,35.0597210677],[-80.7270440474,35.0598206983],[-80.7271985668,35.0591829945],[-80.7274183452,35.0587709241],[-80.7277152978,35.0585124776],[-80.7284566533,35.0579768923],[-80.727780986,35.0597106844],[-80.7299847264,35.0599581722],[-80.735555859,35.0606584407]]],[[[-80.7200742118,35.0674134672],[-80.7186999337,35.0705562642],[-80.7164176998,35.069933693],[-80.7150980153,35.0696170679],[-80.7157433595,35.0657510316],[-80.7152719628,35.0657629702],[-80.7150541804,35.0646523049],[-80.7155138273,35.0644640927],[-80.7169133321,35.0639508082],[-80.7172970965,35.0637601058],[-80.7175728371,35.0635834077],[-80.7183107407,35.0631329539],[-80.7184931359,35.0630502037],[-80.7186006099,35.0648619253],[-80.7185879713,35.0648540961],[-80.7186006849,35.0648654865],[-80.7200742118,35.0674134672]]],[[[-80.6892017218,35.0865938467],[-80.6836074596,35.0872774004],[-80.6836037958,35.0872706912],[-80.683607554,35.087262573],[-80.6838084759,35.0843125317],[-80.6838093023,35.0838010413],[-80.6907731212,35.082005808],[-80.6906868717,35.0819147663],[-80.6914540109,35.0819508048],[-80.6923350028,35.0819883607],[-80.6922022291,35.0818062139],[-80.6906081064,35.081775524],[-80.6892627084,35.0801975391],[-80.6880259464,35.0787334166],[-80.6876700467,35.0784015634],[-80.6863873389,35.0787500748],[-80.6833236198,35.0795693995],[-80.682052189,35.0799145893],[-80.6813631325,35.078511382],[-80.6824880399,35.0773168152],[-80.6831273312,35.0766747942],[-80.6839730169,35.0757398452],[-80.6847449558,35.0749088381],[-80.6851125671,35.0745232176],[-80.6868562873,35.0762921663],[-80.6869385663,35.0762348787],[-80.6880385407,35.075857727],[-80.6893815702,35.0756767665],[-80.6893041844,35.0757870067],[-80.6895418941,35.0757244239],[-80.6910892479,35.0753347457],[-80.6953548167,35.074308825],[-80.6947217548,35.0726824065],[-80.6938249008,35.0708171642],[-80.6928755869,35.0707476456],[-80.6926063661,35.0700471051],[-80.6965836865,35.0702385147],[-80.6981317926,35.0702759198],[-80.6993134907,35.0702479401],[-80.699303851,35.0720088657],[-80.7044604692,35.0700231034],[-80.7059676219,35.0694258442],[-80.7064318242,35.070114517],[-80.7062358632,35.0718825479],[-80.7070931359,35.0713564697],[-80.7099609034,35.0704230355],[-80.7099936802,35.0705152827],[-80.7100080651,35.0705503962],[-80.7099495884,35.0705908523],[-80.7100187353,35.0707057082],[-80.7100167527,35.0707880413],[-80.7100972756,35.0709149296],[-80.7101379822,35.0710881063],[-80.7102138409,35.0711693359],[-80.7101846935,35.071247158],[-80.7102411258,35.0714097659],[-80.7103023493,35.0715003479],[-80.710389265,35.0715783724],[-80.707476454,35.073601],[-80.7077178913,35.0739755754],[-80.7087496883,35.0733147365],[-80.7090951077,35.0738737844],[-80.7115336827,35.0724004396],[-80.7115289543,35.0723517336],[-80.7119904436,35.0722567899],[-80.7119402102,35.0721599562],[-80.7120096157,35.0721101991],[-80.712379284,35.0734705994],[-80.71269176,35.0745787999],[-80.7130325591,35.0757993846],[-80.710920954,35.0773077532],[-80.7093642515,35.0784028049],[-80.7099841194,35.080555276],[-80.7091997899,35.0811729934],[-80.7086062698,35.0816605739],[-80.706153571,35.0835724102],[-80.7052694052,35.0842067533],[-80.7034908473,35.0856980884],[-80.7023961873,35.0865548562],[-80.7013399763,35.087478134],[-80.7000482398,35.0884900711],[-80.6986890109,35.0896462123],[-80.6963494752,35.0914593015],[-80.6948488535,35.0925786583],[-80.694848095,35.0926560399],[-80.6944683903,35.0943039003],[-80.6928489794,35.0942189034],[-80.6912333698,35.0954877374],[-80.6814301091,35.1033733546],[-80.6759910014,35.1036684268],[-80.676284034,35.104210002],[-80.6762103702,35.1042354101],[-80.67719044,35.1057185102],[-80.6775701585,35.1063259403],[-80.6754613322,35.1076781632],[-80.6748644376,35.1080552826],[-80.673594298,35.1090666249],[-80.6719077296,35.1103946423],[-80.6703790777,35.1116472926],[-80.6699256895,35.1112450928],[-80.6696705955,35.112193583],[-80.6690859143,35.1120827809],[-80.668908562,35.1126613551],[-80.6680473027,35.1124955642],[-80.6678832061,35.1131327573],[-80.6677639689,35.1131069686],[-80.667556535,35.1131220256],[-80.667453441,35.1131600278],[-80.666459359,35.1137102408],[-80.6663306762,35.1137668849],[-80.6660559502,35.1139383296],[-80.6655854342,35.1143319477],[-80.6654890957,35.1145192204],[-80.6650770434,35.1148693555],[-80.6647153446,35.1145700964],[-80.6636426861,35.115071222],[-80.6625216752,35.1149015024],[-80.6626687137,35.1153811044],[-80.6598474402,35.1158375148],[-80.6596848129,35.1158671841],[-80.6595513601,35.1158720659],[-80.6594381864,35.1159620202],[-80.6591858843,35.1160534039],[-80.6590844379,35.1160796643],[-80.6590512663,35.1164550566],[-80.6589623174,35.1175536532],[-80.6576318529,35.1196294949],[-80.65837002,35.1201710997],[-80.6586751564,35.1203985787],[-80.6591171649,35.1207887831],[-80.6573152693,35.1223071643],[-80.6559980189,35.1233951662],[-80.655926363,35.1229724408],[-80.6543961779,35.1236243941],[-80.653936493,35.1238257769],[-80.6544684451,35.1244433862],[-80.6537987198,35.1249241966],[-80.6545133901,35.1253785865],[-80.6544374132,35.1258399141],[-80.6545245198,35.1264758071],[-80.6545057883,35.1268327097],[-80.6544390845,35.1272024624],[-80.6543245293,35.1274082647],[-80.6540923877,35.1278534401],[-80.6521348557,35.1303096848],[-80.6519784991,35.1304672832],[-80.6515332991,35.1306532164],[-80.6508635639,35.1305617764],[-80.6510742908,35.1297907369],[-80.6492576629,35.1296254181],[-80.6491159372,35.1303783613],[-80.6489262629,35.1303565644],[-80.6486160268,35.130427859],[-80.6482488539,35.1304359167],[-80.6480056476,35.1303355933],[-80.6478007046,35.1302926647],[-80.6479423629,35.1316106271],[-80.6479541402,35.1320097873],[-80.6480408806,35.1328133425],[-80.6482554664,35.1346180295],[-80.6470441676,35.1358233647],[-80.6463329014,35.1364335631],[-80.6451999232,35.1372933599],[-80.6440387412,35.1380437921],[-80.6436400263,35.1383296551],[-80.6429905796,35.1386716625],[-80.6424832884,35.1389336953],[-80.6410595471,35.1395474472],[-80.6390951481,35.1404032318],[-80.636846804,35.1396868888],[-80.6369454847,35.1399812312],[-80.6366720154,35.1402226986],[-80.6364154014,35.1400097489],[-80.6359141204,35.1398092553],[-80.6349108935,35.1419657481],[-80.6331199086,35.142221632],[-80.6307550215,35.1425431512],[-80.6271192845,35.1438968064],[-80.6262975903,35.1445632386],[-80.6257007584,35.1442237695],[-80.6250678081,35.1437476136],[-80.6253059934,35.1458294043],[-80.6247483725,35.1459679766],[-80.6181058949,35.1473007779],[-80.616714438,35.1445058826],[-80.6169541909,35.1440576332],[-80.6164045472,35.1440111621],[-80.6154895842,35.1439339543],[-80.6131068476,35.1437341183],[-80.6101234567,35.1435605288],[-80.6092556672,35.1471629009],[-80.6091536233,35.1476336869],[-80.6090208182,35.1480557266],[-80.6089834481,35.1484132505],[-80.6081508699,35.147973195],[-80.6075467125,35.1476386645],[-80.6048243778,35.1465908449],[-80.6047790672,35.1463628297],[-80.604830461,35.1461457235],[-80.6045458635,35.1452134138],[-80.6042387892,35.144178329],[-80.6041107731,35.143707553],[-80.6039535639,35.1434505408],[-80.603738135,35.1432522167],[-80.603508526,35.1430876116],[-80.6032792774,35.14294129],[-80.6030681875,35.1414535074],[-80.6054221338,35.1412332319],[-80.6057067049,35.1407021431],[-80.6060043535,35.1399879499],[-80.6068787989,35.1389795543],[-80.6071862095,35.1378201868],[-80.6074794177,35.1372584603],[-80.6077353061,35.1371256059],[-80.6070479543,35.1364644933],[-80.6068909373,35.1363668733],[-80.6057893033,35.1352127248],[-80.6029728961,35.1325801749],[-80.602705096,35.1323344583],[-80.6021254634,35.1316608107],[-80.6020665308,35.1314067844],[-80.6018804088,35.1312394044],[-80.6040100378,35.130098547],[-80.6038938339,35.1300364902],[-80.6040276017,35.1277847053],[-80.6040878524,35.1263207538],[-80.6052310561,35.1263794037],[-80.606053778,35.1264836272],[-80.606318985,35.1263856062],[-80.6066873314,35.1262496344],[-80.6080065615,35.1266028432],[-80.6086022449,35.1267223182],[-80.6094835494,35.1269653902],[-80.6102056703,35.1270000828],[-80.610401148,35.1269974774],[-80.6104557288,35.1270299854],[-80.6104888856,35.1270018473],[-80.6107224002,35.1268768693],[-80.6107866673,35.1267662261],[-80.6108596867,35.1266590058],[-80.6113987261,35.1263618544],[-80.61182941,35.1262583205],[-80.6119618128,35.1261346889],[-80.6120228691,35.1258125932],[-80.6122644334,35.1257539767],[-80.6125437509,35.1258998112],[-80.6130321056,35.1258877032],[-80.6132009225,35.1257940021],[-80.6133242036,35.1256490887],[-80.6131832249,35.1254619803],[-80.6128174025,35.1251620408],[-80.6126767098,35.1251225311],[-80.61220444,35.1251066773],[-80.6119187772,35.1246396464],[-80.6124097945,35.1242398026],[-80.6129591106,35.1240607512],[-80.6137266923,35.123668288],[-80.6162220971,35.1250982529],[-80.6178098333,35.1260219576],[-80.6183533599,35.1251794602],[-80.6190645012,35.125607648],[-80.6197124513,35.1246240414],[-80.6206533288,35.1234537047],[-80.620796212,35.1235768684],[-80.6209232451,35.123804601],[-80.6211312179,35.1240052236],[-80.6214593422,35.1243181034],[-80.6216179279,35.1245991957],[-80.6218216172,35.1247671638],[-80.6222746458,35.1253097778],[-80.6222800161,35.1242239969],[-80.6247588564,35.1264784305],[-80.6286342888,35.129783087],[-80.629231252,35.1303012757],[-80.6285596039,35.1307700951],[-80.629232723,35.1317248641],[-80.6300965542,35.1314251678],[-80.6304259751,35.1313764086],[-80.631720515,35.1303618525],[-80.6263403428,35.1266676468],[-80.6250187491,35.1266632718],[-80.6248402938,35.1265050315],[-80.6255871257,35.1261717858],[-80.6258011083,35.1259991058],[-80.6260958141,35.1259009705],[-80.6271099154,35.1265286316],[-80.6277576304,35.1267371894],[-80.628316877,35.1267185756],[-80.6287156765,35.1267685935],[-80.628839722,35.1269015345],[-80.6288131356,35.1265844815],[-80.6292198462,35.1263869942],[-80.6327543271,35.1291236937],[-80.6335897433,35.1277441849],[-80.6345684319,35.1262770172],[-80.634765339,35.1260071027],[-80.6349591975,35.1260532515],[-80.6352616501,35.125409026],[-80.6385080022,35.1189031646],[-80.6402014828,35.1201713528],[-80.6424907125,35.1189716885],[-80.6435776766,35.1197556695],[-80.6443066356,35.1206406618],[-80.6459343705,35.1196718123],[-80.6467364979,35.1187512376],[-80.6482785997,35.1170384237],[-80.6491544947,35.1161394259],[-80.6502687258,35.1151030423],[-80.6486109449,35.1135928039],[-80.6484216813,35.113580595],[-80.6474325392,35.1127361549],[-80.6494051931,35.1112923165],[-80.6458633831,35.1085714216],[-80.6469791865,35.1076686943],[-80.6478608876,35.1085441878],[-80.6509350524,35.106571857],[-80.6508577061,35.1023054281],[-80.6524447116,35.1040355329],[-80.6527295103,35.1040770564],[-80.6529680841,35.1043030671],[-80.6536734734,35.104027156],[-80.6538165704,35.1040076119],[-80.6540852486,35.1039179738],[-80.6543176756,35.1038422393],[-80.6544863377,35.1037454328],[-80.6546198957,35.1037466516],[-80.6550585129,35.1034266708],[-80.6552715344,35.1038351586],[-80.655424781,35.1034040908],[-80.6558537943,35.103257686],[-80.6531375935,35.1002329504],[-80.6558241711,35.0986947604],[-80.6582037743,35.1015391579],[-80.659808642,35.1004412445],[-80.6604638868,35.1000146248],[-80.6606004278,35.0987153267],[-80.6620809142,35.0988085121],[-80.6599137372,35.0940235148],[-80.6616431043,35.0941032774],[-80.6645679109,35.0962645546],[-80.6652546605,35.0955771128],[-80.6651360483,35.0954973917],[-80.6660875657,35.0945005986],[-80.6662583415,35.0944908467],[-80.66624406,35.0942321831],[-80.6658371196,35.0941342526],[-80.6653452092,35.0938576804],[-80.6640449178,35.0927389252],[-80.6647990725,35.0926545708],[-80.6653905431,35.0925354757],[-80.6652608264,35.0923523645],[-80.6644112773,35.0894675908],[-80.6643501956,35.0891772331],[-80.663760707,35.0893924445],[-80.6634576712,35.0890933822],[-80.6618944362,35.0896548148],[-80.6618970647,35.0889003845],[-80.6645597387,35.0875398247],[-80.66420213,35.087211932],[-80.6691760904,35.0847484365],[-80.6696726507,35.085442728],[-80.6709826768,35.0848255285],[-80.672128557,35.0884928908],[-80.6724163066,35.0893616379],[-80.6725687255,35.0897737047],[-80.6730024371,35.0903002109],[-80.6737959865,35.0908217289],[-80.6745594276,35.0889991181],[-80.6743168505,35.0890172734],[-80.6734985388,35.08641042],[-80.6726886162,35.0842102278],[-80.6727787015,35.0841460367],[-80.6728751551,35.0840705594],[-80.6731138588,35.0838863072],[-80.6740783858,35.0830963554],[-80.6748141873,35.0825610337],[-80.677037018,35.0843348163],[-80.6780681496,35.0832850466],[-80.679427234,35.0850559943],[-80.6802450053,35.0858803711],[-80.6823594712,35.0876417449],[-80.6826231292,35.0875476273],[-80.6835960451,35.0872564961],[-80.6836037958,35.0872706912],[-80.6836002885,35.0872782686],[-80.6836074596,35.0872774004],[-80.6836078757,35.0872781628],[-80.6848441775,35.088901394],[-80.684475276,35.0892277736],[-80.684845611,35.0895220099],[-80.6854648603,35.0890081273],[-80.6857619008,35.0892441263],[-80.686209588,35.08960901],[-80.6867264599,35.090016589],[-80.6867937079,35.0899657491],[-80.6860720548,35.0893801412],[-80.6864075202,35.08908853],[-80.6872383391,35.0885311397],[-80.6880120798,35.0892501202],[-80.6882381911,35.0891752272],[-80.68741128,35.0884538733],[-80.6873768186,35.0884387606],[-80.6877818432,35.0882085487],[-80.688163848,35.0879661825],[-80.6891520051,35.087579713],[-80.6892316314,35.0877305668],[-80.6895925319,35.0876102323],[-80.6892017218,35.0865938467]],[[-80.6704378421,35.0948125638],[-80.6696999375,35.0941296997],[-80.669010735,35.0946183779],[-80.6690369083,35.0947730874],[-80.6689746217,35.0948393319],[-80.6689111304,35.0948467468],[-80.6688483088,35.0948868457],[-80.6679248845,35.0960242033],[-80.6690029079,35.0966108409],[-80.6704378421,35.0948125638]],[[-80.6536903079,35.1210434418],[-80.6531144541,35.1204897415],[-80.6542740949,35.1190577051],[-80.6552325817,35.1176718766],[-80.6568109412,35.1175709856],[-80.6567556021,35.1170382979],[-80.6576835964,35.1166994032],[-80.6579848071,35.116552001],[-80.6586091661,35.1162416525],[-80.6587330338,35.1161302139],[-80.659113413,35.1159148453],[-80.6592276846,35.1142285276],[-80.6572502348,35.1148905045],[-80.659189946,35.112373381],[-80.6573293287,35.1114710906],[-80.654794954,35.1139719152],[-80.6512735975,35.1176337593],[-80.6486244515,35.1203557654],[-80.6486476433,35.1215030273],[-80.6489461204,35.123037198],[-80.6498235911,35.1223415542],[-80.6526486774,35.1241726121],[-80.6523421052,35.1246066092],[-80.6528906852,35.1249466072],[-80.6532924569,35.1244503397],[-80.65281726,35.1240697132],[-80.6520579506,35.1235832327],[-80.6514432342,35.1230763396],[-80.6536903079,35.1210434418]],[[-80.617690965,35.1427690358],[-80.6227869511,35.1416408722],[-80.6214124412,35.1407188194],[-80.6209892347,35.1385146979],[-80.6203344141,35.1350671264],[-80.6216818774,35.1351907031],[-80.6227009082,35.1361402694],[-80.6238353171,35.1359550455],[-80.6237929422,35.1355589835],[-80.6207782633,35.1331063498],[-80.622164895,35.1299996851],[-80.6221723268,35.1286397069],[-80.6212307912,35.1281140592],[-80.6178975387,35.1321817104],[-80.6162974308,35.136707716],[-80.6175013245,35.1417628101],[-80.617690965,35.1427690358]],[[-80.6172865761,35.1420216347],[-80.6172860889,35.1420203672],[-80.6172853756,35.1420203768],[-80.6172865761,35.1420216347]]]]}");
        JSONArray coordinates = boundaries.getJSONArray("coordinates");

        for(int i = 0; i < coordinates.length(); i++){
            try {
                JSONArray currentPerimeter = coordinates.getJSONArray(i).getJSONArray(0);

                ArrayList<LatLng> holesArray = new ArrayList<LatLng>();
                ArrayList<ArrayList<LatLng>> holesHolder = new ArrayList<ArrayList<LatLng>>();
                ArrayList<LatLng> mainArray = new ArrayList<LatLng>();

                for(int j = 0; j < currentPerimeter.length(); j++){ //this just adds outlines and outlying objects, but no holes.
                    mainArray.add(new LatLng(currentPerimeter.getJSONArray(j).getDouble(1), currentPerimeter.getJSONArray(j).getDouble(0)));

                }
                JSONArray holes = coordinates.getJSONArray(i);
                if(holes.length()>0)
                {

                    //new for loop to make holes
                    for(int j = 1; j < holes.length(); j++)
                    {
                        holesArray.add(new LatLng(holes.getJSONArray(j).getDouble(1), holes.getJSONArray(j).getDouble(0)));
                    }
                }

                mMap.addPolygon(new PolygonOptions().strokeWidth(3).strokeColor(0xFFEE8888).addAll(mainArray).addHole(holesArray));
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:03:25.353

The problems seems to be that `addHole` does not guard against a zero length array for holes. So, you should check to make sure you do not pass it a zero length array, because you are passing a zero-length array. Putting that guard in and logging your caught exceptions reveals your parsing is going awry in for your holes.

Specifically,

```
holesArray.add(new LatLng(holes.getJSONArray(j).getDouble(1), holes.getJSONArray(j).getDouble(0))); 
```

is throwing --

```
org.json.JSONException: Value [-80.6696999375,35.0941296997] at 1 of type org.json.JSONArray cannot be converted to double 
```

So, you are trying to parse an array as a `double`. I think your problem is that this line --

```
JSONArray holes = coordinates.getJSONArray(i); 
```

should be something else. My previous suggestion got it to work, but I don't think it was semantically correct, because it was repeating the same array as above. It is not clear from your `JSON` where holes should be, but that it line is where you should start to look. Perhaps something like,

```
if (coordinates.getJSONArray(i).length() > 1) {
   JSONArray holes = coordinates.getJSONArray(i).getJSONArray(1);
   if (holes.length() > 0) {
       // new for loop to make holes
       for (int j = 1; j < holes.length(); j++) {
       holesArray.add(new LatLng(holes.getJSONArray(j).getDouble(1), holes.getJSONArray(j).getDouble(0)));
       }
    }
} 
```

# r - 将数学函数包装在 R 函数中

> ID：14530704
> 
> 赞同：2
> 
> 时间：2013-01-25T21:30:14.360
> 
> 标签：r, function

我想编写一个函数，它接受任何用户提供的数学函数（例如，x^2）并用它做不同的事情，例如：

```
#-----------------nonworking code---------------------
foo <- function(FUN, var){
      math_fun <- function(x){
           FUN
      }
   curve(math_fun, -5, 5)     #plot the mathematical function
   y = math_func(var)         #compute the function based on a user provided x value.
   points(x=var, y=y)         #plot the value from the last step.
}

#A user can use the function defined above in a way as shown below:
Function <- x^2 + x
foo(FUN=Function, var = 2) 
```

但显然这个函数不起作用：首先，如果我运行这个函数，我会得到`Error in math_fun(x) : object 'x' not found`.

其次，即使函数确实有效，我假设变量是`x`，但用户可以使用任何字母。

对于第二个问题，一种可能的解决方案是还要求用户指定他们使用的字母作为变量。

```
foo <- function(FUN, var, variable){
      math_fun <- function(variable){
           FUN
      }
   curve(math_fun, -5, 5) 
   y = math_func(var)     
   points(x=var, y=y)     
} 
```

但是我不知道我该如何实现这一点……如果有人可以帮助我解决至少部分问题，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T21:34:25.177

它比这简单得多。用户定义的函数应在其定义中包含参数，例如，`function(x) x^2 + x`而不是`x^2 + x`. 然后就可以直接传递调用了：

```
foo <- function(math_fun, var){

   curve(math_fun, -5, 5)  #plot the mathematical function
   y = math_fun(var)       #compute the function based on a user provided x value
   points(x=var, y=y)      #plot the value from the last step.
}

#A user can use the function defined above in a way as shown below:
Function <- function(x) x^2 + x
foo(Function, var = 2) 
```

# git - Git-Tfs 停止签入，我可以拉取，但签入和 CheckinTool 不会做任何事情

> ID：14530710
> 
> 赞同：0
> 
> 时间：2013-01-25T21:30:35.683
> 
> 标签：git, tfs, git-tfs

我已经使用 Git-Tfs ( [https://github.com/git-tfs/git-tfs](https://github.com/git-tfs/git-tfs) ) 几个月了，并且喜欢为我的个人分支逃脱 TFS 的能力。直到今天。

我可以拉出我想要的所有内容，但是当我尝试签入（`git tfs checkintool`或`git tfs checkin`）时，它会列出即将签入的文件，然后将我转储回提示符而不做任何事情。

我该如何调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:52:24.930

对于您使用的每个命令，您可以使用选项 -d 来查看调试跟踪并可能发现问题。随意报告您的调试跟踪问题（或查看是否已报告），在这里：[https ://github.com/git-tfs/git-tfs/issues](https://github.com/git-tfs/git-tfs/issues)

但最好的办法是获取源代码，编译您的版本并调试失败的命令。一些帮助：[https ://github.com/git-tfs/git-tfs/wiki](https://github.com/git-tfs/git-tfs/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:54:18.233

问题原来是文件夹名称的不同字母大小写。我用相同的文件夹字母大小写重新做了我的操作，它工作

[https://github.com/git-tfs/git-tfs/issues/133#issuecomment-12895684](https://github.com/git-tfs/git-tfs/issues/133#issuecomment-12895684)

# java - Spring 可以使用简单的字符串作为表单命令对象吗？

> ID：14530713
> 
> 赞同：0
> 
> 时间：2013-01-25T21:30:38.027
> 
> 标签：java, spring, binding, command-objects

我希望在实际上只有一个可绑定值的表单上使用 Spring 强大的绑定工具（错误/验证/标记库/等）。我没有使用包含单个字符串属性（“名称”）的对象，而是尝试使用基本字符串作为命令对象，但我不确定如何（或是否）让它与相同的顶级。这是一个使用带有嵌套字符串的对象 (MyObject) 的示例 - 这很好用。我想只使用一个字符串，但是当我将 MyObject 更改为 String 时，为该字符串输入的任何内容都不会反映在下一页中。我究竟做错了什么？

```
@Controller 
@SessionAttributes("command")
public class TestController {

private static final String[] WIZARD_PAGES = new String[] {
    "enterValue",
    "confirmValue"
};  

@RequestMapping(value = "doStuff.action", method = RequestMethod.GET)
public String formBackingObject(HttpServletRequest request, HttpServletResponse response, final ModelMap modelMap) {
    MyObject entry = new MyObject();
    modelMap.put("command", entry);
    return WIZARD_PAGES[0];
}

@RequestMapping(value = "doStuff.action", method = RequestMethod.POST)
public String onSubmit(HttpServletRequest request, HttpServletResponse response, final ModelMap modelMap,
        final @ModelAttribute("command") MyObject entry,
        final Errors errors, SessionStatus status,
        @RequestParam(value = "_page") Integer currentPage,
        @RequestParam(value = "_finish", required=false) Object finish,
        @RequestParam(value = "_cancel", required=false) Object cancel) {

    // submitting
    if (finish != null) {       
                    // do submit stuff here
        status.setComplete();
        return "redirect:/home.action";
    }

    // cancelling
    if (cancel != null) {
        status.setComplete();
        return "redirect:/home.action";                     
    }       

    // moving to next page
    int targetPage = WebUtils.getTargetPage(request, "_target", currentPage);
    if (targetPage >= currentPage) {    
        // validate current page here
        switch(currentPage) {
        case 0: // TODO: call validation
            if (!errors.hasErrors()) {
               // do some stuff to prepare the next page
            }
            break;                                      
        }
    }

    if (errors.hasErrors())
        return WIZARD_PAGES[currentPage];
    return WIZARD_PAGES[targetPage];
} 
```

并输入Value.jsp：

```
<form:form commandName="command">
    <form:input path="name"/>
            <input type="submit" name="_target1" value="<spring:message code="COMMON.NEXT"/>" />
    <input type="hidden" name="_page" value="0" />
 </form:form> 
```

并确认Value.jsp：

```
<form:form commandName="command">
${name}
    <input type="submit" name="_finish" value="<spring:message code="COMMON.SUBMIT"/>" />
   <input type="hidden" name="_page" value="1" />
</form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:39:04.623

字符串是不可变的。当你使用 MyObject 时，Spring 改变的是对象对 String 的引用，而不是 String 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:57:35.677

我猜你的情况可能是由两件事引起的：

1) String 是**一个不可变对象**。这意味着每当您分配一个新的字符串时都会返回**一个新的参考值**

2) 方法参数是**按值传递的**。因为 String 是引用类型，所以对象引用**的引用值****不能改变**。

例如

```
public static void change(String text) { // (1) pass by value
   text = "Hello Word"; // (2) immutable
}

public static void main(String[] args) {
  String str = "Hello";
  change(str);
  System.out.println(str); // Output: Hello
} 
```

当我们将 String 对象引用包装在另一个对象中时，传递给 change 方法**的对象引用**是**myObject**，**而不是 String 引用了**。这就是为什么使用 myObject 可以更改 String 对象引用的引用值。

# php - 是否可以在页面加载之前刷新页面？

> ID：14530714
> 
> 赞同：0
> 
> 时间：2013-01-25T21:30:37.693
> 
> 标签：php, javascript, jquery

如果我的网站更新了，我的意思是 CSS 和一些内容，并且在更新老访问者返回我的页面时 CSS 不会自动刷新，你必须手动刷新页面。好吧，访问者不是专家，他们首先会认为该页面已损坏或有问题。

如何使用 Javascript 或 PHP 编写脚本，任何...这样当有人访问页面/网站时，我希望页面在它向访问者打开之前被刷新。如果它只在索引页面上完成这项工作就可以了。

可能吗？

我在谷歌帮助下找到了这个脚本，但它不起作用，什么也没有发生！

```
<script type='text/javascript'>

(function()
{
  if( window.localStorage )
  {
    if( !localStorage.getItem( 'firstLoad' ) )
    {
      localStorage[ 'firstLoad' ] = true;
      window.location.reload();
    }  
    else
      localStorage.removeItem( 'firstLoad' );
  }
})();

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:38:18.850

您最好的选择是“版本”您的 css 网址：

```
<link type="text/css" rel="stylesheet" href="my_style_sheet.css" /> 
```

变成

```
<link type="text/css" rel="stylesheet" href="my_style_sheet.css?v=2.1" /> 
```

任何时候更新样式表只需修改 URL。您已将此问题标记为 PHP，因此只需将版本作为变量或常量存储在通用`include`ed 文件中，这将非常简单：

```
<link type="text/css" rel="stylesheet" href="my_style_sheet.css?v=<?=CSS_VERSION;?>" /> 
```

如果您必须在 Javascript 中执行此操作，您可以让 javascript 将其上具有唯一标记（例如时间戳）的新样式表加载到`head`标记中，但这会浪费带宽并减慢页面加载速度，因为用户会最终下载了两个样式表：

```
var css_file=document.createElement("link");
css_file.setAttribute("rel", "stylesheet");
css_file.setAttribute("type", "text/css");
css_file.setAttribute("href", 'link_to_css.php?random_string='+escape(Math.random()));
document.getElementsByTagName("head")[0].appendChild(css_file); 
```

您还可以在 CSS 标头中设置较短的缓存过期时间（使您的 css 文件成为`.php`发送 css 标头并添加过期标头的文件：

```
<?php header("Expires: [DATE IN PAST OR NEAR FUTURE]"); ?> 
```

或者在您的网络服务器配置中（例如在 Apache 中），您可以[根据文件类型设置默认缓存标头](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)，因此可以将 CSS 设置为具有快速到期期限。但是，由于您正在破坏用户浏览器缓存的一些优势，您的应用程序的性能将再次受到轻微影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:50:46.527

啊，你需要的是“缓存破坏”。Ben D 描述的技术很好，但有点过于实际。试试这个：

```
<link type="text/css" rel="stylesheet"
    href="my_style_sheet.css?<?=filemtime('my_style_sheet.css')?>" /> 
```

您还可以考虑其他一些事情，但这是最基本的自动缓存清除技术。

请注意，通过这样做，您可以将缓存超时设置为较长的​​时间，例如“1 年”，因为每次文件更改时，文件的链接也会更改。

# java - 避免在 glassfish 上删除计时器

> ID：14530717
> 
> 赞同：23
> 
> 时间：2013-01-25T21:30:46.170
> 
> 标签：java, glassfish, java-ee-6, ejb-3.1

我有一个用 @Schedule 注释的方法，该方法由容器偶尔调用。

```
@Schedule(second = "*/5", minute = "*", hour = "*", persistent = false)
public void myTimerMethod() throws Exception {
    ...
} 
```

问题是在某些情况下，我希望此方法引发异常以导致正在进行的事务回滚。但是如果我这样做超过两次，计时器将被删除并且不再调用！

```
INFO: EJB5119:Expunging timer ['68@@1359143163781@@server@@domain1' 'TimedObject = MyBean' 'Application = My-War' 'BEING_DELIVERED' 'PERIODIC' 'Container ID = 89072805830524936' 'Fri Jan 25 21:49:30 CET 2013' '0' '*/5 # * # * # * # * # * # * # null # null # null # true # myTimerMethod # 0' ] after [2] failed deliveries 
```

我知道我可以使用在 domain.xml 中配置计时器重新调度

```
<domains>
    ...
    <configs>
        <config>
            ...
            <ejb-container session-store="${com.sun.aas.instanceRoot}/session-store">
               <ejb-timer-service>
                     <property name="reschedule-failed-timer" value="true"></property>
                </ejb-timer-service>
            </ejb-container>
            ...
        </config>
    </configs>
    ...
</domains> 
```

但我的问题是，我可以在部署应用程序时配置此设置吗？

在以下位置找不到它：

```
glassfish-resources.xml
glassfish-ejb-jar.xml
glassfish-web.xml 
```

有没有办法以编程方式做到这一点？

（我将这样的服务器配置放在配置文件中而不是配置服务器背后的理由是，我的应用程序应该可以直接安装在全新安装的 glassfish 上）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T08:46:29.857

我会使用不同的方法。

不要直接从调度的方法中抛出异常，而是尝试引入一个间接级别，如下所示：

```
...
@Inject RealWorkHere realImplementation;

@Schedule(second = "*/5", minute = "*", hour = "*", persistent = false)
public void myTimerMethod(){
  try{
     realImplementation.myTimerMethodImpl()
  }catch (Exception x){
   // hopefully log it somewhere
  }
}
... 
```

`RealWorkHere`实际实现的bean在哪里：

```
@Stateless
public class RealWorkHere{
   @TransactionAttribute(REQUIRES_NEW)
   public void myTimerMethod() throws Exception {

   }
} 
```

这带来了以下好处：

*   在容器启动的事务中不抛出异常（从而避免删除）
*   更好地记录异常
*   清晰划分“真实”商业交易

## 也可以看看

*   [ejb-spec #111：如果在定时器回调方法执行期间抛出应用程序异常，请清除容器的行为](https://github.com/javaee/ejb-spec/issues/111)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-18T21:05:22.977

当前版本 4 的 Glassfish 如果在执行超时回调方法期间**发生应用程序异常，则会**删除计时器。

应用程序异常导致当前事务回滚。在这种情况下，Glassfish 会再次尝试无错误地执行超时回调方法。如果再次发生回滚，Glassfish 会清除计时器。

我在 Glassfish 问题跟踪器中提交了一个问题，以便在出现异常时不要删除计时器。Glassfish 似乎是唯一一个在应用程序异常时清除计时器的应用程序服务器。请参阅[glassfish #20749：Glassfish 删除计时器，即使回调方法保留其合同](https://github.com/eclipse-ee4j/glassfish/issues/20749)以获取更多详细信息。愿你愿意为我的问题投票。

我还提交了关于 EJB 规范的问题，以阐明 EJB 容器在这种情况下应该如何表现。请参阅[ejb-spec #111：如果在执行计时器回调方法期间抛出应用程序异常，请清除容器的行为以](https://github.com/javaee/ejb-spec/issues/111)获取更多详细信息。

# javascript - jquery停止后重新启动动画

> ID：14530718
> 
> 赞同：0
> 
> 时间：2013-01-25T21:31:01.727
> 
> 标签：javascript, jquery, animation

> **可能重复：**
> [Jquery 连续循环动画](https://stackoverflow.com/questions/6767286/jquery-continuously-loop-animation)

我希望这个动画在 div 计时器达到 940 像素时重新开始。到目前为止，我有这个：

```
$('.timer').animate({'width':940}, {queue:false, duration:5000, easing: 'linear'});
if ($('.timer').width() == 940){
    $('.timer').width() == 0;
    $('.timer').animate({'width':940}, {queue:false, duration:5000, easing: 'linear'});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:40:54.147

重新启动动画循环：

```
$(".timer").bind("animation.loop", function(){
    $(this).animate({width: 940}, 5000, function(){
        $(this).animate({width: 0}, 5000, function(){
            $(this).trigger("animation.loop");
        });
    });
}).trigger("animation.loop"); 
```

做动画，硬重置，再次动画：

```
$(".timer").bind("animation.loop", function(){
    $(this).animate({width: 940, easing: 'linear'}, 5000, function(){
        $(this).css("width", 0).trigger("animation.loop");
    });
}).trigger("animation.loop"); 
```

# html - head>link[href] 的协议对 SSL 有影响吗？

> ID：14530722
> 
> 赞同：1
> 
> 时间：2013-01-25T21:31:14.080
> 
> 标签：html, canonical-link, html-head

我最近开始在我的网页上加载样式表，`//`而不是使用`http://`和`https://`。例如：

```
<link href="//example.com/styles.css" rel="stylesheet" type="text/css" /> 
```

`link[rel="canonical"]`现在我想知道标签是否应该这样做。例如：

```
<link rel="canonical" href="//example.com/index.html" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:52:24.587

如果你这样做，那么 的目的`rel="canonical"`就有点失败了，因为页面现在有两个名称（一个用于`http:`，一个用于`https:`）。没有什么禁止它，但这可能不是一个好主意。

选择其中一个并将其设为规范 URL。

# javascript - 如何使用 iframe 而不是 ajax 重新加载网页的一部分？

> ID：14530723
> 
> 赞同：4
> 
> 时间：2013-01-25T21:31:17.877
> 
> 标签：javascript, jquery, html, iframe

我不想使用ajax来做这件事的原因是因为我要刷新的部分实际上是其他实现的评论插件。我只是在我的 html 代码中放了他们提供的一段脚本，它在我的文章下显示了一个评论部分。由于它不是实时评论，我想在它旁边添加一个刷新按钮，让用户只需刷新评论部分即可获得最新评论，而无需重新加载整个页面。

因此，我认为 iframe 可能是我的一个选择。但问题是我需要指定 iframe 的 src 属性。我不知道我应该使用什么值，因为我所拥有的只是一个脚本片段。有人可以给我任何想法吗？

顺便说一句，代码片段如下：

```
<div id="uyan_frame"></div>
<script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=1674366" async=""></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:33:34.793

只需使用您在里面谈到的脚本创建一个 html 页面，并在 iframe src 属性中使用此文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:26:17.723

您可以将上面的代码段放在这样的 html 文件中

```
<!DOCTYPE html>
<html>
    <body>
         <div id="uyan_frame"></div>
         <script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=1674366" async=""></script>
    </body>
</html> 
```

然后将该文件用作 iFrame 的 src，您可以使用 javascript 刷新该文件。

也就是说，仅仅因为你可以做某事并不意味着你应该做某事。这是一种非常hacky的方式来做你想做的事情。一些替代选择：

1.  ***了解您正在使用的脚本正在做什么，并使用它。*** 从代码段中的脚本名称和 div 来看，它可能会创建一个 iframe 开始。如果是这样，为什么不使用浏览器调试它并手动刷新它，或者修改脚本来这样做呢？

2.  ***使用实时更新框架***——这对你来说可能是不可能的，我不知道你的限制，但是有很多很棒的评论框架可以进行实时更新。例如[Disqus 浮现](http://disqus.com/)在脑海中。其他示例是[facebook 评论](http://raventools.com/blog/facebook-comments/)，或者您可以嵌入对外部站点（如[分支）的引用](http://branch.com/)

3.  ***使用 Ajax*** - 我有点不清楚这是您正在编写的脚本，还是第 3 方脚本。如果它是您的脚本，那么请使用普遍接受的方法来完成此类工作，除非您有一个非常好的理由。你会从其他人那里得到更好的支持，你会获得更普遍适用的经验，而且在大多数情况下，最佳实践获得这个名字是有原因的。人们使用“ajax”方法来实时更新页面，因为它有效且有用。框架在网络上变得不那么常见了，因为它们很笨重，并且使页面的不同部分难以交互。如果您没有充分的理由不使用常见做法，那么它通常是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:36:22.080

你可以这样做：

```
var iframe = document.getElementById('your_frame_id');
iframe.src = iframe.src; 
```

再次将 iframe src 设置为其值，这将导致框架刷新，并将与跨域框架一起使用

# html - 如果你只能拥有只有一个元素的类，为什么会有 id 这样的东西呢？

> ID：14530727
> 
> 赞同：3
> 
> 时间：2013-01-25T21:32:15.803
> 
> 标签：html, markup

从语言设计的角度来看，如果你可以有一个只有一个元素的类，那么为 HTML 创建 id 属性有什么意义呢？为什么不只使用类而不使标记复杂化？

我可以想到三种可能的解释，但它们并不能完全满足我，所以我想知道你是否知道为什么 id 包含在 HTML 中。我的想法是：

1.  id 的存在有助于创建 CSS 样式，因为它更大的特异性使得可以为类的一个成员提供一个 id，以覆盖为该类的其他成员提供的样式。这种解释并不完全让我满意，因为您可以只给它一个额外的类，并将该类的样式放在样式表底部的一个部分中，用于给单个元素的样式。
2.  使用 jQuery 选择元素时，一旦找到具有该 id 的元素，DOM 遍历就会停止。因此，id 的存在将使选择运行得更快。这个解释不能让我满意，因为我相当肯定 jQuery 是在 id 和 classes 已经存在很久之后创建的。
3.  将 id 作为语言功能有助于确保应该唯一的样式（和选择器）真正应用于一个元素，因为如果不是这种情况，事情就会变得混乱。这种解释不能让我满意，因为当您不小心创建了具有相同 id 的两个元素时，让您的网站中断似乎并不是一种特别有效的方式来通知您出了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T22:00:59.893

[第一个公开可用的 HTML 描述是名为“HTML 标签”的文档，由 Berners-Lee 于 1991 年底在 Internet 上首次提及](http://www.w3.org/History/19921103-hypertext/hypertext/WWW/MarkUp/Tags.html)。

有一个锚标签的描述：

```
<A NAME=xxx HREF=XXX> ... </A>

HREF
...This allows for the form HREF=#identifier to
refer to another anchor in the same document.
NAME
The attribute NAME allows the anchor to be the destination of a link. 
```

我认为这里的 NAME 属性是元素 ID 的前身：它允许您直接链接到超文本页面的所需部分（即使它是同一页面）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T21:38:41.503

ID 是[唯一值](http://www.w3schools.com/tags/att_global_id.asp)，因此，当您使用诸如 javascript 之类的内容解析 html 时，您可以确定您的脚本将命中哪个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T21:39:30.793

无论如何，对于 Javascript来说，`getElementById`它比`getElementsByClassName`

```
测试操作/秒
getElementById 269,235
getElementsByClassName 86,369

```

[`ref`](http://jsperf.com/getelementbyid-vs-getelementsbyclassname/8)

来自规范的更多信息

> ID 类型属性的特殊之处在于，在一个符合标准的文档中，没有两个这样的属性可以具有相同的值，无论携带它们的元素的类型如何；无论使用哪种文档语言，都可以使用 ID 类型的属性来唯一标识其元素。

因此，这是一种唯一标识元素的方法，而类选择器只能巧合。

[`ref`](http://w3.org/TR/selectors)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T21:37:27.513

有很多原因，其中大多数甚至不涉及 CSS。例如，ajax 和 JS 库通常需要唯一的 ID，而 ID 可以充当带有 URL 哈希的锚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T22:08:16.760

XML 源自 HTML，但用于更通用的数据。在 XML 中，通常希望有一个唯一的 id（这与在数据库中经常需要的方式相同）。因为 XML 在自动验证方面投入了大量精力，所以最好的方法是简单地将 id 属性添加为语言元素。这样，如果将相同的值分配给两个 id 属性，则 XML 验证器可以输出错误。

后来，许多 XML 特性又回到了 HTML，我猜 id 只是其中之一。它不是严格需要的，但与 Java Script 结合使用是一件好事。

# javascript - youtube 播放列表返回为“#document”而不是 XML 文档

> ID：14530732
> 
> 赞同：0
> 
> 时间：2013-01-25T21:32:29.493
> 
> 标签：javascript, jquery, youtube-api

在尝试使用 YouTube 开发人员 API v2 检索播放列表时，我不断在 Chrome 控制台中收到响应，指出加载的文件类型错误，并且是文档，而不是 XML。这是我正在使用的代码：

```
$.get('https://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2',
  function(data)
  {
    var doc = data;
    console.log( data );
  }); 
```

控制台中的结果是：`#document`我期望结果是 XML 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:40:41.870

您肯定会从提要中获取一个 xml 文档，并且如果您想确保您的 jQuery ajax 请求能够识别它，您可以指定“dataType”参数，如下所示：

```
$.get('https://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2',
  function(data)
  {
    console.log( 'An xml feed is being retrieved, true or false:'+($(data).children('feed').length == 1).toString());
  },'xml'); 
```

或者使用简写的 $.ajax 方法，它也可以通过使用“error”选项来帮助调试：

```
$.ajax({
    url: 'https://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2',
    dataType: 'xml',
    success: function(data){
        console.log( 'An xml feed is being retrieved, true or false:'+($(data).children('feed').length == 1).toString());
    },
    error: function(xhr,stat,err){ console.log(stat+': '+err); }
}); 
```

这是一个使用 $.ajax 方法的示例，实际上它被识别为有效的 xml，甚至没有指定 dataType 参数：http: [//jsfiddle.net/UZddq/2/](http://jsfiddle.net/UZddq/2/)

使用 json 也可能更容易。您可以通过在 url 中指定“alt”参数以 json 格式从 youtube 检索提要：

```
$.ajax({
    url: 'https://gdata.youtube.com/feeds/api/playlists/8BCDD04DE8F771B2?v=2&alt=json',
    dataType: 'json',
    success: function(data){
        console.log( 'A json feed is being retrieved, true or false:'+data.hasOwnProperty('feed').toString());
    },
    error: function(xhr,stat,err){ console.log(stat+': '+err); }
}); 
```

这是 json 版本示例：http: [//jsfiddle.net/hvFQj/2/](http://jsfiddle.net/hvFQj/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:36:34.737

没关系，是xml，这是jquery的xml表示

你可以使用[xml2json](http://www.fyneworks.com/jquery/xml-to-json/)

# image - .htaccess 重定向子文件夹图像和样式表

> ID：14530733
> 
> 赞同：0
> 
> 时间：2013-01-25T21:32:29.930
> 
> 标签：image, .htaccess, stylesheet, subdirectory

.htaccess 重定向是否可以让位于子文件夹中的所有样式表和图像路径指向根文件夹中的相应文件夹（图像/样式）？无需更改每个文件中的路径。

让我试着更好地解释一下我的情况。

我使用包含我的文档类型、样式表链接的包含（header.inc.php）

```
 <link href="styles/layout.css" rel="stylesheet" type="text/css"> 
```

和其他几个 html 元素/图像。当 header.inc.php 被拉入我的子文件夹文件时，这成为一个问题，因为该文件夹中不存在 style/layout.css。此外，由于同样的原因，还有一些图像会损坏，

```
 <img src="images/image.jpg"> 
```

图片文件夹不存在……</p>

在我当前的 .htaccess 文件中，我有以下脚本和我的包含路径（用于本地测试）。是否有类似于 include_path 脚本的东西可以帮助解决上面列出的问题？

```
 php_value include_path ".:/Applications/MAMP/bin/php/php5.4.4/lib/php:/Applications/MAMP/htdocs/site/inc" 
```

这是文件结构/层次结构的示例。

```
 [ROOT FOLDER]

    index.php

      /subfolder 
         subpage1.php
         subpage2.php
         subpage3.php

      /subfolder2
         subpage1.php
         subpage2.php
         subpage3.php 

     contact.php

     /images
     /styles
     /scripts
     /inc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:59:55.143

您不需要使用重写来解决这个问题，您现在只需要如何在 HTML 元素中正确定义源。

不要这样做

```
<link href="styles/layout.css" rel="stylesheet" type="text/css"> 
```

做这个

```
<link href="/styles/layout.css" rel="stylesheet" type="text/css"> 
```

这改变的是您的路径不再与正在浏览的文件相关，而是现在与您网站的根目录相关。

希望有帮助。

# javascript - 处理触摸屏上的鼠标和触摸事件

> ID：14530734
> 
> 赞同：15
> 
> 时间：2013-01-25T21:32:34.260
> 
> 标签：javascript, google-chrome, firefox, touch, touchscreen

我正在编写应该支持鼠标和触摸交互的 Web 应用程序。为了测试，我在 Windows 7 上使用触摸屏设备。我尝试在最新的 Firefox 和 Chrome canary 中嗅探触摸事件并得到以下结果：

触摸时 Firefox 触发触摸和相应的鼠标事件。Chrome 会触发`touchstart/mousedown`，`touchend/mouseup`成对，但`mousemove`以非常奇怪的方式触发：一/两次 while `touchmove`。

所有鼠标事件都像往常一样处理。

有没有办法在现代触摸屏上同时处理鼠标和触摸事件？如果 Firefox 触发一对触摸和鼠标事件，Chrome 会发生`touchmove`什么`mousemove`？我应该将所有鼠标事件转换为触摸还是反之亦然？我希望找到正确的方法来创建响应式界面。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T14:02:12.393

您无法真正提前预测要监听哪些事件（例如，据您所知，在您的页面加载后可能会插入 USB 触摸屏）。

相反，您应该始终监听触摸事件和鼠标事件，但在您处理的触摸事件上调用 preventDefault() 以防止（现在是多余的）鼠标事件被触发。有关详细信息，请参阅[http://www.html5rocks.com/en/mobile/touchandmouse/](http://www.html5rocks.com/en/mobile/touchandmouse/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T22:51:20.053

~~您应该检查触摸界面的可用性并据此绑定事件。~~

你可以这样做：

```
(function () {
    if ('ontouchstart' in window) {
        window.Evt = {
            PUSH : 'touchstart',
            MOVE : 'touchmove',
            RELEASE : 'touchend'
        };
    } else {
        window.Evt = {
            PUSH : 'mousedown',
            MOVE : 'mousemove',
            RELEASE : 'mouseup'
        };
    }
}());

// and then...

document.getElementById('mydiv').addEventListener(Evt.PUSH, myStartDragHandler, false); 
```

 ~~* * *

如果您想同时处理两者并且浏览器不能很好地将触摸事件转换为鼠标事件，您可以捕获触摸事件并停止它们 - 那么浏览器不应触发相应的鼠标事件（您不会有双重事件）你可以自己触发它作为鼠标事件或只​​是处理它。

```
var mydiv = document.getElementsById('mydiv');
mydiv.addEventListener('mousemove', myMoveHandler, false);
mydiv.addEventListener('touchmove', function (e) {
    // stop touch event
    e.stopPropagation();
    e.preventDefault();

    // translate to mouse event
    var clkEvt = document.createEvent('MouseEvent');
    clkEvt.initMouseEvent('mousemove', true, true, window, e.detail, 
                 e.touches[0].screenX, e.touches[0].screenY, 
                 e.touches[0].clientX, e.touches[0].clientY, 
                 false, false, false, false, 
                 0, null);
    mydiv.dispatchEvent(clkEvt);

    // or just handle touch event
    myMoveHandler(e);
}, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-06T18:04:15.623

MouseEvents 和 TouchEvents 在技术上并不提供完全相同的功能，但对于大多数用途，它们可以互换使用。该解决方案并不偏爱一个，因为用户可能同时拥有鼠标和触摸屏。相反，它允许用户使用他们想要的任何输入设备，只要他们在更改输入之前等待至少五秒钟。当点击屏幕时，此解决方案会忽略触摸屏设备上的鼠标指针模拟。

```
var lastEvent = 3  ;
var MOUSE_EVENT = 1;
var TOUCH_EVENT = 2 ; 

element.addEventListener('touchstart', function(event)
		{

			if (lastEvent === MOUSE_EVENT  )
			{
				var time =  Date.now() - eventTime  ;  
				if ( time > 5000 ) 
				{
					eventTime = Date.now() ;
					lastEvent = TOUCH_EVENT ;
					interactionStart(event) ;
				} 
			}
			else 
			{
				lastEvent = TOUCH_EVENT ; ;
				eventTime = Date.now() ;
				interactionStart(event)  ; 
			}

		}) ;	

		element.addEventListener('mousedown',	function(event)
		{

			if (lastEvent === TOUCH_EVENT  )
			{
				var time =  Date.now() - eventTime  ;	
				if ( time > 5000 ) 
				{
					eventTime = Date.now() ;
					lastEvent = MOUSE_EVENT ;
					interactionStart(event) ;
				} 
			}
			else 
			{
				lastEvent=  MOUSE_EVENT ; 
				eventTime = Date.now() ;
				interactionStart(event)  ; 
			}
		}) ;  

function interactionStart(event) // handle interaction (touch or click ) here.
{...}
```

这绝不是一个双赢的解决方案，我已经使用了几次，并没有发现它的问题，但公平地说，我通常只是在它点击画布时使用它来启动动画，或者提供转动的逻辑一个 div 变成一个按钮。我把它留给大家使用这个代码，找到改进并帮助改进这个代码。（如果你没有找到更好的解决方案）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-22T22:24:41.763

我找到了这个线程，因为我有一个类似且更复杂的问题：

> 假设我们创建了一个带有箭头 NEXT/PREVIOUS 的启用 js 的可滚动区域，我们不仅要响应触摸和鼠标事件，还要在用户继续按下屏幕或按住他/她的鼠标时重复触发它们！

重复事件将使我的下一个按钮前进 2 个位置而不是一个！

在闭包的帮助下，一切似乎都是可能的：

**(1)首先创建一个变量隔离的自调用函数：**

```
 (function(myScroll, $, window, document, undefined){
 ...
 }(window.myScroll = window.myScroll || {}, jQuery, window, document)); 
```

**(2) 然后，添加将保持内部状态的私有变量`setTimeout()`：**

```
/*
 * Primary events for handlers that respond to more than one event and devices  
 * that produce more than one, like touch devices.
 * The first event in browser's queue hinders all subsequent for the specific 
 * key intended to be used by a handler.
 * Every key points to an object '{primary: <event type>}'.
 */
var eventLock = {};
// Process ids based on keys.
var pids = {};
// Some defaults
var defaults = {
   pressDelay: 100 // ms between successive calls for continuous press by mouse or touch
} 
```

**(3) 事件锁功能：**

```
function getEventLock(evt, key){
   if(typeof(eventLock[key]) == 'undefined'){
      eventLock[key] = {};
      eventLock[key].primary = evt.type;
      return true;
   }
   if(evt.type == eventLock[key].primary)
      return true;
   else
      return false;
}
function primaryEventLock(evt, key){
   eventLock[key].primary = evt.type;
} 
```

**(4) 附加您的事件处理程序：**

```
function init(){
   $('sth').off('mousedown touchstart', previousStart).on('mousedown touchstart', previousStart);
   $('sth').off('mouseup touchend', previousEnd).on('mouseup touchend', previousEnd);
   // similar for 'next*' handlers
} 
```

触发事件`mousedown`并将`touchstart`在支持两者的设备上产生对处理程序的双重调用（可能首先触发触摸）。这同样适用于`mouseup`和`touchend`。

我们知道输入设备（实际上是整个图形环境）按顺序产生事件，所以我们不关心哪个先触发，只要将**特殊键**设置为私有`eventLock.next.primary`和分别从处理程序和`eventLock.previous.primary`捕获的第一个事件。`next*()``previous*()`

该**键**是事件类型，因此第二个，第三个等事件始终是失败者，它们不会在锁定函数的帮助下获得锁定，`eventLock()`并且`primaryEventLock()`。

**(5) 上面可以看到事件处理器的定义：**

```
function previousStart(evt){
   // 'race' condition/repetition between 'mousedown' and 'touchstart'
   if(!getEventLock(evt, 'previous'))
      return;

   // a. !!!you have to implement this!!!
   previous(evt.target);

   // b. emulate successive events of this type
   pids.previous = setTimeout(closure, defaults.pressDelay);

   // internal function repeats steps (a), (b)
   function closure(){
      previous(evt.target);
      primaryEventLock(evt, 'previous');
      pids.previous = setTimeout(closure, defaults.pressDelay);
   }
};
function previousEnd(evt){
      clearTimeout(pids.previous);
}; 
```

`nextStart`和类似`nextEnd`。

这个想法是，无论谁在第一个（触摸或鼠标）之后来，都不会在 的帮助下获得**锁定**`function eventLock(evt, key)`并停在那里。

打开此锁的唯一方法是**在**步骤`*End()`(4):`previousEnd`和`nextEnd`.

我还以一种非常聪明的方式处理了在会话中间连接的触摸设备的问题：我注意到连续按下的时间比**只**为当时的主要事件`defaults.pressDelay`产生回调函数的连续调用（原因是没有end 事件处理程序终止 callabck）！

 **```
touchstart event
closure
closure
....
touchend event 
```

我将用户使用的设备定义为**主要**设备，您只需按下更长的时间，您的设备就会在封闭装置的帮助下立即成为**主要设备！**`primaryEventLock(evt, 'previous')`

另请注意，执行所需的时间`previous(event.target)`应小于`defaults.pressDelay`.

**(6) 最后，让我们暴露`init()`给全局作用域：**

```
myScroll.init = init; 
```

您应该用`previous(event.target)`手头的问题替换调用：[fiddle](https://jsfiddle.net/centurianii/506pw8mj/)。

另外，请注意，在*(5b)*处，有一个解决另一个流行问题的方法，即*我们如何将参数传递给调用 from 的函数`setTimeout()`*，即`setTimeout(previous, defaults.pressDelay)`缺少参数传递机制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-22T16:45:57.490

这个线程上的解决方案已经过时了——对于那些（像我一样）在 2021 年仍然登陆这里的人来说，有一个新的 W3 指针事件规范。这些事件将鼠标和触摸合二为一。

[https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events](https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events)

[https://www.w3.org/TR/pointerevents/](https://www.w3.org/TR/pointerevents/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-19T21:25:49.500

我一直在使用这个 jQuery 助手来绑定触摸和点击事件。

```
(function ($) {
$.fn.tclick = function (onclick) {
    this.bind("touchstart", function (e) { onclick.call(this, e); e.stopPropagation(); e.preventDefault(); });
    this.bind("click", function (e) { onclick.call(this, e); });   //substitute mousedown event for exact same result as touchstart         
    return this;
  };
})(jQuery); 
```**~~

# c# - 在评估语句后调用方法

> ID：14530735
> 
> 赞同：1
> 
> 时间：2013-01-25T21:32:33.783
> 
> 标签：c#, methods, sharepoint-2010, optional-arguments

这应该很容易回答，但我什至不知道如何正确提问，所以我提前为我的 n00b-ness 道歉。我一直在努力解释它以进行没有运气的搜索...

基本上我有一个方法，它接受几个参数作为“开关”（通过调用方法设置为 0 或 1）和可选字符串，并使用它们来“构建”其行动计划。它是这样的：

```
public static void Foo(int a, int b, int c, optionalString aa, optionalString, bb, optionalString cc)
{
    if (a == 1)
    { Object1 o1 = Thing.Property1[aa]; }
    if (b == 1)
    { Object2 o2 = Thing.Property2[bb]; }
    if (c == 1)
    { Object3 o3 = Thing.Property3[cc]; }

    Bar(optionalo1, optionalo2, optionalo3); // Edit: I explained this part a little wrong, see below.
} 
```

**编辑澄清：**我不能将空值传递给，`Bar()`因为它只需要使用实际设置的属性来调用。例如，调用 Foo() 时设置 a、b 和 c，如下所示：

```
Foo(1, 0, 1, string1, string3) //In this instance I only want the first and third properties set. The strings contain the values I want them set to.
{
    if (a == 1)
    { set this property based on string1 }
    if (b == 1)
    { this one would not be set because b was 0 }
    if (c == 1)
    { set this property based on string3 }

    Bar(property1, property3);
    // In this instance, Bar() must be called with only those two arguments, it cannot contain any null values. 
```

**编辑结束**

因此，如果不对每个可能的组合使用大量嵌套`if()`语句或方法`Bar()`，有没有办法在所有这些都被评估后调用它？从技术上讲，变量尚未分配，因此`Bar()`无效。或者，有没有更好的方法来完成这样的事情？

这适用于与 SharePoint 服务器对象模型交互的控制台应用程序（如果有任何区别）。非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:19:07.533

您需要将代码转换为数据。您有一些输入参数，您需要对它们执行一些操作。

使用定义为您可以创建的`Dictionary<Key, Action>`位置的字典结构。`Key = whatever unique value`然后，您在方法中所要做的就是计算密钥并执行相关操作。

从你的例子：

```
 public static void Foo(int a, int b, int c, optionalString aa, optionalString, bb, optionalString cc)
    {
Dictionary<int, Action> objectMapper = new Dictionary<int, Action>
        {
            { 0, () => Bar() },
            { 1, () => Bar(Thing.Property1[aa]) },
            { 2, () => Bar(Thing.Property2[bb]) },
            { 4, () => Bar(Thing.Property3[cc]) },
            { 3, () => Bar(Thing.Property1[aa], Thing.Property2[bb]) },
            { 5, () => Bar(Thing.Property1[aa], Thing.Property3[cc]) },
            { 6, () => Bar(Thing.Property2[bb], Thing.Property3[cc]) },
            { 7, () => Bar(Thing.Property1[aa], Thing.Property2[bb], Thing.Property3[cc]) },
        };    
        objectMapper[a & b & c]();
    } 
```

在我的示例中，唯一键就是`ANDing`3 个输入变量。但是，如您所见，涵盖所有可能性非常繁琐，这就是为什么我不建议完全这样做的原因，而是尝试重新设计您的 Bar 方法以在输入参数上更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:57:13.140

取决于 Bar 的签名，是的。

如果 bar 被声明为类似

```
public static void Bar(params string[] values) {
    foreach(var v in values) {
        // use value
    }
} 
```

然后 Foo 可以构建一个数组并发送它，例如

```
var list values = new List<string>();

if(a == 1) {
    list.Add(optionalo1);
    // do whatever else
}

if(b == 1) {
    list.Add(optionalo2);
    // do whatever else
}

Bar(values.ToArray()); 
```

**编辑：**

还要记住，如果 Foo 被声明为

```
public static void Foo(int a, int b, int c, string aa = null, string bb = null, string cc = null) 
```

并且您像在示例中那样调用它：

```
Foo(1, 0, 1, string1, string3) 
```

然后 string1 将按照您的意愿在 string1 中结束，但传递的 string3 将在 string2 中结束。您需要将该位置的 null 传递给 Foo ，否则这些值将被混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:56:32.250

也许您只想将 null 作为默认值传递给`Bar`方法，如下所示：

```
public static void Foo(int a, int b, int c, 
    optionalString aa, optionalString, bb, optionalString cc)
{
    Object1 o1 = null;
    Object1 o2 = null;
    Object1 o3 = null;
    if (a == 1)
    { o1 = Thing.Property1[aa]; }
    if (b == 1)
    { o2 = Thing.Property2[bb]; }
    if (c == 1)
    { o3 = Thing.Property3[cc]; }

    Bar(o1, o2, o3);
} 
```

# phpunit - phpunit mock - 将返回对象

> ID：14530738
> 
> 赞同：5
> 
> 时间：2013-01-25T21:32:45.630
> 
> 标签：phpunit

使用 phpunit 模拟对象，我有一个返回对象的方法。

您如何使用期望 / 方法 / 将方法进行编码？

IE

```
 ->will($this->returnValue('Class_Name')); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-23T18:59:17.463

创建对象，并用`returnValue()`函数返回它。例如：

```
$myObject = new RandomObject();
$myFactory = $this->getMock('ObjectFactory', array('getRandomObject'));
$myFactory->expects($this->any())->method('getRandomObject')->will($this->returnValue($myObject);

$this->assertInstanceOf('RandomObject', $myFactory->getRandomObject()); 
```

这会过去的。

您还可以将该对象创建为模拟本身并传递模拟。

# c++ - 派生列表中的 C++ 范围运算符

> ID：14530740
> 
> 赞同：1
> 
> 时间：2013-01-25T21:32:54.167
> 
> 标签：c++, inheritance, polymorphism, nested-class

我在 WinImp.h 中收到一个错误，上面写着`'Root' has not been declared`. 如果我不使用范围运算符 ( `class WinImp : public BaseDef`)，则错误是`error: expected class-name before '{' token`)。有谁知道为什么会这样？

根目录

```
class Root {
    public:
        class BaseDef {
            public:
                virtual void foo() = 0;
                virtual void bar() = 0;
        };
    private:
        #ifdef _WIN32
        friend class WinImp;
        #else
        friend class NixImp;
        #endif

        BaseDef* imp;

        BaseDef* getImp();

    public:
        Root() : imp(getImp()) {}
        void foo();
        void bar();
}; 
```

根.cpp

```
#include "Root.h"
void Root::foo() {
    imp->foo();
}

void Root::bar() {
    imp->bar();
} 
```

WinImp.h

```
#ifdef _WIN32
#include "Root.h"
class WinImp : public Root::BaseDef {
    public:
        void foo();
        void bar();
};
#endif 
```

WinImp.cpp

```
#include "WinImp.h"
#ifdef _WIN32
    void WinImp::foo() {

    }

    void WinImp::bar() {

    }

    Root::BaseDef* Root::getImp() {
        return static_cast<BaseDef*>(new WinImp());
    }
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:15:09.823

您正在访问`BaseDef`Root 中的接口，因此它们应该是公开的：

```
class BaseDef 
{
 public:
   virtual void foo() = 0;
   virtual void bar() = 0;
}; 
```

在 WinImp.cpp 中，`foo(), bar()`需要返回类型并且它们不在 Root 范围内，应该是：

```
void WinImp::foo() { }
void WinImp::bar() { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:20:43.287

修复`WinImp.cpp`如下：

```
#include "WinImp.h"
#ifdef _WIN32
    // WinImp is not scoped within Root
    void WinImp::foo() {

    }

    void WinImp::bar() {

    }

    Root::BaseDef* Root::getImp() {
        return dynamic_cast<BaseDef*>(new WinImp());
    }
#endif 
```

# javascript - 按输入值过滤表，在键上（简化我的代码）

> ID：14530741
> 
> 赞同：-3
> 
> 时间：2013-01-25T21:32:54.403
> 
> 标签：javascript, jquery, input, filter, html-table

我已经有一个解决方案，但它很乱，可以使用一些调整。基本上，我在一个页面上有两个表，每个表都有一个输入文本框，每一列都有一个相应的过滤器名称。这个想法是，当用户在该列上方键入时，表格正在被每个变量过滤。这是我找到解决方案的地方，但这仅适用于一个输入框和一个表格。此外，当您清除输入框时，整个表格都会清除。我喜欢这个例子不区分大小写，但它有一些错误。[http://www.marceble.com/2010/02/simple-jquery-table-row-filter/](http://www.marceble.com/2010/02/simple-jquery-table-row-filter/)这是我放在一起的 jsfiddle，但它没有按应有的方式过滤。[http://jsfiddle.net/anschwem/mAAvW/](http://jsfiddle.net/anschwem/mAAvW/)

**代码：**

```
<script>
 $(document).ready(function() {
 //Declare the custom selector 'containsIgnoreCase'.
      $.expr[':'].containsIgnoreCase = function(n,i,m){
          return jQuery(n).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
      };

      $("#searchInput").keyup(function(){

          $("#fbody").find("tr").hide();
          var data = this.value.split(" ");
          var jo = $("#fbody").find("tr");
          $.each(data, function(i, v){

               //Use the new containsIgnoreCase function instead
               jo = jo.filter("*:containsIgnoreCase('"+v+"')");
          });

          jo.show();

      }).focus(function(){
          this.value="";
          $(this).css({"color":"black"});
          $(this).unbind('focus');
      }).css({"color":"#C0C0C0"});
  });
</script> 
```

**HTML：**

```
<table>
  <thead>
    <tr>
        <td><input value="Animals"></td>
        <td><input value="Numbers"></td>   
    </tr>
  </thead>
  <tbody>
    <tr><td>cat</td><td>one</td></tr>
    <tr><td>dog</td><td>two</td></tr>
    <tr><td>cat</td><td>three</td></tr>
    <tr><td>moose</td><td>four</td></tr>
    <tr><td>mouse</td><td>five</td></tr>
    <tr><td>dog</td><td>six</td></tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:07:47.823

你可以做这样的事情，我没有重用你拥有的任何代码。我在矿山中解释了它在做什么。

```
$("th input[type=text]").keyup(function () {
    var reg = new RegExp(this.value, 'i'); // <-- regex case insensitive
    var ind = $(this).closest('th').index(); // index of th - so we know which side to filter
    var tds = $('tr').find('td:eq(' + ind + ')'); // get the corresponding td's
    var match = tds.filter(function (i, v) {
      return reg.test($(v).text()); // return only td's that match
    });
    tds.not(match).css('visibility', 'hidden'); // hide ones that don't match
    match.css('visibility', 'visible'); // show matching
}); 
```

[小提琴](http://jsfiddle.net/ENjWe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:16:38.167

我不完全理解。我做了一些简单的例子，只有一列测试：

```
 $(document).ready(function() {

    $("input[name=Animals]").keydown(function() {
        setTimeout(function() {
            $("td:first", "tbody>tr").each(function() {
                lookfor = $("input[name=Animals]").val();
                if (new RegExp(lookfor, "i").test($(this).text()))
                    $(this).parent().show();
                else
                    $(this).parent().fadeOut();
            }, 0);

        });

    });
}); 
```

ps 如果你使用key tracking handle keydown 然后让浏览器通过setTimeout(yourjob,0) 更新。给用户带来更好的感受。

[http://jsfiddle.net/mAvW/19/](http://jsfiddle.net/mAAvW/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T22:38:24.907

嗯，这是我的解决方案......没有正则表达式，更多的是使用您使用的相同东西的简单解决方案

只要您的搜索框具有相同的类名，这将是完美的

```
 $(document).ready(function() {
   var column ;
    $(':input').focus(function(){
        column = $(this).parent('td').index();
        column = column+1;
        console.log(column); //logs number of the column

    })
     $('.search').keyup(function(){

        var v = $(this).val();
         if(v.length == 0) {
         $('#fbody tr td:nth-child('+column+')').show();

         }else{
            console.log(v.length);
            $('#fbody tr td:nth-child('+column+')').not( $('#fbody tr td:nth-child('+column+')').filter("*:contains('"+v+"')")).hide();
            $('#fbody tr td:nth-child('+column+')').filter("*:contains('"+v+"')").show();

         }

     })
  }); 
```

# tridion - SchemaTitleCriteria 在 SDL Tridion Broker 查询中不产生任何结果

> ID：14530742
> 
> 赞同：8
> 
> 时间：2013-01-25T21:32:57.037
> 
> 标签：tridion, tridion-content-delivery

我有一个简单的 SDL Tridion 2011 SP1 代理查询来检索组件 URI 列表。我所有的组件都嵌入在页面上，而不是使用动态组件模板。以下代码返回 50 个结果（这是意料之中的）。其中之一是 URI tcm:123-456-16。

```
List<Criteria> criteria = new List<Criteria>();
criteria.Add(new ItemTypeCriteria(16));
criteria.Add(new PublicationCriteria(337));
Query query = new Query(CriteriaFactory.And(criteria.ToArray<Criteria>()));
String[] results =  query.ExecuteQuery(); 
```

组件 tcm:123-456-16 基于名为“News Portal”的模式。我想为我的查询添加额外的条件，以便我只获取基于该模式的项目，所以我尝试了以下代码：

```
List<Criteria> criteria = new List<Criteria>();
criteria.Add(new ItemTypeCriteria(16));
criteria.Add(new PublicationCriteria(337));
criteria.Add(new SchemaTitleCriteria("News Portal"));
Query query = new Query(CriteriaFactory.And(criteria.ToArray<Criteria>()));
String[] results =  query.ExecuteQuery(); 
```

这根本不返回任何结果。我已经仔细检查了我的架构名称。这是预期的反应吗？是否`SchemaTitleCriteria`需要将组件发布为动态组件演示。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T21:52:25.920

在 DCP 上是和否。您不需要将所有组件发布为动态组件演示 (DCP)。我们注意到了同样的情况，并观察到如果您不发布至少一个基于模式的 DCP，则模式标题不会发布到 Tridion Broker DB 的 Schemas 表中（不确定它是否是设计使然）。一旦您基于架构发布了一个 DCP，架构标题就会被存储并且后续查询会起作用，但在您发布第一个 DCP 之前，您将无法获得任何信息。

但是在实际场景中，您执行代理查询以获取 dcps，因此您不应该看到此行为，除非是错误或有人错过了它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T21:37:41.550

为什么组件会出现在第一个结果集中，而不出现在第二个结果集中？

我怀疑这是无意的行为，值得 SDL 提出。

要修复它，您需要使用**ItemSchemaCriteria**而不是**SchemaTitleCriteria**并根据架构 ID 而不是架构标题获取组件。

要使用**SchemaTitleCriteria**，我想您至少需要发布一个基于新闻门户模式的组件以及一个动态组件模板，以便内容交付数据库包含模式标题信息。

# ruby-on-rails - 从不同控制器的不同操作渲染页面的不同部分

> ID：14530743
> 
> 赞同：2
> 
> 时间：2013-01-25T21:32:59.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我有一个索引页面，我决定在其中呈现用户名、帖子和其他信息源。由于 Devise 负责用户创建和登录会话管理，我知道需要有多个控制器。

PostsController、DashboardController 和 RandomController。计划是让它们呈现在页面的不同部分，具有不同的大小和不同的位置。

假设我有`Post.find(:all => :order => "created_at DESC")`PostsController。我想在页面上的某个地方呈现它。我想在属于他们的相应帖子下呈现用户名，并且我想呈现一些仍然“随机”的控制器动作，它将在页面上的某个随机位置发布新闻。

**回顾一下：**

PostsController 查找并呈现索引页面的某些部分，我猜 DeviseControllers 呈现属于相应用户名的用户名，而 Random 控制器呈现来自新闻或页面中间的一些随机内容。其中所有这些都发生在另一个名为 DashBoard 的控制器上。因此，所有这些控制器操作都应该在自己的 DashBoard 控制器索引视图上呈现。

关于如何实现这一点的任何提示或好主意。我知道部分渲染，但我不知道如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:59:00.440

看来我们正在谈论由 Dashboard#index 呈现的视图。因此，您需要做的就是将页面上的所有信息定义为索引操作下的实例变量。

可能您缺少的信息是控制器可以自由使用来自任何模型的数据（甚至是其他不从 ActiveRecord::Base 继承的类）。

例如，在 Dashboard#index 中，您可以拥有：

```
@posts = Post.order("created_at DESC").all 
```

这是指与仪表板模型不同的模型（假设存在一个）。

# ios - 在当前 ViewController xcode 上显示 UIPickerView

> ID：14530744
> 
> 赞同：0
> 
> 时间：2013-01-25T21:33:04.087
> 
> 标签：ios, objective-c, xcode, uipickerview

这是我目前的问题。我有一个 UIViewController 设置，它的数据和所有东西都在一个小型视图控制器上。我想看看是否可以将其连接到单独的视图控制器。例如，我有一个让用户单击按钮的视图控制器。按下按钮后，UIPicker ViewController 将从底部弹出，我可以从那里开始。如果选择器在同一个视图控制器上，我知道如何启用它。但是，我不知道如何使用它自己的 ViewController。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:36:21.260

一种方法是将选取器视图放在同一个视图控制器上并使其隐藏，并且当他们按下按钮时，取消隐藏它或在按下按钮时加载另一个视图控制器；这将显示另一个视图控制器，而不是当前视图控制器上的内容。

# python - 将多个 CSV 文件中的列合并到一个文件中

> ID：14530748
> 
> 赞同：14
> 
> 时间：2013-01-25T21:33:28.930
> 
> 标签：python, csv

我有一堆 CSV 文件（下面的示例中只有两个）。每个 CSV 文件有 6 列。我想进入每个 CSV 文件，复制前两列并将它们作为新列添加到现有 CSV 文件中。

到目前为止，我有：

```
import csv

f = open('combined.csv')
data = [item for item in csv.reader(f)]
f.close()

for x in range(1,3): #example has 2 csv files, this will be automated
    n=0
    while n<2:
        f=open(str(x)+".csv")
        new_column=[item[n] for item in csv.reader(f)]
        f.close()
        #print d

        new_data = []

        for i, item in enumerate(data):
            try:
                item.append(new_column[i])
                print i
            except IndexError, e:
                item.append("")
            new_data.append(item)

        f = open('combined.csv', 'w')
        csv.writer(f).writerows(new_data)
        f.close()
        n=n+1 
```

这行得通，它不漂亮，但它有效。但是，我有三个小烦恼：

1.  我打开每个 CSV 文件两次（每列一次），这并不优雅

2.  当我打印`combined.csv`文件时，它会在每一行之后打印一个空行？

3.  我必须提供一个`combined.csv`文件，其中的行数至少与我可能拥有的最大文件一样多。因为我真的不知道这个数字可能是多少，这有点糟糕

一如既往，非常感谢任何帮助！

根据要求：1.csv 看起来像（模拟数据）

```
1,a
2,b
3,c
4,d 
```

2.csv 看起来像

```
5,e
6,f
7,g
8,h
9,i 
```

组合的.csv 文件应该看起来像

```
1,a,5,e
2,b,6,f
3,c,7,g
4,d,8,h
,,9,i 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T23:25:44.170

```
import csv
import itertools as IT

filenames = ['1.csv', '2.csv']
handles = [open(filename, 'rb') for filename in filenames]    
readers = [csv.reader(f, delimiter=',') for f in handles]

with  open('combined.csv', 'wb') as h:
    writer = csv.writer(h, delimiter=',', lineterminator='\n', )
    for rows in IT.izip_longest(*readers, fillvalue=['']*2):
        combined_row = []
        for row in rows:
            row = row[:2] # select the columns you want
            if len(row) == 2:
                combined_row.extend(row)
            else:
                combined_row.extend(['']*2)#This extends two empty columns
        writer.writerow(combined_row)

for f in handles:
    f.close() 
```

* * *

该行`for rows in IT.izip_longest(*readers, fillvalue=['']*2):` 可以通过一个示例来理解：

```
In [1]: import itertools as IT

In [2]: readers = [(1,2,3), ('a','b','c','d'), (10,20,30,40)]

In [3]: list(IT.izip_longest(readers[0], readers[1], readers[2]))
Out[3]: [(1, 'a', 10), (2, 'b', 20), (3, 'c', 30), (None, 'd', 40)] 
```

如您所见，[IT.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)的行为与 非常相似`zip`，只是它在最长的可迭代对象被消耗之前不会停止。它默认填充缺失的项目`None`。

现在如果有超过 3 个项目会发生什么`readers`？我们想写

```
list(IT.izip_longest(readers[0], readers[1], readers[2], ...)) 
```

但这很费力，如果我们事先不知道`len(readers)`，我们甚至无法将省略号 ( `...`) 替换为明确的内容。

Python 对此有一个解决方案：[星号（又名参数解包）语法](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)：

```
In [4]: list(IT.izip_longest(*readers))
Out[4]: [(1, 'a', 10), (2, 'b', 20), (3, 'c', 30), (None, 'd', 40)] 
```

请注意，结果与结果`Out[4]`相同`Out[3]`。

`*readers`告诉 Python 解包这些项目并将`readers`它们作为单独的参数发送到`IT.izip_longest`. 这就是 Python 允许我们向函数发送任意数量的参数的方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-26T00:00:45.183

如今，对于Python 中的任何数据处理问题，人们似乎几乎有义务提供基于[pandas的解决方案。](http://pandas.pydata.org/)所以这是我的：

```
import pandas as pd

to_merge = ['{}.csv'.format(i) for i in range(4)]
dfs = []
for filename in to_merge:
    # read the csv, making sure the first two columns are str
    df = pd.read_csv(filename, header=None, converters={0: str, 1: str})
    # throw away all but the first two columns
    df = df.ix[:,:1]
    # change the column names so they won't collide during concatenation
    df.columns = [filename + str(cname) for cname in df.columns]
    dfs.append(df)

# concatenate them horizontally
merged = pd.concat(dfs,axis=1)
# write it out
merged.to_csv("merged.csv", header=None, index=None) 
```

哪个文件

```
~/coding/pand/merge$ cat 0.csv 
0,a,6,5,3,7
~/coding/pand/merge$ cat 1.csv 
1,b,7,6,7,0
2,c,0,1,8,7
3,d,6,8,4,5
4,e,8,4,2,4
~/coding/pand/merge$ cat 2.csv 
5,f,6,2,9,1
6,g,0,3,2,7
7,h,6,5,1,9
~/coding/pand/merge$ cat 3.csv 
8,i,9,1,7,1
9,j,0,9,3,9 
```

给

```
In [21]: !cat merged.csv
0,a,1,b,5,f,8,i
,,2,c,6,g,9,j
,,3,d,7,h,,
,,4,e,,,,

In [22]: pd.read_csv("merged.csv", header=None)
Out[22]: 
    0    1  2  3   4    5   6    7
0   0    a  1  b   5    f   8    i
1 NaN  NaN  2  c   6    g   9    j
2 NaN  NaN  3  d   7    h NaN  NaN
3 NaN  NaN  4  e NaN  NaN NaN  NaN 
```

我认为这是正确的对齐方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T22:38:39.383

这是我为解决您的问题而编写的程序。它创建了一个类，其中包含有关要读取的每个 CSV 文件的信息，包括您想要从中获取哪些列。然后只是一个要读取的 CSV 文件列表，并从每个文件中读取一行。

由于您说它需要继续返回行，直到读取所有输入文件，所以它为已到达末尾的输入文件返回虚拟值。它一直读取行，直到完成所有输入文件。

此外，这个程序只需要在内存中一次保存一行。因此，它甚至可以处理大型 CSV 文件，而无需太多内存。

最初，我对缺失数据的虚拟值为 -1。现在我看到您添加了一个示例，而您只是不想要任何价值。我已将程序从使用 -1 更改为在没有数据时使用空字符串。

设计目标之一是使其可扩展。现在您需要前两列，但如果您稍后需要其中一个文件的第 0、3 和 7 列怎么办？所以每个文件都有一个包含列的列表。

我实际上并没有编写代码来将输出文件重命名为原始文件名，但这很容易添加。

理想情况下，这整件事将被包装到一个类中，您可以在其中迭代一个类实例并使用所有输入文件中的列将一行放在一起。我没有花额外的时间来做这件事，但如果你要长期使用它，你可能想要这样做。此外，我从不费心关闭任何输入文件，因为我认为程序将在我们编写输出文件后结束，然后一切都会关闭；但理想情况下，我们应该在使用完所有文件后关闭它们！

```
import csv

fname_in = "combined.csv"
fname_out = "combined.tmp"

lst_other_fnames = [str(x) + ".csv" for x in range(1, 3)]

no_data = ''
def _no_data_list(columns):
    return [no_data for _ in columns]

class DataCsvFile(object):
    def __init__(self, fname, columns=None):
        self.fname = fname
        self.f = open(fname)
        self.reader = csv.reader(self.f)
        self.columns = columns
        self.done = False
    def next_columns(self):
        if self.done:
            return _no_data_list(self.columns)

        try:
            item = next(self.reader)
        except StopIteration:
            self.done = True
            return _no_data_list(self.columns)

        return [item[i] for i in self.columns]

# want all columns from original file
data_csv_files = [DataCsvFile(fname_in, range(5))]

# build list of filenames and columns: want first two columns from each
data_csv_files.extend(DataCsvFile(fname, range(2)) for fname in lst_other_fnames)

with open(fname_out, "w") as out_f:
    writer = csv.writer(out_f)

    while True:
        values = []
        for df in data_csv_files:
            columns = df.next_columns()
            values.extend(columns)
        if not all(df.done for df in data_csv_files):
            writer.writerow(values)
        else:
            break 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T21:55:39.060

这是一个示例（为简单起见，我使用字符串 io 而不是文件，但这不是必需的）：

```
a = u"""
1,a
2,b
3,c
4,d
"""
b = u"""
5,e
6,f
7,g
8,h
9,i
"""
c = u"""
11,x
12,y
13,z
"""

import io, csv, itertools

data = []
expand = lambda it, size: it + [[''] * len(it[0])] * size

for f in [a, b, c]:
    with io.StringIO(f.strip()) as fp:
        d = list(csv.reader(fp))
        t = len(d) - len(data)
        data = d if not data else [
            x + y for x, y in itertools.izip_longest(
                expand(data, t), expand(d, -t))]

for r in data:
    print ','.join(r)    

# 1,a,5,e,11,x
# 2,b,6,f,12,y
# 3,c,7,g,13,z
# 4,d,8,h,,
# ,,9,i,, 
```

对于真实文件（名为 1.csv、2.csv 等），主循环将如下所示：

```
for n in range(...):
    with open(str(n) + '.csv') as fp:
        d = list(csv.reader(fp))
        t = len(d) - len(data)
        data = d if not data else [
            x + y for x, y in itertools.izip_longest(
                expand(data, t), expand(d, -t))] 
```

# c# - 使用 WCF 服务的多个实例

> ID：14530749
> 
> 赞同：-1
> 
> 时间：2013-01-25T21:33:29.603
> 
> 标签：c#, wcf, dns, cluster-computing

我对WCF非常非常。相反，这是我在 WCF 的第一次尝试。我有一项在我的本地系统上运行良好的服务。我有以下要求。我需要在集群服务器环境中托管服务。我将有一组让我们说 3 台服务器。我应该如何托管服务？我想将它托管在 IIS 中。我是否在所有三台服务器上托管服务？如果是这样，如果主服务器由于某种原因关闭，他们将如何回退。我可以有一个指向活动服务器的端点地址吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:41:05.473

如果您在不使用会话状态的情况下编写代码，则可以在 3 个服务器前使用负载平衡器来处理集群。确保以与执行调用时所在的服务器无关的方式编写代码，因为它可能与下一个调用不同。

# php - Xampp 服务器和路径

> ID：14530751
> 
> 赞同：0
> 
> 时间：2013-01-25T21:33:35.397
> 
> 标签：php, apache, webserver, xampp, html5boilerplate

我在使用 xampp 时遇到了困难，这真的让我发疯了。我很少安装带有根模板的 Wordpress，它在没有任何 css、js..etc 的情况下加载。解决方案是删除 Boilerplates 默认的 .htaccess 并添加：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^assets/css/(.*) /wp-content/themes/test_template/assets/css/$1 [QSA,L]
RewriteRule ^assets/js/(.*) /wp-content/themes/test_template/assets/js/$1 [QSA,L]
RewriteRule ^assets/img/(.*) /wp-content/themes/test_template/assets/img/$1 [QSA,L]
RewriteRule ^plugins/(.*) /wp-content/plugins/$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

现在我面临同样的问题，但使用 HTML5 Boilerplate 和 Twitter-bootstrap，没有复杂代码的标准 html5 文件。我试过使用：

```
 dirname(__FILE__); 
```

它仍然无法找到文件。有人遇到同样的问题并找到了解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:51:52.157

我认为您需要尝试 AMPPS。AMPPS 是一个软件堆栈，可在桌面上启用 Apache、Mysql、MongoDB、PHP、Perl、Python 和自动安装程序。这包括网站开发所需的一切。您可以从开源 Web 应用程序开始开发您的网站，也可以自己开始编写代码。AMPPS 允许您编写和测试 PHP、Perl 和 Python 应用程序。**使用 AMPPS，您可以通过安装任何288 应用程序**来创建网站，对其进行自定义，然后使用集成的 FTP 客户端将其发布到互联网上。

AMPPS 有一个控制中心，用于控制 Apache、MySQL、FTP、MongoDB 等服务器，并允许用户编辑相应服务器的配置文件并在出现错误时检查日志文件... 网站：[http:// www.ampps.com/](http://www.ampps.com/)

# objective-c - 目标 C：在消息传递中进行算术运算时的语法

> ID：14530752
> 
> 赞同：-2
> 
> 时间：2013-01-25T21:33:43.057
> 
> 标签：objective-c

我正在学习 Obj-C 并且无法理解这种语法，第一行有效，但第二行，我`length`对它抱怨的整数 (-1) 执行算术运算。为什么是这样？

```
self.historyDisplay.text = [self.historyDisplay.text 
          substringToIndex:[self.historyDisplay.text length]];

self.historyDisplay.text = [self.historyDisplay.text 
          substringToIndex:[self.historyDisplay.text length-1]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:34:41.247

`length`不是整数，它是*返回*整数的消息的名称。您想对该结果进行数学运算，因此您需要在`-1`消息之外（`text`此处使用变量来缩短行）：

```
text = self.historyDisplay.text;
self.historyDisplay.text = [text substringToIndex:[text length] - 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:34:51.027

该`[target selector]`语法封装了消息分派。计算它的结果——在方括号之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:35:12.090

`length`是返回长度的消息的名称，所以

```
[self.historyDisplay.text length-1] 
```

是语法错误，应该是

```
[self.historyDisplay.text length] - 1 
```

反而。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T21:35:24.197

```
self.historyDisplay.text = [self.historyDisplay.text substringToIndex:[self.historyDisplay.text length]-1]; 
```

# sql - 在 Access 中选择 Distinct？语法错误

> ID：14530755
> 
> 赞同：2
> 
> 时间：2013-01-25T21:34:00.000
> 
> 标签：sql, ms-access-2007

我有这个 SQL：

```
SELECT (Min(Time_In) & " to " & Max(Time_Out)) AS [Week Of],
 Round((Sum(DATEDIFF("n", Time_In, Time_Out))/Count(DATEDIFF("n", Time_In, Time_Out))),2) AS [Avg Min of Jog]
FROM SomeTable
WHERE len(Time_In) > 0 AND len(Time_Out) > 0 
AND #01/01/2012# <= Time_In AND #12/31/2012# >= Time_In
GROUP BY DatePart('ww',Time_In); 
```

其中选择了每周慢跑的平均时间。我还想计算每周慢跑多少次，我试图通过计算`jog_id`where`SomeTable`可能有 5 个条目来计算一个`jog_id`。

我努力了：

```
SELECT (Min(Time_In) & " to " & Max(Time_Out)) AS [Week Of],
 Round((Sum(DATEDIFF("n", Time_In, Time_Out))/Count(DATEDIFF("n", Time_In, Time_Out))),2) AS [Avg Min of Jog],
 Count(distinct jog_id) AS [Num Jogs]
FROM SomeTable
WHERE len(Time_In) > 0 AND len(Time_Out) > 0 
AND #01/01/2012# <= Time_In AND #12/31/2012# >= Time_In
GROUP BY DatePart('ww',Time_In); 
```

但这给了我`Syntax error (missing operator) in query expression 'Count(distinct jog_id)'.`

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:38:51.740

如果不使用子查询，您将无法在 Access 中执行此操作。
前任：

```
SELECT Count(*)
FROM
(SELECT DISTINCT Name FROM table1); 
```

[这](http://web.archive.org/web/20120805022223/http://blogs.office.com/b/microsoft-access/archive/2007/09/19/writing-a-count-distinct-query-in-access.aspx)是有关该主题的详细文章：

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T21:37:42.970

Access 在几乎所有情况下都拒绝做好事，其中之一就是`Count(distinct x)`.

# .net - 你如何总结 XSLT 中调用模板的结果？

> ID：14530762
> 
> 赞同：3
> 
> 时间：2013-01-25T21:35:03.137
> 
> 标签：.net, xml, xslt, xslt-1.0

我有一些XML如下；

```
<risk>
  <driver driverId="2">
    <vehicleUse>M</vehicleUse>
  </driver>
  <driver driverId="3">
    <vehicleUse>F</vehicleUse>
  </driver>
  <driver driverId="4">
    <vehicleUse>I</vehicleUse>
  </driver>
</risk> 
```

我正在使用 XSLT（v1.0，.NET 实现）将每个 vehicleUse 转换为一个数字，然后得到这些数字的总和。车辆使用被翻译为 M=3、F=2 和 I=1。一个额外的复杂性是，对于 ID 为 3 的驱动程序，这些值乘以 10，而对于驱动程序 4，则乘以 100。因此，在上面的示例中，总数为 3 + 20 + 100 = 123。

我已经像这样在我的 XSLT 文件中定义了一个模板；

```
<xsl:template name="getVehicleUseScore">
  <xsl:param name="driverId" />
  <xsl:param name="vehicleUse" />
  <!-- Implementation left out for brevity -->
</xsl:template> 
```

然后 XSLT 文件的其余部分调用模板；

```
<xsl:template match="risk">
  <vehicleUseScore>
    <xsl:for-each select="driver">
      <xsl:call-template name="getVehicleUseScore">
        <xsl:with-param name="driverId" select="@driverId" />
        <xsl:with-param name="vehicleUse" select="vehicleUse" />
      </xsl:call-template>
    </xsl:for-each>
  </vehicleUseScore>
</xsl:template>

<xsl:template match="/">
  <xsl:apply-templates />
</xsl:template> 
```

结果是我得到了文本“320100”，它只是将 3、20 和 100 连接在一起，这至少证明了 getVehicleUseScore 模板有效。

我想将 getVehicleUseScore 的结果传递给 sum() 函数，但我不知道如何。我尝试了以下方法；

```
<xsl:value-of select="sum(getVehicleUseScore(@driverId, vehicleUse))" /> 
```

但是 XSLT 编译器声明“getVehicleUseScore() 是一个未知的 XSLT 函数”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:18:19.320

**这是执行此操作的简短 XSLT 1.0 方法**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

 <xsl:template match="risk">
  <vehicleUseScore>
   <xsl:variable name="vrtfResult">
        <xsl:for-each select="driver">
          <xsl:call-template name="getVehicleUseScore">
            <xsl:with-param name="pdriverId" select="@driverId" />
            <xsl:with-param name="pvehicleUse" select="vehicleUse" />
          </xsl:call-template>
        </xsl:for-each>
    </xsl:variable>

    <xsl:value-of select="sum(msxsl:node-set($vrtfResult)/*)"/>
  </vehicleUseScore>
 </xsl:template>

 <xsl:template name="getVehicleUseScore">
  <xsl:param name="pdriverId" />
  <xsl:param name="pvehicleUse" />
  <score>
   <xsl:variable name="vValue" select=
   "(($pvehicleUse='M')*3 + ($pvehicleUse='F')*2 + ($pvehicleUse='I')*1)"/>
   <xsl:variable name="vFactor" select=
   "1 +(9*($pdriverId=3)) + (99*($pdriverId=4))"/>

   <xsl:value-of select="$vValue*$vFactor"/>
  </score>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<risk>
    <driver driverId="2">
        <vehicleUse>M</vehicleUse>
    </driver>
    <driver driverId="3">
        <vehicleUse>F</vehicleUse>
    </driver>
    <driver driverId="4">
        <vehicleUse>I</vehicleUse>
    </driver>
</risk> 
```

**产生了想要的正确结果：**

```
<vehicleUseScore>123</vehicleUseScore> 
```

**说明**：

在变量中捕获模板的输出时，此变量的类型为 RTF（结果树片段），除非其内容包含任何节点（文本节点除外），否则 XPath 表达式无法导航其内容。

为此，`xxx:node-set()`需要对该变量调用依赖于供应商的扩展函数，以便将 RTF 转换为常规树。

在这里，我们还使用了这样一个事实，即每当在算术表达式中遇到布尔值时，它都会被转换为数字，并且根据定义：

```
number(true()) = 1 
```

和

```
number(false()) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:30:13.090

另一种更冗长但避免使用`node-set()`函数的方法（我喜欢尽可能避免使用专有函数，即使`node-set()`只是*半*专有的）是使用递归：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="risk">
    <vehicleUseScore>
      <xsl:call-template name="sumDriverScores">
        <xsl:with-param name="drivers" select="driver" />
      </xsl:call-template>
    </vehicleUseScore>
  </xsl:template>

  <xsl:template name="sumDriverScores">
    <xsl:param name="drivers" />

    <xsl:if test="not($drivers)">
      <xsl:text>0</xsl:text>
    </xsl:if>
    <xsl:if test="$drivers">
      <xsl:variable name="currentValue">
        <xsl:call-template name="getVehicleUseScore">
          <xsl:with-param name="driverId" select="$drivers[1]/@driverId" />
          <xsl:with-param name="vehicleUse" select="$drivers[1]/vehicleUse" />
        </xsl:call-template>
      </xsl:variable>

      <xsl:variable name="sumRemainder">
        <xsl:call-template name="sumDriverScores">
          <xsl:with-param name="drivers" select="$drivers[position() > 1]" />
        </xsl:call-template>
      </xsl:variable>

      <xsl:value-of select="$currentValue + $sumRemainder"/>
    </xsl:if>
  </xsl:template>

  <xsl:template name="getVehicleUseScore">
    <xsl:param name="driverId" />
    <xsl:param name="vehicleUse" />
    <xsl:variable name="useFactor" select="translate($vehicleUse, 'MFI', '321')"/>
    <xsl:variable name="idFactor" 
                  select="1 + 9 * ($driverId = 3) +  99 * ($driverId = 4)"/>

    <xsl:value-of select="$useFactor * $idFactor"/>
  </xsl:template>
</xsl:stylesheet> 
```

输出是：

```
<vehicleUseScore>123</vehicleUseScore> 
```

# r - rda() 在数据框中使用条件或约束因子/有序变量

> ID：14530766
> 
> 赞同：1
> 
> 时间：2013-01-25T21:35:41.170
> 
> 标签：r, vegan

我有一个环境数据集，它是混合数据（因子、有序和数字）。我想对该`rda()`函数使用以下输入方法：

```
rda(X= Community, Y=Constrained, Z= Conditional) 
```

但是，如果我以这种方式输入所有 3 个数据框，它们需要是矩阵。我不想将约束或条件数据帧转换为矩阵，因为我已在其中分解和排序数据。我发现以正确格式输入它们的唯一另一种方法是将它们单独分解为所有向量。如果您手动执行此操作，则此方法有效，但我需要遍历几个条件和约束数据框。有人有什么想法吗？

一个例子：

```
library(vegan)
data(dune)
data(dune.env)

rda(dune ~ dune.env$A1 + dune.env$Moisture + dune.env$Management + 
    Condition(dune.env$Use + dune.env$Manure)) 
```

这就是我想做的，但它很长，而且很难编写代码来迭代数据集

```
rda(X=dune, Y=dune.env[,1:3], Z=dune.env[,4:5]) 
```

如果这是可能的，那就太好了，因为我可以将约束变量放在一个数据框中，将条件变量放在另一个数据框中，但它们必须是矩阵，这会混淆有序变量和因子变量。

非常感谢您的帮助

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:22:21.073

`rda()``rda(X, Y, Z)`在模式中调用时将获取数据帧。关于社区数据矩阵的论点，`?rda`但数据框架是可以接受的，甚至可以假设，因为我们通过转换这些输入`as.matrix()`，这就是问题所在。

你`rda()`用公式打电话很傻。有一个`data`论点，所以你可以这样做：

```
rda(dune ~ A1 + Moisture + Management + Condition(Use + Manure), data = dune.env) 
```

这有点容易，也不那么冗长。

也可以走捷径，

```
rda(dune ~ . + Condition(Use + Manure), data = dune.env) 
```

通过使用`.`并且仅在数据对象中具有模型拟合所需的那些变量。

您可以通过让 R 为您构建公式来做到这一点。

```
nams <- names(dune.env)
form <- formula(paste("dune ~", paste(nams[1:3], collapse = " + "),
                      "+ Condition(", paste(nams[4:5], collapse = " + "), ")"))
rda(form, data = dune.env) 
```

虽然这看起来很复杂，但它可以很容易地包装到一个函数中：

```
buildF <- function(X, Y, Z, data) {
  nams <- names(data)
  X <- deparse(substitute(X))
  f <- formula(paste(X, " ~", paste(nams[Y], collapse = " + "),
               "+ Condition(", paste(nams[Z], collapse = " + "), ")"))
  environment(f) <- parent.frame()
  f
} 
```

在使用中给出：

```
> buildF(dune, 1:3, 4:5, data = dune.env)
dune ~ A1 + Moisture + Management + Condition(Use + Manure)
> f <- buildF(dune, 1:3, 4:5, data = dune.env)
> f
dune ~ A1 + Moisture + Management + Condition(Use + Manure)
> rda(f, data = dune.env)
Call: rda(formula = dune ~ A1 + Moisture + Management +
Condition(Use + Manure), data = dune.env)

              Inertia Proportion Rank
Total         84.1237     1.0000     
Conditional   35.3628     0.4204    6
Constrained   27.8434     0.3310    6
Unconstrained 20.9175     0.2487    7
Inertia is variance 
Some constraints were aliased because they were collinear (redundant)

Eigenvalues for constrained axes:
  RDA1   RDA2   RDA3   RDA4   RDA5   RDA6 
14.674  4.718  2.756  2.346  2.085  1.265 

Eigenvalues for unconstrained axes:
   PC1    PC2    PC3    PC4    PC5    PC6    PC7 
6.6269 4.3091 3.5491 2.5465 2.3403 0.9335 0.6121 
```

[与其他输出完全相同`rda()`，未显示。]

# thunderbird - 可以使用 Thunderbird.cfg 创建 Lightning 日历吗？

> ID：14530767
> 
> 赞同：1
> 
> 时间：2013-01-25T21:35:44.950
> 
> 标签：thunderbird, lightning, thunderbird-lightning

我们已经设置了一个 calDav 服务器并计划在我们的企业内进行部署，但是在使用 Thunderbird.cfg、default.js、all.js 或 user.js 在 Thunderbird 中创建 calDav 日历时遇到了问题。有没有一种方法可以在 Thunderbird 中自动创建这些日历，或者我们是否必须创建一个附加组件才能做到这一点？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:14:42.137

闪电日历可以使用标准首选项创建，然后使用您描述的机制（Thunderbird.cfg、default.js、all.js、user.js，...）注入。这些是强制性的偏好：

```
calendar.registry.{uuid}.type = "caldav"
calendar.registry.{uuid}.uri = "https://path/to/calendar/"
calendar.registry.{uuid}.name = "My Calendar" 
```

这些是可选的：

```
calendar.registry.{uuid}.cache.enabled = true
calendar.registry.{uuid}.color = "#330099"
// id1 must be the key as in prefs.js for the email identity.
calendar.registry.{uuid}.imip.identity.key = "id1"
calendar.registry.{uuid}.readOnly = true
calendar.registry.{uuid}.refreshInterval = 30 // minutes
// visible, i.e checked in the calendar list
calendar.registry.{uuid}.calendar-main-in-composite = true 
```

# r - 为非线性最小二乘拟合计算 R^2

> ID：14530770
> 
> 赞同：17
> 
> 时间：2013-01-25T21:35:54.457
> 
> 标签：r

假设我有`x`值、`y`值和预期 y 值`f`（来自一些非线性最佳拟合曲线）。

如何计算 R 中的 R^2？请注意，此函数不是线性模型，而是非线性最小二乘 ( `nls`) 拟合，因此不是`lm`拟合。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T21:37:41.023

您只需使用该`lm`函数来拟合线性模型：

```
x = runif(100)
y = runif(100)
spam = summary(lm(x~y))
> spam$r.squared
[1] 0.0008532386 
```

请注意，r 平方不是为非线性模型定义的，或者至少非常棘手，[引用自 R-help](https://stat.ethz.ch/pipermail/r-help/2002-July/023461.html)：

> 有一个很好的理由是，适合 R 的 nls 模型不提供 r-squared - r-squared 对于一般的 nls 模型没有意义。
> 
> r-squared 的一种思考方式是将拟合模型的残差平方和与仅由常数组成的平凡模型的残差平方和进行比较。在处理 nls 模型时，您不能保证这是嵌套模型的比较。如果模型没有嵌套，那么这种比较就没有多大意义。
> 
> 所以答案是你可能一开始就不想这样做。

如果您想要同行评审的证据，请参阅[这篇文章](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2892436/)；并不是说您*无法*计算 R^2 值，只是它可能与线性模型案例中的含义不同/具有相同的理想属性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-25T21:43:43.917

听起来 f 是您的预测值。所以它们到实际值的距离除以 n * y 的方差

所以像

`1-sum((y-f)^2)/(length(y)*var(y))`

应该给你一个准 rsquared 值，只要你的模型相当接近线性模型并且 n 相当大。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-14T14:56:40.897

作为对所提出问题的直接回答（而不是争论 R2/伪 R2 没有用），包`nagelkerke`中的函数`rcompanion`将报告 McFadden、Cox 和 Snell 提出的非线性最小二乘 (nls) 模型的各种伪 R2 值，和 Nagelkerke，例如

```
require(nls)
data(BrendonSmall)
quadplat = function(x, a, b, clx) {
          ifelse(x  < clx, a + b * x   + (-0.5*b/clx) * x   * x,
                           a + b * clx + (-0.5*b/clx) * clx * clx)}
model = nls(Sodium ~ quadplat(Calories, a, b, clx),
            data = BrendonSmall,
            start = list(a   = 519,
                         b   = 0.359,
                         clx = 2304))
nullfunct = function(x, m){m}
null.model = nls(Sodium ~ nullfunct(Calories, m),
             data = BrendonSmall,
             start = list(m   = 1346))
nagelkerke(model, null=null.model) 
```

该`soilphysics`包还报告 Efron 的伪 R2 和调整后的模型的伪 R2 值为`nls`1 - RSS/TSS：

```
pred <- predict(model)
n <- length(pred)
res <- resid(model)
w <- weights(model)
if (is.null(w)) w <- rep(1, n)
rss <- sum(w * res ^ 2)
resp <- pred + res
center <- weighted.mean(resp, w)
r.df <- summary(model)$df[2]
int.df <- 1
tss <- sum(w * (resp - center)^2)
r.sq <- 1 - rss/tss
adj.r.sq <- 1 - (1 - r.sq) * (n - int.df) / r.df
out <- list(pseudo.R.squared = r.sq,
            adj.R.squared = adj.r.sq) 
```

这也是由包中的函数`pseudo R2`计算得出的。基本上，这个 R2 衡量你的合身程度与你只画一条穿过它们的水平线相比有多好。如果您的空模型是一个只允许拦截模型的模型，这对模型是有意义的。同样对于特定的其他非线性模型，它也很有意义。例如，对于使用严格递增样条曲线的[骗局](https://cran.r-project.org/web/packages/scam/index.html)模型（样条曲线术语中的 bs="mpi"），最坏可能情况（例如，您的数据严格递减）的拟合模型将是一条平线，因此会导致一个`accuracy``rcompanion``nls``R2`为零。调整后的 R2 也会惩罚拟合参数 nrs 较高的模型。使用调整后的 R2 值已经解决了上面链接的论文的许多批评，[http](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2892436/) ://www.ncbi.nlm.nih.gov/pmc/articles/PMC2892436/（如果有人发誓使用信息标准来做模型选择问题变成了使用哪一个 - AIC、BIC、EBIC、AICc、QIC 等）。

只是使用

```
r.sq <- max(cor(y,yfitted),0)^2
adj.r.sq <- 1 - (1 - r.sq) * (n - int.df) / r.df 
```

我认为如果你有正常的高斯误差也是有意义的 - 即观察到的和拟合的 y 之间的相关性（剪裁为零，因此负关系意味着零预测能力）平方，然后针对拟合参数的 nr 进行调整调整后的版本。如果`y`和`yfitted`朝着相同的方向前进，这将是常规线性模型报告的`R2`和值。`adjusted R2`对我来说，这至少是完全合理的，所以我不同意完全拒绝模型`pseudo R2`值的有用性，`nls`正如上面的答案似乎暗示的那样。

对于非正常错误结构（例如，如果您使用带有非正常错误的 GAM），`McFadden pseudo R2`类似地定义为

```
1-residual deviance/null deviance 
```

有关一些有用的讨论，请参见[此处](https://stats.stackexchange.com/questions/11676/pseudo-r-squared-formula-for-glms)和[此处](https://stats.stackexchange.com/questions/3559/which-pseudo-r2-measure-is-the-one-to-report-for-logistic-regression-cox-s)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-25T23:38:28.607

非线性模型的另一个准 R 平方是对实际 y 值和预测 y 值之间的相关性进行平方。对于线性模型，这是常规的 R 平方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-30T00:55:26.867

## 随`modelr`包

`modelr::rsquare(nls_model, data)`

```
nls_model <- nls(mpg ~ a /  wt + b, data = mtcars, start = list(a = 40, b = 4))

modelr::rsquare(nls_model, mtcars)
# 0.794 
```

`rcompanion`这给出了与 Tom 从资源中描述的更长的方式基本相同的结果。

### `nagelkerke`功能更长的路

```
nullfunct <- function(x, m){m}
null_model <- nls(mpg ~ nullfunct(wt, m),
                 data = mtcars,
                 start = list(m = mean(mtcars$mpg)))

nagelkerke(nls_model, null_model)[2]
# 0.794 or 0.796 
```

### 最后，使用预测值

```
lm(mpg ~ predict(nls_model), data = mtcars) %>% broom::glance()
# 0.795 
```

就像他们说的，这只是一个近似值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-10T18:18:56.467

作为这个问题的替代方案，我多次使用以下过程：

1.  使用 nls 函数计算数据的拟合
2.  使用生成的模型进行预测
3.  根据模型预测的值跟踪（绘制...）数据（如果模型很好，点应该在二分线附近）。
4.  计算线性回归的 R2。

向所有人致以最良好的祝愿。帕特里克。

# c# - VS - 跨项目管理引用

> ID：14530771
> 
> 赞同：4
> 
> 时间：2013-01-25T21:36:00.280
> 
> 标签：c#, visual-studio-2010, csproj

我的问题是我有一个包含多个项目的 Visual Studio (2010) C# 解决方案，并且试图为每个项目管理库是一场噩梦。这些项目中的每一个都包含一些标准库引用（全部是预构建的）。

例如：

```
Class Lib Project 1: A.dll, B.dll, C.dll
Class Lib Project 2: A.dll, B.dll, D.dll 
```

所以在这种情况下，我有来自特定共享驱动器的 A.dll 和 B.dll 引用。但是，A.dll 和 B.dll 的每个新版本都会进入一个单独的文件夹。因此，如果我想升级到 A.dll 和 B.dll 的最新库版本，我必须将两个项目中的引用更改为新位置。

现在如果只是两个项目，没什么大不了的。但是，如果我们说 10+，那么它就会变得有问题、耗时且容易出错。因为这是一个公司范围的过程，所以我不能像目录链接一样为最新的库构建将被复制到的静态位置创建（有时我不想自动升级）。

有谁知道我可以在同一解决方案下以某种方式集中跨项目的库引用（我不需要跨解决方案）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:51:33.627

我假设您正在使用源代码控制？将您的引用（二进制文件）添加到您的解决方案中，并将它们与源代码一起保存在本地。

![项目中的引用](../Images/0637546faff273fc1cf45fb39a6d44a9.png)

通过将所有内容放在一起，您始终可以返回到源的特定版本并能够构建它，而不必担心您当时使用的二进制文件。

此外，这允许您更新二进制文件一次 - 然后所有开发人员只要执行“获取”就可以下载最新的二进制文件。

编辑：如果你这样做，你也可以只保留一份 dll 的副本，它可以被解决方案中的多个项目引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:54:34.127

当我处理复杂的项目时（读取具有 10 多个项目的解决方案以某种方式交叉依赖），通常我在解决方案根目录中创建一个 DLL 文件夹，其中存储解决方案项目中使用的所有 dll。

从每个项目中，我添加来自这些 DLL 的 del 引用，其中*复制本地*选项仅适用于可运行项目（Web 应用程序、控制台...）

这样，如果我想升级 A.dll 我只能在 common DLLs 文件夹中更新并重建解决方案

```
- solution
 |-DLLs
 |  |- A.Dll
 |  |- B.Dll
 |  |- C.Dll
 |  |- D.Dll
 |- prj1
 |  |- References
 |  |   |- A.Dll
 |  |   |- B.Dll
 |  ...
 |- prj2
 |  |- References
 |  |   |- A.Dll
 |  |   |- B.Dll
 |  |   |- C.Dll
 |  ...
 |- prj3
 |  |- References
 |  |   |- B.Dll
 |  |   |- D.Dll
 |  ... 
```

通常，libs dll（A.dll、B.dll、...）的更新是通过脚本（.bat 或 .ps1）完成的，因此在某种程度上是自动的，但需要手动触发。无论如何都可以通过预构建操作自动触发此操作

我们仅将 Nuget 用于社区库，尽管可能有一个[私有的 nuget 存储库](https://www.google.com/search?q=private%20nuget%20repository)，但它对环境来说太多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:45:18.370

NuGet 是要走的路。您仍然需要为每个项目管理它们（每个项目的packages.config），但它为您提供了一个很好的GUI，可以在解决方案级别工作，并且它将为您批量更新项目。更多细节在这里： http: [//frozenorange.wordpress.com/2011/10/12/managing-nuget-at-the-visual-studio-solution-level/](http://frozenorange.wordpress.com/2011/10/12/managing-nuget-at-the-visual-studio-solution-level/)

![NuGet 解决方案级别](../Images/5e2635bd867372c25407604ec4fdc902.png)

# global - 推重标签算法

> ID：14530778
> 
> 赞同：1
> 
> 时间：2013-01-25T21:36:22.110
> 
> 标签：global, heuristics, push-relabel, gaps-in-data

我已经做了一个 MATLAB 版本的 push-relabel FIFO 代码（和维基百科上的完全一样并尝试过。放电功能和维基百科完全一样。

它非常适用于小图（例如节点数 = 7）。但是，当我增加图形大小（即节点/顶点数> 3500 或更多）时，“重新标记”函数运行非常缓慢，这在“放电”函数中被调用。我的图表很大（即 > 3000 个节点），所以我需要优化我的代码。

我尝试根据 WIKIPEDIA 关于全局重新标记/间隙重新标记的建议优化代码：1）为每个节点制作邻居列表，并让 index seen[u] 成为迭代器，而不是 range 。2）使用间隙启发式。

我被困在第一个，我不明白我到底要做什么，因为似乎遗漏了细节。（我制作了邻居列表，这样对于顶点 u，到 u 的任何连接节点 v(1..n) 都已经在邻居列表中，只是不确定如何使用 seen[u] 索引进行迭代）。

```
[r,c] = find(C);
uc = unique(c);
s = struct;

for i=1:length(uc)
    ind = find(c == uc(i));
    s(uc(i)).n = [r(ind)];
end 
```

AND 放电函数使用 's' 邻域结构列表：

while (excess(u) > 0) %测试当前节点是否超出>0，如果是...

```
if (seen(u) <= length(s(u).n))  %check next neighbor

        v = s(u).n(seen(u));

        resC = C(u,v) - F(u,v);
        if ((resC > 0) && (height(u) == height(v) + 1)) %and if not all neighbours have been tried since last relabel
            [C, F, excess] = push(C, F, excess, u, v); %push into untried neighbour
        else
                seen(u) = seen(u) + 1;
                height = relabel(C, F, height, u, N);

        end

else
    height = relabel(C, F, height, u, N);
    seen(u) = 1; %relabel start of queue

end 
```

结尾

有人可以指导，展示或帮助我吗？

# android - BadTokenException 与 YouTubePlayerSupportFragment

> ID：14530781
> 
> 赞同：1
> 
> 时间：2013-01-25T21:36:39.907
> 
> 标签：android, android-fragments, youtube-api, android-youtube-api

我在使用时遇到了严重的问题`YouTubePlayerSupportFragment`

只要我连接到我的 WiFi，它就可以正常工作，但是一旦我切换到移动数据连接，在成功播放几秒钟后，片段似乎试图显示一些对话框，但没有这样做。

这是一个例外：

```
 android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
    at android.view.ViewRootImpl.setView(ViewRootImpl.java:571)
    at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
    at android.app.Dialog.show(Dialog.java:281)
    at com.google.android.youtube.core.player.ar.a(SourceFile:83)
    at com.google.android.youtube.core.player.Director.a(SourceFile:75)
    at com.google.android.youtube.core.player.m.a(SourceFile:1205)
    at com.google.android.youtube.core.async.a.f.a(SourceFile:185)
    at com.google.android.youtube.core.async.k.a(SourceFile:35)
    at com.google.android.youtube.core.async.ba.run(SourceFile:96)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method) 
```

以下是片段的实例化方式：

```
YouTubePlayerSupportFragment youtubeFragment = YouTubePlayerSupportFragment.newInstance();
    youtubeFragment.initialize(getString(R.string.id_youtube),
            new YouTubePlayer.OnInitializedListener() {

                @Override
                public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer youTubePlayer,
                                                    boolean
                                                            b) {
                    mYouTubePlayer = youTubePlayer;
                    mYouTubePlayer.setPlayerStyle(YouTubePlayer.PlayerStyle.CHROMELESS);
                    next();
                }

                @Override
                public void onInitializationFailure(YouTubePlayer.Provider provider,
                                                    YouTubeInitializationResult youTubeInitializationResult) {
                    getActivity().finish();
                }
            });
    getFragmentManager().beginTransaction().add(R.id.video_wrapper, youtubeFragment).commit(); 
```

知道如何解决这个问题吗？

戈登

# php - Symfony2 - 学说实体子目录

> ID：14530782
> 
> 赞同：6
> 
> 时间：2013-01-25T21:36:47.060
> 
> 标签：php, symfony, doctrine-orm

基本上，我有一个代码分支连接到三个不同的实体管理器（以及随后的三个不同的 MySQL 数据库）。不幸的是，其中两个数据库的表被命名为相同的东西，所以我不能将所有实体都放在同一个目录中，而且对于结构，我还是想避免这种情况。

所以，我的问题是......我将如何设置它，以便我可以拥有一个实体包，子目录位于`Entity\`和`Resources\config\doctrine\`

例如

```
Acme\EntityBundle\Entity\DB1\Test.php
Acme\EntityBundle\Entity\DB1\Acme.php
Acme\EntityBundle\Entity\DB2\Test.php
Acme\EntityBundle\Entity\DB2\Foo.php
Acme\EntityBundle\Entity\DB3\Bar.php 
```

和同样的想法`Resources\config\doctrine\`

配置对于在这里做什么非常模糊......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-03T09:08:57.270

您只需要重命名您的学说配置文件。

例如：

*   `Bundle/Entity/DB1/User.php`
*   `Bundle/Entity/DB2/User.php`

生成相应的配置文件（在这种情况下为 .yml，请随意更改）

*   `Bundle/Resources/config/doctrine/DB1.User.orm.yml`
*   `Bundle/Resources/config/doctrine/DB2.User.orm.yml`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T22:58:43.817

如果您只需要捆绑来存储实体，我宁愿建议将它们存储在外面。这样您就可以将它们与框架分离。

在这两种情况下，配置都是相似的。参考可在[官方文档](http://symfony.com/doc/master/reference/configuration/doctrine.html#mapping-configuration)中访问。

这是一个例子：

```
#app/config/config.yml
doctrine:
    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true
        mappings:
            AcmeDB1:
                type:       xml
                is_bundle:  false
                dir:        %kernel.root_dir%/../src/Acme/Entity/DB1/config
                prefix:     Acme\Entity\DB1
                alias:      AcmeDB1
            AcmeDB2:
                type:       xml
                is_bundle:  false
                dir:        %kernel.root_dir%/../src/Acme/Entity/DB2/config
                prefix:     Acme\Entity\DB2
                alias:      AcmeDB2 
```

几点注意事项：

*   dir 指的是映射目录，如果您使用注释，这应该是放置实体的目录
*   前缀是实体命名空间的一部分，它应该是唯一的
*   alias 使您可以使用较短的命名空间来引用您的实体，例如 AcmeDB1:User

# ruby - 如何在厨师食谱中使用 not_if

> ID：14530784
> 
> 赞同：7
> 
> 时间：2013-01-25T21:36:53.433
> 
> 标签：ruby, postgresql, chef-infra

我是厨师的新手，所以我对条件 not_if 在执行资源中的工作方式有点困惑。我知道如果命令返回 0 或 true，它会告诉厨师不要执行命令；但是，在我的代码中，它显然仍在运行该命令。

以下代码应该创建一个用户（及其密码）和一个数据库；但是，如果用户和数据库已经存在，它不应该做任何事情。用户、数据库和密码在属性中定义。以下是我的代码：

```
execute "create-user" do

        code = <<-EOH
        psql -U postgres -c "select * from pg_user where usename='#{node[:user]}'" | grep -c #{node[:user]}
        EOH
        user "postgres"
        command "createuser -s #{node[:user]}"
        not_if code
end

execute "set-user-password" do
    user "postgres"
    command  "psql -U postgres -d template1 -c \"ALTER USER #{node[:user]} WITH PASSWORD '#{node[:password]}';\""
end

execute "create-database" do
    exists = <<-EOH
    psql -U postgres -c "select * from pg_database WHERE datname='#{node[:database]}'" | grep -c #{node[:database]}}
    EOH
    user "postgres"
    command "createdb #{node[:database]}"
   not_if exists

end 
```

厨师给我以下错误：

`run`对资源“执行 [创建用户]”执行操作时出错

...

[2013-01-25T12:24:51-08:00] 致命：Mixlib::ShellOut::ShellCommandFailed:execute[create-user]（postgresql::initialize line 16）有一个错误：Mixlib::ShellOut::ShellCommandFailed : 预期进程以 [0] 退出，但收到 '1'

STDERR：createuser：创建新角色失败：错误：角色“用户”已经存在

对我来说，它似乎应该工作；但是，它仍在运行执行。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-12T11:43:11.800

我一直有同样的问题。但是，在我的情况下，“not_if”似乎由不同的用户（root）执行，并且未能正确检查条件。添加 [:user => "postgres"] 解决了这个问题。

```
execute "create-database-user" do
    user "postgres"
    exists = <<-EOH
    psql -U postgres -c "select * from pg_user where usename='#{settings[:username]}'" | grep -c #{settings[:username]}
    EOH
    command "createuser -U postgres -sw #{settings[:username]}"
    not_if exists, :user => "postgres"
end 
```

我参考了以下代码示例。

[https://github.com/MarcinKoziuk/chef-postgres-dbsetup/blob/master/recipes/default.rb](https://github.com/MarcinKoziuk/chef-postgres-dbsetup/blob/master/recipes/default.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:33:23.050

您正在检查是否存在：

```
node[:user] 
```

如果它不存在，则创建：

```
node[:postgresql][:user] 
```

除非这些恰好相等，否则您将继续尝试重复创建 node[:postgresql][:user] 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T05:39:03.307

首先，条件有错别字`WHERE`。它可能应该`username`代替`usename`.

无论如何，你应该这样做：

```
execute "create-user" do
    user "postgres"
    command "createuser -s #{node[:user]}"
    not_if "psql -U postgres -c \"select * from pg_user where username='#{node[:user]}'\" | grep -c #{node[:user]}"
end 
```

这假设你`psql -U postgres -c "select * from pg_user where username='#{node[:user]}'"`是正确的。

与数据库相同：

```
execute "create-database" do
user "postgres"
command "createdb #{node[:database]}"
not_if "psql -U postgres -c \"select * from pg_database WHERE datname='#{node[:database]}'\" | grep -c #{node[:database]}}"
end 
```

关于用户名，即使它已经存在，将密码更改为已知的也不会造成问题。毕竟你知道密码。

仅供参考，您可以在一个资源中定义多个条件。

祝大厨好运！我非常爱它！

# javascript - AngularJs：如何设置基于模型检查的单选按钮

> ID：14530785
> 
> 赞同：65
> 
> 时间：2013-01-25T21:36:55.590
> 
> 标签：javascript, angularjs, radio-group

我有一个模型在 storeLocations 对象中返回一个 isDefault 值。如果 isDefault 返回 true，我不想将组中的单选按钮设置为选中状态。

不确定我是否需要执行 $each(data, function(index,value) 并遍历返回的每个对象，或者是否有更简单的方法可以使用角度构造来执行此操作。

目的：

```
storeLocations = [
 {
  ... more values,
  isDefault: true
 }
] 
```

标记：

```
 <tr ng-repeat="location in merchant.storeLocations">
        <td>{{location.name}}</td>
        <td>{{location.address.address1}}</td>
        <td>{{location.address.address2}}</td>
        <td>{{location.address.city}}</td>
        <td>{{location.address.stateProvince}}</td>
        <td>{{location.address.postalCode}}</td>
        <td>{{location.address.country}}</td>
        <td>{{location.website}}</td>
        <td>{{location.zone}}</td>
        <td><input type="radio" ng-model="location.isDefault" value="{{location.isDefault}}" name="isDefault_group"></td> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-11-14T13:26:17.117

使用`ng-value`而不是`value`.

```
ng-value="true" 
```

`ng-checked`由于代码重复，版本更差。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-07-04T08:57:16.673

如果您有一组单选按钮，并且您想设置基于模型检查的单选按钮，那么具有相同`value`和的单选按钮将`ng-model`被自动检查。

```
<input type="radio" value="1" ng-model="myRating" name="rating" class="radio">
<input type="radio" value="2" ng-model="myRating" name="rating" class="radio">
<input type="radio" value="3" ng-model="myRating" name="rating" class="radio">
<input type="radio" value="4" ng-model="myRating" name="rating" class="radio"> 
```

如果 的值为`myRating`“2”，则选择第二个单选按钮。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-11-24T09:30:58.127

我认为更强大并避免**`isDefault`**在所有模型中使用 a 的一种方法是使用 ng-attributes**`ng-model`**和.**`ng-value`****`ng-checked`**

**ng-model**：将值绑定到您的模型。

**ng-value**：传递给`ng-model`绑定的值。

**ng-checked**：被评估的值或表达式。对单选按钮和复选框很有用。

**使用示例：** 在以下示例中，我有我的模型和我的站点支持的语言列表。要显示支持的不同语言并使用选择语言更新模型，我们可以这样做。

```
<!-- Radio -->
<div ng-repeat="language in languages">

  <div>
    <label>

      <input ng-model="site.lang"
             ng-value="language"
             ng-checked="(site.lang == language)"
             name="localizationOptions"
             type="radio">

      <span> {{language}} </span>

    </label>
  </div>

</div>
<!-- end of Radio --> 
```

只要评估的表达式为真，我们的模型`site.lang`就会得到一个值。这将允许您轻松地将其与服务器同步，因为您的模型已经进行了更改。`language``(site.lang == language)`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-03-15T20:22:53.567

最终只使用了内置的 angular 属性`ng-checked="model"`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-26T01:24:32.560

正如问题评论中所讨论的那样，这是您可以做到的一种方法：

*   当您第一次检索数据时，遍历所有位置并将 storeDefault 设置为当前默认的存储。
*   在标记中：`<input ... ng-model="$parent.storeDefault" value="{{location.id}}">`
*   在保存数据之前，遍历所有的 Mercer.storeLocations 并将 isDefault 设置为 false，但 location.id 比较等于 storeDefault 的商店除外。

以上假设每个位置都有一个保存唯一值的字段（例如，id）。

请注意，使用 $parent.storeDefault 是因为 ng-repeat 创建了一个子作用域，并且我们想在父作用域上操作 storeDefault 参数。

[小提琴](http://jsfiddle.net/mrajcok/g8kyJ/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-21T02:27:02.443

只要做这样的事情，`<input type="radio" ng-disabled="loading" name="dateRange" ng-model="filter.DateRange" value="1" ng-checked="(filter.DateRange == 1)"/>`

# image-processing - 图像处理 - 将一张图像的曲线匹配到另一张图像

> ID：14530790
> 
> 赞同：6
> 
> 时间：2013-01-25T21:37:34.170
> 
> 标签：image-processing, transform

我正在做类似于这个问题的事情： [将曲线图案匹配到图像的边缘](https://stackoverflow.com/questions/11729699/matching-a-curve-pattern-to-the-edges-of-an-image)

基本上，我在两幅图像中有相同的曲线，但两者之间有一些仿射变换。这是两个图像的示例：

![在此处输入图像描述](../Images/f06004fd3b40c5b92086aeb017711c9c.png) 图片1

![在此处输入图像描述](../Images/2e886948f9ca91c7a49a9246596d4ef1.png) 图片2

所以为了得到Image2，你可以对Image1应用一些平移、旋转、缩放等。

有谁知道如何解决这个转换？

相位相关不起作用，因为它不仅仅是平移。光流不起作用，因为没有足够的细节来解决平移、旋转、缩放（它几乎是一个二进制图像）。我不确定霍夫变换是否会给我很好的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:12:38.383

我认为某种关键点匹配算法，如 sift 或 surf 也适用于这类数据。基本思想是在每个图像中找到有限数量的“有趣”关键点，然后成对匹配这些关键点。

这是使用在线 ASIFT 演示对您的图像进行快速测试： [http ://demo.ipol.im/demo/my_affine_sift/result?key=BF9F4E4E006AB5168497709836C39C74#](http://demo.ipol.im/demo/my_affine_sift/result?key=BF9F4E4E006AB5168497709836C39C74#)

![在此处输入图像描述](../Images/e385463f48c85f40d79d8ee1fbc0f130.png)

它可能更适合普通灰度图像，但它似乎适用于这些数据。看起来这些线连接了两条曲线周围大致相同的点；将所有这些对插入 OpenCv 中的[FindHomography](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomography#findhomography)函数之类的东西中，小的差异应该会自行消除，并且您会得到两个图像之间的仿射变换矩阵。

对于您的特定数据，您可能会想出更好的关键点描述符；也许可以检测线端、线交叉点和尖角。

或者这个怎​​么样：这是一个多一点的工作，但如果你可以将你的路径矢量化为贝塞尔或 b 样条，你可以从样条描述符中获得一些自然的关键点。
我不知道任何矢量化库，但[Inkscape](http://inkscape.org/)有一个基本实现，您可以使用它来测试该方法。根据 FindHomography，一旦您拥有一小组描述符而不是大型 2d 位图，您只需在两个图像之间匹配这些描述符。

* * *

回复评论：

兴趣点只是具有某些属性的小区域。所以这些区域的中心可能是黑色或白色；该算法并不专门寻找白色像素或曲线等大尺寸形状。重要的是这些线连接了两条曲线上大致相同的点，至少乍一看是这样。

# android - 将 ListView 中的一行设置为密码（显示和隐藏）行

> ID：14530794
> 
> 赞同：0
> 
> 时间：2013-01-25T21:38:01.193
> 
> 标签：android, android-layout, android-listview, textview

我使用以下教程[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)创建了一个自定义列表视图。

我的列表视图包括两行（每行都有一个图像和一个 TextView）。第一行是用户，第二行是密码。我正在寻找一种将密码行设置为屏蔽的方法，例如 ****，并添加另一行以使用户能够将其设置为可见/屏蔽。

我找到了以下示例， [如何在 textview 中显示隐藏密码？](https://stackoverflow.com/questions/11865914/how-to-show-hidden-password-in-textview) [如何在隐藏和查看密码之间切换](https://stackoverflow.com/questions/3685790/android-how-to-switch-between-hide-and-view-password)

但我不知道如何在特定行上实现它。

我的行 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

     <ImageView android:id="@+id/imgUserAccountIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical"
        android:scaleType="fitStart" />

     <TextView android:id="@+id/txtTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" 
                    android:layout_marginTop="5dp"
            />

</LinearLayout> 
```

我的用户类

```
public class UserAccountData {
    public int icon;
    public String title;

    public UserAccountData(){
        super();
    }

public UserAccountData(int icon, String title) {
    super();
    this.icon = icon;
        this.title = title;
    }
} 
```

我的适配器类

```
public class UserAccountAdapter extends ArrayAdapter<UserAccountData> {
    Context context;
    int layoutResourceId;
    UserAccountData data[] = null;
public UserAccountAdapter(Context context, int layoutResourceId,
        UserAccountData[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    UserAccountDataHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new UserAccountDataHolder();
        holder.imgIcon = (ImageView) row.findViewById(R.id.imgUserAccountIcon);
        holder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);

        row.setTag(holder);
    } else {
        holder = (UserAccountDataHolder) row.getTag();
    }

    UserAccountData userAccountData = data[position];
    holder.txtTitle.setText(userAccountData.title);     
    holder.imgIcon.setImageResource(userAccountData.icon);

    return row;
}

static class UserAccountDataHolder {
    ImageView imgIcon;
    TextView txtTitle;
}

} 
```

以及活动方法的适当列表视图片段

```
List<UserAccountData> user_data = new ArrayList<UserAccountData>();
user_data.add(new UserAccountData(R.drawable.username_icon,"userName");
user_data.add(new UserAccountData(R.drawable.password_icon,"password");
usersArray = new UserAccountData[user_data.size()];
user_data.toArray(usersArray);

UserAccountAdapter adapter = new UserAccountAdapter(this,                       R.layout.user_accounts_row, usersArray);

userAccountsListView = (ListView) findViewById(R.id.userAccounts);

   userAccountsListView.setAdapter(adapter); 
```

附上我想要完成的图片

点击前：

![在此处输入图像描述](../Images/3ee45434326710c31eb0ab74273610e4.png)

点击后

![在此处输入图像描述](../Images/3be4565ef8522bb12603404ff9ae5972.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:42:49.470

您可以在充气时填写适配器中的 TextView 列表。膨胀后，您可以访问所有 TextView，然后在您的 onItemClickListener 中，当有人单击位置 2 中的项目时（至少在这种情况下），您只需引用您的 TextView 列表，获取适当的列表，然后即时更改参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:44:56.230

如果您有一组像这样的少量行，TableLayout 比 ListView 更适合。然后您可以轻松自定义两个 TextView 的 xml。另一种选择是调用 setRawInputType 在第二个 TextView 上设置密码。您需要根据视图的位置在适配器的 getView 函数中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T15:34:25.770

好吧，当用户单击 ListView 条目时，我通过在 AlertDialog 中将密码显示为纯文本来解决此问题。

# dart - 在 Dart 中获取 NoSuchMethodError

> ID：14530799
> 
> 赞同：5
> 
> 时间：2013-01-25T21:38:22.297
> 
> 标签：dart, nosuchmethoderror

我对 Dart 很陌生，而且我习惯于使用 C#（通常是 XNA），所以 Dart 有点不同，我不确定为什么会发生这个错误。

```
double left = c.Position.x - (canvasDimensions.x * 0.5); 
```

Position 和 canvasDimensions 是我创建的一个类型，称为 Vector2，它基本上包含 2 个数字，x 和 y，我得到了错误

```
NoSuchMethodError : method not found: '-'
Receiver: null
Arguments: [600.0] 
```

在显示的行上，由于我不熟悉该语言，我不确定为什么会发生这种情况，请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:44:43.163

这里`c.Position.x`是`null`。在 Dart 中调用方法（或`-`您的情况下的运算符）`null`会导致`NoSuchMethodError`.

# arrays - Perl 中的摩尔斯电码解码器

> ID：14530802
> 
> 赞同：4
> 
> 时间：2013-01-25T21:38:25.387
> 
> 标签：arrays, perl, hash

我正在尝试自学 Perl，我一直在苦苦挣扎……昨晚我做了一个程序来计算用户提供的一组数字的平均值，以便了解列表和用户输入，所以今天我想我会做一个摩尔斯电码解码器来了解哈希。我浏览了我买的那本书，它并没有很好地解释哈希......它实际上并没有很好地解释很多事情。任何帮助，将不胜感激！

无论如何，我想编写一个程序来解码用户输入的莫尔斯电码。所以用户会输入：

```
-.-.
.-
-
...
!
.-.
..-
.-..
. 
```

感叹号将表示一个单独的词。此消息将向用户返回“Cats Rule”。下面是我到目前为止的代码......记住......我在 perl 中编程不到 24 小时哈哈。

代码：

```
 use 5.010;

my %morsecode=(
    '.-'    =>'A',  '-...'  =>'B',  '-.-.'  =>'C',  '-..'   =>'D',
    '.' =>'E',  '..-.'  =>'F',  '--.'   =>'G',  '....'  =>'H',
    '..'    =>'I',  '.---'  =>'J',  '-.-'   =>'K',  '.-..'  =>'L',
    '--'    =>'M',  '-.'    =>'N',  '---'   =>'O',  '.--.'  =>'P',
    '--.-'  =>'Q',  '.-.'   =>'R',  '...'   =>'S',  '-' =>'T',
    '..-'   =>'U',  '...-'  =>'V',  '.--'   =>'W',  '-..-'  =>'X',
    '-.--'  =>'Y',  '--..'  =>'Z',  '.----' =>'1',  '..---' =>'2',
    '...--' =>'3',  '....-' =>'4',  '.....' =>'5',  '-....' =>'6',
    '--...' =>'7',  '---..' =>'8',  '----.' =>'9',  '-----' =>'0',
    '.-.-.-'=>'.',  '--..--'=>',',  '---...'=>':',  '..--..'=>'?',
    '.----.'=>'\'', '-...-' =>'-',  '-..-.' =>'/',  '.-..-.'=>'\"'
);

my @k = keys %morsecode;
my @v = values %morsecode;

say "Enter a message in morse code separated by a line. Use the exclamation point (!) to separate words. Hit Control+D to signal the end of input.";
my @message = <STDIN>;
chomp @message;

my $decodedMessage = encode(@message);

sub encode {
    foreach @_ {
    if (@_ == @k) {
        return @k;

#This is where I am confused... I am going to have to add the values to an array, but I don't really know how to go about it.

        }
    else if(@_ == '!') {return ' '}
    else
    {
    return 'Input is not valid';
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T22:19:57.147

您的代码包含两个语法错误：`foreach`需要一个*列表*来迭代；这意味着parens。与 C 和其他语言不同，Perl 不支持`else if (...)`. 相反，使用`elsif (...)`.

然后有一些语义错误：迭代的当前值存储在`$_`. 该数组`@_`包含调用函数的参数。

Perl 以不同的方式比较字符串和数字：

```
Strings Numbers
eq      ==
lt      <
gt      >
le      <=
ge      >=
ne      !=
cmp     <=> 
```

为手头的任务使用正确的操作符，在这种情况下，是那些很复杂的操作符。

（您的代码`@_ == @k`做了一些事情，即在数字*上下文*中使用数组。这会产生元素的数量，然后进行比较。`@_ == '!'`这很奇怪。）

* * *

您真正想要做的是将输入的值映射到字符列表。您的哈希定义了这个映射，但我们想应用它。Perl 有一个`map`功能，它的工作方式类似于

```
@out_list = map { ACTION } @in_list; 
```

在操作块内，当前值可用作`$_`.

我们希望我们的操作在哈希中查找适当的值，或者如果输入字符串没有映射，则包含错误消息：

```
my @letters = map { $morsecode{$_} // "<unknown code $_>" } @message; 
```

这假设`!`在摩尔斯电码散列中注册为一个空格。

`join`然后，我们通过将它们与空字符串一起创建一个由这些字母组成的字符串：

```
my $translated_message = join "", @letters; 
```

不要忘记打印结果！

* * *

完整代码：

```
#!/usr/bin/perl
use strict; use warnings; use 5.012;

my %morsecode=(
  '.-'    =>'A',  '-...'  =>'B',  '-.-.'  =>'C',  '-..'   =>'D',
  '.'     =>'E',  '..-.'  =>'F',  '--.'   =>'G',  '....'  =>'H',
  '..'    =>'I',  '.---'  =>'J',  '-.-'   =>'K',  '.-..'  =>'L',
  '--'    =>'M',  '-.'    =>'N',  '---'   =>'O',  '.--.'  =>'P',
  '--.-'  =>'Q',  '.-.'   =>'R',  '...'   =>'S',  '-'     =>'T',
  '..-'   =>'U',  '...-'  =>'V',  '.--'   =>'W',  '-..-'  =>'X',
  '-.--'  =>'Y',  '--..'  =>'Z',  '.----' =>'1',  '..---' =>'2',
  '...--' =>'3',  '....-' =>'4',  '.....' =>'5',  '-....' =>'6',
  '--...' =>'7',  '---..' =>'8',  '----.' =>'9',  '-----' =>'0',
  '.-.-.-'=>'.',  '--..--'=>',',  '---...'=>':',  '..--..'=>'?',
  '.----.'=>'\'', '-...-' =>'-',  '-..-.' =>'/',  '.-..-.'=>'"',
  '!'     =>' ',
);

say "Please type in your morse message:";
my @codes = <>;
chomp @codes;

my $message = join "", map { $morsecode{$_} // "<unknown code $_>" } @codes;

say "You said:";
say $message; 
```

这会产生所需的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T22:09:33.117

学习如何和为什么有很多价值，但这里是什么：

```
sub encode {
  my $output;
  foreach my $symbol (@_) {
    my $letter = $morsecode{$symbol};
    die "Don't know how to decode $symbol" unless defined $letter;
    $output .= $letter
  }
  return $output;
} 
```

甚至就像`sub encode { join '', map $morsecode{$_}, @_ }`您不太担心错误检查一样。`@k`并且`@v`不需要任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T22:33:22.547

在散列中搜索值是一项非常繁重的工作，最好只使用反向散列。您可以使用Perl 中的[reverse 函数](http://perldoc.perl.org/functions/reverse.html)轻松地反转散列。此外，在查看您的代码时，我发现您将能够输入小写输入。但是在搜索键的哈希时，这是区分大小写的。所以你需要[大写](http://perldoc.perl.org/functions/uc.html)你的输入。另外，我不太喜欢“结束”标准输入的方式。退出词/标志会更好更干净。

我对你的代码的看法

```
my %morsecode=(
    '.-'    =>'A',  '-...'  =>'B',  '-.-.'  =>'C',  '-..'   =>'D',
    '.' =>'E',  '..-.'  =>'F',  '--.'   =>'G',  '....'  =>'H',
    '..'    =>'I',  '.---'  =>'J',  '-.-'   =>'K',  '.-..'  =>'L',
    '--'    =>'M',  '-.'    =>'N',  '---'   =>'O',  '.--.'  =>'P',
    '--.-'  =>'Q',  '.-.'   =>'R',  '...'   =>'S',  '-' =>'T',
    '..-'   =>'U',  '...-'  =>'V',  '.--'   =>'W',  '-..-'  =>'X',
    '-.--'  =>'Y',  '--..'  =>'Z',  '.----' =>'1',  '..---' =>'2',
    '...--' =>'3',  '....-' =>'4',  '.....' =>'5',  '-....' =>'6',
    '--...' =>'7',  '---..' =>'8',  '----.' =>'9',  '-----' =>'0',
    '.-.-.-'=>'.',  '--..--'=>',',  '---...'=>':',  '..--..'=>'?',
    '.----.'=>'\'', '-...-' =>'-',  '-..-.' =>'/',  '.-..-.'=>'\"'
);
my %reversemorse = reverse %morsecode;
print "Enter a message\n";
chomp (my $message = <STDIN>);
print &encode($message);

sub encode{
    my $origmsg = shift(@_);
    my @letters = split('',$origmsg);
    my $morse = '';
    foreach $l(@letters)
    {
        $morse .= $reversemorse{uc($l)}." ";
    }    
    return $morse;
} 
```

# php - 无法从多币种网页获取价格信息

> ID：14530804
> 
> 赞同：0
> 
> 时间：2013-01-25T21:38:44.173
> 
> 标签：php

页面： http: [//www.nastygal.com/accessories/minnie-bow-clutch](http://www.nastygal.com/accessories/minnie-bow-clutch)

代码：$html = file_get_contents('http://www.nastygal.com/accessories/minnie-bow-clutch');

*即使*我更改页面右上角的货币，$html**始终**包含产品的美元价格。当我将页面的货币更改为 CAD 时，如何捕获具有 CAD 价格的 html？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:46:00.193

似乎国家和货币选择存储在 cookie 中。

![在此处输入图像描述](../Images/130cd6c9c6c6587928cc19eec75e61cf.png)

我假设您将不得不将这些值与您的`file_get_contents()`通话一起传递。请参阅： [PHP - 使用 file_get_contents 发送 cookie](https://stackoverflow.com/questions/3431160/php-send-cookie-with-file-get-contents)

**编辑#1**

为了跟进我的评论，我刚刚测试了这个：

```
// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: CURRENCYPREFERENCE=cad\r\n" 
  )
);

$context = stream_context_create($opts);
// Open the file using the HTTP headers set above
$file = file_get_contents('http://www.nastygal.com/accessories/minnie-bow-clutch', false, $context);
print_r($file); 
```

并且能够得到这个：

![在此处输入图像描述](../Images/3213898828c065c40e183e9f011feb72.png)

**编辑＃2：**

回应您的第二条评论。这些都是重要的细节。您的小书签如何处理抓取的内容？您是否在自己的网站上保存了已添加书签的产品页面的副本？无论如何，在提交运行请求之前，您必须修改您的小书签以检查用户的 cookie `file_get_contents()`。

我可以使用以下简单的小书签示例从 nastygal.com 访问我的 cookie。注意：nastygal.com 使用 jQuery 和 jQuery UI cookie 插件。如果您正在寻找更通用的解决方案，则不应依赖这些脚本：

```
javascript:(function(){ console.log($.cookie('CURRENCYPREFERENCE')); }()); 
```

在 JS 控制台中输出：

```
cad 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:46:53.517

货币偏好似乎保存在名为：CURRENCYPREFERENCE 的 cookie 中

由于不是您的浏览器建立连接以检索该视图，因此您可能不会随请求发送任何 cookie 数据。

我相信这里的示例 #4 将为您提供所需的内容：http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)*

# ruby - 像 Hashie 这样可以使用 lambdas 作为属性的 Ruby 库

> ID：14530805
> 
> 赞同：2
> 
> 时间：2013-01-25T21:38:50.087
> 
> 标签：ruby, hash, configuration

是否有一个像 Hashie 一样工作的 Ruby 库，除了它可以将 lambda 作为属性并在访问该属性时调用它？

例如，我想要这样的东西：

```
# Lash = Lambda-able hash
lash = Lash.new(
  someProperty:      "Some value",
  someOtherProperty: ->{ Time.now }
)

lash.someProperty      # => "Some value"
lash.someOtherProperty # => 2013-01-25 16:36:45 -0500
lash.someOtherProperty # => 2013-01-25 16:36:46 -0500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:38:50.087

这是我的实现：

```
class Lash < BasicObject
  def self.new hash
    ::Class.new do
      hash.each do |key, value|
        method_body = if value.respond_to? :call
                        ->(*args){ self.instance_exec(*args, &value) }
                      else
                        ->{ value }
                      end
        define_method(key, &method_body)
      end
    end.new
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T14:41:07.147

几天前我想要类似的东西，最终使用了 Hashie 2.0.0.beta，它为您提供了可以与您自己的子类一起使用的扩展`Hash`：

```
require 'hashie'
require 'hashie/hash_extensions' 

class Lash < Hash
  include Hashie::Extensions::MethodAccess

  def [](key)
    val = super(key)
    if val.respond_to?(:call) and val.arity.zero?
      val.call
    else
      val
    end
  end
end 
```

这使您可以执行以下操作：

```
l = Lash.new
#=> {}

l.foo = 123
#=> 123

l.bar = ->{ Time.now }
#=> #<Proc:0x007ffab3915f18@(irb):58 (lambda)>

l.baz = ->(x){ 10 * x }
#=> #<Proc:0x007ffab38fb4d8@(irb):59 (lambda)>

l.foo
#=> 123

l.bar
#=> 2013-01-26 15:36:50 +0100

l.baz
#=> #<Proc:0x007ffab38fb4d8@(irb):59 (lambda)>

l.baz[5]
#=> 50 
```

注意：这仅适用于 Hashie 2.0.0.beta，您可以通过 Bundler 将这一行添加到您的 Gemfile 中来安装它：

```
gem 'hashie', :git => 'git://github.com/intridea/hashie.git' 
```

或者，没有 Bundler，使用`specific_install`gem：

```
gem install specific_install
gem specific_install -l git://github.com/intridea/hashie.git 
```

# jbpm - 是否可以协调 jBPM 5.4 流程？

> ID：14530809
> 
> 赞同：0
> 
> 时间：2013-01-25T21:39:03.067
> 
> 标签：jbpm

是否可以启动进程 v1 并在稍后部署同一进程的更新版本 v2？v1 的进程实例会发生什么？他们能否轻松切换到 v2 或者他们会继续他们的生命周期还是会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:00:17.797

默认情况下，从进程版本 1 开始的进程将继续使用该版本，直到完成。部署版本 2 时，将使用该版本创建新实例。在某些情况下，流程实例可以从一个版本迁移到另一个版本，但从业务角度来看，大多数情况下这没有意义。

干杯

# c# - 按下箭头键而不专注于任何控制

> ID：14530811
> 
> 赞同：0
> 
> 时间：2013-01-25T21:39:10.970
> 
> 标签：c#, navigation, arrow-keys

我有一个包含一堆控件的 Windows 窗体。每当单击任何键（例如箭头键）时，我都想引发一个事件。问题不在代码中，问题在于控件有一个选项卡索引，所以每当我点击箭头键时，光标只会移动到另一个控件，这就是我不想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:42:15.877

将每个控件的 KeyDown 事件附加到同一处理程序：

```
 Control.KeyDown+=new KeyEventHandler(Control_KeyDown);

 private void Control_KeyDown(object sender, KeyEventArgs e)
 {
        //trap here and handle
        if(e.KeyCode == Keys.Left || e.KeyCode == Keys.Right || e.KeyCode == Keys.Up || e.KeyCode == Keys.Down)
            e.Handled = true;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T21:43:50.480

您必须确保当前表单上没有任何活动控件。将此代码放入 Form.cs

```
this.ActiveControl = null; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T21:45:55.510

经过一些测试，我发现

```
 protected override bool ProcessDialogKey(Keys keyData)
    {
        return false;
    } 
```

这将导致箭头键（和选项卡）作为正常的 KeyDown 事件传递。这也会导致正常的对话键功能（例如 Tab 和箭头键）停止，但仍会收到 KeyDown 事件

# javascript - 根据条件更改单元格颜色

> ID：14530816
> 
> 赞同：0
> 
> 时间：2013-01-25T21:40:06.503
> 
> 标签：javascript

我有一个条件可以根据比较值更改表格行的背景颜色。我想集成另一个比较两个单元格并仅在这些单元格上返回背景颜色的条件。

我已经在桌子上运行了一个循环

```
 for (i = 0; i < rows.length; i++) {
            cells = rows[i].getElementsByTagName('td'); 
```

这就是我所拥有的，但它将颜色结果应用于整个列而不是每个单元格..

```
 if (cells[10].innertext !== cells[11].innerText)
                cells[10].style.backgroundColor = "red";
                cells[11].style.backgroundColor = "red";

         else 
            (cells[10].innertext == cells[11].innerText)
                cells[10].style.backgroundColor = "green";
                cells[11].style.backgroundColor = "green"; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:44:41.867

你有一个大小写问题。第一个`innertext`应该是`innerText`。并且必须将多个语句放在一个块中以将它们分组为一个条件。

此外，要在 之后添加条件`else`，它需要是`else if`

```
 //-------------v
     if (cells[10].innertext !== cells[11].innerText) {
            cells[10].style.backgroundColor = "red";
            cells[11].style.backgroundColor = "red";
        //-------------v
     } else if (cells[10].innertext == cells[11].innerText) {
            cells[10].style.backgroundColor = "green";
            cells[11].style.backgroundColor = "green";
     } 
```

虽然逻辑上不需要第二个条件，但您可以将其更改为：

```
 } else { 
```

* * *

此外，`.textContent`是从元素中获取文本的标准版本。如果您想要更广泛的浏览器支持，您应该执行以下操作：

```
var text1 = cells[10].textContent || cells[10].innerText
var text2 = cells[11].textContent || cells[11].innerText 
```

...然后使用变量进行比较。

* * *

最后，没有必要如此冗长：

```
cells = rows[i].getElementsByTagName('td'); 
```

您可以改用它：

```
rows[i].cells 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T21:44:53.567

你看过[Knockout.js](http://knockoutjs.com/)吗？它将允许您将值绑定到网格，然后订阅发生在它们身上的事件。

# c++ - Visual Studio 2012 错误 MSB3073

> ID：14530818
> 
> 赞同：1
> 
> 时间：2013-01-25T21:40:14.957
> 
> 标签：c++, visual-studio, msbuild

我正在尝试只升级我的 IDE，而不是编译器，从 Visual Studio 2010 升级到 2012。我不断得到

`Error 9 error MSB3073: The command ""C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools\..\IDE\devenv" mdlibs.sln /Build "Release|x64"" exited with code 1\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.MakeFile.Targets 38 lib_mdlibs (Visual Studio 2008)`

它引导我访问此代码

```
 <Target Name="Build" 
     DependsOnTargets="PrepareForNMakeBuild;ResolveReferences;GetTargetPath" 
     Returns="$(NMakeManagedOutput)">

    <VCMessage Code="MSB8005" Type="Warning" Arguments="NMakeBuildCommandLine" 
          Condition="'$(NMakeBuildCommandLine)'==''"/>

    <Exec Command="$(NMakeBuildCommandLine)"  
          Condition="'$(NMakeBuildCommandLine)'!=''"/>
 </Target> 
```

特别是倒数第二行

我不知道如何处理这个！我已经尝试了一些东西，但到目前为止没有任何效果

当我只构建 lib_mdlibs 时，它说操作无法完成

```
1>  
1>  Use:
1>  devenv  [solutionfile | projectfile | anyfile.ext]  [switches]
1>  
1>  The first argument for devenv is usually a solution file or project file.
1>  You can also use any other file as the first argument if you want to have the
1>  file open automatically in an editor. When you enter a project file, the IDE
1>  looks for an .sln file with the same base name as the project file in the
1>  parent directory for the project file. If no such .sln file exists, then the
1>  IDE looks for a single .sln file that references the project. If no such single
1>  .sln file exists, then the IDE creates an unsaved solution with a default .sln
1>  file name that has the same base name as the project file. 
```

我想也许是我的命令行构建

`"$(VS110COMNTOOLS)..\IDE\devenv" mdlibs.sln /Build "$(Configuration)|$(Platform)"`

但是我已经尝试过几次更改它并没有任何帮助

我尝试在 vs2012 中打开 mdlibs 解决方案并构建它，但是当我尝试构建它时，我得到一个弹出窗口，说项目文件''已被重命名或不再在解决方案中

或者，如果我尝试在 mdlibs.sln 中构建任何单个项目，它会说无法执行请求的操作，因为构建已经在进行中，即使我刚刚打开了解决方案

有什么建议么？任何帮助都将不胜感激我完全陷入困境

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T21:00:47.533

这很可能是因为 vc11 vcvars 是默认设置的。转到 VS2010 -> VS Tools -> VS Command Prompt (2010) & 然后在那里执行你的命令。

如果上述方法有效，请在执行 devenv.exe 或 msbuild.exe 之前从命令提示符执行 2010 vcvars.bat。

# c++ - Qt 工具栏/qtoolbutton 操作从未 触发

> ID：14530827
> 
> 赞同：0
> 
> 时间：2013-01-25T21:41:09.043
> 
> 标签：c++, qt, qtoolbar

我有以下一段代码，出于某种原因，从UI窗口继承自QToolBar的MyActionDock，它显示没有任何问题，当单击按钮时，按钮颜色也发生了变化，但是插槽（a1ActionSlot（）和连接到信号的 a2ActionSlot()) 永远不会被调用，感觉就像永远不会触发动作。我正在使用 Qt 4.7.2。它出什么问题了？非常感谢。

我相信用于 Qt4.6 或更早版本的代码可以正常工作。不知道什么时候出现问题。

```
MyActionDock::MyActionDock (QWidget *parent) :
   QToolBar (parent)
{
   setOrientation (Qt::Vertical);
   setToolButtonStyle(Qt::ToolButtonTextUnderIcon);
   setFixedWidth(canvas()->toolsDockWidth());

   // ACTIONS

   QToolButton * a1btn= new QToolButton (this);

   a1btn->setText("Action 1");
   a1btn->setIcon(QIcon("a1.png"));
   a1btn->setToolTip ("Some action a1");
   a1btn->setToolButtonStyle(Qt::ToolButtonTextUnderIcon);

   QAction *a1Action = addWidget(a1btn);
   connect (a1Action , SIGNAL (triggered()), this, SLOT(a1ActionSlot()));
   addAction (a1Action);

   QToolButton * a2Btn = new QToolButton (this);

   a2Btn ->setText("A2");
   a2Btn ->setIcon(QIcon("a2.png"));
   a2Btn ->setToolTip ("something");

   QAction *a2Action= addWidget(a2Btn );
   connect (a2Action, SIGNAL (triggered()), this, SLOT(a2ActionSlot()));
   addAction (a2Action);

}

void MyActionDock::a1ActionSlot()
{
    //do something
}

void MyActionDock::a2ActionSlot()
{
   //do something
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:05:56.920

正如 Jay 建议的那样，直接连接到 QToolButton 并且不要 addAction，然后它就可以工作了。认为这是与 Qt 升级相关的问题。该代码曾经在 Qt 4.6 或更早版本中工作，但在 4.7 之后停止工作。所以对于4.7，如果你想使用QToolButton，直接连接按钮的信号。

```
 QToolButton * a2Btn = new QToolButton (this);

   a2Btn ->setText("A2");
   a2Btn ->setIcon(QIcon("a2.png"));
   a2Btn ->setToolTip ("something");

   addWidget(a2Btn );
   connect (a2Btn , SIGNAL (clicked()), this, SLOT(a2ActionSlot())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:52:14.983

插槽位于错误的类中。

您在此处声明插槽 a1ActionSlot 位于 MyActionDock 类中：

```
connect (a1Action , SIGNAL (triggered()), this, SLOT(a1ActionSlot())); 
```

第三个参数是“this”（指向 MyActionDock 类）。

您在 QtCanvasActionDock 类中实例化 a1ActionSlot 方法。

```
void QtCanvasActionDock::a1ActionSlot() 
```

# ios - xcode 验证错误：info.plist 文件缺少所需的密钥：CFBundleVersion

> ID：14530830
> 
> 赞同：2
> 
> 时间：2013-01-25T21:41:32.797
> 
> 标签：ios, xcode, validation, plist

我尝试在摘要和 plist 文件中输入版本号，但我仍然有同样的错误。

CFBundleVersion 虽然存在于 plist 文件中：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundleExecutable</key>
    <string>${EXECUTABLE_NAME}</string>
    <key>CFBundleGetInfoString</key>
    <string></string>
    <key>CFBundleIcons</key>
    <dict>
        <key>CFBundlePrimaryIcon</key>
        <dict>
            <key>CFBundleIconFiles</key>
            <array>
                <string>Calmness_icon_ratina.png</string>
                <string>Default.png</string>
                <string>Default@2x.png</string>
                <string>Calmness_icon57.png</string>
            </array>
            <key>UIPrerenderedIcon</key>
            <true/>
        </dict>
    </dict>
    <key>CFBundleIdentifier</key>
    <string>com.jassem.calmness</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6</string>
    <key>CFBundleName</key>
    <string>${PRODUCT_NAME}</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.1</string>
    <key>CFBundleSignature</key>
    <string>BNDL</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSApplicationCategoryType</key>
    <string></string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>UIBackgroundModes</key>
    <array>
        <string>audio</string>
    </array>
    <key>UIPrerenderedIcon</key>
    <true/>
    <key>UIRequiredDeviceCapabilities</key>
    <array>
        <string>armv7</string>
    </array>
    <key>UIStatusBarHidden</key>
    <true/>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationPortrait</string>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:43:31.993

很可能是 xcode 本身的问题。尝试清理，删除管理器中的派生数据，重新启动 Xcode。如果这不起作用，请检查项目窗格，总而言之，如果版本和构建都说 1.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T20:54:10.753

由于某种原因，Xcode 没有找到提到的密钥。

*   查看目标的构建设置，您为 info.plist 设置了哪个路径
*   删除您的派生文件夹，您可能在此处有旧版本的文件
*   如果您在 Finder 中双击他的 plist，它是否正确打开？您可能不小心损坏了它
*   制作一个新项目并将您的 info.plist 替换为新项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T16:55:32.277

您需要转到 info.plist，添加一个名为“Application Category”的新键，然后选择您设计的类别。

# java - Java 和 iMacros

> ID：14530840
> 
> 赞同：1
> 
> 时间：2013-01-25T21:42:17.800
> 
> 标签：java, eclipse, macros, imacros

我正在尝试遵循[本教程](http://forum.iopus.com/viewtopic.php?f=6&t=10899)，关于将 Java 与 iMacros 结合使用，但它不起作用。即使网站上的示例代码中明显有一个主类，我也收到一条错误消息“无法找到或加载主类”。有谁知道为什么会发生这种情况？谢谢！

**更新**：代码示例

```
import com.jacob.activeX.*;
public class iMacroJACOBtest {
    public static void main(String[] args) {
        // Connect to iMacros Scripting Interface 
        System.out.println("Started."); 
        ActiveXComponent iim = new ActiveXComponent("imacros"); 
        System.out.println("Calling iimInit"); 
        // call iimInit() 
        iim.invoke("iimInit"); 

        // call iimPlay() 
        System.out.println("Calling iimPlay"); 
        iim.invoke("iimPlay", "CODE:URL GOTO=google.de"); 
    }
} 
```

# asp.net-mvc-4 - CodeFirst - 更新单个属性

> ID：14530842
> 
> 赞同：0
> 
> 时间：2013-01-25T21:42:24.087
> 
> 标签：asp.net-mvc-4, ef-code-first, entity-framework-5

我们正在对我们正在构建的 MVC4 应用程序使用 EF5，代码优先方法。我们正在尝试更新实体上的 1 个属性，但不断收到错误消息。这是上下文创建的类的样子：

```
public partial class Room
{
    public Room()
    {
        this.Address = new HashSet<Address>();
    }

    public int RoomID { get; set; }
    public Nullable<int> AddressID { get; set; }
    public Nullable<int> ProductVersionID { get; set; }
    public string PhoneNumber { get; set; }
    public string AltPhone { get; set; }
    public string RoomName { get; set; }
    public string Description { get; set; }
    public string Comments { get; set; }
    public string Notes { get; set; }

    public virtual ICollection<Address> Address { get; set; }
} 
```

这是视图的 ViewModel：

```
public class RoomDetailsViewModel
{
    //public int RoomID { get; set; }
    public string RoomName { get; set; }
    public string PhoneNumber { get; set; }
    public string AltPhone { get; set; }
    public string Notes { get; set; }
    public string StateCode { get; set; }
    public string CountryName { get; set; }
    public string ProductVersion { get; set; }
    public int PVersionID { get; set; }
    public List<SelectListItem> ProductVersions { get; set; }
    public Room Room { get; set; }
} 
```

这是在“保存”时调用的控制器操作：

```
 [HttpPost]
    public virtual ActionResult UpdateRoom(RoomDetailsViewModel model)
    {
        var db = new DBContext();

        bool b = ModelState.IsValid;

        var rooms = db.Rooms;
        var rm = rooms.Where(r => r.RoomID == model.Room.RoomID).Single();
        //List<Address> address = db.Addresses.Where(a => a.AddressID == rm.AddressID).ToList<Address>();

        rm.ProductVersionID = model.PVersionID;
        //rm.Address = address;

        db.Entry(rm).Property(r => r.ProductVersionID).IsModified = true;

        //db.Entry(rm).State = System.Data.EntityState.Modified;

        db.SaveChanges();

        return View("RoomSaved", model);
    } 
```

此视图所做的只是显示数据并允许用户更改产品版本（从 SelectList 中），因此，在房间实体中，我们要更新的只是 ProductVersionID 属性，仅此而已。我们可以让数据正确显示，但是当我们单击“保存”时，我们会收到以下错误：

> 'System.Collections.Generic.List`1[[Models.Address, Web.Mobile.TestSite, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'类型的对象不能从值中设置或删除“Models.Address”类型的 EntityReference 的属性。

正如您在控制器操作中看到的那样，我们尝试了几种不同的方法，但似乎都产生了这个错误。我试图用地址填充 model.Room.Address 集合，但仍然出现此错误。

我也阅读[了这篇 StackOverflow 文章](https://stackoverflow.com/questions/5564727/update-a-single-property-of-a-record-in-entity-framework-code-first)和[这篇文章，](https://stackoverflow.com/questions/11502840/unable-to-set-field-property-on-entity-type-with-entity-framework-4-3-1)但都没有解决我的问题。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:57:35.393

经过数小时的挖掘，事实证明 EF 没有**为**我的数据库表导入一些 PK。提示我的是 Room 类，PK RoomID 上没有`[Key]`属性。我试图通过 edmx 重新导入表，但它从未作为键出现（即使它在数据库中明确标记为 PK）。所以，为了解决这个问题，我创建了一个 DBContext 的部分类并覆盖了`OnModelCreating`事件并包含了键，如下所示：

```
public partial class DBContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Entity<Models.Room>().HasEntitySetName("Rooms");
        modelBuilder.Entity<Models.Room>().HasKey(r => r.RoomID);
    }
} 
```

完成此操作后，操作按希望保存了记录。

我希望这对其他人有帮助！

# ruby-on-rails-3 - 如何为 ActiveRecord 中的同一列执行多个 where 语句？

> ID：14530844
> 
> 赞同：2
> 
> 时间：2013-01-25T21:42:40.627
> 
> 标签：ruby-on-rails-3, activerecord, where, multiple-instances

使用 rails 3，如何在没有复杂的东西或额外的宝石的情况下执行多个 where 语句？

我有此列“已接受”，并希望获取所有接受 == false 和接受 == null 的值

以下两个示例均失败：

```
 @scholars = Scholars.where(:scholar_id => current_user.id).where(["accepted = ? or accepted = ?", true, null]) 
```

和

```
 @scholars = Scholars.where(:scholar_id => current_user.id).where(:accpeted => true).where(:accepted=> null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:45:04.503

尝试：

```
@scholars = Scholars.where(:scholar => current_user, :accepted => true).all + 
            Scholar.where(:scholar => current_user, :accepted => nil).all 
```

你把你的模特命名为“学者”吗？模型传统上是单数的......如果你正确命名它，它应该是`Scholar.where(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:50:15.480

正确答案应该是

```
@profiles = Profile.where(:user_id => current_user.id, :accepted => [true, nil]).order(:accepted) 
```

# c# - 播放器坐标转换为 2D 屏幕坐标

> ID：14530849
> 
> 赞同：1
> 
> 时间：2013-01-25T21:43:19.157
> 
> 标签：c#, wpf, vector, 3d, coordinates

我项目的主要目标是将玩家角色从 3D 环境投影到 2D 屏幕。我已经在网上找到了一些有用的数学，但在过去的四天里，我无法让它发挥作用。每次我移动角色时，它都会出现在随机位置和/或离开屏幕。有时它水平跟随，但通常从不垂直。

我的问题很简单：我做错了什么？

```
// A few numbers to play with: 
// Case #1: myPos: 1104.031, 3505.031, -91.9875; myMousePos: 0, 180; myRotation: 153, 153, 25; playerPos: 1072, 3504, -91.9687 (Player Middle of Screen, Standing Behind Player)
// Case #2: myPos: 511.7656, 3549.25, -28.02344; myMousePos: 0, 347.5854; myRotation: 44, 2, 22; playerPos: 1632, 3232, -91.96875 (Player Middle of Screen, I stand higher and 1166 away)
// Case #3: myPos: 1105.523, 2898.336, -11.96875; myMousePos: 0, 58.67249; myRotation: 232, 184, 159; playerPos 1632, 3232, -91.96875 (Player Right, Lower Of Screen) 
Vect3d viewAngles;
Vect3d vForward, vRight, vUpward;
float ScreenX, ScreenY;
float[] fov;

bool 3dWorldTo2dScreen(Vect3d playerpos, Vect3d mypos, PlayerData myself)
{
    fov = new float[2];
    viewAngles = Vect3d();

    Vect3d vLocal, vTransForm;
    vTransForm = new Vect3d();
    vForward = new Vect3d();
    vRight = new Vect3d();
    vUpward = new Vect3d();

    fov[0] = myself.MouseX; // Sky: -89, Ground: 89, Middle: 0
    fov[1] = myself.MouseY; // 360 To 0

    viewAngles.x = myself.Rotation.x; 
    viewAngles.y = myself.Rotation.y;
    viewAngles.z = myself.Rotation.z;

    int screenCenterX = 320; // 640
    int screenCenterY = 240; // 480

    AngleVectors();
    vLocal = SubVectorDist(playerpos, mypos);

    vTransForm.x = vLocal.dotproduct(vRight);
    vTransForm.y = vLocal.dotproduct(vUpward);
    vTransForm.z = vLocal.dotproduct(vForward);

    if (vTransForm.z < 0.01)
        return false;

    ScreenX = screenCenterX + (screenCenterX / vTransForm.z * (1 / fov[0])) * vTransForm.x;
    ScreenY = screenCenterY - (screenCenterY / vTransForm.z * (1 / fov[1])) * vTransForm.y;

    return true;
}

Vect3d SubVectorDist(Vect3d playerFrom, Vect3d playerTo)
{
    return new Vect3d(playerFrom.x - playerTo.x, playerFrom.y - playerTo.y, playerFrom.z - playerTo.z);
}

private void AngleVectors()
{
    float angle;
    float sr, sp, sy, cr, cp, cy, 
    cpi = (3.141f * 2 / 360);

    angle = viewAngles.y * cpi;
    sy = (float)Math.Sin(angle);
    cy = (float)Math.Cos(angle);

    angle = viewAngles.x * cpi;
    sp = (float)Math.Sin(angle);
    cp = (float)Math.Cos(angle);

    angle = viewAngles.z * cpi;
    sr = (float)Math.Sin(angle);
    cr = (float)Math.Cos(angle);

    vForward.x = cp * cy;
    vForward.y = cp * sy;
    vForward.z = -sp;

    vRight.x = (-1 * sr * sp * cy + -1 * cr * -sy);
    vRight.y = (-1 * sr * sp * sy + -1 * cr * cy);
    vRight.z = -1 * sr * cp;

    vUpward.x = (cr * sp * cy + -sr * -sy);
    vUpward.y = (cr * sp * sy + -sr * cy);
    vUpward.z = cr * cp;
} 
```

# android - 在android上使用opengl移动正方形

> ID：14530858
> 
> 赞同：0
> 
> 时间：2013-01-25T21:43:56.093
> 
> 标签：android, c++, eclipse, opengl-es

我在 OpenGL 上有一个简单的代码，它使用

```
float angle = -10.0f; // Draw frame

void DrawGraphics() {

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Set location in front of camera
glLoadIdentity();
glTranslatef(0.0f, 0.0f, angle);

glBegin(GL_QUADS);

glColor3f(0.0f, 1.0f, 0.0f);
glVertex3f(-2.0f, 2.0f, 0.0f);
glVertex3f(2.0f, 2.0f, 0.0f);
glVertex3f(2.0f, -2.0f, 0.0f);
glVertex3f(-2.0f, -2.0f, 0.0f);
glEnd();

    angle += .1f;

    //if (angle >=360.0f)
            //angle = 0.0f;

// Show the new scene
SwapBuffers(hDC);
} 
```

我想在android系统上显示它。我怎么做？我应该学习 Eclipse，我应该从哪里开始？

谢谢你。我是使用 C++ 的新手，但我已经学习了基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:56:48.563

如果您对 Android 完全陌生，那么第一步就是设置 Android SDK：

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

之后，以下是 Android 文档中对 OpenGL ES 的两个介绍：

[http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)（更多的速成课程） [http://developer.android.com/training/graphics/opengl/index.html](http://developer.android.com/training/graphics/opengl/index.html)（更多的教程)

# magento - Magento 为不同的产品视图创建模块

> ID：14530859
> 
> 赞同：0
> 
> 时间：2013-01-25T21:43:56.903
> 
> 标签：magento, view, module

我正在尝试创建我的第一个 Magento 模块，该模块将允许产品页面上的属性（是/否）改变产品视图页面上分组产品选项的样式。

我可能在这里开始有点太深了，但这是我对如何做到这一点的理解：

*   创建一个属性并分配给默认属性集（Alternative Group View alt_group_view）。

*   在 /template/catalog/product/view/type 中创建一个替代的 grouped.phtml 文件 - groupedAlt.phtml

*   创建一个初始化我的模块的基本模块结构。我真的应该让模块创建属性，但我还没有任何线索！！！

然后这就是我卡住的地方。本质上，我需要纠正模块文件中查找产品属性的逻辑——如果它的集合，我需要编写代码来告诉布局块大概扩展了这个：

```
<PRODUCT_TYPE_grouped translate="label" module="catalog">
<reference name="product.info">
<block type="catalog/product_view_type_grouped" name="product.info.grouped" as="product_type_data" template="catalog/product/view/type/grouped.phtml">
</reference>
</PRODUCT_TYPE_grouped translate="label" module="catalog"> 
```

希望这对某人有意义吗？

尽管我对 Magento 的前端和管理领域有很多了解，但我不确定我是否能真正实现这一点，因为我刚刚开始进行模块开发。

任何建议将不胜感激。

问候，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:44:14.193

你应该通过观​​察者来处理这个问题。要观察的事件是：controller_action_layout_generate_blocks_after

1°）在您的模块中，在 etc/config.xml 中，添加您的事件处理程序：

```
<frontend>
    <events>
        <controller_action_layout_generate_blocks_after>
            <observers>
                <yourmodule_generate_blocks_after>
                    <type>singleton</type>
                    <class>mymodule/observer</class> 
                    <method>generateBlocksAfter</method>
                </yourmodule_generate_blocks_after>                    
            </observers>                
        </controller_action_layout_generate_blocks_after>
    </events>
</frontend> 
```

然后在您的模型目录（MyCompany/MyModule/Model/Observer.php）中创建一个名为 Observer.php 的模型

在此模型中，添加您的 generateBlocksAfter() 方法，如下所示：

```
public function generateBlocksAfter($event)
{                      
$controller   = $event->getAction();
    //limit to the product view page 
    if($controller->getFullActionName() != 'catalog_product_view')
    {
        return;
    }
    $layout       = $controller->getLayout();
    $myblock = $layout->getBlock('product.info.grouped');

    $_product = Mage::registry('current_product');

    if ($_product->getAltGroupView()) {
        $myblock->setTemplate('catalog/product/view/type/groupedalt.phtml');
    }
} 
```

你在这里。

# javascript - Jquery Popup 仅显示 ID

> ID：14530860
> 
> 赞同：0
> 
> 时间：2013-01-25T21:44:05.790
> 
> 标签：javascript, jquery, html

我有一个脚本，该脚本具有多个 jquery 弹出框。它通过字符串和 ID 获取 div。这是Javascript...

```
function POPUP(string,id){

var closebtn = '<img src="i/JqueryClose.png" onClick="CLOSEPOP('+id+')" title="Close"     class="close">';
$('closebtn'+id).css('{margin: -30px -30px 0 0}');
$('#Popup'+id).html(closebtn+id);
$('#Popup'+id).fadeIn(300);
onLoad: true;
//Get the screen height and width
var maskHeight = $(document).height();
var maskWidth = $(window).width();  
//Set height and width to mask to fill up the whole screen
$('#mask').css({'width':maskWidth,'height':maskHeight});    
//transition effect     
$('#mask').fadeIn(300);    
$('#mask').fadeTo("slow",0.8);          

}
function CLOSEPOP(id){
$('#Popup'+id).html('');
$('#Popup'+id).fadeOut(300); 
$('#mask').fadeOut(300);
}       
//if mask is clicked
$('#mask').click(function () {
$(this).fadeOut(300);
$('.VPopWin').fadeOut(300);
}); 
```

现在这里是 HTML onclick 和一个 div。

```
<td class="BroadcastText" onClick="POPUP('Popup',1)">Broadcast 1 Message</td>
<div id="Popup1" class="VPopWin"> 
```

弹出功能有效，但是当我单击“广播 1 消息”时，该框仅显示 div id，在这种情况下为 1。如果单击 div id="Popup2"，则显示 2。如何解决此问题以显示内容在里面我有而不是ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:24:47.827

我更改了您的代码以使其正常工作：

HTML：

```
<table>
    <tr>
        <td data-message="test string" class="BroadcastText">Broadcast 1 Message</td>
    </tr>
</table> 
```

CSS：

```
#mask {
    z-index: 1000;
    display: none;
    position: fixed;
    background-color: black;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.popup {
    position: fixed;
    top: 100px;
    left: 100px;
    z-index: 10001;
    color: white;
} 
```

JS：

```
$(function () {
    var body = $('body'),
        $document = $(document),
        $window = $(window);
    var closebtn = $('<img src="i/JqueryClose.png" title="Close"     class="close">');
    closebtn.css('{margin: -30px -30px 0 0}');
    var mask = $('<div id="mask">');
    body.append(mask);
    $('.BroadcastText').click(POPUP);

    function POPUP() {
        var string = $(this).data('message');
        var popup = $('<div>').addClass('popup');
        body.append(popup);
        var clbutton = closebtn.clone();
        popup.append(clbutton);
        clbutton.click(CLOSEPOP);
        mask.one('click', CLOSEPOP);
        var poptext = $('<div>').html(string);
        popup.append(poptext);
        popup.fadeIn(300);
        //transition effect     
        mask.fadeIn(300);
        mask.fadeTo("slow", 0.8);

        function CLOSEPOP() {
            popup.fadeOut(300, function () {
                popup.remove();
            });
            mask.fadeOut(300);
        }
    }
}); 
```

[演示](http://jsfiddle.net/oceog/USghV/)

# php - 使用 PHP foreach 循环解析来自 AWS Cloudsearch API 响应的简单 XML 结果

> ID：14530862
> 
> 赞同：2
> 
> 时间：2013-01-25T21:44:09.940
> 
> 标签：php, simplexml

这是我第一次在这里提问，我也是PHP和简单XML的新手，但我决心学习这个。我已经搜索了之前提出的所有相关问题，但在将其应用于我的情况时遇到了困难，尽管它看起来很相似。真令人沮丧:(。

我正在尝试从 Amazon Cloudsearch 以 XML 格式读取 API 响应。

这是原始的 XML 响应：

```
<results xmlns="http://cloudsearch.amazonaws.com/2011-02-01/results">
<rank>-text_relevance</rank>
<match-expr>(label '"mango"')</match-expr>
<hits found="99" start="0">
<hit id="mango1to100_csv_31">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/66650066_51.jpg
</d>
</hit>
<hit id="mango1to100_csv_10">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650060_34.jpg
</d>
</hit>
<hit id="mango1to100_csv_11">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650062_MQ.jpg
</d>
</hit>
<hit id="mango1to100_csv_12">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650067_58.jpg
</d>
</hit>
<hit id="mango1to100_csv_13">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650034_02.jpg
</d>
</hit>
<hit id="mango1to100_csv_14">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650036_MQ.jpg
</d>
</hit>
<hit id="mango1to100_csv_15">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650038_34.jpg
</d>
</hit>
<hit id="mango1to100_csv_16">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650039_39.jpg
</d>
</hit>
<hit id="mango1to100_csv_17">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650070_33.jpg
</d>
</hit>
<hit id="mango1to100_csv_18">
<d name="imageurl">
http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650040_02.jpg
</d>
</hit>
</hits>
<facets/>
<info rid="12345" time-ms="3" cpu-time-ms="0"/>
</results> 
```

我使用 SimpleXML 开始：

```
SimpleXMLElement Object
(
[rank] => -text_relevance
[match-expr] => (label '"mango"')
[hits] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [found] => 99
                [start] => 0
            )

        [hit] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_31
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/66650066_51.jpg
                    )

                [1] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_10
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650060_34.jpg
                    )

                [2] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_11
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650062_MQ.jpg
                    )

                [3] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_12
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650067_58.jpg
                    )

                [4] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_13
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650034_02.jpg
                    )

                [5] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_14
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650036_MQ.jpg
                    )

                [6] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_15
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650038_34.jpg
                    )

                [7] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_16
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650039_39.jpg
                    )

                [8] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_17
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650070_33.jpg
                    )

                [9] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [id] => mango1to100_csv_18
                            )

                        [d] => http://st.mngbcn.com/rcs/pics/static/T6/fotos/S1/63650040_02.jpg
                    )

            )

    )

[facets] => SimpleXMLElement Object
    (
    )

[info] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [rid] => 12345
                [time-ms] => 3
                [cpu-time-ms] => 0
            )

    )

) 
```

我正在尝试读取并显示基于结果中提供的 URL 显示的每个项目的图像。我知道我应该在这里使用“foreach”循环，但我似乎无法做到这一点，所以这是我完成它的漫长道路：

```
<?php
$feed_url = 'http://www.myapicallexample.com';
$feed = simplexml_load_file($feed_url);

echo "<ul>";
echo "<li><img src='", $feed->hits[0]->hit[1]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[2]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[3]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[4]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[5]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[6]->d,"'></li>";
echo "<li><img src='", $feed->hits[0]->hit[7]->d,"'></li>";
echo "</ul>";
?> 
```

从查看其他问题的答案，我尝试了各种 foreach 语句的组合，但没有任何效果。我准备把我的电脑扔出窗外。提前致谢！

附录：这是我之前的许多愚蠢尝试之一的一个例子：）

```
<?php
$feed_url = 'http://www.myapicallexample.com';
$xml = simplexml_load_file($feed_url);

$imageurl = $xml->hits[0]->hit[1]->d;

foreach($imageurl as $a)
{
  echo $a;
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T01:08:32.087

```
$feed_url = 'http://www.myapicallexample.com';
$xml = simplexml_load_file($feed_url);

foreach($xml->hits->hit as $hit){
    echo "url:".$hit->d;
} 
```

# ssis - SSIS 从对象插入

> ID：14530863
> 
> 赞同：0
> 
> 时间：2013-01-25T21:44:14.393
> 
> 标签：ssis

我正在开发一个知识非常有限的 SSIS 包。我有一个“执行 SQL 任务”，它从一个视图中检索大约 300 行。我将结果集放入一个employeeList 对象中。

我的下一步是将这些记录插入到表中。我尝试创建一个 ForEach 循环容器并将我的“执行 SQL 任务”放入这个容器中。我的参数映射是：

```
variable name      | direction | datatype| parameter name | parameter size 

User::employeeList | input     | varchar | 0  | -1.
User::employeeList | input     | varchar | 1  | -1.
User::employeeList | input     | varchar | 2  | -1.
User::employeeList | input     | varchar | 1  | -1. 
```

...

我得到的错误是：错误：0xC002F210 at Populate Data, Execute SQL Task: Executing the query "INSERT INTO [dbo].[xxxx] ( [field1], [Perso..." failed with the following error:"错误将结果提取到类型为 (DBTYPE_STR) 的变量时发生。可能的失败原因：查询有问题、“ResultSet”属性设置不正确、参数设置不正确或连接未正确建立。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:39:48.993

执行 SQL 任务很好，但对于您的情况，听起来[数据流](http://www.simple-talk.com/sql/ssis/ssis-basics-adding-data-flow-to-your-package/)就足够了。

删除现有的东西并将数据流拖到控制流上。双击数据流并添加一个 OLE DB 源和一个 OLE DB 目标。

在您的 OLE DB 源中，将 OLE DB 连接管理器更改为您的源连接的名称。将“数据访问模式”从 更改`Table or View`为`SQL Command`。前者更容易点击，但与编写等效的`SELECT * FROM mytable`. 在不再灰显的窗口中，输入您的查询。

```
SELECT column1, column2, ... FROM dbo.MyView 
```

一般来说，你应该枚举你想要的所有列。拉回不需要的列会浪费内存，这就是 SSIS 快速的原因。

将绿色箭头从源连接到“OLE DB 目标”。双击它并将 OLE DB 连接管理器更改为您的目标数据库连接。在那里，将数据访问模式更改为`Table or view - fast load`。这允许我们批量加载数据，而默认情况下`Table or view`会为流过的每一行发出一个插入，这很慢。在下拉列表中找到目标表名称 dbo.xxxx，*然后*单击 Mappings 选项卡。它应该根据名称匹配自动映射。按预期检查并验证事物映射。点击确定

保存，它应该可以工作。

# php - 将登录名和密码哈希组合到同一个类中是否违反 SRP？

> ID：14530868
> 
> 赞同：1
> 
> 时间：2013-01-25T21:45:03.050
> 
> 标签：php, design-patterns, login, single-responsibility-principle

我有一个 LoginController 类，如：

```
class LoginController
{
    protected $db;

    public function __construct(PDO $db)
    {
        $this->db = $db;
    }

    public function login($username, $password)
    {
        //Query the database, and get back the password_hash, salt, and user id.
        //Hash the incoming password with the salt.
        //Compare the two hashes.
        //return the logged in user object.
    }
} 
```

因此，在从数据库中检索 password_hash 和 salt 之后，我需要对传入的密码进行哈希处理。在我看来，这似乎是应该由另一个组件处理的第二个责任。也许是一个 PasswordHashingComponent（或者如果你有一个更好的名字）。

```
abstract class PasswordHashingComponentAbstract
{
    public abstract function hash($data, $salt = "");

    public function verify($hash, $data, $salt = "")
    {
        return $this->hash($data, $salt) == $hash;
    }
}

class MD5PasswordHashingComponent extends PasswordHashingComponentAbstract
{
    public function hash($data, $salt = "")
    {
        return md5($data . md5($salt));
    }
}

class SHA1PasswordHashingComponent extends PasswordHashingComponentAbstract
{
    public function hash($data, $salt = "")
    {
        return sha1($data . sha1($salt));
    }
} 
```

然后我可以依赖注入到 LoginController 中：

```
public function __construct(PDO $db, PasswordHashingComponentAbstract $passwordhasher); 
```

和

```
$loginController = new LoginController($db, new SHA1PasswordHashingComponent());
$loginController->login("username", "password"); 
```

所以我的问题是这是否是矫枉过正。

如果我的 LoginController 同时处理登录以及如何对密码进行哈希和比较，这是否是严重的 SRP 违规？

在我看来，这个类可能会改变有两个原因：

1.  如果处理登录的方式发生变化。
2.  如果密码被散列和比较的方式发生了变化。

那么，这不违反 SRP 吗？有没有更好的方法可以处理抽象出密码散列部分？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T09:37:47.477

如果一个类有更多的功能，那么它就违反了 SRP，并且可以预期其中一些功能会相互独立地发生变化，并且这种变化对类的维护很重要。这个类执行几个功能：

1.  从服务器端获取数据，

2.  从客户端获取数据，

3.  比较和验证来自客户端和服务器端的数据

4.  向服务器端返回一个结论，并且

5.  向客户端返回结论。

ad 1\. 该数据可以由不同的数据集组成。例如，它可能包含密码、盐、用户名、安全问题和答案。

ad 2\. 该数据可以由多条信息组成。可能会随着时间的推移而改变并从不同的来源（验证码和用户数据）获取。它可能不仅仅是用户名和密码。

客户端和服务器端会有一些共同的信息。该信息用于对用户进行身份验证。

ad 3.比较方法用于客户端和服务器端的不同数据集。

ad 4\. 您可能决定在登录成功或不成功后在服务器端执行某些操作，例如存储某个帐户或 IP 地址的不成功登录次数，或者您可能会更改存储的盐和密码。

ad 5\. 成功与否，客户端必须得到一个消息作为回报。

1、2和3一起变化，1和4可能有共同的连接，2和5有共同的功能连接。3 必须知道来自服务器的数据集和来自客户端的数据集。尽管数据集一起变化，但用于比较的方法可能有所不同。因此，数据集的变化与比较方法之间存在 1:N 的基数。这应该使用接口来实现。

函数“返回服务器端”和“返回客户端”的变化都独立于任何其他实现。服务器端不必有任何实现，建议对客户端的反馈独立于验证过程本身。如果将结论返回给服务器端有一个实现，那么它将很可能与从服务器端检索数据共享连接和有关存储位置的信息。这种重叠应该在设计中回归。到目前为止，您还没有实现将结论返回到服务器端，但这可能非常有用。您可以考虑登录后在服务器端执行的后续步骤： 1\. 您可能希望存储某人尝试使用同一台计算机或相同用户名等登录的次数。 2\. 每次成功登录（次数）后，您可以更改散列密码和 salt。那时你的记忆中是否有正确的密码。（顺便说一句：总是使用盐。我见过一个应用程序，其中人们被赋予了一个标准化的默认密码，并且管理员知道他们头脑中的哈希密码。他们可以使用没有更改他们的人的密码登录初始登录后的密码。） 3\. 您可以将用户的首选项添加到新会话中。4\. ... 这一步可能相当复杂，并且会影响对客户的反馈（您已登录失败超过 3 次...

在 UML 类图中，它看起来像这样：

![类图 LoginController](../Images/9b6a31f0b5c5047ed563203e7e02ab5e.png)

我将 LoginController 和服务器端类之间的关系描述为聚合，以表明 LoginController 根据使用的数据模型或其他配置数据来决定使用哪个实现。

# macos - 自动化 Mail，以便在收到特定消息时运行 shell 脚本

> ID：14530872
> 
> 赞同：1
> 
> 时间：2013-01-25T21:45:20.727
> 
> 标签：macos, automation

我正在尝试查看是否有办法完成此操作：基本上我会以特定的时间间隔从服务器收到电子邮件，所以我尝试运行一个 shell 脚本，当邮件发送时将在我的 mac 上执行特定包的安装到达。

我无权访问服务器，因此无法对其进行任何操作；我只能依靠这样一个事实，即在一天中不确定的时间，我会收到电子邮件，我需要安装一个包。我是手工做的，但老实说，这很乏味，如果我出于任何原因不检查电子邮件，很容易出错。

我正在考虑使用 Applescript，但如果有任何其他方法可以通过控制台或 shell 脚本来做到这一点，老实说，我会更高兴（从来不是 Applescript 的忠实粉丝）。

有没有办法完成这个任务？我什至不明白 OSX 上的邮件是否可以编写脚本。我环顾四周，但只找到 Automator 链接。我知道 Python 是一种脚本语言，如果它可以以任何方式与 Mail 一起使用的话。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:50:19.183

在邮件中点击首选项，选择规则选项卡。其中一项操作是运行 AppleScript。如果你愿意，你可以让 AppleScript 触发一个 shell 脚本。

# java - 使用Java真值表的Shunting-Yard算法

> ID：14530874
> 
> 赞同：-2
> 
> 时间：2013-01-25T21:45:41.190
> 
> 标签：java, algorithm, calculator, discrete-mathematics, truthtable

我正在为我在离散数学中的一项作业开发真值表生成器。我必须实现分流场算法，而这样做我完全迷失了。我的问题是实现调车码算法。首先，我将展示我查看过的资源，然后是我的问题，然后是我已经启动的代码。

我真正需要的..我知道它要求很多。但它是调车场算法的简化版本。当使用诸如 o1 o2 之类的符号时，我在维基百科示例中的部分内容中迷失了方向。我真正需要的是有人逐步解释如何应用它。我也不明白 RPN 符号是如何工作的。但我现在可以继续阅读。

*   关闭码的实现：
    [http ://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java/#more-1658](http://www.technical-recipes.com/2011/a-mathematical-expression-parser-in-java/#more-1658)
*   维基百科关闭码算法：
    [http ://en.wikipedia.org/wiki/Shunting-yard_algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)
*   有人在stackoverflow上
    [的问题与调车场算法有关的问题](https://stackoverflow.com/questions/5239715/problems-with-a-shunting-yard-algorithm)
*   基本实现
    [在Java中生成真值表](https://stackoverflow.com/questions/10723168/generating-truth-tables-in-java)

这是一个示例输入：
A -> B
(C)
:. F

我应该生成一个显示的输入：
ABCA->BF
TTT--T---T
TFT--F---F
FTT--T---T
FFT--T---F
TTF-- T---F
TFF--F---F
FTF--T---F
FFF--T---F

```
import java.util.Stack;
import java.util.ArrayList;

public class ShuttingYard{

private static final char THEREFORE = '>';
private static final char AND       = '&';
private static final char OR        = '|';

public static String inputToReversePolishNotation(String input)
{

    char[] tokens = input.toCharArray();
    ArrayList<String> output = new ArrayList<String>();
    Stack<String> oppStack = new Stack<String>();

    for(int i = 0; i < tokens.length; i++)
    {

    }

    return null;

}

public static boolean isLogicOperator(char input)
{

    switch(input)
    {
        case THEREFORE:
            return true;
        case AND:
            return true;
        case OR:
            return true;
        default:
            return false;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T23:08:51.633

我相信你提到给你带来麻烦的具体一点是：

*   如果令牌是运算符 o1，则：
    *   而在堆栈顶部有一个操作符标记 o2，并且
        *   要么 o1 是左结合的，并且它的优先级小于或等于 o2 的优先级，要么
        *   o1 的优先级低于 o2，
    *   将 o2 从堆栈中弹出，进入输出队列；
*   将 o1 压入堆栈。

我认为在这件作品上感到困惑是可以理解的。优先规则是 RPN 更易于解析的原因。在阅读它时，请记住，'o1' 是您正在阅读的运算符，而 'o2' 是堆栈顶部的运算符。

要处理它，您需要为运算符分配优先级值。例如，如果我们讨论算术，我可能会为优先值分配`+`= 1、`*`= 2 和= 3。`^`如果您正在读取的运算符的优先级低于或等于堆栈顶部的运算符，则将运算符从堆栈中弹出并将其传递给输出。这样做直到您在堆栈上找到一个优先级低于读取运算符的运算符，或者不再在堆栈的（新）顶部找到一个运算符。无论如何，您将把读取操作符压入堆栈。

就整个事情的一步一步而言，维基百科的文章非常好。请记住，定义的每条规则可能不适用于您的案例。从您定义的标记来看，您似乎不需要担心函数和括号，因此那里的算法可以简化为：

*   虽然有要读取的令牌：
    *   读取令牌。
    *   如果令牌是数字，则将其添加到输出队列中。
    *   如果令牌是运算符 o1，则：
        *   当栈顶有一个操作符记号 o2，或者 o1 是左结合的并且它的优先级小于或等于 o2 的优先级，或者 o1 的优先级小于 o2 的优先级，
            *   将 o2 从堆栈中弹出，进入输出队列；
        *   将 o1 压入堆栈。
*   当没有更多要读取的令牌时：
    *   虽然堆栈中仍有操作符标记：
        *   将操作员弹出到输出队列中。
*   出口。

即使您确实需要括号和函数，它也可能有助于从更简单的问题开始，并在它起作用后对其进行增强。

# java - 忽略故障子元素的 JAX-WS 处理程序

> ID：14530875
> 
> 赞同：0
> 
> 时间：2013-01-25T21:45:45.117
> 
> 标签：java, web-services, soap, jax-ws, soap-client

我正在使用基于 SOAP 的 JAX-WS 实现 Web 服务客户端。其错误码返回方式如下：

```
<?xml version = '1.0' encoding = 'UTF-8'?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:xsd="http://www.w3.org/1999/XMLSchema">
   <env:Header>
      <!-- header stuff goes here -->
   </env:Header>
   <env:Body>
      <env:Fault>
        <abc:fault xmlns:abc="http://example.com/abc">
           <abc:faultcode>12345</abc:faultcode>
           <abc:faultstring>Error message goes here</abc:faultstring>
        </abc:fault>
     </env:Fault>
   </env:Body>
</env:Envelope> 
```

据我所知，这不是解决 SOAP 错误的正确方法。env:Fault 的子元素应该是`<faultcode>`and `<faultstring>`，而不是不同的命名空间`<fault>`。不幸的是，我无法让 Web 服务改变这一点。

我希望我能够在 SOAPHandler 中解析此消息并将其转换为常规错误，然后再将其传递给我的其余代码，但是当我在较早的 Handler 中记录消息时，我看到 Fault 元素完全空的。没了`<abc:fault>`！

我在 WebSphere 7 上使用 JAX-WS，并尝试在我的系统属性中将“jaxws.payload.highFidelity”设置为 true。有关如何获取原始消息的任何线索？

不理会这个将导致带有 NullPointerException 的 WebServiceException，因为 JAX-WS 找不到故障代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:39:12.357

所以我找到了我的问题的答案。WebSphere 7 使用 Axis2。Axis2 的 MessageContext 提供了一个名为“TRANSPORT_IN”的属性，其中包含一个 ByteArrayInputStream。TRANSPORT_IN，顾名思义，包含接收到的确切 SOAP 消息。

我使用 SAXHandler 解析了 Handler#handleFault 方法中的原始 SOAP 消息，以检索 abc:fault 消息。然后我将 abc:fault > faultcode 和 faultstring 写入了 soapenv:Fault faultcode 和 faultstring。然后我的应用程序处理 SOAPFaultException 就好像它是一个普通的一样。

我仍然对任何更好的答案持开放态度，因为这感觉像是迂回的方式来做到这一点。

处理程序代码：

```
public boolean handleFault(SOAPMessageContext context) {
    SOAPMessage m = context.getMessage();
    if(m != null) {
        SOAPBody body = m.getSOAPBody();
        SOAPFault fault = body.getFault();
        setAbcFault(fault, context);
    }
}

private void setAbcFault(SOAPFault fault, MessageContext context) {
    ByteArrayInputStream bis = (ByteArrayInputStream)context.get("TRANSPORT_IN");
    // do sax parsing on the input stream
    fault.setFaultCode(abcFaultCodeQName);
    fault.setFaultString(abcFaultString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T00:32:31.913

如果您使用的是 JAX-WS，则可以使用 SOAP 错误。或者，您需要带有`@WebFault`注释的异常。[您可以在使用 Java JAX-WS Web 服务中的 SOAP 错误和异常 - Eben Hewitt on Java](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)中找到一个很好的示例。

请参阅[返回 null 或抛出异常](https://stackoverflow.com/a/14225143/870248)的答案以及[如何在 JAX-WS Web 服务上抛出自定义错误？](https://stackoverflow.com/a/13596795/870248)

例子：

```
@WebService
public class CalculatorWS {

    public String factorial(int n) throws FactorialException {
        if (n < 0) {
            throw new FactorialException("Negative number!",     // faultstring
                                         "The number n = " + n); // detail
        }
        return BigIntegerMath.factorial(n).toString();
    }

} 
```

和：

```
public class FactorialException extends Exception {

    String detail;

    public FactorialException(String message, String detail) {
        super(message);
        this.detail = detail;
    }

    public String getFaultInfo() {
        return detail;
    }

} 
```

如果请求是：

```
<soapenv:Envelope ... >
   <soapenv:Header/>
   <soapenv:Body>
      <test:factorial>
         <arg0>-1</arg0>
      </test:factorial>
   </soapenv:Body>
</soapenv:Envelope> 
```

回应是：

```
<soapenv:Envelope ... >
   <soapenv:Body>
      <soapenv:Fault>
         <faultcode>soapenv:Server</faultcode>
         <faultstring>Negative number!</faultstring>
         <detail>
            <ns2:FactorialExceptionBean xmlns:ns2="http://...">
                The number n = -1
            </ns2:FactorialExceptionBean>
         </detail>
      </soapenv:Fault>
   </soapenv:Body>
</soapenv:Envelope> 
```

（在 Websphere 7 中**测试）**

# php - 如何使这个 PHP/MYSQL 代码更高效？

> ID：14530881
> 
> 赞同：-2
> 
> 时间：2013-01-25T21:46:17.420
> 
> 标签：php, html

我对 PHP 很陌生，我有一个[测试项目](http://natzim.com/badidea/?)：

我想让代码更高效，因为它需要一些时间来生成。非常感谢，纳特

它使用的代码如下：

```
 $result1 = mysql_fetch_assoc(mysql_query("SELECT COUNT(*) AS `Rows`, `1` FROM `things` GROUP BY  `1` ORDER BY RAND() LIMIT 0 , 1"));
    $result2 = mysql_fetch_assoc(mysql_query("SELECT COUNT(*) AS `Rows`, `2` FROM `things` GROUP BY  `2` ORDER BY RAND() LIMIT 0 , 1"));
    $result3 = mysql_fetch_assoc(mysql_query("SELECT COUNT(*) AS `Rows`, `3` FROM `things` GROUP BY  `3` ORDER BY RAND() LIMIT 0 , 1"));
    $result4 = mysql_fetch_assoc(mysql_query("SELECT COUNT(*) AS `Rows`, `4` FROM `things` GROUP BY  `4` ORDER BY RAND() LIMIT 0 , 1"));

    echo $result1["1"];
    echo " ";
    echo $result2["2"];
    echo " ";
    echo $result3["3"];
    echo " ";
    echo $result4["4"];

    mysql_close($con);      
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:12:15.560

我假设善意并使用您想要使用的方法清理了以最佳方式呈现的代码。

```
<?

$count = 1;
$results = array();
for ($count; $count <= 4; $count++) {
  $query = sprintf("SELECT COUNT(*) AS `Rows`, `%d` FROM `things` GROUP BY  `1` ORDER BY RAND() LIMIT 1", $count)
  $results[] = mysql_fetch_assoc(mysql_query($query));
}

if (!empty($results)) {
  echo exlplode(" ", $results);
}

?> 
```

# grails - Grails 资源：如何正确创建环境感知资源？

> ID：14530884
> 
> 赞同：2
> 
> 时间：2013-01-25T21:46:27.027
> 
> 标签：grails, resources, environment

我真的很喜欢 Grails 的资源插件，我们在 Grails 2.2 中的项目中广泛使用它。我现在想将其扩展为环境感知，例如，我可以避免在生产中加载某些 JavaScript 库，而这些库实际上只需要用于开发和测试。

根据 Grails 文档（[http://grails-plugins.github.com/grails-resources/guide/3.%20Declaring%20resources.html#3.2%20Resource%20artefacts](http://grails-plugins.github.com/grails-resources/guide/3.%20Declaring%20resources.html#3.2%20Resource%20artefacts)），这应该是微不足道的，因为这些 *Resources.groovy 文件grails-app/conf 文件夹中的应该是 Groovy ConfigSlurper 脚本（就像 DataSource.groovy 一样），因此支持“环境”块语法。

我的问题是，试图以文档似乎在说我只能完全破坏资源插件的方式来实现这种风格。再加上 IntelliJ IDEA 无法识别环境块，我不明白这应该如何工作。这就是我所说的，其中环境块正在抛出整个资源注入：

```
modules = {
    stuff {
        resource 'js/lib/script1.js'
        resource 'js/lib/script2.js'
    }
}

environments {
    production {
        stuff {
            resource 'js/lib/script1.js'
        }
    }
} 
```

在这里，我只是想拥有一个模块，当在生产环境中运行时，该模块专门从“stuff”资源中排除特定脚本。如果有人能说出正确的方法来做到这一点，我将不胜感激！提前致谢！

更新！！！

好的，我想我已经摆弄并找到了设置环境感知资源的正确方法。我现在唯一的问题是弄清楚如何在捆绑包中拥有默认资源，这样就不会在环境中出现所有这些重复。假设我有以下设置：

```
environments {
    development {
        modules = {
            stuff {
                resource 'js/script1.js'
                resource 'js/script2.js'
                resource 'js/OnlyForDevelopment.js'
            }
        }
    }
    production {
        modules = {
            stuff {
                resource 'js/script1.js'
                resource 'js/script2.js'
            }
        }
    }
} 
```

编写这个的正确方法是什么，以便可以将 script1 和 script2 设置为“stuff”资源包的默认值，这样它们就不必写出两次，每个环境块一次？这只是一个小例子，但我真的很想避免为每个环境块复制每个共享资源。有没有一个优雅的解决方案？是否有一个“通用”资源块，我可以在其中设置一个模板“东西”资源，作为环境感知版本添加的任何内容的基础？如果是这样，环境感知资源是否可以包含来自具有 dependsOn 语句的通用块的资源？我试图让这些事情发生，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T03:05:25.473

您可以使用 dependsOn 来分隔共享模块。

```
modules = {

    stuff {
       resource 'js/script1.js'
       resource 'js/script2.js'
    }

    devStuff {
       dependsOn 'stuff'
       resource 'js/OnlyForDevelopment.js'
    }

} 
```

我们尽量不将环境配置放在我们的资源文件中。感觉有点神奇，你很快就会忘记哪些环境在哪里。这有点像维护噩梦。

相反，在我们的布局中，我们可以根据环境设置模块，

IE，

```
<g:if env='test'>
     <r:use module='testStuff...'/> </g:if> <g:else>
     <r:use module='stuff'/> 
</g:else> 
```

（你明白了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T17:14:30.963

我会选择你的替代方案，有不同的*Resources.groovy*文件，每个环境一个。那是

**环球资源.grooy**

```
modules = {
    globalScripts {
        resource 'js/script1.js'
        resource 'js/script2.js'
    }
} 
```

**生产资源.groovy**

```
environments {
    production {
        modules = {
            stuff {
                dependsOn 'globalScripts'
            }
        }
    }
} 
```

**DevelopmentResources.goovy**

```
environments {
    development {
        modules = {
            stuff {
                dependsOn 'globalScripts'
                resource 'js/OnlyForDevelopment.js'
            }
        }
    }
} 
```

我想这就是你所要求的。

ps：我注意到您在最新答案中引用了*不同的资源*，但我不确定这是否是您所做的。

# c# - 无法在 Windows 7 上以标准用户身份创建信号量

> ID：14530886
> 
> 赞同：0
> 
> 时间：2013-01-25T21:46:39.927
> 
> 标签：c#, .net, windows-7, synchronization, semaphore

我不知道这是否是设计使然，但我似乎无法以标准用户或高级用户的身份在 Windows 7 上创建新的信号量。

```
SemaphoreSecurity semSec = new SemaphoreSecurity(); 

// have also tried "Power Users", "Everyone", etc. 
SemaphoreAccessRule rule = new SemaphoreAccessRule("Users", SemaphoreRights.FullControl, AccessControlType.Allow);   

semSec.AddAccessRule(rule);

bool createdNew = false;

// throws exception 
sem = new Semaphore(1, 1, SEMAPHORE_ID, out createdNew, semSec);  

return true; 
```

我收到一条`UnauthorizedAccessException`消息“拒绝访问端口”。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:01:58.267

查看[有关该主题的 MSDN 文档](http://msdn.microsoft.com/en-us/library/wz356skf.aspx)，似乎解决方案是为信号量创建设置安全级别。

这是给定链接的源代码摘录：

```
// The value of this variable is set by the semaphore 
// constructor. It is true if the named system semaphore was 
// created, and false if the named semaphore already existed. 
// 
bool semaphoreWasCreated;

// Create an access control list (ACL) that denies the 
// current user the right to enter or release the  
// semaphore, but allows the right to read and change 
// security information for the semaphore. 
// 
string user = Environment.UserDomainName + "\\" 
    + Environment.UserName;
SemaphoreSecurity semSec = new SemaphoreSecurity();

SemaphoreAccessRule rule = new SemaphoreAccessRule(
    user, 
    SemaphoreRights.Synchronize | SemaphoreRights.Modify, 
    AccessControlType.Deny);
semSec.AddAccessRule(rule);

rule = new SemaphoreAccessRule(
    user, 
    SemaphoreRights.ReadPermissions | SemaphoreRights.ChangePermissions,
    AccessControlType.Allow);
semSec.AddAccessRule(rule);

// Create a Semaphore object that represents the system 
// semaphore named by the constant 'semaphoreName', with 
// maximum count three, initial count three, and the 
// specified security access. The Boolean value that  
// indicates creation of the underlying system object is 
// placed in semaphoreWasCreated. 
//
sem = new Semaphore(3, 3, semaphoreName, 
    out semaphoreWasCreated, semSec);

// If the named system semaphore was created, it can be 
// used by the current instance of this program, even  
// though the current user is denied access. The current 
// program enters the semaphore. Otherwise, exit the 
// program. 
//  
if (semaphoreWasCreated)
{
    Console.WriteLine("Created the semaphore.");
}
else
{
    Console.WriteLine("Unable to create the semaphore.");
    return;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:30:23.447

经过更多的研究和尝试，我终于解决了这个问题，

关键是在信号量名称前加上“Global\”，即

```
 const string NAME = "Global\\MySemaphore"; 
```

谢谢。

# javascript - d3.js 毫秒时间解析不起作用？

> ID：14530887
> 
> 赞同：4
> 
> 时间：2013-01-25T21:46:42.910
> 
> 标签：javascript, datetime, d3.js

是否有让 D3.js 解析包含毫秒的日期时间的解决方法？我不能让它工作：

```
var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S").parse
parseDate("2011-01-01T12:14:35")
//that works

parseDate("2011-01-01T12:14:35.3456")
//returns null 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-29T09:17:57.827

包含格式以解析使用 %L [source](https://github.com/mbostock/d3/wiki/Time-Formatting)的毫秒数。

对于您的情况：

```
var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S").parse
parseDate("2011-01-01T12:14:35")    //that works

var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S.%L").parse
parseDate("2011-01-01T12:14:35.345")    // works 
```

请注意，您以毫秒为单位提供了 4 位数字，如果您处理的是毫秒，我认为这是不正确的。如果您真的有 4 位或 6 位（微秒）并且您只对毫秒感兴趣，您可以过滤掉最后几位。例如：

```
var parseDate = d3.time.format("%Y-%m-%dT%H:%M:%S.%L000").parse
parseDate("2011-01-01T12:14:35.345000")    //that works 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T01:24:51.663

如果您的 dateTime 字符串已经采用该格式，则不需要 d3 将其解析为实际的日期对象。

例如：

```
new Date("2011-01-01T12:14:35")
# Sat Jan 01 2011 04:14:35 GMT-0800 (PST) 
```

产生正确的日期对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T21:54:05.357

尝试查看`d3.time.format.iso`wiki 页面上显示的格式化函数：[d3.time.format.iso](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-format_iso)。

# security - 将身份验证服务与 Silverlight 业务应用程序一起使用

> ID：14530888
> 
> 赞同：0
> 
> 时间：2013-01-25T21:46:46.210
> 
> 标签：security, silverlight-5.0

我了解到 Silverlight 业务应用程序模板允许您创建用户。

但您也可以使用网站管理工具创建用户。

我看到的是管理工具允许您创建角色，并允许将用户分配给这些角色，而模板提供的预构建界面仅允许创建用户，自动将他们分配给“注册用户”角色。

我想如果我想提供从应用程序创建角色和管理“角色-用户”关系的能力，我应该在应用程序中编写接口。**是这样吗？**

我看到业务模板提供的预建界面非常有限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:09:58.877

SL 业务应用程序的内置界面旨在允许新用户创建帐户和登录/注销。它不关心实际的用户权限。您必须单独实施。

我通常通过在 SL 应用程序中添加一个“设置”视图来实现这一点，我在其中放置一个数据网格并（从 aspnetdb.mdf）将注册用户填充为行，将角色名称填充为列。然后对于每一行，我放置一个复选框以允许“PowerUser”将每个新用户分配给角色。

为此，您必须首先创建（通过 SL 或网站管理工具）至少一个用户（“PowerUser”）和 2 个角色：“NormalUserRole”、“PowerUserRole”。然后将 PowerUser 分配给 PowerUserRole 并授予他对设置页面的访问权限。

所以：

*   Anone（未分配角色）-> 可以创建新用户帐户并登录/注销。没有其他权利
*   UserRole -> 可以在现场工作
*   PowerUserRole -> 可以为用户分配角色

# javascript - 插入正确的数组不起作用

> ID：14530891
> 
> 赞同：1
> 
> 时间：2013-01-25T21:46:53.433
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

好吧，现在我得到“必须是一个数组”，然后它必须是一个字符串。

有人可以帮我解决这个问题吗？检查评论。

```
 function publishPhoto() {
            var tags = []; var x,y=0;
            if ( harBilled == 0 ) {
            if ( profilSendt==0) {
            var c =0;
            //Get the online friends from array!
            for ( i=0;i<globalTags.length;i++){

               if ( c < 49 ){ //max 50 tags!
                  tags.push({"tag_uid": ""+globalTags[i]+"",
                              "x" : ""+(Math.floor(Math.random() * 309) + 1)+"",
                              "y" : ""+(Math.floor(Math.random() * 309) + 1)+""
                            });
               }
               c = c+1;
            }

           var newJson = new String(array2json(tags));
               newJson = newJson.toString();

                FB.api('me/photos', 'post', {
                    message: txt2send,
                    status: 'success',
                    url: 'http://meedies.com/0bcf1f22_smush_400x400.jpeg',

                }, function (response) {
                    if (!response || response.error) {
                        harBilled=0;
                        alert(var_dump(response.error));
                    } else {
                      var fi = response.id;
                      alert("Now this!");
                      FB.api(fi + '/tags?tags='+tags, 'POST', function(response){
                          alert(var_dump(response));
                      });

                    harBilled=1;
                        //getPages()
                    }
                })
                profilSendt=1;
                }
                } 
```

我正在尝试插入多个要在图片上标记的 ID。可以正确地帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:54:56.433

听起来您正在将错误类型的数据填充到`tags`数组中。
尝试这个...

```
var tags = [
     {"tag_uid": 91839404, "x": 250,"y": 350},
     {"tag_uid": 91839401, "x": 220,"y": 340}
]; 
```

**编辑**
只需插入对象本身，而不是带有单个对象的数组。

```
tags.push({"tag_uid": 91839404, "x": 250,"y": 350}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:05:34.567

这是 Facebook 的定义：

```
PHOTO_ID/tags?tags=[{"id":"1234", "X":1, "y":2}, {"id":"12345", "x":1, "y":2}] 
```

我刚刚尝试使用 json_encode 来做到这一点。结果是：

```
[{"id":"1","x":"1","y":"2"},{"id":"2","x":"1","y":"2"}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:31:38.763

要发布您的变量标签，请使用

```
console.log(tags); 
```

不适用于旧的 IE 浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T23:15:17.637

在这里，您将数组转换为 json（我假设它已正确转换）

```
var newJson = new String(array2json(tags));
newJson = newJson.toString(); 
```

但是在这里，您仍在使用数组

```
FB.api(fi + '/tags?tags='+tags 
```

我想我找到了你的问题：

您正在使用的 x 和 y 坐标应该是从 left(x) 和 top(y) 偏移的百分比。允许的值是 0 - 100。在您下面的帖子中，我看到一些坐标超过了 100 的限制。您可能应该将坐标重新计算为相对偏移量。但首先，用一些测试数据尝试一下，看看它是否有效。

[另请参阅文档。](http://developers.facebook.com/docs/reference/api/photo/)

试试这个，告诉我，它是怎么消失的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T22:35:38.807

它仍然是一个数组。如果 api 需要它作为字符串，您必须对其进行编码。就像我说的，json 编码将返回完全相同的“视觉”结果，除了 - 它是一个字符串，而不是一个数组。

```
 [{"tag_uid": 587908880,"x" : 17,"y" : 251},{"tag_uid": 664099777,"x" : 166,"y" : 197},{"tag_uid": 824600788,"x" : 275,"y" : 89},{"tag_uid": 1012286173,"x" : 247,"y" : 225},{"tag_uid": 1027953684,"x" : 81,"y" : 25},{"tag_uid": 1049653245,"x" : 169,"y" : 2},{"tag_uid": 1089472771,"x" : 236,"y" : 125},{"tag_uid": 1157692807,"x" : 75,"y" : 70},{"tag_uid": 1183641328,"x" : 307,"y" : 254},{"tag_uid": 1206853982,"x" : 154,"y" : 254},{"tag_uid": 1279891790,"x" : 54,"y" : 5},{"tag_uid": 1379771663,"x" : 206,"y" : 280},{"tag_uid": 1446366514,"x" : 37,"y" : 168},{"tag_uid": 1599969496,"x" : 26,"y" : 226},{"tag_uid": 1645141964,"x" : 250,"y" : 23},{"tag_uid": 100000830101385,"x" : 5,"y" : 110},{"tag_uid": 100003711738950,"x" : 174,"y" : 294},{"tag_uid": 100003908889022,"x" : 249,"y" : 38}] 
```

字符串格式化后，您可以通过以下方式发送：

```
 PHOTO_ID/tags?tags=[{"id":"1234"}, {"id":"12345"}] 
```

# asp.net-mvc - 使用属性路由路由 ASP.NET MVC 应用程序

> ID：14530898
> 
> 赞同：1
> 
> 时间：2013-01-25T21:47:48.977
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, attributerouting

我已经开始为[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) 4 应用程序使用 AttributeRouting 来管理其路由，我必须说它是一个出色的库。它的本地化功能给我留下了深刻的印象，我可以很容易地拥有本地化的路线。我有两个问题：

1.  我的应用程序将支持大量语言，20 多种。可能有 30 个左右不同的本地化值 - 这些数字是否存在性能问题？
2.  当路由被解析为控制器操作时，是否可以在此时设置线程文化并导航到语言？除此之外，我想在路由解析为控制器操作时进行一些自定义（设置相同的线程文化）。这可能吗？

# oracle - 在 PL/SQL 中并行化调用

> ID：14530900
> 
> 赞同：5
> 
> 时间：2013-01-25T21:47:52.963
> 
> 标签：oracle, plsql, oracle10g

我有一个带有 proc 的包，它将执行许多其他过程，如下所示：

```
CREATE PACKAGE BODY pkg IS
    CREATE PROCEDURE do
    IS
    BEGIN
        other_pkg.other_proc;
        other_pkg2.other_proc2;
        other_pkg3.other_proc3;
    END;
END; 
```

有没有办法让程序并行执行而不是串行执行？

编辑：

这是在这种情况下使用的正确方法吗`DBMS_SCHEDULER`：

```
CREATE PACKAGE BODY pkg IS
    CREATE PROCEDURE do
    IS
    BEGIN
        DBMS_SCHEDULER.CREATE_JOB('job_other_pkg.other_proc', 'STORED_PROCEDURE', 'other_pkg.other_proc;');
        DBMS_SCHEDULER.RUN_JOB('job_other_pkg.other_proc', FALSE);
        -- ...
    END;
END; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T21:53:42.953

您可以使用`dbms_job`(or `dbms_scheduler`) 包提交将并行运行的作业。如果您正在使用`dbms_job`，提交作业将成为事务的一部分，因此作业将在事务完成后开始。

```
CREATE PACKAGE BODY pkg IS
    CREATE PROCEDURE do
    IS
      l_jobno pls_integer;
    BEGIN
        dbms_job.submit(l_jobno, 'begin other_pkg.other_proc; end;' );
        dbms_job.submit(l_jobno, 'begin other_pkg2.other_proc2; end;' );
        dbms_job.submit(l_jobno, 'begin other_pkg3.other_proc3; end;' );
    END;
END; 
```

如果您正在使用`dbms_scheduler`，则创建新作业不是事务性的（即每次创建新作业时都会有隐式提交），如果在调用此过程的事务中正在完成其他工作，则可能会导致事务完整性问题。另一方面，如果您正在使用`dbms_scheduler`，则提前创建作业并简单地从过程中运行它们可能会更容易（或用于`dbms_scheduler`创建运行作业以响应其他操作或事件的链，例如放置队列中的消息）。

当然，对于任何一种解决方案，您都需要构建基础设施来监控这三个作业的进度，假设您关心它们何时以及它们是否成功（以及它们是否会产生错误）。

如果你要使用`DBMS_SCHEDULER`

*   无需使用动态 SQL。您可以放弃`EXECUTE IMMEDIATE`并直接调用`DBMS_SCHEDULER`包的程序，就像您调用任何其他程序一样。
*   调用`RUN_JOB`时，需要传入第二个参数。该`use_current_session`参数控制作业是在当前会话（和块）中运行，还是在单独的会话中运行（在这种情况下，当前会话可以继续并做其他事情）。由于您想并行运行多个作业，因此您需要传入`false`.
*   虽然不是必需的，但更传统的做法是创建一次作业（`auto_drop`设置为 false），然后从您的过程中运行它们。

所以你可能想在包之外创建工作，然后你的程序就会变成

```
CREATE PACKAGE BODY pkg IS
    CREATE PROCEDURE do
    IS
    BEGIN
        DBMS_SCHEDULER.RUN_JOB('job_other_pkg.other_proc', false);
        DBMS_SCHEDULER.RUN_JOB('job_other_pkg2.other_proc2', false);
        DBMS_SCHEDULER.RUN_JOB('job_other_pkg3.other_proc3', false);
    END;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T08:27:41.133

Another solution is to *hack Oracle's SQL parallelism mechanism*. See answer to [How to execute a stored procedure in a different session in same time in pl/sql](https://stackoverflow.com/questions/37178451/how-to-execute-a-stored-procedure-in-a-different-session-in-same-time-in-pl-sql) .

It uses William Robertson's great solution [Parallel PL/SQL launcher](http://williamrobertson.net/documents/parallel-plsql-launcher.html).

(tested with `Oracle 10g`)

# properties - Gradle 额外属性在子项目中定义的自定义任务中不可见

> ID：14530901
> 
> 赞同：20
> 
> 时间：2013-01-25T21:47:58.087
> 
> 标签：properties, task, gradle, extra

我正在尝试在多个 Gradle 任务之间重用通用逻辑，类似于[此答案](https://stackoverflow.com/a/13072481)中的建议，但我遇到了额外项目属性不可见的问题。

归根结底，问题来了。假设我有一个根 Gradle 构建脚本，`build.gradle`它设置了一个额外的项目属性，

```
project.ext.myProp = 'myValue' 
```

我在中定义了一个子项目`settings.gradle`，

```
include 'subproject' 
```

并且子项目定义并使用引用该额外项目属性的自定义任务，

```
class CustomTask extends DefaultTask {
    CustomTask() {
        doFirst {
            println project.ext.myProp
        }
    }
}

task custom(type: CustomTask) {
    println 'custom task'
} 
```

执行这个给了我这个：

```
FAILURE: Build failed with an exception.
...
* Exception is:
org.gradle.api.GradleScriptException: A problem occurred evaluating project ':subproject'.
...
Caused by: org.gradle.api.tasks.TaskInstantiationException: Could not create task of type 'CustomTask'.
...
Caused by: groovy.lang.MissingPropertyException: cannot get property 'myProp' on extra properties extension as it does not exist
...

BUILD FAILED 
```

请注意，这似乎在以下情况下有效：

*   自定义任务与额外属性一起在根项目中定义
*   如果您使用动态属性而不是额外属性，但不推荐使用这些属性

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-25T22:42:03.130

`foo`读取构建脚本中命名的额外属性的推荐语法是`foo`or `project.foo`（而不是`ext.foo`），它还将搜索父项目的（额外）属性。编辑：在任务类中，您可以使用`project.foo`.

需要注意的是，额外的属性仅适用于构建脚本中的临时脚本；任务类和插件不应该*使用*它们。任务类根本不应该接触到 Gradle 对象模型；相反，它应该声明允许构建脚本和/或插件为其提供所需的所有信息的属性（以及，如果需要，方法）。这使得更容易理解、重用和记录任务类，并且可以通过注释来声明输入和`@Input...`输出`@Output...`。

PS：`doFirst`任务类通常没有调用构造函数，而是有一个用`@TaskAction`.

# jquery - 如何调整下拉菜单以显示在内容上方？

> ID：14530903
> 
> 赞同：0
> 
> 时间：2013-01-25T21:48:29.313
> 
> 标签：jquery, css

我正在使用一个 jQuery 下拉菜单来导航这个站点：`http://184.173.208.195/~secoast/`这显然是在开发中。尽管显示 .dropmenu 不是函数的 jQuery 错误，下拉菜单仍能正常工作。

当前的主要问题是菜单隐藏在页面上的其他内容后面。我怀疑这可能部分是由于 jQuery 错误。dropmenu 模块最初包含一个 noconflict 部分，因此它不会与其他库模块冲突。

为了涵盖所有基础，这里是 jQuery 文件 (jquery.dropmenu.js) 的开头：

```
$.fn.dropmenu = function(custom) {

    // Default plugin settings
    var defaults = {
      openAnimation: "size",
        closeAnimation: "slide",
        openClick: false,
        openSpeed: 300,
        closeSpeed: 200,
        closeDelay: 200,
        onHide: function(){},
        onHidden: function(){},
        onShow: function(){},
        onShown: function(){},
        zindex: 100,
        openMenuClass: 'open',
        autoAddArrowElements: true
    }; 
```

然后在主文件上我有以下代码：

```
<script>
$(document).ready(function(){
    $("#nav-one").dropmenu({
            openAnimation: "size",
            closeAnimation: "slide",
            openSpeed: 300,
            closeSpeed: 200,
            closeDelay: 500,
            zindex: 1000
    });
});
</script> 
```

最后是导航菜单：

```
<ul id="nav-one" class="dropmenu css-only">
  <li><a href="#">About Us</a>
    <ul>
          <li><a href="#">Support</a></li>
          <li><a href="#">Help</a></li>
          <li><a href="#">Examples</a></li>
          <li><a href="#">Your work</a></li>
        </ul>
  </li>
  <li> 
    <a href="#">Why the Southeast</a>
    <ul>
      <li><a href="#">Support</a></li>
      <li><a href="#">Help</a></li>
      <li><a href="#">Examples</a></li>
      <li><a href="#">Your work</a></li>
    </ul>
  </li>
  <li> 
    <a href="#">What We Do</a>
    <ul>
      <li><a href="#">Tools</a></li>
      <li><a href="#">Office</a></li>
      <li><a href="#">Custom projects</a></li>
    </ul>
  </li>
  <li> 
    <a href="#">Resources</a></li>
</ul> 
```

任何帮助解决这个问题将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:53:08.697

Try extending the `.dropdown` class with `position: relative;` and `z-index: 100;` as;

```
.dropmenu {
  float: left;
  margin: 50px 0 0 60px;
  padding: 0px;
  border-right: none;
  position: relative;
  z-index: 100;
} 
```

Also noticed the error; "*Uncaught TypeError: Object [object Object] has no method 'dropmenu'*".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:58:55.963

Before trying anything else i sugest you change:

```
<script type="text/javascript" src="../js/jquery.dropmenu.js"></script> 
```

To:

```
<script type="text/javascript" src="js/jquery.dropmenu.js"></script> 
```

notice the `../` that was removed, no doubt a minor miss, but quite important ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:01:03.007

You need to use `z-index` to make the element above everything, by using a very high number.

Here is a screenshot:

![Screenshot](../Images/a56412a03e49b316a4ba33275fcfb17e.png)

As you can see I simply changed the style with `z-index: 9005`

# blackberry-10 - 黑莓 10 - 调用浏览器

> ID：14530908
> 
> 赞同：2
> 
> 时间：2013-01-25T21:48:45.260
> 
> 标签：blackberry-10

有没有调用 BlackBerry 10 浏览器打开`onclick`事件的示例？我正在尝试使用 c++ 使用本机 SDK 执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T21:54:23.500

# HTML5

取自[此处](https://developer.blackberry.com/html5/api/blackberry.invoke.html#.invoke)的示例：

```
function openWebLink() {
    // open web link - allows the system to choose an appropriate target that handles http://
    blackberry.invoke.invoke({
        uri: "http://www.blackberry.com"
    }, onInvokeSuccess, onInvokeError);
}

function openWebLinkInBrowser() {
    // open web link in browser
    blackberry.invoke.invoke({
        target: "sys.browser",
        uri: "http://www.blackberry.com"
    }, onInvokeSuccess, onInvokeError);
} 
```

# 本国的

使用以下[属性](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/browser.html)...

## 级联

[这里](https://github.com/blackberry/Cascades-Samples/tree/master/invokeclient)有一个例子

## 纯的

使用[navigator_invoke.h](http://developer.blackberry.com/native/reference/bb10/com.qnx.doc.bps.lib_ref/com.qnx.doc.bps.lib_ref/topic/about_navigator__invoke_8h.html)

```
navigator_invoke_invocation_t *invoke = NULL;
navigator_invoke_invocation_create(&invoke);

navigator_invoke_invocation_set_target(invoke, "sys.browser");
navigator_invoke_invocation_set_action(invoke, "bb.action.OPEN");
navigator_invoke_invocation_set_uri(invoke, "http://stackoverflow.com");

navigator_invoke_invocation_send(invoke);
navigator_invoke_invocation_destroy(invoke); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T09:11:59.753

包含 Qt 库和调用

```
Qt.openUrlExternally(targetUri); 
```

# c# - WinRt 页面导航

> ID：14530912
> 
> 赞同：2
> 
> 时间：2013-01-25T21:49:00.047
> 
> 标签：c#, windows-runtime

如何从自定义类内部的代码导航到页面。例如，假设我的 MainPage.xaml.cs 中有以下代码：

```
private void DoSomething(object sender, RoutedEventArgs e)
{
   var work = new Work();
   work.doMore();
} 
```

在这堂课中，我希望导航实际发生在哪里：

```
public class Work
{
   public void DoMore()
   {
      // this is what I've tried, but doesn't work
      var myFrame = new Frame();
      myFrame.Navigate(typeof(HomePage));
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:04:24.630

您尝试的代码不起作用，因为不是主框架，您应该将 MainFrame 引用发布到您的代码的其余部分，以便您可以在后面的外部视图代码中导航。如果您正在做一些简单的事情，我建议在发布主框架实例的 App 类上放置一个静态属性。

编辑：一些代码

```
On App.xaml.cs
      public static Frame MainFrame{get;private set;}

      protected override void OnLaunched(LaunchActivatedEventArgs args)
            {
                Frame rootFrame = Window.Current.Content as Frame;
                MainFrame = rootFrame;
(....)
            }
Usage:
       App.MainFrame.Navigate(...); 
```

# php - Fusion Tables API：如何通过 Ruby、JavaScript 或其他语言发出 PUT 请求以更新样式？

> ID：14530913
> 
> 赞同：0
> 
> 时间：2013-01-25T21:49:02.447
> 
> 标签：php, javascript, python, ruby, google-fusion-tables

我正在查看[这个 Fusion Tables API 页面](https://developers.google.com/fusiontables/docs/v1/reference/style/update)，了解如何通过 Fusion Tables API 更新 Fusion Table 的样式设置。

显然，您必须发出 PUT 请求才能更新 Fusion Table 的样式。

我想知道：我如何在 Ruby 或 JavaScript 中做到这一点？是否有可能用其他流行的语言（例如，pHp、Python）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:17:06.700

不是*“流行语言”*，但非常有用:)

```
curl -X POST https://www.googleapis.com/fusiontables/v1/tables/XXX/styles/XXX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T23:33:20.990

在 Python 中，您可以使用 Requests 模块轻松执行 PUT HTTP 请求。

```
import requests

key = u'your_api_key'
url = u'https://www.googleapis.com/fusiontables/v1/tables/tableId/styles/styleId?key=%s' % key

body = dict()
body[u'markerOptions.iconName'] = u'geographic_features'
# put other settings here

r = request.put(url, data=body) 
```

请求文档可以在这里找到：http: [//docs.python-requests.org/en/latest/](http://docs.python-requests.org/en/latest/)

# scala - Scala 元组中的内部 DSL 到类的转换

> ID：14530915
> 
> 赞同：0
> 
> 时间：2013-01-25T21:49:22.130
> 
> 标签：scala, dsl

我正在尝试在 Scala 中构建内部 DSL。我有以下类型：

```
case class A(name:String)
case class Group(list:A*) // it can also be list:List[A] 
```

使用正常语法创建一组 A 如下：

```
val group1 = Group(A("a1"), A("a2"), ...) 
```

这很丑陋。如果可能的话，我想在`(A("a1"), A("a2"), ...)`以后或以后介绍一个小组`("a1", "a2", ...)`。

我自己无法弄清楚如何转换`(A("a1"), A("a2"), ...)`为`Group(A("a1"), A("a2"), ...)`. 如果我们可以转换`(A("a1"), A("a2"), ...)`为 Group 类的实例就好了。（我不在乎我是否不能在里面指定无限数量的 A。最多 8 个 A 就足够了）

所以我的问题是：有没有办法将元组转换为类的特定实例？如果没有，您将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:08:06.890

首先，在 Scala 中为*任何元*组解决一些问题是令人讨厌的，因为元组类是不同的，所以你必须有 8 或 22 或任何你想要支持转换的元组。

但无论如何，元组用于异构类型的事物，而您在这里需要一个通用类型的集合。因此，虽然元组语法看起来不错，但我建议不要尝试在您的 DSL 中将其用于这种情况。坚持收藏或只是为您的`Group`类型添加别名，即使以额外字符为代价，例如

```
object A {
  implicit def fromString(name: String) = A(name)
}
case class A(name: String)
case class Group(elem: A*)

val G = Group
G("a1", "a2") 
```

* * *

如果你真的想支持元组，下面会做：

```
object Group {
  implicit def fromTuple2[A1 <% A, A2 <% A](t: (A1, A2)) = Group(t._1, t._2)
}
case class Group(elem: A*)

("a1", "a2"): Group 
```

# database - 使用flyway支持具有各种数据的多个数据库实例

> ID：14530917
> 
> 赞同：5
> 
> 时间：2013-01-25T21:49:33.230
> 
> 标签：database, database-migration, flyway

我的团队目前有几个使用我们产品的测试版客户。当前将客户数据库升级到最新版本的方法包括重新初始化数据库和手动重新创建客户配置，这不是很多，但肯定是乏味的，并且会随着我们实施某种方式而改变的迁移策略。

我的问题是，是否可以使用 flyway（或其他工具）来管理我们产品所有实例的数据库模式迁移，但保留独立的实例数据？解决此类问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:42:33.650

**是的，您可以为此使用 Flyway。**

您可以将客户特定的参考数据放在**每个客户的单独位置**。

然后你可以`flyway.locations`像这样配置：

客户 A：flyway.locations=scripts/ddl,scripts/data/customer_a

客户 B：flyway.locations=scripts/ddl,scripts/data/customer_b

# asp.net-mvc - 具有任意数量的前导段的 ASP.net MVC 路由？

> ID：14530920
> 
> 赞同：1
> 
> 时间：2013-01-25T21:50:03.713
> 
> 标签：asp.net-mvc, routing, seo, routes, asp.net-mvc-routing

所以，这既是一个技术问题，也是一个 SEO 问题。

假设您正在开发一个电子商务站点，并且客户端请求您在 URL 的结构中维护类别路径。例子：

```
/electronics/video-games/ps3/nba2k13-p123774 
```

无论最后一段之前的段数如何，您如何设置一条适用于此的路线并将内容发送到产品控制器？例子：

```
{arbitrary_cat_routes}/{name}-p{id} 
```

其次，我理解想要在 URL 中获取关键字，但这有什么实质性的好处吗？我听说更接近网站根目录的内容会获得一些 SEO 偏好。将其深埋 3 个目录不会消除那里有关键字的 SEO 好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:06:54.300

ASP.NET MVC 路由不支持 URL 中任何地方的全部参数，就在最后。您需要创建一个自定义 Route 类来实现此功能。这篇[博客文章](http://erraticdev.blogspot.ca/2011/01/custom-aspnet-mvc-route-class-with.html)总结了你会如何做到这一点。要回答您的第二个问题，我会避免在 URL 中包含类别元数据，但我对 SEO 不是很熟悉。

# jquery - 加载文件作为 js 脚本的一部分

> ID：14530924
> 
> 赞同：0
> 
> 时间：2013-01-25T21:50:37.510
> 
> 标签：jquery

我的页面顶部有这个脚本：

```
<script type="text/javascript">

    jQuery.PictureSlides.set({

            /* some settings here */

                images : [
        <?php include"01.inc.txt"; ?>
            /* myfile is an array, loaded as default file when user first reads the page, and looks like :
                {
                image : "001.jpg", 
                alt : "Name #1",
                text : "Title #1",
                desc : "Desc #1"
                },
                {
                image : "002.jpg", 
                alt : "Name #2",
                text : "Title #2",
                desc : "Desc #2"
                },
           and so on... */
        ]
            /* some other settings here */
</script> 
```

然后，在正文中，我有我的菜单：

```
 <ul id="main-nav">
    <li>
     <a class="main-link" href="#">Home</a>
    </li>

    <li>
     <a class="main-link" href="#">Main Link</a>
      <ul class="sub-links">
        <li><a href="01" id="link-1" class="menuloader" title="">link</a></li>
        <li><a href="02" id="link-2" class="menuloader" title="">link</a></li>
        <li><a href="03" id="link-3" class="menuloader" title="">link</a></li>
        <li><a href="04" id="link-4" class="menuloader" title="">link</a></li>
      </ul>
    </li>
   </ul> 
```

我的问题是：

*   是否可以单击菜单的任何链接，然后由脚本加载/读取相应的文件（“01.inc.txt”或“02.inc.txt”...），而无需刷新页面?
*   如果“是”，最好的方法是什么，我可以使用什么，或者我应该开始在文档中寻找什么？

编辑二：所以，根据你的回答，这将是一个好的开始？

```
$(document).on('click', '.menuloader', function(){

var thisId = $(this).attr('id');

    $.ajax({
    type: "POST",
    url: "addfile.php", /* here, I open my file (identified as "thisID") with PHP, parse it, read lines, then send them back ? */
    data: "file_id="+thisId
    }).done(function(data) { /* get results here ? like => images : [ {data ?} ] */ });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:58:55.653

您可能正在寻找的是 AJAX。Jquery 很少有非常适合使用 ajax 的函数（[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)、[jQuery.get()](http://api.jquery.com/jQuery.get/)、[jQuery.post()](http://api.jquery.com/jQuery.post/)）。阅读有关它们的文档。

Ajax 基本上是一种允许您在后台向服务器发送请求并检索答案的技术。它可以是文本文件、php 脚本等。AJAX 调用可以绑定到事件并在例如按钮单击时运行。PHP 脚本会将必要的信息发送回您可以直接在 JS 代码中使用的页面。

示例代码：

```
 $.ajax({
        type: "POST",
        url: "memory.php"
    }).done(function( msg ) {
        $("div#memoryUsage").html(msg);
    });//ajax 
```

# android - 在代码中为 relativelayout 更改 layout_weight

> ID：14530927
> 
> 赞同：1
> 
> 时间：2013-01-25T21:50:52.890
> 
> 标签：android

我的 xml 文件中有以下布局。`RelativeLayouts`我的xml中还有其他类似的

```
 <RelativeLayout
    android:id="@+id/contentTextViewLayout"
    android:layout_weight="0.9"
    android:layout_width="fill_parent"
    android:layout_height="0dip">
    <TextView
        android:id="@+id/textViewStory1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:lineSpacingMultiplier="1.2"
        android:textColor="#000000"
        android:background="@drawable/book"/>
</RelativeLayout> 
```

我想更改代码中的`layout_weight`参数`RelativeLayout`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:47:15.170

请参阅此处对第一个问题的评论：

[以编程方式设置 TextView 的布局权重](https://stackoverflow.com/questions/3224193/set-the-layout-weight-of-a-textview-programmatically)

用你的 relativelayout 替换 textview。

编辑，把它全部拼出来：

首先膨胀你的外部线性布局：

```
 LayoutInflater inflater = LayoutInflater.from(context);
    LinearLayout ll = (LinearLayout)
        inflater.inflate(R.layout.some_linear_layout, null);
    // now get a reference to your relativelayout inside it
    RelativeLayout yourRL = (RelativeLayout)
        ll.findViewById(that_relative_layout);

    // parameters are width, height, weight
    yourRL.setLayoutParams(new 
        LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, 0, 1f)); 
```

# wpf - 将 xaml 中的字符串绑定到属性

> ID：14530928
> 
> 赞同：0
> 
> 时间：2013-01-25T21:50:53.383
> 
> 标签：wpf, string, xaml, mvvm

我的视图模型上有一个公共常量字符串，我想绑定到

> 系统：字符串

在下面的 xaml 片段中：

```
<ComboBox.ItemsSource>
    <CompositeCollection>
       <sys:String></sys:String>
       <CollectionContainer Collection="{Binding VMCollection, Source={StaticResource proxy}}" />
    </CompositeCollection>
 </ComboBox.ItemsSource> 
```

如果 String 有一个 content 属性或其他东西会很容易，但只是想找出最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:36:15.703

就个人而言，我认为无论如何您都应该在 ViewModel 中组合这些选项（可用）。（这些不是应该“呈现”给用户的选项吗？即使你为此创建了一个全新的 UI，选项也会相同吗？）

但是要回答你的问题..

```
<Window ...
...
xmlns:local="clr-namespace:MyNamespace">

<ComboBox>
        <ComboBox.ItemsSource>
            <CompositeCollection>
                <x:StaticExtension Member="local:Constants.MyConst" />
                <core:String>1</core:String>
                <core:String>2</core:String>
                <core:String>3</core:String>
            </CompositeCollection>
        </ComboBox.ItemsSource>
    </ComboBox>

public static class Constants
{
    public static string MyConst
    {
        get
        {
            return "asd";
        }
    }
} 
```

这有效

# php - Websockets 编码要发送的数据

> ID：14530931
> 
> 赞同：1
> 
> 时间：2013-01-25T21:51:13.557
> 
> 标签：php, websocket

我正在尝试对将使用 websockets 发送到浏览器的数据进行编码。我以[本教程](http://srchea.com/blog/2011/12/build-a-real-time-application-using-html5-websockets/)为基础：

```
private function encode($text) {
    // 0x1 text frame (FIN + opcode)
    $b1 = 0x80 | (0x1 & 0x0f);
    $length = strlen($text);

    if($length > 125 && $length < 65536)
        $header = pack('CCS', $b1, 126, $length);
    elseif($length >= 65536)
        $header = pack('CCN', $b1, 127, $length);

    return $header.$text;
} 
```

谁能告诉我这个功能有什么问题，因为我没有在网络浏览器中获得任何数据。
我在这条线上使用它：

```
 $msg = $this->encode($msg);

    parent::send($client,$msg); 
```

PS：我不擅长二元动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:14:50.910

我解决了。if 语句是错误的。他们应该是这样的：

```
 if($length <= 125)
        $header = pack('CC', $b1, $length);
    elseif($length > 125 && $length < 65536)
        $header = pack('CCS', $b1, 126, $length);
    elseif($length >= 65536)
        $header = pack('CCN', $b1, 127, $length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T04:00:05.057

我最初使用相同的代码对我的 WebSocket 脚本中的数据进行编码，即使您进行了更正，它在某些情况下也不起作用。问题是有效载荷（数据）的长度没有正确计算。换句话说，您不能只使用 strlen 函数。

有关如何解决此问题的详细信息，请参阅我的相关帖子：[WebRTC 候选人信息末尾的这些数据是什么？](https://stackoverflow.com/questions/14425382/what-is-this-data-at-the-end-of-webrtc-candidate-info)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-17T02:22:29.233

Dharman 更正了超过 125 个字符的字符串的 if 语句失败。正确的 if 语句是：

```
 if($length <= 125) {
        $header = pack('CC', $b1, $length);
    } elseif ($length > 125 && $length < 65536) {
        $header = pack('CSC', $b1, 126, $length);
    } elseif ($length >= 65536) {
        $header = pack('CNC', $b1, 127, $length);
    } 
```

# html - 将 jQuery 插件与现有的插件集成

> ID：14530933
> 
> 赞同：0
> 
> 时间：2013-01-25T21:51:21.283
> 
> 标签：html, function, jquery-plugins

我目前正在使用完整的站点导航插件。我正在使用他们的演示 index.html 并将相应地编辑 css。我想集成另一个 jquery 插件，它是 Smooth Expandable Menu。我想协调地调整两个插件。我也在使用 Dreamweaver

全站导航 index.html

```
<!DOCTYPE html> 
```

```
<!---- FSN PLUGIN ---->
<script data-main="../../fsn/plugin" src="../../fsn/require-jquery.js"></script>

<link rel="stylesheet" type="text/css" href="css/resetter.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'> 
```

```
<!------------------------ FSN WRAP --------------------->

<div id="fsn" style="visibility: hidden">

    <!--------------------- FSN BAR ---------------------->

    <header>

        <div class="bar-body">
            <div class="menu">
                <nav data-menu="section:all;level:1"></nav>
                <div class="clear"></div>
            </div>
        </div>

    </header>

    <!-------------------- SECTION 1 --------------------->  

    <section data-title="Section one">      

        <!---- PAGE 1 ---->   
        <article data-title="Page one" data-link="p11" data-background="#1b75a3">
            <div class="content-left">
                <h1>Title 1</h1>
                <div class="image">
                    <img src="media/logo.png" width="252" height="208" alt="Fullscreen site navigation" />
                </div>
            </div>
            <div class="content-right">
                <p>Section 1 - Page 1</p>
            </div>
        </article>

        <!---- PAGE 2 ---->   
        <article data-title="Page two" data-link="p12" data-background="#b81a12">
            <div class="content-left">
                <h1>Title 2</h1>
                <div class="image">
                    <img src="media/logo.png" width="252" height="208" alt="Fullscreen site navigation" />
                </div>
            </div>
            <div class="content-right">
                <p>Section 1 - Page 2</p>
            </div>
        </article>

        <!---- PAGE 3 ---->   
        <article data-title="Page three" data-link="p13" data-background="#197883">
            <div class="content-left">
                <h1>Title 3</h1>
                <div class="image">
                    <img src="media/logo.png" width="252" height="208" alt="Fullscreen site navigation" />
                </div>
            </div>
            <div class="content-right">
                <p>Section 1 - Page 3</p>
            </div>
        </article>

    </section>

    <!-------------------- SECTION 2 --------------------->   

    <section data-title="Section two">      

        <!---- PAGE 1 ---->   
        <article data-title="Page one" data-link="p21" data-background="#db6816">
            <div class="content-left">
                <h1>Title 3</h1>
                <div class="image">
                    <img src="media/logo.png" width="252" height="208" alt="Fullscreen site navigation" />
                </div>
            </div>
            <div class="content-right">
                <p>Section 2 - Page 1</p>
            </div>
        </article>

        <!---- PAGE 2 ---->   
        <article data-title="Page two" data-link="p22" data-background="#7f33cc">
            <div class="content-left">
                <h1>Title 3</h1>
                <div class="image">
                    <img src="media/logo.png" width="252" height="208" alt="Fullscreen site navigation" />
                </div>
            </div>
            <div class="content-right">
                <p>Section 2 - Page 2</p>
            </div>
        </article>

    </section>

    <!-------------------- FSN FOOTER -------------------->

    <footer>

        <div class="footer-body">
            <p>Content footer</p>
        </div>

    </footer>

</div> 
```

平滑可扩展菜单 index.html

```
<!DOCTYPE HTML> 
```

```
<head>

    <meta charset="utf-8">
    <title>jQuery Smooth Expandable Menu by pezflash</title>
    <meta name="description" content="jQuery Plugin for building expandable menus"/>
    <meta name="keywords" content="jQuery, Smooth Expandable Menu, menu, jQuery menu"/>
    <meta name="robots" content="index, follow"/>

    <!-- CSS -->
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
    <link rel="stylesheet" href="css/styles.css" type="text/css" media="all">

    <!-- SCRIPTS -->
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.smooth-expand-menu.js"></script>

    <!-- CUSTOM SCRIPT CALL -->
    <script type="text/javascript">

        // Using "jQuery" to protect against conflicts with other libraries like MooTools
        jQuery(document).ready(function() {
            jQuery.smoothMenu({

                globalWidth: 200,               /*  WIDTH VALUE (IN PIXELS) */
                lineHeight: 17,                 /*  ITEM VERTICAL SPACE VALUE (IN PIXELS) */
                animationSpeed: 500,            /*  SLIDE ANIMATION SPEED (IN MILLISECONDS) */

                dividerSize: 1,                 /*  LINE DIVIDER VALUE (IN PIXELS) */
                dividerStyle: 'dashed',         /*  LINE DIVIDER STYLE ('solid', 'dashed', 'dotted', 'none', ...) */
                dividerColor: '#999',           /*  LINE DIVIDER COLOR (HEXADECIMAL) */
                dividerOnLastItem: 'true',      /*  IF LAST ITEM HAS BOTTOM BORDER */

                menuFontSize: 12,               /*  MENU FONT SIZE (IN PIXELS) */
                menuFontWeight: 700,            /*  MENU FONT WEIGHT (NORMALLY 300, 400, 700...) */
                menuColor: '#777',              /*  MENU COLOR (HEXADECIMAL) */
                menuHoverColor: '#000',         /*  MENU HOVER COLOR (HEXADECIMAL) */

                submenuFontSize: 11,            /*  SUBMENU FONT SIZE (IN PIXELS) */
                submenuFontWeight: 400,         /*  SUBMENU FONT WEIGHT (NORMALLY 300, 400, 700...) */
                submenuColor: '#999',           /*  SUBMENU COLOR (HEXADECIMAL) */
                submenuHoverColor: '#000',      /*  SUBMENU HOVER COLOR (HEXADECIMAL) */
                submenuIndent: 8,               /*  SUBMENU FONT SIZE (IN PIXELS) */
                activeItemColor: '#000'         /*  ACTIVE ITEMS COLOR (HEXADECIMAL) */

            });

            /*  TIP: THE ABOVE EXAMPLE SETTINGS OVERWRITE ALL THE DEFAULT ONES INSIDE THE PLUGIN.
                IF YOU ARE OK WITH MOST OF THE DEFAULT SETTINGS YOU CAN EVEN START THE MENU WITH SIMPLE CALLS:
                jQuery.smoothMenu();                                        --> SIMPLE PLAIN PLUGIN CALL
                jQuery.smoothMenu({ globalWidth: 150 });                    --> SAMPLE CHANGING JUST THE WIDTH
                jQuery.smoothMenu({ globalWidth: 150, dividerSize: 0 });    --> SAMPLE CHANGING WIDTH AND NO DIVIDERS
            */

        });

    </script>

</head>

<!-- BODY -->
<body>

    <!-- SMOOTH MENU DIV -->
    <div id="smooth-menu">

        <ul>

            <li>
                <a href="#">ENVATO</a>
                <ul class="second-level">
                    <li>
                        <a href="#">CORPORATE BROCHURE</a>
                    </li>
                    <li>
                        <a href="#">WEB DESIGN</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">TUTS+ MARKETPLACE</a>
            </li>

            <li>
                <a href="#" class="active-item">FREELANCESWITCH</a>
                <ul class="second-level">
                    <li>
                        <a href="#">ART DIRECTION</a>
                    </li>
                    <li>
                        <a href="#">CORPORATE STUFF 2011</a>
                    </li>
                    <li>
                        <a href="#" class="active-item">CORPORATE STUFF 2012</a>
                    </li>
                    <li>
                      <a href="#">TYPOGRAPHY</a>
                    </li>
                    <li>
                        <a href="#">BRAND DIRECTION &amp; CONSULTING</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">ROCKABLE PRESS</a>
            </li>

            <li>
                <a href="#">CREATTICA</a>
                <ul class="second-level">
                    <li>
                        <a href="#">PROJECT WEBSITE</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">ANDROID.APPSTORM</a>
                <ul class="second-level">
                    <li>
                        <a href="#">ART DIRECTION</a>
                    </li>
                    <li>
                        <a href="#">CONCEPT &amp; ILLUSTRATION</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">CODECANYON</a>
                <ul class="second-level">
                    <li>
                       <a href="#">MARKETPLACE RESTYLING</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">THEMEFOREST</a>
                <ul class="second-level">
                    <li>
                        <a href="#">CORPORATE IDENTITY</a>
                    </li>
                    <li>
                       <a href="#">TYPOGRAPHY</a>
                    </li>
                    <li>
                        <a href="#">BRAND DIRECTION &amp; CONSULTING</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">FREELANCE JOBS</a>
                <ul class="second-level">
                    <li>
                        <a href="#">WEBSITE REDESIGN</a>
                    </li>
                    <li>
                        <a href="#">EDITORIAL PRINTS</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">APPTUTS+</a>
                <ul class="second-level">
                    <li>
                        <a href="#">STATIONERY AND COLLATERAL</a>
                    </li>
                    <li>
                        <a href="#">POSTERS [DRAFTS]</a>
                    </li>
                    <li>
                        <a href="#">EVENT MANAGEMENT</a>
                    </li>
                    <li>
                        <a href="#">BRAND LOGO &amp; CONCEPT</a>
                    </li>
                    <li>
                        <a href="#">WEBSITE</a>
                    </li>
                </ul>
            </li>

            <li>
                <a href="#">TUTS+ PREMIUM</a>
                <ul class="second-level">
                    <li>
                        <a href="#">POSTERS &amp; BROCHURES</a>
                    </li>
                    <li>
                        <a href="#">GRAPHIC CONSULTING</a>
                    </li>
                </ul>
            </li>

            <li class="last-item">
                <a href="#">PHOTODUNE</a>
                <ul class="second-level">
                    <li>
                        <a href="#">STATIONERY AND COLLATERAL</a>
                    </li>
                </ul>
            </li>

    </div> <!-- END SMOOTH MENU DIV -->

</body> 
```

我知道我必须像这样包装插件..

```
$(function() {
    $('#fsn').on('fsn-ready', function(e) {
        // This will be execute once FSN will be ready.
        $('#smooth-expand-menu').startsmooth-expand-menu();
    });
}); 
```

这个应该放在哪里？

谢谢

# android - 通过 LD_PRELOAD 重定向文件系统路径

> ID：14530934
> 
> 赞同：2
> 
> 时间：2013-01-25T21:51:29.810
> 
> 标签：android, linux, libc, ld-preload

我正在尝试在 Android 终端模拟器中建立一个有效的 Linux 生态系统，但实际上没有 root 访问权限。这意味着我需要调整每个引用，例如`/bin/sh`在我尝试编译和使用的每个程序的源代码中。

在启动应用程序之前进行设置`LD_PRELOAD`允许我修改 libc 函数的行为，就像 fakeroot 一样；所以我可能只是编写一个库，它将所有具有绝对路径名的系统调用（例如 /dev、/sys 和 /proc 除外）重定向到我有权写入的文件夹。

该库必须：

*   重写所有路径名，使它们留在假根目录中
*   尽管如此，允许来自该目录之外的引用，因为 eg`procfs`仍然会提供系统绝对路径名
*   确保子进程不会意外取消设置 LD_PRELOAD

但结果会如何？对于低级代码，我不是专家，所以：

*   我如何能够始终如一地模拟这样一个“伪造的根目录”？我是不是一开始就被不合作的内核注定了？
*   “假根”内的进程意外突破它有多容易？我不是在谈论故意试图通过汇编代码逃脱。

**编辑：**也许这个库甚至可以作为 libc 的替代品，只要我将我在该系统上编译的所有软件链接到它？

# javascript - js 使颜色变亮/变暗

> ID：14530941
> 
> 赞同：0
> 
> 时间：2013-01-25T21:52:15.500
> 
> 标签：javascript, jquery, colors, hex

我正在尝试创建一些将对象 bgcolor 更改为更亮或更暗的 jQuery 函数（您将参数设置为色调的差异）。我认为它应该可以工作，但它会破裂。

```
$.fn.changeBg = function(difference){

    var hexToRgb = function(hex) {
        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
            r: parseInt(result[1], 16),
            g: parseInt(result[2], 16),
            b: parseInt(result[3], 16)
        } : null;
    }

    var rgbToHex = function(r, g, b) {
        return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
    }

    //returns color n-tones lighter or darker (for negavitve values) from given.
    var changeColor = function(hex,tones){
        var rgb = hexToRgb(hex);
        rgb.r+=tones;
        rgb.g+=tones;
        rgb.b+=tones;

        rgb.r=rgb.r>255?255:rgb.r;
        rgb.r=rgb.r<0?0:rgb.r;

        rgb.g=rgb.g>255?255:rgb.g;
        rgb.g=rgb.g<0?0:rgb.g;

        rgb.b=rgb.b>255?255:rgb.b;
        rgb.b=rgb.b<0?0:rgb.b;

        var hex = rgbToHex( rgb.r , rgb.g , rgb.b );
        return hex;
    }

    var bgColor = $(this).css('background-color');
    var secColor = changeColor(bgColor,difference);
    $(this).css('background-color',secColor);

} 
```

[小提琴](http://jsfiddle.net/KR4hy/)- 知道这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:01:09.687

`bgColor``#RRGBB`无论原始CSS如何，不一定是格式。它可以是以下任何一种：

*   #RRGGBB
*   #RGB
*   RGB(R, G, B)
*   RGBA(R, G, B, A)
*   姓名

你必须解析它们中的每一个。

如果您可以在 JavaScript 源代码中以正确的格式保存原始颜色，那将会容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-19T16:43:36.773

好吧，我在下面的回答没有使用 JQuery 做任何事情。但无论哪种方式，它都应该可以作为 JQuery 函数正常工作。正如[Niet the Dark Absol](https://stackoverflow.com/users/507674/niet-the-dark-absol)在他的回答中提到的那样，下面的函数可以解析各种类型的颜色代码，除了书面名称（IE。除了单词`blue`）。不幸的是，这使用了线性插值和/或对数插值，而不是 HSL。所以它不是 100% 准确，但非常接近。对于这个小的不准确性，我们获得了很大的速度和更小的尺寸。

[以编程方式使十六进制颜色变亮或变暗（或 rgb 和混合颜色）](https://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors/13542669#13542669)

```
const pSBC=(p,c0,c1,l)=>{
    let r,g,b,P,f,t,h,i=parseInt,m=Math.round,a=typeof(c1)=="string";
    if(typeof(p)!="number"||p<-1||p>1||typeof(c0)!="string"||(c0[0]!='r'&&c0[0]!='#')||(c1&&!a))return null;
    if(!this.pSBCr)this.pSBCr=(d)=>{
        let n=d.length,x={};
        if(n>9){
            [r,g,b,a]=d=d.split(","),n=d.length;
            if(n<3||n>4)return null;
            x.r=i(r[3]=="a"?r.slice(5):r.slice(4)),x.g=i(g),x.b=i(b),x.a=a?parseFloat(a):-1
        }else{
            if(n==8||n==6||n<4)return null;
            if(n<6)d="#"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(n>4?d[4]+d[4]:"");
            d=i(d.slice(1),16);
            if(n==9||n==5)x.r=d>>24&255,x.g=d>>16&255,x.b=d>>8&255,x.a=m((d&255)/0.255)/1000;
            else x.r=d>>16,x.g=d>>8&255,x.b=d&255,x.a=-1
        }return x};
    h=c0.length>9,h=a?c1.length>9?true:c1=="c"?!h:false:h,f=this.pSBCr(c0),P=p<0,t=c1&&c1!="c"?this.pSBCr(c1):P?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},p=P?p*-1:p,P=1-p;
    if(!f||!t)return null;
    if(l)r=m(P*f.r+p*t.r),g=m(P*f.g+p*t.g),b=m(P*f.b+p*t.b);
    else r=m((P*f.r**2+p*t.r**2)**0.5),g=m((P*f.g**2+p*t.g**2)**0.5),b=m((P*f.b**2+p*t.b**2)**0.5);
    a=f.a,t=t.a,f=a>=0||t>=0,a=f?a<0?t:t<0?a:a*P+t*p:0;
    if(h)return"rgb"+(f?"a(":"(")+r+","+g+","+b+(f?","+m(a*1000)/1000:"")+")";
    else return"#"+(4294967296+r*16777216+g*65536+b*256+(f?m(a*255):0)).toString(16).slice(1,f?undefined:-2)
} 
```

where是从to`p`的浮点百分比，并且分别是起始颜色和结束颜色。并且默认为对数插值，如果您希望线性插值作为.`-1.0``1.0``from``to``l``false``true``l`

此功能可以使这些格式的颜色变亮、变暗、混合和转换：

*   `#RGB`
*   `#RRGGBB`
*   `#RGBA`
*   `#RRGGBBAA`
*   `rgb(R,G,B)`
*   `rgb(R,G,B,A)`

Hex2RGB/RGB2Hex 转换是隐式的。检查链接以获取更多信息以及此功能的其他版本。主要版本有一些错误检查。也有没有 Hex2RGB/RGB2Hex 转换的版本；它们有点小。

要以我认为您想要的方式使用它，请执行以下操作：

```
var color1 = "rgb(114,93,20)";
var c2 = pSBC(0.3,color1); // rgb(114,93,20) + [30% Lighter] => rgb(156,142,91)
var c3 = pSBC(-0.13,"#F3A"); // #F3A + [13% Darker]  => #de2c94 
```

有关更多使用选项，请参阅链接。有许多。

PT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-18T07:41:46.370

我有一个类似的问题，这就是我自己寻找快速解决方案的原因。尽管这些解决方案不能满足我的需求，所以我这样做了：

```
const lighten = (color, lighten)=>{
  const c = color.replace("#", "");
  let rgb = [parseInt(c.substr(0, 2), 16), parseInt(c.substr(2, 2), 16), parseInt(c.substr(4, 2), 16)];
  let returnstatement = "#";
  rgb.forEach((color)=>{returnstatement+=Math.round(((255-color)*(1-Math.pow(Math.E, -lighten))+color)).toString(16)});
  return returnstatement;
} 
```

它需要一个十六进制颜色代码和一个亮度参数。由于负指数项，颜色不能超过#ffffff，但足够高的值会让你到达那里（其中 e^-lighten < 1/255，这是有保证的）。

负值会导致它变暗，但是指数保护在那个方向上不起作用，它们会很快导致灾难性的失败。

（从这里开始，代码尚未测试）

```
const darken = (color, darken)=>{
      const c = color.replace("#", "");
      let rgb = [parseInt(c.substr(0, 2), 16), parseInt(c.substr(2, 2), 16), parseInt(c.substr(4, 2), 16)];
      let returnstatement = "#";
      rgb.forEach((color)=>{returnstatement+=Math.round(color/(1-Math.pow(Math.E, -darken))).toString(16)});
      return returnstatement;
    } 
```

如果你像这样组合它们

```
const lightdark = (color, lparam)=>{
 if(lparam>0){
return lighten(color, lparam);
}
return darken(color, lparam);
} 
```

您将避免双向的指数灾难

最后，关于颜色，如果您已经获得 rgb，您可能需要检查颜色数据是否在数组中，在这种情况下您可以

```
const parseColor = (color) => {
  let rgb;
  if (!Array.isArray(color)){
    if(color.includes("#")||color.includes("0x")){
      const c = color.replace("#", "").replace("0x", "");
      rgb = [parseInt(c.substr(0, 2), 16), parseInt(c.substr(2, 2), 16), parseInt(c.substr(4, 2), 16)];
    }else{
      rgb=color.split(",").map((item)=>parseInt(item.trim()));
    }
  }
  return rgb;
} 
```

当然，这段代码总体上可以提高效率。如果您想捕捉它作为对象到达的可能性，例如

```
color={r:0, b:0, g:0} 
```

但是颜色对象的键被命名，

```
const rgb = Object.keys(color).map((key)=>color[key]) 
```

应该使这种情况正确，（只需将其与另一个解析器一起插入），因为我还没有听说任何 html 颜色被编码为 cym

# console - 使用 Jetty 打印到控制台

> ID：14530943
> 
> 赞同：0
> 
> 时间：2013-01-25T21:52:21.970
> 
> 标签：console, jetty

我正在创建一个简单的 Jetty 服务器，并且想知道如何将某些内容打印到控制台中，例如特定时间或用户连接时的变量。我正在使用带有 jetty-all jar 文件的 java 类编译 Jetty 服务器。我目前没有使用任何 xml。谁能告诉我如何在控制台中打印一些东西？例如，当用户连接时说“用户已连接”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:58:36.903

你最好应该输出到一个日志文件，你可以使用`log4j`它。采用

```
LOGGER.info("user connected"); 
```

在 linux 上你可以使用

```
tail -f logfile.log 
```

将内容实时输出到控制台

# plot - Octave：使用颜色混合创建两个直方图

> ID：14530944
> 
> 赞同：5
> 
> 时间：2013-01-25T21:52:25.000
> 
> 标签：plot, octave, histogram

我正在 Octave 中在另一个之上创建一个直方图。

```
 hold on;
    hist(normalData(:, column), 10, 1, "facecolor", "g");
    hist(anomalousData(:, column), 10, 1, "facecolor", "r");
    hold off; 
```

![在此处输入图像描述](../Images/56bf3c847ac424b9c189157956f0517c.png)

如您所见，存在重叠，红色数据掩盖了一些绿色数据。有没有解决的办法？也许通过在重叠部分混合颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T01:20:42.120

您的问题还有很长的路要走。不幸的是，透明度“facealpha”的绘图属性不适用于 hist() 函数。

下面的代码显示了我的工作。默认的图形工具包可能是fltk，所以改成gnuplot。

```
clear all

graphics_toolkit("gnuplot")

A = randn(1000,1);
B = randn(1000,1)+2; 
```

仍然使用 hist 来计算分布

```
[y1 x1] = hist(A,10);
[y2 x2] = hist(B,10); 
```

现在我们要将 hist 数据转换为允许透明度的绘图格式。

```
[ys1 xs1] = stairs(y1, x1);
[ys2 xs2] = stairs(y2, x2);

xs1 = [xs1(1); xs1; xs1(end)];  xs2 = [xs2(1); xs2; xs2(end)];
ys1 = [0; ys1; 0];  ys2 = [0; ys2; 0]; 
```

使用填充函数绘制数据

```
clf
hold on; 
h1=fill(xs1,ys1,"red");
h2=fill(xs2,ys2,"green"); 
```

将透明度更改为所需的级别。

```
set(h1,'facealpha',0.5);
set(h2,'facealpha',0.5);
hold off; 
```

如果我有更多的声誉，我会发布一张图片。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-14T22:01:20.507

我在网上找到了一个非常简单的方法来做到这一点（这不是我的，我真的不知道这是否允许），网页是这样的

[https://chi3x10.wordpress.com/2008/03/10/histograms-of-two-set-of-data-with-different-color-in-matlab/](https://chi3x10.wordpress.com/2008/03/10/histograms-of-two-set-of-data-with-different-color-in-matlab/)

代码是这样的

```
 hist(data1);
 hold on;
 hist(data2);
 hist(data3);
h = findobj(gca,’Type’,’patch’);
display(h)

set(h(1),’FaceColor’,’r’,’EdgeColor’,’k’);
set(h(2),’FaceColor’,’g’,’EdgeColor’,’k’);
set(h(2),’FaceColor’,’b’,’EdgeColor’,’k’); 
```

# authentication - IIS7 (Windows) 身份验证 - 无法找出新网站错误 401 的原因

> ID：14530948
> 
> 赞同：5
> 
> 时间：2013-01-25T21:52:54.267
> 
> 标签：authentication, iis

我正在尝试在 IIS 服务器上创建一个新网站，其中的网站使用 Windows 身份验证就可以了。但是，对于我的生活，我无法弄清楚为什么我的新网站拒绝访问（401.2）

基本上，我创建了一个新网站并添加了一个 .html 文件（“Hello, World”）。我可以访问它就好了。但是关闭匿名，离开 Windows 身份验证，提示我输入 ID/PWD，总是以 401.2 结尾

因此，我决定在同一网络服务器上创建一个新网站作为现有工作网站的副本。我什至已经让新网站共享相同的应用程序池和相同的物理路径。这样，据我所知，这两个网站之间唯一可能的区别是这两个网站的 IIS 配置。还是不能认证。

我已经换了绑定，没有帮助。

我什至比较了 applicationHost.config 中的设置，确保它们相等。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:59:01.423

我已经多次使用这篇文章来解决此类问题并取得了一些成功：http: [//blogs.msdn.com/b/david.wang/archive/2005/07/14/howto-diagnose-iis-401-access- denied.aspx](http://blogs.msdn.com/b/david.wang/archive/2005/07/14/howto-diagnose-iis-401-access-denied.aspx) 希望对您有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:03:50.607

有人建议我尝试`iisreset`从命令行运行。事实证明，这正是我一直需要的。似乎某些配置更改没有得到正确应用，即使重新启动特定网站，直到 IIS 本身重新启动。

# c# - Visual Studio Intellisense 注释从何而来？

> ID：14530949
> 
> 赞同：14
> 
> 时间：2013-01-25T21:52:59.213
> 
> 标签：c#, xml, visual-studio, intellisense

Visual Studio 项目可以选择创建**XML 文档文件**。我知道如果您想运行像 Sandcastle 或 NDoc 之类的程序来创建 MSDN 样式的 API 文档，那么 XML 文档文件会很有用。美好的。我不在乎那个。

根据此链接：http: [//msdn.microsoft.com/en-us/library/s0we08bk.aspx](http://msdn.microsoft.com/en-us/library/s0we08bk.aspx)

> 将 /doc 开关添加到 Visual Basic、C# 或 C++ 编译器命令行时，会生成一个 .xml 文件，用作 IntelliSense 文档的基础。

所以这让我觉得 Intellisense 注释**可以**从这些生成的 XML 文件中出现。

但是我创建了一个小测试应用程序，我在其中调用了一个完全不同的项目中的方法，并且 XML 注释出现在我的 Intellisense 中——而且我什至没有保存 MediaHelper 类！因此，在这种情况下，很明显没有 Intellisense 使用的 .xml 文件。

![来自未保存班级的评论](../Images/4fc7f2f2835cbd148fb09c742da24cd2.png)

鉴于这一切，Intellisense 从哪里得到它的垃圾？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T21:56:02.807

当源代码在现有解决方案（或者甚至更好，同一个项目）中时，Visual Studio 不需要查找 XML 文件 - 它知道文档注释在哪里，所以它会使用它们。（就像 Intellisense 知道你在另一个文件中声明的成员一样，即使你还没有真正重建。）

如果要在同一解决方案中添加对 DLL 的引用而不是项目引用，则需要创建 XML 文件。例如，我为 NodaTime.xml 提供了 Noda Time 包，这样即使您没有源代码，您仍然可以在 Intellisense 中看到注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T21:58:47.420

Intellisense 从它的 XML 注释中得到它。

例如，假设我有一堂课：

```
///<summary>
/// This is an example class
///</summary>
static class Foo
{
    //members
} 
```

事实上，你可以走得更深。例如，一个方法：

```
///<summary>
///Returns the object to string, uppercased.
///</summary>
///<param name="o">The object to be transformed.</param>
///<returns>The string.</returns>
public string someMethod(object o)
{
   return o.ToString().ToUpper();
} 
```

# linux - 从终端脚本访问 Linux 剪贴板

> ID：14530954
> 
> 赞同：2
> 
> 时间：2013-01-25T21:53:41.037
> 
> 标签：linux, clipboard

我正在使用在 Linux Mint 上运行的终端仿真器（确切地说是**MATE ），它在 Windows 托管的 VM 中运行。**我通过**ssh**连接到CentOS Linux 上的**bash** shell 。 *我没有使用 X-anything。*我可以使用鼠标在我的 MATE 模拟器和 Windows 之间进行复制和粘贴。

 ***我想要的是编写可以读取和写入 Mint 用于剪切和粘贴的缓冲区的脚本。曾几何时，在其他一些 *nix（也许是 Cygwin？）上，我似乎可以读写**/dev/clipboard**，但在 Mint 中没有这样的东西。Mac OSX 有**pbcopy**和**pbpaste**，使用 X-Windows 时显然有很多解决方案，但从我所有的谷歌搜索来看，这些似乎都不能解决我的“终端”环境。

我希望能够使用我的鼠标从我的 MATE 终端（或 Windows 窗口，它自动将其剪贴板与 Mint 的剪贴板同步）中抓取文本，然后运行一个 Perl 脚本以某种方式过滤该文本。或者相反，让 Mint 上的脚本填充剪贴板，让我可以粘贴到其他地方。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:20:11.573

鼠标选择就是`PRIMARY` [**选择**](http://tronche.com/gui/x/icccm/sec-2.html#s-2)。复制选择就是`CLIPBOARD`选择。两者都可以使用`xclip`.***

# c - printf 输出在 scanf 之后被“\n”破坏

> ID：14530956
> 
> 赞同：0
> 
> 时间：2013-01-25T21:53:58.967
> 
> 标签：c, printf, scanf

在我运行 scanf 之后，printf 的输出被 "\n" 破坏了。我正在尝试使用。

```
scanf ("%*c"); 
```

chomp "\n" 但它不起作用......这是代码

```
 printf("Enter char float int char:", char4, deci2, num2, char5);
    scanf ("%c %f %d %c", &char4, &deci2, &num2, &char5);
    scanf ("%*c");
    printf("You entered: '%c' %.3f %d '%c' " ,char4 ,deci2, num2, char5 ); 
```

它输出到

```
 Enter char int char float:a 5 a 5.5
    You entered: 'a' 5 'a' 5.500 
    Enter char float int char:a 5.5 6 b
    You entered: '
    ' 0.000 0 '' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:55:46.477

在这一行：

```
printf("Enter char float int char:", char4, deci2, num2, char5); 
```

删除`char4`, `deci2`,`num2`和`char5`. 如果您仍然看到 Carl Norum 建议的问题，请尝试使用第一个 scanf 留下的换行符，如下所示：

```
scanf ("%c %f %d %c", &char4, &deci2, &num2, &char5);
getchar();
printf("You entered: '%c' %.3f %d '%c' " ,char4 ,deci2, num2, char5 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T22:07:23.770

线

```
scanf ("%c %f %d %c", &char4, &deci2, &num2, &char5); 
```

`scanf`正在从您之前的调用中拾取输入缓冲区中留下的杂散换行符。您可以通过在第一个前面放置一个空格来解决此问题`%c`：

```
scanf (" %c %f %d %c", &char4, &deci2, &num2, &char5); 
```

这将告诉`scanf`在读取下一个非空白字符之前跳过任何前导空白（空格、换行符、制表符等）。

线

```
printf("Enter char float int char:", char4, deci2, num2, char5); 
```

有点让人头疼；它不会引起任何问题（多余的参数被评估，但在其他方面被忽略），但它看起来是错误的，并表明一些混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T21:58:14.927

*它是您第一次*`\n`读取时缓冲区中的剩余部分仍然存在。你需要在做第二个*之前*吃那个，而不是之后。 **`scanf`**

 **编辑说明：您应该在问题中真正包含所有相关代码，而不仅仅是一个子集。我只能从您提供的输出中推断出这是您的问题。`Enter char int char float`它包含示例代码中不存在的字符串。**

# assembly - 汇编语言程序根据用户的输入在金字塔中显示字母表中的字母

> ID：14530962
> 
> 赞同：0
> 
> 时间：2013-01-25T21:54:10.290
> 
> 标签：assembly, x86, dos

我正在编写一个汇编程序，根据用户的输入在金字塔中显示字母表中的字母。例如，如果用户输入字母 a，则输出将是：a ab abc。. . abcdef...z

如果用户输入字母 b，这将是输出：

b bc bcd bcde 。. . bcdefg...z

等等...

下面是我的代码，我真的有关于迭代、循环、嵌套循环等的问题。我一直在尝试但无济于事。我是汇编语言的新手，所以我的代码真的很烂。

```
title print_alphabets

ststack segment para stack 'stack'
        dw 200h
ststack ends

cdata segment para 'data'
        inputMessage db 'Enter a letter to start from: $'
        invalidInput db 10, 13, 'You have entered an invalid character. Please run the program again.$'
        newline db 10, 13, '$'
cdata ends

ccode segment para 'code'
        assume cs: ccode, ss: ststack, ds: cdata

    main:   
        mov ax, cdata
            mov ds, ax

        mov ah, 09h
            lea dx, inputMessage
            int 21h

            mov ah, 01h
            int 21h

        mov bl, al

        mov ch, 26

        mov cl, 26

    testinput:
        cmp bl, 7ah
        jbe loop1

        jmp invalid

    loop1:
        mov ah, 09h
            lea dx, newline
            int 21h 

        mov ah, 02h
            mov dl, bl
            int 21h

        dec ch

        cmp ch, 25
        je loop1

        cmp ch, 24
        jle loop2

        jmp endprog

        loop2:
            inc dl

            mov ah, 02h
                mov dl, dl
                int 21h

            dec cl

            cmp cl, 25
            je loop1
                ;repeat loop2 once
                cmp cl, 24
                je loop2

            cmp cl, 23
            je loop1
                ;repeat loop2 twice
                cmp cl, 22
                je loop2

                cmp cl, 21
                je loop2

            cmp cl, 20
            je loop1
                ;repeat loop2 thrice
                cmp cl, 19
                je loop2

                cmp cl, 18
                je loop2

                cmp cl, 17
                je loop2

            cmp cl, 16
            je loop1
                ;repeat loop2 4 times
                cmp cl, 15
                je loop2

                cmp cl, 14
                je loop2

                cmp cl, 13
                je loop2

                cmp cl, 12
                je loop2

            cmp cl, 11
            je loop1
                ;repeat loop2 5 times
                cmp cl, 10
                je loop2

                cmp cl, 9
                je loop2

                cmp cl, 8
                je loop2

                cmp cl, 7
                je loop2

                cmp cl, 6
                je loop2

            jmp endprog

    invalid:
        mov ah, 09h
        lea dx, invalidInput
        int 21h

        jmp endprog

    endprog:
        mov ah, 4ch
        int 21h
ccode ends
end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:36:16.517

编写汇编程序的最简单方法是编写一些伪代码（或其他语言），然后将其转换为汇编程序。

```
c = input value
for i = c to 'a' + 26
  for k = c to i
    output k
  next k
  output space
next i 
```

你只需要两个增量和跳跃。

# java - Woodstox StAX - 如何关闭文本内容验证？

> ID：14530963
> 
> 赞同：0
> 
> 时间：2013-01-25T21:54:13.873
> 
> 标签：java, xml, validation, stax, woodstox

我正在使用默认的 Woodstox EventReader 读取 XML 文件，例如：

```
XMLInputFactory.newInstance().createXMLEventReader(new FileInputStream(fileName)); 
```

如果输入文件碰巧在某些文本内容中有 Unicode NULL 字符，则会发生以下异常/堆栈跟踪：

```
WstxUnexpectedCharException.<init>(String, Location, char) line: 17 
ValidatingStreamReader(StreamScanner).constructNullCharException() line: 604    
ValidatingStreamReader(StreamScanner).throwInvalidSpace(int, boolean) line: 633 
ValidatingStreamReader(BasicStreamReader).readTextSecondary(int, boolean) line: 4624    
ValidatingStreamReader(BasicStreamReader).finishToken(boolean) line: 3661   
ValidatingStreamReader(BasicStreamReader).next() line: 1063 
WstxEventReader(Stax2EventReaderImpl).nextEvent() line: 255 
```

我想避免验证文本内容。在 XMLInputFactory 上设置 IS_VALIDATING 并不能解决问题。

检查源代码后，看起来 BasicStreamReader 的 next() 引用“mValidateText”变量来确定是否验证。

从来源：

```
/**
 * Flag that indicates that textual content (CDATA, CHARACTERS) is to
 * be validated within current element's scope. Enabled if one of
 * validators returns {@link XMLValidator#CONTENT_ALLOW_VALIDATABLE_TEXT},
 * and will prevent lazy parsing of text.
 */
protected boolean mValidateText = false; 
```

我似乎无法弄清楚如何在 InputFactory 或 EventReader 中更改/设置此值？也许我需要指示 InputFactory 不使用 ValidatingStreamReader，而是使用 TypedStreamReader？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T09:12:19.837

需要符合标准的 XML 解析器来拒绝格式错误的内容。您需要修复您的（非）XML，并让解析器完成其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T03:54:07.133

这不是验证，而是基本的良构问题。验证与 DTD、RelaxNG 或 XML Schema 等模式一起使用，它们可以定义文本内容的特定结构或值。因此，与验证相关的设置将不会产生任何影响，因为如果内容是格式良好的 XML，则会进行处理。

您需要做的是预处理内容以删除或替换 XML 中的少量非法字符。这包括 0 个字节。

# javascript - jQuery：包含排除

> ID：14530965
> 
> 赞同：1
> 
> 时间：2013-01-25T21:54:26.963
> 
> 标签：javascript, jquery, contains

如果它包含“Thing”（Thing 1，Thing 2），我希望发生这种情况，但如果它显示“Things”则不会

```
$("nav#breadcrumbs:contains('Thing')").append("<p>I'm a Thing</p>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:55:50.080

结合不同的格式选项，但关键是您要结合使用`not`选择器`:contains`：

```
$("nav#breadcrumbs:contains('Thing'):not(:contains('Things'))").append("<p>I'm a Thing</p>");

$("nav#breadcrumbs:contains('Thing')").not(":contains('Things')").append("<p>I'm a Thing</p>"); 
```

# android - 正确使用 androids 回栈

> ID：14530968
> 
> 赞同：2
> 
> 时间：2013-01-25T21:54:34.703
> 
> 标签：android, android-fragments

我在一个活动中有几个片段。

我正在尝试使我的应用程序与小屏幕和大屏幕兼容。

我创建了一个以 LinearLayout 作为根的主布局。此 LinearLayout 包含两个 FrameLayout。一个 FrameLayout 用于存储将存储列表或任何其他侧面细节的片段。我只希望在按下特定按钮时显示它。

另一个 FrameLayout 用于显示应用程序的主要部分（地图），它位于其自己的片段中。

首先，我使用以下方法添加我的主地图片段：

```
FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();

ft.add(R.id.viewer, viewModeFragment);
ft.commit(); 
```

当我希望侧面板出现一个列表片段时，我会这样称呼：

```
 FrameLayout fl = (FrameLayout)findViewById(R.id.list);
            fl.setVisibility(View.VISIBLE);

            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.add(R.id.list, editOsmInfoFragment);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            ft.addToBackStack(null);
            ft.show(editOsmInfoFragment);
            ft.commit(); 
```

这是我的主要活动布局的 XML 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myFragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/list"
        android:name="com.srose.cyclopathed.view.LoadRoutesFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:visibility="gone"/>

    <FrameLayout
        android:id="@+id/viewer"
        android:name="com.srose.cyclopathed.view.ViewModeFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2" />    
</LinearLayout> 
```

这似乎可以正常工作，但主要问题是，如果我在平板电脑上使用该应用程序并且侧边栏显示其中包含一个列表片段，如果按下后退按钮，该片段会按预期消失，但空白列表 FrameLayout保留在屏幕上，因为它不是交易的一部分。

我想我没有正确使用它，但我不知道如何实现它，以便按下后退按钮左侧的整个侧栏整个幻灯片。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:02:46.857

不要在 R.id.list 上明确设置可见性。

In your layout XML, remove the android:visiblility attribute on R.id.list FrameLayout to make it visible. Since this FrameLayout is initially empty, it will not show up on screen. When the side panel is added to it programmatically via the FragmentTransaction, you will see it, and when it is removed (via the back button), it will go away. You must call `FrameLayout# setConsiderGoneChildrenWhenMeasuring()` in order for the layout to collapse when the Fragment is removed.

# asp.net-mvc - 剑道网格显示 json 数据而不是实际网格

> ID：14530969
> 
> 赞同：1
> 
> 时间：2013-01-25T21:54:51.957
> 
> 标签：asp.net-mvc, json, kendo-ui, kendo-grid

我正在尝试在 Kendo 弹出窗口中启动 Kendo 网格，但不是显示网格，而是获取 json 数据。

![在此处输入图像描述](../Images/ddf8faf35f058af03c5d6b717c923e2e.png)

这是来自我的控制器的代码：

```
[HttpGet]
    public ActionResult Read([DataSourceRequest]DataSourceRequest request, int id)
    {
        var model = Service.FindOne("Cashflows", x => x.Id == id);
        var cashflows = new List<flows>();

        foreach (var cf in model.CashFlows)
        {
            var flow = new flows
            {
                Id = cf.Id,
                AssetId = cf.Id,
                MortgageValue = cf.MortgageValue,
                Year = cf.Year
            };
            cashflows.Add(flow);
        }

        var result = cashflows.ToDataSourceResult(request);

        return Json(result, JsonRequestBehavior.AllowGet);
    } 
```

这就是我在我的剑道视图中所拥有的。

```
@(Html.Kendo().Grid<ViewModels.Finance.flows>()
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.Id);
    columns.Bound(p => p.AssetId);
    columns.Bound(p => p.Year);
    columns.Bound(p => p.MortgageValue);
})
.DataSource(dataSource => dataSource
    .Ajax()
    .Read(read => read.Action("Read", "Finance"))
    .ServerOperation(false)
    .PageSize(5)
)
.Pageable()
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:21:08.803

您需要将返回命令更新为：

```
return Json(result.ToDataSourceResult(request), JsonRequestBehavior.AllowGet); 
```

# c#-4.0 - 作为全景项目的页面

> ID：14530980
> 
> 赞同：1
> 
> 时间：2013-01-25T21:56:19.153
> 
> 标签：c#-4.0, windows-phone-8

我有一个 Windows Phone 页面，比如说 Details.xaml。我想将其用作单个视图页面，并在不同的全景页面中重用该页面。

如何将该页面添加为 PanoramaItem？

您能否提供一些关于在 Windows Phone 8 中实现全景页面的良好实践的资源？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:18:38.800

您可以构建一个包含您希望呈现的视觉结构的[用户控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=vs.95%29.aspx)，您可以查看全景页面上的微软[指南。](http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202912%28v=vs.105%29.aspx)

# vba - 在 Excel 中使用 VBA，如何循环遍历行并设置单元格值？

> ID：14530985
> 
> 赞同：0
> 
> 时间：2013-01-25T21:56:40.677
> 
> 标签：vba, excel

我正在尝试自学一些 VBA。我有一个包含 2 个工作表 Sheet1 和 Sheet2 的工作簿。我在下面找到了这段代码并对其进行了修改以适合我。获取 Sheet1!B1 的值，在 Sheet2!K:K 中查找它，并将 Sheet1!D1 设置为 Sheet2 的 E (K - 6) 列中的单元格的值。

我怎样才能循环这个，让它查看 B1:B100 并设置 D1:D100？

```
Sub Looping()
    Dim rng1 As Range
    Dim strSearch As String
    strSearch = Range("B1").Value
    Set rng1 = Worksheets("Sheet2").Range("K:K").Find(strSearch, , xlValues, xlWhole)
    If Not rng1 Is Nothing Then
        Range("D1").Value = rng1.Offset(0, -6)
    Else
        MsgBox strSearch & " not found"
    End If
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:11:02.443

首先，您不需要针对该问题的 VBA 解决方案。只需将此公式放入 Sheet1!D1:D100 中：

```
=IFERROR(INDEX(Sheet2!$E:E$,MATCH(B1,Sheet2!$K:$K,0))),"未找到")

```

如果您想使用 VBA 执行此操作，这是您的循环代码：

```
子循环（）
    将目标调暗为范围
    Dim rngSearched as Range

    对于 Sheets("Sheet1").Range("D1:D100") 中的每个 rngTarget
        设置 rngSearched = Sheets("Sheet2").Range("K:K").Find(_
            rngTarget.Offset(, -2).Value, , xlValues, xlWhole)    
        如果 rngSearch 什么都不是，那么
            rngTarget.Value = "未找到"
        别的
            rngTarget.Value = rngSearch.Offset(, -6)
        万一
    下一个 rngTarget
结束子

```

或者，结合两种方法：

```
子填充直接
    使用 Sheets("Sheet1").Range("D1:D100")
        .Formula="=IFERROR(INDEX(Sheet2!$E:E$,MATCH(B1,Sheet2!$K:$K,0))),""未找到"")"
        。计算
        .Value = .Value '创建一个值副本
    结束于
结束子

```

# .net-assembly - 无法加载文件或程序集“Microsoft.VisualStudio.Shell，版本=2.0.0.0

> ID：14530986
> 
> 赞同：4
> 
> 时间：2013-01-25T21:56:44.153
> 
> 标签：.net-assembly

我最近将一个网站从 VS2008 更新到 VS2010。使用 Web 部署工具发布，但出现以下错误

> “/”应用程序中的服务器错误。解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。解析器错误消息：Reference.svcmap：无法加载文件或程序集“Microsoft.VisualStudio.Shell，版本=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。源错误：[无相关源行] 源文件：/App_WebReferences/websConsultarCOVE/ 行：1 程序集加载跟踪：以下信息有助于确定程序集 'Microsoft.VisualStudio.Shell，Version=2.0.0.0，Culture=中性，PublicKeyToken=b03f5f7f11d50a3a' 无法加载。警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18010

* * *

该错误与第三方 Web 服务有关

操作系统：Windows Server 2012

非常感谢您提前

# jquery - 如何在单击时运行此脚本

> ID：14530988
> 
> 赞同：1
> 
> 时间：2013-01-25T21:56:48.347
> 
> 标签：jquery, onclick, forms

很抱歉用这么简单的问题打扰你，但我到处找，似乎无法找出正确的语法来做我想做的事。

基本上我有一个带有大量复选框的表单，并希望允许用户同时检查它们（或取消选中它们）

我遇到了这个很棒的剧本

```
 $(function () {
    $('.checkall').click(function () {
        $(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);
    });
}); 
```

但是当我尝试将输入按钮的 onclick 事件设置为运行脚本时，什么也没有发生。

```
<input type="button" class="blkbuttonsmall" value="Toggle All/None" onclick="**what-do-i-use-here-to-run?**"> 
```

任何帮助将非常感激！

***编辑***

所以我昨晚尝试了两个答案，但没有成功。我不确定我是否仍然做错了什么，如果我这边有通信错误。所以这是我尝试过的不同的事情，但没有成功，以及有关如何设置页面的更多信息。

复选框和输入按钮都有自己的类，我用它们来设置它们的外观。在考虑运行此脚本之前，它们已被编码。

全选按钮

```
<input type="button" class="blkbuttonsmall" value="Toggle All/None"> 
```

复选框

```
<input type="checkbox" name="X" id="X" class="formcheck"> 
```

所以现在接受昨晚提供的建议（再次感谢大家的快速回复）我尝试将“全选按钮”的类更改为“blkbuttonsmall checkall”和“checkall”。当这不起作用时，我尝试将“checkall”类应用于某些复选框，删除“formcheck”类并添加“checkall”类。依然没有。这使我相信我一定没有正确实施事情，或者第一次没有在我的问题中正确解释。

**在我尝试任何建议的编辑之前**，这是我的代码的一些 HTML 片段。

表单的左侧 div：

```
<div class="formleft">
<br />          
    <form action="">
        <span class="formtext">Check all that apply</span>
<br />
<br />
    <script>
    $(function () {
    $('.checkall').click(function () {
    $(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);
    });
    });
    </script>
        <fieldset>
        <input type="checkbox" name="logincheck" id="logincheck" class="formcheck"> login
        <br />
        <input type="checkbox" name="assignbreakbusylogoutcheck"  id="assignbreakbusylogoutcheck" class="formcheck"> assignment, break, busy, logout
        <br />
        <input type="checkbox" name="acceptprocesscallscheck" id="acceptprocesscallscheck" class="formcheck"> accept/process tasks, calls
        <br />
</div> 
```

...表单的右 div

```
<div class="formright">
<br />
<!-- when button is clicked we need to toggle all checks on or off -->
        <input type="button" class="blkbuttonsmall" value="Toggle All/None">
<br />
        <input type="checkbox" name="userprofilecheck" id="userprofilecheck" class="formcheck"> user profile
<br />
        <input type="checkbox" name="searchcheck" id="searchcheck" class="formcheck"> search
<br />
        <input type="checkbox" name="addcheck" id="addcheck" class="formcheck"> add
<br />
        <input type="checkbox" name="editcheck" id="editcheck" class="formcheck"> edit
        </fieldset>
     </form>
</div> 
```

并且只是为了确保我不是一个搞砸 jquery 声明的庞塞，这里是文件的标题：

```
<head>
    <meta charset="utf-8">
    <title>web portal configurations</title>

       <link rel="icon" href="images/favicon.ico" type="image/x-ico">
       <link rel="stylesheet" type="text/css" href="css/style.css">
       <script type="text/javascript" src="js/jquery.js"></script>
       <meta name="viewport" content="width=device-width, initial-scale=.5, maximum-scale=1">
</head> 
```

jquery 文件是 jquery 网站上提供的最新缩小版本，刚刚在本地上传到我的服务器。

我在这里错过了什么或做错了什么？我了解先前响应的概念，因此问题必须是我错过的东西或实施。再次感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:59:37.180

你不需要在那里放任何东西，你只需要将类添加`'checkall'`到你的输入中。因此，你应该有类似的东西：

```
<input type="button" class="blkbuttonsmall checkall" value="Toggle All/None"> 
```

这样做的原因是 jQuery 选择器`'.checkall'`查找`$('.checkall')`所有具有 class 的元素`'checkall'`，然后将您指定的函数附加到它。

# php - fgetcsv() 不尊重 $enclosure

> ID：14530989
> 
> 赞同：1
> 
> 时间：2013-01-25T21:56:51.117
> 
> 标签：php, digest-authentication

我正在编写一个通过 Sockets 与 SMTP 服务器通信的脚本，并且我正在尝试实现 DIGEST-MD5 身份验证，但是我无法解析在 AUTH 命令之后返回的字符串。

之后`base64_decode()`它看起来像：

```
realm="smtp.domain.net",nonce="AJRUc5Jx0UQbv5SJ9FoyUnaZpqZIHDhLTU+Awn/K0Uw=",qop="auth,auth-int",charset=utf-8,algorithm=md5-sess 
```

我想使用`str_getcsv()`，但服务器仍然在 PHP 5.2 上，所以我[从 PHP.net 上的评论中](http://ca1.php.net/manual/en/function.str-getcsv.php#100579)得到了以下代码，看起来还不错：

```
<?php
if (!function_exists('str_getcsv')) {
        function str_getcsv($input, $delimiter=',', $enclosure='"', $escape=null, $eol=null) {
                $temp=fopen("php://memory", "rw");
                fwrite($temp, $input);
                fseek($temp, 0);
                $r = array();
                while (($data = fgetcsv($temp, 4096, $delimiter, $enclosure)) !== false) {
                        $r[] = $data;
                }
                fclose($temp);
                return $r;
        }
} 
```

但它返回以下内容：

```
array (
  0 =>
  array (
    0 => 'realm="smtp.domain.net"',
    1 => 'nonce="2PuESkmrNzGu/5b8N6eIYQoW7mSlScnYAB/PSYebkYo="',
    2 => 'qop="auth',
    3 => 'auth-int"',
    4 => 'charset=utf-8',
    5 => 'algorithm=md5-sess',
  ),
) 
```

请注意，索引 2 和 3 应该是单个`qop="auth,auth-int"`.

在写这篇文章时，我意识到可能`fgetcsv()`期望`$enclosure`字符包含整个字段而不仅仅是其中的一部分，但在这种情况下，我必须知道如何正确解析这个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:28:07.347

在我对“PHP DIGEST-MD5”的谷歌搜索中，我遇到[了另一个项目的补丁，该补丁](http://code.google.com/p/xmpphp/issues/attachmentText?id=67&aid=-6363096690198652740&name=DIGEST-MD5.patch&token=04401ad58d386a7c8ef5caac64da7dba)处理与以下行相同的格式字符串：

```
preg_match_all('/(\w+)=(?:"([^"]*)|([^,]*))/', $challenge, $matches); 
```

这给了我：

```
array (
  0 =>
  array (
    0 => 'realm="smtp.domain.net',
    1 => 'nonce="AJRUc5Jx0UQbv5SJ9FoyUnaZpqZIHDhLTU+Awn/K0Uw=',
    2 => 'qop="auth,auth-int',
    3 => 'charset=utf-8',
    4 => 'algorithm=md5-sess',
  ),
  1 =>
  array (
    0 => 'realm',
    1 => 'nonce',
    2 => 'qop',
    3 => 'charset',
    4 => 'algorithm',
  ),
  2 =>
  array (
    0 => 'smtp.domain.net',
    1 => 'AJRUc5Jx0UQbv5SJ9FoyUnaZpqZIHDhLTU+Awn/K0Uw=',
    2 => 'auth,auth-int',
    3 => '',
    4 => '',
  ),
  3 =>
  array (
    0 => '',
    1 => '',
    2 => '',
    3 => 'utf-8',
    4 => 'md5-sess',
  ),
) 
```

然后我可以用这个循环填充一个有用的数组：

```
$authvars = array();
foreach( $auth_matches[1] as $key => $val ) {
    if( !empty($auth_matches[2][$key]) ) {
        $authvars[$val] = $auth_matches[2][$key];
    } else {
        $authvars[$val] = $auth_matches[3][$key];
    }
} 
```

这给了我：

```
array (
  'realm' => 'ns103.zabco.net',
  'nonce' => 'xITX1qgqlCDmYX6IrctN0WZRx7+Q4W7jjaXCCeUZnU8=',
  'qop' => 'auth,auth-int',
  'charset' => 'utf-8',
  'algorithm' => 'md5-sess',
) 
```

它并不完全漂亮，但它完成了工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:54:34.927

```
$decodedString = 'realm="smtp.domain.net",nonce="AJRUc5Jx0UQbv5SJ9FoyUnaZpqZIHDhLTU+Awn/K0Uw=",qop="auth,auth-int",charset=utf-8,algorithm=md5-sess';

parse_str(preg_replace('/(?:(")(.*?)("))?,(?:(")(.*?)("))?/','$1$2$3&$4$5$6',$decodedString), $values);
var_dump($values); 
```

如果您还想去掉结果数组值周围的引号，请使用

```
$values = array_map(
    function ($value) {
        return trim($value,'"');
    },
    $values
);
var_dump($values); 
```

# jquery - 销毁jQuery插件时如何删除事件？

> ID：14530990
> 
> 赞同：3
> 
> 时间：2013-01-25T21:57:01.013
> 
> 标签：jquery, jquery-plugins

我需要一些关于如何在插件被破坏时清理它的设计建议。

我在窗口上监听`blur`事件，但不确定如何在插件被销毁时删除这些事件。如果插件应用于多个元素，但只为一个元素销毁，它应该仍然适用于其他元素。设计这个的正确方法是什么？

```
(function( $ ) {

    var methods = 
    {
        init : function( options ) {
            var that = this;

            $(window).blur( function( e ) {
                that.css( "color", "red" );
                console.log( "still here" );
            });
        },

        destroy : function( ) {
            console.log( "hmmm, got to take out that blur" );
        }
    };

    $.fn.pleaseKillMe = function( method )
    {
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        }
        else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        }
        else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.p5shrinkwrap' );
        }
    };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T22:00:38.707

您的问题说明了为什么使用`.on()`and`.off()`比`.blur()`在绑定事件处理函数时使用更好。AFAIK，*当*您使用`.blur()`.

这是您可以使用的：

```
$(window).on('blur.handlerID', function() {
    //do something event handling
});

$(window).off('blur.handlerID'); 
```

Where`handlerID`是唯一标识您的事件处理程序的文字字符串。

[jQuery .off() 文档](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T22:01:43.427

我开发的框架中有类似的东西。除了我正在删除部分屏幕保护程序的事件处理。任何人，回到正题。你应该为你的事件命名（这就是我所做的），如下所示：

```
$(window).bind("blur.SomeIdentifier", function () {//pre 1.7
$(window).on("blur.SomeIdentifier", function () {//1.7+
 //....
}); 
```

现在稍后，您可以在销毁时删除该确切事件：

```
$(window).unbind("blur.SomeIdentifier");//pre 1.7
$(window).off("blur.SomeIdentifier");//1.7+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:02:51.197

使用`$(window).off('click.yourAppName', method);`. 要使 off 方法生效，您必须为侦听器分配 on 方法。其中的 .yourAppName 有一个命名空间，并且在对 on 的调用中需要相同。这是为了防止您的插件事件干扰同一应用程序中的其他事件。

# iis - cookie 信息在 IIS 日志中记录为省略号？

> ID：14530992
> 
> 赞同：1
> 
> 时间：2013-01-25T21:57:22.713
> 
> 标签：iis, logging, cookies, web

在为我们的网站分析 IIS 日志时，我们正在处理一些奇怪的问题。问题是当 cookie 信息被记录为省略号时，我在日志文件中看到许多条目，请参阅下面的示例条目：

```
#Software: Microsoft Internet Information Services 6.0 
```

# 版本：1.0

# 日期：2013-01-25 08:00:00

# 字段：日期时间 s-sitename s-computername cs-method cs-uri-stem c-uri-query cs-username c-ip cs-version cs(User-Agent) cs(Cookie) cs(Referer) cs-host sc -status sc-substatus sc-bytes cs-bytes time-taken

```
2013-01-25 08:01:11 W3SVC1443552327 IRC-P2WEB-031 GET /pm/free-data-report-faq/Default.aspx SiteVersionID=988&SiteID=100219&Status=A&sc=674104&bcd=SiteVersionID=988&SiteID=100219&Status=A&sc=674104&bcd= - 24.7.1.77 HTTP/1.1 Mozilla/5.0+(iPhone;+CPU+iPhone+OS+6_0+like+Mac+OS+X)+AppleWebKit/536.26+(KHTML,+like+Gecko)+Version/6.0+Mobile/10A405+Safari/8536.25 **...** https://member.some-site.com/PM/reports/credit/articles/about-data-reports www.some-site.com 200 0 14841 6748 62 
```

如您所见，cookie 信息显示为省略号。有没有办法找出为什么会发生这种情况并防止这种情况发生？我们依靠 cookie 分析来获取会话 ID 以及我们的网络分析的其他重要数据，丢失这些关键数据对我们来说是真正的问题。

提前谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:24:03.890

[http://support.microsoft.com/kb/2809913](http://support.microsoft.com/kb/2809913)

如果 cookie 信息超过 4096 字节，IIS 将忽略它。Microsoft 建议，如果您不喜欢这种行为，您应该编写自己的请求记录器或缩短 cookie。

# php - PHP 代码不起作用。简单的代码，但我被卡住了

> ID：14530994
> 
> 赞同：-8
> 
> 时间：2013-01-25T21:57:53.500
> 
> 标签：php, indexing, undefined

我的 PHP 代码出错了。我的想法是检查数据库中是否存在用户名和密码，然后将其重定向到 URL。

在此处输入代码我创建了两个页面。一个是索引，另一个是重定向。重定向代码出现问题。

```
<!DOCTYPE html>
<html>
<body>
<?php
//echo $_POST['uname'];
//echo $_REQUEST['uname'];
$uname=$_POST['uname'];
$pwd=$_POST['pwd'];
//echo $_POST['pwd'];
//echo $_REQUEST['pwd'];
//echo $uname;
//echo $pwd;
$con = mysql_connect("localhost","root","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

  $db_found=mysql_select_db("sn", $con);  

 //$result = mysql_query("SELECT fname,password FROM udata");

if ($db_found) 
{
$result = mysql_query("SELECT fname,password FROM udata");
while ( $db_field = mysql_fetch_assoc($result) ) 
{
if ($db_field['uname']==$uname && $db_field['password']==$pwd)
header( 'Location: www.youtube.com' ) ;

/*print $db_field['fname'] . "<BR>";
print $db_field['lname'] . "<BR>";
print $db_field['uname'] . "<BR>";
print $db_field['password'] . "<BR>";
*/
}

mysql_close($con);

}
else 
{

print "Database NOT Found ";
mysql_close($db_handle);

}
?>

</body>
</html> 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:02:17.033

我认为你必须改变这一点：

```
if ($db_field['uname']==$uname && $db_field['password']==$pwd) 
```

对此：

```
if ($db_field['fname']==$uname && $db_field['password']==$pwd) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:02:37.960

您的代码充满了错误。正确缩进它应该会显示一些缺少的开/关大括号：您应该能够自己找到它们！

* * *

此外，您直接开始输出 HTML 页面。但是，稍后你使用

```
header( 'Location: www.youtube.com' ) ; 
```

如果用户名和密码正确，则将浏览器重定向到另一个页面。已经开始输出 HTML 页面后，您无法发送 HTTP 标头（没有一些高级技巧*）*

* * *

重定向后，您需要使用`exit()`.

* * *

假设您的`udata`表中有多个用户，您需要在查询中添加搜索条件。有很多可能，这是一种：

```
$result = mysql_query("SELECT password FROM udata WHERE fname='$uname'"); 
```

现在您可以检查这是否返回了一条记录（如果不是，则用户不存在）以及密码是否正确。

注意：直接使用这些`$_POST[]`值会使您的应用程序容易受到 SQL 注入攻击（以及其他攻击）。您需要清理这些输入。

附加说明/专业提示：直接将密码存储在数据库中是一件坏事（tm）。而是使用哈希和盐（使用您[最喜欢的搜索引擎查找](https://stackoverflow.com/search?q=database+password+hash+salt)）

* * *

正如[njk](https://stackoverflow.com/users/679449/njk)已经评论的那样，您不应再使用折旧的`mysql_*`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T22:05:33.097

你错过了几个，`{`你应该`exit();`在你之后添加`header('Location: www.youtube.com');`

```
<?php
    $uname=$_POST['uname'];
    $pwd=$_POST['pwd'];
    $con = mysql_connect("localhost","root","root");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }

    $db_found=mysql_select_db("sn", $con);  

    if ($db_found) {
        $result = mysql_query("SELECT fname,password FROM udata");
        while ( $db_field = mysql_fetch_assoc($result) ) {
            if ($db_field['fname']==$uname && $db_field['password']==$pwd) {
               header('Location: www.youtube.com');
               exit();
            }
        }

        mysql_close($con);

    } else {
        print "Database NOT Found ";
        mysql_close($db_handle);
    }
?> 
```

# bash - AWK 中的类似 Countif 的函数

> ID：14530996
> 
> 赞同：0
> 
> 时间：2013-01-25T21:58:02.113
> 
> 标签：bash, awk

我正在寻找一种方法来计算字段中的值出现在 csv 文件中的一系列字段中的次数，这与 excel 中的 countif 非常相似，尽管我想尽可能使用 awk 命令。

所以第 1 列应该有值的范围，第 2 列会有值出现在第 1 列中的次数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:11:39.893

计算每个值在第一列中出现的次数，并将计数附加到每行的末尾：

```
$ cat file
1,2,3
1,2,3
9,7,4
1,5,7
3,2,1

$ awk -F, '{c[$1]++;l[NR]=$0}END{for(i=0;i++<NR;){split(l[i],s,",");print l[i]","c[s[1]]}}' file
1,2,3,3
1,2,3,3
9,7,4,1
1,5,7,3
3,2,1,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-20T12:08:19.507

另一种使用 Perl 的解决方案。

```
perl -F, -lane ' $kv{$F[0]}++;$kl{$.}=$_;END {for(sort keys %kl) { $x=(split(",",$kl{$_}))[0]; print "$kl{$_},$kv{$x}" }} ' 
```

借用克里斯的意见

```
$ cat kbiles.txt
1,2,3
1,2,3
9,7,4
1,5,7
3,2,1

$ perl -F, -lane ' $kv{$F[0]}++;$kl{$.}=$_;END {for(sort keys %kl) { $x=(split(",",$kl{$_}))[0]; print "$kl{$_},$kv{$x}" }} ' kbiles.txt
1,2,3,3
1,2,3,3
9,7,4,1
1,5,7,3
3,2,1,1

$ 
```

# ios - 单击 UITableViewCell 时将无法识别的选择器发送到实例

> ID：14530997
> 
> 赞同：1
> 
> 时间：2013-01-25T21:58:07.733
> 
> 标签：ios, uitableview

环顾四周，我可以看到这种类型的错误在解决方案方面因人而异。

基本上我在 ViewController 中有一个 UITableViewController，在 tableView 里面是从我们的在线数据库中提取的朋友列表。我的目标是实现从左到右的滑动效果手势，我找到了许多示例代码并最终使用[LRSlidingTableViewCell](https://github.com/lukeredpath/LRSlidingTableViewCell)，起初我们尝试将文件带入并适当地调用它们，我认为你会调用它的作弊代码方式。它抛出了一个与我现在得到的相同的异常。接受我尝试了一种新方法，因为需要在 2 个不同的视图（序列）上调用此滑动效果，并决定将它们包含在我可以全局调用的 MyClass 中，我知道我们用于调用全局变量的编码是可靠的，我们让它工作，它在我们拥有的每个页面视图上向我们输出当前用户登录。所以现在我描述了我的情况。以及我试图完成的...

这是我的错误代码，

```
2013-01-25 13:29:40.397 myappbeta[5496:907] -[UITableViewCell openDrawer]: unrecognized selector sent to instance 0x1ddaacb0
2013-01-25 13:29:40.399 myappbeta[5496:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCell openDrawer]: unrecognized selector sent to instance 0x1ddaacb0'
*** First throw call stack:
(0x39deb2a3 0x33cda97f 0x39deee07 0x39ded531 0x39d44f68 0x123b5 0x32fdf26d 0x33061ea1 0x34be6a6f 0x39dc05df 0x39dc0291 0x39dbef01 0x39d31ebd 0x39d31d49 0x380ff2eb 0x32f712f9 0xd129 0x3759db20)
libc++abi.dylib: terminate called throwing an exception 
```

继承人 MyClass.h

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

@interface JBSlidingTableViewCell : UITableViewCell {
    UIView* _bottomDrawer;
    UIView* _topDrawer;
    UILabel* _titleLabel;
}
// Callback: Called when the bottom drawer is about to be shown. Add subviews here.
- (void)bottomDrawerWillAppear;

// Callback: Called when the bottom drawer has disappeared and is about to be released.
// Release subviews here.
- (void)bottomDrawerDidDisappear;

// Creates the bottom drawer, then opens the top drawer to reveal it.
- (void)openDrawer;

// Closes the top drawer over the bottom drawer, then releases the bottom drawer.
- (void)closeDrawer;

@property (nonatomic, retain) UILabel* titleLabel;
@property (nonatomic, retain) UIView* bottomDrawer;
@property (nonatomic, retain) UIView* topDrawer;

@end

@interface MyClass : NSObject {
}
+ (NSString*)str;
+ (void)setStr:(NSString*)newStr;
+ (void)uploadImg:(UIImage*)img;
@end 
```

现在是 MyClass.m

```
#import "MyClass.h"
#import "QuartzCore/QuartzCore.h"

static NSString* str;

@implementation JBSlidingTableViewCell

@synthesize bottomDrawer = _bottomDrawer;
@synthesize topDrawer = _topDrawer;
@synthesize titleLabel = _titleLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString*)identifier {
    self = [super initWithStyle:style reuseIdentifier:identifier];

    if (nil != self) {
        self.titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 13, 304, 20)];
        self.titleLabel.font = [UIFont boldSystemFontOfSize:17];
        self.titleLabel.textColor = [UIColor blackColor];
        self.titleLabel.backgroundColor = [UIColor clearColor];
        [self.topDrawer addSubview:self.titleLabel];
        _bottomDrawer = nil;

        // Top drawer
        self.topDrawer = [[UIView alloc] init];
        self.topDrawer.backgroundColor = [UIColor whiteColor];
        [self.contentView addSubview:self.topDrawer];
    }

    return self;
}

- (void)dealloc {
    _bottomDrawer = nil;
    _topDrawer = nil;
    _titleLabel = nil;
}

- (void)closeDrawer {
    if (self.topDrawer.hidden) {
        CATransition* animation = [CATransition animation];
        animation.delegate = self;
        animation.type = kCATransitionPush;
        animation.subtype = kCATransitionFromLeft;
        animation.duration = 0.2f;
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        [self.contentView.layer addAnimation:animation forKey:nil];
        self.contentView.hidden = NO;
        self.topDrawer.hidden = NO;
    }
}

- (void)openDrawer {
    self.bottomDrawer = [[UIView alloc] initWithFrame:self.bounds];
    [self bottomDrawerWillAppear];
    [self insertSubview:self.bottomDrawer belowSubview:self.contentView];

    CATransition* animation = [CATransition animation];
    animation.type = kCATransitionPush;
    animation.subtype = kCATransitionFromRight;
    animation.duration = 0.2f;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [self.contentView.layer addAnimation:animation forKey:nil];
    self.topDrawer.hidden = YES;
    self.contentView.hidden = YES;
}

- (void)bottomDrawerDidDisappear {
    // Can be overridden by subclasses.
}

- (void)bottomDrawerWillAppear {
    self.bottomDrawer.backgroundColor = [UIColor lightGrayColor];
    UILabel* bottomDrawerLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 13, 304, 20)];
    bottomDrawerLabel.font = [UIFont boldSystemFontOfSize:17];
    bottomDrawerLabel.textColor = [UIColor colorWithWhite:0.2 alpha:1.0];
    bottomDrawerLabel.shadowColor = [UIColor colorWithWhite:1.0 alpha:0.75];
    bottomDrawerLabel.shadowOffset = CGSizeMake(0, 1);
    bottomDrawerLabel.backgroundColor = [UIColor clearColor];
    bottomDrawerLabel.text = [NSString stringWithFormat:@"Bottom drawer!%d",rand()];
    [self.bottomDrawer addSubview:bottomDrawerLabel];}

- (void)layoutSubviews {
    [super layoutSubviews];
    self.topDrawer.frame = self.contentView.bounds;
}
- (void)animationDidStop:(CAAnimation*)anim finished:(BOOL)flag {
    [self bottomDrawerDidDisappear];
    [self.bottomDrawer removeFromSuperview];
    self.bottomDrawer = nil;
}

@end

@implementation MyClass

+ (NSString*)str {
    return str;
}

+ (void)setStr:(NSString*)newStr {
    if (str != newStr) {
        str = [newStr copy];
    }
}
+ (void)uploadImg:(UIImage*)img {
    NSData *imageData = UIImageJPEGRepresentation(img, 0.9);

    NSMutableDictionary *userDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:[MyClass str],@"email", nil];
    NSString *returnString;

    NSString *urlString = @"MYURL";
    NSURL *url = [NSURL URLWithString:urlString];
    NSString *filename = [MyClass str];
    NSMutableURLRequest *request= [[NSMutableURLRequest alloc] initWithURL:url] ;

    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *postbody = [NSMutableData data];
    //NSMutableDictionary * params = [[NSMutableDictionary alloc] initWithObjects:[[NSArray alloc] initWithObjects:@"great problem", @"infront of my house",nil] forKeys:[[NSArray alloc] initWithObjects:@"problem",@"location",nil]];
    NSMutableString *tempVal = [[NSMutableString alloc] init];
    for(NSString * key in userDict)
    {
        [tempVal appendFormat:@"\r\n--%@\r\n", boundary];
        [tempVal appendFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n%@",key,[userDict objectForKey:key]];
    }

    NSString *postData = [tempVal description];
    //here Webservices is my class name
    [postbody appendData:[postData dataUsingEncoding:NSUTF8StringEncoding]];
    if(imageData != nil)
    {
        [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filetype=\"image/jpeg\"; filename=\"%@.jpg\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
        [postbody appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [postbody appendData:[NSData dataWithData:imageData]];
    }

    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"requesting upload");

   // NSString *str2 = [[NSString alloc] initWithData:postbody encoding:NSUTF8StringEncoding];
   // NSLog(str2);
    [request setHTTPBody:postbody];
    NSLog(@"uploading");

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    //NSLog(returnString);
    NSLog(returnString);
}

@end 
```

现在这里是调用情节提要中的视图的文件和代码。

FriendsListTableViewController.h

```
#import <UIKit/UIKit.h>
#import "TBXML.h"
#import <MessageUI/MessageUI.h>

@interface friendsListTableViewController: UIViewController <UIScrollViewDelegate, UITableViewDataSource, UITableViewDelegate, MFMailComposeViewControllerDelegate, NSObject, UIScrollViewDelegate>{
    NSMutableArray *friendList;
    TBXML * tbxml;
    NSMutableArray *friends;
    IBOutlet UILabel *friendsFullNames;
    IBOutlet UIImage *imageFile;
    IBOutlet UITableView *tableView;
@private
    NSIndexPath* _openedCellIndexPath;
    NSArray* _regularCellStrings;
    UITableView* _tableView;
}

    - (IBAction)inviteFriends:(id)sender;
@property (nonatomic, strong) NSMutableArray *friends;
@property (nonatomic, strong) NSMutableArray *friendList;
@property (nonatomic, retain) IBOutlet UITableView* tableView;

@end 
```

和friendsListTableViewController.m

```
#import "friendsListTableViewController.h"
#import "loginViewController.h"
#import "MyClass.h"

@interface friendsListTableViewController ()
@property (nonatomic, readonly) JBSlidingTableViewCell* openedCell;
@property (nonatomic, retain) NSIndexPath* openedCellIndexPath;
@property (nonatomic, copy) NSArray* regularCellStrings;

- (void)closeOpenedCell;
@end

@implementation friendsListTableViewController
@synthesize openedCellIndexPath = _openedCellIndexPath;
@synthesize regularCellStrings = _regularCellStrings;
@synthesize tableView = _tableView;
@synthesize friends, friendList;

- (id)initWithCoder:(NSCoder*)aDecoder {
    self = [super initWithCoder:aDecoder];

    if (nil != self) {
        _openedCellIndexPath = nil;

        self.regularCellStrings = [NSArray arrayWithObjects:@"First default cell", @"Second default cell", nil];
    }

    return self;
}

- (void)dealloc {

    _openedCellIndexPath = nil;
    tableView = nil;
}

- (JBSlidingTableViewCell*)openedCell {
    JBSlidingTableViewCell* cell;

    if (nil == self.openedCellIndexPath) {
        cell = nil;
    } else {
        cell = (JBSlidingTableViewCell*)[self.tableView cellForRowAtIndexPath:self.openedCellIndexPath];
    }

    return cell;
}

#pragma mark -
#pragma mark Private Methods

- (void)closeOpenedCell {
    [self.openedCell closeDrawer];
    self.openedCellIndexPath = nil;
}

#pragma mark -
#pragma mark UIScrollViewDelegate Methods

- (void)scrollViewWillBeginDragging:(UIScrollView*)scrollView {
    [self closeOpenedCell];
}

#pragma mark -
#pragma mark UITableViewDataSource Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView*)tableView {
    return 1;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tableView setDelegate:self];
    [self.tableView setDataSource:self];
    friendList = [[NSMutableArray alloc] initWithCapacity:0];
    //USED TO CONNECT TO SERVERS XML

    //UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Your Userid Below :D" message:[MyClass str] delegate:self cancelButtonTitle:@"Try Agains" otherButtonTitles:nil, nil];
    //[alert show];
    NSString *someOtherString = [NSString stringWithFormat: @"MYURL?userid=%@", [MyClass str]];
    //UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Your Userid Below :D" message:someOtherString delegate:self cancelButtonTitle:@"Try Agains" otherButtonTitles:nil, nil];
    //[alert2 show];
        NSData *xmlData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:someOtherString]];
    tbxml = [[TBXML alloc]initWithXMLData:xmlData];

    //USED FOR LOCAL XML     //PLEASE USE ONLY WHEN IN DEVELOPMENT/TESTING
    //NSString *xmlData = [[NSBundle mainBundle] pathForResource:@"friendlist" ofType:@"xml"];
    //NSData *data = [[NSData alloc] initWithContentsOfFile:xmlData];
    //tbxml = [[TBXML alloc]initWithXMLData:data];

    //strings
    // Obtain root element
    TBXMLElement * root = tbxml.rootXMLElement;
    if (root)
    {
        TBXMLElement * allFriends = [TBXML childElementNamed:@"friend" parentElement:root];
        while (allFriends !=nil)
        {
            TBXMLElement * fname = [TBXML childElementNamed:@"fname" parentElement:allFriends];
            NSString *firstName = [TBXML textForElement:fname];
            TBXMLElement * lname = [TBXML childElementNamed:@"lname" parentElement:allFriends];
            NSString *lastName = [TBXML textForElement:lname];
            NSString *fullname = [NSString stringWithFormat:@"%@ %@", firstName, lastName];
            [friendList addObject:fullname];
            allFriends = [TBXML nextSiblingNamed:@"friend" searchFromElement:allFriends];
        }

        //TBXMLElement *fname = [TBXML childElementNamed:@"fname" parentElement:elem_PLANT];
    }

}

#pragma mark - UITableViewDelegate + UITableViewDatasource

- (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section {
    return [friendList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell* cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    if (nil == cell) {
        cell = [[[JBSlidingTableViewCell alloc] init]initWithStyle:UITableViewCellStyleDefault
                                                                     reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    friendsFullNames = (UILabel *)[cell viewWithTag:12];
    friendsFullNames.text = [friendList objectAtIndex:indexPath.row];
    imageFile = (UIImage *)[cell viewWithTag:13];
    //imageFile = [NSString stringWithFormat:@"%d", NUMBER_OF_ROWS - indexPath.row];
    //cell.textLabel.text = [friendList objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath {
    [self closeOpenedCell];
    [(JBSlidingTableViewCell*)[self.tableView cellForRowAtIndexPath:indexPath] openDrawer];
    self.openedCellIndexPath = indexPath;
}
/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (IBAction)inviteFriends:(id)sender {

    if ([MFMailComposeViewController canSendMail]){
        // Email Subject
        NSString *emailTitle = @"Woot";
        // Email Content
        NSString *messageBody = @"Some HTML Content";
        // To address
        NSArray *toRecipents = [NSArray arrayWithObject:@"myemail@dress.com"];

        MFMailComposeViewController *mc = [[MFMailComposeViewController alloc] init];
        mc.mailComposeDelegate = self;
        [mc setSubject:emailTitle];
        [mc setMessageBody:messageBody isHTML:YES];
        [mc setToRecipients:toRecipents];

        // Present mail view controller on screen
        [self presentViewController:mc animated:YES completion:NULL];
    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Account Found" message:@"You need to add an email account to your device" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
        // optional - add more buttons:
        [alert addButtonWithTitle:@"Add Account"];
        [alert show];
    }

}

- (void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail sent");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail sent failure: %@", [error localizedDescription]);
            break;
        default:
            break;
    }

    // Close the Mail Interface
    [self dismissViewControllerAnimated:YES completion:NULL];
}

@end 
```

在情节提要中，其标识符“单元格”是正确的，并且包含单元格的 tableView 可以从数据库中正确提取信息。

当我们单击单元格时，我们会收到此错误，以尝试测试滑动功能。

我知道它有很多源代码可以浏览。但我感谢任何时间和精力帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:17:59.443

~~原型的类设置为`JBSlidingTableViewCell`？似乎没有。~~（见我在这里说垃圾）

一般来说：

如果您在情节提要中使用动态原型单元（但是您以编程方式分配单元子视图，那么为什么需要原型？）：

您应该只使用`... = [[[JBSlidingTableViewCell alloc] init];`然后将您放入的自定义项`initWithStyle:reuseIdentifier:`放入`awakeFromNib`方法中（或者您可以在情节提要中自定义单元格），如果您需要为整个类重用 id 一个，则只需覆盖`reuseIdentifier`getter，并在那里返回 id。