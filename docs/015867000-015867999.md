# StackOverflow 问答 15867000-15867999

# c++ - C++ 静态类成员和非默认构造函数

> ID：15867001
> 
> 赞同：0
> 
> 时间：2013-04-07T19:48:22.020
> 
> 标签：c++, static, constructor

我有这堂课：

```
class Object
{
    public:

    private:
        float _positionX, _positionY, _positionZ;
} 
```

每次为它们分配新值时，我都需要检查并进行一些数学运算，并且我还在各个地方使用这些值。我正在寻找一种比使用这些方法更简单的方法来分配和检查值：

```
class Object
{
    public:
        float GetPositionX();
        void SetPositionX(float value);
        //etc
    private:
        float _positionX, _positionY, _positionZ;
} 
```

所以我正在尝试做这样的事情：

```
static class Vector3
{
    public:
        Vector3(float *valueX, float *valueY, float *valueZ)
        {
            _valueX = valueX;
            _valueY = valueY;
            _valueZ = valueZ;
        }
    private:
        float *_valueX, *_valueY, *_valueZ;
}
class Object
{
    public:
        Vector3 Position;
        //Position = Vector3(&_positionX, &_positionY, &_positionZ);
    private:
        float _positionX, _positionY, _positionZ;
} 
```

这样我就可以在代码中的其他任何地方这样称呼它：

```
Object *myObj = new Object();
myObj->Position.x = 1; //assign, checks are done here
float myValue = myObj->Position.x; //receive, no checks needed 
```

但是编译器抱怨**Vector3 没有默认构造函数**。我也有一堆**Object**，我不确定我是否以正确的方式使用静态 Vector3 （如果它不会与其他对象的值冲突）。

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:53:05.673

向 Vector 添加一个默认构造函数：

```
Vector3()
{
   _valueX = NULL;
   _valueY = NULL;
   _valueZ = NULL;
} 
```

# node.js - 如何使用 node.js 从标准输入逐行流式传输并发送到客户端？

> ID：15867002
> 
> 赞同：0
> 
> 时间：2013-04-07T19:48:22.343
> 
> 标签：node.js, streaming, pipe, stdin

我想要做的是从一个正在写入标准输出的 scala 文件设置一个流，并将该输出通过管道传输到 node.js。例如写作.scala | node index.js 然后，在 node.js 中，我想读取每一行，并将其发送到客户端。有谁知道我该怎么做？有没有更好的方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:26:21.943

最简单的方法是`scala`使用函数从节点应用程序中调用程序[`child_process.exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)：

```
var express = require('express');
var exec = require('child_process').exec;
var app = express();

app.get('/', function(req, res){
  exec('your scala program',
    function (error, stdout, stderr) {
      res.send(stdout);
  });
});

app.listen(3000); 
```

如果您不关心错误，您可以使用它`piping`来加速您的应用程序。在这种情况下`node`，将在调用您的 scala 程序后立即开始向客户端发送数据。我不太确定语法，但应该看起来像这样：

```
var express = require('express');
var exec = require('child_process').exec;
var app = express();

app.get('/', function(req, res){
  var child = exec('your scala program');
  child.stdout.pipe(res);
});

app.listen(3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:43:20.907

Leonids 的响应是 98% 正确接受，因为`res`它是一个可写流并且`stdout`是一个可读流，所以代码应该这样写：

```
...
exec('your scala program',
  function (error, stdout, stderr) {
    stdout.pipe(res);
});
... 
```

# bit-manipulation - 计算在 2 的补码中表示整数所需的位数

> ID：15867003
> 
> 赞同：0
> 
> 时间：2013-04-07T19:48:28.510
> 
> 标签：bit-manipulation

我必须编写一个函数来计算以 2 的补码形式表示 int 所需的位数。要求：

```
1\. can only use: ! ~ & ^ | + << >>
2\. no loops and conditional statement
3\. at most, 90 operators are used 
```

目前，我在想这样的事情：

```
int howManyBits(int x) {
   int mostdigit1 = !!(0x80000000 & x);
   int mostdigit2 = mostdigit1 | !!(0x40000000 & x);
   int mostdigit3 = mostdigit2 | !!(0x20000000 & x);
   //and so one until it reach the least significant digit
   return mostdigit1+mostdigit2+...+mostdigit32+1;
} 
```

但是，这个算法不起作用。它也超过了 90 个操作员的限制。有什么建议，我该如何修复和改进这个算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:34:38.833

对于 2 的补码整数，问题是负数。负数由最高有效位指示：如果已设置，则该数为负数。2 的补码整数 n 的负数定义为 -(n 的 1 的补码)+1。
因此，我将首先测试负号。如果已设置，则所需的位数只是可用于表示整数的位数，例如 32 位。如果没有，您可以简单地计算所需的位数，方法是将 n 重复右移一位，直到结果为零。例如，如果 n 为 +1，例如 000…001，则必须将其右移一次以使结果为零，例如 1 次。因此，您需要 1 位来表示它。

# jquery - 使用 jQuery 检测一个下拉列表的值并更新另一个

> ID：15867014
> 
> 赞同：0
> 
> 时间：2013-04-07T19:49:56.390
> 
> 标签：jquery, parsing, drop-down-menu

这是我第一个使用 Javascript 的周末（来自 Matlab 背景），经过一个非常高效的星期六之后，我已经坚持了好几个小时，非常感谢任何帮助！

我试图检测一个下拉框的值，然后从 Parse 后端更新另一个，一个是顶级行业，另一个是子行业。从这里的其他答案来看，这似乎应该很容易，但是当它检测到更改时，它实际上从未更新第二个框。数据从 Parse 到达很好。我在其他部分使用了 Foundation 框架、最新版本的 jQuery 和 Handlebars，如果这能有所作为的话。

的HTML：

```
<form class="custom">

<div class="large-6 columns">

  <label for="IndustryDropDown">Area of interest</label>
  <select id="IndustryDropDown" class="small">
    <option>All</option>
    <option>Technology</option>
    <option>Services</option>
    <option>Financial</option>
    <option>Consumer goods</option>
    <option>Materials and mining</option>
  </select>

</div>

<div class="large-6 columns">

  <label for="SubIndustryDropDown">Specific interest</label>
  <select id="SubIndustryDropDown" class="small">
  <option>Select Area first</option>
  </select>
</div>

</form> 
```

JS：

```
$("#IndustryDropDown").change(function(){

  var SubIndustry = Parse.Object.extend("SubIndustry");
  var query = new Parse.Query(SubIndustry);

  // change this to a case statement once working

  if ($(this).val() == "Technology"){

      var Industries = Parse.Object.extend("Industries");
      var industries = new Parse.Query(Industries);
      query.descending("Name");
      query.equalTo("Industry", "Technology")

        query.find({
          success: function(results) {

            $(results).each(function(i,e) {
              var q = e.toJSON();
              console.log(q.Name) // this prints out the Name entries as expected
              $('SubIndustryDropDown').append( new Option(q.Name, q.Name));
            });//for each  

          },//sucess
          error: function(error) {
            console.warn("error finding quote")
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:20:16.280

```
$('SubIndustryDropDown').append( new Option(q.Name, q.Name)); 
```

jQuery ID selectors require #, otherwise you're selecting an element with that name (no html element exists with that name, but it could happen with xhtml)

So `$('#SubIndustryDropDown')`. Also, append() needs a parameter that is either an html string, a DOM node, or a jquery object containing that DOM node. I don't know if that Option object is valid for jQuery, but if it fails do something like `.append($("<option>").attr("value", q.Name).text(q.Name))` (that's just how I'd generate the html for the option tag, there might be better ways)

# devise - Rails Google OAuth2 + Devise - 无法从 Google oauth2 授权您，因为“超时”

> ID：15867015
> 
> 赞同：6
> 
> 时间：2013-04-07T19:50:05.820
> 
> 标签：devise, ruby-on-rails-3.2, timeout, google-api, omniauth

因此，我一直在研究 Google API 很长一段时间，现在正在浏览我在互联网上找到的本教程：[https](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview) ://github.com/plataformatec/devise/wiki/OmniAuth:-Overview ，它几乎对我有用。我完成了指定的所有步骤，并成功地重定向到 Google 以从登录页面请求访问我的应用程序。但是，当我单击“允许访问”时，服务器将我重定向到普通的注册页面，然后我得到一个闪现：

> 无法从 Google oauth2 授权您，因为“超时”

使用的宝石：

```
gem 'omniauth-google-oauth2' 
```

这是在我的 devise.rb 模型中：

```
require "omniauth-google-oauth2" 
config.omniauth :google_oauth2, "myKey", "mySecret", { access_type: "offline", approval_prompt: "" } 
```

这是路线：

```
devise_for :gamers, :controllers => { :omniauth_callbacks => "gamers/omniauth_callbacks" } 
```

# macos - 如何删除这个“# ... #”Emacs 文件？

> ID：15867018
> 
> 赞同：1
> 
> 时间：2013-04-07T19:50:13.813
> 
> 标签：macos, unix, emacs, delete-file

我的主目录中有一个名为#snake# 的文件。我想删除它，但常规删除命令都不起作用。如何删除这个“文件”而不造成任何损坏，它是什么类型的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:56:15.977

这是一个自动保存文件，以防您的计算机崩溃。你可以很方便地从 emacs 中删除这些。打开 dired (Cx d) 并按下`#`以选择目录中的所有这些。然后`x`进行删除。

或者在外壳中，只需将名称放在引号中，例如`rm "#snake#"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:17:17.153

“问题”是`#`符号被解释为shell中注释的开始。尝试将文件名括在引号中，例如：

```
rm "#snake#" 
```

# c++ - 在 Direct X 中绘制一个矩形

> ID：15867021
> 
> 赞同：5
> 
> 时间：2013-04-07T19:50:31.523
> 
> 标签：c++, directx-9, vertex

使用此处的教程，我设法在屏幕上显示了一个红色三角形：[http ://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-4](http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-4)

```
CUSTOMVERTEX OurVertices[] =
{
    { 0, 0, 0, 1.0f, D3DCOLOR_XRGB( 127, 0, 0 ) },
    { WIDTH, 0, 0, 1.0f, D3DCOLOR_XRGB( 127, 0, 0 ) },
    { 0, 300, 0, 1.0f, D3DCOLOR_XRGB( 127, 0, 0 ) },
    { WIDTH, 300, 0, 1.0f, D3DCOLOR_XRGB( 127, 0, 0 ) }
};

d3dDevice->CreateVertexBuffer(3*sizeof(CUSTOMVERTEX),
    0,
    CUSTOMFVF,
    D3DPOOL_MANAGED,
    &vBuffer,
    NULL);

VOID* pVoid;    // the void* we were talking about

vBuffer->Lock(0, 0, (void**)&pVoid, 0);    // locks v_buffer, the buffer we made earlier
memcpy(pVoid, OurVertices, sizeof(OurVertices));    // copy vertices to the vertex buffer
vBuffer->Unlock();    // unlock v_buffer

d3dDevice->SetFVF(CUSTOMFVF);
d3dDevice->SetStreamSource(0, vBuffer, 0, sizeof(CUSTOMVERTEX));
d3dDevice->DrawPrimitive(D3DPT_TRIANGLELIST, 0, 1); 
```

但是你可以看到我真的很想画一个矩形。

我已将 Primitive 更改为绘制 2 个三角形并将缓冲区大小扩展到自定义顶点的 4*size 但我不能说我明白如何将它从我的三角形获取到我想要的矩形：

![在此处输入图像描述](https://i.stack.imgur.com/6syuA.jpg)

考虑到我只想在它上面悬挂一些文本，有没有更好的方法来绘制矩形而不是使用四边形：

[http://1.bp.blogspot.com/-6HjFVnrVM94/TgRq8oP4U-I/AAAAAAAAAKk/i8N0OZU999E/s1600/monkey_island_screen.jpg](http://1.bp.blogspot.com/-6HjFVnrVM94/TgRq8oP4U-I/AAAAAAAAAKk/i8N0OZU999E/s1600/monkey_island_screen.jpg)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T20:15:52.217

我不得不扩展我的缓冲区以允许 4 个顶点数组大小：

```
d3dDevice->CreateVertexBuffer(4*sizeof(CUSTOMVERTEX),
    0,
    CUSTOMFVF,
    D3DPOOL_MANAGED,
    &vBuffer,
    NULL); 
```

然后将绘制图元从 TRIANGLELIST 更改为 STRIP 将绘制的三角形数量扩展到 2

```
d3dDevice->DrawPrimitive (D3DPT_TRIANGLESTRIP, 0, 2 ); 
```

来源：[http ://www.mdxinfo.com/tutorials/tutorial4.php](http://www.mdxinfo.com/tutorials/tutorial4.php)

# c# - TCP SOCKET：流在异步操作中被发送/接收两次

> ID：15867022
> 
> 赞同：0
> 
> 时间：2013-04-07T19:50:32.813
> 
> 标签：c#, asynchronous

我目前正在研究异步 TCP 程序，但遇到以下问题：

*   - 当服务器发送一些流时，客户端首先接收一个空缓冲区，然后它接收流。
*   - 在第一个流发送之后，如果我正在发送另一个流，则客户端的缓冲区包含发送的第一个流和当前流。
*   - 如果我正在发送另一个流，缓冲区将包含我之前发送的流和当前的流......等等......

这真的很烦人，我不知道问题出在哪里。这是我的客户代码：

```
Socket CLIENT;
byte[] _buffer;

private void button1_Click(object sender, EventArgs e)
{
    Start();
}
void Start()
{
    CLIENT = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    CLIENT.BeginConnect(IPAddress.Parse("the IPaddress"), 1234, new AsyncCallback(ConnectionCallBack), null);
}
private void ConnectionCallBack(IAsyncResult ar)
{
    try
    {
         CLIENT.EndConnect(ar);
         _buffer = new byte[CLIENT.ReceiveBufferSize];
         CLIENT.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallBack), null);
    }
    catch (Exception Er)
    {
        MessageBox.Show("[[[[ERROR:1]]]]=>" + Er.Message);
    }

}
private void ReceiveCallBack(IAsyncResult ar)
{
    try
    {
        int lenght = CLIENT.EndReceive(ar);
        if (lenght == 0)  { return; }
        Array.Resize(ref _buffer, lenght);
        string stream = ASCIIEncoding.ASCII.GetString(_buffer);
        Array.Resize(ref _buffer, CLIENT.ReceiveBufferSize);

        CLIENT.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallBack), null);

    }
    catch (Exception ex) { MessageBox.Show("[[[[hoERROR:2]]]]=>" + ex.Message); }
} 
```

这是服务器：

```
private void button2_Click(object sender, EventArgs e)
        { 
            try
            {
                Socket socket = (Socket)listW.SelectedItems[0].Tag; //contains the socket
                socket.BeginSend(_buffer,0,_buffer.Length,SocketFlags.None,new AsyncCallback(SendingCallBack),socket);
                ServerSocket.BeginAccept(new AsyncCallback(AcceptCallBack),null);
            }
            catch (Exception er) { MessageBox.Show("[[[[ERROR:]]]]=>" + er.ToString()); }
        }
        private void SendingCallBack(IAsyncResult ar)
        {
            try
            {
                Socket socket = (Socket)ar.AsyncState;
                _buffer = ASCIIEncoding.ASCII.GetBytes(tx1.Text);
                socket.BeginSend(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(FinalCallBack),socket);
            }
            catch (Exception er) { MessageBox.Show("[[[[ERROR:3]]]]=>" + er.ToString()); }
        }
        private void Final(IAsyncResult ar)
        {
            Socket client = ar.AsyncState as Socket;
            client.EndSend(ar);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:39:53.437

I think you have a few problems. One seems to be the `stream` in `ReceiveCallback`. You get a string from the buffer then do nothing with it. Resizing your buffer down then resizing if back up to the original size seems like a waste. Might was well make a copy of the data then call `GetString` and you can leave your buffer alone.

In your server, you call `BeginSend` to send _buffer, when that completes you call `BeginSend` again in `SendingCallback` with the binary representation of `tx1.Text` **but you don't call `EndSend`**, when that completes you call `EndSend` on the 2nd `BeginSend`; but still haven't called it for the 1st.

# jquery - bPopup Re-Centre/如何运行JS/jQuery函数

> ID：15867023
> 
> 赞同：0
> 
> 时间：2013-04-07T19:50:33.820
> 
> 标签：jquery, popup, bpopup

我不知道是否有人熟悉 bPopup 但这里什么都没有。

我有一个运行的 AJAX 请求，成功后它将新内容加载到弹出窗口中，从而改变了大小，在此之后我将如何正确地重新居中 div？

[这是 bPopup 代码](https://github.com/dinbror/bpopup/blob/master/jquery.bpopup.js)

我尝试运行重新居中功能，但是在尝试运行这样的功能时出现错误“未捕获的 ReferenceError：bPopup 未定义”：

```
bPopup.recenter(); 
```

有任何想法吗？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:27:20.853

是的，我也有类似的情况。加载 ajax 后弹出窗口的内容发生了变化，但打开的弹出窗口的大小保持不变。

建议你关闭弹窗，清空弹窗div的内容，然后马上重新打开。它创造了一个很好的效果，新的弹出窗口现在调整大小以适应新的内容。

例子：

```
$('#buttonToPopup').bind('click', function(e) {  
    $('#popupDIV').bPopup().close();
    $('#popupDIV').empty();  // clear the previous contents of the popup
    $('#popupDIV').bPopup({
       loadUrl: myNewURL     // this is the new ajax content
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-10T22:12:43.097

触发`$(window).resize()`事件。

`recenter()`在 bPopup 中是私有的。您可以调用`bPopup().reposition()`对齐弹出窗口，但如果用户滚动页面，弹出窗口将再次错位。仅触发`$(window).resize()`事件对我有用：

```
$('#my-button').click(function() {
    // show the popup
    var myPopup = $('#my-popup');
    myPopup.bPopup();
    // load new content
    $.get(myUrl).done(function(data) {
      myPopup.html(data);
      // trigger "window resized"
      $(window).resize();
      // this will not work if the user scrolls the page
      /* myPopup.bPopup().reposition(); */
    });
}); 
```

# xna - 带有水平滚动框和碰撞的 XNA 2D 相机

> ID：15867026
> 
> 赞同：0
> 
> 时间：2013-04-07T19:50:56.280
> 
> 标签：xna, camera, scroll, 2d, collision-detection

我有我一直在制作的 XNA 2D 游戏，但我遇到了问题。

我的精灵正在跳过屏幕上滚动的框。精灵被 2D 摄像头跟踪，我担心摄像头会引起问题，因为它会导致滚动框在屏幕中途停止而不是继续，而且生命的数量正在迅速减少而不是一个生命当发生一次碰撞时。

这是我的精灵与移动框碰撞的代码

```
 Rectangle fairyRectangle = new Rectangle((int)position.X, (int)position.Y, texture.Width, texture.Height);

        hit = false;

        for (int i = 0; i < GameConstants.TotalBoxes; i++)
        {
            if (scrollingBlocks.boxArray[i].alive)
            {
                Rectangle blockRectangle = new Rectangle((int)scrollingBlocks.boxArray[i].position.X, (int)scrollingBlocks.boxArray[i].position.Y, scrollingBlocks.boxArray[i].texture.Width, scrollingBlocks.boxArray[i].texture.Height);

                if (IntersectPixels(fairyRectangle, fairyTextureData, blockRectangle, blockTextureData))
                {
                    scrollingBlocks.boxArray[i].alive = false;

                    hit = true;
                    lives--;

                    scrollingBlocks.boxArray[i].alive = true;

                    scrollingBlocks.boxArray[i].position.X = random.Next(GameConstants.ScreenWidth);
                    scrollingBlocks.boxArray[i].position.Y = 570;
                }
            }

        } 
```

这是滚动框中的更新函数 public void Update(GameTime gameTime) {

```
 for (int i = 0; i < GameConstants.TotalBoxes; i++)
        {
            boxArray[i].position.X = boxArray[i].position.X - 5;
            boxArray[i].position.Y = boxArray[i].position.Y;

            if (boxArray[i].position.X < 0)
            {
                boxArray[i].position.X = randomno.Next(GameConstants.ScreenWidth) + 700;
                boxArray[i].position.Y = 570;
            }

            Helper.WrapScreenPosition(ref boxArray[i].position);
        }

    } 
```

我希望它们从右侧屏幕开始并一直移动到 x = 0，但它们目前在 x = 400 处停止。

最后，这是我用精灵和方块绘制的地方

```
 if (gameState == GameState.PLAYINGLEVEL3)
        {
            graphics.GraphicsDevice.Clear(Color.Aquamarine);
            spriteBatch.Begin(SpriteBlendMode.AlphaBlend);
            backgroundManager.Draw(spriteBatch);
            //scrollingBlocks.Draw(spriteBatch);
            spriteBatch.DrawString(lucidaConsole, "Score: " + score + " Level: " + level + " Time Remaining: " + ((int)timer / 1000).ToString() + " Lives Remaining: " + lives, scorePosition, Color.DarkOrchid);
            spriteBatch.End();

            spriteBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Deferred, SaveStateMode.None, camera.transform);
            scrollingBlocks.Draw(spriteBatch);
            fairyL3.Draw(spriteBatch);
            spriteBatch.End();
        } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:32:28.833

从提供的代码中，我无法说明您的相机是如何工作的，但我的猜测是，当您启动关卡时，您的相机会选择一个新的中心点（而不是原来的 xna 屏幕位置）

换句话说，相机的中心可能已经将它向后推了一点，所以你认为屏幕的位置 0 可能已经被向前推到了屏幕的中间，使盒子停止了。我建议查看这些相机教程[http://www.david-amador.com/2009/10/xna-camera-2d-with-zoom-and-rotation/](http://www.david-amador.com/2009/10/xna-camera-2d-with-zoom-and-rotation/)或[http://www.youtube.com/看？v=pin8_ZfBgq0](http://www.youtube.com/watch?v=pin8_ZfBgq0)

相机可能很棘手，所以我建议看一些教程来获取挂出矩阵和查看端口。

至于夺走的生命不止一个，那是因为你说“如果这个箱子撞到我的玩家，夺走生命”。计算机不知道你只想带走一个，只要它与带走生命的玩家发生冲突，它就会不断递减。

希望这会给你一些想法：D

# java - 如何写回 .txt 文件？

> ID：15867031
> 
> 赞同：1
> 
> 时间：2013-04-07T19:51:16.930
> 
> 标签：java

我正在阅读一个文本文件，其中每个对象有五条信息，每行一条。没有换行符。有了这些信息，我将它填充到一个 ArrayList 中。从那里我可以修改它。就像添加新对象、删除和打印一组对象一样。这些方法似乎对文件有效，因为如果我输入一行来打印 ArrayList，它将打印修改后的列表。

我无法将 ArrayList 保存到新的 .txt 文件中。创建了一个新文件，但它是空白的。我不知道为什么，因为就像我说的，每次选择一个方法来修改我的 ArrayList 时，它都会返回那个新列表。

读取 .txt 文件的方法。

```
public void loadData(File fileName) {

Scanner inputFile = null;

    try {
        inputFile = new Scanner (new File("textImport.txt"));
    }

    catch (Exception FileNotFoundException) {
        System.out.println("ERROR: " + FileNotFoundException.getMessage());
        System.exit(1);
    }

    while (inputFile.hasNext()) {
        String fileName = inputFile.nextLine();
        String fileGrade = inputFile.nextLine();
        String fileMajor = inputFile.nextLine();
        int fileYear = Integer.parseInt(inputFile.nextLine());
        double fileId = Double.parseDouble(inputFile.nextLine());
        Student stu = new Student (fileName , fileGrade , fileMajor , 
                fileYear , fileId );
        studentList.add(stu) ;
    }
} 
```

我尝试导出文件。

```
public void save() {

    PrintWriter outputFile = null;
    try {
        outputFile = new PrintWriter("textExport.txt");
    } 

    catch (IOException e) {
        e.printStackTrace();
    }

    while (inputFile.hasNextLine()) {
        String line = inputFile.nextLine();
        outputFile.write(line);
        outputFile.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:56:31.277

保存循环必须围绕您的列表构建，而不是输入文件。

该文件必须完全重写，您不能附加到它，因为您有删除操作。

```
public void save() {
   try( PrintWriter outputFile = new PrintWriter("textExport.txt")) {
      for( Student s : studentList ) {
         s.writeTo( outputFile );
      }
      outputFile.close(); // Optional, try() close it in any case.
   }
} 
```

学生班，方法 writeTo()：

```
public void writeTo( PrintWriter outputFile ) throws IOException {
   outputFile.println( this.fileName );
   outputFile.println( this.fileGrade );
   outputFile.println( this.fileMajor );
   outputFile.println( this.fileYear );
   outputFile.println( this.fileId );
} 
```

我建议在 Student 中使用静态方法：（以后可能会重新分解为工厂）

```
public static Student readFrom( Scanner source ) {
   this.fileName  = source.nextLine();
   this.fileGrade = source.nextLine();
   this.fileMajor = source.nextLine();
   this.fileYear  = Integer.parseInt( source.nextLine());
   this.fileId    = Double.parseDouble( source.nextLine());
   return new Student( fileName, fileGrade, fileMajor,  fileYear, fileId );
} 
```

加载器变为：

```
public void loadData( File fileName ) {
   try( Scanner scanner = new Scanner( new File( "textImport.txt" ))) {
      while( scanner.hasNext()) {
            studentList.add( Student.readFrom( scanner ));
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:19:30.220

在 Aubin 的想法的帮助下，什么对我有用：

```
public void save() {
   PrintWriter outputFile = null;
   try {
      outputFile = new PrintWriter("exportFile.txt");
      for ( Student stu : studentList) {
         outputFile.println(stu);
      }
   } 
   catch (IOException e) {
      e.printStackTrace();
   }
   if( outputFile != null ) [
      outputFile.close();
   }
} 
```

# css - 在 Chrome 中具有绝对定位和高度的 svg 行为异常

> ID：15867034
> 
> 赞同：0
> 
> 时间：2013-04-07T19:51:28.200
> 
> 标签：css, google-chrome, svg

下面的 HTML 文件会在 Chrome 中产生一些特殊的东西，具体取决于该行`$("#canvas").height(100);`是否被注释。

```
<!DOCTYPE html>
<html>
    <body>
        <div style="margin-right: auto; margin-left: auto; width: 940px;">
            <div><h1>Title</h1></div>
            <div style="height: 50px;"></div>
            <svg id="canvas" style="width: 100%; position: absolute; left: 0px; z-index: -1;">
                <rect id="rect" x="0" y="0" width="100" height="100" fill="none" stroke-width="1" stroke="black"/>
            </svg>
            <div id="div1">Hi</div>
            <div id="div2"></div>
        </div>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
            function move() {
                var left = $("#div1")[0].getBoundingClientRect().left;
                $("#div2").text('left = ' + (left - 5));
                $("#rect").attr("x", left - 5);
                $("#canvas").height(100);
            }

            move();

            $(window).resize(function() {
                move();
            });
        </script>
    </body>
</html> 
```

在最大化的 Chrome 窗口中加载页面时，根据分辨率，div 的文本变为`left = N`. 事实证明，这个值`N`被关闭了 7。这可以通过调整窗口大小使其不被最大化然后再次最大化来看到。

`$("#canvas").height(100);`当该行被注释掉时，这种奇怪的行为不会出现。您可以在这个 jsfiddle 中见证这一点：http: [//jsfiddle.net/jvPCM/1/](http://jsfiddle.net/jvPCM/1/)。您必须将结果窗格向左扩大，直到矩形不靠近左边缘，然后点击刷新以查看不正确的绘图。如果您再次调整窗格大小，它将被修复。它的外观如下：

好：![在此处输入图像描述](https://i.stack.imgur.com/OD3wP.jpg)坏：![在此处输入图像描述](https://i.stack.imgur.com/uaPUm.jpg)

什么会导致这种情况？

仅供参考：这不会出现在 Firefox 中（具有讽刺意味的是，它首先需要设置高度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:17:04.667

发生这种情况是因为这两个浏览器呈现输出的方式。

Chrome 会在脚本准备好运行后立即渲染并运行脚本，结果证明页面仍然在加载一些未知资源（jquery 已经加载在那里），它的速度非常快。当我在浏览器中对其进行测试时，这会导致出现奇怪的滚动条（当然会立即消失）。这个滚动条改变了页面宽度，画布宽度取决于它的 100% 样式。这整件事导致了你遇到的错误。

仅供参考： $(document).ready 也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:03:30.197

在调用`getBoundingClientRect`.

仍然不确定为什么它会报告不同的值。

# html - 按下按钮时出现 HTML 表单

> ID：15867036
> 
> 赞同：0
> 
> 时间：2013-04-07T19:51:29.353
> 
> 标签：html, forms

我是网络开发的新手，很抱歉我的愚蠢。我实际上正在创建一个本地网站，我想在该网站上创建一个用户个人资料页面。我想要完成的是，个人资料页面在正常用例中不应该是可编辑的，但是当用户按下编辑按钮（如在 facebook 中）时，字段变为可编辑并出现一个保存按钮（基本上是一个表单，但没有重新加载页面或任何服务器端工作）。然后用户更新字段并保存。保存请求将被发送到服务器以更新数据库（可以在不重新加载页面的情况下以某种方式完成吗？我看到当您编辑和保存时 facebook 页面不会重新加载）。

就是这样。等待答复。

PS我认为一些javascript代码会来救我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:54:59.430

这是一个非常笼统的问题，所以我只能给出一个笼统的答案。我强烈建议您学习[jQuery](http://jquery.com/)。

jQuery 使从 Javascript 操作 HTML 和 CSS 变得容易——您需要这样做以显示/隐藏内容和用于编辑内容的表单（或以其他方式操作页面上的代码以实现您的目标）想要-有多种方法可以做到这一点，阿德里亚诺对您的问题的评论提供了一个很好的解决方案）。

在后台发送此类请求的特定部分称为 AJAX，jQuery 也支持它。

# jquery - 输入类型不具体

> ID：15867041
> 
> 赞同：-4
> 
> 时间：2013-04-07T19:52:42.433
> 
> 标签：jquery

我的 jQuery 代码中有以下部分：

```
$('input[type="radio"]').on('click', function () { 
```

但问题是我决定使用多个单选按钮，所以现在，系统不再工作了..

有没有人有一个解决方案来使用我需要的 jQuery 的单选按钮？（例如，使用 id="xx" 或类似的东西）谢谢！

-杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:59:11.697

您可以添加多个过滤器 .. 例如名称或您喜欢的任何名称。

```
$('input[type="radio"][name="group_2"]').on('click', function() {
    alert('Group 2 radio clicked !');
}); 
```

[http://jsfiddle.net/MPgzq/](http://jsfiddle.net/MPgzq/)

# c - 内置 qsort 函数中的比较函数

> ID：15867043
> 
> 赞同：0
> 
> 时间：2013-04-07T19:52:54.030
> 
> 标签：c, sorting, qsort

我正在尝试使用 C 中的内置 qsort 函数对结构进行排序

```
typedef struct abc{
  long long int fir;
  long long int sec;
}abc; 
```

在比较函数中，我使用了下面的代码，以便如果结构 abc 数组中任意两个元素之间的变量“fir”相同，则排序条件将取决于变量“sec”。

```
long long int cmp(const abc*  e1, const abc* e2)
{
if(e1->fir==e2->fir)
       return e1->sec-e2->sec;
else
    return e1->fir-e2->fir;
} 
```

该代码似乎无法正常工作。正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:13:39.697

```
long long int cmp(const abc*  e1, const abc* e2) 
```

qsort 比较函数没有正确的签名，因此您的程序具有未定义的行为。您应该将编译器警告标志设置为高，它会警告您此类事情。

只要减法不会溢出，您的实际测试就可以了，这可能不是很长时间的问题。**编辑**这里的减法不好，正是因为返回值`cmp`必须是一个`int`. 减法的结果`long long`，所以如果你有很大的值，结果太大而无法放入 an`int`并且`qsort`肯定会产生错误的顺序。

不过，更一般地说，这是更准确的：

```
int cmp(const void* v1, const void* v2)
{
    const struct abc* p1 = v1;
    const struct abc* p2 = v2;

    if (p1->fir < p2->fir)
        return -1;
    else if (p1->fir > p2->fir)
        return 1;
    else
        return p1->sec < p2->sec? -1 : p1->sec > p2->sec? 1 : 0;       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:05:05.670

您使用的内置 qsort 可能需要一个“低于”(operator<) 谓词，这是 C++ 的正常术语。只要参数不相等，你的在这两种情况下都会返回 true。

您必须返回真正的 IFF (当且仅当) `e1<e2`。

# c# - 检测 C# 和 SQL Server 内存冲突

> ID：15867046
> 
> 赞同：1
> 
> 时间：2013-04-07T19:53:18.067
> 
> 标签：c#, sql-server, memory-management

我有一个内存密集型 C# 应用程序，它与 SQL Server 驻留在同一台服务器上。

我在我的应用程序中进行了调整以限制内存缓存，并且我知道如何在我的 SQL Server 上设置（并设置）最大内存限制。

问题：当 C# 应用程序由于 SQL Server 的缓存而想要使用比可用内存更多的内存时，我的应用程序会大大减慢，大概是为了冒险进入虚拟内存空间。大多数情况下，我可以通过观察有多少可用 RAM 并在我的自定义 C# 代码（是否缓存到 RAM 和/或 SQL Server）和 SQL Server 的设置中设置适当的值来防止这种情况。

但是：有时由于机器上的其他进程、典型的操作系统需求波动等原因，机器的内存使用量超出了我的视线范围。

我注意到 SQL Server 通常会为其他进程（例如 Chrome、MS Word）提供 RAM ......我的进程似乎没有这样做。我有一种直觉，我的 C# 应用程序没有积极使用 SQL Server 中的所有缓存数据......

那么，我如何检测 SQL Server 何时不会为我的应用程序提供 RAM 和/或我如何检测我的应用程序何时无法分配额外的物理 RAM 字节？

# python - Pinterest API - 在 EC2 实例上返回 403

> ID：15867047
> 
> 赞同：0
> 
> 时间：2013-04-07T19:53:20.170
> 
> 标签：python, python-2.7, amazon-ec2, pinterest

我正在尝试检索给定 URL 的 Pin 图数。我创建了这个 Python 脚本，它采用两个单独的 URL 并打印出每个 URL 的数量。当我在本地机器上运行这个脚本时，我返回了一个包含 Pin 计数的 200 响应，但是，当我在我的 EC2 实例上运行完全相同的脚本时，我返回了 403 错误。

这是 Python 脚本：

```
#!/usr/bin/python

import requests

# Pinterest API
pinterest_endpoint = "http://api.pinterest.com/v1/urls/count.json?callback=&url="

# Emulate a SQL Query result (id, url)
results = [(1, "http://allrecipes.com/recipe/easter-nests/detail.aspx"), (2, "http://www.foodnetwork.com/recipes/ina-garten/maple-oatmeal-scones-recipe/index.html")]

# Cycle thru each URL
for url in results:
    # Print URL details
    print url[0]
    print url[1]
    print type(url[0])
    print type(url[1])
    print "Downloading: ", url[1]

    # Create Complete URL
    target_url = pinterest_endpoint + url[1]
    print target_url

    # Hit Pinterest API
    r = requests.get(target_url)
    print r
    print r.text
    # Parse string response
    start = r.text.find('\"count\"')
    end = r.text.find(',', start+1)
    content = len('\"count\"')
    pin_count = int(r.text[(start+content+1):end].strip())
    print pin_count 
```

这是我在本地机器（Ubuntu 12.04）上得到的响应：

```
$ python pin_count.py
1
http://allrecipes.com/recipe/easter-nests/detail.aspx
<type 'int'>
<type 'str'>
Downloading:  http://allrecipes.com/recipe/easter-nests/detail.aspx
http://api.pinterest.com/v1/urls/count.json?callback=&url=http://allrecipes.com/recipe/easter-nests/detail.aspx
<Response [200]>
({"count": 997, "url": "http://allrecipes.com/recipe/easter-nests/detail.aspx"})
997
2
http://www.foodnetwork.com/recipes/ina-garten/maple-oatmeal-scones-recipe/index.html
<type 'int'>
<type 'str'>
Downloading:  http://www.foodnetwork.com/recipes/ina-garten/maple-oatmeal-scones-recipe/index.html
http://api.pinterest.com/v1/urls/count.json?callback=&url=http://www.foodnetwork.com/recipes/ina-garten/maple-oatmeal-scones-recipe/index.html
<Response [200]>
({"count": 993, "url": "http://www.foodnetwork.com/recipes/ina-garten/maple-oatmeal-scones-recipe/index.html"})
993 
```

这是我在我的 EC2 实例（Ubuntu）上运行相同脚本时得到的响应：

```
$ python pin_count.py
1
http://allrecipes.com/recipe/easter-nests/detail.aspx
<type 'int'>
<type 'str'>
Downloading:  http://allrecipes.com/recipe/easter-nests/detail.aspx
http://api.pinterest.com/v1/urls/count.json?callback=&url=http://allrecipes.com/recipe/easter-nests/detail.aspx
<Response [403]>
{ "status": 403, "message": "Forbidden" }
Traceback (most recent call last):
  File "cron2.py", line 32, in <module>
    pin_count = int(r.text[(start+content+1):end].strip())
ValueError: invalid literal for int() with base 10: 'us": 403' 
```

我明白为什么它会吐出一条 ValueError 消息，我不明白**为什么当我从我的 EC2 实例运行脚本时得到 403 响应，但它在我的本地机器上按预期工作**。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T22:33:51.673

不是答案，但希望这可以为其他人节省一个小时尝试这种方法：**不出所料，Pinterest 似乎也在阻止来自 tor 出口路由器的请求。**

我在同一个端点上遇到了同样的问题，并将其范围缩小到 EC2 + Pinterest。我试图通过 tor 路由请求来规避它。

```
class PinterestService(Service):
    service_url = "http://api.pinterest.com/v1/urls/count.json?callback="
    url_param = 'url'

    def get_response(self, url, **params):
        params[self.url_param] = url

        # privoxy listens by default on port 8118
        # on the ec2 privoxy is configured to forward
        # socks5 through tor like so:
        # http://fixitts.com/2012/05/26/installing-tor-and-privoxy-on-ubuntu-server-or-any-other-linux-machine/

        http_proxy  = "socks5://127.0.0.1:8118"

        proxyDict = { 
          "http"  : http_proxy
        }

        return requests.get(self.service_url, params=params, proxies=proxyDict) 
```

我已经循环了许多出口路由器，并且响应始终如一 `{ "status": 403, "message": "Forbidden" }`

为了解决问题，我将通过一个私有 http 代理服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T18:00:18.097

这个问题是几年前提出的，我认为目前的答案已经过时了。EC2 现在运行上述脚本并获得成功响应，无需代理。我在调查我自己与 Google App Engine 的类似问题时遇到了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:50:43.037

Pinterest 可能正在阻止来自亚马逊拥有的 IP 块的请求，从而导致 403: Forbidden 错误。Pinterest 没有对其 API 的官方支持，因此（我的假设是）他们正在阻止其 API 的最大可能商业用途来源。您可以使用来自非 AWS 提供商的实例对此进行测试。

# php - 下载简历和 zip 文件问题 - PHP

> ID：15867048
> 
> 赞同：2
> 
> 时间：2013-04-07T19:53:23.067
> 
> 标签：php, wordpress, http-headers

我真的很坚持。我做了一个如下的功能（一个wp插件）。处理下载请求。

下载url格式是这样的：

`http://mysite.com/?download=2f547re8w9qasd547g8tr52e15469879w`

文件将像往常一样保存在浏览器中（弹出“另存为...”框）。

问题是：

**1 -**下载管理器喜欢`Orbit`尝试下载页面！并且`IDM`只下载整个文件大小的一小部分（例如7％）然后停止并通过恢复，它从第一个开始下载。（浏览器完全下载文件并恢复没有问题）

**2 -**当（通过浏览器）下载 .zip 文件时，出现“存档意外结束”错误。（*zip 文件详细信息中的 CRC32 显示 0 个字符*）

```
function save_file()
{
    global $wpdb;
    global $uid;
    global $each_download;
    $hash = @$_GET["download"];
    if(preg_match('/^[a-z0-9]{32}$/i',$hash))
    {
        if($row = $wpdb->get_row("SELECT * FROM wp_dlurl WHERE hash = '{$hash}'",ARRAY_A))
        {
            if(is_user_logged_in())
            {
                if($row['price'] != 0)
                    $each_download = $row['price'];
                if(get_user_meta($uid, 'revo_credits', true) >= $each_download)
                {
                    $parts = pathinfo($row['url']);
                    $url = $parts['dirname'] . '/' . urlencode($parts['basename']);
                    $file = pathinfo($row['filename']);
                    $ext = $file['extension'];
                    /* List of File Types */ 
                    $fileTypes['swf'] = 'application/x-shockwave-flash'; 
                    $fileTypes['pdf'] = 'application/pdf'; 
                    $fileTypes['exe'] = 'application/octet-stream'; 
                    $fileTypes['zip'] = 'application/zip'; 
                    $fileTypes['doc'] = 'application/msword'; 
                    $fileTypes['xls'] = 'application/vnd.ms-excel'; 
                    $fileTypes['ppt'] = 'application/vnd.ms-powerpoint'; 
                    $fileTypes['gif'] = 'image/gif'; 
                    $fileTypes['png'] = 'image/png'; 
                    $fileTypes['jpeg'] = 'image/jpg'; 
                    $fileTypes['jpg'] = 'image/jpg'; 
                    $fileTypes['rar'] = 'application/rar';     

                    $fileTypes['ra'] = 'audio/x-pn-realaudio'; 
                    $fileTypes['ram'] = 'audio/x-pn-realaudio'; 
                    $fileTypes['ogg'] = 'audio/x-pn-realaudio'; 

                    $fileTypes['wav'] = 'video/x-msvideo'; 
                    $fileTypes['wmv'] = 'video/x-msvideo'; 
                    $fileTypes['avi'] = 'video/x-msvideo'; 
                    $fileTypes['asf'] = 'video/x-msvideo'; 
                    $fileTypes['divx'] = 'video/x-msvideo'; 

                    $fileTypes['mp3'] = 'audio/mpeg'; 
                    $fileTypes['mp4'] = 'audio/mpeg'; 
                    $fileTypes['mpeg'] = 'video/mpeg'; 
                    $fileTypes['mpg'] = 'video/mpeg'; 
                    $fileTypes['mpe'] = 'video/mpeg'; 
                    $fileTypes['mov'] = 'video/quicktime'; 
                    $fileTypes['swf'] = 'video/quicktime'; 
                    $fileTypes['3gp'] = 'video/quicktime'; 
                    $fileTypes['m4a'] = 'video/quicktime'; 
                    $fileTypes['aac'] = 'video/quicktime'; 
                    $fileTypes['m3u'] = 'video/quicktime';

                    $contentType = $fileTypes[$ext];
                    //ob_end_clean();
                    header("Cache-Control: public");
                    header('Content-Type: $contentType');
                    header("Content-Transfer-Encoding: binary");
                    $new_name = $row['filename'];//rand(1000,999999).".".$ext;
                    $contentDisposition = 'attachment';
                    if(strstr($_SERVER['HTTP_USER_AGENT'], "MSIE"))
                    {
                        $new_name = preg_replace('/\./', '%2e', $new_name, substr_count($new_name,'.') - 1);
                    }
                    $new_name = urlencode($new_name);
                    header("Content-Disposition: $contentDisposition; filename=\"$new_name\"");
                    header("Accept-Ranges: bytes");
                    $range = 0; 
                    $size = $row['size']; 
                    if(isset($_SERVER['HTTP_RANGE']))
                    {
                        list($a, $range) = explode("=",$_SERVER['HTTP_RANGE']); 
                        str_replace($range, "-", $range); 
                        $size2 = $size-1; 
                        $new_length = $size-$range; 
                        header("HTTP/1.1 206 Partial Content"); 
                        header("Content-Length: $new_length"); 
                        header("Content-Range: bytes $range$size2/$size"); 
                    }
                    else
                    {
                        update_user_meta($uid, 'revo_credits', get_user_meta($uid, 'revo_credits', true)-$each_download);
                        $size2 = $size-1; 
                        header("Content-Range: bytes 0-$size2/$size"); 
                        header("Content-Length: ".$size);
                    }
                    if ($size == 0)
                    {
                        showMessage('aborted. zero file size');
                    } 
                    set_magic_quotes_runtime(0);
                    $maxSpeed = 200;            
                    $fp = fopen($url,"rb");
                    fseek($fp,$range);
                    while(!feof($fp) and (connection_status()==0)) 
                    { 
                        set_time_limit(0); 
                        print(fread($fp,1024*$maxSpeed)); 
                        flush(); 
                        ob_flush(); 
                        sleep(1); 
                    } 
                    fclose($fp); 
                    return((connection_status()==0) and !connection_aborted());
                }
                else
                    showMessage("not enough credit.");
            }
            else
                showMessage("login to download.");
        }
        else
        {
            wp_redirect(get_bloginfo('url'));
            exit;
        }
    }
    else
    {
        wp_redirect(get_bloginfo('url'));
        exit;
    }
} 
```

我认为标题是罪魁祸首！

* * *

*`Accept-ranges`使用和标题的恢复方法`Content-length`已经完成，并且在通过浏览器下载文件时有效。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:42:13.273

不确定其他下载如何工作，但您的范围实现错误，为什么？

你变得`range`像这样

```
$_SERVER['HTTP_RANGE'] = "bytes=1-200"; //sample range
$size = 1000; //sample size

list($a, $range) = explode("=", $_SERVER['HTTP_RANGE']);
str_replace($range, "-", $range);
$size2 = $size - 1;
$new_length = $size - $range;

// Used Print Insted of headers
print("HTTP/1.1 206 Partial Content\n");
print("Content-Length: $new_length\n");
print("Content-Range: bytes $range$size2/$size\n"); 
```

输出

```
HTTP/1.1 206 Partial Content
Content-Length: 999
Content-Range: bytes 1-200999/1000   <------ This is an issue 
```

我期待这样的事情

```
list($a, $range) = explode("=", $_SERVER['HTTP_RANGE']);
list($offset, $length) = explode("-", $range);
$length = $length - $offset;

// Used Print Insted of headers
print("HTTP/1.1 206 Partial Content\n");
print("Content-Length: $length\n");
printf('Content-Range: bytes %d-%d/%d', $offset, ($offset + $length), $size) 
```

输出

```
HTTP/1.1 206 Partial Content
Content-Length: 199
Content-Range: bytes 1-200/1000   <---- Properly Displayed 
```

# coldfusion - ColdFusion (Railo) QoQ - Nulls Last

> ID：15867049
> 
> 赞同：2
> 
> 时间：2013-04-07T19:53:27.523
> 
> 标签：coldfusion, railo, cfml, qoq

我的理解是`nulls last`QoQ 是不可能的。无论我是对行进行升序还是降序排序，我如何欺骗coldfusion最后对空值进行排序？

我已经尝试在查询的 SELECT 和 ORDER 部分使用 case，但看起来 CF 不喜欢它（在 railo 上运行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:17:29.747

可能有更好的选择，但一个简单的技巧是添加一个表示排序优先级的列。为具有非空值的记录分配比空值更高的优先级。然后只需先按优先级值排序，然后再按您想要的任何其他列。由于空值具有较低的优先级编号，因此它们将始终排在最后。

```
 <!--- 1 - non-null values 2 - null values --->
    SELECT 1 AS SortOrder, SomeColumn
    FROM   theQuery
    WHERE  SomeColumn IS NOT NULL
    UNION ALL
    SELECT 2 AS SortOrder, SomeColumn
    FROM   theQuery
    WHERE  SomeColumn IS NULL
    ORDER BY SortOrder, SomeColumn ASC 
```

（值得注意的是，您可以在数据库查询中使用`order by`而不是做类似的事情`union`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:21:09.413

ColdFusion 和 Railo 上的 QoQ 都具有非常有限的 SQL 词汇，并且没有任何内容涉及如何整理空值。因此，正如@Leigh 所建议的那样，添加另一列 - 没有任何空值 - 代表您想要的排序。

或者，如果可能的话，最好在数据库中处理所有这些。显然这并不总是可能的（因为您查询的记录集可能一开始就不是来自数据库;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:13:42.963

...还有另一种方法，但它依赖于 values 是`NULL`而不是 empty `''`。我在这里从记忆中开始，但这本质上是它，`||`仅在值非空时才使用，因此首先使用空值降序排序，最后得到值。

```
 <cfquery>
    SELECT *, '1' || #sortCol# as isNull
    FROM table
    ORDER BY isNull desc, #sortCol#
 </cfquery> 
```

**注意**我实际上并不提倡使用它，我不确定 CF 是否会以同样的方式处理它

# java - 字符串与Java中Map中的键进行比较

> ID：15867050
> 
> 赞同：0
> 
> 时间：2013-04-07T19:53:37.320
> 
> 标签：java, string, collections, map

我有一个集合 Map 作为（字符串，字符串）和字符串 inputText。您建议扫描 inputText 以检查它是否包含 Map 中的任何键。

例如，我有下一个：

```
 //hashmap is used - I don't need the order
    Map<String, String> mapOfStrings = new HashMap<String,String>();
    mapOfStrings.put("java","yep, java is very useful!");
    mapOfStrings.put("night","night coding is the routine");

    String inputText =  "what do you think about java?"
    String outputText = ""; //here should be an <answer>
    Set<String> keys = mapOfStrings.keySet();
    for (String key:keys){
        String value = mapOfStrings.get(key);
        //here it must uderstand, that the inputText contains "java" that equals to
        //the key="java" and put in outputText the correspondent value
    } 
```

据我所知，它不是 equals() 或 compareTo()。也许我应该以某种方式检查 inptuText 中的字符顺序？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T19:56:50.973

您可以使用以下内容：

```
for (String key:keys){
        String value = mapOfStrings.get(key);
        //here it must uderstand, that the inputText contains "java" that equals to
        //the key="java" and put in outputText the correspondent value
        if (inputText.contains(key))
        {
           outputText = value;
        }
    } 
```

# css - css 三列布局

> ID：15867053
> 
> 赞同：0
> 
> 时间：2013-04-07T19:54:05.663
> 
> 标签：css, border-layout

我正在尝试设置顶部、左侧、中心、右侧、底部的边框布局。我已经看过一些示例并尝试了它们，但它们似乎都不起作用。主要问题在于左、中和右列。我只能让两个 div 水平对齐，第三个总是低于页脚。我需要这个可以调整大小。优选地，中心窗格将填满直到边界。

我试过向左浮动和向右浮动，但没有任何区别。

这是我到目前为止所尝试的。 [http://jsfiddle.net/xQVWs/2/](http://jsfiddle.net/xQVWs/2/)

```
<body>
<div class="top-wrapper">
    <div class="content-wrapper">
        <header>
            header
        </header>
    </div>
</div>

<div class="mid-section">
    <div class="left-wrapper">
        Left Pane
    </div>
    <div class="main-content">
        Main pane
    </div>
    <div class="right-wrapper">
        right pane
    </div>
</div>

<div class="bottom-wrapper">
    <div class="content-wrapper">
        footer
    </div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:37:47.083

您可以`float:left`在前两个中间列上使用`float:right`，在第三列上使用 a。我会`overflow:hidden`在中间列的包装上放一个。

[http://jsfiddle.net/zer6N/1/](http://jsfiddle.net/zer6N/1/)

```
.mid-section
{
    background-color: blue;
    width: 100%;
    height:1000px;
    overflow:hidden;
}

.left-wrapper, .right-wrapper {
    background: #ffff00;
    height: 100%;
    min-height: 100%;
    width: 21%;
    display:block;
    float:left;
    margin:0;
}

.right-wrapper {
    background:#efefef;
    float:right;
}

.main-content {
    background-color: black;
    width: 58%;
    height: 100%;
    margin:0;
    float:left;
} 
```

# opengl - OpenGL窗口右上角的场景没有使用glOrtho

> ID：15867056
> 
> 赞同：0
> 
> 时间：2013-04-07T19:54:22.880
> 
> 标签：opengl, rendering

本质上，我将像素的原始缓冲区渲染到纹理上，该纹理被包裹到四边形上。

我的 GL 启动代码：

```
void INITOGL(int xres, int yres){
glShadeModel(GL_SMOOTH);
glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
glClearDepth(1);
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LEQUAL);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
//gluOrtho2D(0, xres, 0, yres);
} 
```

渲染循环代码：

```
void RenderCycle(){
    register MSG msg = {0};
    while(1){
        if(PeekMessage(&msg, 0, 0, 0, PM_REMOVE)){
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }

        glEnable(GL_TEXTURE_2D);

        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
        //glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);//GL_LINEAR
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE/*GL_DECAL*/);

        glTexImage2D( GL_TEXTURE_2D, 0, 3, 800, 600, 0, GL_RGB, GL_UNSIGNED_BYTE, framebuffer);//viewport virtual size

        glClear(GL_COLOR_BUFFER_B

IT | GL_DEPTH_BUFFER_BIT);

        glBegin(GL_POLYGON);
            glTexCoord2f(0.0f, 1.0f);
            glVertex3f(0, 0, 0.0f);
            glTexCoord2f(1.0f, 1.0f);
            glVertex3f( 800, 0, 0.0f);
            glTexCoord2f(1.0f, 0.0f);
            glVertex3f( 800, 600, 0.0f);
            glTexCoord2f(0.0f, 0.0f);
            glVertex3f( 0, 600, 0.0f);
        glEnd();

        glDisable(GL_TEXTURE_2D);

        SwapBuffers(hdc);
    }
   } 
```

调整大小功能：

```
void ResizeViewport(int height, int width){
    if(!height)height++;
    //glMatrixMode(GL_MODELVIEW);
    //glLoadIdentity();
    //gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.1f,100.0f);
    glMatrixMode(GL_PROJECTION);
    glViewport(0,0,width,height);
    //gluOrtho2D(0, width, 0, height);
    glLoadIdentity();
} 
```

保存 RGB 数据的缓冲区刚刚使用 for 循环设置为红色，这就是输出。

![渲染红色图像期间的窗口](https://i.stack.imgur.com/0Renw.png) 我是否不正确地设置了我的视口，没有正确缩放某些东西，或者我只是完全错过了一些东西？如果您需要更多信息，请询问。我已经给出了所有的 opengl 代码，其余的应该没有什么区别。理论上，它应该将红色渲染到整个屏幕。

# loops - ng-repeat 中的 AngularJs ng-repeat 返回相同的数据

> ID：15867059
> 
> 赞同：0
> 
> 时间：2013-04-07T19:54:33.520
> 
> 标签：loops, angularjs

我需要在 Angularjs 中对指令执行循环内循环。第一个循环是从 json 文件中获取链接，第二个循环是从以前的循环链接中循环数据。

但在第二个循环中，它返回相同的结果。

我创建了一个测试[plunker](http://plnkr.co/edit/QXAAIJAzUE3gyy98vLqp?p=preview)。你可以看到这里出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:01:37.657

当您迭代 jsonLinks 时，您将在每次迭代中覆盖 $scope.feeds。为了使它起作用，我建议将您的循环替换为：[Plunker](http://plnkr.co/edit/NfqjdtSDiRW7bGkEWZao?p=preview)

```
angular.forEach($scope.jsonLinks, function(jsonLink) {
    $scope.jsonLink = jsonLink.link;
    dataService.jsonp($scope.jsonLink).then(function(response){
      jsonLink.feeds = response.data.feed；
    });
});
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:21:03.347

我不得不清除我的旧答案，因为它没有解决问题。这里的主要问题是您在循环内进行异步调用，而没有引用可以存储提要的原始 jsonLink 对象。您将需要对提要的相应父对象的引用。可能通过找到它`id`，然后将提要添加到它。

# css - 右对齐 div

> ID：15867060
> 
> 赞同：1
> 
> 时间：2013-04-07T19:54:40.477
> 
> 标签：css, html, alignment

我正在尝试将 div 向右对齐，但它只显示在底部。

[问题](http://d.pr/i/1xW3)

**CSS：**

```
.homeWrapper{
    padding: 12px;
    width:auto;
}
.content_inner{
    height: auto;
    background-color: #6c93b8;
    margin:12px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
    clear:both;
}
.leftCol{
    display: inline-block;
    width:448px;
    background-color: red;
}
.rightCol{
    display: inline-block;
    width:430px;
    background-color: green;
    clear:both;
} 
```

**HTML：**

```
 <div class="homeWrapper">
            <div class="content_inner">
                <h1><span class="color_red">Contact</span> Agrilife</h1>
                    <div class="leftCol">
                        {{ template:body }}
                    </div>
                    <div class="rightCol">
                        text
                        text
                        text

                    </div>  
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:57:59.337

尝试使用浮动

```
.leftCol{
    float:left;
    width:448px;
    background-color: red;
}
.rightCol{
    float:right;
    width:430px;
    background-color: green;
    clear:both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:58:36.660

`float:right;`与_`.rightCol`

# jquery - Flexslider - 如何设置最小高度？

> ID：15867065
> 
> 赞同：1
> 
> 时间：2013-04-07T19:54:49.727
> 
> 标签：jquery, flexslider, css

我正在使用[Flexslider](http://www.woothemes.com/flexslider/)在我正在处理的网站上创建一个非常简单的全角幻灯片。

我的例子：[http ://hammr.co/3008537/4/index.html](http://hammr.co/3008537/4/index.html)

但是，我正在寻找的是让图像始终跨越窗口的整个宽度，但在达到设定值后停止调整高度，然后只剪切图像的一侧。

这正是这里发生的事情：[http](http://www.orient-express.com/web/orex/collection/trains/venice_simplon_orient_express.jsp) ://www.orient-express.com/web/orex/collection/trains/venice_simplon_orient_express.jsp - 达到一定大小后，图像不再调整大小，只是被切断。

我翻遍了那个网站上的脚本和 css，但无法弄清楚。显然，在幻灯片的任何位置设置最小高度会使它们变形。我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-31T09:50:58.570

我一直在寻找完全相同的东西！事实证明，他们在您的示例中使用了滑块图像的最小宽度：

```
.flexslider .slides img {min-width:1200px; } 
```

但是在他们的示例中，图像从右侧被切断，我希望图像始终居中，所以我找到了这篇文章：[http ://www.greywyvern.com/?post=323](http://www.greywyvern.com/?post=323)

假设我希望我的图像至少有 480 像素宽。如果我的屏幕宽度小于那个值，它将使我的图像居中，并且将左右两侧均匀切割。

我还使用响应式图像加载器脚本，因此较小的图像将加载到较小的屏幕上：[https ://github.com/scottjehl/picturefill](https://github.com/scottjehl/picturefill)

这是我对此设置的标记：

```
<div class="flexslider">
 <ul class="slides">
  <li class="slide full">
    <div class="centered">
        <?php
        $myimg['desktop'] = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full' );
        $myimg['tablet'] = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'large' );
        $myimg['phone'] = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'medium' );
        $alt = get_post_meta( get_post_thumbnail_id($post->ID) , '_wp_attachment_image_alt', true);
        if ( $myimg['desktop'][0] ): ?>
            <span data-picture="data-picture" data-alt="<?php echo $alt; ?>">
                <span class="sml" data-src="<?php echo $myimg['phone'][0]; ?>"></span>
                <span class="med" data-src="<?php echo $myimg['tablet'][0]; ?>" data-media="(min-width:480px)"></span>
                <span class="lrg" data-src="<?php echo $myimg['desktop'][0]; ?>" data-media="(min-width:760px)"></span>
                <!--[if (lt IE 9) & (!IEMobile)]>
                    <span data-src="<?php echo $myimg['desktop'][0]; ?>" alt="<?php echo $alt; ?>"></span>
                <![endif]-->
                <noscript>
                    <img src="<?php echo $myimg['desktop'][0]; ?>" alt="<?php echo $alt; ?>">
                </noscript>
            </span>
        <?php endif; ?>
    </div>
  </li>
 </ul>
</div> 
```

这是我用于此设置的 CSS：

```
@media only screen and (max-width : 480px) {
    .flexslider .slides > li.full {
        margin:0 auto !important;
        width:100%;
        height:auto;
        overflow:hidden;
    }   
    .flexslider .slides > li.full .centered {
        position:relative;
        right:50% !important;
        text-align:center;
    }   
    .flexslider .slides > li.full .centered img {
        min-width:480px !important;
        display:inline-block !important;
        margin-right:-100% !important;
    }
} 
```

# java - 在新线程中调用方法的简单方法

> ID：15867069
> 
> 赞同：16
> 
> 时间：2013-04-07T19:55:12.150
> 
> 标签：java, multithreading, javafx, ui-thread

我正在编写小应用程序，现在我发现了一个问题。我需要调用一个（稍后可能是两个）方法（此方法加载一些内容并返回结果）而不滞后于应用程序窗口。

`Executor`我找到了or之类的类`Callable`，但我不明白如何使用这些类。

您能否发布任何对我有帮助的解决方案？

感谢所有建议。

**编辑：**该方法*必须*返回结果。这个结果取决于参数。像这样的东西：

```
public static HtmlPage getPage(String page) throws FailingHttpStatusCodeException, MalformedURLException, IOException {
        return webClient.getPage(page);
} 
```

此方法大约工作 8-10 秒。执行此方法后，可以停止线程。但我需要每 2 分钟调用一次方法。

**编辑：**我用这个编辑了代码：

```
public static HtmlPage getPage(final String page) throws FailingHttpStatusCodeException, MalformedURLException, IOException {
    Thread thread = new Thread() {
        public void run() {
            try {
                loadedPage = webClient.getPage(page);
            } catch (FailingHttpStatusCodeException | IOException e) {
                e.printStackTrace();
            }
        }
    };
    thread.start();
    try {
        return loadedPage;
    } catch (Exception e) {
        return null;
    }

} 
```

With this code I get error again (even if I put `return null` out of *catch* block).

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-10-27T19:22:06.873

Since Java 8 you can use shorter form:

```
new Thread(() -> {
    // Insert some method call here.
}).start(); 
```

**Update:** Also, you could use method reference:

```
class Example {

    public static void main(String[] args){
        new Thread(Example::someMethod).start();
    }

    public static void someMethod(){
        // Insert some code here
    }

} 
```

You are able to use it when your argument list is the same as in required [@FunctionalInterface](https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html), e.g. [Runnable](https://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html) or [Callable](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html).

**Update 2:** I strongly recommend utilizing `java.util.concurrent.Executors#newSingleThreadExecutor()` for executing fire-and-forget tasks.

Example:

```
Executors
    .newSingleThreadExecutor()
    .submit(Example::someMethod); 
```

See more: [`Platform.runLater` and `Task` in JavaFX](https://stackoverflow.com/questions/13784333/platform-runlater-and-task-in-javafx), [Method References](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html).

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-07T19:59:46.470

Firstly, I would recommend looking at the [Java Thread Documentation](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html).

With a Thread, you can pass in an interface type called a `Runnable`. The documentation can be found [here](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html). A runnable is an object that has a `run` method. When you start a thread, it will call whatever code is in the `run` method of this runnable object. For example:

```
Thread t = new Thread(new Runnable() {
         @Override
         public void run() {
              // Insert some method call here.
         }
}); 
```

Now, what this means is when you call `t.start()`, it will run whatever code you need it to without lagging the main thread. This is called an `Asynchronous` method call, which means that it runs in parallel to any other thread you have open, like your `main` thread. :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-01T13:39:00.760

In Java 8 if there is no parameters required you can use:

```
new Thread(MyClass::doWork).start(); 
```

Or in case of parameters:

```
new Thread(() -> doWork(someParam)) 
```

# python - 将 Mysql bool 转换为 python True/False

> ID：15867070
> 
> 赞同：0
> 
> 时间：2013-04-07T19:55:15.260
> 
> 标签：python

我有以下代码：

```
new_file.write(("""
    <cleared_for_hd_vod>%(enable_est_hd)s</cleared_for_hd_vod>
    <cleared_for_hd_sale>%(enable_vod_hd)s</cleared_for_hd_sale>"""
        % update_data).lower()) 
```

这给了我以下信息：

```
<cleared_for_hd_vod>1</cleared_for_hd_vod>
<cleared_for_hd_sale>0</cleared_for_hd_sale> 
```

但是，我需要的是以下内容：

```
<cleared_for_hd_vod>true</cleared_for_hd_vod>
<cleared_for_hd_sale>false</cleared_for_hd_sale> 
```

有没有办法通过更改我当前使用的字符串格式来实现这一点（在这个问题的顶部）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:10:40.560

```
#update_data={"enable_vod_hd": "1", "enable_est_hd": "1"}
newfile.write((
    """<cleared_for_hd_vod>%(enable_est_hd)s</cleared_for_hd_vod>
       <cleared_for_hd_sale>%(enable_vod_hd)s</cleared_for_hd_sale>
    """ %
    ({
      'enable_est_hd': bool(update_data["enable_est_hd"]),
      'enable_vod_hd': bool(update_data["enable_vod_hd"])
    })
).lower()) 
```

# performance - 为什么 python 实现 miller-rabin 比 ruby 快很多？

> ID：15867073
> 
> 赞同：4
> 
> 时间：2013-04-07T19:55:38.610
> 
> 标签：performance, python-2.7, ruby-1.9.3

对于我的一个课程，我最近遇到了使用 miller-rabin 算法来识别 20 到 29000 之间的素数的 ruby​​ 和 python 实现。我很好奇为什么，即使它们看起来是相同的实现，python代码运行得更快。我已经读到 python 通常比 ruby​​ 快，但这是可以预料到的速度差异吗？

miller_rabin.rb

```
def miller_rabin(m,k)
  t = (m-1)/2;
  s = 1;  
  while(t%2==0)
    t/=2
    s+=1
  end

  for r in (0...k) 
   b = 0
   b = rand(m) while b==0
   prime = false
   y = (b**t) % m
   if(y ==1)
     prime = true
   end

   for i in (0...s)
      if y == (m-1)
        prime = true
        break
      else
        y = (y*y) % m
      end
   end

   if not prime
     return false
   end
  end
  return true
end

count = 0
for j in (20..29000)
   if(j%2==1 and miller_rabin(j,2))
     count+=1
   end
end
puts count 
```

miller_rabin.py：

```
import math
  import random

  def miller_rabin(m, k):
      s=1
      t = (m-1)/2
      while t%2 == 0:
          t /= 2
          s += 1

      for r in range(0,k):
          rand_num = random.randint(1,m-1)
          y = pow(rand_num, t, m)
          prime = False

          if (y == 1):
              prime = True

          for i in range(0,s):
              if (y == m-1):
                  prime = True
                  break
              else:
                  y = (y*y)%m

          if not prime:
              return False

      return True

  count = 0
  for j in range(20,29001):
    if j%2==1 and miller_rabin(j,2):
        count+=1

  print count 
```

当我在 Windows Powershell 中使用 Measure-Command 测量每个的执行时间时，我得到以下信息：

Python 2.7：
滴答声：4874403
总毫秒数：487.4403

Ruby 1.9.3：
滴答声：682232430
总毫秒数：68223.243

I would appreciate any insight anyone can give me into why their is such a huge difference

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T20:26:44.533

In ruby you are using `(a ** b) % c` to calculate the modulo of exponentiation. In Python, you are using the much more efficient three-element `pow` call whose docstring explicitly states:

> With three arguments, equivalent to `(x**y) % z`, but may be more efficient (e.g. for longs).

Whether you want to count the lack of such built-in operator against ruby is a matter of opinion. On the one hand, if ruby doesn't provide one, you might say that it's that much slower. On the other hand, you're not really testing the same thing algorithmically, so some would say that the comparison is not fair.

A quick googling reveals that [there are implementations](http://rosettacode.org/wiki/Modular_exponentiation#Ruby) of modulo exponentiation for ruby.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:09:52.230

I think these profile results should answer your question:

```
%self     total     self     wait    child    calls   name
96.81     43.05    43.05     0.00     0.00    17651   Fixnum#** 
1.98      0.88     0.88     0.00     0.00    17584   Bignum#% 
0.22     44.43     0.10     0.00    44.33    14490   Object#miller_rabin 
0.11      0.05     0.05     0.00     0.00    32142   <Class::Range>#allocate 
0.11      0.06     0.05     0.00     0.02    17658   Kernel#rand 
0.08     44.47     0.04     0.00    44.43    32142  *Range#each 
0.04      0.02     0.02     0.00     0.00    17658   Kernel#respond_to_missing? 
0.00     44.47     0.00     0.00    44.47        1   Kernel#load 
0.00     44.47     0.00     0.00    44.47        2   Global#[No method] 
0.00      0.00     0.00     0.00     0.00        2   IO#write 
0.00      0.00     0.00     0.00     0.00        1   Kernel#puts 
0.00      0.00     0.00     0.00     0.00        1   IO#puts 
0.00      0.00     0.00     0.00     0.00        2   IO#set_encoding 
0.00      0.00     0.00     0.00     0.00        1   Fixnum#to_s 
0.00      0.00     0.00     0.00     0.00        1   Module#method_added 
```

Looks like Ruby's `**` operator is slow as compared to Python.

It looks like `(b**t)` is often too big to fix in a `Fixnum`, so you are using `Bignum` (or arbitrary-precision) arithmetic, which is much slower.

# javascript - 如何判断一个元素是否是 JavaScript（非 jQuery）中另一个元素的子元素？

> ID：15867075
> 
> 赞同：2
> 
> 时间：2013-04-07T19:55:40.867
> 
> 标签：javascript, html, dom

如果我有 2 个 HTML 元素，如何轻松判断 1 是否是另一个的子元素？

```
var parent = document.getElementById('shapes');
var child = document.getElementById('star'); 
```

`child.getParentElement()`我可以与 like 比较的元素上是否有任何类型的功能`child.getParentElement() == parent`？

我知道`parent.children`给了我一组孩子，所以我想我可以使用 for 循环并将每个与`child`. 有没有更简单的单功能方法来做到这一点？

没有 jQuery 或其他库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T19:58:04.173

检查`.parentNode`孩子的情况。

```
if (child.parentNode === parent) {... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T19:59:26.587

内有`parentNode`属性`element`，因此您可以执行以下操作：

```
var parent = document.getElementById('shapes');
var child = document.getElementById('star');

var isChild = false;
var current = child;
while(current = current.parentNode)
{
    if(current == parent)
        isChild = true;
} 
```

`parent`如果元素位于 DOM 中的某个元素之上，它将返回 true `child`- 不仅是当它直接是其父元素时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T00:20:08.397

If you need only the direct child from parent element, take a look at below example:

```
<div id="div1">
    Parent
    <div id="div2">
        Child
        <div id="div3-1">
            N-child 1
        </div>
        <div id="div3-2">
            N-child 2
        </div>
    </div>
</div>
<input type="button" id="btn-action" value="Run" />
<div id="result"></div> 
```

JavaScript:

```
document.getElementById("btn-action").addEventListener("click",function(e) {
    var div1 = document.getElementById("div1"),
        div2 = document.getElementById("div2"),
        nchild1 = document.getElementById("div3-1"),
        nchild2 = document.getElementById("div3-2");

    document.getElementById("result").innerHTML =
        "<br/>div2 is child of div1? - " + fnIsChild(div1, div2) + 
        "<br/>div3-1 is child of div1? - " + fnIsChild(div1, nchild1) + 
        "<br/>div3-2 is child of div1? - " + fnIsChild(div1, nchild1);
});

function fnIsChild(parentElem, childElem) {
    var childNodes = parentElem.childNodes,
        max = childNodes.length,
        n;
    for(n = 0; n < max; n += 1) {
        if(childNodes[n] === childElem) return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T20:08:09.877

You can also use `child.parentElement` to get parent.

I also Want to point out you can view all such properties in `chrome web console`

![enter image description here](https://i.stack.imgur.com/ZXmvH.png)

# c++ - 使用 XCode 4 构建 Boost C++ 库（手动不工作）

> ID：15867082
> 
> 赞同：0
> 
> 时间：2013-04-07T19:56:23.260
> 
> 标签：c++, boost, xcode4

首先，我尝试过[http://www.boost.org/doc/libs/1_39_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_39_0/more/getting_started/unix-variants.html)并[在 Mac 上使用 Xcode 构建 Boost](https://stackoverflow.com/questions/893841/build-boost-on-mac-with-xcode)和[在 Xcode4 上使用 Boost](https://stackoverflow.com/questions/5288822/using-boost-with-xcode4)，但无济于事. 到目前为止，我已经在这上面花了大约 5 个小时，但没有运气。

在痛苦的细节中，我如何使用我的 XCode C++ 项目安装 boost。

到目前为止我已经尝试过：

选项 1\. XCode -> 文件 -> 将文件添加到“项目名称”

选项 2\. 根据[http://www.boost.org/doc/libs/1_39_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_39_0/more/getting_started/unix-variants.html)构建 XCode 。构建工作正常，但我无法让 XCode 识别它。

选项 3\. XCode -> Project -> Build Settings -> User Header Search Paths -> Add Build Setting... 并添加到 .hpp 文件的路径

选项 4\. XCode -> Targets -> Build Phases -> Link Binary With Libraries -> 添加所有已编译的库

一个有趣的观察。以下是 XCode 识别的：

```
#include "boost/asio.hpp" 
```

XCode 无法识别以下内容：

```
#include <boost/asio.hpp> 
```

![在此处输入图像描述](https://i.stack.imgur.com/oTaqC.png)

请不要向我发送与其他文章相同的旧链接。我花了几个小时阅读它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:19:10.950

因为头文件被识别为`#include "boost/asio.hpp"`但不是`#include <boost/asio.hpp>`，您可能在 Xcode 代码项目中进行了错误的设置。

Xcode 中有两个部分，您可以在其中将目录添加到包含路径：

*   “标题搜索路径”
*   “用户标题搜索路径”

您应该使用“标题搜索路径”进行提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:16:43.587

如果您将 .hpp 文件的实际路径添加到包含路径中，那么这就是您的问题。

你不包括`asio.hpp`，你包括`boost/asio.hpp`。所以包含路径不应该是包含`asio.hpp`的目录，而是包含`boost`子目录的目录。

# java - 拖动未修饰的 jDialog

> ID：15867086
> 
> 赞同：3
> 
> 时间：2013-04-07T19:56:27.960
> 
> 标签：java, swing, jframe, draggable, jdialog

所以，我有一个 jFrame，我正在其中构建聊天的主界面窗口。这个窗口/jFrame 有几个按钮，每个按钮都显示一个 jDialog（我之前在 Netbeans 中创建它，将 jDialog 拖到父级（？） jFrame 上）。

我的问题是两个窗口都设置为`undecorated = true`，所以我希望让用户通过单击并拖动窗口的一部分来随意拖动和移动所有窗口（在未装饰时模拟标题栏）

在所有 jFrames 中，我通过以下代码完成了这一点`initComponents()`：

```
 final Point point = new Point(0,0);        // Why 'final' and not simply Point point?     
    addMouseListener(new MouseAdapter() {  
        public void mousePressed(MouseEvent e) {  
            if(!e.isMetaDown()){  
                point.x = e.getX();  
                point.y = e.getY(); 
                System.out.println("Ratón pulsado: " + point.x + "," + point.y);
            }  
        }  
    });

    addMouseMotionListener(new MouseMotionAdapter() {  
        public void mouseDragged(MouseEvent e) {  
            if(!e.isMetaDown() &&  point.y <= 17){  //Coordinates of title bar, any X and up to 17px from the top border
                Point p = getLocation();  
                setLocation(p.x + e.getX() - point.x, p.y + e.getY() - point.y); 
                System.out.println("Ratón movido: " + (p.x + e.getX() - point.x) + "," + (p.y + e.getY() - point.y));
            }  
        }  
    }); 
```

但是，我不知道如何在 jDialog 中使用此代码。当我在导航器中右键单击它并选择自定义代码时，我无法将其粘贴到那里，因为整个 jFrame 停止工作。我是 jFrames 的 jDialogs 子项的新手，所以请帮我一些指导方针:) 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:30:43.707

那么，作为@mKorbel建议，我前往了[这里](https://stackoverflow.com/questions/12278919/can-i-create-a-window-in-java-with-no-caption-buttons/12280616#12280616)，我找到了一个不错的类叫`ComponentMover`这让我做到这一点。所以我保存的链路找回并给予好评的时候，我能够做到这一点，我需要2个声誉。

我必须确保它以我想要的方式完美运行，但看起来很棒！谢谢！

# java - 爪哇。限制日期的值

> ID：15867088
> 
> 赞同：1
> 
> 时间：2013-04-07T19:56:36.800
> 
> 标签：java, exception, date, int, restrict

对你们来说，这似乎是一个愚蠢的问题，但我是一个 java 菜鸟，仍然试图掌握整个概念。所以，我基本上有一个简单的剧院管理系统，允许我将组添加到数据库中。对于每个组，您可以添加每个具有唯一学生 ID 和名称的学生。您还可以将排练日期添加到组中。这两个都存储在单独的链表中。这是我的排练对象：

```
public Rehearsal(int d, int m, int y) {
    day = d;
    month = m;
    year = y;
} 
```

这是组类中的 addRehearsal 方法：

```
public void addRehearsal(int d, int m, int y) {
    Rehearsal newrehearsal = new Rehearsal(d, m, y);
    if (!RehearsalDates.contains(newrehearsal)) {
        RehearsalDates.add(newrehearsal);
    }
    else
        JOptionPane.showMessageDialog(null, "Rehearsal already exists for this group!", "Error", JOptionPane.WARNING_MESSAGE);
} 
```

我的问题是，我如何以及在哪里可以限制可以输入的值。这意味着，如果为 int d > 31 或 int m > 12 输入的值，程序会以消息对话框的形式给出错误。这对于年份来说并不是必需的，因为允许用户创建排练日期过去和未来。

谢谢你们的帮助：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:24:08.253

Validating dates is more complex than checking each parameter. For example, calling it with `(29, 2, 2000)` would be invalid (recall that 2000 was *not* a leap year), even though all parameters are "within range".

The only sane way to check is to attempt to parse a Date from the parameters and catch the exception. There are a couple of ways to do this, but the simplest is this:

```
public Rehearsal(int d, int m, int y) {
    try {
        sdf = new SimpleDateFormat("d-M-yyyy");
        sdf.setLenient(false);
        sdf.parse(d + "-" + m + "-" + y);
    } catch (ParseException e) {
        // the parameters are not valid
    }
    // rest of code
} 
```

Note the call to [`setLenient()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29), which is required, otherwise invalid input "rolls over" to the next available valid date - for example `36-12-2012` would be parsed as `05-01-2013`.

The best place to put this code would be in the constructor, throwing an exception:

```
public Rehearsal(int d, int m, int y) {
    try {
        sdf = new SimpleDateFormat("d-M-yyyy");
        sdf.setLenient(false);
        sdf.parse(d + "-" + m + "-" + y);
    } catch (ParseException e) {
        // the parameters are not valid
        throw new IllegalArgumentException();
    }
    day = d;
    month = m;
    year = y;
} 
```

And you would catch this wherever it is called.

```
Rehearsal newrehearsal;
try {
    newrehearsal = new Rehearsal(1, 2, 3);            
} catch (IllegalArgumentException ex) {
    JOptionPane.showMessageDialog(null, "Invalid date input!", "Error", JOptionPane.WARNING_MESSAGE);
    return;
}
// rest of method 
```

* * *

An even better design would be to pass a Date object, putting the onus on the caller to validate input, and there would be less throw and catch code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:09:58.660

为什么不`IllegalArgumentException`从构造函数中抛出一个`Rehearsal`然后在`addRehearsal`方法中捕获它：

```
public Rehearsal(int d, int m, int y) {
    if (d < 1 || d > 31) {
        throw new IllegalArgumentException("Invalid day");
    }
    if (m < 1 || m > 12) {
        throw new IllegalArgumentException("Invalid month");
    }
    day = d;
    month = m;
    year = y;
} 
```

并在`addRehearsal`方法中捕获构造异常：

```
Rehearsal newrehearsal;
try {
    newrehearsal = new Rehearsal(1, 2, 3);            
} catch (IllegalArgumentException ex) {
    JOptionPane.showMessageDialog(null, "Invalid date input!", "Error", JOptionPane.WARNING_MESSAGE);
    return;
} 
```

这应该是一个中间解决方案 - 它肯定会防止创建无效日期。

然后，您可能希望稍后在输入上添加侦听器，以首先防止无效数据。

最后，您可能要考虑使用`Calendar`而不是自定义日期对象。

# php - 无法将 mysqli 对象传递给 PHP 中的类

> ID：15867091
> 
> 赞同：0
> 
> 时间：2013-04-07T19:56:42.567
> 
> 标签：php, object, mysqli

所以我在 php 中处理一个简单的用户类，它有一个包含 mysqli 对象的类变量，但是我不断收到错误：

> *致命错误：在第 X 行** /classes/user.php中的非对象上调用成员函数 real_escape_string()

我已经检查了所有内容，它应该可以工作，但它没有。不知何故。这是我的代码：

```
namespace bibliotheek;

class user
{
    private $mysql;

    private $logged_in = false;
    private $user_data = null;      //ARRAY: user_id, e-mail, password, bevoegdheid, naam, achternaam, adres, postcode, stad

    function __construct(\mysqli $mysql, $salt)
    {
        $this->mysql = $mysql;
    }

    public function login($email, $pass, $hash = false)
    {
        $email = $this->mysql->real_escape_string($email);
        if($hash == false)
            $pass  = sha1($this->salt.$pass);

        $query  = "SELECT *
                   FROM gebruikers
                   WHERE gebruikers.email = '$email' AND gebruikers.password = '$pass'";

        $result    = $this->mysql->query($query);
        $user_data = $result->fetch_assoc();

        if($user_data == null)
            return;

        $this->logged_in = true;
        $this->user_data = $user_data;
        $this->create_cookies($email, $pass);
    }
} 
```

这就是 mysqli 对象传递给类的方式：

```
$mysql  = new mysqli($cfg['mysql_server'], $cfg['username'], $cfg['password'], $cfg['database']);
$user   = new bibliotheek\user($mysql, $cfg['salt']); 
```

mysql登录数据是正确的，我已经确定了。

我必须在这里遗漏一些非常明显的东西，但我就是看不到它。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:21:13.947

这就是它应该的样子

```
error_reporting(E_ALL);

$mysql  = new mysqli($cfg['mysql_server'], $cfg['username'], $cfg['password'], $cfg['database']);
if ( !$mysql )
{
    throw new Exception(mysqli_connect_error()));
}
$user = new bibliotheek\user($mysql, $cfg['salt']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:05:39.623

我真的很愚蠢，当我在这里发布代码时，我稍微压缩了我的代码，我省略了这部分：

```
 $this->mysql = $mysql;
    $this->mysql = $salt; 
```

现在杀了我。

# netbeans - 未找到 Netbeans Web 服务客户端

> ID：15867093
> 
> 赞同：2
> 
> 时间：2013-04-07T19:56:50.230
> 
> 标签：netbeans, webservice-client

我以前一直使用 eclipse，但我是第一次使用 Netbeans，因为它与 Web Service 客户端集成。

但是，在学习了多个教程之后，添加 Web 服务客户端的方法是：

[https://netbeans.org/kb/docs/websvc/flower_swing.html](https://netbeans.org/kb/docs/websvc/flower_swing.html)

1.  做一个新项目
2.  右键单击您的项目，New->Other->Other->Web Service Client

但是，我没有可用的 Web 服务客户端选项，不确定我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T05:27:36.030

请提及您拥有的 net beans 版本。您应该使用更新版本的 IDE 来使用最新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-21T19:55:58.347

对于像我这样会面临这个问题的其他开发人员，我将在这里留下我的答案。我目前正在使用 Apache NetBeans IDE 11.0，它位于`Web Services`->`Web Service Client`中。如果您仍然找不到它，只需使用过滤器功能。我用过滤器找到了它。

# mysql - 我需要从几行创建几列

> ID：15867097
> 
> 赞同：-1
> 
> 时间：2013-04-07T19:57:00.270
> 
> 标签：mysql, case

我有一个我从另一个插件使用的 MYSQL 表。该表有两个字段，称为 element_value 和 element_label。

element_value 包含我要为其创建报​​告的 2500 人的姓名、地址、城市、州和邮政编码。但是，我想获取每一行并创建它自己的列。

例如，该表如下所示：

```
**element_value**
John Smith
100 Elm Street
Columbus
Ohio
13579 
```

element_label 用作索引。element_label 1 与名称有关，2 与地址有关，3 与城市有关，等等。

我希望能够在列中显示数据：

```
Name       Address        City       State       Zip
John Smith 100 Elm Street Columbus   Ohio        13579 
```

谁能想到如何使用 MYSQL 语句来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:21:27.847

这种从行到列的转换称为*枢轴*。MySQL 没有数据透视函数，但可以使用带有`CASE`表达式的聚合函数来复制它。

您可以使用以下内容：

```
select
  max(case when element_label = 'Name' then element_value end) Name,
  max(case when element_label = 'Address' then element_value end) Address,
  max(case when element_label = 'State' then element_value end) State,
  max(case when element_label = 'City' then element_value end) City,
  max(case when element_label = 'Zip' then element_value end) Zip
from yt 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/700749/1)。

如果您有未知数量的值要转换为列，则可以使用准备好的语句来生成动态 sql：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(CASE WHEN element_label = ''',
      element_label,
      ''' THEN element_value else null END) AS `',
      element_label, '`'
    )
  ) INTO @sql
FROM yt;

SET @sql 
  = CONCAT('SELECT ', @sql, ' 
            from yt
            ');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/700749/3)。两个查询都给出了结果：

```
|       NAME |        ADDRESS |     CITY | STATE |   ZIP |
----------------------------------------------------------
| John Smith | 100 Elm Street | Columbus |  Ohio | 13579 | 
```

通常，您将有一个列作为分组依据。例如，如果您有一个 record_id 列，那么您将添加一个`GROUP BY record_id`，因此您将返回多行结果。

# c++ - C++ 没有可用的适当默认构造函数 - 继承的模板化构造函数，不带参数

> ID：15867100
> 
> 赞同：2
> 
> 时间：2013-04-07T19:57:17.113
> 
> 标签：c++, templates, inheritance

我已经查看了十几个带有短语的 qst `no appropriate default constructor available`，但对我自己的问题没有任何帮助。

这是一个非常基本的 C++ qst（因为我仍在学习绳索），如果您对它的简单性感到困惑，请提前抱歉。我正在尝试继承一个具有不带参数的模板化构造函数的类。如：

```
class Base {
public:

template<class T>
Base() {
  T *t = this;
  //more irrelevant stuff
}

} 
```

我试过了

```
class Derived : public Base {
public:
  Derived() : Base() {

  }
} 
```

和

```
class Derived : public Base {
public:
  Derived() {

  }
} 
```

无济于事。在这两种情况下，我都会收到错误消息`no appropriate default constructor available`。如何去做这件事？如果这是不可能的，你能解释为什么吗？

当我设置我的构造函数时它起作用了`template<class T> Base(T *t)`（将模板参数作为参数）。

p.s. In case it matters, in my code I am also inheriting `Derived` by another class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:20:19.340

there is no syntax for accessing the default constructor in

```
class blah_t
{
public:
    template< class other_t > blah_t() {}
}; 
```

there also some other ways to make the default constructor inaccessible, e.g.

```
class blah_t
{
public:
    blah_t() {}
    blah_t( int = 666 ) {}
}; 
```

as the holy standard explains it, constructors don't have names…

but, back to the original question, in order to be able to specify the template argument, you need some *ordinary function argument* that involves the template parameter type

# java - RSS 阅读器没有收到一些标签

> ID：15867104
> 
> 赞同：0
> 
> 时间：2013-04-07T19:57:34.350
> 
> 标签：java, android, rss

这是我之前的问题的一个继续问题：[RSS Reader NullPointerException](https://stackoverflow.com/questions/15866584/rss-reader-nullpointerexception)

在我的应用程序中，在我的列表中，有时我没有得到 RSS 的标题，有时没有得到描述（和图像）。这里最奇怪的是我对所有链接都没有问题。例如，如果我解析原始教程的链接（[http://www.mobilenations.com/rss/mb.xml](http://www.mobilenations.com/rss/mb.xml)），一切正常。但是当我使用其他链接时，我遇到了上述问题......

这是我的 DOMParser 类：

```
package com.td.rssreader.parser;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.jsoup.Jsoup;
import org.jsoup.select.Elements;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

public class DOMParser {

    private RSSFeed _feed = new RSSFeed();

    public RSSFeed parseXml(String xml) {

        // _feed.clearList();

        URL url = null;
        try {
            url = new URL(xml);
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        }

        try {
            // Create required instances
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();

            // Parse the xml
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            // Get all <item> tags.
            NodeList nl = doc.getElementsByTagName("item");
            int length = nl.getLength();

            for (int i = 0; i < length; i++) {
                Node currentNode = nl.item(i);
                RSSItem _item = new RSSItem();

                NodeList nchild = currentNode.getChildNodes();
                int clength = nchild.getLength();

                // Get the required elements from each Item
                for (int j = 1; j < clength; j = j + 2) {

                    Node thisNode = nchild.item(j);
                    String theString = null;

                      if (thisNode != null && thisNode.getFirstChild() != null) {
                            theString = thisNode.getFirstChild().getNodeValue();
                        }

                    if (theString != null) {

                        String nodeName = thisNode.getNodeName();

                        if ("title".equals(nodeName)) {
                            // Node name is equals to 'title' so set the Node
                            // value to the Title in the RSSItem.
                            _item.setTitle(theString);
                        }

                        else if ("description".equals(nodeName)) {
                            _item.setDescription(theString);

                            // Parse the html description to get the image url
                            String html = theString;
                            org.jsoup.nodes.Document docHtml = Jsoup
                                    .parse(html);
                            Elements imgEle = docHtml.select("img");
                            _item.setImage(imgEle.attr("src"));
                        }
//description
                        else if ("pubDate".equals(nodeName)) {

                            // We replace the plus and zero's in the date with
                            // empty string
                            String formatedDate = theString.replace(" +0000",
                                    "");
                            _item.setDate(formatedDate);
                        }

                        if ("link".equals(nodeName)) {
                            // Node name is equals to 'title' so set the Node
                            // value to the Title in the RSSItem.
                            _item.setLink(theString);
                        }
                    }
                }

                // add item to the list
                _feed.addItem(_item);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        // Return the final feed once all the Items are added to the RSSFeed
        // Object(_feed).
        return _feed;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:48:20.323

一旦您循环遍历项目节点，您就会有另一个循环尝试遍历子元素（以设置标题、描述等）。

但是您的循环从索引 1 开始，并且增加了 2：

```
// Get the required elements from each Item
            for (int j = 1; j < clength; j = j + 2) { 
```

This means it only checks position 1,3,5,etc

Looking at the xml posted, that shows why you get different data each item. Set the loop to index at 0 and increase by just 1.

# php - 如何使用 PHP 更改 innerHTML？

> ID：15867105
> 
> 赞同：7
> 
> 时间：2013-04-07T19:57:36.543
> 
> 标签：php, innerhtml

我想用 PHP 代码更改 innerHTML。但我无法让它工作，我不明白为什么。我希望它更改页面上的一些文本，但来自另一个文件。所以我认为我可以使用这个：

```
document.getElementById ("page"). innerHTML = "<? php echo $ home?>"; 
```

但它不起作用。

这是我的代码：

```
<?php
$home = file_get_contents("home.php");
?>
<script type="text/javascript">
    function ChangePage(page)
    {
       if(page == "home")
            {
            document.getElementById("page").innerHTML = "<?php echo $home ?";
            }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:05:02.270

有很多小错别字。尝试删除 $ 和 'home' 之间以及 'php' 之前的空格。这是正确的说法：

```
document.getElementById ("page"). innerHTML = "<?php echo $home?>"; 
```

另外，你的结束 php 标签在哪里？

```
<?php
$home = file_get_contents("home.php");
?>
<script type="text/javascript">
    function ChangePage(page)
    {
       if(page == "home")
            {
            document.getElementById("page").innerHTML = "<?php echo $home; ?>";
            }
        }
</script> 
```

虽然这是一个不好的做法。为什么要这样做而不是简单地将 php 加载到正确的位置？此外，您确实意识到“页面”应该是您的 html 中预先存在的 div 的 id，对吗？像这样的东西会更好：

```
<html>
  <body>
    <div id = "page">
      <?php echo file_get_contents("home.php"); ?>
    </div>
  </body>
</html> 
```

# jsf - 渲染时使用 Jsf 组件树或 ManagedBeans？

> ID：15867109
> 
> 赞同：0
> 
> 时间：2013-04-07T19:58:03.307
> 
> 标签：jsf

在渲染响应阶段，jsf 机制使用托管 bean 或组件树来生成表单值或视图？我认为如果使用验证失败树，则使用 bean。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:39:55.390

一般两者都用；由组件决定是否（以及何时）读取哪些 EL 表达式。

验证/转换失败的组件通常会使用未转换的提交值，其他组件将评估 EL 表达式。不受 EL 表达式约束的组件状态将来自组件实例，即使同一组件上的其他状态可能会从 EL 表达式中重新读取。

# css - 连续 3 张图像以容器为中心

> ID：15867113
> 
> 赞同：2
> 
> 时间：2013-04-07T19:58:15.367
> 
> 标签：css, image, html, positioning, center

CSS

```
.contain {
max-width:960px;
text-align:center;
}

.category {
position:relative;
display: inline-block;
float:left;
padding:10px;
}

.category2 {
position:relative;
display: inline-block;
pading:10px;
}
.category3 {
position:relative;
display: inline-block;
float:right;
margin-right:50%;
padding:10px;
} 
```

HTML

```
 <div align="center" class="category">
        <img src="gemstoneshomebutton.png" />
        </div>
        <div align="center" class="category2">
        <img src="dichroichomebutton.png" />
        </div>
        <div align="center" class="category3">
        <img src="filigreehomebutton.png" />

</div> 
```

我正在尝试在容器 div 内对齐 3 个 309 像素宽、111 像素高的图像，它们没有对齐中心，并且第三个图像跳到其他两个图像下方。我尝试调整容器和 3 个 div 的宽度，我尝试了表格并更改了实际 html 的宽度，但没有成功。

这是我第一次使用 div，我认为它们会更容易，也许我的数学在分配宽度时是关闭的，或者我只是把它的结构都错了。！[这是我想要实现的一个例子，图片中的三个类别在这里。] [http://i49.tinypic.com/2r2uqso.jpg](http://i49.tinypic.com/2r2uqso.jpg)

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-20T11:13:59.280

Don't forget to add 'alt' attribute in the img tag! It is especially important for people who a partially sighted or blind.

[http://www.myblogsplace.com/images-alt-text](http://www.myblogsplace.com/images-alt-text)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T20:02:34.047

CSS

```
.contain {
    max-width:960px;
    text-align:center;
}

.category {
   position:relative;
   display: inline-block;
   float:left;
   padding:10px;
} 
```

HTML

```
<div align="center" class="category">
   <img src="gemstoneshomebutton.png" />
</div>
<div align="center" class="category">
   <img src="dichroichomebutton.png" />
</div>
<div align="center" class="category">
   <img src="filigreehomebutton.png" />    
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-09T19:38:47.810

Yes the alt attribute is really important. It is actually used by "screen reader" software so when a person is listening to the content of a webpage, like a blind person, can interact with that specific element. All images should have this attribute so it is accessible.

# javascript - 使用 javascript & jquery 访问 header 属性

> ID：15867119
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:58:36.637
> 
> 标签：javascript, jquery

我正在尝试使用放置在头部的脚本访问头部标记的属性。

```
<head myattr="123">
    <script src="/Scripts/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        alert($("head").attr("myattr"));

    </script>
    ... 
```

我不能在 .net 中使用包含或 <%#"123%> 或 <%="123%> “因为代码执行顺序和页眉绑定。所以我只是从代码隐藏中设置 header 属性。

无论如何，问题是：我解决问题的方式有问题吗？有没有可能当我打电话时`alert($("head").attr("myattr"));`我能得到`undefined`回应？

我假设由于在调用脚本`<head myattr="123">`之前发生`alert(...)`，我不会收到`undefined`警报......我假设错了吗？

编辑：忘了提。不能使用`$(document).ready(...`它必须在标题中执行。我基本上担心是否有任何未知数，例如我没有考虑的兼容性问题等。也许有些浏览器会返回 undefined 有些不是？也许在某些情况下它可能执行得太早？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:00:21.713

我不认为你会得到一个未定义的，因为正如你所说，它在 HTML 中高于你的脚本。但是，像这样将您的电话包装在 $(document).ready 中并没有什么坏处。

```
$(document).ready(function () {
   alert($("head").attr("myattr"));
}) 
```

只要设置了“myattr”，它就永远不会返回 undefined。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:05:58.217

很好，因为您的脚本在 head 标签之后/之内。但是，`myattr`会使您的 HTML 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:01:19.357

```
alert($("head:first").attr("myattr")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T20:01:56.723

在`alert()`加载 DOM 后进行调用，如下所示：

```
$(function() {
     alert(...)
}); 
```

# character - 用制表符替换最后十个空格

> ID：15867120
> 
> 赞同：-2
> 
> 时间：2013-04-07T19:58:37.393
> 
> 标签：character, vi, replace

我有一个文件，其中每一行包含由单个空格分隔的数据。空格的总数因行而异，但总是大于 10。我希望只用制表符替换最后十个空格。最后十个之前存在的任何空格都应保持不变。

我怎样才能使用 vi 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:18:17.333

You can make use of regular expressions for this purpose. Regex can be:

```
<Ten Spaces>$ 
```

or

```
[ ]{10}$ 
```

$ indicates search from the end.

# android-asynctask - 致命异常 asynctask #2 doInBackground

> ID：15867124
> 
> 赞同：0
> 
> 时间：2013-04-07T19:59:11.980
> 
> 标签：android-asynctask

此代码崩溃。为什么？

```
@Override
    protected String doInBackground(String... params) {

        try {
            image_compress = image_compress(changed_image);

            array_image.add(Effects_change.doColorFilter((image_compress), 0,
                    1, 0));
            array_image.add(Effects_change.doColorFilter((image_compress), 0,
                    0, 1));

            array_image.add(Effects_change.doColorFilter((image_compress), 0,
                    1.2, 1.8));

            array_image.add(Effects_change.doGreyscale(image_compress));
            array_image.add(Effects_change.doGamma((image_compress), 0.8, 0.8,
                    0.8));
            array_image.add(Effects_change.doGamma((image_compress), 1.8, 1.8,
                    1.8));
            array_image.add(Effects_change.doColorFilter((image_compress), 1.0,
                    0, 0));

            array_image.add(Effects_change.doColorFilter((image_compress), 0.5,
                    0.5, 0.5));
            array_image.add(Effects_change.doColorFilter((image_compress), 1.5,
                    1.5, 1.5));

            array_image.add(Effects_change.createSepiaToningEffect(
                    (image_compress), 100, 1.5, 0.6, 0.12));
            array_image.add(Effects_change.createSepiaToningEffect(
                    (image_compress), 100, 0.88, 1.45, 1.43));

            array_image.add(Effects_change.createSepiaToningEffect(
                    (image_compress), 100, 1.2, 0.87, 1.8));
            array_image.add(Effects_change.decreaseColorDepth((image_compress),
                    32));

            array_image.add(Effects_change.decreaseColorDepth((image_compress),
                    120));

            array_image.add(Effects_change.applyReflection(image_compress));
            //array_image.add(Effects_change.applynewReflection(image_compress));
            array_image.add(Effects_change.applyFleaEffect(image_compress));

            array_image.add(Effects_change.sharpen((image_compress), 15));

            array_image.add(Effects_change.createSepiaToningEffect(
                    (image_compress), 200, 0.50, 0.6, 0.20));
            array_image.add(Effects_change.createSepiaToningEffect(
                    (image_compress), 150, 1.2, 0.97, 2.1));

            array_image.add(Effects_change.applyGaussianBlur(image_compress));
            array_image.add(Effects_change.applyBlackFilter(image_compress));
            array_image.add(Effects_change.applyMeanRemoval(image_compress));

            array_image.add(Effects_change.applySnowEffect(image_compress));

            array_image.add(Effects_change.smooth((image_compress), 8));
            array_image.add(Effects_change.CharcoalEffect(image_compress));

            array_image.add(Effects_change.tintImage((image_compress), 80));
            array_image.add(Effects_change.roundCorner((image_compress), 45));

            array_image.add(Effects_change.boost((image_compress), 1,
                    (float) 1.5));
            array_image.add(Effects_change.boost((image_compress), 2,
                    (float) 0.30));
            array_image.add(Effects_change.boost((image_compress), 3,
                    (float) 0.67));
            array_image.add(Effects_change.emboss(image_compress));

            array_image.add(Effects_change.boost((image_compress), 1,
                    (float) .50));

            array_image.add(Effects_change.boost((image_compress), 2,
                    (float) 0.10));
            array_image.add(Effects_change.boost((image_compress), 3,
                    (float) 1.5));
            array_image.add(Effects_change.engrave(image_compress));
            array_image.add(Effects_change.applyHueFilter((image_compress), 3));

            array_image.add(Effects_change
                    .changeToNegativeEffect(image_compress));
            array_image.add(Effects_change.SketchImage(image_compress));

            array_image.add(Effects_change.doColorFilter(image_compress, 1.8, 1.2, 1));

            array_image.add(Effects_change.tintImage((image_compress), 180));

            array_image.add(Effects_change.applySaturationFilter(image_compress, 2));

            array_image.add(Effects_change.createContrast(image_compress, 100));

            array_image.add(Effects_change.applySaturationFilter((image_compress), 90));
            // array_image.add(Effects_change.posterize(image_compress, 10));

            // setProgress(""+(int)((total*100)/lenghtOfFile));

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //array_image.add(Effects_change.setSepiaColorFilter(image_compress));

        return null;
    }

    @Override
    public void onPostExecute(String result) {
        super.onPostExecute(result);

        g.setAdapter(new ImageAdapter(Image_add_effects.this));
        g.setOnItemSelectedListener(Image_add_effects.this);

        try {
            pb.dismiss();
            pb=null;
        } catch (Exception e) {
            // TODO: handle exception
        }
    }

} 
```

这是日志

```
04-07 22:36:08.450: W/dalvikvm(18429): threadid=13: thread exiting with uncaught exception(group=0x41fe82a0)
04-07 22:36:08.450: E/AndroidRuntime(18429): FATAL EXCEPTION: AsyncTask #2
04-07 22:36:08.450: E/AndroidRuntime(18429): java.lang.RuntimeException: An error occured while executing doInBackground()
04-07 22:36:08.450: E/AndroidRuntime(18429):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-07 22:36:08.450: E/AndroidRuntime(18429):    at java.lang.Thread.run(Thread.java:856)
04-07 22:36:08.450: E/AndroidRuntime(18429): Caused by: java.lang.OutOfMemoryError 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:06:30.540

原因是`java.lang.OutOfMemoryError`您的计算占用了太多 RAM。

但是，如果不知道您在做什么，就很难说出究竟是什么导致了错误。可能您创建了太多图像/位图。

以下是有关您的应用程序可用多少 RAM 的信息：[https ://stackoverflow.com/a/9940415/247013](https://stackoverflow.com/a/9940415/247013)

调查思路：

*   使用`Bitmap.recycle()`- 每当您不需要处理过的位图时调用它
*   尽量不要将图像存储在 RAM 中，而是将它们保存到文件中
*   看起来您正在尝试预先为任何可能的效果预先创建图像 - 考虑重新架构 - 仅在用户明确要求时才执行一种效果（按需）。

# django - 将 gnotty 作为 django 项目的一部分部署并获得：gaierror: [Errno -5] No address associated with hostname

> ID：15867130
> 
> 赞同：0
> 
> 时间：2013-04-07T19:59:32.117
> 
> 标签：django, gevent

尝试部署一个包含 gnotty 的 django 项目，该项目在本地主机上运行良好，但是一旦我部署并将 GNOTTY_HOST 更改为我的域，将 GNOTTY_PORT 更改为 80，将 GNOTTY_DAEMON 更改为 True，以及 pid具有 pid 文件的绝对路径的文件。现在，当我尝试通过访问 mydomain.net/irc/ 然后使用昵称连接来使用该应用程序时，它会加载，然后我得到“连接时间太长，请重试”，所以我尝试运行 manage.py gnottify看看我是否得到了一个错误，它是：gnotty/0.2.5 [Bot: BaseBot] 在[http://mydomain.net/:80](http://mydomain.net/:80)上监听 gaierror: [Errno -5] 没有与主机名关联的地址: (' [http ://mydomain.net/](http://mydomain.net/) ', 80) 异常 KeyError: KeyError(29425008,) 在被忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:09:51.597

听起来好像dns没有解决。您是否尝试过使用我们的 nslookup 进行挖掘？

# meteor - 如何运行特定版本的 Meteor？

> ID：15867135
> 
> 赞同：18
> 
> 时间：2013-04-07T19:59:54.507
> 
> 标签：meteor

我已经更新到 0.6.0 但想在 0.5.8 中运行我的项目。所以当我运行时：

> 流星——发布 0.5.8

它返回

> 0.5.8：未知版本。

定位特定版本的正确格式是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-07T21:45:40.330

您需要使用陨石才能使用旧版本：[https](https://github.com/oortcloud/meteorite) ://github.com/oortcloud/meteorite 。目前`--release`无法将旧版本的流星定位到 0.6.0。

通过安装陨石

```
npm install -g meteorite 
```

然后在您的项目中运行`mrt`，以便它允许陨石将项目本地化为一个版本的流星。

You will notice meteorite has created a smart.json in your project. Edit the `smart.json` it creates to something like

```
{
    "meteor": {
    "tag": "v0.5.8"
} 
```

Then just run `mrt` to get it running meteor version `0.5.8`. Only that project would be affected. So your other projects can still run 0.6.0

Of note is meteorite is also very helpful. It allows you to use the packages over at [http://atmosphere.meteor.com/](http://atmosphere.meteor.com/) in your project.

Update: To use versions above 0.6.0 on your meteor use --release. e.g

```
meteor --release 0.6.1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T22:24:53.120

For Meteor releases above 0.6.0, you can add the `--release` tag to any `meteor` command:

```
meteor create test --release 0.6.0 
```

Meteorite can easily pull down earlier releases:

```
mrt create test --tag v0.5.9 
```

The result is a "smart.json" file that will install the previous Meteor version when you run `mrt`. You could also manually edit the "smart.json" file:

```
{
  "meteor": {
    "git": "https://github.com/meteor/meteor.git",
    "tag": "v0.5.9"
  },
  "packages": {}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T21:31:46.227

不幸的是，您不能针对 0.6.0 之前的任何版本，此功能只会在 Meteor 的下一个版本发布时提供帮助。

# silverlight - 以编程方式将 Span 插入 TextBlock

> ID：15867139
> 
> 赞同：1
> 
> 时间：2013-04-07T20:00:23.067
> 
> 标签：silverlight, windows-phone-7, xaml

我想以编程方式创建以下代码段：

```
<TextBlock>
    12.01.2013
    <Span xml:space="preserve" Foreground="#FFCCCCCC"> 21:09</Span>
</TextBlock> 
```

但`TextBlock`似乎不支持`TextPointer`s，所以我看不到插入`Span`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:12:46.463

这适用于电话 7.1：

C＃

```
var tb = new TextBlock();
tb.Inlines.Add("12.01.2013");

var span = new Span { Foreground = new SolidColorBrush(Colors.Red) };
span.Inlines.Add(" 21:09");
tb.Inlines.Add(span);

content.Content = tb; 
```

Xaml

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ContentPresenter x:Name="content"/>
</Grid> 
```

# wordpress - git pre-receive hook 拒绝了 heroku

> ID：15867140
> 
> 赞同：6
> 
> 时间：2013-04-07T20:00:27.667
> 
> 标签：wordpress, git, heroku

我已经把自己搞得一团糟。我正在部署一个 Wordpress PHP 应用程序，基本上在主题目录中有一大堆 git 存储库，以及我从 github 项目中克隆的父主题。我成功部署了 Wordpress，但 git 忽略了已经在其单独的 repos 中跟踪的主题，所以我返回并将主题复制到不同的目录，这样它们就不会被跟踪，并删除了 .git 文件夹。

我的问题是，在这样做之后，Heroku 不会让我做 a `git push heroku master`，但会退回此错误消息：

```
Writing objects: 100% (972/972), 2.73 MiB | 76 KiB/s, done.
Total 972 (delta 46), reused 0 (delta 0)

 !     Heroku push rejected due to an unrecognized error.
 !     We've been notified, see http://support.heroku.com if the problem persists.

To git@heroku.com:....git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:....git' 
```

我试过`git pull heroku master`了，这给了我“已经是最新的”。我也尝试添加`-f`标志，但这也不起作用。有时在 Heroku 中拒绝该应用程序。

有任何想法吗？

**编辑：**

我也尝试过这里的建议：[failed to push some refs to git@heroku.com:myapp.git](https://stackoverflow.com/questions/9831129/failed-to-push-some-refs-to-githeroku-commyapp-git)

包括从 heroku/master 创建一个新分支，然后立即将其推送到 heroku。它失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T01:11:25.217

我在 Heroku 的 git 基础设施上工作。供将来参考，这些通常是我们监控的服务水平问题，但可能因您的情况而异。最好查看[https://status.heroku.com ，或在](https://status.heroku.com)[https://support.heroku.com](https://support.heroku.com)提交工单。

# wpf - 如何在wpf中设置根视觉视图

> ID：15867141
> 
> 赞同：0
> 
> 时间：2013-04-07T20:00:41.980
> 
> 标签：wpf, prism

使用 wpf 设置根视觉的正确方法是什么。在我看过的 Silverlight 示例中 `ShellView view = this.Container.TryResolve<ShellView>();
Application.Current.RootVisual = view;`

似乎根视觉属性没有在 wpf 中退出，我尝试了以下操作，但它没有加载我的 shell 视图（用户控件）。

```
ShellView view = this.Container.TryResolve<ShellView>();            
Application.Current.MainWindow = Window.GetWindow(view); 
```

在 wpf 中设置根视觉的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:11:01.293

由于您的问题带有[prism](/questions/tagged/prism "显示标记为“棱镜”的问题")标签，您可以简单地看一下 Prism 提供的 StockTrader 演示，它的引导程序中有以下几行：

```
protected override void InitializeShell()
{
    base.InitializeShell();

#if SILVERLIGHT
    Application.Current.RootVisual = (Shell)this.Shell;            
#else
    Application.Current.MainWindow = (Shell)this.Shell;
    Application.Current.MainWindow.Show();
#endif
} 
```

创建外壳的地方是`CreateShell()`覆盖，其中`Shell`类型为`Window`：

```
protected override DependencyObject CreateShell()
{
    return this.Container.TryResolve<Shell>();
} 
```

您不会比 Prism 演示中的方式更“正确”。

# postgresql - pgAgent 作业因身份验证错误而失败

> ID：15867145
> 
> 赞同：4
> 
> 时间：2013-04-07T20:01:25.763
> 
> 标签：postgresql, pgagent

我使用名为 postgres 的本地计算机帐户安装了带有 Windows 服务的 pgAgent。我已确认 Windows 服务运行正常。我在 pgAdmin 中创建了一个作业，应该从我的客户数据库中的表中删除某些记录。作业中的唯一步骤是配置到客户数据库的本地连接类型。问题是，作业每次都失败，并在 Windows 事件日志中写入以下警告：

`Failed to create new connection to database 'customer':'fe_sendauth: no password supplied'`

我已经验证在 C:\Users\postgres\AppData\Roaming\postgresql 中有一个 pgpass.conf 文件。以下是它的内容：

`localhost:5432:postgres:postgres:<password_redacted>`

我不确定还能尝试什么。我无法找到有关此错误消息的任何进一步信息，因为它适用于 pgAgent。

版本信息：

*   PostgreSQL 9.2.4，由 Visual C++ build 1600 编译，64 位
*   pgAdmin 1.16.1
*   pgAgent v3.3.0-1

Windows服务启动信息：

`C:\Program Files (x86)\pgAgent\bin\pgagent.exe RUN pgAgent host=localhost port=5432 user=postgres dbname=postgres`

pg_hba.conf 的非注释内容：

```
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:46:55.317

我所做的是在 PgAgentIII 的工作步骤下

我将连接类型更改为远程
使用按钮设置连接字符串...
将用户=postgres更改为我的应用程序用户名
添加密码=密码（填写您的密码）
更改主机=127.0.0.1

我不再收到错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T07:27:05.307

我在为本地连接配置的 pgAgent 作业步骤中遇到了同样的问题：
`Failed to create new connection to database '<database_name>':'fe_sendauth: no password supplied'`

将密码放入连接字符串的解决方案工作正常，但似乎不安全。

在四处挖掘之后，我找到了另一个解决方案 - 为步骤的**目标**数据库添加连接字符串到 pgpass.conf 解决了这个问题：
`localhost:5432:<database_name>:postgres:<password>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-20T21:57:53.770

确保检查 pgadmin 服务的用户名和您正在检查的 pgpass.conf 文件的用户名是否匹配。在我意识到 pgadmin 安装程序已将服务设置为以本地用户身份运行之前，我遇到了同样的问题，并且我正在检查 pgpass.conf 中与域用户相同的用户名。

# jquery - 删除克隆的 jQuery UI 按钮将删除基本按钮的样式

> ID：15867147
> 
> 赞同：1
> 
> 时间：2013-04-07T20:01:32.000
> 
> 标签：jquery, jquery-ui

我已经为你设置了这个小提琴：http: [//jsfiddle.net/MNpRh/4/](http://jsfiddle.net/MNpRh/4/)

```
$("#removebtn").button();
$(document).on("click", ".remove", function(){
   $(this).remove();
});
$("#clone").click(function(){
   $("#removebtn").parents(".group").clone(true).appendTo("#content");
}); 
```

点击克隆几次，然后删除任何按钮。按钮样式将被删除并且不会再次克隆。

它基于 jQuery UI 1.8。它适用于 1.10，但我无法升级 jQuery UI。

你会如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:08:26.260

要保持悬停效果，请查看添加了由 CSS [http://jsfiddle.net/MNpRh/8/隐藏的模式 div 的修改解决方案](http://jsfiddle.net/MNpRh/8/)

除了 HTML：

```
<div class="group" id="pattern">
     <button class="remove">Remove me</button>
</div> 
```

CSS：

```
#pattern { display:none;} 
```

查询：

```
$("#removebtn").button();
$(document).on("click", ".remove", function(){
    $(this).remove();
});
$("#clone").click(function(){
  $('#pattern').clone().appendTo("#content").removeAttr('id').find('button').button();
}); 
```

# java - 为什么我们需要在 Swing 应用程序中扩展 JFrame？

> ID：15867148
> 
> 赞同：8
> 
> 时间：2013-04-07T20:01:50.113
> 
> 标签：java, swing, jframe

为什么我们`JFrame`在构建 Swing 应用程序时需要扩展类。据我所知`extends`用于继承基类。`JFrame`以下程序中没有使用该类的任何功能，但仍对其进行了扩展。我知道我错过了一些信息。是不是像 JFrame 类的一些功能在后台运行一样。

1) 代码

```
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JPasswordField;
import javax.swing.JOptionPane;

public class tuna extends JFrame{

   private JTextField item1;
   private JTextField item2;
   private JTextField item3;
   private JPasswordField passwordField;
   Container contentPane ;
   public tuna(){
      super("The title");

      setLayout(new FlowLayout());

      item1 = new JTextField(10);
      contentPane.add(item1);

      item2 = new JTextField("enter text here");
      add(item2);

      item3 = new JTextField("uneditable", 20);
      item3.setEditable(false);
      add(item3);

      passwordField = new JPasswordField("mypass");
      add(passwordField);

      thehandler handler = new thehandler();

      item1.addActionListener(handler);
      item2.addActionListener(handler);
      item3.addActionListener(handler);
      passwordField.addActionListener(handler);
   }

   public static void main(String[] args){
      tuna aye = new tuna();
   }

   private class thehandler implements ActionListener{

      public void actionPerformed(ActionEvent event){
         String string = "";

         if(event.getSource()==item1)
            string=String.format("field 1: %s",event.getActionCommand());
         else if (event.getSource()==item2)
            string=String.format("field 2: %s",event.getActionCommand());
         else if (event.getSource()==item3)
            string=String.format("field 3: %s",event.getActionCommand());
         else if (event.getSource()==passwordField)
            string=String.format("password field is: %", event.getActionCommand());
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-07T20:14:56.383

您不需要扩展 JFrame，事实上，我们许多从事 Swing 编程的人都认为*不要*扩展这个类。我自己，我尝试扩展我计划改变类的固有行为的类——即，覆盖类的非静态方法之一。由于我很少需要为 JFrame 执行此操作，因此我很少想要扩展它。

避免扩展它的另一个原因是：如果您稍后想要在 JDialog 或 JOptionPane 或另一个容器中显示您刚刚创建的 GUI 作为复杂 GUI 的一部分，该怎么办？如果你的类扩展了 JFrame，这将很难做到。我自己，我尝试将我的 GUI 类用于创建 JPanel，以便更容易做到这一点。

基于您的代码的愚蠢示例：

```
import javax.swing.*;

// this guy extends *nothing*
public class TunaExample {
   private static final int COLS = 10;
   private JPanel mainPanel = new JPanel(); // this is what I'll add to contentPane
   private JTextField field1 = new JTextField(COLS);
   private JTextField field2 = new JTextField(COLS);
   private JPasswordField passwordField = new JPasswordField(COLS);
   private JComponent[] allComponents = { new JLabel("Field 1:"), field1,
         new JLabel("Field 2:"), field2, new JLabel("Password:"), passwordField };

   public TunaExample() {
      field2.setEditable(false);
      field2.setFocusable(false);
      field1.setText("Field 1");
      field2.setText("Uneditable");

      for (JComponent comp : allComponents) {
         mainPanel.add(comp);
      }
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   private static void createAndShowGui() {
      TunaExample tunaExample = new TunaExample();

      // creating my JFrame only when I need it and where I need it
      JFrame frame = new JFrame("Tuna Example");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(tunaExample.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T20:06:08.327

在您的代码中首先要注意的是：

```
super("The title"); 
```

这实际上调用了构造函数，并将其作为标题字符串`JFrame`传递。这是在代码`"The title"`中使用该功能的明确示例。`Jframe`这将构建为您显示的窗口。

使用类似的方法`add`都是从`JFrame`类继承的。这些添加`Components`到 JFrame 对象。

**为什么要继承？**

好吧，简单地说，你的类是一个 JFrame，还有更多。当你有一个`Is A`操作时，你使用继承。此方法的另一个优点是您的类可以称为 JFrame。那是：

```
JFrame tuna = new tuna();
// Note: All classes are meant to start with a capital letter. 
```

**另一种观点**

需要注意的是，您不必严格地从 JFrame 类继承。您可以使用`Composition`. 在这种情况下，你会有类似的东西：

```
 public class Tuna {
      private JFrame parentWindow;
      // Rest of class.
 } 
```

如上所述，约定是遵循`Is A`and的`Has A`方法。如果 class`A`是 class 的一个例子`B`，我们倾向于使用继承。如果 class`A`有 class 的实例`B`，则使用组合，尽管在大多数情况下，继承可以与组合互换。

**另一个观点**

正如评论中提到的，在尝试自己实现之前，您应该始终寻找提供这种功能的现有 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T20:12:57.463

要`JFrame`在您的应用程序中使用您可以像在代码中那样扩展它或制作一个`object` as

```
JFrame frame= new JFrame(); 
```

然后你可以做到

```
frame.setTitle("Title");
frame.setLayout(layout); 
```

以任何一种方式进行操作都很容易，但要在 Application 中使用 JFrame 并访问其方法等，您必须使用其中一种方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T15:49:03.470

If you want to create a standalone application, you can either extend JPanel or JFrame or create their instance in your class implementation.

As a rule, a standalone application with a Swing-based GUI has at least one containment hierarchy with a JFrame as its root. For example, if an application has one main window and two dialogs, then the application has three containment hierarchies, and thus three top-level containers. [http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)?

[http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

# mysql - mysql联合不同的列数

> ID：15867152
> 
> 赞同：9
> 
> 时间：2013-04-07T20:02:15.050
> 
> 标签：mysql

我知道联合查询必须具有相同数量的列。我正在尝试从表中获取结果，`comments`并从`strings`具有多个连接的表中获取结果。我该怎么做？我还没有测试，因为我知道我会得到不同数量的列的错误。这是我试图结合的两个查询。

查询 1（字符串）

```
SELECT sub.actionid as usersub, 
                ftable.`last-time` as lastvisited, updatetable.recent as mostrecent, parent.* FROM `strings` as parent 
        LEFT JOIN subscribe sub on sub.actionid=parent.id AND sub.userid=:userid
        JOIN followers ftable on ((ftable.sid=parent.sid AND ftable.page='1') OR 
        (ftable.sid=parent.sid AND ftable.position=parent.position AND ftable.page='0') 
        OR (ftable.profile=parent.starter AND parent.guideline='1')) AND ftable.userid=:userid
        JOIN `update-recent` updatetable on 
        ((updatetable.sid=parent.sid AND updatetable.position=parent.position AND updatetable.pageid='0')
        OR (updatetable.profile=parent.starter) OR (updatetable.pageid=parent.pageid AND parent.pageid!=0))
        WHERE ftable.userid=:userid AND parent.deleted='0' GROUP BY parent.id 
```

查询2（评论）

```
SELECT * FROM comments WHERE viewed='0' AND (`starter-id`=:userid OR respondid=:userid) 
```

我想按时间戳列排序结果`posted`（最新）`ORDER BY posted DESC`

我如何联合这些查询？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-07T20:04:34.750

您可能希望选择列`NULL`来占用某些表中的空白空间。

表 A：（id，column1）

表 B：（id，column1，column2）

```
Select id, column1, null as column2 from tableA
UNION
Select id, column1, column2 from tableB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:04:24.870

将空列 ( `null as columnName`) 添加到列较少的查询中。您应该避免`*`在这种情况下使用，以便更好地控制两个查询中的列顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-23T12:00:00.877

解决此问题的另一种非常狡猾的方法是在表之间不共享 CONCAT_WS 列，例如

```
SELECT `r_id`, `r_added`, CONCAT_WS('###',`otherfield1`,`otherfield2`) as r_other FROM table1
UNION
SELECT `r_id`, `r_added`, CONCAT_WS('###',`otherfield3`,`otherfield4`,`otherfield5`) as r_other FROM table2 
```

然后，您可以以编程方式重建该数据，例如

```
$rother = explode("###", $row['r_other']); 
```

**获取这些数据的方法非常糟糕，**但可能会让某人摆脱修复。您甚至可以更改分隔符，例如#t1# #t2# 搜索字符串以检查连接数据来自哪个表。

# oracle11g - Oracle 11g 错误：现有表上的 Ora-00942

> ID：15867153
> 
> 赞同：0
> 
> 时间：2013-04-07T20:02:16.520
> 
> 标签：oracle11g, sqlplus, plsqldeveloper

当我运行此查询以查看 PL/SQL Developer 中用户 Scott 可用的表时，我得到了 11 个表，包括表 EMP。

```
Select Table_Name
From All_Tables
Where Owner = 'SCOTT'; 
```

但是当我尝试在 PL/SQL Developer 中使用这样的全选访问表 emp 时：

```
select * from emp; 
```

我收到 0ra-00942 表或视图不存在错误。然而，在同一架构中的 SQL*PLUS 中，相同的选择语句给了我表 emp 的内容。是什么导致 PL/SQL Developer 中出现此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:14:31.980

当您使用 PL/SQL Developer 时，您使用什么用户连接到数据库？假设您使用的是 SCOTT 以外的用户，您可能需要使用完全限定名

```
SELECT *
  FROM scott.emp 
```

您还可以在您使用的任何模式中创建同义词

```
CREATE SYNONYM emp
   FOR scott.emp 
```

然后在查询中使用同义词

```
-- This resolves to the private synonym that you just created
SELECT *
  FROM emp 
```

# java - 我们如何通过java将文件传输到ALFRESCO

> ID：15867154
> 
> 赞同：0
> 
> 时间：2013-04-07T20:02:17.427
> 
> 标签：java, integration, alfresco

我们有一个 PLM 产品，它现在将与 CMS Alfresco 进行一些集成。我被要求处理集成部分。这真的很有挑战性，也很有趣，我非常渴望尽早开始。

计划很简单，开发一个向 ALFRESCO 发送文件 [pdf/word] 的 UI。现在我明白了 Alfresco 是一个开源系统。但我不认为在网上有很多关于 Alfresco 的教程之类的东西。我发现的只是 Alfresco 网站上的文档，这有点吓人。

我想知道如何继续了解需要调用哪些 API 才能实现这样的目标。所以，请分享你的想法。

谢谢，帕万。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T10:39:44.657

您应该使用[CMIS](http://en.wikipedia.org/wiki/Content_Management_Interoperability_Services)。网上有很多教程和一[本新书](http://www.manning.com/mueller/)可以帮助你学习，另外，[Apache Chemistry](https://chemistry.apache.org/)项目为一系列不同的堆栈提供客户端 API（即使你的堆栈没有可用的客户端库，那么上传文件也是就像进行 HTTP POST/PUT 调用一样简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:22:11.520

有多种方法可以实现这一目标。如果您对 JAVA 和 web 服务感到满意，那么您可以直接使用各种开箱即用的 webscript。您还可以使用 Alfresco WebService API。查看 SDK FirstWebservice 客户端。您可以修改它以接受您自己的文件。 [http://wiki.alfresco.com/wiki/Alfresco_SDK_4.0](http://wiki.alfresco.com/wiki/Alfresco_SDK_4.0)

# android - AndroidRuntime(528): java.lang.RuntimeException: 无法实例化活动

> ID：15867157
> 
> 赞同：0
> 
> 时间：2013-04-07T20:02:40.727
> 
> 标签：android

我得到的错误：-

```
 04-08 00:37:48.540: E/AndroidRuntime(528): java.lang.RuntimeException: 
 Unable to instantiate activity ComponentInfo{com.android.collision/
com.android.collision.GameViewActivity}: java.lang.InstantiationException: 
can't instantiate class com.android.collision.GameViewActivity; no empty constructor 
```

编码部分的其他细节，我必须通过 SurfaceView 扩展我的主要活动类

我的清单 xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.collision"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".GameViewActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
   </application>

</manifest> 
```

我的邮件活动是：-

```
public class GameViewActivity extends SurfaceView {
/** Called when the activity is first created. */

 public GameViewActivity(Context context) {
       super(context);

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:04:57.187

您的活动必须扩展一个活动类。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:07:49.710

java.lang.RuntimeException：无法实例化活动

所以这样做

```
public class GameViewActivity extends  Activity 
```

或者您可以扩展项目中的任何活动，例如。

```
public class GameViewActivity extends  GameActivity 
```

# graphics - .net 中的自由变换矩阵

> ID：15867162
> 
> 赞同：0
> 
> 时间：2013-04-07T20:02:58.087
> 
> 标签：graphics, matrix, transformation

我的要求是将矩形图像 2D 转换为四边形（透视图 3D），反之亦然。相反，我的意思是你在地板上有一张地毯的图片，假设我们认出了它的角落，我喜欢它的扁平矩形图案。

该项目在 C# 中，因此变换矩阵仅支持 Afine 变换而不是 Prespective（自由形式）。

你知道这样做的任何图书馆吗？

这里有一个从 2D 到 3D 的实现，但不是相反。顺便说一句，它使用技巧而不是变换矩阵，有时会导致一些不正确的结果：

[http://www.codeproject.com/Articles/36145/Free-Image-Transformation](http://www.codeproject.com/Articles/36145/Free-Image-Transformation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T18:19:24.370

我使用[了 ImageMagic 的转换命令](http://www.imagemagick.org/script/convert.php)

它有一些可以添加到代码中的库，还有一个命令行可执行文件。我创建了一个进程并将图像地址传递给它。检查[这个问题。](https://stackoverflow.com/questions/16028228/calling-image-magick-commands-from-net)

# python - 在 Python 中构建编译器：确定整数值

> ID：15867163
> 
> 赞同：1
> 
> 时间：2013-04-07T20:02:59.807
> 
> 标签：python, compiler-construction

我正在为一种名为 Jack 的语言（类似于 Java）构建一个编译器。我正在研究我的标记器，但我无法确定文件中的标记是否为整数。以下是我在语言和符号中实现保留字的方式：

```
def tokenType(self):
    if self.token in ['class', 'constructor', 'function', 'method', 'field', 'static', 'var', 'int', 'char', 'boolean', 'void', 'true', 'false', 'null', 'this', 'let', 'do', 'if', 'else', 'while', 'return']:
        return 'KEYWORD'

    elif self.token in ['{', '}', '(', ')', '[', ']',  '.', ',', ';', '+', '-', '*' ,'/', '&', '|', '<', '>', '=', '~']:
        return 'SYMBOL' 
```

但是，我不确定如何确定令牌是否是 0 到 32767 之间的整数。有没有办法轻松搜索一系列值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:08:20.233

```
elif self.token.isdigit() and 0 <= int(self.token) < 32768:
    return 'INTEGER' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:07:10.090

你的意思是这样吗？

```
elif self.token.isdigit():
    return 'INTEGER_LITERAL' 
```

# fonts - 为什么 Qt4 不能平滑地缩放字体？

> ID：15867165
> 
> 赞同：0
> 
> 时间：2013-04-07T20:03:08.170
> 
> 标签：fonts, scaling

在 Qt4.8 中，我有带有字体“verdana”的 QFont 对象，用于 QGraphicsTextItem，绘制在 QGraphicsView 上。我也有使用 QFont::setPointSizeF 平滑更改字体大小的 QSlider。

我观察到的是由 QGraphicsTextItem 表示的文本不能平滑缩放。相反，它在跳跃中发生变化，发生在 (qreal) 比例因子的整数值附近。在整数点的这些跳跃之间也有一些渐进的、较小的修改。

我认为，Qt 使用 libfreetype.so 来渲染字体。并且使用的字体是verdana.ttf，显然是TrueType字体。它是矢量字体，理论上可以平滑缩放。

那么为什么文本不会随着缩放因子平滑变化呢？为什么整数点很重要？

我期待看到像 Android 中那样的字体修改：当用户缩放窗口时，所有字体都会很好地平滑地增长。为什么这与 Qt 的 QFont/libfreetype 不同？

# java - 如何通过虚拟盒子上的 java rmi 进行通信

> ID：15867168
> 
> 赞同：1
> 
> 时间：2013-04-07T20:03:24.103
> 
> 标签：java, sockets, rmi, virtualbox

我有一个 java RMI 应用程序，当你在 2 台不同的 Linux 机器上运行它时，它可以正常工作。现在我没有另一台笔记本电脑可以进行一些新的测试，所以我尝试将应用程序放在具有 Windows 7 的新机器中的虚拟盒子上。似乎应用程序在虚拟盒子中照顾对象寄存器大约 2 分钟然后出现这个异常：

> java.rmi.ConnectException：连接拒绝主机：192.168.1.48；

嵌套的 except 并且异常传播...我已经从虚拟机中导出了端口 1099（我这样做是因为我使用 Linux 套接字和 C 完成了相同的应用程序，并且我需要从虚拟机中导出端口（在这种情况下为 14555）为了工作）。

有什么建议吗？

# objective-c - iPhone - 在设备锁定/静音模式下播放声音，但允许苹果闹钟响起

> ID：15867172
> 
> 赞同：1
> 
> 时间：2013-04-07T20:03:42.973
> 
> 标签：objective-c, xcode, avaudioplayer, audio

我有一个名为 Light Alarm 的应用程序，它会在警报临近时播放不同的声音。我一直使用以下代码：

```
UInt32 category = kAudioSessionCategory_MediaPlayback; 
AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, sizeof (category), &category); 
AudioSessionSetActive (true); 
```

即使用户在睡觉或设备锁定之前忘记关闭“静音模式”，我也会使用此代码来确保声音播放。

然而，上述代码的副作用是，如果主苹果闹钟响起，它会出现在屏幕上，设备会振动（如果处于活动状态）但不会播放声音。

有谁知道我如何在静音模式==打开和设备锁定时仍然播放声音，但还允许 Apple 的警报应用程序响起？

干杯，查理

# postgresql - PostgreSQL - 只应允许 DB 用户调用函数

> ID：15867175
> 
> 赞同：19
> 
> 时间：2013-04-07T20:03:53.183
> 
> 标签：postgresql, stored-procedures, transactions, sql-injection, user-permissions

目前我正在为我的应用程序使用 PostgreSQL。由于我试图将每个包含事务（即插入、更新、删除）的 SQL 都放在一个函数中，所以我偶然发现了这个问题：

是否可能只允许数据库用户调用函数和选择语句，而他不能调用包含事务的 SQL 语句？“调用函数”是指任何函数。不管它是否包含交易。

我已经尝试创建一个只能调用函数和 Select-Statements 的用户。但是在调用包含事务的函数时，我总是会出错。据我了解，如果 dbuser 调用使用插入、更新或删除语句的函数，则他需要写权限。

我错过了什么吗？这种情况真的不可能吗？安全方面，这真的很棒，因为您几乎可以从一开始就阻止 SQL 注入。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-07T21:50:42.477

没有“特权`SELECT`”。您所需要的只是`EXECUTE`功能的特权。相关函数可以运行[`SECURITY DEFINER`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html#SQL-CREATEFUNCTION-SECURITY)以继承所有者的所有权限。要将可能的特权升级限制在最低限度，请让守护程序角色拥有相关功能，仅具有必要的特权 - 而不是超级用户！

### 食谱

作为超级用户...

创建一个非超级用户角色`myuser`。

```
CREATE ROLE myuser PASSWORD ...; 
```

创建一个组角色`mygroup`并使其成为`myuser`成员。

```
CREATE ROLE mygroup;
GRANT mygroup TO myuser; 
```

您可能想像`myuser`以后一样添加更多用户。

**根本**不授予`myuser`.
仅将这些授予`mygroup`：

*   `GRANT CONNECT ON DATABASE mydb TO mygroup;`
*   `GRANT USAGE ON SCHEMA public TO mygroup;`
*   `GRANT EXECUTE ON FUNCTION foo() TO mygroup;`

删除不应该拥有的*所有*特权。`public``myuser`

```
REVOKE ALL ON ALL TABLES IN SCHEMA myschema FROM public; 
```

可能还有更多。[我引用手册：](http://www.postgresql.org/docs/current/interactive/sql-grant.html)

> PostgreSQL 将某些类型的对象的默认权限授予 `PUBLIC`. 默认情况下，PUBLIC 不会对表、列、模式或表空间授予任何权限。`CONNECT`对于其他类型，授予`CREATE TEMP TABLE`PUBLIC的默认权限如下：`EXECUTE`功能特权；和`USAGE` 语言的特权。当然，对象所有者`REVOKE`既可以默认也可以明确授予权限。（为了获得最大的安全性，请`REVOKE`在创建对象的同一事务中发出 ；然后没有其他用户可以使用该对象的窗口。）此外，可以使用`ALTER DEFAULT PRIVILEGES`命令更改这些初始默认权限设置。

创建**守护程序角色**以*拥有*相关功能。

```
CREATE ROLE mydaemon; 
```

仅授予执行这些函数所需的权限`mydaemon`，（包括`EXECUTE ON FUNCTION`允许调用另一个函数）。同样，您可以使用组角色来捆绑权限并将它们授予`mydaemon`

```
GRANT bundle1 TO mydaemon; 
```

此外，您可以使用[**`DEFAULT PRIVILEGES`**](http://www.postgresql.org/docs/current/interactive/sql-alterdefaultprivileges.html)自动将未来对象的某些特权直接授予捆绑包或守护程序：

```
ALTER DEFAULT PRIVILEGES IN SCHEMA myschema GRANT SELECT ON TABLES    TO bundle1;
ALTER DEFAULT PRIVILEGES IN SCHEMA myschema GRANT USAGE  ON SEQUENCES TO bundle1; 
```

这仅适用于执行它的角色。[根据文档：](http://www.postgresql.org/docs/current/interactive/sql-alterdefaultprivileges.html)

> 如果`FOR ROLE`省略，则假定当前角色。

还要涵盖架构中预先存在的对象（请参阅[rob 的评论](https://stackoverflow.com/questions/15867175/postgresql-db-user-should-only-be-allowed-to-call-functions/15868268?noredirect=1#comment75197559_15868268)）：

```
GRANT SELECT ON ALL TABLES    IN SCHEMA public TO bundle1;
GRANT USAGE  ON ALL SEQUENCES IN SCHEMA public TO bundle1; 
```

制作`mydaemon`自己的相关功能。可能看起来像这样：

```
CREATE OR REPLACE FUNCTION foo()
  ...
SECURITY DEFINER SET search_path = myschema, pg_temp;

ALTER FUNCTION foo() OWNER TO mydaemon;
REVOKE EXECUTE ON FUNCTION foo() FROM public;
GRANT  EXECUTE ON FUNCTION foo() TO mydaemon;
GRANT  EXECUTE ON FUNCTION foo() TO mygroup;
-- possibly others .. 
```

~~###Note
由于[pgAdmin](http://www.pgadmin.org/)的当前版本 1.16.1 中的[这个错误](http://code.pgadmin.org/trac/ticket/88)，必要的命令~~

 ~~```
REVOKE EXECUTE ON FUNCTION foo() FROM public; 
```~~ 

~~is missing in the reverse engineered DDL script. Remember to add it, when recreating.~~
This bug is fixed in the current version pgAdmin 1.18.1.

# ruby-on-rails - 设计：仅在某些情况下询问密码

> ID：15867177
> 
> 赞同：6
> 
> 时间：2013-04-07T20:04:01.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在开发一个使用 Rails 和 Devise 进行用户身份验证的应用程序。我想知道是否有办法只为某些更改询问密码。

例如，我希望在以下情况下询问密码：

*   删除帐户
*   更改密码

我希望用户可以在没有任何密码的情况下自由编辑其他字段，例如：

*   姓名
*   用户名
*   阿凡达

所以，我想要一种在这两种方法之间进行交换的方法。我该如何解决这个问题？

编辑：

在 Devise 的文档中，我发现了这一点并且工作正常，如果我输入密码，它只允许更改密码和电子邮件：

```
def update
    @user = User.find(current_user.id)

    successfully_updated = if needs_password?(@user, params)
        @user.update_with_password(params[:user])
    else
        # remove the virtual current_password attribute update_without_password
        # doesn't know how to ignore it
        params[:user].delete(:current_password)
        @user.update_without_password(params[:user])
    end

    if successfully_updated
        set_flash_message :notice, :updated
         # Sign in the user bypassing validation in case his password changed
         sign_in @user, :bypass => true
         redirect_to after_update_path_for(@user)
    else
         render "edit"
    end

end

private

# check if we need password to update user data
# ie if password or email was changed
# extend this as needed
def needs_password?(user, params)
    user.email != params[:user][:email] ||
    !params[:user][:password].blank?
    #HERE
end 
```

现在，`#HERE`当我删除帐户时，我还可以输入什么密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:19:11.530

由于问题编辑：

```
def destroy
  if current_user.valid_password?(params[:user][:password])
    current_user.destroy
  else 
    render "destroy" # or what ever
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:10:02.130

您可以创建`form_tag`重定向到控制器中的操作。

```
<%= form_tag url_for(:controller => :users, :action => :destroy), :method => :get do %>
  <%= label_tag(:password, "Enter password before deleting") %>
  <%= password_field_tag :password %>
  <%= submit_tag "Delete User With Confirmation" %>
<% end %> 
```

您的 UsersController 中的操作类似于：

```
def destroy
    if current_user.authenticate(params[:password])
         #do something
    else
         #do something
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T16:09:29.290

Devise 中有一个`destroy_with_password`方法（至少从版本 3.5.2 开始）。它在`lib/devise/models/database_authenticatable.rb`并被调用

```
destroy_with_password(current_password) 
```

如果 current_password 匹配则销毁记录，否则返回 false。

# python - 使用 Pyinstaller 2.0、PySide 1.1.2 Bindings 和 Qt 4.8 时如何在应用程序中包含图标

> ID：15867178
> 
> 赞同：4
> 
> 时间：2013-04-07T20:04:09.233
> 
> 标签：python, pyside, pyinstaller, qt4.8

什么脚本看起来像 ![what_it_looks_like](https://i.stack.imgur.com/6gT1N.png)

工作应用程序应该是什么样子

![在此处输入图像描述](https://i.stack.imgur.com/Da4qe.png)

在发布之前，我查看了以下问题并尝试将其用作使我的脚本正常工作的指南，但它的用处不大

[PyInstaller 不会将 PyQt 的图像加载到 GUI](https://stackoverflow.com/questions/11534293/pyinstaller-wont-load-the-pyqts-images-to-the-gui)

它所做的最好的是将我的图标包含在结果目录中，如下所示

（图标包括这里的图片）

下一个我什至不知道它在说什么，但如果我知道它实际上在做什么，我觉得它可以解决我的问题， [使用 PyInstaller (--onefile) 捆绑数据文件](https://stackoverflow.com/questions/7674790/bundling-data-files-with-pyinstaller-onefile)

我有 rtfm，不幸的是，其中大部分都超出了我的想象。我认为与我的问题有关的以下部分

[http://www.pyinstaller.org/wiki/Recipe/CollectDatafiles](http://www.pyinstaller.org/wiki/Recipe/CollectDatafiles)

我不知道如何在我的规范文件中实际实现它

以下 [http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#accessing-data-files也是如此](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#accessing-data-files)

![访问数据文件](https://i.stack.imgur.com/H188a.png)

我已经完成了以下及其变体，包括使用 -F 参数

我使用 pyside-uic.exe 将我的 mainWindow.ui 文件转换为 mainGui.py 文件

然后使用 pyside-rcc.exe 将 icons.qrc 转换为 icons_rc.py 进行转换

（注意：我在将最初位于 PySide 文件夹中的 exe 副本放入我的路径中的 C:\Python27\Scripts 文件夹后转换了文件，以便我可以从任何地方调用它）

我将我的图标存储在图标文件夹中

为了使用 Pyinstaller 在我的控制台中制作可执行文件，我使用了以下命令来制作我的规范文件

C:\Pyinstaller-2.0> python utils\Makespec.py --windowed --name="16TangoTest" C:\Exmake\16MainWindowVideo.py

制作规范文件后，我将其从 pyinstaller 文件夹中剪切，并将其添加到我的 Exmake 文件夹中

然后我修改它以包含我的图标文件夹使用

树（C:\Exmake\icons），并将其附加到 a.binaries 上方的行中收集

上面的手册和第一个答案表明我必须修改我的规范文件，以便 pyinstaller 看到/找到我的图标，如下图所示 ![修改规范](https://i.stack.imgur.com/w3P8R.png)

它所做的只是将我的图标包含在 dist 目录中，而应用程序仍然没有像上面的第一张图片那样显示它们

然后我通过在控制台 C:\Pyinstaller-2.0>python pyinstaller.py C:\Exmake\16TangoTest.spec 中运行以下命令来制作可执行文件，这使得您在第一张图片中看到的文件夹包含在内，但文件夹，但不是运行时的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T12:15:50.860

我遇到了和你一样的问题。在 pyinstaller 创建我的可执行文件（pyinstaller 版本 2.1 和 PySide 1.2.1）后，所有图标似乎都丢失了。但是显示了 .png 之一。

因此，一种可能的解决方法是在 PySide 中为您的图标使用 .png 而不是 .ico，并且它可以在双方（python 和可执行文件）上工作。

举个例子：

```
QPushButton(QIcon("./icons/clear.png"),' &Clear',self.app_wgt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:13:58.047

好的，最后的答案，事实证明 Qt 需要以下文件 qico4.dll 可能与 Qt5 不同，在 QtDesigner 中制作 GUI 时，它会自动加载它需要的所有插件，包括上面的图像插件，但是当将文件转换为除非您在脚本中添加以下代码，否则它不包含它的 python 脚本

```
#:Loads the qico plug-in lets you use .ico icons
QPlugin = QPluginLoader("qico4.dll") 
```

下面的文字可能会在不同情况下帮助其他人

This is a partial answer to my own question I would like to thank Blender up above, the short answer is you have to convert your icons from .ico into .png files, the problem is that you have to do the whole process of making your application again, these are the steps that I took I first went into the folder where I had my icons and converted them froom .ico into .png icons, I used the tool I got here [http://www.towofu.net/soft/e-aicon.php](http://www.towofu.net/soft/e-aicon.php) I found this in this site..I love stackoverflow..ahem

once your icons are converted to the .png format you must change your .qrc file where you have your icon information and updated with the new icon information, I advise doing it from scratch; once you have your new icons.qrc file you then open your .ui file in QtDesinger and erase all the instances of your old icons from it and then proceed to update them with the newly formatted icons using the icon/resource file.

After all of your icons have been updated, you save it and continue with the conversion workflow, i.e convert your 'your_file.ui' to 'newly_converted_file.py' using the pyside-uic.exe converter.

Next convert your 'icons.qrc' file into a 'icons_rc.py' using the pyside-rcc.exe command

at the end of this process you should only need your icons folder with your .png icons your icons_rc.py file and your application script.

After that you can continue to use the Pyinstaller-2.0 as per the manual..

As I've said it is a partial answer because it works, however if someone else could tell me or explain to me how to make it work with my original .ico files then I suspect I would not have to go trough the whole process again

Upon more research this page was especially helpful [http://qt-project.org/forums/viewthread/17342](http://qt-project.org/forums/viewthread/17342)

所以我进入我的 Qt4.8 文件夹并搜索了 qico4.dll 并在我的脚本所在的文件夹中复制了它并且应用程序运行完美，如果我能找到一种方法将它包含在我的脚本中然后我想我会有一个完整的答案，问题似乎出在 Qt 而不是 Pyinstaller，似乎它需要知道 dll 才能处理 .ico 文件

# php - PHP Session 变量不会跨页面持续存在

> ID：15867179
> 
> 赞同：0
> 
> 时间：2013-04-07T20:04:18.240
> 
> 标签：php, ajax, session-variables

我正在开发一个网络应用程序。用户登录后，应存储一个`$_SESSION`名为的变量。`user`但是，当我稍后尝试访问它时，我无法访问它。

login.php 和 settings.php 都通过 AJAX 访问并显示在模式窗口中。

**登录.php：**

```
<?PHP
require("require/connect.php"); 
$errors = array();
$passed=FALSE;
if(isset($_POST['username']) && isset($_POST['password'])){
     /* Check db, no output */
     if($record->password != $password){ ?>
          /* Output login fail message */
     <?PHP }else if(intval($record->confirmed)!=1){ ?>
          /* Output email not cofirmed message */
     <?PHP }else{ ?>
         $user = clone $record;
         unset($user->password);
         session_start();
         $_SESSION['user']=$user;
         print_r($_SESSION);
         /*output success message*/
     <?PHP }; 
}else{ /*output login form*/ } ?> 
```

打印出来：

```
Array ( [user] => stdClass Object ( [id] => 11 [timestamp] => 2013-04-07 15:20:24 [username] => aakilfernandes [email] => email@gmail.com [salt] => 4d9b0fdc1d3241b9c9 [orders] => [karma] => 0 [stocks] => 0 [confirmation_code] => ed54er68d3d [confirmation_time] => 2013-04-07 15:20:24 [confirmed] => 1 ) ) 
```

**设置.php**

```
<?PHP
require("require/connect.php");
require("require/userdata.php");
/*other stuff*// 
```

**需要/userdata.php**

```
<?PHP session_start();
print_r($_SESSION); 
```

打印出来：

```
Array ( ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:14:43.483

在 login.php 中，我不得不移到`session_start()`上面`require("require/connect.php");`。甚至直接下一行也不起作用。

不知道为什么这会改变任何东西，因为 connect.php 只是太行并且没有输出。

**连接.php**

```
<?PHP 
mysql_connect(/**/)or die("Couldn't connect to MySQL database");    
mysql_select_db(/**/) or die("Couldn't select MySQL database in connect.php");
?> 
```

# javascript - jquery - 填充以匹配另一个 div 的高度

> ID：15867182
> 
> 赞同：0
> 
> 时间：2013-04-07T20:04:33.407
> 
> 标签：javascript, jquery, height, padding, jquery-masonry

我有一种情况，我需要一个 DIV 的 padding-bottom 等于另一个 DIV 的高度，任何人都可以帮助我如何使用 JQuery 做到这一点？

（原因是 - 我正在使用 Masonry JQuery 插件，它有一个 #container div，它调整宽度以匹配其中所有砖石“砖块”的总宽度。我在那个 #container DIV 里面还有一个滑块调整浏览器窗口大小时使用#container DIV 调整大小。问题是，砌体插件设置#container DIV 的高度以匹配内部砌体“砖”的总高度，但没有考虑到滑块，因此#container div 不够高，无法包含所有内容。-如果我将“padding-bottom”添加到容器 DIV 以匹配#slider-wrap 的高度，则此问题已修复，但是，当窗口大小调整为较小时, padding-bottom 太多了。）

结构（基本）：

```
<div id="container">
    <div id="slider-wrap"></div>
    <div id="masonry-wrap"></div>
</div><!-- END container --> 
```

我希望我已经正确解释了这一点，以便有人理解和帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:08:27.860

您可以通过使用设置`padding-top`属性：jQuery：`css``jQuery`

```
$("#div1").css({"padding-top": $("#anotherdiv").height() }); 
```

使用 HTML 是这样的：

```
<div id="div1" height="400px;">

</div>

<div id="anotherdiv">

</div> 
```

# jquery - 合并 JSON 字符串以简化 AJAX

> ID：15867183
> 
> 赞同：0
> 
> 时间：2013-04-07T20:04:34.423
> 
> 标签：jquery, ajax, json, html, web-sql

我目前有以下代码来处理 Web SQL 行。目前它为每一行向服务器发送一个请求。我想以某种方式将所有行合并到一个多维 JSON 对象中，但我似乎找不到任何关于如何做到这一点的文档。

当我遍历结果时，有什么方法可以“附加”到一个对象？

```
$("#sync-surveys").click(function(){
$.mobile.showPageLoadingMsg();
db.transaction(function(tx) {
    tx.executeSql("SELECT * FROM surveys", [], function(tx, result) {           
    for (var i = 0, item = null; i < result.rows.length; i++) {
        item = result.rows.item(i);
        var json_str = JSON.stringify(item);

        $.ajax({
            type: "post", url: "/survey/survey/process_survey",
            data: json_str,
            success: function (data) {
                alert("saved successfully");
                $.mobile.hidePageLoadingMsg();
            },
            error: function (data) {
                alert(data.responseText);
                $.mobile.hidePageLoadingMsg();
                //console.log(data);
            }
        });//End ajax function
    }//End results loop

    });
});//End Transaction

});//End Surveys Click 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:07:49.697

不要“合并字符串”。相反，“构建图表”。

```
// build data-structure / object graph - alter as required
// make sure to choose something easy to consume/extend.
var items = [];
for (var i = 0; i < result.rows.length; i++) {
        var item = result.rows.item(i);
        // maybe do something else here? if not, it might be possible
        // to JSON.stringify result.rows directly and/or use Array.slice
        // to avoid this loop entirely
        items.push(item);
}
// send request - only build JSON from JS object graph once at end
// JSON = text: modify graph before converting for transmission
$.ajax({
   data: JSON.stringify(items),
   ..
}); 
```

# jersey - OSGi 4.2 环境中的基本 JAX-RS servlet

> ID：15867184
> 
> 赞同：2
> 
> 时间：2013-04-07T20:04:34.640
> 
> 标签：jersey, osgi, jax-rs

在 OSGi 4 容器中创建基本 JAX-RS 环境的最简单方法是什么，而无需求助于 Apache CXF 等重量级解决方案。

尽管在我看来，使用 注册 Jersey 容器 servlet`HttpService`应该可以解决问题，但我还不能拼凑出一个集合，其中只有几个包可以做到这一点。

这就是我的bundle Activator的精髓所在，`Resources`类实现了`Application`接口来解析哪些类有JAX-RS注解：

```
public void start(BundleContext context) throws Exception {
    // Find the HttpService
    ServiceReference ref = context.getServiceReference(HttpService.class.getName());
    HttpService service = (HttpService) context.getService(ref);    

    // Register a Jersey container
    ServletContainer servlet = new ServletContainer(new Resources());
    service.registerServlet("/services", servlet, null, null);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:42:47.083

这是一个适用于 Jersey 的示例应用程序：[https ://source.everit.biz/svn/everit-osgi/trunk/samples/jaxrs/](https://source.everit.biz/svn/everit-osgi/trunk/samples/jaxrs/)

运行 mvn install 后，您将在 target/eosgi-testing-dist/... 处看到带有 Jetty 的可运行 equinox 容器。您可以在 lib 文件夹中找到使用了哪些包。

它使用这个解决方案：[https ://source.everit.biz/svn/everit-osgi/trunk/remote/jersey/](https://source.everit.biz/svn/everit-osgi/trunk/remote/jersey/)

这里是基于上述解决方案的最简单的代码片段（myObj 是包含注释的对象）：

```
javax.ws.rs.core.Application application = new DefaultResourceConfig();
application.getSingletons().add(myObj);

com.sun.jersey.spi.container.servlet.ServletContainer servletContainer =
       new ServletContainer(application);

Hashtable<String, String> initParams = new Hashtable<String, String>();
initParams.put("com.sun.jersey.api.json.POJOMappingFeature", "true");
httpService.registerServlet("/rest", servletContainer, initParams, null); 
```

请注意，如果您想拥有 JSON 转换等功能，“initparams.put”很有用。

**更新**

SVN 链接的用户/通行证：访客/访客

remote-jersey 项目不再维护，但在 github 上仍然可用：[https ://github.com/everit-org/osgi-remote-jersey](https://github.com/everit-org/osgi-remote-jersey)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:57:00.940

Amdatu 提供了一些开源 RESTful 服务包，包括基于 Apache Wink 的 JAX-RS 解决方案。

See [http://amdatu.org/components/web.html](http://amdatu.org/components/web.html) for a description and a [tutorial video](http://amdatu.org/howto/createwebapp.html) how to create a basic REST resource.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T07:32:21.160

This should do the trick: [https://github.com/hstaudacher/osgi-jax-rs-connector](https://github.com/hstaudacher/osgi-jax-rs-connector)

Using the publisher from this project you will be able to register your OSGi service as RESTful web services by simply registering them as OSGi services ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-15T07:55:25.297

What helped me is following article: [Setting Up JAX-RS for Equinox OSGI](https://dzone.com/articles/setting-up-jax-rs-for-equinox-osgi)

The key points are:

*   The jersey resource configuration (`@Path`, `@Provider` anotated classes) needs to be registered manually with a `org.glassfish.jersey.server.ResourceConfig`.
*   All other configuration options (jersey auto discovery with `javax.ws.rs.Application` or `jersey.config.server.provider.packages`) will fail because Jersey server will not be able to scan them in Equinox.
*   Instanciate the `ServletContainer` in the bundle where the resource configuration are located.

# c++ - 需要从 C++ 中的特定位置开始字符串

> ID：15867186
> 
> 赞同：-1
> 
> 时间：2013-04-07T20:04:55.327
> 
> 标签：c++, string, character, getline

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <cstring>
#include <string>
#include <iterator>
#include <algorithm>
#include <string>

using namespace std;

int main()
{
string word;
cout << "Insert a name to search for: ";
cin >> word;

ifstream file ("Names.txt");

string line; 
getline(file, line, '.'); 

int i;
for (i = 0; i < line.length(); ++i) {
    if ('A' <= line[i] && line[i] <= 'Z') break;
}

string keyword = line.substr(i);

int cnt = count( istream_iterator<string>(file), istream_iterator<string>(), word);
cout << word << " appears " << cnt << " times. It appears most with " << keyword << ".    keyword" << endl;
return 0;
} 
```

此刻：我可以从包含数千个名称（每行一个）的文本文件中搜索某个名称，然后查看该名称出现了多少次。在每一行上还出现一个带有名称的关键字，它以大写字母开头并以句点结尾。

我的问题：我的代码几乎准备好了，但问题是它从文件的开头搜索关键字然后打印出来（因为我的代码还没有做任何其他事情）

我的目标：我希望它从找到 SEARCH 词的行中搜索关键词。例如，如果我搜索 Juliet，它出现了一个关键字 Girl，那么我希望它使用该关键字而不是文件中的 FIRST 关键字打印名称。

MY THOUGHTS: There should be a way to start searching from the word but I do not know how. Could you help me with making an extra loop so it starts second loop from e.g word Juliet. I don't know how I could convert cin to just a sequence of characters. Since usually when searching for a string in a text file the sequence of characters is between ' symbols.

```
'Juliet' 
```

but I need to take the word string and somehow convert it

MY QUESTION: How can I convert input word to sequence of characters to get a starting point for a string

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:42:46.923

Something like this? It's not really an 'algorithm' it's just a simple loop.

```
string word;
cout << "Insert a name to search for: ";
cin >> word;
ifstream file ("Names.txt");
string a_word;
while (file >> a_word && a_word != word)
{
}
if (file)
{
    // found word now start second search.
}
else
{
    // error, didn't find word
} 
```

Sorry if this isn't right, but I'm struggling to understand what you are stuck on. The above code is very simple, it's simpler than the code you wrote yourself.

# excel - Excel VBA - 将范围指定为页眉

> ID：15867191
> 
> 赞同：0
> 
> 时间：2013-04-07T20:05:10.927
> 
> 标签：excel, vba

我想从我的 VBA 代码中指定一个范围作为页眉。

但是当我这样做时

```
ActiveSheet.PageSetup.LeftHeader = HeaderSheet.Range("A1:L2").Value 
```

我只取第一个单元格，即 HeaderSheet 中的 A1 作为页眉，而忽略其余部分。它也不适用于页眉中的边框。

请问有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:25:54.553

因此，“左页眉”将是描述工作表或报表的三个页眉的最左侧页眉。通常它会有诸如报告标题、作者、报告日期等值。

您确定您不是要指示行或列标题吗？

下面，PrintTitleRows 指定第 1 行和第 2 行用作在顶部重复的行。或者，要在左侧重复的列只是“A”列。

```
Sub example()

    'ActiveSheet.PageSetup.LeftHeader = HeaderSheet.Range("A1:L2").Value

    With ActiveSheet.PageSetup
       .PrintTitleRows = "$1:$2"
       .PrintTitleColumns = "$A:$A"
    End With
End Sub 
```

如果您确实打算将单元格 A1-L2 的内容放入最左侧的标题部分，那么您将不得不对单元格进行串联，我相信......即，

```
With ActiveSheet.PageSetup
    .LeftHeader = Range("a1").Value & " " & Range("b1").Value & " " & Range("a2").Value & " " & Range("b2").Value
End With 
```

# javascript - json youtube api

> ID：15867193
> 
> 赞同：0
> 
> 时间：2013-04-07T20:05:21.203
> 
> 标签：javascript, json, youtube

我想获取 youtube 视频

代码示例

```
var youstinky = {

      getYoutubeData : function(){
        $.getJSON("http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?v=2&alt=json",function(data){
         this.x = data.feed.entry.map(function(dat){
           return {
            'link' : dat.link[0].href,
            'name' : dat.title.$t
           };
         });
        });
      }

  };

$(document).ready(function(){
youstinky.getYoutubeData();
}); 
```

我无法在 youstinky 对象之外获取 this.x 变量，

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:07:02.760

只需制作 xa 全局变量。

```
window.x = // Your code 
```

代替...

```
this.x = // Your code 
```

然后，如果您想更具体一点，只需说“x”或“window.x”即可在任何地方访问 x。

# python - Python乘法继承

> ID：15867194
> 
> 赞同：0
> 
> 时间：2013-04-07T20:05:21.920
> 
> 标签：python, inheritance

我正在尝试在 python 中实现一些数学结构。一个基类将继承许多其他基类是矩阵类。对于这个类，实现了一个乘法：

```
def __mul__(self, other):

    if isinstance(other,matrix):
        if not self._type._ncols == other._type._nrows:
            raise ValueError('Cannot multiply matrix of type "{0}" with matrix of type "{1}"'.format(self._type, other._type))
        arr=[[sum([val1*val2 for val1,val2 in zip(row,col)]) for col in other.columns()] for row in self._array]
        self._type=matrix_type(array=arr)
        self._array=arr
        return self
    else:
        arr = [[val*other for val in row] for row in self._array ]
        self._type=matrix_type(array=arr)
        self._array=arr
        return self 
```

这很好用，但是如果我将继承自矩阵类的类（名称为“旋量”）的两个实例相乘，则结果是矩阵类的实例，而不是派生旋量类的实例。这是一个问题，因为 spinor 类具有一些我在乘法后需要的附加功能。

有没有办法实现乘法，返回类型反映派生类的类型？

谢谢！

# javascript - JSONP 安全连接解决方 法

> ID：15867195
> 
> 赞同：0
> 
> 时间：2013-04-07T20:05:32.990
> 
> 标签：javascript, ajax, https, jsonp

我通常从我的网站根目录[https://example.com/](https://example.com/)向另一个域发出 JSONP 请求，但我不能再这样做了，因为我现在使用安全连接。如何仍然向外部域发出异步请求，而不会被浏览器阻止访问？如有必要，我可以将 https 限制为仅登录/登录页面，但这不是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:24:24.263

一个典型的解决方案是通过您自己的服务器代理呼叫。例如，向服务器发送一个请求`yourpage.(aspx|php|jsf)`，然后让它对服务器进行远程调用。

# python - 更快的方法来计算两个元组列表之间匹配的第二个元素的数量？- Python

> ID：15867196
> 
> 赞同：1
> 
> 时间：2013-04-07T20:05:36.473
> 
> 标签：python, count, pattern-matching, tuples

有没有更快的方法来计算两个元组列表之间匹配的第二个元素的数量？

我有这样的元组，我基本上一次循环一个元组：

```
lstup1 = [('but', '00004722-r'), ('he', '000000NULL'), ('was', '02697725-v'), ('always', '00020280-r'), ('persuade', '00766418-v'), ('out', '02061487-a')]
lstup2 = [(u'But', u'000000NULL'), (u'he', u'000000NULL'), (u'was', u'000000NULL'), (u'always', u'00019339-r'), (u'persuade', u'00766418-v'), (u'out', u'00232862-r')]

for i,j in izip(lstup1,lstup2):
  if i[1] == j[1]:
    correct+=1
    if j[1][-4:] == "NULL"
      null+=1
  count+=1

print "Accuracy =", str(correct/count), "with", str(null), "NULL tags" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:13:12.377

你可以使用 numpy：

```
>>> import numpy as np
>>> lstup1 = [('but', '00004722-r'), ('he', '000000NULL'), ('was', '02697725-v'), ('always', '00020280-r'), ('persuade', '00766418-v'), ('out', '02061487-a')]
>>> lstup2 = [(u'But', u'000000NULL'), (u'he', u'000000NULL'), (u'was', u'000000NULL'), (u'always', u'00019339-r'), (u'persuade', u'00766418-v'), (u'out', u'00232862-r')]
>>> 
>>> npl1 = np.array(lstup1)
>>> npl2 = np.array(lstup2)
>>> npl1[:,1] == npl2[:,1]
array([False,  True, False, False,  True, False], dtype=bool) 
```

如果您只想知道相等对的数量：

```
>>> np.sum(npl1[:,1] == npl2[:,1])
2 
```

如果您想知道索引位置：

```
>>> np.where(npl1[:,1] == npl2[:,1])
(array([1, 4]),) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:14:08.730

你可以`sets`在这里使用：

```
In [5]: se1=set(x[1] for x in lstup1)

In [6]: se2=set(x[1] for x in lstup2)

In [7]: len(se1&se2)
Out[7]: 2 
```

交叉点的时间复杂度：`O(min(len(se1), len(se2))`

集合创建的时间复杂度： ，列表的长度`O(L)`在哪里`L`

或者您的`izip()`仅比较同一索引上的项目的版本可以简化为：

```
sum(i[1]==j[1] for i,j in izip(lstup1,lstup2)) 
```

# javascript - 取消嵌套从 api 返回的 JSon 对象

> ID：15867201
> 
> 赞同：1
> 
> 时间：2013-04-07T20:06:04.867
> 
> 标签：javascript, jquery, json

如何删除从 api 返回的嵌套 json 对象，如下所示，并通过使用 jquery 以通用方式取消嵌套对象，将其显示为单个字段。这是我的 json 对象

```
 "response": {
"content": 
"[ {    
      "Id": 0,    
     "Name": "Some name",    
     "createdOnDate": "0001-01-01T00:00:00",      
    "keyValueList": 
      [      
           {        
             "Key": "key1",        
            "Value": "Sample Data key 1"      
            },      
           {        
            "Key": "key2",        
           "Value": "sample data key 2   
      ] }]" 
```

这是取消嵌套后的样子。

```
[{
    "Id": 123,
        "Name": "some name",
        "createdOnDate": "2013-01-22T17:02:00",
        "key1": "this is my key1",
        "key2": "this is my key2"

}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:16:34.527

这是无效的 JSON。确保您之前有效。之后，您可以遍历属性并按照您想要的方式设置它们。

```
$.each(content[0]['keyValueList'], function (k, value) {
    content[0][value['Key']] = value['Value']
});

delete content[0]['keyValueList']; 
```

[http://jsfiddle.net/TjQzv/3/](http://jsfiddle.net/TjQzv/3/)

# access-token - disqus 在哪里获取 access_token

> ID：15867203
> 
> 赞同：3
> 
> 时间：2013-04-07T20:06:10.100
> 
> 标签：access-token, disqus

基于此[链接](http://disqus.com/api/docs/auth/)

“以帐户所有者身份进行身份验证 许多应用程序只是想代表帐户所有者执行操作。您可以使用标准 OAuth 流程执行此操作，但您不需要请求访问令牌。相反，请访问您的帐户详细信息页面，然后获取访问令牌。这是一个特殊的访问令牌，它不会过期，并将验证您作为应用程序所有者。

对于我的生活，我似乎找不到包含 access_token 的帐户页面，在看到它之前我需要先做些什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T07:15:47.543

这不是很明显，但请转到此页面：[http ://disqus.com/api/applications/](http://disqus.com/api/applications/)

然后单击您的应用程序标题，这将带您进入详细信息页面。单击后，所有者访问令牌位于第一页的底部。

# ruby-on-rails - 在 OVH 共享主机上部署 Rails 应用程序

> ID：15867209
> 
> 赞同：1
> 
> 时间：2013-04-07T20:07:00.083
> 
> 标签：ruby-on-rails, ruby, deployment

我对 RoR 世界很陌生（3 天），我面临以下问题：我在 OVH 上有一个共享主机，我必须在上面部署我的 Rails 应用程序，我该怎么做？

我只能使用 FTP 协议访问包含 www 目录的文件夹。没有 SSH 连接。

如何部署它只有一个提示，但它不起作用： [http](http://help.ovh.co.uk/RubyOnRails) ://help.ovh.co.uk/RubyOnRails 。当我按照说明进行操作时，InstantRails 不会在主根目录中创建任何 .htaccess。

一些对Rails 世界有经验的人可以帮助我吗？

PS：OVH 不提供Passenger、Capistrano 等。

感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:28:48.900

根据我的经验，在共享托管环境中托管全栈 Rails 应用程序几乎是不可能的，您可以安装的 gem 和可以使用的 Web 服务器有很多限制。

如果可以的话，您应该考虑使用 PaaS，例如 Heroku、Engineyard 或 OpenShift。或者，如果您对 linux 环境感到满意 - VPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-17T21:01:08.610

你可以，但你不能安装 gem，这是安装的 gem 列表

```
$ gem list

*** LOCAL GEMS ***

actionmailer (4.1.8)
actionpack (4.1.8)
actionview (4.1.8)
activemodel (4.1.8)
activerecord (4.1.8)
activesupport (4.1.8)
arel (5.0.1.20140414130214)
atomic (1.1.16)
bigdecimal (1.2.4)
builder (3.2.2)
bundler (1.7.4)
celluloid (0.15.2)
cmdparse (2.0.6)
coffee-rails (4.0.1)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
daemons (1.1.9)
erubis (2.7.0)
execjs (2.2.1)
ffi (1.9.6)
hike (1.2.1)
i18n (0.6.9)
io-console (0.4.2)
jbuilder (2.1.3)
jquery-rails (3.1.2)
json (1.8.1)
listen (2.4.0)
log4r (1.1.10)
mail (2.6.1)
metaclass (0.0.4)
mime-types (1.25)
minitest (5.4.2, 4.7.5)
mocha (1.1.0)
multi_json (1.10.1)
ncursesw (1.4.8)
net-http-persistent (2.9)
oj (2.10.3)
polyglot (0.3.4)
psych (2.0.5)
rack (1.5.2)
rack-test (0.6.2)
rails (4.1.8)
railties (4.1.8)
rake (10.3.2, 10.1.0)
rb-inotify (0.9.5)
rdoc (4.1.0)
RedCloth (4.2.9)
ruby-shadow (2.3.4)
sass (3.4.6)
sass-rails (4.0.3)
sdoc (0.4.1)
spring (1.1.3)
sprockets (2.12.3)
sprockets-rails (2.1.3)
sqlite3 (1.3.9)
test-unit (2.1.5.0)
thor (0.19.1)
thread_safe (0.3.3)
tilt (1.4.1)
timers (1.1.0)
treetop (1.4.15)
turbolinks (2.2.2)
tzinfo (1.1.0)
uglifier (2.5.3)
yajl-ruby (1.2.0) 
```

# java - 引用和复制对象，意外行为

> ID：15867213
> 
> 赞同：0
> 
> 时间：2013-04-07T20:07:25.273
> 
> 标签：java

我需要知道为什么会发生以下情况，在这段代码（最后两个块）中，我希望输出完全相同，但本地对象（它们只是对列表中对象的引用，对吗？）处于旧状态，而列表已更新。我有一个错误，因为我的游戏代码中有一个类似的复制过程（基于图块，对象交换位置，所以我想为什么不只是交换它们的引用......）

例子：

```
package game;

import java.util.ArrayList;

public class Tester {
private String s;
private Foo foo;

public Tester(String s, String f) {
    this.s = s;
    this.foo = new Foo(f);
}

class Foo {
    private String f;

    public Foo(String f) {
        this.f = f;
    }
}

@Override
public String toString() {
    return foo.f + ":" + s;
}
public void swap(Tester other) {
    String tempS = this.s;
    Foo tempFoo = this.foo;

    this.s = other.s;
    this.foo = other.foo;
    other.s = tempS;
    other.foo = tempFoo;

}

public static void main(String[] args) {
    ArrayList<Tester> test = new ArrayList<Tester>();
    test.add(new Tester("First", "1"));
    test.add(new Tester("Second", "2"));

    System.out.println("After initializing list");
    for (Tester t : test) {
        System.out.println(t);
    }

    Tester first = test.get(0);
    Tester second = test.get(1);
    Tester tmp = first;

    first = second;
    second = tmp;

    System.out.println("\nAfter temps");
    System.out.println(first);
    System.out.println(second);

    System.out.println("\nList changed after temps?");
    for (Tester t : test) {
        System.out.println(t);
    }

    System.out.println("\nAfter swap");
    first.swap(second);
    System.out.println(first);
    System.out.println(second);

    System.out.println("\nList after swap");
    for (Tester t : test) {
        System.out.println(t);
    }
}
} 
```

和输出：

```
After initializing list
1:First
2:Second

After temps
2:Second
1:First

List changed after temps?
1:First
2:Second

After swap
1:First
2:Second

List after swap
2:Second
1:First 
```

我想我有点不清楚，我总是先打印出第二个（对象），所以“交换后”应该看起来完全像“交换后的列表”，列表在交换本地对象后发生了变化，本地对象（再一次，仅仅引用列表中的那些？）没有。

**对于答案中的评论**：虽然我的困惑被消除并且我的问题得到了解决，但我在问是否有可能获得列表对对象的实际引用，以便当我将它指向其他东西时，列表也会自动指向那是别的东西。在下面的示例中，`Foo a`首先指向`Foo`具有属性的对象`A`，但该引用来自`list.get()`。现在，如果我将它指向`new Turtles()`列表仍将指向`Foo with A`. ![在此处输入图像描述](https://i.stack.imgur.com/3MHlB.png)

我希望有一个“硬”引用，这样当我指向海龟时，arraylist 就会指向海龟。 ![在此处输入图像描述](https://i.stack.imgur.com/tHiNv.png)

这将使交换更容易，但我不确定如何实现一个可以做到这一点的列表（如果可能的话），这将非常适合我的游戏的特定需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:16:00.747

使用对象时需要记住的是，保存对象的变量实际上并不代表对象。变量的值是内存中指向对象所在位置的指针。

通过扩展，某种类型的对象的 ArrayList 实际上并不包含对象。它保存对象引用，或指向内存中对象位置的指针。

当你说：

```
Object a = new Object();
Object b = new Object();
a = b; 
```

您正在设置指向的*指针*`a`的值；换句话说，由于两者和都指向内存中的同一个对象，因此更改一个会更改另一个。 *`b``a``b`*

 *Now to answer your question, with this in mind. If you pull two object references out of an ArrayList, and then swap them, you've swapped the references to the objects; however, the references haven't changed location in the ArrayList. This explains the first three outputs.

Once you do an *internal* swap, however, you've changed the values stored in each object. This means that, though the pointers to the first and second objects are still the same in memory, their internal information has been swapped.

This explains the last two outputs.

(Note, this is also why you have to use `System.arraycopy` instead of setting `int[] a` equal to `int[] b`; if you were to do the latter, then changing a would change b.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:28:19.237

实际上，您的交换方法不会交换对象本身，而只会交换它们包含的值，字符串`s`是按值交换的，对象`foo`是按引用交换的。

当您使用从列表中获取元素时`get(index)`，除了列表所持有的内部引用之外，您实际上还获得了对该对象的引用，因此您有两个指向同一个对象的引用。

要真正交换列表的元素，您应该使用 List 的[set](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#set%28int,%20E%29)方法，如下所示：

```
Tester tmp = test.get(index);
test.set(index, test.get(index+1));
test.set(index+1, tmp); 
```

通过这种方式，元素在列表中被交换，因此对其进行迭代将打印您期望的结果。您拥有的`swap`方法将过时。*

# c++ - 为什么 mysql c++ 连接器在 main() 中工作而不在类方法中工作？

> ID：15867215
> 
> 赞同：0
> 
> 时间：2013-04-07T20:07:46.913
> 
> 标签：c++, visual-studio-2010, mysql-connector

如果它在 main 中，则此代码有效：

```
int main(void)
{
cout << endl;
cout << "Running statement." << endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver->connect("address:port", "user", "pass");
  /* Connect to the MySQL test database */
  con->setSchema("database");

  stmt = con->createStatement();
  stmt->execute("TRUNCATE TABLE words");

  delete stmt;
  delete con;

} catch (sql::SQLException &e) {
  cout << "# ERR: SQLException in " << __FILE__;
  cout << "(" << __FUNCTION__ << ") on line  » "    << __LINE__ << endl;
  cout << "# ERR: " << e.what();
  cout << " (MySQL error code: " << e.getErrorCode();
  cout << ", SQLState: " << e.getSQLState() << " )" << endl;
}

cout << endl;

return EXIT_SUCCESS;
} 
```

这正是它应该做的。如果我在类方法中使用相同的代码，它会编译得很好，但程序会崩溃：

“comClient.exe 中 0x0100DF5B 处未处理的异常：堆栈 cookie 检测代码检测到基于堆栈的缓冲区溢出。”

这发生在“gs_report.c”的一行

```
__fastfail(FAST_FAIL_STACK_COOKIE_CHECK_FAILURE); 
```

我程序的最后一行（发生这种情况时）是方法的结尾（在“}”处）

为什么会发生这种情况，我能做些什么来解决它？

[编辑]

我不认为这很重要，但这里也是类：

数据通信

```
#pragma once

/* Standard C++ includes */
#include <stdlib.h>
#include <iostream>

/* MySQL C++ Connector includes */
#include "mysql_connection.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>

using namespace std;

class dataCom
{
public:
    void clearDatabase();
}; 
```

如您所见，我将其简化为一种包含相同代码的方法：

数据通信.cpp

```
#include "dataCom.h"

void dataCom::clearDatabase()
{
    try
    {
        sql::Driver *driver;
        sql::Connection *con;
        sql::Statement *stmt;
        /* Create a connection */
        driver = get_driver_instance();
        con = driver->connect("address:port", "user", "pass");
        /* Connect to the MySQL test database */
        con->setSchema("database");
        /* Create a statement */
        stmt = con->createStatement();
        stmt->execute("TRUNCATE TABLE words");
        delete stmt;
        delete con;
    }
    catch (sql::SQLException &e)
    {
        cout << "# ERR: SQLException in " << __FILE__;
        cout << "(" << __FUNCTION__ << ") on line  -> "    << __LINE__ << endl;
        cout << "# ERR: " << e.what();
        cout << " (MySQL error code: " << e.getErrorCode();
        cout << ", SQLState: " << e.getSQLState() << " )" << endl;
    }
}//<- crashes here 
```

[编辑]

What other code? This is it. In main I just create an object and call the method. That's it.

However... I have been ignoring some warnings I don't fully understand:

```
c:\program files\mysql\mysql connector c++ 1.1.2\include\cppconn\sqlstring.h(38): warning C4251: 'sql::SQLString::realStr' : class 'std::basic_string<_Elem,_Traits,_Alloc>' needs to have dll-interface to be used by clients of class 'sql::SQLString'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>
1>          ]
1>C:\Program Files\MySQL\MySQL Connector C++ 1.1.2\include\mysql_connection.h(165): warning C4251: 'sql::mysql::MySQL_Connection::proxy' : class 'boost::shared_ptr<T>' needs to have dll-interface to be used by clients of class 'sql::mysql::MySQL_Connection'
1>          with
1>          [
1>              T=sql::mysql::NativeAPI::NativeConnectionWrapper
1>          ]
1>C:\Program Files\MySQL\MySQL Connector C++ 1.1.2\include\mysql_connection.h(169): warning C4251: 'sql::mysql::MySQL_Connection::service' : class 'boost::scoped_ptr<T>' needs to have dll-interface to be used by clients of class 'sql::mysql::MySQL_Connection'
1>          with
1>          [
1>              T=sql::mysql::MySQL_Statement
1>          ]
1>C:\Program Files\MySQL\MySQL Connector C++ 1.1.2\include\cppconn/exception.h(61): warning C4251: 'sql::SQLException::sql_state' : class 'std::basic_string<_Elem,_Traits,_Alloc>' needs to have dll-interface to be used by clients of class 'sql::SQLException'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Alloc=std::allocator<char>
1>          ] 
```

Perhaps this is where the problem lies? How would I fix these warnings?

I tried making a function in main.cpp with the same code. Same problem. So I guess if I want to use the mysql connector in a function I have to make some modifications. But what and why?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:38:01.287

The solution to the "Stack cookie" problem was to build the connector driver(mysql c++ connector) and libmysql(mysql c connector) from source specifically for my version of visual studio.

If anyone else faces these problems, remember to build for the solution configuration you use in your application(debug for debug, release for release).

# c# - 如何从它的字符串名称中获取资源的值

> ID：15867220
> 
> 赞同：2
> 
> 时间：2013-04-07T20:07:57.073
> 
> 标签：c#, localization, resource-files

例如，我一直在使用资源文件并在我的视图中引用它们`Resources.Labels.CountryName`。但是我有一种情况，我需要从资源名称作为字符串获取 C# 中资源的值，即

```
string resourceName = "Resource.Labels.CountryName"; 
```

我如何从这个字符串中获取资源文件中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:14:10.337

通常你会得到资源

```
GetLocalResourceObject("~/VirtualPath", "ResourceKey");
GetGlobalResourceObject("ClassName", "ResourceKey"); 
```

你可以适应这个。我为 HTML 帮助器编写了自己的扩展，就像这个用于全局资源的扩展：

```
public static string GetGlobalResource(this HtmlHelper htmlHelper, string classKey, string resourceKey)
{
    var resource = htmlHelper.ViewContext.HttpContext.GetGlobalResourceObject(classKey, resourceKey);
    return resource != null ? resource.ToString() : string.Empty;
} 
```

我认为，在您的示例中，您将使用`@Html.GetGlobalResource("Labels", "CountryName")`.

因为本地资源需要虚拟路径，我不想写到视图中，所以我使用了这个组合，这两个机会：

```
public static string GetLocalResource(this HtmlHelper htmlHelper, string virtualPath, string resourceKey)
{
    var resource = htmlHelper.ViewContext.HttpContext.GetLocalResourceObject(virtualPath, resourceKey);
    return resource != null ? resource.ToString() : string.Empty;
}

public static string Resource(this HtmlHelper htmlHelper, string resourceKey)
{
    var virtualPath = ((WebViewPage) htmlHelper.ViewDataContainer).VirtualPath;
    return GetLocalResource(htmlHelper, virtualPath, resourceKey);
} 
```

With that you can get a local resource very comfortable by writing `@Html.Resource("Key")` in your view. Or use the first method to get local resources of other views like with `@Html.GetLocalResource("~/Views/Home/AnotherView.cshtml", "Key")`.

# php - 如何使用 preg_replace 将表格宽度更改为 100%

> ID：15867222
> 
> 赞同：3
> 
> 时间：2013-04-07T20:08:03.043
> 
> 标签：php, regex, preg-replace

我想将`table`宽度更改为`100%`以像素为单位定义的宽度值。

我的意思是，如果表格宽度看起来像`width="500"`或`width="500px"`，那么我想将其替换为`100%`。

我的意思是这样`width="100%"`。

有人可以帮我preg_replace。

```
$content = 'holds all my html content';
$replace = '100%';
preg_replace($pattern,$replace,$content,-1); 
```

有人可以帮我`$pattern`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:16:28.393

```
$string = '<table width=" 600 px "></table>' ;
$pattern = '/width=["\']\s*\d+\s*(px|%)\s*["\']/' ;
$own_style = 'width="100%"' ;
$new = preg_replace($pattern, $own_style, $string) ; 
```

这可以帮助你，但如果你的 HTML 内容中没有更多的宽度属性。否则，如果任何其他元素具有 with 属性，它们`width`将被设置为`100%`

因此，通常使用`REGEXP`处理是一种不好的做法`HTML`。

你应该使用`DOM`： http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:18:47.353

我建议不要使用`preg_replace`，并举一个使用 DOM 的例子

```
$dom = new DOMDocument();
$dom->loadHTML($content);

foreach ($dom->getElementsByTagName('table') as $item) {
    if(strpos($item->getAttribute('width'), '%') === false) {
        $item->setAttribute('width', '100%');
    }
}
$content = $dom->saveHTML(); 
```

如果您想将所有`table`的 's 替换为具有 的宽度`100%`，请删除该`if`子句。目前，它会检查以确保`width`不是基于百分比的。

**编辑**

以防万一您不想要格式良好的 HTML，您可以通过更改获得不带正文标签的正文内容：

```
$content = $dom->saveHTML(); 
```

到：

```
$content = substr($dom->saveXml($body->item(0)), 6, -7); 
```

所以如果你有

```
$content = '<table width="600px"><td>Stuff</td></table><table width="50%"><td>Stuff</td></table>'; 
```

你最终会得到：

```
<table width="100%"><td>Stuff</td></table><table width="50%"><td>Stuff</td></table> 
```

# ios - iOS EventKit：在 iCloud 以外的不同部分显示日历/在我的 iPhone 上

> ID：15867225
> 
> 赞同：6
> 
> 时间：2013-04-07T20:08:16.800
> 
> 标签：ios, xcode, ekevent

有没有办法在我的应用程序中创建一个新日历，该日历将显示在本机 iOS 日历应用程序的不同部分？

![http://i.imgur.com/HQBi1Gi.png](https://i.stack.imgur.com/NYVbk.png)

从上图可以看出，Facebook 有自己的日历部分，Hotmail、Gmail 等也有。

目前，我可以使用源 EKSourceTypeLocal 或 EKSourceTypeCalDAV 创建日历，它们将分别显示在“On My iPhone”或“iCloud”组下。我可以在这里创建一个新部分吗？您似乎无法创建新来源，所以我不知道如何处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T20:30:08.513

Hotmail 和 Facebook 和 Gmail 都有部分，因为用户正在从这些服务订阅日历。要显示为一个部分，您需要运行用户可以订阅的 CalDAV 服务器（在日历应用程序中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:18:42.613

不，您不能为压延机创建新部分以在其下显示。

# html - html、url、传递凭证、相对路径

> ID：15867228
> 
> 赞同：1
> 
> 时间：2013-04-07T20:08:24.840
> 
> 标签：html, credentials

我想根据请求（在浏览器关闭之前）从 HTTP 基本身份验证中注销，所以在网上阅读，唯一的方法是将一些错误的凭据传递给服务器。它可以工作，但是当我尝试使用相对路径时是灾难:)

我用

```
<a href="logout@index.htm" >Logout</a> 
```

但是网址是

```
http://10.10.0.71/logout@index.htm 
```

代替

```
http://logout@10.10.0.71/index.htm 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:19:04.163

使用 JS 生成完整的 URL 并链接到它：

```
<script>
function logoutLink(str) {
  document.getElementById("logoutlink").src="http://logout@"+window.location.host+"/index.htm";
}
</script>
<a id="logoutlink" href="#">Logout</a> 
```

演示： http: [//jsfiddle.net/9XSYq/](http://jsfiddle.net/9XSYq/)（由于他们的 iframe，在小提琴中效果不佳。）

# sql - sql中的日期语法问题

> ID：15867231
> 
> 赞同：-1
> 
> 时间：2013-04-07T20:08:42.330
> 
> 标签：sql, oracle, date, syntax, alter

尝试更改列的数据类型时，我不断收到此错误消息：

```
alter table x modify column order_date date NOT NULL; 
```

第 1 行的错误

> ORA-00905 缺少关键字

我不确定我哪里出错了，因为我知道 sql 中有很多类型的日期？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:40:47.090

MODIFY 子句不将 COLUMN 作为关键字。这将起作用：

```
alter table x modify order_date date NOT NULL; 
```

Oracle SQL 参考中记录了该语法。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#i2133121)。

我们只需要将 COLUMN 包含在具有多种不同可能性的命令中。例如，使用 ALTER TABLE ... DROP 命令，因为我们可以删除列、约束或分区...。

```
alter table x drop column order_date ; 
```

* * *

> “当我尝试输入 NOT NULL 时，它说表需要为空”

You should be able to apply a NOT NULL constraint, providing all the rows in the table have a value in the `order_date` column. The error message you get is quite clear:

```
ORA-01758 table must be empty to add mandatory (NOT NULL) column 
```

This means your column has some rows without values. So, you need to update the table and populate those rows with some value; what you will use as a default depends on your business rules.

# joomla - 致命错误：Joomla 中允许的内存大小为 33554432 字节已用尽（尝试分配 32 字节）

> ID：15867232
> 
> 赞同：3
> 
> 时间：2013-04-07T20:08:43.190
> 
> 标签：joomla, max, execution, fatal-error

今天早上我在共享主机上创建了一个 joomla 网站。一切都很顺利，我正在上传内容。突然，当我去创建我的第三个类别时，我得到了以下错误：

> 致命错误：第 208 行 /home/mysite/public_html/libraries/phputf8/utils/unicode.php 中允许的内存大小为 33554432 字节已用尽（尝试分配 32 字节）

我尝试`max_execution`了自定义 php.ini，但它仍然没有帮助我。

我无法联系我的托管公司，因为他们没有支持论坛或任何东西。

有没有办法修复这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T07:24:57.850

@Dasun 是对的，32 mb 是非常多的内存：

打开调试功能（管理员 -> 全局配置 -> 系统 -> 调试系统），你会看到谁在消耗这么多内存。如果您无法摆脱模块/组件，请尝试启用长时间超时的缓存。

并且一定要尽快更换托管服务提供商！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:05:00.763

*是的，换了一个新主机——在没有联系方式的情况下它们如何运作超出了我的理解。*

错误是说您只有 32Mb 的空间供 PHP 运行，而当 PHP 尝试分配超过该空间时它失败了。

您可以尝试在基于站点的`php.ini`文件中增加 PHP 的设置。例如

```
memory_limit=64M; 
```

或者，如果本地`php.ini`不起作用，您可以尝试将其添加到您的顶部`.htaccess`（假设您在 LAMP 服务器上）

```
php_value memory_limit 64M 
```

如果您的主机允许，这将覆盖该`memory_limit`站点的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T21:09:38.110

I just had a customer with a very similar problem. They have a cPanel site, where the default memory allotment was set as 32M. I found another forum where they suggested adding the line below to both the index.php in the Joomla home space, and also in the index.php file in the administrator folder. Worked like a charm. I added it directly below the opening php tag.

```
ini_set('memory_limit','64M'); 
```

This answer was found at [http://www.robertwent.com/blog/joomla/19-joomla-increase-php-local-memory-limit-without-changing-server-settings](http://www.robertwent.com/blog/joomla/19-joomla-increase-php-local-memory-limit-without-changing-server-settings)

Hope it works for you

(this is my first "answer" on this site ... apologies if I've not answered in the the site's official way)

# visual-studio-2010 - Subject.Subscribe 是否仅在静态实例中工作（或者我错过了什么）

> ID：15867235
> 
> 赞同：0
> 
> 时间：2013-04-07T20:09:34.523
> 
> 标签：visual-studio-2010, compiler-errors, system.reactive

我正在处理响应式扩展，我遇到了一个我无法为我的生活找出原因的障碍。

如果我使用 .NET 4 控制台模式应用程序，其中一切都是静态的，如下所示：

```
using System;
using System.Reactive.Subjects;
using FakeDal;
using FakeDal.Entites;
using RxProducer;

namespace Runner
{
  class Program
  {
    private static readonly Subject<DaftFrog> _subject = new Subject<DaftFrog>();
    private static readonly Repository<DaftFrog> _frogRepo = new Repository<DaftFrog>();

    static void Main()
    {
      _subject.Subscribe(RespondToNewData);
    }

    private static void RespondToNewData(DaftFrog frog)
    {
      _frogRepo.Save(frog);
    }

  }
} 
```

DaftFrog 只是我的假 DAL 类中的一个测试类，这是一个简单的 .NET 4 类库项目，DaftFrog 类是一个包含几个字段的简单 poco，dal.save 方法只是简单地做了一个 console.WriteLine DaftFrog 对象中的一个字段。

一旦我开始让 RX 代码工作，这两个类都只是真实事物的简单替代品。

无论如何，回到问题，所以上面的代码工作正常，如果我做一些

```
_subject.OnNext(new DaftFrog()); 
```

调用，假 dal 类，打印出我所期望的，一切正常......

然而>....

如果我然后按原样将此代码传输到类库，然后从我的“静态程序”中新建该类库，如下所示：

```
using System.Reactive.Subjects;
using FakeDal;
using FakeDal.Entites;

namespace RxProducer
{
  public class Producer
  {
    private readonly Subject<DaftFrog> _subject = new Subject<DaftFrog>();
    private readonly Repository<DaftFrog> _frogRepo = new Repository<DaftFrog>();

    private int _clock;

    public void Start()
    {
      _subject.Subscribe(RespondToNewData);
    }

    public void Stop()
    {
    }

    public void Tick()
    {
      if(_clock % 5 == 0)
      {
        DaftFrog data = new DaftFrog();
        _subject.OnNext(data);
      }
      _clock++;

    }

    private void RespondToNewData(DaftFrog frog)
    {
      _frogRepo.Save(frog);
    }
  }
} 
```

然后在我的程序中使用那个类

```
using System;
using RxProducer;

namespace Runner
{
  class Program
  {
    private static readonly Producer _myProducer = new Producer();

    static void Main()
    {
      _myProducer.Start();

      while(!line.Contains("quit"))
      {
        _myProducer.Tick();
        line = Console.ReadLine();
      }

      _myProducer.Stop();
    }

  }
} 
```

然后我的项目无法编译。

具体来说，它失败了：

```
_subject.Subscribe(RespondToNewData); 
```

在 RxProducer 类库中，更重要的是，编译器抛出的错误也没有什么意义：

```
Error   1   The best overloaded method match for 'System.Reactive.Subjects.Subject<FakeDal.Entites.DaftFrog>.Subscribe(System.IObserver<FakeDal.Entites.DaftFrog>)' has some invalid arguments  H:\programming\rxtesting\RxProducer\Producer.cs 17  7   RxProducer

Error   2   Argument 1: cannot convert from 'method group' to 'System.IObserver<FakeDal.Entites.DaftFrog>'  H:\programming\rxtesting\RxProducer\Producer.cs 17  26  RxProducer 
```

起初我以为它可能是静态的东西，所以我将类库中的所有内容都设置为静态，这根本没有区别。

直到现在我真的没有对 Rx 做太多事情，但我 99% 的时间都在使用 C# 和 VS，所以我知道错误告诉我它不能转换某种描述的类型，我只是不'不明白为什么它告诉我，尤其是当代码在静态程序中完美运行时，但在类库中却没有。

肖蒂

## 更新

Second thoughts, I just know there are going to be those who insist that I post the fakedal and daft frog definitions, even though IMHO they won't be required, but to pacify the hordes of pretenders who will ask here they are :-)

```
using System;

namespace FakeDal
{
  public class Repository<T>
  {
    public void Save(T entity)
    {
      Console.WriteLine("Here we write T to the database....");
    }

  }
}

namespace FakeDal.Entites
{
  public class DaftFrog
  {
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsTotalyDaft { get; set; }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:15:19.367

Sounds like the compiler is having trouble inferring the Action...**might be missing a using statement for the relevant extension method**. Alternatively, try either of:

```
_subject.Subscribe ((Action<DaftFrog>) RespondToData); 
```

Or:

```
var obs = Observer.Create ( I forget the overload );
_subject.Subscribe( obs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:18:54.653

Include `using System;` into file where you have Producer, this will help to convert `RespondToNewData` to `IObserver<T>`.

# mustache - 如何在 Mustache 中查找列表不为空

> ID：15867243
> 
> 赞同：4
> 
> 时间：2013-04-07T20:10:14.337
> 
> 标签：mustache

如果以下数据结构中的文档列表不为空，我们需要显示一些消息。

```
 {
      "id:" 1,
      "documents": [
          {
             "name": "2353626.jpg",
             "type": "image"
          }
      ]
    } 
```

最初我们考虑在 JSON 中添加一个标志并尝试渲染 mustache 模板。但是我们想避免这种情况，因为我们觉得我们正在污染我们对 UI 的 API 响应。

```
 "hasDocuments": true 
```

**方法一：**

我们试图显示基于第 0 个元素的消息

```
 {{#documents.0}}
       Documents available
    {{/documents.0}}
    {{^documents}}
       Documents missing
    {{/documents}} 
```

这在**mustache.js**中运行良好，但我们需要使用**mustache.java**的扩展来使其工作@ [https://gist.github.com/spullara/5331831](https://gist.github.com/spullara/5331831)

**方法二：**

我们试图访问空方法

```
 {{^documents.empty}}
       Documents available
    {{/documents.empty}} 
```

**不幸的是，这在mustache.js**中不受支持，但在**mustache.java**中运行良好

 **我们计划采用第 0 元素方法。有没有更好的方法来识别列表是否为空？**

# asp.net-mvc - TextBox(HtmlHelper, String) - 是否也在视图模型中搜索值？

> ID：15867245
> 
> 赞同：0
> 
> 时间：2013-04-07T20:10:22.710
> 
> 标签：asp.net-mvc, asp.net-mvc-4

Pro Asp.Net MVC 4（第 535 页）：

> 字符串参数用于搜索视图数据、ViewBag 和视图模型，以找到可用作输入元素基础的相应数据项。因此，例如，如果您调用 `@Html.TextBox("DataValue")`，MVC 框架会尝试查找与键 DataValue 对应的某些数据项。检查以下位置： • ViewBag.DataValue • @Model.DataValue

Book 指出，采用单个字符串参数的 Html.TextBox 的重载会同时检查`ViewData`和*查看模型*以获得显示值。但经过一番试验后，它似乎只检查`ViewData`一个值，而不是一个*视图模型*。

因此，在从属性生成的输出`Html.TextBox`中`value`设置为*空字符串*：

```
public class Person 
{
    public string FirstName = "Leila";
} 
```

*.cshtml：

```
@model HelperMethods.Models.Person
                  ...   
@Html.TextBox("FirstName") 
```

输出：

```
 ...
<input id="FirstName" name="FirstName" type="text" value="" /> 
```

那么这本书是错误的并且`TextBox(HtmlHelper, String)`只检查`ViewData`还是它也检查*视图模型*？

**更新：**

```
public class Person 
{
    public string FirstName = "Leila";
}

public class HomeController : Controller
{

    public ActionResult Index()
    {
        return View((object)new Person());
    }
} 
```

索引.cshtml：

```
@model Mvc4.Controllers.Person

@{
    Layout = null;
}

<!DOCTYPE html>

    <html>
     <head>
        <meta name="viewport" content="width=device-width" />
        <title>Index</title>
     </head>
     <body>
        @Html.TextBox("FirstName")
     </body>
    </html> 
```

非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:42:11.200

刚刚做了一个快速测试，似乎它必须是一个属性而不是一个字段。

所以这应该工作：

```
public class Person 
{
    public string FirstName { get; set; }
} 
```

# django - Django 查询：你能嵌套注解吗？

> ID：15867247
> 
> 赞同：0
> 
> 时间：2013-04-07T20:10:29.020
> 
> 标签：django, django-models

我有一个 Django 查询，我想通过 test_id 对测试尝试的次数进行分组，并在每个测试中获得平均值。

test_attempts 表记录用户对给定测试所做的每次测试尝试。我想找到每次测试的平均尝试次数

**这是我的查询：**

```
average = TestAttempts.objects.values('test_id').annotate(Avg(Count('test_id'))).filter(user_id=id) 
```

我收到以下错误：“计数”对象没有属性“拆分”

有没有办法处理这个而不必编写原始 SQL？

更新：这是 TestAttemt 模型

```
class TestAttempts(models.Model):
id = models.IntegerField(primary_key=True)
user_id = models.IntegerField()
test_id = models.IntegerField()
test_grade = models.DecimalField(max_digits=6, decimal_places=1)
grade_date_time = models.DateTimeField()
start_time = models.DateTimeField()
seconds_taken = models.IntegerField()
taking_for_ce_credit = models.IntegerField()
ip_address = models.CharField(max_length=25L)
grade_points = models.DecimalField(null=True, max_digits=4, decimal_places=1, blank=True)
passing_percentage = models.IntegerField(null=True, blank=True)
passed = models.IntegerField()
class Meta:
    db_table = 'test_attempts' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:33:04.523

您想要一个数字，即所有测试的平均尝试次数？你有测试模型吗？

这将起作用：

```
average = (Test.objects.filter(testattempt__user_id=id)
             .annotate(c=Count('testattempt'))
             .aggregate(a=Avg('c'))['a']) 
```

如果您没有 TestAttempt → Test 关系，而只有一个 test_id 字段，那么这*应该*有效：

```
average  = (TestAttempt.objects.filter(user_id=2)
                               .values('test_id')
                               .annotate(c=Count('pk'))
                               .aggregate(a=Avg('c'))) 
```

but doesn't work for me on sqlite, and I don't have a proper db at hand.

# ruby-on-rails - 在助手中使用 case 语句

> ID：15867248
> 
> 赞同：0
> 
> 时间：2013-04-07T20:10:29.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, case

我以前没有使用过 case 语句，并且想知道如何执行以下操作。

我有许多新闻页面，每个都有与部门相关的帖子，所以这些页面

```
/tynewyddnews
/woodsidenews
/outreachnews
/sandpipernews 
```

在我的主页上，我从每一个中获取最新帖子并显示它们。

后模型

```
def self.top_posts
#Array with each of the 4 departments - first record
top_posts = [
  self.tynewydd_posts.first,
  self.woodside_posts.first,
  self.sandpiper_posts.first,
  self.outreach_posts.first
]
#remove entry if nil
top_posts.delete_if {|x| x==nil}
return top_posts
end 
```

tynewydd_posts 例如是一个范围

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.published_on DESC" 
```

因此，如果我正在阅读来自 tynewydd 的主页上的帖子并想要创建指向 /tynewyddnews 的链接，或者我正在阅读来自woodside 的帖子并想要链接到 /woodside 我被告知案例陈述可能会有所帮助，但我不确定使用什么作为参数，所以到目前为止我的尝试是

```
def public_news
 case Post.top_posts
  when :tynewydd_posts == 'Ty Newydd'
   link_to('...Read more', tynewyddnews_path)
  when :woodside_posts == 'Woodside'
  link_to('...Read More', woodsidenews_path)
end 
```

结尾

然后在我看来我可以打电话给助手

```
<%= public_news %> 
```

显然是一个悲惨的尝试，首先在示例中我看到在设置案例时设置了一个变量？如果有人可以就如何实现这一目标提供一些建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:15:01.240

试试这个变种：

```
def public_news
  path = case
    when Post.tynewydd_posts then tynewyddnews_path
    when Post.woodside_posts then woodsidenews_path
    ...
    else default_path end
  end
  link_to('...Read More', path)
end 
```

`when expression``expression`当被评估为真时将启动

# regex - 如何使用 '($RE{num}{real})' 作为正则表达式？

> ID：15867257
> 
> 赞同：1
> 
> 时间：2013-04-07T20:11:28.930
> 
> 标签：regex, perl

在下面的代码中，我想制作`g`和`f`打印相同的输出。差异`($RE{num}{real})$`以字符串形式给出。有人现在如何将其转换为正则表达式？

```
~/linux/test/perl/library/Regexp/Common/%RE/num/real$ cat main1.pl
#!/usr/bin/env perl

use strict;
use warnings;
use autodie;

use FindBin;
use lib "$FindBin::Bin/.";

use Regexp::Common;

sub f {
  my $x = shift;
  $x =~ s/^($RE{num}{real})$/$1 is real/;
  print "$x\n";
}

f("1.5");
f("15f");
f("1e5");
f(".1e5");
f("a");

my $regex_str='($RE{num}{real})';
#Neither of the following work.
#$regex_str=eval $regex_str;
#$regex_str=qr{$regex_str};
sub g {
  my $x = shift;
  $x =~ s/^$regex_str$/$1 is real/;
  print "$x\n";
}

g("1.5");
g("15f");
g("1e5");
g(".1e5");
g("a");

~/linux/test/perl/library/Regexp/Common/%RE/num/real$ ./main1.pl 
1.5 is real
15f
1e5 is real
.1e5 is real
a
1.5
15f
1e5
.1e5
a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:08:22.517

```
my $regex_str="($RE{num}{real})"; 
```

或者

```
my $regex_str=qr/($RE{num}{real})/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:18:39.903

Single quotes in Perl do not interpolate variables. Use double quotes to interpolate a variable. To create a regular expression, though, you may use the `qr//` operator:

```
my $regex = qr/$RE{num}{real}$/;
if ( $x !~ $regex ) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:19:58.567

一个问题是你`$`最后有两个令牌：

```
my $regex_str='$RE{num}{real}$';
...
if( $x !~ /^$regex_str$/) { 
```

# ruby-on-rails - rails 4.0 beta，fields_for 不接受多个参数

> ID：15867260
> 
> 赞同：0
> 
> 时间：2013-04-07T20:11:47.450
> 
> 标签：ruby-on-rails, arguments, ruby-on-rails-4, fields-for

这有效：

```
<%= f.fields_for :exercise do |builder| %>
            <%= render 'exercise_fields', f: builder %>
        <% end %>
        <%= add_fields "Add Exercise", f, :exercises %>

    <%= f.submit %> 
```

但是添加另一个参数（在这种情况下是对对象的引用）会引发 ArgumentError：

```
<% @workout.exercises.each do |exercise| %>

        <%= f.fields_for :exercise, exercise do |builder| %>
            <%= render 'exercise_fields', f: builder %>
        <% end %>
        <% end %>
        <%= add_fields "Add Exercise", f, :exercises %>

    <%= f.submit %> 
```

错误：参数数量错误（2 比 1）

我在不同的地方多次看到这种情况。这是一个错误还是我犯了一些简单的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:14:59.533

尝试将其作为数组传递：

```
<%= f.fields_for [:exercise, exercise] do |builder| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:39:41.660

糟糕，这当然是一个简单的错误。我在自定义表单构建器中覆盖了 fields_for 辅助方法，我只将它定义为有一个参数。

# android - 无法设置在 Master/Detail Fragment ICS 4.0 中激活的列表项

> ID：15867261
> 
> 赞同：0
> 
> 时间：2013-04-07T20:11:51.117
> 
> 标签：android, android-layout, android-fragments, android-listfragment

我正在尝试使用主/细节（片段）布局开发应用程序，但我面临一个奇怪的问题，即当我添加自己的列表视图适配器时，单击/选择时列表视图项目的激活停止工作。

默认提供的带有虚拟数据的代码是

```
 setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(
      getActivity(), android.R.layout.simple_list_item_activated_1,
      android.R.id.text1, DummyContent.ITEMS)); 
```

我替换的代码是

```
 CMyListAdapter adapter = new CMyListAdapter(getActivity(),
            CMyContent.getSampleMyContentList());
    setListAdapter(adapter); 
```

现在，当我单击 listview 项目时，它会突出显示并且不会保持持久性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T07:45:36.897

如果您使用的是自定义布局，请确保您设置了正确的背景可绘制对象：

```
android:background="?android:attr/activatedBackgroundIndicator" 
```

如果您想自定义指标的样式，您必须定义自己的`StateListDrawable`xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
   android:exitFadeDuration="@android:integer/config_mediumAnimTime">

   <item android:drawable="@color/red" android:state_pressed="true"/>
   <item android:drawable="@color/blue" android:state_selected="true"/>
   <item android:drawable="@color/green" android:state_activated="true"/>

</selector> 
```

并将其分配为您的行布局背景。

# r - ggplot2：geom_text() 和 facet_grid()？

> ID：15867263
> 
> 赞同：22
> 
> 时间：2013-04-07T20:12:13.600
> 
> 标签：r, plot, ggplot2

我只想为 ggplot2 生成的每个图形面板添加注释；每个角落只有简单的标签，如 (a)、(b)、(c) 等。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-07T20:28:41.550

来自：[https](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/RL8M7Ut5EpU) ://groups.google.com/forum/?fromgroups=#!topic/ggplot2/RL8M7Ut5EpU您可以使用以下内容：

```
library(ggplot2) 
x <-runif(9, 0, 125) 
data <- as.data.frame(x) 
data$y <- runif(9, 0, 125) 
data$yy <- factor(c("a","b","c")) 

ggplot(data, aes(x, y)) + 
    geom_point(shape = 2) + 
    facet_grid(~yy) + 
    geom_text(aes(x, y, label=lab),
        data=data.frame(x=60, y=Inf, lab=c("this","is","the way"),
             yy=letters[1:3]), vjust=1) 
```

这应该给你这个：

![](https://rud.is/se/geomtxtex.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T20:28:05.943

基本上，您创建一个`data.frame`包含文本列的文本，以及一个包含您用于的变量的列`facet_grid`。然后，您可以简单地添加 a `geom_text`with that `data.frame`。`geom_text`有关文本放置等的更多详细信息，请参阅文档。

# typescript - 使用打字稿作为主要客户端语言

> ID：15867264
> 
> 赞同：1
> 
> 时间：2013-04-07T20:12:25.697
> 
> 标签：typescript

我正在尝试找到一种使用 javascript 的方法，以便我可以使用代码完成、重构等工具。我终于意识到这不是visual studio或webstorm之类的工具的问题，而是与javascript语言有关（主要是因为它是一种动态语言）。我发现 typescript 是一个很好的静态替代方案。但我发现了关于它的好评论和坏评论。

我想知道它适合投资吗？我的意思是我可以将它用作我的主要客户端语言吗？将我们所有的 javascript 代码迁移到 typescript 并尝试使用它的所有语言功能是一个好主意吗？

我需要一个公正的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T08:43:59.470

我赞成使用 TypeScript 的简单论点（假设您需要工具支持）是这样的。如果您决定以后不想使用 TypeScript，您可以删除所有`.ts`文件，保留所有`.js`文件并仅使用 JavaScript。

TypeScript 生成的 JavaScript 与我自己编写的那种代码相差不到一百万英里。它不是乱码或不可读的。

因此，您可以获得工具、编译时检查、早期访问 ECMAScript 6 语言功能、访问可能永远不会进入 ECMASCript 的功能（如泛型）的好处，并且如果您更改，您不会被锁定到 TypeScript你的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T00:34:35.277

没有不偏不倚的答案。Typescript 得到了微软的大力支持。Microsoft 将 Anders Hejlsberg [http://en.wikipedia.org/wiki/Anders_Hejlsberg](http://en.wikipedia.org/wiki/Anders_Hejlsberg)放在了 C# 的创建者后面，他的时间*非常*宝贵，所以我认为它不会很快消失。在 MS 世界中，打字稿已经变得非常流行。

在非 MS 世界中，它也迅速引起轰动。Webstorm 是用于 Web 开发的首要 IDE（AngularJS 团队等使用）已将 typescript 突出显示为现在的主要新功能[http://www.jetbrains.com/webstorm/](http://www.jetbrains.com/webstorm/)![在此处输入图像描述](https://i.stack.imgur.com/R0pAX.png)

# ruby-on-rails - Rails 3.2 中的会话永不过期

> ID：15867265
> 
> 赞同：0
> 
> 时间：2013-04-07T20:12:36.237
> 
> 标签：ruby-on-rails, session, ruby-on-rails-3.2, session-timeout

我的会话似乎永远不会过期，即使我将 session_store.rb 文件配置为具有以下代码：

```
Barcadia::Application.config.session_store :cookie_store, 
                                           :key => '_barcadia_session',
                                           :expire_after => 15.minutes 
```

如果用户空闲超过 15 分钟，我希望用户必须重新登录。我正在使用 rails 3.2 并且我已经尝试过 cookie_store 和 active_record_store ......似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T07:31:02.113

```
Some::Application.config.session_store :active_record_store, {
  expire_after: 24.hours,
} 
```

这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:56:19.230

我看到的唯一缺少的是括号：

```
Barcadia::Application.config.session_store :cookie_store, {
                                      :key => '_barcadia_session',
                                      :expire_after => 15.minutes
} 
```

# asp.net-mvc - jQuery自动完成完全没有响应

> ID：15867266
> 
> 赞同：2
> 
> 时间：2013-04-07T20:12:38.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, jquery-autocomplete

这是我第一次使用我的 ASP MVC3 内网应用程序真正深入研究 jQuery。我需要自动完成功能才能引用数据库中的项目列表。我按照[这里找到的教程](http://www.shahnawazk.com/2010/07/jquery-ui-autocomplete-widget-with.html)并认为“好的，这看起来很容易”......现在在实现代码并研究其他方法并将我的头撞在键盘上至少四个小时之后，我离完成这项工作还差得远在我写代码之前。

这是视图中的代码，以及库声明。仅供参考 - 我正在接管这个项目，所以你看到的所有其他 javascript/Ajax 都是由比我更有经验的人编写的。我将所有代码都放在本节中，以防万一出现其他问题。

```
<link href="../../Content/jquery-ui-1.9.2.custom.css" rel="stylesheet">

<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">

    $(function () {
       $("#BankName").autocomplete({
          source: '@Url.Action("GetBanks", "AgentTransmission")',
          minLength: 1
    });

    $(function () {
        $("#drpProducerType").change(function () {
            var value = $(this).val();
            if (value == "SoleProprietor") {
                $("#Role").val(value);
                $('#DSSfields').removeClass('noSee');
                $('#DSSfields').addClass('seeMe');
                //alert("Role must be set to \"Sole Proprietor\" as well. Monet will do this for you!");
            }
            else {
                //TO DO: add role stuff here as well
                $('#DSSfields').removeClass('seeMe');
                $('#DSSfields').addClass('noSee');
            }

        });
        $("#Role").change(function () {
            var value = $(this).val();
            if (value == "SoleProprietor") {
                $("#drpProducerType").val(value);
                alert("Producer Type changed to \"Sole Proprietor\" as well");
            }

        });
    });

    function ChangeChannel() {
        //this function called if Market Segment changes, to update the channel
        var pendistcode = document.getElementById('Pendist');
        if (pendistcode == null) alert('Error: Cannot find Market Segment control');

        $.ajax({
            type: 'POST',
            url: '/AgentTransmission/GetChannel/',
            data: { pendist: pendistcode.value },
            success: function (data) {
                //                alert("success: " + data);
                $('#channelName').html(data);
                $('#Channel').val(data);
            },
            error: function (data) {
                alert("failure to obtain Channel name");
            }
        });

        CheckTerritory('channel');

    } //end ChangeChannel

    function CheckTerritory(category) {
        //this function called when changes happen that could change the territory (inddist)

        //if the channel changed, or the alignment indicator, update the Territory
        if ((category == "channel") | (category == "align")) UpdateTerritory();

        //only trigger if the state or zip changed on the aligned address 
        if ((category == "L") && ($('#AlignmentL').attr('checked'))) UpdateTerritory();
        if ((category == "M") && ($('#AlignmentM').attr('checked'))) UpdateTerritory();

    } //end CheckTerritory

    function UpdateTerritory() {

        var i = $('#INDDist').val();
        var p = $('#Pendist').val();
       // alert(":" + i + ":" + p + ":");

        //if ((i == "") || (p == "")) return;
        if (p == "") return;

        if ($('#INDDist').val() == "864") {
            $('#INDDist').val("701");
        }
        else {
            if ($('#INDDist').val() == "") {
                $('#INDDist').val("864");
            }
        }
    } //end UpdateTerritory

    function MoreCompanies(row) {
        //if the user clicks on the plus sign, add more company rows
        if (row == '3') {
            $('#plus2').html(' ');
            $('#row3').removeClass('noSee');
            $('#row3').addClass('seeMe');
        }
        if (row == '4') {
            $('#plus3').html(' ');
            $('#row4').removeClass('noSee');
            $('#row4').addClass('seeMe');
        }
        if (row == '5') {
            $('#plus4').html(' ');
            $('#row5').removeClass('noSee');
            $('#row5').addClass('seeMe');
        }

    } //end MoreCompanies

    function CompanyFields() {

    } //end CompanyFields

    function ShowHideTerritory() {
        alert('sunshine');
    } //end ShowHideTerritory

</script> 
```

自动完成应该在文本框上工作

```
 <div class="M-editor-label">
        Bank\Agency Name
    </div>
    <div class="M-editor-field">
        @Html.TextBoxFor(model => model.BankName, new { id = "BankName" })
        @Html.ValidationMessageFor(model => model.BankName)
    </div> 
```

这是`GetBanks`控制器的方法。我已经在这个方法的第一行设置了一个断点，但我一直无法让它命中。

```
 //GET
    public JsonResult GetBanks(string search)
    {
        var banks = from c in db.BankListMaster.Where(n => n.BankName.Contains(search))
                        select c.BankName;

        banks = banks.Distinct();

        return Json(banks, JsonRequestBehavior.AllowGet);
    } 
```

编辑

[如果我用此方法](http://blog.schuager.com/2008/09/jquery-autocomplete-json-apsnet-mvc.html)建议的代码替换当前`.autocomplete`代码，我会在 Chrome 的调试器中收到以下错误：

```
Uncaught Error: cannot call methods on autocomplete prior to initialization; attempted to call method '/AgentTransmission/GetBanks' 
```

这是新代码，我把它放在与我之前使用的完全相同的位置：

```
$(document).ready( function() {
  $('#BankName').autocomplete('@Url.Action("GetBanks", "AgentTransmission")', {
      dataType: 'json',
      parse: function(data) {
          var rows = new Array();
          for(var i=0; i<data.length; i++){
              rows[i] = { data:data[i], value:data[i].BankName };
          }
          return rows;
      },
      formatItem: function(row, i, n) {
          return row.BankName + ' - ' + row.Description;
      },
      width: 300,
      mustMatch: true,
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:40:39.977

我添加了一组额外的右括号来`autocomplete`清除它。小部件现在可以正常工作。

```
$(function () {
   $("#BankNameAuto").autocomplete({
      source: '@Url.Action("GetBanks", "AgentTransmission")',
      minLength: 1
    });
  }); 
```

# javascript - 性能 - match() 与 exec() 用于提取单个值

> ID：15867267
> 
> 赞同：4
> 
> 时间：2013-04-07T20:12:46.087
> 
> 标签：javascript

假设我需要一个字符串中的单个值，比如版本号。我应该使用 exec() 还是 match()？

**片段1**

```
res1 = /(\d+\.\d+)/.exec(some_string)[0]; 
```

对比

**片段2**

```
res1 = some_string.match(/\d+\.\d+/)[0]; 
```

哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:25:04.287

[您可以使用https://jsbench.me/](https://jsbench.me/)来衡量代码的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:15:09.783

它会使用`match`，因为它可以保持在一条线上，但这是一个品味问题。

# ios - RESTKit、JSONKit、json-framework - 这些库可以互换吗？

> ID：15867273
> 
> 赞同：-1
> 
> 时间：2013-04-07T20:13:29.283
> 
> 标签：ios, objective-c, json

[JSONKit](https://github.com/johnezang/JSONKit)，[RestKit](https://github.com/RestKit/RestKit)，[json-framework](https://github.com/stig/json-framework/) - 这些库可以互换吗？何时使用它们中的每一个，或者只了解 RestKit 就足够了（似乎更流行和记录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:58:24.457

你引用的图书馆做不同的事情。

`JSONKit`并且`json-framework`是两个 JSON 库。

`RestKit`是一个在 Objective-C 对象和 RESTful Web 服务之间提供对象映射的框架。

要回答您的问题，、`JSONKit`等是可以互换的，因为它们提供相同的功能集：编码/解码 JSON 数据，而完全不同。`json-framework``NSJSONSerialization``RestKit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:45:43.057

我推荐使用**NSJSONSerialization**仅仅是因为它现在已内置到基础框架中，这意味着它将*始终受到支持，并且在很大程度上是向后兼容的（尽管这是 Apple，所以对此没有任何承诺）。它还确实有助于布局理解当前可以在目标 c 中序列化哪些对象。

*   顶级对象是**NSArray**或**NSDictionary**。
*   所有对象都是**NSString**、**NSNumber**、**NSArray**、 **NSDictionary**或**NSNull**的实例。
*   所有字典键都是**NSString**的实例。
*   数字不是**NaN**或无穷大。

[NSJSONSerialization 类文档](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

*没有什么事情是永远的。:)

# c# - 在MVC中，如何返回上一页View？

> ID：15867275
> 
> 赞同：0
> 
> 时间：2013-04-07T20:13:40.983
> 
> 标签：c#, asp.net-mvc, razor

我的 MVC 中有一个发布操作，类似于：

```
 public ActionResult FilterData() {
        // Do some work
        // ....
        if (lastView != null) {
            return View(lastView);
        }
        return View("Default");
    } 
```

我在哪里可以找到“lastView”，这样我就可以将用户返回到他们在回发之前所在的任何地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:17:25.843

您可以提供 URL 作为参数：

```
public ActionResult FilterData(string redirectUrl = null)
{
    // Do some work
    // ....
    if (redirectUrl != null) {
        return this.Redirect(redirectUrl);
    }

    return View("Default");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:29:22.413

这不会很好地扩展，但是您可以创建另一个/编辑 ActionResult 以从您刚刚来自的视图中传递一个参数：

```
ActionResult FilterData(previousViewName)
{
    if (lastView !< null)
    {
        return View(previousViewName);  // or RedirectToAction(previous'controller'Name)
    }
    else
    {

    }
} 
```

# aspell - 为什么 aspell 会提示它无法检查的单词？

> ID：15867280
> 
> 赞同：0
> 
> 时间：2013-04-07T20:14:33.800
> 
> 标签：aspell, hunspell

这是我运行的命令：

```
> echo "civilization" | aspell -a
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.6.1)
& civilization 3 0: civilization, civilizations, civilization's 
```

为什么 aspell 提示这个词（“文明”），但没有检查它的拼写？相比之下，hunspell 似乎做到了这一点

```
> echo "civilization" | hunspell
Hunspell 1.3.2
* 
```

但这可能是因为两个拼写检查器使用不同的字典。

**编辑：**在不同的机器和不同/旧的 aspell 版本上运行它似乎可以工作：

```
> echo civilization | aspell -a
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.3)
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:21:59.820

大写和小写
如果你尝试一下，你会得到什么`Civilization`？

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

T:\msys\1.0\src\aspell-0.60.6\.libs>echo "zivilisation" | aspell -a
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.6)
& zivilisation 3 1: Zivilisation, Zivilisationen, Sterilisation

T:\msys\1.0\src\aspell-0.60.6\.libs>echo "Zivilisation" | aspell -a
@(#) International Ispell Version 3.1.20 (but really Aspell 0.60.6)
*

T:\msys\1.0\src\aspell-0.60.6\.libs> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T23:35:08.483

根据 Kevin Atkinson（aspell 维护者，[链接](http://aspell.net/)）的说法，这是一个*错误*，他不确定是否有针对它的报告。他也不确定这是否/何时会得到解决。

# python - 从 unix 调用 python 的基本帮助

> ID：15867283
> 
> 赞同：3
> 
> 时间：2013-04-07T20:14:44.970
> 
> 标签：python, unix

嗨，我对 python 很陌生，所以我一直在玩它。我最近为我正在处理的某个进程创建了 2 个文件，这些文件在运行 python 时似乎正在运行，但在 unix 命令行中编写 python name.py argv 时什么也不做。这可能是一些基本的东西，我会很感激一些帮助。第一个文件（make_dir.py）

```
import os
import sys

def main():
    directory = sys.argv[1]
    if not os.path.exists(directory):
      os.makedirs(directory) 
```

在 unix 终端我写

```
python make_dir.py /home/user/Python/Test/ 
```

结果：未创建测试文件夹。

第二个文件可能有同样的问题。第二个文件目录.py

```
import sys
import os

def main():
  os.chdir(sys.argv[1])
  File = open(sys.argv[2] , 'w')
  File.write(sys.argv[3])
  File.close() 
```

在 unix 终端：

```
python directory.py /home/user/Python/TEST/ a.log "this is a test" 
```

a.log 未创建。如果我收到一些错误消息，我可能会弄清楚但没有消息。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T20:17:19.047

您正在定义一个名为 的函数`main`，但从不调用它。做：

```
import os
import sys

def main():
    ...

if __name__ == '__main__':
    main() 
```

有关此成语的更多详细信息，请参见[此处](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:18:23.580

你实际上并没有打电话`main`。只需`main()`在脚本末尾添加就足够了，但通常使用以下成语：

```
if __name__ == '__main__':
    main() 
```

`main`如果脚本是直接执行的，而不是从另一个模块导入，这将调用。

[将模块作为脚本](http://docs.python.org/2/tutorial/modules.html#executing-modules-as-scripts)执行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T20:21:19.877

Python 不是 C 语言，`def main`也不是魔法。Python 程序没有预定义的执行入口点。您的代码所做的只是定义一个 main 函数（不运行它），因此 Python 定义`main`然后停止（根据您的要求）。

`main()`如果您希望它执行，您必须显式调用。你应该使用这个成语：

```
if __name__ == '__main__':
    main() 
```

`__name__`是在模块级别创建的包含模块名称的魔术变量。如果`__name__`是`'__main__'`，则表示当前模块未导入，而是直接运行。这个习惯用法允许您将 Python 文件用作模块（您可以导入的东西——`main()`不应该自动运行的地方）和脚本（`main()`应该自动运行的地方）。

# .net - 匹配英文单词与可选的点，斜线，数字存在

> ID：15867287
> 
> 赞同：1
> 
> 时间：2013-04-07T20:15:11.270
> 
> 标签：.net, regex

我想匹配以下单词

树 , tree.com , tree123 , 123tree , tree-up ,

我做了以下条件..它可以正常工作，但我想将它们加入一个正则表达式

```
bool res1=Regex.IsMatch(term, "^[a-zA-Z-.]+$",RegexOptions.IgnoreCase)  
//works well but it matches . and - if they come alone  i want a solution ?!

bool res2=Regex.IsMatch(term, "^[a-zA-Z-.]+[0-9]+$",RegexOptions.IgnoreCase) //works well 

bool res3=Regex.IsMatch(term,"^[0-9]+[a-zA-Z-.]+$", RegexOptions.IgnoreCase)//works well 
```

我知道我可以使用

```
if(res1 || res2 || res3 ) {} 
```

但我想在 1 个表达式中加入这些表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:22:07.853

您可以使用前瞻零宽度断言来检查以确保包含至少一个字母（或其他任何必需的字母）

```
^(?=.*[a-zA-Z])[0-9a-zA-Z-.]+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:45:40.537

假设您不想要前导、尾随或连续的点或连字符，我建议这种模式：

```
bool res = Regex.IsMatch(term, "^[a-z0-9]+(?>[-.][a-z0-9]+)*$", RegexOptions.IgnoreCase); 
```

如果您想确保至少有一个字母，您可以将模式更改为：

```
^(?>[0-9]+(?>[-.][0-9]+)*[-.]?)?[a-z]+(?>[-.]?[a-z0-9]+)*$ 
```

[演示](http://regexstorm.net/tester?p=%5E%28%3F%3E%5B0-9%5D%2B%28%3F%3E%5B-.%5D%5B0-9%5D%2B%29*%5B-.%5D%3F%29%3F%5Ba-z%5D%2B%28%3F%3E%5B-.%5D%3F%5Ba-z0-9%5D%2B%29*%5Cr%3F%24&i=tree%0D%0Atree.com%0D%0Atree123%0D%0A123tree%0D%0Atree-up%0D%0A123%0D%0AA%0D%0Aa..b%0D%0Aa.1.b&o=im)

# sencha-touch - 清仓煎茶

> ID：15867299
> 
> 赞同：0
> 
> 时间：2013-04-07T20:16:21.603
> 
> 标签：sencha-touch, sencha-touch-2

嗨，我有一个使用代理填充商店的应用程序。我想通过单击按钮清除商店，让用户输入不同的信息并重新填充是否有意义。我目前正在使用：

```
 window.location.reload(); 
```

但这会出现几秒钟的白屏，这并不好。我还尝试了以下方法：

```
var store = Ext.getStore('Places'); 

store.getProxy().clear();

store.data.clear(); store.sync(); 
```

但这给出了与 .getProxy() 相关的错误

我也试过：

```
Ext.StoreMgr.get('Places').removeAll();
Ext.StoreMgr.get('Places').sync(); 
```

但是当我去重新填充旧数据时。有没有办法清空商店？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:57:47.730

清除商店的最佳方法是

```
 var store = Ext.getStore('SessionStore');
         store.load();
         store.getProxy().clear();
         store.data.clear();
         store.sync(); 
```

# c# - 将相关实体添加/删除到对象列表

> ID：15867303
> 
> 赞同：0
> 
> 时间：2013-04-07T20:16:41.987
> 
> 标签：c#, razor, asp.net-mvc-4, many-to-many, entity-framework-5

好的，首先我的实际书籍和作者对象定义：

```
public class Book
{
    [Key]
    public virtual int BookID { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [MaxLength(100)]
    public virtual String Title { get; set; }

    [DataType(DataType.MultilineText)]
    public virtual String Abstract { get; set; }

    [RegularExpression(@"\d{4}")]
    public virtual String Year { get; set; }

    [Required]
    [Display(Name="Genre")]
    public virtual int GenreID { get; set; }

    public virtual Genre Genre { get; set; }

    public virtual List<Author> Authors { get; set; }

    public Book()
    {
        Authors = new List<Author>();
    }
}

public class Genre
{
    [Key]
    public virtual int GenreID { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [MaxLength(30)]
    public virtual String Name { get; set; }

    public virtual List<Book> Books { get; set; }
}

public class Author
{
    [Key]
    public virtual int AuthorID { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [MaxLength(50)]
    public virtual String Firstname { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [MaxLength(50)]
    public virtual String Lastname { get; set; }

    public virtual List<Book> Books { get; set; }

    public Author()
    {
        Books = new List<Book>();
    }

    [NotMapped]
    public string Fullname 
    {
        get { return String.Format("{0}, {1}", Lastname, Firstname); }
    }

    public override string ToString()
    {
        return Fullname;
    }
} 
```

使用 EF-Migrations 我得到一个 configuration.cs 文件，我在其中输入了我的 Data-Seed，然后使用 add-migration 进行第一次迁移以初始化数据库 EF 正确创建相应的表 Authors、Books、Genres 和最后但并非最不重要的AuthorBooks 保存书籍和作者之间的多对多关系。

到目前为止，我的整个演示应用程序都在工作。我唯一的问题是实体框架似乎拒绝保存 AuthorBooks 关系。我已经设置了我的应用程序，以便在书籍创建/编辑时我可以通过 MultiSelectList-ListBox 选择相关的作者。

书控制器视图模型：

```
public class BookControllerViewModel
{
    public Book actualBook { get; set; }
    public String redirectUrl { get; set; }
    public MultiSelectList Authors { get; set; }
    public int[] AuthorIDs { get; set; }
    public SelectList Genres { get; set; }
} 
```

ViewModel包含受创建/编辑操作约束的书籍，这是基于本书的正确选择INFO的多电机列表，我添加了INT []权威以保留用户将在Create listbox中选择的选择IDS /编辑视图。

```
@model BookStoreInternet.ViewModels.BookControllerViewModel

    <div class="editor-label">
        @Html.LabelFor(model => model.actualBook.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.actualBook.Title)
        @Html.ValidationMessageFor(model => model.actualBook.Title)
    </div>

    <div class="editor-label">
        <label>Author@( Model.actualBook.Authors.Count > 1 ? "s" :"" )</label>
    </div>
    <div class="editor-field">
        @Html.ListBox("AuthorIDs", Model.Authors)
        @Html.ValidationMessageFor(model => model.actualBook.Authors)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.actualBook.Abstract)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.actualBook.Abstract)
        @Html.ValidationMessageFor(model => model.actualBook.Abstract)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.actualBook.Year)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.actualBook.Year)
        @Html.ValidationMessageFor(model => model.actualBook.Year)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.actualBook.GenreID, "Genre")
    </div>
    <div class="editor-field">
        @Html.DropDownList("actualBook.GenreID", Model.Genres)
        @Html.ValidationMessageFor(model => model.actualBook.GenreID)
    </div> 
```

这也很有效，因为发布到控制器动作的 ViewModel

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Edit(BookControllerViewModel bookVM)
    {
        if (ModelState.IsValid)
        {
            bookVM.actualBook.Authors = db.Authors.Where(x => bookVM.AuthorIDs.Contains(x.AuthorID)).ToList();
            db.Entry(bookVM.actualBook).State = EntityState.Modified;
            db.SaveChanges();
            return Redirect(bookVM.redirectUrl);
        }

        bookVM.Authors = new MultiSelectList(db.Authors, "AuthorID", "Fullname", bookVM.actualBook.Authors.Select(x => x.AuthorID));
        bookVM.Genres = new SelectList(db.Genres, "GenreID", "Name", bookVM.actualBook.GenreID);

        return View(bookVM);
    } 
```

正确填充了我期望的值。但不起作用的是 db.SaveChanges() 似乎“默默地”拒绝保存我添加到书中的作者。调试操作我可以看到 bookVM.ActualBook.Authors 实际上设置正确并包含选定的作者......但未创建可连接 AuthorBooks 的相应条目......

有人知道为什么这不起作用，甚至可能如何使它起作用吗？

提前致谢！

* * *

Thanks to **Gerts** answers I got this working by modifying the Controller-Action to

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Edit(BookControllerViewModel bookVM)
    {
        if (ModelState.IsValid)
        {
            var book = db.Books.Find(bookVM.actualBook.BookID);
            book.Update(bookVM.actualBook);
            book.Authors.Clear();
            foreach(var aid in bookVM.AuthorIDs)
                book.Authors.Add(db.Authors.Find(aid));
            db.SaveChanges();

            return Redirect(bookVM.redirectUrl);
        }

        bookVM.Authors = new MultiSelectList(db.Authors, "AuthorID", "Fullname", bookVM.actualBook.Authors.Select(x => x.AuthorID));
        bookVM.Genres = new SelectList(db.Genres, "GenreID", "Name", bookVM.actualBook.GenreID);

        return View(bookVM);
    } 
```

and adding a method to the Book model

```
 internal void Update(Book book)
    {
        Title = book.Title;
        Abstract = book.Abstract;
        Year = book.Year;
        GenreID = book.GenreID;
    } 
```

Thanks again to Gert!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:38:48.293

Because Book-Author is a many to many association you have to load `actualBook.Authors` first for the change tracker to be able to notice changes. Then you can add/remove items from it or replace it by a new collection. Setting its state is not necessary.

# javascript - HighStocks 更改 AJAX 参数

> ID：15867306
> 
> 赞同：0
> 
> 时间：2013-04-07T20:16:55.940
> 
> 标签：javascript, ajax, highcharts, jsonp, highstock

我的 highstocks 图表从 Yahoo 获取 JSON 数据，数据的结构类似于“www.blahAAPLblah.com”。

我想将 URL 中 AAPL 的值更改为其他公司股票代码，以便我可以获取数据并将其显示在我的图表上。如果我手动将字符串更改为 GOOG，那么它将正常工作。此外，如果我将`var ticker = 'GOOG'`URL 更改为`"www.blah" + ticker + "blah.com"`然后这也可以正常工作。

如果我有一个用户输入框，`var ticker = document.getElementById('userInput').value;`那么一切都会停止工作。

你有什么建议吗？

到目前为止，这是我的代码：http: [//jsfiddle.net/SgvQu/](http://jsfiddle.net/SgvQu/)

**更新**我尝试使用 JSONP 执行请求，但图表仍未加载。

```
 var closePrices = new Array();
    var dateArray = new Array();
    var timeStampArray = new Array();
    var timeClose = new Array();

function jsonCallback(data, ticker) {

            console.log( data );

            //Put all the closing prices into an array and convert to floats
            for(var i=0; i < data.query.results.quote.length; i++)
            {
                closePrices[i] = parseFloat( data.query.results.quote[i].Close );
            }

            //displays the values in the closePrices array
            console.log( closePrices );

            //Put all the dates into an array
            for(var i=0; i < data.query.results.quote.length; i++)
            {
                dateArray[i] = data.query.results.quote[i].date;
            }

            //Convert all the dates into JS Timestamps
            for(var i=0; i < dateArray.length; i++)
            {
                timeStampArray[i] = new Date( dateArray[i] ).getTime();
            }

            for(var i=0; i<data.query.results.quote.length; i++)
            {
                   timeClose.push( [timeStampArray[i], closePrices[i]] );
            }

            timeClose = timeClose.reverse();
            console.log ( timeClose );

            //displays the dateArray
            console.log( dateArray );
            console.log( timeStampArray );

            // Create the chart
        $('#container').highcharts('StockChart', {

            rangeSelector : {
                selected : 1
            },

            title : {
                text : ticker + ' Stock Price'
            },

            series : [{
                name : ticker,
                data: timeClose,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
}

function createChart() {  

    var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22' + ticker +'%22%20and%20startDate%20%3D%20%222013-01-01%22%20and%20endDate%20%3D%20%222013-02-25%22&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?';
    //Ajax call retrieves the data from Yahoo! Finance API
    $.ajax( url, {
        dataType: "jsonp",  
        success: function(data, status){
            console.log(status);
            jsonCallback(data, ticker);
        },
        error: function( jqXHR, status, error ) {
            console.log( 'Error: ' + error );
        }
    });
}

//Function to get ticker symbol from input box.
function getTicker() {
        var ticker = document.getElementById('userInput').value;
        createChart(ticker);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:36:45.867

Thanks to Sebastian Bochan for pointing me in the right direction with JSONP. I now have the chart functioning correctly :)

# javascript - 在jQuery中将选中复选框的值返回为CSV

> ID：15867307
> 
> 赞同：3
> 
> 时间：2013-04-07T20:16:57.800
> 
> 标签：javascript, jquery

我有一个表格，里面有复选框；

```
<form id="testid">
<input class="chkbx" type="checkbox" value="option 1" />option 1
<input class="chkbx" type="checkbox" value="option 2" />option 2
    <br/><br/><a id="test">test</a>
</form> 
```

我需要单击某个元素时返回的选中复选框的值。说，我需要提醒；

1.  `option1,option2`如果两个框都被选中，
2.  `option1`如果只选中选项 1，
3.  如果没有选择，则警告一个空框。

我怎样才能做到这一点？**[这](http://jsfiddle.net/H8HNm/)**是小提琴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:20:17.910

您可以使用`.filter()`和`.map()`：

```
var result = $('input[type="checkbox"]').filter(function() {
    return this.checked;
}).map(function() {
    return this.value;
}).get().join(','); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T20:21:03.203

这是一个回答你问题的小提琴。[http://jsfiddle.net/H8HNm/1/](http://jsfiddle.net/H8HNm/1/)

关键是这样的：

```
checked = []
$(".chkbx:checked").each(function () {
       checked.push($(this).val())
});
alert(checked.join(",")) 
```

此代码循环遍历所有选定的复选框并将它们添加到数组中。然后将它们连接在一起以生成最终输出。

# clickonce - 自定义 ClickOnce 的“状态更新”功能

> ID：15867310
> 
> 赞同：1
> 
> 时间：2013-04-07T20:17:08.217
> 
> 标签：clickonce, customization, startup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:11:21.147

您可以将 WPF 应用程序设置为不使用自动更新。该设置位于项目属性中`Publish -> Updates... -> (uncheck) The application should check for updates`。禁用该设置后，您可以自行编写代码来检查和下载更新的方式。

[请参阅本页底部](http://msdn.microsoft.com/en-us/library/system.deployment.application.applicationdeployment.aspx)的示例以异步检查 ClickOnce 更新。您可以将其用作脚手架来构建您自己的更新逻辑。

所以是的，您可以自定义流程，但仅限于从 ClickOnce API 获得的回调。

您可以使用异步回调来更新初始屏幕上的信息。是的，您需要重新启动，但这就是许多商业启动器/更新器的行为方式。如果更新不重要，您可以等待用户下次重新启动程序。这就是 Chrome 浏览器进行更新的方式。

您链接到的另一个 SO 问题是关于首次安装期间的演示文稿。如果在第一次运行期间不显示默认 UI 对您很重要，那么您必须编写一个用户将下载并运行的应用程序。该应用程序将使用[InPlaceHostingManager](http://msdn.microsoft.com/en-us/library/system.deployment.application.inplacehostingmanager.aspx)以编程方式下载您的“真实”应用程序，同时显示您的自定义 UI。

如果您在第一次安装时不关心默认 UI，您可以将更新逻辑放在您的主应用程序中并避免两个 .exe。如果不显示默认 UI 真的很重要，您将不得不使用两个 .exe 解决方案。

# java - Java中toString(int)的用途

> ID：15867316
> 
> 赞同：3
> 
> 时间：2013-04-07T20:17:57.870
> 
> 标签：java, tostring

我正在尝试解决 toString(32) 的目的。作为它的使用示例：

```
private SecureRandom sRandomString = new SecureRandom();

public String newRandomPass() {
    return new BigInteger(70, sRandomString).toString(32);
} 
```

我已经搜索了 JavaDocs，但仍然没有找到答案。我最接近的是来自这个答案：

[https://stackoverflow.com/a/1356337/1065389](https://stackoverflow.com/a/1356337/1065389)

但是，我仍然不明白 return 'g' 应该是什么意思。那么 toString(32) 实际上做了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T20:22:18.817

它返回具有给定基数的 BigInteger 的字符串表示形式。所以例如

```
return new BigInteger("70,10").toString(8); 
```

将返回“106”，因为它已被转换为以 8 为底的字符串。（仅限数字 0 到 7）

没有任何参数的法线`toString()`与 相同`toString(10)`，将整数转换为十进制系统。

并返回“g”，因为“g”实际上被计为一个数字（在这种情况下为 16），就像十六进制数（基数为 16）中的 A（表示 10）一样。

在这里阅读更多：[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#toString%28int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T20:23:46.267

toString 方法返回一个字符串，表示它所应用的对象的值。当您将其应用于数字时，您有一个可选的 radix 参数，可让您决定应该返回哪个数字基数（也称为二进制、八进制、十六进制，在 base-32 的情况下）。您应该阅读有关表示具有不同基数的数字的不同方法。

问候

# javascript - 将缓冲区写入文件 - 如何保持二进制格式？

> ID：15867320
> 
> 赞同：0
> 
> 时间：2013-04-07T20:18:04.277
> 
> 标签：javascript, node.js

我在咖啡脚本中有这段代码：

```
fs = require 'fs'

class PpmCanvas

  constructor: (@width, @height, @fileName) ->
        size = @width * @height * 3

        array = new Uint8ClampedArray size
        @buffer = new Buffer array

        for element, index in @buffer
            @buffer.writeUInt8 128, index

    plot: (x, y, r, g, b) ->
        true

    save: () -> 
        header = new Buffer "P6 #{@width} #{@height} 255\n"

        together = Buffer.concat([header, @buffer])

        fs.open @fileName, 'w', (err, fd) =>
            if err
                throw err

            fs.write fd, together.toString(), undefined, undefined, (err, written, buffer ) =>
                fs.close fd
canvas = new PpmCanvas 200, 200, 'image.ppm'
canvas.save() 
```

我正在尝试制作 ppm 图像类，但将图像保存到磁盘时遇到问题。所以我首先创建了 Uint8Clamped 数组来保存像素数据，然后用 Buffer 包装它，以便稍后将其写入磁盘。我将所有像素设置为某个值，以便在循环中具有一些初始颜色。只要值在 0..127 范围内，一切都很好，每个字节都作为一个字节写入文件，但是当值大于 127 时 - 每个字节都作为 2 个字节写入磁盘并且它会破坏图像. 我一直在尝试将缓冲区编码设置为“二进制”和其他所有内容，但它仍然被写入两个字节 - 所以请告诉我使用节点将二进制数据写入磁盘的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:45:41.957

`fs.write` expects its arguments to be a Buffer. You are also missing an argument. Really you should just use `fs.writeFile` for simplicity though.

```
// Add the missing 3rd arg and don't use 'undefined'.
fs.write fd, together, 0, together.length, 0, (err, written, buffer) ->

// Or just use this and drop the 'fs.open' call.
fs.writeFile @fileName, together 
```

# java - three layer of data, Parent-Child-Grandchild

> ID：15867322
> 
> 赞同：1
> 
> 时间：2013-04-07T20:18:07.273
> 
> 标签：java, hibernate

I have a hibernate issue where I have three layer of data, Parent-Child-Grandchild, Parent to Child one to many and child to grand child one to many. I am unable to save data when I say parent save (hibernate session save method), I use cascade.ALL. I am able to save two layer, parent to child one to many. What I need to do in this case. I have one parent record which has two child records and each child record has three grand child record. Please help.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T02:50:41.790

您需要一个自我引用的一对多关系。您需要多少级别并不重要。

这是一个很好的教程，可以指导你：http: [//viralpatel.net/blogs/hibernate-self-join-annotations-one-to-many-mapping/](http://viralpatel.net/blogs/hibernate-self-join-annotations-one-to-many-mapping/)

# vim - 搜索光标下主题的 vim 帮助

> ID：15867323
> 
> 赞同：25
> 
> 时间：2013-04-07T20:18:13.440
> 
> 标签：vim, neovim

在使用一些 Vim 脚本时，我发现自己在打字

```
:help {subject} 
```

相当多。我想要`CTRL`+ `]`（跳转到光标下关键字的定义）功能，但不是运行`:tag {ident}`我想要它，光标下的单词在`:help {subject}`哪里。`{subject}`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-07T20:30:56.497

只需按`K`。如果您设置了 global `'keywordprg'`，则需要在以下位置取消设置（或将其设置为特殊`:help`值）`~/.vim/after/ftplugin/vim.vim`：

```
:setlocal keywordprg=:help 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-07T20:21:50.180

最简单的解决方案是

```
nnoremap K :help <C-r><C-w><CR> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-04T10:03:00.527

要查看光标下关键字的文档，您可以按`Ctrl`+`]`转到其文档。

如果您使用以下选项在 nvim 中启用鼠标支持：

```
set mouse=a 
```

您可以双击关键字以转到其文档。

顺便说一句，要返回帮助文件中的上一个位置，请按`Ctrl`+`O`或`Ctrl`+ `T`。

Neovim 也是如此。

## 参考

*   [https://vimhelp.org/](https://vimhelp.org/)

# javascript - Controlling Multiple Processes in Node

> ID：15867324
> 
> 赞同：2
> 
> 时间：2013-04-07T20:18:15.300
> 
> 标签：javascript, node.js

Okay, so I have a bot hosting thing I do. It's pretty much the only thing I have right now that's keeping me sane. It's an IRC type bot for a music/chat website, and it does a lot of things. But the problem is keeping them online. I used to use a sh file that would start all the bots individually with [forever](https://github.com/nodejitsu/forever).

```
cd dir/bots
forever start bot1.js
forever start bot2.js
... 
```

etc, etc. And that worked. But the bots themselves take around 30mb of RAM, while the forever process ALSO takes around 30mb of RAM. So with as many bots as I was running, I was near maxed out on RAM, and that wasn't good, because if I had to get another server, things would get infinitely more complicated for me, and if I'm being honest, I'm not very good at this.

So I did some research, and figured I'd just use `child.fork()` and use one bot.js to spawn the rest of the bots. And it works beautifully, and cut my ram useage down to less than half of what it was. But now it's a pain keeping the bots online.

```
var child = require("child_process");
var running = {};
var bots = ["bot1","bot2","bot3"];
for (var i=0;i<bots.length;i++) { 
    running[bots[i]] = child.fork("bots/"+bots[i]+".js");
}; 
```

My question is - is this the most efficient way to run this setup? Because they are constantly crashing, and if I want to be considered reliable by any means, they need to be pretty self sufficient, and just shutting off in the wee hours of the night whilst I'm sleeping.

Right now I am using [node-scheduler](https://github.com/mattpat/node-schedule) to create a fake cron job that sends a message to the bots (not a node message, because that would return as long as the js file is running, not if the bot is connected to the service) from the service, and have the bot return a command. And it sets a command, so that if it doesn't get a response from the bot in 15 seconds, it reboots it. But it doesn't seem to be working all the time. And I'm at a loss.

Any help would be appreciated, and I'll provide more details if I can.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:05:17.583

按子堆栈查看[舰队](https://github.com/substack/fleet)。一架无人机可以管理任意数量的进程，并将自动重启任何崩溃的进程。

Fleet 通过设置集线器和连接到集线器的 1 架或多架无人机来工作。您使用 git 将代码推送到集线器。集线器会自动将新版本的代码部署到所有连接的无人机。然后就可以调用了`fleet spawn -- node foo.js`。Fleet 将开始运行`node foo.js`并在崩溃时自动重启 foo.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T00:07:57.017

我的解决方案是使用`spawn`节点内的流程，使用`Promise`模式来同步流程执行，然后将结果与 a 连接`Promise.all`（请参见`promiseAll`此处的函数：

```
var promiseAll = function(items, block, done, fail) {
    var self = this;
    var promises = [],
        index = 0;
    items.forEach(function(item) {
        promises.push(function(item, i) {
            return new Promise(function(resolve, reject) {
                if (block) {
                    block.apply(this, [item, index, resolve, reject]);
                }
            });
        }(item, ++index))
    });
    Promise.all(promises).then(function AcceptHandler(results) {
        if (done) done(results);
    }, function ErrorHandler(error) {
        if (fail) fail(error);
    });
}; //promiseAll 
```

现在进行导入

```
var cp = require('child_process'); 
```

并编写将产生每个进程的执行块：

```
var ExecutionBlock = function(item, index, resolve, reject) {
        var options = [
            "--ssl-protocol", "tlsv1",
            "--ignore-ssl-errors", "true"
        ];
        options.push(executableFile); // push input file path
        options.push(item); // push executable arguments
        // LP: now spawn the power!
        var child = spawn(settings.executable, options);
        // Listen for an exit event:
        child.on('exit', function(exitCode) {
            console.log("Child exited with code: " + exitCode);
            return resolve(exitCode);
        });
        // Listen for stdout data
        child.stdout.on('data', function(data) {
            console.log(data.toString());
        });
        // child error
        child.stderr.on('data',
            function(data) {
                console.log('err data: ' + data);
                // on error, kill this child
                child.kill();
                return reject(new Error(data.toString()));
            }
        );

    } //ExecutionBlock 
```

此时，应该在`inputItemsArray`我们的可执行文件的参数列表中，我们可以通过以下`Promise.All`方法运行它们：

```
// inputItemsArray is a list of arguments for the executable
promiseAll(inputItemsArray, function(item, index, resolve, reject) {
    ExecutionBlock(item, index, resolve, reject);
}
,function(results) { // aggregated results

    // all execution done here. The process exitCodes will be returned
    // array index is the index of the processed that exited
}
,function(error) { // error

}); 
```

完成块会将退出代码聚合到一个数组中，因为我们已经在`resolve`. 通过这种方式，您可以很好地控制执行，在执行期间为每个流程`exitCode`最终`stdout`和每个流程都设置好`stderr`。

[这里](https://gist.github.com/loretoparisi/8bbac67590f53c5bb66c754d8c73e19c)的要点中的一个工作示例。

# joomla - Blank pages at joomla backend,error 404,not saving changes

> ID：15867328
> 
> 赞同：0
> 
> 时间：2013-04-07T20:18:26.823
> 
> 标签：joomla

Blank article page. Errors found listed below .I'm a beginner with joomla I'm lost on a project now .at First was error 404 after update to joomla 2.5.9 ,now i cant even access ,the articles.I'm getting blank pages from admin pages of the backend.Is dere a way i can copy all the articles out from the folder directory of gantry/joomla. If yes I can start building the website all over again. please help anybody Deadline for site to go live is tommorrow.,

`Strict Standards: Declaration of JCacheControllerPage::store() should be compatible with JCacheController::store($data, $id, $group = NULL) in C:\xampp\htdocs\Gantry417\libraries\joomla\cache\controller\page.php on line 199`

`Strict Standards: Only variab,les should be assigned by reference in C:\xampp\htdocs\Gantry417\plugins\system\rokgallery\rokgallery.php on line 22`

`Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\Gantry417\plugins\system\rokgallery\rokgallery.php on line 23`

`Warning: include_once(C:\xampp\htdocs\Gantry417/components/com_content/helpers/route.php): failed to open stream: No such file or directory in C:\xampp\htdocs\Gantry417\plugins\finder\content\content.php on line 330`

`Warning: include_once(): Failed opening 'C:\xampp\htdocs\Gantry417/components/com_content/helpers/route.php' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\Gantry417\plugins\finder\content\content.php on line 330`

`Fatal error: Class 'ContentHelperRoute' not found in C:\xampp\htdocs\Gantry417\plugins\finder\content\content.php on line 273`

`Warning: require_once(C:\xampp\htdocs\Gantry417/components/com_content/helpers/route.php): failed to open stream: No such file or directory in C:\xampp\htdocs\Gantry417\administrator\templates\hathor\html\com_content\articles\modal.php on line 17`

`Fatal error: require_once(): Failed opening required 'C:\xampp\htdocs\Gantry417/components/com_content/helpers/route.php' (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\Gantry417\administrator\templates\hathor\html\com_content\articles\modal.php on line 17`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:21:09.380

route.php 文件不存在/不可读。

1.  下载更新包 2.5.9 [http://joomlacode.org/gf/download/frsrelease/17967/78436/Joomla_2.5.x_to_2.5.9-Stable-Patch_Package.zip](http://joomlacode.org/gf/download/frsrelease/17967/78436/Joomla_2.5.x_to_2.5.9-Stable-Patch_Package.zip)并在您当前的站点上展开；
2.  清除缓存/* 文件夹
3.  重新分配权限（chown -R user:group *）
4.  您现在应该可以访问管理员了。

如果您还可以访问前端，那么您就完成了。否则分配默认模板之一（即 beez），您应该能够看到该网站

如果后者有效，那么很可能您有错误的龙门架，请为您的网站重新下载正确版本的模板。

如果没有，只需重新安装它，可能有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:24:26.120

1.  检查文件的权限`route.php`。
2.  确保`route.php`文件存在于上述路径中。

# java - Android 中的 Java Timer 等效项

> ID：15867329
> 
> 赞同：1
> 
> 时间：2013-04-07T20:18:30.600
> 
> 标签：java, android, timer, android-handler

我最近开始使用 Java 并正在探索 Android 开发。我试图移植我制作的一个 Java 程序，但是在让 java Timer 在 Android 中以相同的方式运行时遇到了一些困难。我阅读了许多帖子，它们在大多数情况下表示最好在 android 中使用 Handler 类而不是 Timer。

这是我在 Java 中的计时器：

```
playTimer = new Timer(1000/model.getFPS(), new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        // do something
        ...
        if( finished everything ) playTimer.stop();
    }
}); 
```

一旦单击某个按钮，我只需运行“playTimer.start()”即可启动它。

如您所见，我设置了它，以便用户可以设置他们想要的 FPS（只需将 Timer 类的第一个参数设置为 1000/model.getFPS()）。

现在我尝试使用处理程序在 Android 中做类似的事情，但我遇到了一些困难。处理程序滴答似乎没有以适当的时间间隔触发。与我需要的相比，它们似乎相当慢。到目前为止，这是我在 android 中所做的：

```
public void startTimer() {
    playHandler = new Handler();
    startTime = System.currentTimeMillis();
    playHandler.removeCallbacks(updateTimeTask);
    playHandler.postDelayed(updateTimeTask, 0);
}

private Runnable updateTimeTask = new Runnable() {
    public void run() { 
        // do something
        ...

        if( finished everything ) playHander.cancel();
        else {
            playHandler.postDelayed(updateTimeTask, 1000/model.getFPS());
        }
    }
}; 
```

原谅半伪代码。任何人都可以解释一下吗？多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:32:20.103

您可以使用如下计时器。计时器每秒运行一次，使计数器递增。在 textview 中显示计数器值。

计时器在不同的线程上运行。所以你应该在 UI 线程上设置文本。

计数器从 0 运行到 99。在 99 之后，定时器被取消。也可以在不需要时取消计时器，例如`onPause()`.

```
public class MainActivity extends Activity {
TextView _tv,tv2;
Timer _t;
int _count=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    _tv = (TextView) findViewById( R.id.textView1 );
    _t = new Timer();
    _tv.setText(R.string.app_name);
    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 

                      _tv.setText(""+_count);
                      if(_count==99)
                      {
                          _t.cancel();
                      }
                 }
                 });
            }
        }, 1000, 1000 ); //change this value of 1000 to whatever you need.

}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    _t.cancel();
}  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:21:42.260

看看[Android Timer](http://developer.android.com/reference/java/util/Timer.html) 我猜它已经拥有你需要的一切。从每 1 秒打勾到轻松完成等等。
这是一个如何设置 TimerTask 的示例：[setup](https://stackoverflow.com/a/1884407/1804251) 不确定是否需要，但我只记得我做了这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:28:05.927

如果您决定不使用 Timer（无论出于何种原因），您可以编写一个单独的 Thread 休眠 x 毫秒，然后唤醒并调用您希望它调用的任何 Runnable。这将非常精确。我让它在 10 毫秒级别上工作，而且效果很好。

请记住，它必须调用 Runnable，因为单独的线程不能对主显示线程上的任何内容产生直接影响。

```
public boolean keepPlayingAnimation = true
Handler h = new Handler()
Runnable updateDisplay = new Runnable(){
  public void run(){

        //do something in my display;
  }
}

new Thread(){
  public void run(){
     while(keepPlayingAnimation){
       try{
          sleep(10);
       }catch(Exception e){

       }
      h.post(updateDisplay);
     }
   }
}.start(); 
```

完成此操作后，请不要忘记将 keepPlayingAnimation 设置为 false ，否则它将永远（或几乎）在后台运行。

# mysql - Best way to enforce table participation

> ID：15867331
> 
> 赞同：5
> 
> 时间：2013-04-07T20:18:32.273
> 
> 标签：mysql, sql-server, database, oracle, database-design

I am not sure what will be the best way to enforce participation in the following database design (can be for SQL server, Oracle, mySQL etc.). I have two tables: Factory and Worker. I have created two rules for the design: 1) Each factory hires at least one (or many) workers. 2) Each worker works for exactly one and only one factory.

I have created an ERD for the design:

[Factory]-||--- hire ---|<-[Worker]

The FACTORY table looks like this:

## Factory_ID (PK) Factory_Name

1 A
2 B
3 C

The WORKER table looks like this:

## Worker_ID (PK) Worker_Name Factory_ID (FK)

1 Tom 2
2 Ann 1
3 Jan 1

In the worker table, the Factory_ID is the foreign key (FK) and it is set to NOT NULL because (the ERD said) each worker have to work for one factory and only one. This participation can be enforced by setting the FK (the Factory_ID field in the Worker table) to not null.

Here is my question, what is the best way to enforce the participation of - Each factory hires at least one workers? I.e. I need to make sure each factory_id have to be referenced in the worker table at least once. So now factory #3 does not hire anyone which violates the participation rule in the ERD.

I am wondering what will be the best way to enforce this participation?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:30:38.747

1+ 关系约束通常在应用层实现。

*   存储过程
*   触发器
*   后端业务层
*   前端
*   前面的任意组合

问题是有一个时间概念可以预见：在这种限制下，您的工厂需要一个工人，但您的工人自己需要一个工厂：这根本不可能以同步方式实施此规则。

一种解决方案可能是管理一种后台以单独添加元素（出于管理目的），然后在公共前端实施适当的限制以匹配您的 1+ 要求。例如：

1.  将员工移至公司时，检查是否至少还剩一个
2.  当员工更换公司时实施公司更换，以确保每位员工始终只有一家公司。

# r - 过滤数据框中的值

> ID：15867337
> 
> 赞同：1
> 
> 时间：2013-04-07T20:19:03.107
> 
> 标签：r, filter, dataset

基本上，我有一个基因数据集，其中行是基因，列是蛋白质折叠的连续时间点。我需要一个函数来过滤整个数据集中其他特定阈值的基因，而不仅仅是某些向量。例如：

```
 alpha98 alpha105 alpha112 alpha119
YAL002W      0.22     0.58    -0.36     0.13
YAL003W      0.05     0.55    -0.08     0.33 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:30:09.840

`R`被矢量化并`R`回收。这意味着，一般来说，简单的事情`myDF > threshold`会让你非常接近你需要的东西。

具体来说，当 DF 中的单元格超过阈值（否则）时，它将`matrix`为您提供与您相同维度的逻辑。`data.frame``TRUE``FALSE`

然后，您可以使用该矩阵作为工具来对 data.frame 进行子集化。

```
myDF[myDF > threshold] 
```

# javascript - Rails 模型验证挂起 PUT 请求

> ID：15867341
> 
> 赞同：0
> 
> 时间：2013-04-07T20:19:23.063
> 
> 标签：javascript, ruby-on-rails, backbone.js

我在我的 User.rb 模型中有这个，以便在保存之前正确格式化用户的子域：

```
def subdomain=(c)
   write_attribute(:subdomain, c.tr('^A-Za-z0-9', '').downcase) 
end 
```

但是当我向 API 发出客户端（骨干）PUT 请求时，更新不包括子域的属性......

```
Request Payload: { bg_hue: "359", id: 4 } 
```

..上述自定义模型验证导致 500 响应，并指定以下错误：

```
NoMethodError at /user/4=================================> undefined method `tr' for nil:NilClass 
```

意思是，它挂在模型中的 c.tr 线上

我想我可以先检查请求是否在控制器中包含子域，然后尝试在有或没有子域的情况下保存它，我认为这应该可以解决上述问题，但话又说回来，我不完全确定问题出在哪里.

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:23:16.363

错误信息告诉你`undefined method `tr' for nil:NilClass`。问题是`c`传入的值是`nil`. 您可能应该执行以下操作：

```
def subdomain=(c)
   write_attribute(:subdomain, c.tr('^A-Za-z0-9', '').downcase) unless c.nil?
end 
```

# javascript - 根据单选按钮选择切换 DIV 可见性

> ID：15867345
> 
> 赞同：4
> 
> 时间：2013-04-07T20:19:50.773
> 
> 标签：javascript, jquery, html

目前我仍在寻找解决 Javascript 的方法，所以如果我遗漏了一些非常明显的东西（可能！），我深表歉意。

我有一个带有许多单选按钮的小表格，就像这样；

```
<input type="radio" name="dtype" id="dtype" value="option1">
<input type="radio" name="dtype" id="dtype" value="option2">
<input type="radio" name="dtype" id="dtype" value="option3">
<input type="radio" name="dtype" id="dtype" value="option4"> 
```

根据用户的选择，我需要立即显示相关的 div。我的第一个收音机可以正常工作，但不能用于任何后续收音机（并且在萤火虫中没有报告错误）。这就是我现在所拥有的；

```
<script type="text/javascript">
$(function() {
$('#dtype').change(function() {
if($(this).val() == 'option1') {$('#div1').slideToggle('500');}
if($(this).val() == 'option2') {$('#div2').slideToggle('500');} 
if($(this).val() == 'option3') {$('#div3').slideToggle('500');}
if($(this).val() == 'option4') {$('#div4').slideToggle('500');}
});
});
</script> 
```

我也在第一个之后的 3 上尝试了“else if”，但没有成功。欢迎指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:23:02.033

您正在尝试使用相同的 ID 选择所有输入元素（**[ID 应该是唯一的](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)**）。您可以尝试将您的 ID 更改`#dtype`为 class `.dtype`，然后通过选择它们。而是上课。

这是一个关于您的用例的工作**[jsFiddle](http://jsfiddle.net/wp5Fq/)**。

**HTML：**

```
<input type="radio" name="dtype" class="dtype" value="option1">
<input type="radio" name="dtype" class="dtype" value="option2">
<input type="radio" name="dtype" class="dtype" value="option3">
<input type="radio" name="dtype" class="dtype" value="option4">

<div id="div1">A</div>
<div id="div2">B</div>
<div id="div3">C</div>
<div id="div4">D</div> 
```

**jQuery：**

```
$(function() {
  $('.dtype').change(function() {
    if($(this).val() == 'option1') {$('#div1').slideToggle('500');}
    if($(this).val() == 'option2') {$('#div2').slideToggle('500');} 
    if($(this).val() == 'option3') {$('#div3').slideToggle('500');}
    if($(this).val() == 'option4') {$('#div4').slideToggle('500');}
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:24:50.333

ID 必须是唯一的，因此您必须这样做：

```
<input type="radio" name="dtype" id="dtype1" value="option1">
<input type="radio" name="dtype" id="dtype2" value="option2">
<input type="radio" name="dtype" id="dtype3" value="option3">
<input type="radio" name="dtype" id="dtype4" value="option4"> 
```

和脚本：

```
<script type="text/javascript">
  $(function() {
    $('input[name=dtype]').change(function() {
    if($(this).val() == 'option1') {$('#div1').slideToggle('500');}
    if($(this).val() == 'option2') {$('#div2').slideToggle('500');} 
    if($(this).val() == 'option3') {$('#div3').slideToggle('500');}
    if($(this).val() == 'option4') {$('#div4').slideToggle('500');}
    });
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:26:45.363

您的问题是您的 ID 对所有单选按钮都有相同的 ID - 将 id 更改为 class，因此它看起来像：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<input type="radio" name="dtype" class="dtype" value="option1">
<input type="radio" name="dtype" class="dtype" value="option2">
<input type="radio" name="dtype" class="dtype" value="option3">
<input type="radio" name="dtype" class="dtype" value="option4">

<div id="div1">1</div>
<div id="div2">2</div>
<div id="div3">3</div>
<div id="div4">4</div>

<script type="text/javascript">
$(function() {
$('.dtype').change(function() {
alert($(this).val());
if($(this).val() == 'option1') {$('#div1').slideToggle('500');}
else if($(this).val() == 'option2') {$('#div2').slideToggle('500');} 
else if($(this).val() == 'option3') {$('#div3').slideToggle('500');}
else if($(this).val() == 'option4') {$('#div4').slideToggle('500');}
});
});
</script> 
```

# jquery - CKeditor 实例为空或未定义？

> ID：15867346
> 
> 赞同：2
> 
> 时间：2013-04-07T20:19:53.370
> 
> 标签：jquery, ckeditor

大家好，我的屏幕上有一个 CKeditor ckeditor 正在显示，但是当我尝试获取编辑器的实例时，我的值为 null 或 undefined 如何获取 ckeditor 实例，任何人都可以在这里帮助我

```
function editor() {
    //i have null here
    for (name in CKEDITOR.instances) {
        CKEDITOR.instances[name].destroy()
    }

    var editor = CKEDITOR.instances.editor1;//i have null here
    editor.on('key', function () {
        var data = editor.getData();        
    });
}

$(document).ready(function () {    
    var editorShort = CKEDITOR.editor.replace('popup_editor1');
    editor();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T05:17:09.433

可能是实例变量当时只是未定义。根据你真正想用编辑器做什么，我建议你在 instanceReady 中执行键绑定和其他类似的事情，这是一个 CKEditor 事件。

```
$(document).ready(function () {  
    // You can define it before replacing the editor
    CKEDITOR.on('instanceReady', function(e){
        // Do your bindings / other actions here
        // To access the editor that this event has fired on:
        const editor = e.editor;
    });

   // replace editor
    const editorVar = CKEDITOR.editor.replace('popup_editor1');
}); 
```

[请参阅http://docs.ckeditor.com/#!/api/CKEDITOR-event-instanceReady](http://docs.ckeditor.com/#!/api/CKEDITOR-event-instanceReady)上的文档

* * *

或者如果你不使用 jQuery

```
document.addEventListener("DOMContentLoaded", () => {
    // You can define it before replacing the editor
    CKEDITOR.on('instanceReady', function(e){
        // Do your bindings / other actions here
        // To access the editor that this event has fired on:
        const editor = e.editor;
    });

   // replace editor
    const editorVar = CKEDITOR.editor.replace('popup_editor1');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-31T16:30:31.050

Nenotlep 的回答很好，我只是在添加一些东西来帮助像我这样的人。

```
<script type="text/javascript">
$(document).ready(function () { 
CKEDITOR.on('instanceReady', function(evt){
  console.log("instance is ready");
  for (var instance in CKEDITOR.instances)
            CKEDITOR.instances[instance].updateElement(); 
```

// 现在如果你做 console.log(instance) 它将给 editor 或 id_your_editor ，使用这个值

```
 var slug= $('#slugfield').val()
  var e=CKEDITOR.instances.id_Your_Message
  e.on('keyup', function(e){
  var content = CKEDITOR.instances[instance].getData()
  $.ajax({
      type: "POST",
      url: "{% url 'edit-update' %}",
      data: {'slug':newslug,'code':content},
      success: function (data) {
        console.log("instance is");
        console.log(instance);
      },
      error: function(data) {
          console.log("error");
      }
  });

});
});
});
</script> 
```

# mysql - SQL查询按总和对表进行排序

> ID：15867355
> 
> 赞同：0
> 
> 时间：2013-04-07T20:20:21.990
> 
> 标签：mysql, sql

我基本上有下表：

id (int) username (string) message (string) rating (int)

所以条目看起来像这样：

```
1   thomas   "hello..."   3
2   Tina     "blabla"     2
3   thomas   "blub"       1
4   julia    "basgs"      3 
```

...

我想检索所有消息中评分最高的前 10 个用户名。所以我想对它看起来的表格进行排序

```
1\. thomas 4
2\. julia 3
3\. Tina 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:23:11.423

我不是起诉我理解你的问题是正确的，但试试那个：

```
SELECT
    username,
    SUM(rating)
FROM
    YourTable
GROUP BY
    username
ORDER BY
    SUM(rating) desc
LIMIT
    10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:22:32.230

```
select  username
,       count(*)
from    YourTable
group by
        username
order by
        count(*) desc
limit   10 
```

# ios - 有没有办法让用户选择本地通知的声音？

> ID：15867356
> 
> 赞同：1
> 
> 时间：2013-04-07T20:20:40.380
> 
> 标签：ios, cocoa-touch, uilocalnotification

我有一个应用程序，它有 64 个重复间隔的本地通知。所以我不能添加更多通知，否则，我需要用户再次打开应用程序以重新安排。

我想知道是否可以让用户在此代码中选择文件：

```
notif.soundName = @"xxx.wav"; 
```

所以他们可以选择`xyz.wav`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:33:00.047

是的，您可以让用户在项目中已有的声音中选择声音，或者您也可以让他从音乐库中选取一首歌曲。

更新：如果文件已经在您的 Xcode 项目中，您可以创建一个 NSString 或一个 int 值来存储用户选择。您创建一个按钮，让用户选择声音。您连接此按钮以更改字符串或 int 值。然后创建检查此字符串或 int 的 if 语句并正确更改 UILocalnotification 声音。

```
int soundNumber;

- (IBAction)chooseSoundName {
   soundNumber = 1;
}

- (void)loadSoundName {
   if(SoundNumber == 1) {
       localNotification.soundName = @"first.wav";
   }
} 
```

然后你调用 loadSoundName 方法（或者你可以将它集成到另一个方法中）。

希望能帮助到你

# css - 合并通用选择器（使用 Codekit）？

> ID：15867357
> 
> 赞同：1
> 
> 时间：2013-04-07T20:20:49.733
> 
> 标签：css, compression, sass, minify, codekit

如果我有一个名为“structure.scss”的文件并且在这个文件中我有代码

```
body { margin: 20px; } 
```

我有另一个名为“fonts.scss”的文件，里面有以下代码

```
body { color: red; } 
```

我使用codekit压缩我得到以下代码

```
body{margin:20px;}body{color:red;} 
```

有什么方法可以进一步缩小代码，或者codekit中有一个选项可以做到这一点以使代码......

```
body{margin:20px;color:red;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:06:27.097

不，这在 Codekit 中是不可能的。

# android - Facebook Android SDK ProfilePictureView 缓存

> ID：15867358
> 
> 赞同：8
> 
> 时间：2013-04-07T20:20:58.860
> 
> 标签：android, facebook-android-sdk

我正在使用`ProfilePictureView`类来显示个人资料图片。请求这些图像并显示它们需要一些时间。在具有多张个人资料图片的 ListView 中，显然需要更长的时间。

有没有人缓存这些图片的模式，以便它们每隔一段时间才被提取一次？

据我所见，Facebook Android SDK 没有针对此类事物的任何内置缓存机制（如果我错了，请纠正我，我希望）。

我很想听听其他开发人员对这个问题的解决方案，即使这意味着离开`ProfilePictureView`课堂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T12:11:30.887

如果您决定离开 ProfilePictureView，则在 ListView 中加载和缓存图像方面有一些选择。

The first one, LastList, I've personally used in several projects and it works very well: [https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

This second one I have not used, but I believe works on the same premise. [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# php - 我们如何使用 ajax jquery 让我们的页面每分钟刷新一次数据？

> ID：15867362
> 
> 赞同：1
> 
> 时间：2013-04-07T20:21:03.923
> 
> 标签：php, jquery, ajax, partial-page-refresh

我们如何实现一个计时器来发送一个 ajax 请求以每分钟刷新一次数据（例如来自数据库上其他用户的新条目）。我正在使用来自 jquery 的 $.ajax。

我的目的是发送最后一次更新的时间，这样服务器就不会发送重复的数据。只有在那之后创建的行。

我的服务器脚本是 php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:25:35.477

发送日期和时间您可以使用此功能

```
 var date    = new Date();
        var date    = date.getUTCFullYear() + '-' +
        ('00' + (date.getUTCMonth()+1)).slice(-2) + '-' +
        ('00' + (date.getUTCDate()).slice(-2) + ' ' + 
        ('00' + date.getUTCHours()).slice(-2) + ':' + 
        ('00' + date.getUTCMinutes()).slice(-2) + ':' + 
        ('00' + date.getUTCSeconds()).slice(-2); 
```

上面将以mysql格式格式化日期和时间，您通过变量将其传递给mysql查询，然后`setInterval`在每分钟后用于传递当前时间

```
 setInterval(function(){ 
     $.ajax({
     type:"POST",
     data:"Time="+ date,     
     url:"serverRef",
     success: function(data){
         // On success 
                           }
     });              

     },60000); 
```

注意：您也可以在服务器端使用相同的技术

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:31:13.487

`setInterval` with jQuery's [post](http://api.jquery.com/jQuery.post) would work wonders. Make sure if you have a lot of visitors, remember to cache, otherwise you can rack up a lot of queries without noticing, which in the past I've noticed can overwhelm some hosts and essentially take you offline.

```
var ajax = window.setInterval(function(){
    $.post('path/to/my/script.php', function(data){
         if(data == "stop")
         {
             clearInterval(ajax);
             return;
         }

         $('#statistics').html(data);
    });
}, 60000); 
```

# intersection - Rectangle.Intersects(Rectangle)-代码

> ID：15867363
> 
> 赞同：0
> 
> 时间：2013-04-07T20:21:06.287
> 
> 标签：intersection, rectangles

例如，我想你知道 C# 中的所有 Rectangle.Intersects(Rectangle)-Method (returns boolean)。因为我切换到没有类似功能的平台，所以我尝试通过创建自己的 Rectangle-Class 手动制作 somwhink。但是我真的不知道两个矩形是否相交。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:35:26.667

让矩形由 r1 = ((x11, y11), (x12, y12)) 和 r2 = ((x21, y21), (x22, y22)) 定义，那么问题可以一次在一个维度上解决：

区间 [x11, x12] 必须与 [x21, x22] 重叠。y坐标也是如此。

可以测试重叠间隔：

x11 <= x21 < x12 或 x21 < x12 <= x22

# python - 从文件中读取不同的行以使用

> ID：15867368
> 
> 赞同：-3
> 
> 时间：2013-04-07T20:21:18.757
> 
> 标签：python, file, python-2.7

所以，我有这样的文件：

```
Mark Brown
12 2345
45 6780

63 3210
Peter Tailor

10 15430
114 1230
23 3450

John Smith
234 12130
11 32410 
```

名称很明显，在名称下方有 X 行，每行带有 ID 和 VALUE（也有空行）。我需要将每个名称和最大 VALUE 的 ID 写入文件，如下所示：

```
Mark Brown 45
Peter Tailor 10
John Smith 11 
```

如果只有一个名字，我可以简单地做，但是里面有 X 个名字，我不知道:( 有什么想法或帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:28:23.300

我认为首先您阅读每一行并检查它是否以字母或数字开头（也就是如果 ist 是名称或 ID）*，然后您为每个名称创建一个元素，其中包含一个包含所有 ID 的列表。您使用排序算法对它们进行排序，然后，您只需写出所有内容（应该没问题）

*您还必须检查空行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:57:42.613

有一些空闲时间，所以这里是创建字典的代码。我会让你作为一个练习来理解每一行:)

```
from itertools import groupby
with open('testing.txt') as file:
    goodlines = [line.strip() for line in file if line.strip()]
    splitted = list( list(val[1]) for val in groupby(goodlines, lambda l: l[0].isdigit()))
    names = [ list(val)[0] for val in splitted[::2] ]
    val_split = [ [v.split() for v in val] for val in splitted[1::2] ]
    val_sorted = [ sorted(val, key=lambda v:int(v[1]))[-1][0] for val in val_split]
    result = dict(zip(names, val_sorted))
print result 
```

# c# - c#表单加载顺序问题

> ID：15867371
> 
> 赞同：0
> 
> 时间：2013-04-07T20:21:29.810
> 
> 标签：c#, winforms

尝试更改我的表单加载顺序时遇到了一些奇怪的问题。

我相信要更改加载顺序，我只需要转到 Program.cs 文件并更改此行：

`Application.Run(new AdminPage());`- 这也是它当前设置的：

对此——`Application.Run(new AdminLogin());`

这给了我以下错误：

> 找不到类型或命名空间名称“AdminLogin”（您是否缺少 using 指令或程序集引用？）

这是显示我的项目布局的屏幕截图。我看不出我在这里做错了什么？

![在此处输入图像描述](https://i.stack.imgur.com/KODGO.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:22:43.633

AdminLogin 类是否与 Program 位于同一命名空间中？如果没有，请使用`using`语句来使用该命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:24:53.400

我没有足够的代表来评论 Axarydax 的答案，所以我会在这里回答。

您可以简单地删除 AdminLogin 中命名空间的“.pics”，使其变为 adminPanel 而不是 adminPanel.pics

# c++ - c ++ if语句导致无限循环

> ID：15867377
> 
> 赞同：1
> 
> 时间：2013-04-07T20:22:09.713
> 
> 标签：c++, loops, if-statement

在我的函数中，我添加了一个 if 语句来保持用户输入正确的坐标，如果第一个 if 语句为 false，则会导致无限循环。如果第一个 if 语句是正确的，而第二个 if 语句是错误的，那么它工作得很好。

```
void Sheep::sheepProcess(BoardSet& board)
{
    char middle;

    cout << "Your move? ";
    cin >> x1 >> y1 >> middle >> x2 >> y2;
    if (correctInput(x1, y1, x2, y2))
    {
        convertCoordinates(x1, y1, x2, y2); //x=z and y=w

        if(board.legalMoveForSheep(z1, w1, z2, w2))
        {
            board.adjustBoardForSheep(z1, w1, z2, w2);

        }
        else
        {
            cout << "Illegal Move, Try again" << endl;
            sheepProcess(board);

        }

    }
    else
    {
        cout << "Illegal input, Try again" << endl;
        sheepProcess(board);
    }

} 
```

如果你需要更多的代码，比如bools。让我知道

编辑：

```
class Sheep {
public:

    void sheepProcess(BoardSet& board);
    void convertCoordinates(char x1, int y1, char x2, int y2);
    void initalizedItems();

private:
    char x1, x2;
    int y1, y2, z1, z2, w1, w2;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:23:28.467

你没有吃掉准备好的输入`cin`。下一次读取得到相同的输入，但也失败了，重复令人作呕。

解决方案：当您检测到有无效的输入准备就绪时，吃掉它并扔掉，向用户抱怨提供了错误的输入并允许他重试。

# arduino - 通过串口连接两个 Arduino 并使用一个控制另一个

> ID：15867378
> 
> 赞同：1
> 
> 时间：2013-04-07T20:22:14.870
> 
> 标签：arduino

我是这个东西的初学者，我遇到了一些问题。我已经尝试寻找答案，但我的搜索措辞可能有误，但我找不到任何可以帮助我的东西。

我希望通过 TX RX 端口连接两个 Arduino Unos，并将一个弯曲传感器连接到一个，将一个 LED 连接到另一个。我希望使 LED 相对于弯曲传感器值上下渐变。我的代码工作正常，所以我可以在一个 Arduino 上完成所有工作，但我在搜索时发现的大部分内容都与通过 RX TX 端口传递单个字符以及使用 Arduino 连接到其他东西有关那不是其他的Arduinos。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:32:53.417

您可以使用 spi 或 2 线！这里有一些链接： spi - [http://arduino.cc/en/Reference/SPI](http://arduino.cc/en/Reference/SPI) 线 - [http://arduino.cc/en/Reference/Wire](http://arduino.cc/en/Reference/Wire)

电线可能更适合您的情况？

# css - Chrome for Android中两个网站的字体大小不同

> ID：15867383
> 
> 赞同：1
> 
> 时间：2013-04-07T20:22:36.163
> 
> 标签：css, google-chrome

我在 Android 版 Chrome 中遇到字体大小问题。这两个站点显示不同的字体大小，尽管它们使用相同的 css 文件和代码：[link1](http://web288.merkur.ibone.ch/klingler/)和[link2](http://web288.merkur.ibone.ch/klingler/kontakt.html)。

在我测试过的所有其他浏览器中，字体显示相同（Chrome for Windows、IE、Dolphin、Opera）。只有适用于 Android 的 Chrome 有问题吗？

有人知道为什么吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T04:59:10.447

适用于 Android 的 Chrome 具有一项名为 Font Boosting 的功能，在没有视口元标记的网站上，该功能将使在当前规模上阅读效果不佳的文本阅读效果很好。

您可以通过将要提升的元素的最大高度设置为 > 100000px 来禁用页面上的字体提升。有关详细信息，请参阅[https://bugs.webkit.org/show_bug.cgi?id=84186#c16](https://bugs.webkit.org/show_bug.cgi?id=84186#c16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:27:58.593

这可能与已知的 Chrome for Android 问题有关；看这里：

[http://support.google.com/chrome/bin/static.py?hl=en&page=known_issues.cs](http://support.google.com/chrome/bin/static.py?hl=en&page=known_issues.cs)

# actionscript-3 - 当我调用此函数时，我收到此错误：TypeError: Error #1010: A term is undefined and has no properties。在 MethodInfo-1()

> ID：15867384
> 
> 赞同：0
> 
> 时间：2013-04-07T20:22:41.517
> 
> 标签：actionscript-3, flash, flash-cs6

我是新来的，对 AS3 也很陌生。所以这是我的疯狂问题：

为什么我会收到此错误：TypeError: Error #1010: A term is undefined and has no properties。在 MethodInfo-1()

对于我正在处理的这个功能：

```
 /* a universal function for all the movieclips */
function clickAndPlay(element):Function {

    /* return the click event */
    return function(e:Event):void {

        /* stop the event from propagating */
        e.stopPropagation();

        /* get the labels from the clip */
        var labels:Array = element.currentLabels;
        var numFrm:Number = labels.length; /* count them */

        /* if there are no labels for this clip, get the frame length instead */
        if(numFrm == 0) {
            /* get the number of frames */
            numFrm = element.totalFrames;
            trace(numFrm);
            if(element.currentFrame < numFrm) {
                element.nextFrame();
            }else{
                element.gotoAndStop(1);
            }
        }else{
            /* get the current index of the labels array */
            for(var i:Number = 0; i < numFrm; i++) {
                if(labels[i].name == element.currentLabel) {
                    if(i < numFrm) {
                        /* get the next label's name */
                        var labelName:String = labels[(i+1)].name;
                        /* go to the next label */
                        trace(labelName);
                        element.gotoAndStop(labelName);
                    }else{
                        element.gotoAndStop(1);
                    }
                }
            }
        }
    };
} 
```

我不知道这个函数是指什么。我已经检查以确保框架上的标签准确无误，并且确实如此。我敢肯定它有些愚蠢，但任何帮助将不胜感激。提前致谢。

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:52:07.003

我相信你需要：

```
if (i < (numFrm-1)) { 
```

而不是

```
if (i < numFrm) { 
```

否则下一行在尝试访问标签时会出错[(i+1)]

编辑：

考虑 i = numFrm-1 的情况（即：循环的最后一次迭代）：

标签[(i+1)].name 与标签[(numFrm-1+1)].name 或标签[numFrm].name 相同

但是，标签的长度是 numFrm （这是您从中获得 numFrm 值的地方），因此您试图访问标签的不存在元素 - 数组从零开始索引，而不是 1；所以如果标签有 6 个项目，最后一个将是标签 [5]，而不是标签 [6]

# php - 上传图片时出现 MySQL 语法错误

> ID：15867385
> 
> 赞同：1
> 
> 时间：2013-04-07T20:22:41.950
> 
> 标签：php, mysql, image, file-upload, syntax

我在将 BLOB 上传到我的 MySQL 数据库时遇到问题，并收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄ' at line 1 
```

我知道错误导致图像的文件内容，但我无法弄清楚语法有什么问题。有什么建议么？谢谢！

这是PHP：

```
 $file = $_FILES['image']['tmp_name'];

// If there's no file selected when button is pressed, echo out and tell the user to select an image to upload
if (!isset($file))
    echo "<p>Please select an image to upload.</p>";
else {
    //mysql escape string
    $image = file_get_contents($_FILES['image']['tmp_name']);
    //and here
    $image_name = $_FILES['image']['name'];
    $imagesize = getimagesize($_FILES['image']['tmp_name']);
}

// Checks that the file being uploaded is an image, i.e. has a size attribute with height & width dimensions
if ($imagesize == FALSE)
    echo "<p>Please upload only an image file such as .jpg or .png.</p>";
else {
    $sql = "INSERT INTO design (id, caption, image) VALUES ('', '$image_name', '$image')";
    $result = mysql_query($sql);
    if (!$result)
        echo "<p>Something went wrong.</p>" . mysql_error();
    else {
        echo "<p>Thank you for submitting your design.</p>";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:25:09.927

显然，图像文件内容中有一个撇号。这并不奇怪。您需要正确转义输入（以及与此相关的所有输入）。

```
$image = mysql_real_escape_string($_FILES['image']['tmp_name']); 
```

* * *

而不是使用`ext/mysql`，您应该使用带有 mysqli 或 PDO 的正确参数化查询。然后你不必明确地逃避。

# jquery - Onclick 背景值更改为 CSS 中的 HTML 标记

> ID：15867388
> 
> 赞同：0
> 
> 时间：2013-04-07T20:23:02.220
> 
> 标签：jquery, image, background, onclick, src

我按顺序进行了页面设置和导航。我的背景图像也正确显示。现在我的目标是让背景图片在点击时改变。

我的背景是在“general.css”样式表中实现的

```
html { 
  background: url(../images/bg1.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

我的导航有自己的“nav.css”和“nav.js”，当前的点击功能是

```
$('#action1').click(
    function(){
        if ($('#inner1').height() == 0 )
        $('#inner1').animate({height:'250'},800);
        else  if ($('#inner1').height() == 250 )
        $('#inner1').animate({height:'0'},800);
    }
); 
```

我想当您单击 action1、action2 或 action3 时，它将 html 样式下的图像的 url 更改为 UNIQUE 背景。我将为每个 onclick 提供 3 个单独的背景。（以下）

```
background: url(../images/bg1.jpg) no-repeat center center fixed; 
```

如果有人能给我一些关于如何更改 URL 值 onclick 的提示，将不胜感激。我需要更改背景网址，但不需要更改其他样式。下面最后一个例子。

```
html { 
  background: url(   CHANGE THIS VALUE ONCLICK   ) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:27:41.723

你试过使用 jQuery 的[CSS 函数](http://api.jquery.com/css/)吗？

因此，向点击侦听器添加这样的行可能会起作用：

```
$('html').css("background-image", "url(../images/bg1.jpg)"); 
```

# python - Python中文件的Caeser密码加密

> ID：15867391
> 
> 赞同：0
> 
> 时间：2013-04-07T20:23:26.297
> 
> 标签：python, encryption

我的 Caeser 密码在 shell 中使用字符串以交互方式工作，但是当我尝试使用单独的程序来加密和解密时遇到问题，我不知道输入是否没有被拆分为列表，但是我的加密函数中的 if 语句被绕过并默认为填充未加密列表的 else 语句。任何建议表示赞赏。我正在使用 Goldwasser 书中的 FileUtilities.py。该文件位于第 11 章中的[http://prenhall.com/goldwasser/sourcecode.zip](http://prenhall.com/goldwasser/sourcecode.zip)，但我认为问题不在于它，但谁知道呢。提前谢谢。

```
#CaeserCipher.py
class CaeserCipher:

def __init__ (self, unencrypted="", encrypted=""):
    self._plain = unencrypted
    self._cipher = encrypted
    self._encoded = ""

def encrypt (self, plaintext):
    self._plain = plaintext
    plain_list = list(self._plain)
    i = 0
    final = []

    while (i <= len(plain_list)-1):
        if plain_list[i] in plainset:
            final.append(plainset[plain_list[i]])
        else:
            final.append(plain_list[i])
        i+=1
    self._encoded = ''.join(final)
    return self._encoded

def decrypt (self, ciphertext):
    self._cipher = ciphertext
    cipher_list = list(self._cipher)
    i = 0
    final = []
    while (i <= len(cipher_list)-1):
        if cipher_list[i] in cipherset:
            final.append(cipherset[cipher_list[i]])
        else:
            final.append(cipher_list[i])
        i+=1
    self._encoded = ''.join(final)
    return self._encoded

def writeEncrypted(self, outfile):
    encoded_file = self._encoded
    outfile.write('%s' %(encoded_file))

#encrypt.py
from FileUtilities import openFileReadRobust, openFileWriteRobust
from CaeserCipher import CaeserCipher

caeser = CaeserCipher()

source = openFileReadRobust()
destination = openFileWriteRobust('encrypted.txt')
caeser.encrypt(source)
caeser.writeEncrypted(destination)
source.close()
destination.close()
print 'Encryption completed.' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:03:30.490

```
caeser.encrypt(source) 
```

进入

```
caeser.encrypt(source.read()) 
```

`source`是一个文件对象——这个代码“工作”（不加密任何东西）的事实很有趣——结果是你`list()`在迭代之前调用了源代码，这把它变成了**文件中的行列表**。而不是通常的结果`list(string)`是字符列表。因此，当它尝试加密每个字符时，它会发现一整行与您设置的任何替换都不匹配。

也像其他人指出的那样，您忘记在代码中包含plainset，但这并不重要。

关于您的代码的一些随机注释（可能是您没有要求的吹毛求疵，呵呵）

*   你打错了“凯撒”
*   您正在使用在 python 中效率低下的习语（通常称为“非 pythonic”），其中一些可能来自使用其他语言（如 C）的经验。
    *   那些 while 循环可能是`for item in string:`- 字符串已经像您尝试转换的那样作为字节列表工作。
    *   写入 outfile 的行可能只是`outfile.write(self._encoded)`
*   这两个函数非常相似，几乎是复制粘贴的代码。尝试编写第三个函数，共享两者的功能，但有两种“模式”，加密和解密。例如，您可以根据模式使其在 cipher_list 或 plain_list 上工作
*   我知道你这样做是为了练习，但标准库包含[这些函数](http://www.tutorialspoint.com/python/string_maketrans.htm)来进行这种替换。包括电池！

**编辑**：如果有人想知道这些文件函数做了什么以及它们为什么工作，他们会`raw_input()`在一个 while 循环中调用，直到有一个合适的文件可以返回。`openFileWriteRobust()`有一个参数是默认值，以防用户不输入任何内容。代码链接在 OP 帖子上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:26:32.320

几点：

*   使用上下文管理器 ( `with`) 可确保文件在读取或写入后关闭。
*   由于凯撒密码是一种替换密码，其中移位参数是密钥，因此不需要单独的`encrypt`成员`decrypt`函数：它们是相同的，但“密钥”被否定。
*   该`writeEncrypted`方法只是文件写入方法的包装器。所以这个类实际上只有两种方法，其中一种是`__init__`.
*   这意味着您可以轻松地将其替换为单个函数。

考虑到这一点，您的代码可以用这个替换；

```
import string

def caesartable(txt, shift):
    shift = int(shift)
    if shift > 25 or shift < -25:
        raise ValueError('illegal shift value')
    az = string.ascii_lowercase
    AZ = string.ascii_uppercase
    eaz = az[-shift:]+az[:-shift]
    eAZ = AZ[-shift:]+AZ[:-shift]
    tt = string.maketrans(az + AZ, eaz + eAZ)
    return tt

enc = caesartable(3) # for example. decrypt would be caesartable(-3)
with open('plain.txt') as inf:
    txt = inf.read()
with open('encrypted.txt', 'w+') as outf:
    outf.write(txt.translate(enc)) 
```

如果您使用 13 档，则可以使用内置`rot13`编码器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:49:06.187

对我来说，`source`在调用`openFileReadRobust()`. 我不知道规范，`openFileReadRobust()`但似乎它不知道要打开哪个文件，除非有一个文件名作为参数给出，而且没有。

因此，我怀疑`source`是空的，因此`plain`也是空的。

我建议打印出来`source`，`plaintext`并`plain`确保它们的值符合您的期望。

顺便`openFileReadRobust()`说一句，如果该函数可以为无意义的参数值返回无意义的值，那么该函数似乎对我没有多大帮助。我非常喜欢我的函数在这种情况下立即抛出异常。

# mysql - 无法为mysql设置密码

> ID：15867393
> 
> 赞同：1
> 
> 时间：2013-04-07T20:23:37.170
> 
> 标签：mysql

我在我的 Fedora 17 机器上安装 mysql，在尝试设置我的用户名和密码时出现以下错误。

```
mysqladmin -u root password xyz

mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' 
```

我在第一次设置用户名和密码时遇到此错误。

请帮忙。

# c++ - static constexpr 指向函数的指针，编译器之间的区别

> ID：15867399
> 
> 赞同：9
> 
> 时间：2013-04-07T20:24:21.643
> 
> 标签：c++, c++11, static, function-pointers, constexpr

在回答[这个问题时，我用 gcc（](https://stackoverflow.com/questions/15866258/template-class-multiple-definition/15866315)[代码编译](http://ideone.com/z7Rf49)）和 clang（[代码被拒绝](http://liveworkspace.org/code/PaAfb$0)）尝试了以下代码：

```
typedef long (*func)(int);

long function(int) { return 42; }

struct Test
{
    static constexpr func f = &function;
};

template<func c>
struct Call
{
    static void f()
    {
        c(0);
    }
};

int main()
{
    Call<Test::f>::f();
} 
```

我不确定哪个编译器是正确的，尽管我认为 constexpr 的初始化是`Test::f`可以的。错误叮当输出是：

```
error: non-type template argument for template parameter of pointer type 'func'
       (aka 'long (*)(int)') must have its address taken 
```

1.  哪个编译器是正确的？
2.  如果 clang 是对的，为什么，这个错误的真正含义是什么？

**编辑**：对于“为什么”，请参阅[DyP 的问题](https://stackoverflow.com/questions/15885399/pointer-as-non-type-template-argument)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T20:37:07.920

> 14.3.2 模板非类型参数 [temp.arg.nontype]
> 
> 非类型、非模板模板参数的模板参数应为以下之一：
> 
> [...]
> 
> — 一个常量表达式 (5.19)，它指定具有静态存储 > 持续时间和外部或内部链接的对象**或具有外部或内部链接的**函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，**表示（忽略括号）为 & id-expression**，但如果名称引用函数或数组，则 & 可以省略，如果相应的模板参数是引用，则应省略；[...]

（n3485，强调我的）

我不确切知道为什么它会受到限制，但我认为这可能与函数地址在编译时不可用的事实有关（可能有模板实例化目的的替代品）。

* * *

编辑：由于 Synxis 的后续问题（评论）而增强了答案

```
constexpr func = &function; 
```

^ 这是格式良好的；您可以使用函数的地址来初始化`constexpr`对象。问题是明确禁止使用指针作为非类型模板参数，而不是表单`&identifier`：

```
using My_Call     = Call < &function >;  // fine

constexpr func mypointer = &function;    // fine
using My_Ind_Call = Call < func >;       // forbidden, argument not of form `&id` 
```

# jquery - jhtml jquery在joomla中

> ID：15867403
> 
> 赞同：1
> 
> 时间：2013-04-07T20:24:52.587
> 
> 标签：jquery, joomla

我无法访问基于 Joomla 的网站。

由于以下错误消息：

```
error:500
JHtmlJquery: :framework not found in file 
```

如果有人可以帮助解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:47:30.983

尝试使用此代码：

```
JLoader::import( 'joomla.version' );
$version = new JVersion();
if (version_compare( $version->RELEASE, '2.5', '<=')) {
    if (JFactory::getApplication()->get('jquery') !== true) {
        $document = JFactory::getDocument();
        $document->addScript("http://ajax.googleapis.com/ajax/libs/jquery/jquery-latest.js");
        JFactory::getApplication()->set('jquery', true);
   }
} else {
    JHtml::_('jquery.framework');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:45:40.937

验证您使用的是 Joomla！3.0 并且该文件存在于 library/cms/html/jquery.php 中。如果您使用的是 3.0 并且缺少该文件，则您的站点已损坏，应在您的站点上重新安装最新的 3.0 软件包以确保您拥有所有文件。

如果您使用的是 Joomla！2.5 或更早版本，您可能正在使用与这些版本的 Joomla! 不兼容的扩展程序！或者代码中存在错误。确定您安装的扩展程序导致错误并将其报告给开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T05:21:18.637

尝试使用 Joomla 导入 jQuery，如下所示

```
JHtml::_('jquery.framework'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-09T17:51:24.640

解决这个问题很容易。您只需将最新版本的*jquery.php*文件从最新版本的 joomla 复制到路径*库/cms/html/jquery.php*下的2.5.x 或 3.x 版本中的 joomla*库/cms/html/目录*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-04T20:59:19.953

安装模块后，我尝试进入我的 joomla 2.5.3 站点的管理员端，但我收到以下错误消息：

> 500 - JHtml：不支持 jquery。文件未找到

解决方案

由于为 joomla 3.4.3 而不是为 joomla 2.5.3 安装了错误的模块版本，因此发生错误。新模块与站点不兼容。

我不得不进入cpanel，然后进入文件管理器，单击模块，然后找到安装的错误模块，单击它并删除文件夹。

然后我重新登录到管理员（后端），我无法再次访问站点后端。

这些步骤看起来很简单，但是您必须确定安装了错误的模块，如果不确定，请删除最近安装的模块文件夹

# mysql - MySQL 更新多列时出现错误 1064

> ID：15867404
> 
> 赞同：0
> 
> 时间：2013-04-07T20:24:52.783
> 
> 标签：mysql, sql-update, multiple-columns

我有以下 SQL 查询：

```
UPDATE mytable SET status = '2', dec = '268435458001932988' WHERE id = 29952 
```

表是：

```
status = varchar(1)
dec = varchar(23) 
```

在我阅读手册之后，我可以通过用“，”分隔多个列来更新它们。

那么为什么我在这里得到一个语法错误（1064）？

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'dec = '268435458001932988' WHERE id = 29952' at line 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:27:14.183

`DEC`显然是 MySQL 中的保留字。使用反引号。

```
UPDATE Mytable SET status = '2', `dec` = 'etc.'... 
```

保留字列表：[https ://dev.mysql.com/doc/refman/4.1/en/reserved-words.html](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:27:10.000

`dec`是一个保留字（ 的简写`decimal`）。尝试`dec`用反引号引用标识符：

更新 mytable 设置状态 = '2', `dec` = '268435458001932988' 其中 id = 29952;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T20:28:03.940

试试这个

```
 UPDATE mytable SET status = '2', `dec` = '268435458001932988' WHERE id = 29952 
```

`DEC`是mysql的保留关键字。

# android - 在Android中将图像转换为Base64的最有效方法是什么？

> ID：15867407
> 
> 赞同：2
> 
> 时间：2013-04-07T20:25:10.473
> 
> 标签：android, base64, type-conversion, android-image

我正在寻找在 Android 中将图像文件转换为 Base64 字符串的最有效方法。

图像必须一次以单个 Base64 字符串发送到后端。

首先我使用 imageToByteArray 然后 imageToBase64 来获取字符串。

```
 public static byte[] imageToByteArray(String ImageName) throws IOException {
    File file = new File(sdcard, ImageName);
    InputStream is = new FileInputStream(file);

    // Get the size of the file
    long length = file.length();

    // Create the byte array to hold the data
    byte[] bytes = new byte[(int)length];

    // Read in the bytes
    int offset = 0;
    int numRead = 0;
    while (offset < bytes.length
           && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
        offset += numRead;
    }

    //Close input stream
    is.close();
    // Ensure all the bytes have been read in
    if (offset < bytes.length) {
        throw new IOException("Could not completely read file "+file.getName());
    }
    return bytes;
}

    public String imageToBase64(String ImageName){      
    String encodedImage = null;
    try {
        encodedImage = Base64.encodeToString(imageToByteArray(ImageName), Base64.DEFAULT);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return encodedImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:45:25.320

Below is how I handle it mostly, this is in the gotActivityResults callback after calling the image picker activity. It's similar to your's but I think it will be more efficient because the toByteArray from the stream is native c code behind it as opposed to the java loop in yours.

```
 Uri selectedImage = imageReturnedIntent.getData();
                       InputStream imageStream = getContentResolver().openInputStream(selectedImage);
                       Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream);
                       ByteArrayOutputStream bao = new ByteArrayOutputStream();

                       yourSelectedImage.compress(Bitmap.CompressFormat.JPEG, 90, bao);

                       byte [] ba = bao.toByteArray();

                       String ba1= Base64.encodeToString(ba, 0);

                       HashMap<String, String > params = new HashMap<String, String>();
                       params.put("avatar", ba1);
                       params.put("id", String.valueOf(uc.user_id));
                       params.put("user_id", String .valueOf(uc.user_id));
                       params.put("login_token", uc.auth_token);
                       uc.setAvatar(params); 
```

# html - 使输入控件不可见并保持输入功能

> ID：15867412
> 
> 赞同：0
> 
> 时间：2013-04-07T20:25:36.853
> 
> 标签：html, css

我想知道是否可以使**HTML FORM 输入控件不可见**，同时**保持其输入文本编辑功能处于活动状态**。

为什么？因为设计师创造了一个图像，它应该被用作一种形式。图像使用了颜色渐变——在表单域的各处和内部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:29:51.603

您可以使用

```
input{
    background:transparent;
    border:none;
    outline:none;
} 
```

[JSF](http://jsfiddle.net/stTER/)中。

保留输入（文本编辑）功能并将其隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:29:42.557

您可以为文本字段尝试一些这样的样式：

```
input[type="text"] {
  background: transparent;
  border: 0;
} 
```

**注意：**透明度在 IE6 中默认不起作用。

# jquery - 填充可用宽度？（图片示例）

> ID：15867415
> 
> 赞同：1
> 
> 时间：2013-04-07T20:25:50.460
> 
> 标签：jquery, html, css

我有三列。中间列是 600 像素宽的固定内容。如何使左右列填充剩余的可用空间？我意识到这比看起来要困难得多。纯CSS可以吗？

![在此处输入图像描述](https://i.stack.imgur.com/ANSQZ.png)

类似于下面的 jsfiddle 示例，但内容宽度应该是固定的。

jsfiddle.net/4EN4P/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:32:28.217

而不是使用多个列，只需使用内容列`margin: 0 auto`而不是浮动并在容器上设置背景颜色。您可以删除左/右列的所有元素和样式。这当然假设这些列没有内容。

[http://jsfiddle.net/ExplosionPIlls/4EN4P/1/](http://jsfiddle.net/ExplosionPIlls/4EN4P/1/)

# javascript - 实例化 JavaScript 对象时的最佳实践是什么？

> ID：15867418
> 
> 赞同：0
> 
> 时间：2013-04-07T20:26:12.320
> 
> 标签：javascript, javascript-objects

在 JavaScript 中实例化一个对象时（特别是当在同一个脚本块中实例化多个对象时） - 将实例化包装在 try catch 语句中是一种好习惯，因此如果对象出错，它不会影响其中的任何其他对象剧本？

例如，这是最佳实践吗：

```
try{
    new navigation();
}catch(e){
  //handle exception for navigation fail
}

try{
    new Accordian();
}catch(e){
  //handle exception for accordion fail
} 
```

与

```
new navigation();
new accordian();
and so on..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:28:52.560

我看不出有什么好的理由这样做。如果从简单的对象实例化中抛出错误的可能性很高，那么代码应该有一些非常错误的地方。此外，众所周知，JavaScript 中的 try/catch 语句很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:48:45.770

> 将实例化包装在 try catch 语句中是否是一种好习惯，因此如果对象出错，它不会影响脚本中的任何其他对象？

`new`不，将对象的语句包装在一个`try catch`块中并不是一个好习惯。相反，您应该查看在实例化对象时可能会引发什么样的错误，并将初始化代码移动到可以处理错误的自己的函数中。承包商不应该尝试做太多事情。保持简单的原因。

# java - Java：使用 jTextArea 的交互式控制台

> ID：15867419
> 
> 赞同：1
> 
> 时间：2013-04-07T20:26:18.663
> 
> 标签：java, ide, console, cmd, command

我正在使用 jTextArea 为 IDE 开发类似控制台的 cmd。我想要做的是当我单击执行按钮时，它会在 jTextArea 中为我提供交互式输入/输出屏幕。

我能够获取 cmd 屏幕的输出内容，但是如果用户想要运行一个命令，比如从 stdin（这里来自我的 jTextArea）获取两个整数作为输入，并在我的控制台屏幕上显示总和，就好像它发生了一样在普通的 cmd/终端中。

如何将输入发送到该实例/会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:31:53.037

参见[java.lang.Process](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)，方法[java.lang.Process.getOutputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)

这个名字`OutputStream`是一个值得怀疑的选择，因为它是底层进程的输入，是你程序的输出。

# javascript - 使用 IAM 用户在 Javascript 中创建 AWS SQS 请求

> ID：15867423
> 
> 赞同：1
> 
> 时间：2013-04-07T20:26:32.493
> 
> 标签：javascript, amazon-web-services, hmac, amazon-sqs

我创建了一个仅对一个 SQS 队列具有 SendMessage 权限的 IAM 用户。我想将此 IAM 用户的凭证分发到我的客户端浏览器，以便可以将消息发送到此 SQS 队列。如何使用这些凭据在 JavaScript 中创建签名请求？我有一个可用的开源 HMAC-SHA256 JS 脚本，我只是无法理解有关版本 4 签名过程的文档，而且示例很少。

我了解跨域来源的含义，并且可以解决它们。

# wpf - 弹出窗口动画运行时 WPF 窗口消息未触发

> ID：15867429
> 
> 赞同：0
> 
> 时间：2013-04-07T20:27:24.623
> 
> 标签：wpf, animation, popup

我在 WPF 中创建了一个小弹出窗口，它以 500 毫秒的淡入淡出动画显示和隐藏。

当 TextBox 控件的 PreviewMouseUp 被触发时会显示 Popup，当 TextBox 失去焦点时会隐藏。

问题是，如果我有两个这样的文本框，弹出窗口的动画似乎会在动画进行时阻止所有发送到主窗口的窗口消息。只有在第一个 TextBox 的 Popup 动画完成后，第二个 TextBox 的 PreviewMouseUp 才会被触发。

有没有办法让我的弹出窗口的淡入淡出动画在动画运行时不阻止窗口消息？

示例 XAML 文件：

```
 <Window x:Class="WpfApplication4.MainWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                Title="MainWindow" Height="350" Width="525">
            <Grid>
                <TextBox HorizontalAlignment="Left" Height="23" Margin="22,26,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" PreviewMouseUp="TextBox_PreviewMouseUp_1" LostFocus="TextBox_LostFocus_1"/>
                <TextBox HorizontalAlignment="Left" Height="23" Margin="22,54,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120" PreviewMouseUp="TextBox_PreviewMouseUp_1" LostFocus="TextBox_LostFocus_1"/>

            </Grid>
        </Window> 
```

示例代码文件：

```
 using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;
        using System.Threading.Tasks;
        using System.Windows;
        using System.Windows.Controls;
        using System.Windows.Controls.Primitives;
        using System.Windows.Data;
        using System.Windows.Documents;
        using System.Windows.Input;
        using System.Windows.Media;
        using System.Windows.Media.Animation;
        using System.Windows.Media.Imaging;
        using System.Windows.Navigation;
        using System.Windows.Shapes;

        namespace WpfApplication4
        {
            /// <summary>
            /// Interaction logic for MainWindow.xaml
            /// </summary>
            public partial class MainWindow : Window
            {
                public MainWindow()
                {
                    InitializeComponent();
                }

                private void TextBox_PreviewMouseUp_1(object sender, MouseButtonEventArgs e)
                {
                    Popup p = new Popup();
                    p.Width = 100;
                    p.Height = 100;
                    p.Placement = PlacementMode.Left;
                    p.PlacementTarget = (TextBox)sender;
                    p.Child = new Border();
                    p.IsOpen = true;
                    ((TextBox)sender).Tag = p;
                }

                private void TextBox_LostFocus_1(object sender, RoutedEventArgs e)
                {
                    Popup p = (Popup)((TextBox)sender).Tag;
                    DoubleAnimation anim = new DoubleAnimation(100, 0, new Duration(new TimeSpan(0, 0, 1)));
                    p.BeginAnimation(WidthProperty, anim);
                }

            }
        } 
```

如果您快速单击两个文本框，您会注意到在动画运行时另一个弹出窗口不会出现（并且文本框没有获得焦点）。

到目前为止我发现，如果动画真的很密集（高帧率），窗口消息会被阻止，直到动画完成。如果我将应用程序帧速率设置为较低的值，例如 30FPS，那么问题就会消失。但这对我来说不是一个选择，因为我不希望动画尽可能流畅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:01:19.227

发生这种情况是因为我正在为弹出窗口的边缘设置动画 - 当窗口大小频繁更改时，它会生成大量窗口消息。（这当然会在动画期间卡住应用程序的整个 Windows 消息泵）。

所以解决方案不是为弹出窗口本身设置动画，而是为弹出窗口的子控件（例如面板）设置动画，并将弹出窗口设置为允许透明度，这样我们就可以获得相同的效果，但实际上不是动画实际窗口大小。

# java - JScrollBar 负增量

> ID：15867430
> 
> 赞同：0
> 
> 时间：2013-04-07T20:27:32.880
> 
> 标签：java, swing, illegalargumentexception, jscrollbar

我正在设计一个使用 JScrollBar 并水平设置的界面。它的设置就像

```
JScrollBar myScrollBar = new JScrollBar(JScrollBar.HORIZONTAL, 1500, 32, 900, 2100); 
```

然后将其添加到 JFrame。

这将我的最小值 1500 定位在滚动条的左侧，最大值 2100 在右侧。

我想做的是在左边设置最大值，在右边设置最小值。

尝试通过交换最小和最大范围值来做到这一点给了我一个 `java.lang.IllegalArgumentException: invalid range properties`

设置负增量会使箭头按我想要的方式运行，但是当我使用左箭头而不是左箭头时，滑块会向右移动。

有没有一种方法可以基本上翻转我缺少的 JScrollBar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:47:00.087

如果您尝试翻转滚动条，它将停止工作意味着滚动条上的 thae 框可以帮助您更改值，它会消失或隐藏在某个地方，它不会在屏幕上显示您，

例如，如果您设置最小值 = 2100，它现在不知道从哪里开始，因为我们通常从左到右以递增的值进行，这是不可能的

# function - Haskell 中的函数定义

> ID：15867431
> 
> 赞同：5
> 
> 时间：2013-04-07T20:27:33.130
> 
> 标签：function, haskell

我开始通过“Learn You a Haskell for Great Good！”来学习 Haskell。我犯了一个奇怪的错误，我找不到原因。

这是我输入的代码：

```
let xs = [if x < 3 then "bang" else "boom" | x <- xs] 
```

以及 GHCi 中的错误文本：

```
No instance for (Num [Char])
arising from the literal `3'
Possible fix: add an instance declaration for (Num [Char])
In the second argument of `(<)', namely `(3)'
In the expression: x < (3)
In the expression: if x < (3) then "bang" else "boom" 
```

但是当我输入：

```
let boom xs = [if x < 3 then "bang" else "boom" | x <- xs] 
```

这是书中的例子，我没有任何问题。

有人可以解释我的错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T20:31:40.620

您的定义`xs`是递归的，即您`xs`在其自己的定义中使用。我不认为那是你的本意。

由于您在列表推导中使用`"bang"`and `"boom"`，因此 Haskell 知道它`xs`必须是一个字符串列表（因为`xs`等于列表推导的结果）。此外，您说这`x`是`xs`( `x <- xs`) 的一个元素，因此`x`必须是一个字符串 (aka `[Char]`)。但是，您这样做`x < 3`，这意味着这`x`是一个数字。错误消息的意思是“字符串不是数字”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T20:35:18.687

尝试给表达式一个类型。

```
xs = [if x < 3 then "bang" else "boom" | x <- xs] 
```

列表也是如此`xs`，我们还不知道它的元素有什么类型，所以让我们接下来看看。列表元素是

```
if x < 3 then "bang" else "boom" 
```

这是类型`String`(aka `[Char]`) 的表达式。

所以`xs :: [String]`。由于`x`from 描述列表元素的表达式取自列表`xs`本身，因此它也是 a `String`，并且用于比较

```
if x < 3 
```

现在，`3`是一个整数文字，因此它是多态的并且具有类型

```
3 :: Num a => a 
```

所以从表达式`x < 3`中，我们有

*   `Num`来自文字的约束，
*   从 s列表中提取`String`的事实的类型。`x``String`

因此，我们需要一个具有良好类型表达式的`Num`实例。`String`

通常，没有`Num`实例`String`（有用的会是什么样子？），所以你会得到一个类型错误。

如果`xs`是函数的参数，

```
boom xs = [if x < 3 then "bang" else "boom" | x <- xs] 
```

没有理由应该的类型`x`应该是`String`，因此有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:51:15.470

```
let xs = ... 
```

表示 xs 等于 "bang" 和/或 "boom" 的列表，但条件规定应测试这些元素是否小于 3，这通常使用数字而不是字符串来完成。

```
let boom xs =... 
```

将函数 'boom' 等同于等式的右侧，其中参数 'xs' 是从中提取要测试 <3 的元素的列表。

# c - 使用带有指针的比较运算符来检查它是否在地址范围内？

> ID：15867433
> 
> 赞同：4
> 
> 时间：2013-04-07T20:27:56.310
> 
> 标签：c, pointers, void-pointers, memory-management

我正在实现一个函数，该函数通过调用`deallocate_cache(void *ptr)`.

我手头任务的记忆结构如下：

```
 22 typedef struct slab {
 23         void *addr;
 24         int bm[((SLAB_SIZE/8)/(8*sizeof(int)))+1]; // bitmap
 25         struct slab *next;
 26 } slab;

 39 typedef struct {
 40         int alloc_unit;
 41         slab S;
 42 } cache;

 45 typedef struct { // structure for the entire memory
 46         cache C[9];
 47         region *R;
 48 } memory; 
```

因此，我有一个`memory M`，其中包含缓存`c[0]`、`c[1]`、 ...、`c[8]`，而这些缓存又包含`slabs`. 当一个通过分配填满时，我通过字段`slab`分配另一个作为链表元素。`slab *next`

为了使我`deallocate_cache(void *ptr)`的工作正常，我必须首先找出是否`ptr`在缓存范围内，如果是，则在哪个缓存范围内。这是我到目前为止所拥有的：

```
 1\.    // Check if ptr is in the range of (slab_addr, slab_size) for each slab in each cache
 2\. int ci = 0, counter, coefficient, done, freeable;
 3\. slab *look_ahead;
 4\. for(; ci < 9; ci++){
 5\.         void *max_addr = &M.C[ci].S + SLAB_SIZE; // The upper bound of the address range of the first slab
 6\.         counter = 1;
 7\.         look_ahead = &M.C[ci].S;
 8\.         while(look_ahead->next != NULL){
 9\.             if( ptr > look_ahead->addr && ptr > max_addr){ // Check ptr is greater than S.addr. If yes, it's a good bet it's in this cache.
10\.                 look_ahead = look_ahead->next;
11\.                 max_addr += SLAB_SIZE; // Now the upper bound of the address range of the following slab
12\.                 counter++; // slab counter, 1-based counting
13\.             }
14\.             else {
15\.                     done = 1;
16\.                     break;
17\.             }
18\.         }
19\.         if(done == 1) break;
20.
21\. } 
```

不幸的是，很明显，这并没有按预期工作。有什么方法可以使用这样的指针来比较地址，或者检查指针是否在给定的地址范围内？还是我必须简单地比较我知道分配给的最大范围内的每个地址？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:39:15.543

首先，您不能在指向 的指针中添加任何内容或从中减去任何内容`void`。

指针算法仅针对指向已知大小的事物的指针定义。`void`，与`char`or`int`或`char*`or不同`struct slab`，没有已知的大小。这是因为对指针进行加法或减法会使指针中的地址增加指针所指大小的倍数。

因此，如果您`char* p;`随后`p = p + 1;`将`sizeof(char)`（即 1）添加到指针中的地址，但如果您`long* p;`随后`p = p + 1;`将`sizeof(long)`（通常为 2、4 或 8）添加到指针中的地址。

然而奇怪的是，同样的限制适用于将指针与`>`, `<`, `>=`,进行比较`<=`。比较的指针必须指向相同的类型，不能是`void`.

我认为您需要使用指针`char`而不是指针`void`或将后者转换为前者才能进行指针运算。

另一个需要注意的重要事项是，如果这些指针不指向同一个数组或同一个对象（可以像结构一样聚合） ，那么您不能合法地将指针与`>`, `<`,进行比较。C 标准声明这相当于未定义的行为。`>=``<=`

因此，如果您分别分配两个对象（作为单独对象的声明或作为单独调用`malloc()`或类似的），那么您不能合法地将指向这两个对象的指针与`>`, `<`, `>=`,进行比较`<=`。

`==`但是`!=`可以做到。

此比较限制的一个常见解决方法是将指针转换为`uintptr_t`，这是一种保证能够保存指针的无符号整数类型，并对此整数类型执行常规算术运算，然后，如果需要，将其转换（转换）回指针类型。

当然，这只有在您的编译器有意义地定义指向整数的指针和整数到指针的转换并保证通过转换指向它们的指针获得的整数值是内存地址时才有效。

使用此信息更正您的代码。

# javascript - HTML“未转换为”

> ID：15867441
> 
> 赞同：1
> 
> 时间：2013-04-07T20:28:36.487
> 
> 标签：javascript, html

我正在使用 innerHTML 属性将来自 HTML 编码的 JSON 对象的数据显示到 HTML 页面上。

```
var td = document.createElement("td");
td.innerHTML = data[i].name; // data[i].name = 'Audioslave 7&quot;' 
```

但不是将其显示为 Audioslave 7"，而是显示相同`Audioslave 7&quot;`

我试图做 .toString() 无济于事。我也试过

```
var td = document.createElement("td");
td.innerHTML = data[i].name + ' &gt;'; // data[i].name = 'Audioslave 7&quot;' 
```

在这种情况下，gt 正确显示为 >，但 qout 仍未显示。

我正在使用 HTML5，这发生在 Chrome 和 Safari 中。

我应该怎么做才能使其正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:44:22.743

如果您将文本打印为 html，它将正确显示。如果要调试，请确保将其打印为未编码的文本。

在您的情况下，它将显示为`&amp;quot;`，而浏览器又将其解码为`&quot;`. 似乎您在某些时候双重转义。

# php - .htaccess 小网址不起作用

> ID：15867443
> 
> 赞同：-1
> 
> 时间：2013-04-07T20:28:48.867
> 
> 标签：php, apache, .htaccess, mod-rewrite, ubuntu

我正在尝试让干净的网址与我的网站一起使用，但我遇到了问题

我已经学习了很多教程，并且我确信我的`.htaccess`文件配置正确。

**.htaccess 内容**

```
RewriteEngine On
RewriteRule ^([a-z]+)/([a-z\-]+)$ /$1/$2.php [L] 
```

我在 ubuntu 服务器上运行 apache，.htaccess 位于站点根文件夹，文件夹结构如下所示：

**文件夹结构**

```
/var/www/lim/
/var/www/lim/index.php
/var/www/lim/.htaccess 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:36:07.247

使用 .htaccess，您绝对必须使用 RewriteBase 指令，例如

```
RewriteBase / 
```

如果内容位于[http://www.yoursite.com/lim](http://www.yoursite.com/lim)子目录，则必须使用

```
RewriteBase /lim 
```

如果省略 RewriteBase，则在重写期间添加文件路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:52:37.643

我认为，另外，您的 .htaccess 应该将第二个路径组件重写为 index.php 的页面参数，如下所示：

```
RewriteEngine On
RewriteBase /
RewriteRule ^([a-z]+)/([a-z\-]+)$ /$1/index.php?page=$2 [L] 
```

这样，一个 URL like`[http://yourserver.com/lim/mypage](http://yourserver.com/lim/mypage)`就会变成`[http://yourserver.com/lim/index.php?page=mypage](http://yourserver.com/lim/index.php?page=mypage)`.

# gnuplot - gnuplot 不完整的图形

> ID：15867444
> 
> 赞同：0
> 
> 时间：2013-04-07T20:28:50.717
> 
> 标签：gnuplot

我想绘制这个名为的数据表`quad.dat`

```
#size  time unoptimized blas optimized
2000        0.038101        0.012038        0.012070
4000        0.153213        0.031582        0.048172
6000        0.344972        0.058697        0.108295
8000        0.616240        0.110157        0.192449
10000       0.957405        0.159003        0.300352
12000       1.378795        0.232613        0.431949
14000       1.877082        0.312295        0.587642
16000       2.451135        0.398170        0.766826
18000       4.364723        0.508351        0.970915
20000       5.480937        0.625813        1.197483
22000       6.593878        0.760008        1.448211
24000       7.757721        0.902324        1.714848
26000       9.107044        1.051169        2.018033 
```

这是我的 gnuplot 脚本：

```
set ylabel "Time [s]"
set xlabel "matrix size[ in k(1000)]"
set xrange [0:26]
set yrange [0:15]
plot "quad.dat" using 2 title "unoptimized" with lines, \
     "quad.dat" using 3 title "blas" with lines,\
     "quad.dat" using 4 title 'optimized' with lines
pause -1 
```

这是实际情节的样子：

[![演示图](https://i.stack.imgur.com/hCAnM.png)](https://i.stack.imgur.com/hCAnM.png)

如您所见，并非所有点都被绘制出来，我不明白为什么，它似乎停在 12k 左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:33:39.307

当您只给出`using`一列来绘制时，gnuplot 假定这些是`y`值，并且这些`x`值是使用连续整数填充的。这不是您想要的（如果它在 12 处停止，则意味着文件中有 12 个数据点）。

*您实际上想明确地*告诉 gnuplot x 值：

```
plot "quad.dat" using ($1/1000.):2 title "unoptimized" with lines,\
     "quad.dat" using ($1/1000.):3 title "blas" with lines,\
     "quad.dat" using ($1/1000.):4 title 'optimized' with lines 
```

（这将第一列中的数字除以 1000 以与 x-label 一致）。

# ios - 以编程方式创建和呈现模态视图控制器

> ID：15867447
> 
> 赞同：4
> 
> 时间：2013-04-07T20:29:06.110
> 
> 标签：ios, uiviewcontroller, modalviewcontroller, presentmodalviewcontroller

我正在尝试从使用情节提要启动的视图控制器中以编程方式声明模态视图控制器。我希望看到一个空白视图出现，但我只看到第一个控制器的 webview。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *fullURL = @"http://google.com";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    _viewWeb.delegate=self;
    [_viewWeb loadRequest:requestObj];

    modalViewController=[[UIViewController alloc] init];
    [self presentViewController:modalViewController animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T20:31:16.550

你这样做太快了。还没有接口，在`viewDidLoad`. 把那个代码放进去`viewDidAppear:`，看看会发生什么。

# javascript - 将 JSON 文档转换为 Google Chart 格式

> ID：15867454
> 
> 赞同：2
> 
> 时间：2013-04-07T20:29:56.023
> 
> 标签：javascript, formatting, elasticsearch

我对 Javascript 相当陌生，我的情况是这样的：我正在使用 Google Charts 来可视化一些数据，并且这些数据包含在 Elasticsearch 中。

我正在使用 Ajax 命令查询数据，但是返回的数据在当前格式的 Google 图表中不可用。

查询返回如下数据：

`{ took: 5 timed_out: false _shards: { total: 5 successful: 5 failed: 0 } hits: { total: 11 max_score: 1 hits: [ { _index: inventory _type: on_hand _id: 4 _score: 1 _source: { warehouse_id: 107 date: 03-28-2013 lane: M01 routes: 383 } }`

我需要为 Google 图表设置如下格式：

```
{
  "cols": [
        {"id":"","label":"Lane","type":"string"},
        {"id":"","label":"Routes","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"M01"},{"v":4657}]},
        {"c":[{"v":"M02"},{"v":4419}]},
        {"c":[{"v":"M03"},{"v":4611}]},
        {"c":[{"v":"M04"},{"v":4326}]},
        {"c":[{"v":"M05"},{"v":4337}]},
        {"c":[{"v":"M06"},{"v":5363}]}
      ]
} 
```

虽然我不希望有人为我编写代码，但如果有人能给我一个很好的起点来提取所需的数据并添加正确的格式等，我将不胜感激`"cols": [...`。`"rows":[...`谢谢！

编辑：

我能够运行更新的查询，它以有效的 JSON 格式返回结果：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 7,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "4",
      "_score" : 1.0, "_source" : {"lane":"M04","routes":"102"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "5",
      "_score" : 1.0, "_source" : {"lane":"M03","routes":"143"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "1",
      "_score" : 1.0, "_source" : {"lane":"M07","routes":"80"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "6",
      "_score" : 1.0, "_source" : {"lane":"M02","routes":"157"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "2",
      "_score" : 1.0, "_source" : {"lane":"M06","routes":"101"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "7",
      "_score" : 1.0, "_source" : {"lane":"M01","routes":"105"}
    }, {
      "_index" : "wcs",
      "_type" : "routes",
      "_id" : "3",
      "_score" : 1.0, "_source" : {"lane":"M05","routes":"160"}
    } ]
  }
} 
```

然而，所需的 JSON 文档实际上需要与我在原始帖子中显示的完全一样，以便 Google Charts 能够使用它。和值需要从返回的数据中提取（如上所示）并格式化为原始帖子中的 JSON 文档`"lane"`。`"routes"`再次感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:40:39.123

您应该能够执行以下操作：

```
var json = {
  "took": 2,
  "timed_out": false,
  "_shards": {
    "total": 5,
    "successful": 5,
    "failed": 0
  },
  "hits": {
    "total": 7,
    "max_score": 1,
    "hits": [
      {
        "_index": "wcs",
        "_type": "routes",
        "_id": "4",
        "_score": 1,
        "_source": {
          "lane": "M04",
          "routes": "102"
        }
      }
    ]
  }
};

var data = {};
data.cols = [
    {
        "id": "",
        "label": "Lane",
        "type": "string"
    },
    {
        "id": "",
        "label": "Routes",
        "type":"number"
    }
];
data.rows = [
    {
        "c": [
            {
                "v": json.hits.hits[0]._source.lane
            },
            {
                "v": json.hits.hits[0]._source.routes
            }
        ]
    }
];

console.log(data); 
```

# isapi-rewrite - IsapiRewrite 规则生成奇怪的页面/文件夹？

> ID：15867456
> 
> 赞同：0
> 
> 时间：2013-04-07T20:30:03.040
> 
> 标签：isapi-rewrite, helicontech

我正在为我的自定义经典 ASP 购物车使用来自 helicontech 的 IsapiRewrite。我实际的 httpd.ini 文件是：

```
[ISAPI_Rewrite]
RewriteBase /
RewriteCond %HTTPS off
RewriteCond Host: (?!^www.domain.com)(.+)
RewriteRule /(.*) http\://www.domain.com/$2 [I,RP]
RewriteRule /httpd(?:\.ini|\.parse\.errors).* / [I,O]
RewriteRule /(.+)-([^-]*)-([^-]*)-([^-]*)\.html$ /detail.asp?brand=$1&model=$2&id=$3&lg=$4 [L] 
```

所以我实际上使用这个组件只是为了以一种很好的方式重写产品详细信息页面。最近在 google 缓存中查找我发现一些文件夹，其中包含由 googleBot 缓存的文件，这些文件在我的服务器上不存在，例如：domain.com/carrera-CHAMPION ...等等。如果我访问这些奇怪的页面，绘制的页面是 detail.asp 页面，但没有加载 css 和一些 js。我最近使用 Acunetix 扫描仪测试了该站点，似乎他也发现了这些奇怪的文件夹。首先，我添加了一个 javascript 检查来检查是否未加载 Jquery，那么这意味着该页面是其中之一，所以我发出警报并将用户重定向到主页.. 你知道可能是什么吗？或者我如何通过 httpd.ini 中的规则解决这个问题？

希望我能说清楚，如果不能随时问我细节，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:13:50.187

你能确认当你禁用 ISAPI_Rewrite 时这些奇怪的页面/文件夹消失了吗？请注意，ISAPI_Rewrite 仅重写响应标头并且不能生成任何内容，因此极不可能是问题的原因。

顺便说一句，您的配置是 ISAPI_Rewrite 2 和 3 语法的混合。如果是 v2，请按如下方式修复：

```
[ISAPI_Rewrite]
RewriteCond %HTTPS off
RewriteCond Host: (?!www.domain.com).+
RewriteRule /(.*) http\://www.domain.com/$1 [I,RP]
RewriteRule /httpd(?:\.ini|\.parse\.errors).* / [I,O]
RewriteRule /(.+)-([^-]*)-([^-]*)-([^-]*)\.html$ /detail.asp\?brand=$1&model=$2&id=$3&lg=$4 [L] 
```

# c# - 是否有任何选项可以为 Xna 选择纹理过滤

> ID：15867457
> 
> 赞同：2
> 
> 时间：2013-04-07T20:30:06.060
> 
> 标签：c#, .net, graphics, xna, textures

图片： http: [//www.whitedesing.com/images/Why.png](http://www.whitedesing.com/images/Why.png)

伙计们我正在使用一个名为“Xna 4.0”的软件

我在 Photoshop 上绘制了一个精灵，原始分辨率为 1897 x 2664 300dpi .. 我使用软件命令，它正在缩小我的精灵。

```
spriteBatch.Begin(SpriteSortMode.Immediate, null, null, null, null, null, Matrix.CreateScale(.04f, .04f, 1f));
spriteBatch.Draw(_ship, _shipRect,null, Color.White, 0, new Vector2(0,0), SpriteEffects.None, 1);
spriteBatch.End(); 
```

但我无法在 Xna 上获得一个清晰的精灵。我什至可以在我的 windows 文件夹上看到一个漂亮的外观：D（你可以在图片上看到）是否有任何选项可以更改 Xna 上的那个东西？对不起我的英语不好..

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:47:55.070

您可以[`SamplerState`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.samplerstate.aspx)在调用时指定应该用于纹理过滤的[`SpriteBatch.Begin`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.begin.aspx).

*   [可用抽样方法的细分](https://stackoverflow.com/a/14746860/925580)

# laravel - 雄辩的ORM，如何避免冗余查询？

> ID：15867460
> 
> 赞同：0
> 
> 时间：2013-04-07T20:30:20.920
> 
> 标签：laravel, laravel-4, eloquent

假设我的所有数据库表中都有字段状态。当我想删除一条记录时，我将字段状态的值设置为 0，而不是清除它。这当然意味着我的所有查询都将始终使用 where 子句，例如：

```
WHERE status = 1 
```

但是，这意味着我必须将 where('status', '=', 1) 编写并附加到我雄辩模型的所有方法中。它永远是这样的：

```
Post::find(1).where('status', '=', 1)
Post::where('status', '=', 1)->get()
Post::find(1).where('status', '=', 1).comments().where('status', '=', 1)->get() 
```

有没有办法将某些东西定义为默认范围，以使 status = 1 始终存在于我的模型的所有方法中并且一直存在？

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T18:56:57.763

这应该可以解决问题，至少在软删除方面：

[http://four.laravel.com/docs/eloquent#soft-deleting](http://four.laravel.com/docs/eloquent#soft-deleting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:50:50.220

您可以使用范围方法。

```
public function scopeActive($query)
{
    $query->where('status', '=', 1);
} 
```

然后，你像这样使用：

```
Post::active()->get(); 
```

# php - 将Javascript事件添加到PHP中的按钮

> ID：15867462
> 
> 赞同：2
> 
> 时间：2013-04-07T20:30:32.633
> 
> 标签：php, jquery, dom, onclick

在数据库中，存储了许多项目。当用户加载页面时，项目被列为表格的行。为了使用户可以删除元素（行），每行还提供了一个“删除项目”按钮，并`onclick`附加了一个事件。这是生成表格的 PHP 部分。

```
for ($i=0; $i<$num_books; $i++)
{
    $book  = mysql_fetch_row($classics);
    $shop .= "<tr>\n";
    $shop .= "<td>".$book[0]."</td>\n";
    $shop .= "<td><input type='button' onclick='remove_item()' value='Remove' /></td>\n";
    $shop .= "</tr>\n";
} 
```

该`remove_item()`函数在 JQuery 外部定义（见下文）。

但是，现在单击按钮会导致错误：`ReferenceError: Can't find variable: remove_item`. 我相信这是因为`remove_item()`DOM 不知道 PHP 返回的函数。

如何纠正？

*完整*的标记在这里

```
 <html>
     <head>
     <script type='text/javascript'
             src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js">
     </script>
     <script type="text/javascript"
             src="../behaviour/interactions.js">
     </script>
     </head>
     <body>
         <h1>Publications database</h1>
         <div id="items"></div>
     </body>
 </html> 
```

*完整* 的`interactions.js`脚本在这里

```
$('document').ready(function()
{
    // Path to MySQL configuration.
    var server = '../server/'
    var data   = '../data/'

    function mysql_connection_setup()
    {
        $.get(data + 'mysql_connection_setup.php');
    }

    function populate()
    {
        $.get(server + 'shop.php', cb);
    }

    function remove_item()
    {
        console.log("Remove item.");
    }

    // Generic AJAX callback.
    function cb(response)
    {
        $('#items').html(response);
    }

    mysql_connection_setup();
    populate();
}); // End ready 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:33:51.373

把它放在`<head>`标签中：

```
<script>
  function remove_item()
  {
      console.log("Remove item.");
      // Fancy AJAX call to manipulate database.
  }
</script> 
```

通过这样做，将可以全局访问该功能。或者，至少，您必须声明`before`调用它们的函数。

好的，这里应该是解决方案：首先，全局声明变量。

```
<head>
  <script>
    var mysql_connection_setup, populate, remove_item, cb ;
  </script>
</head> 
```

然后将函数分配给变量：

```
$('document').ready(function()
{
    // Path to MySQL configuration.
    var server = '../server/'
    var data   = '../data/'

    mysql_connection_setup = function()
    {
        $.get(data + 'mysql_connection_setup.php');
    }

    populate = function()
    {
        $.get(server + 'shop.php', cb);
    }

    remove_item = function()
    {
        console.log("Remove item.");
    }

    // Generic AJAX callback.
    cb = function(response)
    {
        $('#items').html(response);
    }

    mysql_connection_setup();
    populate();
}); // End ready 
```

您不能在其他函数中声明函数。但是你可以在里面创建变量回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:42:38.457

由于您已经包含了 jQuery，请考虑使用它自己的函数来`click`准备文档。

我会将 PHP 代码更改为：

```
for ($i=0; $i<$num_books; $i++)
{
    $book  = mysql_fetch_row($classics);
    $shop .= "<tr>\n";
    $shop .= "<td>".$book[0]."</td>\n";
    $shop .= "<td><input type='button' class='myClass' value='Remove' /></td>\n";
    $shop .= "</tr>\n";
} 
```

在`<head>`HTML 文档的一部分，我将添加以下内容：

```
$(document).ready(function(){
    $('.myClass').click(function(){
       console.log("Remove item."); //or call directly remove_item();
    });
}); 
```

# apache - Apache Camel - Node.js 的问题

> ID：15867469
> 
> 赞同：1
> 
> 时间：2013-04-07T20:31:21.597
> 
> 标签：apache, node.js, apache-camel

所以我在一段代码中有 100 个不同的地方出错了。我最近从 Apache 和 PHP 切换到 Node.js。我有一段特定的代码，它只是复制它收到的请求。基本上，我的 Web 应用程序向我的服务器（PHP 或 Node.js）发布一个 JSON 请求，然后服务器向我的 Apache Camel 配置发送完全相同的请求。在 PHP 中，这非常有效。切换到 Node.js 时，我收到来自 Apache Camel 的错误。

具体来说，我有一段代码几乎瞬间发送了两次完全相同的请求（我知道如何修复它，请耐心等待）。在 PHP 中，这段代码可以正常工作。在 Node.js 中，第一个请求工作正常，但第二个请求失败。Apache Camel 第二次收到一个空主体的请求。老实说，我 100% 无能为力。

这里到底出了什么问题？逻辑告诉我，如果它适用于 PHP 而不是 Node（相同的 Camel 代码），那么它一定是 Node.js 的问题。但为了以防万一，我不得不提到 Camel，因为 Camel 有时会对请求做一些奇怪的事情。

我将在下面发布我的代码，也许您会看到一个问题。我已经为此工作了 3 天（打开和关闭），还没有发现问题。另外，请记住，我几天前才开始使用 node。

PHP

```
<?php
    require_once("globals.php");

    //There's nested JSON here so I could include the destination address
    $request = file_get_contents('php://input');
    $json = json_decode($request);
    $urlid = $json->{"urlid"};
    $json = $json->{"data"};

    if (session_start() === FALSE)
    {
        echo "{ \"postsuccess\": false, \"error\": -1 }";
        return;
    }

    if(!isset($_SESSION["username"]) ||
            !isset($_SESSION["expirationdate"]) ||
            !isset($_SESSION["securitytoken"]) ||
            $_SESSION["expirationdate"] <= time())
    {
        echo "{ \"postsuccess\": false, \"error\": -2 }";
        return;
    }

    if(strtolower($_SESSION["username"]) != strtolower($_COOKIE["UserNameCookie"]))
    {
        echo "{ \"postsuccess\": false, \"error\": -3 }";
        return;
    }

    $json->{"securitytoken"} = strtolower($_SESSION["securitytoken"]);
    $json->{"username"} = strtolower($_SESSION["username"]);
    $request = json_encode($json);

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $URL[$urlid]);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/plain; charset=utf-8"));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);

    $data = curl_exec($ch);
    curl_close($ch);

    echo $data;
?> 
```

Node.js（打字稿）

```
function handler(request: ExpressServerRequest, response: ExpressServerResponse) {
    try {
        var json = (request.body || JSON.parse(request.rawBody));
        var security_token = request.cookies.get(global.security_token_cookie, {signed: true});
        var username = request.cookies.get(global.username_cookie, {signed: true});
        var urlid = json.urlid;
        json = json.data;

        if (!security_token || !username) {
            response.send({postsuccess: false, error: -2});
            return;
        }

        json.securitytoken = security_token;
        json.username = username;

        var callback = function(data) {
            response.json(data);
        };

        db.databaseRequest(urlid, json, callback);
    } catch (e) {
        console.error(e.stack);
        response.send({postsuccess: false, error: -1});
    }
}

//Was in a different module
function databaseRequest(url: number, data: any, callback: (any) => void) {
    try {
        var json = JSON.stringify(data);

        var headers = {
            "Content-Type": "application/json",
            "Content-Length": json.length
        };

        var options = {
            host: db_host,
            port: db_port,
            path: url_locations[url],
            headers: headers,
            method: "POST"
        };

        var request = http.request(options, function(response) {
            response.setEncoding("utf8");

            var returnData = "";

            response.on("data", function(d) {
                returnData += d;
            });

            response.on("end", function() {
                if (returnData) {
                    callback(JSON.parse(returnData));
                } else {
                    callback(null);
                }
            });
        });

        request.on("error", function(e) {
            console.error("Error posting database request:");
            console.error("Location: " + url_locations[url]);
            console.error("Data: " + json);
            console.error("Error Event: " + e);
        });

        request.write(json);
        console.log("Sending: " + json + " to " + url_locations[url]);
        request.end();
    } catch (e) {
        console.error(e.stack);
        request.end();
        callback({ "dberror" : true });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:02:14.207

编辑：

我将保持更新，但老实说，我怀疑除了我之外的任何人都会遇到这个问题。：/

我找到了问题的根源。原来是并发问题。PHP 以线性方式提交请求，而 Node.js 是非阻塞的，因此它会在其他请求返回之前发送请求。本质上，我笨到可以将状态信息存储在处理器中。我的路线看起来像这样：

```
from("jetty:http://foo").process(new WorkProcessor()).to("direct:foo2"); 
```

我最初的想法是“好的，`WorkProcessor`每次触发路由时都会创建一个新的，因此每条消息都有自己的小沙箱”。不幸的是，事实并非如此，它只创建一次。我不知道为什么我会这么想，但我确实这么想。:(

所以我通过不在处理器实例中存储信息来解决这个问题。它使我的代码更长一点，但它解决了我的问题。

# javascript - 隐藏 xAxis highchart 柱形图上的特定列

> ID：15867472
> 
> 赞同：2
> 
> 时间：2013-04-07T20:31:56.413
> 
> 标签：javascript, highcharts

我如何在 Highcharts api 的柱形图中隐藏/显示一个实用的列。我有一个系列。
要隐藏的列位于 xaxis 上。对于正弦图，`chart.series[4].hide() /show()`工作正常，对于饼图，`chart.series[0].data[0].setVisible(false);` 工作正常。但我无法找出柱形图的解决方案。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T11:35:33.780

您可以使用 Element.hide() 和 Element.show()，例如：

```
var chart = $("#container").highcharts();
chart.series[0].data[0].graphic.hide();
chart.series[0].data[0].dataLabel.hide(); 
```

# c++ - 调用 QTableView::setModel() 后如何在 QStandardItemModel 和 QTableView 上编辑数据

> ID：15867476
> 
> 赞同：0
> 
> 时间：2013-04-07T20:32:52.693
> 
> 标签：c++, qt, qtableview, qstandarditemmodel

伙计们！！

我正在尝试将产品列表填充到 QTableView 将使用的 QStandardItemModel 中。但是程序启动后我无法获取这些数据。

我该怎么做？从 QStandardItemModel 更改数据（例如：更改行数据、删除行、插入新行、删除所有行并重新插入行）并以动态方式将其显示在 QTableView 上（例如：通过将新产品添加到产品数组或单击按钮 addSomeNewLine 或 editSomeNewLine)

谢谢

# c# - 通过递归检查父子关系C#构建树类型列表

> ID：15867478
> 
> 赞同：24
> 
> 时间：2013-04-07T20:32:58.607
> 
> 标签：c#, recursion, tree

我有一个具有自身列表的类，因此可以用树结构表示。

我正在提取这些类的平面列表，并希望将其展开。

```
public class Group
{
     public int ID {get;set;}

     public int? ParentID {get;set;}

     public List<Group> Children {get;set;}

} 
```

我希望能够做到以下几点

```
List<Group> flatList = GetFlatList() //I CAN ALREADY DO THIS
List<Group> tree = BuildTree(flatList); 
```

如果不明显，则 ParentID 与其父组上的 ID 属性相关。

**编辑**

关于为什么我返回一个列表而不是单个对象存在一些困惑。

我正在构建一个包含项目列表的 UI 元素，每个项目都有一个孩子。所以初始列表没有根节点。到目前为止，似乎所有解决方案都不起作用。

这意味着我本质上需要一个使用 Group 类的树型结构列表。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-07T20:53:53.257

我不知道你为什么希望你的`BuildTree`方法返回`List<Group>`- 树需要有根节点，所以你应该期望它返回单个`Group`元素，而不是列表。

我会创建一个扩展方法`IEnumerable<Group>`：

```
public static class GroupEnumerable
{
    public static IList<Group> BuildTree(this IEnumerable<Group> source)
    {
        var groups = source.GroupBy(i => i.ParentID);

        var roots = groups.FirstOrDefault(g => g.Key.HasValue == false).ToList();

        if (roots.Count > 0)
        {
            var dict = groups.Where(g => g.Key.HasValue).ToDictionary(g => g.Key.Value, g => g.ToList());
            for (int i = 0; i < roots.Count; i++)
                AddChildren(roots[i], dict);
        }

        return roots;
    }

    private static void AddChildren(Group node, IDictionary<int, List<Group>> source)
    {
        if (source.ContainsKey(node.ID))
        {
            node.Children = source[node.ID];
            for (int i = 0; i < node.Children.Count; i++)
                AddChildren(node.Children[i], source);
        }
        else
        {
            node.Children = new List<Group>();
        }
    }
} 
```

***用法***

```
var flatList = new List<Group>() {
    new Group() { ID = 1, ParentID = null },    // root node
    new Group() { ID = 2, ParentID = 1 },
    new Group() { ID = 3, ParentID = 1 },
    new Group() { ID = 4, ParentID = 3 },
    new Group() { ID = 5, ParentID = 4 },
    new Group() { ID = 6, ParentID = 4 }
};

var tree = flatList.BuildTree(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-07T20:48:31.903

以下是如何在一行中执行此操作：

```
static void BuildTree(List<Group> items)
{
    items.ForEach(i => i.Children = items.Where(ch => ch.ParentID == i.ID).ToList());
} 
```

你可以这样称呼它：

```
BuildTree(flatList); 
```

如果最后你想获取其父节点为空的节点（即顶级节点），你可以简单地这样做：

```
static List<Group> BuildTree(List<Group> items)
{
    items.ForEach(i => i.Children = items.Where(ch => ch.ParentID == i.ID).ToList());
    return items.Where(i => i.ParentID == null).ToList();
} 
```

如果你想让它成为一个扩展方法，你可以`this`在方法签名中添加：

```
static List<Group> BuildTree(this List<Group> items) 
```

然后你可以这样称呼它：

```
var roots = flatList.BuildTree(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-28T00:54:09.567

我尝试了建议的解决方案，并发现它们为我们提供了 O(n^2) 复杂性。

就我而言（我有大约 50k 项要构建到树中），这是完全不可接受的。

我来到了以下解决方案（假设每个项目只有一个父项并且所有父项都存在于列表中），复杂度为 O(n*log(n)) [n 次 getById，getById 具有 O(log(n)) 复杂度] ：

```
static List<Item> BuildTreeAndReturnRootNodes(List<Item> flatItems)
{
    var byIdLookup = flatItems.ToLookup(i => i.Id);
    foreach (var item in flatItems)
    {
        if (item.ParentId != null)
        {
            var parent = byIdLookup[item.ParentId.Value].First();
            parent.Children.Add(item);
        }
    }
    return flatItems.Where(i => i.ParentId == null).ToList();
} 
```

完整的代码片段：

```
class Program
{
    static void Main(string[] args)
    {
        var flatItems = new List<Item>()
        {
            new Item(1),
            new Item(2),
            new Item(3, 1),
            new Item(4, 2),
            new Item(5, 4),
            new Item(6, 3),
            new Item(7, 5),
            new Item(8, 2),
            new Item(9, 3),
            new Item(10, 9),
        };
        var treeNodes = BuildTreeAndReturnRootNodes(flatItems);
        foreach (var n in treeNodes)
        {
            Console.WriteLine(n.Id + " number of children: " + n.Children.Count);
        }
    }
    // Here is the method
    static List<Item> BuildTreeAndReturnRootNodes(List<Item> flatItems)
    {
        var byIdLookup = flatItems.ToLookup(i => i.Id);
        foreach (var item in flatItems)
        {
            if (item.ParentId != null)
            {
                var parent = byIdLookup[item.ParentId.Value].First();
                parent.Children.Add(item);
            }
        }
        return flatItems.Where(i => i.ParentId == null).ToList();
    }
    class Item
    {
        public readonly int Id;
        public readonly int? ParentId;

        public Item(int id, int? parent = null)
        {
            Id = id;
            ParentId = parent;
        }
        public readonly List<Item> Children = new List<Item>();
    }
} 
```

# opencv - hypermedia.video.opencv.capture(III)V

> ID：15867483
> 
> 赞同：-2
> 
> 时间：2013-04-07T20:33:11.140
> 
> 标签：opencv

我已经从[这个网站](http://ubaa.net/shared/processing/opencv/)为我的 Windows 7 笔记本电脑下载了 OpenCV 版本 1 。出于某种原因，每当我尝试运行像`face_detection`or之类的示例草图时`threshold`，都会收到以下错误消息：

> UnsatisfiedLinkError: hypermedia.video.opencv.capture(III)V

我是不是下载错版本了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:49:21.387

确保您还安装了[OpenCV 1.0](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/1.0/OpenCV_1.0.exe/download)本身，而不仅仅是 Processing 包装器。

还要确保安装程序设置了**PATH**变量。

![OpenCV 路径](https://i.stack.imgur.com/v1wer.png)

此时，您应该能够运行不访问相机的基本示例。如果没有，您可以手动检查 PATH 变量是否在环境变量中包含 OpenCV 的路径。

如果您可以在没有摄像头访问权限的情况下运行 OpenCV 处理示例，但在访问网络摄像头时遇到错误，请尝试安装[WinDVIG_101](http://www.eden.net.nz/7/20071008/WinVDIG_101.exe)。

在 Windows 上，我有时会发现 OpenCV 处理包装器有时可以与某些处理版本一起使用，而不是其他版本。尝试同时测试 Processing 2.0+ 和 Processing 1.5.1

# c++ - 空 shared_ptr 的语义

> ID：15867485
> 
> 赞同：1
> 
> 时间：2013-04-07T20:33:29.667
> 
> 标签：c++, shared-ptr, reference-counting, nullptr

我注意到一个关于 shared_ptr 的奇怪事实

```
int* p = nullptr;
std::shared_ptr<int> s(p); // create a count (1).
std::shared_ptr<int> s2(s); // count go to 2.
assert(s.use_count() == 2); 
```

我想知道除此之外的语义是什么。为什么 s 和 s2 共享一个 nullptr ？这有什么意义吗？

或者也许这种不常见的情况不值得一个 if 语句（代价高昂？）？

感谢您的任何启发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:40:39.937

语义是：

*   如果你默认构造一个共享指针，或者从 构造一个`nullptr_t`，它是空的；也就是说，它不拥有任何指针。
*   如果您从原始指针构造一个，它会获得该指针的所有权，无论它是否为空。我想这是因为你提到的原因（避免运行时检查），但我只能推测。

所以你的例子不是空的；它拥有一个空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:35:22.937

谁在乎他们正在共享`nullptr`? 一旦它们都被摧毁，它们就会尝试`delete nullptr;`这将没有任何效果。这完全没问题，并且符合`shared_ptr`.

有意义的是，空指针值不需要特殊情况。它是否出现在您的代码中只是归结为您是否有一些可以接受或返回 null`shared_ptr`的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:38:38.160

shared_ptr 将计算并释放它给出的任何指针（不仅是 nullptr，而且还有一些无效的指针）。因此，在您的示例中，这将导致 nullptr 被删除，这是有效的情况。 [在 c++0x 中删除 nullptr 是否仍然安全？](https://stackoverflow.com/questions/6731331/is-it-still-safe-to-delete-nullptr-in-c0x)

# debugging - gdb、valgrind、strace、ltrace和apport的区别

> ID：15867487
> 
> 赞同：36
> 
> 时间：2013-04-07T20:33:48.253
> 
> 标签：debugging, gdb, valgrind, strace, ltrace

我正在寻找以下调试工具之间的区别。

那些是什么？

**E：**如果有人偶然发现这里并想知道“差异”是什么（从手册页缩短）：

*   **`GDB`**

    允许您在程序运行/崩溃时查看程序“内部”发生的情况。

*   **`Valgrind`**

    一系列灵活的调试和分析工具。

*   **`Strace`**

    记录/拦截进程调用/接收的系统调用。

*   **`Ltrace`**

    记录/拦截进程调用/接收的信号/动态库/系统调用。

*   **`Apport`**

    拦截崩溃/未处理的异常，收集操作系统信息，提供有用的 UI，并能够提交非崩溃错误。

# c# - 发布模式下的 C# 编译器开关

> ID：15867493
> 
> 赞同：0
> 
> 时间：2013-04-07T20:34:51.867
> 
> 标签：c#

我有一个应用程序，我在其中使用编译器开关来控制是否包含大块代码。想想自动变速箱或手动变速箱的汽车。在调试模式下工作正常，但在发布模式下，看起来自动变速箱和手动变速箱都已编译，所以汽车开得不太好......

那么我试图从编译器开关中获取选项控制功能是错误的吗？

更多细节：我对编译器开关的理解是有缺陷的。

下面评论中的简单项目。（不太擅长驱动 StackOverFlow）

继续类比，（Winform）项目是用手动变速器构建的。它是使用安装项目以调试模式部署的。（错误）。

几年后需要自动变速箱。（没有产生基类的共性）。当时的想法是有一天可能会再次需要手动变速箱）

似乎编译器开关是决定使用哪个代码块的好主意。自动传输版本再次以调试模式部署。

经过几年的运行，我决定应该发布它。那是我注意到问题的时候。

请求（谢谢）的简单示例向我表明，编译的不是两个块，只是#else 中的块。即发布版本将开关视为关闭。

因此，除非我遗漏了什么，否则答案是不言而喻的。不要将编译器开关用于部署选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:45:08.903

我建议您改用组合并使用面向对象。有两个类，一个用于`AutoTransmission`，另一个用于`ManualTransmission`。每个都将派生自一个基类`Transmission` 然后，当您创建使用这些传输之一的对象时，您可以根据需要使用其中任何一个。

然后，当您创建使用 a 的对象时`Transmission`，只需实例化您需要的任何传输。这可以在配置中定义，也可以是编译器常量。但是，我建议不要使用编译器常量，因为当您执行自动重构时，可能禁用的块`#ifdef`将不会被处理，并且在您更改编译器选项时可能不会构建。

# java - 以编程方式滚动

> ID：15867495
> 
> 赞同：7
> 
> 时间：2013-04-07T20:35:11.640
> 
> 标签：java, swing, jtable

我希望 JTable 的单元格与所选面板水平对齐。
这是一个 SSCCE 来说明我的问题。谢谢你的帮助。

```
public class TableCellAlignment {

    private final static int MAX = 50;
    private static SelectablePanel[] selectablePanels = new SelectablePanel[MAX];
    private static JScrollPane slaveScrollPane = new JScrollPane();
    private static JScrollPane masterScrollPane = new JScrollPane();
    private static JTable slaveTable = new JTable();

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TableCellAlignment().createGUI();
            }
        });
    }

    private static void createGUI() {
        JFrame f = new JFrame("TableCellAlignment");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel masterPanel = new JPanel(new GridLayout(MAX, 1));
        Integer[][] objs = new Integer[MAX][1];
        for (int i = 0; i < MAX; i++) {
            objs[i][0] = new Integer(i);
            SelectablePanel masterSelectablePanel = new SelectablePanel();
            masterSelectablePanel.setNum(i);
            selectablePanels[i] = masterSelectablePanel;
            masterPanel.add(masterSelectablePanel);
        }
        DefaultTableModel model = new DefaultTableModel(objs, new Object[]{"Column1"});
        model.addTableModelListener(new TableModelListener() {
            @Override
            public void tableChanged(TableModelEvent e) {
                EventQueue.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        slaveTable.setRowHeight(20);
                    }
                });
            }
        });
        model.addRow(objs);
        slaveTable.setModel(model);
        final JPanel p = new JPanel(new GridLayout(1, 2));
        masterScrollPane.setViewportView(masterPanel);
        slaveScrollPane.setViewportView(slaveTable);
        p.add(masterScrollPane);
        p.add(slaveScrollPane);
        f.add(p);

        f.setSize(400, 200);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static class SelectablePanel extends JPanel {

        private PropertyChangeSupport cs;
        private int num;
        private boolean selected = false;

        public SelectablePanel() {
            cs = new PropertyChangeSupport(this);
            cs.addPropertyChangeListener(new SelectedPropertyChangeListener());
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    setSelected(true);
                }
            });
        }

        public int getNum() {
            return num;
        }

        public void setNum(int num) {
            this.num = num;
        }

        public boolean isSelected() {
            return selected;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (selected) {
                Color c = g.getColor();
                g.setColor(Color.blue);
                g.fillRect(0, 0, getWidth(), getHeight());
                g.setColor(Color.white);
                FontMetrics fm = g.getFontMetrics();
                g.drawString("" + getNum(), getWidth() / 2, (getHeight() + (fm.getAscent() - fm.getDescent())) / 2);
                g.setColor(c);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 20);
        }

        public void setSelected(boolean selected) {
            boolean oldVal = isSelected();
            this.selected = selected;
            cs.firePropertyChange("selected", oldVal, selected);
            repaint();
        }

        private class SelectedPropertyChangeListener implements PropertyChangeListener {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if (evt.getPropertyName().equals("selected")) {
                    boolean selected = (boolean) evt.getNewValue();
                    if (selected) {
                        for (int i = 0; i < MAX; i++) {
                            SelectablePanel masterSelectablePanel = selectablePanels[i];
                            if (i != getNum() && masterSelectablePanel.isSelected()) {
                                masterSelectablePanel.setSelected(false);
                            }

                        }
                        slaveTable.setRowSelectionInterval(getNum(), getNum());
                        final JViewport viewport = slaveScrollPane.getViewport();
                        Rectangle rect = new Rectangle(getBounds().x, getBounds().y, 1, 1);
                        Rectangle r2 = viewport.getVisibleRect();
                        slaveTable.scrollRectToVisible(new Rectangle(rect.x, rect.y, (int)r2.getWidth(), (int)r2.getHeight()));
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:38:15.220

视口。[设置视图位置](http://docs.oracle.com/javase/7/docs/api/javax/swing/JViewport.html#setViewPosition%28java.awt.Point%29)（点）；[如此处所示](http://www.java2s.com/Code/Java/Swing-JFC/ScrollingProgrammatically.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T11:13:01.320

这是基本的数学运算，不需要访问视口：

```
// in the isSelected block of the propertyChangeListener:
JComponent current = (JComponent) evt.getSource();
slaveTable.setRowSelectionInterval(getNum(), getNum());
// get the cellRect of the selected cell
Rectangle cellRect = slaveTable.getCellRect(getNum(), 0, false);
// get the bounds of the selected panel
Rectangle panelRect = current.getBounds();
// get the visible rect of the selected panel's parent
Rectangle parentVisibleRect = ((JComponent) current.getParent()).getVisibleRect(); 
// the diff above the current (to the parent's visible rect)
int aboveCurrent = panelRect.y - parentVisibleRect.y;
// translate the cell rect 
cellRect.y = Math.max(cellRect.y - aboveCurrent, 0);
// adjust size to slaveTable's visible height
cellRect.height = slaveTable.getVisibleRect().height;
slaveTable.scrollRectToVisible(cellRect); 
```

请注意，此代码段假定面板的父视图和表格的视图的视口具有相同的大小，因此要么从表格中删除标题，要么将标题添加到面板的 scrollPane，或者使用可以对齐视口的 LayoutManager两个滚动窗格。

# ruby-on-rails - 为什么我们需要 new 中的实例变量？

> ID：15867497
> 
> 赞同：1
> 
> 时间：2013-04-07T20:35:14.173
> 
> 标签：ruby-on-rails

```
def new
  @post = Post.new

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @post }
  end
end

def create
  @post = Post.new(params[:post])
  #something else
end 
```

在这里，因为当我们实际创建一个新帖子时，我们在使用 Page.new(params[:page]) 的地方调用方法 create，所以方法 new 应该只用于调用视图 new.html.erb。那么为什么我们仍然需要一个实例变量@post 在新方法中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:54:29.183

您不需要任何实例变量`new`或任何其他操作，但默认情况下，Rails 的脚手架使用它们。使用实例变量有一些小好处，并且围绕它们有一些约定，但坦率地说，这是草率的代码，不应该是默认值。在适当的 MVC 框架中，控制器的实例变量甚至对视图对象都不可见。

我更喜欢明确，使用局部变量，并将它们作为局部变量传递给视图：

```
def new
  post = Post.new
  respond_to do |format|
    format.html { render locals: { post: post } }
    format.json { render json: post }
  end
end 
```

这更加明确，并使您的意图更加明确。本地视图变得更加灵活，因为您不必担心在从另一个视图中渲染部分之前设置实例变量。它正确地封装了数据，并且不会暴露您的`post`外部操作。

如果您试图快速原型化/激发某些东西，您可能会通过使用实例变量来节省一些字符，但这不是干净的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:49:14.387

如果您没有创建新的实例变量，那么您将没有模型来保存模型应该管理的数据 - 更不用说您将为表单添加更多样板而不是使用采用模型的表单助手。如果不使用模型，您就没有完全按预期使用 MVC 框架。

综上所述，它绝不需要做任何事情，它只是遵循 Rails 构建在其之上的 MVC 结构。不需要模式，总是有其他解决方案，只是执行此操作的公认方法涉及一个模型 - 尽管是空的。

最后，我不知道您何时或为什么要使用`new`路由响应，`JSON`因为`new`路由通常用于显示表单以创建对象，而`create`函数是用于实际创建模型的新实例的函数.

# multithreading - 我应该如何实现服务器推送，以便浏览器使用数据库更新进行更新？

> ID：15867503
> 
> 赞同：0
> 
> 时间：2013-04-07T20:35:40.387
> 
> 标签：multithreading, node.js, comet, long-polling, server-push

我正在阅读各种将服务器推送到客户端（浏览器）的方法。我想了解其中的最佳方法。

1.  长轮询——要避免，因为它在服务器端占用资源的时间更长。
2.  使用回调的 Node JS 异步委托。-- 缺点是它是单线程的。
3.  在 java 中编写回调，使用线程在后台执行任务，然后像 node.js 一样使用回调将其推送到服务器。

这里的优点是我们将有多个线程并行运行并有效地利用 CPU。

任何人都可以建议最好的实施方式吗？任何其他方式也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:49:19.330

你似乎误解了一些事情。例如，您无法将长轮询与服务器端技术进行比较。

长轮询意味着客户端（即浏览器）向服务器发出 AJAX 请求。然后服务器保持该请求处于活动状态，直到有通知。然后它响应该请求，并且客户端在收到更新后立即使用新的 AJAX 请求调用服务器。

你可以选择任何你想在服务器端处理它的技术。人们用这个来制作 NodeJS，因此我建议使用它。但是使用更适合你的东西。

现在另一个误解是线程提高了性能，因此它们比单线程应用程序更好。实际上恰恰相反：使用线程时性能会变得更差（这里我假设我们正在使用一个核心 CPU）。线程会增加响应性，但不会提高性能。但是有一个问题（对于单线程应用程序），如果您尝试做的事情是 CPU 密集型的，那么它将阻塞您的服务器。但是，如果您谈论的是简单的通知，那么这根本不是问题（您不需要 CPU 能力）。旁注：您可以触发尽可能多的 NodeJS 实例，因为您有内核来利用多个内核（不过，您将需要更复杂的代码）。

您还应该考虑使用 WebSockets（从而在服务器端实现一个简单的 TCP 服务器）。长轮询效率低下，大多数现代浏览器都支持 WebSockets（尤其是 IE10+，因为它一直是 IE 的问题）。

结论：在服务器端使用您最熟悉的技术。

# android - Android Camera.takePicture() - nullPointerException

> ID：15867504
> 
> 赞同：1
> 
> 时间：2013-04-07T20:35:43.400
> 
> 标签：android, camera, nullpointerexception

我有一种感觉，这是一个小地方的小错误。我正在尝试设置自定义相机，当我单击捕获按钮时，我得到一个空指针。也许我的相机实例为空？不知道为什么，因为我非常密切地关注文档。把代码和错误贴在下面，谢谢！

主类：

```
public class CameraActivity extends Activity {
    private Camera mCamera;
    private CameraPreview mPreview;
    private String TAG = "CameraActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.camera_preview);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);

        Button captureButton = (Button) findViewById(R.id.button_capture);
        captureButton.setOnClickListener(
            new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // get an image from the camera
                    mCamera.takePicture(null, null, mPicture);
                }
            }
        );
    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera mCamera = null;
        try {
            mCamera = Camera.open(); // attempt to get a Camera instance
        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
        }
        return mCamera; // returns null if camera is unavailable
    }

    @Override
    protected void onPause() {
        super.onPause();
        if (mCamera != null){
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        mCamera = getCameraInstance();
    }

    private PictureCallback mPicture = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.d(TAG, "Attempting to store picture...");
            final int MEDIA_TYPE_IMAGE = 100;
            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            if (pictureFile == null){
                Log.d(TAG, "Error creating media file, check storage permissions");
                return;
            }

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                Log.d(TAG, "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d(TAG, "Error accessing file: " + e.getMessage());
            }
        }
    }; 
```

猫日志：

```
03-27 01:13:06.892: E/AndroidRuntime(8008): FATAL EXCEPTION: main
03-27 01:13:06.892: E/AndroidRuntime(8008): java.lang.NullPointerException
03-27 01:13:06.892: E/AndroidRuntime(8008):     at com.justbaumdev.tagsense.CameraActivity$2.onClick(CameraActivity.java:47)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.view.View.performClick(View.java:4204)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.view.View$PerformClick.run(View.java:17355)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.os.Handler.handleCallback(Handler.java:725)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.os.Looper.loop(Looper.java:137)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-27 01:13:06.892: E/AndroidRuntime(8008):     at dalvik.system.NativeStart.main(Native Method) 
```

预习班：

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;
    private int cameraId = 0;
    private Context mContext;
    private String TAG = "CameraPreview";

    public CameraPreview(Context context, Camera camera) {
        super(context);
        mContext = context;
        mCamera = camera;

        //get notified if surface created/destroyed
        mHolder = getHolder();
        mHolder.addCallback(this);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        //setCameraDisplayOrientation(mContext, mCamera, cameraId);
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d(TAG, "Error setting camera preview: " + e.getMessage());
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        //Take care of this in cameraActivity
//      mCamera.stopPreview();
//        mCamera.release();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        if(mHolder.getSurface() == null)
            return;

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
            // ignore: tried to stop a non-existent preview
        }

        //setCameraDisplayOrientation(mContext, mCamera, cameraId);

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();
        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    } 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.justbaumdev.tagsense"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.NFC" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.nfc" />
    <uses-feature android:name="android.hardware.wifi.direct" />

    <uses-permission android:name="android.permission.READ_PROFILE" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo" >
        <activity
            android:name=".TagSense"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.justbaumdev.tagsense.NFC">
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="application/com.justbaumdev.tagsense" />
            </intent-filter>
        </activity>
        <activity android:name="AlbumGallery"></activity>
        <activity android:name="CameraActivity"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:04:44.417

我看到至少一个错误。您正在调用`getCameraInstance()`at`onCreate()`和`onResume()`，并且在`onResume()`调用 to 之后调用 the `onCreate()`，这导致两个`camera.open()`没有 a `camera.release()`。你应该打电话给`camera.open()`at `onResume()`。

[http://developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:57:25.687

里面

```
public static Camera getCameraInstance() 
```

您正在初始化一个本地（方法）变量

```
Camera mCamera = null; 
```

不是类实例变量（你打算）

```
private Camera mCamera; 
```

将行从：

```
Camera mCamera = null; 
```

到

```
this.mCamera = null; 
```

注意：`getCameraInstance()`不应该是静态方法。

# python - 使用 python 创建 facebook webproxy

> ID：15867510
> 
> 赞同：0
> 
> 时间：2013-04-07T20:36:13.543
> 
> 标签：python, facebook, cookies, proxy, webproxy

我正在尝试创建供个人使用的 webproxy 以访问 facebook（它经常被我碰巧花了一些时间的几个位置阻止）。

从此代码开始：[http ://code.google.com/p/gevent/source/browse/examples/webproxy.py?name=1.0b2](http://code.google.com/p/gevent/source/browse/examples/webproxy.py?name=1.0b2)

我已对其进行了修改，以使用以下方式将 urllib 替换为请求的 cookie：

```
def proxy_post(path, env, proxy_url, start_response):
    if '://' not in path:
        path = 'http://' + path
    try:
        #response = br.submit(path, env)
        response = requests.post(path, params = env)
        print '%s: %s' % (path, response)
        headers = [(k, v) for (k, v) in response.headers.items() if k not in drop_headers]
        scheme, netloc, path, params, query, fragment = urlparse(path)
        host = (scheme or 'http') + '://' + netloc
    except Exception, ex:
        sys.stderr.write('error while reading %s:\n' % path)
        traceback.print_exc()
        tb = traceback.format_exc()
        error_str = escape(str(ex) or ex.__class__.__name__ or 'Error')
        return ['<h1>%s</h1><h2>%s</h2><pre>%s</pre>' % (error_str, escape(path), escape(tb))]
    else:
        start_response('%s OK' % response.status_code, headers)
        data = response.content
        data = fix_links(data, proxy_url, host)
        return [data] 
```

但是当我尝试登录时，出现以下错误：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/gevent/wsgi.py", line 116, in handle
    self.data.extend(result)
TypeError: 'NoneType' object is not iterable
<WSGIServer fileno=3 address=0.0.0.0:8088>: Failed to handle request:
  request = <http_request "POST /https://www.facebook.com/login.php?login_attempt=1 HTTP/1.1" 127.0.0.1:56381>
  application = <function application at 0x2be2578>

127.0.0.1 - - [2013-04-13 20:08:03] "POST /https://www.facebook.com/login.php?login_attempt=1 HTTP/1.1" 500 21 "http://127.0.0.1:8088/http://www.facebook.com" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:20.0) Gecko/20100101 Firefox/20.0" 
```

我的猜测是因为在创建 WSGI 响应时出现了一些问题，但我可以弄清楚原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:39:11.337

我看了你提到的[webproxy 。](http://code.google.com/p/gevent/source/browse/examples/webproxy.py?name=1.0b2)里面`def application(env, start_response):`有以下代码：

```
 elif (method, path) == ('POST', ''):
    key, value = env['wsgi.input'].read().strip().split('=')
    assert key == 'url', repr(key)
    start_response('302 Found', [('Location', join(proxy_url, unquote(value)))])
elif method == 'POST':
    start_response('404 Not Found', []) 
```

因此，如果方法是`POST`并且路径不为空`404`，则返回。根据您附加的回复，您正在使用`POST`带有路径的方法，`/https://www.facebook.com/login.php?login_attempt=1`我将在那里开始搜索。这可能与`urllib2.open()`和返回的结果之间存在差异`mechanize.Browser().open()`。

旁注：那条路径是错误的，它不应该以 / [https://www.facebook.com/](https://www.facebook.com/)开头。

# c++ - SDL 将像素放在屏幕上 C++

> ID：15867512
> 
> 赞同：2
> 
> 时间：2013-04-07T20:36:18.533
> 
> 标签：c++, sdl, pixel, ppm

我从 SDL 开始，我正在阅读介绍，我正在尝试`drawPixel`他们的方法。我正在做的是一个 ppm 查看器，到目前为止，我有一个数组中的 rgb 值并且被正确存储（我通过打印数组并确保它们对应于它们在 ppm 文件中的位置来检查它们）并且我想使用 SDL画图。到目前为止，我编写的代码是（这是`main.cpp`文件，如果`ppm.hpp`需要`ppm.cpp`，请告诉我添加它们）

```
#include <iostream>
#include <SDL/SDL.h>

#include "ppm.hpp"

using namespace std;

void drawPixel (SDL_Surface*, Uint8, Uint8, Uint8, int, int);

int main (int argc, char** argv) {
    PPM ppm ("res/cake.ppm");

    if (SDL_Init(SDL_INIT_AUDIO | SDL_INIT_VIDEO) < 0) {
        cerr << "Unable to init SDL: " << SDL_GetError() << endl;
        exit(1);
    }

    atexit(SDL_Quit); // to automatically call SDL_Quit() when the program terminates

    SDL_Surface* screen;
    screen = SDL_SetVideoMode(ppm.width(), ppm.height(), 32, SDL_SWSURFACE);
    if (screen == nullptr) {
        cerr << "Unable to set " << ppm.width() << "x" << ppm.height() << " video: " << SDL_GetError() << endl;
        exit(1);
    }

    for (int i = 0; i < ppm.width(); i++) {
        for(int j = 0; j < ppm.height(); j++) {
            drawPixel(screen, ppm.red(i,j), ppm.green(i,j), ppm.blue(i,j), i, j);
        }
    }

    return 0;
}

void drawPixel (SDL_Surface* screen, Uint8 R, Uint8 G, Uint8 B, int x, int y) {
    Uint32 color = SDL_MapRGB(screen->format, R, G, B);

    if (SDL_MUSTLOCK(screen)) {
        if (SDL_LockSurface(screen) < 0) {
            return;
        }
    }

    switch (screen->format->BytesPerPixel) {
        case 1: { // Assuming 8-bpp
            Uint8* bufp;

            bufp = (Uint8*)screen->pixels + y * screen->pitch + x;
            *bufp = color;
        }
        break;

        case 2: { // Probably 15-bpp or 16-bpp
            Uint16 *bufp;

            bufp = (Uint16*)screen->pixels + y * screen->pitch / 2 + x;
            *bufp = color;
        }
        break;

        case 3: { // Slow 24-bpp mode, usually not used
            Uint8* bufp;

            bufp = (Uint8*)screen->pixels + y * screen->pitch + x;
            *(bufp + screen->format->Rshift / 8) = R;
            *(bufp + screen->format->Gshift / 8) = G;
            *(bufp + screen->format->Bshift / 8) = B;
        }
        break;

        case 4: { // Probably 32-bpp
            Uint32* bufp;

            bufp = (Uint32*)screen->pixels + y * screen->pitch / 4 + x;
            *bufp = color;
        }
        break;
    }

    if (SDL_MUSTLOCK(screen)) {
        SDL_UnlockSurface(screen);
    }

    SDL_UpdateRect(screen, x, y, 1, 1);
} 
```

正如介绍所提供的`drawPixel`那样，现在调用了我尝试使用的 ppm 文件`cake.ppm`，它的大小为 720x540，但是当我构建并运行此代码时，我得到应用程序没有响应。我在一个 426x299 的较小 ppm 文件上进行了尝试，它显示了一个窗口，窗口上放置了颜色。

1.  为什么它不能在`cake.ppm`文件上工作而在其他文件上工作？是因为尺寸吗？
2.  当我尝试 ppm 文件，第二个 426x299 或其他 ppm 文件时，颜色完全不同，这是为什么呢？
3.  当我运行应用程序时，放置像素后，窗口关闭，我该如何保留它？

尝试一个文件`squares.ppm`，它应该是这样的： ![它应该是什么](https://i.stack.imgur.com/DMiPI.jpg)

但这就是我得到的 ![我得到了什么](https://i.stack.imgur.com/Cg1t7.jpg)

# python - Python/Django 生成运行时异常

> ID：15867519
> 
> 赞同：3
> 
> 时间：2013-04-07T20:36:58.040
> 
> 标签：python, django, werkzeug

我在使用 Apache/mod_wsgi 的 Django 项目中使用 werkzeug。我想要做的是访问 werkzeug python shell 而实际上没有错误。我能想到的唯一方法是在`url(r'^admin/shell', forceAnError())`匹配 url 模式时故意导致错误。

诚然，故意造成错误并不是最佳的行动方案，所以如果有一种方法可以简单地从模板或其他东西调用/导入/渲染/访问 werkzeug python shell，那将是更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:25:20.937

如果您将 WSGI 应用程序包装在一个`werkzeug.debug.DebuggedApplication`with `evalex`on 中，您将在以下位置获得一个可用的 shell `/console`：

```
from werkzeug.wrappers import Request, Response
from werkzeug.debug import DebuggedApplication

@Request.application
def app(request):
    return Response("Normal application, nothing to see here...")

app = DebuggedApplication(app, evalex=True)
# console_path is another optional keyword argument.
# you can guess what it does. 
```

![Werkzeug 控制台运行。](https://i.stack.imgur.com/qlx1c.png)

# python - Windows 7 和 python 2.7

> ID：15867520
> 
> 赞同：2
> 
> 时间：2013-04-07T20:37:01.443
> 
> 标签：python, windows, cmd

我想在我的电脑上安装 python 2.7，但我遇到了问题。我已经从 python 官方网站安装了那个 .msi 文件，现在我有一个文件夹 C:\Python27 。我已经像这样设置了环境变量（系统变量）： ....;C:\Python27;C:\Python27\Tools\Scripts 重新启动计算机后，我在命令窗口“python”中键入但它sais: 'python' 不是内部或外部命令、可运行程序或批处理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:39:47.627

签出此[链接](http://docs.python.org/2/faq/windows.html)

> 默认情况下，不会将 Python 添加到 DOS 路径中。[此截屏视频](http://showmedo.com/videos/video?name=960000&fromSeriesID=96) 将引导您完成将正确条目添加到系统路径的步骤，从而允许所有用户从命令行执行 Python。

要将 Python 添加到系统变量：（计算机 > 高级系统设置 > 环境变量）您将转到您的 cmd 实例，然后输入`PATH = C:/Python27/`

# c++ - 二维数组中的指针算法 (C++)

> ID：15867525
> 
> 赞同：1
> 
> 时间：2013-04-07T20:37:52.263
> 
> 标签：c++, c, pointers

我有一个奇怪的 C++ 代码：

```
#include <iostream>
#include <stdio.h>
using namespace std;
int main() {
     int tab[][2] = { {1,2}, {3,4}, {5,6} };
     int *a = tab[0];
     printf( "%d %d %d", *a++, *a++, *a++ );
     return 0;
} 
```

我有一个问题：为什么输出是 `3 2 1`. 你能解释一下这个指针算法吗？谢谢。

# javascript - GAS 库和 WebApp 权限 [ReferenceError: "service" is not defined。]

> ID：15867528
> 
> 赞同：1
> 
> 时间：2013-04-07T20:38:20.770
> 
> 标签：javascript, oauth, google-apps-script, google-fusion-tables

**背景/总结**

我一直在广泛使用库，现在我正在设置我的权限，以便我可以将应用程序分发给一些用户进行测试。不幸的是，这是非常不可预测的。我已将问题简化如下：

我有一个简单的 webApp，它正在对融合表进行简单的 API 调用。它调用了我的 Fusion Tables Library 中的一个函数。我的 Fusion Table Library 中的函数也使用了我的 OAuth 库中的函数。从我的主要 gmail 帐户（所有资源所属的帐户）执行时，此过程运行良好。但是，我现在正在设置权限，它不适用于其他帐户。从另一个帐户执行此 webApp 时，我收到以下错误（在一种情况下除外，稍后描述）：

> ReferenceError：未定义“服务”。

**细节和资源**

我正在使用 Google 的 oAuthConfig 类，它默认我为 OAuth1.0。

权限设置如下：

网络应用

*   执行为：访问webApp的用户
*   谁有权访问：任何人
*   分享：知道链接的任何人都可以查看

融合表库

*   执行为：访问webApp的用户
*   谁有权访问：任何人
*   分享：知道链接的任何人都可以查看

OAuth 库

*   执行为：访问webApp的用户
*   谁有权访问：任何人
*   分享：知道链接的任何人都可以查看

[我的 OAuth 库代码](https://script.google.com/d/1TU-VKYWSv0cIjy_mqK5H4kPeAUjekBIMGpPPDLT-xIpdRf5R-g4lbToG/edit?usp=sharing)

OAuth 库项目密钥：Mnt39sDQPQvSd3QGZFFLcznt7vnFOnL

[融合表库代码](https://script.google.com/d/1GDaNg4PoZIVDFarcM8MR6Wr-b2QVN1w50z0a-cM8VAPWD8vbSO32XN1U/edit?usp=sharing)

融合表库项目密钥：MigHa1npbg9PnkaJ8jFENSyUlmcxk5wr2

重现错误的简化 webApp：已[发布的 webApp](https://script.google.com/macros/s/AKfycbyZviat_33Nj-2LTSRMLl3yAFD9_2UtnQHttUk-A7lA_ucq_Xeo/exec)（代码如下）

```
var oAuthFields = {
  'clientId' : '{...}',
  'scope' : 'https://www.googleapis.com/auth/fusiontables',
  'fetchUrl' : 'https://www.googleapis.com/fusiontables/v1/',
  'clientSecret' : '{...}',
  'fusionId' : '{...}',
  'service' : 'fusiontables',
  'queryUrl' : 'https://www.google.com/fusiontables/api/query'
};

function doGet() {
  var app = UiApp.createApplication();

  var tempVar = FTL.fusionRequest('GET', 'SHOW TABLES', oAuthFields);
  Logger.log('Result: ' + tempVar);

  app.add(app.createLabel('Success'));
  return app;
} 
```

**例外**

现在让事情变得更有趣，如果我将 OAuth 库的“共享”设置从“拥有链接的任何人都可以查看”更改为“拥有链接的任何人都可以编辑”，一切都会完美运行。我显然不想要我的图书馆的通用编辑权，所以我被困在为什么会发生这种情况，以及我需要做些什么来修复它。

我不完全清楚在使用库时如何考虑“执行为”和“共享”设置。我希望任何人都可以访问 webApp，以用户身份执行，并且我将以编程方式实现访问限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:40:32.210

我已将此识别为 GAS 库中的更新传播错误。我已经[在这里](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2640)向[问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)提交了一个问题。

# c - 在阿克曼函数中找到 (N) 的最大值

> ID：15867529
> 
> 赞同：3
> 
> 时间：2013-04-07T20:38:24.380
> 
> 标签：c, ackermann

在 C 语言中，我已经实现了[Ackermann 函数](https://en.wikipedia.org/wiki/Ackermann_function)，但现在正试图找到 N 的最大值。例如，如果 m = 1 找到正确计算的 n 的最大值。到目前为止，我一直在使用“猜测和检查”，但似乎必须有更好、更准确的方法。有人可以提供一些指导吗？Ackerman 函数与可以处理多少堆栈有很大关系，所以也许这个问题纯粹是任意的......感谢任何帮助，谢谢！

# c++ - 重载一个简单的 = 运算符

> ID：15867531
> 
> 赞同：0
> 
> 时间：2013-04-07T20:38:38.647
> 
> 标签：c++, string, class, overloading, operator-keyword

我正在尝试将我的类的一部分重载到 a`string`并且我无法让重载工作。或者，我也会有一个`long long`重载，但我只是假设它是相同的，除了`long long`而不是`string`.

```
class FileData
{
public:
    string extensions_;                 
    unsigned long long containsBytes_;      
};

string& operator = (string& s , FileData& fd)
{
    s= fd.extensions_;
    return s;
}

string extName = fileVector[0]; 
```

我不断收到的错误是 ERROR:'operator=' must be a member function。我也尝试过使用 istream，但这也没有用。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:49:39.470

为了能够从您的类中分配一个字符串，您需要一个*转换运算符*：

```
class FileData
{
public:

    // Conversion to string
    operator string() const {return extensions_;}

    string extensions_;                 
    unsigned long long containsBytes_;      
}; 
```

您只能将赋值运算符重载为类的成员，以便分配*给*该类的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T20:48:05.417

你不能重载 std::string 的 operator=。您可能想要的是一个强制转换运算符：

```
 class FileData
    {
    public:
        string extensions_;
        unsigned long long containsBytes_;

        operator string()
        {
            return extensions_;
        }
    } 
```

# php - jQuery 与我在页面中的其他元素重叠

> ID：15867533
> 
> 赞同：0
> 
> 时间：2013-04-07T20:38:53.657
> 
> 标签：php, jquery, css

我使用以下代码在输入时显示建议。它运行良好，但我的其他元素与我的搜索建议重叠。我该如何解决这个问题？

中的代码`<head>`：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js">
</script>

    <script>
    function suggest(inputString){
            if(inputString.length == 0) {
                $('#suggestions').fadeOut();
            } else {
            $('#country').addClass('load');
                $.post("search.php", {queryString: ""+inputString+""}, function(data){
                    if(data.length >0) {
                        $('#suggestions').fadeIn();
                        $('#suggestionsList').html(data);
                        $('#country').removeClass('load');
                    }
                });
            }
        }

        function fill(thisValue) {
            $('#country').val(thisValue);
            setTimeout("$('#suggestions').fadeOut();", 600);
        }

    </script> 
```

搜索.php：

```
 <?php
   include('inc/config.php');
include('inc/func.php');

    $queryString=$_POST['queryString'];
        if(isset($_POST['queryString'])) {

            if(strlen($queryString) >0) {

                $query = mysql_query("SELECT person_id,name,type,photo FROM person WHERE name LIKE '$queryString%' or person_id like '$queryString%' LIMIT 5");
                if($query) {
                echo '<ul>';
                    while ($result = mysql_fetch_array($query)) {

                        ?>
                        <li>
                        <a href="view">

                        <table>
                        <tr>
                            <td>
                            <img src="<?php if($result['photo']=="0"){ echo "data/img/default.png";}else{ echo $result['photo'];}?>" width="60px" height="60px">
                            </td>  
                            <td width="20px">

                            </td>         
                            <td valign="top">
                            <h2><?php echo $result['name'];?></h2>
                            <h4><?php if($result['type']=='1'){echo "Staff";}elseif($result['type']=='2'){echo "Parent";}else{echo "Student";}?></h4>
                            </td>
                            <td>
                            &nbsp;
                            </td>
                             <td>
                            &nbsp;
                            </td>
                             <td>
                            &nbsp;
                            </td>
                            <td valign="top">
                            <h4>
                            <?php
                            if($result['type']=='3')
                            {
                            echo "Roll No: ".get_data('student','rollno',$result['person_id']);
                            }
                            ?>
                            </h4>
                            <h4>
                            <?php
                            if($result['type']=='3')
                            {
                            $section_id=get_data('student','section_id',$result['person_id']);
                            $section_name=get_data('section','name',$section_id);
                            $class_id=get_data('section','class_id',$section_id);
                            $class_name=get_data('class','name',$class_id);
                            echo "Class: ".ucfirst($class_name)."(".$section_name.")";
                            }
                            ?>
                            </h4>

                            </td>
                        </tr>

                        </table>

                        </a>
                        </li>

                        <?php

                    }
                echo '</ul>';

                } else {
                    echo 'sorry';
                }
            } else {
                echo 'sorry';
            }
        } else {
            echo 'There should be no direct access to this script!';
        }

?> 
```

CSS 代码：

```
#result {
    height:20px;
    font-size:16px;
    font-family:Arial, Helvetica, sans-serif;
    color:#333;
    padding:5px;
    margin-bottom:10px;
    background-color:#FFFF99;
}
#country{
    padding:3px;
    border:1px #CCC solid;
    font-size:17px;
}
.suggestionsBox {
    position: absolute;
    left: 440px;
    top:35px;
    margin: 0px 0px 0px 0px;
    width: 570px;
    padding:0px;
    background-color: #71a4e3;
    border-top: 0px solid #000;
    color: #ffffff;
}
.suggestionList {
    margin: 0px;
    padding: 0px;
}
.suggestionList ul li {
    list-style:none;
    margin: 0px;
    padding: 6px;
    border-bottom:3px solid #000;
    cursor: pointer;
    min-height:50px;
}
.suggestionList ul li:hover {
    background-color: #ffffff;
    color:#000;
}
.suggestionList a
{
    background-color: #ffffff;
    color:#000;

}
ul {
    font-family:Arial, Helvetica, sans-serif;
    font-size:13px;
    color:#fffff;
    padding:0;
    margin:0;
}

.load{
background-image:url(../img/ajaxLoader/loader01.gif);
background-position:right;
background-repeat:no-repeat;
}

#suggest {
    position:relative;
} 
```

![图片](https://i.stack.imgur.com/vwQYT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:54:59.437

给你的主要内容容器 a`position:relative`和 a `z-index:1`...然后，给你的意见箱 a`z-index:100`或更高。这应该将您的建议置于页面上的其他内容之上......如果我正确理解您的需求。

# css - ASP MVC - 将 CSS 图像精灵放入视图

> ID：15867540
> 
> 赞同：0
> 
> 时间：2013-04-07T20:40:24.027
> 
> 标签：css, asp.net-mvc, razor

我有一个巨大的 css 文件（Content/Site.css），其中还包括 200 多行的精神。

我想制作一个 View/PartialView 来显示我所有的精灵图像（许多 div）。

我怎么做？

如何从控制器读取和解析代码中的 css 文件，然后将我的结果放入 ViewBag？

还是不需要从服务器端解析，只从客户端显示？

```
div.feedImgPop,
div.feedImg,
div.feedImgList { background: url("http://xxx/Sprite.jpg") top left no-repeat; }        
div.a{ background-position:0 0; }
div.b{ background-position:0 -43px; } 
```

... 200 行..

*   ASP净MVC 4.5

更新 ：

*   将 CSS 文件拆分为 2 个文件，sprite 和其余文件
*   使用 CSS Parser 从控制器读取精灵 css 文件
*   显示精灵图像，如下所示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:08:20.293

我使用[了这个 css 解析器](http://www.codeproject.com/Articles/335850/CSSParser)

控制器 ：

```
 public ActionResult Admin()
    {      
        parser.ReadCSSFile(Server.MapPath("~/Content/Sprite.css"));
        var cssItems = new List<String>(cssList.Count);
        foreach (var item in cssList) cssItems.Add(item.Key.Replace("div.", ""));
        ViewBag.items = cssItems;
        return View();
    } 
```

查看：（CSS解决方案-我用这个）

```
 <div class="wrapper">
        <div class="container">
            @foreach (var item in ViewBag.items)
            {
                string className = "imgContainer imgHover feedImgPop " + @item;
                <div class="@className" onClick="adminChooseSpriteImage('@className')"></div>
            }
        </div>
    </div> 
```

查看：（表格解决方案 - 每行 10 项；以前的测试）

```
<div id="feedsContainer">
    @{
        int rowNumber = 1;
        <table>
            <tr>

               @foreach(var item in ViewBag.items)
                {

                    if (rowNumber % 11 == 0)
                    {
                          <tr></tr>
                    }
                    else
                    {
                          string className = "imgContainer imgHover feedImgPop " + @item;
                         <td><div class="@className"></div></td>
                    }

                    rowNumber++;
                }
            </tr>
        </table>
    }
</div> 
```

# android - 适用于 Android 的 JAIN-SIP 1.2：缺少 javax.sip.STACK_NAME 属性

> ID：15867541
> 
> 赞同：0
> 
> 时间：2013-04-07T20:40:25.557
> 
> 标签：android, sip, jain-sip, jarjar

我正在尝试在 Android 设备（4.0.2）上运行 JAIN-SIP 堆栈。我能够重新打包所需的 jar 文件（jain-sip-api-1.2-src.jar、jain-sip-src-1.2.1111.jar、concurrent.jar、log4j-1.2.8.jar）。

这是我使用的 build.xml 文件：

```
 <!-- Converts this project's .class files into .dex files -->
  <target name="-jarjar" depends="-compile"> 
        <taskdef name="jarjar" classname="com.tonicsystems.jarjar.JarJarTask"
                 classpath="buildtools/jarjar-1.4.jar"/>
        <jarjar jarfile="${out.absolute.dir}/JainSipApi1.2_re.jar">
            <zipgroupfileset dir="mylib" includes="jain-sip-api-1.2-src.jar" />
            <rule pattern="javax.sip.**" result="sipper.sip.@1"/>
        </jarjar>
         <jarjar jarfile="${out.absolute.dir}/JainSipRi1.2_re.jar">
            <zipgroupfileset dir="mylib" includes="jain-sip-src-1.2.1111.jar" />
            <rule pattern="gov.nist.**" result="sipper.nist.@1"/>
        </jarjar>
         <jarjar jarfile="${out.absolute.dir}/concurrent_re.jar">
            <zipgroupfileset dir="mylib" includes="concurrent.jar" />
            <rule pattern="EDU.**" result="sipper.EDU.@1"/>
        </jarjar>
         <jarjar jarfile="${out.absolute.dir}/log4j-1.2.8_re.jar">
            <zipgroupfileset dir="mylib" includes="log4j-1.2.8.jar" />
            <rule pattern="org.apache.log4j.**" result="sipper.org.apache.log4j.@1"/>
        </jarjar>
     </target> 
```

这是一个代码示例，我尝试在非 Android 环境中测试重新打包的文件：

```
import sipper.sip.SipFactory;
...
sipFactory = SipFactory.getInstance();

sipFactory.setPathName("sipper.nist");
Properties properties = new Properties();
properties.setProperty("javax.sip.STACK_NAME", "Sipper");
properties.setProperty("javax.sip.IP_ADDRESS", "127.0.0.1");

sipStack = sipFactory.createSipStack(properties); 
```

当我尝试运行此代码时，出现以下错误：

```
 Problem initializing the SIP stack.

sipper.sip.PeerUnavailableException: Missing javax.sip.STACK_NAME property
    at sipper.sip.SipFactory.createSipStack(SipFactory.java:144)
    at SipLayer.<init>(SipLayer.java:86)
    at SipperClient.main(SipperClient.java:51) 
```

据我了解，我刚刚更改了包的名称，但它似乎不适用于某些包的“内部”。这就是为什么我查看源代码并看到一些硬编码字符串，例如：

```
if (name == null ) throw new PeerUnavailableException("Missing javax.sip.STACK_NAME property"); 
```

现在我的问题是有什么合适的方法/解决方案可以使 Android 下的 JAIN-SIP 工作吗？

提前感谢您的帮助:-)

丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-08T01:00:45.370

编写大部分原始 JAIN SIP 堆栈的人现在支持 JAIN SIP 的 Android 端口：

[http://www.telestax.com/jain-sip-stack-for-android/](http://www.telestax.com/jain-sip-stack-for-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T14:24:16.847

我刚刚看到这个帖子并遇到了同样的问题。

几分钟后，我成功地将 jain sip 堆栈移植到 Nexus 7 Android 4.1。

您的问题的主要原因是“Jar”包名称。由于Android不支持从包名“javax.*”导入的库，所以将jsip移植到Android平台的第一个工作就是修改导入包名。

并且您已使用以下脚本将包名称 javax.sip 之一更改为 sipper.sip。

```
<rule pattern="javax.sip.**" result="sipper.sip.@1"/> 
```

这将使 jsip 产生您刚才提到的异常。

[请首先通过此链接](http://www.androidadb.com/source/android-rcs-ims-stack-read-only/core/src/gov/nist/javax/sip/SipStackImpl.java.html)（第 551~552 行）查看完整的源代码。您将看到以下代码。

```
String name = configurationProperties.getProperty("javax.sip.STACK_NAME"); 
```

所以 jsip 只是找到属性来获取 sip 堆栈名称。最后，这个问题的答案。请在您的 jsip 应用程序中添加这些代码。

```
Properties properties = new Properties();
properties.setProperty("sipper.sip.STACK_NAME", "stack"); 
```

希望这可以帮助您和互联网上的观众！！！

# javascript - Range 对象，获取选择父节点 Chrome vs Firefox

> ID：15867542
> 
> 赞同：4
> 
> 时间：2013-04-07T20:40:27.087
> 
> 标签：javascript, google-chrome, firefox, range

我正在尝试制作一个小型文本编辑器。

当我选择一个文本时，我想知道所选文本是单独在 a`span`还是 a`div`中，然后我想改变这个元素的样式。

例子 ：

```
<span style="font-size:12px">Hola</span> 
```

如果我选择*Hola*我想检索父节点`<span style="font-size:12px">Hola</span>`

```
<span style="font-size:56px">
Hola <span style="font-size:12px">Hello</span>
</span> 
```

如果我选择*Hello*我只想检索`<span style="font-size:12px">Hello</span>`

现在，当我在 Chrome 中尝试时，我得到了正确的结果

```
range.startContainer.parentNode; 
```

但是在第二个示例中使用 Firefox 我检索

```
<span style="font-size:56px">
    Hola <span style="font-size:12px">Hello</span>
</span> 
```

如何在 Chrome 和 Firefox 中获得相同的结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T17:10:02.347

您的问题是，当一个或两个选择边界与 DOM 节点边界重合时，选择在浏览器之间的工作方式略有不同。例如，如果用户在具有以下 HTML 的页面内容中选择了单词“bar”

```
<p>foo<i>bar</i></p> 
```

...选择开始有四个不同的可能位置，它们在视觉上都与用户相同：

1.  在“foo”文本节点的末尾（节点“foo”，偏移量 3）
2.  元素的一个子节点之后`<p>`（node `<p>`, offset 1）
3.  在元素的零`<i>`个子元素之后（节点`<i>`，偏移量 0）
4.  在“bar”文本节点的字符索引 0 处（节点“bar”，偏移量 0）

大多数浏览器在实践中不允许所有这些位置，但不幸的是不同的浏览器会做出不同的选择。在 Firefox 中，您所做的选择会选择整个`<span>`元素，选择范围`startContainer`是`<span>`的父节点。您可以通过检查范围以查看它是否选择单个节点来检测这一点：

```
function rangeSelectsSingleNode(range) {
    var startNode = range.startContainer;
    return startNode === range.endContainer &&
           startNode.hasChildNodes() &&
           range.endOffset === range.startOffset + 1;
} 
```

您可以使用它来检测您拥有什么样的选择并相应地获取所选元素：

```
var selectedElement = null;
if (rangeSelectsSingleNode(range)) {
    // Selection encompasses a single element
    selectedElement = range.startContainer.childNodes[range.startOffset];
} else if (range.startContainer.nodeType === 3) {
    // Selection range starts inside a text node, so get its parent
    selectedElement = range.startContainer.parentNode;
} else {
    // Selection starts inside an element
    selectedElement = range.startContainer;
} 
```

# big-o - 我的算法的大 O 是多少？

> ID：15867548
> 
> 赞同：0
> 
> 时间：2013-04-07T20:41:06.253
> 
> 标签：big-o

我需要帮助来找到这个算法的重要之处。这是一种搜索算法，它正在划分和征服我的大小为 n 的数组以找到第一次出现的 false，a 是一个数组。

```
n=a.length;
i=0;
while(a[i]){
   i += n/2;
   n=n/2;
}
       i -= n;
while(a[i])
   i++; 
```

//希望，我会在第一次出现错误时停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:27:14.330

第一部分：

```
n=a.length;
i=0;
while(a[i]){
   i += n/2;
   n=n/2;
} 
```

在 O(lg N) 中执行：i = (nn), (nn/2), (nn/4), ...

但它可能有问题。让我们假设 N=63。然后：

```
i = 0   and n = 63, so n/2 is 31.5, and being an integer, it is 31.
i = 31  and n = 31, so n/2 is ... 15
i = 46  and n = 15, so n/2 is ... 7
i = 53  and n = 7, so n/2 ... 3
i = 56  and n = 3, so n/2 ... 1
i = 57  and n = 1, so n/2 = 0 
```

现在 if `a[57]`is`true`循环将永远不会结束，因为将 n=0 添加到最终索引将使其保持不变。

如果您以某个非零值退出循环`n`，则您处于`n/k`某个 k 值，并开始递增 i。

```
i -= n;
while(a[i])
   i++; 
```

在这里，您增加`n/k`了复杂性，最坏情况下为 O(N)，最好情况下为 O(1)，但在这两种情况下，一旦`i`超出数组边界，您就会访问非法内存，并且可能是 coredump。你应该做类似的事情

```
i -= n;
while((i < n) && (a[i]))
   i++; 
```

否则，您的算法可能介于 O(lg N) 和 O(N) 之间，但它可能永远不会终止或异常终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:15:33.803

如果您正在搜索仅包含布尔真/假值的数组，那么这些值无法以任何允许您描述的二进制搜索的方式排序。如果数组包含一个排序的值列表，那么您将能够使用 O(log n) 的二进制搜索的分而治之。要找到第一次出现的错误，您需要检查数组的每个值，最坏的情况是 O(n)。

```
int i = 0;
for (i; i < a.length; i++) {
    if (a[i] == false){
        break;
    }

}
return i; 
```

# .net - 无法打开 Visual Studio Professional 2010 .csproj

> ID：15867551
> 
> 赞同：0
> 
> 时间：2013-04-07T20:41:37.190
> 
> 标签：.net, visual-studio-2010, x86-64, csproj, servicepacks

我更喜欢 Java、iOS、Linux。我对微软产品的开发很少。

我正在尝试运行另一个团队在 Microsoft Visual Studio 上开发的现有项目。

该项目是由Microsoft Visual Studio 2010 开发的独创性项目

它抱怨说`.csproj cannot be opened`

我注意到有很多人问这个问题，以便根据给出的解决方案解决这个问题，我尝试以下方法：

*   在 Microsoft Visual Studio 2012 高级版上运行它
*   在 Microsoft Visual Studio 2010 上运行它
*   在 Microsoft Visual Studio 2010 Professional 上运行它
*   安装的服务包 1
*   安装了asp.net MVC 4
*   重新应用服务包 1
*   已安装 ASP.NET MVC 3 工具更新
*   安装的网络矩阵

还是同样的问题。

我不知道为什么运行一个项目需要所有这些废话。它寻找我故意的并发症。

任何其他解决方案？

附加文件的开头作为图像文件。![关联](https://i.stack.imgur.com/BvWN9.png)

# google-maps-api-3 - Google Places Service 给出未定义的错误

> ID：15867554
> 
> 赞同：1
> 
> 时间：2013-04-07T20:41:48.643
> 
> 标签：google-maps-api-3, google-places

所以我最近开始使用 Maps Api v3，当我尝试进行附近搜索时出现未定义的错误。在这条线上`var service_places = new google.maps.places.PlacesService(map);`

```
function setupMap (position) {
// console.log(position);
var curLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
// console.log(curLocation);
var mapContainer = document.getElementById('map-container');
var mapOptions = {
    zoom: 13,
    center: curLocation,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    mapTypeControl: true,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    }
};
map = new google.maps.Map(mapContainer,mapOptions);
var marker = new google.maps.Marker ({
    position: curLocation,
    map: map,
    title: "I am here :)"   
});
getNearMe(curLocation);
}

function getNearMe (curLocation) {
var request = {
    loacation: curLocation,
    radius: '10000',
    types: ['bar', 'night_club']
};
var service_places = new google.maps.places.PlacesService(map);
service_places.nearbySearch(request,function (response,status) {
    console.log(status);
    console.log(response);
});

} 
```

`<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=<MY-KEY>-fSUI&sensor=false"> </script>`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-22T08:41:06.050

您应该在您的 google api 链接中包含地点库。

请在 index.html 中试试这个：

```
<script src="http://maps.google.com/maps/api/js?sensor=true&libraries=places" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T08:20:41.337

我立即看到了一些错误。例如，“位置”在您的请求变量中拼写错误。

您还应该使用“var map”声明您的地图变量。但这只是风格问题。修复这些并查看它是否有效，然后我们可以排除更多故障。

# javascript - onclick如何生成单词？

> ID：15867555
> 
> 赞同：0
> 
> 时间：2013-04-07T20:41:49.923
> 
> 标签：javascript, html

我正在尝试创建一个包含标题的 html 页面，当我们单击标题时，它会在其下方生成单词。但我拥有的代码仅适用于第一次点击，它也删除了标题。所以我的问题是，我怎样才能让它在标题下生成单词而不删除它？

```
<!DOCTYPE html>
<html>
<head>
    <title>function JavaScript</title>
    <script>
    var k = 0;
    function bla(){
        var ph = ["red ","blue","black","green","yellow"];
        if(k <= ph.length ){
            document.write(ph[k]);
            k++;
        }
    }
    </script>
</head>
<body>
  <h1 onclick="bla();">Click here</h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:47:58.040

在页面加载完成后运行的任何`document.write`语句都将创建一个新页面并覆盖当前页面的所有内容。这几乎肯定不是您打算发生的事情。因此，您应该避免`document.write`在这种情况下使用

所以尝试添加一个元素，然后像这样写入它们

```
<h1 onclick="bla();">Click here</h1>
<span id="test"></span> 
```

JS：

```
 if(k <= ph.length ){
        //document.write(ph[k]);
         document.getElementById("test").innerText+=" "+ ph[k];;
        k++;
      } 
```

[JS 小提琴示例](http://jsfiddle.net/psm2X/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:49:57.283

这可能是您需要的：

```
var k = 0;

function bla() {
    var ph = ["red", "blue", "black", "green", "yellow"];

    if (k < ph.length) {
        var p = document.createElement('p');
        p.innerHTML = ph[k];
        document.body.appendChild(p);
        k++;
    }
} 
```

[http://jsfiddle.net/p5rLX/](http://jsfiddle.net/p5rLX/)

它将每个单词写入自己的段落。

# emacs - .emacs 中的多个自定义设置面和自定义设置变量？

> ID：15867556
> 
> 赞同：3
> 
> 时间：2013-04-07T20:41:57.737
> 
> 标签：emacs, emacs-faces

当我通过菜单自定义面部`M-x customize-face`并将更改保存到磁盘时，Emacs 将自动生成的代码添加到我的`.emacs`文件中，如下所示：

```
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
; 
;; SOME CODE
; 
) 
```

`SOME CODE`类似的东西在哪里：

```
 '(diredp-dir-priv ((t (:foreground "cyan")))) 
```

现在，假设我想**手动**更改`SOME CODE`，并且可能添加更多代码来修改其他面孔。将这些更改保留在`custom-set-faces`块下是否明智？或者我应该把它移到另一个块（以避免 Emacs 混淆）

另外，Emacs 会因为我有**多个** `(custom-set-faces ... )`块而感到困惑吗？（同样的问题`(custom-set-variables ...)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T08:04:16.473

如果您手动添加自定义面，请将其保存在 custom-set-faces 中。

至于有多个`(custom-set-faces ... )`or`(custom-set-variables ... )`列表，我刚刚测试过这个（在 Emacs 23.1 中）。它们确实有效 - Emacs 将处理所有列表 - 但是，如果您随后使用`M-x customize-face`添加新的自定义面（类似于变量）并将其保存以供将来的会话使用，Emacs 会将所有列表合并为一个。所以，你应该只保留一个。

# bash - 查找序号中的空白

> ID：15867557
> 
> 赞同：37
> 
> 时间：2013-04-07T20:42:01.503
> 
> 标签：bash, awk

我不是为了谋生而做这些事情，所以如果这是一个简单的问题（或者比我想象的更复杂），请原谅我。我一直在挖掘档案，发现了很多很接近的技巧，但作为一个新手，我不确定如何根据自己的需要进行调整，或者它们超出了我的理解范围。

我有一些大型数据文件，我可以解析出来以生成一个大部分是顺序的坐标列表

```
5
6
7
8
15
16
17
25
26
27 
```

我想要的是差距列表

```
1-4
9-14
18-24 
```

我不知道*perl*、*SQL*或任何花哨的东西，但我认为我可能能够做一些从下一个数字中减去一个数字的事情。然后，我至少可以`grep`输出差异不是*1*或*-1*的输出，并使用它来获得差距。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-07T20:58:34.883

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
awk '$1!=p+1{print p+1"-"$1-1}{p=$1}' file.txt 
```

## 解释

*   `$1`是当前输入行的第一列
*   `p`是最后一行的前一个值
*   条件也是如此`($1!=p+1)`：如果`$1`与先前的值+1不同，则：
*   这部分被执行：：`{print p+1 "-" $1-1}`打印前一个值+1，`-`字符和第一列+1
*   `{p=$1}`为每一行执行：`p`分配给当前的第一列

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T22:17:56.600

有趣的问题。

sputnick 的 awk one-liner 很不错。我写不出比他更简单的了。我只是使用 diff 添加另一种方式：

```
 seq $(tail -1 file)|diff - file|grep -Po '.*(?=d)' 
```

您的示例的输出将是：

```
1,4
9,14
18,24 
```

我知道里面有逗号，而不是`-`. 您可以用 sed 替换 grep 来获取`-`， grep 无法更改输入文本......但想法是一样的。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-07T22:27:44.837

## 红宝石答案

也许其他人可以为您提供您要求的 Bash 或 Awk 解决方案。但是，我认为任何基于 shell 的答案都可能针对您的数据集非常本地化，并且不是很可扩展。用 Ruby 解决问题相当简单，并且为您提供了灵活的格式设置和更多选项，用于在以后以其他方式操作数据集。YMMV。

```
#!/usr/bin/env ruby

# You could read from a file if you prefer,
# but this is your provided corpus. 
nums = [5, 6, 7, 8, 15, 16, 17, 25, 26, 27]

# Find gaps between zero and first digit.
nums.unshift 0

# Create array of arrays containing missing digits.
missing_nums = nums.each_cons(2).map do |array|
                 (array.first.succ...array.last).to_a unless
                  array.first.succ == array.last
               end.compact
# => [[1, 2, 3, 4], [9, 10, 11, 12, 13, 14], [18, 19, 20, 21, 22, 23, 24]]

# Format the results any way you want.
puts missing_nums.map { |ary| "#{ary.first}-#{ary.last}" } 
```

鉴于您当前的语料库，这会在标准输出上产生以下内容：

> 1-4
> 9-14
> 18-24

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-07T20:51:27.437

只要记住之前的数字并验证当前的数字是之前的加一：

```
#! /bin/bash
previous=0
while read n ; do
    if (( n != previous + 1 )) ; then
        echo $(( previous + 1 ))-$(( n - 1 ))
    fi
    previous=$n
done 
```

您可能需要添加一些检查以防止出现`28-28`单个数字间隙之类的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-15T18:20:29.403

Perl 解决方案类似于 StardustOne 的 awk 解决方案：

```
perl -ane 'if ($F[0] != $p+1) {printf "%d-%d\n",$p+1,$F[0]-1}; $p=$F[0]' file.txt 
```

使用这些命令行选项：

*   `-n`循环输入文件的每一行，不要自动打印每一行

*   `-a`自动拆分模式 - 将输入行拆分为 @F 数组。默认为空格分割。字段从 0 开始索引。

*   `-e`执行 perl 代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-10T19:17:19.517

给定输入*file ，在**file*旁边使用[`numinterval`util](http://suso.suso.org/programs/num-utils/index.phtml)及其输出，然后使用 、和munge它：`paste`*`tr``xargs``sed``printf`*

 *```
gaps() { paste  <(echo; numinterval "$1" | tr 1 '-' | tr -d '[02-9]') "$1" | 
         tr -d '[:blank:]' | xargs echo | 
         sed 's/ -/-/g;s/-[^ ]*-/-/g' | xargs printf "%s\n" ; } 
```

输出`gaps file`：

```
5-8
15-17
25-27 
```

* * *

这个怎么运作。的输出`paste <(echo; numinterval file) file`看起来像：

```
 5
1   6
1   7
1   8
7   15
1   16
1   17
8   25
1   26
1   27 
```

从那里我们主要替换第 1 列中的内容，并调整间距。s被`1`s 替换，`-`较高的数字被空白。用 删除一些空格`tr`。用单个连字符“ *5-8* ”替换诸如“ *5-6-7-8* ”之类的连字符，这就是输出。*

# c - 模块函数不返回答案

> ID：15867564
> 
> 赞同：0
> 
> 时间：2013-04-07T20:42:42.973
> 
> 标签：c, function, pointers, crash

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
func (int x, int apple);
int main()

{int x,apple;

 scanf("%d",x);
 func (x,apple);

 if (apple==0)
    printf("Yes");
    else if (apple==1)
        printf("no!");
}

func (int x,int apple )

{

 if ((x%7)==0||(x%11)==0||(x%13)==0)
    apple=0;
 else
    apple=1;

} 
```

整个事情的想法是该函数测试输入的值 x 是 7,11 还是 13 的倍数，并给出结果。

该函数工作得很好（就编译器没有检测到错误并且启动得很好）但是我在编译器窗口上得到的（在我输入任何值之后）是该进程返回 1 而没有别的。在此之前，它给了我一个 Windows 错误，并且我正在处理的项目崩溃了。

我几乎被迫使用指针，所以我做错了什么？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:44:10.870

*   格式说明符`"%d"`和提供给 的参数类型不匹配`scanf()`，`int`当它必须是 an 时指定 an `int*`：这是未定义的行为。传递 to 的地址并通过检查返回成功分配次数的返回值来*确保*分配了一个值：`x`[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)`x``scanf()`

    ```
    if (scanf("%d",&x) == 1)
    {
    } 
    ```

*   `void`for 的状态返回类型`func()`。

*   传递to的*地址*（并将参数更改为），以便调用者可以看到对 inside 所做的任何更改：`apple``func()``int* apple``apple``func()`

    ```
    void func (int x, int* apple)
    {
        /* Dereference 'apple' for assignment. */
        *apple = 0;
    } 
    ```

# c# - C# - 从数据集导入后，组合框项目包含空格

> ID：15867567
> 
> 赞同：0
> 
> 时间：2013-04-07T20:42:47.520
> 
> 标签：c#, .net

我想知道是否有人可以告诉我为什么当我从具有多列的数据集中填充组合框时，列值之间的每一行中都有空格（大约 5 个空格）。

代码

```
thisConnect.Open();

SqlDataAdapter sqladapt = new SqlDataAdapter("SELECT firstname, lastname, address FROM OwnersTbl", thisConnect);

DataSet ds = new DataSet();

sqladapt.Fill(ds, "OwnersTbl");

thisConnect.Close();

for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
{
  comboBoxOwners.Items.Add(ds.Tables[0].Rows[i][0] + "" + ds.Tables[0].Rows[i][1] + "" + ds.Tables[0].Rows[i][2]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:54:21.790

作为评论。如果是 char(30) 那么你将得到 30 个字符。
尝试

```
select rtrim(firstname) ... 
```

或者

```
ds.Tables[0].Rows[i][0].Trim() 
```

使用 varchar 并不总是更好。
如果这些值最初为空并且您添加，则可能导致页面拆分。
但是 char(30) 将保留该空间。

# vb.net - 在 VB.Net 中将位写入二进制文件

> ID：15867568
> 
> 赞同：3
> 
> 时间：2013-04-07T20:42:53.000
> 
> 标签：vb.net, binary, bit-manipulation, binaryfiles

我需要创建一个包含二进制输入的文件，但是当我这样做时，它需要字节而不是位

例如，如果我想添加“苹果”的二进制表示，它会写入文件 0110000101110000011100000110110001100101 它包含 40 位，但是当我查看文件时它显示 40 字节，因为它将每一位都作为字符，所以它保存为字节。我怎样才能防止这种情况并在 VB.net 中按位保存所有信息？

```
Dim fs As New FileStream("\binfile.bin", FileMode.Append)
    Dim bw As New BinaryWriter(fs)
    Dim TempStr As String

    For t As Integer = 0 To Nameoftable.Length - 1
        Dim bin As String = _
            LongToBinary(Asc(Nameoftable.Substring(t, 1))) 'BIT CONVERTER FUNCTION
        TempStr &= bin.Substring(bin.Length - 8)
    Next t

        bw.Write(TempStr)

    bw.Close() 
```

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:09:20.530

您必须使用 BINARY 读取器/写入器对象，并指定发送到写入流的数据的字段类型，从流中读取读取器的数据也是如此。

```
Dim filename As String = "c:\temp\binfile.bin"
Dim writer As BinaryWriter
Dim reader As BinaryReader
Dim tmpStringData As String
Dim tmpByteData As Byte
Dim tmpCharData As Char
Dim tempIntData as Integer
Dim tempBoolData as Boolean
'
writer = New BinaryWriter(File.Open(filename, FileMode.Append))
Using writer
  writer.Write("apple")
  'writer.Write(YourByteDataHere)   'byte
  'writer.Write(YourCharHere)   'char
  'writer.Write(1.31459)        'single
  'writer.Write(100)        'integer
  'writer.Write(False)        'boolean
End Using
writer.Close()
'
If (File.Exists(filename)) Then
  reader = New BinaryReader(File.Open(filename, FileMode.Open))
  Using reader
    tmpStringData = reader.ReadString()
    'tempByteData = reader.ReadByte()
    'tempCharData = reader.ReadChar()
    'tempSingleData = reader.ReadSingle()
    'tempIntData = reader.ReadInt32()
    'tempBoolData = reader.ReadBoolean()
  End Using
  reader.Close()
End If 
```

我使用 ReadString() 方法编写字符串“apple” 如果您愿意，您可以使用字符或字节的 chr 代码，在这种情况下，您必须使用 ReadByte() 或 ReadChar() 或 ReadInt()，具体取决于您发送的方式它到流（作为字节，字符或整数）

因此文件大小为 6 字节 1 供文件流处理程序内部使用，5 用于您的“苹果”

如果你将它保存为 char 或 byte 我会认为它使用了 5 个字节和 1k 长如果你将它保存为整数我会认为它使用了 10 个字节和 1k 长

参考：http: [//msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)

# jquery-ui - Knockout.js 自动完成绑定处理程序

> ID：15867569
> 
> 赞同：5
> 
> 时间：2013-04-07T20:43:01.253
> 
> 标签：jquery-ui, autocomplete, knockout.js, viewmodel

我正在尝试使用 Knockout.js 的自动完成处理程序，并且正在寻找一些反馈。这目前有效，但我想看看我是否可以在没有那么多 Eval() 的情况下完成工作，并且为了可重用性，看看是否有一种方法可以在不预设的情况下引用 ViewModel被命名为“vm”，如下所示。

用法：

```
<input placeholder="Test..." type="search" data-bind="autoComplete:$root.persons, source:'/api/Person/', parameterName:'searchString', labelKey:'displayName', valueKey:'urid', onSelected:'addPerson'" autocomplete="off" /> 
```

JS：

```
ko.bindingHandlers.autoComplete = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var postUrl = allBindingsAccessor().source; // url to post to is read here
        var param = allBindingsAccessor().parameterName;
        var labelKeyName = allBindingsAccessor().labelKey;
        var valueKeyName = allBindingsAccessor().valueKey;
        var selectedFunction = allBindingsAccessor().onSelected;
        var selectedObservableArrayInViewModel = valueAccessor();

        $(element).autocomplete({
            minLength: 2,
            autoFocus: true,
            source: function (request, response) {
                $.ajax({
                    url: param != null ? postUrl : postUrl + request.term,
                    data: param == null ? '' : param + "=" + request.term,
                    dataType: "json",
                    type: "GET",
                    success: function (data) {
                        response($.map
                            (data, function (obj) {
                                return {
                                    label: eval("obj." + labelKeyName),
                                    value: eval("obj." + valueKeyName)
                                };
                            }));
                    }
                });
            },
            select: function (event, ui) {
                if (selectedFunction != null) {
                    var functionCall = 'vm.' + selectedFunction + "(event, ui)";
                    eval(functionCall);
                }
            }
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T03:55:14.997

为了获得一些灵感，我会在这个[stackoverflow 帖子](https://stackoverflow.com/a/7538860/1016885)中查看 Ryan Niemeyers 的回答，这是我见过的最全面的自动完成绑定处理程序。

我和我的团队为我们自己的目的创建的另一个但更简单的自动完成绑定处理程序可以在这个[stackoverflow 帖子中找到](https://stackoverflow.com/a/15713822/1016885)

# performance - oracle pl/sql 将大数据加载到临时表中

> ID：15867571
> 
> 赞同：1
> 
> 时间：2013-04-07T20:43:12.073
> 
> 标签：performance, oracle, temp-tables

我有一个用例，其中大量数据有时会添加一百万行到临时表（会话全局临时表）中，并且该表要连接到另一个表以生成结果/图形/热图。数据是文本文件或可能来自命名管道/流/套接字。SQLLDR 不是一个选项，因为它是一个临时表。

你对如何有效地完成这项工作有什么建议吗？目前 SQL 语句如下所示：

```
insert into tempipdata (IP)
select gutils.ip2long('100.0.59.165') FROM DUAL UNION
select gutils.ip2long('100.1.117.161') FROM DUAL UNION
select gutils.ip2long('100.23.117.161') FROM DUAL; 
```

有什么建议么。我可以从程序输出的套接字或标准输入中获取 IP 地址数据。

谢谢维杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:53:43.317

要从 OS 文件访问数据，最好的解决方案是外部表。这些就像普通表一样，只有数据来自 CSV（或其他）文件。所以我们可以对它们使用 SQL。这是比临时表更好的解决方案，因为您不必先加载数据：您可以立即选择它。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e25789/tablecls.htm#CBBBCHFC)。

# qt - QT 如何在不断刷新的 QPixmap 上绘制形状

> ID：15867572
> 
> 赞同：0
> 
> 时间：2013-04-07T20:43:13.997
> 
> 标签：qt, video, draw

我正在使用 OpenCV 抓取视频帧并将它们转换为 QPixmaps，并在 QLabel 上显示。在那之前它就像一个视频播放器一样工作。

问题是，我想在视频上画一些图画。我尝试了几种方法，但无法使其工作。

第一种方法：

将视频播放器放到表单中。在播放器上放置一个空小部件，并在空小部件的 paintEvent() 方法中绘制一些图形。不工作。

第二种方法：

像第一种方法一样在视频播放器上放置一个空小部件，但在 QPixmap 上绘制图形，并将 QPixmap 设置为 QLabel，然后显示 QLabel。不工作。

我可以暂时看到我画的形状。可能每当播放器接收到新帧时，它都会调用 update() 方法并覆盖我的形状。

第三种方法：

考虑在视频帧上绘制我的形状。但这样一来，我就得反复画，比如一秒钟画20次。因为我的绘图程序有点重，所以这种方法似乎不太好。

那么，在不断刷新的 QPixmap 系列上，在视频上绘制图像的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:16:58.350

当我过去这样做时，我将像素图放在 QGraphicsScene 中，并将绘图放在 QGraphicsScene 中。分层和排序图层非常简单，重用绘图或转换旧绘图是小菜一碟。

希望有帮助。

# android - 同时使用 UMTS/3G 和 WLAN

> ID：15867576
> 
> 赞同：0
> 
> 时间：2013-04-07T20:43:32.973
> 
> 标签：android, ios, 3g, wifi, umts

有人知道是否可以同时激活 umts/3g 和 wlan 吗？在 Android、Windows Phone 和 iOS 上？

我需要通过 wlan 将手机连接到热点，同时通过 umts/g3 将手机连接到移动网络。热点没有连接到互联网。

如果我从手机创建热点并将其他网络连接到该热点以使用网络共享，则两个连接都可用。但我需要将智能手机连接到热点，反之亦然。

任何提示如何实施？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T12:36:50.950

如果您将 WiFi 热点的 DHCP 配置为*不*设置网关（例如，如果热点使用 DD-WRT 和 DNSMasq 作为 DHCP 服务器，则`dhcp-option=3`在下面输入），然后 iOS 将“理解”它，并启用 3G/4G 连接。`Extra DNSMasq options`

不幸的是，Android 不理解这一点，并且仍然会禁用 3G/4G（它只是假设热点是网关）。

如果 Windows Phone 能理解我不能说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T12:12:28.440

最好通过 USB 网络共享连接手机以使用 Internet，然后通过 Wifi 在您的系统中共享 Internet Connect。

# twitter-bootstrap - 如何使用 Twig 模板和 Twitter-Bootstrap 创建模态窗口

> ID：15867580
> 
> 赞同：9
> 
> 时间：2013-04-07T20:43:56.153
> 
> 标签：twitter-bootstrap, modal-dialog, fosuserbundle

我使用 Symfony 和 boostrap 来定制我的网站的风格。我有一个树枝文件： register_content.html.twig ，其中包含一个注册表单。

在我的 index.html.twig 我想要这样的东西：

```
<a href="{{ path('fos_user_registration_register') }}" class="btn" data-toggle="modal">Je m'inscris !</a> 
```

在模态窗口中显示注册表单的内容，但它不起作用。

我尝试在这里使用 twitter-bootstrap 文档：http: [//bootstrap.braincrafted.com/javascript#modals](http://bootstrap.braincrafted.com/javascript#modals)

但是我找不到一种方法可以轻松地将它应用于 symfony 中的树枝...

你可以帮帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T09:08:29.503

您的问题与 symfony 或 twig 完全无关。您缺少模式工作的**数据属性！**

您可以通过以下方式进行操作：

1.  将注册表单集成`index.html`在模态框中，并按照静态模态框的引导示例：

    ```
    <button type="button" data-toggle="modal" data-target="#myModal">I register !</button>

    <div id="myModal" class="modal hide fade">
        <!-- register form here -->
    </div> 
    ```

2.  您还可以通过 ajax 加载注册表单的内容。在这种情况下，请参阅模态的远程选项：

    ```
    <a data-toggle="modal" href="{{ path('fos_user_registration_register') }}" data-target="#myModal">click me</a>

    <div id="myModal"></div> 
    ```

    只需确保在针对 url 执行 ajax 请求时不发送任何布局，否则您将在 div 中拥有一个完整的 html 页面，这既不是有效的（html-page inside html-page）也不是一个好主意。

# regex - 使用 perl 正则表达式验证数字输入

> ID：15867581
> 
> 赞同：1
> 
> 时间：2013-04-07T20:44:01.310
> 
> 标签：regex, perl, validating

我在使用正则表达式验证用户输入时遇到困难。我正在尝试获取用户输入并确保它在 1 到 99 之间。如果不是，那么它会调用相同的子例程，直到匹配验证条目。但是，即使输入在 1-99 之间，它也会继续调用子例程。

```
sub get_age
{
    print "Age :";
    @get_age = <STDIN>;
    if (scalar @get_age  !~ m/\d[1-99]/ ) #making sure age given is between 1 and 99
    {

            print "ERROR, invalid input\n";
            &get_age; #this is callng the same sub it's in to re-run validating
    }

            push(@get_age, <STDIN>); #taking name from user and putting it in @get_name     array
            chomp(@get_age); #erasing newline from input
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:04:54.737

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:52:34.177

```
#!/usr/bin/env perl

use 5.012;
use strict; use warnings;
use Term::Prompt qw( prompt );

my $age = prompt(s => 'Age:', 'between 1 and 99', '', sub {
        my ($input) = @_;
        ($input) = ($input =~ /\A\s*( [1-9] [0-9]? )\s*\z/x);
        return $input and ($input >= 1) and ($input <= 99);
    }
);

say $age; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T20:49:37.417

`[1-99]`是从 1 到 9 的所有字符和字符 9 的集合。

试试`[1-9]|([1-9]\d)`吧。这意味着 1-9 或任何两个不以零开头的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T21:01:49.450

我认为这是您的代码的改进版本：

```
use strict;
use warnings;

sub get_age_and_name
{
    my $age;
    while(1) {
        print "Age : ";
        $age = <STDIN>;
        chomp $age;
        # Making sure age given is between 1 and 99
        last if( $age =~ m/^\d\d?$/ and ($age>=1) and($age<=99) );
        print "Error ERROR, invalid input\n";
    } 

    print "Name : ";
    my $name = <STDIN>;
    chomp $name;
    return ($age, $name);
}

my ($age, $name) = get_age_and_name;
print "($age, $name)\n"; 
```

# php - PHP Facebook SDK 不常用方法

> ID：15867582
> 
> 赞同：0
> 
> 时间：2013-04-07T20:44:03.653
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 PHP Facebook SDK，并且我想实现一些不常见的方法。我正在尝试通读 FB 上的 API（[此处](https://developers.facebook.com/docs/reference/api/insights/)），但我只是没有关注它（我对 FB SDK 还是很陌生）。这是我需要一些帮助的方法列表。

*   检索用户创建的页面。
*   检索每个页面的粉丝。
*   检索按页面拆分的粉丝的活动。
*   检索每个页面订阅/喜欢的粉丝数。

任何帮助都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:07:17.573

你需要使用 Facebook Graph API 的一些东西。这是一个非常有用的工具，可以玩 [http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)

假设您已被登录用户授予所需的权限，您可以在此处获取用户创建的页面：[https](https://graph.facebook.com/me/accounts) ://graph.facebook.com/me/accounts （或将“我”替换为用户 ID）

您可以通过以下方式获取页面的粉丝数量：https://graph.facebook.com/[pageid] - 您无法再以编程方式检索页面的所有粉丝（据我所知）

# c# - Chris Lomont 的 C# FFT - 它是如何工作的

> ID：15867584
> 
> 赞同：2
> 
> 时间：2013-04-07T20:44:05.590
> 
> 标签：c#, implementation, fft, dft

Chris Lomont 非常友好地为我们提供了一个使用 C# 的简洁 FFT 实现。来源可以在[这里](http://www.lomont.org/Software/Misc/FFT/LomontFFT.html)找到。函数已经写到`RealFFT(double[] data, bool forward)`一半了，只需阅读函数摘要（很短:)）。

如前所述（函数摘要），我正在使用该`RealFFT`函数，它接受一个样本数组，所有这些样本都是实值（没有虚部）。但是，它还指出，*在前两个条目之后，输出是复值，存储在交替的实部和虚部中。*

我似乎无法弄清楚这一点。进行 FFT 后，您总是会得到实部和虚部。那么如何将它们打包到作为参数进入函数的数组中（因为只有实数，所以大小只有一半）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:09:45.883

来自[维基百科](http://en.wikipedia.org/wiki/Fast_Fourier_transform)：

对于纯实数输入，X(k) = X(Nk)*；因此你只需要给出一半的组件（另一半基本相同，但它们是复共轭的）。

所以不计算和存储它们是有效的；如果你真的需要这些值，你可以使用上面的公式即时计算它们。

声明暗示了这是真的（在您上面链接到的代码的注释中）：

```
// The first two returned entries are the real                                     
// parts of the first and last value from the conjugate symmetric                                       
// output, which are necessarily real. The length must be a power                                       
// of 2\. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T15:32:54.940

这样`LomontFFT.RealFFT(double[] data, bool forward)`工作：

*   `forward == true`:`data`是实数输入和复数输出（FT 系数）。
*   `forward == false`即逆FFT：`data`复数输入（FT 系数）和实数输出。

我同意文档有点混乱。

# session - Tomcat 默认会话处理

> ID：15867593
> 
> 赞同：0
> 
> 时间：2013-04-07T20:44:57.830
> 
> 标签：session, tomcat

我目前面临一个问题，想知道我是否朝着正确的方向前进。

我有一个被用户点击的 servlet。目前我没有任何会话处理代码。当来自不同机器的两个用户在同一个 tomcat 实例上几乎同时访问同一个 servlet 时，它会混淆会话数据，导致 user1 的数据显示在 user2 的屏幕上。

我相信这是因为我没有处理会话并依赖于 tomcat 创建的默认会话。因此，我必须在 servlet 中显式使用会话处理来确保正在处理正确的数据？也许如此[处](http://www.javamex.com/tutorials/servlets/session_api.shtml)所述？

谢谢， 卡迪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:16:10.440

阅读@NilsH 的输入后，问题得到解决。我的代码有一个问题，它在没有通知的情况下覆盖了会话中的 bean 对象，因此，相同的数据被显示给几乎同时访问相同 url 的两个用户。

我不必为会话处理做任何事情来解决这个问题！再次感谢 ！

# vb.net - VB中的替换函数

> ID：15867595
> 
> 赞同：1
> 
> 时间：2013-04-07T20:45:03.530
> 
> 标签：vb.net, function, replace

我收到此错误：“字符串”类型的值无法转换为“字符串的一维数组”

当我尝试使用替换功能替换 - 将文本转换为 md5hash 时使用空格。

这是我的代码：

```
 Public Shared Function GetMD5Hash(ByVal TextToHash As String) As String
    If TextToHash = "" Or TextToHash.Length = 0 Then
        Return String.Empty
    End If

    Dim md5 As MD5 = New MD5CryptoServiceProvider()
    Dim toHash As Byte() = Encoding.Default.GetBytes(TextToHash)
    Dim result As Byte() = md5.ComputeHash(toHash)

    Return System.BitConverter.ToString(result)
End Function

Private Sub PictureBox1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PictureBox1.Click

    Dim tempPassToken As String() = GetMD5Hash(TextBox2.Text).Replace("-", "")
    Dim passMD5 As String = ""

    For i = 0 To tempPassToken.Length - 1
        passMD5 = passMD5 & tempPassToken(i)
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:43:05.973

更改此行：

```
Dim tempPassToken As String() = GetMD5Hash(TextBox2.Text).Replace("-", "") 
```

对此：

```
Dim tempPassToken As String = GetMD5Hash(TextBox2.Text).Replace("-", "") 
```

使用括号告诉系统您正在定义一个字符串数组，而不是单个字符串。而且，正如错误所暗示的，您不能将字符串分配给数组。

# django - Django：过滤带有gte整数结果的注释值，以与SQL中的True进行比较

> ID：15867597
> 
> 赞同：0
> 
> 时间：2013-04-07T20:45:11.107
> 
> 标签：django, django-queryset

我想在 Django 中创建 QuerySet，它将团队限制为仅拥有两个以上活跃成员的团队。我的 models.py 中有以下 UserProfile 类：

```
class UserProfile(models.Model):
  user = models.OneToOneField(
      User,
      related_name='userprofile',
      unique=True,
      null=False,
      blank=False,
      )
   team = models.ForeignKey(
      Team,
      related_name='users',
      verbose_name=_(u"Tým"),
      null=False, blank=False)
... 
```

查询如下：

```
Team.annotate(team_member_count=Sum('users__user__is_active')).filter(team_member_count__gte = 2) 
```

问题是，它会导致 SQL 查询的结果是 True 而不是值 2：

```
选择`dpnk_team`.`id`, `dpnk_team`.`name`, `dpnk_team`.`subsidiary_id`, `dpnk_team`.`coordinator_id`, `dpnk_team`.`invitation_token`,
SUM(`auth_user`.`is_active`) AS`team_member_count`
来自`dpnk_team`
左外连接 `dpnk_userprofile` T4 ON (`dpnk_team`.`id` = T4.`team_id`)
左外连接 `auth_user` ON (T4.`user_id` = `auth_user`.`id`)
GROUP BY `dpnk_team`.`id`
HAVING SUM(`auth_user`.`is_active`) >= True
ORDER BY `dpnk_team`.`name` ASC

```

这也给了只有 1 个活跃成员的团队（True 评估为 1）。尽管“is_active”字段被定义为布尔值，但“team_member_count”的计算结果为整数值，所以我希望它可以进一步作为整数进行测试。

我正在使用 MySQL 数据库并尝试使用 Django 1.4.3 和 1.5.1。

我是否遗漏了什么，我应该以不同的方式编写查询，还是这是一个 Django 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:35:01.520

据我所知，这*是*django 中的一个错误。解决方法是：

```
 (Team.objects.filter(users__user__is_active=True)
              .annotate(team_member_count=Count('users'))
              .filter(team_member_count__gte=1)) 
```

# java - 如何从一大块字符串中获取一行字符串？

> ID：15867598
> 
> 赞同：1
> 
> 时间：2013-04-07T20:45:24.237
> 
> 标签：java, string, swing, jtextpane, indexof

我想要做的是得到一个大字符串的一部分。我曾尝试使用 indexOf()，但在重复文本时完全失败。我的最终目标是让用户能够在 JTextPane 中选择文本并仅对那部分文本进行样式化。我已经获得了与 StyledDocuments 一起使用的样式，我什至已经让它只为用户选择的文本设置样式，但这是我的问题。

让我们这么说

> String alltext = "敏捷的棕狐跳过了懒狗";

而用户强调的是`String selectedtext`

在这种情况下，让我们说

> 字符串 selectedtext = "棕色";

我的目标是获取所选文本的偏移量和长度。对于这个特定的句子，我可以简单地做：

```
int offset = alltext.indexOf(selectedtext);
int length = selectedtext.length(); 
```

这将正常工作。但如果：

> alltext = brownbrownbrownbrown;

用户突出显示第三个棕色。如果我像以前一样做同样的事情，程序只会选择第一个棕色而不是真正的棕色，它会为第一个设置样式。

有什么办法可以解决这个问题或替代从一个大块中获取一段字符串的位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:48:34.187

这是一个 UI 问题，而不是 java.lang.String 问题。

如果您发布您的 UI 代码，我们可能会很好地回答。

使用 Swing，TextComponent 和底层模型可能会有所帮助，为您提供当前选择的[开始](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getSelectionStart%28%29)和[结束](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getSelectionEnd%28%29)索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:47:53.640

不确定我是否正确理解了您的问题。如果您说要检测用户何时选择了文本，然后对该文本进行样式化：

为了让某人选择文本，他们必须单击文本区域，拖动并释放单击。因此，附加一个 MouseListener 并实现 mouseReleased 方法来检查是否选择了任何文本，如果是，则将其保存为字符串：

```
public void mouseReleased(MouseEvent e) {
    if (textArea.getSelectedText != null){ //see if they selected something 
        String s = textArea.getSelectedText();
        //stylize s
        } 
```

编辑：如果您要使用按钮，那么它会更容易。将 ActionListener 添加到按钮和

```
 public void ActionPerformed(ActionEvent e) {
    if (textArea.getSelectedText() != null){ //see if they selected something 
        Font f = showStyleOptionsMenu();
        textArea.getSelectedText().setFont(f);
        } 
```

`showStyleOptionsMenu()`显示一个新面板（或对话框或其他），让用户选择字体样式，然后将选择的字体返回给侦听器，侦听器将其应用于选定的文本。

# php - 为从另一个查询中提取的每条记录运行一个新查询

> ID：15867600
> 
> 赞同：0
> 
> 时间：2013-04-07T20:45:27.520
> 
> 标签：php, mysql

我目前有这个查询

```
try
{
$park_id = $_GET['park_id'];
$query3="SELECT * FROM  `tpf_rides` WHERE  `park_id` = $park_id ORDER BY `name` ASC";
$result3 = $pdo->query($query3);
}
catch (PDOException $e)
{
$output = 'Unable to pull rides.';
include 'output.html.php';
} 
```

结果显示在这里

```
<?php foreach ($result3 as $row3): ?>

<h2 style="display:inline;"><?php echo $row3['name']; ?></h2><h3 style="display:inline;"> - <?php echo $row3['type']; ?></h3> 
<h3>Manufactured by <?php echo $row3['make']; ?>, Opened <?php echo $row3['opened']; ?> </h3>
<br>

<?php endforeach; ?> 
```

我的问题是这个。我有多张每次骑行的照片，它们的 URL 存储在表 tpf_images 中。连接列是ride_id，在tpf_rides 和tpf_images 中都可以找到。如何运行查询，以便在上述 foreach 循环期间，它还将为每个游乐设施提取所有连接的图像 URL，然后可以将其显示为循环的一部分？

请尽可能清楚我仍在学习PHP！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:47:43.180

为 mysql结帐[LEFT JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)。

所以你的查询看起来像这样：

```
SELECT *
FROM tpf_rides
LEFT JOIN tpf_images
ON tpf_rides.ride_id=tpf_images.ride_id 
WHERE park_id = $park_id
ORDER BY `name` ASC 
```

# objective-c - 错误：使用#defined 常量的预期表达式在线

> ID：15867603
> 
> 赞同：3
> 
> 时间：2013-04-07T20:45:40.100
> 
> 标签：objective-c, macros, compiler-errors

我正在做这个

```
if ([resourceCompletionReward objectAtIndex:experienceD] != 0) { 
```

但是 Xcode 给了我一个错误：

> 预期表达

我定义`experienceD`为

```
#define experienceD 0; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T20:49:49.490

分号不应该在那里。

```
#define experienceD 0 
```

会编译得很好。

此外，使用这样的 UPPER_CASE_NOTATION 命名常量也是一个好习惯。

为了完整起见，我将添加 Apple 建议（来自[Coding Guidelines for Cocoa](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-1001783)）

> 通常，不要使用#define 预处理器命令来创建常量。对于整数常量，使用枚举，对于浮点常量，使用 const 限定符

并且

> 如果常量与其他常量无关，您可以使用 const 创建一个整数常量；否则，使用枚举

因此，在您的特定情况下，最好将常量定义为

```
static const int ExperienceD = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:11:00.810

您不应该使用`#define`来定义常量。所做`#define`的只是文本替换，因此在您的情况下，编译器会看到

```
if ([resourceCompletionReward objectAtIndex:0;] != 0) { 
```

并抱怨`;`它不应该在的地方。

如果要计算常数，这可能会特别麻烦：

```
#define CONSTANT 1 + 2
int y = 2 * CONSTANT; 
```

编译器进行简单的文本替换，所以你得到

```
int y = 2 * 1 + 2; 
```

这不是真正的预期值。要解决此问题，您可以记住在每个#defined 常量周围添加括号。

定义常量的更好方法是使用`const`变量：

```
static const int experienceD = 0; 
```

如果你定义了很多具有连续整数值的常量，你也可以使用枚举。

```
enum {
    experienceD = 0;
}; 
```

# c# - 如果超出构建文件夹，C# 应用程序不会运行

> ID：15867605
> 
> 赞同：0
> 
> 时间：2013-04-07T20:45:43.107
> 
> 标签：c#

我有一个奇怪的问题。

我从 VS2012 制作了一个 C#“Windows 窗体应用程序”项目。它链接了一些第 3 方 DLL。构建很好，我可以毫无问题地运行项目构建文件夹中的 exe 文件，即 \myproject\bin\Debug\x.exe。但是如果我将exe复制到任何地方并双击exe，它就不再运行了。我也在我自己的电脑和其他电脑上试过这个。

我正在使用 Windows 8 和 .NET 4.5。

请给我一些启示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:49:09.030

移动使用 3rd 方库的应用程序的可执行文件时，请确保将 .DLL 文件连同它一起移动。

.NET 应用程序使用本地执行路径首先检查 dll 依赖项，然后查询全局程序集缓存（又名 GAC）。GAC 包含 .NET 框架的所有内置库，但也可以添加自定义库。

然而，引用的 DLL 的常见场景是将它们与可执行文件一起保存，因为在 GAC 中安装库是一个更复杂的场景，并且需要运行 exe 的任何计算机上的先决条件。

# javascript - 监听全局变量变化的函数？

> ID：15867607
> 
> 赞同：1
> 
> 时间：2013-04-07T20:46:02.343
> 
> 标签：javascript

新手 javascript 问题在这里：我有两个功能。第一个函数在视频播放器播放时从视频播放器 api 返回数据。第二个函数应该根据函数 1 是否正在检索数据来执行代码。

像这样的东西：

```
var playing = false;

// Function 1
function onPlayProgress(data, id) {
  if (data) {
    playing = true;
  }
} 

// Function 2
function movePlayhead() {
  if(playing) {
    console.log('playhead moving')
  } else {
    console.log('playhead stopped')
  }
}

movePlayhead(); 
```

我的问题是`function 2`仅在文件加载时调用，而不是连续调用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:53:36.610

使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。

```
setInterval(function() {
  if (playing) { 
      ...
  } else {
      ...
  }
}, 500); 
```

或者（正如@bfavaretto 指出的那样）：

```
setInterval(movePlayhead, 1000); 
```

# php - php检查多个值的字符串

> ID：15867609
> 
> 赞同：2
> 
> 时间：2013-04-07T20:46:11.673
> 
> 标签：php, arrays, string, search, if-statement

我正在尝试构建一个函数，我可以用它来检查一个字符串的多个值，这是一种在 haystack 类型的函数中的通用查找针。我已将值拆分为一个数组，并尝试遍历数组并使用 for each 循环检查字符串中的值，但没有遇到预期的结果。请参阅下面的函数、一些示例和预期结果。

**功能**

```
function find($haystack, $needle) {
    $needle = strtolower($needle);
    $needles = array_map('trim', explode(",", $needle));

    foreach ($needles as $needle) {
        if (strpos($haystack, $needle) !== false) {
            return true;
        }
    }

    return false;
} 
```

**示例 1**

```
$type = 'dynamic'; // on a dynamic page, could be static, general, section, home on other pages depending on page and section

if (find($type, 'static, dynamic')) {
    // do something
} else {
    // do something
} 
```

*结果*

这应该捕获 $type 是否包含静态或动态的条件，并根据页面运行相同的代码。

**示例 2**

```
$section = 'products labels'; // could contain various strings generated by site depending on page and section

if (find($section, 'products')) {
    // do something
} elseif (find($section, 'news')) {
    // do something
} else {
    // do something
} 
```

*结果*

如果 $section 在新闻部分的页面上的产品部分的“新闻”页面上包含“产品”，这应该会特别捕获条件。

--

返回所需结果似乎不可靠，并且无法弄清楚原因！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:53:46.100

像这样的东西也许

```
function strposa($haystack, $needles=array(), $offset=0) {
    $chr = array();
    foreach($needles as $needle) {
            $res = strpos($haystack, $needle, $offset);
            if ($res !== false) $chr[$needle] = $res;
    }
    if(empty($chr)) return false;
    return min($chr);
} 
```

接着

```
$string = 'Whis string contains word "cheese" and "tea".';
$array  = array('burger', 'melon', 'cheese', 'milk');

if (strposa($string, $array, 1)) {
    echo 'true';
} else {
    echo 'false';
} 
```

这将是真的，因为奶酪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T17:39:15.983

怎么样：

```
str_ireplace($needles, '', $haystack) !== $haystack; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T21:05:17.520

为什么这里有一个`find`可以派上用场的 2way

```
var_dump(find('dynamic', 'static, dynamic')); // expect true
var_dump(find('products labels', 'products')); // expect true
var_dump(find('foo', 'food foor oof')); // expect false 
```

使用的功能

```
function find($str1, $str2, $tokens = array(" ",",",";"), $sep = "~#") {
    $str1 = array_filter(explode($sep, str_replace($tokens, $sep, strtolower($str1))));
    $str2 = array_filter(explode($sep, str_replace($tokens, $sep, strtolower($str2))));
    return array_intersect($str1, $str2) || array_intersect($str2, $str1);
} 
```

# c - c指针数组段错误

> ID：15867610
> 
> 赞同：0
> 
> 时间：2013-04-07T20:46:19.567
> 
> 标签：c, pointers

我是指针新手，所以我有点问题。我有一个简单的程序来打印 0-100 之间的随机 int 值。但它只打印第一个值，然后我得到一个分段错误（核心转储）

```
#include <stdio.h>
#include <stdlib.h>

void printArray(int **array, int size) 
{
  int i;
  for (i=0; i<size; i++)
  {
    printf("index[%d] = %i \n",i,*array[i]);
  }
}

int main() 
{   
  int size = 10;
  int *array = (int *) malloc (sizeof(size));
  int i;
  for (i=0; i<size; i++) 
  {
    array[i] = rand() % 100 + 1;
  }

  printArray(&array,size);
  free(array);

  return 0;

} 
```

我真的不知道为什么，任何帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:48:26.593

您正在看到运算符优先级的影响。`operator[]`来之前`operator*`。因此，您需要将其放在括号中：

```
printf("index[%d] = %i \n",i,(*array)[i]); 
```

实际上，它需要索引 0，您的数组，并取消引用指针以获取第一个元素，然后移动到下一个数组（它不存在），取消引用该指针，然后 BOOM！未定义的行为。

onon15 是第一位的，但您的数组实际上并不是一个数组。它是单个元素（因为`sizeof(size)`恰好与`sizeof(*array)`此处相同）。你想要这样的东西：

```
int *array = malloc(sizeof(int) * size); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:50:30.867

```
int *array = (int *) malloc (sizeof(size)); 
```

大小是整数。所以 sizeof(size) 是一个整数的大小，而不是 10 个整数的数组。你可能打算做

```
int *array = (int *) malloc (size * sizeof(int)); 
```

或者更好，

```
int *array = (int *) calloc(size, sizeof(int)); 
```

# c - 用C中的文本文件中的数字对数组进行排序？

> ID：15867612
> 
> 赞同：0
> 
> 时间：2013-04-07T20:46:38.583
> 
> 标签：c

所以任务是打开一个文本文件（没有 fopen，只使用终端/控制台中的命令），将信息放入数组中，对数组进行排序（数字最初是随机顺序“4,12,2,4”）和然后所有排序的数据必须打印在第二个txt文件上。现在我自己做了一个程序，但显然不正确，你能告诉我我错在哪里，我是第一次使用qsort，所以我不是专家这个，以前用过冒泡排序，先谢谢了！！

```
#include <stdio.h>
#include <stdlib.h>

//first time using qsort function.
int array[1024];
int array_counter=0;

int compare (const void * num1, const void * num2)
{
   return (*(int*)num1 - *(int*)num2);
}

int main ()
{
   int i;
   char c;
   while((c=getchar())!=EOF)
   {
      if(c >='0' && c <='9' )
      {
         i = atoi(&c);
         array[array_counter] = i;
         array_counter++;
      }
   }
   int counter;
   qsort(array, array_counter, sizeof(array[array_counter]), compare);
   for(counter = 0; counter < array_counter; counter++)
   {
   printf ("%d", array[array_counter]);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:22:03.103

我在你的代码中发现了几个错误，所以这里是带有解释的工作代码（参见[qsort](http://linux.die.net/man/3/qsort)的手册页）

```
#include <stdio.h>
#include <stdlib.h>

//first time using qsort function.
int array[1024];
int array_counter=0;

int compare (const void * num1, const void * num2)
{
   return (*(int*)num1 - *(int*)num2);
}

int main ()
{
   int i;
   char c;
   // use '0' terminated string  for passing it to atoi as this is what it is expecting
   // not only a pointer to char
   char buf[2];
   buf[1] = '\0'; // terminate the string with a '0' since you want only to have digits in your buffer
   // you may use something else (scanf for example) to read number of more than one digit)
   while((c=getchar())!=EOF)
   {
      if(c >='0' && c <='9' )
      {
         // put the char in buf
         buf[0] = c;
         // pass that buf to atoi (even if &c is satisfiying the signature of atoi it is not null terminated)
         i = atoi(buf);
         array[array_counter] = i;
         array_counter++;
      }
   }

   // arguments passed to qsort were wrong (second and third)
   // first is the array (or where the sorting should start)
   // second is the size of one element in the array thus sizof(int)
   // third is the number of the array elements to be sorted
   // the compare function
   qsort(array, sizeof(int), array_counter, compare);

   int counter;
   for(counter = 0; counter < array_counter; counter++)
   {
       // use counter to access array elements not array_counter, array_counter ist the index of the next free element and is always 0
       printf ("%d ", array[counter]);
   }
   return 0;
} 
```

示例文本文件`digits.txt`

```
2 1 6 4 
```

执行命令

```
out.exe < digits.txt 
```

输出

```
1 2 4 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:00:25.690

```
 while((c=getchar())!=EOF)
   {
      if(c >='0' && c <='9' )
      {
         i = atoi(&c);
         array[array_counter] = i;
         array_counter++;
      }
   } 
```

这是错误的。您需要将字符放入缓冲区，以空值终止它，然后调用`atoi`缓冲区。或者你可以使用`scanf`而不是你自己的循环；

```
printf ("%d", array[array_counter]); 
```

你想要“%d\n”，否则数字将被挤在一起。

> 法官说这是错误的答案

如果您在提交之前进行了一些测试，您就会知道这是错误的答案......检查您放入数组的数字是否具有正确的值，然后检查输出是否正确。

# c# - 在 Visual Studio C# 中备份数据库

> ID：15867613
> 
> 赞同：0
> 
> 时间：2013-04-07T20:46:45.750
> 
> 标签：c#, sql, sql-server, visual-studio-2010

我正在使用 c# 和 Visual Studio 2010 上的内置 SQL Server 开发 Windows 应用程序。

我正在尝试创建一个单击事件以将数据库备份到指定位置，但是当我运行它时，它向我显示错误，即具有此名称的数据库不存在。

我正在使用的代码是

```
 SqlCommand cmd = new SqlCommand("BACKUP DATABASE GRTU_LIBRARY_MANAGEMENT TO  DISK = N'D:\temp\foo' WITH NOFORMAT, NOINIT,  NAME = N'Full Database Backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10", connect);
 cmd.ExecuteNonQuery(); 
```

它显示错误“数据库'GRTU_LIBRARY_MANAGEMENT'不存在。确保名称输入正确。备份数据库异常终止。”

我在整个应用程序中使用相同的数据库，但这里显示此错误。我在 Visual Studio 2010 中使用内置 SQL 服务器

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:22:31.610

在我看来，它正在寻找错误的服务器。也许您可以将“SELECT @@SERVERNAME”换成备份语句并查看结果，以验证它是否在您期望的服务器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:54:44.543

好像你错过了关键字`DATABASE`。添加`DATABASE`之后`BACKUP`并检查

```
SqlCommand cmd = new SqlCommand("BACKUP DATABASE GRTU_LIBRARY_MANAGEMENT TO  DISK = N'D:\temp\foo' WITH NOFORMAT, NOINIT,  NAME = N'Full Database Backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10", connect); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:54:33.873

它找不到您要备份到的文件。请将 'D:\temp\foo' 的文本更改为 'D:\Temp\foo\Test.bak'。请记住目录 D:\Temp\foo 必须存在。整个文本如下所示：（将 'Test' 更改为您自己的数据库名称） *SqlCommand cmd = new SqlCommand(@"BACKUP DATABASE Test TO DISK = N'D:\Temp\foo\Test.bak' WITH NOFORMAT, NOINIT , NAME = N'完整数据库备份', SKIP, NOREWIND, NOUNLOAD, STATS = 10", connect);*

# java - 维基百科正则表达式匹配和替换

> ID：15867619
> 
> 赞同：0
> 
> 时间：2013-04-07T20:47:02.167
> 
> 标签：java, regex, wikipedia

我正在研究维基百科提供的媒体 wiki xml，我正在尝试预处理数据，删除和替换文本中的一些特定表达式。一种这样的预处理是替换所有指向维基百科页面的内部链接，如下所示 -

输入 -

> text here [[foo|bar]] text here [[some.jpg|some|this is an image of some]] text here

输出 -

> text here foo bar text here some.jpg some this is an image of some text here

这是我目前能够实现的 -

```
String regex = "(\\[\\[(.+?)\\]\\]*)"; 
string.replaceAll(regex, "$2")); 
```

这有助于我`[[]]`从文本中删除。但我有点卡住试图`"|"`用空间替换管道`" "`。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:57:22.503

如果您只是想清理一组特殊字符，只需匹配这些字符

```
string.replaceAll("[\\[\\]\\|\\s]+", " "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:22:21.550

这将解决重复空间问题：

```
String regex = " \\[{2}|\\]{2} |\\|";
String result = subject.replaceAll(regex, " "); 
```

如果您想检查您删除的方括号和管道是否真的是您正在寻找的结构的一部分*(ie `[[word1|word2|...|wordN]]`)*，您还可以使用`\G`基于模式：

```
String regex = "(?:\\G(?!\\A)\\|| ?\\[\\[(?=[^\\]\\[|]+(?:\\|[^\\]\\[|]+)*+\\]\\]))([^\\]\\[|]+)(?>\\]\\])?";
String result = subject.replaceAll(regex, " $1"); 
```

[演示](http://fiddle.re/6k7fcn)

图案细节：

```
(?: # two possible starts:
    \G (?!\A) \| # 1) a start contiguous to the previous match
  | # OR
    [ ]? \[\[ # 2) the double opening square brackets
    (?= # a lookahead to test if the format is the good one
        [^\]\[|]+ (?:\| [^\]\[|]+)*+ \]\]
    )
)
([^\]\[|]+) # capture the item in group 1
(?>\]\])? # eventual double closing square brackets 
```

# ruby-on-rails - 如何从索引的 ElasticSearch 模型中获取 image.url

> ID：15867623
> 
> 赞同：1
> 
> 时间：2013-04-07T20:47:45.043
> 
> 标签：ruby-on-rails, ruby, paperclip, elasticsearch

有谁知道我如何从 elasticsearcg 索引的图像中获取 image.url（使用轮胎）？

```
class Photo < ActiveRecord::Base
   include Tire::Model::Search
   include Tire::Model::Callbacks
   attr_accessible :caption, :user_id, :image, :venue_id
   attr_accessible :id, :image_file_name, :created_at, :updated_at, :city, :state, :country, :image_url
   has_attached_file :image, :styles => { :large => "9999x9999", :medium => "300x200>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"
end

class SearchController < ApplicationController
   def index
   city_name = params[:city]
   @photos = Photo.search city_name
      respond_to do |format|
      format.html # index.html.erb
   end
end 
```

结尾

当我这样做时，在我的 index.html.erb 中：

```
<% @photos.each do |photo| %>
    <%= image_tag photo.image.url(:medium) %> 
```

我收到 nil:NilClass 的未定义方法“url”

有谁能够帮我 ？

非常感谢你提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T13:54:35.043

添加到您的照片模型：

```
mapping do
  indexes :image
end

def image
  picture.url(:medium)
end 
```

在你看来之后

```
<%= image_tag photo.image %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T05:57:36.107

该图像包含在存储模型的 SQL 数据库中，因此您需要搜索功能来查询 ElasticSearch，然后在该数据库中查找相应的条目。这是通过传递`load: true`给来完成的`Photo.search`。

`@photos = Photo.search city_name, load: true`

# jquery - 带有电子邮件验证的 JQuery 验证插件

> ID：15867628
> 
> 赞同：2
> 
> 时间：2013-04-07T20:47:58.040
> 
> 标签：jquery, jquery-validate, validation

我目前正在使用 JQuery Validate 插件和一些提示插件来验证表单。我还需要验证电子邮件地址，然后检查所有字段是否已填写。我熟悉 Validate`rules`功能，但是它会导致问题。

一旦电子邮件被评估为无效，在我当前的实现中，所有后续文本字段似乎都是无效的（通过生成插件提示）并导致所有后续字段`this field is required`在用户甚至有机会之前都有一个烦人的提示填写它们。

我想知道是否有办法检查我的电子邮件验证函数是否从`validate`调用中返回 true，如果它不返回 true，则认为表单无效。

稍后我将需要实现一个遵循相同逻辑的密码正则表达式函数。

我的表单验证

```
 $(".form").validate({
            errorPlacement: function(error, element) {
            },
            highlight: function(element, errorClass, validClass) {
                $(element).css('border', '1px solid red');
                $('.addlefttip').qtip({
                    position: {
                        my: 'middle left', 
                        at: 'middle right'
                    },
                    show: {
                        event: 'focus'
                    },
                    hide:{
                       event: 'blur'
                    },
                    style: {
                            classes: 'qtip-blue qtip-shadow'
                        },
                        content: {
                            attr: 'alt'
                        },
                    });
                    $('.addtoptip').qtip({
                        position: {
                            my: 'bottom left', 
                            at: 'top right'
                        },
                        show: {
                            event: 'focus'
                        },
                        hide:{
                            event: 'blur'
                        },
                        style: {
                            classes: 'qtip-blue qtip-shadow'
                        },
                        content: {
                            attr: 'alt'
                        },
                    });
                },
                rules: {
                    email: {
                        minlength: 5
                    }
                },
                unhighlight: function(element, errorClass, validClass) {
                    $(element).css('border', '1px solid #ddd');
                }
            }); 
```

我的电子邮件验证：

```
 $('.email-field').change(function(){
            var email = $(this).val();

            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

            if(re.test(email)) {
                document.getElementById('result').innerHTML = '<span style="color:green; font-style:italic; font-weight:normal;"><img src="http://myhousesforsaleindetroit.com/wp-content/uploads/2012/08/green-check-mark.png"> valid';
            } else {
                document.getElementById('result').innerHTML = '<img src="http://upload.wikimedia.org/wikipedia/en/archive/8/89/20070603232424!RedX.png" style="width:15px; margin:-2px 0px 0px 0px;"/> invalid';
            }
        }); 
```

我很感激任何建议！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:52:49.620

我想我没有完全理解你的实现。使用表单验证插件然后用自定义`change`处理程序绕过它的一部分似乎毫无意义。既然您使用的是 jQuery Validate 插件，为什么不直接使用它的[内置`email`规则](http://docs.jquery.com/Plugins/Validation/Methods/email)呢？

否则，如果您更喜欢您的电子邮件功能，请使用[内置`addMethod()`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)将其转换为自定义规则。

```
$.validator.addMethod("myCustomRule", function(value, element) { 
      return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value); 
}, "Custom message for this rule"); 
```

它的实施就像任何其他规则一样......

```
rules: {
   myfield: {
       myCustomRule: true
   }
} 
```

* * *

至于使用 qTip2 和 jQuery Validate，我已经这样做了......

```
$(document).ready(function () {

    $('#myform').validate({ 
        // any other options & rules,
        errorPlacement: function (error, element) {
            $(element).filter(':not(.valid)').qtip({
                overwrite: false,
                content: error,
                show: {
                    event: false,
                    ready: true
                },
                hide: false
            }).qtip('option', 'content.text', error);
        },
        success: function (error) {
            setTimeout(function () {
                $('form').find('.valid').qtip('destroy');
            }, 1);
        }
    });

}); 
```

**演示，使用 qTip2 进行 jQuery 验证：http: [//jsfiddle.net/96AM4/](http://jsfiddle.net/96AM4/)**

* * *

但是最近，我一直在使用 Tooltipster，因为它与 jQuery Validate 的集成更加简洁。

```
$(document).ready(function () {

    // initialize Tooltipster on form input elements
    $('#myform input[type="text"]').tooltipster({ 
        trigger: 'custom', // default is 'hover' which is no good here
        onlyOne: false,    // allow multiple tips to be open at a time
        position: 'right'  // display the tips to the right of the element
    });

    // initialize jQuery Validate
    $('#myform').validate({
        // any other options & rules,
        errorPlacement: function (error, element) {
            $(element).tooltipster('update', $(error).text());
            $(element).tooltipster('show');
        },
        success: function (label, element) {
            $(element).tooltipster('hide');
        }
    });

}); 
```

* * *

**旁注**：

最好不要像这样将 callbcak 函数留空：

```
errorPlacement: function(error, element) {
}, 
```

如果您的意图是抑制默认错误消息，请使用此选项：

```
errorPlacement: function(error, element) {
    return false;
}, 
```

**演示，使用 Tooltipster 进行 jQuery 验证：http: [//jsfiddle.net/kyK4G/](http://jsfiddle.net/kyK4G/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:36:31.993

问题是由于我`$('.addlefttip').qtip({...`在突出显示定义中选择引起的。更改选择器以`element`修复所描述的问题。

```
 highlight: function(element, errorClass, validClass) {
                $(element).css('border', '1px solid red');
                $(element).qtip({
                    position: {
                        my: 'middle left', 
                        at: 'middle right'
                    },
                    show: {
                        event: 'focus'
                   ...
                   ...
                   ... 
```

# java - 如何使我在 MySQL 数据库中的主键适用于小写和大写？

> ID：15867630
> 
> 赞同：1
> 
> 时间：2013-04-07T20:48:14.767
> 
> 标签：java, mysql, database, primary-key

我想制作包含用户名和密码的表的数据库。

我想制作用户名主键，以防止重复。

当我试图做到这一点时，例如：

1-管理员 2-管理员 3-管理员 4-管理员 5-管理员等..

所有这些用户名都不被视为重复。

我怎样才能使这些案例被视为重复？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T20:54:23.643

您可以使用表格上的区分大小写的合并`utf8_general_cs`。此外，您的用户名不应该是主键。PK 应该是一个`auto_increment`整数。如果您想让用户名唯一，只需将其设为`UNIQUE KEY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:54:38.617

如您所愿：[Altering Mysql Table column to be casesensitive](https://stackoverflow.com/questions/3396253/altering-mysql-table-column-to-be-case-sensitive)

发布问题的人说，默认情况下，该列在 MySql 中不区分大小写。

[这里](http://venutip.com/content/case-sensitivity-mysql-do-you-really-need-it)的另一个帖子也这么说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T15:21:26.297

mySql 中的表列默认区分大小写，反之则不区分大小写。

# mysql - mysql注册表工作50/50？

> ID：15867640
> 
> 赞同：0
> 
> 时间：2013-04-07T20:48:41.763
> 
> 标签：mysql

嗨，我有一个 mysql 注册表单，但我遇到了困难，50% 的时间可以正常工作，没有任何问题，另外 50% 的时间它会失败。

有时在尝试不成功后，当我清空浏览器缓存时它会起作用。

这对任何人都有意义吗，请有人告诉我是否有办法解决这个问题，谢谢。

```
<?php ob_start(); 
// CONNECT TO THE DATABASE
    require('../includes/_config/connection.php');
// LOAD FUNCTIONS
    require('../includes/functions.php');
$username = $_POST['username'];
$password = $_POST['password'];
$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];
$email = $_POST['email'];
$number = $_POST['number'];
$dob = $_POST['dob'];
$accounttype = $_POST['accounttype'];
$query="INSERT INTO ptb_registrations (id,
username,
password,
firstname,
lastname,
email,
number,
dob,
accounttype,
date_created )
VALUES('NULL',
'".$username."',
'".$password."',
'".$firstname."',
'".$lastname."',
'".$email."',
'".$number."',
'".$dob."',
'".$accounttype."',
now()
)";
mysql_query($query) or dieerr();
function dieerr() {
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title></title>

<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

</head>
<body background="../assets/img/form/backdrop.png" style="background-repeat:no-repeat; background-size: 100% 2000px;">

<div id="container">
<h1>REGISTRATION WAS UNSUCCESFULL</h1><br/><br/><br/><br/>
<div class="textarea">
    <h3>Oooops! I tried my hardest to register you onto our system but it looks like one of us has made an error :-( Try and have another go and if there is still a problem then contact one of the Tech Team at <a href=\"mailto:support@playtimeboys.com\">Support@PlaytimeBoys.com</a></h3>
</div>
    <div class="man_reg"><img src="../assets/img/help_support/man.png" alt="" width="210" height="214" /></div></div>
<div id="progress_bar">
    <div id="progress"></div>
    <div id="progress_text">Registration Completed</div>
</div>

<style>
.textarea{
    padding-left:55px;
    padding-right:55px;
    text-align:center;
}
.man_reg{
    margin-top:54px;
    margin-left:450px;
}

</style>    
</body>
</html>';
exit;
}
$pass = $_GET['pass'];

$query="INSERT INTO ptb_users (id,
user_id,
first_name,
last_name,
email,
password )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."',
MD5('".$password."')
)";
mysql_query($query) or dieerr();
$result = mysql_query("UPDATE ptb_users SET ptb_users.user_id=ptb_users.id");

$query="INSERT INTO ptb_stats (id,
user_id,
display_name )
VALUES('NULL',
'NULL',
'".$username."'
)";
mysql_query($query) or dieerr();
$result2 = mysql_query("UPDATE ptb_stats SET ptb_stats.user_id=ptb_stats.id");

$query="INSERT INTO ptb_profiles (id,
user_id,
display_name, bio, status )
VALUES('NULL',
'NULL',
'".$username."',
'Welcome, Tell us about yourself?',
'Whats on your mind?'
)";
mysql_query($query) or dieerr();
$result3 = mysql_query("UPDATE ptb_profiles SET ptb_profiles.user_id=ptb_profiles.id");

$query="INSERT INTO ptb_profiles_rates (id,
profile_id )
VALUES('NULL',
'NULL'
)";
mysql_query($query) or dieerr();
$result4 = mysql_query("UPDATE ptb_profiles_rates SET ptb_profiles_rates.profile_id=ptb_profiles_rates.id");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:53:48.560

为什么要在 id 中插入 null ？我猜你的 id 是自动递增的，所以不需要插入 id 试试这样

```
 $query="INSERT INTO ptb_registrations (
username,
password,
firstname,
lastname,
email,
number,
dob,
accounttype,
date_created )
VALUES(
'".$username."',
'".$password."',
'".$firstname."',
'".$lastname."',
'".$email."',
'".$number."',
'".$dob."',
'".$accounttype."',
now()
)"; 
```

其他查询也一样。

# javascript - 如何通过 javascript 处理 JSTL 标签

> ID：15867646
> 
> 赞同：1
> 
> 时间：2013-04-07T20:49:18.697
> 
> 标签：javascript, ajax, jsp

我必须在 javascript 响应处理程序函数中处理 JSTL 标记 (fmt:)。例如：

1.  我需要通过 AJAX 切换语言，所以我需要通过 javascript 更新我的工具面板，并在响应处理程序函数 (javascript) 中继续 fmt:setLocale
2.  我必须通过 ajax 更新我的选择下拉菜单，它们必须翻译适当的本地化，所以我必须在 javascript 中使用 fmt:message

**但是**，jsp 引擎不会处理 .js 文件，并且我的代码不起作用：

```
document.findElementById("div1").innerHTML = "<fmt:message key="word_from_DB"/>";
document.findElementById("div2").innerHTML = "<fmt:setLocale value="en"/>"; 
```

**问题**：如何从 javascript 处理这些标签，或者我应该在哪里搜索替代标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:13:25.040

您如何准确地实现您想要的取决于您的 JSP 和 JS 文件的内容，但这是一种潜在的解决方案：

JS：

```
function setDivInnerHTML(html1, html2) {
    document.findElementById("div1").innerHTML = html1;
    document.findElementById("div2").innerHTML = html2;
} 
```

JSP：

```
...
<script>
setDivInnerHTML("<fmt:message key="word_from_DB"/>", "<fmt:setLocale value="en"/>");
</script>
... 
```

**根据评论**编辑：****

 **JSP (URL = "/cities"):

```
String country = request.getParameter("country");
String locale = request.getParameter("locale");
List<City> cities = getCitiesFromDB(country, locale);
out.println(objectToJSON(cities)); 
```

JS（使用 jQuery）：

```
function createOption(val, html) {
    return $("<option></option>").html(html).val(val);
}

function populateCities(cities) {
    var $select = $("#city_select");
    $select.empty();
    for (var i = 0; i < cities.length; i++) {
        var $opt = createOption(cities[i].name, cities[i].name);
        $select.append($opt);
    }
}

function getCities(country, locale) {
    var url = "/cities";
    return $.ajax(url, {
        data: {
            country: country,
            locale: locale
        }
    });
}

// call this to load the initial cities
// and do the same thing when a new country or locale is selected
getCities(country, locale).then(populateCities); 
```**

# ruby-on-rails - CanCan 用 has_many 定义能力：通过关联

> ID：15867649
> 
> 赞同：1
> 
> 时间：2013-04-07T20:49:27.377
> 
> 标签：ruby-on-rails, cancan

我已经尝试了大约 2 个小时来完成这项工作，但我根本做不到。我的问题找到的答案似乎都不起作用。

我有一个 has_many ：通过这样的关联：

```
class Request < ActiveRecord::Base

  has_many :dialogs
  has_many :companies, :through => :dialogs

class Dialog < ActiveRecord::Base
  belongs_to :request
  belongs_to :company 
```

在我的能力.rb 文件中，我试图让公司只能看到它的请求（即查看 current_user id 是否在特定请求的对话框中）。

我尝试了很多方法，但没有成功。我必须以某种方式接近，但无法弄清楚：

```
can [:show, :destroy], Request, :dialogs => {:company_id => user.rolable.id} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:47:43.790

您始终可以使用块定义能力：

```
can [:show, :destroy], Request do |request|    
  request.dialogs.where(company_id: user.rolable.id).any?
end 
```

不确定我是否确定了您正在寻找的条件，但您得到了图片。

# r - 将熔化的数据帧重建回原始数据的更简单方法

> ID：15867650
> 
> 赞同：6
> 
> 时间：2013-04-07T20:49:29.497
> 
> 标签：r, reshape2

我如何重新创建一个`data.frame`我融化的`reshape2`？

**可重现的例子**

```
library(reshape2)
library(plyr)
data(iris)
df  <- melt(iris, id.vars="Species")
head(df)
  Species     variable value
1  setosa Sepal.Length   5.1
2  setosa Sepal.Length   4.9
3  setosa Sepal.Length   4.7
4  setosa Sepal.Length   4.6
5  setosa Sepal.Length   5.0
6  setosa Sepal.Length   5.4
# Great, I'd like to get the original iris back 
```

**我试过的`dcast`**

```
 dcast(df, Species~variable, value.var = "value")
    # should work but doesn't 
```

**临时解决方案**

```
# This works but clearly it shouldn't be this hard.
ddply(df, .(Species), function(x) {
    Species <- unique(x$Species)
    x$id <- 1:dim(x)[1]
    x$Species <- NULL
    dat <- unstack(x, value~variable)
    dat$Species <- Species
    return(dat)
    }) 
```

我错过了什么？这很明显，但我无法弄清楚答案。我什至可能以前在这里为其他人回答过。啊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T21:26:27.020

如果您*添加某种形式的标记*来指示项目所属的原始行，那么很容易：

```
require(reshape2)
iris$rn <- seq_len(nrow(iris))
molten  <- melt(iris, id.vars = c("Species", "rn"))

# just a one-liner
dcast(molten, rn + Species ~ variable) 
```

* * *

您遇到的困难是无法确定哪些项目放在一起。熔集中的 1:5 排是一排吗？还是 2:6 而 1 放错了位置？融化的数据实际上是融化的:)

# php - PHP MVC - 控制器和视图如何访问模型的同一个实例？

> ID：15867651
> 
> 赞同：0
> 
> 时间：2013-04-07T20:49:33.087
> 
> 标签：php, model-view-controller

我正在为一个数据库应用程序开发我自己的 PHP MVC，我已经完成了它，但是使用可以完成所有事情的单片类 - MySQL 处理、输入处理和显示。它工作得很好，但调试和修改是一场噩梦！我最近发现了 MVC，并且正在重写应用程序 - 目前这一切都在绘图板上，所以我实际上没有任何代码可以与您分享。

我遇到了一件事：我知道控制器应该调用模型以根据用户输入对其进行修改，然后调用视图，视图将访问它需要获取其数据的模型和然后显示它。我希望视图独立于控制器获取其数据，而不是让控制器充当中介。我从控制器的那一行开始，从模型中获取数据并将其交给视图，但很快就遇到了麻烦，视图需要访问多个模型。

为了解释我坚持的问题，我将举一个例子：

* * *

**示例：提交带有数据的表单，模型验证失败**

前控制器：

*   加载相关控制器并调用 ProcessForm 动作

控制器：

*   实例化 Model 类并调用方法来加载和验证数据

模型：

*   验证失败：生成错误列表并返回“false”

控制器：

*   如果模型返回“真”，则重定向到索引页面
*   它返回'false'：调用视图

看法：

*   实例化 Model 类并获取数据
*   显示数据和错误消息

* * *

我的问题是，拥有自己的模型实例的视图如何获得在控制器的模型实例中生成的错误消息，而控制器没有将自己的模型实例直接交给视图？我认为第一个实例需要将消息存储在第二个实例可以检索它们的地方？

我意识到第一个实例可以将其错误返回给控制器，然后它可以将其传递给视图，独立于模型本身，但我仍然希望保持视图独立于控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T20:55:22.593

好吧..所有的拳头，没有“模型”。MVC 和受 MVC 启发的设计模式中的模型是一个[层](https://stackoverflow.com/a/5864000/727208)，它包含多种结构，就像表示层包含控制器、视图和其他一些东西一样。

除了那部分，您的问题是您拥有这些“模型”的单独实例。相反，控制器和视图都应该共享同一个工厂，该工厂可以生成和缓存实例。

最佳解决方案是让您拥有服务，这些服务代表模型层的一部分，控制器和视图通过这些服务与模型交互。工厂会在被请求时第一次初始化服务，然后在任何重复请求时提供相同的实例。

```
class ServiceFactory
{
    private $cache = array();

    public function create( $name )
    {
        if ( array_key_exists($name, $this->cache) === false )
        {
            $this->cache[$name] = new $name;
        }
        return $this->cache[$name];
    }
} 
```

> ^(这是服务工厂的**“极其愚蠢”**的版本。)

在引导阶段，您初始化服务工厂，然后通过将其注入所述实例的构造函数中，为当前控制器和当前视图提供它的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:12:02.120

首先，控制器和视图不应该有不同的模型实例。他们都应该使用相同的实例。在这种结构中划分你的类更实用。

## 领域类（模型）

域类只是保存数据以提供上下文。例如，您可以有一个`Person`域类。

```
class Person {
    private $name;
    private $age;
    ...
    public function getName()
    public function getAge()
    ...
} 
```

## 控制器

控制器是模型和视图之间的桥梁。它们不应包含任何业务逻辑。这就是服务的用途。

```
class PersonController
{
    private personService;

    public function list(Bag bag) {
        bag.add('personList', personService.listAll());
        ...
        Give bag of data to the correct view
        ...
    }
} 
```

## 服务

服务处理应用程序逻辑。主要是包含域逻辑和存储抽象的实体之间的交互。

```
class PersonService {
    public function listAll() {
        ...
        Do the logic to find all persons
        ...
        return $persons;
    }
} 
```

## 意见

视图只显示控制器提供给它们的数据。它没有自己的模型。

* * *

它不能解决所有问题，但至少它是让你的结构正确的一个不错的开始。

Spring Framework (Java) 有一个非常好的 MVC 实现。见灵感[http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:55:11.897

> 无需控制器将自己的模型实例直接交给视图

为什么？这是正常发生的事情，这可能也是你应该做的。模型实例可以在内部存储验证错误，如果控制器将相同的实例传递给视图，那么如何传播此信息的问题就会自行解决。

# haskell - wx haskell 拖放示例

> ID：15867654
> 
> 赞同：5
> 
> 时间：2013-04-07T20:49:48.130
> 
> 标签：haskell, wxhaskell

我正在寻找一个 wx haskell 拖放示例。我还没有找到。

有可用的吗？或提示？

至今：

*   我可以看到一个`on drag`事件（但没有“on drop”）
*   鼠标只是给出一个`left up`目标
*   我看到一些评论，我应该在 object 上附加一个放置目标，但我看不到它是如何被调用的：

    Graphics.UI.WXCore.DragAndDrop

    大号 51

    -- | 创建'DropSource'。然后“dragAndDrop”用这个“DataObject”替换目标的“DataObject”。

    dropSource::DataObject a -> Window b -> IO (DropSource())

*   我看不到 Graphics.UI.WXCore.DragAndDrop 上方的 WX 层在哪里

*   我猜这（太）旧了：[0]：[http ://bb10.com/haskell-wxhaskell-general/2007-08/msg00035.html](http://bb10.com/haskell-wxhaskell-general/2007-08/msg00035.html)

反正现在很模糊……

* * *

编辑：这就是我现在的立场：在拖动时不会被激活，所以也没有 dragAndDrop（在 xinput 中的鼠标上只是为了看看发生了什么）（`dragger`是我从 [O] 得到的），但我没有从中获取事件）

```
--- test where DnD from yinput to xinput
module Main where

import CustoWidget
import Graphics.UI.WX hiding (empty)
import Data.Graph.Inductive
import Data.Maybe
import Control.Monad
import Graphics.UI.WX.Events
import Graphics.UI.WXCore.WxcClassesMZ
import Graphics.UI.WXCore.WxcClassesAL
import Graphics.UI.WXCore.DragAndDrop
import Graphics.UI.WXCore.Events
import Debug.Trace
main
  = start ballsFrame
  -- @next : try andrun start within a state

ballsFrame
  = do

      f      <- frame  [text := "Layout test"]
      p      <- panel  f []                       -- panel for color and tab management.
      ok     <- button p [text := "Ok"]
      can    <- button p [text := "Cancel", on command := infoDialog f "Info" "Pressed 'Cancel'"]
      xinput <- textEntry p [text := "100", alignment := AlignRight]
      yinput <- textEntry p [text := "100", alignment := AlignRight]

      set f [defaultButton := ok
             ,layout := container p $
                        margin 10 $
                        column 5 [boxed "coordinates" (grid 5 5 [[label "x:", hfill $ widget xinput]
                                                                ,[label "y:", hfill $ widget yinput]])
                                 ,floatBottomRight $ row 5 [widget ok,widget can]]
                                 ]
      set xinput [    on mouse := showMe] --, on keyboard := showMeK
      set yinput [ ] --on mouse := showMe, on keyboard := showMeK ]
--      fileDropTarget xinput (\pt file ->  putStrLn $ show file )

      -- prepare the drop source

      textdata <- textDataObjectCreate ""
      drop <- dropTarget xinput textdata

      textdata' <- textDataObjectCreate "text"
      src <- dropSource textdata' yinput

      -- activate on drag the do drag drop
      set yinput [ on drag := onDrag src]
      set ok [ on command := onOk f textdata]

      return ()

onDrag s p =  trace ("on drag " ++ show s ++ " " ++ show p) 
    dragAndDrop s Default (\_ -> return ()) 

onOk f textdata = do

          txt <- textDataObjectGetText textdata
          infoDialog f "resultText" txt
          close f

showMe = \x -> do putStrLn $ show x

dragger win wout = do
          textdata <- textDataObjectCreate ""
          drop <- dropTarget wout textdata
          textdata' <- textDataObjectCreate "text"
          src <- dropSource textdata' win
          dragAndDrop src Default (\_ -> return ())
          txt <- textDataObjectGetText textdata
          infoDialog wout "resultText" txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:31:00.330

概括 ：

*   创建一个 dropTarget 和一个 dropSource ：来自 Graphics.UI.WXCore.DragAndDrop
*   *在源*小部件上使用事件“ `on drag`” ，您将从那里调用Graphics.UI.WXCore.Events*`dragAndDrop`*

 *我的错误和错误假设：

*   我正在寻找目标上的“on drop”事件。不存在，也不需要，因为：
*   当“拖动”时，其他事件被暂停。没有更多`mouse up`或`mouse down`。如果未在 (DnD) 目标上释放，则拖动将中止并恢复正常事件。[0]
*   请注意， textEntry 需要一个焦点才能获得“粘贴”，但是仍然会发生下降。查看控制台上的“拖动激活”。
*   交换的文本是来自 DataObjects 的文本（而不是来自源，如果这将是一个 textEntry。）。请参阅“文本已删除”。

以下代码将事件转储到控制台上，以进行实验：

```
module Main where

import Graphics.UI.WX hiding (empty)

import Data.Maybe
import Control.Monad
import Graphics.UI.WX.Events
import Graphics.UI.WXCore.WxcClassesMZ
--import Graphics.UI.WXCore.WxcClassesAL
import Graphics.UI.WXCore.DragAndDrop
import Graphics.UI.WXCore.Events

main
  = start dndtest

dndtest
  = do

      f      <- frame  [text := "Drag And Drop test"]
      p      <- panel  f []                       
      ok     <- button p [text := "Ok"]
      xinput <- textEntry p [text := "here :"] 
      yinput <- staticText p [text := "drag me"]

      set f [defaultButton := ok
             ,layout := container p $
                        margin 10 $
                        column 5 [boxed "coordinates" (grid 5 5 [[label "source:", hfill $ widget yinput]
                                                                ,[label "target(focus first):", hfill $ widget xinput]
                                                                ])
                                 ,floatBottomRight $ row 5 [widget ok]]
                                 ]

      set xinput [ on enter := onEnter]

      set yinput [ ] 
---------------------------------------------------------
--- meaningful stuff starts here
---------------------------------------------------------

       -- prepare the drop source : create a DataObject and associate it with the source
      textdata' <- textDataObjectCreate "text dropped"
      src <- dropSource textdata' yinput

      -- prepare the drop target: create a DataObject (placeholder here) and associate it with the target
      textdata <- textDataObjectCreate ".."
      drop <- dropTarget xinput textdata 

      -- activate on drag the do dragdrop. this will replace the target dataObject with the source one.
      -- Try with and without giving focus to the textEntry field
      -- Try and source from your favorite editor also (focus first!)
      set yinput [ on drag := onDrag src ]
---------------------------------------------------------
--- meaningful stuff stops here
---------------------------------------------------------

      set ok [ on command := close f ]
      return ()

--onDrag:: Graphics.UI.WXCore.WxcClassTypes.DropSource a -> Point -> IO ()
onDrag s p  =  do
    dragAndDrop s Default (\_ -> return ())
    putStrLn "on Drag activated:"

showMeE :: EventMouse -> IO ()
showMeE (MouseMotion point mod) = putStr ""  --- discard meaningless Motion event
showMeE  e = putStrLn $ show e

onEnter p = putStrLn $ "on Enter:" ++ show p 
```

我已经看到了我可能会探索的其他好东西，比如在拖动过程中更改光标，或者对不同的 drop 变体做出反应。

[0]：[http ://docs.wxwidgets.org/2.8/wx_wxdndoverview.html](http://docs.wxwidgets.org/2.8/wx_wxdndoverview.html)*

# semantic-web - OWL本体设计与protege

> ID：15867656
> 
> 赞同：2
> 
> 时间：2013-04-07T20:49:51.677
> 
> 标签：semantic-web, owl, protege

您好我正在设计一个本体，我需要在其中为名为“Person”的类定义数据属性“SSN”。现在，我正在考虑的一个限制将是唯一性的。也就是说，“Person”类的两个实例不应该具有相同的 SSN。我的问题：如何在 Protege 中定义这种限制？

[http://www.co-ode.org/resources/reference/manchester_syntax/](http://www.co-ode.org/resources/reference/manchester_syntax/)

定义了一些限制，但我认为没有什么适合我的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T13:13:11.177

您只需要将 SSN 属性定义为[inverse-functional](http://www.w3.org/wiki/InverseFunctionalProperty)。逆函数属性意味着无论您在哪里看到给定的范围值，您都知道主题资源必须相同。所以，如果`p`是反函数，你有：

```
R0 p N .
R1 p N . 
```

那么您可以推断出`R0`并且`R1`必须表示同一个人。如果您通过其他一些公理知道`R0`并且`R1`实际上是不同的，那么推理器将报告您的模型不一致。这与您在[开放世界](http://en.wikipedia.org/wiki/Open_world_assumption)知识库中所需的一致性检查非常接近。

# scheme - 方案：我的尾递归代码有什么错误？

> ID：15867659
> 
> 赞同：0
> 
> 时间：2013-04-07T20:50:22.950
> 
> 标签：scheme

```
(define log2_tail
   (lambda (n)
     (letrec ((log2 (lambda (n res)
                       (if (= n 1)
                           res
                           (log2 (quotient (+ n 1) 2) (+ 1 res))))))
        (log2 n 0))))
(log2_tail 3) 
```

上面的代码是方案尾递归代码，用于计算对数基数 2 的整数部分。（实际上我不确定）但是如果我使用参数 3 执行，结果是 2 而不是 1。我猜是因为我使用了 letrec，然后我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:33:56.613

请注意，更清晰的写法是使用 'named let'；这可能使人们更容易专注于功能。像这样。

```
(define (log2_tail n)
  (let log2 ((n n) (res 0))
    (if (= n 1)
        res
        (log2 (quotient n 2)
              (+ 1 res))))) 
```

一个'named let'被编译器翻译成a `letrec`。

# python - 如何将 Numpy 数组切片到边界？

> ID：15867663
> 
> 赞同：8
> 
> 时间：2013-04-07T20:50:40.693
> 
> 标签：python, numpy

我在一个项目中使用 Numpy 和 Python，其中 2D 地图由`ndarray`：

```
map = [[1,2,3,4,5],
       [2,3,4,2,3],
       [2,2,2,1,2],
       [3,2,1,2,3],
       [4,6,5,7,4]]
MAP_WIDTH = 5, MAP_HEIGHT = 5 
```

一个对象有一个元组位置：

```
actor.location = (3,3) 
```

和一个视图范围：

```
actor.range = 2 
```

如何编写函数`actor.view_map(map)`，以便地图返回演员位置周围的区域，直至某个范围。例如（使用上面的地图），

```
range = 1
location = (3, 2)
=>
[[2,3,4],
 [3,4,2],
 [2,2,1]] 
```

但如果演员的范围延伸得太远，我希望地图充满-1：

```
range = 1
location = (1,1)
[[-1,-1,-1],
 [-1, 1, 2],
 [-1, 2, 3]] 
```

最简单的情况是范围为 0，它返回当前正方形：

```
range = 0
location = (1, 2)
[[2]] 
```

如何将我的地图切片到某个边界？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:28:51.450

所以，感谢 Joe Kington，我在我的地图周围添加了一个边框（用 -1 填充）。

这是我的做法，但这可能不是很 Pythonic，因为我刚刚开始使用语言/库：

```
map = numpy.random.randint(10, size=(2 * World.MAP_WIDTH, 2 * World.MAP_HEIGHT))
map[0 : World.MAP_WIDTH / 4, :] = -1
map[7 * World.MAP_WIDTH / 4 : 2 * World.MAP_WIDTH, :] = -1
map[:, 0 : World.MAP_HEIGHT / 4] = -1
map[:, 7 * World.MAP_HEIGHT / 4 : 2 * World.MAP_WIDTH] = -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T11:34:28.627

`Box`这是一个让使用盒子更容易的小课程——

```
from __future__ import division
import numpy as np

class Box:
    """ B = Box( 2d numpy array A, radius=2 )
        B.box( j, k ) is a box A[ jk - 2 : jk + 2 ] clipped to the edges of A
        @askewchan, use np.pad (new in numpy 1.7):
            padA = np.pad( A, pad_width, mode="constant", edge=-1 )
            B = Box( padA, radius )
    """

    def __init__( self, A, radius ):
        self.A = np.asanyarray(A)
        self.radius = radius

    def box( self, j, k ):
        """ b.box( j, k ): square around j, k clipped to the edges of A """
        return self.A[ self.box_slice( j, k )]

    def box_slice( self, j, k ):
        """ square, jk-r : jk+r clipped to A.shape """
            # or np.clip ?
        r = self.radius
        return np.s_[ max( j - r, 0 ) : min( j + r + 1, self.A.shape[0] ),
                       max( k - r, 0 ) : min( k + r + 1, self.A.shape[1] )]

#...............................................................................
if __name__ == "__main__":
    A = np.arange(5*7).reshape((5,7))
    print "A:\n", A
    B = Box( A, radius=2 )
    print "B.box( 0, 0 ):\n", B.box( 0, 0 )
    print "B.box( 0, 1 ):\n", B.box( 0, 1 )
    print "B.box( 1, 2 ):\n", B.box( 1, 2 ) 
```

# python - 访问器和修改器方法 (Python)

> ID：15867664
> 
> 赞同：4
> 
> 时间：2013-04-07T20:50:43.420
> 
> 标签：python, mutators

我正在尝试找出 Python 中的封装。我在 shell 中做了一个简单的小测试，看看它是如何工作的，它不像我预期的那样工作。我无法让它工作。这是我的代码：

```
class Car:
    def __init__(self, carMake, yrMod):
        self.__make = carMake
        self.__yearModel = yrMod
        self.__speed = 0

    #Mutator Methods
    def set_make(self, make):
        self.__make = carMake

    def set_model(self, yrMod):
        self.__yearModel = yrMod

    #def set_speed(self, speed):
        #self.__speed = speed

    #Accessor Methods
    def get_make(self):
        return self.__make

    def get_yearModel(self):
        return self.__yearModel

    def get_speed(self):
        return self.__speed

myCar=Car('Ford', 1968)
myCar2=Car('Nissan', 2012)
myCar.get_make()
'Ford'
myCar.set_make=('Porche')
myCar.get_make()
'Ford' 
```

为什么 myCar.set_make 不把 Ford 改成 Porche？谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T20:54:02.460

使用`myCar.set_make=('Porche')`，您将此成员设置为 Car 类作为`'Porche'`字符串，但您没有调用该方法。

只需删除`=`即可解决它：

```
myCar.set_make('Porche')
myCar.get_make() # Porche 
```

此外，正如@DSM 指出的那样， 的参数存在错误`set_make`：

```
def set_make(self, make):
    self.__make = make # carMake is not defined! 
```

但是，[强烈反对在 Python 中使用 getter 和 setter](https://stackoverflow.com/questions/1554546/when-and-how-to-use-the-builtin-function-property-in-python#1555169)。如果您出于任何原因需要类似的东西，请考虑使用[properties](http://docs.python.org/2/library/functions.html#property)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-18T22:06:43.150

```
new_car = Car(...)
new_car2 = Car(...)

new_car._make = 'Ford'
new_car2.make = 'Jetta'

print new_car._make
print new_car2.make 
```

# c - STM32F4xx - 用 C 写入内存

> ID：15867669
> 
> 赞同：1
> 
> 时间：2013-04-07T20:51:43.993
> 
> 标签：c, memory, keil, peripherals

我在我的 ARM STM32F407VG 上写入内存时遇到问题。我正在使用 Keil 对其进行编程并将其用于嵌入式系统类。我们刚从 ASSEMBLY 转到 C，我仍然熟悉 CMSIS。

赋值本身相当简单：生成 5000 个随机数并将它们放入一个数组中。然后测试这个数组的素数并将它们放在一个数组中。任务本身并不算太糟糕，但我在外围设备方面遇到了麻烦。具体来说，虽然我在编译过程中对 RNG 没有任何问题，但在写入内存时确实遇到了很多问题。

在 ASSEMBLY 中，我们能够直接写入内存，而我们在 C 语言中对 ARM 进行编程的介绍中的幻灯片看起来很相似。它让你声明一个指向你初始化为 FLASH 开头的地址的指针 (0x20000000)。然后，您只需为该地址分配一个数字并存储它。实际上这并没有成功，所以我怀疑我需要配置闪存外围设备。后者有大量我们没有涵盖的命令，当我尝试最基本的命令时，我不断收到大量错误。

我的问题是：我需要配置闪存外围设备还是可以通过声明一个指针并写入它来写入内存？如果不是，我在下面的代码中的 FLASH 外设命令有什么问题，我在哪里可以找到如何配置它的示例？FLASH上的帮助文件很大，我不知道什么是必要的，什么不是。

```
#include "stm32f4_discovery.h"
#include <stm32f4xx.h>

//#define   StoreAddress    (uint32_t*) 0x20000000;

int main(){     
    uint32_t        RandomNumber;
    uint32_t        StoreAddress;

    RCC_AHB2PeriphClockCmd(RCC_AHB2Periph_RNG, ENABLE);
    RNG_Cmd(ENABLE);
    RNG_GetFlagStatus(RNG_FLAG_DRDY);

    StoreAddress = 0x200000F0;
    RandomNumber = RNG_GetRandomNumber();

    FLASH_Unlock();
    FLASH_Status FLASH_ProgramWord(uint32_t StoreAddress, uint32_t RandomNumber);
    FLASH_Lock();
} 
```

非常感谢任何帮助。

谢谢，尤西夫

# haskell - 在 Gloss 中获取鼠标坐标（Haskell）

> ID：15867671
> 
> 赞同：0
> 
> 时间：2013-04-07T20:52:07.817
> 
> 标签：haskell, mouse, coordinates

我正在尝试将拖放功能实现到我的haskell光泽（调度）程序中，但要做到这一点，我需要能够读取鼠标的坐标。我一直在研究如何做到这一点已经好几个小时了，但我还是一无所获，除了在 GLUT 中它是可能的，它是基于光泽的，但是深入到我头上。

我想知道是否已经有一些方法可以在光泽中做到这一点，如果没有，我应该切换到哪个库？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:28:52.683

对于您的服务功能，您需要处理一个事件，例如：

```
serveWorld (EventKey (MouseButton LeftButton) Down xPos yPos) world = ... 
```

或者您可能不想寻找按钮而只是寻找动作？这种情况下`serveWorld`应该处理`EventMotion`。

您可能想查看`gloss-draw`glose-examples 包中的示例程序。

# node.js - Mocha 怎么知道 done 被指定了？

> ID：15867672
> 
> 赞同：5
> 
> 时间：2013-04-07T20:52:12.947
> 
> 标签：node.js, tdd, mocha.js

如果我使用 Mocha 编写异步测试，我需要做的就是在测试函数上指定 done 参数：

```
test('foo', function (done) {...}); 
```

我的问题是：摩卡如何知道是否完成了？

测试函数的定义应该是这样的

```
function test(title, fn) {...}; 
```

摩卡如何检查fn？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T20:56:23.767

它使用`.length`测试函数的属性。

为了说明，在 Node REPL 中试试这个：

```
> (function() {}).length
0
> (function(done) {}).length
1 
```

这是发生此检查的源代码中的实际[行：](https://github.com/visionmedia/mocha/blob/4b05a59ed249095496a29930c975dfccd056e64e/lib/runnable.js#L43)

```
this.async = fn && fn.length; 
```

# html - 面包屑标记 - 主页和当前页面？

> ID：15867675
> 
> 赞同：4
> 
> 时间：2013-04-07T20:52:49.350
> 
> 标签：html, markup, breadcrumbs, rich-snippets

您是否应该为面包屑标记主页和当前页面？我使用 data-vocabulary 只是因为 schema.org 不允许标记标题或 url - 只有一行没有分隔符的文本，除非手动添加。

这是我现在拥有的一个例子。请注意，我标记了主页和当前页面 - 这是正确的还是不应该标记一个或两个？

```
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="home" itemprop="url" href="/"><span itemprop="title"><img alt="Home" height="30" src="/images/trans.gif" width="16"></span></a></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/services/"><span itemprop="title">Services</a></span></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/service/widget/"><span itemprop="title">Widget</a></span></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/service/widget/features.htm"><span itemprop="title">Features</span></a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:01:45.910

我已经测试了以下似乎可行的方法，我认为您只是`</span></a>`错误地使用了几个结束标签。

```
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="home" itemprop="url" href="/"><span itemprop="title"><img alt="Home" height="30" src="/images/trans.gif" width="16"></span></a></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/services/"><span itemprop="title">Services</span></a></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/service/widget/"><span itemprop="title">Widget</span></a></li>
<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/service/widget/features.htm"><span itemprop="title">Features</span></a></li> 
```

您可能已经阅读过它，但您可以在此处阅读有关面包屑的更多信息：http: [//support.google.com/webmasters/bin/answer.py](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=185417) ?hl=en&answer= 185417“微数据”链接就是一个很好的例子。

# python - 使用 Django 1.5 和 IPython 获取 NameError

> ID：15867678
> 
> 赞同：5
> 
> 时间：2013-04-07T20:53:10.210
> 
> 标签：python, django, django-forms, ipython

我正在运行 Django 1.5.1、Python 2.7.2 和 IPython 0.13.2。如果我从我的 Django 项目目录中执行“python ./manage.py shell”，我会收到以下错误：

```
from django import forms
class CommentForm(forms.Form):
    name = forms.CharField()

NameError: name 'forms' is not defined. 
```

我知道表单被定义为当它执行“dir（forms）”时我可以看到它。我注意到这个错误只发生在我在 REPL 中运行 iPython 时。如果我启动 REPL 并且只使用普通的旧 Python 解释器，则不会发生错误。

有没有其他人遇到过这个问题？如果是这样，您知道为什么会发生这种情况以及是否有解决方法吗？

我应该补充一点，我过去在 REPL 中创建类时遇到过问题，直到我在类中创建了一个元类并定义了一个“app_label”变量。在这种情况下，这并没有什么不同。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T21:04:53.703

django 1.5 不能正确启动 IPython。这已[在 master](https://github.com/django/django/commit/3570ff734e93f493e023b912c9a97101f605f7f5)中修复，但该修复未向后移植到 1.5.1。如果您手动将该补丁应用到 core/management/commands/shell.py，IPython 应该可以按预期工作。

# java - 具有不同名称和相同内容的文件的哈希函数

> ID：15867681
> 
> 赞同：0
> 
> 时间：2013-04-07T20:53:41.777
> 
> 标签：java, hash

我有 2 个名称不同但内容相同的文件。当我创建这些文件的流并使用该`FileInputStream.HashCode();`方法查找哈希值时，我收到不同的值

如果可能的话，有人可以为我提供正确的 API，以便 Java 中的哈希方法接收相同内容的文件的相同哈希值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:30:42.403

听起来[加密哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)可以满足您的需求。

[Apache Commons Codec](http://commons.apache.org/proper/commons-codec/)库有一个用于创建加密哈希值（又名消息摘要）的实用程序类，称为[DigestUtils](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html)。例如，该`sha256`方法接受`InputStream`并返回一个 SHA-256 消息摘要作为字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:58:35.823

FileInputStream 没有名为 hashCode() 的方法。它使用通用的[Object.hasCode()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)方法。

> 返回对象的哈希码值。支持这种方法是为了有利于哈希表，例如 HashMap 提供的那些。
> 
> hashCode 的一般合约是：
> 
> *   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
> *   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
> *   如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。
> 
> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T20:58:44.330

`FileInputStream.HashCode()`继承内部地址`hashCode`。`Object`它不考虑内容。
此外，如果您想比较 2 个文件是否相等，为什么要使用哈希函数？
由于冲突，两个不同的字符串可能具有相同的哈希码。与文件的内容相同。

如果可以`FileUtils.contentEquals(file1, file2);`使用第三方库（Commons IO），则可以使用

# java - 在javaCV中识别颜色

> ID：15867687
> 
> 赞同：0
> 
> 时间：2013-04-07T20:54:00.407
> 
> 标签：java, javacv

我正在尝试使用 javaCV 使用网络摄像头识别对象的颜色，并使 NXT 移动机器人根据检测到的颜色对象执行特定任务。

我无法识别物体的颜色。（基本上，我想区分蓝色和红色，并打印出检测到的颜色。）

谁能帮我 ？提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:45:08.850

我建议`BufferedImage`从捕获中创建，并获取每个像素 RGB。一旦你到达那个点，只需使用这些函数来获取 RGB 值。

```
public static int getAlpha(int rgb) {
    return (rgb >> 24) & 0xFF;
}

public static int getRed(int rgb) {
    return (rgb >> 16) & 0xFF;
}

public static int getGreen(int rgb) {
    return (rgb >> 8) & 0xFF;
}

public static int getBlue(int rgb) {
    return rgb & 0xFF;
} 
```

# django - 如何在循环内的特定（第一个元素）上放置一个类？

> ID：15867692
> 
> 赞同：2
> 
> 时间：2013-04-07T20:54:21.577
> 
> 标签：django, twitter-bootstrap

在 Twitter Bootstrap Carousel Slide 中，需要一个名为“active”的类来设置所有幻灯片首先使用哪个图像，然后初始化循环。但是，如果我的对象（我想在幻灯片中显示）处于循环中，我该如何设置这个类？

```
<div id="myCarousel" class="carousel slide img-polaroid">
  <div class="carousel-inner">

    {% for slide in slides_list %}
    <div class="item"> <!-- Here goes the class="active" -->
      <img src="{{slide.imagem.url}}" alt="{{slide.imagem.titulo}}" />
      <div class="carousel-caption slider">
        <h2>{{slide.titulo}}</h2>
        <p>{{slide.mensagem}}</p>
      </div><!--/carousel-caption-->
    </div><!--/item-->
    {% endfor %}

  </div><!--/carousel-inner-->

  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>

</div><!--/myCarousel--> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T20:55:35.087

```
{% for slide in slides_list %}
<div class="item{% if forloop.first %} active{% endif %}">
  <img src="{{slide.imagem.url}}" alt="{{slide.imagem.titulo}}" />
  <div class="carousel-caption slider">
    <h2>{{slide.titulo}}</h2>
    <p>{{slide.mensagem}}</p>
  </div><!--/carousel-caption-->
</div><!--/item-->
{% endfor %} 
```

[`for`标签和变量`forloop`docs](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

# java - JavaCV/OpenCV：cvLoadImage 不工作

> ID：15867696
> 
> 赞同：4
> 
> 时间：2013-04-07T20:54:31.370
> 
> 标签：java, javacv

我安装了 JavaCV/OpenCV 库，但基本示例代码有问题。

根据我看过的几个例子，这段代码应该加载一个图像：

```
IplImage image = cvLoadImage("C:\\img.jpg"); 
```

但是，当我运行它时，我得到一个“找不到符号”错误。

由于这是我第一次使用它，我不确定我是否搞砸了安装。

根据最新的 JavaCV 自述文件，我确实拥有正确版本的 OpenCV。我还导入了所有 JavaCV jar 文件。据我所知，我也正确设置了所有路径。

有谁知道问题是什么？

编辑：

完整代码：

```
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import java.io.File;

public class demo {

    public static void main(String[] args) 
    {
        IplImage image = cvLoadImage("C:\\img.jpg");

        final CanvasFrame canvas = new CanvasFrame("Demo");
        canvas.showImage(image);
        canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    }

} 
```

当我尝试运行它时出错：

线程“主”java.lang.RuntimeException 中的异常：无法编译的源代码 - 错误的符号类型：javacv.demo.main(demo.java:17) 处的 cvLoadImage

Java 结果：1

似乎它声称 cvLoadImage 不将字符串作为参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:23:29.050

我为您找到的四处走走是通过 ImageIO 加载图像并稍后将其传递给`IplImage`

例如：

```
 BufferedImage img =  ImageIO.read(new File("C:\\img.jpg") );
 IplImage origImg = IplImage.createFrom(img); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-22T23:16:37.423

这解决了我的问题：`import static org.bytedeco.javacpp.opencv_imgcodecs.*;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-20T20:42:37.527

您必须添加此导入语句：
`import static org.bytedeco.javacpp.opencv_imgcodecs.cvLoadImage;` 这是必需的，以便`cvLoadImage`可以在不使用类名的情况下使用静态方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-02T16:45:41.650

你必须`import com.googlecode.javacv.cpp.opencv_highgui.*;`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-24T21:26:15.300

使用 javacv 0,9 你必须`import static org.bytedeco.javacpp.opencv_highgui.*;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-18T12:34:34.687

然后我得到了同样的错误，我导入了以下包，问题解决了。

`import static com.googlecode.javacv.cpp.opencv_highgui.*;`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-27T04:30:43.407

这可能已经过时了，但对于那些像我一样偶然发现这个问题的人来说，这是我解决它的方法以及原因：

第一个 OP 的错误：线程“main”中的异常 java.lang.RuntimeException：无法编译的源代码 - 错误的 sym 类型：javacv.demo.main（demo.java:17）处的 cvLoadImage

这表明编译器找不到您尝试调用的 cvLoadImage 方法。

cvLoadImage 是JavaCPP 下的静态方法。具体来说，它是 opencv_imgcodecs 类下的静态方法。

要解决这个问题，必须首先指定 opencv_imgcodecs 类的导入。

这可以通过添加导入来完成：
**import static org.bytedeco.javacpp.opencv_imgcodecs.cvLoadImage;**

这反过来会导致 opencv_imgcodecs 类连同它的静态方法和其他函数在您的类中可用。

我希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-14T07:01:18.180

最近遇到了同样的问题。如果您使用的是 javacv-0.10（目前更新），请手动导入这个：

```
import static org.bytedeco.javacpp.opencv_highgui.*; 
```

但是项目的JRE源要高于1.5

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-18T15:38:42.663

就我而言，问题发生在刮刀处于调试模式时。尝试在正常模式下运行。

# c# - 从后台任务更新 Metro App UI ObservableCollection

> ID：15867697
> 
> 赞同：0
> 
> 时间：2013-04-07T20:54:31.430
> 
> 标签：c#, windows-runtime, microsoft-metro, background-process

是否可以在 Metro App UI 和 Metro App UI之间进行双向通信`BackgroundTask`？

所需的功能如下：

*   如果 Metro App 已关闭/暂停，`BackgroundTask`请继续执行所需的操作。
*   如果 Metro App 已打开/恢复，`BackgroundTask`则继续执行所需的操作，但还会通知 Metro App，新数据可用。
*   Metro App 然后使用新数据更新其 UI。Metro App UI 允许用户采取某些操作。
*   这些动作都`Queued`在记忆中。`BackgroundTask`监视此内存`Queue`并处理这些操作。

请告知这是否可能，或提出满足这些要求的设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:13:58.527

只需使用背景`thread`或`Task`

```
Task.Factory.StartNew(() =>
{
   // Download data 
}).ContinueWith(t => 
{
   // Update UI
}, Scheduler.FromCurrentSynchronizationContext()); 
```

同步上下文中的`ContinueWith`很重要，因为您会从不同的线程更新一个异常`ObservableCollection`，您也可以使用`Dispatcher`来在 UI 线程上执行代码块。

* * *

上面的文字仍然显示原始答案：

[此处](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/hh977051.aspx)链接的 MSDN 后台任务指南明确指出：

1.  后台任务根本不应该更新 UI，除了通知等系统 UI
2.  后台任务应通过持久存储与应用程序通信

您的问题需要通过为您的应用程序维护“新数据”存储来解决，后台工作人员将下载数据并将其写入此处，您的应用程序在恢复/打开时将检查并删除该数据，从而允许您更新 UI - 存储行为作为您的中间队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:32:11.623

在这里找到了对BackgroundTasks的详细了解：

[背景任务简介](http://www.microsoft.com/en-us/download/details.aspx?id=27411)

这含蓄地回答了我的问题。

# c - C函数作为参数？

> ID：15867700
> 
> 赞同：1
> 
> 时间：2013-04-07T20:54:45.027
> 
> 标签：c

所以我从一个例子中提取了我的问题的一部分代码，但它没有按我的预期工作。第一个模块是我第一次尝试使用该函数的地方，第二个是函数的定义，在第三个模块中是标题中的函数（相应的代码在它的位置），第 4 个模块是我对这些函数的一些解释。谁能帮我理解有什么问题？

第一个模块问题：这一行有多个标记

*   从不兼容的指针类型传递“create”的参数 1 [默认启用]
*   从不兼容的指针类型传递“create”的参数 3 [默认启用]
*   从不兼容的指针类型传递“create”的参数 2 [默认启用]

> repo->TList = create(cmpTrans, cpyT, delT);

第二模块

```
Vector* create(CmpFun cmp, CpyFun cpy, DelFun del)
{
    Vector* v = (Vector*)malloc(sizeof(Vector));
    v->len = 0;
    v->capacity = 10;
    v->elems = (TElem)malloc(10*sizeof(TElem));
    v->cmp = cmp;
    v->del = del;
    v->cpy = cpy;
    return v;
} 
```

第三模块

```
transaction* cpyT(transaction* t);
void delT(transaction* t);
int cmpTrans(transaction* s1, transaction* s2);
    /*
     * Creates a copy of a transaction
     * Input: t - pointer to transaction
     * Output:  t' - a copy of transaction t
     *          t'->day = t->day; s'->type = t->type; t'->desc = t->desc; t'->amount = t->amount;
     *          * Deallocates the memory pointed to by the given instance
     * Deallocates the memory pointed to by the given instance
     * Input: t - pointer to transaction
     * Output: memory pointed to by t is deallocated
     * Input: s1, s2 - pointers to transaction
     * Output:  1 - if all the attributes of the 2 transactions coincide
     *          0 - otherwise
     */ 
```

模块四：

```
 typedef void* TElem;
/*
 * Pointer to a comparison function for two generic elements
 */
typedef int (*CmpFun)(TElem, TElem);

/*
 * Pointer to a function that clones (copies) a generic element
 */
typedef TElem (*CpyFun)(TElem);

/*
 * Pointer to a function that deletes (deallocates) a generic element
 */
typedef void (*DelFun)(TElem); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:30:17.840

您的函数指针 typedefs 所有接受/返回`TElem`类型，这意味着`void *`. 您正在声明接受/返回`transaction *`类型的函数。这使得您从这些函数中创建的函数指针与您创建的 typedef 不兼容：

```
 transaction *(*)(transaction *) != TElem (*)(TElem)
int (*)(transaction *, transaction *) != int (*)(TElem, TElem)
              void (*)(transaction *) != void (*)(TElem) 
```

您可能会感到困惑，因为在 C 中，`void *`与其他指针类型之间的转换是隐式的。但是，函数指针类型之间的转换（其中一种带`void *`参数，另一种不带参数）不是。

要修复它，您需要重写`cpyT`, `delT`, 并`cmpTrans`使用匹配的签名：

```
TElem cpyT(TElem t);
void delT(TElem t);
int cmpTrans(TElem s1, TElem s2); 
```

或者，您可以在调用时通过类型转换来强制执行`create`：

```
repo->TList = create((CmpFun)cmpTrans, (CpyFun)cpyT, (DelFun)delT); 
```

# android - 如何为任何 android 应用程序都可以访问的 android 建立数据库

> ID：15867705
> 
> 赞同：-1
> 
> 时间：2013-04-07T20:55:37.203
> 
> 标签：android, database, sqlite

我是android编程的新手。现在，我想为我的应用程序构建一个具有巨大索引号的数据库（应用程序只会从中读取数据，但不会写入任何内容）。如我所见，在 Eclipse 中构建数据库不是一个好的解决方案。无论如何从应用程序（项目）外部构建数据库，并将其放入应用程序项目文件中的文件（可能）中，并使用相关的APK构建这个应用程序和数据库？

任何解决方案也可以，这只是一个想法。（我更喜欢 SQLite）

感谢你的付出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:02:39.093

我将 SQLiteStudio 用于我的应用程序。你可以从这里下载它： [SQLite Studio](http://sqlitestudio.pl/?act=download)。这是一个很好的教程，如何在 android 中 [使用自己的 SQLite 数据库：在 Android 应用程序中使用自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

此外，您可以尝试使用 SQLiteManager（Firefox 插件）或 SQLiteBrowser。您可以将 SQLiteBrowser 插件添加到 Eclipse 并从 DDMS 查看数据库内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:03:53.153

您可以在我的 PC 上使用桌面 SQLite 编辑器来构建数据库，然后将其作为资源包含在您的应用程序中。

谷歌会带你去大量的 SQLite 编辑器。我使用 SQLiteBrowser。

在将 PC 移至 Android 之前，我会在 PC 上完成所有数据库设计和初始加载/测试。它更容易和更快。

# c++ - 在 C++ 中思考，内联函数特性？

> ID：15867707
> 
> 赞同：0
> 
> 时间：2013-04-07T20:55:48.877
> 
> 标签：c++, inline

以下代码来自 Thinking in C++。作者提到“由于 operator[] 是内联的，因此您可以使用这种方法来保证不会发生数组边界违规，然后删除运输代码的 require()。” 这里提到了内联函数的什么特性？谢谢！

```
#include "../require.h"
#include <iostream>
using namespace std;

template<class T>
class Array {
  enum { size = 100 };
  T A[size];
public:
  T& operator[](int index) {
    require(index >= 0 && index < size,
      "Index out of range");
    return A[index];
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:03:33.227

作者提到了`inline`在调用处要扩展的函数的特性，就好像你写了它们的主体来代替调用一样。这保证不会损失效率——即使是与在现代硬件上调用函数相关的微小效率损失。此外，当索引运算符内联扩展时，编译器可能会更好地优化代码，因为优化器会知道函数内部代码的性质。

就`require`从运输代码中删除 而言，您需要在当前实现中手动执行此操作。您还可以使用[条件编译](http://en.wikipedia.org/wiki/C_preprocessor#Conditional_compilation)来删除生产代码中的边界检查。

# c - sprintf()：只扫描浮点数组中的第一个值

> ID：15867712
> 
> 赞同：0
> 
> 时间：2013-04-07T20:56:29.453
> 
> 标签：c

我可以将浮点数组转换为字符串吗？我不在乎点是否是字符串值。我只需要将数字分成字符串。

到目前为止，我已经做到了

```
void H(float *suma, int k){
int i=0;
char str[200]  = "";

    sprintf(str, "%.2f", *suma);

for(i=0;i<strlen(suma);i++) {
    printf("%c", str[i]);
}
} 
```

但它只转换我的浮点数组中的第一个值。我希望我说清楚了。如果不是这里是我的问题的一个例子。

```
array[0]= 123.45;
array[1]= 543.21; 
```

但我需要它

```
 string[0]='1';
  string[1]='2';
  string[2]='3';
  string[3]='.';
  string[4]='4';
  string[5]='5';
  string[6]='5';
  string[7]='4'; 
```

ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:04:31.613

这是一个解决方案：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void H(float *suma, int k)
{
    int i,j;
    char str[200]  = "";
    for(j=0; j<k; j++)
    {
        sprintf(str, "%.2f", suma[j]);

        for(i=0;i<strlen(str);i++)
        {
            printf("%c", str[i]);
        }
        printf("\n");
    }
}

int main ()
{
    float b[]={123.432,213.432,12.2,31.3,13.4};
    H(b,5);
    system("pause");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:06:17.130

如果您想以字符串格式打印所有数组编号的列表，这里是解决方案（我假设 k 是浮点数组的长度）：

```
void H(float *suma, int k){
    int i=0, j;
    char str[200]  = "";

    for(j=0;j<k;j++){
        sprintf(str, "%.2f", *(suma+j));
        for(i=0;str[i]!='\0';i++) {
            printf("%c\n", str[i]);
        }
    }
} 
```

如果您希望将所有字符串都放在一个字符串中，可以使用 strcat() 来连接字符串。

# node.js - 尝试安装 express 的 node.js 错误

> ID：15867713
> 
> 赞同：1
> 
> 时间：2013-04-07T20:56:39.970
> 
> 标签：node.js, express, npm

我试图通过 npm 安装 express：

```
npm install express -g 
```

但它不想工作:(

系统是Windows XP

npm-debug.log 说：

```
3672 error Error: read ECONNRESET

3672 error     at errnoException (net.js:878:11)

3672 error     at TCP.onread (net.js:539:19)

3673 error If you need help, you may report this log at:

3673 error     <http://github.com/isaacs/npm/issues>

3673 error or email it to:

3673 error     <npm-@googlegroups.com>

3674 error System Windows_NT 5.1.2600

3675 error command "E:\\nodejs\\\\node.exe" "E:\\nodejs\\node_modules\\npm\\bin\\npm-
cli.js" "install" "express" "-g"

3676 error cwd C:\DOCUME~1\Admin

3677 error node -v v0.10.2

3678 error npm -v 1.2.16

3679 error syscall read

3680 error code ECONNRESET

3681 error errno ECONNRESET

3682 verbose exit [ 1, true ] 
```

# python - 这个运算符“_”在 Python 中的名称是什么？

> ID：15867715
> 
> 赞同：12
> 
> 时间：2013-04-07T20:56:45.430
> 
> 标签：python

我正在阅读[Python 的隐藏功能，](https://stackoverflow.com/questions/101268/hidden-features-of-python?page=5&tab=oldest#tab-top)我遇到了这个[答案](https://stackoverflow.com/a/3254039/1031955)。

直接从帖子：

> 使用交互式 shell 时，“_”包含最后打印项的值：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> _
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> 
```

**这个运营商叫什么名字？**我在文档上找不到它，而且我从未听说过它（以及其他语言）。值得使用吗？

*PS。我想知道它的名字，因为我想看看这个功能是如何实现的，并搜索其他语言是否有这个很棒的功能。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T20:58:54.393

它既不是运算符也不是函数。它是一个*变量*，会自动分配由 shell 执行的每个表达式的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T21:01:30.113

看起来这个角色有几个功能。它用于全局变量之前，因此它们不会与常规变量混合。它也可以在循环中作为一次性使用，以指示不会使用该变量。

**在这种情况下，下划线 (_) 在输入解释器时将返回最后执行的语句的值。**

欲了解更多信息

[Python中单个下划线“_”变量的目的是什么？](https://stackoverflow.com/questions/5893163/underscore-in-python)

[对象名称前的单下划线和双下划线是什么意思？](https://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python)

[python的下划线](https://stackoverflow.com/questions/5000928/the-underscore-of-python)

# facebook-graph-api - Facebook 长寿命令牌不再过期？

> ID：15867716
> 
> 赞同：1
> 
> 时间：2013-04-07T20:56:47.423
> 
> 标签：facebook-graph-api

只是我还是 Facebook API 的长期访问令牌不再过期？

当我们将短期令牌交换为 60 天的长期令牌时，我们曾经获得一个“过期”参数。但是几天后，我们不再收到这个了。

另外，当我们查看这些令牌的调试器（[https://developers.facebook.com/tools/debug/access_token](https://developers.facebook.com/tools/debug/access_token)）时，它会显示“过期：从不”。

我找不到有关这些令牌现在是否真的永不过期的官方文档。任何的想法？

谢谢，

斯蒂芬妮

**更新**

页面访问令牌（manage_page 权限）不会过期：“通过使用长期用户访问令牌，查询 [User ID]/accounts 端点现在将为用户管理的页面提供不会过期的页面访问令牌。” [https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token](https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:20:09.407

它是 Facebook 页面访问令牌吗？如果是，这里有一些很好的答案：[Facebook Page Access Tokens - Do these expires?](https://stackoverflow.com/questions/7696372/facebook-page-access-tokens-do-these-expire)

# jquery - 主干 html 选择值

> ID：15867721
> 
> 赞同：6
> 
> 时间：2013-04-07T20:57:31.667
> 
> 标签：jquery, html, backbone.js

我有一个绑定到模型的表单：用户表单，由 Backbone.View.extend 表示，它具有：

```
model:user 
```

视图内部：

```
events: {
   'click #payment' : 'updatePayment'
} 
```

其中 payment 是一个 html 选择：

```
<div class="span2" id="payment">
    <select class="span12">
         <option value="paypal">paypal</option>
         <option value="check">check</option>
    </select>
</div>

updatePayment: function() {
    var payment = this.$("#payment");
    console.log(payment);
} 
```

可悲的是，付款没有价值。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T00:57:10.767

很难说……但似乎你想要这个：

```
events: {
   'change .span12' : 'updatePayment' // listen for change of <select> element.
},

updatePayment: function(event) {
    var payment = event.target.value;
    console.log(payment); // print 'paypal' or 'check'.
} 
```

# java - “this()”方法是什么意思？

> ID：15867722
> 
> 赞同：47
> 
> 时间：2013-04-07T20:57:33.990
> 
> 标签：java, constructor, this, constructor-overloading

我遇到了这段代码，有这一行我不明白它的含义或它在做什么。

```
public Digraph(In in) {
    this(in.readInt()); 
    int E = in.readInt();
    for (int i = 0; i < E; i++) {
        int v = in.readInt();
        int w = in.readInt();
        addEdge(v, w); 
    }
} 
```

我明白什么`this.method()`或是`this.variable`，但什么是`this()`？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-07T21:02:05.523

这是构造函数重载：

```
public class Diagraph {

    public Diagraph(int n) {
       // Constructor code
    }

    public Digraph(In in) {
      this(in.readInt()); // Calls the constructor above. 
      int E = in.readInt();
      for (int i = 0; i < E; i++) {
         int v = in.readInt();
         int w = in.readInt();
         addEdge(v, w); 
      }
   }
} 
```

您可以通过缺少返回类型来判断此代码​​是构造函数而不是方法。`super()`这与调用构造函数的第一行以初始化扩展类非常相似。您应该在构造函数的第一行调用`this()`（或任何其他重载`this()`），从而避免构造函数代码重复。

您还可以查看这篇文章：[Java 中的构造函数重载 - 最佳实践](https://stackoverflow.com/questions/1182153/constructor-overloading-in-java-best-practice)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-07T20:59:11.750

使用 this() 作为这样的函数，本质上是调用类的构造函数。这允许您在一个构造函数中进行所有通用初始化，并在其他构造函数中进行特化。因此，例如，在这段代码中，调用`this(in.readInt())`是调用有一个 int 参数的 Digraph 构造函数。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-07T21:01:38.277

此代码片段是一个构造函数。

此调用`this`调用同一类的另一个构造函数

```
public App(int input) {
}

public App(String input) {
    this(Integer.parseInt(input));
} 
```

在上面的示例中，我们有一个带有 a 的构造函数`int`和一个带有 a 的构造函数`String`。接受 a 的构造函数将 a`String`转换`String`为 an `int`，然后委托给`int`构造函数。

请注意，对另一个构造函数或超类构造函数 ( `super()`) 的调用必须是构造函数的第一行。

也许看看[这个](http://www.javabeginner.com/learn-java/java-constructors)关于构造函数重载的更详细的解释。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-10T23:06:10.217

几乎一样

```
public class Test {
    public Test(int i) { /*construct*/ }

    public Test(int i, String s){ this(i);  /*construct*/ }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-07T21:00:07.313

具有 int 参数的 Digraph 类的另一个构造函数。

```
Digraph(int param) { /*  */ } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-07T21:34:35.420

调用`this`本质上是调用类Constructor。例如，如果您正在扩展某些东西，而不是与 一起`add(JComponent)`，您可以这样做：`this.add(JComponent).`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-08T05:13:21.973

构造函数重载：

前任：

```
public class Test{

    Test(){
        this(10);  // calling constructor with one parameter 
        System.out.println("This is Default Constructor");
    }

    Test(int number1){
        this(10,20);   // calling constructor with two parameter
        System.out.println("This is Parametrized Constructor with one argument "+number1);
    }

    Test(int number1,int number2){
        System.out.println("This is Parametrized  Constructor  with two argument"+number1+" , "+number2);
    }

    public static void main(String args[]){
        Test t = new Test();
        // first default constructor,then constructor with 1 parameter , then constructor with 2 parameters will be called 
    }

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-08T10:25:30.997

`this();`是构造函数，用于调用类中的另一个构造函数，例如：-

```
class A{
  public A(int,int)
   { this(1.3,2.7);-->this will call default constructor
    //code
   }
 public A()
   {
     //code
   }
 public A(float,float)
   { this();-->this will call default type constructor
    //code
   }
} 
```

**注意：** 我没有`this()`在默认构造函数中使用构造函数，因为它会导致死锁状态。

希望对你有帮助：）

# c# - 从文件完整路径中检索没有扩展名的文件名

> ID：15867723
> 
> 赞同：0
> 
> 时间：2013-04-07T20:57:41.837
> 
> 标签：c#, string, replace, filenames

我有一个文件列表，需要从文件完整路径中检索文件名（无扩展名）。

我在命令提示符下生成了一个列表打印（故意在里面包含路径）；我需要用其他东西替换路径。

即：[这是带有生成内容示例的 *.txt 文件]

```
C:\folder\files\img1.png  
C:\folder\files\img2.png  
C:\folder\files\img3.png  
C:\folder\files\img4.png  
...etc... 
```

我试图实现的目标：Img1.png。或 Img1

我正在使用下面的代码，但我还不知道如何正确使用它。

【原码】

```
File.WriteAllText("Path", Regex.Replace(File.ReadAllText("Path"), "[Pattern]", "Replacement")); 
```

[相同的代码；但修改]

```
File.WriteAllText(@"C:\Folder\Files\print.txt", Regex.Replace(File.ReadAllText(@"C:\Folder\Files\print.txt"), "[C:\folder\files\]", "Copy ")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:03:00.740

您不能只使用[GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)并提供字符串值吗？您可以将输出附加到字符串生成器，然后重写文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:03:23.720

这就是你可以使用它的方式。在这种情况下，您不需要使用 RegEx，因为您要替换的字符串已明确定义：

```
File.WriteAllText(@"C:\Folder\Files\print.txt", File.ReadAllText(@"C:\Folder\Files\print.txt").Replace(@"C:\folder\files\", "Copy ")); 
```

# java - JAX-RS 表单验证 - 突出显示输入文本字段并显示验证消息

> ID：15867725
> 
> 赞同：2
> 
> 时间：2013-04-07T20:58:07.780
> 
> 标签：java, forms, constraints, jax-rs, bean-validation

我有一个示例 CRUD 应用程序，使用的应用程序是 Wine Cellar 应用程序。您可以搜索葡萄酒、将葡萄酒添加到您的酒窖、更新和删除葡萄酒。我[使用 JAX-RS 和 Jersey 从带有 jQ​​uery 和 Java 的 RESTful 服务中](http://coenraets.org/blog/2011/12/restful-services-with-jquery-and-java-using-jax-rs-and-jersey/)得到它。

我修改了 Wine 类以包含验证约束。

```
@NotNull(message='Name must have a value')
private String name;
@NotNull(message='Grapes must have a value')
private String grapes; 
```

如果用户创建/更新葡萄酒，如果名称和葡萄字段为空，则会引发错误。我所有的验证消息都以 json 格式返回给浏览器。

```
public Wine create(Wine wine) {...}
public Wine update(Wine wine) {...} 
```

如果只抛出一个错误，我想向用户显示正确的消息并突出显示该字段。

如何获取触发错误的空字段（名称或 ID）以及正确的验证消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T20:37:30.067

对不一致或不明确表示抱歉。

我使用 Web 应用程序异常映射器来处理异常。它检查错误是由 Web 应用程序异常还是约束违规异常产生的。

```
if (exception instanceof ConstraintViolationException) {
   Set<ErrorResponse> errorResponses = new HashSet<>();
   for (ConstraintViolation violation : ((ConstraintViolationException) exception).getConstraintViolations()) {
   errorResponses.add(new ErrorResponse(violation.getPropertyPath().toString(),violation.getMessage()));
   }
   builder.entity(new WebApplicationError(errorResponses));
} 
```

另外，我检查了是否是 JsonMapping 异常

```
if (exception instanceof JsonMappingException) {
           ResourceBundle bundle = ResourceBundle.getBundle("ValidationMessages");
           Set<ErrorResponse> errorResponses = new HashSet<>();

       for(Reference ref : ((JsonMappingException) exception).getPath()) {
          String className = ref.getFrom().getClass().getName()
                                        .substring(ref.getFrom().getClass().getName()
                                        .lastIndexOf(".") + 1).toLowerCase();                        
          String key = "the.key";
          try {
               message = bundle.getString(key);
          } catch (MissingResourceException e) {
               logger.error(e.getMessage());
          }
               errorResponses.add(new ErrorResponse(ref.getFieldName(), message));
        }
            builder.entity(new WebApplicationError(errorResponses));
    } 
```

[JsonMapping 异常](http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/map/JsonMappingException.html)

[违反约束](http://docs.oracle.com/javaee/6/api/javax/validation/ConstraintViolation.html)

# c# - 如果引用与预期相反，则调试编译器

> ID：15867726
> 
> 赞同：0
> 
> 时间：2013-04-07T20:58:09.290
> 
> 标签：c#, winforms, visual-studio-2010, .net-3.5

我有几个调试语句，我用编译器引用进行了包装。

```
#if DEBUG
    Debug.WriteLine("Debug statement");
#endif 
```

但是，在 Debug 配置中，DEBUG 似乎等于 false，而在 Release DEBUG 中似乎等于 true。

这只发生在看起来像单个项目的项目中，我成功地从其他项目中获取调试语句。

这是我认为 .csproj 文件的相关部分

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    <PlatformTarget>x86</PlatformTarget>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <PlatformTarget>x86</PlatformTarget>
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup> 
```

这对我来说看起来非常好，但我仍然有这种奇怪的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:52:02.633

没错，问题是我正在检查 x86 平台的设置（定义了 DEBUG 常量）。

然后我针对没有定义它们的 AnyCPU 平台进行构建。

完全是我的错...

# ios - uiview 子类在第一次调用 setneedsdisplay 时显示为黑色矩形，但在那之后就可以了

> ID：15867727
> 
> 赞同：1
> 
> 时间：2013-04-07T20:58:15.283
> 
> 标签：ios, uiview, drawrect, setneedsdisplay

我有一个覆盖 drawrect 的自定义 UIView 子类。视图从数据源获取数据，并将其中的一些信息传递给它的委托视图控制器，以将其处理成需要绘制的字符串。第一次调用 setneedsdisplay 时，视图显示为黑色矩形，但如果第二次调用它就可以正常工作。所有的帧大小和位置都已正确设置，因此我确信代理和数据源从一开始就已正确设置。这是有问题的drawrect代码：

```
- (void)drawRect:(CGRect)rect
{

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 2.0);
    CGColorSpaceRef colorSpace=CGColorSpaceCreateDeviceRGB();
    CGFloat components[] = {0, 0, 0, 1.0};
    CGColorRef color = CGColorCreate(colorSpace, components);
    ;
    //CGContextStrokeRect(context, CGRectMake(1, 1, self.frame.size.width-1.0, self.frame.size.height-1.0));

    CGContextMoveToPoint(context, 0, [_delegate denominatorPoint:self].y);
        if ([_delegate numeratorBiggerThanDenominator:self]==YES) 
    CGContextAddLineToPoint(context,[[_delegate numeratorString:self]sizeWithFont:[_delegate fontToDrawWith:self]].width , [_delegate denominatorPoint:self].y);
        else
            CGContextAddLineToPoint(context,[[_delegate denominatorString:self]sizeWithFont:[_delegate fontToDrawWith:self]].width , [_delegate denominatorPoint:self].y);
    if ([_delegate hasAFraction:self]==YES) {

    CGContextSetStrokeColorWithColor(context, color);

    CGContextStrokePath(context);

    }

    CGColorSpaceRelease(colorSpace);
    CGColorRelease(color);

    self.backgroundColor=[UIColor clearColor];

    [[_delegate numeratorString:self] drawAtPoint:[_delegate numeratorPoint:self] withFont:[_delegate fontToDrawWith:self]];
    NSLog([_delegate numeratorString:self]);
    if ([_delegate hasAFraction:self]==YES) 
        [[_delegate denominatorString:self] drawAtPoint:[_delegate denominatorPoint:self] withFont:[_delegate fontToDrawWith:self]];
    [[_delegate Variable:self] drawAtPoint:[_delegate variablePoint:self] withFont:[_delegate fontToDrawWith:self]];
    if ([_delegate hasAParenthesTerm:self]==YES) {
        //NSLog(@"parentheses being drawn");
        NSString* openParentheses=@" (";
        [openParentheses drawAtPoint:[_delegate openParenthesesPoint:self] withFont:[_delegate fontToDrawWith:self]];
        NSString* closedParentheses=@")";
        [closedParentheses drawAtPoint:[_delegate closeParenthesesPoint:self] withFont:[_delegate fontToDrawWith:self]];
    }

} 
```

让我知道是否有其他代码可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:14:11.293

您是否尝试`self.backgroundColor = [UIColor clearColor];`过使用 init 方法？

You should only need to run that line once anyway, and I could imagine that calling it in the middle of the draw method might lead to an issue (and in the second call to drawRect, the backgroundColor would already be set to the clearColor, so UIView could ignore it, making your issue go away with the second setNeedsDisplay call)

# java - package-private 的 Java 默认类访问类似于 public

> ID：15867728
> 
> 赞同：0
> 
> 时间：2013-04-07T20:58:23.807
> 
> 标签：java, class, access-modifiers

正如许多地方所说，一个类产生包私有访问级别，这意味着这样的类只能被同一个包的其他人访问。我对包了解不多，但我想知道您在文件开头添加“包 x”就足以提出我的问题。

我制作了一个带有类成分的文件。另一个文件包含

```
public class cooking{ 
    public static void main(String[] args) {..... 
```

任何地方都没有包声明。尽管如此，我的程序还是成功编译了这两个文件，并且也这样运行。我错过了什么？烹饪课不应该看不到成分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:03:53.047

您的 IDE（如 netbeans 或 eclipse）编译代码，因为这两个类都在同一个项目中，并且它“知道”您指的是那个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:06:28.850

类可以在没有导入语句的情况下看到同一目录中的其他类。包是组织代码的方法，本质上只是应用程序文件夹中的目录。所有类都可以在同一个类中看到其他类，而无需导入，这是在定义不同的包时，例如您的结构：

```
src
 |
 +- Cooking.java
 |
 +- utilities
     |
     +- Ingredient.java 
```

当然，您的成分文件将以开头，`package utilities;`如果您尝试从烹饪中访问它，您会收到错误消息，除非您`import utilities.Cooking;`在文件中有。包私有只是意味着包（或文件夹）之外的类无法查看或访问文件或其包私有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T21:07:56.560

if you do not add a package statement to java classes, then those classes are in the same package = the so-called "default" package. and therefore those classes have access to each other no matter if you define the classes as public or not.

```
public class A 
```

= this class A is visible in all packages

```
class B 
```

= this class B is visible only by classes in the same package as B

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T21:13:16.237

As laid out in the Java Language specification your classes are part of an (the) unnamed package, that's why they can see each other.

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.4.2)

# html - 引导程序中表单下的中心按钮

> ID：15867730
> 
> 赞同：12
> 
> 时间：2013-04-07T20:58:35.417
> 
> 标签：html, css, button, twitter-bootstrap, center

我对 Bootstrap 有一些问题。我通过使用使表单和按钮居中`span6 offset3`，但现在不知道如何在此表单下居中按钮。我试过了，`text-align: center`但它仍然在左边。

```
<div class="container">
    <div class="row">
        <div class="span6 offset3">
            <form>
                <input class="input-xxlarge" type="text" placeholder="Email..">
                <p style="line-height: 70px; text-align: center;"><button type="submit" class="btn">Confirm</button></p>
            </form>
        </div>
    </div>
</div> 
```

![](https://i.stack.imgur.com/aJ8VZ.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-07T21:03:22.117

删除该`<p>`标签并在其中添加按钮，`<div class="form-actions">`如下所示：

```
<div class="form-actions">
    <button type="submit" class="btn">Confirm</button>
</div> 
```

然后增加 CSS 类：

```
.form-actions {
    margin: 0;
    background-color: transparent;
    text-align: center;
} 
```

这是一个 JS Bin 演示：http: [//jsbin.com/ijozof/2](http://jsbin.com/ijozof/2)

* * *

`form-actions`在此处查找`Bootstrap`文档：

[http://twitter.github.io/bootstrap/base-css.html#buttons](http://twitter.github.io/bootstrap/base-css.html#buttons)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-23T18:07:46.320

使用 Bootstrap 3，您可以使用 'text-center' 样式属性。

```
<div class="col-md-3 text-center"> 
  <button id="button" name="button" class="btn btn-primary">Press Me!</button> 
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-15T08:33:52.727

如果您使用的是**Bootstrap 4**，请尝试以下操作：

```
<div class="mx-auto text-center">
    <button id="button" name="button" class="btn btn-primary">Press Me!</button>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T21:11:09.903

`Width:100%`并且`text-align:center`会根据我的经验工作

```
<p style="display:block; line-height: 70px; width:100%; text-align:center; margin:0 auto;"><button type="submit" class="btn">Confirm</button></p> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-02T14:02:29.933

尝试添加此类

```
class="pager"

<p class="pager" style="line-height: 70px;">
    <button type="submit" class="btn">Confirm</button>
</p> 
```

我在其中尝试了我的`<div class=pager><button etc etc></div>` ，效果很好

请参阅[http://getbootstrap.com/components/](http://getbootstrap.com/components/)查看分页 -> 寻呼机

这看起来像正确的引导类以将其居中，`text-align: center;`用于文本而不是图像和块等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-11T16:57:38.227

我这样做`<center></center>`

```
<div class="form-actions">
            <center>
                    <button type="submit" class="submit btn btn-primary ">
                        Sign In <i class="icon-angle-right"></i>
                    </button>
            </center>
</div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-23T12:17:11.423

你可以用这个

```
<button type="submit" class="btn btn-primary btn-block w-50 mx-auto">Search</button> 
```

看起来像这样 [![在此处输入图像描述](https://i.stack.imgur.com/7dJE9.png)](https://i.stack.imgur.com/7dJE9.png)

完整的表格代码 -

```
<form id="submit">
    <input type="text" class="form-control mt-5" id="search-city" 
           placeholder="Search City">
    <button type="submit" class="btn btn-primary mt-3 btn-sm btn-block w-50 
            mx-auto">Search</button>
   </form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-22T14:17:31.700

使用Bootstrap，正确的方法是使用offset类。使用数学来确定左偏移。示例：您希望移动设备上的按钮全宽，但宽度为 1/3，并以平板电脑、台式机、大型台式机为中心。

因此，在 12 个“引导”列中，您使用 4 进行偏移，4 用于按钮，然后 4 右侧为空白。

看看有没有用！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-03T23:00:27.420

使用 Bootstrap，您可以简单地使用 class `text-center`：

```
<div class="container">
    <div class="row">
        <form>
            <input class="input-xxlarge" type="text" placeholder="Email..">
        </form>

        <div class="text-center">
            <button type="submit" class="btn">Confirm</button>
        </div>
    </div>
</div> 
```

[演示](https://jsfiddle.net/legionar/mxouvr6n/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-07T21:02:41.907

尝试给予

默认宽度，以块显示并以边距居中：0自动；

像这样：

```
<p style="display:block; line-height: 70px; width:200px; margin:0 auto;"><button type="submit" class="btn">Confirm</button></p> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-11-27T11:32:56.980

它完全可以试试这个：

```
<div class="button pull-left" style="padding-left:40%;" > 
```

# java - GridBagLayout 中组件的大小不正确

> ID：15867742
> 
> 赞同：0
> 
> 时间：2013-04-07T20:59:22.950
> 
> 标签：java, swing, resize, gridbaglayout, preferredsize

我正在用Java制作一个简单的界面。我想在顶部有一个设置大小为 200*20 的 JButton，在它的正下方有一个封装 JTextArea 的 JScrollPane。此字段的大小应该是放置它的 JPanel 的剩余宽度和高度（但最小为 640*480），并且在使窗口变大/变小时必须调整大小（直到其最小大小）。

我尝试使用 GridBagLayout 进行此操作，但这似乎不起作用。有人知道我该如何解决这个问题吗？

```
 //Initialize components
    Dimension minSize = new Dimension(640, 480);
    info = new JTextArea("hello");
    info.setEditable(false);
    JScrollPane scrollPane = new JScrollPane(info);
    scrollPane.setMinimumSize(minSize);
    JButton update = new JButton("update");
    JPanel jp = new JPanel();
    jp.setLayout(new GridBagLayout());
    GridBagConstraints grid = new GridBagConstraints();

    //add components
    grid.fill = GridBagConstraints.NONE;
    grid.anchor = GridBagConstraints.NORTHWEST;
    grid.gridheight = 1;
    grid.gridwidth = 1;
    grid.weighty = 1.0;
    grid.weightx = 1.0;
    grid.gridx = 0;
    grid.gridy = 0;

    jp.add(update, grid);

    grid.fill = GridBagConstraints.BOTH;
    grid.gridx = 0;
    grid.gridy = 1;
    grid.weighty = 15;
    grid.gridheight = 15;
    grid.gridwidth = 15;

    jp.add(scrollPane, grid);

    this.add(jp,BorderLayout.NORTH); 
```

这就是它现在的样子：![enter image description here](https://i.stack.imgur.com/B5cKp.png)正如我之前所描述的，这不是我想要的；TextArea 需要填满整个屏幕（所以它需要更高）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:15:23.253

`this.add( jp, BorderLayout.CENTER );`

如[文档中所述](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)：

> The components are laid out according to their preferred sizes and the constraints of the container's size. The NORTH and SOUTH components may be stretched horizontally; the EAST and WEST components may be stretched vertically; **the CENTER component may stretch both horizontally and vertically to fill any space left over**.

# php - 在多个页面之间循环（刷新）？

> ID：15867744
> 
> 赞同：0
> 
> 时间：2013-04-07T20:59:31.883
> 
> 标签：php, javascript, refresh

我有一组具有以下名称的页面....

*   更新1.php
*   更新2.php
*   更新3.php
*   更新4.php
*   更新5.php
*   更新6.php
*   更新7.php

目前，我在 Chrome 上打开了所有 7 个，并使用以下代码每 30 分钟刷新一次。

```
<body onload="setInterval('window.location.reload()', 1800000);"> 
```

我想把所有这些页面粘在一起，这样我只需要打开一页。有没有办法让页面每 5 分钟刷新一次，但每次加载不同的部分？

我正在考虑做这样的事情，但这似乎是一种不好的方式......

```
$refresh = $_GET['refresh'];

if (!isset($refresh)) { //update1 stuff; //reload page with &refresh=2 }
elseif ($refresh == 1) { //update1 stuff; //reload page with &refresh=2 }
elseif ($refresh == 2) { //update2 stuff; //reload page with &refresh=3 }    
elseif etc..... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:03:48.787

在输出页面 html 代码的 php 代码中，尝试如下操作：

```
<?php echo ($_GET['refresh'] % 7) + 1; ?>.php // Name of next page

?refresh=<?php echo ($_GET['refresh'] % 7) + 1; ?>"; // Name of next page + 1

// All together
<body onload="setTimeout(function() { window.location.href = 'update<?php echo ($_GET['refresh'] % 7) + 1; ?>.php?refresh=<?php echo ($_GET['refresh'] % 7) + 1; ?>';}, 1800000);"> 
```

这将在指定的时间间隔后打开带有递增数字的新页面。[模运算](http://en.wikipedia.org/wiki/Modulo_operation)帮助我们以一致的循环遍历页面。

参考

*   [`window.location.href`](https://developer.mozilla.org/en-US/docs/DOM/window.location)
*   [`setTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:07:15.107

You can Put All Scripts in one page and can use

`<meta http-equiv="refresh" content="1800" />` in `head`

to refersh browser every after `30 Minutes`

# c - 如何使用 malloc 为非指针对象（例如互斥体）分配空间？

> ID：15867748
> 
> 赞同：2
> 
> 时间：2013-04-07T20:59:59.663
> 
> 标签：c, malloc, mutex

我是 C 新手，一直在努力获取指针等。我正在学校进行一项练习，我们应该在其中分配所有需要的内存，包括互斥体。据我所知， malloc 总是返回一个指向某些内存的指针（除非它失败）。如果是这种情况，您将如何 malloc 诸如互斥锁之类的东西，它基本上不是指针？

在作业中，非常明确地指出，我们也必须为互斥锁执行此操作，但我无法在任何地方找到如何执行此操作。

最后，我不希望任何人担心“给我答案”，因为这不是我被分配的真正问题；相反，这是我们应该做的内存监控的必要条件；我只是不确定正确的语法应该是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T21:05:42.207

您可以拥有指向任何类型的指针。

您的互斥锁可能是这样定义的：`struct mutex_t {..}`. 如果是这样，您可以有一个指向它的指针：`struct mutex_t *my_mutex`您以后可以使用它来存储 malloc 返回的指针。看这个例子：

```
struct mutex_t *my_mutex;
my_mutex = malloc(sizeof(struct mutex_t)); 
```

第二行开始`my_mutex`指向指向互斥体结构大小的一些内存的指针。现在，您正在使用的库很可能定义了初始化它的函数，例如`void mutex_init(struct mutex_t*)`，您可以使用这些函数在 malloc 保留的内存中实际构造互斥锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:07:59.423

`malloc`将始终为您提供指向内存以用于对象的指针。但是，如果您习惯使用在堆栈上自动分配的对象，您可以随时使用指针，然后根据需要取消引用。

例如，如果您习惯：

```
mutex_t bar;
lock_mutex(bar);
unlock_mutex(bar); 
```

相反，你会做

```
mutex_t *bar = malloc(sizeof(mutex_t));
lock_mutex(*bar);
unlock_mutex(*bar);
free(bar); 
```

但是，我熟悉的所有 C 线程库都需要指针参数。例如，使用 pthreads，您可能会执行类似的操作

```
pthread_mutex_t foo;
pthread_mutex_init(&foo, NULL);
pthread_mutex_lock(&foo);
pthread_mutex_destroy(&foo); 
```

这`&foo`意味着您实际上已经将指针传递给`foo`，所以如果`foo`是指针，只需删除引用运算符。

```
pthread_mutex_t *foo = malloc(sizeof(pthread_mutex_t));
pthread_mutex_init(foo, NULL);
pthread_mutex_lock(foo);
pthread_mutex_unlock(foo);
pthread_mutex_destroy(foo);
free(foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:07:36.123

```
As far as I am aware, malloc always returns a pointer to some memory (unless it fails). If this is the case, how would you malloc for something like a mutex, which is fundamentally not a pointer? 
```

指针是指向*事物*的指针；与任何其他对象一样，互斥体可以有一个指向它的指针。如果你有某种类型`mutex_t`，那么就有一种类型`mutex_t*`。所以，

```
mutex_t* pmutex = malloc(sizeof *pmutex); 
```

分配互斥体所需的字节数，并将指向这些字节的指针存储在`pmutex`. 请注意这与

```
mutex_t mutex; 
```

这里，`mutex`是一个`mutex_t`，而不是一个指针。访问互斥锁的字段将是

```
pmutex->field
mutex.field 
```

引用一个整体`mutex_t`：

```
*pmutex
mutex 
```

参考地址`mutex_t`：

```
pmutex
&mutex 
```

# javascript - 一组链接的JQuery加载功能一个接一个？

> ID：15867750
> 
> 赞同：0
> 
> 时间：2013-04-07T21:00:06.953
> 
> 标签：javascript, jquery, sleep, jquery-load

我有一个`ul`包含许多链接。当使用 jQuery 加载这些链接时，它会同时呈现它们。尝试了以下操作后，如何一一加载它们：

js：

```
$('#publish').click(function() {
    $('#get_links li').
        each(function() {
            $(this).load('test.php',{'post':$(this).text()});
            $(this).html("<i class='icon-spin icon-spinner'></i>Loading");

            ///NEED TOSLEEP UNTILL $.load finish..
        }
        );
     }
); 
```

我怎样才能让 .each 循环直到 .load 完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:08:09.160

您可以`$().load`为此使用回调：

```
$('#publish').click(function(){
    var $link = $('#get_links li').first();

    var loadLink = function() {
        $link.load('test.php', { post: $link.text() }, function() {
            // once loading is done, grab the next link...
            $link = $link.next();
            // ... and load it if we found one
            if ($link.length) loadLink();
        }).html('<i class="icon-spin icon-spinner"></i>Loading');
    };

    // load the first link
    loadLink();
}); 
```

# opengl - 片段着色器输入干扰纹理访问

> ID：15867753
> 
> 赞同：2
> 
> 时间：2013-04-07T21:00:15.193
> 
> 标签：opengl, glsl, jogl

我正在使用顶点、几何和片段着色器来渲染带有阴影的场景：

**顶点着色器：**

```
#version 400
layout(location=0) in vec3 position;
out vec4 vShadowCoord;
uniform mat4 modelViewProjectionMatrix;
uniform mat4 shadowMatrix;
void main(void)
{
    vShadowCoord = shadowMatrix * vec4(position, 1.0);
    gl_Position = modelViewProjectionMatrix * vec4(position, 1.0);
} 
```

**几何着色器：**

```
#version 400
layout(triangles_adjacency) in;
layout(triangle_strip, max_vertices = 3) out;
in vec4 vShadowCoord[];
out vec4 gShadowCoord;
uniform vec3 lightPosition;

void main()
{
    gShadowCoord = vShadowCoord[0];
    gl_Position = gl_in[0].gl_Position;
    EmitVertex();

    gShadowCoord = vShadowCoord[2];
    gl_Position = gl_in[2].gl_Position;
    EmitVertex();

    gShadowCoord = vShadowCoord[4];
    gl_Position = gl_in[4].gl_Position;
    EmitVertex();

    EndPrimitive();
} 
```

**片段着色器：**

```
#version 400
in vec4 shadowCoord;
out vec4 fColor;
uniform sampler2DShadow shadowMap;

void main(void)
{
    float shadow = textureProj(shadowMap, shadowCoord);
    fColor = (shadow > 0.0) ? vec4(1.0, 1.0, 1.0, 1.0) : vec4(0.1, 0.1, 0.1, 1.0);
} 
```

这成功地用阴影渲染了我的场景。我场景中的立方体在我希望它们出现的地方被照亮并处于阴影中。当我尝试从几何着色器中传递两种颜色中的一种时，就会出现问题。当我这样做时，我的条件语句总是评估为假。

**几何着色器：**

```
#version 400
layout(triangles_adjacency) in;
layout(triangle_strip, max_vertices = 3) out;
in vec4 vShadowCoord[];
out vec4 gShadowCoord; // Added
out vec4 gColorLit;    // Added
uniform vec3 lightPosition;

void main()
{
    gShadowCoord = vShadowCoord[0];
    gColorLit = vec4(1.0, 1.0, 1.0, 1.0); // Added
    gl_Position = gl_in[0].gl_Position;
    EmitVertex();

    gShadowCoord = vShadowCoord[2];
    gColorLit = vec4(1.0, 1.0, 1.0, 1.0); // Added
    gl_Position = gl_in[2].gl_Position;
    EmitVertex();

    gShadowCoord = vShadowCoord[4];
    gColorLit = vec4(1.0, 1.0, 1.0, 1.0); // Added
    gl_Position = gl_in[4].gl_Position;
    EmitVertex();

    EndPrimitive();
} 
```

片段着色器：

```
#version 400
in vec4 shadowCoord;
in vec4 gColorLit; // Added
out vec4 fColor;
uniform sampler2DShadow shadowMap;

void main(void)
{
    float shadow = textureProj(shadowMap, shadowCoord);
    // Changed
    fColor = (shadow > 0.0) ? gColorLit : vec4(0.1, 0.1, 0.1, 1.0);
} 
```

什么可能导致这种情况发生？

这发生在 Ubuntu 12.04 和 Windows 7 上

我的着色器中的一些代码可能看起来没有必要，但那是因为我在排除故障时已经尽可能多地删除了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:57:12.007

There's no reason for your second shaders to successfully *link*. Your geometry shader states that it's writing:

```
out vec4 gShadowCoord; // Added 
```

But your fragment shader is expecting:

```
in vec4 shadowCoord; 
```

You should have gotten a linker error.

# c# - 只读给定 txt 文件中的最后 x 行

> ID：15867758
> 
> 赞同：4
> 
> 时间：2013-04-07T21:01:15.303
> 
> 标签：c#

目前我正在使用 File.ReadAllText() 读取文件内容，但现在我需要读取 txt 文件中的最后 x 行。我怎样才能做到这一点？

内容`myfile.txt`

```
line1content 
line2content
line3content
line4content 

string contentOfLastTwoLines = ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T21:09:58.937

What about this

```
List <string> text = File.ReadLines("file.txt").Reverse().Take(2).ToList() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T21:07:26.610

用于`Queue<string>`存储最后`X`一行并将第一行替换为当前读取的：

```
int x = 4;   // number of lines you want to get

var buffor = new Queue<string>(x);

var file = new StreamReader("Input.txt");

while (!file.EndOfStream)
{
    string line = file.ReadLine();

    if (buffor.Count >= x)
        buffor.Dequeue();
    buffor.Enqueue(line);
}

string[] lastLines = buffor.ToArray();

string contentOfLastLines = String.Join(Environment.NewLine, lastLines); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T21:08:34.963

您可以使用`ReadLines`避免将整个文件读入内存，如下所示：

```
const int neededLines = 5;
var lines = new List<String>();
foreach (var s in File.ReadLines("c:\\myfile.txt")) {
    lines.Add(s);
    if (lines.Count > neededLines) {
        lines.RemoveAt(0);
    }
} 
```

Once the `for` loop is finished, the `lines` list contains up to the last `neededLines` of text from the file. Of course if the file does not contain as many lines as required, fewer lines will be placed in the `lines` list.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T21:04:02.733

将这些行读入一个数组，然后提取最后两个：

```
string[] lines = File.ReadAllLines();
string last2 = lines[lines.Count-2] + Environment.NewLine + lines[lines.Count-1]; 
```

假设您的文件相当小，那么阅读整个内容并丢弃不需要的内容会更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T21:03:56.493

由于读取文件是线性完成的，通常是逐行完成的。只需逐行阅读并记住最后两行（如果需要，您可以使用队列或其他东西......或者只是两个字符串变量）。当您到达 EOF 时，您将获得最后两行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-07T21:08:46.953

You want to read the file backwards using ReverseLineReader:

How to read a text file reversely with iterator in C#

Then run .Take(2) on it. var lines = new ReverseLineReader(filename); var last = lines.Take(2);

OR

Use a System.IO.StreamReader.

```
string line1, line2;

using(StreamReader reader = new StreamReader("myFile.txt")) {
    line1 = reader.ReadLine();
    line2 = reader.ReadLine();
} 
```

# javascript - 测试一个复选框是否被选中

> ID：15867772
> 
> 赞同：0
> 
> 时间：2013-04-07T21:02:27.973
> 
> 标签：javascript

我知道答案可能正盯着我看，但是我如何确定是否选中了复选框？

```
var sa = document.getElementById("sa").checked;
var test = function () {
    if (sa) {}
    alert("true");
} else {}
alert("false");
}

document.getElementById("button").addEventListener("click", function () {
    test();
}, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:18:05.430

问题是，如果选中该复选框，您就不会检查运行时。您在页面加载时执行此操作，仅此而已。

您需要将代码修改为：

```
var test = function () {
    if (document.getElementById("sa").checked) {
        alert("true");
    }
    else {
        alert("false");
    }
}

document.getElementById("button").addEventListener("click", function () {
    test();
}, false); 
```

# java - 尽管在早期迭代中运行，但程序似乎冻结了

> ID：15867773
> 
> 赞同：0
> 
> 时间：2013-04-07T21:02:33.807
> 
> 标签：java, performance, math, freeze, halt

我正在编写一个程序，通过找到超稳态值，然后使用这些超稳态值的比率来计算常数，使用物流方程计算费根鲍姆常数。

我对几乎所有值都使用 BigDecimals，以便在计算常数期间保持必要的精度水平。

我正在从以下文件第 30-35 页上的 C++ 代码改编我的代码：[http ://webcache.googleusercontent.com/search?q=cache:xabTioRiF0IJ:home.simula.no/~logg/pub/reports/ chaos_hw1.ps.gz+&cd=21&hl=en&ct=clnk&gl=us](http://webcache.googleusercontent.com/search?q=cache:xabTioRiF0IJ:home.simula.no/~logg/pub/reports/chaos_hw1.ps.gz+&cd=21&hl=en&ct=clnk&gl=us)

我怀疑这个程序对我的问题有什么影响。我运行该程序，它似乎正在工作。我得到的前 4 个超稳定值和前 2 个 d 的输出是预期的，但是在显示这 4 行之后，程序似乎只是停止了。我没有例外，但即使等待 30 分钟后，也不会输出更多计算。我无法弄清楚究竟是什么原因造成的，因为每一行的计算时间应该大致相同，但显然不是。这是我的输出：

```
Feigenbaum constant calculation (using superstable points):
j       a           d
-----------------------------------------------------
1       2.0         N/A
2   3.23606797749979        N/A
4   3.4985616993277016  4.708943013540503
8   3.554640862768825   4.680770998010695 
```

这是我的代码：

```
import java.math.*;

// If there is a stable cycle, the iterates of 1/2 converge to the cycle. 
// This was proved by Fatou and Julia. 
// (What's special about x = 1/2 is that it is the critical point, the point at which the logistic map's derivative is 0.)
// Source: http://classes.yale.edu/fractals/chaos/Cycles/LogisticCycles/CycleGeneology.html

public class Feigenbaum4
{
public static BigDecimal r[] = new BigDecimal[19];
public static int iter = 0;
public static int iter1 = 20; // Iterations for tolerance level 1
public static int iter2 = 10; // Iterations for tolerance level 2
public static BigDecimal tol1 = new BigDecimal("2E-31"); // Tolerance for convergence level 1
public static BigDecimal tol2 = new BigDecimal("2E-27"); // Tolerance for convergence level 2
public static BigDecimal step = new BigDecimal("0.01"); // step when looking for second superstable a
public static BigDecimal x0 = new BigDecimal(".5");
public static BigDecimal aZero = new BigDecimal("2.0");

public static void main(String [] args)
{
    System.out.println("Feigenbaum constant calculation (using superstable points):");
    System.out.println("j\t\ta\t\t\td");
    System.out.println("-----------------------------------------------------");

    int n = 20;
    if (FindFirstTwo())
    {
        FindRoots(n);
    }

}

public static BigDecimal F(BigDecimal a, BigDecimal x)
{
    BigDecimal temp = new BigDecimal("1");
    temp = temp.subtract(x);
    BigDecimal ans = (a.multiply(x.multiply(temp)));
    return ans;
}

public static BigDecimal Dfdx(BigDecimal a, BigDecimal x)
{
    BigDecimal ans = (a.subtract(x.multiply(a.multiply(new BigDecimal("2")))));
    return ans;
}

public static BigDecimal Dfda(BigDecimal x)
{
    BigDecimal temp = new BigDecimal("1");
    temp = temp.subtract(x);
    BigDecimal ans = (x.multiply(temp));
    return ans;
}

public static BigDecimal NewtonStep(BigDecimal a, BigDecimal x, int n)
{
    // This function returns the Newton step for finding the root, a,
    // of fn(x,a) - x = 0 for a fixed x = X

    BigDecimal fval = F(a, x);
    BigDecimal dval = Dfda(x);

    for (int i = 1; i < n; i++)
    {
        dval = Dfda(fval).add(Dfdx(a, fval).multiply(dval));
        fval = F(a, fval);
    }

    BigDecimal ans = fval.subtract(x);
    ans = ans.divide(dval, MathContext.DECIMAL64);
    ans = ans.negate();
    return ans;

}

public static BigDecimal Root(BigDecimal a0, int n)
{
    // Find the root a of fn(x,a) - x = 0 for fixed x = X
    // with Newton’s method. The initial guess is a0.
    //
    // On return iter is the number of iterations if
    // the root was found. If not, iter is -1.

    BigDecimal a = a0;
    BigDecimal a_old = a0;
    BigDecimal ans;

    // First iter1 iterations with a stricter criterion,
    // tol1 < tol2

    for (iter = 0; iter < iter1; iter++)
    {
        a = a.add(NewtonStep(a, x0, n));

        // check for convergence
        BigDecimal temp = a.subtract(a_old);
        temp = temp.divide(a_old, MathContext.DECIMAL64);
        ans = temp.abs();

        if (ans.compareTo(tol1) < 0)
        {
            return a;
        }

        a_old = a;
    }

    // If this doesn't work, do another iter2 iterations 
    // with the larger tolerance tol2
    for (; iter < (iter1 + iter2); iter++)
    {
        a = a.add(NewtonStep(a, x0, n));

        // check for convergence
        BigDecimal temp = a.subtract(a_old);
        temp = temp.divide(a_old, MathContext.DECIMAL64);
        ans = temp.abs();

        if (ans.compareTo(tol2) < 0)
        {
            return a;
        }

        a_old = a;
    }

    BigDecimal temp2 = a.subtract(a_old);
    temp2 = temp2.divide(a_old, MathContext.DECIMAL64);
    ans = temp2.abs();

    // If not out at this point, iterations did not converge
    System.out.println("Error: Iterations did not converge,");
    System.out.println("residual = " + ans.toString());

    iter = -1;

    return a;
}

public static boolean FindFirstTwo()
{
    BigDecimal guess = aZero;
    BigDecimal r0;
    BigDecimal r1;

    while (true)
    {
        r0 = Root(guess, 1);
        r1 = Root(guess, 2);

        if (iter == -1)
        {
            System.out.println("Error: Unable to find first two superstable orbits");
            return false;
        }

        BigDecimal temp = r0.add(tol1.multiply(new BigDecimal ("2")));
        if (temp.compareTo(r1) < 0)
        {
            System.out.println("1\t\t" + r0.doubleValue() + "\t\t\tN/A");
            System.out.println("2\t" + r1.doubleValue() + "\t\tN/A");

            r[0] = r0;
            r[1] = r1;

            return true;
        }

        guess = guess.add(step);

    }

}

public static void FindRoots(int n)
{
    int n1 = 4;
    BigDecimal delta = new BigDecimal(4.0);
    BigDecimal guess;

    for (int i = 2; i < n; i++)
    {
        // Computation

        BigDecimal temp = (r[i-1].subtract(r[i-2])).divide(delta, MathContext.DECIMAL64);
        guess = r[i-1].add(temp);
        r[i] = Root(guess, n1);
        BigDecimal temp2 = r[i-1].subtract(r[i-2]);
        BigDecimal temp3 = r[i].subtract(r[i-1]);
        delta = temp2.divide(temp3, MathContext.DECIMAL64);

        // Output

        System.out.println(n1 + "\t" + r[i].doubleValue() + "\t" + delta.doubleValue());

        // Step to next superstable orbit

        n1 = n1 * 2;
    }
} 
```

}

编辑：Phil Steitz 的回答基本上解决了我的问题。我查看了一些线程转储，在进行了一些研究以尝试理解它们并使用调试信息编译我的程序后，我发现主线程正在停止：

```
dval = Dfda(fval).add(Dfdx(a, fval).multiply(dval)); 
```

as Phil Steit's said, by using

```
MathContext.DECIMAL128 
```

in not only this line:

```
 dval = Dfda(fval).add(Dfdx(a, fval).multiply(dval)); 
```

but also in my multiplication operations in the methods F, Dfda, and Dfdx, I was able to get my code to work properly.

I used DECIMAL128 because the smaller precision made the calculation non-functional, because I compare them to such low numbers for the tolerance check.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:38:47.413

I think that what is going on here is that when n is larger than about 10, your `NewtonStep` method becomes very slow because none of your `multiply` invocations limit the scale by providing a MathContext. When no MathContext is provided, the result of a multiply gets the sum of the scales of the multiplicands. With the code above, the scales of `dval` and `fval` inside the for loop in NewtonStep get very large for large n, resulting in very slow multiplications in this method and the methods that it calls. Try specifying MathContext.DECIMAL64 (or something else) in the multiply activations as you do for the divides.

# php - 安装 SilverStripe 评论模块后的 PHP 致命错误

> ID：15867777
> 
> 赞同：0
> 
> 时间：2013-04-07T21:02:48.410
> 
> 标签：php, postgresql, silverstripe

[我使用 SS 3.0.5 从http://www.silverstripe.org/comments-module/](http://www.silverstripe.org/comments-module/) (v 1.0.0.)安装了评论模块。在 Ubuntu 上使用 PostgreSQL 作为数据库。我将提取的文件夹复制到我的 SS 实例的根文件夹并进行了重建，但没有收到任何错误消息。之后我收到“服务器错误 - 抱歉，处理您的请求时出现问题。” 以及在我的error.log 中这篇文章底部显示的错误消息。

任何帮助，将不胜感激。

马库斯

```
[Mon Apr 08 08:26:45 2013] [error] [client 127.0.0.1] PHP Fatal error: Couldn't 
run query: SELECT DISTINCT "SiteTree_Live"."ClassName", "SiteTree_Live"."Create 
d", "SiteTree_Live"."LastEdited", "SiteTree_Live"."URLSegment", "SiteTree_Live". 
"Title", "SiteTree_Live"."MenuTitle", "SiteTree_Live"."Content", "SiteTree_Live" 
."MetaTitle", "SiteTree_Live"."MetaDescription", "SiteTree_Live"."MetaKeywords", 
"SiteTree_Live"."ExtraMeta", "SiteTree_Live"."ShowInMenus", "SiteTree_Live"."Sh
owInSearch", "SiteTree_Live"."Sort", "SiteTree_Live"."HasBrokenFile", "SiteTree_ 
Live"."HasBrokenLink", "SiteTree_Live"."ReportClass", "SiteTree_Live"."CanViewTy 
pe", "SiteTree_Live"."CanEditType", "SiteTree_Live"."ProvideComments", "SiteTree 
_Live"."Version", "SiteTree_Live"."ParentID", "SiteTree_Live"."ID", CASE WHEN "S 
iteTree_Live"."ClassName" IS NOT NULL THEN "SiteTree_Live"."ClassName" ELSE 'Sit 
eTree' END AS "RecordClassName" FROM "SiteTree_Live" WHERE ("URLSegment" = 'them 
es' AND "ParentID" = 0) ORDER BY "SiteTree_Live"."Sort" ASC LIMIT 1 | ERROR: co 
lumn SiteTree_Live.ProvideComments does not exist\nLINE 1 in /var/www/aep-ss/fra 
mework/model/Database.php on line 693 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:20:33.260

[可从http://www.silverstripe.org/comments-module/](http://www.silverstripe.org/comments-module/)下载的 SilverStripe 评论模块的 1.0.0 版本在其 postgreSQL 支持方面存在错误。通过以下步骤使用 composer 进行安装将安装当前的固定版本（来源：[https](https://github.com/silverstripe/silverstripe-comments/blob/master/docs/en/Installing.md) ://github.com/silverstripe/silverstripe-comments/blob/master/docs/en/Installing.md ）：

编辑项目范围的 composer.json 文件，如下所示；在“要求”块中添加：

```
"silverstripe/comments": "*" 
```

然后在项目的根目录中运行：

```
> composer update silverstripe/comments 
```

# php - JMS DI Extra Bundle：如何仅在依赖项存在时才注入依赖项

> ID：15867778
> 
> 赞同：3
> 
> 时间：2013-04-07T21:02:49.267
> 
> 标签：php, symfony, dependency-injection

我正在使用 JMS DI 注入带有注释的服务：

```
use JMS\DiExtraBundle\Annotation as DI;
/**
 * @DI\Service("foo.bar.service")
 */
class myClass
{
    /**
    * @DI\Inject("debug.stopwatch")
    * @var $stopWatch \Symfony\Component\Stopwatch\Stopwatch
    */
    public $stopWatch;

    /**
    * @DI\Inject("serializer")
    * @var $serializer \JMS\Serializer\Serializer
    */
    public $serializer;

    public function toto()
    {
       if (isset($this->stopwatch)) {
         $this->stopWatch->start("init");
       }
    }
} 
```

但是 StopWatch 仅在 Dev Env 中可用，因此在 prod 中运行时：

```
The service "foo.bar.service" has a dependency on a non-existent service "debug.stopwatch".' in... 
```

我的问题：**如何在课堂上正确注入秒表服务？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:07:33.987

使依赖项[可选](http://symfony.com/doc/master/book/service_container.html#making-references-optional)：

```
@DI\Inject("debug.stopwatch", required=false) 
```

# mysql - 在不同的 MySQL 表中选择一个连接到其他几个的东西

> ID：15867780
> 
> 赞同：1
> 
> 时间：2013-04-07T21:02:56.273
> 
> 标签：mysql, sql, join

假设我有一个由 id、customer_id、order_date 和其他内容组成的订单表。我还有一个人们可以订购的物品表，其中包含 item_id、item_name 和 price。最后有一个名为 c 的表将 order_id 与 item_id 连接起来。

我想做的是从包含我按名称搜索的某些项目的所有订单的订单表中获取一些数据。

我可以做这样的事情，但这显然是一个糟糕的解决方案，即使只有两个项目，更不用说五个左右了。但我认为它说明了我在寻找什么：

```
SELECT o.id, customer_id, order_date
FROM orders AS o, c AS c1, items AS i1, c AS c2, item AS i2
WHERE item_name = 'foo' AND c1.item_id = i1.id AND c1.order_id = o.id
AND item_name = 'bar' AND c2.item_id = i2.id AND c2.order_id = o.id 
```

有人可以建议一个更快的工作解决方案吗？我假设这种类型的查询很常见，所以我想至少有一个快速而聪明的解决方案。:)

需要考虑的一件事是 item_names 不一定是唯一的，这意味着任何使用 HAVING COUNT(...) > 1 的解决方案都将检索包含 'foo' 两次而不是至少一个 'foo' 和一个'酒吧'。

编辑：

有几个人建议我使用“WHERE item_name IN('foo','bar')”然后删除他们的答案，但我正在寻找的查询应该检索包含“foo”和“bar”的订单，不只是其中任何一个。如果我应该使用显式联接以不同的方式构造上面的示例查询，我想它看起来像这样：

```
SELECT o.id, customer_id, order_date
FROM orders AS o
INNER JOIN c AS c1
ON c1.order_id = o.id
INNER JOIN items AS i1
ON i1.id = c1.item_id
INNER JOIN c AS c2
ON c2.order_id = o.id
INNER JOIN items AS i2
ON i2.id = c2.item_id
WHERE i1.item_name = 'foo' 
AND i2.item_name = 'bar'
GROUP BY o.id 
```

（这需要相当长的时间来执行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:48:55.683

[Rudy Limeback](http://www.sitepoint.com/forums/showthread.php?1026404-Selecting-one-through-many-in-a-many-to-many-relationship) FTW：

```
SELECT o.id
FROM (SELECT c.order_id
    FROM items
    INNER JOIN c
    ON c.itemid = items.id
    WHERE items.item_name IN ('foo','bar')
    GROUP BY c.orderid
    HAVING COUNT(DISTINCT item_name) = 2
  ) AS these
INNER JOIN orders
ON orders.id = these.orderid 
```

# c - 修改ELF文件

> ID：15867792
> 
> 赞同：2
> 
> 时间：2013-04-07T21:04:13.733
> 
> 标签：c, linux, memory-segmentation

我有一个 ELF 可执行文件，我想知道如何修改它的 .rodata 段。

此外，更一般地说，我如何修改 ELF 可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:14:00.017

如果您确切知道需要修改 ELF 的哪个部分，则可以使用任何 hexeditor 来执行此操作。

如果您想解析 ELF 并执行更复杂的逻辑，您应该编写一些可以打开文件或更好的代码，mmap 它。然后您可以阅读 ELF 标头，它提供有关 ELF 的基本信息并指向 ELF 中的其他重要位置。我建议阅读 ELF 和`<include/elf.h>`.

如果您使用的是 Linux，您可以使用 readelf 或 objdump 查看节在内存中的位置。

# java - adapter.notifyDatasetChanged() 不改变当前视图

> ID：15867794
> 
> 赞同：0
> 
> 时间：2013-04-07T21:04:30.563
> 
> 标签：java, android

有没有办法在不更改当前显示的视图的情况下向 a 添加视图`ViewPager`（通过添加数据并调用`notifyDatasetChanged()`它）？`PagerAdapter`

我希望数据集在用户查看其他视图时在后台更新。我现在的问题是，当它完成更新时，它会返回显示初始视图。我怎样才能防止它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:21:27.383

据我所知，如果您调用 notifyDatasetChanged() 它只会通知寻呼机适配器有新数据，数据之前必须存在。所以我认为你不应该调用 notifyDatasetChanged() 并且当用户转到下一个视图时，pageradapter 会加载当前（新）数据。这个解决方案怎么样？

# c# - 开源 .net/C# 项目和框架？

> ID：15867796
> 
> 赞同：1
> 
> 时间：2013-04-07T21:04:48.820
> 
> 标签：c#, .net, frameworks

我知道 .net 你有 Asp.net，我知道 .net 它本身就是一个框架。然而，我来自 Java 和 PHP 领域，那里有很多框架。

我了解 C# 和 .net 通常用于业务开发，并且由于 MS 的性质和使用此类技术进行开发的平台，许多代码未开放。

我在 github 上搜索了“C#”和在同一个站点上搜索了“.net”，但是我发现的代码库似乎已经开发了一段时间然后消失了，而且如果我错了，也可以加入， .net 没有框架，除了 .net 它是自己的。话虽如此，我已经看过 Spring .net

我问的原因是因为我最近开始阅读框架设计指南书，该书主要讨论 .net 和 .net 框架，但是在寻找生产代码中使用的 .net 框架的示例时，我要么失明，要么没有.

有吗？如果我要开发一个应用程序，除了 .net 之外，我还有什么可以借鉴的框架吗？

该应用程序可以是桌面、数据库驱动、网络......我只是想看看存在哪些 .net 框架以及如何使用它们来更好地理解这个“封闭源”世界。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:08:25.703

如果你想找到一大堆开源的 .NET 框架，可以直接使用[CodePlex](http://www.codeplex.com)，那里有很多很棒的、活跃的框架。

微软方面还有一些其他的东西也是开源的，比如响应式扩展等。

GitHub 很棒，但与 CodePlex 相比，它对 .NET 项目的使用有点新奇且难以衡量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T21:18:22.390

有很多来自微软和社区的 C# 开源项目。

首先，Asp.net 是开源的，他们接受社区贡献。[http://aspnet.codeplex.com/](http://aspnet.codeplex.com/)

不知道你有没有看[https://github.com/languages/C%23](https://github.com/languages/C%23)还有很多项目比如 Mono , [ServiceStack](https://github.com/ServiceStack/ServiceStack)和[NancyFx](https://github.com/NancyFx/Nancy) [Signalr](https://github.com/signalr/signalr) [RavenDb](https://github.com/ravendb/ravendb) , [NServiceBus](https://github.com/NServiceBus/NServiceBus)

如果你查看 Nuget 的包列表，你还会看到很多框架，其中大部分是开源的[http://nuget.org/packages](http://nuget.org/packages)

# c++ - 将特定类的成员函数存储在向量中的语法是什么？

> ID：15867800
> 
> 赞同：0
> 
> 时间：2013-04-07T21:04:56.800
> 
> 标签：c++

我做了很多搜索，但是 * () 和类范围的组合极大地阻碍了我对语法的理解，每次编辑都会抛出一个新错误，有帮助吗？

我正在尝试做的事情：

声明指向 MyClass.h 中的成员函数的指针的 std::vector

将实际的成员函数分配给 MyClass.cpp 的构造函数中的 std::vector

成员函数不是静态的

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:19:46.043

您可以像这样使用成员函数指针（C++11 与该部分无关）：

```
struct S {
   int foo(){std::cout<<"foo"; return 0;}
   int bar(){std::cout<<"bar"; return 0;}
};

int main() {
   std::vector<int(S::*)()> funcs{&S::foo, &S::bar};

   S s;
   for (auto func : funcs) {
      (s.*func)();
   }
} 
```

但是，如果你使用 C++11，`std::function`可以让它更干净一点：

```
std::vector<std::function<int(S &)>> funcs{&S::foo, &S::bar};

S s;
for (auto func : funcs) {
   func(s);
} 
```

如果你使用 C++03，Boost 有`boost::function`，这也是类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:28:43.547

我很好奇你打算从哪里使用它们。您会看到，为了调用 C++ 类成员函数，您需要一个实例指针来调用它（每个成员函数都需要一个 this 才能访问类状态）。所以通常你会用 std::bind 将成员函数指针与实例指针一起包装，然后可能将结果存储在 std::function 中。要将它们放入向量中，它们都需要相同的签名。

这是你要找的东西吗：

```
class P
{
    typedef std::function<void (void)> func_t;
    std::vector<func_t> functions;
public:
    P()
    {
        functions.push_back(std::bind(&P::foo1, this));
        functions.push_back(std::bind(&P::foo2, this));
        functions.push_back(std::bind(&P::foo3, this));
    }
    void foo1(void)
    {
        std::cout << "foo1\n";
    }
    void foo2(void)
    {
        std::cout << "foo2\n";
    }
    void foo3(void)
    {
        std::cout << "foo3\n";
    }
    void call()
    {
        for(auto it = functions.begin(); it != functions.end(); ++it)
        {
            (*it)();
        }
    }
};

int main()
{
    P p;
    p.call();
} 
```

* * *

在OP进一步澄清后，我将提出以下建议：

```
class P
{
    typedef std::function<void (void)> func_t;
    std::map<const char*, func_t> functions;
public:
    P()
    {
        functions["foo1"] = std::bind(&P::foo1, this);
        functions["foo2"] = std::bind(&P::foo2, this);
        functions["foo3"] = std::bind(&P::foo3, this);
    }
    void foo1(void)
    {
        std::cout << "foo1\n";
    }
    void foo2(void)
    {
        std::cout << "foo2\n";
    }
    void foo3(void)
    {
        std::cout << "foo3\n";
    }
    void call_by_name(const char* func_name)
    {
        functions[func_name]();
    }
};

int main()
{
    P p;
    p.call_by_name("foo1");
    p.call_by_name("foo2");
    p.call_by_name("foo3");
} 
```

# knockout.js - 如何使用requirejs在打字稿中导入淘汰赛

> ID：15867801
> 
> 赞同：4
> 
> 时间：2013-04-07T21:04:59.507
> 
> 标签：knockout.js, requirejs, typescript

我已经玩了几个小时打字稿了，还没有弄清楚我是如何将淘汰赛与我的模块一起导入的？

如果没有打字稿，我将需要它`define(["require", "exports", "knockout" ...],function(... , ko)`，但我还没有设法让打字稿生成它。

我不知道从 jquery 到淘汰赛有什么区别，$ 工作正常，但 ko 未定义。

```
///<reference path="../knockoutd.d.ts" />
///<reference path="../jquery.d.ts" />
import dl = module("DataLayer");
import vm1 = module("AppBarViewModel");
import vm2 = module("Nav2ViewModelCommander");
import vm3 = module("IdentityViewModel");
export class AppViewModel {
...
} 
```

结果是 ：

```
 define(["require", "exports", "DataLayer", "AppBarViewModel", "Nav2ViewModelCommander",  "IdentityViewModel"], function(require, exports, __dl__, __vm1__, __vm2__, __vm3__) {
    var dl = __dl__;

    var vm1 = __vm1__;

    var vm2 = __vm2__;

    var vm3 = __vm3__; 
```

# 更新

和`///<amd-dependency path="knockout" />`

```
define(["require", "exports", "DataLayer", "AppBarViewModel", "Nav2ViewModelCommander", "IdentityViewModel", "knockout"], function(require, exports, __dl__, __vm1__, __vm2__, __vm3__) {
    var dl = __dl__;

    var vm1 = __vm1__;

    var vm2 = __vm2__;

    var vm3 = __vm3__; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:41:57.730

To make the compiler include AMD dependencies in your resulting JavaScript without importing them in your TypeScript, you can make use of this code:

```
/// <amd-dependency path="path/to/knockout/js" /> 
```

This feature is badly documented, but oh-so-useful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T00:42:15.317

The problem is that KnockoutJS doesn't define `window.ko` in an AMD environment (i.e. when RequireJS is involved). Therefore you either have to use `///<amd-dependency />` or use KnockoutJS as a proper module.

I have [drafted up an AMD version of **knockout.d.ts**](https://github.com/diachedelic/DefinitelyTyped/tree/master/knockout) from DefinitelyTyped - it will allow you to use `import ko = module('knockout')`. Make sure you obtain both **knockout.d.ts** and **knockout.amd.d.ts**.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T13:39:08.397

With latest typescript and type definition for knockout.d.ts

```
import ko = require('knockout') 
```

works as expected.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T00:14:36.183

添加以下内容：

```
import ko= module("knockout"); 
```

**更新**

*情况1：*

根据您的错误，这似乎更合理`module can not be aliased to a none module type`您的 knockout.ts 文件不包含模块定义。要使用模块指令导入文件文件，应该在该文件中定义一个模块。

*案例2*

In case this is not working it is most likely due to this : [https://stackoverflow.com/a/13013956/390330](https://stackoverflow.com/a/13013956/390330) You should give the path to knockout.d.ts file :

```
import ko= module("/path/to/knockout.d.ts"); 
```

However I think it should not be required since you are referencing a .ts file and not a .d.ts file :

```
///<reference path="knockout.ts" /> 
```

# python - 如何为 Python 中的函数设置“会话”超时？

> ID：15867802
> 
> 赞同：2
> 
> 时间：2013-04-07T21:05:09.627
> 
> 标签：python, function, time, timeout, clock

在代码行之间或调用函数之间是否存在类似 python 中的会话超时？像这样的东西：

```
threshold = 20
def afunction(input):
  start_session
  try:
    do_something...
    return x
  except SessionTimeOut:
    return y 
```

# c++ - C++ 陷入循环

> ID：15867803
> 
> 赞同：0
> 
> 时间：2013-04-07T21:05:13.443
> 
> 标签：c++

```
huffmanFile.open("code.txt");

while(huffmanFile.peek() != EOF)
{
    cin >> letters[c] >> numbers[c];
    c++;
}

huffmanFile.close(); 
```

输入文件：A 23 B 35 C 47 D 0 E 12 F 11 G 92 H 18 I 17

执行此操作后，我尝试从我的 main 函数中输出 c 并且它不会退出 while 循环。我试过调试无济于事。我已经将它与我编写的许多其他程序进行了比较，但仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:10:43.850

假设`huffmanFile`是一个`istream`对象类型，你可以尝试使用这个变体：

```
while (huffmanFile >> letters[c] >> numbers[c]) {
    ++c;
} 
```

说明：如果已到达流的末尾，则[`istream::operator >>`](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)设置其内部标志。`eofbit`它还返回`*this`，允许我们执行类似的读取序列`cin >> a >> b >> c`。之后，`istream`通过`while`子句测试对象，即[`bool operator()`](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)调用内部，`true`如果`eofbit`标志已设置，则返回，`false`否则返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:08:05.810

`cin`是标准输入流，它通常从键盘输入。您需要改为从文件中读取输入。

循环永远不会终止，因为文件读取位置永远不会前进。

# php - 如何确定一个词是英语还是任何其他语言

> ID：15867808
> 
> 赞同：2
> 
> 时间：2013-04-07T21:05:50.177
> 
> 标签：php, algorithm, nlp, translation

我正在开发一个小型图书馆自动化软件，我需要确定一个单词是[英语](http://en.wikipedia.org/wiki/English_language)还是[土耳其语](http://en.wikipedia.org/wiki/Turkish_language)。一个示例场景是这样的：

*   用户输入书名。
*   确定它是土耳其语还是英语。
*   将语言组合框设置为相应的语言以帮助用户填写表格。

我的一个朋友建议我“连接到谷歌翻译并使用它”，这似乎是合理的，但不连接外部服务或数据库的算法更适合我。（我还搜索土耳其语/英语特定字符，如ç、ş、İ/w、x 来决定）因此我正在搜索一种算法来完成这项工作，可能基于字母频率或类似的东西。文学中有什么可用的吗？提前致谢。（如果很重要，我使用php，mysql）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:20:20.923

如果您要测试的样本很小（单个单词或短语），那么简单的启发式方法（如字母频率）就不会很有用，因为英文短语“Jazz Quizzes”可能更适合许多语言的配置文件比英语。

您可能可以使用双字母和三字母的频率（2 和 3 字母组合），因为英语和土耳其语完全不相关，以至于组合仅出现在一个中。

然而，更有可能的是，您将不得不使用来自两种语言的实际单词的数据库。在这种情况下，您可能最好使用第三方 API 或数据库，而不是全力构建自己的语料库、实现统计算法等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:22:29.300

根据评论。

请检查： [Detect language from string in PHP](https://stackoverflow.com/questions/1441562/detect-language-from-string-in-php)

或者：

[http://wiki.apache.org/solr/LanguageDetection](http://wiki.apache.org/solr/LanguageDetection)

Solr 可以给你概率的语言（例如这句话是 90% 英语或 10% 土耳其语）

# javascript - 如何旋转 CannonJS 刚体？

> ID：15867811
> 
> 赞同：6
> 
> 时间：2013-04-07T21:06:24.510
> 
> 标签：javascript, rotation, three.js, quaternions, cannon.js

有谁知道我如何旋转 CannonJS（物理库）`CANNON.RigidBody`？我试图让物体随着相机旋转，所以两者都面向同一个方向。我知道我必须修改四元数，但这不能正常工作：

```
mPlayer.objectBody.quaternion.set(0, mPlayer.yawObject.rotation.y, 0, 1); 
```

它还会更改对象的 Y 位置，而不仅仅是旋转。

[这是一个演示](http://braddodi.com/test/)（WASD 移动红色矩形 - 这是我要旋转的）
[这是主脚本](http://braddodi.com/test/_js/render.js)

目前它会根据物理原理自动旋转。谢谢您的帮助！

**编辑：**
我现在有点工作了。但它并没有完全旋转（整个 360 度），而且它旋转的角度也不完全正确。如果有人可以看看有什么问题，我将不胜感激！:)

[与以前相同的链接，](http://braddodi.com/test/)但矩形/主体现在位于相机下方，因此我可以查看它是否正确旋转。

我添加了此代码以使其旋转：

```
mPlayer.objectBody.quaternion.y = mPlayer.yawObject.rotation.y;
mPlayer.objectBody.quaternion.w = 1;
mPlayer.objectBody.quaternion.normalize(); 
```

* * *

为了节省您浏览代码的时间，`mPlayer.yawObject.rotation.y`在 MouseMove 事件中设置：

```
var onMouseMove = function ( event ) {
    var movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;
    var movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;

    mPlayer.yawObject.rotation.y -= movementX * 0.002;
    mPlayer.pitchObject.rotation.x -= movementY * 0.002;

    mPlayer.pitchObject.rotation.x = Math.max( - PI_2, Math.min( PI_2, mPlayer.pitchObject.rotation.x ) );
}; 
```

再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T01:07:20.560

在 Cannon.JS 开发人员的帮助下解决了这个问题。我现在正在使用：

```
mPlayer.objectBody.quaternion.setFromAxisAngle(new CANNON.Vec3(0,1,0), mPlayer.yawObject.rotation.y); 
```

# bash - 检查一个数字是否等于 Bash 中的另一个数字

> ID：15867813
> 
> 赞同：50
> 
> 时间：2013-04-07T21:06:33.653
> 
> 标签：bash

我一直在尝试比较 Bash 中的两个数字是否相等（如果相等则打印一条消息），但是对于这个简单的程序，我收到了一些奇怪的错误消息：

```
#!/bin/bash

fun2 (){
    $x = 3
    //#prog.sh: line 4: =: command not found
    if [x == 3]
        then
    //#prog.sh: line 6: [x: command not found
            echo "It's 3!"
    fi
}
fun2 
```

相应的错误显示在导致这些错误的行下方。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-07T21:13:03.750

一定是：

```
 if [ $x -eq 3 ]; then ..... 
```

如果您更喜欢可读性更强且不言自明的代码，请使用以下语法：

```
 if test $x -eq 3; then ..... 
```

**说明**：

要比较整数，您必须使用这些运算符（从 复制`man test`）：

```
 INTEGER1 -eq INTEGER2
          INTEGER1 is equal to INTEGER2

   INTEGER1 -ge INTEGER2
          INTEGER1 is greater than or equal to INTEGER2

   INTEGER1 -gt INTEGER2
          INTEGER1 is greater than INTEGER2

   INTEGER1 -le INTEGER2
          INTEGER1 is less than or equal to INTEGER2

   INTEGER1 -lt INTEGER2
          INTEGER1 is less than INTEGER2

   INTEGER1 -ne INTEGER2
          INTEGER1 is not equal to INTEGER2 
```

运算符 == 和 != 仅用于字符串比较。

有关信息：“[”命令是系统“test”命令的别名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T22:07:32.943

Shell 脚本并不是真正意义上的完整语言，它在很大程度上依赖于其他外部命令才能工作。

变量使用它们前面的[*符号。*](https://en.wikipedia.org/wiki/Sigil_(computer_programming))`$`许多 shell 脚本语言使用变量符号来帮助区分字符串和变量。

例如：

```
foo=foo_value
echo foo foo $foo foo 
```

将打印：

```
foo foo foo_value foo 
```

*请注意，字符串的echo*语句不需要引号。Windows Batch shell 非常相似：

```
set foo = foo_value
echo foo foo %foo% foo 
```

如您所见，当应该扩展变量时使用符号，而不是在定义它时使用*。*那是因为 Unix shell 是智能 shell。他们甚至在执行命令行之前就对它进行了修改。shell 将在执行*前*替换环境变量：

```
foo=bar
$foo="whose value is this"  # Note the dollar sign!
echo The value of foo is $foo
echo The value of bar is $bar 
```

这将打印出：

```
The value of foo is foo
The value of bar is whose value is this 
```

如果您使用该`set -xv`命令，您会看到它在执行之前`$foo="whose value is this"`被扩展为。`bar=whose value is this"`

[在像KornShell](https://en.wikipedia.org/wiki/KornShell)和 Bash 这样的Bourne 风格的 shell中，`if`声明并不是你想象的那样。该`if`命令执行该语句，如果该命令返回零值，将选择*if 子句。*例如：

```
cat "foo" > my_file       # Create a one line file with the string foo in it.
if grep -q "foo" my_file  # grep command will return a zero exit code if it finds foo
then
    echo "The string 'foo' is in file my_file"
fi 
```

请注意，*if 子句*不是布尔语句。这是一个实际执行的命令。

在 Unix 开发早期的某个地方，`test`创建了该命令。你可以做一个*man 测试*，看看如何使用它。

该`test`命令允许您执行此操作：

```
foo=3
bar=3
if test foo -eq bar
then
    echo "foo and bar are equal"
else
    echo "foo and bar are not equal"
fi 
```

如果你这样做：

```
$ ls -li /bin/test /bin/[ 
```

您将看到`[`实际存在一个名为的命令，并且是该`test`命令的硬链接。创建它是为了使`if`语句看起来更像是您将在常规编程语言中看到的*if语句：*

```
foo=3
bar=3
if [ foo -eq bar ]
then
    echo "foo and bar are equal"
else
    echo "foo and bar are not equal"
fi 
```

它与上面的脚本完全相同，但使用`[`而不是`test`.

这解释了为什么在许多测试中需要*破折号*`test`（它是命令的参数，参数以破折号开头！）。它还解释了为什么在`[`and周围需要空格`]`。这些是实际的 Unix 命令，Unix 命令周围必须有空格，以便 shell 可以处理它们。

Another issue is: Why does the shell have two different sets of tests for strings and numbers? That's because strings may contain nothing but digits, but are not really numeric. For example, if you do inventory, you might have a part number `001` and `01`. Numerically, they're equal, but as strings, they're two different strings. There is no way for the shell script to know. Instead, you must let the shell script know if it's a numeric comparison or a string comparison.

Perl has similar issues since you don't declare variables as numeric or non-numeric:

```
 Shell Script              Perl
Boolean Operator     Numeric     String     Numeric    String
===================  =======     ======     =======    ======
Equals                 -eq        =           ==         eq
Not Equals             -ne        !=          !=         ne
Greater Than           -gt        >           >          gt
Less Than              -lt        <           <          lt
Greater or Equals      -ge        >=          >=         ge
Less Than or Equals    -le        <=          <=         le 
```

You can try a few other things:

```
$ echo "*"    # Echos the asterisk
$ echo *      # No quotes: Prints all files in current directory 
```

Notice again the shell *expands* the `*` before executing the *echo* command. This is the main difference between a shell script and a typical programming language. The shell first does expansion (fill in environment variables, glob substitution, and run sub-commands) before it actually executes the command.

The `set -xv` will show you what command is being executed, and how the shell *expands* the command before executing. Doing `set +xv` will shut that off. Play around with that, and you'll soon understand the shell a bit better.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T21:09:34.867

对于第一条错误消息，删除美元符号`$`，等号周围不允许有空格`=`

```
x=3 
```

对于第二条错误消息，在前面插入一个空格和一个美元符号，`$`在后面插入一个`x`空格`3`

```
if [ $x -eq 3 ] 
```

正如[loentar 正确指出的那样](https://stackoverflow.com/questions/15867813/check-whether-one-number-equals-another-number-in-bash/15867881#15867881)，它一定是`-eq`并且既不是`=`也不是`==`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-07T21:08:11.253

*   空格在`[ ]`表达式中是强制性的，所以

    `if [ $x == 3 ]; then`

*   你需要一个关于测试中变量的[标记](http://en.wikipedia.org/wiki/Sigil_%28computer_programming%29)`[ ]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-19T21:01:29.377

For clarity, use `==` for equality rather than `=` even though both work. The former encourages the use of `[[` and the latter can be confused with an assignment. Use `(( … ))` or `-lt` and `-gt` for numerical comparison.

```
if [[ "${my_var}" == "val" ]]; then
  do_something
fi

if (( my_var == 3 )); then
  do_something
fi

if [[ "${my_var}" -gt 3 ]]; then
  do_something
fi 
```

# c - 将空字符插入 snprintf

> ID：15867818
> 
> 赞同：1
> 
> 时间：2013-04-07T21:07:24.093
> 
> 标签：c, ternary-operator

定义：

*   **CHAR_BACKSLASH**定义为 '\\' 或 0x5C

变量：

*   **workingDir**是一个 C 字符串
*   **myFilePath**是一个 C 字符串

    ```
    int len = strlen(workingDir);
    char lastChar = workingDir[len - 1]; 
    ```

下面，**myFilePath**由**workingDir** +*反斜杠*+ 文字*“myfile.txt”组成*

在三元参数中，如果还没有反斜杠，我会尝试使用反斜杠。

```
 snprintf(myFilePath,
             sizeof(myFilePath),
             "%s%s%s",
             workingDir,
             (lastChar == CHAR_BACKSLASH) ? "" : "\\",
             "myfile.txt"); 
```

如果可能的话，我想把它改成这样，但不确定如何，因为它需要一个空的单引号字符，我不确定这是否允许。

```
 snprintf(myFilePath,
             sizeof(myFilePath),
             "%s%c%s",
             workingDir,
             (lastChar == CHAR_BACKSLASH) ? '' : CHAR_BACKSLASH,
             "myfile.txt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:19:36.427

为什么不是这个？那么你就不用担心 '' 是否是 %c 的有效案例。而且 snprintf 需要处理的 varg 少了一个。

```
snprintf(myFilePath,
         sizeof(myFilePath),
         (lastChar == '\\') ? "%s%s" : "%s\\%s"
         workingDir,
         "myfile.txt"); 
```

# ruby-on-rails - 在数据库中实现 Ruby on Rails 验证规则而不是在模型文件中进行硬编码？

> ID：15867834
> 
> 赞同：3
> 
> 时间：2013-04-07T21:08:09.790
> 
> 标签：ruby-on-rails, validation, model, ruby-on-rails-3.2

我有一个应用程序，我想在数据库中存储所有数据库验证规则，因为管理员需要能够从 GUI 更改验证规则。此外，规则预计会经常更改，所以我的要求是规则需要在数据库中。

为简单起见，假设我有一个用户模型，并且“名称”需要存在的验证规则。通常，你会说：

```
class User < ActiveRecord::Base
  validates :name, presence: true
end 
```

有没有办法将此规则粘贴到规则表中，查询数据库中的规则，然后让模型根据规则表中的规则进行验证？即像这样在模型文件中编写查询的简单方法？

```
class User < ActiveRecord::Base
  Rule.first.validation
end 
```

Rule.first.validation 的值将是“验证：名称，存在：真”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:33:47.143

可以这样做（比如使用`validates`and `eval`），但非常有限且有风险。另外，您正在将验证从可测试和部署为工作的地方转移到受系统管理员心血来潮影响的数据库。我强烈建议不要以这种方式违反惯例。从长远来看，您最好推出频繁的更新（带有相应的测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T20:32:11.413

查看此 gem [https://github.com/vprokopchuk256/mv-core](https://github.com/vprokopchuk256/mv-core)。它允许您在数据库级别定义验证。像这样的东西：

```
def change
  create_table :posts do |t|
    t.string :title, length: [1..30]
  end
end 
```

结果，将创建触发器或检查验证。这取决于数据库。

在内部，所有验证都存储在特殊的 :migration_validators 表中。:table_name、:column_name、:validation_type 和验证选项存储在那里。

并且有可能将该表中的验证升级到您的模型：

```
class Post < ActiveRecord::Base 
  enforce_migration_validations
end 
```

所以 - 您可以更新 :migration_validations 表以动态添加/删除验证。该表的结构非常简单。

# c# - 为什么 DateTime.ToString 没有按预期提供时区

> ID：15867836
> 
> 赞同：4
> 
> 时间：2013-04-07T21:08:13.733
> 
> 标签：c#, datetime, datetime-format

如果我有这个代码：

```
 DateTime dt = DateTime.UtcNow;
                string sDate = dt.ToString("yyyy-MM-dd HH:mm:ss.fff zz"); 
```

我的 sDate 看起来像这样：

```
"2013-04-07 21:05:15.396 +10" 
```

这是当前的 UTC 日期时间（晚上 9:05），但末尾有一个“+10”，这是我的本地时区。

我本来预计会这样：

```
"2013-04-07 21:05:15.396 +00" 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:17:28.107

那是因为[文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#zzSpecifier)说（强调我的）：

> 使用`DateTime`值，“zz”自定义格式说明符**表示本地操作系统时区与 UTC 的有符号偏移量，以小时为单位。它不反映实例 `DateTimeKind`属性的值。**因此，不建议将“zz”格式说明符与`DateTime`值一起使用。

因此，`zz`格式说明符始终输出本地时区的 UTC 偏移量，即使用于格式化 UTC 时间也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:15:57.103

`DateTime.ToString`，当您不将 a 传递给`CultureInfo`它时，默认为当前文化。如果您当前的文化是 +10，那么这就解释了为什么您会看到 +10。您可以打开各种 FxCop 和代码分析规则，以便在您打电话时发出`ToString`警告`CultureInfo`

# wpf - TextBlock 上的鼠标 Hower

> ID：15867840
> 
> 赞同：0
> 
> 时间：2013-04-07T21:08:35.890
> 
> 标签：wpf, image, c#-4.0, mouseevent, textblock

这个想法是当鼠标在上面咆哮时`TextBlock`，会出现新`Image`的并且可以点击它。当鼠标离开`TextBlock`-`Image`应该消失。

与此同时，我来到了这个，但仍然无法继续：

```
<Style x:Key="HoverHighlightTextStyle" TargetType="TextBlock">
    <Setter Property="FontSize" Value="16"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="Margin" Value="3,0,3,0"/>

    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
         </Trigger>
    </Style.Triggers>
</Style> 
```

`Expected result`

![在此处输入图像描述](https://i.stack.imgur.com/4oRHb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:35:10.570

我建议您按照以下步骤操作。

1.  创建一个`stackpanel`（方向设置为水平）或任何其他适当的控件并在其中添加`text box`和`image`控件。
2.  `Hide`文本框和图像控件，`borders`以便只有堆栈面板边框可见。
3.  当`mouseover`事件触发时，将图像控件设置为`appeared.`
4.  当`mouseleave`事件触发时，将图像控件设置为`disappeared`.

我没有测试过这个。但这可能会帮助您获得一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:35:39.547

我找到了基于 sa_ddam213 答案的解决方案：

```
<TextBlock x:Name="txtblkSelectedItem" Text="My Textblock">
<TextBlock.ToolTip>
  <ToolTip PlacementTarget="{Binding ElementName=txtblkSelectedItem}" Placement="Right" HorizontalOffset="-20">
    <Image Source="http://stackoverflow.com/users/flair/1849109.png" Width="10" Height="10"/>
  </ToolTip>
</TextBlock.ToolTip> 
```

这个想法是在文本块内定位工具提示可以通过使用 ToolTip 来实现

> Placement="右" Horizo​​ntalOffset="-20"

特性

# ios - Objective-C中两个数组的补码

> ID：15867843
> 
> 赞同：1
> 
> 时间：2013-04-07T21:08:52.950
> 
> 标签：ios, objective-c, arrays

非常简单的问题，我在正确的轨道上，我必须使用谓词但找不到解决方案。我有两个数组：

```
A = [1, 2, 3, 4]
B = [1, 2] 
```

我想要一个 aray C = A \ B 是

```
C = [3, 4] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T21:14:39.570

使用正确的工具来完成任务。您在这里描述的是**集合**操作“差异”。

```
NSMutableSet *first = [NSMutableSet setWithObjects:@1, @2, @3, @4, nil];
NSSet *second = [NSSet setWithObjects:@1, @2, nil];
[first minusSet:second]; 
```

如果你**真的真的**需要使用数组，你也可以在数组和集合之间进行转换：

```
NSArray *array = [someSet allObjects]; 
```

或者

```
NSSet *set = [NSSet setWithArray:someArray]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T21:12:29.077

你可以用`removeObjectsFromArray:`

```
NSArray * arrayA = @[ @1, @2, @3, @4 ];
NSArray * arrayB = @[ @1, @2 ];

NSMutableArray * arrayC = [arrayA mutableCopy];
[arrayC removeObjectsInArray:arrayB]; 
```

**编辑** 正如评论中的建议和 H2CO3 所建议的那样，如果您没有正当理由使用`NSArray`，最方便的解决方案是更改数据结构并切换到`NSSet`支持集合差异的 ，使用方法`-minusSet:`。

**编辑 2** 正如 Sven 在评论中指出的那样，您的对象必须正确响应`hash`并`isEqual:`才能使用`removeObjectsInArray:`. 在上面的示例中，一切都会正常工作，因为`NSNumber`这些方法有一个默认实现，但是如果您使用自定义类，则需要显式覆盖它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T19:09:36.223

这是另一种方法：

```
NSArray * arrayA = @[ @1, @2, @3, @4 ];
NSArray * arrayB = @[ @1, @2 ];

NSIndexSet *indexSet = [arrayA indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    if([arrayB containsObject:obj]){
        return NO;
    }
    else{
        return YES;
    }
}];

NSArray *arrayC = [arrayA objectsAtIndexes:indexSet]; 
```

# android - ActionBar SearchView 在横向模式下未完全展开

> ID：15867854
> 
> 赞同：10
> 
> 时间：2013-04-07T21:10:34.713
> 
> 标签：android, search, android-actionbar, searchview

使用操作栏搜索界面时，小部件在纵向模式下会展开以占据屏幕的整个宽度，但在横向模式下会停止。

有没有办法在 SearchView 上设置扩展布局参数以在用户键入搜索时完全填充操作栏？

见图片：

[![SearchView 文本字段在横向模式下未使用全宽](https://i.stack.imgur.com/bEWks.png)](https://i.stack.imgur.com/bEWks.png)

注意：我目前没有使用 ActionBar Sherlock

编辑：这是我为扩展整个宽度所做的工作。

```
searchView.setOnSearchClickListener(new OnClickListener() {
    private boolean extended = false;

    @Override
    public void onClick(View v) {
        if (!extended) {
            extended = true;
            LayoutParams lp = v.getLayoutParams();
            lp.width = LayoutParams.MATCH_PARENT;
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-30T11:26:43.167

MenuItemCompat's SearchView has a property named maxWidth.

```
 final MenuItem searchItem = menu.findItem(R.id.action_search);
    final SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);
    searchView.setMaxWidth(xxx); 
```

use screen width instead of xxx offcourse

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T21:35:20.143

你尝试过这样的事情吗？

```
editView.setOnKeyListener(new OnKeyListener() {
    private boolean extended = false;

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (!extended && event.getAction() == KeyEvent.ACTION_DOWN) {
            extended = true;
            LayoutParams lp = v.getLayoutParams();
            lp.width = LayoutParams.MATCH_PARENT;
        }

        return false;
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T21:42:44.577

我想出了一个解决方案，可以在横向中完全扩展搜索视图，并且在创建活动时也已经扩展了操作视图。它是如何工作的：

1.首先在您的 res-menu 文件夹中创建一个 xml 文件，例如：searchview_in_menu.xml。在这里，您将拥有以下代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >
        <item android:id="@+id/action_search"
              android:title="@string/search"
              android:icon="@android:drawable/ic_menu_search"
              android:actionLayout="@layout/searchview_layout" />
    </menu> 
```

Note: "@string/search" - looks something like this in the res-strings.xml:

```
 <string name="search">Search</string> 
```

2.Second create the layout referred above ("@layout/searchview_layout") in res-layout folder. The new layout: searchview_layout.xml will look like this:

```
 <?xml version="1.0" encoding="utf-8"?>
    <SearchView xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/search_view_layout"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"/> 
```

Note: Here we are setting the search view width to match the width of its parent( android:layout_width="match_parent")

3.In your MainActivity class or in the activity that has to implement the Search View write in the onCreateOptionsMenu() method the following code:

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.searchview_in_menu, menu);
        //find the search view item and inflate it in the menu layout
        MenuItem searchItem = menu.findItem(R.id.action_search);
        mSearchView = (SearchView) searchItem.getActionView();
        //set a hint on the search view (optional)
        mSearchView.setQueryHint(getString(R.string.search));
        //these flags together with the search view layout expand the search view in the landscape mode
        searchItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
                | MenuItem.SHOW_AS_ACTION_ALWAYS);
        //expand the search view when entering the activity(optional)
        searchItem.expandActionView();
        return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T20:40:35.923

Adjust the width layout param to `MATCH_PARENT`, that way the `SearchView` will fully expand in either portrait or landscape

```
ViewGroup.LayoutParams layoutParams = mSearchView.getLayoutParams();
layoutParams.width = ViewGroup.LayoutParams.MATCH_PARENT; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T17:01:55.633

For ActionBarCompat use this:

```
 MenuItemCompat.setShowAsAction(searchItem, MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
            | MenuItem.SHOW_AS_ACTION_ALWAYS);
    MenuItemCompat.expandActionView(searchItem); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-27T06:47:51.477

Use this (100%):

```
mSearchView = (SearchView) searchItem.getActionView();    
mSearchView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
```

# google-maps-api-3 - 哪些可选参数可以提高 google 地理位置请求结果的准确性？

> ID：15867857
> 
> 赞同：0
> 
> 时间：2013-04-07T21:10:50.937
> 
> 标签：google-maps-api-3, geolocation, gsm

我正在使用 gsm 单元格数据来获取当前设备位置。为此，我使用[Google Maps Geolocation API](https://developers.google.com/maps/documentation/business/geolocation/)。在所需 JSON 参数的第一部分中，所有字段似乎都是可选的（URL：[https](https://www.googleapis.com/geolocation/v1/geolocate?key=API_key) ://www.googleapis.com/geolocation/v1/geolocate?key=API_key ）：

```
{
 "homeMobileCountryCode": 310,
 "homeMobileNetworkCode": 410,
 "radioType": "gsm",
 "carrier": "Vodafone",
 "cellTowers": [
 // See the Cell Tower Objects section below.
 ],
 "wifiAccessPoints": [
 // See the WiFi Access Point Objects section below.
 ]
} 
```

前4个参数homeMCC、homeMNC、radio Type和carrier对精度有影响吗？还是响应时间？我无法分辨出任何差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:47:36.300

我可以相信，Google 的小区 ID 数据库是按运营商和网络类型组织的，因此如果您提供这些参数，理论上可能会有更快的响应，但肯定可以忽略不计。想不出为什么它也需要知道您的家庭运营商详细信息的技术原因。这些参数将提供给他们的唯一信息是 (1) 您是否在漫游，以及 (2) 他们可能持有的有关各个运营商的任何存储信息。Google 是否与任何运营商签订了特殊协议？

# android - GoogleMap 变量上的 Google Maps API 空指针异常

> ID：15867862
> 
> 赞同：1
> 
> 时间：2013-04-07T21:11:27.243
> 
> 标签：android, android-fragments, nullpointerexception, google-maps-android-api-2, android-fragmentactivity

我正在开发一个需要使用 Google Maps API 的应用程序。我已经处理这个问题两天了。我使用的是 API 的第 2 版，所以我使用的是地图片段。因此，当我尝试从地图片段中获取谷歌地图并将其分配给我的`GoogleMap googleMap`变量时，它会引发空指针异常。我猜它很难找到存储 GoogleMap 对象的片段。我几乎尝试了所有方法。我试图将片段放在我的主要活动的 xml 文件中，使用支持地图片段，并以编程方式将片段添加到我的 xml 文件中。这些解决方案出现了其他问题，但 NPE 在所有问题中都是一致的。我觉得我现在已经很接近了，但我只需要一点帮助就可以让它发挥作用。

这是我的 GoogleMaps 活动代码：

```
package com.parse.starter;

import android.app.*;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.*;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.*;
import com.google.android.gms.maps.SupportMapFragment;
import com.parse.*;
import com.parse.starter.R;

import java.util.List;

public class OutbreakMap extends FragmentActivity implements LocationListener {
    double lat=50;
    double longi=50;
    private LocationManager locationManager;
    private String provider;
    private GoogleMap googleMap;
    Fragment fragment;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(isGooglePlayOn())    {
            setContentView(R.layout.map_layout);
        }
        //Add the map fragment
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragment = new com.parse.starter.MapFragment();
        fragmentTransaction.add(R.id.myfragment, fragment);
        fragmentTransaction.commit();

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
        boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);

         // Check if enabled and if not send user to the GSP settings
         // Better solution would be to display a dialog and suggesting to
        // go to the settings
        if (!enabled) {
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

            // set title
            alertDialogBuilder.setTitle("Turn On Your GPS");

            // set dialog message
            alertDialogBuilder
                    .setMessage("Please turn on your GPS to track sickness in your area!")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, close
                            // current activity
                            OutbreakMap.this.finish();
                            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            startActivity(intent);
                        }
                    })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();

        }
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } else {
            Toast.makeText(getApplicationContext(),"Location not found",Toast.LENGTH_SHORT).show();
        }

        setUpMapIfNeeded();
        googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
        if(location != null)  {
            lat=location.getLatitude();
            longi=location.getLongitude();
        }

        CameraPosition cameraPosition = new CameraPosition.Builder()
                    .target(new LatLng(lat,longi))      // Sets the center of the map to lat,longi (which is 50,50 if the current location isnt found)
                    .zoom(17)                   // Sets the zoom
                    .build();                   // Creates a CameraPosition from the builder
        googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

        UiSettings uiSettings=googleMap.getUiSettings();
        uiSettings.setAllGesturesEnabled(false);
        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } else {
        Toast.makeText(getApplicationContext(),"Couldn't Find Location",Toast.LENGTH_SHORT).show();
        }

        ParseGeoPoint userLoc= new ParseGeoPoint(lat,longi);
        ParseQuery query= new ParseQuery("Outbreak");
        query.whereWithinMiles("location",userLoc,1);
        query.findInBackground(new FindCallback() {
            public void done(List<ParseObject> objects, ParseException e) {
                if (e == null) {
                GetOutbreaks.getOutBreaksNearMe(googleMap,lat,longi,objects);
                Toast.makeText(getApplicationContext(),"Recieved Outbreak Data",Toast.LENGTH_SHORT).show();
                } else {
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(),"Could Not Download Data",Toast.LENGTH_SHORT).show();
                }
            }

        });

//        moveToPrescription();
//        moveToPrescription();
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

    public void moveToPrescription(){
        Intent intent = new Intent(this,Prescription.class);
        startActivity(intent);
    }

    public void setUpMapIfNeeded() {
        if(googleMap==null) {
           googleMap= ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

        }
        else {

        }
    }

    public boolean isGooglePlayOn() {
        int status=GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
        if(status== ConnectionResult.SUCCESS)   {
            return true;
        }
        ((Dialog) GooglePlayServicesUtil.getErrorDialog(status,this,10)).show();
        Toast.makeText(this,"Google Play Services cannot be found", Toast.LENGTH_SHORT).show();
        return false;
    }

} 
```

这是我的活动的 xml 文件（内部线性布局是地图片段的持有者）：

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <FrameLayout
            android:id="@+id/mapContainer"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <LinearLayout
                android:id="@+id/myfragment"
                android:layout_width="match_parent"
                android:layout_weight="4"
                android:layout_height="match_parent" />
    </FrameLayout>
</LinearLayout> 
```

这是地图片段的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:tag="map_fragment"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          class="com.google.android.gms.maps.MapFragment"/> 
```

最后是我的 Android 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.parse.starter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15"/>
    <permission
            android:name="com.parse.starter.permission.MAPS_RECEIVE"
            android:protectionLevel="signature"/>
    <uses-permission android:name="com.parse.starter.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
         Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:name="ParseApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ParseStarterProjectActivity"

            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Register"/>
        <activity android:name=".Login"/>
        <activity android:name=".Home"/>
        <activity android:name=".OutbreakMap"/>
        <activity android:name=".Prescription"/>
        <activity android:name=".MyPrescriptions"/>
        <receiver android:name=".AlarmManagerBroadcastReceiver"></receiver>

        <uses-library android:name="com.google.android.maps"/>
        <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="MY API KEY IS HERE"/>
    </application>
    <uses-feature android:glEsVersion="0x00020000" android:required="true"/>

</manifest> 
```

抱歉，我没有我的 LogCat 对话框，因为它被删除了，而且我正在测试的手机属于一个不得不离开的朋友。但它基本上说在它说`setUpMapIfNeeded();`and的那一行有一个 NPE `googleMap= ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();`。此外，值得注意的是，在 AndroidManifest.xml 文件中，它在最底部显示“无法解析符号 '0x00020000'” `<uses-feature android:glEsVersion="0x00020000" android:required="true"/>`。但这并不能阻止应用程序编译和安装。感谢所有的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:43:42.250

有几件事搞砸了：

1.  使用 FragmentActivity 时使用 getSupportFragmentManager
2.  if you want to find fragment by id, then it must exists in layout file
3.  you want to add fragment in layout or in code (`fragment = new com.parse.starter.MapFragment();`) - not both
4.  what is com.parse.starter.MapFragment anyway?

**Edit**: and there are things in Manifest too...

There is probably something more, but I would suggest starting from a simple project like maps samples in google play services lib.

**Edit 2**: wrong things in Manifest:

1.  `<uses-library android:name="com.google.android.maps"/>` is unnecessary
2.  `<uses-sdk android:minSdkVersion="4"` should be 8 - probably the reason for `Cannot resolve symbol '0x00020000'`

You can't nest fragment inside fragment with xml. You can only instantiate nested fragment with code and use `getChildFragmentManager`.

I still don't see your MapFragment code, but if you really need this additional fragment, think of encapsulation: if Google's MapFragment is inside your MapFragment (would be good to change the name), then your MapFragment should be doing any interaction with nested fragment, not Activity.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-22T06:48:40.920

Use `getSupportFragmentManager` when working with `FragmentActivity`

if you want to find fragment by id, then it must exists in layout file you want to add fragment in layout or in code `(fragment = new com.parse.starter.MapFragment();)`

Note: Must not use both

what is com.parse.starter.MapFragment anyway?

# bash - Bash 导出属性

> ID：15867866
> 
> 赞同：4
> 
> 时间：2013-04-07T21:11:35.533
> 
> 标签：bash变量：, bash

这些命令似乎表明在导出时不会保留只读[bash变量：](/questions/tagged/bash "显示标记为“bash”的问题")

### Bash 版本 4 或更高版本

```
f() {

    # A local variable will be visible within the function in which it is declared
    local a=1

    # Declare acts as a synonym (?) to local here, as I do not specify -g (global)
    declare b=2

    # This is a regular global variable, it won't be in new shells because not exported
    declare -g c=3

    # You may find this puzzling: _not_ exported because not marked also global
    declare -x d=4

    # This should be read-only but it does not even get exported
    declare -xr e=5

    # This will be both global and exported, as expected. Phew :)
    declare -gx f=6

    # Same as f, global and exported
    export g=7

    # Now interestingly: this should be exported as read-only, but...
    declare -grx h=8

    # What does the function scope look like?
    printf '%-10s %d%d%d%d%d%d%d%d\n' "local" "$a" "$b" "$c" "$d" "$e" "$f" "$g" "$h"
}

f

# What does the global scope look like?
printf '%-10s %d%d%d%d%d%d%d%d\n' "global" "$a" "$b" "$c" "$d" "$e" "$f" "$g" "$h"

# What does the scope of a new shell look like?
bash -c 'printf "%-10s %d%d%d%d%d%d%d%d\n" "new shell" "$a" "$b" "$c" "$d" "$e" "$f" "$g" "$h"; h=42; echo "$h"'
# Read-only attribute has disappeared after exportation 
```

输出：

```
local      12345678
global     00300678
new shell  00000678
42 
```

有没有办法导出变量属性？哪些出口好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:00:22.190

我怀疑是否有可以导出的只读变量。

为了拥有只读的全局变量，请尝试使用`readonly`内置的，例如

```
readonly c=3 
```

# php - 在 iframe PHP 中显示来自 mysql 数据库的 URL？

> ID：15867867
> 
> 赞同：-1
> 
> 时间：2013-04-07T21:11:37.697
> 
> 标签：php, mysql, iframe

我需要在 mysql 数据库的 php 文件中显示 iframe 的 URL。

URL 存储在 mysql 数据库中的一个名为 videourl 的表和一个名为 videourl 的列中。

我可以从 mysql 数据库中获取 URL 并在 php 页面上回显它，但我不能将它用作 n iframe scr！

这是我到目前为止所做的：

```
<?php

echo  "<iframe src=\"{$videourl}\" style=\"background: #fff;\" frameborder=\"0\" height=\"450\" scrolling=\"auto\" width=\"100%\"></iframe>";  

?> 
```

但这由于某种原因不起作用。并且它不起作用我的意思是它不会在 PHP 页面上显示任何内容！

这样做的最好方法是什么？

谢谢

**编辑：这是我的新闻代码，仍然不起作用：**

```
<?php
$con=mysqli_connect("localhost","db_username","password","db_name");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM videourl");

while($row = mysqli_fetch_array($result))
  {
  echo "<td>" . $row['videourl'] . "</td>";
  }

  echo "<iframe src=\" . $videourl . \" style=\"background: #fff;\" frameborder=\"0\" height=\"450\" scrolling=\"auto\" width=\"100%\"></iframe>";

?> 
```

**最终编辑：**

好的，我已经做到了。

如果有人感兴趣，您应该这样做：

```
while($row = mysqli_fetch_array($result))
  {
  $id = $row["id"];
  $videourl = $row["videourl"];
  $date_added = $row["date_added"];
  }
echo  "<iframe src=\"{$videourl}\" style=\"background: #fff;\" frameborder=\"0\" height=\"100%\" scrolling=\"auto\" width=\"100%\"></iframe>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:22:15.770

你做错了什么是你忘记设置`$videourl`.

您在 中提取了一个结果行`$row`。之后，您必须分配`$row["videourl"]`给`$videourl`，否则`$videourl`将为空，您的`iframe src`将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:19:44.983

花括号是怎么回事？试试这个。

```
echo  "<iframe src='$videourl' style='background: #fff;' frameborder='0' height='450' scrolling='auto' width='100'></iframe>"; 
```

# c++ - 访问二维数组c ++元素的成员

> ID：15867870
> 
> 赞同：1
> 
> 时间：2013-04-07T21:11:59.857
> 
> 标签：c++, arrays, multidimensional-array

我无法访问数组中元素的数据成员。我有一个 gamePiece 类型的数组，它是我在单独的标题中定义的一个类。gamePiece 有一个字符串数据成员“name”，我需要从我的 gameBoard 文件中的一个函数设置它，一个 gameBoard 是一个二维数组 gamePieces。每当我尝试运行称为“readBoard”的主程序时，它会在尝试为其中一个游戏块分配“名称”时停止。我究竟做错了什么？

```
//gamePiece.h file
#ifndef GAMEPIECE_H_INCLUDED
#define GAMEPIECE_H_INCLUDED
#include <string>

using namespace std;

class gamePiece //not a struct b/c there are other functions not included here
{
    public:
        string name;
        int row;
}

//gameBoard.h
class gameBoard
{
    public:

    gamePiece board[][6];
    int foxCount, sheepCount;
    void readBoard(istream& boardFile);
    //void printBoard();
};

//gameBoard.cpp
void gameBoard::readBoard(istream& boardFile)
{
    int tFoxCount = 0;
    int tSheepCount = 0;                                                                    
    gamePiece tBoard[6][6];
    gamePiece tPiece;

    tboard[0][0].name = "Sherry";  

    cout << tboard[0][0].name;
} 
```

# c++ - C++ 布尔值在 2-3 树搜索中总是错误地返回 true

> ID：15867874
> 
> 赞同：0
> 
> 时间：2013-04-07T21:12:28.753
> 
> 标签：c++, search, tree, boolean

我真的在这家伙身上扯掉我的头发。这就是问题所在。我已经硬编码了一个 2-3 树，并验证了它可以使用输出它当前所在节点的值的中序遍历函数工作。所以我知道树是正确构建的。

```
 Node *r;
  Node zero,one,two,three,four,five,six,seven,eight,nine,ten;
  r = &zero;

          //Root
 zero.small = 50;
 zero.large = 90;
 zero.left = &one;       //Child node to the left
 zero.middle = &four;    //Child node in the middle
 zero.right = &seven;    //Child node to the right

  //Left Tree
 one.small = 20;
 one.large = NULL;
 one.left = &two;
 one.middle = NULL;
 one.right = &three;

 two.small = 10;
 two.large = NULL;
 two.left = NULL;
 two.middle = NULL;
 two.right = NULL;

 three.small = 30;
 three.large = 40;
 three.left = NULL;
 three.middle = NULL;
 three.right = NULL;

  //Middle Tree
 four.small = 70;
 four.large = NULL;
 four.left = &five;
 four.middle = NULL;
 four.right = &six;

 five.small = 60;
 five.large = NULL;
 five.left = NULL;
 five.middle = NULL;
 five.right = NULL;

 six.small = 80;
 six.large = NULL;
 six.left = NULL;
 six.middle = NULL;
 six.right = NULL;

  //Right Tree
 seven.small = 120;
 seven.large = 150;
 seven.left = &eight;
 seven.middle = &nine;
 seven.right = &ten;

 eight.small = 100;
 eight.large = 110;
 eight.left = NULL;
 eight.middle = NULL;
 eight.right = NULL;

 nine.small = 130;
 nine.large = 140;
 nine.left = NULL;
 nine.middle = NULL;
 nine.right = NULL;

 ten.small = 160;
 ten.large = NULL;
 ten.left = NULL;
 ten.middle = NULL;
 ten.right = NULL;

 cout<<"inorder traversal for debug"<<endl;
 inOrder(*r); 
```

输出为：10 20 30 40 50 60 70 80 90 100 110 120 130 140 150 160

这样就证明了树是正确构建的。我被要求修改代码以在树中搜索值。所以我在下面写了这个函数，它本质上是中序遍历函数减去输出和一个简单的 if 语句，如果在树中找到搜索键，则返回 TRUE。

```
bool retrieve(Node r, int key)
{
 if (r.left)
    retrieve(*r.left, key);
 if (r.small)
 {
     if (r.small == key)
    {
        cout<<"The node: "<<r.small<<" is equal to search key: "<<key<<endl; //for debug purposes
        return true;
    }
 }
 if (r.middle)
    retrieve(*r.middle, key);
 if (r.large)
 if (r.right)
    retrieve(*r.right, key);  
} 
```

提示用户输入要搜索的数字（int 键），并在输入时输入 if 语句

```
if (retrieve(*r, key))
 {
     cout<<key<<" is found!"<<endl;
 }
 else
     cout<<key<<" is not found!"<<endl; 
```

现在的问题是这对我来说在逻辑上似乎是合理的，但是当我输入值“85”（根本不在树上）时，程序输出“85 is found!”。**注意它没有输出我在函数中的 COUT 语句。**`cout<<"The node: "<<r.small<<" is equal to search key: "<<key<<endl;`我已经调试并逐步完成了程序，无论 bool 函数（检索）总是返回 true ......什么？所以我在输入“60”（位于树上）时切换了 bool 函数中的 if 语句以返回 false（仅用于调试目的），布尔函数仍然返回 true。我尝试了几种略有不同的代码组合，但无济于事..到底发生了什么？

提前致谢，

泰勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:17:42.840

您永远不会返回值，除非在`if (r.small == key)`分支中。

从[2-3 树 - 维基百科](http://en.wikipedia.org/wiki/2%E2%80%933_tree)，我会说你的代码应该首先将`key`与`small`和`large`键进行比较，然后根据比较返回结果`retrieve(*r.left/middle/right, key)`。

这些方面的东西（*未经测试*）

```
if (key < r.small)
    return retrieve(*r.small, key);

if (key == r.small)
    return TRUE;

if (r.right == NULL)
    return retrieve(*r.middle, key);

if (key < r.large)
    return retrieve(*r.middle, key);

if (key == r.large)
    return TRUE;

return retrieve(*r.right, key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:24:53.507

需要先检查在当前节点中是否找到了key，无论是small还是large，如果是，则返回true。如果不是，则需要在每个包含的节点上递归调用retrieve，如果其中任何一个返回true，则返回true。如果您的函数尚未返回，则需要返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T01:39:36.323

您需要进行初始测试以查看递归是否应该停止，因为您至少是节点。

```
// precondition: current is not 0
// returns: true or false. If true, location is set to the node 
// where it was found.
bool DoSearch(Node *current, int key, Node *location)
{
 /*
  * Is key in current?
  */
if (current->smallValue == key || (current->isThreeNode() 
       && current->largeValue == key)) {

    location = current;
    return true;

} else if ((current->isLeafNode())) {

    location = current;
    return false;
 /*
  *  Does current have two keys?
  */
} else if (current->isThreeNode()){

    if (key < current->smallValue) {

        DoSearch(key, current->leftChild, location);

    }  else if (key < current->largeValue) {

        DoSearch(key, current->middleChild, location);

    } else {

        DoSearch(key, current->rightChild, location);
    }

} else { // ...or only one?

     if (key < current->smallValue) {

        DoSearch(key, current->leftChild, location);

    }  else {

        DoSearch(key, current->rightChild, location);
    }
}
} 
```

# ruby-on-rails - 如何使用股票推特库？

> ID：15867876
> 
> 赞同：0
> 
> 时间：2013-04-07T21:12:32.087
> 
> 标签：ruby-on-rails, ruby, gem, stocktwits

我正在用 Ruby 构建一个 stocktwits 应用程序。我想通过 Stocktwits.com API 检索数据。我在 github 上找到了这个库：[https](https://github.com/jesseyoungmann/omniauth-stocktwits) ://github.com/jesseyoungmann/omniauth-stocktwits 。但我是 Ruby 和 Rails 的新手。我对如何使用它感到困惑。我可以在不将其添加到 Rails 项目的情况下使用它吗？我的意思是我不需要创建 Rails 项目就可以使用它。如果我需要将它添加到 Rails 项目中，我应该如何添加它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:17:25.460

您确实需要有一个 Rails 应用程序才能使用它。您可以通过添加将其添加到您的项目中

```
 gem 'omniauth-stocktwits' 
```

到`Gemfile`项目的根目录中，然后运行`bundle install`​​.

然后按照[README](https://github.com/jesseyoungmann/omniauth-stocktwits/blob/master/README.md)中的说明进行操作，其中涉及在 Rails 应用程序的 initialisers 目录中创建一个文件。

# php - 我的 PHP 信用卡表单无法识别某些输入和错误

> ID：15867878
> 
> 赞同：0
> 
> 时间：2013-04-07T21:12:45.143
> 
> 标签：php, forms, credit-card

我正在关注 John Conde 关于 Authorize.net 的信用卡输入表单的教程，该表单使用 PHP 和错误检测。

它很完美，但我决定添加用于输入付款金额的输入框，并删除了不需要的送货地址要求；

现在，当提交的表单输入不正确或为空时，它们不再变为红色，“金额”框也不会真正识别它是空的还是填充的。错误框仍然会弹出错误的信用卡提交。

这是页面（减去简化故障排除的设计）；

[http://teetimelawncare.com/payment-form.php](http://teetimelawncare.com/payment-form.php)

编辑：删除了与信用卡无关的代码和诸如州和年份到期日期之类的东西，以使其更小。最底部的 PHP 代码是用于在用户错误填写表单时向用户显示的红色错误弹出框。

如果有人想比较，我在教程的这一部分：http: [//community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-5-Processing-付款和处理/ba-p/10768](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-5-Processing-Payment-and-Handling/ba-p/10768)

代码：

```
<?php
    $errors = array();
    if ('POST' === $_SERVER['REQUEST_METHOD'])
    {
        $credit_card           = sanitize($_POST['credit_card']);
        $expiration_month      = (int) sanitize($_POST['expiration_month']);
        $expiration_year       = (int) sanitize($_POST['expiration_year']);
        $cvv                   = sanitize($_POST['cvv']);
        $cardholder_first_name = sanitize($_POST['cardholder_first_name']);
        $cardholder_last_name  = sanitize($_POST['cardholder_last_name']);
        $billing_address       = sanitize($_POST['billing_address']);
        $billing_address2      = sanitize($_POST['billing_address2']);
        $billing_city          = sanitize($_POST['billing_city']);
        $billing_state         = sanitize($_POST['billing_state']);
        $billing_zip           = sanitize($_POST['billing_zip']);
        $telephone             = sanitize($_POST['telephone']);
        $email                 = sanitize($_POST['email']);
        $account  = sanitize($_POST['account']);
        $amount   = sanitize($_POST['amount']);

        if (!validateCreditcard_number($credit_card))
        {
            $errors['credit_card'] = "Please enter a valid credit card number";
        }
        if (!validateCreditCardExpirationDate($expiration_month, $expiration_year))
        {
            $errors['expiration_month'] = "Please enter a valid exopiration date for your credit card";
        }
        if (!validateCVV($credit_card, $cvv))
        {
            $errors['cvv'] = "Please enter the security code (CVV number) for your credit card";
        }
        if (empty($cardholder_first_name))
        {
            $errors['cardholder_first_name'] = "Please provide the card holder's first name";
        }
        if (empty($cardholder_last_name))
        {
            $errors['cardholder_last_name'] = "Please provide the card holder's last name";
        }
        if (empty($billing_address))
        {
            $errors['billing_address'] = 'Please provide your billing address.';
        }
        if (empty($billing_city))
        {
            $errors['billing_city'] = 'Please provide the city of your billing address.';
        }
        if (empty($billing_state))
        {
            $errors['billing_state'] = 'Please provide the state for your billing address.';
        }
        if (!preg_match("/^\d{5}$/", $billing_zip))
        {
            $errors['billing_zip'] = 'Make sure your billing zip code is 5 digits.';
        }
        if (empty($telephone))
        {
            $errors['telephone'] = 'Please provide a telephone number where we can reach you if necessary.';
        }
        if (!filter_var($email, FILTER_VALIDATE_EMAIL))
        {
            $errors['email'] = 'Please provide a valid email address';
        }
        if (empty($account))
        {
            $errors['account'] = 'Please provide the Your Customer ID Number from your billing statement.';
        }
        if (empty($amount))
        {
            $errors['amount'] = 'Please enter a payment amount.';
        }
        // If there are no errors let's process the payment
        if (count($errors) === 0)
        {
            // Format the expiration date
            $expiration_date = sprintf("%04d-%02d", $expiration_year, $expiration_month);

            // Include the SDK
            require_once('./config.php');

            // Process the transaction using the AIM API
            $transaction = new AuthorizeNetAIM;
            $transaction->setSandbox(AUTHORIZENET_SANDBOX);
            $transaction->setFields(
                array(
                'amount' => $amount,
                'card_num' => $credit_card,
                'exp_date' => $expiration_date,
                'first_name' => $cardholder_first_name,
                'last_name' => $cardholder_last_name,
                'address' => $billing_address,
                'city' => $billing_city,
                'state' => $billing_state,
                'zip' => $billing_zip,
                'email' => $email,
                'card_code' => $cvv,
                'Customer ID Number' => $account,

                )
            );
            $response = $transaction->authorizeAndCapture();
            if ($response->approved)
            {
                // Transaction approved. Collect pertinent transaction information for saving in the database.
                $transaction_id     = $response->transaction_id;
                $authorization_code = $response->authorization_code;
                $avs_response       = $response->avs_response;
                $cavv_response      = $response->cavv_response;

                // Put everything in a database for later review and order processing
                // How you do this depends on how your application is designed
                // and your business needs.

                // Once we're finished let's redirect the user to a receipt page
                header('Location: thank-you-page.php');
                exit;
            }
            else if ($response->declined)
            {
                // Transaction declined. Set our error message.
                $errors['declined'] = 'Your credit card was declined by your bank. Please try another form of payment.';
            }
            else
            {
                // And error has occurred. Set our error message.
                $errors['error'] = 'We encountered an error while processing your payment. Your credit card was not charged. Please try again or contact customer service to place your order.';

    }
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>Payment Form</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <meta http-equiv="Content-Language" content="en-us">
        <style type="text/css">
            #errormessage
            {
                background-color: #FFE7E7;
                border: 3px solid #CC0033;
                color: #000000;
                margin: 20px ;
                padding: 10px;
                width: 420px;
                -moz-border-radius: 6px;
                -webkit-border-radius: 6px;
                border-radius: 6px;
                -moz-box-shadow: 5px 5px 5px #ccc;
                -webkit-box-shadow: 5px 5px 5px #ccc;
                box-shadow: 5px 5px 5px #ccc;
                background: -webkit-gradient(linear, 0 0, 0 bottom, from(#FFEAEA), to(#FFB3B3));
                background: -moz-linear-gradient(#FFEAEA, #FFB3B3);
                background: linear-gradient(#FFEAEA, #FFB3B3);
                float: left;
            }
            .labelerror
            {
                color: #ff0000;
                font-weight: bold;
            }
            h3 {
    font-size: 1.6em;
    line-height: 10px;
    padding-left: 17px;
    padding-top: 8px;
    -webkit-font-smoothing: antialiased;;

}
            #credit
            {
            Position: relative;
            margin-left: 14px;
            height:620px;
            width:400px;
             -webkit-border-radius: 6px;
                border-radius: 6px;
                -moz-box-shadow: 5px 5px 5px #ccc;
                -webkit-box-shadow: 5px 5px 5px #ccc;
                box-shadow: 5px 5px 5px #ccc;
                float: left;
            }
            #amount1
            {
            margin: 5px;
            height:620px;
            position: relative;
            width:400px;
             -webkit-border-radius: 6px;
                border-radius: 6px;
                -moz-box-shadow: 5px 5px 5px #ccc;
                -webkit-box-shadow: 5px 5px 5px #ccc;
                box-shadow: 5px 5px 5px #ccc; 
                float: left;
                }
        </style>
    </head>
    <body>

 <div id="amount1">  <h3> Payment Amount</h3><p>
               <form id="myform"> <label for="amount"<?php if (in_array('amount', $errors)) echo ' class="labelerror"'; ?>> $</label>
                <input type="text" name="amount" id="amount" maxlength="5" value=""></form>
            </p>  <br><div id="phpdisplay"> <form action="payment-form.php" method="get" enctype="application/x-www-form-urlencoded" target="_self" id="search">
     <strong>Get your current balance by searching<br> your Customer ID number</strong><br>(Don't Know? Ask us on live chat or check your billing invoice):<br> <input type="text" name="term" /><br />
    <input type="submit" name="btn" value="Search" />
    </form>

</form></div>
<div id="credit">
<h3> Credit Card Information</h3>
        <form id="myform" action="/payment-form.php" method="post">

 <p>
                <label for="credit_card"<?php if (in_array('credit_card', $errors)) echo ' class="labelerror"'; ?>>Credit Card Number</label>
                <input type="text" name="credit_card" id="credit_card" autocomplete="off" maxlength="19" value="">
            </p>
            <p>
                <label for="expiration_month"<?php if (in_array('expiration_month', $errors)) echo ' class="labelerror"'; ?>>Expiration Date</label>
                <select name="expiration_month" id="expiration_month">

                    <option value="12">12</option>
                </select>
                <select name="expiration_year" id="expiration_year">
                    <option value="0"> </option>

                    <option value="2019">2019</option>
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                </select>
            </p>
            <p>
                <label for="cvv"<?php if (in_array('cvv', $errors)) echo ' class="labelerror"'; ?>>Security Code</label>
                <input type="text" name="cvv" id="cvv" autocomplete="off" value="" maxlength="4">
            </p>
            <p>
                <label for="cardholder_first_name"<?php if (in_array('cardholder_first_name', $errors)) echo ' class="labelerror"'; ?>>Cardholder's First Name</label>
                <input type="text" name="cardholder_first_name" id="cardholder_first_name" maxlength="30" value="">
            </p>
            <p>
                <label for="cardholder_last_name"<?php if (in_array('cardholder_last_name', $errors)) echo ' class="labelerror"'; ?>>Cardholder's Last Name</label>
                <input type="text" name="cardholder_last_name" id="cardholder_last_name" maxlength="30" value="">
            </p>
            <p>
                <label for="billing_address"<?php if (in_array('billing_address', $errors)) echo ' class="labelerror"'; ?>>Billing Address</label>
                <input type="text" name="billing_address" id="billing_address" maxlength="45" value="">
            </p>
            <p>
                <label for="billing_address2"<?php if (in_array('billing_address2', $errors)) echo ' class="labelerror"'; ?>>Suite/Apt #</label>
                <input type="text" name="billing_address2" id="billing_address2" maxlength="45" value="">
            </p>
            <p>
                <label for="billing_city"<?php if (in_array('billing_city', $errors)) echo ' class="labelerror"'; ?>>City</label>
                <input type="text" name="billing_city" id="billing_city" maxlength="25" value="">
            </p>
            <p>
                <label for="billing_state"<?php if (in_array('billing_state', $errors)) echo ' class="labelerror"'; ?>>State</label>
                <select id="billing_state" name="billing_state">
                    <option value="0"> </option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>

                </select>
            </p>
            <p>
                <label for="billing_zip"<?php if (in_array('billing_zip', $errors)) echo ' class="labelerror"'; ?>>Zip Code</label>
                <input type="text" name="billing_zip" id="billing_zip" maxlength="5" value="">
            </p>
            <p>
                <label for="telephone"<?php if (in_array('telephone', $errors)) echo ' class="labelerror"'; ?>>Telephone Number</label>
                <input type="text" name="telephone" id="telephone" maxlength="20" value="">
            </p>
            <p>
                <label for="email"<?php if (in_array('email', $errors)) echo ' class="labelerror"'; ?>>Email Address</label>
                <input type="text" name="email" id="email" maxlength="20" value="">
            </p>
            <p>
                <label for="account"<?php if (in_array('account', $errors)) echo ' class="labelerror"'; ?>>Customer ID number</label>
                <input type="text" name="account" id="account" maxlength="6" value="">
            </p>

            <p>
                <input type="submit" value="Checkout">
            </p>
        </form></div><?php
    if (count($errors))
    {
?>
        <div id="errormessage">
            <h2>
                There was an error with your submission. Please make the necessary corrections and try again.
            </h2>
            <ul>
<?php
            foreach ($errors as $error)
            {
?>
                <li><?php echo $error; ?></li>
<?php
            }
?>
            </ul>
        </div>
<?php
    }
?>
    </body>
</html> 
```

最后，我想将结帐按钮移到 div 表单之外，所以我制作了这样的按钮（在设计页面中，而不是上面的示例）

```
</form> <br>
    <form id="myform"><p class="center">
                <button form="myform" input type="submit" value="Checkout">
            </p></form> 
```

该按钮有效，但它没有在我的（WIP）设计页面上将值显示为标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:21:44.787

这：

```
<button form="myform" input type="submit" value="Checkout"> 
```

不是`<button>`元素的构造方式。看起来您试图更改`<input />`. 这可能是您所追求的：

```
<button form="myform" type="submit">Checkout</button> 
```

看起来您正在复制`id`两个不同的表单，这是无效的。删除`id`包装提交按钮的表单上的 ，或将其更改为其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:53:18.257

在我看来，这实际上是几个问题。由于有几个，我可能会混淆一些东西，有人指出我是否有明显的错误。

回复：““金额”框实际上可以识别它是空的还是填充的。” --

You can't split the amount off into it's own form and have it go along with the rest of the elements in the other form element. Everything you want to post has to be in the same form element. (Unless you use the html5 form attribute, but I don't think IE supports this yet. Someone correct me if I'm wrong please. Even then, you wouldn't be adding more form elements if I recall correctly.) See: [Is it possible to wrap html form elements in multiple form tags?](https://stackoverflow.com/questions/9433264/is-it-possible-to-wrap-html-form-elements-in-multiple-form-tags) See the comments in the accepted answer for more details.

Regarding the boxes not changing with errors. --

```
<label for="billing_address2"<?php if (in_array('billing_address2', $errors)) echo ' class="labelerror"'; ?>>Suite/Apt #</label> 
```

Should probably be:

```
<label for="billing_address2"<?php if (in_array('billing_address2', array_keys($errors))) echo ' class="labelerror"'; ?>>Suite/Apt #</label> 
```

Your array is keyed with the element names, so your in_array should search the keys of the errors array. (Note that this will change the labels colors, not the input boxes themselves. Put the class-setting code on the boxes if you want the boxes themselves to change.)

Button is addressed in another answer:

```
<button form="myform" type="submit">Checkout</button> 
```

HTML5 outside of form element. Again, not sure if IE supports this. No need to wrap it in a form element btw, assuming you're targeting browsers that support the form attribute.

```
<button type="submit">Checkout</button> 
```

Inside form.

# php - PHP变量认证

> ID：15867885
> 
> 赞同：1
> 
> 时间：2013-04-07T21:13:27.780
> 
> 标签：php, security

用php编写文件进行身份验证是一个坏主意吗？

一个例子：

用户提交登录表单。如果凭据无效，PHP 会写入一个新文件，文件名作为尝试的用户名，内容将包含一个包含尝试次数的变量。然后该文件将包含在下一次登录尝试中，如果登录尝试= 2 或其他，则显示 reCaptcha。

这种技术有什么明显的缺陷吗？我看到大多数建议使用数据库来存储登录尝试等，我这样做没有问题，但我只是好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:17:21.147

文件只是数据库的另一种形式。如果您仔细实施此解决方案，则通过数据库或通过文件实施此解决方案没有真正的区别。

问题是通过文件管理会话并编写所有代码以正确执行此操作的额外开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:29:02.367

最后，数据库也对文件进行操作，但内存中的数据库除外。自己处理文件效率不高。数据库解决了您在自己写入/读取文件时将面临的一些复杂问题，例如这里提到的[数据库与平面文件](https://stackoverflow.com/questions/2356851/database-vs-flat-files)

# vlc - VLC 2.0.5 中的 h264 编解码器

> ID：15867886
> 
> 赞同：0
> 
> 时间：2013-04-07T21:13:31.933
> 
> 标签：vlc

似乎最新的 VLC（2.0.5；32 位和 64 位版本）无法进行 h264 压缩（尽管 VP8 和 WMV2 工作正常）。尽管没有错误，但生成的文件几乎是空的。这是一个已知的错误还是有人知道我做错了什么？我在下面放了一个调试输出，但它太神秘了，我无法理解。

```
qt4 调试：MRL 传递给 Sout：file:///C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi
qt4 警告：转码 MRL：sout=#transcode{vcodec=h264,vb=0,scale=0,acodec=mp3,ab=128,channels=2,samplerate=44100}:std{access=file,mux=mp4, dst='C:\Users\me\Videos\finaltest.mp4'}
qt4 调试：添加选项：file-caching=300
qt4 调试：添加选项：sout=#transcode{vcodec=h264,vb=0,scale=0,acodec=mp3,ab=128,channels=2,samplerate=44100}:std{access=file,mux=mp4, dst='C:\Users\me\Videos\finaltest.mp4'}
主要调试：添加项目“流媒体”（file:///C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi）
qt4 调试：向最近的 MRL 添加新的 MRL：file:///C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi
主要调试：重建当前数组 - 根播放列表
主要调试：重建完成 - 2 项，索引 0
主要调试：处理请求项：流，节点：播放列表，跳过：0
主要调试：在 Streaming 上重新同步
主要调试：流媒体在 1
主要调试：开始播放新的播放列表项
主要调试：在 Streaming 上重新同步
主要调试：流媒体在 1
主调试：创建新的输入线程
主要调试：为“流式传输”创建输入
主要调试：使用 sout chain=`transcode{vcodec=h264,vb=0,scale=0,acodec=mp3,ab=128,channels=2,samplerate=44100}:std{access=file,mux=mp4,dst ='C:\Users\me\Videos\finaltest.mp4'}'
主调试：stream=`std'
主要调试：寻找 sout 流模块：1 个候选者
主要调试：设置配置选项：sout-standard-access to file
主要调试：设置配置选项：sout-standard-mux to mp4
主要调试：设置配置选项：sout-standard-dst 到 C:\Users\me\Videos\finaltest.mp4
主要调试：寻找 sout 访问模块：1 个候选者
access_output_file 调试：打开文件访问输出 (C:\Users\me\Videos\finaltest.mp4)
主要调试：使用 sout 访问模块“access_output_file”
主调试：TIMER module_need()：2.413 ms - 总计 2.413 ms / 1 intvls（平均 2.413 ms）
主要调试：寻找 sout mux 模块：1 个候选者
mux_mp4 调试：打开 Mp4 多路复用器
主要调试：使用 sout mux 模块“mux_mp4”
主要调试：TIMER module_need()：1.131 ms - 总计 1.131 ms / 1 intvls（平均 1.131 ms）
stream_out_standard 调试：使用 `file/mp4://C:\Users\me\Videos\finaltest.mp4'
主要调试：使用 sout 流模块“stream_out_standard”
主要调试：TIMER module_need()：5.368 ms - 总计 5.368 ms / 1 intvls（平均 5.368 ms）
主要调试：流=`转码'
主要调试：寻找 sout 流模块：1 个候选者
主要调试：设置配置选项：sout-transcode-vcodec 为 h264
主要调试：设置配置选项：sout-transcode-vb 为 0
主要调试：设置配置选项：sout-transcode-scale 为 0
主要调试：设置配置选项：sout-transcode-acodec 到 mp3
主要调试：设置配置选项：sout-transcode-ab 为 128
主要调试：设置配置选项：sout-transcode-channels 为 2
主要调试：设置配置选项：sout-transcode-samplerate 为 44100
stream_out_transcode 调试：编解码器音频=mp3 44100Hz 2 通道 128Kb/s
stream_out_transcode 调试：编解码器视频=h264 0x0 缩放：0.000000 0kb/s
主要调试：使用 sout 流模块“stream_out_transcode”
主要调试：TIMER module_need()：4.629 ms - 总计 4.629 ms / 1 intvls（平均 4.629 ms）
主要调试：在路径“C:\Users\me\AppData\Local\Temp”中使用 50 MiB 的时移粒度
主要调试：`file:///C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi' 提供访问 `file' demux `' path `/C:/Users /me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi'
主要调试：创建 demux：access='file' demux='' location='/C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi' file='C: \Users\me\Videos\vlc-record-2013-04-07-11h41m28s-dshow___-.avi'
主要调试：寻找 access_demux 模块：3 个候选者
主调试：无法加载与“文件”匹配的 access_demux 模块
主要调试：TIMER module_need()：0.496 ms - 总计 0.496 ms / 1 intvls（平均 0.496 ms）
主要调试：创建访问 '文件' location='/C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi', path='C:\Users\me\Videos \vlc-record-2013-04-07-11h41m28s-dshow___-.avi'
主要调试：寻找访问模块：3 个候选者
文件系统调试：打开文件 `C:\Users\me\Videos\vlc-record-2013-04-07-11h41m28s-dshow___-.avi'
主要调试：使用访问模块“文件系统”
主要调试：TIMER module_need()：0.432 ms - 总计 0.432 ms / 1 intvls（平均 0.432 ms）
主要调试：对 AStream 使用流方法*
主调试：开始预缓冲
主调试：0 ms 后收到第一个数据
主要调试：预缓冲在 0 秒内完成 1024 个字节 - 16393 KiB/s
主要调试：寻找 stream_filter 模块：4 个候选者
主要调试：无法加载匹配“任何”的流过滤器模块
主要调试：TIMER module_need()：0.161 ms - 总计 0.161 ms / 1 intvls（平均 0.161 ms）
主要调试：寻找 stream_filter 模块：1 个候选者
主要调试：使用 stream_filter 模块“stream_filter_record”
主要调试：TIMER module_need()：0.133 ms - 总计 0.133 ms / 1 intvls（平均 0.133 ms）
主要调试：创建 demux：access='file' demux='' location='/C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi' file='C: \Users\me\Videos\vlc-record-2013-04-07-11h41m28s-dshow___-.avi'
主要调试：寻找 demux 模块：55 个候选人
avi调试：
avi调试：
avi调试：
avi调试：
avi调试：
avi调试：
avi调试：
avi 调试：跳过 movi 块
avi调试：
avi 调试：* LIST-root 大小：142188528 位置：0
avi 调试：+ RIFF-AVI 大小：142188520 位置：0
avi 调试：| + LIST-hdrl 大小：10208 位置：12
avi 调试：| | + avih 尺寸：56 位置：24
avi 调试：| | + LIST-strl 大小：116 位置：88
avi 调试：| | | + strh 大小：56 位置：100
avi 调试：| | | + strf 大小：40 位置：164
avi 调试：| | + LIST-strl 大小：94 位置：212
avi 调试：| | | + strh 大小：56 位置：224
avi 调试：| | | + strf 大小：18 位置：288
avi 调试：| | + 垃圾尺寸：9906 位置：314
avi 调试：| + LIST-movi 大小：142176764 位置：10228
avi 调试：| + idx1 尺寸：1520 位置：142187000
avi 调试：AVIH：2 流，标志 HAS_INDEX IS_INTERLEAVED TRUST_CKTYPE
avi 调试：流 [0] 速率：4997 规模：1000 样本大小：0
avi 调试：流 [0] 视频（YUY2）1920x1080 24bpp 4.997000fps
主调试：选择程序 id=0
avi 调试：流 [1] 速率：176372 比例：4 样本大小：4
avi 调试：stream[1] audio(0x1 - ) 2 个通道 44​​100Hz 16bits
主要调试：为“流式传输”创建输入
avi 调试：为流 [0] 选择的标准索引
avi 调试：为流 [1] 选择的标准索引
avi 调试：stream[0] 创建了 34 个索引条目
avi 调试：stream[1] 创建了 61 个索引条目
avi 调试：流 [0] 长度：6（基于索引）
avi 调试：流 [1] 长度：6（基于索引）
主要调试：使用解复用模块“avi”
主要调试：TIMER module_need()：2.590 ms - 总计 2.590 ms / 1 intvls（平均 2.590 ms）
主要调试：在 C:\Users\me\Videos\ 中寻找字幕文件
主要调试：寻找分包器模块：21 个候选者
主要调试：使用打包模块“rawvideo”
主要调试：TIMER module_need()：0.643 ms - 总计 0.643 ms / 1 intvls（平均 0.643 ms）
主要调试：寻找分包器模块：21 个候选者
qt4 调试：IM：设置输入
主要调试：使用分包器模块“packetizer_copy”
主要调试：TIMER module_need()：5.806 ms - 总计 5.806 ms / 1 intvls（平均 5.806 ms）
主要调试：以同步模式启动
主要调试：寻找元阅读器模块：2 个候选者
lua 调试：在 C:\Users\me\AppData\Roaming\vlc\lua\meta\reader 中尝试 Lua 脚本
lua 调试：在 C:\Program Files\VideoLAN\VLC\lua\meta\reader 中尝试 Lua 脚本
lua 调试：尝试 Lua 播放列表脚本 C:\Program Files\VideoLAN\VLC\lua\meta\reader\filename.luac
主要调试：（null）不需要获取（目前艺术（null））
主要调试：无法加载匹配“任何”的元阅读器模块
主要调试：TIMER module_need()：2.885 ms - 总计 2.885 ms / 1 intvls（平均 2.885 ms）
主调试：`file:///C:/Users/me/Videos/vlc-record-2013-04-07-11h41m28s-dshow___-.avi' 成功打开
主调试：缓冲 0%
主要调试：切换到异步模式
主要调试：添加新的 sout 输入 (sout_input:000000000399d820)
stream_out_transcode 调试：创建从 fcc=`YUY2' 到 fcc=`h264' 的视频转码
主调试：缓冲 8%
主要调试：寻找解码器模块：32个候选
主要调试：使用解码器模块“rawvideo”
主要调试：TIMER module_need()：4.216 ms - 总计 4.216 ms / 1 intvls（平均 4.216 ms）
主要调试：寻找编码器模块：13个候选者
x264 调试：版本 x264 0.129.X
主要调试：添加新的 sout 输入 (sout_input:00000000039f4610)
主要调试：缓冲 16%
主要调试：缓冲 25%
主要调试：缓冲 33%
主要调试：缓冲 41%
主要调试：缓冲 50%
主要调试：缓冲 58%
主调试：缓冲 66%
主要调试：使用编码器模块“x264”
主要调试：TIMER module_need()：9.890 ms - 总计 9.890 ms / 1 intvls（平均 9.890 ms）
主要调试：删除模块“x264”
x264 调试：仍在 libx264 缓冲区中的帧数：0
主要调试：缓冲 75%
主要调试：缓冲 83%
主要调试：缓冲 91%
主要调试：缓冲 100%
主要调试：流缓冲完成（27 毫秒内 325 毫秒）
stream_out_transcode 调试：创建从 fcc=`s16l' 到 fcc=`mp3' 的音频转码
主要调试：寻找解码器模块：32个候选
原始调试：采样率：44100Hz 通道：2 位/采样：16
主要调试：使用解码器模块“araw”
主要调试：TIMER module_need()：0.111 ms - 总计 0.111 ms / 1 intvls（平均 0.111 ms）
主要调试：寻找编码器模块：13个候选者
avcodec 调试：libavcodec 已初始化（接口 0x361e00）
avcodec 调试：找到编码器 MPEG I/II 第 3 层
主要调试：使用编码器模块“avcodec”
主要调试：TIMER module_need()：4.349 ms - 总计 4.349 ms / 1 intvls（平均 4.349 ms）
stream_out_transcode 调试：寻找过滤器（s16l->s32l，通道 2->2，速率 44100->44100）
主要调试：寻找音频过滤器模块：13个候选
audio_format 调试：s16l->f32l，每个样本的位数：16->32
主要调试：使用音频过滤器模块“audio_format”
主要调试：TIMER module_need()：0.094 ms - 总计 0.094 ms / 1 intvls（平均 0.094 ms）
主要调试：过滤器'audio_format'（0000000003952fc8）附加到链
主要调试：寻找音频过滤器模块：13个候选
audio_format 调试：f32l->s32l，每个样本的位数：32->32
主要调试：使用音频过滤器模块“audio_format”
主要调试：TIMER module_need()：0.062 ms - 总计 0.062 ms / 1 intvls（平均 0.062 ms）
主要调试：过滤器'audio_format'（0000000003954c38）附加到链
stream_out_transcode 调试：得到完整的音频过滤器链
主要调试：添加新输入
mux_mp4 调试：添加输入
主要调试：解码器缓冲在 5 毫秒内完成
stream_out_transcode 调试：解码器方面为 1.777778:1
stream_out_transcode 调试：源像素纵横比为 1.000000:1
stream_out_transcode 调试：缩放像素纵横比为 1.000000:1
stream_out_transcode 调试：源 1920x1080，目标 1920x1080
stream_out_transcode 调试：编码器方面为 1920:1080
主要调试：寻找视频过滤器2模块：18个候选
swscale 调试：1920x1080 色度：YUY2 -> 1920x1080 色度：I420，使用 Bicubic 进行缩放（质量好）
主要调试：使用视频 filter2 模块“swscale”
主要调试：TIMER module_need()：1.038 ms - 总计 1.038 ms / 1 intvls（平均 1.038 ms）
主要调试：过滤器'Swscale'（00000000039537e8）附加到链
stream_out_transcode 调试：目的地（在视频过滤器之后）1920x1080
主要调试：寻找编码器模块：13个候选者
x264 调试：版本 x264 0.129.X
主要调试：使用编码器模块“x264”
主要调试：TIMER module_need()：6.441 ms - 总计 6.441 ms / 1 intvls（平均 6.441 ms）
主要调试：添加新输入
mux_mp4 调试：添加输入
avi 警告：无法获取数据包标头，跟踪已禁用
主要调试：达到EOF
主要调试：等待解码器fifos清空
主调试：完成输入
主要调试：删除模块“rawvideo”
主要调试：杀死解码器fourcc`YUY2'，FIFO中的0 PES
主要调试：删除 sout 输入 (sout_input:000000000399d820)
主要调试：TIMER 编码视频帧：416.026 ms - 总计 531.820 ms / 35 intvls（平均 15.195 ms）
主要调试：删除模块“rawvideo”
主要调试：删除模块“x264”
x264 调试：仍在 libx264 缓冲区中的帧数：34
主要调试：过滤器 00000000039537e8 从链中删除
主要调试：删除模块“swscale”
mux_mp4 调试：删除输入
主要调试：删除模块“packetizer_copy”
主要调试：杀死解码器fourcc`s16l'，FIFO中的0 PES
主要调试：删除一个 sout 输入 (sout_input:00000000039f4610)
主要调试：TIMER 编码音频帧：0.000 ms - 总计 330.062 ms / 537 intvls（平均 0.615 ms）
主要调试：删除模块“araw”
主要调试：删除模块“avcodec”
主要调试：过滤器 0000000003952fc8 从链中删除
主要调试：删除模块“audio_format”
主要调试：过滤器 0000000003954c38 从链中删除
主要调试：删除模块“audio_format”
mux_mp4 调试：删除输入
主要警告：此多路复用器不再有输入流
主要调试：删除模块“avi”
主要调试：删除模块“stream_filter_record”
主要调试：删除模块“文件系统”
主要调试：程序不再包含 ES
主要调试：死输入
主要调试：销毁无用的sout
主要调试：破坏链...（名称=转码）
主要调试：删除模块“stream_out_transcode”
主要调试：销毁链完成
主要调试：破坏链...（名称=标准）
主要调试：删除模块“stream_out_standard”
主要调试：删除模块“mux_mp4”
mux_mp4 调试：关闭
mux_mp4 调试：电影时长 0s
mux_mp4 调试：创建 0 个块（stco）
mux_mp4 调试：创建 0 个块（stco）
主要调试：删除模块“access_output_file”
access_output_file 调试：文件访问输出关闭
主要调试：销毁链完成
主要调试：在没有请求的情况下更改项目（当前 1/2）
主要调试：没什么可玩的
qt4 调试：IM：删除输入
主要调试：“流式传输”的 TIMER 输入启动：36.462 ms - 总计 36.462 ms / 1 intvls（平均 36.462 ms）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-20T02:25:20.893

尝试安装此编解码器包:)

[http://www.vlccodec.com/](http://www.vlccodec.com/)

希望它在那之后工作！

# wpf - 将 TextBlock 放在另一个 TextBlock 之上

> ID：15867887
> 
> 赞同：1
> 
> 时间：2013-04-07T21:13:39.063
> 
> 标签：wpf, c#-4.0, visibility, textblock, dockpanel

我试图实现一个`TextBlock`出现在另一个之上的情况`TextBlock`，玩`Visibility`财产 - 但它还没有工作。

`TextBlock`在里面`DockPanel`：

```
<DockPanel Grid.Row="1" Margin="5">
    <TextBlock Text="Text1" Height="20" HorizontalAlignment="Right" DockPanel.Dock="Right">
        <TextBlock Text="Text2" Background="Aqua" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="{Binding IfDeviceSelected, NotifyOnSourceUpdated=True, Converter={StaticResource  ResourceKey=BoolToVisibilityConverter}}" />
    </TextBlock>

    <TextBlock Text="@Device Focus:" Height="20" HorizontalAlignment="Right" DockPanel.Dock="Right" />
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:38:37.820

您将希望使用 a`Grid`对这些进行分组`TextBlocks`，`DockPanel/StackPanel`不允许重叠控件（没有可怕的边距操作等）

```
 <DockPanel Grid.Row="1" Margin="5" >
     <Grid DockPanel.Dock="Right" >
         <TextBlock Text="Text1" />
         <TextBlock Text="Text2" Background="Aqua" Visibility="{Binding IfDeviceSelected, NotifyOnSourceUpdated=True, Converter={StaticResource  ResourceKey=BoolToVisibilityConverter}}" />
     </Grid>
     <TextBlock Text="@Device Focus:" Height="20" HorizontalAlignment="Right" DockPanel.Dock="Right" />
  </DockPanel> 
```

# javascript - 对象在角度模板重新编译时消失

> ID：15867894
> 
> 赞同：0
> 
> 时间：2013-04-07T21:14:23.313
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

看看这个小提琴：http: [//jsfiddle.net/z9XK3/6/](http://jsfiddle.net/z9XK3/6/)

```
<div ng-app="miniapp">
    <div ng-controller="Ctrl">
        <span ng-bind-html-unsafe="variable"></span>       
        <span ng-bind-html-unsafe="variableB"></span>      
        <span class="clone">Clone me Clone me</span>
    </div>    
</div>

<div class="destination"></div>

var $scope;
var app = angular.module('miniapp', []);

function Ctrl($scope) {
    $scope.variable = $('<span>100</span>');
    $scope.variableB = 'String';
}

app.directive('clone', ['$compile', function($compile) {
    return {
        restrict: 'C',
        link: function(scope, element, attrs) {
            element.bind('click', function(){
              var newTemplate = '<span ng-bind-html-unsafe="variable"></span><span ng-bind-html-unsafe="variableB"></span> ';
              var compiledOutput = $compile(newTemplate)(scope);
              scope.$apply();
              compiledOutput.prependTo($('.destination'));
            });
        }
    };
}]); 
```

尝试点击“克隆我克隆我链接”

请注意，在原始模板中，`<span>100</span>`因为它是一个对象而消失了，而“字符串”字符串仍然会出现。

为什么会这样？而且，我怎样才能防止这种情况，一旦我点击“克隆我克隆我”链接，原来的`<span>100</span>`就不会消失？

(Note: this is a simplification of a real problem that I'm facing. In this case I can solve this by wrapping `<div ng-controller="Ctrl"></div>` around the newTemplate variable. However in the real problem I'm facing adding the ng-controller div will not solve the problem so please provide me with some new insights)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:33:17.860

I'm not sure why it's happening, but why exactly do you have `<span>100</span>` wrapped with `$();`? "100" remains after clicking "Clone me Clone me" if you remove `$();`, so if that isn't necessary code your problem is solved.

```
function Ctrl($scope) {
    $scope.variable = '<span>100</span>';
    $scope.variableB = 'String';
} 
```

[http://jsfiddle.net/z9XK3/8/](http://jsfiddle.net/z9XK3/8/)

# c++ - C++、枚举和 OR 条件

> ID：15867895
> 
> 赞同：0
> 
> 时间：2013-04-07T21:14:30.730
> 
> 标签：c++, enums

我有一个具有 3 个值的枚举：

```
enum InputState { Pressed, Released, Held }; 
```

我在这段代码中使用它：

```
//GetState returns an InputState
if(myInput.GetState(keyCode) == InputState::Pressed)
{
    //This means "keyCode" has the state "Pressed"
} 
```

为什么这不起作用？

```
if(myInput.GetState(keyCode) == (InputState::Pressed || InputState::Held))
{
    //This is always false
}
if((myInput.GetState(keyCode) == InputState::Pressed) || (myInput.GetState(keyCode) == InputState::Held))
{
    //This works as intended, triggers when "keyCode" is either Pressed OR Held
} 
```

作为测试，我做了：

```
//Using the same values from the enum, but as int now
if(1 == (1 || 2))
{
    //This works as intended
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:16:28.543

是的，你错过了一些东西。这完全是偶然的：

```
(1 == (1 || 2)) 
```

它不是设置比较。它简单地计算`(1 || 2)`为`true`，然后转换`true`为其整数值 ( `1`)。

同样的事情也会发生

```
(1 == (1 || 4))
(1 == (0 || 1))
(1 == (0 || 4)) 
```

他们都是真的。

但

```
(2 == (1 || 2)) 
```

是假的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:17:03.333

|| 是一个需要两个布尔值的二元运算。在您的示例中，布尔值是使用 == 测试相等性的结果。

要了解您的简化示例为何有效，让我们评估表达式

```
1 == (1 || 2) 
```

We must start inside the parentheses first, so we are going to first evaluate `(1 || 2)`. In C++, any non-zero value is equivalent to `true` when it is used in a boolean expression, so `(1 || 2)` is equivalent to `(true || true)` which evaluates to `true`. So now our expression is

```
1 == true 
```

Again, `1` is equivalent to `true` in this context, so this comparison is the same as `true == true`, which of course evaluates to `true`.

# jquery - 更新剔除变量/属性计算不起作用？

> ID：15867896
> 
> 赞同：0
> 
> 时间：2013-04-07T21:14:33.023
> 
> 标签：jquery, knockout.js

我抓住了一个 jsfiddle 的一些片段，它做了一个分页示例。我的页面顶部有这个：

```
var persons = []; //holds array of names/tables

var viewModel = {
    fields: ko.observableArray(persons),
    pageSize: ko.observable(1),
    pageIndex: ko.observable(0),
}; 

viewModel.pagedRows = ko.dependentObservable(function() {
    var size = this.pageSize();
    var start = this.pageIndex() * size;
    return this.fields.slice(start, start + size);
}, viewModel);

viewModel.maxPageIndex = ko.dependentObservable(function() {
    return Math.ceil(this.fields().length / this.pageSize()) - 1;
}, viewModel); 
```

然后我有一个 jquery ajax 调用来读取一个纯文本文件，并将 viewModel.pageSize 的属性设置为一个值（在我的示例中为 10）并且工作正常。返回对象数组的数据调用更新 viewModel.fields 并且前 10 行显示在屏幕上。

我有一个“window.setinterval”，它每 10 秒调用一次“分页”函数，对数据进行分页：

```
function paging() {
    viewModel.pageIndex(viewModel.pageIndex() + 1);

    if (viewModel.pageIndex() > viewModel.maxPageIndex) {
        viewModel.pageIndex(0);}
} 
```

它几乎可以工作...... pageIndex 不断增加，页面上的数据刷新并在与敲除绑定的“pagedRows”字段子集中显示正确的起点。然而，一旦第一个定时“分页”函数被调用，“pagedRows”突然从包含 10 个对象跃迁到“字段”可观察数组中的所有剩余对象。我不明白为什么？第一次通过它正确地将其设置为 10，然后当它执行切片以获取下一个 10 时，它会这样做，但似乎在它获取的 10 之后附加所有剩余的对象。这就像 viewmodel 的 pagedRows 函数中的“要获取的项目数”出错了。

我毫不怀疑这对我来说将是一个简单的误解，但我现在很难过。一整天都在看这个，我的初学者技能无法解决。

此外，与“maxPageIndex”的比较以触发返回零也无法正常工作，它只会永远增加！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:27:43.707

viewModel.maxPageIndex 是一个dependentObservable。这意味着它是这个花哨的大物体。所以你不能只参考

```
viewModel.maxPageIndex 
```

并期望得到计算值。而是调用

```
viewModel.maxPageIndex.peek() 
```

取回计算值。

请注意，它们不再称为dependentObservables，而是已更改为计算的 observables。

有关更多信息，请参阅[http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)上的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:58:36.463

所以，有几个问题。

首先，我使用的是老式的“dependentObservable”而不是“computed”，但这不是问题，因为它仍然可以这样工作！

其次，我在分页方法中错过了“pageMaxIndex”末尾的括号：

```
if (viewModel.pageIndex() > viewModel.maxPageIndex()) { 
```

现在可以工作并且不需要“偷看”来返回值。

切片问题是因为我的 json 调用返回了页面大小的字符串值。当添加到偏移量时，这会导致结果是连接字符串而不是数字结果。我最终得到的是“1020”而不是“30”！

感谢 CodeThug 的指点

# objective-c - CGPoint 的 NSPredicate 过滤器类

> ID：15867897
> 
> 赞同：3
> 
> 时间：2013-04-07T21:14:36.687
> 
> 标签：objective-c, nspredicate, cgpoint

我有那堂课：

```
@interface Field : NSObject
@property CGPoint fieldCoordinates;
@property CGPoint ballCoordinates;
@end 
```

我尝试过滤此类对象的 NSArray：

```
NSPredicate * y1 = [NSPredicate predicateWithFormat:@"ballCoordinates.y >= %@",location.y];
NSArray * filtered = [self.fieldsArray filteredArrayUsingPredicate:y1]; 
```

但得到错误：

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：此类不符合键 y 的键值编码。”

NSPredicate 对 CGPoint 的过滤器有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T21:22:38.423

是的，`NSPredicate`有问题`CGPoint`，因为它是一个`struct`不符合键值对的 Objective-C 类。您可以改为使用块编写谓词，如下所示：

```
NSPredicate * y1 = [NSPredicate predicateWithBlock: ^BOOL(id obj, NSDictionary *bind) {
    return ((CGPoint)[obj ballCoordinates]).y >= location.y;
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:23:53.520

CGPoint 不是一个对象，它是一个普通的旧 C 结构。
您可以通过在您的 Field 类上创建一个如下所示的只读属性来绕过它。 `@property (nonatomic, readonly) CGFloat yBallCoordinates;`
`- (CGFloat)yBallCoordinates { return self.ballCoordinates.y; }`

* * *

Edit
The block approach pointed by dasblinkenlight is a better solution.
Because it will not involve the necessity of declaring property for every thing you want to predicate on. Which will be more flexible.

# java - Java - JTextPane 中的自动缩进

> ID：15867900
> 
> 赞同：4
> 
> 时间：2013-04-07T21:14:48.597
> 
> 标签：java, swing, jtextpane

我正在用 Java 制作文本编辑器，除了自动缩进之外，我拥有我需要的一切。如果他们转到新行，我如何使缩进保持不变。我正在为我的编辑器窗口使用 JTextPane。

基本上，如果用户输入新行，我希望新行像以前一样缩进。

到目前为止，这是我的缩进代码：

**注意：我的JTextPane是txt，`doc`部分是JTextPane的**`DefaultStyledDocument();`

```
SimpleAttributeSet attributes = new SimpleAttributeSet();

TabStop[] tabStops = new TabStop[3];
tabStops[0] = new TabStop(25, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);
tabStops[1] = new TabStop(25, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);
tabStops[2] = new TabStop(25, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);
tabStops[2] = new TabStop(25, TabStop.ALIGN_LEFT, TabStop.LEAD_DOTS);

TabSet tabSet = new TabSet(tabStops);
StyleConstants.setTabSet(attributes, tabSet);
doc.setParagraphAttributes(0, 0, attributes, false); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:56:05.107

使用文档过滤器：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

public class NewLineFilter extends DocumentFilter
{
    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
        throws BadLocationException
    {
        if ("\n".equals(str))
            str = addWhiteSpace(fb.getDocument(), offs);

        super.insertString(fb, offs, str, a);
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
        throws BadLocationException
    {
        if ("\n".equals(str))
            str = addWhiteSpace(fb.getDocument(), offs);

        super.replace(fb, offs, length, str, a);
    }

    private String addWhiteSpace(Document doc, int offset)
        throws BadLocationException
    {
        StringBuilder whiteSpace = new StringBuilder("\n");
        Element rootElement = doc.getDefaultRootElement();
        int line = rootElement.getElementIndex( offset );
        int i = rootElement.getElement(line).getStartOffset();

        while (true)
        {
            String temp = doc.getText(i, 1);

            if (temp.equals(" ") || temp.equals("\t"))
            {
                whiteSpace.append(temp);
                i++;
            }
            else
                break;
        }

        return whiteSpace.toString();
    }

    private static void createAndShowUI()
    {
        JTextArea textArea = new JTextArea(5, 50);
        AbstractDocument doc = (AbstractDocument)textArea.getDocument();
        doc.setDocumentFilter( new NewLineFilter() );

        JFrame frame = new JFrame("NewLineFilter");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new JScrollPane(textArea) );
        frame.pack();
        frame.setLocationByPlatform( true );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

阅读 Swing 教程中关于[实现文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)的部分以获取更多信息。

# javascript - WinJs 列表视图显示：无 ID 磁贴

> ID：15867903
> 
> 赞同：0
> 
> 时间：2013-04-07T21:15:03.597
> 
> 标签：javascript, listview, windows-store-apps, winjs

所以有什么问题。我想使用特定参数（ID - 从 JSON 传递）从 WinJS 列表视图中排除项目。怎么做？

我尝试过的事情：

a) 在将数据推送到 someView.itemDataSource 之前，使用此函数处理它（它可以工作，但看起来很脏）。

```
 fldView.itemDataSource = this._processItemData(Data.items.dataSource);
    ....
     _processItemData: function (data) {
        for (var i = data.list.length; i >= 1; i--) {
            if (data.list._groupedItems[i]) {
                if (data.list._groupedItems[i].groupKey == 'Folders')
                    continue;
                else {
                    if (data.list._groupedItems[i].data.folderID) {
                        data.list.splice(i - 1, 1);
                    }
                }
            }
        }
        return data;
    } 
```

b）具有两个条件模板的传统方式（不起作用）：

```
 fldView.itemTemplate = this.getItemTemplate;
    ....
    getItemTemplate: function(promise){
                return promise.then(function(item){
                    var
                        itemTemplate = null,
                        parent = document.createElement("div");

                    if(item.data.folderID){
                        itemTemplate = document.querySelector('.hideItemTemplate')
                    }else{
                        itemTemplate = document.querySelector('.itemTemplate')
                    }
                    //console.log(item.data.folderID);
                    itemTemplate.winControl.render(item.data, parent);
                    return parent;
                })
            } 
```

2 个 HTML 模板

```
<div class="itemTemplate" data-win-control="WinJS.Binding.Template">
        <div class="item">
            <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title" />
            <div class="item-overlay">
                <h4 class="item-title" data-win-bind="textContent: title" style="margin-left: 0px;"></h4>
                <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle" style="margin-left: 0px; margin-right: 4.67px;"></h6>
            </div>
        </div>
    </div>
    <div class="hideItemTemplate" data-win-control="WinJS.Binding.Template">
        <div class="display-none"></div>
    </div> 
```

和 CSS 显示：无

```
.hideItemTemplate, .display-none{
    display:none;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:56:49.187

[建议在使用array.filter](http://msdn.microsoft.com/en-us/library/ie/ff679973%28v=vs.94%29.aspx)构建 WinJS.Binding.List 之前过滤项目，或者在构建后对列表进行过滤器投影。如果需要分组，可以在过滤后的列表上进行分组。

```
var list; // assuming this is all data items
var filteredList = list.createFiltered(function filter(item)
    {
        if (item.FolderID)
            return false;
        else
            return true;
    });
var groups = filteredList.createGrouped(...); 
```

# arrays - 在 Matlab 中使用 IF 语句和结构的奇怪行为？

> ID：15867908
> 
> 赞同：0
> 
> 时间：2013-04-07T21:15:20.403
> 
> 标签：arrays, matlab, struct, cell

当它应该只有 1 时，输出总是两个值。

s 是一个结构，其中

```
1x1024 struct array with fields:
    ID
    s1
    s2
    s3
    s4
    PB1
    PB2
    PB3
    PB4
    eG
    next 
```

我有以下循环：

```
for t=1:length(s)

if s(t).eG==0

 if s(t).s1==1

    if s(t).PB1==0
        slackp(t)=0; 
    elseif s(t).PB1==1
        slackp(t)=350;
    elseif s(t).PB1==2
        slackp(t)=600;
    elseif s(t).PB1==3
        slackp(t)=750;
    end
end

 if s(t).s2==1

    if s(t).PB2==0
        slackp2(t)=0; 
    elseif s(t).PB2==1
        slackp2(t)=500;
    elseif s(t).PB2==2
        slackp2(t)=620;
    elseif s(t).PB2==3
        slackp2(t)=785;
    end

  end
 end
end 
```

但是我注意到在 t=2 的以下语句中

```
 elseif s(t).PB1==1
        slackp(t)=350; 
```

它总是打印

```
 slackp(1)=[0 350] 
```

错误结转，其他多个条目旁边有 0 ！！为什么会这样？我只是想存储 350，我不想要 0 ！

我尝试调试问题，并意识到只要 s1 不 =1，它就会打印一个 0。它不应该。如果 s1 不是`1`，那么只需跳过 IF 语句。s2也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:52:24.187

要解决这个问题，您可以使用不同的变量来索引 slackp 而不是索引 s。例如：

```
clear all
s(1).s1 = 0;
s(1).PB1 = 2;
s(1).PB2 = 2;
s(1).s2 = 0;
s(2).s1 = 1;
s(2).s2 = 1;
s(2).PB1 = 1;
s(2).PB2 = 3;
s(3).s1 = 1;
s(3).PB1 = 2;
s(3).s2 = 1;
s(3).PB2 = 2;

index1 = 1;
index2 = 1;
for t=1:length(s)
if s(t).s1==1
    if s(t).PB1==0
        slackp(inde1x)=0; 
         index1 = index1 + 1;
    elseif s(t).PB1==1
        slackp(index1)=350;
         index1 = index1 + 1;
    elseif s(t).PB1==2
        slackp(index1)=600;
         index1 = index1 + 1;
    elseif s(t).PB1==3
        slackp(index1)=750;
         index1 = index1 + 1;
    end

end 

if s(t).s2==1

    if s(t).PB2==0
        slackp2(index2)=0; 
        index2 = index2 + 1;
    elseif s(t).PB2==1
        slackp2(index2)=500;
        index2 = index2 + 1;
    elseif s(t).PB2==2
        slackp2(index2)=620;
        index2 = index2 + 1;
    elseif s(t).PB2==3
        slackp2(index2)=785;
        index2 = index2 + 1;
    end

    end

 end 
```

会给你：

```
slackp = 
```

350 600

```
slackp2 = 
```

785 620

或者，您可以使用 end + 1 来索引输出数组，如下所示：

```
slackp = [];
for t=1:length(s)
    if s(t).s1==1
        if s(t).PB1==0
            slackp(end + 1)=0; 
        elseif s(t).PB1==1
            slackp(end + 1)=350;
        elseif s(t).PB1==2
            slackp(end + 1)=600;
        elseif s(t).PB1==3
            slackp(end + 1)=750;
        end
    end 
 end 
```

# css - 如何使用 Compass 过滤器 mixin？

> ID：15867911
> 
> 赞同：17
> 
> 时间：2013-04-07T21:15:29.737
> 
> 标签：css, compass-sass, mixins

我正在尝试在 SCSS 中以这种方式使用过滤器混合：

```
a {
  @include filter(grayscale(100%));
} 
```

但是当我编译时，我得到了这个错误：

```
Undefined mixin 'filter'. 
```

我正在使用这个带有 Rails 框架的 Gem 的最新版本。

[http://compass-style.org/reference/compass/css3/filter/](http://compass-style.org/reference/compass/css3/filter/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-10T18:12:49.877

**SASS 示例**

```
@import 'compass/css3/filter'

.filtered
  @include filter(grayscale(50%))
  @include filter(blur(2px)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-05T12:32:45.870

您需要先导入指南针过滤器。

要使用多个过滤器，请将所有过滤器放在 filter() 中，不带逗号

```
@import 'compass/css3/filter'

// multiple calls like this:
.filtered {
    @include filter(blur(4px) brightness(1.3) saturate(1.5));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:18:56.407

根据[Compass 文档](http://compass-style.org/reference/compass/css3/filter/)，这个文件可以使用：`@import "compass/css3/filter"`在 sass 文件的顶部导入。

然后在 sass 文件中，您可以将其用作

```
filter($filter-1, $filter-2, $filter-3, $filter-4, $filter-5, $filter-6, $filter-7, $filter-8, $filter-9, $filter-10) 
```

# javascript - 在 div 点击上运行 javascript？

> ID：15867916
> 
> 赞同：0
> 
> 时间：2013-04-07T21:15:44.287
> 
> 标签：javascript, jquery

我想知道是否有人可以提供帮助，基本上我有这个 javascript 在用户向下滚动页面时淡入 div，但是，我想在 javascript 上设置一个条件，说只有在用户单击另一个 div 元素后才会淡出。

例如，我需要用户在向下滚动页面之前阅读一段文本，并且这个 div 淡入，在这段文本上是一个名为

因此，一旦用户阅读了文本，他们将单击“exit_profile_intro4”，这将关闭文本框，然后我才希望用于滚动和淡入 div 的 javascript 工作。有人可以告诉我如何做到这一点：我试过了

```
<script>
$('div.exit_intro4').click(function(){
 $(window).scroll(function(){
       var leftToBottom = $(document).height() - $(window).height() - $(window).scrollTop();
       var distanceFromTop = $(window).scrollTop();
       if( distanceFromTop > 300 && !$("profile_intro_case5").is(":visible") 
          && leftToBottom > 1000 && !$(".profile_intro_case5").is(":animated")) {
                $(".profile_intro_case5").fadeIn(1000);
       }else if($(".profile_intro_case5").is(":visible") && (distanceFromTop < 300 || leftToBottom < 1000) && !$(".profile_intro_case5").is(":animated")){
                $(".profile_intro_case5").fadeOut();
      }
   });
});
   </script> 
```

原来的：

```
<script>
 $(window).scroll(function(){
       var leftToBottom = $(document).height() - $(window).height() - $(window).scrollTop();
       var distanceFromTop = $(window).scrollTop();
       if( distanceFromTop > 300 && !$("profile_intro_case5").is(":visible") 
          && leftToBottom > 1000 && !$(".profile_intro_case5").is(":animated")) {
                $(".profile_intro_case5").fadeIn(1000);
       }else if($(".profile_intro_case5").is(":visible") && (distanceFromTop < 300 || leftToBottom < 1000) && !$(".profile_intro_case5").is(":animated")){
                $(".profile_intro_case5").fadeOut();
      }
   });
   </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:24:10.787

向滚动事件添加状态。

```
(function() {
  var user_can_scroll = false;
  $("div.exit_intro4").click(function(e) {
    /* do your thing */
    user_can_scroll = true;
  });

  $(window).scroll(function(e) {
    if (user_can_scroll) {
      /* do your scroll thing */
    }
  });
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:23:12.770

我看不出您的代码不正确的原因（没有实际运行它），但是您分配了这样的点击

```
$('div.exit_intro4').click( // Function 
```

然而，您说您想在单击“exit_profile_intro4”时触发它。也许应该是这样。

```
$('div.exit_profile_intro4').click( // Function 
```

# c++ - 使用结构？

> ID：15867919
> 
> 赞同：0
> 
> 时间：2013-04-07T21:15:54.603
> 
> 标签：c++, struct

我在使用结构中的字符串 (char*) 时遇到问题。我似乎也无法调用我想要的正确数据。

在`processFile`它下面正确显示结构成员；在下面`main`它没有。

这是我的代码：

```
#include <iostream>
#include <io.h>
#include <string>
#include "dirent.h"
#include "Stream.h"
#include "Compression.h"
#include "Definitions.h"

using namespace std;
using namespace System::IO;
using namespace System::Funcs;

bool isRawfile(char* ext);
void ProcessDirectory(string directory);
void ProcessFile(char* file);
void ProcessEntity(struct dirent* entity);

typedef struct
{
    char *name;
    int usize;
    int csize;
    BYTE *data;
} rawfile;

string path = "";
string source;
int numrawfiles = 0, numstringtables = 0;
rawfile *rawfiles = new rawfile[0x400];

FILE * zone = fopen( "C:\\Users\\jake\\Desktop\\patch_mp.zone" , "wb" );

int main(int argc, char **args)
{
    if(args[1] != NULL)
    {
        source = string(args[1]) + "\\"; //maybe move under else here..
        if(strchr(args[1], '.') != NULL)
        {
            cout<<"Unable to compile files, please drag a folder to compile."<<endl;
            cin.get();
            return 0;
        }
        else
        {
            int header[] = {1,0,0x3B4,0,0,0,1,0,0x1000,0,0,0,-1};
            for(int i=0; i<13; i++)
                fwrite(Converter::Int32ToBytes(header[i]), 1 , 4 , zone );

            ProcessDirectory(args[1]);

            for(int i=0; i<numrawfiles; i++)
                cout<<"Name: "<<rawfiles[i].name<<" Length: "<< rawfiles[i].usize << " - in main()"<<endl;

            fclose(zone);
        }
    }
    else
    {
        cout<<"No folder selected to compile. Press any Key to quit."<<endl;
        cin.get();
        return 0;
    }
    cin.get();
    return 0;
}

void ProcessDirectory(string directory)
{
    string dirToOpen = path + directory;
    auto dir = opendir(dirToOpen.c_str());
    path = dirToOpen + "\\";
    if(NULL == dir)
    {
        cout << "could not open directory: " << dirToOpen.c_str() << endl;
        return;
    }
    auto entity = readdir(dir);
    while(entity != NULL)
    {
        ProcessEntity(entity);
        entity = readdir(dir);
    }
    path.resize(path.length() - 1 - directory.length());
    closedir(dir);
}

void ProcessEntity(struct dirent* entity)
{
    if(entity->d_type == DT_DIR)
    {
        if(entity->d_name[0] == '.')
            return;

        ProcessDirectory(string(entity->d_name));
        return;
    }

    if(entity->d_type == DT_REG)
    {
        string fullpath = path + entity->d_name;
        ProcessFile(const_cast<char *>(fullpath.c_str()));
        return;
    }
    cout << "Not a file or directory: " << entity->d_name << endl;
}

void ProcessFile(char* file)
{
    char* extension = strrchr(file, '.');

    if(isRawfile(extension))
    {
        rawfile raw;
        raw.name = (char *)&file[source.length()];
        raw.usize = File::getFileSize(file);
        rawfiles[numrawfiles] = raw;
        cout<<"Name: "<<rawfiles[numrawfiles].name<<" Length: "<< raw.usize << " - in ProcessFile()"<<endl;
        fwrite(Converter::Int32ToBytes(0x23),1,4,zone);
        fwrite(Converter::Int32ToBytes(-1),1,4,zone);
        numrawfiles++;
    }
}

bool isRawfile(char* ext)
{
    char *exts[11] = {".gsc",".cfg",".txt",".news",".png",".vision",".rmb",".script",".arena",".atr",".csc"};
    for(int i=0; i<10; i++)
        if(strncmp(ext,exts[i],strlen(exts[i]))==0)
            return true;
    return false;
} 
```

这是一个示例图片：![http://puu.sh/2vYt7/7698fd05f1](https://i.stack.imgur.com/znHJR.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:22:40.857

使用 : 为自己省去很多麻烦`std::string`：

```
#include <string>
struct thing
{
   std::string name;
   int age;
}; 
```

您还可以避免动态分配的数组：

```
#include <vector>
std::vector<thing> things(3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:21:00.113

您正在输出“Ben”的内存地址而不是实际的字符串。你应该使用

```
cout << things[1]->name << endl; 
```

这是语法糖

```
cout << (*things[1]).name << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:27:32.167

要添加 scd 所说的内容，您没有成功取消引用 name 成员。当您尝试对 things[1].name 进行操作时，您正在对指针进行操作，这只是一个内存位置。

这是学习使用指针时最棘手的事情之一。以下是关于取消引用运算符和语法提示的更多阅读。

[http://en.wikipedia.org/wiki/Dereference_operator#Other_syntax](http://en.wikipedia.org/wiki/Dereference_operator#Other_syntax)

编辑：

在自己编译之后，我意识到我在这个错误的轨道上，并且 std::cout 将正确处理 char 指针。你应该可以用你的代码解决这个问题，只要确保你给你的结构数组一个大小。

这对我有用：

```
#include <iostream>
#define MAXSIZE 3

typedef struct
{
   char* name;
   int age;
}Thing;

Thing *things = new Thing[MAXSIZE];

int _tmain(int argc, _TCHAR* argv[])
{
char* names[MAXSIZE] = { "Alice", "Ben", "Carlos" };
    int ages[MAXSIZE] = { 24, 25, 26 };
    for(int i=0; i<MAXSIZE; i++)
    {
        things[i].name = names[i];
        things[i].age = ages[i];
    }
    std::cout << things[1].name << std::endl;
    return 0;
} 
```

# ios - 找不到创建 iOS 内部分发证书的选项

> ID：15867925
> 
> 赞同：12
> 
> 时间：2013-04-07T21:16:40.377
> 
> 标签：ios, code-signing-certificate, ios-provisioning, in-house-distribution

我一直在尝试生成内部应用程序分发证书和配置文件，但没有取得多大成功。我已按照**App Distribution Guide**和**Distributing Enterprise Apps for iOS Devices**中的说明进行操作，但我已经转了两天。

以下是概要：

1.  我是**iOS 开发者企业计划**团队的成员。
2.  我有**管理员**权限。
3.  我已经生成了**CSR**。
4.  当我尝试通过门户添加 iOS 证书时，我只有两个可用的选项，即**iOS App Development**（在开发分组下）和**App Store 和 Ad Hoc**（在分发分组下）。所有其他选项都被禁用，并且根本没有内部分发证书的选项（截图：http: [//i.stack.imgur.com/TkCLD.png](https://i.stack.imgur.com/TkCLD.png)）。

![截屏](https://i.stack.imgur.com/Pl3Fm.png)

我一定错过了什么，但我不确定到底是什么。任何帮助表示赞赏。另一条可能重要或不重要的信息是我是多个团队（企业和标准开发）的成员。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:17:54.080

这不再是一个问题。Apple 推出新的配置门户时出现了一个错误。当您尝试创建分发配置文件时，门户没有检测到您拥有的分发证书，因此您无法创建一个。Apple 在 48 小时内修复了此错误。以下是 Apple 开发者论坛讨论的链接，以供将来参考：[https ://devforums.apple.com/thread/183805?tstart=0](https://devforums.apple.com/thread/183805?tstart=0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:07:12.197

这是您应该看到的屏幕截图。此外，您提到您是多个开发团队的一员。当您登录到您的开发者帐户时，它应该会要求您选择一个团队（没有相应的屏幕截图）。选择您的企业团队。注销您的开发人员帐户并重新登录。希望您应该看到此选择。

![在此处输入图像描述](https://i.stack.imgur.com/lyAHg.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T13:14:29.117

您已登录标准帐户。该屏幕不是企业帐户屏幕。当您登录网站时，您是否选择了正确的团队？您可以登录自己的客户团队，而不是企业团队。

# android - 如何在 Android 中为 JSONParser.makeHttpRequest 设置连接超时？

> ID：15867930
> 
> 赞同：0
> 
> 时间：2013-04-07T21:17:10.750
> 
> 标签：android, httprequest, android-internet

我正在获取并发布一些数据`JSONParser.makeHttpRequest`。当连接速度很慢时，需要一段时间才能得到响应，我想将超时限制设置为 5 秒。我发现[这篇文章](https://stackoverflow.com/questions/693997/how-to-set-httpresponse-timeout-for-android-in-java)展示了如何设置 HttpResponse 超时，但无法将其与 JSONParser 集成。

这是我用于 HttpRequest 的代码

```
JSONParser jParser = new JSONParser();
List<NameValuePair> params = new ArrayList<NameValuePair>();
JSONObject json = jParser.makeHttpRequest(url, "GET", params); 
```

如果我能在其他地方获得代码片段或另一个帖子的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T23:03:46.600

这是代码：

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";
    int timeout;

// constructor
public JSONParser() {
    timeout = new Values().gettimeout();
}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {
         HttpParams httpParameters = new BasicHttpParams();
         HttpConnectionParams.setSoTimeout(httpParameters, timeout);
        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

秘诀是：

```
 HttpParams httpParameters = new BasicHttpParams();
     HttpConnectionParams.setSoTimeout(httpParameters, timeout); 
```

并将 de HttpParams 设置为

```
 DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters); 
```

调整你的代码来做到这一点；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:29:17.047

您可以使用 Asynctask，并在一段时间后停止请求。[请参阅此处](https://stackoverflow.com/questions/9671546/asynctask-android-example#9671643)的示例。

# c - 用 C 实现的解释器中的垃圾收集问题

> ID：15867941
> 
> 赞同：4
> 
> 时间：2013-04-07T21:18:19.813
> 
> 标签：c, garbage-collection, interpreter

我正在为一种玩具程序语言开发一个爱好编译器/解释器，并且我已经实现了我打算探索的大部分功能，除了一个好的垃圾收集算法（类似于[this guy](https://stackoverflow.com/questions/10645616/what-is-a-simple-garbage-collection-algorithm-for-experimenting-with-a-simple-in)）。我已经阅读了很多关于各种算法的内容，并且对如何实现它们有了大致的了解。我的语言运行时的早期迭代使用了引用计数，但我放弃了它以学习更高级的东西，所以我现在正在考虑标记和复制压缩算法。

我开始的第一个问题是阻止算法在本机扩展函数（即用 C 编写的函数）中收集“对象”。根集由解释器堆栈上的“对象”和符号表中的“对象”组成，我不应该对这些有太多麻烦，但是，如果在 C 函数中创建容器“对象”，然后填充子“对象”，我如何防止 GC 收集它们，因为它实际上不在解释器堆栈上或绑定到符号？

使实施 GC 更容易的事情：

*   我的语言中的所有“对象”都是内置类型（例如，不是面向对象的）
*   解释器堆栈只是一个指向结构的指针堆栈
*   符号表只是指向结构的指针数组

用户代码：

```
f = open('words.txt', 'r');
lines = readlines(f);
close(f); 
```

解释器（解析后编译为字节码...）：

1.  `push`文件名，open_mode
2.  调用`builtin_fopen`它返回一个包装 a`FILE*`
3.  将结果存储在符号中`f`
4.  推动符号`f`
5.  `builtin_flines`创建列表类型的调用`l`，然后使用 C`fread`将文件的每一行作为字符串类型读取，并将其附加到列表中`l`
6.  将结果存储在符号`lines`中，依此类推....

现在，如果 GC 在分配文件中包含一行的字符串之一时运行，则根集还没有对 的任何引用`l`，因此应该收集它。关于如何更好地处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:41:51.183

1.  为解释器的堆专用一个单独的连续分配区域。永远不要在竞技场之外收集任何东西。
2.  您始终拥有竞技场的当前顶部（假设它从较低地址增长到较高地址）。顶部以上的所有内容均不可收藏，但在根集中考虑。必须分配多个链接对象的内置函数将它们分配到顶部上方，然后将顶部向上移动，以便所有分配的对象立即进入可回收堆。如果收集发生在函数执行过程中，则顶部上方的对象将立即全部移动到新堆中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:52:00.290

您需要为您的本机函数提供一个接口，通过该接口它们可以告诉垃圾收集器它们引用了哪些对象，然后让它们使用该接口。

最简单的方法可能是根本不让本机代码直接指向解释器/垃圾收集的数据。相反，您为本机代码提供对象的句柄并让它回调到运行时以从对象中获取值。在您的示例中，`builtin_flines`将调用运行时分配一个列表并取回它的句柄。然后它会读取行，并调用运行时将每一行附加到列表中，最后返回完整的列表。运行时将管理给定本机调用的所有句柄，在本机调用返回后释放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T03:43:32.153

由于我是您提到的最初的“这个”人，尽管我可以根据我迄今为止在我的项目中设计的内容为您提供有关您的第一个问题的一些见解（我保证我最终会在博客上介绍它）。因此，首先，所有内存分配都通过一个 mutator 函数。输入参数是您正在创建的对象的类型，以及对指向它的指针类型对象的引用。然后在创建新对象时更新该指针对象。如果一个对象被分配给解释器运行时的 C 函数独占使用，那么它就是一个根对象。在这种情况下，NULL 作为第二个参数传递，并且该对象被添加到根对象列表中。现在稍后，如果该内部函数不再需要该对象，则必须从根对象列表中删除该对象。（它不会取消分配对象本身，因为最终将由垃圾收集例程处理）。哦，解释器堆栈本身也是解释器中的一个对象（列表类型或数组类型对象），因此指向它的指针也在根对象列表中（同样，另一个列表类型对象也是口译员知道）。指向根对象列表的指针是垃圾收集器需要知道的唯一指针。

Also, as for when to start a garbage collection run -- since memory is effectively unlimited on modern architectures, I've decided to kick off the garbage collector when X number of objects has been allocated. After running you have Y objects left. If Y still greater than Z percent of X, then X gets bumped up enough to make that so. Then I just hope that malloc() never fails (if it does, I just dump an error out and exit the interpreter).

Hope this helps, and hopefully someone else will add more clarifications since I am more of an amateur when it comes to language / interpreter design.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-07T00:38:23.490

Some complications:

When you input a line to be interpreted like 100 if X then gosub 5000

But 5000 does not exist yet, you are spaghetti coding... Maybe x does not have any assigned value or data type yet. If we don't index now, are we going wait till someone types "run" or executes a line directly from the prompt?

if we do index now to speed things up later, how will we know the last instance of "100" or "X" or "5000" gets removed?

What entry do we make in the master index of "things"? Assuming these things may include lines of basic code, strings, and other variables we want to handle by name or line number.

We want to find quickly, and use to strategically identify garbage collection potential when the need for collection arises.

How much static space do we burn on the index of things that may change in size? Which details besides label, location, and length are useful enough to justify indexing? Should we attempt to index empty space when a variable shrinks? Or just index the variable's largest historical size along with its current size? How do we identify those variables that change in size most frequently, and should we avoid cleaning them, or even deliberately pad them?

When do we clean up the entire mess? or is it better to defrag only enough free space to squeeze in something that cannot be otherwise jammed sideways into an existing hole?

Purposeful delays and waiting for "input" seem good targets that we might exploit to proactively clean up some of the mess. There is no assurance any basic program will have such deadtime.

Sorry this is not an answer, but the original question seems to invite some brainstorming towards a better scheme. We need a clear strategy that requires defining the entire problem.

# php - 几个问题同时出现，PHP

> ID：15867944
> 
> 赞同：0
> 
> 时间：2013-04-07T21:18:32.673
> 
> 标签：php, hyperlink, conflict, ob-start

我在一个网站上工作，但我很困惑。

```
<?php
ob_start("ob_gzhandler");
session_start();
define('FORUM_ROOT', 'forum/');
require FORUM_ROOT.'include/common.php';
// Where will we go after login?
$forum_page['redirect_url'] = 'http://l2topsites.net/';
$forum_page['form_action'] = forum_link($forum_url['login']);
$forum_page['hidden_fields'] = array(
    'form_sent'     => '<input type="hidden" name="form_sent" value="1" />',
    'redirect_url'  => '<input type="hidden" name="redirect_url" value="'.forum_htmlencode($forum_page['redirect_url']).'" />',
    'csrf_token'    => '<input type="hidden" name="csrf_token" value="'.generate_form_token($forum_page['form_action']).'" />'
);
include "conf.php";
$opala = $_GET['p'];
if (isset($opala)) {
    $page = '_data/'.$opala.'.php';
} else {
    $page = "_data/indexa.php";
}
if (!is_file($page)) {
    echo '<a href="javascript:history.back();">This page not found!</a>';
} else {
    include "_data/".basename($page) ;
}
$sredata = ob_get_clean();
if(!isset($title)) $title = "[L2TopSites] - Top Lineage 2 Ranking Sites";
$online = mysql_fetch_assoc(mysql_query("SELECT SQL_CACHE COUNT(user_id) FROM `foo_online`"));
$online = $online['COUNT(user_id)'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title><? echo $title; ?></title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="content-language" content="bg" />
        <base href="http://l2topsites.net" />
        <meta name="robots" content="all,follow" />
        <meta name="google-site-verification" content="0G89ZsSF30caf4PJk17uLLtejlwnl8oO2mUN4ywZCw8" />
        <meta name="description" content="Top Lineage2 Server only on TopZone.eu" />
        <meta name="keywords" content="topzone, lineage2, servers, rank, votes, top10, top25, top100, lineage2 servers" />
        <meta http-equiv="Cache-Control" content="max-age=3600" />
        <link type="text/css" rel="stylesheet" href="/min/f=style.css" />
    </head>
    <body>
        <div id="content">
            <div id="maintop"></div>
            <div id="main">
                <div id="header">
                    <div id="lpanel">
                        <?
                        if (!$forum_user['is_guest'])
                        {
                            echo "<div class=\"usermenu\">";
                            echo "<a href=\"myhome\"><img src=\"images/button1.png\" width=\"90\" height=\"23\" alt=\"\" /></a><br />";
                            echo "<a href=\"forum/pun_pm/inbox/\"><img src=\"images/button2.png\" width=\"90\" height=\"23\" alt=\"\" /></a><br />";
                            echo "<a href=\"forum/logout/".$forum_user['id']."/".$forum_user['csrf_token']."/\"><img src=\"images/button3.png\" width=\"90\" height=\"23\" alt=\"\" /></a>";
                            echo "</div><div id=\"ltext\" style=\"padding-top: 5px;\">";
                            echo "Logged in as: <a href=\"forum/user/".$forum_user['id']."\">".$forum_user['username']."</a>";
                            if($forum_user['is_admmod']==1){
                                echo " | <a href=\"admin\">Admin Panel</a>";
                            }
                            echo "</div>";
                        }
                        else
                        {

                            ?>
                        <form action="<?php echo $forum_page['form_action'] ?>" method="post">
                            <?php echo implode("\n\t\t", $forum_page['hidden_fields'])."\n" ?>
                            <table border="0">
                                <tr><td width="10"><img class="img" src="images/user.png" width="17" height="19" alt="" /></td><td><input type="text" name="req_username" id="userinput" /></td></tr>
                                <tr><td width="10"><img class="img" src="images/pass.png" width="17" height="19" alt="" /></td><td><input type="password" name="req_password" id="passinput" /></td></tr>
                            </table>
                            <input type="submit" name="submit" value="" id="login" />
                            <a href="forum/register/" id="register"><img src="images/register.png" alt="" border="0" /></a>
                            <div id="ltext">
                                <a href="forum/request/password/">Forget Password?</a>
                            <input type="checkbox" id="input" name="save_pass" value="1" /><span>Remember me</span></div>
                        </form>
                        <? } ?>
                    </div>
                </div>
                <div id="mbaner1">
                    <div id="mb1l"></div>
                    <div id="mb1b">
                        <div id="mb1">
                            <a href="#"><img src="images/baner1.png" width="728" height="90" alt="" border="0" /></a>
                        </div>
                    </div>
                    <div id="mb2r"></div>
                </div>

                <div id="left">
                    <div class="btop"></div>
                    <div class="mback">
                        <div id="box1t"></div>
                        <ul>
                            <li><a href="http://l2topsites.net/index.php">Home</a></li>
                            <li><a href="http://l2topsites.net/news">News</a></li>
                            <li><a href="http://l2topsites.net/contact">Contact</a></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                    <div class="btop"></div>
                    <div class="mback">
                        <div id="box2t"></div>
                        <ul>
                            <li><a href="http://l2topsites.net/list">All Servers (by Vote)</a></li>
                            <li><a href="http://l2topsites.net/servers">All Servers (by Date)</a></li>
                            <li><a href="http://l2topsites.net/plist">Premium Servers</a></li>
                            <li><a href="http://l2topsites.net/searchserver">Search Server</a></li>
                            <li><a href="http://l2topsites.net/add">Add Server</a></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                    <div class="btop"></div>
                    <div class="mback">
                        <div id="box3t"></div>
                        <ul>
                            <li><a href="http://l2topsites.net/crests">Crests</a></li>
                            <li><a href="http://l2topsites.net/forum/forum/2/">L2 Guides</a></li>
                            <li><a href="http://l2topsites.net/forum">Forum</a></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                    <div class="btop"></div>
                    <div id="aback">
                        <div id="box4t"></div>
                        <div id="adsense"><script type="text/javascript">
                            <!--
google_ad_client="pub-4584526598914996";google_ad_slot="3047263056";google_ad_width=121;google_ad_height=240;//-->
                            </script>
                            <script type="text/javascript"
                                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                        </script></div>
                    </div>
                    <div class="bbottom"></div>
                </div>
                <div id="mcontent">
                    <div id="glineage"></div>
                    <div id="mcontenttop"></div>
                    <div id="mcontentt">
                        <?php
                        echo $sredata;
                        $btemi = mysql_fetch_assoc(mysql_query("SELECT SQL_CACHE COUNT(id) FROM foo_topics"));
                        $broitemi = $btemi['COUNT(id)'];
                        $bposts = mysql_fetch_assoc(mysql_query("SELECT SQL_CACHE COUNT(id) FROM foo_posts"));
                        $broipostove = $bposts['COUNT(id)'];
                        $bservers = mysql_fetch_assoc(mysql_query("SELECT SQL_CACHE COUNT(id) FROM s_servers WHERE `odobren` = '1'"));
                        $broiserveri = $bservers['COUNT(id)'];
                        ?>
                        <div style="clear: both;"></div>
                    </div>
                    <div id="mcontentbottom"></div>
                </div>
                <div id="right">
                    <div id="fserver">
                        <?php
                        $q = mysql_fetch_assoc(mysql_query("SELECT SQL_CACHE `fname`, `fid` FROM `s_set`"));
                        echo "<a href=\"sinfo/".$q['fid'].".html\"><b>".$q['fname']."</b></a>";
                        ?>
                    </div>
                    <div class="btop"></div>
                    <div id="rback">
                        <div id="box5t"></div>
                        <ul>
                            <li><a href="#">Gaming Forums</a></li>
                            <li><a href="#">Counter-Strike</a></li>
                            <li><a href="#">MuOnline</a></li>
                            <li><a href="#">Ragnarok Online</a></li>
                            <li><a href="#">World Of Warcraft</a></li>
                            <li><a href="#">OnlineGames</a></li>
                            <li><a href="#">OnlineTop100</a></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                    <div class="btop"></div>
                    <div class="mback">
                        <div id="box6t"></div>
                        <ul>
                            <li>Your ip is: <?=$_SERVER['REMOTE_ADDR']?></li>
                            <li>Servers indexed: <?=$broiserveri?></li>
                            <li>Threads on forum: <?=$broitemi?></li>
                            <li>Posts on forum: <?=$broipostove?></li>
                            <li>Online users: <?=$online?></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                    <div class="btop"></div>
                    <div class="mback">
                        <div id="box7t"></div>
                        <ul>
                            <li><a href="http://dev-bg.eu" target="_blank">Tutorials</a></li>
                            <li><a href="#">Links Direcotory</a></li>
                            <li><a href="#">You link here?</a></li>
                        </ul>
                    </div>
                    <div class="bbottom"></div>
                </div>
                <div id="footer">
                    <div id="fooleft"></div>
                    <div id="foo">
                        <ul>
                            <li><a href="http://l2topsites.net">Home</a> | </li>
                            <li><a href="http://l2topsites.net/servers">ViewServers</a> | </li>
                            <li><a href="http://l2topsites.net/forum/register/">Register</a> | </li>
                            <li><a href="http://l2topsites.net/crests">Crests</a> | </li>
                            <li><a href="http://l2topsites.net/forum">Forum</a> | </li>
                            <li><a href="http://l2topsites.net/add">AddServer</a> | </li>
                            <li><a href="http://l2topsites.net/contact">Contact</a> | </li>
                            <li><a href="http://l2topsites.net/terms">Privacy Policy</a> | </li>
                            <li><a href="http://l2topsites.net/terms">Terms and Conditions</a></li>
                        </ul>
                        <span id="tend">All right reserved L2Topsites © 2010-2011
                        L2Topsites.net is not responsable for any external content.
                    </div>
                    <div id="fooright"></div>
                </div>
                <div id="mainbottom"></div>
            </div>
        </div>
        <script type="text/javascript" src="/min/f=javascript.js"></script>
        <!-- NACHALO NA TYXO.BG BROYACH -->
        <script  type="text/javascript">
            <!--
            d=document;d.write('<a href="http://www.tyxo.bg/?87885" title="Tyxo.bg counter" target=" blank"><img width="1" height="1" border="0" alt="Tyxo.bg counter"');d.write(' src="http://cnt.tyxo.bg/87885?rnd='+Math.round(Math.random()*2147483647));d.write('&sp='+screen.width+'x'+screen.height+'&r='+escape(d.referrer)+'" /><\/a>');//-->
        </script>
        <noscript><a href="http://www.tyxo.bg/?87885" title="Tyxo.bg counter" target="_blank"><img src="http://cnt.tyxo.bg/87885" width="1" height="1" border="0" alt="Tyxo.bg counter" /></a></noscript>
    </body>
</html> 
```

错误是

```
`Warning: ob_start(): output handler 'ob_gzhandler' conflicts with 'zlib output compression' in D:\xampp\htdocs\index.php on line 2

Notice: ob_start(): failed to create buffer in D:\xampp\htdocs\index.php on line 2` 
```

我不知道是不是因为这个，但链接也坏了。就像我点击某个地方时一样

```
index.php/page 
```

但它应该继续

```
index.php?p=page 
```

# visual-studio-express - 在 Visual Studio 2010 Express 中执行脚本的最简单方法是什么？

> ID：15867947
> 
> 赞同：0
> 
> 时间：2013-04-07T21:18:44.017
> 
> 标签：visual-studio-express, sql-scripts

我正在寻找一种从 Visual Studio Express 在我的 SQL Express 上运行 SQL 文件的简单方法。

不使用 express 时，[这种](http://msdn.microsoft.com/en-gb/library/yea4bc1b%28v=vs.100%29.aspx)方式既好又简单。

到目前为止，使用 sqlcmd 似乎是我最快的选择（我有一个批处理文件，便于拖放）。

有人知道从我的实体模型更新我的数据库的更简洁的方法吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:48:42.503

我将发布我的方法，因为没有任何其他软件等，它似乎仍然是最简单的方法。

```
sqlcmd -S .\sqlexpress -i "%~1"
pause 
```

我用上面的文件制作了一个 .bat 文件，它允许我拖放 .sql 文件并让它们针对我的数据库运行。

# python - Python 3.2 os 模块 - python 函数或 linux 命令？

> ID：15867952
> 
> 赞同：1
> 
> 时间：2013-04-07T21:19:41.613
> 
> 标签：python, linux

阅读[http://docs.python.org/2/library/allos.html](http://docs.python.org/2/library/allos.html)后，我有点不清楚 os 模块是否包含与系统命令执行相同功能的函数，或者它们是否正在调用系统命令。我没有看到源代码的链接。

我刚刚开始使用 Python 和 os 模块。有人能告诉我这些函数的性质以及我在哪里可以找到源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:23:23.220

该`os`模块使用每个操作系统特定的包，其中大多数使用标准 C 调用，命令行工具必须使用相同的调用。

您想先研究 [`os.py`模块源代码](http://hg.python.org/cpython/file/3.2/Lib/os.py)，然后再研究特定于平台的模块。[`posixmodule.c`](http://hg.python.org/cpython/file/3.2/Modules/posixmodule.c)处理 UNIX、OS/2 和 Windows 的操作系统调用。

例如，该`os.listdir()`函数在 POSIX 系统上使用[`opendir`](http://linux.die.net/man/3/opendir),[`readdir`](http://linux.die.net/man/3/readdir)和[`closedir`](http://linux.die.net/man/3/closedir)调用。

# c++ - C ++模板运算符+如何使不同的实例使用它

> ID：15867955
> 
> 赞同：0
> 
> 时间：2013-04-07T21:19:45.590
> 
> 标签：c++, templates, operators, operator-overloading

首先我有 Matrix 模板 Matrix<typename T, int Roz> 和这个模板 Matrix 的特化。但是专业化是使用构造函数创建的，其中参数是矩阵的大小。所以在示例代码中 A 和 Z 具有相同的维度。所以我想让 add 运算符使用它。但是编译器说：错误：'Z + A'中的'operator +'不匹配。那么我需要如何为 Matrix 编写 operator+ 才能与 Matrix 一起使用？

下面的矩阵模板代码：

```
template<typename T,int Roz>
    class Matrix
    {
    public:
    T tab[Roz][Roz];
    int z=Roz;
    Matrix()
    {
        for(int i=0;i<Roz;++i)
                for(int j=0;j<Roz;++j)
                    tab[i][j]=0;
    }
    T& operator()(int x,int y){
        return tab[x-1][y-1];
    }
            //Problematic operator
    Matrix& operator+(Matrix<T,Roz> b)
    {
            Matrix<T,Roz> tmp;
            for(int i=0;i<Roz;++i)
                for(int j=0;j<Roz;++j)
                    tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];

    }

    friend ostream& operator<<(ostream& out, Matrix<T,Roz> &v)
    {

        for(int i=0;i<v.z;++i)
                {
                    for(int j=0;j<v.z;++j)
                        out<<v.tab[i][j]<<" ";

                    out<<endl;
                }
        return out;
    }
    };

    //Specialization template
template<class T>
class Matrix<T,0> 
{
private:
     Matrix()
    {

    }
public:
    vector<vector<T> > tab;
    int z=0;

    Matrix(int z)
    {
        for(int i=0;i<z;++i)
            tab.push_back(vector<T>(z));
        this->z = z;
        for(int i=0;i<z;++i)
                for(int j=0;j<z;++j)
                    tab[i][j]=0;
    }
    T& operator()(int x,int y){
        return tab[x-1][y-1];
    }
            //Problematic operator
    Matrix& operator+(Matrix<T,0> b)
    {
            Matrix<T,0> tmp(b.z);
            for(int i=0;i<z;++i)
                for(int j=0;j<z;++j)
                    tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];

    }
            //Problematic operator  
     Matrix& operator+(Matrix<T,0> &b)
    {
            Matrix<T,0> tmp(b.z);
            for(int i=0;i<z;++i)
                for(int j=0;j<z;++j)
                    tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];

    }

    friend ostream& operator<<(ostream& out, Matrix<T,0> &v)
    {

        for(int i=0;i<v.z;++i)
                {
                    for(int j=0;j<v.z;++j)
                        out<<v.tab[i][j]<<" ";

                    out<<endl;
                }
        return out;
    }
}; 
```

当我尝试添加例如 Matrix < int,3 > 和 Matrix < int, 0 > 这会产生错误。我必须如何在两个模板中定义它们将一起工作的 operator+？我可以在专业化模板中重载 operator+ 吗？

当我尝试添加 A + Z 时，下面的代码会出错。

```
int main()
{
Matrix<int,3> A, B;
Matrix<int, 4> C;
Matrix<int, 0> Z(3);
A(1,1)=1;
B(1,1)=2;
Z(1,1)=1;

Z + A;//<------- here error between diffrent instance of Matrix template 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:32:26.060

我真的不知道您为什么希望将不同维度的矩阵相加，但为了做到这一点，您必须将方法转换为矩阵参数维度上的方法模板：

```
#include <type_traits>

template <int Roz2>
Matrix& operator+(Matrix<T,Roz2> b)
{
        // check matrix argument size compatibility
        std::static_assert(Roz2 >= Roz, "incompatible matrices for operator+()"); 
        Matrix<T,Roz> tmp;
        for(int i=0;i<Roz;++i)
            for(int j=0;j<Roz;++j)
                tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];
} 
```

由于`Matrix<T,0>`是处理动态维度的专门化，因此您必须专门针对它的运算符：

```
// in the generic template
Matrix& operator+(Matrix<T,0> b)
{
        assert (b.z < Roz, "incompatible dynamic matrix for operator+");
        Matrix<T,0> tmp(b.Roz);;
        for(int i=0;i<Roz;++i)
            for(int j=0;j<Roz;++j)
                tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];
} 
```

并在`Matrix<T,0>`：

```
template <int Roz>
Matrix& operator+(Matrix<T,Roz> b)
{
        assert(Roz >= z,"....");
        Matrix<T,0> tmp(b.z);
        for(int i=0;i<z;++i)
            for(int j=0;j<z;++j)
                tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];
} 
```

然而，在上述解决方案中，算子不是可交换的。为了做到这一点，我们需要做一些改变：

```
 // define a min operator as constexpr in case the existing one is not 
template<typename T> constexpr
T const& rmin(T const& a, T const& b) {
    return a > b ? b : a;
}

// generic operator
template <int Roz2>
Matrix<T,rmin(Roz,Roz2)>& operator+(Matrix<T,Roz2> b)
{
        constexpr int R = min(Roz,Roz2);
        Matrix<T,R> tmp;
        for(int i=0;i<R;;++i)
            for(int j=0;j<R;++j)
                tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];
}

// specialized operator on Roz=0 argument
Matrix<T,0>& operator+(Matrix<T,0> b)
{
        const int r = min(z,b.z);
        Matrix<T,0> tmp(r);
        for(int i=0;i<r;;++i)
            for(int j=0;j<r;++j)
                tmp.tab[i][j]=this->tab[i][j]+b.tab[i][j];
}

// specialized operator in Roz=0 template
   Matrix& operator+(Matrix<T,Roz> b)
{
        return b + *this;
} 
```

您将不得不复制带有`const &`运算符的参数的代码（或者可能只是摆脱在这种情况下似乎不太有用的非 const 参数版本）。

Note the use of a [static assert](http://en.cppreference.com/w/cpp/language/static_assert) to limit the use of the operator with matrices of equal or larger dimension (this is a C++11 feature) in the non commutative version of the operators.

See [this question](https://stackoverflow.com/questions/5605142/stdmax-and-stdmin-not-constexpr) on the topic of `min` not being a `constexpr` function template for further details.

# jquery - 不显示 JQuery 引导模式对话框

> ID：15867957
> 
> 赞同：1
> 
> 时间：2013-04-07T21:19:48.700
> 
> 标签：jquery, twitter-bootstrap

我需要使用 Bootstrap 模板在模式窗口中显示注册表单。

我的示例应该通过按 [R] 元素打开，但事实并非如此。但是在示例中（[http://www.w3resource.com/twitter-bootstrap/modals-tutorial.php](http://www.w3resource.com/twitter-bootstrap/modals-tutorial.php)）它确实如此。

在我的示例中，该属性似乎无法正常工作：

```
data-toggle="modal" 
```

为什么？

代码：http: [//jsfiddle.net/Mfc7M/](http://jsfiddle.net/Mfc7M/)

```
<!DOCTYPE html>
<title>Twitter Bootstrap Modals Example</title>
<body>
    <div id="reg-model-dialog" class="modal hide fade in" style="display: none; ">
        <div class="modal-header">  <a class="close" data-dismiss="modal">×</a> 
                <h3>Registration</h3> 
        </div>
        <div class="modal-body">
            <table id="search-tbl">
                <tr>
                    <td>Email:</td>
                    <td>
                        <input type="text" name="reg-email" id="reg-email" />
                    </td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td>
                        <input type="text" name="reg-pwd" id="reg-pwd" value="" />
                    </td>
                </tr>
            </table>
        </div>
        <div class="modal-footer">  <a href="#" class="btn btn-success">Call to action</a>  <a href="#" class="btn" data-dismiss="modal">Close</a> 
        </div>
    </div>  <a data-toggle="modal" href="#regstration" class="btn btn-primary btn-large" id="reg-dialog-btn">R</a> 
```

和

```
$(document).ready(function () {

    //$("#reg-model-dialog").modal();
    /*   $('#reg-dialog-btn').click(function(){
                                                $('#reg-model-dialog').css('display','inline');
                                             }); */

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:25:11.580

如果你想要一个 JS 解决方案：

```
$('#reg-dialog-btn').click(function () {
    $('#reg-model-dialog').modal('show');
}); 
```

[**小提琴**](http://jsfiddle.net/Mfc7M/5/)

在这种情况下，`#reg-dialog-btn`的`data-*`属性是不必要的。

Bootstrap 模态的`show`,`hide`和`toggle`方法在[此处](http://twitter.github.io/bootstrap/javascript.html#modals)记录。

I personally dislike putting too many `data-*` attributes in the HTML as it mixes structure with behavior, but setting a `data-target` or `href` attribute to `"#reg-model-dialog"` as in @Pigueiras' solution will work fine too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:26:18.387

The `href` attribute is wrong, you have to make reference to the modal ID. In your case, the R button should be:

```
<a data-toggle="modal" href="#reg-model-dialog" class="btn btn-primary btn-large" 
         id="reg-dialog-btn">R</a> 
```

Instead of:

```
<a data-toggle="modal" href="#regstration" ...></a> 
```

You can look at it working here: [Jsfiddle](http://jsfiddle.net/eugip9/xcBr8/)

# php - 将值“001”添加到mysql数据库

> ID：15867958
> 
> 赞同：2
> 
> 时间：2013-04-07T21:19:52.773
> 
> 标签：php, mysql

我正在尝试将值“006”添加到 MySql 行，但它显示为“6”！我的代码有什么修复吗？

```
$id = "006";

mysql_query("INSERT INTO Table (id) VALUES ($id) "); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:23:39.420

If`id`是一个数字列，例如整数，`006`与 相同，`6`因此无法显式保存`006`，因为它与`6`.

但是，如果您想将该整数检索为 3 位零填充字符串，则可以使用该`LPAD`函数`0`在左侧用 's 填充它：

```
SELECT LPAD(id, 3, '0') as id FROM table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:26:17.490

虽然这不是一种安全的方式：

```
$id = "006";

mysql_query("INSERT INTO Table (id) VALUES ('$id') "); 
```

我认为您忘记了一些关于值的引号，因此将其转换为 int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:23:52.743

您的字段需要是 VARCHAR 才能按您的意愿工作。当您运行查询时，您也可以填充前导零作为替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T21:24:26.490

1.  我想这只是不正确的值（对于 int 字段类型）并且根本无法存储。
2.  用于存储**数据**的数据库，是指没有任何附加格式的数据，可以在选择时添加。这就是这件事的一般运作方式。

所以，我建议存储一个常规的 int，并在选择时间用你希望的任意数量的零填充它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T07:21:10.683

尝试在mysql中使用查询。

`ALTER TABLE table MODIFY COLUMN id INT(3) ZEROFILL;`

这可能会解决您的问题。

# java - 在 Java 中降低时间和空间复杂性的最佳方法是什么？

> ID：15867959
> 
> 赞同：0
> 
> 时间：2013-04-07T21:19:53.187
> 
> 标签：java, optimization

我正在编写一个程序，我担心它运行所需的时间和所需的空间。

在程序中，我使用了一个变量来存储数组的长度：

```
int len=newarray3.length; 
```

现在，我想知道我是否能够通过不使用 len 变量来降低空间复杂度，而是`newarray3.length;`在需要时调用。

注意：只有两种情况需要使用长度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T21:21:33.537

“我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源” - Donald Knuth

首先，单个`int`变量使用的空间可以忽略不计。更一般地说，不要担心这些次要的性能（“时间和空间”）问题。专注于编写清晰易读的程序和高效的算法。如果性能成为一个问题，那么只要您的通用架构是可靠的，您就可以进行优化。所以专注于那个架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:21:59.687

我真的怀疑这会提高你的表现。无论如何，我会使用 newarray3.length （而不是分配给一个占用内存并添加另一个操作的新变量）。无论如何，这是一个字段（甚至不是方法调用）。读取它与读取您复制的 int 值相同，但您可以节省复制和 int 消耗的 4 字节内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:27:39.830

Java 数组不可调整大小，因此该对象的长度成员变量是常量，这可能导致 JIT 进行各种优化。

# fosuserbundle - 双击确认链接时出现 fosuserbundle 错误？

> ID：15867960
> 
> 赞同：6
> 
> 时间：2013-04-07T21:19:53.257
> 
> 标签：fosuserbundle, symfony-2.2

我刚开始使用fosuserbundle，今天我激活了确认注册链接。效果很好，但是如果用户再次单击电子邮件中的确认链接，他会收到该错误：

具有确认令牌“3hiqollkisg0s4ck4w8g0gw4soc0wwoo8ko084o4ww4sss8o4”的用户不存在 404 Not Found - NotFoundHttpException

我认为这个错误应该由捆绑包处理，不是吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-06T07:46:23.123

这是覆盖操作的代码。基本上只是复制了实际 FOS 动作的一部分并进行了修改。

在用户包的控制器文件夹中创建一个 RegistrationController.php 文件，并将覆盖的 RegistrationController 类放在那里。

假设您的用户包是 Acme\UserBundle：

```
<?php

// Acme\UserBundle\RegistrationController.php

namespace Acme\UserBundle\Controller;

use Symfony\Component\HttpFoundation\RedirectResponse;
use FOS\UserBundle\Controller\RegistrationController as BaseController;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

class RegistrationController extends BaseController
{
    /**
     * Receive the confirmation token from user email provider, login the user
     */
    public function confirmAction(Request $request, $token)
    {
        $userManager = $this->container->get('fos_user.user_manager');

        $user = $userManager->findUserByConfirmationToken($token);

        if (null === $user) {

            /* ************************************
            *
            * User with token not found. Do whatever you want here
            *
            * e.g. redirect to login: 
            *
            * return new RedirectResponse($this->container->get('router')->generate('fos_user_security_login'));
            *
            **************************************/ 

        }
        else{
            // Token found. Letting the FOSUserBundle's action handle the confirmation 
            return parent::confirmAction($request, $token);
        }
    }
} 
```

# ios - 如何使用 Google Analytics iOS SDK 跟踪内容视图

> ID：15867964
> 
> 赞同：0
> 
> 时间：2013-04-07T21:20:20.067
> 
> 标签：ios, google-analytics

我只是在实现 Google Analytics iOS SDK。我遇到的问题是谷歌提供了这种类型的跟踪。

```
Campaigns
Crashes and Exceptions
Custom Dimensions & Metrics
ECommerce
Events
Screens
Sessions
Social Interactions 
```

现在我有一个播放视频的“MeidaPlayer”ViewController。使用“屏幕”，我可以跟踪查看了“MeidaPlayer”屏幕，但如何跟踪选择/播放了哪个视频？

我认为事件不是正确的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:44:58.947

我最终使用了事件，就像 Eduardo 建议的那样。

# sql - 在 sql developer 上运行 Create table student 时出错：CREATE TABLE students

> ID：15867966
> 
> 赞同：0
> 
> 时间：2013-04-07T21:20:42.290
> 
> 标签：sql

```
CREATE TABLE students (
Year          NUMBER(4) NOT NULL,
Semester VARCHAR2(1) NOT NULL CONSTRAINT stu_sem_ck CHECK (semester IN ('1', '2', '3')),
department    VARCHAR2(3) NOT NULL,
course_number NUMBER NOT NULL,
session       VARCHAR2(3),
first_name    NVARCHAR2(10),
Middle_name   NVARCHAR2(15),
last_name     NVARCHAR2(15) NOT NULL,
id            NUMBER(9) NOT NULL,
area_code     VARCHAR2(3),
phone_number  VARCHAR2(7),
email_address NVARCHAR2(60),
Street1       NVARCHAR2(20),
street2       NVARCHAR2(20),
city          NVARCHAR2(20),
State_prov    NVARCHAR2(20),
country       CHAR(2),
postal_code   NVARCHAR2(15),
language      CHAR(2),
CONSTRAINT student_pk PRIMARY KEY (id)) 
```

在 SQL devloper 上运行时，它给了我以下错误

```
Error starting at line 2 in command:
CREATE TABLE students (
Year          NUMBER(4) NOT NULL,
Semester VARCHAR2(1) NOT NULL CONSTRAINT stu_sem_ck CHECK (semester IN ('1', '2', '3')),
department    VARCHAR2(3) NOT NULL,
course_number NUMBER NOT NULL,
session       VARCHAR2(3),
first_name    NVARCHAR2(10),
Middle_name   NVARCHAR2(15),
last_name     NVARCHAR2(15) NOT NULL,
id            NUMBER(9) NOT NULL,
area_code     VARCHAR2(3),
phone_number  VARCHAR2(7),
email_address NVARCHAR2(60),
Street1       NVARCHAR2(20),
street2       NVARCHAR2(20),
city          NVARCHAR2(20),
State_prov    NVARCHAR2(20),
country       CHAR(2),
postal_code   NVARCHAR2(15),
language      CHAR(2),
CONSTRAINT student_pk PRIMARY KEY (id))
Error at Command Line:6 Column:1
Error report:
SQL Error: ORA-00904: : invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error starting at line 1 in command:
CREATE TABLE students ( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:59:44.893

`SESSION`是Oracle保留字，不允许重新定义保留字的含义。

重命名您的列

```
session 
```

到一个不是保留字的名称。你应该没事！

参考 - [http://docs.oracle.com/cd/B10501_01/appdev.920/a42525/apb.htm](http://docs.oracle.com/cd/B10501_01/appdev.920/a42525/apb.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:59:55.497

SESSION 是 Oracle 中的保留关键字。但是，如果您想将其用作列名，请使用双引号。因此改变

```
session       VARCHAR2(3), 
```

至

```
"session"       VARCHAR2(3), 
```

否则只需重命名该列。

**这是[SQLFiddle](http://sqlfiddle.com/#!4/bf62d5/1)**

# python - Python：正则表达式中带有通配符的字符串

> ID：15867967
> 
> 赞同：1
> 
> 时间：2013-04-07T21:20:58.183
> 
> 标签：python, full-text-search, escaping, wildcard

我想做的是允许用户输入诸如：“Torsion ? Group”、通配符和所有（通配符是一个完整的单词）之类的内容，并根据是否找到返回真假。那么我会有诸如 \b*\b 之类的东西吗？Python 手册说 \bfoo\b 将匹配 "something foo something else" 和 "foo." 形式的字符串。我遇到的问题是我什至试图开始简单地修改我发现的另一个示例：

```
inputstring = 'What is a Torsion Abelian Group (TAB)?' 
str1 = "Abelian"
output = re.search("Torsion" + \bstr1\b + "Group", inputstring)
print output 
```

但是我得到了输出：

```
output = re.search("Torsion" + \bstr1\b + "Group", inputstring)
                                ^
SyntaxError: unexpected character after line continuation character 
```

因此，我很难找到一个已知的字符串，更不用说通配符了。任何关于任何一个的想法都将非常感激。

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:22:40.680

Python 将不知道如何处理您的两个`\b`，并假定您有一个名为 的变量`\bstr1\b`，而不是`str1`. 您将需要分隔`\b`and `str1`，并用引号括起正则表达式语法或删除它们。您还应该[在此处](http://www.regular-expressions.info/wordboundaries.html)仔细检查以确保这 `\b`是您应该使用的语法。

```
output = re.search("Torsion " + str1 + " Group", inputstring) 
```

或者更清洁

```
output = re.search("Torsion %s Group" % str1, inputstring) 
```

这是完整的代码：

```
inputstring = 'What is a Torsion Abelian Group (TAB)?'
str1 = "Abelian"
output = re.search("Torsion %s Group" % str1, inputstring)
if output:
    print str(output.group(0)) 
```

并返回以下输出：

```
Torsion Abelian Group 
```

# android - 无法从 Play 开发者控制台 v2 中删除草稿 APK：“请检查表单是否有错误”

> ID：15867973
> 
> 赞同：2
> 
> 时间：2013-04-07T21:21:30.353
> 
> 标签：android, apk, google-play

我是 android 开发的新手，并且设法让我的 v2 开发者控制台处于某种状态。有多个 APK（这是​​一款针对不同设备具有多种纹理压缩方案的游戏）。我已经上传了所有新的 APK，并将旧的 APK 存档。我正在尝试从版本 *055 升级到 *057。

有一面巨大的红色文字墙：

```
This configuration cannot be published for the following reason(s):
    It is forbidden to downgrade devices which previously matched version 2009 to version 1057, which would occur when 
    API levels in range 8+ and 
    Screen layouts containing any of [small, normal, large, xlarge] and 
    Native platforms containing any of [armeabi-v7a] and 
    OpenGL ES versions in range 2.0+ and 
    OpenGL textures containing any of [GL_EXT_texture_compression_s3tc] and containing any of [GL_OES_compressed_ETC1_RGB8_texture] but excluding all of [GL_AMD_compressed_ATC_texture, GL_ATI_texture_compression_atitc, GL_EXT_texture_compression_dxt1, GL_EXT_texture_compression_dxt5, GL_IMG_texture_compression_pvrtc] and 
    Features containing all of [android.hardware.sensor.ACCELEROMETER, android.hardware.TOUCHSCREEN, android.hardware.touchscreen.MULTITOUCH, android.hardware.WIFI]. 
```

点击重置草稿会显示一个红色横幅，上面写着`The application could not be saved, please check the form for errors.`在任何单个 APK 上点击删除都显示相同的内容。

新的开发者控制台似乎没有很多帮助，所以我不知道如何修复红色文本墙以及为什么我不能删除或重置任何东西。任何指针？

更新：

看起来我可以从旧的开发者控制台发布，但我还没有尝试过，即使我可以，当他们淘汰旧的控制台时，我仍然会碰壁。

我挖出了 2009 版，它支持 S3TC 纹理以及 DXT*。那是 10 多个版本之前，远在我的时间和之前的开发离开之前（他们不是一直都这样吗？）。2009 是最后一个支持 S3TC 的版本。从那以后，这就是我的内部版本号与纹理的对应方式：

```
4***: GL_ATI_texture_compression_atitc, GL_AMD_compressed_ATC_texture
3***: GL_IMG_texture_compression_pvrtc
2***: GL_EXT_texture_compression_dxt1, GL_EXT_texture_compression_dxt5
1***: GL_OES_compressed_ETC1_RGB8_texture 
```

我正在使用 Unity 4 制作我的 APK，因此我认为没有任何空间可以更改与纹理压缩对应的构建号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:03:59.490

Unity v4.1.x 似乎解决了这个问题：DXT 选项现在导出 dxt1 和 s3tc。耶！

Grr：它不再支持DXT5，所以我也遇到了同样的问题，但是用的是我以前的版本。我必须手动将 DXT5 添加到清单中，这很糟糕。

# php - 如何使用 pdo 从数组中获取特定数据

> ID：15867976
> 
> 赞同：0
> 
> 时间：2013-04-07T21:21:42.723
> 
> 标签：php, arrays, pdo

这是来自 php pdo 查询的结果数组。

我怎样才能得到例如只有`sitetitle`“ `langCode`en”的？

```
Array
( [0] => Array ( [id] => 3 [alias] => home [sitetitle] => LALALA [langCode] => de [langName] => Deutsch ) [1] => Array ( [id] => 3 [alias] => home [sitetitle] => LOLOLO [langCode] => en [langName] => English ) [2] => Array ( [id] => 3 [alias] => home [sitetitle] => LELELE [langCode] => es [langName] => EspaÃ±ol )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:39:29.813

这将迭代数组，找到 langCode =='en' 的第一个元素并返回它的站点标题。如果没有元素有 langCode =='en'，它将返回一个空字符串。

```
function getEngSiteTitle($arr){
    for each($arr as $v)
        if($v['langCode']=='en')return($v['siteTitle']);
    return('');
} 
```

# java - 对于专家，我需要在 java 中使用 sql 创建一个新数据库

> ID：15867978
> 
> 赞同：0
> 
> 时间：2013-04-07T21:21:51.133
> 
> 标签：java, mysql, jdbc

我花了 4 天时间在 java 中使用 SQL 搜索新的数据库创建。我发现我可以通过使用以下代码来做到这一点，但我没有得到我想要的。

据我所知，没有创建数据库。如何确定数据库是否已创建？

我的代码是

```
 public class DataManaging {

    private Connection Connecter;

    private Statement Stat;

    private ResultSet Result;

    private String pass,user;

    public DataManaging(){
        user = "root";
        pass = "root";
      try{
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            try {
                  Connecter = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306", user, pass);
                  Stat = Connecter.createStatement();
                  Stat.executeUpdate("CREATE DATABASE IF NOT EXISTS FATEH;");

                  Stat.executeUpdate("USE FATEH");
                  Stat.executeUpdate("CREATE TABLE IF NOT EXISTS ROOMS(N INT auto_increment PRIMARY key,Floor INT NOT NULL,Class VARCHAR(1) NOT NULL,Situation VARCHAR(10),Reservation_Date DATE,Duration INT,Reserver_Name VARCHAR(40) NOT NULL)");

              } catch (SQLException e) {
                  System.out.println("SQLException: " + e.getMessage());
                  System.out.println("SQLState: " + e.getSQLState());
                  System.out.println("VendorError: " + e.getErrorCode());
              }
      }catch (Exception ex) {
          System.out.println(ex);
      }
    }
}
} 
```

运行代码后我得到

```
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:17:40.957

这是另一个例子： [http ://www.tutorialspoint.com/jdbc/jdbc-create-database.htm](http://www.tutorialspoint.com/jdbc/jdbc-create-database.htm)

我不确定您是否可以`use <databasename>`与 JDBC 一起使用

也许您应该关闭连接并尝试使用此 URL 连接到新数据库

`jdbc:mysql://127.0.0.1/databaseName`

# vb.net - 指针转换器返回不正确的值

> ID：15867981
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:09.877
> 
> 标签：vb.net, pointers, hex, converter, z80

我正在尝试创建一个 Z80 偏移指针转换器，但是当我编译程序并对其进行测试时，输出变量为零。

它背后的数学是这样的：

1.  获取您希望指向的偏移量。
2.  取偏移量的最后四位数字，并切断其余数字。
3.  如果偏移量超出 &H4000 - &H7FFF 范围，则必须按如下方式转换：(offset % &H4000) + &H4000。换句话说：
    *   如果偏移量是从 &H0000 到 &H3FFF，则将 &H4000 添加到偏移量。
    *   如果偏移量是从 &H4000 到 &H7FFF，不要对偏移量做任何事情。
    *   如果偏移量是从 &H8000 到 &HBFFF，则从偏移量中减去 &H4000。
    *   如果偏移量是从 &HC000 到 &HFFFF，则从偏移量中减去 &H8000。

单击转换按钮时调用的事件代码如下：

```
Private Sub ConvertButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ConvertButton.Click
    If GetOffsetRadioButton.Checked Then
        If OffsetTextBox.TextLength > 0 Then
            CoreActions.OffsetToPointer()
            PointerTextBox.Text = CoreActions.NewOffset
            PointerBankTextBox.Text = CoreActions.NewBank
        End If
    End If
End Sub 
```

此外，这是转换背后的代码，在 CoreActions 模块中

```
Module CoreActions
    Friend HexOffset As String = CoreForm.OffsetTextBox.Text
    Friend PointerOffset As UInteger
    Friend PointerBank As UInteger
    Friend NewBank As String
    Friend NewOffset As String
    Friend Sub OffsetToPointer()
        Dim DecOffset As Integer = Val("&H" & HexOffset)
        PointerBank = DecOffset Mod 16384 ' 16384 = &H4000
        PointerOffset = DecOffset Mod 65536 ' 65536 = &H10000
        NewBank = Convert.ToString(PointerBank, 16)
        NewOffset = Convert.ToString(PointerOffset, 16)
    End Sub
End Module 
```

输出结果一无所有的地方到底出了什么问题？我在运行时没有收到任何异常或警告...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:36:32.793

基本上，这将给出你想要的结果。

```
Dim FixedOffset As Integer = (DecOffset And &H3FFF) Or &H4000 
```

# ruby-on-rails - high_voltage gem 可以处理 .haml.html 文件吗？

> ID：15867982
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:11.903
> 
> 标签：ruby-on-rails, gem, haml

该文档没有提到haml，我无法通过谷歌搜索找到答案。有没有人让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:38:13.340

我很笨！因为 gem 'haml-rails' 出现在`rvm gem list`我认为它已安装的输出中......它不是！

# php - 表单未将输入元素提交到 php 文件

> ID：15867984
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:20.713
> 
> 标签：php, jquery

我有一个在页面加载时隐藏一半的表单，当用户单击第一个输入框时，表单的其余部分显示在它下面......我现在尝试将文件提交到 php 页面并回显什么包含的输入元素......但是，这不起作用......我感觉这是因为页面加载时隐藏了一半的表单......

这是表单的代码

```
<form action='new-question.php' method='post' id='new-question-form'>
   <input type='text' name='title' class='shown-input' placeholder='Ask a new question'>
   <!-- HIDDEN UNLESS CLICKED -->
   <div class='hidden-until-click'>
      <textarea name='details' placeholder="Enter your question details..."></textarea>
      <button type='button' id='upload-question' class='btn'>
         <img src='assets/images/css_images/upload.png'>
         upload
      </button>
      <input type='submit' name='submit-question' id='submit-question' value='Go!' class='bttn bttn-blue tiny'>
   </div>
   <!-- END HIDDEN UNTIL CLICKED-->
</form> 
```

和我的 php 文件

```
 <?php
     if (isset($_POST['submit-question'])){
        echo $_POST['title'];
     } else {
         echo "Nothing submitted;
     }
    ?> 
```

它只是一直说什么也没提交....

这是我隐藏 div 的方法：

```
$(".hidden-until-click").hide(); 
```

然后像这样显示

```
$(".widget.small form#new-question-form .hidden-until-click").show(); 
```

这里是 var_dump($_POST):

```
array(2) {
  ["title"]=>
  string(0) ""
  ["details"]=>
  string(0) ""
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:36:48.907

将此隐藏字段放入表单后尝试

```
<input name="submit-question" type="hidden" value="yes"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:30:01.863

一切对我来说都很好！

你唯一的问题是

```
 if (isset($_POST['submit-question'])){
        echo $_POST['title'];
     } else {
         echo "Nothing submitted;
     } 
```

你必须`echo "Nothing submitted;`像这样关闭`echo "Nothing submitted";`

# delphi - 从服务执行外部应用程序

> ID：15867987
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:26.013
> 
> 标签：delphi, service

我正在尝试从服务运行外部应用程序，

我尝试了不同的解决方案，但到目前为止没有任何效果。

`ShellExecute`我发现它不能从服务中使用

和`WinExec`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:35:14.007

您可以从服务运行应用程序，但从 Vista 开始，您不会在用户桌面上看到它们。

运行任务管理器将显示应用程序仍然启动。
[MSDN 互动服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683502%28v=vs.85%29.aspx)

目前已有与桌面交互的机制，但这超出了框架。 [在 Windows Vista 及更高版本中从 Windows 服务启动交互式进程](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T21:56:41.113

服务在会话 0 中运行，但这是一个非交互式会话。因此，如果其他进程是交互式的，您需要确保它在交互式会话中运行。这是安排的相当技巧，但并非不可能。详细信息可以在这里找到：http: [//blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-后来的.aspx](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)

# c++ - 块密码代码

> ID：15867988
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:27.560
> 
> 标签：c++, arrays, string, encryption, multidimensional-array

我的任务是编写一个程序，它读取标准输入，存储文本直到遇到 EOF，然后使用凯撒分组密码对文本进行加密。

解决方案的步骤：

1.  所以：将您的消息读入一个大缓冲区或字符串对象。
2.  是否删除空格和标点符号
3.  然后计算消息中的字符。
4.  选择第一个大于消息长度的完美正方形，分配一个该大小的 char 数组。
5.  从左到右，从上到下，将消息读入该大小的方形数组。
6.  从上到下，从左到右写下信息，您就已经对其进行了加密。

这就是我到目前为止所拥有的......它编译但不做任何事情。我知道我一定错过了什么。任何帮助将不胜感激。

```
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cstdlib>
#include <fstream>
#include <ctype.h>
#include <cstring>
#include <cmath>
#include <string>
using namespace std;

int main()
{
    // read in char from keyboard
    string buff;
    do
    {
        cin >> buff;
    } while ( ! cin.eof()) ;

    // delete spaces and punctuation
    for ( int i = 0 ; i < sizeof ( buff ) ; i++ )
    {
        if  ( !isalnum ( buff[i] )  )
        {
            buff.erase( i,1 );
            --i;
        }
    }

    // get length of edited string
    int static SIZE = buff.length(); //strlen (buff);

    // pick first perfect _square_ greater then the message length (ex:7x7)
    int  squared = static_cast <int> ( sqrt( static_cast <double> ( SIZE )) + .5f );

    // allocate an array of char that size
    char ** board;
    board = new char *[squared];      // array of 'squared' char pointers
    for ( int i = 0 ; i < squared ; i++ )
        board[i] = new char[squared];

    // read messsage into a square array of that size from left to right top to bottom
    for ( int c = 0 ; c < squared  ; c++ )
        for ( int r = 0 ; r < squared ; r++ )
            buff[r] = board[r][c];

    // write the message out top to bottom, left to right and its been encyphered
    for ( int r = 0 ; r < squared  ; r++ )
        for ( int c = 0 ; c < squared ; c++ )
            cout << board[r][c] << endl;

    // delete array
    delete [] board;
    for ( int i = 0 ; i < squared ; ++i )
        delete [] board[i] ;

} // end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:49:43.753

我尝试编译您的代码并运行它 - 发现了许多问题。

1）您的“擦除”循环进入无限循环。从数组的开头开始，循环遍历所有元素，在遍历时删除元素，并期望事情在最后是正确的，这通常是非常糟糕的做法。从最后开始并向后工作要安​​全得多：

```
for(ii = buff.length() - 1; ii>=0; ii--) {
  if  ( !isalnum ( buff[i] )  )
    {
    cout << "erasing " << buff[i] << endl;
    buff.erase( i,1 );
    }
  }
} 
```

你做

```
delete [] board; 
```

在删除数组中的单个元素之前...不确定语法是什么，但它看起来不对我！

你的板子不够大。您必须使用该`ceil`功能来确保您真正获得“下一个最大”的数字：

```
square = ceil(sqrt(buff.length())); 
```

最重要的是：您将（空）缓冲区复制到输入字符串中，而不是相反：

```
buff[r] = board[r][c]; 
```

应该是哪个

```
ii = 0;
for(( int c = 0 ; c < squared  ; c++ )
  for ( int r = 0 ; r < squared ; r++ )
    board[r][c] = buff[ii++]; 
```

可能还有其他人……仍在解决问题。

编辑：这是完整的工作代码。

```
 // read in char from keyboard
    int i;
    string buff;
    cout << "enter the text to be encoded" << endl;
    getline(cin,buff);
    cout << "done reading in the text!" << endl;
    cout << "buffer size is " << buff.length() << endl;
    cout << "the string is " << endl << buff << endl;
    // delete spaces and punctuation
    for ( i = buff.length()-1 ; i >=0 ; i--)
        {
            if  ( !isalnum ( buff[i] )  )
           {
           buff.erase( i,1 );
            }
        }

// get length of edited string
 int static SIZE = buff.length(); //strlen (buff);
cout << "the string length is " << SIZE << endl;

 // pick first perfect _square_ greater then the message length (ex:7x7)
int  squared = static_cast <int> ( ceil(sqrt( static_cast <double> ( SIZE ))));
cout << "size of board is " << squared << endl;
// allocate an array of char that size
char ** board;
board = new char *[squared];      // array of 'squared' char pointers
for ( i = 0 ; i < squared ; i++ )
    board[i] = new char[squared];

// read messsage into a square array of that size from left to right top to bottom
i = 0;
for ( int c = 0 ; c < squared  ; c++ )
    for ( int r = 0 ; r < squared ; r++ )
       board[r][c] = toupper(buff[i++]);

  // write the message out top to bottom, left to right and its been encyphered
 for ( int r = 0 ; r < squared  ; r++ ){
    for ( int c = 0 ; c < squared ; c++ ){
        cout << board[r][c];}
    cout << endl;
    }

   // delete array
    for ( i = 0 ; i < squared ; ++i )
     delete [] board[i] ;

    delete [] board;
} // end main 
```

注意我改变了输入法是为了得到一个完整的句子，而不仅仅是一个单词；我将所有字符转换为大写（非常罗马 - 这意味着在句子开头、名称等处没有关于字符的提示），仅在完整的输出行（而不是每一行）的末尾添加了一个回车符，以及之前发现的问题。

快乐加密！哦 - 事后才想到。一旦您确认事情看起来不错（通过阅读列中的文本很容易做到），您将希望摆脱输出中的回车。它当然应该显示为没有这些中断的单行文本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:30:26.350

这很奇怪

```
string buff;
do
{
    cin >> buff;
} while ( ! cin.eof()); 
```

不知道你认为这会实现什么。为什么不只是这个？

```
string buff;
cin >> buff; 
```

另一个错误

```
for ( int i = 0 ; i < sizeof ( buff ) ; i++ ) 
```

应该

```
for ( int i = 0 ; i < buff.length() ; i++ ) 
```

几行之后你就正确了，所以不知道为什么这里是错误的。

# ruby - Ruby - 按时区对 MongoDB 记录进行排序？

> ID：15867990
> 
> 赞同：2
> 
> 时间：2013-04-07T21:22:29.527
> 
> 标签：ruby, mongodb, geolocation, timezone

我有一组带有地理空间索引的文档`location: {lat:XX.XXXX, lng:XX.XXXX}`。但我希望它们由 TimeZone 输出。

我正在考虑将地理位置转换为时区，并有一个基于此的索引，但我也不知道该怎么做，或者无论如何使用地理空间索引是否会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:37:41.873

MongoDB 可以检查是否包含在`GeoJSON`使用`$geoWithin`查询条件中描述的任意多边形中的点。您可以创建一个新的时区文档集合，它们的位置多边形位于`GeoJSON`. 为此，请尝试[此 GitHub 存储库](https://github.com/straup/whereonearth-timezone)。我对[这个相关的 SO 问题](https://stackoverflow.com/questions/15866490/mongodb-check-if-a-point-is-inside-a-stored-polygon/15870339#15870339)的回答也可能很有用。

获得时区集合后，您可以预先计算 TZ，将其存储在文档中并为其编制索引以加快查询速度。您需要提出时区的排序。与 UTC 的偏移量可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:33:36.400

Sim 提供的出色答案将让您在自己的代码中完成所有这些工作 - 但它确实需要一些开销。如果您只想将位置解析为时区，并且不介意调用外部服务，您可以使用[Google 的 Time Zone API](https://developers.google.com/maps/documentation/timezone/)。

另请参阅[此相关问题](https://stackoverflow.com/q/8349817/634824)及其答案。

# doctrine-orm - Doctrine 2 如何在运行时设置实体表名（Zend 2）

> ID：15867994
> 
> 赞同：1
> 
> 时间：2013-04-07T21:22:42.187
> 
> 标签：doctrine-orm, zend-framework2, scalability

我正在使用 Zend 2 和 Doctrine 2 构建一个产品，它要求我为每个用户都有一个单独的表来包含他们独有的数据。我已经创建了一个实体来定义该表的外观，但是如何更改表的名称以在运行时将数据保存到，或者实际上从中检索数据？

或者，我是否会更好地为每个用户提供自己的数据库，而只是更改我要连接的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:18:03.453

我首先会质疑设计选择。如果在运行后创建一个新用户会发生什么。必须先创建表吗？此外，您要存储什么样的数据，对我来说，这听起来像是一种非常常见的多客户端功能。喜欢：

```
tbl_clients    
- id
- name

tbl_clientdata
- client_id
- data_1_value
- data_2_value
- data_n_value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:48:46.663

如果您真的想存储用户数据，则必须采用单独的数据库路线。但这只有在每个“用户”真正相互独立时才有效。好好想想吧。

如果您正在构建某种软件即服务，而用户 A 和用户 B 只是您的两个不同客户，彼此没有任何关系，那么 N+1 数据库可能是合适的（一个 db 用于您的 N 个用户中的每一个，加上一个“元”数据库，它只保存用户帐户（可能还有与计费相关的东西）。

我在 ZF2/Doctrine2 中实现了类似的东西，而且还不错。您只需为 EntityManager 创建一个工厂，它会查找任何活动用户的数据库信息，并配置 EM 以连接到它。唯一有点棘手的地方是当你发现自己在编写某种共享作业队列时，长时间运行的工作人员需要定期切换数据库连接——但这也是可行的。

# c# - 如何将字符串拆分为 LinkedList ?

> ID：15867995
> 
> 赞同：1
> 
> 时间：2013-04-07T21:22:43.863
> 
> 标签：c#

我有一个这样的字符串：

```
string myS = "20,        21,        22,        23,        24" 
```

我想得到这个：

```
LinkedList<int> myLL = new LinkedList<int>(); 
```

我试过这个：

```
myLL = (LinkedList<int>)myS.Split(',').Select(n => int.Parse(n.Trim())); 
```

它不起作用，抛出转换错误，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T21:24:40.403

使用[`LinkedList<T>(IEnumerable<T> source)`构造函数](http://msdn.microsoft.com/en-us/library/6sb8tw8x.aspx)而不是强制转换：

```
var myLL = new LinkedList<int>(myS.Split(',').Select(n => int.Parse(n.Trim())); 
```

# java - 可比较的 compareTo 函数

> ID：15867996
> 
> 赞同：0
> 
> 时间：2013-04-07T21:22:45.817
> 
> 标签：java, string, comparable, compareto

我正在尝试使用 Comparable 函数 compareTo 两个街道地址。我目前正在处理地址的字符串（街道名称）。到目前为止，我有以下代码。我最终也希望能够比较街道号码，但我希望能够先修复此代码。每当我尝试编译此代码时，都会收到以下错误：

```
StreetAddress.java:45: error: constructor StreetAddress in class StreetAddress cannot be applied to given types;
    StreetAddress add1 = new StreetAddress("cartesian road");
                         ^
  required: no arguments
  found: String
  reason: actual and formal argument lists differ in length
StreetAddress.java:46: error: constructor StreetAddress in class StreetAddress cannot be applied to given types;
    StreetAddress add2 = new StreetAddress("cartesian road");
                         ^
  required: no arguments
  found: String
  reason: actual and formal argument lists differ in length
StreetAddress.java:47: error: constructor StreetAddress in class StreetAddress cannot be applied to given types;
    StreetAddress add3 = new StreetAddress("n kings street");
                         ^
  required: no arguments
  found: String
  reason: actual and formal argument lists differ in length
StreetAddress.java:48: error: constructor StreetAddress in class StreetAddress cannot be applied to given types;
    StreetAddress add4 = new StreetAddress("pioneer parkway");
                         ^
  required: no arguments
  found: String
  reason: actual and formal argument lists differ in length
StreetAddress.java:49: error: constructor StreetAddress in class StreetAddress cannot be applied to given types;
    StreetAddress add5 = new StreetAddress("starry avenue");
                         ^
  required: no arguments
  found: String
  reason: actual and formal argument lists differ in length
5 errors 
```

* * *

```
public class StreetAddress implements Comparable<StreetAddress>
{
protected int num;
protected String stName;

public void StreetAddress(int n, String s){
num = n;
stName = s;
}

public int getNum(){
    // returns the street number
    return num;
}

public String getName(){
    // returns the street name
    return stName;
}

public int compareTo(StreetAddress street) throws ClassCastException{
    // exception prevents crash if an address is not compared to
    // another address
    StreetAddress x = (StreetAddress) street;
    int compareName = this.stName.compareTo(street.stName); 
    if (compareName < 0){
        // first address comes after compared address
        System.out.println("test<0");
    }

    else if (compareName == 0){
        // same address
        System.out.println("test equal");
    }

    else{
        // first address comes before compared address
        System.out.println("test > 0");
    }

    }

public static void main(String args[])
{
StreetAddress add1 = new StreetAddress("cartesian road");
StreetAddress add2 = new StreetAddress("cartesian road");
StreetAddress add3 = new StreetAddress("n kings street");
StreetAddress add4 = new StreetAddress("pioneer parkway");
StreetAddress add5 = new StreetAddress("starry avenue");
add1.compareTo(add2);
add4.compareTo(add1);
add3.compareTo(add3);
add2.compareTo(add5);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:25:17.937

正如您所指出的，问题在于：

```
compareName == this.stName - (street.stName); 
```

You can't subtract strings. The way to get the result I think you're looking for is:

```
int result = this.stName.compareTo(street.stName); 
```

Obviously this assumes that `stName` is a `String`. If not you will have to implement `compareTo` within the class that `stName` is, as I see you have done in an edit. The issue you report with your edit is that the class is as follows:

```
class StreetName {
    // Constructor
    StreetName(int n, String st) {
         // code
    }
} 
```

However, you are trying to instantiat the class as follows:

```
StreetName fred = new StreetName("name"); 
```

You are only sending the constructor a `String`, and not an `int` with it. Assuming the number is important, you need to change that to:

```
StreetName fred = new StreetName(number, "name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:24:41.953

从另一个字符串中减去一个字符串是什么意思？这不太合理。相反，如何`compareTo(...)`在那个地方调用 String 自己的方法。加上`==`操作员不应该在那里：

```
int compareName = stName.compareTo(street.stName); 
```

此外，您的 compareTo 方法被定义为返回一个 int，因此最好返回该 int。现在它没有返回任何东西。